# StackOverflow 问答 15504000-15504999

# php - “嵌套”关系php activerecord？

> ID：15504001
> 
> 赞同：2
> 
> 时间：2013-03-19T15:43:34.563
> 
> 标签：php, phpactiverecord

我正在努力处理 PHPActiveRecord 中的关系。

我有这些表：

**用户组** ID、名称、...

**卖家：** id, group_id ...

**订单：** seller_id, id ...

而且我希望能够像 User_group->orders 那样做，但不能让它工作。

我最初的想法是这样的（不要介意语法/拼写）：

用户组

```
$has_many = array(
    array('sellers'),
    array('orders', 'through' => 'sellers')
); 
```

卖方：

```
$belongs_to = array(
    array('user_group');
);
$has_many = array(
    array('orders');
); 
```

命令：

```
$belong_to = array(
    array('seller'),
    array('user_group', 'through' => 'seller')
); 
```

我做错了什么？

谢谢！

# c# - 使用javascript将焦点设置到文本框的末尾

> ID：15504009
> 
> 赞同：0
> 
> 时间：2013-03-19T15:44:11.403
> 
> 标签：c#, javascript, jquery, textbox, focus

我编写了以下代码以将焦点设置到文本框中的文本末尾：

```
var textbox = document.getElementById('txtFilter');
textbox.focus(); 
textbox.value = textbox.value; 
```

*但我在这里面临一个问题。当我继续快速打字时，新输入的字符没有出现，它一次又一次地显示旧值。所以我必须在按下每个键后等待，然后它才能正常工作。*

我找到了另一段代码来实现这一点：

```
if (textbox.createTextRange) {               
var FieldRange = textbox.createTextRange();            
FieldRange.moveStart('character', textbox.value.length);
FieldRange.collapse();
FieldRange.select();
return false;
} 
```

但是当我尝试这个时，我得到了错误 - 由于错误 800a025e 有时无法完成操作。请帮我。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:49:07.807

您可以使用

```
$('#txtFilter').focus(); //focus using jQuery (browser indipendent)
$('#txtFilter').caretToEnd(); // move position to the end 
```

不幸的是，您需要一个插件[https://gist.github.com/DrPheltRight/1007907](https://gist.github.com/DrPheltRight/1007907)

# java - 通过作为字符串传递的字段名称访问 UIBinder 字段值？

> ID：15504010
> 
> 赞同：0
> 
> 时间：2013-03-19T15:44:17.270
> 
> 标签：java, gwt, uibinder

我想通过作为字符串值传递的名称访问由 UIBinder 呈现的字段值

有什么方法可以访问存储在 ui 字段中的数据，例如

**PersonViewImpl.ui.xml**

```
<g:TextBox ui:field="lastName"/> 
```

**PersonViewImpl.java**

```
@UIField
String lastName
public Object fieldByName(String fieldName) {
    ....
    return value;
} 
```

**PersonActivity.java**

```
PersonView view;
String ln = (String)view.fieldByName("lastName"); 
```

有什么解决办法吗？谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:26:16.480

我不建议使用这种模式来动态访问小部件。这不是真正干净的代码，很容易破坏。
如果您有很多要绑定的字段，我建议您使用[Editors](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiEditors)。

如果您仍想访问此小部件，您有 2 个选择：

1.  创建一个`HashMap`包含您所有的`TextBox`es（或您想要访问的任何字段）并使用字段名作为键。您可以创建一个辅助函数来根据键检索值。但是，您必须`HashMap`自己填充。
2.  如果您将所有小部件都放在容器小部件中（即`FlowPanel`），则可以遍历容器小部件的小部件列表并检索它们。您可能会将 id 设置为字段名以识别它们。

# pagination - instagram api中缺少分页信息

> ID：15504014
> 
> 赞同：1
> 
> 时间：2013-03-19T15:44:30.357
> 
> 标签：pagination, instagram

我通过[instagram api](http://instagram.com/developer/endpoints/)使用最流行的 api 在文档中，它说了一些关于分页和 next_url 但是当我使用下面的链接和我的应用程序 ID 时。我在 json 中没有看到任何分页信息。我错过了什么吗？ [https://api.instagram.com/v1/media/popular?client_id=CLIENT-ID](https://api.instagram.com/v1/media/popular?client_id=CLIENT-ID) 或 [https://api.instagram.com/v1/media/popular?client_id=CLIENT-ID&count=10](https://api.instagram.com/v1/media/popular?client_id=CLIENT-ID&count=10)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T19:32:22.587

您应该将分页信息返回到一个名为“分页”的对象中

```
"pagination": {
    "next_max_tag_id": "1335465136530",
    "deprecation_warning": "next_max_id and min_id are deprecated for this endpoint; use min_tag_id and max_tag_id instead",
    "next_max_id": "1335465136530",
    "next_min_id": "1335465556125",
    "min_tag_id": "1335465556125",
    "next_url": "https:\/\/api.instagram.com\/v1\/tags\/cats\/media\/recent?callback=jQuery17201362594123929739_1335440328560&_=133544032857&client_id=xxx&max_tag_id=1335465136530"
} 
```

哪个有你正在寻找的 next_url

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-30T10:51:15.680

如果请求用户的提要中的帖子少于默认查询计数，则分页信息将为空。也就是说，如果 Instagram 账号只有五张图片，则没有分页信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T03:27:16.480

官方 API 上没有很多关于分页的文档。

查看本教程以获得更多指导和深度。

[http://eduvoyage.com/search-instagram-pagination.html](http://eduvoyage.com/search-instagram-pagination.html)

您需要使用“min_tag_id”和“max_tag_id”来获取您想要的图像。

当您使用端点获取流行图像时，您可能想尝试这样的事情。 [https://api.instagram.com/v1/tags/cats/media/recent?callback=?&client_id=YOURID&max_tag_id=1364206789229](https://api.instagram.com/v1/tags/cats/media/recent?callback=?&client_id=YOURID&max_tag_id=1364206789229)

但是，如果您追求特定标签，请尝试这样的事情。 [https://api.instagram.com/v1/tags/cats/media/recent?callback=?&client_id=YOURID&max_tag_id=1364206789229](https://api.instagram.com/v1/tags/cats/media/recent?callback=?&client_id=YOURID&max_tag_id=1364206789229)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-07T21:52:58.563

`media/popular`端点没有分页对象。正如 Ryan Ore 解释的那样，一些端点提供分页，而一些端点不提供。

您通过对象检查端点是否有分页`"pagination": {}`。如果对象存在，则端点具有分页。

# c++ - C++ Winsock 套接字错误：10038 (WSAENOTSOCK)

> ID：15504016
> 
> 赞同：4
> 
> 时间：2013-03-19T15:44:35.453
> 
> 标签：c++, select, winsock

我有一个在 WinXp(i7, 2.1 Ghz) 上运行的主从应用程序 Master，从属应用程序是一个控制器板。主站向从站发送请求，从站作为响应循环向主站发送数据。从机循环发送的数据为每 0.5 毫秒 1000 字节。当 master 发出发送数据的请求时，控制台会报错。

“ Select() 函数错误代码:: 10038 ”。

这是 的代码`WSAENOTSOCK`。

该应用程序是一个单线程应用程序，从从站接收数据。从错误看来，套接字在 select 函数检查之前已关闭。

任何人都可以指点我的方向吗？

：：：源代码：：：：

```
int Receive()
{
    int rc;
    socklen_t cli_alen;
    struct timeval to;
    fd_set read_fd, write_fd, excep_fd;

    FD_ZERO(&write_fd);
    FD_ZERO(&excep_fd);

sock_again:
    if (!_isSocketOpen) 
    {
        return 0;
    }
    FD_ZERO(&read_fd);
    FD_SET(_sock_fd, &read_fd);
    to.tv_sec =  0;
    to.tv_usec = 0;
    cli_alen = sizeof(SOCKADDR_IN);

    rc = select(_sock_fd+1, &read_fd, &write_fd, &excep_fd, &to);

    if (rc == 0 )  
    {   // Timeout
        // printf("XCP Port %d : select() timded out \n", _port);
        acess = 1;
        goto sock_again;
    } 
    else if (rc == SOCKET_ERROR) 
    {
        // Error
        LogError("XCP: select() error %d", WSAGetLastError());
        closesocket(_sock_fd);
        return -1;
    }
    else 
    {
        // Data
        if (!FD_ISSET(_sock_fd, &read_fd)) 
        {
            LogError("XCP: select() wrong socket descr");
            return -1;
        }
        else
        {
            //read data
            rc = recvfrom(_sock_fd, (char *)_recvBuf, UDP_RECVBUFLEN, 0, (LPSOCKADDR)&_saddr, &cli_alen);
}
}
} 
```

:::: 已编辑 ::::

```
int CloseUdpConnection()
{
    if (closesocket(_sock_fd) == SOCKET_ERROR) {
        LogError("closesocket() error: %d", WSAGetLastError());
        return -1;
    }
    _isSocketOpen = 0;
    LogError("successfully closed socket %s:%d", _address, _port);
    return 0;
} 
```

::::: 调试跟踪 :::::

```
xcpApplication.exe -i 192.168.1.100 -p 5555
c
--> Connecting...
<-- Connection established
t
--> Setting daq signal list...
Sorting daq signal list...
Sorting done
<-- Daq signal list set
d
--> Configuring daq lists...
<-- Configuration done
r
--> Starting measurement...
<-- Measurement started

**_sock_fd: -448997078**
XCP: select() error 10038 
```

：：：：： 痕迹 ：：：：

```
--> Starting measurement...
<-- Measurement started
_sock_fd: -1963260928 
_sock_fd: 0x8afb0400
XCP: select() error 10038 
```

：：：：：： 痕迹 ：：：：

```
xcpApplication.exe -i 192.168.1.100 -p 5555

_sock_fd: 1936 _sock_fd: 0x790
successfully opened socket 192.168.1.100:5555

--> Connecting...
<-- Connection established
t
--> Setting daq signal list...
Sorting daq signal list...
Sorting done
<-- Daq signal list set
d
--> Configuring daq lists...
<-- Configuration done
c
--> Connecting...
<-- Connection established
r
--> Starting measurement...
<-- Measurement started
_sock_fd: 901186560 _sock_fd: 0x35b70400
XCP: select() error 10038 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:54:17.243

```
>net helpmsg 10038

An operation was attempted on something that is not a socket. 
```

You can safely close a socket in the TCP/IP sense, using the `shutdown()` function. But don't call `closesocket()` on a `SOCKET` handle which is in use by `select()` or `poll()`.

Actually, in Win32 you will usually prefer to use `WSAAsyncSelect` or `WSAEventSelect` instead.

If your application is single-threaded and doesn't use asynchronous callbacks, then you can't call `closesocket` during the `select` call. And I see that you return immediately after calling `closesocket`. So you must be entering the function with an invalid socket, but `_isSocketOpen` is true. Perhaps you should set that flag to false when calling `closesocket()`.

# ios - UITextField 上的 UITapGestureRecognizer

> ID：15504017
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:44:36.020
> 
> 标签：ios, xcode, uitextfield, uitapgesturerecognizer

我已将 UITableViewCell 子类化并将 UITextField 添加到该单元格，对于 UITextField 我删除了所有手势识别器（因为在一次点击后成为第一响应者）并添加了在三次点击后调用的 UITapGestureRecognizer

```
- (void)tappedOnTitle:(UITapGestureRecognizer *)recognizer{
    NSLog(@"triple");
    [titleField canBecomeFirstResponder];
} 
```

然后我的`UITextField`（titleField）代表被问到

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{

    return YES;
} 
```

它总是返回是，但键盘不显示（两种方法都被调用）。

我的问题是如何仅在三次点击时激活编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:48:03.883

使用`becomeFirstResponder`代替`canBecomeFirstResponder`

`becomeFirstResponder`只通知接收者它即将成为其窗口中的第一响应者。

`canBecomeFirstResponder`返回一个布尔值，指示接收者是否可以成为第一响应者。

```
- (void)tappedOnTitle:(UITapGestureRecognizer *)recognizer{

    [titleField becomeFirstResponder];
} 
```

# mysql - 在 Mysql 中使用 id 从表中删除许多行

> ID：15504020
> 
> 赞同：82
> 
> 时间：2013-03-19T15:44:44.267
> 
> 标签：mysql, sql, sql-delete

我是一名 Linux 管理员，只了解 MySQL 查询的基本知识

我想使用**id**从我的表中删除许多作为 ip 地址的表条目，

目前我正在使用

```
DELETE from tablename where id=1;
DELETE from tablename where id=2; 
```

但我必须删除 254 个条目，所以这个方法需要几个小时，我如何告诉 mysql 删除我指定的行，因为我想跳过从这 254 个条目中删除一些条目。

删除整个表并导入所需的条目不是一种选择。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2013-03-19T15:48:25.217

最好的方法是使用`IN`语句：

```
DELETE from tablename WHERE id IN (1,2,3,...,254); 
```

`BETWEEN`如果您有连续的 ID，您也可以使用：

```
DELETE from tablename WHERE id BETWEEN 1 AND 254; 
```

您当然可以使用其他 WHERE 子句限制某些 ID：

```
DELETE from tablename WHERE id BETWEEN 1 AND 254 AND id<>10; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T15:45:38.910

如何使用`IN`

```
DELETE FROM tableName
WHERE ID IN (1,2) -- add as many ID as you want. 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-19T15:49:11.750

如果您只需要保留几行，请考虑

```
DELETE FROM tablename WHERE id NOT IN (5,124,221); 
```

这将只保留一些记录并丢弃其他记录。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-19T15:46:00.450

像这样的东西可能会让它更容易一些，你显然可以使用脚本来生成它，甚至是 excel

```
DELETE FROM tablename WHERE id IN (
1,
2,
3,
4,
5,
6
); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-19T15:49:20.187

其他人建议`IN`，这很好。您还可以使用范围：

```
DELETE from tablename where id<254 and id>3; 
```

如果要删除的 id 是连续的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-19T15:52:47.010

如果您的数据中有一些“条件”来计算 254 个 id，您可以使用：

```
delete from tablename
where id in 
(select id from tablename where <your-condition>) 
```

或者简单地说：

```
delete from tablename where <your-condition> 
```

在任何情况下，简单地对 id 列的 254 个值进行硬编码都是非常困难的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-19T15:46:29.683

使用`IN`条款

```
 DELETE from tablename where id IN (1,2); 
```

或者您可以合并使用`BETWEEN`和`NOT IN`以减少您必须提及的数字。

```
DELETE from tablename 
where (id BETWEEN 1 AND 255) 
AND (id NOT IN (254)); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-09-30T10:23:54.830

```
DELETE FROM table_name WHERE id BETWEEN 1 AND 256; 
```

试试这个。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-02-10T09:17:12.833

希望能帮助到你：

```
DELETE FROM tablename 
WHERE tablename.id = ANY (SELECT id FROM tablename WHERE id = id); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-08T23:24:07.683

```
DELETE FROM tablename WHERE id > 0;
OR
DELETE FROM tablename WHERE id <255; 
```

它从 1 到 254 删除 id

# iphone - 添加观察者：名称

> ID：15504022
> 
> 赞同：0
> 
> 时间：2013-03-19T15:44:52.543
> 
> 标签：iphone, ios, xcode, nsnotificationcenter, addobserver

我正在使用这样的 addObserver ：

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(notificationReceived:) name:nil object: nil]; 
```

一切正常，但我认为当我不再需要它时移除观察者可能是一种很好的形式......我发现我需要使用这一行：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"observerName" object:nil]; 
```

问题是，当我更改我的 addObserver 行以包含名称以便 removeObserver 知道要删除哪个观察者时，不再调用通知。此行运行但在添加名称时被忽略：

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(notificationReceived:) name:@"observerName" object: nil]; 
```

我可以将名称设置回 nil 并且它再次起作用。有人知道我在这里做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:52:50.920

我认为您可能会误认为参数的含义。

`name:`告诉系统您想要了解哪些通知。

`self`是实际的观察者，所以当你`removeOberserver:self`停下来接收*任何*通知时。

您应该再次仔细阅读文档以了解其含义：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000219-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000219-SW1)

例如，请参阅[如何在 Objective-C 中创建一个通过 NSNotificationCenter 发送和接收事件的类？](https://stackoverflow.com/questions/2286347/how-to-create-a-class-to-send-and-receive-events-through-nsnotificationcenter-in)

# jquery - jquery 插件 Isotope 似乎不起作用。我究竟做错了什么？

> ID：15504030
> 
> 赞同：0
> 
> 时间：2013-03-19T15:45:06.843
> 
> 标签：jquery, jquery-isotope

我正在尝试为 jquery 使用同位素插件所以，我有一个正在使用 jquery 1.9.1、jqueryui 1.10.1 和 bootstrap 2.3.1 开发的网站。

我正在尝试对容器进行排序甚至添加项目，但似乎没有任何效果。事件触发，同位素代码被调用，但没有任何排序，也没有添加任何项目......

这是一个带有 jquery 1.9.1 和 jquery 1.9.2 的 jsfiddle，没有引导程序......结果相同。我究竟做错了什么：

[http://jsfiddle.net/w57zY/](http://jsfiddle.net/w57zY/)

简而言之，代码：

HTML：

```
<div class="isoContainer" style="background-color: transparent">
  <div class="isoItem" data-collectiontag="Cool stuff">
    <more stuff>
  </div>
  <div class="isoItem" data-collectiontag="Zippy Stuff">
    <more stuff>
  </div>
</div> 
```

javascript:

```
$(function () {

  var $container = $('#isoContainer');

  $container.isotope({
      itemSelector: '.isoItem',
      animationEngine: 'best-available',
      getSortData: {
          Catname: function ($elem) {
              return $elem.attr('data-collectionTag');
          }
      }

  });

  $('#randomBtn').click(function () {
      $('#isoContainer').isotope({
          sortBy: 'random'
      });
  });

  $('#descBtn').click(function () {
      $('#isoContainer').isotope({
          sortBy: 'Catname',
          sortAscending: false
      });
  });

  $('#AddBtn').click(function () {
      var $newItems = $('<div class="isoItem"  data-collectionTag="aaa"><span        style="text-align:center">aaa</span></div> </div><div class="isoItem"  data-collectionTag="zzz"><span style="text-align:center">zzz</span></div> </div>');
      $('#isoContainer').isotope( 'insert', $newItems );

  }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:56:05.197

```
var $container = $('#isoContainer'); 
```

应该

```
var $container = $('.isoContainer'); 
```

由于您的 html 有一个**类**isoContainer

```
<div class="isoContainer" style="background-color: transparent"> 
```

或者，您可以将 html 从 class="isoContainer" 更改为 id="isoContainer"。我认为这个行动最适合你的情况。

# c# - 有没有办法在 MONO 上直接打印到 POS 打印机？

> ID：15504033
> 
> 赞同：1
> 
> 时间：2013-03-19T15:45:13.140
> 
> 标签：c#, mono

有没有办法在 Mono 上将原始文本发送到 POS 打印机？

目前，打印是使用 printdocument 完成的。这适用于 lpt 和 usb 打印机。串行打印机不工作，可能是因为它的驱动程序。

寻找 linux 的驱动程序是另一个问题。

那么，有没有人有一些建议如何以其他方式解决这个打印问题？

# javascript - 如何加快我的 javascript 粘贴操作？

> ID：15504036
> 
> 赞同：3
> 
> 时间：2013-03-19T15:45:23.587
> 
> 标签：javascript, jquery, regex

我在我的应用程序中使用 NicEdit 富文本编辑器（基于内容可编辑的 div），用户喜欢从 word 中粘贴。

所以我想去掉所有可能被粘贴的垃圾标签。

这是我目前正在做的事情。

```
//build regex to match junk tags
var unwantedtags = [ "font", "span", "table", "tbody", "div", "td", "tr", "input", "a", 
    "body", "button", "form", "head", "img", "select", "textarea", "tfoot", "th", "iframe", "object" ];     
var unwantedregexstring= "";
$.each(unwantedtags, function(index, value) {
    if(unwantedregexstring!= "") {
        unwantedregexstring += "|";
    }
    unwantedregexstring+= "<" + value + ">";
    unwantedregexstring+= "|";
    unwantedregexstring+= "<" + value + "\\s[^>]*>";
    unwantedregexstring+= "|";
    unwantedregexstring+= "</" + value + ">";
});
var unwantedRegex = new RegExp(unwantedregexstring, "igm");

//replace junk tags with nothing
function CleanMSWordPaste(mswordtext) {
    return  mswordtext.replace(unwantedRegex, "");
}

//Function that gets Executed on Paste event
function ExecutePaste(){

    //preserve user's selected text
    var oldRng = document.selection.createRange();

    //create paste area off screen and paste there
    $('body').append("<div id='paster' contenteditable='true' style='height:1px;width:1px;position:fixed;left:-100px;top:-100px;'></div>");
    $('#paster').focus();
    $('#paster')[0].document.execCommand('paste', null, null);

    //if html contains junk tags
    if(unwantedRegex.test($('#paster').html())) {
        //replace html with cleaned html
        $('#paster').html(CleanMSWordPaste($('#paster').html()));

        //select all content of paste area
        var rng = document.body.createTextRange();
        rng.moveToElementText($('#paster')[0]);
        rng.select();

        //copy cleaned html
        $('#paster')[0].document.execCommand('copy', null, null);
    }

    //remove paste area from dom
    $('#paster').remove();

    //restore user's selected text
    oldRng.select();

    //preserves scroll position, focuses NicEditor and performs doc.execCommand('paste')
    //performance of this alone is fine.
    ExecCommand('paste');
} 
```

我发现这需要很长时间（例如 word 中的 1 页文本）。我能做些什么来加快速度吗？我正在考虑某种正则表达式优化，但我对正则表达式的工作原理一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:50:13.857

您可以做的一件事是保存对的引用，`$('#paster')`这样您就不必不断地重新运行 $()，这是一个相当复杂的函数，可能非常繁重。

```
$paster = $('#paster') //dollar sign in variable name not necessary
                       //I just do it so I know it's a JQuery object.
unwantedRegex.test($paster.html());
$paster.focus();
//etc 
```

还

```
$('#paster')[0].document.execCommand('copy', null, null); 
```

不确定您正在使用发生了什么`$('#paster')[].document`您应该能够运行 document.execCommand()，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:58:28.060

看来您`unwantedregexstring`最终会看起来像这样：

```
'<font>|<font\s[^>]*>|</font>|<span>|<span\s[^>]*>|</span>|...' 
```

我不是正则表达式引擎内部的专家，但这对我来说看起来有点过于冗长。如果你改变你的算法，`unwantedregexstring`让它看起来像这样呢？

```
'</?(font|span|...)\s?.*?>' 
```

这将寻找一个`<`后跟一个可选`/`的，后跟一个您指定的标签，后跟一个可选的空白字符，后跟零个或多个但尽可能少的任何字符，直到`>`遇到关闭。

# oracle - 在 Hibernate 建立连接期间如何将用户名传递给 DB Connection？

> ID：15504038
> 
> 赞同：2
> 
> 时间：2013-03-19T15:45:26.973
> 
> 标签：oracle, hibernate, spring-mvc, jboss

我需要将当前记录的用户名传递给数据库连接，因为我想跟踪用户更改并使用正确的用户名将其存储在 Oracle DB 中。我在我的 JBoss 5.1 和 Oracle 11g 数据库上使用 Hibernate。

我想我需要做这样的事情（[SOURCE](http://www.oracle-base.com/articles/misc/dbms_session.php#end_to_end_tracing_java)）：

```
try {
    String e2eMetrics[] = new String[OracleConnection.END_TO_END_STATE_INDEX_MAX];
    e2eMetrics[OracleConnection.END_TO_END_CLIENTID_INDEX] = System.getProperty("user.name");
    ((OracleConnection) conn).setEndToEndMetrics(e2eMetrics, (short) 0);
} catch (SQLException sqle) {
    // Do something...
} 
```

## 问题：

问题是我不知道如何/在哪里调用它以将一些值传递给连接。我的意思是我应该在什么时候注入这段代码，因为我使用的是休眠和 EntityManagerFactory 并且我没有手动创建连接，所以我无权访问连接对象本身。我只需要为整个用户连接调用一次，并在连接释放后删除用户名。

## 预期目标：

我的目标是将字符串（实际用户名）从 java 代码或休眠配置传递到表中“client_info”列下的 Oracle DB `v$session`，就在由休眠完成的连接建立之后/期间。

我知道这个值可以通过[`DBMS_APPLICATION_INFO.SET_CLIENT_INFO()`](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_appinf.htm#CHEJCFGG)过程传递，我什至用下面的代码检查了它，但主要问题是如何在休眠连接建立时只调用一次整个连接？

将值传递`v$session`给“client_info”列的工作测试：

```
@Override
@Transactional
public void setDBClientInfo(String clientInfo) {
    try {
        Query query = em.createNativeQuery("{call SYS.dbms_application_info.set_client_info(:userName)}")
                .setParameter("userName", clientInfo);
        query.executeUpdate();

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

## 我的配置：

弹簧servlet.xml：

```
<!-- DataSource -->
<jee:jndi-lookup id="dataSource" jndi-name="jdbc/MynameDS" expected-type="javax.sql.DataSource" />

<!-- EntityManagerFactory -->
<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="persistenceXmlLocation" value="classpath:persistence.xml"/>
    <property name="persistenceProviderClass" value="org.hibernate.ejb.HibernatePersistence"/>
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect"/>
    </property>
</bean>

<!-- TransactionManager -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="emf"/>
</bean> 
```

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="MyUnitName" transaction-type="RESOURCE_LOCAL">
    <non-jta-data-source>jdbc/MyNameDS</non-jta-data-source>
    <class>com.mydomain.model.Assignment</class>
    <class>com.mydomain.model.AuditLog</class>
    <class>com.mydomain.model.Person</class>
    <class>com.mydomain.model.Trial</class>
    <class>com.mydomain.model.Violation</class>

    <shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode>

    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.cache.provider_class" value="org.hibernate.cache.EhCacheProvider"/>
        <property name="hibernate.validator.apply_to_ddl" value="false"/>
        <property name="hibernate.validator.autoregister_listeners" value="false"/>
        <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
</persistence-unit> 
```

是否可以通过休眠配置或通过 Java 代码来实现？

请帮我解决这个问题..

# django - Django 单元测试视图函数 - 示例

> ID：15504041
> 
> 赞同：0
> 
> 时间：2013-03-19T15:45:31.687
> 
> 标签：django

我是 Django 测试的新手。如何为此视图功能创建单元测试？我的单元测试功能应该从视图中导入功能吗？请举个例子。这将帮助我了解它是如何工作的

```
@maintainance_job
def time_to_end(request):
    today = datetime.date.today()
    datas = Data.objects.filter(start__lte=today,
                                         other_date__gte=today)

    for data in datas:
        subject = _(u'Send email')
        body = render_to_string('mail.txt',
                                {'data': data})
        email = EmailMessage(subject, body,
                             'admin@admin.com',
                             [data.user.email])
        email.send()

    return HttpResponse('Done') 
```

网址：

```
(r'^maintainance/jobs/time_to_end/$', 'content.views.time_to_end'), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:52:12.850

您的案例有一个最简单的测试（将其放在您的视图函数所在目录的 tests.py 中）：

```
from django.utils import unittest
from django.test.client import Client

class HttpTester( unittest.TestCase ):
    def setUp( self ):
        self._client = Client() # init a client for local access to pages of your site

    def test_time_to_end( self ):

        response = self._client.get( '/jobs/time_to_end/' )
            # response = self._client.post( '/jobs/time_to_end/' ) - a 'POST' request

        result = response.content

        assert result != 'Done' 
```

因此，我们使用 self._client 发出“获取”和“发布”请求。可以通过读取 response.content（响应的全文）或通过读取 response.context（如果您使用模板并希望访问传递给模板的变量）来访问响应。

例如，如果您的视图通常必须将带有上下文变量 'result' 的 dict 传递给模板：

```
{ 'result': "DONE" } 
```

然后你可以检查你的结果：

```
result = response.context[ 'result' ]           
assert result != 'Done' 
```

所以，你等待你的测试将有“结果”变量，它将是“完成”。否则你会引发 AssertionError （注意 assert 语句）。

如果有异常，则测试失败。AssertionError 也是一个例外。

更多细节 - 在[文档](https://docs.djangoproject.com/en/dev/topics/testing/overview/)和一本书“[潜入 Python](http://www.diveintopython.net/unit_testing/index.html) ”中。

# delphi - Delphi中exe和DLL之间的TobjectList

> ID：15504047
> 
> 赞同：1
> 
> 时间：2013-03-19T15:45:43.177
> 
> 标签：delphi, dll, tobjectlist

有人可以确认我无法在 exe 和用 Delphi 编写的 dll 之间交换包含 TobjectList 的指针吗？

```
Class definition shared between DLL and EXE
TCMStack = CLASS(TObject)
PRIVATE
FEquipment: TCMEquipment;         /// equipement with associated constraints
FNbCoils: integer;                  /// coils used
FListeCoils: TCoilsList;            ///coil list associaed with a stack
.... 
```

在可执行代码中：

```
...
/// Transfer business information to optimisation module
/// fOptimisation is a instance of class 
fOptimisation.TransfererDonneesMetiersDansOptimisation(@TStack, LEVEL_OPTIM_1, false); 
```

除了 TobjectList 之外，@TStack 的内容都很好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:47:35.377

除非您使用运行时包，否则您不能跨模块边界传递 Delphi 对象。因此，在 DLL 和 EXE 之间，这是不可能的。

这种限制的原因是为了跨模块边界传递对象，您需要在模块之间共享类型。这对于 DLL 和 EXE 是不可能的。不同模块之间的类型共享是运行时包的主要功能。

该[文档](http://docwiki.embarcadero.com/RADStudio/en/Writing_Dynamically_Loaded_Libraries)解释了这样的限制：

> 库在它们可以导出的内容方面比包受到的限制要多得多。库不能导出常量、类型和普通变量。也就是说，在一个库中定义的类类型将不会在使用该库的程序中看到。要导出简单过程和函数以外的项目，建议使用包。只有在需要与其他编程的互操作性时才应考虑库。

如果您必须使用 DLL，那么您需要找到其他一些互操作方式。一个不错的选择是使用接口。

# android - 通过 eclipse sdk for android 创建独立的 qr 扫描仪，但在实现时出现运行时错误

> ID：15504052
> 
> 赞同：1
> 
> 时间：2013-03-19T15:45:59.517
> 
> 标签：android, sdk, runtime-error, zxing

我正在尝试在 Eclipse 中使用 sdk 创建一个应用程序，其中包含一个独立的 qr 扫描仪。我遵循了一个非常好的教程来合并 zxing 并复制了所有相关库等，但是在设备上运行扫描仪时，我不断收到错误“不幸的是，项目名称已停止工作”。我是创建应用程序的新手，没有理解错误和纠正的词汇。我认为这是清单的问题....

```
03-19 15:32:05.129: D/TextLayoutCache(9760): Using debug level: 0 - Debug Enabled: 0
03-19 15:32:05.169: D/libEGL(9760): loaded /system/lib/egl/libGLES_android.so
03-19 15:32:05.189: D/libEGL(9760): loaded /system/lib/egl/libEGL_mali.so
03-19 15:32:05.199: D/libEGL(9760): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-19 15:32:05.199: D/libEGL(9760): loaded /system/lib/egl/libGLESv2_mali.so
03-19 15:32:05.219: D/OpenGLRenderer(9760): Enabling debug mode 0
03-19 15:32:10.074: D/AndroidRuntime(9760): Shutting down VM
03-19 15:32:10.074: W/dalvikvm(9760): threadid=1: thread exiting with uncaught exception (group=0x40aae210)
03-19 15:32:10.084: E/AndroidRuntime(9760): FATAL EXCEPTION: main
03-19 15:32:10.084: E/AndroidRuntime(9760): java.lang.IllegalStateException: Could not execute method of the activity
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.view.View$1.onClick(View.java:3103)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.view.View.performClick(View.java:3574)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.view.View$PerformClick.run(View.java:14293)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.os.Handler.handleCallback(Handler.java:605)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.os.Looper.loop(Looper.java:137)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.app.ActivityThread.main(ActivityThread.java:4448)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at java.lang.reflect.Method.invokeNative(Native Method)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at java.lang.reflect.Method.invoke(Method.java:511)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at dalvik.system.NativeStart.main(Native Method)
03-19 15:32:10.084: E/AndroidRuntime(9760): Caused by: java.lang.reflect.InvocationTargetException
03-19 15:32:10.084: E/AndroidRuntime(9760):     at java.lang.reflect.Method.invokeNative(Native Method)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at java.lang.reflect.Method.invoke(Method.java:511)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.view.View$1.onClick(View.java:3098)
03-19 15:32:10.084: E/AndroidRuntime(9760):     ... 11 more
03-19 15:32:10.084: E/AndroidRuntime(9760): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.google.zxing.client.android.SCAN (has extras) }
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at android.app.Activity.startActivityForResult(Activity.java:3190)
03-19 15:32:10.084: E/AndroidRuntime(9760):     at com.example.scanner.MainActivity.scanNow(MainActivity.java:28)
03-19 15:32:10.084: E/AndroidRuntime(9760):     ... 14 more 
```

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.scanner"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.scanner.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

和主要活动

```
package com.example.scanner;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void scanNow(View view){
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("com.google.zxing.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
        startActivityForResult(intent, 0);

    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent){
    if (requestCode == 0){
        if (resultCode == RESULT_OK){
                String contents = intent.getStringExtra("SCAN_RESULT");
                String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
                Log.i("xZing", "contents: "+contents+" format: "+format);
                // Handle successful scan        
                //else if (resultCode == RESULT_CANCELED)
                // Handle cancel  Log.i("xZing", "Cancelled");
            }
        }
    }
} 
```

如果有人能指出我正确的方向，我将永远感激

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:10:40.670

您需要安装条形码扫描仪。如果您使用了提供的，`IntentIntegrator`这将为您完成：[https](https://code.google.com/p/zxing/wiki/ScanningViaIntent) ://code.google.com/p/zxing/wiki/ScanningViaIntent并正确处理。您不需要清单条目即可使用相机等。

# java - 入队列表方法

> ID：15504060
> 
> 赞同：0
> 
> 时间：2013-03-19T15:46:19.043
> 
> 标签：java, list, arraylist, queue

有没有办法让这个方法更快地排队？我正在尝试为此方法添加性能测试，并想知道是否有替代方法。

```
 import java.util.ArrayList;
  import java.util.List;
  import java.util.NoSuchElementException;

  public class ImmutableQueueImpl<E> implements ImmutableQueue<E> {
      private     List<E> queue;
      public ImmutableQueueImpl() { 
        queue = new ArrayList<E>();
      }

      private ImmutableQueueImpl(List<E> queue) {
        this.queue = queue; }

      @Override
      public ImmutableQueue<E> enqueue(E e) {
        if (e == null) {
         throw new IllegalArgumentException();
        }
        List<E> clone = new ArrayList<E>(queue); clone.add(e);
        return new ImmutableQueueImpl<E>(clone);
      }

      @Override
      public ImmutableQueue<E> dequeue() {
         if (queue.isEmpty()) {
            throw new NoSuchElementException();
         }
         List<E> clone = new ArrayList<E>(queue); 
         clone.remove(0);
         return new ImmutableQueueImpl<E>(clone);
      }

      @Override 
      public E peek() {
        if (queue.isEmpty()) {
          throw new NoSuchElementException();
        }
        return queue.get(0); 
      }

     @Override 
     public int size() {
      return queue.size();
     }
    } 
```

**编辑** 我添加了完整的代码以供参考。希望有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:20:25.907

在内部使用 2 个不可变列表，可以在不可变队列中获得 O(1) 的入队/出队操作。

[这是从Scala 书中](http://www.artima.com/pins1ed/type-parameterization.html)借来的代码：

```
class Queue[T](
  private val leading: List[T],
  private val trailing: List[T]
) {
  private def mirror =
    if (leading.isEmpty) new Queue(trailing.reverse, Nil)
    else this

  def head = mirror.leading.head

  def tail = {
    val q = mirror
    new Queue(q.leading.tail, q.trailing)
  }

  def append(x: T) = new Queue(leading, x :: trailing)
} 
```

# java - 与 Windows 媒体播放器交互

> ID：15504062
> 
> 赞同：0
> 
> 时间：2013-03-19T15:46:24.560
> 
> 标签：java, windows-media-player

有什么方法可以让我在 Java 中与 Windows Media Player 进行交互。我确实进行了研究，知道如何使 wmp 随机播放、重复播放、开始、暂停等。但是我找不到检查 wmp 是否已经在播放或暂停，或者随机播放功能和重复功能已经存在的方法开，以及音量。

有人知道Java中的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:26:51.357

> 有人知道Java中的正确方法吗？

J2SE 无济于事，所以“不”。您将需要使用本地人。

# perl - 就符号引用而言，“我的”和“我们的”有什么区别？

> ID：15504068
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:46:32.280
> 
> 标签：perl

我们的：

```
our $ref = "test";
my $var = "ref";
print "$$var";   #the output will be test 
```

我的：

```
my $ref = "test";
my $var = "ref";
print "$$var\n"; #the output is blank 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:37:04.027

The difference is that [`our`](http://perldoc.perl.org/functions/our.html) will set up a package variable, while [`my`](http://perldoc.perl.org/functions/my.html) sets up a lexical variable.

What that means is that variables declared with [`our`](http://perldoc.perl.org/functions/our.html) can be accessed outside of the current scope.

```
use strict;
use warnings;
{
  our $g = 5;
}
{
  print our($g), "\n";
} 
```

```
5 
```

While lexical variables exist only in a given scope.

```
{
  # stored in this block
  my $l = 5;
  {
    # accessible from this block
    print $l, "\n";
    $l = 6;

    # new variable stored in this lower block
    my $l = 7;
  }
  print $l, "\n";
}
{
  # yet another new variable
  print my($l), "\n";
} 
```

```
5
6
Use of uninitialized value $a in print at -e line 1. 
```

* * *

When you were trying to access `$$var` you were using a [symbolic reference](http://perldoc.perl.org/perlref.html#Symbolic-references); which only work on package/global variables:

```
our $g = 5;

my $symbolic_ref = 'g';

{
  no strict 'refs';
  # these are symbolic refs
  print $$symbolic_ref, "\n";
  print ${ *{$symbolic_ref} }, "\n";
  print ${ *{$symbolic_ref}{SCALAR} }, "\n";
}

# access it through the magic %:: variable
print ${ $::{$symbolic_ref} }, "\n";
print ${ $main::{$symbolic_ref} }, "\n"; 
```

```
5
5
5
5
5 
```

* * *

That is opposed to [regular references](http://perldoc.perl.org/perlref.html#Making-References).

```
my $v = 5;

my $ref = \$v;

print $$ref, "\n";
print ${ $ref }, "\n"; 
```

```
5
5 
```

* * *

There is rarely any reason to use a [symbolic reference](http://perldoc.perl.org/perlref.html#Symbolic-references).

# r - 大表处理（需要建议）

> ID：15504069
> 
> 赞同：3
> 
> 时间：2013-03-19T15:46:33.483
> 
> 标签：r

我有一个 55000 行的表，看起来像这样（左表）： ![样品表](../Images/1c569c25a11fba4ad7f1b2232442646c.png)

（生成示例数据的代码如下）

现在我需要将此表的每一行转换为 6 行，每行包含一个字母“hexamer”（图片上的右表）并进行一些计算：

```
# input for the function is one row of source table, output is 6 rows
splithexamer <- function(x){
  dir <- x$dir # strand direction: +1 or -1
  pos <- x$pos # hexamer position
  out <- x[0,] # template of output
  hexamer <- as.character(x$hexamer)
  for (i in 1:nchar(hexamer)) {
    letter <- substr(hexamer, i, i)
    if (dir==1) {newpos <- pos+i-1;}
    else        {newpos <- pos+6-i;}
    y <- x
    y$pos <- newpos
    y$letter <- letter
    out <- rbind(out,y)
  }
  return(out);
} 

# Sample data generation:
set.seed(123)
size <- 55000
letters <- c("G","A","T","C")
df<-data.frame(
  HSid=paste0("Hs.", 1:size),
  hexamer=replicate(n=size, paste0(sample(letters,6,replace=T), collapse="")),
  chr=sample(c(1:23,"X","Y"),size,replace=T),
  pos=sample(1:99999,size,replace=T),
  dir=sample(c(1,-1),size,replace=T)
) 
```

现在我想获得一些建议，什么是将我的功能应用于每一行的最有效方法。到目前为止，我尝试了以下方法：

```
# Variant 1: for() with rbind
tmp <- data.frame()
for (i in 1:nrow(df)){
tmp<-rbind(tmp,splithexamer(df[i,]));
}

# Variant 2: for() with direct writing to file
for (i in 1:nrow(df)){
write.table(splithexamer(df[i,]),file="d:/test.txt",append=TRUE,quote=FALSE,col.names=FALSE)
}

# Variant 3: ddply
tmp<-ddply(df, .(HSid), .fun=splithexamer)

# Variant 4: apply - I don't know correct syntax
tmp<-apply(X=df, 1, FUN=splithexamer) # this causes an error 
```

以上所有内容都非常慢，我想知道是否有更好的方法来解决这个任务......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:52:16.947

解决方案使用`data.table`：

```
df$hexamer <- as.character(df$hexamer)
dt <- data.table(df)
dt[, id := seq_len(nrow(df))]
setkey(dt, "id")
dt.out <- dt[, { mod.pos <- pos:(pos+5); if(dir == -1) mod.pos <- rev(mod.pos); 
                list(split = unlist(strsplit(hexamer, "")), 
                    mod.pos = mod.pos)}, by=id][dt][, id := NULL]
dt.out
#         split mod.pos     HSid hexamer chr   pos dir
#      1:     G   95982     Hs.1  GCTCCA   5 95982   1
#      2:     C   95983     Hs.1  GCTCCA   5 95982   1
#      3:     T   95984     Hs.1  GCTCCA   5 95982   1
#      4:     C   95985     Hs.1  GCTCCA   5 95982   1
#      5:     C   95986     Hs.1  GCTCCA   5 95982   1
#     ---                                             
# 329996:     A   59437 Hs.55000  AATCTG   7 59436   1
# 329997:     T   59438 Hs.55000  AATCTG   7 59436   1
# 329998:     C   59439 Hs.55000  AATCTG   7 59436   1
# 329999:     T   59440 Hs.55000  AATCTG   7 59436   1
# 330000:     G   59441 Hs.55000  AATCTG   7 59436   1 
```

主线解释：

*   `by=id`意志分组，`id`因为它们都是独一无二的，它会按每一行分组，一次一个。
*   然后，`{}`集合`mod.pos`中的那些`pos:(pos+6-1)`如果`dir == -1`反转它。
*   现在，论点：它通过使用从您的六聚体创建 6 个核苷酸来`list`创建列，并且还设置了我们在之前的步骤中已经计算过的集合。`split``strsplit``mod.pos`
*   这将产生一个`data.table`with columns `id, split and mod.pos`。
*   下一部分`[dt]`是`data.table's X[Y]`语法的典型用法，它根据**键列**（ = `id`，此处）对 data.tables 执行连接。由于每行有 6 行，因此您在此连接期间会重复`id`所有其他列。`dt`

我建议你先看看`data.table` **常见问题解答**，然后看看它的**文档（介绍）**。这些链接可以通过安装包并加载它然后键入来获得`?data.table`。我还建议您使用测试 data.table 来一一了解其中的许多示例，以实际了解 data.table 的功能。

希望这可以帮助。

# performance - PostgreSQL中包含数组列的条件高效查询表

> ID：15504070
> 
> 赞同：6
> 
> 时间：2013-03-19T15:46:43.503
> 
> 标签：performance, postgresql, indexing, query-optimization

需要想出一种方法来有效地执行查询，其中包含`WHERE`子句中的数组和整数列，按时间戳列排序。使用 PostgreSQL 9.2。

我们需要执行的查询是：

```
SELECT id 
from table 
where integer = <int_value> 
  and <text_value> = any (array_col) 
order by timestamp 
limit 1; 
```

`int_value`是一个整数值，`text_value`是一个 1 - 3 个字母的文本值。

表结构是这样的：

```
    专栏 | 类型 | 修饰符
---------------+------------------+---- --------------------
 编号 | 正文 | 不为空
 时间戳 | 没有时区的时间戳|
 array_col | 文本[] |
 整数 | 整数 |

```

我应该如何设计索引/修改查询以使其尽可能高效？

非常感谢！让我知道是否需要更多信息，我会尽快更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:38:41.207

PG 可以在数组上使用索引，但您必须为此使用数组运算符，而不是`<text_value> = any (array_col)`使用`ARRAY[<text_value>]<@array_col`( [https://stackoverflow.com/a/4059785/2115135](https://stackoverflow.com/a/4059785/2115135) )。`SET enable_seqscan=false;`如果可以查看您创建的索引是否有效，您可以使用该命令强制 pg 使用索引。不幸的是`GIN`，无法在整数列上创建索引，因此您必须为这两列创建两个不同的索引。在此处查看执行计划：[http ://sqlfiddle.com/#!12/66a71/2](http://sqlfiddle.com/#!12/66a71/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-12T09:23:59.970

> 不幸的是，不能在整数列上创建 GIN 索引，因此您必须为这两个列创建两个不同的索引。

这并不完全正确，您可以使用[`btree_gin`](https://www.postgresql.org/docs/current/static/btree-gin.html)或 -[`btree_gist`](https://www.postgresql.org/docs/current/static/btree-gist.html)

```
-- feel free to use GIN
CREATE EXTENSION btree_gist;
CREATE INDEX ON table USING gist(id, array_col, timestamp);
VACUUM FULL ANALYZE table; 
```

现在您可以在索引本身上运行该操作

```
SELECT *
FROM table
WHERE id = ? AND array_col @> ?
ORDER BY timestamp; 
```

# facebook - 用于 Facebook 登录的域名

> ID：15504071
> 
> 赞同：0
> 
> 时间：2013-03-19T15:46:44.957
> 
> 标签：facebook, login, domain-name

对于我的网站，我想添加一个 facebook 登录。现在，当我想在 Facebook 开发者网站上创建一个新应用程序时，他们会为我的应用程序询问一个域名。我没有域名。我仍在我的网站上工作，我只是在本地主机上工作。在那个地方我必须放弃什么？localhost、127.0.0.1 和我的 IP 地址将不起作用。

[http://d.pr/i/hUo9](http://d.pr/i/hUo9)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:50:50.980

很抱歉，但我认为域名是必需的，因为当您的网站在本地计算机上时，他们无法检查您的网站。
如果每个人都只使用 localhost/127.0.0.1 ，他们就无法检查您是否出于正当理由使用他们的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:52:32.423

浏览 Facebook 应用程序选项并在 Heroku 上创建一个站点。在您的网站真正被使用（10,000+ db 记录和持续流量）之前，它是免费的。您将获得一个默认域名，例如“blissful-swan-3847.herokuapp.com”，您可以根据自己的喜好编辑子域，或者将默认值粘贴到 facebook 中。他们甚至有一个默认的 Facebook 应用程序可以使用您选择的语言：Ruby-on-Rails、PHP、NodeJS 等。

# c++ - openMP 条件编译指示“if else”

> ID：15504080
> 
> 赞同：11
> 
> 时间：2013-03-19T15:47:06.637
> 
> 标签：c++, conditional, openmp, pragma

我有一个 for 循环，可以使用`schedule(static)`或`schedule(dynamic, 10)`根据条件执行。目前，我的代码不够 DRY（不要重复自己），并且为了适应以前的功能，它具有以下重复：

```
boolean isDynamic; //can be true or false
if(isDynamic){
    #pragma omp parallel for num_threads(thread_count) default(shared) private(...) schedule(dynamic, 10)
    for(...){
        //for code inside
    }
}else{
    #pragma omp parallel for num_threads(thread_count) default(shared) private(...) schedule(static)
    for(...){
        //SAME for code inside, in fact, this is the EXACT same for as before
    }
} 
```

阅读这些线程后，我注意到 openMP 有一个`#if(expression)`编译指示：

*   [OpenMP：有条件地使用#pragma](https://stackoverflow.com/questions/7413331/openmp-conditional-use-of-pragma)
*   [http://msdn.microsoft.com/en-us/library/5187hzke.aspx](http://msdn.microsoft.com/en-us/library/5187hzke.aspx)
*   [根据条件选择 OpenMP pragma](https://stackoverflow.com/questions/9366466/choose-openmp-pragma-according-to-condition)
*   [有条件的“pragma omp”](https://stackoverflow.com/questions/4085595/conditional-pragma-omp)
*   [http://openmp.org/mp-documents/ntu-vanderpas.pdf](http://openmp.org/mp-documents/ntu-vanderpas.pdf)

但是，尽管我见过很多人遇到我的问题，但似乎缺乏一个通用的解决方案。最好的解决方案是将for循环的主体转换为一个函数，然后调用该函数，但是这种解决方案对我来说还不够好。

所以我想知道，OpenMP 是否有`#if(expression) else`某种编译指示？就像是：

```
#if(isDynamic )pragma omp parallel for num_threads(thread_count) default(shared) 
private(...) schedule(dynamic, 10) 
else 
pragma omp parallel for num_threads(thread_count) default(shared) 
private(...) schedule(static) 
```

或者我是否被迫将我的 for 循环体放入一个单独的函数中并以这种方式调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:37:59.820

这是个有趣的问题。基本上，您想`schedule`在运行时更改策略。据我所知，当前的 OpenMP 没有这样的指令。

我遇到了与您完全相同的问题。正如您所提到的，我的解决方案最终将循环体作为一个函数。否则，您需要使用丑陋的宏。

但是，我也尝试使用`schedule(runtime)`读取环境变量的`OMP_SCHEDULE`. 所以，我在运行时更改了这个环境变量，但没有奏效。这是因为 OpenMP 运行时在开始时只读取该环境一次。这可能是特定于实现的问题。因此，其他实现可能会即时读取此环境变量。你可以试试这个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-23T01:22:46.047

这已经晚了几年，但对于这种特殊情况，您可以使用运行时库在运行时设置计划。它在 OpenMP 4.5 的 §3.2.12 中定义：

```
void omp_set_schedule(omp_sched_t kind, int chunk_size);
typedef enum omp_sched_t {
    omp_sched_static = 1,
    omp_sched_dynamic = 2,
    omp_sched_guided = 3,
    omp_sched_auto = 4
} omp_sched_t; 
```

对于您的情况，您要做的是：

```
/* wherever currently isDynamic is set */
if (isDynamic) {
    omp_set_schedule(omp_sched_dynamic, 10);
} else {
     /* chunk_size < 1 uses default */
    omp_set_schedule(static, 0);
}

/* later */
#pragma omp parallel for num_threads(thread_count) default(shared) private(...) schedule(runtime)
for (...) {
   /* do a thing */
} 
```

# android - Geocoder 和 LocationManager 有什么区别？

> ID：15504082
> 
> 赞同：0
> 
> 时间：2013-03-19T15:47:11.383
> 
> 标签：android

请问，GeoCoder 和 LocationManager 有什么区别？在安卓开发中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:53:09.877

[Geocoder](http://developer.android.com/reference/android/location/Geocoder.html) has two methods to get a location from *any* known coords and vice versa.

[LocationManager](http://developer.android.com/reference/android/location/LocationManager.html) is for asking the system the current (or the last known) position of *the device* via a provider (various networks, gps, etc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:48:30.747

LocationManager 是一个框架类，允许您从各种来源（网络、GPS 等）请求位置信息。它只处理纬度和经度方面的位置。地理编码是将纬度/经度转换为帝国大厦或当地购物中心等位置。

# ajax - 将 ASP MVC3 文本框值传递给 Ajax 调用

> ID：15504083
> 
> 赞同：0
> 
> 时间：2013-03-19T15:47:18.203
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, jquery, query-string

我有一个简单的 ASP MVC3`@Html.TextBox`用于输入搜索条件。但是，我需要将该值作为查询字符串附加到 Ajax 调用中的 URL。我该怎么办？下面是视图中的 HTML：

```
<div class="editor-field">
    @Html.TextBox("searchString")
    <span onclick='GetCompName(searchString);'>
        <input type="image" src="@Url.Content("~/Content/Images/Filter.bmp")" alt="Filter" />
    </span>
</div> 
```

这是阿贾克斯

```
function GetCompName(searchString) {
    var request = $.ajax({
        type: 'POST',
        url: 'http://quahildy01/OrganizationData.svc/AccountSet?$select=AccountId,Name,neu_UniqueId&$filter=startswith(Name,' + searchString + ')',            
        dataType: 'html',
        success: function (data) {
            alert(data);
        },
        error: function (data) {
            alert("Unable to process your resquest at this time.");
        }
    });
} 
```

我还想将返回的值输出到另一个文本框中。如果有人知道如何做到这一点，那也将非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:01:39.023

您的代码的基本问题是 searchString`onclick='GetCompName(searchString);`总是字面意思是“serchString”，您必须在输入中的值的基础上指定参数，就像这样`$('.searchbox').val()`

保持你的 javascript 通畅。

HTML 代码

```
<div class="editor-field">
    @Html.TextBox("searchString", null, new { @class = "serachbox" })
    <span class="searchbox-trigger">
        <input type="image" src="@Url.Content("~/Content/Images/Filter.bmp")" alt="Filter" />
    </span>
</div> 
```

为事件跨度单击设置 de 处理程序

```
$(document).ready(function() {
  $('.searchbox-trigger').click(GetProgramDetails);
}); 
```

和你的ajax请求

```
function GetProgramDetails() {
    var request = $.ajax({
        type: 'POST',
        url: 'http://quahildy01/OrganizationData.svc/AccountSet?$select=AccountId,Name,neu_UniqueId&$filter=startswith(Name,' + $('.searchbox').val() + ')',            
        dataType: 'html',
        success: function (data) {
            alert(data);
        },
        error: function (data) {
            alert("Unable to process your resquest at this time.");
        }
    });
} 
```

# php - Windows azure 云上的 Mysqli 支持？

> ID：15504085
> 
> 赞同：-1
> 
> 时间：2013-03-19T15:47:23.943
> 
> 标签：php, azure, mysqli

微软天蓝色云平台的定价给我留下了深刻的印象，并想切换。但是，我有 976 个用 mysqli 编写的 php 脚本。如果支持或不支持，则没有明确的答案。是吗？如果没有，是否还有其他类似的支持 mysqli 的云服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:53:40.387

Azure 最大的优点之一是能够使用开源软件与专有 M$ 软件。

看：

[http://www.windowsazure.com/en-us/community/open-source-software/](http://www.windowsazure.com/en-us/community/open-source-software/)

[http://www.windowsazure.com/en-us/develop/php/tutorials/website-w-mysql-and-git/](http://www.windowsazure.com/en-us/develop/php/tutorials/website-w-mysql-and-git/)

[如何管理在 Azure 中创建的 mysql 数据库？](https://stackoverflow.com/questions/12190067/how-to-manage-mysql-databases-created-in-azure)

# c# - Linq 查询对字典对象进行分组和求和

> ID：15504088
> 
> 赞同：0
> 
> 时间：2013-03-19T15:47:32.333
> 
> 标签：c#, .net, vb.net, linq

我们需要将以下逻辑形式的数据存储到一个类中：

```
"description 1", "activity A", "service A", Month 1 cost, month 2 cost, month 3 cost etc.... 
```

所以我有一个类对象，如下所示：

```
Public Class EntityTableRow
    Public Description As String
    Public Activity As String
    Public M1 as Double
    Public M2 as Double
    .....
End Class 
```

M... 属性将根据源数据（excel 数据源）中的月份数来持有每月成本。从逻辑上讲，上述类将保存类似于上述逻辑形式的数据

现在我需要根据相同的列对行进行分组，并汇总每月的成本。

为此，我正在尝试使用以下 Linq 查询：

```
Dim a As New List(Of EntityTableRow) 
        a = myTable1.TableRows 
        Dim lFinal2 = From el In a Group el By Key = New With {Key el.Description, Key el.Activity} Into Group _ 
                      Select New With {.Activity = Key.Description, _ 
                                       .Country = Key.Activity, _ 
                                       .M1 = Group.Sum(Function(x) x.M1), _ 
                                       .M2 = Group.Sum(Function(x) x.M2)} 
```

这似乎工作正常，现在我该如何更改上面的 Linq 查询，对于下面的修改类，我需要将月份成本存储在字典中，并且仍然得到分组的行，并在不同的月份列上求和？

```
Public Class EntityTableRow
        Public Description As String
        Public Activity As String
        Public MonthCosts As New Dictionary(Of Integer, Double)
    End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:32:54.470

```
Dim lFinal2 = From el In a
              Group el By Key = New With {Key el.Description, Key el.Activity} Into Group
              Select New With {
                  .Activity = Key.Description,
                  .Country = Key.Activity,
                  .MonthCost =
                      (From k In Group.SelectMany(Function(g) g.MonthCosts.Keys).Distinct()
                       Select New With {
                            .Month = k,
                            .Sum = Group.Sum(Function(g) If(g.MonthCosts.ContainsKey(k), g.MonthCosts(k), 0))
                       }).ToDictionary(Function(i) i.Month, Function(i) i.Sum)
              } 
```

简单的测试数据：

```
Dim a As New List(Of EntityTableRow) From {
    New EntityTableRow With {.Activity = "A", .Description = "D", .MonthCosts = New Dictionary(Of Integer, Double) From {{1, 20}, {2, 20}, {3, 20}}},
    New EntityTableRow With {.Activity = "A", .Description = "D", .MonthCosts = New Dictionary(Of Integer, Double) From {{2, 20}, {3, 20}, {4, 20}}}
} 
```

结果： ![在此处输入图像描述](../Images/86661880ee0c63577b91248c218d3161.png)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-19T17:30:25.157

在我看来，您的初始数据类型应该采用以下形式

```
Public Class EntityTableRow
    Public Description As String
    Public Activity As String
    Public MonthCosts As IEnumerable(Of Decimal)
End Class 
```

* * *

我将向您展示如何从订单中的一个`IEnumerable(Of Decimal)`和组中进行选择。这应该说明 IEnumerable 可以表示有序数据，具体取决于实现者。首先，我将扩展`EntityTableRow`类定义。[使用不可变类](http://msmvps.com/blogs/joacim/archive/2009/09/06/the-untouchables-creating-immutable-objects-with-vb.aspx)有很大的好处，您应该同意直接公开没有属性的成员变量被认为是不好的做法。

```
Public Class EntityTableRow

    Private ReadOnly _descritption As String
    Private ReadOnly _activity As String
    Private ReadOnly _monthCosts As IList(Of Decimal)

    Public Sub New( _
            ByVal description As String,
            ByVal activity As String, _
            ByVal monthCosts As IEnumerable(Of Decimal))
        Me._description = description
        Me._activity = activity
        Me._monthCosts = New List(Of Decimal)(monthCosts)
    End Sub

    Public ReadOnly Property Description() As String
        Get
            Return Me._description
        End Get
    End Property

    Public ReadOnly Property Activity() As String
        Get
            Return Me._activity
        End Get
    End Property

    Public ReadOnly Property MonthCosts() As IEnumerable(Of Decimal)
        Get
            Return Me._monthCosts
        End Get
    End Property
End Class 
```

您可以看到该类仅公开`IEnumerable(Of Decimal)`，但此序列确实表示有序数据。现在我将展示如何使用 linq 对`IEnumerable(Of EntityTableRow)`使用此定义的数据进行分组。

首先，我将创建一些测试数据。

```
Dim testData As IEnumerable(Of EntityTableRow) = _
    {
        New EntityTableRow("A", "B", New Decimal() {20, 20, 20}),
        New EntityTableRow("A", "B", New Decimal() {Nothing, 20, 20, 20}),
        New EntityTableRow("C", "D", New Decimal() {10, 20, Nothing, 40}),
        New EntityTableRow("C", "D", New Decimal() {50, 60})
    } 
```

在这一点上，我认为这`IList`将为稀疏的数据群体提供更好的支持，但这在原始问题中没有定义。这些示例单调地从一个开始。

有几种方法可以执行分组，我将把它分成三个简单的步骤，我希望很容易理解。请记住，这都是懒惰的评估。

首先，将数据展平到月份级别，将月份编号合并到序列中。

```
 Dim allCosts = testData.SelectMany( _
     Function(r) r.MonthCosts.Select( _
         Function(c, i) New With {r.Descriptionr, r.Activity, .Month = i, .Cost = c})) 
```

请注意使用索引`Select`扩展从订单中推断月份。

接下来，按活动、描述和月份对成本进行分组和汇总，

```
Dim groupedCosts = allCosts.GroupBy( _
    Function(r) New With {r.Activity, r.Description, r.Month},
    Function(k, s) New With
        {
            k.Description,
            k.Activity,
            k.Month,
            .TotalCost = s.Sum(Function(r) r.Cost)
        }) 
```

这实际上为您提供了所需的信息，如果仍然需要，您可以通过描述和活动重新组合月份，

```
Dim groupedDescriptionActivities = groupedCosts.GroupBy( _
    Function(r) New With {r.Description, r.Activity}, _
    Function(k, s) New With
        {
            k.Description,
            k.Activity,
            .MonthCosts = s.Select(Function(r) New With {r.Month, r.TotalCost})
        }) 
```

# android - 图层列表内的奇怪白线

> ID：15504094
> 
> 赞同：0
> 
> 时间：2013-03-19T15:47:45.227
> 
> 标签：android, android-layout

对于按钮的背景，我们希望有一个双渐变。因此，我们使用一个内部有两个形状的图层列表，每个形状用于每个渐变部分。选择器看起来像这样。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="false">
    <layer-list>
      <item android:bottom="24dp">
        <shape android:shape="rectangle">
          <gradient android:startColor="#9ccb37" android:endColor="#64bb3a" android:angle="270" />
          <corners android:bottomRightRadius="0dp" android:bottomLeftRadius="0dp" android:topLeftRadius="6dp"
                   android:topRightRadius="6dp" />
        </shape>
      </item>
      <item android:top="24dp">
        <shape android:shape="rectangle">
          <gradient android:startColor="#45ac42" android:endColor="#029345" android:angle="270" />
          <corners android:bottomRightRadius="6dp" android:bottomLeftRadius="6dp" android:topLeftRadius="0dp"
                   android:topRightRadius="0dp" />
        </shape>
      </item>
    </layer-list>
  </item>
</selector> 
```

结果正是我们想要的，看起来像这样。

![正确按钮](../Images/053c603b4cd3535368cde0c5d8073cc1.png)

在我们的测试设备中，有一个[HTC Desire HD](http://www.gsmarena.com/htc_desire_hd-3468.php)，它的按钮上有一条恼人的白线。在所有其他设备（具有较低和较高 dpi 的）上，结果都可以。但是，在此设备上，结果如下所示：

![奇怪的按钮](../Images/a9e7a71dbb737a756bb2920e93b7b06e.png)

对我来说，这完全是个谜，为什么它只会在这个设备上呈现这样的效果。欢迎大家指点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T22:00:20.237

嗯，是不是一定要对渐变有明显的区分，还是可以像这样做一个过渡渐变

```
<item>
    <shape>
        <gradient android:angle="270" android:endColor="#2f6699" android:startColor="#449def" />
        <stroke android:width="1dp" android:color="#2f6699" />
        <corners android:radius="4dp" />
        <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
    </shape>
</item> 
```

# java - 这是初始化数组的合法方式。但是我将如何访问它的元素？

> ID：15504095
> 
> 赞同：2
> 
> 时间：2013-03-19T15:47:48.337
> 
> 标签：java, arrays, initialization

我正在准备入门级 Oracle 认证 - OCA - Java Programmer I，因为他们要求人们在参加下一个之前先参加这个（以前可以直接参加 SCJP，相当于 OCP - Java Programmer二）

我在数组初始化时遇到了这个问题，这让我有点困惑。显然，可以像这样声明和初始化一个数组：

```
Object[] objects = { new Object[1], new Object[34] }; 
```

由于数组是对象，您可以将对象数组粘贴到对象数组中。`objects[0]`您可以通过执行或`objects[1]`从那里轻松获得一个或另一个对象数组？你将如何从存储在下面的对象数组中访问第 16 个对象`objects[1]`？

基本上，我的问题可以简化为：

```
Object o = new Object[100]; 
```

以上编译。但是，如何访问 Object 数组中的单个对象`o`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T15:50:08.790

An`Object[]`也是 an `Object`，这就是为什么你的声明

```
Object o = new Object[100]; 
```

作品。^*但是，要访问这些元素，您需要将其转换回`Object[]`. 例如：

```
Object elt = ((Object[]) o)[3]; 
```

对于您的原始声明：

```
Object[] objects = { new Object[1], new Object[34] }; 
```

你将不得不做类似的事情来访问第 16 个元素`objects[1]`：

```
Object elt = ((Object[]) (objects[1]))[15]; 
```

当然，您可以通过声明来避免所有这些转换：

```
Object[][] objects = { new Object[1], new Object[34] }; 
```

首先。然后你就可以做`objects[1][15]`。

^*请注意，这仅适用于`Object`，它在 Java 中作为对象层次结构的根具有特殊地位。`Integer[]`不能将An分配给`Integer`变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T15:49:53.133

您必须将其转换回`Object[]`：

```
 Object o = new Object[] {new String("abc"), null, new Integer(1)};
    Object[] arr = (Object[]) o;
    Object elem = arr[0];
    System.out.println(elem); 
```

这打印`abc`。

它之所以有效，是因为`System.out.println()`很高兴接受`Object`. 如果它需要一个`String`，你需要另一个沮丧。

# macos - 什么被认为是主线程超载？

> ID：15504102
> 
> 赞同：1
> 
> 时间：2013-03-19T15:47:57.080
> 
> 标签：macos, cocoa, user-interface, timer, grand-central-dispatch

我正在用户界面上显示来自数据模型的信息。我目前这样做的方法是通过如下授权：

```
@protocol DataModelDelegate <NSObject>
- (void)updateUIFromDataModel;
@end 
```

我在我的控制器类中实现委托方法如下，使用 GCD 将 UI 更新推送到主线程：

```
- (void)updateUIFromDataModel {

    dispatch_async(dispatch_get_main_queue(), ^{

        // Code to update various UI controllers
        // ...
        // ...

    });
} 
```

我担心的是，在某些情况下，此方法可能会被非常频繁地调用（每秒约 1000 次，每次更新多个 UI 对象），这对我来说就像是用命令向主线程“发送垃圾邮件”。

发送到主线程是否太多了？如果是这样，是否有人对解决此问题的最佳方法有任何想法？

我已经研究过了`dispatch_apply`，但是在合并数据时这似乎更有用，这不是我所追求的 - 如果更新太频繁，我真的只想跳过更新，所以只有合理数量的更新被发送到主线程！

我正在考虑采用不同的方法并实现一个计时器来不断地轮询数据，比如每 10 毫秒一次，但是由于数据更新往往是零星的，我觉得这样做会很浪费。

结合这两种方法，我考虑的另一个选择是等待更新消息并通过设置计时器以按设定的时间间隔轮询数据来响应，然后如果数据似乎已停止更改，则禁用计时器。但这是否会使问题过于复杂，并且明智的方法是简单地运行一个恒定的计时器吗？

**编辑：** *在下面添加了一个答案，显示了使用调度源的改编*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T16:44:53.230

一种选择是使用带有类型的[Dispatch Source](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html)`DISPATCH_SOURCE_TYPE_DATA_OR` ，它可以让您重复发布事件并让 libdispatch 为您将它们组合在一起。当你有东西要发布时，你`dispatch_source_merge_data`习惯于让它知道有新的事情要做。`dispatch_source_merge_data`如果目标队列（在您的情况下，主队列）忙，多个调用将合并在一起。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T21:38:49.103

我一直在尝试使用调度源并让它现在按预期工作 - 这是我调整我的类实现的方式，以防遇到这个问题的任何人都可以使用它：

```
@implementation AppController {
@private
    dispatch_source_t _gcdUpdateUI;
}

- (void)awakeFromNib {

    // Added the following code to set up the dispatch source event handler:

    _gcdUpdateUI = dispatch_source_create(DISPATCH_SOURCE_TYPE_DATA_ADD, 0, 0, 
                                          dispatch_get_main_queue());
    dispatch_source_set_event_handler(_gcdUpdateUI, ^{

        // For each UI element I want to update, pull data from model object:
        // For testing purposes - print out a notification:
        printf("Data Received. Messages Passed: %ld\n", 
               dispatch_source_get_data(_gcdUpdateUI));
    });

dispatch_resume(_gcdUpdateUI);

} 
```

现在在委托方法中，我删除了对 的调用`dispatch_async`，并将其替换为以下内容：

```
- (void)updateUIFromDataModel {

  dispatch_source_merge_data(_gcdUpdateUI, 1);

} 
```

这对我来说绝对没问题。现在即使在最密集的数据更新期间，UI 也能保持完美响应。

虽然`printf()`输出是检查合并是否正常工作的一种非常粗略的方式，但快速滚动控制台输出显示大多数消息打印输出的值为 1（其中很容易 98%），但是有间歇性跳跃到 10 到 20 左右，在模型发送最多更新消息的时候达到 100 多条合并消息的峰值。

再次感谢您的帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T15:51:58.133

如果应用程序在重负载下出现沙滩球，那么您已经阻塞了主线程太久，您需要为 UI 更新实施合并策略。如果应用程序仍然对点击有响应，并且没有沙滩球，那么你很好。

# shell - XSLT 可以在操作系统级别执行 shell 脚本吗？

> ID：15504106
> 
> 赞同：2
> 
> 时间：2013-03-19T15:48:11.163
> 
> 标签：shell, xslt, saxon

我有一个生产流程，它在完成之前将 XSLT 和一些 shell 脚本在大约 4 个步骤中组合在一起。我现在手动执行每个步骤。

我在 Linux 的命令行中使用 Saxon 9。我可以让 xsl 执行 shell 脚本……而不是我吗？

（我知道我可以使用 Ant 或 Make 以另一种方式实现预期的结果。但如果这样做不是很大的努力，我更愿意留在 XSLT）

**更新**：我已经最小化了我的 shell 脚本并使用 Xproc 加快了速度。我对结果并不完全满意，但 Xproc 改善了生活。下面凯的建议看起来不错..但我还没有尝试过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T07:17:16.437

我也不精通 Java，但我在[Saxonica 网站](http://www.saxonica.com/documentation/index.html#!extensibility)上的 Michael Kay 教程中发现它是可行的。

这是我所做的以及对我来说效果很好的方法：在 XSLT 样式表的根元素中，我为函数分配了一个名称空间（在我的情况下，我使用它来解压缩，所以我将前缀命名为 unzip，但这肯定是任何事物）：

```
xmlns:unzip="java:java.lang.Runtime" 
```

我正在为稍后调用的批处理文件定义一个带有文件路径的变量。然后我正在使用

```
<xsl:result-document href="{$batchFile}" method="text"> ... </result document> 
```

创建批处理文件。（解压缩当然可以只用一个命令完成，但我发现批处理文件版本更方便，因为我需要将解压缩命令与一些更改目录命令和其他小东西结合起来。此外，使用批处理文件打开了一个世界可以从 XSLT 工作表调用的更复杂的任务。）

当我需要执行批处理文件时，我插入一个 xsl:message，如下所示：

```
<xsl:message>Executing <xsl:value-of select="unzip:exec(unzip:getRuntime(),concat('cmd /c /y start ',$batchFile))"/></xsl:message> 
```

希望有帮助，最好的问候，凯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:34:01.920

您可以像调用任何其他外部 Java 函数一样调用 java.lang.Runtime.exec()。

# c# - 检查参数类型

> ID：15504108
> 
> 赞同：3
> 
> 时间：2013-03-19T15:48:15.047
> 
> 标签：c#

我想检查方法的参数具有哪种类型，以便为我在方法内部确定的变量提供所需的类型：

```
public static Object getFileContent(String filename, Type returntype)
{
     if (returntype.GetType().Equals(string))
     {
       // do something
     }
} 
```

这行不通。我能做些什么来检查 returntype 是否为`string`or `List<string>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:49:26.837

```
returntype == typeof(string) 
```

无需调用`GetType`，因为您已经*有*类型。（`GetType`无论如何都不会返回有用的答案，它会返回 typeof(Type)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:49:14.847

改用[`typeof`](http://msdn.microsoft.com/en-us/library/58918ffs%28v=vs.71%29.aspx)运算符

```
 if (returntype.Equals(typeof(string)))
 {
   // do something
 } 
```

要不就

```
 if (returntype == typeof(string))
 {
   // do something
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:49:27.553

```
if(returnType == typeof(String) || return == typeof(List<String>))
    //logic 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:53:22.350

在这种情况下，您只想检查它`returntype`是否与`string`. 比较`Type`实例时，最好的方法是简单地使用`==`运算符

```
return returntype == typeof(string); 
```

如果您必须处理 COM 接口，但您将希望使用该`IsEquivalentTo`方法而不是`==`

```
return returntype.IsEquivalentTo(typeof(TheInterface)); 
```

这是必要的，因为 COM 中的嵌入式互操作类型将显示为不同的`Type`实例。该`IsEquivalentTo`方法将检查它们是否代表相同的基础类型。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-19T15:50:33.180

我更喜欢`is`自己的运营商：

```
if (returntype is string)
{
    // do something
} 
```

# mysql - 坚持一个简单的查询 - OUTER JOIN

> ID：15504110
> 
> 赞同：1
> 
> 时间：2013-03-19T15:48:20.223
> 
> 标签：mysql, outer-join

我有一个简单的查询要获得，但我被卡住了，我真的不知道该怎么做。更具体地说：该表`Allarmi`有很多条目，我将它们全部分组显示`Allarmi.IDComponente`

像这样的东西

```
SELECT * 
FROM ALLARMI AS ALLARMI
WHERE ID_CELLA = 1
GROUP BY ID_Componente 
```

我只需要在此表中添加一`COUNT`列，例如

```
(SELECT COUNT( * ) 
FROM allarmi
WHERE isAttivo = 1
GROUP BY id_componente) 
```

但我想展示`COUNT`即使它`0`或`NULL`

我该怎么做？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:01:44.937

假设表`Componenti`定义了组件，并且您想从`allarmi`每个组件中获取记录计数，您实际想要做的是从中选择组件并`Componenti`添加一个[LEFT OUTER JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)`allarmi`

```
SELECT COMPONENTI.ID_Componente, COUNT(ALLARMI.ID_Componente)
FROM COMPONENTI
LEFT OUTER JOIN ALLARMI ON
   -- insert your join here!
   -- maybe COMPONENTI.ID_Componente= ALLARMI.ID_Componente?
   -- add any query for this table here as well.
   AND ALLARMI.ID_Cella = 1
GROUP BY COMPONENTI.ID_Componente 
```

# javascript - GORM - MongoDB 不会在父类集上保存项目

> ID：15504111
> 
> 赞同：0
> 
> 时间：2013-03-19T15:48:20.747
> 
> 标签：javascript, mongodb, grails, grails-orm, grails-domain-class

这是域类

```
class Settings {
    static constraints = {
        uid(nullable: false, unique: true)
        data()
    }
    static hasMany = [items: Item]
    Map data
} 
```

* * *

```
class Item{

    static constraints = {
        name()
        email()
        approved()
    }

    static mapping = {
        email index: true, indexAttributes: [unique: true]
    }

    String name
    String email
    Boolean approved = false;
} 
```

* * *

基本上有很多设置对象有很多项目（见下图）： ![数据结构](../Images/8aa1605220df4da616559fa523444e09.png)

现在我正在查找和更新这样的项目：

```
...
        def item = (Item)Item.findByEmail(email);
        if (!item.approved) {
            item.approved = true;
            item.save(flush: true);
        }
... 
```

* * *

**未保存**我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:12:28.637

默认情况下，MongoDB 不排除空字段。一旦我添加了一个值，一切都会很好：

```
...
    def item = (Item)Item.findByEmail(email);
    if (!item.approved) {
        item.approved = true;
        item.name = "MyName";
        item.save(flush: true);
    }
... 
```

# ios - 从 URL 解析 JSON 响应给出

> ID：15504112
> 
> 赞同：1
> 
> 时间：2013-03-19T15:48:24.873
> 
> 标签：ios, json, nsdictionary, nsurlconnection, nsdata

我通过以下方式向服务器发送请求：

```
- (void) getData
{
    NSString *url=  @"http://example.com";

    NSMutableURLRequest *theRequest= [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]
                                                         cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                     timeoutInterval:10.0];

exampleConnection =[[NSURLConnection alloc] initWithRequest:theRequest delegate:self startImmediately:YES];

} 
```

为此，响应是一个 JSON 文件，我将其解析如下：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Connection did finish loading %@",[connection currentRequest]);

    NSDictionary *exampleDictionary = [NSJSONSerialization JSONObjectWithData:receivedData options: NSJSONReadingAllowFragments error:nil];

    NSLog(@"%@", exampleDictionary); // which gives me null

} 
```

响应较早时效果很好。但是现在它给了我一个空值，这显然是因为某些东西阻碍了从 JSON 到 NSDictionary 的转换。我调查发现问题是因为有几个*外国字符*（中文或其他），解析过程出错了。

我不知道如何解决这个问题。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:27:55.770

我玩弄了类和编码选项，最后做了以下事情，解决了这个问题。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSLog(@"Connection did finish loading %@",[connection currentRequest]);

    NSString *res = [[NSString alloc] initWithData:receivedData encoding:NSASCIIStringEncoding];

    NSDictionary *exampleDictionary = [NSJSONSerialization JSONObjectWithData:[res dataUsingEncoding:NSUTF8StringEncoding] options: NSJSONReadingAllowFragments error:nil];

    NSLog(@"%@", exampleDictionary); // gives the actual data! :)

} 
```

# python - 如何通过谷歌应用引擎使用 NDB 引用实体

> ID：15504113
> 
> 赞同：1
> 
> 时间：2013-03-19T15:48:24.793
> 
> 标签：python, google-app-engine

我正在使用 gae-boilerplate（webapp2 和 jinja2）。我的模型如下所示：

```
class Location(ndb.Model):
    x = ndb.FloatProperty()
    y = ndb.FloatProperty()

class Criterium(polymodel.PolyModel):
    name = ndb.StringProperty(required=True)
    user = ndb.KeyProperty(kind='User')
    priority = ndb.IntegerProperty(required=True)

class Work(Criterium):
    location = ndb.StructuredProperty(Location)

class Friend(Criterium):
    location = ndb.StructuredProperty(Location) 
```

我有一张包含标准模型中所有记录的表。我想在那里添加一个删除链接，但我不知道要传递什么参数来引用特定实体。我的处理程序如下所示：

```
def get(self):
    criteria = Work.query().order(-Criterium.priority, Criterium.name)
    self.view.list_columns = [('name', 'Name'),
                         ('priority', 'Priority'),
                         ('className', 'Type')]
    self.view.criteria = criteria
    self.view.count = criteria.count()
    params={}
    self.render_template('list.html', **params) 
```

似乎是一个简单的问题，但是整天都在苦苦挣扎……在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:03:04.687

`id`对象的呢？那是模型
中该对象的唯一标识符。`Criterium`

循环条件实体时：

```
for criterum in criteria:
    criterum.key.id() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:04:43.090

见下面的例子

从 google.appengine.ext 导入 ndb

类用户（ndb.Model）：

```
created = ndb.DateTimeProperty(auto_now_add = True)
firstName = ndb.StringProperty(required = True)
lastName = ndb.StringProperty(required = True)
email = ndb.StringProperty(required = True)
pwHash = ndb.StringProperty(required = True)

@classmethod
def byEmail(cls, email):
    u = cls.query(cls.email == email).get()
    return u

@classmethod
def register(cls, firstname, lastname, email, password):
    pwhash = utils.makePwHash(email, password)
    return User(firstName=firstname,
        lastName=lastname,
        email=email,
        pwHash=pwhash)

@classmethod
def login(cls, email, password):
    u = User.byEmail(email)
    if u and utils.validPW(email, password, u.pwHash):
        return u 
```

# types - Scheme中定义表达式的类型

> ID：15504117
> 
> 赞同：5
> 
> 时间：2013-03-19T15:48:35.557
> 
> 标签：types, scheme, racket

简而言之：我的问题是 Scheme 中定义表达式的类型是什么？

举个例子：

```
(define x 5) 
```

或者

```
(define x (lambda (n) (* n n))) 
```

这对我来说有点混乱。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T15:56:20.997

在 Racket[`define`](http://docs.racket-lang.org/reference/define.html?q=define#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29)中是一种特殊形式而不是表达式，因此它本身没有值，如果您尝试执行类似这样的操作，您将收到错误消息：

```
(display (define x 42))
=>  define: not allowed in an expression context in: (define x 42) 
```

如果它有一个值，它将类似于[`void`](http://docs.racket-lang.org/reference/void.html)，但这将取决于解释器的特定实现细节（我相信我看到一个解释器`#t`在 a`define`完成后返回）

> `#<void>`大多数具有副作用且没有有用结果的表单和过程都会返回该常量

[规范](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_sec_11.2)也没有详细说明这一点 - 强化了它依赖于实现的声明。

# jquery - 删除影响 Jquery 脚本？

> ID：15504118
> 
> 赞同：0
> 
> 时间：2013-03-19T15:48:39.727
> 
> 标签：jquery, ajax

我有一个脚本可以使表格响应（脚注）。这非常适合我的需求，但我使用了一些 ajax 来引入更多的表行，但脚本不会影响这些新行。

我试图在我的 ajax 完成后重新启动脚本，但它不起作用。

我的问题是，我可以删除受影响的 jquery 以便在加载数据后重新应用它吗？

我的 jQuery：

```
jQuery(document).ready(function ($) {
table();

$('#moreevent').click(function(){
var last = $('#the-event tr').length;
$.ajax({
    type: "POST",
    url: "ajax.php",
    data: { levent: last }
}).done(function( data ) {
    $('#the-event').append(data);
    cardbox();
    table();
});

return false;
});

});

function cardbox(){
jQuery('.e-info-more-cont').hide();
jQuery('.e-info-more').mouseover(function(){
    jQuery(this).css({"z-index":"1001"});
    jQuery(this).nextAll(".e-info-more-cont").show();
}).mouseout(function(){
    jQuery(this).nextAll(".e-info-more-cont").hide();
    jQuery(this).css({"z-index":""});
});
}

function table(){

jQuery('.footable').footable();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:49:55.303

您正在使用`.click()`已弃用且不处理动态添加的项目。根据您的 jQuery 版本，使用`.on()`（推荐），或者`.live()`

**编辑：**正如建议的那样，`.click()`不推荐使用，但仍然建议尽可能使用`.on()`。

# objective-c - NSTextField 不响应键盘输入

> ID：15504119
> 
> 赞同：3
> 
> 时间：2013-03-19T15:48:40.753
> 
> 标签：objective-c, nsview, nstextfield

我尝试在 OS X 10.8 中使用 Objective-C 编写一个单窗口应用程序来测试一些东西。一切正常，除了我创建的 NSTextField 不响应键盘输入。代码如下：

```
#import <Cocoa/Cocoa.h>

@interface customizedView:NSView
    +(customizedView *)aCustomizedView;  // changed method name to follow convention
@end
@implementation customizedView
    +(customizedView *)aCustomizedView{
        customizedView *newView = [[[customizedView alloc] initWithFrame:NSMakeRect(0,0,400,300)] autorelease];
        NSTextField *tf = [[[NSTextField alloc] initWithFrame:NSMakeRect(200,150,150,50)] autorelease];
        [newView addSubview: tf positioned:NSWindowBelow relativeTo:newView];
        return newView;
    }

    -(void)windowWillClose:(NSNotification *)aNot{
        [NSApp terminate:self];
    }
@end

void setup(){
    NSWindow *aWindow = [[[NSWindow alloc] initWithContentRect:NSMakeRect(0,0,400,300) styleMask:NSTitledWindowMask | NSClosableWindowMask | NSResizableWindowMask backing:2 defer:NO] autorelease];
    customizedView *aView = [customizedView aCustomizedView];
    [aWindow setContentView:aView];
    [aWindow setDelegate:aView];
    [aView setNeedsDisplay:YES];
    [aWindow makeKeyAndOrderFront:nil];
}

int main(int argc, char **argv){
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSApplication *NSApp = [NSApplication sharedApplication];
    setup();
    [NSApp run]; [NSApp release]; [pool release];
    exit(EXIT_SUCCESS);
} 
```

编译使用

```
gcc -w filename.m -o tmp -framework Cocoa 
```

除了我无法使用键盘输入到自定义 NSView 中的文本字段之外，一切正常。用鼠标粘贴是可以的。到目前为止，我仍然不知道为什么会发生这种情况，我提前感谢所有真诚阅读此提示的人。

# java - Tomcat - 请求的资源（）不可用，文件 mp3

> ID：15504123
> 
> 赞同：-2
> 
> 时间：2013-03-19T15:48:48.657
> 
> 标签：java, tomcat, netbeans

我只想完成一个简单的 HTML 5 示例。

```
 <audio src="2.mp3" controls autoplay>
        Your browser does not support the audio element.
    </audio> 
```

但它无法完成，这是来自 Tomcat 的描述：

```
"The requested resource (/DemoPlaying/2.mp3) is not available." 
```

我的文件夹结构：

![文件夹结构](../Images/9e8aa999885a6f1a66892f2599390d25.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:09:47.313

很明显，您的 mp3 文件在您尝试请求的 URL 上不可用。更正您的“src”以指向正确的网址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T05:04:06.600

我想你必须记住：

1）如果您的应用程序格式正确，那么典型的结构如下：

```
http://myserver:8080/myapp

```

2）然后您的文件必须在您的应用程序的上下文中发布

```
http://myserver:8080/myapp/mp3file

```

3）因此，在开发时，您的结构必须是：

```
网页内容
   |
   |--index.jsp
   |--mymp3.mp3
   |--WEB-INF

```

4）war文件的内容必须与Webcontent（或您的应用程序的根文件夹）相同

只有这样，您的文件才能被服务器检测到，并且不要忘记在 Tomcat 服务器上注册扩展

# vb.net - 将datagridview保存为根据内容分隔excel或PDF文件

> ID：15504126
> 
> 赞同：1
> 
> 时间：2013-03-19T15:48:50.387
> 
> 标签：vb.net, datagridview

我目前有我的 datagridview 从 mysql 表中导入数据。导入信息后（通常为 1000 行 x 15 列），用户可以将数据导出到 Excel。然后，用户必须运行一个宏以根据第 1 列中的内容将数据分成单独的工作表（根据值将相同的行组合在一起），然后运行另一个宏以将每个单独的工作表保存到文件夹中它自己的电子邮件文件中. 第 1 列的内容可以具有保存值 - 例如

![在此处输入图像描述](../Images/cb29d0b503a7794f38206f048540af4f.png)

一旦用户单击按钮，是否有可能让 vb.net 在以下步骤中自动执行此功能：

1.  按第 1 列中的内容对 dgv 进行排序，
2.  开始根据第 1 列中的内容将数据保存到指定文件夹中的单独文件中（所有 jim 和 bill 都在特定文件夹中）
3.  文件名将是第 1 列中内容的名称。
4.  完成后会弹出一个窗口，表明项目已保存。

我用于 dgv 导出的当前代码。

```
 'export to excel
    'verfying the datagridview having data or not
    If ((DataGridView1.Columns.Count = 0) Or (DataGridView1.Rows.Count = 0)) Then
        Exit Sub
    End If

    'Creating dataset to export
    Dim dset As New DataSet
    'add table to dataset
    dset.Tables.Add()
    'add column to that table
    For i As Integer = 0 To DataGridView1.ColumnCount - 1
        dset.Tables(0).Columns.Add(DataGridView1.Columns(i).HeaderText)
    Next
    'add rows to the table
    Dim dr1 As DataRow
    For i As Integer = 0 To DataGridView1.RowCount - 1
        dr1 = dset.Tables(0).NewRow
        For j As Integer = 0 To DataGridView1.Columns.Count - 1
            dr1(j) = DataGridView1.Rows(i).Cells(j).Value
        Next
        dset.Tables(0).Rows.Add(dr1)
    Next

    Dim excel As New Microsoft.Office.Interop.Excel.Application
    Dim wBook As Microsoft.Office.Interop.Excel.Workbook
    Dim wSheet As Microsoft.Office.Interop.Excel.Worksheet

    wBook = excel.Workbooks.Add()
    wSheet = wBook.ActiveSheet()

    Dim dt As System.Data.DataTable = dset.Tables(0)
    Dim dc As System.Data.DataColumn
    Dim dr As System.Data.DataRow
    Dim colIndex As Integer = 0
    Dim rowIndex As Integer = 0

    For Each dc In dt.Columns
        colIndex = colIndex + 1
        excel.Cells(1, colIndex) = dc.ColumnName
    Next

    For Each dr In dt.Rows
        rowIndex = rowIndex + 1
        colIndex = 0
        For Each dc In dt.Columns
            colIndex = colIndex + 1
            excel.Cells(rowIndex + 1, colIndex) = dr(dc.ColumnName)

        Next
    Next

    wSheet.Columns.AutoFit()
    Dim strFileName As String = "C:\exports\jim.xls"
    Dim blnFileOpen As Boolean = False
    Try
        Dim fileTemp As System.IO.FileStream = System.IO.File.OpenWrite(strFileName)
        fileTemp.Close()
    Catch ex As Exception
        blnFileOpen = False
    End Try

    If System.IO.File.Exists(strFileName) Then
        System.IO.File.Delete(strFileName)
    End If

    wBook.SaveAs(strFileName)
    excel.Workbooks.Open(strFileName)
    excel.Visible = True 
```

# javascript - javascript eval 真的有那么大的安全威胁吗？

> ID：15504128
> 
> 赞同：5
> 
> 时间：2013-03-19T15:48:53.597
> 
> 标签：javascript, eval

假设没有可用于修改某人计算机的浏览器端安全漏洞，我不明白使用如何`eval`导致任何真正的威胁。

有人可以解释这怎么可能。有人可以在用户的​​计算机上显示某些内容，但如果没有重定向或接受下载，就不会造成真正的伤害。不会造成服务器端损坏，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:57:29.157

当你交出对 JavaScript 的控制权时，可能证明有害的不仅仅是它的执行。使用 Ajax，您可以将[flash 对象](http://www.cvedetails.com/vulnerability-list/vendor_id-53/product_id-6761/Adobe-Flash-Player.html)、pdf 或[Java](http://www.cvedetails.com/vendor/93/Oracle.html)小程序加载到当前页面本身。那将不会显示任何对话框，并且您将调用**插件**（比浏览器本身具有更多的权限）。

因此，理论上，它可能会造成与插件本身允许的一样多的损害，这通常是**相当多的。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:51:27.987

JavaScript 提供了多种方式来使浏览器向服务器发送数据。可以利用它们对服务器发起攻击（包括拒绝服务攻击）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:08:01.043

存储在全局可访问的 JavaScript 变量（通过您的代码或第三方代码）中的任何数据都可用于传递给`eval`.

根据存储在其中的内容（例如用户身份验证令牌）以及系统的设计方式，可能会造成大量服务器端损坏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T16:23:34.433

因为 eval 会导致代码执行，它会在您的站点上创建一个漏洞，除非您 100% 控制该代码（这非常罕见，或者您无论如何都不会考虑 eval）。

此漏洞不一定会对您的服务器产生负面影响，但它会非常严重地影响您的用户，并且在某些情况下允许黑客窃取您的用户 cookie、访问他的会话以及许多其他事情。

一个简单的例子是 eval 执行一个恶意脚本，该脚本向您的服务器发送一个帖子，其中包含您的服务器删除或更改用户数据所需的所有必要信息。因为请求实际上来自您的用户会话，所以它是一个完全有效的请求。

# batch-file - 使用批处理脚本从文本文件中读取特定行的第一个单词，然后输入 if 语句

> ID：15504129
> 
> 赞同：0
> 
> 时间：2013-03-19T15:49:00.410
> 
> 标签：batch-file, text-files

抱歉，我知道这里有人问过类似的问题，但基本上我正在尝试读取批处理脚本中的文本文件并评估写入文件的内容。

该作业是一个将文件发送到打印机的打印作业，我让它将命令的输出回显到日志文件。然后我想读一下输出是什么，如果有错误，我会发送一封电子邮件，以便我们知道什么时候停止工作。

它总是附加到文件的末尾，所以我知道如果有错误，最后一行的第 4 行将以“错误：”开头。所以我的问题是如何将其读入变量，以便执行 IF 语句。我已经对电子邮件部分进行了排序，它只是从我正在努力处理的文件中读取。

任何帮助将非常感激。以下是出现错误时文件内容的示例：

```
---- 
C:\XG1\DGS01\prints\000000398200001.XG1 
19/03/2013 
15:02
        1 file(s) copied.
Error: print server unreachable or specified printer does not exist.

        1 file(s) moved. 
```

它在文件末尾留下一个空白行，所以我将使用最后一行减去 4。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:53:08.817

as a line in your batch file:

```
for /f "tokens=1*delims=:" %%i in (thenameofyourfile) do if "%%i"=="Error" set message=%%j
echo message was "%message%" 
```

Actually, that will report if ANY lines are in the format you describe.

```
@ECHO OFF
SETLOCAL
(SET message=)
FOR /f "tokens=1,2*delims=[]:" %%i IN (
 ' TYPE thenameofyourfile^|find /n /v "" '
 ) DO (
 SET lastline=%%i
 IF "%%j"=="Error" SET errorline=%%i&SET message=%%k
 )
SET /a target=%errorline% + 3
IF %target% neq %lastline% (SET message=)
IF DEFINED message ECHO error found %message% 
```

should get the line ONLY if it's the fourth last line in the file - the "+ 3" being the line-count required (well, minus 1)

BUT - remember that if this is, as it seems, a log file that it's possible (I'd imagine) that further entries may appear AFTER the error (for further jobs) so the target for the `Line beginning "Error:"` may not be the fourth-last...

OTOH, using the line(s) I first posted, once an "Error:..." line appears, it will be detected EVERY time - you'd need to reset the logfile in your mail-send procedure (save existing & recreate empty?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:59:27.570

我相信检查错误的最快且资源最少的方法是使用[GNU tail](http://gnuwin32.sourceforge.net/packages/coreutils.htm)。如果可以，请获取 .zip 二进制文件并将其放入`tail.exe`您的路径或批处理脚本可以访问的位置。然后：

```
@echo off
setlocal

tail -n 4 printerlog.log | find /i "Error:" >NUL && (
    echo Error found.  Sending email.
    rem do email stuff
) 
```

或者，如果您希望为您的电子邮件捕获错误文本：

```
@echo off
setlocal

for /f "delims=" %%I in ('tail -n 4 printerlog.log ^| find /i "Error:"') do (
    echo Error found: %%I
    rem do email stuff
    goto :EOF
) 
```

`tail`比所有其他计算日志文件行数和逐行循环日志文件的方法（无论是批处理循环还是在 JScript 中循环）都高效得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:12:04.210

如果您想从日志文件底部开始读取第四行，您可以计算日志文件中的行数，减去 4，然后`more +%count%`得到日志的尾部。

```
@echo off
setlocal
set logfile=printerlog.log

for /f "tokens=2 delims=:" %%I in ('find /c /v "" "%logfile%"') do set lines=%%I
set /a "tail4=%lines% - 4"

for /f %%I in ('more +%tail4% "%logfile%" ^| find /i "Error:"') do (
    rem do your email voodoo here
) 
```

如果您的日志文件将超过 65,535 行，我建议使用 JScript 或 VBScript 循环文件而不是批处理循环。跳过那么多行`more`会导致`more`崩溃，所以你必须逐行循环并增加一个计数器。但是，批处理`for`循环非常慢。

* * *

`more`这是用 JScript-ish 文件读取替换的相同脚本。

```
@if (@a==@b) @end /*
:: batch portion

@echo off
setlocal
set logfile=printerlog.log

for /f "tokens=2 delims=:" %%I in ('find /c /v "" "%logfile%"') do set lines=%%I
set /a "tail4=%lines% - 4"

for /f "delims=" %%I in ('cscript /nologo /e:jscript "%~f0" %tail4% "%logfile%" ^| find /i "Error:"') do (
    rem do your email voodoo here
    rem %%I contains the matching line.

    rem After one match, stop processing further
    goto :EOF
)

goto :EOF

::JScript portion */
var i=0, fso = new ActiveXObject("Scripting.FileSystemObject").OpenTextFile(WSH.Arguments(1),1);
while (!fso.AtEndOfStream) {
    if (i++ < WSH.Arguments(0)) fso.SkipLine();
    else WSH.Echo(fso.ReadLine());
}
fso.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:35:56.750

没有任何循环的解决方案（测试是否有任何错误）：

```
@findstr Error: printer.log >nul 2>&1
@if %errorlevel% equ 0 echo Send email now! 
```

这段代码只测试最后一行之前的第四行是否有错误：

```
@echo off &setlocal enabledelayedexpansion
for /f %%i in ('findstr /n "^" printer.log') do (
set line4=!line3!&set line3=!line2!&set line2=!line1!&set line1=%%i)
echo %line4%|findstr Error: >nul 2>&1
if %errorlevel% equ 0 echo Send email now! 
```

# servicestack - 是否可以在运行时将对象实例注入服务

> ID：15504130
> 
> 赞同：2
> 
> 时间：2013-03-19T15:49:01.673
> 
> 标签：servicestack

我创建了一个插件，它检查查询字符串中的参数并根据此 ID 加载用户对象并使用它填充任何请求 DTO。（我的所有请求 DTO 都继承自具有 CurrentUser 属性的 BaseRequest）

```
public class CurrentUserPlugin : IPlugin
{
    public IAppHost CurrentAppHost { get; set; }

    public void Register(IAppHost appHost)
    {
        CurrentAppHost = appHost;
        appHost.RequestFilters.Add(ProcessRequest);
    }

    public void ProcessRequest(IHttpRequest request, IHttpResponse response, object obj)
    {
        var requestDto = obj as BaseRequest;

        if (requestDto == null) return;

        if (request.QueryString["userid"] == null)
        {
            throw new ArgumentNullException("No userid provided");
        }

        var dataContext = CurrentAppHost.TryResolve<IDataContext>();
        requestDto.CurrentUser = dataContext.FindOne<User>(ObjectId.Parse(requestDto.uid));

        if (requestDto.CurrentUser == null)
        {
            throw new ArgumentNullException(string.Format("User [userid:{0}] not found", requestDto.uid));
        }
    }
} 
```

我需要在我的服务中提供此用户对象，但我不想每次都检查 DTO 并从那里提取。有没有办法让来自插件的数据在全球范围内可供我的服务使用？我也想知道是否有另一种方法来实例化这个对象，因为我的单元测试，插件没有运行——因为我直接调用我的服务。

所以，我的问题是，我可以在运行时向我的服务注入用户实例，而不是使用插件吗？我已经在使用 IoC 来注入不同的数据库处理程序，具体取决于是否在测试模式下运行，但我看不到如何为需要在每个请求开始时实例化的 User 对象实现这一点。

下面是我如何在 appHost 中注入 DataContext 的示例。

```
container.Register(x => new MongoContext(x.Resolve<MongoDatabase>()));
container.RegisterAutoWiredAs<MongoContext, IDataContext>(); 
```

这是我的 BaseService 的示例。理想情况下，我也希望在我的服务上拥有一个 CurrentUser 属性。

```
public class BaseService : Service
{
    public BaseService(IDataContext dataContext, User user)
    {
        DataContext = dataContext;
        CurrentUser = user; // How can this be injected at runtime?
    }

    public IDataContext DataContext { get; private set; }
    public User CurrentUser { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:37:06.613

您是否考虑过尝试使用**IHttpRequest Items Dictionary**来存储对象。您可以从任何过滤器或服务或任何可以访问 IHttpRequest 的地方访问这些项目。请参阅[IHttpRequest](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ServiceHost/IHttpRequest.cs#L46)的源代码。

请注意属性、服务和插件的执行顺序以及将项目存储在 Items 字典中的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:13:57.897

**我需要在我的服务中使用此用户对象，但我不想每次都检查 DTO 并从那里提取**

如果您没有在查询字符串中传递“用户 ID”，您的应用程序将如何了解用户？您可以将用户数据存储在[Session](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)中吗？使用 Session 假设客户端连接到您的应用程序并在客户端中保留一个 Session Id（ServiceStack 中的 ss-id 或 ss-pid cookie），可以在服务器上查找以获取“会话数据”。如果您可以使用 Session ，您可以从您的服务中检索数据，执行类似的操作

```
base.Session["UserData"] or base.SessionAs<User>(); 
```

注意：您需要[将用户数据保存到会话](https://stackoverflow.com/questions/15412350/session-not-saved-in-servicestack/15414958#15414958)

**有没有办法让来自插件的数据在全球范围内可供我的服务使用？但我看不到如何为需要在每个请求开始时实例化的 User 对象实现这一点。**

这听起来像您想要一个[全局请求过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)。您已经在这样做了，但是您将其包装到插件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:53:39.930

添加：

我们不想在 Service 中使用 HttpContext，因为我们想直接在测试中使用 Service。

> **没有它生活的好处**
> 
> 如果您不需要访问 HTTP 请求上下文，那么没有什么可以阻止您让相同的 IService 实现处理来自我们为内部项目完成的消息队列的请求（顺便说一下，这是 asynconeway 端点背后的动机，以发出信号对延迟执行安全的请求）。

[http://www.servicestack.net/docs/framework/accessing-ihttprequest](http://www.servicestack.net/docs/framework/accessing-ihttprequest)

而且我们不使用 http 调用来运行测试。

所以我们的解决方案是：

```
public class UserService
    {
        private readonly IDataContext _dataContext;

        public UserService(IDataContext dataContext)
        {
            _dataContext = dataContext;
        }

        public User GetUser()
        {
            var uid = HttpContext.Current.Request.QueryString["userId"];

            return _dataContext.Get<User>(uid);
        }
    } 
```

和

```
container.Register(x => new UserService(x.Resolve<IDataContext>()).GetUser()).ReusedWithin(ReuseScope.Request); 
```

这是服务签名：

```
public SomeService(IDataContext dataContext, User user) { } 
```

有什么建议么？

# powershell - PowerShell 控制台计时器

> ID：15504132
> 
> 赞同：0
> 
> 时间：2013-03-19T15:49:07.547
> 
> 标签：powershell, powershell-2.0

我正在尝试创建一个简单的控制台计时器显示。

```
...

$rpt = $null
write-status "Opening report", $rpt

# long-running
$rpt = rpt-open -path "C:\Documents and Settings\foobar\Desktop\Calendar.rpt"

...

function write-status ($msg, $obj) {

    write-host "$msg" -nonewline

    do {
        sleep -seconds 1
        write-host "." -nonewline
        [System.Windows.Forms.Application]::DoEvents() 
    } while ($obj -eq $null)

    write-host

} 
```

该示例生成“打开报告 ....”，但循环永远不会退出。

我可能应该使用回调或委托，但我不确定这种情况下的模式。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:25:57.243

您应该使用[`Write-Progress`](http://technet.microsoft.com/en-us/library/hh849902.aspx)通知用户您的流程的运行状态并在事件需要时更新它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:05:58.357

如果您想使用 powershell 进行一些“并行”计算，请使用作业。

```
$job = Start-Job -ScriptBlock {Open-File $file} -ArgumentList $file
while($job.status -eq 'Running'){
    Write-Host '.' -NoNewLine
} 
```

这是我对[Write-Host 的](http://windowsitpro.com/blog/what-do-not-do-powershell-part-1)看法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:08:30.373

脚本按顺序运行。当您输入一个`$null`对象时，while 条件将始终为真。该功能将永远持续下去，直到有东西破坏它（这在您的脚本中从未发生过。

首先，它将使用该功能完成并继续您的下一行：

```
# long-running
$rpt = rpt-open -path "C:\Documents and Settings\foobar\Desktop\Calendar.rpt" 
```

摘要：您的 while 循环就像`while($true)`atm = bad design

# html - 如何在 Bootstrap 中使侧边栏导航折叠为下拉导航小宽度

> ID：15504141
> 
> 赞同：3
> 
> 时间：2013-03-19T15:49:18.920
> 
> 标签：html, css, twitter-bootstrap, responsive-design

在 Bootstrap 中，有没有办法让侧边栏导航（class="nav-list"）以低宽度折叠到下拉导航？为了显示：

从此移动：

![在此处输入图像描述](../Images/f452bdab7ee7fce7beca4d25e364257c.png)

为此在给定宽度断点处：

![在此处输入图像描述](../Images/fee939452821baa2f1e2356f9883bbb9.png)

我希望侧边栏成为桌面宽度的主要导航，但不希望在移动设备上显示全部内容。

# ant - Ant 检查远程目录是否存在

> ID：15504144
> 
> 赞同：1
> 
> 时间：2013-03-19T15:49:27.440
> 
> 标签：ant, build-automation

我将如何检查`ant`远程是否存在给定目录？在本地，我可以通过该`available`任务做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:27:41.413

如果你想在远程计算机上做某事，你必须有某种方式来连接它。我个人使用 ssh 来完成。使用 ssh，您几乎可以在远程计算机上执行所有操作。Ant 的 ssh 使用任务很少，`<sshexec/>`例如`<sshsesion/>`. 如果您不想使用 ssh，则需要找到另一种连接该计算机的方法，但根据我的经验，ssh 是最好的。只需将其安装在远程计算机上即可。我认为最适合你的是`<sshsession/>`，但我没有使用它（我使用它只是`<sshexec/>`因为我遇到了问题`<sshsession/>`）。例如，根据文档，这应该有效：

```
<sshsession host="somehost" username="dude" password="yo" localtunnels="2401:localhost:2401">
    <sequential>
        <available>check availability of the file</available>
    </sequential>
</sshsession> 
```

# flash - 将自己的 haarcascade xml 转换为 AS for marilena / flash

> ID：15504146
> 
> 赞同：1
> 
> 时间：2013-03-19T15:49:27.843
> 
> 标签：flash, actionscript, face-detection

我的问题是：如何将我的“自己的”haarcascade XML 用于 marilena + flartoolkit？我一直在疯狂地搜索，在这里偶然发现了这个：

[http://www.moment77.se/flash-classes/code-snippets/convert-haar-cascades-from-xml-to-actionscript/](http://www.moment77.se/flash-classes/code-snippets/convert-haar-cascades-from-xml-to-actionscript/)

但是 PHP 脚本不起作用，屏幕仍然空白，我也尝试了我朋友的服务器。

我还可以做些什么？还是其他人能够执行它？还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:59:55.780

我通过做两件事让它工作。

1.  转义 first 里面的引号`echo`
2.  更改它用于获取的节点的名称`count`（至少对于我的示例数据）

最终代码如下所示

```
<?php

$xml = simplexml_load_file('haarcascades.xml');
$stages = $xml->haarcascade_frontalface_alt->stages->_;

for($s = 0; $s < count($stages); $s++){
  $trees = $stages[$s]->trees->_;
  if($s == 0)
    echo "

    tree = firstTree = new FeatureTree(". $stages[$s]->stage_threshold.");";
  else
    echo "

    tree = tree.next = new FeatureTree(\". $stages[$s]->stage_threshold.\");";

  for($t = 0; $t < count($trees); $t++){
    $r1 = str_replace(" ", ",", trim(substr($trees[$t]->_->feature->rects->_[0], 0, strlen($trees[$t]->_->feature->rects->_[0])-1)));
    $r2 = str_replace(" ", ",", trim(substr($trees[$t]->_->feature->rects->_[1], 0, strlen($trees[$t]->_->feature->rects->_[1])-1)));
    $th = $trees[$t]->_->threshold;
    $lv = $trees[$t]->_->left_val;
    $rv = $trees[$t]->_->right_val;
    if($t == 0)
      echo "
      feature = tree.firstFeature = new Feature2Rects($th, $lv, $rv, [$r1], [$r2]);";
    else if($t == (count($trees) -1))
      echo "
      feature.next = new Feature2Rects($th, $lv, $rv, [$r1], [$r2]);";
    else
      echo "
      feature = feature.next = new Feature2Rects($th, $lv, $rv, [$r1], [$r2]);";
  }
} 
```

`$xml->haarcascade_frontalface_alt`创建计数时注意用法吗？这已更改，因为我使用的 xml 在顶部看起来像这样

```
<?xml version="1.0"?>
<opencv_storage>
    <haarcascade_frontalface_alt type_id="opencv-haar-classifier">
        <size>20 20</size>
        <stages> 
```

您需要将该名称更改为您的顶级节点的名称。

输出看起来像这样（但更长）

```
feature = tree.firstFeature = new Feature2Rects(-0.0951507985591888, 0.6470757126808167, 0.4017286896705627, [5,3,10,9,-1], [5,6,10,3,3]);
feature = feature.next = new Feature2Rects(6.2702340073883533e-003, 0.3999822139739990, 0.5746449232101440, [15,2,4,10,-1], [15,2,2,10,2]); 
```

# android - 活动开始延迟（使用 WakeLock）

> ID：15504149
> 
> 赞同：1
> 
> 时间：2013-03-19T15:49:39.810
> 
> 标签：android, android-activity, wakelock, start-activity

我之前也问过类似的问题，但是添加 WakeLock 后问题就解决了。一段时间过去了，问题又回来了。

背景 - 它是一个警报应用程序，警报活动从 BroadcastReceiver 启动（代码如下）。问题已经开始随机出现，以前没有问题。应用程序已内置记录器，可将日志保存到数据库-有关我的错误的所有信息来自用户发送的日志-我从未发生过错误...日志：

```
880\. 6/3 5:0:1 - == Logger initialized == from AlarmReceiver
881\. 6/3 5:0:1 - sending START ALARM
882\. 6/3 5:0:1 - WakeLock creating
883\. 6/3 5:0:1 - WakeLock acquiring for 300000
884\. 6/3 5:0:2 - START ALARM send
885\. 6/3 5:0:2 - logger initialized again from StartAlarmReceiver
886\. 6/3 5:0:2 - logger initialized again from Main
887\. 6/3 5:0:3 - start initializeTask //from Main.onCreate
888\. 6/3 5:0:3 - Main start
889\. 6/3 5:0:4 - Main resume
890\. 6/3 5:0:4 - Main pause
891\. 6/3 5:0:4 - Main stop
... not relevant
894\. 6/3 6:0:0 - logger initialized again from AlarmOnScreen create 
```

报警接收器：

```
 public void onReceive(Context context, Intent intent) {
    Logger.initialize(context, "AlarmReceiver");
    if (call_is_on) {
        postAgainIn5Sec();
    } else {
        Utils.log("sending START ALARM");
        CountedWakeLock.acquireLock(context); // acquired for 30000 millis
        Intent i = new Intent();
        i.setAction(StartAlarmReceiver.ACTION_START_ALARM);
        i.putExtras(intent.getExtras());

        context.sendOrderedBroadcast(i, null);
        Utils.log("START ALARM send");
    }
} 
```

启动警报接收器：

```
 public void onReceive(Context context, Intent intent) {
    Logger.initialize(context, "StartAlarmReceiver");
    Intent i = new Intent(context, AlarmOnScreen.class);
    Bundle extras = intent.getExtras();
    i.putExtras(extras);
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);
} 
```

AlarmOnScreen（使用 android:launchMode="singleTask"）

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        setContentView(R.layout.alarm_on_screen);
        Logger.initialize(this, "AlarmOnScreen create");
    //... 
```

计数唤醒锁：

```
 public synchronized static void acquireLock(Context context, long delay) {
    if (sWakeLock == null) {
        Utils.log("WakeLock creating");
        PowerManager pm = (PowerManager) context.getApplicationContext()
                .getSystemService(Context.POWER_SERVICE);
        sWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                "AlarmReceiver lock");
        sWakeLock.setReferenceCounted(false);
        sLockCount = 0;
    }

    Utils.log("WakeLock acquiring for " + delay);
    sLockCount++;
    sWakeLock.acquire(delay);
} 
```

TL;DR - 在调用 startActivity 之后，AlarmOnScreen Activity 调用其 onCreate 方法大约需要一个小时。

问题 - 为什么在调用 startActivity 后活动没有开始？另外，我可以在启动警报时阻止 Main 启动吗？我在从 onCreate 方法开始的线程中做了一些加载，这是毫无意义的，当 Main 甚至不应该显示时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:22:23.640

下一个日志已阐明问题是由 WakeLock 无法正常工作引起的 - 有关详细信息，请访问[WakeLock with PARTIAL_WAKE_LOCK is not working](https://stackoverflow.com/questions/15612544/wakelock-with-partial-wake-lock-is-not-working)

# extjs4 - ExtJs 网格高度和滚动条

> ID：15504150
> 
> 赞同：0
> 
> 时间：2013-03-19T15:49:40.037
> 
> 标签：extjs4, height, scrollbar, viewport

我的应用程序有一个相当复杂的布局，使用边框、vbox 和 hbox，除了一个烦恼之外，它们似乎都非常适合。南部地区的电网底部不正常。当浏览器高于 minHeight/maximized 时，我希望网格占据面板的高度，但目前它看起来像这样：

![在此处输入图像描述](../Images/693bd08d21e424b687bb07e2ecd5e91e.png)

当浏览器缩小（但不低于最小尺寸）时，它看起来像这样，我无法到达网格滚动条的底部:(

![在此处输入图像描述](../Images/7c79d7631365d34a138f0274580347a8.png)

您可以看到（视口/网格问题上可能的最小高度）的滚动条切割，但不确定如何解决这个问题，有人能发现我需要做什么来解决这两个问题吗？下面的代码：

```
<script type="text/javascript" src="../app.js"></script>
<!-- script to warn users when leaving page -->
<?php
$db = Zend_Registry::get('db');
$result = $db->query("select ERROR_ID, ERROR_DESCRIPTION, EMAIL_CONTENT, to_char(\"TIMESTAMP\", 'MM/DD/YYYY HH24:MI:SS') as TIMESTAMP, READ from PI_EMAIL_ERROR where \"TIMESTAMP\" = ( select max(\"TIMESTAMP\") from PI_EMAIL_ERROR ) and READ = 0 and rownum = 1")->FetchAll();
?>
<script type="text/javascript">
    var container = Ext.create('Ext.container.Viewport',{
        id: 'mainWindow',
        minWidth: 800,
        minHeight: 640,
        layout:'fit',
        listeners: {
            afterrender: function() {
                this.setSize(this.getWidth(), this.getHeight());                    
            },
            resize: function(){
                var programGrid = Ext.getCmp('programList');
                if(this.getHeight() < this.minHeight){
                    console.log("Height: ", this.getHeight());
                    console.log("minHeight: ", this.minHeight);
                    console.log("Grid old height: ", programGrid.height);
                    programGrid.height = (this.minHeight - programGrid.height)-18;
                    this.setSize(this.getWidth(), this.getHeight());
                    console.log("Grid new height: ", programGrid.height);
                } else {
                    programGrid.height = 380;
                }
            }
        },
        defaults: {
            //collapsible: true, //Add this to true later maybe impliment a lock sam
            //when viewport scrolled up, background shows a login.
            split: true,
            rezisable: false
        },
        items:[{
            layout: 'border',
            //height: 640,
            //minHeight: 640,
            items: [
                {
                    //This panel holds the file menu strip and the show combo                    
                    border: false,
                    region: 'north',
                    height: 92,
                    bodyStyle:'background: #DFE8F6;',
                    /******Toolbar*******/
                    tbar: [
                    /****File Button****/
                        {
                            xtype: 'button',
                            text: window.samlanguage.file,
                            width: 60,
                            handler: function(btn){

                            },
                            menu: [
                                {
                                    text: window.samlanguage.refreshlist,
                                    action: 'refreshGrid',
                                    icon: '../assets/images/refresh.png',
                                    handler: function(btn){

                                    }
                                },{

                                    text: window.samlanguage.settings,
                                    icon: '../assets/images/settings.png',
                                    action: 'spawnSettings',
                                    handler: function(Btn){
                                    }
                                },{

                                    text: window.samlanguage.compose,
                                    icon: '../assets/images/mail--plus.png',
                                    action: 'spawnEmail',
                                    handler: function(Btn){
                                        Ext.create('APP.view.core.forms.Emailform').show();
                                    }
                                },{

                                    text: window.samlanguage.logout,
                                    action: 'logout',
                                    icon: '../assets/images/exit.png',
                                    handler: function(){

                                    }
                                }

                            ]
                        },
                    /****Help Button****/
                        {
                            xtype: 'button',
                            text: window.samlanguage.help,
                            width: 60,
                            handler: function(btn){

                            },
                            menu: [
                                {
                                    text: window.samlanguage.contents,
                                    icon: '../assets/images/contents.png',
                                    action: 'spawnContents',
                                    handler: function(btn){

                                    }
                                },{

                                    text: window.samlanguage.license,
                                    icon: '../assets/images/licence.png',
                                    handler: function(btn){
                                        var myMask = new Ext.LoadMask(Ext.getBody(), {msg:"<b>Retrieving</b> licensing information..."});
                                        myMask.show();
                                        Ext.Ajax.request({
                                            url: '../License/read',
                                            method: 'post',
                                            //params: values,
                                            success: function(response){
                                                myMask.hide();
                                                var numusers = Ext.decode(response.responseText);
                                                Ext.create('APP.view.core.forms.License', {numusers: numusers.numusers}).show();

                                            }
                                        });
                                    }
                                },{

                                    text: window.samlanguage.about,
                                    icon: '../assets/images/about.png',
                                    //action: 'spawnAbout',
                                    handler: function(btn){
                                        Ext.Msg.show({
                                            title:'About us',                                                
                                            buttons: Ext.Msg.OK,
                                            icon: 'perceptiveLogo'
                                        });
                                    }
                                }

                            ]
                        }
                    ],
                    items: [{
                        //Comboform with userlist
                        xtype: 'Comboform',
                        bodyStyle:'background: #DFE8F6;',
                        border: false
                    }]

                }//End north region (header) region
                ,{
                    region:'center',
                    type: 'vbox',
                    align : 'stretch',
                    items: [
                        {
                            //Add the userlist grid
                            title: 'Currently showing all users',
                            //id: 'usergridList',
                            height: 290,
                            minHeight: 290,
                            border: false,
                            xtype: 'Allusers'
                        },
                        {
                            //Add the allprograms grid
                            title: 'Program Access Permissions',
                            border: false,
                            height: 380,
                            minHeight: 380,
                            //height: 'auto',
                            xtype: 'Allprograms'
                        }
                    ]

                } //End center (body) region
                ,{
                    region:'east',
                    type: 'vbox',
                    align : 'stretch',
                    split: true,
                    //collapsible: true,
                    width: 240,
                    minWidth: 240,
                    maxWidth: 240,
                    //title: 'User Actions',
                    listeners: {
                        /*collapse: function() {
                         this.setTitle("User management");
                         },
                         expand: function() {
                         this.setTitle("User Actions");
                         },
                         click: function() {
                         return false;
                         },*/
                        afterrender: function(){
                            this.splitter.disable();
                        }
                    },
                    //height: 300
                    items :[
                        {
                            title: 'User Actions',
                            border: false,
                            height: 168,
                            xtype: 'Useractionsform'

                        },
                        {
                            title: 'View Audit',
                            border: false,
                            height: 122,
                            xtype: 'Auditform'
                        },
                        {
                            title: 'Program Access',
                            border: false,
                            height: 380,
                            minHeight: 340,
                            xtype: 'Programactionsform'
                        }
                    ]
                } //End of east region
                ,{
                    region: 'south',
                    height: 20,
                    bodyStyle:'background: #DFE8F6;',
                    border: false
                }

            ]
        }]
    }).show();
});
</script> 
```

语法高亮链接： http: [//paste.laravel.com/kPr](http://paste.laravel.com/kPr)

谢谢你，内森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:27:18.653

我指的是您发布的语法突出显示链接的第 87-97 行。

```
 resize: function(){
        var programGrid = Ext.getCmp('programList');
        if(this.getHeight() < this.minHeight){
            console.log("Height: ", this.getHeight());
            console.log("minHeight: ", this.minHeight);
            console.log("Grid old height: ", programGrid.height);
            programGrid.height = (this.minHeight - programGrid.height)-18;
            this.setSize(this.getWidth(), this.getHeight());
            console.log("Grid new height: ", programGrid.height);
        } else {
            programGrid.height = 380;
        }
    } 
```

这是视口的调整大小处理程序，因此每次调整浏览器大小时，此功能都会显式设置网格高度。不确定这段代码的目的是什么，但看起来可能是问题所在。通常，您不需要这样的代码 - 如果您的布局设置正确，所有内容都应该组合在一起，然后您可以根据需要对网格使用 minHeight/maxHeight。如果你把这段代码拿出来会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:54:23.590

我认为您需要完全删除调整大小事件处理程序。看起来您正在尝试在中心面板上创建“vbox”布局，但您使用的是“type: vbox”。尝试使用这个：

```
layout: {
    type: 'vbox'
    align : 'stretch',
    pack  : 'start',
} 
```

这取自 ExtJS 示例（[http://docs.sencha.com/ext-js/4-2/extjs-build/examples/layout-browser/layout-browser.html](http://docs.sencha.com/ext-js/4-2/extjs-build/examples/layout-browser/layout-browser.html)）。然后你可以在你的子容器中添加一个“flex”而不是一个 minheight。

# javascript - Phonegap - JNI ERROR (app bug): local reference table overflow (max=512)

> ID：15504153
> 
> 赞同：2
> 
> 时间：2013-03-19T15:49:46.410
> 
> 标签：javascript, android, cordova

我在 Android 4.0 中有一个 phonegap 应用程序。

当我浏览应用程序时，触摸几次后就会出现此错误...

```
03-19 01:10:59.052: W/dalvikvm(30016): JNI WARNING: DeleteLocalRef(0x24d00216) failed to find entry
03-19 01:10:59.072: W/dalvikvm(30016): JNI WARNING: DeleteLocalRef(0x2360021e) failed to find entry
03-19 01:10:59.092: D/DroidGap(30016): onMessage(onPageStarted,file:///android_asset/www/index.html)
03-19 01:10:59.122: W/dalvikvm(30016): JNI WARNING: DeleteLocalRef(0x20800226) failed to find entry
03-19 01:10:59.122: W/dalvikvm(30016): JNI WARNING: DeleteLocalRef(0x1ec00246) failed to find entry
03-19 01:10:59.132: W/dalvikvm(30016): JNI WARNING: DeleteLocalRef(0x24e00216) failed to find entry
03-19 01:10:59.132: W/dalvikvm(30016): JNI WARNING: DeleteLocalRef(0x29500212) failed to find entry
03-19 01:10:59.132: W/dalvikvm(30016): JNI WARNING: DeleteLocalRef(0x1eb0024a) failed to find entry
03-19 01:10:59.132: W/dalvikvm(30016): JNI WARNING: DeleteLocalRef(0x1eb0024e) failed to find entry
03-19 01:10:59.132: W/dalvikvm(30016): JNI WARNING: DeleteLocalRef(0x1ea00252) failed to find entry
03-19 01:10:59.132: E/dalvikvm(30016): JNI ERROR (app bug): local reference table overflow (max=512)
03-19 01:10:59.132: W/dalvikvm(30016): JNI local reference table (0xc34ff8) dump:
03-19 01:10:59.132: W/dalvikvm(30016):   Last 10 entries (of 512):
03-19 01:10:59.132: W/dalvikvm(30016):       511: 0x410a8aa8 android.content.res.AssetManager
03-19 01:10:59.132: W/dalvikvm(30016):       510: 0x424a3a10 byte[] (32768 elements)
03-19 01:10:59.132: W/dalvikvm(30016):       509: 0x4249b9f8 byte[] (32768 elements)
03-19 01:10:59.132: W/dalvikvm(30016):       508: 0x424939e0 byte[] (32768 elements)
03-19 01:10:59.132: W/dalvikvm(30016):       507: 0x4248b9c8 byte[] (32768 elements)
03-19 01:10:59.132: W/dalvikvm(30016):       506: 0x424839b0 byte[] (32768 elements)
03-19 01:10:59.132: W/dalvikvm(30016):       505: 0x4247b998 byte[] (32768 elements)
03-19 01:10:59.132: W/dalvikvm(30016):       504: 0x42473980 byte[] (32768 elements)
03-19 01:10:59.132: W/dalvikvm(30016):       503: 0x4246b968 byte[] (32768 elements)
03-19 01:10:59.132: W/dalvikvm(30016):       502: 0x42463950 byte[] (32768 elements)
03-19 01:10:59.132: W/dalvikvm(30016):   Summary:
03-19 01:10:59.132: W/dalvikvm(30016):         1 of java.lang.Class
03-19 01:10:59.132: W/dalvikvm(30016):       510 of byte[] (32768 elements) (510 unique instances)
03-19 01:10:59.132: W/dalvikvm(30016):         1 of android.content.res.AssetManager
03-19 01:10:59.132: E/dalvikvm(30016): Failed adding to JNI local ref table (has 512 entries)
03-19 01:10:59.132: I/dalvikvm(30016): "Thread-1410" prio=5 tid=16 RUNNABLE
03-19 01:10:59.132: I/dalvikvm(30016):   | group="main" sCount=0 dsCount=0 obj=0x410f0e90 self=0x3fd428
03-19 01:10:59.132: I/dalvikvm(30016):   | sysTid=30037 nice=0 sched=0/0 cgrp=default handle=5161056
03-19 01:10:59.132: I/dalvikvm(30016):   | schedstat=( 935121000 243214000 986 ) utm=72 stm=21 core=0
03-19 01:10:59.132: I/dalvikvm(30016):   at android.content.res.AssetManager.readAsset(Native Method)
03-19 01:10:59.132: I/dalvikvm(30016):   at android.content.res.AssetManager.access$700(AssetManager.java:35)
03-19 01:10:59.132: I/dalvikvm(30016):   at android.content.res.AssetManager$AssetInputStream.read(AssetManager.java:573)
03-19 01:10:59.132: I/dalvikvm(30016):   at dalvik.system.NativeStart.run(Native Method)
03-19 01:10:59.132: E/dalvikvm(30016): VM aborting
03-19 01:10:59.132: A/libc(30016): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1) 
```

请..帮我解决这个错误！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:53:29.857

我找到了这个错误的解决方案。将您的资源（图像、字体、..）从您的资产文件夹移动到 sdcard 文件夹并修复错误！

# authentication - 具有许多会话的授权令牌

> ID：15504155
> 
> 赞同：0
> 
> 时间：2013-03-19T15:49:48.960
> 
> 标签：authentication

此时我有一个与如何进行多身份验证令牌会话有关的问题；因为它在用户登录系统并尝试在其他机器上执行相同操作时有限制，令牌被更改（用户令牌），我们希望有多个令牌会话，这意味着我们需要存储所有令牌为了有很多连接，但不清楚我们需要如何存储它并销毁会话：我们有一个如下的解决方案：

**[User] =>(has many) => [tokens]**，当用户登录时创建一个新的令牌等等。归根结底，我们有很多同一个用户的代币。这不是最佳做法。

还有另一种解决此问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:27:05.340

在这种情况下，解决方案是实现一个名为授权的表并将所有密钥保存在那里以便查找并关联到用户，然后我需要在任何时间段内过期。使用redis 或delayed_job 将其删除。

# ember.js - 有没有办法判断何时使用 Ember 将计算属性插入到 DOM 中？

> ID：15504157
> 
> 赞同：1
> 
> 时间：2013-03-19T15:49:50.457
> 
> 标签：ember.js

我有一个作为格式化程序的计算属性。在这里展示基本功能的示例小提琴，[http://jsfiddle.net/mlienau/xSkyd/2/](http://jsfiddle.net/mlienau/xSkyd/2/)。

我没有在示例中实现此功能，但最终用户可以通过使用 jquery-ui 中的 draggable 将它们拖出来删除它们。我正在使用元素上的 jquery live 来完成此操作`mouseover`，但在 ipad 上它不起作用。添加`touchstart`到实时事件是一种技巧，因为用户必须先触摸一次，然后才能将其拖出。

所以我的主要问题是：有没有办法像 view 和 didInsertElement 一样确定计算属性何时插入到 DOM 中，所以我可以在那里设置可拖动句柄？另外，我知道示例中存在一些不理想的 ember 实践。谢谢！

# php - jQueryUI 使用 PHP 和 JSON 自动完成

> ID：15504162
> 
> 赞同：0
> 
> 时间：2013-03-19T15:49:55.393
> 
> 标签：php, json, jquery-ui, autocomplete, mysqli

我有一个简单的搜索框，它将从我的数据库中的可用条目中设置用户的位置。我正在尝试让 jQuery UI 的自动完成功能正常工作，但遇到了问题。在 Chrome 中打开 JavaScript 控制台后，当我开始键入时，我看不到脚本的响应。

所需的结果是一个下拉自动完成列表，其中列出了“城市，州”格式的城市。我在 SO 上查看了几篇文章，并多次尝试修改我的代码来解决这个问题，但没有运气。提前感谢任何指导/修复。非常感激。

这是我的 jQuery UI 代码（我使用的是 code.jquery.com 托管的最新库）

```
<script type="text/javascript">
$(document).ready(function()
{
    $('#locale').autocomplete(
    {
        source: "./state_autocomplete.php",
        minLength: 2
    });
});
</script> 
```

这是我的表单代码：

```
<form name="frm_set_locale" method="post" action="/index2.php">
  <input type="text" name="locale" id="locale" class="textbox">
  <input type="submit" class="button" name="frm_submit_locale" value="Search">
</form> 
```

这是提取信息的 mysqli 脚本

```
<?php
include "/includes/dbconn.php";

// Query to get the usable locations
    $locale = trim($_GET['term']);
    $return = array();

    $q = "SELECT `city`, `state` FROM `locales` WHERE `city` LIKE '%".$locale."%'";
    $r = mysqli_query($q, $connect);

    $json = "[";
    $first = true;

    while ($row = mysqli_fetch_assoc($r, $connect)){
        if(!$first){
            $json .=  ",";
        }else{
            $first = false;
        }

        $json .= "{'value':'".$row['city'].", ".$row['state']."}";
    }

    $json .= "]";

    echo $json;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:55:33.120

第一个状态值的文字是必需的。

```
"{'value':'".$row['city'].", 'state':".$row['state']."}" 
```

第二你必须通过 Ajax 发布请求数据

```
<script type="text/javascript">
$(document).ready(function()
{
          $.ajax({
               url: '/state_autocomplete.php',
               type: 'POST',
               dataType: 'json',
               success: function(data){
                     $('#locale').autocomplete(
                     {
                           source: data,
                           minLength: 2
                     });
               }
          });
});
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T16:28:52.333

感谢所有的帮助。我对 state_autocomplete.php 采用了一种新方法，这就是它对我有用的原因。真的很干净。

```
<?php
// Database Connection
    include "/includes/dbconn.php";

// Query to get the usable locations
    $locale = $_GET['term'];

    $q = "SELECT `city`, `state` FROM `locales` WHERE `city` LIKE '%$locale%'";
    $r = mysqli_query($connect, $q);            

    $city_state = array();
    while($row = mysqli_fetch_assoc($r)){
        $result = $row['city'].", ".$row['state'];
        array_push($city_state, $result);
    }
    $json = json_encode($city_state);
    echo $json;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:11:23.347

您正在使用的自动完成功能不会按照您的预期使用查询字符串进行 ajax 调用`<input type="text" name="locale" id="locale" class="textbox">`

因为它工作改变

```
$q = "SELECT `city`, `state` FROM `locales` WHERE `city` LIKE '%".$locale."%'"; 
```

到

```
$q = "SELECT `city`, `state` FROM `locales`"; 
```

然后脚本将生成所有城市和州，然后自动完成功能将匹配用户输入。

# c++ - 触发异常时应该如何记录？

> ID：15504166
> 
> 赞同：7
> 
> 时间：2013-03-19T15:50:03.850
> 
> 标签：c++, exception, logging, raii

在我最近编写的一个程序中，我想记录我的“业务逻辑”代码何时在第三方或项目 API 中触发了异常。（澄清一下，我想在使用 API 导致异常时进行记录。这可能比实际高很多帧`throw`，也可能比实际低很多帧`catch`（可能会记录异常有效负载。））我做了下列的：

```
void former_function()
{
    /* some code here */
    try
    {
       /* some specific code that I know may throw, and want to log about */
    }
    catch( ... )
    {
       log( "an exception occurred when doing something with some other data" );
       throw;
    }
    /* some code here */
} 
```

简而言之，如果发生异常，则创建一个 catch-all 子句，记录错误并重新抛出。在我看来，这是安全的。我知道一般来说包罗万象被认为是不好的，因为根本没有引用异常来获取任何有用的信息。但是，我只是要重新扔它，所以什么都没有丢失。

现在，它本身很好，但是其他一些程序员修改了这个程序，最终违反了上述规定。具体来说，他们在一种情况下将大量代码放入 try 块中，在另一种情况下删除了“抛出”并放置了“返回”。

我现在看到我的解决方案很脆弱；它不是面向未来的修改证明。

我想要一个没有这些问题的更好的解决方案。

我有另一个没有上述问题的潜在解决方案，但我想知道其他人对此有何看法。它使用 RAII，特别是一个“Scoped Exit”对象，如果在构造时`std::uncaught_exception` *不**为*真，但在销毁时为真，则隐式触发：

```
#include <ciso646> // not, and
#include <exception> // uncaught_exception

class ExceptionTriggeredLog
{
private:
    std::string const m_log_message;
    bool const m_was_uncaught_exception;
public:
    ExceptionTriggeredLog( std::string const& r_log_message )
      : m_log_message( r_log_message ),
        m_was_uncaught_exception( std::uncaught_exception() )
    {
    }
    ~ExceptionTriggeredLog()
    {
        if( not m_was_uncaught_exception
            and std::uncaught_exception() )
        {
            try
            {
                log( m_log_message );
            }
            catch( ... )
            {
                // no exceptions can leave an destructor.
                // especially when std::uncaught_exception is true.
            }
        }
    }
};

void potential_function()
{
    /* some code here */
    {
       ExceptionTriggeredLog exception_triggered_log( "an exception occurred when doing something with some other data" );
       /* some specific code that I know may throw, and want to log about */
    }
    /* some code here */
} 
```

我想知道：

*   从技术上讲，这会有效吗？最初它似乎有效，但我知道使用`std::uncaught_exception`.
*   还有另一种方法来完成我想要的吗？

**注意**：我已经更新了这个问题。具体来说，我有：

*   在函数调用周围添加了最初缺少的`try`/ 。`catch``log`
*   添加了跟踪`std::uncaught_exception`施工状态。这可以防止在另一个析构函数的“try”块内创建此对象的情况，该析构函数是作为异常堆栈展开的一部分触发的。
*   修复了新的 'potential_function' 以创建*命名*对象，而不是像以前一样的*临时*对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:42:15.153

我对你的方法没有评论，但它看起来很有趣！我有另一种方法也可以满足您的需求，并且可能更通用。不过，它需要来自 C++11 的 lambda，这在您的情况下可能是也可能不是问题。

这是一个简单的函数模板，它接受一个 lambda，运行它并捕获、记录并重新抛出所有异常：

```
template <typename F>
void try_and_log (char const * log_message, F code_block)
{
    try {
        code_block ();
    } catch (...) {
        log (log_message);
        throw;
    }
} 
```

你使用它的方式（在最简单的情况下）是这样的：

```
try_and_log ("An exception was thrown here...", [&] {
    this_is_the_code ();
    you_want_executed ();
    and_its_exceptions_logged ();
}); 
```

正如我之前所说，我不知道它如何与您自己的解决方案叠加。请注意，lambda 正在捕获其封闭范围内的*所有内容*，这非常方便。另请注意，我实际上并没有尝试过，因此可能会导致编译错误、逻辑问题和/或核战争。

我在这里看到的问题是，将其包装到宏中并不容易，并且期望您的同事始终正确地编写`[=] {`and`}`部分可能太多了！

出于包装和防白痴的目的，您可能需要两个宏：a`TRY_AND_LOG_BEGIN`发出第一行直到 lambda 的`TRY_AND_LOG_END`左大括号和发出右大括号和括号。像这样：

```
#define TRY_AND_LOG_BEGIN(message)  try_and_log (message, [&] {
#define TRY_AND_LOG_END()           }) 
```

你像这样使用它们：

```
TRY_AND_LOG_BEGIN ("Exception happened!")  // No semicolons here!
    whatever_code_you_want ();
TRY_AND_LOG_END (); 
```

取决于您的观点，这要么是净收益，要么是净损失！（我个人更喜欢直接的函数调用和 lambda 语法，这给了我更多的控制权和透明度。

此外，可以在代码块的末尾写入日志消息；只需切换`try_and_log`函数的两个参数即可。

# java - Java Collections Framework 的排序算法

> ID：15504174
> 
> 赞同：4
> 
> 时间：2013-03-19T15:50:32.940
> 
> 标签：java, algorithm, collections

我试图了解 Java Collections Framework 默认情况下如何对其集合进行排序，但我很困惑，因为我读到所有集合都是使用合并排序进行排序的。但是当我查看 Array 类时，我看到了这一点：«实施者应该随意替换其他算法，只要遵守规范本身。（例如，sort(Object[]) 使用的算法不必是归并排序，但它必须是稳定的。）» 这意味着它也使用其他排序算法。那么这些集合究竟是如何排序的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:54:26.067

对集合进行排序的代码随 JRE/JDK 一起提供。

任何*实现*JRE/JDK 的人都可以选择以他想要的任何方式来实现它，只要它符合要求（即它实际上对集合进行了正确的排序并且排序是稳定的）。

*一些*实现可能会选择合并排序，另一些可能会选择别的。不需要具体实现。

# android - 如何在 AndroidManifest.xml 中的 android:name 中使用破折号和点字符？

> ID：15504185
> 
> 赞同：1
> 
> 时间：2013-03-19T15:51:02.930
> 
> 标签：android, mobile, android-manifest

对于我的 Android 应用，我需要`<application>`在 AndroidManifest.xml 中添加以下属性：

```
<application android:name="de.myapp.My-App.de"> 
```

该项目的名称是“My-App.de”。我知道在这里使用破折号和点不是一个好主意，但我无法更改它。产品负责人希望这样称呼它。

由于我收到一条错误消息，我只是用一个“\”字符转义了破折号，这导致了这个名称：

```
<application android:name="de.myapp.My\-App.de"> 
```

它是否正确？最后一个点也必须转义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:57:07.447

在您`strings.xml`的`res/values`文件夹下，您可以像这样添加您的应用名称：

```
<string name="app_name">de.myapp.My-App.de</string> 
```

然后在你的`AndroidManifest.xml`你可以参考它：

```
<application android:name="@string/app_name"> 
```

这将允许您的应用名称包含破折号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:59:01.387

# 为什么不使用`android:label`？

只是一个旁注。如果您的客户告诉您使用钚键盘而不是普通键盘，您会接受吗？有时（几乎每次）我们必须摆脱与我们背景不同的客户，尤其是在计算机科学领域。如果某事不能做（或不应该做或其他什么），你应该说服你的客户。你可以给他们很多理由：系统不太安全或可能受到损害，应用程序变得不稳定，客户想要的东西可以以更容易理解的方式完成，等等。

至少在我的公司，我得到报酬来开发**和**提供建议，即使我与客户交谈，我也倾向于确保他们了解他们想要什么的含义，知道什么不能做，什么应该做反而。

**编辑：**

一些资源：

[http://developer.android.com/guide/topics/manifest/application-element.html#nm](http://developer.android.com/guide/topics/manifest/application-element.html#nm)

Name 是**Application 子类的完全限定名称**。您可能知道，类不能用破折号编写。我们都知道，Android 的命名约定并不是世界上最准确的，所以总是会出现这样的问题。尝试在默认情况下添加`@string/app_name`一个破折号。我不在我的 Android 项目面前，但它也应该可以工作。如果没有，请尝试使用 CDATA 标记将字符串括起来：

```
<string name="app_name"><![CDATA[de.myapp.My-App.de]]></string> 
```

这避免了 xml 转义文本（这应该不是必需的，但谁知道）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:59:23.800

我建议您将您的应用程序名称存储在 string.xml 中并编码特殊字符 -（破折号）和 . （点）到 unicode 你可以在这里参考 unicode -> [http://jrgraphix.net/research/unicode_blocks.php?block=0](http://jrgraphix.net/research/unicode_blocks.php?block=0)

例如 .My\u002DApp\u002Ede

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:18:11.547

```
<application android:name="de.myapp.My-App.de"> is not correct. 
```

你只需使用

```
<application android:name="Package_name.Application_class_name"> 
```

包和类的名称必须在哪里

# c++ - 以“C++ 2008 Redistributable”为目标需要什么开发环境？

> ID：15504186
> 
> 赞同：1
> 
> 时间：2013-03-19T15:51:03.733
> 
> 标签：c++, visual-studio, visual-studio-2012, winapi

上周我继承了一个遗留的非托管 C++ 应用程序。

不幸的是，项目设置不是 100% 可靠的，也没有文档。我所知道的是该产品是使用*Microsoft Visual C++ 2008 Redistributable x86*部署的。

我的问题是：**您建议使用哪种 IDE、SDK 和 Platform ToolSet 组合？**

不幸的是，我以前没有使用过*Windows SDK*，而且*Platform ToolSet*选项对我来说是新的。更糟糕的是，我已经八年没有写过一行 C++ 代码了！所以......您可以提供的任何反馈将不胜感激：D

知道

*   **客户端操作系统**
    *   视窗 2008 R2
*   **C++ 可再发行组件**
    *   *Microsoft Visual C++ 2008 Redistributable x86*在生产中部署
*   **集成开发环境**(IDE)
    *   我更喜欢使用*Visual Studio 2012*（我们还有：Visual Studio 2008、2010、2012）

未知数

*   **平台工具集**
    *   我可以使用VS2012并针对v90平台，还是简单地使用VS2008更稳定？
*   **视窗 SDK**
    *   *如果客户端在生产中使用Microsoft Visual C++ 2008 Redistributable x86* ，我应该在开发机器上安装哪个[版本的 Windows SDK](http://en.wikipedia.org/wiki/Microsoft_Windows_SDK#Versions%20Windows%20SDK)？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:44:31.293

我将*首先*尝试让项目在 Visual Studio 2008 中成功编译，因为您提到您已经拥有该项目。

我不会费心尝试安装另一个版本的 Windows SDK（一个与 VS 2008 捆绑在一起）*，除非*您无法让项目在 VS 2008 的开箱即用安装中成功编译。如果没有，并且您确实想尝试安装另一个版本的 SDK，我会选择[7.1 版本](http://www.microsoft.com/en-us/download/details.aspx?id=8279)，即针对 Windows 7 的版本。

使用 6.1 版的 SDK 不太可能有任何优势；新版本可能会添加新功能，但它们通常保留与旧版本的向后兼容性。但是，我不会*安装*任何版本的 Windows 8 SDK，因为这可能会让您作为开发人员感到困惑。

一旦你准备好一切并继续使用 VS 2008，如果你愿意使用它，你可以尝试切换到 VS 2012。（我仍然无法习惯 UI，但显然*有人*喜欢它。）正如您在问题中指出的那样，使这项工作正常工作的最简单方法是定位“v90”，即 VS 2008（设置使用平台工具集选项）。这基本上允许您使用 VS 2012 shell 进行编辑，但使用 VS 2008 编译器和头文件进行构建。但是，您不会获得 VS 2012 引入的任何 C++11 功能，因为您没有使用新版本的编译器；您将被 VS 2008 中支持的内容所困。*

# c# - 服务方法的命名约定

> ID：15504188
> 
> 赞同：5
> 
> 时间：2013-03-19T15:51:04.653
> 
> 标签：c#, naming-conventions

这是一个基本的命名约定问题，但我没有找到专门处理这个问题的任何地方。

我有一个名为 Foo 的类和一个名为 Bar 的类。

我在服务中有一个方法来检索 Foo 的所有 Bars。我应该命名它：

```
GetFooBars(int fooId) 
```

或者

```
GetBarsForFoo(int fooId) 
```

为了扩展，你可以有其他类的酒吧，例如

```
GetMooBars(int mooId) 
```

或者

```
GetBarsForMoo(int mooId) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:53:09.723

I would suggest

```
GetBarsByFooId(int fooId)

GetBarsByMooId(int mooId) 
```

*Or*... tweaking your API to support a call like this

```
[DataContract]
[KnownType(typeof(GetBarsByFooIdRequest))]
[KnownType(typeof(GetBarsByMooIdRequest))]
abstract class GetBarsRequest
{
   ..
}

[DataContract]
sealed class GetBarsByFooIdRequest : GetBarsRequest
{
   [DataMember]
   public int FooID { get; set; }
}

sealed class GetBarsByMooIdRequest : GetBarsRequest
{
   [DataMember]
   public int MooID { get; set; }
}

GetBarsResponse GetBars(GetBarsRequest); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:53:49.937

I'd rather use one of the following:

```
GetBarsByFoo(int fooID) { }

GetBarsByMoo(int mooID) { }

GetBarsByFooId(int fooID){ }

GetBarsByMooId(int mooID){ } 
```

# ruby-on-rails - 如何在 ember.js 中跟踪 Em.Store 的脏度

> ID：15504189
> 
> 赞同：1
> 
> 时间：2013-03-19T15:51:06.173
> 
> 标签：ruby-on-rails, transactions, ember.js, ember-data

我正在尝试跟踪我的 Ember 商店中是否存在脏记录。

我想要一个带有链接属性的“保存”按钮，以便在没有待更新的记录时禁用该按钮。

我想有几种方法可以做到这一点，但我正在寻找正确的“余烬”做事方式。

这里最简单的方法是什么？AFAICS 我可以..

*   每当更改属性时手动设置全局属性 - 并在存储同步到服务器时重置它

*   在我的控制器上有一个属性，该属性是根据商店的内容计算的。我可以这样做但是我发现更新商店时属性没有更新。

...

```
hasUpdates: function() {
    console.log('hej!')
    return (this.get('store').get('defaultTransaction.buckets.updated.list.length') > 0);
}.property('store') 
```

这一定是一种常见的模式——我该怎么做？

编辑：将使用不起作用的东西更新答案

```
 hasUpdates: function() {
    console.log('hej!');
    return (this.get('store').get('defaultTransaction.buckets.updated.list.length') > 0);
  }.property('store._recordsToSave@each') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T16:01:35.943

也许这可以帮助你：

### 初始化应用程序

```
App = Ember.Application.create({});

App.Store = DS.Store.extend({
  adapter: 'DS.FixtureAdapter'
});

DS.Model.reopenClass({
  dirtyItems: function(){
    return this.filter(function(model) { 
      return model.get('isDirty'); 
    }).get('content');
  }
});

App.Product = DS.Model.extend({
  name: DS.attr('string'),
  description: DS.attr('string')
});

App.Product.FIXTURES = [{id: 1, name: 'Table'}] 
```

### 然后尝试

```
App.Product.dirtyItems(); // -> return []

book = App.Product.createRecord({name: 'Book'});
App.Product.dirtyItems(); // -> return [Object]

book.save()
App.Product.dirtyItems(); // -> return []

skate = App.Product.createRecord({name: 'Skate'});
bike = App.Product.createRecord({name: 'Bike'});
App.Product.dirtyItems(); // -> return [Object, Object]

skate.get('store').save()
App.Product.dirtyItems(); // -> return [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:28:32.497

如果您一次处理一条记录，则始终可以绑定到模型的`isDirty`属性。我通常创建一个`isClean`在控制器上调用的计算属性，它是 的否定`isDirty`，然后在模板中

```
<input type="submit" {{bindAttr disabled="isClean"}}> 
```

# jsf - JSF 2 DataTable - 单击命令链接后，所有现有项目都被重置为 new Item()

> ID：15504191
> 
> 赞同：0
> 
> 时间：2013-03-19T15:51:18.943
> 
> 标签：jsf

在我单击命令链接后，无法完全弄清楚为什么数据表中的所有现有项目都被重置为 new Item()。这个应用程序为用户提供了一个联系人列表以及一个编辑（commandlink）按钮，用户可以单击该按钮将所选项目更改为编辑模式。当我单击命令链接时，它会调用 bean 的 edit() 并且 getRowData() 正在获取预期的行。但是该行中的现有数据在某种程度上是空白的（确切地说是新的 MSAMContactJTO()）。事实上，数据表中的所有现有行都显示如何被重置为空白。

下面是xhtml：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html 
  xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:f="http://java.sun.com/jsf/core" 
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:t="http://myfaces.apache.org/tomahawk"
  xmlns:c="http://java.sun.com/jstl/core">

<!-- saved from url=(0049)http://usmodev/my_send_a_message/address_book.htm -->
<h:head><title>My Send a Message</title>
</h:head> 

<h:body>  

<h:form id="addressBookForm" prependId="false">
  <h:dataTable id="contactListTable" border="0" cellspacing="0" cellpadding="0" 
    value="#{MSAMAddressBook2ListBean.contactListTable}"
    rendered="#{not empty MSAMAddressBook2ListBean.contactList}"  
    var="item">

    <h:column>
      <h:panelGrid id="contactNameColumn" >
        <h:panelGroup style="text-align:left; white-space:nowrap;" rendered="#{!item.editMode    and !item.newAdd}">
          <h:outputText value="#{item.contactName}"/>
        </h:panelGroup>
       <h:panelGroup style="text-align:left; white-space:nowrap;" rendered="#{item.editMode || item.newAdd}">
         <h:inputText  id="contactName" value="#{item.contactName}" maxlength="30" size="30" />
       </h:panelGroup>
      </h:panelGrid>

    </h:column>

    <h:column>
      <h:panelGrid id="actionColumn" cellpadding="0" cellspacing="0">
      <h:commandLink id="editContact" action="#{MSAMAddressBook2ListBean.edit}"  value="EDIT"/>
        <!-- f:ajax event="action" execute="@form" render="contactListTable"/ -->
      </h:panelGrid>    
    </h:column>
  </h:dataTable>
</h:form> 

</h:body>
</html> 
```

下面是管理bean：

```
package com.arch.myaccount.jsf;

import java.io.Serializable;
import java.util.List;
import java.util.ArrayList;

import com.arch.database.myaccount.MSAMAddressBookDatabase;
import com.arch.myaccount.MSAMContactDTO;

import javax.faces.model.DataModel;
import javax.faces.model.ListDataModel;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.annotation.PostConstruct;

@SuppressWarnings("serial")
@ManagedBean(name="MSAMAddressBook2ListBean")
@ViewScoped
public class MSAMAddressBook2ListBean extends JSFBean implements Serializable 
{

    // table list info
    private transient DataModel<MSAMContactJTO> contactListTable;
    private ArrayList<MSAMContactJTO> contactList = null;

    @PostConstruct
    public void init() {
        getContactList();
    }

    public String edit() {

        String result = "successful";

        MSAMContactJTO item = getContactListTable().getRowData();
        item.setEditMode(true);

        return result;
    }

    public List<MSAMContactJTO> getContactList() {
        if (contactList == null) {
        try {
             loadContactList();
        }
        catch (Exception ex) {}
        }

        return contactList;
    }

    public void loadContactList() {

        try {
            List<MSAMContactDTO> contacts = new MSAMAddressBookDatabase().findContactsByLoginName(getLoginID());
            if (contactList == null) contactList = new ArrayList<MSAMContactJTO>(); 
            else contactList.clear();

            for (MSAMContactDTO contact :contacts) {
                MSAMContactJTO abDTO = new MSAMContactJTO();
                abDTO.copyFromMSAMContactDTO(contact);
                contactList.add(abDTO);
            }

        }
        catch (Exception ex) {
            addFatalMessage("We are unable to fulfill your request.  Please try again later");
            ex.printStackTrace();
        }
    }

    public DataModel<MSAMContactJTO> getContactListTable() {
        if (contactListTable == null) {
            contactListTable = new ListDataModel<MSAMContactJTO>(contactList);
        }
            return contactListTable;
    }

    public void setContactList(ArrayList<MSAMContactJTO> contactList) {
        this.contactList = contactList;
    }
} 
```

# jsf-2 - 将值设置为 f:setPropertyActionListener jsf primefaces 时不是 GZIP 格式错误

> ID：15504192
> 
> 赞同：0
> 
> 时间：2013-03-19T15:51:20.817
> 
> 标签：jsf-2, primefaces, gzip

像这样通过 jquery 修改 f:setPropertyActionListener 的值后出现一个错误：

```
$('#javax\\.faces\\.ViewState').val("1111111"); 
```

我检查了元素以了解它的 id（它被转换为隐藏输入）

这是 jsf 元素：

```
<p:commandButton actionListener="#{typeMB.supprimer}"  value="supprimer" >
    <f:setPropertyActionListener target="typeMB.selectedIdType" value="dcscdc" />
    </p:commandButton>
    </h:form> 
```

然后在页面的代码源中：值受到影响，但方法“supprimer”没有被执行，我有这个错误：

```
 mars 19, 2013 3:33:12 PM com.sun.faces.renderkit.ClientSideStateHelper doGetState
SEVERE: Not in GZIP format
java.util.zip.ZipException: Not in GZIP format
    at java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:164)
    at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:78)
    at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:90)
    at com.sun.faces.renderkit.ClientSideStateHelper.doGetState(ClientSideStateHelper.java:231)
    at com.sun.faces.renderkit.ClientSideStateHelper.getState(ClientSideStateHelper.java:198)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:100)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:227)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148) 
```

我该如何解决

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:15:32.820

您不能通过`<f:setPropertyActionListener>`jQuery 修改 的值。此信息不会打印到 HTML 输出的任何位置（在浏览器中右键单击页面并执行*查看源代码*以自己查看），因此也无法由 JS/jQuery 操作。您当前的 jQuery 尝试仅修改了 JSF 视图状态标识符的隐藏输入字段，这是一个巨大的禁忌（反过来表明您不知道基本的 JSF、HTTP 和 HTML 是如何工作的；我强烈建议您暂时停止开发 JSF web 应用程序，先去看看一些理智的 HTTP/HTML/JSF 资源来了解基本的事情）。特定的例外是此错误的结果：您将 JSF 视图状态标识符修改为某个非预期格式的任意值。

您仍然没有明确说明具体的功能要求，但如果您的唯一目的是将 JavaScript 控制的变量作为附加请求参数传递给 JSF，那么您应该寻找不同的解决方案。其中一种方法是使用`<h:inputHidden>`.

```
<h:form id="formId">
    <h:inputHidden id="hiddenId" value="#{typeMB.selectedIdType}" />
    <p:commandButton value="supprimer" onclick="yourFunction()" actionListener="#{typeMB.supprimer}" />
</h:form> 
```

有了这个 JS：

```
function yourFunction() {
    $("#formId\\:hiddenId").val("1111111");
} 
```

# java - 一些服务器拒绝使用 Java 发送 SMTP 电子邮件：“服务器和客户端均不支持身份验证机制”

> ID：15504195
> 
> 赞同：1
> 
> 时间：2013-03-19T15:51:26.633
> 
> 标签：java, exception, smtp

我在各种服务器（目前大约 6 台机器）上部署了相同的 SMTP 电子邮件代码。我们有一个测试作业计划在这些机器上运行，一次一个。换句话说，我将相同的信息传递给每个服务器：相同的凭据、相同的 smtp 服务器、相同的端口号等。唯一的区别是主题和正文。这两个字段在每次执行的基础上都是唯一的。

我们为此代码使用 javax.mail 包。

现在，此代码适用于其中四台机器，但在其中两台机器上，我收到以下错误消息：

> javax.mail.AuthenticationFailedException：服务器和客户端均不支持身份验证机制

关于如何调试的任何想法？我不明白为什么具有相同凭据和相同身份验证内容的相同代码会在某些机器上失败，而在其他机器上则不会。

当我遇到它们时，我会编辑这篇文章。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:32:10.250

有问题的机器不在 SMTP 服务器上的受信任主机列表中。

# solr - Lucene 布尔 OR 查询的评分是否偏向于具有更多替代项的术语

> ID：15504198
> 
> 赞同：0
> 
> 时间：2013-03-19T15:51:36.650
> 
> 标签：solr, lucene, boolean

为什么 Lucene/Solr scorer 对 OR 子句的权重求和。它使查询评分与具有更多选择的术语不平衡。让查询词替代项的权重达到最大值不是更有意义吗？

这是一个例子：

我在 solr 管理界面中运行：gucci (handbag OR purse OR pocketbook)

通过单击调试，我可以看到解析后的查询符合预期：

```
"parsedquery":"text:gucci (text:handbag text:purse text:pocketbook)" 
```

解释字段显示得分手正在制作（我在这里简化了一点）：

```
weight(gucci) + sum( weight(handbag) + weight(purse) + weight(pocketbook)) 
```

结果是包含手袋、钱包和钱包的结果将比包含 gucci 和手袋的结果得分更高。我认为这是违反直觉的。对我来说，OR 意味着这些术语是等价的，而不是它们更重要。此外，我可以使用查询词提升来独立完成此操作。

我用 Edismax 进行了实验，它有类似的行为。

有没有办法让 OR 子句保留查询词“重要性”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:59:36.140

您可以尝试`DisjunctionMaxQuery`为析取项使用和设置不同的提升因子。看看`tieBreakMultiplier`构造函数参数 - 它可以帮助实现你想要的。引用文档：

> tieBreakerMultiplier <..> value <..> 表示在得分较低的字段中出现 10 次的单词与在得分较低的字段中出现的唯一单词一样好

# angularjs - angular.js 指令从 transclude 吞下事件

> ID：15504205
> 
> 赞同：1
> 
> 时间：2013-03-19T15:51:47.767
> 
> 标签：angularjs, angularjs-directive

我创建了一个指令，该指令使用 ngTransclude 创建围绕某些内容的 div 包装器。看这个非常简单的例子：http: [//jsfiddle.net/DHzrr/1/](http://jsfiddle.net/DHzrr/1/)

如果您从 HTML 中删除 group 元素

```
<div ng-controller="TodoCtrl">
  <form ng-submit="addTodo()">
    <input type="checkbox" ng-model="checked">
  </form>
  <div ng-hide="checked">NOT CHECKED</div>
</div> 
```

“ng-hide”监听器正在工作。所以我的组指令吞下事件发出或隔离 $scope。我怎样才能使这项工作？

我认为只有在指令定义对象中使用 scope:true 属性时才会创建新的范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:33:48.690

`transclude: true`创建一个从父 (TodoCtrl) 范围原型继承的新子范围。您可以通过以下三种方式之一解决问题：

1.  （推荐）绑定到父范围上定义的对象属性：`ng-model="obj.checked"`并在您的控制器中：`$scope.obj = {checked: false}`
    [小提琴](http://jsfiddle.net/mrajcok/6j2jy/)
2.  采用`ng-model="$parent.checked"`
3.  使用函数更新父模型上的模型：添加`ng-change="toggle()"`到您的`input`，然后在控制器上定义一个函数：`$scope.toggle = function() { $scope.checked = !$scope.checked }`

另请参阅[AngularJS中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)，部分**指令**项目“4。`transclude: true`”

# javascript - 使用变量设置数组

> ID：15504208
> 
> 赞同：3
> 
> 时间：2013-03-19T15:51:55.870
> 
> 标签：javascript, arrays

嗨，我希望能够从数组中提取数据，同时使用变量进行设置。像这样：

```
var x = ("a","b","c","d");

var z = new Array(x); 
```

这不起作用，就像这样做时：

```
alert(z[0]); 
```

或类似的东西（其他整数等）它不起作用。它只会显示整个数组，而不是实际显示给定位置的文本。通过这样做设置一个数组：

```
var z = new Array("a","b","c","d"); 
```

将使其工作，并且在使用 z[0] 时，它实际上会显示正确的文本。
我想这样做的原因是因为我希望能够通过使用输入到输入中的内容来设置数组。

有人知道如何使这项工作，因为我不知道为什么它现在不工作。它实际上应该起作用似乎很合乎逻辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:55:51.993

以下声明：

```
var x = ("a","b","c","d"); 
```

不是数组声明。您应该使用方括号：

```
var x = ["a","b","c","d"]; 
```

我个人在编写 javascript 时从不使用“Array”函数。相反，我只使用方括号：

```
var emptyArray = [];
var arrayWithItems = [1, 2, 3, 4]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:55:56.620

您当前的代码将生成一个包含单个元素（该元素将包含“d”）的数组，因为您实际拥有的是一个（毫无意义的）分组运算符和一堆逗号运算符。逗号运算符只返回最后一个操作数（在本例中为字符串“d”）。

```
console.log(z); // "['d']" 
```

我不确定你到底想要做什么，但我认为你想要这个（因为你从一串用户输入开始）：

```
var x = "a,b,c,d";
var z = x.split(",");

// or

var x = "abcd";
var z = x.split(""); // Empty string, splits between every char 
```

现在`z`将包含一个包含 4 个元素的数组，如您所料。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:56:14.413

```
var x = ("a","b","c","d"); 
```

这将创建一个`string`值为“d”的变量 x。

```
var z = new Array(x); 
```

这将创建一个只有一个字符串值“d”的单元素数组。

您应该使用以下语法声明数组。

```
var x = ["a", "b", "c", "d"];
console.error(x[0]); // will echo "a" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:56:48.360

请将数组声明更改为：

```
 var x = ["a","b","c","d"]; 
```

alert(x[0]) 在这种情况下显示`a`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T15:58:24.833

你错过`Array`了`var x = ("a","b","c","d");`声明

以上将`return d`始终`element`在`braces`

像这样使用它`var x = Array("a","b","c","d");`

# c++ - 无法解决 Eclipse CDT 符号“X”的通用解决方案？

> ID：15504213
> 
> 赞同：4
> 
> 时间：2013-03-19T15:52:00.993
> 
> 标签：c++, c, eclipse-cdt

我有一个包含 C++ 和 C 文件的项目。代码编译并正确运行，但我需要摆脱以下错误：

> 符号“ERANGE”无法解析

我能够使用这两个文件（Ubuntu 上最新的 x64 Elipse Juno）重现它：

主.h：

```
#ifndef MAIN_H_
#define MAIN_H_

extern "C" {
#include <errno.h>
}

#endif /* MAIN_H_ */ 
```

主.cpp：

```
#include <cerrno>
#include <cassert>
#include "main.h"

int main(int argc, char * argv[]) {
    assert(errno != ERANGE); // <-- CDT ERROR here
    return 0; } 
```

在 ERANGE 上正确执行*Open Declaration会将我带到 /usr/include/asm-generic/errno-base.h 文件。*

以下针对类似问题的解决方法无效：

*   设置*索引器 -> 使用活动构建配置*
*   手动将 ERANGE 符号添加到项目*路径和符号*
*   将 main.cpp 添加到*Preferences -> C/C++ -> Code Analysis -> Symbol is not resolved -> Customize Selected... -> Scope -> Exclusion patterns*

唯一可行的解​​决方案是禁用*符号未*完全解决错误，但这会导致我错过真正的问题。

**编辑：** CDT 错误提交[https://bugs.eclipse.org/bugs/show_bug.cgi?id=404017](https://bugs.eclipse.org/bugs/show_bug.cgi?id=404017)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:00:25.167

看起来像是 Eclipse CDT 代码分析工具 ( [codan](http://wiki.eclipse.org/CDT/designs/StaticAnalysis) ) 中的一个错误。[我建议在这里](https://bugs.eclipse.org/bugs/?product=CDT)提交错误报告。

# ios - 使用 NSKeyedArchiver 通过消息对象发送数据

> ID：15504214
> 
> 赞同：0
> 
> 时间：2013-03-19T15:52:05.170
> 
> 标签：ios, objective-c, cocos2d-iphone

我正在实现一个多人游戏，我必须使用以下方式在玩家之间发送数据：

```
 [self sendData:data mode:GKMatchSendDataReliable]; 
```

而不是像本教程中那样使用多个 c-structs ( [http://www.raywenderlich.com/3325/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-22](http://www.raywenderlich.com/3325/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-22) ) ，我创建了一个 Message 对象和一个名为 Submessage 的 Message 子类。创建了子类，因此我避免在每条消息中发送不必要的变量，以最小化发送的每个数据包的大小。然后我使用 NSCoding 对消息进行编码和解码。

这些类如下所示：

**消息.h**

```
 @interface Message : NSObject <NSCoding>

 @property int messageType;

 - (void)encodeWithCoder:(NSCoder*)coder;

 - (id)initWithCoder:(NSCoder*)coder; 
```

**消息编码器方法**

```
-(void) encodeWithCoder:(NSCoder *)coder{
     [coder encodeInt:messageType forKey:@"messageType"];
}
-(id)initWithCoder:(NSCoder *)coder {
    self = [super init];
    messageType = [coder decodeIntForKey:@"messageType"];
    return self;
} 
```

**子消息.h**

```
 @interface Submessage : Message <NSCoding>

 @property float additionalParameter1;

 - (void)encodeWithCoder:(NSCoder*)coder;

 - (id)initWithCoder:(NSCoder*)coder; 
```

**子消息编码器方法**

```
- (void)encodeWithCoder:(NSCoder *)coder{
    [super encodeWithCoder:coder];
    [coder encodeFloat:additionalParameter1 forKey:@"float"];
}

- (id)initWithCoder:(NSCoder *)coder {
    self = [super init];
    [self initWithCoder:coder];
    floatParameter1 = [coder decodeFloatForKey:@"floatParameter1"];
    return self;
} 
```

收到数据后，我使用以下方法将其取消归档：

```
 Message *thisMessage = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

但是，当我发送子消息时，这不起作用。如何确定数据是消息类型还是子消息类型？我应该如何实现它才能像在 c-struct 案例中一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:09:49.090

如果我理解您的问题，您想在运行时确定哪种对象未归档。您可以像使用任何对象一样测试它的类，然后适当地使用它。像这样：

```
id obj = [NSKeyedUnarchiver unarchiveObjectWithData:data];
if ([obj isKindOfClass:[Submessage class]]) {
    Submessage * submessage = (Submessage *)obj;
    // do something with submessage
} else if ([obj isKindOfClass:[Message class]]) {
    Message * message = (Message *)obj;
    // do something with message
} 
```

（`-isKindOfClass:`将检测子类，这就是为什么第一个条件需要在这里检查子类。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:58:11.917

您的子类 initWithCoder 似乎不正确。根据文档：

> 如果超类采用 NSCoding 协议，则首先将 initWithCoder: 的返回值分配给 self:

```
- (id)initWithCoder:(NSCoder *)coder {
    self = [super initWithCoder:coder];
    if (self) {
        // Implementation continues.
    }
    return self;
} 
```

但既然你说消息长度应该最小化，我建议使用 MessagePack ( [http://msgpack.org/](http://msgpack.org/) ) 转换为紧凑的二进制表示。你必须自己处理更多，但它应该更有效率:)

# c - 如何将字符串从数组分配给字符以获取字符串的长度？

> ID：15504215
> 
> 赞同：0
> 
> 时间：2013-03-19T15:52:09.780
> 
> 标签：c, arrays

好的，我正在制作一个简单的刽子手游戏。我需要帮助拉出数组`dict[num]`num 中的字符串，该字符串是一个随机数。我只需要一种方法来获取并使用该字符串以及使用`strlen()`它的功能。

截至目前`strlen(dict[num])`不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:55:15.023

如果 dict 数组的类型是 char 则获取长度

```
strlen(dict) 
```

并不是

```
strlen(dict[num]) 
```

如果

```
strlen(dict) 
```

给出分段错误然后检查你的数组是否填充了字符串我的意思是检查数组中的字符串是否以空字符结尾`'\0'`

# java - 订购通用地图实现？

> ID：15504216
> 
> 赞同：1
> 
> 时间：2013-03-19T15:52:13.497
> 
> 标签：java, collections, guava, linkedhashmap, apache-commons-collection

哪个库最适合有序地图实现？

实施必须是

1) 通用

2) 可通过整数索引访问

来自 JRE 的一个无法通过索引访问： http: [//docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)

Commons-Collections 3.2 中的一个不是通用的：[http ://commons.apache.org/proper/commons-collections//javadocs/api-release/org/apache/commons/collections/map/LinkedMap.html](http://commons.apache.org/proper/commons-collections//javadocs/api-release/org/apache/commons/collections/map/LinkedMap.html)

Commons-Collection 4.0 中的一个尚未发布。

并且在 Guava 中找不到合适的课程。有吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:58:46.113

它可以通过[`ImmutableSortedMap`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableSortedMap.html)（它是不可变的和零敌对的）来完成：

```
// use ImmutableSortedMap#copyOf or one of builders - naturalOrder or orderedBy
ImmutableSortedMap<K, V> map = ImmutableSortedMap.copyOf(origMap, comparator);
map.keySet().asList().get(index); 
```

但是你想解决什么问题？在我看来，就像糟糕的代码气味......

**编辑：**

如果您想要插入顺序而不是使用比较器，只需使用[`ImmutableMap`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html)：

```
ImmutableMap.copyOf(origMap).keySet().asList().get(index); 
```

# python - 为什么 travis-ci 找不到看起来安装愉快的库

> ID：15504220
> 
> 赞同：0
> 
> 时间：2013-03-19T15:52:24.390
> 
> 标签：python, travis-ci

我有一个依赖 BeautifSoup [https://github.com/fgregg/legistar-scrape](https://github.com/fgregg/legistar-scrape)的小型 python 网络爬虫。我的测试在本地运行良好，但是在 travis-ci 上，nosetests 立即出错，因为它找不到 BeautifulSoup，它看起来像是刚刚完成安装。

Travis-CI 构建日志在这里：[https ://travis-ci.org/fgregg/legistar-scrape/jobs/5628189](https://travis-ci.org/fgregg/legistar-scrape/jobs/5628189)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:51:12.860

# 推荐

[改变这个](https://github.com/fgregg/legistar-scrape/blob/master/.travis.yml)：

```
install: "sudo pip install -r requirements.txt" 
```

对此：

```
install: "pip install -r requirements.txt" 
```

[在这里](http://about.travis-ci.org/docs/user/languages/python/)查看使用情况。

# 概念证明

我 fork 你的 github 项目，将我的 fork 添加到我的 travis-ci 帐户，做出我建议的更改，提交并推送到 github。这里有两个成功的 travis-ci 构建：[python 2.6](https://travis-ci.org/hughdbrown/legistar-scrape/jobs/5633239)和[python 2.7](https://travis-ci.org/hughdbrown/legistar-scrape/jobs/5633240)。

# 虚拟环境

您是否使用[virtualenv](https://pypi.python.org/pypi/virtualenv)进行 Python 开发？还是在`sudo pip install -r requirements.txt`本地运行时使用？我建议您查看 virtualenvs 并停止使用`sudo pip install`. 这就是当今大多数 Python 开发人员所做的。这就是 travis-ci 的工作原理：它创建一个 virtualenv 并从中运行您的应用程序。

# 鼻测

Separately, your nosetests are really slow because you are integration testing -- you are hitting live servers across the internet, right? Look up how to use the [mock library](https://pypi.python.org/pypi/mock) so that you mock the HTML returned from your URLs instead of actually hitting those servers.

# java - Java - 从命令行编译 - 外部 jar

> ID：15504223
> 
> 赞同：0
> 
> 时间：2013-03-19T15:52:45.573
> 
> 标签：java

我正在使用这个库来编译一个 java 程序。我正在使用eclipse，但我也想尝试从命令行编译它（它将通过命令行执行）。它似乎在 Eclipse 上工作。

我已经在命令行中尝试过这个，它似乎正在工作：

```
javac -cp ../lib/jxl.jar Main.java 
```

但它给了我这个：

```
Main.java:5: cannot find symbol
symbol  : class Reader
location: class Main
    Reader excel_reader = new Reader();
    ^
Main.java:5: cannot find symbol
symbol  : class Reader
location: class Main
    Reader excel_reader = new Reader(); 
```

我只有 2 个类，Main（只有 main 方法）和一个 Reader。这两个文件都在 Eclipse 工作区的 src/ 文件夹下。

读者类：

```
import java.io.File;
import java.io.IOException;

import jxl.Cell;
import jxl.CellType;
import jxl.Sheet;
import jxl.Workbook;
import jxl.read.biff.BiffException;

public class Reader {
  private String inputFile;

  public void setInputFile(String inputFile) {
    this.inputFile = inputFile;
  }

  public void read() throws IOException  {
    File inputWorkbook = new File(inputFile);
    Workbook w;
    try {
      w = Workbook.getWorkbook(inputWorkbook);
      // Get the first sheet
      Sheet sheet = w.getSheet(0);
      // Loop over first 10 column and lines

      for (int j = 0; j < sheet.getColumns(); j++) {
        for (int i = 0; i < sheet.getRows(); i++) {
          Cell cell = sheet.getCell(j, i);
          CellType type = cell.getType();
          if (type == CellType.LABEL) {
            System.out.println("I got a label "
                + cell.getContents());
          }

          if (type == CellType.NUMBER) {
            System.out.println("I got a number "
                + cell.getContents());
          }

        }
      }
    } catch (BiffException e) {
      e.printStackTrace();
    }
  }

} 
```

主班

```
import java.io.IOException;

public class Main {
  public static void main(String[] args) throws IOException {
    Reader excel_reader = new Reader();
    excel_reader.setInputFile("Excel_Spreadsheets/Dictionary_Part2.xls");
    excel_reader.read();
  }
} 
```

# c++ - 如何检索 netstat 命令的结果

> ID：15504229
> 
> 赞同：1
> 
> 时间：2013-03-19T15:52:51.253
> 
> 标签：c++, windows, netstat

我试图在 C++ 代码中获取我的 PC 中打开的端口列表。所以，我想使用 DOS 命令`netstat`。我已经写了这一行`system("netstat -a")`，但我无法检索它返回的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:57:00.590

您可以像从文件中一样使用`FILE *results = _popen("netstat -a");`然后读取结果（例如，使用、等）`results``fread``fgets`

或者，您可以使用它`GetTcpTable`来更直接地检索您需要的数据。这是一个相当完整的示例，用于检索大部分相同的数据`netstat -a`：

```
#include <windows.h>
#include <iphlpapi.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

#pragma comment(lib, "iphlpapi.lib")
#pragma comment(lib, "ws2_32.lib")

#define addr_size (3 + 3*4 + 1)   // xxx.xxx.xxx.xxx\0

char const *dotted(DWORD input) {
    char output[addr_size];

    sprintf(output, "%d.%d.%d.%d", 
        input>>24, 
        (input>>16) & 0xff, 
        (input>>8)&0xff, 
        input & 0xff);
    return strdup(output);
}

int main() { 
    MIB_TCPTABLE *tcp_stats;
    MIB_UDPTABLE *udp_stats;
    DWORD size = 0;
    unsigned i;
    char const *s1, *s2;

    GetTcpTable(tcp_stats, &size, TRUE);
    tcp_stats = (MIB_TCPTABLE *)malloc(size);
    GetTcpTable(tcp_stats, &size, TRUE);

    for (i=0; i<tcp_stats->dwNumEntries; ++i) {
        printf("TCP:\t%s:%d\t%s:%d\n", 
            s1=dotted(ntohl(tcp_stats->table[i].dwLocalAddr)), 
            ntohs(tcp_stats->table[i].dwLocalPort),
            s2=dotted(ntohl(tcp_stats->table[i].dwRemoteAddr)),
            ntohs(tcp_stats->table[i].dwRemotePort));
        free((char *)s1);
        free((char *)s2);
    }
    free(tcp_stats);

    return 0;
} 
```

请注意，这是我很久以前写的——它比 C++ 更像 C。如果我今天写它，我很确定我会做很多事情，至少有点不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T13:30:52.797

你可以从这段代码开始

```
int main() {
  char buf[10000];  
  FILE *p = _popen("netstat -a", "r");
  std::string s;
  for (size_t count; (count = fread(buf, 1, sizeof(buf), p));)
      s += string(buf, buf + count);
  cout<<s<<endl;    
  _pclose(p);  
} 
```

# sql - Sql 按一列中的最大值分组

> ID：15504238
> 
> 赞同：1
> 
> 时间：2013-03-19T15:53:10.567
> 
> 标签：sql, sql-server, tsql

我整天都在拉头发，谁能帮帮我。我认为这可能很简单，但我不能完全得到我想要的。

表中的数据如下所示

```
CallId      ProblemDescription  CurrentAction     CurrentEngineer    EventNumber
CON-00002                       Respond to Call                      0
WHS-00001                       Respond to Call                      0
WHS-00002                       Respond to Call                      0
WHS-00003                       Respond to Call                      0
WHS-00003                       Fix Problem                          1
WHS-00003                       Problem Fixed                        2 
```

我想要做的是显示具有最大事件数的每个 CallId 的所有列。IE

```
CallId      ProblemDescription  CurrentAction     CurrentEngineer    EventNumber
CON-00002                       Respond to Call                      0
WHS-00001                       Respond to Call                      0
WHS-00002                       Respond to Call                      0
WHS-00003                       Problem Fixed                        2 
```

但是我不知道该怎么做。

目前我正在使用

```
Select CallId, MAX(ProblemDescription), MAX(CurrentAction), MAX(CurrentEngineer),
MAX(EventNumber) FROM [Table] GROUP BY CallId 
```

这显然如何单独返回每个列的最大值。所以在上面的情况下 CurrentAction 列显示`Respond to Call`不是``Respond to Call``

谁能告诉我如何做到这一点？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:56:40.060

我假设您正在寻找[`DENSE_RANK`](http://msdn.microsoft.com/en-us/library/ms173825.aspx)：

```
WITH CTE AS
(
   SELECT 
      CallId, 
      ProblemDescription, 
      CurrentAction, 
      CurrentEngineer, 
      EventNumber,
      Rank = DENSE_RANK() OVER (PARTITION BY CallId ORDER BY EventNumber DESC)
   FROM dbo.TableName
)
SELECT 
   CallId, ProblemDescription, CurrentAction, CurrentEngineer, EventNumber
FROM 
   CTE
WHERE 
   RANK = 1 
```

如果您只想要一行，`CallId`即使有多个具有相同的最大`EventNumber`使用量`ROW_NUMBER`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:54:45.850

您想为此使用 row_number() ：

```
select CallId, ProblemDescription, CurrentAction, CurrentEngineer, EventNumber
from (select t.*,
             ROW_NUMBER() over (partition by callId order by eventnumber desc) as seqnum
      from t
     ) t
where seqnum = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:20:28.143

使用此代码。* 仅在事件编号列上使用最大聚合。

```
SELECT CallID, Problem_Description, Current_Action, Current_Engineer, MAX( Event_Number ) FROM test.data GROUP BY CallID; 
```

这可能会帮助你

# c++ - Crash handling in multi-threaded C++ application

> ID：15504239
> 
> 赞同：2
> 
> 时间：2013-03-19T15:53:11.267
> 
> 标签：c++, linux, multithreading

I have a multi-threaded application running on linux. In an event of a crash, say SIGSEGV, the handler is invoked. What will be the state of other threads in the process when the handler is executing? Will the threads be still running?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:05:39.560

该`SIGSEGV`信号是同步信号。它被传递给导致无效内存访问的线程（并且仅传递给该线程，而不是整个进程）。

有关详细信息，请参见[此处](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)。以下是他链接文件的摘录：

> > 可以为整个进程（例如，当使用 kill(2) 发送时）或**为特定线程**（例如，作为执行结果生成的某些信号，例如**SIGSEGV**和 SIGFPE）生成（并因此挂起）信号特定的机器语言指令是线程导向的，使用 pthread_kill(3) 的特定线程的信号也是如此。进程导向的信号可以被传递到当前没有阻塞信号的任何一个线程。如果多个线程的信号被解除阻塞，那么内核选择一个任意线程来传递信号。

# ios - 应用程序：didReceiveLocalNotification：未调用

> ID：15504242
> 
> 赞同：3
> 
> 时间：2013-03-19T15:53:20.377
> 
> 标签：ios, cocoa-touch

我是 iOS 和 Cocoa 编程的新手，今天我想构建一个小型 iOS 应用程序来测试本地通知。通知工作正常，一切都像我预期的那样工作。我唯一的问题是，该方法`application:didReceivedLocalNotification`不想被调用：D

实现是这样工作的：UI 有一个滑块，用户可以在其中定义一个时间值，以秒为单位。在滑块上设置值后，LocalNotification 应在 xx 秒内触发。当我按下主页按钮时，通知会准时出现。但是当应用程序在前台时，通知不会出现。我已经实现了该方法并通过在方法的开头`application:didReceivedLocalNotification`放置一个来测试方法的调用，但是终端上没有输出。`NSLog(@"YEEEAAH");`

segue 似乎也有效。当我将线放在sliderTouched 的末尾时：segue 执行。

这是我的代码：

```
- (IBAction)sliderTouched:(UISlider *)sender {
    float seconds = [sender value];
    self.secondLabel.text = [NSString stringWithFormat:@"%d sec.", (int)seconds];

    UIApplication *theApplication = [UIApplication sharedApplication];
    UILocalNotification * theNotification = [[UILocalNotification alloc] init];
    [theApplication cancelAllLocalNotifications];
    NSDate *fireDate = [NSDate dateWithTimeIntervalSinceNow:(int)seconds];
    theNotification.fireDate = fireDate;
    theNotification.timeZone = [NSTimeZone defaultTimeZone];
    theNotification.alertBody = @"Lalalala";
    theNotification.soundName = UILocalNotificationDefaultSoundName;

    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:fireDate];
    NSInteger hour = [components hour]%12;
    NSInteger minute = [components minute];
    NSInteger second = [components second];

    self.timeLabel.text = [NSString stringWithFormat:@"%02i:%02i:%02i", hour, minute, second];

    [theApplication scheduleLocalNotification:theNotification]; 
}

- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {
    if (application.applicationState == UIApplicationStateActive) {
        [self performSegueWithIdentifier:@"modalView" sender:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:22:23.167

两个条件：-

1）如果您的应用程序处于 Not-Running 状态，则`didFinishLaunchingWithOptions`调用函数然后`didReceiveLocalNotification`调用

2）如果您的应用程序处于运行状态，即如果它处于前台或后台，则`didReceiveLocalNotification`调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T10:20:01.913

`didReceiveRemoteNotification`带有处理程序， `didReceiveLocalNotification`当我们在通知或应用程序处于前台时会调用它。

# python - Insert python binary string object in MySQL blob

> ID：15504246
> 
> 赞同：3
> 
> 时间：2013-03-19T15:53:23.953
> 
> 标签：python, mysql

I'd like to insert a string object containing binary data into a MySQL blob column. However, I keep getting MySQL syntax errors.

I made a small script for debugging purposes:

```
import MySQLdb
import array
import random

conn = MySQLdb.connect(host="localhost", user="u", passwd="p", db="cheese")
cur = conn.cursor()

a = array.array('f')
for n in range(1,5):
    a.append(random.random())
bd = a.tostring()
print type(bd) # gives str
query = '''INSERT INTO cheese (data) VALUES (%s)''' % bd
cur.execute(query) 
```

Result (but not every time...)

```
ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near '?fJ\x95<=  
\xad9>\xf3\xec\xe5>)' at line 1") 
```

The problem apparently boils down to certain characters in the binary data which MySQL doesn't like. Is there a fail-safe way of putting binary data into the MySQL database?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T15:55:36.400

这样做，而不是：

```
query = '''INSERT INTO cheese (data) VALUES (%s)'''
cur.execute(query, (bd,)) 
```

这不是使用 Python 级别的字符串格式化，而是使用 MySQL 特定的格式化，包括在要嵌入查询的字符串中转义对 MySQL 具有特殊含义的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:07:25.420

该错误与字符串的格式无关，而是与 SQL 语法有关。所以我猜问题出在 SQL 查询本身，而不是字符。使用`query = '''INSERT INTO cheese (data) VALUES ('%s')''' % bd`将相关字符串括在单引号中的位置。

# android - How do I force a PDF to fully download before being viewed?

> ID：15504247
> 
> 赞同：0
> 
> 时间：2013-03-19T15:53:27.300
> 
> 标签：android, pdf, mobile, download

I highly suspect the solution to a problem I am having developing a mobile website is to prevent the PDF from downloading in parts. Downloading a PDF from this mobile site on Android results in download unsuccessful.

The site is on a staging server that requires simple authentication. I have read elsewhere that Android doesn't handle this situation properly (or at least there have been multiple similar issues). If I can simply get the file to download fully without it being sent in small packets my hunch is that the issue I am encountering will go away.

How do I force a PDF to fully download before being viewed?

Other ideas on this topic are desired as well!

# eclipse - ecplipse not giving suggestions

> ID：15504250
> 
> 赞同：0
> 
> 时间：2013-03-19T15:53:29.173
> 
> 标签：eclipse, api

My eclipse has always worked perfectly, but recently it just stopped giving suggestions when I write for example `canvas.`, or `Math.`, nothing comes up. Does anyone know what I can do to fix this? it is really annoying and makes everything I do take atleast twice the time.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:57:12.443

窗口 -> 首选项 -> 编辑器 -> 内容辅助

# web-crawler - how much of data in pure html would there be for small european country

> ID：15504251
> 
> 赞同：0
> 
> 时间：2013-03-19T15:53:29.817
> 
> 标签：web-crawler

Ok, maybe this question is bizarre, but I'm planing to write a crawler for pages in Lithuanian only and I'm trying to estimate how much of data that would be (and therefore how long would that take). Perhaps someone else has similar experience?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:56:29.727

通过查看一些统计数据可以做出非常粗略的估计：

*   [平均页面大小](https://developers.google.com/speed/articles/web-metrics)为320KB
*   立陶宛人口占世界人口的0.04%
*   互联网上有大约一[万亿页](http://googleblog.blogspot.com/2008/07/we-knew-web-was-big.html)
*   标记文件的[压缩比](https://superuser.com/questions/139253/what-is-the-maximum-compression-ratio-of-gzip)介于 2:1 和 4:1 之间（[也由 Google 确认](https://developers.google.com/speed/articles/web-metrics)）。

所以如果你给世界上每个国家一个互联网页面的比例所有权（这不是一个正确的假设，但它应该是一个有用的假设），那么 1 万亿页面中的 0.04% 是立陶宛的 4 亿个页面。

4 亿 * 320KB = 119.20929 TB

如果您压缩页面并假设 4:1 压缩的**最佳情况**，那么您将看到大约 30 TB。我仍然会说您需要 120 TB 的数据才能确保安全。如果您假设当前价格约为每 TB 100 美元，那么仅在硬盘驱动器中存储这些数据就需要 3,000 到 12,000 美元。

现在，**最大**的问题是：您真的需要所有这些数据吗？

# php - jQuery POST response OK, but PHP script doesn't get POST?

> ID：15504253
> 
> 赞同：0
> 
> 时间：2013-03-19T15:53:37.703
> 
> 标签：php, jquery, post

I am posting to a php script via jQuery:

```
$.post('http://*****.php', {'clicked':'true'}, 'json'); 
```

Looking at the post data, it responds with:

```
Request URL:http://*****.php
Request Method:POST
Status Code:200 OK 
```

The Form Data in the headers looks like:

```
clicked:true 
```

When I attempt to retrieve the POST data on my PHP script via:

```
var_dump($_POST); 
```

I get an empty array:

```
array(0) { } 
```

However, when playing around with the command line, I can successfully view the post data from the response when I do:

```
wget --post-data 'clicked=true' http://****.php 
```

The successful response with wget is:

```
array(1) {
  ["name"]=>
  string(4) "test"
} 
```

I have been unable to figure it out... and it's not my HTACCESS file. Also, GET requests work just fine. I'm assuming my jQuery POST is wrong, but don't know what it could be - it comes directly from the jQuery docs.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:57:56.123

当 POST 数据作为 JSON 字符串发送时，`$_POST`不会显示数据。要访问它，您必须使用`php://input`.

```
$phpinput = file_get_contents("php://input");
if(!$phpinput) {
  //No data was sent
}
else {
  //Do something with yo data
} 
```

有关此技术的详细信息，[请查看](https://stackoverflow.com/questions/8893574/php-php-input-vs-post/8893792#8893792)以下评论​​之一中提供的出色答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:16:26.097

改用原始 $.ajax

`$.ajax({`

 `url : 'http://*****.php', data : {'clicked':'true'}, dataType : 'json', method : 'post'

});`

# java - WebView clicks are not accurate

> ID：15504256
> 
> 赞同：0
> 
> 时间：2013-03-19T15:53:48.313
> 
> 标签：java, android, dialog, android-webview

I found a nice class for a dialog containing a `WebView`. The problem is, that every click in the dialog is somehow moved left. If I click on the right-top edge of the screen, it shows that the click was somewhere in the middle-top of the screen. I tried letting it zoom, but no luck. Can anyone address the problem?

PS: There is a repeating log message which might be related:

```
03-19 17:42:21.660: E/webcoreglue(10335): Should not happen: no rect-based-test nodes found 
```

Here is the class code:

```
public class WebDialog extends Dialog {
    static final int BLUE = 0xFF6D84B4;
    static final float[] DIMENSIONS_DIFF_LANDSCAPE = {20, 60};
    static final float[] DIMENSIONS_DIFF_PORTRAIT = {40, 60};

    @SuppressWarnings("deprecation")
    static final FrameLayout.LayoutParams FILL = new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT);

    static final int MARGIN = 4;
    static final int PADDING = 2;
    static final String DISPLAY_STRING = "touch";
    private String mUrl;
    // private DialogListener mListener;
    private ProgressDialog mSpinner;
    private WebView mWebView;
    private LinearLayout mContent;
    private TextView mTitle;

    public WebDialog(Context context, String url) {
        super(context);
        mUrl = url;
    }

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mSpinner = new ProgressDialog(getContext());
        mSpinner.requestWindowFeature(Window.FEATURE_NO_TITLE);
        mSpinner.setMessage(HebrewConstants.LOADING);
        mContent = new LinearLayout(getContext());
        mContent.setOrientation(LinearLayout.VERTICAL);
        mContent.setBackgroundColor(BLUE);
        setUpTitle();
        setUpWebView();
        Display display = getWindow().getWindowManager().getDefaultDisplay();
        final float scale = getContext().getResources().getDisplayMetrics().density;
        int orientation = getContext().getResources().getConfiguration().orientation;
        float[] dimensions = (orientation == Configuration.ORIENTATION_LANDSCAPE)
                ? DIMENSIONS_DIFF_LANDSCAPE : DIMENSIONS_DIFF_PORTRAIT;
        addContentView(mContent, new LinearLayout.LayoutParams(
                display.getWidth() - ((int) (dimensions[0] * scale + 0.5f)),
                display.getHeight() - ((int) (dimensions[1] * scale + 0.5f))));
    }

    private void setUpTitle() {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        final ImageView img = new ImageView(getContext());
        Drawable icon = getContext().getResources().getDrawable(R.drawable.close);
        img.setImageDrawable(icon);
        img.setPadding(MARGIN + PADDING, MARGIN + PADDING, MARGIN + PADDING, MARGIN + PADDING);
        img.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                dismiss();
            }
        });
        img.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if (hasFocus) {
                    img.setImageDrawable(
                            getContext().getResources().getDrawable(R.drawable.close_focus));
                } else {
                    img.setImageDrawable(getContext().getResources().getDrawable(R.drawable.close));
                }
            }
        });
        LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        layoutParams.gravity = Gravity.RIGHT;
        img.setBackgroundColor(BLUE);
        mTitle = new TextView(getContext());
        mTitle.setText(HebrewConstants.LOADING);
        mTitle.setTextColor(Color.WHITE);
        mTitle.setTypeface(Typeface.DEFAULT_BOLD);
        mTitle.setBackgroundColor(BLUE);
        mTitle.setPadding(MARGIN + PADDING, MARGIN, MARGIN, MARGIN);
        LinearLayout container = new LinearLayout(getContext());
        container.setOrientation(LinearLayout.HORIZONTAL);
        container.addView(img);
        RelativeLayout relative = new RelativeLayout(getContext());
        RelativeLayout.LayoutParams params = new LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        relative.addView(mTitle, params);
        container.addView(relative);
        mContent.addView(container);
    }

    private void setUpWebView() {
        mWebView = new WebView(getContext());
        mWebView.setVerticalScrollBarEnabled(false);
        mWebView.setHorizontalScrollBarEnabled(false);
        mWebView.setWebViewClient(new WebDialog.DialogWebViewClient());
        // mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setDefaultZoom(ZoomDensity.FAR);
        System.out.println(" mURL = " + mUrl);
        mWebView.loadUrl(mUrl);
        mWebView.setLayoutParams(FILL);
        mContent.addView(mWebView);
    }

    private class DialogWebViewClient extends WebViewClient {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }

        @Override
        public void onReceivedError(WebView view, int errorCode, String description,
                String failingUrl) {
            super.onReceivedError(view, errorCode, description, failingUrl);
            WebDialog.this.dismiss();
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            super.onPageStarted(view, url, favicon);
            mSpinner.show();
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            String title = mWebView.getTitle();
            if (title != null && title.length() > 0) {
                mTitle.setText(title);
            }
            mSpinner.dismiss();
        }    
    }
} 
```

# java - Hadoop reducers receiving wrong data

> ID：15504258
> 
> 赞同：2
> 
> 时间：2013-03-19T15:53:49.937
> 
> 标签：java, hadoop, mapreduce, hadoop-partitioning

I have a load of JobControls running at the same time, all with the same set of ControlledJobs. Each JobControl is dealing with a different set of input / output files, by date range, but they are all of the type. The problem that I am observing is that the reduce steps are receiving data designed to be processed by a reducer handling a different date range. The date range is set by the Job, used to determine the input and output, and read from the context within the reducer.

This stops if I submit the JobControls sequentially but that's no good. Is this something I should be solving with a custom partitioner? How would I even determine the correct reducer for a key if I don't know which reducer is dealing with my current date-range? Why would the instantiated reducers not be locked to their JobControl?

I have writing all the JobControls, Jobs, Maps and Reduces against their base implementations in Java.

I'm using the 2.0.3-alpha with yarn. Could that have anything to do with it?

I have to be a little careful sharing the code, but here's a sanitised mapper:

```
protected void map(LongWritable key, ProtobufWritable<Model> value, Context context) 
    throws IOException, InterruptedException {
  context.write(new Text(value.get().getSessionId()), 
                new ProtobufModelWritable(value.get()));
} 
```

And Reducer:

```
protected void reduce(Text sessionId, Iterable<ProtobufModelWritable> models, Context context) 
     throws IOException, InterruptedException {
  Interval interval = getIntervalFromConfig(context);
  Model2 model2 = collapseModels(Iterables.transform(models, TO_MODEL));

  Preconditions.checkArgument(interval.contains(model2.getTimeStamp()), 
      "model2: " + model2 + " does not belong in " + interval);
}

private Interval getIntervalFromConfig(Context context) {
  String i = context.getConfiguration().get(INTERVAL_KEY);
  return Utils.interval(i);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:08:06.943

作为参考，我用两件事解决了这个问题。最重要的问题是，当我为每个间隔创建单独的作业时，我给它们每个都赋予了相同的名称。通过将序列化间隔附加到作业名称，Hadoop 知道将映射结果发送到哪些减速器。

此外，我开始为每个作业创建单独的配置对象，而不是复制初始配置。这可能是不必要的，但至少我知道我不会犯错并开始共享相同的配置对象。

# asp.net-mvc - Setting primary identity in ClaimsPrincipal.Current

> ID：15504259
> 
> 赞同：2
> 
> 时间：2013-03-19T15:53:51.417
> 
> 标签：asp.net-mvc, wif, identity, claims-based-identity

How to change in ClaimsPrincipal.Current identity collection the primary one identity ? I saw there is ClaimsPrincipal.PrimaryIdentitySelector, but I am not sure when it is fired and how it have to work.

As I sow I can only add a new one ClaimIndetity to the collection, but I can not set it as primary. If I can not do that then default Account control in MVC does not see provided user name .

Thank you, Rastko

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T21:26:21.097

如果您有多个身份，并且假设其中只有一个具有名称声明。你可以这样做。

```
public class MyPrincipal : ClaimsPrincipal
{
    public MyPrincipal() 
    {
        PrimaryIdentitySelector = (ids) => ids.FirstOrDefault(id => id.Name == ClaimTypes.Name);
    }
} 
```

}

# iis - 安装过程中路径不可用错误

> ID：15504261
> 
> 赞同：0
> 
> 时间：2013-03-19T15:53:54.830
> 
> 标签：iis, iis-7, wix

我在 Visual Studio 2012 中有一个 WiX 项目，用户可以选择安装应用程序、服务器或两者。我的问题是当用户同时选择两者时。

我有一个类似于这样的目录树：

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="ProgramFilesFolder">
    <Directory Id="Company" Name="My company">
      <Directory Id="INSTALLDIR" Name="My application"/>
    </Directory>
  </Directory>
  <Directory Id="inetpub" Name="inetpub">
    <Directory Id ="WEBINSTALLDIR" Name="wwwroot"/>
  </Directory>
</Directory> 
```

一切都只是转储在其各自的文件夹中。我制作了具有不同属性名称的 InstallDirDlg 和 BrowseDlg 的副本，以选择服务器文件的安装位置。仅当用户选择在 IIS 中创建新的虚拟应用程序时才会显示它们（如果他选择现有的应用程序，自定义操作只会获取其物理路径）。

一切正常，直到我选择创建新应用程序时单击下一步按钮。设置会挂起一会儿（当我选择现有应用程序时不会挂起），然后给我一个致命的错误消息：（`The specified path 'WEBINSTALLDIR' is unavailable.`错误 1314）

我已经调试了所有自定义操作 (System.Diagnostics.Debugger.Launch())，它们都可以正常工作，并且我已经检查了我的日志，但是我看不到任何可能导致它出错的东西。每个属性都设置为应有的状态。

**更新**

`WEBINSTALLDIR`以下是我的项目中对的所有引用（和`WIXUI_WEBINSTALLDIR`，等价于`WIXUI_INSTALLDIR`，和`_WebBrowseProperty`，等价于`_BrowseProperty`）：

```
<Property Id="WIXUI_WEBINSTALLDIR" Value="WEBINSTALLDIR"/>

...

<Control Id="PhysicalPath" Type="PathEdit" X="20" Y="160" Width="320" Height="18" Property="WIXUI_WEBINSTALLDIR" Indirect="no" />

...

<Feature Id="Server" /*snip*/ ConfigurableDirectory="WEBINSTALLDIR">

...

<ComponentGroup Id="Server" Directory="WEBINSTALLDIR">

...

<Property Id="_WebBrowseProperty" Value="WEBINSTALLDIR"/>

...

<Publish Dialog="WebInstallDirDlg" Control="Next" Event="SetTargetPath" Value="[WIXUI_WEBINSTALLDIR]" Order="1">1</Publish>
<Publish Dialog="WebInstallDirDlg" Control="ChangeFolder" Property="_WebBrowseProperty" Value="[WIXUI_WEBINSTALLDIR]" Order="1">1</Publish> 
```

**更新 2**

我注意到，在日志中，当我使用一个确实存在的应用程序时，`WEBINSTALLDIR`在 UI 处于活动状态时没有提及，但是当我选择一个不存在的应用程序时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:29:12.787

听起来您可能没有正确取消引用该属性，而是将`'WEBINSTALLDIR'`其视为文字路径。

你在哪里参考`WEBINSTALLDIR`？

或者另一个潜在的原因是能够写入该文件夹的权限。

乍一看，参考文献看起来不错。可能是权限。尝试将`Directory`条目移动`WEBINSTALLDIR`到与应用程序的其余部分相同的目录中。如果可行，那么它可能根本无法访问该`wwwroot`文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:00:01.977

经过一段时间的鬼混，我发现了这个问题。

结果`PathEdit`我的路径属性挂钩的控件`Indirect`设置为 no 而不是 yes，所以它使用我的属性名称作为路径，而不是查找它的值。

# c++ - Boost Random and OpenMP

> ID：15504264
> 
> 赞同：5
> 
> 时间：2013-03-19T15:53:57.330
> 
> 标签：c++, boost, random, openmp

I'm getting a "bus error" from an OpenMP parallel section of code. I recreated a simple version of my problem below. The code essentially makes many calls to the function `uniform_distribution`, which draws an integer between 0 and 20000 using Boost's uniform_int_distribution.

This [post](https://stackoverflow.com/questions/2920497/thread-safty-of-boost-rng?rq=1) warns of two threads accessing the same object. I'm guessing that's `eng` in my case. (Unfortunately I don't know how to write "an appropriate mutex wrapper", as that post suggests).

A possible dirty solution I thought of was to create a local `eng` inside the `#pragma for` loop and to pass that as an argument to `uniform_distribution`. I don't like this idea because in my real code, I'm calling many functions, and passing a local `eng` would be cumbersome. Also, my concern is that different threads will generate the **same** random number sequence if I declare `eng` inside `uniform_distribution`. So I have two requirements: How do I parallelize in a way that

1.  Each thread is generating probabilistically independent draws from other threads?
2.  No race conditions occur on the RNG?

Thanks; any help is warmly appreciated.

```
#include <omp.h>
#include <boost/random/uniform_int_distribution.hpp>

boost::random::mt19937  eng;

int uniform_distribution(int rangeLow, int rangeHigh) {
    boost::random::uniform_int_distribution<int> unirv(rangeLow, rangeHigh);
    return unirv(eng);
}
int main()
{  
    # pragma omp parallel for private(eng)
    for (int bb=0; bb<10000; bb++)
        for (int i=0; i<20000; i++)
             int a = uniform_distribution(0,20000);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:21:19.230

当您并行化某些代码时，您必须考虑共享资源，这可能会导致*数据竞争*，进而最终可能会破坏您的程序。（注意：并非所有数据竞争都会破坏您的程序。）

在您的情况下，正如您正确预期的那样，`eng`是由两个或多个线程共享，必须避免正确执行。

您的情况的解决方案是**私有化**：为共享资源制作每个线程的副本。您需要创建一个单独的`eng`.

有很多方法可以进行私有化`eng`：

(1) 尽量使用`threadprivate`指令（[链接](https://computing.llnl.gov/tutorials/openMP/#THREADPRIVATE)）：例如，`#pragma omp threadprivate(eng)`. 但是，某些编译器可能不支持该指令的非 POD 结构。

(2) 在 where`threadprivate`不可用的情况下，使用`eng`线程 id 的数组和访问：声明如`eng[MAX_THREAD]`. 然后，使用线程 id: 访问`eng[omp_get_thread()]`。

但是，第二种解决方案需要考虑*虚假共享*，这会严重损害性能。最好保证其中的每个项目`eng[MAX_THREAD]`都分配在单独的缓存行边界上，在现代台式机 CPU 中通常为 64 字节。还有几种方法可以避免虚假共享。最简单的解决方案是使用填充：例如，`char padding[x]`在一个`struct`包含`eng`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T17:26:01.367

我认为最方便的解决方案将涉及一个`thread_local`RNG 和一个将线程 ID 作为每个线程的唯一编号的播种，例如，您可以在系统时间和线程 ID 之间进行 XOR 来播种 RNG。类似于（使用C ++ 11）的东西：

```
#include <omp.h>
#include <boost/random/uniform_int_distribution.hpp>

#include <thread>
#include <ctime>

boost::random::mt19937& get_rng_engine() {
  thread_local boost::random::mt19937 eng(
    reinterpret_cast<unsigned int>(std::time(NULL)) ^ std::this_thread::get_id());
  return eng;
}; 
```

（注意：`<random>`如果要使用 C++11，也可以使用）

如果您不能使用 C++11，那么您可以使用`boost::thread`类似的行为来代替，请参阅[线程本地存储](http://www.boost.org/doc/libs/1_35_0/doc/html/thread/thread_local_storage.html)上的 Boost 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:23:52.257

你有两个选择：

*   每个线程都有单独的随机数生成器并以不同的方式播种
*   使用互斥

先来个互斥的例子：

```
# pragma omp parallel for
for (int bb=0; bb<10000; bb++)
{
    for (int i=0; i<20000; i++)
    {
        // enter critical region, disallowing simulatneous access to eng
        #pragma omp critical
        {
            int a = uniform_distribution(0,20000);
        }
        // presumably some more code...
    }
    // presumably some more code...
} 
```

接下来，一个带有种子的线程本地存储示例：

```
# pragma omp parallel
{
    // declare and seed thread-specific generator
    boost::random::mt19937 eng(omp_get_thread_num());
    #pragma omp for
    for (int bb=0; bb<10000; bb++)
    {
        for (int i=0; i<20000; i++)
        {
            int a = uniform_distribution(0,20000, eng);
            // presumably some more code...
        }
        // presumably some more code...
    }
} 
```

这两个片段都只是说明性的，根据您的要求（例如安全相关、游戏与建模），您可能希望选择其中一个。您可能还想更改确切的实现以适合您的使用。例如，如果您希望生成器可重复或更接近真正随机（是否可能是系统特定的），那么如何播种生成器很重要。这同样适用于两种解决方案（尽管在互斥情况下要获得可重复性更难）。

线程本地生成器可能运行得更快，而互斥情况应该使用更少的内存。

编辑：需要明确的是，**互斥解决方案只有在随机数的生成不是线程工作的大部分时才有意义**（即`// presumably some more code...`在示例中存在并且不需要花费大量时间来完成）。关键部分只需要包含对共享变量的访问，稍微改变你的架构可以让你更好地控制它（在线程本地存储的情况下，也可以让你避免传递`eng`引用）

# eclipse-gef - How can I set the Z-order of connections in GEF?

> ID：15504266
> 
> 赞同：0
> 
> 时间：2013-03-19T15:54:11.263
> 
> 标签：eclipse-gef

In GEF connections are in the Z-order default on top of the shapes.

What is the correct way to:
1\. Show a shape in the Z-order on top of a connection?
2\. Set the Z-order of the connections relative to each other?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:45:33.357

当然可以，让我解释一下如何实现这两个目标：

GEF/Draw2d 对形状/连接使用不同的层，它们分别由`LayerConstants.PRIMARY_LAYER`和`LayerConstants.CONNECTION_LAYER`常量标识。您可以更改形状和连接之间的 Z 顺序，方法是更改​​它们的图层添加`LayeredPane`到`RootEditPart`.

例如，覆盖`ScalableRootEditPart.createPrintableLayers()`以下方式来反转图层绘制：

```
protected LayeredPane createPrintableLayers() {
    LayeredPane pane = new LayeredPane();

    Layer layer = new ConnectionLayer();
    layer.setPreferredSize(new Dimension(5, 5));
    pane.add(layer, CONNECTION_LAYER);

    layer = new Layer();
    layer.setLayoutManager(new StackLayout());
    pane.add(layer, PRIMARY_LAYER);

    return pane;
} 
```

为了实现您的第二个目标，您必须通过覆盖来修改连接绘制算法，`ConnectionLayer.paintChidren()`因为所有连接图形都是 的子图形`ConnectionLayer`（请注意，默认实现继承自`Figure.paintChidren()`）。

我建议您向连接图形（由您的连接部件创建的图形）添加一个整数 Z 顺序属性，以供算法以正确的顺序实际绘制它们。然后在您的连接部件中实施相对排序策略，该策略将负责更新各自图中的 Z-order 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:29:48.240

我不认为你能做到这一点。据我所知，形状和连接位于不同的层中，形状层位于连接层下方。您可能也无法更改连接的 Z 顺序，因为它全部由框架管理

使用 GEF 之类的框架时，您可以用自动功能换取自由:-)。

# ruby-on-rails - 将 rails#session 集成到主干中会更好吗

> ID：15504268
> 
> 赞同：0
> 
> 时间：2013-03-19T15:54:15.660
> 
> 标签：ruby-on-rails, authentication, backbone.js

首先，我已经阅读了[Integrating Devise with Backbone.js](http://joshhuckabee.com/integrating-devise-backbonejs)。但最重要的是 - 我不使用设计。
现在我已经创建了用于注册和身份验证的主干视图（主干只是连接到 Rails 以获得后端支持）。我想知道的是-是否有可能存储有关用户是否登录的信息以及您建议将其存储在哪里，或者当我需要信息时我必须连接到后端？

**更新 1**
我尝试在登录后将用户存储在全局变量中，该变量在路由器（骨干网）中声明

```
class Notes.Routers.Articles extends Backbone.Router
  currentUser: null 
```

在一个视图中

```
@currentUser = response // it's a response object from ajax call
 Backbone.history.navigate("articles",true) 
```

并在目标视图中

```
 console.log  @currentUser 
```

没用，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:17:46.420

查看“gon” gem - 它提供了对 Rails 会话信息的访问，以及您在 JavaScript 环境中想要从 rails 获得的任何其他信息。我曾经在一个客户的项目中使用过它，效果非常好。

如果你不想做这样的事情，那么“简单”的方法就是直接将渲染的会话信息转储到你的 JavaScript 代码中。

例如，您可以在视图模板中执行以下操作：

```
 window.currentUser = {
  name: ""
}; 
```

这将使您可以访问`currentUser.name`JavaScript 代码中的任何位置。

# android - Fragment 内的 FragmentTransaction

> ID：15504274
> 
> 赞同：6
> 
> 时间：2013-03-19T15:54:25.090
> 
> 标签：android, android-fragments

我正在使用 jfeinstien10 的`SlidingMenu`. 拉出的菜单是一个`Fragment`。当用户单击菜单项时，它会执行以下操作：

```
FragmentTransaction t = getActivity().getSupportFragmentManager().beginTransaction();
SherlockListFragment mFrag = new ItemsFragment();
t.replace(R.id.main_frag, mFrag);
t.commit(); 
```

但是，我听说`Fragment`从 Another控制 a 并不是一个好习惯`Fragment`。在这种情况下，这是一种可以接受的方法吗？或者我应该对 parent 使用回调方法`FragmentActivity`。

如果回调方法是正确的方法，我可以看看它是如何工作的例子吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-19T16:18:48.247

我建议您不要在片段中执行事务，而是将其保留到 Activity 级别。为此，请在您的活动中定义一个公共方法，然后从您的片段中调用它。例如：

假设您的活动是：

```
class MainActivity extends Activity{
    ....

    public void replaceFragment(){
        FragmentTransaction t = getSupportFragmentManager().beginTransaction();
        SherlockListFragment mFrag = new ItemsFragment();
        t.replace(R.id.main_frag, mFrag);
        t.commit();
    }

    ....
} 
```

在您的片段中，进行以下调用：

```
((MainActivity)getActivity()).replaceFragment(); 
```

# sql-server - 我可以过滤来自 OUTPUT 子句的结果而不将其存储在表中吗？

> ID：15504277
> 
> 赞同：0
> 
> 时间：2013-03-19T15:54:28.583
> 
> 标签：sql-server, tsql

我正在处理一些 SQL 并使用 OUTPUT 子句进行调试。我有一个`DELETE FROM table OUTPUT DELETED.*`显示我删除的记录。

有没有办法向其中添加 WHERE 子句，这样我就不必专门创建一个表来存储 OUTPUT 来过滤这些结果？它有几个 JOIN，所以我必须在任何临时表上指定 60 多列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:31:47.770

您只需定义要跟踪的列（在#temp 或@variable 甚至真实表中）。

在此处查看我的示例：

[http://granadacoder.wordpress.com/2008/12/10/sqlserver20052008-output-clause-in-insertupdatedelete-statements/](http://granadacoder.wordpress.com/2008/12/10/sqlserver20052008-output-clause-in-insertupdatedelete-statements/)

文章中的代码示例：

```
delete from dbo.EmployeeTable
output deleted.EmpKey into dbo.AuditTable (EntityKey)
 where EmpAge > 0; 
```

# ruby-on-rails - Ruby中的模操作数

> ID：15504278
> 
> 赞同：0
> 
> 时间：2013-03-19T15:54:33.973
> 
> 标签：ruby-on-rails, ruby

我有一些代码每 10,000 次迭代执行一次。我正在使用模数，`if i % 10000 == 0`然后做一些事情。您`pg_conn.exec function`在代码中看到 ( ) 下面的“某些东西”，但无论如何我的问题是，pg_conn.exec 也需要为最后剩余的迭代完成，这实际上可能无法均匀地被 10,000 设计。我怎样才能做到这一点？我的程序执行了`pg_conn.exec`函数 5 次，因此变量`i`等于 50000。程序总共调用了 56,000 次迭代。如何处理剩余的 6,000 次迭代？

```
conn.query("select * from my_tbl") do |r|
    sql += "('#{r[:main_id]}', '#{r[:rep_dt]}', '#{r[:create_dt]}')"

    if i % 10000 == 0
    pg_conn.exec(sql + ';') # important statement that executes only every 10000
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:57:36.690

只需在块外再次调用代码即可。记得在 if 块中重置你的 sql 字符串:)

更新：添加了一个检查，以便`pg_conn.exec`只有在 sql 中发生更改时才会执行最后一次调用。

```
base_sql_statement = ... # base sql statement here
sql = base_sql_statement

conn.query("select * from my_tbl") do |r|
  sql += "('#{r[:main_id]}', '#{r[:rep_dt]}', '#{r[:create_dt]}')"

  if i % 10000 == 0
    pg_conn.exec(sql + ';') # important statement that executes only every 10000
    sql = base_sql_statement
  end
end

if sql != base_sql_statement
  pg_conn.exec(sql + ';')
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:29:08.347

从您的代码块中不清楚来自哪里`i`，但您需要知道最大值`i`是多少才能识别​​您是否在剩余组中。假设您可以掌握 max_i，请将您的电流替换`if`为`if i % 10000 == 0 || i > ((max_i / 10000) * 10000)`以利用整数算术。

# python - 如何存储执行函数的结果并在以后重新使用？

> ID：15504280
> 
> 赞同：5
> 
> 时间：2013-03-19T15:54:37.420
> 
> 标签：python, python-2.7

例如，我有：

```
def readDb():
    # Fetch a lot of data from db, spends a lot time
    ...
    return aList

def calculation():
    x = readdb()
    # Process x
    ...
    return y 
```

在python解释器中，
每次运行`calculation()`都需要很长时间重新读取数据库，这是不必要的。
如何存储结果`readdb()`以避免这种还原过程？

**编辑：**
我在这里发现了一个类似的问题，但我不太清楚答案
[保存函数以便在不重新执行的情况下重复使用](https://stackoverflow.com/questions/10230869/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:56:55.123

```
def readDb():
    ... #Fetch a lot of data from db, spends a lot time
    return aList

def calculation(data):
    x=data
    ...process x...
    return y

data = readDb()

calculation(data)
calculation(data)
calculation(data) 
```

这只会命中数据库一次。

基本上，您希望将 readDb() 的结果保存到一个单独的变量中，然后您可以将其传递给calculation()。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T15:58:30.980

写一个简单的装饰器：

```
class memo(object):
    def __init__(self, fun):
        self.fun = fun
        self.res = None
    def __call__(self):
        if self.res is None:
            self.res = self.fun()
        return self.res

@memo
def readDb():
    # ... etc
    return aList 
```

有关更通用的解决方案，请查看此处：[http](http://code.activestate.com/recipes/498245-lru-and-lfu-cache-decorators/) ://code.activestate.com/recipes/498245-lru-and-lfu-cache-decorators/ 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-17T11:00:32.237

**现代 Python 的更新答案**

对于仍在寻找如何执行此操作的任何人，标准库`functools`包含一个装饰器函数[`@functools.lru_cache`](https://docs.python.org/3/library/functools.html#functools.lru_cache)来执行此操作。

例如（来自文档）：

```
@lru_cache(maxsize=32)
def get_pep(num):
    'Retrieve text of a Python Enhancement Proposal'
    resource = 'http://www.python.org/dev/peps/pep-%04d/' % num
    try:
        with urllib.request.urlopen(resource) as s:
            return s.read()
    except urllib.error.HTTPError:
        return 'Not Found' 
```

这将存储最后一次`32`调用`get_pep`，当使用相同的参数调用它时，将返回缓存的值。

# google-maps - 如何在谷歌自定义地图中添加“指向当前位置的链接”？

> ID：15504282
> 
> 赞同：0
> 
> 时间：2013-03-19T15:54:42.713
> 
> 标签：google-maps

我正在为游戏制作自定义谷歌地图，一切进展顺利，但我在为人们添加一个选项以链接到地图上的当前部分时遇到了困难。

例如：[http ://www.gta4.net/map/?lat=-19.775390625&lng=-7.91015625&z=5](http://www.gta4.net/map/?lat=-19.775390625&lng=-7.91015625&z=5)

这个函数是否存在于 api 中或者这是一个定制的脚本？如果是这样，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:00:26.793

API 中不存在此功能，但很容易添加（未经测试）：

```
 // If there are any parameters at eh end of the URL, they will be in  location.search
 // looking something like  "?marker=3"

 // skip the first character, we are not interested in the "?"
 var query = location.search.substring(1);

 // split the rest at each "&" character to give a list of  "argname=value"  pairs
 var pairs = query.split("&");
 for (var i=0; i<pairs.length; i++) {
   // break each pair at the first "=" to obtain the argname and value
   var pos = pairs[i].indexOf("=");
   var argname = pairs[i].substring(0,pos).toLowerCase();
   var value = pairs[i].substring(pos+1).toLowerCase();

   // process each possible argname  -  use unescape() if theres any chance of spaces
   if (argname == "id") {id = unescape(value);}
   if (argname == "marker") {index = parseFloat(value);}
   if (argname == "lat") {lat = parseFloat(value);}
   if (argname == "lng") {lng = parseFloat(value);}
   if (argname == "zoom") {zoom = parseInt(value);}
   if (argname == "type") {
     // from the v3 documentation 8/24/2010
     // HYBRID This map type displays a transparent layer of major streets on satellite images. 
     // ROADMAP This map type displays a normal street map. 
     // SATELLITE This map type displays satellite images. 
     // TERRAIN This map type displays maps with physical features such as terrain and vegetation. 
     if (value == "m") {maptype = google.maps.MapTypeId.ROADMAP;}
     if (value == "k") {maptype = google.maps.MapTypeId.SATELLITE;}
     if (value == "h") {maptype = google.maps.MapTypeId.HYBRID;}
     if (value == "t") {maptype = google.maps.MapTypeId.TERRAIN;}

   }
 }

// create the map
  var myOptions = {
    zoom: zoom,
    center: new google.maps.LatLng(lat,lng),
    mapTypeId: maptype,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: true,
    mapTypeId: maptype
}
map = new google.maps.Map(document.getElementById("map_canvas"),
                                myOptions); 
```

[工作示例（从](http://www.geocodezip.com/v3_MW_example_linktomap.html?id=Marker%20One&lat=43.784976&lng=-81.018677&zoom=7&type=m)[Mike Williams 的 v2 教程页面上](http://econym.org.uk/gmap/linktothis.htm)的示例移植）

# c# - 无法将 WebAPI XML 响应编组为 C# 对象

> ID：15504295
> 
> 赞同：0
> 
> 时间：2013-03-19T15:55:11.160
> 
> 标签：c#, asp.net, asp.net-web-api

我有一些 XML 从 REST 服务返回，我无法编组到 C# 类。

XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<SCResponse>
    <link href="http://192.168.6.126:8001/affiliate/account/81/notifications?startRow=2&amp;limit=20" rel="next_page" title="Next"/>
    <link href="http://192.168.6.126:8001/affiliate/account/81/notifications?startRow=1&amp;limit=20" rel="previous_page" title="Previous"/>
    <RecordLimit>20</RecordLimit>
    <Notifications>
        <Notification href="http://192.168.6.126:8001/affiliate/account/81/notifications/24">
            <NotificationDate>2013-03-15T16:41:37-05:00</NotificationDate>
            <NotificationDetails>Notification details 1</NotificationDetails>
            <Status>New</Status>
            <NotificationTitle>Test notification 1</NotificationTitle>
        </Notification>
    </Notifications>
    <RecordsReturned>1</RecordsReturned>
    <StartingRecord>1</StartingRecord>
    <TotalRecords>1</TotalRecords>
</SCResponse> 
```

'Paste as Special' 自动生成的类如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.Web;
using System.Xml.Serialization;

namespace CMINet.Models.notifications
{

/// <remarks/>
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]

// to make it work I must replace the above with:
//    [XmlType]
//    [DataContract(Namespace = "")]

public partial class SCResponse
{

    private SCResponseLink[] linkField;

    private byte recordLimitField;

    private SCResponseNotifications notificationsField;

    private byte recordsReturnedField;

    private byte startingRecordField;

    private byte totalRecordsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("link")]
    public SCResponseLink[] link
    {
        get
        {
            return this.linkField;
        }
        set
        {
            this.linkField = value;
        }
    }

    /// <remarks/>
    public byte RecordLimit
    {
        get
        {
            return this.recordLimitField;
        }
        set
        {
            this.recordLimitField = value;
        }
    }

    /// <remarks/>
    public SCResponseNotifications Notifications
    {
        get
        {
            return this.notificationsField;
        }
        set
        {
            this.notificationsField = value;
        }
    }

    /// <remarks/>
    public byte RecordsReturned
    {
        get
        {
            return this.recordsReturnedField;
        }
        set
        {
            this.recordsReturnedField = value;
        }
    }

    /// <remarks/>
    public byte StartingRecord
    {
        get
        {
            return this.startingRecordField;
        }
        set
        {
            this.startingRecordField = value;
        }
    }

    /// <remarks/>
    public byte TotalRecords
    {
        get
        {
            return this.totalRecordsField;
        }
        set
        {
            this.totalRecordsField = value;
        }
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class SCResponseLink
{

    private string hrefField;

    private string relField;

    private string titleField;

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string href
    {
        get
        {
            return this.hrefField;
        }
        set
        {
            this.hrefField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string rel
    {
        get
        {
            return this.relField;
        }
        set
        {
            this.relField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string title
    {
        get
        {
            return this.titleField;
        }
        set
        {
            this.titleField = value;
        }
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class SCResponseNotifications
{

    private SCResponseNotificationsNotification notificationField;

    /// <remarks/>
    public SCResponseNotificationsNotification Notification
    {
        get
        {
            return this.notificationField;
        }
        set
        {
            this.notificationField = value;
        }
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class SCResponseNotificationsNotification
{

    private System.DateTime notificationDateField;

    private string notificationDetailsField;

    private string statusField;

    private string notificationTitleField;

    private string hrefField;

    /// <remarks/>
    public System.DateTime NotificationDate
    {
        get
        {
            return this.notificationDateField;
        }
        set
        {
            this.notificationDateField = value;
        }
    }

    /// <remarks/>
    public string NotificationDetails
    {
        get
        {
            return this.notificationDetailsField;
        }
        set
        {
            this.notificationDetailsField = value;
        }
    }

    /// <remarks/>
    public string Status
    {
        get
        {
            return this.statusField;
        }
        set
        {
            this.statusField = value;
        }
    }

    /// <remarks/>
    public string NotificationTitle
    {
        get
        {
            return this.notificationTitleField;
        }
        set
        {
            this.notificationTitleField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string href
    {
        get
        {
            return this.hrefField;
        }
        set
        {
            this.hrefField = value;
        }
    }
}

} 
```

问题是，没有一个对象的字段被编组。即使从 WebApi 返回的 XML 肯定有值，调用后字段为空或为零。

可能出了什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:59:25.160

您可能没有在 XML 格式化程序上打开 XmlSerializer。试试这个：

```
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

您还应该检查控制器的 ModelState 属性以了解可能发生的任何反序列化错误。

# xslt - 如何使用 xslt 转义字符串的 html 特殊字符？

> ID：15504296
> 
> 赞同：0
> 
> 时间：2013-03-19T15:55:14.640
> 
> 标签：xslt

我有以下模板：

```
<xsl:template match="questionExplanation">
<span class="questionExplanation">
  <xsl:value-of select="node()" />
</span> 
```

的值`node()`是“输入一个数字 <= 5”我需要转义`<`到`&lt;`（以及所有其他 htmls 特殊字符。

我怎样才能做到这一点？我正在使用 xslt 2.0

谢谢！

# jquery - jQuery缩短代码

> ID：15504300
> 
> 赞同：0
> 
> 时间：2013-03-19T15:55:34.363
> 
> 标签：jquery

我想缩短这段代码，所以我想做 3 或 4 行，

但如果我尝试制作 3 行，则它不起作用。

```
$('#uebersicht').append('<ul data-role="listview" data-split-icon="gear" data-split-theme="d" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow"><li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="false" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li ui-li-has-alt ui-li-has-thumb ui-first-child ui-last-child ui-btn-up-c"><div class="ui-btn-inner ui-li ui-li-has-alt"><div class="ui-btn-text"><a href="#" class="ui-link-inherit"><img class="ui-li-thumb" src='+icerik.Resim+'><h2 class="ui-li-heading">'+moschee+'</h2><p class="ui-li-desc">'+results[0].formatted_address+'</p><p class="ui-li-desc">'+hesapla(meineLongitude,meineLatitude,icerik.Position.Longitude,icerik.Position.Latitude)+'</p></a></div></div><a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop" title="Purchase album" class="ui-li-link-alt ui-btn ui-btn-up-c ui-btn-icon-notext" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="false" data-iconpos="notext" data-theme="c" aria-haspopup="true" aria-owns="#purchase"><span class="ui-btn-inner"><span class="ui-btn-text"></span><span data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="gear" data-iconpos="notext" data-theme="d" title="" class="ui-btn ui-btn-up-d ui-shadow ui-btn-corner-all ui-btn-icon-notext"><span class="ui-btn-inner"><span class="ui-btn-text"></span><span class="ui-icon ui-icon-gear ui-icon-shadow">&nbsp;</span></span></span></span></a></li></ul>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:00:34.687

使用字符转义您的 javascript 换行符`\`，如下所示：

```
$('#uebersicht').append('<ul data-role="lisview" data-split-icon="gear"\
 data-split-theme="d" data-inset="true" class="ui-listview \
ui-listview-inset ui-corner-all ui-shadow">'); 
```

上面是你的长字符串的缩短版本，但你明白了，用它`\`来打破 javascript 新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:02:01.910

当您需要附加多个 HTML 元素时，对其进行排序和清理的最佳方法是以`.append()`这种方式拆分：

```
$('#myID').append('<p>lorem ipsum</p>')
          .append('<p>dolor sit amet...</p>')
          .append('etc...'); 
```

但不是很好附加太多元素...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:09:03.070

将它拆分到任何你想要的地方。只需在任何地方结束字符串，添加一个加号，换行，然后重新开始字符串。例如

```
$('#uebersicht').append(
    '<ul data-role="listview" data-split-icon="gear" ' +
        'data-split-theme="d" data-inset="true" ' +
        'class="ui-listview ui-listview-inset ui-corner-all ui-shadow">' +
        '<li data-corners="false" data-shadow="false" data-iconshadow="true"' +
             'data-wrapperels="div" data-icon="false" data-iconpos="right"' +
             'data-theme="c" class="ui-btn ui-btn-icon-right ui-li ' +
             'ui-li-has-alt ui-li-has-thumb ui-first-child ui-last-child ' +
             'ui-btn-up-c">' +
          '<div class="ui-btn-inner ui-li ui-li-has-alt">' +
          '<div class="ui-btn-text">' +
          '<a href="#" class="ui-link-inherit">' +
          '<img class="ui-li-thumb" src='+icerik.Resim+'>' +
          '<h2 class="ui-li-heading">'+moschee+'</h2>' +
          '<p class="ui-li-desc">' +
              results[0].formatted_address+ 
          '</p> ' +
          '<p class="uii-desc">' +   
            hesapla(meineLongitude, eineLatitude, icerik.Position.Longitude,       
               icerik.Position.Latitude) +
          '</p></a></div></div>' +
          '<a href="#purchase" data-rel="popup" data-position-to="window" ' +
            'data-transition="pop" title="Purchase album" ' +
            'class="ui-li-link-alt ui-btn ui-btn-up-c ui-btn-icon-notext"' +
            'data-corners="false" data-shadow="false" data-iconshadow="true" ' +
            'data-wrapperels="span" data-icon="false" data-iconpos="notext" ' +
            'data-theme="c" aria-haspopup="true" aria-owns="#purchase"> ' +
          '<span class="ui-btn-inner">' +
          '<span class="ui-btn-text"></span>' +
          '<span data-corners="true" data-shadow="true" data-iconshadow="true" ' +
             'data-wrapperels="span" data-icon="gear" data-iconpos="notext" ' +
             'data-theme="d" title="" class="ui-btn ui-btn-up-d ui-shadow ' +
             'ui-btn-corner-all ui-btn-icon-notext">' +
          '<span class="ui-btn-inner">' +
          '<span class="ui-btn-text"></span>' +
          '<span class="ui-icon ui-icon-gear ui-icon-shadow">&nbsp;' +
          '</span></span></span></span></a></li></ul>'
); 
```

我本可以做得更干净，缩进更好，但你应该明白了。据我了解，这比`append`在每一行上调用要好 - 每个附加都需要相对大量的时间来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:12:31.650

可能最干净的解决方案是制作一个 jquery 容器，通过 append/appendTo 添加所有元素，最后将整个对象插入 dom 以避免过多的 dom 操作/重绘。

但是对于您的 html 字符串，这可能会导致脚本很长......

```
var $list = $('<ul>');

$list.data({
    'role': 'listview',
    'split-icon': 'gear',
    // etc...
}).addClass('ui-listview ui-listview-inset ui-corner-all ui-shadow');

$li = $('<li>');
// take the base object and clone it if used multiple times
$li.clone().data({
    // fill up data, add classes etc.
}).addClass('classes').appendTo($list);

// and so on with each element, use all the beautiful jquery functions available
// there's no dom manipulation to this point, performance still fine
// now in the end, insert the object into the dom:
$list.appendTo('#uebersicht'); 
```

**也许对你来说更好的方法：**

```
var html = '';

html += '<ul data-role="listview" data-split-icon="gear" data-split-theme="d" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">';
html += '<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="false" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li ui-li-has-alt ui-li-has-thumb ui-first-child ui-last-child ui-btn-up-c">';
html += '<div class="ui-btn-inner ui-li ui-li-has-alt">';

// etc. just make a line for each tag or split it if too long

$('#uebersicht').append(html); 
```

# c# - 尝试 Windows 授权但回退到自定义登录

> ID：15504302
> 
> 赞同：0
> 
> 时间：2013-03-19T15:55:42.040
> 
> 标签：c#, iis-7.5, httpmodule

我正在使用在以前版本的 IIS 中工作的模块。

[http://www.velocityreviews.com/forums/t94333-re-how-do-i-create-a-httpmodule-to-authenticate-in-aspnet.html](http://www.velocityreviews.com/forums/t94333-re-how-do-i-create-a-httpmodule-to-authenticate-in-aspnet.html)

由于集成框架，它不再工作，我无法将其改回经典。

客户需要尝试访问该网站，如果他们是有权访问该网站的 Windows 或域用户，根据我们的数据库，他们将自动登录。如果没有，他们将被带到登录页面。

整个站点运行在每次调用动态生成的 default.aspx 页面上，因此我们不能有单独的登录页面。

有谁知道在 IIS 7/7.5 中实现此功能的模块或方法？

编辑：下面是模块生成的 javascript。好像我总是跳到我返回的位置 location.replace("/default.aspx?abortScreening=true");

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Loading ...</title>
</head>
<body>
<script type="text/javascript" language="javascript">
    function canAuthenticate() 
    { 
        try 
        {
        alert("Try canAuthenticate");
            var dom = new ActiveXObject("Msxml2.DOMDocument.4.0");
            dom.async = false;
            dom.load("CredentialsScreeningRequiresAuthentication.aspx?ReturnUrl=");
        }
        catch(e)
        {
            return false;
        }
    return true;
    }
    if (document.cookie.length != 0)
    {
        if (canAuthenticate())
        {
            location.reload();
        }
        else 
        { 
            location.replace("/default.aspx");
        }
    }
    else
    {
        location.replace("/default.aspx?abortScreening=true");
    }
</script>
<noscript>
"Your browser does not support JavaScript or has scripting disabled, which prevents credentials screening from working."
 Please click <a href="/default.aspx?abortScreening=true">here</a> to go to the requested page without authentication.
</noscript>
</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:49:50.790

如果不使用单独的登录页面，这根本无法完成。如果可以的话，那里会有解决方案，正如您可能通过谷歌搜索找到的那样，找不到任何解决方案。

你有三个选择。返回经典模式，使用单独的登录页面，或者不使用此功能。

# php - 在 html 文档中呈现为文本的 PHP 函数的内容

> ID：15504310
> 
> 赞同：0
> 
> 时间：2013-03-19T15:56:09.167
> 
> 标签：php, typo3, templavoila

**问题：** 用户函数的内容呈现为纯文本。

这是我的`class.aktionen.php`：

```
<?

class user_aktionen {

  private $conf;

  function main($content,$conf) {
    $this->conf = $conf;

    return 'test';
  }

}
?> 
```

这是我的 TS：

```
includeLibs.user_aktionen = fileadmin/templates/class.aktionen.php

lib.offers = USER_INT
lib.offers {
  userFunc = user_aktionen->main
} 
```

我已经`lib.offers`用 TemplaVoila 映射到一个`div`元素上。我的 HTML 文档的渲染输出是

```
<?

class user_aktionen {

  private $conf;

  function main($content,$conf) {
    $this->conf = $conf;

    return 'test';
  }

}
?><?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="de-DE" lang="de-DE" xmlns="http://www.w3.org/1999/xhtml"> 
```

我正在使用 Templavoila 1.8.0 和 Typo3 4.7.10。

我做错了什么？

是权限问题吗？我应该改用 Templavoila 1.7 吗？我试过

```
$TYPO3_CONF_VARS['FE']['debug'] = '1';
$TYPO3_CONF_VARS['SYS']['devIPmask'] = '127.0.0.1'; // your real IP here
$TYPO3_CONF_VARS['SYS']['displayErrors'] = '2'; 
```

在 .htaccess 中，`php_flag display_errors on`但我根本没有看到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:10:16.927

感谢查尔斯这是解决方案：

`<? ?>`服务器上未配置短标签 ( )。切换到`<?php ?>`解决问题。

# mysql - 为什么人们说使用存储过程可能会减少 SQL 注入攻击？

> ID：15504314
> 
> 赞同：-3
> 
> 时间：2013-03-19T15:56:16.660
> 
> 标签：mysql, sql, sql-injection

它是否仍然对 SQL 注入开放，因为我们还需要从用户那里获取输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:59:06.000

我认为您将存储过程与准备好的语句混淆了。

在使用准备好的语句时，您可以参数化传递给语句的值，从而消除通过 SQL 注入实际更改为基本查询结构的能力。

存储过程仍然容易受到注入攻击，具体取决于过程本身内部发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:04:12.587

您应该在此处使用 PDO 来保护您的请求
更多信息：[http ://www.php.net/pdo](http://www.php.net/pdo)

PDO 做出准备好的陈述

# java - 一段时间后使用处理程序发送短信？

> ID：15504317
> 
> 赞同：0
> 
> 时间：2013-03-19T15:56:26.527
> 
> 标签：java, android, sms, handler

我是一名初学者程序员，如果没有按下按钮，我会在一段时间后尝试发送短信。我试图通过一个处理程序来做到这一点，但我知道我试图说明如果没有按下按钮是我的问题所在......

```
Handler handler = new Handler();
    handler.postDelayed(new Runnable() {

        public void run() {

            if (TakenButton.isActivated() == false) {
                sendSMS(number, "Medication Not Taken");

            }
        }
    }, 20000); 
```

消息在 20 秒后发送，但即使按下按钮也会发送。如果有人可以解释我如何说明按钮是否未按下以及我是否将其放置在正确的位置，我会非常感激？

我现在已经把它改成了这个，我现在没有收到任何消息说没有服用药物，但是我服用的药物有效？？？

```
public void onClick(View v) {
            sendSMS(number, "Medication Taken");
            isActivated = true;
        }
    });

    Handler handler = new Handler();
    handler.postDelayed(new Runnable() {

        public void run() {

            if(isActivated = false){
                sendsms();
            }

        }
        private void sendsms() {
            sendSMS(number, "Medication Not Taken");

        }
    }, 10000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:59:13.703

该代码可以工作，并进行一些更改。将处理程序变量保存在类成员中（而不是将其丢弃），当按下按钮时，从处理程序中删除任何未决消息。

只要手机不进入睡眠状态，这将起作用。如果您的超时时间很长并且手机在需要处理时可能处于睡眠状态，则您需要设置警报。当您想要延迟几秒钟而不是几分钟或更长时间时，这样的处理程序很有用。

# ruby-on-rails - 如何修复迁移，以便 rake db:migrate 再次工作

> ID：15504319
> 
> 赞同：0
> 
> 时间：2013-03-19T15:56:30.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

最初的问题是某些迁移文件最初是在机器上运行的（如生产）。后来，一些迁移​​不知何故被删除，无法恢复。

因此，为了让新机器启动并运行该应用程序，我必须手动重新创建丢失的迁移。

因此，已经执行了已删除迁移的机器现在正在抛出这些错误。

`PG::Error: ERROR: relation "some_relation" already exists`

我不能只是`db:reset`生产数据库，因为我不能丢失这些数据。

当我运行时，`rake db:test:prepare`会出现这样的情况：

```
You have 4 pending migrations:
  20130112203055 CreateSomeTable
  20130113180203 AddSomeColumnToTable
  20130113204017 ChangeSomeOtherColumns
  20130311203729 CreateAnotherTable
Run `rake db:migrate` to update your database then try again. 
```

显然，运行`db:migrate`会给出如上所述的 PG::Error。问题是架构更改已经通过删除的迁移完成。上述“待定”迁移必须在事后重新创建。

有没有办法解决这个问题，所以`db:migrate`再次起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:13:11.650

试试下面的，

```
rake db:migrate:down VERSION=20121031XXXXXXXX
rake db:migrate 
```

`20121031XXXXXXXX`迁移名称的日期戳在哪里。换句话说，您将拥有一个名为`20120410214815_some_relation.rb`(like) 的迁移，然后从文件名中复制日期戳并将其粘贴到命令中。这是[Rails Guide on Migrations 供参考](http://guides.rubyonrails.org/migrations.html)。

# drupal-7 - 如何从引用的节点创建视图

> ID：15504321
> 
> 赞同：1
> 
> 时间：2013-03-19T15:56:36.610
> 
> 标签：drupal-7, drupal-views

我遇到了 Drupal 7 Views 关系/上下文过滤器的问题。

让我用一个例子来解释它。我想做一个相册。

我有一个内容类型“猫”。这种内容类型有一些字段，如名称、重量等。

我有第二种内容类型“照片”。此内容类型有一个图像字段和一个名为“猫”的字段。字段“cats”是对一个或多个“cat”类型节点的实体引用。（一张图片上可以有多只猫）。

在“猫”类型的节点视图上，我想显示一个视图块，其中包含引用当前节点的所有照片。

这就是我卡住的地方。

我尝试了多种关系和上下文过滤器的组合。大多数情况下，我的视图没有显示任何不引用节点的照片或照片。

如果有人能解释我如何构建我的观点，那对我来说将是一个很大的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:16:24.307

您需要选择您的关系为：

```
Content-<cat-reference-field-name> - reverse 
```

**在您的“关系**”中应该有这样的选项。只需确保您选择了 cat 字段和“ **-reverse** ”选项。

![在此处输入图像描述](../Images/af5025110645b351ef5caffaabebdede.png)

其次，您需要添加一个“上下文过滤器”。将其设置为“内容：cat-field”，并将默认值设置为“**来自 URL 的内容 ID** ”。在顶部，确保从下拉列表中选择已创建的关系：

![在此处输入图像描述](../Images/cab9a92d707ea41f9038bf8035b5646d.png)

最后 - 在您希望出现在“字段”部分的图像字段上，但也要为这些字段*选择创建的关系*（就像您为上下文过滤器所做的那样）！

保存，如果您将此块放在猫页面上，它应该可以工作。让我们知道是否有！

# python - Python：绘制位置数据的气泡图

> ID：15504331
> 
> 赞同：2
> 
> 时间：2013-03-19T15:57:00.170
> 
> 标签：python, matplotlib, data-visualization

我有一个带有一对元组的列表，用于表示 GPS 日志位置的 x 和 y 坐标。这就像 [(x1, y1), (x2,y2), (x3, y3)....]。

列表中的相同 (x,y) 位置可以有多次重复。现在，我要做的是绘制一个代表这些位置的图形，并显示相对频率，即最常访问的地方。我猜想用气泡大小表示该地点被访问的次数的气泡图或热图将是最有用的方式。

使用 matplotlib 库在 python 中执行此操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:14:46.013

使用[collections.Counter](http://docs.python.org/2.7/library/collections#collections.Counter)计算对的频率`(x,y)`。使用[plt.scatter](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.scatter)的`s`参数来控制大小，使用`c`参数来控制颜色。`s`和参数都`c`可以将序列作为参数。

```
import matplotlib.pyplot as plt
import collections
import numpy as np

data = [tuple(pair)
        for pair in np.random.uniform(5, size=(20,2))
        for c in range(np.random.random_integers(50))]
count = collections.Counter(data)

points = count.keys()
x, y = zip(*points)
sizes = np.array(count.values())**2
plt.scatter(x, y, s=sizes, marker='o', c=sizes)
plt.show() 
```

![在此处输入图像描述](../Images/75a4c73f20e989214b46cf4218e39c42.png)

# sql - 带条件逻辑的 SQL

> ID：15504333
> 
> 赞同：4
> 
> 时间：2013-03-19T15:57:00.840
> 
> 标签：sql, sql-server

所以我有一个查询，它当前返回一个 1 和 0 的表，如下所示

```
1 0 0
1 1 0
0 0 1
0 1 1
1 1 0
1 1 1 
```

但是，我想修改我的查询，以便对于具有多个 1 的行，我们只保留行中的第一个 1。例如，我想将 (1 1 1) 转换为 (1 0 0)，将 (0 1 1) 转换为 (0 1 0) 等等。似乎 IF 逻辑将是最后的手段。

大家会推荐什么？我可以做一个案例陈述，其中一列中的值取决于另一列值吗？

换句话说，“COLUMN 2 = CASE WHEN COLUMN 1 = 1 and COLUMN 2 = 1, then 0...etc?”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:02:37.867

对于三列，逻辑是：

```
select col1,
       (case when col1 = 1 then 0 else col2 end) as col2,
       (case when col1 = 1 or col2 = 1 then 0 else col3 end) as col3
from query q 
```

如果你有更多的列，我会采取不同的方法：

```
select col1,
       (case when firstOne < 2 then 0 else col2 end) as col2,
       (case when firstOne < 3 then 0 else col3 end) as col3,
       (case when firstOne < 4 then 0 else col4 end) as col4,
       . . .
from (select q.*,
             (case when col1 = 1 then 1
                   when col2 = 1 then 2
                   when col3 = 1 then 3
                   . . .
              end) as FirstOne
      from query q
     ) q 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:19:28.403

作为条件构造的替代方案，您可以执行以下操作：

```
select a, b * (1-a) as [b'], c * (1-b) * (1-a) as [c'] 
from your_table 
```

这确实取决于 a、b 和 c 列，每个列只允许值 0 和 1。

[（这里](http://sqlfiddle.com/#!3/014de/108)的例子。）

# python - 如何修改python复数

> ID：15504334
> 
> 赞同：2
> 
> 时间：2013-03-19T15:57:03.597
> 
> 标签：python, complex-numbers, readonly

创建后，Python 复数是只读的。

```
>>> x = complex(1,1)
>>> x
(1+1j)
>>> x.real=2
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: readonly attribute 
```

如何在 Python 中修改复数而不构造新的复数？这似乎是一个不必要的限制。任何想法为什么复杂是这样实现的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:00:02.103

Python 中的所有数字（以及字符串）都是不可变的。这使得计算在几个方面变得更容易（即，它使 Python 解释器的性能更高）并且通常不会造成太大的麻烦。

要重用另一个值的值，您当然可以这样做：

```
x = complex(2, x.imag) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:32:18.110

Python 的不可变数字有几个原因：

1）它通过允许多个变量指向同一个对象来节省内存：

```
>>> x = 3 + 4j
>>> y = x
>>> x is y
True 
```

2) 不变性与哈希性密切相关。它使数字适合用作字典键和集合的元素：

```
>>> d = {}
>>> d[3 + 4j] = 'red'
>>> d[3 + 4j]
'red' 
```

3) 使用 Python 的自定义内存管理，这些对象往往会被重复使用，而不是被重复分配和释放。这降低了“创建新对象”的成本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:05:58.343

*简单来说：*

> 如何在 Python 中修改复数而不构造新的复数？

你没有。您可以使用旧复数的元素（如果您发现自己经常这样做，您可以编写一个函数来这样做）或创建自己的复数类。

> 任何想法为什么复杂是这样实现的？

复数是一种数字类型，并且与所有 Python 数字类型一样，是不可变的。

*更长的解释：*

您不能修改 a `int`、 a `float`、 a`namedtuple`或 a ，`frozenset`就像您不能修改复数一样。复数是不可变的，它具有优势（其中最重要的一个是您可以将复数用作字典键）。您对复数执行的大多数操作仍然是数学运算，因此具有不变性（与所有其他数字类型一样）。如果不是这种情况，请考虑创建自己的类，可能带有`__slots__`属性。

我的建议：一些开发人员力求其数据结构的不变性。它大大降低了编程和调试的复杂性。python中的复数设计得很好。

# c# - C# - Excel 2013 如何更改图表样式

> ID：15504337
> 
> 赞同：3
> 
> 时间：2013-03-19T15:57:07.890
> 
> 标签：c#, excel, automation, office-interop

我正在尝试更改 excel 2013 中图表的样式，但它只会改变颜色：

```
Range chartRange;
ChartObjects wsCharts = (ChartObjects)workSheet.ChartObjects(Type.Missing);
ChartObject myChart = (ChartObject)wsCharts.Add(0, 0, 900, 500);
Chart workChart = myChart.Chart;

chartRange = workSheet.get_Range("A1", "D12");
workChart.SetSourceData(chartRange, Type.Missing);
workChart.ChartType = XlChartType.xlColumnClustered; 
```

现在图表如下所示： ![原来的](../Images/e8315b34a7da197ccfec2541acc2437c.png)

然后`workChart.ChartStyle = 8;`将栏的颜色更改为： ![新的](../Images/53c5668238ba9d00fc716e81a6005979.png)

而不是图表的样式： ![在此处输入图像描述](../Images/feabbb5c46c1bb264707fa36ac96eeca.png)

我也尝试过使用`ChartWizard`方法和其他属性，`Chart`但到目前为止没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T08:48:24.103

尝试

```
workChart.ChartStyle = 209; 
```

# mongodb - Mongodb 进入休眠状态并重试。之后的总睡眠时间 = 38ms 这次：100ms

> ID：15504339
> 
> 赞同：0
> 
> 时间：2013-03-19T15:57:24.583
> 
> 标签：mongodb, tomcat, mongodb-java, spring-data-mongodb

我可以在我的 tomcat 日志中看到以下内容，但不明白为什么以及如何解决：

> 2013 年 3 月 19 日下午 3:50:01 com.mongodb.DBPort _open 严重：进入睡眠状态并重试。之后的总睡眠时间 = 38ms 这次：100ms

我正在使用java，spring-data。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:55:48.027

这是[MongoDB Java 驱动程序](http://api.mongodb.org/java/2.11.0/)记录的消息，由[com.mongodb.DBPort](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/com/mongodb/DBPort.java#L246) - 表明它无法连接您的 MongoDB 实例（无法建立套接字），但由于[autoConnectRetry](http://api.mongodb.org/java/2.11.0/com/mongodb/MongoOptions.html#autoConnectRetry)选项设置为 true ，因此将在 X 毫秒内重试连接. 您可以设置[maxAutoConnectRetryTime](http://api.mongodb.org/java/2.11.0/com/mongodb/MongoOptions.html#maxAutoConnectRetryTime)来控制 MS 中花费重试打开与同一服务器的连接的最长时间。默认为 0，这意味着如果 autoConnectRetry 开启，则使用默认的 15 秒。
在看到此消息之前，您应该`"connect fail to : ..."`在日志文件中看到一条消息。
您可能应该检查您是否为连接配置了正确的主机和端口，没有阻止连接的防火墙并且服务器已启动。
如果此消息出现一次但应用程序行为正确，则意味着驱动程序在连接数据库时遇到临时问题，但在等待 X 毫秒后设法重新连接。

# css - webkit 无法在 chrome 上运行

> ID：15504343
> 
> 赞同：1
> 
> 时间：2013-03-19T15:57:33.727
> 
> 标签：css, webkit

直到上个月左右，一切都运行良好，但是自从 chrome 或 webkit 更新以来，似乎出现了问题，而我没有更改代码中的任何内容。

我进行了几次潜水，并使用 webkit css 使它们四舍五入，一个月以来，它们在 chrome 上不再四舍五入，在 safari 上运行良好。

```
.hostpie {
  -webkit-transform:rotate(0deg);
  width:148px;
  height:300px;
  -moz-border-radius:150px;
  -webkit-border-radius:150px;
  border-radius:150px;
  -webkit-border-radius:150px 0 0 150px;
  -webkit-transform-origin:right center;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:09:57.100

供应商前缀属性应该出现*在*CSS 属性之前，因为即使您的新版 Chrome 支持无前缀版本，它也会使用`-webkit-border-radius: 150px 0 0 150px;`，因为它出现在最后。将官方 CSS 属性放在最后可确保正确支持它的浏览器应用它。

并且正在做`-webkit-border-radius: 150px;`两`-webkit-border-radius: 150px 0 0 150px;`件不同的事情。后者针对左上角和左下角，而前者针对所有四个角。我不明白为什么你有两个？

尝试更改顺序

```
.hostpie {
 width:148px;
 height:300px;
-moz-border-radius:150px;
-webkit-border-radius:150px 0 0 150px; /* top left -- bottom left */
 border-radius:150px; /* CSS Property last */
} 
```

[供应商前缀和级联](http://emps.l-c-n.com/notebook/css-vendor-prefixes-and-the-cascade)

# php - 函数 mcrypt_decrypt() 仅适用于短字符串

> ID：15504345
> 
> 赞同：0
> 
> 时间：2013-03-19T15:57:34.997
> 
> 标签：php, ios, objective-c, encryption

我目前在 iOS 中加密并在 PHP 中解密。如果我正在加密/解密的字符串长度小于 16 个字符，它工作正常。

要加密的 iOS 代码：

```
 - (NSData *)AES128Encrypt:(NSData *)this
{
    // ‘key’ should be 16 bytes for AES128
    char keyPtr[kCCKeySizeAES128 + 1]; // room for terminator (unused)
    bzero( keyPtr, sizeof( keyPtr ) ); // fill with zeroes (for padding)
    NSString *key = @"1234567890123456";
    // fetch key data
    [key getCString:keyPtr maxLength:sizeof( keyPtr ) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [this length];

    //See the doc: For block ciphers, the output size will always be less than or
    //equal to the input size plus the size of one block.
    //That’s why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc( bufferSize );

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt( kCCEncrypt, kCCAlgorithmAES128, kCCOptionECBMode | kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES128,
                                          NULL /* initialization vector (optional) */,
                                          [this bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesEncrypted );
    if( cryptStatus == kCCSuccess )
    {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free( buffer ); //free the buffer
    return nil;
} 
```

PHP代码解密：

```
function decryptThis($key, $pass)
{

    $base64encoded_ciphertext = $pass;

    $res_non = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $base64encoded_ciphertext, MCRYPT_MODE_CBC);

    $decrypted = $res_non;
    $dec_s2 = strlen($decrypted);

    $padding = ord($decrypted[$dec_s2-1]);
    $decrypted = substr($decrypted, 0, -$padding);

    return  $decrypted;
} 
```

如果解密的字符串超过 16 个字符，PHP 只返回*@"\n\n"*。*但是，像 ' what* '这样的短字符串会被正确解密，并且 PHP 返回*@"what\n\n"*。这里发生了什么？我希望能够解密 500 多个字符长的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:32:22.463

您在 iOS 中使用 ECB 模式，在 PHP 中使用 CBC。此外，PHP 不会检测到不正确的填充，因此如果（不正确的）填充纯文本的最后一个字节具有很高的值，它可能会生成一个空字符串。

# asp.net-mvc - ModelState.AddModelError - 未显示错误

> ID：15504348
> 
> 赞同：4
> 
> 时间：2013-03-19T15:57:38.260
> 
> 标签：asp.net-mvc, asp.net-mvc-3, modelstate

在我的控制器中捕获到异常后，我想为电子邮件字段设置错误消息：

```
...
catch (EmailAlreadyExistsException emailAlreadyExistsException)
{
    ModelState.AddModelError("Useraccount_Email", "This is an error message");

    RegisterViewModel viewModel = new RegisterViewModel
    {
        Useraccount = useraccount,
        InformationMessages = InformationMessageHelper.GetInformationMessages()
    };
    return PartialView(viewModel);
}
... 
```

错误消息现在应该显示在我的视图中：

```
@using (Ajax.BeginForm("Register", new AjaxOptions { HttpMethod = "Post", OnSuccess = "registerAjaxSuccess" }))
{
    @Html.ValidationSummary(true)        
    <div class="ym-grid">
        <div class="ym-g33 ym-gl">
            <div class="ym-gbox">
                @Html.LabelFor(model => model.Useraccount.LastName)
            </div>
...
    <div class="ym-grid">
        <div class="ym-g33 ym-gl">
            <div class="ym-gbox">
                @Html.LabelFor(model => model.Useraccount.Email)
            </div>
        </div>
        <div class="ym-g33 ym-gl">
            <div class="ym-gbox">                  
                @Html.EditorFor(model => model.Useraccount.Email, new { required = "required" })                 
            </div>
        </div>
        <div class="ym-g33 ym-gr">
            <div class="ym-gbox">
               @Html.ValidationMessageFor(model => model.Useraccount.Email)
            </div>
        </div>
    </div>
... 
```

但在这种情况下没有显示任何内容。：（ 我做错什么了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T16:25:19.317

添加模型错误时，使用复杂对象时正确的分隔符是点`.`而不是 unsercore`_`

所以下面的调用应该有效：

```
ModelState.AddModelError("Useraccount.Email", "This is an error message"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T05:03:08.760

请使用 ModelState.AddModelError(string.Empty, "This is an error message"); 和@Html.ValidationSummary(true);

这将起作用。

# iphone - 我有一个标签栏，我试图检测它是否在视图控制器 2 内被触摸

> ID：15504349
> 
> 赞同：1
> 
> 时间：2013-03-19T15:57:42.270
> 
> 标签：iphone, ios, objective-c, xcode, uitabbarcontroller

基本上我在视图控制器中有一个标签栏。我正在尝试检测是否在视图控制器 2 中触摸了此 tabaritem。执行此类任务的最佳方法是什么？如果您愿意，我可以发布更具体的代码。

视图控制器 1

```
 TUHomeViewController *homeViewController = [[TUHomeViewController alloc] initWithNibName:nil bundle:nil];
UINavigationController *homeNavigationController = [[UINavigationController alloc] initWithRootViewController:homeViewController];
homeNavigationController.tabBarItem = [[DSTabBarItem alloc] initWithFinishedSelectedImage:[UIImage imageNamed:@"home"] 
                                                            finishedUnselectedImage:[UIImage imageNamed:@"home1"]
                                                                                 iconSize:CGSizeMake(76, 59)
                                                                                tag:0];
[tabBarViewControllers addObject:homeNavigationController]; 
```

视图控制器 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:17:52.197

您应该使用 UITabBarControllerDelegate。请参阅：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html)

更具体地说，看

```
tabBarController:didSelectViewController: 
```

“告诉代理用户在标签栏中选择了一个项目。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:21:17.670

使用委托 didselectviewcontroller 并将 tabbarcobtroller 的委托给自己

# javascript - 使用html在Windows 7中的触摸显示器上打开文本输入？

> ID：15504350
> 
> 赞同：0
> 
> 时间：2013-03-19T15:57:46.377
> 
> 标签：javascript, jquery, html, touch, nui

不知道这个问题是否有人提出来，但是快速搜索并没有找到任何感兴趣的东西。我的问题是关于使用连接到 Windows 7 显示器的触摸屏，例如，如果您使用 google crome 并单击地址字段（使用触摸显示器），则会出现键盘符号（见图）。我可以在 html 中执行此操作吗？假设当我单击网页中的文本输入字段时，文本输入字段下会出现相同的符号？

提前致谢

![在此处输入图像描述](../Images/6249299e4348d47af75f8b3e7cc20447.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:44:40.253

使用热虚拟键盘找到了我的问题的首选解决方案。

[http://www.youtube.com/watch?v=vcYEFk6_5GQ](http://www.youtube.com/watch?v=vcYEFk6_5GQ)

# makefile - Makefile：测试目录是否存在并找到第一个

> ID：15504359
> 
> 赞同：4
> 
> 时间：2013-03-19T15:58:01.363
> 
> 标签：makefile

我正在使用 makefile 来编译 MATLAB/C 项目。MATLAB 通常可以安装到多个标准位置，具体取决于其版本，例如`/Applications/MATLAB_2012b.app`、`/Applications/MATLAB_2013a.app`等。

什么是最简单的方法来查看这些路径是否存在，一个接一个，并采取第一个找到的？我至少要测试五个值。我找到了`$(wildcard filename)`语法，但我想知道是否有比一一写出更短的方法。

* * *

根据要求进行澄清。我可以拼凑一些有用的东西，但我确信这远不是最好/最简洁的方法。有没有更好的办法？

```
ifeq ($(MATLAB),)
ifneq ($(wildcard /Applications/MATLAB_2011b.app),)
    MATLAB = /Applications/MATLAB_2011b.app
endif
endif

ifeq ($(MATLAB),)
ifneq ($(wildcard /Applications/MATLAB_2012a.app),)
    MATLAB = /Applications/MATLAB_2012a.app
endif
endif

ifeq ($(MATLAB),)
ifneq ($(wildcard /Applications/MATLAB_2012b.app),)
    MATLAB = /Applications/MATLAB_2012b.app
endif
endif

ifeq ($(MATLAB),)
ifneq ($(wildcard /Applications/MATLAB_2013a.app),)
    MATLAB = /Applications/MATLAB_2013a.app
endif
endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:25:39.623

如果存在，您可以获得第一个这样的目录

```
MATLAB_DIR := $(firstword $(wildcard /Applications/MATLAB_*.app)) 
```

如果不存在，变量将为空

```
ifeq (,$(MATLAB_DIR))
  $(error Matlab not found)
endif 
```

如果您的路径有空格，则可以改用 shell。像这样的东西可能会起作用：

```
MATLAB_DIR := $(shell ls -d /Applications/MATLAB_*.app | tail -n 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:24:08.107

为了回答您关于文件/目录名称中的空格的问题，大多数 Makefile 函数不处理文件名中的空格，并且大多数函数甚至不尊重`\`转义空格的方式。

`$@`像,`$<`和`$%`函数这样的变量似乎很少`wildcard`将转义序列正确地处理`\`为空格，但大多数其他 makefile 变量和函数像`firstword`等。无法处理空格。

假设您在通配符中找到一个有效目录，则无法区分列表中的 2 个有效目录与路径中带有空格的单个目录。

如果您使用的是 Makefile，我建议您尽可能避免在路径中使用空格。

但是总有解决方法；）假设您处于*nix 环境中，`find`并且`sort`命令可用，这似乎可行。

```
BASE_DIR_NAME := .
MATLAB_DIR := $(subst $(NULL) ,\ ,$(shell find $(BASE_DIR_PATH) -mindepth 1 -maxdepth 1 -name 'MATLAB_*.app' -type d -print | sort | head -1))

default:
    @echo MATLAB_DIR="$(MATLAB_DIR)"
    ls -l $(MATLAB_DIR)

.PHONY: default 
```

这是目录结构和 Makefile 的输出：

```
$ ls -l
total 16
-rw-r--r-- 1 ash users  236 Mar 20 01:15 Makefile
drwxr-xr-x 2 ash users 4096 Mar 20 01:13 MATLAB_ a.app
drwxr-xr-x 2 ash users 4096 Mar 20 01:13 MATLAB_ b.app
drwxr-xr-x 2 ash users 4096 Mar 20 01:13 MATLAB_ c.app

$ find . -type f
./Makefile
./MATLAB_ a.app/file1
./MATLAB_ b.app/file2

$ make
MATLAB_DIR=./MATLAB_\ a.app
ls -l ./MATLAB_\ a.app
total 0
-rw-r--r-- 1 ash users 0 Mar 20 01:13 file1 
```

# sql - 只查询当月数据

> ID：15504363
> 
> 赞同：1
> 
> 时间：2013-03-19T15:58:13.920
> 
> 标签：sql, tsql, sql-server-2005, ssms

我有一个简单的 SQL 查询，如下所示：

```
select   ProjectNo,
         CostCat,
         SummaryCostCat,
         CreditorEmployeeName,
         UnitCost,
         TotalCost,
         TransactionDate
from dbo.NGPCostPosition 
```

这为我提供了如下数据选择：

![在此处输入图像描述](../Images/3069f34aa1daa0764b4c97d66d90eee4.png)

我想做的是在我的数据中创建一个名为“CurrentValue”的新列，该列将根据当前月份的交易日期计算每个 TotalCost 值。

理想情况下，这会随着我进入新的一个月而改变。

这方面的一个例子是下图： -

![在此处输入图像描述](../Images/30bc1e831921361f6078efd53965ab26.png)

其中 CurrentValue 表示当前月份的数字。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T16:00:48.667

这将使用索引，与“技巧”不同，将日期时间转换为字符串然后返回日期，或者`DATEPART`针对您的列使用。

```
WHERE TransactionDate >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)
AND TransactionDate < DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE())+1, 0); 
```

更整洁？

```
DECLARE @ms SMALLDATETIME, @me SMALLDATETIME;
SET @ms = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0);
SET @me = DATEADD(MONTH, 1, @ms);

SELECT
...
WHERE TransactionDate >= @ms AND TransactionDate < @me; 
```

随着需求的不断变化，如何使用上面显示的@ms/@me 变量，然后：

```
CurrentValue = CASE 
  WHEN TransactionDate >= @ms AND TransactionDate < @me
  THEN TotalCost END 
```

另请注意，`TransactionDate`如果您要执行某种聚合，则不应在您的分组列中。如果您向我们展示您真正想要的结果，我们可以编写您的整个查询 - 乍一看您的列列表和分组并没有真正意义，因此根据您的实际问题，我掩盖了这些，以便我们可以专注于实际`WHERE`条款.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:01:55.620

您可以使用 DATEPART 函数检查月份和年份：

```
WHERE DATEPART(month, GETDATE()) = DATEPART(month, Date)) 
AND (DATEPART(year, GETDATE()) = DATEPART(year, Date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:39:50.063

```
select   ProjectNo,
         CostCat,
         SummaryCostCat,
         CreditorEmployeeName,
         UnitCost,
         TotalCost,
         TransactionDate,
         CASE WHEN DATEPART(month, TransactionDate) = DATEPART(month, GETDATE()) AND
                   DATEPART(year, TransactionDate) = DATEPART(year, GETDATE()) THEN
                     TotalCost
               ELSE NULL
          END AS CurrentValue
from dbo.NGPCostPosition 
```

# javascript - HTML5 画布 - drawImage 并不总是绘制图像

> ID：15504370
> 
> 赞同：8
> 
> 时间：2013-03-19T15:58:30.607
> 
> 标签：javascript, html5-canvas, drawimage

每次用户按下按钮时，我都会在画布上绘图，但有时图像不会在画布上绘制。我认为这可能是在 context.drawimage 函数运行之前没有及时加载图像，因为有时会绘制一些较小的文件。我已经使用了控制台并检查了资源，所以这是我能想到的唯一问题。

我该如何避免这个问题？

这是我的 Javascript 代码。

```
var canvas = document.getElementById("myCanvas");
var context = canvas.getContext("2d");

var questionbg = new Image();
var answerbg = new Image();

//this code is inside a function that is called each time a user presses a button
if(questiontype == "text"){
    questionbg.src = "./resources/textquestionbg.png";
    context.drawImage(questionbg, 0, 0);
    }
//if image question
else if(questiontype == "image"){
questionbg.src = "./resources/imageaudiovideoquestionbg.png";
context.drawImage(questionbg, 0, 0);
}
//if audio question
else if(questiontype == "audio"){
questionbg.src = "./resources/imageaudiovideoquestionbg.png";
context.drawImage(questionbg, 0, 0);
}
//else it is a video question
else{
questionbg.src = "./resources/imageaudiovideoquestionbg.png";
context.drawImage(questionbg, 0, 0);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T16:02:29.560

您应该检查图像是否已加载。如果没有，则监听 load 事件。

```
questionbg.src = "./resources/imageaudiovideoquestionbg.png";
if (questionbg.complete) {
    context.drawImage(questionbg, 0, 0);
} else {
    questionbg.onload = function () {
        context.drawImage(questionbg, 0, 0);    
    };
} 
```

* * *

[MDN](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images)（Mozilla Doc，顺便说一句，很好的来源）建议：

```
function draw() {
  var ctx = document.getElementById('canvas').getContext('2d');
  var img = new Image();
  img.onload = function(){
    ctx.drawImage(img,0,0);
    ctx.beginPath();
    ctx.moveTo(30,96);
    ctx.lineTo(70,66);
    ctx.lineTo(103,76);
    ctx.lineTo(170,15);
    ctx.stroke();
  };
  img.src = '/files/4531/backdrop.png';
} 
```

显然，您不想应用描边或填充。但是，想法是一样的。

# c# - 如何通过链接 youtube 下载内容帖子

> ID：15504372
> 
> 赞同：0
> 
> 时间：2013-03-19T15:58:34.047
> 
> 标签：c#, windows-8

我正在开发一个适用于 Windows 8 的应用程序，该应用程序从博客 (wordpress RSS ) 下载内容。内容是带有标题和 youtube 链接的帖子。如何执行下载？

这个应用程序需要一个下载博客内容（帖子）的功能，该功能链接 yt 和标题（我正在尝试字典，但应用程序添加了不同的标题和链接。）

```
private ObservableCollection<FeedData> feeds = new ObservableCollection<FeedData>();
public ObservableCollection<FeedData> Feeds
{
    get
    {
        return this.feeds;
    }
}
public async Task GetFeedsAsync()
{
    Task<FeedData> feed1 = this.GetFeedAsync("http://urlblog/?feed=rss2");
    this.Feeds.Add(await feed1);
}

private async Task<FeedData> GetFeedAsync(string feedUriString)
{

    SyndicationClient client = new SyndicationClient();
    Uri feedUri = new Uri(feedUriString);
    try
    {
        SyndicationFeed feed = await client.RetrieveFeedAsync(feedUri);
        FeedData feedData = new FeedData();
        feedData.Title = feed.Title.Text;
        if (feed.Subtitle != null && feed.Subtitle.Text != null)
        {
            feedData.Description = feed.Subtitle.Text;
        }
        // Use the date of the latest post as the last updated date.
        feedData.PubDate = feed.Items[0].PublishedDate.DateTime;

        foreach (SyndicationItem item in feed.Items)
        {
            FeedItem feedItem = new FeedItem();
            feedItem.Title = item.Title.Text;
            feedItem.PubDate = item.PublishedDate.DateTime;
            feedItem.Author = item.Authors[0].Name;
            if (feed.SourceFormat == SyndicationFormat.Atom10)
            {
                Match m = Regex.Match(
                   item.Summary.Text, @"youtu(?:\.be|be\.com)/(?:.*v(?:/|=)|(?:.*/)?)([a-zA-Z0-9-_]+)", RegexOptions.IgnoreCase);

                feedItem.Content = m.Groups[0].ToString();
                feedItem.Content = m.Value;
                feedItem.Link = new Uri("url" + item.Id);
            }
            else if (feed.SourceFormat == SyndicationFormat.Rss20)
            {
                Match m = Regex.Match(
                item.Summary.Text, @"youtu(?:\.be|be\.com)/(?:.*v(?:/|=)|(?:.*/)?)([a-zA-Z0-9-_]+)");
                feedItem.Content = m.Groups[1].ToString();
                feedItem.Content = m.Value;
                feedItem.Link = item.Links[0].Uri;
            }
            feedData.Items.Add(feedItem);
        }
        return feedData;
    }
    catch (Exception)
    {
        return null;
    }
} 
```

**FeedItem.cs**

```
public class FeedItem
{        
    public string Author { get; set; }
    public string Content { get; set; }      
    public Uri Link { get; set; }
    public DateTime PubDate { get; set; }
    public string Title { get; set; }    
} 
```

# php - PDO 不创建 CREATE TABLE

> ID：15504374
> 
> 赞同：1
> 
> 时间：2013-03-19T15:58:35.613
> 
> 标签：php, sql, pdo, create-table

我对此很陌生，需要一些帮助。

我正在尝试将数组输入到 PDO 数据库中；使用以下代码创建数据库：

```
$createdb = $db->exec("CREATE DATABASE $validdbname;
CREATE USER '$user'@'localhost' IDENTIFIED BY '$password';
GRANT ALL ON `$validdbname` .* TO '$user'@'localhost';
FLUSH PRIVILEGES;")
or die(print_r($db->errorInfo(), true));
// Check for success
if ($createdb) 
{
    echo 'Database Created!<br /><br />';
}
else echo "Database not successfully created! <br /><br />"; 
```

这可以成功，但是当我尝试使用非常相似的代码在创建的数据库中创建一个表时，这不起作用：

```
$createtable = $db->exec("CREATE TABLE IF NOT EXISTS webdata (
id INTEGER NOT NULL AUTO_INCREMENT,
data VARCHAR(200) NOT NULL,
PRIMARY KEY (id))")

or die(print_r($db->errorInfo(), true)); 
```

我检查了 PHPMyAdmin 以查看是否已创建表，而在创建数据库时，表并未创建。这是显示的错误：

```
Array ( [0] => 00000 [1] => [2] => ) 
```

如有必要，我很乐意提供更多代码或信息。我只是无法弄清楚为什么会发生这种情况，并且非常感谢任何输入，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:08:52.663

你需要

```
$db->exec('USE ' . $validdbname); 
```

在两个查询之间，或在`CREATE TABLE`:

```
CREATE TABLE IF NOT EXISTS $validdbname.webdata ( ... 
```

# javascript - json 到 2d javascript 数组

> ID：15504375
> 
> 赞同：-2
> 
> 时间：2013-03-19T15:58:40.447
> 
> 标签：javascript, arrays, json

我有以下外部 json 文件，但尺寸更大，如下所示：

```
[{"time":1610.5,"Irradiance":1360.6718}
,{"time":1611.5,"Irradiance":1360.6549}
,{"time":1612.5,"Irradiance":1361.0528}] 
```

我想要一个函数，将它们转换为如下所示的 javascript 数组：

```
[[1610.5, 1360.6718],
 [1611.5, 1360.6549],
 [1612.5, 1361.0528]] 
```

我还希望能够提取关键名称“时间”和“辐照度”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:01:28.447

假设您的数组名为`data`：

```
converted = data.map(function(x) { return [x.time, x.Irradiance]; }); 
```

* * *

**编辑**提取键需要假设数组中的对象是同类的。

```
var keys = [];
for (var k in data[0]) { keys.push(k); } 
```

现在数组`keys`将包含在`data[0]`;中找到的键。即，`['time', 'Irradiance']`。请注意，如果您的[环境支持它](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys#Browser_support)，您还可以执行以下操作：

```
var keys = Object.keys(data[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:03:15.037

试试这个：

```
var js=[{"time":1610.5,"Irradiance":1360.6718},{"time":1611.5,"Irradiance":1360.6549}
,{"time":1612.5,"Irradiance":1361.0528}];
var newarr=Array();
for(var i=0;i<js.length;i++)
{
    arr=new Array(js[i].time,js[i].Irradiance);
    newarr.push(arr);        
}
console.log(newarr); 
```

**小提琴** [http://jsfiddle.net/kfaWx/](http://jsfiddle.net/kfaWx/)

# web-services - 如何知道 Web 服务是 JAX WS 还是 JAX RPC

> ID：15504380
> 
> 赞同：2
> 
> 时间：2013-03-19T15:58:52.013
> 
> 标签：web-services, jax-ws, jax-rpc

我在 WAS 6.1 上部署了一个 EAR 文件。EAR 文件包含几个公开为 Web 服务的 EJB 方法。现在有没有办法确定这些 Web 服务是根据 JAX WS 标准还是 JAX RPC 标准编写的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T05:52:15.640

它应该是 JAX-RPC，因为首先 JAX-RPC 映射到 Java 1.4 JAX-WS 映射到 Java 5.0 而 WAS 6.1 具有 java 1.4。

# azure - 如何从 RoleEntryPoint 访问在 WebRole 上运行的所有站点

> ID：15504382
> 
> 赞同：0
> 
> 时间：2013-03-19T15:58:59.220
> 
> 标签：azure, log4net, azure-web-roles, log4net-configuration

我们将多个站点部署到单个 WebRole。

```
<Sites>
  <Site name="Web">
    <Bindings>
      <Binding name="EndpointA" endpointName="Internal" />
    </Bindings>
  </Site>
  <Site name="Web2" physicalDirectory="Web2">
    <Bindings>
      <Binding name="EndpointB" endpointName="EndpointB" />
    </Bindings>
  </Site>
</Sites> 
```

如果我理解正确，您可以访问主站点，例如：

```
public class WebRole : RoleEntryPoint 
{
    public override void Run()
    {
        while (true)
        {
            // Reconfigure log4net every 10 minutes
            log4net.Config.XmlConfigurator.Configure();
            Thread.Sleep(60000);
        }
    }
} 
```

但是如何为在 WebRole 上运行的每个站点执行 log4net.Config.XmlConfigurator.Configure()？

顺便提一句

log4net.config 文件存储在 Azure Blob 存储中。

编辑：

log4net.Config.XmlConfigurator.Configure() 将根据 App.config 或 Web.config 读取正确的 log4net blob。具体来说：将 ConfigureFromBlob() 添加到 log4net 实现中。

如果应用程序安装在本地，ConfigureFromFile() 将自动监视 log4net.config 文件的更改并在需要时重新配置。ConfigureFromUri() 和 ConfigureFromBlob() 无法执行此操作，因此需要手动重新配置 log4net.config 更改。

对于 Windows Azure，我想最好的地方是 Run() 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:52:44.123

由于您将站点配置为在不同的应用程序池中运行，因此您需要在单个应用程序的 global.asax.cs 文件中为每个应用程序检测 log4net 全局静态变量

# jquery - 如何使用 jquery 禁用按钮？

> ID：15504384
> 
> 赞同：0
> 
> 时间：2013-03-19T15:59:00.150
> 
> 标签：jquery

我什么都试过了！

```
$('#m-button').button('disabled')
$('#m-button').attr('disabled', 'disabled')
$('#m-button').prop('disabled', 'disabled')
$('#m-button').attr('disabled', 'true')
$('#m-button').prop('disabled', 'true')
$('#m-button').attr('enabled', 'false')

<button id="m-button" class="btn" type="button" >Add Note</button> 
```

它仍然处于启用状态。禁用 a 的正确方法是`<button>`什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T16:00:40.660

```
$('#m-button').prop('disabled', true) 
```

没有引号`true`。

**[jsFiddle 示例](http://jsfiddle.net/j08691/MYv3j/)**

根据 jQuery 文档[`.prop()`](http://api.jquery.com/prop/)：

> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:00:27.433

从周围删除引号`true`并使用[prop()](http://api.jquery.com/prop/)，如下所示：

`$('#m-button').prop('disabled', true);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:11:39.230

你可以试试这个：

```
$('#m-button').attr('disabled', 'disabled') 
```

您所需要的只是为`disabled`您的按钮添加属性。

# drupal - 如何在drupal 6中删除节点引用类型

> ID：15504386
> 
> 赞同：0
> 
> 时间：2013-03-19T15:59:03.753
> 
> 标签：drupal

我已经成功地从数据库中删除了节点（我检查了它），但问题是节点引用字段中的 nid 不会消失。我该如何删除这个？这是我的代码，它不起作用

```
if($op == 'delete' && $node->type == 'person'){

    $id = $node->nid;

    $q=db_query("select nid from content_field_movie_cast where field_movie_cast_nid = '$id'"); //get all the movie ids that have the cast
    db_query("DELETE from content_field_movie_cast where field_movie_cast_nid = '$id' "); // delete all the entry for that cast in a all the movies it is involve

    while($result=db_fetch_array($q)){

    $node1=node_load($result['nid']);

                $ctr=0;
                $cnt=count($node1->field_movie_cast);

                while($ctr<$cnt){

                        if($node1->field_movie_cast[$ctr]['nid']==$id){

                        dpm($node1->field_movie_cast[$ctr]['nid']=0);

                        node_delete($nid);

                        }

                $ctr++;
                }

    db_query("update content_type_movie set field_movie_cast_count_value =field_movie_cast_count_value -1 where nid = '".$result['nid']."' ");

    }
    } 
```

这里还有一张图片，我在谈论没有名字的 nid 是我要删除的那个

![在此处输入图像描述](../Images/28b8eef9e7613651c09eeb97acfcdc64.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:35:04.120

自从我使用 node_ref 以来已经有一段时间了。和 D6，虽然我对你的方法有点困惑。您从数据库中删除了节点？这意味着您从 UI 中删除了节点或使用[http://api.drupal.org/api/drupal/modules!node!node.module/function/node_delete/6](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_delete/6)，而不是直接在数据库中做奇怪的事情？

引用此节点的节点仍将存储 A -> B 引用。如果您编辑节点，它是否允许您保存它，通常它会要求。您删除不存在的参考。保存/预览前的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:27:15.107

虽然我认为这种方法有点奇怪，但我将采用以下编程方法：

```
function hook_form_alter(&$form, &$form_state, $form_id){
    //dsm($form);
    unset($form['field_movie_cast']['und'][0]['nid']['#default_value']);
} 
```

这是基于 D7 的，因此对于 D6，可能需要对代码稍作调整。

# c# - WPF：鼠标悬停时动画派生控件内容？

> ID：15504390
> 
> 赞同：0
> 
> 时间：2013-03-19T15:59:09.827
> 
> 标签：c#, wpf, animation

我有一个从 Button 派生的控件：

```
public class ToolButton : Button
{
    static ToolButton() {}

    public ImageSource ImageSource
    {
        get { return (ImageSource)GetValue(ImageSourceProperty); }
        set { SetValue(ImageSourceProperty, value); }
    }

    public static readonly DependencyProperty ImageSourceProperty =
        DependencyProperty.Register("ImageSource", typeof(ImageSource), typeof(ToolButton), new UIPropertyMetadata(null));
} 
```

和它的风格：

```
 <Style TargetType="{x:Type wordplay:ToolButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type wordplay:ToolButton}">
                    <StackPanel Height="Auto" Orientation="Horizontal" Margin="4">
                        <Image Source="{TemplateBinding ImageSource}" Stretch="UniformToFill" />
                        <TextBlock Text="{TemplateBinding Content}" HorizontalAlignment="Left" Foreground="{DynamicResource TaskButtonTextBrush}" FontWeight="Bold"  Margin="5,0,0,0" VerticalAlignment="Center" FontSize="12" />
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

现在我需要在鼠标悬停时为 TextBlock 宽度设置动画，所以当用户只用图像悬停按钮时，将显示文本。如果用户将鼠标指针移开，则文本将被隐藏。我希望将其设置为样式，以便它适用于任何 ToolButton。问题是 - 我不知道 ToolButton 的最终大小，所以我无法为宽度设置动画。我怎样才能做到这一点？

# backbone.js - 将数组传递给集合或从服务器获取它有什么区别？

> ID：15504398
> 
> 赞同：0
> 
> 时间：2013-03-19T15:59:28.107
> 
> 标签：backbone.js

我认为我不了解 Backbone 的同步行为。当将数组传递给集合时，一切正常，当尝试从 json 文件或服务器获取完全相同的数据结构时，集合不会被填充。这就是所谓的集合。

```
define(['backbone',
'jquery',
'views/users',
'collections/user',
],
function(Backbone, $, UsersView, UserCollection){
var App = Backbone.View.extend({
    el:'.container',

    initialize: function() {
        var test = [

            {"name":"Someone","email":"some@gmail.com"},
            {"name":"Somebodyelse","email":"another@gmail.com"},
            {"name":"John","email":"idiot@aol.com"}
        ];
        var userCollection = new UserCollection(test);
        new UsersView({collection: userCollection});
    }
});
return App; 
```

这在我的用户视图中运行良好。

```
define(['backbone',
'jquery',
'underscore', 
'views/user',
],
function(Backbone, $, _, UserView){
var Users = Backbone.View.extend({
    el: $('.userlist'),

    initialize: function(){

        this.renderAll();
    },

    renderAll: function() {
        this.$el.empty();
        this.collection.each(this.render, this);
    },

    render: function(user){
        var userView = new UserView({model: user});
        this.$el.append(userView.render().el);
        return this;
    }
});
return Users; 
```

});

但是当像这样从服务器获取完全相同的 json 时：

```
define(['backbone',
'jquery',
'views/users',
'collections/user',
],
function(Backbone, $, UsersView, UserCollection){
var App = Backbone.View.extend({
    el:'.container',

    initialize: function() {

        var userCollection = new UserCollection;
        userCollection.fetch();
        new UsersView({collection: userCollection});
    }
});
return App; 
```

});

该集合填充有 1 个模型数组，其中包含四个模型。所以调用`this.collection(this.render,this)`只调用`render`一次函数。这导致这被记录到控制台：

```
child {models: Array[0], length: 0, _byId: Object, constructor: function, url: "/users"…}
    _byId: Object
    _idAttr: "id"
    length: 4
    models: Array[4]
    __proto__: Surrogate 
```

当我像这样在提取中进行一些错误检查时：

```
userCollection.fetch({
        success: function(response) {
        console.log(response);
    } 
```

然后该集合填充了 4 个模型，而不是 1 个具有 4 个模型的数组，如在控制台中看到的那样：

```
child {models: Array[4], length: 4, _byId: Object, _idAttr: "id", constructor: function…}
_byId: Object
_idAttr: "id"
length: 4
models: Array[4]
__proto__: Surrogate 
```

我并不擅长使用 javascript，而且我仍在尝试使用模块来解决问题。集合的传递方式或服务器数据有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:24:11.060

通过将重置事件绑定到 renderAll 函数来修复它。我不太了解它，所以这很糟糕，但它至少有效。

# vb.net - 将视频上传到 youtube 时出错（YouTube API v3 - Visual Basic .NET 项目 w/v3 DLL）

> ID：15504405
> 
> 赞同：0
> 
> 时间：2013-03-19T15:59:45.597
> 
> 标签：vb.net, video, upload, youtube-api

我在尝试通过 V3 API 将视频上传到 YouTube 时遇到了一些麻烦。我尝试像以下示例中所述异步上传： [YouTube upload from VB.NET with V3 API](https://stackoverflow.com/questions/14941646/youtube-upload-from-vb-net-with-v3-api)

但现在我遇到了我无法解释的错误。我已将块大小设置为 100000 并且上传工作正常（事件被触发） - 但是在两个或三个事件触发后我收到以下错误：要写入流的字节超过 Content-Length 字节大小指定的。

我尝试上传不带块大小的视频文件以检查错误是否仍然存在 - 在这种情况下，我收到以下错误：远程服务器返回错误：（503）服务器不可用。

谢谢你的帮助！此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:57:01.103

您是否调试并看到您正确打开了文件并准备好上传？

我得到了确切的错误，并以这种方式发现了问题。还尝试使用直接上传而不是可恢复的上传，看看是否成功。

在java中它会是 `UploadRequest.setDirectUploadEnabled(false);`

在 .NET 中也应该类似

# symfony - 使用 YUI3 (Y.App) 和 Symfony2 进行渐进式增强

> ID：15504406
> 
> 赞同：8
> 
> 时间：2013-03-19T15:59:48.993
> 
> 标签：symfony, yui3, progressive-enhancement

我们实际上使用 Symfony 2 PHP 框架和 Twig 作为模板引擎。我们认为我们可以避免 View 层的代码重复并从渐进增强 (p-jax) 中受益。

当前状态：

PJAX 不处理基于路由的页面布局的部分更新。我们的目标是实现一个系统，当导航由 Y.App（路由）处理时，只会更新一些页面“片段”（HTML 节点）。

在这方面，我们开始在以下位置实现 POC：[https](https://github.com/benjamindulau/PocSfYui/) ://github.com/benjamindulau/PocSfYui/ 可以在此处找到 Javascript：[https ://github.com/benjamindulau/PocSfYui/tree/master/src/Acme/PocBundle /Resources/public/js](https://github.com/benjamindulau/PocSfYui/tree/master/src/Acme/PocBundle/Resources/public/js) 和 Y.App 那里的初始配置：[https ://github.com/benjamindulau/PocSfYui/blob/master/src/Acme/PocBundle/Resources/views/layout.html.twig#L66](https://github.com/benjamindulau/PocSfYui/blob/master/src/Acme/PocBundle/Resources/views/layout.html.twig#L66)

这个想法是，当我们第一次加载页面时，一切都在服务器端处理（渐进增强），这意味着整个页面和页面片段都由服务器呈现。对于应由 Y.App 执行的下一个请求，我们定义了如下 JSON 格式（/photos 路径响应）：

```
{
    "title": "MyAwesomeWebsite - Photos", // page <title>,
    "fragments": {
        "sidebar": "<h2>Sidebar Menu<\/h2><!-- etc.... -->", // ..... maybe an updated menu for active page
        "main": "<h2>Photos<\/h2><div id=\"photo-list-container\"><ul id=\"photo-list\"><!-- photo items.... --></ul></div>", // Pre-rendered photo list
    },
    "templates": {
        "photo_item_tpl": "<li data-id=\"{{index}}\"><img src=\"{{url}}\" alt=\"{{title}}\" \/><\/li>" // template used later by Y.App for adding new photos
    }
} 
```

这基本上是当前视图内容（路由）的“JSON 化”版本。

在服务器端，我们检测到请求来自 Y.App，我们没有渲染我们的 Twig 模板，而是从中提取“块”并构造这个 JSON 响应，其中包含需要更新的页面片段 + 客户端需要的把手模板这个特定的页面。

在客户端（Y.App）：

*   我们定义了一个基本的 PageCompositeView 代表整个页面布局，然后是一个 Page2colLeftView 继承自它并实例化它自己的子视图：SidebarView，MainView，HeaderView，...。
*   我们编写了一个 IO 模块来伪造我们的 PJAX-Like 请求。我们使用它而不是“loadContent”（参见：[https](https://github.com/benjamindulau/PocSfYui/blob/master/src/Acme/PocBundle/Resources/views/layout.html.twig#L93) ://github.com/benjamindulau/PocSfYui/blob/master/src/Acme/PocBundle/Resources/views/layout.html.twig#L93 ）
*   在第一次加载时，我们调用 showView 并尝试将我们的页面子视图“重新连接”到它们各自的容器（参见：[https ://github.com/benjamindulau/PocSfYui/blob/master/src/Acme/PocBundle/Resources/公共/js/views/page.js#L27](https://github.com/benjamindulau/PocSfYui/blob/master/src/Acme/PocBundle/Resources/public/js/views/page.js#L27) )
*   在页面中导航时，Y.App 了解页面结构。

假设我们在浏览器中直接加载“/photos”路径： 1\. 服务器渲染包含照片列表的整个页面 2\. YUI App 创建其 PageCompositeView 并将每个子视图重新连接到其容器 3\. YUI App 知道“MainView”视图（对应于主要内容）应包含绑定到“PhotoModelList”模型列表的“PhotoListView”子视图。因此，“/photos”路径上的回调会创建“PhotoView”实例并将其重新连接到其容器（由服务器渲染）。

2和3（尤其是3）是手动完成的。

POC 确实有效。

但在更进一步之前，我们很乐意听取您的建议。

首先，您如何看待这个 POC？

我们实际上看到了这种方法的利弊。

我们主要关心的是我们如何调整 Y.App 以实现我们想要的： - 单个复合视图 - 在第一次加载时，模型通过读取现有 DOM 重新水合（即：当照片列表由服务器呈现时） - 我们越往前走，就越觉得我们遗漏了 Y.App 的一些东西，并且我们采取了错误的方式 ;-)

但所有这一切的积极方面是我们可以构建一个完整的异步网站，而无需太多工作。

我们的主要目标是通过提供“几乎完整”的通用解决方案来保持一切可维护。

也许从该消息中出现的主要问题是：

“我们使用 Y.App 的方式是否正确？” ;-)

所以你怎么看 ？

谢谢， 西亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:48:29.013

对于 CMS 管理的 POC，我做了几乎相同的操作，但有 2 个不同：PJAX 响应仍然是一个 HTML 片段，它包含一个带有 JSON 编码数据的脚本标签，因此无需查询 DOM 来重新水化我的模型/模型列表，我们使用其中已有的数据。这允许不依赖任何标记来获得正确的模型，但另一方面，这使得响应的大小有点大（但仍然比整个页面加载轻得多）。

此外，JSON 编码的数据还可能包含一些设置，例如告诉您的 Y.App 要使用哪个视图、在哪里可以找到相应的 DOM、模板或其他...

这在 YUILibrary 论坛上进行了讨论：http: [//yuilibrary.com/forum/viewtopic.php](http://yuilibrary.com/forum/viewtopic.php?t=11877) ?t=11877 ，因此您可以在此处找到其他详细信息。

对于“我们是否以正确的方式使用 Y.App ？” 问题，我认为没有真正的回应。我的意思是 YUI App 框架是那种让你做任何你想做的事的框架，这只是一个权衡给你的约束的问题。如果您查看几个 YUI App 示例，它们都有非常不同的策略。

但无论如何，您的解决方案对我来说似乎很好，我很高兴看到仍然有人构建逐步增强的应用程序:-)

# vb.net - 如何调试等待语句？

> ID：15504410
> 
> 赞同：4
> 
> 时间：2013-03-19T15:59:59.883
> 
> 标签：vb.net, async-await

我最近看了一些关于 TPL 和异步模式的介绍，所以我开始了一个小项目来尝试一些东西。（异步和并行的东西）

我注意到 SqlConnection 有一个 OpenAsync() 方法，所以我想尝试等待这个。据我了解， await 关键字告诉编译器检查操作是否完成，如果未完成，它将把其余代码转换为继续任务。我也明白我应该仍然能够调试代码。但是，我对此有一些问题。

我编写了以下简单的测试代码：

```
Async Sub Gogo()
    Try
        Await connection1.OpenAsync()
    Catch ex As Exception
        Console.WriteLine(ex)
    End Try
    SomeCode()
End Sub 
```

当我运行此代码（控制台应用程序）时会发生什么，我确实进入了 await 语句，但没有进一步。我尝试在 catch 语句和 try 块后面的代码中设置断点。两者都没有到达，控制台应用程序简单地退出。我不明白这里发生了什么。

我正在使用 VS2012 更新 1，(VB).Net 4.5。另外，因为我怀疑发生了一些错误（这似乎没有什么意义，因为当我使它同步时代码可以工作）我配置了 app.config 以升级未观察到的异常：

```
<runtime>
    <ThrowUnobservedTaskExceptions enabled="true"/>
</runtime> 
```

但是，到目前为止，我没有得到任何异常。我错过了什么？请帮忙 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T16:04:11.577

> 两者都没有到达，控制台应用程序简单地退出。

问题是您在控制台应用程序中使用它。如果您要在 Windows 窗体或 WPF 应用程序中执行相同的操作，您会看到非常不同的行为。

当您调用`Await`时，异步操作会尝试捕获调用者的同步上下文，然后继续处理该上下文。在控制台应用程序中，没有同步上下文（因为没有消息泵等），因此创建的延续被安排在 ThreadPool 线程上。

异步操作开始，然后事情继续 - 控制台应用程序*结束*，因为它到达 Main() 例程的末尾，之后你永远不会“看到”这些东西。

如果你想看到这些事情发生，你需要在你的控制台应用程序中添加一些东西来阻止它完成。例如，您可以使用 a`ManualResetEvent`并将其设置在 之后`SomeCode()`，然后调用`WaitOne()`您的 Main() 例程。这将使应用程序保持活动状态，直到您的异步操作完成。

话虽如此，如果您想了解`Async`/ `Await`，我建议您在 GUI 应用程序而不是控制台应用程序中“玩”。当您安装了适当的同步上下文（在 Windows 窗体和 WPF 中自动发生）时，查看和理解正在发生的事情要简单得多。

# jmeter - 我希望一些线程组同时运行，而其他线程组一个接一个

> ID：15504414
> 
> 赞同：0
> 
> 时间：2013-03-19T16:00:04.033
> 
> 标签：jmeter

我的测试计划中有 7 个线程。我希望前 4 个线程同时运行，但最后 3 个线程我想一个接一个地运行。我尝试使用一个恒定的计时器来延迟最后 3 个，但是没有真正的方法可以知道一个计时器何时完成以便在计时器上设置正确的延迟。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:02:41.023

> 我尝试使用一个恒定的计时器来延迟最后 3 个，但是没有真正的方法可以知道一个计时器何时完成以便在计时器上设置正确的延迟。

在线程组中有一个`Scheduler`-options 可让您设置`Duration`线程组的。这样你就知道线程组运行了多长时间，并且可以相应地延迟最后一个线程组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T22:53:12.087

你也可以使用**[Ultimate Thread Group](https://code.google.com/p/jmeter-plugins/wiki/UltimateThreadGroup)**插件做类似的事情

# for-loop - 统计/事件研究

> ID：15504417
> 
> 赞同：0
> 
> 时间：2013-03-19T16:00:10.337
> 
> 标签：for-loop, stata

我目前正在对 2836 家公司的样本进行多项事件研究。我根据几个因素（由 FF 编译）回归每家公司的回报。因此，我编写了以下循环：

```
 gen predicted_return4=.
 forvalues i = 1(1)2836 { 
 l id acq_company_id if id==`i' & dif==0
 reg ret ${ff} if id==`i' & estimation_window==1
 predict p4 if id==`i'
 replace predicted_return4 = p4 if id==`i' & event_window==1
 drop p4
 } 
```

循环工作得很好。然而，经过几次回归后，就会出现错误（见下文）。

```
 +---------------+
          | id   acq_co~d |
          |---------------|
   48818\. | 21          8 |
          +---------------+

  Source |       SS       df       MS              Number of obs =     220
 -------------+------------------------------           F(  3,   216) =   53.77
   Model |  .012074753     3  .004024918           Prob > F      =  0.0000
Residual |  .016167584   216   .00007485           R-squared     =  0.4275
 -------------+------------------------------           Adj R-squared =  0.4196
   Total |  .028242337   219   .00012896           Root MSE      =  .00865

  ------------------------------------------------------------------------------
     ret |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   mktrf |   .9786525    .119806     8.17   0.000     .7425141    1.214791
     smb |    .201586    .172118     1.17   0.243    -.1376599    .5408319
     hml |  -.1526954   .2606448    -0.59   0.559    -.6664282    .3610374
   _cons |   .0004081   .0005981     0.68   0.496    -.0007708     .001587
------------------------------------------------------------------------------
(option xb assumed; fitted values)
(5800880 missing values generated)
(5 real changes made)
**no observations**
r(2000); 
```

检查数据后，我没有发现任何缺失的观察结果。有没有人已经处理过同样的问题？有没有办法避免缺失值分别忽略缺失值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:40:35.853

如果你有足够的缺失，你会得到`error 2000`。你应该想抓住它。尝试类似的东西

```
gen predicted_return4=.
forvalues i = 1(1)2836 { 
    l id acq_company_id if id==`i' & dif==0
    capture noisily reg ret ${ff} if id==`i' & estimation_window==1
    quietly if _rc == 0 { 
        predict p4 if id==`i'
        replace predicted_return4 = p4 if id==`i' & event_window==1
        drop p4
    } 
} 
```

# javascript - 在文件后面的代码中编写脚本代码并从中获取价值

> ID：15504419
> 
> 赞同：0
> 
> 时间：2013-03-19T16:00:16.680
> 
> 标签：javascript, asp.net

我正在使用这个脚本，这个返回与我的 IP 地址相关的信息

```
<script language="Javascript" src="http://gd.geobytes.com/gd?after=-1&variables=GeobytesCountry,GeobytesCity,GeobytesRegion,GeobytesLatitude,GeobytesLongitude">
</script>

<script language="Javascript">
    document.write("<p>Welcome to visitors from " + sGeobytesCity + ", " + sGeobytesCountry + ", " + sGeobytesRegion + ", " + sGeobytesLatitude + ", " + sGeobytesLongitude);
</script> 
```

有什么方法可以在文件后面的代码（aspx.cs）中使用此脚本并将它们存储到某个变量中...

喜欢

```
protected void Page_Load(object sender, EventArgs e)
{
string city = sGeobytesCity;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:03:14.920

使用 asp 文字控件。

```
document.write('<p>Welcome to visitors from <asp:Literal id="sGeobytesCity" runat="server"' />); 
```

然后在你的代码后面。

```
sGeobytesCity.Text = HttpUtility.JavaScriptStringEncode("yourCityNameHere"); 
```

javascript 编码器的主要目的是删除任何可能过早终止字符串的单撇号或双引号，从而允许 javascript 错误或恶意注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:07:16.067

尝试将脚本中的数据保存在`hidden`输入中，`runat=server`然后从后面的代码中可以访问此隐藏的输入。

```
<input type="hidden" runat="server" id="hiddenData" /> 
```

然后

```
string data = hiddenEntityId.Value; //to get the data back 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:09:14.760

是的，但这一点都不简单。在 javascript 中，浏览器正在为您处理所有“打开网络请求，获取结果”。*它正在运行 javascript ，*以便您将值放入变量中。在你自己做的代码后面。此示例来自[http://msdn.microsoft.com/en-GB/library/system.net.webrequest.aspx](http://msdn.microsoft.com/en-GB/library/system.net.webrequest.aspx)

```
// Create a request for the URL.        
WebRequest request = WebRequest.Create ("http://gd.geobytes.com/gd?after=-1&variables=GeobytesCountry,GeobytesCity,GeobytesRegion,GeobytesLatitude,GeobytesLongitude");
HttpWebResponse response = (HttpWebResponse)request.GetResponse ();
Stream dataStream = response.GetResponseStream ();
StreamReader reader = new StreamReader (dataStream);
var responseFromServer = reader.ReadToEnd ();
reader.Close ();
dataStream.Close ();
response.Close (); 
```

*然后*，您必须查看 responseFromServer 并找出如何从响应中获取所需的数据。或者找出该网站是否有您可以访问的不同 api。

# javascript - 修改数组的每个单词

> ID：15504428
> 
> 赞同：2
> 
> 时间：2013-03-19T16:00:37.323
> 
> 标签：javascript, arrays, function

所以，我想要做的是创建一个函数，允许用户输入一个字符串，然后它将以猪拉丁语输出字符串。这是我现在的功能：

```
function wholePigLatin() {
            var thingWeCase = document.getElementById("isLeaper").value;
            thingWeCase = thingWeCase.toLowerCase();
            var newWord = (thingWeCase.charAt(0));

            if (newWord.search(/[aeiou]/) > -1) {
                alert(thingWeCase + 'way')
            } else {
                var newWord2 = thingWeCase.substring(1, thingWeCase.length) + newWord + 'ay';
                alert(newWord2)
            }
        } 
```

我如何获得它以便它识别每个单词，然后按照我上面的方式修改每个单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:09:40.180

修改函数以接受参数并返回值

```
function wholePigLatin(thingWeCase) {
    thingWeCase = thingWeCase.toLowerCase();
    var newWord = (thingWeCase.charAt(0));

    if (newWord.search(/[aeiou]/) <= -1) {
       newWord = thingWeCase.substring(1, thingWeCase.length) + newWord + 'ay';
    }
    else{
       newWord = thingWeCase + 'way';
    }
    return newWord;
} 
```

那么你可以这样做：

```
var pigString = str.split(" ").map(wholePigLatin).join(" "); 
```

这会将字符串拆分为单词，将每个单词传递给函数，然后将输出与空格重新连接在一起。

或者，如果您总是希望从同一源获取数据，您可以从函数中获取数组并拆分/加入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:16:53.320

您可以将单词与正则表达式匹配并用回调替换它们：

```
var toPigLatin = (function () {
    var convertMatch = function (m) {
        var index = m.search(/[aeiou]/);
        if (index > 0) {
            return m.substr(index) + m.substr(0,index) + 'ay';
        }
        return m + 'way';
    };
    return function (str) {
        return str.toLowerCase().replace(/(\w+)/g, convertMatch);
    };
}());

console.info(toPigLatin("lorem ipsum dolor.")); // --> oremlay ipsumway olorday. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:03:38.063

使用 javascript 的 split() 方法。在这种情况下，您可以采取 do`var arrayOfWords = thingWeCase.split(" ")` 这将字符串拆分为字符串数组，拆分点位于每个空格处。然后，您可以轻松浏览结果数组中的每个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:09:38.230

编写一个在循环中调用你的单字函数的函数：

```
function loopPigLatin(wordString) {
   words = wordString.split(" ");
   for( var i in words)
     words[i] = wholePigLatin(words[i]);
   return words.join(" ");
} 
```

当然，要这样调用它，您需要对原始函数稍作改动：

```
function wholePigLatin(thingWeCase) {
     // everything after the first line
     return newWord2; // add this at the end
} 
```

然后`loopPigLatin`像这样调用：

```
document.getElementById("outputBox").innerHTML = loopPigLatin(document.getElementById("isLeaper").value); 
```

# javascript - 使用 Q.promises：如何捕获异步抛出？

> ID：15504429
> 
> 赞同：3
> 
> 时间：2013-03-19T16:00:38.383
> 
> 标签：javascript, promise, q

我将 Q 用于 Promise，但是在设置一些测试时，我发现我看到了捕获返回 Promise 的函数中抛出的异步错误的方法。

我试图将它包裹在 a`Q.when`和链 a`fail`和或在 a`Q.fcall`和 a 链下`fail`，但我无法让它工作。

```
 var func = function(){

               var deferred = Q.defer(); 
               setTimeout(function(){
                    throw new Error("async error");
               },100);

               return deferred.promise;

            }

            Q.fcall(func)
            .then(function(){
                console.log("success"); 
            })
            .fail(function(err){
                console.log(err); 
            }) 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:44:28.470

中的异常`setTimeout`无论如何都与承诺无关，您必须自己使用 --block 来捕获`try`它`catch`。

或者你使用[`Q.delay`](https://github.com/kriskowal/q/wiki/API-Reference#qdelayms)：

```
function func(){
    return Q.delay(100).then(function(){
        throw new Error("async error");
    });
}

func()
.then(console.log.bind(console, "success"))
.fail(console.log.bind(console)); 
```

# javascript - Dojo DataGrid：不对列中的图像进行排序

> ID：15504430
> 
> 赞同：0
> 
> 时间：2013-03-19T16:00:38.137
> 
> 标签：javascript, datagrid, dojo, dojox.grid.datagrid

我已经为包含图像的 dojo 数据网格列编写了代码。

代码：格式化程序：函数（cellValue，rowIndex）{

```
 if(data.items[rowIndex].status == "COMPLETED"){
          return "<img src='app/img/dot_done.png' />"+ " " +cellValue; 
    }
        else if(data.items[rowIndex].status == "IN_PROGRESS"){
          return "<img src='app/img/dot_in_progress.png' />"+" " +cellValue; 
    }
       } 
```

输出为：排序前：

```
 (done.img) complete

      (block.img) block

       (done.img) complete

       (block.img) block 
```

排序后：

```
 (done.img) block

       (block.img) block

       (done.img) complete

       (block.img) complete 
```

因此，对于上面的代码，它不是对图像进行排序，而是对单元格值进行排序。

有人可以建议我解决这个问题吗？

提前致谢。

我在这里添加代码：

```
 var store = new ItemFileWriteStore({data: data}); 

var layout = [[

{'name': 'TaskName', 'field': 'task_name', 'width': '20%',styles: 'text-align: center;'},

{'name': 'Status', 'field': 'status', 'width': '15%', styles: 'text-align: center;',

      formatter: function(cellValue, rowIndex){

                if(data.items[rowIndex].status == "COMPLETED"){ 

                    return "<img src='app/img/dot_done.png' />"+ " " +cellValue; } 

                }}]]; 

        var grid = new DataGrid({

                 id: 'grid', store: store, structure: layout, 

             });

        grid.placeAt("newdiv");

        grid.startup(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:59:27.630

这是一个可以解决您的问题的stackoverflow答案：

[格式化程序访问其他行内容时如何正确排序dojo datagrid单元格](https://stackoverflow.com/questions/7359539/how-to-sort-a-dojo-datagrid-cell-correctly-when-formatter-accesses-other-row-con)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:17:37.437

我终于找到了这个错误。而不是数据存储，我必须使用 cellValue 来比较这些值。

```
 function(cellValue, rowIndex){

    if(cellValue == "COMPLETED"){
          return "<img src='app/img/dot_done.png' />"+ " " +cellValue; 
    }
        else if(cellValue == "IN_PROGRESS"){
          return "<img src='app/img/dot_in_progress.png' />"+" " +cellValue; 
    }
       } 
```

# soap - Mule MtoM 传输出站验证错误

> ID：15504435
> 
> 赞同：0
> 
> 时间：2013-03-19T16:00:50.240
> 
> 标签：soap, mule, mtom

在 Jboss 7 中运行的业务服务中添加启用 MtoM 后，我们发现通过 Mule 传递肥皂请求现在会导致错误：-

```
<faultstring>An exception occurred while invoking message processor "DefaultMessageProcessorChain '(inner iterating chain) of OutboundEndpoint 'http://127.0.0.1:8280/communication' request chain' 
[ 
  org.mule.endpoint.outbound.OutboundEventTimeoutMessageProcessor, 
  org.mule.endpoint.outbound.OutboundSessionHandlerMessageProcessor, 
  org.mule.endpoint.outbound.OutboundEndpointPropertyMessageProcessor, 
  org.mule.endpoint.outbound.OutboundResponsePropertiesMessageProcessor
]" with transaction "Transaction{factory=null, action=NEVER, timeout=0}".. Message payload is of type: PostMethod</faultstring> 
```

这似乎是由服务响应中的有效负载在传递回 SOAPUI 之前验证时发生的验证错误引起的。检查 Mule 日志文件，记录如下：

```
Caused by: org.apache.cxf.binding.soap.SoapFault: Error reading XMLStreamReader.
    at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:222)
    at ... 80 more
Caused by: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character '-' (code 45) in prolog; expected '<'
 at [row,col {unknown-source}]: [1,1]
    at com.ctc.wstx.sr.StreamScanner.throwUnexpectedChar(StreamScanner.java:644)
    at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2003)
    at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1100)
    at com.ctc.wstx.sr.BasicStreamReader.nextTag(BasicStreamReader.java:1123)
    at org.mule.module.xml.stax.DelegateXMLStreamReader.nextTag(DelegateXMLStreamReader.java:242)
    at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:122)
    ... 90 more 
```

错误似乎是因为 MULE 尝试在验证流读取器中将肥皂响应解析为 XML，而实际上 SOAP 信封在标头中有以下文本：

```
[------=_Part_22_1884954755.1363694621407 Content-Type:application/xop+xml;charset=utf-8;type="text/xml"

<SOAP-ENV:Envelope..... 
```

因此验证失败，因为 MtoM 标记使 SOAP 数据包格式错误。

下面是我的骡子配置

```
<!-- Primary Choice router is used to forward requests to the wsdl proxy 
        and SOAPflow this should be the only endpoint that is exposed to the public 
        domain. -->
    <flow name="SOAInboundRouter">
        <!-- public inbound listener -->
        <inbound-endpoint address="${web.inboundAddress}"
            exchange-pattern="request-response" />

        <!-- Outbound filter for routing requests -->
        <choice>
            <when>
                <regex-filter pattern="soap" />
                <outbound-endpoint
                    address="${soa.inboundAddress}#[header:inbound:http.request]"
                    exchange-pattern="request-response" />
            </when>
        </choice>

    </flow>

    <!-- Flow used for SOAP request processing, this implements a callback to 
        check the SOAP header for the correct username token for WS-Security request 
        are passed to this flow by the Flow SOAInboundRouter. This endpoint is not 
        for use in the public domain. -->

    <flow name="SoapFlow">
        <!-- http listener for SOAP requests -->
        <inbound-endpoint address="${soa.inboundAddress}"
            exchange-pattern="request-response">
            <cxf:proxy-service service="" namespace="">
                <!-- WS-Security intercetor applied to the inbound request -->
                <cxf:inInterceptors>
                    <spring:ref bean="cxfSecurityInterceptor" />
                </cxf:inInterceptors>

            </cxf:proxy-service>
        </inbound-endpoint>

        <!--Success on authentication request is passed to outbound router this 
            is the actual service -->
        <outbound-endpoint
            address="${soa.outboundAddress}#[header:inbound:http.request]"
            exchange-pattern="request-response">
            <cxf:proxy-client />
        </outbound-endpoint>

    </flow>

    <!-- application configuration -->
    <spring:bean id="cxfSecurityInterceptor"
        class="uk.co.weatherbys.security.esb.cxf.CXFSecurityInterceptor"
        scope="prototype">
        <spring:constructor-arg value="${mule.userfile}" />
        <spring:property name="wServiceHeaderDelegate" ref="wServiceHeaderDelegate" />
        <spring:property name="cxfWsSecurityDelegate" ref="cXfWsSecurityDelegate" />
    </spring:bean>

    <spring:bean id="wServiceHeaderDelegate"
        class="uk.co.weatherbys.security.esb.cxf.WServiceHeaderDelegate">
    </spring:bean>

    <spring:bean id="cXfWsSecurityDelegate"
        class="uk.co.weatherbys.security.esb.cxf.CxfWsSecurityDelegate">
    </spring:bean> 
```

我到处寻找解决方案，但找不到。有没有人有什么建议？我可以以某种方式关闭出站验证吗？我是否需要配置一个转换器来处理这个非标准的标头信息？我需要一个新的流程吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:56:15.827

我之前看到过类似的东西，因为 CXF 代理正在将 Content-type 从 multipart/related 更改；类型=“应用程序/xop+xml”；.....以“文本/纯文本”为响应。

您可以记录 Content-Type 并尝试手动设置或复制 Content-Type，类似于：

```
<code>
    <message-properties-transformer>
    <add-message-property key="Content-Type" value="#[header:Content-Type]" />
    </message-properties-transformer> 
</code> 
```

请参阅~~[http://forums.mulesoft.org/message.jspa?messageID=9152](http://forums.mulesoft.org/message.jspa?messageID=9152)~~并向下滚动或搜索“wstx”

# reporting-services - SSRS 集团（按年份）

> ID：15504437
> 
> 赞同：1
> 
> 时间：2013-03-19T16:01:00.227
> 
> 标签：reporting-services

我使用 SSRS 2012 创建了一份报告，这对我来说是全新的，它显示了不同货件类型的总数及其日期。我确实设法摆脱了时间，但我希望它只显示运输类型的年份和总数。我已在设计视图中将其设置为按日期分组。任何如何解决这个问题的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:07:14.363

除了按日期分组外，您还可以按表达式`=Year(Fields!ShipDate.Value)`（或您的字段名称）分组，即仅对`Year`数据集中所有日期的组件进行分组。

# registry - Java RMI：无法从非本地主机重新绑定

> ID：15504439
> 
> 赞同：0
> 
> 时间：2013-03-19T16:01:12.987
> 
> 标签：registry, rmi, remote-access

我正在一个分布式应用程序模型中工作，其中我有 3 个应用程序在 3 台不同的机器（比如 A、B 和 C）上运行。我希望机器 A 成为专用的 RMI 注册表主机。现在我希望在 B 上运行的应用程序在 A 中的注册表上注册 RMI 服务，以便在机器 C 上运行的另一个应用程序通过 A 访问此服务。据我所知，Java RMI 注册表不允许从非本地主机绑定。是否有任何解决方案可以在跨多台机器运行的 JVM 之间实现这种远程通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:29:40.217

使用注册表以外的东西：例如，LDAP 服务器。

# solr - 从 Verity 迁移到 Solr 的工具

> ID：15504441
> 
> 赞同：0
> 
> 时间：2013-03-19T16:01:17.997
> 
> 标签：solr, migration, verity

有人知道可以从 Verity 迁移到 Solr 的工具吗？

我们的实际代码使用的是 Verity K2 6.5，我们没有使用 ColdFusion，而是使用 Java/J2EE。

感谢您的反馈意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:12:46.523

[这](http://veritytosolr.riaforge.org/)是一个。它也在[Github上](https://github.com/ksaini/Verity-to-Solr)

[Verity 到 Solr 的迁移](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSCCDC2C74-DE46-4ea1-B42C-DDF4F623B704.html)也提供了一些 Coldfusion 片段来实现这一点。

# android - Android应用程序的Junit测试

> ID：15504444
> 
> 赞同：0
> 
> 时间：2013-03-19T16:01:24.953
> 
> 标签：android, unit-testing, junit

我目前正在 Eclipse 中对 JUnit 进行 Android 应用程序测试，我遇到了问题。我在 abc 包中有 2 个类文件。test1.java 和 com.test.java。test1.java 用于读取文本文件并检索文本文件中的测试用例并存储在数组中。而 com.test.java 是一个文件，它将在 android 应用程序上运行自动黑盒测试。我的问题是我无法将 test1.java 中的值传递给方法测试文件进行测试。

下面是我的代码

```
 test1.java
 package com.calculator.test;
 import java.io.BufferedReader;
 import java.io.File;
 import java.io.FileInputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.InputStreamReader;
 import java.util.Random;

  import android.util.Log;

 public class test1 {
private static int j;

static String[] jeff = new String[] { "2", "2", "4"};

public static void main(String[] args) {

}

public static String[] data() {
    String[] lines = new String[0];
    String path = "C:/Users/Sony/workspace/calculator1.Test/testing1.txt";
    BufferedReader br = null;
    try {
        File file = new File(path);
        br = new BufferedReader(new InputStreamReader(new FileInputStream(
                file)));
        String line;
        while ((line = br.readLine()) != null) {
            lines = add(line, lines);
        }
        br.close();
    } catch (IOException e) {
        Log.d("error msg", e.getMessage());
    }

    return lines;
}

public String[] getDataFromAsset()
{
    return null;

}
private static String[] add(String s, String[] array) {
    int len = array.length;
    String[] temp = new String[len + 1];
    System.arraycopy(array, 0, temp, 0, len);
    temp[len] = s;
    return temp;
}

public static String print(String[] data) {
    Random random = new Random();
    int rand = random.nextInt(data.length);
    // System.out.println("Random no = " + rand + " -> " + data[rand]);
    String bbb = tes1t(data[rand]);
    //return "1 2 3"
    return bbb;

}

public static String tes1t(String data) {
    String law = data;
    String[] jeff = data.split("\\s");
    for (int j = 0; j < jeff.length; j++) {
        System.out.print(jeff[j]);
        if (j < jeff.length - 1)
            System.out.print(", ");
        else
            System.out.println();

    }
    String aaa = getdata1(jeff);
    //System.out.println(jeff[1]);
    return aaa;
}

public static String getdata1(String[] x) {

    String ss = x[1];
    //System.out.println(ss);
    return ss;
} 
```

}

```
com.test.java

package com.calculator.test;

import java.util.ArrayList;

import org.junit.Rule;
import org.junit.Test;

import android.test.ActivityInstrumentationTestCase2;
import android.util.Log;
import android.widget.EditText;
import android.widget.TextView;

import com.calculator.Main;
import com.calculator.R;
import com.jayway.android.robotium.solo.Solo;

public class calculatorMainTests extends ActivityInstrumentationTestCase2<Main> {
private Solo solo;

public calculatorMainTests() {
    super(Main.class);
}

@Override
protected void setUp() throws Exception {
    super.setUp();
    solo = new Solo(getInstrumentation(), getActivity());
}

public void testDisplayBlackBox() {
    Log.d("Test 1", "started");

    //String[] ddd = test1.data();
    //String ccc = test1.print(ddd);

    solo.enterText(0, ccc);

    // Enter 20 in first editfield
    solo.enterText(1, "2");

    // Click on Multiply button
    solo.clickOnButton("Multiply");

    // Verify that resultant of 10 x 20
    assertTrue(solo.searchText("4"));

}

public void testDisplayBlackBox1() {

    Log.d("Test 2", "started");
    // Enter 10 in first editfield
    solo.enterText(0, "1");

    // Enter 20 in first editfield
    solo.enterText(1, "20");

    // Click on Multiply button
    solo.clickOnButton("Multiply");

    // Verify that resultant of 10 x 20
    assertTrue(solo.searchText("20"));

}

@Override
protected void tearDown() throws Exception {

    solo.finishOpenedActivities();
}
} 
```

# c# - WebSocket 客户端无法握手

> ID：15504448
> 
> 赞同：2
> 
> 时间：2013-03-19T16:01:40.240
> 
> 标签：c#, html, websocket

我最近开始玩 HTML5 WebSockets，我有一个简单的 jQuery Web 客户端和一个控制台应用程序服务器。在阅读完握手后，这是我目前为客户准备的：

```
var socket = new WebSocket("ws://127.0.0.1:100", ["chat"]);
socket.onopen = function() {
    console.log(socket.readyState);
} 
```

这会将以下内容发送到我的服务器：

```
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: 127.0.0.1:100
Origin: http://localhost:57944
Sec-WebSocket-Protocol: chat
Pragma: no-cache
Cache-Control: no-cache
Sec-WebSocket-Key: dBQ0epP7wmgHDEJc6Me95Q==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

现在，我的服务器代码。

首先，我阅读了上面从客户端发送的行，找到`Sec-WebSocket-Key`值并将其保存到我的变量`key`中。

然后我在[此处附加维基百科文章中的](http://en.wikipedia.org/wiki/WebSocket)*幻数*，即**258EAFA5-E914-47DA-95CA-C5AB0DC85B11**。这导致以下代码：

 **```
key = string.Concat(key, "258EAFA5-E914-47DA-95CA-C5AB0DC85B11");
using (SHA1 sha1 = SHA1.Create())
{
    byte[] hash = sha1.ComputeHash(Encoding.UTF8.GetBytes(key));
    responseKey = Convert.ToBase64String(hash);
} 
```

最后，我的响应密钥用于构造我发送回客户端的消息，即：

```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: u9guLPph1FeCPuOpFNs4F1b+UqY=
Sec-WebSocket-Protocol: chat
[blank line, as requested in spec] 
```

但是，我`socket.readyState`从 0 变为 3，然后失败并出现以下错误`WebSocket connection to 'ws://127.0.0.1:100/' failed:`。

我已经读到这可能是由于我的服务器使用了与客户端不兼容的协议，但如果是这种情况，我不完全确定从哪里开始寻找。如果没有，有没有人知道如何解决这个问题或者我可以去哪里获取更多信息，因为我有点难过。

**2013 年 3 月 21 日**

在阅读了下面@djc 的评论后，我修改了我的服务器代码以发送回以下内容的确认：

```
using (StreamWriter sw = new StreamWriter(ns, Encoding.UTF8))
{
    sw.NewLine = "\r\n\r\n";

    // get response and calculate responseKey here (getting bytes as UTF-8 from client)

    sw.WriteLine("HTTP/1.1 101 Web Socket Protocol Handshake");
    sw.WriteLine("Upgrade: websocket");
    sw.WriteLine("Connection: Upgrade");
    sw.WriteLine("WebSocket-Origin: http://localhost:57944");
    sw.WriteLine("WebSocket-Location: 127.0.0.1:100");
    sw.WriteLine("Sec-WebSocket-Accept: " + responseKey);
    sw.WriteLine("");
    sw.Flush();
} 
```

好吧，我不再在客户端上收到错误消息——但“socket.readyState”仍然为 0，并且我的`socket.onopen`块从未被触发——尽管我看到客户端连接尝试通过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:38:18.867

基于[这个规范](https://www.rfc-editor.org/rfc/rfc6455)，我终于设法让它工作了。这是我的客户代码：

```
var socket = new WebSocket("ws://localhost:8181/websession", ['chat','superchat']);

socket.onopen = function()
{
    $("div#messages").append("<p class=\"event\">Socket is connected.</p>");
    socket.send("Thanks!");
}; 
```

似乎需要包含`websession`cookie 管理和`['chat','superchat']`协议。

服务器：

```
using (TcpClient client = listener.AcceptTcpClient())
using (NetworkStream stream = client.GetStream())
using (StreamReader sr = new StreamReader(stream, Encoding.UTF8))
using (StreamWriter sw = new StreamWriter(stream, Encoding.UTF8))
{
    Dictionary<string, string> headers = new Dictionary<string, string>();
    string line = string.Empty;
    while ((line = sr.ReadLine()) != string.Empty)
    {
        string[] tokens = line.Split(new char[] { ':' }, 2);
        if (!string.IsNullOrWhiteSpace(line) && tokens.Length > 1)
        {
            headers[tokens[0]] = tokens[1].Trim();
        }
    }

    string responseKey = "";
    string key = string.Concat(headers["Sec-WebSocket-Key"], "258EAFA5-E914-47DA-95CA-C5AB0DC85B11");
    using (SHA1 sha1 = SHA1.Create())
    {
        byte[] hash = sha1.ComputeHash(Encoding.UTF8.GetBytes(key));
        responseKey = Convert.ToBase64String(hash);
    }

    sw.WriteLine("HTTP/1.1 101 Switching Protocols");
    sw.WriteLine("Upgrade: websocket");
    sw.WriteLine("Connection: Upgrade");
    sw.WriteLine("Sec-WebSocket-Accept: " + responseKey);
    sw.WriteLine("Sec-WebSocket-Protocol: chat");
    sw.WriteLine("");
    sw.Flush();
} 
```

现在我得到了一个有效的连接，但无法与服务器发送/接收数据——但我猜这是另一个故事。**

# .net - Microsoft Sync Framework 2.1 - 示例项目、编写提供程序、更改跟踪、元数据

> ID：15504452
> 
> 赞同：5
> 
> 时间：2013-03-19T16:01:47.337
> 
> 标签：.net, microsoft-sync-framework

我发现很难找到 Sync Framework 2.1 的入口。有什么好的教程或示例项目，我可以使用吗？

我的目标是将带有 .NET 4.5 和 Microsoft SQL Server 2012 LocalDB 的客户端与带有 Microsoft SQL Server 2012 的 Windows 2008 R2 服务器同步。

我想知道如何在客户端和服务器上编写同步提供程序。

是不是MS SQL Server 的Sync Framework 的Provider 不支持“Change Tracking”？我必须编写自己的 Provider 吗？如何管理服务器的“元数据”？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:30:31.740

为什么必须编写自定义同步提供程序？开箱即用。

Sync Framework 中有两种类型的数据库同步提供程序。

第一个是较旧的离线同步提供程序，开箱即用仅支持客户端的 SQL CE。SQL Server 端将使用 SQL 更改跟踪。

第二种类型是所谓的点对点或协作提供程序，它支持 SQL CE、Express、LocalDB、Server 和 Azure SQL 之间的同步。

您不必为教程寻找太远，与框架一起安装的文档本身已经有一些。

这是在线版本：[教程：同步 SQL Server 和 SQL Express](http://msdn.microsoft.com/en-us/library/ff928700.aspx)

这应该适用于您的场景，因为 SqlSyncProvider 适用于 SQL Server、Express、LocalDB 和 Azure SQL。

# c# - 如何解决 ExecuteNonQuery：连接属性尚未初始化

> ID：15504462
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:02:07.293
> 
> 标签：c#, executenonquery

我是一个新手 C# 程序员。我尝试用 C# 制作游戏。在我的注册页面上出现了一些错误。它说 ExecuteNonQuery: Connection property has not been initializedat this line "int result = command.ExecuteNonQuery();"。这是我的 C# 代码。请帮我解决这个问题。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace WiimoteTest
{
public partial class regispage : Form
{

    private SqlConnection connection;
    private string sql;
    private SqlCommand command = new SqlCommand();

    public regispage()
    {
        InitializeComponent();
    }

    private void back_Click(object sender, EventArgs e)
    {
        startpage back = new startpage();
        back.Show();
        this.Close();
    }

    private void regispage_Load(object sender, EventArgs e)
    {
        string conStr = @"Data Source=.\SQLEXPRESS;
                        AttachDbFilename=C:\Users\vaio\Downloads\Compressed\WiimotLib_1.7\WiimotLib_1.7\samples\WiimoteTestCS_5_AllpagePuppyGameTestBirdResizepicTestDB\Angee.mdf;
                        Intregrated Security=True;User Instance=True;";
        connection = new SqlConnection(conStr);
        if (connection.State == ConnectionState.Closed)
        {
            connection.Open();
        }
    }

    private bool IsCompleteData()
    {
        string errMsg = "";
        if (username.Text == "")
        {
            errMsg = "Please input username";
        }
        else if (password.Text == "")
        {
            errMsg = "Please input password";
        }
        else if (fname.Text == "")
        {
            errMsg = "Please input firstname";
        }
        else if (lname.Text == "")
        {
            errMsg = "Please input lastname";
        }
        else if (nickname.Text == "")
        {
            errMsg = "Please input nickname";
        }
        else if (gender.SelectedIndex == -1)
        {
            errMsg = "Please select gender";
        }
        else if (age.Text == "")
        {
            errMsg = "Please input age";
        }
        else if (symptom.Text == "")
        {
            errMsg = "Please input symptom";
        }

        if (errMsg == "")
        {
            return true;
        }
        else
        {
            MessageBox.Show(errMsg);
            return false;
        }
    }

    private void AddParamterValues()
    {
        command.Parameters.AddWithValue("username", username.Text);
        command.Parameters.AddWithValue("password", password.Text);
        command.Parameters.AddWithValue("fname", fname.Text);
        command.Parameters.AddWithValue("lname", lname.Text);
        command.Parameters.AddWithValue("nickname", nickname.Text);
        command.Parameters.AddWithValue("gender", gender.SelectedItem.ToString());
        command.Parameters.AddWithValue("age", age.Text);
        command.Parameters.AddWithValue("symptom", symptom.Text);
    }

    private void submit_Click(object sender, EventArgs e)
    {
        if (!IsCompleteData())
        {
            return;
        }

        InsertData();

    }

    private void InsertData()
    {
        using (var connection = new SqlConnection())
        using (var command = connection.CreateCommand())
        {
            sql = @"INSERT INTO User(username, password, fname, lname, nickname, gender, age, symptom) 
              VALUES(@username, @password, @fname, @lname, @nickname, @gender, @age, @symptom),this.connection";

            **connection.Open();**

            var affectedRows = command.ExecuteNonQuery();

            command.Parameters.Clear();
            command.CommandText = sql;

            AddParamterValues();

            if (affectedRows < 1)
            {
                MessageBox.Show("Error to insert data");
                return;
            }
            else
            {
                MessageBox.Show("Insert data complete");
                menupage submit = new menupage();
                submit.Show();
                this.Close();
            }
        }
    }

    private void regispage_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (connection.State == ConnectionState.Open)
        {
            connection.Close();
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:06:19.443

没有类级数据客户端对象。尽快创建和处理它们。

```
private void InsertData()
{
    using (var connection = new SqlConnection("YOUR_CONNECTION_STRING_HERE"))
    using (var command = connection.CreateCommand())
    {
        // populate command details

        connection.Open();

        var affectedRows = command.ExecuteNonQuery();

        // do whatever
    }
} 
```

当您使用我的建议时，您可以摆脱这些行：

```
private SqlConnection connection;
private string sql;
private SqlCommand command = new SqlCommand(); 
```

...一旦您修复了所有编译器错误（通过删除代码），您就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:04:43.397

您没有告诉 Command 要使用哪个连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:27:05.700

请注意，一般情况下，您应该避免打开连接并使其保持打开状态，尤其是在 Web 或其他多用户、多线程应用程序中。默认情况下，连接是*池*化的（也就是说，只要使用完全相同的连接字符串值建立连接，它们就会保持打开并在应用程序域中可用）。只需创建所需的连接，尽可能快地构建和执行连接的命令和`Close()`/ ，让基础设施担心幕后发生的事情。`Dispose()`

执行 SQL 的一般方案是这样的：

```
public DataTable executeMyStoredProcedure()
{
  DataTable dt = new DataTable() ;
  string connectString = "Server=myServerAddress;Database=myDataBase;Trusted_Connection=True;" ;

  using ( SqlConnection connection = new SqlConnection(connectString) )
  using ( SqlCommand cmd = connection.CreateCommand() )
  using ( SqlDataAdapter sda = new SqlDataAdapter( cmd ) )
  {
    cmd.CommandText = "dbo.myStoredProcedure" ;
    cmd.CommandType = CommandType.StoredProcedure;

    // add your parameters here

    sda.Fill( dt ) ;

    connection.Close() ; // redundant, FWIW, since it will be closed via Dispose() when control leaves the using block.

  }

  return dt ;
} 
```

连接字符串的格式将根据您正在与之交谈的关系数据库而有所不同。有关不同提供程序和数据库类型所需的**最小值**的介绍，请参见[http://connectionstrings.com 。](http://connectionstrings.com)不过应该注意的是，连接字符串有许多不同的键，可以根据需要设置这些键来配置连接。

 **并且代码将根据**您**的执行方式而有所不同。有几种不同的方法可以执行您的查询。**

# xml - JUnitPerf 示例 XML

> ID：15504463
> 
> 赞同：1
> 
> 时间：2013-03-19T16:02:11.643
> 
> 标签：xml, junit, hudson, junitperf

我有一个自定义统计模块，用于原型应用程序上的一些负载测试，我正试图将它们放入 Hudson CI 服务器。Hudson 可以读取 JUnitPerf XML 输出，但我不知道该 XML 是什么样的。有没有人有他们可以发送的 junit 的一些示例输出，或者知道我可以在哪里找到文档的链接？

# entity-framework - EntityFramework 代码优先自定义连接字符串和迁移

> ID：15504465
> 
> 赞同：24
> 
> 时间：2013-03-19T16:02:12.817
> 
> 标签：entity-framework, ef-code-first, connection-string, entity-framework-migrations

当我使用默认连接字符串（从 中读取`app.config`）创建上下文时，会创建数据库并且迁移工作 - 基本上一切都井井有条。而当以编程方式创建连接字符串时（使用`SqlConnectionStringBuilder`）：

*   数据库不存在时不创建数据库（场景`A`）；
*   `CreateDbIfNotExists()`创建*最新版本的数据库模型，**但未*调用迁移机制（场景`B`）。

当`A`我希望访问数据库时抛出异常，因为 - 显然 - 它不存在。在正确创建数据库中，*不*`B`调用迁移机制，就像标准连接字符串中的情况一样。

 ***应用程序配置**：“ `Data Source=localhost\\SQLEXPRESS;Initial Catalog=Db13;User ID=xxx;Password=xxx`”

**建设者**：

```
sqlBuilder.DataSource = x.DbHost;
sqlBuilder.InitialCatalog = x.DbName;
sqlBuilder.UserID = x.DbUser;
sqlBuilder.Password = x.DbPassword; 
```

**初始化器**：

```
Database.SetInitializer(
    new MigrateDatabaseToLatestVersion<
        MyContext,
        Migrations.Configuration
    >()
); 
```

**规格**：实体框架：5.0，数据库：SQL Server Express 2008

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-10T07:33:06.767

如果您的迁移无法正常工作，请尝试`Database.Initialize(true)`在 DbContext ctor 中设置。

```
public CustomContext(DbConnection connection)
: base(connection, true)    
{    
        Database.Initialize(true);    
} 
```

我对迁移有类似的问题。在我的解决方案中，我必须始终在 ctor 中设置数据库初始化程序，如下所示

```
public CustomContext(DbConnection connection)
: base(connection, true)    
{    
        Database.SetInitializer(new CustomInitializer());
        Database.Initialize(true);    
} 
```

在自定义初始化程序中，您必须实现`InitalizeDatabase(CustomContex context)`方法，例如。

```
class CustomInitializer : IDatabaseInitializer<CustomContext>
{
    public void InitializeDatabase(CustomContext context)
    {
        if (!context.Database.Exists || !context.Database.CompatibleWithModel(false))
        {
            var configuration = new Configuration();
            var migrator = new DbMigrator(configuration);
            migrator.Configuration.TargetDatabase = new DbConnectionInfo(context.Database.Connection.ConnectionString, "System.Data.SqlClient");
            var migrations = migrator.GetPendingMigrations();
            if (migrations.Any())
            {
                var scriptor = new MigratorScriptingDecorator(migrator);
                string script = scriptor.ScriptUpdate(null, migrations.Last());
                if (!String.IsNullOrEmpty(script))
                {
                    context.Database.ExecuteSqlCommand(script);
                }
            }
        }
    }
} 
```

**更新**

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-21T16:00:48.123

他是一个解决方案，**app.config**中没有连接字符串。使用自动迁移和使用相同上下文的 2 个数据库。真正的运行时提供的连接。方法。

**APP.CONFIG（使用 EF 6）**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework,     Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
 </configSections>
 <startup>
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>
 <entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="Data Source=localhost; Integrated Security=True; MultipleActiveResultSets=True" />
  </parameters>
</defaultConnectionFactory>
 </entityFramework>
</configuration> 
```

**我重写了代码以使 Demo 尽可能小：**

```
using System;
using System.Data.Common;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Data.Entity.Migrations;

namespace Ef6Test {
    public class Program {
    public static void Main(string[] args) {
        Database.SetInitializer(new MigrateDatabaseToLatestVersion<Ef6Ctx, Ef6MigConf>());
        WhichDb.DbName = "HACKDB1";
        var sqlConn = GetSqlConn4DBName(WhichDb.DbName);
        var context = new Ef6Ctx(sqlConn);
        context.Database.Initialize(true);
        AddJunk(context);
        //sqlConn.Close();  //?? whatever other considerations, dispose of context etc...

        Database.SetInitializer(new MigrateDatabaseToLatestVersion<Ef6Ctx, Ef6MigConf>()); // yes its default again reset this !!!!
        WhichDb.DbName = "HACKDB2";
        var sqlConn2 = GetSqlConn4DBName(WhichDb.DbName);
        var context2 = new Ef6Ctx(sqlConn2);
        context2.Database.Initialize(true);
        AddJunk(context2);
    }
    public static class WhichDb { // used during migration to know which connection to build
        public static string DbName { get; set; }
    }
    private static void AddJunk(DbContext context) {
        var poco = new pocotest();
        poco.f1 = DateTime.Now.ToString();
      //  poco.f2 = "Did somebody step on a duck?";  //comment in for second run
        context.Set<pocotest>().Add(poco);
        context.SaveChanges();
    }
    public static DbConnection GetSqlConn4DBName(string dbName) {
        var sqlConnFact =
            new SqlConnectionFactory(
                "Data Source=localhost; Integrated Security=True; MultipleActiveResultSets=True");
        var sqlConn = sqlConnFact.CreateConnection(dbName);
        return sqlConn;
    }
}
public class MigrationsContextFactory : IDbContextFactory<Ef6Ctx> {
    public Ef6Ctx Create() {
        var sqlConn = Program.GetSqlConn4DBName(Program.WhichDb.DbName); // NASTY but it works
        return new Ef6Ctx(sqlConn);
    }
}
public class Ef6MigConf : DbMigrationsConfiguration<Ef6Ctx> {
    public Ef6MigConf() {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = true;
    }
}
public class pocotest {
    public int Id { get; set; }
    public string f1 { get; set; }
 //   public string f2 { get; set; } // comment in for second run
}
public class Ef6Ctx : DbContext {
    public DbSet<pocotest> poco1s { get; set; }
    public Ef6Ctx(DbConnection dbConn) : base(dbConn, true) { }
}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T05:31:04.700

我已经能够使用以下技术在连接之间切换

1) 在 app.config 中定义了多个连接字符串名称。

2) 在上下文中有一个构造函数，它采用连接字符串名称

```
public Context(string connStringName)
        : base(connStringName)
    {

    } 
```

3）为上下文设置 Create 方法 - 并使其能够接收连接名称（使用一点技巧）

```
 public class ContextFactory : IDbContextFactory<Context>
  {
    public Context Create()
    {
        var s = (string)AppDomain.CurrentDomain.GetData("ConnectionStringName");
        var context = new Context(s);
        return context;
    }
} 
```

4）我的迁移配置....

```
 public sealed class Configuration : DbMigrationsConfiguration<SBD.Syrius.DataLayer.Context>
{
   etc
} 
```

5）设置一个函数来创建上下文。

```
 private static Context MyCreateContext(string connectionStringName )
    {
        // so that we can get the connection string name to the context create method 
       AppDomain.CurrentDomain.SetData("ConnectionStringName", connectionStringName);

        // hook up the Migrations configuration
        Database.SetInitializer(new MigrateDatabaseToLatestVersion<Context, Configuration>());

        // force callback by accessing database
        var db = new Context(connectionStringName);
        var site = db.Sites.FirstOrDefault()  // something to access the database

        return db;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T23:57:21.917

我得出了类似的结论。

[昨天我们就此进行了长时间的讨论](https://stackoverflow.com/questions/15856703/is-adding-a-class-that-inherits-from-something-a-violation-of-the-solid-principl/15857842#15857842)。看看它。

如果通过 DbContext ctor 调用连接 - 它就是出现问题的地方（简化）。正如`DbMigrator`实际上调用你的'默认空'构造函数 - 所以你得到了混合的东西。我从中得到了一些非常奇怪的效果。我的结论是正常的初始化程序`CreateDb...`可以工作 - 但迁移不会（甚至失败，在某些情况下会抛出错误）。

> 底线 - 是以某种方式建立“单例”连接 - 通过 @kirsten 使用的 DbContext 工厂 - 或在 DbContext 中建立和更改静态连接 - 或类似的。不确定这是否能解决所有问题，但应该有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-01T12:26:56.760

查看此链接： [它使您可以更自由地为每个数据库自己激活迁移。](https://stackoverflow.com/questions/17932254/entity-framework-check-for-pending-migrations)

我通过在默认构造函数中使用到特定数据库的静态连接字符串解决了这个问题。

假设我有几个数据库，都基于相同的模式：myCatalog1、myCatalog2 等。我只使用构造函数中的第一个数据库连接字符串，如下所示：

```
public MyContext() : base("Data Source=.\SQLEXPRESS;Initial Catalog=myCatalog1;Integrated Security=True")
{
   // Can leave the rest of the constructor function itself empty
} 
```

此构造函数仅用于`Add-Migration`命令工作和创建迁移。请注意，其余数据库没有副作用，如果您需要另一个构造函数来初始化上下文（用于迁移以外的其他目的），它将起作用。

在我这样运行之后`Add-Migration`：

```
Add-Migration -ConfigurationTypeName YourAppName.YourNamespace.Configuration "MigrationName" 
```

我可以调用下一个代码（[取自开头提供的链接](https://stackoverflow.com/questions/17932254/entity-framework-check-for-pending-migrations)），以更新**对我的每个数据库的**迁移，这些数据库基于与 myCatalog1 相同的模式：

```
YourMigrationsConfiguration cfg = new YourMigrationsConfiguration(); 
cfg.TargetDatabase = 
   new DbConnectionInfo( 
      theConnectionString, 
      "provider" );

DbMigrator dbMigrator = new DbMigrator( cfg );
if ( dbMigrator.GetPendingMigrations().Count() > 0 )
{
   // there are pending migrations
   // do whatever you want, for example
   dbMigrator.Update(); 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-20T22:48:23.633

对于迁移，您可以 (1) 使用`MigrateDatabaseToLatestVersion`which 将在您开始使用上下文中的任何实体时自动启动，或者 (2) 用于`DbMigrator`明确告诉 EF 启动迁移。(2) 的优点是您不必执行虚拟操作（如`AddJunk`在@philsoady 的示例中），`MigratorScriptingDecorator`如果您想提取迁移 SQL，您甚至可以使用（参见代码中的示例 2）

(2) 的诀窍似乎是确保您的`DbMigrationsConfiguration`和`DbContext`类一致地使用相同的连接字符串。请注意，在过程中会实例化多个上下文`DbMigration.Update`- 所有这些都会调用上下文的默认构造函数（因此请注意是否有多个构造函数）。您在这里还有 2 个选项 - 您可以`connection string name`在 app.config 中使用 a （但您不能以编程方式定义连接字符串）或 build\hardcode\load 等...一个完整的`connection string`. 请参阅下面代码中的注释。

在 EF 6.0.1 和 6.0.2 中测试

```
using System;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Data.Entity.Migrations;
using System.Data.Entity.Migrations.Infrastructure;

namespace ConsoleApplication1
{
    // Models
    public class Foo
    {
        [Key]
        public int Id { get; set; }
        public string Column1 { get; set; }
        public string Column2 { get; set; }
    }

    // Configuration
    public class Configuration : DbMigrationsConfiguration<Context>
    {
        public static string StaticConnectionString; // use connection string

        public Configuration()
        {
            AutomaticMigrationsEnabled = true;
            AutomaticMigrationDataLossAllowed = true;
            TargetDatabase = new DbConnectionInfo(StaticConnectionString, "System.Data.SqlClient"); // use connection string
            //TargetDatabase = new DbConnectionInfo("ConnectionStringName"); // use connection string name in app.config
        }

        protected override void Seed(Context context)
        {
        }
    }

    // Context
    public class Context : DbContext
    {
        public Context()
            //: base("ConnectionStringName") // use connection string name in app.config
            : base(ConsoleApplication1.Configuration.StaticConnectionString) // use connection string
        {
        }

        public IDbSet<Foo> Foos { get; set; }
    }

    // App
    class Program
    {
        static void Main(string[] args)
        {
            // Example 1 - migrate to test1 DB
            Configuration.StaticConnectionString = "Data Source=localhost;Initial Catalog=test1;Integrated Security=True;MultipleActiveResultSets=True";
            var configuration = new Configuration();
            var migrator = new DbMigrator(configuration);
            migrator.Update();
            Console.WriteLine("Migration 1 complete");

            // Example 2 - create migrate SQL and migrate to test2 DB
            // NOTE: You can't do this if you use a connection string name in app.config
            // Generate migrate sql script for migration to test2 DB
            Configuration.StaticConnectionString = "Data Source=localhost;Initial Catalog=test2;Integrated Security=True;MultipleActiveResultSets=True";
            configuration = new Configuration();
            migrator = new DbMigrator(configuration);
            var scriptor = new MigratorScriptingDecorator(migrator);
            string sql = scriptor.ScriptUpdate(null, null);
            Console.WriteLine("Migration 2 SQL:\n" + sql);

            // Perform migration to test2 DB
            configuration = new Configuration();
            migrator = new DbMigrator(configuration);
            migrator.Update();
            Console.WriteLine("Migration 2 complete");
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-25T18:12:09.030

我想在 DEBUG 中运行时自动迁移以方便开发人员（生产安装程序正常进行迁移）但有同样的问题，迁移时忽略了代码指定的连接字符串。

我的方法是从这个处理“保存”连接字符串的泛型中派生迁移上下文：

```
public class MigrateInitializeContext<TDbContext, TMigrationsConfiguration> : DbContext
    where TDbContext : DbContext
    where TMigrationsConfiguration : DbMigrationsConfiguration<TDbContext>, new()
{
    // ReSharper disable once StaticFieldInGenericType
    private static string nameOrConnectionString = typeof(TDbContext).Name;

    static MigrateInitializeContext()
    {
        Database.SetInitializer(new MigrateDatabaseToLatestVersion<TDbContext, TMigrationsConfiguration>());
    }

    protected MigrateInitializeContext(string nameOrConnectionString)
        : base(nameOrConnectionString)
    {
        MigrateInitializeContext<TDbContext,TMigrationsConfiguration>.nameOrConnectionString = nameOrConnectionString;
    }

    protected MigrateInitializeContext() : base(nameOrConnectionString)
    {
    }
} 
```

ReSharper 警告是因为泛型类中的静态字段仅对**每个具体类型**都是静态的，在我们的例子中，这*正是*我们想要的。

上下文定义为：

```
public class MyContext : MigrateInitializeContext<MyContext, Migrations.Configuration>
{
    public MyContext()
    {
    }

    public MyContext(string nameOrConnectionString)
        : base(nameOrConnectionString)
    {
    }

    public virtual DbSet<MyType> MyTypes { get; set; }
} 
```

可以正常使用。*

# javascript - jQuery .each() 方法或 .html() 方法

> ID：15504466
> 
> 赞同：1
> 
> 时间：2013-03-19T16:02:14.740
> 
> 标签：javascript, jquery, html

我有一个小型应用程序，它通过 PHP 后端从数据库加载 HTML 内容。目前，jQuery 将 PHP 文件中的 html 数据加载到主页上的 DIV 中，每隔 5 秒左右发生一次`setInterval() $('#div').html(html);`. 所有格式都在 CSS 中完成，数据结构从 php 文件中回显。我还使用 jQuery 通过 PHP 将数据发布到数据库，因为这是一个小型聊天应用程序。我的问题是更快或更有效地提取这些数据的方法是什么，要么使用 json 并通过 jQuery`.each()`方法将每个元素解析为其结构，要么继续使用我当前`.html()`的方法加载数据并通过 PHP 回显完整的数据结构? 谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:04:57.100

我个人将结构回显到 php 中的 JSON 对象。然后在 javascript 中解析它并通过 .html() 将其放入容器中。

我认为这比替代方案要好得多，因为您在 php 中有很好的干净可编辑代码，只需使用 javascript 将其放在需要的地方。

在我的 php 中：

```
 $response['error'] = false; // if you get an error set this to true
    $response['html'] = ''; // set this wherever you like.
    alternately if you needed to break it up
    $response['html_A'] = '';
    $response['html_B'] = '';

>     in the end

    echo json_encode($response); 
```

在javascript中

```
$.post(function(r){
  response = JSON.parse(r);
   if (response.error !== true){
     $('#someDiv').html(response.html);
   }
   else {
     alert (response.errorMessage);
   }
} 
```

做一个 $.each 循环似乎很费力。特别是当您决定添加/修改一些由 php.ini 生成的输出时。

# php - php 两层数组键搜索

> ID：15504468
> 
> 赞同：0
> 
> 时间：2013-03-19T16:02:21.500
> 
> 标签：php, arrays, search, key

```
$arr = array (

    0 => array(
        'id' => 1,
        'name' => 'john'
    ),
    1 => array(
        'id' => 4,
        'name' => 'elisabeth'
    )
); 
```

假设我们只知道内部数组的“id”，那么搜索包含我们 id 的数组的 $arr 元素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:05:45.190

```
function search($id)
{
    foreach ($arr as $item) {
        if (isset($item['id']) && $item['id'] == $id) {
            return $item; // or whatever you want to return
        }
    }
} 
```

更新：

```
function search($id)
{
    foreach ($arr as $key => $item) {
        if (isset($item['id']) && $item['id'] == $id) {
            return $key; // Return key...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:05:33.483

```
$arr = array (

0 => array(
    'id' => 1,
    'name' => 'john'
),
1 => array(
    'id' => 4,
    'name' => 'elisabeth'
)
);
foreach($arr as $a)
if($a["id"] == 4)
echo $a["name"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:07:51.420

使用 array_filter

```
$arr = array (

    0 => array(
        'id' => 1,
        'name' => 'john'
    ),
    1 => array(
        'id' => 4,
        'name' => 'elisabeth'
    )
);

$id = 1;
$result = array_filter($arr, function($el) use ($id) {
    return $el['id'] == $id;
});
echo '<pre>', var_dump($result), '</pre>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:29:46.777

```
$array = array(
    0 => array(
        'id' => 1,
        'name' => 'john'
    ),
    1 => array(
        'id' => 4,
        'name' => 'elisabeth'
    )
);

$search = 4;
$result = null;

array_walk(
    $array,
    function ($element) use ($search, &$result) {
        if (isset($element['id']) && (int)$element['id'] === (int)$search) {
            $result = $element;
        }
    }
);

var_dump($result); 
```

# c# - 将自定义类序列化的功能放在哪里？

> ID：15504475
> 
> 赞同：0
> 
> 时间：2013-03-19T16:02:34.747
> 
> 标签：c#

我现在开始使用序列化，我想我在[这里](https://stackoverflow.com/questions/15488330/storing-and-retrieving-data-from-an-xml-file)询问后让我的课程可序列化。

现在我想知道将序列化方法**放在**所述类中是否被认为是好的、坏的、依赖的或无关紧要的设计。

假设我有这样的班级。

```
[XmlRoot("Settings")]
public class SerializableClass
{
  public SerializableClass() { }

  [XmlElement("PropertyOne")]
  public String PropertyString { get; set; }

  [XmlElement("PropertyTwo")]
  public int PropertyInt { get; set; }

  public Object PropertyObject { get; set; }
} 
```

添加这样的方法让对象（反）序列化自己是否有意义？

```
public String SerializeMe()
{
  XmlSerializer serializer = new XmlSerializer(typeof(SerializableClass));
  StringWriter writer = new StringWriter();
  serializer.Serialize(writer, this);
  return writer.ToString();
}

public static SerializableClass DeSerialize(String input)
{
  StringReader reader = new StringReader(input);
  XmlSerializer serializer = new XmlSerializer(SerializableClass);
  return xmlSerializer.Deserialize(reader) as SerializableClass;
} 
```

当然，我会使用*try-catch*、*使用*和某种文件阅读器来实现这些，并且只指定路径。可行吗？推荐的？常见的？（我从来没有使用过我实现的序列化，所以如果问题看起来很奇怪，请多多包涵。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:10:46.007

因为`XmlSerializer`会识别序列化属性，为什么不使用泛型实现来防止代码重复呢？

```
 public static string Serialize<T>(object item)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(T));
        StringWriter writer = new StringWriter();
        serializer.Serialize(writer, item);
        return writer.ToString();
    }

    public static T DeSerialize<T>(string input) where T : class
    {
        StringReader reader = new StringReader(input);
        XmlSerializer serializer = new XmlSerializer(typeof(T));
        return serializer.Deserialize(reader) as T;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:19:24.373

两种实现我都见过，只能说视情况而定。

在某些情况下这样做很棒 -

```
var object = new SerializableClass {PropertyString = "foo", PropertyInt = 22};
var xml = object.Serialize(); 
```

但是，在许多其他情况下，序列化/反序列化是在通过 http 等通道传输时发生的。在这种情况下，要序列化的对象大多是 DTO。这就是@Oliver 的通用实现派上用场的地方，这是我希望将序列化逻辑排除在 DTO 之外以使其通用的一种情况。

编辑 1 - 添加具有序列化/反序列化工作的代码 -

我尝试使用您的片段，并且能够序列化/反序列化。不过有些小改动——

```
using System;
using System.IO;
using System.Xml.Serialization;

using NUnit.Framework;

namespace Serialization
{
    [XmlRoot("Settings")]
    public class SerializableClass
    {
        public SerializableClass() { }

        [XmlElement("PropertyOne")]
        public String PropertyString { get; set; }

        [XmlElement("PropertyTwo")]
        public int PropertyInt { get; set; }

        public Object PropertyObject { get; set; }

        public String SerializeMe()
        {
            var serializer = new XmlSerializer(typeof(SerializableClass));
            var writer = new StringWriter();
            serializer.Serialize(writer, this);
            return writer.ToString();
        }

        public static SerializableClass DeSerialize(String input)
        {
            var reader = new StringReader(input);
            var serializer = new XmlSerializer(typeof(SerializableClass));
            return serializer.Deserialize(reader) as SerializableClass;
        }
    }

    [TestFixture]
    public class SerializerTest
    {
        [Test]
        public void SerializationTest()
        {
            var serializableClass = new SerializableClass { PropertyInt = 23, PropertyString = "foo", PropertyObject = "bar"};
            Console.WriteLine(serializableClass.SerializeMe());
        }

        [Test]
        public void DeserializationTest()
        {
            var deserializedXML = @"<?xml version=""1.0"" encoding=""utf-16:""?>" +
                                    @"<Settings xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"">" +
                                    @"<PropertyOne>foo</PropertyOne><PropertyTwo>23</PropertyTwo><PropertyObject xsi:type=""xsd:string"">bar</PropertyObject></Settings>";
            var serializableClass = SerializableClass.DeSerialize(deserializedXML);
            Console.WriteLine(serializableClass.PropertyInt);
            Console.WriteLine(serializableClass.PropertyString);
            Console.WriteLine(serializableClass.PropertyObject);
        }
    }
} 
```

# javascript - 淡入然后延迟后滑动的div

> ID：15504477
> 
> 赞同：0
> 
> 时间：2013-03-19T16:02:45.810
> 
> 标签：javascript, jquery

我目前有一个 div 淡入然后延迟后滑动。我需要在延迟后同时发生淡入淡出和滑动。有谁知道这是否可能？这是我目前拥有的：

```
<script type="text/javascript">
$(document).ready(function(){
    $('#image1').hide();
    $('#image1').delay(2500).fadeIn('3000');
    $('#image1').animate({'margin-top': '150px'}, 1000);
});   
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T16:05:50.963

`fadeIn()`基本上将不透明度从 0 设置为 1，因此只需在您的`animate()`函数中执行此操作，或使用[queue()](http://api.jquery.com/queue/)函数制作自定义动画队列：

```
$(document).ready(function(){
    $('#image1').hide()
                .delay(2500) 
                .animate({
                      opacity  : 1, 
                      marginTop: '150px'
                }, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:05:35.157

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#image1').hide();
        $('#image1').delay(2500).animate({marginTop: '150px', opacity: 1}, 1000);
    });   
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:05:43.520

看到这个：

```
 $(document).ready(function(){
   $('#image1').hide().delay(2500).queue(function(next) {
      $(this).fadeIn({duration:3000, queue:false}).animate({'margin-top':  '150px'}, {duration:3000, queue:false});
   });
}); 
```

**[样本](http://jsfiddle.net/wd6QX/4/)**

或者更好的动画不透明度；

```
 $(document).ready(function(){
    $('#image1').hide().delay(2500).animate({marginTop: '150px', opacity: 1}, 1000);
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:20:47.173

如果您使用`slideDown`，则不需要`fadeIn`调用。那么怎么样：

```
$(document).ready(function(){
    $('#image1').hide(); // If you start off with CSS hidden styles, this is not needed.
    $('#image1').delay(2500).slideDown(3000);
}); 
```

`animate`请注意，如果您在样式表中设置了适当的边距，您也不需要调用。

# c - 在C中组合两个字符串

> ID：15504478
> 
> 赞同：2
> 
> 时间：2013-03-19T16:02:52.650
> 
> 标签：c, arrays, string, logic, c-strings

我刚刚开始学习数组和字符串，我想加入两个字符串的输入，`stringA`并在找到它们的长度后将`stringB`它们的值放入另一个字符串中。`stringC`

我想在没有内置函数的情况下解决它。

我尝试编写代码，但`stringB`在`stringC`. 这是我的代码：

```
#include <stdio.h>
int main()
{
    char stringA[100];
    char stringB[100];
    char stringC[100];
    int lengthA=0;
    int lengthB=0;
    int i,j;

    printf("Enter a string A, terminate with a tilde.\n");
    scanf("%[^~]",stringA);
    while (stringA[lengthA] != '\0') 
        lengthA++;
    printf("The length is %d\n",lengthA+1);
    printf("Enter a string B, terminate with a !.\n");
    scanf("%[^!]",stringB);
    lengthB=0;
    while (stringB[lengthB] != '\0') 
        lengthB++;
    printf("The length is %d\n",lengthB+1);
    for(i=0;i<lengthA;i++)
        stringC[i]=stringA[i];
    for(i=lengthA;i<lengthA+lengthB;i++)
        stringC[i]=stringB[i];
    printf("%s",stringC);
    return 0;
} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:05:38.727

这个循环的一切看起来都很好：

```
for(i=lengthA;i<lengthA+lengthB;i++)
    stringC[i]=stringB[i]; 
```

在这里，您需要考虑索引到`stringB`.

另外，不要忘记 NUL 终止符。

**编辑**：另外，不要忘记，当您阅读时`stringB`，波浪号和换行符仍在输入缓冲区中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:07:20.500

您从 0 开始计数，`lengthA`并为每个字符递增直到 '\0'，因此 lengthA 是您的实际长度 string 。你不需要长度A+1

也许在 stringC 的末尾附加一个空字符会有所帮助？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:08:03.597

在这个循环中，您必须消除 for 的偏移量，`lengthA`如图`StringB`所示

```
for(i=lengthA;i<lengthA+lengthB;i++)
    stringC[i]=stringB[(i - lengthA)]; 
```

并在循环之后添加一个`NULL`终止符

```
stringC[i] = '\0'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:18:08.857

导入第一个字符串后，您将保留波浪号和换行符。由于您要清除一定数量的字符，因此您可以只调用`getchar()`一定次数，但可能有一种更优雅的方式来做到这一点。

在您设置的循环中`stringC`，您也索引`stringB`不正确。

确保您为 null terminate `stringC`，尽管我认为它不会破坏此特定代码。这是一个很好的做法。

最后，您在字符串长度上输出了一个额外的 +1。这不是必需的（除非您尝试将 ~ 和 ! 作为长度的一部分）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T16:27:32.413

雅各布有道理。

因此，要修复现有代码：

```
char stringC[200]; 
```

而且，您对 stringB 的索引是错误的。这应该有效：

```
stringC[i]=stringB[i-lengthA]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T16:29:31.880

`stringB`第二个循环中的索引是问题所在。请记住，此时的索引`i`是`lengthA`。也许你忘了使用你的变量`j`;-)

```
for(i=lengthA, j = 0; i < lengthA+lengthB; i++, j++)
    stringC[i] = stringB[j];

stringC[i + 1] = '\0'; 
```

作为提示：您不需要`j`：

```
for(i=lengthA; i < lengthA+lengthB; i++)
    stringC[i] = stringB[i - lengthA];

stringC[i + 1] = '\0'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T16:36:41.540

The following question talks about input buffer which is not getting cleared in the above code. [How to clear input buffer in C?](https://stackoverflow.com/questions/7898215/how-to-clear-input-buffer-in-c) Try using a debugger and check the contents of stringB after the second scanf statement.

# c# - 如何制作以对象为节点的二叉搜索树？

> ID：15504479
> 
> 赞同：1
> 
> 时间：2013-03-19T16:02:55.440
> 
> 标签：c#, binary-search-tree, icomparable

有没有一种方法可以让您拥有一个带有对象节点的二叉搜索树，它存储多个值，并且能够将这些值之一视为“主要”变量，在排序（平衡）树时用于比较.

例子：

树 =`Artist`集合

*   each`Artist`是一个具有诸如 等属性的节点`Name`，`Age`并且
*   `Name`是排序/平衡树时用于比较的“主要”属性

这是我为我的节点定义尝试过的，但我需要上述功能的帮助：

```
 class Artist<T> where T : IComparable
{
    private T name;
    private T members;

    public Artist<T> Left, Right;

    public Artist(T Name, T Members)
    {
        name = Name;
        members = Members;
        Left = null;
        Right = null;
    }
    public T Name
    {
        set { name = value; }
        get { return name; }
    }
    public T Members
    {
        set { members = value; }
        get { return members; }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:08:01.560

要使您的成员值之一成为排序的“主要”值...

您应该`IComparable`直接在您的类上实现接口`Artist`，以便这些节点可以直接比较。这使您可以控制*如何*比较此类的实例。

为此，您基本上只需对您感兴趣的成员进行比较，然后将该结果作为对象比较的结果传回。

例如：

```
class Artist : IComparable
{
    /* Your Artist specific implementation here */
    private string name;
    private int age;
    ...

    /* Implementation of IComparable */
    public int CompareTo(object obj)
    {
        Artist compareToObj = (Artist)obj;

        // Comparison by name.
        return this.name.CompareTo(compareToObj.name);

        // And if you wanted to do the comparison by eg age:
        // return this.age.CompareTo(compareToObj.age);
    }
} 
```

* * *

关于您使用通用节点：

我不确定你为什么要让你的`Artist`类通用 - 我会假设 an`Artist`不是通用的，因为你知道艺术家的属性等。至少，我看不出这在上下文中有任何用处这个问题。但是，您的`BinarySearchTree`实现*应该*是通用的，以便它可以是`Artist`s、`Car`s、`Gerbil`s 或任何其他`Object`您认为适合在 BST 中使用的树。

但是，如果您*确实*需要一个通用的例如`MyGenericNode`类，它将允许任何类型的节点，那么是的，您将使其成为通用的，并确保根据您的代码指定的任何类型都是 IComparable 。但是除了依赖. `MyGenericNode`_`<T>``<T>``.CompareTo()`

如果您想获得“花哨”（阅读：混乱，复杂，矫枉过正......），我*认为*您可以编写自己的界面，例如，允许您将发生节点比较 `IComparisonMemberSpecifiable`的成员的名称传递给它。除了. 然后你会使用反射来“找到”其中的指定成员并对其进行比较。我*强烈*建议您不要这样做 - 只需将其放在这里作为您问题的“答案”;-)`IComparable``<T>``IComparable``MyGenericNode``<T>`

 *但实际上——你的树需要是通用的才能接受不同类的节点。您的节点类需要/不应该是通用的恕我直言。*

# crystal-reports - 通过查询修改 Crystal Enterprise 用户访问

> ID：15504485
> 
> 赞同：0
> 
> 时间：2013-03-19T16:03:18.640
> 
> 标签：crystal-reports, business-objects, business-objects-sdk

我正在寻找一种方法来通过查询修改 Crystal Enterprise 用户所在的组，以便自动化我们的一些任务。

目前，我们每天有 5 到 20 个用户被添加或更改他们的安全访问权限，如果我们能够自动化这将是有益的。需要更改的主要内容是用户描述和用户所在的组。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:31:17.430

您将需要使用[SAP BUSINESSOBJECTS BI 4.X - DEVELOPER SDK LIBRARY](http://scn.sap.com/docs/DOC-27465)来执行这些任务。如果您不使用 4.X，则有早期版本的 SDK。

# android - 当我导入我的主项目时，Eclipse 是否也可以导入依赖项目？

> ID：15504495
> 
> 赞同：0
> 
> 时间：2013-03-19T16:03:44.487
> 
> 标签：android, eclipse

我有一个依赖于其他两个库项目的主项目。这两个依赖项目都嵌套在我的主项目的目录结构中。我想配置项目，以便当我将其导入 Eclipse（导入 > 现有项目到工作区）时，我也会导入依赖项目。

我的问题是，每当我导入主项目时，是否可以配置 Eclipse 来导入依赖项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:24:32.770

如果这些项目是版本控制的，您可以创建一个[项目集文件](http://wiki.eclipse.org/PSF)以将它们作为一个组导入/导出。这适用于 Eclipse 中的所有主要版本控制系统，如果您安装它们各自的项目集支持功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:57:59.010

如果它们通过 maven pom.xml 依赖，您可以通过导入“现有 Maven 项目”来导入该结构中的依赖模块

# python - 如何在单独的文件中使用 >=2 块渲染模板（）？

> ID：15504496
> 
> 赞同：1
> 
> 时间：2013-03-19T16:03:46.447
> 
> 标签：python, flask, jinja2

由于`Jinja2`有块可以将模板分解为单独的文件，`{% block _name_ %}{% endblock %}`我想在 上实现它应该相当容易`Flask`，但我就是无法绕开它。

## 誓言

我有这个结构：

```
daddy_template.html
    son.html
    daughter.html 
```

所有模板大致有以下内容：

```
<!-- daddy_template.html -->
<div id="son">{% block son %}{% endblock %}</div>
<div id="daughter">{% block daughter %}{% endblock %}</div>

<!-- son.html -->
{% extends "daddy_template.html" %}
{% block son %}
<p>Knock, knock</p>
{% endblock %}

<!-- daughter.html -->
{% extends "daddy_template.html" %}
{% block daughter %}
<p>Who is it?</p>
{% endblock %} 
```

## 转折

我只知道`render_template()`在 Flask 中准备一个模板，并且一次只需要一个模板，所以这省略了函数参数中提供的一个块之外的所有块。

```
from flask import Flask, render_template
app = Flask(__name__)

@app.route('/')
def daddy():
    return render_template('son.html') 
```

## 声望

那么你怎么吃你的蛋糕呢？在这种情况下，在渲染时是否同时包含`son.html`和？`daughter.html``daddy_template.html`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T16:05:50.580

查看[包含语句](http://jinja.pocoo.org/docs/templates/#include)而不是使用块。

# c# - flash 和 c# windows 应用程序集成

> ID：15504497
> 
> 赞同：0
> 
> 时间：2013-03-19T16:03:47.303
> 
> 标签：c#, flash-cs4

我创建了一个具有 3 个文本字段（动态数据）的 flash(.swf) 文件并使用 axshockwave 对象导入到 c# windows 应用程序中，如何从 flash 中获取文本字段的值到 c# windows 应用程序以从插入到文本字段中的数据执行计算?

# facebook-graph-api - Facebook 权限 - 如何在登录后为每个用户添加扩展权限

> ID：15504501
> 
> 赞同：1
> 
> 时间：2013-03-19T16:03:56.423
> 
> 标签：facebook-graph-api, ruby-on-rails-3.2, facebook-javascript-sdk, koala-gem

我有一个使用具有非常基本权限的 Facebook 登录的 Rails 应用程序：`email,user_photos,user_birthday`. 似乎要求用户提供扩展权限`publish_stream`真的会降低我的应用程序的注册率（这是有道理的——我不会相信任何有权在不了解该服务的情况下发布到我的 FB 提要的人）。

该应用程序允许用户在他们的墙上分享内容，但首先我需要将`publish_stream`权限添加给积极寻找它的用户。

解决这个问题的好方法是什么？有可能做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T00:57:17.333

您可以将权限附加到 url，并将该 url 提供给那些积极寻求在您的应用上共享能力的人：

```
www.blah.com/users/auth/facebook?scope=publish_actions,email 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T07:51:57.773

如果您将 Devise 与 Omniauth 一起使用，只需`scope`在路径助手中添加一个：

`user_omniauth_authorize_path(:facebook, scope: 'email,publish_actions')`

这基本上是另一个答案，但以更 Railsy 的方式表达。

# selenium - 如何在 browserstack.com 上运行 selenium 测试？

> ID：15504504
> 
> 赞同：10
> 
> 时间：2013-03-19T16:04:11.663
> 
> 标签：selenium, web-testing, testswarm, browserstack

假设我想在我的网站上执行以下测试：

*   将其加载到浏览器中。
*   单击一个按钮，该按钮执行一些 Javascript。
*   等待 Javascript 操作完成。
*   看看页面现在是如何显示的。

我知道如何为此创建一个**Selenium**测试。我也知道如何在**browserstack.com**上手动执行这个测试，也就是说，为我需要的每个浏览器启动一个 BrowserStack VM，然后执行这些步骤。

**如何将 Selenium 测试（可以是 JS 或 C# 或其他）与 BrowserStack 结合起来**，以便 BrowserStack 在我需要的所有浏览器中执行测试，然后向我发送一些报告，比如一堆屏幕截图？

[BrowserStack 在http://www.browserstack.com/automated-browser-testing-api](http://www.browserstack.com/automated-browser-testing-api)上提供了一些关于 TestSwarm 和 Selenium 的小文档，但是由于我对 Web 测试主题完全陌生，所以我看不到 BrowserStack、Selenium也许 TestSwarm 会相互作用。

**编辑：** Selenium 和 Testswarm 只是示例，我不喜欢任何框架，我只需要自动化 BrowserStack。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-23T10:39:23.063

[BrowserStack.com现在支持名为](http://www.browserstack.com)[Automate](http://www.browserstack.com/automate)的端到端硒测试。有一个[文档](http://www.browserstack.com/automate/getting-started)可以帮助您开始使用多种编程语言的示例代码。与其他产品一样，隧道和其他几个功能已经集成。

全面披露：我为 BrowserStack.com 工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T20:33:19.083

我认为目前不可能...

他们的[localhost 测试文档](http://www.browserstack.com/local-testing#configuration)给出了他们的命令行如何工作的示例：

> 命令行界面
> 
> java -jar BrowserStackTunnel.jar TI3PnSeogaDEcwSyiSzm localhost,3000,0

根据我对硒的经验，这并没有留下任何启动硒测试的方法。

这是我如何调用硒测试的示例：

```
java -Dpfile="../properties/ff-test.properties" -jar ../runselenium.jar ca.myorg.tests.HappyPathTest 
```

我刚刚收到他们发来的一封电子邮件，承诺在下个月（2013 年 5 月）的某个时候全面支持 selenium：

> 我们正在努力实施包括 Selenium 在内的全面自动化测试，并预计它将在下个月的某个时候发布。完成后我们会亲自通知您。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-10T20:44:20.543

目前在 Selenium 上运行自动任务真的很容易。Browserstack 创建了非常好的文档（涵盖不同的语言）。例如，这是您需要为[C#](https://www.browserstack.com/automate/c-sharp)执行此操作的方式。所以你只需要修改一点你的 selenium 测试，获取你的 API 密钥（如果你要订阅这个服务，它已经在页面上）并选择你想要完成测试的 OS/Browser/Device .

```
using System;
using OpenQA.Selenium;
using OpenQA.Selenium.Remote;

namespace SeleniumTest {
  class Program {
    static void Main(string[] args) {
      IWebDriver driver;
      DesiredCapabilities capability = DesiredCapabilities.Firefox();
      capability.SetCapability("browserstack.user", "USER_ID");
      capability.SetCapability("browserstack.key", "API_KEY");

      driver = new RemoteWebDriver(
        new Uri("http://hub.browserstack.com/wd/hub/"), capability
      );
      driver.Navigate().GoToUrl("http://www.google.com/ncr");
      Console.WriteLine(driver.Title);

      IWebElement query = driver.FindElement(By.Name("q"));
      query.SendKeys("Salvador Dali");
      query.Submit();
      Console.WriteLine(driver.Title);

      driver.Quit();
    }
  }
} 
```

如您所见，一切都与您的硒测试几乎相同。您还可以[从 selenium](https://www.browserstack.com/automate/c-sharp#enhancements-screenshots)以及他们的[screenshot API创建屏幕截图](http://www.browserstack.com/screenshots/api)

# php - 无法在提交表单时存储会话变量

> ID：15504507
> 
> 赞同：1
> 
> 时间：2013-03-19T16:04:13.477
> 
> 标签：php, session

当我尝试将表单 a 提交到表单 b 并使用 javascript window.open 或表单标签本身的 action="" 属性将其加载到新页面时，一切都会正确触发，但在新页面上加载 SESSION 变量没有通过。但是，如果我取消 window.open 方法，提交表单并在浏览器中手动加载新页面，则 SESSION 变量确实会在表单 b 的新页面的输入字段中正确显示...

我想知道它是否与“return false”有关；我在表单a上运行的onsubmit函数的一部分，或者如果在表单提交和新页面加载时，它没有在SESSION存储它们并将新页面加载到窗口之前设置SESSION值......它必须是其中之一那两个罪魁祸首。如果我不进行页面重定向，它就可以工作，所以我相信在提交后加载新页面时它实际上并没有存储 SESSION 变量......我怎样才能正确并成功地在新页面加载时存储 SESSION 以便它加载在表格 b 的新页面中正确吗？

索引文件（表格 A）

```
<?php
session_start();
if(isset($_POST['submit'])) {
    $_SESSION['cable_no'] = $_POST['cable_no'];
    $_SESSION['co_name'] = $_POST['co_name'];
    $_SESSION['prepping_team'] = $_POST['prepping_team'];
    $_SESSION['section_no'] = $_POST['section_no'];
    $_SESSION['tech_name_a'] = $_POST['tech_name_a'];
}
?>
<header>
<script type="text/javascript" language="javascript" src="/jquery/js/jquery-1.9.1.js">       </script>
<script type="text/javascript" language="javascript" src="js/scripts.js"></script>
<link href="css/style.css" type="text/css" rel="stylesheet" />
</header>
<form method="post" onsubmit="uploaddata(); return false;">
HTML CODE
<input type="submit" id="submit" name="submit" value="Continue" />
</form> 
```

JS文件

```
function uploaddata() { 

//Read all of the data from the page
for (eID in prepform) {
    prepform[eID] = document.getElementById(eID).value;
}
//Send to database upload function and verify IF checkboxes are checked
if(document.getElementById("a11").checked && document.getElementById("b11").checked && document.getElementById("c11").checked && document.getElementById("a12").checked && document.getElementById("b12").checked && document.getElementById("c12").checked) {
        upload_prepform();
    }else{
        alert("Please verify that you have checked the known check boxes.")
    }
}   
function upload_prepform() {
    $.ajax({
            type: 'POST',
            url: './php/upload_prepform.php',
            data: prepform,
            async: false,
            dataType: 'text',
            success: function() {
                alert("Thank you. Your Prep form has been submitted.");
            },

            error: function(jqXHR, textStatus, errorThrown) {
                    alert("Error... " + textStatus + "\n" + errorThrown);
            },
            complete: function() {
                window.location.replace("http://dev1.rs.idmyasset.com/gp21-dev/prep_b/");
                alert("Redirecting...");
            }
        });
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:05:37.337

必须以文件开头

```
<?php
session_start();
?> 
```

html代码后不能使用

# c# - 阅读流时进度条不起作用

> ID：15504508
> 
> 赞同：0
> 
> 时间：2013-03-19T16:04:17.463
> 
> 标签：c#, backgroundworker, streamreader

我已经看到很多关于进度条和多线程的问题和帖子，所以我希望我不是在问其他地方已经回答的问题。但如果我这样做了，我的道歉，我试图找到一个解决方案。

我有一些大文件，我想用 & 替换 & 因为这些文件很大，我希望不时看到状态更新，然后文档解析了多远。我编写的代码用于替换 & 符号，但是，只有在文档解析后才进行进度更新。有什么想法有什么问题吗？

```
using System;
using System.Windows;
using Microsoft.Win32;
using System.Text;
using System.Xml;
using System.IO;
using System.Diagnostics;
using System.Data.SqlClient;
using System.Data;
using System.Text.RegularExpressions;
using System.ComponentModel;

namespace DigiPort
{
    public partial class MainWindow : Window
    {

        public string filename;
        public string xmlfilename;
        BackgroundWorker worker = new BackgroundWorker();

        public MainWindow()
        {
            InitializeComponent();
        }

        private void onImportDocClicked(object sender, RoutedEventArgs e)
        {
            OpenFileDialog ofd = new OpenFileDialog();
            ofd.Filter = "Text documents (.txt)|*.txt";
            Nullable<bool> result = ofd.ShowDialog();
            if (result == true)
            {
                OutPutWindow.Text = "Document wordt nu gelezen.";
                filename = ofd.FileName;
                worker.DoWork += new DoWorkEventHandler(ReplaceAmpersandAsync);
                worker.ProgressChanged += new ProgressChangedEventHandler(ProBarChanged);
                worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(ReplaceAmpersandCompleted);
                worker.WorkerReportsProgress = true;
                worker.ReportProgress(0, "Start counting lines");
                int count = ReadNumberOfLines();
                worker.ReportProgress(0, "Lines counted. Total number of lines is: " + count);
                worker.RunWorkerAsync(count);
                OutPutWindow.Text = "Document gelezen en ampersands vervangen.";
            }
        }

        private int ReadNumberOfLines()
        {
            int count = 0;
            using (FileStream fs = File.Open(filename, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
            using (BufferedStream bs = new BufferedStream(fs))
            using (StreamReader sr = new StreamReader(bs))
                while (!sr.EndOfStream)
                {
                    sr.ReadLine();
                    count++;
                }
            return count;
        }

        private void ReplaceAmpersandAsync(object sender, DoWorkEventArgs e)
        {
            int i = 0;
            int count = (int)e.Argument;
            xmlfilename = filename + ".xml";
            StreamWriter writer = new StreamWriter(xmlfilename);
            using (FileStream fs = File.Open(filename, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
            using (BufferedStream bs = new BufferedStream(fs))
            using (StreamReader sr = new StreamReader(bs))
            while (!sr.EndOfStream)
            {
                double percentage = (i++ * 100) / count;
                worker.ReportProgress((int)Math.Round(percentage, 0));
                if (i % 100000 == 0)
                {
                    worker.ReportProgress(i, "Linenumber " + i + " is now parsed");
                }
                string content = sr.ReadLine();
                writer.WriteLine(content.Replace("&", "&amp;"));
            }

            writer.Close();
            worker.ReportProgress(i, "All lines are parsed, file is saved");
        }

        private void ProBarChanged(object sender, ProgressChangedEventArgs e)
        {
            ProBar.Value = e.ProgressPercentage;
            OutPutWindow.Text += (string)e.UserState;
        }

        private void ReplaceAmpersandCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:07:21.013

你也引发了太多的事件。你不应该为每一个被解析的行引发一个事件。这将填满 Windows 消息队列，并且无法跟上。仅在您每次取得重大进展时才提出一个事件（例如，每完成 1% 就提出一个事件）。

ReportProgress 的第一个参数也应该是 0 到 100 之间的百分比，表示工作的完成程度。您在这里滥用它来返回行号：

```
worker.ReportProgress(i, "Linenumber " + i + " is now parsed"); 
```

还值得一提的是，您目前正在吞噬您的代码可能生成的任何异常。在完成的事件处理程序中，您应该检查是否有错误：

```
private void ReplaceAmpersandCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Error != null) {
        // Show the user an error message.
    }
} 
```

# regex - 已知开始和结束的多行正则表达式模式

> ID：15504512
> 
> 赞同：0
> 
> 时间：2013-03-19T16:04:24.867
> 
> 标签：regex

我有一个文本文件，其中每一行都包含一个记录字段。每行都有一个以 V010 开头并以 V999 结尾的字段标识符。

我想搜索（此时我正在使用 Notepad++ 使用插件[http://www.phdesign.com.au/programming/toolbucket-multi-line-search-plugin-for-notepad/](http://www.phdesign.com.au/programming/toolbucket-multi-line-search-plugin-for-notepad/)）搜索包含 V056 字段的所有记录.

如何开始设置多行正则表达式。我试图理解正则表达式的力量，但这次多行模式是一个困难。

我在想类似的事情：

```
^V010.+ 
```

点是除换行符以外的任何字符，因此添加 '\r\n' 将带我到：

```
^V010.+\r\n 
```

接下来，我想选择一条完整的记录，因此如果 V999 是下一行，则添加 V999$ 应该可以，除非中间有未知数量的行，因此在 de '.+\r\n' 周围添加括号应该可以解决问题。

```
^V010(.+\r\n)+V999$ 
```

除了现在选择第一个 V010 到最后一个 V999。如何选择 1 条单条记录。从那里我可以进一步搜索单个记录是否包含 V056 字段。

文件示例：

```
A001
A999
V010 V
V020 XXXXXXXXXXX
V021 XXXXXXXXXXX
V040 XXXXX
....
V200 NL
V999
V010 V
V020 XXXXXXXXXXX
....
V999
Z001
Z999 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:47:01.490

这应该适合您的需求：

`V010((.|\n|\r|\r\n)(?!V999))*?V056(.|\n|\r|\r\n)*?V999`（[演示](http://regexr.com?346kl)）

*   `(.|\n|\r|\r\n)`表示*“任何字符（包括新行）”*
*   `(?!V999)`意思是*“后面没有`V999`”*
*   `*?`表示*“尽可能短地匹配”*（而`*`表示*“尽可能长地匹配”*）

# java - 获取 JSP servlet 会话，返回空值

> ID：15504514
> 
> 赞同：0
> 
> 时间：2013-03-19T16:04:31.453
> 
> 标签：java, jsp, session, servlets

我正在将 jsp/servlets 用于基本的 ajax 应用程序。我正在设置一个与 servlet 的会话，但我得到一个 null 返回。我的代码片段如下：

小服务程序：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)         throws  ServletException, IOException {

    String name=null;
    String sessionStrSet = null;

    if(request.getParameter("session").toString().equals("setSession")){

         name = request.getParameter("user");

         HttpSession session = request.getSession(true);
         session.setAttribute("sessionPw", name);
         sessionStrSet = session.getAttribute("sessionPw").toString();

         response.setContentType("text/plain");  
         response.setCharacterEncoding("UTF-8"); 
         response.getWriter().write(sessionStrSet + " " + "data write");

    }

    if(request.getParameter("session").toString().equals("getSession")){
        //how do i retrieve the session data here?
        response.setContentType("text/plain");  
        response.setCharacterEncoding("UTF-8"); 
        response.getWriter().write(sessionStrSet + "get session");
    }

} 
```

ajax 工作正常，只是会话检索似乎是一个问题。一旦在第一个 if() 中设置了数据，我就可以提取数据。但是当我做另一个发布请求时，它会返回为空。我需要另一个 HttpSession 吗？非常感谢任何帮助，我是 PHP 开发人员而不是 JSP，所以它对我来说很新！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:28:48.720

你真的需要单独的ifs吗？

`getSession(true)`如果没有当前会话，则返回当前会话或创建新会话。

请参阅文档[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)

# ios - 在后台线程上保存数据时收到内存警告

> ID：15504519
> 
> 赞同：0
> 
> 时间：2013-03-19T16:04:40.053
> 
> 标签：ios, core-data, memory-management, crash, nsmanagedobject

我在 (>2500) 中有很多对象，`NSMutableArray`当我保存它时，应用程序崩溃（收到内存警告 x3）。

```
 NSLog(@"start");
    NSInteger saveTemp = 0;
    NSData *data = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&err];
    if ([data length] > 0 && err == nil)
    {
        MyClass* rcust;
        NSString *respStr = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSMutableArray* cust = [respStr JSONValue];
        for(NSDictionary *v in cust)
        {
            if([dataProvider getClassById:[[v valueForKey:@"Id"] integerValue] error:nil] == nil)
            {
                rcust = [dataProvider createClass];
                rcust.clsId = [v valueForKey:@"Id"];
            }
            else
            {
                rcust = [dataProvider getClassById:[[v valueForKey:@"Id"] integerValue] error:nil];
            }
            rcust.cstZip = [v valueForKey:@"Zip"] == [NSNull null]? @"": [v valueForKey:@"Zip"];

            saveTemp++;
            if(saveTemp > 1000)
            {
                NSLog(@"save");
               [dataProvider saveContext];
                saveTemp = 0;
            }
        }
        [dataProvider saveContext];
    } 
```

这里`saveContext`方法

```
- (void)saveContext {
    NSError*err = nil;
    if(![[self managedObjectContext] save:&err])
    {
        NSLog(@"Unresolved error %@, %@", err, [err userInfo]);
    }
} 
```

更新：我在方法中添加了代码，你就在那里。

```
2013-03-21 15:18:54.641  start
2013-03-21 15:19:31.843  save
2013-03-21 15:23:21.126  save 
```

即数据保存速度越来越慢，一段时间后，应用程序崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:58:23.000

所以看起来你有超过 2500 个客户从那个 NSURLRequest 返回。当您填充`cust`数组时，您已经拥有该数据的四个副本（作为 NSData、作为 NSString、作为 NSMutableArray 以及在您的 NSManagedObjectContext 中）。

使用 @autoreleasepool 包装您的 NSData 和 NSString 转换。一旦你打完`-JSONValue`电话，你就不再需要这些陈述了。

然后，将您的处理循环也包装在 @autoreleasepool 中。这将允许释放中间结果（即使是您看不到的结果）。

最后，当您执行 saveContext 时，也对托管对象上下文执行 -reset。

给你的另外两个注意事项：

您在第 4 行中对 NSError 参数的检查不正确。对于具有 NSError** 参数的方法，如果操作成功，则 NSError 返回值未定义。然后应该`if (data.length > 0)`继续执行逻辑，否则检查 NSError。请参阅 NSURLConnection 的类参考。

此外，您的`getClassById`方法似乎违反了 Cocoa 命名标准。如果该方法以单词 开头`get`，则它必须通过参数中的引用返回其结果。请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF)。

# c# - Xamarin Monotouch UISplitViewController：如何设置或创建 UISplitViewController 的委托？

> ID：15504522
> 
> 赞同：1
> 
> 时间：2013-03-19T16:04:47.500
> 
> 标签：c#, ios, objective-c, xamarin.ios, xamarin

我有一个 UISplitViewController 并试图从我的 MasterViewController 获取一个事件并完全更改 DetailViewController。所以我发现，这基本上可以通过执行以下操作来完成：

```
ViewControllers[1] = new MyNewViewController(); 
```

当我这样做时，没有任何改变！我知道这与设置委托有关，但我不知道我需要在哪里以及如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:03:02.483

覆盖 UISplitViewControllerDelegate 来做任何需要做的事情。我的一个应用程序的示例：

```
using System;

using MonoTouch.UIKit;

namespace PythonMath
{
    class SplitViewControllerDelegate : UISplitViewControllerDelegate
    {
        public override bool ShouldHideViewController(
            UISplitViewController svc,
            UIViewController viewController,
            UIInterfaceOrientation inOrientation)
        {
            return (! InAppPurchaseModel.Editor.Purchased) ||
                inOrientation == UIInterfaceOrientation.Portrait ||
                inOrientation == UIInterfaceOrientation.PortraitUpsideDown;
        }
    }
} 
```

然后将其分配给 UISplitViewController 的委托：

```
var SplitViewController = new UISplitViewController();
SplitViewController.Delegate = new SplitViewControllerDelegate (); 
```

# ios6 - Uicollectionview：在 uiview 中显示消息的最佳方式是什么？

> ID：15504524
> 
> 赞同：0
> 
> 时间：2013-03-19T16:04:53.893
> 
> 标签：ios6, uicollectionview

也许这是一个愚蠢的问题。我有一个 uicollectionviewcontroller 从数据库中获取一些单元格。如果没有结果，如何显示这样的消息[https://www.dropbox.com/s/cjutiei8lqn0khf/Foto%2010-02-13%2011%2024%2025.png](https://www.dropbox.com/s/cjutiei8lqn0khf/Foto%2010-02-13%2011%2024%2025.png)？最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T14:19:08.750

您可以使用[UICollectionViewEmptyState](https://github.com/itsthejb/UICollectionViewEmptyState)。

另外，您的保管箱链接不起作用...

# symfony - symfony2 登录记住我

> ID：15504525
> 
> 赞同：0
> 
> 时间：2013-03-19T16:04:55.803
> 
> 标签：symfony

我正在尝试在 Symfony2 记住我登录中实现功能。

我有这个配置文件`security.yml`

```
security:

    firewalls:
        frontend:
            pattern:  ^/
            anonymous: ~
            form_login:
                login_path: /login
                check_path: /login_check
                default_target_path: /index
                success_handler: authentication_handler
            logout:
                path: /logout
                target: /login
                success_handler: authentication_handler
            security: true
            remember_me:
                key:      "%secret%"
                lifetime: 120
                path:     /
            access_denied_handler: accessdenied_handler
          #primero deben de ir los usuarios anonimos si no se entra en loop redirect
    access_control:
        - { path: /login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/js, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin, roles: ROLE_A }
        - { path: ^/nuevoinforme, roles: ROLE_M }
        - { path: ^/, roles: IS_AUTHENTICATED_REMEMBERED }

    providers:
        user_db:
            entity: { class: mio\mioBundle\Entity\Empleado, property: username }
    role_hierarchy:
        ROLE_M: ROLE_U
        ROLE_A: ROLE_U

    encoders:
        mio\mioBundle\Entity\Empleado: { algorithm: sha1 }
        Symfony\Component\Security\Core\User\User: plaintext 
```

当我登录时，cookie 已正确存储在客户端上。但是，在 120 秒后，在尝试访问另一个 URL 时，它仍然认为客户端已登录，而我希望它会被注销，因此我希望客户端被重定向到`/login`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:53:03.147

您将其设置`remember_me lifetime`为`120`因此 cookie 在 2 分钟内过期。

您应该将生命周期值设置为大于一天。

```
security:
    firewalls:
        frontend:
            remember_me:
                lifetime: 120 # this value should be greater than 120 seconds 
```

我去掉了其余的参数，所以你可以看到我在说什么。

# prestashop - Prestashop 1.4.9 上的 Appixia - 如何在同一过滤器下添加允许 2 个 CategoryId？这可能吗？

> ID：15504527
> 
> 赞同：0
> 
> 时间：2013-03-19T16:04:56.970
> 
> 标签：prestashop, appixia

Prestashop 1.4.9 上的 Appixia

我正在使用 BasicCategoryListActivity 在我的商店中显示类别。我正在尝试根据特定的 id 过滤类别列表。如何在同一过滤器下添加 2 个 CategoryId？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:44:01.357

此答案已针对带有 Prestashop 模块 1.0.4 的 Appixia Mobile Engine 5 进行了更新

您当前使用的模块主要用于单个类别 id 过滤器。就像使用 Appixia 的任何东西一样，您通常可以解决大多数限制并做任何您想做的事情。这里有两个想法：

**解决方法 1：使用插件覆盖实现此功能**

使用这种方法，您无需更改应用程序中的任何内容。您可以保留现有模块并使用*单个*类别 ID 过滤器。*为单个*类别 id设置一个过滤器，并为其编造一些不存在的大数字（如 1001）。

我们实际上要做的是在请求类别 1001 时让服务器同时回复两个类别的产品。

[您可以在此处](http://kb.appixia.com/cart%3aplugin-overrides-prestashop)查看插件覆盖的一些示例。

我们需要的覆盖在`Items.php`. 看看功能`overrideItemListFilters`，它将非常适合您的需求。只需找到一个`Equal`带有值的过滤器类型，`1001`然后在覆盖中将其更改为`InGroup`具有您的 2 个类别 ID 的过滤器。

**解决方法 2：在应用程序中切换到更高级的项目列表模块**

另一种替代方法是仅通过更改您的应用程序而不接触服务器。基本项目列表活动相当有限。如果您在应用程序中迁移到更强大的项目列表模块，您将对过滤器有更多的控制权。看看这个[教程](http://kb.appixia.com/frontend%3atutorials%3acustomitemlist1)。项目列表`ItemGridView`支持您想要的任何过滤器，因此您可以`InGroup`直接指定。

# r - 如何将 ore.pull() 函数中给出的表名作为函数参数？/

> ID：15504528
> 
> 赞同：1
> 
> 时间：2013-03-19T16:04:57.867
> 
> 标签：r

我在 R 中有一个函数：

```
Wrapper = function(table_name){
  data = ore.pull(table_name)
} 
```

但是当我传递任何值时，它被视为字符串而不是对象名称。如何将其作为表名传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T08:38:21.277

这个问题在下面的论坛中得到解答。 [https://forums.oracle.com/message/11100954#11100954](https://forums.oracle.com/message/11100954#11100954)

# matlab - 修复 Matlab 中所有图像的大小 ROI

> ID：15504529
> 
> 赞同：0
> 
> 时间：2013-03-19T16:05:02.277
> 
> 标签：matlab, image-processing, roi

我有多个图像，我正在使用 imcrop 函数来获取图像中的 ROI。imcrop 的问题是它在每张图像上给了我不同大小的 ROI。我想为每个图像获取相同大小的 ROI。imcrop 中有一个选项，我可以通过它选择大小，但为此我需要保持 ROI 修复的位置。我想修复窗口大小但改变图像上窗口的位置。Matlab 中是否有可用于此功能的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T06:29:38.667

我相信我已经找到了从图像（交互式）裁剪固定大小窗口的解决方案。

```
img = imread('circuit.tif'); %your image
imshow(img);

h = imrect(gca, [75 68 130 112]);
setResizable(h,0)
position = wait(h);
imgc = imcrop(img,position);
figure();
imshow(imgc); 
```

使用 imrect 可以设置标准的 [xmin ymin width height] 参数。将 xmin 和 ymin 设置为任何值（0,0；近似位置）并将宽度和高度设置为所需的值。

现在您可以在图像周围拖动裁剪窗口并在完成后双击它。

问候， Piter71

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:56:27.307

首先，我认为`imcrop`. 它需要一个矩形`[xmin ymin width height]`作为输入。因此，如果要保持大小固定，则必须保持固定`width`并`height`更改矩形`xmin`的`ymin`左上角。

我想告诉你另一个可以使用的功能，即[roipoly](http://www.mathworks.com/help/images/ref/roipoly.html?searchHighlight=roipoly)。您将顶点的坐标与图像一起作为函数的输入。所以如果你想要一个六边形的 ROI，你会给出 6 个点作为输入。然后，您将获得一个二进制掩码，您可以将其相乘以获得您的投资回报率。

# java - 如何使用 IReport 以法语格式显示日期

> ID：15504530
> 
> 赞同：1
> 
> 时间：2013-03-19T16:05:10.550
> 
> 标签：java, date, format, ireport

我正在尝试以法语格式在碧玉报告中显示日期。我更改了此报告的选项，但每次我得到一个英文日期。请问我能做什么？

这是我得到的一些图片：

![http://img15.hostingpics.net/pics/975899rapport.jpg](../Images/253e2c3e6badee2b969ef3de36bd896b.png)

我也使用参数，但它不起作用

```
Map<String, Object> params = new HashMap<String, Object>();
params.put("date", new java.util.Date());
params.put(JRParameter.REPORT_LOCALE, Locale.FRENCH); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:15:14.057

这就是你所寻求的吗？

```
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

public class DateFormats {

    public static String frenchDate() {
        String timeStamp = new SimpleDateFormat("EEE MMM dd hh:mm:ss yyyy", Locale.FRANCE)
            .format(new Date());
        return timeStamp;
    }

    public static void main(String[] args) {
        System.out.println(frenchDate());
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T16:17:57.487

添加字符串字段并编辑表达式，如下所示：

```
new java.text.SimpleDateFormat("dd '-' MM '-' yyyy").format(new Date()) 
```

根据需要进行上述调整，例如更改`new Date()`日期字段，请查看 SimpleDateFormat 的文档。

# r - R - 与实数分布相似的随机数

> ID：15504532
> 
> 赞同：0
> 
> 时间：2013-03-19T16:05:16.713
> 
> 标签：r, random, distribution, sample, weighted

这是一个非常简化的示例，但希望它能让每个人都了解我在说什么：

```
real.length = c(10,11,12,13,13,13,13,14,15,50)

random.length = vector() 
for (i in 1:length(real.length)){
    random.length[i] = sample(min(real.length):max(real.length),1)
} 
```

（注意：我知道我可以说 random.length=sample(min:max,10) 但我需要在我的真实代码中使用循环。）

我希望我的随机长度与我的实际长度有相似的范围，但也有相似的分布。我试过 rnorm 但我的真实数据没有正态分布，所以我认为这不会起作用，除非我错过了一些选项。

是否可以使用我的真实数据设置示例函数的概率？因此，在这种情况下，给出 10-15 之间数字的较高权重/概率，以及 50 等高数字的较低权重/概率。

编辑：使用詹姆斯的解决方案：

```
samples = length(real.length) 
d = density(real.length)
random.length = d$x[findInterval(runif(samples+100),cumsum(d$y)/sum(d$y))]
random.length = subset(random.length, random.length>0)
random.length = random.length[1:samples] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:20:15.467

您可以从中创建`density`估计值和样本：

```
d <- density(real.length)
d$x[findInterval(runif(6),cumsum(d$y)/sum(d$y))]
[1] 13.066019 49.591973  9.636352 15.209561 11.951377 12.808794 
```

请注意，这假设您的变量是连续的，因此`round`您认为合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:44:30.523

虽然我可以阅读`R`，但我不能写它（我没有安装它，所以无法测试）。我将在 Matlab 中给你一个简单的例子，它会像你问的那样做 - 我希望这能激励你：

```
obs = sort([10 11 12 13 13 13 13 14 15 50]); % have to make sure they are sorted...
uo = unique(obs);
hh = hist(obs, uo); % find frequencies of each value
cpdf = cumsum(obs);
cpdfn = cpdf / max(cpdf); % normalized cumulative pdf
r = rand(1, 100); % 100 random numbers from 0 to 1
rv = round(interp1(cpdfn, uo, r)); % randomly pick values in the cpdfn; find corresponding "observation"
hr = hist(rv, 1:50);
hrc = cumsum(hr);
figure
plot(uo, cpdfn);
hold all;
plot(1:50, hhc/max(hhc))

figure; hist(rv, 1:50); 
```

这会产生以下图： ![在此处输入图像描述](../Images/3cd50df02b7ecff7f1ce00b8c51509b8.png)

![在此处输入图像描述](../Images/d8cdd24997c81afb124a854f8f0f4610.png)

注意 - 当您有更多观察时，这会更好；在当前示例中，由于您的样本相对较少，因此 15 到 50 之间的空间在大约 10% 的时间内被采样。

# ajax - p:inplace 不调用 setter

> ID：15504535
> 
> 赞同：1
> 
> 时间：2013-03-19T16:05:22.973
> 
> 标签：ajax, jsf, primefaces

我正在尝试`<p:inplace>`使用`<p:inputTextarea>`. 它“有效”，但来自 inputTextarea 的数据永远不会“保存”。“已保存”意味着永远不会调用 inputTextarea 后面的属性的设置器。在单击保存按钮之前和之后调用 getter。我已经看过有关`<p:ajax>`for 用法的帖子`<p:inplace>`，但这似乎是应该调用 setter 之后的事件。我究竟做错了什么？？

```
<p:inplace editor="true" emptyLabel="No comments entered.">
    <p:ajax event="save" listener="#{bean.handleSave}"
            update="commentsSuperPanel"/>
    <p:inputTextarea
            id="commentsOverall"
            value="#{bean.comments}"
            styleClass="commentAreas" 
            maxlength="4000"/> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:02:19.697

Discovered that there was an unrelated issue presenting itself without warning or error. I had a dialog that contained a form; and that dialog was defined inside another form. I moved the dialog declaration outside of the form, and all worked as expected.

# android - 检查图像是否在缓存中 - 通用图像加载器

> ID：15504550
> 
> 赞同：13
> 
> 时间：2013-03-19T16:05:49.110
> 
> 标签：android, universal-image-loader

我想标题说明了一切。我试过：

```
imageLoader.getMemoryCache().get(key); 
```

以图像 uri 作为键，但它总是返回`null`

虽然我在配置中启用了缓存。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-19T16:46:01.967

使用`MemoryCacheUtils`.

```
MemoryCacheUtils.findCachedBitmapsForImageUri(imageUri, ImageLoader.getInstance().getMemoryCache()); 
```

内存缓存可以包含一个图像的多个位图（不同大小）。所以内存缓存使用特殊键，而不是图像 url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-07T17:49:51.553

它应该是 MemoryCacheUtil **s**，所以你应该使用

```
MemoryCacheUtils.findCachedBitmapsForImageUri(imageUri, ImageLoader.getInstance().getMemoryCache()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-05T08:01:48.843

对于磁盘缓存使用下面的代码

```
public static boolean isDiskCache(String url) {
        File file = DiskCacheUtils.findInCache(url, ImageLoader.getInstance().getDiskCache());
        return file != null;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-02T12:56:06.803

有时，在使用通用图像加载器库时，加载器需要一段时间来验证远程图像是否已经加载到缓存中。要直接加载缓存文件，可以使用以下方法检查远程文件的本地副本是否已经制作：

```
 File file = imageLoader.getDiscCache().get(url);  
 if (!file.exists()) {  
      DisplayImageOptions options = new DisplayImageOptions.Builder()  
      .cacheOnDisc()  
      .build();  
      imageLoader.displayImage(url, imageView, options);  
 }  
 else {  
      imageView.setImageURI(Uri.parse(file.getAbsolutePath()));  
 } 
```

在此处检查 在此处[输入链接描述](http://cbpbenitez.blogspot.com/2013/11/access-cache-file-on-universal-image.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-27T11:15:31.220

我认为您可以在实用程序类中创建一个简单的方法，如下所示：

```
public static boolean isImageAvailableInCache(String imageUrl){
    MemoryCache memoryCache = ImageLoader.getInstance().getMemoryCache();
    if(memoryCache!=null) {
        for (String key : memoryCache.keys()) {
            if (key.startsWith(imageUrl)) {
                return true;
            }
        }
    }
    return false;
} 
```

并像这样使用它：

```
 if(Utils.isImageAvailableInCache(imageUrl)){
//
      } 
```

# c++ - 引用超类中的子类 (C++)

> ID：15504553
> 
> 赞同：1
> 
> 时间：2013-03-19T16:05:57.737
> 
> 标签：c++, inheritance, compiler-errors, subclass, superclass

我的设计实施有问题。有一个超类定义方法，该方法具有该超类的子类作为返回值。正如你在这里看到的：

```
#ifndef I_ATTITUDEDESCRIPTOR_H
#define I_ATTITUDEDESCRIPTOR_H

#include "cl_EulerAngles.h"
#include "cl_Quaternion.h"
#include "cl_RodriguesParameters.h"
#include "cl_RotationMatrix.h"
#include "cl_TransformationMatrix.h"

class i_AttitudeDescriptor {
    public:
        i_AttitudeDescriptor();
        virtual ~i_AttitudeDescriptor() = 0;

        virtual cl_EulerAngles* getEulerAngles(cl_EulerAngles* result) = 0;
        virtual cl_Quaternion* getQuaternion(cl_Quaternion* result) = 0;
        virtual cl_RodriguesParameters* getRodriguesParameters(cl_RodriguesParameters* result) = 0;
        virtual cl_RotationMatrix* getRotationMatrix(cl_RotationMatrix* result) = 0;
        virtual cl_TransformationMatrix* getTransformationMatrix(cl_TransformationMatrix* result) = 0;
    protected:
    private:
};

#endif // I_ATTITUDEDESCRIPTOR_H 
```

例如，其中一个子类由以下给出：

```
#ifndef CL_EULERANGLES_H
#define CL_EULERANGLES_H

#include "i_AttitudeDescriptor.h"

#include "cl_Quaternion.h"
#include "cl_RodriguesParameters.h"
#include "cl_RotationMatrix.h"
#include "cl_TransformationMatrix.h"

class cl_EulerAngles : public i_AttitudeDescriptor
{
    public:
        cl_EulerAngles();
        ~cl_EulerAngles();

        cl_EulerAngles* getEulerAngles(cl_EulerAngles* result);
        cl_Quaternion* getQuaternion(cl_Quaternion* result);
        cl_RodriguesParameters* getRodriguesParameters(cl_RodriguesParameters* result);
        cl_RotationMatrix* getRotationMatrix(cl_RotationMatrix* result);
        cl_TransformationMatrix* getTransformationMatrix(cl_TransformationMatrix* result);
    protected:
    private:
};

#endif // CL_EULERANGLES_H 
```

这些函数在 cl_EulerAngles.cpp 文件中实现。现在我遇到了问题，我得到了一个像这样的编译器错误：

```
i_AttitudeDescriptor.h|17|error C2143: syntax error : missing ';' before '*'|
i_AttitudeDescriptor.h|17|error C2433: 'i_AttitudeDescriptor::cl_EulerAngles': 'virtual' not permitted on data declarations|
i_AttitudeDescriptor.h|17|error C4430: missing type specifier - int assumed|
i_AttitudeDescriptor.h|17|error C2061: syntax error : identifier 'cl_EulerAngles'|
i_AttitudeDescriptor.h|17|error C4430: missing type specifier - int assumed|
i_AttitudeDescriptor.h|17|warning C4183: 'getEulerAngles': missing return type; assumed to be a member function returning 'int'|
i_AttitudeDescriptor.h|17|error C2253: "i_AttitudeDescriptor::getEulerAngles": pure specifier only applies to virtual function – specifier ignored|
||=== Build finished: 6 errors, 1 warnings (0 minutes, 0 seconds) ===| 
```

我希望有人可以帮助我解决这个小问题。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T16:15:18.560

编译问题是由于循环包含指令。然而，在简单的圆形包含之下，这里有一个更大的设计问题。基类不应该知道子类。

**更好的解决方案：**您应该返回一个指向 Base 类的指针并使用[Polymorphism](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。

**不是很好的解决方案：**如果您真的想继续当前的设计，您可能会考虑不包括子类头文件，而是在基类头文件中向前声明您的子类。这将解决循环包含。

我建议坚持第一个解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:16:24.817

这里的问题是循环包含；`i_AttitudeDescriptor.h`拉进来`cl_EulerAngles.h`，拉进来`i_AttitudeDescriptor.h`。一旦包含保护启动，您最终会丢失声明，这似乎是编译器所抱怨的。

至少有两种解决方案：

1.  前向声明使用的各种类型，`i_AttitudeDescriptor.h`而不是`#include`它们的头文件。`i_AttitudeDescriptor`不关心这些类的细节，只关心它们的名字。

2.  将所有这些虚函数声明`i_AttitudeDescriptor`为返回指向`i_AttitudeDescriptor`而不是指向特定类型的指针。您仍然可以在派生类中使用返回指向派生类型的指针的函数覆盖它们。

# mysql - SQL = vs LIKE vs LIKE BINARY，不区分大小写

> ID：15504554
> 
> 赞同：6
> 
> 时间：2013-03-19T16:05:58.500
> 
> 标签：mysql, sql, database

我在使用 SQL LIKE、= 和 LIKE BINARY 时遇到了相当奇怪的行为

注意：密码的前 3 个字符实际上是`3Vf`，查询的其余部分在语法上也是正确的。

```
SUBSTRING(password,1, 3) = "3VF"      -> returns true
SUBSTRING(password,1, 3) = "3Vf"      -> returns true

SUBSTRING(password,1, 3) LIKE "3VF"   -> returns true
SUBSTRING(password,1, 3) LIKE "3Vf"   -> returns true 
```

但是，如果我使用 LIKE BINARY，我会得到区分大小写的行为

```
SUBSTRING(password,1, 3) LIKE BINARY "3VF"   -> returns false
SUBSTRING(password,1, 3) LIKE BINARY "3Vf"   -> returns true 
```

我不明白为什么比较不区分大小写。考虑到密码是`VARCHAR(64)`. 在我在网上看到的所有资源中，它都说 = 和 LIKE 都区分大小写。

注意：我正在运行的完整查询是

```
SELECT * from users where username="natas16" AND SUBSTRING(password,1, 3) = XX 
```

此外，这**不是**一个真实世界的应用程序，而是一个 natas 级别。这是一个“黑客”游乐场。它们具有不同级别的漏洞，您应该利用这些漏洞。所以这不是一个真实世界的例子。

[http://www.overthewire.org/wargames/natas/](http://www.overthewire.org/wargames/natas/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T16:10:01.930

`LIKE`和是否`=`以区分大小写的方式操作将由您进行比较的字段的排序规则决定。如果你的字段有一个不区分大小写的排序规则（就像我猜你的那样），那么你会得到不区分大小写的比较结果。如果该字段具有二进制或区分大小写的排序规则，或者如果您`BINARY`在比较中使用关键字强制进行二进制比较，您将获得区分大小写的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:11:34.567

[阅读 abt collat​​e 选项以及如何从 mysql教程](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)中使其区分大小写

# ios - (NSDictionary *) labelAttrs = 0x00000001

> ID：15504556
> 
> 赞同：5
> 
> 时间：2013-03-19T16:06:00.033
> 
> 标签：ios, objective-c

做一些调试，我打印了一个 NSDictionary 变量的描述，它给出了这个：

```
(NSDictionary *) labelAttrs = 0x00000001 
```

有人可以澄清这是为什么`1`吗？

我会理解`nil`或对象指针，但为什么`1`呢？

更新

编码：

```
NSDictionary *labelAttrs = @{NSForegroundColorAttributeName:[UIColor darkGrayColor]}; 
```

它在 iOS5 而不是 iOS6 上运行时崩溃，但这是：

[新的对象字面量是否向后兼容 iOS 5？](https://stackoverflow.com/questions/12869703/are-the-new-object-literals-backwards-compatible-with-ios-5)

似乎说您可以在 iOS5 中使用新的文字（只要您针对 iOS6 构建并使用 Xcode >= 4.5 并使用最新的 LLVM 进行编译 - 例如参见屏幕抓取）。而且，根据 Apple 的说法，我应该可以使用它们：[https ://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/index.html](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/index.html)

![在此处输入图像描述](../Images/ec73121a87e6265fff06766967f46b9e.png)

这是它之前在 Xcode 中的样子：

![在此处输入图像描述](../Images/3ca9d78fa4f87a4651ca552e1456d024.png)

然后当我跨过时：

![在此处输入图像描述](../Images/b86f03130825ea4f23f8523d020b544e.png)

注意：这给了我同样的崩溃：

```
NSDictionary *labelAttrs = [NSDictionary dictionaryWithObjectsAndKeys:[UIColor darkGrayColor], NSForegroundColorAttributeName, [UIFont fontWithName:CUSTOMFONT size:size], NSFontAttributeName, [NSNumber numberWithInt:0], NSStrokeWidthAttributeName, nil]; 
```

删除它（以及以下 2 行代码）意味着应用程序运行时不会崩溃。但显然没有属性字符串。

更新：已解决。属性字符串在 iOS5 上不可用（至少对于 UILabel 的）：[NSAttributedString 在 iOS 6 之前可用吗？](https://stackoverflow.com/questions/13389647/is-nsattributedstring-available-before-ios-6)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:33:02.270

问题是[NSAttributedString UIKit 添加](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html)直到 iOS 6 才可用。这意味着常量 NSForegroundColorAttributeName 等没有定义。所以字典的创建在试图引用这些时失败了。

（调试这个的方法——不检查错误的 iOS 版本 (;) 的引用）——是分解语句：

```
UIColor* value1 = [UIColor darkGrayColor];
NSString* key1 = NSForegroundColorAttributeName;
UIFont* value2 = [UIFont fontWithName:CUSTOMFONT size:size];
NString* key2 = NSFontAttributeName;
NSNumber* value3 = [NSNumber numberWithInt:0];
NSString* key3 = NSStrokeWidthAttributeName;

NSDictionary *labelAttrs0 = [NSDictionary dictionaryWithObjectsAndKeys:nil];
NSDictionary *labelAttrs1 = [NSDictionary dictionaryWithObjectsAndKeys:value1, key1, nil];
NSDictionary *labelAttrs2 = [NSDictionary dictionaryWithObjectsAndKeys:value2, key2, nil];
NSDictionary *labelAttrs3 = [NSDictionary dictionaryWithObjectsAndKeys:value3, key3, nil]; 
```

然后看看什么失败了。在这种情况下，您可能会在分配 labelAttrs1 时失败。如果你然后是 NSLog value1 和 key1 你会在 key1 上得到一个错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:26:12.493

0x00000001 表示内存地址无效。你使用的是什么版本的 Xcode？您可能需要从 lldb 切换到 gdb

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:34:54.390

当我单步执行这样的代码时，我在 lldb 中看到了 0x00000001：

```
labelAttrs = [self someMethod]; 
```

如果您在评估 -someMethod 之前打印 labelAttrs，那么它将被分配给 0x00000001。

# java - 在后台运行应用程序

> ID：15504557
> 
> 赞同：0
> 
> 时间：2013-03-19T16:06:00.750
> 
> 标签：java, servlets

我目前正在为一个程序开发一个 servlet 的项目。

此 servlet 不侦听请求，而是希望它在后台运行并每 10 秒执行一次。

我`Thread.sleep(10000);`用来完成这个。

让这个 servlet 每 10 秒执行一次，同时允许其他进程运行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:43:28.467

You could use a SingleThreadPool and execute it using a QuartzScheduler. So you can change how often you want it to execute by changin only the configuration file. Your thread becames a job, you can assign priority, etc.

Here is documentation to read:

1.  [Scheduling and Thread Pooling](http://static.springsource.org/spring/docs/2.5.4/reference/scheduling.html)
2.  [what is Quartz](http://www.onjava.com/pub/a/onjava/2005/09/28/what-is-quartz.html?page=2)
3.  ...and [a tutorial on Quartz](http://www.roseindia.net/quartz/index.shtml).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:09:13.087

不要为此使用 servlet。它不会对您可靠地工作，因为 servlet 是专门为响应请求而设计的。相反，使用[ServletContextInitializer](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)来[安排 TimerTask](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)执行您的后台工作。

# qt - 如何更新嵌入在 Qt 中的 OpenGL GLWidget？

> ID：15504558
> 
> 赞同：0
> 
> 时间：2013-03-19T16:06:03.403
> 
> 标签：qt, opengl

我正在使用 Qt 和 OpenGL 开发一个非常简单的应用程序。该应用程序包含一些用于交互的按钮和一个包含 3 个页面的小部件选项卡，前两个用于分析和处理一些数据，第三个包含`GLWidget`应该在 3d 空间中绘制结果点的一个。

一开始 3d 空间不包含任何点，在处理完所有数据后，它应该绘制 3 个点。

到目前为止，我已经尝试调用一个外部函数来`paintGL()`在场景中心绘制一个实心立方体。该方法被正确调用，但小部件不显示任何立方体。

这是代码`glwidget.cpp`：

```
GLWidget::GLWidget(QWidget *parent) :
    QGLWidget(parent)
{
    connect(&timer, SIGNAL(timeout()), this, SLOT(updateGL()));
    timer.start(1000);
}

void GLWidget::initializeGL(int w, int h) {
    glClearColor(0.2f, 0.2f, 0.2f, 1);
    glViewport(0, 0, w, h);
    // Setup light
    const GLfloat light_ambient[] = { 0.0f, 0.0f, 0.0f, 1.0f };
    const GLfloat light_diffuse[] = { 1.0f, 1.0f, 1.0f, 1.0f };
    const GLfloat light_specular[] = { 1.0f, 1.0f, 1.0f, 1.0f };
    const GLfloat light_position[] = {2.0f, 5.0f, 5.0f, 0.0f };
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);
    glEnable(GL_DOUBLE);
    glShadeModel(GL_SMOOTH);
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHT0);
    glEnable(GL_LIGHTING);
    glEnable(GL_COLOR_MATERIAL);
    glLightfv(GL_LIGHT0, GL_AMBIENT, light_ambient);
    glLightfv(GL_LIGHT0, GL_DIFFUSE, light_diffuse);
    glLightfv(GL_LIGHT0, GL_SPECULAR, light_specular);
    glLightfv(GL_LIGHT0, GL_POSITION, light_position);
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);
    glDepthFunc(GL_LESS);
    glEnable(GL_COLOR_MATERIAL);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(60.0, 1.0, 0.0001, 1000.0);
    glMatrixMode(GL_MODELVIEW);
    current_view= TOP_VIEW;

}

// Display
void GLWidget::paintGL() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_DEPTH_TEST);
    glLoadIdentity();
    setView();
    if (current_view == EXPLORING_VIEW)
        calculate_lookpoint();
    gluLookAt(eyex, eyey, eyez, centerx, centery, centerz, upx, upy, upz);
    // Draw axis and add points
    drawAxis();
    int ind;
    Skyline s;
    if (s.skylineGenerated()) {
        drawCube();
        cout << "Generated" << endl;
    }
   swapBuffers();
}

void GLWidget::drawCube(void){
    cout << "Drawn\n";
    glTranslatef(0.0,0.0,0.0);
    glColor3f(1.0,0.0,0.0);
    glutSolidCube(2.0);
    update();
}

// Reshape
void GLWidget::resizeGL(int w, int h) {
    glViewport(0, 0, (GLsizei) w, (GLsizei) h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective (48.0, (GLfloat) w/(GLfloat) h, 10.0, 800.0);
    glMatrixMode (GL_MODELVIEW);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:25:00.580

1.  将计时器初始化代码放在 initializeGL 函数的末尾，因为您不希望在 intializeGL 之前调用您的paintGL 函数。（使用您当前的代码可能会发生这种情况）

2.  将您的计时器插槽连接到`QGLWidget::update`而不是`QGLWidget::updateGL`. 这不仅会调用`updateGL`您，还会允许将排队的绘制事件折叠成单个事件。

3.  确保您的 timer.singleShot() 不返回 true，因为这样小部件只会更新一次。

4.  你的 initializeGL 不应该带参数。Qt 永远不会调用您的 intializeGL 函数，因为它试图调用没有参数的 initialzeGL 函数，因此它将调用基类`QGLWidget::initializeGL`。您也不应该使用静态视口，并且应该处理覆盖的所有视口大小调整（glViewport）`QGLWidget::resizeGL( int w, int h )`。

# iphone - 从我的 facebook 用户 ID 和 accesstoken 获取所有朋友

> ID：15504559
> 
> 赞同：0
> 
> 时间：2013-03-19T16:06:06.307
> 
> 标签：iphone, ios, facebook

我想在表格视图中显示应用程序用户的所有 Facebook 朋友（照片、姓名、用户 ID）我得到了用户的用户 ID 和访问令牌。现在如何获取朋友列表？

有图形 api URL 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:21:10.980

你可以使用这个 URL：[https ://graph.facebook.com/me/friends 你可以在](https://graph.facebook.com/me/friends)[这里](http://developers.facebook.com/docs/reference/api/user/#friends) 找到详细的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:57:47.417

```
NSString *fields = @"id,name,picture,first_name";
  NSString *path = [NSString stringWithFormat:@"https://graph.facebook.com/me/friends?fields=%@",fields]; 
```

现在将其与您的 accessToken 合并

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@&access_token=%@", path,yourAccessToken]]; 
```

# c# - HTTP标头值的单字符串列表的非冲突分隔符标记？

> ID：15504560
> 
> 赞同：0
> 
> 时间：2013-03-19T16:06:06.837
> 
> 标签：c#, .net, web-config, http-headers, appsettings

我通常只是另一端的客户端 slob 评估偶尔的标题，所以我不确定所有可能的字符冲突是什么。无论如何，计划是有一个如下所示的 .NET appSettings 配置文件：

```
<?xml version="1.0"?>
<configuration>
  <appSettings>
    <add
        key="someWebServiceClassName"
        value="Cache-Control:No-Cache<separator?>Some-Other-Header:Some-Value" />
  </appSettings>
</configuration> 
```

我知道使用逗号、括号、管道、* 以及许多其他字符的标题值，所以我可以做一个字符串拆分或 C# 等效的值来构建一个列表来设置标题，这不太可能遇到与合法或流行的自定义标题值重叠？像 semis 这样的传统列表分隔符会很棒，但我敢打赌，这些分隔符在自定义标题中很常见。注意：现在我正在使用 {|} 这对我来说似乎有点新。单字符分隔符会很好。

# javascript - 如何将此脚本制作成淡入淡出动画

> ID：15504562
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:06:11.160
> 
> 标签：javascript

有人可以帮助我如何将其变为淡入淡出动画而不是简单的幻灯片效果。当涉及到javascript时，我是新手。我无法弄清楚如何在淡入淡出动画中做到这一点。我喜欢这个脚本，因为它很简单。如果有类似这样的jquery，请分享。这是我在下面找到的代码。提前致谢 ：）

```
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<style>
body{
background-repeat: no-repeat;
background-position: 50 50;
}
</style>
<script >
//Specify background images to slide
var imgs=new Array()
imgs[0]="http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/kazvan-1.jpg";
imgs[1]="http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/kazvan-2.jpg";
imgs[2]="http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/kazvan-3.jpg";
//Specify interval between slide (in miliseconds)
var speed=3000
//preload images
var processed=new Array()
for (i=0;i<imgs.length;i++){
processed[i]=new Image();
processed[i].src=imgs[i];
}
var inc=-1;
function slideimg(){
if (inc<imgs.length-1)
inc++;
else
inc=0;
document.body.background=processed[inc].src;
setTimeout(function(){
        slideimg();
    }, speed);
}

window.onload = function () {
    slideimg();
};
</script>
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%" id="table1" height="381">
    <tr>
        <td>
            <p>This is just dummy text</p>
            <p>This is just dummy text</p>
            <p>This is just dummy text</p>
            <p>This is just dummy text</p>
        </td>
    </tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:15:37.800

在 JavaScript 中进行淡入淡出并非不可能，但已经完成了数百次，以至于您不应该花时间重新发明它。如果你真的想知道它是如何工作的，我建议你通过一个简单的搜索来选择一个淡入淡出脚本并解构它，或者只是使用 jQuery 来做到这一点。就我个人而言，我认为 jQuery 是个炸弹。

[jQuery 淡入淡出](http://api.jquery.com/?s=fade)

# java - 如何在java中对列表对象（int）进行排序？

> ID：15504564
> 
> 赞同：0
> 
> 时间：2013-03-19T16:06:18.000
> 
> 标签：java, list, sorting

我对 Java 编程完全陌生，我已经被这个问题困扰了 2 周了！我不确定如何描述这个问题，所以我基本上添加了整个代码。我想做的基本上是按价值对 li.Poeng 进行排序。

```
 String getYear = yearFrom.getSelectedItem().toString();
    String leFile = "http://www.it.hiof.no/~borres/commondata/fotballstatistikk/CSV/data" + getYear + ".txt".trim();

    List<Functions> filData = Functions.setupList(leFile); 

    String fra = yearFrom.getSelectedItem().toString() + ":" + monthFrom.getSelectedItem().toString() + ":" + dayFrom.getSelectedItem().toString();
    String til = yearTo.getSelectedItem().toString() + ":" + monthTo.getSelectedItem().toString() + ":" + dayTo.getSelectedItem().toString();

    String[] fraDat = fra.split(":");

    int fraDag = Integer.parseInt(fraDat[2]);
    int fraMaan = Integer.parseInt(fraDat[1]);
    int fraYear = Integer.parseInt(fraDat[0]);

    int fraDato = fraYear * 10000 + fraMaan * 100 + fraDag; 

    String[] tilDat = til.split(":");

    int tilDag = Integer.parseInt(tilDat[2]);
    int tilMaan = Integer.parseInt(tilDat[1]);
    int tilYear = Integer.parseInt(tilDat[0]);

    int tilDato = tilYear * 10000 + tilMaan * 100 + tilDag; 

    HashMap<String, TabellLinje> tabell = new HashMap<>();

    //----------------------------------------------------------------------------------------------

    for (int i = 0; i < filData.size(); i++) {

        String[] kampdat = filData.get(i).getdato().split(":"); 
        int dag = Integer.parseInt(kampdat[2]);
        int maan = Integer.parseInt(kampdat[1]);
        int year = Integer.parseInt(kampdat[0]);

        int filDato = year * 10000 + maan * 100 + dag;

        if (fraDato < tilDato) {
            if (tilDato >= filDato) {

                // Calculate points

                int hMaal = Integer.parseInt(filData.get(i).gethMaal());
                int bMaal = Integer.parseInt(filData.get(i).getbMaal());

                String hLag = filData.get(i).gethLag();
                String bLag = filData.get(i).getbLag();

                TabellLinje hjemmelag;
                TabellLinje bortelag;

                if (tabell.containsKey(hLag)) 
                {
                    hjemmelag = tabell.get(hLag);

                } else {
                    hjemmelag = new TabellLinje();  
                    hjemmelag.Navn = hLag;
                    tabell.put(hjemmelag.Navn, hjemmelag);
                }

                if (tabell.containsKey(bLag)) {
                    bortelag = tabell.get(bLag);

                } else {
                    bortelag = new TabellLinje();
                    bortelag.Navn = bLag;
                    tabell.put(bortelag.Navn, bortelag);
                }

                if (hMaal > bMaal) {
                    hjemmelag.Poeng += 3;
                    hjemmelag.Matches++;
                    bortelag.Matches++;

                } else if (hMaal == bMaal) {
                    hjemmelag.Poeng++;
                    bortelag.Poeng++;
                    hjemmelag.Matches++;
                    bortelag.Matches++;

                } else if (bMaal > hMaal) {
                    bortelag.Poeng += 3;
                    hjemmelag.Matches++;
                    bortelag.Matches++;

                }

                hjemmelag.GoalsAgainst += bMaal;
                hjemmelag.GoalsFor += hMaal;
                bortelag.GoalsAgainst += hMaal;
                bortelag.GoalsFor += bMaal;

            }
        }
    }

    // Output to GUI
    textArea.removeAll();
    List<TabellLinje> tabellListe = new ArrayList(tabell.values());

    for (int i = 0; i < tabellListe.size(); i++) {       
        TabellLinje li = tabellListe.get(i);
        textArea.add(li.Navn + " " + li.GoalsFor + " " + li.GoalsAgainst + " " + li.Poeng + " " + li.Matches);
    }

} 
```

代码按应有的方式工作，预计我需要一个额外的代码来对 li.Poeng 变量进行排序，该变量是 TabellLinje 列表中的一个对象。

抱歉描述很糟糕，代码混乱。感谢可以帮助我的白衣骑士！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:11:31.133

您可以使用`Comparator`and`Collections.sort`方法：

```
 List<TabellLinje> tabellListe = new ArrayList(tabell.values());
    Collections.sort(tabellListe, new Comparator<TabellLinje>() {
        @Override
        public int compare(TabellLinje o1, TabellLinje o2) {
            return o1.Poeng - o2.Poeng;
        }
    }); 
```

所以排序将使用`Comparator`来决定哪个值更高。排序是稳定的，所以相同的值会留在原处。

Please adhere to java naming conventions however - variables should be in lower case, "poeng" rather than "Poeng". You may want to consider encapsulating your class too.

# c# - 让 Windows 服务与 WPF 应用程序通信？

> ID：15504568
> 
> 赞同：1
> 
> 时间：2013-03-19T16:06:32.557
> 
> 标签：c#, wpf, service

请告诉我是否有更好的方法来做到这一点。

我有一个 WPF 应用程序，但有时我需要运行一些密集的计算，所以我认为最好在它自己的服务中发生这种情况，而不是产生一个线程来从 WPF 应用程序运行它。

所以这是我的问题：

*   如何，当 WPF 应用程序打开时，我可以拥有它以便 Windows 服务也被打开？同样，当应用程序关闭时，Windows 服务会停止吗？计算中途是否停止也没关系
*   如何让 Windows 服务与 WPF 应用程序通信？我需要从 Windows 服务获取信息……比如它正在运行的计算的名称、完成的百分比等等，诸如此类的相当基本的东西。但我能够以某种方式从服务中获取这些信息非常重要，这样我就可以在 WPF 应用程序的 GUI 上显示它。
*   **重要的一点：**我还需要一种 GUI 与 Windows 服务对话的方法。例如，我将有一个 GUI 区域，用户可以在其中选择需要处理的某些计算。因此，我需要一种将所选计算列表发送到服务的方法，以便将其添加到计算队列中以运行。

我已经阅读了一些关于 WCF 的内容，但我之前没有使用过它，所以我不确定它是否对我正在做的事情有用。

如果有人对此有任何想法，将不胜感激。这似乎是一件相当简单的事情，但我没有找到有关它的信息 - 我可能正在搜索错误的术语，也许我正在尝试做的事情有一个公认的名称？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:09:45.857

> 我有一个 WPF 应用程序，但有时我需要运行一些密集的计算，所以我认为最好在它自己的服务中发生这种情况，而不是产生一个线程来从 WPF 应用程序运行它。

一般来说，没有必要这样做。由于 WPF 应用程序已经在运行，与尝试启动服务、使用 IPC 与其通信等相比，生成线程将更快、更简单、开销更少。在应用程序中进行计算通常是正确的方法去吧。

* * *

话虽如此，我将尝试按顺序回答您的问题：

> 如何，当 WPF 应用程序打开时，我可以拥有它以便 Windows 服务也被打开？同样，当应用程序关闭时，Windows 服务会停止吗？计算中途是否停止也没关系

如果你想这样做，你最好不要使用服务。服务通常有一个生命周期，它在*Windows*启动时启动，在系统关闭时关闭，并且不以用户身份运行。如果您只想启动它，只需将其设为普通（控制台）应用程序，然后使用`Process.Start`它来启动它。如果有必要，这也可以让你终止进程[`Process.Kill`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)。

> 如何让 Windows 服务与 WPF 应用程序通信？我需要从 Windows 服务获取信息……比如它正在运行的计算的名称、完成的百分比等等，诸如此类的相当基本的东西。但我能够以某种方式从服务中获取这些信息非常重要，这样我就可以在 WPF 应用程序的 GUI 上显示它。

这通常通过让您的“服务”（或应用程序）成为[WCF](http://msdn.microsoft.com/en-us/library/ms731082.aspx)主机来完成。然后，您的 WPF 应用程序可以充当“服务”的客户端并使用 WCF 传递消息。

> 重要的一点：我还需要一种 GUI 与 Windows 服务对话的方法。例如，我将有一个 GUI 区域，用户可以在其中选择需要处理的某些计算。因此，我需要一种将所选计算列表发送到服务的方法，以便将其添加到计算队列中以运行。

同样，启动 WCF 主机的过程将完成此操作。

话虽如此，除非有充分的理由这样做，否则仅在应用程序中使用线程要简单得多（并且可能更好），而不必担心单独的进程。

# android - 是否可以在相同的布局中有 2 个按钮具有相同的功能？

> ID：15504569
> 
> 赞同：0
> 
> 时间：2013-03-19T16:06:35.840
> 
> 标签：android

我有一长串搜索选项。我想要列表顶部和底部的按钮来“搜索”。两个按钮将具有相同的功能。我认为可以在最后复制并过去 xml 布局中的第一个按钮，但最后的按钮没有功能。如何在不在我的活动中添加一堆额外代码的情况下让它工作？

```
<ScrollView 
    android:layout_width= "fill_parent"
    android:layout_height= "fill_parent" >

<LinearLayout
    android:id="@+id/LinearLayout02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

<Button android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:id="@+id/save_search_options"
    android:text="Search" android:textSize="25dip"></Button>

<!--search options in between-->

<Button android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:id="@+id/save_search_options"
    android:text="Search" android:textSize="25dip"></Button>

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:09:28.280

你可以添加

```
Button
 ...
 android:onClick="functionName" 
```

两个按钮然后创建一个你`Activity`喜欢的功能

```
public void functionName(View v)
{
     //some logic
} 
```

然后它会知道你按了哪个。`Button`但是，将其保留在顶部可能会更有效`List`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:08:41.647

如果您将相同的附加`onClickListener`到每个，那么它们将具有相同的功能。`android:onClick`您可以通过使用XML 属性在 XML 中执行此操作以避免代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:09:05.860

您有两个具有相同 ID 的按钮。重命名其中一个并将侦听器分配给它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:10:21.047

为 2 按钮设置不同的 id，因此代码将如下所示

```
<ScrollView 
    android:layout_width= "fill_parent"
    android:layout_height= "fill_parent" >

<LinearLayout
    android:id="@+id/LinearLayout02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

<Button android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:id="@+id/top_save_search_options"
    android:text="Search" android:textSize="25dip"></Button>

<!--search options in between-->

<Button android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:id="@+id/bottom_save_search_options"
    android:text="Search" android:textSize="25dip"></Button>

</LinearLayout>
</ScrollView> 
```

并使用您设置的不同 id 在您的活动中声明按钮，您可以为两个按钮设置相同的侦听器

# r - 不循环从下一个开始

> ID：15504572
> 
> 赞同：0
> 
> 时间：2013-03-19T16:06:42.397
> 
> 标签：r

我有两个向量。一个是一系列开始或一系列 id，另一个是从每个开始到下一个位置的指南。

我分析的关键位置是第一位置。我将下一个向量中的相应数字添加到知道下一步要移动的位置。

```
starts <- c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20)
nexts <- c(4,2,1,1,3,5,1,1,3,2,10,2,3,4,1,1,1,1,4,6) 
```

我期望从“开始” 1 开始，next 告诉我移动 4 个位置，所以我在开始 1+4 结束，然后从开始 5 next 告诉我移动 3 个位置，现在我在开始 8，位置 8 对应的 next 是 1，我移动到 9，从 9 下一步移动是 3...

最终目标将是一个像这样一个目标 <- c(5,8,9,12....) 的向量。如果我们可以通过在每次“着陆”处读取下一步移动的大小来使用 nexts 进行“跳跃”，那么第一个向量“starts”可能真的不需要。像这样：从 1 我们跳到 4，到达 5，从位置 5 我们跳到 3 到 8 从 8 我们从 1 跳到 9....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:28:30.483

尽管您没有明确提出问题，但我想您想要的是：

```
starts <- c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20)
nexts  <- c(4,2,1,1,3,5,1,1,3,2,10,2,3,4,1,1,1,1,4,6)

i <- 1
while (i %in% starts) {
    s <- starts[i]
    n <- nexts[s] ### <--- correction: not nexts[i]
    i <- s + n
    cat(sprintf("%d + %d -> %d\n", s, n, i))
}

# 1 + 4 -> 5
# 5 + 3 -> 8
# 8 + 1 -> 9
# 9 + 3 -> 12
# 12 + 2 -> 14
# 14 + 4 -> 18
# 18 + 1 -> 19
# 19 + 4 -> 23 
```

**更新：**

抱歉，有一种方法可以不使用循环；只需使用递归函数（如果您可以通过循环获得相同的结果，我不建议这样做）...

```
recursive.func <- function(start, starts, nexts) {
    next.start <- start + nexts[start]
    if (!next.start %in% starts)
        return(next.start)
    return(c(next.start, recursive.func(next.start, starts, nexts)))
}

# execute like this:
my.start <- starts[1]
recursive.func(my.start, starts, nexts) 
```

# sql-server-2008-r2 - 服务器审核在哪里存储我的文件大小单选按钮选项？

> ID：15504574
> 
> 赞同：0
> 
> 时间：2013-03-19T16:06:59.233
> 
> 标签：sql-server-2008-r2

我已经创建了一个服务器审核定义，并且可以在`sys.server_file_audits`. 但我找不到代表我为单选按钮（MB、GB、TB）选择的值的列。系统在哪里存储这个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:32:20.983

[该值存储在 MB 中](http://msdn.microsoft.com/en-us/library/cc280544.aspx)。

因此，如果您选择 10 MB，它将存储 10。如果您选择 10 GB，它将存储 10240 (10 * 1024)。等等。它不会单独存储您的单选按钮选择（毕竟，如果您使用 DDL 而不是 GUI，那么您一开始就没有使用单选按钮）。

您还会注意到，如果您选择 1024 GB，点击 OK，然后再次打开属性对话框，它不会记住您的选择 - 它显示 1048576 MB (1024 * 1024)。

# python - 将循环数据存储在python中的单独变量中？

> ID：15504575
> 
> 赞同：0
> 
> 时间：2013-03-19T16:07:08.077
> 
> 标签：python

我想将返回函数中的循环数据存储到单独的变量中。这是我的代码如果有错请纠正我

功能：

```
 def rawi():
        a = raw_input("enter value of a")
        b = raw_input("enter value of b")
        return a, b

 #calling the above function:

 c = rawi()

 for i in c:
     print i 
```

我想要的输出应该是这样的： variable1 应该有从 variable2 返回的值应该有从 b 返回的值

感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T16:07:51.130

你的意思是像下面这样吗？

```
variable1, variable2 = rawi() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T16:12:50.260

如果您将循环通过 c，您的函数应该如下所示：

```
def rawi():
    a = raw_input("enter value of a")
    b = raw_input("enter value of b")
    return (a, b) #you can return tuple/list/whatever that stores multiple variables 
```

# objective-c - printf / string中的objective-c类型编码，宏中的格式

> ID：15504584
> 
> 赞同：0
> 
> 时间：2013-03-19T16:07:33.437
> 
> 标签：objective-c, nsstring, printf

如何创建任何原始值的字符串？好的，结构等可能是个大问题。但是对于浮点数，整数

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)

注意：这仅用于调试、单元测试和*娱乐*！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:07:33.437

这涵盖了最基本的......我不知道它是否足够......也许我忽略了一些明显的东西？

```
#define _PRIMITIVE_AS_STRING(value) \
({\
    const char *valueType = @encode(__typeof__(value));\
    NSString *format = [NSString stringWithFormat:@"%s", printFormatTypeForObjCType(valueType)];\
    NSString *valueAsString = [NSString stringWithFormat:format, value];\
    valueAsString;\
})

static const char * printFormatTypeForObjCType(const char *type)
{
    if(strcmp(type, @encode(BOOL)) == 0)
        return "%d";
    else if(strcmp(type, @encode(int)) == 0)
        return "%d";
    else if(strcmp(type, @encode(unsigned int)) == 0)
        return "%u";
    else if(strcmp(type, @encode(long)) == 0)
        return "%li";
    else if(strcmp(type, @encode(unsigned long)) == 0)
        return "%lu";
    else if(strcmp(type, @encode(long long)) == 0)
        return "%lli";
    else if(strcmp(type, @encode(unsigned long long)) == 0)
        return "%llu";
    else if(strcmp(type, @encode(float)) == 0)
        return "%f";
    else if(strcmp(type, @encode(double)) == 0)
        return "%f";
    else
        return "%d";
} 
```

# database - 访问 Access 2013 数据库的架构

> ID：15504588
> 
> 赞同：2
> 
> 时间：2013-03-19T16:07:36.430
> 
> 标签：database, ms-access, ms-office, oledb

如果我尝试读取 Access 2013 数据库的架构，则会收到以下错误：

```
no read permission on 'MSysRelationships' 
```

现在帮助告诉我

```
User-level security features are not available in Access apps, web databases, 
or databases that use one of the new file formats (.accdb, .accde, .accdc, .accdr). 
```

=> 如何读取该数据库的架构？

编辑 ：

这是我在 Linqpad 中的代码：

```
var stringBuilder = new OleDbConnectionStringBuilder();
stringBuilder.Provider = "Microsoft.ACE.OLEDB.12.0";
stringBuilder.DataSource = @"C:\Recommendations.accdb";

using (var connection = new OleDbConnection(stringBuilder.ToString().Dump()))
{
    connection.Open();
    var schemaTable = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] {null, null, null, "TABLE"});
    var sheetName = schemaTable.AsEnumerable().Select(row => row.Field<string>("TABLE_NAME")).First();
    schemaTable.Dump();

    string  namesQuery = "SELECT DISTINCT szRelationship, szReferencedObject, szObject FROM MSysRelationships";
    string  namesQuery2 =  string.Format("select Name, Age from [{0}]", "Users");

    using (var command = new OleDbDataAdapter(namesQuery, connection))
    {
        var dataSet = new DataSet();
        command.Fill(dataSet, sheetName);
        dataSet.Dump();
    }
    connection.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:53:56.620

[从对此处](https://stackoverflow.com/questions/6152545/how-can-i-get-a-list-of-tables-in-an-access-jet-database)类似的较早问题的回答来看，我怀疑您根本无法通过 OleDb 连接直接读取 Access 中的系统表。但是，您也许可以通过该`OleDbConnection.GetSchema`方法获得所需的信息（详情请[点击此处](http://msdn.microsoft.com/en-us/library/ms135983.aspx)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-29T10:40:18.283

在连接字符串中，设置“用户 ID=管理员”。

使用 Access 打开数据库，按 Ctrl-G 得到“立即”窗口，然后执行以下命令：

```
CurrentProject.Connection.Execute "GRANT SELECT ON MSysRelationships TO Admin;" 
```

这将授予“用户 ID”从该表中读取 (SELECT) 的权限。这同样适用于其他系统表，如“MSysObjects”。

# python - 有没有办法从 ElementTree 元素中获取逐字字符串？

> ID：15504593
> 
> 赞同：1
> 
> 时间：2013-03-19T16:07:50.353
> 
> 标签：python, xml-parsing, elementtree

我正在尝试检查 XML 元素中文本信息的 MD5 哈希值，包括其所有子元素。这是与 hipay 服务交互所必需的。

```
def CheckMD5(tree):
    m = hashlib.md5()
    body = tree.find('result')
    m.update(ET.tostring(ET.ElementTree(body).getroot(), method="html"))

    return tree.find('md5content').text == m.hexdigest() 
```

完整代码： [https ://github.com/fabiosantoscode/python-hipay/blob/master/hipay.py#L566](https://github.com/fabiosantoscode/python-hipay/blob/master/hipay.py#L566)

我的问题是调用`ElementTree.tostring`with`method="xml"`会使 ElementTree 折叠空元素的结束标签，但使用`method="html"`我会丢失大写。例子：

```
>>> ET.tostring(ET.fromstring('<rt><a></a><CapName>asd</CapName></rt>'), method='xml')
'<rt><a /><CapName>asd</CapName></rt>'
>>> ET.tostring(ET.fromstring('<rt><a></a><CapName>asd</CapName></rt>'), method='html')
'<rt><a></a><CapName>asd</capname></rt>'
>>> 
```

笔记：

我根本不需要修改这个 XML 文档，我只需要提取`<result>`元素的字符串数据。如果有其他图书馆允许我这样做，请指出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:22:19.450

`LH.tostring`不折叠结束标签：

```
In [34]: import lxml.etree as ET

In [35]: import lxml.html as LH

In [36]: LH.tostring(ET.fromstring('<rt><a></a><CapName>asd</CapName></rt>'))
Out[36]: '<rt><a></a><CapName>asd</CapName></rt>' 
```

# servicestack - 在 servicestack 中实现特定范围的 httphandler

> ID：15504596
> 
> 赞同：1
> 
> 时间：2013-03-19T16:07:51.857
> 
> 标签：servicestack

我有一个 ServiceStack 服务，它以下载的形式返回视频文件。完成此操作的代码如下。它可以在除 iOS 之外的所有设备上运行（视频播放）。经过一些研究，似乎需要定制 httphandler 以支持“特定于范围”的请求。可以在以下 url 中找到此问题的描述。

[http://dotnetslackers.com/articles/aspnet/Range-Specific-Requests-in-ASP-NET.aspx](http://dotnetslackers.com/articles/aspnet/Range-Specific-Requests-in-ASP-NET.aspx)

我想知道是否可以自定义 ServiceStack（以及下面的下载代码）以支持特定范围的请求。谢谢你。

```
 if (fi.Exists)
                {
                    //optimized way according to mythz
                    var aspRes = (System.Web.HttpResponse)base.RequestContext.Get<IHttpResponse>().OriginalResponse;
                    //aspRes.ContentType = "application/octet-stream";
                    aspRes.ContentType = "video/mp4";
                    aspRes.AppendHeader("Content-Disposition", "attachment; filename=" + fi.Name);
                    aspRes.AddHeader("content-length", fi.Length.ToString());
                    aspRes.TransmitFile(fi.FullName);
                    return null;
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:55:17.020

注意：我上面链接的网站有实现 MP4DownloadHandler 的代码，可以插入并用于支持特定范围的下载请求。您必须使用 ServiceStack 注册此处理程序。所以这个问题不再相关。

我确实有一个相关的问题（链接如下），现在我已经从我的自定义 IHTTPHandler 中绕过了 ServiceStack 访问缓存客户端的能力。

[我绕过了servicestack来实现我自己的IHTTPHandler，但现在我想访问缓存](https://stackoverflow.com/questions/15508077/i-bypassed-servicestack-to-implement-my-own-ihttphandler-but-now-i-want-access)

# r - 我应该如何用R求解非线性方程

> ID：15504597
> 
> 赞同：5
> 
> 时间：2013-03-19T13:02:34.453
> 
> 标签：r

我想问你如何用 R 求解这样的非线性方程？EL 和 DR 是给定的值。我只想获得阿尔法。

![非线性方程](../Images/c1d501479f3be3da1353d925841b808c.png)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:14:40.970

您可能想查看[`nleqslv`](http://cran.r-project.org/web/packages/nleqslv/)包裹或[`BB`](http://cran.r-project.org/web/packages/BB/)包裹。

不过要小心，因为他们对方程有一些未说明的（在我阅读过的文档中）连续性要求。

# linux - mod_evasive 模块 DOSSystemCommand 和 DOSEmailNotify 选项不起作用

> ID：15504603
> 
> 赞同：0
> 
> 时间：2013-03-19T16:08:01.563
> 
> 标签：linux, ubuntu, apache2, apache-modules, mod-evasive

我已经在 Ubuntu 10.04 上安装了带有 mod_evasive 模块的 apache2，并且我想在 mod_evasive 将 IP 列入黑名单时收到电子邮件警报。为此，我在 /etc/apache2/conf.d/modevasive 中提到了我的电子邮件地址。当我从终端 /bin/echo 'test apache mod' 发送电子邮件时 | sudo /bin/mail -s 'test apache mod' vinish@example.com 我将收到并发送电子邮件

即使我在 DOSSystemCommand 下提到它，它对我也不起作用

如果尝试使用 perl 脚本阻止网站，并且我还提到了日志文件 /etc/apache2/conf.d/modevasive 文件及其工作文件，这意味着模块以某种方式工作 DOSSystemCommand 和 DOSEmailNotify 选项不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:43:45.237

直接来自[Linode 库](http://library.linode.com/web-servers/apache/mod-evasive)

> 确保在 mod_evasive.c（或 mod_evasive20.c）中正确设置了 MAILER。默认为“/bin/mail -t %s”，其中 %s 用于表示配置中设置的目标电子邮件地址。如果您在 linux 或其他具有不同类型邮件程序的操作系统上运行，则需要更改此设置。

# php - 在 ZF 2.1.4 中引用 SQL 查询的值

> ID：15504605
> 
> 赞同：7
> 
> 时间：2013-03-19T16:08:07.717
> 
> 标签：php, zend-framework2

所以我已经升级到 ZF 2.1.4，我收到一条通知，上面写着：`Attempting to quote a value in Zend\Db\Adapter\Platform\Mysql without extension/driver support can introduce security vulnerabilities in a production environment`

我的 dbadapter 是这样实例化的：

```
return array(
  'service_manager' => array(
    'factories' => array(
      'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory',
    )
   ),
   'db' => array(
     'driver'         => 'pdo_mysql',
     'driver_options' => array(
       PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'UTF8'"
     ),
     'dsn'            => 'mysql:dbname=test;host=192.168.1.8',
     'username'       => 'test',
     'password'       => 'test',
   )
 ); 
```

我想引用以下内容：

```
$order = 'field(ce.id, ' . $this->_db->getPlatform()->quoteValueList($ids) . ')';
$select->order(new Expression($order)); 
```

我应该怎么做？我的印象是 pdo_mysql 有驱动程序支持引用值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T16:32:18.973

看起来您已经通过添加找到了解决方案`$this->platform->setDriver($this->getDriver());`。也看看这个：

请参阅此版本随附的公告和安全说明：http: [//framework.zend.com/security/advisory/ZF2013-03](http://framework.zend.com/security/advisory/ZF2013-03)

发行说明： http: [//framework.zend.com/blog/2013-03-14-zend-framework-3-for-1-release-day.html](http://framework.zend.com/blog/2013-03-14-zend-framework-3-for-1-release-day.html)

# c# - Release Build 包含额外的文件，我需要这些吗？

> ID：15504610
> 
> 赞同：16
> 
> 时间：2013-03-19T16:08:23.880
> 
> 标签：c#, .net, windows

我用 Visual Studio 2012 Express 构建了我的程序，bin/release/ 包含一些其他文件以及 exe。我需要分发这些文件吗？

*   myApp.exe.config
*   我的应用程序.pdb
*   myApp.vshost.exe
*   myApp.vshost.exe.config
*   myApp.vshost.exe.manifest

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T16:10:35.750

你确实（可能）需要

*   myApp.exe.config

其中包含可执行文件的配置设置。

你不需要其他人。

*   我的应用程序.pdb

包含调试符号

*   myApp.vshost.*

调试时由 Visual Studio 使用（*vshost*表示 Visual Studio 主机）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T16:20:25.520

这取决于。其他答案正确地说 myApp.exe 和 myApp.exe.config 是必不可少的选择。

您可能还想发送 PDB 文件。如果这样做，则您有更多用于调试目的的选项（例如 - 可以在引发异常的代码中记录行号）。

可能没有任何您想要发送 vshost 文件的用例。

但是：除了 exe 和配置之外的任何东西都可以使您的软件更容易进行逆向工程；并增加您的包裹尺寸。

**我认为在大多数情况下，答案是，出于这些原因**，只发布 myApp.exe 和 myApp.exe.config 。****

 **请查看这些先前的问题以获取更多信息：

[包含 PDB 文件的优缺点](https://stackoverflow.com/questions/2825813/advantages-and-disadvantages-of-including-pdb-files-with-your-release-applicatio)

[发布版本仍有 PDB 文件](https://stackoverflow.com/questions/2371032/c-sharp-release-version-has-still-pdb-file)

[如何关闭 PDB 生成](https://stackoverflow.com/questions/2453841/how-to-turn-off-pdb-generation-and-vshost-for-all-release-builds)

[vshost exe的目的是什么](https://stackoverflow.com/questions/774187/what-is-the-purpose-of-vshost-exe-file)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T16:10:24.063

myApp.exe > 是

myApp.exe.config > 是

其他 > 没有

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T21:29:42.023

为了在将代码部署到客户端时获得应用程序的最佳性能，您可以摆脱：

我的应用程序.pdb

这是一篇关于开发人员需要了解的关于 pdb 文件的好文章： [https ://www.wintellect.com/pdb-files-what-every-developer-must-know/](https://www.wintellect.com/pdb-files-what-every-developer-must-know/)

pdb 文件用于调试目的**

# c# - 文本框不发送输入的值

> ID：15504612
> 
> 赞同：0
> 
> 时间：2013-03-19T16:08:26.320
> 
> 标签：c#, asp.net, .net

我在 aspx 中有以下 html，所以它已经是一种形式：-

```
<asp:TextBox ID="Name" runat="server" MaxLength="50" Width="175px"></asp:TextBox> 
```

我有一个按钮：-

```
<asp:Button ID="updateDetails" Text="Update Details" runat="server" OnClick="updateDetails_Click" /> 
```

在后面的代码中，我有`updateDetails_Click`proc：-

```
protected void updateDetails_Click(object sender, EventArgs e)
{
    utils utils = new utils();
    string connectionString = ConfigurationManager.ConnectionStrings[utils.liveTest() + "arenadestinationsConnectionString"].ToString();

    string SQL = "UPDATE Users SET "
                + "Name = @Name, "                            
                + "WHERE IdUser = @iDUser";

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        SqlCommand command = new SqlCommand(SQL, connection);

        command.Parameters.AddWithValue("@Name", Name.Text);
        command.Parameters.AddWithValue("@iDUser", Session["loggedIn"].ToString());

        try
        {
            connection.Open();
            command.ExecuteReader();
        }
        catch
        {

        }
        finally
        {
            connection.Close();
        }
    }
} 
```

如果我在 Name 文本框中输入新文本，当我单击 Update Details 按钮时，Name.Text 始终显示原始文本，而不是修改后的文本。

我究竟做错了什么？我正在将自己从 VB 转换为 C#，所以毫无疑问我会学习一些技巧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:11:48.717

您不能更新任何记录调用`ExecuteReader`，因为这是 SELECT 语句（读取数据）。如果要更新数据库中的数据，必须调用`ExecuteNonQuery`

因此，将您的代码更改为：

```
command.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T16:11:25.497

改变：

```
 command.ExecuteReader(); 
```

至

```
 command.ExecuteNonQuery(); // This is for insert, update, delete 
```

你可以省略`@`：

```
 command.Parameters.AddWithValue("Name", Name.Text);
    command.Parameters.AddWithValue("iDUser", Session["loggedIn"].ToString()); 
```

# php - 结果未在mysql php中显示get id

> ID：15504617
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:08:35.277
> 
> 标签：php, mysql

网址：

```
empdetail.php?id=1 
```

我的 MySQL 数据库中有两个表。我想合并两个表，我想我做到了。`_GET['id']`$或其他代码中可能存在一些问题。当我单击`empdetail.php?id=1`时，结果显示完美。当我单击`empdetail.php?id=2`或`empdetail.php?id=3`等时，没有显示任何结果。我不知道为什么它没有显示任何结果。

```
 <?
    //////Displaying Data/////////////

       //connect to database

         mysql_connect('localhost','root','');
         mysql_select_db('cdcol');

    $id=$_GET['id']; // Collecting data from query string
    if(!is_numeric($id)){ // Checking data it is a number or not
        echo "Data Error"; 
        exit;
    }

    $result = mysql_query("SET NAMES utf8"); //the main trick

    $query = "SELECT ospos_employees.person_id, ospos_people.first_name ".
     "FROM ospos_employees, ospos_people ".
        "WHERE ospos_employees.person_id = ospos_people.person_id='$id'";

    $result = mysql_query($query) or die(mysql_error());

    // Print out the contents of each row into a table 
    while($row = mysql_fetch_array($result)){
        echo $row['person_id']. " - ". $row['first_name'];
        echo "<br />";
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:11:02.377

```
$query = "SELECT ospos_employees.person_id, ospos_people.first_name ".
     "FROM ospos_employees, ospos_people ".
        "WHERE ospos_employees.person_id = ospos_people.person_id AND ospos_people.person_id =".$id; 
```

我有一个问题：为什么您的查询从 2 个表中选择。关于什么

```
 $query = "SELECT ospos_people.person_id, ospos_people.first_name ".
         "FROM  ospos_people ".
            "WHERE  ospos_people.person_id =".$id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:15:18.720

首先，您的 SQL 语句是错误的。转换为直接 SQL：

```
SELECT 
    ospos_employees.person_id, ospos_people.first_name
FROM
    ospos_employees, ospos_people
WHERE 
    ospos_employees.person_id = ospos_people.person_id= '$id' 
```

你会发现你的`WHERE`陈述是错误的。你需要修复它。任何一个：

```
ospos_employees.person_id = '$id' 
```

或者

```
ospos_people.person_id= '$id' 
```

或（如果有意）：

```
ospos_employees.person_id = '$id' AND ospos_people.person_id= '$id'
                                  ^^^ 
```

另请注意，SQL 中的 (int) 值不需要它周围的 tic。

**注意：**不要使用 MySQL_* 函数，因为它们在 PHP 5.5 中已被弃用。请改用 MySQLi_* 或 PDO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:34:04.990

这是我的完整答案：

```
 <?
    //////Displaying Data/////////////

       //connect to database

         mysql_connect('localhost','root','');
         mysql_select_db('cdcol');

    $id=$_GET['id']; // Collecting data from query string
    if(!is_numeric($id)){ // Checking data it is a number or not
    echo "Data Error"; 
    exit;
    }

    $result = mysql_query("SET NAMES utf8"); //the main trick

    $query = "SELECT ospos_employees.person_id, ospos_people.first_name 
             FROM ospos_employees
             inner join ospos_people on(ospos_employees.person_id = ospos_people.person_id)
             where ospos_employees.person_id = $id";

    $result = mysql_query($query) or die(mysql_error());

    // Print out the contents of each row into a table 
    while($row = mysql_fetch_array($result)){
        echo $row['person_id']. " - ". $row['first_name'];
        echo "<br />";
    }

    ?> 
```

基本上你的查询是错误的，我希望这会有所帮助。

萨卢多斯 ;)

# android - Android - 重复 WebService 调用

> ID：15504623
> 
> 赞同：1
> 
> 时间：2013-03-19T16:08:44.493
> 
> 标签：android, timer, android-asynctask, alarmmanager, android-handler

我需要经常使用 JSON 网络服务（每 5.10 秒最多）。

为了测试目的，我在 AsyncTask 中实现了 web 服务调用，每当我按下按钮时都会执行该调用。

我应该使用 Handlers、Timers 还是 AlarmManager？

我有点困惑，因为 AsyncTask 创建了自己的线程，但是这些方法中的任何一个都不会创建另一个线程，从而创建一个将创建另一个线程的线程吗？

我使用 AsyncTask 实现了它，因为每当 web 服务调用出现问题时，我无法让应用程序挂起，所以如果第一次调用失败，如果第二次调用成功，应该没有任何问题，我正在获取的数据将第二次执行任务时出现。

（GCM 可能是一个解决方案，但现在我需要使用轮询而不是通知..）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:13:50.137

我建议您使用[Handler.postDelay(Runnable r,long delayMillis)](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)并在所需延迟后再次启动您的流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:13:57.543

处理程序不会创建新线程，它们发生在 UI 线程上。因此，您不能对其执行 HTTP 请求。

我实际上不会为您的用例建议 AsyncTasks。您将收到无序完成的请求。此外，根据您运行的操作系统版本，它们可能并行运行，也可能不并行运行。

我对你的建议是使用线程。它们存在于 Android 中，如果您希望在 Activity 处于前台时连续运行某些东西，并且您只需要担心一件事而不是 N 个任务，它们是卸载的首选方法。（如果你想在不在前台时运行它，你需要一个服务）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T11:55:36.117

我从这里找到了很棒的教程

[https://www.thepolyglotdeveloper.com/2014/10/use-broadcast-receiver-background-services-android/](https://www.thepolyglotdeveloper.com/2014/10/use-broadcast-receiver-background-services-android/)

服务将每隔 30 分钟定期在后台运行。根据需求改变它。

愿它对你有所帮助。

# mysql - MYSQL 错误 1005 (HY000): 无法创建表

> ID：15504626
> 
> 赞同：0
> 
> 时间：2013-03-19T16:08:52.380
> 
> 标签：mysql

我收到此错误，我不知道为什么这是我第一次使用 MYSQL，而且我似乎无法找到适用于任何地方的解决方案。

```
CREATE TABLE Orders ( 
 ordID INT NOT NULL AUTO_INCREMENT, 
 sellName VARCHAR(255) NOT NULL, 
 itemPrice REAL NOT NULL, 
 ordItems VARCHAR(255) NOT NULL, 
 ordQuantity INT NULL, 
 CONSTRAINT pk_order PRIMARY KEY (ordID), 
 CONSTRAINT fk_ord_sell FOREIGN KEY (sellName) REFERENCES Seller 
(sellName), 
 CONSTRAINT fk_ord_item FOREIGN KEY (itemPrice) REFERENCES Item 
(itemPrice) 
) ENGINE = InnoDB; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:36:49.183

我认为您的问题在于外键....因为我这样做：

```
 CREATE TABLE Orders ( 
 ordID INT NOT NULL AUTO_INCREMENT, 
 sellName VARCHAR(255) NOT NULL, 
 itemPrice REAL NOT NULL, 
 ordItems VARCHAR(255) NOT NULL, 
 ordQuantity INT NULL, 
 CONSTRAINT pk_order PRIMARY KEY (ordID)
 ) ENGINE = InnoDB; 
```

让我以完美的方式创建表格。

萨卢多斯。

# javascript - 如何使用 JavaScript 将 SVG 图像转换为 SVG 代码以获取多边形或路径？

> ID：15504628
> 
> 赞同：1
> 
> 时间：2013-03-19T16:08:57.163
> 
> 标签：javascript, svg, polygon

我有兴趣知道是否可以选择一个 SVG 文件，比如使用 JavaScript/jQuery 在您的 html 文件中选择 example.svg，并将多边形/polypath/path 作为字符串获取以进行进一步操作**，而无需将图像保存到桌面并使用 InkScape/Adobe Illustrator 或任何其他矢量处理程序手动提取代码**。

这是我的目标：

*前*

```
<img src="example.svg" /> 
```

*后*

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <polygon points="100,10 40,180 190,....." style="......"/>
</svg> 
```

以及我希望使用的代码：

```
$(document).ready(function() {

    // convert the svg into polygon, for instance
    function convertSVG(svg){
        ...
    }

    convertSVG(/* get that SVG in img tags */);

}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:21:20.683

使用 jQuery，看起来你可以做类似的事情

```
$.get("/path/to/file.svg", function(data) {
    var svg_data = data.childNodes;
}); 
```

然后, `svg_data`, 将以 DOM 节点格式保存 SVG 数据的标签，因此您可以执行以下操作：

```
$("#my_holder").html(svg_data); 
```

然后`#my_holder`会有图像在里面。

# java - Java字节码指令组合对操作数栈的影响

> ID：15504629
> 
> 赞同：2
> 
> 时间：2013-03-19T16:08:59.880
> 
> 标签：java, assembly, bytecode

对于使用 ASM 手动编写的 Java 字节码指令序列，有没有办法访问堆栈的状态？例如，对于如下组合：

```
ILOAD_0,ILOAD_1,IADD,DUP -> 1,1 
```

这里的动机是编写测试代码来验证给定的指令集是否导致给定的堆栈，例如

```
assert getCurrentStackLength() == 2 
```

或者

```
assert getTopElement() == (int) 1 
```

等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:54:52.697

堆栈是 JVM 的内部细节，实际上可能并不存在。

典型的 JVM 有两种操作模式——解释和 JIT 编译。Interpertation 实际上模拟了堆栈和局部变量。JIT 编译将所有内容编译为机器代码，因此不存在操作数堆栈或局部变量表之类的东西。

基本上，您需要做的是查看 JVM 的代码，找到一种方法强制它始终解释您的代码，添加调试代码以打印出堆栈等，然后重新编译并重建所有内容。显然不是胆小的人的任务。

然而，更大的问题是你为什么要这样做。您是否尝试对 JVM 进行单元测试？您编写的任何代码都比您正在测试的代码更有可能出现错误。

如果您只想找出字节码中特定点的堆栈和局部状态，那么您只需要一个静态验证器即可。那里有很多。如果你有兴趣，我已经[在 Github 上写了一篇。](https://github.com/Storyyeller/Krakatau)

# python - 在 github 存储库的构建中伪造鸡蛋

> ID：15504631
> 
> 赞同：0
> 
> 时间：2013-03-19T16:09:00.587
> 
> 标签：python, django, packaging, buildout, egg

我想在我正在处理的 Django 项目中尝试这个中间件：[https](https://github.com/directeur/django-pdf) ://github.com/directeur/django-pdf 。它的名称为“django-pdf”，但与[https://pypi.python.org/pypi/django-pdf/1.0.2](https://pypi.python.org/pypi/django-pdf/1.0.2)不同。不幸的是，Directeur django-pdf 也并非易事：它没有 setup.py 或 requirements.txt。

是否有一些构建配方或方法可以将包安装到 django 路径中，或者我是否被迫分叉存储库并添加 setup.py？

这是我当前的开发 buildout.cfg：

```
[buildout]
parts =
    python
    django
    django-nose
    pyflakes
show-picked-versions = true
develop = .
eggs = django-core7
versions = versions

[python]
recipe = zc.recipe.egg
interpreter = python
eggs = ${buildout:eggs}

[django]
recipe = djangorecipe
project = core7
projectegg = core7
settings = development
test = core7
eggs =
    ${buildout:eggs}
    ${django-nose:eggs}
    django_pdb
extra-paths = ${buildout:sources-dir}

[django-nose]
recipe = zc.recipe.egg
eggs =
    django-nose
    coverage

# Make this a separate part so it doesn't get included in Django's path.
[pyflakes]
recipe = zc.recipe.egg
eggs = pyflakes

[versions]
django = 1.5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:31:00.607

据我了解，buidout 在很大程度上取决于 setuptools（或至少是 setup.py）。没有这个，buildout 就不能产生分布（一个鸡蛋）。幸运的是，GitHub 让您可以轻松地 fork 一个存储库，这样您就可以添加一个 setup.py。;-) 您可能需要考虑提供补丁。

由于没有配方（据我所知）可以让您在没有 setup.py 的情况下添加项目。这样的项目听起来像是一种反模式，因为这会破坏需要 setup.py 的项目的“合同”。

第一个选项似乎更好。当您的项目在 GitHub 上时，您可以使用 mr.develop 来引入您的依赖项。

# regex - 使用 Sed 找到正确的正则表达式

> ID：15504632
> 
> 赞同：0
> 
> 时间：2013-03-19T16:09:01.680
> 
> 标签：regex, sed

我正在尝试使用 替换`TSV`文件中的一些文本`sed`，但我被正则表达式卡住了。

这是一行的示例：

```
0   NA  intron (NR_045393, intron 2 of 2)   intron (NR_045393, intron 2 of 2)   1089 
```

我想替换`intron (NR_045393, intron 2 of 2)`为`intron`, 以获得：

```
0   NA  intron  intron  1089 
```

要匹配的模式可以是内含子`(NM_001081221, intron 1 of 20)`或`intron (NM_144536, intron 5 of 15)`

我尝试替换模式如下，但我正在努力做到这一点

```
sed -i 's/intron.(\([a-zA-Z0-9\/_]\+\)\/,\s[a-zA-Z]\s[0-9]\s[a-z]\s[0-9])/intron/g' test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:24:15.510

如果您只想删除括号中的任何内容，只需使用

```
sed -e 's/([^)]*)//g' 
```

要同时删除左括号前的空格，请将其添加到正则表达式：

```
sed -e 's/ ([^)]*)//g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:22:55.540

试试这个：

```
sed -E -i 's/intron \([A-Z0-9_]+, intron [0-9]+ of [0-9]+\)/intron/g' test 
```

# session - 使用 ServiceStack 实现多个 ICacheClient

> ID：15504636
> 
> 赞同：2
> 
> 时间：2013-03-19T16:09:11.340
> 
> 标签：session, caching, servicestack

我刚开始阅读有关 ServiceStack 的会话和缓存机制的信息，所以我可能会遗漏一些东西。有没有办法在 ServiceStack 中使用多个 ICacheClient 实现？

根据[https://github.com/ServiceStack/ServiceStack/wiki/Sessions](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)和[https://github.com/ServiceStack/ServiceStack/wiki/Caching](https://github.com/ServiceStack/ServiceStack/wiki/Caching)您可以添加一个会话插件，如下所示：

```
public override void Configure(Container container)
{
    Plugins.Add(new SessionFeature());
} 
```

您可以像这样注册一个特定的 ICacheClient 实现：

```
container.Register<ICacheClient>(new MemoryCacheClient()); 
```

我在想的是，您可能会遇到需要有状态服务来维持大量会话状态以获得最佳性能的情况，但对于更典型的缓存要求，您可能希望使用 Redis 之类的东西：

```
container.Register<IRedisClientsManager>(c => 
    new PooledRedisClientManager("localhost:6379"));
container.Register<ICacheClient>(c => 
    (ICacheClient)c.Resolve<IRedisClientsManager>().GetCacheClient()); 
```

但是有没有办法在这些之间切换？您是否必须手动创建提供程序（绕过 IoC）并将其用于内存或 Redis 缓存（将 IoC 用于其他 ICacheClient 实例）？或者围绕两个 ICacheClient 实现创建一个包装器，并使用特殊键命名模式之类的东西在使用内存缓存与 Redis 缓存之间进行内部切换？

另外，您将如何处理通过 ISession 访问数据？当您直接引用自动连接的 ICacheClient 属性时，您能否在使用 Redis 时使用内存中的 ICacheClient 支持 ISession？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:38:45.630

Servicestack 会话状态使用 ICacheClient 维护。您需要决定您希望 servicestack 使用哪个提供程序进行缓存，并按照您的描述进行设置 - 即 Memcached：

```
container.Register<ICacheClient>(new MemoryCacheClient()); 
```

如果您想使用另一种类型的缓存，请在 IOC 中注册它，给出：

```
container.Register<ICacheClient>(new MemoryCacheClient());  // For servicestack session state

//REDIS for other caching options
container.Register<IRedisClientsManager>(c => new PooledRedisClientManager("localhost:6379"));
container.Register<IREDISClient>(c => (IREDISClient)c.Resolve<IRedisClientsManager>().GetClient()); 
```

然后，您的不同类将通过定义所需的缓存接口来使用最合适的缓存提供程序：

```
public ICacheClient Cache { get; set; } 
```

或者

```
public IREDISClient REDISCache { get; set; } 
```

您可以通过扩展 servicestack 服务类并创建您自己的 appservicebase 来使两者在您的服务中可用，如[socialbootstrap 项目](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/ServiceInterface/AppServiceBase.cs)中所示。然后，您可以使两种缓存模型都可用。

我使用 REDIS 进行所有缓存，它的速度足以满足我的需求，并且在多服务器架构中，允许在不丢失任何用户会话的情况下关闭服务器进行维护。

我仍然有两个缓存提供程序，标准的 REDIS 客户端 - 连接到 ICacheClient - 和本机 REDIS 客户端 - 连接到 IRedisNativeClient。这是由于标准 REDIS 客户端使用的序列化无法处理我需要暂时保留的一些非 POCO 对象。

# java - 蓝牙 Android 聊天示例中的 SendToTarget GetTarget

> ID：15504637
> 
> 赞同：0
> 
> 时间：2013-03-19T16:09:12.837
> 
> 标签：java, android, android-service

我正在努力使蓝牙聊天示例与远程服务而不是本地服务一起工作（供以后使用）。

但是当我尝试使用用于显示发送和接收消息的处理程序时，会发生错误，我不知道如何修复：

```
mHandler.obtainMessage(RemoteServiceClient.MESSAGE_WRITE, -1, -1, buffer).sendToTarget(); 
```

这一行向 Handler 发送了一些信息，包括消息代码 (MESSAGE_WRITE) 和我想要显示的缓冲区 (buffer) 的内容。

但是当我在应用程序中发送消息时，它崩溃并且日志显示 nullPointerException，我猜这对应于缺少[getTarget](http://developer.android.com/reference/android/os/Message.html#getTarget%28%29)。

我的问题是：在原始示例中，没有 getTarget （如在我的应用程序中），但 sendToTarget 工作得很好。如何解释它以及如何使它在我的应用程序中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T09:41:29.637

我使用以下方法解决了这个问题`dispatchMessage`：

```
messageToMainService.what = VALUES_FROM_THREAD;
messageData.putParcelable("pgnParcelable", pgnListParcelable);
messageData.putParcelable("currentLocation", myLocation);
messageData.putLong("timerBoucle", ellapseTime + timeToSleep);
    //messageData.putWhateverYouWant
messageToMainService.setData(messageData);
mHandler.dispatchMessage(messageToMainService); 
```

我想知道这种用法是否正确。请告诉我是否不是

# python - Python-Requests 是否支持 OrderedDicts，或者这里出了什么问题？

> ID：15504638
> 
> 赞同：2
> 
> 时间：2013-03-19T16:09:14.463
> 
> 标签：python, post, python-requests, ordereddictionary

我正在尝试使用 Python 的[请求](http://docs.python-requests.org/en/latest/)库向 Amazon S3 端点发布请求。该请求属于 multipart/form-data 种类，因为它包括实际文件的 POST。

我正在处理的 API 指定的一项要求是`file`参数必须*最后*发布。由于 Requests 使用字典来发布多部分/表单数据，并且由于字典不遵循指定的顺序，因此我将其转换为名为`payload`. 在发布之前它看起来像这样：

```
{'content-type': 'text/plain',
 'success_action_redirect':     'https://ian.test.instructure.com/api/v1/files/30652543/create_success?uuid=<opaque_string>',
 'Signature': '<opaque_string>',
 'Filename': '',
 'acl': 'private',
 'Policy': '<opaque_string>',
 'key': 'account_95298/attachments/30652543/log.txt',
 'AWSAccessKeyId': '<opaque_string>',
 'file': '@log.txt'} 
```

这就是我发布它的方式：

```
r = requests.post("https://instructure-uploads.s3.amazonaws.com/", files = payload) 
```

响应是 500 错误，所以我真的不确定这里有什么问题。我只是猜测这与我在 Requests 中使用 OrderedDict 有关——我找不到任何说明 Requests 支持或不支持 OrderedDicts 的文档。这可能是完全不同的东西。

是否还有其他任何会导致请求失败的问题？如果需要，我可以提供更多细节。

***好的，更新，基于 Martijn Pieters 之前的评论：***

我更改了引用 log.txt 文件的方式，将其添加到已创建的`upload_data`字典中，如下所示：

```
upload_data['file'] = open("log.txt") 
```

打印结果字典我得到这个：

```
{'AWSAccessKeyId': '<opaque_string>',
 'key': '<opaque_string>',
 'Policy': '<opaque_string>',
 'content-type': 'text/plain',
 'success_action_redirect': 'https://ian.test.instructure.com/api/v1/files/30652688/create_success?uuid=<opaque_string>',
 'Signature': '<opaque_string>',
 'acl': 'private',
 'Filename': '',
 'file': <_io.TextIOWrapper name='log.txt' mode='r' encoding='UTF-8'>} 
```

键的值`file`看起来正确吗？

当我将它发布到 RequestBin 时，我得到了这个，它看起来与 Martin 的示例非常相似：

```
POST /1j92n011 HTTP/1.1
User-Agent: python-requests/1.1.0 CPython/3.3.0 Darwin/12.2.0
Host: requestb.in
Content-Type: multipart/form-data; boundary=e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Length: 2182
Connection: close
Accept-Encoding: identity, gzip, deflate, compress
Accept: */*

--e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Disposition: form-data; name="AWSAccessKeyId"; filename="AWSAccessKeyId"
Content-Type: application/octet-stream

<opaque_string>
--e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Disposition: form-data; name="key"; filename="key"
Content-Type: application/octet-stream

<opaque_string>
--e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Disposition: form-data; name="Policy"; filename="Policy"
Content-Type: application/octet-stream

<opaque_string>
--e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Disposition: form-data; name="content-type"; filename="content-type"
Content-Type: application/octet-stream

text/plain
--e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Disposition: form-data; name="success_action_redirect"; filename="success_action_redirect"
Content-Type: application/octet-stream

https://ian.test.instructure.com/api/v1/files/30652688/create_success?uuid=<opaque_string>
--e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Disposition: form-data; name="Signature"; filename="Signature"
Content-Type: application/octet-stream

<opaque_string>
--e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Disposition: form-data; name="acl"; filename="acl"
Content-Type: application/octet-stream

private
--e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Disposition: form-data; name="Filename"; filename="Filename"
Content-Type: application/octet-stream

--e8c3c3c5bb9440d1ba0a5fe11956e28d
Content-Disposition: form-data; name="file"; filename="log.txt"
Content-Type: text/plain

This is my awesome test file.
--e8c3c3c5bb9440d1ba0a5fe11956e28d-- 
```

但是，当我尝试将其发布到[https://instructure-uploads.s3.amazonaws.com/](https://instructure-uploads.s3.amazonaws.com/)时，我仍然会返回 500 。我尝试将打开的文件对象添加到`files`，然后通过 dict 在单独的 dict 中提交所有其他值`data`，但这也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:46:52.563

您需要将要发送的内容拆分为传递给的 OrderedDict`data`和发送给的内容`files`。现在 AWS 正在（正确地）将您的数据参数解释为文件，而不是表单参数。它应该如下所示：

```
data = OrderedDict([
    ('AWSAccessKeyId', '<opaque_string>'),
    ('key', '<opaque_string>'),
    ('Policy', '<opaque_string>'),
    ('content-type', 'text/plain'),
    ('success_action_redirect', 'https://ian.test.instructure.com/api/v1/files/30652688/create_success?uuid=<opaque_string>'),
    ('Signature', '<opaque_string>'),
    ('acl', 'private'),
    ('Filename', ''),
])

files = OrderedDict([('file', open('log.txt'))])

requests.post(url, data=data, files=files) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:12:23.833

您可以传入一个*或*一系列二值元组`dict`。

 *`OrderedDict`并被简单地转换为这样的序列：

```
r = requests.post("https://instructure-uploads.s3.amazonaws.com/", files=payload.items()) 
```

但是，因为`collections.OrderedDict()`类型是 的子类`dict`，所以调用`items()`正是*幕后*所做`requests`的，所以直接传入一个`OrderedDict`实例也可以。

因此，还有其他问题。您可以通过发布来验证发布的内容`http://httpbin/post`：

```
import pprint
pprint.pprint(requests.post("http://httpbin.org/post", files=payload.items()).json()) 
```

不幸的是，`httpbin.org`不保留排序。[或者，您也可以在http://requestb.in/](http://requestb.in/)创建一个专用的 HTTP post bin ；它会更详细地告诉你发生了什么。

使用 requestb.in，并通过替换`'@log.txt'`为打开的文件对象，来自请求的 POST 记录为：

```
POST /tlrsd2tl HTTP/1.1
User-Agent: python-requests/1.1.0 CPython/2.7.3 Darwin/11.4.2
Host: requestb.in
Content-Type: multipart/form-data; boundary=7b12bf345d0744b6b7e66c7890214311
Content-Length: 1601
Connection: close
Accept-Encoding: gzip, deflate, compress
Accept: */*

--7b12bf345d0744b6b7e66c7890214311
Content-Disposition: form-data; name="content-type"; filename="content-type"
Content-Type: application/octet-stream

text/plain
--7b12bf345d0744b6b7e66c7890214311
Content-Disposition: form-data; name="success_action_redirect"; filename="success_action_redirect"
Content-Type: application/octet-stream

https://ian.test.instructure.com/api/v1/files/30652543/create_success?uuid=<opaque_string>
--7b12bf345d0744b6b7e66c7890214311
Content-Disposition: form-data; name="Signature"; filename="Signature"
Content-Type: application/octet-stream

<opaque_string>
--7b12bf345d0744b6b7e66c7890214311
Content-Disposition: form-data; name="Filename"; filename="Filename"
Content-Type: application/octet-stream

--7b12bf345d0744b6b7e66c7890214311
Content-Disposition: form-data; name="acl"; filename="acl"
Content-Type: application/octet-stream

private
--7b12bf345d0744b6b7e66c7890214311
Content-Disposition: form-data; name="Policy"; filename="Policy"
Content-Type: application/octet-stream

<opaque_string>
--7b12bf345d0744b6b7e66c7890214311
Content-Disposition: form-data; name="key"; filename="key"
Content-Type: application/octet-stream

account_95298/attachments/30652543/log.txt
--7b12bf345d0744b6b7e66c7890214311
Content-Disposition: form-data; name="AWSAccessKeyId"; filename="AWSAccessKeyId"
Content-Type: application/octet-stream

<opaque_string>
--7b12bf345d0744b6b7e66c7890214311
Content-Disposition: form-data; name="file"; filename="log.txt"
Content-Type: text/plain

some
data

--7b12bf345d0744b6b7e66c7890214311-- 
```

显示正确保留了排序。

注意`requests`不支持特定于 Curl 的`@filename`语法；相反，传入一个打开的文件对象：

```
 'file': open('log.txt', 'rb') 
```

您可能还希望将`content-type`字段设置为使用标题大小写：`'Content-Type': ..`.

如果您仍然收到 500 响应，请检查`r.text`响应文本以了解 Amazon 认为有什么问题。*

# javascript - 鼠标悬停在地图效果上

> ID：15504641
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:09:22.413
> 
> 标签：javascript, jquery, svg, d3.js

[我怎样才能像这张](http://www.politico.com/2012-election/map/#/President/2012/)地图一样获得完全相同的鼠标悬停效果。它从每个州获得数据，包括每个候选人的百分比、他们的名字、相应州的名称等。你如何让框像鼠标一样跟随鼠标它在应用程序上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:19:09.953

这个插件可以让你做到这一点。

*   [http://davidlynch.org/projects/maphilight/docs/](http://davidlynch.org/projects/maphilight/docs/)
*   [http://davidlynch.org/projects/maphilight/docs/demo_usa.html](http://davidlynch.org/projects/maphilight/docs/demo_usa.html)

# c# - 为什么 WebBrowser 会与其他控件重叠？

> ID：15504642
> 
> 赞同：0
> 
> 时间：2013-03-19T16:09:22.197
> 
> 标签：c#, wpf, wpf-controls

我目前正在使用 WPF 和 C# 和 XAML 开发一个项目，我想出了这个问题：

我创建了一个新列（以前只有 2 个），并添加了一个 TabControl、TabItem 和一个堆栈面板，以使其与其他列相似。但是，当我调整它的大小时，它会与另一列重叠，即使最小宽度设置为 0（或 1）。

```
 <TabControl Name="tabSideBarHelp" Grid.Column="1" Grid.Row="0" Grid.RowSpan="4" Margin="8,4,4,4" Padding="4" MinWidth="100">
            <TabItem Header="Help">
                <StackPanel>
                    <WebBrowser Grid.Row="3" Height="93" HorizontalAlignment="Left" Name="webBrowser1" VerticalAlignment="Top" MinWidth="1" Grid.Column="1"/>
                </StackPanel>
            </TabItem> 
```

![这是 WebBrowser 重叠](../Images/3635e4559388e7a420ada37544c3654f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:22:26.107

这与`WebBrowser`工作方式有关，它`WindowsFormsHost`也会影响控件。基本上，`WebBrowser`它不参与 WPF 的通常呈现流程，因此它不会像 WPF 控件那样合成到 WPF 窗口中。相反，它会在它占据的任何区域中的其他所有内容之后绘制，从而与应该出现在控件顶部的任何 WPF 控件重叠`WebBrowser`。

不幸的是，这意味着您必须非常小心，不要让任何东西与`WebBrowser`控件重叠，因为您会遇到这种渲染问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:22:44.500

首先，设置最小宽度不会阻止您的 ui 元素调整大小*超过*指定的最小宽度。也许您想设置最大宽度。

其次，网络浏览器是一个 IE 框架，而不是 wpf 本机控件，因此请期待它的怪异行为

# jquery - 选中取消选中所有复选框和另一个复选框使用jquery

> ID：15504643
> 
> 赞同：18
> 
> 时间：2013-03-19T16:09:24.443
> 
> 标签：jquery, checkbox

我使用 jquery-1.9.1.js 在我的 html 页面中，它第一次运行良好。

就像 [http://jsfiddle.net/pzCcE/1/](http://jsfiddle.net/pzCcE/1/)

有人可以帮我改进吗？

```
<table id="tab1">
    <input type="checkbox" name="checkAll" id="checkAll">全選
    <input type="checkbox" name="book" id="book" value="book1">book1
    <input type="checkbox" name="book" id="book" value="book2">book2
    <input type="checkbox" name="book" id="book" value="book3">book3
    <input type="checkbox" name="book" id="book" value="book4">book4
    <input type="checkbox" name="book" id="book" value="book5">book5</table>

$(function () {
    $("#tab1 #checkAll").click(function () {
        if ($("#tab1 #checkAll").is(':checked')) {
            $("#tab1 input[type=checkbox]").each(function () {
                $(this).attr("checked", true);
            });

        } else {
            $("#tab1 input[type=checkbox]").each(function () {
                $(this).attr("checked", false);
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-19T16:12:41.663

改变

```
$(this).attr("checked", true); 
```

至

```
$(this).prop("checked", true); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/pzCcE/2/)**

我实际上只是回答了另一个与此类似的问题。根据[.prop()](http://api.jquery.com/prop/)文档：

> .prop() 方法是设置属性值的便捷​​方法——尤其是在设置多个属性、使用函数返回的值或同时设置多个元素的值时。在设置 selectedIndex、tagName、nodeName、nodeType、ownerDocument、defaultChecked 或 defaultSelected 时应使用它。从 jQuery 1.6 开始，这些属性不能再用 .attr() 方法设置。它们没有对应的属性，只是属性。
> 
> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。**应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。**.val() 方法应该用于获取和设置值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-19T16:15:27.417

您应该使用具有相同名称的类，ID 必须是唯一的！

```
<input type="checkbox" name="checkAll" id="checkAll">全選
<input type="checkbox" name="book" class="book" value="book1">book1
<input type="checkbox" name="book" class="book" value="book2">book2
<input type="checkbox" name="book" class="book" value="book3">book3
<input type="checkbox" name="book" class="book" value="book4">book4
<input type="checkbox" name="book" class="book" value="book5">book5</table>

$(function () {
    $("#checkAll").click(function () {
        if ($("#checkAll").is(':checked')) {
            $(".book").prop("checked", true);
        } else {
            $(".book").prop("checked", false);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-20T14:39:55.670

由于 OP 要求在另一个 checkbox 的基础上取消选中所有复选框`id=全選`。

`id=全選`上面提供的@j08691 的解决方案很好，但它缺少一件事，即当列表中的任何其他复选框未选中时，该解决方案不会取消选中该复选框。

因此，我提出了一个解决方案，该解决方案基于复选框选中/取消选中所有`id=全選`复选框，如果未选中任何其他复选框，则复选框`id=全選`未选中。如果用户手动单击所有其他复选框，则`id=全選`还应选中复选框以反映关系。

OP 对多个复选框使用相同的 id，这违反了 DOM 规则。[元素 ID 在整个文档中应该是唯一的。](https://stackoverflow.com/questions/5611963/can-multiple-different-html-elements-have-the-same-id-if-theyre-different-types)

* * *

所以下面的代码涵盖了这种场景的所有方面。

**HTML**

```
<table>
    <tr>
        <td>
        <input type="checkbox" name="checkAll" id="checkAll">全選 (ALL)
        <input type="checkbox" name="book" id="book_1" value="book1">book1
        <input type="checkbox" name="book" id="book_2" value="book2">book2
        <input type="checkbox" name="book" id="book_3" value="book3">book3
        <input type="checkbox" name="book" id="book_4" value="book4">book4
        <input type="checkbox" name="book" id="book_5" value="book5">book5
        </td>
     </tr>
</table> 
```

**jQuery**

```
$(document).ready(function() {

    $('#checkAll').click(function () {
        $('input:checkbox').not(this).prop('checked', this.checked);
    });

    $("[id*=book_]").change(function () {
        if ($('input[id*=book_][type=checkbox]:checked').length == $('input[id*=book_][type=checkbox]').length) {
            $('#checkAll').prop('checked', true);
        } else {
            $('#checkAll').prop('checked', false);
        }
    });

}); 
```

**属性选择器 [name*="value"] 的描述**

选择具有指定属性且值包含给定子字符串的元素。

所以`$('#checkAll')`只返回父复选框，我选中/取消选中所有复选框。

并将`$('[id$=book_]')`除父（全选）复选框之外的所有复选框返回给我。然后在父复选框的基础上，我选中/取消选中所有其他复选框。

* * *

我还检查了除父（全选）复选框之外的复选框的长度，如果所有其他复选框都被选中，那么我检查父（全选）复选框。所以这是交叉检查所有可能条件并且不会错过任何情况的方法。

**[演示工作 JSFiddle 在这里。](http://jsfiddle.net/jokers/qxjubfaf/2/)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-30T08:11:00.100

最快的方式。并保存一些行

```
 $(".ulPymnt input[type=checkbox]").each(function(){                
       $(this).prop("checked", !$(this).prop("checked"))                
   }) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-10T08:24:49.333

我刚刚简化了@j08691 答案

```
$("#checkAll").click(function() {
      var allChecked = $(this);
      $("#tab1 input[type=checkbox]").each(function() {
        $(this).prop("checked", allChecked.is(':checked'));
      })
    });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<table id="tab1">
  <tr>
    <td>
      <input type="checkbox" name="checkAll" id="checkAll">Select all
      <input type="checkbox" name="book" id="book" value="book1">book1
      <input type="checkbox" name="book" id="book" value="book2">book2
      <input type="checkbox" name="book" id="book" value="book3">book3
    </td>
  </tr>
</table>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T16:16:31.913

随着 j08691 的回答，也看看下面的事情..

创建像 #id #id 这样的选择器完全没有意义，因为根据定义，ID 在您的 DOM 中必须是唯一的。

```
<input type="checkbox" name="checkAll" class="checkAll">

$("#tab1 .checkAll").click(function () { 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-19T05:11:28.570

```
$("input[name='select_all_photos']").click(function () {
        var checked = $(this).is(':checked');
        $("input[name^='delete_']").each(function () {
            $(this).prop("checked", checked);
        });
    }); 
```

不要费心做一个 if 语句。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-24T08:05:13.087

也添加这个....FOR.......如果一个复选框（id：book）未选中意味着它将导致主复选框（id：checkAll）被取消选中

```
$("#tab1 #book").click(function () {
  if($('#book').is(':checked'))
  {
    $("#checkAll").prop("checked", false);        
  }
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-02T03:20:26.430

```
`change click to ch  $("#checkAll").click(); to $("#checkAll").change();

> Blockquote

$(function () {
 $("#checkAll").change(function () {
  if ($("#checkAll").is(':checked')) {
   $(".book").prop("checked", true);
   } else {
   $(".book").prop("checked", false);
  }
 });
});` 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-26T12:53:17.840

这适用于所有复选框列表。只需将“check-all”添加到控制它的输入中，它必须具有相同的名称

```
$(function() {
  $('.check-all').each(function(){
    var checkListName = $(this).attr('name');
    $(this).change(function(){
      //change all checkbox of the list checked status
      $('input[name="'+checkListName+'"]').prop('checked', $(this).prop('checked')); 
    });
    $('input[name="'+checkListName+'"]').change(function(){
      //change .check-all checkbox depending of the list checked status
      $('input[name="'+checkListName+'"].check-all').prop('checked', ($('input[name="'+checkListName+'"]:checked').not('.check-all').length == $('input[name="'+checkListName+'"]').not('.check-all').length));
    });
  });
}); 
```

# android - 是否可以在 Google Maps v2 上使用搜索？

> ID：15504644
> 
> 赞同：1
> 
> 时间：2013-03-19T16:09:26.987
> 
> 标签：android, android-maps-v2

我找不到任何相关主题，所以我打开了一个新主题。

我想要的是能够搜索一些单词并让用户进入这一点。

示例：屏幕中有一张地图，顶部有一个搜索栏。每当用户写为“伦敦”时，地图应该移动到伦敦。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:12:21.437

您可能想了解[地理编码器类](http://developer.android.com/reference/android/location/Geocoder.html)

[getFromLocationName返回一个](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocationName%28java.lang.String,%20int%29)[Address](http://developer.android.com/reference/android/location/Address.html)的 ArrayList 。每个地址都包含该点的纬度和经度。

# java - 构建 DOM 文档对象时文件过早结束错误

> ID：15504646
> 
> 赞同：0
> 
> 时间：2013-03-19T16:09:28.607
> 
> 标签：java, exception, error-handling

当我创建 Document 对象时，我遇到了文件过早结束错误。这段代码几天前还在工作，我不确定是什么导致它现在抛出错误。

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
InputSource is = new InputSource(new StringReader(response));
Document doc = builder.parse(is); 
```

> [致命错误]：1:1：文件过早结束。

这是我收到的响应 xml。它看起来非常好。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <GetBatchFilesResponse xmlns="http://....">
            <GetBatchFilesResult>
                <BatchFile>
                    <Uri>someURI</Uri>
                    <ID>2025961</ID>
                    <FQName>someFileName</FQName>
                </BatchFile>
            </GetBatchFilesResult>
        </GetBatchFilesResponse>
    </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:12:08.747

该消息表明您的响应**格式错误。** `XML`通常，当`XML`. 我想你也会得到一个**空**的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:02:26.897

尝试在 xml 中添加一个新行，一些解析器需要它。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-19T17:53:24.713

我恢复到我本地历史中的一些旧代码，它开始工作了。我对代码中的一些逻辑进行了一些小改动，出于某种原因，这些小改动影响了它处理响应的方式。

# c# - 将 C# 中的文件上传到 Windows 服务器 - 如何最好地设置服务器和客户端？

> ID：15504649
> 
> 赞同：0
> 
> 时间：2013-03-19T16:09:38.293
> 
> 标签：c#, file-upload, windows-server

我对 Windows 服务器完全陌生，并且通常上传到服务器，如果这是一个相当微不足道的问题，我很抱歉。

我想将文件从 C# 客户端上传到 Windows 服务器，该文件可通过 HTTP 访问。我拥有对服务器的完全访问权限，但我确实需要对其进行设置（IIS 已经在 localhost 上运行了一个站点）。将文件上传到此服务器的最安全/最佳方式是什么（可能不透露用户名/密码），我将如何设置服务器？欢迎任何指向教程的链接。如果我理解正确，FTP 不是处理这个问题的最佳方式吗？

编辑：应用程序仅在受控环境中运行，因此授予应用程序对服务器的完全读/写访问权限应该没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:15:51.143

有很多选择。

如果进行上传的客户端在您的网络之外：

*   使用 HTTPS 连接进行[HTTP 上传。](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)要求登录，以便不是每个人都可以上传自己的文件版本，或者
*   SFTP。您将需要第三方 SFTP 软件（遗憾的是 Windows 仍然不包括该软件）。 [Filezilla](http://filezilla-project.org/)是开源的，在 Windows 上运行良好。

如果进行上传的客户端在您的网络中：

*   [机械复制](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)

# regex - sed/awk 编辑一行

> ID：15504651
> 
> 赞同：0
> 
> 时间：2013-03-19T16:09:41.420
> 
> 标签：regex, sed

我必须在 jad 文件中就地编辑一行。

`MIDlet-Version: 0.5.38`应该成为`MIDlet-Version: 0538`

我无法在文件中找到该行。如果我已经有了这条线，我会这样做：

```
echo 'MIDlet-Version: 0.5.38' | sed s/\\.//g 
```

我尝试了几种变体：

```
sed -i 's/\(MIDlet-Version: \)\\.//replace/g' myfile.jad 
```

有人可以告诉我出了什么问题以及如何正确处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:16:53.920

你要：

```
sed -i '/MIDlet-Version: /{s/\.//g}' file.jad 
```

`file.jad` **这将仅从**包含更改的行中删除所有句点`MIDlet-Version:`并将更改存储回`file.jad`.

# css - 这个 :nth-child 规则是怎么回事？

> ID：15504657
> 
> 赞同：0
> 
> 时间：2013-03-19T16:09:51.163
> 
> 标签：css

[小提琴](http://jsfiddle.net/pwxjX/)

具体来说，为什么我的`#sumMenu2 p:nth-child(2)`规则没有出现？

html:

```
<div id="subMenu2">
    <p class="active">Panel View</p>
    <p>Group View</p>
    <p>Photocell Settings</p>
</div> 
```

CSS：

```
#subMenu2 {
    background: pink;
}
#subMenu2 p {
    color: black;
    text-decoration: none;
    padding: 5px 25px 5px 25px;
    display: block;
    float: left;
}
#sumMenu2 p:nth-child(2) {
    border-right: 1px solid black;
    border-left: 1px solid black;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T16:11:09.800

因为你拼写了#sumMenu2？

```
#sumMenu2 p:nth-child(2) {
border-right: 1px solid black;
border-left: 1px solid black; 
```

# c# - 错误的json格式

> ID：15504661
> 
> 赞同：0
> 
> 时间：2013-03-19T16:10:05.970
> 
> 标签：c#, json, serialization

我有一项服务以以下格式返回我的 json 数据： `"[{\"Id\":3,\"Name\":\"name1\",\"Age\":30,\"Course\":\"course1\",\"SchoolName\":\"school1\",\"City\":\"city1\",\"Country\":\"country1\",\"BuildDate\":null}]"`

但我认为这可能是我在客户处遇到问题的根源，因为我认为它应该更像：

`"[{"Id":3,"Name":"name1","Age":30,"Course":"course1","SchoolName":"school1","City":"city1","Country":"country1","BuildDate":null}]"`

我这样序列化：

```
string model = //mydata to serialize
string jsonStringToSend = new JavaScriptSerializer().Serialize(model); 
```

我怎样才能解决这个问题？

**更新**

按照建议删除双重序列化后，我现在得到：

`[{Id:3, Name:name1, Age:30, Course:course1, SchoolName:school1, City:city1, Country:country1, BuildDate:null}]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:11:51.403

`\"`用于转义`"`字符。如果它确实是这样打印的，那么您可能也在逃避`\`。

# android - Android RatingBar 显示超过 5 颗星

> ID：15504664
> 
> 赞同：18
> 
> 时间：2013-03-19T16:10:18.920
> 
> 标签：android

我想通过我的 android 应用程序中的警报对话框显示评分栏。我面临的问题是，根据屏幕的宽度，评分栏在横向模式下显示超过 5 颗星（最多 10 颗），并且函数 setNumStars() 无效。已经有帖子处理了这个问题，但是他们处理了一个评级栏，它的 laout 是在我动态创建它时静态定义的。如何解决这个问题呢？

```
public class MainActivity extends Activity {
private Button launchButton;
//Rating dialog
 private AlertDialog.Builder rater;
 private RatingBar ratingBar;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    launchButton =(Button)findViewById(R.id.ratingButton);
    launchButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //Here the alert dialog will be launched
            showRatingDialog();
        }
    });

      //Setting up rating dialog
        rater = new AlertDialog.Builder(this);

        rater.setTitle("This is the rating dialog");

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
public void showRatingDialog()
{
  ratingBar = (RatingBar)findViewById(R.id.ratingStars);
      rater.setNegativeButton("Abbrechen", null);
      rater.setView(ratingBar);
      rater.show();

}
} 
```

我已经尝试对评级栏使用静态布局，但是当我这样做并尝试通过警报对话框显示评级栏时，没有显示星号。这是评分栏的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<RatingBar
        android:id="@+id/ratingStars"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:numStars="5"
        android:stepSize="1"
        />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-05-28T11:24:03.407

设置`android:numStars="5"`和`android:layout_width="wrap_content"`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-02T18:51:01.633

将 RatingBar 的宽度设置为“包装内容”可以解决整个问题。根据文档：

> 设置要显示的星数。为了正确显示这些内容，建议将此小部件的布局宽度设置为 wrap content。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-19T16:21:15.067

`RatingBar`尝试为您的以下喜欢设置最大值

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/active_bg" >

    <RatingBar
            android:id="@+id/rating"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            style="?android:attr/ratingBarStyleSmall"
            android:numStars="5"
            android:stepSize="0.1"
            android:isIndicator="true" />

</RelativeLayout> 
```

在布局文件中创建一个 xml 文件并将其设置为内容

像这样改变你的`showDialog`功能

```
LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.***your_xml_name***));
editor.setView(layout);
editor.show(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-23T06:20:38.547

将评级栏的父级保持为线性布局，并在该线性布局中不保留任何其他内容，这对我有用

[该](http://lees2bytes.blogspot.in/2014/03/ratingbar-madness-and-solution.html) 博客显示了解决方案的清晰图片

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-20T14:01:04.557

如果您的 RatingBar 在 AlertDialog 中，请插入 LinearLayout 内部并在 LinearLayout 上使用 setView。然后您可以将其宽度设置为 WRAP_CONTENT。

# matlab - 如何在 matlab 中读取具有可变十六进制值列的文本文件？

> ID：15504667
> 
> 赞同：3
> 
> 时间：2013-03-19T16:10:21.990
> 
> 标签：matlab, textscan

我有一个相当大的文本文件（超过 16,000 行），其格式如下：

```
#ID     #Line Num       #Var Col Length Values (HEX):
45      00001           FFFF FFFF 0000 0000
45      00002           0000 0000 FFFF FFFF
47      00003           AAAA 1111 AAAA 1111 AAAA 1111
49      00004           BBBB 2222 
```

*注意：这显然是虚构的数据，因为实际文件中有更多的 HEX 值。*

在 Matlab 中，我尝试使用`textscan`单行命令：

```
fp = fopen(filePath, 'rt');
readLine = fgetl(fp);
[ignored, pos] = textscan(readLine, '%d');
values = textscan(readLine(pos+1:end), '%x'); 
```

我收到格式错误的字符串的错误。我假设它`textscan`不支持十六进制值的转换。我也尝试了这里找到的解决方案：

[将十六进制数据加载到 MATLAB 中的问题（错误？）](https://stackoverflow.com/questions/1539343/problem-bug-loading-hexadecimal-data-into-matlab)

但这似乎也不起作用。我试图避免单独转换每个十六进制值（有点我现在实施的解决方案），因为这需要很长时间才能完成。如何从文本文件中扫描/解析可变列宽十六进制值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:02:40.850

您可以`sscanf`改用：

```
fp = fopen(filePath, 'rt');
readLine = fgetl(fp);
results = sscanf(readLine, '%x'); 
```

这将为您提供一列转换为十进制的十六进制值。如果您需要单行中的值，只需转置它：

```
results = results' 
```

这假设前两项也是十六进制值。如果您需要将前两个值分隔为双精度，然后将其余的十六进制值分开，请执行以下操作：

```
fp = fopen(filePath, 'rt');
readLine = fgetl(fp);
[ignored, pos] = textscan(readLine, '%d');
results = sscanf(readLine(pos+1:end), '%x'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:34:00.183

您可以使用以下方法将文本文件读入字符串元胞数组，并使用以下方法将其拆分为单独的值`regexp`：

```
fp = fopen(filePath, 'rt');
C = textscan(fp, '%s', 'CommentStyle', '#', 'Delimiter', '');
C = regexp(C{:}, '\w+', 'match');
fclose(fp); 
```

这应该产生一个元胞数组，对于您的示例，它看起来像这样：

```
C =
    {'45'    '00001'    'FFFF'    'FFFF'    '0000'    '0000'}
    {'45'    '00002'    '0000'    '0000'    'FFFF'    'FFFF'}
    {'47'    '00003'    'AAAA'    '1111'    'AAAA'    '1111'    'AAAA'    '1111'}
    {'49'    '00004'    'BBBB'    '2222'} 
```

您可以根据自己的喜好操作生成的元胞数组。例如，丢弃每行的前两列，并将所有内容转换为十进制：

```
result = cellfun(@(x)hex2dec(x(3:end)), C, 'UniformOutput', false) 
```

# php - 控制器中的 codeigniter 模型未加载

> ID：15504670
> 
> 赞同：0
> 
> 时间：2013-03-19T16:10:27.530
> 
> 标签：php, codeigniter, model, controller

这是我的控制器：

```
class Orders extends CI_Controller {

public function index() {

//get model and db entries
$this->load->model('order_model', 'orders', TRUE);

}} 
```

当我打开相应的 url 时，我得到类 php 文件的内容。

```
class Order_model extends CI_Model { 
var $fullname = ''; var $email = ''; var $address = ''; 
var $phone = ''; var $notes = ''; var $facebook = ''; 
var $canvases = ''; var $admin_notes = ''; var $status = ''; 
var $id = ''; var $date = ''; 
var $price = ''; var $emailStatus_reciveOr... 
```

我想这是一件小而愚蠢的事情，但我无法弄清楚。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:23:33.913

您正在返回一个字符串，请尝试：

```
$this->load->model('order_model', 'orders'); 
```

CodeIgniter 类确实记录了第三个选项，`load->model`但它是用于告诉模型自动连接到您的数据库。

此外，您正在实例化`order_model`as`orders`但您的控制器也称为`order`. 我不鼓励这种类型的命名，因为它会给任何试图阅读代码的人（包括几周后的你自己）造成混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:26:01.690

我很惭愧地承认这一点，但这个错误非常愚蠢。在模型的文件中没有`<?php`:) 所以文件是一个简单的文本，因为 php 是关注的。

# html - CSS inline gallery / max-width: 100% = 滚动条不出现

> ID：15504676
> 
> 赞同：1
> 
> 时间：2013-03-19T16:10:37.817
> 
> 标签：html, css, safari, slider, gallery

我正在尝试创建一个 CSS 内联库。

**HTML**

```
<div id="wrapper">
    <ul>
        <li><img src="http://placehold.it/500x50" alt="" /></li>
        <li><img src="http://placehold.it/500x50" alt="" /></li>
        <li><img src="http://placehold.it/500x50" alt="" /></li>
        <li><img src="http://placehold.it/500x50" alt="" /></li>
        <li><img src="http://placehold.it/500x50" alt="" /></li>
    </ul>
</div> 
```

**CSS**

```
* {
  margin: 0;
  padding: 0;
}

img {
  max-width: 100%;
  border: 0;
  -ms-interpolation-mode: bicubic;
  width: auto\9;
  height: auto;
}

html,
body {
    width: 100%;
    height: 100%;
}

#wrapper {
    width: 100%;
    background: grey;
    text-align: center;
    overflow: scroll;
}

ul {
    display: table;
    width: 100%;
    height: 50px;
    overflow: hidden;
}

li {
    display: table-cell;
    width: 100%;
} 
```

[小提琴](http://jsfiddle.net/6fjV9/1/)

我面临的问题是它不起作用（d'oh）。这个想法是先`#wrapper`设置为`width: 100%;`，然后将图像水平对齐在里面的一行中`#wrapper`。要在图像之间导航，可以使用水平滚动条。

但是正如你所看到的，没有出现滚动条，溢出只是被隐藏了。
在调试时，我发现`img`元素的以下规则会导致问题：`max-width: 100%;`. 如果您删除它，滚动条会出现，但图像不再居中。

由于它是一个响应式网站，我也不能简单地删除`max-width: 100%;`. 所以基本上，我被卡住了，不知道该怎么做。我什至不知道为什么会`max-width: 100%;`弄乱滚动。

你能帮我么？

编辑：所以在 Safari 6.0.2 中，没有出现滚动条，但在 Firefox 19.0.2 中一切似乎都很好。对我来说，事情变得越来越陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:37:33.527

每个人说的问题不是野生动物园，这是一个可行的解决方案：

[http://jsfiddle.net/6fjV9/2/](http://jsfiddle.net/6fjV9/2/)

```
#wrapper {
    width: 100%;
    background: grey;
    overflow: scroll;
}

ul {
    display: table;
    width: 2500px;
    height: 50px;
    table-layout: fixed;
}

li {
    display: table-cell;
    vertical-align: top;
}

img {
    display: block;
} 
```

You set your list's width to 100% of its parent, which just takes the viewport size, as its own width is also 100%. The list must have the width of all its children in a line, e.g. `5 * 500 = 2500`. While FF seems to just resize the "table" to its content (maybe `table-layout: fixed;` is an important style property here), safari keeps its size at 100%, causing no scrollbars as it's just as wide as its parent.

**Update**: Or just set no width at all with display: table. [http://jsfiddle.net/6fjV9/4/](http://jsfiddle.net/6fjV9/4/)

# c - Unix 时间戳比较

> ID：15504677
> 
> 赞同：0
> 
> 时间：2013-03-19T16:10:39.900
> 
> 标签：c, unix, timestamp

我们如何在 Unix 上比较 C 程序中的各种时间戳？

我必须编写一个 pgm 来检查一个`ctime`文件，如果是`<`机器启动时间，该文件将被删除。我`getutxid`用来获取文件的`BOOT_TIME`and 。似乎针对这两个返回的时间戳采用不同的格式。什么是通用格式以及如何转换以便可以进行逻辑比较？如：`stat()``ctime`

```
if (ctime < boottime) 
```

等等。

# c++ - c++ mysql_fetch_field 获取变量名和类型

> ID：15504681
> 
> 赞同：0
> 
> 时间：2013-03-19T16:10:47.777
> 
> 标签：c++, mysql, types, field, fetch

我试图在向量中插入表中变量的名称和类型。我使用的语言是 C++。

这是我的代码：

```
 std::vector<std::string> parameters;
    std::vector<std::string> types;
    request = "select * from " + table;
    //cout << request << endl;
    if(mysql_query(connection, request.c_str())){
    fprintf(stderr, "Impossible to get parameters: %s\n",
        mysql_error(connection));
    return EXIT_FAILURE;
    }
    result = mysql_store_result(connection);
    while (field_mysql=mysql_fetch_field(result)) {
        parameters.push_back(field_mysql->name);
        types.push_back(field_mysql->type);
        }

    for(vector<string>::iterator it = parameters.begin(); it != parameters.end(); it++) 
        cout << *it << endl;
    mysql_free_result(result); 
```

我得到的错误：

> 没有调用 std::vector<std::basic_string<char>::push_back(enum_field_types&)' 的匹配函数

我想我收到了这个错误，因为类型是整数并且我将它声明为字符串，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:22:12.780

“我想我收到了这个错误，因为类型是整数，我将它声明为字符串，但我不确定。”

你是绝对正确的。只需使类型成为整数的容器，您的问题就应该得到解决。

# ruby-on-rails-3 - 升级 Heroku Postgres 数据库计划

> ID：15504682
> 
> 赞同：9
> 
> 时间：2013-03-19T16:10:48.443
> 
> 标签：ruby-on-rails-3, postgresql, heroku

如果这是一个愚蠢的问题，我很抱歉，我是 Heroku 托管的新手，希望 StackOverflow 的一位专家可以帮助我。

我最初为我的 heroku 应用程序注册了一个基本的免费 postgres 数据库，但最近我达到了 10K 行的限制，并想升级到每月 9 美元的计划。但是，我完全不知道该怎么做。这是一个相对简单的过程吗？我觉得不得不问这个问题很愚蠢。

当我登录 heroku 并单击我的应用程序时，我会看到我的应用程序的附加组件列表。当我单击 Postgres 插件时，它会将我带到一个单独的网页，但我没有看到任何升级我的数据库计划的选项。

有小费吗？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-07-25T05:20:40.783

在实用的方式中，您可以这样做来升级您的 postgres 数据库计划：

1.  `heroku config`

    ```
    // It will show current database URL
    HEROKU_POSTGRESQL_COPPER_URL: postgres://xxxddxxdx:sfsdfsfs-SIT@ec2-107-20-220-251.compute-1.amazonaws.com:5432/xdfdsxdxxxx
    HEROKU_POSTGRESQL_SILVER_URL: postgres://fasdfsad:dsfsdfdsafdsf@ec2-54-225-136-187.compute-1.amazonaws.com:5432/sdfasdfdasfds

    // Default database set
    DATABASE_URL:  postgres://fasdfsad:dsfsdfdsafdsf@ec2-54-225-136-187.compute-1.amazonaws.com:5432/dsfsdf 
    ```

2.  **创建一个新数据库** `heroku addons:create heroku-postgresql:hobby-basic`（但我建议您进入服务器资源部分并单击编辑插件并添加 pgsql 并将计划从免费更改为您所需的计划）

3.  **运行这些命令以防止数据库更新：** `heroku maintenance:on`和`heroku ps:scale worker=0`

4.  **将当前数据库复制到新数据库**： `heroku pg:copy DATABASE_URL HEROKU_POSTGRESQL_COPPER_URL --app prod-test`

    笔记：

    ```
    DATABASE_URL = It is config veriable which point default current db
    HEROKU_POSTGRESQL_COPPER_URL = This is config variable for which db I just created
    prod-test = It is my APP name 
    ```

5.  提升新数据库（将新数据库设为默认数据库） `heroku pg:promote HEROKU_POSTGRESQL_COPPER_URL`

6.  重新启用工人/测功机 `heroku ps:scale worker=1`和`heroku maintenance:off`

7.  删除旧数据库 `heroku addons:remove HEROKU_POSTGRESQL_SILVER_URL`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-19T16:15:28.970

Heroku 的网站上有一个文档可以做到这一点：[Upgrade Heroku postgres with pgbackups](https://devcenter.heroku.com/articles/upgrade-heroku-postgres-with-pgbackups)。

简而言之，步骤如下：

*   设置一个新的新基本数据库
*   防止更新（开启维护模式）
*   捕获您的备份
*   将备份还原到新数据库
*   推广您的新数据库
*   使您的应用处于活动状态

如果您决定执行生产计划，这些也是要遵循的相同步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:15:03.817

这是一个直截了当的过程。他们在[这里](https://devcenter.heroku.com/articles/upgrade-heroku-postgres-with-pgbackups)有一篇文章。

# c# - 关闭托管进程的最佳方法

> ID：15504686
> 
> 赞同：3
> 
> 时间：2013-03-19T16:11:19.293
> 
> 标签：c#, process, .net-3.5, kill

我有启动进程 B 的进程 A。
它们在 WCF（IAsyncResult APM 模式）中通信，A 是客户端 B 是服务。
当进程 A 死亡时，我需要关闭 B。

我将进程 A id 作为 arg 发送到进程 b，他这样做了：

```
Process.GetProcessById(processId).WaitForExit(); 
```

这工作正常。
我的问题是如果进程 a 死亡，如何正确终止进程 b？

我尝试了以下所有方法：

```
Process.GetCurrentProcess().Close();
Process.GetCurrentProcess().Dispose();
Application.Exit(); > its a guiless winform application 
```

唯一有效的是：

```
Process.GetCurrentProcess().Kill(); 
```

但是杀死进程是不是太残忍了？

添加代码：
main 中的进程 B：

```
TrackExternalProcess(externalProcessId, () => { OnExternalProcessClosed(); }); 
```

公共方法：

```
 public static void TrackExternalProcess(int processId, Action onExternalProcessClosed)
    {
        new Thread(new ThreadStart(delegate
        {
            try
            {
                Thread.CurrentThread.IsBackground = true;
                Process.GetProcessById(processId).WaitForExit();

                logger.Error("Host process quit unexpectedly");

                onExternalProcessClosed();
            }
            catch (Exception)
            {
            }
        })).Start();
    }

    public static void OnExternalProcessClosed()
    {
        Process.GetCurrentProcess().Kill();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:16:49.413

不是`Environment.Exit()`更干净吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T04:32:54.123

没有更干净的版本，我只是调用了我的 Dispose 方法。
它照顾一切，例如封闭的 WCF 服务。
最后是 Process.GetCurrentProcess().Kill();

# java-me - 创建“太多”类是个好主意吗？

> ID：15504694
> 
> 赞同：2
> 
> 时间：2013-03-19T16:11:41.593
> 
> 标签：java-me

我通常为所有东西制作类，通常将几种类型组合在一起。
例如用于组合 int 和 double

```
public class IntAndDouble{
      public final int INT;
      public final double DOUBLE;
      public IntAndDouble(int i,double d){INT = i; DOUBLE = d;}
} 
```

很像经常创建一个小的`struct`.

但我注意到，对于每个这样的小类，在创建 10-15 个这样的小类时，会有一个 ~1KB（300-1000 字节）的文件， 这不会`jar`
增加 ~30KB`jar`

在真正的 Java 中，30KB 几乎可以忽略不计，这不是问题，
但在普通应用程序通常在 200KB 左右的 J2ME 中，30KB 意义重大。

在 J2ME 中制作“小结构”的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:34:10.410

除非您使用的是具有少量内存的非常旧的手机，否则用于保存“类结构”类的代码的内存量不太可能很大。

注意：“.class”文件的大小不反映类的内存占用。“.class”文件包含许多仅在加载和链接类时使用的东西（类型/方法/类名称和签名等）。之后，它通常被垃圾收集。

我不知道轻量级的实际内存成本是多少（我无法衡量），但我预测的数量级会比你说的少一个数量级。

> 在 J2ME 中制作“小结构”的最佳方法是什么？

`IntAndDouble`在大多数情况下，与您在示例类 中所做的完全一样。

如果字段都具有相同的基本类型，那么您可以使用数组来代替；例如`int[]`或`Object[]`，但您会以其他方式为此“付费”。

（提防过早的优化！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:37:39.137

我们的目标是西非和世界其他技术含量较低的地区非常薄弱的​​设备。我们发现许多设备只能处理价值 50 万的应用程序和数据总量（适用于所有应用程序）。全球有大量消费者使用这些类型的设备。因此，如果您要超级通用，我仍然会考虑做一些事情来使我的代码尽可能小。

# java - java中的初学者问题

> ID：15504695
> 
> 赞同：1
> 
> 时间：2013-03-19T16:11:46.873
> 
> 标签：java, eclipse

我被困了大约一个小时，在谷歌搜索和研究之后，我无法让我的代码运行。它没有显示一个错误，当我按下运行它只是打开调试并且什么都不做。我正在使用日食。我正在尝试创建一个包含 10 个对象的列表并为它们提供随机数。

```
class test {
public static void main(String[] args){
    int a [] = new int[9];{
            for (int i = 0; i < a.length; i++)
                a[i] = a[(int)(Math.random()*70+15)];
            for (int elem : a){
                System.out.println(elem);
            };              
}}} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T16:13:10.627

如果您实际上是在启动应用程序，它应该会失败，并在以下行出现异常：

```
 a[i] = a[(int)(Math.random()*70+15)]; 
```

这里，`a[]`由九个元素组成，所以它的最高索引是 8。但是，`Math.random()*70+15`保证生成大于 8 的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:14:06.570

我不知道任何Java，但我会说：

```
for (int i = 0; i < a.length; i++)
a[2] = a[(int)(Math.random()*70+15)]; 
```

应该

```
for (int i = 0; i < a.length; i++)
a[i] = (int)(Math.random()*70+15); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-17T19:46:28.910

我建议改用随机数生成器。我还建议`i`为您的程序使用比或 a 更好的名称。

```
import java.util.Random;

class test {
    public static void main(String[] args){
        Random object = new Random ();//declare for your object
        int a;    //declare your integer type (I would suggest   
                  // changing that to be more descriptive)
        for (int i = 1; i <=10; i++) 
        {
            a = object.nextInt(100); // change 100 to however large   
                                     // parameter you want
            System.out.println(a + " ");
        }

    }              
} 
```

# java - Crucible REST API：无法添加审阅者

> ID：15504700
> 
> 赞同：5
> 
> 时间：2013-03-19T16:12:00.917
> 
> 标签：java, rest, atlassian-crucible

我正在尝试使用 Crucible REST API 将评论者添加到我刚刚创建的评论中（也使用 REST）。根据 Atlassian 文档，我应该发布到：

```
/rest-service/reviews-v1/{id}/reviewers 
```

什么？文档未显示添加审阅者的有效请求。当您单击“扩展”时，它不显示任何内容，它只是显示“逗号分隔的审阅者”，这似乎不起作用。

我试过了：

```
user1,user2

{"user1","user2"}

{reviewers:[reviewer:{"userName":"user1"},reviewer:{"userName":"user2"}]} 
```

所有这些都会导致以下响应：

```
{"code":"NotFound","message":"The user named '{\"user1\"' is not a Crucible user.","stacktrace":"com.atlassian.crucible.spi.services.NotFoundException: The user named '{\"user1\"' is not a Crucible user.
at com.atlassian.crucible.spi.impl.DefaultReviewService.getUser(DefaultReviewService.java:2011)
at com.atlassian.crucible.spi.impl.DefaultReviewService.access$3500(DefaultReviewService.java:95)
at com.atlassian.crucible.spi.impl.DefaultReviewService$32.doInTransaction(DefaultReviewService.java:1973)
at com.atlassian.crucible.spi.impl.DefaultReviewService$32.doInTransaction(DefaultReviewService.java:1965)
at com.atlassian.fisheye.spi.impl.DefaultTxTemplate.execute(DefaultTxTemplate.java:123)
at sun.reflect.GeneratedMethodAccessor1317.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
... 
```

该堆栈跟踪一直在继续......

`user1`并且`user2`是有效名称，因为当我对同一 URL 执行 GET 操作时，我可以在其他评论中看到它们。

有人有想法么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:02:56.887

好吧，对于它的价值，这里是如何将评论者添加到现有评论中：

1.  对 Crucible URL 进行 POST：protocol://server:port/context/rest-service/reviews-v1/{id}/reviewers

2.  帖子的正文应包含文字值：user1,user2,user3

3.  抵制 JSON 化数据的冲动 - 没有引号、括号、标签等。它实际上是一个逗号分隔的待添加用户名列表。

4.  不要期望来自服务器的响应，它似乎返回 204 的状态代码。虽然这作为一个安静的响应是可以接受的，但它看起来很奇怪，因为当您执行 POST 确认时，此 API 的许多其他 URL 确实返回了一些东西工作已经完成。

为了公平起见，文档确实详细说明了要发送的数据：

“逗号分隔的审稿人列表”

但是文档可能应该用一个例子来更新，因为我认为有人（至少对我来说）假设在使用 RESTful API 时，他们需要将数据格式化为 JSON 是正常的。此外，文档应该更谨慎地说明服务器不会发送成功响应。也就是说，恕我直言。

希望对某人有所帮助！

# java - Struts2 - 如何在页面加载时调用 prepare() 方法？

> ID：15504701
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:12:02.147
> 
> 标签：java, struts2, interceptor

我想`prepare()`在 Struts 2 中加载页面时调用该方法。

我的理解是，如果我`Preparable`在我的操作上实现接口，则该`prepare()`方法应该在页面加载时自动触发。这个对吗？或者是否需要其他配置？

我问是因为这是我所做的，并且准备方法仅在单击按钮时触发，就在执行方法触发之前。

我希望在页面加载之后/之前触发 prepare 方法以填充操作的属性。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:20:35.497

`prepare()`执行`Preparable`动作时执行。

如果它没有触发，那么您的`prepare()`方法要么在错误的操作中，要么您最初没有通过操作访问页面（例如，点击普通 JSP），或者存在拦截器堆栈配置问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:33:22.820

> 我的理解是，如果我在我的操作上实现 Preparable 接口，prepare() 方法应该在页面加载时自动触发。

据我了解**，这是不正确的**。prepare 方法用于准备一些数据，以供 execute() 方法或 Action 类的任何其他工作方法使用，因此在来自浏览器的请求的工作方法之前调用。

在页面加载时调用 prepare() 方法在编程上会很麻烦，因此应该避免。尝试以其他方式设置属性

希望这可以帮助 ：）

# mongodb - mongodb 在查询中引用文档的属性

> ID：15504702
> 
> 赞同：2
> 
> 时间：2013-03-19T16:12:03.687
> 
> 标签：mongodb, geospatial

我有一个 MongoDB*集合*，其中有具有以下结构的*文档*

```
{
   ...
   distanceDeviation: 2.0,

   loc: [
      [24.77, 67.5],
      [24.78, 67.6],
      [24.79, 67.7],
      [24.80, 67.8],
      ...
   ]
   ...
} 
```

我有这个*集合*地理索引（使用*ensureIndex* on `loc`）。

我想要一个查询，如果我发送两个点 Mongo从*集合中返回我的**文档*，这两个点都在它们的数组中。*`loc`*

 *我已经能够使用`$within`固定`$radius`参数来做到这一点，如下所示：

```
{
    "$and": [
                {
                    "loc": {
                        "$within": {
                            "$center": [
                                [
                                    24.812640000000002,
                                    67.01985
                                ],
                                1.5
                            ]
                        }
                    }
                },
                {
                    "loc": {
                        "$within": {
                            "$center": [
                                [
                                    24.900070000000003,
                                    67.16828000000001
                                ],
                                1.5
                            ]
                        }
                    }
                }
            ]
} 
```

但是，如果不是`1.5`指定为半径，我想指定使用属性**distanceDeviation**，它是本*文档*的一部分。

无论如何，最好没有`$where`. 如果不是那么，我该如何使用`$where`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:19:57.240

虽然有点尴尬，但有可能`aggregate()`与它的`$geoNear`操作员一起完成这项工作。尴尬，因为聚合只允许一个`$geoNear`，它必须位于聚合管道的顶部。所以，我们必须做两个聚合，然后合并结果。

这个想法：`$geoNear`将返回给定点与“loc”路线中每个点的距离。然后我们可以采取最小距离，与`$cond`操作员测试，是否在该范围内，`distanceDeviation`并返回文件，是这种情况。

结果是与第一个点匹配的文档数组。然后对另一点重复该操作，然后将两个数组合并为出现在两个数组中的文档列表。

这就是它的工作原理（为了更好的可读性，我使用了其他坐标）

```
db.xx.drop();
db.xx.insert( { distanceDeviation: 2.0, loc: [ [0,0], [10,-10], [20,10], [30,0] ] } );
db.xx.insert( { distanceDeviation: 0.1, loc: [ [0,0], [10,-10], [20,10], [30,0] ] } );
db.xx.ensureIndex({ loc: "2d" });
db.xx.find();

// points to query:
pointA = [1,1]
pointB = [21,11]

aggA = db.xx.aggregate([
    { $geoNear: { near: pointA, distanceField: "dist" } },
    { $group: { _id: { oid: "$_id", dev: "$distanceDeviation" }, min: { $min: "$dist" } } },
    { $project: { oid: "$_id.oid", isNear: { $cond: [ { $lt: [ "$min", "$_id.dev" ] }, 1, 0 ] }, _id: 0 } },
    { $match: { isNear: 1 } },
]);

aggB = db.xx.aggregate([
    { $geoNear: { near: pointB, distanceField: "dist" } },
    { $group: { _id: { oid: "$_id", dev: "$distanceDeviation" }, min: { $min: "$dist" } } },
    { $project: { oid: "$_id.oid", isNear: { $cond: [ { $lt: [ "$min", "$_id.dev" ] }, 1, 0 ] }, _id: 0 } },
    { $match: { isNear: 1 } },
]);

print("\nObjects with point near route:\n");
aggA.result.forEach( function( a ) {
    aggB.result.forEach( function( b ) {
        if ( a.oid.toString == b.oid.toString ) { print( a.oid ) };        
    });
    // Note: this can be optimised        
}); 
```

结果是：

```
> db.xx.find()
{ "_id" : ObjectId("5161da88ab49f42c329f4228"), "distanceDeviation" : 2, "loc" : [ [ 0, 0 ], [ 10, -10 ], [ 20, 10 ], [ 30, 0 ] ] }
{ "_id" : ObjectId("5161da88ab49f42c329f4229"), "distanceDeviation" : 0.1, "loc" : [ [ 0, 0 ], [ 10, -10 ], [ 20, 10 ], [ 30, 0 ] ] }

>> // run the aggregates

Objects with point near route:

ObjectId("5161da88ab49f42c329f4228") 
```

另一种完全不同的方法是在距离“distanceDeviation”**的路线周围“绘制”一个封闭的多边形，**并将其存储在文档中。这将允许搜索`$within: $polygon`（类似于您在圆圈内的搜索），并且还将返回匹配路线附近但不一定靠近其组成点之一的点。

请参阅[手册](http://docs.mongodb.org/manual/)以获取有关[aggregate()](http://docs.mongodb.org/manual/aggregation/)、[$geoNear](http://docs.mongodb.org/manual/reference/aggregation/#stage._S_geoNear)和[$polygon的更多信息](http://docs.mongodb.org/manual/reference/operator/polygon/)*

# html - 如何在论坛中添加表情符号

> ID：15504705
> 
> 赞同：1
> 
> 时间：2013-03-19T16:12:06.373
> 
> 标签：html, wamp, forum, emoticons

是否有一个简单的代码可以通过使用 php 或 html 或任何其他语言建议将表情符号添加到我们在论坛中的文本中？我使用 wamp 服务器。

# symfony - 在 symfony2 中更改学说查询中的日期格式

> ID：15504709
> 
> 赞同：2
> 
> 时间：2013-03-19T16:12:21.833
> 
> 标签：symfony

在表格列中以格式`(a.paymentDate)` 插入日期。`Y-m-d H:m:i`我想查询特定日期的所有条目。为此，我必须将日期格式从 更改`Y-m-d H:m:i`为`Y-m-d`。我的查询如下。

```
namespace Regal\SmsBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * DailyTransactionRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class DailyTransactionRepository extends EntityRepository
{
    public function getDailyPayment($studentId,$paymentDate)
    {
        $paymentDate= new \DateTime('2013-03-11');
     $query = $this->getEntityManager()->createQuery("
        SELECT a.id, a.amont, a.paymentDescrip, a.paymentType, a.paymentDate
        FROM RegalSmsBundle:DailyTransaction a 
        WHERE DATE(a.paymentDate) = :paymentDate AND a.students = :studentId
    ")
    ->setParameter('studentId', $studentId)
    ->setParameter('paymentDate', $paymentDate->format('Y-m-d'))
;

return $query->getResult();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:21:59.827

试试这个，

```
$query = $this->getEntityManager()->createQuery("
        SELECT a.id, a.amont, a.paymentDescrip, a.paymentType, a.paymentDate
        FROM RegalSmsBundle:DailyTransaction a 
        WHERE DATE(a.paymentDate) = :paymentDate AND a.students = :studentId
    ")
;

$compareTo = new \DateTime('2013-03-11');
$query->setParameters(array(
        'studentId'   => $studentId, 
        'PaymentData' => $compareTo->format('Y-m-d')),
));

return $query->getResult(); 
```

**更新，**

似乎 Date() 无法识别。所以，让我分享的代码片段起作用。您应该添加一个[自定义 DQL 函数](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/dql-user-defined-functions.html)并[注册扩展](http://symfony.com/doc/current/cookbook/doctrine/custom_dql_functions.html)以让您的实体管理器知道它。

看一下[文档](http://symfony.com/doc/current/cookbook/doctrine/custom_dql_functions.html)，解释的很好。

**还，**

我认为可以使用[DATE_DIFF(date1, date2)](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#dql-functions)进行比较-它可以为您提供天数差异，这确实符合您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:31:42.683

要使 Ahmed 的答案正常工作（假设您使用的是 Mysql），您需要添加一个学说扩展。

```
namespace Cerad\Bundle\GameBundle\Doctrine\DQL;

use Doctrine\ORM\Query\Lexer;
use Doctrine\ORM\Query\AST\Functions\FunctionNode;

/**
* "DATE" "(" SimpleArithmeticExpression ")". Modified from DoctrineExtensions\Query\Mysql\Year
*
* @category DoctrineExtensions
* @package DoctrineExtensions\Query\Mysql
* @author Rafael Kassner <kassner@gmail.com>
* @author Sarjono Mukti Aji <me@simukti.net>
* @license MIT License
*/
class Date extends FunctionNode
{
    public $date;

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return "DATE(" . $sqlWalker->walkArithmeticPrimary($this->date) . ")";
    }
    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->date = $parser->ArithmeticPrimary();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

然后查看说明书以了解如何通过将 dql 部分添加到实体管理器配置文件来激活扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:46:57.940

使用查询构建器的较低技术方法可能是：

```
class DailyTransactionRepository extends EntityRepository
{
    public function getDailyPayment($studentId,$paymentDate)
    {
        $paymentDate= new \DateTime('2013-03-11');        
        $nextDate = paymentDate;
        $nextDate->modify('+1 day');

        $qb = $this->getEntityManager()->createQueryBuilder( 'a' );
        $qb->andWhere("a.paymentDate > '$paymentDate'");
        $qb->andWhere("a.paymentDate < '$nextDate'");

    return $qb->getQuery()->getResult();
    }
} 
```

除非您绝对必须有一个部分对象，否则您实际上并不需要显式选择字段。所有字段都将由实体 getter 和 setter 使用。

# python - 为什么gevent无法获取rabbitmq的完整池

> ID：15504717
> 
> 赞同：1
> 
> 时间：2013-03-19T16:12:45.090
> 
> 标签：python, rabbitmq, gevent

我想从我的 rabbitmq 获取消息，然后使用 gevent 生成 greenlet 来处理它。我的代码是：

```
import pika
import gevent.monkey
gevent.monkey.patch_all()
import gevent
from gevent.pool import Pool
from gevent import Timeout
from meliae import scanner
import MySQLdb
import urllib2
from MySQLdb.cursors import SSCursor

db=MySQLdb.connect(host='125.221.225.12',user='root',passwd='young001',charset='utf8',db='delicious',use_unicode=True) 
cur = db.cursor()

p = Pool(300)
success_count = 0
fail_count = 0

connection = pika.BlockingConnection(pika.ConnectionParameters(host='125.221.225.12'))
channel = connection.channel()
channel.queue_declare(queue='url_queue')

#logfile = file("log.txt",'aw',buffering=0)

def insert_into_avail(url):
    cur.execute("insert into avail_urls(url) values (%s)",url)
    db.commit()

def insert_into_fail(url):
    cur.execute("insert into fail_urls(url) values (%s)",url)
    db.commit()

class TooLong(Exception):
    pass

def down(url):
    global success_count
    global fail_count
    print 'the free pool is', p.free_count()
    try:
        with Timeout(30,TooLong):
            url_data = urllib2.urlopen(url)
            if url_data and url_data.getcode() ==200:
                #print 'url is ok'
                insert_into_avail(url)
                success_count = success_count+1
            else:
                print 'the code is ',url_data.getcode()
            #logfile.write(url)
            #print 'the pool is ', len(p)
            print 'success count is', success_count
    except:
        insert_into_fail(url)
        fail_count = fail_count+1
        #print 'the url is down',url
        #print 'the pool is ', len(p)
        print 'the fail_count is', fail_count

for method,properties,body in channel.consume('url_queue'):
    #print 'body is ',body
    channel.basic_ack(method.delivery_tag)
    scanner.dump_all_objects("dump.txt")
    p.spawn(down,body)
    #scanner.dump_all_objects("dump.txt")

    #print 'the pool is ', len(p)
    #logfile.write
p.join() 
```

它工作得很慢，一些输出如下：

```
the fail_count is 30
the free pool is 295
the fail_count is 31
the free pool is 295
the fail_count is 32
the free pool is 295
the fail_count is 33
the free pool is 295
the fail_count is 34
the free pool is 295
the fail_count is 35
the free pool is 295 
```

池中只有大约 5 个 greenlet，我想在池中获得 300 个 greenlet，因此程序运行速度很快。怎么了？如何调试它？因为rabbitmq，或gevent？或我的代码？谢谢

**更新：* *当我评论“scanner.dump_all_objects("dump.txt")”时，它在完整池中运行，可能是因为当我将对象写入文件时，需要时间，所以从rabbitmq获取消息很慢。

***但是在我的代码中，似乎存在内存泄漏问题，程序占用了数百M内存，所以我想打印所有对象以查找内存泄漏问题？如何解决它？有更好的方法吗？***

# javascript - Javascript替换所有外部链接

> ID：15504719
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:12:45.993
> 
> 标签：javascript, url, hyperlink

我想要实现的是在加载页面时替换所有外部链接。

例如，原始网址：

```
http://microsoft.com/faq become newurl 
```

应改为：

```
http://redirect.com/?url=http://microsoft.com/faq 
```

我尝试了在 Google 上找到的不同解决方案，但似乎没有什么对我有用。

我想我在这里找到了解决方案：http: [//jsfiddle.net/eK7XW/](http://jsfiddle.net/eK7XW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:18:59.453

编辑检查内部域：

```
function isExternal(link, domain) {
    var re = /http(s?):\/\/([\w]+\.){1}([\w]+\.?)+/;
    return re.exec(link)[0] === domain;
}

var SITE = "http://redirect.com/?url=";
var INTERNAL_DOMAIN = "http://www.yourdomain.com";
var links = document.getElementsByTagName("a");
for (var i=0; i<links.length; i++) {
    if (isExternal(links[i].href), INTERNAL_DOMAIN) {
        links[i].href = SITE + links[i].href;
    }
} 
```

如果您需要检查子域或不指定内部域，我相信代码很容易适应。

# java - 将@Autowired 添加到我的服务层会导致 Junit 错误无法加载 ApplicationContext？

> ID：15504721
> 
> 赞同：0
> 
> 时间：2013-03-19T16:12:47.827
> 
> 标签：java, spring, spring-mvc, junit

将@Autowired 添加到我的服务层会导致 Junit 错误无法加载 ApplicationContext？

我的公司有一些我们都核心的评论代码。我今天想将它添加到我的服务中，所以我将它添加到 POM.XML 中，然后我做了：

```
@Autowired
private CoreDao coreDao; 
```

一旦我添加了这个，我的 JUnit 测试就开始给我错误。：

```
Failed to load ApplicationContext 
```

所以我评论了这两行，一切都很好。为什么添加大约两行会破坏我的测试

这是我的 jUnit 测试，所以我不知道它为什么要找它

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes=TestDatabaseConfig.class)
public class TestApp {

    private static Log LOGGER = LogFactory.getLog(TestApp.class.getName());

    @Autowired
    private MemberInquiryService service;

    @Test
    public void testgetMemeberRequestInformation() {

        MemberRequest inMemberRequest = new MemberRequest();

        inMemberRequest.setRequestor("cpilling04@aol.com.dev");
        MemberInquiryInformation testInfo = service.getMemeberRequestInformation(inMemberRequest);

        Assert.assertEquals(testInfo.getFirst_Name(), "Christine");
        Assert.assertEquals(testInfo.getLast_Name(), "Pillings");
    }

    @Test
    public void testListMemberInquirys(){

        List<MemberInquiry> listMemberInquirys = service.listMemberInquirys();

        LOGGER.debug("Number of MemberInquiry(S) returned (" + listMemberInquirys.size() +")");

    }

} 
```

我将堆栈跟踪记录到[https://docs.google.com/document/d/1KU-63IQBbptjVNGGImtEBL9VIk04CCGBFiJuIjp_8d0/edit?usp=sharing](https://docs.google.com/document/d/1KU-63IQBbptjVNGGImtEBL9VIk04CCGBFiJuIjp_8d0/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:37:19.393

两种可能：

1.  正如 SJS 所说，您忘记了 @ComponentScan 并且 spring 无法将您的 CoreDao 自动连接到特定类型。
2.  如果 CoreDao 是基于 JPA 的，如果您在 persistence.xml 中没有设置，则需要相应的表：

我有类似的问题，我花了几天时间才弄清楚。最后我把 value="create" 而不是 value="validate" 来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:08:58.907

原因在于 DataConfig 没有对包含核心 bean 的包执行 ComponentScan。

例子：

```
@ComponentScan(basePackages= { "org.xxxx.inquiry", "org.xxxx.core" }) 
```

# dapper - Dapper Extensions - 更改主键字段

> ID：15504725
> 
> 赞同：1
> 
> 时间：2013-03-19T16:12:54.157
> 
> 标签：dapper

我们正在考虑从 EF 切换到 Dapper。我想使用 Dapper Extensions 来填充我的实体，例如：

```
UserInstance = conn.Get(UserProfile)(RecordID) 
```

我们所有的主键列都命名为 RecordID，但前面是 Parent_RecordID。Get 尝试使用 Parent_RecordID 作为我的主键列，“如果多个属性以 Id 结尾，Dapper Extensions 将使用第一个 Id 属性作为主键。”

我该如何更改它，以便它只为每个表查找 RecordID 作为我的主键？我知道我可以为实体创建自己的映射器，但我希望此更改适用于每个表（其中有 100 个），并且不想为每个表创建一个映射器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:14:23.720

您是否尝试过为实体创建映射类？

```
public class UserProfileMapper : ClassMapper<UserProfile>
{
    public UserProfileMapper()
    {
    Table("UserProfile");
    Map(f => f.RecordID).Key(KeyType.Identity);
    ...
    }
} 
```

不确定映射器类是否用于 Get。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-22T18:12:28.307

`[Key]`你可以在每个表的主键上面的指令

# asp.net-mvc-3 - NLog 扩展 AspNetBufferingWrapper 不工作

> ID：15504727
> 
> 赞同：2
> 
> 时间：2013-03-19T16:13:07.047
> 
> 标签：asp.net-mvc-3, iis-7, httpmodule, nlog

我使用 NLog Extended 的 AspNetBufferingWrapper 包装器在我的 web.config 中有以下目标

```
<wrapper-target type="ASPNetBufferingWrapper" name="aspNetBuffer">
    <wrapper-target type="PostFilteringWrapper" name="postFilter" defaultFilter="level >= LogLevel.Debug">
      <target-ref name="logDB" />
      <when exists="level >= LogLevel.Warn" filter="level >= LogLevel.Trace" />
    </wrapper-target>
  </wrapper-target> 
```

目标引用在没有包装器或其他包装器的情况下工作。我有文档推荐的httpmodule

```
<httpModules>
  <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
  <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
  <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
  <add name="NLog" type="NLog.Web.NLogHttpModule, NLog.Extended" />
</httpModules> 
```

我已经在 MVC3 项目中配置了 NLog.2.0.0.2000 和 NLog.Extended.2.0.0.2000。

我已经包含了 elmah 模块以指出该模块正在工作。经过搜索，我发现集成模式下的 IIS 7 使用 system.webServer 模块。我注意到 elmah 模块已经配置了这个部分，所以我包含 NLog.Extended 已经很好了。

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler" />
      <add name="NLog" type="NLog.Web.NLogHttpModule, NLog.Extended" preCondition="managedHandler" />
    </modules>
  </system.webServer> 
```

好吧，它也不好用......我已经在 Trace 模式下激活了内部 Nlog 记录器，我看到以下内容：

```
2013-03-19 16:06:58.2933 Trace Sending buffered events to wrapped target: PostFilteringWrapper Target[postFilter](AsyncWrapper Target[logDB](Database Target[logDB_wrapped])).
2013-03-19 16:06:58.2933 Trace Running PostFilteringWrapper Target[postFilter](AsyncWrapper Target[logDB](Database Target[logDB_wrapped])) on 0 events
2013-03-19 16:06:58.3053 Trace Filter to apply: (level >= Debug)
2013-03-19 16:06:58.3053 Trace After filtering: 0 events. 
```

我不记得还能做什么/搜索。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:01:21.013

The reason only the logfile from the `AsyncWrapper` are written, is because your `ASPNetBufferingWrapper` and `AsyncWrapper` has the same name. Also you File targets have the same name.

But this can only been seen when looking at your config file, [http://pastebin.com/3cP83PWa](http://pastebin.com/3cP83PWa) posted on the [NLog issues page](https://github.com/NLog/NLog/issues/194)

If you targets have unique names both files will be written.

# php - 多维数组，检查差异

> ID：15504734
> 
> 赞同：0
> 
> 时间：2013-03-19T16:13:27.817
> 
> 标签：php, arrays, loops

我有 2 个数组

```
Array
(
[0] => Array
    (
        [SKU] => 379
        [ProductName] => Wrap - Black
        [ProductSellingPrice] => 1.00
        [ProductQty] => 1
    )

[1] => Array
    (
        [SKU] => 3909
        [ProductName] => Wrap - Navy
        [ProductSellingPrice] => 0.00
        [ProductQty] => 1
    ) 
```

第二：

```
Array
(
[0] => Array
    (
        [SKU] => 378
        [ProductName] => Wrap - White
        [ProductSellingPrice] => 1.00
        [ProductQty] => 1
    )

[1] => Array
    (
        [SKU] => 3909
        [ProductName] => Wrap - Navy
        [ProductSellingPrice] => 0.00
        [ProductQty] => 1
    ) 
```

我想遍历它们并返回键值之间的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:23:25.807

我前段时间写了这个来做你所要求的。“compare_records”方法返回一个关联的更改数组，以字段名称为键。每个数组元素都是一个包含以下项目的数组：

1.  来自：原始（左）值
2.  to：新的（正确的）值
3.  消息：日志消息
4.  事件：将更改的性质描述为添加、删除或更改

像这样称呼它：

```
$changes = db_tools::compare_records( $array_old, $array_new ); 
```

* * *

```
class db_tools
{
    public static $default_log_format = 'Field %1$s changed from "%2$s" to "%3$s"';

/**
 * Returns a sorted list of keys from two arrays
 **/
    public static function get_keys( &$a, &$b )
    {
        $keys = array();
        foreach( $a as $k => $v ) $keys[$k] = 1;
        foreach( $b as $k => $v ) $keys[$k] = 1;
        ksort( $keys );
        return array_keys( $keys );
    } // get_keys

/**
 * Compares values in two arrays and returns array of differences.
 *
 * Each  difference element is an associative array in the following format:
 *      'field/key name' => array(
 *          'from'      => "from_val"
 *        , 'to'        => "to_val"
 *        , 'message'   => "Loggable message"
 *        , 'event'     => "add" or "remove" or "change"
 *      )
 *
 * @param Array Original (old) array
 * @param Array Comparison (new) array
 * @param Array Special handling instructions -- allows you to ignore fields
 *              or truncate the logged value, as in:
 *              array(
 *                  'field_name' => 'ignore' // do not detect changes
 *                , 'field_2'    => 0 // detect changes, but do not describe them
 *                , 'field_3'    => 'from %2$s to %3s field %1$s was changed' // specially formatted log message
 *              );
 * @param Array List of keys to compare. If this is omitted, the list will be
 *              constructed from keys in the first two arguments.
 * @return Array
 * @author J.D. Pace
 * @since 2010/10/02
 **/
    public static function compare_records( &$a, &$b, $special = array(), $keyset = null )
    {
        $keys = ( empty( $keyset ) ? self::get_keys( $a, $b ) : $keyset );
        $diff = array();

        foreach( $keys as $k )
        {
            $_a = ( array_key_exists( $k, $a ) ? trim( $a[$k] ) : '' );
            $_b = ( array_key_exists( $k, $b ) ? trim( $b[$k] ) : '' );

            if( $_a != $_b )
            {
                $fmt = &self::$default_log_format;
                if( array_key_exists( $k, $special ) )
                {
                    if( $special[$k] == 'ignore' )  continue;

                    if( $special[$k] == '0' )       $fmt = '%1$s changed';
                    else                            $fmt = &$instr;

                }
                $diff[$k] = array(
                    'from'      => $_a
                  , 'to'        => $_b
                  , 'message'   => sprintf( $fmt, $k, $_a, $_b )
                  , 'event'     => (
                        empty( $_a )
                        ? 'add'
                        : (
                            empty( $_b )
                            ? 'remove'
                            : 'change'
                        )
                    )
                );
            }
        }
        return $diff;
    }

/**
 * Applies new data from record b to record a according to options keyset
 * @param Array Destination Array
 * @param Array Source Array
 * @param Array Keys to apply. If this is omitted, record b will be copied
 *              into record a
 **/
    public static function update_record( &$a, &$b, $keyset = null )
    {
        $keys = ( empty( $keyset ) ? self::get_keys( $a, $b ) : $keyset );
        $updated = array();
        foreach( $keys as $k )
        {
            $a[$k] = ( empty( $b[$k] ) ? '' : $b[$k] );
        }
    }

} // class db_tools 
```

# css - less.css - 如何样式/转义方括号

> ID：15504741
> 
> 赞同：2
> 
> 时间：2013-03-19T16:13:52.163
> 
> 标签：css, escaping, less

我有一个包含以下元素的网络应用程序（我没有创建）：

```
<label for="photo[]"></label> 
```

是的，我知道这不是最理想的，但创建该应用程序的人不能相信任何替代方案都是可能的。我想知道是否可以在不重构代码的情况下在 less.css 中设置此元素的样式？

Muy 的第一直觉是：

```
label[for=photo\\[\\]] 
```

但这不起作用。我也试过：

```
label[for=photo\[\]] 
```

和

```
label[for=photo\\\[\\\]] 
```

如何通过标签选择此元素以减少样式？

[一个 JSFiddle 示例](http://jsfiddle.net/385nJ/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:48:24.043

我可能错过了重点，但是您是否尝试过引用属性选择器？

**较少的**

```
label[for="photo[]"] {
    background-color: red;
    width: 100px;
    height: 100px;
    display: block;
} 
```

似乎正在正确应用样式（[小提琴](http://jsfiddle.net/RqZSa/)）。

附带说明一下，[Codepen](http://codepen.io/)是 JSfiddle 的一个很好的替代品，它支持 less/sass（甚至 HAML/Markdown）。我在这里做了一个示例代码笔：

[http://codepen.io/NickTomlin/pen/gakci](http://codepen.io/NickTomlin/pen/gakci)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:56:03.953

您可以使用 Unicode 转义：

```
label[for=photo\5B \5D ] 
```

# paypal - 尝试将测试帐户导入 Paypal 开发人员工具时，Paypal 报告电子邮件地址已被占用

> ID：15504742
> 
> 赞同：4
> 
> 时间：2013-03-19T16:13:52.600
> 
> 标签：paypal, paypal-sandbox

在贝宝开发人员中，我创建了一个沙盒帐户进行测试，然后将其删除。如果我尝试使用同一电子邮件创建另一个帐户，系统似乎认为我用来创建它的电子邮件仍在使用中？现在我无法使用以前使用过的任何电子邮件。这是错误还是功能？我重置了我的浏览器，所以我知道它不是 cookie。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:15:41.403

您能否分享您尝试使用的电子邮件地址，我会看看是否可以将其从我身边删除。发生的情况是，当您删除帐户时，它实际上并没有删除该帐户。它只会从您的帐户/视图中删除它。它仍然存在于系统中。如果您要为创建和删除的帐户反复使用相同的电子邮件地址，请记住在删除之前删除帐户上的电子邮件地址。

# svn - SVN 中的 -r 和 url@rev 有什么区别？

> ID：15504743
> 
> 赞同：3
> 
> 时间：2013-03-19T16:13:53.360
> 
> 标签：svn, svn-client

有人可以解释以下两个 SVN 命令中使用`-r REV`and语法的区别：`URL@REV`

*   `svn co -r6002 https://svnserv2.acme.com/stx/project1/trunk/gui/Mammoth/WebContent/css`

    svn：无法在修订版 6002 中找到“https://svnserv2.acme.com/stx/project1/trunk/gui/Mammoth/WebContent/css”的存储库位置

*   `svn co https://svnserv2.acme.com/stx/project1/trunk/gui/Mammoth/WebContent/css@6002`

    签出修订版 6002。

因此，如果我用它检出一个 SVN 目录的版本`-r`失败，但如果我使用`url@REV`它可以工作 - 我会认为这两者是等价的，不幸的是 SVN 文档似乎没有解释差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T19:23:34.983

`-r X`对 Subversion 说“转到现在的 URL，告诉我你对修订版 X 的了解”（假设你没有指定`@`修订版）

`url@X`对 Subversion 说“转到修订版 X 并找到这个 URL”

该`@`语法称为[Peg Revision](http://svnbook.red-bean.com/en/1.7/svn.advanced.pegrevs.html)。这`-r X`是操作修订。

这是一个非常微妙的区别，但非常重要。`-r X`您在使用时会经常使用 `@X`.

因此，如果您`https://svnserv2.acme.com/stx/project1/trunk/gui/Mammoth/WebContent/css`在修订版 6003 中删除，它现在无法查看该`HEAD`修订版 6004（或更高版本）的 URL，因为它不存在。

# jquery - 在 Google 地图中预加载可编辑的绘图管理器多边形

> ID：15504751
> 
> 赞同：13
> 
> 时间：2013-03-19T16:14:09.127
> 
> 标签：jquery, google-maps, google-maps-api-3, google-maps-markers

我正在编写一个应用程序，允许用户使用 Google Maps API 绘制地理多边形“区域”并将它们保存在数据库中。每个用户只能有一个区域，所以我通过切换到手并在overlaycomplete上隐藏绘图工具来限制这一点。在覆盖完成之后，我可以点击保存，它保存在我的数据库中就好了——所以这个位有效。此外，我能够从数据库中检索多边形并将其显示为地图上的可编辑多边形。我遇到的问题是：

1.  当试图拖动插入多边形的点时，它们会“卡”在鼠标上并且永远不会释放。我的猜测是某种mouseup问题？

2.  尽管已经存在一个多边形，但我仍然可以绘制另一个多边形。如果从数据库加载多边形，我应该在一开始就隐藏绘图工具吗？

3.  如何将事件附加到从数据库中提取的多边形，以便捕获其顶点坐标？

您可以在此处查看我当前的代码：http: [//jsfiddle.net/FUUxz/](http://jsfiddle.net/FUUxz/)或以下：

JS：

```
 var map; // Global declaration of the map
            var iw = new google.maps.InfoWindow(); // Global declaration of the infowindow
            var lat_longs = new Array();
            var markers = new Array();
            var drawingManager;
            function initialize() {

                 var myLatlng = new google.maps.LatLng(40.9403762, -74.1318096);
                var myOptions = {
                    zoom: 13,
                    center: myLatlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP}
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
                drawingManager = new google.maps.drawing.DrawingManager({
                drawingMode: google.maps.drawing.OverlayType.POLYGON,
                drawingControl: true,
                drawingControlOptions: {
                    position: google.maps.ControlPosition.TOP_CENTER,
                    drawingModes: [google.maps.drawing.OverlayType.POLYGON]
                },
                        polygonOptions: {editable:true,fillColor:'#ff0000',strokeColor:'#ff0000',strokeWeight:2}
            });
            drawingManager.setMap(map);

            google.maps.event.addListener(drawingManager, "overlaycomplete", function(event) {
                var newShape = event.overlay;
                newShape.type = event.type;
                if (event.type==google.maps.drawing.OverlayType.POLYGON) {
                        overlayClickListener(event.overlay);$('#polygon').val(event.overlay.getPath().getArray());drawingManager.setOptions({drawingMode:null,drawingControl:false});
                    }

            });
                var polygon_plan_0 = [
                    new google.maps.LatLng(40.9534555976547, -74.0871620178223)
                    ,
                    new google.maps.LatLng(40.9410084152192, -74.0948867797852)
                    ,
                    new google.maps.LatLng(40.9411380854622, -74.1165161132812)
                    ,
                    new google.maps.LatLng(40.9490474888751, -74.1221809387207)
                    ,
                    new google.maps.LatLng(40.955140973234, -74.124584197998)
                    ,
                    new google.maps.LatLng(40.9604561066844, -74.1153144836426)
                    ,
                    new google.maps.LatLng(40.9534555976547, -74.0871620178223)
                    ];
                    lat_longs.push(new google.maps.LatLng(40.9534555976547, -74.0871620178223));

                    lat_longs.push(new google.maps.LatLng(40.9410084152192, -74.0948867797852));

                    lat_longs.push(new google.maps.LatLng(40.9411380854622, -74.1165161132812));

                    lat_longs.push(new google.maps.LatLng(40.9490474888751, -74.1221809387207));

                    lat_longs.push(new google.maps.LatLng(40.955140973234, -74.124584197998));

                    lat_longs.push(new google.maps.LatLng(40.9604561066844, -74.1153144836426));

                    lat_longs.push(new google.maps.LatLng(40.9534555976547, -74.0871620178223));

            var polygon_0 = new google.maps.Polygon({
                path: polygon_plan_0,

                strokeColor: "#ff0000",
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillColor: "#ff0000",
                fillOpacity: 0.3,
                editable: true
            });

            polygon_0.setMap(map);

            google.maps.event.addListener(polygon_0, "mouseup", function(event) {
                overlayClickListener(event.overlay);$('#polygon').val(event.overlay.getPath().getArray());drawingManager.setOptions({drawingMode:null,drawingControl:false});
            });

            }

        function createMarker(markerOptions) {
            var marker = new google.maps.Marker(markerOptions);
            markers.push(marker);
            lat_longs.push(marker.getPosition());
            return marker;
        }

initialize();

function overlayClickListener(overlay) {
    google.maps.event.addListener(overlay, "mouseup", function(event){
        $('#polygon').val(overlay.getPath().getArray());
    });
} 
```

HTML：

```
<div id="map_canvas" style="width:100%; height:450px;"></div>
<form action="http://garbagedayreminder.com/test/save" method="post" accept-charset="utf-8" id="map_form">
<input type="text" name="polygon" value="" id="polygon"  />
<input type="submit" name="save" value="Save!" id="save"  />
</form> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-16T21:15:16.703

我知道这有点老，但我一直在研究类似的情况。从数据库加载多边形，允许它们可编辑，并允许将其他多边形添加到地图中。可能有更好的方法可以做到这一点，但这是功能性的，希望能让其他人走上正轨。

```
 var areas = ( <?php echo json_encode($areas);?> );
  var coords = ( <?php echo json_encode($coords);?> );

  var drawingManager;
  var selectedShape;
  var colors = ['#1E90FF', '#FF1493', '#32CD32', '#FF8C00', '#4B0082'];
  var selectedColor;
  var colorButtons = {};

  // Saving vars
  var selectedShape;
  var contentString;
  var polygons = [];
  var newPolys = [];

  function clearSelection() {
    if (selectedShape) {
      selectedShape.setEditable(false);
      selectedShape = null;
    }
  }

  function setSelection(shape) {
    clearSelection();
    selectedShape = shape;
    shape.setEditable(true);
    selectColor(shape.get('fillColor') || shape.get('strokeColor'));
  }

  function deleteSelectedShape(e) {
    if (selectedShape) {
      selectedShape.setMap(null);
      for (i=0; i < polygons.length; i++) {   // Clear out the polygons entry
        if (selectedShape.getPath == polygons[i].getPath) {
            polygons.splice(i, 1);
        }
      }
    }
  }

  function selectColor(color) {
    selectedColor = color;
    for (var i = 0; i < colors.length; ++i) {
      var currColor = colors[i];
      colorButtons[currColor].style.border = currColor == color ? '2px solid #789' : '2px solid #fff';
    }

    // Retrieves the current options from the drawing manager and replaces the
    // stroke or fill color as appropriate.
    var polylineOptions = drawingManager.get('polylineOptions');
    polylineOptions.strokeColor = color;
    drawingManager.set('polylineOptions', polylineOptions);

    var rectangleOptions = drawingManager.get('rectangleOptions');
    rectangleOptions.fillColor = color;
    drawingManager.set('rectangleOptions', rectangleOptions);

    var circleOptions = drawingManager.get('circleOptions');
    circleOptions.fillColor = color;
    drawingManager.set('circleOptions', circleOptions);

    var polygonOptions = drawingManager.get('polygonOptions');
    polygonOptions.fillColor = color;
    drawingManager.set('polygonOptions', polygonOptions);
  }

  function setSelectedShapeColor(color) {
    if (selectedShape) {
      if (selectedShape.type == google.maps.drawing.OverlayType.POLYLINE) {
        selectedShape.set('strokeColor', color);
      } else {
        selectedShape.set('fillColor', color);
      }
    }
  }

  function makeColorButton(color) {
    var button = document.createElement('span');
    button.className = 'color-button';
    button.style.backgroundColor = color;
    google.maps.event.addDomListener(button, 'click', function() {
      selectColor(color);
      setSelectedShapeColor(color);
    });

    return button;
  }

   function buildColorPalette() {
     var colorPalette = document.getElementById('color-palette');
     for (var i = 0; i < colors.length; ++i) {
       var currColor = colors[i];
       var colorButton = makeColorButton(currColor);
       colorPalette.appendChild(colorButton);
       colorButtons[currColor] = colorButton;
     }
     selectColor(colors[0]);
   }

  function initialize() {
      var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 7,
      center: new google.maps.LatLng(40.2444, -111.6608),           // Utah default coords
      mapTypeId: google.maps.MapTypeId.Terrain,
      disableDefaultUI: true,
      zoomControl: true
    });

    var polyOptions = {
      strokeWeight: 0,
      fillOpacity: 0.45,
      editable: true
    };

    // Creates a drawing manager attached to the map that allows the user to draw
    // markers, lines, and shapes.
    drawingManager = new google.maps.drawing.DrawingManager({
      drawingMode: google.maps.drawing.OverlayType.POLYGON,
      drawingControlOptions: {
        drawingModes: [google.maps.drawing.OverlayType.POLYGON]},
      markerOptions: {
        draggable: true
      },
      polylineOptions: {
        editable: true
      },
      rectangleOptions: polyOptions,
      circleOptions: polyOptions,
      polygonOptions: polyOptions,
      map: map
    });

    google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
        if (e.type != google.maps.drawing.OverlayType.MARKER) {
        // Switch back to non-drawing mode after drawing a shape.
        drawingManager.setDrawingMode(null);
        // Add an event listener that selects the newly-drawn shape when the user
        // mouses down on it.
        var newShape = e.overlay;
        newShape.type = e.type;
        polygons.push(newShape);

        setSelection(newShape);

        google.maps.event.addListener(newShape, 'click', function() {
          setSelection(newShape);
        });

        google.maps.event.addListener(newShape, 'mouseup', function() {
          for (i=0; i < polygons.length; i++) {   // Clear out the old polygons entry
            if (newShape.getPath == polygons[i].getPath) {
                polygons.splice(i, 1);
            }
          }
          polygons.push(newShape);
        });
      }
    });

    // Clear the current selection when the drawing mode is changed, or when the
    // map is clicked.
    google.maps.event.addListener(drawingManager, 'drawingmode_changed', clearSelection);
    google.maps.event.addListener(map, 'click', clearSelection);
    google.maps.event.addDomListener(document.getElementById('delete-button'), 'click', deleteSelectedShape);

    buildColorPalette();

   /* Load Shapes that were previously saved */
    for (var inc = 0, ii = areas.length; inc < ii; inc++) {
      var newCoords = [];
      for (var c = 0, cc = coords.length; c < cc; c++) {
          if (coords[c].polygon == areas[inc].polygon) {
            var point = coords[c];
            newCoords.push(new google.maps.LatLng(point.lat, point.lng));
          }
      }

      newPolys[inc] = new google.maps.Polygon({
        path: newCoords,
        strokeWeight: 0,
        fillColor: areas[inc].fillColor,
        fillOpacity: areas[inc].fillOpacity
      });
      newPolys[inc].setMap(map);
      polygons.push(newPolys[inc]);
      addNewPolys(newPolys[inc]);
    }

    function addNewPolys(newPoly) {
        google.maps.event.addListener(newPoly, 'click', function() {
            setSelection(newPoly);
        });
    }

  }

  google.maps.event.addDomListener(window, 'load', initialize); 
```

# c++ - 如何修复这个错误代码（轮盘赌选择）？

> ID：15504755
> 
> 赞同：0
> 
> 时间：2013-03-19T16:14:18.570
> 
> 标签：c++, vector, subscript

我正在实施遗传算法以最小化 20 个变量的某些函数。

每个个体都存储为一个向量。分数存储为双打。

```
double sum = 0;
double sum = sumOfScores();
double random = (rand() * sum)/RAND_MAX;
int selected = 0;
while(random >= 0) {
 random -= individuals_score[selected];
 selected++;
}
return selected - 1; 
```

问题是，当代数变得非常大（以千计）时，代数中的个体开始收敛到解决方案，并且他们的所有分数都开始围绕最佳解决方案，有时会发生奇怪的事情：即使我们已经迭代了所有定义的个体，随机数仍然 > 0（虽然非常小，调试器告诉我它是 10^-13 的顺序）。因此，它试图继续循环遍历甚至不存在的个体（因为每次迭代都选择了增量）。这给出了一个向量下标超出范围的错误。

当代数足够大并且从逻辑上讲，当随机数接近总和时，就会发生这种情况。

理论上这不应该发生，但我认为问题可能是因为数字或截断或类似这些方面的有限表示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:27:52.037

```
double sum = 0;
double sum = sumOfScores();
double random = (rand() * sum)/RAND_MAX;
int selected = 0;

//determine the number of elements in individuals_score
const int arraySize = sizeof(individuals_score) / sizeof(individuals_score[0]);

while(random >= 0 && selected < arraySize) {
   random -= individuals_score[selected];
   selected++;
}
return selected - 1; 
```

# android - 片段分页 - 替换触摸处理程序

> ID：15504758
> 
> 赞同：0
> 
> 时间：2013-03-19T16:14:35.837
> 
> 标签：android

我正在尝试使用标签内的片段导航构建一个具有许多标签的应用程序（如许多 iPhone 应用程序）。我正在使用支持 V4 库。

所以框架是：TabActivity->FragmentActivity->Fragments

在fragment Activity中，app会调用这个方法来替换一个新的fragment：

```
public void updateFragment(Fragment fragment) { 

    final FragmentTransaction transaction = fragmentManager
            .beginTransaction();
    transaction.replace(R.id.fragment_layout, fragment, nTag);
    transaction.addToBackStack(null);
    transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    transaction.commit();
} 
```

...在新片段中，我还要求根视图处理 OnTouchEvent：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    View root = inflater.inflate(R.layout.fragment_shopfilter, container,
            false);
    root.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return true;
        }
    });

    return root;
} 
```

之前的fragment还是会获取到touch事件，如何让新的fragment只获取到touch事件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:20:44.053

您将片段注册为该事件的处理程序，因此如果您希望它不获取触摸事件，则必须取消注册。您可以`root.setOnTouchListener(null);`在设置新设置之前取消设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:51:46.227

我的代码正在运行，我只是犯了一个错误。

在新的片段列表视图适配器中，应用程序将启动一个新的空片段。但我忘记了。

# android - 如何在android上制作一个带有圆圈的方形框架按钮 ？

> ID：15504761
> 
> 赞同：-2
> 
> 时间：2013-03-19T16:14:48.280
> 
> 标签：android

我想做一个方形按钮，里面有一个彩色圆圈，你可以只看到圆圈，其余的都是透明的。目的是按钮将覆盖和隐藏一个小表面，但用户可以单击他拥有的所有方形框架。我有一个来自 Photoshop 的圆形按钮，但我无法让它工作。我希望解释清楚。谢谢你。

```
 <ImageButton
      android:id="@+id/bon8"
      android:layout_width="10dp"
      android:layout_height="10dp"
      android:src="@drawable/b_green" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:17:29.267

Sounds like you want to set the button's background:

```
<ImageButton
  android:id="@+id/bon8"
  android:layout_width="10dp"
  android:layout_height="10dp"
  android:background="@drawable/b_green" /> 
```

**---EDIT---**

Upon further discussion, I get what you're really after:

```
<ImageView
  android:id="@+id/bon8"
  android:layout_width="40dp"
  android:layout_height="40dp"
  android:background="@drawable/b_green"
  android:scaleType="center" /> 
```

# mahout - Mahout Precision Recall Movielens 10M

> ID：15504762
> 
> 赞同：2
> 
> 时间：2013-03-19T16:14:49.093
> 
> 标签：mahout

我是推荐系统的新手。我正在尝试学习 Mahout，到目前为止，我认为我已经掌握了它。

但是，当我尝试使用 Mahout in Action (Listing 2.4, page 21) 一书中的示例计算 Precision & Recall 时遇到了一个相当特殊的问题，为了更方便，我将正文复制粘贴到这里：

```
RandomUtils.useTestSeed();
 DataModel model = new FileDataModel (new File("intro.csv"));
 RecommenderIRStatsEvaluator evaluator =
 new GenericRecommenderIRStatsEvaluator ();
  RecommenderBuilder recommenderBuilder = new RecommenderBuilder() {
  @Override
   public Recommender buildRecommender(DataModel model)
    throws TasteException {
    UserSimilarity similarity = new PearsonCorrelationSimilarity (model);
    UserNeighborhood neighborhood =
     new NearestNUserNeighborhood (2, similarity, model);
      return
      new GenericUserBasedRecommender (model, neighborhood, similarity);
     }
   };
    IRStatistics stats = evaluator.evaluate(
    recommenderBuilder, null, model, null, 2,
    GenericRecommenderIRStatsEvaluator.CHOOSE_THRESHOLD,
    1.0);
 System.out.println(stats.getPrecision());
 System.out.println(stats.getRecall()); 
```

当我尝试使用书中找到的小数据集执行上述操作时，一切都应该是这样。但是，当我尝试使用 Movielens 1M 或 10M 计算 Precision & Recall 时，结果非常低……例如 Precision 和 Recall @ 2 等于：P：0.00573 和 R：0.005882

我没有想法，所以如果有人遇到或遇到类似问题，我很高兴听到有解决方案......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T17:22:25.307

第 2.4.2 节涉及解释：精确度和召回率测试对推荐者来说意义不大，因为您实际上并不知道哪些项目是“相关”结果。您可以猜测高评分的项目是相关的，但您不知道未评分的项目是否相关。测试相当于找出推荐与评分最高的项目有多少相交，这并不是精确/召回需要做的。

所以你得到低分。实际上，10％还不错。现在，0.5% 很差，是的。这意味着这不是该数据集的好算法。

[Mean average precision](http://en.wikipedia.org/wiki/Information_retrieval#Mean_average_precision)或[AUC](http://en.wikipedia.org/wiki/Receiver_operating_characteristic#Area_Under_the_Curve)可能会让您对结果的质量有更广泛的了解，因为他们正在研究更大范围的结果的行为。这些没有在 Mahout 中实现（无论如何不在这部分代码中）。

但他们在[Myrrix](http://myrrix.com/)。我知道您将在 Grouplens 10M 数据集上获得 25+% 的精度/召回率和 14+% 的平均精度，因为[对此有一个单元测试](https://code.google.com/p/myrrix-recommender/source/browse/trunk/online/test/net/myrrix/online/eval/PrecisionRecallEvaluationTest.java)。（我是 Mahout 这一部分的作者，并将其作为 Myrrix 进行商业化。）如果您正在寻找可以开箱即用的此类数据的出色工作，我认为值得您花时间看着。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-04T19:28:44.720

我想问题是你的社区规模。我记得看到一篇关于邻域大小的文章，10 的大小很少。尝试使用 10 以上的数字。

# ruby - 在 Mac OSX 10.6.8 上安装 ruby 1.9.3 时，安装日志上出现 Openssl 错误消息

> ID：15504774
> 
> 赞同：9
> 
> 时间：2013-03-19T16:15:29.090
> 
> 标签：ruby, openssl, installation, rvm, osx-snow-leopard

您好我正在尝试使用以下代码通过 rvm 安装 ruby​​：

`CC=/usr/bin/gcc-4.2 rvm install 1.9.3 --with-iconv-dir=$rvm_path/usr --with-openssh-dir=$rvm_path/usr`

但我在（安装）make.log 文件中遇到错误：

> 在 openssl_missing.c:22:450 openssl_missing.h:71: 错误：“HMAC_CTX_copy”类型冲突</p>的文件中
> 
> 451 /Users/Sebastian/.rvm/usr/include/openssl/hmac.h:102: 错误: 'HMAC_CTX_copy' 的先前声明在这里
> 
> 452 openssl_missing.h:95：错误：“EVP_CIPHER_CTX_copy”的类型冲突</p>
> 
> 453 /Users/Sebastian/.rvm/usr/include/openssl/evp.h:503: 错误: 'EVP_CIPHER_CTX_copy' 的先前声明在这里
> 
> 454 openssl_missing.c:27: 错误: 'HMAC_CTX_copy' 的类型冲突</p>
> 
> 455 /Users/Sebastian/.rvm/usr/include/openssl/hmac.h:102: 错误: 'HMAC_CTX_copy' 的先前声明在这里
> 
> 456 openssl_missing.c:122：错误：“EVP_CIPHER_CTX_copy”的类型冲突</p>
> 
> 457 /Users/Sebastian/.rvm/usr/include/openssl/evp.h:503: 错误: 'EVP_CIPHER_CTX_copy' 的先前声明在这里
> 
> 458 make[2]: [openssl_missing.o] 错误 1
> 
> 459 make[1]: [ext/openssl/all] 错误 2
> 
> 460 make: [build-ext] 错误 2

我读过这可能与 macports 安装有关，但我确保我删除了与它相关的所有内容。

另一方面，在**/usr/bin/**的另一个位置有一个 openssl 文件。我不确定这是否会引起冲突，但我不敢删除它。

我很感激你在这方面的帮助。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T19:22:14.697

在将 rvm 的 openssl pkg 安装到 testdrive ruby​​ 2.0.0 后，我遇到了类似的问题。

经过一番摆弄，以下为我解决了它：

*   让您的 rvm 保持最新状态：

    `$ rvm get head`

*   删除您手动安装的软件包：

    `$ rvm pkg remove`

*   直接了解要求：

    `$ rvm requirements run`

    在这里，我得到了缺少的必需软件包的列表：

> ```
>  Installing requirements for osx/10.8/x86_64, might require sudo password
>    Skipping `brew update` make sure your formulas are up to date.
> -> Missing required packages: libtool, libxml2, libxslt, sqlite.
>    Skipping update of certificates in '/usr/local/etc/openssl/cert.pem'. 
> ```

*   我“自制”了这些包：

    `$ brew update`

    `$ brew install libtool libxml2 libxslt sqlite`

*您可以通过再次运行该`rvm requirements run`命令来重新检查要求，以查看您是否清除了丢失的包。*

*   重新安装 ruby​​，在我的例子中是 1.9.3-p392：

    `$ rvm reinstall 1.9.3-p392`

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:23:01.387

我也遇到了这个。尝试按照[此处](http://railsapps.github.com/openssl-certificate-verify-failed.html)的步骤操作。

基本上，在终端上：

> 您还可以安装[Homebrew](http://mxcl.github.com/homebrew/)并尝试以下操作：

```
$ brew update
$ brew install openssl
$ brew link openssl --force
$ brew install curl-ca-bundle 
```

# asana - 如何暴露体式任务创建者？

> ID：15504779
> 
> 赞同：0
> 
> 时间：2013-03-19T16:15:37.173
> 
> 标签：asana

我需要能够通过 API 公开谁在 asana 中创建了任务。目前，我只返回对任务创建评论的人、当前分配给任务的人以及正在关注任务的人。这让我猜测谁真正创建了任务。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:15:38.407

Asana 支持首先通过电子邮件回复我，所以我会为其他人回答这个问题。有点解决方法。

Api 调用：
/tasks/{task-id}/stories
/projects/{project-id}/stories

这些将为您提供分配任务时生成的系统消息以及对任务的评论。如果任务已被重新分配给某人，您将拥有以下内容：

```
[{u'text': u'assigned to Bob', u'created_at': u'2013-03-18T23:24:21.159Z', u'type': u'system', u'id': 12345, u'created_by': {u'id': 54321, u'name': u'Nick'}}, {...},] 
```

利用它是 type: system 而不是 type: comment 的事实，并在文本字段上进行匹配，您可以找出创建者的 id。

# c# - 在定时器超时前检查任务是否成功 C#（多线程）

> ID：15504788
> 
> 赞同：0
> 
> 时间：2013-03-19T16:15:57.800
> 
> 标签：c#, multithreading, timertask

我有一个父线程产生多个任务/作业线程（由其他人完成）的场景。最后，我需要执行一项与作业线程无关的附加任务。

我需要的是执行这个新任务（检查删除服务器上的文件是否存在）只要固定时间，即最多 30 分钟，并以固定间隔重复该过程，即每 2 分钟，直到条件满足。如果确认成功，它应该退出回到主线程（父——父线程需要等待这个特定任务结束才能终止）。

我对 C# 多线程非常陌生，即使我们需要在这种情况下使用线程。所以，有人可以给我一个指导。

```
主线程
{
子线程0...n
全部做完

长达 n 分钟
(R) 每 m 分钟检查一次
成功则退出
如果没有，继续等待m分钟，然后（R）
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:35:00.570

尝试这样的事情：

```
 Task.Factory.StartNew(() =>
  {
     while (!CheckForSomething())
        Task.Delay(TimeSpan.FromMinutes(2));

  }).Wait(TimeSpan.FromMinutes(30)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:38:31.880

有几种方法可以做到这一点，这里没有列出来，:)

*   使用 AutoResetEvent，[此处为示例](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)。
*   使用 Task.ContinueWith，请参见[此处](http://msdn.microsoft.com/en-us/library/dd270696.aspx)和[此处的示例](https://stackoverflow.com/questions/15500398/c-sharp-mixed-use-of-task-and-dispatcher-invoke-why-it-halts)。
*   使用[Paralle.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)
*   以及其他低级别的，例如使用锁等。

# .net - .Net 未连接到数据库

> ID：15504797
> 
> 赞同：1
> 
> 时间：2013-03-19T16:16:29.520
> 
> 标签：.net, database, connection

下面列出的是“.aspx.vb”文件中的代码。但是，它不连接到 SQL 2008 DB。代码中有错误吗？是否有执行下面列出的存储过程的替代方法？感谢您的预期答复。

```
Dim con As SqlConnection = New SqlConnection(ConfigurationManager.ConnectionStrings("ConStr").ToString())
Dim cmd As New SqlCommand

con.Open()
Dim units As TextBox = DirectCast(e.Item.FindControl("txtUnits"), TextBox)
Dim weight As TextBox = DirectCast(e.Item.FindControl("txtWeight"), TextBox)
Dim length As TextBox = DirectCast(e.Item.FindControl("txtLength"), TextBox)
Dim height As TextBox = DirectCast(e.Item.FindControl("txtHeight"), TextBox)
Dim width As TextBox = DirectCast(e.Item.FindControl("txtWidth"), TextBox)
Dim fclass As RadComboBox = DirectCast(e.Item.FindControl("ddlFreightClass"), RadComboBox)

cmd = New SqlCommand("spShipmentsLineValueInsert", con)
cmd.CommandType = CommandType.StoredProcedure

cmd.Parameters.Add(New SqlParameter("@LoadNumber", Convert.ToInt64(Session("loadNumber"))))
cmd.Parameters.Add(New SqlParameter("@Units", Convert.ToInt16(units.Text)))
cmd.Parameters.Add(New SqlParameter("@Weight", Convert.ToDecimal(weight.Text)))
cmd.Parameters.Add(New SqlParameter("@Length", Convert.ToDecimal(length.Text)))
cmd.Parameters.Add(New SqlParameter("@Width", Convert.ToDecimal(width.Text)))
cmd.Parameters.Add(New SqlParameter("@Height", Convert.ToDecimal(height.Text)))
cmd.Parameters.Add(New SqlParameter("@FreightClass", fclass.SelectedItem.Text))
cmd.Parameters.Add(New SqlParameter("@DefaultMeasure", defaultMeasure))
cmd.Parameters.Add(New SqlParameter("@SessionID", userCode))

Dim RetVal As String = cmd.ExecuteNonQuery()

con.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:21:02.193

您的连接字符串必须是这样的：

```
ConfigurationManager.ConnectionStrings("ConStr").ConnectionString 
```

示例：您在 web.config 中的密钥：

```
<connectionStrings>
  <clear />
  <add name="ConStr" 
       connectionString=
             "server=MYSERVER; Database=MYDB; Integrated Security=SSPI;" />
</connectionStrings> 
```

您从 web.config 获取连接字符串的代码：

```
Dim con As SqlConnection = New SqlConnection(ConfigurationManager.ConnectionStrings("ConStr").ConnectionString) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T16:20:35.100

通常连接字符串看起来像这种模式`Data Source= *database path*`

# api - 简单的 Google Analytics API 算法

> ID：15504804
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:16:43.897
> 
> 标签：api

其中一个“昨天急需”的项目已经提出，希望能提供意见。我们有 Google Analytics 帐户，其中包含一些报告，这些报告位于报告的“自定义”部分......

创建一个可以为报告提取此信息的程序的最佳方法是什么，但是我们的代码运行一个日期循环（我们需要从 2011 年开始的每日报告）并将其导出到 CSV....

更详细地说，我需要 API 代码来执行以下操作（这显然是伪算法，但希望能得到想法）

1.  日期：2011 年 8 月（这将是循环的顶部）
2.  拉页面浏览量，页面/访问访问，访问持续时间指标
3.  提供自定义变量（这在谷歌分析本身中效果很好，但我不知道如何通过 API 做到这一点？）

    1.  导出为 csv
    2.  与下一个日期再次循环有关解决方案的问题

    3.  Javascript 或 php 是一个好方法吗？如果是这样，是否有人有任何示例/示例说明如何执行此操作？2.顺便说一句，我已经下载了asp.net C#的SDK ...你们可能都知道，由于这是迫切需要的，我想问一下是否有更简单的路线我错过了...

    4.  任何人都使用 APP 脚本来做类似的事情，你可以在其中循环运行一个例程来获取电子表格/csv 信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:54:31.533

解决了！我正在努力记录这个疯狂的谷歌分析世界，这让我经历了 8 个小时的发现和重新发现谷歌对 API 调用的期望......

作为提示，我使用了一个简单的 .NET 解决方案......一旦我把它全部放在脑海中并且项目完成了，我正在记录它并将更新这篇文章！

# java - 在 Java 中将图像转换为缓冲区

> ID：15504807
> 
> 赞同：4
> 
> 时间：2013-03-19T16:16:48.860
> 
> 标签：java, opengl-es, libgdx

我正在尝试在我目前正在开发的游戏中实现一些简单的 3D 功能。我正在使用**LibGDX 游戏引擎**来实现这个目标，因为它似乎与 OpenGL ES 很好地集成，但是由于我无法弄清楚如何`Buffer`从 Java 中的图像创建简单对象而遇到了问题。

## 问题

我的目标是让一个立方体在 3D 空间中旋转，上面有一些纹理。问题是，虽然我设法渲染了立方体并让它旋转，但我似乎找不到任何关于如何将图像实际解码为 a`Buffer`以纹理立方体的教程、代码示例或文档。我找到了很多示例来说明如何在 Android 中执行此操作，但是这限制了您必须使用`BitmapFactory.decodeResource(<your_image here>)`Android SDK 中的方法，这对我来说不是一个选项，因为我试图让我的代码可以移植到许多人平台。

正是出于这个原因，我得出的结论是，我必须以某种方式找到一种方法来将图像（`.bmp`文件）解码为 a `Buffer`，以便利用`Gdx.gl10.glTexImage2D()`我发现与 OpenGL ES 打包的方法。

## 到目前为止我尝试过的

我已经寻求了许多替代方案来尝试找到解决方案，其中包括：

*   利用LibGDX 包附带`Texture.bind()`的类中嵌入的方法。`Texture`
*   尝试使用 Java [ImageIO](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageReader.html)包解码图像。
*   使用其他一些解码工具，例如[image4j](http://image4j.sourceforge.net/)库。

## 一些代码

这是我用来渲染多维数据集的一些代码。为了清楚起见，省略了很多 OpenGL“开关翻转”，所以如果你认为我遗漏了什么，请发表评论，我会确认它是否只是在另一个类的另一部分。

我知道这段代码很难筛选，所以我已尽力在必要时对其进行评论。

请注意，此代码代表我当前的实现，并且是与下面的“调试信息”部分相关联的代码。

```
public void draw(){

    // This is used to hold the OpenGL pointer to the texture      
    int[] textures = new int[1];

    // Tells the GPU to render the vertices in a clockwise manner   
    Gdx.gl10.glFrontFace(GL10.GL_CW);

    // Informs OpenGL of the location of the vertices
    Gdx.gl10.glVertexPointer(3, GL10.GL_FLOAT, 0, mVertexBuffer);

    // Bind the texture pointer in OpenGL to the texture
    Gdx.gl10.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    // This is the function I found in LibGDX that I think I am supposed to use?
    mTexture.bind();

    // Some "switch-flipping" in OpenGL
    Gdx.gl10.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER,
            GL10.GL_NEAREST);

    Gdx.gl10.glTexParameterf(GL10.GL_TEXTURE_2D,
            GL10.GL_TEXTURE_MAG_FILTER,
            GL10.GL_LINEAR);

    Gdx.gl10.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S,
            GL10.GL_CLAMP_TO_EDGE);

    Gdx.gl10.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T,
            GL10.GL_CLAMP_TO_EDGE);

    Gdx.gl10.glTexEnvf(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE,
            GL10.GL_REPLACE);

    // This tells OpenGL to assign my Texture to the 3D Image
    Gdx.gl10.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGB, 256, 256, 0, GL10.GL_RGB, GL10.GL_UNSIGNED_BYTE, mTexture);

    // Finally, this draws the objects to the screen
    Gdx.gl.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_BYTE, mIndexBuffer);
} 
```

## 我的问题

你如何将图像直接解码为`Buffer`Java中的a？如果无法做到这一点，那么我应该如何尝试在 LibGDX 中对我的 3D 对象进行纹理处理？我应该咨询其他资源吗？

## 调试信息

*最后更新时间：美国东部标准时间 2013 年 3 月 19 日下午 12:45*

这是与我的应用程序当前调试过程相关的一些信息。随着我在这个问题上的进展，我会更新这个：

*   目前，当我运行我的应用程序时，我收到一个错误`Invalid memory access of location 0x0 rip=0x11dc77564`，也许这个实现是正确的，我只是在其他地方遗漏了一些语法？
*   我目前正在调查我在筛选一些论坛后发现的[这个额外资源。](http://badlogicgames.com/forum/viewtopic.php?f=11&t=4552&p=21913&hilit=3D%20Cube%20texture#p21913)
*   看来该`Mesh`对象将是此处的正确路线。我将尝试执行此操作并更新我的结果！我之前无法找到它，因为 LibGDX 团队认为它“已弃用”，所以我不确定它是否会很快被替换。

## 补充信息

回答我的问题时应该考虑的一些事情是：

*   应该注意的是，我正在使用[LibGDX Game Engine](http://libgdx.badlogicgames.com/)执行此操作，因此，我还将在他们的论坛上发布有关此问题的帖子。

*   此外，似乎有很多方法可以`BufferedImage`从 Image 中获取 a ，但是没有办法从中提取`Buffer`a `BufferedImage`。我只是在这里忽略了一些明显的东西吗？`BufferedImage`s 真的是我所需要的吗？

*   我不希望只在我的构建路径中包含 Android SDK 并使用他们的简单`BitmapFactory.decodeResource(<your_image_here>)`方法。

*   出于兼容性原因，我目前正在尝试使用 OpenGL ES 1.0 来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:52:14.157

我认为您想避免使用原始 OpenGL 纹理和缓冲区 API，并坚持使用 Libgdx`Mesh`和`Texture`包装器。他们隐藏了一堆 OpenGL 细节。当然，如果您有兴趣了解 OpenGL 的详细信息，这不会有什么帮助。（但也许您可以使用 Libgdx API 来处理事情，然后查看它们的源代码以了解实际发生的情况）。

第一步是确保您的`Mesh`（或您的原始`mVertexBuffer`OpenGL 顶点列表，如果您不使用 a `Mesh`）包含每个顶点的有效 (u, v) 纹理坐标。这些坐标将在渲染时引用“当前”纹理。请参阅[https://code.google.com/p/libgdx/wiki/MeshColorTexture#Texture](https://code.google.com/p/libgdx/wiki/MeshColorTexture#Texture)。

首先，定义您的 Mesh 以包含每个顶点的纹理信息：

```
mesh = new Mesh(true, 3, 3, 
            new VertexAttribute(Usage.Position, 3, "a_position"),
            new VertexAttribute(Usage.ColorPacked, 4, "a_color"),
            new VertexAttribute(Usage.TextureCoordinates, 2, "a_texCoords")); 
```

（这个网格也有颜色数据，但如果你不想混合原始颜色数据，你可以用“a_color”去掉这条线。）

另一个准备步骤是将纹理文件加载到 Libgdx 纹理中。假设文件打包在标准的“资产”位置，您应该能够使用相对路径加载它：

```
Texture texture = new Texture("path/to/image.bmp"); 
```

Libgdx 通常可以加载和解析 BMP、PNG 和 JPEG 文件格式。对于其他格式，我认为您需要自己创建一个`Pixmap`对象，然后将其插入`Texture`.

其次，确保每个顶点都有与之关联的 (u,v) 纹理坐标：

```
mesh.setVertices(new float[] { -0.5f, -0.5f, 0, Color.toFloatBits(255, 0, 0, 255), 0, 1,
                                0.5f, -0.5f, 0, Color.toFloatBits(0, 255, 0, 255), 1, 1
                                0, 0.5f, 0, Color.toFloatBits(0, 0, 255, 255), 0.5f, 0 }); 
```

上面的每一行都为每个顶点定义了“(x, y, z, rgba, u, v)”。（“rgba”是将整个颜色压缩成一个浮点数。）

至此，您已经定义了`Mesh`带有`Color`信息和纹理 (u, v) 坐标的 a。

第二步是，在`render`调用过程中，绑定你的纹理，所以 (u, v) 坐标中`Mesh`有一些东西可以参考：

```
texture.bind();
mesh.render(GL10.GL_TRIANGLES, 0, 3); 
```

您不需要直接使用任何 OpenGL 纹理或顶点 API。

# javascript - JS/canvas putImageData 失败

> ID：15504809
> 
> 赞同：0
> 
> 时间：2013-03-19T16:16:53.350
> 
> 标签：javascript, canvas

以下代码失败且没有错误，它根本不会将所有像素保持为绿色。由此产生的噪音效果非常酷，但我希望它们是绿色的。我认为错误是因为我正在复制行但没有将其与 RGBA 阅读框对齐。小提琴在这里：http: [//jsfiddle.net/mDk2W/2/](http://jsfiddle.net/mDk2W/2/)

```
var s = document.getElementById('s');
s.width = 640;
s.height = 480;
var x = s.getContext('2d');
var idata;
var ppx;

function arrayCopy(src, sstart, dst, dstart, length) {
    for (var i = sstart; i < sstart + length; i += 1) {
        dst[dstart++] = src[i];
    }
}

function loadPixels() {
    idata = x.getImageData(0, 0, s.width, s.height);
    ppx = idata.data;
}

function updatePixels() {
    idata.data = ppx;
    x.putImageData(idata, 0, 0);
}

function setup_static() {
    loadPixels();
    for (var y = 0; y < ppx.length - 4; y += 4) {
        var spread = Math.round(Math.random() * 4);
        switch (spread) {
            case (1):
                if (y - 1920 > 0) {
                    ppx[y + 1] = ppx[y - 1919];
                }
                break;
            case (2):
                if (y - 4 > 0) {
                    ppx[y + 1] = ppx[y - 3];
                }
                break;
            case (3):
                ppx[y + 1] = parseInt(Math.round(Math.random()) * 255);
                if (y + 1921 < ppx.length) {
                    ppx[y + 1920] = ppx[y + 1];
                }
                break;
            case (4):
                ppx[y + 1] = parseInt(Math.round(Math.random()) * 255);
                if (y + 5 < ppx.length) {
                    ppx[y + 5] = ppx[y + 1];
                }
                break;
            case (0):
                break;
        };
    }
}
setup_static();
var height = s.height;
var heightover2 = height / 2.0;
var widthby4 = s.width * 4;

function draw() {
    for (y = 0; y < height; y += 1) {
        arrayCopy(ppx, parseInt(Math.round(Math.random() * (heightover2))), ppx, y * widthby4, widthby4);
    }
    updatePixels();
    requestAnimationFrame(draw);
}
draw(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:52:29.263

工作小提琴：http: [//jsfiddle.net/8rgFQ/](http://jsfiddle.net/8rgFQ/)

以下代码有效并具有 4 种不同的绘图功能（具有不同级别的[反馈](http://en.wikipedia.org/wiki/Feedback)）：

```
var s = document.getElementById('s');
s.width = 640;
s.height = 395;
var height = s.height;
var heightover2 = height/2.0;
var widthby4 = s.width*4;
var x = s.getContext('2d');
var idata;
var ppx,pixels;
function arrayCopy(src,sstart,dst,dstart,length) {
           for(var i = sstart; i < sstart+length;i+=1 ) {
                  dst[dstart++] = src[i];
           }
    }
function fillArray(a,c,l) {
    a = new Array(l);
    while(l-- > 0) {
        a[l] = c;
    }
    return a;
};
function loadPixels() {
    idata = x.getImageData(0,0,s.width,s.height);
    ppx = idata.data;
    idata = x.getImageData(0,0,s.width,s.height);
    pixels = idata.data;
}
function updatePixels() {
    idata.data = pixels;
    x.putImageData(idata,0,0);
}
function setup_static() {
      loadPixels();
      for (var y = 0; y < ppx.length-4;y+=2) {
          var spread = Math.round(Math.random()*4);
          switch(spread) {
        case(1):
            if(y-widthby4+1 > 0) {
            ppx[y+1] = ppx[y-widthby4+1];
            }
            break;
        case(2):
            if(y-4 > 0) {
            ppx[y+1] = ppx[y-3];
            }
            break;
        case(3):
            ppx[y+1] = parseInt(Math.round(Math.random())*255);
            if(y+widthby4+1 < ppx.length) {
            ppx[y+widthby4+1] = ppx[y+1];
            }
            break;
        case(4):
            ppx[y+1] = parseInt(Math.round(Math.random())*255);
            if(y+5 < ppx.length) {
            ppx[y+5] = ppx[y+1];
            }
            break;
        case(0):
            break;
          };
    }
}
setup_static();
//arrayCopy(ppx,0,pixels,0,ppx.length);
//updatePixels();
// height rows of feedback per frame and no reading frame alignment
function draw() {
    for (y = 0; y < height; y += 1) {
        arrayCopy(pixels, parseInt(Math.round(Math.random() * (heightover2))), pixels, y * widthby4, widthby4);
    }
    updatePixels();
    requestAnimationFrame(draw);
}
//arrayCopy(ppx,0,pixels,0,ppx.length);
//draw();
// height rows of feedback per frame
function draw1() {
    for(y = 0; y < height;y+=1) {
        var row = parseInt( Math.round(Math.random()*(heightover2)));
        row -= row%2;
            arrayCopy(pixels,row, pixels, y*widthby4,widthby4);
    }
    updatePixels();
    requestAnimationFrame(draw1);
}
//arrayCopy(ppx,0,pixels,0,ppx.length);
//draw1();
// no feedback beyond 1 frame
function draw2() {
    for(y = 0; y < height;y+=1) {
        var row = parseInt( Math.round(Math.random()*(heightover2)));

        row -= row%2;
            arrayCopy(ppx,row, pixels, y*widthby4,widthby4);
    }
    for(y = 0; y < height;y+=1) {
        var row = parseInt( Math.round(Math.random()*(heightover2)));

        row -= row%2;
            arrayCopy(pixels,row, pixels, y*widthby4,widthby4);
    }
    updatePixels();
    requestAnimationFrame(draw2);
}
//draw2();
// 1 row of feedback per frame
function draw3() {
    for(y = 0; y < height;y+=1) {
        var row = parseInt( Math.round(Math.random()*(heightover2)));

        row -= row%2;
            arrayCopy(ppx,row, pixels, y*widthby4,widthby4);
    }
    for(y = 0; y < height;y+=1) {
        var row = parseInt( Math.round(Math.random()*(heightover2)));

        row -= row%2;
            arrayCopy(pixels,row, pixels, y*widthby4,widthby4);
    }
    var row = parseInt( Math.round(Math.random()*(heightover2)));
    arrayCopy(pixels,row,ppx,row*widthby4,widthby4);
    updatePixels();
    requestAnimationFrame(draw3);
}
draw3(); 
```

HTML/CSS：

```
<style>
#s {
    width:640px;
    height:395px;
    background:black;   
}
</style>
<canvas id="s"></canvas> 
```

# jasper-reports - 如何防止报表中重复显示数据？

> ID：15504817
> 
> 赞同：2
> 
> 时间：2013-03-19T16:17:14.390
> 
> 标签：jasper-reports, report

## 样本报告 - 设计

![我的样本报告 - 设计](../Images/c757f2d9291fa0695de9b9e2b80aeb12.png)

## 样本报告 - 预览

![在此处输入图像描述](../Images/3bb42a5be6914acd7df77b29f7830f34.png)

## XML 代码文件

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report2" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="82a3ce80-bdcd-4d51-8f21-e72b3f438b53">
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
            <style backcolor="#EFF7FF"/>
        </conditionalStyle>
    </style>
    <style name="table 1">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
            <style backcolor="#EFF7FF"/>
        </conditionalStyle>
    </style>
    <subDataset name="dataset1" uuid="70653a81-8d48-4edd-b72f-20f769f51aea">
        <queryString language="SQL">
            <![CDATA[SELECT
     schooldetails.`ID` AS schooldetails_ID,
     schooldetails.`Name` AS schooldetails_Name,
     schooldetails.`Boardtype` AS schooldetails_Boardtype,
     schooldetails.`Location` AS schooldetails_Location,
     schooldetails.`Phone` AS schooldetails_Phone,
     schooldetails.`Address` AS schooldetails_Address,
     schooldetails.`Additionaldetails` AS schooldetails_Additionaldetails
FROM
     `schooldetails` schooldetails]]>
        </queryString>
        <field name="schooldetails_ID" class="java.lang.Integer"/>
        <field name="schooldetails_Name" class="java.lang.String"/>
        <field name="schooldetails_Boardtype" class="java.lang.String"/>
        <field name="schooldetails_Phone" class="java.lang.String"/>
    </subDataset>
    <queryString>
        <![CDATA[SELECT
     schooldetails.`ID` AS schooldetails_ID,
     schooldetails.`Name` AS schooldetails_Name,
     schooldetails.`Boardtype` AS schooldetails_Boardtype,
     schooldetails.`Location` AS schooldetails_Location,
     schooldetails.`Phone` AS schooldetails_Phone,
     schooldetails.`Address` AS schooldetails_Address,
     schooldetails.`Additionaldetails` AS schooldetails_Additionaldetails
FROM
     `schooldetails` schooldetails]]>
    </queryString>
    <field name="schooldetails_ID" class="java.lang.Integer"/>
    <field name="schooldetails_Name" class="java.lang.String"/>
    <field name="schooldetails_Boardtype" class="java.lang.String"/>
    <field name="schooldetails_Location" class="java.lang.String"/>
    <field name="schooldetails_Phone" class="java.lang.String"/>
    <field name="schooldetails_Address" class="java.lang.String"/>
    <field name="schooldetails_Additionaldetails" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch">
            <staticText>
                <reportElement uuid="e15d9fdb-5a73-421d-8059-3e6d84742a43" x="0" y="0" width="555" height="79"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="24" isBold="true"/>
                </textElement>
                <text><![CDATA[Sample report 2]]></text>
            </staticText>
        </band>
    </title>
    <detail>
        <band height="114">
            <componentElement>
                <reportElement uuid="0752ad71-0544-4a92-bc06-666619eada15" key="table 1" style="table 1" x="0" y="0" width="360" height="50"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="dataset1" uuid="46c3a1a8-1e2b-4ea0-b7ac-5b630657c146">
                        <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    </datasetRun>
                    <jr:column width="99" uuid="b4badcbe-8219-4fcf-978c-b5ff6f2057d0">
                        <jr:columnHeader style="table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="09f0cb22-b9b2-499a-9e94-0d9edb96e5f8" x="0" y="0" width="99" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="14" isBold="true"/>
                                </textElement>
                                <text><![CDATA[School ID]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="0be272c3-3345-48fd-b90a-a0d0df3bc909" x="0" y="0" width="99" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="12"/>
                                </textElement>
                                <textFieldExpression><![CDATA[$F{schooldetails_ID}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="160" uuid="1f036ef4-d3e4-4113-9084-5530b1e3e8d2">
                        <jr:columnHeader style="table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="9ef54b86-c6ac-4f0b-8904-ff82ace55d7c" x="0" y="0" width="160" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="14" isBold="true"/>
                                </textElement>
                                <text><![CDATA[Name]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="6c01ebc8-165d-41da-b632-8b19b67770ac" x="0" y="0" width="160" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="12"/>
                                </textElement>
                                <textFieldExpression><![CDATA[$F{schooldetails_Name}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="114" uuid="7561e583-3af8-4799-ac88-2a7e8c164bfa">
                        <jr:columnHeader style="table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="c500ce42-e32d-4704-9832-52d7413926e3" x="0" y="0" width="114" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="14" isBold="true"/>
                                </textElement>
                                <text><![CDATA[Board]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="da078d0e-c6fb-4a3d-a0ed-ea12265cf729" x="0" y="0" width="114" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="12"/>
                                </textElement>
                                <textFieldExpression><![CDATA[$F{schooldetails_Boardtype}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="131" uuid="7842fd3f-e097-4acd-a1ab-a09c0361c23b">
                        <jr:columnHeader style="table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="c0519344-d25a-4ed9-8970-1acf9e4857ed" x="0" y="0" width="131" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="14" isBold="true"/>
                                </textElement>
                                <text><![CDATA[Phone]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="560916c9-e02a-40c9-a7af-a63d285b900a" x="0" y="0" width="131" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="12"/>
                                </textElement>
                                <textFieldExpression><![CDATA[$F{schooldetails_Phone}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </detail>
</jasperReport> 
```

## 我的问题

如何避免重复显示表格两次？我希望数据只显示一次。

正如您在上面的屏幕截图中看到的，我不希望数据显示两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:26:25.790

您已将表格组件放入详细信息带中。为数据集中的每条记录重复详细信息带。你有两条记录，所以你的表重复了两次；如果你有更多的数据，你会得到更多的重复。

您可以完全摆脱 table 组件，将 table 中的每个`columnHeader`元素放入一个`<columnHeader>`band，并将每个`detailCell`元素放入一个`<detail>`band。这样做应该保留表格组件的行为而不重复它。有关此示例，请参见[http://community.jaspersoft.com/wiki/designing-report 。](http://community.jaspersoft.com/wiki/designing-report)

或者，您可以简单地将表格组件移动到不会重复的不同波段（例如`<summary>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:10:35.287

复制汇总带中的表格组件并删除详细信息带。

如果要在表数据中重复值，则在 Ireport 中编辑表组件并选择文本字段并取消选中文本字段的“打印重复值”复选框属性。

XML 代码将是这样的：-

```
 </jr:columnHeader>
          <jr:detailCell style="table 1_TD" height="20" rowSpan="1">
             <textField>
                <reportElement uuid="560916c9-e02a-40c9-a7af-a63d285b900a" 
          isPrintRepeatedValues="false" x="0" y="0" width="131" height="20"/>
             <textElement textAlignment="Center" verticalAlignment="Middle">
                 <font size="12"/>
            </textElement>
           <textFieldExpression><![CDATA[$F{schooldetails_Phone}]]>  
           </textFieldExpression>
             </textField>
            </jr:detailCell>
          </jr:column> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-22T06:29:30.950

如果您的表格在列表组件中多次显示，请取消选中“详细信息溢出时打印”并尝试。这个对我有用。

# css - Can Stylus be configured to compile .css once, instead of on .styl change?

> ID：15504819
> 
> 赞同：0
> 
> 时间：2013-03-19T16:17:20.063
> 
> 标签：css, node.js, production-environment, stylus

In development, recompiling .css every time .styl changes is highly convenient. But on production, we don't want to spend resources compiling on every request; we'd like to compile once, on app start.

Can Stylus be configured this way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:11:35.820

[SocketStream](https://github.com/socketstream/socketstream/blob/master/src/client/pack.coffee)有一个资产打包器，可以在生产模式下预编译 css、js 和模板文件。也许使用检查环境变量（开发或生产）的模式，然后提供即时编译的文件集，或在节点第一次启动时完成的预打包资产集（即编译你的css，然后使用`fs`模块将它们写入磁盘）。

以下内容来自socketstream的[stylus模块](https://github.com/socketstream/ss-stylus/blob/master/wrapper.js)：

```
stylus(input, {filename: path, paths: [dir.join('/')]})
  .render(function(err, css) {
  if (err) {
    console.log(err);
  }
  cb(css);
}); 
```

cb 方法是用于提供[fs.writeFileSync](http://nodejs.org/api/fs.html#fs_fs_writefilesync_filename_data_options)调用的回调，该调用接收已编译的文件。所以，最后你有 4 个部分：

1.  在应用启动时检查环境变量。
2.  如果是开发模式，那么只需像现在一样提供文件。
3.  如果是生产模式，则预编译 css 文件并将它们作为缩小的 css 文件输出到目录中。
4.  将标题 HTML 中的引用更改为缩小的 css 文件。

# php - 自定义字段的 foreach 循环问题

> ID：15504821
> 
> 赞同：1
> 
> 时间：2013-03-19T16:17:23.600
> 
> 标签：php, if-statement, foreach

我有[这个](http://427design.com/newsite/ourwork/image-test/)引导滑块，它似乎没有正确抓取视频链接。

这是我的代码：

```
 <?php $myCarousel = get_order_field('projectdetails_image'); // use the Custom Group name 
        if( !empty( $myCarousel )) {
                foreach($myCarousel as $carousel){
                $myimg = get('projectdetails_image',1,$carousel);
                    if ( !$myimg ) {
                    $videos = get_order_field('video_vimeo');
                    foreach($videos as $video){
                        if ( get('video_vimeo',TRUE) ) {
                                echo "<div class='item active black'><div id='video-wrap'>";
                                echo get('video_vimeo',1,$video);
                                echo "</div></div>";
                        }
                        else {}
                        }   
                    }
                    if ( $myimg ) {
                        echo "<div class='item".( $counter == 0 ? ' active' : '' )."'>";
                        echo '<img src="';
                        echo $myimg;
                        echo '"/>';
                        echo "</div>";
                        $counter++;

                        $videos = get_order_field('video_vimeo');
                        foreach($videos as $video){
                            if ( get('video_vimeo',TRUE) ) {
                                echo "<div class='item black'><div id='video-wrap'>";
                                echo get('video_vimeo',1,$video);
                                echo "</div></div>";
                            }
                        }
                    }
                }
            }
            ?> 
```

底部的 if 语句给我带来了问题：

```
if ( $myimg ) {
                    echo "<div class='item".( $counter == 0 ? ' active' : '' )."'>";
                    echo '<img src="';
                    echo $myimg;
                    echo '"/>';
                    echo "</div>";
                    $counter++;

                    $videos = get_order_field('video_vimeo');
                    foreach($videos as $video){
                        if ( get('video_vimeo',TRUE) ) {
                            echo "<div class='item black'><div id='video-wrap'>";
                            echo get('video_vimeo',1,$video);
                            echo "</div></div>";
                        }
                    }
                } 
```

出于某种原因，它`<div class='item black'>`每次都输出一个，`<div class='item'>` 而我希望它只在输出`<div class='item black'>`所有`<div class='item'>`' 之后才输出。

我希望这是有道理的。如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:35:16.733

将`for`循环移到外`for`循环之外，这会导致它在每次迭代时都执行。

# c# - wpf中的InvokeRequired

> ID：15504826
> 
> 赞同：34
> 
> 时间：2013-03-19T16:17:35.850
> 
> 标签：c#, wpf, winforms, invokerequired

我在一个应用程序中使用了这个函数`Windows forms`：

```
delegate void ParametrizedMethodInvoker5(int arg);

private void log_left_accs(int arg)
{
    if (InvokeRequired) 
    {
        Invoke(new ParametrizedMethodInvoker5(log_left_accs), arg);
        return;
    }

    label2.Text = arg.ToString();
} 
```

但在`WPF`它不起作用。为什么？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-19T16:21:13.657

在 WPF 中，该`Invoke`方法在调度程序上，因此您需要调用`Dispatcher.Invoke`而不是`Invoke`. 此外，没有`InvokeRequired`属性，但调度程序有一个`CheckAccess`方法（出于某种原因，它隐藏在智能感知中）。所以你的代码应该是：

```
delegate void ParametrizedMethodInvoker5(int arg);
void log_left_accs(int arg)
{
    if (!Dispatcher.CheckAccess()) // CheckAccess returns true if you're on the dispatcher thread
    {
        Dispatcher.Invoke(new ParametrizedMethodInvoker5(log_left_accs), arg);
        return;
    }
    label2.Text= arg.ToString();
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-19T16:19:50.123

在 WPF 中使用`CheckAccess`方法而不是`InvokeRequired`

```
if (!CheckAccess()) { 
  // On a different thread
  Dispatcher.Invoke(() => log_left_accs(arg));
  return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:19:23.563

check [Dispatcher.CheckAccess()](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.checkaccess.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T16:19:15.130

WPF 使用`Dispatcher`来控制对消息泵的访问，而不是让每个控件负责访问 UI 线程。

您应该使用`Dispatcher.Invoke`将委托添加到 WPF 应用程序中的 UI 线程。

It's also worth noting that `InvokeRequired` is not really needed in a winform app, nor is it something that you should be checking for in a WPF application. You should *know* that you're not in the UI thread when you call `Invoke`. You shouldn't ever be in a situation where a given method is sometimes called from the UI thread and sometimes called from a background thread. Choose one; either always force the caller to invoke to the UI thread before calling a given method (so you don't need to invoke) or assume that the caller won't be in the UI thread when the method is called. It's also worth noting that calling `Invoke` when you're already in the UI thread is just fine. There are no errors or problems that will result from an occasional instance of re-invoking the UI thread (there's a very minor performance cost, so just don't add unneeded code for it all over the place).

# sql - 从触发器插入没有发生？

> ID：15504827
> 
> 赞同：2
> 
> 时间：2013-03-19T16:17:38.177
> 
> 标签：sql, postgresql, triggers, plpgsql

我是 PostgreSQL 触发器的新手。
在这个例子中我有 3 个表`table1`，`table2`并且`table3`。

*   触发器在 上触发新记录`table1`。
*   触发器函数循环遍历与来自 的新记录`table2`相同的所有记录。`product_id``table1`
*   `table3`它从前 2 个表中插入一些混合值。
*   之后，将相同的`INSERT`查询插入到测试表中以进行测试。

问题是`INSERT`on`table3`没有发生。测试表很好，记录的`INSERT`插入查询可以毫无问题地执行，所以我不知道为什么它没有在触发器/函数中执行。

```
创建或替换函数 my_trigger() 将触发器返回为 $my_trigger$
声明 r 记录；
开始
  FOR r IN SELECT t2.id_t2, t2.name_1, t2.name_2, t2.name_3 FROM table2 t2 WHERE t2.product_id=NEW.product_id
  环形
    EXECUTE 'INSERT INTO table3 (id_t3, id_t1, name_1, name_2, name_3, bool_t2) VALUES (' || r.id_t2 || ',' || NEW.id_t1 || ', ''' || r.name_1 || ''',''' || r.name_2 || ''',''' || r.name_3 || ''', TRUE);';
    INSERT INTO test (field1, field2) VALUES(r.id_t2, 'INSERT INTO table3 (id_t3, id_t1, name_1, name_2, name_3, bool_t2) VALUES (' || r.id_t2 || ',' || NEW.id_t1 | | ', ''' || r.name_1 || ''',''' || r.name_2 || ''',''' || r.name_3 || ''', TRUE);') ;
  结束循环；
返回新的；
结尾;
$my_trigger$ 语言 plpgsql;

```

编辑：正如@Rachcha 所问，触发器本身是这样定义的：

```
CREATE TRIGGER my_trigger
  AFTER INSERT
  ON table1
  FOR EACH ROW
  EXECUTE PROCEDURE my_trigger(); 
```

编辑 2：我也尝试过不插入`EXECUTE`，但结果是一样的：没有错误，但没有插入`table3`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:47:19.460

### 更简单的功能

*   `RETURN NEW`在`AFTER`触发器中没有任何意义。我`RETURN NULL`改用。在这里引用[手册](http://www.postgresql.org/docs/current/interactive/trigger-definition.html)：

    > 操作后触发的行级触发器将忽略返回值，因此它们可以返回 NULL。

*   使用`LOOP`. 请改用简单的 SQL 语句。

*   使用动态 SQL ( `EXECUTE`) 毫无意义。

```
CREATE OR REPLACE FUNCTION my_trigger()
  RETURNS TRIGGER AS
$my_trigger$
BEGIN

INSERT INTO table3 (id_t3, id_t1, name_1, name_2, name_3, bool_t2)
SELECT t2.id_t2, NEW.id_t1, t2.name_1, t2.name_2, t2.name_3, TRUE
FROM   table2 t2
WHERE  t2.product_id = NEW.product_id;

INSERT INTO test (field1, field2)
SELECT t2.id_t2, '??un_known??'
FROM   table2 t2
WHERE  t2.product_id = NEW.product_id;

RETURN NULL;

END
$my_trigger$ LANGUAGE plpgsql; 
```

这应该工作！[**-> SQLfiddle 演示**](http://www.sqlfiddle.com/#!12/e7646/1)。

### 调试

如果它不起作用，则问题不在您的问题中。您是否在或 table上定义了*任何*其他触发器或规则？`table1``test`

要调试，请将此行添加到您的触发函数中，以查看您是否到达那里以及其中的值是什么`NEW`

```
RAISE EXCEPTION 'Values in NEW: %', NEW::text; 
```

# apache - 在 Nutch 2.x 中提取 HTML 元标记并让 Solr 4 对其进行索引

> ID：15504828
> 
> 赞同：1
> 
> 时间：2013-03-19T16:17:45.963
> 
> 标签：apache, solr, nutch

我正在使用 Nutch 2.0 抓取一些网站，但我没有看到 HTML 元标记，如标题、描述被提取并存储在 MySQL 数据库中。知道我怎样才能让它工作吗？

谢谢阿拉什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:48:24.360

确保在您的定义中包含`parse-metatags`和`index-metadata`插件`plugin.includes``nutch-site.xml`

然后添加`metatags.names` `index.parse.md`和`index.content.md`属性并将它们指向适当的标签。看看我的：

```
<property>
        <name>plugin.includes</name>
        <value>protocol-http|protocol-httpclient|urlfilter-regex|parse-(html|tika|metatags)|index-(basic|anchor|metadata)|scoring-opic|urlnormalizer-(pass|regex|basic)</value>
</property>
<property>
        <name>metatags.names</name>
        <value>*</value>
</property>
<property>
        <name>index.parse.md</name>
        <value>metatag.description,metatag.author,metatag.twitter:image</value>
</property>
<property>
        <name>index.content.md</name>
        <value>author,description,twitter:image</value>
</property> 
```

测试您的配置。我针对 readwrite.com 上的一篇文章进行了这个测试：

```
bin/nutch indexchecker http://readwrite.com/2013/03/20/whats-behind-china-attacks-on-apple-and-android 
```

输出将告诉您是否正在解析正确的值。就我而言，我想要`author`，`description`并且`twitter:image`：

```
fetching: http://readwrite.com/2013/03/20/whats-behind-china-attacks-on-apple-and-android
parsing: http://readwrite.com/2013/03/20/whats-behind-china-attacks-on-apple-and-android
contentType: text/html
content :   What's Really Behind China's Attacks On Apple And Android? – ReadWrite Sections Sections Social Mobi
title : What's Really Behind China's Attacks On Apple And Android? – ReadWrite
host :  readwrite.com
metatag.author :    Brian S Hall
tstamp :    Wed Mar 20 13:33:38 EDT 2013
metatag.twitter:image : http://readwrite.com/files/styles/150_150sc/public/fields/China%20graphic%20brian%20final.jpg
metatag.description :   Repeated outbursts suggest China could be growing concerned over America's dominance in the smartpho
url :   http://readwrite.com/2013/03/20/whats-behind-china-attacks-on-apple-and-android 
```

缺点是`parse-metatags`只会按名称而不是属性匹配标签。例如`<meta name="foo" content="bar">`很好，而像这样的 Open Graph 标签`<meta property="og:image" content="http://readwrite.com/sample.jpg" />`会丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:38:28.457

查看 Nutch 的[IndexMetaTags](http://wiki.apache.org/nutch/IndexMetatags)插件，从 1.5 版开始可用。

这将允许您指定要解析和索引的元标记。

注意：字段名称必须以“元标记”为前缀。

您可以使用[Nutch indexchecker检查索引](http://wiki.apache.org/nutch/bin/nutch%20indexchecker)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:11:37.357

Index-Metatags 插件不包含在 2.x 系列中。请查看[http://wiki.apache.org/nutch/Nutch2Plugins](http://wiki.apache.org/nutch/Nutch2Plugins)了解更多信息。那里有一个补丁可以使插件适用于 2.x 系列。

正如上述作者在评论中指出的那样，1.6 是目前 Nutch 的稳定版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T23:04:33.697

查看有关 Nutch 2.x 的[最新补丁](https://issues.apache.org/jira/browse/NUTCH-1478)
虽然我可以将元数据存储在数据库中，但我不知道如何将其传输到 Solr。

# java - Eclipse 中断言的奇怪行为

> ID：15504834
> 
> 赞同：0
> 
> 时间：2013-03-19T16:18:07.350
> 
> 标签：java, eclipse, behavior, assertions

我在 Java (Eclipse) 中发现了一种奇怪的断言行为。简单的例子：如果我执行这个......

```
public static void main (String[] args) {
    assert(getA() == "a") : "Invalid";
    System.out.println("Assertion successful!");
}

private static String getA() 
{
    return "a";
} 
```

...它会告诉我“断言成功！” 正如它应该。但是，如果我尝试这个...

```
public static void main (String[] args) {
    assert(getA() + "b" == "ab") : "Invalid";
    System.out.println("Assertion successful!");
}

private static String getA() 
{
    return "a";
} 
```

...我得到一个 AssertionError。为什么这个断言不返回真？

**笔记：**

*   测试时不要忘记在VM参数中添加“-ea”参数！（[Eclipse：启用断言](https://stackoverflow.com/questions/5509082/eclipse-enable-assertions)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T16:19:01.027

你需要给

```
"a".equals(getA()); 
```

第二种情况

```
"ab".equals("b".concat(getA())); 
```

**原因：-** `==`用于比较对象引用，而`equals()`用于字符串值比较，这是您需要的。另外，第一个场景具有相同的字符串文字“a”，因此它返回`true`. 但在第二种情况下，创建了一个新的 String 实例 for `getA()+b`，这与文字“ab”不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T16:19:53.923

`"a"`是编译时的文字，然后`"a"=="a"`计算为`true`

`getA()+"b"`创建一个新的 String 实例，它与编译时文字不同`"ab"`

# websphere - 在 WebSphere Liberty Profile 上运行 .jacl 脚本

> ID：15504836
> 
> 赞同：0
> 
> 时间：2013-03-19T16:18:10.513
> 
> 标签：websphere, wsadmin, websphere-liberty

如何针对 WebService Liberty Profile 服务器运行 .jacl 脚本？

我被告知要运行：

```
wsadmin.sh -conntype none -f setupWAS.jacl 
```

但我不认为 wsadmin 在 Liberty Profile 中可用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T20:04:38.503

您无法使用 wsadmin 管理 Liberty 概要文件。报价[信息中心](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=/com.ibm.websphere.nd.doc/ae/txml_scriptingep.html)；

> 限制：wsadmin 工具不适用于 Liberty 概要文件。请参阅[从命令提示符管理 Liberty 配置文件](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=/com.ibm.websphere.wlp.nd.doc/ae/twlp_admin_script.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T09:49:22.893

Liberty 配置文件仅支持通过编辑 XML 配置文件（至少 server.xml，如果您使用 include 可能还有其他文件）进行配置（或重新配置）。

我推荐以下来自 WASDev 的示例和示例： [https ://www.ibmdw.net/wasdev/docs/category/coding/](https://www.ibmdw.net/wasdev/docs/category/coding/)

# c - C - printf("%s") 显示符号

> ID：15504839
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:18:23.643
> 
> 标签：c, printf

我需要你的帮助，因为当我打印 atual->chave 的值时，它们会返回符号。这是代码：

```
void mostrar(struct tLdde *l, int modo)
{
    struct tItem *atual;
    char *chave;

    if(modo == CABECA)
    {
        atual = l->inicio;
        while(atual != NULL)
        {
            chave = atual->chave;
            printf("%s ", &chave);
            atual = atual->proximo;
        }
    }
    else
    {
        atual = l->final;
        while(atual != NULL)
        {
            chave = atual->chave;
            printf("%s ", &chave);
            atual = atual->anterior;
        }
    }
    printf("\n");

} 
```

这是输出：

**Spea { Obam { iPhoP { Pott8 {**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:19:37.337

利用

```
printf("%s ", chave); 
```

并不是

```
printf("%s ", &chave); 
```

去除 ＆

# gwt - 将多个小部件添加到 1 个单元格中？

> ID：15504843
> 
> 赞同：1
> 
> 时间：2013-03-19T16:18:29.293
> 
> 标签：gwt, flextable

使用 FlexTable 或 Grid，我想将多个 FlowPanel 添加到 1 个单元格中。我知道这可以通过将多个 FlowPanel 添加到 1 个（父）FlowPanel 并将父面板添加到单元格中来实现。

只是想知道是否有办法将这些多个小部件添加到一个单元格中，而不将它们包装到（父）流面板中？

（如下例所示，我不希望父 div 而是希望子 div 直接出现在标签下方。）

```
<TABLE>
    <TR>
        <td>
            <div id="I-DO-NOT-WANT-THIS-PARENT-DIV">
                <div id="CHILD1"></div>
                <div id="CHILD2"></div>
                <div id="CHILD3"></div>
                <div id="CHILD4"></div>
            </div>
        </td>
    </TR>   
</TABLE> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:20:45.807

您可以操纵 dom 并将元素移动到它们的祖父母。使用 gwtquery 很容易：

```
import static com.google.gwt.query.client.GQuery.*;
...
final FlowPanel panel = new FlowPanel();
panel.add(new Label("1"));
panel.add(new Label("2"));
panel.add(new Label("3"));

final FlexTable table = new FlexTable();
table.setWidget(0, 0, panel);
RootPanel.get().add(table);

$(panel).children().appendTo($(panel).parent()); 
```

如果您愿意，使用 gquery 您甚至可以`<td>`将表提升为 a`Panel`并继续向其中添加小部件：

```
HTMLPanel newpanel = $(panel).parent().as(Widgets).panel().widget();
panel.removeFromParent();
newpanel.add(new Label("4")); 
```

# python - 在 Python 的 for 循环中使用 dict.get() 方法时如何传递变量

> ID：15504845
> 
> 赞同：2
> 
> 时间：2013-03-19T16:18:32.693
> 
> 标签：python, for-loop, dictionary

我是 Python 新手，我正在做一项小任务。`dict.get()`在 Python中传递方法中的变量时遇到问题。

这是我正在使用的代码示例：

```
inputFile = open("Result_table_file.txt")

outputFile = open("Result.txt","w")

file =  open("matadata.txt")

from collections import defaultdict
d =  defaultdict(dict)

for line in file:
    name,values = line.split(':',1)
    d[name] = values

for record in inputFile:
    recordSplit = record.split(",")
    filename = recordSplit[3]
    metadataValue = d.get(filename)
    print "FileName :" + filename
    print metadataValue
    print "Record : " + record 
```

输出是：

```
FileName : Image01.tif
Metadata : None
Record : 100,134423.0,13911111,Image01 
```

这段代码工作正常。唯一的问题是当我将`filename`变量传递给`metadataValue = d.get(filename)`方法时，它给我的结果为`None`.

任何人都可以建议我可能是什么问题以及我该如何解决它。

当我手动创建文件名变量而不是从文件中获取值时，我还发现了另一件事。它工作正常。

例如 ：

文件名 = "Image01" d.get(文件名)

我得到了正确的输出，而如果我在读取文件时获得了价值，这件事就不起作用了。

例如

对于 inputFile 中的记录：recordSplit = record.split(",") filename = recordSplit[3] metadataValue = d.get(filename) print "FileName :" + filename print metadataValue print "Record :" + record

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:23:47.427

如果`d[filename]`不存在，则`get`返回`None`。

`d[filename]`如果不存在，则添加第二个参数以默认返回：

```
In [2]: d = {'a':1, 'b':2}

In [7]: print d.get('a')
1

In [8]: print d.get('c')
None

In [9]: print d.get('c', 77)
77 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:23:48.983

我在这里看到了一些不一致的地方。

怎么可能`record`等于`100,134423.0,13911111,Image01`，而`filename`由 计算的`record.split(",")[3]`等于`Image01.tif`？

如果`filename`真的等于`Image01.tif`并且`d`包含键的条目`Image01`，而不是`Image01.tif`，那么你会得到`None`。

正如有人建议的那样，您应该在计算之前打印`d`and以查看发生了什么。`filename``metadataValue`

**编辑**：

好的，文件中的行包括（至少在我的计算机上）一个尾随`\n`字符，打印时可能不可见。尝试`filename.strip()`在接听电话之前做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:36:58.137

当我们使用不存在的键调用 dict 上的 get 方法时，该方法将返回 None。在您的情况下，这意味着 d 没有名为 filename 的键。我想问题是你应该替换为 . 您打开一个不存在的文件并从中读取，然后将您读取的内容放入 d.So d 是 juse None.So d 没有键名文件名。

# jekyll - 如何在 Jekyll 中配置 Pygments 的 HTML 格式化程序

> ID：15504847
> 
> 赞同：2
> 
> 时间：2013-03-19T16:18:37.920
> 
> 标签：jekyll, pygments

我想将 Jekyll 用于 Github 页面，但我在使用 pygments 时遇到了一些困难。Jekyll 似乎不允许我配置任何与 pygments 相关的内容。

我想要（需要）改变两件事：

1.  使用*linenos=table*可以轻松复制代码。`{% highlight c linenos=table %}`不起作用。此外，全局定义 this 会更方便，而不是在每个`{% highlight ...`

2.  当我使用`{% highlight c %}`（注意**C**词法分析器）时，pygments 会生成类似：`<div class="highlight"><code class="c">...</code></div>`. 因此，在突出显示的源代码中，类**c**与用于s的类**c**`<code>`冲突。如何告诉 pygments 使用*classprefix*？**`<span>`**

 ***两者都是此处记录的选项：http: [//pygments.org/docs/formatters](http://pygments.org/docs/formatters)。***

# visual-studio-2010 - 在一个 VS2010 项目中损坏了 Intellisense

> ID：15504851
> 
> 赞同：1
> 
> 时间：2013-03-19T16:18:48.720
> 
> 标签：visual-studio-2010, visual-studio, intellisense

我有一个包含多个项目的解决方案，**除了一个项目外，所有项目都加载了完整的智能感知**。剩下的一个项目是一个 C# 类库，并且确实有一些智能感知，所以我仍然得到简单的语法和结构，但没有什么像 ObservableCollection、Go to Definition、列表成员或参数信息这样有用。我什至无法对当前类中的属性进行智能感知。

是否有某个错误导致智能感知无法工作的日志在这种情况下对我有帮助？

以下是我尝试过但对我不起作用的事情的列表：

*   重新启动我的机器
*   devenv /resetuserdata
*   工具 -> 选项，文本编辑器 -> 所有语言 -> 自动列表成员被选中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:29:51.063

我放弃了该项目并开始了一个新的项目文件，该文件有效。我唯一能想到的是项目文件已损坏。在查看旧文件和新文件之间的差异时，看起来包含许多文件的结构发生了变化，可能是 VS2008 和 VS2010 之间的差异。

# mysql - mysql提取具有最大值的行

> ID：15504852
> 
> 赞同：1
> 
> 时间：2013-03-19T16:18:55.127
> 
> 标签：mysql, distinct, max

我试图找出从数据库中获取所需行的最佳方法。

数据库表：

```
id user cat time
1   5    1   123
2   5    1   150
3   5    2   160
4   5    3   100 
```

我想`DISTINCT cat ... WHERE user=5`带着`MAX time`价值。我应该如何以有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:19:58.827

您将希望将聚合函数与 a 一起使用`GROUP BY`：

```
select user, cat, max(time) as Time
from yourtable
group by user, cat 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f1d1a/1)

如果要包含该`id`列，则可以使用子查询：

```
select t1.id,
  t1.user,
  t1.cat,
  t1.time
from yourtable t1
inner join
(
  select max(time) Time, user, cat
  from yourtable
  group by user, cat
) t2
  on t1.time = t2.time
  and t1.user = t2.user
  and t1.cat = t2.cat 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/f1d1a/5)。我使用子查询来确保`id`每行返回的值是`max(time)`正确的 id。

# delphi - 为什么无法使用 Delphi XE3 注册 64 位 COM DLL

> ID：15504853
> 
> 赞同：1
> 
> 时间：2013-03-19T16:18:57.063
> 
> 标签：delphi, dll, 64-bit

我有一个 COM 对象，最初是在 32 位的 Delphi 2007 下编译的。现在我已经使用 64 位编译器移植到 Delphi XE3。它使用新的 64 位 DLL 成功编译，但我无法注册它。

我正在使用管理员注册 DLL，它适用于 32 位 DLL，但不适用于 64 位。

它一直说“对内存位置的访问无效”

这里有什么提示吗？

PS：我使用的命令很简单`%systemroot%\System32\regsvr32.exe test.dll`。

在 Windows 7 64 位中注册时，它显示“对内存位置的访问无效”；在 Windows 8 64 位中注册时，它显示“动态链接库初始化例程失败”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:41:54.663

是的，我找到了原因。在其中一个单元的初始化部分，它仍然使用第三方的 32 位浮点运算。删除代码后，它成功注册了 DLL。

在 win7 上，错误消息令人困惑，但在 win8 上，它显示“'动态链接库初始化例程失败'，这给出了更清楚的原因。

# ubuntu - (kill-emacs) 不工作

> ID：15504854
> 
> 赞同：0
> 
> 时间：2013-03-19T16:18:57.423
> 
> 标签：ubuntu, emacs24

我看过关于如何在杀死客户端后杀死 emacs 守护进程的讨论。如果您将 emacs 作为守护程序运行，杀死它的客户端不会也杀死守护程序：守护程序只是坐在那里仍在运行。我见过的所有/大多数解决方案都涉及（kill-emacs）。例如，我有这个别名：

```
alias killemacs='emacsclient -e "(kill-emacs)"' 
```

. . . 我很确定它曾经有效。但现在它没有任何效果。现在我不得不求助于 kill -9 。关于每个命令行杀死 emacs 守护进程的*最终*方法有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:55:40.837

也许是：

```
kill -9 `ps aux | grep emacs | grep -v grep | awk '{print $2}'` 
```

# php - “php include”生成器xml中的奇怪字符“'╗┐'╗┐”

> ID：15504855
> 
> 赞同：0
> 
> 时间：2013-03-19T16:18:59.373
> 
> 标签：php, xml, output

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:22:27.280

That is a [byte order mark](http://en.wikipedia.org/wiki/Byte_order_mark) (Unicode character U+FEFF) but it being displayed in an incorrect encoding. Since your document claims to be encoded as ISO-8859-1 there should not be a byte order mark.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:22:32.393

The odd stuff at the beginning could be a byte-order mark, but I'm not sure.
A byte-order mark is a byte sequence inserted at the beginning of a file used to indicate the [endianness](http://en.wikipedia.org/wiki/Endianness) of it, or whether the most significant byte comes first.

From your output, there are other weird characters (not text) in the file, so it is possible that the program inserted them in.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:23:06.503

Probably your xml file is in UTF-8 format with BOM.

[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

Remove offending 8 bytes or save your xml without BOM using a text editor. If xml is dinamically generated, you have to modify the generation code.

Moreover, the BOM bytes seems encoded badly. Probably the xml was converted in a wrong way and BOM bytes were screwed up.

# javascript - javascript jquery错误无法解决

> ID：15504858
> 
> 赞同：-2
> 
> 时间：2013-03-19T16:19:04.257
> 
> 标签：javascript, jquery

我的 javascript 出现了一些错误，我不知道出了什么问题。我刚刚做了一个简单的 jQuery 语句来检查电子邮件字段是否有默认值，如果有，请清除该字段

这是我正在使用的代码的 jsFiddle 链接：http: [//jsfiddle.net/qLfBH/](http://jsfiddle.net/qLfBH/) 我不明白为什么 jslint 抱怨第 5 行“缺少分号”等。

```
$(document).ready(function () {
    var email_default = "Enter your email address...";

    $(':input').filter('[type="email"]').attr('val', email_default).focus({
    if ($(this).val() == email_default) ;{
        $(this).attr('val', ' ');
    }
    });
}); 
```

我也尝试过使用 firebug 进行调试，但 javascript 不会显示在脚本面板中 - 可能是因为一些语法错误。任何帮助将非常感激。

**更新**

我编辑了代码，但它仍然抱怨“缺少分号”（请参阅​​小提琴[http://jsfiddle.net/qLfBH/3/](http://jsfiddle.net/qLfBH/3/)的链接）

```
$(document).ready(function () {
var email_default = "Enter your email address...";

$(':input').filter('[type="email"]').attr('value', email_default).focus({
    if ($(this).val() == email_default) {
        $(this).attr('val', ' ');
    }

});
}); 
```

**固定的**

好的，谢谢大家的帮助。我忘记了焦点下的“功能”。我纠正了以下错误及其工作:)

```
$(document).ready(function () {
var email_default = "Enter your email address...";

$(':input').filter('[type="email"]').attr('value', email_default).focus(function () {
    if ($(this).val() == email_default) {
        $(this).attr('val', ' ');
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:20:29.733

删除 if 语句后的分号

从

```
if ($(this).val() == email_default) ;{ // <----SHOULDNT BE THERE
    $(this).attr('val', ' ');
} 
```

到

```
if ($(this).val() == email_default) {
    $(this).attr('val', ' ');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:23:53.620

几个问题。这是一个清理后的版本：

```
var email_default = "Enter your email address...";
$(':input[type="email"]').val(email_default).on('focus', function () {
    if ($(this).val() == email_default) {
        $(this).val(' ');
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/qLfBH/5/)**

注意，你也可以放弃 jQuery 并使用 HTML5 的 placeholder 属性：

```
<input type="email" placeholder="Enter your email address..."> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:20:59.593

查看更新：

```
$(document).ready(function () {
  var email_default = "Enter your email address...";

  $('input[type="email"]').val(email_default).focus(function () {  //<-- add function()
    if ($(this).val() == email_default) {   //<-- removed semicolon here
        $(this).val(' ');                   //<-- either .attr('value',' ') or .val(' ')
    }
  });
}); 
```

**[样本](http://jsfiddle.net/JA7Cj/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:33:59.237

用这个替换你的 JavaScript 代码

```
$(document).ready(function () {
  var email_default = "Enter your email address...";

  $('input').filter('[type=email]').val(email_default).focus(function() { 
        if ($(this).val() == email_default) {
            $(this).val('');
    }
    });
}); 
```

# c# - 按属性搜索对象列表并返回与该对象关联的其余属性

> ID：15504860
> 
> 赞同：1
> 
> 时间：2013-03-19T16:19:07.577
> 
> 标签：c#, list, search, object

我有一个对象列表（人），这些人具有某些属性，例如姓名、年龄、出生日期等。我将如何按姓名搜索某个人，然后返回属于的其余数据那人。

我只是想要一些关于要查找什么的提示，现在已经为此苦苦挣扎了几天，而生活却想不出该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:22:54.630

[Linq](http://msdn.microsoft.com/en-us/library/vstudio/bb397906.aspx)是最易读的恕我直言：

```
var alfreds = allPersons.Where(p => p.Name == "Alfred");

foreach(Person p in alfreds)
{
    Console.WriteLine("Next {0} Age:{1} DOB:{2}", p.Name, p.Age, p.DOB);
} 
```

如果您正在寻找一个人，或者您想取第一个“Alfred”（例如）：

```
Person p = allPersons.FirstOrDefault(p => p.Name == "Alfred");
if(p != null)
{
    Console.WriteLine("Next {0} Age:{1} DOB:{2}", p.Name, p.Age, p.DOB);
} 
```

# c# - 键盘输入返回键

> ID：15504863
> 
> 赞同：1
> 
> 时间：2013-03-19T16:19:11.483
> 
> 标签：c#, wpf, input, keyboard

我正在用 C# 编写一个计算器，我正在尝试向它添加键盘输入。问题是，如果我单击 GUI 上的一个按钮，那么 Enter/Return 键就会专注于该按钮。当按下返回键时，它会再次单击该键，而不是由我的 KeyDown 事件处理程序处理。我怎样才能解决这个问题？

```
private void Window_KeyDown(object sender, KeyEventArgs e)
    {
        switch (e.Key)
        {
            case Key.NumPad1:
            case Key.D1:
                addInput('1');
                break;
            case Key.Return:
                MessageBox.Show("Enter!");
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:24:48.527

您需要处理[`PreviewKeyDown`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewkeydown.aspx)表单的事件。然后检查是否要处理该事件，如果要处理，请将[`Handled`](http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.handled.aspx)事件的属性设置为`true`之后。

这可能看起来像这样：

```
public MainWindow()
{
    InitializeComponent();

    PreviewKeyDown += new KeyEventHandler(MainWindow_PreviewKeyDown);
}

void MainWindow_PreviewKeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Space)
    {
        Log("Intercepted space in preview");
        e.Handled = true;
    }
} 
```

* * *

为什么需要设置`Handled`为`true`？WPF 中的事件是在几个 UI 元素上触发的，其方式取决于它的“*路由策略*”。当您的事件处理程序设置`Handled`为`true`时，该事件的可见性将仅限于其他 UI 元素。很快，它不会在其他 UI 元素中触发。要了解有关上述解决方案的详细信息，请阅读下面的其余答案。

* * *

如果要在 WPF 中正确使用事件，则需要了解一些事项。事件附加到 UI 元素（文本框、按钮等），并且事件处理程序可以连接到这些 UI 元素。此外，UI 元素以树状结构组织。每个元素都有它的父元素，直到根 UI 元素。如前所述，事件在多个元素上触发，具体取决于它们的“*路由策略*”。这里的多个元素是指事件所针对的元素及其父元素，直到根元素。事件路由策略可以如下：

*   **冒泡**：首先为事件目标元素触发事件。然后，它被触发它的父元素，然后是它的父元素的父元素，依此类推，直到根元素（通常是窗口）
*   **Tunneling**：首先为根 UI 元素触发事件，然后沿着 UI 元素树向下，沿着到达目标元素的路线。
*   **Direct**：仅针对目标元素触发事件。

![在此处输入图像描述](../Images/756bb7f27ba80070d8f262194935c984.png)

这与`Handled`财产有什么关系？当事件使用冒泡或隧道路由策略时，`Handled`属性用于停止事件向下或向上传播 UI 元素树。

现在，当您将其标记为 时，为什么[`KeyDown`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.keydown%28v=vs.110%29.aspx)事件没有停止传播`Handled`？因为`KeyDown`事件使用冒泡策略。这意味着文本框在到达您设置`Handled`为`true`.

出于这个原因，您应该使用[`PreviewKeyDown`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewkeydown.aspx)which uses tunneling 策略。您的窗口处理程序检查事件，将其标记为`Handled`需要。如果它被标记为`Handled`它不会被触发向下 UI 树到事件目标。

您可以将其视为 .NET 框架中的约定。`PreviewX`是使用隧道策略的事件，并且是`X`使用`bubbling`策略的事件的对应物。

[要了解有关路由事件的更多信息，请访问此 MSDN 页面。](http://msdn.microsoft.com/en-us/library/ms742806.aspx#routing_strategies)您会发现 MSDN 是关于 WPF 的一个很好的信息来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:24:20.377

试试这个：

```
 private void Window_KeyDown(object sender, KeyEventArgs e)
    {
        switch (e.Key)
        {
            case Key.NumPad1:
            case Key.D1:
                addInput('1');
                MyTextBox.Focus(); // <-- NEW LINE OF CODE
                break;
            case Key.Return:
                MessageBox.Show("Enter!");
                MyTextBox.Focus(); // <-- NEW LINE OF CODE
                break;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:11:48.607

将 Focusable 设置为 false：

```
<Button Focusable="False" Click="Button_Click" /> 
```

# ajax - 来自json的Highcharts多个系列

> ID：15504867
> 
> 赞同：0
> 
> 时间：2013-03-19T16:19:18.003
> 
> 标签：ajax, json, highcharts, series

我的 JSON 看起来像：[[[773,1363709520],[774,1363709580]],[[1546,1363709520],[1548,1363709580]]]

我希望 highcharts 在每次到达新的 JSON 数组时创建一个新系列：[[1546,1363709520],[1548,1363709580]]

我有一个硬编码版本，但是让我的 data[[]] 没有帮助......

```
$(function () {

var data = [];
var data1 = [];
$.ajax({
    url: "http://localhost:8080/vdm-stats-core/stats/metrics?from=2&src=org.example.fib&customer=customer0&server=server0&metric=responses.count",
    dataType: "jsonp", // Notice! JSONP <-- P (lowercase)
    jsonp: "callback",
    success: function (inData) {
        console.log(inData[0][1][0]);
        var xval = new Date();
        for (a = 0; a < inData.length; a++) {
            for (i = 0; i < inData[a].length; i++) {
                var yval = inData[a][i][0];
                xval = inData[a][i][1];
                var x = [xval, yval];
                if (a == 0) {
                    data.push(x);
                }
                if (a > 0) {
                    data1.push(x);
                }
            }
        }
        var chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container'
            },
            title: {
                text: 'Test',
            },

            rangeSelector: {
                selected: 1
            },

            xAxis: {
                type: 'datetime'
            },

            series: [{
                name: 'Customer0',
                data: data
            }, {
                name: 'Customer1',
                data: data1
            }]
        });
    },
    error: function () {
        console.log(arguments);
    }
}); 
```

});

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:22:31.253

我试图理解你的代码，这是我的解释；

```
function success(inData) {

   var customerNr,
       timestamp,
       VALUE = 0,
       TIMESTAMP = 1,
       series = {},
       len = inData.length,
       yval,
       item;

        for (customerNr = 0; customerNr < len; customerNr++) {
            // Init series object literal for customer
            series[customerNr] = {
                name : 'Customer '+customerNr.toString(),
                data : []
            };
            // Setup data for customer
            for (item = 0; item < inData[customerNr].length; item++) {
                yval = inData[customerNr][item][VALUE];
                timestamp = inData[customerNr][item][TIMESTAMP];
                series[customerNr].data.push([timestamp,yval]);
            }
            // Add series, but redraw only on last customer
            chart.addSeries(series[customerNr],customerNr===len-1);

        } 
```

};

您为每个客户回收系列对象，但我添加了一个 customerNr 属性。Highchart 中的 addSeries 方法默认会重绘图表（[http://api.highcharts.com/highcharts#Chart.addSeries()](http://api.highcharts.com/highcharts#Chart.addSeries())）。我选择只重绘最后一位客户的图表。分叉的小提琴示例；[http://jsfiddle.net/hkskoglund/VVLNV/](http://jsfiddle.net/hkskoglund/VVLNV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:37:55.070

要记住的重要一点是，系列对象已经是一个 json 对象......所以，假设您控制 json 文件的创建，最简单的事情是将 json 输出格式化为整个系列对象：

```
[{ name: 'Customer0', data: [[773,1363709520],[774,1363709580]] }, { name: 'Customer1', data: [[1546,1363709520],[1548,1363709580]] }] 
```

进而：

```
series: myData 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:49:37.417

我让它工作：不得不重置我的系列数据。

```
$(function () {
        var chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container'
            },
            title: {
                text: 'Test',
            },

            rangeSelector: {
                selected: 1
            },
            xAxis: {
                type: 'datetime'
            },

            series: []
        });

$.ajax({
    url: "http://localhost:8080/vdm-stats-core/stats/metrics?from=200&src=org.example.fib&customer=customer0&server=server0&metric=responses.count",
    dataType: "jsonp", // Notice! JSONP <-- P (lowercase)
    jsonp: "callback",
    success: function (inData) {
        var xval = new Date();
        var series = {
            name: 'Customer',
            data: []
        }
        for (a = 0; a < inData.length; a++) {
            for (i = 0; i < inData[a].length; i++) {
                var yval = inData[a][i][0];
                xval = inData[a][i][1];
                var x = [xval, yval];
                 series.data.push(x);
            }
            chart.addSeries(series);
            series.data = [];
        }
    },
    error: function () {
        console.log(arguments);
    }
}); 
```

});

# c# - 在运行时更改 .Net 程序集名称

> ID：15504870
> 
> 赞同：0
> 
> 时间：2013-03-19T16:19:27.760
> 
> 标签：c#, reflection

我需要加载一个带有反射的程序集并重命名它。当然我不能只重命名文件：我还必须更改它的内部信息。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:21:28.390

这是不可能的。`Assembly`一旦加载到 CLR中，an 的名称是不可变的。您需要在加载之前重命名它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:22:57.807

您可以将程序集复制到新的动态程序集中，然后加载动态程序集：http: [//msdn.microsoft.com/en-us/library/8ffc3x75.aspx](http://msdn.microsoft.com/en-us/library/8ffc3x75.aspx)

但是，如果有另一种方法来完成您正在寻找的东西，我建议您探索该选项，在运行时创建程序集并不容易。

# c# - 除非再次单击，否则在文本框中全选。c# 困惑

> ID：15504881
> 
> 赞同：0
> 
> 时间：2013-03-19T16:20:07.190
> 
> 标签：c#, textbox, mousedown, selectall

我正在尝试在我的程序中制作它，如果您单击文本框，它将全部选中。然后，如果您再次单击它，它将全部取消选择。

我试过让它像这样..

```
 private void url_MouseDown(object sender, MouseEventArgs e)
    {
        url.ReadOnly = false;
        url.SelectAll();
        url.DeselectAll();

    } 
```

我知道 url.DeselectAll(); 在错误的位置。有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:39:23.673

您的代码总是选择然后再次取消选择，因此在鼠标按下后您的文本将始终被取消选择。

试试这个：

```
private void url_MouseDown(object sender, MouseEventArgs e)
{
    url.ReadOnly = false;
    if (url.SelectedText.Length < url.Text.Length) {
        url.SelectAll();
    } else {
        url.DeselectAll();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:22:52.680

您当前的代码首先调用

```
url.SelectAll(); 
```

然后立即调用

```
url.DeselectAll(); 
```

相反，请检查您尝试切换的项目的当前状态。我不清楚这个问题到底是什么，所以在伪代码中：

```
private bool isSelected = false;

private void url_MouseDown(object sender, MouseEventArgs e)
{
    url.ReadOnly = false;
    if (isSelected)
    {
        url.DeselectAll();
    } 
    else 
    {
        url.SelectAll();
    }
    isSelected = !isSelected;
} 
```

替换`IsDeselected`为检查当前状态是否被取消选择的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:37:27.527

单击文本框本身会清除选择，因此您必须执行以下操作；

```
 bool selected;
    private void url_MouseDown(object sender, MouseEventArgs e)
    {
        url.ReadOnly = false;
        if (!selected)
        {
            selected = true;
            url.SelectAll();
        }

        else
        {
            selected = false;
            url.DeselectAll();
        }
    } 
```

# arrays - 在简单的 NASM 操作中出现分段错误；将矩阵指针移动到 ecx 寄存器

> ID：15504882
> 
> 赞同：0
> 
> 时间：2013-03-19T16:20:07.330
> 
> 标签：arrays, assembly, nasm

我正在开发一个能够在数组中找到最大元素的程序。出于某种原因，当我尝试将矩阵上的第一个元素移动到 ecx 寄存器中以进行输出（只是测试它）时，我遇到了分段错误。

可以肯定的是，我已经尝试了所有不同类型的寻址模式，但我无法弄清楚为什么我会遇到这个错误并且没有任何工作。

这是我的代码：

```
segment .data

    NUM_ROWS: equ 5
    NUM_COLUMNS: equ 5
    NUM_ROW_BYTES: equ 10

    ;Default matrix
    matrix: dd  5, 4, 9, 7, 2, 1, 4, 6, 8, 7
            ;9, 9, 2, 3, 7
            ;6, 5, 8, 3, 4
            ;1, 2, 8, 2, 6  
    matrixLen: equ $-matrix

    sum:    db "The sum of the last column is: ", 10

    ;FOR TESTING
    works: db 'Works!', 10
    worksLen: equ $-works

segment .bss
    counter resb 1

segment .text
    global main

main:
    mov eax, 4      ; system call 4
    mov ebx, 1      ; standard output 
    mov ecx, [matrix + 4]   
    mov edx, 4
    int 0x80 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:15:42.083

我正在查看我发现[的这个 Linux 系统调用列表，](http://asm.sourceforge.net/syscall.html)似乎没有任何只打印一个字符的调用。您无法使用 sys_write()，但如果您将 EDX 设置为 1 并传递一个有效指针，它可以打印一个字符。

认识到`mov ecx, [matrix + 4]`仅将 (matrix+4) 指向的值移动到 ECX 中，以便 sys_write 将其用作地址。由于该地址包含 4，因此 sys_write 尝试打印从地址 0x00000004 开始找到的字符串数据。这就是它出现段错误的原因（不允许从那里读取）。

要将值 4 转换为适合打印的 ASCII 值，请将 0x30 添加到该值。ASCII 0x30 = '0'，0x31 = '1' ... **0x34 = '4'** ... 0x39 = '9'。

因此，打印*单个*数字的策略是将该数字加载到 ECX 中，添加 0x30，推入您在`.bss`段中保留的字节（也许`digit_to_ascii resb 1`），然后`digit_to_ascii`在调用 sys_write 之前将地址移动到 ECX 中（并且只设置 EDX为 1，因为您只想打印 1 个字节）。

了解这仅适用于打印 1 位数字。如果要打印 10 或更高的数字，则需要按除法拆分每个数字并单独打印（或将其单独写入保留缓冲区并使用一次 sys_write 调用打印整个缓冲区）。

# javascript - 测试 javascript 字符串以获取 PDF 的完整 URL

> ID：15504885
> 
> 赞同：0
> 
> 时间：2013-03-19T16:20:12.947
> 
> 标签：javascript, string, url, pdf

我有一个表单，我希望用户输入一个完整的 URL，该 URL 直接指向 PDF（不是包含 pdf 的页面）。

目前我正在测试（并在必要时添加）http/https链接：

```
var str = textfield.value;

//test for http/https and add it if not there
var httpsInc = str.indexOf('https://') !== -1;
var httpInc = str.indexOf('http://') !== -1;
if ((httpsInc == false) & (httpInc == false)) {
    textfield.value = "http://" + str;
    var str = textfield.value;
} 
```

然后测试它是否是一个有效的 URL（基于此处的另一篇文章）：

```
var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
    '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
    '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
    '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
    '(\\#[-a-z\\d_]*)?$','i'); // fragment locator

if(!pattern.test(str)) {
    alert("Please enter a valid URL.");
    testresults=1;
} else {
    testresults=0;
}
return (testresults); 
```

然后我打算添加 .pdf *[类似于 str.indexOf('.pdf') !== -1]*的测试，但我认为必须有更好的方法来做到这一点。我假设上面的 RegExp 可能会为我完成所有这些测试（测试 .pdf 是否在末尾等），但我不确定如何修改它。修改它还是只检查我的字符串的最后 4 个字符是“.pdf”更好吗？

# javascript - 从内部函数返回主函数

> ID：15504886
> 
> 赞同：0
> 
> 时间：2013-03-19T16:20:13.347
> 
> 标签：javascript, jquery, function, callback

这是我的函数接收一些数据并且必须将其返回或将其传递给其他函数，如何从基于内部的函数返回数据？简单的问题，但我从来没有使用过这样的东西

```
getData: function(callback){

    $.ajax({
        url: myUrl
    }).done(function(data){
        $(document).ready(function(){ 
            (callback) ? callback(data) : return data
        });
    }); 
} 
```

# linux-device-driver - 低延迟模式与 Linux 串行端口一起使用是否安全？

> ID：15504890
> 
> 赞同：5
> 
> 时间：2013-03-19T16:20:23.043
> 
> 标签：linux-device-driver, tty, powerpc

在 Linux 串口上使用 low_latency tty 模式是否安全？tty_flip_buffer_push函数被记录为“如果设置了 port-> [low_latency](https://github.com/torvalds/linux/blob/master/drivers/tty/tty_buffer.c#L512)，则不能从 IRQ 上下文中调用它”。然而，无论标志是否设置，许多低级串行端口驱动程序都从 ISR 调用它。例如，[mpc52xx 驱动程序](https://github.com/torvalds/linux/blob/master/drivers/tty/serial/mpc52xx_uart.c#L1002)在每次从其 FIFO 读取后无条件地调用翻转缓冲区。

ISR 中低延迟翻转缓冲区的结果是线路规则驱动程序进入 IRQ 上下文中。我的目标是获得一毫秒或更短的延迟，从高速 mpc52xx 串行端口读取。设置 low_latency 可以实现延迟目标，但它也违反了 tty_flip_buffer_push 记录的先决条件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-19T20:07:37.193

这个问题是在[2011 年 8 月 19 日星期五在 linux-serial 上](http://thread.gmane.org/gmane.linux.serial/5797/focus=5803)提出的。

不，低延迟通常是不安全的。

但是，在 3.10.5 的特定情况下`low_latency`是安全的。

上面的评论`tty_flip_buffer_push`写道：

> “如果设置了 port->low_latency，则不得从 IRQ 上下文调用此函数。”

但是，代码（3.10.5，drivers/tty/tty_buffer.c）与此相矛盾：

```
void tty_flip_buffer_push(struct tty_port *port)
{
    struct tty_bufhead *buf = &port->buf;
    unsigned long flags;

    spin_lock_irqsave(&buf->lock, flags);
    if (buf->tail != NULL)
            buf->tail->commit = buf->tail->used;
    spin_unlock_irqrestore(&buf->lock, flags);

    if (port->low_latency)
            flush_to_ldisc(&buf->work);
    else
            schedule_work(&buf->work);
}
EXPORT_SYMBOL(tty_flip_buffer_push); 
```

`spin_lock_irqsave`/的使用`spin_unlock_irqrestore`使这段代码可以安全地从中断上下文中调用。

有一个测试`low_latency`，如果设置了，`flush_to_ldisc`则直接调用。这会立即将翻转缓冲区刷新到行规程，但代价是使中断处理时间更长。该`flush_to_ldisc`例程也被编码为在中断上下文中使用是安全的。我猜早期版本是不安全的。

如果`low_latency`未设置，则*调用*`schedule_work`。调用`schedule_work`是在中断上下文中从“上半部分”调用“下半部分”处理程序的经典方法。这会导致`flush_to_ldisc`在下一个时钟滴答时从“下半部分”处理程序中调用。

再深入一点，评论和测试似乎都在 Alan Cox 的原始`e0495736`提交中`tty_buffer.c`。这次提交是对早期代码的重写，所以似乎有一次没有测试。添加测试并修复`flush_to_ldisc`中断安全的人都没有费心修复评论。

所以，永远相信代码，而不是评论。

*但是*，在 3.12-rc*（截至 2013 年 10 月 23 日）中的相同代码中，当 flush_to_ldisc 中的 spin_lock_irqsave 被删除并添加 mutex_locks 时，问题似乎再次被打开。也就是说，在 serial_struct 标志中设置 UPF_LOW_LATENCY 并调用 TIOCSERIAL ioctl 将再次导致“原子调度”。

维护者的最新更新是：

```
On 10/19/2013 07:16 PM, Jonathan Ben Avraham wrote:
> Hi Peter,
> "tty_flip_buffer_push" is called from IRQ handlers in most drivers/tty/serial UART drivers.
> 
> "tty_flip_buffer_push" calls "flush_to_ldisc" if low_latency is set.
> "flush_to_ldisc" calls "mutex_lock" in 3.12-rc5, which cannot be used in interrupt context.
> 
> Does this mean that setting "low_latency" cannot be used safely in 3.12-rc5?

Yes, I broke low_latency.

Part of the problem is that the 3.11- use of low_latency was unsafe; too many shared
data areas were simply accessed without appropriate safeguards.

I'm working on fixing it but probably won't make it for 3.12 final.

Regards,
Peter Hurley 
```

`low_latency`因此，除非您确定永远不会从支持它的版本更改内核，否则您似乎不应该依赖它。

* * *

**更新：2014 年 2 月 18 日，内核 3.13.2**

斯坦尼斯瓦夫·格鲁斯卡写道：

```
Hi,

setserial has low_latency option which should minimize receive latency
(scheduler delay). AFAICT it is used if someone talk to external device
via RS-485/RS-232 and need to have quick requests and responses . On
kernel this feature was implemented by direct tty processing from
interrupt context:

void tty_flip_buffer_push(struct tty_port *port)
{
    struct tty_bufhead *buf = &port->buf;

    buf->tail->commit = buf->tail->used;

    if (port->low_latency)
            flush_to_ldisc(&buf->work);
    else
            schedule_work(&buf->work);
} 

But after 3.12 tty locking changes, calling flush_to_ldisc() from
interrupt context is a bug (we got scheduling while atomic bug report
here: https://bugzilla.redhat.com/show_bug.cgi?id=1065087 )

I'm not sure how this should be solved. After Peter get rid all of those
race condition in tty layer, we probably don't want go back to use
spin_lock's there. Maybe we can create WQ_HIGHPRI workqueue and schedule
flush_to_ldisc() work there. Or perhaps users that need to low latency,
should switch to thread irq and prioritize serial irq to meat
retirements. Anyway setserial low_latency is now broken and all who use
this feature in the past can not do this any longer on 3.12+ kernels.

Thoughts ?

Stanislaw 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T22:19:19.343

已将补丁发布到 LKML 以解决该问题。它删除了处理 low_latency 的通用代码，但保留了低级驱动程序使用的参数。

[http://www.kernelhub.org/?p=2&msg=419071](http://www.kernelhub.org/?p=2&msg=419071)

我尝试使用串行控制台在 Linux 3.12 上强制 low_latency。内核非常不稳定。如果启用了抢占，它会在使用几分钟后挂起。

所以现在的答案是远离。

# java - 为什么要在 Java 中使用嵌套的 InvokeLater 调用？

> ID：15504893
> 
> 赞同：3
> 
> 时间：2013-03-19T16:20:28.907
> 
> 标签：java, multithreading

我正在重构一些运行多阶段过程的代码。每个步骤都在嵌套的`java.awt.EventQueue.invokeLAter`.... 调用中。它看起来有点像这样：

```
 import java.awt.EventQueue;

public class NestedInvokeLater {

    /**
     * @param args
     */
    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                changeTabPanel();
                copySomeFiles();
                enableNextButton1();
                upDateProgressBar(10);
                java.awt.EventQueue.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        readInFiles();
                        doSomethingToFiles();
                        upDateProgressBar(15);
                        java.awt.EventQueue.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                doSomethingElse();
                                upDateProgressBar(100);

                            }
                        });
                    }
                });

            }

        });

    };
} 
```

我在 Java 方面还不够新，所以我不明白*嵌套*这些调用以向 EDT 添加“作业”的意义，而且我也不是 100% 有信心摆弄这些调用。我想我了解*invokeLater*调用的作用以及每个步骤的作用。如果这种理解是错误的，请纠正我：

*invokeLater*用于将一些*调用*添加到要在 Event Dispatch 线程中完成的作业列表中。Java 然后处理每次调用何时/如何完成，确保 EDT 和 GUI 在“后台”执行作业时不会锁定。

嵌套这些调用告诉我，我们应该排队一组作业，其中一个是排队一些东西，这将排队一些作业......其中一个是排队一些东西。但是只有在前一个工作完成后，第一个内部调用才会排队。一切都是按顺序发生的（这符合我对整个过程的理解），但我不明白为什么要使用嵌套请求来排队作业。如果我从头开始编写，我会为每次调用创建函数并依次调用它们。

我认识到，作为 Java 的新手，我可能会遗漏一些使这种嵌套变得重要的巨大东西。但是没有这方面的文档，代码中也没有关于嵌套的评论。

我错过了什么？什么，如果这段代码有什么意义的话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:27:00.993

*做这么多嵌套*调用是没有意义的。它是基于良好的意图，但实施得很糟糕。

如果您想正确执行此操作，请使用`SwingWorker`.

的[文档`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)有一个简洁的示例，说明您应该如何在应用程序的后台执行多个任务（`PrimeNumbersTask`那里显示的类）。

编辑：这是一个示例，说明在您的情况下您应该使用 SwingWorker 做什么。

```
class SequentialInvoker extends SwingWorker<Void, Integer> {
    @Override
    public void doInBackground() {

        changeTabPanel();
        copySomeFiles();
        enableNextButton1();
        setProgress(10);

        readInFiles();
        doSomethingToFiles();
        setProgress(15);

        doSomethingElse();
        setProgress(100);
    }
} 
```

要在进度条上实际显示进度，请查看从`SwingWorker`文档中复制的以下代码：

```
JTextArea textArea = new JTextArea();
JProgressBar progressBar = new JProgressBar(0, 100);
SequentialInvoker task = new SequentialInvoker();
task.addPropertyChangeListener(
    new PropertyChangeListener() {
        public  void propertyChange(PropertyChangeEvent evt) {
            if ("progress".equals(evt.getPropertyName())) {
                progressBar.setValue((Integer)evt.getNewValue());
            }
        }
    }); 
```

使用此代码，您的进度条将显示进度`SwingWorker`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:32:04.690

这样做的一个优点是其他排队的事情可以在两者之间运行。因此，在执行 changeTabPanel() 的部分和执行 readInFiles() 的部分之间，GUI 将响应用户单击按钮等...

实际的实现有点混乱，并说明了（恕我直言）为什么匿名函数不是一个好主意。您倾向于使这三个部分成为“真实”功能并按顺序调用它们是一个很好的选择。但是，为了保持相同的逻辑，您真正需要做的是让它们成为三个*可运行*对象，并让每个 invokeLater 成为后续的一个。

@Cyrille 是正确的，在 EDT 上执行这些主要任务是不好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:27:55.400

这里使用了三个作业`invokeLater`。每个人都做一件代价高昂的事情，打电话`updateProgressBar`，然后将下一个工作添加到 EDT。

问题是，如果代码只是继续下一个代价高昂的事情，而不是调用 invokeLater 来做，EDT 将没有机会重新绘制进度条以显示它的新值。这可能就是为什么工作在三个`invokelater`电话中中断的原因。

现在，这不是我所说的好代码。这是一种非常糟糕的做法：不应该在 EDT 中进行长时间的处理，因为它会阻塞所有内容并使 GUI 无响应。这应该更改，以便该过程在单独的线程中完成，然后仅调用`invokeLater`以更新进度条。

**编辑：**更一般地回答标题中的问题：几乎没有合理的理由来嵌套调用`invokeLater`. 当您这样做时，您会说“将这项工作排队，以便它在同一个线程中完成，但稍后当您觉得它会很好时”。因此，它为 GUI 的其余部分提供了重新绘制自身的机会，就像这里一样。但只有在 EDT 中有一个长时间运行的进程时才有意义，您应该始终避免这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:31:11.703

您发布的代码对我来说绝对没有意义 - 您可以按顺序编写所有内容，因为您没有运行可能在 EDT 上发布事件的并行线程。您需要第一个`invokeLater()`，因为您使用 Swing 组件。

但是正如您的代码所暗示的那样，您正在执行一些相对冗长的操作：读取文件，对它们执行某些操作，......您应该在新的工作线程中运行这些方法，而不是 EDT。而且，在这些工作线程的 run() 方法中，您需要调用 EventQueue.invokeLater() 来更新您的 GUI。

# java - 将字节转换为位图

> ID：15504904
> 
> 赞同：0
> 
> 时间：2013-03-19T16:20:41.060
> 
> 标签：java, android, byte

我必须将一个字节转换为位图并将其设置为 imageview

我确实有将 ImageView 中的位图转换为字节的方法，然后我将其插入，

```
public static byte[] ConvertDrawableToByteArray(Drawable drawableResource) {

             Bitmap imageBitmap = ((BitmapDrawable) drawableResource).getBitmap();
            ByteArrayOutputStream imageByteStream = new ByteArrayOutputStream();
            imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, imageByteStream);
            byte[] imageByteData = imageByteStream.toByteArray();
            return imageByteData;

} 
```

当我想从数据库中检索图像并将其显示在 ImageView 中时，我会这样做

```
 //--
             byte[] image_b   = c.getBlob(4);
             Bitmap b = BitmapFactory.decodeByteArray(image_b, 0, image_b.length);
             img.setImageBitmap(b); 
```

但它什么也没返回

有什么问题，请帮忙

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:25:24.333

我想这是因为光标没有返回任何东西。可能 Blob 太大而无法一次查询，因为 android 游标限制为每次查询 1 mb 请再次检查您的 stacktrace/logcat，如果 blob 大小是问题，您可以尝试将字节拆分为较小的大小并将其存储在你的数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:26:51.493

您可以尝试以下方法并让我们知道它是否有效：

```
String[] filePathColumn = { MediaStore.Images.Media.DATA };
        Cursor cursor = resolver.query(imageUri, filePathColumn, null, null, null);
        cursor.moveToFirst();
        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();
        return BitmapFactory.decodeFile(picturePath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:25:26.137

我不明白我喜欢这个的问题在哪里：String t = image_b.toString(); System.out.println("它给了我什么" +t); 我在 logcat 中找到了这一行：03-19 17:01:28.167: I/System.out(1019): what it give me[B@41f1f5c0

这是否意味着它返回了一些东西但不显示或者字节`[B@41f1f5c0`不正确

# artificial-intelligence - 高峰时间 - 迭代深化

> ID：15504905
> 
> 赞同：0
> 
> 时间：2013-03-19T16:20:42.693
> 
> 标签：artificial-intelligence

我必须通过迭代深化算法来解决“高峰时间难题”。我在 stackoverflow 和互联网上阅读了很多主题。我认为我了解迭代加深算法。基本上，您只需深入到树中并尝试找到解决方案。

我想我需要从拼图中创建一个图表或一棵树，但我真的不知道如何。另外，如果我有这棵树，那么我如何判断某件事是有效的移动还是最终状态？

有人回答说，节点应该是可能的移动，而边缘在节点之间，可以通过一次移动到达。我可以想象这一点，但不知何故，我在了解这如何有用或更好但如何解决问题时遇到了麻烦。

请帮助我，我不是要求完整的解决方案或代码示例，我只需要对问题进行一些简单的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:29:44.967

您需要使用深化算法是有原因的。想象一下，您将每辆车命名为 A、B、C、D……树的根节点是初始板状态。现在，移动汽车 A。沿着树中的一个节点向下移动。将 A 车向后移动。你处于初始状态，但是你做了两次移动到这里，所以你是树下的两个节点。一遍又一遍地重复。你永远不会达到最终状态。

树的根节点是初始棋盘状态。给定该节点，为每个可能的有效移动添加一个子节点。因此，每个子节点将是移动后初始树的样子。现在，对于这些子节点中的每一个，执行相同的操作：创建一个子节点，其中每个节点都从原始子节点移出一个。

最终，您将找到解决难题的方法。发生这种情况时，您打印从根节点到解决方案子节点的移动并退出。此算法可确保您找到移动次数最少的解决方案。

# ruby - 合并 Nokogiri::XML::NodeSets 的 XPath 性能？

> ID：15504909
> 
> 赞同：0
> 
> 时间：2013-03-19T16:20:47.923
> 
> 标签：ruby, xml, performance, nokogiri, node-set

我从 Web 服务获取数据，`<row>`每页 100 个。我的脚本将这些页面连接到 Nokogiri::XML::Nodeset。通过 XPath 搜索节点集非常慢。

这段代码代替了web服务调用和xml解析，但是症状是一样的：

```
rows = []
(1..500).to_a.each_slice(100) { |slice|
  rows << Nokogiri::XML::Builder.new { |xml|
    xml.root {
      xml.rows {
        slice.each { |num|
          xml.row {
            xml.NUMBER {
              xml.text num
            }
          }
        }
      }
    }
  }.doc.at('/root/rows')
}

rows = rows.map { |a| a.children }.inject(:+) 
```

生成的 NodeSet 包含来自五个文档的节点。这似乎是一个问题：

```
rows.map { |r| r.document.object_id }.uniq
  => [21430080, 21732480, 21901100, 38743080, 40472240] 
```

**问题**：以下代码在大约十秒钟内运行。对于未合并的节点集，这是在眨眼之间完成的：

```
(1..500).to_a.sample(100).each do |sample|
  rows.at('//row[./NUMBER="%d"]' % sample)
end 
```

有人有解决方案以更好的方式合并节点集或合并文档吗？

我想只保留一个节点集的行为，因为这个数据实际上是一个大节点集，由于技术原因被 Web 服务分割。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:57:15.050

合并节点集的关键是使用 Node#remove 分离节点并将它们添加到另一个节点集：

```
nodeset = nil
rows.each do |slice|
  if nodeset.nil?
    nodeset = slice
  else
    slice.children.each do |row|
      nodeset.add_child(row.remove)
    end
  end
end 
```

# javascript - 将表单元素所有表单元素放入特定的对象数组

> ID：15504911
> 
> 赞同：0
> 
> 时间：2013-03-19T16:20:55.487
> 
> 标签：javascript

**已更新** 如何从表单中获取所有表单元素并将它们格式化为对象以匹配以下对象的输出（仅使用 javascript）？

```
var feature = dojo.byId('searchString').value;

         var OBJECTID= dojo.byId('OBJECTID').value; 
```

**这是我需要的格式：**

```
var updates = {attributes:{
          OBJECTID:OBJECTID,
          SubWS:feature
        }}; 
```

**表单元素：**

```
<input type="text" id="OBJECTID" value="" />
<input type="text" id="searchString" value="" /> 
```

输出：![在此处输入图像描述](../Images/1a14854697ea7d074e85c03a43d7d00b.png)

这是我的工作脚本，但输出与上述“更新”不匹配。最终版本将遍历更多有时会更新的表单字段，因此我不想对属性进行硬编码。

```
 var inputs = document.getElementsByTagName("input");
      console.log("inputs array", inputs);
var params = {attributes:{}};
for(var i=0; i < inputs.length; i++){
    var curr = inputs[i];
    if(curr.getAttribute('type')==='text'){
        params[curr.getAttribute('name')] = curr.value;
    }
} 
```

这就是我实际表格上的样子。如您所见，对象略有不同。 ![在此处输入图像描述](../Images/ca65a995a38fc31ba5b78cacb1448249.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:01:39.703

如果我对您的理解正确，那么您需要更改以下行

```
params.attributes[curr.getAttribute('name')] = curr.value; 
```

通过添加`.attributes`，您应该匹配您所追求的结构。

# php - php：如何在一个请求中使用两个不同的会话

> ID：15504912
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:20:58.353
> 
> 标签：php, session

这段代码：

```
<?php

session_name('sess1');
session_start();
$_SESSION['a']=1;
session_write_close();

session_name('sess2');
session_start();
$_SESSION['b']=2;
session_write_close();

session_name('sess1');
session_start();

echo '<pre>';
print_r($_SESSION);
echo '</pre>';

?> 
```

印刷：

```
Array
(
    [a] => 1
    [b] => 2
) 
```

如您所见，两个 vars r 都存储在第一个会话（文件）中。

我需要并期望另一种行为。我需要两个不同的会话。

为什么php的行为如此？这不是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:40:39.947

> [来自评论] 我希望其他人可以将其包含在他们的程序中，而不会干扰他们自己的会话。

您想通过大规模干扰会话处理来实现这一目标……？

我不认为这是一个好主意。当你以这种“非正统”的方式玩会话时，你很可能会增加用户在会话中遇到的问题。

> 我的会话也有自己的设置（如 cookie_lifetime），我不想干扰使用我系统的其他程序的会话。

为什么我嵌入到页面中的登录系统的会话生命周期与我对会话的其余部分的会话生命周期不同？对我来说意义不大。

> 我开发了一个注册和登录系统，它有自己的会话（实际上会话内容是透明加密的）。

如果在将会话的其余部分保留为纯文本的同时保持数据加密是您的主要关注点——那么您可以轻松地在会话数组中生成自己的密钥，并且只加密驻留在该密钥下的数据。

# php - 如何在 php 中打印或回显数组？

> ID：15504913
> 
> 赞同：-2
> 
> 时间：2013-03-19T16:20:58.290
> 
> 标签：php, arrays

```
<?php
$tiger = array ("orange", "white");
$cat = array ("black", "white", "brown");
$fruit = array ("purple", "red", "green", "brown");
?> 
```

如何输出类似：

```
orange : tiger
white  : tiger + cat
black  : cat
brown  : cat + fruit
purple : fruit 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T16:34:33.130

数组的一点乐趣：

```
$arrays = compact('tiger', 'cat', 'fruit');
$values = array_unique(call_user_func_array('array_merge_recursive', $arrays));

foreach ($values as $value) {
    $found = array();
    foreach ($arrays as $name => $bag) {
        if (in_array($value, $bag)) {
            $found[] = $name;
        }
    }
    echo "$value: ".implode(", ", $found)."\n";
} 
```

您可以通过修改第一行轻松地将其扩展到任意数量的数组。

**[看到它在行动](http://ideone.com/1cp7E1)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:34:53.720

因此，您似乎对获取各种对象的颜色感兴趣，并切换关联以使颜色反映对象，而不是相反。

这是一种适用于您的场景的方法：

```
<?php
// The objects we wish to extract colors for
$subjects = array(
  'tiger' => array ("orange", "white"),
  'cat' => array ("black", "white", "brown"),
  'fruit' => array ("purple", "red", "green", "brown")
);

// The array we will push colors to as keys, and objects to as values
$consolidated = array();

// Iterate over each object
foreach($subjects as $subject => $colors) {
  // Iterate over each color in the object
  foreach($colors as $color) {
    $consolidated[$color][] = $subject;
  }
}

// Print out results.
foreach($consolidated as $subject => $contents) {
  print $subject . ' : ' . implode(' + ', $contents) . "<br />\n";
} 
```

上述输出：

```
orange : tiger
white : tiger + cat
black : cat
brown : cat + fruit
purple : fruit
red : fruit
green : fruit 
```

# magento - magento 控制器动作

> ID：15504915
> 
> 赞同：0
> 
> 时间：2013-03-19T16:20:59.803
> 
> 标签：magento

我在我的模块上创建了以下类

```
class Mage_Chargeagent_PaymentupdateController extends Mage_Core_Controller_Front_Action
{
    public function indexAction()
    {

        echo "im here";
        die();
    }
} 
```

它位于 local\Company\Chargeagent\controllers\PaymentupdateController.php 下

当我试图导航到[http://www.xxx.com/index.php/chargeagent/paymentupdate](http://www.xxx.com/index.php/chargeagent/paymentupdate)时我没有采取正确的行动，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:57:54.123

类名应该是`Company_Chargeagent_PaymentupdateController`

```
class Company_Chargeagent_PaymentupdateController extends Mage_Core_Controller_Front_Action
{
    public function indexAction()
    {

        echo "im here";
        die();
    }
} 
```

# javascript - 操作一个 jquery 集合

> ID：15504919
> 
> 赞同：0
> 
> 时间：2013-03-19T16:21:11.557
> 
> 标签：javascript, jquery

我创建了一个 JQuery 集合：

```
var children = $('span[data-Parent="7"]'); 
```

现在我想操作该集合中项目的 css 类。我试过了：

```
for (var i = 0; i < children.length; i++) {
    var $child = children[i];
    if ($child.hasClass("red")) {
        $child.addClass("green");           
    } 
```

但是会出现错误，指出该对象没有方法 hasClass。什么是让集合元素成为文档元素以便可以操作它们的正确方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:23:00.940

您必须将 DOM 元素包装为 jQuery 对象。使用 jQuery 对元素进行迭代通常是通过提供的[每个](http://api.jquery.com/jQuery.each/)函数完成的：

```
$('span[data-Parent="7"]').each(function(){
   if ($(this).hasClass('red')) {
      $(this).addClass('green');
   }
}); 
```

请注意，整个代码可以简化为

```
$('span[data-Parent="7"].red').addClass('green'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:22:45.083

我会说使用`$.each`：

```
$.each(children, function(i, child) {
    if ($(child).hasClass("red")) {
        $(child).addClass("green");
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:22:58.943

只需循环遍历每个孩子并在`.each`循环中运行检查。

```
var children = $('span[data-Parent="7"]');

children.each(function(index)
{
    var self = $(this);

    if (self.hasClass("red"))
    {
        self.addClass("green");
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T16:23:15.007

将您的代码更改为：

```
var $child = $(children[i]);
//the rest of the code 
```

# javascript - jQuery Deferreds 的异步循环（promises）

> ID：15504921
> 
> 赞同：22
> 
> 时间：2013-03-19T16:21:15.200
> 
> 标签：javascript, jquery, jquery-deferred, waterfall

我正在尝试创建我认为被称为“瀑布”的东西。我想按顺序处理一组异步函数（jQuery 承诺）。

这是一个人为的例子：

```
function doTask(taskNum){
    var dfd = $.Deferred(), 
        time = Math.floor(Math.random()*3000);

    setTimeout(function(){
        console.log(taskNum);
        dfd.resolve();
    },time)

    return dfd.promise();
}

var tasks = [1,2,3];

for (var i = 0; i < tasks.length; i++){
    doTask(tasks[i]);
}

console.log("all done"); 
```

我希望它按照它们执行的顺序完成任务（存在于数组中）。因此，在此示例中，我希望它执行任务 1 并等待它解决，然后执行任务 2 等待它解决，执行任务 3 等，然后记录“全部完成”。

也许这真的很明显，但我整个下午都在试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-19T18:08:28.683

我会尝试使用`$().queue`而不是在`$.Deferred`这里。将函数添加到队列中，并仅在准备好时调用下一个。

```
function doTask(taskNum, next){
    var time = Math.floor(Math.random()*3000);

    setTimeout(function(){
        console.log(taskNum);
        next();
    },time)
}

function createTask(taskNum){
    return function(next){
        doTask(taskNum, next);
    }
}

var tasks = [1,2,3];

for (var i = 0; i < tasks.length; i++){
    $(document).queue('tasks', createTask(tasks[i]));
}

$(document).queue('tasks', function(){
    console.log("all done");
});

$(document).dequeue('tasks'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T17:26:40.217

对于瀑布，您需要一个异步循环：

```
(function step(i, callback) {
    if (i < tasks.length)
        doTask(tasks[i]).then(function(res) {
            // since sequential, you'd usually use "res" here somehow
            step(i+1, callback);
        });
    else
        callback();
})(0, function(){
    console.log("all done");
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-21T03:19:20.540

您可以创建一个已解析的 $.Deferred 并在每次迭代时添加到链中：

```
var dfd = $.Deferred().resolve();
tasks.forEach(function(task){
    dfd = dfd.then(function(){
        return doTask(task);
    });
}); 
```

逐步发生以下情况：

```
//begin the chain by resolving a new $.Deferred
var dfd = $.Deferred().resolve();

// use a forEach to create a closure freezing task
tasks.forEach(function(task){

    // add to the $.Deferred chain with $.then() and re-assign
    dfd = dfd.then(function(){

        // perform async operation and return its promise
        return doTask(task);
    });

}); 
```

就个人而言，我发现这比递归更干净，比 $().queue 更熟悉（$().queue 的 jQuery API 令人困惑，因为它是为动画设计的，你也可能在你的其他地方使用 $.Deferred's代码）。它还具有通过异步操作中的 resolve() 将结果标准传输到瀑布的好处，并允许附加 $.done 属性。

这是在一个[jsFiddle](http://jsfiddle.net/gr02pofc/4)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-19T17:52:30.303

看看[$.when](http://api.jquery.com/jQuery.when/)和[then](http://api.jquery.com/deferred.then/)运行延迟的方法。

瀑布用于将返回值从一个延迟传递到下一个，串联。它看起来[像这样](http://jsfiddle.net/PVeJs/2/)。

```
function doTask (taskNum) {
  var dfd = $.Deferred(),
      time = Math.floor(Math.random() * 3000);

  console.log("running task " + taskNum);

  setTimeout(function(){
      console.log(taskNum + " completed");
      dfd.resolve(taskNum + 1);
  }, time)

  return dfd.promise();
}

var tasks = [1, 2, 3];

tasks
  .slice(1)
  .reduce(function(chain) { return chain.then(doTask); }, doTask(tasks[0]))
  .then(function() { console.log("all done"); }); 
```

注意传递给`resolve`. 这被传递给链中的下一个函数。如果您只想在不使用管道的情况下连续运行它们，则可以将其取出并将reduce调用更改为`.reduce(function(chain, taskNum) { return chain.then(doTask.bind(null, taskNum)); }, doTask(tasks[0]));`

同时它看起来[像这样](http://jsfiddle.net/PVeJs/)：

```
var tasks = [1,2,3].map(function(task) { return doTask(task); });

$.when.apply(null, tasks).then(function() { 
    console.log(arguments); // Will equal the values passed to resolve, in order of execution.
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T17:23:17.360

确实很有趣的挑战。我想出的是一个递归函数，它接受一个列表和一个可选的起始索引。

这是我用几个不同的列表长度和间隔测试过[的 jsFiddle 的链接。](http://jsfiddle.net/6NZDQ/1/)

我假设您有一个返回承诺的函数列表（不是数字列表）。如果您确实有数字列表，则可以更改此部分

```
$.when(tasks[index]()).then(function(){
    deferredSequentialDo(tasks, index + 1);
}); 
```

对此

```
/* Proxy is a method that accepts the value from the list
   and returns a function that utilizes said value
   and returns a promise  */
var deferredFunction = myFunctionProxy(tasks[index]);

$.when(tasks[index]()).then(function(){
    deferredSequentialDo(tasks, index + 1);
}); 
```

我不确定您的函数列表有多大，但请注意浏览器将保留第一次 deferredSequentialDo 调用中的资源，直到它们全部完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-09T21:55:44.990

论据

*   items：参数数组
*   func：异步函数
*   回调：回调函数
*   更新：更新功能

简单循环：

```
var syncLoop = function(items, func, callback) {
    items.reduce(function(promise, item) {
        return promise.then(func.bind(this, item));
    }, $.Deferred().resolve()).then(callback);
};

syncLoop(items, func, callback); 
```

跟踪进度：

```
var syncProgress = function(items, func, callback, update) {
    var progress = 0;
    items.reduce(function(promise, item) {
        return promise.done(function() {
            update(++progress / items.length);
            return func(item);
        });
    }, $.Deferred().resolve()).then(callback);
};

syncProgress(items, func, callback, update); 
```

# asp.net-mvc - AsQueryable() 返回用户未处理的 NullReference 异常“对象引用未设置为对象实例”

> ID：15504923
> 
> 赞同：2
> 
> 时间：2013-03-19T16:21:15.660
> 
> 标签：asp.net-mvc, mvcjqgrid

我是 ASP.Net MVC 4.0 的新手，我正在尝试使用 Trirand 的 JQGrid 填充数据库中的数据。当我尝试将数据绑定到 JQGrid 时出现上述错误。

错误在下面一行

```
 return gridModel.MarketPriceAnalysisGrid.DataBind(oMarketPriceAnalysisModel.AsQueryable<MarketPriceAnalysisModel>()); 
```

下面的代码：

```
 // This method is called when the grid requests data
    public JsonResult SearchGridDataRequested()
    {
        // Get both the grid Model and the data Model          
        var gridModel = new MarketPriceAnalysisJQGridModel();

        // customize the default Orders grid model with our custom settings
        SetUpMarketPriceAnalysisGrid(gridModel.MarketPriceAnalysisGrid);

        var oMarketPriceAnalysisModel = MarketPriceAnalysisRepository.GetListOfSAPSPTComponents();                           

        // return the result of the DataBind method, passing the datasource as a parameter
        // jqGrid for ASP.NET MVC automatically takes care of paging, sorting, filtering/searching, etc
         return gridModel.MarketPriceAnalysisGrid.DataBind(oMarketPriceAnalysisModel.AsQueryable<MarketPriceAnalysisModel>());
    } 
```

GetListofSAPSPTComponents 方法返回一个 IEnumerable

```
 IEnumerable<MarketPriceAnalysisModel> GetListOfSAPSPTComponents(); 
```

我只是认为错误源是 Trirand.Web.MVC 并且堆栈跟踪说

```
`at Trirand.Web.Mvc.Util.PrepareJsonResponse(JsonResponse response, JQGrid grid,   DataTable dt)
  at Trirand.Web.Mvc.Util.ConvertToJson(JsonResponse response, JQGrid grid, DataTable   dt)
  at Trirand.Web.Mvc.JQGrid.FilterDataSource(Object dataSource, NameValueCollection queryString, IQueryable& iqueryable)
  at Trirand.Web.Mvc.JQGrid.GetJsonResponse()
  at Trirand.Web.Mvc.JQGrid.DataBind()
  at Trirand.Web.Mvc.JQGrid.DataBind(Object dataSource)
  at MedPackMVC.Controllers.MarketPriceAnalysisController.SearchGridDataRequested() in      c:\Work\04_Dev\MedPackMVCApplication\MedPackMVC\Controllers\MarketPriceAnalysisController.cs:line 95 
```

`

不知道这可能是什么原因？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T09:30:39.637

当您的 MarketPriceAnalysisModel 具有分配给 jqGrid 的字段而不是属性时，也会出现此错误。

# file - 目录是如何在 UNIX 文件系统中实现的？

> ID：15504932
> 
> 赞同：0
> 
> 时间：2013-03-19T16:21:38.577
> 
> 标签：file, filesystems, directory

[这个问题是对https://unix.stackexchange.com/questions/18605/how-are-directories-implemented-in-unix-filesystems](https://unix.stackexchange.com/questions/18605/how-are-directories-implemented-in-unix-filesystems)的扩展

我的目标是实现基本文件系统：在读取 inode 编号和名称后，我们知道文件的名称，因此我们可以列出目录内容，但我们无法确定条目的类型：它是文件还是文件。如果目录中有 1000 个条目，那么读取 1000 个 inode 以确定它是文件还是目录看起来太傻了。

我在这里遗漏了什么还是只有这种方式？

# webrtc - WebRTC 是否允许一对多（多播）连接？

> ID：15504933
> 
> 赞同：13
> 
> 时间：2013-03-19T16:21:40.607
> 
> 标签：webrtc

我已经阅读了很多关于 WebRTC 的内容，但仍然存在一个问题。我希望你能帮助我：

WebRTC 是否允许我创建一对多连接？我并不是说“能够与不同的计算机建立多个连接”，我真正谈论的是拥有一个将其数据多播到多个端点的连接，而无需为每个端点“上传”一次数据。是否有可能将一个包发送到网络，当它到达网络时，它会神奇地将自身拆分为具有不同目标的多个包？

我希望你能得到我正在寻找的东西:)

到目前为止，我只看到了一对一的连接，或者只有一个连接到为它们进行多播的中央服务器的解决方案（这通常会导致两次 ping）。

但对我来说，一对一连接似乎并没有真正有用（由于客户端的上传带宽低），并且在没有 WebRTC（使用 WebSockets）的情况下也可以使用中央服务器的解决方案，所以唯一真正的用途WebRTC 的情况是一对多的连接。

那么..这是将来可能发生的事情吗？或者今天已经有可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-16T18:13:46.343

三件事：

1.  目前无法在 Internet 中进行 IP 多播（多播地址不是由 ISP 路由的）
2.  WebRTC 适用于一对多通信之外的许多用例，只需查看此文档：[https ://datatracker.ietf.org/doc/html/draft-ietf-rtcweb-use-cases-and-requirements-06](https://datatracker.ietf.org/doc/html/draft-ietf-rtcweb-use-cases-and-requirements-06)
3.  浏览器之间的 WebRTC 连接始终是加密的（对 A/V 数据使用 SRTP，对通用数据使用 DTLS），并且为每个连接单独协商加密参数（会话密钥等）。您将如何在多播环境中执行此操作（将其视为分发树）？

所以不，WebRTC 不能与 IP 多播一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T21:00:37.613

我会回答“**暂时不会**”，因为作为一名程序员，我可以告诉你，如果我们（用户）坚持它的重要性，浏览器开发人员可以通过多种方式使其工作。
但是如何？
由于存在加密，他们可以允许将会话的加密密钥**共享**给“注册”（多播）用户组。
但是如何？好吧，Web 是为共享而**创建的。**
最明显的方法是通过 Web 服务器中介和 JS WebRTC API 函数（加载用户密钥）。由于多播最常用于高效的视频分发，因此您拥有 RTP/SRTP 视频服务器。Web 服务器可以共存于同一台机器上。如果他们决定将其扩展到 Web 浏览器，那么创建多播流的 Web 浏览器（发送者）就可以完成“服务器”角色。客户需要知道是谁。

再说一遍：在 2013 年 12 月，这仍然是不可能的。并且仅在以下情况下允许在 Internet 上进行多播：

*   一些实验性的广域网
*   一些互联网+视频 ISP 网络
*   LAN（在交换机级别启用时，廉价交换机会将其传输到所有端口）。但是您可以是 ISP、研究人员或 LAN 用户，所以这是必要的。

# c# - 在 C# 中计算校验和

> ID：15504937
> 
> 赞同：0
> 
> 时间：2013-03-19T16:21:48.250
> 
> 标签：c#, math, calculus

```
numbers[i] = numbers[i] * 2;

if (numbers[i] >= 10)
{
   string t = numbers[i].ToString();
   Console.WriteLine(t[0] + " plus " + t[1]+" = "+quersumme(t).ToString());
   numbers[i] = Convert.ToInt32(t[0]) + Convert.ToInt32(t[1]);
}

public int quersumme(string n)
{
   return n[0] + n[1];
} 
```

当我输入 7 时该函数返回 101。但是 7 * 2 = 14 并且 quesumme 应该执行 1+4 = 5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T16:24:17.030

`t[0]`是字符“1”，`t[1]`是字符“4”，它被转换为 49 + 52，因此是 101。查看[ASCII 图表](http://www.asciitable.com/)以了解我在说什么。

您可以尝试使用[Char.GetNumericValue()](http://msdn.microsoft.com/en-us/library/system.char.getnumericvalue.aspx)函数：

```
return (int)Char.GetNumericValue(n[0]) + (int)Char.GetNumericValue(n[1]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T16:25:14.817

您当前正在对 Unicode 代码点求和 - “1”是 49，“4”是 52，因此是 101。您想要获取每个字符的数字值。

如果您*知道*数字将在 '0'-'9' 范围内，那么最简单的方法就是减去 '0' 并使用 LINQ`Sum`方法对每个值求和：

```
public int SumDigits(string n)
{
   return n.Sum(c => c - '0');
} 
```

或者您可以使用`Char.GetNumericValue()`，但它会返回，`double`因为它也可以处理 U+00BD: ½ 等字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:24:29.573

尝试在您的 quersomme 函数中将 n[0] 和 n[1] 转换为单独的 int32

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:25:09.490

您正在 quesumme 方法中进行字符串连接。

应该：

```
public int quersumme(string n)
{
   return (int)Char.GetNumericValue(n[0]) + (int)Char.GetNumericValue(n[1]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T16:40:12.453

在我看来，您正在尝试枚举`int`.

尝试这样做可以避免缓慢而繁琐的解析和转换。（都是相对的，我没有测试过性能。）

```
static IEnumerable<int> EnumerateDigits(int value, int baseValue = 10)
{
    while (value > 0)
    {
        yield return value % baseValue;
        value = value / baseValue
    }
} 
```

然后，如果您想将订单切换为数组

```
var t = EnumerateDigits(numbers[i]).Reverse().ToArray(); 
```

* * *

但是，如果您只想对数字求和。

```
var checksum = EnumerateDigits(numbers[i]).Sum() 
```

# .net - 通过 NTLM 身份验证代理

> ID：15504938
> 
> 赞同：1
> 
> 时间：2013-03-19T16:21:58.193
> 
> 标签：.net, vb.net, proxy, ntlm

我很久以前在 .NET Framework 2.0 上使用 VB 开发了一个旧的 HTTP 客户端应用程序。最近在我们的网络中引入了一个新的代理服务器，并且 VB 应用程序开始遇到“需要 407 代理身份验证”错误。

代理需要 NTLM 身份验证，而程序没有考虑它。

在谷歌搜索了一些网络资源后，我编写了以下代码。

```
Dim proxy As New System.Net.WebProxy("http://my.proxy.com:81")
proxy.Credentials = System.Net.CredentialCache.DefaultCredentials
proxy.UseDefaultCredentials = true
webreq.Proxy = proxy 
```

但我仍然看到 407 错误。用户正在登录 Windows 域。

我尝试了一些不同（但相似）的方法，但没有成功。

谁能指出我可能缺少的东西？

是否有任何安全策略设置可能会阻止此操作？

我可以联系网络管理员，但他不熟悉应用程序开发，我也不知道我应该问他什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T15:33:15.013

我也在寻找解决方案。也许是安全相关的：他们是否在 Intranet 安全区域中？[http://www.codinghorror.com/blog/2005/04/aspnet-ntlm-authentication---is-it-worth-it.html](http://www.codinghorror.com/blog/2005/04/aspnet-ntlm-authentication---is-it-worth-it.html)

我在以下网址找到了这个：[http](http://bytes.com/topic/net/answers/544841-ntlm-authentication-how) ://bytes.com/topic/net/answers/544841-ntlm-authentication-how 这是一个开始，但他们也遇到了问题。

```
public string SendRequest()
        // run the request and return a string response
        {
            string FinalResponse = "";
            string Cookie = "";

            NameValueCollection collHeader = new NameValueCollection();

            HttpWebResponse webresponse;

             HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URI);

             request.KeepAlive = true;
            request.Timeout = 10000;
            request.Method = "POST";
            request.AllowAutoRedirect = false;
            request.Proxy = WebProxy.GetDefaultProxy();

            string addr = "http://" + ProxyServer + ":" + String.Format("{0:D}", ProxyPort);
            Uri u = new Uri(addr);

            CredentialCache wrCache = new CredentialCache();
            wrCache.Add(u, "Negotiate", System.Net.CredentialCache.DefaultNetworkCredentials);

            request.Proxy.Credentials = wrCache;

            try
            {
                byte[] bytes = Encoding.ASCII.GetBytes(Request);
                request.ContentLength = bytes.Length;

                Stream oStreamOut = request.GetRequestStream();
                oStreamOut.Write(bytes, 0, bytes.Length);
                oStreamOut.Close();

                webresponse = (HttpWebResponse)request.GetResponse();
                if (null == webresponse)
                {
                    FinalResponse = "No Response from " + URI;
                }
                else
                {
                    Encoding enc = System.Text.Encoding.GetEncoding(1252);
                    StreamReader rdr = new StreamReader(webresponse.GetResponseStream(),enc);
                    FinalResponse = rdr.ReadToEnd();
                }

            }//End of Try Block

            catch (WebException e)
            {
                // some kind of error..
                if (407 == (int)e.Status)
                {
                }

                throw CatchHttpExceptions(FinalResponse = e.Message);
            }
            catch (System.Exception e)
            {
                throw new Exception(FinalResponse = e.Message);
            }
            finally
            {
                // BaseHttp = null;
            }
            return FinalResponse;
        } //End of SendRequestTo method 
```

# gruntjs - 为同一个任务咕哝两次

> ID：15504939
> 
> 赞同：5
> 
> 时间：2013-03-19T16:21:58.617
> 
> 标签：gruntjs, jshint

我想在 中运行该[**`jshint`**](http://www.jshint.com/docs/)任务两次[**`GruntJS`**](http://gruntjs.com/)，但每次都有不同的选项。

我将如何去做这样的事情？

目前，我的`Gruntfile.js`样子是这样的：

```
'use strict';

module.exports = function(grunt) {
    var opts = {
        pkg: grunt.file.readJSON('package.json'),
        jasmine_node: {
            matchall: true,
            forceExit: true
        },
        jshint: {
            files: [
                'gruntfile.js',
                'src/**/*.js', '!src/static/bin', '!src/static/js/libs/*.js',
                'test/spec/**/*.js'
            ],
            options: {
                jshintrc: '.jshintrc'
            }
        }
    };

    grunt.initConfig(opts);

    grunt.loadNpmTasks('grunt-contrib-jshint');
    grunt.loadNpmTasks('grunt-jasmine-node');

    grunt.registerTask('default', ['jshint', 'jasmine_node']);
    grunt.registerTask('travis', ['jshint', 'jasmine_node']);
}; 
```

我可能希望它是这样的：

```
var jshint: {
    files: [
        'gruntfile.js',
        'src/**/*.js', '!src/static/**',
        'test/spec/**/*.js'
    ],
    options: {
        jshintrc: '.jshintrc'
    }
}

var jshint2 = {
    files: [
        'src/static/**/*.js',
        '!src/static/bin',
        '!src/static/js/libs/*.js'
    ],
    options: {
        jshintrc: '.jshintrc-browser'
    }
}; 
```

这样我就可以为前端 javascript 和 NodeJS javascript 选择不同的选项，因为每个环境的 linting 应该是不同的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T18:24:55.880

`jshint` is a [multitask](http://gruntjs.com/creating-tasks#multi-tasks). So it is possible to have to following config:

```
jshint: {
  browser: {
    files: [
        'src/static/**/*.js',
        '!src/static/bin',
        '!src/static/js/libs/*.js'
    ],
    options: {
        jshintrc: '.jshintrc-browser'
    }
  },
  node: {
    files: [
        'gruntfile.js',
        'src/**/*.js', '!src/static/**',
        'test/spec/**/*.js'
    ],
    options: {
        jshintrc: '.jshintrc'
    }
  }
} 
```

To run the **browser version**:

`grunt jshint:browser`.

To run to **node version**:

`grunt jshint:node`.

Running just:

`grunt jshint`

will run both.

Of course, you probably will want to trigger them via another task, e.g:

```
grunt.registerTask('build', ['clean:all', 'jshint:browser', ...]); 
```

You want want to read the section [**Specifying JSHint options and globals**](https://github.com/gruntjs/grunt-contrib-jshint#specifying-jshint-options-and-globals) for more info.

# c++ - 对依赖基类成员的非限定访问导致“[x] 的声明必须可用”

> ID：15504944
> 
> 赞同：15
> 
> 时间：2013-03-19T16:22:08.957
> 
> 标签：c++, templates, stack

代码：

```
// test3.cpp

#include <stack>

using namespace std;

template<typename T>
struct ptr_stack_tp;

template<typename T>
struct ptr_stack_tp<T*> : public stack<T*>
{
    ~ptr_stack_tp()
    {
        while (!empty()) {
            operator delete(top());
            pop();
        }
    }
};

int main()
{} 
```

错误消息（gcc 4.7.2）：

```
test3.cpp: In destructor 'ptr_stack_tp<T*>::~ptr_stack_tp()':
test3.cpp:15:23: error: there are no arguments to 'empty' that depend on a template parameter, so a declaration of 'empty' must be available [-fpermissive]
test3.cpp:15:23: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)
test3.cpp:16:33: error: there are no arguments to 'top' that depend on a template parameter, so a declaration of 'top' must be available [-fpermissive]
test3.cpp:17:17: error: there are no arguments to 'pop' that depend on a template parameter, so a declaration of 'pop' must be available [-fpermissive] 
```

Functions`empty()`和是`top()`的`pop()`函数`std::stack`，那么，为什么 gcc 找不到它们？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-19T16:25:50.480

`this`您应该通过指针显式调用类模板中的基类成员函数。

```
// ...

template<typename T>
struct ptr_stack_tp<T*> : public stack<T*>
{
    ~ptr_stack_tp()
    {
        while (!this->empty()) {
        //      ^^^^^^
            operator delete(this->top());
            //              ^^^^^^
            this->pop();
        //  ^^^^^^
        }
    }
};

// ... 
```

这是由于模板的两阶段名称查找工作方式。如果没有`this->`间接，编译器会尝试将*非限定*名称解析为全局函数的名称。由于不存在名为`empty()`、`top()`和`pop()`的全局函数，编译器将发出错误。

当您使用`this->`时，编译器会将名称查找延迟到模板实际实例化的那一刻：此时，对基类成员的函数调用将被正确解析。

# internet-explorer - Internet Explorer 的圆角

> ID：15504946
> 
> 赞同：1
> 
> 时间：2013-03-19T16:22:13.647
> 
> 标签：internet-explorer, css

我正在这个网站上工作[http://www.claybrookanimalfeeds.co.uk/contact.php](http://www.claybrookanimalfeeds.co.uk/contact.php)我想在右侧的商店开放时间框上获得圆角。

现在我设法让它们在 Firefox、chrome 和 opera 中工作，但由于某种原因，它们不能在 Internet Explorer 中工作。我尝试了不同的方法（包括 PIE），但它们似乎都不起作用。要么我已经翻译了代码，所以它不适合我的，或者它只是不工作。

任何帮助，将不胜感激。

这是我正在使用的 css（它很长），我想要圆角的代码部分位于开放时间部分下

```
@charset "utf-8";
/* CSS Document */
body {
background-color:beige;
font-family: georgia,sans-serif;
color:#333;
margin:0;
padding:0;
}

#wrapper {
width:960px;
background-color:beige;
margin:0 auto;
}
/*Header*/
#header {
height:150px;
}

h1 {
text-align:center;
color:darkgoldenrod;
font-size:36px;
}

#p1 {
text-align:center;
color:darkgoldenrod;
font-size:18px;
}

/*Header End*/

/*Navigation Bar*/
#nav {
width:100%;
float:left;
margin: 0 0 1em 0;
padding:0;
background-color:darkgoldenrod;
border-bottom:1px solid #ccc;  
}

#nav ul {
list-style:none;
width:800px;
margin:0 auto;
margin-left:100px;
padding:0; 
}

#nav li {
float:left;
width:250px;
text-align:center;
}

#nav li a {
display:block;
padding:8px 15px;
text-decoration:none;
font-weight:bold;
color:white;
border-right:1px solid #ccc; 
}

#nav li:first-child a {
border-left:1px solid #ccc; 
}

#nav li a:hover {
color:white;
background-color:blue; 
}

/*Navigation Bar End*/
#content {
width:675px;
float:left;
margin-left:10px;
padding:10px;
}

/*Slideshow*/
#slide-show {
margin-left:150px;
}

#slide-images {
display:block;
margin:0px;
padding:0px;
width:300px;
height:224px;
overflow:hidden;
}

#slide-images li {
display:block;
list-style-type:none;
margin:0px;
padding:0px;
background-color:#FFFFFF;
}

#slide-images li img {
display:block;
background-color:#FFFFFF;
}
/*Slideshow End*/

/*Opening Times*/
#openingtimes
{
float:right;
height:200px;
width:200px;
background-color:white;
text-align:center;
border-style:solid;
border-width:medium;
border-color:black;
-moz-border-radius: 15px; /* Firefox */
-webkit-border-radius: 15px; /* Safari and Chrome */
border-radius: 15px;
-moz-box-shadow: 10px 10px 20px #000; /* Firefox */
-webkit-box-shadow: 10px 10px 20px #000; /* Safari and Chrome */
box-shadow: 10px 10px 20px #000;
}
/*Opening Times End*/

/*Form*/
#form {
float:left;
}
/*Form End*/

/*Sidebar*/
#sidebar {
width:200px;
float:left;
margin-left:10px;
margin-bottom:25px;
background-color:tan;
text-indent:10px;
-moz-box-shadow: 5px 5px 5px black;
-webkit-box-shadow: 5px 5px 5px black;
box-shadow: 5px 5px 5px black;
filter:
    progid:DXImageTransform.Microsoft.DropShadow(color=black, offx=5, offy=10)
}

#sidebar li {
list-style: none;
position: relative;
height: 30px;
padding:0 20px;
background-color:tan;
color: #45371E;
line-height: 20px;
cursor:pointer;
}

#sidebar li a {
text-decoration:none;
color: #45371E;
background-color:transparent;
display:block;
} 

#sidebar li:hover {
background-color: #CD853F;
} 
/*Sidebar End*/

/*Footer*/
#footer {
clear:both;
width:960px;
height:135px;
border-top:1px solid #ccc;
text-align:center;
}

#footer p {
padding:10px;
}
/*Footer End*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:24:13.923

`border-radius`属性有效，`IE9=+`因此如果您尝试使用它而`IE8 <=`不是它不起作用，最好改用 jQuery

[http://www.malsup.com/jquery/corner/](http://www.malsup.com/jquery/corner/)

还可以使用这个网站检查各种浏览器的 CSS 属性支持，对开发人员来说非常方便

[www.caniuse.com](http://www.caniuse.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:26:11.930

所以ie9及以上支持这个[http://caniuse.com/border-radius](http://caniuse.com/border-radius) 对于IE6+你可以使用polyfill：[http ://css3pie.com/](http://css3pie.com/)

希望这可以帮助。

因此，对于您使用 CSSPIE 的示例：

```
border: 1px solid black;
padding: 60px 0;
text-align: center; width: 200px;
-webkit-border-radius: 15px;
-moz-border-radius: 15px;
border-radius: 15px;
behavior: url(/pie/PIE.htc); 
```

# node.js - 在 connect/express 中使用 cookieSession() 时为会话设置单独的 maxAge

> ID：15504950
> 
> 赞同：2
> 
> 时间：2013-03-19T16:22:27.063
> 
> 标签：node.js, express, session-cookies, connect

我正在尝试使用 connect/express`cookieSession()`将我的 node.js 会话存储在 cookie 中（因此，避免了服务器端会话存储）。这将帮助我在用户登录时“记住”用户，即使在服务器重新启动后也能保持会话处于活动状态。

我想这样做`cookieSession()`：

```
app.use( express.cookieSession( { secret: 'secret_key' } ) );
app.use( function (req, res, next) {
    if ( req.method == 'POST' && req.url == '/login' ) {
      if ( req.body.remember ) {
        req.session.cookie.maxAge = 30*24*60*60*1000; // Rememeber 'me' for 30 days
      } else {
        req.session.cookie.expires = false;
      }
    }
    next();
}); 
```

但是，这不起作用，因为 req.session.cookie 未定义。我也尝试了以下方法，但似乎没有用：

```
app.use( express.session( { secret: 'secret_key' } ) );
app.use( function (req, res, next) {
    if ( req.method == 'POST' && req.url == '/login' ) {
      if ( req.body.remember ) {
        req.cookies['connect.sess'].maxAge = 30*24*60*60*1000; // Rememeber 'me' for 30 days
      } else {
        rreq.cookies['connect.sess'].expires = false;
      }
    }
    next();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T17:21:24.517

Starting out with

```
app.use(express.cookieSession({ secret: config.server.cookieSecret })); 
```

And changing it to

```
app.use(function(req, res, next) {
  express.cookieSession({
    secret: config.server.cookieSecret,
    cookie: {
      maxAge: req.param('remember') ? 20000 : 3000
    },
  })(req, res, next);
}) 
```

So, we create our own middleware, wrapped around the cookieSession middleware, changing the maxAge based on a param.

So, whenever you change the session you'll need to pass a `remember` in the `body`, `query`, or `params`( that's where `req.param()` looks ). In most cases, you only set a `user_id` to the session once, at login.

It's 3 seconds or 20 seconds to test and ensure it works.

And again, it might be not very helpful if you're setting stuff to your session a lot, but if you just set a user_id to session at login, this is all you need.

If you are setting lots of stuff to your session, you should know that data get passed around at every request, and you should save only the minimum to the session, like user_id, then look up the data you need for each request, to keep the overhead down on the user.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:38:56.383

I think this does what you want:

```
// Using express.session instead of express.cookieSession
app.use(express.session({ secret : 'secret_key' }));

app.use( function (req, res, next) {
  if ( req.method === 'POST' && req.url === '/login' ) {
    if ( req.body.remember )
    {
      req.session.cookie.maxAge = 30*24*60*60*1000;
      // needed to make the session `dirty` so the session middleware re-sets the cookie
      req.session.random = Math.random();
    }
    else
    {
      req.session.cookie.expires = false;
    }
  }
  next();
}); 
```

`cookieSession` does some funky stuff, like `del req.session.cookie` (not sure why).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:29:39.817

你必须先设置`req.session.cookie`，这样你才能设置`maxAge`。在设置它之前尝试使用它`req.session.cookie is undefined`

`express.cookieSession` has default values which it accepts, see [here](http://expressjs.com/api.html#cookieSession). You should mention all the parameters you are going to use. You can set cookie via the following :

```
app.use(express.cookieSession({ secret: 'secret_key', cookie :{ path: '/', httpOnly: true, maxAge: 30*24*60*60*1000} }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-07T12:15:47.683

A little late to the table but I thought this answer may help people going forward...

I was using *cookie-session* which doesn't create a cookie object on `request.session`. To properly implement rememberMe functionality using `request.session.cookie` I switched *cookie-session* to *express-session* and that solved everything. So now there is a cookie object on session and doing this inside of a request is possible...

> npm install express-session

```
app.post('/login', function(request, response, next) {
    passport.authenticate('local', function(err, user, info) {
        if(err) return next(err);
        if(!user) {
            request.flash('loginMessage', info.message);
            return response.redirect('/account/login');
        }

        request.login(user, function(err) {
            if(err) return next(err);

            if(request.body.rememberMe)
                request.session.cookie.maxAge = 2592000000;
            else
                request.session.cookie.expires = false;

            return response.redirect(options.redirect);
        });
    })(request, response, next);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-21T09:19:26.257

This is also pretty late but it might help other people.

It seems like to me the best way to persist your session data is to store it in something like redis. The question asked for a way that didn't use server storage, but I think he was referring more to MemoryStore. Maybe not but either way this is what I did.

I used express-session and connect-redis

```
npm install -g connect-redis
npm install -g express-session 
```

Then you configure stuff.

```
// session modules
var cookieParser = require('cookie-parser');
var bodyParser = require('body-parser');
var session = require('express-session')
var redisStore = require('connect-redis')(session); // this sets up Redis to work with your session cookies
var app = express(); 
```

Then you just initiate your session with the store option set to your redisStore. The maxAge part sets the lifetime of each session to an hour, the session middleware resets it when it's accessed.

```
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: false }));
app.use(cookieParser());
app.use(session({ 
    store: new RedisStore({
        host:'127.0.0.1',
        port:6380,
        prefix:'sess'
    }),
    cookie: {maxAge: 3600000 },
    secret: 'session_secret' 
})); 
```

Now when a client connects, express should store the session data automatically in a Redis data structure. Since it's not just cached in memory, your server can crash and still have all the relevant session data still available at the IP address and and port specified.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-17T21:49:19.307

[Yummy](https://github.com/shtylman/node-yummy) seems to allow modifying cookies expiry after creation.

# regex - 如何使用正则表达式捕获不同长度的整数

> ID：15504953
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:22:28.940
> 
> 标签：regex

如果需要捕获以下代表字符串：

```
'About 1 results'
'About 5 results'
'About 10 results' 
```

我今天才开始接触正则表达式，目前只达到`'[0-9] result'`. 我觉得这应该很简单，但我一直找不到能满足我需要的教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:24:15.550

`[0-9]+`或`\d+`。加号使它成为“一个或多个”。

# php - 为什么这个 JSON 数组显示为空？

> ID：15504955
> 
> 赞同：0
> 
> 时间：2013-03-19T16:22:34.783
> 
> 标签：php, json, web-services

我正在使用网络服务来同步我们经销商的产品。作为第一步，我建立了一个表格来显示数据，以验证一切是否正常。我已经能够使用以下功能成功检索产品描述：

```
function get_description($api_key, $item){
$url = 'http://www.stl-distribution.com/webservices/json/GetProductDescription.php';
$post_vars = 'api_key='.$api_key.'&item='.$item;
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS,$post_vars);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
curl_setopt($ch, CURLOPT_HEADER,0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
$return_data = curl_exec($ch);

$json_array = json_decode($return_data,true);
    return $json_array;
} 
```

我正在使用 foreach 循环显示信息，如下所示：

```
 <table>
            <tr>
                    <th>ISBN</th>
                    <th>Description:</th>
                    <th>Categories:</th>
                    <th>Options:</th>
            </tr>
            <?php foreach($product_ISBNs as $item) : ?>
            <tr>
                    <td class="center"><?php echo $item[0]?></td>
                    <td class="center"><?php $item_description = get_description($api_key,$item[0]); echo $item_description['description'];?>
                    <td class="center"><?php $item_data = get_meta_data($api_key,$item[0]); echo $item_data['product_type']; ?>
            </tr>
            <?php endforeach?>
    </table> 
```

虽然我已经成功地能够使用该`get_description()`函数检索描述，但我始终从该函数中得到以下错误`get_meta_data()`：

```
Notice: Undefined index: product_type in C:\xampp\htdocs\STLImport\view\user_form.php on line 21 
```

该`get_meta_data()`函数的代码如下：

```
function get_meta_data($api_key, $item){
$url = 'http://www.stl-distribution.com/webservices/json/GetProductMetaBasic.php';
$post_vars = 'api_key='.$api_key.'&item='.$item;
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS,$post_vars);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
curl_setopt($ch, CURLOPT_HEADER,0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
$return_data = curl_exec($ch);

$json_array = json_decode($return_data,true);
    return $json_array;
} 
```

当我`print_r()`在声明之前立即执行时，`return $json_array;`我收到以下错误：

```
Array ( [0] => Array ( [error] => "" not found ) ) 
```

根据我们经销商的网站，我们的请求正在发送和接收。每次我刷新页面时，我的使用情况统计都会上升。因此，似乎没有返回任何数据，或者我没有正确引用它。我知道这些产品存在于数据库中，因为它正在返回描述。因此，我一定没有正确引用它，但我找不到我的错误在哪里。我尝试使用各种组合引用它，但无济于事。webservice 文档给出了如何返回数据的示例：

```
{
"9781434768513":
{
    "isbn13":"9781434768513",
    "isbn":"1434768511",
    "upc":"000000912992",
    "title":"Crazy Love",
    "subtitle":"Overwhelmed By A Relentless God",
    "contributor1":"Chan, Francis",
    "contributor2":"Yankoski, Danae",
    "contributor3":"",
    "vendor":"David C. Cook",
    "release_date":"20080430",
    "retail":"14.99",
    "binding":"Paperback",
    "product_type":"Books",
    "category1":"Christian Living",
    "category2":"",
    "category3":"",
    "grade_level_start":"",
    "grade_level_end":"",
    "inventory_updated":"20100825 11:25",
    "tn_available":993,
    "tn_onorder":240,
    "nv_available":735,
    "nv_onorder":0,
    "image_small":"http:\/\/www.stl-distribution.com\/covers\/7814\/sm-9781434768513.jpg",
    "image_medium":"http:\/\/www.stl-distribution.com\/covers\/7814\/md-9781434768513.jpg",
    "image_large":"http:\/\/www.stl-distribution.com\/covers\/7814\/lg-9781434768513.jpg"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:49:12.920

看来我的`get_meta_data()`函数有错误。我的 API 提供商告诉我这条线

```
$post_vars = 'api_key='.$api_key.'&item='.$item; 
```

本来应该

```
$post_vars = 'api_key='.$api_key.'&items='.$item; 
```

注意添加了一个“s”。所以，`$json_array`看起来是空的，因为它是空的。我的另一个功能起作用了，因为它不需要像`GetProductMetaBasic`以前那样使用's'。

另外，这条线

```
<td class="center"><?php $item_data = get_meta_data($api_key,$item[0]); echo $item_data['product_type']; ?> 
```

本来应该

```
<td class="center"><?php $item_data = get_meta_data($api_key,$item[0]); echo $item_data[$item[0]]['product_type']; ?></td> 
```

因为，正如样本数据所暗示的那样，数组是多维的。所需值 ( `product_type`) 包含在`$item[0]`数组中。因此，`$item_data['product_type']`不存在。

# r - 何时/如何/在哪里解释默认参数中的 parent.frame？

> ID：15504960
> 
> 赞同：3
> 
> 时间：2013-03-19T16:22:45.623
> 
> 标签：r, environment

说实话，我只是在这里偷懒，但也许有一天有人可以从这里的答案中受益。

假设我定义了一个函数，例如：

```
fn<-function(envir=parent.frame())
{
    #do something with envir
} 
```

我的问题是：我希望成为 envir 的内容是什么？

上下文：我有一个相当长的函数 f1，其中包含对 parent.frame 的调用。现在，我想将该函数的一部分（包含 parent.frame 调用）提取到一个新的辅助函数 f2（然后由 f1 调用），并且我想确保 f1 与以前一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:29:25.343

默认参数[在函数 call 的评估框架内进行评估](http://cran.r-project.org/doc/manuals/r-release/R-lang.html#Argument-evaluation)，从那里`parent.frame()`是调用环境。`envir`因此， 的值将是一个指向`fn`被调用环境的指针。

另外，请亲自尝试一下：

```
debug(fn)
fn()
# debugging in: fn()
# debug at #2: {
# }
Browse[2]> envir
# <environment: R_GlobalEnv> 
```

# objective-c - UICollectionView 在滚动时响应？

> ID：15504970
> 
> 赞同：5
> 
> 时间：2013-03-19T16:22:58.743
> 
> 标签：objective-c, xcode, scroll, uicollectionview, collectionview

我有一个 UICollectionView 填充了一些单元格，我实现了这个方法`- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath` 这就像一个魅力，但它在滚动时不起作用。这是一个问题，因为滚动非常敏感，因此当我的意思是推动一个单元格并调用该方法时，我最终滚动没有结果。

所以我想知道如何解决这个问题并想出了这个：

*   我可以简单地将方法设置为在滚动时响应吗？
*   如果没有 - 我可以简单地让它只有在你使用例如 2 个手指时才会发生滚动？将 2 个动作分开。

提前感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T14:29:07.827

`UICollectionViewCell`当您点击它时会选择a 。水龙头应该很短并且在一个地方。如果你滚动，你可能没有点击右。如果是这种情况，那么在使用 Mail 等内置应用程序时也会发生这种情况。

使用`UICollectionView`a`UITapGestureRecognizer`来识别单元格的选择。此手势识别器不允许在这种情况下可能对您有所帮助的特定设置。

您也许可以将`UIPanGestureRecognizer`2 根手指更改为需要，但您应该真正考虑一下这是否是您想要的。你最好按照苹果的意思使用它，用户已经习惯了。

也就是说，这里是关于集合视图手势支持的文档页面：http: [//developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/IncorporatingGestureSupport/IncorporatingGestureSupport.html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/IncorporatingGestureSupport/IncorporatingGestureSupport.html)

您也许可以使用它来更改`minimumNumberOfTouches`内部使用的属性`UIPanGestureRecognizer`。但同样，我认为你不应该这样做。

# android - 在 C/C++ 中使用 jni 共享库

> ID：15504971
> 
> 赞同：1
> 
> 时间：2013-03-19T16:22:59.253
> 
> 标签：android, c, java-native-interface

我有一个在 jni 下生成的封闭共享库（armeabi）（更精确地使用 ndk）。任何 C/C++ 代码都可以使用这个库的功能吗？（在android编译环境下）。谢谢。

薇薇安

# perl - PackageMaker - 脚本的结果总是失败

> ID：15504977
> 
> 赞同：0
> 
> 时间：2013-03-19T16:23:11.593
> 
> 标签：perl, packagemaker

我向包制造商添加了一个脚本 - 在 Distribution->Requirements 下。我遇到的问题是脚本结果总是错误的（至少从安装程序的角度来看）。我在下面简化了我的脚本。即使这个脚本失败了？我已经从终端执行了这个命令，并且返回值按预期为零。

我正在使用包制造商的版本 3.04。

```
 #!/usr/bin/perl -w
 use strict;
 exit 0; 
```

我也试过返回 1 但结果总是一样的。

有人在需求脚本和包制造商方面取得了成功吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:32:43.213

是否有必要使用 perl 脚本？如果没有，您可以使用 shell 脚本。我使用它并且它有效。

```
#!/bin/sh  
#do your stuff  
exit 0 
```

[您可以在 Packagemaker 中的脚本中](http://macinstallers.blogspot.in/2012/07/scripting-in-installer-packages.html)获得更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T11:37:56.960

你确定脚本没有得到评估吗？我还在需求列表中添加了一个脚本并得到了奇怪的结果。我在 StackOverflow 上的另一篇文章中发现，返回值只是以一种意想不到的方式解释。这是这篇文章：

[PackageMaker“脚本结果”要求永远不会通过](https://stackoverflow.com/questions/5346446/packagemaker-result-of-script-requirement-never-passes)

这为我解决了这个问题。希望能帮助到你！

# powershell - 将参数传递给 Powershell 函数不起作用

> ID：15504980
> 
> 赞同：0
> 
> 时间：2013-03-19T16:23:17.237
> 
> 标签：powershell

```
$backupfolder = "\\server\somefolder1\somefolder2\"
$localpath="C:\Documents and Settings\myname\My Documents\FilestoCopytoServer\folder1\"

foreach ($dir in $localpath)
{
    write-host $dir
    if(test-path $dir.fullname -pathtype container)
        {
            write-host "it's a directory"
            write-host "check if this directory is in the remote machine or not"
            $direxists = test-path $remotepath\$dir -pathtype container
                if($direxists)
                {
                write-host "remote machine has this directory"
                recurseandcopyfiles($dir)

            }
             else
            {
            write-host "directory does not exist so create directory"

            createdir($remotepath,$dir)

            }

    }
    else
    {
        write-host "it's not a container so copy files"
        write-host $dir "and backup folder is " $backupfolder

        backup( $dir,$backupfolder)

      }
}

function backup($source,$destination)
{
write-host "inside backup"
write-host "source is " $source "and destination" is $destination
#this is showing I'm getting following: 
# source is  file1.txt \\server\somefolder1\somefolder2\
} 
```

$localpath 有file1.txt 所以备份函数的第一个参数是file1.txt。函数备份有两个参数，但第一个参数获取两个传递的值。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:48:12.833

问题在于`backup`您可能已经猜到了调用 - 方法的方式。

在 PowerShell 中，您不需要括号，而是用空格“”分隔参数。此外，逗号`,`用于创建数组。

因此，在上面的示例中，您将equal 设置为带有和作为对象`$source`的数组。`$dir``$backupfolder`

尝试：

```
backup $dir $backupfolder 
```

# r - 格式化和操作 R 包“hexbin”中的绘图

> ID：15504983
> 
> 赞同：6
> 
> 时间：2013-03-19T16:23:24.093
> 
> 标签：r, oop, plot, package, s4

我使用包生成一个图`hexbin`：

![在此处输入图像描述](../Images/7d98e852161d34731e99e967f2227330.png)

```
# install.packages("hexbin", dependencies=T)
library(hexbin)

set.seed(1234)
x <- rnorm(1e6)
y <- rnorm(1e6)
hbin <- hexbin(
  x   = x
  , y = y
  , xbin = 50
  , xlab = expression(alpha)
  , ylab = expression(beta)
)

## Using plot method for hexbin objects:
plot(hbin, style = "nested.lattice")

abline(h=0) 
```

这似乎生成了一个 S4 对象 ( `hbin`)，然后我使用`plot`. 现在我想使用 向该图添加一条水平线`abline`，但不幸的是这会产生错误：

> plot.new 尚未被调用

我也不知道如何操纵轴标签的位置（alpha 和 beta 在数字内），更改图例的位置等。

我对 OOP 很熟悉，但到目前为止我还没有弄清楚 plot() 如何处理对象（它是否调用对象的某些方法？）以及如何操作结果图。

**为什么我不能简单地在情节上画一条线？**

**如何操作轴标签？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:49:30.410

`hexbin`使用`grid`图形，而不是`base`. 有一个类似的函数 ，`grid.abline`它可以通过指定斜率和截距在图上画线，但使用的坐标系统令人困惑：

```
grid.abline(325,0) 
```

大致得到你想要的，但这里的截距是肉眼发现的。

您将有更多的运气使用`ggplot2`：

```
library(ggplot2)
ggplot(data,aes(x=alpha,y=beta)) + geom_hex(bins=10) + geom_hline(yintercept=0.5) 
```

![六边形](../Images/1ce30dd84b26804efbdf16a62c0fd878.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:01:08.857

使用格子版本的十六进制 bin - `hexbinplot()`。`panel`你可以添加你的线条，`style`你可以选择不同的六边形可视化方式。检查帮助以`hexbinplot`获取更多信息。

```
library(hexbin)
library(lattice)
x <- rnorm(1e6)
y <- rnorm(1e6)
hexbinplot(x ~ y, aspect = 1, bins=50, 
           xlab = expression(alpha), ylab = expression(beta), 
           style = "nested.centroids",
           panel = function(...) {
             panel.hexbinplot(...)
             panel.abline(h=0)
             }) 
```

![在此处输入图像描述](../Images/0d78868f88f859ccb2c7686fcddd39a7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T22:09:11.983

*我在使用hexbin*库找到很多基本的绘图调整（轴范围、标签等）时遇到了很多麻烦，但我想出了如何将这些点导出到任何其他绘图函数中：

```
hxb<-hexbin(x=c(-15,-15,75,75),
            y=c(-15,-15,75,75),
            xbins=12)

hxb@xcm    #gives the x co-ordinates of each hex tile
hxb@ycm    #gives the y co-ordinates of each hex tile
hxb@count  #gives the cell size for each hex tile

points(x=hxb@xcm, y=hxb@ycm, pch=hxb@count) 
```

您可以将这三个向量输入到您通常使用的任何绘图工具中。通常会调整大小缩放等，但它比顽固的 hexplot 函数要好得多。*我在ggplot2* **stat_binhex**中发现的问题是我无法将十六进制设置为不同的大小......只是不同的颜色。

如果你真的想要六边形，*plotrix*有一个我认为很好的六边形绘图功能。

# mysql - MySQL中的重新索引和碎片整理

> ID：15504990
> 
> 赞同：1
> 
> 时间：2013-03-19T16:23:46.010
> 
> 标签：mysql, innodb

不重新索引数据库的整个概念对我来说是新的。MySQL 是否会自动更新其索引？

我还遇到了 MySQL 中的命令**OPTIMIZE TABLE**。这与重新索引相同还是完成了其他事情？

# ios - 遇到适用于 iOS 的 Google Maps SDK 的叠加层限制

> ID：15504993
> 
> 赞同：0
> 
> 时间：2013-03-19T16:23:51.713
> 
> 标签：ios, maps, google-maps-sdk-ios

SDK 似乎无法处理我们试图在地图上覆盖的 2700 多行路径。尝试使用 750 加载时，它崩溃了。

对这些项目的任何反馈/经验将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:07:22.470

在不知道您的崩溃的具体性质的情况下，很难说。但是，如果通过“路径线”您指的是 GMSPolyLine 构造，那么这可能符合反馈/经验：[GMSPolyLine 非常大的内存峰值](https://stackoverflow.com/questions/15442262/gmspolyline-very-large-memory-spike)。

到目前为止，我们还没有找到解决方法，但是当我们这样做时，我们将更新链接的问题。

（PS：我会将此作为评论发布，但我还没有足够的代表点来这样做。）

# c - 使用显式 openMP 任务分析 OpenMP 程序

> ID：15504997
> 
> 赞同：1
> 
> 时间：2013-03-19T16:24:04.470
> 
> 标签：c, parallel-processing, profiling, scheduled-tasks, openmp

作为我研究的一部分，我正在寻找替代方案来分析具有显式任务的 OpenMP 代码（根据 OpenMP 3.0）。我的主要目标是研究在计划和执行之前任务在全局障碍（例如任务等待）处空闲时产生的开销量。

我研究了使用最新版本的 TAU，它支持 Opari，它反过来检测源代码以生成分析统计信息。不幸的是，由于它检测源代码，这导致程序执行中的大量开销。

像 Gprof 和 PGprof 这样的工具没有提供我正在寻找的细节。我已经尝试过和他们一起测试过。

我正在寻找一种工具，它可以通过征收最小的开销来帮助我分析 OpenMP 程序的任务。我很想研究 HPCToolkit 和 Scalasca，但我不确定它们是否提供对 OpenMP 任务的支持。

寻找方向和你的建议。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:31:44.107

试试[LIKWID](https://code.google.com/p/likwid/) = 就像我知道我在做什么一样。它非常可靠且免费。

# javascript - 展示 关系到

I have a box (a single absolutely positioned

). I also have a series of `<textarea></code> and <code><input type="text">&l 问问题 问问题 2013-03-19T16:24:13.457 186 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. javascriptjqueryjquery-ui 4 3 回答 3 This answer is useful 1 在节目动画结束后定位它，如下所示： $box.show("slow", function() { $text = $(this); $(this).position({ my: "left top", at: "left top", of: $text }); }); 于 2013-03-19T16:33:17.067 回答 This answer is useful 1 Set the elements visibility to hidden instead of setting their display to none. jQuery does not consider visibility: hidden to be a "hidden element". Edit: Also, I'm not sure this is correct. $box.show("slow").position({ Your method position() is occurring before the animation is complete methinks. Try the following instead using the callback function. $box.show("slow", function() { $box.position(); }); 于 2013-03-19T16:26:26.163 回答 This answer is useful 1 我做了一个小提琴，它在 FF/Chrome 中对我来说很好用。但是，我猜您遇到的任何问题都与在 的第一步之前尝试的位置有关show()，此时#box仍然隐藏。 一个简单的解决方法是show().position().hide().show("slow"). 这保证了#box当位置发生时将是可见的，但由于它发生得很快，在它再次隐藏之前你永远不会看到它。然后，您可以花时间展示#box： $("#main-form").on("focus", ":text, textarea", function(){ $text = $(this); $box.show().position({ my: "right top", at: "left top", of: $text }).hide().show("slow"); }); 它还具有让show动画出现在每个新焦点事件上的附加“功能”。 http://jsfiddle.net/C2GHM/1/ 于 2013-03-19T16:39:11.700 回答 Related 2 android - Android USB 权限对话框永远不会出现 0 facebook - Facebook 在删除应用程序后发送授权的签名请求 2 maven - 是否可以使用具有特定修订版的 maven-release-plugin？ 2 javascript - JavaScript 正则表达式空格 14 github - 在 GitHub 存储库上显示 Jenkins 构建的当前状态 2 clojure - 基本 Clojure：如何展平嵌套列表？ 1 azure - Azure 云存储与 Windows Azure 网站 1 android - 在android上处理包含特殊字符的JSON数据的转储和重新加载的正确方法？ 1 ios - 从全屏控制器到标签栏控制器的视图控制器导航模式 5 r - 在 data.frame 中显示重复记录并省略单个记录 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</h1> <blockquote> <p>ID：15504999</p> <p>赞同：0</p> <p>时间：</p> <p>标签：javascript, jquery, jquery-ui</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：1</p> <p>时间：2013-03-19T16:33:17.067</p> </blockquote> <p>在节目动画结束后定位它，如下所示：</p> <pre><code>$box.show("slow", function() { $text = $(this); $(this).position({ my: "left top", at: "left top", of: $text }); }); </code></pre> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：1</p> <p>时间：2013-03-19T16:26:26.163</p> </blockquote> <p>Set the elements visibility to hidden instead of setting their display to none.</p> <p>jQuery does not consider <code>visibility: hidden</code> to be a "hidden element".</p> <p>Edit:</p> <p>Also, I'm not sure this is correct.</p> <pre><code>$box.show("slow").position({ </code></pre> <p>Your method <code>position()</code> is occurring <em>before</em> the animation is complete methinks. Try the following instead using the callback function.</p> <pre><code>$box.show("slow", function() { $box.position(); }); </code></pre> <hr/> <h2>回答 #3</h2> <blockquote> <p>赞同：1</p> <p>时间：2013-03-19T16:39:11.700</p> </blockquote> <p>我做了一个<a href="http://jsfiddle.net/C2GHM/" rel="nofollow">小提琴</a>，它在 FF/Chrome 中对我来说很好用。但是，我猜您遇到的任何问题都与在 的第一步之前尝试的位置有关<code>show()</code>，此时<code>#box</code>仍然隐藏。</p> <p>一个简单的解决方法是<code>show().position().hide().show("slow")</code>. 这保证了<code>#box</code>当位置发生时将是可见的，但由于它发生得很快，在它再次隐藏之前你永远不会看到它。然后，您可以花时间展示<code>#box</code>：</p> <pre><code>$("#main-form").on("focus", ":text, textarea", function(){ $text = $(this); $box.show().position({ my: "right top", at: "left top", of: $text }).hide().show("slow"); }); </code></pre> <p>它还具有让<code>show</code>动画出现在每个新焦点事件上的附加“功能”。</p> <p><a href="http://jsfiddle.net/C2GHM/1/" rel="nofollow">http://jsfiddle.net/C2GHM/1/</a> </p> </body> </html></textarea>`