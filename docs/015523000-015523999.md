# StackOverflow 问答 15523000-15523999

# sql - COALESCE 或 CASE 更高效和/或标准

> ID：15523000
> 
> 赞同：5
> 
> 时间：2013-03-20T12:03:58.110
> 
> 标签：sql, standards, sql-standards

就 x 与 y 相比而言。

*   x 是否更符合 sql 标准？[如有主观请见谅]
*   x 比 y 更有效吗？
*   或者这些脚本完全不同并且可以在不同的上下文中使用？

X

```
 SELECT * 
    FROM   a 
           INNER JOIN b ON
           COALESCE(b.columntojoin, b.alternatecolumn) = a.columntojoin 
```

是的

```
 SELECT * 
    FROM   a 
           INNER JOIN b ON
           (case when b.columntojoin is null then b.alternatecolumn else b.columntojoin end) = a.columntojoin 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T12:05:56.510

`COALESCE`本质上是一个简写的`CASE`语句。

两者**完全相同**。

SQL Server中也有`ISNULL`（在其他 DBMS 中有所不同），但这实际上是一个非标准功能，实际上比`COALESCE`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:06:53.113

在这种情况下，我将使用`COALESCE`( 它提供的级别比`ISNULL`) 而不是`CASE`词干。

该`CASE`语句在这里似乎有点笨重，因为`NULL`无论如何您只检查 s 。

# c# - 仅使用主键填充多表数据集

> ID：15523001
> 
> 赞同：0
> 
> 时间：2013-03-20T12:04:02.197
> 
> 标签：c#, dataset

我想仅使用一个表中的主键来填充多表数据集，并选择链接到该表的所有内容。

这是一个示例（Northwind 2007） [http://img837.imageshack.us/img837/4268/northwind2007.png](http://img837.imageshack.us/img837/4268/northwind2007.png)

如您所见，[Orders] 链接到一个 [Employees] 和多个 [Order Details]，而 [Order Details] 链接到一个 [Product]

我想要的是仅使用一个订单 ID 填写我的数据集（订单、员工、订单详细信息、产品等）。

```
select * from Orders where [Order ID] = parameter_id
select * from [Employees] where ID = Orders.Employee ID
select * from [Order Details] where Order ID = Orders.Order ID
select * from [Products] where Order Details.Product ID = Products.ID 
```

目前，这就是我想要的。如果可能，使用所有外键来确保父/子关系。

# jqgrid - JQGrid 重置过滤器并加载整个数据

> ID：15523007
> 
> 赞同：0
> 
> 时间：2013-03-20T12:04:16.883
> 
> 标签：jqgrid, filter, reset

如何重置 JQGrid 中的过滤器并取回整个数据？

不知何故，我必须创建参数，如：

```
_search false
filters {"groupOp":"AND","rules":[]}
nd      1363780609723
page    1
rows    20
sidx    application_name
sord    asc 
```

我试过下面的代码

```
var grid = $("#list");
grid.jqGrid('setGridParam',{search:false});
var postData = grid.jqGrid('getGridParam','postData');
$.extend(postData,{filters:""});
grid.trigger("reloadGrid",[{page:1}]); 
```

但它会生成类似的参数

```
_search false
filters 
nd      1363780823111
page    1
rows    20
sidx    application_name
sord    asc 
```

我只需要像这样发送过滤器参数但不知道如何

```
filters {"groupOp":"AND","rules":[]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:05:27.807

`filters`我认为空和之间的含义没有区别`{"groupOp":"AND","rules":[]}`。如果您确实需要设置`{"groupOp":"AND","rules":[]}`为过滤器，您可以将行更改`$.extend(postData,{filters:""});`为

```
$.extend(postData, {
    filters: JSON.stringify({groupOp: "AND", rules:[]})
}); 
```

请参阅[答案](https://stackoverflow.com/a/13247251/315935)或[此](https://stackoverflow.com/a/5273385/315935)代码示例。

# matlab - matlab处理长时间序列

> ID：15523013
> 
> 赞同：1
> 
> 时间：2013-03-20T12:04:33.340
> 
> 标签：matlab

我有一个类似于以下内容的数据集：

```
year month  daynum  hour     depth        wtemp
1989    5   136      0          0.01     14.32
1989    5   136      0          0.5      14.32
1989    5   136      0          1        13.52
1989    5   136      0          2        12.31
1989    5   136      0          3        10.16
1989    5   136      0          4        8.61
1989    5   136      0          6        6.86
1989    5   136      0          8        6.03
1989    5   136      0          10       5.45
1989    5   136      1          0.01     13.38
1989    5   136      1          0.5      13.41
1989    5   136      1          1        13.12
1989    5   136      1          2        10.88
1989    5   136      1          3        10.09
1989    5   136      1          4        9.09
1989    5   136      1          6        7.24
1989    5   136      1          8        6.45
1989    5   136      1          10       5.67
1989    5   136      2          0.01     13.2
1989    5   136      2          0.5      13.24
1989    5   136      2          1        13.24
1989    5   136      2          2        11.07
1989    5   136      2          3        10.14
1989    5   136      2          4        9.02
1989    5   136      2          6        7.23
1989    5   136      2          8        6.23
1989    5   136      2          10       5.59
1989    5   136      3          0.01     13.11
1989    5   136      3          0.5      13.15
1989    5   136      3          1        13.11
1989    5   136      3          2        11.26
1989    5   136      3          3        10.25
1989    5   136      3          4         9.2
1989    5   136      3          6         6.99
1989    5   136      3          8         5.96
1989    5   136      3          10        5.5 
```

该数据集包含超过 1,000,000 行数据。当我将数据导入 matlab 时，我留下了这个结构（尽管没有标题）。我想知道如何返回每个单独时间段的最小和最大深度（即第 5 列）的索引？

在这种情况下，答案类似于：

```
1,9
10,18, 
```

`and so on.`

请记住，测量次数和深度数在整个调查期间会有所不同，因此我必须使用年、月、日、小时和深度的信息。

这里的主要目的是建立一个矩阵，其中仅包含每小时在最小和最大深度记录的温度。

到目前为止，我已经尝试过（数据是矩阵的名称）：

```
[~,~,b] = unique(data(:,1:4),'rows');
MaxMin_temp = [abs(accumarray(b,data(:,end),[],@min)), abs(accumarray(b,data(:,end),[],@max))]; 
```

它返回每一天的最小和最大深度的温度。由此，我希望有一种更复杂的方法来获取这些值的整个列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:12:55.650

用于[`datenum`](http://www.mathworks.com/help/matlab/ref/datenum.html)为每个时间段分配一个整数索引。
然后您可以使用[`accumarray`](http://www.mathworks.com/help/matlab/ref/accumarray.html)两次：一次使用`@min`和一次使用`@max`作为“累积”函数来计算深度或温度列的分箱值的最小值（最大值分别）。

# xsl-fo - 参考导向到底有什么作用？

> ID：15523020
> 
> 赞同：6
> 
> 时间：2013-03-20T12:04:53.983
> 
> 标签：xsl-fo, apache-fop

我必须使用 FOP 渲染 pfd，并且一些图像必须旋转。然而，结果看起来并不像我期望的那样。所以，这是我的问题（我不知何故无法找到一个好的文档来为我澄清这个问题）：

如果我定义

```
fo:block-container reference-orientation="90" width="100" height="200" 
```

这会旋转整个容器（有效地导致尺寸为 200x100 的渲染框），还是只会旋转容器的内容（让容器本身以 100x200 的尺寸呈现）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T04:23:25.873

它将旋转整个容器。

这是宽度小于高度然后旋转 90 度的示例...

**XSL-FO**

```
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <fo:layout-master-set>
        <fo:simple-page-master master-name="my-page" page-width="8.5in" page-height="11in">
            <fo:region-body margin="1in" margin-top="1.5in" margin-bottom="1.5in"/>
        </fo:simple-page-master>
    </fo:layout-master-set>
    <fo:page-sequence master-reference="my-page">
        <fo:flow flow-name="xsl-region-body">
            <fo:block-container reference-orientation="90" width="3in" height="7in" background-color="black" padding="4pt">
                <fo:block color="white">Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn't commit. These men promptly escaped
                    from a maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.
                    If you have a problem and no one else can help, and if you can find them, maybe you can hire the A-team.</fo:block>
            </fo:block-container>
        </fo:flow>
    </fo:page-sequence>
</fo:root> 
```

**PDF 输出**（使用 FOP 1.0）

![在此处输入图像描述](../Images/df6a5afedac49d58363fd37d40b8ac14.png)

# java - PrimeFaces如何在p：datatable单元格中表示插入值的标签

> ID：15523021
> 
> 赞同：0
> 
> 时间：2013-03-20T12:04:55.237
> 
> 标签：java, jsf, primefaces, primefaces-extensions

大家好，我有这种情况：

我正在使用 primefaces 数据表`p:datatable`，它从托管 bean 接收列表...请查找此示例：并注意标题“状态”

```
<p:datatable styleClass="table1" id="listTable" var="t" value="{testBean.elements}">
    <p:column headerText="Request No.">
       <h:outputText value="#{t.part_request_no}"></h:outputText>
    </p:column>
    <p:column headerText="Request No.">
       <h:outputText value="#{t.part_request_date}"></h:outputText>
    </p:column>
    <!--please pay attention here -->
    <p:column headerText="status">
        <h:outputText value="#{t.part_status}"></h:outputText>
    </p:column>
</p:datatable> 
```

结果看起来像：这个

```
Request No.  | Request Date | Status |
    1        |   2013-02-02 |   1    |
    2        |   2013-01-01 |   2    |
    3        |  2013-4-23   |   5    | 
```

我的问题是：代表 1、2、5 是一种耻辱。所以我更喜欢查看状态

*   1：新
*   2：拒绝
*   5：取消。

**我需要的结果是这样的**

```
Request No.  | Request Date | Status   |
    1        |   2013-02-02 |   New    |
    2        |   2013-01-01 | Rejected |
    3        |   2013-4-23  | Canceled | 
```

有任何想法吗 ？？？？谢谢你 ....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:58:03.213

有几种方法取决于您希望维护状态代码和相关描述之间的映射的方式和位置。

1.  硬编码在视图中。

    ```
    <h:outputText value="New" rendered="#{t.part_status == 1}" />
    <h:outputText value="Rejected" rendered="#{t.part_status == 2}" />
    <h:outputText value="Cancelled" rendered="#{t.part_status == 5}" /> 
    ```

    * * *

2.  硬编码在地图中。

    ```
    @ManagedBean
    @ApplicationScoped
    public class Data {

        private static final Map<Long, String> STATUSES = createStatuses();

        private static Map<Long, String> createStatuses() {
            Map<Long, String> statuses = new HashMap<Long, String>();
            statuses.put(1L, "New");
            statuses.put(2L, "Rejected");
            statuses.put(5L, "Cancelled");
            return Collections.unmodifiableMap(statuses);
        }

        public Map<Long, String> getStatuses() {
            return STATUSES;
        }

    } 
    ```

    和

    ```
    <h:outputText value="#{data.statuses[t.part_status]}" /> 
    ```

    * * *

3.  在本地化的资源包文件中定义。

    ```
    status.1 = New
    status.2 = Rejected
    status.5 = Cancelled 
    ```

    和

    ```
    <f:loadBundle basename="com.example.i18n.text" var="text" />
    ...
    <c:set var="statusKey" value="status.#{t.part_status}" />
    <h:outputText value="#{text[statusKey]}" /> 
    ```

    * * *

4.  在枚举中定义。

    ```
    public enum Status {

        New(1), Rejected(2), Cancelled(5);

        private int code;

        private Status(int code) {
            this.code = code;
        }

        public static Status of(int code) {
            for (Status status : values()) {
                if (status.code == code) {
                    return status;
                }
            }
            throw new IllegalArgumentException();
        }

        public int getCode() { 
            return code;
        }

    } 
    ```

    在填充模型期间

    ```
    t.setPart_status(Status.of(statusCode)); 
    ```

    然后就在视图中

    ```
    <h:outputText value="#{t.part_status}" /> 
    ```

    * * *

组合也可以。例如枚举中的 i18n 标签。

* * *

**与具体问题无关**，我会处理您的[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)。`part_status`不是有效的属性名称。应该是`partStatus`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:09:43.780

为什么不简单地在 ManagedBean 中创建一个方法来将其转换为您想要的标签？

```
<p:column headerText="status">
    <h:outputText value="#{testBean.getStatusLabel(t.part_status)}"/>
</p:column> 
```

在 ManagedBean 上：

```
public String getStatusLabel(int code){
    // Do your thing here...
} 
```

# wpf - 如何在 wpf xaml 代码中为文本框创建 Enter 事件？

> ID：15523022
> 
> 赞同：-2
> 
> 时间：2013-03-20T12:04:56.930
> 
> 标签：wpf, xaml, enter

我对 wpf 很陌生，最近 3 天开始学习 xaml，当我在 xaml 代码中为我的文本框创建输入事件时，我继续创建 y？如何创建进入 evnet？某些事件没有问题，例如单击、文本更改事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:15:07.930

仅当焦点位于 TextBox 中时用户按 Enter 时才需要它？

如果您的设计是带有命令的 MVVM，您可以做什么：

与 Window.Resources 处于同一级别：

```
<Window.InputBindings>
    <KeyBinding Key="Enter" Command="{Binding EnterCommand}"/>
</Window.InputBindings> 
```

但这会在窗口中的任何位置捕获 Enter 键，而不仅仅是在您关注 TextBox 时...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:16:55.607

您可以使用`TextChanged`事件和处理程序的代码，

```
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
        {

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:17:26.330

WPF 文本框中没有“Enter”事件。您应该考虑其他事件，例如：GotFocus、MouseEnter、MouseDown、GotKeybordFocus 取决于您的需要。

在 xaml 中，您可以这样写：`<TextBox Height="23" Canvas.Left="374" TextWrapping="Wrap" Text="TextBox" Canvas.Top="272" Width="120" GotFocus="TextBox_GotFocus_1"/>`

但使用设计师更容易。属性->事件->双击需要生成的事件进行控制。

# api - Dropbox API (Python) - 文件修订和用户名

> ID：15523031
> 
> 赞同：0
> 
> 时间：2013-03-20T12:05:10.400
> 
> 标签：api, dropbox, revisions

我正在使用 Dropbox API（用于 Python）来列出共享文件夹中的文件。

正如 Dropbox 网站上的“版本历史记录”选项所建议的那样，是否有可能知道这些文件中的任何一个是否已被除我之外**的其他用户**（我与之共享文件夹）通过 API 修改或删除，并获取他的用户名 ？

该`DropboxClient.revisions()`功能提供的信息不告诉哪个用户负责修改...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:27:19.363

没有支持的方式来执行此操作。如果您有两个用户都经过身份验证，则可以进行比较。否则，您没有两个用户都经过身份验证，并且另一个用户的编辑超出了权限。

# css - jQuery 支持是否将 CSS 应用于新创建的元素？

> ID：15523034
> 
> 赞同：0
> 
> 时间：2013-03-20T12:05:19.003
> 
> 标签：css, html-table, css-selectors

这是我的代码：

```
<script type="text/javascript">
$(function(){
    $("input[type='button']").click(function(){
        $("#table tbody").append($("<tr>").append($("<td>").text("new")));
    });

            /*double-color effect*/
    $("#table tbody tr:even").css({"background":"lightgray"});
    $("#table tbody tr:odd").css({"background":"white"});
});
</script>
</head>
<body>
<input type="button" value="click" />
<table id="table">
    <tbody>
        <tr><td>hello</td></tr>
        <tr><td>world</td></tr>
        <tr><td>I am here</td></tr>
    </tbody>
</table>
</body> 
```

我希望新创建的`tr`元素也有双色效果，但他们没有，我想知道jQuery是否可以支持动态应用CSS，就像`live()`或`on()`方法一样？我也可以使用`nth-child`选择器，代码如下：

```
 tr:nth-child(odd)
{
    background:lightgray;
}
tr:nth-child(even)
{
    background:white;
} 
```

但是就像[w3cschools](http://www.w3schools.com/cssref/sel_nth-child.asp)说的一样，不支持IE8及更早的版本，不知道Chrome、Firefox、Safari等其他主流浏览器的更早版本是否也支持这个选择器？那么，有没有一种高度兼容的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:08:20.707

```
$("#table tbody tr:even").css({"background":"lightgray"}); 
```

仅更改现有元素，不添加 css 规则。如果您希望它应用于新元素，则必须在添加元素后再次执行它。只需将它放在您提供给`click`函数的事件处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:11:59.593

修改您的脚本标签，如下所示。

```
<script type="text/javascript">
$(function(){
    $("input[type='button']").click(function(){
        $("#table tbody").append($("<tr>").append($("<td>").text("new")));
        ApplyCss();
    });

   ApplyCss();
});

function ApplyCss() {
            /*double-color effect*/
    $("#table tbody tr:even").css({"background":"lightgray"});
    $("#table tbody tr:odd").css({"background":"white"});
}
</script> 
```

此`ApplyCss()`功能适用于您在 中`css`添加新内容。`tr``table`

# html - 显示：内联属性不起作用

> ID：15523040
> 
> 赞同：1
> 
> 时间：2013-03-20T12:05:26.217
> 
> 标签：html, css

我有一个无序列表，可以在其中水平`display:inline`查看`li`列表，但无法水平查看。这是我的代码：

```
ul li{
min-height:310px;
background:#FFF;
width:330px;
display:inline;
margin-left:15px;
}
<ul>
    <li><div>Something</div></li>
    <li><div>Something</div></li>
    <li><div>Something</div></li>
    <li><div>Something</div></li>
</ul> 
```

注意：我不应该使用`float:left`or `float:right`。所以我更喜欢显示属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:41:56.163

我已经在所有浏览器上对其进行了测试，并且可以正常工作。无论如何，如果您遇到此问题，请添加`display: inline-block;`到您的父元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:07:07.323

这应该有效。

我怀疑你有另一个类是过度的，或者你没有引用所需的类（错字）。

或者，问题出在浏览器设置上？检查它是否在所有浏览器中都失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:12:03.220

我用 ul 测试了你的 css，它工作正常（

*   元素水平显示）。

    也许您有其他规则覆盖了这条规则，因此请尝试使用 !important ：

    ```
    display:inline !important; 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:21:15.157

在铬中，一切看起来都很好

Olivera Kovacevic 指出了很好的*快速*决策可以解决您的问题，但稍后您可能会遇到很多此类风格的问题。

尝试实现[这种风格的ccssing](http://coding.smashingmagazine.com/2012/04/16/a-new-front-end-methodology-bem/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T12:58:29.100

```
#navcontainer ul {
    margin: 0;
    padding: 0;
    list-style-type: none;
    text-align: center;
}

#navcontainer ul li {
    display: inline;
}

#navcontainer ul li a {
    text-decoration: none;
    padding: .2em 1em;
    color: #fff;
    background-color: #036;
}

#navcontainer ul li a:hover {
    color: #fff;
    background-color: #369;
}

<link rel="stylesheet" type="text/css" href="css/firstcss.css" />
<div id="navcontainer">
            <ul>    
                <li>
                    <a href="#">Milk</a>
                </li>
                <li>
                    <a href="#">Eggs</a>
                </li>
                <li>
                    <a href="#">Cheese</a>
                </li>
                <li>
                    <a href="#">Vegetables</a>
                </li>
                <li>
                    <a href="#">Fruit</a>
                </li>
            </ul>
        </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T13:02:19.270

我怀疑你需要`white-space:nowrap`在你的`ul`

`ul { white-space:nowrap;}`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T13:37:15.460

您的代码的问题是`div`元素仍然是块元素。这就是为什么它们不是水平排列的原因。您需要将它们设置为`inline-block`（如果您希望能够为它们设置例如高度或填充），否则您可以为它们设置一个简单`inline`的。

并且 对于您没有任何效果，因为您定义了`min-height`好像您想将其用于您还应该将规则应用于`width``li``li``inline``li``inline-block``li`

**css**

```
ul li{
    min-height:310px;
    background:#FFF;
    width:330px;
    display:inline;
    margin-left:15px;
}

//cross browser inline-block (the order in this rule is important so that it will work cross browser)
li div {
    display: -moz-inline-stack;
    display: inline-block;
    vertical-align: middle;
    *vertical-align: auto;
    zoom: 1;
    *display: inline;
} 
```

**html**

```
<ul>
    <li><div>Something</div></li>
    <li><div>Something</div></li>
    <li><div>Something</div></li>
    <li><div>Something</div></li>
</ul> 
```

# matlab - 图像处理中的二维最小均方滤波器（背景估计）

> ID：15523042
> 
> 赞同：1
> 
> 时间：2013-03-20T12:05:35.017
> 
> 标签：matlab, image-processing, detection, estimation

根据 Mohiy M. Hadhoud 的论文，我编写了一个 Matlab 程序来使用二维 LMS (TDLMS) 自适应算法实现图像背景估计。我用零初始化了权重矩阵 W、估计的输出矩阵 Y 和误差矩阵 e。支持区域为 5*5（窗口大小）。矩阵 D 是期望的输出，其与 Y 的差定义为误差矩阵 (e)。但是，在我运行程序之后，权重 W 和估计输出 Y 都为零。不知道是因为W和Y一开始都是零还是程序有问题。这是我的代码：

```
clear; close all;
X=imread('noisySea.jpg');
[M N]=size(X);
Ns=5; % 5*5 support region
u=5*10^(-8); % step size
Y=zeros(M,N); % predicted image
Y(1:Ns,1:Ns)=X(1:Ns,1:Ns);
D=zeros(M,N);
D(2:M,2:N)=X(2:M,2:N); % D is shifted version of X
e=zeros(M,N); % error matrix
W=zeros(Ns,Ns); % weight matrix
for m=1+floor(Ns/2):M-floor(Ns/2)
    for n=1+floor(Ns/2):N-floor(Ns/2)
        for l=1:Ns
            for k=1:Ns
                Y(m,n)=Y(m,n)+W(l,k)*X(m-floor(Ns/2)+l-1,n-floor(Ns/2)+k-1);
                e(m,n)=D(m,n)-Y(m,n);
                W(l,k)=W(l,k)+u*e(m,n)*X(m-floor(Ns/2)+l-1,n-floor(Ns/2)+k-1);
            end
        end
    end
end
imshow(Y); 
```

内部两次迭代用于计算点 (m,n) 处的 Y 值，而外部两次迭代遍历整个图像。经常使用诸如 m=1+floor(Ns/2) 之类的代码，因为权重矩阵 (5*5) 无法适应边缘处的图像。仅过滤其邻居都可以包含在权重矩阵（或掩码）中的像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T07:06:21.203

您的程序有问题，编写 TDLMS 的正确方法是： • 过滤器：计算标量输出 Y(m,n)， • 从所需的 D(m,n) 中减去输出 Y(m,n) n) 计算标量误差 e(m,n) • 更新滤波器权重

程序内部计算部分的正确做法如下：

对于 m=1+floor(Ns/2):M-floor(Ns/2)

```
for n=1+floor(Ns/2):N-floor(Ns/2) 
```

对于 l=1:Ns

```
 for k=1:Ns

           Y(m,n)=Y(m,n)+W(l,k)*X(m-floor(Ns/2)+l-1,n-floor(Ns/2)+k-1);

        end

    end 
```

e(m,n)=D(m,n)-Y(m,n)；

```
 for l=1:Ns

        for k=1:Ns

         W(l,k)=W(l,k)+u*e(m,n)*X(m-floor(Ns/2)+l-1,n-floor(Ns/2)+k-1);

        end 
    end 
```

结束结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T14:21:16.750

我看到的第一个问题是您对结果、误差矩阵和权重的更新实际上从未更新。第一步是将 X 转换为 double，因此将第二行更改为：

```
X = cast(imread('noisySea.jpg'), 'double'); 
```

在进行此操作之前，请先了解一下并了解正在发生的事情。例如，不管 X 中有什么：

`u*e(m,n)*X(m-floor(Ns/2)+l-1,n-floor(Ns/2)+k-1)`是`0`。

你可以把它分解一下，看看：

u*e(m,n) 并查看它的行为是否适当。

当您引入对 X 的引用时，您最终会将精度降低到“小数”*“大数”为 0 的程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T23:25:36.947

好的，还有几件事。我认为您指的是 Hadhoud 和 Thomas 在 1988 年 5 月号的 IEEE Transactions on Circuits and Systems 上的论文，第 35 卷。第 5 期。我发现至少还有几个错误，但我只看了几分钟的论文.

```
D(2:M,2:N)=X(2:M,2:N); % D is shifted version of X 
```

您实际上并没有在这里进行移位，在论文中，X 和 Y 方向有 1 个像素的移位。

```
D(2:M,2:N)=X(1:M-1,1:N-1); % D is a shiftier version of X 
```

他们还通过从 0 权重矩阵开始在 10 行原始图像上运行算法来初始化权重 W。

我也相信（还不是 100% 确定）你的体重更新是不正确的。您的权重在不断更新，这会在算法中引入一些奇怪的拖尾。根据我对论文的简短阅读，权重仅在您的 n 循环迭代时更新。权重也被缩放，使得它们的总和为 1，这保留了局部平均值。

# android - 从 TextView 链接打开设置

> ID：15523043
> 
> 赞同：1
> 
> 时间：2013-03-20T12:05:39.030
> 
> 标签：android, android-intent

我要链接，一个打开下载，另一个打开网络设置。我自己的链接由这个答案处理：[https ://stackoverflow.com/a/3452944/312161](https://stackoverflow.com/a/3452944/312161)

我尝试对互联网设置做同样的事情：

```
<a href="android.settings.WIRELESS_SETTINGS">internet connection.</a> 
```

但我得到错误：

```
03-20 14:01:17.265: E/AndroidRuntime(21051): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=android.settings.WIRELESS_SETTINGS (has extras) } 
```

也许有人知道如何处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:52:43.557

这是直接不可能的。中的超链接`TextView`只会`ACTION_VIEW`对提供的 URL 进行操作。没有`ACTION_VIEW`打开设置屏幕。

我不清楚为什么您首先从超链接执行此`TextView`操作，而不是使用普通命令 UI 构造，例如操作栏项或`Button`.

尽管如此，欢迎您创建一个指向您自己的活动的超链接，从而启动设置屏幕。

# java - 打包到 Eclipse 中的 jar

> ID：15523046
> 
> 赞同：4
> 
> 时间：2013-03-20T12:05:54.527
> 
> 标签：java, eclipse, jar, package

更新：别担心。用户错误。会删除问题，但不能回答。

我正在尝试使用 eclipse 创建一个包jar，而*不是*可运行的 jar，我可以将其导入另一个项目。

到目前为止，我已经这样做了：

1.  创建一个新项目
2.  在该项目中创建一个包 (pkg.nme.with.dots)
3.  在该包中创建一个类
4.  导出 -> Java -> Jar

生成的 .jar 文件只有一个目录`META-INF`和三个文件`.project`、`.classpath`和`MyClass.class`.

如果我尝试`import pkg.nme.with.dots.MyClass;`我得到一个找不到包的错误，尽管将 jar 的完整路径添加到我的 CLASSPATH 中。

我尝试将 jar 添加为 eclipse 中的外部库，但仍然无法识别。

显然我已经将它导出为无法`import`编辑的格式。如何正确导出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:14:45.493

@trideceth12 我刚刚在我的 Eclipse 中测试了导出一个示例包。我的文件夹结构工作正常。不知道为什么你的工作不正常。您应该检查所有导出设置。这是我的样子，它出口很好。![在此处输入图像描述](../Images/2b415a04f41b386d4e87cd05fcb60f0f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T12:15:52.963

当您使用 eclipse 创建 jar 文件时，选择导出选项，在您的 jar 创建向导中选择您需要的文件夹，然后完成，请参见 [此处](http://www.cs.utexas.edu/~scottm/cs307/handouts/Eclipse%20Help/jarInEclipse.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:09:35.430

看起来您的 Java 源代码仅在默认包中。如果您想使用这种导入语句，请考虑将 jar 文件移动到：

```
pkg/nme/with/dots 
```

# c++ - 将每个 typedef 放在单独的文件中是一种好习惯吗？

> ID：15523048
> 
> 赞同：2
> 
> 时间：2013-03-20T12:05:58.447
> 
> 标签：c++, c, typedef

我在某处读过，将每个`typedef`文件放在单独的文件中很好，但甚至没有解释。

例如像这样：

```
#ifndef _MYTYPEDEF_H
#define _MYTYPEDEF_H
#pragma once

#include <iostream>

typedef std::pair<unsigned short, int>  my_typedef;

#endif //_MYTYPEDEF_H 
```

但是我认为如果我的项目中有例如 50`typedef`秒，那将是一团糟，所以会有 50 个文件供他们使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T12:08:32.923

这只会混淆代码并混淆维护它的人（*通常不是发明这种奇思妙想的人*）。
这对于在开发过程中只看到单个 TU 的开发人员来说只有好处（*如果有的话*），但对于维护它并在开发后看到整个代码库的开发人员来说并不好。
请不要这样做。

# batch-file - dos批处理文件如何进行字符串替换

> ID：15523054
> 
> 赞同：0
> 
> 时间：2013-03-20T12:06:19.413
> 
> 标签：batch-file, dos

嗨，我对 DOS 批处理 shell 脚本非常陌生，我想知道如何进行字符串替换，我有 str1 与 / 我需要用 _（下划线）替换 / 但不是在前面

```
set str1=/a/b/c/d

set str2=%str1:/=_% 
```

返回我 _a_b_c_d 但我需要 a_b_c_d

谢谢，萨纳特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:19:15.727

要从字符串中删除第一个字符，请使用：

```
set str3=%str2:~1% 
```

事实上，您不必使用不同的变量。以下几行工作正常：

```
set str=/a/b/c/d
set str=%str:/=_% 
set str=%str:~1% 
```

# php - PHP 代码错误。html代码给出keya keyb和keyc的值

> ID：15523057
> 
> 赞同：0
> 
> 时间：2013-03-20T12:06:27.563
> 
> 标签：php

php代码错误，此代码不断使用未定义的常量错误..请帮助

```
< ? php
$d = 1;
$a = $_POST[keya];
$b = $_ POST[keyb];
$c = $_POST[keyc];
$d = $a + $b + $c;
echo $d;
 ? > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:07:39.380

```
$d = 1;
$a = $_POST['keya'];
$b = $_POST['keyb'];
$c = $_POST['keyc'];
$d = $a + $b + $c;
echo $d; 
```

您应该在 POST 中使用字符串键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:08:48.647

您需要检查表单是否已提交并添加引号：

```
<?php
if(!empty($_POST)) {
    $d = 1;
    $a = $_POST['keya'];
    $b = $_POST['keyb'];
    $c = $_POST['keyc'];
    $d = $a + $b + $c;
    echo $d;
}
?> 
```

# delphi - delphi - 从框架代码中获取表单类

> ID：15523058
> 
> 赞同：1
> 
> 时间：2013-03-20T12:06:28.753
> 
> 标签：delphi, delphi-xe

如何从框架代码中获取框架所有者表单的类类型，并将该类型转换为 TFormClass？我知道我需要注册表单类，所以我可以用[GetClass](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.GetClass)得到它，但是我卡住了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T12:23:28.460

主机窗体的类类型是这样获取的：

```
HostFormClassType := TFormClass(GetParentForm(Self).ClassType); 
```

在这里，当我写作时，`Self`我把它当作你的框架。尽管您说的是“所有者”，但我怀疑您的真正意思是框架所在的形式。这通常与框架的所有者相同，但并非总是如此。

无需注册任何内容或致电`GetClass`.

唯一的轻微皱纹是它`GetParentForm`可能会返回来自`TCustomForm`而不是`TForm`. 所以上面代码中的转换有可能是不正确的。您可以通过包含运行时测试来解决这个问题。

```
var
  ClassType: TClass;
....
ClassType := GetParentForm(Self).ClassType;
Assert(ClassType.InheritsFrom(TForm));
HostFormClassType := TFormClass(ClassType); 
```

# weblogic - portlet 生产者如何按需启动刷新/推送给消费者（我使用的是 Jdeveloper 11.1.1.6 ADF-JSF）

> ID：15523059
> 
> 赞同：2
> 
> 时间：2013-03-20T12:06:36.217
> 
> 标签：weblogic, portlet, oracle-adf, portal, webcenter

我是 oracle Webcenter portlet 的新手：

我的要求是我的 Portlet Producer 服务于 N 个消费者。每当我的生产者发生变化时，我确实需要刷新或将内容推送给这些消费者。

我的问题是：

1.  如何跟踪我的 portlet-producer 的所有活跃消费者？使用什么技术？
2.  生产者如何与消费者沟通并刷新或推送内容？

我能够通过在javascript（Jquery）中设置时间间隔并向生产者发出ajax请求来刷新消费者（发起消费者端请求）。但我想知道我的制作人如何发起刷新或推送？

我是 Oracle webcenter 的初学者，所以请详细指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:35:17.443

您可以使用 ADF 组件将 Active Data Service 用于服务器端推送，您可以在[此处](http://docs.oracle.com/cd/E15523_01/web.1111/b31974/adv_ads.htm)找到文档。

对于您的第一个问题，您可以通过在应用程序范围内使用一些计数器来跟踪用户的会话。

# javascript - 浏览器之间不一致的 window.onerror 返回 true / false - 任何可用的正确返回值列表？

> ID：15523071
> 
> 赞同：2
> 
> 时间：2013-03-20T12:07:04.423
> 
> 标签：javascript, return, return-value, onerror

我知道如果我们不想调用浏览器 javascript 错误处理程序，window.onerror 应该返回的内容之间存在一些不一致。

由于我们的网站是相当重的 ajax，我们需要确保浏览器的错误处理程序**永远**不会被调用。

我的意思是：

```
window.onerror=function(){
    console.log('error captured');
    return false;
} 
```

显然，“return false”部分因浏览器而异。

有谁知道我们可以在某个地方找到如何处理浏览器到浏览器的列表，比如 quirksmode / caniuse？

或者如果列表相当小，是否有人知道需要返回的值来抑制每个浏览器的错误处理程序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:23:48.383

你有你的工作为你完成。

首先，你`true`从你的`onerror`处理程序返回，而不是`false`......把它想象成浏览器在询问你是否应该停止。

接下来，有一些浏览器的一些版本正好在这个领域。它们有时不像宣传的那样工作，似乎没有人知道为什么。我见过的最聪明的答案是关于调用堆栈大小变得太大......这对我来说听起来不错！

也就是说，这应该可以解决问题：

```
<script>
function stopErrors() {
    return false;
}
window.onerror = stopErrors;
</script> 
```

[来自http://api.jquery.com/error/](http://api.jquery.com/error/)的一些关键点：

> 注意：不应将 jQuery 错误事件处理程序附加到窗口对象。发生脚本错误时，浏览器会触发窗口的错误事件。但是，窗口错误事件接收不同的参数并且具有与传统事件处理程序不同的返回值要求。请改用 window.onerror。

和

> 必须在浏览器触发错误事件之前附加事件处理程序......此外，当页面在本地提供时，错误事件可能无法正确触发；error 依赖于 HTTP 状态码，如果 URL 使用 file: 协议，一般不会触发。

# php - 从函数进行查询

> ID：15523075
> 
> 赞同：2
> 
> 时间：2013-03-20T12:07:16.493
> 
> 标签：php, mysql, function

目前我已经编写了一个函数来检查订单是否已完全支付。在函数中，第二个函数用于确定总订单价格。在第一个函数中，将总订单价格与订单的所有交易进行比较，并以此为基础确定是否支付订单。

下面提到的功能。我正在寻找一种可以将函数更改为单个查询的方法。就像是：

```
SELECT * 
FROM order 
WHERE
  ((Grandtotal - TransactionTotal) <= 0) 
```

这样查询返回，例如，如果已付款，则返回 true，如果未付款，则返回 false。

功能 IsOrderPaid：

```
function IsOrderPaid($order_id){
  $returnvalue = false;
  $ordertotal = CalculateOrderTotal($order_id);

  $sql = "SELECT SUM(amount) AS TransactionTotal FROM order_transaction WHERE order_id='".mysql_real_escape_string($order_id)."' AND status='9'";
  $result = mysql_query($sql) or die(mysql_error());
  $row = mysql_fetch_object($result);

  if(($ordertotal - $row->TransactionTotal) <= 0 ){
    $returnvalue = true;
  }

  return $returnvalue;
} 
```

函数CalculateOrderTotal

```
function CalculateOrderTotal($order_id){
  $sql = "SELECT
            order_id, SUM(total) GrandTotal
          FROM
            (
            SELECT ordering_id AS order_id, SUM(price * quantity) AS total
            FROM order_products
            WHERE order_id = ".mysql_real_escape_string($order_id)."

            UNION ALL
            SELECT ordering_id AS order_id, SUM(price * quantity * -1) AS total
            FROM  rma_products
            WHERE bestelling_id = ".mysql_real_escape_string($order_id)."

            UNION ALL
            SELECT order_id, amount AS total
            FROM order_shipping
            WHERE order_id = ".mysql_real_escape_string($order_id)."

            UNION ALL
            SELECT order_id, amount AS total
            FROM order_service
            WHERE order_id = ".mysql_real_escape_string($order_id)."

            UNION ALL
            SELECT order_id, SUM(amount * -1) AS total
            FROM order_gift
            WHERE order_id = ".mysql_real_escape_string($order_id)."
          )subTable
          WHERE order_id <> 0
          GROUP BY order_id";
  $result = mysql_query($sql) or die(mysql_error());
  $row = mysql_fetch_object($result);

  return $row->GrandTotal;     
} 
```

我知道`mysql_*`已弃用，但这是下一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:22:09.213

这似乎是一个 SQL 问题。看起来您想要获取订单的总额，然后减去交易总额，以确定他们是否已全额付款。你能做这个吗：

*$id = 您的订单编号...*

```
SELECT 
sum(op.price * op.quantity) as order_products_total,
sum(rma.price * rma.quantity) as rma_total,
FROM order 
left join order_products op on ordering_id = order.order_id 
left join rma_products rma on ordering_id  = order.order_id 
WHERE
order.order_id = $id 
```

您可以对所有`left join`表执行此操作（我仅以 order_products 和 rma_products 为例），但您可以对 order_shipping 和其他表执行相同操作。

在您的 PHP 中，您将取回所有总数，并且您可以在那里进行比较语句（仅来自一个查询）。

# zend-framework - 当我们移动到新的 serevr 和显示 404 错误的内页时，ZEND 项目仅加载主页

> ID：15523078
> 
> 赞同：0
> 
> 时间：2013-03-20T12:07:25.217
> 
> 标签：zend-framework

```
 I got an issue in Zend frame work ,could you please help me ? 
```

问题：-我只是尝试在我的客户端服务器中上传现有的工作 zend 项目（它在我的服务器中工作正常），然后客户端服务器我只收到 404 错误页面，除了索引页面所有其他页面都有同样的问题。为了测试，我在内部文件夹中添加了新的 php 文件并进行了测试。它工作正常。但是不支持zend格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:28:59.970

如果我是你，我会检查，`mod_rewrite`然后，如果它仍然不起作用，检查你的 Apache vhost 设置：

```
AllowOverride All 
```

它可能设置为“无”，这会导致这些问题......我在我的 EC2 Ubuntu 实例上遇到了同样的问题。

# extjs - 如何使用输入类型 = 'file' 和 xtype='textfield' 更改“浏览”按钮的名称

> ID：15523080
> 
> 赞同：0
> 
> 时间：2013-03-20T12:07:33.763
> 
> 标签：extjs, extjs3

我们面临一个奇怪的问题，即我们无法使用文件上传字段从“浏览”更改按钮名称。

我们非常需要这个特性来支持多种语言。我们使用 xtype:textfield 和输入类型为“文件”

请帮助我们解决这个问题。我们正在使用 EXTJS 3.4

```
xtype:'textfield'
input type : 'file' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:37:39.917

有一个很好的扩展可以用于此。它在 3.4 的示例中。

[文件上传字段示例](http://dev.sencha.com/deploy/ext-3.4.0/examples/form/file-upload.html)

[FileUploadField.js](http://dev.sencha.com/deploy/ext-3.4.0/examples/ux/fileuploadfield/FileUploadField.js) [fileuploadield.css](http://dev.sencha.com/deploy/ext-3.4.0/examples/ux/fileuploadfield/css/fileuploadfield.css)

[jsFiddle 示例](http://jsfiddle.net/eRdhv/)

```
Ext.onReady(function () {

    new Ext.Viewport({

        layout: 'fit',
        items: [
            {
                xtype: 'form',
                items: [
                    {
                        xtype: 'textfield',
                        fieldLabel: 'Textfield with inputType=file',
                        inputType: 'file'
                    },
                    {
                        xtype: 'fileuploadfield',
                        width: 200,
                        emptyText: 'Select a file',
                        fieldLabel: 'FileUploadField UX',
                        name: 'blah-blah',
                        buttonText: 'Custom Text'
                    }
                ],

                title: 'Form'
            }
        ]
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T04:44:44.530

```
<html>
<head>
</head>
<body>
<form>
<input type=text name=file style="width:60px"> 
<input type=file name=newfile style="display:none">
<input type=button onClick="newfile.click();file.value=newfile.value; " value="import from excel">
</form>
</body>
</html> 
```

# html - 创建这个的最佳/最实用的方法？

> ID：15523084
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:07:42.873
> 
> 标签：html, css, tabular

--注意：我对 CSS 和 html 还是很陌生）--

为了进一步练习我的编码（CSS、HTML），我决定为自己做点小事。屏幕的一部分（html 页面）将被如下所示的小块填充。这些都是相同的大小，但可以有不同的颜色（1 列=1color）和不同的文本（如下所示）。他们还应该允许在其中包含图像。每个小块将是一个不同的链接。

总共可以有超过 50 个（一列最多 5 个）这样的小块，每个块都有不同的文本（大小、重量、（未）大写）或图像和不同的链接。在我的脑海里，我也在考虑添加 Javascript 来与它们交互（如打开链接，甚至添加/删除块）

现在我想知道我会怎么做。我看到两个选项：表格和 div。

两者各有优劣，想请教大家的意见。为什么选择一种方式或另一种方式？我可能忽略的任何其他解决方案？

编辑：我的想法的简短摘要（缺少时间）：

1.  分区：
    *   更容易修改每个 div
    *   用java更容易
    *   更容易修改其中的文本或图像
    *   似乎喜欢我的喜好
    *   编辑块（填充）和侧面块之间的空间需要额外的代码
2.  桌子：
    *   更容易一次制作多个
    *   更清晰的代码
    *   更难修改每个块的文本样式或图像

![例子](../Images/530118b7ca2930ab0cfaee514db95142.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:13:28.730

您可以使用 divs 、带有 css 表的 divs 或普通的旧 html 表。

如果您需要绝对位置和宽度/高度，请使用 div。

如果您需要可以自行扩展的单元格，请使用表格。

css 表很新，我用的不多，所以你必须自己决定。现在构建网页的趋势是使用很少或没有表格的 div。但这取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:35:21.743

最简单的方法就是加载大量浮动的 div。您**永远不**应该使用表格进行内容布局，仅用于应该在表格中显示的内容

例如。

```
float:left;
margin:10px 10px 0 0;
width:50px;
height:50px; 
```

然后，如果它们都是不同的颜色，您可以使用内联或更多类设置样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:29:34.590

如果您打算使它们具有交互性。你绝对应该使用 Divs。它们更容易与 Javascript 一起使用

# c# - 为什么不断删除和重新添加 DrawingVisual 会导致内存使用量不断增加？

> ID：15523089
> 
> 赞同：1
> 
> 时间：2013-03-20T12:07:51.033
> 
> 标签：c#, wpf, .net-4.0, rendertargetbitmap, drawingvisual

我有一个 WPF 程序，它使用 a`Canvas`内的 a `Window`，覆盖成为 a `Graphics_Canvas`，如下所示：

```
class Graphics_Canvas : Canvas
{
    private List<DrawingVisual> visuals = new List<DrawingVisual>();

    protected override int VisualChildrenCount
    {
        get { return visuals.Count; }
    }

    protected override Visual GetVisualChild(int index)
    {
        return visuals[index];
    }

    public void AddVisual(DrawingVisual visual)
    {
        visuals.Add(visual);

        base.AddVisualChild(visual);
        base.AddLogicalChild(visual);
    }

    public bool ContainsVisual(DrawingVisual visual)
    {
        return visuals.Contains(visual);
    }

    public bool HasVisuals
    {
        get { return visuals.Count > 0; }
    }

    public void RemoveAllVisuals()
    {
        for (int i = 0; i < visuals.Count; i++)
        {
            base.RemoveVisualChild(visuals[i]);
            base.RemoveLogicalChild(visuals[i]);
        }

        visuals.Clear();
    }

    public void RemoveLastVisual()
    {
        if (visuals.Count > 0)
        {
            int index = visuals.Count - 1;

            base.RemoveVisualChild(visuals[index]);
            base.RemoveLogicalChild(visuals[index]);
            visuals.Remove(visuals[index]);
        }     
    }

    public void RemoveVisual(DrawingVisual visual)
    {
        base.RemoveVisualChild(visual);
        base.RemoveLogicalChild(visual);
        visuals.Remove(visual);            
    }
} 
```

（我确实是从网上某处得到的，但我不记得前一段时间在哪里了。）

无论如何，该程序允许用户通过用鼠标中键拖动来平移显示在 上的图形`Graphics_Canvas`，这将不断（只要他们继续平移）触发如下所示：

```
 //get the data visual:
            DrawingVisual tempVisual = GetDataDrawingVisual();

            //first clear the current display data:
            myCanvas.RemoveVisual(dataVisual);

            //get the data visual:
            dataVisual = tempVisual;

            myCanvas.AddVisual(dataVisual); 
```

所以我不断删除然后重新添加`dataVisual`.

当我查看内存使用时，我注意到的是，四处移动会导致内存使用增加，虽然它确实再次下降，但它并没有完全恢复到以前的水平。当显示屏上根本没有任何内容时，这一点更加明显，并且持续有效地重新添加任何内容的内存使用量可能会上升到数百 MB，并且在平移停止时再次下降。

作为信息，我应该补充一点，它`GetDataDrawingVisual()`返回 a `Visual`，在其上绘制 a `RenderTargetBitmap`，它本身不会保留在该方法之外。

我的问题是为什么这会导致内存使用量变化如此之大？

目前这更像是一个奇怪的麻烦，但我可以预见，如果可用内存一开始就受到更多限制，这可能是一个问题。

任何见解将不胜感激。

*** 更新 (21/03/2013) ***

通过对 的试验`Graphics_Canvas`，似乎以下方法对未释放的内存量产生了相当大的影响：

```
protected override Visual GetVisualChild(int index)
{
    return visuals[index];
} 
```

如果我只是返回 a`new DrawingVisual()`作为测试，那么在重新绘制结束后，内存几乎可以恢复到原来的位置。

但是，删除这个方法只是意味着`Canvas`不会运行，我会得到一个错误。可能是.NET 在幕后某个地方引用了`Visual`从这个方法返回的内容，然后没有取消引用它？我该如何排序？（注意：我从未在我的代码中显式调用此方法，它是从其他地方调用的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:40:05.930

我认为您的内存使用量变化如此之大的原因是[垃圾收集器](http://msdn.microsoft.com/en-us/library/ee787088.aspx)没有立即启动。因此，当您拖动对象时，会增加内存使用量，直到它运行为止。

您可以通过执行以下操作强制进行垃圾收集：

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

这样你就肯定知道了。

关于为什么你的记忆没有一路回溯：也许你保留了对一些视觉效果的引用，而那些没有被收集？也许程序其他部分的某些东西正在建立内存？

您可能有内存泄漏，您可以查看这篇关于[WPF 性能和 .NET Framework Client Profile的文章](http://blogs.msdn.com/b/jgoldb/)

# haskell - haskell - 翻转修复/修复

> ID：15523093
> 
> 赞同：10
> 
> 时间：2013-03-20T12:07:58.850
> 
> 标签：haskell, functional-programming, fixpoint-combinators

```
>>>flip fix (0 :: Int) (\a b -> putStrLn "abc")
Output: "abc" 
```

这是使用的简化版本`flip fix`。
我在一些可能来自谷歌技术谈话或其他谈话的 youtube 视频中看到了这种使用方式。

有人可以给我一些指针（不是一些内存地址，谢谢！）到底`fix`是什么。我从官方网站上的文档中知道一般定义。而且我在互联网上浏览了很多东西，只是找不到一个全面且易于理解的答案。

对我`flip fix`来说就像一个谜。在那个特定的函数调用中实际发生了什么？

顺便说一句，我只是在 2 个月前才拿起 Haskell。而且我数学不是很好:(

* * *

这是完成该演示的人共享的完整代码，如果有人感兴趣的话：

（哦，这里是解释游戏`mastermind` [Click](http://en.wikipedia.org/wiki/Mastermind_%28board_game%29)的 wiki 链接）

```
module Mastermind where

import Control.Monad
import Data.Function
import Data.List
import System.Random

data Score = Score
  { scoreRightPos :: Int
  , scoreWrongPos :: Int
  }
  deriving (Eq, Show)

instance Read Score where
  readsPrec _ r = [ (Score rp wp, t)
                  | (rp, s) <- readsPrec 11 r
                  , (wp, t) <- readsPrec 11 s
                  ]

calcScore :: (Eq a) => [a] -> [a] -> Score
calcScore secret guess = Score rightPos wrongPos
  where
    rightPos    = length [() | (a, b) <- zip secret guess, a == b]
    wrongPos    = length secret - length wrongTokens - rightPos
    wrongTokens = guess \\ secret

pool :: String
pool = "rgbywo"

universe :: [String]
universe = perms 4 pool

perms :: Int -> [a] -> [[a]]
perms n p = [s' | s <- subsequences p, length s == n, s' <- permutations s]

chooseSecret :: IO String
chooseSecret = do
  i <- randomRIO (0, length universe - 1)
  return $ universe !! i

guessSecret :: [Score] -> [String]-> [String]
guessSecret _      []    = []
guessSecret ~(s:h) (g:u) = g : guessSecret h [g' | g' <- u, calcScore g' g == s]

playSecreter :: IO ()
playSecreter = do
  secret <- chooseSecret
  flip fix (0 :: Int) $ \loop numGuesses -> do
    putStr "Guess: "
    guess <- getLine
    let
      score       = calcScore secret guess
      numGuesses' = numGuesses + 1
    print score
    case scoreRightPos score of
      4 -> putStrLn $ "Well done, you guessed in " ++ show numGuesses'
      _ -> loop numGuesses'

playBoth :: IO ()
playBoth = do
  secret <- chooseSecret
  let
    guesses     = guessSecret scores universe
    scores      = map (calcScore secret) guesses
    history     = zip guesses scores
  forM_ history $ \(guess, score) -> do
    putStr "Guess: "
    putStrLn guess
    print score
  putStrLn $ "Well done, you guessed in " ++ show (length history)

playGuesser :: IO ()
playGuesser = do
  input <- getContents
  let
    guesses     = guessSecret scores universe
    scores      = map read $ lines input
    history     = zip guesses scores
  forM_ guesses $ \guess -> do
    putStrLn guess
    putStr "Score: "
  case snd $ last history of
    Score 4 0 -> putStrLn $ "Well done me, I guessed in " ++ show (length history)
    _         -> putStrLn "Cheat!" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T12:39:27.223

`fix`是[定点算子](http://en.wikipedia.org/wiki/Fixed-point_combinator)。正如您可能从它的定义中知道的那样，它计算函数的不动点。这意味着，对于给定的函数`f`，它会搜索一个满足 的`x`值`f x == x`。

# 如何为任意函数找到这样的值？

我们可以将`x`其视为无限项的结果`f (f (f ... ) ...))`。显然，由于它是无限的，`f`在它前面加上并不会改变它，所以`f x`将与 相同`x`。当然，我们不能表达一个无限的术语，但我们可以定义`fix`为`fix f = f (fix f)`，它表达了这个想法。

# 这有意义吗？

它会终止吗？是的，它会的，但这只是因为 Haskell 是一种惰性语言。如果`f`不需要它的参数，它不会评估它，所以计算将终止，它不会永远循环。如果我们调用`fix`一个总是使用其参数的函数（它是严格的），它将永远不会终止。所以有些函数有一个固定点，有些没有。Haskell 的惰性求值确保我们计算它，如果它存在的话。

# 为什么`fix`有用？

它表示递归。任何递归函数都可以用 来表示`fix`，而无需任何额外的递归。所以`fix`是一个非常强大的工具！假设我们有

```
fact :: Int -> Int
fact 0 = 1
fact n = n * fact (n - 1) 
```

我们可以使用以下方法消除递归`fix`：

```
fact :: Int -> Int
fact = fix fact'
  where
    fact' :: (Int -> Int) -> Int -> Int
    fact' _ 0 = 1
    fact' r n = n * r (n - 1) 
```

在这里，`fact'`不是递归的。递归已移至`fix`. 这个想法是`fact'`接受一个函数作为它的第一个参数，如果需要，它将用于递归调用。如果您`fix fact'`使用 的定义进行扩展`fix`，您会发现它与原来的`fact`.

因此，您可以拥有一种仅具有原始`fix`运算符并且不允许任何递归定义的语言，并且您可以使用递归定义来表达您可以表达的一切。

# 回到你的例子

让我们看看`flip fix (0 :: Int) (\a b -> putStrLn "abc")`，它只是`fix (\a b -> putStrLn "abc") (0 :: Int)`。现在让我们评估一下：

```
fix (\a b -> putStrLn "abc") =
(\a b -> putStrLn "abc") (fix (\a b -> putStrLn "abc")) =
\b -> putStrLn "abc" 
```

所以整个表达式计算为`(\b -> putStrLn "abc") (0 :: Int)`which is just `putStrLn "abc"`。因为函数`\a b -> putStrLn "abc"`忽略了它的第一个参数，所以`fix`从不递归。它实际上在这里仅用于混淆代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T12:28:54.410

这只是编写递归 lambda 的一种有趣方式，我可以想到这样做的两种可能性：

*   程序员想迷惑新手。
*   他来自一种对递归更严格的语言（比如一些 LISP，或者可能是 ML？）

您可以更清晰地重写代码，例如：

```
 loop secret 0
where
    loop secret numGuesses = do
         putStr "Guess: "
         guess <- getLine
         let
             score       = calcScore secret guess
             numGuesses' = numGuesses + 1
         print score
         case scoreRightPos score of
           4 -> putStrLn $ "Well done, you guessed in " ++ show numGuesses'
           _ -> loop secret numGuesses' 
```

不同之处在于您必须`secret`手动传递，这可以通过递归 lambda 避免（这可能是使用 编写它的另一个原因`fix`）

为了更深入地了解修复，请搜索“y-combinator”

# visual-studio-2010 - Visual Studio的解决方案资源管理器中缺少SVN

> ID：15523095
> 
> 赞同：1
> 
> 时间：2013-03-20T12:08:03.390
> 
> 标签：visual-studio-2010, svn, tortoisesvn

我已经设置了 svn 并且它工作正常，但我无法从我的 Visual Studio 解决方案资源管理器中找到它，但我可以轻松地从本地驱动器中的项目文件夹提交和更新我的解决方案。有人对我缺少什么有更好的了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:14:05.883

TortoiseSVN 默认不与 Visual Studio 集成（请参阅[本文](http://tortoisesvn.net/visualstudio.html)了解如何启用集成）。您应该考虑使用像[AnkhSVN](http://ankhsvn.open.collab.net/)或[VisualSVN](http://www.visualsvn.com/)这样的 Visual Studio 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:17:11.030

看起来您错过了 Visual Studio 没有本机 Apache Subversion 支持的事实。如果您已经使用 TortoiseSVN，您可能需要考虑[VisualSVN](http://www.visualsvn.com/visualsvn/)扩展，我强烈建议您试一试。另一个选项是[AnkhSVN](http://ankhsvn.open.collab.net/)插件。

# linq - 使用 LINQ 连接两个列表

> ID：15523097
> 
> 赞同：10
> 
> 时间：2013-03-20T12:08:07.507
> 
> 标签：linq

我有两个列表 list1 和 list2

List1 包含

```
1   a
2   b
3   c
4   d 
```

List2 包含

```
3   c
4   d
5   e 
```

我想要使​​用 LINQ 的以下列表

```
1   a
2   b
3   c
4   d
5   e 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T12:09:58.303

```
List1.Concat(List2.Where(l2 => !List1.Contains(l2))).ToList() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-18T06:07:26.033

由于我在这里看不到这个答案，所以我将其发布...

将两个列表合并在一起时删除重复项的最佳方法是[Enumerable.Union](https://msdn.microsoft.com/en-us/library/bb358407(v=vs.110).aspx "可枚举联合")：

```
var foo = new List<char> { 'a', 'b', 'c', 'd' };
var bar = new List<char> { 'c', 'd', 'e' };

var result = foo.Union(bar).ToList(); 
```

其余的答案都有效，但 Linq 有一个内置的方法来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:19:26.987

```
var Lst = List1.Concat(List2.Where(l2 => List1.All(x => x.Id != l2.Id))).ToList(); 
```

# android - GPS 位置在设备上为空，但在模拟器上有效

> ID：15523098
> 
> 赞同：0
> 
> 时间：2013-03-20T12:08:12.133
> 
> 标签：android

我正在我的设备上测试以下代码，这给了我`location`object `null`。我的设备上已激活 gps，但即便如此，它也没有给我位置。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        lm = (LocationManager) getSystemService(LOCATION_SERVICE);
        l = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (l==null) {
            Toast.makeText(getBaseContext(), "Location is null", 300).show();
        }
    } 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.geocoding"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.geocoding.Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

帮助将被appriciated :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:40:37.623

您的代码假定创建位置是已知的。大多数时候，它会是错误的。正确的代码应该将 LocationListener 注册到 LocationManager，并等待一段时间得到回复。每次时间可能不同，取决于您在等待什么样的位置。将位置移动到 onResume() 可能会有所帮助，也许到那时，它已经有更高的机会可用。但是，如果您的应用程序值得使用，请使用异步调用并等待您的回复。

请参阅[http://developer.android.com/training/basics/location/currentlocation.html](http://developer.android.com/training/basics/location/currentlocation.html)

# php - PHP simplehtmldom 添加属性

> ID：15523099
> 
> 赞同：1
> 
> 时间：2013-03-20T12:08:14.123
> 
> 标签：php, dom, simple-html-dom

对于一个项目，我需要抓取一个页面（互联网上的任何页面）并对其进行操作。我正在为此使用 simplehtmldom（[在此处找到](http://simplehtmldom.sourceforge.net/)），因为它很容易并且像魅力一样工作..主要是..我需要为某些元素设置一个类属性，其中一些确实已经有一个类属性，其中一些没有不。根据我发现的[这篇文章](http://grinninggecko.com/php-simple-html-dom-parser/)，您可以通过以下方式添加属性：

```
$value = $e->attr['data-role']; 
```

不幸的是，这对我不起作用。以下代码给出了这些错误：

```
if(!isset($elem->class))
{
    $elem->attr['class'] = "classname";
}
else
{
    $elem->class = $elem->class . " classname";
}

Notice: Undefined offset: 2 in simplehtmldom.php on line 483
Notice: Undefined offset: 2 in simplehtmldom.php on line 488
Notice: Undefined offset: 2 in simplehtmldom.php on line 494 
```

在 simplehtmldom 中是以下内容：

```
function makeup()
{
    // text, comment, unknown
    if (isset($this->_[HDOM_INFO_TEXT])) return $this->dom->restore_noise($this->_[HDOM_INFO_TEXT]);

    $ret = '<'.$this->tag;
    $i = -1;

    foreach ($this->attr as $key=>$val)
    {
        ++$i;
            // skip removed attribute
        if ($val===null || $val===false)
            continue;
/* 483 */   $ret .= $this->_[HDOM_INFO_SPACE][$i][0];
        //no value attr: nowrap, checked selected...
        if ($val===true)
            $ret .= $key;
        else {
/* 488 */       switch ($this->_[HDOM_INFO_QUOTE][$i])
            {
                case HDOM_QUOTE_DOUBLE: $quote = '"'; break;
                case HDOM_QUOTE_SINGLE: $quote = '\''; break;
                default: $quote = '';
            }
/* 494 */   $ret .= $key.$this->_[HDOM_INFO_SPACE][$i][1].'='.$this->_[HDOM_INFO_SPACE][$i][2].$quote.$val.$quote;
        }
    }
    $ret = $this->dom->restore_noise($ret);
    return $ret . $this->_[HDOM_INFO_ENDSPACE] . '>';
} 
```

我很难弄清楚为什么它不起作用。自从写这篇文章以来，它可能已经改变了，还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:17:57.700

原来我问这个问题有点太早了。我找到[了这个页面](http://simplehtmldom.sourceforge.net/manual_api.htm#camel)（API 参考），它告诉我们我们也可以使用以下 W3C 标准：

```
$e->setAttribute ( $name, $value ) 
```

所以而不是

```
$elem->attr['class'] = "classname"; 
```

你可以做

```
$elem->setAttribute("class","classname"); 
```

如果其他人遇到此问题并错过 API 参考页面，我会保留问题并回答。

# google-maps-api-3 - google map API v3 点击时更改标记图标？

> ID：15523100
> 
> 赞同：20
> 
> 时间：2013-03-20T12:08:15.370
> 
> 标签：google-maps-api-3

按照谷歌文档更改标记图标很容易。但是我被卡住了，我不知道单击标记时如何更改图像？

到目前为止我的代码：

```
<script>
  function initialize() {

    var latlngPos = new google.maps.LatLng(<?php echo $event_google_map_coordinates; ?>);

    var mapOptions = {
      zoom: 16,
      center: latlngPos,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('googlemap_event'),
      mapOptions);

    var marker = new google.maps.Marker({
      position: latlngPos,
      map: map,
      //animation: google.maps.Animation.BOUNCE,
      icon: '<?= get_bloginfo("template_url"); ?>/images/marker.png'
    });

    var infowindow = new google.maps.InfoWindow({
      position: latlngPos,
      maxWidth: 200,
      content: "<h3><?php the_title(); ?></h3><?php if ($event_address_meta) {_e($event_address_meta);} ?>"
    });

    //open onclick
    google.maps.event.addListener(marker, 'click', function() {
      infowindow.open(map);
    });

    //open infowindow onload
    //infowindow.open(map);

  }

function loadScript() {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src = 'http://maps.googleapis.com/maps/api/js?key=AIzaSyCK3XUMWOH0GIiuj3VeprakKZXoo_nDV08&sensor=false&' +
    'callback=initialize';
  document.body.appendChild(script);
}

window.onload = loadScript; < /script> 
```

```
<div id="googlemap_event"></div> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-20T12:27:00.203

试试这个。

```
//open onclick
   google.maps.event.addListener(marker, 'click', function() {
    marker.setIcon("Your Image");                                    
    infowindow.open(map);
    }); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T12:38:53.320

您需要在点击事件中设置标记图标。

```
google.maps.event.addListener(marker, 'click', function() {
          infowindow.open(map);
          //Change the marker icon
          marker.setIcon('https://www.google.com/mapfiles/marker_green.png');
     }); 
```

这是一个例子：[jsfiddle](http://jsfiddle.net/bryan_weaver/scSMr/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-12-21T17:01:45.743

我已经修改了以前的小提琴并启用取消选择标记。

[http://jsfiddle.net/zsw76pq9/](http://jsfiddle.net/zsw76pq9/)

```
google.maps.event.addListener( map,'click', function () {
    infoWindow.close();

    //Change the marker icon
    marker.setIcon('https://www.google.com/mapfiles/marker_black.png');
}); 
```

# bash - cURL 需要永远进行 FTP 上传

> ID：15523101
> 
> 赞同：1
> 
> 时间：2013-03-20T12:08:16.963
> 
> 标签：bash, curl, upload, ftp, cygwin

我在 bash 中编写了一个较长的部署脚本，我在 cygwin 下运行。如果部署到远程服务器，脚本将使用 curl 将生成的应用程序上传到 FTP 服务器，如下所示：

```
if [ $where == "remote" ]
then
    for i in `find deploy/ -type f`; do
        curl.exe -u "***:***" -T $i "ftp://address.co.uk/public_html/java/desktop/$i"
    done
fi 
```

问题有时是 curl 无法完成上传，只是坐在那里阻止其他下载显示

```
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:--  0:15:14 --:--:--     0 
```

这个特定的文件是~2,5KB，所以它不应该花那么长时间......我必须终止脚本并重新开始......直到它们都正确上传。

我尝试添加以在后台运行它，但我在所有上传开始的地方`&`得到了很多权利。`curl: (28) Timeout was reached`

如何修复我的脚本以毫无问题地上传文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:25:10.697

试试这些 curl 选项来控制它的行为。

`connect-timeout <secs>`设置连接尝试失败前的秒数。

`--speed-time``--speed_limit`设置在 curl 中止传输之前允许的比每秒字节数慢的传输秒数。

`--speed_limit` 以字节/秒为单位设置限制，低于该限制 curl 将中止传输。

```
 curl --connect_timeout <seconds> --speed-time <secs> --speed_limit <speed in bytes/sec> 
```

`-v`提供有关传输的更多信息，如果您试图找出传输如此缓慢的原因，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:24:29.017

猜测一下，FTP 连接或所有连接在您的目标服务器上都受到速率限制。

因此，某些文件上传的延迟是由于 SYN 数据包被丢弃。

我建议您运行一个 FTP 会话并使用它来递归上传或在`curl`.

理想情况下，您的目标服务器将支持`rsync`over `ssh`：这将是最佳带宽。

* * *

**更新**
快速搜索后，有一个命令行程序称为[`lftp`](http://lftp.yar.ru/)提供 ftp 镜像功能。

改编自[此处](http://sina.salek.ws/content/how-mirrorsync-remote-ftp-folder-local-folder)的指南，这样的事情应该可以解决问题：

```
#!/bin/bash
HOST='address.co.uk'
USER='myuser'
PASS='mypass'
TARGETFOLDER='/public_html/java/desktop/'
SOURCEFOLDER='deploy/'

lftp -f "
open $HOST
user $USER $PASS
lcd $SOURCEFOLDER
mirror --reverse --delete --verbose $SOURCEFOLDER $TARGETFOLDER
bye
" 
```

我建议您`--delete`在确定自己的论点正确之前不要这样做！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:39:50.200

感谢您的帮助，我选择了[wput](http://wput.sourceforge.net/)：

```
./wput/wput.exe -N deploy "ftp://****:****@address.co.uk/public_html/java/desktop/" 
```

# php - 在图像上找到位置 - 数学方法？

> ID：15523104
> 
> 赞同：1
> 
> 时间：2013-03-20T12:08:24.133
> 
> 标签：php, math, image-processing, gd

我需要在图像上找到一个预定义区域并将其替换为另一个图像（只需嵌入后者）。预定义的点将是一个可变大小的矩形区域，该区域填充有先前商定颜色的纯色背景。

关于如何实现这一目标的任何建议？

我想我可以通过循环并逐行逐个像素地遍历图像来找到指定颜色的第一个像素，但我觉得这不是最有效的解决方案。由于这个地方应该比较大，所以我也考虑过图片（请看下面的附件）。

![寻找地点](../Images/73f0436b323febeb82a784efc1fd3f7b.png)

所以我需要帮助来定义这些循环。我相信我将不得不为此使用一些数学函数。

例如，如果大图是方形的，对角线环（黄色*EF*线）将使用简化的线性函数`y=x`( `y=1x+0`)，但它不太可能真的是方形的。所以我将不得不使用扩展的全线性函数`y=kx+b`，`k`它与矩形大小有关（我认为`k=height/width`），并且`b`只是 0。所以循环看起来像：

```
$k = 1080/1920;
for ( $x=1920; $x>0; $x-- ) {
    $y = $k*$x;
} 
```

但那是黄色的，我猜是最简单的。现在，我如何定义其他人？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:12:16.197

获取您正在搜索的子图像的片段并在大图像中搜索它。

您可以使用 ImageMagick 的子图像搜索：

```
compare -verbose -dissimilarity-threshold 0.1 -subimage-search subimage.jpg bigimage.jpg 
```

[在此处](http://www.imagemagick.org/script/compare.php)、[此处](http://www.multipole.org/discourse-server/viewtopic.php?f=1&t=22057)和[此处](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=18334)阅读有关此内容的更多信息。

它要么告诉你“TooDissimilar”，要么告诉你子图像的 x,y 位置。

# javascript - 删除 html 标签但保留断线

> ID：15523113
> 
> 赞同：0
> 
> 时间：2013-03-20T12:08:52.440
> 
> 标签：javascript, jquery, html, ckeditor

我们需要用 html 标记和没有（对于邮件）组成文本所以我有 ckeditor 用 html 标记组成文本，但是当我用脚本删除标记时，所有断线都消失了，因为脚本会去除`<p>`标签。我只剩下一长串文本而不是下降布局。有人知道我如何保持断线吗？

```
function strip(){
        var html = CKEDITOR.instances.Maintext.getData();
        var text = $(html).text(); 
        document.getElementById('nohtmltext').value = text;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:36:36.257

我从给出的答案中找到了一个解决方案。

```
function strip(){
            var html = CKEDITOR.instances.Maintext.getData();
            html = html.replace(/<p>/g,'');
            html = html.replace(/<\/p>/g,'\n\n');
            var tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            var text = $(tempDiv).text(); 
            document.getElementById('nohtmltext').value = text;
        } 
```

我知道这不是我写过的最漂亮的代码，但它正是我想要的。谢谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:18:18.660

一种解决方案是用“\n”替换所有“p-tags”。

```
html.replace('<p>','').replace('</p>','\n\n').text(); // not tested 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:01:46.087

错误的：

```
function strip(){
        var html = CKEDITOR.instances.Maintext.getData();
        var text = $(html).text(); 
        document.getElementById('nohtmltext').value = text;
} 
```

好的：

```
function strip(){
    var html = CKEDITOR.instances.Maintext.getData();
    document.getElementById('nohtmltext').innerHTML = html;
} 
```

# jquery - 选择冻结使用 JQuery .html() 和 JSON 加载大量数据

> ID：15523117
> 
> 赞同：0
> 
> 时间：2013-03-20T12:08:59.740
> 
> 标签：jquery, json

我的代码：

```
$.getJSON("registro/backend.php?action=list&id="+sel.value, function(data){

            var options = [];

            for (var i=0; i<data.rows.length; i++) {
                options += '<option value="' + data.rows[i].id + '">' + data.rows[i].name + '</option>';
            }
            $("#select").html(options);
        }) 
```

当要加载的数据太大（大量以 JSON 编码的数据）时，此代码会冻结选择和导航器。

有没有办法在后台加载或提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:12:08.460

尝试使用 $.each 函数...

```
$.getJSON("registro/backend.php?action=list&id="+sel.value, function(response){

                var options = [];

                $.each(response,function(index,data){
                    options += '<option value="' + data.rows[index].id + '">' + data.rows[index].name + '</option>';
                }
                }
                $("#select").html(options);
            }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:15:27.867

您应该将数组的长度存储在循环中，并存储变量以减少对数组的访问。

```
for (var i=0,len=data.rows.length; i<len; i++) {
var row = data.rows[i];
options += '<option value="' + row.id + '">' + row.name + '</option>';
            } 
```

参考：[http ://browserdiet.com/#use-for-instead-of-each](http://browserdiet.com/#use-for-instead-of-each)

# c# - 如何直接插入标识列的值？

> ID：15523118
> 
> 赞同：0
> 
> 时间：2013-03-20T12:09:02.033
> 
> 标签：c#, asp.net, database

我正在尝试通过此 UI 将值插入数据库。下面是代码。现在我希望 ID 列直接取值（它是主键，我还在该列上设置了 Identity）。接下来，应将所有其他值插入到数据库中的相应列中。现在发生的事情是，名称文本框中的值转到 ID 列，它会导致一个错误的错误。我怎样才能达到我想要的？

![在此处输入图像描述](../Images/f80a06ccc4376f5f1aed70186afb9bce.png)

```
 protected void btnRegister_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        string strQuery = "Insert into AUser values ('"+ txtName.Text +"', '"+ txtEmailAddress.Text +"', '"+txtPassword.Text +"', '"+ ddlMobile.Text +"', '"+ ddlMobile.Text +"', '"+ txtMobileNumber.Text +"' )";
        SqlCommand Cmd = new SqlCommand(strQuery,con);
        con.Open();
        Cmd.ExecuteNonQuery(); 
```

![在此处输入图像描述](../Images/378343030e37f8998e6e25f2b9021c28.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:15:43.430

**新人写这样的代码！**

始终使用[*参数化查询*](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。此代码对*[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)*攻击开放。

```
SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);      
string strQuery = "Insert into AUser(Name, Email, Password, CountryCode, Mobile, MobileNumber) values (@Name, @EmailAddress, @Password, @Mobile, @MobileNumber)";
SqlCommand Cmd = new SqlCommand(strQuery,con);
cmd.Parameters.AddWithValue("@Name", txtName.Text);
cmd.Parameters.AddWithValue("@EmailAddress", txtEmailAddress.Text);
cmd.Parameters.AddWithValue("@Password", txtPassword.Text);
cmd.Parameters.AddWithValue("@Mobile", ddlMobile.Text);
cmd.Parameters.AddWithValue("@MobileNumber", txtMobileNumber.Text);
con.Open();
Cmd.ExecuteNonQuery(); 
```

*顺便说一句*`ddlMobile.Text`，您在字符串命令中添加了两次。那可能是错误的使用。

您也没有使用`CountryCode`列..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:13:57.220

你应该像这样构造你的 sql 语句：

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

其中值应通过 SQL 参数填充。

另外，如果您想直接在 ID 列中取值，为什么首先将其设置为 Auto？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:11:40.363

您的查询必须是这样的

```
 string strQuery = "Insert into AUser(Name,Email,Password,CountryCode,Mobile) values ('"+ txtName.Text +"', '"+ txtEmailAddress.Text +"', '"+txtPassword.Text +"', '"+ ddlMobile.Text +"', '"+ ddlMobile.Text +"', '"+ txtMobileNumber.Text +"' )"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T12:12:47.437

作为最佳实践，您应该始终在插入子句中命名您的字段：

```
string strQuery = "Insert into AUser(name,email,password,countrycode,mobile) values ('"+ txtName.Text +"', '"+ txtEmailAddress.Text +"', '"+txtPassword.Text +"', '"+ ddlMobile.Text +"', '"+ ddlMobile.Text +"', '"+ txtMobileNumber.Text +"' )" 
```

这样，如果您向表中添加一个字段，您就不会破坏您的代码......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T12:14:59.847

获得该权利的最简单方法是在插入查询中指定列名

```
Insert into AUser (Name, Email, [Password], CountryCode, Mobile)values (@Name, @Email,@Password, @CountryCode, @Mobile) 
```

你目前的sql容易受到sql注入攻击。

像这样添加参数值

```
SqlCommand Cmd = new SqlCommand(strQuery,con);
Cmd.Parameters.AddWithValue("@Name", txtName.Text);
...
con.Open();
Cmd.ExecuteNonQuery(); 
```

# eclipse - Eclipse：在检查窗口中启用换行

> ID：15523122
> 
> 赞同：0
> 
> 时间：2013-03-20T12:09:03.953
> 
> 标签：eclipse, inspect, word-wrap

当我使用旧工作区调试 Java 应用程序时，检查表达式时出现的弹出窗口会显示表达式的内容。如果此内容大于窗口的宽度，则它会插入一个换行符。

现在，在我的新工作区中，出现了一个水平滚动条。我想再次启用此自动换行功能，但找不到相关设置。

你懂我的意思吗？我该如何配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:12:47.897

[看到这里](http://ahtik.com/blog/projects/eclipse-word-wrap/)你可以在这里得到解决方案。最好访问那个链接而不是解释我。

# java - Android 应用程序的 MVC 逻辑

> ID：15523126
> 
> 赞同：1
> 
> 时间：2013-03-20T12:09:07.960
> 
> 标签：java, android, model-view-controller, view, model

我会编写一个 Android 应用程序来检测从 Parrot Ar Drone 获得的视频帧中的对象。当模型包含无人机状态（如果正在飞行、新视频帧、导航数据等）时，我选择为此目的使用 MVC 模式。

为了检测一个物体（具体来说是一个球），我决定在要检测的物体的色调值上过滤图像，然后通过 OpenCV 应用 Huogh Circle 变换。为了获得要应用色调滤镜的toich颜色，我将创建一个校准活动，计算无人机摄像头前对象的直方图，当按下按钮时，此直方图会在模型中设置并新活动（因此可视化检测到的对象的新视图。我们称之为检测视图）被启动。

我必须在哪里计算直方图？在视图中，当新的视频帧从无人机到达时，通过从模型中获取视频帧还是在模型中？

我必须在哪里运行检测算法？在检测视图中还是在模型中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:59:24.507

通常，您可以将您的活动称为 MVC 中的“控制”层。您希望将活动（和片段）中的逻辑保持在最低限度，因为尽管活动和片段作为一个整体可重用，但其中的部分逻辑却不是。

诸如检测图像或视频中的对象之类的计算，我不会放在模型对象中，因为它应该更像 POJO，只是保留数据。我会亲自为此创建一些 Util 类，它将在您的模型层中充当一个类。

重新计算成自定义可视化，听起来更像是自定义 View。这个视图可以有逻辑，但只有用来呈现自己的那个。所有数据都应该提供给它，而不是获取。真正的逻辑应该只是视图绘图本身。

# sql - SQL Server 2008 R2 中的 Patindex

> ID：15523127
> 
> 赞同：0
> 
> 时间：2013-03-20T12:09:08.650
> 
> 标签：sql, sql-server-2008, patindex

我正在尝试使用`PATINDEX`SQL Server 2008 R2 中的函数从字符串中提取值 3

```
Charged Hourly Fee for 3 CR for BCP202DL Personal Development II 
```

但我似乎犯了一个错误。

我试过

```
SELECT PatIndex('%[0-9]%', 'Charged Hourly Fee for 3 CR for BCP202DL Personal Development II') 
```

它返回位置`24`但我想要值`3`。

有人可以协助解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:12:29.080

请试试：

```
Select substring(Data, PatIndex('%[0-9]%', Data), 1)
from(
    select 'Charged Hourly Fee for 3 CR for BCP202DL Personal Development II' as Data
)x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:20:40.527

如果您必须使用 patindex 函数，并且您的商品描述永远不会包含其他数字，例如“3”，您可以使用以下内容：

```
select patindex('%3%', 'Charged Hourly Fee for 3 CR for BCP202DL Personal Development II') 
```

这将返回 24。

我怀疑您正在查看一个字符串，其中订购的数量始终位于同一位置。在这种情况下，我会使用 substring 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:46:33.590

```
declare @str nvarchar (max)
set @str='Charged Hourly Fee for 3 CR for BCP202DL Personal Development II'
Select substring(@str, PatIndex('%[0-9]%', @str), 1) 
```

这将返回字符串中的第一个数字。

您正在做的方式是返回第一个数字的位置，我的代码将返回该位置的值。

# binding - Windows Phone ListPicker ItemsSource 列表 捆绑

> ID：15523129
> 
> 赞同：0
> 
> 时间：2013-03-20T12:09:15.913
> 
> 标签：binding, windows-phone, datatemplate, listpicker

我正在使用 a`ListPicker`让用户从数字列表中进行选择，因此我将`ItemsSource`属性绑定到`List<int>`我的`ViewModel`. 它工作正常，它显示我的 nummers，但只有默认的`FullIModeltemTemplate`. 如果我创建一个新的并添加一个`TextBlock`，我无法将其`Text`属性绑定到我的号码。

我需要做什么才能将我的号码绑定到新的 `FullModelItemTemplate`?

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:13:45.997

所以我找到了绑定它的方法：

```
 <DataTemplate x:Key="RadiusLFullItemTemplate">
        <Grid d:DesignWidth="446" d:DesignHeight="79">
            <TextBlock Margin="0" TextWrapping="Wrap" Text="{Binding Path = .}" HorizontalAlignment="Center" FontSize="48"/>
        </Grid>
    </DataTemplate> 
```

Text = {Binding Path =.}" 成功了

# c# - 试图在 ABCPDF 中加载格式不正确的程序

> ID：15523131
> 
> 赞同：1
> 
> 时间：2013-03-20T12:09:20.147
> 
> 标签：c#, .net, iis, dll, abcpdf

我在我的开发服务器中使用 ABCPDF.net 5.0 版，它工作正常，没有任何问题。开发服务器配置：操作系统：Windows Server 2003 32 位 iis 6.0

生产服务器配置： 操作系统：Windows Server 2008 R2 64 位操作系统 iis7.5

PDF 选项在开发服务器中工作正常。但是当我将代码移动到我们的生产服务器时，它会给出以下错误

尝试加载格式不正确的程序异常代码：0 * 8007000b

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:16:22.137

在 IIS 管理器 (inetmgr.msc) 中，找到控制应用程序的应用程序池，然后转到高级属性。将“启用 32 位应用程序”翻转为 True。那应该可以。如果您拥有的应用程序池由多个应用程序共享，请考虑为此目的创建一个新的应用程序池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:15:27.900

您需要在 32 位应用程序池中运行 32 位组件，或者确保在发布到 64 位机器时使用 64 位组件。

# c++ - C++ 为什么我要使用#define 而不是内联？

> ID：15523132
> 
> 赞同：0
> 
> 时间：2013-03-20T12:09:21.467
> 
> 标签：c++, macros, inline

使用 C++，我什么时候**需要** `#define`宏 vs `inline`？[这里的文章](http://www.parashift.com/c++-faq/inline-vs-macros.html)详细说明了为什么宏是邪恶的，为什么还要使用宏？

我看到一个：

*   一些编译器不支持 inling with functions with loop

任何其他？

此外，宏的常见用途是什么？一般来说，宏何时对其他实现选择具有特权？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:22:45.833

'inline' 只是给编译器的一个提示，它仍然可以拒绝在生成的代码中内联函数。

由于预处理器宏只是替换，因此可以保证它将被内联，因此没有函数只是重复。

话虽如此，宏仍然是邪恶的，应该评估每种情况而不是“一般规则”，但是如果你想要一个一般规则总是更喜欢内联而不是宏，或者相信编译器比你更聪明，让它决定通过它自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:55:07.713

宏 ( `#define`) 由预处理器处理。它实际上只是一个简单的替换操作，不考虑语言语法，甚至在编译器查看源代码之前。如果宏参数有任何副作用（例如`MACRO( x++ )`），则存在多重评估的问题。

函数由编译器处理。它提供了正确的类型检查和范围，避免了多重评估问题，如果你弄错了，它会提供更有意义的错误消息。

您**是否曾经**尝试过使用调试器单步执行“宏内联”函数？

那是功能......呃...... 5-ish，宏零。

现在，至于`inline`关键字......如果你在这方面做得足够好，能够在决定什么应该内联和什么不应该内联方面击败编译器，你就不会问这个问题。即使你在某个地方*遇到*了性能问题，你也很有可能做比在`inline`某个地方添加更有效的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:29:48.760

您始终可以用模板和内联替换预编译器宏。inline 本身仅限于您指定的类型。该类型被使用，没有别的。使用模板，您可以利用不同的类型并将相同的算法用于将编译的任何内容，并专门针对某些类型。宏的问题是，它可以多次评估表达式。模板永远不应该这样做，因为模板输入只针对功能评估一次。

有些事情，比如使用 STR(module) 制作“模块”字符串，只能使用宏来实现。

至于内联和旧式 C 宏之间的速度比较，我不知道。我认为它是非常特定于编译器的，您可以使用编译器标志对其进行大量调整。我从来没有玩过它，我只是倾向于相信最近的编译器足够聪明，可以真正内联可以内联的函数。事实上，在大多数情况下不需要 inline 关键字，因为编译器也可以内联没有此类关键字的函数。

# php - 如何在不过期会话的情况下将会话数据保存在表中？

> ID：15523133
> 
> 赞同：1
> 
> 时间：2013-03-20T12:09:24.297
> 
> 标签：php, codeigniter, session, session-timeout

我是使用 codeigniter 的 php 新手。我对使用 codeigniter mvc 框架的 php 会话有疑问。当我使用 table(ci-sessions) 存储会话数据时，由于会话到期而无法登录我们的站点。

我已经在课堂上设置`var $sess_table_name = 'ci_sessions';`& 。`var $sess_use_database = TRUE;``Session`

我也设置了`$config['sess_use_database'] = TRUE;`& `$config['sess_table_name']= 'ci_sessions';`in`config.php.`

给出好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:20:51.903

在您的配置中，将带有 $config['sess_expiration'] 的行更改为： $config['sess_expiration'] = 0;

这将确保会话不会过期或根据您的要求进行设置。

谢谢

# c++ - c++中的memcached异步调用

> ID：15523134
> 
> 赞同：1
> 
> 时间：2013-03-20T12:09:26.210
> 
> 标签：c++, memcached

我有一个关于 libmemcached 的问题。是否支持异步调用？

我想要做的是获取一些键的值，但是一旦我在回调中取回值，就做进一步的处理。

我正在使用 libevent 来满足我的其他异步需求，如果这有什么不同的话。

谢谢

# javascript - Adaptive.js 和 LESS CSS 兼容性问题

> ID：15523141
> 
> 赞同：2
> 
> 时间：2013-03-20T12:09:55.827
> 
> 标签：javascript, css, responsive-design, less

我对[Adaptive.js](http://adapt.960.gs/)及其与 LESS 的兼容性有疑问。问题是您无法在头部指定文档的类型，因为您必须通过 js 包含它。

```
<script>
    // Edit to suit your needs.
    var ADAPT_CONFIG = {
        // Where is your CSS?
        path: 'css/responsive/',

        // false = Only run once, when page first loads.
        // true = Change on window resize and page tilt.
        dynamic: true,

        // First range entry is the minimum.
        // Last range entry is the maximum.
        // Separate ranges by "to" keyword.
        range: [
            '0px    to 760px  = mobile.min.css',
            '760px  to 980px  = 720.min.css',
            '980px  to 3000px = 960.min.css',
        ]
    };
</script> 
```

我的问题是有没有办法告诉adaptive.js文件应该作为更少的文件提供，所以：

```
<script type="text/less"> 
```

而不仅仅是：

```
<script type="text/stylesheet"> 
```

还是我必须在adaptive.js 生效之前提供CSS 服务器端？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:23:59.507

通过改变来修改adaptive.js

```
css.rel = 'stylesheet'; 
```

成为

```
css.rel = 'stylesheet/less'; 
```

最终代码应如下所示：

```
var css = d.createElement('link');
css.rel = 'stylesheet/less';
css.media = 'screen'; 
```

请注意，您仍然需要重新初始化 less.js。

# 更新

我以前不知道如何重新初始化 less 但看起来 1.0.31 版有一个方法：`less.refreshStyles()`它将重新编译带有 type="text/less" 的标签

在您的配置中添加

```
callback: less.refreshStyles(), 
```

# javascript - javascript在循环中添加分钟

> ID：15523142
> 
> 赞同：0
> 
> 时间：2013-03-20T12:09:58.523
> 
> 标签：javascript

无法弄清楚这一点，从 9:00 到 10:00 一切正常，但随后一切都变得混乱。10:00 之后跳到 11:15，然后跳到 12:30

我只是在日期/时间中添加分钟以每隔 15 分钟增加一个数组，是不是我最多只能添加 60 分钟？

```
function pad(val,max) { 
        var str = val.toString(); 
        return str.length < max ? pad("0" + str, max) : str;
}

function cboHrs(){
    var now = new Date(); 
    now.setHours(9);
    var hrs = [];
    for (var i=1;i<36;i++){
        var hr = {}; 
        now.setMinutes(i*15);
        hr.txt = pad(now.getHours(),2) +':'+pad(now.getMinutes(),2);
        hr.val = hr.txt; 
        hrs.push(hr);
        }
    return hrs;
}
console.log(cboHrs()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:19:22.087

安东尼在我之前解决了实际问题......

> 在第 5 次迭代之后，您将分钟设置为 75（即 5 * 15 = 75），即 1 小时 15 分钟，这就是为什么 10:00 之后的下一个值变为 11:15 - Anthony Forloney

此代码应该可以正确设置时间。

```
function cboHrs(){
    var now = new Date(); 
    var hrs = [];
    for (var i=1;i<36;i++){
        var hr = {};
        // add another hour every 4th iteration
        now.setHours(9 + parseInt(i / 4));
        // add 15 minutes every iteration, starting back at 0 on the 4th
        now.setMinutes((i % 4) * 15);
        hr.txt = pad(now.getHours(),2) +':'+pad(now.getMinutes(),2);
        hr.val = hr.txt; 
        hrs.push(hr);
        }
    return hrs;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:18:19.157

问题在于`now.setMinutes(i*15);`代码行。在第 5 次迭代之后，您将分钟设置为`75`（即`5 * 15 = 75`），`1 hour and 15 minutes`这就是为什么之后的下一个值`10:00`变为`11:15`

# php - PHP缓存整个外部网站

> ID：15523148
> 
> 赞同：0
> 
> 时间：2013-03-20T12:10:21.257
> 
> 标签：php, caching, iframe

我目前正在使用`iframes`在我的网站上展示几个外部客户网站，例如这里的网站[http://progressionstudios.com/themes-wp/?theme=Stoken](http://progressionstudios.com/themes-wp/?theme=Stoken)

问题是客户端网站离我的服务器和我的网站访问者很远，并且可能需要很长时间才能加载。我正在尝试将每个网站缓存到`html`文件中，然后我可以在`iframe`URL 中引用这些文件。

但是我还是很陌生`php`，我的问题是，这种方法是缓存整个外部网站还是只缓存我指向的页面？

如果没有，是否有方法可以让我缓存整个外部网站？或者，缓存一个页面是否意味着所有`CSS/js`文件都被缓存，以便任何其他页面只加载内容的差异？

抱歉，如果我的问题听起来很基本/业余，但我还没有找到可以回答我的问题或与我处于类似情况的任何其他来源。

# javascript - 在 Eclipse 中调试 Node.js - 跳过某些文件

> ID：15523152
> 
> 赞同：1
> 
> 时间：2013-03-20T12:10:30.867
> 
> 标签：javascript, eclipse, node.js, debugging

在调试器中使用断点调试 Node.js 时，是否有一种巧妙的方法将某些文件标记为“不相关”，以便调试器将跳过这些文件中的任何和所有代码，并且仅在代码执行时继续中断再次退出该文件？

例如，当您获得了一个包含许多承诺和回调的库大小的代码时，在没有先验知识的情况下查看例如承诺库的“另一面”是什么，这是一个有价值的用途。

现在执行此操作的方法是将代码单步执行一百次，直到您再次退出文件，并且可以看到最终到达的位置。如果调试器可以自动执行此操作，我可以每早一个小时回家。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:01:45.687

否 - 如果您尝试调试特定的代码路径，最好在“另一侧”设置断点，在这些文件中传递代码后执行将恢复。然后你可以告诉调试器继续并等待它达到这些点之一。

# android - 在 android 中显示除特定存储桶显示名称之外的所有图像

> ID：15523153
> 
> 赞同：1
> 
> 时间：2013-03-20T12:10:32.440
> 
> 标签：android, android-image

我在网格视图中显示所有 sd 卡图像。问题是我必须显示设备外部存储上的所有图像，同时不显示相机图像。我知道为此我需要获取相机存储桶ID或存储桶显示名称。我不知道如何做到这一点。所以任何人都可以帮助我如何做到这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:23:36.623

通常相机图像存储在特定文件夹中，DCMI 文件夹。只是不要显示 DCMI 文件夹中的图像，当您在 sd 卡中搜索图像时跳过该文件夹

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:16:53.410

试试这个。你可能需要修改这个

```
public static ArrayList<String> getPathOfAllImages(Activity activity) {
        ArrayList<String> absolutePathOfImageList = new ArrayList<String>();
        String absolutePathOfImage = null;
        String nameOfFile = null;
        String absolutePathOfFileWithoutFileName = null;
        Uri uri;
        Cursor cursor;
        int column_index;
        int column_displayname;
        int lastIndex;

            uri = android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI;

            String[] projection = { MediaColumns.DATA,
                    MediaColumns.DISPLAY_NAME };

            cursor = activity.managedQuery(uri, projection, null, null, null);
            column_index = cursor.getColumnIndexOrThrow(MediaColumns.DATA);

            column_displayname = cursor
                    .getColumnIndexOrThrow(MediaColumns.DISPLAY_NAME);

            while (cursor.moveToNext()) {

                absolutePathOfImage = cursor.getString(column_index);
                nameOfFile = cursor.getString(column_displayname);

                lastIndex = absolutePathOfImage.lastIndexOf(nameOfFile);

                lastIndex = lastIndex >= 0 ? lastIndex
                        : nameOfFile.length() - 1;

                absolutePathOfFileWithoutFileName = absolutePathOfImage
                        .substring(0, lastIndex);

                    if (absolutePathOfImage != null&& !absolutePathOfImage.equals("/sdcard/DCMI/")) {
                        absolutePathOfImageList.add(absolutePathOfImage);
                    }

            } 
```

使用 absolutePathOfImageList 填充您的网格视图

# android - 更改复选框值而不触发 onCheckChanged

> ID：15523157
> 
> 赞同：176
> 
> 时间：2013-03-20T12:10:54.353
> 
> 标签：android, checkbox

我已经`setOnCheckedChangeListener`为我的`checkbox`

有没有办法我可以打电话

```
checkbox.setChecked(false); 
```

在不触发`onCheckedChanged`

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2013-03-20T12:25:47.907

不，你不能这样做。该`onCheckedChanged`方法直接从 调用`setChecked`。您可以执行以下操作：

```
mCheck.setOnCheckedChangeListener (null);
mCheck.setChecked (false);
mCheck.setOnCheckedChangeListener (mListener); 
```

查看[CheckBox 的来源](https://android.googlesource.com/platform/frameworks/base/+/refs/tags/android-11.0.0_r8/core/java/android/widget/CompoundButton.java#199)，以及实现`setChecked`：

```
public void  setChecked(boolean checked) {
    if (mChecked != checked) {
        mChecked = checked;
        refreshDrawableState();

        // Avoid infinite recursions if setChecked() is called from a listener
        if (mBroadcasting) {
            return;
        }

        mBroadcasting = true;
        if (mOnCheckedChangeListener != null) {
            mOnCheckedChangeListener.onCheckedChanged(this, mChecked);
        }

        if (mOnCheckedChangeWidgetListener != null) {
            mOnCheckedChangeWidgetListener.onCheckedChanged(this, mChecked);
        }

        mBroadcasting = false;            
    }
} 
```

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2018-10-02T10:21:06.020

在 OnCheckedChangeListener 中添加此代码：

```
if(!compoundButton.isPressed()) {
            return;
} 
```

这将帮助我们确定天气复选框状态是否以编程方式或通过用户操作进行了更改。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-12-10T00:08:54.587

实现此目的的另一种可能方法是使用自定义 CheckBox ，它可以让您选择是否要调用侦听器：

```
public class CheckBox extends AppCompatCheckBox {
    private OnCheckedChangeListener mListener;

    public CheckBox(final Context context) {
        super(context);
    }

    public CheckBox(final Context context, final AttributeSet attrs) {
        super(context, attrs);
    }

    public CheckBox(final Context context, final AttributeSet attrs, final int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    public void setOnCheckedChangeListener(final OnCheckedChangeListener listener) {
        mListener = listener;
        super.setOnCheckedChangeListener(listener);
    }

    public void setChecked(final boolean checked, final boolean alsoNotify) {
        if (!alsoNotify) {
            super.setOnCheckedChangeListener(null);
            super.setChecked(checked);
            super.setOnCheckedChangeListener(mListener);
            return;
        }
        super.setChecked(checked);
    }

    public void toggle(boolean alsoNotify) {
        if (!alsoNotify) {
            super.setOnCheckedChangeListener(null);
            super.toggle();
            super.setOnCheckedChangeListener(mListener);
            return;
        }
        super.toggle();
    }
} 
```

Kotlin 版本，如果您愿意：

```
class CheckBox @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0) : AppCompatCheckBox(context, attrs, defStyleAttr) {
    private var listener: CompoundButton.OnCheckedChangeListener? = null

    override fun setOnCheckedChangeListener(listener: CompoundButton.OnCheckedChangeListener?) {
        this.listener = listener
        super.setOnCheckedChangeListener(listener)
    }

    fun setChecked(checked: Boolean, alsoNotify: Boolean) {
        if (!alsoNotify) {
            super.setOnCheckedChangeListener(null)
            super.setChecked(checked)
            super.setOnCheckedChangeListener(listener)
            return
        }
        super.setChecked(checked)
    }

    fun toggle(alsoNotify: Boolean) {
        if (!alsoNotify) {
            super.setOnCheckedChangeListener(null)
            super.toggle()
            super.setOnCheckedChangeListener(listener)
            return
        }
        super.toggle()
    }
} 
```

示例用法：

```
checkBox.setChecked(true,false); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-20T13:22:28.457

您只需使用 setonclickListener ，它就可以正常工作，这是非常简单的方法，谢谢 :)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-07-12T20:03:22.607

对于任何偶然发现这一点的人，一种更简单的方法是在复选框上使用一个标签，然后在其侦听器上检查该标签（代码在 Kotlin 中）：

```
checkBox.tag = false
checkBox.setOnCheckedChangeListener{ buttonView, isChecked -> 
    if(checkBox.tag != true) {
        // Do some stuff
    } else {
        checkBox.tag = false
    } 
```

然后，当您想忽略值更改时，在将 isChecked 设置为 true 之前，只需将标签设置为 true：

```
checkBox.tag = true
checkBox.isChecked = true 
```

如果您担心可理解性，您还可以使用需要密钥的替代 setTag 方法将标签映射到密钥。但是，如果它全部包含在一个类中，那么几个注释字符串就足以解释发生了什么。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-06-30T18:33:33.327

将 Kotlin 的扩展与 @Shade answer 一起使用：

```
fun CompoundButton.setCustomChecked(value: Boolean,listener: CompoundButton.OnCheckedChangeListener) {
     setOnCheckedChangeListener(null)
     isChecked = value
     setOnCheckedChangeListener(listener)
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-08-03T12:12:18.167

很简单，你在`isPressed`里面查一下`setOnCheckedChangeListener`

科特林

```
switch.setOnCheckedChangeListener { buttonView, isChecked ->
    when {        
        buttonView.isPressed -> {
            foo(isChecked)
        }
    } 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-01-12T07:01:03.027

您可以将此 SafeCheckBox 类用作您的复选框：

```
public class SafeCheckBox extends AppCompatCheckBox implements CompoundButton.OnCheckedChangeListener {

    private OnSafeCheckedListener onSafeCheckedListener;

    private int mIgnoreListener = CALL_LISTENER;

    public static final int IGNORE = 0;
    public static final int CALL_LISTENER = 1;

    @Retention(RetentionPolicy.SOURCE)
    @IntDef({IGNORE, CALL_LISTENER})
    public @interface ListenerMode {
    }

    public SafeCheckBox(Context context) {
        super(context);
        init(context);
    }

    public SafeCheckBox(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    public SafeCheckBox(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init(context);
    }

    /**
     * @param checkState     change state of the checkbox to 
     * @param mIgnoreListener true to ignore the listener else listener will be  notified
     */
    public void setSafeCheck(boolean checkState, @ListenerMode int mIgnoreListener) {
        if (isChecked() == checkState) return; //already in the same state no need to fire listener. 

        if (onSafeCheckedListener != null) { // this to avoid a bug if the user listens for the event after using this method and in that case he will miss first check
            this.mIgnoreListener = mIgnoreListener;
        } else {
            this.mIgnoreListener = CALL_LISTENER;
        }
        setChecked(checkState);
    }

    private void init(Context context) {
        setOnCheckedChangeListener(this);
    }

    public OnSafeCheckedListener getOnSafeCheckedListener() {
        return onSafeCheckedListener;
    }

    public void setOnSafeCheckedListener(OnSafeCheckedListener onSafeCheckedListener) {
        this.onSafeCheckedListener = onSafeCheckedListener;
    }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

        if (onSafeCheckedListener != null)
            onSafeCheckedListener.onAlwaysCalledListener(buttonView, isChecked);// this has to be called before onCheckedChange
        if (onSafeCheckedListener != null && (mIgnoreListener == CALL_LISTENER)) {
            onSafeCheckedListener.onCheckedChanged(buttonView, isChecked);
        }
        mIgnoreListener = CALL_LISTENER;
    }

    /**
     * Listener that will be called when you want it to be called.
     * On checked change listeners are called even when the setElementChecked is called from code. :(
     */
    public interface OnSafeCheckedListener extends OnCheckedChangeListener {
        void onAlwaysCalledListener(CompoundButton buttonView, boolean isChecked);
    }
} 
```

*   然后你可以打电话： -

    `setSafeCheck(true,ListenerMode.IGNORE);// OnCheckedChange listener will not be notified`

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-07-26T14:01:52.760

在检查单选按钮之前将 null 设置为 changeListener。您可以在选中单选按钮后再次设置监听器。

```
radioGroup.setOnCheckedChangeListener(null);
radioGroup.check(R.id.radioButton);
radioGroup.setOnCheckedChangeListener(new 

RadioGroup.OnCheckedChangeListener() {
   @Override
   public void onCheckedChanged(RadioGroup radioGroup, @IdRes int i) {

   }
}); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-08-17T11:09:50.913

我认为最简单的解释
可能会有所帮助）

```
public class ProgrammableSwitchCompat extends SwitchCompat {

    public boolean isCheckedProgrammatically = false;

    public ProgrammableSwitchCompat(final Context context) {
        super(context);
    }

    public ProgrammableSwitchCompat(final Context context, final AttributeSet attrs) {
        super(context, attrs);
    }

    public ProgrammableSwitchCompat(final Context context, final AttributeSet attrs, final int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    public void setChecked(boolean checked) {
        isCheckedProgrammatically = false;
        super.setChecked(checked);
    }

    public void setCheckedProgrammatically(boolean checked) {
        isCheckedProgrammatically = true;
        super.setChecked(checked);
    }
} 
```

用它

```
@Override
public void onCheckedChanged(CompoundButton compoundButton, boolean on) {
    if (((ProgrammableSwitchCompat) compoundButton).isCheckedProgrammatically) {
        return;
    }
    //...
    ((ProgrammableSwitchCompat) compoundButton).setCheckedProgrammatically(true);
    //...
    ((ProgrammableSwitchCompat) compoundButton).setCheckedProgrammatically(false);
    //...
} 
```

使用将触发`setChecked(boolean)`功能
就是所有

**科特林**

```
class MyCheckBox @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = R.attr.switchStyle
) : AppCompatCheckBox(context, attrs, defStyleAttr) {

    var programmatically = false

    override fun setChecked(checked: Boolean) {
        programmatically = false
        super.setChecked(checked)
    }

    fun setCheckedProgrammatically(checked: Boolean) {
        programmatically = true
        super.setChecked(checked)
    }
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-08-31T10:41:09.697

这是我使用的一个简单解决方案：
**定义自定义侦听器：**

```
class CompoundButtonListener implements CompoundButton.OnCheckedChangeListener {

    boolean enabled = false;

    @Override
    public void onCheckedChanged(CompoundButton compoundButton, boolean checked) {

    }

    void enable() {
        enabled = true;
    }

    void disable() {
        enabled = false;
    }

    boolean isEnabled() {
        return enabled;
    }
} 
```

**初始化：**

```
CompoundButtonListener checkBoxListener = new CompoundButtonListener() {
    @Override
    public void onCheckedChanged(CompoundButton compoundButton, boolean checked) {
        if (isEnabled()) {
            // Your code goes here
        }
    }
};
myCheckBox.setOnCheckedChangeListener(checkBoxListener); 
```

**用法：**

```
checkBoxListener.disable();

// Some logic based on which you will modify CheckBox state
// Example: myCheckBox.setChecked(true)

checkBoxListener.enable(); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-08-14T07:32:36.977

这个怎么样。尝试在视图中使用标签

```
mCheck.setTag("ignore");
mCheck.setChecked(true);
mCheck.setTag(null); 
```

和

```
switch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton compoundButton, boolean selected) {

            //If switch has a tag, ignore below
            if(compoundButton.getTag() != null)
                return; 

            if (selected) {
                // do something
            } else {
                // do something else
            }

        }
    }); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-11-06T20:59:51.203

试试这个应该适合你！您也可以将其与 firebase 一起使用！

获取firebase数据！用这个！

```
databaseReference.child(user.getPhoneNumber()).child("Reqs").addValueEventListener(new ValueEventListener() {

        @Override
        public void onDataChange(DataSnapshot dataSnapshot) {
            SharedPreferences prefs = mContext.getSharedPreferences("uinfo", MODE_PRIVATE);
            String pno = prefs.getString("username", "No name defined");

            if(dataSnapshot.child(pno).getValue(String.class).equals("acc")){
                holder.acc.setChecked(true);
            }else{
                holder.acc.setChecked(false);
            }
        }

        @Override
        public void onCancelled(DatabaseError databaseError) {
            // Getting Post failed, log a message
            Log.w("dfs", "loadPost:onCancelled", databaseError.toException());
            // ...
        }
    }); 
```

之后当用户做某事！

```
holder.acc.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(isChecked) {
                    if(buttonView.isPressed()) {
                        //your code
                    }
                }
                else {
                    if(buttonView.isPressed()) {
                       //your code
                    }
                }
            }
        }); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-08-15T01:33:35.547

> 我发现上面所有的答案都太复杂了。为什么不使用简单的布尔值创建自己的标志？

只需使用带有布尔值的简单标志系统。创建`boolean noListener`. 每当您想在不运行任何代码的情况下打开/关闭开关（在此示例中，表示为`runListenerCode()`，只需`noListener=true`在调用之前设置`switch.setChecked(false/true)`

```
switch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
           @Override
           public void onCheckedChanged(CompoundButton compoundButton, boolean selected) {
               if (!noListener) { //If we want to run our code like usual
                   runListenerCode();
               } else { //If we simply want the switch to turn off
                   noListener = false;
               }
           }); 
```

使用简单标志的非常简单的解决方案。最后，我们`noListener=false`再次设置，以便我们的代码继续工作。希望这可以帮助！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-06-09T17:32:23.193

我使用了`ReentrantLock`, 并在设置时将其锁定`isChecked`：

**科特林：**

```
// lock when isChecked is being set programmatically
val isBeingProgrammaticallySet = ReentrantLock()

// set isChecked programmatically
isBeingProgrammaticallySet.withLock()
{
    checkbox.isChecked = true
}

// do something only when preference is modified by user
checkbox.setOnCheckedChangeListener()
{
    _,isChecked ->
    if (isBeingProgrammaticallySet.isHeldByCurrentThread.not())
    {
        // do it
    }
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-10-10T06:18:33.563

`isPressed()`检查过一次`onCreate()`。`checkbox.isPressed()`每次您`onCheckChangeListener`的复选框更改时添加检查。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-03-20T12:26:00.310

我想使用反射是唯一的方法。像这样的东西：

```
CheckBox cb = (CheckBox) findViewById(R.id.checkBox1);
try {
    Field field = CompoundButton.class.getDeclaredField("mChecked");
    field.setAccessible(true);
    field.set(cb, cb.isChecked());
    cb.refreshDrawableState();
    cb.invalidate();
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-08-03T08:02:18.843

我基于@Chris 回答用java 编写的解决方案：

```
chkParent.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(buttonView.getTag() != null){
                    buttonView.setTag(null);
                    return;
                }
                if(isChecked){
                    chkChild.setTag(true);
                    chkChild.setChecked(false);
                }
                else{
                    chkParent.setChecked(true);
                }
            }
});

chkChild.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(buttonView.getTag() != null){
                    buttonView.setTag(null);
                    return;
                }
                if(isChecked){
                    chkParent.setTag(true);
                    chkParent.setChecked(false);
                }
                else{
                    chkChild.setChecked(true);
                }
            }
}); 
```

2 个复选框，并且始终会选中一个（但最初必须选中一个）。将标记设置为 true 会阻止 onCheckedChanged 侦听器。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-03-25T05:11:19.210

```
public void setCheckedChangeListenerSwitch() {

    switch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton compoundButton, boolean selected) {

            if (selected) {
                // do something
            } else {
                // do something else
            }

        }
    });

}

// Update state & reset listener (so onCheckedNot called)
public void updateSwitchState(boolean state){

    switch.setOnCheckedChangeListener(null);
    switch.setChecked(state);
    setCheckedChangeListenerSwitch();

} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-12-05T09:52:11.020

我真的不想在每次设置检查更改时都必须传递侦听器，也不想`enabled`用作确定是否应该设置值的一种方式（如果在设置值时我们已经禁用了开关会发生什么情况?)

相反，我正在使用带有 id 的标签和一些您可以调用的扩展方法：

```
fun CompoundButton.setOnCheckedWithoutCallingChangeListener(
    listener: (view: CompoundButton, checked: Boolean) -> Unit
) {
    setOnCheckedChangeListener { view, checked ->
        if (view.getTag(R.id.compound_button_checked_changed_listener_disabled) != true) {
            listener(view, checked)
        }
    }
    this.setTag(R.id.compound_button_enabled_checked_change_supported, true)
}

fun CompoundButton.setCheckedWithoutCallingListener(checked: Boolean) {
    check(this.getTag(R.id.compound_button_enabled_checked_change_supported) == true) {
        "Must set listener using `setOnCheckedWithoutCallingChangeListener` to call this method" 
    }

    setTag(R.id.compound_button_checked_changed_listener_disabled, true)
    isChecked = checked
    setTag(R.id.compound_button_checked_changed_listener_disabled, false)
} 
```

现在您可以调用`setCheckedWithoutCallingListener(bool)`，它将强制执行正确的侦听器使用。

`setChecked(bool)`如果您仍然需要它，您仍然可以调用来触发侦听器

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-12-17T04:23:18.537

这是一个非常易于使用的标记技术版本。

用法：

```
// Pass true to enable bypassing of the listener
button.setOnCheckedChangedListener(true) { _, isChecked ->
    // your usual code
}

// Use extension function to set the value and bypass the listener
button.setCheckedSilently(true) 
```

它是通过几个实用程序扩展功能完成的：

```
inline fun CompoundButton.setOnCheckedChangeListener(canBypass: Boolean, crossinline listener: (CompoundButton, Boolean) -> Unit) {
    if (canBypass) {
        setOnCheckedChangeListener { view, isChecked ->
            if (view.tag != ListenerBypass) {
                listener(view, isChecked)
            }
        }
    } else {
        setOnCheckedChangeListener { view, isChecked -> listener(view, isChecked) }
    }
}

fun CompoundButton.setCheckedSilently(isChecked: Boolean) {
    val previousTag = tag
    tag = ListenerBypass
    this.isChecked = isChecked
    tag = previousTag
}

object ListenerBypass 
```

# c++ - 在模板化类和函数的上下文中，具有默认值作为函数参数的函子:-)

> ID：15523158
> 
> 赞同：0
> 
> 时间：2013-03-20T12:10:59.583
> 
> 标签：c++, templates, functor

这些成分：

1.  以矩阵元素类型为模板的矩阵类，旨在与子矩阵以及双精度/浮点数等一起使用。

2.  返回“真实”对角线的矩阵成员方法，即在 NxN 子矩阵的情况下，它们的对角线，即大小为 N 的向量的向量。

3.  关于子矩阵的实现尽可能少的限制，并且在不使用子矩阵时没有不必要的“副作用”/要求，例如，只是加倍。

4.  在某些算法中无缝使用矩阵类，例如共轭梯度，理想情况下应该在一些通用矩阵和向量类型上进行模板化。

这个想法是为矩阵的 GetDiagonalElements() 方法提供一个仿函数，该方法具有一个仅复制对角元素的默认值。忽略矩阵的实际大小（仅 1x1），以下是我提供该功能的尝试：

```
#include <vector>

template< typename T >
struct Matrix
{
  std::vector<T> data;
  Matrix() : data(1) {}

  // Default-functor for T2=T or convertible.
  template< typename T2 >
  struct GetDiagonalElementsFunc
  {
    void operator()( const T &t1, T2 &t2 ) { t2 = (T2)t1; }
  };

  template< typename T2, typename GetDiagonalElementsFunctor >
  void GetDiagonalElements( std::vector<T2> &diag,
    GetDiagonalElementsFunctor gdeFunctor=GetDiagonalElementsFunc<T2> 
  {
      diag.resize(1)
      gdeFunctor( data[0], diag[0] );
  }
};

void foo()
{
  Matrix<double> mat;
  std::vector<double> diag;
  mat.GetDiagonalElements(diag); 
```

}

编译器“说”：无法推断出“GetDiagonalElementsFunctor”的模板参数

猜猜函子不需要模板参数 - 我试过但也没有让它工作，可能很简单（？），尽管任何帮助表示赞赏，亲切的问候，德里克。

PS：理想情况下，如果可能的话，没有额外/中间的辅助类型。没有 Boost，没有 C++11。

附加问题：如果我想做同样的事情，但将对角访问函子指定为矩阵模板声明（？）的一部分，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:13:38.240

您不能在 C++98 中的函数中使用默认模板参数...因此，对于这种情况，您应该使用 struct 或两个函数...带有两个函数的示例

```
 template< typename T2, typename Functor>
  void GetDiagonalElements( std::vector<T2> &diag, Functor gdeFunctor)
  {
      diag.resize(1);
      gdeFunctor( data[0], diag[0] );
  }

  template<typename T2>
  void GetDiagonalElements( std::vector<T2>& diag)
  {
     GetDiagonalElements(diag, GetDiagonalElementsFunc<T2>());
  } 
```

# mysql - mySQL 从重复行中查找缺失的条目

> ID：15523160
> 
> 赞同：0
> 
> 时间：2013-03-20T12:11:02.713
> 
> 标签：mysql, duplicates, multiple-entries

mySQL 查询 - 我有一个表 'database'.'table_product_options' 包含大约 1000 行。此表应包含每个“product_id”的 4x 行 - 分配给每个“customer_group”的相同产品（如下图所示）。这应该相当于每个 customer_group 约 250 行。

但是，我在每个**'customer_group'**上运行了一个 COUNT ，发现组*a* + *c有一些缺失的条目（组**b* + *d* 总共 250 行，但组*a* + *c*只有 245 行）。

```
+----------------+----------------+
| product_id     | customer_group |
+----------------+----------------+
|       1        |        a       | }
|       1        |        b       | }
|       1        |        c       | }-each 'product_id' has 4x 'customer_group' attached
|       1        |        d       | }
|       2        |        a       |
|       2        |        b       |
|       2        |        c       | << 1 missing entry (customer_group = d)
|       3        |        a       | << 3 missing entries (customer_group = b, c, d)
+----------------+----------------+ 
```

如何运行 SELECT 查询（或替代查询）以显示分配了少于 4 行**的“product_id” ？**或者，换句话说，我怎样才能找到丢失的条目？

我尝试了许多不同的查询，包括 SELECTs 与 WHERE NOT EXIST 等相结合，但我的想法已经不多了。我已经修改了十几个 stackoverflow 答案，但没有一个非常合适，并且无法修改语法以使其正常工作。

任何帮助将不胜感激（因为我预计将来会再次出现同样的问题......）。我可能最终会用眼睛擦桌子！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:15:16.073

```
select product_id, count(customer_group)
from table_product_options
group by product_id
having count(customer_group) < 4 
```

您可能必须逐行切换拥有和分组。我把订单弄糊涂了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:30:31.257

组成可能的组合以查找丢失的组。

```
select product_id, indicator, case when indicator = 1 
                                   case when availe = 'a' then 'b,c,d' 
                                   when availe = 'b' then 'a,c,d' 
                                   when availe = 'c' then 'a,b,d'
                                   else 'a,b,c' end
                               case when indicator = 2
                                     case when availe = 'a,b' then 'c,d'
                 //Like wise Give the possible combination for finding missing group
                                end as missing_group 
 from
(select product_id, count(customer_group) as indicator, group_concat(customer_group) as availe
from table_product_options
group by product_id) a where indicator < 4 
```

# gitolite - 从现有的 v2 存储库创建 v3 gitolite 存储库

> ID：15523161
> 
> 赞同：1
> 
> 时间：2013-03-20T12:11:05.387
> 
> 标签：gitolite

我在公司的服务器上安装了 gitolite v2，现在我必须管理它。由于那里真的很混乱，我决定安装一个新的，现在是 v3。我有大约 8 个存储库要移动到新安装中。

我不需要旧的 .rc 文件或任何配置，只需要（工作！）`$GIT_HOME/repositories/*.git`

**我尝试了什么：（**在寻找解决方案时发现）
全部复制`$GIT_OLD_HOME/repositories/*.git`到`$GIT_HOME/repositories/*.git`（gitolite-admin.git 和 testing.git 除外）

然后我`gitolite-admin.git/conf/gitolite.conf`用这种条目更新了（通过克隆和推回更改）：

`repo myrepo1`
`RW+ = @all`

现在，如果我想克隆 gitolite-admin 或测试以外的任何东西，它会说：
`FATAL: R any myrepo1 myusername DENIED by fallthru`

**我检查过的几件事：**
`ls -l $GIT_HOME` -> gitolite:gitolite 没关系，我想因为 gitolite 是我要使用的用户，所以
我对目录中的所有条目都做了相同的`repositories`操作，并且权限是相同的。

我正在谷歌搜索解决方案，但我没有找到适合我的情况。如果您可以帮助我或建议我任何事情，请不要退缩:)

如果您需要更多详细信息来找出答案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T12:26:38.583

我遇到了同样的问题，升级没有正常工作，所以我使用了以下策略 - 粗体文本表示执行步骤的位置：

1-**新：**安装 Gitolite ( [https://github.com/sitaramc/gitolite](https://github.com/sitaramc/gitolite) )。

2-**工作站：**在一个新的空目录中克隆旧版本的 gitolite-admin 并将其重命名为`gitolite-admin-old`. 删除 gitolite-admin-old/conf/gitolite.conf 中除您自己以外的所有用户的访问权限 - 在迁移存储库时禁止任何人进行任何更改。

3-**工作站：**从旧 Gitolite 克隆所有存储库。`git clone git@oldserver.com:repo`.

4-**旧的：**我们已经从旧的存储库中得到了我们想要的东西。`exit 0`通过在文件顶部添加来永久禁用旧 gitolite `.gitolite.rc`。

5-**工作站：**从新服务器克隆 gitolite-admin`git clone git@newserver.com:gitolite-admin gitolite-admin-new`

6-**工作站：**将密钥从 复制`gitolite-admin-old/keydir`到，使用用户权限`gitolite-admin-new/keydir`将要传输的存储库添加到新的存储库中。`gitolite-admin-new/conf/gitolite.conf`添加、提交和推送。

7-**工作站：**将每个所需的存储库推送到新服务器

```
git push --all git@newserver.com:repo
git push --tags git@newserver.com:repo
or
git push --mirror git@newserver.com:repo 
```

8-**工作站：**从每个工作仓库更改 DNS 或远程 URL。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:17:09.483

确保您已迁移[`.gitolite.rc`文件](http://gitolite.com/gitolite/rc.html)，如**[g2->g3 迁移页面中所述](http://gitolite.com/gitolite/migr.html)**

> 如果您从 g2 迁移，在运行 gitolite setup 之前必须处理一些设置；请阅读迁移页面和链接页面，尤其是“预设 rc 文件”
> 
> g3 的 rc 文件与 g2 的 rc 文件完全不同。

或者，如果您不需要旧的，正如您所提到的，请确保默认新的内容具有适当的值。

确保您的新`~git/.ssh/authorized_keys`文件中确实包含一行`myusername`。

* * *

OP Attila [Horvath](https://stackoverflow.com/users/2190628/attila-horvath) [证实](https://stackoverflow.com/questions/15523161/create-v3-gitolite-repositories-from-existing-v2-repos/15523310?noredirect=1#comment21991271_15523310)：

> 注意：任何 gitolite 中的任何内容`install/setup/etc`都不会触及除`gitolite-admin`repo 之外的任何存储库中的数据。它通常会在正常存储库中触及的唯一内容是更新挂钩。”
> 
> 最后一句话引起了我的注意，现在看来这就是问题所在。
> 我首先安装了 gitolite 然后在那里复制了 repos，**所以我不得不再次运行`gitolite setup -pk mykey.pub`，现在它似乎工作了**！

# spring - 无法让视图范围适用于我的 ManagedBeans

> ID：15523164
> 
> 赞同：0
> 
> 时间：2013-03-20T12:11:17.180
> 
> 标签：spring, jsf, serializable, view-scope

我在我的项目中使用 JSF 2 和 Spring 3，直到现在，我只是使用请求和会话范围。**我想为**我的一些 JSF bean 使用视图范围（出于多种原因）。

问题是 JSF ManagedBean 必须实现**Serializable**接口及其所有属性。

我很难获得 Spring bean Serializables（例如：VilleService ...），因为即使不可能（休眠类或 mysql ...），它也会继续要求更多类可序列化。

这是一个例子：

```
public class VilleBean extends BaseBean implements Serializable {

    private Ville ville;
    private List<Ville> villes;
    private VilleService villeService;
    private PaysService paysService;
    private Pays pays;
    private List<Pays> payss;
    private PojoConverter<Pays> paysConverter = null;

    public VilleBean() {
        ville = new Ville();
        pays = new Pays();
    }

    public void setVilleService(VilleService villeService) {
        this.villeService = villeService;
    }

    public void setPaysService(PaysService paysService) {
        this.paysService = paysService;
    }

    // getters and setters for attributes : ville, pays, villes, payss

    public void addVilleAction() {
         ville.setPays(pays);
         villeService.create(ville);
    }

    public void deleteVilleAction(Ville ville) {
         villeService.delete(ville);
         villes = villeService.readAll();
    }

    public void updateVilleAction() {
         ville.setPays(pays);
         villeService.update(ville);
    }

    public PojoConverter<Pays> getPaysConverter() {
        this.paysConverter = new PojoConverter<Pays>(getPayss());
        return this.paysConverter;
    }
}

public abstract class BaseBean {
    protected FacesContext context = FacesContext.getCurrentInstance();
    protected MessageFactory msg;
    protected static final Logger log = Logger.getLogger(BaseBean.class);
} 
```

POJO：

```
public class Ville implements Serializable {

    private int id;
    private String intitule;
    private Pays pays;

// setters and getters
}

public class Pays implements Serializable {

    private int id;
    private String intitule;

// setters and getters
} 
```

服务接口：

```
public interface VilleService extends ICrud<Ville> {

} 
```

服务实现：

```
public class VilleServiceBase implements VilleService {

private IDao<Ville> dao;

// getter and setter for dao

@Override
public List<Ville> readAll() throws Exception {
       return dao.readAll();
}

@Override
public void create(Ville entity) throws Exception {
        dao.create(entity);
}
//**** 
```

实用程序：

```
public interface ICrud<T> {

public java.util.List readAll() throws Exception;
public void create(T entity) throws Exception;
public void update(T entity) throws Exception;
//****

public interface IDao<T> {

public java.util.List<T> readAll();
public T create(T entity);
//****

public class DaoBase<T> extends org.springframework.orm.hibernate3.support.HibernateDaoSupport implements IDao<T> {

private final Class<T> type;

public DaoBase(Class<T> type) {
      this.type = type;
}

@Override
public T load(int id) {
        return (T) this.getHibernateTemplate().get(this.type, new Integer(id));
}

@Override
public T create(T entity) {
     //****
       this.getHibernateTemplate().save(entity);
       return entity;
} 
```

春豆：spring.xml：

```
 <!-- Ville Service Implementation  -->
<bean id="villeServiceBase" class="commun.ref.crud.VilleServiceBase">
    <property name="dao">
        <ref bean="villeDao"/>
    </property>
</bean>
<!-- Ville Service Proxy  -->
<bean id="villeService" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="target">
        <ref local="villeServiceBase"/>
    </property>
    <property name="proxyInterfaces">
        <value>commun.ref.crud.VilleService</value>
    </property>
    <property name="interceptorNames">
        <list>
            <value>manageableServiceTransactionInterceptor</value>
            <value>hibernateInterceptor</value>
        </list>
    </property>
</bean>

<bean id="villeDao" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="target">
        <bean class="smile.util.DaoBase">
            <constructor-arg>
                <value>commun.ref.Ville</value>
            </constructor-arg>
            <property name="sessionFactory">
                <ref bean="sessionFactory"/>
            </property>
        </bean>
    </property>
    <property name="proxyInterfaces">
        <value>smile.util.IDao</value>
    </property>
    <property name="interceptorNames">
        <list>
            <value>hibernateInterceptor</value>
        </list>
    </property>
</bean> 
```

JSF 配置：faces-config.xml：

```
<application>
    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
</application>

<application>
    <variable-resolver>
        org.springframework.web.jsf.DelegatingVariableResolver
    </variable-resolver>
</application>

    ******

<managed-bean> 
    <managed-bean-name>villeBean</managed-bean-name>
    <managed-bean-class>commun.ref.ui.VilleBean</managed-bean-class>
    <managed-bean-scope>view</managed-bean-scope>
    <managed-property>
        <property-name>villeService</property-name>
        <value>#{villeService}</value>
    </managed-property>
    <managed-property>
        <property-name>paysService</property-name>
        <value>#{paysService}</value>
    </managed-property>
</managed-bean> 
```

你能告诉我，怎么做才能让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:14:49.207

在您不想序列化或无法序列化的字段上使用`transient`修饰符。例如：

```
private transient VilleService villeService; 
```

当您使用 MyFaces 时，将此参数添加到 web.xml：

```
<context-param>
  <param-name>org.apache.myfaces.SERIALIZE_STATE_IN_SESSION</param-name>
  <param-value>false</param-value>
</context-param> 
```

据我所知，这个参数`false`在 Mojarra 中是默认的。这将禁用会话中状态的序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:15:27.023

如果您不使用会话钝化，则可以将`transient`属性用于不可序列化的字段。

例如：

```
private transient Connection connection; 
```

# javascript - 一页中的 Double Click Publisher 2 排行榜横幅

> ID：15523165
> 
> 赞同：0
> 
> 时间：2013-03-20T12:11:17.177
> 
> 标签：javascript, html, ads, google-dfp

嗨，我尝试将 2 个排行榜放在一页中，但它只显示一个排行榜。

这是我的标题代码

```
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/179670003/Leaderboard', [728, 90], 'div-gpt-   ad-1363780690140-0').addService(googletag.pubads());
googletag.enableServices();
});
</script> 
```

这是我的文档正文

```
<!-- Leaderboard --> 
<div id='div-gpt-ad-1363780690140-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1363780690140-0'); });
</script>
</div>
<!-- Leaderboard -->
<div id='div-gpt-ad-1363780690140-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1363780690140-0'); });
</script>
</div> 
```

是否可以在一页中添加 2 个排行榜横幅？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:30:16.400

尝试创建另一个名为 Leaderboard2 的广告单元。每页只能显示一次 adunit。然后，您可以创建一个包含两个排行榜广告单元的展示位置，并在该展示位置定位您的所有排行榜订单项，然后它们将在两个排行榜广告单元之间智能共享。

# sql - 调用的目标已引发异常。---> System.InvalidOperationException：行/列不存在数据

> ID：15523166
> 
> 赞同：0
> 
> 时间：2013-03-20T12:11:25.460
> 
> 标签：sql, vb.net, oledb

我需要在带有 SQL Server 2008 的新服务器上迁移通知 DTS 包。我在 VB.net 中创建了脚本，以便可以将其作为 SSIS 脚本任务放在那里。我收到以下错误：System.InvalidOperationException：行/列不存在数据

我的代码如下：

```
JobRuningCon = New OleDbConnection(connstr)
JobRuningCon.Open()

' Query to check whether there are any failed jobs for the client
SQL1 = "select message,  [LastRunDate] = convert(varchar, cast(cast([msdb]..sysjobhistory.RUN_DATE as varchar) as datetime), 101),[LastRunTime] =STUFF(STUFF(RIGHT('000000'+CONVERT(VARCHAR(8), [msdb]..sysjobhistory.RUN_TIME), 6), 5, 0, ':'), 3, 0, ':'),[RunDuration] =STUFF(STUFF(RIGHT('000000'+CONVERT(VARCHAR(8), [msdb]..sysjobhistory.RUN_DURATION), 6), 5, 0, ':'), 3, 0, ':')  from msdb..sysjobhistory WITH (NOLOCK) where (step_name like " & Chr(39) & ClientName(i) & Chr(37) & "Nightly Update" & Chr(39) & " OR step_name like " & Chr(39) & ClientName(i) & Chr(37) & "ACN_CIRCULAR_MANAGER" & Chr(39) & ")" & " and run_date like" & Chr(39) & runDate & Chr(39) & ""

JobRuningCom = New OleDbCommand(SQL1, JobRuningCon)
JobRuningComReader = JobRuningCom.ExecuteReader
JobRuningCon.Close()

JobFailureCon = New OleDbConnection(connstr)
JobFailureCon.Open()

' Query to check whether there is any history for tonights job.. if it doesnt exists it might  mean the job is still running
SQL2 = "select step_name,message, LastRunDate = convert(varchar, cast(cast([msdb]..sysjobhistory.RUN_DATE as varchar) as datetime), 101), LastRunTime =STUFF(STUFF(RIGHT('000000'+CONVERT(VARCHAR(8), [msdb]..sysjobhistory.RUN_TIME), 6), 5, 0, ':'), 3, 0, ':'), RunDuration =STUFF(STUFF(RIGHT('000000'+CONVERT(VARCHAR(8), [msdb]..sysjobhistory.RUN_DURATION), 6), 5, 0, ':'), 3, 0, ':')  from msdb..sysjobhistory WITH (NOLOCK)  where  (step_name like " & Chr(39) & ClientName(i) & Chr(37) & "Nightly Update" & Chr(39) & " OR step_name like " & Chr(39) & ClientName(i) & Chr(37) & "ACN_CIRCULAR_MANAGER" & Chr(39) & ")" & "and run_date like" & Chr(39) & runDate & Chr(39) & "and run_status=0"

JobFailureCom = New OleDbCommand(SQL2, JobFailureCon)
JobFailureComReader = JobFailureCom.ExecuteReader
JobRuningCon.Close()

JobSuccessCon = New OleDbConnection(connstr)
JobSuccessCon.Open()

' Query to check whether there are any successful jobs for the client
SQL3 = "select step_name,message,  convert(varchar, cast(cast([msdb]..sysjobhistory.RUN_DATE as varchar) as datetime), 101) as LastRunDate, LastRunTime =STUFF(STUFF(RIGHT('000000'+CONVERT(VARCHAR(8), [msdb]..sysjobhistory.RUN_TIME), 6), 5, 0, ':'), 3, 0, ':'), RunDuration =STUFF(STUFF(RIGHT('000000'+CONVERT(VARCHAR(8), [msdb]..sysjobhistory.RUN_DURATION), 6), 5, 0, ':'), 3, 0, ':')  from msdb..sysjobhistory WITH (NOLOCK) where step_name like " & Chr(39) & ClientName(i) & Chr(37) & "Nightly Update" & Chr(39) & " and run_date like" & Chr(39) & runDate & Chr(39) & "and run_status=1"

JobSuccessCom = New OleDbCommand(SQL3, JobSuccessCon)
JobSuccessComReader = JobSuccessCom.ExecuteReader
JobSuccessCon.Close()

ServerNameCon = New OleDbConnection(connstr)
ServerNameCon.Open()
SQLServerName = "select @@servername as sname"

ServerNameCom = New OleDbCommand(SQL3, ServerNameCon)
ServerNameComReader = ServerNameCom.ExecuteReader
ServerNameCon.Close()

PrevFailCountCon = New OleDbConnection(connstr)
PrevFailCountCon.Open()
SQL4 = "select  count(distinct RUN_DATE) as failcount  from sysjobhistory WITH (NOLOCK) where step_name like " & Chr(39) & ClientName(i) & Chr(37) & " nightly update" & Chr(39) & " and run_date>(select max(run_date)from sysjobhistory where step_name like " & Chr(39) & ClientName(i) & Chr(37) & " nightly update" & Chr(39) & " and run_status=1)"

PrevFailCountCom = New OleDbCommand(SQL4, PrevFailCountCon)
PrevFailCountComReader = PrevFailCountCom.ExecuteReader

PrevFailCountCon.Close()
LastSuccessCon = New OleDbConnection(connstr)

LastSuccessCon.Open()
SQL5 = "select convert(varchar, cast(cast([msdb]..sysjobhistory.RUN_DATE as varchar) as datetime), 101) as LastRunDate, LastRunTime =STUFF(STUFF(RIGHT('000000'+CONVERT(VARCHAR(8), [msdb]..sysjobhistory.RUN_TIME), 6), 5, 0, ':'), 3, 0, ':'), RunDuration =STUFF(STUFF(RIGHT('000000'+CONVERT(VARCHAR(8), [msdb]..sysjobhistory.RUN_DURATION), 6), 5, 0, ':'), 3, 0, ':')  from msdb..sysjobhistory WITH (NOLOCK) where step_name like " & Chr(39) & ClientName(i) & Chr(37) & "Nightly Update" & Chr(39) & " and run_date = (select MAX(run_date) from msdb..sysjobhistory WITH (NOLOCK) where run_status=1and step_name like" & Chr(39) & ClientName(i) & Chr(37) & "Nightly Update" & Chr(39) & ")"

LastSuccessCom = New OleDbCommand(SQL5, LastSuccessCon)
LastSuccessComReader = LastSuccessCom.ExecuteReader

LastSuccessCon.Close()
Failure_20Con = New OleDbConnection(connstr)
Failure_20Con.Open()

SQL6 = "(select count(*) as No_Of_Failure from msdb..sysjobhistory WITH (NOLOCK) where step_name like " & Chr(39) & ClientName(i) & Chr(37) & "Nightly Update" & Chr(39) & ")"

Failure_20Com = New OleDbCommand(SQL6, Failure_20Con)
Failure_20comReader = Failure_20Com.ExecuteReader

Failure_20Con.Close()

Fail_20 = Failure_20comReader.Item("No_Of_Failure")
JobCompletionStatus = ""

While JobRuningComReader.Read
     JobCompletionStatus = JobRuningComReader.Item("message")
End While

' While LastSuccessComReader.Read
' LastDate = LastSuccessComReader.Item("LastRunDate") & "  " & LastSuccessComReader.Item("LastRunTime")
'End While

LastDate = LastSuccessComReader.Item("LastRunDate") & "  " & LastSuccessComReader.Item("LastRunTime")

'Check whether the job has failed more than 20 days
If Fail_20 = 0 Then
    JobStatus = "<p><PRE><font face=Verdana size=1><b> " & ClientName(i) & "</b>" & "<font Color=RED face=Verdana size=2 >  " & " This job has failed more than 20 days.Please Check </br> </PRE></font></font></p>"

' Check whether the job is still running or not. If there are no records for a particular day, it means the job is still running.
ElseIf JobCompletionStatus = "" Then
    JobStatus = "<p><PRE><font face=Verdana size=1><b> " & ClientName(i) & "</b>" & "<font Color=RED face=Verdana size=1>  " & " :There is no record for this job today. The job might have failed to start or might be still running. Please Check. </br> The Last Successful run was on " & LastDate & " </PRE></font></font></p>"
    CountInProgress = CountInProgress + 1

Else
    ' If there is a record then check whether the job is a failure or not
    JobFailureStatus = ""

    While JobFailureComReader.Read
        LastRunDate1 = JobFailureComReader.Item("LastRunDate")
        LastRunTime1 = JobFailureComReader.Item("LastRunTime")
        RunDuration1 = JobFailureComReader.Item("RunDuration")

        While PrevFailCountComReader.Read
            prefailCount = PrevFailCountComReader.Item("failcount")
        End While

        JobFailureStatus = "<p><b><PRE><font face=Verdana size=1>  " & ClientName(i) & "</b>         " & LastRunDate1 & "    " & LastRunTime1 & "          " & RunDuration1 & "        " & "<font Color=RED> FAILED              </font>" & prefailCount & "</br>" & "</br></p><p></br><font Color=RED size=2> The job failed at step: " & JobFailureComReader.Item("step_name") & "" & "  Message: " & "<font Color=RED size=2> Please Check.</PRE></font></p><p>The Last Successful run was on " & LastDate & " </p>"
        CountFailure = CountFailure + 1

    End While
    JobStatus = JobFailureStatus

    If JobFailureStatus = "" Then
        ' Checks whether the job was a success or not.
        While JobSuccessComReader.Read
            LastRunDate1 = JobSuccessComReader.Item("LastRunDate")
            LastRunTime1 = JobSuccessComReader.Item("LastRunTime")
            RunDuration1 = JobSuccessComReader.Item("RunDuration")

            JobStatus = "<p><b><PRE><font face=Verdana size=1>  " & ClientName(i) & "</b>           " & LastRunDate1 & "    " & LastRunTime1 & "          " & RunDuration1 & "            " & "<font Color=green> SUCCEEDED</font>        NA</font></PRE></p>"

            CountSuccess = CountSuccess + 1
        End While
        JobStatus = JobStatus
    End If
End If 
```

# c++ - 结构定义导致我收到多重定义符号错误

> ID：15523170
> 
> 赞同：0
> 
> 时间：2013-03-20T12:11:31.793
> 
> 标签：c++, constructor, struct, linker

我有一个类“dStructs”，其中定义了几个可公开访问的结构，“实体”和“点”。这些结构在类括号 dStructs 中完全定义。但是，我不确定我是否正确定义了它们的构造函数。代码看起来像这样......

```
#pragma once

#include <GL/glut.h>

class dStructs 
{

public:
    struct point
    {
        GLfloat x, y;

        point()
        {

        }

        point(GLfloat aX,GLfloat aY) //constructor for point
        {
            x = aX;
            y = aY;
        }
    };

    struct entity
    {
        point pos, size;

        entity()
        {

        }

        entity(GLfloat posX, GLfloat posY, GLfloat sizeX, GLfloat sizeY)
        {
            pos = point(posX,posY);
            size = point(sizeX, sizeY);
        }

    };

static void copyPoint(point pointToCopy, point& toPoint);
static void copyEntity(entity entityToCopy, entity& toEntity);

}; 
```

我认为我在将构造函数定义放在 struct brats 中而不是在 .cpp 文件中时做错了。所以我尝试将它们移出，并像这样在.cpp中定义它们......

```
#include "dStructs.h"

dStructs::point::point()
{
}

dStructs::point::point(GLfloat aX, GLfloat aY)
{
    x = aX;
    y = aY;
}

dStructs::entity::entity()
{

}

dStructs::entity::entity(GLfloat posX, GLfloat posY, GLfloat sizeX, GLfloat sizeY)
{
    pos = point(posX,posY);
    size = point(sizeX, sizeY);
} 
```

但是，这并不令人高兴，因为在我的代码中使用结构“point”或“entity”的任何地方都会导致未解决的外部符号错误。

任何人都可以在我的结构（及其相关构造函数）的声明中看到我在哪里出错以得到这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:15:02.963

> 但是，这并不令人高兴，因为在我的代码中使用结构“point”或“entity”的任何地方都会导致未解决的外部符号错误。

这是因为一旦将定义移动到`.cpp`文件中，您实际上必须稍后链接到相应的对象。

即如果`myfile.cpp`使用`dStructs`，您都必须包含头文件（就像您已经做的那样）并且：

`g++ -o myprog myfile.cpp dStructs.cpp`

或者

```
g++ -c myfile.cpp
g++ -c dStructs.cpp
g++ -o myprog myfile.o dStructs.o 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:28:54.463

您收到多个定义，因为您在标头和 .cpp 文件中有一个定义

将标题中的构造函数声明更改为仅方法原型。

IE

```
 point() // **change this to point();**
    {//remove

    }//remove
    point(GLfloat aX,GLfloat aY) // **change this to point(GLfloat aX,GLfloat aY);**
    {//remove
        x = aX;//remove
        y = aY;//remove
    }//remove 
```

# c# - 如何将eval字符串放入函数中？

> ID：15523176
> 
> 赞同：1
> 
> 时间：2013-03-20T12:11:50.647
> 
> 标签：c#, asp.net, webforms

我的问题是我怎么能把这个

```
<%# Eval("about")%> 
```

进入这个功能

```
<% Utils.UserUtils.showNiceDesc(here goes string - "about") %> 
```

在 asp.net 网络表单中？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:13:52.500

这可以满足您的要求；它将 Eval 的结果传递给一个方法。

```
<%# Utils.UserUtils.showNiceDesc(Eval("about")) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:13:36.527

使用`single`和`double`引号的组合。

```
'<% Utils.UserUtils.showNiceDesc(Eval("about")) %>' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:40:13.413

像下面这样
使用你应该使用`ToString()`函数。

```
'<% Utils.UserUtils.showNiceDesc(Eval("about").ToString()) %>' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:16:10.673

```
<tag text='<%# Utils.UserUtils.showNiceDesc(((YourDataItemClass)Container.DataItem).about) %>' /> 
```

或者

```
<tag text='<%# Utils.UserUtils.showNiceDesc(DataBinder.Eval("about")) %>' /> 
```

参考： http: [//msdn.microsoft.com/en-us/library/bda9bbfx (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bda9bbfx(v=vs.100).aspx)

# entity-framework-5 - 带有存储库的微风

> ID：15523190
> 
> 赞同：6
> 
> 时间：2013-03-20T12:12:27.990
> 
> 标签：entity-framework-5, repository-pattern, breeze, single-page-application

我们一直在密切关注使用 Breezejs 在客户端和服务器之间提供数据上下文的 SPA。这些功能在客户端上看起来很棒，但我们希望在服务器上使用存储库模式并获得良好的关注点分离，而不必从 EFContextProvider 继承，这会导致 IoC 和可能的单元测试/模拟问题。我们一直在关注 Pluralsight 上 John Papa 的 Code Camper 示例，该示例最初使用没有 Breeze 的 Respository/UoW 模式，然后我们查看了包含 Breeze 的 Hot Towel 模板。

有谁知道如何将 Breeze 抽象为一个存储库，该存储库保持 DbContext 干净（如果使用实体框架）封装。此外，如果您不使用实体框架并且更喜欢使用另一个 ORM，例如 nHibernate，会发生什么情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:15:54.573

感谢您在这里发帖，因为我相信其他人会问这个:)

如果您不使用 EF，那么您将无法获得 Breeze 提供的自动元数据创建功能。但是，您当然可以将 EF 上下文抽象到一个 Repo 中，并且仍然可以获得好处。

Breeze/Knockout ASP.NET SPA 模板显示已分解的存储库。我相信某处有 UoW 的样本 - 但它在哪里逃跑了。我已经要求 Breeze 的人指出一个答案。

如果您使用 nHibernate，则没有自动元数据 - 但是对于 Breeze，我可以看到这是一个很棒的功能请求。

# scala - 一次性资源模式

> ID：15523192
> 
> 赞同：9
> 
> 时间：2013-03-20T12:12:29.900
> 
> 标签：scala, resource-cleanup, disposable

Scala 库中是否有任何标准化来支持***一次性资源模式***？

我的意思是类似于 C# 和 .NET 支持的东西，仅举一个例子。

例如，官方 Scala 库是否提供如下内容：

```
trait Disposable { def dispose() }

class Resource extends Disposable

using (new Resource) { r =>

} 
```

注意：我知道这篇文章 « [Scala finally block closing/flushing resource](https://stackoverflow.com/questions/8865754/scala-finally-block-closing-flushing-resource/8865960#8865960) » 但它似乎没有集成在标准库中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-03-31T18:50:34.600

开始`Scala 2.13`，标准库提供了一个专用的资源管理实用程序：[`Using`](https://www.scala-lang.org/files/archive/api/2.13.x/scala/util/Using$.html).

[`Releasable`](https://www.scala-lang.org/files/archive/api/2.13.x/scala/util/Using$$Releasable$.html)您只需使用trait提供如何释放资源的隐式定义：

```
import scala.util.Using
import scala.util.Using.Releasable

case class Resource(field: String)

implicit val releasable: Releasable[Resource] = resource => println(s"closing $resource")

Using(Resource("hello world")) { resource => resource.field.toInt }
// closing Resource(hello world)
// res0: scala.util.Try[Int] = Failure(java.lang.NumberFormatException: For input string: "hello world") 
```

请注意，`Resource`为了清楚起见，您可以将隐式可释放对象放在伴随对象中。

* * *

请注意，您也可以使用 Java[`AutoCloseable`](https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html)代替，`Using.Releasable`因此任何 Java 或 Scala 对象实现`AutoCloseable`（例如`scala.io.Source`或`java.io.PrintWriter`）都可以直接与 一起使用`Using`：

```
import scala.util.Using

case class Resource(field: String) extends AutoCloseable {
  def close(): Unit = println(s"closing $this")
}

Using(Resource("hello world")) { resource => resource.field.toInt }
// closing Resource(hello world)
// res0: scala.util.Try[Int] = Failure(java.lang.NumberFormatException: For input string: "hello world") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T22:11:25.277

此时，您将需要查看[Scala ARM](https://github.com/jsuereth/scala-arm)以获得通用实现。不过，正如您所提到的，它是一个单独的库。

了解更多信息：

[This answer](https://stackoverflow.com/a/5149144/1072626) at [functional try & catch w/Scala](https://stackoverflow.com/q/5149009/1072626)链接到具有代码示例的 scala wiki 上的 Loan Pattern。（我不会重新发布链接，因为链接可能会更改）

[在 finally 块中使用变量](https://stackoverflow.com/questions/17627599/using-a-variable-in-finally-block)有一些答案显示了您可以编写自己的方法。

# authentication - 为什么我的 jxplorer 无法显示所需的数据？

> ID：15523194
> 
> 赞同：1
> 
> 时间：2013-03-20T12:12:35.180
> 
> 标签：authentication, ldap

我想获取存储在我的 ldap 服务器中的全部数据。

我第一次登录 jxplorer。登录后，我希望在我的 jxplorer 上获得全部数据，但它只是显示一些已填写的字段，而不是全部：

![http://postimage.org/image/497y5vwy5/](../Images/10b476c11b1d02bf929149afaf556942.png)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:16:34.087

使用管理员帐户。不需要 SSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T01:11:29.990

看不到数据的原因通常与权限有关。

一方面，虽然您可能认为自己的身份验证正确，但您可能只在匿名绑定中成功，因此只能看到可公开访问的属性。

另一方面，也许您正确绑定的帐户没有足够的权限来查看您想要的内容。

在紧握的手上……该死的，我想不出第三个人来开这个玩笑。

# eclipse - 无法让 CodeSniffer 在（任何）Eclipse 中工作

> ID：15523195
> 
> 赞同：0
> 
> 时间：2013-03-20T12:12:36.983
> 
> 标签：eclipse, codesniffer

我安装了 Eclipse，然后安装了最新的 PDT，然后从官方更新站点安装了 CodeSniffer。重新启动eclipse后，没有任何变化。根本没有验证。我可以在选定的文件上手动启动 PHP CodeSniffer，但没有任何反应。尝试使用 Juno (4.2) 和 Kepler (4.3)，甚至使用 Indigo。没有任何效果。所有 howto 站点都简单地告诉从更新站点安装 CodeSniffer，但它不起作用。

有谁知道如何让它工作，所以它会在我的问题面板中打印警告？我也使用“pear install PHP_CodeSniffer”在命令行上安装了它。在命令行上手动调用它可以正常工作，但在 eclipse 中不行。

PEAR 库设置为内部，选择 Zend 作为标准。PHP Exec 也设置为我在 /usr/local/bin 下自定义编译的一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:13:28.377

我不得不删除我的 .metadata 和所有设置，所以我可以从头开始。不得不再次添加我所有的项目，但至少 CodeSniffer 正在工作。所以有什么东西挡住了它。

# html - 强制布局中的一列优先

> ID：15523198
> 
> 赞同：1
> 
> 时间：2013-03-20T12:12:46.443
> 
> 标签：html, css, tablelayout

我有一个页面布局的一部分，它可以在右列中选择 1 到 3 个按钮，左列的标题可能是几个单词甚至是一个段落。

右列有按钮，必须优先并保持与页面宽度右侧对齐。按钮必须保持内联而不换行。您可以删除一两个按钮，它会将文本强制向左，这是正确的。

在环绕文本的情况下，左列需要尽可能靠近右列。

我想到了使用 CSS 表格显示的想法，它在长文本的情况下效果很好，但对于短文本，按钮列远离右侧。

尝试删除除 3 或 4 个单词之外的所有文本，然后按钮会向左对齐。我在这里采取了错误的方法吗？

这是 HTML，这是一个小提琴[http://jsfiddle.net/MaureenDunlap/tvFbN/16/](http://jsfiddle.net/MaureenDunlap/tvFbN/16/)

```
<div id="wrapper">
<div id="container">
    <div id="header_wrapper">

        <div class="player_header_info">In vel purus ipsum. quam tempor auctor. Praesent ac leo magna, at condimentum felis. Nullam vel tortor semper metus bibendum iaculis. In consequat arcu aliquam nibh posuere non cursus eros dictum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nulla venenatis gravida mi eget vestibulum. 
            <div class="player_header_secondary">February 28, 2013</div> 

        </div>
        <div id="buttons">
            <div class="button_container">
                <img src="http://www.likno.com/Images/lwbm/Single_Mesh_11.jpg" />
                <img src="http://www.likno.com/Images/lwbm/Single_Mesh_11.jpg" />
                <img src="http://www.likno.com/Images/lwbm/Single_Mesh_11.jpg" />
            </div>
        </div>
    </div>
</div>
<div id="normal">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam sit amet tortor at diam aliquet ornare eu nec leo. Phasellus ut blandit leo. Vivamus viverra velit eget quam tempor auctor. Praesent ac leo magna, at condimentum felis. Nullam vel tortor semper metus bibendum iaculis. In consequat arcu aliquam nibh posuere non cursus eros dictum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nulla venenatis gravida mi eget vestibulum. Phasellus elit ipsum, convallis a porttitor eu, blandit non justo. Pellentesque gravida, dui vel vulputate cursus, diam nisl eleifend massa, ullamcorper cursus nisl diam at erat. Nulla urna odio, vehicula et commodo sit amet, commodo at diam. Phasellus molestie tincidunt lacus, varius semper ligula tincidunt non. Nullam fermentum, enim ut dictum gravida, libero mauris pretium lacus, ac vehicula neque massa at mi.</p>
    <p>Nam dignissim vehicula eros non viverra. Vestibulum non tellus sed ante placerat pharetra in vitae velit. Vestibulum eu lacinia urna. Nullam libero mauris, venenatis in condimentum auctor, porta tempor massa. In faucibus sapien sit amet tellus faucibus quis dictum eros pellentesque. Fusce id odio nec orci pellentesque bibendum. Curabitur viverra, nisl nec sodales elementum, lectus nisi vulputate leo, non cursus est libero eget odio. Curabitur a libero arcu. Etiam pellentesque mauris ut mi pellentesque euismod. Aenean sit amet consectetur diam. Curabitur nec velit leo. Sed feugiat lacinia sagittis.</p>
    <p>Nam quis nulla quis lorem ornare semper nec eget orci. Proin justo lectus, suscipit rhoncus sollicitudin nec, dignissim eu mauris. Curabitur sit amet tortor in nisl vulputate placerat in nec lectus. Praesent euismod pellentesque augue, eu condimentum quam pellentesque et. Aliquam erat volutpat. Nam vitae leo et augue placerat lobortis et id magna. Curabitur sit amet ante id felis luctus iaculis. Quisque ac orci eu purus tempor consectetur vitae et dui. Mauris vehicula tincidunt ligula a cursus. Nunc imperdiet semper pulvinar. Phasellus iaculis laoreet quam, ac adipiscing mi pellentesque eu.</p>
    <p>Nulla adipiscing fermentum leo, eget convallis nulla facilisis vel. Phasellus mollis ultrices risus vel volutpat. Nullam in enim mi. Duis eget ligula lectus, eget feugiat mauris. Duis at tortor enim, sit amet euismod turpis. Cras mattis tincidunt dolor nec feugiat. Mauris hendrerit lacus eu augue ultrices eu porttitor tellus semper. Ut mattis augue vitae velit tincidunt tristique.</p>
</div> 
```

这是我的CSS：

```
#header_wrapper {
display: table;
border-collapse: collapse;
width:100%;
border:1px dotted #ccc;
}

.player_header_info {
display: table-cell;
vertical-align:top;
background-color: #e7dbcd;
padding-left:5px;
}

#buttons {
display: table-cell;
padding-left: 10px;
vertical-align:top;
}
.button_container {
position:relative;
display:inline; 
white-space:nowrap;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:35:14.563

如果你只是想让你的按钮保持在右边，你可以添加`text-align:right`到`#buttons`

[http://jsfiddle.net/tvFbN/20/](http://jsfiddle.net/tvFbN/20/)

否则，您将需要添加`min-width`到`.player_header_info`

当您使用表格单元格而不给它们宽度时，它们将始终根据其中的内容重新调整大小，而不会破坏顶级表格元素的宽度

# cloud-foundry - vmc 隧道无法在 api.cloudfoundry.com 上使用 Ruby 2.0

> ID：15523205
> 
> 赞同：3
> 
> 时间：2013-03-20T12:12:59.073
> 
> 标签：cloud-foundry, tunnel, vmc

我正在尝试`mysql`开启服务，`api.cloudfoundry.com`但面临以下错误。

我已经安装`Ruby 2.0`

已安装的 gem 版本： *** 本地 GEMS ***

```
addressable (2.3.3, 2.2.8),async_sinatra (0.5.0),bigdecimal (1.2.0),caldecott (0.0.5),caldecott-client (0.0.2),cf-uaa-lib (1.3.10),cfoundry (0.5.3.rc5),clouseau (0.0.2),
em-http-request (0.3.0),em-websocket (0.3.8),escape_utils (0.3.2),eventmachine (1.0.3 ruby x86-mingw32),interact (0.5.2),io-console (0.4.2),json (1.7.7, 1.6.8),json_pure (1.7.7),
manifests-vmc-plugin (0.6.3.rc2),mime-types (1.21),minitest (4.3.2),mothership (0.5.1),
multi_json (1.7.0),multipart-post (1.2.0),psych (2.0.0),rack (1.5.2),rack-protection (1.5.0),rake (0.9.6),rdoc (4.0.0),rest-client (1.6.7),rubygems-update (2.0.3),
rubyzip (0.9.9),sinatra (1.4.1),test-unit (2.0.0.0),tilt (1.3.6),tunnel-vmc-plugin (0.2.2),
uuidtools (2.1.3),vmc (0.5.1.rc4) 
```

`C:\Users\user>vmc`隧道 `DL`已弃用，请使用`Fiddle`

1：蒙哥你好

2：mysql-你好

3：兔子你好

哪个服务实例？> 2

1：无

2：mysql

3：mysql转储

您想从哪个客户入手？> 2

```
Opening tunnel on port 10000... FAILED
CFoundry::BadResponse: 400: <h2>Client sent a bad request.</h2> 
```

有关详细信息，请参阅`~/.vmc/crash`

崩溃内容：

```
Time of crash:
  2013-03-20 17:30:10 +0530

CFoundry::BadResponse: 400: <h2>Client sent a bad request.</h2>

<<<
REQUEST: GET http://api.cloudfoundry.com/apps/caldecott
REQUEST_HEADERS:
  Accept : application/json
  Authorization : bearer eyJhbGciOiJSUzI1NiJ9.eyJleHAiOjEzNjQwOTc3OTksInVzZXJfbmFtZSI6ImFtdWxsYXdvcmtAZ21haWwuY29tIiwic2NvcGUiOlsiY2xvdWRfY29udHJvbGxlci5yZWFkIiwib3BlbmlkIiwicGFzc3dvcmQud3JpdGUiXSwiZW1haWwiOiJhbXVsbGF3b3JrQGdtYWlsLmNvbSIsImF1ZCI6WyJvcGVuaWQiLCJjbG91ZF9jb250cm9sbGVyIiwicGFzc3dvcmQiXSwianRpIjoiOGEzYmNhYzEtOTdjMC00OGY2LWE1YjAtNmZhNjFkNTM1YzRiIiwidXNlcl9pZCI6Ijc1NGE0YmE0LTQxNDMtNDA1NC05OWE3LWRkOGJlYTA1NzMyOSIsImNsaWVudF9pZCI6InZtYyJ9.bgY7BUi7DpjKL4gy5YkbTJDYuYXHhHPzKPZApabeA_dpRLfcr1yhprlx2Yx1Shavdso-R9jYg3jiy9MuTUhZ6hvIVVoKcaFxcw43owb2ztXxb_VM6N2wmyXnLX5dmSXNIv7xa5hgbeuwE32rSR66sLNGEgHu-sreaKQIN9V6GbOe-Bj4WN-uux0O8AGmol5sp1QhD4Nf2nAmsiPHR63OhS6-SDBYgizcmpfWgwGeOMvcTumbYJ6PpvRNPa20pQomjDOqSY2Jn_tQM7RfZCklpyZKvdt2RIQK5fWAekMLWlnG3aJYHE90UHnxg0UclhwzgrgI0HiDWkQ_42dqOX446g
  Content-Length : 297
  Content-Type : application/json
REQUEST_BODY: {"name":"caldecott","instances":1,"staging":{"model":"sinatra","stack":"ruby19","command":"bundle exec ruby server.rb -p $VCAP_APP_PORT"},"resources":{"memory":64},"env":["CALDECOTT_AUTH=9d498baf-9102-4c80-851d-f400530a261f"],"uris":["caldecott-b58c1.cloudfoundry.com"],"services":["mysql-hello"]}
RESPONSE: [400]
RESPONSE_HEADERS:
  content-type : text/html
RESPONSE_BODY:
<h2>Client sent a bad request.</h2>
>>>

cfoundry-0.5.3.rc5/lib/cfoundry/baseclient.rb:167:in `handle_error_response'
cfoundry-0.5.3.rc5/lib/cfoundry/baseclient.rb:137:in `handle_response'
cfoundry-0.5.3.rc5/lib/cfoundry/baseclient.rb:87:in `request'
cfoundry-0.5.3.rc5/lib/cfoundry/baseclient.rb:72:in `post'
cfoundry-0.5.3.rc5/lib/cfoundry/v1/model_magic.rb:46:in `block (2 levels) in define_client_methods'
cfoundry-0.5.3.rc5/lib/cfoundry/v1/model.rb:83:in `create!'
tunnel-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/tunnel.rb:145:in `push_helper'
tunnel-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/tunnel.rb:88:in `create_helper'
tunnel-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/tunnel.rb:28:in `open!'
tunnel-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/plugin.rb:41:in `block in tunnel'
interact-0.5.2/lib/interact/progress.rb:98:in `with_progress'
tunnel-vmc-plugin-0.2.2/lib/tunnel-vmc-plugin/plugin.rb:40:in `tunnel'
mothership-0.5.1/lib/mothership/base.rb:66:in `run'
mothership-0.5.1/lib/mothership/command.rb:72:in `block in invoke'
mothership-0.5.1/lib/mothership/command.rb:86:in `instance_exec'
mothership-0.5.1/lib/mothership/command.rb:86:in `invoke'
mothership-0.5.1/lib/mothership/base.rb:55:in `execute'
vmc-0.5.1.rc4/lib/vmc/cli.rb:150:in `block (2 levels) in execute'
vmc-0.5.1.rc4/lib/vmc/cli.rb:161:in `save_token_if_it_changes'
vmc-0.5.1.rc4/lib/vmc/cli.rb:149:in `block in execute'
vmc-0.5.1.rc4/lib/vmc/cli.rb:100:in `wrap_errors'
vmc-0.5.1.rc4/lib/vmc/cli.rb:145:in `execute'
mothership-0.5.1/lib/mothership.rb:45:in `start'
vmc-0.5.1.rc4/bin/vmc:11:in `<top (required)>'
D:/Ruby200/bin/vmc:23:in `load'
D:/Ruby200/bin/vmc:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:26:15.153

尝试删除 caldecott 应用程序，然后再次尝试隧道；

```
$ vmc delete caldecott
$ vmc tunnel 
```

# ios - 找到前进路径上的最近点

> ID：15523206
> 
> 赞同：0
> 
> 时间：2013-03-20T12:13:06.497
> 
> 标签：ios, location

给定一条从起点到目标的 1000 米长的路径，由有限数量的`CLLocation`点组成（估计大约 100 个）。假设用户在路径上的某处并且`CLLocation`来自 iOS 定位服务，那么计算沿路径向前的最近点的最佳方法是什么？

使用 找到最近的点很容易`-[CLLocation distanceFromLocation:]`，但是当用户通过一个点并移向下一个点时，前一个点仍然是最近的点，直到他通过前一个点和下一个点之间的中间点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:01:59.170

您可以保留一个由排序的（从路径开始到结束）CLLocation 点（假设为 100）组成的数组，并仅评估这些点以找到最近的将被访问的点。要找到访问点，您需要保留起始位置并测量从起点到用户当前位置的距离（d1）。如果 d1 > 从开始到排序数组中下一个点的距离，并且当前位置在排序数组中的下一个点附近（10 - 100 m），则删除该点，否则用户没有访问/经过该位置，所以你保留它在排序后的数组中。

# html - 在不同大小的容器中的左浮动 div 之间绘制水平线

> ID：15523209
> 
> 赞同：1
> 
> 时间：2013-03-20T12:13:08.363
> 
> 标签：html, css-float

如果我有更多的 div 漂浮在容器 div 中，如果它们不适合一行，我如何在它们之间水平画线？

例如，如果：

```
<div id="main">
  <div id="div1" style="float:left; width: 80px;"></div>
  <div id="div2" style="float:left; width: 80px;"></div>
  <div id="div3" style="float:left; width: 80px;"></div>
</div> 
```

主 div 的“**宽度**”变得小于 240 像素，则包含的 3 个 div 将显示为两行。在这种情况下，我想在这两行**之间绘制全长线。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:21:05.040

如果 div 的高度是已知的，最好的方法是在“主”id 中有一个重复的背景图像，如下所示：

```
#main {
background-image:url('horizontal_line.gif');
background-repeat:repeat;
} 
```

诀窍是，horizo​​ntal_line.gif 的高度必须高于 div 单位的高度，这样如果只有一行，该行将被隐藏。

Horizo​​ntal_line.gif（或 png）应该是一条宽度为 1px，高度为例如 100px 的直线，其中 99px 是透明的，底部的 1px 是线条的颜色（假设您希望线条的粗细为为 1 像素）..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:43:56.770

如果你想用普通的css和不同的高度来做，你可以这样做（取决于你的页面结构，你可能需要做一些更改），它确实添加了一些额外的html代码，但取决于你想要做什么它是一种快速灵活的解决方案。

因为`overflow: hidden`它不会在所有情况下都有效。

**css**

```
#main {
    overflow: hidden; //<-- hides the line if the element is in the frist row
}

.line {
    position: relative;
    font-size: 0px;
    top: -1px; //<-- hides the line if the element is in the frist row
    left: 0px;
    width: 240px; //<-- the full width of the line
    border-top: 1px solid black;
} 
```

**html**

```
<div id="main">
    <div id="div1" style="float:left; width: 80px;">
        <div class='line'></div>
        aaa<br>aaaaa
    </div>
    <div id="div2" style="float:left; width: 80px;">
        <div class='line'></div>
        aaa<br>aaaaa
    </div>
    <div id="div3" style="float:left; width: 80px;">
        <div class='line'></div>
        aaaa<br>aaaaa<br>aaaaaa
    </div>
</div> 
```

# magento - 如何在产品列表中添加产品评级？

> ID：15523210
> 
> 赞同：2
> 
> 时间：2013-03-20T12:13:10.737
> 
> 标签：magento, rating

我在主页内容部分显示特定类别的产品。我制作了一个单独的 .phtml 文件来显示我的主页。现在我想显示产品的评级（产品已经评级）。我该如何展示它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:53:53.823

如果您查看类别列表模板，很容易弄清楚类别页面如何呈现评论摘要以显示评分块。

首先加载有问题的产品：

```
$product = Mage::getModel('catalog/product')->load($id); 
```

然后创建一个产品列表块以访问正确的方法：

```
$block = Mage::app()->getLayout()->createBlock('catalog/product_list'); 
```

最后运行该`getReviewsSummaryHtml()`方法并将产品传递给它以获取摘要 HTML。

```
$html = $block->getReviewsSummaryHtml($product, 'short'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T14:43:21.327

你可以这样做。

```
$_product = Mage::getModel('catalog/product')->load($id);
if ($_product->getRatingSummary() && $rating = $this->getReviewsSummaryHtml($_product, 'short')) : 
    echo $rating;
else:
    echo "<a href='$_product->getProductUrl()'>" . $this->__('Be the first to review this') . "</a>";
endif; 
```

# ruby-on-rails - 限制belongs_to ActiveRecord中的兄弟姐妹数量？

> ID：15523211
> 
> 赞同：1
> 
> 时间：2013-03-20T12:13:12.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord, belongs-to

您将如何验证属于父对象的子对象的数量？

例如，如果我有一个接受嵌套属性作为答案的问题对象：

```
class Question < ActiveRecord::Base
  has_many :answers
  accepts_nested_attributes_for :answers, :allow_destroy => true
end 
```

而且我想限制答案的数量，我可能会向答案对象添加自定义验证，以检查其父对象并计算其他答案，如下所示：

```
class Answer < ActiveRecord::Base

  belongs_to :question
  validate :check_max_answers

  private

  def check_max_answers
    count = question.answers.select {|a| a != self}.count
    if (count > 10)
      errors.add(:answers, 'Too many answers!')
    end
  end

end 
```

当 check_max_answers 运行时，它只计算已经保留的其他答案。

因为答案被保存为嵌套属性，所以验证都在初始保存时通过，因为没有保存任何问题，然后它们都被保存并因此变得无效！

同样，如果我将验证放在问题对象上，也会发生同样的问题，因为 answers.count 在初始保存之前始终为 0。

我究竟做错了什么？是否有解决方法来执行这种验证？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:04:45.923

解决了这个。它只计算数据库中的答案的原因是我使用了 .count 而不是 .size。

就我而言，我还需要打折标记为销毁的答案。所以这个问题的验证看起来像：

```
 def check_answers
    if answers.select{|a|not a._destroy}.size > 10
      errors.add(:answers, 'Too many answers')
    end
  end 
```

这按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:21:49.837

has_many 关联支持选项 :limit，如果我正确阅读了您的问题，它应该会限制您的结果。

# objective-c - 如何调用 UItableview 委托方法。当 tableview 处于“for”循环中时？

> ID：15523214
> 
> 赞同：4
> 
> 时间：2013-03-20T12:13:17.387
> 
> 标签：objective-c, uitableview

// 我在**for 循环**中创建表视图。循环一次后，需要调用 tableview 委托/数据源方法。但是这里的方法（委托/数据源）在完成循环后调用

> //**注意**：我在基于页面控制器的滚动视图中显示所有表格

// 这是我的代码

```
for(int i=0; i < 10; i++)
{
table_obj[i] = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 700, 500)];
            table_obj[i].separatorStyle = UITableViewCellSeparatorStyleNone;
            table_obj[i].separatorColor = [UIColor clearColor];
            table_obj[i].delegate = self;
            table_obj[i].dataSource = self;
            table_obj[i].backgroundColor = [UIColor clearColor];
            [scrollview addSubview:table_obj[i]];

            [table_obj[i] reloadData];
} 
```

//数据仅在第 10 个表中加载。并非在所有表格中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:22:48.033

我认为你应该使用 tag( `table_obj[i] = i`) 来判断委托是由哪个 tableView 调用的。

例如 ：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        switch (tableView.tag) {
        case 0:
            //do something
            break;
        case 1:
            //do something
        break;

        ... ...

        default:
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:23:13.767

那是因为当您将委托/数据源设置为 self 时，在循环中它会被覆盖，并将数组中的最后一个作为当前委托/数据源。

您可以在 tableViews 中设置“标签”，然后在回调中根据 tableView 的标签进行操作。

另一种选择是循环遍历 tableViews 数组以获取当前的，但这不是很有效，所以我相信第一种选择更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T07:14:31.880

如果您在那之后重新加载表，那么它应该可以正常工作。

我认为您在其中添加的视图，而不是在您的方法中添加该视图，请`(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath` 尝试使用自定义单元格概念。并在您从一个表格视图转到另一个表格视图时重新加载您的表格。

[自定义单元教程。](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html)

# php - PSR-0 代表什么？

> ID：15523217
> 
> 赞同：77
> 
> 时间：2013-03-20T12:13:26.010
> 
> 标签：php

我知道**PSR-0**是什么，以及如何、为什么、在哪里使用它。

我已经用谷歌搜索了这个并查看了与 stackoverflow 相关的帖子，但**找不到**任何东西。即使在其[官方页面上](http://www.php-fig.org/psr/psr-0/)也没有这样的定义。

那么，问题是，**PSR-0 究竟代表**什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-20T12:15:14.283

PSR 代表 PHP 标准推荐，如[http://www.php-fig.org/faqs/#what-does-psr-stand-for](http://www.php-fig.org/faqs/#what-does-psr-stand-for)和此处[http://www.php-fig.org/psr/中所述](http://www.php-fig.org/psr/)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-03-20T12:18:50.557

PSR 是用于定义 PHP 编码标准的规范。目前有六个被接受的建议：

*   [PSR-0](http://www.php-fig.org/psr/psr-0/)
*   [PSR-1](http://www.php-fig.org/psr/psr-1/)
*   [PSR-2](http://www.php-fig.org/psr/psr-2/)
*   [PSR-3](http://www.php-fig.org/psr/psr-3/)
*   [PSR-4](http://www.php-fig.org/psr/psr-4/)
*   [PSR-7](http://www.php-fig.org/psr/psr-7/)

每个解决编码的特定方面。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-20T12:21:24.720

> PSR，一种 PHP 规范请求，是一种尝试标准化人们使用 PHP 的方式，希望不同的代码库集能够协同工作。 [http://petermoulding.com/php/psr](http://petermoulding.com/php/psr)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:16:34.433

PSR 代表提出标准建议。我不确定它是否在其他任何地方使用，但在当前上下文中，它是 PHP-FIG（PHP 框架互操作性组）的一部分。

如需进一步参考 [http://blog.jayawi.com/psr-0/](http://blog.jayawi.com/psr-0/)

# vi - 通用编号的vim替换

> ID：15523221
> 
> 赞同：0
> 
> 时间：2013-03-20T12:13:40.003
> 
> 标签：vi

我正在尝试用 vim 将文件中的某个字符序列替换为另一个字符序列。我在一个文件中有这个：aname;1234 anothername;1456 again;1478 againBis;10253 things;10547 thingsBis;12457 etc...

并且我想用“;01”序列替换数字为 4 个字符长的每一行上的“;1”序列，以便数字为 5 个字符长。

我在 vi 中尝试过：

```
:1,$s:;1...:;01...:g 
```

但替换结果为：aname;01... anothername;01... again;01... againBis;10253 things;10547 thingsBis;12457 etc...

它删除了“1”之后的字符......有人可以帮忙吗？？？坦克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:20:54.860

以下命令应该执行您想要的操作：

**更新：**

`:1,$s:;\(1[0-9]\{3\}$\):;0\1:g`

# c# - 如何以不同的颜色显示文本

> ID：15523225
> 
> 赞同：2
> 
> 时间：2013-03-20T12:13:48.910
> 
> 标签：c#, winforms, richtextbox

我正在尝试使用 c# 中的应用程序中的窗口创建 GUI。我最近开始了。我在显示一些文本信息时遇到了一个问题。

我正在获取多个传感器数据，每个传感器都有名称、编号和数据。在这里，我能够将所有传感器数据放入“_sensordata”。

我能够以块颜色打印来自传感器的数据，为此，下面的代码运行良好。问题是我想为每个传感器数据设置一些条件以显示不同颜色的文本。

例如，我有一个名为“温度”的传感器。目前温度数据和温度传感器名称以方块颜色显示。现在，当温度小于“0”或大于“150”时，我想以“红色”显示值。我不知道如何显示。我对每个传感器都有相同类型的条件，那么如何实现这一点。我想以“块”颜色显示“sensorData.EngText”，如果它在范围之间，否则我需要以“红色”颜色显示（对于所有传感器）。

我有下面的富文本格式代码，所以任何人都可以建议我如何为下面代码中的文本之一添加颜色。

```
if (Display != null)
                    {        //UpdateDisplay1();
                        StringBuilder text = new StringBuilder();
                        text.Append("{\\rtf1\\ansi\\ansicpg1252\\deff0\\deflang1044");
                        text.Append("{\\fonttbl{\\f0\\fnil Tahoma;}}");
                        text.Append("{\\colortbl;\\red0\\green0\\blue0;\\red255\\green0\\blue0;\\red255\\green255\\blue0;}");

                        text.Append("\\viewkind4\\uc1\\pard");
                        text.Append("{\\tx100\\tx2100\\tx4100\\tx6100\\tx8100\\tx10100");
                        text.Append("\\tx12100\\tx14100\\tx16100\\tx18100\\tx20100}");
                        text.Append("\\fs20\\ql\\b");
                        text.Append(string.Format("\\tab {0}", e.Data.SensorName));
                        text.Append("\\par\\fs35\\ql\\b0");
                        text.Append(string.Format("\\tab {0}", e.Data.EngText));

                        if (Display.InvokeRequired)
                        {
                            Display.Invoke((MethodInvoker)delegate { Display.Rtf = text.ToString(); });
                        }
                        else
                        {
                            Display.Rtf = text.ToString();
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:31:11.703

您无需手动构建 RTF - 将工作留给 RichTextBox！

```
richTextBox.SelectionBackColor = Color.Red;
richTextBox.AppendText("Text on red background");
richTextBox.SelectionBackColor = richTextBox.BackColor;
richTextBox.AppendText("Back to regular background"); 
```

现在，有许多 RichTextBox 不支持的 RichText 功能，例如行间距 - 为此的 IP/Invoked SendMessage 消息。

# iphone - 通过 NSFetchedResultsController 在 UITableView 中显示重复的单元格？

> ID：15523234
> 
> 赞同：0
> 
> 时间：2013-03-20T12:14:05.007
> 
> 标签：iphone, objective-c, uitableview, nsfetchedresultscontroller, nsfetchrequest

我正在查询核心数据以在一群人中找到“最旧”和“最重”。对于较大的数据集，这通常有效（因为重复匹配的机会较小），但对于一个小数据集，其中最老的人也可能是最重的我遇到问题。

```
[John, 77, 160]
[Pete, 56, 155]
[Jane, 19, 130]
[Fred, 27, 159]
[Jill, 32, 128] 
```

因为我想在 2`UITableViewCell`秒内显示此信息，所以`UITableView`我首先运行 2 `NSFetchRequests`（一个找到最旧的，第二个找到最重的）我是他们`objectID`为每个托管对象获取 s 并将它们添加到最终`NSFetchRequest`我用来设置我的`NSFetchedResultsController`.

```
// FETCH REQUEST - OLDEST, HEAVIEST
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"People"];
NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"age" ascending:YES];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:descriptor]];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF IN %@", IDArray];
[fetchRequest setPredicate:predicate]; 
```

如果我“打印最终的描述”，`NSFetchRequest`它确实包含 2 个指向 managedObjects 的指针。

```
(i.e. [John, 77, 160] [John, 77, 160]) 
```

我的问题似乎是当我这样做时

```
[[self fetchedResultsController] performFetch:nil]; 
```

委托`UITableView`方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSArray *sectionArray = [[self fetchedResultsController] sections];
    id <NSFetchedResultsSectionInfo> sectionInfo = [sectionArray objectAtIndex:0];
    NSUInteger numberOfRows = [sectionInfo numberOfObjects];
    NSLog(@"ROWS: %u", numberOfRows);
    return numberOfRows;
} 
```

仅显示为 1 并且仅在 my中`numberOfRows`显示单个 [John, 77, 160]`UITableView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:34:29.013

提取请求不会返回重复的对象。它返回与谓词匹配的所有对象。所以

```
[NSPredicate predicateWithFormat: @"objectID = %@", oid]
[NSPredicate predicateWithFormat: @"(objectID = %@) OR (objectID = %@)", oid, oid]
[NSPredicate predicateWithFormat: @"objectID IN %@", @[oid, oid]] 
```

返回具有给定对象 ID 的所有一个对象（如果有）。

在您的情况下，您已经拥有要显示的对象。因此，我建议将它们存储在一个数组中并将其用作表视图数据源，而不是使用获取的结果控制器。

# c# - 为什么创建私有类时 VS IDE 会出错

> ID：15523236
> 
> 赞同：-2
> 
> 时间：2013-03-20T12:14:11.530
> 
> 标签：c#, oop

如果我们在任何命名空间下创建私有类，那么我们会得到编译错误，但是如果我们将私有类创建为另一个类中的嵌套类，那么它编译得很好。另一个人解释了为什么我们在任何命名空间下声明私有都会出错？他说：

> 允许类对命名空间私有将不会获得有意义的保护级别。世界上的任何程序集都可以简单地引用您的 dll，并开始在您的命名空间中编写代码来访问您所谓的私有类。我认为这可能是您想要的答案从微软获得。

我只是真的不明白这句话`"start writing code in your namespace which accesses your supposedly private classes"`

任何人如何访问我的私人课程？任何人都可以告诉我这个`"start writing code in your namespace which accesses your supposedly private classes"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:24:23.007

假设你有一个你写的 DLL：

```
// hypotetical code !
namespace My.Namespace
{
    private class MyClass
    {
    }
} 
```

通过这个你*想*声明这个类只能与命名空间一起使用`My.Namespace`。您希望使此类在该名称空间内部，并在外部使用表单时加以保护。

现在任何人都可以创建一个不同的 DLL 引用上面的 DLL 并声明相同的命名空间，并且实际上无论如何`My.Namespace`都可以使用。`MyClass`因为它在同一个命名空间中：

```
// hypotetical code !
namespace My.Namespace
{
    public class AnotherClass
    {
        private hisClass = new MyClass();
    }
} 
```

在这种情况下，私有修饰符有什么用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:06:22.537

想象以下场景：

您编写一个`A.dll`带有命名空间的程序集`Mou.MyStuff`。在该命名空间中，有一个私有类`SomeClass`。根据其可见性，该类应该对谁`private`可见？仅适用于同一命名空间中的其他类型？

然后，其他人可以编写他或她自己的程序集`B.dll`。`SomeOtherClass` **在该程序集中，他们可以在 namespace`Mou.MyStuff`**中定义一个类。没有什么可以阻止他们使用与您**相同**的名称空间，因此访问您的“私有”类型绝对没有障碍。

如果您正在寻找的只是在您的装配体中的可见性，请使用[`internal`](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.80%29.aspx)可见性。

# javascript - 在主干视图中如何以及在何处初始化 jquery 数据表

> ID：15523237
> 
> 赞同：4
> 
> 时间：2013-03-20T12:14:12.770
> 
> 标签：javascript, jquery-plugins, backbone.js, datatable, backbone-views

我的 html 模板如下所示：

```
 <script type="text/template" id="players-template">
        <table id="example" class="table table-striped table-bordered table-condensed table-hover">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>group</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="playersTable"></tbody>
        </table>
    </script>  

    <script type="text/template" id="player-list-item-template">
        <td><@= name @></td>
        <td>
            <@ _.each(hroups, function(group) { @>
            <@= group.role @>
            <@ }); @>
        </td>            
    </script> 
```

我的主干观点如下：

```
 playerView = Backbone.View.extend({
    template: _.template( $("#player-template").html() ),
    initialize: function () 
        if(this.collection){
            this.collection.fetch();
    },
    render: function () {
        this.$el.html( this.template );
        this.collection.each(function(player) {
            var itemView = new app.PlayerListItemView({ model: player });
            itemView.render();
            this.$el.find('#playersTable').append(itemView.$el);
        },this

 });

 // view to  generate each player for list of players
PlayerListItemView = Backbone.View.extend({
   template: _.template($('#player-list-item-template').html()),
       tagName: "tr",
      render: function (eventName) {
        this.$el.html( this.template(this.model.toJSON()) );
         }
  }); 
```

上面的代码完美运行。现在，我想使用带有引导支持的应用 jquery 数据表插件。您可以在此处找到详细信息：[http](http://www.datatables.net/blog/Twitter_Bootstrap_2) ://www.datatables.net/blog/Twitter_Bootstrap_2 所以，我只是在渲染中添加了以下行：

```
 render: function () {
        this.$el.html( this.template );
        this.collection.each(function(player) {
                var itemView = new app.PlayerListItemView({ model: player });
               itemView.render();
              this.$el.find('#playersTable').append(itemView.$el);
              $('#example').dataTable( {
                console.log('datatable');
                "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i>   <'span6'p>>",
                "sPaginationType": "bootstrap",
                "oLanguage": {
                    "sLengthMenu": "_MENU_ records per page"
                },
                "aoColumnDefs": [
                  { 'bSortable': false, 'aTargets': [ 2 ] }
               ]
            } );
        },this);

    }, 
```

现在，jquery 数据表没有被初始化。他们只是显示普通表。

*   我应该在哪里初始化表以应用 jquery 数据表？
*   他们在没有骨干的情况下完美地工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:11:58.810

最有可能的是，jQuery 插件需要页面上的元素才能工作。你没有显示你在哪里调用`render`那个视图，但我假设你正在做这样的事情：

```
var view = new PlayerView();
$('#foo').html(view.render().el);  // this renders, then adds to page 
```

如果这是真的，那么在 render 中使用插件就太早了，因为视图的 html 还没有添加到页面中。

你可以试试这个：

```
var view = new PlayerView();
$('#foo').html(view.el);   // add the view to page before rendering
view.render(); 
```

或者你可以试试这个：

```
var view = new PlayerView();
$('#foo').html(view.render().el);
view.setupDataTable();    // setup the jQuery plugin after rendering and adding to page 
```

# ios - UICollectionView 教程

> ID：15523238
> 
> 赞同：1
> 
> 时间：2013-03-20T12:14:13.750
> 
> 标签：ios, cocoa-touch, uicollectionview

我只是想知道他们是否有任何教程可以解释`UICollectionView`实用地创建并显示`subView`为`mainView`.

请注意：根本没有界面生成器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:18:13.227

如果你想得到教程，`UICollectionView` 那么这是[官方文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)，也是[这个](http://www.appcoda.com/ios-programming-uicollectionview-tutorial/)

如果您想定制`UICollectionView`，那么[这是有史以来最好的网站。](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=UICollectionView)

一切顺利 ：）

# json - 将单击的 xy 点显示为文本的网页上保存功能？

> ID：15523241
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:14:22.723
> 
> 标签：json, html, canvas

如何在网页上添加功能，将单击的 xy 点显示为文本，然后可以复制和粘贴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:36:54.630

我假设既然您编写了标记为“画布”的“保存功能”，那么您想要：

*   让用户点击点，
*   将这些点显示为可复制的文本。
*   然后您将使用 json 将该文本保存在某处。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/xDj3L/](http://jsfiddle.net/m1erickson/xDj3L/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../excanvas.js"></script><![endif]-->

<style>
    body{ background-color: ivory; padding:10px;}
    canvas{border:1px solid red; float:left;}
    #container{width:410px;}
    #log{ width:100px; height:300px; float:right;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var canvasMouseX;
    var canvasMouseY;
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;
    var storedPoints=[];

    ctx.strokeStyle="orange";
    ctx.font = '12px Arial';

    $("#canvas").mousedown(function(e){handleMouseDown(e);});

    function handleMouseDown(e){
      canvasMouseX=parseInt(e.clientX-offsetX);
      canvasMouseY=parseInt(e.clientY-offsetY);

      // Put your mousedown stuff here
      storedPoints.push({x:canvasMouseX,y:canvasMouseY});
      var count=storedPoints.length;
      var X=canvasMouseX-(count<10?4:7);
      ctx.strokeStyle="orange";
      ctx.fillStyle="black";
      ctx.lineWidth=1;
      ctx.beginPath();
      ctx.arc(canvasMouseX, canvasMouseY, 8, 0 , 2 * Math.PI, false);
      ctx.fillText(storedPoints.length, X, canvasMouseY+4);
      ctx.stroke();
      $("#log").html(toHtml());
    }

    function toHtml(){
        htmlPoints="";
        for(var i=0;i<storedPoints.length;i++){
            htmlPoints+="<p>"+storedPoints[i].x+","+storedPoints[i].y+"</p>"
        }
        return(htmlPoints);
    }

    $("#clear").click(function(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        storedPoints=[];
        $("#log").html(toHtml());

    });

}); // end $(function(){});
</script>

</head>

<body>
    <br/><p>Click on canvas to create points as text</p><br/>
    <button id="clear">Clear Canvas</button>
    <div id="container">
        <canvas id="canvas" width=300 height=300></canvas>
        <div id="log"></div>
    </div>
</body>
</html> 
```

# php - 用 php 处理图片上传的最终决定是什么？

> ID：15523242
> 
> 赞同：0
> 
> 时间：2013-03-20T12:14:40.270
> 
> 标签：php, image-processing, file-upload, security, image-uploading

看了很多文章后。我会说，那么我应该怎么做才能通过文件上传来保护我的网站免受黑客攻击呢？

从这些链接：

1.  这个[链接](https://stackoverflow.com/questions/7349473/php-file-upload-mime-or-extention-based-varification)说***MIME 是无用***的，***扩展是要走的路***。但最后两方只是在争论，如果我是正确***的，双方都同意说 MIME 或 EXTENSION 都有安全漏洞***。那里有很多仇恨。

2.  这个[链接](https://stackoverflow.com/questions/1614838/file-upload-issues-in-php)同意说 MIME 也是无用的，扩展也不是 FOOL PROOF，因为 HTML 或 JAVASCRIPT 代码可以插入到 GIF 图像文件（或其他）中，并且可能被 IE 误解，从而导致恶意代码的快速后门入口（我真的希望每个人都投票停止使用 IE。它就像被用作黑客浏览器一样。）

3.  这个[链接](https://stackoverflow.com/questions/6878817/file-uploading-and-security?rq=1)说要给文件一个不可执行***的权限***，这样不管它是什么它都不会运行（但这会保护我们免受 xss/html/javascript/etc. 嵌入在图像中的 xss/html/javascript/etc. 就像第二个语句中提到的？如果给文件一个不可执行的权限可以保护我们免受那些嵌入的威胁。它还会保护我们免受其他威胁吗？还有其他形式的黑客可以绕过这种方法吗？）

4.  然后有这个[链接](https://stackoverflow.com/questions/4166762/php-image-upload-security-check-list?lq=1)说“***重新处理图像***”其他方法只是“***对黑客来说很无聊。*** ”。这是一种确定图像是否是图像的可靠方法（IMO，因为 imagick 不会转换非图像对吗？不确定。还没有深入研究。看起来很深）。

那么保护我们的网站免受文件上传威胁的最佳和安全方法是什么？

如果我们检查所有：

*   有效的 MIME 类型
*   有效延期
*   GETIMAGESIZE() 检查
*   确保不可执行的权限
*   重新处理图像

这样就够了吗？对于安全的图像文件上传？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:23:22.083

1.  `mime-type`容易伪造，文件扩展名更容易伪造。如果您需要有关文件类型的线索，请使用它们，假设用户是个好人。不要依赖它。
2.  我的观点正是
3.  给文件非可执行权限是个好主意。从网络安全的角度来看，它是无用的。你的`.php`文件是可执行文件吗？否。它们是否仍由 Web 服务器处理？是的。
4.  这是要走的路。例如，使用 imagick 打开文件。如果 imagick 抱怨文件格式，那么不要保留它。

# node.js - Node js，使用connect-memcached时没有返回响应

> ID：15523243
> 
> 赞同：6
> 
> 时间：2013-03-20T12:14:44.610
> 
> 标签：node.js, session, memcached, response, compoundjs

嗨，我正在使用 Compoundjs 和 connect-memcached。以下是我的 envirionment.js 文件中的内容：

```
module.exports = function (compound) {

var express = require('express');
var MemcachedStore = require('connect-memcached')(express);
var app = compound.app;

require('./mongoose').init(compound);
app.configure(function(){
    app.use(compound.assetsCompiler.init());
    app.use(express.static(app.root + '/public', { maxAge: 86400000 }));
    app.set('view engine', 'ejs');
    app.set('view options', { complexNames: true });
    app.set('jsDirectory', '/javascripts/');
    app.set('cssDirectory', '/stylesheets/');
    app.set('cssEngine', 'stylus');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.favicon());
    app.use(express.logger());
    app.use(express.cookieParser());
    app.use(express.session({secret: 'AuthenticationSecret', store: new           MemcachedStore}));        
    app.use(app.router);
}); }; 
```

当我通过给出以下命令启动服务器时：

```
NODE_ENV=production node . 
```

它开始很好，我得到：

```
MemcachedStore initialized for servers: 127.0.0.1:11211
AssetsCompiler Precompiling assets: coffee, styl
Compound server listening on 0.0.0.0:3000 within production environment 
```

当我通过浏览器请求时，我没有得到任何响应。

以下是我的 routes.js 文件内容：

```
exports.routes = function (map) {
     map.get('api/yourname','names#index')
} 
```

在我的名字控制器中：

```
load('application');
action('index', function(req, res) {
    send({"name": "Senthil"});
}); 
```

PS：如果我评论使用 connect-memcached 和通过浏览器请求的代码，我会得到响应。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:40:22.523

对于会话，您需要一个密钥。否则，您将收到此错误。

> 错误：`secret`会话所需的选项

我假设您没有看到错误，因为您正在生产环境中运行。像这样添加一个密钥：

```
app.use(express.session({ 
  store: new MemcachedStore,
  secret: 'secret_key'
})); 
```

由于您正在运行 localhost，因此无需指定主机或端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:09:03.047

尝试在后面添加括号和配置`new MemcacheStore`，使其看起来像这样：

```
app.use(express.session({
  secret: 'AuthenticationSecret', 
  store: new MemcachedStore({
      hosts: [ '127.0.0.1:11212' ] 
  })
})); 
```

（这是假设您的内存缓存服务器位于 localhost:11212 - 如果不是，则将 hosts 行更改为您的服务器的主机名或 IP。）

# passwords - 仅在 rar 存档上测试密码

> ID：15523249
> 
> 赞同：5
> 
> 时间：2013-03-20T12:14:52.747
> 
> 标签：passwords, brute-force, rar

我正在尝试对 rar 存档进行暴力攻击，我需要密码检查尽可能快。我以这种方式从我的程序中调用 rarlab 的“unrar”命令行实用程序：

```
unrar t -p[password] archive.rar 
```

它有效，但速度极慢。存档中的加密文件大约有 300MB 大，unrar 实用程序告诉我只有在测试整个文件大小后才会出现 CRC 错误（密码错误）。（需要 10-15 秒）

有没有更快的方法来测试存档密码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-03T09:00:43.763

查看`rar l`存档是否包含比您要提取的“主”文件更多的文件。存档中通常包含 .txt 或 .nfo 文件，KB-s 很少。然后，您可以执行蛮力攻击以仅提取存档中的最小文件，`rar -ppassword x <archive> <file>`并且速度应该更快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T12:52:55.917

看

[如何破解 WinRar 中使用的 AES-128 加密？](https://stackoverflow.com/questions/11807869/how-to-crack-aes-128-encryption-used-in-winrar)

至于你的问题，不，没有办法只测试密码。密码不存储在加密的存档文件中。AFAIK，您提供的任何密码与加密数据相结合，都会产生解密数据。在一个或另一个世界中，解密的数据代表一个有效的 RAR 存档。CRC 检查存档是否被认为是有效的，如果失败，这意味着密码有效的 Universe 与您的 Universe 不同；）

# jquery - 用类分别计算 div 的长度 jQuery

> ID：15523250
> 
> 赞同：4
> 
> 时间：2013-03-20T12:14:53.767
> 
> 标签：jquery, html

```
<div class="pam_numbers">18</div>
<div class="pam_numbers">1000</div>
<div class="pam_numbers">1900</div>
<div class="pam_numbers">18</div> 
```

我想分别计算每个 div 中的字符数以创建条件 if value==2 then...

```
$(".pam_numbers").text().length 
```

正在返回每个具有类的 div 的值的总和。在本例中为“12”。

我是否必须为每个 div 添加一个 ID 并从数组中计数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T12:16:36.327

如果满足您的条件，您可以使用[filter()](http://api.jquery.com/filter/)将条件应用于每个元素并返回它。

**[现场演示](http://jsfiddle.net/Kzrzz/)**

```
$(".pam_numbers").filter(function(){    
   if($(this).text().length == 2)
       return $(this);    
}); 
```

**编辑**：正如@Mark Schultheiss 建议的那样，我们可以`if`通过直接将条件与返回语句一起省略。

**[现场演示](http://jsfiddle.net/Kzrzz/1/)**

```
$(".pam_numbers").filter(function(){      
     return $(this).text().length === 2;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:18:48.237

您必须分别对待每个 div，$(".pam_numbers") 选择所有这些。一种方法是循环遍历它们 jQuery 样式：

```
$(".pam_numbers").each(function () {
  if ($(this).text().length == 2) {
    // Do stuff
  }
}); 
```

其他方法是捕获包含与选择器匹配的所有元素的类数组对象，然后按传统方式循环遍历它。

```
var elements = $(".pam_numbers");
for (var i in elements) {
   // check and do stuff
} 
```

# asp.net - 是否可以动态枚举 VB .NET 中的所有数组？

> ID：15523253
> 
> 赞同：0
> 
> 时间：2013-03-20T12:15:01.297
> 
> 标签：asp.net, arrays, vb.net

我正在编写的 Web 模块中有很多数组，随着时间的推移我会添加更多。我想动态枚举所有数组以搜索和更新它们。这可能吗？下面的代码片段：

```
Private EMASCFee() As String = {0, 1, "12345679", "MASC Debt SetOff Fees"}
Private EMSPen() As String = {2, 3, "987654312", "Medicare EMS Late Penalties"}
Private Beach() As String = {4, 5, "110022233", "Beach Services"}

Private allCodes() As Array 'Holds all Codes Arrays

Private Sub addArrays()    
    'Adds all Codes String Arrays together into 1 Array  *** Add NEW string arrays to the end of allCodes ***
    allCodes = {EMASCFee, EMSPen, Beach}
End Sub 
```

我想做的是：

```
Private EMASCFee() As String = {0, 1, "12345679", "MASC Debt SetOff Fees"}
Private EMSPen() As String = {2, 3, "987654312", "Medicare EMS Late Penalties"}
Private Beach() As String = {4, 5, "110022233", "Beach Services"}

Private allCodes() As Array 'Holds all Codes Arrays

Private Sub addArrays()    
    For each myArray as Array in ModuleName
        allCodes = {allCodes, myArray}
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:49:41.117

如果您真的想坚持使用数组，可以使用以下方法：

```
Module Codes
    Private EMASCFee() As String = {0, 1, "12345679", "MASC Debt SetOff Fees"}
    Private EMSPen() As String = {2, 3, "987654312", "Medicare EMS Late Penalties"}
    Private Beach() As String = {4, 5, "110022233", "Beach Services"}

    Public Function GetAllCodes() As String()()
        Dim t = Type.GetType("WindowsApplication1.Codes") 'Change this to your project namespace
        Dim members = t.GetFields(Reflection.BindingFlags.NonPublic Or Reflection.BindingFlags.Static)
        Dim result As New List(Of String())
        For Each m In members
            If m.FieldType = GetType(String()) Then
                result.Add(m.GetValue(Nothing))
            End If
        Next
        Return result.ToArray()
    End Function
End Module 
```

但是，我真的建议使用结构和通用列表而不是数组。总体概念将是相同的。

# python - 开发模式下的python安装包失败

> ID：15523262
> 
> 赞同：1
> 
> 时间：2013-03-20T12:15:14.853
> 
> 标签：python, django, packages

我正在尝试在开发模式下设置一个简单的包：

安装程序.py

```
from setuptools import setup, find_packages

setup(
    name='rocflavors',
    version='0.0.1',
    packages=find_packages(exclude=['ez_setup','examples','tests']),
    license='Creative Commons Attribution-Noncommercial-Share Alike license',
    long_description=open('README').read(),
    install_requires=[],
) 
```

尝试设置：（如果我执行 python setup.py install 则有效）

```
(relux)roc-web5537:roc-flavors cmuench$ python setup.py install develop
running install
running bdist_egg
running egg_info
writing rocflavors.egg-info/PKG-INFO
writing top-level names to rocflavors.egg-info/top_level.txt
writing dependency_links to rocflavors.egg-info/dependency_links.txt
reading manifest file 'rocflavors.egg-info/SOURCES.txt'
writing manifest file 'rocflavors.egg-info/SOURCES.txt'
installing library code to build/bdist.macosx-10.7-intel/egg
running install_lib
running build_py
creating build/bdist.macosx-10.7-intel/egg
creating build/bdist.macosx-10.7-intel/egg/rocflavors
copying build/lib/rocflavors/__init__.py -> build/bdist.macosx-10.7-intel/egg/rocflavors
copying build/lib/rocflavors/models.py -> build/bdist.macosx-10.7-intel/egg/rocflavors
creating build/bdist.macosx-10.7-intel/egg/rocflavors/templatetags
copying build/lib/rocflavors/templatetags/__init__.py -> build/bdist.macosx-10.7-intel/egg/rocflavors/templatetags
copying build/lib/rocflavors/templatetags/rocflavors_extras.py -> build/bdist.macosx-10.7-intel/egg/rocflavors/templatetags
copying build/lib/rocflavors/urls.py -> build/bdist.macosx-10.7-intel/egg/rocflavors
copying build/lib/rocflavors/views.py -> build/bdist.macosx-10.7-intel/egg/rocflavors
byte-compiling build/bdist.macosx-10.7-intel/egg/rocflavors/__init__.py to __init__.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/rocflavors/models.py to models.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/rocflavors/templatetags/__init__.py to __init__.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/rocflavors/templatetags/rocflavors_extras.py to rocflavors_extras.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/rocflavors/urls.py to urls.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/rocflavors/views.py to views.pyc
creating build/bdist.macosx-10.7-intel/egg/EGG-INFO
copying rocflavors.egg-info/PKG-INFO -> build/bdist.macosx-10.7-intel/egg/EGG-INFO
copying rocflavors.egg-info/SOURCES.txt -> build/bdist.macosx-10.7-intel/egg/EGG-INFO
copying rocflavors.egg-info/dependency_links.txt -> build/bdist.macosx-10.7-intel/egg/EGG-INFO
copying rocflavors.egg-info/top_level.txt -> build/bdist.macosx-10.7-intel/egg/EGG-INFO
zip_safe flag not set; analyzing archive contents...
creating 'dist/rocflavors-0.0.1-py2.7.egg' and adding 'build/bdist.macosx-10.7-intel/egg' to it
removing 'build/bdist.macosx-10.7-intel/egg' (and everything under it)
Processing rocflavors-0.0.1-py2.7.egg
Removing /Users/cmuench/.virtualenvs/relux/lib/python2.7/site-packages/rocflavors-0.0.1-py2.7.egg
Copying rocflavors-0.0.1-py2.7.egg to /Users/cmuench/.virtualenvs/relux/lib/python2.7/site-packages
rocflavors 0.0.1 is already the active version in easy-install.pth

Installed /Users/cmuench/.virtualenvs/relux/lib/python2.7/site-packages/rocflavors-0.0.1-py2.7.egg
Processing dependencies for rocflavors==0.0.1
Finished processing dependencies for rocflavors==0.0.1
running develop
Checking .pth file support in build/bdist.macosx-10.7-intel/egg
error: can't create or remove files in install directory

The following error occurred while trying to add or remove files in the
installation directory:

    [Errno 2] No such file or directory: 'build/bdist.macosx-10.7-intel/egg/test-easy-install-35540.pth'

The installation directory you specified (via --install-dir, --prefix, or
the distutils default setting) was:

    build/bdist.macosx-10.7-intel/egg

This directory does not currently exist.  Please create it and try again, or
choose a different installation directory (using the -d or --install-dir
option). 
```

我有3个问题：

1.  为什么它在开发模式下不起作用。
2.  开发模式和不使用有什么区别？
3.  为什么它需要是一个包？如果我更改包中的 .py 文件，它如何将其重新放入我的包目录。我想我不明白包装的意义。当我进行更改时，它是否将编译的 python 代码放入包中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:20:06.400

确保您的 virtualenv 已激活。而不是`python setup.py install develop`，尝试`pip install -e .`。注意`.`，这意味着您必须在 setup.py 所在的目录中。如果失败，请尝试使用`sudo`.

pip 的文档：[http ://www.pip-installer.org/](http://www.pip-installer.org/)

# javascript - 带有 javascript 循环的 HTML5 视频

> ID：15523267
> 
> 赞同：1
> 
> 时间：2013-03-20T12:15:26.677
> 
> 标签：javascript, jquery, html, html5-video

试图弄清楚这一点并没有太多运气。

我有一个带有视频的视频标签，如下所示：

```
 <video id="video" preload="auto" tabindex="0" controls poster="img/layout/Untitled-1.jpg">
        <source type="video/mp4" src="video/1.mp4" >
        Sorry, your browser does not support HTML5 audio.
    </video>
    <ul id="playlist">
        <li class="active"><a href="video/1.mp4">GetFighted</a></li>
        <li><a href="video/2.mp4">ThatGirlPossessed</a></li>
        <li><a href="video/3.mp4">WhiteDevil</a></li>
    </ul> 
```

并使用 javascript 和 jquery 尝试遍历列表项（此列表可能更长或更短，它将由用户控制）并将它们放入视频本身，这可以正常工作：

```
jQuery(document).ready(function($) {
    var video;
    var playlist;
    var tracks;
    var current;

    init();
    function init(){
        current = 0;
        video = $('video');
        playlist = $('#playlist');
        tracks = playlist.find('li a');
        len = tracks.length;
        video[0].volume = .50;
        playlist.find('a').click(function(e){
            e.preventDefault();
            link = $(this);
            current = link.parent().index();
            run(link, video[0]);
        });

        video[0].addEventListener('ended',function(e){
            $('#video').animate({opacity: 0}, 500);
            setTimeout(function(){
                current++;
                if(current == len){
                    current = 0;
                    link = playlist.find('a')[0];
                    console.log('here 1');  
                } else  {
                    link = playlist.find('a')[current];
                    console.log('here');    
                }

                $('#video').animate({opacity: 1}, 500);
                run($(link),video[0]);
            },500);
        });
    }

    function run(link, player){
            player.src = link.attr('href');
            par = link.parent();
            par.addClass('active').siblings().removeClass('active');
            video[0].load();
            video[0].play();
    }

}); 
```

（此代码取自另一个来源作为参考，我忘记了在哪里）。但是，我遇到的麻烦是在视频循环播放所有 3 个视频后停止视频。一旦播放了所有 3 个视频，控制台日志“here 1”就会触发，但我不知道如何在播放完视频后停止视频一次。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:44:30.083

只需添加

```
video[0].addEventListener('loadstart', function(e){
  video[0].pause();
}); 
```

在你之前

```
console.log('here 1'); 
```

# excel - 条件格式打破 Sumif 自定义 Colorfunction

> ID：15523273
> 
> 赞同：0
> 
> 时间：2013-03-20T12:15:35.287
> 
> 标签：excel, colors, formatting, sum, conditional

我一直在试图弄清楚如何根据颜色对单元格值求和，幸运的是我在一个论坛上找到了一个漂亮的 VBA 自定义颜色函数，它可以让我做到这一点。

但是，我的问题在于根据相邻列中的单元格值自动为行着色。

```
 colour    title   title   title   title   Price   
    y   test    test    test    test    £425.00 
    y   test    test    test    test    £832.00 
    w   test    test    test    test    £456.00 
    g   test    test    test    test    £550.00 

Colour  Total               
        £456.00             
        £550.00             
        £1,257.00 
```

所以看看上面的内容，总数将根据单元格颜色对值求和，这是有效的。但我必须手动为单元格着色，我想让它们根据最左列中的字母自动填充，这使用条件格式。一旦我应用条件格式，公式就不再起作用。

希望有人可以帮助我吗？我将发布我在下面找到的代码：

```
Function ColorFunction(rColor As Range, rRange As Range, Optional SUM As Boolean)
    Dim rCell As Range
    Dim lCol As Long
    Dim vResult

     ''''''''''''''''''''''''''''''''''''''
     'Written by Ozgrid Business Applications
     'www.ozgrid.com

     'Sums or counts cells based on a specified fill color.
     '''''''''''''''''''''''''''''''''''''''

    lCol = rColor.Interior.ColorIndex

    If SUM = True Then
        For Each rCell In rRange
            If rCell.Interior.ColorIndex = lCol Then
                vResult = WorksheetFunction.SUM(rCell, vResult)
            End If
        Next rCell
    Else
        For Each rCell In rRange
            If rCell.Interior.ColorIndex = lCol Then
                vResult = 1 + vResult
            End If
        Next rCell
    End If

    ColorFunction = vResult
End Function 
```

# java - 在java中绘制浮点数图

> ID：15523276
> 
> 赞同：0
> 
> 时间：2013-03-20T12:15:42.023
> 
> 标签：java, graph, frameworks, floating-point

我正在寻找一个允许我使用 Java 绘制浮点数的框架。我环顾了通常的地方（荣格，图表等），但所有地方都只允许绘制整数值，这些值必须保持浮点。

无论如何，对于这个问题，任何人都可以推荐任何允许我使用浮点的图形框架吗？

我考虑过使用 gnu plot / grapher（我在 mac 上工作）但是如果可能的话我想避免这种情况

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:32:05.490

[JFreechart](http://www.jfree.org/jfreechart/)使用浮点数。您可以查看来自 Lars Vogel的本[教程。](http://www.vogella.com/articles/JFreeChart/article.html)我修改了`createDataset()`方法以包含浮点数，它似乎工作正常。

```
private PieDataset createDataset() {
    DefaultPieDataset result = new DefaultPieDataset();
    result.setValue("Linux", 29.65);
    result.setValue("Mac", 19.35);
    result.setValue("Windows", 51);
    return result;

} 
```

另外，如果您查看此[图像](http://www.jfree.org/jfreechart/images/PriceVolumeDemo1.png)，则 y 轴上的值是浮点数。

# java - 如何将数据从 java 程序传递到 javafx 应用程序图表？

> ID：15523280
> 
> 赞同：1
> 
> 时间：2013-03-20T12:15:52.823
> 
> 标签：java, javafx, charts

我是 JavaFX 的新手，但我对 Java 并不陌生。我有一个大型复杂系统，它会在循环中产生一些结果。我想要实现的是在 JavaFX 图表上绘制每次迭代的结果。我这样做对 java jFreeChart 库没有任何问题，但现在我正在尝试切换到 JavaFX。图表看起来更花哨，我喜欢风格的处理方式。无论如何，我正在努力了解如何在 JavaFX 应用程序中向 XYChart.Series 对象添加点。oracle 网站上的所有教程都以应用程序先验知道的一些固定点开始，并使用以下内容添加它们：

```
`series.getData().add(new XYChart.Data(1, 23));` 
```

但我想要达到的目标有点不同。在我的情况下，我的应用程序会产生一些结果，一旦产生（随机时间），我想将它们绘制在图表上。我使用 javafx.application.Application 启动了一个线程，但是当我尝试向 Series 对象添加一些点时，我得到了一个 `java.lang.IllegalStateException: Not on FX application thread; currentThread = main` 异常。将数据点传递给 JavaFX 图表的正确方法是什么？我认为最接近的方法是覆盖事件类型、事件对象并创建一个完整的事件处理结构......但这对于我试图归档的简单事情来说看起来太复杂了！您能否告诉我，您认为最好/最简单的方法是什么？

编辑：这里有一些代码供您查看并给我一些建议：

```
public class Chart extends Application {

    private final static XYChart.Series series = new XYChart.Series();

    public static void addValue(double gen, double val) {
        series.getData().add(new XYChart.Data(gen, val));
    }

    @Override
    public void start(Stage primaryStage) {

        primaryStage.setTitle("Chart");

        final NumberAxis xAxis = new NumberAxis();
        final NumberAxis yAxis = new NumberAxis();

        final LineChart<Number,Number> lineChart = 
                new LineChart<Number,Number>(xAxis,yAxis);

        //defining training set series
        series.setName("Training");

        Scene scene = new Scene(lineChart, 800, 600);
        lineChart.getData().add(series);
        primaryStage.setScene(scene);

        primaryStage.show();

    }

}

class Launcher extends Thread {

    @Override
    public void run() {
        Application.launch(Chart.class);
    }

    public static void main(String[] args) throws InterruptedException {
        new Launcher().start();
        System.out.println("Now doing something else...");

        for (int i = 0; i < 1000; i++) {
            double trainValue = Math.random();
            Chart.addValue(i, trainValue);
            Thread.sleep(500);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T10:05:26.537

为了确保向图表添加点的代码在 JavaFX 线程中执行，您可以将其添加到在 JavaFX 线程上执行的 Runnable-Object 中：

```
Platform.runLater(new Runnable() {
    @Override
    public void run() {
       // code to add points to the chart
    }
}); 
```

希望这可以帮助。托尔斯滕

# vim - 用关键字开始一个同步区域

> ID：15523282
> 
> 赞同：2
> 
> 时间：2013-03-20T12:15:53.130
> 
> 标签：vim

我想用“virtual”开始一个区域以突出显示所有具有不同颜色的虚拟方法，但是在 cpp.vim 文件中已经将 virtual 定义为关键字，因此永远不会执行区域匹配。我尝试了以下

```
syn region   cVirtualMethod   start="virtual" end=";" contains=cppType
hi cVirtualMethod ctermfg=red 
```

但它不起作用。但是，如果我从 cppType 中删除 virtual，它确实如此，但它会突出显示整行（公平地说，我更喜欢方法名称，但它也很好）。

有没有办法离开 cpp.vim 虚拟突出显示（所以虚拟最终会变成绿色）并只突出显示方法名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:15:40.057

语法关键字始终优先于区域，因此无法将`virtual`其作为语法关键字删除。

您可以通过为区域开始（而不是结束；这就是反向参数顺序的原因）定义一个突出显示组来保持突出显示：

```
:syn region   cVirtualMethod end=";" matchgroup=cppType start="\<virtual\>" 
```

尽管如此，整个内部区域仍将突出显示。为避免这种情况，您可以添加一个`:syn-match`仅匹配方法名称的包含项，将其包含在上述区域中，然后将其`:highlight`放在该区域而不是该区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:52:02.293

你能测试一下这对你有用吗？

```
hi! virtualMethod ctermfg=red
call matchadd("virtualMethod", "virtual.*;") 
```

如果是这样，您可以为该`matchadd`调用添加 autocmd

# grails - 能够在战争模式下添加“插件”

> ID：15523284
> 
> 赞同：0
> 
> 时间：2013-03-20T12:15:58.493
> 
> 标签：grails, plugins, groovy

我正在寻找一种方法让我的 grails-app 的管理员角色向正在运行的服务器添加“功能”/“插件”，以便系统立即使用它。

更具体地说，这里是一个小例子：

```
package domains

abstract class Provider {

    def protected name;
    def protected activated = false;
    def private valid;

    def Provider( providerName ) {
        if( providerName != null ) {
            name = providerName;
            valid = true;
        else valid = false;
    }

    def isValid() { valid }
    def getName() { name }
    def isActivated() { activated }
    def setActivated( bool ) { activaed = bool }

    abstract List<String> search( String searchKey );
} 
```

一些子类：

```
package googleprovider

import Provider;

class GoogleProvider extends Provider {

    def GooleProvider( active ) {
        super( "Google" );
        activated = active;
    }

    @Override
    List<String> search( String searchKey ) {
        return ["http://www.google.com"]
    }
} 
```

现在每个“插件”/“功能”都应该从 Provider 扩展，并作为任何文件放置在目录“plugins/providers/”中。

服务器应该在“onAdd”事件或由该管理员控制的事件上创建此 GoogleProvider 的实例。

有没有可能做到这一点？还是我完全在做梦？如果有可能，只是我走错了方向，请告诉我！;-)

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:14:49.823

我建议您寻找注册新 Artefacts 的插件，因此在您的启动中您可以查找此类。您还可以在 grails-app 中创建一个文件夹来存储提供程序类。

例如，请参阅[Grails Dao Artefacts](https://github.com/laurobecker/grails-dao-artefacts)插件。`daos`它在内部创建文件夹`grails-app`，并将所有类视为 DAO Artefact。您还可以在您的课程中使用 Depenceny Injection（例如服务）。

**需要注意的几点**

*   [安装脚本](https://github.com/laurobecker/grails-dao-artefacts/blob/master/scripts/_Install.groovy)创建目录
*   您有[一些](https://github.com/laurobecker/grails-dao-artefacts/tree/master/src/java/br/com/organicadigital/daoartefacts)声明 Artefact 的类
*   [插件描述符](https://github.com/laurobecker/grails-dao-artefacts/blob/master/DaoArtefactsGrailsPlugin.groovy)负责将它们注册为 Spring Bean

**更多信息在**

*   [Grails 开发者维基](http://grails.org/Developer+-+Artefact+API)
*   [带有示例的博客文章](http://ldaley.com/post/653190105/putting-the-artefact-api-to-work-in-your-grails-app)

# ios - 如何在故事板中的视图之间保持状态？

> ID：15523286
> 
> 赞同：-2
> 
> 时间：2013-03-20T12:15:58.630
> 
> 标签：ios, storyboard, mkmapview, state

我有一个带有 2 个 UIViewController、MapView 和 MenuView 的故事板。故事板首先显示 MapView，其中包含一个 MKMapView。MapView 上的按钮显示 MenuView。MenuView 上的按钮返回到 MapView。这是通过 segues 发生的。当从 MenuView 回到 MapView 时，MKMapView 上的所有注释和区域信息都消失了。似乎每次都会创建一个新实例。我需要做什么才能让 MKMapView 在视图之间保存状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:19:55.487

定义一个管理应用程序数据模型的对象。将所有状态信息放入其中，并在加载需要它的控制器时从那里读取。应用程序委托可以在启动时创建并提供一个空数据模型，或者 - 如果您需要它 - 从之前从应用程序的早期执行中保存的信息中初始化一个。

# makefile - 目标文件到不同的可执行文件

> ID：15523291
> 
> 赞同：0
> 
> 时间：2013-03-20T12:16:06.797
> 
> 标签：makefile

我有对象文件，例如：

> task1.o task2.o task3.o task4.o tasks.o comm.o

我需要将每个 task*.o 与两个 tasks.o comm.o 链接起来。手动它看起来像：

> gcc -Wall -o task1 task1.o tasks.o comm.o
> 
> gcc -Wall -o task2 task2.o tasks.o comm.o

因此，结果我将有 4 个可执行文件，task1.exe 等，但是当我尝试使用 makefile 执行此操作时，例如：

```
TASKS= task1 task2 task3 task4
TASK_OBJECTS= task1.o task2.o task3.o task4.o
OBJS_SOURCES= tasks.c comm.c
OBJS= tasks.o comm.o
CC=gcc
CFLAGS= -Wall -c -o 

all: $(TASKS)

$(TASKS): $(TASK_OBJECTS) $(OBJS)
    $(CC) -o $@ $(TASK_OBJECTS) $(OBJS)
$(TASK_OBJECTS): %.o: %.c
    $(CC) $(CFLAGS) $@ $<
$(OBJS): %.o: %.c
    $(CC) $(CFLAGS) $@ $<
clean:
    rm -rf *.o task1 task2 task3 task4 
```

我得到：

```
gcc -Wall -c -o  task1.o task1.c
gcc -Wall -c -o  task2.o task2.c
gcc -Wall -c -o  task3.o task3.c
gcc -Wall -c -o  task4.o task4.c
gcc -Wall -c -o  tasks.o tasks.c
gcc -Wall -c -o  comm.o comm.c
gcc -o task1 task1.o task2.o task3.o task4.o tasks.o comm.o 
```

代替

```
gcc -Wall -c -o  task1.o task1.c
gcc -Wall -c -o  task2.o task2.c
gcc -Wall -c -o  task3.o task3.c
gcc -Wall -c -o  task4.o task4.c
gcc -Wall -c -o  tasks.o tasks.c
gcc -Wall -c -o  comm.o comm.c
gcc -o task1 task1.o tasks.o comm.o
gcc -o task2 task2.o tasks.o comm.o
gcc -o task3 task3.o tasks.o comm.o
gcc -o task4 task4.o tasks.o comm.o 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:39:34.137

这里：

```
$(TASKS): $(TASK_OBJECTS) $(OBJS)
    $(CC) -o $@ $(TASK_OBJECTS) $(OBJS) 
```

您正在从*所有*对象构建*每个*可执行文件。相反，您应该使用静态模式规则（就像您已经使用的规则一样）：*`$(TASK_OBJECTS)`*

 *```
$(TASKS): % : %.o $(OBJS)
    $(CC) -o $@ $^ 
```

（请注意，这`$^`是“所有先决条件”的自动变量。）*

# java - 有效地比较字符串中的连续字符

> ID：15523295
> 
> 赞同：2
> 
> 时间：2013-03-20T12:16:09.247
> 
> 标签：java, text, map, nlp

我正在做一些文本分析，需要在`String`. 我有*n*类字符：例如`isUpperCase()`，、、`isNumber()`和`isSpace()`。

假设有*n 个*类别，就会有*n^2 个*类别的转换，例如“ `isUpperCase()`--> `isUpperCase()`”、“ `isUpperCase`--> `isLetter()`”、“ `isLetter()`--> `isUpperCase()`”等。

给定一段文本，我想记录发生的转换次数。我会想象构建一个`Map`过渡类型为 the`Keys`和一个`Integer`as each的 a `Value`。

对于文本块“ `TO`”，`Map`看起来像`[isUpper -> isUpper : 1, isUpper -> isSpace : 1]`

但是，我无法弄清楚的部分是如何构建一个`Map`where，据我所知，`Key`它将由 2 个`boolean`方法组成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:33:56.613

创建一个`enum`表示字符类型的 - 您需要一种方法来获取`enum`给定字符的字符类型。我确信有比我在下面所做的更好的方法来做到这一点，但这留给读者作为练习。

接下来创建一个方法，该方法采用先前和当前字符并将它们的类型连接成一个唯一的`String`.

最后循环输入字符串，嘿presto。

```
private static enum CharacterType {

    UPPER {
        @Override
        boolean isA(final char c) {
            return Character.isUpperCase(c);
        }
    },
    LOWER {
        @Override
        boolean isA(final char c) {
            return Character.isLowerCase(c);
        }
    },
    SPACE {
        @Override
        boolean isA(final char c) {
            return Character.isWhitespace(c);
        }
    },
    UNKOWN {
        @Override
        boolean isA(char c) {
            return false;
        }
    };

    abstract boolean isA(final char c);

    public static CharacterType toType(final char c) {
        for (CharacterType type : values()) {
            if (type.isA(c)) {
                return type;
            }
        }
        return UNKOWN;
    }
}

private static String getTransitionType(final CharacterType prev, final CharacterType current) {
    return prev + "_TO_" + current;
}

public static void main(String[] args) {
    final String myString = "AAaaA Aaa  AA";
    final Map<String, Integer> countMap = new TreeMap<String, Integer>() {
        @Override
        public Integer put(final String key, final Integer value) {
            final Integer currentCount = get(key);
            if (currentCount == null) {
                return super.put(key, value);
            }
            return super.put(key, currentCount + value);
        }
    };
    final char[] myStringAsArray = myString.toCharArray();
    CharacterType prev = CharacterType.toType(myStringAsArray[0]);
    for (int i = 1; i < myStringAsArray.length; ++i) {
        final CharacterType current = CharacterType.toType(myStringAsArray[i]);
        countMap.put(getTransitionType(prev, current), 1);
        prev = current;
    }
    for (final Entry<String, Integer> entry : countMap.entrySet()) {
        System.out.println(entry);
    }
} 
```

输出：

```
LOWER_TO_LOWER=2
LOWER_TO_SPACE=1
LOWER_TO_UPPER=1
SPACE_TO_SPACE=1
SPACE_TO_UPPER=2
UPPER_TO_LOWER=2
UPPER_TO_SPACE=1
UPPER_TO_UPPER=2 
```

对问题内容（825 个字符）运行该方法需要 9 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:45:15.983

如果您认为大多数转换都会出现，那么二维数组效果最好：

```
int n = _categories.size();
int[][] _transitionFreq = new int[n][n]; 
```

如果您认为它将是一个解析数组，那么映射在内存使用方面会更有效，但在性能方面效率会更低。

根据您的数据和字符类型的数量，您必须做出权衡。

# java - 使用正则表达式在字符串中查找模式 -> 如何改进我的解决方案

> ID：15523299
> 
> 赞同：1
> 
> 时间：2013-03-20T12:16:25.347
> 
> 标签：java, regex

我想解析一个字符串并获取它的-part，它在结尾和开头`"stringIAmLookingFor"`被包围。`"\_"`我正在使用正则表达式来匹配它，然后`"\_"`在找到的字符串中删除。这是有效的，但我想知道是否有更优雅的方法来解决这个问题？

```
String test = "xyz_stringIAmLookingFor_zxy";
Pattern p = Pattern.compile("_(\\w)*_");
Matcher m = p.matcher(test);
while (m.find()) { // find next match
    String match = m.group();
    match = match.replaceAll("_", "");
    System.out.println(match);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T12:18:31.383

## 解决方案（部分）

**另请检查下一节。不要只是在这里阅读解决方案。**

只需稍微修改您的代码：

```
String test = "xyz_stringIAmLookingFor_zxy";

// Make the capturing group capture the text in between (\w*)
// A capturing group is enclosed in (pattern), denoting the part of the
// pattern whose text you want to get separately from the main match.
// Note that there is also non-capturing group (?:pattern), whose text
// you don't need to capture.
Pattern p = Pattern.compile("_(\\w*)_");

Matcher m = p.matcher(test);
while (m.find()) { // find next match

    // The text is in the capturing group numbered 1
    // The numbering is by counting the number of opening
    // parentheses that makes up a capturing group, until
    // the group that you are interested in.
    String match = m.group(1);
    System.out.println(match);
} 
```

[`Matcher.group()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28%29), 不带任何参数将返回与整个正则表达式模式匹配的文本。[`Matcher.group(int group)`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28int%29)将返回与指定组号的捕获组匹配的文本。

如果您使用的是 Java 7，则可以使用*命名的捕获组*，这会使代码更具可读性。捕获组匹配的字符串可以用[`Matcher.group(String name)`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28java.lang.String%29).

```
String test = "xyz_stringIAmLookingFor_zxy";

// (?<name>pattern) is similar to (pattern), just that you attach 
// a name to it
// specialText is not a really good name, please use a more meaningful
// name in your actual code
Pattern p = Pattern.compile("_(?<specialText>\\w*)_");

Matcher m = p.matcher(test);
while (m.find()) { // find next match

    // Access the text captured by the named capturing group
    // using Matcher.group(String name)
    String match = m.group("specialText");
    System.out.println(match);
} 
```

## 模式问题

请注意，`\w`也匹配`_`. `_`您拥有的模式不明确，对于字符串中超过 2 个的情况，我不知道您的预期输出是什么。你想让下划线`_`成为输出的一部分吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:20:03.820

使用`group(1)`而不是`group()`因为`group()`将获得整个模式而不是匹配组。

参考：[http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group(int)](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group(int))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:21:28.370

你可以定义你真正想要的组，因为你已经在使用括号了。你只需要稍微调整一下你的模式。

```
String test = "xyz_stringIAmLookingFor_zxy";
Pattern p = Pattern.compile("_(\\w*)_");
Matcher m = p.matcher(test);
while (m.find()) { // find next match
    System.out.println(m.group(1));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:20:15.160

```
"xyz_stringIAmLookingFor_zxy".replaceAll("_(\\w)*_", "$1"); 
```

将用括号中的该组替换所有内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T12:21:15.017

一个更简单的正则表达式，不需要组：

```
"(?<=_)[^_]*" 
```

如果你想要更严格：

```
"(?<=_)[^_]+(?=_)" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T12:22:25.203

尝试

```
 String s = "xyz_stringIAmLookingFor_zxy".replaceAll(".*_(\\w*)_.*", "$1");
    System.out.println(s); 
```

输出

```
stringIAmLookingFor 
```

# python - MySQL 查询中的多行保存在数组结构中

> ID：15523300
> 
> 赞同：0
> 
> 时间：2013-03-20T12:16:28.837
> 
> 标签：python, for-loop, tornado, multiple-records

我有这个 Python 代码：

```
self.lock_tables("read", ['nets_permissions as n', 'devices_permissions as d'])
usrs = self.db.get("SELECT n.user_id FROM nets_permissions as n \
                    left join devices_permissions as d \
                    on n.user_id = d.user_id \
                    where d.user_id is null \
                    and n.network_id=%s and n.perm<>3", netid)
self.unlock_tables()

for usr in usrs:
    self.lock_tables("write", ['devices_permissions'])
    self.db.execute("INSERT devices_permissions SET \
                     user_id=%s, network_id=%s, device_id=%s, perm=%s",\
                     usr, netid, sensid, perm)
    self.unlock_tables(); 
```

我首先进行查询以从两个表中检索一些 user_id。我想将此 user_id 保存在一个变量中，然后执行 for 循环将此记录插入另一个表中...

此代码不起作用。我收到此错误：

> 例外：为 Database.get() 查询返回多行

如何检索这多行，然后一次处理每个人？

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:59:32.570

解决方案是使用*self.db.query*而不是*self.db.get*！

```
self.lock_tables("read", ['nets_permissions as n', 'devices_permissions as d'])
usrs = self.db.query("SELECT n.user_id FROM nets_permissions as n \
                    left join devices_permissions as d \
                    on n.user_id = d.user_id \
                    where d.user_id is null \
                    and n.network_id=%s and n.perm<>3", netid)
self.unlock_tables()

for usr in usrs:
    self.lock_tables("write", ['devices_permissions'])
    self.db.execute("INSERT devices_permissions SET \
                     user_id=%s, network_id=%s, device_id=%s, perm=%s",\
                     usr['user_id'], netid, sensid, perm)
    self.unlock_tables(); 
```

# jsf - 数据表中的primefaces selectonemenu和f：selectonemenu

> ID：15523303
> 
> 赞同：1
> 
> 时间：2013-03-20T12:16:50.467
> 
> 标签：jsf, primefaces

我正在使用 primefaces 3.5 我在数据表的一列中有 ap:selectonemenu。而且我在同一数据表的另一列上有一个提交按钮。当我提交时，该行将被删除。在这里，当我选择“其他”然后执行提交操作并更新表单时，其他行中的 p:selectonemenu 项目将“其他”作为第一个值。每次将“其他”设置为最后一个值的方法是什么

```
 <p:column headerText="Buyer Response" style="white-space:pre-line;">
                            <p:selectOneMenu value="#{buyerInProcessBean.subject}"
                                id="buyerResponseId" >
                                <f:selectItems 
                                    value="#{buyerInProcessBean.subjectMap[trans.decisionrule.ruleId]}"
                                    var="subject" itemLabel="#{subject}" itemValue="#{subject}"></f:selectItems>
                                <f:selectItem itemLabel="Other" itemValue="Other" ></f:selectItem>
                            </p:selectOneMenu>
                        </p:column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:49:48.720

既然你有

```
<p:selectOneMenu value="#{buyerInProcessBean.subject}"> 
```

主题在所有行之间共享，当然，其他选择菜单将具有与所选菜单相同的值（在您的情况下为其他）。为此，我建议一个简单的修复，您必须将主题属性移动到您正在迭代的对象。

另一个解决方法是，在提交时执行的方法完成后，将主题属性设置为“其他”。但是这样一来，即使更改后的选择菜单也会失去“其他”的价值。

所以总而言之，你必须改变你的逻辑，这样主题就不会在行之间共享

# javascript - JQGrid - 没有输出

> ID：15523304
> 
> 赞同：0
> 
> 时间：2013-03-20T12:16:51.230
> 
> 标签：javascript, jqgrid

以下 html 文件不提供任何输出。这里提到的所有脚本和 css 文件都是有效的。请帮我解决这个问题。

当它在浏览器中加载时，它只给出一个空白页面。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My First Grid</title>

<link rel="stylesheet" type="text/css" media="screen" href="css/redmond/jquery-ui-1.10.2.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />

<script src="js/jquery-1.9.0.min.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>
<script type="text/javascript">
var mydata = [
    { id : "one", "name" : "row one" },
    { id : "two", "name" : "row two" },
    { id : "three", "name" : "row three" }
];

$("#grid").jqGrid({
    data: mydata,
    datatype: 'local',
    width: 500,
    colNames:['Id','Name'],
    colModel:[
    {name:'id', index:'id', key: true, width:50},
    {name:'name', index:'name', width:100}
    ],
    pager: '#pager',
    sortname: 'id',
    viewrecords: true,
    sortorder: "asc",
    caption:"jqGrid Example"
});
</script>

</head>
<body>
<table id="grid"><tr><td></td></tr></table>
<div id="pager"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:25:36.950

您必须将 $("#grid").jqGrid() 放入 document.ready() 中。

```
<script>

        $( document ).ready( function ( e )
        {

var mydata = [
    { id : "one", "name" : "row one" },
    { id : "two", "name" : "row two" },
    { id : "three", "name" : "row three" }
];

$("#grid").jqGrid({
    data: mydata,
    datatype: 'local',
    width: 500,
    colNames:['Id','Name'],
    colModel:[
    {name:'id', index:'id', key: true, width:50},
    {name:'name', index:'name', width:100}
    ],
    pager: '#pager',
    sortname: 'id',
    viewrecords: true,
    sortorder: "asc",
    caption:"jqGrid Example"
});

         });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:22:30.267

原因是`<table id="grid">`脚本执行时尚未创建。在关闭之前移动 `$("#grid").jqGrid()`到脚本块中`</body>`。

或者，您可以在页面元素初始化后使用 jQuery 来安排网格初始化：

```
$(document).ready(function() { $("#grid").jqGrid(...) }); 
```

# autocomplete - 如果从 xrc 加载，则在 wxpython 中自动完成

> ID：15523307
> 
> 赞同：0
> 
> 时间：2013-03-20T12:16:56.997
> 
> 标签：autocomplete, wxpython, xrc

我正在尝试在 wxpython 中使用 xrc 资源。这很好，但是一个很大的“不”在哪里 - 没有来自 xrc 的 wxFrame 类加载的自动完成。还有其他从 xrc 类加载的。

这是对的还是我正在做某事？

这是代码的一部分，例如：

```
import wx
from wx import xrc

class MyApp(wx.App):
    def OnInit(self):
        if os.path.exists("phc.xrc"):
            self.res = xrc.XmlResource("phc.xrc")

            self.frame = self.res.LoadFrame(None, 'MyFrame')
            self.list_box = xrc.XRCCTRL(self.frame, "list_box_1")
            self.notebook = xrc.XRCCTRL(self.frame, "Notebook")
            self.StatusBar= xrc.XRCCTRL(self.frame, "MFrame_statusbar")
            self.list_ctrl= xrc.XRCCTRL(self.frame, "list_ctr_1") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:17:37.050

好吧，自动完成功能的好坏完全取决于您使用的编辑器/IDE。您没有指定您使用什么来编写 python 脚本，但根据个人经验，我会说这可能是真的，没有自动完成功能。

我过去使用过 Eclipse/PyDev、Spyder、SPE 和 PyCharm，但它们都没有显示出自动完成使用 XRC 创建的小部件的能力。您仍然可以尝试让 Python 的 Emacs 自动完成功能工作并在那里尝试，但我怀疑它会工作。

我没有发现这是一个特别的障碍，但我猜每个人都不一样。希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T03:25:04.347

是的，自动完成在这里不起作用，因为我们的代码不知道 xrc 将返回什么。您的代码仅在运行时才了解变量的类型（在本例中为帧）。

而且，不幸/幸运的是，我们无法将“类型”分配给 Python 中的变量以使自动完成功能正常工作。

但是在 Eclipse + PyDev 插件中

您可以添加此语句以使自动完成工作：

断言 isinstance(self.frame, wx.Frame)

自动完成在此声明之后起作用。

# .net - NGEN 和平台目标是同一个东西吗？

> ID：15523308
> 
> 赞同：2
> 
> 时间：2013-03-20T12:16:59.177
> 
> 标签：.net, ngen

您可以使用 NGEN.EXE 将 MSIL 程序集编译为本机程序集。但是当你有源代码时，你也可以在项目选项中选择“平台目标”。如果我在那里选择 x64，这与在 x64 机器上运行 NGEN.EXE 是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:19:34.973

不，这不是一回事。平台目标仅在 PE 标头中设置一个位，告诉运行时它是否更喜欢在 CLR 的 x86 或 x64 版本上运行（或中性，如果您指定“任何 CPU”）。编译仍然会产生 MSIL 代码；AFAIK，无法告诉 MS 编译器直接发出本机代码（目前）。

例如，当您 PInvoking 只有 x86 版本的本机 DLL 时，该标志很有用。

其实你也可以稍后修改这个位，使用[CorFlags](http://msdn.microsoft.com/en-us/library/ms164699%28VS.80%29.aspx)

相反，NGEN 会将 IL 编译为汇编代码（本机）。它也称为 AOT（提前）编译，而不是 JIT（及时）

# mysql - 我们可以将一个存储过程中存在的列检索到mysql中的另一个存储过程中吗

> ID：15523313
> 
> 赞同：0
> 
> 时间：2013-03-20T12:17:12.290
> 
> 标签：mysql, procedure

我正在使用单个表，并且在一个过程中生成了 ProfileID（这是表的主键），现在我想在另一个过程中使用相同的 id 来插入其余的表字段。如何调用生成的 profileID 。查询可能不清楚，但确实欢迎任何形式的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:41:18.173

您只需要`last_insert_id()`
[http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)

只需看看那里显示的示例。

# network-programming - 使用 SharpSNMP Lib 进行网络发现

> ID：15523314
> 
> 赞同：1
> 
> 时间：2013-03-20T12:17:13.860
> 
> 标签：network-programming, snmp, sharp-snmp

我是 SNMP 新手，需要开发一个 Windows 服务，该服务将为所有网络发现设备 (SNMP)，然后需要从发现的设备中获取信息。

我可以做的设备发现，虽然我相信有些设备没有被检测到，但现在的问题是检索设备信息。

有人有什么建议吗？

我的发现代码：

```
 Discoverer _discoverer = new Discoverer();
    _discoverer.AgentFound += Discoverer_AgentFound;

    Console.WriteLine("v1 discovery");
    _discoverer.Discover(VersionCode.V1, new IPEndPoint(IPAddress.Broadcast, 161), new OctetString("public"), 6000);

    Console.WriteLine("v2 discovery");
    _discoverer.Discover(VersionCode.V2, new IPEndPoint(IPAddress.Broadcast, 161), new OctetString("public"), 6000);

    Console.WriteLine("v3 discovery");
    _discoverer.Discover(VersionCode.V3, new IPEndPoint(IPAddress.Broadcast, 161), null, 6000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T13:06:15.063

SNMP RFC 文档没有定义使用 SNMP 发现设备的标准方法。因此，`Discoverer`#SNMP 类使用一种通用方法来检测设备，

[https://sharpsnmplib.codeplex.com/wikipage?title=SNMP%20Device%20Discovery](https://sharpsnmplib.codeplex.com/wikipage?title=SNMP%20Device%20Discovery)

出于安全考虑，管理员可能会通过轻松更改配置来隐藏设备。一般来说，您应该手动添加每个设备。

# ios - 无法将图像添加到按钮

> ID：15523318
> 
> 赞同：0
> 
> 时间：2013-03-20T12:17:21.183
> 
> 标签：ios, objective-c, xcode, uitableview, uiimage

嗨，我在将图像添加到按钮时遇到问题。图像存储在 NSMutableArray 属性中。问题是将图像添加并显示到按钮。我已验证图像已添加到数组中。从相机拍摄图像后，我选择使用它应用程序将崩溃并出现以下错误：

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIImage 长度]：无法识别的选择器发送到实例 0x2090b5a

代码：

```
displayArray=[[NSMutableArray alloc]initWithObjects:@"MedsTime_MedPic.png",@"",@"",@"", nil];

-(void)addImage1:(NSNotification*)notify
{
    butImage=xapp.medicineImage;
    [img setImage:xapp.medicineImage forState:UIControlStateNormal];
    [displayArray replaceObjectAtIndex:0 withObject:xapp.medicineImage ];
    [table reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];

    }
    else
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
    }

    if (indexPath.section==0)
    {
        img=[UIButton buttonWithType:UIButtonTypeRoundedRect];
        img.frame=CGRectMake(25, 15, 75, 75);
        img.layer.cornerRadius=6.0;
        img.clipsToBounds=YES;
        img.layer.borderColor=[[UIColor grayColor]CGColor];
        [cell.contentView addSubview:img];
        if (xapp.isEdited==YES)
        {

        }
        else if (xapp.isEdited==NO)
        {
            [img setImage:[UIImage imageNamed:[displayArray objectAtIndex:0]] forState:UIControlStateNormal];

        }

        [cell.contentView addSubview:img];

        img.titleLabel.textColor=[UIColor blackColor];
        text=[[UITextField alloc]initWithFrame:CGRectMake(105, 30, 200, 30)];
        text.delegate=self;
        text.placeholder=@"Enter Medicine First";

        if (xapp.isEdited==YES)
        {
            text.text=[[editArray objectAtIndex:0]valueForKey:@"medicineName"];
        }
        else{

            text.text=[displayArray objectAtIndex:1];
        }

        [text setBorderStyle:UITextBorderStyleRoundedRect];
        [cell addSubview:text];
        [cell addSubview:img];

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:58:07.753

您应该知道您不能将图像添加到`UIButtonTypeRoundedRect`，您应该将其更改为自定义按钮。

在此函数中，您将显示数组的第一项替换为图像，而显示数组中的其他项是 nsstrings，这似乎是问题的根源：

```
-(void)addImage1:(NSNotification*)notify
{
    butImage=xapp.medicineImage;
    [img setImage:xapp.medicineImage forState:UIControlStateNormal];
    [displayArray replaceObjectAtIndex:0 withObject:xapp.medicineImage ];
    [table reloadData];
} 
```

除了您的代码中我不理解的某些部分。有一些明显的错误：

这部分与 uitableview 约定冲突，您可以将其删除而不会出错。

```
else
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
} 
```

您将“img”添加到 contentView 两次，一次就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:59:28.900

您（或 sdk 中的某些方法）要求图像执行该方法`length`

> 原因：' **-[UIImage 长度]**：无法识别的选择器发送到实例 0x2090b5a

An`UIImage`没有方法长度。根据文档，这是`NSString`和/或的方法`UIAElementArray`。

我的猜测是您正在使用 a `NSString`or`UIAElementArray`预期的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T02:29:08.977

替换您的代码。添加一个新数组然后检查。希望它对您有用。

```
if (xapp.isEdited==YES)
         {
             CamImage*eventImage = (CamImage*)[editArray objectAtIndex:0];
             [img setImage:[eventImage valueForKey:@"medicineImage"] forState:UIControlStateNormal];
             }

       else if (xapp.isEdited==NO)
           NSLog(@"editedmo");
         {
             if(Medimage==NO){
                 UIImage *i=(UIImage*)[displayArray objectAtIndex:0];
                 [img setImage:i forState:UIControlStateNormal];
            [img setImage:[UIImage imageNamed:[displayArray objectAtIndex:0]] forState:UIControlStateNormal];
                 } 
```

# android - 如何在幻灯片菜单列表视图中添加不同的图标

> ID：15523319
> 
> 赞同：0
> 
> 时间：2013-03-20T12:17:22.260
> 
> 标签：android, android-listview, android-arrayadapter

我正在使用来自 github 的幻灯片菜单示例，它仅显示带有文本和标题的幻灯片菜单，但我需要添加不同的图标。我正在尝试使用自定义适配器，但它不起作用......

幻灯片菜单.java：

```
public class SlideMenu implements SlideMenuAnimationContainer.Listener {

    public final static String[] slideMenuOptions = { "Recent Update", "Notification", "Wardrobe" };
    public final static String TAG = "SlideMenu";
    protected static final String TextView = null;
    Intent intent;

    private Context context;
    private SlideMenuAnimationContainer slideMenuAnimationContainer;

    public SlideMenu( Context context, SlideMenuAnimationContainer mainAnimationLayout){

        this.context = context;
        this.slideMenuAnimationContainer = mainAnimationLayout;
    }

    public void init(){

        final Activity activity = (Activity) context;

        //Set Content's show menu button's action
        ImageView showMenuButton = (ImageView) activity.findViewById( R.id.content_button);
        showMenuButton.setOnClickListener( new OnClickListener(){

            @Override
            public void onClick( View v){

                slideMenuAnimationContainer.toggleSlideMenu();
            }
        });

        //Contruct the SlideMenu items here, you can replace this ArrayAdapter with your customr ArrayAdapter
        List<SlideMenuItem> slideMenuList = new ArrayList<SlideMenuItem>();
        slideMenuList.add( new SlideMenuItem( SlideMenuItemType.Header, "Updates"));
        slideMenuList.add( new SlideMenuItem( SlideMenuItemType.Activity, "Recent Update"));
    //  slideMenuList.add( new SlideMenuItem( SlideMenuItemType.Header, "Header 2"));
        slideMenuList.add( new SlideMenuItem( SlideMenuItemType.Activity, "Notification"));
        slideMenuList.add( new SlideMenuItem( SlideMenuItemType.Header, "Category"));
        slideMenuList.add( new SlideMenuItem( SlideMenuItemType.Activity, "Wardrobe"));
        slideMenuList.add( new SlideMenuItem( SlideMenuItemType.Activity, "Gadgets"));

        SlideMenuArrayAdapter slideMenuArrayAdaptar = new SlideMenuArrayAdapter( context, android.R.layout.simple_list_item_1, slideMenuList);

        ListView menuListView = (ListView) activity.findViewById( R.id.slideMenuListView);
        menuListView.setAdapter( slideMenuArrayAdaptar);
        menuListView.setOnItemClickListener( new OnItemClickListener(){

            @Override
            public void onItemClick( AdapterView<?> parent, View view, int position, long id){

                // Close sidebar
                slideMenuAnimationContainer.closeSlideMenuAndActOnClick( parent, view, position, id);
            }
        });

        //Implement your logic here within the execute() function when an item is clicked with in the SlideMenu
        //Called after the SlideMenu collapses.
        slideMenuAnimationContainer.setMenuItemSelectedAction( new MenuItemSelectedAction(){

            @Override
            public void execute( AdapterView<?> parent, View view, int position, long id){

                //Only act when a ListViewItem with type Activity is clicked
                TextView textView = (TextView)view.findViewById( R.id.MenuActivityListViewItem_text);
                if( textView != null && textView.getId() == R.id.MenuActivityListViewItem_text){

                    //Start new activity
                    CharSequence selectedActivityName = textView.getText();

                    if( selectedActivityName.equals( "Recent Update")) {
                        intent = new Intent( activity, Activity1.class);
                    }
                    else if( selectedActivityName.equals( "Notification")) {
                        intent = new Intent( activity, Activity2.class);
                    }
                    else if( selectedActivityName.equals( "Wardrobe")) {
                        intent = new Intent( activity, Activity3.class);
                    }
                    else if( selectedActivityName.equals( "Gadgets")) {
                        intent = new Intent( activity, Gadgets_Activity.class);
                    }
                     intent =intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                    activity.startActivity( intent);
                }
            }
        });
    }

    //Callback of SlideMenuAnimationContainer.Listener to monitor status of SlideMenu
    @Override
    public void onSlideMenuOpened(){
        Log.d( TAG, "opened");
    }

    //Callback of SlideMenuAnimationContainer.Listener to monitor status of SlideMenu
    @Override
    public void onSlideMenuClosed(){
        Log.d( TAG, "closed");
    }

    //Callback of SlideMenuAnimationContainer.Listener to monitor status of SlideMenu
    @Override
    public boolean onContentTouchedWhenOpening(){
        //The content area is touched when sidebar opening, close sidebar
        Log.d( TAG, "going to close sidebar");
        slideMenuAnimationContainer.closeSlideMenu();
        return true;
    }
} 
```

和适配器：

```
public class SlideMenuArrayAdapter extends ArrayAdapter<SlideMenuItem> {

    private List<SlideMenuItem> slideMenuItemList;

    public SlideMenuArrayAdapter( Context context, int textViewResourceId, List<SlideMenuItem> slideMenuItemList) {

        super( context, textViewResourceId, slideMenuItemList);
        this.slideMenuItemList = slideMenuItemList;            
    }

    @Override
    public View getView( int position, View view, ViewGroup parent) {

        SlideMenuItem slideMenuItem = slideMenuItemList.get( position);
        LayoutInflater layoutInflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if( slideMenuItem.getSlideMenuItemType() == SlideMenuItemType.Header){

            view = layoutInflater.inflate( R.layout.menu_header_listview_item, null);          

            TextView textView = (TextView) view.findViewById( R.id.MenuListHeaderListViewItem_text);           
            textView.setText( slideMenuItem.getText());

        }
        else if( slideMenuItem.getSlideMenuItemType() == SlideMenuItemType.Activity){
            view = layoutInflater.inflate( R.layout.menu_activity_listview_item, null);            

            TextView textView = (TextView) view.findViewById( R.id.MenuActivityListViewItem_text);                  
            textView.setText( slideMenuItem.getText());
        }
        else{
            view = null;    //Left for operation 
        }

        return view;
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:28:52.040

像这样试试

```
 ListView listView = (ListView) menu.findViewById(R.id.list);

             ArrayList<String[]> datavalues=new ArrayList<String[]>();

             String[] menuhome=new String[2];
             menuhome[0]=""+R.drawable.home_sidebar;
             menuhome[1]="Home";
             datavalues.add(menuhome);

             String[] menuprofile=new String[2];
             menuprofile[0]=""+R.drawable.profile_sidebar;
             menuprofile[1]="Profile";
             datavalues.add(menuprofile);

             String[] menusearch=new String[2];
             menusearch[0]=""+R.drawable.search_sidebar;
             menusearch[1]="Search";
             datavalues.add(menusearch);

             String[] menugallery=new String[2];
             menugallery[0]=""+R.drawable.gallery_sidebar;
             menugallery[1]="Gallery";
             datavalues.add(menugallery);

             String[] menulogout=new String[2];
             menulogout[0]=""+R.drawable.logout_sidebar;
             menulogout[1]="Logout";
             datavalues.add(menulogout);

           SlideMenuAdapter menuadapter=new SlideMenuAdapter(datavalues, this);
           listView.setAdapter(menuadapter);

private class SlideMenuAdapter extends BaseAdapter{
                ArrayList<String[]> data;
                ActivityListing context;
                 public SlideMenuAdapter(ArrayList<String[]> datavalues,
                         ActivityListing contextobj) {
                    // TODO Auto-generated constructor stub
                     data=datavalues;
                     context=contextobj;
                }
                @Override
                public int getCount() {
                    // TODO Auto-generated method stub
                    return data.size();
                }

                @Override
                public Object getItem(int arg0) {
                    // TODO Auto-generated method stub
                    return data.get(arg0);
                }

                @Override
                public long getItemId(int arg0) {
                    // TODO Auto-generated method stub
                    return arg0;
                }

                @Override
                public View getView(int arg0, View arg1, ViewGroup arg2) {
                    // TODO Auto-generated method stub
                     final int pos=arg0;
                        // This a new view we inflate the new layout
                        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        View convertView = inflater.inflate(R.layout.menurow, null, false);
                        int drawable=Integer.parseInt(data.get(arg0)[0].trim());
                        Button btnOption=(Button) convertView.findViewById(R.id.btnoption);
                        btnOption.setCompoundDrawablesWithIntrinsicBounds(context.getResources().getDrawable(drawable), null, null, null);
                        btnOption.setText(data.get(arg0)[1].trim());
                        btnOption.setTextColor(Color.rgb(143, 7, 0));

                        btnOption.setOnClickListener(new OnClickListener() {

                            @Override
                            public void onClick(View arg0) {
                                // TODO Auto-generated method stub
                                callOptions(data.get(pos));
                            }

                        });

                    return convertView;
                } 
```

# servlets - HTTP 404 小服务程序

> ID：15523322
> 
> 赞同：0
> 
> 时间：2013-03-20T12:17:43.807
> 
> 标签：servlets, file-upload, http-status-code-404

我正在尝试使用 Servlet **3.0** /JSP (IDE : Eclipse)发送文件

这是我的 JSP 代码：

```
<form method="post" action="UploadServlet"
    enctype="multipart/form-data">
    Select file to upload: <input type="file" name="file" size="60" /><br />
    <br /> <input type="submit" value="Upload" />
</form> 
```

还有我的 Servlet：

```
@WebServlet
@MultipartConfig(fileSizeThreshold = 1024 * 1024 * 2,
maxFileSize = 1024 * 1024 * 10,
maxRequestSize = 1024 * 1024 * 50)
public class UploadServlet extends HttpServlet {

private static final long serialVersionUID = 1L;

private static final String SAVE_DIR = "uploadFiles";

protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException{

    //CODE

} 
```

但是当我提交表单时，我收到一个错误 HTTP 404 请求的资源不可用。

为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:21:37.810

你需要指定 urlPatterns 像

```
@WebServlet(name = "name", urlPatterns = {"/pattern"}) 
```

例如[见这里](http://www.roseindia.net/java/javaee6/helloWorldExample.shtml)

# java - 来自文本文件和文本文件的数据显示在 GUI 文本字段中

> ID：15523323
> 
> 赞同：0
> 
> 时间：2013-03-20T12:17:46.567
> 
> 标签：java, swing, user-interface, text-files, read-write

直问

![在此处输入图像描述](../Images/dc050b51d784984e1aad6fa7cdf8fc2c.png)

我希望有关选择和赢/输的数据将显示在文本字段中并不断添加类似的集合，可能需要使用数组列表，这就是我卡住的地方我不知道如何连接将显示的特定数据在文本字段中并添加添加等....

意思是当我点击 PAPER 图片时，例如计算机是 ROCK，所以它会写：

```
| Human: Win | PAPER bit ROCK | 
```

程序代码：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.event.*; 
import java.util.Random;

import javax.swing.*;

public class gui2 {

    static int humanWon; // use for statistic
    static int win=0;
    static int total=0;
    static int tie=0;

    public static void main(String[] args){ // main
        gamePanel();// launch main game
        introductionPanel(); // launch instruction
    }

    private static void introductionPanel(){ // give the instruction to the game
        String text="RoPaS Game is a strategic game played between\ntwo people. The choices are rock, paper or scissors \n gesture with the hand. Paper covers rock, rock\n crushes scissors,scissors cuts paper.";
        JOptionPane.showMessageDialog(null,text, "Introduction", 0, new ImageIcon(System.getProperty("user.dir")+"/image/5.gif"));
    }

    private static void gamePanel(){ // the main game panel

        JFrame frame = new JFrame("RoPaS Game");  //the main frame of the game 

        Container panel = frame.getContentPane();  // creating a container panel, so we can place buttons where we pleased
        panel.setLayout(null); 

        String[] iconString= new String[3]; // creating icon string name so we can place the directory in with little effort
        int[] boundInt= new int[3]; // same idea

        for(int i=0; i<=2; i++){ // creating the condtions
            iconString[i]=System.getProperty("user.dir")+"/image/"+i+".jpg";
            boundInt[i]=60+110*i;
        }

        JButton b1 = new JButton (" ", new ImageIcon(iconString[0]));
        b1.setBackground(Color.white);
        b1.setBounds(10,boundInt[0],150,100);

        JButton b2 = new JButton (" ", new ImageIcon(iconString[1]));
        b2.setBackground(Color.white);
        b2.setBounds(10,boundInt[1],150,100);

        JButton b3 = new JButton (" ", new ImageIcon(iconString[2]));
        b3.setBackground(Color.white);
        b3.setBounds(10,boundInt[2],150,100);//creating three buttons

        JLabel l1 = new JLabel(new ImageIcon(System.getProperty("user.dir")+"/image/3.jpg"));
        l1.setBounds(0, 0, 400, 50);
        panel.add(l1);//creating a question button

        JButton b4 = new JButton("Cheat");
        b4.setContentAreaFilled(false);  
        b4.setBounds(300, 350, 80, 30); //create a code button, this button will give you an automatic win

        JButton b5 = new JButton("Quit"); //quit
        b5.setContentAreaFilled(false);  
        b5.setBounds(210, 350, 80, 30);

        JTextField b6 = new JTextField("TEXT"); //quit 
        b6.setBounds(210, 60, 170, 270);

        panel.add(b1);
        panel.add(b2);
        panel.add(b3);
        panel.add(b4);
        panel.add(b5); //place button on panel
        panel.add(b6);

        b1.addActionListener( //next three button will listen for which play pick and calculate the win in computeWinner

                new ActionListener() {
                    public void actionPerformed( ActionEvent event ) {
                        computeWinner(1);
                    }
                }
        );

        b2.addActionListener(

                new ActionListener() {
                    public void actionPerformed( ActionEvent event ) {
                        computeWinner(2);
                    }
                }
        );

        b3.addActionListener(

                new ActionListener() {
                    public void actionPerformed( ActionEvent event ) {
                        computeWinner(3);
                    }
                }
        );

        b4.addActionListener(

                new ActionListener() {//cheat button, hit the guy and get a win
                    public void actionPerformed( ActionEvent event ) {
                        win=win+1;
                        total=total+1;

                        JOptionPane.showMessageDialog(null,"Rack up another win!"+"\nWin/Loss rate: " + win+"/"+total+"\nTie: "+tie,"Cheater do prosper", 0, new ImageIcon(System.getProperty("user.dir")+"/image/4.jpg"));

                    }
                }
        );
        b5.addActionListener( //quit the game and show three beat up guys

                new ActionListener() {
                    public void actionPerformed( ActionEvent event ) {
                        String text="Paper: Thank goodness you stop playing!\nThe rock keep trying to break free\n and the scissors keep cutting me!\nRock: Let me out!\nScissors: Damn rock! Snip snip.\n\nAuthor: Thank you for playing and I have\ntake these guys to the hospital now.";
                        JOptionPane.showMessageDialog(null,text, "Thank you for playing!", 0, new ImageIcon(System.getProperty("user.dir")+"/image/6.gif"));
                        System.exit(0);
                    }
                }
        );

        frame.setSize(400, 420); 
        frame.setVisible(true); 
        frame.setResizable(false);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); //set frame size and the game begins!     
    }

    public static void computeWinner(int x){ // computing the winner
        int computerChoice=computerRandomChoice();
        int humanChoice=x;
        String text,text1="";
        String winningCombination= ""+Math.min(computerChoice, humanChoice)+Math.max(computerChoice, humanChoice);

        switch(Integer.parseInt(winningCombination)){

        case 12:
            text = "| Paper wins |";
            if(humanChoice==2) humanWon=1;
            break;
        case 13:
            text = "| Rock wins |";
            if(humanChoice==1) humanWon=1;
            break;
        case 23:
            text = "| Scissors wins |";
            if(humanChoice==3) humanWon=1;
            break;
        default: text="|   DRAW   |";
        humanWon=2;
        tie=tie+1;
        }

        if(humanWon==1){
            text1="| Human wins | ";
            humanWon=0;
            win=win+1;
            total=total+1;
        }else if(humanWon==2){
            text1="";
            humanWon=0;     
        }else{
            text1="| Computer wins |";
            total=total+1;

        }

        JFrame frame = new JFrame("RoPaS Game"); 
        Container panel = frame.getContentPane(); 
        panel.setLayout(null); 

        JLabel l0 = new JLabel(text1+text);
        l0.setBounds(10, 10, 300, 15);
        panel.add(l0);

        JLabel l01 = new JLabel("________________________________________________");
        l01.setBounds(0, 10, 350, 25);
        panel.add(l01);
        //show the result in a new splash screen

        JLabel l1 = new JLabel("| Human |");
        l1.setBounds(60, 35, 150, 35);
        panel.add(l1);

        JLabel l2 = new JLabel("| Computer |");
        l2.setBounds(165, 35, 150, 35);
        panel.add(l2);

        JLabel l3 = new JLabel(new ImageIcon(System.getProperty("user.dir")+"/image/"+(humanChoice-1)+".jpg"));
        l3.setBounds(0, 70, 170, 80);
        panel.add(l3);

        JLabel l4 = new JLabel(new ImageIcon(System.getProperty("user.dir")+"/image/"+(computerChoice-1)+".jpg"));
        l4.setBounds(115, 70,170, 80);
        panel.add(l4);

        JLabel l015 = new JLabel("________________________________________________");
        l015.setBounds(0, 10, 350, 280);
        panel.add(l015);

        JLabel l5 = new JLabel("Win/Loss rate: " + win+"/"+total);
        l5.setBounds(5, 25, 150, 290);
        panel.add(l5);

        JLabel l6 = new JLabel("Tie: "+tie);
        l6.setBounds(5, 30, 125, 310);
        panel.add(l6);

        frame.setSize(300, 240); 
        frame.setVisible(true);
        frame.setResizable(false);

    }

    public static int computerRandomChoice(){// creating a random choice of rock paper or scissors by the computer
        int result=(int)(Math.random()*3)+1;        
        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:23:29.613

将结果放入一个数组中，并通过迭代显示每一轮的数组。或者通过获取字段的文本内容并使用“+”添加新结果来简单地连接结果

应该没什么大不了

# extjs4 - 在 extjs4 中单击按钮时具有动态数据的静态网格

> ID：15523326
> 
> 赞同：1
> 
> 时间：2013-03-20T12:17:50.410
> 
> 标签：extjs4

我正在尝试显示不同的数据（来自不同的商店和模型），在按钮单击时出现，但在某些时候失败（坦率地说，我不确定如何使用重新配置功能）。下面是我的代码：

组件和按钮点击功能：

```
Ext.define('MyApp.view.MyPanel', {
    extend: 'Ext.panel.Panel',

    height: 328,
    width: 478,
    title: 'My Panel',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'button',
                    text: 'Button1'
                },
                {
                    xtype: 'button',
                    text: 'Button2',
                    listeners: {
                        click: {
                            fn: me.onButtonClick,
                            scope: me
                        }
                    }
                },
                {
                    xtype: 'button',
                    text: 'Button3'
                },
                {
                    xtype: 'gridpanel',
                    id: 'myGrid',
                    title: 'My Grid Panel',
                    store: 'Button1Store',
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'Name',
                            text: 'Name'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'Email',
                            text: 'Email'
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    onButtonClick: function(button, e, eOpts) {
        //alert("button 2");

        var gridVar = Ext.getCmp('myGrid');
        var newStore = Ext.getCmp('MyStore2');
        //alert( gridVar.columns[0].dataIndex);
        //gridVar.bindStore(newStore);
        gridVar.reconfigure(newStore, gridVar.columns);
    }

}); 
```

商店 1 和模型 1：

```
Ext.define('MyApp.store.Button1Store', {
    extend: 'Ext.data.Store',

    requires: [
        'MyApp.model.Button1Model'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            autoLoad: true,
            model: 'MyApp.model.Button1Model',
            storeId: 'MyStore1',
            data: [
                {
                    Name: '1',
                    Email: 'test1'
                },
                {
                    Name: '2',
                    Email: 'test2'
                },

            ]
        }, cfg)]);
    }
});

Ext.define('MyApp.model.Button1Model', {
    extend: 'Ext.data.Model',

    idProperty: 'Button1Model',

    fields: [
        {
            name: 'Name'
        },
        {
            name: 'Email'
        }
    ]
}); 
```

商店 2 和模型 2：

```
Ext.define('MyApp.store.Button2Store', {
    extend: 'Ext.data.Store',

    requires: [
        'MyApp.model.Button2Model'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            model: 'MyApp.model.Button2Model',
            storeId: 'MyStore2',
            data: [
                {
                    Name: '3',
                    Email: 'test3'
                },
                {
                    Name: '4',
                    Email: 'test4'
                }
            ]
        }, cfg)]);
    }
});

Ext.define('MyApp.model.Button2Model', {
    extend: 'Ext.data.Model',

    fields: [
        {
            name: 'Name'
        },
        {
            name: 'Email'
        }
    ]
}); 
```

当我尝试这个时，网格中的标题和数据消失了。我试过了，`gridVar.bindStore(newStore);`但它抛出了一个错误，指出数据为空或未定义。请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:25:46.213

如果您对所有操作使用相同的网格，则更改商店的各种操作的代理 URL，并使用 load() 方法将数据填充到网格！

# c# - 如何避免文件上传功能中的路径或目录操作？

> ID：15523327
> 
> 赞同：2
> 
> 时间：2013-03-20T12:17:53.303
> 
> 标签：c#, asp.net, security

在我正在处理的文件上传功能中，一个重要的问题是我可以保存用户上传的图像的路径。在以下代码中，我已经在基于 Web 的应用程序文件夹中指定了用于保存上传文件的文件夹。我的导师告诉我，我在 asp.net UploadFile 控件的代码隐藏中仍然存在以下几行的安全漏洞，我不知道为什么！！！

```
string path = @"~\Images\"; 
string comPath = Server.MapPath(path + "\\" + FileUpload1.FileName); 
```

**你能告诉我如何防止这种安全漏洞吗？**

**更新：**

谁能告诉我如何避免这种安全漏洞？我仍在努力寻找使这两条线安全的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:38:02.947

> 我的导师告诉我，我在 asp.net UploadFile 控件的代码隐藏中仍然存在以下几行的安全漏洞，我不知道为什么！！！

想象一下，如果客户端发送类似`..\..\foo.jpg`文件名之类的内容会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:02:39.100

一个相当简单的解决方法是确保文件名中没有`\`或`/`字符，方法是剥离直到第一个这样的字符的所有内容。（无论如何这是一个好主意，因为浏览器对上传文件名的处理方式各不相同：有些会[发送完整路径](http://www.cs.tut.fi/~jkorpela/forms/file.html#name)，有些[只发送纯文件名](https://bugzilla.mozilla.org/show_bug.cgi?id=143220)，有些甚至可能[发送假路径](http://blogs.msdn.com/b/ie/archive/2009/03/20/rtm-platform-changes.aspx)。）

简单的方法是使用正则表达式：

```
string fileName = Regex.Replace( FileUpload1.FileName, @"(?s)^.*[\\/]", "" ); 
```

请注意，根据您的操作系统和文件系统，还有其他可能导致问题的字符。一般来说，最安全的选择是去掉*所有*字符，除了那些你*知道*是安全的字符，如下所示：

```
string safeFileName = Regex.Replace( fileName, @"[^A-Za-z0-9\-._() ]", "" ); 
```

您可能还想进一步确保文件名的扩展名与您希望文件具有的类型相匹配。

# c - 分配给结构成员的指针会导致分段错误

> ID：15523328
> 
> 赞同：0
> 
> 时间：2013-03-20T12:17:57.410
> 
> 标签：c, segmentation-fault, c99

我的目标是修改[vcprompt](http://bitbucket.org/gward/vcprompt)，使其需要额外的参数，该参数明确指定哪个 VCS 显示状态。以下是更改的要点：

```
typedef struct {
    int debug;
    char *format;                       /* e.g. "[%b%u%m]" */
    int show_branch;                    /* show current branch? */
    int show_revision;                  /* show current revision? */
    int show_patch;                     /* show patch name? */
    int show_unknown;                   /* show ? if unknown files? */
    int show_modified;                  /* show + if local changes? */
    unsigned int timeout;               /* timeout in milliseconds */
    char *vcs;                          /* e.g. "git", "hg" */
} options_t;

...

options_t options = {
    .debug         = 0,
    .format        = format,
    .show_branch   = 0,
    .show_revision = 0,
    .show_unknown  = 0,
    .show_modified = 0,
    .vcs           = NULL
};

...

int opt;
while ((opt = getopt(argc, argv, "hf:dt:v:")) != -1) {
    switch (opt) {
        case 'f':
            options->format = optarg;
            break;
        case 'd':
            options->debug = 1;
            break;
        case 't':
            options->timeout = strtol(optarg, NULL, 10);
            break;
        case 'v':
            printf("%s %s", options->vcs, optarg);
            //options->vcs = optarg;
            break;
    ...
} 
```

当我像这样调用程序时`./vcprompt -v foo`， printf 将以下内容放在输出中：`(null) git`. 如果我取消注释 printf 下面的分配，我会遇到分段错误。

这可能是什么原因？在我看来，我正在做的事情与`vcs`正在做的事情相同`format`。我在 64 位 Windows 上的 cygwin 中运行它。

### 编辑

这是格式的定义

```
#define DEFAULT_FORMAT "[%n:%b] "
...
char *format = getenv("VCPROMPT_FORMAT");
if (format == NULL)
    format = DEFAULT_FORMAT; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:36:59.093

改变这个

```
while ((opt = getopt(argc, argv, "hf:dt:v:")) != -1) {
    switch (opt) {
        case 'f':
            options->format = optarg;
            break;
... 
```

对此

```
while ((opt = getopt(argc, argv, "hf:dt:v:")) != -1) {
    switch (opt) {
        case 'f':
            options->format = strdup(optarg);
            break;

... 
```

这样，在堆上制作并分配选项的副本 -`vcs`成员也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:24:11.870

您没有分配给`format`或`vcs`指向的任何存储空间。照原样，它们*只是*指针。如果你想让它们指向一个字符串，你需要空间来存储字符串数据本身加上一个终止符（'\0'）的空间。处理它的一种方法是调用`strlen()`选项来获取它的长度，然后使用该信息，以便您可以使用`malloc()`分配足够大的空间来容纳完整的 C 字符串，然后让结构中的指针指向该内存块.

# ios - Facebook SDK FBGraphUser 无法存储本地副本

> ID：15523332
> 
> 赞同：3
> 
> 时间：2013-03-20T12:18:05.643
> 
> 标签：ios, objective-c, facebook, facebook-graph-api

我已经为一个项目启动了 Facebook 集成，但遇到了问题。我正在尝试将登录的用户存储为本地对象，以便以后可以引用这些信息，但我似乎无法保留这些信息。

这是我获取用户数据的函数：

```
 if(_session.isOpen)
 {
    [FBSession openActiveSessionWithReadPermissions:nil
                                       allowLoginUI:YES
                                  completionHandler:^(FBSession *session,
                                                      FBSessionState state,
                                                      NSError *error)
     {

         [[FBRequest requestForMe] startWithCompletionHandler:^(FBRequestConnection *connection,
                                                    NSDictionary<FBGraphUser> *user,
                                                    NSError *error)
          {
            if(!error)
            {
                NSLog(@"Username: %@",user.name);

                [_user initWithDictionary:user];
                NSLog(@"Username: %@",[_user objectForKey:@"name"]);

            }
            else
            {
                NSLog(@"Couldn't get user details!");

            }

          }];
     }];

}//endif 
```

在这种情况下，NLog 给出“用户名：（空）”

我对 ObjC 和 Facebook 都很陌生，所以我不确定我做错了什么。另外，我尝试创建一个成员变量：

```
@property (strong, nonatomic) NSDictionary<FBGraphUser> *loggedInUser; 
```

以前我存储用户的代码是

```
if(!error)
            {
                NSLog(@"Username: %@",user.name);

                _user = user;
                NSLog(@"Username: %@", _user.name);

            }
            else
            {
                NSLog(@"Couldn't get user details!");

            } 
```

由于这些都不起作用（第二个起作用，因为第二个 NSLog 给出了正确的变量，但后来尝试在此函数之外访问它导致崩溃）我只能假设我没有正确存储信息。

有人可以给我一些关于我做错了什么的指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T14:33:04.723

`user.username`你不需要打印`user.name`

# java - libgdx - 如何绘制一些像素

> ID：15523333
> 
> 赞同：5
> 
> 时间：2013-03-20T12:18:09.340
> 
> 标签：java, libgdx

我正在尝试更改像素图并对其进行渲染，但修改后的像素未显示在屏幕上。我不确定 Pixmap 是否是最好的方法。谁能向我解释我的错误在下面的代码中的位置？谢谢

```
package com.me.mygdxgame;
import com.badlogic.gdx.ApplicationListener;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Pixmap;
import com.badlogic.gdx.graphics.Pixmap.Format;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.g2d.TextureRegion;
import com.badlogic.gdx.utils.Array;

public class MyGdxGame implements ApplicationListener {

    private OrthographicCamera camera;
    private SpriteBatch batch;
    private Pixmap _pixmap;
    private int _width;
    private int _height;
    private Texture  _pixmapTexture;
    private Sprite _pixmapSprite;
    private int _x = 0;
    private int _y = 0;

    @Override
    public void create() {      
        float w = Gdx.graphics.getWidth();
        float h = Gdx.graphics.getHeight();

        camera = new OrthographicCamera(1, h/w);
        batch = new SpriteBatch();

        _width = (int)Math.round(w);
        _height = (int)Math.round(h);
        _pixmap = new Pixmap( _width, _height, Format.RGBA8888 );
        _pixmap.setColor(Color.RED);
        _pixmap.fillRectangle(0, 0, _width, _height);
        _pixmapTexture = new Texture(_pixmap, Format.RGB888, false);
    }

    @Override
    public void dispose() {
        batch.dispose();
        _pixmap.dispose();
        _pixmapTexture.dispose();
    }

    @Override
    public void render() {  
        updatePixMap();

        Gdx.gl.glClearColor(1, 1, 1, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

        batch.setProjectionMatrix(camera.combined);
        batch.begin();
        batch.draw(_pixmapTexture, -_width/2, -_height/2);
        batch.end();
    }

    private void updatePixMap() {
        _x += 1;
        if (_x >= _width) {
            _x = 0;
        }

        _y += 1;
        if (_y >= _height / 2) {
            return;
        }

        _pixmap = new Pixmap( _width, _height, Format.RGBA8888 );
        _pixmap.setColor(Color.CYAN);
        _pixmap.drawPixel(_x, _y);
        _pixmapTexture = new Texture(_pixmap, Format.RGB888, false);
    }

    @Override
    public void resize(int width, int height) {
    }

    @Override
    public void pause() {
    }

    @Override
    public void resume() {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:31:45.107

您正在每个循环创建一个新的像素图，并且您没有在视图中绘制完整的纹理。

```
import com.badlogic.gdx.ApplicationListener;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Pixmap;
import com.badlogic.gdx.graphics.Pixmap.Format;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.math.MathUtils;

public class MyGdxGame implements ApplicationListener {

    private OrthographicCamera  camera;
    private SpriteBatch         batch;
    private Pixmap              _pixmap;
    private Texture             _pixmapTexture;
    private int                 _x  = 0;
    private int                 _y  = 0;
    private float               _w;
    private float               _h;
    private int                 _width;
    private int                 _height;

    @Override
    public void create() {
        _w = Gdx.graphics.getWidth();
        _h = Gdx.graphics.getHeight();
        _width = MathUtils.round(_w);
        _height = MathUtils.round(_h);

        camera = new OrthographicCamera(1f, _h / _w);
        camera.setToOrtho(false);
        batch = new SpriteBatch();

        _pixmap = new Pixmap(_width, _height, Format.RGBA8888);
        _pixmap.setColor(Color.RED);
        _pixmap.fillRectangle(0, 0, _width, _height);
        _pixmapTexture = new Texture(_pixmap, Format.RGB888, false);
    }

    @Override
    public void dispose() {
        batch.dispose();
        _pixmap.dispose();
        _pixmapTexture.dispose();
    }

    @Override
    public void pause() {
    }

    @Override
    public void render() {
        updatePixMap();

        Gdx.gl.glClearColor(1, 1, 1, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

        batch.setProjectionMatrix(camera.combined);

        batch.begin();
        batch.draw(_pixmapTexture, 1f / 2f, _h / _w / 2f);
        batch.end();
    }

    @Override
    public void resize(final int width, final int height) {
    }

    @Override
    public void resume() {
    }

    private void updatePixMap() {
        _x += 1;
        if (_x >= _width) _x = 0;

        _y += 1;
        if (_y >= _height / 2) return;

        _pixmap.setColor(Color.CYAN);
        _pixmap.drawPixel(_x, _y);
        _pixmapTexture = new Texture(_pixmap, Format.RGB888, false);
    }
} 
```

但这很慢，为什么要这样做？

# c++ - 为 tr1::regex 转义正则表达式特殊字符

> ID：15523335
> 
> 赞同：1
> 
> 时间：2013-03-20T12:18:13.597
> 
> 标签：c++, regex, tr1

我需要**在我的正则表达式中嵌入用户输入**，因此需要对任何正则表达式特殊字符进行转义，而且我事先不知道字符串是什么。

会是这样的

```
string pattern = "\\d+ " + myEscapeFunction(userData); 
```

我需要转义哪些特殊字符？[或者是否有与 Qt 的QRegExp::escape](http://harmattan-dev.nokia.com/docs/library/html/qt4/qregexp.html#escape)等效的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:57:50.603

您必须转义的字符列表取决于您使用的各种正则表达式语法中的哪一种。如果您使用的是 default `ECMAScript`，那么文档中的列表似乎`QRegExp::escape`是一个不错的起点。它说：

> 特殊字符为 $、(,)、*、+、.、?、[、,]、^、{、| 和 }。

`\`由于某种原因，该列表被遗漏了。

但它比这稍微复杂一些，因为在方括号内，除了`\`and之外没有任何字符`]`是特殊的，并且`\]`必须保持未转义。

此外，`?`紧跟在 a 之后的 a`(`并不特殊。例如，在`(?=x)`不**应该**`?`转义。

 **我想差不多就是这样，但我没有花足够的时间来确定。**

# vbscript - 域中所有应用程序的用户名

> ID：15523337
> 
> 赞同：0
> 
> 时间：2013-03-20T12:18:16.003
> 
> 标签：vbscript, batch-file

要求 - 我想使用 VBScript 列出在任何系统应用程序（如虚拟目录等）中使用我的用户 ID/用户名的域中的所有机器名称

请提出适当的方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:29:57.523

我认为您最好的选择是抓取您的域控制器的身份验证日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:20:45.747

这应该让你开始。WMI 是系统信息的接口，通常通过 VBS 调用：

[http://www.codeproject.com/Articles/18928/Gather-Information-about-Domain-PCs-using-WMI](http://www.codeproject.com/Articles/18928/Gather-Information-about-Domain-PCs-using-WMI)

# java - 将画布的宽度和高度传递给类的构造函数

> ID：15523341
> 
> 赞同：1
> 
> 时间：2013-03-20T12:18:29.333
> 
> 标签：java, android

`Player`当我在下面类的构造函数中创建该对象时，我需要将画布宽度和高度的值传递给该类的构造函数`GameSurfaceView`。问题是我当时无法掌握画布宽度和高度的任何值。到目前为止，对我来说，唯一的方法是我可以在`Run()`方法中获取画布的宽度和高度，但是为时已晚，因为我已经创建了对象。

我想出了一个想法，将 的引用传递给类`GameSurfaceView`的第二个构造函数`Player`，这样我就可以从画布中传递并获取值，但我想，那时也没有任何价值，当对象已创建！

请询问我的问题是否不清楚。下面是我正在使用的代码的主要部分。我还使用一个`MainActivity`类来创建下面类的对象。

```
public class GameSurfaceView extends SurfaceView implements Runnable {
    SurfaceHolder surfaceHolder;
    Canvas canvas;
    int screenWidth, screenHeight;

    // Constructor
    public GameSurfaceView(Context context) {
        super(context);
        surfaceHolder = getHolder();

        // Create player sprite object
        player = new Player(texturePlayer, xPlayer, yPlayer);       
    }

    // Create player sprite object alternative 2
    player = new Player(this, texturePlayer, xPlayer, yPlayer);     
    }

    @Override
    public void run() {

        canvas = surfaceHolder.lockCanvas();

        screenWidth = canvas.getWidth();
        screenHeight = canvas.getHeight();

        // Do the drawing to screen here
        surfaceHolder.unlockCanvasAndPost(canvas);  
    }
} 
```

# android - AchartEngine 时间图右移

> ID：15523343
> 
> 赞同：1
> 
> 时间：2013-03-20T12:18:31.887
> 
> 标签：android, achartengine

我正在使用适用于 Android 的 AChartEngine 库，并且在时间图中，x 标签与图表上的点不对应，正如您在图像中看到的那样。

![屏幕一](../Images/e41d8ea89e0e9e9da3640dae864819b7.png)

![屏幕 2](../Images/dca40862f9cb2622e3534d171be14153.png)

图表似乎略微向右移动。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:15:42.567

可以使用以下方法解决此问题：

```
renderer.setXRoundedLabels(false); 
```

# java - 如何从 JformattedTextfield 检索货币格式值

> ID：15523346
> 
> 赞同：1
> 
> 时间：2013-03-20T12:18:35.407
> 
> 标签：java, swing, textfield, number-formatting, jformattedtextfield

**我在尝试检索计算值并将其传递给 JformattedTextfield 时遇到了这个问题，我知道由于 jformattedTextfield ( ,** ) ，Float 不能接受 1,500.00 。有没有办法绕过这个问题？

```
 private void SellButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
      float foreign , sellingRate, localAmount;
            try{
            DefaultTableModel dtm=(DefaultTableModel)p1.getModel();
            int i = p1.getSelectedRow();
            String s1=dtm.getValueAt(i,2).toString();
            txt_rate.setText(s1);
      }catch(Exception e){
          JOptionPane.showMessageDialog(null, "Select Currency First");
      }
            foreign =  Float.parseFloat(txt_select.getText());
            sellingRate =  Float.parseFloat(txt_rate.getText());
            localAmount = foreign / sellingRate;
            txt_amount.setValue(localAmount);
        } 
```

错误信息

```
Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: For input string: "1,500.00"
        at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1241)
        at java.lang.Float.parseFloat(Float.java:452) 
```

![千元以下](../Images/ccc117dcbc0c7776abc46cc776ba6858.png)

我可以计算出 { **1,000** }以下的数字

预期结果 ![预期结果](../Images/a5a72247690b4662e738d28069124926.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:41:53.703

你真的想让用户输入带有千位分隔符的货币吗？至少对于我迄今为止看到和开发的所有应用程序来说，这是非常罕见的。

通常你只将它用于显示目的，而不是用于输入。因此，用户将输入`1000`，您将`1,000.00`通过将值格式化为`NumberFormat.format()`.

如果您真的想要这样的输入，则应将其视为 a `String`，然后按[此处](https://stackoverflow.com/questions/1097332/convert-a-string-to-number-java)`NumberFormat.parse()`所示进行解析。

# ios - 在应用程序的生产版本上禁用远程 Web 检查器

> ID：15523348
> 
> 赞同：1
> 
> 时间：2013-03-20T12:18:39.527
> 
> 标签：ios, cordova

我有点担心 Safari 的远程 Web 检查器可能会在运行时用于访问我的应用程序的源代码。使用 IPA 进行的快速测试似乎表明此功能在非调试模式下被禁用。

我想我会和你再核对一下。有什么建议吗？我需要添加任何额外的措施来确保它被禁用吗？

贾米尔

# php - 使用 AJAX 将数据保存到 mysql 时遇到问题

> ID：15523350
> 
> 赞同：0
> 
> 时间：2013-03-20T12:18:43.707
> 
> 标签：php, mysql, ajax

我正在使用 AJAX 的非常基本的技术将表单保存到使用 AJAX 的数据库中。

但是我遇到了一些麻烦。

我搜索的所有内容都是 jQuery 代码，但我只想用简单的 AJAX 来做这件事。

HTML表格：

```
<form id="submitcourse" name="submitcourse" method="get">
<p>Course Name: &nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="cvalue" id="cvalue" /></p>
<a href="#" onclick="submitformwithajax();">Successfull</a>

</form>
<span id="result">.</span> 
```

阿贾克斯代码：

```
<script type="text/javascript">
    function GetXmlHttpObject()
    {
        if(window.XMLHttpRequest)
        {
            return new XMLHttpRequest();

        }
        if(window.ActiveXobject)
        {
            return new ActiveXObject("Microsoft.XMLHTTP");
        }
        return null;

    }
    function submitformwithajax()
    {
        var myAjaxPostrequest=new GetXmlHttpObject();

        var coursename=document.submitcourse.cvalue.value;

        var parameter="cvalue="+coursename;

        myAjaxPostrequest.open("GET", "do.php", true)
        myAjaxPostrequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        myAjaxPostrequest.send(parameter)
        myAjaxPostrequest.onreadystatechange=function{
            if(myAjaxPostrequest.readyState==4){
                if(myAjaxPostrequest.status==200){
                    document.getElementById("result").innerHTML=myAjaxPostrequest.responseText;
                    document.getElementById("submitcourse").style.display="none";
                }
                else
                document.getElementById("submitcourse").innerHTML="An error has occured making the request";

            }
        }
    }

    </script> 
```

上述 AJAX 代码的目的是将表单详细信息发送到 do.php 文件，我可以在其中处理接收到的数据。

do.php 文件：

```
<?php
$course=$_REQUEST['cvalue'];
echo "dddd".$course;

?> 
```

现在我无法获取 do.php 文件中的值，请帮帮我，

注意：我有使用 jQuery 执行此操作的代码，但我只想在此方法中执行此操作。因为它是为了向学生教授基本 AJAX。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T12:26:22.147

马上我注意到你的函数定义后没有 () ......

```
myAjaxPostrequest.onreadystatechange=function{ 
```

应该

```
myAjaxPostrequest.onreadystatechange=function(){ 
```

让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:43:09.697

问题是：您将参数放在 send() 中，这是不正确的，因为您发送 GET 请求，请将代码更改为：

```
myAjaxPostrequest.open("GET", "do.php?"+parameter, true)
myAjaxPostrequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
myAjaxPostrequest.send() 
```

使用 Ajax GET，参数应该与 URL 混合，但是，您的代码对于 POST 方法是正确的。

或者如果你想使用 POST

```
myAjaxPostrequest.open("POST", "do.php", true)
myAjaxPostrequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
myAjaxPostrequest.send(parameter) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:28:24.610

看看您是否无法改用 getElementsByName

```
var coursename=document.getElementsByName('cvalue')[0].value; 
```

# c# - Windows身份验证后的自定义安全模块

> ID：15523353
> 
> 赞同：2
> 
> 时间：2013-03-20T12:18:57.983
> 
> 标签：c#, wcf

我想创建一个自定义安全模块，一旦发生身份验证，它将在所有服务上运行。

所有服务都将配置为支持 Windows 身份验证。如果身份验证成功，自定义安全模块将负责：根据数据库~~验证~~用户并创建自定义主体并将其设置为 WCF 操作上下文的属性。

我是否需要使用自定义 ServiceBehaviour、EndpointBehaviour 或有其他替代方案来实现这一点？

我应该将自定义主体设置到哪个属性？

有人可以将我推向正确的方向吗？

谢谢

**更新 1**
我在上面使用了“验证”这个词，我的错误我应该使用“验证”，因为模块只会验证用户是否存在。为了验证用户是否存在，模块不需要接收用户的密码。我想继续使用“Windows”作为 clientCredentialType。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:31:52.567

您可以为此使用自定义验证。它将允许您通过自定义逻辑添加对某些数据的额外安全检查。您必须创建验证类，从 UserNamePasswordValidator 继承并覆盖 Validate() 方法，您可以在其中传递一些数据并使用您的逻辑来处理它。[http://blogs.msdn.com/b/pedram/archive/2007/10/05/wcf-authentication-custom-username-and-password-validator.aspx](http://blogs.msdn.com/b/pedram/archive/2007/10/05/wcf-authentication-custom-username-and-password-validator.aspx)上有一个很好的例子

昨天我和Bvb202就这个话题进行了讨论。如果您感兴趣，请阅读[账户管理](https://stackoverflow.com/questions/15471873/account-management/15472306#15472306)

# android - 在我的 Android 应用程序上全面实施谷歌地图方向服务

> ID：15523355
> 
> 赞同：3
> 
> 时间：2013-03-20T12:19:03.427
> 
> 标签：android, google-maps-android-api-2

我已经在网上搜索了几个小时，以获取在我的 android 应用程序上实现 direccions 服务的示例。

```
I am using the google maps android api 2. 
```

基本上我想要来自实际位置的方向和用户选择的标记位置。

我想明确表示我不想启动网络浏览器或谷歌地图应用程序，我想在我自己的应用程序上实现该服务。

直到现在我发现了一些关于在地图上绘制路线的例子，这些都可以

[http://wptrafficanalyzer.in/blog/gps-and-google-map-in-android-applications-series/](http://wptrafficanalyzer.in/blog/gps-and-google-map-in-android-applications-series/)

[使用 Google Maps API v2 获取行车路线](https://stackoverflow.com/questions/14495030/google-map-api-v2-get-driving-directions/15053901#15053901)

所以我只是错过了服务的指示部分，所以你可以用箭头显示在我自己的列表视图上（向左、向右等）。

感谢您阅读我的问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T19:46:43.067

我不确定你想要什么。在您关于 Google Map API v2 的第二个链接中，用于绘制地图的数据来自 maps.googleapis.com。您可以查看[https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)以获取更多相关文档。

从 maps.googleapis.com 返回的 xml 包含`<html_instructions>`标签，其中包含类似`turn left`or的指令`turn right`。因此，您只需要解析该 xml 并使用`<html_instructions>`标签获取您在`listview`.

我希望这有帮助。

# facebook - 如何在不登录 facebook 的情况下使用 facebook API 在朋友的墙上发帖？

> ID：15523357
> 
> 赞同：0
> 
> 时间：2013-03-20T12:19:06.487
> 
> 标签：facebook, facebook-graph-api

在最新的 Facebook API 更改后，有没有办法使用经过身份验证的 access_token 在朋友的墙上发帖？

我曾尝试使用[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)，但会重定向到 facebook 登录页面。我想绕过登录步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:14:00.990

不幸的是没有。来自关于发布的 Facebook API 文档：

“注意：如果您要发布到朋友的时间线或墙上，则必须使用 Feed 对话框。”

完整详情：[https ://developers.facebook.com/docs/reference/api/publishing/](https://developers.facebook.com/docs/reference/api/publishing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:22:54.770

**不，你不能**

目前，Facebook 允许通过两种方式发帖：

1.  使用[FacebookAPI](http://developers.facebook.com/docs/reference/api/)

2.  使用[Facebook SDK](http://developers.facebook.com/docs/sdks/)（取决于您的要求）

    在这两种方法中，您必须是**授权用户**才能执行该操作，**身份验证是必须的**。因此，如果没有登录，您将无法执行此操作。

**注意：**根据 Facebook 开发人员文档，图形 API 不再有效。（但我想补充一点，许多使用此服务的 iOS 应用程序仍然运行良好）。所以，我更喜欢使用 Facebook SDK。

希望我的回答很清楚。

# android - 摩托罗拉 xoom 上的应用程序将纵向方向更改为横向

> ID：15523359
> 
> 赞同：-2
> 
> 时间：2013-03-20T12:19:08.147
> 
> 标签：android, orientation, landscape, portrait, xoom

我们正在开发一个应用程序，它在第二次发布时将硬编码的方向纵向更改为横向。

我们在清单文件的所有活动定义中都有 screenOrientation="portrait"。

知道如何解决这个问题吗？这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myproject"
    android:installLocation="auto"
    android:versionCode="13"
    android:versionName="12.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:icon="@string/icon"
        android:label="@string/app"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        <meta-data
            android:name="com.mobclix.APPLICATION_ID"
            android:value="XXXX" />

        <activity
            android:name=".SplashActivity"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:screenOrientation="portrait" />
        <activity
            android:name=".xyactivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:screenOrientation="portrait" />
        <activity
            android:name=".xyzActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:screenOrientation="portrait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name=".abactivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:screenOrientation="portrait"
            android:windowSoftInputMode="adjustPan" />
        <activity
            android:name="com.mobclix.android.sdk.MobclixBrowserActivity"
            android:theme="@android:style/Theme.Translucent.NoTitleBar" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T12:29:20.777

为了仅限于纵向，您需要在清单文件中声明期间为每个活动放置此代码

```
<activity android:name="MyApp" android:screenOrientation="portrait" android:configChanges="orientation|keyboardHidden"></activity> 
```

# wpf - 如果用户删除小数点后的数字，则浮点值绑定到文本框会自动删除点

> ID：15523368
> 
> 赞同：0
> 
> 时间：2013-03-20T12:19:37.350
> 
> 标签：wpf, binding

我有一个绑定到视图模型浮动属性的文本框，在 UI 上，如果我使用点输入任何值并删除点后的数字，那么点会自动删除，但我不想要这个，如果我使用**StringFormat={}{##.# #}**在绑定中（它有效）然后它没有在我想要的 UI 上显示默认浮点值。

视图模型

```
 public float Text
    {
        get { return this.text; }
        set
        {
            this.text = value;
            this.OnPropertyChanged("Text");
        }
    } 
```

xml

请恢复为高优先级:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:27:15.743

我可以建议的解决方案是使用一个将浮点数作为输入并从转换器返回其字符串值的转换器。

# facebook - 找不到 ColdFusion 组件或接口？

> ID：15523371
> 
> 赞同：2
> 
> 时间：2013-03-20T12:19:42.857
> 
> 标签：facebook, api, coldfusion, coldfusion-10

我正在使用 ColdFusion 10、Windows 7 64bit、Railo 4 并安装了[Facebook CF SDK](https://github.com/affinitiz/facebook-cf-sdk)。当我尝试测试安装时，它会抛出此错误：

```
Could not find the ColdFusion component or interface facebook.sdk.FacebookApp.

Ensure that the name is correct and that the component or interface exists.

The error occurred in C:/ColdFusion10/cfusion/wwwroot/facebook-cf-sdk/examples/website/index.cfm: line 34
32 : } else {
33 :    // Create facebookApp instance
34 :    facebookApp = new FacebookApp(appId=APP_ID, secretKey=SECRET_KEY);
35 : 
36 :    // See if there is a user from a cookie or session 
```

如何修复此错误并将此 Facebook API 与 ColdFusion 集成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:52:02.250

它看起来像说明中的错误，而不是让文件夹被`facebook-cf-sdk`重命名`facebook`为它正在寻找 cfc 的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:57:14.803

Busches 的回答绝对可以解决问题。另一种选择是修改**导入**以匹配您的目录结构：

*facebook-cf-sdk / 示例 / 网站 / index.cfm*

```
<cfscript>
import "facebook-cf-sdk.sdk.FacebookApp";
import "facebook-cf-sdk.sdk.FacebookGraphAPI"; 
```

*facebook-cf-sdk / 示例 / 网站 / tags.cfm*

```
<cfimport taglib="/facebook-cf-sdk/sdk/tags" prefix="facebook" />
<cfscript>
import "facebook-cf-sdk.sdk.FacebookApp";
import "facebook-cf-sdk.sdk.FacebookGraphAPI"; 
```

包含连字符的组件路径需要引号。

希望这会有所帮助， - Minh

# android - 键盘以横向模式全屏打开

> ID：15523372
> 
> 赞同：7
> 
> 时间：2013-03-20T12:19:43.070
> 
> 标签：android, android-softkeyboard

当我在横向模式下在我的应用程序中打开软键盘时，键盘会覆盖我的整个应用程序。唯一显示的是键盘和顶部用于输入文本的空格。键盘在纵向模式下显示正确。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T12:38:19.950

基本上它不是您的应用程序的错误。它是如何设计键盘 IME 的。当用户进入横向模式时，它将占据整个屏幕。

您可以从 Play 商店安装一些第三方 IME，看看它在纵向模式下是如何工作的。

根据下面MCeley给出的链接。您可以执行以下操作

```
@Override
public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
    outAttrs.imeOptions = EditorInfo.IME_FLAG_NO_EXTRACT_UI;
} 
```

或更改您的活动清单，如下所示

```
android:imeOptions="flagNoExtractUi" 
```

[在这里阅读更多讨论](https://stackoverflow.com/questions/4336762/disabling-the-fullscreen-editing-view-for-soft-keyboard-input-in-landscape)

# animation - 如何在 Jvector 地图中添加动画

> ID：15523373
> 
> 赞同：0
> 
> 时间：2013-03-20T12:19:43.490
> 
> 标签：animation, jvectormap

我想创建一个看起来像[http://map.honeynet.org/的地图](http://map.honeynet.org/)

我可以在 jvector 地图中添加标记，它看起来像这样。

![世界地图](../Images/5215acc355a974fd46e30a0c1b6a0a02.png) 这是我的代码：

```
 <!DOCTYPE html>
<html>
<head>
  <title>World Map</title>
  <link rel="stylesheet" href="/home/aravi/heatmap/jvector/jvectormaps/jquery-jvectormap-1.2.2.css" type="text/css" media="screen"/>
  <script src="/home/aravi/heatmap/jvector/jvectormaps/tests/assets/jquery-1.8.2.js"></script>
  <script src="/home/aravi/heatmap/jvector/jvectormaps/jquery-jvectormap-1.2.2.min.js"></script>
  <script src="/home/aravi/heatmap/jvector/jvectormaps/jquery-jvectormap-world-mill-en.js"></script>
</head>
<body>
  <div id="world-map-markers" style="width: 1200px; height: 600px; margin-left: 400px; margin-top: 38px;"> </div>
  <script>
   $(function(){
  $('#world-map-markers').vectorMap({
    map: 'world_mill_en',
    scaleColors: ['#C8EEFF', '#0071A4'],
    normalizeFunction: 'polynomial',
    hoverOpacity: 0.7,
    hoverColor: false,

    markerStyle: {
      initial: {
    fill: 'red',
    r: '3',
    stroke: '#383f47'
      }
    },
    backgroundColor: '#383f47',
    markers: [
      {latLng: [41.90, 12.45], name: 'Vatican City'},
      {latLng: [43.73, 7.41], name: 'Monaco'},
      {latLng: [-0.52, 166.93], name: 'Nauru'},
      {latLng: [-8.51, 179.21], name: 'Tuvalu'},
      {latLng: [43.93, 12.46], name: 'San Marino'},
      {latLng: [47.14, 9.52], name: 'Liechtenstein'},
      {latLng: [7.11, 171.06], name: 'Marshall Islands'},
      {latLng: [17.3, -62.73], name: 'Saint Kitts and Nevis'},
      {latLng: [3.2, 73.22], name: 'Maldives'},
      {latLng: [35.88, 14.5], name: 'Malta'},
      {latLng: [12.05, -61.75], name: 'Grenada'},
      {latLng: [13.16, -61.23], name: 'Saint Vincent and the Grenadines'},
      {latLng: [13.16, -59.55], name: 'Barbados'},
      {latLng: [17.11, -61.85], name: 'Antigua and Barbuda'},
      {latLng: [-4.61, 55.45], name: 'Seychelles'},
      {latLng: [7.35, 134.46], name: 'Palau'},
      {latLng: [42.5, 1.51], name: 'Andorra'},
      {latLng: [14.01, -60.98], name: 'Saint Lucia'},
      {latLng: [6.91, 158.18], name: 'Federated States of Micronesia'},
      {latLng: [1.3, 103.8], name: 'Singapore'},
      {latLng: [1.46, 173.03], name: 'Kiribati'},
      {latLng: [-21.13, -175.2], name: 'Tonga'},
      {latLng: [15.3, -61.38], name: 'Dominica'},
      {latLng: [-20.2, 57.5], name: 'Mauritius'},
      {latLng: [26.02, 50.55], name: 'Bahrain'},
      {latLng: [0.33, 6.73], name: 'São Tomé and Príncipe'}
    ]
  });
});
  </script>
</body>
</html> 
```

任何人都可以帮助我如何将动画添加到地图中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:52:32.070

快3周了，还是没有反应。幸运的是，这解释了蜜网地图的工作原理。[https://github.com/fw42/honeymap](https://github.com/fw42/honeymap) 经过大量阅读后，在谷歌地图中实现了相同的功能。[http://jsbin.com/ivedix/2/edit](http://jsbin.com/ivedix/2/edit)

# django - 如何获取多线程和外键的特定密钥

> ID：15523374
> 
> 赞同：0
> 
> 时间：2013-03-20T12:19:44.133
> 
> 标签：django, django-models

我有三个模型：

```
class Section(models.Model):
    name = models.CharField()

class ParamText(models.Model):
    text = models.TextField()

class Param(models.Model):
    name = models.CharField()
    value = models.IntegerField()
    texts = models.ManyToManyField(ParamText)
    section = models.ForeignField(Section) 
```

这是一个简单的例子。现在我想用具体数据创建类：

```
class ObjectTemplate(models.Model):
    params = models.ManyToManyField(Param) 
```

但我想把这个模型具体的 ParamText 放在特定的 Param 中。我的 ObjectTemplate 应该包含许多 params[Param]（唯一会很棒），每个 Param 只有一个选定的 ParamText。

如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:21:30.993

首先要创建一个独特的 parmas[parm] 使用 OneToOneField 而不是 manytomany 。

并访问一个特定的键：每个对象都有一个 id，所以你可以使用它

设 p 为 Param 的对象

所以要从你必须使用的参数中获取部分 id

> > > p.section.id

这将返回一个包含对象 id（主键）的 long int。

我认为以下内容将为每个帕尔马问题解决您的一个帕尔马文本

```
class Section(models.Model):
    name = models.CharField()

class ParamText(models.Model):
    text = models.TextField()

class Param(models.Model):
    name = models.CharField()
    value = models.IntegerField()
    texts = models.OneToOneField(ParamText)
    section = models.ForeignField(Section) 
```

# c# - 将网格列与具有不同值的特定列绑定

> ID：15523375
> 
> 赞同：0
> 
> 时间：2013-03-20T12:19:45.190
> 
> 标签：c#, .net, winforms

我有以下数据库表>>

```
TradeNo | Buy_Sell | Trade_Qty | Market_Price

205412     1           50            300   

205487     2           30            350 

208754     1           20            200 
```

在此表中有列 Buy_Sell。买=1，卖=2

当我绑定网格时，值会按原样显示。

但是，我想在网格中将它们显示为 >

```
 TradeNo | Buy_Sell | Trade_Qty | Market_Price

    205412     Buy           50            300   

    205487     Sell          30            350 

    205487     Buy           20            200 
```

我怎样才能做到这一点？

我只是用以下代码绑定了网格>

```
try
{
  da=new SqlDataAdapter("Select TradeNo, Buy_Sell,TradeQty,Market_Price from tradeFile",conn);
  DataSet ds=new DataSet();
  da.Fill(ds);
  gvTrade.dataSource=ds.Tables[0]; 
}
catch(Exception ex)
{
   MessageBox.Show(ex.Message);
} 
```

代码中应该有哪些变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:24:46.713

如果`Buy_Sell`是引用“Buy_Sell_Types”表的外键列，请将查询更改为以下内容（添加连接）：

```
SELECT TradeNo, Buy_Sell_Types.Name, TradeQty, Market_Price 
FROM tradeFile
JOIN Buy_Sell_Types ON tradeFile.Buy_Sell = Buy_Sell_Types.PrimaryKey 
```

否则，您可以使用 LINQ 转换代码中的数据：

```
try
{
    da=new SqlDataAdapter("SELECT TradeNo, Buy_Sell, TradeQty, Market_Price FROM tradeFile", conn);
    DataSet ds=new DataSet();
    da.Fill(ds);
    gvTrade.dataSource = ds.Tables[0].AsEnumerable()
             .Select(d => new 
             {
                 TradeNo = d.Field<int>("TradeNo"),
                 Buy_Sell = d.Field<int>("Buy_Sell") == 1 ? "Buy" : "Sell",
                 TradeQty = d.Field<int>("TradeQty"),
                 Market_Price = d.Field<double>("MarketPrice")
             }); 
}
catch(Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

# jsp - 如何在javascript函数中访问jsp数组

> ID：15523379
> 
> 赞同：0
> 
> 时间：2013-03-20T12:19:59.933
> 
> 标签：jsp

如何在单个jsp页面中访问javascript函数中的jsp数组？

```
String[] abc[]={"saab","volvo","bmw","Benz","Porsche","Jaguar"};
abc[0]="saab"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:23:02.923

您应该首先使用例如 FlexJson 将其序列化为 json 对象。

您可以将 java 数组序列化为 json 数组，它应该看起来像

```
[{item1, item2},{item},{item1,item2}] 
```

用那个方法

```
String[] temp = ...
StringBuilder builder = new StringBuilder();
builder.append("[");
for(int i = 0 ; i < temp.length ; i++){
    builder.append(temp[i]);
    if(i != temp.length - 1 ){
    builder.append(",");
}
}
builder.append("]");
String jsonArray = builder.toString(); 
```

并将其添加到您的请求中；

然后在你的 javascript 中使用

```
var array = <%= request.getAttribute("temp")%>; 
```

检查这是不是

```
console.log(array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:24:21.997

打印它以逐字响应并通过javascript处理它。

幕后：jsp-inline 代码在服务器端运行。javasrcript 代码在浏览器上运行..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T12:23:02.770

```
<%  
String[] abc={'saab',' volvo',"bmw","Benz","Porsche","Jaguar"};  
%> 

<script language="JavaScript">  

var jsArr = new Array();  
<%  
for (int i=0; i < abc.length; i++) {  
%>  
jsArr[<%= i %>] = '<%=abc[i] %>';   //Here is the latest update check it sravan .Put single quotes.
<%}%> 
</script>

  function myFunction()
  {
    var select = document.getElementById("dropDownId");

      for ( var i = 0; i < jsArr.length; i++ ){

      var option = document.createElement("option");
      // set the text that displays for the option
       option.innerHTML = status[i];
     // add the option to your select dropdown
       select.appendChild(option);

   } 
```

# ruby-on-rails-3 - 源 ~/.rvm/source/rvm

> ID：15523383
> 
> 赞同：-2
> 
> 时间：2013-03-20T12:20:10.993
> 
> 标签：ruby-on-rails-3, rvm

偶尔在我的 Rails 应用程序上工作时，我尝试使用 Rails 命令并收到此错误：

```
The program 'rails' can be found in the following packages:
 * rails
 * ruby-railties-3.2
Try: sudo apt-get install <selected package> 
```

这种情况一遍又一遍地发生。我尝试`gem install rails`并没有帮助。我必须先运行`source ~/.rvm/source/rvm`，然后`gem install rails`。但不久之后，同样的事情开始发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:00:02.067

我猜您错过了阅读安装程序和 rvm 命令的说明，请遵循此简单说明[https://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/) - 对于您的默认终端仿真器，它可能有点不同。

# c# - 在这个无限的while循环中应该有2个break语句

> ID：15523384
> 
> 赞同：2
> 
> 时间：2013-03-20T12:20:13.570
> 
> 标签：c#

[这是来自 Microsoft 套接字教程http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx](http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx)的示例

我有点困惑。第一个 while(true) 无限循环后面跟着第二个 4 行，但我们只使用一个 break 语句。在第二个 while 循环中使用 break 应该继续第一个 while 循环......不是吗？ [http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx](http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx)

```
while (true) {
    Console.WriteLine("Waiting for a connection...");
    // Program is suspended while waiting for an incoming connection.
    Socket handler = listener.Accept();
    data = null;

    // An incoming connection needs to be processed.
    while (true) {
        bytes = new byte[1024];
        int bytesRec = handler.Receive(bytes);
        data += Encoding.ASCII.GetString(bytes,0,bytesRec);
        if (data.IndexOf("<EOF>") > -1) {
            break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T12:22:25.790

你是对的。本例中的外循环不应该退出。这是为了不断寻找新的连接。服务器倾向于遵循这种基本模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:24:29.240

是的，break 语句只退出内部的 while 循环。这才是重点。它正在接受连接，然后读取所有数据。直到永远。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:22:58.193

在此示例中，`Socket handler = listener.Accept();`是等待客户端连接的阻塞调用。

外部 while 循环只是让服务器保持活动状态。所以它不需要`break;`

# ios - UICollectionView 单元格配置太多次

> ID：15523393
> 
> 赞同：6
> 
> 时间：2013-03-20T12:20:36.203
> 
> 标签：ios, ios6, uicollectionview, uicollectionviewcell

我注意到它多次`UICollectionView`调用它的数据源。`collectionView:cellForItemAtIndexPath:`例如，在每个`layoutSubviews`单元格上都“重新配置”，无论它们是否已经可见。

当`collectionView:cellForItemAtIndexPath:`被调用时，我们应该：

> 此方法的实现负责为给定项目创建、配置和返回适当的单元格。为此，您可以调用 `dequeueReusableCellWithReuseIdentifier:forIndexPath:`集合视图的方法并传递与您想要的单元格类型相对应的重用标识符。该方法总是返回一个有效的单元格对象。收到单元格后，您应该设置与相应项目的数据对应的任何属性，执行任何其他需要的配置，然后返回单元格。

问题是配置单元并不总是便宜的操作，我不明白为什么要重新配置已经配置的单元。

我们如何避免单元的冗余配置？或者有什么我没有正确理解的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:37:48.563

我认为你无法避免这种情况。问题是**UICollectionView**太笼统了，FlowLayout 不是唯一的布局。由于您可以进行疯狂的布局，因此任何布局更改（例如 layoutsubviews）都可能完全改变您想要的布局——纵向网格和横向三角形排列......知道布局应该是什么的唯一方法是找出每个单元格的位置和大小。

**UICollection**视图对于很多元素来说*并不便宜。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-21T17:29:44.300

只需配置一个`cell`just use后`cell.tag = 1;`，下次就可以避免使用 using 重新配置同一个单元格`if(!cell.tag)`。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:YourCellReuseIdentifier forIndexPath:indexPath];
    if(!cell){
        //Create cell ...
    } 
    if(!cell.tag){
        //Do things you have to do only once
    }
    else{
        //DO things you have to do every time.
    }

    return cell;
} 
```

# javascript - 如何在不使用 JQuery 的情况下禁用整个 Div 内容

> ID：15523396
> 
> 赞同：0
> 
> 时间：2013-03-20T12:20:42.613
> 
> 标签：javascript, html, xhtml

因为我有 JavaScript 的基本知识，所以我想做如下操作：

*   通过使用两个单选按钮为付款提供两个选项：

    1.  用现金
    2.  通过支票
*   如果用户选择 Cash 的单选按钮，Check Button 也应该禁用，并且 Check 的 Div 中的支票号码和银行名称等详细信息也应该禁用。

*   和签证Versa

有没有办法在不使用 JQuery 的情况下做到这一点？（禁用 div 并禁用所有内容）

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:25:50.300

尝试这个：

```
document.getElementById("myDivId").disabled = true; 
```

要禁用 div 中的所有元素，请尝试以下操作：

```
var allChildNodes = document.getElementById("myDivId").getElementsByTagName('*');

for(var i = 0; i < allChildNodes.length; i++)
{
   allChildNodes[i].disabled = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:26:37.490

此代码将禁用给定容器中的所有元素。

```
var container = document.getElementById("cashContainer");
var inputs = document.getElementsByTagName("input").concat(document.getElementsByTagName("select"));
for (var i = 0; i < inputs.length; i++) {
    inputs[i].disabled = true;
} 
```

应用相同的代码，您可以重新启用另一个容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:57:30.190

你可以试试这个

**HTML**

```
<input type="radio" name="cashcheck" value="cash" checked />Cash<br />
<div id="cash">
    <form method="post">
        <input type="text" name="cashTxt1" />
        <input type="text" name="cashTxt2" />
    </form>
</div>

<input type="radio" name="cashcheck" value="check" />Check<br />
<div id="check">
    <form method="post">
        <input type="text" name="checkTxt1" disabled />
        <input type="text" name="checkTxt2" disabled />
    </form>
</div> 
```

**JS**

```
window.onload=function(){
    var radios = document.getElementsByName('cashcheck');
    radios[0].onchange=toggle;
    radios[1].onchange=toggle;
};

function toggle()
{
    if(this.checked)
    {
        var div = document.getElementById(this.value),
        inputs = div.getElementsByTagName('form')[0].getElementsByTagName('*');
        for( var i=0; i<inputs.length; i++)
        {
            inputs[i].removeAttribute('disabled');
        }

        var op = this.value == 'cash' ? 'check' : 'cash',
        divOp = document.getElementById(op),
        divOpInputs = divOp.getElementsByTagName('form')[0].getElementsByTagName('*');
        for( var i=0; i<divOpInputs.length; i++)
        {
            divOpInputs[i].setAttribute('disabled');
        }
    }
} 
```

[**演示。**](http://jsfiddle.net/TjAZq/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-26T11:04:11.360

```
<fieldset disabled="true">
  <div>
    <input type="text" />
  </div>
  <br>

  <div>
    <input type="text" />
  </div>
  <br>

  <div>
    <input type="text" />
  </div>
  <br>
</fieldset>
```

# android - 使用 Ant 构建和签署包含库的 APK 时出现 NoClassDefFoundError

> ID：15523401
> 
> 赞同：0
> 
> 时间：2013-03-20T12:20:55.703
> 
> 标签：android, ant, jar

我在启动已通过 Ant 构建和签名的 APK 时遇到问题。

我的项目包括一个库。这个图书馆也是![在此处输入图像描述](../Images/6a64c6eed579754bea600feedb730846.png)

我的项目构建良好，但是当我启动它时，应用程序崩溃并出现 NoClassDefFoundError。

我认为可以通过将我的库（这里是库“SEMobile”）“semobile.jar”添加到我的项目的“libs”文件夹中来避免这个错误，但结果完全相同：

它构建和签名都很好，但是当我启动我的应用程序时，它仍然会因 NoClassDefFoundError 而崩溃。

崩溃的堆栈跟踪是：

```
java.lang.NoClassDefFoundError: fr.turbosa.turbosuite.releves.ReleveFragment
        at fr.turbosa.turbosuite.demarrage.FragmentMain.onCreate(FragmentMain.java:94)
        at android.app.Activity.performCreate(Activity.java:5104)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2258)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2354)
        at android.app.ActivityThread.access$600(ActivityThread.java:150)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244) 
```

我的项目使用 ActionBarSherlock，它被添加为库项目。该活动`ReleveFragment`是`SherlockFragment`. 我也应该将我的 ActionBarSherlock jar 文件添加到我的 libs 文件夹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:42:12.300

问题是由于我的片段使用的外部库（已定义文件夹中的 jar 文件）。

将此 jar 文件设置到“libs”库中可以纠正该问题。

# sql - 是否可以加入这两个表

> ID：15523406
> 
> 赞同：1
> 
> 时间：2013-03-20T12:21:13.207
> 
> 标签：sql, sql-server, sql-server-2005, join, between

我有 2 张桌子

表 A：

```
+------------+----------+
| Entry From | Entry To |
+------------+----------+
|        100 |      103 |
|        104 |      105 |
|        106 |      109 |
+------------+----------+ 
```

表 B：

```
+-------+-------+
| Entry | Value |
+-------+-------+
|   100 |    10 |
|   101 |     3 |
|   102 |     7 |
|   103 |     2 |
|   104 |     9 |
|   105 |    17 |
|   106 |     3 |
|   107 |     3 |
|   108 |     6 |
|   109 |     5 |
+-------+-------+ 
```

期望的结果：

```
+------------+----------+-------------+
| Entry From | Entry To | Total Value |
+------------+----------+-------------+
|        100 |      103 |          22 |
|        104 |      105 |          26 |
|        106 |      109 |          17 |
+------------+----------+-------------+ 
```

欢迎任何解决方案/建议。

提前感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:26:40.483

请试试：

```
Select 
    a.EntryFrom, a.EntryTo, sum(Value) TotalValue 
From TableA a INNER JOIN TableB b ON b.Entry between a.EntryFrom and a.EntryTo 
Group by a.EntryFrom, a.EntryTo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:34:53.430

这是一个工作小提琴：[http](http://www.sqlfiddle.com/#!2/afbac/2) ://www.sqlfiddle.com/#!2/afbac/2使用此查询：

```
select a.idxFrom, a.idxTo, sum(b.value) as total
from a inner join b on b.idx >= a.idxFrom and b.idx <= a.idxTo
group by a.idxFrom, a.idxTo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T12:29:30.720

您正在寻找的可能是子查询。

```
SELECT 
    A.Entry_From, A.Entry_To, 
    (SELECT SUM(B.Value) FROM B 
        WHERE B.Entry BETWEEN A.Entry_From AND A.Entry_To) AS Total_Value
    FROM A 
```

它还取决于什么版本的 SQL 所以 YMMV :)

# tags - 组织 mp3 文件，自动标记

> ID：15523411
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:21:23.073
> 
> 标签：tags, automation, mp3, directory

我为不定期整理我的 mp3 文件付出了高昂的代价。我需要采取三大步骤，如果没有自动化，它们将是一场噩梦。

1\. 整理文件夹（到目前为止，我将所有 mp3 文件夹移动到一个位置）：

*   G：/音乐/新建文件夹/艺术家/（这里有1000个文件）
*   G:/Documents/Music/mp3/（这里有 1000 个文件）
*   G:/New Folder/Music/new/（这里有1000个文件）
*   等等，你明白了

所以，我正在寻找一种可以将所有 mp3 文件从文件夹/子文件夹/移动到一个 G:/Sorted Music 文件夹的方法。

2\. 采取

*   文件名“01 - ABBA - 滑铁卢”，标题：“滑铁卢”，艺术家：“未知”并制作它

*   文件名“ABBA - Waterloo”，标题：“Waterloo”，艺术家：“ABBA”，同时删除所有其他属性/字段（“专辑”、“特约艺术家”、“评论”等）

3\. 将 mp3 文件全部放在一个位置，并且全部采用相同的格式，将它们分成文件夹：

*   排序的音乐/艺术家/（此处的文件）
*   排序的音乐/艺术家/（此处的文件）

对于第 2 点和第 3 点（尤其是），我下载了 Mp3tag v2.54。但是，由于文件名中的“01”，它会从文件名中“错误提取”信息以放入标签中。而且由于艺术家的“未知”，它不会使文件名正确。

任何有用的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:05:02.243

如果您的文件具有相似的名称。任何东西-乐队-标题那么这应该没问题。您可以使用 Autoit3 来组织您的文件并设置和获取 mp3 标签。

# jquery - 通过jquery缩小表格

> ID：15523415
> 
> 赞同：0
> 
> 时间：2013-03-20T12:21:25.647
> 
> 标签：jquery, html, fixed-header-tables

我有一个包含的 div。

具有固定标题属性的表。我通过编写 2 个 div 来实现它，第一个 div 包含一个只定义标题的表，下一个 div 包含一个包含所有数据的表。现在为了保持对齐，我给了它们一个固定的宽度。

带有固定标题的表工作正常。

但现在问题来了，我必须通过按钮单击事件来缩小和展开表格。检查我的以下代码是否有帮助。如果有其他方法可以实现这一点，请提出建议。

```
<input type="button" value="click me" id="abc">

<div id="main-div">
   <div id="header">
     <table class="gradienttable">
       <thead>
         <tr>
             <th style="width:80px;">col 1</th>
             <th style="width:80px;">col 2</th>
             <th style="width:7px;"></th>
         </tr>
       </thead>
     </table>
    </div>
    <div id="data" style="overflow:auto;height:50px;width:200px;">
       <table class="gradienttable" >
         <tbody>
           <tr>
              <td style="width:80px;">data r1c1</td>
              <td style="width:80px;">data r1c2</td>
           </tr>
           <tr>
              <td style="width:80px;">data r2c1</td>
              <td style="width:80px;">data r2c2</td>
           </tr>
           <tr>
              <td style="width:80px;">data r3c1</td>
              <td style="width:80px;">data r3c2</td>
           </tr>
          </tbody>
       </table>
    </div>
</div> 
```

上表是虚拟的，因为我有一大堆 cols。但我基本上是这样做的。只有高度宽度会改变。

我的脚本不起作用：

```
$(this).ready(function() {
  $('#abc').click(function() {
     $('div#main-div').animate({width:"100px"});
   });
}); 
```

请帮我解决这个问题。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:27:21.450

您可以`slideToggle`在`main-div`容器上使用：

```
$('input#abc').on('click', function() {
    $('div#main-div').stop().slideToggle();
}) 
```

[JSFiddle 示例](http://jsfiddle.net/qUzCm/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:25:49.843

你可以使用 jquery

```
$(function(){
    $("#abc").click(function(){
     $('#main').slideToggle('slow');
});
}) 
```

将id为main的div的可见性隐藏在css中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:44:21.350

您的代码确实在 jsfiddle 中工作。问题是你的造型。

id 为 main-div 的 div 没有设置为隐藏溢出或显示滚动条（默认情况下它只会显示溢出区域的内容）。

尝试在 main-div 上设置 style="overflow: auto" 然后运行您的代码。

```
<div id="main-div" style="overflow:auto"> 
```

# extjs - Ext.ux.IFrame 中的事件

> ID：15523420
> 
> 赞同：1
> 
> 时间：2013-03-20T12:21:32.333
> 
> 标签：extjs, extjs4, extjs4.1

Ext.ux.IFrame 类中如何使用事件：beforeload && load？源代码[http://docs.sencha.com/ext-js/4-2/source/IFrame.html#Ext-ux-IFrame](http://docs.sencha.com/ext-js/4-2/source/IFrame.html#Ext-ux-IFrame)

```
Ext.create("Ext.ux.IFrame", {
    id: "id",
    src: "http://google.com"
    listeners: ...
}); 
```

或者

```
{
    xtype: "uxiframe",
    id: "id",
    src: "http://google.com",
    listeners: ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:57:09.403

您的问题不是很清楚，不确定您是如何获得支持的，但我认为这就是您想要的：

```
Ext.create("Ext.ux.IFrame", {
    id: "id",
    src: "http://google.com",
    listeners: {
        load: function(iframeComponent)
        {
            //code here
        },
        beforeload: function(iframeComponent, src)
        {
            //code here
        }
    }  
}); 
```

# embedded - 嵌入式：SDHC SPI 写入问题

> ID：15523425
> 
> 赞同：1
> 
> 时间：2013-03-20T12:21:41.587
> 
> 标签：embedded, block, msp430, spi

我目前正在使用 MSP430F2618 MCU 和 SanDisk 4GB SDHC 卡的记录器工作。

卡初始化按预期工作，我也可以读取 MBR 和 FAT 表。

问题是我不能在上面写任何数据。我检查了它是否受缺口写保护，但事实并非如此。Windows 7 操作系统读取/写入它没有问题。

不过，我使用了一个名为“HxD”的工具，并且尝试更改某些扇区（在 Windows 下）。当我尝试将内容保存到 SD 卡时，该工具会弹出一个窗口，告诉我“访问被拒绝！”。

然后我回到写入 SD 卡的代码：

```
uint8_t SdWriteBlock(uchar_t *blockData, const uint32_t address)
{
    uint8_t result = OP_ERROR;
    uint16_t count;
    uchar_t dataResp;
    uint8_t idx;

    for (idx = RWTIMEOUT; idx > 0; idx--)
    {
        CS_LOW();
        SdCommand(CMD24, address, 0xFF);

        dataResp = SdResponse();

        if (dataResp == 0x00)
        {
            break;
        }
        else
        {
            CS_HIGH();
            SdWrite(0xFF);
        }
    }

    if (0x00 == dataResp)
    {
        //send command success, now send data starting with DATA TOKEN = 0xFE
        SdWrite(0xFE);
        //send 512 bytes of data
        for (count = 0; count < 512; count++)
        {
            SdWrite(*blockData++);
        }
        //now send tow CRC bytes ,through it is not used in the spi mode
        //but it is still needed in transfer format
        SdWrite(0xFF);
        SdWrite(0xFF);
        //now read in the DATA RESPONSE TOKEN
        do
        {
            SdWrite(0xFF);
            dataResp = SdRead();
        }
        while (dataResp == 0x00);
        //following the DATA RESPONSE TOKEN are a number of BUSY bytes
        //a zero byte indicates the SD/MMC is busy programing, 
        //a non_zero byte indicates SD/MMC is not busy
        dataResp = dataResp & 0x0F;
        if (0x05 == dataResp)
        {
            idx = RWTIMEOUT;
            do
            {
                SdWrite(0xFF);
                dataResp = SdRead();
                if (0x0 == dataResp)
                {
                    result = OP_OK;
                    break;
                }
                idx--;
            }
            while (idx != 0);

            CS_HIGH();
            SdWrite(0xFF);
        }
        else
        {
            CS_HIGH();
            SdWrite(0xFF);
        }
    }

    return result;
} 
```

问题似乎出在我等待卡状态时：

```
do
{
    SdWrite(0xFF);
    dataResp = SdRead();
}
while (dataResp == 0x00); 
```

在这里，我正在等待 X 未定义的“X5”（十六进制值）类型的响应。

但大多数情况下，响应是 0x00（十六进制值），我没有跳出循环。很少有响应为 0xFF（十六进制值）的情况。

我不知道是什么问题。

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:30:46.077

> 4GB SDHC

我们需要查看*更多*您的代码。许多 µC SPI 代码库仅支持 <= 2 GB 的 SD 卡，因此使用较小的卡可能会起作用。

您可以自己检查一下：SDHC 在 CMD 0 (GO_IDLE_STATE) 命令之后需要一个 CMD 8 和一个 ACMD 41，否则您无法对其进行读取或写入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:14:30.730

谢谢你的回答，但我解决了我的问题。这是时间问题。我不得不在特定的时间点延迟。

# php - 如何在应用程序的任何页面上显示提醒窗口

> ID：15523433
> 
> 赞同：0
> 
> 时间：2013-03-20T12:22:03.273
> 
> 标签：php, codeigniter, reminders

在我的 Web 应用程序中，用户将能够为即将到来的任务和事件设置提醒。我正在使用带有模型-视图-控制器基础的 CodeIgniter (PHP) 开发应用程序。我设置了提醒所需的数据库表。我将使用作业服务器运行我的提醒控制器。我的困惑从这里开始。该控制器将调用作为弹出窗口的视图文件。但我需要在用户所在的页面上显示此提醒弹出窗口。如何在另一个上显示视图？或者你会推荐什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:49:44.710

我相信您指的是模态窗口。如果是这种情况，您将需要使用 JS/jQuery 或/和 CSS。你可以谷歌它并找到很多关于模态的教程。如果不是这样，请扩展您的问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-07-20T22:10:12.997

您应该制作另一个 PHP 文件并将该文件包含在您想要提醒窗口的每个文件中。

1.  在公共文件中应该有一些像“setInterval”这样的函数，然后通过 js 或 jquery 调用 modal。

2.也许有帮助（两者都在同一个文件中）

**JS**

```
setInterval(tick, 30000); function tick() { 
   //get the mins of the current time 
   var mins = new Date().getMinutes();
   if(mins == "18"|| mins == "19" || mins == "20"||mins == "21" || mins == "22" || mins == "23"){
      $('#reminder').modal('show'); 
     beep(); 
   } 
} 
```

**HTML（引导模式）**

```
<div id="reminder" class="modal fade bd-example-modal-lg" > 
        <div class="modal-dialog modal-lg" style=" margin-top: 150px; ">
            <div class="modal-content"> 
               <div class="modal-header"> 
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;
                   </button> 
                   <h4 class="modal-title" style="color:red;">
                       Reminder
                   </h4>
               </div> 
               <div class="modal-body" id="reminder_body"> 
               <script> 
                   load_reminder();
               </script>  
              </div> 
         <div class="modal-footer"> 
              <button type="submit" class="btn btn-primary" data-dismiss="modal" >
                    Ok
             </button> 
       </div> 
```

# php - 服务器请求或 HTTP（浏览器）请求

> ID：15523436
> 
> 赞同：0
> 
> 时间：2013-03-20T12:22:09.617
> 
> 标签：php, httpwebrequest, httprequest

我如何使用 PHP 找出来自服务器 (SERVER REQUEST) 或浏览器 (HTTP REQUEST) 的请求。当从另一个文件调用文件时（使用例如：SOAP，CURL，..）或直接从浏览器运行文件。

# sqlite - 使用 UNIQUE ON CONFLICT IGNORE 提高 SQLITE UPSERT 性能的原因是什么？

> ID：15523442
> 
> 赞同：1
> 
> 时间：2013-03-20T12:22:24.347
> 
> 标签：sqlite

`SQLITE UPSERT`性能提升的原因是什么`UNIQUE ON CONFLICT IGNORE`？

在**测试 #1**中，我们有一个

```
CREATE TABLE FREQMARY(
VALUE CHAR(40),NUMERICVALUE FLOAT, DATETIMEVALUE CHAR(40), COUNT INT, LENGTH INT) 
```

和一个

```
CREATE UNIQUE INDEX IX_MARY ON FREQMARY(VALUE). 
```

在**测试 #1**中，我们使用以下 UPSERT：

```
INSERT OR REPLACE INTO FREQMARY(Value, NumericValue, DateTimeValue, Count, Length) 
VALUES ('Braintree Road',NULL,NULL, COALESCE((SELECT Count+1 FROM FREQMARY WHERE Value='Braintree Road'), 1),14) 
```

* * *

在**测试 #2**中，我们有一个

```
CREATE TABLE FREQMARY(
VALUE CHAR(40) UNIQUE ON CONFLICT IGNORE ,NUMERICVALUE FLOAT, DATETIMEVALUE CHAR(40), COUNT INT, LENGTH INT) 
```

* * *

在**Test #2**中，我们使用与**Test#1**`UPSERT`相同的方法，

 **```
INSERT OR REPLACE INTO FREQMARY(Value, NumericValue, DateTimeValue, Count, Length) 
VALUES ('Braintree Road',NULL,NULL, COALESCE((SELECT Count+1 FROM FREQMARY WHERE Value='Braintree Road'), 1),14) 
```

* * *

每 100000 个 UPSERTS 由 BEGIN TRANSACTION 和 END TRANSACTION 包裹 1,500,000 个 UPSERTS，测试 #1 需要 10 小时才能完成。
每 100000 个 UPSERTS 由 BEGIN TRANSACTION 和 END TRANSACTION 包裹 1,500,000 个 UPSERTS，测试 #2 需要 18 分钟才能完成。

请问性能 `SQLITE UPSERT` **大幅**`UNIQUE ON CONFLICT IGNORE`提升的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:17:38.270

sqlite-users.org 专家刚刚回答了为什么 CREATE TABLE UNIQUE ON CONFLICT IGNORE 比 CREATE UNIQUE INDEX 快得多的问题。

检查 OR REPLACE 部分是否在第二种情况下实际工作 - Count 是否按预期增加。我怀疑，使用 ON CONFLICT IGNORE 子句，实际上可能会忽略冲突。然后它工作

## 快得多仅仅是因为它的写入次数要少得多。

伊戈尔·坦德尼克**

# ios - 表视图委托方法并非全部调用

> ID：15523449
> 
> 赞同：0
> 
> 时间：2013-03-20T12:22:37.950
> 
> 标签：ios, objective-c, tableview

在我的代码中，我使用了一个 tableview，其中一些方法被调用，而另一些则没有。

在 initwithframe 中：

```
_table.delegate = self;
_table.dataSource = self; 
```

这就是所谓的

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *identifier = @"TRAutocompleteCell";

    id cell = [tableView dequeueReusableCellWithIdentifier:identifier];
    if (cell == nil)
        cell = [_cellFactory createReusableCellWithIdentifier:identifier];

    NSLog(@"got here 3");

    NSAssert([cell isKindOfClass:[UITableViewCell class]], @"Cell must inherit from UITableViewCell");
    NSAssert([cell conformsToProtocol:@protocol(TRAutocompletionCell)], @"Cell must conform TRAutocompletionCell");
    UITableViewCell <TRAutocompletionCell> *completionCell = (UITableViewCell <TRAutocompletionCell> *) cell;

    id suggestion = self.suggestions[(NSUInteger) indexPath.row];
    NSAssert([suggestion conformsToProtocol:@protocol(TRSuggestionItem)], @"Suggestion item must conform TRSuggestionItem");
    id <TRSuggestionItem> suggestionItem = (id <TRSuggestionItem>) suggestion;

    [completionCell updateWith:suggestionItem];

    return cell;
} 
```

但这不会在同一个文件中被调用。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    NSLog(@"got here 5");
    id suggestion = self.suggestions[(NSUInteger) indexPath.row];
    NSLog(@"got here 4");
    NSAssert([suggestion conformsToProtocol:@protocol(TRSuggestionItem)], @"Suggestion item must conform TRSuggestionItem");

    self.selectedSuggestion = (id <TRSuggestionItem>) suggestion;

    _queryTextField.text = self.selectedSuggestion.completionText;
    [_queryTextField resignFirstResponder];

    if (self.didAutocompleteWith)
        self.didAutocompleteWith(self.selectedSuggestion);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:45:42.843

问题不在于实现，而在于我的手势识别。

我在视图中添加了一个列表器，以捕获正在调用的文本框外的点击事件。我不完全知道为什么这两者发生冲突，但是当我删除它时，它正在工作。

表格视图用于在我的文本框中自动完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T12:47:40.563

你做了吗：

```
yourTableView.delegate = self;
yourTableView.dataSource = self; 
```

在创建 tableView 时。

如果是 .xib 文件，你是否连接了委托和数据源？

# javascript - 如何使用 KnockoutJS 为 iframe 绑定内容？

> ID：15523457
> 
> 赞同：9
> 
> 时间：2013-03-20T12:22:54.230
> 
> 标签：javascript, jquery, iframe, knockout.js

谁能告诉我如何将数据绑定到`iframe`使用淘汰赛？我已尝试按以下方式执行此操作，但未按预期工作：

```
<iframe data-bind ="attr: { src: testcontent}"></iframe> 
```

和 Javascript：

```
var ViewModel = function (content) {
     this.testcontent = ko.observable(content);
};

ko.applyBindings(new ViewModel("Hello World!!")); 
```

我想将文本“Hello Content”添加到`iframe`. 谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-03T08:25:36.383

**警告：**这显然有安全隐患！仅使用您绝对信任的来源的代码执行此操作。

这是一个基本的、直接的解决方案。它允许您拥有一个具有整个 html 结构的 observable，并用该数据填充 iFrame。如果您更新 html，则 iframe 会更新为新版本：

```
ko.bindingHandlers.iframeContent = {
    update: function(element, valueAccessor) {
        var value = ko.unwrap(valueAccessor());
        element.contentWindow.document.close(); // Clear the content
        element.contentWindow.document.write(value);
    }
};

ko.applyBindings({
    myHtml: ko.observable("<html>\n<head><title>Test</title></head>\n<body>\n\nMy <em>fine</em> text.\n\n</body>\n</html>")
}); 
```

您可以在视图中这样使用它：

```
<p>Edit your html:</p>
<textarea data-bind="value: myHtml, valueUpdate: 'afterkeydown'"></textarea>

<p>And see it appear in an iframe:</p>
<iframe data-bind="iframeContent: myHtml"></iframe> 
```

有关演示，请参阅[此 jsfiddle](http://jsfiddle.net/punceptu/)。`valueUpdate`只是在那里，所以演示更清晰，在更大的场景中这是否是一个好主意是值得商榷的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T13:45:22.180

编辑：小提琴更新。

[http://jsfiddle.net/sujesharukil/NnT78/10/](http://jsfiddle.net/sujesharukil/NnT78/10/)

您需要为此创建一个自定义绑定处理程序。我用过这样一个[http://jsfiddle.net/mbest/GYRUX/](http://jsfiddle.net/mbest/GYRUX/)

并根据您的需要进行更改。看看两者，看看什么适合您的需求。

```
ko.bindingHandlers.bindIframe = {
    init: function(element, valueAccessor) {
        function bindIframe() {
            try {
                var iframeInit = element.contentWindow.initChildFrame,
                    iframedoc = element.contentDocument.body;
            } catch(e) {
                // ignored
            }
            if (iframeInit)
                iframeInit(ko, valueAccessor());
            else if (iframedoc){
                var span = document.createElement('span');
                span.setAttribute('data-bind', 'text: someProperty');
                iframedoc.appendChild(span);
                ko.applyBindings(valueAccessor(), iframedoc);
            }
        };
        bindIframe();
        ko.utils.registerEventHandler(element, 'load', bindIframe);
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T20:26:09.900

你可以有这样的代码，工作得很好：-

```
// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
            function AppViewModel() {
                this.externalUrl = ko.observable("http://www.w3schools.com");

            }

            // Activates knockout.js
            ko.applyBindings(new AppViewModel()); 
```

或者

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test IFrame</title>
    <script src="Scripts/jquery-1.7.1.js"></script>

    <script src="Scripts/knockout-2.2.1.js"></script>
    <script>
        $(document).ready(function () {
            // This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
            function AppViewModel() {
                this.externalUrl = "http://www.w3schools.com";

            }

            // Activates knockout.js
            ko.applyBindings(new AppViewModel());
        });

    </script>
</head>
<body>
    <iframe class="iframe" id="iframe" style="width: 700px; height: 700px" data-bind="attr: { src: externalUrl }"></iframe>

</body>
</html> 
```

# powershell - 如何使用 powershell 进行用户转储

> ID：15523460
> 
> 赞同：10
> 
> 时间：2013-03-20T12:23:00.617
> 
> 标签：powershell, powershell-2.0, dump, coredump

我想使用 powershell 对进程进行用户转储我该怎么做？我在任务管理器中右键单击该进程时得到的相同

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-11-13T21:52:39.163

基于来自 Risksense的[这篇文章。](https://risksense.com/blog/hidden-gems-in-windows-the-hunt-is-on/)可以使用`MiniDump`本机 Windows dll 中的函数。`comsvcs.dll`

喜欢：

```
Powershell -c rundll32.exe C:\Windows\System32\comsvcs.dll, MiniDump {ID-of-the-process} $Env:TEMP\my_dump_file.bin full 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:52:56.920

最简单的方法是使用Sysinternals 工具包中的[Procdump](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx "过程转储")。用于`Get-Process`获取进程 ID，您可以将其传递给 Procdump 以进行实际转储。

**编辑：**

我仍然宁愿使用现成的工具而不是硬的方式。你有正当的商业理由吗？由于您坚持，有一个创建用户模式内存转储的[Win32 API 调用。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)它可以从[.Net 代码](http://blogs.msdn.com/b/dondu/archive/2010/10/24/writing-minidumps-in-c.aspx)中调用，因此可以使用 P/Invoke 或将 C# 嵌入到您的 Powershell 代码中。这留给读者作为练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:35:49.760

嗨，对不起，我帮不上什么忙。我以前从未使用过 DUP 文件。但是有一个名为 Win32_Process 的 WMI 类：

```
Get-WMIObject -Class Win32_Process 
```

不确定这是否是您要查找的信息。具有与 Get-Process 不同的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-20T10:47:46.907

我有一个类似的用例，我需要为 IIS 进程创建转储。当然，我本可以使用[DebugDiag](https://www.microsoft.com/en-us/download/details.aspx?id=49924)，但我最终走上了这条路。这是我使用的（*并且效果很好，我应该添加*）：

```
$procid = Get-Process | Where-Object {$_.ProcessName -eq 'w3wp'} | Select-Object ProcessName,Id
New-Item -Path "c:\temp\Dumps" -Type directory -Force
cmd.exe /c "c:\temp\procdump64.exe" $procid.id -accepteula -mp "c:\temp\Dumps" 
```

此外，您也可以使用 DebugDiag 使用这些转储文件进行分析。所以在我看来这是双赢的。

> PS：理论上，也可以使用`Get-CimInstance`cmdlet 获取进程 ID。所以这样的事情也可以工作：
> 
> `Get-CimInstance -Query "SELECT * from Win32_Process WHERE name LIKE 'w3wp%'"`

# java - 在 java 中使用 itext (5.3.0) 的可编辑 PDF。无法在 Adob e Reader X 中保存数据

> ID：15523466
> 
> 赞同：0
> 
> 时间：2013-03-20T12:23:04.517
> 
> 标签：java, itext, adobe-reader

我能够在java中使用itext（5.3.0）创建可编辑的PDF。我用过**Adob​​e Reader X**。

问题 ：

**Adobe 阅读器 X**

我想用我在文本框中输入的数据保存我的 PDF，但它显示在消息下方。

“请填写以下表格。您无法保存输入此表格的数据如果您想要一份副本作为记录，请打印您填写的表格”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T08:44:35.390

Adobe Reader 的早期版本（即 Adob​​e Reader XI 之前的版本）仅在 PDF 最初是专门准备的情况下才允许保存表单条目。此准备步骤称为*启用阅读器的 PDF 表单以保存用户输入的数据*，并通过应用一种特殊类型的签名来完成，参见。[PDF 规范 ISO 32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)的第 12.8.2.3 节关于使用权签名的 UR 转换。

*只有使用特殊的 Adob​​e 软件（例如 Adob​​e Acrobat 或某些 Adob​​e LifeCycle 组件）才能启用阅读器，*除非您已从其中一种肯定不允许的产品中提取了私钥。

阅读[本教程](http://acrobatusers.com/tutorials/reader-enabling-a-pdf-form-for-saving-user-entered-data)，了解如何为 PDF 表单启用阅读器以保存用户输入的数据。

PS：由于您最初选择的标签，当您第一次发布问题时，您的问题并没有引起我的注意。我认为其他读者也因此而错过了它。因此，明智地选择您的起始标签。

# c++ - c++ 中的图形编码效率低下

> ID：15523469
> 
> 赞同：-3
> 
> 时间：2013-03-20T12:23:23.933
> 
> 标签：c++, arrays, graphic, nintendo-ds, devkitpro

我在 c++ 中使用 Devkit pro 为 nds 编码，顶部显示了一个图形。每个图形都加载了一个值（这是从中加载图像的哪个部分），我想要大约 20 个相同类型的图形，但同时加载和显示不同的值。有没有办法创建某种图形数组而不是定义“图形 INV1；图形 INV2；” 并加载它们？每个图形都被定义、加载并显示如下：

```
graphic inv1;
graphic inv2;

if (loadedgraphic) unloadGraphic(&inv);  //basically reloads graphics
loadGraphicSub(&inv1,2,5);               //arguments: (Graphic, type, value)
loadedgraphicinv = true;

if (loadedgraphic) unloadGraphic(&inv);  //basically reloads graphics
loadGraphicSub(&inv1,2,6);               //arguments: (Graphic, type, value)
loadedgraphicinv = true;

showGraphic(&inv1,10,10); // This shows the inv1 graphics at the coordinate (10,10).
showGraphic(&inv2,10,15); // This shows the inv2 graphics at the coordinate (10,10). 
```

这可能会重复 20 次以上，每次都有一个新图形......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:26:57.073

```
std::vector<graphic> vMyGraphics(7);
for(int i=0; i<7; i++)
{
   if (loadedgraphic) unloadGraphic(&inv);  //basically reloads graphics
   loadGraphicSub(&vMyGraphics[i],2,i+1);               //arguments: (Graphic, type, value)
   loadedgraphicinv = true;
} 
```

# java - 为字符串处理应用程序设置 JVM 中 Young 和 Tenure 生成的比例

> ID：15523471
> 
> 赞同：2
> 
> 时间：2013-03-20T12:23:26.240
> 
> 标签：java, tomcat, jvm, jvm-arguments

我有一个应用程序，它根据字符串的相似性对字符串数组进行分组。它从 TomCat 服务器公开，启动参数是

```
/usr/lib/jvm/java/bin/java -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/username/shared/log/heapdump.log -XX:-UseAdaptiveSizePolicy -XX:NewRatio=3 -Xms8192M -Xmx8192M -XX:+UseParNewGC -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:/home/username/shared/log/gc.log -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=7896 -Dcom.sun.management.jmxremote.local.only=false -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -classpath :/usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar:/usr/share/java/commons-daemon.jar -Dcatalina.base=/usr/share/tomcat7 -Dcatalina.home=/usr/share/tomcat7 -Djava.endorsed.dirs= -Djava.io.tmpdir=/var/cache/tomcat7/temp -Djava.util.logging.config.file=/usr/share/tomcat7/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager org.apache.catalina.startup.Bootstrap start 
```

我的 GC 日志类似于

```
316.795: [GC 316.795: [ParNew: 233516K->15658K(249216K), 0.0143200 secs] 1899624K->1683370K(8360960K), 0.0143830 secs] [Times: user=0.17 sys=0.00, real=0.02 secs] 
```

我的 GC 日志中不断出现（并发模式失败）错误。我相信，这是因为年轻一代的规模很小。我正在尝试将Young Generation与New generation的比例设置为3：1，但是从日志中可以看出，young generation的大小仍然是249216K。

为什么 JVM 不尊重该`-XX:NewSize`选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:32:57.937

查看本[指南](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)，特别是

> 年轻一代

部分：

> 默认情况下，新生代的大小由 NewRatio 控制。例如，设置 -XX:NewRatio=3 表示年轻代和老生代的比例为 1:3。换句话说，伊甸园和幸存者空间的组合大小将是总堆大小的四分之一。

看起来您正在以与期望相反的方式设置比率

# c# - MVC 3：作为 ViewModel 属性的对象的编辑表单上的 DropDownList

> ID：15523478
> 
> 赞同：7
> 
> 时间：2013-03-20T12:23:53.843
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, entity-framework-4

**概述：** 我正在尝试使用具有属性的 ViewModel，该属性是我正在尝试编辑的模型类。在直接编辑模型时，我已经看到使用 MVC 脚手架编辑表单工作的编辑表单，但是我正在尝试使用包含正在编辑的模型的 ViewModel。除了保存显示在 DropDownList 中的字段外，一切正常。

**说明：** 我尝试使用 MVC 3 的脚手架功能为模型创建编辑表单。在 MVC 音乐商店教程中，这是`Album`针对`StoreManagerController`. 在该页面中，他们有两个用于流派和艺术家的下拉菜单。每个在视图中看起来都与此类似：-

```
<div class="editor-label">
    @Html.LabelFor(model => model.GenreId, "Genre")
</div>
<div class="editor-field">
    @Html.DropDownList("GenreId", String.Empty)
    @Html.ValidationMessageFor(model => model.GenreId)
</div> 
```

据我所知，这些选项使用 ViewBag 在控制器中填写。

```
ViewBag.GenreId = new SelectList(db.Genres, "GenreId", "Name", album.GenreId);
ViewBag.ArtistId = new SelectList(db.Artists, "ArtistId", "Name", album.ArtistId); 
```

**直接使用模型**

在我的代码中，我设法对通过实体框架保存到数据库的对象执行相同的操作。

模型

```
public class Season
{
    public int SeasonId { get; set; }
    public int ClubId { get; set; }
    public Club Club { get; set; }
} 
```

控制器中的代码

```
ViewBag.ClubId = new SelectList(clubs, "ClubId", "Name", season.ClubId); 
```

看法

```
<div class="editor-label">
    @Html.LabelFor(model => model.ClubId, "Club")
</div>
<div class="editor-field">
    @Html.DropDownList("ClubId", String.Empty)
    @Html.ValidationMessageFor(model => model.ClubId)
</div> 
```

这工作正常。

**使用视图模型**

但是现在我已经意识到该页面需要显示的文本比我正在编辑的模型中可用的文本更多。我希望创建一个特殊的视图模型，其中包含编辑后的模型（季节）和我想要显示的额外文本。

视图模型

```
public class EditSeasonViewModel
{
    public string PlayerName {get; set;}
    public string SummaryText {get; set;}
    public int PlayerId {get; set;}
    public Season season {get; set;}
} 
```

我这样做了，更改了控制器以使 HttpGet 和 HttpPost 方法使用新的 ViewModel，更改了视图以接受新的 ViewModel，并将视图中的所有“EditorFor”方法更改为使用 model.season.MyProperty。

控制器中的代码

```
ViewBag.ClubId = new SelectList(clubs, "ClubId", "Name", seasonVM.season.ClubId); 
```

代码在视图

```
<div class="editor-label">
    @Html.LabelFor(model => model.season.ClubId, "Club")
</div>
<div class="editor-field">
    @Html.DropDownList("ClubId", String.Empty)
    @Html.ValidationMessageFor(model => model.season.ClubId)
</div> 
```

在调试 HttpPost 方法时，所有季节值都正确存在，除了应来自 DropDropList 的 ClubId 值。

与我们直接使用模型时的方式相比，我根本没有更改视图中的 DropDownList。

**问题：** 我的问题是，我需要更改什么才能在使用这个新的时正确保存 ClubId `EditSeasonViewModel`？

还有，控制器的HttpGet方法中的ViewBag.ClubId是如何匹配到View中的DropDownList，然后把它的值传回给HttpPost方法的呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T12:27:25.660

是你的`DropDownList`声明不正确。试试这个：

```
@Html.DropDownListFor(m => m.season.ClubId, ViewBag.ClubId) 
```

但**实际上**，您应该将该选择列表放入您的模型中：

```
public SelectList Clubs { get; set; } 
```

然后将其填充到您的控制器中：

```
Model.Clubs = new SelectList(clubs, "ClubId", "Name", season.ClubId); 
```

然后你可以这样做：

```
@Html.DropDownListFor(m => m.season.ClubId, Model.Clubs) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T12:38:43.903

**避免使用 ViewBag/ViewData 之类的动态东西**将数据从操作方法传输到视图。切换到强类型方法。

更新您的 Viewmodel 以增加 2 个属性。一个保存可用俱乐部的集合，一个保存选定的俱乐部。

```
public class EditSeasonViewModel
{
    public List<SelectListItem> Clubs { set;get;}
    public int SelectedClub { set;get;}

    public string PlayerName {get; set;}
    public string SummaryText {get; set;}
    public int PlayerId {get; set;}
    public Season season {get; set;}

    public EditSeasonViewModel()
    {
        Clubs=new List<SelectListItem>();
    }
} 
```

现在在您的 GET 操作中，获取球杆并将其加载到`Clubs`属性中。

```
public ActionResult create(int id)
{
  var vm=new EditSeasonViewModel();
  vm.Clubs=GetListOfSelectListItemFromClubsFromSomeWhere();
  return View(vm);
} 
```

假设`GetListOfSelectListItemFromClubsFromSomeWhere`是一个返回您的俱乐部的 SelectListItem 列表的方法

```
public List<SelectListItem> GetListOfSelectListItemFromClubsFromSomeWhere()
{
  // to do : return List<SelectListItem> with Value and Text(ClubId Id & Name)
} 
```

在您看来，使用`Html.DropDownListFor`辅助方法

```
@model EditSeasonViewModel
@using(Html.Beginform())
{

  @Html.DropdownlistFor(x=>x.SelectedClub,
                          new SelectList(Model.Clubs,"Value","Text"),"select")
  <input type="submit" />
} 
```

`SelectedClub`发布此表格时，您将在您发布的模型的属性中获得所选俱乐部的 ID 。

```
[HttpPost]
public ACtionResult Create(EditSeasonViewModel model)
{
  if(ModelState.IsValid)
  {
   int clubId= model.SelectedClub;
   //to do : save and redirect (PRG pattern)
  }
  vm.Clubs=GetListOfSelectListItemFromClubsFromSomeWhere();
  return View(model);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-23T09:15:22.780

请确保在您的编辑/创建动作控制器中，该属性已正确绑定：

```
public async Task<ActionResult> Edit([Bind(Include = "SeasonId,ClubId, otherproperties"]){
// code ...
} 
```

# objective-c - Objective-C for 循环失败

> ID：15523481
> 
> 赞同：-2
> 
> 时间：2013-03-20T12:24:00.337
> 
> 标签：objective-c, if-statement, for-loop

我是新开发人员并创建了一个 for 循环。但是，'for' 循环值不会增加。

这是我的代码：

```
int j=0;
for (int i=0; i < localDocuments.count; i++) { 
    if(j<imageList.count){
        for (j=0; j<=i;j++) {
            NSURL * fileURL = [localDocuments objectAtIndex:i];
            NSString *str=[NSString stringWithFormat:@"%@.%@",[imageList objectAtIndex:j],PTK_EXTENSION];
            if ([[fileURL lastPathComponent] isEqualToString:str]){
                [self loadDocAtURL:fileURL];
            }//if
        }//for j
     }//if
}//for i 
```

`i``if ([[fileURL lastPathComponent] isEqualToString:str])`条件失败时不增加。

当字符串值不相等时，循环不会跳到下一个文件 url。

谁能发现我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:32:00.360

在嵌套循环 (j) 中，i 不会增加。另外，您应该考虑将 j 重置为 0 （我不太了解`if(j<imageList.count)`条件..应该是`imageList.count > 0`吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:41:37.523

如你所说 ：

> 不，我想要 i=0,j=0,1,2,3,,, 然后 i=1,j=0,1,2,3,,,, 像这样

你应该使用

```
for (j=0; j<localDocuments.count;j++) { 
```

# java - 为什么我的所有组件都聚集在 JFrame 的中心

> ID：15523482
> 
> 赞同：1
> 
> 时间：2013-03-20T12:24:00.470
> 
> 标签：java, swing, awt, layout-manager, gridbaglayout

我正在使用网格包布局来创建如下所示的布局： ![在此处输入图像描述](../Images/3f612d6b66df193d3ace802c7a002046.png)

但我所拥有的是： ![在此处输入图像描述](../Images/bf503b4b0187a1c84990e1b33e90984b.png)

为什么会这样？我已经指定了左对齐并占据了所有水平空间，但我仍然得到了这个。这是我的代码：

```
public DepotView()
{
    setSize(FRAME_WIDTH,FRAME_HEIGHT);
    setLocationRelativeTo ( null );

    getContentPane ().setLayout ( new GridBagLayout());

    JPanel workerPanel = createTextAreaPanel("Processing: ",workerArea);
    GridBagConstraints c = new GridBagConstraints();
    c.gridx = 0;
    c.gridy = 0;
    c.gridwidth = 2;
    c.gridheight = 1;
    c.weightx = 1;
    c.fill = GridBagConstraints.HORIZONTAL;
    c.anchor = GridBagConstraints.FIRST_LINE_START;
    getContentPane().add ( workerPanel );

    JPanel customerPanel = createTextAreaPanel("Customers: ",textArea);
    c = new GridBagConstraints();
    c.gridx = 0;
    c.gridy = 1;
    c.gridwidth = 1;
    c.gridheight = 1;
    c.weightx = 0.5;
    c.insets = new Insets(5,5,5,5);
    getContentPane().add ( customerPanel );

    JPanel depotPanel = createTextAreaPanel("Depot: ",depotArea);
    c = new GridBagConstraints();
    c.gridx = 1;
    c.gridy = 1;
    c.gridwidth = 1;
    c.gridheight = 1;
    c.weightx = 0.5;
    c.insets = new Insets(5,5,5,5);
    getContentPane().add ( depotPanel );

    //pack();
    setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:41:37.053

问题是框​​架的大小小于内容窗格的总首选大小。从那里，你得到一个旋转的布局。

还有几件事：

*   使用`pack()`而不是`setSize()`在您的 JFrame 上获得适当的帧大小。
*   避免使用`gridx/gridy`，它们往往会使约束复杂且难以维护
*   `anchor/fill`应该几乎总是与 0 结合`weightx`和/或`weighty`大于 0
*   而不是使用默认值`FlowLayout`，而是`JPanel`使用 LayoutManager，它将利用额外的可用空间（例如`BorderLayout`）
*   不要使用`static`变量，它只是邪恶的
*   您的 textarea 变量始终为空。

这是一段似乎运行良好的代码：

```
import java.awt.BorderLayout;
import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class DepotView extends JFrame {

    private JTextArea textArea;
    private JTextArea depotArea;
    private JTextArea workerArea;

    public DepotView() {

        getContentPane().setLayout(new GridBagLayout());

        JPanel workerPanel = createTextAreaPanel("Processing: ", workerArea = new JTextArea());
        GridBagConstraints c = new GridBagConstraints();
        c.gridwidth = GridBagConstraints.REMAINDER;
        c.weightx = 1.0;
        c.weighty = 1.0;
        c.fill = GridBagConstraints.BOTH;
        c.anchor = GridBagConstraints.FIRST_LINE_START;
        getContentPane().add(workerPanel, c);

        JPanel customerPanel = createTextAreaPanel("Customers: ", textArea = new JTextArea());
        c = new GridBagConstraints();
        c.insets = new Insets(5, 5, 5, 5);
        c.fill = GridBagConstraints.BOTH;
        c.weightx = 1.0;
        c.weighty = 1.0;
        c.anchor = GridBagConstraints.FIRST_LINE_START;
        getContentPane().add(customerPanel, c);

        JPanel depotPanel = createTextAreaPanel("Depot: ", depotArea = new JTextArea());
        c = new GridBagConstraints();
        c.weightx = 1.0;
        c.weighty = 1.0;
        c.gridwidth = GridBagConstraints.REMAINDER;
        c.insets = new Insets(5, 5, 5, 5);
        c.fill = GridBagConstraints.BOTH;
        getContentPane().add(depotPanel, c);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setLocationRelativeTo(null);
    }

    private JPanel createTextAreaPanel(String label, JTextArea textArea) {
        JPanel customerQueuePanel = new JPanel(new BorderLayout());

        customerQueuePanel.add(new JLabel(label), BorderLayout.NORTH);
        textArea.setRows(15);
        textArea.setColumns(20);
        textArea.setFont(new Font(Font.MONOSPACED, Font.PLAIN, 14));
        textArea.setEditable(false);

        JScrollPane scrollPane = new JScrollPane(textArea);
        customerQueuePanel.add(scrollPane);
        return customerQueuePanel;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DepotView().setVisible(true);
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:19:11.747

看起来您只是`GridBadConstriants`在将面板添加到框架时忘记包含 。只需更改`getContentPane().add(panel);`为`getContentPane().add(panel, c);`，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:24:39.727

的布局`JPanel`没有正确定义。您当前正在使用`JPanel`'s default layout `FlowLayout`，在您的情况下这是一个糟糕的选择。

*   它不会调整组件的大小以匹配容器的大小（`JPanel`）。
*   根据 的大小`JPanel`，它会将文本放置在标签旁边。

最好的选择可能是使用`BorderLayout`.

还为 设置最小尺寸`JPanel`：

```
JPanel customerQueuePanel = new JPanel(new BorderLayout());
customerQueuePanel.setMinimumSize(new Dimension(250, 150));
...
customerQueuePanel.add ( new JLabel(label), BorderLayout.NORTH);
customerQueuePanel.add( scrollPane, BorderLayout.CENTER); 
```

编辑：上面的代码是对您从问题中删除的 createTextArea 方法的编辑。

也像以前一样添加约束作为参数。

```
getContentPane().add(panel, c); 
```

# jquery - URL编码对象时jQuery对数组的错误处理？

> ID：15523488
> 
> 赞同：3
> 
> 时间：2013-03-20T12:24:25.680
> 
> 标签：jquery, ajax, urlencode

将对象作为调用传递`data`时`ajax`，我得到了一些意想不到的结果。出于某种原因，如果参数名称的值是数组，则 jQuery 会在我的参数名称中添加方括号。例如...

```
var obj =
    {
        name: "John Doe",
        courses: [ 1, 2, 4 ]
    }; 
```

...变成`name=John+Doe&courses[]=1&courses[]=2&courses[]=4`而不是`name=John+Doe&courses=1&courses=2&courses=4`.

为什么jQuery要添加方括号？

这是一个工作示例：http: [//jsfiddle.net/BrHSy/](http://jsfiddle.net/BrHSy/)

**更新：**

我希望上面的示例生成一个类似于此示例中的查询字符串的字符串：

```
<html>
    <head></head>
    <body>
        <form method="GET">
            <input type="hidden" name="name" value="John Doe"/>
            <input type="hidden" name="courses" value="1"/>
            <input type="hidden" name="courses" value="2"/>
            <input type="hidden" name="courses" value="4"/>

            <button>Go!</button>
        </form>
    </body>
</html> 
```

请注意，由表单 (www-form-urlencoded) 生成的查询字符串没有方括号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:48:48.893

我找到了自己的答案。看起来 jQuery 在使用 对数据进行编码时`$.param`，并没有专门`www-form-urlencode`针对数据。它正在序列化它。在 jQuery 1.4 之前，结果会如预期的那样。

那么，对我来说，解决方案是通过传递来使用传统逻辑`true`：

```
$.param(obj, true); 
```

这导致：`name=John+Doe&courses=1&courses=2&courses=4`

调用时`$.ajax()`，您可以设置`traditional`选项`true`让 jQuery 以传统预期的方式对数据进行编码。似乎这`traditional`应该是默认值，因为 jQuery 的`ajax`函数默认情况下使用`www-form-urlencode`内容类型。但是，当数据被发送到服务器时，最终结果是一个格式`www-form-urlencode`错误的数据块（根据 HTML 表单的一般处理方式，如果它们有多个同名输入）。

此处更新示例：http: [//jsfiddle.net/BrHSy/1/](http://jsfiddle.net/BrHSy/1/)

# c# - 按钮名称最后一个字母

> ID：15523493
> 
> 赞同：0
> 
> 时间：2013-03-20T12:24:35.237
> 
> 标签：c#, button, lastindexof

我有大约 30 个按钮，每个按钮都包含文本，然后是一个数字，我只需要将数字放在另一个按钮中

就像在示例中 button1.Name 应该是 test3

这可能吗？

我知道 LastIndexOf 不是这样工作的，它是为了给出我想要实现的想法

```
button1 = "hello1"; //this varies in normal program
button2 = "notimportant3"; //this varies in normal program

button1.Name = "test"+button2.Name.LastIndexOf(1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:28:25.413

```
button1.Name  = string.Format("test{0}", button2.Name[button2.Name.Length - 1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:29:12.087

```
button1.Name = "test" + button2.Name[button2.Name.Length-1]; 
```

或者更好地使用 string.Format() 来格式化字符串

像

```
button1.Name  = string.Format("test{0}", button2.Name[button2.Name.Length-1]); 
```

# jquery - Highcharts 日期错误

> ID：15523498
> 
> 赞同：0
> 
> 时间：2013-03-20T12:24:49.870
> 
> 标签：jquery, asp-classic, highcharts, unix-timestamp, highstock

我有以下 JSON：

```
[
[1230768000,2],
[1233446400,3],
[1235865600,2],
[1238544000,6],
[1241136000,1],
[1243814400,2],
[1246406400,7],
[1249084800,3],
[1251763200,5],
[1254355200,2],
[1257033600,5],
[1259625600,4]
] 
```

应该是 2009 年 1 月 - 12 月。当我查看图表时，它显示第一个点是 1 月 15 日星期四 05:52，其他值在同一天不同的时间间隔。

当我通过[http://www.onlineconversion.com/unix_time.htm](http://www.onlineconversion.com/unix_time.htm)运行日期时，它们看起来很好。我在 IIS 上运行它并使用经典的 ASP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:28:55.317

highcharts 日期需要以毫秒为单位。尝试将它们乘以 1000。

# c# - UpdatePanel 停止 Javascript 工作

> ID：15523503
> 
> 赞同：1
> 
> 时间：2013-03-20T12:25:11.393
> 
> 标签：c#, javascript, asp.net, updatepanel

我有一个工作正常的自动完成下拉列表，但是每次将项目添加到列表框中时它​​都会进行回发。

为了解决这个问题，我将内容包装在更新面板中。在您单击添加之前，自动完成功能会按预期运行。回发通常在哪里，在添加项目后，自动完成功能不起作用。

下面是代码：

aspx：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server" />
<asp:UpdatePanel runat="server" ID="UpdatePanel" UpdateMode="Conditional">
    <ContentTemplate>
        <div class="row">
            <div class="span4">
                <h3>
                    Create Season</h3>
            </div>
        </div>
        <div class="row">
            <div class="span2">
                <label class="control-label" for="TeamName">
                    Season Name:</label>
            </div>
            <div class="span3">
                <asp:TextBox ID="SeasonNameTextBox" runat="server" Text="Premier League"></asp:TextBox>
            </div>
        </div>
        <div class="row">
            <div class="span2">
                <label class="control-label" for="TeamName">
                    Season Year:</label>
            </div>
            <div class="span3">
                <asp:DropDownList ID="DropDownList1" runat="server" Width="100px">
                    <asp:ListItem>2012/13</asp:ListItem>
                    <asp:ListItem Value="2013/14">2013/14</asp:ListItem>
                    <asp:ListItem>2014/15</asp:ListItem>
                    <asp:ListItem>2015/16</asp:ListItem>
                </asp:DropDownList>
            </div>
        </div>
        <div class="row">
            <div class="span2">
                <label class="control-label" for="TeamName">
                    Add Team to Season:</label></p>
            </div>
            <div class="span3">
                <asp:TextBox ID="TeamNameTextBox" runat="server" CssClass="searchinput"></asp:TextBox>
            </div>
        </div>
        <div class="row">
            <div class="span2">
            </div>
            <div class="span3">
                <p>
                    <asp:Button ID="AddTeamButton" CssClass="btn btn-primary" runat="server" Text="Add"
                        OnClick="AddTeamButton_Click" /></p>
            </div>
        </div>
        <div class="row">
            <div class="span2">
                <label class="control-label" for="TeamName">
                    Seasons Teams:</label></p>
            </div>
            <div class="span3">
                <asp:ListBox ID="TeamNameListBox" runat="server"></asp:ListBox>
                <asp:Button ID="SubmitTeamsButton" CssClass="btn btn-primary" runat="server" Text="Submit"
                    OnClick="SubmitTeamsButton_Click" />
                <asp:Literal ID="TeamCount" runat="server"></asp:Literal>
            </div>
        </div>
        <div class="row">
            <div class="span9">
                <p>
                    <asp:Literal ID="CreateSeasonError" runat="server"></asp:Literal></p>
            </div>
        </div>
        <script type="text/javascript">
            $(document).ready(function () {
                $(".searchinput").autocomplete({
                    source: function (request, response) {
                        $.ajax({
                            type: "POST",
                            contentType: "application/json; charset=utf-8",
                            url: "PredictiveSearch.asmx/GetAllPredictions",
                            data: "{'keywordStartsWith':'" + request.term + "'}",
                            dataType: "json",
                            async: true,
                            success: function (data) {
                                response(data.d);

                            },
                            error: function (result) {
                                alert("Due to unexpected errors we were unable to load data");
                            }
                        });
                    },
                    minLength: 1
                });
            });
        </script>
    </ContentTemplate>
</asp:UpdatePanel> 
```

asmx:

```
 [System.Web.Script.Services.ScriptService]
public class PredictiveSearch : System.Web.Services.WebService
{

    [WebMethod]
    public IList<string> GetAllPredictions(string keywordStartsWith)
    {
        //TODO: implement real search here!

        SqlConnection conn = new SqlConnection(WebConfigurationManager.ConnectionStrings["RaiseFantasyLeagueConnectionString"].ConnectionString);
        SqlCommand cmd = new SqlCommand("[dbo].[findEnglishTeams]", conn);
        cmd.CommandType = CommandType.StoredProcedure;

        string searchTerm = keywordStartsWith;
        SqlParameter searchTermParam = new SqlParameter("@searchterm", searchTerm);

        cmd.Parameters.Add(searchTermParam);

        IList<string> output = new List<string>();

        conn.Open();
        SqlDataReader dReader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
        if (dReader.HasRows)
        {
            while (dReader.Read())
            {
                output.Add(dReader["englishTeamName"].ToString());
            }
            return output;
        }
        else
        {
            return output; 
        }
    }
} 
```

谁能解释为什么会发生这种情况以及如何解决？

提前致谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:29:23.827

试试这个：使用

```
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(); 
```

对于 UpdatePanels 而不是

```
$(document).ready() {.. } 
```

示例（未测试）：

```
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(yourAutoCompleteInitializationFunction);

function yourAutoCompleteInitializationFunction() {
$(".searchinput").autocomplete({
                    source: function (request, response) {
                        $.ajax({
                            type: "POST",
                            contentType: "application/json; charset=utf-8",
                            url: "PredictiveSearch.asmx/GetAllPredictions",
                            data: "{'keywordStartsWith':'" + request.term + "'}",
                            dataType: "json",
                            async: true,
                            success: function (data) {
                                response(data.d);

                            },
                            error: function (result) {
                                alert("Due to unexpected errors we were unable to load data");
                            }
                        });
                    },
                    minLength: 1
                });
} 
```

# extjs - 需要在同一个窗口中访问两个标签面板中使用的相同 id 的组件，不能使用 getCmp()

> ID：15523505
> 
> 赞同：2
> 
> 时间：2013-03-20T12:25:18.683
> 
> 标签：extjs

我正在使用 Extjs 4.0.7，我正在使用一个面板，在该面板内我使用两个选项卡，每个选项卡都包含一个用于插入数据的表单。

对于每个表单，我添加了一个`dockedItem`相同的组件`id`。我的问题从这里开始，添加该组件以显示来自服务器的错误消息或表单的验证错误。

如果我们只在一个窗口中使用该表单一次没有问题，我使用`Ext.getCmp('component-id')`; 到`setError`那个组件。

但是在一个活动窗口中使用两个或多个表单时，`form1`有时会显示`form2`错误`fieldl`，因为每个表单都使用相同的组件`id`。

我读到你应该尽量避免`getCmp()`在 extjs 中使用。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:37:28.970

使用 itemId。itemId 只需要在其容器层次结构中是唯一的：

```
Ext.require('*');

Ext.onReady(function() {

    new Ext.form.Panel({
        renderTo: document.body,
        width: 300,
        items: {
            xtype: 'textfield',
            fieldLabel: 'Field 1',
            itemId: 'field1'
        },
        tbar: [{
            text: 'Mark',
            handler: function(){
                this.up('form').down('#field1').markInvalid('Foo');
            }
        }]
    });

    new Ext.form.Panel({
        renderTo: document.body,
        width: 300,
        items: {
            xtype: 'textfield',
            fieldLabel: 'Field 1',
            itemId: 'field1'
        },
        tbar: [{
            text: 'Mark',
            handler: function(){
                this.up('form').down('#field1').markInvalid('Foo');
            }
        }]
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:31:13.263

在动态创建表单对象传递 ID 时，您将拥有不同的表单 ID。

您也可以尝试使用组件查询。

# java - 部署tomcat 7时出现PermGen Space错误？

> ID：15523510
> 
> 赞同：19
> 
> 时间：2013-03-20T12:25:38.170
> 
> 标签：java, tomcat, tomcat7, jira, jira-rest-java-api

我安装了 tomcat 7 以将我的 JIRA 项目版本从 5.0 升级到 6。在我将项目文件夹放在 tomcat 的 webapps 中之后。我在长时间运行后运行这个 localhost:8080/jira，它会抛出一些错误消息。请帮助我们解决这个问题提前谢谢

```
java.lang.RuntimeException: PermGen space
    at com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:54)
    at com.atlassian.event.internal.AsynchronousAbleEventDispatcher$2.run(AsynchronousAbleEventDispatcher.java:66)
    at com.atlassian.event.internal.AsynchronousAbleEventDispatcher$1.execute(AsynchronousAbleEventDispatcher.java:32)
    at com.atlassian.event.internal.AsynchronousAbleEventDispatcher.dispatch(AsynchronousAbleEventDispatcher.java:60)
    at com.atlassian.event.internal.EventPublisherImpl.invokeListeners(EventPublisherImpl.java:160)
    at com.atlassian.event.internal.EventPublisherImpl.publish(EventPublisherImpl.java:79)
    at com.atlassian.plugin.event.impl.DefaultPluginEventManager.broadcast(DefaultPluginEventManager.java:84)
    at com.atlassian.plugin.manager.DefaultPluginManager.addPlugins(DefaultPluginManager.java:768)
    at com.atlassian.plugin.manager.DefaultPluginManager.init(DefaultPluginManager.java:200)
    at com.atlassian.jira.plugin.JiraPluginManager.start(JiraPluginManager.java:63)
    at com.atlassian.jira.ComponentManager$PluginSystem.start(ComponentManager.java:635)
    at com.atlassian.jira.ComponentManager.startJIRA(ComponentManager.java:214)
    at com.atlassian.jira.ComponentManager.quickStart(ComponentManager.java:208)
    at com.atlassian.jira.ComponentManager.start(ComponentManager.java:193)
    at com.atlassian.jira.upgrade.PluginSystemLauncher.start(PluginSystemLauncher.java:23)
    at com.atlassian.jira.startup.DefaultJiraLauncher$3.run(DefaultJiraLauncher.java:107)
    at com.atlassian.jira.config.database.DatabaseConfigurationManagerImpl.doNowOrEnqueue(DatabaseConfigurationManagerImpl.java:323)
    at com.atlassian.jira.config.database.DatabaseConfigurationManagerImpl.doNowOrWhenDatabaseActivated(DatabaseConfigurationManagerImpl.java:211)
    at com.atlassian.jira.startup.DefaultJiraLauncher.postDbLaunch(DefaultJiraLauncher.java:100)
    at com.atlassian.jira.startup.DefaultJiraLauncher.access$100(DefaultJiraLauncher.java:27)
    at com.atlassian.jira.startup.DefaultJiraLauncher$1.run(DefaultJiraLauncher.java:66)
    at com.atlassian.jira.util.devspeed.JiraDevSpeedTimer.run(JiraDevSpeedTimer.java:33)
    at com.atlassian.jira.startup.DefaultJiraLauncher.start(DefaultJiraLauncher.java:61)
    at com.atlassian.jira.startup.LauncherContextListener.contextInitialized(LauncherContextListener.java:54)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.OutOfMemoryError: PermGen space 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-20T12:36:24.317

更有用的解决方案是增加 JAVA_OPTS 变量中的值。
将下一行添加到目录`Catalina.bat/Catalina.sh`中的文件`bin`

对于 Windows (Catalina.bat)

```
set JAVA_OPTS="-Xms1024m -Xmx10246m -XX:NewSize=256m -XX:MaxNewSize=356m -XX:PermSize=256m -XX:MaxPermSize=356m" 
```

对于 Unix (Catalina.sh)

```
export JAVA_OPTS="-Xms1024m -Xmx1024m -XX:NewSize=256m -XX:MaxNewSize=356m -XX:PermSize=256m -XX:MaxPermSize=356m" 
```

您可以在[本文中找到更多解决方案](http://javarevisited.blogspot.com/2012/01/tomcat-javalangoutofmemoryerror-permgen.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-20T12:42:17.143

有时在重新部署后，垃圾收集器无法销毁 Tomcat 上的某些对象并耗尽空间。造成这种情况的原因有很多：

*   如果你使用一些 CRUD-Objects - 检查使用后是否全部关闭。
*   如果您的应用程序使用了其他库 - 有时这些库中的对象也不能被破坏，例如 MysqlConnector、Hibernate/C3p0 或其他 - 尝试将这些库放在 tomcat/lib 文件夹中

用“Java VisualVM”检查Tomcat，重新部署后检查permGen。
permGen Space 的默认值通常也非常低，您可以使用以下 javaVM 参数增加它们

```
 -XX:PermSize=64M -XX:MaxPermSize=256m 
```

你可以按照这些教程

[http://www.mkyong.com/tomcat/tomcat-javalangoutofmemoryerror-permgen-space/](http://www.mkyong.com/tomcat/tomcat-javalangoutofmemoryerror-permgen-space/)

## 更新

其他解决方案可能在这里找到：[what to do with tomcat PermGen space](https://stackoverflow.com/questions/10085028/what-to-do-with-tomcat-permgen-space)

将 -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC 添加到 javaVM 选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:29:35.620

`-XX:PermSize={value}`使用和通过 JAVA_OPTS 变量调整 permgen 的值，`-XX:MaxPermSize={value}`其中“value”是一个类似 256m 的字符串。

# msbuild - Nuget 包还原 - 将参数传递给 MsBuild c# API

> ID：15523512
> 
> 赞同：0
> 
> 时间：2013-03-20T12:25:41.150
> 
> 标签：msbuild, nuget

我正在寻找为 MSBuild C# api 编写一个包装器。我的构建工作正常，但出于某种奇怪的原因，即使我传入参数，我也很难让 Nuget 包恢复运行。

我在作为**NETWORK SERVICE运行的服务中运行它**

`The command ""..\.nuget\nuget.exe" install "C:\BuildTemp\application1\packages.config" -source "" -RequireConsent -o "..\packages"" exited with code 1.`

我是否正确传递了它们？

```
var pc = new ProjectCollection();
var buildProperties = new Dictionary<string, string>
{
    {"Configuration", "Release"},
    {"Platform", "Any CPU"},
    {"OutputPath", _outputPath},
    {"EnableNuGetPackageRestore", "true"}
};

var buildParameters = new BuildParameters(pc);
var buildRequest = new BuildRequestData("C:\myapplication.csproj",
                                        buildProperties,
                                        null,
                                        new[] { "Clean", "Rebuild" },
                                        null); 
```

**更新：这似乎适用于某些环境而不是其他环境。为什么会这样？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:18:41.697

所以我在本地机器上测试了这个命令：

```
.\.nuget\NuGet.exe install Akavache\packages.config -source "" -RequireConsent -o packages 
```

我得到一个错误：

> 无效的 URI：无法确定 URI 的格式。

我认为这与这一点有关：

`-source ""`

因为我可以删除该值并让它再次运行而不会出现错误。

这就引出了一个问题，包源在哪里定义？

在[NuGet.targets 文件](http://nuget.codeplex.com/SourceControl/changeset/view/e8ee017cbf50#src/Build/NuGet.targets)中有这样的部分：

```
<ItemGroup Condition=" '$(PackageSources)' == '' ">
    <!-- Package sources used to restore packages. By default, registered sources under %APPDATA%\NuGet\NuGet.Config will be used -->
    <!-- The official NuGet package source (https://nuget.org/api/v2/) will be excluded if package sources are specified and it does not appear in the list -->
    <!--
        <PackageSource Include="https://nuget.org/api/v2/" />
        <PackageSource Include="https://my-nuget-source/nuget/" />
    -->
</ItemGroup> 
```

因此，我建议当您说它“在某些环境中而不是在其他环境中”工作时，您没有`%APPDATA%\NuGet\NuGet.Config`服务帐户的配置文件。

您可以尝试将`Nuget.targets`源代码管理中文件中的此部分更改为：

```
<ItemGroup Condition=" '$(PackageSources)' == '' ">
    <PackageSource Include="https://nuget.org/api/v2/" />
</ItemGroup> 
```

看看这是否能解决您在其他环境中的问题？

# javascript - 在嵌套数组中按关键字查找

> ID：15523514
> 
> 赞同：89
> 
> 时间：2013-03-20T12:25:41.780
> 
> 标签：javascript, underscore.js

假设我有一个对象：

```
[
    {
        'title': "some title"
        'channel_id':'123we'
        'options': [
                    {
                'channel_id':'abc'
                'image':'http://asdasd.com/all-inclusive-block-img.jpg'
                'title':'All-Inclusive'
                'options':[
                    {
                        'channel_id':'dsa2'
                        'title':'Some Recommends'
                        'options':[
                            {
                                'image':'http://www.asdasd.com'                                 'title':'Sandals'
                                'id':'1'
                                'content':{
                                     ... 
```

我想找到一个 id 为 1 的对象。有这样的功能吗？我可以使用下划线的`_.filter`方法，但我必须从顶部开始向下过滤。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-20T13:02:47.323

递归是你的朋友。我更新了函数以考虑属性数组：

```
function getObject(theObject) {
    var result = null;
    if(theObject instanceof Array) {
        for(var i = 0; i < theObject.length; i++) {
            result = getObject(theObject[i]);
            if (result) {
                break;
            }   
        }
    }
    else
    {
        for(var prop in theObject) {
            console.log(prop + ': ' + theObject[prop]);
            if(prop == 'id') {
                if(theObject[prop] == 1) {
                    return theObject;
                }
            }
            if(theObject[prop] instanceof Object || theObject[prop] instanceof Array) {
                result = getObject(theObject[prop]);
                if (result) {
                    break;
                }
            } 
        }
    }
    return result;
} 
```

更新 jsFiddle：http: [//jsfiddle.net/FM3qu/7/](http://jsfiddle.net/FM3qu/7/)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-10-25T07:50:07.200

对我有用的是这种懒惰的方法，而不是算法上的懒惰；）

```
if( JSON.stringify(object_name).indexOf("key_name") > -1 ) {
    console.log("Key Found");
}
else{
    console.log("Key not Found");
} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-03-20T12:34:47.863

如果要在搜索对象时获取第一个 id 为 1 的元素，可以使用此函数：

```
function customFilter(object){
    if(object.hasOwnProperty('id') && object["id"] == 1)
        return object;

    for(var i=0; i<Object.keys(object).length; i++){
        if(typeof object[Object.keys(object)[i]] == "object"){
            var o = customFilter(object[Object.keys(object)[i]]);
            if(o != null)
                return o;
        }
    }

    return null;
} 
```

如果要获取 id 为 1 的所有元素，那么（如您所见，所有 id 为 1 的元素都存储在 result 中）：

```
function customFilter(object, result){
    if(object.hasOwnProperty('id') && object.id == 1)
        result.push(object);

    for(var i=0; i<Object.keys(object).length; i++){
        if(typeof object[Object.keys(object)[i]] == "object"){
            customFilter(object[Object.keys(object)[i]], result);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2019-05-19T02:55:51.083

另一个（有点傻）的选择是利用 的自然递归性质`JSON.stringify`，并传递给它一个[替换函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#The_replacer_parameter)，该函数在字符串化过程中在每个嵌套对象上运行：

```
const input = [{
  'title': "some title",
  'channel_id': '123we',
  'options': [{
    'channel_id': 'abc',
    'image': 'http://asdasd.com/all-inclusive-block-img.jpg',
    'title': 'All-Inclusive',
    'options': [{
      'channel_id': 'dsa2',
      'title': 'Some Recommends',
      'options': [{
        'image': 'http://www.asdasd.com',
        'title': 'Sandals',
        'id': '1',
        'content': {}
      }]
    }]
  }]
}];

console.log(findNestedObj(input, 'id', '1'));

function findNestedObj(entireObj, keyToFind, valToFind) {
  let foundObj;
  JSON.stringify(entireObj, (_, nestedValue) => {
    if (nestedValue && nestedValue[keyToFind] === valToFind) {
      foundObj = nestedValue;
    }
    return nestedValue;
  });
  return foundObj;
};
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-01-31T23:44:33.267

使用键和谓词改进了@haitaka 答案

```
function  deepSearch (object, key, predicate) {
    if (object.hasOwnProperty(key) && predicate(key, object[key]) === true) return object

    for (let i = 0; i < Object.keys(object).length; i++) {
      let value = object[Object.keys(object)[i]];
      if (typeof value === "object" && value != null) {
        let o = deepSearch(object[Object.keys(object)[i]], key, predicate)
        if (o != null) return o
      }
    }
    return null
} 
```

所以这可以被调用为：

```
var result = deepSearch(myObject, 'id', (k, v) => v === 1); 
```

或者

```
var result = deepSearch(myObject, 'title', (k, v) => v === 'Some Recommends'); 
```

这是演示：http: [//jsfiddle.net/a21dx6c0/](http://jsfiddle.net/a21dx6c0/)

**已编辑**

以同样的方式，您可以找到多个对象

```
function deepSearchItems(object, key, predicate) {
        let ret = [];
        if (object.hasOwnProperty(key) && predicate(key, object[key]) === true) {
            ret = [...ret, object];
        }
        if (Object.keys(object).length) {
            for (let i = 0; i < Object.keys(object).length; i++) {
                let value = object[Object.keys(object)[i]];
                if (typeof value === "object" && value != null) {
                    let o = this.deepSearchItems(object[Object.keys(object)[i]], key, predicate);
                    if (o != null && o instanceof Array) {
                        ret = [...ret, ...o];
                    }
                }
            }
        }
        return ret;
    } 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-03-27T14:10:16.660

我通过谷歌搜索找到了这个页面以获得类似的功能。基于 Zach 和 regularmike 提供的工作，我创建了另一个适合我需要的版本。
顺便说一句，出色的工作 Zah 和regularmike！我将在这里发布代码：

```
function findObjects(obj, targetProp, targetValue, finalResults) {

  function getObject(theObject) {
    let result = null;
    if (theObject instanceof Array) {
      for (let i = 0; i < theObject.length; i++) {
        getObject(theObject[i]);
      }
    }
    else {
      for (let prop in theObject) {
        if(theObject.hasOwnProperty(prop)){
          console.log(prop + ': ' + theObject[prop]);
          if (prop === targetProp) {
            console.log('--found id');
            if (theObject[prop] === targetValue) {
              console.log('----found porop', prop, ', ', theObject[prop]);
              finalResults.push(theObject);
            }
          }
          if (theObject[prop] instanceof Object || theObject[prop] instanceof Array){
            getObject(theObject[prop]);
          }
        }
      }
    }
  }

  getObject(obj);

} 
```

它的作用是找到`obj`其中属性名称和值匹配的任何对象，`targetProp`并将`targetValue`其推送到`finalResults`数组中。这是 jsfiddle 玩： [https ://jsfiddle.net/alexQch/5u6q2ybc/](https://jsfiddle.net/alexQch/5u6q2ybc/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-02-14T12:51:04.590

我为此目的创建了库：[https ://github.com/dominik791/obj-traverse](https://github.com/dominik791/obj-traverse)

你可以使用`findFirst()`这样的方法：

```
var foundObject = findFirst(rootObject, 'options', { 'id': '1' }); 
```

现在`foundObject`变量存储对您正在寻找的对象的引用。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-10-07T03:52:05.183

我们使用[对象扫描](https://github.com/blackflux/object-scan)进行数据处理。它在概念上非常简单，但允许很多很酷的东西。以下是您将如何解决您的具体问题

```
// const objectScan = require('object-scan');

const find = (id, input) => objectScan(['**'], {
  abort: true,
  rtn: 'value',
  filterFn: ({ value }) => value.id === id
})(input);

const data = [{ title: 'some title', channel_id: '123we', options: [{ channel_id: 'abc', image: 'http://asdasd.com/all-inclusive-block-img.jpg', title: 'All-Inclusive', options: [{ channel_id: 'dsa2', title: 'Some Recommends', options: [{ image: 'http://www.asdasd.com', title: 'Sandals', id: '1', content: {} }] }] }] }];

console.log(find('1', data));
// => { image: 'http://www.asdasd.com', title: 'Sandals', id: '1', content: {} }
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.8.0"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-10-27T17:11:00.283

另一种递归解决方案，适用于数组/列表和对象，或两者的混合：

```
function deepSearchByKey(object, originalKey, matches = []) {

    if(object != null) {
        if(Array.isArray(object)) {
            for(let arrayItem of object) {
                deepSearchByKey(arrayItem, originalKey, matches);
            }
        } else if(typeof object == 'object') {

            for(let key of Object.keys(object)) {
                if(key == originalKey) {
                    matches.push(object);
                } else {
                    deepSearchByKey(object[key], originalKey, matches);
                }

            }

        }
    }

    return matches;
} 
```

用法：

```
let result = deepSearchByKey(arrayOrObject, 'key'); // returns an array with the objects containing the key 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-03-05T14:07:15.637

您可以在递归函数中使用 javascript`some`函数。有些的优点是一旦孩子建立就停止循环。不要使用在大数据中会很慢的地图。

```
const findChild = (array, id) => {
  let result;
  array.some(
    (child) =>
      (child.id === id && (result = child)) ||
      (result = findChild(child.options || [], id))
  );
  return result;
};

findNode(array, 1) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-12-10T18:01:44.657

@Iulian Pinzaru 的答案几乎正是我所需要的，但如果你的对象有任何空值，它就不起作用。这个版本解决了这个问题。

```
function  deepSearch (object, key, predicate) {
  if (object.hasOwnProperty(key) && predicate(key, object[key]) === true) return object

  for (let i = 0; i < Object.keys(object).length; i++) {
    const nextObject = object[Object.keys(object)[i]];
    if (nextObject && typeof nextObject === "object") {
      let o = deepSearch(nextObject, key, predicate)
      if (o != null) return o
    }
  }
  return null
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-04-22T14:26:10.517

```
 function getPropFromObj(obj, prop) {
            let valueToFindByKey;
            if (!Array.isArray(obj) && obj !== null && typeof obj === "object") {
              if (obj.hasOwnProperty(prop)) {

                 valueToFindByKey = obj[prop];
               console.log(valueToFindByKey);
              } else {

                let i;
                for (i = 0; i < Object.keys(obj).length; i++) {

                    getPropFromObj(obj[Object.keys(obj)[i]], prop);
                }
              }

            }
            return null;

          }

        const objToInvestigate = {
            employeeInformation: {
              employees: {
                name: "surya",
                age: 27,
                job: "Frontend Developer",
              },
            },
          };
          getPropFromObj(objToInvestigate, "name");
```

1.  检测深度嵌套对象中的键。
2.  最后返回检测到的键的值。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-11-26T20:37:50.177

如果你对整个 ES6 感兴趣，你可以使用

```
const findByKey = (obj, kee) => {
    if (kee in obj) return obj[kee];
    for(n of Object.values(obj).filter(Boolean).filter(v => typeof v === 'object')) {
        let found = findByKey(n, kee)
        if (found) return found
    }
}

const findByProperty = (obj, predicate) => {
    if (predicate(obj)) return obj
    for(n of Object.values(obj).filter(Boolean).filter(v => typeof v === 'object')) {
        let found = findByProperty(n, predicate)
        if (found) return found
    }
} 
```

按值查找会有所不同

```
let findByValue = (o, val) => {
    if (o === val) return o;
    if (o === NaN || o === Infinity || !o || typeof o !== 'object') return;
    if (Object.values(o).includes(val)) return o;
    for (n of Object.values(o)) {
        const found = findByValue(n, val)
        if (found) return n
    }
} 
```

那么它们可以像这样使用

```
const arry = [{ foo: 0 }, null, { bar: [{ baz: { nutherKey: undefined, needle: "gotcha!" } }]}]
const obj = { alice: Infinity, bob: NaN, charlie: "string", david: true, ebert: arry }

findByKey(obj, 'needle')
// 'gotcha!'

findByProperty(obj, val => val.needle === 'gotcha!')
// { nutherKey: undefined, needle: "gotcha!" }

findByValue(obj, 'gotcha!')
// { nutherKey: undefined, needle: "gotcha!" } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-04-07T18:50:45.003

改进的答案考虑到对象内的循环引用。它还显示到达那里的路径。

在此示例中，我正在搜索一个我知道位于全局对象内的 iframe：

```
const objDone = []
var i = 2
function getObject(theObject, k) {
    if (i < 1 || objDone.indexOf(theObject) > -1) return
    objDone.push(theObject)
    var result = null;
    if(theObject instanceof Array) {
        for(var i = 0; i < theObject.length; i++) {
            result = getObject(theObject[i], i);
            if (result) {
                break;
            }   
        }
    }
    else
    {
        for(var prop in theObject) {
            if(prop == 'iframe' && theObject[prop]) {
                i--;
                console.log('iframe', theObject[prop])
                return theObject[prop]
            }
            if(theObject[prop] instanceof Object || theObject[prop] instanceof Array) {
                result = getObject(theObject[prop], prop);
                if (result) {
                    break;
                }
            } 
        }
    }
    if (result) console.info(k)
    return result;
} 
```

运行以下命令： `getObject(reader, 'reader')` 最后给出以下输出和 iframe 元素：

```
iframe // (The Dom Element)
_views
views
manager
rendition
book
reader 
```

注意：路径是相反的顺序`reader.book.rendition.manager.views._views.iframe`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-09-23T13:53:44.410

我想建议对 Zach/RegularMike 的回答进行修改（但没有能够发表评论的“声誉”！）。我发现那里的解决方案是一个非常有用的基础，但在我的应用程序中遇到了问题，因为如果数组中有字符串，它将递归地为字符串中的每个*字符*调用函数（这导致 IE11 和 Edge 浏览器因“堆栈空间不足”而失败）错误）。我的简单优化是将“object”子句递归调用中使用的相同测试添加到“array”子句中的测试：

```
if (arrayElem instanceof Object || arrayElem instanceof Array) { 
```

因此，我的完整代码（现在正在查找特定键的所有实例，与原始要求略有不同）是：

```
// Get all instances of specified property deep within supplied object
function getPropsInObject(theObject, targetProp) {
    var result = [];
    if (theObject instanceof Array) {
        for (var i = 0; i < theObject.length; i++) {
            var arrayElem = theObject[i];
            if (arrayElem instanceof Object || arrayElem instanceof Array) {
                result = result.concat(getPropsInObject(arrayElem, targetProp));
            }
        }
    } else {
        for (var prop in theObject) {
            var objProp = theObject[prop];
            if (prop == targetProp) {
                return theObject[prop];
            }
            if (objProp instanceof Object || objProp instanceof Array) {
                result = result.concat(getPropsInObject(objProp, targetProp));
            }
        }
    }
    return result;
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-01-29T13:03:10.030

前段时间我做了一个小 lib `find-and`，它在[npm](https://www.npmjs.com/package/find-and)上可用，用于以 lodash 的方式处理嵌套对象。`returnFound`如果找到多个对象，则返回找到的对象或对象数组的函数。

例如，

```
const findAnd = require('find-and');

const a = [
  {
    'title': "some title",
    'channel_id':'123we',
    'options': [
      {
        'channel_id':'abc',
        'image':'http://asdasd.com/all-inclusive-block-img.jpg',
        'title':'All-Inclusive',
        'options':[
          {
            'channel_id':'dsa2',
            'title':'Some Recommends',
            'options':[
              {
                'image':'http://www.asdasd.com',
                'title':'Sandals',
                'id':'1',
                'content':{},
              },
            ],
          },
        ],
      },
    ],
  },
];

findAnd.returnFound(a, {id: '1'}); 
```

返回

```
{
  'image':'http://www.asdasd.com',
  'title':'Sandals',
  'id':'1',
  'content':{},
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-07-20T13:53:41.247

只需使用递归函数。
请参见下面的示例：

```
const data = [
  {
    title: 'some title',
    channel_id: '123we',
    options: [
      {
        channel_id: 'abc',
        image: 'http://asdasd.com/all-inclusive-block-img.jpg',
        title: 'All-Inclusive',
        options: [
          {
            channel_id: 'dsa2',
            title: 'Some Recommends',
            options: [
              {
                image: 'http://www.asdasd.com',
                title: 'Sandals',
                id: '1',
                content: {},
              }
            ]
          }
        ]
      }
    ]
  }
]

function _find(collection, key, value) {
  for (const o of collection) {
    for (const [k, v] of Object.entries(o)) {
      if (k === key && v === value) {
        return o
      }
      if (Array.isArray(v)) {
        const _o = _find(v, key, value)
        if (_o) {
          return _o
        }
      }
    }
  }
}

console.log(_find(data, 'channel_id', 'dsa2'))
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-11-12T17:32:19.693

```
 fucntion getPath(obj, path, index = 0) {
        const nestedKeys = path.split('.')
        const selectedKey = nestedKeys[index]

        if (index === nestedKeys.length - 1) {
            return obj[selectedKey]
        }

        if (!obj.hasOwnProperty(selectedKey)) {
            return {}
        }

        const nextObj = obj[selectedKey]

        return Utils.hasPath(nextObj, path, index + 1)
    }
```

不客气 作者：Gorillaz

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-02-12T05:14:19.053

找到了我正在寻找的答案，尤其是 Ali Alnoaimi 的解决方案。我做了一些小的调整以允许搜索值

```
function deepSearchByKey(object, originalKey, originalValue, matches = []) {
if (object != null) {
  if (Array.isArray(object)) {
    for (let arrayItem of object) {
      deepSearchByKey(arrayItem, originalKey, originalValue, matches);
    }
  } else if (typeof object == 'object') {
    for (let key of Object.keys(object)) {
      if (key == originalKey) {
        if (object[key] == originalValue) {
          matches.push(object);
        }
      } else {
        deepSearchByKey(object[key], originalKey, originalValue, matches);
      }
    }
  }
}

return matches;
} 
```

要使用：

```
let result = deepSearchByKey(arrayOrObject, 'key', 'value'); 
```

这将返回包含匹配键和值的对象。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2020-05-06T13:19:14.350

这段代码允许您获取 JSON 中其键是用户定义的所有对象。

```
function main(obj = {}, property){
 const views = [];

 function traverse(o) {
    for (var i in o) {
      if(i === property) views.push(o[i]);
      if (!!o[i] && typeof(o[i])=="object") {
        console.log(i, o[i]);
        traverse(o[i]);
      } else {
        console.log(i, o[i]);
      }
    }
    }

  traverse(obj);
  return views;

} 
```

这是一个例子：

```
const obj = {
    id: 'id at level 1',
    level2: {
      id: 'id at level 2',
      level3: {
        id: 'id at level 3',
        level4: {
          level5: {
            id: 'id at level 5'
          }
       }
    }
  },
  text: ''
}

main(obj, 'id'); 
```

* * *

## 回答 #21

> 赞同：-17
> 
> 时间：2013-03-20T12:41:13.623

如果您已经在使用下划线，请使用 _.find()

```
_.find(yourList, function (item) {
    return item.id === 1;
}); 
```

# php - PHP 传递值

> ID：15523515
> 
> 赞同：0
> 
> 时间：2013-03-20T12:25:42.543
> 
> 标签：php, mysql

我无法将代码中的值 id 传递给 edit.php。

在 displaynews 中，我从数据库中打印出文章。它还创建了一个链接，将我重定向到 edit.php 并与它一起发送 $id 值。

链接到 displaynews 功能

[http://snipt.org/zhla8](http://snipt.org/zhla8)

这就是我遇到麻烦的地方

```
 <h3>EDIT NEWS ARTICLE</h3>
      <form id="EditNews" name="EditNews" method="POST" action="edit.php">
      <textarea name="editnewstext"><?php $news=Textarea(1);echo $news ?></textarea> <!--HERE i need to replace the 1 with id passing in displaynews -->
                        <input type="submit" name="Edit_News" id="Edit_News">

                        <?php
                       include 'db.php';
                       include'editnewsarticle.php';
                             if(isset($_POST['Edit_News']))
                          {

                                $content= $_POST['editnewstext'];
                  geteditnews(1,$content); //<!--HERE i need to replace the 1 with idpassing in displaynews -->
                                Header("location:Home.php");

                          } 
```

链接到 Edit.php 页面

[http://snipt.org/zhkj8](http://snipt.org/zhkj8)

链接到 GetnewsTextarea 函数

[http://snipt.org/zhlb9](http://snipt.org/zhlb9)

链接编辑新闻文章功能

[http://snipt.org/zhki2](http://snipt.org/zhki2)

请不要评论 mysql 扩展是如何折旧的，并且我的代码对 sql 注入是开放的。提前致谢

编辑：这是解决方案

```
 if(isset($_GET['id']))
                        {
                        $id = $_GET['id'];
                        $data = mysql_query("SELECT * FROM news WHERE id = '$id' "); 
                    }
                        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:36:44.720

edit.php 中的这些更改有帮助吗？

```
if (isset($_POST['id']))
    $id = $_POST['id'];

<?php $news=Textarea($id);echo $news ?>  

geteditnews($id, $content); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:37:17.113

在表单标签之后为 id 添加一个隐藏字段。像这样：

```
<form id="EditNews" name="EditNews" method="POST" action="edit.php">
    <input type="hidden" name="id" value="<?php echo $id; ?>"> 
```

# sql-server - 数据阅读器有行但没有填充组合框

> ID：15523516
> 
> 赞同：0
> 
> 时间：2013-03-20T12:25:44.820
> 
> 标签：sql-server, vb.net, visual-studio-2010, sqlcommand, datareader

我有这段代码没有从 datareader 填充组合框。我做了各种检查，确认数据库正在连接，查询也正确。Databaseconnections 是一个模块，我在其中声明了所有变量，包括连接字符串和数据读取器（Public dr As SqlDataReader）。调试时一切都很顺利，但是当我点击 While 循环时，它会跳到循环的末尾而没有任何错误。我无法理解遗漏了什么。请帮忙。

```
Public Sub loadLocatns()

    Try
        Openconn()
        cmd.CommandText = "SELECT distinct jobs.[file] FROM [BERVSDB].[dbo].[jobQueue] as jobs where (jobs.form_status<>'c') and (jobs.CI = '" & Ccode & "') and (jobs.[file]  in( SELECT dts.[file] from [BERVSDB].[dbo].[master]  as dts where  (dts.[status] is null) or (dts.[status] <> 'X')  ))"
        cmd.Connection = conn
        Databaseconnections.dr = cmd.ExecuteReader()
        If IsNothing(dr) Then
            MessageBox.Show("No Data found")
        Else
            If dr.Read() Then
                While dr.Read
                    Me.ComboBox1.Items.Add(dr(0))
                End While
            Else
                MessageBox.Show("Not reading!")
            End If
            dr.Close()
            conn.Close()
        End If

    Catch ex As Exception
        MessageBox.Show("Error:" & ex.Message)
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:52:34.497

在我看来，您从读者那里阅读了两次，第一次是在您检查时`IF dr.Read() THEN`，第二次是打开`While dr.Read`，如果您有一个项目，则不会添加。

解决方案：您可以使用`DO ... WHILE`允许您在调用后首先阅读的条件`If dr.Read() Then` （对不起，我不熟悉 VB.NET，所以我无法为您编写完整的代码，但我希望您明白这一点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:38:43.563

试试这个。@AMgdy 已经暗示过了。

```
Try
    Openconn()
    cmd.CommandText = "SELECT distinct jobs.[file] FROM [BERVSDB].[dbo].[jobQueue] as jobs where (jobs.form_status<>'c') and (jobs.CI = '" & Ccode & "') and (jobs.[file]  in( SELECT dts.[file] from [BERVSDB].[dbo].[master]  as dts where  (dts.[status] is null) or (dts.[status] <> 'X')  ))"
    cmd.Connection = conn
    Databaseconnections.dr = cmd.ExecuteReader()
    If Not dr.HasRows Then
        MessageBox.Show("No Data found")

    Else
        While dr.Read()
            Me.ComboBox1.Items.Add(dr(0))
        End While
    End If

    dr.Close()
    conn.Close()

Catch ex As Exception
    MessageBox.Show("Error:" & ex.Message)
End Try 
```

也许将您的连接、命令和阅读器包装在使用块中，以确保它们也被正确处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:26:55.063

我会尝试通过 SQL Server Profiler 检查查询，然后通过 SSMS 执行它以查看发生了什么。AMgdy 和 David Osborne 注意到的是正确的，但我猜您期望的不仅仅是一行（否则您不会使用 while 循环）。

另一个建议是使用参数而不是字符串连接，因为这很容易被 SQL 注入攻击，并且运行速度也比参数化查询慢。

```
SqlCommand cmd = new SqlCommand();
cmd.CommandText = "SELECT distinct jobs.[file] FROM 
[BERVSDB].[dbo].[jobQueue] as jobs where (jobs.form_status<>'c') and
(jobs.CI = @CCode) and (jobs.[file]  in( SELECT dts.[file] from
[BERVSDB].[dbo].[master]  as dts where  (dts.[status] is null) or 
(dts.[status] <> 'X')  ))";
cmd.Parameters.Add(new SqlParameter("@CCode", Ccode)); 
```

# oracle - oracle更新语句多表

> ID：15523520
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:25:48.763
> 
> 标签：oracle, sql-update

我正在使用 Oracle（对它还有点新意），每次运行下面的更新语句时，我都会收到以下错误消息。

```
SQL Error: ORA-00904: "CH"."CONTRACT_ID": invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action: 
```

这是查询：

```
UPDATE wr00262_catalogue_201310 ct SET
   ct.PORTFOLIO_ID = (SELECT ch.PORTFOLIO_ID 
                       from WR00262_CONTRACT_HEADER ch 
                       WHERE ch.PORTFOLIO_ID = ct.PORTFOLIO_ID)
   WHERE ct.NPC in (SELECT ctl.NPC 
                   FROM wr00262_contract_line ctl 
                    WHERE ctl.CONTRACT_ID = ch.CONTRACT_ID); 
```

我想我可能需要加入，但不太确定在哪里或如何加入。contract_header 表确实有一个名为 CONTRACT_ID 的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:33:13.643

这是一个范围界定问题。一个子查询中的列对任何其他子查询都不可见。所以尝试这样的事情：

```
UPDATE wr00262_catalogue_201310 ct SET
   PORTFOLIO_ID = (
      SELECT ch.PORTFOLIO_ID 
      from WR00262_CONTRACT_HEADER ch 
      WHERE ch.PORTFOLIO_ID = ct.PORTFOLIO_ID
   )
   WHERE ct.NPC in (
      SELECT ctl.NPC 
      FROM WR00262_CONTRACT_HEADER ch 
      join wr00262_contract_line ctl 
         on ctl.CONTRACT_ID = ch.CONTRACT_ID
      WHERE ch.PORTFOLIO_ID = ct.PORTFOLIO_ID
   ); 
```

# java - 签署小程序并部署到内网

> ID：15523521
> 
> 赞同：1
> 
> 时间：2013-03-20T12:25:49.060
> 
> 标签：java, security, browser, web, signed-applet

我编写了一个在我们的 Intranet 中使用的 Web 应用程序。我还编写了一个小型 Java Applet 来与我们的 Windows 桌面集成（打开应用程序和文件）。当然，每次我访问我的 Web 应用程序时都会收到安全警告。我在 stackoverflow 上读到应该可以签署我的小程序并将证书推广到我的所有客户端（Windows XP 和 Windows 7）以摆脱安全警告。

是否有教程如何做到这一点？我可以在不购买昂贵证书的情况下这样做吗，因为我只在我的 Intranet 中使用此应用程序？

感谢您提供任何信息和最好的问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:50:50.317

我在这里找到了解决方案：[http ://wikigu.blogspot.co.at/2011/06/signing-java-applet-with-your-own-ca.html](http://wikigu.blogspot.co.at/2011/06/signing-java-applet-with-your-own-ca.html)

最后一步是将生成的 crt（在示例中为“server.crt”）文件安装到 Trusted Publishers 证书存储中。

编辑：我刚刚意识到它只是在 Internet Explorer 中工作（小程序在没有任何警告或对话的情况下执行）但不在 Firefox 中。Firefox 仍然显示安全警告。有人知道如何摆脱 Firefox 中的警告吗？

# c++ - qt c++中的多文件阅读器

> ID：15523527
> 
> 赞同：0
> 
> 时间：2013-03-20T12:26:00.763
> 
> 标签：c++, qt, file-io

我想指定一个文件夹的路径，并希望一个接一个地打开所述文件夹中的所有 xslt 文件。

我试着这样做：

```
 QString path = "/misc/example";
 QDir dir(path);
 QStringList filters;
 filters << "*.xslt";

 foreach (QFile file, dir.entryList(filters, QDir::Files))
 {
      if( !inFile.open( QIODevice::ReadOnly | QIODevice::Text ) )
      {
        qDebug("Failed to open file for reading.");
        return 0;
      }
 } 
```

但我得到这个错误

```
/usr/include/qt4/QtCore/qfile.h:209: Fehler:'QFile::QFile(const QFile&)' is private 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:32:06.693

关于错误，这一行

```
 foreach (QFile file, dir.entryList(filters, QDir::Files)) 
```

当复制构造函数是私有的时，尝试将对象从`dir.entryList`a复制`QFile`到。`file`然后，它显示错误。

尝试这样的事情：

```
foreach (QString &name, dir.entryList(filters, QDir::Files))
{
    QFile file(name);
    if (!file.open (QIODevice::ReadOnly | QIODevice::Text))
    {
      // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:32:37.653

`entryList`返回`QStringList`但不是`QFiles`. 所以你应该这样做

```
...
foreach ( QString fileName, dir.entryList(filters, QDir::Files) )
{
    QFile inFile( fileName );
    if( !inFile.open( QIODevice::ReadOnly | QIODevice::Text ) )
    {
        qDebug("Failed to open file for reading.");
        return 0;
    }
} 
```

为了避免使用`foreach`和制作文件名列表的巨大开销，我建议使用[QDirIterator](http://qt-project.org/doc/qt-4.8/qdiriterator.html)

```
QDirIterator dirIt( path, filters, QDirIterator::Subdirectories );
while ( it.hasNext() )
{
    QFile inFile( it.next() );
    if( !inFile.open( QIODevice::ReadOnly | QIODevice::Text ) )
    {
        qDebug("Failed to open file for reading.");
        return 0;
    }
} 
```

# jquery - 为 Flot Pie 兼容性序列化数据

> ID：15523531
> 
> 赞同：1
> 
> 时间：2013-03-20T12:26:19.990
> 
> 标签：jquery, asp.net, json, flot

即使我从服务器传递到客户端的数据与 Flot 接受的数据相同，但它没有被绘制。在我试图解析返回的字符串 JSON 的行上也有一个错误。下面的代码：

```
 //server_processing.aspx.cs
    [WebMethod]
    public static string GetPieData()
    {
        List<PieData> pieData = new List<PieData>();
        pieData.Add(new PieData { label = "A", data = 40 });
        pieData.Add(new PieData { label = "B", data = 40 });
        pieData.Add(new PieData { label = "C", data = 20 });

        var serializer = new JsonSerializer();
        var stringWriter = new StringWriter();
        var writer = new JsonTextWriter(stringWriter);
        writer.QuoteName = false;
        serializer.Serialize(writer, pieData);
        writer.Close();
        var json = stringWriter.ToString();
        return json;
    }

//PieData.cs
[JsonObject(MemberSerialization.OptIn)]
public class PieData
{
    [JsonProperty]
    public string label { get; set; }
    [JsonProperty]
    public int data { get; set; }
}

<%-- Charts.aspx --%>
<script type="text/javascript">
var options = { series: { pie: {show: true} } };
$(document).ready(function () {
    $.ajax({
        type: "POST",
        url: "server_processing.aspx/GetPieData",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            // Replace the div's content with the page method's return.
            var jsObj = [];
            //Error on the line below
            //0x800a03f6 - JavaScript runtime error: Invalid character
            jsObj.push($.parseJSON(msg.d)); // [{label:"A",data:40},{label:"B",data:40},{label:"C",data:20}] 

            $.plot($("#piechart"), jsObj, options);
        }
    });
}); 
```

我对 Flot 折线图做了同样的事情，而且效果很好。有人可以指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:05:06.440

我发现了问题。我注释掉了以前的代码并插入了新的代码以使差异明显。

```
<script type="text/javascript">
var options = { series: { pie: {show: true} } };
$(document).ready(function () {
    $.ajax({
        type: "POST",
        url: "server_processing.aspx/GetPieData",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            //var jsObj = [];
            //jsObj.push($.parseJSON(msg.d));
            var data = ($.parseJSON(msg.d);
            $.plot($("#piechart"), data, options);
        }
    });
});
</script>

//server_processing.aspx.cs
    [WebMethod]
    public static string GetPieData()
    {
        List<PieData> pieData = new List<PieData>();
        pieData.Add(new PieData { label = "A", data = 40 });
        pieData.Add(new PieData { label = "B", data = 40 });
        pieData.Add(new PieData { label = "C", data = 20 });

        JavaScriptSerializer js = new JavaScriptSerializer();
        string returnArray = js.Serialize(pieData);
        return returnArray;

        //var serializer = new JsonSerializer();
        //var stringWriter = new StringWriter();
        //var writer = new JsonTextWriter(stringWriter);
        //writer.QuoteName = false;
        //serializer.Serialize(writer, pieData);
        //writer.Close();
        //var json = stringWriter.ToString();
        //return json;
    } 
```

因为，我将解析后的数据推送到已经初始化的数组中。似乎数据被推送到第一个索引上，这对于 Flot 饼来说是不可接受的格式，因此屏幕上出现异常并且没有饼图。请随时纠正我的解释。

# c++ - alignas 说明符 vs __attribute__(aligned), c++11

> ID：15523537
> 
> 赞同：12
> 
> 时间：2013-03-20T12:26:40.567
> 
> 标签：c++, gcc, c++11, alignment, clang

我目前正在使用 C++11 开发 OS 内核，我遇到了一个问题，我似乎找不到自己的答案。

目前我正在使用编译器特定属性（例如 gcc's `__attribute__(aligned)`）对齐我的分页结构，但是我想改用 C++11 alignas 说明符，在 Clang++ 上这没问题，因为它很乐意接受 4096 对齐作为参数对齐，但是 G++ 没有！

所以首先`alignas specifier`， 和 gcc之间的主要区别是什么`__attribute__(aligned)`，显然两者都确保与特定值对齐，但是 gcc 中的 alignas 说明符似乎有 128 个限制，而属性似乎几乎是无限的，这是为什么呢？

另外，为什么不能将 const 整数传递给 alignas 说明符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T15:08:13.287

从 GCC 支持状态看来，对齐支持在[gcc 4.7](http://gcc.gnu.org/gcc-4.7/cxx0x_status.html)中不完全支持，但它是针对[gcc 4.8](http://gcc.gnu.org/gcc-4.8/cxx0x_status.html)的。`alignas`也被列为 4.8[版本页面](http://gcc.gnu.org/gcc-4.8/changes.html)中新支持的功能。

此外，来自[对齐支持提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2341.pdf)（3.11）：

> 基本对齐由小于或等于所有上下文中实现支持的最大对齐的对齐表示，该对齐等于 alignof(std::max_align_t) (18.1)。
> 
> 扩展对齐由大于 alignof(std::max_align_t) 的对齐表示。是否支持任何扩展对齐以及支持它们的上下文是实现定义的（7.1.6）。具有扩展对齐要求的类型是过度对齐类型。

并且来自同一个文档（7.1.6）：

> 如果常量表达式计算为扩展对齐并且实现在声明的上下文中不支持该对齐，则程序是错误的

这也可能是答案的一部分。我目前无法获得完整的标准，应该有人能够确认这一点。

至于 和 之间的区别`__attribute__(aligned)`，`alignas`我不认为它们在语义上是不同的，但一个只是编译器扩展，而另一个是完全由标准定义的。

要回答您的最后一个问题，`alignas`仅定义为：

```
alignas ( constant-expression ) 
alignas ( type-id ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-17T17:23:14.897

它们在可以定位的位置方面有所不同。**属性**（对齐）可以作为函数的返回类型，但 alignas 不能。从语义上讲，它们是相同的。

# c# - 如何使用 Linq 的索引数组从数组中选择项目？

> ID：15523538
> 
> 赞同：8
> 
> 时间：2013-03-20T12:26:53.527
> 
> 标签：c#, arrays, linq

如何使用 Linq 的索引数组从数组中选择项目？

以下代码有效：

```
String[] A = new String[] { "one", "two", "three", "four" };
int[] idxs = new int[] { 1, 3 };
String[] B = new String[idxs.Length];
for (int i = 0; i < idxs.Length; i++)
{
     B[i] = A[idxs[i]];
}
System.Diagnostics.Debug.WriteLine(String.Join(", ", B)); 
```

输出：

```
 two, four 
```

有没有一种 LINQ 方式（或其他单行）来摆脱 for 循环？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T12:32:01.723

LINQ 方式是这样的：

```
var b = idxs.Select(x => A[x]).ToArray(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T12:34:42.963

您可以将它与[`Select`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)您`index`和您的`A[index]`Like 一起使用：

```
String[] A = new String[] { "one", "two", "three", "four" };
int[] idxs = new int[] { 1, 3 };
var result = idxs.Select(i => A[i]).ToArray();

foreach(var s in result)
  Console.WriteLine(s); 
```

输出将是：

```
two
four 
```

这是一个[`DEMO`](http://ideone.com/Et8WCa).

# mysql - 从访问日志表中计算每小时的访问量

> ID：15523550
> 
> 赞同：0
> 
> 时间：2013-03-20T12:27:37.437
> 
> 标签：mysql

我有一张表格，记录了一些地点的一些访问信息以及时间，也许还有一些关于这个地方的评论，比如：

```
+---------+---------+------------+-----------------------+---------------------+
| visitId | userId  | locationId | comments              | time                |
+---------+---------+------------+-----------------------+---------------------+
|       1 |    3    |     12     | It's a good day here! | 2012-12-12 20:50:12 |
+---------+---------+------------+-----------------------+---------------------+ 
```

我想做的是按小时计算访问组的数量，我想这样生成结果：

```
+------------+-----+-----+-----+-----+-----+-----+-------+------+
| locationId |  0  |  1  |  2  |  3  |  4  |  5  |  ...  |  23  |
+------------+-----+-----+-----+-----+-----+-----+-------+------+
|      12    |  15 |  12 |  34 |  67 |  78 |  89 |  ...  |  34  | 
+------------+-----+-----+-----+-----+-----+-----+-------+------+ 
```

我怎样才能做到这一点？我想评估一整天的访问量差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:39:05.803

这将为您提供每个 locationid 每小时的访问次数

```
SELECT locationId, HOUR(time), COUNT(*)
FROM table
GROUP BY locationId, HOUR(time) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:42:34.193

未经测试，我认为这将起作用：

```
select locationid, hour(time) as hour, count(distinct userid) as usercnt
from table_1
group by locationid, hour; 
```

它不会按照您的建议进行转置，但数据是相同的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:46:02.687

尝试使用如下查询：

```
SELECT  location_id, sum(case when HOUR(time) = 0 then 1 else 0) as '0', 
        sum(case when HOUR(time) = 1 then 1 else 0) as '1',-- till 23
FROM table
GROUP BY location_id 
```

# uitableview - 在 Monotouch 中将 UIImage 绘制到 UITableViewCell 中

> ID：15523552
> 
> 赞同：1
> 
> 时间：2013-03-20T12:27:40.853
> 
> 标签：uitableview, xamarin.ios, cell

所以我尝试了一下 MonoTouch，我想用自定义对象填充 UITableView，目前是一个简单的矩形。这是绘制表格的代码：

```
using System;
using System.Drawing;
using System.Collections.Generic;
using System.Linq;

using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace testProject

{
    [Register ("AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        // class-level declarations
        UIWindow window;
        UITableView table;

    public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        // create a new window instance based on the screen size
        window = new UIWindow (UIScreen.MainScreen.Bounds);

        //make the window white
        var whiteColour = UIColor.FromRGB(255,255,255); 
        window.BackgroundColor = whiteColour;

        //create a UITableView
        table = new UITableView(window.Bounds);
        table.AutoresizingMask = UIViewAutoresizing.All;
        window.Add(table);

                    CellObject newCella = new CellObject();
            UIImage testImage = new UIImage();
            testImage = newCella.DrawCell(window);

            table.CellAt(0).ImageView.Image = testImage;

        // make the window visible
        window.MakeKeyAndVisible ();

        return true;
    }

}
} 
```

还有我正在测试的课程。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Drawing;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
using MonoTouch.CoreGraphics;

namespace testProject
{
    public class CellObject : UIImage
    {
        //class level vars

            /* notes to self - this class will create an object which will be fed into a uitableview cell.
             * 
             * it will house everything needed for the object view, including gestures etc, it will have the following layers:
             * 1: background layer with social optins, vote, twitter, e-mail to friend etc
             * 2: object image layer with gestures
             * 3: object title layer with animation into view to show more when touched and held
             *
            */

        public UIImage DrawCell (UIWindow window) {
            //create a new graphics context
            int width = (int)Math.Ceiling(window.Bounds.Width);
            int height = (int)Math.Ceiling(window.Bounds.Height);
            CGBitmapContext ctx = new CGBitmapContext(IntPtr.Zero, width, height, 8, 4*width, CGColorSpace.CreateDeviceRGB(), CGImageAlphaInfo.PremultipliedFirst);

            //set up colours etc
            CGColor backgroundColour = new CGColor(1f, 0f, 0f, 1f);

            //draw a rectangle
            ctx.SetFillColor(backgroundColour);
            ctx.FillRect(new RectangleF(width / 2, height / 2, width / 2, height / 2));

            UIImage returnedImage = new UIImage();
            returnedImage = FromImage(ctx.ToImage());
            Console.WriteLine(returnedImage.Size.Width);

            return returnedImage;
        }
    }
} 
```

我没有收到任何错误，一切运行，表格视图显示，但 CellObject 类返回的图像未放入单元格中。我试过把它放到一个新的视图中，同样的事情。检查控制台显示返回的图像是预期的宽度。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:33:37.137

您需要`UITableViewSource`在显示任何行之前实施，例如[此处](http://docs.xamarin.com/guides/ios/user_interface/tables/part_2_-_populating_a_table_with_data)。像您正在做的手动设置单元格将不起作用。

我建议在进行自定义绘图之前显示一些简单的文本。刚开始`cell.TextLabel.Text`做一些事情。

# android - 如何从Android中的ListView存储然后传递所有检查项目（HashMap对象项目）的arrayList？

> ID：15523553
> 
> 赞同：0
> 
> 时间：2013-03-20T12:27:45.573
> 
> 标签：android, listview, checkbox, arraylist, android-arrayadapter

大家好，我是 Android 编程新手，需要一些帮助。我有一个由 HashMap 对象组成的列表视图。可以通过选中复选框来选择这些 hashMap 对象。（所以基本上我有一个复选框列表）。我想要做的是将在 ListView 中检查的所有 HashMap 对象（或项目）存储在 ArrayList 中。然后，我想在按下按钮时将此 arrayList 传递给另一个活动。我已经看到了一些人们存储字符串数据的示例，但我需要一些帮助来了解如何将 listView 中的“已检查”HashMap 对象存储到 ArrayList 中。所以最后我想要的是一个 ArrayList，它由在列表中检查过的对象（项目）组成，然后我可以传递。

程序目标是：允许用户根据类别选择歌曲并创建自己的自定义播放列表。将向用户呈现一个类别的歌曲，他们将从该类别中选择他们想要的歌曲，然后按下“下一步”按钮，这会将他们发送到一个新的活动，在那里他们将看到一个新的歌曲类别。在每个类别中，我都尝试存储他们的选择并将其从活动（类别）传递到活动（类别）。但是传递不起作用。我可能正在做一些事情。需要一些建议什么或如何做。-谢谢

一些代码：不是我所知道的最有条理的。android新手，所以我应该改变任何指针或东西

```
 @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.playlist);

    //final ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();

    SongsManager plm = new SongsManager();
    // get all songs from sdcard
    this.songsList = plm.getPlayList();
    TextView label = new TextView(this);
    label.setText("Warm-up");
    label.setTextSize(16);
    label.setBackgroundColor(Color.WHITE);
    label.setTextColor(Color.BLACK);

    final ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();
    // looping through playlist
    for(HashMap hs: songsList){
     if(hs.containsValue("Warm-up/cool down"))
    songsListData.add(hs);
     }

    // NEXT button
    Button btnLoadMore = new Button(this);
    btnLoadMore.setText("Next");
    ListView lv = getListView();
    lv.addHeaderView(label);

// Adding Load More button to lisview at bottom
      lv.addFooterView(btnLoadMore);

    //List<Model> selectedlist = getModel(songsListData);
    ArrayAdapter<Model> adapter = new InteractiveArrayAdapter(this,
        getModel(songsListData));

    setListAdapter(adapter);

    //Listening to Load More button click event

    btnLoadMore.setOnClickListener(new View.OnClickListener() {
    @Override
public void onClick(View arg0) {
      String priorSongs = "priorSongs";
      List<Model> selSongs = getModel(songsListData);
      Intent i = new Intent(WarmUp.this, SlowWalking.class);
      i.putExtra(priorSongs, selSongs);
      startActivity(i); 
}
});

    lv.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {

     // getting listitem index
    int songIndex = position;

    // Starting new intent
    Intent in = new Intent(getApplicationContext(),
                        AndroidBuildingMusicPlayerActivity.class);
    in.putExtra("songIndex", songIndex);
    startActivity(in);
    finish();
            }
        });

    }
    private List<Model> getModel(ArrayList<HashMap<String, String>> songsListData) {
        List<Model> list = new ArrayList<Model>();
        for (HashMap<String, String> map : songsListData)
            for (Entry<String, String> entry : map.entrySet())
                 if (entry.getKey() == "songTitle")
                     list.add(get(entry.getValue()));

        // Initially select one of the items
        //list.get(1).setSelected(true);
        return list;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T09:46:41.710

您必须创建一个扩展 SimpleAdapter 的类适配器，以便它允许您将所有哈希映射放在列表视图中。

# python-2.x - Python2 - 在 None 类型上使用 min/max

> ID：15523555
> 
> 赞同：13
> 
> 时间：2013-03-20T12:27:49.130
> 
> 标签：python-2.x, min, nonetype

我注意到虽然“max”函数在 None 类型上表现良好：

```
In [1]: max(None, 1)
Out[1]: 1 
```

'min' 函数不返回任何内容：

```
In [2]: min(None, 1)
In [3]: 
```

也许是因为 min(None, 1) 没有定义？那么为什么在最大情况下，它返回数字？None 是否被视为'-infinity'？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T12:40:24.960

正如 jamylak 所写，`None`Python shell 根本不会打印。

这很方便，因为*所有函数都返回一些东西*：当没有指定值时，它们返回`None`：

```
>>> def f():
...     print "Hello"
...     
>>> f()
Hello
>>> print f()  # f() returns None!
Hello
None 
```

这就是 Python shell 不打印*返回*的None 值的原因。`print None`但不同的是，它明确要求 Python 打印该`None`值。

* * *

至于比较，`None`不*认为*是-infinity。

Python 2的[一般规则](http://docs.python.org/2/library/stdtypes.html#comparisons)是，无法以任何有意义的方式比较的对象在比较时不会引发异常，而是返回一些任意结果。对于 CPython，任意规则如下：

> 除数字外的不同类型的对象按其类型名称排序；不支持正确比较的相同类型的对象按其地址排序。

Python 3 引发了一个例外，用于无意义的比较`1 > None`，例如通过`max(1, None)`.

* * *

如果确实需要 -infinity，Python 提供`float('-inf')`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T12:29:16.103

它确实返回了一些东西，python shell 只是不打印`None`

```
>>> min(None, 1)
>>> print min(None, 1)
None 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T13:30:25.100

如果你真的想要一个总是比其他值少的值，你需要创建一个小类：

```
class ValueLessThanAllOtherValues(object):
    def __cmp__(self, other):
        return -1

# really only need one of these
ValueLessThanAllOtherValues.instance = ValueLessThanAllOtherValues() 
```

此类将与任何其他类型的值进行比较：

```
tiny = ValueLessThanAllOtherValues.instance
for v in (-100,100,0,"xyzzy",None):
    print(v)
    print(v > tiny)
    print(tiny < v)
    # use builtins
    print(min(tiny,v))
    print(max(tiny,v))
    # does order matter?
    print(min(v,tiny))
    print(max(v,tiny))
    print() 
```

印刷：

```
-100
True
True
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
-100
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
-100

100
True
True
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
100
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
100

0
True
True
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
0
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
0

xyzzy
True
True
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
xyzzy
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
xyzzy

None
True
True
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
None
<__main__.ValueLessThanAllOtherValues object at 0x2247b10>
None 
```

tiny 比它还小！

```
print(tiny < tiny)
True 
```

# java - 在java中制作heroku分析工具

> ID：15523558
> 
> 赞同：0
> 
> 时间：2013-03-20T12:27:54.413
> 
> 标签：java, heroku, jvm, monitoring

我想知道如何开发适当的分析来检查 heroku 平台上的一些东西。检查heroku的网站后，具体链接如：[https](https://devcenter.heroku.com/articles/java-memory-issues) ://devcenter.heroku.com/articles/java-memory-issues ，我想开发自己的显示器真的很难，因为他们说不可能使用工具作为visualvm ,jmap,jstats 等等。由于进程隔离，这是不可能的，但是，这意味着什么？如果我没记错的话，每个 dyno 都有自己的 jvm，所以我们可以访问它，对吧？

如果有人能告诉我一些关于它的事情，我将不胜感激，因为我真的很困惑，而且周围没有太多信息。

另一方面，我一直在我的 heroku 应用程序中检查新的 relic 插件，它工作正常，但我需要连接到 heroku 仪表板来检查它，所以我想避免这种行为并制作我自己的仪表板要了解 heroku 的内部进程（我有几个 dyno 网络和 dyno 工作人员）之间的处理器使用百分比、内存、http 请求（即使将来可能会使用像alertra o nagios 这样的工具）。

我希望你能理解我的目标，我一直在寻找很多关于它的东西，但我很不幸。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:12:28.757

无法使用 , , 等工具的原因是`visualvm`它们`jmap`需要连接到 JVM 上的 TCP 端口，但 dynos 只允许在分配的环境变量`jstat`中指定的单个分配的 HTTP 端口上的传入连接。`$PORT`

您是正确的，Heroku 上的每个 Java 应用程序都有自己的 JVM，而内省它的最简单方法是向您的应用程序添加[Java 代理](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html)。这是有效的，因为它在您的应用程序旁边的测功机内运行。这是 New Relic 的代理所做的，信息被收集并发送给他们的服务，但如果您有兴趣自己制作，这完全有可能（但可能需要一些工作）。

开始之前，您可能想看一下[`heroku-javaagent`](https://github.com/heroku/heroku-javaagent)，这是一个非常简单的 Java 代理，它定期将有关 JVM 的重要统计信息（例如线程、内存等）打印到日志流中。这对您来说可能就足够了，但是您可以随时根据您要收集的信息对其进行调整。此外，您可以让它直接将信息发送到您的仪表板，或者您可以[使用日志流](https://blog.heroku.com/archives/2013/3/19/log2viz)。要开始使用它，请查看[Java 应用程序中的内存问题故障排除文章的](https://devcenter.heroku.com/articles/java-memory-issues)[内存日志记录代理](https://devcenter.heroku.com/articles/java-memory-issues#memory-logging-agent)部分。

# cloudbees - 在 CloudBees 上部署 Play2 应用程序期间出现错误 500

> ID：15523559
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:27:54.583
> 
> 标签：cloudbees

*我刚刚使用ClickStart*功能（我认为它是 2.1 版）基于 Play2 模板在 CloudBees 上创建了一个新应用程序。第一个构建 - 自动启动 - 成功。然后，我做了一个简单的提交（只是在一个`.scala.html`文件中更改了一些 HTML 代码），但是在部署期间构建失败了。

以下是日志：

```
[info] Done packaging.

Your application is ready in /scratch/jenkins/workspace/foo-bar/dist/helloworld-1.0.zip

[success] Total time: 20 s, completed Mar 20, 2013 7:51:12 AM
[cloudbees-deployer] Deploying as (jenkins) to the *** account
[cloudbees-deployer] Deploying foo-bar
[cloudbees-deployer]   Resolved from workspace as /scratch/jenkins/workspace/foo-bar/dist/helloworld-1.0.zip
[cloudbees-deployer] Deploying via API server at https://api.cloudbees.com/api
[cloudbees-deployer] 0 MB
[cloudbees-deployer] 1 MB
...
[cloudbees-deployer] 21 MB
[cloudbees-deployer] 22 MB
com.cloudbees.plugins.deployer.exceptions.DeployException: remote file operation failed: /scratch/jenkins/workspace/foo-bar/dist/helloworld-1.0.zip at hudson.remoting.Channel@5446315a:s-b5547802
    at com.cloudbees.plugins.deployer.engines.Engine.process(Engine.java:162)
    at com.cloudbees.plugins.deployer.engines.Engine.perform(Engine.java:96)
    at com.cloudbees.plugins.deployer.DeployPublisher.perform(DeployPublisher.java:95)
    at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
    at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:728)
    at hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:703)
    at hudson.model.Build$BuildExecution.post2(Build.java:183)
    at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:650)
    at hudson.model.Run.execute(Run.java:1530)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:237)
Caused by: hudson.util.IOException2: remote file operation failed: /scratch/jenkins/workspace/foo-bar/dist/helloworld-1.0.zip at hudson.remoting.Channel@5446315a:s-b5547802
    at hudson.FilePath.act(FilePath.java:838)
    at hudson.FilePath.act(FilePath.java:824)
    at com.cloudbees.plugins.deployer.engines.Engine.process(Engine.java:156)
    ... 11 more
Caused by: hudson.remoting.ProxyException: hudson.util.IOException2: 500 - <html>
<head><title>500 Internal Server Error</title></head>
<body bgcolor="white">
<center><h1>500 Internal Server Error</h1></center>
<hr><center>nginx/1.3.13</center>
</body>
</html>

    at com.cloudbees.plugins.deployer.impl.run.RunEngineImpl$DeployFileCallable.invoke(RunEngineImpl.java:328)
    at com.cloudbees.plugins.deployer.impl.run.RunEngineImpl$DeployFileCallable.invoke(RunEngineImpl.java:264)
    at com.cloudbees.plugins.deployer.engines.Engine$FingerprintingWrapper.invoke(Engine.java:248)
    at com.cloudbees.plugins.deployer.engines.Engine$FingerprintingWrapper.invoke(Engine.java:236)
    at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2236)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: hudson.remoting.ProxyException: com.cloudbees.api.BeesClientException: 500 - <html>
<head><title>500 Internal Server Error</title></head>
<body bgcolor="white">
<center><h1>500 Internal Server Error</h1></center>
<hr><center>nginx/1.3.13</center>
</body>
</html>

    at com.cloudbees.api.BeesClientBase.processError(BeesClientBase.java:270)
    at com.cloudbees.api.BeesClientBase.executeUpload(BeesClientBase.java:327)
    at com.cloudbees.api.BeesClient.applicationDeployArchive(BeesClient.java:576)
    at com.cloudbees.plugins.deployer.impl.run.RunEngineImpl$DeployFileCallable.invoke(RunEngineImpl.java:320)
    ... 13 more
Build step 'Deploy applications' marked build as failure
Finished: FAILURE 
```

我不确定我能做些什么来解决这个问题？任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:07:14.870

看起来像部署端点的临时放置。只需重试部署（使用“立即部署”），应该没问题

# java - 软件javaFX的结构

> ID：15523562
> 
> 赞同：0
> 
> 时间：2013-03-20T12:28:09.500
> 
> 标签：java, javafx

我是 JavaFX 编程的新手，我在 BodyController.java 文件中有主控制器，我用其他两个驱动程序加载 FXML。

RightPanel.java 和 InsertClient.java

如果我在 InsertClient.java 控制器的方法中，我如何访问 RightPanel.java 的方法

问候

# javascript - CRM 2011 - Javascript 按钮 - 更改所有实体记录上的字段

> ID：15523566
> 
> 赞同：1
> 
> 时间：2013-03-20T12:28:19.287
> 
> 标签：javascript, button, dynamics-crm-2011, workbench

我对 javascript 的经验很少，我正在尝试选择多个实体并将字段从 true 更改为 false，反之亦然。我试图在 SDK 上查看 JS 的示例，但没有发现我能理解的内容，有人可以帮我举个例子吗？

更新：我想我无法解释。因此，当我在视图中时，我需要一个按钮来更改所有记录中的特定字段，而无需选择记录，我可以使用[Ribbon Workbench](http://www.develop1.net/public/page/Ribbon-Workbench-for-Dynamics-CRM-2011.aspx)通过工作流来完成。

到目前为止，我可以通过 XRM 更改该值，但前提是我打开了该记录的表单。

```
 function test() 
{
var id = Xrm.Page.data.entity.getId();
field = Xrm.Page.getAttribute("new_onoff").getValue();
Xrm.Page.getAttribute("new_onoff").setValue("offviaJava");
alert(id + field);
} 
```

目的是对 VIEW 中的每条记录执行相同的操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:56:43.583

要更改同一实体或多个实体的多条记录，最好的方法是使用工作流或插件。但我对 Workflow 的投票很容易做出这种类型的更改。[在这里](http://info.profad.com/bid/63154/Creating-Workflows-in-Microsoft-Dynamics-CRM-2011)查看一个例子。

编辑：根据您的更新，我建议另一种选择：

```
<Actions>
  <JavaScriptFunction Library="$webresource:AccountFormLibrar" FunctionName="CreateNewAccount">
  <CrmParameter Value="SelectedControlSelectedItemIds"/></JavaScriptFunction>
</Actions> 
```

```
function CreateNewAccount (SelectedRecordGUID) {
 //the parameter will receive all GUIDS in comma separated
} 
```

您必须添加功能区按钮并添加操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:19:35.307

在 Dynamics CRM 中有两种查看数据的方式，网格视图（您可以同时查看多个实例）和实体表单视图（您可以在当前打开的窗口或选项卡中查看一个实例的数据）。使用 javascript 更改表单视图上的数据、外观和其他操作很容易，但听起来您正在查看网格视图，因为您提到了多项选择。

我认为您不应该使用 javascript，而是查看对话框和工作流程。工作流是在后台运行的异步操作，无需任何用户输入。它可以做很多开箱即用的事情，您也可以添加自定义 .NET 代码来更改行为。对话框类似，但收集用户信息作为其操作的输入（如果用户需要做出选择或输入随时间变化的内容，则很有用）。

您可以通过选择一行或多行并单击工作流按钮来手动运行工作流。对话的类似过程。

详细信息：[Microsoft Dynamics CRM 的流程、工作流和对话框](http://msdn.microsoft.com/en-us/library/gg309471.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:51:02.320

好的，我按如下方式解决了我的问题，因为我无法通过使用将自己限制在页面在视图中提供的 50 条记录 `SelectedControlSelectedAllItemIds`，因为 xml 总共只获取 50 个 guid。所以现在按钮调用 ASP 页面的 JAVASCRIPT URL，这是 c# 中的代码：

```
 EntityCollection retrieved = GetInformacaoDB(new_teste.EntityLogicalName.ToString());

                    DataSet ds1 = new DataSet();

                    DataTable dt = new DataTable("List");
                    dt.Clear();
                    dt.Columns.Add(new DataColumn("Description", typeof(string)));

                    foreach (var c in retrieved.Entities)
                    {    
                            GridView1.Visible = false;                             
                            DataRow dr = dt.NewRow();
                            dr["Description"] = c.Attributes["new_testid"];

                             object _test = c.Attributes["new_testid"];

                               string testGuid = _test.ToString();

                                Guid _testId = new Guid(testGuid);

                                Entity EntityName = new EntityName("new_test");

                                ColumnSet attributes = new ColumnSet(new string[] { "new_testid" });

                                EntityName = _orgService.Retrieve(EntityName.LogicalName, _testId, attributes);

                                entidade["new_onoff"] = "OffViaWebService";

                                _orgService.Update(EntityName); 

                            dt.Rows.Add(dr);

                    }
                    ds1.Tables.Add(dt);
                    GridView1.DataSource = ds1;
                    GridView1.DataBind();
                    Cache["Data"] = ds1; 
```

# vba - VBA Outlook 编程

> ID：15523572
> 
> 赞同：0
> 
> 时间：2013-03-20T12:28:31.947
> 
> 标签：vba, outlook

这是我想要实现的目标。

我的 BlackBerry 会自动将约会添加到我的日记中。

然后我想在创建日历项目时自动：

1) 拿起任何带有前缀“C”的约会。

2）根据预约地点对预约进行分类；“来电”和“去电”=类别“通话”，“未接电话”=类别“未接电话”

3) 重命名约会，去掉“C.”前缀

4）现在将“通话”类别中的任何约会移至名为“通话记录”的子日历

5）我希望这个过程在添加新约会时自动启动，而不是手动宏或提醒驱动。

我已尝试修改在网络上其他地方找到的以下流程....但对我不起作用。

```
Private Sub Application_Reminder(ByVal Item As Object)
If Item.subject = "Process Calls" Then
' Define variables
Dim objCalendar As Outlook.folder
Dim objItems As Outlook.Items
Dim objAppt As Outlook.AppointmentItem
Dim strRestriction As String
Dim objFinalItems As Outlook.Items
Dim myolApp As Outlook.Application
' Set strRestriction to be only calls
strRestriction = "@SQL= (""urn:schemas:httpmail:subject"" LIKE '@Call.%' OR ""urn:schemas:httpmail:subject"" LIKE 'C.%' OR ""urn:schemas:httpmail:subject"" LIKE '@Call in%' OR ""urn:schemas:httpmail:subject"" LIKE '@Call%') AND ""urn:schemas-microsoft-com:office:office#Keywords"" 'Phone call'"
' Set the objCalendar and objItems items
Set objCalendar = Application.Session.GetDefaultFolder(olFolderCalendar)
Set objItems = objCalendar.Items
Set objFinalItems = objItems.Restrict(strRestriction)
Set myolApp = CreateObject("Outlook.Application")
For Each objAppt In objFinalItems
' Debugging
' Debug.Print objAppt.Start, objAppt.Subject, objAppt.Categories
' Assign the category to the appointments
If objAppt.Location = "Missed Call " Then
objAppt.Categories = "S. CALL MISSED."
ElseIf objAppt.Location = "Incoming Call " Then
objAppt.Categories = "S. CALL RECEIVED."
Else
objAppt.Categories = "S. CALL MADE."
End If
objAppt.Save
Next
' Rename Entry
Dim iItemsUpdated As Integer
Dim strTemp As String
iItemsUpdated = 0
For Each aItem In objCalendar.Items
If Mid(aItem.subject, 1, 2) = "C." Then
strTemp = Mid(aItem.subject, 4, Len(aItem.subject) - 4)
aItem.subject = strTemp
iItemsUpdated = iItemsUpdated + 1
End If
aItem.Save
Next aItem
MsgBox iItemsUpdated & " of " & objCalendar.Items.Count & " Meetings Updated"
End If
End Sub 
```

* * *

```
Private Sub Application_Reminder(ByVal Item As Object)
If Item.subject = "Move Calls" Then
Public Sub MoveACallLog()
Dim objOL As Outlook.Application
Dim objNS As Outlook.NameSpace
Dim objAppt As Outlook.Items
Dim objFolder As Outlook.MAPIFolder
On Error Resume Next
Set objOL = CreateObject("Outlook.Application")
Set objNS = objOL.GetNamespace("MAPI")
Set objFolder = objNS.GetDefaultFolder(olFolderCalendar)
Set objAppt = objFolder.Items
' move to a calendar in an archive data file
Set CalFolder = GetFolderPath("\\stephen@gazard.net\Calendar\Call Log")
For i = objAppt.Count To 1 Step -1
If objAppt(i).Categories = "Calls" Then
objAppt(i).Move CalFolder
End If
Next i
Set objAppt = Nothing
Set objFolder = Nothing
Set objOL = Nothing
Set objNS = Nothing
End Sub
Function GetFolderPath(ByVal FolderPath As String) As Outlook.folder
Dim oFolder As Outlook.folder
Dim FoldersArray As Variant
Dim i As Integer
On Error GoTo GetFolderPath_Error
If Left(FolderPath, 2) = "\\" Then
FolderPath = Right(FolderPath, Len(FolderPath) - 2)
End If
'Convert folderpath to array
FoldersArray = Split(FolderPath, "\")
Set oFolder = Application.Session.Folders.Item(FoldersArray(0))
If Not oFolder Is Nothing Then
For i = 1 To UBound(FoldersArray, 1)
Dim SubFolders As Outlook.Folders
Set SubFolders = oFolder.Folders
Set oFolder = SubFolders.Item(FoldersArray(i))
If oFolder Is Nothing Then
Set GetFolderPath = Nothing
End If
Next
End If
'Return the oFolder
Set GetFolderPath = oFolder
Exit Function
GetFolderPath_Error:
Set GetFolderPath = Nothing
Exit Function
End Function
Function GetCurrentItem() As Object
Dim objApp As Outlook.Application
Set objApp = Application
On Error Resume Next
Select Case TypeName(objApp.ActiveWindow)
Case "Explorer"
Set GetCurrentItem = objApp.ActiveExplorer.Selection.Item(1)
Case "Inspector"
Set GetCurrentItem = objApp.ActiveInspector.CurrentItem
End Select
Set objApp = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:02:04.917

我想你想要这样的东西....

```
Dim WithEvents mainCal As Items
Dim CallLogCal As Folder

Private Sub Application_Startup()

   Dim NS As Outlook.NameSpace
   Set NS = Application.GetNamespace("MAPI")
   Set mainCal = NS.GetDefaultFolder(olFolderCalendar).Items
   Set CallLogCal = NS.GetDefaultFolder(olFolderCalendar).Folders("Call Log")
   Set NS = Nothing

End Sub

Private Sub mainCal_ItemAdd(ByVal Item As Object)

    MsgBox "You added a new item into the calendar"

    If Mid(Item.Subject, 1, 2) = "C." Then

        MsgBox "Event started with a C."

        Item.Subject = Mid(Item.Subject, 4, Len(Item.Subject) - 4)

        If Item.Location = "Missed Call " Then
            Item.Categories = "S. CALL MISSED."
            MsgBox "Call Missed Added"

        ElseIf Item.Location = "Incoming Call " Then
            Item.Categories = "S. CALL RECEIVED."
            MsgBox "Call Received Added"

        Else
            Item.Categories = "S. CALL MADE."
            MsgBox "Call Made Added"

        End If

        Item.Save

        Item.Move CallLogCal

    End If

End Sub 
```

您显然希望在最终版本中删除所有 MsgBox，但这将帮助您了解正在发生的事情。

小心，

标记。

# sql - 从链接表具有值的表中获取所有行

> ID：15523573
> 
> 赞同：0
> 
> 时间：2013-03-20T12:28:39.150
> 
> 标签：sql

我正在尝试从 MySQL 中的两个表中获取列表。通过查看artist_albums_link -> artist_uid 并匹配到artist_albums。该列表应包含相同的专辑，但还应包含用户没有的艺术家的所有专辑。

user_uid = '5' 的所需结果

```
album_uid       artist_uid                      title       user_uid
album:another   artist:00N1TiCLsiP8IE24hw0rl9   yahoo       5
album:test      artist:00N1TiCLsiP8IE24hw0rl9   Test        5
album:notinlist artist:00N1TiCLsiP8IE24hw0rl9   add this    null 
```

这是下面的数据表。注意用户 '5' 有两个专辑链接，但是因为艺术家还有一张专辑，所以它也被显示了。相册“未显示”不在用户相册链接中，因此不会出现在列表中。

表：艺术家_专辑

```
album_uid       artist_uid                      title
album:another   artist:00N1TiCLsiP8IE24hw0rl9   yahoo   
album:noshow    artist:00sazWvoTLOqg5MFwC68Um   not show    
album:notinlist artist:00N1TiCLsiP8IE24hw0rl9⇥  add this    
album:test      artist:00N1TiCLsiP8IE24hw0rl9   Test 
```

表：artist_albums_link

```
uid user_uid    artist_uid                      album_uid   
1   5           artist:00N1TiCLsiP8IE24hw0rl9   album:test  
2   6           artist:00N1TiCLsiP8IE24hw0rl9   album:test  
3   5           artist:00N1TiCLsiP8IE24hw0rl9   album:another 
```

尝试使用 join 获取空值但没有成功。该行的新值 a.updated (timestamp) 是正确的，但专辑“album:notinlist”的值 b.found (timestamp) 是错误的，此帖子在 Artist_albums_link 中不存在。

```
SELECT  a.album_uid, a.artist_uid, a.title, a.updated, b.user_uid,  b.found
FROM  artist_albums a LEFT OUTER JOIN artist_albums_link b ON a.artist_uid = b.artist_uid
WHERE b.user_uid = '5' 
```

结果：

```
album_uid       artist_uid                      title       updated                 user_uid    found
album:another   artist:00N1TiCLsiP8IE24hw0rl9   yahoo       2013-03-20 11:29:08     5           2013-03-18 11:24:47
album:another   artist:00N1TiCLsiP8IE24hw0rl9   yahoo       2013-03-20 11:29:08     5           2013-03-19 11:29:59
album:notinlist artist:00N1TiCLsiP8IE24hw0rl9   add this    2013-03-15 11:41:20     5           2013-03-18 11:24:47
album:notinlist artist:00N1TiCLsiP8IE24hw0rl9   add this    2013-03-15 11:41:20     5           2013-03-19 11:29:59
album:test      artist:00N1TiCLsiP8IE24hw0rl9   Test        2013-03-20 11:23:41     5           2013-03-18 11:24:47
album:test      artist:00N1TiCLsiP8IE24hw0rl9   Test        2013-03-20 11:23:41     5           2013-03-19 11:29:59 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:35:20.093

您可以尝试以下代码：

```
SELECT a.album_uid, a.artist_uid, a.title, b.user_uid
FROM  artists_albums a, artist_albums_link b
WHERE a.artist_uid = b.artist_uid  AND b.user_uid = 5; 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:34:09.737

终于找到了有用的东西。

```
SELECT a.album_uid, a.artist_uid, a.title, a.updated, b.user_uid, b.found
FROM artist_albums AS a
LEFT OUTER JOIN artist_albums_link AS b ON a.album_uid = b.album_uid
WHERE EXISTS (SELECT artist_uid FROM artist_albums_link WHERE artist_uid = a.artist_uid ) AND (b.user_uid = '5' OR b.user_uid is null) 
```

# node.js - 持久调用 AfterWork 中的回调段错误

> ID：15523582
> 
> 赞同：2
> 
> 时间：2013-03-20T12:29:04.973
> 
> 标签：node.js, v8

下面的代码在 OS X 中工作，但是当我在 Ubuntu 中编译和运行它时，调用`baton->callback`函数时出现段错误。似乎`Persistent<Function>`不会持续超过初始`Aysnc::Start`方法。

如果是这种情况，**为什么它可以在 OS X 上运行**？ **我该怎么做才能让它跨平台工作**？

**如果我做错了**，我需要做什么才能使我的`callback`callable from `AfterWork`？

```
// Async.h

#include <v8.h>
#include <node.h>
#include <string>

using namespace node;
using namespace v8;

class Async : public ObjectWrap {
  public:
    static Persistent<Function> constructor_template;
    static void Initialize(Handle<v8::Object> target);

  protected:
    Async() {}
    ~Async() {}

    static Handle<Value> Start(const Arguments& args);
    static void Work(uv_work_t* req);
    static void AfterWork(uv_work_t* req);
  private:

    struct Baton {
      uv_work_t request;
      Persistent<Function> callback;
    };
};

// Async.cc
Handle<Value> Async::Start(const Arguments& args) {
  HandleScope scope;

  if(args.Length() == 0 || !args[0]->IsFunction()) {
    return ThrowException(Exception::Error(String::New("Callback is required and must be a Function.")));
  }

  Baton *baton = new Baton();
  baton->request.data = baton;
  baton->callback = Persistent<Function>::New(Handle<Function>::Cast(args[0]));

  uv_queue_work(uv_default_loop(), &baton->request, Work, (uv_after_work_cb)AfterWork);

  return Undefined();
}

void Async::Work(uv_work_t *req) {
  printf("Work\n");
}

void Async::AfterWork(uv_work_t *req) {
  printf("AfterWork\n");
  HandleScope scope;

  Baton *baton = static_cast<Baton *>(req->data);
  delete req;

    Local<Value> argv[1] = {
      Local<Value>::New(Null());
    };

    TryCatch try_catch;
    // Segfault occurs here
    baton->callback->Call(Context::GetCurrent()->Global(), 1, argv);
    if (try_catch.HasCaught()) {
      node::FatalException(try_catch);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T23:27:27.437

我不熟悉`libuv`，但鉴于您对 的定义`Baton`，并假设`uv_work_t*`传入的内容与传入`AfterWork()`的内容相同`uv_queue_work()`，您的`delete req`语句实际上删除了您的`Baton`结构，然后您尝试从中读取该`callback`字段。`delete req`我会尝试`delete baton`在`AfterWork()`.

# jquery - 查询 REST 服务的 JSONP 问题

> ID：15523584
> 
> 赞同：2
> 
> 时间：2013-03-20T12:29:13.693
> 
> 标签：jquery, rest, jsonp

我在使用 JQuery 的 JSONP 时遇到问题：

[http://jsfiddle.net/emepyc/tuCvT/](http://jsfiddle.net/emepyc/tuCvT/)

```
$.ajax({
    url           : url,
    dataType      : 'jsonp',
    contentType   : "application/json",
    jsonpCallback : 'cback',
    crossDomain   : true,
    jsonp         : false,
    success       : function(json) {console.log("RESP: " + json)}, 
    error         : function(error) {console.log("ERROR: " + error.message)}
}); 
```

使用 Chrome 的开发人员工具进行调试，我可以看到 REST 服务器正在将数据传回，但始终调用“错误”回调。我已经尝试了几种选项组合，但没有运气。

有任何想法吗？

已解决：我使用了一个错误的 url，它要求一个 json（不是 jsonp）响应。固定版本在这里：

[http://jsfiddle.net/emepyc/tuCvT/1/](http://jsfiddle.net/emepyc/tuCvT/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:18:46.480

已解决：我使用了一个错误的 url，它要求一个 json（不是 jsonp）响应。固定版本在这里：

[http://jsfiddle.net/emepyc/tuCvT/1/](http://jsfiddle.net/emepyc/tuCvT/1/)

```
var url = prefix + species + "/" + chr + ":" + fromPos + "-" + toPos + ".jsonp?feature=gene;callback=" + cback; 
```

# php - PHP POST 打印复选框条目：我在论坛上找不到任何东西

> ID：15523587
> 
> 赞同：2
> 
> 时间：2013-03-20T12:29:16.980
> 
> 标签：php, arrays, checkbox

`areas[]`我已经搜索了论坛 - 在这里和其他地方 - 试图找到一种方法从 POST 表单中打印出选中的选项，该表单使用名称为VALUE 开始的复选框组`1`并继续另外 6 个选项。因此，在每种情况下，NAME 都是`areas[]`但 VALUE 从 1 变为 6。

（此表格中的所有其他条目 - 例如姓名、电话号码等 - 都可以毫无问题地结转。）

充其量，当我尝试时（举一个我尝试过的例子）

```
$arr = $_POST[areas] 
```

然后尝试为每个数组，打印单词“Array”。伟大的。

如果我尝试 `$_POST['areas']`，我会收到服务器错误。我在论坛上发现的很多东西都会导致服务器错误。

我已经尝试了所有明显的东西 - 循环`for`而不是`for each`... 充其量我得到`Array`或者，更奇怪的是，`A`. 我总是在测试中选择 3 个选项。

我正在使用 PHP 5.3.8。

任何人都可以提出一些可能有用的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:42:51.840

如果其值在 $_POST['areas'] 中，则必须检查显示的每个复选框：

```
$areas = $_POST['areas']; // if you get an error here, check your code cause it must work
//Some code...
$checked = '';
if (in_array($value, $areas)){
    $checked = 'checked="CHECKED"';
}
echo '<input type="checkbox" name="areas[]" '.$checked.' value="'.$value.'"/>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:43:09.937

您的问题很可能与 html 返回复选框值的方式有关。

如果一个复选框被签入，它的值被返回，如果它没有被签入，则不返回任何值。

在一种情况下，您将从称为`name='colours[]'`您的值的复选框中选择颜色，如下所示：（第一行是选择，第二行是 php 中返回的数组）

```
[x] red  [ ] green  [ ] blue  [x] yellow  [ ] black  [ ] white

    array('red','yellow')

[ ] red  [ ] green  [ ] blue  [x] yellow  [ ] black  [x] white

    array('yellow','white')

[ ] red  [ ] green  [ ] blue  [ ] yellow  [ ] black  [ ] white

    null (no array returned) 
```

一种方法是为每个选项使用不同的名称，并以这种样式检查您的值：

```
$red = isset($_POST['ck_red']);
$green = isset($_POST['ck_green']);
... 
```

当然，如果您将红色复选框定义为`name='ck_red'`等。

**编辑**
（您的代码如下）

html:

```
<INPUT TYPE="CHECKBOX" NAME="areas[]" VALUE="1">The Homeless</INPUT><BR />
<INPUT TYPE="CHECKBOX" NAME="areas[]" VALUE="2">The Elderly</INPUT><BR />
<INPUT TYPE="CHECKBOX" NAME="areas[]" VALUE="3">Refugees</INPUT><BR />
<INPUT TYPE="CHECKBOX" NAME="areas[]" VALUE="4">The handicapped</INPUT><BR /> 
```

php:

```
$areas[] = "$_POST[areas]"; 
foreach ($areas as $value) { 
    echo $value . " "; 
} 
```

**答案**：你有一个错误是在分配中`$areas[] = "$_POST[areas]";`，即在使用`"`周围`$_POST[areas]`- 通过这样做你告诉解析器你想知道变量 $_POST[areas] 的文本值，它是一个数组和 php 的方式处理它是返回 TEXT **'array'**而不是（例如在 javascript 中）由逗号分隔的元素列表。另一个错误是，尽管它可以按您的方式工作，但您引用的是未定义的常量`areas`而不是字符串文字`'areas'`（`$_POST['areas']`请注意键名周围的单引号`'`。最后一个错误是分配`$_POST['areas']`to`$areas[]`而不是`$areas`（没有`[]`）。你在那里做的是你正在将数组的一个新元素添加到你要为其分配值的数组（区域），`$_POST['areas']`以防万一它没有第一个错误（`"`）它会创建二维数组`areas => array(array('a','b','c'))`

修复（PHP）：

```
$areas = $_POST['areas'];
foreach ($areas as $value) { 
    echo $value . " "; 
} 
```

# mysql - MySQL INSERT INTO ... 值和选择

> ID：15523597
> 
> 赞同：69
> 
> 时间：2013-03-20T12:29:51.547
> 
> 标签：mysql, sql, select, insert

有没有办法插入预设值和我从选择查询中获得的值？例如：

```
INSERT INTO table1 VALUES ("A string", 5, [int]). 
```

我有“A string”的值和数字 5，但我必须从这样的选择中找到 [int] 值：

```
SELECT idTable2
FROM table2
WHERE ... 
```

这给了我将 ID 放入 table1 中。

如何将其合并到一个语句中？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-03-20T12:34:02.807

使用`insert ... select`查询，并将已知值放入`select`：

```
insert into table1
select 'A string', 5, idTable2
from table2
where ... 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2013-03-20T12:34:22.073

只需在此处使用子查询，例如：

```
INSERT INTO table1 VALUES ("A string", 5, (SELECT ...)). 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-02-16T11:03:16.863

```

插入表名 1
            （ID，
             姓名，
             地址，
             联系电话）
SELECT id、name、address、contact_number FROM table_name2；   

```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-20T13:06:40.800

试试这个

```
INSERT INTO TABLE1 (COL1 , COL2,COL3) values
('A STRING' , 5 , (select idTable2 from Table2) )
where ... 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-20T13:37:08.323

所有其他答案都解决了这个问题，我的答案与其他答案的工作方式相同，但只是以一种更具教学性的方式（这适用于 MySQL ......不知道其他 SQL 服务器）：

```
INSERT INTO table1 SET 
  stringColumn  = 'A String', 
  numericColumn = 5, 
  selectColumn  = (SELECT idTable2 FROM table2 WHERE ...); 
```

您可以参考 MySQL 文档：[INSERT Syntax](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-20T12:34:46.630

```
INSERT INTO table1 
SELECT "A string", 5, idTable2
FROM table2
WHERE ... 
```

见：[http ://dev.mysql.com/doc/refman/5.6/en/insert-select.html](http://dev.mysql.com/doc/refman/5.6/en/insert-select.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-20T12:33:08.330

尝试以下操作：

```
INSERT INTO table1 
SELECT 'A string', 5, idTable2 idTable2 FROM table2 WHERE ... 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-20T12:36:20.437

```
INSERT INTO table1 (col1, col2)
SELECT "a string", 5, TheNameOfTheFieldInTable2
FROM table2 where ... 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-20T12:34:27.817

试试这个：

```
INSERT INTO table1 SELECT "A string", 5, idTable2 FROM table2 WHERE ... 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-06T13:06:24.940

```
INSERT INTO table1(Table2Id, KeyTypeEnumId, SortOrder, TenantId)
    SELECT Id, 1, 1, TenantId
    FROM table2
    WHERE WebsitePageTypeEnumId = 10 AND ElementTypeEnumId = 16 
```

# android - 响应式网站在移动设备上扩展至 200%

> ID：15523600
> 
> 赞同：1
> 
> 时间：2013-03-20T12:30:06.963
> 
> 标签：android, iphone, mobile, responsive-design

**编辑：**

在许多设备上进行了进一步测试并包括一个图形标尺来测量屏幕，似乎整个站点都被缩放到 200%。我尝试将 maximum-scale=1 添加到视口元标记，但这只会阻止缩放，而不是已经应该为 1 的初始比例。还尝试将初始比例减小到 1 以下，但没有区别。注意：缩放是关闭 iphone 常规设置。

* * *

在我们新的响应式站点上，我们有一个 300 像素 X 75 像素的谷歌双击横幅。我正在测试的 iphone4 屏幕（chrome、sarafri）的分辨率为 640x960，但横幅明显宽于 300 像素。刚刚检查了一个联系（chrome），它也比它应该的大。在一个站点上，它以正确的大小显示，所以我认为没有任何媒体查询可以扩大它。

我已经包含了元标记： `<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">`

任何关于为什么它比它应该更大的想法将不胜感激！

![它显示为以下屏幕截图：](../Images/d3cec0eb56f524a427a42e9817e25200.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:00:48.577

iPhone 4 显示屏的像素数是初代 iPhone 的四倍。为了防止移动网站看起来很小，它会将它们放大 200%。

您将横幅导出为什么文件类型？iPhone 通常不喜欢位图图像，有时甚至不喜欢 HTML5 画布。

您是否尝试过设置最大比例并阻止用户缩放？您的描述表明已设置最大比例，但您提供的代码显示最小？

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

# android - Android SQLite 从表中删除行，其中 2 个参数

> ID：15523602
> 
> 赞同：10
> 
> 时间：2013-03-20T12:30:17.970
> 
> 标签：android, sqlite, row, where

这是我的数据库：

```
// the names for database columns
    public final static String TABLE_NAME = "vremena";
    public final static String TABLE_COLUMN_ID = "_id";
    public final static String TABLE_COLUMN_ONE = "dan";
    public final static String TABLE_COLUMN_TWO = "vrijeme"; 
```

我正在尝试创建一个采用 2 个参数并从数据库中删除选定行的方法：

```
public void delete(String dan, int vrijeme){
    db.delete(TABLE_NAME, TABLE_COLUMN_ONE+"="+dan, TABLE_COLUMN_TWO+"="+vrijeme);
    } 
```

收到此错误：

```
The method delete(String, String, String[]) in the type SQLiteDatabase is not applicable for the arguments (String, String, String) 
```

我知道我在删除方法中做错了什么。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-20T12:33:30.217

查看 API 文档：

[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

```
delete(String table, String whereClause, String[] whereArgs)
Convenience method for deleting rows in the database. 
```

你应该做这个：

```
public void delete(String dan, int vrijeme){
    db.delete(TABLE_NAME, 
            TABLE_COLUMN_ONE + " = ? AND " + TABLE_COLUMN_TWO + " = ?", 
            new String[] {dan, vrijeme+""});
} 
```

# asp.net - 与服务器通信时发生错误

> ID：15523605
> 
> 赞同：2
> 
> 时间：2013-03-20T12:30:26.787
> 
> 标签：asp.net, json, jquery-jtable

我在 jquery modile 的代码中使用 jTable，我从查询字符串中获取参数并绑定到 jtable，但我收到错误：与服务器通信时发生错误。

这是我的代码

```
 <script type="text/javascript">
            $(document).delegate('.ui-page', 'pageshow', function () {
                $('#ResultContainer').jtable({
                    title: 'Search List',
                    paging: true, //Enables paging
                    pageSize: 10, //Actually this is not needed since default value is 10.
                    sorting: true, //Enables sorting
                    actions: {
                        listAction: "SearchResult.aspx/GetSearch"

                    },
                    fields: {
                        Ref: {
                            title: "Ref",
                            width: '30%'
                        },
                        Trademark: {
                            title: 'Trademark',
                            width: '30%'
                        }
                    }
                });
                $('#ResultContainer').jtable('load', {
                    org: '<%= Request["org"] %> ',
                    catchword: ('<%= Request["tm"] %> ')
                });
            }); 
```

我的网络方法是

```
[WebMethod(EnableSession = true)]
public static object GetSearch(string org, string catchword, int jtStartIndex, int jtPageSize, string jtSorting)
{
    List<Coverage> tm = new List<Coverage>();
    try
    {
        //Get data from database
        using (ORepository repository = new ORepository())
        {
            tm = repository.getCoveragebyTM(catchword, org,0,10,"catchword");
            int cnt = tm.Count;
            return new { Result = "OK", Records = tm, TotalRecordCount = cnt };
        }
    }
    catch (SqlException ex)
    {
        return new { Result = "ERROR", Message = ex.Message };
    }
} 
```

任何人都可以请帮助我。如何在页面加载时调用 `$('#ResultContainer').jtable('load', {..` ？

编辑：

我在 System.Web.Script.Services.WebServiceMethodData.CallMethod(Object target, IDictionary `2 parameters)\r\n at System.Web.Script.Services.WebServiceMethodData.CallMethodFromRawParams(Object target, IDictionary`2 参数）\r\n 在 System.Web.Script.Services.RestHandler.InvokeMethod（HttpContext 上下文，WebServiceMethodData methodData，IDictionary`2 rawParams）\r\n 在 System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext上下文，WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException"}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:09:52.990

您没有为 org 和流行语参数传递任何值。您可以使用 listAction: "SearchResult.aspx/GetSearch?org=asd&catchword=asd"

此外，您可以使用 firebug 或 chrome dev 工具检查网络包以查看错误详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T03:38:32.230

JTable执行结果，有两种状态标识，ok，others。当状态是！好的时候你的消息如果是非数字状态就会报这个错误。推荐作为在源代码中使用数字识别和校正的状态背景。

```
 String error="{\"Result\":\"ERROR\",\"Message\":"+100+"}";
                    response.getWriter().print(error);
    if (data.Result != 'OK') {
                        if(data.Message == 100){
                            self._showError('未登录！请重新登录');
                        }else{
                            self._showError(data.Message);
                        }
                        //window.location.href="login.jsp";
                        return;
                    }
if (data.Result != 'OK') {
                        if(data.Message == 100){
                            self._showError('未登录！请重新登录');
                        }else{
                            self._showError(data.Message);
                        }
                        //window.location.href="login.jsp";
                        return;
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T08:35:54.933

通过将值传递给 jtStartIndex、jtPageSize、jtSorting 来解决）谢谢

# python - 列表理解中的临时名称

> ID：15523609
> 
> 赞同：2
> 
> 时间：2013-03-20T12:30:35.783
> 
> 标签：python, python-3.x, list-comprehension

我一直在用 python 列表推导弄乱一点，并创建了这个单行来计算作为两个三位数乘积的最大偶数：

```
max([ i*j for i in range(100,1000) for i in range(100,1000) if i*j%2== 0 ]) 
```

问题如下：有没有办法避免重新计算 i*j 的值，比如为其分配一个临时名称并使用它？

让我感到震惊的是我计算了`i*j`两次的值，如果我想要一个 if 函数，我还需要一个。有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:32:34.683

如果`i*j`价格昂贵，请使用生成器功能：

```
def values():
    for i in range(100, 1000):
        for j in range(100, 1000):
            ij = i * j
            if ij % 2 == 0:
                yield ij

max(values()) 
```

抵制在这里嵌套生成器表达式的诱惑；是的，它可以做到，但只会使您的代码无法破译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:37:53.520

我不确定解释器如何处理您的代码。

但你可以使用：

```
max((u for u in (i*j for i in range(100,1000) for j in range(100,1000)) if u%2== 0)) 
```

在这种情况下，我认为最好使用生成器 () 而不是使用列表 []，因为您不需要所有数据，只需要最大数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T11:00:25.140

一般来说，Python 的哲学是这样说的：如果你想重用一些中间结果，那就给它一个名字。习惯 `_`上，用于建议一个临时名称。此外，如果列表推导式或生成器表达式跨越两行或多行，最好还是用显式的 for 循环重写它。

也就是说，人们可能（错误地）使用 Python 的函数功能来编写没有*任何*中间名称的代码。几乎，就是：因为我们不能使用`functools.partial`固定非最左边和非关键字参数，我们必须自己构造一个`mod2`函数而不是使用`partial`.

```
from itertools import iterfalse, product, starmap
from operator import mod, mul
mod2 = lambda x: mod(x, 2) # this would be nicer with functools.partial
max(filterfalse(mod2, starmap(mul, product(range(100, 1000), repeat=2)))) 
```

然而，虽然我相信上面的代码回答了你的问题，但我认为这个解决方案在直觉上并不容易理解——只需给你的中间结果一个名字。

# c# - log4net smtp appender 不发送电子邮件

> ID：15523613
> 
> 赞同：12
> 
> 时间：2013-03-20T12:30:49.063
> 
> 标签：c#, log4net, smtpappender

我正在尝试实现 log4net 来发送电子邮件。
以下是我的代码，但它不发送电子邮件。

```
 <appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
  <to value="...." />
  <from value="..." />
  <subject value="Logging Message" />
  <smtpHost value="smtp.gmail.com" />
  <port value="465"/>
  <authentication value="Basic" />
  <username value="..."/>
  <password value="..."/>
  <EnableSsl value="true" />
  <bufferSize value="1" />
  <lossy value="true" />
  <evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="WARN"/>
  </evaluator>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %level %logger - %message%newline%exception" />
  </layout>
</appender> 
```

和

```
<root>
  <level value="WARN" />
  <appender-ref ref="SmtpAppender" />
</root> 
```

在 AssemblyInfo.cs

```
 [assembly: log4net.Config.XmlConfiguratorAttribute(Watch = true)] 
```

这就是我创建日志对象的方式

```
 private static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

此配置适用于文件输出，即 RollingFileAppender，但不适用于 SmtpAppender。

我尝试了许多来自互联网的解决方案，但并没有真正的帮助。

请告诉我正确的方向。提前谢谢 :)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T12:36:57.893

我正在使用非常相似的附加程序将 SMTP 消息发送到 Gmail，但在我的情况下，我使用了不同的端口：

```
<port value="587"/> 
```

所有其他设置都相同，因此请尝试一下，看看它是否适合您。这是 Gmail 用于 TLS 的端口，[在此处引用](http://support.google.com/mail/answer/13287?hl=en)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-19T09:58:19.010

对于那些遇到 SmtpAppender 问题的人，我建议将以下内容放入您的 appSettings 节点。

```
<appSettings>
  <add key="log4net.Internal.Debug" value="true"/>
</appSettings> 
```

然后它将输出如下所示的诊断信息，为您指明正确的方向

```
log4net: Setting Property [From] to String value [tomas@kodi.is]
log4net: Setting Property [Subject] to String value [Kodiak OMS Shortcode service]
log4net: Setting Property [SmtpHost] to String value [mail.sip.is]
log4net: Setting Property [Port] to Int32 value [25]
log4net: Setting Property [BufferSize] to Int32 value [1]
log4net: Setting Property [EnableSsl] to Boolean value [True]
log4net: Setting Property [Threshold] to Level value [DEBUG]
log4net: Setting Property [Lossy] to Boolean value [False]
log4net: Converter [message] Option [] Format  [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [newline] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Setting Property [ConversionPattern] to String value [%utcdate [%level] - %message%newline%exception]
log4net: Converter [utcdate] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [literal] Option [ [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [level] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [literal] Option [] - ] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [message] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [newline] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Converter [exception] Option [] Format [min=-1,max=2147483647,leftAlign=False]
log4net: Setting Property [Layout] to object [log4net.Layout.PatternLayout]
log4net: Created Appender [EmailLog]
log4net: Adding appender named [EmailLog] to logger [EmailLogger].
log4net: Hierarchy Threshold []
log4net:ERROR [SmtpAppender] ErrorCode: GenericFailure. Error occurred while sending e-mail notification.
System.Net.Mail.SmtpException: Server does not support secure connections.
   at System.Net.Mail.SmtpConnection.GetConnection(ServicePoint servicePoint)
   at System.Net.Mail.SmtpTransport.GetConnection(ServicePoint servicePoint)
   at System.Net.Mail.SmtpClient.GetConnection()
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   at log4net.Appender.SmtpAppender.SendEmail(String messageBody)
   at log4net.Appender.SmtpAppender.SendBuffer(LoggingEvent[] events) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T05:10:15.827

请参阅我的工作示例。如果您在 GMail 中使用 2 因素身份验证，请不要忘记生成密码并在此处使用：

```
<appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
  <to value="****" />
  <from value="****" />
  <subject value="Crash log" />
  <smtpHost value="smtp.gmail.com" />
  <authentication value="Basic" />
  <port value="587" />
  <username value="****" />
  <password value="****" />
  <bufferSize value="10" />
  <EnableSsl value="true"/>
  <lossy value="true" />
  <threshold value="DEBUG" />
  <evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="WARN"/>
  </evaluator>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date{dd/MM/yyyy hh:mm:ss.fff}&#9;%-5level&#9;%-15logger&#9;%message%newline" />
  </layout>
</appender> 
```

希望能帮助到你。

# iphone - iPhone 应用程序的多级 UITableView

> ID：15523614
> 
> 赞同：0
> 
> 时间：2013-03-20T12:30:49.450
> 
> 标签：iphone, uitableview

我处于需要第 n 级的情况`UITableView`。

我的问题是我有一个帐户列表，当用户点击帐户时，我需要显示其子帐户列表，如果用户点击子帐户，则在子帐户列表中我需要显示其子帐户列表等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:06:42.813

使用免费的 Sensible TableView 框架可以轻松实现您的需求。该框架将自动显示您的帐户列表，并在点击帐户单元格后生成所有需要的详细信息视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:47:50.550

您应该做的是创建 UITableViewController 的子类，当用户选择一行时，它将重新创建自身的实例。将第一个实例放在导航控制器中并使用

```
[navigationController pushViewController: animated] 
```

展示孩子们。额外的好处：您将免费获得一个反向导航栏。严格来说，这不是递归的，但它很接近，它会完成这项工作。只要确保你在某个地方有一个条件语句，它就不会永远持续下去。

# java - 带有 Java 集合参数的 XpathExpression

> ID：15523615
> 
> 赞同：0
> 
> 时间：2013-03-20T12:30:52.190
> 
> 标签：java, xpath

在 java {"0","1","true","false"} 中有这样的集合我想选择我的集合中属性“可用”的所有书籍。

XML 文件示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<books:booklist
    xmlns:books="http://univNaSpResolver/booklist"
    xmlns="http://univNaSpResolver/book"
    xmlns:fiction="http://univNaSpResolver/fictionbook">
    <science:book xmlns:science="http://univNaSpResolver/sciencebook">
        <title>Learning XPath</title>
        <author>Michael Schmidt</author>
        <available>1</available>
    </science:book>
    <fiction:book>
        <title>Faust I</title>
        <author>Johann Wolfgang von Goethe</author>
        <available>maybe</available>
    </fiction:book>
    <fiction:book>
        <title>Faust II</title>
        <author>Johann Wolfgang von Goethe</author>
        <available>true</available>
    </fiction:book>
</books:booklist> 
```

似乎使用 contains 函数可以做到这一点，但我不知道如何在 XPath 中使用列表作为参数（对于 java）。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:06:56.033

我无法为您提供具体的 Java 代码，但要检查一个元素是否包含 XPath 1.0 中的值列表或集合之一，您通常会从列表或集合中创建一个字符串，其中分隔符不包含在值中，例如您的集合`{"0","1","true","false"}`变成`|0|1|true|false|`（我选择了条形字符`|`作为分隔符）然后你比较例如`//book[contains($list, concat('|', available, '|'))]`.

显然，您的输入更复杂，因为它使用名称空间，并且这种方式（至少？）您正在寻找两个不同的元素，并且该`available`元素也在名称空间中。

因此，假设命名空间映射为 `xmlns:science="http://univNaSpResolver/sciencebook"`，XPath 可能看起来像`xmlns:fiction="http://univNaSpResolver/fictionbook"``xmlns:book="http://univNaSpResolver/book"`

```
//science:book[contains('|0|1|true|false|', concat('|', book:available, '|'))] |
//fiction:book[contains('|0|1|true|false|', concat('|', book:available, '|'))] 
```

当然，最好将值的字符串作为参数传递，这样你就可以得到例如

```
//science:book[contains($list, concat('|', book:available, '|'))] |
//fiction:book[contains($list, concat('|', book:available, '|'))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:10:38.070

XPath 中可用的[contains(string1,string2)](http://www.w3schools.com/xpath/xpath_functions.asp#string)函数只是一个字符串比较

> 如果 string1 包含 string2，则返回 true，否则返回 false

您始终可以使用[OR](http://www.w3schools.com/xpath/xpath_operators.asp)运算符连接谓词：

```
//science:book[available="true" or available="false" or available="1" or available="0"] |
//fiction:book[available="true" or available="false" or available="1" or available="0"] 
```

# ruby-on-rails - Rails Eager Loading 和 where 子句

> ID：15523627
> 
> 赞同：8
> 
> 时间：2013-03-20T12:31:19.773
> 
> 标签：ruby-on-rails, eager-loading

我渴望加载一个模型对象及其关联：

```
user= User.includes(:posts).find(1) 
```

但是在代码中的某些点，我想做这样的事情：

```
user.posts.where(:topic => "x") 
```

但这只是再次重新运行查询。所以相反，我想我会这样做：

```
user.posts.select{|post| post.topic == "x" } 
```

这不会重新运行查询。但我有几个问题。

首先，这是正确的做法吗？

其次，我对 select 在这种情况下的作用有点困惑。因为当我运行最后一行时，即使我没有使用包含函数，它第一次运行查询，然后如果我再次运行它，它不会......所以是否涉及某种缓存？因为当我使用 where 子句时，它每次都会运行查询。

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T12:51:50.143

[`select`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-select)是 Enumerable 上的 Ruby 方法。第一次跑步

```
user.posts.select{|post| post.topic == "x" } 
```

关联的所有`Post`实例都将从数据库加载到内存中；专门放入一个 ActiveRecord 集合对象中。然后在此集合上调用，过滤掉集合中具有除 .之外的任何属性的所有实例。`user``:posts``select``Post``:topic``"x"`

再次运行上述行不会再次查询数据库，因为您已经将其加载`posts`到内存中。

* * *

当您执行`includes`以下操作时

```
user= User.includes(:posts).find(1) 
```

`:posts`它将为每个返回的实例急切加载关系`User`（在这种情况下，单个`User`where `:id`is `1`）。您现在已将所有`Post`实例加载到内存中，如上一节所述。

如果你然后做类似的事情

```
user.posts.where(:topic => "x") 
```

您现在告诉 rails 对 运行**新**查询`Post`，这次查找所有`Post`实例 where `:topic`is`"x"`和 where `:user_id`is `:id`the `user`。`where`不像内存中的 ARel 集合上的“过滤器”那样工作。

* * *

*   如果您想避免另一个糟糕的查询，这`select`是过滤内存结果集的好方法。
*   您可以运行基准测试以找出哪个更快：
    1.  查询数据库并将另一个 ARel 集合重新填充到内存中
    2.  遍历内存中的 enumberable 并使用 Ruby 运行过滤器
*   如果您从不需要**所有**相关`:posts`的 for `user`，您可以轻松地将其包含在原始查询中

    ```
    user.includes(:posts).where("posts.topic = ?", 'x') 
    ```

# actionscript-3 - ActionScript 3 中的锥形效果

> ID：15523631
> 
> 赞同：4
> 
> 时间：2013-03-20T12:31:26.610
> 
> 标签：actionscript-3, flash, matrix, geometry, transformation

我需要在影片剪辑上实现锥形效果，同时使其与某些指导线对齐。例如，如果我的影片剪辑看起来像这样

![在此处输入图像描述](../Images/d783e3c7be06aefaff623325fd4dfff9.png)

改造后应该是这样的

![在此处输入图像描述](../Images/8ece82f38486d10813035cef8c236caf.png)

使**影片剪辑的形状保持对称且高度不变**。顶部边缘的长度保持不变。控制两侧的角度也很好，但首先我希望它是 45 度，如上图所示。

到目前为止我尝试过的是这个

```
var m3D:Matrix3D = new Matrix3D();
m3D.appendRotation(-45, Vector3D.X_AXIS);
myMC.transform.matrix3D = m3D; 
```

我玩了很长时间，来回添加翻译但没有结果。这也不起作用

```
var mcX:Number = myMC.x;
var mcY:Number = myMC.y;
var mcW:Number = myMC.width;
var mcH:Number = myMC.height;
m3D.appendTranslation(-(mcX + mcW/2), -mcY, 0);
m3D.appendRotation(-45, Vector3D.X_AXIS);
m3D.appendTranslation(mcX + mcW/2, mcY, 0); 
```

我确实找到了[DistortImage](http://www.rubenswieringa.com/blog/distortimage)类，但该许可证用于非商业用途，而且它似乎不适用于本机的电影剪辑。一个[类似的课程](http://www.kirupa.com/forum/showthread.php?325592-AS2-AS3-Stretcher-and-DistortGrid-%28image-distortion%29)看起来很有希望，但到源代码的链接已经失效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:02:59.447

Flash 使用具有视点、投影平面和 的简单平截头体模型`focal length`，即从视点到投影平面的距离。

![在此处输入图像描述](../Images/efa6532ad19385e22711713478213f0c.png)

还有fieldOfView，但它应该不重要，因为它的含义似乎被focalLength覆盖。

矩形图形正好位于投影平面上，因此其上边缘的中点位于投影中心。为了达到这个效果，矩形被旋转了一些`angle`。

![在此处输入图像描述](../Images/c513c34f7ac970139e05a73e4956efde.png) ![在此处输入图像描述](../Images/a2162251c54437a11bbd186efb528ff0.png)

`focal length`问题是， and的值应该是什么`angle`，`new height`并且`new bottom width`满足某些给定的效果所需的值？或者从数学上讲：

鉴于：

*   一个截头锥体`focal length`
*   一个带有`width`和的矩形，该矩形`height`固定在 的投影平面 (z=0) 上，因此矩形上边缘的中点正好位于截锥体的投影中心
*   矩形旋转并投影到投影平面后所需的`new height`和`new bottom width`

未知数被发现并应用于透视投影以获得所需的`new height`and `new bottom width`：

*   `focal length`截锥体的
*   `angle`旋转的

拿了一支铅笔、一张纸和 Maple（数学软件），自己解决了。

```
var newBottomWidth:Number = 1000; // or any other value
var newHeight:Number = myMC.height; // or any other value

// the computational part
var oldWidth:Number = myMC.width;
var oldHeight:Number = myMC.height;
var eqRoot:Number = -Math.sqrt(newBottomWidth*newBottomWidth*oldHeight*oldHeight - newHeight*newHeight*oldWidth*oldWidth);
var focalLength:Number = Math.abs(eqRoot/(newBottomWidth - oldWidth));
var angle:Number = Math.atan2(eqRoot/(newBottomWidth*oldHeight), newHeight*oldWidth/(newBottomWidth*oldHeight));
var angleDeg:Number = angle*180/Math.PI;

myMC.parent.transform.perspectiveProjection = new PerspectiveProjection();
myMC.parent.transform.perspectiveProjection.projectionCenter = new Point(myMC.x + myMC.width/2, myMC.y);
myMC.parent.transform.perspectiveProjection.focalLength = focalLength;

var m3D:Matrix3D = new Matrix3D();
m3D.appendRotation(angleDeg, Vector3D.X_AXIS);
myMC.transform.matrix3D = m3D; 
```

更多信息：

*   [透视投影 - AS3](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/PerspectiveProjection.html)
*   [将 3D 对象投影到 2D 视图上](http://help.adobe.com/en_US/as3/dev/WS36223081-8938-4b45-BB89-F1F8B1A52E4E.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:38:57.483

您需要正确添加预先翻译然后翻译后，例如如果您选择的中心点（应该围绕哪个旋转）在（cx，cy），您添加翻译`-cx,-cy`然后旋转然后向后翻译。

```
m3D.appendTranslation(-1*cx,-1*cy,0);
m3D.appendRotation(-45, Vector3D.X_AXIS);
m3D.appendTranslation(cx,cy,0); 
```

# django - Django 管理关系过滤器

> ID：15523635
> 
> 赞同：1
> 
> 时间：2013-03-20T12:31:35.800
> 
> 标签：django, django-admin

我正在使用此模型创建管理页面：

模型.py：

```
class Company(models.Model):
        name = models.CharField(max_length=50)
        mail = models.EmailField(null=True, blank=True)
        NIF = models.CharField(max_length=9, null=True, blank=True)
        def __unicode__(self):
                return self.name

class Office(models.Model):
        company = models.ForeignKey(Company)
        name = models.CharField(max_length=50, default='Main')
        dir = models.CharField(max_length=50)
        def __unicode__(self):
                return self.name

class Employee(models.Model):
        oficina = models.ForeignKey(Office)
        name = models.CharField(max_length=50)
        mail = models.EmailField(null=True, blank=True)
        def __unicode__(self):
                return self.name

class Report(models.Model):
        employee = models.ForeignKey(Employee)
        problem = models.CharField(max_length=100)
        finished = models.BooleanField() 
```

当我想创建一个新的 ReportForm 时遇到问题……员工很多！我想在管理页面中询问员工之前进行过滤

先问公司，指定公司时问办公室，指定办公室时选择员工。有可能做到这一点吗？

这是我的 Admin.py 现在：

```
class ReportForm(admin.ModelAdmin):
        fieldsets = [
                (None, {
                        'fields': ['employee', 'problem', 'finished']
                }),
        ]

admin.site.register(Report, ReportForm) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:42:22.993

[django-autocomplete-light](http://django-autocomplete-light.readthedocs.org/en/latest/dependant.html)或[django-selectable](https://django-selectable.readthedocs.org/en/version-0.7.0/advanced.html#chained-selection)或[django-smart-selects](https://github.com/digi604/django-smart-selects)可以做到这一点。

# javascript - 下划线跳过正则表达式

> ID：15523636
> 
> 赞同：0
> 
> 时间：2013-03-20T12:31:52.290
> 
> 标签：javascript, regex

我使用了以下代码和正则表达式

```
var regex = new RegExp (/^(?=.*[\w\d]).+/);
if (!regex.test(value)) {
    console.log(' not valid string');
} 
```

满足以下要求：-

1.  它将允许所有特殊字符
2.  它必须包含至少 1 个字母或数字
3.  **只有特殊字符不起作用**

一切正常，但如果**我只输入_（下划线），验证通过，这不应该。**即无效字符串不会打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:54:18.787

使用以下正则表达式：

```
/^(?=.*[A-Za-z\d]).+/ 
```

您的正则表达式失败，因为在正则表达式中`\w`代表字母或数字或下划线。您的正则表达式有一个前瞻检查以下字符是否遵循模式零个或多个字符后跟一个单词字符（字母/数字/下划线）后跟一个数字。

# javascript - 声明没有值的变量

> ID：15523638
> 
> 赞同：8
> 
> 时间：2013-03-20T12:31:53.397
> 
> 标签：javascript, variables, global-variables

我希望创建一个带有嵌套变量的 Javascript 对象，其中一些变量没有指定默认值。

我目前有这个：

```
var globalVarA = "foo";
var globalVarB = "bar";
var globalVarC;

function myFunction(){
  //do something
} 
```

我希望将其更改为：

```
var myObject = {
  GlobalVars: {
     globalVarA: "foo",
     globalVarB: "bar",
     globalVarC
  },
  myFunction: function(){
     //do something
  }
} 
```

但是我收到以下错误：

> 预期的 '：'

如何在没有值的情况下声明此变量？

这是最佳做法还是有其他更好的解决方案？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T12:33:12.430

如果要将变量定义为属性，`GlobalVars`则必须显式分配`undefined`给它们

```
GlobalVars: {
     globalVarA: "foo",
     globalVarB: "bar",
     globalVarC: undefined
  }, 
```

您的代码包含无效的符号，当使用对象文字符号时，您必须为每个变量指定一个值。这与 XML 或 formParams 等其他符号不同，您可以在不设置的情况下声明属性/属性。

请注意，在我的解决方案中，未定义的变量确实获得了一个默认值——该值只是原始值`undefined`，即未定义的变量默认返回的值。

但是，如果您这样做，您的变量*确实*会被定义`globalVarC: undefined`

```
GlobalVars.globalVarC;//undefined
GlobalVars.globalVarX;//undefined
GlobalVars.hasOwnProperty("globalVarC");//true
GlobalVars.hasOwnProperty("globalVarX");//false 
```

从[规格](http://es5.github.com/#x4.3.9)：

> 4.3.9 未定义值：
> 
> 未为变量赋值时使用的原始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:33:45.113

您需要指定一个值，`globalVarC`否则 json 的 javascript 语法将是错误的，因为您没有任何要初始化的值，您可以赋予该值[undefined](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/undefined)。

`undefined`是一个原始值**undefined**的全局变量。

```
var myObject = {
  GlobalVars: {
     globalVarA: "foo",
     globalVarB: "bar",
     globalVarC: undefined
  },
  myFunction: function(){
     //do something
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:43:52.293

您将希望`undefined`原始值成为默认值：

```
var myObject = {
  GlobalVars: {
     globalVarA: "foo",
     globalVarB: "bar",
     globalVarC: void 0
  },
  myFunction: function(){
     //do something
  }
} 
```

该`void 0`表达式给出 的值`undefined`，无论是否`undefined`“重新路由”。

# php - 如何通过 WP_Query 在 Wordpress 中使用 order by？

> ID：15523648
> 
> 赞同：0
> 
> 时间：2013-03-20T12:32:35.803
> 
> 标签：php, wordpress

我正在尝试将 a`order by` 放入 wp_query 但我无法让它工作。

怎么了？

```
$query = new WP_Query( 'cat='.get_post_meta($post->ID, 'select',1).'&orderby=menu_order'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:40:19.527

检查它是否适合您：

```
$args = array(
'cat' => get_post_meta($post->ID, 'select', 1),
'orderby' => 'menu_order',
'order' => 'DESC');
WP_Query($args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:35:25.110

也许你的意思是：

```
$query = new WP_Query(
            'cat'     = get_post_meta($post->ID, 'select',1),
            'orderby' = 'menu_order',
            'order'   = 'asc'
         ); 
```

你应该作为一个数组传递，以获得更好的可读性。还要添加如何订购。

# android - 更改 LinearLayout 内视图的背景

> ID：15523653
> 
> 赞同：-2
> 
> 时间：2013-03-20T12:32:43.827
> 
> 标签：android, view, background, android-linearlayout, ontouchlistener

我有 LinearLayout，我在其中动态添加视图。单击它时，我需要更改每个视图的背景。

我尝试在我的代码中执行此操作：

```
public class UserDetailActivity extends Activity implements View.OnTouchListener {
...
@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.l_user_detail);

    Intent intent = getIntent();
    User user = (User) intent.getSerializableExtra("class");

    userWillGo = (LinearLayout) findViewById(R.id.linerLayout_userDetail_willGoTO);

    for (int i = 0; i < user.getUserWillGo().size(); i++) {
    View myView = (View)LayoutInflater.from(getApplicationContext()).inflate(R.layout.item_event_list, userWillGo, false);
                myView.setLayoutParams(new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.FILL_PARENT,
                        LinearLayout.LayoutParams.FILL_PARENT));
                ...
                myView.setOnTouchListener(mOnTouchListener());
                userWillGo.addView(myView);
            }

}

private View.OnTouchListener mOnTouchListener() {
        return new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    v.setBackgroundResource(R.color.textBlue);
                }
                if (event.getAction() == MotionEvent.ACTION_UP) {
                    v.setBackgroundResource(R.drawable.bg_item);
                }
                return true;
            }
        };
} 
```

我得到这个代码的结果：

![在此处输入图像描述](../Images/2e5af5e92de16cbd676bc2fb7be70690.png)

我需要得到什么：

![在此处输入图像描述](../Images/9acd9848e1e8bc0a223a1d69548ffb35.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:40:21.917

首先，我建议您拥有一个列表视图组件，而不是在循环中添加布局。

在列表视图中，您可以创建一个项目选择器，但无论如何在当前场景中，您可以在**myView 布局**上 有一个可绘制选择器***selector_bg.xml*** ***. 您还可以按照场景中的说明使用**android:state_focused="true|false' ：*****

 ***```
<?xml version="1.0" encoding="utf-8"?>
        <selector xmlns:android="http://schemas.android.com/apk/res/android">
            <item android:state_pressed="true" android:drawable="@drawable/hover_bg" /> <!-- pressed -->
            <item android:drawable="@drawable/normal" /> <!-- default -->
        </selector> 
```

**myView.setBackgroundResource(R.drawable.selector_bg)**

[上面的详细参考点击这里](http://developer.android.com/guide/topics/resources/color-list-resource.html)***

# php - 在 Concrete5.6.2 中覆盖核心登录控制器

> ID：15523661
> 
> 赞同：0
> 
> 时间：2013-03-20T12:33:11.053
> 
> 标签：php, login, controller, concrete5

我想在 Concrete5 最新版本中覆盖核心登录控制器而不编辑核心文件。因为我想在登录控制器的 do_login 方法中添加额外的功能。我努力了。但它不起作用。我已将concrete/core/controllers/singlepages/login.php 复制到controllers/login.php 并在controllers/login.php 中添加了一行，如下所示

```
defined('C5_EXECUTE') or die("Access Denied.");
Loader::library('authentication/open_id');
class LoginController extends Concrete5_Controller_Login { 
}

class Concrete5_Controller_Login extends Controller { 
....
.....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:14:49.940

您应该只覆盖 Concrete5_Controller_Login，而不是基础 Controller 类。

```
defined('C5_EXECUTE') or die("Access Denied.");
Loader::library('authentication/open_id');
class LoginController extends Concrete5_Controller_Login { 
....
.....
} 
```

因此，将您的功能代码从第二类移动到第一类，然后从文件中删除第二类声明。

# javascript - 当 textarea 失去焦点时显示选择

> ID：15523667
> 
> 赞同：28
> 
> 时间：2013-03-20T12:33:22.370
> 
> 标签：javascript, jquery, html, css

我有一个带有文本框和按钮的表单：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><title></title>
</head>
<body>

<p><textarea rows="4" cols="30">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</textarea></p>
<p><input type="button" value="Click me"></p>

</body>
</html> 
```

用户进行文本选择，然后单击按钮。由于 textarea 失去焦点，选择不再可见。

有没有办法让选择保持可见？它不需要可用（即，不需要例如键入删除选择或`Ctrl+C`复制它），但我希望文本区域包含选择的某种视觉反馈。

![小样](../Images/4a1930cc70509565452ad2aaef56b7aa.png)

演示：[小提琴](http://jsfiddle.net/arunpjohny/cErLK/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:30:44.753

```
<textarea onblur="this.focus()">this is a test</textarea>
<p><input type="button" value="Click me"></p> 
```

这在 IE/Chrome 上可以正常工作。但不是FF。

* * *

所以这是一个通用的解决方案：

```
<textarea onblur="doBlur(this)">this is a test</textarea>
<p><input type="button" value="Click me"></p>

<script>
function doBlur(obj) {
  setTimeout(function() { obj.focus(); }, 10);
}
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T13:10:01.173

在挖掘了 jsFiddle 之后，我发现[CodeMirror](http://codemirror.net/)拥有创建高度自定义的 textarea 所需的一切。它是为编写代码而构建的，但有一个小技巧，它可以应用于一般的文本区域。

见[**演示**](http://jsfiddle.net/K4xG2/2/embedded/result/)

首先准备好一个textarea：

```
<textarea id="a">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</textarea> 
```

然后在其后放置以下脚本以创建 CodeMirror 文本区域，并提供其他设置以将其转换为普通文本区域。

*   `mode`: 我`"none"`在这里使用删除语法高亮。
*   `lineWrapping`：用于`true`换行长行。

```
var myCodeMirror = CodeMirror.fromTextArea(document.getElementById("a"), {
    mode: "none",
    lineWrapping: true
}); 
```

最后，使用 CSS 来控制大小，让它看起来像一个标准的 textarea：

```
.CodeMirror {
    font-family: monospace;
    font-size: 12px;
    width: 300px;
    height: 100px;
    border: solid 1px #000;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T12:52:26.287

您可以将 包装在`textarea`中`iframe`，单击按钮时仍会在框架内显示选择。

[此小提琴](http://jsfiddle.net/bdeldri/ZL9PG/)使用`srcdoc`仅 Chrome 和 Safari 6 支持的属性。不过，您仍然可以使用`iframe`没有该属性的 an 。

编辑：这是一个[新的甚至更黑客的小提琴](http://jsfiddle.net/bdeldri/hZBw4/)，它使用 jquery 添加，至少在 Chrome 和 FF 中有效（出于安全原因`iframe`，IE 不允许数据 URI ）`iframe`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T13:17:52.033

我知道这在技术上不是你想要的，但无论如何我都会作弊。

Javascript：

```
var textarea = document.getElementById('textarea');
var div = document.getElementById('holder');

var original_value = textarea.value;
textarea.onblur = function () {
    var start = textarea.selectionStart;
    var end = textarea.selectionEnd;
    textarea.style.display = "none";
    div.innerHTML = textarea.value.splice(end, 0, "</span>").splice(start, 0, "<span>");
    div.style.display = "block";
}

div.onclick = function () {
    div.style.display = "none";
    textarea.style.display = "block";
    textarea.value = original_value;
}

String.prototype.splice = function( idx, rem, s ) {
    return (this.slice(0,idx) + s + this.slice(idx + Math.abs(rem)));
}; 
```

HTML：

```
<p><textarea id="textarea" rows="4" cols="30">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</textarea></p>
<div id="holder"></div>
<p><input id="click" type="button" value="Click me"></p> 
```

CSS：

```
textarea, #holder{
    height: 120px;
    width: 300px;
    border: 1px solid black;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    padding: 3px;
    font-size: 10pt;
    font-family: Arial;
}
#holder{    
    display: none;
}
#holder span{
    background-color: #b4d5ff;
} 
```

演示：http: [//jsfiddle.net/Mb89X/4/](http://jsfiddle.net/Mb89X/4/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T13:16:37.793

使用 textarea 无法实现您想要做的事情。

我建议不要使用 textarea ，而是使用`div`with`contenteditable="true"`和[rangy](https://code.google.com/p/rangy/)。然后包装选定的文本或选择焦点和模糊事件上的文本。

这个 rangy 演示演示了如何选择文本： [http ://rangy.googlecode.com/svn/trunk/demos/highlighter.html](http://rangy.googlecode.com/svn/trunk/demos/highlighter.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-02T08:34:57.157

借鉴@Prisoner 的想法，我想进一步改进，直到它感觉像是具有滚动和调整大小功能的自然行为。

主要思想是一样的。**[我还在这里](https://codepen.io/willnode/pen/qxvxKB)**做了完整的演示和评论。我在下面重新发布这个问题的背景。

```
var input = document.getElementById('input');
var div = document.getElementById('holder');

function syncSize() {
    div.style.width = (input.scrollWidth - 4) + "px";
    div.style.height = input.style.height;
}

new MutationObserver(syncSize).observe(input, {
    attributes: true,
    attributeFilter: ["style"]
});

syncSize();

input.onchange = () => syncSize();

input.onblur = () => {
    var start = input.selectionStart;
    var end = input.selectionEnd;
    var text = input.value;
    div.innerHTML = text.substring(0, start) +
        "<span>" + text.substring(start, end) +
        "</span>" + text.substring(end);
    div.style.display = "block";
}

input.onfocus = () => div.style.display = "none";

input.onscroll = () => div.style.top = -input.scrollTop + "px";

input.value = "Lorem ipsum dolor sit amet";

input.select();
```

```
#container {
  position: relative; 
  overflow: hidden;
}

#input {
  width: 400px;
  height: 150px;
}

#holder, #input {
    padding: 2px;
    font: 400 13.3333px monospace;
    border: 1px solid #a9a9a9;
    white-space: pre-wrap;
    word-wrap: break-word;
}

#holder {
    display: none;
    position: absolute;
    left: 0;
    top: 0;
    color: transparent;
    pointer-events: none;
    border-color: transparent;
}

#holder span {
    background-color: #c8c8c8;
    color: black;
}
```

```
<div id="container">
  <textarea id="input"></textarea>
  <div id="holder"></div>
</div>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-20T13:12:48.557

如果`:focus`按钮的无关紧要，您可以使用

```
$('input[type=button]').click(function () {
    $('textarea').focus();
}); 
```

这是[小提琴](http://jsfiddle.net/cErLK/1/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-20T12:48:44.730

尝试这个：

```
var element = document.getElementById('text')
if(element.setSelectionRange)
{
    element.focus();
    element.setSelectionRange(2, 10);    
}
else if(element.createTextRange)
{

    var selRange = element.createTextRange();
          selRange.collapse(true);
          selRange.moveStart('character', 2);
          selRange.moveEnd('character', 10);
          selRange.select();
          field.focus();
} else if( typeof element.selectionStart != 'undefined' ) {
      element.selectionStart = 2;
      element.selectionEnd = 10;
      element.focus();
} 
```

[http://jsfiddle.net/inser/YJzvb/2/](http://jsfiddle.net/inser/YJzvb/2/)

# testing - 工具分析软件演进

> ID：15523671
> 
> 赞同：0
> 
> 时间：2013-03-20T12:33:30.917
> 
> 标签：testing, analytics, code-analysis

让我们考虑有目标程序。对于每个目标程序，都有一个对应的测试程序。目标程序正在独立发展。但是，测试程序会根据目标程序不断发展。让我们考虑由（目标程序，测试）形成的对。

使问题变得普遍，两个程序并行发展，一个依赖于另一个。只考虑这种一般情况，而不考虑测试的特殊情况。

是否有现有的工具、框架或研究正在分析这些程序对的演变？例如，是否有工具或研究可以分析测试程序与其目标程序的演变？

感谢您的任何建议/链接！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:05:46.183

TestEvol 就是这样一个工具。参考[http://www.cc.gatech.edu/~orso/papers/pinto.sinha.orso.ICSE12.pdf](http://www.cc.gatech.edu/~orso/papers/pinto.sinha.orso.ICSE12.pdf)中的论文。

# php - XML 的编码问题

> ID：15523672
> 
> 赞同：0
> 
> 时间：2013-03-20T12:33:34.610
> 
> 标签：php, xml, character-encoding, html-entities

我遇到了以下 HTML 存储在我的数据库中的问题：

```
Carer £4.20 per person<br /> 
```

并且正在使用 DOMDocument 输出到 XML，如下：

```
$content = htmlspecialchars($page->content);
$xmlDoc = new DOMDocument();
$xmlDoc->formatOutput = true;

//create the root element
$root = $xmlDoc->appendChild(
$xmlDoc->createElement("document"));

$page->appendChild(
$xmlDoc->createElement("content", $content)); 
```

导致

```
Carer &#xA3;4.20 per person&lt;br /&gt; 
```

但是，是否可以使用命名的 HTML 实体来代替 HEX 编码，例如`&pound;`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:31:41.287

> 但是，是否可以使用命名的 HTML 实体来代替 HEX 编码，例如`&pound;`？

是和否。首先不是，因为您使用的是 XML，而在 XML 中`&pound;`，默认情况下没有这样的命名实体。

是的，因为您可以改为输出 HTML ;) 让我们看看示例（[在线演示](http://eval.in/13168)）：

```
$content = htmlspecialchars('Carer £4.20 per person<br />');

$doc = new DOMDocument();
$doc->preserveWhiteSpace = false;
$doc->formatOutput = true;

//create the root element
$root = $doc->appendChild(
    $doc->createElement("document")
);

$root->appendChild(
    $doc->createElement("content", $content)
);

echo "Save XML:\n", $doc->saveXML();
echo "\n\nSave HTML:\n", $doc->saveHTML(); 
```

和输出：

```
Save XML:
<?xml version="1.0"?>
<document>
  <content>Carer &#xA3;4.20 per person&lt;br /&gt;</content>
</document>

Save HTML:
<document><content>Carer &pound;4.20 per person&lt;br /&gt;</content></document> 
```

所以请记住：在 XML 中，命名实体的集合非常有限，而在 HTML 中则更多。您还可以向 XML 添加更多命名实体。如果你有兴趣，请看

*   [XML 的命名字符元素](http://www.xml.com/pub/a/2003/01/02/xmlchar.html)（Anthony Coates，Zarella Rendon；2003 年 1 月 2 日）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:36:03.960

如果您的 XML 包含非 ASCII 字符，并且文件保存为未指定编码的单字节 ANSI（或 ASCII），则会出现此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:36:51.730

尝试删除 htmlspecialchars 看看会发生什么？

[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:37:27.083

非常简单 - 只需使用`htmlentities()`而不是`htmlspecialchars()`.

见[http://de2.php.net/manual/en/function.htmlentities.php](http://de2.php.net/manual/en/function.htmlentities.php)

*但请注意*- XML 不**知道**HTML 实体，例如`&pound;`! 如果您输出 XML 而不是 HTML，那么数字引用是唯一的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T12:38:28.860

## 是的，这应该是可能的——但这取决于。

从“ [IT 视角](http://us.123rf.com/400wm/400/400/hfng/hfng1010/hfng101000005/8002249-british-pound-and-american-dollar-on-a-computer-keyboard-concept-exchange-rate-or-online-shopping.jpg)”看[英镑](http://www.gocurrency.com/wp-content/uploads/2012/01/one-pound-coin.jpg)​​。

*   `£`- 唱英镑

*   `pound`- 货币名称

*   `&pound;`- 实体名称

*   `&#163;`- 实体代码

现在，让我们从上面编写所有项目，而不将其标记为`code`。结果是什么？

**£, £, £, £** - 如您所见，第 3 和第 4 的结果为 £ - 但这是 HTML。相信我，[我不会说谎](http://stepolabs.com/upload/pounds)：P

但我**强烈建议**您`&#163;`在**XML**中使用！

如果您想了解更多信息，可以访问：

*   [在 iPhone 读取的 XML 提要中使用英镑符号](https://stackoverflow.com/questions/3890495/using-the-british-pound-sign-in-an-xml-feed-to-be-read-by-an-iphone)
*   [http://en.wikipedia.org/wiki/Pound_sign](http://en.wikipedia.org/wiki/Pound_sign)

# python - Twython - 如何将多个 Twitter 帐户与一个用户关联

> ID：15523673
> 
> 赞同：1
> 
> 时间：2013-03-20T12:33:39.930
> 
> 标签：python, django, twitter, twython

我想允许注册用户添加多个 Twitter 帐户。我遵循 twython-django 示例，并获得了一个用户的工作版本 - 一个 Twitter 帐户。如果用户尝试再次使用 twitter 登录，再次遵循相同的视图，我会收到此错误：`Invalid / expired Token`.

我尝试将 force_login=true 添加到`oauth/authorize`and `oauth/authenticate`，`'request_token'`从`request.session`dict 中删除，但`Invalid Token`在`get_authentication_tokens()`.

如何使用 twython 将多个 Twitter 帐户与同一用户正确关联？我在这里想念什么？

这是一个 twython-django 示例：[https ://github.com/ryanmcgrath/twython-django/blob/master/twython_django_oauth/views.py](https://github.com/ryanmcgrath/twython-django/blob/master/twython_django_oauth/views.py)

我的观点：

```
def twitter_login(request):
    redirect_back_to_url = request.build_absolute_uri()

    if 'request_token' not in request.session:
        # request authorization tokens
        t = Twython(twitter_token=settings.TWITTER_CONSUMER_KEY,
                    twitter_secret=settings.TWITTER_CONSUMER_SECRET,
                    callback_url=redirect_back_to_url)

        # Request an authorization url to send the user to...
        request_oauth_key = t.get_authentication_tokens()

        # signing current session as one with twitter authentication
        request.session['request_token'] = request_oauth_key

        # redirecting the user to twitter authorization url for authentication
        return HttpResponseRedirect(request_oauth_key['auth_url'])
    else:
        # user authenticated, receiving auth token
        t2 = Twython(twitter_token=settings.TWITTER_CONSUMER_KEY,
                     twitter_secret=settings.TWITTER_CONSUMER_SECRET,
                     oauth_token=request.session['request_token'][
                         'oauth_token'],
                     oauth_token_secret=request.session['request_token'][
                         'oauth_token_secret'])

        oauth_key = t2.get_authorized_tokens()

        # save authorized tokens
        # twitter oauth tokens dont expire
        token = Token.objects.get_or_create(account_name=oauth_key['screen_name'],
                                            token=oauth_key['oauth_token'],
                                            secret=oauth_key['oauth_token_secret'])
        user = request.user.get_profile()
        user.twitter.add(token[0].id)
        user.save()

        logger.info('Successfully acquired twitter oauth token.')

        return HttpResponseRedirect(reverse('profile')) 
```

**更新**：*可能的解决方案*

我改变了看法：

```
def twitter_login(request):
    redirect_back_to_url = request.build_absolute_uri()

    if 'request_token' not in request.session:
        # request authorization tokens
        t = Twython(twitter_token=settings.TWITTER_CONSUMER_KEY,
                    twitter_secret=settings.TWITTER_CONSUMER_SECRET,
                    callback_url=redirect_back_to_url)

        # Request an authorization url to send the user to...
        request_oauth_key = t.get_authentication_tokens()

        # signing current session as one with twitter authentication
        request.session['request_token'] = request_oauth_key

        # redirecting the user to twitter authorization url for authentication
        return HttpResponseRedirect(request_oauth_key['auth_url'])
    else:
        # user authenticated, receiving auth token
        t2 = Twython(twitter_token=settings.TWITTER_CONSUMER_KEY,
                     twitter_secret=settings.TWITTER_CONSUMER_SECRET,
                     oauth_token=request.session['request_token'][
                         'oauth_token'],
                     oauth_token_secret=request.session['request_token'][
                         'oauth_token_secret'])

        oauth_key = t2.get_authorized_tokens()
        if 'screen_name' not in oauth_key:
            del request.session['request_token']
            request.session.modified = True
            return HttpResponseRedirect(reverse('twitter_login'))

        # save authorized tokens
        # twitter oauth tokens dont expire
        token = Token.objects.get_or_create(account_name=oauth_key['screen_name'],
                                            token=oauth_key['oauth_token'],
                                            secret=oauth_key['oauth_token_secret'])
        user = request.user.get_profile()
        user.twitter.add(token[0].id)
        user.save()

        logger.info('Successfully acquired twitter oauth token.')

        return HttpResponseRedirect(reverse('profile')) 
```

而且还不确定这是否与它有关。我在 twython.py 第 272 行之后添加`request_args['force_login'] = True`。但是，正如我所说，我不确定这是否有任何影响，因为根据[https://dev.twitter.com/docs/api/1/post/oauth/request_token](https://dev.twitter.com/docs/api/1/post/oauth/request_token)强制登录不是可选参数之一.

这是一些巫毒教。哈哈。告诉我它是否完全是垃圾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T04:50:37.577

嗯，我相信 OP 让它工作/正确，但作为一个快速细分，`twython-django`它不是为支持多个帐户关联而构建的（它也不在 Django 1.5 上，所以在更新之前要小心~）。

您需要执行 OP 所做`Token`的操作，并为与用户匹配的 s 设置一个单独的表，然后通过提取适当的令牌来处理他们当前正在使用的帐户。OPs 的使用`force_login`似乎也奏效了，因为虽然它不一定记录在案，但我相信它仍然有效（根据**[这个线程](https://dev.twitter.com/discussions/1253)**，除非我误读了它 - 如果我是，我很想得到纠正）。

我不希望这个答案被接受，因为我并没有真正解决任何问题，但如果其他人遇到这个问题，我希望留下比上述说明更明确的内容。希望没关系！

# javascript - 在 Kendo-UI 中下拉刷新，文本重叠显示“释放”和“拉动”标签

> ID：15523674
> 
> 赞同：1
> 
> 时间：2013-03-20T12:33:43.617
> 
> 标签：javascript, kendo-ui, kendo-mobile

下拉刷新有问题。它第一次起作用，但是如果我更改为不同的视图，然后回到原始视图，则`Pull to refresh`和`Release to refresh`文本似乎被复制并重叠在自身上。我在这里“硬编码”数据源的数据，我不想使用传输 ajax。

我正在尝试手动更新`setOptions` `pull`方法中的数据，而不是让 Kendo 通过 ajax 更新它。实际的数据更新有效。没有 Javascript 错误，我在 Chrome 和 Firefox 中得到相同的结果。

第一次工作：

![在此处输入图像描述](../Images/35c52218d314a27b0507edadc9146b57.png)

移动到另一个视图后，再回到这个视图，然后拉下：

![在此处输入图像描述](../Images/dcf7ec021dc5d73feda05f4dd6d1a284.png)

我的视图代码是：

```
<div id="subitem-view" data-role="view" data-show="showSubItems">
    <div data-role="header">
        <div data-role="navbar">

        </div>
    </div>
    <ul id="subItemList" class="itemList">
    </ul>
    <script id="subItemTemplate" type="text/x-kendo-template">
       #:Name#
    </script>
</div> 
```

Javascript：

```
function showSubItems(e) {

    var subItems = new kendo.data.DataSource({
        data: [
            { Name : "Test1" },
            { Name : "Test2" }
        ] 
    });

    e.view.element.find("#subItemList").kendoMobileListView({
        dataSource: subItems,
        pullToRefresh: true,
        template: kendo.template($("#subItemTemplate").html())
    });

    if (typeof (e.view.scroller.pull) == "undefined") {
        e.view.scroller.setOptions({
            pull: function () {
                console.log("pull event...");

                subItems.data([
                    { Name : "Test1 Updated" },
                    { Name : "Test2 Updated" }
                ]);

                setTimeout(function () { e.view.scroller.pullHandled(); }, 400);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T23:02:47.563

您在每个 View 显示上初始化 Kendo UI Mobile ListView，这会导致不可预知的结果，例如重新创建拉动以刷新标签。您应该只在 Init 事件中执行此操作。

# android - 如何将多个 ViewPagers 添加到 Activity 的 Vertical ScrollView 中？

> ID：15523679
> 
> 赞同：2
> 
> 时间：2013-03-20T12:33:54.960
> 
> 标签：android, android-viewpager, scrollview

我正在尝试实现一个包含 2 个 ViewPagers 的 Activity。每个 ViewPager 都应该独立滑动。所以我将 ScrollView 作为我的专利布局，它有一个 LinearLayout 作为 Chaild。我已将 ViewPagers 添加到该线性布局中。但是只有第一个 ViewPager 被显示，第二个没有被显示。我为此做了很多工作，并[在这里](https://stackoverflow.com/questions/10852797/how-to-get-several-viewpagers-into-a-scrollview)尝试了不同的解决方案。但没有什么对我有用。这是我的 XML。

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fillViewport="true">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffffff"
    android:orientation="vertical"
    android:weightSum="4">

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="30dip"
        android:text="trying to add First Fragment list"
        android:layout_weight="1" />

    <android.support.v4.view.ViewPager
        android:id="@+id/viewPager"
        android:layout_width="fill_parent"
        android:layout_height="200dip"
        android:layout_weight="1" />

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="30dip"
        android:text="trying to add second Fragment list"
        android:layout_weight="1" />

    <android.support.v4.view.ViewPager
        android:id="@+id/viewPager1"
        android:layout_width="fill_parent"
        android:layout_height="200dip"
        android:layout_marginTop="30dip"
        android:layout_weight="1" /> 
</LinearLayout>

</ScrollView> 
```

这是我的activity.java

```
public class MainActivity extends FragmentActivity {

private ViewPager _mViewPager, _mViewPager1;
private ViewPagerAdapter _adapter, _adapter1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setUpView();
//  setTab();
}

private void setUpView() {
    _mViewPager = (ViewPager) findViewById(R.id.viewPager);
    _adapter = new ViewPagerAdapter(getApplicationContext(),
            getSupportFragmentManager());

    _mViewPager.setAdapter(_adapter);
    _mViewPager.setCurrentItem(0);

    _mViewPager1 = (ViewPager) findViewById(R.id.viewPager1);
    _adapter1 = new ViewPagerAdapter(getApplicationContext(),
            getSupportFragmentManager());
    _mViewPager1.setAdapter(_adapter1);
    _mViewPager1.setCurrentItem(0);
}

private void setTab() {
    _mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageScrollStateChanged(int position) {

        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
        }

        @Override
        public void onPageSelected(int position) {
            // TODO Auto-generated method stub
            switch (position) {
            case 0:
                findViewById(R.id.first_tab).setVisibility(View.VISIBLE);
                findViewById(R.id.second_tab).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab1).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab2).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab3).setVisibility(View.INVISIBLE);
                break;

            case 1:
                findViewById(R.id.first_tab).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab).setVisibility(View.VISIBLE);
                findViewById(R.id.second_tab1).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab2).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab3).setVisibility(View.INVISIBLE);
                break;
            case 2:
                findViewById(R.id.first_tab).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab1).setVisibility(View.VISIBLE);
                findViewById(R.id.second_tab2).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab3).setVisibility(View.INVISIBLE);
                break;

            case 3:
                findViewById(R.id.first_tab).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab1).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab2).setVisibility(View.VISIBLE);
                findViewById(R.id.second_tab3).setVisibility(View.INVISIBLE);
                break;
            case 4:
                findViewById(R.id.first_tab).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab1).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab2).setVisibility(View.INVISIBLE);
                findViewById(R.id.second_tab3).setVisibility(View.VISIBLE);

                break;

            }
        }

    });

}

} 
```

有了这个输出就像下面的截图一样。

![在此处输入图像描述](../Images/9b7ac6921fe7253eb4bae446794218f4.png)

不显示第二个 View Pager。

如果您有任何解决方案，请帮助我。

# java - 从两个坐标获取所有纬度和经度

> ID：15523680
> 
> 赞同：0
> 
> 时间：2013-03-20T12:33:56.630
> 
> 标签：java, google-maps, coordinates, latitude-longitude

谁能告诉如何获得谷歌地图中两个坐标之间的所有纬度和经度点，即

**从**

纬度：10.013482
经度：76.331323

**至**

纬度：10.005135
经度：76.313385

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:01:14.350

想想你在问什么。
您需要 10.005135 和 10.013482 之间的所有点，这些点也在 76.313385 和 76.331323 之间。
忘记它们是坐标，这是一个简单的数学问题。当然，结果可能非常大。

# c# - 用于创建对象并从 XML 更新其属性的更好的代码

> ID：15523682
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:33:57.423
> 
> 标签：c#, xml, linq

我有多个 Invoice 元素的 XML 输入。我从这些元素创建发票对象。根据 invoice 元素的位置，我们需要分配序列号并从不同的元素 - StatusMsg 中找到相应的消息。

我在 .Net 4.0 中有以下 C# 代码。它工作正常且可读性强。`performance`在不牺牲的情况下有没有更好的代码`readability`？

**代码**

```
// Create a collection of invoice elements
var invoiceEntities = xDoc.Descendants("Invoice")
              .Select(x => new Invoice
               {
                  Vendor = x.Element("Vendor") == null ? String.Empty : x.Element("Vendor").Value.Trim(),
                  Amount = x.Element("Amount") == null ? String.Empty : x.Element("Amount").Value.Trim()
               });

List<Invoice> invoices = invoiceEntities.ToList();

//Iterate all entities for finding corresponding message element and update the entity's Message

int count = 0;
foreach (Invoice entity in invoices)
{
           count++;

           //Dynamic XPath statement
           string messagePath = @"Status/StatusMsg/StatusDetail/Sequence[text()=" + count.ToString() + "]/../Message";
           var statusDetails = xDoc.XPathSelectElements(messagePath).FirstOrDefault();
           if (statusDetails != null)
           {
               entity.Message = statusDetails.Value;
               entity.Sequence = count;
           }

  } 
```

**实体**

```
public class Invoice
{
    public string Vendor { get; set; }
    public string Amount { get; set; }
    public string Message { get; set; }
    public int Sequence { get; set; }
} 
```

**XML**

```
 XDocument xDoc = XDocument.Parse(@"  
          <Status>
                <StatusMsg>
                    <StatusType>INVOICE</StatusType>
                    <StatusCode>READYPAY</StatusCode>
                    <StatusTimestamp>2013-03-19T21:20:54Z</StatusTimestamp>

                    <StatusDetail>
                        <Sequence test=""K"">  2  </Sequence>
                        <Message>STL MESSAGE </Message>
                    </StatusDetail>

                    <StatusDetail>
                        <Sequence test=""1"">  1  </Sequence>
                        <Message>AKP MESSAGE</Message>
                    </StatusDetail>

                    <StatusDetail>
                        <Sequence> 1 </Sequence>
                        <Message>CC</Message>
                    </StatusDetail>

                </StatusMsg>
                <Invoices> 

                    <Invoice>
                        <Vendor>
                         AKP LLC
                        </Vendor>
                        <Amount>
                         100
                        </Amount>
                    </Invoice>

                    <Invoice>
                        <Vendor>
                         STL Inc
                        </Vendor>
                        <Amount>
                         20950
                        </Amount>
                    </Invoice>

                </Invoices>
            </Status>
           "); 
```

**参考资料**：

1.  [生成 c# 对象代码并从 xml 文档为其属性赋值](https://stackoverflow.com/questions/10562315/generate-c-sharp-object-code-and-assign-values-to-its-properties-from-an-xml-doc)
2.  [使用注释将 LINQ 转换为 XSLT 样式的 XML 树 - Eric White](http://blogs.msdn.com/b/ericwhite/archive/2007/07/30/how-to-use-annotations-to-transform-linq-to-xml-trees-in-an-xslt-style.aspx)
3.  [XSLT 或 Linq to XML 的优势](https://stackoverflow.com/questions/1066362/advantages-of-xslt-or-linq-to-xml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:13:10.693

关于我唯一真正推荐的是将`StatusDetail`节点也存储在一个列表中，只需抓取一次，然后您可以通过第二个 linq 语句引用该列表来过滤序列。不过，这最终可能比简单地构建和重用 XPath 字符串要慢。

```
var Details = xDoc.Descendants("StatusDetail").ToList();

...

var statusDetail = Details.Where(a => a.Sequence == count).FirstOrDefault(); 
```

作为一个挑剔的开发点，通常建议`String.Format`在做这样奇怪的连接字符串时使用它......关于后代码更有效的东西......

```
string messagePath = String.Format("Status/StatusMsg/StatusDetail/Sequence[text()={0}]/../Message", count); 
```

另一种选择，您已经在构建匿名类型，没有真正的理由不能将计数构建到 Invoice 选项中。这至少使您不必在循环中单独声明和维护计数。

```
int count = 1;

var invoiceEntities = xDoc.Descendants("Invoice")
          .Select(x => new Invoice
           {
              Vendor = x.Element("Vendor") == null ? String.Empty : x.Element("Vendor").Value.Trim(),
              Amount = x.Element("Vendor") == null ? String.Empty : x.Element("Amount").Value.Trim(),
              Index = count++
           });//yes that works, I tested it because even I wasn't sure, but Index is correct and different for each element 
```

# windows - Powershell API 将变量发布到 Ducksboard

> ID：15523687
> 
> 赞同：0
> 
> 时间：2013-03-20T12:34:02.963
> 
> 标签：windows, powershell, scripting, powershell-2.0

尝试使用我从 Github 获取的以下 Powershell 脚本将数据推送到 Ducksboard 仪表板。该函数运行良好，但是我需要输入一个变量作为数据的一部分。在对函数的两个调用中，包含在实际值 44 中的函数可以正常工作，但是如果我用它代替我的变量 $qtybord 函数就会失败。我已经尝试了多种选项来克服单引号内的 var 但无法使其工作 - 任何人都可以帮助我吗？

```
# Squirt data to Duscksboard
    function Execute-DucksboardApi
    {
      param(
        [string] $url = $null,
        [string] $data = $null,
        [string] $apikey = $null,
        [string] $contentType = "application/json",
        [string] $codePageName = "UTF-8",
        [string] $userAgent = $null
      );

      if ($url -and $data -and $apikey)
      {
        [System.Net.WebRequest]$webRequest = [System.Net.WebRequest]::Create($url);
        $webRequest.ServicePoint.Expect100Continue = $false;
        [System.Net.NetworkCredential]$credentials = New-Object System.Net.NetworkCredential($apikey, 'ignored');
        $webRequest.Credentials = $credentials.GetCredential($url, 'Basic');
        $webRequest.PreAuthenticate = $true;
        $webRequest.ContentType = $contentType;
        $webRequest.Method = "POST";
        if ( $userAgent )
        {
          $webRequest.UserAgent = $userAgent;
        }

        $enc = [System.Text.Encoding]::GetEncoding($codePageName);
        [byte[]]$bytes = $enc.GetBytes($data);
        $webRequest.ContentLength = $bytes.Length;
        [System.IO.Stream]$reqStream = $webRequest.GetRequestStream();
        $reqStream.Write($bytes, 0, $bytes.Length);
        $reqStream.Flush();

        $resp = $webRequest.GetResponse();
        $rs = $resp.GetResponseStream();
        [System.IO.StreamReader]$sr = New-Object System.IO.StreamReader -argumentList $rs;
        $sr.ReadToEnd();
      }
    }

    $qtybord = 44

    Execute-DucksboardApi -url 'https://push.ducksboard.com/v/123752/' -data '{"value": $qtybord}' -apikey 'tu2j3d3epqytWZD1haHnjJSJ1NqBrmvPe5SONc0VYge4BbIPi0'

Execute-DucksboardApi -url 'https://push.ducksboard.com/v/123752/' -data '{"value": 44}' -apikey 'tu2j3d3epqytWZD1haHnjJSJ1NqBrmvPe5SONc0VYge4BbIPi0' 
```

*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:46:55.850

试试这个：

```
-data "{`"value`": $qtybord}" 
```

或者

```
-data "{""value"": $qtybord}" 
```

在单引号变量中不展开，在双引号中您需要转义字符串内的双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:48:02.153

所以让 -data 参数取 $data 而不是 $data = '{"value": ' + $qtyboard + '}' 或者只是在 -data 之后将整个东西包装在括号中。

此外，如果您使用的是 PowerShell v3，则可以使用以下内容：

```
$data = New-Object -Type PSObject -Property @{
   value = $qtyboard
} | ConvertTo-JSON 
```

# iphone - 通用应用程序 UI 问题

> ID：15523690
> 
> 赞同：-4
> 
> 时间：2013-03-20T12:34:20.873
> 
> 标签：iphone, objective-c, xcode, ipad, uipopovercontroller

我正在创建通用应用程序。

在我的 iPhone 应用程序中：我创建了自定义屏幕来通知用户后台进度的进度。我使用 segue 添加该视图控制器，它占据了整个屏幕。

在我的 iPad 应用程序中：我正在使用 UIPopoverController，它正在调用显示进度的 ViewController。**然而，在 iPad 中它也占据了整个屏幕。我希望它只占据 UIPopoverController 的屏幕。**我无法理解我应该如何添加屏幕以便它只会隐藏最后一个 UIPopoverController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:48:40.140

用于`[UIPopoverController alloc] initWithContentViewController:`创建弹出框并将您的视图控制器传递到`initWithContentViewController`. `self.contentSizeForViewInPopover`此外，在您的视图控制器中 设置所需的大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:02:49.810

试试这个

```
- (IBAction)onShare:(id)sender
{
UIButton *btn = (UIButton *)sender;
SocialNetworkView *socialNetworkShare = [[SocialNetworkView alloc] initWithNibName:@"SocialNetworkView" bundle:nil];

socialNetworkShare.delegate=self;
//---------------------------contentSizeForViewInPopover------------------
//set required size in contentSizeForViewInPopover in your view controller
socialNetworkShare.contentSizeForViewInPopover  =CGSizeMake(socialNetworkShare.view.frame.size.width, socialNetworkShare.view.frame.size.height);  

popSocialNetworkShare = [[UIPopoverController alloc] initWithContentViewController:socialNetworkShare];

[popSocialNetworkShare presentPopoverFromRect:btn.frame inView:self.view permittedArrowDirections:YES animated:YES];
 } 
```

# netty - netty 线程分布

> ID：15523693
> 
> 赞同：0
> 
> 时间：2013-03-20T12:34:27.390
> 
> 标签：netty

A`Channel`附加到单个`EventLoop`during `Channel.Unsafe#register`。注册是通过 中的模运算分配的`EventExecutorGroup#next`。A`ChannelHandlerContext`绑定到单个线程 - 通常与`Channel`.

通道可能被不均匀地取消注册，或者工作负载在这些通道之间分布不均。碰巧有可能让一个线程处理整个工作负载。

是否有防止这种情况发生的模式，或者这是一个不可避免的结构性问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:31:38.020

如果使用参数 1 构造 NioEventLoopGroup，则可以强制只使用一个线程。除此之外，我认为我们只能通过计算 EventLoop 上有多少通道并根据此选择下一个来改进它。但即使这样也可能不是一个好方法，因为某些 Channel 可能比其他 Channel 做更多繁重的工作。

# php - 如何在firefox os中使用mysql数据库？

> ID：15523695
> 
> 赞同：1
> 
> 时间：2013-03-20T12:34:28.403
> 
> 标签：php, mysql, operating-system, marketplace, firefox-os

我在网络上有一个即时消息应用程序，它的数据库几乎完成了[M2S](http://message2space.es.vu)。我想为你做一个Firefox的应用程序，而不必通过我的网站，如果我必须调用mysql数据库，我可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:47:00.237

由于 Firefox OS 由 HTML5 技术组成，因此目前无法使用目前可用的工具直接连接到 MySQL 服务器。

看这里：

[相关帖子](https://stackoverflow.com/questions/3020751/can-javascript-connect-with-mysql)

# c++ - 带有 pimpl 习惯用法的模板类不正确

> ID：15523697
> 
> 赞同：1
> 
> 时间：2013-03-20T12:34:38.097
> 
> 标签：c++, templates, smart-pointers, pimpl-idiom

正如 MSDN library [here](http://msdn.microsoft.com/en-us/library/vstudio/hh438477.aspx)中所述，我想尝试一下 pimpl idiom。现在我有`Foo.hpp`一个

```
template<typename T>
class Foo {
public:
    typedef std::shared_ptr<Foo<T>> Ptr;

    Foo();
private:
    class Impl;
    std::unique_ptr<Impl> pImpl;
}; 
```

**尚未**`T`使用参数的地方。实现存储在**`Foo.cpp`**

 **```
template<typename T>
class Foo<T>::Impl {
public:
    int m_TestVar;
};

template<typename T>
Foo<T>::Foo() : pImpl(new Impl) {
    this->pImpl->m_TestVar = 0x3713;
} 
```

目前编译器有两个错误和一个警告：

*   `use of undefined type 'Foo<T>::Impl'; ... vc\include\memory in line 1150`
*   `can't delete an incomplete type; ... vc\include\memory in line 1151`
*   `deletion of pointer to incomplete type 'Foo<T>::Impl'; no destructor called; ... vc\include\memory in line 1152`

这里有什么冲突，我该如何解决？

*编辑。*删除了对`std::make_shared`基于一个旧版本的复制和粘贴失败的调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:06:30.073

我有一个类似的问题——我们的系统中有一个基类，`NamedComponent`我想创建一个模板，它采用现有的命名组件并将其转换为 pimpl 外观。

我所做的是将模板分成一个头文件和一个内联文件，并创建一个函数来使模板被实例化。这允许实现位于库中，具有该实现的外观的模板实例化，并且客户端能够基于模板和实现的前向声明使用外观。

标题“Foo.h”：

```
template<class T> class Foo
{
public:
    Foo ();
    virtual ~Foo();

private:
    T *impl_;

public:
    // forwarding functions
    void DoIt();
}; 
```

内联函数“Foo.inl”：

```
#include "Foo.h"

template<class T> Foo<T>::Foo() :
    impl_ ( new T )
{
}

template<class T> Foo<T>::~Foo()
{
    delete impl_;
}

// forwarding functions
template<class T> void Foo<T>::DoIt()
{
    impl_ -> DoIt();
}    

// force instantiation
template<typename T>
void InstantiateFoo()
{
    Foo<T> foo;
    foo.DoIt();
} 
```

实现 cpp 文件 - 包括模板内联函数，定义实现，引用实例化函数：

```
#include "Foo.inl"

class ParticularImpl {
public:
    void DoIt() {
        std::cout << __FUNCTION__ << std::endl;
    }
};

void InstantiateParticularFoo() {
    InstantiateFoo<ParticularImpl>();
} 
```

客户端 cpp 文件 - 包含模板头，转发声明实现并使用 pimpl 外观：

```
#include "Foo.h"
class ParticularImpl;

int main () {
    Foo<ParticularImpl> bar;

    bar.DoIt();
} 
```

您可能不得不摆弄 InstantiateFoo 函数的内容以强制编译器实例化所有函数 - 在我的例子中，基在模板方法中调用了所有 pimpl 函数，因此一旦引用了一个，它们都是。您不需要调用 Instantiate 函数，只需链接到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:58:15.937

恕我直言 PIMPL 对模板没有多大意义，除非您知道所有可能的模板参数并且该集相当小。问题是，您要么`Impl`在头文件中拥有实现，否则正如评论中所指出的那样。如果可能的`T`参数数量很少，您仍然可以进行分离，但您需要在标头中声明特化，然后在源文件中显式实例化它们。

现在到编译器错误：`unique_ptr<Impl>`需要定义`Impl`可用。您需要分别在 ctor和 dtor中直接使用`new`and并放弃智能指针的便利性/安全性。`delete``Foo::Foo``Foo::~Foo`**

# c++ - 共享库和成员函数

> ID：15523709
> 
> 赞同：0
> 
> 时间：2013-03-20T12:35:02.020
> 
> 标签：c++, dlsym

我在 C++ 中遇到了一个小问题。

所以，我有一个游戏，一种 Snake，我想用三个不同的图形库来做。（如 libsdl.so、libndk.so 和 libQt.so）。

我有以下课程：

显示SDL.hh：

```
#ifndef DISPLAYSDL_HH__
# define DISPLAYSDL_HH__

#include "IDisplay.hh"

class DisplaySdl : public IDisplay
{
public:
  DisplaySdl();
  ~DisplaySdl();                                                                                                                                                                                                          
  void          Boucle(Core &core);
};

#endif 
```

DisplaySDL.cpp：

```
#include <iostream>
#include "DisplaySdl.hh"

extern "C"
{
  IDisplay*     createDisplay()
  {
    return new DisplaySdl();
  }
}

DisplaySdl::DisplaySdl()
{
   std::cout << "SDL Loaded" << std::endl;
}

DisplaySdl::~DisplaySdl()
{

}

void            DisplaySdl::Boucle(Core &core)
{
    std::cout << "this is just a test" << std::endl;
} 
```

我有我的界面“IDisplay”：

```
#ifndef IDISPLAY_HH__
# define IDISPLAY_HH__

#include "../Core/Core.hh"

class IDisplay
{
public:
  virtual ~IDisplay() {}                                                                                               
        // virtual void dispSnake(Snake snake) = 0;                                                                                                                                                                                                  
  // virtual void dispBlock(Block block) = 0;                                                                                                                                                                                                  
  // virtual void dispMap(Map map) = 0;                                                                                                                                                                                                        
  virtual void Boucle(Core &core);

    };

#endif 
```

（我只是把 DisplaySDL.hh 和 DisplaySDL.cpp 因为其他库具有相同的设计模式/功能）

这是加载不同库并创建`IDisplay *`对象的代码。：

```
IDisplay* LibGestionnary::loadLibFromName(const std::string &libname)
{
  IDisplay* (*external_creator)();
  void* dlhandle;

  dlhandle = dlopen(libname.c_str(), RTLD_LAZY);
  if (dlhandle == NULL)
    std::cout << dlerror() << std::endl;
  external_creator = reinterpret_cast<IDisplay* (*)()>(dlsym(dlhandle, "createDisplay"));
  if (external_creator == NULL)
    std::cout << dlerror() << std::endl;
  IDisplay* Display = external_creator();
  dlclose(dlhandle);
  return (Display);
} 
```

问题是我的函数 loadLibFromName() 运行良好，它加载了我告诉它的库，但只有当我的任何图形库中都没有任何函数成员时。如果我从我的代码中删除“boucle()”函数，它的效果很好，如下所示：

```
./nibbler 20 20 ./libsdl.so
SDL Loaded 
```

否则，这就是我尝试加载 lib 时得到的结果：

```
yanis@b3nd3r:~/Projets/C++/nibbler$ ./nibbler 20 20 ./libsdl.so 
./libsdl.so: undefined symbol: _ZTI8IDisplay
./nibbler: undefined symbol: createDisplay
Segmentation Fault 
```

有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:11:38.127

好吧，我设法让它工作......“= 0;” 我的界面中缺少“Boucle()”函数。

但我面临另一个问题......我可以调用我的`boucle()`函数，但是每当我这样做时，我都会遇到段错误......

这是我使用的代码：

```
 int main(int argc, char **argv)
    {
      IDisplay              *display;
      display = gestionnary.loadLibFromName(std::string(argv[3]));
      display->Boucle();
    } 
```

GDB 告诉我：

```
Program received signal SIGSEGV, Segmentation fault.
0x000000000040b325 in main (argc=4, argv=0x7fffffffe538, env=0x7fffffffe560) at Core/main.cpp:44
44    display->Boucle(); 
```

Boucle() 函数仅包含在短语的打印中...

# python - python中的for/empty循环条件

> ID：15523711
> 
> 赞同：7
> 
> 时间：2013-03-20T12:35:03.460
> 
> 标签：python, for-loop, python-2.7

在 Django 模板中，`For loop`只有`empty`当您循环的对象为空时才会设置条件。例如：

```
{% for x in my_list %}
    #do something
{% empty %}
   <p>  my_list is empty </p>
{% endfor %} 
```

在这里，如果 my_list 为空，那么它只会打印`my_list is empty`

python中有没有等价的东西？

我正在使用 if-else 条件，但这看起来很难看。我正在尝试找到不涉及使用 if-else 条件的解决方案

我当前的代码：

```
if len(my_list):
   for x in my_list:
       doSomething()
else:
    print "my_list is empty" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T12:36:38.387

您必须坚持该`if`声明，但可以简化：

```
for x in my_list:
    doSomething()
if not my_list:
    print "my_list is empty" 
```

因为`my_list`是空的，所以`for`循环永远不会执行循环部分，并且空列表`False`位于布尔上下文中。

# c++ - ActiveMQ-CPP - 未应用消息重新传递延迟

> ID：15523712
> 
> 赞同：0
> 
> 时间：2013-03-20T12:35:09.047
> 
> 标签：c++, activemq, activemq-cpp

我正在使用 ActiveMQ-CPP 3.4.5 从 C++ 程序连接到消息代理。我遇到的问题与重新投递政策有关。返回到队列的消息会立即重新传递。这不是我所期望的行为。我希望在通过重新投递政策设置的特定时间段后返回消息。

这是一段代码，显示了我设置重新投递政策的方式：

```
policy = new activemq::core::policies::DefaultRedeliveryPolicy();

policy->setInitialRedeliveryDelay(0);
policy->setRedeliveryDelay(10000);
policy->setMaximumRedeliveries((int)activemq::core::RedeliveryPolicy::NO_MAXIMUM_REDELIVERIES);

connectionFactory.setRedeliveryPolicy(policy); 
```

正如我之前所说，除了要在 10000 毫秒后重新传递的消息之外，我不会，但事实并非如此。他们立即返回给消费者。

有谁知道这种行为可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:00:32.100

您将初始延迟设置为零，以便在第一次回滚事务时立即重新交付它们。如果您希望它们在第一个重新交付周期中被延迟，那么您还需要将初始延迟设置为 10000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:28:47.847

当我查看 ActiveMQ-CPP 源时，我在 ActiveMQConsumer.cpp 文件中发现了以下代码片段：

```
if( internal->redeliveryDelay > 0 && !this->internal->unconsumedMessages->isClosed() ) {
// TODO - Can't do this until we can control object lifetime.
// Start up the delivery again a little later.
// this->internal->scheduler->executeAfterDelay(
//    new StartConsumerTask(this), internal->redeliveryDelay);
    start();
} else {
    start();
} 
```

因此，似乎在回滚后根本没有考虑 redeliveryDelay 。这就是为什么，我想，我的消息在回滚后立即到达。

onMessage 方法：

```
void BaseProdListener::onMessage( const cms::Message* message ){    
log4cxx::Logger::getLogger("BaseProdListener")->info("onMessage");

_message = message;

try {
    const cms::TextMessage* textMessage = dynamic_cast< const cms::TextMessage* >( message );
    std::string text = "";
    if( textMessage != NULL ) {
        text = textMessage->getText();
        log4cxx::Logger::getLogger("BaseProdListener")->debug("Received message:" + text);
        handleMessage(text);
    }
} catch (cms::CMSException& e){
    log4cxx::Logger::getLogger("BaseProdListener")->error(e.getStackTraceString());
} 
```

}

# node.js - 如何在不重新启动服务器的情况下编辑和部署代码？

> ID：15523720
> 
> 赞同：2
> 
> 时间：2013-03-20T12:35:28.103
> 
> 标签：node.js

我有我永远使用的节点服务器。但是每次如果我编辑我的代码，我都必须重新启动服务器。我遇到了一个名为 hotnode 的模块，它可以执行实时编辑，但它是否具有与永远模块相同的性能，或者我可以使用这两个模块运行我的代码。我很困惑。任何帮助都会很有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:41:16.530

看看[nodemon](https://github.com/remy/nodemon)。

> nodemon 将监视启动 nodemon 的目录中的文件，如果它们发生更改，它将自动重新启动您的节点应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:05:22.103

作为 nodemon 的替代方案，您可以使用[node-supervisor](https://github.com/isaacs/node-supervisor)。

我曾经使用 nodemon，但由于某种原因，它没有检测到我的 linux 机器上的代码更改，而主管完美地做到了这一点。

缺点是它没有（或至少没有）给出 nodemon 给出的彩色输出。

# iscroll - iScroll4：不交互时如何隐藏滚动条

> ID：15523725
> 
> 赞同：0
> 
> 时间：2013-03-20T12:35:44.317
> 
> 标签：iscroll, iscroll4

是否可以在不滚动时隐藏滚动条，并在开始与之交互时再次显示它？

我的代码：

```
new iScroll('js-queue',{
    hideScrollbar: true
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-02T12:00:08.867

默认情况下`hidescrollbars`设置为，`true`因此无需再次将其作为参数传递。只需在您的 iScroll 呼叫中设置`hScrollbar / vScrollbar`为`false`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T14:09:13.393

我用过这个，它在我身边工作，

```
myScroll = new iScroll('wrapper', {checkDOMChanges:true, hScrollbar:false, vScrollbar:true,hideScrollbar: true,scrollbarClass: 'myScrollbar' }); 
```

# delphi - 从 Exchange 服务器 (ews) 获取日历事件？

> ID：15523726
> 
> 赞同：0
> 
> 时间：2013-03-20T12:35:46.720
> 
> 标签：delphi, exchange-server

如何使用 Delphi（不使用 Outlook）从特定 Exchange 帐户获取事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:59:39.383

我通过带有 SOAP XML 调用的[Exchange Web 服务 (EWS)来实现。](http://msdn.microsoft.com/en-us/library/exchange/bb204119%28v=exchg.140%29.aspx)我无法使用来自服务器的[WSDL （Delphi XE2）](http://en.wikipedia.org/wiki/Web_Services_Description_Language)[让它工作](https://forums.embarcadero.com/thread.jspa?threadID=60150&tstart=0)，所以现在我通过我自己的 SOAP 生成来完成这一切，使用[SOAPUI](http://www.soapui.org/)等工具进行测试/调试。这一切都是“从头开始”，所以工作量很大。

如果您只需要获取事件，它可能比我正在做的更简单（完全同步，已经工作了数周）。

如果您可以通过 Outlook 通信而不是直接与 Exchange 通信（即从客户端计算机运行时），我可以推荐[DevExpress Scheduler 组件](http://www.devexpress.com/products/vcl/ExScheduler/)。

# python - PyDev 为 2 个变量中的 1 个显示来自导入的未定义变量

> ID：15523728
> 
> 赞同：1
> 
> 时间：2013-03-20T12:35:50.653
> 
> 标签：python, pydev

## 问题

我有以下结构：

```
home.py
logic/brains/databeam.py 
```

里面`databeam.py`我有：

```
engine  = create_engine(databaseSettings(), pool_size = 20, max_overflow = 0)
Session = sessionmaker(bind = engine)
session = Session()

boom = 'boom' 
```

并在`home.py`：

```
from logic.brains.databeam import session, boom

print session
print session.query()
print boom 
```

一切都按预期工作，但 Eclipse 上的 PyDev 向我展示了这一点：

![红源](../Images/9808cf5b2e2185b62b6efa8454fdf475.png)

![错误信息](../Images/c12c1600d7b933d352cbf05b5666afa3.png)

## 这适用于...

我不使用`from logic.brains.databeam import session as session, boom as boom`，而是这样做：

```
import logic.brains.databeam
session = logic.brains.databeam.session
boom    = logic.brains.databeam.boom 
```

但这似乎不整洁，有没有更好的方法来向 PyDev 展示导入有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-02-04T21:32:23.697

非常简单的脚本在 Eclipse 2019-09 中使用 PyDev 8.1.0.202012051215 产生相同的错误：

```
import re
flag = re.ASCII 
```

似乎 PyDev 没有推断使用 globals().update() 导出的内容。以下是等效的并且有效（在这种情况下）：

```
import re
flag = re.RegexFlag.ASCII 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:46:01.547

我发现一个合理的解决方案是完全抑制这种类型的错误`PyDev`。我知道这并不完美，但绝对是我遇到的最好的。

如何更改此设置：

![pydev 设置更改](../Images/ef6c6f5114f49d243e2296cbac107e80.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-31T10:38:26.520

@Lars，我不能评论以前的帖子，所以我会把我的评论放在这里。如果你有一个错误“来自导入的未定义变量”，就像@Morgan Wilde 的查询一样，你应该在选项卡未定义而不是导入下对该选项发出警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-20T07:05:41.947

作为规避该问题的一种方法，我使用了：

[![在此处输入图像描述](../Images/c5cbe65d5d318ded468545707dacc224.png)](https://i.stack.imgur.com/bUNnl.png)

然后一堆

[![在此处输入图像描述](../Images/524a57e25544cc9fb7d9e45285f86319.png)](https://i.stack.imgur.com/he9Kz.png)

和

[![在此处输入图像描述](../Images/a64b6f6c763c837ed0f008147d61fc8c.png)](https://i.stack.imgur.com/PqYqz.png)

会出现。要隐藏它们：

[![在此处输入图像描述](../Images/cfb007e20c1d6814c56ec5f228623f53.png)](https://i.stack.imgur.com/7zOrA.png)

# php - ZF2 Curl 不发送帖子值

> ID：15523729
> 
> 赞同：2
> 
> 时间：2013-03-20T12:35:51.183
> 
> 标签：php, zend-framework2

我尝试使用本机 Zend Framework 2 http\curl 库，我可以让它将请求发送到远程应用程序我只是无法让它向它发送值。

这是我的代码，其中显示了 2 个示例，第一个使用原生 PHP curl 并且工作正常，第二个使用 ZF2 http\curl 库并且它不传递任何 POST 参数。

示例 1（原生 PHP 库）

```
 $url = $postUrl . "" . $postUri;

    $postString = "username={$username}&password={$password}";

    //This works correctly using hte native PHP sessions
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postString);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    $output = curl_exec($ch);
    curl_close($ch);

    var_dump($output); //outputs the correct response from the remote application 
```

示例 2（ZF2 库使用）

```
 $url = $postUrl . "" . $postUri;

    $postString = "username={$username}&password={$password}";

    //Does not work using ZF2 method!
    $request = new Request;

    $request->setUri($url);
    $request->setMethod('POST');

    $adapter = new Curl;

    $adapter->setOptions([
        'curloptions' => [
            CURLOPT_POST => 1,
            CURLOPT_POSTFIELDS => $postString,
            CURLOPT_HEADER => 1
        ]
    ]);

    $client = new Client;
    $client->setAdapter($adapter);

    $response = $client->dispatch($request);

    var_dump($response->getBody()); 
```

有人能指出我在哪里出错了吗？我查看了 ZF2 文档，但它们并不是最全面的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:56:25.567

您实际上不需要在`Curl`适配器上指定所有这些详细信息。这就是 ZF2 为您所做的事情：

```
$url        = $postUrl . $postUri;
$postString = "username={$username}&password={$password}";

$client = new \Zend\Http\Client();

$client->setAdapter(new \Zend\Http\Client\Adapter\Curl());

$request = new \Zend\Http\Request();

$request->setUri($url);
$request->setMethod(\Zend\Http\Request::METHOD_POST);
$request->setContent($postString);

$response = $client->dispatch($request);

var_dump($response->getContent()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T12:41:48.673

这是我用来解决此问题的解决方案。

```
 $url = $postUrl . "" . $postUri;

    $request = new Request;
    $request->getHeaders()->addHeaders([
        'Content-Type' => 'application/x-www-form-urlencoded; charset=UTF-8'
    ]);
    $request->setUri($url);
    $request->setMethod('POST'); //uncomment this if the POST is used
    $request->getPost()->set('username', $username);
    $request->getPost()->set('password', $password);

    $client = new Client;

    $client->setAdapter("Zend\Http\Client\Adapter\Curl");

    $response = $client->dispatch($request); 
```

# java - 显示图像列表时出现应用小部件问题

> ID：15523736
> 
> 赞同：1
> 
> 时间：2013-03-20T12:36:21.343
> 
> 标签：java, android, android-widget

我浏览了以下 android 文档：“App Widgets with Collections”来创建一个显示文本列表的小部件。一切正常，它就像我想要的那样工作。

现在，我不想显示文本列表，而是显示存储在 sd 卡中的图像列表。那么如何在我实现的代码中做到这一点。如果有人对此有一些想法，请帮我解决这个问题。

**我写的代码：**

**WidgetProvider.java**

```
public class WidgetProvider extends AppWidgetProvider 
{
    public static String EXTRA_WORD=
            "com.commonsware.android.appwidget.lorem.WORD";

    @Override
    public void onUpdate(Context ctxt, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) 
    {
        for (int i=0; i<appWidgetIds.length; i++) 
        {
            Intent svcIntent=new Intent(ctxt, WidgetService.class);

            svcIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[i]);
            svcIntent.setData(Uri.parse(svcIntent.toUri(Intent.URI_INTENT_SCHEME)));

            RemoteViews widget=new RemoteViews(ctxt.getPackageName(),
                    R.layout.widget);

            widget.setRemoteAdapter(appWidgetIds[i], R.id.words,
                    svcIntent);

            Intent clickIntent=new Intent(ctxt, LoremActivity.class);
            PendingIntent clickPI=PendingIntent
                    .getActivity(ctxt, 0,
                            clickIntent,
                            PendingIntent.FLAG_UPDATE_CURRENT);

            widget.setPendingIntentTemplate(R.id.words, clickPI);

            appWidgetManager.updateAppWidget(appWidgetIds[i], widget);
        }

        super.onUpdate(ctxt, appWidgetManager, appWidgetIds);
    }
} 
```

**小部件服务.java**

```
public class WidgetService extends RemoteViewsService 
{
    @Override
    public RemoteViewsFactory onGetViewFactory(Intent intent)
    {
        return(new WidgetDisplay(this.getApplicationContext(),
                intent));
    }
} 
```

**小部件显示.java**

```
public class WidgetDisplay implements RemoteViewsService.RemoteViewsFactory 
{
    private static final String[] items={"Red", "Green", "Blue", "Pink", "Orange"};
    private Context ctxt=null;
    private int appWidgetId;

    public WidgetDisplay(Context ctxt, Intent intent) 
    {
        this.ctxt=ctxt;
        appWidgetId=intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                AppWidgetManager.INVALID_APPWIDGET_ID);
    }

    @Override
    public void onCreate() 
    {
        // no-op
    }

    @Override
    public void onDestroy() 
    {
        // no-op
    }

    @Override
    public int getCount() 
    {
        return(items.length);
    }

    @Override
    public RemoteViews getViewAt(int position) 
    {
        RemoteViews row=new RemoteViews(ctxt.getPackageName(),
                R.layout.row);

        row.setTextViewText(android.R.id.text1, items[position]);

        Intent i=new Intent();
        Bundle extras=new Bundle();

        extras.putString(WidgetProvider.EXTRA_WORD, items[position]);
        i.putExtras(extras);
        row.setOnClickFillInIntent(android.R.id.text1, i);

        return(row);
    }

    @Override
    public RemoteViews getLoadingView() 
    {
        return(null);
    }

    @Override
    public int getViewTypeCount() 
    {
        return(1);
    }

    @Override
    public long getItemId(int position) 
    {
        return(position);
    }

    @Override
    public boolean hasStableIds() 
    {
        return(true);
    }

    @Override
    public void onDataSetChanged() 
    {
        // no-op
    }
} 
```

**XML 文件**

**小部件.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/words"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:layout_marginTop="3dp"
  android:layout_marginLeft="3dp"
  android:background="@drawable/widget_frame"
/> 
```

**行.xml**

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:paddingLeft="6dip"
    android:minHeight="?android:attr/listPreferredItemHeight"   
/> 
```

**Widget_provider.xml**

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
  android:minWidth="146dip"
  android:minHeight="146dip"
  android:updatePeriodMillis="0"
  android:initialLayout="@layout/widget"
  android:autoAdvanceViewId="@+id/words"
  android:previewImage="@drawable/preview"
  android:resizeMode="vertical"
/> 
```

**我得到的小部件的屏幕截图**

![在此处输入图像描述](../Images/7e926d9d8f9288c8ae01d3e71f5bfecf.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:38:27.727

我习惯了这种方式并且工作得很好。

**在row.xml 中将**textview 更改为 imageview

 **```
public WidgetDisplay(Context ctxt, Intent intent) 
    {
        this.ctxt=ctxt;
        appWidgetId=intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                AppWidgetManager.INVALID_APPWIDGET_ID);
                setImageinView(this.ctxt);
    }

private void setImageinView(Context context) {
//read sd card and store bitmap in  arrayListBitmap;
}

@Override
public RemoteViews getViewAt(int position) {
remoteView = new RemoteViews(ctxt.getPackageName(), R.layout.row);
    remoteView.setImageViewBitmap(R.id.image_photo1,arrayListBitmap.get(i));
} 
```

很简单，您必须将 sd 卡存储数据读取到 arraylist。

将大小设置为**getCount()**。

现在在您的图像视图中设置图像。

如果有任何疑问，那么欢迎。**

# freebase - 在 MQL 查询中列出几种类型的属性

> ID：15523739
> 
> 赞同：1
> 
> 时间：2013-03-20T12:36:28.640
> 
> 标签：freebase, mql

再会！

我想获得有关几场灾难的信息。所以，我问这个查询：

```
[{
 "type": "/event/disaster",
 "*": null,
 "limit": 10
}] 
```

好的，但我还需要 /time/event 属性，例如 start_date。我正在尝试这个：

```
[{
 "type": "/event/disaster",
 "type": "/time/event",
 "*": null,
 "limit": 10
}] 
```

又一次只得到 /event/disaster 属性，因为 type : time/event 固有地转换为“ns0:type”。我也试过这个：

```
[{
 "type": ["/event/disaster", /time/event"],
 "*": null,
 "limit": 10
}] 
```

但有错误。我应该如何制定查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:18:55.363

MQL 属性通配符 (*) 只能应用于一种类型，因此您需要单独列出您希望看到的属性，如下所示：

```
[{
  "type": "/event/disaster",
  "/time/event/start_date": null,
  "*": null,
  "limit": 10
}] 
```

另一种方法是使用[Search API](https://developers.google.com/freebase/v1/search-overview)指定要返回的属性值（按类型或域），如下所示：

```
?filter=(all type:/event/disaster)
&output=(all:/event/disaster all:/time/event) 
```

# jquery - 是否可以抑制父母的 :active 伪类？

> ID：15523744
> 
> 赞同：5
> 
> 时间：2013-03-20T12:36:40.193
> 
> 标签：jquery, html, css

我有以下标记：

```
<div class="parent">
  I should change my color to green when clicked
  <div class="element">I should do nothing when clicked</div>
</div> 
```

这是相关的CSS：

```
.parent {
  width:200px;
  height:200px;
  background: red;
  color: #fff;
}
.parent:active {
  background:green;
}
.element {
  background:blue;
} 
```

有什么方法可以防止点击时触发`.parent`的`:active`伪类`.element`？尝试点击`e.stopPropogation()`时`.element`没有运气。 [演示](http://codepen.io/anon/pen/cKgHD)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:42:37.917

您可以只使用 jQuery 而不是`:active`，就像在这个[演示（链接）](http://codepen.io/anon/pen/dEBfC)中一样。

```
$('.element').mousedown(function(e){
  e.stopPropagation();
});

$('.parent').mousedown(function(e){
  $('.parent').css('background', 'green')
    }).mouseup(function(e){
  $('.parent').css('background', 'red')
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:55:51.667

如何在父母上介绍一个额外的课程，例如`allow-active`

```
<div class="parent allow-active"> 
```

然后修改你的css`.parent:active`变成

```
.parent.allow-active:active {
    background:green;
} 
```

这意味着只有当 div 有`parent`和`allow-active`类时颜色才会改变

然后用一点 jQuery 来切换`allow-active`类

```
$('.element').mousedown(function(e){
    $('.parent').removeClass('allow-active');
}).mouseup(function(e){
    $('.parent').addClass('allow-active');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:54:23.680

Doorknob 的替代解决方案是使用`event.target`：

```
$('.parent').mousedown(function(e){
    if ($(e.target).is(this))
        $('.parent').css('background', 'green');
}).mouseup(function(e){
    if ($(e.target).is(this))
        $('.parent').css('background', 'red');
}); 
```

[演示](http://codepen.io/anon/pen/yJALb)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:49:29.257

可以用js

```
$(document).ready(function(){
    $(".parent").click(function(){
$(this).css("background","green")
    });
   $(".parent .element").click(function(e) {
       return false;
   });
}); 
```

和CSS

```
.parent {
  width:200px;
  height:200px;
  background: red;
  color: #fff;

}
.parent:active {

}
.element {
  background:blue;

} 
```

HTML 是一样的

# javascript - 谷歌地图用额外的细节填充文本字段

> ID：15523747
> 
> 赞同：0
> 
> 时间：2013-03-20T12:36:51.263
> 
> 标签：javascript, api, google-maps

我正在尝试使用数据库中的信息填充带有 dblclick 事件的文本字段。当我双击标记时，会使用不正确的信息来填充字段。我双击任何标记都会得到相同的值。我尝试了各种方法来引用 colid、driver 和 vehicle 值，但如果我更改任何内容，我得到的只是该字段中的未知值。

```
map = new google.maps.Map(document.getElementById("map"), map_options);
var infoWindow = new google.maps.InfoWindow;

downloadUrl(url, function(data) {
var xml = data.responseXML;
var markers = xml.documentElement.getElementsByTagName("marker");
for (var i = 0; i < markers.length; i++) {
var ThisMarker = markers[i];
var InfoText = ThisMarker.getAttribute("InfoText");
var colid = ThisMarker.getAttribute("colid");
var driver = ThisMarker.getAttribute("driver");
var vehicle_reg = ThisMarker.getAttribute("vehicle");
var mtype = ThisMarker.getAttribute("type");
var point = new google.maps.LatLng(
    parseFloat(ThisMarker.getAttribute("lat")),
    parseFloat(ThisMarker.getAttribute("lng"))
);
var icon = customIcons[mtype] || {};
var marker = new google.maps.Marker({
    map: map,
    position: point,
    icon: icon.icon,
    clickable: true
});

bindInfoWindow(marker, map, infoWindow, InfoText);

if(mtype == 'col' || mtype == 'del') {
google.maps.event.addListener(marker, 'dblclick', function() {
document.getElementById("collivery_id").value = colid;
document.getElementById("command").value = 'action';
});
}

if(mtype == 'bike' || mtype == 'car' || mtype == 'bakkie' || mtype == 'truck') {
    google.maps.event.addListener(marker, 'dblclick', function() {
    document.getElementById("driver").value = driver;
    document.getElementById("vehicle").value = vehicle_reg;
});
}
}
});

function bindInfoWindow(marker, map, infoWindow, InfoText) {
    google.maps.event.addListener(marker, 'mouseover', function() {
    infoWindow.setContent(InfoText);
    infoWindow.open(map, marker);
});
google.maps.event.addListener(marker, 'mouseout', function() {
    infoWindow.close(map, marker);
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:57:45.283

使用函数闭包的可能解决方案：

```
map = new google.maps.Map(document.getElementById("map"), map_options);
var infoWindow = new google.maps.InfoWindow;

downloadUrl(url, function(data) {
  var xml = data.responseXML;
  var markers = xml.documentElement.getElementsByTagName("marker");
  for (var i = 0; i < markers.length; i++) {
    var ThisMarker = markers[i];
    var InfoText = ThisMarker.getAttribute("InfoText");
    var colid = ThisMarker.getAttribute("colid");
    var driver = ThisMarker.getAttribute("driver");
    var vehicle_reg = ThisMarker.getAttribute("vehicle");
    var mtype = ThisMarker.getAttribute("type");
    var point = new google.maps.LatLng(
      parseFloat(ThisMarker.getAttribute("lat")),
      parseFloat(ThisMarker.getAttribute("lng"))
    );
    var icon = customIcons[mtype] || {};
    var marker = new google.maps.Marker({
      map: map,
      position: point,
      icon: icon.icon,
      clickable: true
    });

    bindInfoWindow(marker, map, infoWindow, ThisMarker);
});

function bindInfoWindow(marker, map, infoWindow, marker)
{
  var InfoText = marker.getAttribute("InfoText");
  var colid = marker.getAttribute("colid");
  var driver = marker.getAttribute("driver");
  var vehicle_reg = marker.getAttribute("vehicle");
  var mtype = marker.getAttribute("type");
  if(mtype == 'col' || mtype == 'del') {
    google.maps.event.addListener(marker, 'dblclick', function() {
      document.getElementById("collivery_id").value = colid;
      document.getElementById("command").value = 'action';
    });
  }
  if(mtype == 'bike' || mtype == 'car' || mtype == 'bakkie' || mtype == 'truck') {
    google.maps.event.addListener(marker, 'dblclick', function() {
      document.getElementById("driver").value = driver;
      document.getElementById("vehicle").value = vehicle_reg;
    });
  }
  // whatever code is currently in your bindInfoWindow function
  // possibly this:
  google.maps.event.addListener(marker, 'mouseover', function() {
    infoWindow.setContent(InfoText);
    infoWindow.open(map, marker);
  });
  google.maps.event.addListener(marker, 'mouseout', function() {
    infoWindow.close(map, marker);
  });
} 
```

# c - 在具有结构的 c 中使用 Shmget()

> ID：15523749
> 
> 赞同：0
> 
> 时间：2013-03-20T12:36:56.067
> 
> 标签：c, shared-memory

我在 OSx 上使用 C 并使用 shmget() 来获取要在两个不同程序之间使用的内存我有一个 2 个 int 值的结构这是否意味着如果我想要一个 27 的大小而不是它必须是 54，这将如何工作使用用于结构的指针或任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:41:25.147

不，您需要在结构上使用 sizeof 。您无法保证实现将如何填充结构内的值，因此您不必假设它们的大小。此外，如果稍后由于向结构添加成员而改变大小，内存分配仍将正常工作。

然后使用 sizeof 中的该值乘以您打算在共享内存区域中使用的结构的实例数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-30T10:24:40.680

假设你有一个这样的结构：

```
typedef struct {
    int aCount;
    int bCount;
    int cCount;
} data_t; 
```

以下函数将为指定大小创建共享内存。

```
int shared_memory_create(size_t memory_size)
{
    int shm_key = shmget(IPC_PRIVATE, memory_size, IPC_CREAT | IPC_EXCL | 0666);
    if(shm_key < 0) {
        perror("Failed to Create Shared Memory Key");
        exit(0);
    }

    return shm_key;
} 
```

如果要创建共享内存以容纳 27 个元素，请调用函数***shared_memory_create***，如下所示：

```
shm_key = shared_memory_create(27*sizeof(data_t)); 
```

# iphone - 如何从命令行在 iPhone 上启动 OCUnit 测试

> ID：15523753
> 
> 赞同：2
> 
> 时间：2013-03-20T12:37:02.383
> 
> 标签：iphone, command-line, ocunit, octest

我想在不使用 Xcode 的情况下在 iPhone 上运行单元测试。是否有任何命令行实用程序可以在 iPhone 设备上运行 OCunit 测试。我也尝试过fruit-strap，但它只启动 App 而不是 OCtests。“fruitstrap -d path_of_app”这个命令安装应用程序，但我没有找到任何在 iPhone 上安装和运行 octest 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:07:02.073

看看我最近打开的类似问题：[是否有任何基于非 Xcode 的 Objective-C 命令行测试工具](https://stackoverflow.com/questions/15714356/is-there-any-non-xcode-based-command-line-unit-testing-tool-for-objective-c)。

@MalteTancred 给出了答案。我正在尝试使他的回答适应我的项目，并且可以说在命令行中手工制作时让这些东西（Xcode 开箱即用）工作并不是一件容易的事。

# parsing - 在 Haskell 中编译时解析错误 (x + 1)

> ID：15523757
> 
> 赞同：0
> 
> 时间：2013-03-20T12:37:13.673
> 
> 标签：parsing, haskell, compilation

我正在做这项任务，我迫切希望让它发挥作用。我知道这不是最聪明的方法，也不是最有效的方法。我这样做纯粹是因为我想测试这段代码的效率有多低。

```
transition_from_conductor :: Element_w_Coord Cell -> List_2D Cell -> Cell
transition_from_conductor element world = case num_of_heads_around_conductor (0, element) world of
    1 -> Head
    2 -> Head
    _ -> Conductor
    where
        num_of_heads_around_conductor :: (Int, Element_w_Coord Cell) -> List_2D Cell -> Int
        num_of_heads_around_conductor (i, (cell, (x, y))) ((w_cell, (w_x, w_y): rest)) = case rest of
            [] -> i
            _  -> case (w_cell, w_x, w_y) of
                (Head, (x + 1),  y)        -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
                (Head, (x + 1), (y + 1))   -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
                (Head, (x + 1), (y - 1))   -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
                (Head, (x - 1),  y)        -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
                (Head, (x - 1), (y + 1))   -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
                (Head, (x - 1), (y - 1))   -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
                (Head,  x,      (y + 1))   -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
                (Head,  x,      (y - 1))   -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
                _                          -> num_of_heads_around_conductor ( i     , (cell, (x, y))) (rest) 
```

如果我尝试在终端中运行它，它会给我解析错误 (x + 1)

```
(Head, (x + 1), y) ..... 
```

我做错了什么？我该如何解决？

一些东西...

```
type List_2D e = [Element_w_Coord e]
type Element_w_Coord e = (e, Coord)
type Coord = (X_Coord, Y_Coord)
type X_Coord = Integer
type Y_Coord = Integer 
```

谢谢大家 :D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:04:55.997

您使用的是“n + k”模式，该模式已从语言中删除。您不能再使用“+”对整数进行模式匹配。在大多数情况下，模式匹配仅限于构造函数和文字。

为了达到与模式匹配相同的结果，我建议：

```
(Head, x0,  y)        -> let x = x0 - 1 in ... 
```

请注意，此代码还有更多错误 - 模式匹配是重叠的。例如：即使有 n+k 支持，也不会出现以下模式：

```
(Head, (x + 1),  y) 
```

失败和下一个模式：

```
(Head, (x + 1), (y + 1)) 
```

成功。换句话说，你有许多永远无法执行的案例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:19:47.450

这里有两点错误：

*   您不能在模式中使用算术表达式
*   当您尝试进行模式匹配`x`并且`y`您打算将模式的这些部分限制为等于现有的`x`和`y`变量时，而是创建新的变量`x`和`y`

我会使用警卫。

```
_  -> case (w_cell, w_x, w_y) of
    (Head, x', y')
        | x' == x + 1 && y' == y     -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
        | x' == x + 1 && y' == y + 1 -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
        | x' == x + 1 && y' == y - 1 -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
        | x' == x - 1 && y' == y     -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
        | x' == x - 1 && y' == y + 1 -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
        | x' == x - 1 && y' == y - 1 -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
        | x' == x     && y' == y + 1 -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
        | x' == x     && y' == y - 1 -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
    _                                -> num_of_heads_around_conductor ( i     , (cell, (x, y))) (rest) 
```

然后简化：

```
_  -> case (w_cell, w_x, w_y) of
    (Head, x', y')
        |    x' == x + 1 && (y' == y || y' == y + 1 || y' == y - 1)
          || x' == x - 1 && (y' == y || y' == y + 1 || y' == y - 1)
          || x' == x     &&            (y' == y + 1 || y' == y - 1)
        -> num_of_heads_around_conductor ((i + 1), (cell, (x, y))) (rest)
    _   -> num_of_heads_around_conductor ( i     , (cell, (x, y))) (rest) 
```

毫无疑问，这可以进一步简化。

# html - 为什么图像中的标题属性不显示为工具提示

> ID：15523760
> 
> 赞同：0
> 
> 时间：2013-03-20T12:37:21.793
> 
> 标签：html, image, tags, title

我在获取图像标签中弹出的标题属性时遇到问题。有问题的页面位于[http://design.wildsandwebdesign.co.uk/technical/using-delphi-with-mysql-1.php](http://design.wildsandwebdesign.co.uk/technical/using-delphi-with-mysql-1.php)。有 4 张图片，标题和 alt 属性中都有文字。在 Firefox 19.0.2 或在 WinXP 中运行的 Chrome 或 Opera 中没有出现任何标题，但它们在 IE8 中出现（哎呀！）。W3C 验证器说页面是干净的。

我的网站有许多其他页面，其中图像中的标题属性确实有效，只有几个有同样的问题。我尝试提高图像的 z-index，但没有运气。当页面上有 3] 图像时，似乎会发生这种情况，但在其他页面上有 3 或 4 个图像时它确实有效。我根本想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:39:35.243

因为您的图像与您的`p`元素重叠

![在此处输入图像描述](../Images/c9ae8d3828aa851b5efa02ccbc739779.png)

从标签中删除`width`和`position`属性，并使用's 和's 代替。`p``margin``padding`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:41:18.670

这是因为没有看到图像被悬停在上面，因为`p`元素覆盖了它们。

如果您将鼠标悬停在第一张图像最左边的几个像素上，您可以获得工具提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:47:05.747

是的，我知道你没有回答自己的问题，但最后我自己找到了答案，我有点失望，有些答案没有抓住重点。是的，很明显文字是“在图像前面”。坦率地说，我认为这是显而易见的，并认为这是理所当然的。我的错。然而，事情就是这样。浏览器知道当它看到这个结构时，它必须将以下文本放在图像的右侧或左侧，并且它会这样做。然而，它忽略了它位于图像旁边并阻止工具提示显示的事实。浏览器也知道光标在哪里，或者它一开始就无法做到这一点。

也许这源于 W3C 已经定义了浏览器如何处理内联图像而不考虑它。但最终，一旦我弄清楚“为什么”会发生这种情况，就很容易找到答案。尽管我必须自己做。

吉姆

# string - 使用 sed 在字符串之间添加多个字符串

> ID：15523765
> 
> 赞同：0
> 
> 时间：2013-03-20T12:37:38.483
> 
> 标签：string, command-line, sed

我正在玩 sed 对文本进行操作。输入类似于：

```
가가라  a b a e
블랙  c dd we df
사무소    as le we 
```

我需要在上面添加一些格式，所以输出应该是：

```
id { id: "가가라" } value { val: "a b a e"} word { word: "가가라"}
id { id: "블랙" } value { val: "c dd we df"} word { word: "블랙"}
id { id: "사무소" } value { val: "as le we"} word { word: "사무소"} 
```

问题是，我知道如何在刺之前和之后添加字符串：

在字符串的开头添加字符串：

```
sed 's/^/id \{ id: \"/' 
```

在字符串末尾添加字符串：

```
sed 's/$/\"\} word \{ word: \"/' 
```

但是，当我尝试在每行末尾添加字符 가라 时，我尝试的这个命令不起作用：

```
sed -r 's/(id\s\{\sid:\s\")([^a-z]*)[\sa-z]{1,10}(\"\}\sword\s\{\sword:\s\")/\1\2\3\2/' 
```

另外我不确定如何在字符串 가라 和 aba e 之间添加字符串。我尝试使用正则表达式，但似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:42:59.837

从您的 sed 行来看，您似乎对匹配模式和替换感到困惑。

试试这条 sed 线：

```
sed -r 's/(\S+)\s*(.*)/id { id: "\1" } value { val: "\2"} word { word: "\1"}/' file 
```

用你的数据测试：

```
kent$  echo "가가라  a b a e
블랙  c dd we df
사무소    as le we"|sed -r 's/(\S+)\s*(.*)/id { id: "\1" } value { val: "\2"} word { word: "\1"}/'                             
id { id: "가가라" } value { val: "a b a e"} word { word: "가가라"}
id { id: "블랙" } value { val: "c dd we df"} word { word: "블랙"}
id { id: "사무소" } value { val: "as le we"} word { word: "사무소"} 
```

# firefox - Firefox 中的 Sansation Light 错误

> ID：15523766
> 
> 赞同：2
> 
> 时间：2013-03-20T12:37:38.717
> 
> 标签：firefox, fonts

我在我的网站和 Firefox 中使用 Sansation Light 字体，我注意到序列`ff`, `fi`,`fl`呈现为正方形的不良影响。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T00:11:59.373

禁用连字以使其正确显示。为我工作。

```
-moz-font-feature-settings: "liga" off; 
```

[https://developer.mozilla.org/en/CSS/font-feature-settings](https://developer.mozilla.org/en/CSS/font-feature-settings)

# php - 如何编辑在codeIgniter中有下拉菜单的用户表单？

> ID：15523767
> 
> 赞同：0
> 
> 时间：2013-03-20T12:37:40.163
> 
> 标签：php, html, forms, codeigniter

我在管理模块中有用户。针对每个用户行，我都有编辑用户选项。当管理员单击该编辑用户选项时。他将看到带有字段的编辑用户表单。在这些表单字段中，其中一个字段是下拉列表，它是用户配置文件类型。

现在从数据库中，我将获得有关该用户的所有详细信息的数组，管理员编辑称为`$user_details`. 但是从数据库中我会得到像这样的字段名称中的用户配置文件ID`$user_details['profile_id'];`

同时，我有另一个数组，它将配置文件 ID 与配置文件名称映射。这被称为`$profile`

现在，当管理员首先单击编辑时，他需要在编辑之前查看该用户的 profile_name。当他单击该下拉菜单时，他需要查看可用于更改的配置文件类型。

我不知道如何做到这一点。

但这就是我尝试过的

```
<label>Profile: <?php echo form_error('profile'); ?></label> <br />
       <select class="styled" name="profile_id">
           <?php foreach($profiles as $profile) { ?>
               <option value="<?php echo $profile['profile_id']?>" <?php if ( set_value('profile_id') == $user_details['profile_id']) {?>selected="selected"<? } ?>><?php echo $profile['profile_name']?></option>
           <?php } ?>
      </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:03:56.060

如果您要使用 Codeigniter 的内置 form_dropdown，这很容易

```
$options    =   array();
foreach($profiles as $profile){
    $options[$profile['id']]    =   $profile['profile_name'];
}
$select =   isset($user_details['profile_id']) ? $user_details['profile_id'] : 0;

form_dropdown('profile_id',$options , $select , 'class= "styled" '); 
```

它需要4个参数。第 3 和第 4 是可选的。第 3 个是您要选择的键，第 4 个用于其他属性，如 class 、 id 等。第一个是名称，第二个是数组。

有关详细信息，请参阅[表单下拉](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)用户指南。

# xml - 使用jmeter中的xsd验证其属性值在其中包含引号的xml

> ID：15523769
> 
> 赞同：0
> 
> 时间：2013-03-20T12:37:47.643
> 
> 标签：xml, xsd, jmeter

我有一个 xml，其属性在值中包含引号。有没有可能用 xsd 验证 xml 的方法？

XML：

```
<root>
    <item size="11"x17""/>
</root> 
```

错误：

```
Error displayed: Assertion failure message: fatal: line=5 col=268 Element type "item" must be followed by either attribute specifications, ">" or "/>". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:55:11.383

据我了解，您正在使用 jmeter 的[XML Schema Assertion](http://jmeter.apache.org/usermanual/component_reference.html#XML_Schema_Assertion)。

您也可以尝试手动针对 xsd 验证您的 xml：只需使用相应的 java 代码，例如[BeanShell Assertion](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Assertion)或[BeanShell PostProcessor](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_PostProcessor)；这是一个非常好的工作解决方案：[https](https://stackoverflow.com/a/16054/993246) ://stackoverflow.com/a/16054/993246 （您也可以使用任何其他您想要的）。

# objective-c - 高效执行多重比较

> ID：15523777
> 
> 赞同：1
> 
> 时间：2013-03-20T12:38:07.257
> 
> 标签：objective-c, if-statement, floating-point

我的 Objective-C 代码有问题。我想`if`在公式中声明一个条件，就像 a`float`等于我定义的其他 5 个之一一样检查条件。但比以下更短更简单：

```
 if (float1 == float5 || float1 == float2 || float1 == float3 || float1 == float11)
 {
        //something to do
 } 
```

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:57:35.003

假设您可以通过定义或应用 roundf()、floorf()、ceilf() 来保证浮点数*是*整数，这是一个可能的解决方案：

```
const NSUInteger LENGTH = 7;
float myNumbersToCheck[LENGTH] = {1,13,6,8,99,126,459674598};
for (NSUInteger index = 0; index < LENGTH; index++) {
  if (float1 == myNumbersToCheck[index]) {
     // do something
     break;
  }
} 
```

# c++ - 在 MVP 中围绕层移动数据的众所周知的方法是什么

> ID：15523780
> 
> 赞同：1
> 
> 时间：2013-03-20T12:38:21.107
> 
> 标签：c++, design-patterns, data-binding, mvp

我正在开发一个使用 MVP 模式的应用程序。它仍处于开发初期，所以我仍然可以对不同的设计选择进行批判性反思。

**模型**由一些结构和一些对其进行操作的 API 函数组成，为了清楚起见，假设这是模型：

```
struct ComplexNumber {
    double real;
    double imag;
};

Complex_Add(ComplexNumber x, ComplexNumber y);
Complex_Mul(ComplexNumber x, ComplexNumber y); 
```

然后是**View**。我在这里只使用原始类型。

```
class IComplexView {
public:

    virtual double GetReal1() = 0;
    virtual double GetImag1() = 0;

    virtual double GetReal2() = 0;
    virtual double GetImag2() = 0;
    // Setters snipped
}; 
```

现在在**Presenter**中，据我所知，我将有一些方法用于 View-to-Model 和 Model-to-View 数据转换。我通常有一个 ReadView() 和一个 UpdateView() 方法。所以演示者的那部分看起来非常接近这个：

```
class ComplexPresenter {
    ICopmlexView view;
    ComplexNumber x;
    ComplexNumber y;

    // ...

    static void ReadView() {
        x.real = view.GetReal1();
        x.imag = view.GetImag1();

        y.real = view.GetReal2();
        y.imag = view.GetImag2();
    }
} 
```

`UpdateView()`将是相反的方式，以便从模型中填充视图。

有了这种设置，问题是： *除了上面简单的方法之外，是否有一些“聪明”的方法可以将视图中的变量/属性绑定到模型中的一个？*

我看到的问题是相对大量的添加代码只是为了移动数据。首先我们在 IView 中有访问者，然后是 ReadView() 和 UpdateView() 方法。我认为脚本可以连接到构建事件并自动生成所有这些代码，但我希望会有其他我没有注意到的替代方案。

另一种方法是完全删除 MVP，或者更具体地讲，删除演示者，只使用 UI<->Logic 分离，仅此而已。明显的缺点是更强的耦合，但另一方面，它可能会产生明显更少的代码量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:54:58.583

您所描述的 MVP 变体可能被称为`Passive View`- 在[这里查看 Martin Fowler 关于它的条目](http://martinfowler.com/eaaDev/PassiveScreen.html)。它的缺点确实是有很多样板代码来同步模型和视图。使用某种`data binding`机制的替代方法是 [`Supervising Controller`](http://martinfowler.com/eaaDev/SupervisingPresenter.html)or [`Presentation Model`(aka `View Model`)](http://martinfowler.com/eaaDev/PresentationModel.html)。

> 放下演示者，只需要一个 UI<-> 逻辑分离就可以了

这里的一个危险是绑定机制可能无法处理复杂的情况

一般来说，考虑以下两种解决方案：

*   `Presentation Model`可以使用两层绑定：*view-to-presentation-model*和*presentation-model-to-domain-model*绑定。它保持较低的耦合，但实现这两种机制本身可能很乏味。

*   `Supervising Controller`使用*视图到域模型*绑定，并且它本身只处理绑定机制无法处理的复杂情况，因此您可以两全其美。

# assembly - 对 3 个向量求和并在 neon 中得到结果

> ID：15523782
> 
> 赞同：0
> 
> 时间：2013-03-20T12:38:24.993
> 
> 标签：assembly, arm, simd, neon

我正在尝试对 d0、d1、d2 + d3、d4、d5+ d6、d7、d8 求和。我不知道最好的指令，然后取平均值为 9。我知道如何使用近似值进行平均，但是将这些车道求和，我找不到相应的指令？我也有不正确的输出图像，所以我怀疑平均操作是否正确。

```
inline void downsample3dOnePass( uint8_t* src, uint8_t *dst, int srcWidth)
{

    for (int r = 0; r < (int)srcWidth/3; r++)
    {
       // load 24 pixels (grayscale)
       uint8x8x3_t r0       = vld3_u8(src);
       // move to next 24 byes
       src+=24;
       uint8x8x3_t r1       = vld3_u8(src);
       src+=24;
       uint8x8x3_t r2       = vld3_u8(src);

       uint16x8_t  d0  = vmovl_u8(r0.val[0]);
       uint16x8_t  d1  = vmovl_u8(r0.val[1]);
       uint16x8_t  d2  = vmovl_u8(r0.val[2]);

       uint16x8_t  d3  = vmovl_u8(r1.val[0]);
       uint16x8_t  d4  = vmovl_u8(r1.val[1]);
       uint16x8_t  d5  = vmovl_u8(r1.val[2]);

       uint16x8_t  d6  = vmovl_u8(r2.val[0]);
       uint16x8_t  d7  = vmovl_u8(r2.val[1]);
       uint16x8_t  d8  = vmovl_u8(r2.val[2]);

       uint16x8_t d0d3Sum      = vaddq_u16 ( d0, d3);
       uint16x8_t d0d3d6Sum    = vaddq_u16 ( d0d3Sum,  d6 );

       uint16x8_t d1d4Sum      = vaddq_u16 ( d1, d4);
       uint16x8_t d1d4d7Sum    = vaddq_u16 ( d1d4Sum, d7);

       uint16x8_t d2d5Sum      = vaddq_u16 ( d2, d5 );
       uint16x8_t d2d5d8Sum    = vaddq_u16 ( d2d5Sum, d8);

       uint16x8_t firstSum     = vaddq_u16(d0d3d6Sum, d1d4d7Sum);
       uint16x8_t secondSum    = vaddq_u16(firstSum, d2d5d8Sum);
       uint16x8_t totalSum     = vaddq_u16 ( firstSum, secondSum);

       // average = r0+r1+r2/8 ~9 for test
       uint16x8_t totalAverage = vshrq_n_u16(totalSum,3);
       uint8x8_t  finalValue   = vmovn_u16(totalAverage);
       // store 8 bytes
       vst1_u8(dst, finalValue);

       src+=24;
       // move to next row
       dst+=8;

   }

}

void downsample3d( uint8_t* src, uint8_t *dest, int srcWidth, int srcHeight )
{
    for (int r = 0; r < (int)srcHeight/3; r++)
    {
         downsample3dOnePass(src, dest, srcWidth);
    }
} 
```

更新：根据bitbank的回答：

```
 inline void downsample3dOnePass( uint8_t* src, uint8_t *dst, int srcWidth, int srcHeight, int strideSrc, int strideDest)
    {
        int iDestPitch = (strideDest);
        uint8_t *s, *d;
        uint8x8x3_t u88line0;
        uint8x8x3_t u88line1;
        uint8x8x3_t u88line2;
        uint8x8_t   u88Final;
        uint16x8_t  u168Sum;
        int16x8_t   i168divisor = vdupq_n_s16(7282/2); // 65536/9 - used with doubling saturating return high multiply

        for (int r = 0; r < srcHeight/3; r++)
        {
            d = &dst[iDestPitch * r];
            s = &src[srcWidth * r*3];

            for (int c = 0; c < srcWidth/3; c+=8)
            {
                // load 8 sets of 3x3 pixels (grayscale)
                u88line0 = vld3_u8(&s[0]);
                u88line1 = vld3_u8(&s[srcWidth]);
                u88line2 = vld3_u8(&s[srcWidth*2]);
                s += 24;
                // Sum vertically
                u168Sum = vaddl_u8(u88line0.val[0], u88line0.val[1]); // add with widening
                u168Sum = vaddw_u8(u168Sum, u88line0.val[2]); // accumulate with widening (horizontally)
                u168Sum = vaddw_u8(u168Sum, u88line1.val[0]); // add the other vectors together
                u168Sum = vaddw_u8(u168Sum, u88line1.val[1]);
                u168Sum = vaddw_u8(u168Sum, u88line1.val[2]);
                u168Sum = vaddw_u8(u168Sum, u88line2.val[0]);
                u168Sum = vaddw_u8(u168Sum, u88line2.val[1]);
                u168Sum = vaddw_u8(u168Sum, u88line2.val[2]);
                // we now have the 8 sets of 3x3 pixels summed to 8 16-bit values
                // To divide by 9 we will instead multiply by the inverse (65536/9) = 7282
                u168Sum = vreinterpretq_u16_s16(vqrdmulhq_s16(i168divisor, vreinterpretq_s16_u16(u168Sum)));
                u88Final = vmovn_u16(u168Sum); // narrow to 8 bits
                // store 8 bytes
                vst1_u8(d, u88Final);
                d += 8;
            } // for column
        } // for row
    }

usage: 
//1280*920*grayscale
QImage normalImage("/data/normal_image.png");

uint8_t *resultImage = new uint8_t[440*306];
  downsample3dOnePass(normalImage.bits(),resultImage, normalImage.width(), normalImage.height(), 1280, 440); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:06:36.193

您的代码有几个问题。NEON 内在函数在 VLDx 处理方面非常糟糕，但您的大错误是您溢出了字节值并水平而不是垂直加载像素。这是一个更好的算法，它将一次将 8*3x3 源像素处理成 8 个目标像素。您的函数也缺少 rows 参数。

```
inline void downsample3dOnePass( uint8_t* src, uint8_t *dst, int srcWidth, int srcHeight)
{
int iDestPitch = ((srcWidth/3)+3) & 0xfffffffc; // DWORD aligned
uint8_t *s, *d;
uint8x8x3_t u88line0, u88line, u88line2;
uint8x8_t u88Final;
uint16x8_t u168Sum;
int16x8_t i168divisor = vdupq_n_s16(7282/2); // 65536/9 - used with doubling saturating return high multiply

  for (int r = 0; r < srcHeight/3; r++)
    {
    d = &dst[iDestPitch * r];
    s = &src[srcWidth * r*3];

    for (int c = 0; c < srcWidth/3; c+=8)
    {
       // load 8 sets of 3x3 pixels (grayscale)
       u88line0 = vld3_u8(&s[0]);
       u88line1 = vld3_u8(&s[srcWidth]);
       u88line2 = vld3_u8(&s[srcWidth*2]);
       s += 24;
       // Sum vertically
       u168Sum = vaddl_u8(u88Line0.val[0], u88Line0.val[1]); // add with widening
       u168Sum = vaddw_u8(u168Sum, u88Line0.val[2]); // accumulate with widening (horizontally)
       u168Sum = vaddw_u8(u168Sum, u88Line1.val[0]); // add the other vectors together
       u168Sum = vaddw_u8(u168Sum, u88Line1.val[1]);
       u168Sum = vaddw_u8(u168Sum, u88Line1.val[2]);
       u168Sum = vaddw_u8(u168Sum, u88Line2.val[0]);
       u168Sum = vaddw_u8(u168Sum, u88Line2.val[1]);
       u168Sum = vaddw_u8(u168Sum, u88Line2.val[2]);
       // we now have the 8 sets of 3x3 pixels summed to 8 16-bit values   
       // To divide by 9 we will instead multiply by the inverse (65536/9) = 7282
       u168Sum = vreinterpretq_u16_s16(vqrdmulhq_s16(i168divisor, vreinterpretq_s16_u16(u168Sum)));
       u88Final = vmovn_u16(u168Sum); // narrow to 8 bits
       // store 8 bytes
       vst1_u8(d, u88Final);
       d += 8;    
   } // for column
} // for row 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:00:16.240

为了避免在将几个向量的字节相加时发生溢出，您应该在求和之前从字节扩展为半字（16 位）。将所有像素相加并划分结果后，您可以将结果缩小回字节。

用于在 GCC 中将字节扩展为半字的 NEON 内在函数是
`uint16x8_t vmovl_u8 (uint8x8_t)`

相应的缩小内在函数是
`uint8x8_t vmovn_u16 (uint16x8_t)`

请注意，如果将 9 个像素相加并除以 8，则在缩小回字节时仍可能存在溢出风险。在这种情况下，您可以使用`vqmovn_u16`which 表现得像`vmovn_u16`但也执行饱和。

# android - 使用 android MediaPlayer 进行无缝播放

> ID：15523788
> 
> 赞同：4
> 
> 时间：2013-03-20T12:38:45.910
> 
> 标签：android, media-player

我正在尝试连续重复播放音频，没有任何间隙。我试过了，

```
mediaplayer.setLooping(true); 
```

但它给出了重复时间之间的差距。并尝试了这个，

```
mediaplayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener()  {
    @Override
    public void onCompletion(MediaPlayer mp)
    {
        mediaplayer.start();
    }
}); 
```

它也给了一个差距。我尝试过不同的音频格式。但两种方法都不适合我。android中还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T14:40:48.523

当播放完成时，播放器引擎将检查是否所有曲目都已完成，一旦完成，它将检查`looping`标志。基于`looping`标志，一`seek`到`0`秒。作为搜索的一部分，播放器引擎将从特定位置读取数据并开始播放。

除了重新初始化所有轨道并重新启动它们之外，延迟可能是由于执行以及*存储介质*`seek`引入的延迟造成的。因此，玩家回到起始位置时会有一定的延迟。*`sdcard`*

 *可以在此函数中找到底层循环实现`AwesomePlayer::onStreamDone`，如下所示：[http ://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/AwesomePlayer.cpp#834](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/AwesomePlayer.cpp#834)

**编辑1：**

要实现一个 true `gapless playback`，您还可以考虑该[`setNextMediaPlayer()`](http://developer.android.com/about/versions/android-4.1.html#Gapless)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:12:33.240

Probably `MediaPlayer` is re-prefetching the data from server (or even from the device itself), this may take some seconds. Only if the buffering is done, it starts playing again.
If you want to bypass this, you can AFAIK only use a second `MediaPlayer` which starts buffering the media file shortly before the first one stops playing. Then you can start the second one on `OnCompletionListener`.*

# sql - 使用正则表达式的 SQL 电子邮件验证功能

> ID：15523789
> 
> 赞同：6
> 
> 时间：2013-03-20T12:38:50.743
> 
> 标签：sql, regex, sql-server-2005

我正在尝试在 SQL Server 2005 中创建一个函数来检查电子邮件是否采用正则表达式的有效格式。

这是我到目前为止所拥有的：

```
CREATE FUNCTION isValidEmailFormat
(
    @Email varchar(100)
)
RETURNS bit
AS
BEGIN
   DECLARE @Result bit

   SET @Result = (SELECT CASE
                     WHEN @Email LIKE '%[a-zA-Z0-9_\-]+@([a-zA-Z0-9_\-]+\.)+  (com|org|edu|nz|au])%' 
                       THEN 1
                       ELSE 0
                  END AS Valid)
   RETURN @Result
END 
```

我的正则表达式做错了吗？还是我必须做更多的事情才能将 varchar 与正则表达式进行比较？

-编辑-

现在，我输入的任何字符串都会返回 0，即使电子邮件格式本身是正确的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T12:54:43.430

简短的回答是不，它不能完成。[LIKE](http://msdn.microsoft.com/en-us/library/ms179859.aspx)的语法与正则表达式不同（也没有那么强大）。另请参见[T-SQL 中的 SQL Server 正则表达式](https://stackoverflow.com/questions/194652/sql-server-regular-expressions-in-t-sql)

但是您可以跳转到 .Net 并在那里进行匹配。[您可以使用sp_OACreate](http://msdn.microsoft.com/en-us/library/ms189763%28v=sql.90%29.aspx)实例化`VBScript.RegExp`内部 T-SQL并使用它。

```
CREATE FUNCTION dbo.isValidEmailFormat
(
    @Email varchar(100)
)
RETURNS bit
AS
BEGIN
    DECLARE @pattern varchar(4000)
    SET @pattern = '[a-zA-Z0-9_\-]+@([a-zA-Z0-9_\-]+\.)+(com|org|edu|nz|au)'
    DECLARE @Result bit

    DECLARE @objRegexExp INT
    EXEC sp_OACreate 'VBScript.RegExp', @objRegexExp OUT

    EXEC sp_OASetProperty @objRegexExp, 'Pattern', @pattern
    EXEC sp_OASetProperty @objRegexExp, 'IgnoreCase', 1
    EXEC sp_OASetProperty @objRegexExp, 'MultiLine', 0
    EXEC sp_OASetProperty @objRegexExp, 'Global', false
    EXEC sp_OASetProperty @objRegexExp, 'CultureInvariant', true

    EXEC sp_OAMethod @objRegexExp, 'Test', @Result OUT, @Email

    EXEC sp_OADestroy @objRegexExp

    RETURN @Result
END 
```

看看[Regex 电子邮件验证错误 - 使用 JavaScript](https://stackoverflow.com/questions/10371542/regex-email-verification-error-using-javascript?rq=1)看看您是否希望对允许的字符限制少一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T16:02:43.270

我使用了@flup 的答案并更新了 RegExp 模式，如下所示：

*   @之前的部分允许点，但不能作为第一个或最后一个字符
*   表达式用 ^ 和 $ 锚定到字符串的开头和结尾
*   为我使用的数据添加了特定的 TLD 和国家/地区代码

TLD 被明确列入白名单，以排除许多将 .com 输入为 .co 或 .cm 的拼写错误——哥伦比亚或喀麦隆的有效国家代码，但不适用于我的数据。

更新的行：

```
SET @pattern = '^([a-zA-Z0-9_\-]+\.)*[a-zA-Z0-9_\-]+@([a-zA-Z0-9_\-]+\.)+(com|org|edu|net|ca|au|coop|de|ee|es|fm|fr|gr|ie|in|it|jp|me|nl|nu|ru|uk|us|za)$' 
```

我希望这可以为已经非常出色的答案增加价值。

# google-app-engine - 如何将存储在 byte[] 中的图像写入谷歌云存储中的文件？

> ID：15523791
> 
> 赞同：2
> 
> 时间：2013-03-20T12:38:56.117
> 
> 标签：google-app-engine, google-cloud-storage

我正在尝试使用 Google Image 服务，并且正在尝试以下示例来调整图像大小。

```
import com.google.appengine.api.images.Image;
import com.google.appengine.api.images.ImagesService;
import com.google.appengine.api.images.ImagesServiceFactory;
import com.google.appengine.api.images.Transform;

// ...
        byte[] oldImageData;  // ...

        ImagesService imagesService = ImagesServiceFactory.getImagesService();

        Image oldImage = ImagesServiceFactory.makeImage(oldImageData);
        Transform resize = ImagesServiceFactory.makeResize(200, 300);

        Image newImage = imagesService.applyTransform(resize, oldImage);

        byte[] newImageData = newImage.getImageData(); 
```

我被困在需要将 byte[] newImageData 存储到谷歌云存储中的 jpg 文件的地方。我知道如何创建 txt 文件，但不知道如何创建 jpg。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:56:27.507

据我所知，GAE 使用字节进行操作。图像数据（您的 jpg）的源/目标可以是：URL 连接、DataStore BLOB 或 BlobStorage。不要忘记你必须使用纯Java。有几种方法：

1.  首先尝试使用 Jimi - 它是用于处理图像的纯 Java 库。相当简单。
2.  还存在该`appengine-awt`库的 alpha 版本：[https](https://code.google.com/p/appengine-awt/source/checkout) ://code.google.com/p/appengine-awt/source/checkout 它允许您使用标准`BufferedImage`，但其中有很多错误，所以可能有一些问题。

但是您仍然可以使用标准的 GAE Api for Images。有一个 Image 接口，其中嵌套类 Image.Format 指定 JPEG 格式`setImageData(byte[] data)`。方法对您很有用。

这是关于它的文档：https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/images/Image#setImageData(byte[])

# sql - 如何在 SQL Server 2008 的 else 循环中设置局部变量的值

> ID：15523794
> 
> 赞同：0
> 
> 时间：2013-03-20T12:39:03.557
> 
> 标签：sql, sql-server-2008

我正在尝试从多个表中进行选择，并且某些列值将基于这样的情况（else 循环中的语句给出错误）

```
(select case 
when @caQuoteIdTemp = corporateQuotes.caQuoteID
    then @randomNumber
else (set @caQuoteIdTemp = corporateQuotes.caQuoteID ) 
end )as costmoney 
```

这里是我这样声明的局部变量`@caQuoteIdTemp`-`@randomNumber`

```
DECLARE @randomNumber      FLOAT
declare @caQuoteIdTemp int
set @randomNumber = convert(numeric(15,0),rand() * 899999999999999) + 100000000000000
set @caQuoteIdTemp = 1 
```

现在我的问题是：如何在 else 语句中设置`@caQuoteIdTemp`to的值？`@caQuoteIdTemp = corporateQuotes.caQuoteID`

目前我收到语法错误。我想知道是否根本不可能更改变量的值

编辑：：：

完整的查询是这样的

```
 DECLARE @randomNumber      FLOAT
declare @caQuoteIdTemp int
set @randomNumber = convert(numeric(15,0),rand() * 899999999999999) + 100000000000000
set @caQuoteIdTemp = 1

select
corporateQuotes.caQuoteID, 
prod_sub.ProdID,
corporateQuoteItems.prodSubID,
prod.publisherID,
prod.Title,
prod.code,
corporateQuotes.date_ordered,
(select DATEPART(WK, corporateQuotes.date_ordered)) as week_ordered,
(select DATEPART(MONTH, corporateQuotes.date_ordered)) as month_ordered,
(select DATEPART(YEAR, corporateQuotes.date_ordered)) as year_ordered,
prod_sub.[length],
prod_sub.issues,
prod_sub.extra_info,
-- cost money --
(select case 
    when corporateQuotes.discountIsPoundValue = 1
        then prod_sub.your_price + prod_sub.commission - corporateQuotes.discount
    else (prod_sub.your_price + prod_sub.commission - (corporateQuotes.discount * prod_sub.your_price/100)) 
    end as costmoney)as costmoney,  
corporateAccounts.companyName,
-- saving money --
(prod_sub.rrp * prod_sub.issues - prod_sub.your_price )as savingmoney,
corporateAccounts.title,
corporateAccounts.firstName,
corporateAccounts.lastName,
corporateAccounts.street,
corporateAccounts.suburb,
corporateAccounts.[state],
corporateAccounts.postcode,
corporateAccounts.country,
corporateAccounts.phone,

-- Do something about TransID here--
(select @caQuoteIdTemp =(
    case 
        when @caQuoteIdTemp = corporateQuotes.caQuoteID
            then @randomNumber
        else corporateQuotes.caQuoteID
     as test) ,

@randomNumber as st_transId,

prod_sub.start_issue,
prod_sub.effort_code,
prod_sub.premium_code,
--do something about commison --
-- discount applied --
(select 
    case 
        when corporateQuotes.discountIsPoundValue = 1
            then corporateQuotes.discount
        else (corporateQuotes.discount * prod_sub.your_price/100) 
        end as discountApplied)as discountApplied,

-- pending orderID --

 --PP transID -- 
 -- commison  --
 corporateQuotes.commission,

 corporateQuotes.discount

from corporateQuotes
join corporateQuoteItems on
corporateQuotes.caQuoteID = corporateQuoteItems.caQuoteID
join corporateAccounts on 
corporateQuotes.caID = corporateAccounts.caID
join prod_sub on
corporateQuoteItems.prodSubID = prod_sub.ProdSubID
join prod on
prod_sub.ProdID = prod.ProdID

where corporateQuotes.orderId is null
--group by corporateQuotes.caQuoteID
order by corporateQuotes.caQuoteID
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:53:32.863

你所拥有的是一个 select 语句，但在 else 部分你所做的只是设置一个变量。我假设您想选择 @randomNumber 如果 Id 匹配，否则只需重置变量，在这种情况下为什么不使用 IF...ELSE... 例如

```
IF (EXISTS (SELECT * FROM corporateQuotes WHERE @caQuoteIdTemp = corporateQuotes.caQuoteID))
    SELECT  @randomNumber AS costmoney
ELSE
    SET @caQuoteIdTemp = corporateQuotes.caQuoteID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:18:11.803

```
DECLARE @randomNumber      FLOAT
declare @caQuoteIdTemp int
set @randomNumber = convert(numeric(15,0),rand() * 1000) + 1000
set @caQuoteIdTemp = 1

select @caQuoteIdTemp =(case when @caQuoteIdTemp = corporateQuotes.caQuoteID
    then @randomNumber
    else corporateQuotes.caQuoteID
                        end ) from corporateQuotes

SELECT @caQuoteIdTemp as costmoney 
```

我减少了随机数的范围，以前的值导致算术溢出。

# cruisecontrol - 如何在 CruiseControl 中进行每小时构建

> ID：15523796
> 
> 赞同：1
> 
> 时间：2013-03-20T12:39:13.680
> 
> 标签：cruisecontrol

我需要每 6 小时触发一次构建。如何在巡航控制中做到这一点？timebuild 标签只允许我在特定时间触发构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:58:03.817

试试这个，例如 -

**配置文件**

```
<!-- Build every 6 hours -->
<schedule interval="21600">
<composite>
...

</composite>
</schedule> 
```

或者您可以在特定时间阈值之后混合构建并按计划构建 -

```
...
<modificationset>
    <clearcase branch=...
     viewpath=.../>

<timebuild username=... time=.../>

</modificationset>
<schedule

interval="21600">

<ant
     antscript=...
     antWorkingDir=...
     buildfile=...
     target=.../>
</schedule>
... 
```

有关详细信息，请参阅本文 - [http://flylib.com/books/en/2.615.1.51/1/](http://flylib.com/books/en/2.615.1.51/1/)

如果您了解**CruiseControl.NET**，请参阅*间隔触发器*- [http://ccnet.sourceforge.net/CCNET/Interval%20Trigger.html](http://ccnet.sourceforge.net/CCNET/Interval%20Trigger.html)

希望这可以帮助。

# javascript - HTML5，如何将视频当前时间与标题数组匹配以在 Javascript 中打印标题？

> ID：15523798
> 
> 赞同：1
> 
> 时间：2013-03-20T12:39:26.443
> 
> 标签：javascript, html

我创建了从 XML 获取开始、持续时间和文本的 subtitleArray。现在如何匹配包含循环和 if 语句的视频当前播放时间。如果是这样，它会在网站上打印标题。这是一些代码，

```
function init()
            {
                var subtitleArray = new Array();
                var tempArray = new Array();
                var c = document.getElementById('container');

                captionsDoc = loadXMLDoc("captions.xml");
                x=captionsDoc.getElementsByTagName('text');

                for(var i=0;i<x.length;i++)
                {
                    var tempArray = new Array();
                    tempArray[0] = x[i].getAttribute('start'); // get start time
                    tempArray[1] = x[i].getAttribute('dur'); // get duration time
                    tempArray[2] = x[i].childNodes[0].nodeValue; // get text

                    subtitleArray[i] = tempArray; //put all 3 values in array

                }

                video = document.getElementById("caption");

                video.addEventListener('progress', progressHandler);
                     var text = "", cap = "";

                function progressHandler() {

                for( int i = 0; i < subtitleArray.length;i++)
                {
                    var currentTime = video.getCurrentTime();
                    var cueStart = parseFloat(subtitleArray[i][0]);
                    var cueEnd = cueStart + parseFloat(subtitleArray[i][1]);
                    var diff = cueStart - currentTime;
                                cap = subtitleArray[i][2];

                    if (currentTime >= cueStart && currentTime <= cueEnd) {
                       text = cap.text;   
                    }
                }

                c.innterHTML = text;

            }
            window.onload = init;
        </script>
    </head>

    <body>
        <video id="caption" width="320" height="240" controls>
            <source src="caption.mp4" type="video/mp4">
        </video>
        <div id="container">
        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:59:35.973

我不知道你是否已经看过它并忽略了它，但我相信 Popcorn.js 是专门为这种用途设计的：http: [//popcornjs.org/](http://popcornjs.org/)

我相信他们有 HTML5 视频与幻灯片、文本等同步的演示。

它在 Github 上是开源的，并且有很多演示。

# php - 用正则表达式替换空格字符，php

> ID：15523800
> 
> 赞同：2
> 
> 时间：2013-03-20T12:39:28.120
> 
> 标签：php, regex, preg-replace

我正在使用该函数`preg_replace('/[^0-9A-F]/', '', $string)`仅接受数字和字母，但目前没有过滤空格，我如何将其包含到我的 reg 表达式中？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:40:40.233

```
preg_replace('/[^0-9A-F ]/', '', $string) 
```

作为旁注，您只允许从 A 到 F 的大写字母。如果您想要所有字母：

```
 preg_replace('/[^0-9A-Z ]/i', '', $string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:41:05.570

```
preg_replace('/[^0-9A-F\x20]/', '', $string) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:41:31.143

尝试

```
preg_replace('/[^0-9A-F]/',( )'', $string) 
```

# java - 两个版本的 Java 运行环境

> ID：15523807
> 
> 赞同：0
> 
> 时间：2013-03-20T12:39:45.347
> 
> 标签：java, oracle

我们有两个不同的 Web 应用程序（Oracle 表单就是其中之一）都使用 java。一个需要 1.7，另一个需要 1.6（Oracle）。当我们升级到 1.7 时，Oracle Forms 不起作用。

1.  我可以做些什么来让 Oracle 表单与 1.7 一起使用吗？
2.  如果没有，我如何在同一台机器上运行多个版本的 JRE？

# android - AchartEngine 时间图重复 X 标签

> ID：15523808
> 
> 赞同：1
> 
> 时间：2013-03-20T12:39:46.643
> 
> 标签：android, achartengine

我正在使用适用于 Android 的 AChartEngine 库来创建时间表。我想知道是否有任何方法可以限制缩放，以使 X 标签不会像图像中那样出现重复？

![屏幕一](../Images/f443d0a25dcd90900000c93d6d56ad31.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:17:07.873

有一些方法可以解决这个问题。例如，您可以更改正在显示的时间表的日期格式。

# java - 使用 Itext 将 html 表生成为 pdf

> ID：15523817
> 
> 赞同：0
> 
> 时间：2013-03-20T12:40:22.670
> 
> 标签：java, javascript, html, itext

我正在尝试使用 iText 将 html 表生成为 pdf：

html:

```
 <script type="text/javascript">            
        function getPdf(){
        var xmlHttpRequest = new XMLHttpRequest();
            xmlHttpRequest.open('POST', 'Hello',false);
            xmlHttpRequest.setRequestHeader('Content-type','application/x-www-form-urlencoded');
            xmlHttpRequest.send("table=" + document.getElementsByName("123").innerHTML);

        }         
    </script>
    </head>
<body>        
    <table id="123">
        <tr>
            <td>data</td>
        </tr>
        <tr>
            <td>data</td>
        </tr>
        <tr>
            <td><input type='button' onclick="getPdf();" value='pdf'</td>
        </tr>
    </table>
</body> 
```

* * *

doPost 方法：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
    response.setContentType("application/pdf");

    try {
        Document document = new Document();

        PdfWriter.getInstance(document, response.getOutputStream());

        document.open();

        document.add(new Paragraph(request.getParameter("table")));

        document.close();

    } 

    catch (DocumentException de) {
        throw new IOException(de.getMessage());        
    }
} 
```

显然它不使用 document.add(.....)

# javascript - 将 innerHTML 传递给元素并附加事件

> ID：15523821
> 
> 赞同：3
> 
> 时间：2013-03-20T12:40:28.407
> 
> 标签：javascript, html, events, callback

我必须使用我的 JavaScript 函数传递`innerHTML`给 div。我传递的还有一个
，我必须为其附加一个点击事件，以便在点击它时，元素响应点击事件。`innerHTML``div`

我在这里有一个小提琴来解释这个问题：http: **[//jsfiddle.net/K2aQT/2/](http://jsfiddle.net/K2aQT/2/)**

HTML

```
<body>
    <div id="containerFrame">
    </div>
</body> 
```

JavaScript

```
window.onload = function(){usersFunction();};

function usersFunction(){
    var someHtml = '<div> <div class ="btnSettings"> </div> <span></span> </div>';
    changeSource(someHtml);
}

function changeSource(newSource){
    document.getElementById("containerFrame").innerHTML = newSource;
} 
```

在传递源代码时，我如何告诉 JavaScript 函数传递的这个 HTML 也有一些元素必须绑定到点击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:55:54.910

如果您必须这样做，您可以考虑在 HTML 字符串本身中添加点击处理程序：

```
var someHtml = '<div> <div class ="btnSettings" onclick="return myFunction()"> </div> <span></span> </div>'; 
```

或者，修改后`.innerHTML`，找到正确的`<div>`：

```
var frame = document.getElementById('containerFrame');
frame.innerHTML = newSource;
var settings = frame.getElementsByClassName('btnSettings')[0];

// depends on the browser, some IE versions use attachEvent()
settings.addEventListener('click', function(event) {
}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:59:38.530

我认为你需要这样的东西：

```
document.getElementById("containerFrame").onclick = function() {
    // put your function here
}; 
```

# c++ - 作为特征成员类型的部分特化模板

> ID：15523828
> 
> 赞同：0
> 
> 时间：2013-03-20T12:40:51.090
> 
> 标签：c++, templates

我想从特征类中选择一个模板，如下所示：

```
template<typename T>
class JobTypeA { };

template<typename T>
class JobTypeB { };

template<typename T>
class JobTraits
{
    /* nothing */
};

class A { };

template<>
class JobTraits<A>
{
    typedef JobTypeA Type;
};

class B {};

template<>
class JobTraits<B>
{
    typedef JobTypeB Type;
};

class JobTarget1 { };
class JobTarget2 { };

template<typename T, typename U>
class JobUser
{
public:
    typedef typename JobTraits<T>::Type<U> JobType;

    void doSomething (void)
    {
        JobType j;
        /*... */
    }
};

int
main (void)
{
    JobUser<B, JobTarget1> j;
} 
```

由于专用特征类中的“不完整类型的 typedef”，上述内容无法编译。我在 std=c++11 和 g++ 4.7.2 中使用“别名模板”来完成这项工作。但是 VS2010 还不支持它。是否有任何解决方法可以在没有“别名模板”的情况下实现相同的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:47:29.280

怎么样

```
template<typename U>
struct Type
{
   typedef JobTypeA<U> type;
}; 
```

和

```
template<typename U>
struct Type
{
   typedef JobTypeB<U> type;
}; 
```

用法：

```
typedef typename JobTraits<T>::template Type<U>::type JobType; 
```

# c++ - 如何在打开的管理员程序中调用 system() 并赋予它相同的权限？

> ID：15523829
> 
> 赞同：4
> 
> 时间：2013-03-20T12:40:55.253
> 
> 标签：c++, windows, windows-7

我正在 Windows 中编写一个以管理员身份运行的 c++ 应用程序。但是，在调用该`system()`命令时，该命令似乎没有管理员权限（无法在`C:\Program Files (x86)\`目录中创建文件）。

如何避免使用[CreateProcess](https://stackoverflow.com/questions/5591183/how-make-child-process-with-same-environment-variables-as-parrent-plus-its-own)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:51:08.550

如果您使用[`system`](http://msdn.microsoft.com/en-us/library/277bwbdz.aspx)，您可以使用：

```
system("runas /user:<admin-user> \"program.exe\""); 
```

或者[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)：

```
ShellExecute(hwnd, "runas", "program.exe", 0, 0, SW_SHOWNORMAL); 
```

[这个 Stackoverflow Question](https://stackoverflow.com/questions/11586139/how-to-run-application-which-requires-admin-rights-from-one-that-doesnt-have-th)很好地
详细说明了这个方法。`CreateProcess`

# javascript - 我是否应该只在需要时加载 javascript 模块，即使它们非常小？

> ID：15523830
> 
> 赞同：1
> 
> 时间：2013-03-20T12:40:54.990
> 
> 标签：javascript, requirejs, frontend, amd

我正在使用 require.js 开发一个项目，并且仅在需要时才加载模块，如下所示

```
// only load accordion if needed
if ($('.accordion').length) {
    require(['Accordion'], function(Accordion) {
        Accordion.init();
    });
} 
```

现在我想知道这是否有意义，因为accordion.js 模块的重量不到 1kb ......我应该从启动时加载所有模块并只在需要时才初始化它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:45:17.263

有一些极端情况，但作为“标准”行为，我们可以说如果您的页面上可能使用了 js 模块，则应该加载它。考虑到使用缓存、缩小和模块分组会大大降低性能影响。

我不会添加额外的逻辑来检测模块是否实际使用。额外的逻辑是另一个潜在的失败点，所以可能不值得，特别是对于这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:43:06.077

好吧，这取决于您的性能需求。大多数情况下，加载一个 1KB 的文件不会对客户端产生太大影响，因此您也可以加载它。

# magento - Magento 分层导航价格属性状态

> ID：15523831
> 
> 赞同：0
> 
> 时间：2013-03-20T12:40:57.107
> 
> 标签：magento, attributes, navigation, layered

我已将分层导航移至工具栏，并将所有属性设置为下拉菜单。

我的问题是价格属性。选择价格后状态会发生变化，所有价格属性都会消失（我理解分层导航价格默认只能选择一个，这很好）。我的目标是在选择价格后在下拉菜单中显示最后选择的价格。

此外，我宁愿修改代码，然后安装任何为您执行此操作的自定义扩展。

防止价格消失或更改价格属性状态以使其不消失的最佳方法是什么？

我能够以这种方式处理自定义属性：http: [//www.magentocommerce.com/boards/viewthread/32614/P0/](http://www.magentocommerce.com/boards/viewthread/32614/P0/)

我也查看了这些帖子，但它们没有帮助： [http ://www.magentocommerce.com/boards/viewthread/41951/](http://www.magentocommerce.com/boards/viewthread/41951/) [选择价格过滤器后显示价格分层导航](https://stackoverflow.com/questions/13269654/show-price-layered-navigation-after-selecting-price-filter)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:48:03.617

插件法力过滤器将允许你做你想做的事，

您可以使用法力过滤器模块，它允许您拥有具有不同输入类型的过滤器，并且您可以根据需要对其进行自定义

[http://www.manadev.com/advanced-layered-navigation-ce](http://www.manadev.com/advanced-layered-navigation-ce)

# servicestack - 在 ServiceStack Swagger-UI 中定义复杂类型

> ID：15523833
> 
> 赞同：4
> 
> 时间：2013-03-20T12:41:00.310
> 
> 标签：servicestack, swagger

我正在尝试实现类似 [http://petstore.swagger.wordnik.com/#!/store/placeOrder_post_2](http://petstore.swagger.wordnik.com/#!/store/placeOrder_post_2) 我想定义自定义 DataType 以在属性`DataType`参数中使用它，`ServiceStack.ServiceHost.ApiMember`以便 ServiceStack 生成模型和模型架构部分我，就像上面的网址一样。

我怎样才能做到这一点？

# javascript - Javascript文本框悬停在鼠标上并单击鼠标

> ID：15523839
> 
> 赞同：0
> 
> 时间：2013-03-20T12:41:17.457
> 
> 标签：javascript, textbox

这个问题是关于[此页面上的“鼠标悬停在鼠标上的 Javascript 文本框”代码](http://jsfiddle.net/Mchhs/)

脚本：

```
var oVTog = {
toggle: function (el) {

    var container  = el.parentNode;
    var para = container.getElementsByTagName('p')[0];  
    para.style.display = "none";

    el.onmouseover = function () {
                  para.style.display = '';
                  return false;
            };
    el.onmouseout = function () {
                  para.style.display = 'none';
                  return false;
            };
    el.onclick = function () {
                  para.style.display = para.style.display == 'none' ? '' : 'none';
                  return false;
            };
    }
};
window.onload = function () {
var l = document.getElementById('togTrigger');
oVTog.toggle(l);
var l = document.getElementById('togTrigger2');
oVTog.toggle(l);
}; 
```

我的问题是：这也适用于鼠标点击。我怎样才能让它工作，以便单击鼠标使文本框保持打开并再次关闭它？单击它应该将其设置为单击状态或其他东西，因为我还希望鼠标悬停选项在您尚未单击它时起作用。我喜欢鼠标悬停选项，它应该被保留，但我希望能够保持盒子打开，这样我就可以使用里面的内容（复制它，点击链接等）

基本上这是我想要的场景；我希望能够：

1.  将鼠标悬停在文本或按钮上以打开悬停的文本框。
2.  单击文本或按钮以保持文本框打开
3.  现在盒子保持打开状态，鼠标悬停不再起作用
4.  再次单击文本或按钮以关闭框
5.  并再次启用鼠标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:00:19.853

我修改[了你的小提琴](http://jsfiddle.net/Mchhs/3/)。

我添加了一个名为`isClicked`. 通过在单击时设置它，我可以忽略隐藏`mouseout`处理程序上的元素。

```
var oVTog = {
    toggle: function (el) {
        var container  = el.parentNode;
        var para = container.getElementsByTagName('p')[0];
        para.style.display = "none";

        // create variable
        var isClicked = false;

        el.onmouseover = function () {
            para.style.display = '';
            return false;
        };
        el.onmouseout = function () {
            // ignore if button was clicked
            if(!isClicked)
                para.style.display = 'none';

            return false;
        };
        el.onclick = function () {
            // if it's clicked, change it to TRUE
            // if it's clicked again, change it back to FALSE

            isClicked = !isClicked; // toggle

            para.style.display = ((isClicked) ? '' : 'none');
            return false;
        };
    }
}; 
```

# php - 获取 WordPress 帖子的自定义字段的值

> ID：15523844
> 
> 赞同：4
> 
> 时间：2013-03-20T12:41:28.150
> 
> 标签：php, wordpress

我在 WordPress 的编辑帖子部分创建了一个自定义字段，并且能够通过以下帖子保存该值：[Wordpress - 将自定义字段添加到帖子屏幕](https://stackoverflow.com/questions/5850901/wordpress-adding-custom-field-to-the-post-screen)。

我可以检索特定类别的帖子，但无法检索自定义字段的值。

![在此处输入图像描述](../Images/b52270831e2ac3b87af863518a099b9d.png)

如上图所示，左上角突出显示了一个自定义帖子字段。另一个突出显示的字段是显示该帖子属于“投资组合”类别。

这是我用来检索“投资组合”类别帖子的代码

```
<?php 
    $the_query = new WP_Query(array(
    'category_name' => 'Portfolio', 
    'posts_per_page' => 9,
    'order' => 'DESC'
)); 
while ( $the_query->have_posts() ) : 
    $the_query->the_post();
?>

<p>The title: <?php the_title(); ?></p>
<p> custome value: <?php get_post_meta( $post_ID, '_ssb_portfolio_url', true); ?> </p>
<p>The Content: <?php the_content(); ?></p>

<?php 
    endwhile; 
    wp_reset_postdata();
?> 
```

我能够获取帖子标题和帖子内容的值，但不能获取自定义字段值。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T12:47:01.547

您可以使用[get_post_custom( $post_id )](http://codex.wordpress.org/Function_Reference/get_post_custom)

在你的情况下

```
while ( $the_query->have_posts() ) :
    $the_query->the_post();
    $custom = get_post_custom( get_the_ID() ); ?> 
```

然后`$custom`是您的自定义字段的数组

# c++ - 在第一次调用后两次读取 UDP 套接字会丢弃剩余的字节

> ID：15523849
> 
> 赞同：5
> 
> 时间：2013-03-20T12:41:49.913
> 
> 标签：c++, udp, boost-asio

我的目标是分两步从 UDP 套接字读取数据。问题是，如果我向套接字写入的数据多于第一步读取的数据。结果是剩余的数据消失了。

我将代码简化为以下代码段：

```
#include <boost/asio/ip/udp.hpp>
using namespace boost::asio;

int main() {
  io_service net_io;
  ip::udp::socket net_sock( net_io, ip::udp::endpoint( ip::udp::v4(), 1234 ) );

  uint8_t data[2];

  net_sock.receive( buffer( data, 2 ) );
  std::cout << data[0] << data[1] << std::endl;

  net_sock.receive( buffer( data, 2 ) );
  std::cout << data[0] << data[1] << std::endl;

  net_sock.close();
  return EXIT_SUCCESS;
} 
```

当我将数据写入套接字时，如下所示：

```
echo '0123456789' | nc -u localhost 1234 
```

程序输出前两个字节`01`，然后阻塞。相反，我期望输出：

```
01
23 
```

但是，它在第​​二次`receive()`调用时阻塞。根据 [手册](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/read/overload1.html)：

> 调用将阻塞，直到以下条件之一为真：
> 
> ∙ 提供的缓冲区已满。[…]
> ∙ 发生错误。

为什么缓冲区是空的？如果我启动

```
echo '0123456789' | nc -u localhost 1234 
```

第二次，`receive()`呼叫解除阻塞，但也输出`01`。我第一次输入的剩余数据`23456789`去了哪里，如何在后续 `receive()`调用中访问它？

一些背景：用例是读取可变长度的数据包，这意味着首先读取标头，然后在标头处理后（包括有关数据包长度的信息）继续读取有效负载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T12:43:18.267

UDP 是一种面向数据包的协议。您必须一次读取整个数据包。

对此的技术术语是“保留消息边界”。这意味着它将发送来自单个`write`或`send`一个块中的操作的所有数据。当你`read`或`recv`它会从一个特定的块中获取数据时，然后丢弃那个块，再也不会被看到。

这是设计使然。

您应该确定协议中的最大数据包长度，然后始终读取该长度。如果您写入的长度小于该长度，您将读取的字节数将少于您要求的字节数。

另外，请记住，UDP 不能保证任何给定的块都会到达。因此，如果您同时计算双方，您的读取次数可能少于写入次数。

像这样的东西：

```
#include <boost/asio/ip/udp.hpp>
using namespace boost::asio;

const unsigned int max_datagram_size = 65536;

int main() {
  io_service net_io;
  ip::udp::socket net_sock( net_io, ip::udp::endpoint( ip::udp::v4(), 1234 ) );

  uint8_t data[max_datagram_size];

  // I like declaring all values that I do not expect to change as const.
  const int recved_size = net_sock.receive( buffer( data, max_datagram_size ) );
  if (recved_size >= 0) {
    std::cout << ::std::string(data, recved_size) << '\n';
  } else {
    std::cout << "There was some sort of error receiving data.\n";
  }

  net_sock.close();
  return EXIT_SUCCESS;
} 
```

# matlab - 如何将多个输出从函数传递到单元格数组

> ID：15523851
> 
> 赞同：9
> 
> 时间：2013-03-20T12:42:01.223
> 
> 标签：matlab, cell

我有一个具有以下原型的函数

```
function [bandwidth,density,X,Y,x,y]=kde2d(data,n,MIN_XY,MAX_XY) 
```

基本上该函数返回 6 个输出，其中一些是矢量形式，而另一些是数字量。如何优雅地将函数的输出传递到 1 x 6 单元阵列？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T12:53:58.967

怎么样

```
[a{1:6}] = kde2d( data, n, MIN_XY, MAX_XY ) 
```

**编辑**：

考虑这个烦人的功能

```
def foo(n):
  if n == 1:
    return [1, ]
  elif n == 2:
    return [1, ], {'a': 2}
  elif n == 3:
    return [1, ], {'a': 2}, (3, 3, 3)
  return [1, ], {'a': 2}, (3, 3, 3), None 
```

您始终可以将所有输出放入一个元组中：

```
for i in range(1, 5):
  f = foo(i)
  print('got {} outputs: {}'.format(len(f), f)) 
```

这个简单循环的输出是：

> ```
> got 1 outputs: [1]
> got 2 outputs: ([1], {'a': 2})
> got 3 outputs: ([1], {'a': 2}, (3, 3, 3))
> got 4 outputs: ([1], {'a': 2}, (3, 3, 3), None) 
> ```

如果您想获得特定的输出：

```
f = foo(2)
f[1]   # accessing the second output, {'a': 2} in this example. 
```

# spring-annotations - Spring有@Component注解，@Repository、@Service、@Controller这些注解的真正目的是什么？

> ID：15523855
> 
> 赞同：16
> 
> 时间：2013-03-20T12:42:10.680
> 
> 标签：spring-annotations

我已经使用 Spring 框架开发了几年的 Web 应用程序。最近，我团队的一个新人问我一个问题，Spring 有`@Component`注解，注解的真正目的是`@Repository`什么`@Service`，，`@Controller`？我试图给他答案，它们之间没有区别，只是为了识别java Bean的类型。如你所知，我的解释缺乏说服力，他不买账。

所以我想问一个问题，注释的真正目的是什么`@Repository`，，？这些注释之间的真正区别是什么？`@Service``@Controller`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T12:44:38.957

之前有人问过这个问题：[Spring 中的@Component、@Repository 和@Service 注释有什么区别？](https://stackoverflow.com/questions/6827752/whats-the-difference-between-component-repository-service-annotations-in)

> 在 Spring 2.0 及更高版本中，@Repository 注释是任何满足存储库角色或原型（也称为数据访问对象或 DAO）的类的标记。此标记的用途之一是异常的自动翻译。
> 
> Spring 2.5 引入了更多的原型注解：@Component、@Service 和 @Controller。@Component 是任何 Spring 管理的组件的通用构造型。@Repository、@Service 和 @Controller 是 @Component 针对更具体的用例的特化，例如，分别在持久层、服务层和表示层中。
> 
> 因此，您可以使用@Component 注释您的组件类，但是通过使用@Repository、@Service 或@Controller 来注释它们，您的类更适合工具处理或与方面关联。例如，这些原型注释是切入点的理想目标。
> 
> 因此，如果您在服务层使用@Component 或@Service 之间进行选择，@Service 显然是更好的选择。同样，如上所述，@Repository 已被支持作为持久层中自动异常转换的标记。

# crystal-reports - 显示多个值的公式

> ID：15523859
> 
> 赞同：0
> 
> 时间：2013-03-20T12:42:25.290
> 
> 标签：crystal-reports, crystal-reports-2008

试图找到一个可以让我显示某些值的公式。

例子：

我想看看阿司匹林和华法林以及（接下来的 3 个值中的一个或多个）氯吡格雷或普拉格雷或替格瑞洛。

患者 1 服用：

阿司匹林 华法林 氯吡格雷

患者 2 服用：阿司匹林 华法林

现在我看到病人 1 和病人 2，我只想看到像病人 1 这样的病人，它显示了 3 种不同的药物。

请帮助并提前感谢您。我正在使用水晶报表 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:33:43.310

我建议在 SQL select 子句中添加类似以下几行的内容：

```
count(distinct case when medication in ('Aspirin', 'Warfarin') 
                    then medication end) 
     over (partition by patient) as mandatory_meds,
count(distinct case when medication in ('Clopidogrel', 'Prasugrel', 'Ticagrelor')
                    then medication end) 
     over (partition by patient) optional_meds, 
```

- 然后将以下条件添加到 SQL where 子句：

```
and mandatory_meds = 2 and optional_meds >= 1 
```

或者，您可以通过以下方式在 Crystal 中获得类似的结果：

*   按患者分组报告
*   创建一个名为mandatory_meds 的晶体公式，其公式如下：
    `if {myTable.medication} = "Aspirin" or {myTable.medication} = "Warfarin"`
    `then {myTable.medication}`
*   创建一个名为 optional_meds 的晶体公式，其公式如下：
    `if {myTable.medication} = "Clopidogrel" or {myTable.medication} = "Prasugrel"`
    `or {myTable.medication} = "Ticagrelor" then {myTable.medication}`
*   向**组**选择公式添加条件，例如：
    `DistinctCount({@mandatory_meds})=2 and DistinctCount({@optional_meds})>=1`

# php - php 的 open_basedir 作为 FastCGI 运行

> ID：15523860
> 
> 赞同：2
> 
> 时间：2013-03-20T12:42:25.503
> 
> 标签：php, apache, mod-rewrite, fastcgi

我前段时间安装了 Apache 和 php 作为 fastcgi 模块

```
root@company# apt-get install apache2 apache2-suexec libapache2-mod-fcgid php5-cgi

root@company# dpkg-query -l '*apache2*' 
Desired=Unknown/Install/Remove/Purge/Hold 
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend 
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad) 
||/ Name                           Version                        Description 
+++-==============================-==============================-============================================================================ 
ii  apache2              2.2.20-1ubuntu1.2         Apache HTTP Server metapackage 
ii  apache2-mpm-worker   2.2.20-1ubuntu1.2         Apache HTTP Server - high speed threaded model 
ii  apache2-suexec       2.2.20-1ubuntu1.2  Standard suexec program for Apache 2 mod_suexec 
ii  apache2-utils        2.2.20-1ubuntu1.2         utility programs for webservers 
ii  apache2.2-bin        2.2.20-1ubuntu1.2         Apache HTTP Server common binary files 
ii  apache2.2-common     2.2.20-1ubuntu1.2         Apache HTTP Server common files 
ii  libapache2-mod-fcgid 1:2.3.6-1+squeeze1build0.11.10 an alternative module compat with mod_fastcgi 

root@company# dpkg-query -l '*php*' 
Desired=Unknown/Install/Remove/Purge/Hold 
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend 
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad) 
||/ Name                              Version                           Description 
+++-=================================-=================================-================================================================================== 
un  php-pear                    <none>                         (no description available) 
ii  php5-cgi  5.3.6-13ubuntu3.7  server-side, HTML-embedded scripting language (CGI binary) 
ii  php5-common     5.3.6-13ubuntu3.7  Common files for packages built from the php5 source 
un  php5-json                  <none>                            (no description available) 
un  php5-mhash                 <none>                            (no description available) 
un  php5-suhosin               <none>                            (no description available) 
un  phpapi-20090626            <none>                            (no description available) 

root@company# dpkg-query -l '*fcgi*' 
Desired=Unknown/Install/Remove/Purge/Hold 
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend 
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad) 
||/ Name                              Version                           Description 
+++-=================================-=================================-================================================================================== 
ii  libapache2-mod-fcgid 1:2.3.6-1+squeeze1build0.11.10.1  an alternative module compat with mod_fastcgi 
```

现在，我知道我不能在我的虚拟主机中使用这个命令：

```
php_admin_value open_basedir "/var/www/users/test" 
```

在我的例子中，一个典型的虚拟主机文件：

```
<VirtualHost *:80>
 ServerName test
 ServerAlias test
 ServerAdmin webmaster@test.com
 DocumentRoot /var/www/users/test/public_html/

<IfModule mod_fcgid.c>
 SuexecUserGroup test test
 <Directory /var/www/users/test/public_html/>
 Options +ExecCGI
 Options -Indexes
 AllowOverride None
 AddHandler fcgid-script .php
 FCGIWrapper /var/www/system/test/php-fcgi-starter .php
 Order allow,deny
 Allow from all
 </Directory>
</IfModule>

 # ErrorLog /var/log/apache2/error.log
 # CustomLog /var/log/apache2/access.log combined
 ServerSignature Off

</VirtualHost> 
```

1）关于如何启用`open_basedir`并允许我的用户更改`php.ini`我在他们家中定义的任何想法（例如`/var/www/users/test`）。用户即使尝试编辑也不应该更改我的值`php.ini`。

这可能吗？或者，我应该忘记`php.ini`所有用户的用户访问权限并一次性更改他的`php.ini`？（我可以通过简单地重新定位它来做到这一点 - 如您所知，在这样的设置中有一个 fcgid 包装脚本）

2）如果有人也可以给我一些 Apache2 指令来重定向所有请求，我将不胜感激：

```
http://www.test.com/a/new/post 
```

在内部对此：

```
http://www.test.com/index.php?a/new/post 
```

以下不起作用 - 应该给出一些参数：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

（不，出于速度的原因，我不想允许 .htaccess 文件）

谢谢！

**对问题 (2) 的评论：**我注意到该`<Directory>`部分中的这个指令实现了我所需要的：

```
RewriteEngine On
RewriteBase /
RewriteRule ^(.*)$ index.php?$1 [NC,L,QSA] 
```

但是在（未显示）呈现php图像时表现得很奇怪

```
<?php
phpinfo();
?> 
```

回显文件中此图像的链接是

```
<img border="0" src="/info.php?=PHPE9568F34-D428-11d2-A769-00AA001ACF42" alt="PHP Logo" /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:37:14.717

**与问题 (2) 相关：**似乎这些指令真的很神奇（请参阅内部和之后的评论）

```
<VirtualHost *:80>
 ServerName test
 ServerAlias test
 ServerAdmin webmaster@test.com
 DocumentRoot /var/www/users/test/public_html/

 #the next line should be removed in production
 RewriteLog /var/www/users/test/public_html/rewrite.log
 RewriteLogLevel 9

<IfModule mod_fcgid.c>
 SuexecUserGroup test test
 <Directory /var/www/users/test/public_html/>
 Options +ExecCGI
 Options -Indexes
 AllowOverride None
 AddHandler fcgid-script .php
 FCGIWrapper /var/www/system/test/php-fcgi-starter .php
 Order allow,deny
 Allow from all

 RewriteEngine On
 #next line introduces some behavior, see comment (1)
 #RewriteBase /

 #redirect non-existent files or, redirect existent
 #files with the execute bit set, see comment (2)
 RewriteCond %{REQUEST_FILENAME} !-f [OR]
 RewriteCond %{REQUEST_FILENAME} -x

 #under the above dir ("/var/www/users/test/public_html/")
 #there is a "php/tests/testApache.php" that catches all requests
 #for non-existent files or for executables,
 #L=last, NC=case-insensitive, NE=no hexcode escaping of the request uri
 #QSA=append query string from the original request uri to the resulted string
 RewriteRule ^/?(.*)$ php/tests/testApache.php?$1 [NC,NE,L,QSA]

 </Directory>
</IfModule>

 #the next 2 lines should be removed in production
 ErrorLog /var/www/users/test/public_html/error.log
 CustomLog /var/www/users/test/public_html/access.log combined

 ServerSignature Off

</VirtualHost> 
```

**评论 (1)：**通过调查我们的“rewrite.log”文件，我们在删除 time、sid、rid 字段后看到了这些差异

```
root@localhost# diff 1.txt 2.txt
8,10c8
< 127.0.0.1 - - [22/Mar/2013: +0200] [test/sid#][rid#/initial] (2) [perdir /var/www/users/test/public_html/] trying to replace prefix 
/var/www/users/test/public_html/ with /
< 127.0.0.1 - - [22/Mar/2013: +0200] [test/sid#][rid#/initial] (5) strip matching prefix: /var/www/users/test/public_html/php/tests/te
stApache.php -> php/tests/testApache.php
< 127.0.0.1 - - [22/Mar/2013: +0200] [test/sid#][rid#/initial] (4) add subst prefix: php/tests/testApache.php -> /php/tests/testApache
.php
---
> 127.0.0.1 - - [22/Mar/2013: +0200] [test/sid#][rid#/initial] (2) [perdir /var/www/users/test/public_html/] strip document_root prefi
x: /var/www/users/test/public_html/php/tests/testApache.php -> /php/tests/testApache.php 
```

左侧部分（1.txt）包含`RewriteBase /`在虚拟主机中。

**评论 (2)：**通过重定向不存在的文件，我们所有的图像、.css、.js、.htm* 文件只要与文档根目录相比给出资源的路径（在这些虚拟主机中是“/var /www/users/test/public_html/")。因此，编写了一个测试图像：

```
echo '<img src="/wallpaper-10.jpg" alt="Christmas">'; 
```

它位于“/var/www/users/test/public_html/wallpaper-10.jpg”。

仍在等待对**问题（1）**的一些答复...

# django - 是否可以将 geodjango 的 geoqueryset.distance 的输出存储在数据库中？

> ID：15523861
> 
> 赞同：1
> 
> 时间：2013-03-20T12:42:27.853
> 
> 标签：django, geodjango

是否可以将 geodjango 查询集的输出存储在启用空间的数据库中？
[https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#distance-lookups](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#distance-lookups)
此示例中显示的所有距离。是否可以将其实际存储在数据库中，甚至可以使用 geoqueryset.distance 的值进行进一步计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:55:16.630

是的，两者都可以在 geodjango 中完成。

以下是如何在不存储任何几何图形的情况下执行距离计算的示例：

```
from django.contrib.gis.geos import Point
pnt = Point(0,0)
pnt.distance(Point(0,1)) 
```

这将返回 1.0。Django 查询集 API 是专门为与数据交互而构建的，因此在查询集变得有用之前，您需要一些持久性数据。一旦有了数据，尤其是地理空间数据，Django 查询集就会变得非常酷。

让我们看一下文档中的示例：

```
Zipcode.objects.filter(poly__distance_gt=(geom, D(m=5))) 
```

这将返回几何在 5 米范围内的所有邮政编码。GeoDjango 还将使用计算的距离对象将距离字段附加到查询集中的每个项目。由于 django 只是 python，因此您可以将距离值用于您想要的任何疯狂计算：

```
zips = Zipcode.objects.filter(poly__distance_gt=(geom, D(m=5)))
for zip_code in zips:
    print zip_code.name, zip_code.distance.m 
```

# ubuntu - 为什么我在启动 Gnus 时在 emacs 中出现此错误

> ID：15523865
> 
> 赞同：0
> 
> 时间：2013-03-20T12:42:36.597
> 
> 标签：ubuntu, emacs

nntp（新闻）打开错误：“>> 新闻/nntp 名称或服务未知）”。

我正在运行 ubuntu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:10:25.313

Gnus 要求您配置要使用的新闻服务器，并且我认为它默认为“新闻”，它在您的本地搜索域中不存在（可能通过 DHCP 从您的 ISP 或本地路由器提供给您）。您可以通过在 ~/.gnus 文件中添加以下行来设置它：

```
(setq gnus-select-method '(nntp "my cool server" 
                           (nntp-address "PUT.ADDRESS.HERE")) 
```

*将PUT.ADDRESS.HERE*更改为您的 nntp 服务器的全名。

# ektron - 在 Ektron 中为 DxH 添加新连接器

> ID：15523871
> 
> 赞同：3
> 
> 时间：2013-03-20T12:42:44.573
> 
> 标签：ektron

我在 Ektron 8.6 中工作。我正在尝试向 DxH 添加示例连接器[，](http://documentation.ektron.com/cms400/v8.61/Reference/Mobile/Advanced/Content/DxH/DxH.htm)我创建了一个“示例连接器”类库，其中包含一个从 Ektron.DxH.Common.IConnector、Ektron.DxH.Common.IDiagnostic 实现的类。（通过参考来自[ektron 网站的](http://www.ektron.com/)[开发者网络研讨会](http://www.ektron.com/Webinars/Details/Digital-Experience-Hub---Developer-Webinar)）

我还在 CBSvcHost.exe.config 中添加了映射。并将它们部署在 ContextBusServiceHost 文件夹中。但部署新连接器后 DxH 无法正常工作。有人遇到过这个问题吗？有人可以指导我如何调试问题吗？

# bash - 如何从bash脚本中删除字符？

> ID：15523876
> 
> 赞同：-2
> 
> 时间：2013-03-20T12:43:00.903
> 
> 标签：bash, postgresql, csv

我想使用路径将数据从`CSV`文件插入到。`PostgreSQL tables`文件名是`filename.csv`；表的名称是`filename`。如何删除路径的其他部分以及`.csv`扩展名？

我使用以下代码，但它不起作用：

```
for i in 'ls ~/catalog/subcatalog/*.csv' ; do
  FILE = 'sed 's%~/catalog/subcatalog/%%g' $i'
  PGPASSWORD=$2 psql -q -U $1 -d testing -c "copy 'sed 's%.csv%%g' $FILE from $i delimiter ',' CSV'";
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:32:04.083

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:50:17.363

您的代码不起作用，因为`sed`对文件或流进行操作，而不是对变量进行操作。但是你不需要`sed`这个：

```
FILE=${i%.csv}
FILE=${FILE##*/} 
```

这应该从 中删除`.csv`扩展名`$i`并将结果存储在 中`$FILE`，然后删除目录部分。您可以通过直接在终端中尝试上述方法来验证结果。

见：[http ://tldp.org/LDP/abs/html/string-manipulation.html](http://tldp.org/LDP/abs/html/string-manipulation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:10:16.793

您可以通过这种方式使用 basename：

```
...
FILE=`basename $i .csv`
... 
```

# excel - 关闭时保留记录宏 VBA

> ID：15523881
> 
> 赞同：0
> 
> 时间：2013-03-20T12:43:11.530
> 
> 标签：excel, vba, powerpoint

我正在使用 Powerpoint 图表中的记录宏选项从 Excel 工作表中导入数据。编写代码后，关闭图表后代码会自动删除。

有什么方法可以将代码保留在图表的 VBA 中以便我以后运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:54:23.970

您是否尝试过将 powerpoint 保存为 pptm 而不是 pptx

pptm 是启用宏的演示文稿 pptx 是普通演示文稿，不允许存储 VBA

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:57:18.177

实际发生的情况是您在选择在 PowerPoint 中插入图表时启动的 Excel 临时实例中录制宏。

PPT 中的最终结果是一种奇怪的 Chart 对象，其中包含图表和生成它所需的数据，但实际上不是您正在使用的 Excel 对象。这可以解释为什么代码会被抛弃。

不要从 PowerPoint 中插入图表，而是启动 Excel，在创建/编辑图表时记录您需要的内容，然后保存 Excel 文件。它将包含您录制的宏，然后您可以将其复制/粘贴到 PPT 中并根据需要进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:56:49.923

另一个建议是在 Powerpoint 代码模块中编写宏（**不在**Excel 的嵌入式/临时实例中）。

这可能比您正在寻找的更先进

您将需要添加对 Excel 对象模型的库引用，然后您可以对 Powerpoint chartObjects（及其数据表）进行完全的 VBA/编程控制，就像在 Excel 的 VBE 中一样。

# android - 安卓视频上传

> ID：15523884
> 
> 赞同：0
> 
> 时间：2013-03-20T12:43:20.140
> 
> 标签：android, video, upload

我正在尝试将视频上传到服务器，在这里我将视频存储在资产文件夹中，并尝试上传。我使用了以下代码：

```
private void uploadVideo() {

              String upLoadServerUri = "http://xxxxx/video_upload.php";             
              // String [] string = sourceFileUri;
              String fileName = "file:///android_asset/clip0003";

              HttpURLConnection conn = null;
              DataOutputStream dos = null;
              DataInputStream inStream = null;
              String lineEnd = "\r\n";
              String twoHyphens = "--";
              String boundary = "*****";
              int bytesRead, bytesAvailable, bufferSize;
              int serverResponseCode=1;
              byte[] buffer;
              int maxBufferSize = 1 * 1024 * 1024;
              String responseFromServer = "";

              File sourceFile = new File(fileName);
              if (!sourceFile.isFile()) {
               Log.e("Huzza", "Source File Does not exist");

              }

            try { // open a URL connection to the Servlet

               FileInputStream fileInputStream = new FileInputStream(new File(fileName));
               URL url = new URL(upLoadServerUri);
               conn = (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
               conn.setDoInput(true); // Allow Inputs
               conn.setDoOutput(true); // Allow Outputs
               conn.setUseCaches(false); // Don't use a Cached Copy
               conn.setRequestMethod("POST");
               conn.setRequestProperty("Connection", "Keep-Alive");
               conn.setRequestProperty("ENCTYPE", "multipart/form-data");
               conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
               conn.setRequestProperty("video", fileName);
               dos = new DataOutputStream(conn.getOutputStream());

               dos.writeBytes(twoHyphens + boundary + lineEnd);
               dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
               dos.writeBytes(lineEnd);

               bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size
               Log.i("Huzza", "Initial .available : " + bytesAvailable);

               bufferSize = Math.min(bytesAvailable, maxBufferSize);
               buffer = new byte[bufferSize];

               // read file and write it into form...
               bytesRead = fileInputStream.read(buffer, 0, bufferSize);

               while (bytesRead > 0) {
                dos.write(buffer, 0, bufferSize);
                 bytesAvailable = fileInputStream.available();
                 bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                }

               // send multipart form data necesssary after file data...
               dos.writeBytes(lineEnd);
               dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

               // Responses from the server (code and message)
               serverResponseCode = conn.getResponseCode();
               String serverResponseMessage = conn.getResponseMessage();

               Log.i("Upload file to server", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);
               // close streams
               Log.i("Upload file to server", fileName + " File is written");
               fileInputStream.close();
               dos.flush();
               dos.close();
              } catch (MalformedURLException ex) {
               ex.printStackTrace();
               Log.e("Upload file to server", "error: " + ex.getMessage(), ex);
              } catch (Exception e) {
               e.printStackTrace();
              }
            //this block will give the response of upload link
              try {
               BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
               String line;
               while ((line = rd.readLine()) != null) {
                Log.i("Huzza", "RES Message: " + line);
               }
               rd.close();
              } catch (IOException ioex) {
               Log.e("Huzza", "error: " + ioex.getMessage(), ioex);
              }

             } // end upLoad2Server 
```

但由于以下错误，我无法上传！！任何人都可以帮助我。谢谢！

错误：

```
03-20 18:09:07.033: E/AndroidRuntime(1529): FATAL EXCEPTION: main
03-20 18:09:07.033: E/AndroidRuntime(1529): java.lang.NullPointerException
03-20 18:09:07.033: E/AndroidRuntime(1529):     at com.example.galleryframe.videoupload.uploadVideo(videoupload.java:233)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at com.example.galleryframe.videoupload.access$0(videoupload.java:150)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at com.example.galleryframe.videoupload$3.onClick(videoupload.java:114)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at android.view.View.performClick(View.java:2485)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at android.view.View$PerformClick.run(View.java:9080)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at android.os.Handler.handleCallback(Handler.java:587)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at android.os.Looper.loop(Looper.java:123)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at android.app.ActivityThread.main(ActivityThread.java:3683)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at java.lang.reflect.Method.invokeNative(Native Method)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at java.lang.reflect.Method.invoke(Method.java:507)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-20 18:09:07.033: E/AndroidRuntime(1529):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:47:11.233

在不知道哪一行是 233 的情况下，我会猜测并说问题行是

```
FileInputStream fileInputStream = new FileInputStream(new File(fileName)); 
```

您`filename`被定义为 URI，但您正尝试将输入流创建为`File`. 我怀疑这个输入流是`null`. 使用调试器逐步确认。

**编辑：**如果要从`assets`文件夹中读取文件，请使用`getAssets()`方法：

```
String fileName = "clip0003";
InputSteam fileInputSteam = new InputStreamReader(getAssets().open(filename)); 
```

请注意，此代码假定您在`Activity`扩展的类或其他类中`Context`。如果没有，您将需要访问 a`Context`和 call `context.getAssets()`。

# asp.net-mvc - ASP.NET Web API 与 ASP.NET MVC？

> ID：15523886
> 
> 赞同：0
> 
> 时间：2013-03-20T12:43:26.153
> 
> 标签：asp.net-mvc, wcf, web, asp.net-web-api

ASP.NET MVC 中尚不存在 ASP.NET Web API 的哪些功能？

我个人认为您可以通过使用路由和自定义操作结果来完成相同的操作。

它只是自我托管的能力吗？

谢谢你，拉杜

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:15:38.213

1.  与 ASP.NET MVC 不同，ASP.NET Web API 不需要 ASP.NET（也不是 IIS）来运行，
2.  与 WCF 不同，Web API 不抽象传输级别机制——它在构建时考虑了 HTTP 服务，并且包含 HTTP 协议。

广告 1\. 假设您正在构建一个移动应用程序，用户应该能够在其本地 PC 上浏览和下载文件。您不希望使用 ASP.NET MVC 来公开服务，因为您不能假设客户安装了有效的 IIS。不过，您可以使用 Web API 并在 Windows 服务中托管 HTTP 服务。（并为用户提供设置该服务的安装程序）。

广告 2\. 留下抽象意味着更简单的 API、更少的配置和对 HTTP 特定概念的更丰富的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:52:56.537

ASP.NET MVC 是一个 HTTP 堆栈，已针对 Web 浏览器的服务器内容进行了优化。如果您的客户端应用程序不是 Web 浏览器，那么 Web API 可能会成为更灵活的选择。

# c# - 指定的强制转换无效：将数字单元格转换为 int？

> ID：15523889
> 
> 赞同：0
> 
> 时间：2013-03-20T12:43:29.453
> 
> 标签：c#

通常“指定的强制转换无效”错误很容易解决。但是这个让我头疼。

我的应用程序中集成了一个`SQL compact`数据库`C#`。目前我正在获取当前的数据库结构并将其放入数据表中。我使用的 SQL 命令是：

```
select * from information_schema.columns 
```

其中一列是`NUMERIC_PRECISION`，它是一个数值。

我尝试将此信息存储在一个整数变量中，但它告诉我指定的强制转换无效。代码是：

```
int precision;
if (row["NUMERIC_PRECISION"] != DBNull.Value)
    precision = (int)row["NUMERIC_PRECISION"]; 
```

我的问题是为什么这个操作无效？单元格是一个数值，我正在尝试将其转换为整数 - 理论上这应该可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:54:44.530

既然你说该值*可以*为空，我实际上会使用一个可以为空的整数来存储它。

```
int? precision = null;

if(row["NUMERIC_PRECISION"] != DBNull.Value) //or whatever you want to do to make sure it actually has a value
{
    //I usually use Convert.ToInt32 since its easier, but it is also more sensative
    precision = Convert.ToInt32(row["NUMERIC_PRECISION"]);
} 
```

该类`Convert`易于使用并且显然很有意义，但它对空值或格式不正确的值非常敏感，并且在找到时抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:45:31.650

row["NUMERIC_PRECISION"] 返回带有数字类型的对象。您只能将其转换为此装箱对象的确切类型。

尝试先转换为 (decimal) 或 (long)，然后再转换为 (int)。

您可以使用调试器监视检查行的类型[“NUMERIC_PRECISION”]。

您还可以要求 Convert 类为您处理转换：

```
precision = Convert.ToInt32(row["NUMERIC_PRECISION"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:45:30.277

[编辑] 现在你说它是一个字符串：你必须解析它。

尝试：`precision = int.Parse((string)row["NUMERIC_PRECISION"]);`

如果格式不正确，则会引发异常，因此您必须准备好捕获异常，或者使用[int.TryParse()](http://msdn.microsoft.com/en-gb/library/system.int32.tryparse.aspx)的重载来检查其有效性。

[编辑2]

看来数据不是字符串；它是一个 Int16。所以这样做：

`precision = (Int16)row["NUMERIC_PRECISION"];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:45:45.230

尝试使用 int.parse 而不是简单的转换为 int - [http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T12:49:15.310

最佳做法是：`int.Parse(string s)`

```
precision= Convert.ToInt32(row["NUMERIC_PRECISION"]); 
```

# android - android从url加载采样位图

> ID：15523892
> 
> 赞同：0
> 
> 时间：2013-03-20T12:43:38.860
> 
> 标签：android, bitmap, memory-efficient

我试图从 url 有效地加载位图，但不知何故最终我得到了空的 imageview。如果从资源解码，一切正常。

```
try {
    InputStream in = new java.net.URL(urldisplay).openStream();
    mIcon11 = decodeSampledBitmapFromStream(in, 200, 200);
}
protected void onPostExecute(Bitmap result) {
    bmImage.setImageBitmap(result);
} 
```

.

```
public static Bitmap decodeSampledBitmapFromStream(InputStream in, int reqWidth, int reqHeight) {
    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(in, null, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeStream(in, null, options);
} 
```

# php - ZF2 运行命令创建控制器、动作、表单、

> ID：15523893
> 
> 赞同：0
> 
> 时间：2013-03-20T12:43:42.277
> 
> 标签：php, forms, controller, zend-framework2

我正在尝试从 Zend Framework 1.12 切换到 2.1.4，但我遇到了困难。我在 Netbeans IDE 中编写代码并习惯于“运行 Zend 命令”（通过在项目名称上单击鼠标右键，然后单击 Zend > 运行命令）来创建新的控制器、表单、操作等......但我可以'似乎找不到与 ZF2 相同的功能？创建新动作、控制器或表单的正确方法是什么？

# python - 对齐不同级别的日志消息

> ID：15523894
> 
> 赞同：6
> 
> 时间：2013-03-20T12:43:42.603
> 
> 标签：python, logging, module

我正在使用[`logging`](https://docs.python.org/library/logging.html)这样的 Python 模块：

```
class InitLogging():
    def LogModule(self):
        self.Logger          = logging.getLogger("_TCP_Logger")
        self.Logger.LogLevel = logging.DEBUG
        self.Logger.setLevel(self.Logger.LogLevel)
        self.fh              = logging.FileHandler("Log.txt")
        self.fh.level        = logging.DEBUG
        self.formatter       = logging.Formatter('%(asctime)s %(levelname)s %(message)8s')
        self.Logger.addHandler(self.fh)        
        self.Logger.log(logging.INFO,"=====================================")
        self.Logger.log(logging.INFO,"Start Logging Module!!")
        self.Logger.log(logging.INFO,"=====================================")
        self.fh .setFormatter(self.formatter)
        self.Logger.log(logging.INFO,"Enrty to Logging Module!!")

class LogMsg(InitLogging):
    def Logit(self):
        self.LogModule()
        self.Logger.log(logging.DEBUG,'This is Debugging Message!!')
        self.Logger.log(logging.INFO,"This is Info Message!!")
        self.Logger.log(logging.WARNING,"This is WARNING Message!!")

LoggingInstance = LogMsg()
LoggingInstance.Logit() 
```

当我运行我的代码时，我得到以下输出`Log.txt`：

```
=====================================
Start Logging Module!!
=====================================

2013-03-20 17:51:35,135 INFO Enrty to Logging Module!!
2013-03-20 17:51:35,135 DEBUG This is Debugging Message!!
2013-03-20 17:51:35,135 INFO This is Info Message!
2013-03-20 17:51:35,135 WARNING This is WARNING Message!! 
```

但我想将不同日志级别的消息对齐在一起，产生如下输出：

```
=====================================
Start Logging Module!!
=====================================
2013-03-20 17:51:35,135 INFO       Enrty to Logging Module!!
2013-03-20 17:51:35,135 DEBUG      This is Debugging Message!!
2013-03-20 17:51:35,135 INFO       This is Info Message!
2013-03-20 17:51:35,135 WARNING    This is WARNING Message!! 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T12:48:12.980

`levelname`向格式化程序的格式字符串中的字段添加宽度。

这是左对齐的：

```
self.formatter = logging.Formatter('%(asctime)s %(levelname)-10s %(message)s')

                         levelname
                       |----------|
2013-03-20 16:46:50,573 INFO       Enrty to Logging Module!!
2013-03-20 16:46:50,573 DEBUG      This is Debugging Message!!
2013-03-20 16:46:50,573 INFO       This is Info Message!!
2013-03-20 16:46:50,573 WARNING    This is WARNING Message!! 
```

这是右对齐的：

```
self.formatter = logging.Formatter('%(asctime)s %(levelname)10s %(message)s')

                         levelname
                       |----------|
2013-03-20 16:51:04,648       INFO Enrty to Logging Module!!
2013-03-20 16:51:04,650      DEBUG This is Debugging Message!!
2013-03-20 16:51:04,650       INFO This is Info Message!!
2013-03-20 16:51:04,650    WARNING This is WARNING Message!!
                       |0123456789|
                       | width=10 | 
```

[字符串格式化文档](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)

# java - 如何使用可供多个用户使用的 subversion eclipse 插件创建本地存储库

> ID：15523896
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:43:48.063
> 
> 标签：java, eclipse, svn

我在本地 C 驱动器的文件夹中有一个 selenium Web 驱动程序 + Eclipse 项目代码。

我想与使用 Eclipse 的其他用户共享它。我怎样才能做到这一点？

我尝试添加 eclipse subversion 插件，但无法在本地创建存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:46:38.557

使用 TortoiseSVN，您可以创建存储库，在不同组中配置用户、密码。然后，您可以通过 Subclipse Plugin 将此存储库连接到 Eclipse

[第 3 章存储库](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-repository.html)

# php - yii mssql 查询不工作

> ID：15523897
> 
> 赞同：0
> 
> 时间：2013-03-20T12:43:48.833
> 
> 标签：php, mysql, pdo, yii

我有以下查询：

```
Yii::app()->dbNav->createCommand()
    ->select('*')
    ->from('dbo Spectrum Geo Limited$Purch_ Inv_ Header')       
    ->where('"Log Number" = :id', array(':id'=>$_GET['lognumber']))
    ->queryRow(); 
```

它失败并出现以下错误：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[HY000]: General error: 20018 Invalid object name 'dbo'. [20018] (severity 5) [(null)]. The SQL statement executed was: SELECT *
FROM [dbo] [Spectrum Geo Limited$Purch_ Inv_ Header]
WHERE "Log Number" = :id 
```

我的 dblib 连接适用于 mssql。我正在尝试将以下内容转换为 yii

```
$sql="SELECT * FROM [Spectrum Geo Limited\$Purch_ Inv_ Header] WHERE [Log Number] = $q "; 
```

在 Management Studio 中，我运行以下命令以获得所需的结果：

```
SELECT TOP 1000 *
  FROM [Navision].[dbo].[Spectrum Geo Limited$Purch_ Inv_ Header]
    where [Log Number] = 4593 
```

以下工作，但这是理想的方式吗？

```
Yii::app()->dbNav->createCommand("SELECT * FROM [Spectrum Geo Limited\$Purch_ Inv_ Header] WHERE [Log Number] = ".$_GET['lognumber'] ); 
```

**更远**

如果我执行以下操作

```
Yii::app()->dbNav->createCommand()
        ->select('*')
        ->from('[dbo].[Spectrum Geo Limited$Purch_ Inv_ Header]')
        ->where('"Log Number" = :id', array(':id'=>$_GET['lognumber']))
        ->queryRow(); 
```

我收到以下错误：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[HY000]: General error: 20018 Unclosed quotation mark after the character string 'Geo Limited$Purch_ Inv_ Header]
WHERE "Log Number" = '4593''. [20018] (severity 5) [(null)]. The SQL statement executed was: SELECT *
FROM [[dbo]].[[Spectrum] [Geo Limited$Purch_ Inv_ Header]]
WHERE "Log Number" = :id 
```

现在我试过了：

```
Yii::app()->dbNav->createCommand()
        ->select('*')
        ->from('[Spectrum Geo Limited$Purch_ Inv_ Header]')
        ->where('"Log Number" = :id', array(':id'=>$_GET['lognumber']))
        ->queryRow(); 
```

出现错误：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[HY000]: General error: 20018 Unclosed quotation mark after the character string 'Geo Limited$Purch_ Inv_ Header]
WHERE "Log Number" = '4593''. [20018] (severity 5) [(null)]. The SQL statement executed was: SELECT *
FROM [[Spectrum] [Geo Limited$Purch_ Inv_ Header]]
WHERE "Log Number" = :id 
```

删除 where 子句会产生此错误：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[HY000]: General error: 20018 Unclosed quotation mark after the character string 'Geo Limited$Purch_ Inv_ Header]'. [20018] (severity 5) [(null)]. The SQL statement executed was: SELECT *
FROM [[Spectrum] [Geo Limited$Purch_ Inv_ Header]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:02:22.690

您需要将表名称括在括号中，因为该表的名称中有空格。

通常这被认为是糟糕的设计，但看起来这是来自第 3 方供应商的数据库，因此您可能无法更改它。

编辑：您可能也不需要 [dbo] ...

编辑 2：现在导致问题的是 where 子句中列名中的空格。

编辑 3：如果您查看有效的原始查询：

```
Yii::app()->dbNav->createCommand("SELECT * FROM [Spectrum Geo Limited\$Purch_ Inv_ Header] WHERE [Log Number] = ".$_GET['lognumber'] ); 
```

然后将其与此进行比较：

```
SELECT * FROM [[Spectrum] [Geo Limited$Purch_ Inv_ Header]] 
```

你会注意到你的括号不同。

使用它，它应该可以工作：

```
SELECT * FROM [Spectrum Geo Limited\$Purch_ Inv_ Header] 
```

编辑4：

好的，如果您使用以下内容会发生什么？

```
Yii::app()->dbNav->createCommand()
    ->select('*')
    ->from('Spectrum Geo Limited$Purch_ Inv_ Header')       
    ->where('"Log Number" = :id', array(':id'=>$_GET['lognumber']))
    ->queryRow(); 
```

我省略了这`dbo.`部分，因为您的 SQL 语句之前没有它。通过把所有的空格都留在那里，我们可以激活之前让你头疼的 Yii 自动包围......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:01:30.267

当我尝试这个时，它对我有用：

```
$row=Yii::app()->db->createCommand()
->select('*')
->from('wdr_user')
->where('id = :id', array(':id'=>135))
->queryRow();
print_r($row); 
```

我希望如果您删除 where 子句中的双引号，它应该可以工作。

# c# - 为动态添加的 HTML 表格添加边框

> ID：15523899
> 
> 赞同：0
> 
> 时间：2013-03-20T12:43:54.623
> 
> 标签：c#, html, stylesheet

我在后面的代码中动态添加了一个 HTML 表。

我可以给整个表格一个边框。

我怎样才能为每一行做到这一点？我想在每一行下添加一个边框。

如何在运行时向单元格添加超链接？

我试过的是

```
tdr.Width = "100px";
tdr.Attributes.Add("class", "float-left");

row = new HtmlTableRow(); 
cell = new HtmlTableCell();
cell.InnerText = doc;
row.Cells.Add(cell);
tdr.Rows.Add(row);

row = new HtmlTableRow(); 
cell = new HtmlTableCell();
cell.InnerText = "No Timming";
row.Cells.Add(cell);
tdr.Rows.Add(row);

row = new HtmlTableRow(); 
cell = new HtmlTableCell();
cell.InnerText = weekday[i];
row.Cells.Add(cell);
tdr.Rows.Add(row); 
```

还有我的 CSS：

```
<style type="text/css">
    .float-left
    {
        float:left;
        border-style:solid;
        border-width:2px;
        border-color:Black;
    }
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:05:18.087

对于您问题的第一部分，您可以通过添加一个简单的 css 规则来添加边框而不更改标记生成：

```
tr {
  border-bottom: solid 1px black;
} 
```

[通过about.com](http://webdesign.about.com/od/tables/ht/how-to-add-internal-lines-in-a-table-with-CSS.htm)和[w3c 学校](http://www.w3schools.com/css/css_table.asp)都有关于样式表的概述

请注意，您还需要`border-collapse: collapse;`在表格上设置 css 属性。

我已经为你举了一个[例子 jsFiddle](http://jsfiddle.net/Y49rf/1/)。

您可以将 CSS 规则放在您的 CSS 部分（注意我还添加了`border-collapse`）：

```
<style type="text/css">

    tr {
      border-bottom: solid 1px black;
    } 

    .float-left{
        float:left;
        border-style:solid;
        border-width:2px;
        border-color:Black;
        border-collapse: collapse;
    }

</style> 
```

您还可以考虑删除 float-left css 属性并更改`.float-left`为`table` 进一步简化您的代码。

对于您问题的第二部分：

> > 并在运行时为表中的每个值添加一个超链接

您可以简单地使用[HtmlAnchorClass](http://msdn.microsoft.com/en-gb/library/system.web.ui.htmlcontrols.htmlanchor%28v=vs.100%29.aspx)。

实际上，一个简单的例子是：

```
HtmlAnchor htmlanchor = new HtmlAnchor();
htmlanchor.HRef = "http://www.linkurl.com";
htmlanchor.InnerText = "My Link Text";
//Add it to a cell
cell.Controls.Add(htmlanchor); 
```

这将为您的单元格添加一个超链接。

您可能还需要考虑使用[ASP Repeater 控件](http://msdn.microsoft.com/en-GB/library/system.web.ui.webcontrols.repeater.aspx)或[DataGrid](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.aspx)控件，因为它们中的每一个都为您提供了模板化标记的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:53:33.117

你需要在你的 TR （行）上添加一个 CSS

或像这样的内联边框：

```
 row.Attributes.Add("border-bottom", "solid red 1px"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T03:28:20.157

@Moondust 是正确的，但他缺少 Style 标签，这就是没有效果的原因。此外，您不能在`<tr>`元素上设置样式。您必须将其设置在`<td>`.

IE

这里的`<tr>`风格什么都不做。确实`<td>`！

```
<tr style="border-color:black;border-style:solid;border-width:thin;">
  <td width="100px" style="border-bottom: black thin solid;">Boarder</td>
  <td style="background-color:#FFFF00;" width="10px"></td>
</tr> 
```

为了实现底部边框，至少在单元格中，它是......

```
row.Cells[0].Attributes.Add("style", "border-bottom: black thin solid;"); 
```

因此，要连续执行此操作，您必须为每个单元格执行此操作。对不起

# jquery - 类型错误 $.widget 不起作用

> ID：15523904
> 
> 赞同：2
> 
> 时间：2013-03-20T12:44:10.843
> 
> 标签：jquery, jquery

我正在使用两个[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")插件，一个用于自动完成组合框，另一个用于 i 切换按钮。问题是当我一次访问这两个插件时 $ 小部件没有显示功能错误，但是如果我单独提供这些插件没有显示错误。你们能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-08T04:11:23.383

您包含 jQuery 两次。这就是问题。只需避免第二个，包括：

```
<link rel="stylesheet" href="../../../jquery/jquery-ui.css" />
<script src="../../../jquery/jquery-1.8.2.js"></script>
<script src="../../../jquery/jquery-ui.js"></script>

<link href="../js/jquery.ibutton.css" rel="stylesheet" />
<script src="../js/jquery.ibutton.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:38:46.340

尝试添加最新版本的 jQuery 和 jQuery UI。

[http://code.jquery.com/jquery-1.9.1.js](http://code.jquery.com/jquery-1.9.1.js)

[http://code.jquery.com/ui/1.10.2/jquery-ui.js](http://code.jquery.com/ui/1.10.2/jquery-ui.js)

最新版本的 jQuery 将支持最新版本的 jQuery UI，因此请尝试同时使用最新版本的 jQuery 和 JQuery UI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-08T07:08:21.773

问题在于包含脚本的顺序。起初我在我的小部件和 jquery-ui 之后包含了文件。我更改了顺序，问题得到了解决。

# svg - 显示完整的 SVG，缩放不变

> ID：15523906
> 
> 赞同：12
> 
> 时间：2013-03-20T12:44:18.623
> 
> 标签：svg, d3.js, export, png, force-layout

我有一个`d3`生成的力布局图，我需要将其导出到`png`当前（用户选择的）缩放不变。

根据我的推理，这将增加`SVG`宽度和高度，因此如果`svg`它`1920x1080`被“放大”，则导出`svg`的宽度和高度可能要大得多以适应这一点。

我已经尝试了一切，但我遗漏了一些东西，我似乎无法为我需要的输出动态计算正确的值。

这是我的**[示例](http://jsfiddle.net/epoch/aEzQ2/embedded/result/)**export `SVG`，请注意还有更多信息，只是在该比例下不可见。

**编辑**

这是我的基本导出代码，主要改编自 highcharts：

```
 serializeSvg: function() {
        /**
         * serialize a xml object to string
         * @param {type} xmlNode the node to use
         * @returns {String|@exp;xmlNode@pro;xml|@exp;window@pro;XMLSerializer@call;@call;serializeToString}
         */
        function serializeXmlNode(xmlNode) {
            if (typeof window.XMLSerializer !== 'undefined') {
                return (new window.XMLSerializer()).serializeToString(xmlNode);
            } else if (typeof xmlNode.xml !== 'undefined') {
                return xmlNode.xml;
            }

            return '';
        }

        var svg = serializeXmlNode(document.getElementsByTagName('svg')[0]),
            factor = 2;
        svg = '<svg'
                + ' xmlns="http://www.w3.org/2000/svg"' // xml namespace
                + ' version="1.1"'
                + ' xmlns:xlink="http://www.w3.org/1999/xlink"' // for images
                + ' ' + svg.substring(svg.indexOf('<svg ') + 5);

        // highcharts svg sanitizer
        svg = svg.replace(/width="([^"]+)"/, function(m, width) {
                return 'width="' + (width * factor) + '"';
            }).replace(/height="([^"]+)"/, function(m, height) {
                return 'height="' + (height * factor) + '"';
            }).replace(/<rect class="drag"[^<]+<\/rect>/, '')

            // IE specific
            .replace(/<IMG /g, '<image ')
            .replace(/height=([^" ]+)/g, 'height="$1"')
            .replace(/width=([^" ]+)/g, 'width="$1"')
            .replace(/id=([^" >]+)/g, 'id="$1"')
            .replace(/class=([^" ]+)/g, 'class="$1"')
            .replace(/ transform /g, ' ')
            .replace(/:(path|rect)/g, '$1')
            .replace(/style="([^"]+)"/g, function(s) {
                    return s.toLowerCase();
            });

        return svg;
    } 
```

以及 d3 布局的主要缩放/缩放启动：

```
var layout = d3.layout.force();
var DEFAULT_SIZE = 64;
var GROWTH_SCALE = 1.15;
var SHRINK_SCALE = 1.05;

// creates a new force layout
var force = layout
    .size([w, h])
    .gravity(.06)
    .distance(110)
    //.friction(0.6)
    //.linkStrength(0.4)
    .charge(-((DEFAULT_SIZE * GROWTH_SCALE) * 10))
    .on('tick', tick);

// creates the svg context
var svg = d3.select('.la-container').append('svg:svg')
    .attr('width', w)
    .attr('height', h)
    .attr('pointer-events', 'all') // set for the pan/zooming
    .append('svg:g') // add a g element for capturing zoom and pan
      .call(d3.behavior.zoom().scaleExtent([0.6, 6.0]).on('zoom', redraw))
    .append('svg:g');

svg.append('svg:rect')
    .attr('class', 'drag')
    .attr('width', w)
    .attr('height', h)
    .attr('fill', 'white'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:55:34.230

因此，在您的 d3 启动代码中，您调用`d3.behaviour.zoom.on()`将“重绘”函数绑定到“缩放”操作。要获得比例和平移级别，您需要捕获此函数中的`d3.scale` 和`d3.translate`值，如下所示（因为您尚未发布重绘函数的代码）：

```
var scale = 1;
var xtranslate=0;
var ytranslate=0;

var redraw = function(){
    scale= d3.event.scale;
    xtranslate=d3.event.translate[0];
    ytranslate=d3.event.translate[1];

    //your actual code to redraw stufff
} 
```

这将为您提供 d3 的缩放和平移值：然后您需要对导出的 svg 应用适当的更改：我实际上并没有这样做，但大概您可以适当地缩放“高度”和“宽度”属性（我认为这只是将属性值乘以比例值，但我不能确定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T07:08:43.527

应用一个视图框并将其乘以比例值，

例如 1920x1080，当未缩放时 viewbox=0 0 1920 1080

比例 = 0.5 1920*0.5 1080*0.5 视图框 = 0 0 960 540

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:35:43.130

From your comments, you might check out some of the options discussed here: [https://groups.google.com/forum/#!msg/d3-js/tHRV4uvvHFU/yjIAfdQN8WsJ](https://groups.google.com/forum/#!msg/d3-js/tHRV4uvvHFU/yjIAfdQN8WsJ)

D3 should be writing attributes into the DOM, the general expectation is that if you export the SVG as-is, you should get exactly the same view. It sounds like what you want is a process to render the existing view as png or similar.

Here's an interesting client-side only take [http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:08:17.470

我没有对此进行测试，但我认为当您导出到图像时，您首先需要缩小到起始级别。然后序列化 XMLNode。然后根据用户的缩放级别像现在一样增加大小。然后返回它。

您最初应该能够使用以下方法获取用户的转换：

> # 缩放比例（）
> 
> 如果未指定，则返回当前缩放比例，默认为 1。
> 
> # 缩放。翻译（）
> 
> 如果未指定，则返回当前平移向量，默认为 [0, 0]。

# arrays - 创建随机二维数组（4x4）FreePascal

> ID：15523907
> 
> 赞同：3
> 
> 时间：2013-03-20T12:44:19.410
> 
> 标签：arrays, multidimensional-array, pascal, freepascal

我必须在 FreePascal 中制作随机二维数组（4x4）。每个元素必须介于 0 到 100 之间。

例如：

```
12 99 1 85
43 75 5 11
0  100 77 31
64 15 9 74 
```

我试过了，但它不起作用：

```
var
  row:array[1..4] of string = (random(100));
  column:array[1..4] of string = (random(100));
  matrix:array[1..4,1..4] of string;

  x:integer;
  y:integer;

begin

  for x := 1 to 4 do
    for y := 1 to 4 do
      matrix[x,y] := row[x] + column[y];

  for x := 1 to 4 do
    for y := 1 to 4 do
      write(matrix[x,y], ' ');

end. 
```

它给出了错误：

```
Illegal expression
Expected another 3 array elements
Illegal expression
Expected another 3 array elements 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:07:49.117

您的`row`和`column`变量是错误的，因为您无法通过函数调用初始化数组。这些变量甚至不是必需的，因为您`matrix`已经定义了。我已将`matrix`变量类型更改为整数的多维数组。此代码生成 0-100 范围内的随机数；0 和 100 包括在内。

```
program Project1;

uses
  SysUtils;

var
  X: Integer;
  Y: Integer;
  Matrix: array[1..4, 1..4] of Integer;
begin
  Randomize;

  for X := 1 to 4 do
    for Y := 1 to 4 do
      Matrix[X, Y] := Random(101);

  for X := 1 to 4 do
  begin
    for Y := 1 to 4 do
      Write(IntToStr(Matrix[X, Y]), ' ');
    WriteLn;
  end;

  ReadLn;
end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:59:44.923

您已将行、列和矩阵声明为字符串数组。

将其更改为整数数组。

您需要在运行时定义行和列数组。

```
var
  row : array[1..4] of Integer;
  column : array[1..4] of Integer;
  matrix : array[1..4,1..4] of Integer;

  x:integer;
  y:integer;

begin
  Randomize; // Init random generator
  for x := 1 to 4 do
  begin
    row[x] := Random(51);
    column[x] := Random(51);
  end;

  for x := 1 to 4 do
    for y := 1 to 4 do
      matrix[x,y] := row[x] + column[y];

  for x := 1 to 4 do
  begin
    for y := 1 to 4 do
    begin
      write(IntToStr(matrix[x,y]), ' ');
    end;
    WriteLn;
  end;
  ReadLn;

end. 
```

# javascript - 临时重新绑定然后安全地重新附加库方法

> ID：15523913
> 
> 赞同：0
> 
> 时间：2013-03-20T12:44:36.850
> 
> 标签：javascript, functional-programming, this, dynamic-rebinding

我正在现有库的上下文中构建一个模块。库的一些功能——具体来说，`LIBRARY.module.add`（*例如：实际功能要复杂得多*）——可以在各种场景中触发，会破坏我模块的用户体验，所以我需要中断它以考虑我的模块的深奥问题。

我不允许重新编写原始库的任何部分，也不允许复制应该由库覆盖的功能。

现有代码是这样的：

```
LIBRARY.moduleX = {
    two      : 2,
    addToTwo : function(addAnd){
        return this.two + addAnd;
    }
} 
```

这里的一个关键问题是`LIBRARY`模块都是用文字对象表示法编写的，并且它们的方法依赖于`this`. 另一个问题是代码库不断变化。我不能依赖`addToTwo`'s arity 或类似的东西（以防有人扩展它以获取多个操作数或其他）。

所以我写了这个来作为我组件初始化的一部分执行：

```
void function handleModuleX(){
    // Keep a reference before rebinding
    var LIBRARY_moduleX_addToTwo = LIBRARY.moduleX.addToTwo;

    // Restores the original binding
    function rebind(){
        LIBRARY.moduleX.addToTwo = function(){
            return LIBRARY_moduleX_addToTwo.apply(LIBRARY.moduleX, arguments);
        }
    }

    // Rebind to consider local logic
    LIBRARY.moduleX.addToTwo = function handleEsotericLogic(){
        if(unresolvedConcerns){
            stuff();
        }
        else {
            rebind();

            LIBRARY.moduleX.addToTwo();
        }
    }
}(); 
```

这似乎有效。我最关心的是重新绑定的安全性和易读性：

*   这种技术是防弹的，因为它不做任何假设`addToTwo`吗？
*   这是否尽可能接近恢复原始绑定？
*   我可以在不嵌套这么多范围的情况下实现相同的功能吗（显然`rebind`可以写入`else`语句中——它只是为了清楚起见才被吊出）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:58:49.600

更多的研究使我找到了 underscore 的[`bind`](http://underscorejs.org/docs/underscore.html#section-58)方法，它与我对 polyfill [ECMAScript 5](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)的同名本机 Function 方法所做的基本相同——这似乎是我可以避免上述实现中涉及的 2 个闭包的唯一方法. 所以现在我的代码更冗长了——因为我真的不喜欢调用库方法的想法，如果可能的话，会在堆栈跟踪上的代码中反弹（就像我从未接触过它一样！）：

```
function rebind(){
    if(Function.prototype.bind){
        LIBRARY.moduleX.addToTwo = LIBRARY_moduleX_addToTwo.bind(LIBRARY.moduleX);
    }
    else {
        LIBRARY.moduleX.addToTwo = function(){
            return LIBRARY_moduleX_addToTwo.apply(LIBRARY.moduleX, arguments);
        }
    }
} 
```

# c# - 如何从 Observablecollection 设置组合框的 ItemsSource

> ID：15523915
> 
> 赞同：1
> 
> 时间：2013-03-20T12:44:40.210
> 
> 标签：c#, combobox, mvvm-light, winrt-xaml, observablecollection

嗨，我正在使用 MVVM-Light 框架开发 WinRT 项目。我有一个列表视图，其中 ItemsSource 是我的 ViewModel 上的 ObservableCollection。此 ObservableCollection 中的对象 (ClassOne) 有一个字段，该字段本身就是 ObservableCollection。在 Listview 我有 ComboBoxes 谁的 itemsSource 我想绑定到第二个 ObservableCollection（这是另一个 observablecollection 中的字段）。第二个 ObservableCollection 动态填充到我的 View 的 ViewModel 中。

我的 Xaml 代码：

```
<ListView ItemsSource="{Binding CollectionOne}">
  <ListView.ItemTemplate>
    <DataTemplate>
 <StackPanel>
     <TextBlock Text="{Binding DataCollectionOne}"></TextBlock>                        
     <ComboBox ItemsSource="{Binding Path=CorrespondingViewModel.CollectionOne.CollectionTwo, Source={StaticResource Locator}}">
        <ComboBox.ItemTemplate>
           <DataTemplate>
              <TextBlock Text="{Binding DataCollectionTwo}"/>
           </DataTemplate>
        </ComboBox.ItemTemplate>
      </ComboBox> 
</StackPanel>
    </DataTemplate>
  </ListView.ItemTemplate>
</ListView> 
```

我想做的是：

```
 <ComboBox ItemsSource="{Binding Path=CorrespondingViewModel.CollectionOne.CollectionTwo, Source={StaticResource Locator}}"> 
```

但这行不通。

这是我在 ViewModel 上的 CollectionOne 属性：

```
private ObservableCollection<ClassOne> _collectionOne;
    public ObservableCollection<ClassOne> CollectionOne
    {
        get { return _collectionOne;; }
        set
        {
            if (_collectionOne; == value)
            {
                return;
            }
            _collectionOne; = value;
            RaisePropertyChanged(() => CollectionOne);
        }
    } 
```

这是 ObservableCollection(ClassOne) 中的类：

```
public class ClassOne
{
    public string DataCollectionOne{ get; set; }
    public ObservableCollection<ClassTwo> CollectionTwo{ get; set; }
} 
```

第二类只包含一个字符串属性。

```
public class ClassTwo
{
    public string DataCollectionTwo{ get; set; }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:29:13.990

我在一个测试项目中尝试过，

你可以简单地交换你的代码

```
<ComboBox ItemsSource="{Binding Path=CorrespondingViewModel.CollectionOne.CollectionTwo, Source={StaticResource Locator}}"> 
```

和

```
<ComboBox ItemsSource="{Binding CollectionTwo}"> 
```

在我的测试项目中运行良好。

希望有帮助！

# android - 如何根据不同的屏幕尺寸在android中支持方向？

> ID：15523916
> 
> 赞同：2
> 
> 时间：2013-03-20T12:44:46.730
> 
> 标签：android

如何支持屏幕尺寸超过 5 英寸的智能手机的横向和纵向，并且仅支持在 android 中屏幕尺寸小于或等于 5 英寸的纵向模式。

谢谢，安卓开发者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:57:41.850

您应该在显示每个活动之前检查[屏幕大小](https://stackoverflow.com/questions/2193457/is-there-a-way-to-determine-android-physical-screen-height-in-cm-or-inches)（在活动的`onCreate`方法中）。如果小于 5 英寸，则[手动将活动方向设置为纵向](http://russenreaktor.wordpress.com/2010/01/03/solved-set-screen-orientation-programmatically/)。

# c# - 如何在 DataTable 上检查 IS NULL？

> ID：15523917
> 
> 赞同：2
> 
> 时间：2013-03-20T12:44:58.440
> 
> 标签：c#, asp.net, linq, datatable

在我的情况下，我正在传递一个 sql 查询并获取数据集中的数据，但是当我尝试获取 ParentId 列包含 NULL 的行时会出现问题。这是一段代码。

```
 DataSet ds = GetDataSet("Select ProductId,ProductName,ParentId from ProductTable");

   //ds is not blank and it has 2 rows in which ParentId is NULL

   DataRow[] Rows = ds.Tables[0].Select("ParentId IS NULL"); 
```

但我仍然没有得到任何行。需要帮忙。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T12:47:30.727

使用也支持可空类型的强类型`DataRow`扩展方法：[`Field`](http://msdn.microsoft.com/en-us/library/bb360891%28v=vs.90%29.aspx)

```
IEnumerable<DataRow> rows = ds.Tables[0].AsEnumerable()
    .Where(r => !r.Field<int?>("ParentId").HasValue); 
```

请注意，我使用`Enumerable.Where`的是 Linq 扩展方法来过滤表。

如果你想要一个数组使用`ToArray`，如果你想要一个新的`DataTable`使用`CopyToDataTable`。如果您只是想枚举结果，请使用`foreach`.

```
foreach(DataRow row in rows)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T12:51:25.747

```
var rowsWithoutParent = dt.AsEnumerable().Where(r => r["ParentId"] == null);

var rowsWithParent = dt.AsEnumerable().Where(r => r["ParentId"] != null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-08T12:11:52.280

```
var rows = ds.Tables[0].AsEnumerable()
    .Where(r => r.IsNull("ParentId")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T12:47:37.617

查看

```
ds.Tables.Count 
```

然后

```
ds.Tables[0].Rows.Count 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T12:48:42.030

您可以像这样访问这些项目：

```
 String value = ds.Tables[0].Rows[RowNum][ColNum].ToString(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-01T11:14:45.113

为我工作：

```
 DataTable newDt = dt.AsEnumerable().Where(r => r["column name"] == DBNull.Value).CopyToDataTable(); 
```

如果等于`null`不工作，因为是返回`DBNull`

# c++ - 数组作为操作数的语法

> ID：15523918
> 
> 赞同：-5
> 
> 时间：2013-03-20T12:44:58.470
> 
> 标签：c++, c, eclipse, optimization, arduino

将函数中未预定义的数组作为操作数传递的语法是什么？

例如，我有这个功能：

```
void kilos(int percentage[2], char liquid[2][4]); 
```

因此，如果我制作两个不同的数组并将它们作为操作数传递，一切都会正常工作。如果我不想在调用函数之前创建数组，这将如何工作？是分析操作数而不使用数组的唯一解决方案吗？

我想调用该函数，但我想在调用该函数时创建数组，例如：

```
kilos(int percent[2]={40,60}, char liq[2][4]={'wate','milk'}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:15:21.540

在 C++ 中，如果你有一个支持 C++11 的编译器并且你使用`std::vector`而不是原始数组，你可以使用[初始化列表](http://en.wikipedia.org/wiki/C%2B%2B11#Initializer_lists)：

```
 void kilos(const std::vector<int> percentage,
            const std::vector<std::string> liquid);

// ...

kilos({40, 60}, {"water", "milk"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:48:17.767

将指针传递给函数相当于传递数组。指针可以指向静态分配的缓冲区或动态内存（例如`new []`或`malloc`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:22:16.470

您需要像这样调用函数：

```
kilos((int[2]){40,60}, (char[2][4]){"wate", "milk"}); 
```

注意字符串文字周围的双引号。而且您可能需要第二个数组来`char[2][5]`允许空终止符。

# javascript - 如何阻止浏览器发送关于 JS 中 IMG.SRC 更改的附加请求

> ID：15523919
> 
> 赞同：1
> 
> 时间：2013-03-20T12:45:02.133
> 
> 标签：javascript, html, browser, httprequest

我正在开发一个应用程序，其中图像会根据不同的用户操作更改其来源。大约有 200 张图片可以以这种方式显示，我确信在某些时候会显示至少 90% 的折扣。

为了防止闪烁，我添加了一个图像预加载器。

但是，当我更改 IMG 的 SRC 属性时，浏览器会发送一个新的获取请求，即使图像已经加载。

根据分析器的说法，这样的请求平均需要大约 30 毫秒，所发生的只是浏览器无论如何都会从缓存中加载图像。

有没有办法阻止浏览器发送额外的请求并直接显示图像，或者这是不可能的？

如果不可能，将所有 200 张图像都放入代码中，然后只切换一个可见（或更精确地显示），这是一种不好的做法吗？

在预加载器中缓存和图像作为对象并且只切换它们怎么样？

我正在考虑的另一件事是将所有这些图像放入一个精灵并仅更改背景位置。

你认为最好的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:29:07.860

对于您所描述的快节奏图像交换类型，我推荐 CSS Sprites。如果您的图片很大并且您的观众可能包括相当数量的低速用户，这可能不是最佳选择，但您可以采取一些措施来隐藏它（例如首先加载一个小的静态图片，然后将其换成较大图像完成加载后的动态元素）。

[该网站的其他方面从未完成，但我们在http://www.premiumframes.com/](http://www.premiumframes.com/)上使用了这些类型的大规模精灵技术来进行分层图像切换并填充下拉选择器中的图像。加载了相当多的数据，但对于买得起镜框的观众来说，该公司对性能非常满意。我怀疑您的需求不会像所需要的那样极端，因此您应该能够为中低层用户实现更好的性能。

# c# - (C#) 在 dll 中引用 dll

> ID：15523920
> 
> 赞同：1
> 
> 时间：2013-03-20T12:45:09.987
> 
> 标签：c#, dll, reference, linker

我在里面编写`databases.dll`并引用了 2 个 dll。

```
Npgsql.dll and MySql.Data.dll 
```

我在命令行中将我的项目编译为 databases.dll，如下所示：

```
csc.exe /target:library /r:Npgsql.dll,MySql.Data.dll /out:databases.dll PostgreSql.cs MySql.cs 
```

`databases.dll`编译没有问题。

当我想测试它创建新项目和引用时出现问题`database.dll`。程序正在编译，但是当它尝试使用 dll 代码时，会出现错误：`TypeInitializationException was unhandled`.

我试图将两个 dll 复制到编译目标所在的目录。

我想问是否有可能：

1.  创建引用其他 dll 的 dll。

2.  在没有引用 dll 的情况下向最终用户提供 dll，如果他们想使用 dll 的每个部分，请要求他们这样做。所以当程序员想要使用MySql时，他必须提供`MySql.dll`给编译。

我希望我说清楚了，因为我的英语不完美；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:48:09.327

由于`Npgsql.dll`和`MySql.Data.dll`都是依赖 DLL，它们都需要被您的项目引用才能编译。

# android - 用于向服务器发送数据的 AsyncTask

> ID：15523922
> 
> 赞同：0
> 
> 时间：2013-03-20T12:45:13.513
> 
> 标签：android, android-asynctask

我正在编写一个`AsyncTask`有望在后台连续将数据发送到服务器的程序。我已将其称为`onCreate()`. `MainActivity`但它不起作用。吐司`onPreExecute()`显示然后什么也没有发生。

```
private class MyAsync extends AsyncTask<Void, Void, Void>
 {
      @Override
      protected void onPreExecute() 
      {
          Toast.makeText(getApplicationContext(),"1", Toast.LENGTH_LONG).show();
            // update the UI immediately after the task is executed
            super.onPreExecute();
      }

          @Override
          protected Void doInBackground(Void... params)
          {
             // Toast.makeText(getApplicationContext(),"2", Toast.LENGTH_LONG).show();
              File file = new File(Environment.getExternalStorageDirectory(),"/BPCLTracker/gpsdata.txt");
              int i=0;

              RandomAccessFile in = null;

              try
              {
                  in = new RandomAccessFile(file, "rw");
              } 
              catch (FileNotFoundException e) 
              {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
              } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
              }
              //String line =null;
              while (true) 
              {
                HttpEntity entity=null;
                try 
                {
                    if (new GPSLoggerService().isInternetOn()) 
                    {
                            while ((line = in.readLine()) != null)
                            {

                                HttpClient client = new DefaultHttpClient();
                                String url = "http://67.23.166.35:80/android/insert.php";
                                HttpPost request = new HttpPost(url);
                                StringEntity se = new StringEntity(line);
                                se.setContentEncoding("UTF-8");
                                se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                                entity = se;
                                request.setEntity(entity);
                                HttpResponse response = client.execute(request);
                                entity = response.getEntity();
                                i++;
                            }
                            if((line = in.readLine()) == null && entity!=null)
                            {
                                file.delete();
                                new MyAsync().execute();
                            }

                    }// end of if
                    else
                    {
                        Thread.sleep(60000);

                    } // end of else
                }// end of try
                catch (NullPointerException e1)
                {
                    e1.printStackTrace();
                } 
                catch (InterruptedException e2) 
                {
                    e2.printStackTrace();
                }
                catch (IOException e1) 
                {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }// end of while

      }//doinbackground

      @Override
      protected void onProgressUpdate(Void... values) {
         // Toast.makeText(getApplicationContext(),"3", Toast.LENGTH_LONG).show();
      }

      @Override
      protected void onPostExecute(Void result) {
          Toast.makeText(getApplicationContext(),"4", Toast.LENGTH_LONG).show();
      }

     }//AsyncTask 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:50:50.140

对于一个问题，您需要更具体地了解正在发生的事情。但是，您不想这样做。`AsyncTask`用于短期操作/根据[文档](http://developer.android.com/reference/android/os/AsyncTask.html)

> AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。

你有一个无限循环，`while(true)`这很少是一个好主意。我建议你重新考虑如何做到这一点。您可以设置 a `Timer`,`AlarmManager`或 a`Service`但我建议您不要`AsyncTask`用于此

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:28:59.683

您可以使用使用服务连续上传数据。我提供在后台运行的代码并在服务器上连续上传数据。

您只需调用此服务：

startService(new Intent(this, BackgroundService.class));

还在 Android 清单文件中添加条目

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONObject;

import android.app.IntentService;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

public class BackgroundService extends IntentService
{
    private static final String TAG = "BackgroundService";
    Context mContext = null;

    final static int SERVICE_NAME = 1;
    int WORK_TYPE;

    public BackgroundService()
    {
        super(TAG);
    }

    @Override
    protected void onHandleIntent(Intent intent)
    {

        mContext = getBaseContext();
        WORK_TYPE = SETTING;
        new BackgroundTask(mContext).execute();
    }

    public class BackgroundTask extends AsyncTask<String, String, Void>
    {
        Context mContext = null;

        public BackgroundTask(Context context)
        {
            mContext = context;
        }

        protected void onPreExecute()
        {
        }

        protected Void doInBackground(final String... args)
        {
            switch (WORK_TYPE)
            {
                case SETTING:
                String input = "what ever text data post on server";
                response = sendDataToServer(input);
                JsonUtils.parseServerData(response, hashMapObj);
                break;
            }
            return null;
        }

        protected void onPostExecute(final Void unused)
        {
            switch (WORK_TYPE)
            {
                case SETTING:
                    if (!"".equalsIgnoreCase(response) && response != null)
                    {
                        DeviceUtils.deviceRegistration(hashMapObj, mContext);   
                    }
                    callService(SERVICE_NAME);
                    break;
            }
        }
    }

    public void callService(int work)
    {
        WORK_TYPE = work;
        new BackgroundTask(mContext).execute();
    }

    public String sendDataToServer(String data)
    {
        StringBuffer sb = new StringBuffer("");
        String serverUrl = "http://67.23.166.35:80/android/insert.php" ;
        try
        {
            URL url = new URL();
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setConnectTimeout(6 * 10 * 1000);
            conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
            conn.setRequestMethod("POST");

            OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
            wr.write(data);
            wr.flush();

            // Get the response
            BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

            String line = "";
            while ((line = rd.readLine()) != null)
            {
                // Process line...
                sb.append(line);
            }

            wr.close();
            rd.close();
            return sb.toString();
        }
        catch (Exception e)
        {
            Log.d("Exception : ", e.getStackTrace().toString());
        }

        return sb.toString();
    }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T07:08:22.713

我注意到您在 asyncTask 中的参数全部无效尝试将第一个参数更改为字符串，当然还将后台执行的参数更改为字符串，然后将您的类调用到您的 onCreate。以此作为参考

```
public class reqDataREST extends AsyncTask<String, Void, String> {

@Override
protected String doInBackground(String... arg0) {
    // TODO Auto-generated method stub

    HttpClient client = new DefaultHttpClient();
    HttpPost postRequest = new HttpPost(
            "http://icommute-ph.com/api/v1/todos/");

    try {
    // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("Name", tstData.getText().toString()));
                postRequest.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        BasicHttpContext httpContext = new BasicHttpContext();
            httpContext.setAttribute(ClientContext.COOKIE_STORE, new BasicCookieStore());

    // Execute HTTP Post Request
        HttpResponse response = client.execute(postRequest, httpContext);
        //int statusCode = response.getStatusLine().getStatusCode();
    }
    catch (ClientProtocolException e) {
        e.printStackTrace();
        // TODO Auto-generated catch block
    }
    catch (IOException e) {
        e.printStackTrace();
        // TODO Auto-generated catch block
    }
    return null;
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-14T17:06:32.577

验证您的设备是否可以访问 Internet，并且您已在 AndroidManiest.xml 文件中授予 Internet 访问权限。

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# java - 如何在多个 Enum 中重用代码

> ID：15523925
> 
> 赞同：7
> 
> 时间：2013-03-20T12:45:16.947
> 
> 标签：java, oop, enums

正如我们所知，java枚举类：

1.  隐式扩展 java.lang.Enum；
2.  不能从任何其他枚举类扩展。

我有多个枚举类，如下所示：

```
enum ResourceState {
    RUNNING, STOPPING,STARTTING;//...
    void aMethod() {
        // ...
    }
}

enum ServiceState {
    RUNNING, STOPPING,STARTTING,ERROR;//...
    void aMethod() {
        // ...
    }
} 
```

`aMethod()`enum中的方法`ResourceState`和`ServiceState`完全一样。

在 OOP 中，如果不是枚举，它们应该将相同的方法抽象为一个超抽象类，如下所示`ResourceState`：`ServiceState`

```
abstract class AbstractState{
    void aMethod() {
        // ...
    }
} 
```

但是 ResourceState 无法从 AbstractState 扩展，您有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:08:55.487

枚举不能扩展其他类，但可以实现接口。因此，更面向对象的方法是让您的枚举实现一个通用接口，然后使用委托给提供真正实现的支持类：

```
public interface SomeInterface {
    void aMethod();
}

public class SomeInterfaceSupport implements SomeInterface {
    public void aMethod() {
      //implementation
    }
}

public enum ResourceState implements SomeInterface {
    RUNNING, STOPPING,STARTTING;

    SomeInterfaceSupport someInterfaceSupport;

    ResourceState() {
        someInterfaceSupport = new SomeInterfaceSupport();
    }

    @Override
    public void aMethod() {
        someInterfaceSupport.aMethod();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T12:48:41.353

啊，是的，这个限制已经咬了我好几次了。基本上，只要您拥有应用枚举的最微不足道的模型，就会发生这种情况。

我发现解决此问题的最佳方法是使用从您的`aMethod`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T12:55:38.853

您可以用旧的“类型安全枚举设计模式”替换枚举：

```
public class ResourceState {
    private ResourceState() {
    }

    public void aMethod() { .... }

    public static ResourceState RUNNING = new ResourceState();
    public static ResourceState STOPPING = new ResourceState();
    ....
} 
```

然后扩展它并在需要时覆盖 aMethod 。

# java - 如何在主方法中使用方法三次

> ID：15523926
> 
> 赞同：-6
> 
> 时间：2013-03-20T12:45:20.437
> 
> 标签：java

我做了一个应用程序，我计算珠宝店的成本并使用主要方法中的方法。

此方法必须使用 3 次，仅更改一个参数。我还不断收到来自 Java 的错误，说方法和变量已经定义，

这是我的代码：

```
import java.text.DecimalFormat;
import java.util.Scanner;
import javax.swing.JOptionPane;

public class JewelleryStore
{

    public static void main(String[] args)
    {

        double stateRate = 0.1;
        double luxuryRate = 0.2;
        double laborRate = 0.05;
        double extraCharge;
        int numOrdered;
        double diamondCost;
        double settingCost;
        double baseCost;
        double totalCost;
        double laborCost;
        double stateTax;
        double luxuryTax;
        double finalAmountDue;

        Scanner keyInput = new Scanner(System.in);

        System.out.println("What is the cost of the diamond?");
        diamondCost = keyInput.nextDouble();
        System.out.println("What is the cost of the setting?");
        settingCost = keyInput.nextDouble();
        System.out.println("How many rings are you ordering?");
        numOrdered = keyInput.nextInt();

        baseCost = diamondCost + settingCost;
        calcExtraCost(baseCost, laborRate);
        laborCost = extraCharge;
        calcExtraCost(baseCost, stateRate);
        stateTax = extraCharge;
        calcExtraCost(baseCost, luxuryRate);
        luxuryTax = extraCharge;
        totalCost = baseCost + laborCost + stateTax + luxuryTax;
        finalAmountDue = numOrdered*totalCost;
        DecimalFormat dollar = new DecimalFormat("0.00");
        JOptionPane.showMessageDialog(null, "Jasmine Jewelry INC:  TOTAL COST  BREAKDOWN" + "\nDiamond Cost: $" +dollar.format(diamondCost) + "\nSetting Cost: $" + dollar.format(settingCost) + "\nState Tax @ 10%: $" + dollar.format(stateTax) + "\nLuxury Tax  @ 20%: $" + dollar.format(luxuryTax)+"\nLabor Charge @ 5%: $"+dollar.format(laborCost)+"\nTotal Price: $" + dollar.format(diamondCost+settingCost+stateTax+luxuryTax+laborCost) +"\n\nNumberOrdered: " + numOrdered + "\n\nAmount Due $" + dollar.format(finalAmountDue));

    }
    public static double calcExtraCost(double diamond, double rate)
    {
        double extraCharge = diamond*rate;
        double diamond = baseCost;
        double rate = laborCost;

    }
    public static double calcExtraCost(double diamond2, double rate2)
    {
        double extracharge = diamond2*rate2;
        double diamond = baseCost;
        double rate2 = stateTax;
    }
    public static double calcExtraCost(double diamond2, double rate3)
    {
        double extracharge = diamond1*rate3;
        double diamond2 = baseCost;
        double rate3 = luxuryTax;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:53:27.783

哇，好吧，你是 Java 新手。

编写一个计算一次额外成本的方法，并使用不同的参数多次调用它，您将得到不同的结果。

像这样的东西：

```
 public static double calcExtraCost(double value, double rate)
 {
    return value*rate;
 } 
```

您可以根据以下某个比率为原始值添加一个百分比：

```
baseCost = baseCost + calcExtraCost(baseCost, laborRate); 
```

我也推荐 Head First Java！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:52:34.493

您基本上是一次又一次地创建相同的方法，这是不需要的......只需创建一种方法，该方法可以在运行时获取不同的值 **伪代码：**

```
public static double calcExtraCost(double diamond, double rate)
 {
       // do something
return somedouble value computed
               } 
```

只是在调用该方法时，您需要传递不同的速率作为输入`calcExtraCost(diamond,rate1) or calcExtraCost(diamond,rate2) or calcExtraCost(diamond,rate3 )`等，JVM 足够聪明，可以调用相应的方法。另外，您的逻辑毫无意义，请阅读[http://docs.oracle.com/javase/tutorial/上的 java 基础知识](http://docs.oracle.com/javase/tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:15:54.393

我想这就是你所期望的

```
import java.text.DecimalFormat;
import java.util.Scanner;
import javax.swing.JOptionPane;

public class JewelleryStore
{

    public static void main(String[] args)
    {

        double stateRate = 0.1;
        double luxuryRate = 0.2;
        double laborRate = 0.05;
        double extraCharge;
        int numOrdered;
        double diamondCost;
        double settingCost;
        double baseCost;
        double totalCost;
        double laborCost;
        double stateTax;
        double luxuryTax;
        double finalAmountDue;

        Scanner keyInput = new Scanner(System.in);

        System.out.println("What is the cost of the diamond?");
        diamondCost = keyInput.nextDouble();
        System.out.println("What is the cost of the setting?");
        settingCost = keyInput.nextDouble();
        System.out.println("How many rings are you ordering?");
        numOrdered = keyInput.nextInt();

        baseCost = diamondCost + settingCost;
        extraCharge=calcExtraCost(baseCost, laborRate);
        laborCost = extraCharge;
        extraCharge=calcExtraCost(baseCost, stateRate);
        stateTax = extraCharge;
        extraCharge=calcExtraCost(baseCost, luxuryRate);
        luxuryTax = extraCharge;
        totalCost = baseCost + laborCost + stateTax + luxuryTax;
        finalAmountDue = numOrdered*totalCost;
        DecimalFormat dollar = new DecimalFormat("0.00");
        JOptionPane.showMessageDialog(null, "Jasmine Jewelry INC:  TOTAL COST  BREAKDOWN" + "\nDiamond Cost: $" +dollar.format(diamondCost) + "\nSetting Cost: $" + dollar.format(settingCost) + "\nState Tax @ 10%: $" + dollar.format(stateTax) + "\nLuxury Tax  @ 20%: $" + dollar.format(luxuryTax)+"\nLabor Charge @ 5%: $"+dollar.format(laborCost)+"\nTotal Price: $" + dollar.format(diamondCost+settingCost+stateTax+luxuryTax+laborCost) +"\n\nNumberOrdered: " + numOrdered + "\n\nAmount Due $" + dollar.format(finalAmountDue));

    }
    static double calcExtraCost(double diamond, double rate)
    {
        double extraCharge = diamond*rate;
        return extraCharge;

    }
} 
```

# image - FLEX - 在 FOR 循环中添加多个图像

> ID：15523941
> 
> 赞同：0
> 
> 时间：2013-03-20T12:46:00.470
> 
> 标签：image, apache-flex, load

我在这里似乎有一个问题，在 FOR 循环中加载多个图像。

这是我的代码：

我正在读取一个 XML 文件以获取我需要添加的缩略图的位置。然后我浏览整个列表（现在我浏览前 5 个元素）并将它们添加到名为“popUpImgGroup”的 TileGroup 中。

出于某种原因，我只得到了 1 个可见的拇指，但实际上添加了 5 个元素。

任何的想法？

谢谢！:)

```
private function loadPopUpThumbs():void{
            for(var i:int=1; i<=5; i++){
                var thumbImg:Image = new Image();
                var _loader:Loader = new Loader();

                _loader.contentLoaderInfo.addEventListener(Event.COMPLETE,function(e:Event):void{ 
                    thumbImg.source = e.currentTarget.content;
                });
                _loader.load(new URLRequest(encodeURI(popUpXMLList.(attribute('nr')==i.toString()).@thumbURL)));

                popUpImgGroup.addElement(thumbImg);

                thumbImg.width = 90;
                thumbImg.height = 90;
                thumbImg.scaleMode = "letterbox";
                thumbImg.verticalAlign = "bottom";
                thumbImg.smooth = true;
                thumbImg.addEventListener(MouseEvent.CLICK, function(evt:MouseEvent){ popUpThumbClicked(popUpXMLList.(attribute('nr')==i.toString()).@fullURL)});

                trace("Thumb added: " + popUpXMLList.(attribute('nr')==i.toString()).@thumbURL);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:42:12.050

找到了答案-.-

当我为解决方案而苦苦挣扎时，我讨厌它，并在此处发布问题只是为了解决问题。很抱歉打扰你们=）这是我最终做的事情：

```
 private function loadPopUpThumbs():void{
            if(curThumbImg <= totThumbImg){
                var thumbImg:Image = new Image();
                var _loader:Loader = new Loader();
                var imageNr:int = curThumbImg;

                _loader.contentLoaderInfo.addEventListener(Event.COMPLETE,function(e:Event):void{ 
                    thumbImg.source = e.currentTarget.content;

                    popUpImgGroup.addElement(thumbImg);

                    thumbImg.width = 90;
                    thumbImg.height = 90;
                    thumbImg.scaleMode = "letterbox";
                    thumbImg.verticalAlign = "bottom";
                    thumbImg.smooth = true;
                    thumbImg.id = "thumbImg" + imageNr;
                    thumbImg.addEventListener(MouseEvent.CLICK, function(evt:MouseEvent):void{ popUpThumbClicked(popUpXMLList.(attribute('nr')==imageNr.toString()).@fullURL)});

                    trace("Thumb added: " + popUpXMLList.(attribute('nr')==imageNr.toString()).@thumbURL);
                    curThumbImg++;
                    loadPopUpThumbs();
                });

                _loader.load(new URLRequest(encodeURI(popUpXMLList.(attribute('nr')==imageNr.toString()).@thumbURL)));

            }else{
                trace("DONE Adding thubs!!!");
            }
        } 
```

# hudson - 在 Hudson 中添加 .exe 作为构建步骤

> ID：15523942
> 
> 赞同：0
> 
> 时间：2013-03-20T12:46:02.263
> 
> 标签：hudson

我正忙着为一个项目配置我的`hudson`服务器。`AS3`

我需要几个步骤才能成功构建。

1.  从 perforce 获取最近的文件
2.  执行 NAnt 脚本
3.  让 hudson 使用 flashdevelop 的 builder 构建项目
4.  执行bat文件

给我问题的唯一步骤是第三步。

我不知道如何告诉 hudson 使用我的 exe 文件并将 as3 项目文件作为参数。我需要的exe是：`C:\Program Files (x86)\FlashDevelop\Tools\fdbuild\fdbuild.exe` 然后我需要将我的`.as3proj`文件作为参数。

如何将此构建步骤添加到 hudson？是否有执行exe文件的插件？谷歌并没有真正给我一个有用的答案:(

亲切的问候并原谅我的英语不好：p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:30:24.127

您可以在 Hudson/Jenkins 中执行任意 shell 或 windows 批处理命令。这个命令当然可以包括 EXE 的调用（就像你在命令行中做的一样）。这是适当构建步骤的屏幕截图：

[https://wiki.jenkins-ci.org/download/attachments/753707/shell_script.jpg](https://wiki.jenkins-ci.org/download/attachments/753707/shell_script.jpg)

但是，我建议您考虑两种（更适合 imo 的）替代方案：

1.  考虑在 ANT、NANT 或您选择的其他构建脚本中包含所有构建步骤。在有和没有 Hudson 的情况下，以完全相同的方式构建项目是一种很好的做法。只需让 Hudson 提取构建脚本的字符串并正确管理生成的工件。
2.  与其使用 FlashDevelop builder 构建，不如考虑直接使用 MXMLC 编译器。[http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_13.html](http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_13.html)。请注意，MXMLC 编译器已经有一个 ANT 任务。fdbuild.exe 只是 MXMLC 编译器的包装器。或者，更准确地说，支持增量构建的此编译器外壳 (FCSH) 的特殊版本。

# android-fragments - 以编程方式更改视图的可见性属性

> ID：15523944
> 
> 赞同：0
> 
> 时间：2013-03-20T12:46:06.107
> 
> 标签：android-fragments, visibility

我已经问过一个包含这个问题的更长的[问题](https://stackoverflow.com/questions/15521754/show-hide-fragments-and-change-the-visibility-attribute-programmatically)。试图将更大的问题分割成更小的问题。

我正在尝试像这样以编程方式更改 android:visibility = "gone"：

**XML：** 这是 MainAction.java 的布局，有 3 个片段容器。fragment_C 不应该出现，当用户使用 .replace(R.id.fragment_C, new FragmentC()) 点击按钮时，它会被填充。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:paddingLeft="0dp"
    android:paddingRight="0dp" >

    <LinearLayout
        android:id="@+id/fragments_container"
        android:layout_width="fill_parent"
        android:layout_height="200dp"
        android:baselineAligned="false" >

        <FrameLayout
            android:id="@+id/fragment_A"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.5"
            android:background="#CCCCCC" >
        </FrameLayout>

        <FrameLayout
            android:id="@id/fragment_B"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.5"
            android:background="#B4B4B4"
             >
        </FrameLayout>
    </LinearLayout>

    <FrameLayout
        android:id="@+id/fragment_C"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/fragment_container"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="0dp"
        android:background="#A3A3A3"
        android:visibility="gone" >
    </FrameLayout>

</RelativeLayout> 
```

**应该添加 FragmentC 并更改可见性属性的按钮的代码：**

```
public class FragmentB extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.fragmentB, container, false);

        ListView listView = (ListView) view.findViewById(R.id.listView1);
        Button button = (Button) view.findViewById(R.id.button);

        String[] machines = new String[] { "MachineId-001", "MachineId-002", "MachineId-003", "MachineId-004", "MachineId-005", "MachineId-006", "MachineId-007", "MachineId-008"};

        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        listView.setAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.select_dialog_multichoice, machines));
        final FrameLayout frameLayout = (FrameLayout) view.findViewById(R.id.fragment_C);

        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
               Activity activity = getActivity();

               if (activity != null) {
                   getFragmentManager().beginTransaction().replace(R.id.fragment_C, new FragmentC()).setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE).addToBackStack(null).commit();
                // When using setVisibility the app crashes with a  
                // java.lang.NullPointerException 
                   frameLayout.setVisibility(View.VISIBLE);
                }
            }

        });

        return view;
    }
} 
```

谁能告诉我为什么我会得到 NullPointerException 以及我在代码中做错了什么？

**附加数据：**

调试应用程序后，我发现我的**frameLayout**变量为**null**。为什么这个 null 我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:42:45.293

找到**问题**了！...和**解决方案**。

**错误**是在搜索要设置我正在使用的可见性属性的视图时：

```
final FrameLayout frameLayout = (FrameLayout) view.findViewById(R.id.fragment_C); 
```

如果你看代码，视图是：

```
View view = inflater.inflate(R.layout.fragmentB, container, false); 
```

当然**fragment_C**不在我的**fragment_B**布局中。所以**frameLayout**将是**null**。单击按钮时，这会导致 nullPointerException。

解决方案是在搜索您想要 .setVisibility() 的视图时使用 getActivity() 而不是视图。

```
final FrameLayout frameLayout = (FrameLayout) getActivity().findViewById(R.id.fragment_C); 
```

希望这可以帮助迷失的灵魂……就像我一样。

# vb.net - VB Objects ByRef 字典

> ID：15523950
> 
> 赞同：0
> 
> 时间：2013-03-20T12:46:27.727
> 
> 标签：vb.net, com, dictionary, byref

我想创建一个`Dim Dict As New Dictionary(Of String, Object)`将我的字符串指向特定 COM 对象类的方法，即`Dict.Add("NODES",Visum.Net.Nodes)` 我在字典中有大约 20 个键，每个键都指向 COM 对象中的不同类。

基本上它可以工作，但我担心它很重（大类的 20 个实例的字典）并且不是必需的 - 我将整个对象传递给字典，而我真的只需要一种指针（`ByRef`）。

有没有更聪明的方法呢？

PS。我为什么这样做？因为我放入字典中的所有对象都有通用方法。这样我就可以调用 ie : `Dict("Nodes").ItemByKey(13)`，然后`Dict("Links").ItemByKey(13)`，等等。

提前感谢拉法尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:56:18.997

我认为你有一个误解。您**已经在**传递和存储对您的对象的引用。这就是 VB.NET 的工作方式。（它也是 VB6 处理的对象，如果那是你的背景）。 `ByVal`具有对象类型的vs`ByRef`参数不会创建对象的副本，它只是指示您调用的方法是否可以有效地将传递的对象换成另一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:49:37.670

查看 HybridDictionary：来自 MSDN：在集合较小时使用 ListDictionary 实现 IDictionary，然后在集合变大时切换到 Hashtable。

但是，没有现成的通用版本：[HybridDictionary 有通用版本吗？](https://stackoverflow.com/questions/386823/is-there-a-generic-version-of-the-hybriddictionary)

# angularjs - ng-grid 在页面加载时不会占用 100% 的宽度，但在调整大小时显示良好

> ID：15523959
> 
> 赞同：15
> 
> 时间：2013-03-20T12:47:03.403
> 
> 标签：angularjs

带有角度 js 的 ng-grid 在页面加载时不会占用 100% 的宽度。这是我的代码：

```
 <tabs ng-cloak>
        <pane title="Test Plan">
            <tabs>
                <pane title="Include Tests">
                    <div ng-controller="includedTestPlanGridCntrl">
                        <div class="gridStyle" ng-grid="gridOptions"></div>
                    </div>
                </pane>
                <pane title="Excluded Tests">
                    <div ng-controller="excludedTestPlanGridCntrl">
                        <div class="gridStyle1" ng-grid="gridOptions"></div>
                    </div>
                </pane>
            </tabs>
        </pane>
        <pane title="Advanced Planning">
            Some text here
        </pane>
    </tabs> 
```

如果我调整大小，网格会正确显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-29T12:36:22.270

这对我有用

```
$scope.gridOptions = {
        data: 'gridData',
        init:function(grid,$scope) {
            setTimeout(function() {
                $scope.gridOptions.$gridServices.DomUtilityService.RebuildGrid(
                    $scope.gridOptions.$gridScope,
                    $scope.gridOptions.ngGrid
                );
            },1000);
        }
    }; 
```

将“gridOptions”替换为您使用的变量和宾果游戏！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-03T12:58:15.903

尝试将 ng-if 设置为仅在有要显示的数据时包含网格：（ng-hide 对我不起作用）

```
<div class="gridStyle" ng-grid="gridOptions" ng-if="myViewModel.Data.length"></div> 
```

来源： [https ://github.com/angular-ui/ng-grid/issues/855](https://github.com/angular-ui/ng-grid/issues/855)

相关问题：[当​​ ng-grid 通过 ng-hide 将可见性从不可见更改为可见时，不会重新计算网格宽度](https://stackoverflow.com/questions/19804733/when-ng-grid-change-visibility-from-invisible-to-visible-by-ng-hide-grid-width)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-17T11:40:44.900

[使用Angular UI Bootstrap](http://angular-ui.github.io/bootstrap/)中的选项卡时我遇到了同样的问题。

最简单的解决方法是在`resize`ng-grid 的父元素上触发事件，
最好是在选择包含 ng-grid 的选项卡时。

触发此事件，ng-grid 将正确调整自身大小。

使用这样的东西：

```
function onTabSelect() {
  $('.grid-container').trigger('resize');
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-10T16:22:02.783

您可以使用网格 ngGridLayoutPlugin [（在此处找到）](https://github.com/angular-ui/ng-grid/blob/master/plugins/ng-grid-layout.js)并在控制器的 init 函数中调用它。

```
 var layoutPlugin = new ngGridLayoutPlugin();

    $scope.init = function() {
        $scope.gridOptions = {
            plugins: [layoutPlugin],
        };

        window.setTimeout(function(){
            layoutPlugin.updateGridLayout();
        }, 100);

    }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-27T05:35:35.263

如果您在加载网格后有处理程序，那么您可以调用一个在调整窗口大小时实际重新渲染网格的方法。

```
gridApi.core.handleWindowResize() 
```

每当您想手动调用调整大小事件时，这可能会对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-06T10:37:22.407

这种变化在 CPU 负载方面会好得多。

2904行

[https://github.com/angular-ui/ng-grid/blob/a0d693e413e993145bff274375f1102770585e59/ng-grid-2.0.6.debug.js](https://github.com/angular-ui/ng-grid/blob/a0d693e413e993145bff274375f1102770585e59/ng-grid-2.0.6.debug.js)

由此：

```
 // we have to set this to false in case we want to autogenerate columns with no initial data.
    grid.lateBoundColumns = false;
    $scope.columns = [];
    grid.config.columnDefs = a;
    grid.buildColumns();
    grid.configureColumnWidths();
    grid.eventProvider.assignEvents();
    domUtilityService.RebuildGrid($scope, grid);
}, true); 
```

对此：

```
 // we have to set this to false in case we want to autogenerate columns with no initial data.
    grid.lateBoundColumns = false;
    $scope.columns = [];
    grid.config.columnDefs = a;
    grid.buildColumns();
    grid.configureColumnWidths();
    grid.eventProvider.assignEvents();
    setTimeout(function() {domUtilityService.RebuildGrid($scope,grid);}, 1);
}, true); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-10T05:08:38.190

就我而言，我在所有脚本之后移动了 ng-grid 库脚本，这改变了 DOM 树。换句话说：
有问题：

```
<script type="text/javascript" src="ng-grid-2.0.7.min.js"></script>
<script src="jquery.mmenu.min.all.js"></script> 
```

解决问题：

```
<script src="jquery.mmenu.min.all.js"></script>
<script type="text/javascript" src="ng-grid-2.0.7.min.js"></script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-06T16:10:50.183

希望这可以节省其他人在这仍然是一个问题的情况下花费在解决方法上的时间。对我来说，我的最后一列宽度是“*”，并且截止不是问题，因此使用包装器 div 是可行的。我也对 javascript 超时解决方案不感兴趣。

HTML：

```
<div class="gridWidthWrapper">
    <div class="gridStyle" ng-grid="gridOptions"></div>
</div> 
```

控制器：

```
$scope.gridOptions = {
    data: 'dataList',
    columnDefs: [{field: 'type', displayName: 'Type', width: 120},
      {field: 'description', displayName: 'Description', width: '*'}]
  }; 
```

CSS：

```
.gridWidthWrapper {
    width: 100%;
    overflow: hidden;
}

.gridStyle {
/* width: 100%;  --- 100% not sizing on load - using gridWidthWrapper class to obtain 100% */
  width: 2000px;
  height: 150px;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-29T13:16:35.177

你们都很复杂，这不是对源代码进行更改的最佳方法..

只需添加到 div

```
data-ng-show="myData.length" 
```

其中 myData 是 Grid 数据源，确保数据加载异步或在加载数据方法上设置 $timeout。

我知道 ngGrid 有一个名为 的方法`getPagedDataAsync`，可以从 JQuery 文档中调用它，如下所示：

```
$(function(){
   getPagedDataAsync(...)
}); 
```

如果您不分页数据，只需从 JQuery 文档中调用您的自定义数据加载方法。

希望能帮助到你 ：）

问候

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-04-23T06:48:46.437

我已经为此制定了解决方案。

只需在 ng.EventProvider 内的 ng-grid.js 中添加以下行。

```
setInterval(function() {
    domUtilityService.RebuildGrid($scope,grid);
}, 30); 
```

# javascript - 如何使用 HTML 5 输入类型范围？

> ID：15523960
> 
> 赞同：-4
> 
> 时间：2013-03-20T12:47:05.850
> 
> 标签：javascript, html

如何使用 html 中的范围输入类型更改字体的大小？

```
<input type="range" name="points" min="1" max="10"> 
```

我想要这样，当我拖动滑块时，字体大小应该根据滑块范围的值而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-31T03:36:19.693

这很容易。您可以`oninput="myFunction()"`在输入上使用属性。或`addEventListener("input",myFunction)`在您的 javascript 中添加一个。这应该使它能够活下去。

如果这不是您要查找的内容，则可以在其上使用 for 循环并使用`getElementsByTagName("*")`

这是另一个示例，您也可以使用 onchange，但我选择使用 oninput。

```
function myFunction(){
	var para = document.getElementsByTagName("p");
    var input = document.getElementById("ranger");
    for (var i = 0; i < para.length; i++){
    	para[i].style.fontSize = input.value + "px";
    }
}
```

```
p {
  font-size: 50px;
}
```

```
<div>You can also use the onchange attribute to set it when it just changes. Using oninput executes when user gives input</div>
<input type="range" id="ranger" value="50" oninput="myFunction()">
<p>First Paragraph</p>
<p>Second Paragraph</p>
<p>Third Paragraph</p>
```

这是一个小提琴，它显示了使用 onchange 属性
**[JSFiddle的示例](https://jsfiddle.net/rtv5wsjm/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:17:01.283

在滑块的更改事件中，按值相应地更改大小：

```
<input type="range" name="points" min="1" max="10" id="MySlider">

$("#MySlider").change(function() {
    $("#MyText").css("font-size", $("#MySlider").value); 
  }); 
```

# php - highcharts - 显示无数据图片，以防 mysql 查询无法呈现任何内容

> ID：15523961
> 
> 赞同：0
> 
> 时间：2013-03-20T12:47:10.987
> 
> 标签：php, mysql, highcharts

当查询没有从数据库返回任何内容时，我一直在这里和互联网上寻找关于在 highcharts 的 DIV 上显示无数据图片的解决方案。

mysql查询

```
$GetData= "SELECT COUNT( * ) AS  `items count` ,  `items` 
FROM  `items` 
where repdate = curdate()
GROUP BY  `items` 
ORDER BY  `items count` DESC  "; 
```

我的表格代码

```
<table width="313" id="datatable" style="display:none;">
 <thead>
 <tr>
            <th>column 1</th>
            <th>column 2</th>
        </tr>
        </thead>
        <tbody>
    <?php

    while ($row = mysql_fetch_array($GetData)) {
        echo "<tr>";
        echo "<th>" . $row['items'] . "</th>";
        echo "<td>" . $row['items count'] . "</td>";
        echo "</tr>";
    }
  ?>
</tbody>
</table> 
```

例子：

在mysql查询不返回任何数据的地方，我得到以下信息。

![在此处输入图像描述](../Images/bff5c72e501ccc5f86b7c7951f5dc868.png)

如果没有返回数据，如何停止渲染 highcharts？并用图片替换它

类似的例子[JSfiddle](http://jsfiddle.net/V248t/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:51:06.303

您可以检查您的选项变量以查看是否有任何数据，并仅在数据存在时才呈现图表。

```
if (options.series.length > 0) {
  var chart = new Highcharts.Chart(options);
} 
```

# javascript - 如何在 HTML5 中将 javascript 函数调用到音频标签的 src 元素中

> ID：15523963
> 
> 赞同：1
> 
> 时间：2013-03-20T12:47:12.600
> 
> 标签：javascript, html

以下是我在 JavaScript 中编写了一个函数并尝试在音频标签的 src 元素中调用它的代码。还想知道是否返回“ [http://translate.google.com/translate_tts?tl=en&q=this](http://translate.google.com/translate_tts?tl=en&q=this) is a test”+文件；

```
statement is ok to get google TTS audio file?

<html>
<body>
<script language="javascript" type="text/javascript">
function myFunction()
{
    var File = "this is a test";
    return "http://translate.google.com/translate_tts?tl=en&q=this is a test" + File;
}
</script>
<audio id="speech" src="javascript:myFunction();" controls="controls" autoplay="autoplay"></audio> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:50:34.460

这是行不通的，因为 'src' 标签的内容不会被解析为 JavaScript，它将被视为普通字符串。

您可以将脚本标签移动到音频标签下方，然后在您的“myFunction”定义下方执行此操作：

```
document.getElementById('speech').src = myFunction(); 
```

更好的方法是将 JavaScript 代码移动到单独的 .js 文件中，并在页面的“onload”处理程序中设置“src”属性，而不是将 JavaScript 源代码与 HTML 标记混合。

# entity-framework - EF4.x STE：如果 SubItem 更改，实体状态不会更改

> ID：15523964
> 
> 赞同：0
> 
> 时间：2013-03-20T12:47:15.957
> 
> 标签：entity-framework, self-tracking-entities

我使用 EF 4.x STE 在 VB.NET 2010 中创建了一个客户端-服务器应用程序。

如果我更改实体，则状态设置正确。但是如果我更改子项，那么实体状态不会更改 - 仅更改子项。

我必须如何修改 tt-Templates 以便“看到”整个实体图中的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:53:49.870

这是正确的行为。否则，如果导航属性是双向的，实体中的任何更改都会将修改标志传播到整个实体图中。状态不是让您了解是否发生了变化，而是让 EF 了解究竟发生了什么变化以生成正确的 SQL 命令。

# android - 在android的数组列表中添加项目

> ID：15523966
> 
> 赞同：8
> 
> 时间：2013-03-20T12:47:19.583
> 
> 标签：android, arraylist, element

我想将从 android 的文本视图中获取的值添加到现有的数组列表中。例如，我当前的数组列表包含值 Cricket、Football 和通过文本视图我想在最后一个位置的数组列表中添加曲棍球..然后我的数组列表变为 Cricket 、足球、曲棍球。我的板球和足球列表来自以前的活动。但是现在它只添加了板球和足球但不添加曲棍球我该怎么做？

```
 resultArrGame+=resultArrGame.add(txtGame.getText().toString()); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-05T10:20:55.253

这肯定会为你工作......

```
ArrayList<String> list = new ArrayList<String>();

list.add(textview.getText().toString());
list.add("B");
list.add("C"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:49:57.910

您正在尝试将 add 操作的结果分配给 resultArrGame，并且 add 可以返回 true 或 false，具体取决于操作是否成功。你想要的可能只是：

```
resultArrGame.add(txt.Game.getText().toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:23:36.197

您可以使用此添加字符串在按钮单击时列出

```
final String a[]={"hello","world"};
final ArrayAdapter<String> at=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,a);
final ListView sp=(ListView)findViewById(R.id.listView1);
sp.setAdapter(at);
final EditText et=(EditText)findViewById(R.id.editText1);
Button b=(Button)findViewById(R.id.button1);
b.setOnClickListener(new OnClickListener() 
        {

            @Override
            public void onClick(View v) 
            {
                // TODO Auto-generated method stub
                int k=sp.getCount();
                String a1[]=new String[k+1];
                for(int i=0;i<k;i++)
                    a1[i]=sp.getItemAtPosition(i).toString();
                a1[k]=et.getText().toString();
                ArrayAdapter<String> ats=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,a1);
                sp.setAdapter(ats);
            }
        }); 
```

所以点击一个按钮，它会从edittext获取字符串并存储在listitem中。您可以根据自己的需要进行更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-05T10:41:00.953

```
item=sp.getItemAtPosition(i).toString();
list.add(item);
adapter.notifyDataSetChanged () ; 
```

[查找 ArrayAdapter.notifyDataSetChanged()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)

# python - 如何使用python从字典中的列表中删除空条目

> ID：15523975
> 
> 赞同：1
> 
> 时间：2013-03-20T12:47:42.607
> 
> 标签：python, list, dictionary, generator

我有一本这样的字典：

```
data = {'Fruits' : ['Mango', 'Banana', '', '', 'Apple'],
        'Trees' : ['Pine', 'Bamboo', '', '', '', '', ''],
        'Laptops' : ['Sony', '', '', 'LG', 'Acer', '']} 
```

如何从字典中的每个列表中删除所有 EMPTY 项目，所以它可能看起来像这样：

```
data = {'Fruits' : ['Mango', 'Banana', 'Apple'],
        'Trees' : ['Pine', 'Bamboo'],
        'Laptops' : ['Sony', 'LG', 'Acer']} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:48:19.383

用听写理解和`filter()`：

```
data = {k: filter(bool, v) for k, v in data.iteritems()} 
```

或者，对于 python 2.6 和更早版本，您还没有 dict 理解：

```
data = dict((k, filter(bool, v)) for k, v in data.iteritems()) 
```

如果您使用的是 Python 3，则为该值的列表推导：

```
data = {k: [i for i in v if i] for k, v in data.iteritems()} 
```

快速演示：

```
>>> data = {'Fruits' : ['Mango', 'Banana', '', '', 'Apple'],
...         'Trees' : ['Pine', 'Bamboo', '', '', '', '', ''],
...         'Laptops' : ['Sony', '', '', 'LG', 'Acer', '']}
>>> {k: filter(bool, v) for k, v in data.iteritems()}
{'Laptops': ['Sony', 'LG', 'Acer'], 'Trees': ['Pine', 'Bamboo'], 'Fruits': ['Mango', 'Banana', 'Apple']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:11:09.900

您可以在 itertools 中使用 ifilter

```
from itertools import ifilter

for key,val in data.iteritems():
    data[key] = list(ifilter(lambda x: x!='', val)) 
```

# c# - Socket.Receive 什么时候返回数据？

> ID：15523976
> 
> 赞同：11
> 
> 时间：2013-03-20T12:47:43.333
> 
> 标签：c#, sockets

再次初学者问题：对我不久前提出的问题的跟进。

我试图理解这个同步套接字教程[http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx](http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx)，特别是下面代码中的一行。

**问题：** 我想确保我正确理解程序流程。**handler.Receive** (bytes) 什么时候返回？当它“溢出”并接收到超过 1024 字节时，它是否返回并存储**int bytesRec** 中接收到的字节数？**如果是这样**，这听起来可能很傻，如果更多字节到达，因为它将 1024 字节存储在 **数据** 变量中并且不监听当时可能到达的更多字节，会发生什么？还是我不应该担心，让 .net 来处理？

```
Socket handler = listener.Accept();
data = null;

// An incoming connection needs to be processed.
while (true) {
    bytes = new byte[1024];
    int bytesRec = handler.Receive(bytes);
    // My question is WHEN does the following line
    // get to be executed
    data += Encoding.ASCII.GetString(bytes,0,bytesRec);
    if (data.IndexOf("<EOF>") > -1) {
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T12:58:32.253

> handler.Receive(bytes) 什么时候返回？

文档：

> 如果没有数据可供读取，Receive 方法将阻塞直到数据可用，除非使用 Socket.ReceiveTimeout 设置了超时值。如果超过了超时值，接收调用将抛出一个 SocketException。如果您处于非阻塞模式，并且协议栈缓冲区中没有可用的数据，则 Receive 方法将立即完成并抛出 SocketException。您可以使用 Available 属性来确定数据是否可供读取。当 Available 为非零时，重试接收操作。

* * *

> 当它“溢出”并接收到超过 1024 个字节时，它是否返回并存储在 int bytesRec 中接收到的字节数？

不，它总是返回已读取的字节数。如果没有，你怎么知道哪些部分`bytes`包含有意义的数据，哪些部分仍未使用？

了解套接字通常如何工作非常重要：字节可能会以数据包的形式到达，但就接收方而言，每个**字节***都应该被独立考虑*。这意味着不能保证您将获得发送者发送的块中的字节，当然也不能保证有足够的数据来填满您的缓冲区。

如果您只想处理 1024 字节块中的传入数据，则您有责任继续调用`Receive`，直到它向您释放总共 1024 字节。

> 如果是这样，这听起来可能很愚蠢，如果更多字节到达，因为它将 1024 字节存储在变量中，而不是监听当时可能到达的更多字节，会发生什么？

让我们重申一下，`Receive`不会在缓冲区中存储 1024 个字节，因为那是缓冲区的大小。它将存储**多达**1024 个字节。

如果网络堆栈内部缓冲的数据多于缓冲区可以容纳的数据，则将返回 1024 个字节，其余的将保留在网络堆栈的缓冲区中，直到您`Receive`再次调用。如果`Receive`已经开始将数据复制到您的缓冲区，并且此时从网络接收到更多数据，那么很可能会发生这些将不得不等待下一次`Receive`调用。

毕竟，从来没有人提供任何保证`Receive`可以为您提供*所有*数据（尽管这当然是可取的，而且大多数情况下都会发生这种情况）。

# javascript - 如何将事件添加到 javascript 运行时创建的 html 小部件

> ID：15523981
> 
> 赞同：5
> 
> 时间：2013-03-20T12:47:52.490
> 
> 标签：javascript, jquery, cakephp, code-reuse

我正在用**CakePHP**开发一个 web 社区，并开始怀疑使用**jQuery**在需要时围绕视图提供有用的小部件。

例如，我编写了一个**jQuery 插件**，它在特定输入文本中搜索数据，询问我的数据库并使用事件处理结果。

基本上，该插件非常适合简单的应用程序，但对于我几乎在所有视图中使用它并且每次都使用不同的事件和方法处理它的社区来说它基本上是无用的，这使得它具有巨大的事件声明并且非常烦人调试。

**我想通过使用小部件中的默认事件**来解决问题，并添加可能为**视图****设置额外的事件**，但我该怎么做呢？

 **这是我想的情况

![在此处输入图像描述](../Images/298ff1e5b90feb860771e18096bc5113.png)

图像的绿色区域是我不确定的地方，我应该把默认事件放在哪里，每次我需要它们时都要检索它们？在知道之后，在视图中，我可以向小部件添加一些事件以更易于使用。

对于小部件，我打算通过 javascript 加载每种 html 部分并且是交互式的，可能是检索结果列表或类似内容的输入搜索。

我的问题是如何在运行时将默认事件设置为小部件，而无需每次都复制和粘贴？我的第二个问题是，如何仅为视图添加特定事件？

网上某处的一些教程也不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:46:33.567

我的回答需要backbone.js，所以我不确定这是否对你有帮助。

您可以将小部件分成包装器和真正的小部件。包装器可以处理诸如关闭事件之类的事件：

```
var WidgetWrapper = Backbone.View.extend({

  tagName:  'div',
  // This should be a mustache template:
  template: '<a class="close" href="#">close</a><div class="content"></div>',
  events: {
    '.close click':   'close',
    '.open click' :   'open'
  },
  close: {
     this.$el.hide();
  },
  open: {
     alert('I am open');
  }
  render: {
    this.$el.html(Mustache.to_html(view.template, view.model.toJSON());
  }

}); 
```

真正的小部件可以在包装小部件中呈现自己，并且两个视图都可以与数据模型（`this.model`）交互。

```
var SpecialWidget = Backbone.View.extend({

  tagName:  'div',

  // This should also be a mustache template:
  template: '<input> <a href="#" clas="open">open</a>',

  events: {
    'input change':   'edit'
  },

  render: function() {
    if(!this.wrapper) {
      this.wrapper = new WidgetWrapper();
    }

    // Hand over the model to the wrapper
    this.wrapper = this.model;
    // Render the wrapper
    this.wrapper.render();

    // Insert the widget content inside the wrapper
    this.$el.empty().append(this.wrapper.$el);
    this.$(".content").html(Mustache.to_html(view.template, view.model.toJSON());
  },

  edit: function() {
    alert("Changed");
  },
}); 
```

这将允许您分开您的事件。

您也可以反过来使用带有子视图的包装器。**

# ios - [__NSCFString count]：从 json 字符串中获取数据时，无法识别的选择器发送到实例 0x6a7a1a0

> ID：15523985
> 
> 赞同：0
> 
> 时间：2013-03-20T12:47:59.033
> 
> 标签：ios

```
- (void)viewDidLoad
{ 

    binding.logXMLInOut = YES;  // to get logging to the console.

    StationDetailsJsonSvc_getAvailableStations *request = [[StationDetailsJsonSvc_getAvailableStations new] autorelease];
    request.userName=@"twinkle"; 
    request.password=@"twinkle";  

    StationDetailsJsonSoap11BindingResponse  *resp = [binding getAvailableStationsUsingParameters:request];
    for (id mine in resp.bodyParts)
    {
        if ([mine isKindOfClass:[StationDetailsJsonSvc_getAvailableStationsResponse class]])
        {
           resultsring = [mine return_];
             NSLog(@"list string is%@",resultsring);
        }
    }

#pragma mark parsing

    SBJsonParser *parserq = [[SBJsonParser alloc] init];

    //if successful, i can have a look inside parsedJSON - its worked as an NSdictionary and NSArray

    results= [parserq objectWithString:resultsring error:nil];

   NSLog(@"print %@",results);

    for (status in results)
    { 

        NSLog(@"%@ ",[status objectForKey:@"1" ]);

       events=[status objectForKey:@"1"];
       NSLog(@"get%@",events);

       NSLog(@"events%@",events);

    }

    events=[status objectForKey:@"1"];
    NSLog(@"post%@",events);

    self.navigationController.navigationBarHidden=YES;

    [whethertableview reloadData];

    [super viewDidLoad];

} 
```

如果我运行我的应用程序崩溃获取 [NSCFString count]:unrecognized selector sent to instance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:51:13.397

你不应该依靠，`NSString`而是依靠`arrays`

你应该打电话`[yourString length]`来检查字符串是否有东西。

您正在尝试获取导致应用程序崩溃的字符串的计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:57:49.810

您可以使用此代码进行各种改进，但我认为我看到了问题：

由于您没有使用 ARC，因此您需要保留从解析器中取出的内容：

所以而不是：

```
events=[status objectForKey:@"1"] 
```

你需要做：

```
events= [[status objectForKey:@"1"] retain]; 
```

您的崩溃是由访问已释放的变量引起的。很可能是事件变量。

...并添加到这一点。events 可能是一个正在调用“count”的 NSArray。并且 [status objectForKey:@"1"] 正在返回一个字符串......我在猜测有很多可能性。如果 events 是一个 NSArray，这不是将对象添加到数组的方法。你反复调用 events=[status objectForKey:@"1"]; 也在一个循环中。

# java - 读取 XML 文件返回错误字符

> ID：15523986
> 
> 赞同：6
> 
> 时间：2013-03-20T12:47:59.173
> 
> 标签：java, xml, readfile

我有一个包含数千个标签的 XML 文件来读取它们的文本内容，如下面的屏幕截图所示：

![要读取的 XML 文件](../Images/f1168e97123ff0d67a41478dcdb7afcc.png)

我正在尝试使用以下代码读取所有“单词”标签的文本内容：

```
String filePath = "...";
File xmlFile = new File( filePath );

DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document domObject = db.parse( xmlFile );
domObject.getDocumentElement().normalize();
NodeList categoryNodes = domObject.getElementsByTagName( "category" );   // Get all the <category> nodes.

for (int s = 0; s < categoryNodes.getLength(); s++) {    //Loop on the <category> nodes.
    String categoryName = categoryNodes.item(s).getAttributes().getNamedItem( "name" ).getNodeValue(); 

    if( selectedCategoryName.equals( categoryName ) ) {  //get its words.
        NodeList wordsNodes = categoryNodes.item(s).getChildNodes();

        for( int i = 0; i < wordsNodes.getLength(); i++ ) {
            if( wordsNodes.item( i ).getNodeType() != Node.ELEMENT_NODE ) continue;
            String word = wordsNodes.item( i ).getTextContent();
            categoryWordsList.add( word );  // Some words are read wrong !!
        }

        break;
    }
} 
```

但是由于某种原因，许多单词被错误地阅读，例如：

```
"AMK6780KBU" is read as "9826</word"

"ASSI.ABR30326" is read as "rd>ASSI.AEP26"

"ASSI.25066" is read as "SI.4268</6" 
```

这可能是因为文件大小很大。如果我只是从 XML 文件中添加一些空行或删除一些空行，其他单词会比上面提到的读错，这是一件奇怪的事情！

[您可以从这里](http://pastebin.com/embed_js.php?i=7rafYLDm)下载 XML 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:24:11.480

**解决方案**

见下文 ：-）

**我在这个过程中尝试了什么**

更改 XML 版本`1.1 -> 1.0`为我解决了这个问题。我正在使用Java `1.6.0_33`（正如@orique 在评论中指出的那样）。

在我的测试中，在一定数量的节点之后肯定存在损坏问题。我把它缩小到某个地方`ASSI.MTK69609`。删除所有内容，包括该行修复了先前单词的损坏。

只需将声明更改为：

```
<?xml version="1.0"> 
```

我看到使用整个原始源 XML 的零损坏。

同样，如果您将版本保留在`1.1`但从源中删除空白节点，则结果如预期，例如：

```
 <word>ASSI.MTK68490</word>
    <word>ASSI.MTK6862617</word>
<word>ASSI.MTK693115</word>
<word>ASSI.MTK69609</word> 
```

导致所需的输出和

```
 <word>ASSI.MTK68490</word>
    <word>ASSI.MTK6862617</word>
    <word>ASSI.MTK693115</word>
    <word>ASSI.MTK69609</word> 
```

已损坏。

删除一些行尾“节点”也纠正了问题，例如

```
 <word>ASSI.MTK693115</word><word>ASSI.MTK69609</word> 
```

所以这一切都指向一个错误，但在哪里......？最终它点击了！**施尔塞斯**

Java 1.6（可能还有 1.7）附带的 Xerces 版本是旧的、旧的、旧的和有缺陷的（例如[`#6760982`](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6760982)）。事实上，我可以通过简单地添加以下内容来破坏我的测试类：

```
Document domObject = db.parse( xmlFile );
domObject.normalizeDocument(); // <-- causes following Exception

Exception in thread "main" java.lang.NullPointerException
    at com.sun.org.apache.xerces.internal.util.XML11Char.isXML11ValidNCName(XML11Char.java:340) 
```

[XML 1.1 修复了许多缺陷](https://issues.apache.org/jira/issues/?jql=status%20in%20%28Resolved,%20Closed%29%20AND%20text%20~%20%22xml%201.1%22)，因此我预感下载了最新版本`Xerces2 Java 2.11.0`。

只需使用最新版本运行即可获得预期的未损坏输出。

```
java -classpath .;xercesImpl.jar;xml-apis.jar Foo > foo.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:31:56.067

我们注意到这`getTextContent()`在某些 Windows 实现中存在错误。

我们的解决方法是做这样的事情

```
 // getTextContent is buggy on some Java Windows Implementations
            if ( n.getNodeType(  ) == Node.ELEMENT_NODE ) {

                results [ i ] = (String) xPathFunction.evaluate( "./text()", n, XPathConstants.STRING );
            } else {  //Node.TEXT_NODE

                results [ i ] = n.getNodeValue(  );
            } 
```

`xPathFunction`是一个`javax.xml.xpath.XPath`。昂贵，但工作可靠。

实际上，在您的情况下，我会直接使用 XPath 并调用类似的东西，

`NodeList l = (NodeList) xPathFunction.evaluate( "/categories/category/word/text()", domObject, XPathConstants.NODESET )`

**编辑**

打败我！在 OSX、Java 1.6.0_43 上，我得到了相同的行为。如果对 Java 中的 DOM 模型有任何疑问......错误的值似乎可靠地出现在特定的时间间隔，这看起来像是一些字节缓冲区溢出。我从来没有遇到过OOM错误。

这是我尝试失败的方法：

*   `word.getFirstChild().getNodeValue();`而不是`word.getTextContent();`-> 行为没有变化
*   使用 an`InputSource`作为输入`DocumentBuilder`而不是使用 a`File`
*   运行`XPath`("/categories/category[@name='Category1']/word/text()") 而不是遍历节点并手动遍历它们的子节点
*   使用 Saxon 作为 XPath 引擎运行相同的测试
*   检查 XML 文件中的“奇怪”字符

我相信`DocumentBuilder`是罪魁祸首。这是一个记忆猪。

您的下一个最佳机会是使用 SAX 解析器或任何其他流解析器。由于您的数据模型很小且非常简单，因此实现应该很容易。为了进一步简化实现，您可以尝试[XMLDog](https://code.google.com/p/jlibs/wiki/XMLDog)。我们使用稍加修改的版本成功解析千兆字节大小的 XML 文件。

如果您发现问题，请更新此帖子。

# iphone - 使用视频流录制时在后台执行一个进程

> ID：15523993
> 
> 赞同：0
> 
> 时间：2013-03-20T12:48:19.063
> 
> 标签：iphone, ios, objective-c, xcode, ocr

我需要在我的 iPhone 项目中做一些事情，就是在使用视频流录制视频时调用一些方法。该项目的主要思想是用实时摄像头录制文本，在录制时我应该在摄像头上方的另一个视图中显示结果。

我已经执行了可以识别文本的过程，我只需要在录制时调用它，而不是在拍照后调用它。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:50:37.750

在开始录制之前将您的进程发送到后台线程。

听起来录音占用了你的主线程，所以在录音结束之前你看不到第二个过程开始。

示例代码：

```
//do something before sending to background
[self setupUI];

//send code to background
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    // backgroung processing
    UIImage *btnImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.someurl.com"]]];

    dispatch_async( dispatch_get_main_queue(), ^{
        // background processing complete
        button.image = btnImage;
    });
}); 
```

# windows - 重命名文件夹中的所有文件

> ID：15523995
> 
> 赞同：0
> 
> 时间：2013-03-20T12:48:25.227
> 
> 标签：windows, for-loop, batch-file, cmd, directory

如何使用 Windows 批处理重命名文件夹中的所有文件？基本上，`_Done`应该删除名称开头的部分：

`some_file_name_Done_34534576456.CSV`-> `some_file_name.CSV` `some_other_file_name_Done_23232343.CSV`->`some_other_file_name.CSV`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:38:21.610

试试这个，批量解决：

```
@echo off &setlocal enabledelayedexpansion
FOR %%i in (*.*) do call:process "%%~i"
GOTO :eof

:process
set "fname=%~n1"
set "tname=%fname:*_Done=%"
if "%fname%"=="%tname%" echo %~1: nothing to do&goto :eof
set "fname=!fname:_Done%tname%=!%~x1"
if exist "%fname%" echo %fname%: already exists&goto :eof
ren "%~1" "%fname%"
goto :eof

endlocal 
```

编辑：为了澄清而改变了`!`一些`%`。这不会改变效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:18:32.347

如果您不介意使用其他语言，可以使用正则表达式重命名。这是您在 JScript 中要求的内容。将其另存为 something.js，将其放在包含 CSV 文件的目录中，然后使用`cscript /nologo something.js`.

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var folder = fso.GetFolder(".");

var files = new Enumerator(folder.Files);

while (!files.atEnd()) {
    var file = '' + files.item();
    if (/\.csv$/i.test(file)) {
        var dest = file.replace(/_Done[^\.]+/i, '');
        if (dest != file) {
            WSH.Echo('Renaming ' + file + ' -> ' + dest);
            files.item().Move(dest);
        }
    }
    files.moveNext();
} 
```

# css - 相对定位div重叠底部内容

> ID：15523996
> 
> 赞同：0
> 
> 时间：2013-03-20T12:48:35.477
> 
> 标签：css, responsive-design

我正在尝试做一个移动优先的响应式布局。所以在我的 HTML 上我有

```
First - Middle Content
Then - Left Content
Then - Right Content 
```

在所有内容的下方，我有一个单独的信息部分，从左到右全宽。

我正在使用`position:absolute`Middle,Left 和 Right`div`来定位它们。我的问题是，因为主要的 3 `div`s 是绝对定位的，所以单独的部分低于主要内容并重叠。我怎样才能解决这个问题？

我在[这里](http://jsfiddle.net/UKKcq/1/)有一个工作小提琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:34:49.940

基本浮动示例： http: [//jsfiddle.net/UKKcq/11](http://jsfiddle.net/UKKcq/11) 基本显示：inline-block 示例：http: [//jsfiddle.net/UKKcq/19/](http://jsfiddle.net/UKKcq/19/)

这里有很多事情需要考虑：

首先，您会在第二个示例中注意到，主要部分的文本从所有 3 个 div 下方开始。这是因为它们仍然是文档流的一部分，而在使用浮动时它们不是，因此文本会环绕它们。

此外，对于第二个示例，我必须删除 div 之间的所有间距/换行符，以阻止它们之间出现空格。内联块经常发生这种情况，我使用以下 jQuery 函数来修复它以避免破坏我的标记的整洁性：

```
jQuery.fn.cleanWhitespace = function() {
            textNodes = this.contents().filter(
                function() { return (this.nodeType == 3 &&    !/\S/.test(this.nodeValue)); })
                .remove();
            return this;
        }
})();

$('INSERTPARENTDIVHERE').cleanWhitespace(); 
```

此外，我必须`vertical-align:top`默认使用最短的`div`（在本例中为中心），与其他两个的底部对齐`divs`。

最后一个考虑因素是，`inline-block`当用户使用浏览器进行缩放或宽度、填充、边框或边距因任何原因发生变化时，此类布局往往会中断。您可以相对控制后一个因素，但要确保当用户缩放时事情不会下降到下一行（这看起来真的很糟糕），我建议`white-space: nowrap;`向父级申请`div`以尝试防止这种情况发生。

# php - 将简单的 WordPress 标题脚本变成 PHP 函数

> ID：15523997
> 
> 赞同：1
> 
> 时间：2013-03-20T12:48:36.770
> 
> 标签：php, wordpress, function

我有这段`PHP`代码来构建我的 WordPress`<title>`标签的内容：

```
<?php
    global $page, $paged;
    // Add a page number if necessary:
    if($paged >= 2 || $page >= 2) {
        echo sprintf(__('Page %s', 'theme-name'), max( $paged, $page ) ).' | ';
    }
    wp_title( '|', true, 'right' );
    // Add the blog name.
    bloginfo( 'name' ); 
?> 
```

例如，如果在帖子列表的第 2 页上，则返回：

> 第 2 页 | 已完成的项目 | 网站名称

**问题**

如何将`PHP`上述内容转换为`function`返回变量的 a，`$pageTitle`以便我可以在整个页面中重用此字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:56:19.027

```
 global $page, $paged;
    // Add a page number if necessary:
    $pageTitle = '';
    if($paged >= 2 || $page >= 2) {
        $pageTitle .= sprintf(__('Page %s', 'theme-name'), max( $paged, $page ) ).' | ';
    }
    $pageTitle .= wp_title( '|', false, 'right' );
    // Add the blog name.
    $pageTitle .= get_bloginfo( 'name' ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T12:56:10.973

Wordpress 是一团糟，并且有不同的方式来回显到屏幕或返回信息。

所有这些都在本[法典中](http://codex.wordpress.org/Function_Reference/)

用于标题`wp_title( '|', false )`；

用于博客信息`get_bloginfo( 'name' )`；

然后，您可以使用这些并围绕整个事物包装一个函数。