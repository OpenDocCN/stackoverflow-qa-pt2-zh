# StackOverflow 问答 12500000-12500999

# reporting-services - SSRS 报表查看器对象引用未设置为对象的实例。输入参数后

> ID：12500009
> 
> 赞同：0
> 
> 时间：2012-09-19T17:37:35.887
> 
> 标签：reporting-services, reportviewer

报告参数栏通过 reportviewer 显示在这个 asp.net 应用程序中，但是当我选择查看报告时，所有呈现的是对象引用未设置为报告应呈现的对象的实例。现在我已经到处寻找对此的解释，但我没有尝试过任何工作。我只是报表生成器，而不是拥有报表查看器的 .Net 程序的开发人员。如果您不必提供参数，则报告呈现良好。我已经尝试了几乎所有我研究过的东西，但没有任何效果。我站在原地不动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:40:35.673

机会是当提供参数时，服务器端代码尝试根据给定参数检索数据，并且该代码中的错误引发该异常。您可以查看代码隐藏以解决问题。祝你好运。

# jquery - 当单击父级并定向到新页面时，jQuery Accordian 侧边栏子菜单保持展开

> ID：12500012
> 
> 赞同：0
> 
> 时间：2012-09-19T17:37:46.697
> 
> 标签：jquery, html, css

我有一个 html css 和 jQuery 侧边栏手风琴菜单，我想以某种方式运行。我希望父链接打开网页。当转到新页面时，我希望侧边栏保持扩展。这是当前的标记：

* * *

```
Html:
<script type="text/javascript">
        var cssLink = document.createElement("link"); 
        cssLink.href = "http://www.com/css/sidebar-menu.css"; 
        cssLink.rel = "stylesheet"; 
        cssLink.type = "text/css"; 
        document.head.appendChild(cssLink);
</script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="../javascript/sidebar-menu_script.js"></script>
<script type="text/javascript" src="../javascript/jquery.easing.1.3.js"></script>
<div class="sidebar-left">
<div id="sidebarmenu">

  <ul class="container">
  <h3 class="side-headerbar" style="margin-top:25px;">Practice Area's</h3>
      <li class="menu">

          <ul>
            <li class="button"><a href="../personal-injury-attorney.php" class="red">Personal Injury Attorney</a></li>

            <li class="dropdown2">
                <ul>
                    <li><a href="../personal-injury-attorney.php">Personal Injury Attorney</a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                </ul>
            </li>

          </ul>

      </li>

      <li class="menu">

          <ul>
            <li class="button"><a href="../workers-compensation.php" class="red">Workers Compensation</a></li>              

            <li class="dropdown2">
                <ul>
                    <li><a href="../workers-compensation.php">Workers Compensation</a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                </ul>
            </li>

          </ul>

      </li>

      <li class="menu">

          <ul>
            <li class="button"><a href="../employmentharassment.php" class="red">Employment Harrassment & Termination</a></li>

            <li class="dropdown2">
                <ul>
                    <li><a href="../employmentharassment.php">Employment Harrassment & Termination</a></li>
                    <li><a href="../Overtime.php">Wage & Overtime</a></li>
                    <li><a href="#">Exemptions</a></li>
                    <li><a href="#">Job Discrimination</a></li>
                    <li><a href="#">Wrongful Termination</a></li>
                    <li><a href="#">Pregnancy Discrimination</a></li>
                    <li><a href="#">Age Discrimination</a></li>
                    <li><a href="#">Disability Discrimination</a></li>
                    <li><a href="#">Disability & Worker's Comp</a></li>
                    <li><a href="#">Racial Discrimination</a></li>
                    <li><a href="#">National Origin Discrimination</a></li>
                    <li><a href="#">Religious Discrimination</a></li>
                    <li><a href="#">Sexual Orientation Discrimination</a></li>
                    <li><a href="#">Gender or Sex Discrimination</a></li>
                    <li><a href="#">Sexual Harassment in & Outside the Workplace</a></li>
                    <li><a href="#">Whistle Blowing</a></li>
                    <li><a href="#">Glass Ceiling</a></li>
                    <li><a href="#">Lactation Accommodation</a></li>
                    <li><a href="#">Non-Competition Clauses</a></li>
                    <li><a href="#">Employee Status</a></li>
                    <li><a href="#">Breach of Contract</a></li>
                </ul>
            </li>

          </ul>

      </li>

      <li class="menu">

          <ul>
            <li class="button"><a href="../employmentwage.php" class="red">Employment Wage and Hours</a></li>

            <li class="dropdown2">
                <ul>
                    <li><a href="../employmentwage.php">Employment Wage and Hours</a></li>
                    <li><a href="../workers-compensation-lawyers.php">Wage & Overtime</a></li>
                    <li><a href="#">Exemptions</a></li>
                    <li><a href="#">Meal Breaks</a></li>
                    <li><a href="#">Vacation Pay</a></li>
                    <li><a href="#">Tip & Gratuities Pooling</a></li>
                    <li><a href="#">Commission Wages & Internal Sales Person</a></li>
                    <li><a href="#">Un-authorized Deductions</a></li>
                    <li><a href="#">Holidays Pay</a></li>
                    <li><a href="#">Independent Contractors V. Employee</a></li>
                    <li><a href="#">Minimum Wage</a></li>
                    <li><a href="#">Paydays, Pay Periods, Personnel Files & Records</a></li>
                    <li><a href="#">Reporting Time Pay</a></li>
                    <li><a href="#">Split Shift</a></li>
                    <li><a href="#">Waiting Time Penalty & Final Paycheck</a></li>
                    <li><a href="#">Alternative work schedule</a></li>
                    <li><a href="#">Cash Pay "Under the Table"</a></li>
                </ul>
            </li>

          </ul>

      </li>
            <li class="menu">

          <ul>
            <li class="button"><a href="../estateplanning.php" class="red">Estate Planning</a></li>

            <li class="dropdown2">
                <ul>
                    <li><a href="../estateplanning.php">Estate Planning</a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                </ul>
            </li>

          </ul>

      </li>
            <li class="menu">

          <ul>
            <li class="button"><a href="../assetsprotection.php" class="red">Assets Protection</a></li>

            <li class="dropdown2">
                <ul>
                    <li><a href="../assetsprotection.php">Assets Protection</a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                </ul>
            </li>

          </ul>

      </li>
            <li class="menu">

          <ul>
            <li class="button"><a href="../bankruptcy.php" class="red">Bankruptcy</a></li>

            <li class="dropdown2">
                <ul>
                    <li><a href="../bankruptcy.php">Bankruptcy</a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                </ul>
            </li>

          </ul>

      </li>
            <li class="menu">

          <ul>
            <li class="button"><a href="../inmigration.php" class="red">Immigration</a></li>

            <li class="dropdown2">
                <ul>
                    <li><a href="../inmigration.php">Immigration</a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                </ul>
            </li>

          </ul>

      </li>

  </ul>

<div class="clear"></div>

</div>
</div>
__________________________________________________________________________________________
/* CSS Document */

#sidebarmenu ul{
    margin:0;
    padding:0;
    width:200px;
}

#sidebarmenu ul.container{
    /* The topmost UL */
    width:200px;
    margin:0 auto;
    padding:0px;
}

#sidebarmenu li{
    list-style:none;
    text-align:left;
    font-size:12px;
}
#sidebarmenu ul li a:hover{
    background: none repeat scroll 0 0 #1B5188;
    color:#F2F2F2;
}

#sidebarmenu li.menu{
    /* The main list elements */
    padding:1px 0;
    width:100%;
}

#sidebarmenu li.button a{
    /* The section titles */
    display:block;
    font-family:BPreplay,Arial,Helvetica,sans-serif;
    font-size:12px;
    height:34px;
    overflow:hidden;
    padding:10px 20px 0;
    position:relative;
    width:200px;
}

#sidebarmenu li.button a:hover{
    /* Removing the inherited underline from the titles */
    background: none repeat scroll 0 0 #1B5188;
    color:#F2F2F2;
}

#sidebarmenu li.button a span{
    /* This span acts as the right part of the section's background */
    height:44px;
    position:absolute;
    right:0;
    top:0;
    width:0px;
    display:block;
}

/* Setting up different styles for each section color */

#sidebarmenu li.button a.red{  
     -moz-transition: font-weight 0.1s ease 0s, background 0.5s ease 0s, color 0.5s ease 0s, padding-left 0.3s ease 0s;
    background: none repeat scroll 0 0 #F2F2F2;
    color: #1B5188;
    display: block;
    font: bold 12px/17px Arial;
    padding: 4px 0 2px 0px;
    text-decoration: none;
    text-transform:uppercase;
    width:200px;
    text-align:center;
}
#sidebarmenu li.button a.red a:hover{
    background: none repeat scroll 0 0 #1B5188;
    color:#F2F2F2;
    width:200px;
}
#sidebarmenu li.button a.red span{background-color: #F2F2F2;}

/* The hover effects */

#sidebarmenu li.button a:hover{
    background: none repeat scroll 0 0 #1B5188;
    color:#F2F2F2;
    width: 200px;
}
#sidebarmenu li.button a:hover span{ 
    background-position:bottom right;
    background: none repeat scroll 0 0 #1B5188;
    color:#F2F2F2;}

#sidebarmenu .dropdown2{
    /* The expandable lists */
    display:none;
    padding-top:5px;
    width:100%;
}

#sidebarmenu .dropdown2 li{
    /* Each element in the expandable list */
    background-color:#1B5188;
    border:1px solid #1B5188;
    color:#CCCCCC;
    margin:5px 0;
    padding:5px 17px;
}

/* The styles below are only necessary for the demo page */

#sidebarmenu h1{
    font-family:"Myriad Pro",Arial,Helvetica,sans-serif;
    font-size:36px;
    font-weight:normal;
    margin-bottom:15px;
}

#sidebarmenu h2{
    font-family:"Myriad Pro",Arial,Helvetica,sans-serif;
    font-size:12px;
    font-weight:normal;
    padding-right:140px;
    right:0;
    text-align:right;
    text-transform:uppercase;
    top:15px;
}

.clear{
    clear:both;
}

#sidebarmenu #main{
    /* The main container */
    margin:15px auto;
    text-align:center;
    width:920px;
    position:relative;
}

#sidebarmenu a, a:visited {
    color:#f2f2f2;
    text-decoration:none;
    outline:none;
    font-size:12px;
}

#sidebarmenu a:hover{
    text-decoration:underline;
}

p{
    /* The tut info on the bottom of the page */
    padding:10px;
    text-align:center;
}
/* PERSONAL STYLES */
#sidebarmenu .sidebarmenu .side-headerbar {
    background: none repeat scroll 0 0 #9D0F13;
    color: #FBFBFB;
    font: bold 13px Verdana;
    margin-bottom: 0;
    margin-top: 0;
    padding: 7px 0;
    text-align: center;
    text-transform: uppercase;
}
.sidebarmenu {
    float: left;
    width: 200px;
}
#sidebarmenu .side-headerbar {
    background: none repeat scroll 0 0 #9D0F13;
    color: #FBFBFB;
    font: bold 13px Verdana;
    margin-bottom: 0;
    margin-top: 0;
    padding: 7px 0;
    text-align: center;
    text-transform: uppercase;
    width:200px;
}
#sidebar-left {
    width:208px;
}
#sidebarmenu {
    float: left;
    width: 200px;
}
__________________________________________________________________________________________
jQuery Script:

$(document).ready(function(){
    /* This code is executed after the DOM has been completely loaded */

    /* Changing thedefault easing effect - will affect the slideUp/slideDown methods: */
    $.easing.def = "easeOutBounce";

    /* Binding a click event handler to the links: */
    $('#sidebarmenu li.button a').click(function(e){

        /* Finding the drop down list that corresponds to the current section: */
        var dropDown = $(this).parent().next();

        /* Closing all other drop down sections, except the current one */
        $('.dropdown2').not(dropDown).slideUp('slow');
        dropDown.slideToggle('slow');

        /* Preventing the default event (which would be to navigate the browser to the link's address) */
        /* e.preventDefault(); */t
    })

}); 
```

# http - urllib3 - 无法设置 http 代理

> ID：12500014
> 
> 赞同：1
> 
> 时间：2012-09-19T17:38:02.503
> 
> 标签：http, proxy, urllib3

我正在尝试维护与代理的连接池。我的代码如下所示：

```
>>> from urllib3 import PoolManager
>>> pool = PoolManager(10)
>>> pool.urlopen('GET', 'http://http-server/index.html',fields=None,headers=None,encode_multipart=False,multipart_boundary=None,proxies={'http': 'http://proxy'}) 
```

当我运行它时，它失败了：

```
> 
> Traceback (most recent call last):
>   File "<stdin>", line 1, in   <module>
>   File "urllib3/poolmanager.py", line 117, in urlopen
>     response = conn.urlopen(method, u.request_uri, **kw)
> File "urllib3/connectionpool.py", line 427, in urlopen
>     **response_kw)   
> File "urllib3/response.py", line 195, in from_httplib
>     **response_kw) 
> TypeError: __init__() got an unexpected keyword argument 'proxies' 
```

知道我做错了什么吗？根据 urllib3 文档，关键字 args 被发送到 urlopen，但在这种情况下似乎没有发生。

这是[urllib](http://docs.python.org/library/urllib.html#utility-functions)的链接，描述了代理关键字 arg 的用法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:55:58.817

您链接到的文档是 Python 的 urllib，它是与 urllib3 不同的库。当您调用 urllib3 的 urlopen 时，它与 urllib 的 urlopen 不同。对困惑感到抱歉。:)

目前，使用带有 urllib3 的代理还没有很好的文档记录。如果您想探索 urllib3 代码，请查看`urllib3.poolmanager.ProxyManager.`

否则，我建议尝试在 urllib3 之上简化代理功能的请求。请参阅：[http ://docs.python-requests.org/en/latest/user/advanced/?highlight=proxy#proxies](http://docs.python-requests.org/en/latest/user/advanced/?highlight=proxy#proxies)

你的代码看起来像这样。

```
>>> import requests
>>> requests.get('http://http-server/index.html', proxies={'http': 'http://proxy'}) 
```

如果您仍然喜欢使用 urllib3，那么使用 urllib3`ProxyManager`将如下所示：

```
>>> import urllib3
>>> http = urllib3.proxy_from_url('http://myproxy.com/')  # This returns a ProxyManager object which has the same API as other ConnectionPool objects.
>>> r = http.request('GET', 'http://http-server/index.html') 
```

您也可以直接创建自己的 ProxyManager 对象，但我更喜欢使用`proxy_from_url`快捷方式。

# web - 使用 MediaWiki API 下载图像？

> ID：12500021
> 
> 赞同：7
> 
> 时间：2012-09-19T17:38:21.867
> 
> 标签：web, mediawiki, wikipedia, wikipedia-api, mediawiki-api

是否可以使用 MediaWiki API 从维基百科下载图像？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T17:52:46.057

不，无法通过 API 获取图像。MediaWiki 中的图像仅存储在文件夹中，而不是在数据库中，并且不是动态传递的（有关详细信息，请参阅[手册：图像管理](http://www.mediawiki.org/wiki/Manual:Image_administration)）。

但是，您可以通过 API 检索这些图像文件的 URL。例如查看[API:Allimages 列表](http://www.mediawiki.org/wiki/API:Allimages)或[imageinfo 属性](http://www.mediawiki.org/wiki/API:Properties#imageinfo_.2F_ii)查询模块。然后，您可以使用您喜欢的工具（、、等等）从这些 URL 下载`curl`文件`wget`。

如果您的问题是关于从 Wikipedia 下载所有图像，[meta:data 转储](http://meta.wikimedia.org/wiki/Data_dumps#Downloading_Images)将是一个好的开始。您还可以在数据转储邮件列表中询问如何与 Wikimedia Commons 等存储库同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-07T21:20:18.733

如果您知道文件名，则无需 API。这有效：

```
# Curl download, -L: follow redirect, -C -: resume downloads, -O: keep filename
curl -L -C - -O http://commons.wikimedia.org/wiki/Special:FilePath/Example.jpg # Example.jpg 
```

# sql-server - 嵌套如果在存储过程中导致语法错误

> ID：12500032
> 
> 赞同：0
> 
> 时间：2012-09-19T17:38:51.923
> 
> 标签：sql-server, sql-server-2005, stored-procedures

我正在创建一个存储过程，它查询表“条目”。proc 有参数@ID，它是一个int，和@APPROVED，它是一个位。我正在使用 SQL Server 2005

如果批准是假的，我想做一些与它是真的不同的事情。我写了以下内容。当我尝试创建它时，我得到“关键字'END'附近的语法不正确。”。

如果我删除嵌套如果错误消失但是从我读过的内容来看这是完全有效的语法。谁能告诉我哪里出错了？

```
CREATE Procedure [dbo].[GetEntry](@ID int,@APPROVED bit)
AS
IF @APPROVED = 0
BEGIN 
    --see if the unapproved entry has already been viewed 
    IF (SELECT COUNT(*) 
    FROM [dbo].[Entries]
    WHERE EntryId = @ID AND Approved = @APPROVED AND Viewed = 0) > 0
    BEGIN

    END

END 
```

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:43:29.863

您需要在内部做一些事情，与手动获取计数（必须扫描整个聚集索引）相比，`BEGIN/END`更有效的检查是。`EXISTS`你真的不在乎结果是 2 还是 5 还是 27,654，对吧？

```
IF EXISTS (SELECT 1 FROM dbo.Entries WHERE ...)
BEGIN
    PRINT 'It exists!';
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:43:46.033

您必须在 中做一些事情`BEGIN/END`，它不能为空：

```
CREATE Procedure [dbo].[GetEntry](@ID int,@APPROVED bit)
AS
IF @APPROVED = 0
BEGIN 
    --see if the unapproved entry has already been viewed 
    IF (SELECT COUNT(*) 
            FROM [dbo].[Entries]
            WHERE EntryId = @ID AND Approved = @APPROVED AND Viewed = 0) > 0
    BEGIN
        -- do something here
        select *
        from [dbo].[Entries]
    END

END 
```

# java - 带有子瞬态 getter 和 setter 的 Hibernate 加入子类

> ID：12500035
> 
> 赞同：1
> 
> 时间：2012-09-19T17:38:59.240
> 
> 标签：java, hibernate, jpa-2.0, joined-subclass

我正在尝试在现有结构中添加休眠继承。所以，我需要添加应该概括 3 个实体的父类。问题是现在我需要从子级获取 HQL 中的继承字段。像这样的东西：

```
@Table(name="parents")
@Entity
@Inheritance(strategy=InheritanceType.JOINED)
public class Parent{
@Id
Long id;

 //additional code with protected getter and setter for id
}

@Table(name="childs")
@Entity
@PrimaryKeyJoinColumn(name="id")
public class Child extends Parent{

@Transient
public void setChildId(Long id){
super.setId(id);
}

@Transient
public Long getChildId(){
return super.getId();
} 
```

当我尝试执行 HQL 时，最后使用此代码

```
select c from Child c 
```

我有一个 SQL 错误，上面写着“未知列 childs.id”

怎么了？

# c++ - 所有可能的毕达哥拉斯三元组

> ID：12500037
> 
> 赞同：1
> 
> 时间：2012-09-19T17:39:09.650
> 
> 标签：c++, math, for-loop

这是问题

找到所有不超过 500 的边 1、边 2 和斜边的毕达哥拉斯三元组。使用三元组嵌套的 for 循环来尝试可能性。

以下是我的尝试

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
    int side1 = 0;
    int side2 = 0;
    int rightSide = 0;

    cout << "Right Side" << setw(10) << "Side1" << setw(10) << "Side2" << endl;

    for(int i=1;i<=500;i++)
    {
        side1++;
        //cout << side1 << endl;

        for(int a=1;a<=500;a++)
        {
            side2++;
            //cout << "side 2 " << side2 << endl;

            for(int c=1;c<=500;c++)
            {
                rightSide++;
                int rightSideSqr = rightSide*rightSide;
                int side1Sqr = side1*side1;
                int side2Sqr = side2*side2;

                if(rightSideSqr == side1Sqr+side2Sqr)
                {
                    cout << rightSideSqr << setw(15) << side1 << setw(10) << side2 << endl;
                 }

            }
        }
    }
} 
```

但它没有成功，似乎是一个无限循环。请帮忙。

请注意：我是 C++ 新手，我是自学的。而且，这不是作业，我做了问题陈述，因为这是表达问题的最佳方式。

**编辑**

右侧 Side1 Side2

运行成功（总时间：1s）

**编辑 2**

工作代码

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
    //int side1 = 0;
    //int side2 = 0;
    //int rightSide = 0;

    cout << "Right Side" << setw(10) << "Side1" << setw(10) << "Side2" << endl;

    for(int i=1;i<=500;i++)
    {
        //side1++;
        //cout << side1 << endl;

        for(int a=1;a<=500;a++)
        {
            //side2++;
            //cout << "side 2 " << side2 << endl;

            for(int c=1;c<=500;c++)
            {
                //rightSide++;
                int rightSideSqr = c*c;
                int side1Sqr = i*i;
                int side2Sqr = a*a;

                if(rightSideSqr == (side1Sqr+side2Sqr))
                {
                    cout << rightSideSqr << setw(15) << i << setw(10) << a << endl;
                 }

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:45:56.800

这不是一个无限循环，它只是一个非常慢的有限循环。I/O 很慢——您在`cout`中间循环的语句中打印出 500*500 = 250,000 行文本，而将 250,000 行文本打印到控制台非常非常慢。如果您删除该打印语句，它将执行得更快。

其次，你的逻辑有错误。变量`side1`,`side2`和`rightSide`永远不会在适当的时候重置为 0，因此它们只会不断增加超出其预期值。尝试将它们重置为 0，或者只使用循环计数器而不是这样的额外变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:01:44.127

除了@Adam Rosenfield 指出的问题。如果限制提高一点，程序将无法通过 3 个这样的循环快速完成。

第一个观察是您不需要第三个内循环，因为可以计算和比较斜边。计算两条边的斜边，取整数，检查毕达哥拉斯等式是否仍然成立。

你可以做更多的观察：2 边是可以互换的，所以我们只需要循环到 sqrt(500 ² /2) （过去只会颠倒边）。对于直角三角形另一边的第二个内循环，由于我们知道上限，我们可以通过循环到 sqrt(500 ² - side1 ² ) 来减少循环数。

伪代码，**而不是 C 代码**（`^`在 C 代码中是 XOR，但我`^`在下面的伪代码中使用来表示幂）。`round()`将四舍五入到最接近的整数（您可能需要实现这一点）。两个循环的上限可以在进入循环之前被缓存，因为它们的值在循环期间不会改变：

```
for (side1 = 1; side1 <= round(sqrt(500^2 / 2)); side1++) {
    for (side2 = side1; side2 <= round(sqrt(500^2 - i^2)); side2++) {
        hypo = round(sqrt(side1^2 + side2^2))

        if (hypo^2 == side1^2 + side2^2) {
           printResult
        }
    }
} 
```

# google-chrome - 如何在 Chrome 开发控制台中调试脚本？

> ID：12500039
> 
> 赞同：0
> 
> 时间：2012-09-19T17:39:15.820
> 
> 标签：google-chrome, google-chrome-devtools

我以前只是打开“脚本”选项卡，但它已经消失了。我知道只有一个 Sources 选项卡，我无法在任何地方找到我的页面自己的脚本。如何打开页面本地脚本的脚本调试窗口，即不在 .js 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:53:54.117

Scripts 选项卡已重命名为 Sources。如果您没有看到源文件，请单击左上角带有三角形的小矩形，将打开一个侧边栏，其中包含两个选项卡“源”和“内容脚本”。您可以通过单击“内容脚本”右侧的矩形来使此侧边栏永久化。

# c++ - 在 Borland C++ Builder 中实现合约

> ID：12500040
> 
> 赞同：0
> 
> 时间：2012-09-19T17:39:23.767
> 
> 标签：c++, c++builder, contract

我正在尝试在 Borland C++ Builder 中实现一个合同类，但得到一个我不理解的编译错误。代码如下所示：

```
class baseClass2 {
  public:
    virtual void test () = 0;
};

class derivedClass: public baseClass2 {
  derivedClass () {test ();};
};

void baseClass2::test () {

}; 
```

蚂蚁它编译，但我相信

```
无效 baseClass2::test ()
```

应该在派生类中。如果我把它放在这里，我会得到

> [C++ 错误] multiple_inheritance.cpp(33): E2316 'derivedClass::test()' is not a member of 'derivedClass'

为什么我会得到这个？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:48:20.027

the base class implementation of `test()` is pure-virtual. It's legal to provide an implementation in your base class, but you must still provide another one in your derived class as well (assuming that you want *derivedClass* to be a concrete class).

```
class baseClass2 {
public:
    virtual void test () = 0;
};

class derivedClass: public baseClass2  {
public:
    derivedClass() { test(); }
    void test();
};

void baseClass2::test () {
}

void derivedClass::test () {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:44:32.443

> 无效 baseClass2::test ()

这是不正确的，因为您已经`test()`在`baseClass2`.

> 应该在派生类中

在你这样做之前，你应该在`derivedClass`定义中声明它，如下所示：

```
class derivedClass: public baseClass2 {
public:
    derivedClass () {test ();};
    virtual void test();
};

void derivedClass:test() {

} 
```

然后你可以调用`test()`你的派生类构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:44:57.890

这是相当微妙的。如果您的派生*构造函数*应该调用在您的祖先类之一中声明为虚拟的函数（无论是直接还是通过另一个成员函数（因此很难发现）），那么您将*在基类中*调用实现。*即使*您覆盖了虚函数，也会发生这种情况。

这意味着在您的情况下`derivedClass::derivedClass()`将因此调用纯 virtial `baseClass2::test()`。哎呀！

是的，这就是 C++ 的工作原理。*当您在构造*函数中时，派生的 vtable 指针指向基类 vtable 。它仅在您离开构造函数时更新。

# date - 日期的核心数据 NSPredicate

> ID：12500041
> 
> 赞同：7
> 
> 时间：2012-09-19T17:39:31.740
> 
> 标签：date, core-data, nspredicate

在我的模型中，我有日期属性并设置了它`[NSDate date]`，但是使用谓词

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:
                              @"date==%@ ,date]; 
```

返回注意。我知道问题是当我设置 `[NSDate date]`它时也存储时间并且 NSPredicate 总是返回空数据。有没有办法将`"date==%@"`部分转换为只查找日期？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T17:43:25.100

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date <= %@)", startDate, endDate]; 
```

# sql - SQL 查询 - 分组并计算最大值 - 最小值

> ID：12500047
> 
> 赞同：1
> 
> 时间：2012-09-19T17:40:04.317
> 
> 标签：sql, oracle

在 Oracle db 中的 SQL 查询需要您的帮助。当事件 =“开始”时，我有想要分组的数据。例如，第 1-6 行是一个组，第 7-9 行是一个组。我想忽略事件 =“忽略”的行。最后我想计算这些组的 max(Value)-min(Value)。我没有办法对数据进行分组。

这可以实现吗？是否可以通过 Event = start 使用分区。相同的数据如下：

```
行事件值要求结果是值的最大值-最小值
1 开始 10          
2个11          
3乙12          
4 C 13          
5 天 14          
6 E 15 5
------------------------------------------
7 开始 16          
8个18          
9 乙 20 4
------------------------------------------
10 开始 27          
11 一个 30          
12乙33          
13 C 34 7
------------------------------------------
14 忽略 35          
------------------------------------------
15 忽略 36          
------------------------------------------
16 开始 33          
17一34          
18 乙 35          
19 C 36          
20 天 37          
21 东 38 5
------------------------------------------
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:44:22.907

是的，您可以在 SQL 中执行此操作。

以下查询首先通过查找行 id 之前的最大开始来查找行所在的组。此版本使用相关子查询进行此计算。

然后它对 id 进行分组并进行计算。

```
select groupid, max(value) - min(value)
from (select t.*,
             (select max(row) from t t2 where t2.row < t.row and t2.event = start
             ) as groupid
      from t
     ) t
where event <> 'IGNORE' 
```

# php - PHP 5.3.17 中的 echo() 产生奇怪的结果

> ID：12500050
> 
> 赞同：-2
> 
> 时间：2012-09-19T17:40:19.737
> 
> 标签：php, linux

我将服务器上的 PHP 更新为 5.3.17，这是最新的稳定版本。

出于某种原因，此 echo 语句产生了意想不到的结果：

```
<?  
echo ('<p style="color:#808080;">Hello, <em>'.$_SESSION["user"].'</em>');
?> 
```

结果：

```
Hello, '.$_SESSION["user"].'; 
```

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:41:58.897

[你可能没有`short_open_tags`启用。](http://php.net/manual/en/ini.core.php#ini.short-open-tag)请改用完整的打开标记 ( `<?php`)，或在 中打开它`php.ini`。

# php - PHP 从表单提交中挑选内容以填充数据库

> ID：12500053
> 
> 赞同：1
> 
> 时间：2012-09-19T17:40:34.000
> 
> 标签：php

我对 PHP*非常*陌生，需要一些关于我正在从事的项目的良好起点的建议。

我有一个网站和一个时事通讯，两者都由新闻文章摘要组成（该网站类似于旧版本的 Digg，但没有用户提交）。Word 文档的格式为：

类别

文章标题

新闻文章摘要

网站文章的链接可在以下位置找到

一旦 word 文档填充了所有文章摘要，我希望能够从文档中复制所有文本，将其粘贴到 html 表单中的单个 textarea 字段中，并让 PHP 以某种方式挑选出单独的故事摘要并将它们存储在数据库中，以便以后可以将它们拉到网站上。

我能想到的唯一方法是在 word 文档中添加描述性标签，例如：

```
<begin_category>Category<end_category>

<begin_title>Article Title<end_title> 
```

依此类推，然后让 php 识别这些标签（preg_match？）并从中提取信息。那么我的问题是，进行编程的最佳方法是什么？有什么我应该研究的概念吗？我如何告诉 PHP 寻找这些标签并将所有内容都放在它们之间？这是一个可怕的方法吗？我是否最好只使用一个包含所有项目（类别、标题、摘要、链接）的不同字段的表单并逐个提交每个摘要？

我希望能够发布整个文档并填充它的唯一原因是节省时间。无论通讯如何，都必须编写word文档。

任何方向将不胜感激；我应该在谷歌上搜索的东西，我应该阅读的文章等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:14:43.727

我要考虑的第一件事是，如果编码错误，粘贴的单词可能会非常混乱，所以如果您有任何问题，请确保您的 html 表单和 php 文件（可能相同）以及数据库存储有一个匹配编码。

例如，将 php 源代码保存为 utf8，确保使用适当的 unicode 方案进行数据存储，并在 HTML 中包含以下标头：

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/> 
```

如果您始终控制输入，则不是这样的问题。您通常可以通过粘贴到记事本中，然后从记事本到您的表单来清除单词混乱。更好的是使用记事本，所以使用普通的 asci txt。但是如果你得到了全面匹配的编码，你应该很高兴。

您可以按照您的建议使用标签，并使用以下方法解析内容：

```
 /**
* parses $string for blocks of content appearing between $starttag and $endtag
* Will parse all matching blocks and return as array.
* 
* @return Array The blocks of content parsed from $string
* 
* @param string $string   This is the content to be parsed, for example this could be the HTML from the buffer
* @param string $starttag This is the start tag, the beginning of a returnable content block i.e <!--customtag  or <img
* @param string $endtag The end of block of content.
*/
function ParseBlocks($string, $starttag, $endtag)
{
    $pattern = "/".preg_quote($starttag).'(.*?)'.preg_quote($endtag)."/"; 
    if(preg_match_all($pattern, $string, $matches, PREG_PATTERN_ORDER) === false)
        $this->WriteError(preg_last_error());
    return $matches[1];
} 
```

您可以通过以下方式使用这样的函数，但它假定输入是偶数，并且每个条目将具有所有必需的部分，正如您所期望的输出 4 个数组，每个数组具有相同的长度：

```
$categories = ParseBlocks($postedContent,"<!category>","</category");
$titles = ParseBlocks($postedContent,"<!title>","</title");
$summaries = ParseBlocks($postedContent,"<!summary>","</summary");
$links = ParseBlocks($postedContent,"<!link>","</link"); 
```

然后，您将能够访问要推送到数据库的内容：

```
$itemCount = count($categories);
for($i =0; $i < $itemCount; $i++)
{//some db insert function -  this is made up, but should give the idea.
  db_execute('insert into t_table values (?,?,?,?)'
      ,array($categories[$i], $titles[$i], $summaries[$i], $links[$i]);
} 
```

作为所有这些的替代方案，您可以考虑发布实际文件（删除复制和粘贴）并解析该服务器端。或者是否可以从您的网站上抓取数据？

# ios - iOS 用户无法使用 SSO 访问 Web 应用

> ID：12500061
> 
> 赞同：1
> 
> 时间：2012-09-19T17:40:51.827
> 
> 标签：ios, facebook, html, single-sign-on

Facebook 似乎或多或少需要 iOS 应用的单点登录。缺点似乎是没有 iOS 用户可以随后访问 Web 应用程序。（它们会自动重定向到 iTunes 商店。）

这意味着，一旦您开发了原生 iPhone 应用程序，任何 iPad 用户都无法在 Web 上获得完美可用的体验，而只能使用 iPhone 版本。Facebook 本身不会仅仅因为您在 iOS Safari 中导航到 Facebook 就违背用户意愿重定向到 iPhone 版本，那么为什么要强迫开发人员和用户这样做呢？

当然，我们的开发团队可能忽略了一些解决方法，但目前，一个具有多个客户端（本地、Web）的单个 Facebook 应用程序似乎不可能真正为用户提供他们使用的客户端类型的选择。还有人知道吗？

# gis - 选择多边形的所有交叉点时出现 Postgis 错误

> ID：12500064
> 
> 赞同：0
> 
> 时间：2012-09-19T17:41:05.837
> 
> 标签：gis, polygon, postgis, intersection

我可以得到所有多边形相交：-7.9245860488441 -37.122384500713,-7.9245860488441 -37.11904223938,-7.9233955716106 -37.1187601948

```
SELECT * 
FROM propriedades 
WHERE ST_Intersects(
    ST_GeomFromText(location::geometry),
    ST_GeomFromText('POLYGON(-7.9245860488441 -37.122384500713,-7.9245860488441 -37.11904223938,-7.9233955716106 -37.1187601948)')); 
```

propriedades 是我的桌子位置是一个列保存地理多边形

返回的错误

> 错误：解析错误 - 无效几何提示：“POLYGON(-7.9245860488441” <-- 在几何中的位置 25 处解析错误
> 
> ***********错误******* **********
> 
>  *****错误：解析错误 - 无效几何 SQL 状态：XX000 提示：“POLYGON(-7.9245860488441” <-- 解析错误在几何内的位置 25*****

 *****解决了，我使用了地理，没有几何：

```
SELECT * 
FROM propriedades 
WHERE ST_Intersects(
    location,
    'POLYGON((-7.9239281216632 -37.118491021708,-7.9239281216632 -37.116096663161,-7.9240937813677 -37.116105295265,-7.9241591799314 -37.116171875421,-7.9246636046819 -37.116271405188,-7.9259677455811 -37.118572530098,-7.9256079206171 -37.118728486796,-7.9243335012771 -37.118675962065,-7.9243194973485 -37.11849254918,-7.9242705964918 -37.118491021708,-7.9239281216632 -37.118491021708))'
) 
```

但我还有其他问题，我想要相交 > 50 米

像这样[http://slimber.com/gallery/pictures2/23/235563/polygons.jpg](http://slimber.com/gallery/pictures2/23/235563/polygons.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:17:17.957

多边形的WKT有两个问题，这就是它无法解析的原因。多边形需要两个圆括号的深度，最后一个坐标需要和第一个坐标匹配才能形成一个闭合的线性环（即[三角形需要四个点](https://gis.stackexchange.com/questions/10308/why-do-valid-polygons-repeat-the-same-start-and-end-point)）。WKT 应如下所示：

```
POLYGON((-7.9245860488441 -37.122384500713, -7.9245860488441 -37.11904223938,
         -7.9233955716106 -37.1187601948, -7.9245860488441 -37.122384500713)) 
```

也`ST_GeomFromText(location::geometry)`确实没有必要，因为`::geometry`PostgreSQL 已经是`geometry`. 如果它是一种`geography`类型，那么`location::geometry`将其转换为`geometry`.*****

# amazon-s3 - 需要在 S3 项上设置多个预设 ACL

> ID：12500067
> 
> 赞同：2
> 
> 时间：2012-09-19T17:41:17.553
> 
> 标签：amazon-s3, acl

我们有一项服务，我们的客户允许我们访问他们的 S3 存储桶，我们将项目推送到这些 S3 存储桶中。我们需要能够做两件事：

1.  将项目的权限设置为可公开阅读
2.  将存储桶的所有者设置为对该项目具有完全权限

这是我已经知道的：

我不能有 2 个带有 PUT 的罐装 ACL

问题：

我“可以”设置 ACL 标头，但 AFAIK 在不知道所有者信息（如 cannonical_id 或电子邮件）的情况下无法通过标头设置“所有者拥有完整权限”，对吗？是否有像“public-read”一样的“owner-has-full-permissions”的“uri”版本（例如“http://acs.amazonaws.com/groups/global/AllUsers”）？

我不想进行 2 个单独的调用（一个用于获取存储桶所有者信息），另一个用于放置具有两种权限的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T18:04:35.653

我有同样的问题，下面的代码可以获得你需要的权限。

```
AccessControlList accessControlList = new AccessControlList();
accessControlList.grantPermission(GroupGrantee.AllUsers, Permission.Read);
accessControlList.grantPermission(new CanonicalGrantee(s3Client.getS3AccountOwner()
    .getId()), Permission.FullControl);
putReq.setAccessControlList(accessControlList); 
```

# c++ - ctypes如何将字符串从python传递给c++函数，以及如何将字符串从c++函数返回给python

> ID：12500069
> 
> 赞同：6
> 
> 时间：2012-09-19T17:41:24.857
> 
> 标签：c++, python, string, ctypes

我想从 python 调用一个 c++ 函数，这个 c++ 函数以 char* 作为参数，并返回字符串。下面是我的代码。

包装器.cpp

```
#include <Python.h>
#include <string>
#include <iostream>

using namespace std;

extern "C"
string return_string(char* name){
    cout<<strlen(name)<<endl;
    cout<<name<<endl;
    string s = "hello ";
    s += name;
    return s;
} 
```

将 wrapper.cpp 编译为 example.so

```
g++ -fPIC wrapper.cpp -o example.so -shared -I/usr/include/python2.7/ 
```

包装器.py

```
import os
from ctypes import *

lib = cdll.LoadLibrary('./example.so')
lib.return_string.restype = c_char_p
lib.return_string.argtypes = [c_char_p]
name = create_string_buffer("Tom")
s = lib.return_string(name);
print s
print name 
```

这是我的输出

```
18
��H�L�l���A���
1
<ctypes.c_char_Array_4 object at 0x7f5f480be710> 
```

如何使它起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T18:00:13.193

这与 ctypes 无关；您的 C++ 代码本身无效。您不能定义`extern "C"`返回`string`.

在使用相同库的 C++ 程序的快速测试中，它也会打印垃圾。

我还编写了一个 C 程序，它定义了一些`string`具有相同布局的调用，`std::string`以便我可以编译它并查看会发生什么；它还打印垃圾，然后在`~string`.

因此，Python 程序也会打印垃圾也就不足为奇了。

稍作改动，一切正常：

```
extern "C"
const char *return_string(char* name){
    cout<<strlen(name)<<endl;
    cout<<name<<endl;
    static string s = "hello ";
    s += name;
    return s.c_str();
} 
```

我得到这个输出：

```
3
Tom
hello Tom
<ctypes.c_char_Array_4 object at 0x11011c7a0> 
```

（或者，在 C++ 版本中，同样的内容，但在最后一行带有“Tom”。）

当然，出于显而易见的原因，这不是一个很好的解决方案，但它表明返回`string`是问题所在。

当我尝试编译您的 C++ 代码时，g++-4.5 和 clang-apple-4.0 都警告过我这个问题（尽管 g++-apple-4.2 没有，除非我添加了一个额外的 -W 标志）。当编译器向您发出警告时，这通常是“为什么我的代码即使编译也会做错事”的答案。

您的代码还有其他一些问题：

*   您不会在 .cpp 文件中使用 Python 中的任何内容。总的来说，使用的全部意义`ctypes`在于让你的 C 或 C++ 代码不必了解任何关于 Python 的知识。是你的 Python 代码知道它。所以，不要包含或链接。
*   `char*`如果您不打算修改它，那么采用非常量通常是一个坏主意。`const_cast<char*>(name.c_str())`我的 C++ 驱动程序必须使用而不是仅调用它`name.c_str()`。此外，这可以防止编译器注意到您正在做的其他事情。

这是我上面提到的 C++ 驱动程序：

```
#include <iostream>
#include <string>
using namespace std;

extern "C" string return_string(char* name);

int main(int argc, char *argv[]) {
  string name("Tom");
  string s(return_string(const_cast<char *>(name.c_str())));
  cout << s << "\n";
  cout << name << "\n";
  return 0;
} 
```

此外，如果我在我的 C++ 驱动程序中使用不同的优化设置或稍微重新组织代码，有时您的代码实际上可以工作，有时它会打印垃圾，有时它会出现段错误。我的第一个猜测是，这取决于`~string`调用的内联位置——但实际上，细节并不重要；代码不应该工作，它没有，所以谁在乎为什么？

# c# - c#蛇游戏如何停止蛇

> ID：12500072
> 
> 赞同：3
> 
> 时间：2012-09-19T17:41:45.773
> 
> 标签：c#, events, timer, onkeydown

我必须为学校的一个小项目做蛇游戏。我已经到了蛇在一个方向无限移动的地步。然而，按下另一个方向只会将该方向添加到蛇的运动中。所以当你先向上然后离开时，它会向东北方向移动。我几乎被困在如何解决这个问题上。我写了一个 stop() 方法，但我不知道如何实现它。如果你们能给我一些建议，将不胜感激。

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing;

namespace Snake
{
    class Snake
    {
        //Attributes go here....
        private Form frmSnake;
        private static Button btnSnake;
        private static Label lblStatus;
        private static Timer timerUP;
        private static Timer timerLEFT;
        private static Timer timerDOWN;
        private static Timer timerRIGHT;

        //Initialize a Snake Object...
        public Snake()
        {            
            initComponents();
            initTimers ();
            startAllTimers ();
            initEventHandler(this);
            frmSnake.ShowDialog();
        }

        //give the Components of snake object values        
        private void initComponents()
        {
            frmSnake = new Form();
            lblStatus = new Label();
            btnSnake = new Button();            

            frmSnake.Controls.Add(btnSnake);
            frmSnake.Controls.Add(lblStatus);
            frmSnake.SetBounds(400, 400, 700, 550);
            frmSnake.Text = "Snake";

            lblStatus.SetBounds(0, 495, 700, 20);
            lblStatus.BackColor = System.Drawing.Color.Red;

            btnSnake.SetBounds((frmSnake.Width / 2) - (btnSnake.Width / 2), ((frmSnake.Height - lblStatus.Height) / 2) - (btnSnake.Height / 2), 10, 10);
        }

        private void initTimers ()
        {            
            timerUP = new Timer ();
            timerLEFT = new Timer ();
            timerDOWN = new Timer ();
            timerRIGHT = new Timer ();
            timerUP.Enabled = true;
            timerUP.Interval = 100;
            timerLEFT.Enabled = true;
            timerLEFT.Interval = 100;
            timerDOWN.Enabled = true;
            timerDOWN.Interval = 100;
            timerRIGHT.Enabled = true;
            timerRIGHT.Interval = 100;
        }

        private void disposeTimers ()
        {
            timerUP.Dispose ();
            timerLEFT.Dispose ();
            timerDOWN.Dispose ();
            timerRIGHT.Dispose ();
        }

        private void stopTimer (Timer timer)
        {
            timer.Stop ();
        }

        private void stopAllTimers ()
        {
            timerUP.Stop ();
            timerDOWN.Stop ();
            timerLEFT.Stop();
            timerRIGHT.Stop();
        }
        private void startAllTimers ()
        {
            timerUP.Start ();
            timerDOWN.Start ();
            timerRIGHT.Start ();
            timerLEFT.Start ();
        }

        private void startTimer (Timer timer)
        {
            timer.Start ();
        }

        //initializes the event handler which handles a key press W,A,S,D from user 
        //W,A,S,D correspondents UP,LEFT,DOWN,RIGHT
        private void initEventHandler(Snake snake)
        {
            snake.frmSnake.KeyPreview = true;
            snake.frmSnake.KeyDown += new KeyEventHandler(snake.frm_KeyDown);
        }

        //handle the key press event sent from previous method
        private void frm_KeyDown(object sender, KeyEventArgs e)
        {
            disposeTimers ();
            initTimers ();
            switch ( e.KeyData )
            {

                //if up is pressed
                case Keys.W:
                    {                        
                        startTimer ( timerUP );
                        timerUP.Tick += new EventHandler ( timerUP_Tick );
                    }
                    break;
                //if left is pressed
                case Keys.A:
                    {                        
                        startTimer ( timerLEFT );
                        timerLEFT.Tick += new EventHandler ( timerLEFT_Tick );
                        //move snake 5 spaces
                    }
                    break;
                //if down is pressed
                case Keys.S:
                    {                        
                        startTimer ( timerDOWN );
                        timerDOWN.Tick += new EventHandler ( timerDOWN_Tick );
                        //move snake 5 spaces
                    }
                    break;
                //if right is pressed
                case Keys.D:
                    {                        
                        startTimer ( timerRIGHT );
                        timerRIGHT.Tick += new EventHandler ( timerRIGHT_Tick );
                        //move snake 5 spaces
                    }
                    break;
            }            
        }

        void timerRIGHT_Tick ( object sender, EventArgs e )
        {
            btnSnake.Location = new Point ( btnSnake.Location.X + 5, btnSnake.Location.Y );
        }

        void timerDOWN_Tick ( object sender, EventArgs e )
        {
            btnSnake.Location = new Point ( btnSnake.Location.X, btnSnake.Location.Y + 5 );
        }

        void timerLEFT_Tick ( object sender, EventArgs e )
        {
            btnSnake.Location = new Point ( btnSnake.Location.X - 5, btnSnake.Location.Y );
        }

        void timerUP_Tick ( object sender, EventArgs e )
        {
            //move snake 5 spaces
            btnSnake.Location = new Point ( btnSnake.Location.X, btnSnake.Location.Y - 5 ); 
        }        

        private void setLabelStatus(string text, Color color)
        {
            lblStatus.Text = "";
            lblStatus.BackColor = color;
            lblStatus.Text = text;
        }

        //main method initializes a snake game
        static void Main(string[] args)
        {
            Snake snake = new Snake();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:44:52.620

您需要跟踪已创建的计时器，以便稍后删除它们（可能在“停止”方法中）。

要么，要么你可以有一个总是触发的移动计时器（在游戏启动时启动它），然后存储“当前方向”是什么并在计时器内使用它。

第二种方法可能更好，因为您可以稍后在其中滚动一些“每帧”游戏逻辑（检查蛇是否已经吃掉自己等），而不是在所有各种计时器回调中复制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:55:40.817

将每个键的计时器声明为私有全局变量，然后在您希望更改方向时调用`Start()`和方法。`Stop()`

```
 // Declare
 Timer UpTimer = new Timer();
 Timer DownTimer = new Timer();
 Timer LeftTimer = new Timer();
 Timer RightTimer = new Timer();

 // If Left Key pressed
 UpTimer.Stop();
 DownTimer.Stop();
 LeftTimer.Start();
 RightTimer.Stop(); 
```

# parallel-processing - Radeon 显卡之间 OpenCL 的可移植性和优化

> ID：12500079
> 
> 赞同：2
> 
> 时间：2012-09-19T17:42:14.900
> 
> 标签：parallel-processing, opencl

我正计划深入研究 OpenCL，并且一直在阅读（仅表面知识）关于 OpenCL 可以做什么，但有几个问题。

假设我有一台 AMD Radeon 7750，而我有另一台装有 AMD Radeon 5870 的计算机，并且没有计划使用带有 Nvidia 卡的计算机。我听说优化特定设备的代码会带来性能优势。优化究竟是什么意思？根据我的阅读和一些猜测，这听起来意味着以 GPU 喜欢的方式编写代码（通常不用担心它是 AMD 或 Nvidia 卡）以及以匹配方式显卡处理内存（我猜这是特定于计算设备的？或者这只是品牌特定的？）。

因此，如果我为 Radeon 7750 编写代码并对其进行优化，我是否能够将该代码带到具有 Radeon 5870 的另一台计算机上，并且在不更改任何代码部分的情况下，仍然可以从优化中保留合理数量的性能优势? 如果代码不起作用，更改部分代码会是一个小问题，还是会涉及重写足够多的代码，所以首先为 Radeon 5870 编写优化代码会是一个更好的主意.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:30:56.980

如果没有关于您打算编写的算法和应用程序的更多信息，这个问题就有点模糊了。但我想我可以为您提供一些高级策略，以便您在为这两个不同平台开发代码时牢记。

Radeon 7750 的设计采用新的[Graphics Core Next](http://www.anandtech.com/show/4455/amds-graphics-core-next-preview-amd-architects-for-compute/2)架构，而您的 HD5780 则基于较旧的[VLIW5 (RV770) 架构](http://www.anandtech.com/show/2841/4)。

为了使您的代码在 HD5780 硬件上运行良好，您必须尽可能多地使用打包的原始数据类型，尤其是`int4`,`float4`类型。这是因为 OpenCL 编译器很难自动发现并行性并将数据打包到宽向量中。如果您可以构建您的代码，以便您已经考虑到这一点，那么您将能够填充更多的 VLIW-5 插槽，从而使用更多的流处理器。

GCN 更像 NVidia 的 Fermi 架构，其中代码到流处理器的功能单元（ALU 等）的路径不经过显式调度的 VLIW 指令。因此，可以在运行时自动检测到更多的并行性，让您的功能单元忙于做有用的工作，而无需您费力思考如何实现这一点。

这是一个过于简单的例子来说明我的观点：

```
// multiply four factors
// A[0] = B[0] * C[0]
// ...
// A[3] = B[3] * C[3];

float *A, *B, *C;

for (i = 0; i < 4; i ++) {
  A[i] = B[i] * C[i];
} 
```

该代码可能在 GCN 架构上运行良好（除了次优的内存访问性能——一个高级主题）。但是在您的 HD5870 上这将是一场灾难，因为这四个乘法将占用 4 个 VLIW5 指令而不是 1 个！`float4`因此，您将使用以下类型编写上述代码：

```
float4 A, B, C;

A = B * C; 
```

它会在你的两张卡上运行得非常好。另外，它会在 CPU OpenCL 上下文中发挥作用，并充分利用 MMX/SSE 宽寄存器，这是一个奖励。这也是对内存系统的更好使用。

简而言之，在您开始同时在这两个系统上部署代码时，我建议您牢记一件事，使用打包的原语。

这是另一个更清楚地说明在 HD5870 上需要小心操作的示例。假设我们使用单独的工作单元实现了前面的示例：

```
// multiply four factors
// as separate work units
// A = B * C

float A, B, C;

A = B * C; 
```

我们有四个独立的工作单元，而不是一个。这对 VLIW 设备来说绝对是一场灾难，并且会在 GCN 设备上显示出更好的性能。这也是您在编写代码时想要寻找的东西——您可以使用`float4`类型来减少执行相同工作的工作单元的数量吗？如果是这样，那么您将在两个平台上看到良好​​的性能。

# crash - 在特定 CSS 情况下隐藏表格行或 tbody 时 IE9 崩溃：colspan > 1,border-collapse:collapse,border:0 !important

> ID：12500083
> 
> 赞同：2
> 
> 时间：2012-09-19T17:42:24.337
> 
> 标签：crash, internet-explorer-9

（与[其他帖子](https://stackoverflow.com/questions/11326697/tr-display-none-crashes-ie9)相关，稍作改进，用例可能与那个略有不同？）。

这需要几个小时来缩小我页面的 HTML/CSS 组合中具体导致 IE9 崩溃并出现“Internet Explorer 已停止工作”错误的范围（如果我选择调试，具体错误是“iexplore.exe 中 0x602508cb 处的未处理异常: 0xC0000005: 访问冲突读取位置 0x00000018。” IE 8 没有崩溃。我将其缩小为以下内容：

要重现，请使用这个（看似）简单的表格创建一个 HTML 页面：

```
<table>
    <tr>
        <td colspan="2">
            TEST ROW
        </td>
    </tr>
    <tr class="tr1" id="tr1">
        <td class="blank">
            test
        </td>
        <td>
            test
        </td>
    </tr>
</table> 
```

添加这个CSS：

```
<style>

    .tr1 td, th
    {
        border: 1px solid Black;
    }        

    td.blank
    {
       border:0 !important;
    }        

    table
    {
        border-collapse: collapse;
    }

</style> 
```

添加此按钮（或任何其他机制）以隐藏第二行：

```
<input type="button" onclick="document.getElementById('tr1').style.display='none';"
    value="Hide Table Row" /> 
```

如果单击该按钮，您将可靠地重现 IE9 错误。

无论如何，我想发布这个错误，因为我找不到与错误代码“iexplore.exe 中 0x602508cb 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000018”匹配的单个帖子。并希望这可以帮助下一个人。

是否还有其他人想要提供任何解决方法？你遇到过这个bug吗？IE 10/Windows 预览组中的任何人都知道 IE 10 是否有同样的问题？如果没有，您介意将此作为错误提交吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:42:24.337

以下是一些解决方法 - 它们都有效，但可能不适合您的情况：

*   从空白 0 边框中删除 !important （我无法使用此解决方案，因为我确实不需要边框 - 这很重要 - 双关语；））
*   或者使边框 1px 纯白色而不是边框​​ 0（这是我使用的解决方案，并且在某种程度上，边框不应该从 1px 变为 0px 并且可能是 IE9 中错误的根源我猜？）
*   或摆脱边界崩溃：崩溃；（我不能使用它，因为我希望它们折叠起来）
*   或者摆脱 colspan （我不能因为我需要它）
*   或者选择编织而不是为不断变化的浏览器编写软件（再说一次，我不能，因为我不喜欢编织；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T01:39:21.463

谢谢@AdamE ...您的解决方法很有帮助。

我处于相同的位置：我需要在带有折叠边框和偶尔 colspan 的桌子上隐藏一行（....而且我也不喜欢编织 :)

我使用了相当于[Xrumet 的答案](https://stackoverflow.com/questions/11326697/tr-display-none-crashes-ie9/12583617#12583617)来临时应用您/他的解决方法：

```
$myTable.css("borderCollapse", "separate");
$myRow.hide();
$myTable.css("borderCollapse", ""); 
```

做这项工作。

# asp.net-mvc - 模型所有权检查

> ID：12500085
> 
> 赞同：13
> 
> 时间：2012-09-19T17:42:25.457
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

在修改（*更新或删除*）模型之前的控制器中，我试图验证执行操作的用户是否真正拥有他们试图修改的对象。

我目前正在方法级别执行此操作，这似乎有点多余。

```
[HttpPost]
public ActionResult Edit(Notebook notebook)
{
    if (notebook.UserProfileId != WebSecurity.CurrentUserId) { return HttpNotFound(); }

    if (ModelState.IsValid)
    {
        db.Entry(notebook).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(notebook);
} 
```

是否有一种通用的方法可以在各种模型中重复使用？

是否有可能用一个来做到这一点`ActionFilter`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:08:07.767

过滤器方法可能如下所示：

```
public class VerifyOwnership : IActionFilter
{
    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        foreach(var parameter in filterContext.ActionParameters)
        {
            var owned  = paramter.Value as IHaveAnOwner;
            if(owned != null)
            {                    
                if(owned.OwnerId != WebSecurity.CurrentUserId)
                {
                    // ... not found or access denied
                }
            }
        }
    }

    public void OnActionExecuted(ActionExecutedContext filterContext)
    {

    }
} 
```

假设像 Notebook 这样的模型实现了特定的接口。

```
public interface IHaveAnOwner
{
    int OwnerId { get; set; }
} 
```

Blowdart 有一个很好的观点，即用户可以在帖子中篡改 OwnerId。我相信他们也可以篡改他们的身份验证票，但我相信他们必须知道另一个用户的票并篡改两者才能让 ID 与另一个用户匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T20:14:11.930

过滤器听起来是一个不错的方法，但它有点受限。如果你能有这样的过滤器就好了：

```
[RequireOwnership<Notebook>(n => n.UserProfileId)] 
```

...但`Attributes`在允许的数据类型方面受到限制，而且我也不认为泛型是允许的。因此，您可以拥有一个`[RequireOwnership]`通过使用反射检查模型属性来工作的属性，或者您可以创建一个自定义验证器，您的模型如下所示：

```
public class Notebook
{
    [MatchesCurrentUserId]
    public int UserProfileId { get; set; }
} 
```

那么你的`ModelState.IsValid`支票就足够了。

**编辑：**

我想到了另一个选择。您可以将过滤器与模型上的属性结合使用（不必是 a `ValidationAttribute`）。过滤器可以检查您的请求模型并检查带有 的属性`[MatchesCurrentUserId]`，并与当前用户 ID 进行比较。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T19:18:43.433

我可以看到您所拥有的一个问题 - 您依赖用户输入来执行安全检查。

考虑你的代码

```
if (notebook.UserProfileId != WebSecurity.CurrentUserId) 
```

Notebook 来自模型绑定。所以 UserProfileId 来自模型绑定。你可以很高兴地伪造它——例如，我使用 Firefox 的 TamperData 来更改隐藏的 UserProfileId 的值以匹配我的登录名，然后我就走了。

我最终要做的事情（在服务中，而不是在控制器中）是在一个帖子上根据传递的唯一 id 从数据库中拉回记录（例如，Edit/2 将使用 2），然后检查 User.Identity。我在返回的数据库记录中拥有的当前所有者字段的名称（嗯，传递的身份参数）。

因为我从数据库（存储库，无论如何）中撤回，所以属性不会为此工作，而且我不确定您是否可以在属性的方法中足够通用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T20:16:17.327

当我过去做过这样的事情时，它真的并没有好多少。对于我们的项目，我们将有一个方法可以接受一个`Notebook`对象并根据当前登录的用户检查它。

您可以使用所有不同的对象类型重载此方法，并使用一致的方法来检查访问。抱歉，这是我所知道的最好的方法。

```
[HttpPost]
public ActionResult Edit(Notebook notebook)
{
    if(!SessionUser.LoggedInUser.CheckAccess(notebook))
        return HttpNotFound();

    //Other code...
} 
```

PS`SessionUser`是一个自定义类，我们基本上只是为了管理当时登录的人。您可以编写类似的东西，但不要期望它默认使用 .NET。

# ms-access - 如何以编程方式折叠 Access Stripe 命令和导航面板？

> ID：12500090
> 
> 赞同：2
> 
> 时间：2012-09-19T17:42:45.900
> 
> 标签：ms-access, vb6

如何以编程方式折叠 Access Stripe 命令和导航面板？我一直在尝试这样做，`Application.SetOption`但我找不到正确的选择。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:51:25.160

如果条带意味着功能区，试试这个：

```
DoCmd.ShowToolbar "Ribbon", acToolbarNo 
```

要关闭导航面板，请尝试以下操作：

```
DoCmd.SelectObject acTable, , True
DoCmd.RunCommand acCmdWindowHide 
```

# c# - 可以在文件名或扩展名中使用的 DateTime.ToString() 格式？

> ID：12500091
> 
> 赞同：131
> 
> 时间：2012-09-19T17:42:55.043
> 
> 标签：c#, datetime, filenames, datetime-format

我想在创建文件时为文件名添加时间戳，但是我尝试过的大多数 DateTime 方法都会输出带有空格和斜杠的内容。例如：

```
Debug.WriteLine(DateTime.Now.ToString()); // <-- 9/19/2012 1:41:46 PM
Debug.WriteLine(DateTime.Now.ToShortTimeString()); // <-- 1:41 PM
Debug.WriteLine(DateTime.Now.ToShortDateString()); // <-- 9/19/2012
Debug.WriteLine(DateTime.Now.ToFileTime()); // <-- 129925501061462806 
```

`ToFileTime()`有效，但不完全是人类可读的。如何将输出格式化为带有日期和时间的人类可读时间戳，可以在文件名或扩展名中使用？最好是类似的东西`2011-19-9--13-45-30`？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-09-19T17:44:17.333

你可以使用这个：

```
DateTime.Now.ToString("yyyy-dd-M--HH-mm-ss"); 
```

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2012-09-19T17:48:43.183

I would use the [ISO 8601](http://en.wikipedia.org/wiki/ISO_8601) format, without separators:

```
DateTime.Now.ToString("yyyyMMddTHHmmss") 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-10-25T23:59:16.640

我有类似的情况，但我想要一种一致的方式来使用文件名中的 DateTime.Parse，所以我选择了

```
DateTime.Now.ToString("s").Replace(":", ".") // <-- 2016-10-25T16.50.35 
```

当我想解析时，我可以简单地反转 Replace 调用。这样我就不必输入任何 yymmdd 内容或猜测 DateTime.Parse 允许的格式。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-07-29T21:16:54.120

我个人喜欢这样：

```
DateTime.Now.ToString("yyyy-MM-dd HH.mm.ss") 
```

因为它区分了日期和时间。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-01-31T10:29:10.847

下面列出了最常用的时间格式说明符。，

> ***dd*** --***一个月中的一天***，从 01 到 31。
> 
> ***MM*** -***月***，从 01 到 12。
> 
> ***yyyy——***四位数的年份***。***
> 
> ***hh*** --***小时***，使用从 01 到 12**的12 小时制。**
> 
> ***mm*** -***分钟***，从 00 到 59。
> 
> ***ss——******第二个***，从 00 到 59。
> 
> ***HH——******小时***，使用 00 到 23 之间的**24 小时**制。
> 
> ***tt*** -- ***AM/PM***代号。

使用上述方法，您将能够为您的文件名形成一个唯一的名称。

***这里我提供了例子***

```
string fileName = "fileName_" + DateTime.Now.ToString("MM-dd-yyyy_hh-mm-ss-tt") + ".pdf"; 
```

***或者***

如果你不喜欢使用符号，你也可以试试这个。，

```
string fileName = "fileName_" + DateTime.Now.ToString("MMddyyyyhhmmsstt") + ".pdf"; 
```

希望这对现在或将来的人有所帮助。:)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-05-18T02:30:10.560

使用[插值](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated)字符串和[格式说明符](https://msdn.microsoft.com/en-us/library/system.string.format)：

```
var filename = $"{DateTime.Now:yyyy.dd.M HH-mm-ss}" 
```

2020 年 1 月 1 日上午 10:40:45 的示例输出：

> 2020.28.01 10-40-45

* * *

或者，如果您想要标准日期格式：

```
var filename = $"{DateTime.Now:yyyy.M.dd HH-mm-ss}" 
```

> 2020.01.28 10-40-45

* * *

*注意：此功能在 C# 6 及更高版本的语言中可用。*

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-09-19T17:46:14.587

You can try with

```
var result = DateTime.Now.ToString("yyyy-MM-d--HH-mm-ss"); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-08-23T07:53:43.137

您可以为您的文件创建一个路径，如下所示：

```
string path = "fileName-"+DateTime.Now.ToString("yyyy-dd-M--HH-mm-ss") + ".txt"; 
```

# c++ - 无法创建弹出菜单

> ID：12500093
> 
> 赞同：0
> 
> 时间：2012-09-19T17:43:02.890
> 
> 标签：c++, winapi

我正在尝试以编程方式创建菜单，但下面的代码无法在第二个菜单项（文件的邻居）中创建弹出菜单（在第一个文件-> 新建等中，一切都很好）。当我单击查看时，它什么都不做，而不是显示 SelectAll 命令。

```
HMENU menu = CreateMenu();
HMENU subMenu1 = CreatePopupMenu();

AppendMenu(subMenu1,MF_STRING,IDC_MENU_NEW,_T("New"));
AppendMenu(subMenu1,MF_STRING,IDC_MENU_EXIT,_T("Exit"));

AppendMenu(menu,MF_POPUP,(UINT_PTR)subMenu1,_T("File"));

SetMenu(dlg,menu);
HMENU menu2 = CreateMenu(); 
HMENU subMenu2 = CreatePopupMenu();

AppendMenu(menu,MF_INSERT,(UINT_PTR)menu2,_T("View"));
AppendMenu(subMenu2,MF_STRING,IDC_MENU_EXIT2,_T("Select All"));

AppendMenu(menu2,MF_POPUP,(UINT_PTR)subMenu2,_T("View")); 
```

我究竟做错了什么？你能指点我到某个地方找到信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:15:34.353

我相信你的错误是在这行代码上

```
AppendMenu(menu,MF_INSERT,(UINT_PTR)menu2,_T("View")); 
```

MF_INSERT 不是 AppendMenu 的有效标志，实际上映射到 MF_ENABLED。在这种情况下，我相信您想使用 MF_POPUP 插入“查看”子菜单。

这是 MSDN 描述 MF_POPUP 的方式：

> 指定菜单项打开一个下拉菜单或子菜单。uIDNewItem 参数指定下拉菜单或子菜单的句柄。此标志用于将菜单名称添加到菜单栏，或打开下拉菜单、子菜单或快捷菜单的子菜单的菜单项。

# perl - 如何使用 WWW::Mechanize 和下拉菜单在 Perl 中导航网页？

> ID：12500095
> 
> 赞同：3
> 
> 时间：2012-09-19T17:43:06.433
> 
> 标签：perl

我有一个问题，我想做的是：

我用 WWW::Mechanize 打开一个网页，填写用户名和密码并登录。

我遇到的问题是，登录后我必须从下拉列表中选择值，然后我必须按提交。

我怎样才能做到这一点？

我使用的代码是：

```
#!/usr/bin/perl
use LWP::UserAgent;
use  WWW::Mechanize;
use HTTP::Cookies;
use strict;

my $username="123456";
my $password="XXXXX";
my $project="Systems";
my $agent = WWW::Mechanize->new();
$agent->get('http://www.XXXXX.com');
$agent->form_name("login_form");
$agent->field("txtLoginId", $username);
$agent->field("txtPassword", $password);
$agent->submit();
#Till now it has success full logined, From here it has to select one value from a drop #down box
$agent->form_name("frmProject");
$agent->field("cboProject", $project);
my $response=$agent->submit();

if ($response->is_success){
  print "\nContent:\n";
  print $response->as_string;
}elsif ($response->is_error){
  print $response->error_as_HTML;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:57:59.107

WWW::Mechanize 有一个`click`可以用来点击按钮的方法。或者，研究`submit_form`可以为所有表单元素指定值的方法。如果页面使用 javascript，WWW:Mechanize 可能不适合您的任务（参见例如[WWW::Mechanize::Firefox](http://p3rl.org/WWW%3a%3aMechanize%3a%3aFirefox)的替代方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:58:17.037

你需要使用[`select`方法](https://metacpan.org/module/WWW%3a%3aMechanize#mech-select-name-value-)。如果您知道值（不是显示文本），请使用：

```
$agent->form_name("frmProject");
$agent->select('cboProject', $project);
my $response = $agent->submit(); 
```

如果你不看一下[Mechanize FAQ](https://metacpan.org/module/WWW%3a%3aMechanize%3a%3aFAQ#How-do-I-pick-a-specific-value-from-a-list-)。它说你必须做这样的事情：

```
# Find the correct input element
my ($projectlist) = $agent->find_all_inputs( name => 'cboProject' );
# Look up the value of the option

my %name_lookup;
@name_lookup{ $projectlist->value_names } = $projectlist->possible_values;

# use the display-text to get the correct value
my $value = $name_lookup{ $project }; 
```

* * *

完成后，您可以使用[`click`- 方法](https://metacpan.org/module/WWW%3a%3aMechanize#mech-click-button-x-y-)提交页面。

```
$agent->click_button('name_of_the_submit_button'); 
```

但是，如果您必须单击的按钮是默认操作，`$agent->submit()`那么也应该这样做。

# java - 我应该如何修理我的网豆？

> ID：12500098
> 
> 赞同：0
> 
> 时间：2012-09-19T17:43:11.237
> 
> 标签：java

当我尝试运行我的代码时出现此错误：“它的平台引用已损坏。”

我无法运行我的代码。有人可以运行这段代码并让我知道它是否给出错误吗？另外，你能告诉我如何修复我的网豆吗？

```
import java.io.*;

     public class ResourcesTesterApp
  {
public static void main(String[] args)
{
    String s1 = readLineWithResources();
    String s2 = readLineWithFinally();
}

public static String readLineWithResources() throws IOException 
{
 System.out.println("Starting readLineWithResources method.");

 try (
 RandomAccessFile in = new RandomAccessFile("products.ran", "r")) 
   {
    return in.readLine();   
          }
         }

     catch (IOException e)
   {
  System.out.println(e.toString());
     return null;
    }
     }

public static String readLineWithFinally() 
{
    System.out.println("Starting readLineWithFinally method.");
      RandomAccessFile in = null;
      String s = null;

      try {
   in = new RandomAccessFile("products.ran", "r");
      s = in.readLine();
     } 
      catch (IOException e) 
      {
        System.out.println(e.toString());
        } 
      finally {
      if (in != null) {
     try {
      in.close();
      System.out.println("RandomAccessFile closed");
       } 
     catch (IOException e) {
 System.out.println("RandomAccessFile " + e.getMessage());
      }
     }
    }
       return s;
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:47:35.720

file

```
etc/netbeans.conf 
```

last setting (`netbeans_jdkhome`) is path to your JDK. Check it and restart NetBeans

# android - 从资产 NullPointerException 获取 XML

> ID：12500100
> 
> 赞同：0
> 
> 时间：2012-09-19T17:43:22.467
> 
> 标签：android, xml

我正在处理[这个](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)示例，其中作者通过 HTTP 请求提取+解析 xml 文件。我试图操纵这个项目，而不是从资产文件夹中加载相同的 xml。但是，当我加载它时，我得到了一个空指针。我正在传递上下文，因为我相信除了从资产文件夹加载“url”之外，我还应该传递上下文。我在这段代码中的错误在哪里？

MainActivity 片段初始化 url 字符串并调用 getXML

```
static final String URL = "file:///android_asset/sample.xml";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ...
    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL, context); // getting XML
    ...
} 
```

XMLParser 类的方法：

```
public String getXmlFromUrl(String URL, Context context){
    String xml = null;
    AssetManager am = context.getAssets();
    try {
        InputStream is = am.open(URL); //This is line 40
        int length = is.available();
        byte[] data = new byte[length];
        is.read(data);
        xml = new String(data);
    } catch (IOException e1) {
        e1.printStackTrace();
    }

    return xml;
} 
```

编辑：添加了 Logcat

```
09-19 13:41:43.442: W/dalvikvm(4841): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-19 13:41:43.442: E/AndroidRuntime(4841): FATAL EXCEPTION: main
09-19 13:41:43.442: E/AndroidRuntime(4841): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidhive.xmlparsing/com.androidhive.xmlparsing.AndroidXMLParsingActivity}: java.lang.NullPointerException
09-19 13:41:43.442: E/AndroidRuntime(4841):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at android.os.Looper.loop(Looper.java:130)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at android.app.ActivityThread.main(ActivityThread.java:3683)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at java.lang.reflect.Method.invokeNative(Native Method)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at java.lang.reflect.Method.invoke(Method.java:507)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at dalvik.system.NativeStart.main(Native Method)
09-19 13:41:43.442: E/AndroidRuntime(4841): Caused by: java.lang.NullPointerException
09-19 13:41:43.442: E/AndroidRuntime(4841):     at com.androidhive.xmlparsing.XMLParser.getXmlFromUrl(XMLParser.java:40)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at com.androidhive.xmlparsing.AndroidXMLParsingActivity.onCreate(AndroidXMLParsingActivity.java:42)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-19 13:41:43.442: E/AndroidRuntime(4841):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-19 13:41:43.442: E/AndroidRuntime(4841):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:02:49.903

你在哪里定义了一个`context`变量的值`String xml = parser.getXmlFromUrl(URL, context); // getting XML`？

从我看到你的参数是*null*。在`getXmlFromUrl()`方法内部，您不需要提供 a`Context`作为参数，因为您在`Activity`. 只需调用之前`getAssets()`没有`context`变量的方法。

# jsp - 将参数从一个 JSP 传递到另一个 servlet，信息没有被传递

> ID：12500104
> 
> 赞同：0
> 
> 时间：2012-09-19T17:43:26.923
> 
> 标签：jsp, servlets

我有一个简单的问题，但我就是无法让这该死的东西发挥作用。这是我正在使用的代码。当我单击 main.jsp 中的按钮时，我会从 reportbuilder.do 中获得一个更新的图像，但它是一个空白图像（实际上，它在图像中提供了一个时间戳以显示已创建一个新图像）。在reportbuilder.do 中，我可以看到reportType、reportScope 和reportTime 都是空的。我究竟做错了什么？

主.jsp

```
<html>
    <head>
        <title>Failing example</title>
        <script src="/scripts/jquery-1.8.1.js"></script>
        <script>
            $(document).ready(function() {
                $("#updateReport").click(function() {
                    $("#chart1").load("/chart.jsp?reportType=${reportType}&reportScope=${reportScope}&reportTime=${reportTime}");
                    return false;
                });
            });
        </script>
    </head>
    <div id="chart1">
        <img src="/reportbuilder.do?">
    </div>
    <div id="dropDown1">
        <form method="GET" action="/chart.jsp">
            <select name="reportType" style="width:100%">
                <option value="devBugFix">Developer Bug Fixes</option>
                <option value="devHrsWork">Developer Hours Worked</option>
            </select>
            <select name="reportScope" style="width:100%">
                <option value="cmcProg">CMC Program</option>
                <option value="equFarmAs">Equestrian Farmer's Association</option>
            </select>
            <select name="reportTime" style="width:100%">
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="monthly">Monthly</option>
            </select>
            <a href="#" id="updateReport"><button>Update Chart</button></a> 
        </form>
    </div>
</html> 
```

图表.jsp

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
    <body>
        <img src="/reportbuilder.do?reportType=${reportType}&reportScope=${reportScope}&reportTime=${reportTime}" alt="Image Loading Failed">
    </body>
</html> 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:02:41.477

试试这个，看看你是否可以在其他 JSP 上处理参数：

```
$("#chart1").load("/chart.jsp,     
                  {reportType:${reportType},
                   reportScope:${reportScope},
                   reportTime:{reportTime}"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:07:33.507

那是因为您在 javascript 中使用的占位符是空的。此 javascript 代码在客户端（浏览器）中执行，因此它们不会被任何东西动态替换（这就是我认为您所期望的），它们在呈现 JSP 时被空值替换：

```
$("#chart1").load("/chart.jsp?reportType=${reportType}&reportScope=${reportScope}&reportTime=${reportTime}"); 
```

您应该从 html 表单中获取它们的值。给选择一个 id 并使用例如获取它们的值`$("#reportType")`

# facebook - 我可以在第二页（不是索引）上使用 facebook like 按钮吗？

> ID：12500106
> 
> 赞同：0
> 
> 时间：2012-09-19T17:43:35.240
> 
> 标签：facebook, facebook-like, facebook-apps, facebook-page

我有这个应用程序要求用户进行测验，并且在测验之后（在*结果*页面上），用户必须喜欢该页面才能继续使用该应用程序。

所以，我需要`$_REQUEST["signed_request"]`在那个页面上检索。

问题是……我`$_REQUEST["signed_request"]`只能在*索引*页上打印，但不能在*结果*页上打印……

顺便说一句，当我点击页面的“喜欢”按钮时，它会（再次）将我重定向到*索引*而不是停留在*结果*页面上......导致用户再次开始测验！

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:23:39.783

将用户是否喜欢该页面存储在会话变量中并在第二个页面中访问它

# php - 谷歌阅读是否动态修改 tags?

My app is built in a fashion similar to Facebook in that it uses a form of pagelets which are generated asynchronously and then sent to the page and injected via javascipt.

 <p&< h1="">> ID：12500108
> 
> 赞同：0
> 
> 时间：2012-09-19T17:43:45.770
> 
> 标签：php, javascript, seo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:46:08.233

It does, if you use the hashbang (#!) to show that it's scrape-able AND you generate the data for Googl to scrape properly, such as with a headless browser, see more:

[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)</p&<>

# ruby - Ruby：日期是否大于特定日期

> ID：12500109
> 
> 赞同：0
> 
> 时间：2012-09-19T17:43:48.490
> 
> 标签：ruby, date-comparison

我正在尝试像这样进行日期比较：

```
if date > "Sept 22"
#do stuff
else
#do other stuff
end 
```

我只是想不出如何在 Ruby 中做到这一点（至少看一个特定的日期）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T17:49:04.487

Normal comparison operators work with [dates](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html) too:

```
require 'date'

date = Date.new(2012,3,3)

if date > Date.new(2011,4,4)
  # do whatever
end 
```

# visual-studio-2008 - 以编程方式注册 ActiveX 控件

> ID：12500114
> 
> 赞同：1
> 
> 时间：2012-09-19T17:44:16.667
> 
> 标签：visual-studio-2008, com, visual-studio-2005, activex

我有一个在 VS2005 中开发的 ActiveX 控件。我已将其转换为 VS2008。我的代码中有一个 ComRegisterFunctionAttribute 和一个 ComUnregisterFunctionAttribute，当我在工作中在我的 XP 系统上编译和调试时，一切都运行良好。当我尝试在家里的 Vista 笔记本电脑上运行它时，出现以下错误：

“无法注册程序集“D:\My Documents\Visual Studio 2008 Projects\C#\BLINCodes\BLINCodes\bin\Debug\BLINCodes.dll” - 访问被拒绝。请确保您以管理员身份运行应用程序。访问注册表项 'HKEY_CLASSES_ROOT\RTPS.BLINCodes' 被拒绝。”

我知道对于较新的 64 位操作系统，您必须以管理员身份运行才能注册 dll，但我可以像我一直在做的那样以编程方式进行吗？这是代码：

```
 [ComRegisterFunctionAttribute]
    public static void RegisterFunction(Type t)
    {
        Microsoft.Win32.Registry.ClassesRoot.CreateSubKey(@"CLSID\{" + t.GUID.ToString().ToUpper() + @"}\Programmable");
        Microsoft.Win32.Registry.ClassesRoot.CreateSubKey(@"CLSID\{" + t.GUID.ToString().ToUpper() + @"}\Control");

        string path = System.Reflection.Assembly.GetAssembly(typeof(BLINCodes)).Location;
        Microsoft.Win32.RegistryKey subkey;
        subkey = Microsoft.Win32.Registry.ClassesRoot.CreateSubKey(@"CLSID\{" + t.GUID.ToString().ToUpper() + @"}\DefaultIcon");
        subkey.SetValue("", path + ",102");
        subkey = Microsoft.Win32.Registry.ClassesRoot.CreateSubKey(@"CLSID\{" + t.GUID.ToString().ToUpper() + @"}\ToolBoxBitmap32");
        subkey.SetValue("", path + ",102");
    }

    [ComUnregisterFunctionAttribute]
    public static void UnregisterFunction(Type t)
    {
        Microsoft.Win32.Registry.ClassesRoot.DeleteSubKey(@"CLSID\{" + t.GUID.ToString().ToUpper() + @"}\Programmable");
        Microsoft.Win32.Registry.ClassesRoot.DeleteSubKey(@"CLSID\{" + t.GUID.ToString().ToUpper() + @"}\Control");
        Registry.ClassesRoot.DeleteSubKey(@"CLSID\{" + t.GUID.ToString().ToUpper() + @"}\ToolBoxBitmap32");
        Registry.ClassesRoot.DeleteSubKey(@"CLSID\{" + t.GUID.ToString().ToUpper() + @"}\DefaultIcon");
    } 
```

感谢您的所有帮助。

毫米

# django - 将标签复制到复制的 django 对象

> ID：12500121
> 
> 赞同：4
> 
> 时间：2012-09-19T17:45:07.523
> 
> 标签：django, django-taggit, deep-copy

我正在使用[django-taggit](https://github.com/alex/django-taggit)来标记我的待办事项记录。

```
class Action(models.Model):
    name = models.CharField("Action Name", max_length=200)
    complete = models.BooleanField(default=False, verbose_name="Complete?")

    tags = TaggableManager() 
```

我正在尝试制作记录的精确副本，直至与任务关联的标签。

```
new_obj = deepcopy(self)
new_obj.id = None
new_obj.save() 
```

运行此代码后，副本是准确的，只是没有附属标签。如何将所有标签从“self”复制到 new_obj？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T02:23:04.267

而不是将标签添加到对象：

```
new_obj.tags.add(tag) 
```

我将新对象添加到标签中：

```
for tag in self.tags.all():
    tag_object = TaggedItem(content_object = new_obj, tag = tag)
    tag_object.save() 
```

# android - 如何在我的对话框中添加删除按钮？

> ID：12500122
> 
> 赞同：0
> 
> 时间：2012-09-19T17:45:07.943
> 
> 标签：android, database, button

我有一个添加联系人应用程序，它在某些部分显示已注册的联系人，因此当您单击它时，它会显示（姓名和电话号码）和一个确定按钮，所以我想添加一个删除按钮来删除它的值（删除来自数据库的联系人值）来自对话框。以下是代码：

联系人的 ListView：

```
 ListView user = (ListView) findViewById(R.id.lvShowContatos);
    //String = simple value ||| String[] = multiple values/columns
    String[] campos = new String[] {"nome", "telefone"};

    list = new ArrayList<String>();
    c = db.query( "contatos", campos, null, null, null, null, null);
    c.moveToFirst();
    String lista = "";
    if(c.getCount() > 0) {
        while(true) {
           list.add(c.getString(c.getColumnIndex("nome")).toString());
            if(!c.moveToNext()) break;
        }
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, list);

    user.setAdapter(adapter);

    user.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            c.moveToPosition(position);
            String nome = c.getString(c.getColumnIndex("nome"));
            String telefone = c.getString(c.getColumnIndex("telefone"));
            ShowMessage(nome, telefone);
        }
    }); 
```

还有“ShowMessage”代码，它是显示的对话框：

```
 public void ShowMessage(String titulo,String msg){
    AlertDialog.Builder dialogo = new AlertDialog.Builder(this);        
    dialogo.setMessage(msg);        
    dialogo.setTitle(titulo);
    dialogo.setNeutralButton("OK", null);       
    dialogo.show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:50:04.240

```
dialogo.setNegativeButton("Delete", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    //delete contact or what you want.
               }
           }); 
```

或在您的代码上：

```
dialogo.setNegativeButton("Delete", null); 
```

阅读更多关于[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:50:49.930

您必须使用此处文档中所述的**自定义对话框**

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

# objective-c - UIWebView 不会在单独的类文件中加载请求

> ID：12500123
> 
> 赞同：1
> 
> 时间：2012-09-19T17:45:09.683
> 
> 标签：objective-c, ios, xcode, uiwebview, uiwebviewdelegate

我有一个`UIWebView`从包含的类文件动态创建的成功（我认为......没有错误被吐出）。`Foo.m`我在类文件中创建这个 webview 的函数是：

```
+(void) openWebView {
  dispatch_async(dispatch_get_main_queue(), ^{
    UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 16, 16)];
    [webView setDelegate:self];
    [webView setHidden:YES];
    NSURL *url = [NSURL URLWithString:address];
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
    [webView loadRequest:urlRequest];
    NSLog(@"Successful web open: ", url); 
  });
} 
```

我确实收到一条警告错误消息`setDelegate`（虽然它不会使应用程序崩溃），内容如下：

> 不兼容的指针类型将“const Class”发送到“id:<UIWebViewDelegate>”类型的参数

问题是，虽然`NSLog`确实记录了它试图打开的正确 URL，但该页面实际上从未被调用（我可以告诉这一点，因为我在该页面上有一个 PHP 计数器，每次打开时都会递增）。

**所以我的问题是：**

1.  我在 .h 文件中遗漏了什么吗？关于这个新的 WebView，我没有添加任何内容
2.  我觉得我错过了`self`引用的对象。[在我对这个问题的前身问题](https://stackoverflow.com/questions/12495966/how-to-create-then-destroy-a-uiwebview-inside-a-class-file)中也提到了这一点。
3.  我怎样才能检查的响应`loadRequest`

对不起大家，你可能从我的问题中可以看出，Obj-C 对我来说有点新，但我在这里真的很挣扎，希望能得到帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:47:43.227

You are implementing a class method (indicated by the `+` sign). `self` in a class method refers to the class itself, not an instance. The `delegate` of a `UIWebView` (or anything really) has to be an object though.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:51:38.940

你的`openWebView`方法是一个类方法，因为一`+`开始就是。因此，您没有对象。 `self`在这种情况下返回类（因此警告）。也许你想`openWebView`成为一个实例方法，所以将`+`to 改为`-`then`self`将指向你的实例化对象。

要检查 loadRequest 是否有效，请在您的委托（即 Foo.m）中实现`UIWebViewDelegate`委托方法`webViewDidStartLoad`并`webViewDidFinishLoad`查看它们是否被调用。

# android - AsyncTask 的 Android 下载文件不适用于 3G 仅适用于 Wi-Fi

> ID：12500124
> 
> 赞同：4
> 
> 时间：2012-09-19T17:45:29.487
> 
> 标签：android, file, download, android-asynctask

我对此进行了很多搜索，但没有找到答案。

我想下载一个文件（给出 url、目的地和文件名）。我有一个扩展 AsyncTast 类的类。它适用于 Wi-Fi 连接，但不适用于移动数据（G、3g、H）！我不知道为什么，我要疯了。

任何人都可以遇到我相同或类似的问题吗？谢谢！

我在下面发布我的代码。谢谢

```
public class AsyncDownloader extends AsyncTask<String, Integer, String> {
 @Override
 protected String doInBackground(String... sUrl) {
     try {
         Log.v("Downloader", "Source: " + sUrl[0]);
         Log.v("Downloader", "Destin: " +sUrl[1]+"/" + sUrl[2]);
         URL url = new URL(sUrl[0]);
         URLConnection connection = url.openConnection();
         connection.connect();
         // this will be useful so that you can show a typical 0-100% progress bar
         int fileLength = connection.getContentLength();

         // download the file
         InputStream input = new BufferedInputStream(url.openStream());
         OutputStream output = new FileOutputStream(sUrl[1]+"/" + sUrl[2]);

         byte data[] = new byte[1024];
         long total = 0;
         int count;
         while ((count = input.read(data)) != -1) {
             total += count;
             // publishing the progress....
            // publishProgress((int) (total * 100 / fileLength));
             output.write(data, 0, count);
         }

         output.flush();
         output.close();
         input.close();
     } catch (Exception e) {
     }
     return null;
 }
} 
```

从主要活动..

```
AsyncDownloader downloader = new AsyncDownloader();
downloader.execute("http://....", "...destination...", "...filename..."); 
```

在目标目录中有时我找到了该文件，但它没有完全下载或者它是 0 kB ..

在 AndroidManifest.xml 我有：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

我使用此功能检查连接（它似乎运作良好）：

```
public boolean isOnline() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    return cm.getActiveNetworkInfo() != null && 
       cm.getActiveNetworkInfo().isConnectedOrConnecting();
} 
```

LogCat（很长 - 完整）：[http](http://pastebin.com/EL4DREwB) : //pastebin.com/EL4DREwB LogCat（简短，必不可少 - 开始-完成应用程序运行时）： http: [//pastebin.com/wPYDQH3P](http://pastebin.com/wPYDQH3P)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:11:52.220

please check your code network connectivity code. you may checking only for WIFI connectivity , that why you AsyncTask not execute, you may use this

```
 public  static boolean getNetworkStatus(){
    ConnectivityManager manager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = manager.getActiveNetworkInfo();
    return netInfo !=null && netInfo.isConnected();
} 
```

# php - 使 HTML 文件中的变量在 PHP 文件中工作

> ID：12500129
> 
> 赞同：0
> 
> 时间：2012-09-19T17:46:00.670
> 
> 标签：php, html

我有两个相当简单的文件。第一个是这样的 HTML 文件：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<html>
<body>

<form action="test.php" method="post">
Search for: <input type="text" name="search" />
<input type="submit" name="submit" value="Search" />
</form>

</body>
</html> 
```

第二个文件是 test.php，它看起来像这样：

```
<?
       $filepath = "/usr/sbin";
       exec("ONE $search -command $filepath ");
       fopen($filepath, rw);
?> 
```

我的问题是我想使用 HTML 表单中给出的参数“搜索”作为 PHP 脚本中变量的值。ONE 是我制作的带有一个参数的搜索脚本，我希望它是“$search”。

可以这样做吗？如果可以，怎么做？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:49:02.873

Just do this:

```
exec("ONE " . $_POST['search']. " -command $filepath "); 
```

**UPDATE**:
You have another error, your following line:

```
fopen($filepath, rw); 
```

should be like this:

```
fopen($filepath, "rw"); 
```

cause the second parameter to `fopen()` should be passed as a string.

**UPDATE 2**:
So as it seems, the OP want the output of the command to be printed on the page, for that you have to use [passthru()](http://php.net/manual/en/function.passthru.php) instead of `exec()` , like so:

```
passthru("ONE " . $_POST['search']. " -command $filepath "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:49:19.937

您可以使用访问该变量`$_POST['search']`

在 shell 调用中使用它之前，您应该确保它不会损坏您的系统。

# android - Scaling ImageView on bottom of Layout

> ID：12500137
> 
> 赞同：0
> 
> 时间：2012-09-19T17:46:20.450
> 
> 标签：android, layout, imageview, scaling

I try to make a Layout with two TextViews on top and an ImageView on the bottom of the Layout. But I have problems with the scalingtyp of the ImageView. The Image should always resize propotional but be always on the center buttom. Here is a picture with my problem:

![Layout](../Images/339a3b10308c85af1a32bb761b6b2f5e.png)

I hope you unterstand my problem.
Here is my code:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/transparent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textViewGameOver1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_gravity="top|center_horizontal"
    android:gravity="center"
    android:text="TextView1"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textViewGameOver2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textViewGameOver1"
    android:layout_centerHorizontal="true"
    android:layout_gravity="top|center_horizontal"
    android:gravity="center"
    android:text="TextView2"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ImageView
    android:id="@+id/imageViewGameOver"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/textViewGameOver2"
    android:layout_centerHorizontal="true"
    android:layout_gravity="bottom|center_horizontal"
    android:scaleType="fitEnd"
    android:src="@drawable/sheldon_win" />

</RelativeLayout> 
```

Have anybody a idea to solve this problem?

Best regards!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:53:49.927

您应该使用 a`RelativeLayout`而不是 a `LinearLayout`。这将使您可以将图像放置在您想要的位置，然后您可以将图像的大小设置为`ImageView`您想要的任何大小。

```
<ImageView
    android:id="@+id/imageViewGameOver"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:src="@drawable/sheldon_win" /> 
```

这应该将图像放在右下角，并且图像应该是图像文件的大小。如果要更改它，可以将宽度和高度设置为 dp 中的某个大小。

# java - java中的SAX解析器和整数值

> ID：12500145
> 
> 赞同：1
> 
> 时间：2012-09-19T17:47:14.427
> 
> 标签：java, xml

我使用了下面的脚本，输出是
X 值：123 Y 值：123 X 值：123 Y 值：130

如何将第一个 X 设置为 X0；第一个 Y 作为 Y0，第二个 X 作为 X1，第二个 Y 作为 Y1？我使用了 SAX 解析器，它已经正确处理了我的输入文件，现在我想定义 X0、X1、Y0、Y1 以画线

```
public static void main(String argv[]) {

        try {

        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser saxParser = factory.newSAXParser();

        DefaultHandler handler = new DefaultHandler() {

        boolean xele = false;
        boolean yele = false;

        public void startElement(String uri, String localName,String qName, 
                    Attributes attributes) throws SAXException {

            if (qName.equalsIgnoreCase("X")) {
                xele = true;
            }

            if (qName.equalsIgnoreCase("Y")) {
                yele = true;
            }

        }
        public void characters(char ch[], int start, int length) throws SAXException {

            if (xele) {
                System.out.println("X value : " + new String(ch, start, length));
                xele = false;
            }

            if (yele) {
                System.out.println("Y value : " + new String(ch, start, length));
                yele = false;
            }

        }

         };

           saxParser.parse("c:\\input.xml", handler);

         } catch (Exception e) {
           e.printStackTrace();
         } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:51:37.923

您可以在 DefaultHandler 实现中声明数组以保存 X 和 Y 的值以及在每次`characters`解析器调用方法时存储值后递增的索引，并通过 getter 公开这些数组。或者，您可以使用`java.util.List`/之类`java.util.ArrayList`的集合来保存值。

```
public static void main(String argv[])
{
    try
    {

        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser saxParser = factory.newSAXParser();

        MyDefaultHandler handler = new MyDefaultHandler();
        saxParser.parse("c:\\input.xml", handler);
        System.out.println(handler.getXList() + ", " + handler.getYList());
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
}

static class MyDefaultHandler extends DefaultHandler
{
    private List<Integer> xList = new ArrayList<Integer>();
    private List<Integer> yList = new ArrayList<Integer>();
    boolean xele = false;
    boolean yele = false;

    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException
    {

        if (qName.equalsIgnoreCase("X"))
        {
            xele = true;
        }

        if (qName.equalsIgnoreCase("Y"))
        {
            yele = true;
        }

    }

    public void characters(char ch[], int start, int length) throws SAXException
    {

        if (xele)
        {
            System.out.println("X value : " + new String(ch, start, length));
            xele = false;
            xList.add(Integer.parseInt(new String(ch, start, length)));
        }

        if (yele)
        {
            System.out.println("Y value : " + new String(ch, start, length));
            yele = false;
            yList.add(Integer.parseInt(new String(ch, start, length)));
        }
    }

    public List<Integer> getXList()
    {
        return xList;
    }

    public List<Integer> getYList()
    {
        return yList;
    }

}; 
```

# c# - 根据定义的顺序获取值

> ID：12500146
> 
> 赞同：-2
> 
> 时间：2012-09-19T17:47:21.513
> 
> 标签：c#, .net

我目前在 db 表中有如下数据：

```
Data in table 
Desc       Value                                                                                                 
BNo        12 
CNo        Null 
ANo        15 
DNo        Null 
ENo        15 
```

如果 ANo 为空白，我需要显示 BNo。如果 BNo 为空白，则在表单上显示 CNo。一旦我发现基于定义的 DESC 优先级顺序的非空值（在这种情况下为 AE），我需要退出我的方法。如何实现这一点，我可以根据优先级硬编码 desc 名称，但它希望以更优化的方式实现。请提供任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:53:12.573

SQL 服务器

```
select top 1 *
from MyTable
where Value is not null
order by [Desc] 
```

MySQL：

```
select *
from MyTable
where `Value` is not null
order by `Desc`
limit 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:03:49.010

正如您所说的“按优先顺序”，听起来您有办法对列表进行排序。不确定这个优先级是什么，但对于示例，我们假设它按“Desc”的字母顺序排列。我们还假设（为简单起见）这些值在字典中。鉴于此，您可以这样编写 Linq 语句...

```
dict.OrderBy(o => o.Key).FirstOrDefault(d => d != null); 
```

例如...

```
Dictionary<string,string> dict = new Dictionary<string,string>();
dict.Add("BNo", "12");
dict.Add("CNo", null);
dict.Add("ANo", null);
dict.Add("DNo", null);
dict.Add("ENo", "16");

Debug.WriteLine(dict.OrderBy(o => o.Key).FirstOrDefault(d => d.Value != null)); 
```

这将返回第一个非空值。如果所有值都为 null，则返回 null。

这里可能有一些不正确的假设，但 OrderBy 和 FirstOrDefault 应该能够以任何必要的方式使用以实现您的目标。唯一需要更改的是“o.Key”和“d.Value”来引用您的实际属性。
例如，如果此信息在这样的类中...

```
class Info
{
    public string Desc { get; set; }
    public int? Number { get; set; }
} 
```

你有一个清单，比如......

```
List<Info> info = new List<Info>(); 
```

那你可以写...

```
var returnValue = info.OrderBy(o => o.Desc).FirstOrDefault(d => d.Number.HasValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:42:37.700

是表中Desc字段的ANo、BNo、CNo等值，还是表中的Desc、ANo、BNo..等字段。我有这个疑问，因为你只是这些实际上是联系方式。如果是第一个，RedFilter给你一个答案。如果是第二个，则可以选择动态查询。只需按优先级顺序将字段添加到数组中，然后迭代以构建查询。

# c# - HttpWebRequest 返回 404

> ID：12500147
> 
> 赞同：0
> 
> 时间：2012-09-19T17:47:33.007
> 
> 标签：c#, httpwebrequest

我们的环境有多个 Web 服务器在负载均衡器后面运行。如果我修改我的主机文件以直接转到将绕过负载平衡器的 Web 服务器，则 HttpWebRequest 工作正常。如果我删除我的主机文件中的条目并让请求通过负载平衡器，它会返回 404。但是，如果我在同一台计算机上使用简单的 .html 文件执行相同的请求，我将从它运行 HttpWebRequest 一切正常我的主机文件中是否有条目。

任何想法为什么它可以通过浏览器（Chrome）使用html文件而不是HttpWebRequest？

该请求是一个 POST 请求，它上传一个文件和 3 个其他参数。

提前感谢您的任何想法。

编辑：我尝试将我的 UserAgent 设置`Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1`为 Chrome 在使用 html 文件时发送的内容。

这是我正在使用的功能，目前在没有负载平衡器的情况下有效：

```
private void PostFileToWebServer(byte[] file)
    {
        string boundary = "----------------------------" + DateTime.Now.Ticks.ToString("x");

        var request = (HttpWebRequest)WebRequest.Create(_url);
        request.ContentType = "multipart/form-data; boundary=" + boundary;
        request.Method = "POST";
        request.KeepAlive = true;
        //Time in milliseconds
        request.Timeout = 1200000;

        request.Host = "ourdomain.com";
        request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1";
        request.CookieContainer = new CookieContainer(100000);

        var memStream = new MemoryStream();

        byte[] boundarybytes = Encoding.ASCII.GetBytes("\r\n--" + boundary + "\r\n");

        string formDataTemplate = "\r\n--" + boundary + "\r\nContent-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}";

        foreach(var key in _parameters.AllKeys)
        {
            string formData = string.Format(formDataTemplate, key, _parameters[key]);

            byte[] formDataBytes = Encoding.UTF8.GetBytes(formData);
            memStream.Write(formDataBytes, 0, formDataBytes.Length);
            memStream.Write(boundarybytes, 0, boundarybytes.Length);
        }

        string header = string.Format("Content-Disposition: form-data; name=\"file\"; filename=\"{0}\"\r\n Content-Type: application/octet-stream\r\n\r\n", _fileName);
        byte[] headerBytes = Encoding.UTF8.GetBytes(header);
        memStream.Write(headerBytes, 0, headerBytes.Length);

        memStream.Write(file, 0, file.Length);

        memStream.Write(boundarybytes, 0, boundarybytes.Length);

        request.ContentLength = memStream.Length;
        Stream requestStream = request.GetRequestStream();
        memStream.Position = 0;
        var tempBuffer = new byte[memStream.Length];
        memStream.Read(tempBuffer, 0, tempBuffer.Length);
        memStream.Close();

        requestStream.Write(tempBuffer, 0, tempBuffer.Length);
        requestStream.Close();

        var response = request.GetResponse();
        Stream stream2 = response.GetResponseStream();
        var reader2 = new StreamReader(stream2);

        System.Diagnostics.Debug.WriteLine(reader2.ReadToEnd());

        response.Close();
    } 
```

编辑：我注释掉了`request.ContentType = "multipart/form-data; boundary=" + boundary;`，它适用于负载均衡器。有人对此有解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:07:17.040

好的，我和 Fiddler 就成功调用和不成功调用之间的区别进行了长时间的交谈。Fiddler 说从浏览器发送的成功调用的最后一个边界在它的末尾有一个额外的“--”。当我这样说时，一切都很好，我可以保持我的 Content-Type 设置不变。

# facebook - page information using page.info

> ID：12500152
> 
> 赞同：0
> 
> 时间：2012-09-19T17:47:46.657
> 
> 标签：facebook, python-2.7, facebook-page, pyfacebook

i am trying to fetch page info. of myself. i have written code in python as

```
import facebook
import sys
import codecs
api_key = 'key'
secret_key = 'secret_key'
client = facebook.Facebook(api_key, secret_key)
client.auth.createToken()
client.login()
print '[*] Please login / give permission application to access you . Then press enter key to continue...'
raw_input()
client.auth.getSession()
client.request_extended_permission("publish_stream", popup=False)
raw_input()  
print "\n"
info_pages = client.pages.getInfo([client.uid])
for info in info_pages:
    for attr in info:
        print '%s: %s' % (attr, info[attr])
info_pages =client.pages.getInfo('page_id','website','my uid')
print info_pages
print "\n\n"
for info in info_pages:
    print info
    for attr in info:
        print attr,":",str(info[attr]).replace("\n","\t")
print "\n" 
```

but i am getting error as

```
facebook.FacebookError: Error 100: Param page_ids must be a valid page ID 
```

how do should i use page_ids. please modify me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:06:04.843

Traceback 如下...

```
Traceback (most recent call last):
  File "page.py", line 19, in <module>
    info_pages =client.pages.getInfo('page_id','website','my uid')
  File "build/bdist.linux-i686/egg/facebook/__init__.py", line 877, in facebook_method
  File "build/bdist.linux-i686/egg/facebook/__init__.py", line 900, in __call__
  File "build/bdist.linux-i686/egg/facebook/__init__.py", line 1558, in __call__
  File "build/bdist.linux-i686/egg/facebook/__init__.py", line 1491, in _parse_response
  File "build/bdist.linux-i686/egg/facebook/__init__.py", line 1438, in _check_error
facebook.FacebookError: Error 100: Param page_ids must be a valid page ID 
```

# java - Java Calendar 计算奇数周的下周五

> ID：12500157
> 
> 赞同：2
> 
> 时间：2012-09-19T17:48:17.440
> 
> 标签：java, date, calendar

我想得到偶数周的下一个星期五（考虑到一年中从 1 到 54 的周数）。

例如，如果今天是星期五，而这周是偶数，我想要下一个星期五。如果今天是奇数周的星期四，我想要明天的日期。

测试输入/输出如下：

```
 14/09/2012 -> 14/09/2012
 15/09/2012 -> 28/09/2012
 21/09/2012 -> 28/09/2012
 22/09/2012 -> 28/09/2012
 29/09/2012 -> 12/10/2012
 25/12/2012 -> 04/01/2013
 29/12/2012 -> 04/01/2013 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:59:39.797

```
Calendar today = Calendar.getInstance();
int dayOfWeek = today.get(Calendar.DAY_OF_WEEK);
int daysUntilNextFriday = Calendar.FRIDAY - dayOfWeek;
if(daysUntilNextFriday < 0){
    daysUntilNextFriday = daysUntilNextFriday + 7;
}
Calendar nextFriday = (Calendar)today.clone();
nextFriday.add(Calendar.DAY_OF_WEEK, daysUntilNextFriday);
if(nextFriday.get(Calendar.WEEK_OF_YEAR) % 2 == 0){
    nextFriday.add(Calendar.DAY_OF_WEEK, 7);
}
System.out.println(new SimpleDateFormat("dd/MM/yyyy").format(nextFriday.getTime())); 
```

# vb.net - Executing script on a remote server

> ID：12500160
> 
> 赞同：1
> 
> 时间：2012-09-19T17:48:40.013
> 
> 标签：vb.net, powershell

The following code works when the script is executed on the current machine (Currently, the script is a simple messagebox displaying the argument passed)

```
Arguments:

UserName = Nothing
Password = Nothing
RemoteMachineName = "CurrentMachineName"
PathBashFile = "Path/To/My/Local/Script.ps1"
Params = "parameter1" 
```

However, when I want to run a local script on a remote computer, the script is **never** actually executed. The code doesn't throw any exception.

```
Arguments:

UserName = "MyUsername"
Password = "MyPassword"
RemoteMachineName = "RemoteMachineName"
PathBashFile = "Path/To/My/Local/Script.ps1"
Params = "parameter1" 
```

All I have as a result is :

```
outParams("processId") = Nothing
outParams("returnValue") = 8 
```

What's going on? Why isn't my script running as expected on the remote machine? (No message box pops up on either machine. I have tried other cmdlets, but none ever work)

Here is the code:

```
Try
    connOptions = New ConnectionOptions()
    connOptions.Username = UserName
    connOptions.Password = Password

    connOptions.Impersonation = ImpersonationLevel.Impersonate
    connOptions.Authentication = Management.AuthenticationLevel.PacketPrivacy

    managementPath = New ManagementPath("\\" & RemoteMachineName & "\root\cimv2:Win32_Process")

    Scope = New ManagementScope(managementPath, connOptions)
    Scope.Connect()
    objectGetOptions = New ObjectGetOptions()
    processClass = New ManagementClass(Scope, New ManagementPath("root\cimv2:Win32_Process"), objectGetOptions)

    inParams = processClass.GetMethodParameters("Create")
    inParams("CommandLine") = "cmd.exe /c powershell """ & PathBashFile & """ " & params
    inParams("CurrentDirectory") = workingDirectoryPath
    outParams = processClass.InvokeMethod("Create", inParams, Nothing)
    MsgBox(outParams("processId") & "   " & outParams("returnValue"))

Catch ex As Exception
    Throw New Exception("[ExecuteRemoteBashFile] " & ex.Message)
End Try 
```

If someone could point out any mistakes in my code, it would be greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:45:23.437

我通过将完整路径放置到 powershell.exe 来解决我的问题，而不是假设控制台知道在哪里寻找它......

```
inParams("CommandLine") = "cmd.exe /c C:\Windows\System32\WindowsPowerShell\v2.0\powershell.exe """ & PathBashFile & """ " & params 
```

# wpf - How to make usercontrol take whole space of the region its injected into

> ID：12500163
> 
> 赞同：1
> 
> 时间：2012-09-19T17:48:42.413
> 
> 标签：wpf, xaml

I have a view which is injected into an region (Itemscontrol). The view only takes up space in the region depending on content size. I want that the view streches for whole height of the region. Here is code of my view:

```
 <UserControl x:Name="userControl" x:Class="DishPromo.Modules.Payments.SideCart.SideCartView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:infUIFramework="clr-namespace:DishPromo.Infrastructure.UIFramework;assembly=DishPromo.Infrastructure"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:Convert="clr-namespace:DishPromo.Modules.Payments.SideCart"
         mc:Ignorable="d"  >
<UserControl.Resources>
    <Convert:ObjectToStringConverter x:Key="ToString" />
    <Convert:BooleanToVisibilityConverter x:Key="ToVisibility" />
    <Convert:WOMsgVisibilityConverter x:Key="WOMsgVisibility" />
    <Convert:WorkOrderMsgConverter x:Key="WorkOrderMsg" />
    <Convert:RescheduleValueConverter x:Key="ValueConverter" />
    <Convert:PaymentAmountDueNow x:Key="PaymentAmountDueNow" />

    <Style TargetType="Button" x:Key="hotkeyStyle">
        <Setter Property="Width" Value="Auto"/>
        <Setter Property="Height" Value="25"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="Template">

            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Background="Transparent">
                        <Border Name="border"                           
                        Padding="4,2" CornerRadius="3"
                        BorderBrush="DarkGray" 
                        />

                        <Rectangle x:Name="FVElement" Stretch="Fill" StrokeLineJoin="Miter" StrokeThickness="0.5" Opacity="0" RadiusX="2" RadiusY="2"
                               HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Fill="{StaticResource {x:Static SystemColors.ControlLightLightBrushKey}}" Stroke="{StaticResource OEFlowButtonBorderStyle}"
                               >
                        </Rectangle>
                        <Rectangle x:Name="Background" StrokeLineJoin="Miter" StrokeThickness="0.5" Opacity="1" Margin="2" RadiusX="3" RadiusY="3">
                            <Rectangle.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" >
                                    <GradientStop Color="{StaticResource {x:Static SystemColors.ControlColorKey}}" Offset="0.576" />
                                    <GradientStop Color="{StaticResource {x:Static SystemColors.ControlLightLightColorKey}}" Offset="0" />
                                    <GradientStop Color="{StaticResource {x:Static SystemColors.ControlColorKey}}" Offset="1" />
                                    <GradientStop Color="{StaticResource {x:Static SystemColors.ControlLightColorKey}}" Offset="0.262" />
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                            <Rectangle.Stroke>
                                <LinearGradientBrush EndPoint="0.5,-1.85" StartPoint="0.5,1.5">
                                    <GradientStop Color="Black" Offset="0"/>
                                    <GradientStop Color="Black" Offset="1"/>
                                </LinearGradientBrush>
                            </Rectangle.Stroke>
                        </Rectangle>
                        <Path x:Name="WhiteBand" Height="4.25" Stretch="Fill" StrokeLineJoin="Miter" Fill="{StaticResource OEFlowButtonWhiteBandFillStyle}"
                          Data="M4.2160064,2.75 C4.2160064,1.6454305 5.1114369,1.7153466 6.2160064,1.7153466 L22.679308,1.7153466 C23.783877,1.7153466 24.679308,1.6454305 24.679308,2.75 24.679308,2.75 4.2160064,2.75 4.2160064,2.75 z" 
                          Margin="7,4,7,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>

                        <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Black" FontWeight="Light"  
                               TextWrapping="WrapWithOverflow" Text="{TemplateBinding Content}" x:Name="btnName" >

                        </TextBlock>
                        <ContentPresenter />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="#FF585151" />
                            <Setter Property="Cursor" Value="Hand" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" >
                                <Setter.Value>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" >
                                        <GradientStop Color="#FF219921" Offset="0.35"/>
                                        <GradientStop Color="#FF216B99" Offset="1"/>
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                            <Setter  Property="RenderTransform" >
                                <Setter.Value>
                                    <TranslateTransform Y="0.5" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="border" Property="Opacity" Value="0.3" />
                            <Setter TargetName="Background" Property="Opacity"  Value="0.3" />
                            <Setter TargetName="FVElement" Property="Opacity" Value="0.3" />
                            <Setter TargetName="btnName" Property="Foreground" Value="Gray"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>
<DockPanel VerticalAlignment="Stretch" LastChildFill="True" >

    <DockPanel.InputBindings>
        <KeyBinding Command="{Binding MinPaymentOverride}" Gesture="SHIFT+CTRL+y"></KeyBinding>
        <KeyBinding Command="{Binding PIAMinPaymentOverride}" Gesture="SHIFT+CTRL+m"></KeyBinding>
        <KeyBinding Command="{Binding EFTOverride}" Gesture="SHIFT+CTRL+e"></KeyBinding>
        <KeyBinding Command="{Binding CCOverride}" Gesture="SHIFT+CTRL+c"></KeyBinding>
        <KeyBinding Command="{Binding OverrideCC}" Gesture="SHIFT+CTRL+c"></KeyBinding>
        <KeyBinding Command="{Binding OverrideSSN}"  Gesture="SHIFT+CTRL+s"></KeyBinding>
        <KeyBinding Command="{Binding OverrideCertificate}"  Gesture="SHIFT+CTRL+j"></KeyBinding>
        <KeyBinding Command="{Binding OverrideSellingAgent}"  Gesture="SHIFT+CTRL+d"></KeyBinding>
        <KeyBinding Command="{Binding OverrideRefCompany}"  Gesture="SHIFT+CTRL+i"></KeyBinding>
        <KeyBinding Command="{Binding OverrideSellingCompany}"  Gesture="SHIFT+CTRL+n"></KeyBinding>
    </DockPanel.InputBindings>

    <DockPanel.Style>
        <Style>
            <Style.Triggers>
                <DataTrigger Binding="{Binding ChangeFocus}" Value="True">
                    <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=SidecartRemove}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </DockPanel.Style>

    <!--<Grid.RowDefinitions>
        <RowDefinition />

    </Grid.RowDefinitions>-->
    <DockPanel x:Name="dpNotificationArea"  Margin="0"  VerticalAlignment="Bottom" AllowDrop="True" LastChildFill="True" >

        <!--<Grid.RowDefinitions>
            <RowDefinition MinHeight="350" />
            <RowDefinition Height="29"/>
            <RowDefinition Height="58"/>
            <RowDefinition Height="27"/>
        </Grid.RowDefinitions>-->

        <Grid Grid.Row="3" VerticalAlignment="Bottom" DockPanel.Dock="Bottom">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="260"/>
            </Grid.ColumnDefinitions>

            <Label Grid.Column="0" Width="Auto" FontWeight="Bold" Foreground="Red">
                <MultiBinding Converter="{StaticResource PaymentAmountDueNow}">
                    <Binding Path="CustomerModel.AccountInfo.Pricer.PaymentRequired"/>
                    <Binding Path="CustomerModel.AccountInfo.AccountStatus"/>
                </MultiBinding>
            </Label>

            <StackPanel Grid.Column="1" x:Name="spPricerActionBar" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
                <Button Style="{StaticResource hotkeyStyle}" Width="80" x:Name="SidecartRemove" Command="{Binding RemoveCartItem}" 
                    IsEnabled="{Binding CustomerModel.ControlStatus.RemoveIsEnabled}" GotFocus="SidecartRemove_GotFocus">
                    <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Black" FontWeight="Light"><Run Text="Re"/><Underline><Run Text="m"/></Underline><Run Text="ove"/></TextBlock>
                </Button>

                <Button x:Name="btnFeeWaived" Width="80" Content="Fees Waived" IsEnabled="{Binding IsFeeWaivedEnabled}" 
                    Command="{Binding ShowBattery}"  GotFocus="btnFeeWaived_GotFocus" />    
                <Button Width="100" Content="Price It" HorizontalAlignment="Right" Visibility="{Binding PriceItVisibility}"  Command="{Binding GetPricing}" Background="#FF6633" Style="{StaticResource PriceItStyle}"/>
            </StackPanel>
        </Grid>

        <StackPanel x:Name="spWorkOrder" Grid.Row="2" VerticalAlignment="Bottom" DockPanel.Dock="Bottom">
            <Grid Margin="0,0,0,6">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="75" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/>
                </Grid.RowDefinitions>
                <StackPanel Grid.Column="1" VerticalAlignment="Bottom">
                    <Button Width="70" Height="25" x:Name="btnReschedule1" Content="Reschedule" HorizontalAlignment="Right" Command="{Binding GetInstallDates}" CommandParameter="1"
                        Visibility="{Binding CustomerModel.AccountInfo.ScheduleInfo, ConverterParameter=1, Converter={StaticResource ToVisibility}}" />
                    <Button Width="70" x:Name="btnReschedule0" Content="Reschedule" HorizontalAlignment="Right" Command="{Binding GetInstallDates}" CommandParameter="0"
                        Visibility="{Binding CustomerModel.AccountInfo.ScheduleInfo, ConverterParameter=0, Converter={StaticResource ToVisibility}}" />
                </StackPanel>
                <StackPanel Grid.Column="0" VerticalAlignment="Bottom">
                    <Label Margin="0,5,0,5" Content="{Binding CustomerModel.AccountInfo.WorkorderInfo.DisconnectDate, Converter={StaticResource WorkOrderMsg}}"
                        HorizontalAlignment="Left" FontWeight="Bold" Foreground="Blue" Visibility="{Binding CustomerModel.AccountInfo.WorkorderInfo.DisconnectDate, ConverterParameter=0, Converter={StaticResource WOMsgVisibility}}" VerticalAlignment="Center"/>
                    <Label Margin="0,5,0,5" Content="{Binding CustomerModel.AccountInfo.ScheduleInfo[1], Converter={StaticResource ValueConverter}}" 
                        HorizontalAlignment="Left" FontWeight="Bold" Foreground="Blue" Visibility="{Binding Visibility, ElementName=btnReschedule1}" VerticalAlignment="Center"/>
                    <Label Margin="0,5,0,5" Content="{Binding CustomerModel.AccountInfo.ScheduleInfo[0], Converter={StaticResource ValueConverter}}" 
                        HorizontalAlignment="Left" FontWeight="Bold" Foreground="Blue" Visibility="{Binding Visibility, ElementName=btnReschedule0}" VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </StackPanel>

        <StackPanel x:Name="NetworkQualification" Grid.Row="1" Margin="4,0,0,0" VerticalAlignment="Bottom" DockPanel.Dock="Bottom">
            <TextBlock x:Name="txtbNetQualStatus" Text="{Binding CustomerModel.ServiceAddress.NetQualResult}"  Foreground="Blue" FontWeight="Bold" />
            <TextBlock x:Name="txtDupAddress" Text="{Binding CustomerModel.ServiceAddress.NoAddressFound}" Foreground="Blue" FontWeight="Bold"/>
        </StackPanel>

        <ListView  Grid.Row="0"  Name="lstSideCart" ScrollViewer.HorizontalScrollBarVisibility="Auto" DockPanel.Dock="Top"
                   ScrollViewer.VerticalScrollBarVisibility="Auto" ItemsSource="{Binding CustomerModel.AccountInfo.Services}" SelectionMode="Extended" 
                   SelectionChanged="lstSideCart_SelectionChanged" MaxHeight="781" VerticalContentAlignment="Stretch" >
        <ListView.ItemContainerStyle>
            <Style TargetType="ListViewItem">
                <Setter Property="Foreground" Value="{Binding Path=ForegroundColor}"/>
                <Setter Property="FontWeight" Value="{Binding Path=FontWeight}"/>
                <Setter Property="BorderBrush">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" >
                            <GradientStop Color="DarkGray" Offset="0.0" />
                            <GradientStop Color="DarkGray" Offset="1.0" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="BorderThickness" Value="0,0,0,0.5"/>
            </Style>
        </ListView.ItemContainerStyle>
        <ListView.ContextMenu>
            <ContextMenu ItemsSource="{Binding ContextMenuList}">
                <ContextMenu.ItemTemplate>
                    <DataTemplate>
                        <MenuItem Header="{Binding Path=Header}" CommandParameter="{Binding}"
                                  Click="MenuItem_Click" Visibility="{Binding Path=IsVisible}" Height="16"/>
                    </DataTemplate>
                </ContextMenu.ItemTemplate>
            </ContextMenu>
        </ListView.ContextMenu>
        <ListView.View>
            <GridView>
                <GridViewColumn Width="175" Header="Service Code Name" DisplayMemberBinding="{Binding Description}" />
                <GridViewColumn Width="100" Header="Service Type" DisplayMemberBinding="{Binding ServiceCode.SecondaryServiceTypeSingle.ServiceTypeName}"/>
                <GridViewColumn Width="25" Header="#" DisplayMemberBinding="{Binding CurrentQuantity}"/>
                <GridViewColumn Width="68" Header="Added" DisplayMemberBinding="{Binding Path=DateAdded, StringFormat={}{0:MM/dd/yy}}"/>
            </GridView>
        </ListView.View>
    </ListView>

    </DockPanel>

</DockPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:51:29.193

你的是`ItemsPanelTemplate`什么`ItemsControl`？

默认值为 a `StackPanel`，它不会自动将其子元素拉伸到允许的最大尺寸。

您要么必须在 中设置，`HorizontalAlignment`要么将 更改为自动拉伸其子项的内容。`Stretch``ItemsContainerStyle``ItemsPanelTemplate`

```
<!-- ItemContainerStyle -->
<ItemsControl.ItemContainerStyle>
    <Style>
        <Setter Property="HorizontalAlignment" Value="Stretch" />
    </Style>
</ItemsControl.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:16:47.683

`UniformGrid`为你的喜欢使用 a 怎么`ItemsPanelTemplate`样

```
<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <UniformGrid  />
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel> 
```

此外，根据其定义，StackPanel 仅根据存在的内容占用空间，因此说类似`VerticalAlignment="Stretch"`的内容不会在整个父容器中拉伸 StackPanel 的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:40:35.790

尝试使用 Grid 作为用户控件的 layoutroot 并且不要设置宽度和高度。

# php - 来自 PHP 的 HTTP POST，没有 cURL

> ID：12500168
> 
> 赞同：1
> 
> 时间：2012-09-19T17:49:03.383
> 
> 标签：php, post, web

我正在使用[这篇文章](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/)中给出的示例函数：

```
<?php
function do_post_request($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));
  if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }
  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
}
?> 
```

我也尝试过使用类似的方法`file_get_contents()`，如下所示：

```
$options = array(
  'http'=>array(
    'method'=>"POST",
    'header'=>
      "Accept-language: en\r\n".
      "Content-type: application/x-www-form-urlencoded\r\n",
    'content'=>http_build_query(
        array(
            'arg1'=>'arg_data_1',
            'oper'=>'get_data',
            'arg2'=>'arg_data_2',
            'id_number'=>'7862'
        ),'','&'
    )
));

$context = stream_context_create($options);
$refno = file_get_contents('/path/to/script/script.php',false,$context);

var_dump($refno); 
```

对于这两个脚本，来自服务器脚本的响应是相同的，都是`script.php`. 服务器脚本的代码永远不会开始执行，并且脚本的文本内容（PHP 代码）正在返回到原始脚本。

有点奇怪，它不会返回所有文本，而只是返回某些部分......我尝试制作一个`test.php`仅包含以下内容的测试脚本（）：

```
<?php
echo '{"a":1,"b":2,"c":3,"d":4,"e":5}';
?> 
```

但这不会从 POST 请求中返回任何内容，所以我没有包括在内。这`script.php`是一个必须更长的脚本，它执行大量逻辑和 MySQL 查询然后返回一个 JSON 对象。

所需的输出将是让 PHP 代码执行并返回一个 JSON 对象（它与 ajax 一起工作的方式）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:56:08.270

您正在尝试本地访问脚本。你必须像任何其他外部脚本一样调用它

```
$refno = file_get_contents('http://yourhost/path/to/script/script.php',false,$context); 
```

# javascript - 如何使用 jQuery 阻止简单的图像滚动器滚动太远？

> ID：12500174
> 
> 赞同：2
> 
> 时间：2012-09-19T17:49:16.347
> 
> 标签：javascript, jquery

这是我用来滚动浏览带有左右按钮的小图像的水平列表的 jQuery：

```
$(document).ready(function(){
$(".left").click(function (event) {
  event.preventDefault();
  $(".mover").animate({marginLeft: '+=60px'}, 0);
});

$(".right").click(function (event) {
  event.preventDefault();
  $(".mover").animate({ marginLeft: '-=60px' }, 0);
});
}); 
```

现在，列表滚动的距离没有限制。有没有一种简单的方法来限制这一点？

# mysql - 复杂查询的 MySQL 查询优化

> ID：12500180
> 
> 赞同：1
> 
> 时间：2012-09-19T17:49:35.863
> 
> 标签：mysql, sql, optimization, query-optimization

我正在使用现有站点，并且遇到了以下需要优化的 MySQL 查询：

```
select
    mo.mmrrc_order_oid,
    mo.completed_by_email,
    mo.completed_by_name,
    mo.completed_by_title,
    mo.order_submission_oid,
    mo.order_dt,
    mo.center_id,
    mo.po_num_tx,
    mo.mod_dt,
    ste_s.state_cd,
    group_concat(distinct osr.status_cd order by osr.status_cd) as test,
    case group_concat(distinct osr.status_cd order by osr.status_cd)
        when 'Fulfilled' then 'Fulfilled'
        when 'Fulfilled,N/A' then 'Fulfilled'
        when 'N/A' then 'N/A'
        when 'Pending' then 'Pending'
        else 'In Process'
    end as restriction_status,
    max(osr.closed_dt) as restriction_update_dt,
    ot.milestone,
    ot.completed_dt as tracking_update_dt,
    dc.first_name,
    dc.last_name,
    inst.institution_name,
    order_search.products as products_ordered,
    mo.other_emails,
    mo.customer_label,
    mo.grant_numbers
from
    t_mmrrc_order mo
    join ste_state ste_s using(state_id)
    left join t_order_contact oc 
        on oc.mmrrc_order_oid=mo.mmrrc_order_oid and oc.role_cd='Recipient'
    left join t_distrib_cont_instn dci using(distrib_cont_instn_oid)
    left join t_institution inst using(institution_oid)
    left join t_distribution_contact dc using(distribution_contact_oid)
    left join t_order_tracking ot 
        on ot.mmrrc_order_oid=mo.mmrrc_order_oid 
            and ifnull(ot.order_tracking_oid, '0000-00-00')= ifnull(
                (
                select max(order_tracking_oid) 
                from t_order_tracking ot3 
                where 
                    ot3.mmrrc_order_oid=mo.mmrrc_order_oid 
                    and ot3.completed_dt= (
                            select max(completed_dt) 
                            from t_order_tracking ot2 
                            where ot2.mmrrc_order_oid=mo.mmrrc_order_oid
                        )
                ), '0000-00-00')
    left join t_order_strain_restriction osr 
        on osr.mmrrc_order_oid = mo.mmrrc_order_oid
    left join order_search on order_search.mmrrc_order_oid=mo.mmrrc_order_oid
group by
    mo.mmrrc_order_oid
LIMIT 0, 5 
```

无论限制如何，此查询都需要 10 多秒才能运行。无限制运行时，总共有 5,727 个结果，运行时间为 10.624 秒。

使用“LIMIT 0, 5”需要 18.47 秒。

我知道有一堆连接和嵌套选择，这就是它这么慢的原因。关于如何在不更改数据库结构的情况下优化它的任何想法？

MySQL 版本：5.0.95

大多数表有超过 10,000 条记录。

这个更简单的查询大约需要 9 秒：

```
select
    mo.mmrrc_order_oid,
    mo.completed_by_email,
    mo.completed_by_name,
    mo.completed_by_title,
    mo.order_submission_oid,
    mo.order_dt,
    mo.center_id,
    mo.po_num_tx,
    mo.mod_dt,
    dc.first_name,
    dc.last_name,
    inst.institution_name,
    order_search.products as products_ordered,
    mo.other_emails,
    mo.customer_label,
    mo.grant_numbers
from
    t_mmrrc_order mo
    join ste_state ste_s using(state_id)
    left join t_order_contact oc 
        on oc.mmrrc_order_oid=mo.mmrrc_order_oid and oc.role_cd='Recipient'
    left join t_distrib_cont_instn dci using(distrib_cont_instn_oid)
    left join t_institution inst using(institution_oid)
    left join t_distribution_contact dc using(distribution_contact_oid)
    left join t_order_strain_restriction osr 
        on osr.mmrrc_order_oid = mo.mmrrc_order_oid
    left join order_search on order_search.mmrrc_order_oid=mo.mmrrc_order_oid
group by mo.mmrrc_order_oid
limit 0,5 
```

我想分组最能减慢它的速度。在这种情况下，不分组只需要 0.17 秒。任何帮助，将不胜感激。谢谢。

其他详细信息 - 这是 EXPLAIN 为我提供的第一个查询： [查看图片](https://i.stack.imgur.com/RmxmT.png) ![在此处输入图像描述](../Images/1c280f0d660db289e388e5cde7aa2936.png)

我发现 order_search 是导致大部分速度变慢的视图。视图的查询是：

```
SELECT 
    t_oi.mmrrc_order_oid AS mmrrc_order_oid,
    group_concat(t_im.icc_item_code separator ',') AS products
FROM 
    t_order_item t_oi
    JOIN t_item_master t_im on t_oi.item_master_oid = t_im.item_master_oid
    JOIN t_strain_archive on t_im.strain_archive_oid = t_strain_archive.strain_archive_oid
WHERE t_oi.item_status_cd IN (_utf8'Active',_utf8'Modified')
GROUP BY t_oi.mmrrc_order_oid
ORDER BY t_im.icc_item_code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:29:06.270

假设您没有索引列，所以我为您的列创建了一些索引，这将对您有所帮助，并且仍然有很多列要索引，就像在您的连接条件中一样，您应该在该列上应用此操作以更好地执行

```
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnamemmrrc_order_oid` (`mmrrc_order_oid`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnamecompleted_by_email` (`completed_by_email`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnamecompleted_by_name` (`completed_by_name`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnamecompleted_by_title` (`completed_by_title`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnameorder_submission_oid` (`order_submission_oid`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnameorder_dt` (`order_dt`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnamecenter_id` (`center_id`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnamepo_num_tx` (`po_num_tx`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnamemod_dt` (`mod_dt`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnameother_emails` (`other_emails`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnamecustomer_label` (`customer_label`);
ALTER TABLE `t_mmrrc_order` ADD INDEX `Indexnamegrant_numbers` (`grant_numbers`);
ALTER TABLE `t_distribution_contact ` ADD INDEX `Indexnamefirst_name` (`first_name`);
ALTER TABLE `t_distribution_contact ` ADD INDEX `Indexnamelast_name` (`last_name`);
ALTER TABLE `order_search` ADD INDEX `Indexnameproducts` (`products`); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:20:11.750

我设法通过从我的 PHP 脚本中执行两个单独的查询来解决这个问题。首先，我自己查询 order_search 视图并将所有数据保存在由 mmrrc_order_oid 索引的 PHP 数组中，然后用作产品的快速查找表。这个生成的查找表是一个大约有 6000 个字符串的数组。

接下来，我执行省略了 order_search 表的大型复杂查询。现在只需要大约一秒钟。对于每个结果记录，我只需使用 mmrrc_order_oid 的查找表来获取该订单的产品。

# java - 使用 Web 应用程序上传大文件

> ID：12500185
> 
> 赞同：1
> 
> 时间：2012-09-19T17:49:50.640
> 
> 标签：java, file-upload, file-io, nio, bulk

给定目标的环境当前不可用，因此，我无法尝试，只能依靠分析！

我的目标可以分为以下不同的步骤：

1.  使用愚蠢的“上传文件”页面上传巨大的文件（最大**100GB**） - 由于用户想要一个（愚蠢的）前端并且不愿意 ftp 文件等，因此无法逃脱。
2.  提供上述前端的 Web 应用程序将托管在低端机器上 - 2GB RAM 和 40GB HDD，并且此 Web 应用程序不会在本地机器上存储大文件的任何部分，但必须“快速”将其写入高端远程Linux机器

对于每一步，我都会强调我的方法、关注点和疑问：

*   我提到[了这个](https://stackoverflow.com/questions/12463655/huge-file-upload)让我感到困惑的线程，因为我计划使用带有上传页面的 Spring MVC 创建一个愚蠢的 Web 应用程序 - 我需要进入 HTML5 等还是一个简单的 Web 应用程序就足够了？

*   给定 2GB RAM，Web 应用程序将获得少于 1GB 的内存。如果代码没有严格编写，我担心可能会出现“OutOfMemoryError” - 我必须确保从流中，一次必须读取一个小块，比如 10MB 并将其写入远程 Linux 机器的文件。假设我在 Controller Servlet 的 doPost(...) 中，我读了一些关于如何进行的阅读并感到困惑：

    ```
     /**
             * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
             *      response)
             */
            protected void doPost(HttpServletRequest request,
                    HttpServletResponse response) throws ServletException, IOException {
                // TODO Auto-generated method stub

                InputStream fis = request.getInputStream();
                int i = 0;

                /* Approach - 1 : Plain old byte-by-byte method */
                Socket socket = new Socket("192.168.90.20", 22);
                OutputStream remoteOpStream = socket.getOutputStream();

                while ((i = fis.read()) != -1) {
                    remoteOpStream.write(i);
                }

                /* clean-up */

                /* Approach - 2 : NIO */
                ByteBuffer byteBuff = ByteBuffer.allocate(10000);/* read 10MB of data */

                ReadableByteChannel rdbyc = Channels.newChannel(request
                        .getInputStream());

                File remoteFile = new File("192.168.90.20/Remote_Linux_Folder");/*
                                                                                 * Dunno
                                                                                 * how
                                                                                 * to
                                                                                 * create
                                                                                 * a
                                                                                 * File
                                                                                 * on a
                                                                                 * remote
                                                                                 * Linux
                                                                                 * machine
                                                                                 */
                FileOutputStream remoteFos = new FileOutputStream(remoteFile);
                FileChannel writableChannel = remoteFos.getChannel();

                while (true/* dunno how to loop till all the data is read! */) {
                    rdbyc.read(byteBuff);
                    writableChannel.write(byteBuff);
                }

                /* clean-up */

            } 
    ```

**我需要某种方式，其中本地机器上的数据存储最少 - 代码只是从输入流中读取 n 个字节并将其写入远程机器**

*我相信 NIO 是要走的路，*但我无法确定我必须如何进行 - 请指导一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:55:46.057

我会实现一个 FixedSizeQueue 和 popAll() 数据从 QueueStream 到另一台计算机。可能有它双缓冲，只是为网络/带宽问题提供缓冲。

# java - Android将时间戳附加到文件

> ID：12500187
> 
> 赞同：1
> 
> 时间：2012-09-19T17:49:56.690
> 
> 标签：java, android, android-sdcard

这是漫长而烦人的一天，我有代码可以创建和写入文件，还会在文件末尾附加日期和时间。但我一定是改变了一些东西，我一辈子都看不到我做错了什么。

如果有人能指出我犯的简单错误，那就太好了。

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy / hh-mm-ss");
Date curDate = new Date();
String stringDate = sdf.format(curDate);
String resultLogFile = "resultsFile " + stringDate;
File resultsFile = new File(Environment.getExternalStorageDirectory() + resultLogFile);
if (!resultsFile.exists())
{
    try
    {
        resultsFile.createNewFile();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
}
try
{
    BufferedWriter buf = new BufferedWriter(new FileWriter(resultsFile, true));
    buf.append(writeToFileString);
    buf.newLine();
    buf.close();
}
catch (IOException e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:20:40.037

问题是您的 DateFormat 字符串中的斜线，还是您尝试为当天创建一个文件夹并为 hh-mm-ss 创建一个文件？在这种情况下，您应该去掉斜杠周围的空格并`resultsFile.mkdirs()`在之前调用`resultsFile.createNewFile()`以确保目录`resultsFile dd-MM-yyyy`存在。但是我很确定您不需要目录，因此只需将 DateFormat 中的斜杠替换为其他内容即可。

# javascript - 扩展 Google Maps + D3 示例以添加路径或线

> ID：12500189
> 
> 赞同：3
> 
> 时间：2012-09-19T17:50:02.210
> 
> 标签：javascript, google-maps, d3.js

我正在尝试修改此[Google Maps + D3 示例](http://bl.ocks.org/1125458) 以包含点之间的线。我采用的方法是为每一行添加新的 svg 元素。

我设法创建了一组新的 svg 元素：

```
var markerLink = layer.selectAll(".links")
      .data(links)
      .each(pathTransform) // update existing markers
    .enter().append("line")
      .each(pathTransform)
      .attr("class", "links"); 
```

其中 links 是一个数组数组。每个内部数组有4个值对应每行的开始和结束的纬度和经度：d3行的x1、y1、x2和y2。

路径转换函数：

```
function pathTransform(d) {
    var t, b, l, r, w, h;
    var d1 = new google.maps.LatLng(d[1], d[0]);
    var d2 = new google.maps.LatLng(d[3], d[2]);
    d1 = projection.fromLatLngToDivPixel(d1);
    d2 = projection.fromLatLngToDivPixel(d2);
    if ( d1.y < d2.y ) {
      t = d1.y - 25;
      b = d2.y + 25;
    } else {
      t = d2.y - 25;
      b = d1.y + 25;
    }
    if ( d1.x < d2.x ) {
      l = d1.x - 25;
      r = d2.x + 25;
    } else {
      l = d2.x - 25;
      r = d1.x + 25; 
    }

    return d3.select(this)
        .style("left", l + "px")
        .style("top", t + "px")
        .style("width", (r - l) + "px")
        .style("height", (b - t) + "px");
  } 
```

获取纬度和经度值并返回适当大小和定位的 svg 元素。

按照带有标记 svg 元素的示例，我尝试将一行附加到 markerLink 元素。这就是我遇到麻烦的地方。我不知道如何在每个 svg 中定位线条。

这是一个好方法还是有另一种方法可以将圆圈、路径、线条和标签添加到谷歌地图叠加层？

# magento - 如何在 Magento 中拥有一个没有主键的表？

> ID：12500195
> 
> 赞同：1
> 
> 时间：2012-09-19T17:50:43.257
> 
> 标签：magento

在 Magento 中，您必须创建一个主键才能使您的网格和模块正常工作。但是，我的表中没有主键，也不想创建它。没有主键是否可以使我的模块正常工作？

Magento 给出错误`Column not found: 1054 Unknown column 'main_table.modulename_id' in 'field list'`，因为它在显示网格时没有在表中找到主键 id。

如果没有自动增量，它可以通过： `$this->_isPkAutoIncrement = false;`在模型中完成。主键也有类似的东西吗？

我在网上搜索没有任何运气。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:59:26.437

如果您不为此表使用模型/集合，则可以这样做。如果不是——你不能（没有重写）。请参阅时事通讯队列和 queue_link 表 - queue_link 表没有模型（它具有主键，但如果您愿意以这种方式工作，则可以在没有它的情况下使用您的表），所有事情都在队列资源中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:19:31.443

Magento ORM 的设置方式需要您指定主字段。无论如何，您应该始终拥有主键，我无法想象您想要一个主键的情况，因为它不再适合数据库......

我想你可能想要一个自然/复合键而不是代理键，但我不确定这是否是你的意思？

# php - Zend 中的配置 XML 没有正确扩展

> ID：12500199
> 
> 赞同：1
> 
> 时间：2012-09-19T17:51:02.193
> 
> 标签：php, zend-framework, zend-config, zend-config-xml

我在 Zend_Config_Xml 中有一个问题。我正在尝试扩展配置，但没有成功。现在，我有这个代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns:zf="http://framework.zend.com/xml/zend-config-xml/1.0/">

    <sections>

        <section name="Definición general">
            <configuration>
                <cols value="3" />
                <width value="960" />
            </configuration>

            <abstract>
                <height value="0" />
                <margin>
                    <top value="15" />
                    <right value="0" />
                    <bottom value="0" />
                    <left value="15" />
                </margin>
            </abstract>

            <cols>
                <big name="Columna Ancha - 100% del ancho" extends="abstract">
                    <cols value="3" />
                    <width value="960" />
                </big>
                <slider name="Columna para sliders" zf:extends="abstract">
                    <cols value="2" />
                    <width value="615" />
                </slider>
                <rightSmall name="Columan derecha chica" zf:extends="sections.section.abstract">
                    <cols value="1" />
                    <width value="300" />
                </rightSmall>
                <leftSmall name="Columan izquierda chica" zf:extends="abstract">
                    <cols value="1" />
                    <widht value="300" />
                </leftSmall>
                <centerSmall name="Columna central chica" zf:extends="abstract">
                    <cols value="1" />
                    <width value="300" />
                </centerSmall>
            </cols>
        </section>

        <section name="Sección con medidas especiales" id="video_reverted">
            <configuration>
                <cols value="4" />
                <width value="960" />
            </configuration>
            <cols>
                <video name="Video Principal">
                    <cols value="4" />
                    <width value="960" />
                    <height value="0" />
                    <margin>
                        <top value="15" />
                        <right value="0" />
                        <bottom value="0" />
                        <left value="15" />
                    </margin>
                </video>
            </cols>
        </section>
    </sections>
</schema> 
```

问题是，如果我打印，可以说：

```
$schema = new Zend_Config_Xml(APPLICATION_PATH . '/configs/layout.schema.xml');
print_r($schema->sections->section->{"0"}->col); 
```

它返回：

```
Zend_Config Object
(
    [_allowModifications:protected] => 
    [_index:protected] => 0
    [_count:protected] => 3
    [_data:protected] => Array
        (
            [name] => Columna para sliders
            [cols] => 2
            [width] => 615
        )

    [_skipNextIteration:protected] => 
    [_loadedSection:protected] => 
    [_extends:protected] => Array
        (
        )

    [_loadFileErrorStr:protected] => 
) 
```

所以它没有继承任何东西......我做错了什么？我已经尝试将“抽象”移动到每个列的相同级别，但它也没有工作......

# mongodb - MongoDB FindAndModify 依赖于文档字段/值

> ID：12500201
> 
> 赞同：1
> 
> 时间：2012-09-19T17:51:05.563
> 
> 标签：mongodb, mongodb-.net-driver

我有一个类似的文件：

```
{
     ...
     "LastAccess" : "2012-09-19T05:47:45.982Z", // Time of last document access
     "Expires" : "2012-09-19T06:47:45.982Z", // Time this document expires
     "MaxAge" : 3600, // Seconds to live
} 
```

我相信完成我想要的唯一安全方法是 FindAndModify，所以我的问题是，我想将**LastAccess**更新为当前 UTC 时间（这显然很容易），但是我想通过**LastAccess** +更新**Expires** **MaxAge**，其中 MaxAge 可能因文档而异。

 ****简而言之，是否在一个 FindAndModify 调用中更新文档中的字段（在本例中为 Expires），而它依赖于文档上的另一个字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:17:34.827

您不能在更新查询中使用文档中的现有字段。这里有几个选项。

## 收藏时间：

如果要在文档过期时删除文档，可以使用生存时间收集。在实时集合中，文档会在指定的持续时间后自动删除，这意味着您可以完全消除“Expires”和“MaxAge”字段。

创建生命周期为 30 秒的 TTL 索引：

```
mongos> db.last.ensureIndex({ "LastAccess" : 1 }, { "expireAfterSeconds" : 30 }) 
```

插入我们的文件：

```
mongos> db.last.insert({ "Value" : "No Expiration" })
mongos> db.last.insert({ "Value" : "Expiration", "LastAccess": new Date() })
mongos> db.last.find()
{ "_id" : ObjectId("505d15ac283b060dbc637ec0"), "Value" : "No Expiration" }
{ "_id" : ObjectId("505d15b1283b060dbc637ec1"), "Value" : "Expiration", "LastAccess" : ISODate("2012-09-22T01:34:41.102Z") } 
```

睡眠 15 秒：

```
mongos> sleep(15000)
null
mongos> db.last.find()
{ "_id" : ObjectId("505d15ac283b060dbc637ec0"), "Value" : "No Expiration" }
{ "_id" : ObjectId("505d15b1283b060dbc637ec1"), "Value" : "Expiration", "LastAccess" : ISODate("2012-09-22T01:34:41.102Z") } 
```

更新我们的访问时间：

```
mongos> db.last.update({ "Value" : "Expiration" }, { "$set" : { "LastAccess" : new Date() }})
mongos> sleep(15000)
null 
```

这两个文件仍然存在：

```
mongos> db.last.find()
{ "_id" : ObjectId("505d15ac283b060dbc637ec0"), "Value" : "No Expiration" }
{ "LastAccess" : ISODate("2012-09-22T01:35:07.629Z"), "Value" : "Expiration", "_id" : ObjectId("505d15b1283b060dbc637ec1") } 
```

睡眠 30 秒：

```
mongos> sleep(30000)
null 
```

现在只有我们没有过期的文档：

```
mongos> db.last.find()
{ "_id" : ObjectId("505d15ac283b060dbc637ec0"), "Value" : "No Expiration" } 
```

请注意，删除文档的过程[每分钟仅运行一次](http://docs.mongodb.org/manual/tutorial/expire-data/#constraints)，因此删除某些内容的时间可能在其实际到期日期之后最多一分钟。

## 两个查找和修改调用：

插入具有所需值的文档：

```
mongos> db.last.insert({"Value":"oldvalue","LastAccess":new Date(),"Expires":new Date((new Date()).valueOf() + 3200),"MaxAge":3200,InProgress:false})
mongos> db.last.find()
{ "_id" : ObjectId("505b89292271f63498810600"), "Value" : "oldvalue", "LastAccess" : ISODate("2012-09-20T21:22:49.637Z"), "Expires" : ISODate("2012-09-20T21:22:52.837Z"), "MaxAge" : 3200, "InProgress" : false } 
```

修改 InProgress 字段以警告其他人我们正在查看 MaxAge 字段（如果您不关心在您执行此操作时是否有人更改了 MaxAge 字段，则不需要 InProgress 字段，您只需在这一步）：

```
mongos> doc = db.last.findAndModify({ "query" : { "Value" : "oldvalue", "InProgress" : false }, "update" : { "$set" : { "InProgress" : true } } });
{
    "_id" : ObjectId("505b89292271f63498810600"),
    "Value" : "oldvalue",
    "LastAccess" : ISODate("2012-09-20T21:22:49.637Z"),
    "Expires" : ISODate("2012-09-20T21:22:52.837Z"),
    "MaxAge" : 3200,
    "InProgress" : false
}
mongos> db.last.find()
{ "_id" : ObjectId("505b89292271f63498810600"), "Value" : "oldvalue", "LastAccess" : ISODate("2012-09-20T21:22:49.637Z"), "Expires" : ISODate("2012-09-20T21:22:52.837Z"), "MaxAge" : 3200, "InProgress" : true } 
```

实际上使用新的到期日期更新文档，并将 InProgress 设置为 false 以标记我们不再查看 MaxAge：

```
mongos> db.last.findAndModify({ "query" : { "Value" : "oldvalue", "InProgress" : true }, "update" : { "$set" : { "Value" : "newvalue", "LastAccess" : new Date(), "Expires" : new Date((new Date()).valueOf() + doc.MaxAge), "InProgress" : false } }, "new" : true });
{
    "_id" : ObjectId("505b89292271f63498810600"),
    "Value" : "newvalue",
    "LastAccess" : ISODate("2012-09-20T21:23:29.058Z"),
    "Expires" : ISODate("2012-09-20T21:23:32.258Z"),
    "MaxAge" : 3200,
    "InProgress" : false
} 
```

## db.eval():

[db.eval() 也可以在这里使用，但出于性能原因](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Limitationsof{{eval}})应避免使用****

# php - 将 PHP 添加到静态站点。不确定我的工作流程是否正确

> ID：12500207
> 
> 赞同：3
> 
> 时间：2012-09-19T17:51:32.597
> 
> 标签：php, mysql, html

让我们试着把我的问题的标题解释得更简洁：我基本上是从头开始设计一个静态 HTML 网站。这里没什么好担心的。

关键是我正在尝试包含一些链接，这些链接将从数据库中检索一些项目（产品库存）（因此该网站将不再那么“静态”），因为有超过 300 种产品并创建每个人都有一个html是不可行的。

在谷歌搜索并阅读了几天后，我想出的“最简单”的解决方案是使用 PHP 和 MySQL。再次，没有什么可担心的。我只是花时间阅读文档并继续前进。

我的问题与整合两个世界的正确工作流程有关。让我们在代码中看看我的想法：

这是您可以浏览某些产品的页面的一个示意图示例（例如：product.html）：

```
<html>
<head>
<title>My Site - These are our products</title>
</head>
<body>
    <!--Site goes here-->
    <a href="product_search_by_name.php">Search by name</a>
    <a href="product_search_by_color.php">Search by color</a>
    <!--rest of site goes here-->
</body>

</html> 
```

链接在哪里

```
product_search_by_name.php
product_search_by_color.php 
```

实际上是同一页面（product.html）的修改克隆。也就是说，**保持相同的 html 代码**以及**嵌入其中的 .php 代码**，因为我希望将数据库结果显示到同一页面上的**div**中，并保持完全相同的布局。

那么，如果我想保持整个网站的外观，我这样做对吗？我从基地绝对错了，应该重新开始吗？我应该放弃并在 Star*ucks 上卖星冰乐吗？

作为我想要实现的想法的示例如下：[http://www.w3schools.com/tags/default.asp](http://www.w3schools.com/tags/default.asp)（当您单击左侧菜单栏时，中心区域会随内容更新）。顺便说一句，他们是在该网站上使用 AJAX 来更新中心区域，还是我误解了 AJAX 的用途？

我确定我遗漏了一些东西，但是我很困惑无法将绵羊和山羊分开，所以我非常感谢您可以给我的任何提示（以及互联网上的其他文档以供阅读）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:10:14.837

有两种主要方法可以将静态 HTML 合并或迁移到动态 HTML（PHP、PERL 等）。

(1) 一种是让大部分比赛都是 HTML，而像库存这样的东西是动态的。

```
<html>
<head>
<title>My Site - These are our products</title>
</head>
<body>
  <h1>My Site - These are our products</h1>

  <?php
  // php code to retrieve links
  ?>

</body>
</html> 
```

(2) 拥有一个完整的 PHP 站点。

```
<?php
echo "<html>" . "\n";
echo "<head>";
echo "My Site - These are our products"
echo "</head>";

echo "<body>" . "\n";
  // php code to retrieve links
echo "</body>" . "\n";

echo "</html>" . "\n";
?> 
```

许多开发人员从合并 HTML 和 PHP 开始。

我建议学习如何做一个非常简单但完整的 php 站点，连接到数据库，使用 SQL 查询检索一些记录，将它们显示为只读文本或链接，稍后您可能会更改为其他 HTML 加 PHP 方式的做事。

有几个编辑器和工具可以帮助使用 PHP 进行开发，特别是通过查找 PHP 函数，或者只是突出显示 HTML 标记。windowze 中的 Scintilla (Linux) 或 Notepad++，它是一个非常简单但有用的工具。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:01:27.063

好吧，如果你想让它使用 Ajax 来实现......

您可能想要执行以下操作。

1.  如您所说，创建两个文件，这些文件不包含在 HTML 文件中。
2.  创建一个 JavaScript 函数来调用文件，您可以使用 jQuery api 链接到 php。[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)或[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)
3.  链接查询按钮的点击调用JavaScript函数，并将从php获取的html添加到您想要的标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:01:44.477

您可以创建一个 index.php 页面并将您的 html 代码放入其中。看起来像这样

```
<html>
<body>
<!--- links goes here -->
<a href="product_search_by_name.php">Search Products</a>

</body>
</html> 
```

如果您要从数据库中检索产品，并且要为产品创建多个链接，请在您的 function.php 中创建一个函数，该函数从数据库中提取所有产品名称。现在将此函数添加到您的 index.php

```
index.php

<?php include ('functions.php')?>
<html>
<body>
<h3>Product List</h3>
<a href="<?productlist()?>">product name</a>
</body>
</html> 
```

始终将 html 嵌入到 php 文件中。不要在 html 文件中嵌入 php。文件应具有 .php 扩展名。

# java - 如何通过拖动角来调整合成的大小

> ID：12500208
> 
> 赞同：1
> 
> 时间：2012-09-19T17:51:36.567
> 
> 标签：java, resize, swt, composite

我正在使用 SWT，我希望能够通过拖动复合材料的角来调整复合材料的大小，就像调整外壳大小一样。我敢肯定有人已经实施了一个很好的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T18:28:18.247

我认为您正在寻找的可以用`org.eclipse.swt.widgets.Tracker`

这是示例工作代码：

```
public static void main(String[] args) {

    Display display = new Display();
    final Shell shell = new Shell(display);
    shell.open();

    final Composite b = new Composite(shell, SWT.NONE);
    b.setBounds(20, 20, 80, 80);
    b.setBackground(display.getSystemColor(SWT.COLOR_BLUE));

    b.addListener(SWT.MouseDown, new Listener() {

      public void handleEvent(Event e) {

        Tracker tracker = new Tracker(b.getParent(), SWT.RESIZE);
        tracker.setStippled(true);
        Rectangle rect = b.getBounds();
        tracker.setRectangles(new Rectangle[] { rect });
        if (tracker.open()) {
          Rectangle after = tracker.getRectangles()[0];
          b.setBounds(after);
        }
        tracker.dispose();
      }
    });
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch())
        display.sleep();
    }
    display.dispose();
  } 
```

# c++ - 有没有办法在不分配变量的情况下将字符串连接到数字？

> ID：12500211
> 
> 赞同：0
> 
> 时间：2012-09-19T17:51:38.880
> 
> 标签：c++, macros

我需要一个使用整数的宏值的字符串。但它在任何函数之外，所以我不想创建一个变量。我在#pragma 评论中使用它。

所以是这样的：

```
#define num 7
#pragma comment(lib, "string" + num) 
```

这将结合字符串和 num 使其成为 (#pragma comment(lib, "string7")

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:53:50.883

你想要做的叫做*stringification*：

```
#define stringify_1(x...)     #x
#define stringify(x...)       stringify_1(x)

#define NUM 7

char *p = stringify(NUM); 
```

这是受Linux 内核助手中的`__stringify` 宏 in启发的。`include/linux/stringify.h`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:08:45.623

我的意图并不完全清楚，这听起来像是一些预处理器功能： http: [//gcc.gnu.org/onlinedocs/cpp/Stringification.html#Stringification](http://gcc.gnu.org/onlinedocs/cpp/Stringification.html#Stringification)

从该示例中，您会发现这个简洁的解释似乎是您想要的。

```
#define xstr(s) str(s)
#define str(s) #s
#define foo 4
str (foo)
      ==> "foo"
xstr (foo)
      ==> xstr (4)
      ==> str (4)
      ==> "4" 
```

所以你可以做这样的事情：

```
#define xstr(s) str(s)
#define str(s) #s
#define num 7
#pragma comment(lib, "string" xstr(num)) 
```

如果它在实际代码中，正常的字符串合并规则应该会很好，但我不确定字符串是否会自动合并到编译指示中。这可能取决于实现。

# php - htaccess 使用参数重定向所有页面

> ID：12500216
> 
> 赞同：-3
> 
> 时间：2012-09-19T17:52:03.103
> 
> 标签：php, .htaccess

我需要使用查询字符串和页面作为参数将我网站上的所有页面重定向到 home.php

例子：

```
 www.site.com/abcd
-> www.site.com/home.php?page=abcd

   www.site.com/abcd/file.php
-> www.site.com/home.php?page=abcd/file.php

   www.site.com/file.php?a=b&c=d
-> www.site.com/home.php?page=file.php&args="a=b&c=d" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:54:50.130

你可以把它放在你的 .htaccess 文件中：

```
RewriteEngine On
RewriteRule ^(.+)$ home.php?page=$1 [QSA,L] 
```

这将做你想做的事，除了传递的参数，它们将以原始形式显示：

```
www.site.com/file.php?a=b&c=d -> www.site.com/home.php?page=file.php&a=b&c=d 
```

# github - GitHub wiki 和 Markdown

> ID：12500217
> 
> 赞同：4
> 
> 时间：2012-09-19T17:52:04.320
> 
> 标签：github, wiki, markdown

阅读 GitHub wiki，我看到它们支持包括 MarkDown 在内的几种轻量级标记语言，但我仍然对 Markdown 的状态和功能以及 GitHub 使用的版本有点困惑。

**Q1。**在这个链接中： [GitHub 风格的 Markdown (GFM) 简介](http://github.github.com/github-flavored-markdown/)，GitHub 说他们使用`GFM`一种特殊类型的 Markdown ( `MD`) 来表示消息、问题和评论。他们是否也在他们的 Wiki 上使用`GFM`或经常使用？`MD`

**Q2**原来的 Markdown 还在开发中吗？

**Q3****原版**Markdown是否支持特定于编程语言的语法高亮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:40:47.527

> 他们是否也在 Wiki 上使用 GFM 或常规 MD？

并非整个**[GitHub Flavored Markdown](http://github.github.com/github-flavored-markdown/)**都可以在 wiki 页面中使用。

例如，在 wiki 中，`#123`不会从当前存储库自动链接到 issue 123。但是，在拉取请求或内联评论中，这是可行的。

> 原始的 Markdown 是否仍在开发中？

从来没听说过。最新的正式发布日期为 2004 年 12 月 17 日。

为了解决一些安全问题，代码已由 StackOverflow 团队分叉并托管在**[derobins/wmd](https://github.com/derobins/wmd)**。它现在已被弃用，取而代之的是**[PageDown](https://code.google.com/p/pagedown/)**。GitHub 依赖于**[Sundown](https://github.com/vmg/sundown)**，这是基于 Natacha Porte 的 UpSkirt 库对 MarkDown 的原生重新实现。

> 原始 Markdown 是否支持特定于编程语言的语法突出显示？

不，这甚至可能被认为是与 MarkDown 哲学的边界。

该网站确实声明*“Markdown 旨在尽可能地易于阅读和编写。然而，可读性是最重要的。Markdown 格式的文档应该可以按原样发布文本，看起来没有被标记或格式说明。”*

GitHub 通过使用**[Pygments](http://pygments.org/)**来处理语法高亮。

# r - 带有时间序列和多样条曲线的ggplot2线图

> ID：12500218
> 
> 赞同：0
> 
> 时间：2012-09-19T17:52:17.580
> 
> 标签：r, ggplot2, lines, spline, melt

这个问题的主题很简单，但让我抓狂：1.如何使用`melt()` 2.如何处理单个图像中的多行？

这是我的原始数据：

```
a   4.17125 41.33875    29.674375   8.551875    5.5
b   4.101875    29.49875    50.191875   13.780625   4.90375
c   3.1575  29.621875   78.411875   25.174375   7.8012 
```

Q1：我从这篇文章中学到了[Plotting two variables as lines using ggplot2 on the same graph](https://stackoverflow.com/questions/3777174/plotting-two-variables-as-lines-using-ggplot2)以了解如何为多变量绘制多条线，就像这样： ![在此处输入图像描述](../Images/62de881f6660bf7e0b336f71e2e61f9b.png)

下面的代码可以得到上面的情节。但是，x 轴确实是时间序列。

```
df <- read.delim("~/Desktop/df.b", header=F)
colnames(df)<-c("sample",0,15,30,60,120)
df2<-melt(df,id="sample")
ggplot(data = df2, aes(x=variable, y= value, group = sample, colour=sample)) + geom_line() + geom_point() 
```

我希望它可以将**0 15 30 60 120 视为实数**来显示时间序列，而不是 name_characteristics。即使尝试过这个，我也失败了。

```
row.names(df)<-df$sample
df<-df[,-1]
df<-as.matrix(df)
df2 <- data.frame(sample = factor(rep(row.names(df),each=5)), Time = factor(rep(c(0,15,30,60,120),3)),Values = c(df[1,],df[2,],df[3,]))
ggplot(data = df2, aes(x=Time, y= Values, group = sample, colour=sample)) 
        + geom_line() 
        + geom_point() 
```

期待您的帮助。

Q2：我了解到下面的脚本可以为单行添加 spline() 函数，我希望对单张图像中的**所有三行都应用 spline() 怎么办？**

```
n <-10
d <- data.frame(x =1:n, y = rnorm(n))
ggplot(d,aes(x,y))+ geom_point()+geom_line(data=data.frame(spline(d, n=n*10))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:03:52.950

您的`variable`列是一个因素（您可以通过调用来验证`str(df2)`）。只需将其转换回数字：

```
df2$variable <- as.numeric(as.character(df2$variable)) 
```

对于您的其他问题，您可能想坚持使用`geom_smooth`or `stat_smooth`，如下所示：

```
p <- ggplot(data = df2, aes(x=variable, y= value, group = sample, colour=sample)) + 
      geom_line() + 
      geom_point()

library(splines)
p + geom_smooth(aes(group = sample),method = "lm",formula = y~bs(x),se = FALSE) 
```

这给了我这样的东西：

![在此处输入图像描述](../Images/fcbc72338063fc39def93dcb0d500a77.png)

# assembly - 任何多平台汇编程序编程（Mac+Win+Nix）的教程？

> ID：12500222
> 
> 赞同：-1
> 
> 时间：2012-09-19T17:52:51.370
> 
> 标签：assembly, multiplatform

我想学习汇编，但我真的很看重多平台代码，而且我见过的大多数汇编语言和教程只迎合一种特定的汇编子语言（MASM 或 TASM 或 YASM）和一种特定的操作系统（Mac 或Windows 或 Linux）。

是否有适用于 Mac OS X、Windows 和 Linux 的汇编语言和教程？我怀疑 GCC 可以识别一些 X86 汇编器格式，并且 GCC 是一种多平台编译器——这种语言会被称为什么，是否有教程？

也发布在[r/programming](http://www.reddit.com/r/learnprogramming/comments/105a1p/any_tutorials_for_multiplatform_assembler/)上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:05:40.247

对于您的需求，请参见

> nasm (http://www.nasm.us)

以及 nasm 的一些好的“起点”

1.  [http://leto.net/writing/nasm.php](http://leto.net/writing/nasm.php)
2.  [http://docs.cs.up.ac.za/programming/asm/derick_tut](http://docs.cs.up.ac.za/programming/asm/derick_tut)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:41:30.873

**扩展无聊的长答案**

恐怕每个汇编程序都有自己的陷阱。

我开始了我的自定义宠物项目编程语言（转换为“C”，不生成二进制代码），并且想要制作一个完整的编译器，所以我对您提出的同一主题进行了一些快速研究。

例如，MASM 和 NASM 都针对 x86 处理器，但是，汇编器语法不同。

您还可以考虑您正在使用什么操作系统（而不是什么处理器），您可能必须与之交互。

一些汇编程序书籍是从非常电子化的角度编写的，这使得学习汇编程序变得非常困难。

**先决条件**

在回到汇编程序之前，您可能想学习一些主题。您可能已经知道这些主题的大部分内容，但是，最好再读一读。

(1) (Re) 了解不同的数字表示法，如何在不使用计算器的情况下手动将十进制数转换为十六进制、八进制和二进制表示法。

(2) (Re) 了解字符的存储方式，ASCI & EBDIC & MAC，您可能需要打印的 ASCII 字符图表。

(3) (Re) 了解布尔&位、逻辑、位运算、“AND”、“OR”、“XOR”

(4) (Re) 了解内存存储大小。Giga、Mega、Byte、Word、QWord 或 LongWord。

(5) (Re) 了解有符号整数和无符号整数的区别。以及如何在内存中存储不同的整数。

**快速简短的回答**

了解更多使用的 3 种架构和操作系统的基础知识

(1) 学习单个 CPU 的基础知识，而不是全部知识，例如 x86 和 Windows 中的 NASM。

(2) 继续使用其他架构，例如 x86 和 Linux 中的 NASM。

(3) 继续其他架构，例如 MacIntosh。

(4) 学习在前 2 个目标中完成简单但等效的任务。

(5) 在第三个目标中学习做同样的事情。

(6) 检查操作系统调用，添加 2 个数字并将结果存储在任何 CPU 中的寄存器中并不困难。但是，调用在控制台窗口或 GUI 窗口中显示消息的系统调用可能会改变。

(7) 大多数汇编程序被称为“宏汇编程序”，允许使用单行代码转换为多行 opf 代码。将它们用于单个宏，该宏在多个汇编程序中读取相同，但在每个 CPU 中翻译不同。

(8) 给组装班的 kiteh，一个金枪鱼罐头。

干杯。

# php - 从 facebook API 标记图片：我认为某些 Array 'Key' 或 Json Encode 是原因

> ID：12500223
> 
> 赞同：0
> 
> 时间：2012-09-19T17:52:56.127
> 
> 标签：php, arrays, facebook-graph-api, json, facebook-wall

我正在尝试通过图形 API 在 facebook 上发布图片，但我无法发布。我收到这个错误

> Array ( [error] => Array ( [message] => (#100) Invalid parameter [type] => OAuthException [code] => 100 ) )

这是我的代码

```
$sqls= mysql_query($sql);
    while($sqlr = mysql_fetch_array( $sqls, MYSQL_NUM ))
 {
     $users[]= $sqlr['regidfriendsid'];
 }

 for ($t=0 ; $t<3;$t++)
 {

$tag[$t] = array( 'tag_uid' => ($users[$t]), 'x' => (20+$x), 'y' => (85+$y) );

$x=$x+200;
$z++;
        if ($z%4==0)
        {
        $y=$y+178;
        $x=0;

        }
 }

$tag = array($tag[1], $tag[2], $tag[3]);    

$tags = json_encode($tag);
print_r($tags);
// end loop for tags

//upload photo
$file= 'styleimage/save_as_this_name.jpg';
$args = array(
   'message' => 'My Stylish friends',
    'tags' => $tags, 
);
print_r($args);
$args[basename($file)] = '@' . realpath($file);
$ch = curl_init();
$url = 'https://graph.facebook.com/me/photos?access_token='.$_SESSION['access_token'];
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
$data = curl_exec($ch);
//returns the photo id
print_r(json_decode($data,true)); 
```

输出

```
 [{"tag_uid":"100003656759153","x":220,"y":85},{"tag_uid":"100004078326378","x":420,"y":85},{"tag_uid":"100000034798548","x":620,"y":85}]@@@@@Array ( [message] => My Stylish friends [tags] => [{"tag_uid":"100003656759153","x":220,"y":85},{"tag_uid":"100004078326378","x":420,"y":85},{"tag_uid":"100000034798548","x":620,"y":85}] ) 

--Before posting the actual content of tags . Now trying to post ---

    Array ( [error] => Array ( [message] => (#100) Invalid parameter [type] => OAuthException [code] => 100 ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:44:00.530

问题是您要添加标签的 x,y 坐标。

x 和 y 应该是图片左侧（对于 x ）/顶部（对于 y ）边缘的**百分比偏移量**，即

x 和 y 应该在 0 - 100 之间。

[Facebook 文档](http://developers.facebook.com/docs/reference/api/photo/)

你可以使用`rand()`函数

```
x = rand ( 0, 100 );
y = rand ( 0, 100 ); 
```

可能这会帮助你。:)

# javascript - Javascript 将对象动态推送到数组中，这在 Firefox/IE 中不起作用

> ID：12500228
> 
> 赞同：0
> 
> 时间：2012-09-19T17:53:08.640
> 
> 标签：javascript, jquery, object, datepicker, push

这有点涉及，我会尽量说清楚。我还将首先说这在 Chrome 和更高版本的 IE 中按预期工作，但在 Firefox 或更旧的 IE 中没有，这是我问题的主要内容。

我已将 jquery datepicker 日历添加到具有事件列表的页面中。每个事件都被赋予了名称，表明它们发生的日期，并且都具有 css 类“列表”。我创建了一个数组（列表），它使用 getElementsByClassName("listing") 获取所有这些事件。然后我创建了另一个数组（事件）并遍历“列表”中的所有元素，将一个对象推送到为 datepicker 格式化的新数组的每个元素中。然后我在 datepicker 'beforeShowDay' 函数中使用这个数组（事件）来突出显示/链接所有有事件的日期。

同样，这在 Chrome 和较新的 IE 中效果很好，但在 Firefox（日期选择器显示但没有突出显示的日期）或较旧的 IE 版本（日期选择器日历不显示）中无效。关于如何让它在所有浏览器上工作的任何想法？

这是我的代码：

```
$(document).ready(function() {

    var listing = document.getElementsByClassName("listing");
    var events = new Array();

    for (var i = 0; i < listing.length; i++) {
        // something wrong with this line...?
        events.push({Title : listing[i].getAttribute("name"), Date: new Date(listing[i].getAttribute("name"))});
    }
    $("#calendar").datepicker({
        beforeShowDay: function(date) {
            var result = [false, '', null];
            var matching = $.grep(events, function(event) {
                return event.Date.valueOf() === date.valueOf();
            });

            if (matching.length) {
                result = [true, 'highlight', null];
            }
            return result;
        },
        onSelect: function(dateText) {
            var selectedDate = new Date(dateText);
        var day = selectedDate.getDate();
        var month = selectedDate.getMonth() + 1;
        var year = selectedDate.getFullYear();
        location.hash = "#" + month + "-" + day + "-" + year;
        //alert(month + "-" + day + "-" + year);
        }
    });

}); 
```

我注意到的一件事是，如果我用每个值的显式定义替换生成“事件”数组的 for 循环，它将在 Firefox 中工作，但仍然不能在较旧的 IE 中工作。

换句话说，替换这个：

```
 for (var i = 0; i < listing.length; i++) {
        events.push({Title : listing[i].getAttribute("name"), Date: new Date(listing[i].getAttribute("name"))});
    }; 
```

有了这个：

```
 var events = [ 
        { Title: "Event 1", Date: new Date("9/12/2012") }, 
        { Title: "Event 2", Date: new Date("9/25/2012") }, 
        { Title: "Event 3", Date: new Date("9/29/2012") }
    ]; 
```

在此先感谢您的帮助，在任何地方都找不到答案。

* * *

编辑*：
更改`document.getElementsByClassName("listing");`为`$(".listing");`现在在所有版本的 IE 中都能正常工作（`getElementsByClassName`在 IE<9 中不起作用）。FF 中仍然没有突出显示的日期。我在 FF 控制台中看到的唯一错误与不相关的 CSS 和 prettyPhoto/slideshow js 相关，不认为这些与这个问题有关..？

* * *

编辑*：
不确定我是否应该替换原始问题的内容或附加，如果我做的时间太长，请道歉......继续尝试不同的事情，仍然没有运气。除 FF 外，所有浏览器中的一切都运行良好，日历弹出正常，但没有突出显示/链接事件日期。我尝试显式填充“事件”数组，而不是迭代地推入它，这很好。似乎迭代推送部分在 FF 中不起作用。

换句话说，替换这个：

```
 var events = [];
    for (var i = 0; i < listing.length; i++) {
        events.push({Title : listing[i].getAttribute("name"), Date: new Date(listing[i].getAttribute("name"))});
    } 
```

有了这个：

```
 var events = [ 
        { Title: "Event 1", Date: new Date("9/20/2012") }, 
        { Title: "Event 2", Date: new Date("9/27/2012") }, 
        { Title: "Event 3", Date: new Date("10/4/2012") }
    ]; 
```

在 FF 中运行良好。有人看到上面的 for 循环有问题吗？再次感谢您的任何见解...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:50:14.787

好的，花了很多摆弄，但发现了问题。最终很愚蠢，但现在我知道了。显然，当你用破折号扔`new Date()`它时，FF 有问题，但它适用于斜线。所以我的主要错误（我应该在原始帖子中更具体，道歉）是在每个事件元素的名称标签中使用格式“MM-DD-YYYY”。我将每个事件元素的名称标签更改为“MM/DD/YYYY”格式，更新了链接功能以反映这一点，现在所有测试浏览器（Chrome、IE 9、IE<9、FF）似乎都运行良好）。

感谢您的所有建议，绝对帮助我找到最终解决方案。

# c++ - 钻石继承最低基类构造函数

> ID：12500230
> 
> 赞同：9
> 
> 时间：2012-09-19T17:53:19.753
> 
> 标签：c++, constructor, diamond-problem

代码如下：

### ****编码 ：****

```
`#include <iostream>

using namespace std;

class Animal{
   int a;

    public:
    Animal(int a) : a(a){}
    int geta(){return a;}
};

class Bird : virtual public Animal{
    string b;
    public:
    Bird(int a , string b) : Animal(a) , b(b){}
};

class Fish : virtual public Animal{
    int f;
    public:
    Fish(int a , int f) : Animal(a) , f(f){}
};

class Unknown : public Bird, public Fish{
    char u;
    public:
    Unknown(int a , int f , string b , char u )
     : Bird(a , b) , Fish(a , f) , u(u){}  //Problem
};` 
```

 **### **问题：**

1.）如果 Unknown 类被实例化，我将如何初始化所有超类？由于只有一个 Animal 实例将被创建，我怎样才能避免 mysef 不得不调用它的构造函数两次？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T17:55:52.437

最派生类初始化任何虚拟基类。在您的类层次结构中，`Unknown`必须构造虚拟`Animal`基类（例如通过添加`Animal(a)`到其初始化列表中）。

在构造`Unknown`对象时，既`Fish`不会也`Bird`不会调用`Animal`构造函数。 `Unknown`将调用`Animal`虚拟基础的构造函数。**

# ruby-on-rails - 特殊问题：简单的 Rspec 规范在 Linux 上通过，但在 Mac OS X 上不通过

> ID：12500231
> 
> 赞同：0
> 
> 时间：2012-09-19T17:53:26.290
> 
> 标签：ruby-on-rails, macos, ubuntu, rspec

我有以下规格：

```
it 'should find and associate thumbnail and video for article with an episode with the first alpha-numerically matching files it finds' do

  @article = FactoryGirl.create(:pending_assets_article, id: 1)
  @episode1 = FactoryGirl.create(:episode, topic_id: @topic.id, article_id: @article.id, position: 1)
  @article.video.should be_nil
  @article.thumbnail.image.should be_blank
  @article.state.should == 'pending assets'

  run_rake_task

  Delayed::Job.count.should == 2
...
end 
```

奇怪的是，这个规范在 Ubuntu 中通过得很好，但在 Mac OS X Lion 中却失败了，比如`expected 2, got 0`.

是什么赋予了？？

我很乐意添加更多周边代码以提供更多上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:58:04.240

你是如何调用 rake 任务的？如果您要使用另一个进程，您可能会遇到数据存储中的事务边界。

理想情况下，您应该在 rspec 上下文中获取/执行 rake 任务：

```
require 'rake'
Rake::Task[name].invoke 
```

例如，如果您将 postgres 作为 DelayedJob 队列的后端运行，并在 rspec 中使用数据的事务回滚，则您在一个事务中拥有测试数据以进行测试设置，然后转至 rake 任务，该任务会更改事务之外的数据，返回测试和原始交易，并不能“看到”数据。

此外，与查询数据存储中队列的大小相比，使用 Mock 和期望验证您的代码是否将作业排入 DelayedJob 可能更简单。

# iphone - 我在 NSString 中有公式...如何评估它

> ID：12500232
> 
> 赞同：2
> 
> 时间：2012-09-19T17:53:36.917
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [什么是快速 C 或 Objective-C 数学解析器？](https://stackoverflow.com/questions/4892152/what-is-a-fast-c-or-objective-c-math-parser)

我有一个创建一个将公式作为 NSString 的函数。而且我必须替换字符串中的一些东西并在执行公式后获取值。我怎样才能做到这一点...

例如：NSString *formulaString = @"((A/B)-1)*100";

现在我可以将 A 替换为 20，将 B 替换为 10。但是如何将 ((20/10)-1)*100 的计算值替换为 100

谢谢，本

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T17:58:41.060

你必须建立表达式计算器。我知道的一个开源目标 C 库是[GCMathParser](http://www.apptree.net/parser.htm)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T18:14:51.377

如果您的公式不是太复杂，您可以使用`NSExpression`：

```
NSExpression *e = [NSExpression expressionWithFormat:@"((20/10)-1)*100"];
NSNumber *result = [e expressionValueWithObject:nil context:nil];
NSLog(@"%@", result);
// Output: 100 
```

这甚至适用于某些功能，例如`sqrt`, `exp`, ... 请参阅`NSExpression`文档以获取支持的功能列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T18:00:31.047

您将需要编写一个数学表达式解析器，它接受`NSString *`输入并产生数字输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T18:04:10.600

您可以通过此方法替换字符

```
NSString *formulaString = @"((A/B)-1)*100";

NSString *modifiedFormulaString = [formulaString stringByReplacingOccurrencesOfString:@"A" withString:@"10"];

modifiedFormulaString = [modifiedFormulaString stringByReplacingOccurrencesOfString:@"B" withString:@"10"]; 
```

但是要计算 dat，你需要使用一些解析器来解析它。

# python - 将列表中的项目写入多个文件 - Python

> ID：12500234
> 
> 赞同：0
> 
> 时间：2012-09-19T17:53:47.167
> 
> 标签：python, list

我正在尝试将列表中的项目写入多个文件。我想根据日期命名每个文件。请记住，我知道我不应该使用正则表达式来抓取 HTML，但目前它对我很有帮助。原谅我的无知，但我是初学者。此抓取仅用于学术目的。先感谢您。

```
 from urllib import urlopen
    import re

    webpage = urlopen('x').read()
    date = re.compile('[0-9]{2}-[a-zA-Z]{3}-[0-9]{4}')
    article =  re.compile('<span>.*<div>', re.DOTALL)
    findDate = re.findall(patFinderDate,webpage)
    findArticle = re.findall(patFinderArticle,webpage)

    listIterator = []
    listIterator[:] = range(0,1000)

    for i in listIterator:
        filename = findDate[i]
        with open(filename,"w") as f:
            f.write(i)
            f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:31:30.920

如果你确定你有和文章一样多的日期，你可以大致重写你的代码如下：

```
from urllib import urlopen
import re

webpage = urlopen('x').read()
date_p = re.compile('[0-9]{2}-[a-zA-Z]{3}-[0-9]{4}')
article_p =  re.compile('<span>.*<div>', re.DOTALL)
allDates = re.findall(date_p,webpage)
allArticles = re.findall(article_p,webpage)

for date, article in zip(allDates, allArticles):
    with open(date,"w") as f:
        f.write(article) 
```

该`zip()`函数将两个可迭代对象“压缩”为一个，并在每次迭代时返回一个 2 元组 - 这就是您需要检查日期是否与文章一样多的原因

# java - 使用 AspectJ 为 Mock Objects 创建一个“记录和播放”实用程序

> ID：12500238
> 
> 赞同：-1
> 
> 时间：2012-09-19T17:53:59.757
> 
> 标签：java, aspectj, testng, mockito

我想知道是否有人有一个很好的“记录和播放”代码示例，我可以在其中记录某些方法的调用/响应，然后使用它来构建模拟对象进行测试。

我要解决的具体问题是在测试依赖于外部 Web 服务的代码时。我希望能够记录对调用的响应，例如说（以 Twitter 为例）：

1.  创建推文
2.  回复推文
3.  获取用户时间线

然后，当我测试时，我希望能够拦截调用堆栈并使用较早的响应来构建响应。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:05:56.123

有人问我，这可以通过Mockito 中的自定义[答案功能实现。](http://docs.mockito.googlecode.com/hg/latest/org/mockito/stubbing/Answer.html)尽管如此，虽然可行，但据我所知，没有人致力于它并将其公开/开源。

干杯

# mysql - MYSQL 使用主键对多个表求和

> ID：12500239
> 
> 赞同：4
> 
> 时间：2012-09-19T17:54:01.520
> 
> 标签：mysql, sql, sum, average

MySQL 对我来说仍然很新，所以我很难找到这个特定问题的答案。

我有大约 60 个供应商表，我想将它们加入到一张表中。我们的很多供应商都携带相同的物品，所以我想将所有物品添加到一张桌子上，而那些具有相同 sku 的供应商将数量加在一起。我还想插入更大的成本和价格，并将其四舍五入到 0.99，但如果它变得太复杂或无法实现，我现在将坚持只使用 sku 和数量。我想从 2 个表开始，直到我弄明白，然后一旦我掌握了解决方案，我就可以处理所有这些表。这是 2 个表的示例：

```
Table A (SKU will be the primary key)
SKU     Vendor A SKU         Cost     Price      QTY
1000        VA100            49.99    62.99      10
1001        VA101            64.44    81.99      6
1002        VA102            37.67    47.99      24
1003        VA103            28.33    35.99      16
1004        VA104            26.33    35.99      18

Table B (SKU will be the primary key)

SKU     Vendor B SKU         Cost    Price       QTY
1000        VB100            49.99   62.95        21
1001        VB101            64.44   81.95        16
5001        VB501            32.67   40.95         4
5002        VB502            88.44   110.95      12
5003        VB503            87.21   109.95       2 
```

所以最终结果将如下所示

```
SKU     Vendor A SKU     Vendor B SKU      Cost           Price         QTY
1000        VA100               VB100      49.99         62.99          31 <-- Sum
1001        VA101               VB101      64.44         81.99          22 <-- Sum
1002        VA102                          37.67         47.99          24
1003        VA103                          28.33         35.99          16
1004        VA104                          26.33         35.99          18
5001                            VB501      32.67         40.95           4
5002                            VB502      88.44         110.95         12
5003                            VB503      87.21         109.95          2 
```

如您所见，前 2 个将数量加在一起，以及插入的成本和价格中的较大者。我尝试了以下变化：

```
Create Table MASTER
SELECT TableA.sku,TableA.VendorA_sku,TableA.cost,TableA.price,TableA.qty
UNION ALL
SELECT TableB.sku,TableB.VendorB_sku,TableB.cost,TableB.price,TableB.qty
GROUP BY sku 
```

和变体：

```
Create Table MASTER
AS SELECT TableA.sku,TableA.VendorA_sku,TableA.cost,TableA.price,SUM(TableA.qty+TableB.qty)
GROUP BY sku 
```

我尝试了许多不同类型的联接和联合，但似乎无法得到任何符合我需要的东西，我也没有玩弄成本和价格的增加和四舍五入，因为我无法过去在重复的主键中添加数量。我必须每天使用大约 60 张桌子和大约 600k sku 进行此操作，因此将不胜感激任何帮助。

（**如果我没有正确输入，我也提前道歉，因为我是这些类型的论坛的新手**）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:21:14.273

以下内容应该适合您：

```
select sku,
  min(case when Type = 'VendorA' THEN Vendor END) VendorA_SKU,
  min(case when Type = 'VendorB' THEN Vendor END) VendorB_SKU,
  cost,  
  price, 
  sum(QTY) Total
from
(
  select sku, VendorA_SKU Vendor, cost, price, qty, 'VendorA' Type
  from tablea
  union all 
  select sku, VendorB_SKU, cost, price, qty, 'VendorB' Type
  from tableb
) x
group by sku 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/a593f/11)

有几件事要决定，如果价值不同，您是否想要`AVG()`或`MAX()`成本和价格，或者您想要返回哪一个？如果你这样做，那么你将使用以下内容返回`MAX()`：

```
select sku,
  min(case when Type = 'VendorA' THEN Vendor END) VendorA_SKU,
  min(case when Type = 'VendorB' THEN Vendor END) VendorB_SKU,
  max(cost) MaxCost,
  max(price) MaxPrice,
  sum(QTY) Total
from
(
  select sku, VendorA_SKU Vendor, cost, price, qty, 'VendorA' Type
  from tablea
  union all 
  select sku, VendorB_SKU, cost, price, qty, 'VendorB' Type
  from tableb
) x
group by sku 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/a593f/20)

# java - 为Android中的每个电话号码添加1位数字

> ID：12500244
> 
> 赞同：1
> 
> 时间：2012-09-19T17:54:12.487
> 
> 标签：java, android, sqlite, cursor, contactscontract

我想创建一个函数来编辑我在 android 的通讯录中的每个号码，但是我发现的所有示例都只编辑 1 个联系人，所以如果联系人有超过 1 个号码，他们将不会被编辑。

例如：

艾米有这个数字：

```
093456432 - cellphone
2345678 - house
6789504 - work
34567832 - other 
```

并且该应用程序将在第二个位置再添加 1 个数字，例如“8”，因此更改将导致如下所示：

```
0893456432 - cellphone
28345678 - house
68789504 - work
384567832 - other 
```

这需要发生在我通讯录中的每个联系人身上。

已经尝试过这样的事情（烧了一个号码来替换原来的号码只是为了测试），但只编辑 TYPE_HOME 这是电话号码，我想知道我该怎么做，如果有一个全局 TYPE 我可以编辑任意数量的联系人：

```
private void updateContact(String name, String phone)
{
    ContentResolver cr = getContentResolver();

    String where =
        ContactsContract.Data.DISPLAY_NAME + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ? AND "
            + String.valueOf(ContactsContract.CommonDataKinds.Phone.TYPE) + " = ? ";
    String[] params =
        new String[]
        {
            name,
            ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE,
            String.valueOf(ContactsContract.CommonDataKinds.Phone.TYPE_HOME) };

    Cursor phoneCur = managedQuery(ContactsContract.Data.CONTENT_URI, null, where, params, null);

    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

    ops.add(ContentProviderOperation
        .newUpdate(ContactsContract.Data.CONTENT_URI)
        .withSelection(where, params)
        .withValue(ContactsContract.CommonDataKinds.Phone.DATA, phone)
        .build());

    phoneCur.close();

    try
    {
        cr.applyBatch(ContactsContract.AUTHORITY, ops);
    }
    catch (RemoteException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (OperationApplicationException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // Toast.makeText(NativeContentProvider.this, "The number of have been updated " + name+ " to: " + phone,
    // Toast.LENGTH_SHORT).show();
} 
```

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:33:48.890

在程序的其他地方，您正在阅读电话号码。在那个地方，还要读取类型，并将其作为参数传递给`updateContact`.

# sparql - Jena/Sparql/Arq：在查询期间在模型中注入一些语句

> ID：12500245
> 
> 赞同：2
> 
> 时间：2012-09-19T17:54:16.240
> 
> 标签：sparql, jena, bioinformatics, bigdata, arq

我建立了一个小型 RDF 模型：它只包含几个三元组，描述了人类基因组上的一些项目。

我只想保留那些与某些基因组片段（比如“基因”）重叠的项目，这些项目存储在另一个关系数据库中。这个基因数据库太大了，无法插入到我的初始 RDF 模型中。

有没有办法扩展 ARQ 以在查询期间在我的模型中注入一些新的语句（描述与项目重叠的唯一基因的 RDF 语句）？

输入：

```
uri:object1  my:hasChromosome "chr1" .
uri:object1  my:hasStartPosition "1235689887" .
uri:object1  my:hasEndPosition "2897979879" .
uri:object1  dc:title "my variation" . 
```

输出：

```
uri:object1  my:hasChromosome "chr1" .
uri:object1  my:hasStartPosition "1235689887" .
uri:object1  my:hasEndPosition "2897979879" .
uri:object1  dc:title "my variation" .
uri:gene1  dc:title "GeneName" . 
```

我读过关于[http://jena.sourceforge.net/ARQ/arq-query-eval.html](http://jena.sourceforge.net/ARQ/arq-query-eval.html)但我迷路了：我应该选择哪种扩展机制？财产 ？网络上有更完整的例子吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:23:52.663

这里的细节有点薄。从简单开始，使用[自定义函数](http://jena.apache.org/documentation/query/writing_functions.html)。这将允许您在外部查找`FILTERs`或使用[`BIND`](http://www.w3.org/TR/sparql11-query/#bind)检索值。

对于更新，您可能需要考虑[SPARQL Update](http://www.w3.org/TR/sparql11-update/)。

最后你说

> 我只想保留那些与某些基因组片段（比如“基因”）重叠的项目，这些项目存储在另一个关系数据库中。

所以也许是这样的：

```
PREFIX my: <...>
PREFIX f:  <java:com.example.DBFunctions.>

DELETE { ?missing ?p ?o } # Purge the non-overlapping objects
WHERE {
    ?missing my:hasChromosome ?chr ; 
             my:hasStartPosition ?start ;
             my:hasEndPosition ?end .
    FILTER (!f:overlaps(?chr, ?start, ?end)) # true if not overlapping
} 
```

好的，我猜在这里，但我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:31:50.723

You have two datastores. One a small dataset in a Jena in memory Model, and a large set of gene related data in a relational database. You want to write a sparql query as if the large set of data is local without actually importing it. (The actual data transformation you want to do is a bit vague.)

In SPARQL 1.1 you can do this using the SERVICE keyword between sparql endpoints. To be able to use your relational database of gene data as a SPARQL endpoint you need a SPARQL to SQL translator such as [D2RQ](http://d2rq.com/) or convert the data to RDF and load it into a general purpose SPARQL capable triple-store.

Once the gene data is available in a SPARQL endpoint.

```
PREFIX my: <...>
PREFIX f:  <java:com.example.DBFunctions.>

INSERT { ?missing a my:Gene } # mark a region as a gene
WHERE {
    ?missing my:hasChromosome ?chr ; 
         my:hasStartPosition ?start ;
         my:hasEndPosition ?end .
    SERVICE<http://localhost:????/gene_data/sparql>{
       ?gene a my:Gene .
         my:hasStartPosition ?gStart ;
         my:hasEndPosition ?gEnd .
       #Detect overlap.
       FILTER( !(?start > ?gEnd || ?end < ?gStart) ) .
    }
} 
```

The other option is to do the filter as @user205512 shows by using a custom function. Where the filter java code uses JDBC to connect to the relational database.

# rest - “存储” REST 原型如何不创建新资源和新 URI？

> ID：12500248
> 
> 赞同：7
> 
> 时间：2012-09-19T17:54:21.293
> 
> 标签：rest, api-design

REST API 设计表明有四种资源原型：文档、集合、存储和控制器。

商店不创建新资源；因此商店永远不会生成新的 URI。

一个例子：

```
PUT /users/12245/favorites/boston-celtics 
```

一位用户将波士顿凯尔特人队添加到他的收藏夹列表中。

但这怎么不创造新资源呢？以及它如何不生成新的 URI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:08:51.627

商店不会自行创建资源。商店的用户创建端点/URI。

对比是在 Collection 和 Store 之间

集合 集合资源是服务器管理的资源目录。客户可以提议将新资源添加到集合中。但是，由集合决定是否创建新资源。集合资源选择它想要包含的内容，并决定每个包含资源的 URI。

存储 存储是客户端管理的资源存储库。存储资源允许 API 客户端：将资源放入、取出并决定何时删除它们。

# ember.js - Ember.js {{each}} vs {{collection}}

> ID：12500250
> 
> 赞同：13
> 
> 时间：2012-09-19T17:54:25.433
> 
> 标签：ember.js

我理解`each`，`collection`辅助方法是在我的车把模板中迭代项目列表的两种可能方法。我正在寻找一些关于何时使用`each`或`collection`两种方法之间有什么区别的实用建议。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-26T13:43:40.900

**每个：**

```
App.myArray = [1,2,3]

{{#each value in App.myArray}}
  <p>{{value}}</p>
{{/each}} 
```

对应的 HTML

```
<p>1</p>
<p>2</p>
<p>3</p> 
```

**收藏：**

```
{{#collection contentBinding="App.myArray"}}
  <p>{{view.content}}</p>
{{/collection}} 
```

对应的 HTML

```
<div class="ember-view">
  <p>1</p>
</div>
<div class="ember-view">
  <p>2</p>
</div>
<div class="ember-view">
  <p>3</p>
</div> 
```

如您所见，两者都处理数组。简而言之`each`，用于显示元素数组，而`collection`用于显示视图数组

实际使用中的主要区别在于您想要与元素交互时。如果您只想显示数组列表，请使用`each`帮助程序。

但是，如果您想与数组中的每个元素进行交互，同时保持单击元素的上下文，您`collections`

让我用一个例子来解释

```
App.CollectionView = Ember.CollectionView.extend({
  //Here the content belongs to collection view
  content: [1,2,3],
  itemViewClass: Ember.View.extend({
    /*This itemViewClass is like a template which is used by 
    all the elements in the content array of collection view*/
    click: function(){
      //Now this itemViewClass has a content property which is the single element in the collections content
      /* As you see the content of collection view has 3 elements => 3 templates 
         1 single template = Ember.View.extend with it's own content property
         first template has content set to 1
         second template has content set to 2 and so on...
      */
      alert("you clicked"+this.get('content');
    }
  })
}) 
```

我想这可以消除你的疑问......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T22:02:31.297

我是 Ember.js 的新手，我还没有使用过 {{collection}}，但是我有什么知识并浏览了 {{collection}} 的文档（http://emberjs.com/api /classes/Ember.Handlebars.helpers.html#method_collection），我推测如下：

{{each}} 助手将遍历对象列表并输出针对每个对象呈现的 {{each}} 标记之间的内容。这只是模板中的一个循环。

{{collection}} 帮助器还将遍历对象列表，但在每次迭代中，它将创建一个新的 View 对象来包含它。如果您使用块形式（{{#collection}}{{/collection}}），标签之间的内容将成为与新创建的视图关联的模板。如果您使用单标签表单（{{collection}}），而不是在此处提供模板，您指定要使用的视图的名称，Ember 将创建该类的视图（而不是通用的 Ember.View）并使用它的关联模板。

使用 {{collection}} 而不是 {{each}} 的原因更加复杂和微妙，而且看起来你只是在开发真正的应用程序时才开始真正得到它们 - 至少，那是到目前为止，这是我对 Ember 很多部分的体验。例如，您会突然意识到出于某种原因需要将循环模板部分作为不同的视图对象 - 可能需要在某个地方包含额外的事件处理程序，或者存储特定于每个循环迭代的额外 UI 状态，例如 isEditing 标志。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-17T22:35:17.267

正如@Abdull 在对您的问题的评论中所说，`{{collection}}`视图助手已被弃用，因此`{{each}}`是建议的用法。

```
/**
  `{{collection}}` is a `Ember.Handlebars` helper for adding instances of
  `Ember.CollectionView` to a template. See `Ember.CollectionView` for
  additional information on how a `CollectionView` functions.

  ...

  @method collection
  @for Ember.Handlebars.helpers
  @param {String} path
  @param {Hash} options
  @return {String} HTML string
  @deprecated Use `{{each}}` helper instead.
*/ 
```

源代码：[ember.js/packages/ember-handlebars/lib/helpers/collection.js](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.3/packages/ember-handlebars/lib/helpers/collection.js#L134)

# sharepoint - SharePoint 设计器 - 工作流 Office365 + 在线 CRM

> ID：12500253
> 
> 赞同：0
> 
> 时间：2012-09-19T17:54:57.423
> 
> 标签：sharepoint, office365, dynamics-crm-online

这是我的要求，我知道我们可以使用 web 服务来做到这一点，但想确保是否有任何简单的解决方案。

我有 Office365 帐户，并且我在 Office365 中创建了一个公共站点。假设[http://xyz.sharepoint.com](http://xyz.sharepoint.com)是网站。我也有相同的 Windows Live ID 的在线 CRM 帐户。

我的 office365 网站上有一个反馈表。这是页面[http://xyz.sharepoint.com/feedback.aspx](http://xyz.sharepoint.com/feedback.aspx)。当用户输入一些内容并单击保存按钮时，我想将他们的电子邮件 ID 保存到在线 CRM。（在线索部分但不是必需的，我们可以更改它）

是否有任何内置选项可以在没有代码的情况下将电子邮件保存到在线 CRM？或者我需要通过使用 Web 服务来寻求沙盒解决方案？有什么好的建议吗？我该怎么做。

# android - 从主线程查询android中的db

> ID：12500255
> 
> 赞同：5
> 
> 时间：2012-09-19T17:55:02.640
> 
> 标签：android

我正在使用 sql lite，我通常查询 1 个表。如果我从主 ui 线程进行查询会很糟糕吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T17:58:01.620

这取决于。如果您的表非常大，则执行查询可能需要一些时间，并且可能会导致您的应用出现明显的延迟。另外，您说您*通常*只查询一个表，因此可能会在其他表上进行更多查询。

一般来说，我会做很多工作，比如使用 AsyncTasks 在后台线程中查询和下载，因为即使它们现在不需要很长时间，它也给了我更多的自由来扩展应用程序而无需大量重写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T17:59:31.480

是的，实际上从主 UI 线程查询是不好的。

[http://android-developers.blogspot.com/2009/05/painless-threading.html](http://android-developers.blogspot.com/2009/05/painless-threading.html)

如果花费的时间少于一两秒，那也不算太糟糕，但总是建议在另一个线程上执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T17:57:46.617

请阅读 Android 文章[为响应而设计](http://developer.android.com/guide/practices/responsiveness.html)

> 可能长时间运行的操作（例如网络或数据库操作）或计算量大的计算（例如调整位图大小）应该在子线程中完成（或者在数据库操作的情况下，通过异步请求）。

该文章继续描述在主线程上执行昂贵的操作可能会导致“应用程序无响应”错误，并且操作系统将终止您的应用程序。

因此，虽然您*可以*在主线程上执行这些操作，但*最好*使用后台线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T17:58:08.250

是的，您可以提供您的查询不应该花费很长时间，否则最好为此使用异步任务

# google-apps-script - 为什么 SitesApp.getSites(myDomain) 不起作用？

> ID：12500256
> 
> 赞同：-1
> 
> 时间：2012-09-19T17:55:05.507
> 
> 标签：google-apps-script

我目前正在使用 Google Apps 脚本，但无法使用以下代码段。 ![在此处输入图像描述](../Images/c3fbbd30ac0d0de82c239fea6c8ccfea.png)

错误消息是：**未找到请求的资源。**
![在此处输入图像描述](../Images/b5edcb9c851d91f0bad65ae5ebdb6225.png)
我还测试了我在这里找到的无证方法：[Need to list all the sites under a google domain using Google Apps Script](https://stackoverflow.com/questions/12395695/need-to-list-all-the-sites-under-a-google-domain-using-google-apps-script)

```
 var mySites = SitesApp.getAllSites(myDomain, 1, 10); 
```

但我得到同样的错误。有关完整示例，请参见下文。先感谢您。

```
function view() {
  var myDomain = 'example.com';

  // this works
  var mySite = SitesApp.getSite(myDomain);
  Logger.log('title=' + mySite.getTitle() + '\n' + 'name=' + mySite.getName());

  // this works, too
  var myPages = mySite.getAllDescendants();
  for (i in myPages) {
    Logger.log('page=' + myPages[i].getTitle());
  }  

  //this does not work, error: the requested ressource was not found
  var mySites = SitesApp.getSites(myDomain);

  // this also does not work, same error
  var mySites = SitesApp.getAllSites(myDomain, 1, 10);
} 
```

**编辑 1**：我在 Windows 7 上使用 3 种不同的浏览器进行了测试：Firefox Nightly、Google Chrome 和 Opera。
**编辑 2**：使用 Android 3.2 和 Firefox 浏览器在三星 Galaxy Tab 10.1N 上出现同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:39:54.567

当服务找不到域或您无权访问它时，您会收到该错误。请确保域完全匹配，并且不以“www.”等开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T21:58:20.853

我认为你应该使用：

```
 var mySite = 'https://sites.google.com/site/name_of_the_site';
  var site = SitesApp.getSiteByUrl(mySite); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T19:04:00.107

请尝试以下行

```
for(i=0;i<=80;i++) { 

Logger.log('title=' + mySite[i].getTitle() + '\n' + 'name=' + mySite[i].getName());

 } 
```

# c# - BeginAcceptSocket 与 null 作为状态对象 - 问题？

> ID：12500257
> 
> 赞同：0
> 
> 时间：2012-09-19T17:55:08.893
> 
> 标签：c#, networking, asynchronous

我得到了一个代码，该代码还涉及我刚开始的异步套接字。我不知道为什么作为 BeginAccept 套接字的第二个参数的对象状态为空，老实说，我没有从 MSDN 中得到这个参数的使用。还有，为什么要从回调方法再次调用 BeginAccept？

```
public void Start()
        {

                this.mTcpListener.Start();
                this.mTcpListener.BeginAcceptSocket(this.AcceptClient, null);
        }

 protected void AcceptClient(IAsyncResult ar)
        {
            if (this.mTcpListener != null)
            {
                System.Net.Sockets.Socket s = this.mTcpListener.EndAcceptSocket(ar);
                Client c = new Client(this, s, this.GetFreePlayerID());

                ..some code for adding the client instance to collection....                  
                this.mTcpListener.BeginAcceptSocket(this.AcceptClient, null);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:37:40.863

继 fsimonazzi 之后，我假设此代码是服务器的一部分，该服务器旨在容纳许多传入连接。

BeginAccept 用于在套接字上启动接受过程。

然后在 AcceptClient 中，它使用 EndAcceptSocket 完成 AcceptConnection 异步过程。

此时程序不再监听新的连接/套接字。为此，它再次启动异步 BeginAcceptSocket 进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:20:14.837

该参数纯粹由调用代码使用。它会回到您的回调，您可以使用它来识别呼叫。使用 null 是完全有效的。

以下是有关异步编程模型的更多信息[http://msdn.microsoft.com/en-us/library/ms228963.aspx](http://msdn.microsoft.com/en-us/library/ms228963.aspx)。

第二个附加参数是用户定义的对象。此对象可用于将特定于应用程序的状态信息传递给异步操作完成时调用的方法。

# c++ - c++ 符号导出

> ID：12500259
> 
> 赞同：0
> 
> 时间：2012-09-19T17:55:24.257
> 
> 标签：c++, dllexport, class-visibility

我是 Linux、Windows 和 osX 上的 c++ 库的开发人员。由于 osX 现在不能正确处理匿名异常，我考虑清楚地标记需要导出的符号。按照[这些解释](http://gcc.gnu.org/wiki/Visibility)，我定义了两个宏：`FOO_API`和`FOO_LOCAL`用于标记符号。现在我有以下问题：

我在自己的文件中定义每个类（因为我不想要 1000 多个长文件）。如果类`A`只在我的库中使用，那么用 . 标记它是有意义的`FOO_LOCAL`。但是如果 class`B`有一个私有成员 type `A`，而 class `B`is `FOO_API`，那么我会收到编译器警告并且链接失败（找不到符号）。这似乎违背了这些出口属性的全部意义。那么，它应该是什么？我用类似这样的东西来标记我的班级`class FOO_LOCAL A {...}`是这样吗？

还有没有办法让所有私人成员都在本地？（因为它们是私有的，所以不应该直接访问它们）这将使标记过程不那么乏味......

最后，当我标记例如我的异常类时，它可以正确编译和运行，但显示符号 ( `nm -C -D my_lib.so`) 表明所有符号仍然存在......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:02:48.840

您可以使用[pimpl 习惯用法](http://c2.com/cgi/wiki?PimplIdiom)向公众隐藏 API 类的库内部实现（因此在链接库时）。

某某 喜欢：

**B.hpp：**

```
class BImpl;

class FOO_API B
{
public:
    // Public stuff
    B();
    ~B();

    void foo();
private:
    BImpl* bimpl;
}; 
```

**B.cpp：**

```
#include "B.hpp"
#include "A.hpp"

struct BImpl
{
    void foo()
    {
        // Do something with 'a'
    }

    A a;
};

B::B()
: bimpl(new BImpl())
{
}

B::~B()
{
    delete bimpl;
}

void B::foo()
{
    bimpl->foo();
} 
```

# arrays - 使用请求模块发布数组/对象

> ID：12500260
> 
> 赞同：3
> 
> 时间：2012-09-19T17:55:32.190
> 
> 标签：arrays, node.js, object, post, request

我正在尝试使用[请求](https://github.com/mikeal/request)模块发出 http post 请求

```
text = 'some data';

request.post('http://example.com/read', {form:{data: text}}); 
```

这适用于简单的字符串，但我需要能够发送数组或对象。

当我尝试在后处理程序中读取数组/对象时，数据属性为空。

这是怎么回事？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T18:28:28.313

尝试这个：

```
var request = require('request');

request({
  method: 'POST',
  uri: 'http://example.com/read',
  body: {'msg': 'secret'},
  json: true
}, function (error, response, body) {
  console.log('code: '+ response.statusCode);
  console.log(body);
}) 
```

让我知道它是否有效。

# machine-learning - libsvm 收缩启发式

> ID：12500261
> 
> 赞同：17
> 
> 时间：2012-09-19T17:55:40.347
> 
> 标签：machine-learning, svm, libsvm

我在 C-SVC 模式下使用带有 2 次多项式内核的 libsvm，我需要训练多个 SVM。在训练期间，对于我训练的一些 SVM，我收到了其中一个甚至两个警告：

```
WARNING: using -h 0 may be faster
*
WARNING: reaching max number of iterations
optimization finished, #iter = 10000000 
```

我找到了`h`参数的描述：

```
-h shrinking : whether to use the shrinking heuristics, 0 or 1 (default 1) 
```

我试图从 libsvm 文档中阅读解释，但这对我来说有点太高了。任何人都可以提供一个外行的解释，也许，一些像设置这样的建议会是有益的，因为......？此外，如果为我训练的所有 SVM 设置此参数，是否会对未明确给出此警告的 SVM 的准确性产生负面影响，这将很有帮助。

我不确定如何处理另一个警告。

只是为了提供更多细节：我的训练集有 10 个属性（特征），它们由 5000 个向量组成。

* * *

**更新：**

如果其他人得到“达到最大迭代次数”，这似乎是由数值稳定性问题引起的。此外，这将产生非常缓慢的训练时间。多项式内核确实受益于使用交叉验证技术来确定正则化的最佳值（C 参数），并且在多项式内核的情况下，对我来说，它有助于保持它小于 8。此外，如果内核是不均匀的\sum(\gamma x_i s_i + coef0)^d （抱歉，SO 不支持 LaTeX），其中 coef0 != 0，则可以使用 gamma 和 C 的网格搜索技术来实现交叉验证，因为在这个在这种情况下，gamma (1 / number_of_features) 的默认值可能不是最佳选择。不过，从我的实验来看，你可能不希望 gamma 太大，

为了进一步了解 gamma 和 C 的可能值，应该尝试在 grid.py 中戳。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T10:30:40.273

缩小启发式是为了加速优化。正如常见问题解答中所说，它们有时会有所帮助，有时则不会。我相信这是一个运行时间问题，而不是收敛问题。

不过，优化达到最大迭代次数的事实很有趣。您可能想要使用公差（成本参数），或者查看导致此问题的个别问题。数据集大吗？

# iphone - 如何从 UIViewController 访问 UINavigationController

> ID：12500263
> 
> 赞同：3
> 
> 时间：2012-09-19T17:55:42.663
> 
> 标签：iphone, ios

在我的 AppDelegate 我有以下代码：

```
UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UINavigationController *itemsNavigationController1 = [[UINavigationController alloc] initWithRootViewController:viewController1]; 
```

如何将 UIVNagigationBar 的背景颜色设置为绿色？

如果我做：

```
[self.navigationController.navigationBar setTintColor:[UIColor greenColor]]; 
```

从 viewController1 来看，这没有效果。

提前致谢！

更新：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"MyTitle", @"");

        [self.navigationController.navigationBar setTintColor:[UIColor greenColor]];
        [self.parentViewController.navigationController.navigationBar setTintColor:[UIColor greenColor]];
    }
    return self;
} 
```

两者都没有影响

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:11:25.477

In the `initWithNibName:bundle` method your view controller can't yet have a navigation controller.

If your navigation controller is created from a nib file too, try implementing the `awakeFromNib` method of UIViewController and set the color there. `awakeFromNib` is called once every object on the nib file has been loaded and initialized.

If you create the navigation controller programmatically, then you should set the color only after adding the view controller (loaded from the nib) to your navigation controller. You can either do this where you add the view controller. Or try implementing the `viewDidLoad` or `viewWillAppear` methods of `UIViewController` to set the color.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:31:07.970

你做得太快了。（您没有收到错误消息，但您的消息是发送到的无果消息`nil`，您可以通过使用 NSLog 轻松发现。）等到 FirstViewController 的`viewDidLoad`.

或者使用已经建议的外观代理。这里的优势部分在于时机变得不重要。您可以在任何视图控制器实例存在之前提前完成。例子：

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/ch19p549navigationInterface/p471p482navigationInterface/AppDelegate.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/ch19p549navigationInterface/p471p482navigationInterface/AppDelegate.m)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T18:23:49.387

您还可以使用`appearance`iOS 5 中的方法来更改应用程序中导航栏的色调。例如，在你的`application:didFinishLaunchingWithOptions`你可以：

```
if ([[UINavigationBar class] respondsToSelector:@selector(appearance)]) 
{
    [[UINavigationBar appearance] setTintColor:[UIColor greenColor]];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T17:58:42.910

尝试 [itemsNavigationController1.navigationBar setTintColor:[UIColor greenColor]];

# javascript - 多种形式，检测哪一个onclick来自

> ID：12500265
> 
> 赞同：2
> 
> 时间：2012-09-19T17:55:45.333
> 
> 标签：javascript, html, forms, submit

我有一个包含多种表单的网页，每个表单都有自己的控件。

我想使用控件上的“onclick”事件来运行 JavaScript 函数。

有没有办法告诉哪个**表单**包含“onclick”事件来自的**控件？**我想在不使用表单的 id 的情况下这样做，但如果我必须这样做也没关系。

（我想做一个提交，无论它来自哪个表单。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T18:02:38.737

您可以通过简单地检查它来获取归因于任何输入元素的表单，`.form`如下所示：

对于刚刚设置的元素`onclick="getForm(this);"`

```
// el gets passed by "this" within the onclick
function getForm (el) {
    var form = el.form;
} 
```

[jsFiddle Demo - 打开控制台查看传入的“el”以及父表单](http://jsfiddle.net/4SWtR/1/)

附带说明：我建议**不要**在 HTML 元素中使用**onclick / onmouseover / 任何“JS”事件。**不仅这些不同的东西通常应该分开，而且在 IE8 及更低版本中，这些事件中的每一个都会变成一个小的*脚本*块元素，这会降低性能。

# c# - 插入前验证数据的最佳方法

> ID：12500266
> 
> 赞同：1
> 
> 时间：2012-09-19T17:55:45.863
> 
> 标签：c#, .net, ado.net

我正在使用 ado.net 调用 sproc 并插入数据。在插入之前确保所有参数都不为空的最佳方法是什么？该表将允许在某些列上使用空值，但在这种情况下，我需要确保每个值在插入之前都不为空。我可以检查每个值是否为 null 并在它分配 SqlParameter 之前抛出一个 nullargument 异常。只是不确定这是否是最好的方法。

谢谢

这是我的一些代码供参考

```
 using (var con = new SqlConnection(ConnectionString.GetWebTablesConnectionString()))
        using (var cmd = new SqlCommand("InsertNewCustomer", con))
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("dealerid", SqlDbType.Int).Value = dealerid;
            cmd.Parameters.Add("firstname", SqlDbType.NVarChar, 50).Value = customerToInsert.FirstName;
            cmd.Parameters.Add("lastname", SqlDbType.NVarChar, 50).Value = customerToInsert.LastName;
            cmd.Parameters.Add("mailingaddress", SqlDbType.NVarChar, 50).Value = customerToInsert.MailingAddress.Addr;
            cmd.Parameters.Add("mailingcity", SqlDbType.NVarChar, 30).Value = customerToInsert.MailingAddress.City;
            cmd.Parameters.Add("mailingstate", SqlDbType.NVarChar, 25).Value = customerToInsert.MailingAddress.State;
            cmd.Parameters.Add("mailingzip", SqlDbType.NVarChar, 10).Value = customerToInsert.MailingAddress.Zip;
            cmd.Parameters.Add("mailingcountry", SqlDbType.NVarChar, 2).Value = customerToInsert.MailingAddress.Country;
            cmd.Parameters.Add("homephone", SqlDbType.NVarChar, 20).Value = customerToInsert.HPhone;
            cmd.Parameters.Add("email", SqlDbType.NVarChar, 75).Value = customerToInsert.Email;
            cmd.Parameters.Add("referredBy", SqlDbType.NVarChar, 50).Value = customerToInsert.ReferredBy;

            con.Open();
            cmd.ExecuteNonQuery();
         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T20:48:39.850

当然，您可以编写 10-15 个 if-else 语句。但是，如果您计划扩展您的解决方案并进行关注点分离并避免代码重复，我不建议您这样做。根据我的经验，我建议您使用以下库：

[http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

这是一个非常易于使用的基于规则的验证引擎。只需查看 Codeplex 上的示例。这是一个非常简单直接的框架。基本上，您可以添加验证域对象的规则并将验证规则封装到特定于实体的验证类中。它将允许您在没有条件逻辑的情况下轻松添加一个“存储过程调用”，并且不会违反 Open-Closed 原则（您需要添加一个新的验证器而不是修改现有的验证器）

您将需要实现自己的自定义验证器（例如，CustomerValidator 类）甚至在打开连接并开始初始化 SqlCommand 之前检查 Customer 对象的有效性：

```
CustomerValidator validator = new CustomerValidator();
ValidationResult results = validator.Validate(customerToInsert);
if(results.IsValid){
    using (var con = new SqlConnection(ConnectionString.GetWebTablesConnectionString()))
        using (var cmd = new SqlCommand("InsertNewCustomer", con))
        {
            //Do the actual insert / SP call here, your object is valid
        }
    }
} 
```

此外，您现在可以为封装到 CustomerValidator 类中的验证规则编写单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:11:40.897

Agree with validation on the UI but I would also check at the data layer.

if(string.IsNullOrEmpty(dealerid)) throw new ArgumentNullException("dealerid");

This test for Null Or Empty. If you want to accept empty then only test for null.

If dealerID is a string make sure it will parse to Int.

May want to do other stuff like trim(). Unless they specifically want to include leading and trailing spaces it makes for messy queries.

Often missed is SQL does not accept as broad a date range as .NET so need to test for date range.

# javascript-events - 根据 DOM 中的位置动态生成 ID

> ID：12500271
> 
> 赞同：0
> 
> 时间：2012-09-19T17:56:00.853
> 
> 标签：javascript-events, javascript

我需要根据 DOM 中的级别生成元素的值。例如，如果我在文档级别有一个点击事件（即监听页面上的任何点击）并且呈现的 HTML 像这样，它需要遍历 DOM，直到您看到填充的“ID”属性。

```
<div id="someid">
<div>
    <span>
        <p>
            <a href="javascript:void(0);">
                <span>
                    <strong>Googlie</strong> 
                </span>
            </a>                
        </p>
    </span>
</div> 
```

当我点击“Googlie”时，它应该会生成如下内容：someid__div_span_p_a_span_strong

问题：我确实有一些代码可以做到这一点，但它有问题。在上面，如果我有两个元素，一个接一个，如下所示。如何为强元素生成独特的价值？我可以在不使用 childNodes 位置的情况下拥有一些东西吗？如果有人更改元素之间的空白，则 childNodes 值会更改。

```
...<span>
<strong>Googlie</strong> <br/> <strong>Bingie</strong> 
```

...

```
 document.onclick = function(obj) {
    var node = obj.target;
    var res = [];
    var etA = "";
    res[0] = false;
    while (!res[0]) {
        res = GetIdFor(node);
        if (!res[0]) {
            var end = node.parentNode.childNodes.length;
            for (var i = 0; i < end; i++) {
                var j = node.parentNode.childNodes[i];
                if (j.nodeType === 1 && j === node) {
                    break;
                }
            }
            etA = "_" + node.tagName + etA;
            node = node.parentNode;
        }
        else {
            etA = res[1] + "_" + etA;
        }
    }
    alert(etA);
};
function GetIdFor(elem) {
    var res = [];
    res[0] = false;
    var d = elem.getAttribute("ID");
    if (d !== "undefined" && d !== null) {
        res[0] = true;
        res[1] = d;
    }
    return res;
} 
```

现在，我知道 jQuery 可以在这里提供帮助，但这不是重点。:) 想法？除了使用 childNodes 级别来生成此值之外，我没有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:36:55.933

[我从这里](https://stackoverflow.com/questions/4459143/what-is-the-path-in-the-html-dom-for-a-selected-element)改编了这个答案。作者建议将 [#] 作为兄弟编号，以便您可以区分兄弟姐妹，例如 someid__div_span_p_a_span_strong[0]

[在这里](http://jsfiddle.net/aH86Y/)工作 jsFiddle 。

```
function elementPath(element)
{
    return $(element).parents().andSelf().map(function() {
        var $this = $(this);
        var tagName = this.nodeName;
        if ($this.siblings(tagName).length > 0) {
            tagName += "[" + $this.prevAll(tagName).length + "]";
        }
        return tagName;
    }).get().join(".").toLowerCase();
}

$(document).ready(function() {
    $(document).click(function(e) {
        e.stopPropagation();
        window.alert(elementPath(e.target));
    });
}); 
```

# linux - 是否可以将内核消息从特定进程通过管道传输到文件

> ID：12500273
> 
> 赞同：3
> 
> 时间：2012-09-19T17:56:04.153
> 
> 标签：linux, logging, linux-kernel, pipe

由于这是一个 Linux 问题，我会注意我使用的是 OpenSUSE 12.1

我正在运行一个内核模块，基本上它是一个 CAN 总线模拟器，`printk()`只要“总线”上有活动，它就会打印消息。

我现在正在使用 跟踪消息`sudo cat /proc/kmsg`，但是当我开始将其他“设备”放在“总线”上时，kmsg 流量会大大增加，并且很难找到我的消息。

无论如何将“printk”消息从一个特定进程传输到文件？

**编辑** 我现在看到，如果我在调试消息中添加特定标签，有可能，还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T18:01:08.860

是的你可以。所有内核消息都可以包含 syslog-ng 守护进程。对于这个守护进程，您可以编写自定义规则并将模块中的所有消息放入特定文件。先看看/etc/syslog-ng/syslog-ng.conf

**更新**

默认情况下，所有内核 print 和 printk 函数都将消息放入内核环形缓冲区。用户空间程序可以通过 /proc/kmsg 文件访问这个环形缓冲区。

syslog-ng 将从 /proc/kmsg 读取数据，然后通过过滤器（过滤器只是特殊模式）grep 输出并将数据放在不同的输出中（在本示例中它将只是文本文件）。如果在输出缓冲区中我们会找到内核模块“hello”的输出，syslog-ng 会将消息放入 /var/log/hello，所有其他消息将放入 /var/log/messages

模块源

```
#include <linux/module.h>       
#include <linux/kernel.h>       

#define MODNAME "[hello]"

int init_module(void)
{
        printk(KERN_WARNING MODNAME "Hello world 1.\n");    
        return 1;
}

void cleanup_module(void)
{
        printk(KERN_ALERT "Goodbye world 1.\n");
} 
```

在insmod之后

> insmod hello-1.ko

在 /var/log/messages 你可以找到：

> 9 月 20 日 17:46:20 ns1 内核：[96643.968650] [hello]Hello world 1。

好的，让我们配置 syslog-ng 以捕获 grep 日志消息（通过使用模式 [hello]）

$cat /etc/syslog-ng/syslog-ng.conf

```
@version: 3.2
# $Header: /var/cvsroot/gentoo-x86/app-admin/syslog-ng/files/syslog-ng.conf.gentoo.3.2,v 1.1 2011/01/18 17:44:14 mr_bones_ Exp $
#
# Syslog-ng default configuration file for Gentoo Linux

options {
        chain_hostnames(no);    
        stats_freq(43200);
        mark_freq(3600);
};

source src {
    unix-stream("/dev/log" max-connections(256));
    internal();
    file("/proc/kmsg");
};

destination messages { file("/var/log/messages"); };
# output file for ower module
destination hello_messages { file("/var/log/hello"); };   

# grep patterns for ower module
filter f_hello { match("hello" value("MESSAGE")); };
filter f_kernel { facility(kern); };

log { source(src); destination(messages); };
log { source(src); destination(console_all); };

# target for logging    
log { source(src); filter(f_hello); filter(f_kernel); destination(hello_messages); }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T04:04:23.130

还有另一种方法可以实现这一点：使用任何最新内核的内置“ftrace”支持。

a) 对于非常大的 printk 流量，printk 可能会导致系统瓶颈甚至崩溃——然后您应该切换到使用 trace_printk()；它的开销几乎是微不足道的（尤其是与 printk 相比） b) ftrace 能够为特定进程过滤 ftrace 环形缓冲区。

请在此处阅读详细信息（在任何最近的内核源代码树中）： *Documentation/trace/ftrace.txt*

添加资源：“使用 Ftrace 调试内核 - 第 1 部分” [http://lwn.net/Articles/365835/](http://lwn.net/Articles/365835/) （也请参见第 2 部分）。

# loops - Powershell XML 解析

> ID：12500277
> 
> 赞同：2
> 
> 时间：2012-09-19T17:56:16.940
> 
> 标签：loops, powershell, xml-parsing

我想创建一个自动解析 XML 的 Powershell 脚本，但只收集其中的某些信息。

就目前而言，我的脚本看起来与此类似。

```
[xml]$xml = Get-Content .\myxml.xml
$foo_sub_length = $xml.report.foos.foo.length - 1
$foo_looper = 0
$foo_looper_brackets = "[$foo_looper]"
if ($foo_sub_length -eq "") {$foo_looper_brackets = ""}
do {
    $xml.report.foos.foo$foo_looper_brackets.bar
}
while ($foo_looper -le $foo_sub_length) 
```

基本上，它需要检查并打印出所有的 $xml.report.foos.foo.bar 值。当我运行这个脚本时，我收到错误，

```
Unexpected token 'node_looper_brackets' in expression or statement.
At C:\Users\notarealuser\Desktop\xmlscript.ps1:10 char:55          #not reflective of the above script
+ CategoryInfo          : ParserError: (foo_looper_brackets:String) [], ParseException
+ FullyQualifiedErrorId : UnexpectedToken
+     $xml.report.foos.foo$foo_looper_brackets <<<< .bar 
```

关于我的循环为什么或如何不起作用的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:04:01.940

您最好使用 XPath 提取此信息。如果您不使用 XML 命名空间，这非常简单（命名空间只会让它变得更难一些）：

```
PS> [xml]'<doc><title>Foo</title><title>Bar</title></doc>' | 
         Select-Xml '/doc/title' | Foreach {$_.Node.InnerText}

Foo
Bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:07:53.767

尝试这个：

```
[Xml]$doc=@"
<doc><title>
<foo2><bar1><info>1</info></bar1></foo2> 
<foo1><bar1><info>2</info></bar1></foo1>
<foo1><bar2><info>3</info></bar2></foo1>
</title></doc>
"@

$doc.CreateNavigator().Select('/doc/title//info') | select value 
```

# c# - Linq - 我如何将这些合并成一个 IQueryable？

> ID：12500280
> 
> 赞同：2
> 
> 时间：2012-09-19T17:56:26.430
> 
> 标签：c#, .net, linq, iqueryable

我有一个简单的（混淆的）类：

```
public Thing ()
{
    public IList<string> Strings()
    { 
        // returns an IList of whatever, 
        // using strings as an example
    }
} 
```

在我的代码的其他地方，我`IQueryable<Thing> things`从数据库中检索

我的目标是将所有的`string`s 从`things`合二为一`IQueryable<string> strings`，也许是这样的：

```
var strings = from t in things
              select t.Strings() 
```

但这只会让我得到一个`IQueryable<IList<string>>`. 我如何将所有这些列表整合到一个包罗万象的集合中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:06:13.137

尝试使用类似的东西：

```
things.SelectMany(t => t.Strings); 
```

# azure - 如何设置 Azure 存储模拟器以侦听所有接口？

> ID：12500281
> 
> 赞同：4
> 
> 时间：2012-09-19T17:56:35.957
> 
> 标签：azure, azure-storage

是否可以让存储模拟器监听每个接口而不是 127.0.0.1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:14:03.643

首先，

127.0.0.1 是 IP 地址而不是端口！不如看看

> %PROGRAMFILES%\Microsoft SDKs\Windows Azure\Emulator\devstore\DSServiceLDB.exe.config

它具有所有存储服务的配置设置。但是，如果您更改 Storage Emulator 的地址，您将无法再使用“usedevelopmentstorage=true”作为您的存储连接字符串。我个人的建议是不要更改存储模拟器的IP地址！根据对不同 IP 地址的确切需求，我宁愿建议针对真实存储服务进行测试/开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:30:28.037

您可以通过编辑相关的配置文件来使其工作。

请参阅以下博客文章：

*   [在本地网络上托管 Azure 模拟器和表存储](http://blog.piyushthacker.com/?p=24)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T20:19:39.397

并不真地。它旨在作为本地开发的本地模拟器。它仅用于本地使用，未编写或测试为网络资源。

# java - Java 正则表达式解释

> ID：12500284
> 
> 赞同：5
> 
> 时间：2012-09-19T17:56:44.960
> 
> 标签：java, regex

有人可以向我解释和的含义`\\A`吗`\\z`？我假设它们在这个正则表达式中具有特殊含义，因为它们正在被转义（但我可能是错的，它们可能分别代表 A 和 z）。谢谢！

```
private static final Pattern PATTERN = Pattern.compile("\\A(\\d+)\\.(\\d+)\\z"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T17:58:10.377

`\A`意思是“字符串的开头”，`\z`意思是“字符串的结尾”。

您可能已经在这种情况下看到`^`and `$`，但它们的含义可能会有所不同：如果您使用 编译正则表达式`Pattern.MULTILINE`，那么它们会将其含义更改为“行首”和“行尾”。`\A`and的含义`\z`永远不会改变。

还存在`\Z`这意味着“字符串结尾，在任何尾随换行符之前”，这类似于`$`多行模式中的操作（如果它在行尾换行符之前匹配）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T17:58:53.160

这个 Java 表达式：

```
Pattern.compile("\\A(\\d+)\\.(\\d+)\\z") 
```

产生这个正则表达式：

```
\A(\d+)\.(\d+)\z 
```

where`\A`表示“字符串开头”，`\z`表示“字符串结尾”。

因此，该模式匹配任何由一位或多位数字、小数点和一位或多位数字组成的字符串。

有关 Java 正则表达式表示法的所有方面的详细信息，请[参阅`java.util.regex.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:01:16.537

看看这个参考

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

根据那`\A`匹配输入的开始，并`\z`匹配输入的结束。

他们`\\`在他们面前而不是只有 1`\`的原因是因为他们`\`也被逃脱了。

# asp.net-mvc - 如何在 IIS 6.1 (SP1) / Windows Server 2008 R2 标准版上部署 ASP.Net MVC 4 应用程序

> ID：12500287
> 
> 赞同：0
> 
> 时间：2012-09-19T17:56:49.493
> 
> 标签：asp.net-mvc, iis, deployment, windows-server-2008

如何在 IIS 6.1 (SP1)（Windows Server 2008 R2 标准版）上部署 ASP.Net MVC 4 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:58:29.633

这个网站在帮助我解决问题方面非常有用。

[http://www.codedigest.com/Articles/ASPNETMVC/216_Hosting_and_Deployment_of_an_ASPNET_MVC_Application_in_IIS6_and_IIS7.aspx](http://www.codedigest.com/Articles/ASPNETMVC/216_Hosting_and_Deployment_of_an_ASPNET_MVC_Application_in_IIS6_and_IIS7.aspx)

# c# - 这是确定何时为所描述的场景返回空列表的好方法吗？

> ID：12500291
> 
> 赞同：0
> 
> 时间：2012-09-19T17:57:03.653
> 
> 标签：c#, linq, list, getter

我有一个名为 Division 的类，其中包含有关细分的信息（在内部列表中），包括每个细分的分类代码。在 Subdivision 类中，代码存储为 int。在 Division 类中，List 用于存储所有代码。有时，会有一个没有细分的部门，因此没有代码。或者，无论出于何种原因，可能没有为细分设置代码。所以它的默认值为 0。我不想返回一个列表，除非它有实际的代码。

```
public List<int> AllCodesList
{
    get
    {
        return (from subdivision in SubdivisionInfoList
                where subdivision.code > 0 
                select subdivision.code).ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:01:46.097

如果您希望它返回`null`，请执行以下操作：

```
public List<int> AllCodesList
{
    get
    {
        List<int> subDivisions = null;
        if (SubdivisionInfoList.Any(s => s.code > 0))
        {
            subDivisions = (from subdivision in SubdivisionInfoList
                where subdivision.code > 0 
                select subdivision.code).ToList();
        }
        return subDivisions;
    }
} 
```

也就是说，我个人不喜欢这个，我宁愿返回一个空列表。您必须确保在调用此属性时进行空检查，然后才能对列表执行任何操作（如果返回任何内容）。

乔治的建议：

```
public List<int> AllCodesList
{
    get
    {
        var subDivisions = (from subdivision in SubdivisionInfoList
                            where subdivision.code > 0 
                            select subdivision.code).ToList();

        if (subDivisions.Count == 0)
        {
            subDivisions = null;
        }

        return subDivisions;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:02:04.707

`Nullable<int>`将 subdevision.code 设置为( )可能更有意义`int?`，它可以显式表示代码的缺失，但是是的，返回空列表而不是 null 可能更好，因为使用该列表的任何代码都必须做单独的空检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T18:03:01.973

返回空列表而不是 null 通常是个好主意，因为调用代码可以非常简单 - 无需检查 null （有时会丢失并导致臭名昭著的空指针异常）。

在某些情况下，人们对空列表和 null 之间的区别感兴趣，但我强烈建议查看此类调用并确保方法名称清楚地表明将返回什么，一些重构可能有助于永远不会返回 null。在您的特殊情况下，我认为在“没有细分”的情况下返回空数组是非常好的。

# android - 将图像从 android 应用程序发布到 facebook 应用程序墙

> ID：12500293
> 
> 赞同：0
> 
> 时间：2012-09-19T17:57:23.713
> 
> 标签：android, facebook, facebook-wall

我正在尝试将用户使用我的 Android 应用程序创建的图像发布到 Facebook 上的应用程序墙。我已经知道如何在用户的墙上发布图像。

我找到了如何使用 php 的教程：http:
[//jorgealbaladejo.com/2011/06/13/publish-to-facebook-page-or-applications-wall-with-php/](http://jorgealbaladejo.com/2011/06/13/publish-to-facebook-page-or-applications-wall-with-php/)

但我不知道如何获取**page_id**或如何使用适用于 Android 的 Facebook sdk 来获取。

* * *

**编辑**

我在 Facebook 墙上发帖的代码是：

```
public void postImageonWall(String path) {

    byte[] data = null;

    Bitmap bi = BitmapFactory.decodeFile(path);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    data = baos.toByteArray();

    Facebook facebook = ((MainActivity) appcontext).getFacebook();

    Log.d("Facebook-PostImage","facebook: " + facebook);
    Bundle params = new Bundle();
    params.putString(Facebook.TOKEN, facebook.getAccessToken());
    params.putString("method", "photos.upload");
    params.putString("message", "Message Text");
    params.putString("link","ANDROID_MARKET_LINK"); //or any other link
    params.putString("name", "APP/GAME NAME");
    params.putByteArray("picture", data);

    Log.d("Facebook-PostImage","AsyncRunner going to be called");
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    mAsyncRunner.request(null, params, "POST", new RequestListener() {
        public void onComplete(final String response, final Object state) {
                try {
                    // process the response here: (executed in background thread)
                    Log.d("Facebook-Example", "Response: " + response.toString());
                    JSONObject json = Util.parseJson(response);
                    final String src = json.getString("src");

                    // then post the processed result back to the UI thread
                    // if we do not do this, an runtime exception will be generated
                    // e.g. "CalledFromWrongThreadException: Only the original
                    // thread that created a view hierarchy can touch its views."

                } catch (JSONException e) {
                    Log.w("Facebook-Example", "JSON Error in response");
                } catch (FacebookError e) {
                    Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
                }
            }
        @Override
        public void onFacebookError(FacebookError e, Object state) {
            // TODO Auto-generated method stub
        }
        @Override
        public void onIOException(IOException e, Object state) {
            // TODO Auto-generated method stub
        }
        @Override
        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {
            // TODO Auto-generated method stub
        }
        @Override
        public void onMalformedURLException(MalformedURLException e,
                    Object state) {
                // TODO Auto-generated method stub
            }
          }, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:14:31.370

这是我用于获取应用程序页面 ID 的代码：

```
private JSONObject getJSONfromUrl(String url) throws IOException {
    InputStream is = new URL(url).openStream();
    try {
      BufferedReader rd = new BufferedReader(new InputStreamReader(is,      Charset.forName("UTF-8")));
      String jsonText = readAll(rd);
      JSONObject json = new JSONObject(jsonText);
      return json;
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
      is.close();
    }
    return null;
}

private String getPageId(String url) {
    String identifier = url.substring(url.lastIndexOf("/"));
    String graphUrl = "https://graph.facebook.com/" + identifier;

    JSONObject response;
    String id = null;
    try {
       response = getJSONfromUrl(graphUrl);
       id = (String) response.get("id");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return id;
} 
```

# android - 具有图像视图和可见性的列表视图

> ID：12500303
> 
> 赞同：1
> 
> 时间：2012-09-19T17:58:15.837
> 
> 标签：android, listview, imageview, visibility

我正在制作一个应用程序来解析来自 Internet 的文本和图像并将它们显示在`ListView`. 这工作正常。

在 的每一行中`ListView`，`ImageView`具有`GONE`可见性值。

我正在尝试，如果 XML 解析的字段具有值“是”，则将`ImageView`' 的可见性设置为`VISIBLE`.

```
public class MinAdapterSuscr extends BaseAdapter {

    //... 

    public View getView(int position, View convertView, ViewGroup parent)
    {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row_my_nets, null);

        TextView title = (TextView)vi.findViewById(R.id.title);
        TextView net = (TextView)vi.findViewById(R.id.net);
        ImageView home = (ImageView)vi.findViewById(R.id.enthome);
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.image); 

        HashMap<String, String> onets = new HashMap<String, String>();
        onets = data.get(position);

        // añadiendo los valores al listview
        title.setText(android.text.Html.fromHtml(onets.get(netsActivity.KEY_NOMBRE_RED_SUSCR)));
        artist.setText(android.text.Html.fromHtml(onets.get(netsActivity.KEY_DESCR_RED_SUSCR)));
        nuevasEntradas.setText(android.text.Html.fromHtml(onets.get(netsActivity.KEY_POR_VER_SUSCR)));
        String isHome = onets.get(netsActivity.KEY_ES_INICIO_SUSCR);
        imageLoader.DisplayImage(song.get(netsActivity.KEY_AVATAR_RED_SUSCR), thumb_image);

        // Comprobación de si es red propia o de inicio
        if(isHome.equals("yes")) {
            home.setVisibility(View.VISIBLE);
            Log.i("looking",”home visible”);
        }

        return vi;  
    }
} 
```

这可行，但它显示的结果似乎是随机的。有时`ImageView`可见，有时不可见，但与 XML 的“是”不匹配。

我究竟做错了什么？我感谢您的帮助。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:08:19.647

**只需在if conition**中添加**else**部分，

 **```
if(isHome.equals("yes")) {
  home.setVisibility(View.VISIBLE);
  Log.i("looking",”home visible”);
}
else
{
  home.setVisibility(View.GONE);
  Log.i("looking",”home gone”);
} 
```

试试这个，让我知道会发生什么..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:09:01.570

您需要同时设置`"yes"`和`"no"`状态，否则之前的“yesses”永远不会关闭，因为这些行被回收了。（请观看 Android 的 Romain Guy 讨论[适配器的效率和`getView()`](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)）

```
if(isHome.equals("yes")) {
    home.setVisibility(View.VISIBLE);
    Log.i("looking",”home visible”);
}
else {
    home.setVisibility(View.GONE);
} 
```**

# nhibernate - 在 nHibernate 映射文件中放置 inverse="true" 的位置

> ID：12500306
> 
> 赞同：2
> 
> 时间：2012-09-19T17:58:41.933
> 
> 标签：nhibernate, nhibernate-mapping

根据 nHibernate 分析器，我需要将 inverse="true" 添加到我的映射文件中，但是，我似乎无法找到有关该属性的确切放置位置的示例。谁能根据以下映射文件告诉我我需要在哪里放置 inverse="true"？

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   auto-import="true"
                   namespace="LROLib.Domain"
                   assembly="LROLib">
  <class name="TestResult" table ="Test_Results" >
    <id name="Test_Result_Id" >
      <generator class="native" />
    </id>

    <many-to-one name="Test_Result" class="Result" column="Result_Id" />
    <many-to-one name="Test_Applicant" class="Applicant" column="Applicant_Id"/>

    <property name="Test_Name" />
    <property name="Value" />
    <property name="Hi_Lo_Ind" />
    <property name="Range" />
    <property name="Unit_Of_Measure" />
    <property name="Lo_Range" />
    <property name="Hi_Range" />
    <property name="Create_DateTime" update="false"/>
    <property name="Update_DateTime" />
    <property name="User_Name" />

  </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T19:31:27.140

在大多数情况下，“反向”是识别关系所有者。对于您的特定情况，这应该在您的`Result`和`Applicant`映射中。

您可以在[此博客文章](http://www.mkyong.com/hibernate/inverse-true-example-and-explanation/)中阅读更多内容。引用/解释该文章中特别相关的陈述：

> 但是“inverse”关键字本身不够冗长，我建议将 [ `inverse`] 关键字更改为“ `relationship_owner`”。
> 
> 简而言之，`inverse="true"`表示这是关系所有者，`inverse="false"`（默认）表示不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-23T11:18:57.993

当我还是一个hibernate初学者时，我对决定“inverse=true”还是“inverse=false”感到困惑。

这是一个简单的理解它的方法：

示例场景：Person(one) <-> Address(many) 双向一对多关系。（一个人有多个地址。）

```
public class Person {
  private Integer id;
  private Set<Address> addresses;

  // setter, getter
  Set<Address> getAddresses() { return addresses; }
  ....
}
```

```
public class Address {
  private Integer id;
  private Person person;

  // setter, getter
  Person getPerson() { return person; }
  .....
}
```

*   Person 类有“Set getAddresses()”方法
*   地址类有“Person getPerson()”方法

如果你考虑两个类之间的关系，它可能会给出一个人有地址的想法。(Person -> Addresses) 所以，感觉就像一个人是一个所有者，一个地址是一个孩子。然后，您想认为地址是“inverse=true”，因为地址归个人所有。但是，这是不正确的。

在这里，我想提出一种思考方式。让我们看看表结构而不是类。

*   人[身份证，姓名，...]
*   地址[id，person_id，城市，街道，...]

Address 表中的 person_id 列是这两个表之间的关系信息。因此，Address 是关系的所有者，而 Person 是反面。“inverse=true”表示“**这一方是反方**”，“inverse=false”表示“**这不是反方**。这一方是关系的所有者”。

```
<class name="Person">
  <id name="id">...</id>
  <set name="addresses" inverse="true">
    <key column="person_id"/>
    <one-to-many class="Address"/>
  </set>
</class>

<class name="Address">
  <id name="id">...</id>
  <many-to-one name="person" class="Person" />
</class>
```

综上所述，看表结构区分“inverse=true”还是“inverse=false”。如果表有关系信息，那么它就是所有者方。所以，它不是反面。(inverse=false) 如果表没有关系信息，那么它就是反面。所以，它需要“inverse=true”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-21T15:01:56.613

你可以在mkyong的[What is “inverse”](https://www.mkyong.com/hibernate/inverse-true-example-and-explanation/)中找到一个解释清楚的教程。

它着重于 @mynkow 的陈述，并为您提供了一些插入和更新有关**反向**属性值的示例。

如果我是你，我会看一看。

# python - 将类项目从 csv 导入列表

> ID：12500317
> 
> 赞同：-1
> 
> 时间：2012-09-19T17:59:29.807
> 
> 标签：python, list, class, csv

我有一个 csv 文件，它有大约 4000 行，如下所示：

```
itemList.append(Item( 'SSCATALOG',  1,  "M" ,18 ,2))

itemList.append(Item( 'PTPC36200',  1,  "Z" ,19 ,8)) 
```

和一个看起来像这样的类：

```
class Item:
  def __init__(self, pid, aisle, bay, hits, qtyPerOrder):
    self.pid = pid
    self.aisle = int(aisle)
    self.bay = bay
    self.hits = int(hits)
    self.qtyPerOrder = int(qtyPerOrder) 
```

我正在尝试将这些数据提取到一个名为`itemList`using的列表中`jython`。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:08:55.370

您的数据看起来不像逗号分隔值 (CSV)。相反，它看起来像部分 Python 代码。如果您的数据文件看起来像这样：

> itemList.append(Item('SSCATALOG', 1, "M" ,18 ,2))
> 
> itemList.append(Item('PTPC36200', 1, "Z" ,19 ,8))

然后您可以使用[exec](http://docs.python.org/reference/simple_stmts.html#the-exec-statement)将其加载到您的脚本中：

```
class Item:
  def __init__(self, pid, aisle, bay, hits, qtyPerOrder):
    self.pid = pid
    self.aisle = int(aisle)
    self.bay = bay
    self.hits = int(hits)
    self.qtyPerOrder = int(qtyPerOrder)

with open('data', 'r') as f:
    itemList = []
    exec f
    print(itemList) 
```

产量

```
[<__main__.Item instance at 0xb770cb4c>, <__main__.Item instance at 0xb770cb6c>] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:25:00.773

您的数据不是 CSV。这是某种不完整的 Python 代码。根据您的说法，最简单的方法是在数据文件的开头添加一些代码，如下所示：

```
# add this
from someModule import Item
itemList = []

# leave the rest of your data below
itemList.append(Item( 'SSCATALOG',  1,  "M" ,18 ,2))
itemList.append(Item( 'PTPC36200',  1,  "Z" ,19 ,8))
# etc. 
```

这`someModule`是定义 Item 类的 Python 模块。如果您进行了这些更改，则可以将数据文件作为普通 Python 模块导入并访问其`itemList`变量以获取数据。

但是，更好的长期解决方案是使用更好的数据格式。不要像这样存储数据：

```
itemList.append(Item( 'SSCATALOG',  1,  "M" ,18 ,2)) 
```

像这样存储它：

```
'SSCATALOG',1,"M" ,18,2 
```

然后它将是一个真正的 CSV 文件。[您可以使用`csv`模块](http://docs.python.org/library/csv.html)导入数据，然后*根据*您读入的数据创建对象。通常最好不要尝试存储某些用户定义类的对象；相反，存储用于创建该对象的数据，然后在读取数据时重新创建该对象。您还可以查看用于将 Python 对象读取和写入文件[的`pickle`模块。](http://docs.python.org/library/pickle.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T18:18:51.793

这个问题似乎没有涉及任何实际的 CSV 文件。

编码

```
 itemList.append(Item( 'SSCATALOG',  1,  "M" ,18 ,2)) 
```

不包含逗号分隔的值，尽管它同时具有值​​和逗号，并且逗号位于值之间。相反，每一行都在创建一个 Item 对象 ( `Item( 'SSCATALOG', 1, "M" ,18 ,2)`) 并将其添加到一个名为`itemList`( `itemList.append(. . .)`) 的列表对象中。

该代码将执行列表对象的填充，前提是您在“调用”它之前做两件事：

*   您必须首先创建一个名为的列表对象`itemList`
*   您必须确保您的代码可以访问`Item`该类的定义。

假设`Item`在名为 的文件中指定`item.py`，并且包含所有附加语句的“csv”文件称为 pseudo_csv.py，您应该能够执行此操作：

```
 import item
 itemList = []
 execfile('pseudo_csv.py') 
```

# php - SCORM编码显示问题

> ID：12500322
> 
> 赞同：0
> 
> 时间：2012-09-19T17:59:47.247
> 
> 标签：php, character-encoding, frames, iso-8859-1, scorm

我和这个失去了它......

我所有的内容都由 Apache 以 UTF-8 编码和提供。现在，我获得了一些新的 SCORM 课程，但使用 ISO-8859-1 编码，因此在尝试显示它时会显示解码错误。

我尝试禁用 AddDefaultCharset，将其设置为 ISO-8859-1，将规则应用于 htaccess，但没有 xx 。

由于一些官僚主义的废话，我不允许触摸 SCORM 文件。

SCORM 通过这个 PHP 脚本提供服务：

```
<?php
$SCOInstanceID = $_GET['SCOInstanceID'] * 1;
$ref=$_GET['ref'];
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>VS SCORM</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<frameset frameborder="0" framespacing="0" border="0" rows="50,*" cols="*" onbeforeunload="API.LMSFinish('');" onunload="API.LMSFinish('');">
    <frame src="api.php?SCOInstanceID=<?php print $SCOInstanceID; ?>" name="API" noresize>
    <frame src="<?php echo $ref; ?>" name="course">
</frameset>
</html> 
```

不是最漂亮的作品，但这就是我现在必须处理的……所以，有什么想法吗？

# google-maps - Google Maps Geocode API，如何使用您的 API 密钥访问？

> ID：12500329
> 
> 赞同：2
> 
> 时间：2012-09-19T18:00:38.880
> 
> 标签：google-maps, google-maps-api-3, geocode, google-geocoder

根据 Google Map 的 Geocode API 文档：

[https://developers.google.com/maps/documentation/geocoding/index#GeocodingRequests](https://developers.google.com/maps/documentation/geocoding/index#GeocodingRequests)

您可以像这样简单地调用地理编码请求地址：

[http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false)

但是，[根据此部分](https://developers.google.com/maps/documentation/geocoding/index#Limits)，每天有 2500 个请求的使用限制。

*   由于请求 url 不包含任何类型的 API 密钥参数，Google 是如何跟踪查询限制的？仅仅是通过客户端的IP地址吗？
*   我有一个 Google Maps API v3 密钥，上面写着“***礼貌限制：25,000 个请求/天***”。这与地理编码 API 有什么不同吗？或者我能否以某种方式将我的 Google Maps API 密钥与 Geocoding API 结合使用，以便我每天可以处理超过 2500 个请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:06:17.547

是的，它是通过IP地址。

25,000 用于每天的地图加载

每天 2,500 个用于地理编码

如果您想要更多，您需要在他们那里获得一个帐户，最后我检查了它的启动成本为 10,000 美元。

# asp.net - 在 Visual Studio 2010 和 Visual Studio 2012 中，带有 col、colgroup、tbody 和 thead 的 HTML 表格标记引发编译错误

> ID：12500332
> 
> 赞同：12
> 
> 时间：2012-09-19T18:01:00.657
> 
> 标签：asp.net, visual-studio-2010, .net-3.5, visual-studio-2012, .net-4.5

我有一个 .NET 3.5 网站，其中包含一个 table 标签，其中包含 col、colgroup、tbody 和 thead 标签。这是一个带有 runat="server" 属性的服务器端标签。此表在 Visual Studio 2010 中运行良好，但在我安装 Visual Studio 2012 和 .NET 4.5 后，此标记现在无法在 Visual Studio 2010 和 Visual Studio 2012 中编译。（我都尝试了。）这是编译器错误被抛出：

> *   'System.Web.UI.HtmlControls.HtmlTableRowCollection.Add(System.Web.UI.HtmlControls.HtmlTableRow)' 的最佳重载方法匹配有一些无效参数
> *   参数“1”：无法从“System.Web.UI.HtmlControls.HtmlGenericControl”转换为“System.Web.UI.HtmlControls.HtmlTableRow”

这是我正在使用的示例：

```
<table id="TestTable" runat="server">
    <colgroup>
        <col width="30%" />
        <col width="70%" />
    </colgroup>
    <thead>
        <tr>
            <td>Sample header 1</td>
            <td>Sample header 2</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Sample cell 1</td>
            <td>Sample cell 2</td>
        </tr>
        <tr>
            <td>Sample cell 3</td>
            <td>Sample cell 4</td>
        </tr>
    </tbody>
</table> 
```

有谁知道如何解决这个问题，以便我们可以让网站编译并继续工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T18:04:30.813

在安装 Visual Studio 2012 和 .NET 4.5 之后，这似乎是对网站的一个未记录的重大更改。我无法在 Microsoft 记录的 .NET 4.5 更改中找到对此的引用：http: [//msdn.microsoft.com/en-us/library/hh367887.aspx](http://msdn.microsoft.com/en-us/library/hh367887.aspx)

在研究了问题之后，以下似乎是损坏表格标签的可能解决方案。

1.  卸载 Visual Studio 2012 和 .NET 4.5。参考：[在 ASP.NET 4.5 中未编译 tbody 的服务器端 HTML 表](https://stackoverflow.com/questions/12243755/server-side-html-table-with-tbody-not-compiling-in-asp-net-4-5)

    我意识到这不一定是一个理想的解决方案，但如果以下其他解决方案都无法轻松实现，那么您最终可能别无选择。此外，仅仅因为这是第一个条目，它不是我推荐的主要解决方案。这只是一种选择。

2.  将您的网站转换为 Web 应用程序。使用 web 应用程序时，带有 runat="server" 的表似乎编译文件。

    进行这种转换还有其他好处，例如可以更轻松地针对 Web 应用程序中的代码编写单元测试。但是，您需要评估从网站转换为 Web 应用程序所涉及的工作，并且您需要说服您的老板和同事您需要进行此更改。

3.  检查表的服务器端代码（页面/控件后面的代码）。您是否在服务器端代码中使用控件？如果没有，请删除 runat="server"。然后页面编译得很好。

    ```
    <table id="TestTable">
        <colgroup>
            <col width="30%" />
            <col width="70%" />
        </colgroup>
        <thead>
            <tr>
                <td>Sample header 1</td>
                <td>Sample header 2</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Sample cell 1</td>
                <td>Sample cell 2</td>
            </tr>
            <tr>
                <td>Sample cell 3</td>
                <td>Sample cell 4</td>
            </tr>
        </tbody>
    </table> 
    ```

4.  您正在使用服务器端代码中的控件。删除 col 和 colgroup 标签并将列样式移动到表格第一行的 td 或 th 单元格中。（列宽和样式继承自表格的第一行，因此例如在第一个单元格上设置 width="40%" 会使该列中的所有单元格都具有 width="40%"。）删除 thead 标记并将表格中的所有 td 单元格更改为 th （表格标题）单元格。删除 tbody 标签。

    ```
    <table id="TestTable" runat="server">
        <tr>
            <th width="30%">Sample header 1</td>
            <th width="70%">Sample header 2</td>
        </tr>
        <tr>
            <td>Sample cell 1</td>
            <td>Sample cell 2</td>
        </tr>
        <tr>
            <td>Sample cell 3</td>
            <td>Sample cell 4</td>
        </tr>
    </table> 
    ```

5.  转换为将`<asp:Table>`标签与`<asp:TableHeaderRow>`和`<asp:TableRow>`控件一起使用。参考： [如何在 ASP.NET Table 中创建 thead 和 tbody？](https://stackoverflow.com/questions/4015839/how-to-create-thead-and-tbody-in-asp-net-table)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T20:51:40.967

现在有一个修补程序来解决这个烦人的问题：Win7： http: [//support.microsoft.com/kb/2750147](http://support.microsoft.com/kb/2750147)（参见 ASP.net 问题 3） [http://www.microsoft.com/en-gb/download/details .aspx?id=36359](http://www.microsoft.com/en-gb/download/details.aspx?id=36359)

Win8 [http://support.microsoft.com/kb/2750149](http://support.microsoft.com/kb/2750149)

# ruby-on-rails - rake 资产后引导下拉菜单中的注销按钮不起作用：预编译

> ID：12500334
> 
> 赞同：0
> 
> 时间：2012-09-19T18:01:07.807
> 
> 标签：ruby-on-rails, ruby, drop-down-menu, twitter-bootstrap, routes

晚上所有，

我有一个注销按钮，在 twitter 下拉菜单中工作得非常好。但是现在在编译资产然后清理它们之后，注销按钮重定向到 localhost:3000/logout 而不是调用控制器中的销毁操作并重定向到根路径并重置会话。

我的代码如下，任何帮助都会很棒，请注意此链接在下拉菜单之外有效

session_controller.rb

```
def destroy
    reset_session
    flash[:notice] = "successfully logged out"
    redirect_to root_path
  end 
```

路线

```
 match "/logout", to: "sessions#destroy", via: :delete 
```

标题

```
<li><%= link_to "Logout", "/logout", method: "delete" %></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:31:09.363

`logout_path`用排序的硬编码路径。

# mysql - MySQL ABS 计算的优化技巧

> ID：12500336
> 
> 赞同：1
> 
> 时间：2012-09-19T18:01:10.480
> 
> 标签：mysql, optimization

我有 MySQL 数据库：

```
CREATE TABLE IF NOT EXISTS `tableexample` (
    `id` int(11) NOT NULL auto_increment,
    `val0` tinyint(1) NOT NULL,
    `val1` tinyint(1) NOT NULL,
    `val2` tinyint(1) NOT NULL,
    `val3` tinyint(1) NOT NULL,
    `val4` tinyint(1) NOT NULL,
    `val5` tinyint(1) NOT NULL,
    .................
    `val1996` tinyint(1) NOT NULL,
    `val1997` tinyint(1) NOT NULL,
    `val1998` tinyint(1) NOT NULL,
    `val1999` tinyint(1) NOT NULL,
     UNIQUE KEY `id` (`id`),
) ENGINE=MEMORY ; 
```

这个查询最多可以有 500 个字段：

```
SELECT
  ( ABS(`val1`-12)
  + ABS(`val22`-22)
  + ABS(`val23`-3)
  + ABS(`val45`-87)
  + ABS(`val76`-23)
    ........
  + ABS(`val1324`-7)
  + ABS(`val1576`-29)
  ) as valcal,
  id
FROM `tableexample`
ORDER BY valcal ASC
LIMIT 5 
```

此外，`ABS`对于每个查询（12、22、3、87、23、7、29，...），来自的数字都是唯一的，并且可以在 0-99 范围内。

我做了一些测试：

```
for 1000 records the sql run in 0.024 seconds
for 10000 records the sql run in 0.231 seconds
for 50000 records the sql run in 1.123 seconds
for 100000 records the sql run in 2.179 seconds
for 200000 records the sql run in 4.316 seconds
for 300000 records the sql run in 6.451 seconds 
```

你有什么优化技巧吗，因为数据库中有大约 300,000 条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:56:02.247

此查询将始终必须遍历所有 300,000 条记录并为每条记录执行 500 次计算。它大约每秒进行 23M 次计算，这还不错。优化这一点的唯一方法是更好的硬件，但即便如此也很难。

添加索引无济于事。它可以提供帮助的唯一方法是彻底重新考虑您的结构或逻辑。

# django - Django 的 AUTH_PROFILE_MODULE 单元测试失败 - AttributeError: 'UserSettingsHolder' 对象没有属性 'AUTH_PROFILE_MODULE'

> ID：12500338
> 
> 赞同：2
> 
> 时间：2012-09-19T18:01:23.017
> 
> 标签：django, unit-testing, django-authentication

我在我的设置文件中设置 AUTH_PROFILE_MODULE，如下所示：

```
AUTH_PROFILE_MODULE = 'api.AccountProfile' 
```

API 应用程序被添加到已安装的应用程序中，如下所示：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    #3rd party apps
    'south',
    'allauth',
    'allauth.account',
    'allauth.socialaccount',
    'allauth.socialaccount.providers.facebook',
    'allauth.socialaccount.providers.twitter',

    #Our apps
    'ourproject.apps.api',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
) 
```

我运行`./manage.py syncdb`并且`./manage.py migrate`没有困难，然后我运行 django 单元测试`./manage.py test`。第一个失败的测试是 AUTH_PROFILE_MODULE 测试，它位于`django.contrib.auth.tests.models.ProfileTestCase`.

这个特定的测试一开始就失败了：

```
def test_site_profile_not_available(self):
    # calling get_profile without AUTH_PROFILE_MODULE set
    if hasattr(settings, 'AUTH_PROFILE_MODULE'):
        del settings.AUTH_PROFILE_MODULE    #<----Fails here 
```

在堆栈的下方，我发现错误发生在最终在包装器上调用的方法中`__delattr__`：`django.utils.functional.LazyObject``delattr`

```
def __delattr__(self, name):
    if name == "_wrapped":
        raise TypeError("can't delete _wrapped.")
    if self._wrapped is empty:
        self._setup()
    delattr(self._wrapped, name)    #<----Fails here 
```

这是追溯：

```
File "/path/to/python/files/django/contrib/auth/tests/models.py", line 30, in test_site_profile_not_available
    del settings.AUTH_PROFILE_MODULE
File "/path/to/python/files/django/utils/functional.py", line 211, in __delattr__
    delattr(self._wrapped, name)
AttributeError: 'UserSettingsHolder' object has no attribute 'AUTH_PROFILE_MODULE' 
```

所以我挖掘了 django 源代码并添加了一些打印语句以查看发生了什么：

django.contrib.auth.tests.models.ProfileTestCase：

```
def test_site_profile_not_available(self):
    # calling get_profile without AUTH_PROFILE_MODULE set
    if hasattr(settings, 'AUTH_PROFILE_MODULE'):
        print '*******', type(settings), '********'
        del settings.AUTH_PROFILE_MODULE

Output: ******* <class 'django.conf.LazySettings'> ******** 
```

django.utils.functional.LazyObject：

```
def __delattr__(self, name):
    if name == "_wrapped":
        raise TypeError("can't delete _wrapped.")
    if self._wrapped is empty:
        print 'Here I am. Rock you like a hurricane'
        self._setup()
    print '*************', hasattr(self._wrapped, name)
    print '*************', name
    print '*************', self._wrapped.AUTH_PROFILE_MODULE
    delattr(self._wrapped, name)

Output: ************* True
************* AUTH_PROFILE_MODULE
************* api.AccountProfile 
```

请注意，`LazySettings`继承自`LazyObject`并且没有自己的**delattr**方法。

这是完整的输出`./manage.py test`：[https](https://dl.dropbox.com/u/20560722/TestOutput.txt) ://dl.dropbox.com/u/20560722/TestOutput.txt 。请注意，有问题的测试只运行一次，打印语句只显示一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:33:45.250

这是一个已知的 Django 问题，已在最新的 master (1.5dev) [https://code.djangoproject.com/ticket/17966](https://code.djangoproject.com/ticket/17966)上修复。

# android - 是否可以通过仅添加 maps.jar 而不是 Google API 来使用 MapView？

> ID：12500341
> 
> 赞同：0
> 
> 时间：2012-09-19T18:01:30.807
> 
> 标签：android, google-maps

是否可以通过仅添加 maps.jar 而不是针对 Google API 进行编译来使用 MapView？它对我不起作用，但正在寻找一种解决方法，所以我不必更新环境。

# html - 导入字体 Internet Explorer

> ID：12500346
> 
> 赞同：3
> 
> 时间：2012-09-19T18:01:49.487
> 
> 标签：html, css, internet-explorer, fonts, font-family

我想导入一些字体以在我的网站中使用，我正在使用谷歌制作的这段代码。

HTML

```
<link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Cuprum:400,700' rel='stylesheet' type='text/css'> 
```

CSS

```
font-family: "Droid Sans", sans-serif; 
```

它适用于 Firefox 和 Google Chrome 但 IE8 没有，为什么？

**已编辑**：Adobe 创建了类似 Google 的东西，脚本比 google 更好，并且在 Internet Explorer 中完美运行（更多内容在[http://html.adobe.com/edge/webfonts/](http://html.adobe.com/edge/webfonts/)中）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T18:09:39.393

因为它仅以 WOFF 格式提供，[IE8 不支持](http://caniuse.com/#feat=woff)。

在这里：[http](http://www.fontsquirrel.com/fontfacedemo/Droid-Sans) ://www.fontsquirrel.com/fontfacedemo/Droid-Sans您可以下载所需的所有格式的相同字体。

然后，将以下代码添加到您的主 CSS 中：

```
@font-face {
    font-family: "Droid Sans";
    src: url('DroidSans-webfont.eot');
    src: url('DroidSans-webfont.eot?#iefix') format('embedded-opentype'),
         url('DroidSans-webfont.woff') format('woff'),
         url('DroidSans-webfont.ttf') format('truetype'),
         url('DroidSans-webfont.svg#DroidSansRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

因此，您将能够继续使用此字体。

请注意，字体文件必须位于样式表的同一文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:31:58.423

至少从 IE 的角度来看，Google 服务生成的字体文件有问题。IE 9 也无法显示由 Google 提供的 Droid Sans，我在检查模式 (F12) 中检查了 Google 向 IE 发送了 EOT 文件和 WOFF 文件。

该问题仅与某些字体有关，并且可能是间歇性的；参看。例如对于[如何让谷歌字体在 IE 中工作的问题？](https://stackoverflow.com/questions/3694060/how-to-make-google-fonts-work-in-ie/3694183#3694183)

因此，GionaF 建议使用 FontSquirrel 生成文件并在本地托管它们似乎是可行的方法，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:14:40.627

Google 为 IE 返回的 CSS 包含`@font-face`woff 字体，该字体仅在 IE9 及更高版本中受支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T14:31:44.687

在使用 Google Fonts 提供的 @import 代码时，我遇到了 IE8 问题。根据 Google Fonts Troubleshooter 的建议，我将 @import 语句中引用的 URL 粘贴到 IE 中，看看是否有错误可以帮助我追踪问题。它所做的是下载一些@font-face 代码，然后我将它们放入CSS 文件中以代替@import 行，现在一切都可以在IE8 和Chrome 中正常运行。我已经在 iPad (safari) 上进行了测试，它对此也很满意。

这可能对某些人有效，但不能保证！希望这对其他人有帮助，但我遇到这个问题已经有一段时间了，这真的很痛苦。这似乎已经解决了它......在此期间！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-03T10:14:10.290

只需添加 sans-serif 作为您的字体。

像这样：

```
font-family:'fontname', sans-serif; 
```

Sans-Serif 使其适用于所有浏览器

# c# - .NET 套接字的网络问题

> ID：12500348
> 
> 赞同：0
> 
> 时间：2012-09-19T18:01:51.997
> 
> 标签：c#, .net, sockets, tcp

我有一个基本的异步套接字服务器。最近，我遇到了间歇性时期，其中一个连接在 TCP 对等方的回复中出现以下错误：

```
Exception message:
The output char buffer is too small to contain the decoded characters, encoding 'Unicode (UTF-8)' fallback 'System.Text.DecoderReplacementFallback'.

Exception stacktrace:
at System.Text.Encoding.ThrowCharsOverflow()
   at System.Text.Encoding.ThrowCharsOverflow(DecoderNLS decoder, Boolean nothingDecoded)
   at System.Text.UTF8Encoding.GetChars(Byte* bytes, Int32 byteCount, Char* chars, Int32 charCount, DecoderNLS baseDecoder)
   at System.Text.DecoderNLS.GetChars(Byte* bytes, Int32 byteCount, Char* chars, Int32 charCount, Boolean flush)
   at System.Text.DecoderNLS.GetChars(Byte[] bytes, Int32 byteIndex, Int32 byteCount, Char[] chars, Int32 charIndex, Boolean flush)
   at System.Text.DecoderNLS.GetChars(Byte[] bytes, Int32 byteIndex, Int32 byteCount, Char[] chars, Int32 charIndex)
   at System.IO.StreamReader.ReadBuffer()
   at System.IO.StreamReader.ReadLine()
   at MyServer.TcpReceiveMessages() 
```

我怀疑流量在特定的网络路由上受到破坏（其他 TcpListener 和应用程序/网络中其他地方的对等方始终保持 100% 正常通信）。可以采取哪些步骤来更好地查明并修复它？

（注意，我已经完成了数据包捕获，导致异常的传入数据包处理*看起来*很好，即有效负载似乎包含我想要的文本。我说*看*是因为有效负载的可识别部分应该在那里，但是也有一些二进制部分在被损坏时不会立即显现出来。）

监听器的简化版本：

```
private void TcpReceiveMessages()
{
   TcpClient tcpServer = new TcpClient();
   string address = "some_address";
   int port = 80;
   tcpServer.Connect(address, port);
   StreamReader srReceiver = new StreamReader(tcpServer.GetStream());

   StringBuilder wholeMsg = new StringBuilder();
   string partialMsg = "";

   while (tcpServer.Connected)
   {
      try
      {
         //Save a partial portion of the reply:
         partialMsg = srReceiver.ReadLine();

         //Reply complete:
         if ( partialMsg != null && partialMsg == "")
         {
            response = wholeMsg.ToString() + partialMsg;

            //Misc response processing code.
         }
      }
      catch (Exception ex)
      {
         //Do logging that leads to the above exception message/stacktrace
      }
   }
} 
```

# php - 将非常规字符串转换为 mysql 日期时间？

> ID：12500349
> 
> 赞同：1
> 
> 时间：2012-09-19T18:01:56.757
> 
> 标签：php, mysql, datetime

我对 php 完全陌生，想知道如何转换这个字符串：

```
Tue Jan 17 09:17:15 CST 2012 
```

转换为适合 MySQL 日期时间格式（24 小时）的格式

```
01-17-2009 09:17:15 
```

我发现 MySQL 函数 FROM_UNIXTIME() 据说可以将 PHP 时间戳转换为 MySQL DateTime。我的问题是将原始字符串转换为正确的 PHP 时间戳格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:12:24.740

快速尝试：

```
$dt = 'Tue Jan 17 09:17:15 CST 2012';
$ts = strtotime( $dt );

echo date('Y-m-d G:i:s', $ts); 
```

输出：`2012-01-17 16:17:15`

时差来自时区。我的服务器在 UTC+1 上，CST 是 UTC-6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:16:13.873

您也可以使用 mysql 功能，但我不确定时区。

```
select DATE_FORMAT(STR_TO_DATE('Tue Jan 17 09:17:15 CST 2012','%a %b %e %h:%i:%s CST %Y'),'%m-%d-%Y %h:%i:%s'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:22:23.607

如果您的 php >= 5.3，您可以使用 \DateTime::createFromFormat。我更喜欢这个解决方案而不是 strtotime 解决方案，因为你使用意味着“日期”而不是整数的东西来操纵日期。

```
$date = \DateTime::createFromFormat('D M d h:i:s T Y',$dt); 
```

# c - #include 预处理器宏名称空间

> ID：12500350
> 
> 赞同：1
> 
> 时间：2012-09-19T18:02:02.827
> 
> 标签：c, linux, gcc

这个问题是为了了解头文件包含的*标准*行为（不是在我的编译器上实现的）。

我有两个同名的头文件（但内容不同）：

```
1) /user/include/myheader.h  # In standard system folder
2) /private/myheader.h       # In my private folder 
```

假设两个标题都包含相同的多重包含防止宏

```
#ifndef MYHEADER
#define MYHEADER
...
#endif 
```

我有 C 文件 `/private/test.c`，其中包括上述两个标题：

```
#include <myheader.h>  // Includes from standard system folder
#include "myheader.h"  // Includes from the folder where test.c is present 
```

由于每个 MYHEADER 定义都有单独的名称空间，因此两个文件中的内容是否在预处理时进入 C 文件？或者由于 MYHEADER 已经在同一个命名空间中定义，第二次包含将被阻止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:06:03.037

所有宏只有一个命名空间，所有宏都在同一个命名空间中。将内容放在不同的头文件中对此没有影响——它们仍然在同一个命名空间中。因此，在您的示例中，第一个标头将定义`MYHEADER`，这将导致第二个标头被（有效地）忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:29:25.703

[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)：

> ### 6.10.3 宏替换
> 
> ...
> 7 紧随其后的标识符`define`称为*宏名称*。**宏名称有一个名称空间。**预处理标记替换列表之前或之后的任何空白字符均不被视为任一宏形式的替换列表的一部分。

强调我的。

如前所述，仅`myheader.h`处理第一个文件的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:05:09.513

^(C 标准1)中没有预处理器定义的“名称空间”之类的东西。无论²`MYHEADER`如何定义，第二个文件的内容都将被忽略。

* * *

¹ C99 标准第 6.2.3 节定义了四个名称空间 - (1) 用于标签，(2) 用于结构/联合/枚举标签，(3) 用于每个结构或联合的成员，以及 (4) 用于其他所有内容. 预处理器定义不属于这些名称空间中的任何一个，因为“这里没有进一步考虑宏名称和宏参数，因为在程序翻译的语义阶段之前，源文件中出现的任何宏名称都被预处理标记序列替换这构成了它们的宏定义。”。

²就定义`MYHEADER`而言，您有多种选择：您可以在 C 文件、头文件中定义它，或者使用 C 编译器的相应选项从命令行传递它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T18:17:32.933

由于#define 指令具有全局范围，因此将只使用一个定义，因此第二个包含将不执行任何操作。

您应该使用 MY_PROJECT_MY_HEADER 或类似的东西来防止这些问题。

# jquery - jgrowl for ruby on rails 如何？

> ID：12500353
> 
> 赞同：0
> 
> 时间：2012-09-19T18:02:33.347
> 
> 标签：jquery, ruby-on-rails-3

嘿，我正在逐步了解如何在我的 rails 应用程序中实现 jgrowl flash 通知。我对 ruby​​ on rails 还是很陌生....

在我的 application.html.erb 中，我有一些代码来处理我所有的 flash 消息

```
 <% flash.each do |key, value| %>
  <%= content_tag(:div, value, id: 'add-regular') %>
  <% end %> 
```

有什么方法可以将 jgrowl 效果添加到该代码中吗？我正在使用 DEVISE 进行身份验证。我需要使用 jGrowL 制作自定义控制器来处理我的 flash 通知吗？

我希望它处理我所有的错误/闪存/成功消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:06:51.327

只需按照下面的代码，我已经在我的应用程序中实现了 jgrowl，效果非常好，

```
 <%= msgs = ""
      flash.each do |n,m| 
        msgs += "$.jGrowl('hello');"
      end

      if msgs.size > 0
        content_tag :script , "$(document).ready(function() { #{ msgs} });" , :type => "text/javascript"
      end %> 
```

# wso2 - WSO2 Carbon 4.0.1 管理控制台中没有功能

> ID：12500365
> 
> 赞同：2
> 
> 时间：2012-09-19T18:03:32.953
> 
> 标签：wso2, wso2carbon

我们正在安装 WSO2 Carbon 4.0.1。我们有管理控制台设置，但是当我们添加存储库时： http: [//dist.wso2.org/p2/carbon/releases/4.0.1](http://dist.wso2.org/p2/carbon/releases/4.0.1) 并单击“查找功能”发生错误：“查询可安装功能时发生错误。”

我们做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:45:18.797

这可能是由于连接到远程存储库时出现网络故障。[作为一种解决方法，您可以从此处](http://dist.wso2.org/products/carbon/4.0.1/p2-repo.zip)下载 p2-repo 的 zip 形式。

解压缩并将其指向 p2-repo。（使用该选项，添加存储库时从本地文件系统中选择 repo）

hth。

# css - 在网页上添加打印机链接

> ID：12500366
> 
> 赞同：0
> 
> 时间：2012-09-19T18:03:42.230
> 
> 标签：css

我试图弄清楚是否有一种方法可以为最终用户创建打印机链接，他们可以单击并让他们在他们的机器上安装该打印机。

此命令执行此操作：

```
\\server\printer-name 
```

当我在本地运行它时，它会安装打印机，但我想将它添加到网页上的链接中，以便用户可以单击并执行相同的操作。

# jquery - 如何增加jquery mobile select的大小

> ID：12500369
> 
> 赞同：2
> 
> 时间：2012-09-19T18:03:52.130
> 
> 标签：jquery, html, jquery-mobile

我怎样才能让我`label`的我`select`和我`select`自己在同一条线上，并填充父容器的宽度？除了我的选择之外，任何其他内容都会`72%`导致它换行到下面的行。

```
<div id="tabs-1" style="">
    <fieldset class="ui-grid-a">
        <div class="ui-block-a " data-role="fieldcontain" style="margin-top:0;margin-bottom:0;">
            <label for="choice" class="select" style="margin-top:10px; margin-left: 15px;">View</label>
            <div class="ui-select" style="width:72%;">
                <select id="choice">
                    <option value="Last 15 days">Last 15 days</option>
                    <option value="Last 30 days">Last 30 days</option>
                    <option value="Last 6 months">Last 6 months</option>
                </select>
            </div>
        </div>
        <div class="ui-block-b">
            <div class="ui-input-search  ui-body-c" style=" padding-left: 4px; padding-right: 4px; border:0;">
                <input id="search" class="ui-input-text ui-btn-c" type="text" data-type="search" value="" name="search-2" placeholder="Search incoming payments">
            </div>
        </div>
    </fieldset>
    <li data-role="fieldcontain" class="ui-field-contain ui-body ui-br ui-li ui-li-static ui-body-c">
        <label class="ui-input-text" style="border-right: 1px solid #cccccc;">Submitted On</label>
        <label class="ui-input-text" style="border-right: 1px solid #cccccc;">Paid To</label>
        <label class="ui-input-text" style="border-right: 1px solid #cccccc;">Status</label>
        <label class="ui-input-text">$ Amount</label>
    </li>
    <li data-role="fieldcontain" class="ui-field-contain ui-body ui-br ui-li ui-li-static ui-body-c">
        <label class="ui-input-text">09/10/2012</label>
        <label class="ui-input-text">Jeff Daniels</label>
        <label class="ui-input-text">Processing</label>
        <label class="ui-input-text">$60.00</label>
    </li>
    <li data-role="fieldcontain" class="ui-field-contain ui-body ui-br ui-li ui-li-static ui-body-c">
        <label class="ui-input-text">09/11/2012</label>
        <label class="ui-input-text">P. Smurf</label>
        <label class="ui-input-text">Completed</label>
        <label class="ui-input-text">$20.00</label>
    </li>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:52:23.113

尝试替换：

```
 <label for="choice" class="select" style="margin-top:10px; margin-left: 15px;">View</label>
   <div class="ui-select" style="width:83%;">
      <select id="choice">
         <option value="Last 15 days">Last 15 days</option>
         <option value="Last 30 days">Last 30 days</option>
         <option value="Last 6 months">Last 6 months</option>
      </select>
    </div> 
```

经过 ：

```
<div class="ui-grid-a">
    <div class="ui-block-a" style="margin-top:10px;  text-align:right"><label>View :  </label></div>
    <div class="ui-block-b">
    <select id="choice">
        <option value="Last 15 days">Last 15 days</option>
        <option value="Last 30 days">Last 30 days</option>
        <option value="Last 6 months">Last 6 months</option>
    </select></div>
</div> 
```

# actionscript-3 - AS3 绘图 - 如何对对象进行分层，使一条线位于其他线的后面？

> ID：12500374
> 
> 赞同：1
> 
> 时间：2012-09-19T18:04:17.590
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, draw

我怎样才能在我的线后面画线？

有人能告诉我怎么做吗？

我需要它，因为我正在制作一个游泳池，所以我需要它来制作棍子。

这是我的代码：

```
stage.addEventListener(MouseEvent.MOUSE_MOVE, mousePosition);
var MouseLine:Shape = new Shape();
addChild(MouseLine);

function mousePosition(event:MouseEvent)
{
MouseLine.graphics.clear();
MouseLine.graphics.lineStyle(1, 0xFF0000, 1);
MouseLine.graphics.moveTo(375, 250);
MouseLine.graphics.lineTo(mouseX, mouseY);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:02:34.443

Flash 有一个非常简单的图层系统。您可以使用`addChild(displayObject)`which 始终将传递的对象放在其他所有对象之上，或者`addChildAt(displayObject,index)`, 将传递的显示对象放置在某个位置（或图层，如果您愿意）。索引为 0 会将其置于底部，等于子总数（减去 1）的索引将置于所有内容之上，相当于使用 addChild()。

如果需要事后（使用 addChild 之后）更改层顺序，可以使用该`setChildIndex()`方法，该方法与 addChildAt 基本相同，但用于已添加的内容。

如果你的另一条线被称为棒：

```
addChildAt(stick,0); 
```

会把你的棍子放在同一个父母身上的所有其他东西后面。如果你想要它在 MouseLine 后面的一个位置，你可以这样做：

```
addChildAt(stick,getChildIndex(MouseLine)); 
```

* * *

如果您坚持仅在单个对象内绘制（使用图形对象），那么您首先绘制的线条/形状将位于任何后续形状/线条的后面。

# c# - 使用可空类型：布尔值

> ID：12500378
> 
> 赞同：0
> 
> 时间：2012-09-19T18:04:27.303
> 
> 标签：c#

我在 DataGridView 的列中有一个复选框。现在我遇到了一个异常，因为没有选中复选框。我不知道如何处理它？

```
 private void uncheckGrid(ref DataGridView dgv, int index)
    {
        try
        {
            foreach (DataGridViewRow row in dgv.Rows)
            {
                DataGridViewCheckBoxCell check = row.Cells[1] as DataGridViewCheckBoxCell;
                if (check.Value != null) // throw an exception here.
                {
                    if ((bool)check.Value)
                    {
                        Int32 intVal = Convert.ToInt32(row.Cells[0].Value);
                        if (intVal == index)
                        {
                            check.Value = false;
                        }
                    }
                }
            } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:09:32.343

`DataGridViewCheckBoxCell check = row.Cells[1] as DataGridViewCheckBoxCell;`是一个隐式转换。它可能返回 null 因为行单元格不是真正的 a `DataGridViewCheckBoxCell`。

在强制转换后的 if 语句中添加一个附加条件：

```
if (check != null && check.Value != null)
{ /* Do stuff here */ } 
```

# php - 如何使用 twitter API 更新 twitter 个人资料标题图像？

> ID：12500383
> 
> 赞同：1
> 
> 时间：2012-09-19T18:04:48.523
> 
> 标签：php, twitter

Twitter推出了新的个人资料设计

有一个大标题图片，如 facebook 封面图片

我想知道是否有任何方法可以使用 twitter api 更新用户的标题图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:36:11.103

如果您在更新 Twitter 帐户中的标题图像时查看网络日志，您会看到调用“upload_profile_header”来保存新的标题图像。

查看请求有效负载以获取所需的参数。

真实性_token=...&fileData=...&fileName=...&height=260&offsetLeft=0&offsetTop=0&uploadType=header&width=520。

从理论上讲，如果您要使用上面列出的所有参数 POST 到 account/upload_profile_header，这应该可以工作。

我还没有测试过这个概念，这只是我的建议。

让我知道进展如何

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:07:30.180

似乎没有从查看 API 文档，没有：[https ://dev.twitter.com/docs/api/1.1#112](https://dev.twitter.com/docs/api/1.1#112)

如果他们不这样做，我也不会感到惊讶。Facebook 不允许第三方应用设置封面照片，因为这可能导致应用从本质上“劫持”用户个人资料以获取自己的推广收益。

# django - Django建模：在同一个对象中两次使用相同的数据

> ID：12500384
> 
> 赞同：0
> 
> 时间：2012-09-19T18:04:50.853
> 
> 标签：django, database-design, django-models

我正在尝试为我们每周朋友之间的足球比赛编写一个 django 应用程序。

我计划创建一个名为 Player 的模型和一个名为 Game 的模型，让 Game 拥有（并属于）许多 Player，这样人们就可以注册自己的 Game。

但是在一周中的某个时候，我想将一些球员分配到一支球队，而将一些球员分配给另一支球队——但直到每个人都有机会注册。

我可以看到我可以通过让一个游戏有两个团队并且每个团队有很多玩家来做到这一点，但这意味着我在游戏模型中不止一次地使用进入一个团队的每个玩家。这对我来说不太合适。

我显然还想将可以进入每个团队的玩家的选择限制为已注册游戏的玩家。

有没有另一种建模方法，这样我就不会在同一个游戏对象中两次使用相同的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:32:59.963

~~由于您需要跟踪注册并将玩家分配到团队中，因此我看不到任何其他方式~~。实际上刮擦。

中间（GamePlayerMembership）实例的存在可以表明玩家是否已经注册了游戏。所以我的看法是这样的：

```
from django.db import models

class Player(models.Model):
    name = models.CharField()

class Game(models.Model):
    starts_when = models.DatetimeField()
    players = models.ManyToManyField(Player, through='GamePlayerMembership', related_name='games_played')

    def register(self, player):
        return GamePlayerMembership.objects.create(game=self, player=player)

    def assign(self, player, team):
        try:
            memb = GamePlayerMembership.objects.get(game=self, player=player)
            memb.team = team
            memb.save()
        except GamePlayerMembership.DoesNotExist:
            raise Exception('Player has not registered for the game')

class GamePlayerMembership(models.Model):
    TEAMS = (
        ('home', 'Home'),
        ('guest', 'Guest')
    )
    game = models.ForeignKey(Game)
    player = models.ForeignKey(Player)
    team = models.CharField(max_length=5, choices=TEAMS, null=True, blank=True)

    class Meta:
        unique_together = ('game', 'player') 
```

# javascript - jstree 显示原始 json，而不是树

> ID：12500387
> 
> 赞同：1
> 
> 时间：2012-09-19T18:05:04.323
> 
> 标签：javascript, jquery, json, jstree

当前网页显示一个静态 jstree。该脚本（如下所示）与 JSP 页面位于同一文件中，使用添加到 spring 模型的数据。

设置#1

```
<div id="permissions" class="scroll"></div>
<script type="text/javascript" class="source">
    $(function () {
        $("#permissions").jstree({ 
            "plugins" : [ "themes", "json_data", "checkbox", "sort", "ui" ],
            "checkbox" : { "override_ui" : true },
            "themes" : { "icons" : false },
            "json_data" : { "data" : ${permissionTree} }
        });
    });
</script> 
```

为了对其进行更多的动态控制，我将脚本移动到一个 javascript 文件中，并使其能够显示不同的信息。不过，出于测试目的，我使用的数据与以前完全相同。

设置 #2

```
function getPermissions(str) {
$.getJSON("getPermissions.htm", {id : str},
    function(data) {
        $(function () {
            $("#permissions").jstree({ 
                "plugins" : [ "themes", "json_data", "checkbox", "sort", "ui" ],
                "checkbox" : { "override_ui" : true },
                "themes" : { "icons" : false },
                "json_data" : { "data" : JSON.stringify(data) }
            });
        });
    }); 
```

}

但是，使用设置 #2，树显示原始 JSON，而不是树。我已经确认在这两种情况下`data`都是一样的。那么给了什么？为什么它不能以这种方式工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:19:40.143

`"data"`在下面的代码片段中应该包含一个对象或数组值。

```
"json_data" : { "data" : JSON.stringify(data) } 
```

试试这个：

```
"json_data" : { "data" : data } 
```

# unit-testing - 我可以配置 Grails 以在我的插件中查看测试类吗？

> ID：12500389
> 
> 赞同：3
> 
> 时间：2012-09-19T18:05:15.383
> 
> 标签：unit-testing, grails, classpath

我有一个大型 grails 项目，拆分为几个“就地”插件，以保持良好和模块化。我的一个插件，称为“核心服务”，包含我所有的域类，以及一些由许多单元测试共享的抽象测试类（添加模拟域实例等）中的一些不错的设置工作。

这对于也存在于插件中的单元测试来说非常棒，但我想使用该抽象测试类在使用该插件的其他 grails 项目的测试中设置模拟数据。运行测试时，插件的测试类似乎不包含在类路径中。有没有办法告诉 Grails 包含它们？：

```
//this abstract test class is in the core service plugin's test directory.  My IDE has no problem with this import
import com.myproject.coreservices.service.AbstractGiftInstanceRelatedUnitTest 

//this test class is in the project that uses the plugin
class ClaimGiftControllerTests extends AbstractGiftInstanceRelatedUnitTest { 

.. my tests
} 
```

和输出（不重要的部分被删除）：

```
| Error Compilation error compiling [unit] tests: startup failed:
...../test/unit/com/myproject/ClaimGiftControllerTests.groovy: 3: unable to resolve class com.myproject.coreservices.service.AbstractGiftInstanceRelatedUnitTest
 @ line 3, column 1.
   import com.myproject.coreservices.service.AbstractGiftInstanceRelatedUnitTest
   ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:34:34.810

您可以将 AbstractGiftInstanceRelatedUnitTest 放入插件的 src/groovy 文件夹，而不是 test 文件夹。这样您就可以将它包含在插件和其他项目的测试用例中。

# javascript - 为什么没有记录我的 Google Analytics（分析）自定义变量？

> ID：12500390
> 
> 赞同：3
> 
> 时间：2012-09-19T18:05:27.697
> 
> 标签：javascript, google-analytics

我正在尝试为 Google Analytics 设置 5 个自定义变量，如下所示：

```
<script>
    //<![CDATA[
    var _gaq=[["_setAccount","UA-XXXXXXXXX-X"],["_trackPageLoadTime"]];
    _gaq.push(['_setCustomVar', 1, 'categories', 'News', 3]);   
    _gaq.push(['_setCustomVar', 2, 'tags', 'something, another, passbook, iphone, ipod, ios6, insider, egift, more things, some other stuff', 3]);  
    _gaq.push(['_setCustomVar', 3, 'productcount', 0, 3]);  
    _gaq.push(['_setCustomVar', 4, 'isvideo', 'false', 3]);
_gaq.push(['_trackPageview']);

(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
s.parentNode.insertBefore(g,s)}(document,"script"));
//]]>

</script> 
```

我想我已经遵守了所有规则，在调用 trackPageView 之前添加了不超过 5 个自定义变量，但它们仍然没有出现在 Google Analytics 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T22:00:46.173

### 可能性：

*   自定义变量可能会落后于 _trackPageview 在 GA UI 中的显示。（来源#1）
*   如果您使用的是 ga_debug.js，您可以在控制台中看到回击的内容。（来源#2）
*   您正在使用 CustomVar(2) 接近 128 的自定义变量长度。由于这是测试数据，请确保您的真实数据不会超过。（来源#3）
*   Eduardo 是正确的，0 与“0”导致 CustomVar(3) 不触发。（来源 #2 和测试）
*   _trackPageLoadTime 已弃用（来源 #2+3 和测试）

### 链接/参考：

1.  [掌握 Google Analytics（分析）自定义变量](http://cutroni.com/blog/2011/05/18/mastering-google-analytics-custom-variables/)
2.  [谷歌分析调试器](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)
3.  [官方 Google Analytics 自定义变量文档](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)

### 更新了调试器演示页面中的片段：

*（从不是 localhost 或 file:// 的东西提供服务）*

```
<html><head><title>Demo</title><script>

var _gaq=[["_setAccount","UA-XXXXXXXXX-X"]];
_gaq.push(['_setCustomVar', 1, 'categories', 'News', 3]);   
_gaq.push(['_setCustomVar', 2, 'tags', 'something, another, passbook, iphone, ipod, ios6, insider, egift, more things, some other stuff', 3]);  
_gaq.push(['_setCustomVar', 3, 'productcount', '0', 3]);  
_gaq.push(['_setCustomVar', 4, 'isvideo', 'false', 3]);
_gaq.push(['_trackPageview']);
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
s.parentNode.insertBefore(g,s)}(document,"script"));

</script></head><body><h1>Open your console</h1></body></html> 
```

# c# - 在我的 Metro 应用程序中从 Windows 资源管理器打开文件

> ID：12500392
> 
> 赞同：1
> 
> 时间：2012-09-19T18:05:29.150
> 
> 标签：c#, .net, windows-8, microsoft-metro

来自 Windows 窗体背景，当用户尝试从 Windows 资源管理器打开文本文件时，我习惯于在 Program.cs 文件中处理传递给我的应用程序的参数，以便我的应用程序可以显示其内容给用户。

但是，在 Metro 风格的应用程序中，我们不再有 Program.cs 文件。我们有 App.xaml 或 App.xaml.cs 文件。

好像我找不到相关文档，我可以尝试在 App.xaml.cs 文件中以“通常”的方式进行操作，但我什至不确定这是否是正确的方法。我已将适当的功能和文件类型关联添加到我的 Metro 风格应用程序中，但除此之外我不知道从哪里开始。

我们如何将支持的文件从 Documents 文件夹打开到我们自己的 Metro 风格应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:26:13.563

请参阅如何处理文件激活@ [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779669.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779669.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:27:21.150

您可以通过两个特定步骤处理此问题：

1.  在清单中声明文件扩展名。您可以通过在 VS 的解决方案资源管理器中打开 package.appxmanifest，转到声明选项卡，然后添加“文件类型关联”声明和相关信息来执行此操作。
2.  在您的激活处理程序中，您将看到偶数有一个“Kind”参数。这将是文件启动（从资源管理器或其他地方）的“文件”。您将在同一对象的“文件”属性中获取文件。

完整的细节在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh452684.aspx)。获得文件后，您可以使用标准的 Windows.Storage API 来访问这些文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T07:17:39.533

1.  在解决方案资源管理器中打开 package.appxmanifest。
2.  选择声明选项卡。
3.  从下拉列表中选择文件类型关联，然后单击添加。
4.  输入 txt 作为名称。
5.  输入 .txt 作为文件类型。
6.  输入“images\Icon.png”作为徽标。

在应用程序包中添加正确的图标

在 c# 中，您需要处理 OnFileActivated 事件

```
protected override void OnFileActivated(FileActivatedEventArgs args)
{
 // TODO: Handle file activation

// The number of files received is args.Files.Size
// The first file is args.Files[0].Name
} 
```

# c - 使用 setvbuf 使内存缓冲区像 FILE*

> ID：12500394
> 
> 赞同：0
> 
> 时间：2012-09-19T18:05:31.490
> 
> 标签：c

我需要一种跨平台的方式将内存缓冲区视为`FILE*`. 我已经看到其他问题指出没有可移植的方法来做到这一点（linux 中的 fmemopen 是我需要的，但它在 Windows 平台上失败）。

我试过使用 setvbuf，它似乎工作。谁能指出使用 setvbuf 函数的确切问题？

另外，我看过 C 标准草案 WG14/N1256 和 7.19.5.6 说：

> 任何时候数组的内容都是不确定的。

我不明白如果我使用自己的缓冲区，它的内容怎么可能是不确定的？

**编辑**：感谢所有的答案。不再使用这种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:14:29.190

不，真的，没有便携的方法可以做到这一点。

使用`setvbuf`可能*看起来*有效，但您实际上是在调用未定义的行为，并且它会在意想不到的时间以意想不到的方式失败。正如您所提到的，GNU C 库确实具有[`fmemopen(3)`](http://linux.die.net/man/3/fmemopen)扩展，但它不能移植到非 GNU 系统。

如果您正在使用一些需要`FILE*`指针的库，并且内存中只有所需的数据，则只需将其写入临时文件并传入该文件的句柄即可。理想情况下，您的库应该提供一个替代函数，该函数采用内存指针而不是文件指针，但如果没有，那么您就不走运了（您应该向库编写者抱怨该缺陷）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:15:11.877

函数`setvbuf()`用于告诉`FILE`要用作缓冲区的内存，但它没有指定如何使用该内存：这取决于实现。

因此，缓冲区的内容在任何时候都是不确定的，如果它恰好对您有用，那只是偶然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:15:29.263

这取决于您想对缓冲区/文件 * 做什么。您当然可以执行简单的操作并摆脱它们，但您不能保证所有 FILE* 操作都会在您的内存缓冲区上按预期执行。

对不起，根本没有跨平台的单行来获得完整的FILE *特性，我已经尝试过很多次了哈哈

你可以尝试什么：

*   #define-wrapped 操作系统特定逻辑
*   进一步查看您尝试与之交互的界面。在某些时候，它无论如何都只是在使用缓冲区。然后在你的缓冲区中拼接。这就是我所做的。
*   你的技术+信念。

# assembly - MIPS 存储字 (sw)

> ID：12500405
> 
> 赞同：3
> 
> 时间：2012-09-19T18:06:20.563
> 
> 标签：assembly, mips

我正在尝试将整数存储到`$s0`中，这是在循环标签中。

但问题是我将打印一个整数并将其保存在`$s0`.

我做了以下

```
sw $t7,0($s0)
addi $s0,$s0,4 
```

我认为下面将允许我将每个整数存储在一个插槽中`$s0`，但如果我`lw`，我只会得到打印的最后一个整数

下面的代码：粗体我尝试存储一个单词，但就像你说的那样它会覆盖这是一个家庭作业问题，所以我很想学习，请提供一些指导，下次我会知道

```
 .data                               

n1:     .asciiz "\n"                        #ASCII for a new line

        .align 2                            

name:   .asciiz "Fibonacci\n\n\n"               #Lab Title and Student Name
        .align 2

msg1:   .asciiz "Fibonacci result " #note the space
        .align 2                            

msg2:   .asciiz " is "                      #note the space
        .align 2

**array:  .space 20                     #define the array**

        .text                               #
        .globl  main                        #declare main to be global

main:   

        la  $a0,name                        #load the ram address of "name" into $a0
        li  $v0,4                           #system call, type 4, print a string, $a0
        syscall                             #call the "OS" to perform operation

        li  $t2,0                           # $t2 :=0; initial value of F(n-2)
        li  $t1,1                           # $t1 :=1; initial value of F(n-1)

        li  $t4,0                           #index, n.

                                            #loop is a local Variable
        li  $t5,11                      #loading immediate preset value for $t5 

        **la $t7,array                      #load address (array) into $t7**

loop:   addu    $t0,$t1,$t2                 # F(n) = F(n-1) + F(n-2)

        **#Only print the last 5 numbers**
        sub $t3,$t5,$t4
        li $t6,5
        bgt $t3,$t6,Printl

        la $a0,msg1                         # $a0 := address of message 1
        li $v0,4                            #system call, type 4, print a string
        syscall                             #call the "OS"

        move    $a0,$t4                     # $t4 contains the current value of n
        li  $v0,1                           #system call, type 1, print an integer $a0
        syscall                             #call the "OS"

        la $a0,msg2                         # $a0:=address of "msg2"
        li $v0,4                            #system call, type 4, print a string
        syscall                             #call the "OS"

        move    $a0,$t0                     # $a0 :=$t0, which is F(n)
        li  $v0,1                           #system call, type 1, print an integer $a0
        syscall                             #call the "OS"

        **sw $s0, 4($t7)**

        la  $a0,n1                          # $a0 := address of "n1"
        li  $v0,4                           #system call, type 4, print a string
        syscall                             #call the "OS"

        addi    $t4,1                       # $t4 := $t4 + 1; increment n
        move    $t2,$t1                     # $t2 := $t1; old F(n-2) because old F(n-1)
        move    $t1,$t0                     # $t1 := $t0; old F(n-2) because old F(n)

        beq     $t5,$t4,Exit            #Conditional Check | exit

        j       loop                        # branch unconditionally to loop ($t3 != 0)

Exit:   
        la $a0,n1                           # $a0 := address of message 1
        li $v0,4                            #system call, type 4, print a string
        syscall                             #call the "OS"

        #la $t7,array
        #li $v0,1
        #sw $s0, 4($t7)
        #syscall

        li      $v0,10                      #system call, type 10, standard exit
        syscall                             #call the "OS"

Printl: 
        addi $t4,1
        move $t2,$t1
        move$t1,$t0
        j loop 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-17T19:37:06.190

不确定你是否还在这里。:) 但是，如果你是，并且在两个学期后你仍然在偶然地做 MIPS，那么这里的东西可能会有所帮助。

您已经注意到`sw $s0, 4($t7)`将把 $s0 的内容写入 ($t7 + 4) 指向的地址。由于 $t7 的值永远不会改变，您将不断地将 $s0 的内容一遍又一遍地写入同一个地址。

如果要将 $s0 的内容存储到从 开始的连续单词中`array`，则需要初始化指针，对它做你想做的事情，然后递增它。

```
la $t7,array
loop:
# do something to set $s0
sw $s0, 0($t7)
# do something to break out of loop if condition is met
addi $t7, 4
j loop 
```

不要忘记您已定义`array`为 20*个字节*- 这只是 5 个字。

# objective-c - 我可以使用 AVFoundation 将下载的视频帧流式传输到 OpenGL ES 纹理中吗？

> ID：12500408
> 
> 赞同：20
> 
> 时间：2012-09-19T18:06:31.680
> 
> 标签：objective-c, ios, opengl-es, streaming, avfoundation

我已经能够使用 AVFoundation 的`AVAssetReader`类将视频帧上传到 OpenGL ES 纹理中。但是，它有一个[警告](https://stackoverflow.com/questions/6242131/using-avassetreader-to-read-stream-from-a-remote-asset)，因为它在与`AVURLAsset`指向远程媒体的 an 一起使用时会失败。这个失败没有很好的记录，我想知道是否有任何方法可以解决这个缺点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-19T18:06:31.680

iOS 6 中发布了一些 API，我可以使用这些 API 使该过程变得轻而易举。它根本不使用`AVAssetReader`，而是依赖于一个名为`AVPlayerItemVideoOutput`. `AVPlayerItem`可以通过新`-addOutput:`方法将此类的实例添加到任何实例。

与 不同的是`AVAssetReader`，此类对于`AVPlayerItem`由远程支持的 s可以正常工作，并且还具有允许通过(而不是严格限制方法)`AVURLAsset`支持非线性播放的更复杂的播放接口的好处。`-copyPixelBufferForItemTime:itemTimeForDisplay:``AVAssetReader``-copyNextSampleBuffer`

* * *

### 示例代码

```
// Initialize the AVFoundation state
AVURLAsset *asset = [AVURLAsset URLAssetWithURL:someUrl options:nil];
[asset loadValuesAsynchronouslyForKeys:[NSArray arrayWithObject:@"tracks"] completionHandler:^{

    NSError* error = nil;
    AVKeyValueStatus status = [asset statusOfValueForKey:@"tracks" error:&error];
    if (status == AVKeyValueStatusLoaded)
    {
        NSDictionary* settings = @{ (id)kCVPixelBufferPixelFormatTypeKey : [NSNumber numberWithInt:kCVPixelFormatType_32BGRA] };
        AVPlayerItemVideoOutput* output = [[[AVPlayerItemVideoOutput alloc] initWithPixelBufferAttributes:settings] autorelease];
        AVPlayerItem* playerItem = [AVPlayerItem playerItemWithAsset:asset];
        [playerItem addOutput:[self playerItemOutput]];
        AVPlayer* player = [AVPlayer playerWithPlayerItem:playerItem];

        // Assume some instance variable exist here. You'll need them to control the
        // playback of the video (via the AVPlayer), and to copy sample buffers (via the AVPlayerItemVideoOutput).
        [self setPlayer:player];
        [self setPlayerItem:playerItem];
        [self setOutput:output];
    }
    else
    {
        NSLog(@"%@ Failed to load the tracks.", self);
    }
}];

// Now at any later point in time, you can get a pixel buffer
// that corresponds to the current AVPlayer state like this:
CVPixelBufferRef buffer = [[self output] copyPixelBufferForItemTime:[[self playerItem] currentTime] itemTimeForDisplay:nil]; 
```

获得缓冲区后，您可以根据需要将其上传到 OpenGL。我推荐这个可怕的记录`CVOpenGLESTextureCacheCreateTextureFromImage()`功能，因为你会在所有较新的设备上获得硬件加速，这*比*`glTexSubImage2D()`. 有关示例，请参阅 Apple 的[GLCameraRipple](http://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html)和[RosyWriter](http://developer.apple.com/library/ios/#samplecode/RosyWriter/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011110)演示。

# c++ - 设置 std::function 变量以引用 std::sin 函数

> ID：12500411
> 
> 赞同：7
> 
> 时间：2012-09-19T18:06:43.957
> 
> 标签：c++, c++11, function-pointers, std, c++-standard-library

我有一个关于如何正确使用新的 C++11`std::function`变量的问题。我在网上搜索过几个例子，但它们似乎没有涵盖我正在考虑的用例。举这个最小的例子，其中函数`fdiff`是定义的有限前向差分算法的实现`numerical.hxx`（这不是问题，我只是想给出一个上下文原因，为什么我想采用任意函数并传递它） .

```
#include <functional>
#include <iostream>
#include <cmath>
#include "numerical.hxx"

int main()
{
    double start = 0.785398163;
    double step  = 0.1;
    int    order = 2;

    std::function<double(double)> f_sin = std::sin;

    std::cout << fdiff(start, step, order, f_sin) << std::endl;

    return 0;
} 
```

尝试编译上述程序给了我错误（在 clang++ 中）

```
test.cpp:11:32: error: no viable conversion from '<overloaded function type>' to
      'std::function<double (double)>'
        std::function<double(double)> f_sin = std::sin;
                                      ^       ~~~~~~~~
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/functional:2048:7: note: 
      candidate constructor not viable: no overload of 'sin' matching
      'nullptr_t' for 1st argument
      function(nullptr_t) noexcept
      ^
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/functional:2059:7: note: 
      candidate constructor not viable: no overload of 'sin' matching 'const
      std::function<double (double)> &' for 1st argument
      function(const function& __x);
      ^
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/functional:2068:7: note: 
      candidate constructor not viable: no overload of 'sin' matching
      'std::function<double (double)> &&' for 1st argument
      function(function&& __x) : _Function_base()
      ^
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.1/../../../../include/c++/4.7.1/functional:2092:2: note: 
      candidate template ignored: couldn't infer template argument '_Functor'
        function(_Functor __f,
        ^
1 error generated. 
```

或来自 g++

```
test.cpp: In function ‘int main()’:
test.cpp:11:45: error: conversion from ‘&lt;unresolved overloaded function type>’ to non-scalar type ‘std::function<double(double)>’ requested 
```

据我了解这个问题，这是因为`std::sin`在标准库中实现为模板类，但我似乎无法弄清楚我需要做些什么来提供足够的专业化来获得函数引用。我还尝试了各种方法，例如使用 new`auto`关键字、`&std::sin`用于获取指针等，但它们都给了我相同类型的错误。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T18:12:46.497

[`std::sin`](http://en.cppreference.com/w/cpp/numeric/math/sin) is an overloaded function: you must disambiguate which `std::sin` overload you mean:

```
std::function<double(double)> f_sin = (double(*)(double))&std::sin; 
```

There are some cases where the compiler can disambiguate overloaded functions (e.g., if `f_sin` was of type `double(*)(double)`, the cast would not be required). However, this is not one of those cases.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:09:04.330

使用 lambda，您将始终处于安全状态：

```
std::function<double(double)> f_sin = [](double arg) -> double { return std::sin(arg); }; 
```

实际上你可以做得更好，如果你可以改变`fdiff`或者它已经接受模板参数 - 不仅仅是`std::function<double(double)>`：

```
auto f_sin = [](double arg) -> double { return std::sin(arg); };
std::cout << fdiff(start, step, order, f_sin) << std::endl; 
```

[更新] 这个答案是新版本，以前使用函数模板专业化的建议是不正确的，因为 std::sin 不是函数模板而是一组重载函数。

# windows - IIS 7.5 上的基本身份验证

> ID：12500414
> 
> 赞同：0
> 
> 时间：2012-09-19T18:07:08.697
> 
> 标签：windows, iis-7.5

我正在尝试在 IIS 服务器上运行具有基本身份验证的简单 ASP.NET 应用程序。有趣的是，除了我的生产服务器之外，几乎所有服务器上的身份验证都可以正常工作。当我在该机器上部署应用程序时，它不断提示我输入凭据。不幸的是，这是一台我无权访问的实验室机器，也无法查看日志。

我猜它是在 Windows 2008 VM 服务器上运行的 IIS 7.5 服务器，并且内容文件夹（默认应用程序指向的位置）与我们共享（我们对该文件夹具有写入权限，这就是我们部署应用程序的方式） .

服务器上的外部身份验证设置，还有哪些其他原因可能导致问题？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:47:56.333

这很可能是对 Web 应用程序使用的资源的访问权限。您看到此重复登录提示的原因是该帐户没有所需的权限。

首先，您必须确定您是否使用模拟。如果您进行模拟，则经过身份验证的帐户需要必要的权限。如果您不模拟，则应用程序池帐户需要必要的权限。

那么需要什么权限呢？

嗯，这可能是很多事情，我们不知道您的应用程序的详细信息。
你连接到数据库吗？
然后，您必须确保当前帐户上下文具有连接到数据库的正确权限。

您是否从磁盘读取图像/文件？
然后，您必须确保当前帐户上下文具有访问这些资源的正确权限。

如果您正在访问的是文件资源，我建议您使用 Fiddler 并确定您需要处理的路径。它会通过那些 404 错误告诉你。

编辑：确保您的应用程序池帐户具有您提到的此 DLL 所需的权限。它从哪里获取此列表？它在DLL中是静态的吗？这个 DLL 在哪里？在您尝试登录时，还请检查服务器上的事件日志是否有任何相关错误。

# python - Python CSV 阅读器 fmtparams

> ID：12500416
> 
> 赞同：2
> 
> 时间：2012-09-19T18:07:26.167
> 
> 标签：python, csv

我有 2 行不同的代码：

```
f = open("file.csv", "rt") 
```

和：

```
f = open("file.csv", "rb") 
```

我一直在尝试在线搜索这意味着什么，但我只能找到其他示例。我想知道是什么`rt`意思`rb`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:13:47.960

您是否考虑过查看[文档](http://docs.python.org/library/functions.html#open)？

# jquery - jQuery 可排序的下拉链接

> ID：12500421
> 
> 赞同：1
> 
> 时间：2012-09-19T18:07:55.060
> 
> 标签：jquery, jquery-ui-sortable, droppable

删除时我遇到了可排序元素的问题。我将其设置为具有充当链接的图像，它覆盖了整个可排序区域。基本上，您可以对图像进行排序和排列，单击它们以打开链接，或将它们拖到拖放区以将其删除。

我主要有这个工作，除了在 Firefox 中，链接在放置元素时打开（仅在放置区域中）。我在 Internet Explorer (8) 和 Chrome 中都没有这个问题。

以下是一些代码片段：

```
$(document).ready(function () {
    $('.Droppable').droppable({
        drop: function (event, ui) {
            $(ui.draggable).remove();
        }
    });
    $("#ElementsArea").sortable();
});

<ul id="ElementsArea">
<li id="1" value="google" class="ui-state-default"><a href="http://www.google.com" target="_blank"><img src="Images/placeholderblack.png" /></a></li>
<li id="2" value="yahoo" class="ui-state-default"><a href="http://www.yahoo.com" target="_blank"><img src="Images/placeholderyellow.png" /></a></li>
<li id="3" value="bing" class="ui-state-default"><a href="http://www.bing.com" target="_blank"><img src="Images/placeholderblack.png" /></a></li>
<li id="4" value="nhl" class="ui-state-default"><a href="http://www.nhl.com" target="_blank"><img src="Images/placeholderyellow.png" /></a></li>
<li id="5" value="mlb" class="ui-state-default"><a href="http://www.mlb.com" target="_blank"><img src="Images/placeholderblack.png" /></a></li>
<li id="6" value="nfl" class="ui-state-default"><a href="http://www.nfl.com" target="_blank"><img src="Images/placeholderyellow.png" /></a></li>
<li id="7" value="tsn" class="ui-state-default"><a href="http://www.tsn.ca" target="_blank"><img src="Images/placeholderblack.png" /></a></li> 
```

和CSS（不是很重要，但我想我会添加它）：

```
#ElementsArea
{
    width: 500px;
    height: 800px;
    display: block;
    border: 1px solid black;
    list-style-type: none; 
    margin: 0; 
    padding: 0;
    float: left;
}

#ElementsArea li
{
    margin: 3px 3px 3px 0; 
    padding: 1px; 
    float: left; 
    width: 125px; 
    height: 125px; 
    text-align: center;
}

.Droppable
{
    margin: 3px 3px 3px 0; 
    padding: 1px; 
    float: left; 
    width: 125px; 
    height: 125px; 
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:08:57.213

我可以确认在 Firefox 中，它会在放入拖放区后打开链接（使用您的代码）。[例子](http://jsfiddle.net/jur4x/c9ads/2/)。

如果您在可排序中使用对象的克隆，则可以修复此问题。[工作示例](http://jsfiddle.net/c9ads/5/)。

```
$("#ElementsArea").sortable({helper: 'clone'}); 
```

# performance - YUI 3.3 和 YUI 3.7 的区别

> ID：12500423
> 
> 赞同：0
> 
> 时间：2012-09-19T18:08:01.503
> 
> 标签：performance, yui, yui3

我有一个使用 YUI 3.3.0 和 YUI 2.9.0 的网站（使用 YUI 2in3 项目），现在我正在尝试提高网站初始加载时的性能，我遵循了我在网上找到的几个提示，但我想知道如果我从 YUI 3.3.0 升级到 YUI 3.7.1 是否有任何改进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:40:02.253

有什么不同？YUI 3.3.0 于 2011 年 1 月发布，3.7.1 于 2012 年 9 月发布，因此 YUI 团队和社区在缺少的库（4 个版本）上工作了约 20 个月。由于 YUI 有数百个模块，因此很难准确确定哪些更改可能会影响您的站点。它可能很少，也可能很多。不过，升级不太可能减慢您的网站速度。性能一直是该项目的重中之重，因此只要能够获得性能胜利，就会采取行动。例如，最近的 3.6.0->3.7.0 引入了一些显着的自定义事件性能改进（[来源](http://www.yuiblog.com/blog/2012/08/31/yui-3-7-0pr1-event-performance/)）。

您可以浏览每个发布公告，看看是否满足了您的任何特定需求：

*   [3.4.0](http://www.yuiblog.com/blog/2011/08/18/announcing-yui-3-4-0-and-the-new-yuilibrary-com/)
*   [3.5.0](http://www.yuiblog.com/blog/2012/04/10/announcing-yui-3-5-0/)
*   [3.6.0](http://www.yuiblog.com/blog/2012/08/01/announcing-yui-3-6-0/)
*   [3.7.0](http://www.yuiblog.com/blog/2012/09/18/announcing-yui-3-7-0/)

此外，如果您对您的网站和 YUI 性能有任何具体问题，请在 Freenode 上访问#yui。

# jplayer - 如何使用jplayer.swf、jplayer.js在本地磁盘中，而不是在网页中

> ID：12500426
> 
> 赞同：0
> 
> 时间：2012-09-19T18:08:13.170
> 
> 标签：jplayer

如果我将 Jplayer.swf、jplayer.js 和*.mp3 文件放在本地磁盘中，例如 "d:\mypage\MP3* .mp3"、"d:\mypage\JS\jplayer.js"、"d:\mypage \JS\Jplayer.swf" 和 "d:\mypage\mypage.htm",

swfPath = ¿?

我已经尝试了许多不同的 swfPath，但是其中任何一个都不能在 IE 8 和 FF 中使用

可以以任何方式使用此配置（在本地磁盘中）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:32:35.763

您应该能够使用相对路径：

```
swfPath = ".JS/Jplayer.swf"; 
```

# java - 为我的应用程序打开一个 html 帮助页面

> ID：12500429
> 
> 赞同：0
> 
> 时间：2012-09-19T18:08:17.723
> 
> 标签：java, awt

我有一个程序，它有一个帮助 jmenuItem，它将打开我专门为程序指导制作的 html“help.html”文件。所以我希望它从默认浏览器中弹出，从包含我的程序的同一路径读取它。我的 html 文件名为“help.html”。我将如何得到它。以下是我尝试过的方法，我以某种方式做错了，感谢您提供任何帮助，在此先感谢您。

```
 try{ 
            String url = "help.html"; 
            java.awt.Desktop.getDesktop().browse(java.net.URI.create(url)); 
            } 
              catch (java.io.IOException e1)
             { 
              System.out.println(e1.getMessage()); 
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:19:53.383

试试这个：

```
java.awt.Desktop.getDesktop().browse(new File(url).toURL()) 
```

# ios - 将 Google Places API 与 MonoTouch 一起使用？

> ID：12500431
> 
> 赞同：0
> 
> 时间：2012-09-19T18:08:19.257
> 
> 标签：ios, google-maps, xamarin.ios, google-api, monodevelop

我知道可以将 Google Places API 与 MonoTouch 一起使用，但我无法让它工作。我的 API 密钥和所有 URL 格式正确，但有人可以向我提供一些示例代码，说明如何获取和使用来自请求 url 的响应吗？（例如：[https](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere) ://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:42:13.060

我最终使用了下面的代码，它为我提供了一个 JsonObjects 的 JsonArray，我可以遍历并使用它。对于此示例，它适用于地点文本搜索，而不是标准地点搜索。

```
HttpWebRequest url = (HttpWebRequest)WebRequest.Create("https://maps.googleapis.com/maps/api/place/textsearch/json?    query=Sushi&sensor=false&type=restaurant&key=YOUR_KEY_HERE");
HttpWebResponse temp = (HttpWebResponse)url.GetResponse ();
JsonValue jval = JsonObject.Load (temp.GetResponseStream ());
JsonObject jobj = (JsonObject)jval;
var resultJson = jobj["results"]; 
foreach (JsonObject jentry in resultJson)
{
//Do stuff with the jentry
} 
```

# java - 在数组值之间打印空格

> ID：12500432
> 
> 赞同：0
> 
> 时间：2012-09-19T18:08:41.163
> 
> 标签：java, arrays, project

我有这个代码，

```
else if (e.getSource() == saveButton) {
            Scanner scan;
            String es = " ";
            try {
                int status = chooser.showSaveDialog(null);
                if (status == JFileChooser.APPROVE_OPTION) {
                    File newImageName = chooser.getSelectedFile();
                    PrintWriter outFile = new PrintWriter(new FileWriter(newImageName));
                    outFile.print(drawing.typefile);
                    outFile.print(drawing.iname);
                    outFile.print(drawing.width);
                    outFile.print(es);
                    outFile.print(drawing.height);
                    outFile.print(drawing.maxshade);
                    for(int r = 0; r < drawing.array.length; r++)
                        for(int c = 0; c < drawing.array[r].length; c++)
                            outFile.print(drawing.array[r][c]);

            //      outFile.print(drawing.paintComponent(newImageName));
                    outFile.flush();
                    outFile.close();
                }
             else if (status == JFileChooser.CANCEL_OPTION) {
                }
            } catch (Exception ex) {
                    JOptionPane.showMessageDialog(null, "File could not be written, try again.");
                    //ex.printStackTrace();
                }

        } 
```

以及如何让它在值之间打印空格？它打印

```
P2image1.pgm320 275255132132130125125128 
```

我需要它来打印

```
P2image1.pgm320 275255132 132 130 125 125 128 
```

因此每个数组值之间都有一个空格，我尝试了很多东西，但我完全糊涂了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:13:12.123

只需在每个数字后显式打印一个空格。

您是否尝试过类似的方法：

```
for(int r = 0; r < drawing.array.length; r++) {
    for(int c = 0; c < drawing.array[r].length; c++) {
        outFile.print(drawing.array[r][c]);
        outFile.print(" ");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:14:19.377

```
outFile.print(drawing.array[r][c]);
outFile.print(" "); 
```

# c# - 无节流查找 - 防止彻底的数据盗窃

> ID：12500433
> 
> 赞同：0
> 
> 时间：2012-09-19T18:08:44.060
> 
> 标签：c#, asp.net, security, captcha, bots

**考虑这种情况：**

客户出售数据，他们希望允许对访问其网站的任何人进行多次免费查找。但是，他们希望阻止有人获得全部 300,000 多条记录以试图与他们竞争。此外，对任何给定会话中合法免费查找的数量设置上限也是可取的。

对于机器人，不排除这些，但正在寻找替代方案：验证码（为了客户体验想避免），使用简单的蜜罐（也许，但试图加强一点）。

**以下有什么大漏洞吗？- （或完全不同的方向？）**

我正在考虑使用计数器来跟踪（和限制）查找次数。我会更新客户端（隐藏字段）和服务器（可能是会话）上的计数，以确保它们在每次发布时保持同步。知道机器人可能会填充“计数”字段，我也会将其增加 3（或任何值）以使其难以预测。如果客户端发送的内容与会话值不匹配，它们将被发送到西伯利亚……或者可能是验证页面。如果是人类，那么他们的上限为 x/3。

反馈赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:04:19.800

对于那些寻找......这回答了这个问题：

[迈向可行的验证码替代方案 作者：Peter Bromberg](http://www.eggheadcafe.com/tutorials/csharp/5b689df4-19db-4de6-b1ec-a34cd08623e8/toward-viable-captcha-alternatives.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:20:09.043

不知道为什么需要在客户端和服务器端跟踪，但只需将永不过期的 cookie 交给访问者即可帮助您跟踪他们在服务器端的活动。客户端跟踪只是很多额外的工作，您不需要自己完成

# login - Titanium 中的登录模块

> ID：12500435
> 
> 赞同：0
> 
> 时间：2012-09-19T18:08:46.543
> 
> 标签：login, titanium

任何人都有使用 ProviderService.Src 开发登录模块的经验。

我需要使用 Titanium Appcelerator 开发带有 web 服务的登录模块。它需要两个字符串（用户名和密码）并返回真/假。我需要通过网络服务发送输入的登录名和密码并接收真/假。网络服务是

```
http://46.18.8.42/FareBids.Service/FareBids.ServiceLayer.ProviderService.svc 
```

请有人指导我如何用它创建一个登录模块？我得到的信息说我要使用 SUDS。有人可以用代码帮助我吗（如果可能的话）帮助真的很感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:32:11.303

使用 web 服务 http 客户端。应该这样做，您必须将其调整为您的特定 Web 服务，并且显然从用户那里收集数据，但是如何做到这一点在[最基本的 Titanium 教程中有详细记录。](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/User_Interface_Fundamentals)

```
 var loginSrv = Ti.Network.createHTTPClient({
        onload : function(e) {
             // If the service returns successfully : true, or false
             var isUserAllowed = this.responseText; 
        },
        onerror : function(e) {
            // Web service failed for some reason
            Ti.API.info(this.responseText);
            Ti.API.info('webservice failed with message : ' + e.error);
        }
    });
    loginSrv.open('POST', 'http://46.18.8.42/FareBids.Service/FareBids.ServiceLayer.ProviderService.svc');
    // you may have to change the content type depending on your service
    loginSrv.setRequestHeader("Content-Type", "application/json");

    var sendObj = {loginid : 'someid', pwd : 'somepassword'};
    loginSrv.send(obj); 
```

# php - 在php的循环中为文本框分配不同的名称

> ID：12500439
> 
> 赞同：-1
> 
> 时间：2012-09-19T18:09:02.250
> 
> 标签：php

我在一个循环中生成了几个文本框 n 以不同的方式命名它们..但是从这些框中检索数据不起作用..请帮助我..

创建这些文本框的代码

```
$i=0;  
while($data=mysql_fetch_array( $sql ))
   { 
       echo "<tr><td>".$data['idno']." </td><td>".$data['name'] . " </td><td>
       <input type='text' name='obtmarks".$i."'></td></tr>";  $i++; 
   } 
```

我必须检索该数据并将其放在另一个表中

检索数据的代码

```
$i=0;

while($data=mysql_fetch_array( $sql1 )) 
 { 

    $as=mysql_query("INSERT INTO marks values('".$data['idno']."','".$data['name']."','".mysql_real_escape_string($_POST['obtmarks".$i."'])."')");
 $i++;  } 
```

请帮助我..提前谢谢你..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:11:35.903

In your `mysql_real_escape_string` you have `$_POST['obtmarks".$i."']`, it should be `$_POST['obtmarks'.$i]`. Also you should stop using the deprecated `mysql_` methods. They are deprecated and will be removed in the future

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:12:07.130

`$_POST['obtmarks'.$i."']` u put a `"` instead of a `'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:50:23.453

您应该考虑在您的名称属性中使用数组表示法（AS in name="foo[]" 或 name="foo[0]" 甚至 name="foo[bar]" 等）用于表单数据数组，然后您可以只需迭代数组 $_POST['foo']

# ios6 - 如何将 iOS 6 beta 升级到 iOS6 公开版本

> ID：12500442
> 
> 赞同：3
> 
> 时间：2012-09-19T18:09:18.473
> 
> 标签：ios6

我的 iPhone 上安装了 iOS6 测试版，但我不知道如何升级到最新的公开版本。这是我第一次运行测试版，但我找不到任何关于升级的信息。

进入常规>软件更新说我是最新的。我必须恢复我的 iOS5 映像并重新升级吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T19:08:01.467

从开发者网站下载最新的 IPSW，然后使用 iTunes。按住 Shift 键单击/按住 Option 键单击更新按钮并将其指向 IPSW。升级需要很短的时间，然后您就完成了。

# xml - 如何从 XML 实例中自动识别可选/必需的属性/元素？

> ID：12500444
> 
> 赞同：0
> 
> 时间：2012-09-19T18:09:29.977
> 
> 标签：xml, xsd, reverse-engineering

我们有数百个没有预先定义 XML 模式 (XSD) 的 XML 文件。我能够使用工具（IntelliJ Idea）从其中一个文件生成 XSD，但它不够聪明，无法识别哪些元素和属性是可选的，哪些是必需的。

一种自动化的方法是使用以下启发式从多个 XML 文件中对 XSD 进行逆向工程：

> 如果在某些情况下出现而在其他情况下不出现，则属性/元素是**可选**的( `use="optional"`/ )。`minOccurs=0`否则，它是**必需**的( `use="required"`/ `minOccurs=1`)。

显然，如果该 XML 具有足够的代表性，则启发式方法也适用于单个 XML 文件。

例如，`flightNumber`给定以下输入， a 将被视为可选：

```
 <list>
     <carrier name="BA" flightNumber="213" />
     <carrier name="CY" />
   </list> 
```

您是否知道任何生成 XSD 并识别属性/元素是否可选的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:15:42.573

试试[QTAssistant](http://www.paschidev.com)（我与它有关联）。在***工具***选项卡下

![在此处输入图像描述](../Images/515205e5c6bd3cc047de7bf2477552b2.png)

**XMLs**命令有一个XSD。

![在此处输入图像描述](../Images/959b286cbdbcc35fc03a377c8dfd254a.png)

您的 XML 文件应该都在一个文件夹中。从对话框中，您必须选择在生成 XSD 时要考虑的那些。XSD 将在同一文件夹中生成并为您加载。

但是，我还没有尝试过数百个 XML 文件。如果您遇到任何问题，请通过我们网站上的支持地址告诉我。下载免费试用，但需要注册。

# java - 启用/禁用 beta/未完成代码的策略和模式

> ID：12500451
> 
> 赞同：3
> 
> 时间：2012-09-19T18:09:44.797
> 
> 标签：java

您在运行时启用/禁用 BETA 功能的一些策略是什么？或者类似地，处理未完成的代码，而不是删除代码，只是禁用它或使其处于休眠状态。

过去我使用属性/xml 文件和/或 VM 参数 (-D) 创建一个全局对象并使用它来检查启用/禁用哪些功能，但似乎有点笨拙。有没有其他人处理过类似的问题？在这些情况下你做了什么？

**注意：**我知道最佳实践是拥有两个单独的代码分支并根据它们需要运行的内容分发单独的工件，但“权力”认为在运行时动态启用/禁用功能更容易，而不是维护单独的分支和集成环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:17:34.963

我们有同样的问题，我以同样的理由工作。我们使用配置文件对其进行门控，如果配置文件不存在，则该功能未启用。

配置文件类似于 featureGate.config。每个功能都是一个条目，我们有一个类可以检查该配置是否启用或禁用了特定功能集。

# scala - Scala 中的模式匹配元组

> ID：12500454
> 
> 赞同：4
> 
> 时间：2012-09-19T18:09:53.543
> 
> 标签：scala, pattern-matching

试图在这里处理模式匹配——来自 C++/Java 背景，这对我来说很陌生。

这个分支的重点是检查`d`元组列表的每个成员[格式为（字符串，对象）。我想定义三种情况。

1）如果此函数中的计数器大于列表的大小（在另一个称为 acc 中定义），我不想返回任何内容（因为没有匹配） 2）如果`key`输入中的给定匹配列表中的元组，我想返回它的值（或者，存储在 tuple._2 中的任何值）。3）如果没有匹配，并且还有更多列表要迭代，递增并继续。

我的代码如下：

```
def get(key:String):Option[Any] = {

        var counter: Int = 0
        val flag: Boolean = false 

        x match {

                case (counter > acc) => None

                case ((d(counter)._1) == key) => d(counter)._2

                case _ =>   counter += 1
                } 
```

我的问题是，虽然第一种情况似乎编译正确，但第二种情况会引发错误：

```
:36: 错误：')' 预期但 '.' 成立。
                case ((d(counter)._1) == key) => d(counter)._2
```

第三个也是：

```
scala> case _ => 计数器 += 1
:1: 错误：定义的非法开始
```

但我认为这是因为第二个不正确。我的第一个想法是我没有正确比较元组，但我似乎遵循了索引元组的语法，所以我很难过。谁能引导我朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T18:42:25.223

希望有几件事可以消除您的困惑：

scala 中的匹配遵循这个通用模板：

```
x match {
  case SomethingThatXIs if(SomeCondition) => SomeExpression
  // rinse and repeat
  // note that `if(SomeCondition)` is optional
} 
```

看起来您可能已尝试将 match/case 表达式用作更多的 if/else if/else 块，据我所知，`x`在所述块中并不重要。如果是这样的话，你可能会喜欢

```
case _ if (d(counter)._1 == key) => d(counter)._2 
```

**但**

`List`scala 中关于 s 的一些信息。您应该始终将其视为`LinkedList`，其中索引查找是一项`O(n)`操作。列表可以与`head :: tail`格式匹配，并且`Nil`是一个空列表。例如：

```
val myList = List(1,2,3,4)
myList match {
  case first :: theRest => 
    // first is 1, theRest is List(2,3,4), which you can also express as
    // 2 :: 3 :: 4 :: Nil
  case Nil =>
    // an empty list case
} 
```

看起来您正在构建一种 ListMap，因此我将编写一种更“功能性”/“递归”的方式来实现您的`get`方法。

我假设这`d`是支持列表，类型`List[(String, Any)]`

```
def get(key: String): Option[Any] = {
  def recurse(key: String, list: List[(String, Any)]): Option[Any] = list match {
    case (k, value) :: _ if (key == k) => Some(value)
    case _ :: theRest => recurse(key, theRest)
    case Nil => None
  }
  recurse(key, d)
} 
```

这三个case语句可以解释如下：

1) 中的第一个元素`list`是 的元组`(k, value)`。列表的其余部分与 匹配，`_`因为在这种情况下我们不关心它。条件询问是否`k`等于我们正在寻找的密钥。在这种情况下，我们想`value`从元组中返回 。

2）由于第一个元素没有正确的键，我们想要递归。我们不关心第一个元素，但我们想要列表的其余部分，以便我们可以使用它进行递归。

3)`case Nil`表示列表中没有任何内容，应该标记“失败”和递归结束。在这种情况下，我们返回`None`. 考虑到这与`counter > acc`您的问题中的情况相同。

请不要犹豫，要求进一步解释；如果我不小心犯了错误（不会编译等），请指出，我会修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T21:18:19.017

我假设有条件地从元组列表中提取元组的一部分是您问题的重要部分，如果我错了，请原谅。

首先是初始点，在 Scala 中，我们通常会使用 AnyRef 而不是 Object，或者，如果值得的话，我们会使用类型参数，它可以增加函数或方法的重用并提高类型安全性。

您描述的三种情况可以折叠成两种情况，第一种情况使用保护（模式匹配后的 if 语句），第二种情况匹配整个非空列表并在每个第一个元组参数和键，返回包含匹配元组的第二个元组参数的 Some[T]，如果没有匹配，则返回 None。第三种情况不是必需的，因为查找操作会遍历（迭代）列表。

find 之后的 map 操作用于提取第二个元组参数（在 Option 上的 map 返回一个 Option），如果您希望返回整个元组，请删除此操作并将方法的返回类型更改为 Option[(String, T)]。

```
def f[T](key: String, xs: List[(String, T)], initialCount: Int = 2): Option[T] = {
  var counter = initialCount

  xs match {
    case l: List[(String, T)] if l.size < counter => None
    case l: List[(String, T)] => l find {_._1 == key} map {_._2}
  }
}

f("A", List(("A", 1), ("B", 2))) // Returns Some(1)
f("B", List(("A", 1), ("B", 2))) // Returns Some(2)
f("A", List(("A", 1)))           // Returns None
f("C", List(("A", 1), ("B", 2))) // Returns None
f("C", Nil)                      // Returns None 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:36:47.520

首先，您为什么要使用 a `List`？你需要的绝对是一个`Map`. 如果未找到密钥并且在其中找到密钥，则`get()`返回。`None``Some(value)`

其次，`x`你的例子是什么？是名单吗？

第三，你不能写`case (log) => ..`where`log`是一个逻辑条件，它的形式是`case _ if (log) => ...`（正如 Rex Kerr 已经在他的评论中指出的那样）。

第四，您需要一个递归函数（只需增加计数器将仅在第二个元素上调用它）。

所以你需要这样的东西（如果仍然喜欢坚持`List`）：

```
def get(l: List[Tuple2[String, String]], key: String): Option[String] = {
    if (l.isEmpty) {
        None
    } else {
        val act = l.head
        act match {
            case x if (act._1 == key) => Some(act._2)
            case _ => get(l.tail, key)
        }
    }
} 
```

# android - 从通知开始/恢复任务返回堆栈作为最近的应用程序切换

> ID：12500456
> 
> 赞同：2
> 
> 时间：2012-09-19T18:10:00.507
> 
> 标签：android, android-intent, notifications, stack, resume

我的应用程序有两个活动**A**和**B**。**A**是根活动并设置为**singleTop**启动模式。**B**从**A**开始，即任务堆栈是（***A->B***）我添加了一个状态通知以启动应用程序，因为长按 Home 按钮。通知意图指向活动**A**。

当任务堆栈仅为 ( ***A*** **) 时，意图从现有A**调用 onNewIntent() ，如预期的那样。当任务堆栈为（***A->B***）时，意图创建新的活动**A**。但我想要的是恢复任务（***A->B***）作为通过长按主页按钮切换最近的应用程序。

问题是使用了不正确的启动模式引起的吗？还是需要将任何标志添加到通知意图？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T09:03:39.783

您可以使用通知管理器中的以下内容：

```
Intent intent = new Intent(context, ActivityA.class);
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
context.startActivity(intent); 
```

确保你`ActivityA`的不是用`FLAG_ACTIVITY_NEW_TASK`.

# nginx - nginx 从 apache 1 规则重写

> ID：12500457
> 
> 赞同：0
> 
> 时间：2012-09-19T18:10:05.997
> 
> 标签：nginx

嗨，需要帮助才能将这条规则从 apache 重新发送到 nginx，整天都在尝试，但一无所获：

apache: ^pimage/small-([^/.]+)-([^/.]+).jpg$ /img_on_fly.php?iname=$1&iuid=$2&isize=small

尝试了所有在线转换器，尝试了我在网上找到的所有内容，但一无所获。我没有使用 nginx 的经验，但其他 15 条规则被一一重写，但都比这简单，所以如果有人可以的话。另外，我不确定 nginx conf 中这条规则的“位置”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:18:40.923

在 conf 文件的 server 元素中尝试以下操作

```
location ~ ^\/pimage\/small\-(?<iname>[^\/\.]+)\-(?<iuid>[^\/\.]+)\.jpg$ {
    try_files $uri /img_on_fly.php?iname=$iname&iuid=$iuid&isize=small
} 
```

您的 conf 文件应如下所示：

```
server {
    ...
    ...
    ...
} 
```

你可以把它改成

```
server {
    ...
    ...
    ...

    location ~ ^\/pimage\/small\-(?<iname>[^\/\.]+)\-(?<iuid>[^\/\.]+)\.jpg$ {
        try_files $uri /img_on_fly.php?iname=$iname&iuid=$iuid&isize=small
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:22:05.943

逃避点怎么样，像这样：

```
rewrite ^pimage/small-([^/\.]+)-([^/\.]+).jpg$ /img_on_fly.php?iname=$1&iuid=$2&isize=small; 
```

尝试并评论。

**更新**：
也尝试转义破折号，如下所示：

```
rewrite ^pimage/small\-([^/\.]+)\-([^/\.]+).jpg$ /img_on_fly.php?iname=$1&iuid=$2&isize=small; 
```

尝试之后，也尝试“不转义的点和转义的破折号”的变体。

# url - 使用mod重写将位置作为子目录添加到url？

> ID：12500460
> 
> 赞同：0
> 
> 时间：2012-09-19T18:10:26.650
> 
> 标签：url, mod-rewrite, subdirectory

我正在研究根据位置显示项目的项目。第一次用户必须选择一个位置才能搜索项目。此位置保存为 cookie 以供将来参考。网址如下所示：

```
 www.example.com/newyork 
```

如果用户正在查看纽约存在的项目，则该项目的 url 是：

```
 www.example.com/item/iphone 
```

上面的网址工作正常，但有一个问题。如果上面的 url 是通过邮件转发给第一次使用的用户，这个项目不存在，因为没有选择位置。我可以将用户转发到不同的页面以选择位置，然后查找该项目，但这对用户来说很麻烦。所以，我想把上面的网址改成

```
 www.example.com/newyork/item/iphone 
```

这样我就可以使用纽约作为地点。如何将不存在的子目录添加到 url？这可以用 PHP 完成还是用 mod_rewrite 完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:29:08.990

您可以尝试进行重定向，但您必须仔细制作用于匹配的正则表达式`/newyork/item/iphone`。然后，您可以将`newyork`部分分组并设置 cookie 并使用`CO`标志重定向浏览器。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/item/([^/]+)$ /item/$2 [L,R,CO=location:$1:example.com:/] 
```

这将接受一个请求`http://www.example.com/pittsburgh/item/iphone`并提取`pittsburgh`部分，将其存储在一个名为`location`（域=example.com 和路径=/）的 cookie 中，然后重定向浏览器，以便浏览器存储 cookie 并使浏览器转到`http://www.example.com/item/iphone`

有关语法的详细信息，请参阅[标志的](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_co)[文档：`CO`](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_co)

```
[CO=NAME:VALUE:DOMAIN:lifetime:path:secure:httponly] 
```

* * *

> 快速提问。没有 mod_rewrite 规则的实际链接是`www.example.com/item.php/itemid=phone`. 是否可以将此链接重写为`www.example.com/newyork/item.php/itemid=phone`

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/item.php/itemid=(.+)$ /item.php/itemid=$2 [L,R,CO=location:$1:example.com:/] 
```

# ruby - How to map / query this data with ElasticSearch?

> ID：12500461
> 
> 赞同：3
> 
> 时间：2012-09-19T18:10:31.203
> 
> 标签：ruby, search, elasticsearch, tire

I'm using ElasticSearch along with the tire gem to power the search functionality of my site. I'm having trouble figuring out how to map and query the data to get the results I need.

Relevant code is below. I will explain the desired outbut below that as well.

```
# models/product.rb

class Product < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  has_many :categorizations
  has_many :categories, :through => :categorizations
  has_many :product_traits
  has_many :traits, :through => :product_traits

  mapping do
    indexes :id, type: 'integer'
    indexes :name, boost: 10
    indexes :description, analyzer: 'snowball'
    indexes :categories do
      indexes :id, type: 'integer'
      indexes :name, type: 'string', index: 'not_analyzed'
    end
    indexes :product_traits, type: 'string', index: 'not_analyzed'
  end

  def self.search(params={})

    out = tire.search(page: params[:page], per_page: 12, load: true) do
      query do
        boolean do

          must { string params[:query], default_operator: "OR" } if params[:query].present?
          must { term 'categories.id', params[:category_id] } if params[:category_id].present?

          # if we aren't browsing a category, search results are "drill-down"
          unless params[:category_id].present?
            must { term 'categories.name', params[:categories] } if params[:categories].present?
          end
          params.select { |p| p[0,2] == 't_' }.each do |name,value|
            must { term :product_traits, "#{name[2..-1]}##{value}" }
          end

        end
      end

      # don't show the category facets if we are browsing a category
      facet("categories") { terms 'categories.name', size: 20 } unless params[:category_id].present?
      facet("traits") {
        terms :product_traits, size: 1000 #, all_terms: true
      }

      # raise to_curl
    end

    # process the trait facet results into a hash of arrays
    if out.facets['traits']
      facets = {}
      out.facets['traits']['terms'].each do |f|
        split = f['term'].partition('#')
        facets[split[0]] ||= []
        facets[split[0]] << { 'term' => split[2], 'count' => f['count'] }
      end
      out.facets['traits']['terms'] = facets
    end

    out
  end

  def to_indexed_json
    {
      id: id,
      name: name,
      description: description,
      categories: categories.all(:select => 'categories.id, categories.name, categories.keywords'),
      product_traits: product_traits.includes(:trait).collect { |t| "#{t.trait.name}##{t.value}" }
    }.to_json
  end

end 
```

As you can see above, I'm doing some pre/post processing of the data to/from elasticsearch in order to get what i want from the 'product_traits' field. This is what doesn't feel right and where my questions originate.

I have a large catalog of products, each with a handful of 'traits' such as *color*, *material* and *brand*. Since these traits are so varied, I modeled the data to include a Trait model which relates to the Product model via a ProductTrait model, which holds the value of the trait for the given product.

**First question is**: How can i create the elasticsearch mapping to index these traits properly? I assume that this involves a nested type but I can't make enough sense of the docs to figure it out.

**Second question**: I want the facets to come back in groups (in the manner that I am processing them at the end of the `search` method above) but with counts that reflect how many matches there are *without taking into account the currently selected value for each trait.* For example: If the user searches for 'Glitter' and then clicks the link corresponding to the 'Blue Color' facet, I want all the 'Color' facets to remain visible and show counts correspinding the query results *without* the 'Blue Color' filter. I hope that is a good explanation, sorry if it needs more clarification.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T13:16:45.037

如果您将您的特征索引为：

```
[
    {
        trait: 'color', 
        value: 'green'
    },
    {
        trait: 'material', 
        value: 'plastic'
    }
] 
```

这将在内部索引为：

```
{
    trait: ['color', 'material' ],
    value: ['green', 'plastic' ]
} 
```

这意味着您只能查询具有`trait`with value 'color' 和 a `value`with value的文档`green`。`trait`和之间没有关系`value`。

你有几个选择来解决这个问题。

**作为单项**

第一个您已经在做，这是一个很好的解决方案，即将特征存储为单个术语，例如：

```
['color#green`','material#plastic'] 
```

**作为对象**

另一种选择（假设您的特征名称数量有限）是将它们存储为：

```
{
    traits: {
        color:    'green',
        material: 'plastic'
    }
} 
```

然后您可以针对`traits.color`or运行查询`traits.material`。

**作为嵌套**

如果要保留数组结构，则可以使用[嵌套类型](http://www.elasticsearch.org/guide/reference/mapping/nested-type.html)，例如：

```
{
   "mappings" : {
      "product" : {
         "properties" : {

            ... other fields ...

            "traits" : {
               "type" : "nested",
               "properties" : {
                  "trait" : {
                     "index" : "not_analyzed",
                     "type" : "string"
                  },
                  "value" : {
                     "index" : "not_analyzed",
                     "type" : "string"
                  }
               }
            }
         }
      }
   }
} 
```

每个特征/值对都将在内部作为单独的（但相关的）文档进行索引，这意味着特征与其值之间存在关系。您需要使用[嵌套查询](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html)或[嵌套过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/nested-filter.html)来查询它们，例如：

```
curl -XGET 'http://127.0.0.1:9200/test/product/_search?pretty=1'  -d '
{
   "query" : {
      "filtered" : {
         "query" : {
            "text" : {
               "name" : "my query terms"
            }
         },
         "filter" : {
            "nested" : {
               "path" : "traits",
               "filter" : {
                  "and" : [
                     {
                        "term" : {
                           "trait" : "color"
                        }
                     },
                     {
                        "term" : {
                           "value" : "green"
                        }
                     }
                  ]
               }
            }
         }
      }
   }
}
' 
```

**结合方面、过滤和嵌套文档**

您声明，当用户过滤时，例如`color == green`您只想显示结果 where `color == green`，但您仍想显示所有颜色的计数。

为此，您需要使用[搜索 API](http://www.elasticsearch.org/guide/reference/api/search/filter.html)`filter`的参数而不是过滤查询。过滤查询在计算方面之前过滤掉结果。该参数在计算分面后应用于查询结果。`filter`

这是一个示例，其中最终查询结果仅限于文档，`color == green`但为所有颜色计算了构面：

```
curl -XGET 'http://127.0.0.1:9200/test/product/_search?pretty=1'  -d '
{
   "query" : {
      "text" : {
         "name" : "my query terms"
      }
   },
   "filter" : {
      "nested" : {
         "path" : "traits",
         "filter" : {
            "and" : [
               {
                  "term" : {
                     "trait" : "color"
                  }
               },
               {
                  "term" : {
                     "value" : "green"
                  }
               }
            ]
         }
      }
   },
   "facets" : {
      "color" : {
         "nested" : "traits",
         "terms" : { "field" : "value" },
         "facet_filter" : {
            "term" : {
               "trait" : "color"
            }
         }
      }
   }
}
' 
```

# android - Android multi-touch interference

> ID：12500465
> 
> 赞同：15
> 
> 时间：2012-09-19T18:11:05.030
> 
> 标签：android, multi-touch

I'm currently developing an air-hockey simulation for android. For the multiplayer mode I'm tracking two touch events on the screen, which works well as long as the touch points don't get to close. ![Normal Touch](../Images/c0969d03f1189c2d3de01809098f7b4c.png)

When the two fingers get to close, android only recognizes one touch event, in the middle of both points.

![Two events overlapping](../Images/d8518b1a6c8b0f08f49924f8f341c326.png)

To make it even worse, android sometimes messes up the IDs after the collision.

![Wrong IDs assigned](../Images/3c57a10a3b36910273e6ceb3d798b7d9.png)

I already thought about estimating the next touch points ans assigning IDs manually, does anybody know a better way, or knows about somebody who already fixed this problem programmatically?

NOTE: I'm testing on a Samsung Galaxy S 3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T13:18:39.277

不一定是对该问题的合乎逻辑的解决方案，但可能是该应用程序的解决方案：

如果我没有完全弄错的话，空气曲棍球比赛不应该让对手侵入对方的比赛场地。如果我们假设一个粗边框穿过屏幕中心（在纵向模式下），那么我将不会被允许在该边框之外做任何事情，因此在我的手指到达边界线后跟踪它是没有意义的。

如前所述，将跟踪的触摸事件封装到有效的物理位置中可能只会帮助您忽略无效点（假设物理位置不相交）。

您可能还必须跟踪触摸矢量的方向：如果矢量从屏幕中心向“您的末端”延伸，则可能是对手侵入手指或您自己返回的手指。在任何情况下，它们都不应该影响冰球（也许）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T18:30:04.320

这可能取决于您使用的设备，但我在华为 X5 中使用下面的代码并且它永远不会弄乱手指，即使它们相互接触或者我在屏幕上扭动它们。

```
private static PointF touchScreenStartPtArr[] = new PointF[10];
private static PointF touchScreenStopPtArr[] = new PointF[10];
private static PointF touchScreenCurrPtArr[] = new PointF[10];

OnTouchListener onTouchListenerMulti = new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        int action = event.getAction() & MotionEvent.ACTION_MASK;
        int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        int fingerId = event.getPointerId(pointerIndex);

        switch (action) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_POINTER_DOWN:
            touchScreenStartPtArr[fingerId].x = event.getX(pointerIndex);
            touchScreenStartPtArr[fingerId].y = event.getY(pointerIndex);
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_CANCEL:
            touchScreenStopPtArr[fingerId].x = event.getX(pointerIndex);
            touchScreenStopPtArr[fingerId].y  = event.getX(pointerIndex);
            break;
        case MotionEvent.ACTION_MOVE:
            int pointerCount = event.getPointerCount();
            for (int i = 0; i < pointerCount; i++) {
                touchScreenCurrPtArr[fingerId].x = event.getX(i);
                touchScreenCurrPtArr[fingerId].y = event.getY(i);
            }
            break;
        }
        return true;
    }
}; 
```

请注意，我使用的是 fingerId 而不是 pointerId 来识别正确的手指，因为松开一根手指时指针 id 可能会发生变化。

希望对你有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T20:13:25.033

这是我的看法。

触摸屏硬件为您提供了一个分辨率，低于该分辨率时两次触摸相同。这是你无法改变的。

现在的问题是，当两个触摸合并时该怎么办？（这是可以以编程方式测试的东西；例如，如果 2 touch pts -> 1 touch pt.​​ AND prev touch pt 1 足够接近 prev touch pt 2...）。在你的情况下，我会沿着合并的触摸手势移动两个圆盘，直到它们分开，然后返回单独的控制。

当然，我看到这有几个问题，比如拆分后哪个触摸控制哪个冰球？也许有人在合并过程中抬起了手指。

如果发生合并，您可能会让两个玩家都失去对冰球的控制。这可以模拟当你的手撞到对手的手腕时对手腕的冲击:)

我也喜欢@dbm 的想法。

希望这可以帮助。可能没有:)

# xcode - Git branch not working for me in Xcode

> ID：12500466
> 
> 赞同：2
> 
> 时间：2012-09-19T18:11:09.190
> 
> 标签：xcode, git

I am working off a github branch, call it "main12"

I then do a `git checkout -b newFeature.`

I do some work on newFeature

I then need to go back to main12 to do some work

I close down Xcode. I switch to main12 via terminal `git checkout main12` Open xcode and verify xcode is on the main12 branch.

All my changes made in newFeature are now in my main12 branch

What gives? Did I miss a step? Why wouldn't my code in main12 be the way I left it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:19:40.077

您是否提交或隐藏对 newFeature 所做的更改？如果不是，则该命令可能`git checkout main12`已失败。仔细观察该命令的命令行输出并进行验证。

在签出另一个分支之前，您对当前分支所做的任何更改都应提交或隐藏（暂时丢弃，在需要时将其存储回来）。

在结帐 main12 之前尝试以下命令

`git commit -am "some commit message here"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:19:49.483

您可能忘记在分支之前`checkout`提交代码。`main12`目前，您应该有未提交的代码（在 Xcode 中除了文件名之外标记为 M/A）。您可以切换回`newFeature`分支，提交代码，然后切换回`main12`分支。

# ruby-on-rails - How to implement generators for a plugin located at the `lib/ ` directory?

> ID：12500469
> 
> 赞同：0
> 
> 时间：2012-09-19T18:11:24.810
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, plugins, generator

I am using Ruby on Rails 3.2.2\. I have implemented a `Something` plugin (it is almost a gem, but is *not* a gem) and all related files are in the `lib/something` directory. Since I would like to automate code generation related to that plugin, I came up with [Ruby on Rails Generators](http://guides.rubyonrails.org/generators.html). So, *for the `Something` plugin*, I am looking for implementing *my own generators* in the `lib/something` directory.

How should I make that and what are prescriptions? That is, for example, what `rails generate` command line should be invoked to properly generate all needed files in the `lib/something` directory? generators would still work with plugins (*not* gem)? what are advices about this matter?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:05:13.223

我会把它变成一颗宝石。我已经使用 gems 制作了生成器，但我不知道生成器是否仍然可以与插件一起使用。

如果您在使用命令行时遇到困难，我猜您不需要任何参数。（如果您需要参数，我可以复制提供的模板，如果需要其他参数，我会迷路，所以我的建议仅限于非参数。）

我有一个生成器 gem，它可以生成另一个 gem 所需的迁移文件。它检查具有给定根名称（没有时间戳前缀）的迁移是否在 db/migrate 中，否则创建它。

这是我的代码。我认为这个例子是你需要的帮助。

```
class ItrcClientFilesGenerator < Rails::Generators::Base
  source_root(File.dirname(__FILE__) + "/../src")

  desc "Generator to create migrations for needed db tables"
  def create_itrc_client_files
    prefix = DateTime.now.strftime("%Y%m%d%H%M")

    existing_migrations =
      Dir.glob("db/migrate/*itrc*").map do |path|
        File.basename(path).gsub(/^\d*_/, '')
      end

    Dir.glob(File.dirname(__FILE__) + "/../src/*").sort.each_with_index do |src_filepath, index|
      src_filename = File.basename(src_filepath)

      unless existing_migrations.include?(src_filename.gsub(/^\d*_/, '')) then
        this_prefix = "#{prefix}#{'%02i' % index}_"
        dst_filename = src_filename.gsub(/^\d*_/, this_prefix)

        copy_file(src_filename, "db/migrate/" + dst_filename)
      end
    end
  end
end 
```

# java - 使用 Jersey 将传入的 JSON 转换为 Java 数组

> ID：12500470
> 
> 赞同：0
> 
> 时间：2012-09-19T18:11:32.403
> 
> 标签：java, json, jersey

我有一个 REST api GET 调用，它采用 JSON 格式的字符串数组。我想使用 Jersey 将该字符串数组转换为字符串数组或列表之类的东西。我已经查看了[http://jersey.java.net/nonav/documentation/latest/json.html](http://jersey.java.net/nonav/documentation/latest/json.html)，但看起来泽西岛希望我创建一个对象来指定它应该如何映射，我真的不想要因为它只是一个简单的数组。

```
 @GET
        public Response get(@QueryParam("json_items") String requestedItems) throws IOException
        {
            //Would like to convert requestedItems to an array of strings or list

        } 
```

*我知道有很多库可以解决这个问题——但我更喜欢使用 Jersey 而不是引入任何新库。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:26:06.180

为您的数据创建一个包装器对象（在本例中为 Person 类）并使用 @XMLRootElement 对其进行注释

您的 post 方法应如下所示

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
public void post(List<Person> people) {
    //notice no annotation on the method param
    dao.putAll(people);
    //do what you want with this method
    //also best to return a Response obj and such
} 
```

这是在请求中发送数据的正确方法。
但是如果你想有一个 QueryParam 作为 JSON 数据，你可以这样做

假设您的请求参数如下所示： String people = "{\"person\":[{\"email\":\"asdasd@gmail.com\",\"name\":\"asdasd\"}, {\"email\":\"Dan@gmail.com\",\"name\":\"Dan\"},{\"email\":\"Ion@gmail.com\",\"name \":\"dsadsa\"},{\"email\":\"Dan@gmail.com\",\"name\":\"ertert\"},{\"email\":\"Ion @gmail.com\",\"名称\":\"离子\"}]}";

您注意到它是一个名为“person”的 JSONObject，其中包含一个 JSONArray，其中包含其他类型为 Person 的 JSONObjets，名称为电子邮件：P 您可以像这样遍历它们：

```
 try {
        JSONObject request = new JSONObject(persons);
        JSONArray arr = request.getJSONArray("person");
        for(int i=0;i<arr.length();i++){
            JSONObject o = arr.getJSONObject(i);
            System.out.println(o.getString("name"));
            System.out.println(o.getString("email"));
        }
    } catch (JSONException ex) {
        Logger.getLogger(JSONTest.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

sry

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:19:05.010

只需尝试将数组添加到您的响应中，例如

```
return Response.ok(myArray).build(); 
```

看看会发生什么。如果它只是一个非常简单的数组，则应该毫无问题地对其进行解析。

**编辑：**

如果你想接收它，那么只需接受一个数组而不是一个字符串。尝试使用列表或类似的东西。

否则，您可以尝试使用 ObjectMapper 解析它

```
mapper.readValue(string, List.class); 
```

# c# - 使用 C# 读取 XML 格式的 Excel 2003

> ID：12500474
> 
> 赞同：0
> 
> 时间：2012-09-19T18:11:43.423
> 
> 标签：c#, excel

我正在使用 Excel 2003。我发现我能够以 XML 格式和 XLSX 2007 格式保存文件。通过安装类似 Comparability Pack 之类的额外功能可以提供什么功能，还是 Excel 2003 的基本功能？

我看到的有关 Excel 和 XML 的文档是指 Open XML，而我看到的大部分内容都是关于 Office 2007 或更高版本的。

我可以使用“Open XML”读取我在 2003 年保存的 Xml 格式文档吗？我保存的 XML 格式是否与 Office 2007 中使用的格式完全相同？

从这个[MS 网站](http://www.microsoft.com/en-us/download/details.aspx?id=5124)：

Open XML 是一种开放的 ECMA 376 标准，也被批准为 ISO/IEC 29500 标准，该标准定义了一组用于表示电子表格、图表、演示文稿和文字处理文档的 XML 模式。Microsoft Office Word 2007、Excel 2007 和 PowerPoint 2007 都使用 Open XML 作为默认文件格式。

这是否意味着该库可用于读取我保存为 XML 的 Excel 2003 文件？这里的假设是由于不兼容包，使用的 XML 格式确实是 2007 级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:18:06.147

这是由[Word、Excel 和 PowerPoint 文件格式的 Microsoft Office 兼容包](http://www.microsoft.com/en-us/download/details.aspx?id=3)提供的。

> 如果您想要打开、编辑和保存在较新版本的 Word、Excel 和 PowerPoint 中创建的文档、工作簿和演示文稿，请安装此兼容包。

...

> 通过在 Microsoft Office 2000、Office XP 或 Office 2003 之外安装兼容包，您将能够使用较新版本的 Word、Excel 和 PowerPoint 中的文件格式打开、编辑和保存文件。兼容包还可以与 Microsoft Office Word Viewer 2003、Excel Viewer 2003 和 PowerPoint Viewer 2003 结合使用，以查看以这些新格式保存的文件。有关兼容包的更多信息，请参阅 924074。

# android - Am I working on the same database? getReadableDatabase() throws nullpointerexception

> ID：12500481
> 
> 赞同：0
> 
> 时间：2012-09-19T18:11:54.960
> 
> 标签：android, sqlite, cursor, nullpointerexception, android-listfragment

I'm new to android programming! I have a MainActivity in which the onCreate looks like this:

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    DBHandler db = new DBHandler(this);
    db.onUpgrade(db.getWritableDatabase(), 1, 2); // I have to figure out how to make the app create the database on install and not on app launch

    //Here all tables are filled up. It's hardcoded as the data is not intented to be changed by the user
    String ATABLENAME = "aTableName";
    db.addKeyPoint(new AKeyPoint(1, "sometext", 167, "areference"), ATABLENAME);
    db.addKeyPoint(new AKeyPoint(2, "someothertext", 0, "anotherreference"), ATABLENAME);
} 
```

I also have an InitActivity, that launches upon the press of a button. Within this I have a ListFragment that implements LoaderManager.LoaderCallbacks:

```
public static class KeyFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor>{
    private SimpleCursorAdapter adapter;    

    @Override
    public void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);

        // the desired columns to be bound
        String[] columns = new String[] { "question1","answer1" };
        // the XML defined views which the data will be bound to
        int[] to = new int[] { R.id.question, R.id.answer };
        adapter = new SimpleCursorAdapter(getActivity(),R.layout.key_list_entry, null, columns, to, 0);       
        this.setListAdapter(adapter);

        LoaderManager lm = this.getLoaderManager();
        lm.initLoader(1, null, this);

    }

    public Loader<Cursor> onCreateLoader(int id, Bundle args) {

        final SimpleCursorLoader scloader = new SimpleCursorLoader(getActivity()) {
            @Override
            public Cursor loadInBackground() {
                final DBHandler db = new DBHandler(getActivity());
                Cursor c = db.getKeyPointCursor(1, "Crataegus");
                db.close();
                return c;
            }
        };
        return scloader;
    }

    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) { 
        adapter.swapCursor(cursor);
    }

    public void onLoaderReset(Loader<Cursor> loader) {
        adapter.swapCursor(null);       
    }    
} 
```

}

I use the the SimpleCursorLoader with the LoaderManager. It can be found here: [https://github.com/browep/AndroidCursorLoaderTutorial/blob/master/src/com/github/browep/cursorloader/SimpleCursorLoader.java](https://github.com/browep/AndroidCursorLoaderTutorial/blob/master/src/com/github/browep/cursorloader/SimpleCursorLoader.java) . In my onCreateLoader the loadInBackGround retrieves a Cursor in the following way

```
Cursor c = db.getKeyPointCursor(anInt, "aTableName"); 
```

and returns it.

In my databasehandler (db) the getKeyPointCursor looks like this:

```
public Cursor getKeyPointCursor(int keyPointID, String tableName){
    Log.v("bae", "Now in getKeyPointCursor, attempting to get readable database");
    SQLiteDatabase db = this.getReadableDatabase();
    Log.v("bae", "Success... attempting to obtain a cursor");
    Cursor cursor = db.query(tableName, null, KEY_POINTID + "=?",
            new String[] { String.valueOf(keyPointID) }, null, null, null, null);
    Log.v("bae", "Success... closing db and returning cursor");
    db.close();
    return cursor;
} 
```

It prints the "Now in getKeyPointCursor, attempting to get readable database" and then throws a NullPointerException:

```
09-19 19:27:39.920: W/dalvikvm(3055): threadid=11: thread exiting with uncaught exception (group=0x40c7c1f8)
09-19 19:27:39.925: E/AndroidRuntime(3055): FATAL EXCEPTION: ModernAsyncTask #1
09-19 19:27:39.925: E/AndroidRuntime(3055): java.lang.RuntimeException: An error occured while executing doInBackground()
09-19 19:27:39.925: E/AndroidRuntime(3055):     at android.support.v4.content.ModernAsyncTask$3.done(ModernAsyncTask.java:137)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at java.lang.Thread.run(Thread.java:856)
09-19 19:27:39.925: E/AndroidRuntime(3055): Caused by: java.lang.NullPointerException
09-19 19:27:39.925: E/AndroidRuntime(3055):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:231)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at jem.danskflora.DBHandler.getKeyPointCursor(DBHandler.java:235)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at jem.danskflora.InitKeyActivity$KeyFragment$1.loadInBackground(InitKeyActivity.java:79)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at jem.danskflora.SimpleCursorLoader.loadInBackground(SimpleCursorLoader.java:1)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at android.support.v4.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:240)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:51)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:40)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at android.support.v4.content.ModernAsyncTask$2.call(ModernAsyncTask.java:123)
09-19 19:27:39.925: E/AndroidRuntime(3055):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-19 19:27:39.925: E/AndroidRuntime(3055):     ... 4 more 
```

I'm suspecting that I'm not working on the same database somehow or maybe that I pass the wrong context to my databasehandler? Anyways I desperately need help to solve this!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T20:22:32.677

我会说该异常的原因是这一行：

```
private DBHandler db = new DBHandler(getActivity()); 
```

那时`getActivity()`最有可能返回`null`，因为`Fragment` 尚未附加，并且此`Context`引用在`getReadableDatabase()`and`getWritableDatabase()`方法中使用。尝试`db`从`KeyFragment`in初始化引用`onActivityCreated`，该`Activity`引用将在那里可用。

另外，避免这种情况：

```
db.onUpgrade(db.getWritableDatabase(), 1, 2); 
```

# haskell - Grab a string from a list and save it into another list?

> ID：12500486
> 
> 赞同：0
> 
> 时间：2012-09-19T18:12:14.807
> 
> 标签：haskell

I'm trying to grab a random item from a string list and save that into another string list but I can't get my code to work.

```
 import System.Random
    import Control.Applicative ( (<$>) )

    food = ["meatballs and potoes","veggisoup","lasagna","pasta bolognese","steak and fries","salad","roasted chicken"]

    randomFood xs = do
              if (length xs - 1 ) > 0 then 
                 [list] <- (fmap (xs!!) $ randomRIO (0, length xs -1))
                 else
                 putStrLn (show([list]) 
```

I'm getting parse error on input '<-' but I'm sure there are more issues then that. There is also the issue that the list may contain the same dishes two days in a row which is not what I want and I guess I can remove duplicates but that also would remove the number of items in the list which I want to stay the same as the number in the list.

Anyone have a good idea how I could solve this? I have been searching for a day now and I can't find something useful for me but that's just because I'm looking in the wrong places. Any suggestion on how I can do this or where I can find the info will be greatly appreciated!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T19:11:39.847

它不起作用的原因是*您* `do`在`if...then`. （在 a 之后`then`你需要一个表达式，而不是`pattern <- expression`。）

```
randomFood :: String -> IO ()  -- type signature: take a String and do some IO.
randomFood xs = do
          if length xs > 1 then do
             [list] <- (fmap (xs!!) $ randomRIO (0, length xs -1))
             else
             putStrLn (show([list]) 
```

但这仍然无法编译，因为您实际上并没有对您的列表做任何事情。在每个`do`块的末尾，您需要一个表达式来返回。我认为如果长度太短，您仍然打算打印一些东西`xs`，如果有多个食物可供选择，您可能打算打印选定的食物。

更好的是：

```
randomFood :: String -> IO () 
randomFood xs | length xs <= 1 = putStrLn $ show xs
randomFood xs | otherwise = do
             item <- (xs!!) <$> randomRIO (0, length xs -1)
             putStrLn $ show(item) 
```

这种`| boolean test =`语法更适合基于输入的条件答案。

我改成`[list]`是`item`因为你随机选择一个项目，而不是项目列表。Haskell 很乐意让您`[list]`输入，因为其中包含一个字符的任何字符串都匹配`[list]`。例如，`"h" = [list]`如果`list='h'`，因为“h”是 的缩写`['h']`。任何更长的字符串都会给你`Pattern match failure`。特别是，您指定的所有食物都有多个字符，因此使用此定义`randomFood`将永远行不通！`item`将匹配您的`randomRIO`表达式返回的任何内容，所以这很好。

你导入`<$>`然后没有使用它，但它是一个很好的运算符，所以我已经替换`fmap f iothing`为`f <$> iothing`.

我终于意识到我在短名单上做错了；如果我这样做，`randomFood ["lump of cheese"]`我会得到`["lump of cheese"]`，这与`randomFood ["lump of cheese"]`会给我的不一致`"lump of cheese"`。我认为我们应该将短列表与空列表分开，这使我们能够进行更多的模式匹配和更少的布尔运算：

```
randomFood :: String -> IO () 
randomFood []        = putStrLn "--No food listed, sorry.--"
randomFood [oneitem] = putStrLn . show $ oneitem 
randomFood xs = do
         item <- (xs!!) <$> randomRIO (0, length xs -1)
         putStrLn . show $ item 
```

`randomFood`根据输入的外观，这给出了三种不同的定义。

在这里，我还替换`putStrLn (show (item))`为`putStrLn . show $ item`- 组合函数`show`并将其`putStrLn`应用于.`$``item`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:27:39.597

需要注意的几点：

*   不要混合纯代码和不纯代码。
*   尝试使用库来完成一项任务，而不是重复已经编写的内容。

这是使用 random-fu 库的代码

```
import Data.Random
import Control.Applicative

food :: [String]
food = ["meatballs and potoes","veggisoup","lasagna","pasta bolognese","steak and fries","salad","roasted chicken"]

randomFood :: [String] -> RVar (Maybe String)
randomFood [] = return Nothing
randomFood xs = Just <$> randomElement xs

main :: IO ()
main = (sample $ randomFood food) >>= print 
```

这就像从列表中随机选择一个元素。

```
> main 
Just "steak and fries"
> main 
Just "meatballs and potoes" 
```

如果您只想输出上述列表的随机排列，您可以使用`shuffle`like

```
main = (sample $ shuffle food) >>= print 
```

例子

```
 > main 
 ["meatballs and potoes","lasagna","steak and fries","roasted chicken","salad","pasta bolognese","veggisoup"]
 > main 
 ["roasted chicken","veggisoup","pasta bolognese","lasagna","steak and fries","meatballs and potoes","salad"] 
```

# mysql - 将数据从一个数据库复制到同一表中的另一个数据库

> ID：12500491
> 
> 赞同：2
> 
> 时间：2012-09-19T18:12:37.787
> 
> 标签：mysql

我想将具有名为域的表的数据库中的数据复制到另一个也具有名为域的表的数据库中。

我曾尝试使用 phpmyadmin 进行此操作，但可能由于 Auto_increment 值而无法复制。它只是不会被复制到另一个 database.table。

我想知道在这方面可以做些什么？我也不想将旧 ID(auto_increment) 值从第一个数据库复制到另一个数据库。

phpmyadmin 响应。

```
 #1136 - Column count doesn't match value count at row 1 
```

数据库中的两个结构都是相同的。

我的查询。

```
 INSERT INTO `site1`.`domains`
 SELECT * FROM `site33`.`domains` 
```

^ 这么多是固定的。现在出现了我得到的 auto_increment 问题：

```
 #1062 - Duplicate entry '1' for key 'PRIMARY' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T18:25:34.587

你可以这样做：

```
INSERT INTO database2.table1 (field2,field3)
SELECT table2.field2,table2.field3
FROM table2; 
```

**注意：** 不要在插入和选择语句中包含自动递增的列。

[Sql 小提琴示例](http://sqlfiddle.com/#!2/d6768/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:19:02.433

您正在使用具有错误数量值的插入语句，例如：

对于具有和列的表`a`，这些都是无效的：`b``c`

```
INSERT INTO YourTable VALUES (1, 2);

INSERT INTO YourTable(b, c) VALUES (1, 2, 3);

INSERT INTO YourTable(a, b, c) VALUES (2, 3); 
```

列列表中的列数必须与值列表中的值数匹配。

您只能省略列列表，但前提是您为每一列指定一个值，并且按照列在表中的存在顺序。不过，这是不好的做法。最好始终指定您需要的确切列。

# java - JButton stays pressed when focus stolen by JOptionPane

> ID：12500494
> 
> 赞同：7
> 
> 时间：2012-09-19T18:13:02.513
> 
> 标签：java, swing, jtextfield, joptionpane, inputverifier

I am new to Swing and I have a situation. I am designing an application that renders the GUI components dynamically based on an xml file input(meta-data) . Now most of my JTextFields have InputVerifier set to them, for validation purpose. The input verifier pops up JOptionPane whenever there is an invalid input.

Now, if a user enter an invalid data and moves ahead and clicks a button on the Panel, then a dialog pops up and the user have to respond to it. but after that also the button does not paint to release state. It still looked like it is pressed but actually it is not. As the whole code is pretty messy, I am putting the problem scenario in the code below:-

What should I do so that the JButton looks unpressed? I would appreciate if the logic is also explained.

Thanks in advance.

```
package test;

import java.awt.BorderLayout;
import java.awt.Frame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.InputVerifier;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

public class VerifierTest extends JFrame {

    private static final long serialVersionUID = 1L;

    public VerifierTest() {
        JTextField tf;
        tf = new JTextField("TextField1");

        getContentPane().add(tf, BorderLayout.NORTH);
        tf.setInputVerifier(new PassVerifier());

        final JButton b = new JButton("Button");
        b.setVerifyInputWhenFocusTarget(true);
        getContentPane().add(b, BorderLayout.EAST);
        b.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (b.hasFocus())
                    System.out.println("Button clicked");
            }
        });

        addWindowListener(new MyWAdapter());
    }

    public static void main(String[] args) {
        Frame frame = new VerifierTest();
        frame.setSize(400, 200);
        frame.setVisible(true);
        //frame.pack();
    }

    class MyWAdapter extends WindowAdapter {

        public void windowClosing(WindowEvent event) {
            System.exit(0);
        }
    }

    class PassVerifier extends InputVerifier {

        public boolean verify(JComponent input) {
            JTextField tf = (JTextField) input;
            String pass = tf.getText();
            if (pass.equals("Manish"))
                return true;
            else {
                String message = "illegal value: " + tf.getText();
                JOptionPane.showMessageDialog(tf.getParent(), message,
                        "Illegal Value", JOptionPane.ERROR_MESSAGE);

                return false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:55:24.863

该方法`verify`实际上不是打开 JOptionPane 的好地方。

您可以考虑几种方法来解决您的问题：

1.  您希望每次文本字段失去焦点并且输入不正确时出现此 JOptionPane：在 JTextField 上使用 FocusListener 并根据适当的事件采取行动
2.  您希望每次按下按钮时都会出现此 JOptionPane：如果输入不正确，请使用 ActionListener 执行此操作。

这是后一个选项的一小部分：

```
import java.awt.BorderLayout;
import java.awt.Frame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.InputVerifier;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

public class VerifierTest extends JFrame {

    private static final long serialVersionUID = 1L;

    public VerifierTest() {
        final JTextField tf = new JTextField("TextField1");

        getContentPane().add(tf, BorderLayout.NORTH);
        tf.setInputVerifier(new PassVerifier());

        final JButton b = new JButton("Button");
        b.setVerifyInputWhenFocusTarget(true);
        getContentPane().add(b, BorderLayout.EAST);
        b.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (!tf.getInputVerifier().verify(tf)) {
                    JOptionPane.showMessageDialog(tf.getParent(), "illegal value: " + tf.getText(), "Illegal Value",
                            JOptionPane.ERROR_MESSAGE);
                }
                if (b.hasFocus()) {
                    System.out.println("Button clicked");
                }
            }
        });
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        Frame frame = new VerifierTest();
        frame.setSize(400, 200);
        frame.setVisible(true);
    }

    class PassVerifier extends InputVerifier {

        @Override
        public boolean verify(JComponent input) {
            final JTextField tf = (JTextField) input;
            String pass = tf.getText();
            return pass.equals("Manish");
        }
    }
} 
```

还可以考虑设置 JFrame 的默认关闭操作，而不是添加窗口侦听器（但如果您想弹出一个对话框询问用户是否确定要退出您的应用程序，使用 WindowListener 是一种好方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T20:33:25.737

我已经为按钮添加了一个新的鼠标侦听器，如下所示，它现在对我来说似乎工作正常，但我不确定这是否是纠正按钮选择状态的好方法。

```
package test;

import java.awt.BorderLayout;
import java.awt.Frame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.InputVerifier;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.plaf.basic.BasicButtonListener;

public class VerifierTest extends JFrame {

    private static final long serialVersionUID = 1L;

    public VerifierTest() {
        JTextField tf;
        tf = new JTextField("TextField1");

        getContentPane().add(tf, BorderLayout.NORTH);
        tf.setInputVerifier(new PassVerifier());

        final JButton b = new JButton("Button");
        b.setVerifyInputWhenFocusTarget(true);
        getContentPane().add(b, BorderLayout.EAST);
        b.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (b.hasFocus())
                    System.out.println("Button clicked");
            }
        });

        b.addMouseListener(new BasicButtonListener(b) {
            @Override
            public void mouseExited(MouseEvent e) {
                ((JButton)e.getSource()).getModel().setArmed(false);
                ((JButton)e.getSource()).getModel().setPressed(false);
            }

        });

        addWindowListener(new MyWAdapter());
    }

    public static void main(String[] args) {
        Frame frame = new VerifierTest();
        frame.setSize(400, 200);
        frame.setVisible(true);
        // frame.pack();
    }

    class MyWAdapter extends WindowAdapter {

        public void windowClosing(WindowEvent event) {
            System.exit(0);
        }
    }

    class PassVerifier extends InputVerifier {

        public boolean verify(JComponent input) {
            JTextField tf = (JTextField) input;
            String pass = tf.getText();
            if (pass.equals("Manish"))
                return true;
            else {
                final String message = "illegal value: " + tf.getText();
                        JOptionPane.showMessageDialog(null, message,
                                "Illegal Value", JOptionPane.ERROR_MESSAGE);

                return false;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T10:10:13.287

首先：在 verify() 中打开对话框的 InputVerifier 的*所有*实现都是**无效**的。他们违反了他们的合同，API doc：

> 这种方法应该没有副作用。

“应该”的真正意思是“不得”。副作用的正确位置是 shouldYieldFocus。

第二：将副作用（显示消息对话框）正确移动到 shouldYieldFocus 中效果不佳......由于一个[错误（他们称之为功能请求；-）](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4533820)，这已经超过十年并且[在前 10 名RFE](http://bugs.sun.com/bugdatabase/top25_rfes.do)

作为一个绕过漏洞的黑客，@dareurdrem 的 mouseListener 与任何可行的黑客一样好:-)

**更新**

在尝试了一些不同的选项来破解这个错误之后，这里是另一个 hack - 它和所有 hack 一样脆弱（并且不能在 LAF 切换中存活，如果需要动态切换，则必须重新安装）

为了破解鼠标行为，基本的方法是连接到 ui 安装的监听器：

*   找到原文
*   实现一个自定义侦听器，它将大多数事件直接委托给原始事件
*   对于按下的事件，首先请求焦点：如果将委托委托给原始，则不执行任何操作

最后一个项目符号稍微多一些，因为焦点事件可以是异步的，所以我们必须调用检查是否被聚焦。反过来，调用需要在没有人反对的情况下发送释放。

另一个怪癖是 rootPane 的按下操作（对于它的 defaultButton）：它通过无条件地调用 doClick 来完成而不尊重任何 inputVerifiers。这可以通过钩入动作来破解，遵循与钩入mouseListener相同的模式：

*   找到 rootPane 的按下操作
*   实现一个自定义操作，检查可能否决的 inputVerifier：如果不是，则委托给原始操作，否则什么也不做

沿这些行修改的示例：

```
public class VerifierTest implements Runnable {

    private static final long serialVersionUID = 1L;

    @Override
    public void run() {
        InteractiveTestCase.setLAF("Win");
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 200);

        JTextField tf = new JTextField("TextField1");
        tf.setInputVerifier(new PassVerifier());
        frame.add(tf, BorderLayout.NORTH);

        final JButton b = new JButton("Button");
        frame.add(b);
        b.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
               System.out.println("Button clicked");
            }
        });
        // hook into the mouse listener
        replaceBasicButtonListener(b);
        frame.add(new JTextField("not validating, something else to focus"),
                BorderLayout.SOUTH);
        frame.getRootPane().setDefaultButton(b);
        // hook into the default button action
        Action pressDefault = frame.getRootPane().getActionMap().get("press");
        frame.getRootPane().getActionMap().put("press", new DefaultButtonAction(pressDefault));
        frame.setVisible(true);
    }

    protected void replaceBasicButtonListener(AbstractButton b) {
        final BasicButtonListener original = getButtonListener(b);
        if (original == null) return;
        Hacker l = new Hacker(original);
        b.removeMouseListener(original);
        b.addMouseListener(l);
    }

    public static class Hacker implements MouseListener {
        private BasicButtonListener original;

        /**
         * @param original the listener to delegate to.
         */
        public Hacker(BasicButtonListener original) {
            this.original = original;
        }

        /**
         * Hook into the mousePressed: first request focus and
         * check its success before handling it.
         */
        @Override
        public void mousePressed(final MouseEvent e) {
            if (SwingUtilities.isLeftMouseButton(e)) {
                if(e.getComponent().contains(e.getX(), e.getY())) {
                    // check if we can get the focus
                    e.getComponent().requestFocus();
                    invokeHandleEvent(e);
                    return;
                }
            }
            original.mousePressed(e);
        }

        /**
         * Handle the pressed only if we are focusOwner.
         */
        protected void handlePressed(final MouseEvent e) {
            if (!e.getComponent().hasFocus())  {
                // something vetoed the focus transfer
                // do nothing
                return;
            } else {
                original.mousePressed(e);
                // need a fake released now: the one from the
                // original cycle might never has reached us
                MouseEvent released = new MouseEvent(e.getComponent(), MouseEvent.MOUSE_RELEASED,
                        e.getWhen(), e.getModifiers(), 
                        e.getX(), e.getY(), e.getClickCount(), e.isPopupTrigger()
                        );
                original.mouseReleased(released);
            }
        }

        /**
         * focus requests might be handled
         * asynchronously. So wrap the check 
         * wrap the block into an invokeLater.
         */
        protected void invokeHandleEvent(final MouseEvent e) {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    handlePressed(e);
                }
            });
        }

        @Override
        public void mouseClicked(MouseEvent e) {
            original.mouseClicked(e);
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            original.mouseReleased(e);
        }

        @Override
        public void mouseEntered(MouseEvent e) {
            original.mouseEntered(e);
        }

        @Override
        public void mouseExited(MouseEvent e) {
            original.mouseExited(e);
        }
    }
    public static class DefaultButtonAction extends AbstractAction {

        private Action original;

        /**
         * @param original
         */
        public DefaultButtonAction(Action original) {
            this.original = original;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            JRootPane root = (JRootPane) e.getSource();
            JButton owner = root.getDefaultButton();
            if (owner != null && owner.getVerifyInputWhenFocusTarget()) {
                Component c = KeyboardFocusManager
                        .getCurrentKeyboardFocusManager()
                         .getFocusOwner();
                if (c instanceof JComponent && ((JComponent) c).getInputVerifier() != null) {
                    if (!((JComponent) c).getInputVerifier().shouldYieldFocus((JComponent) c)) return;
                }

            }
            original.actionPerformed(e);
        }

    }
    /**
     * Returns the ButtonListener for the passed in Button, or null if one
     * could not be found.
     */
    private BasicButtonListener getButtonListener(AbstractButton b) {
        MouseMotionListener[] listeners = b.getMouseMotionListeners();

        if (listeners != null) {
            for (MouseMotionListener listener : listeners) {
                if (listener instanceof BasicButtonListener) {
                    return (BasicButtonListener) listener;
                }
            }
        }
        return null;
    }

    public static void main(String[] args) {
       SwingUtilities.invokeLater(new VerifierTest());
    }

    public static class PassVerifier extends InputVerifier {
        /**
         * Decide whether or not the input is valid without
         * side-effects.
         */
        @Override
        public boolean verify(JComponent input) {
            final JTextField tf = (JTextField) input;
            String pass = tf.getText();
            if (pass.equals("Manish"))
                return true;
            return false;
        }

        /**
         * Implemented to ask the user what to do if the input isn't valid.
         * Note: not necessarily the best usability, it's mainly to
         * demonstrate the different effects on not/agreeing with
         * yielding focus transfer.
         */
        @Override
        public boolean shouldYieldFocus(final JComponent input) {
            boolean valid = super.shouldYieldFocus(input);
            if (!valid) {
                String message = "illegal value: " + ((JTextField) input).getText();
                int goAnyWay = JOptionPane.showConfirmDialog(input, "invalid value: " +
                        message + " - go ahead anyway?");
                valid = goAnyWay == JOptionPane.OK_OPTION;
            }
            return valid;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T18:56:29.157

我添加了一个调用以`SwingUtilities`确保 GUI 位于事件线程上，并且我删除了您对 Frame 的引用。

GUI 在 Windows XP 上适用于我。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.InputVerifier;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class VerifierTest implements Runnable {

    private static final long serialVersionUID = 1L;

    public VerifierTest() {

    }

    @Override
    public void run() {
        JFrame frame = new JFrame();
        frame.setSize(400, 200);

        JTextField tf;
        tf = new JTextField("TextField1");
        tf.setInputVerifier(new PassVerifier());
        frame.getContentPane().add(tf, BorderLayout.NORTH);

        final JButton b = new JButton("Button");
        b.setVerifyInputWhenFocusTarget(true);
        frame.getContentPane().add(b, BorderLayout.EAST);
        b.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (b.hasFocus())
                    System.out.println("Button clicked");
            }
        });

        frame.addWindowListener(new MyWAdapter());
        frame.setVisible(true);
    }

    public static void main(String[] args) {
       SwingUtilities.invokeLater(new VerifierTest());
    }

    class MyWAdapter extends WindowAdapter {
        @Override
        public void windowClosing(WindowEvent event) {
            System.exit(0);
        }
    }

    class PassVerifier extends InputVerifier {
        @Override
        public boolean verify(JComponent input) {
            JTextField tf = (JTextField) input;
            String pass = tf.getText();
            if (pass.equals("Manish"))
                return true;
            else {
                String message = "illegal value: " + tf.getText();
                JOptionPane.showMessageDialog(tf.getParent(), message,
                        "Illegal Value", JOptionPane.ERROR_MESSAGE);

                return false;
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T13:43:31.613

实际上，真正的问题在于焦点系统和 awt 侦听器如何交互。在 Java 中声明了一些错误，开发人员正在反复讨论谁负责。鼠标侦听器执行：processMouseEvent 并且在该逻辑中，当前 FocusOwner 被要求产生焦点。它失败。但是因为已经处理了一半的事件，所以按钮变为武装并且焦点仍然在该字段上。

我终于看到了一位开发者的评论：如果不允许该字段失去焦点，请不要让侦听器继续。

例如：定义一个带有编辑的 JTextfield，只允许值 < 100。当您失去焦点时会弹出一条消息。我用代码覆盖了我的基本 JButton 类的 processMouseEvent(MouseEvent e)：

```
protected void processMouseEvent(MouseEvent e) {
    if ( e.getComponent() != null && e.getComponent().isEnabled() ) { //should not be processing mouse events if it's disabled.
            if (e.getID() == MouseEvent.MOUSE_RELEASED && e.getClickCount() == 1) {
                // The mouse button is being released as per normal, and it's the first click. Process it as per normal.
                super.processMouseEvent(e);

                // If the release occured within the bounds of this component, we want to simulate a click as well
                if (this.contains(e.getX(), e.getY())) {
                    super.processMouseEvent(new MouseEvent(e.getComponent(),
                                                            MouseEvent.MOUSE_CLICKED,
                                                            e.getWhen(),
                                                            e.getModifiers(),
                                                            e.getX(),
                                                            e.getY(),
                                                            e.getClickCount(),
                                                            e.isPopupTrigger(),
                                                            e.getButton()));
                }
            }
            else if (e.getID() == MouseEvent.MOUSE_CLICKED && e.getClickCount() == 1) {
                // Normal clicks are ignored to prevent duplicate events from normal, non-moved events
            }
            else if (e.getID() == MouseEvent.MOUSE_PRESSED && e.getComponent() != null && (e.getComponent().isFocusOwner() || e.getComponent().requestFocusInWindow())) {// if already focus owner process mouse event
                super.processMouseEvent(e); 
            }
            else {
                // Otherwise, just process as per normal.
                if (e.getID() != MouseEvent.MOUSE_PRESSED) {
                    super.processMouseEvent(e); 
                }
            }
        }
} 
```

这个逻辑的核心是简单的问题。按钮：你已经是焦点所有者了吗？如果不是：你（按钮）是否可能获得焦点（记住 - shouldYieldFocus() 在 requestFocusInWindow() 调用中的当前焦点持有者上调用，如果无效，则始终返回 false ）

这也有弹出错误对话框的副作用！

此逻辑阻止 Java 库 processMouseEvent 逻辑处理半个事件，而 Focus System 阻止它完成。

显然，您需要在所有不同的 JComponents 上使用这种类型的逻辑来执行单击操作。

# lucene - 获取 Sitecore 内容数据中的最后一项

> ID：12500498
> 
> 赞同：1
> 
> 时间：2012-09-19T18:13:29.293
> 
> 标签：lucene, sitecore, sitecore6

我正在执行搜索，我必须获取存储在 sitecore/content/data/MyItem 中的最后一项的“ID”（字段）。存储在此文件夹中的项目数量超过 1000 个。我知道 Lucene 搜索是非常有效的。我执行了 Lucene 搜索以根据以下值获取项目：

```
using (IndexSearchContext searchContext = indx.CreateSearchContext())
            {
                var db = Sitecore.Context.Database;
                CombinedQuery query = new CombinedQuery();

                QueryBase catQuery = new FieldQuery("country", guidValueToSearch); //FieldName, FieldValue.
                SearchHits results = searchContext.Search(catQuery); //Searching the content items by fields.
                SearchResultCollection result = results.FetchResults(0, numOfArticles); 
```

在这里，我传递了**guidValueToSearch**以获取需要获取“国家”字段值的项目。但我想获取文件夹中的最后一项。我应该如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T20:09:40.493

如果您知道您需要 /sitecore/content/data/MyItem 的最后一个子项，您还可以使用更简单的方法并获取 parentItem，然后检索最后一个子项：

```
Item myItem = Sitecore.Context.Database.GetItem("/sitecore/content/data/MyItem");
Item lastItem = myItem.Children.Last(); 
```

后代而不是孩子也可以这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T01:42:52.770

如果您确实想使用搜索来实现它，那么看看[这个](https://stackoverflow.com/a/7320645/202)答案，它解释了如何扩展 IndexSearchContext 以拥有接受 Lucene.Net.Search.Sort 的方法。然后，您可以传入 Sitecore.Search.BuiltinFields.Created 或 Sitecore.Search.BuiltinFields.Updated 字段（取决于您所追求的）。

# android - How to always have 2 actionbar items + overflow

> ID：12500500
> 
> 赞同：3
> 
> 时间：2012-09-19T18:13:33.840
> 
> 标签：android, overflow, android-actionbar

I am having 5 items in the menu, and I only want to show 2 at the time.

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_start"
        android:icon="@drawable/ic_action_start"
        android:orderInCategory="93"
        android:showAsAction="ifRoom|withText"
        android:title="@string/menu_start"/>
    <item
        android:id="@+id/menu_filter"
        android:icon="@drawable/filter_icon"
        android:orderInCategory="94"
        android:showAsAction="ifRoom|withText"
        android:title="@string/menu_filters"/>
    <item
        android:id="@+id/menu_refresh"
        android:icon="@drawable/ic_menu_refresh"
        android:orderInCategory="95"
        android:showAsAction="never"
        android:title="@string/menu_refresh"/>
    <item
        android:id="@+id/menu_delete_all"
        android:icon="@drawable/ic_menu_delete"
        android:orderInCategory="96"
        android:showAsAction="never"
        android:title="@string/menu_delete_all"/>
    <item
        android:id="@+id/menu_show_hidden"
        android:orderInCategory="97"
        android:showAsAction="never"
        android:icon="@drawable/ic_menu_show_hidden"
        android:title="@string/menu_show_hidden"/>

</menu> 
```

When I test this on Galaxy Nexus, or any device that doesnt have menu button, it creates an overflow menu, however it does not add to be the third one as I would liked, but it removes my second icon and replaces it.

How do I have to setup the actionbar, to have 2 icons on devices without menu button, and 2 + (overflow) on devices that have?

Thanks !

# java - IntelliJ IDEA 是否有 `Ctrl` + `K`、`Ctrl` + `D` 等价物？

> ID：12500502
> 
> 赞同：8
> 
> 时间：2012-09-19T18:13:41.703
> 
> 标签：java, intellij-idea

我习惯了 Visual Studio 的`Ctrl`+ `K`、`Ctrl`+`D`快捷方式来快速整理我的 C# 代码，Intellij IDEA for Java 中是否存在等价物？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T18:18:48.003

IntelliJ IDEA 中的格式代码快捷方式是`Ctrl``Alt``L`.

这是[IntelliJ IDEA 和 Eclipse 中的键盘快捷键列表](http://www.catalysts.cc/wissenswertes/intellij-idea-and-eclipse-shortcuts/?lang=en)。

另请注意，您可以[自己配置快捷方式](http://www.jetbrains.com/idea/webhelp/configuring-keyboard-shortcuts.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:56:10.243

您可以在 [Help Menu] -> [Default Keymap Reference] 中找到所有键盘快捷键。这是一个出色的 PDF，您可以打印并保存在键盘旁边。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:17:46.897

是的，点击`CTRL`++`ALT`并`L`按照选项进行操作。

# c# - LINQ to Entities：where 子句中的可空日期时间

> ID：12500506
> 
> 赞同：3
> 
> 时间：2012-09-19T18:14:05.990
> 
> 标签：c#, entity-framework, entity-framework-4

我有一个 where 子句在实体上查找子对象：

```
var Lookup = row.Offenses.Where(x => x.Desc == co.Desc && x.Action == co.Action && x.AppealYN == co.AppealYN && x.OffDate == co.OffDate).ToList(); 
```

有时`co.OffDate`可以为null，这会导致异常。现在，我能想到的唯一解决方法是使用 if 语句：

```
 if (co.OffDate.HasValue)
                                {
 var Lookup = row.Offenses.Where(x => x.Desc == co.Desc && x.Action == co.Action && x.AppealYN == co.AppealYN && x.OffDate == co.OffDate).ToList();
                                }
                                else
                                {
                                     var Lookup = row.Offenses.Where(x => x.Desc == co.Desc && x.Action == co.Action && x.AppealYN == co.AppealYN).ToList();
                                } 
```

无论如何我可以重新编写 linq 查询来完成 if 语句的作用吗？我仍然想做一个查找，即使`co.OffDate`是空的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T18:22:51.640

您可以在 Where 过滤器中插入一个三元组：

```
var Lookup = row.Offenses
  .Where(x => 
    x.Desc == co.Desc 
    && x.Action == co.Action 
    && x.AppealYN == co.AppealYN 
    && (co.OffDate.HasValue ? x.OffDate == co.OffDate : true)
  ).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:18:17.413

我会重写它以使其更具可读性（在我看来）：

```
var query = row.Offenses.Where(x => x.Desc == co.Desc 
                                    && x.Action == co.Action 
                                    && x.AppealYN == co.AppealYN)
if (co.OffenseDate.HasValue)
{
  query = query.Where(x.OffDate == co.OffenseDate);
}

var Lookup = query.ToList(); 
```

# javascript - Backbone.Marionette 和渲染嵌套结构

> ID：12500507
> 
> 赞同：1
> 
> 时间：2012-09-19T18:14:07.017
> 
> 标签：javascript, backbone.js, coffeescript, marionette

我刚刚开始使用 Backbone.Marionette，并且在渲染具有多个嵌套项的结构时遇到了麻烦。我有一个有很多频道的电视指南，每个频道都有很多节目。json结构为：

```
[
  {
    "name":"HBO",
    "number":"541",
    "programs":[
      {
         "name":"Game of Thrones"
      },
      {
         "name":"Gojir returns"
      }
    ]
  },

  {
    "name":"Showtime",
    "number":"666",
    "programs":[
      {
         "name":"Alex Cook Saves Space"
      },
      {
         "name":"A Clockwork Orange"
      }
    ]
  }
] 
```

模型是这样设置的（使用coffeescript）：

```
class App.Program extends Backbone.Model

class App.Channel extends Backbone.Model
  initialize: ->
    @programs = new App.Programs(@attributes.programs) 
```

和收藏：

```
class App.Programs extends Backbone.Collection
  model: App.Program

class App.Channels extends Backbone.Collection
  model: App.Channel

class App.Guide extends Backbone.Collection
  model: App.Channel
  url: -> 'http://localhost:3000/guide'

  initialize: ->
    @on('reset', @setChannels)

  setChannels: ->
    @channels = new App.Channels(@models) 
```

使用 Backbone.Marionette 视图呈现以下结构的惯用方式是什么（我省略了视图实现，因为它很烂）：

```
<table id="guide">
  <thead>
    <tr>
      <th>Channel</th>
      <th>Program 1</th>
      <th>Progarm 2</th>
    </tr>
  </thead>
  <tbody>
    <tr class="guide-row">
      <td class="channel">541:HBO</td>
      <td class="program">Game of Thrones</td>
      <td class="program">Gojira Returns</td>
    </tr>
    <tr class="guide-row">
      <td class="channel">666:Showtime</td>
      <td class="program">Alex Cook Saves Space</td>
      <td class="program">A Clockwork Orange</td>
    </tr>
  </tbody>
</table> 
```

当渲染到 DOM 时，通道将具有与程序不同的事件处理程序，因此我需要清楚地渲染它们。

非常感激任何的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:40:31.497

好的，我们想出了一个解决方案。这是代码：

```
%script{type: 'text/html', id: 'channel-template'}
  %td.channel <%= number %>: <%= name %>

%script{type: 'text/html', id: 'program-template'}
  <%= name %>

class App.Program extends Backbone.Model

class App.Programs extends Backbone.Collection
  model: App.Program

class App.ProgramView extends Backbone.Marionette.ItemView
  className: 'program'
  template: "#program-template"
  tagName: 'td'

class App.Channel extends Backbone.Model
  initialize: ->
    programs = @get("programs")
    if programs
      @programs = new App.Programs(programs)

class App.Channels extends Backbone.Collection
  model: App.Channel
  url: -> "http://localhost:3000/guide"

class App.ChannelView extends Backbone.Marionette.CompositeView
  className: 'guide-row'
  itemView: App.ProgramView
  tagName: 'tr'
  template: "#channel-template"

  initialize: ->
    @collection = @model.programs

class App.GuideView extends Backbone.Marionette.CollectionView
  id: '#guide'
  tagName: 'table'
  itemView: App.ChannelView 
```

我们遇到的问题之一是模型、集合和视图的加载顺序。这对视图非常重要。我们发现，如果一个 itemView 没有在 Collection/Composite View 中定义/加载，默认是使用父模板来渲染 itemView。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T08:29:05.437

您可以使用[Marionette 的 CompositeView](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md)为模型（整个表）呈现特定模板，并为任何行呈现特定视图

# android - 保存数组列表 用于旋转后显示

> ID：12500508
> 
> 赞同：1
> 
> 时间：2012-09-19T18:14:09.280
> 
> 标签：android, arraylist, hashmap

我可以`ArrayList<HashMap<String, String>>`捆绑保留吗？

我想`ListView`在旋转屏幕后立即显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:29:51.927

您不必将其保存在`Bundle`. 事实上，这似乎有很多信息要存储在`Bundle`.

由于您只是保存一个`HashMap`对象`String`，因此您可以创建一个类来为您缓存它或使其成为`static`类中的一个字段。

**静态字段**只要不包含对`Activity`or a `View`or的引用就可以使用`Drawable`。（这可能会导致内存泄漏）

您可以执行此操作的最简单方法可能是：

```
private static HashMap<String,String> myMap = new HashMap<String,String>(); 
```

因为这个字段是`static`，所以当你的活动被重新创建时，它不会被重新创建。相反，它仍然会在那里供您使用相同的值。

**更多数据存储方式：**

（这些技术也适用于通过配置更改共享数据）。

[http://developer.android.com/guide/faq/framework.html#3](http://developer.android.com/guide/faq/framework.html#3)

> **如何在单个应用程序中的活动/服务之间传递数据？**
> 
> 这取决于您要共享的数据类型：
> 
> **原始数据类型**
> 
> 要在应用程序中的活动/服务之间共享原始数据，请使用 Intent.putExtras()。为了传递需要持久化的原始数据，请使用 Preferences 存储机制。
> 
> **非持久对象**
> 
> 对于短期共享复杂的非持久性用户定义对象，建议采用以下方法：
> 
> **单例类**
> 
> 您可以通过使用单例来利用您的应用程序组件在同一进程中运行这一事实。这是一个设计为只有一个实例的类。它有一个名为 getInstance() 的静态方法，它返回实例；第一次调用此方法时，它会创建全局实例。因为所有调用者都获得相同的实例，所以他们可以将其用作交互点。例如，活动 A 可以检索实例并调用 setValue(3)；稍后的活动 B 可能会检索实例并调用 getValue() 以检索最后设置的值。公共静态字段/方法
> 
> 使数据可跨活动/服务访问的另一种方法是使用公共静态字段和/或方法。您可以从应用程序中的任何其他类访问这些静态字段。要共享一个对象，创建对象的活动会设置一个静态字段以指向该对象，任何其他想要使用该对象的活动只需访问该静态字段。
> 
> **对象弱引用的 HashMap**
> 
> 您还可以使用弱引用的 HashMap 到具有长键的对象。当一个 Activity 想要将一个对象传递给另一个 Activity 时，它只需将该对象放入映射中并通过 Intent Extras 将密钥（这是一个基于计数器或时间戳的唯一 Long）发送给接收者 Activity。接收者活动使用此键检索对象。
> 
> **持久对象**
> 
> 即使应用程序似乎继续运行，系统也可能会选择终止其进程并稍后重新启动它。如果您有数据需要从一个活动调用持续到下一个活动调用，则需要将该数据表示为在通知活动可能会消失时由活动保存的状态。
> 
> 对于共享复杂的持久性用户定义对象，建议采用以下方法：
> 
> *   应用偏好
> *   文件
> *   内容提供者
> *   SQLite 数据库
> 
> 如果共享数据需要跨应用程序进程可能被终止的点保留，则将该数据放在持久存储中，如应用程序首选项、SQLite DB、文件或内容提供程序。有关如何使用这些组件的更多详细信息，请参阅数据存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:28:22.307

您可能应该覆盖 Activity 或 Fragments onSaveInstanceState(Bundle) 函数。这将允许您设置您希望在相同 Activity 或 Fragment 的实例之间保存的任何数据。这是在旋转之间保存的正确方法。

** 更新 **

由于您有一个包含 1 个或多个 Hashmap 的 ArrayList，因此您可能需要将两个对象保存到包中。一个是数组中 HashMap 的数量，然后是每个 HashMap。由于 HashMap 是可序列化的，因此您只需使用 Bundle.putSerializable 将每个 HashMap 放入包中。您需要将所需信息放入包中，以便在 OnResume() 中重新创建 ArrayList。

一种方法可能是这样：让每个 HashMap 的键是每个 HashMap 的某个字符串，例如“Hashmap1”、“Hashmap2”等。然后，如果您知道要从包中检索的 HashMap 的数量和密钥格式，那么您可以重新创建 ArrayList。

# oauth - 登录到多个帐户的用户的 Google OAuth2 UI 中的错误？

> ID：12500513
> 
> 赞同：0
> 
> 时间：2012-09-19T18:14:29.597
> 
> 标签：oauth, oauth-2.0

> **可能重复：**
> [Google 是否已对其 OAuth2.0 流程进行了更新，从而破坏了多个帐户？](https://stackoverflow.com/questions/12478524/has-google-pushed-an-update-to-their-oauth2-0-flow-that-breaks-multiple-accounts)

使用 Passport.js 通过 Google 实现 OAuth2 身份验证。如果我只登录一个 Gmail 帐户，我可以很好地进行身份验证。

但是，如果我同时登录了两个 Google 帐户，那么预期的行为是让 Google 登录页面询问我要使用哪个帐户（例如“formal_me@gmail.com”或“casual_me@gmail.com” ）。过去我看到它是这样工作的。

但是，现在该页面无法列出帐户。该页面显示“选择一个帐户”，但没有列出我登录的内容。

它在 Safari、Firefox 和 Chrome 中失败。而且我现在才看到它，即使我注销并 [通过 Google 重新登录 StackOverflow](https://accounts.google.com/AccountChooser?service=lso&continue=https://accounts.google.com/o/openid2/auth?zt=ChRuaXhYeF9MakZHRFFaVEtZaEduMhIfa3NDQzZiY0Q1ZWdRc2hRVjBpZVpEQXB5UEZtX2N3SQ%25E2%2588%2599APsBz4gAAAAAUFoKX6Nl1llcEK9UkFGzjFaguf-nL8YH&from_login=1&hl=en&as=-48f823099fff68f0&btmpl=authsub)（同样，只有登录多个 Google 帐户）。

它在 AccountChooser.js:1444 上失败，特别是找不到元素“account-list”：

`[AccountChooser.js:1944]` `document.getElementById('account-list').getElementsByTagName')`

所以大概这是谷歌 OAuth2 代码中的一个小错误。

有地方举报吗？或者有没有办法解决？至少，这是一个注释，以防其他人遇到这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:17:58.700

我们（谷歌）在我们的新页面中注意到了这个错误，并且已经将它回滚了。新页面将在下周晚些时候再次显示并修复此错误。

# mysql - (My)SQL 中小数乘法的精度和小数位数

> ID：12500516
> 
> 赞同：4
> 
> 时间：2012-09-19T18:14:35.877
> 
> 标签：mysql, decimal, scale, precision

假设我有两个数字`num1(p1,s1)`和`num2(p2, s2)`（其中`p`和`s`分别是精度和比例）。

`num1`计算时间结果的精度和规模的规则是什么`num2`？

直观地说，规模将是和的总和`s1`（`s2`因为这就是一年级乘法的方式！），但我无法弄清楚找到精度的规则。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:21:36.637

我假设您已将这两个数字声明为如下所示，因为您问题中的语法不是 SQL：

```
CREATE TABLE decimals (num1 DECIMAL(p1,s1), num2 DECIMAL(p2,s2)); 
```

精度只是数字存储到的位数，比例是小数点后的位数。

因此，乘法结果的比例是正确的`s1 + s2`，但*最大*精度也将是 sum `p1 + p2`。实际精度可能低于此值，具体取决于相乘的数字。

**例子**

从可以存储为的数字开始`DECIMAL(2,1)`：

```
SELECT 9.9 * 9.9; 
```

给出`98.01`可以存储为`DECIMAL(4,2)`.

```
SELECT 9.9 * 0.5; 
```

给出`4.95`可以存储为`DECIMAL(3,2)`

# sql - SQL：选择最大列的不同总和（列）

> ID：12500521
> 
> 赞同：1
> 
> 时间：2012-09-19T18:15:11.500
> 
> 标签：sql

我有一个这样的工资表：

```
id | person_id | start_date  | pay
1  | 1234      | 2012-01-01  | 3000
2  | 1234      | 2012-05-01  | 3500
3  | 5678      | 2012-01-01  | 5000
4  | 5678      | 2013-01-01  | 6000
5  | 9101      | 2012-09-01  | 2000
6  | 9101      | 2014-04-01  | 3000
7  | 9101      | 2011-01-01  | 1500
and so on... 
```

现在我想查询一个公司所有人员特定月份的工资总和。

我已经有了在特定公司在特定月份工作的人员的 ID，所以我可以做类似 WHERE person_id IN (...)

不过，我对薪水查询有一些问题。例如，2012-08 月份的结果应该是：

```
10000 
```

即 3500+5000+1500。

因此，我需要找到最大 start_date <= 特定月份的总工资值（对于 IN 子句中的所有人）。

我尝试了各种 INNER JOINS，但这是漫长的一天，我现在无法思考。

任何提示都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:22:40.467

您必须对这些事情使用[group by](http://www.w3schools.com/sql/sql_groupby.asp) ....

```
 select person_id,sum(pay) from salary where person_id in(...) group by person_id 
```

可能会帮助你......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:24:26.363

您需要获取活动记录。以下通过计算相关月份之前的最大开始日期来做到这一点：

```
select sum(s.pay)
from (select person_id, max(start_date) as maxstartdate
      from salary
      where person_id in ( . . . ) and
            start_date < <first day of month of interest>
      group by person_id
   ) p join
   salary s
   on s.person_id = p.person_id and
      s.maxstartdate = p.start_date 
```

您需要填写月份和 id 列表。

您也可以使用排名函数来执行此操作，但您无需指定您使用的是哪个 SQL 引擎。

# asp.net - 异常错误必须是 IListSource、IEnumerable 或 IDataSource 类型。网格视图

> ID：12500526
> 
> 赞同：0
> 
> 时间：2012-09-19T18:15:28.567
> 
> 标签：asp.net, ado.net

我得到一个作为异常错误的 catch exp，其中说数据源是无效类型，它必须是 IListSource、IEnumerable 或 IDataSource 类型。

当我尝试通过gridview向数据库添加新记录时出现此错误，因此我将数据库中的数据很好地获取到此gridview中，因此我不明白当数据库不可用时我得到一个catch exp作为异常。@thesli_number OleDbType.VarChar Value = thenumber 是数据库中的数字类型。

```
 'Add new record to DB
Protected Sub AddNewTask(ByVal sender As Object, ByVal e As EventArgs)
    Dim thecat As String = DirectCast(GridView1.FooterRow.FindControl("txttestcat"), TextBox).Text
    Dim theinfo As String = DirectCast(GridView1.FooterRow.FindControl("txttestinfo"), TextBox).Text
    Dim thenumber As String = DirectCast(GridView1.FooterRow.FindControl("txttestnumber"), TextBox).Text

    Dim strSQL As String = ""
    strSQL = "" & _
    "INSERT INTO [TableTest] " & _
    "([test_cat], [test_info], [test_number])" & _
    "VALUES (@thesli_cat, @thesli_info, @thesli_number)"

    Using conn As New OleDbConnection(ConfigurationManager.ConnectionStrings("MyConnStr").ConnectionString)
        Try
            conn.Open()
            Dim cmd As New OleDbCommand(strSQL, conn)
            cmd.CommandType = CommandType.Text
            cmd.Parameters.Add("@thesli_cat", OleDbType.VarChar).Value = thecat
            cmd.Parameters.Add("@thesli_info", OleDbType.VarChar).Value = theinfo
            cmd.Parameters.Add("@thesli_number", OleDbType.VarChar).Value = thenumber
            GridView1.DataSource = cmd
            GridView1.DataBind()
            'MsgBox("Row(s) Added !! ")
        Catch exp As OleDbException
            If True Then
                MsgBox("Error trying to add current record. " & vbCrLf & "Error: " & exp.Message & "Database Error", MsgBoxStyle.OkOnly, MsgBoxStyle.Critical)
            End If
        Catch exp As Exception
            If True Then
                MsgBox("Error the Database can be unavailable atm. " & vbCrLf & "Error: " & exp.Message & "Database Error", MsgBoxStyle.OkOnly, MsgBoxStyle.Information)
            End If
        End Try
    End Using
End Sub 
```

编辑……………………编辑………………………………………………………………………………………………………………………………编辑.....编辑

好的，我现在可以将数据添加到 gridview，我可以删除一条记录，也可以添加一条新记录。但是我不能让更新事件工作，你能看到这个新代码有什么问题吗！？

```
 'Update record
Protected Sub UpdateTask(ByVal sender As Object, ByVal e As GridViewUpdateEventArgs)
    Dim theid = Convert.ToInt32(DirectCast(GridView1.FooterRow.FindControl("lbltestid"), Label).Text)
    Dim thecat As String = DirectCast(GridView1.FooterRow.FindControl("lbltestcat"), Label).Text
    Dim theinfo As String = DirectCast(GridView1.FooterRow.FindControl("lbltestinfo"), Label).Text
    Dim thenumber As String = DirectCast(GridView1.FooterRow.FindControl("lbltestnumber"), Label).Text

    Dim strSQL As String = ""
    strSQL = "" & _
    "UPDATE [TableTest] " & _
    "SET [test_cat] = @thesli_cat, [test_info] = @thesli_info, [test_number] = @thesli_number " & _
    "WHERE [test_id] = @thesli_id"

    Using conn As New OleDbConnection(ConfigurationManager.ConnectionStrings("MyConnStr").ConnectionString)
        Try
            conn.Open()
            Dim cmd As New OleDbCommand(strSQL, conn)
            cmd.CommandType = CommandType.Text
            cmd.Parameters.Add("@thesli_id", OleDbType.Integer).Value = theid
            cmd.Parameters.Add("@thesli_cat", OleDbType.VarChar).Value = thecat
            cmd.Parameters.Add("@thesli_info", OleDbType.VarChar).Value = theinfo
            cmd.Parameters.Add("@thesli_number", OleDbType.Integer).Value = thenumber
            cmd.ExecuteNonQuery()
            'MsgBox("Row(s) Updated !! ")
            GridView1.EditIndex = -1
            GetRecords()
        Catch exp As OleDbException
            If True Then
                MsgBox("Error trying to add current record. " & vbCrLf & "Error: " & exp.Message & "Database Error", MsgBoxStyle.OkOnly, MsgBoxStyle.Critical)
            End If
        Catch exp As Exception
            If True Then
                MsgBox("Error the Database can be unavailable atm. " & vbCrLf & "Error: " & exp.Message & "Database Error", MsgBoxStyle.OkOnly, MsgBoxStyle.Information)
            End If
        End Try
    End Using
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:35:49.070

如果您的原始问题的答案在我上面的评论中得到了回答（在下面的引号中发布），那么您应该将此问题标记为已回答，然后发布一个全新的问题，以便您获得更准确的回复。这个问题不再适用于您的实际问题。

我的回答在您的评论中解决了您最初的问题：

> 该示例（参考您上面评论中的链接）没有直接将 *OleDbCommand*分配给 DataSource，因为它不能。如果您查看示例，作者将 cmd 变量传递给 GetData 函数 GetData(cmd)，该函数很可能会执行存储过程并返回 DataSource 支持的类型（例如 IListSource、IEnumerable 或 IDataSource）。

# c# - 从 Media.RecordSoundAction 保存的音频文件中获取字节数组

> ID：12500530
> 
> 赞同：2
> 
> 时间：2012-09-19T18:16:01.897
> 
> 标签：c#, android, audio, mono, xamarin.android

我有一个使用创建的文件

```
var recordIntent = new Intent(MediaStore.Audio.Media.RecordSoundAction); 
```

检索此文件的 URI 没有问题。而且我可以毫无困难地使用 MediaPlayer 播放它。

但是，我想将此作为对我的 webAPI 的响应发送，并且正在寻找一种方法来将此 URI 表示的音频文件转换为可以转换为 JSON 的字节数组。

使用图像文件，我可以做类似的事情

```
Bitmap bitmap = MediaStore.Images.Media.GetBitmap(ContentResolver, responseUri);
bitmap.Compress(Bitmap.CompressFormat.Png, 0, stream);
byte[] bitmapData = stream.ToArray(); 
```

有没有类似的方法可以从我的音频 URI 中检索字节数组数据？

编辑：音频 URI 的格式。
responseUri = {content://media/external/audio/media/21}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:46:42.967

从大量不同的 SO 答案中获取，以及从 Java 对单声道进行一些额外的转换，我得出了这些结果。

```
 public String GetRealPathFromUri(Uri contentUri){
        String[] proj = {MediaStore.Audio.AudioColumns.Data};
        ICursor cursor = ManagedQuery(contentUri, proj, null, null, null);
        int column_index = cursor.GetColumnIndex(MediaStore.Audio.AudioColumns.Data);
        cursor.MoveToFirst();
        return cursor.GetString(column_index);
    }

var responseRealPath = GetRealPathFromUri(responseUri);
var getBytes = System.IO.File.ReadAllBytes(responseRealPath);
var responseBase = Convert.ToBase64String(getBytes); 
```

# url - 如何防止 Google 将 URL 中的会话 ID 编入索引？

> ID：12500531
> 
> 赞同：0
> 
> 时间：2012-09-19T18:16:06.313
> 
> 标签：url, session, web-crawler, sessionid

我的网站之一是用于不接受 cookie 的旧手机，因此它使用基于 URL 的会话 ID。

但是，Google 正在为 Session ID 编制索引，所以当我在 Google 上搜索我的网站时，所有结果都会出现一个特定的 Session ID。

在大多数情况下，当客人点击该会话 ID 时，它不再有效，但我至少有一个案例，客人点击了来自 Google 的链接，它实际上将他们登录到其他人的帐户，即显然是一个巨大的安全漏洞。

那么，我怎样才能让 Google 不将我的 URL 中的会话 ID 编入索引呢？如果有帮助，会话 ID在 Google 的网站管理员工具中始终设置为“**代表 URL ”。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:14:10.840

为此，您可以在您的网络根目录中放置一个 robots.txt 文件，告诉 Googlebot 和所有其他抓取工具不要抓取具有该属性的网址。

这是一个例子：

假设您要阻止的 URL 采用以下形式：

```
http://www.mywebsite.com/page.html?id=1234 
```

用于阻止具有 id 属性的 URL 的 robots.txt 语法是：

```
User-agent: *
Disallow: /*id 
```

[您可以在http://www.robotstxt.org](http://www.robotstxt.org)找到有关 robots.txt 的更多信息

[在http://www.seochat.com/c/a/Search-Engine-Optimization-Help/Preventing-Duplicate-Content-on-an-ECommerce-Site-from-Session-IDs/1/](http://www.seochat.com/c/a/Search-Engine-Optimization-Help/Preventing-Duplicate-Content-on-an-ECommerce-Site-from-Session-IDs/1/)上阅读更多相关信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-14T10:27:33.500

看看这个，[https://developers.google.com/search/docs/advanced/crawling/consolidate-duplicate-urls](https://developers.google.com/search/docs/advanced/crawling/consolidate-duplicate-urls)，你可以设置规范的url，google-bot会使用这个url来抓取你的网页，这也可以解决同一网页的重复 url 问题。

# .htaccess - 重定向 301 的 url，扩展名为 none，但在少数目录树级别下

> ID：12500532
> 
> 赞同：0
> 
> 时间：2012-09-19T18:16:13.030
> 
> 标签：.htaccess, redirect, url-rewriting

我发现这个解决方案可以成功地将 url 从重定向`www.domain.com/example.php`到，`www.domain.com/example`但是当子目录很少时我不能做同样的事情，比如：`domain.com/dir1/di2/dir3/example.php`to`domain.com/dir1/di2/dir3/example`

应如何修改此规则以使先前的重定向起作用？

```
RewriteRule (.*).php$ /$1 [R=301,L]
RewriteRule (.*).html$ /$1 [R=301,L] 
```

这是我的 .htaccess

```
ErrorDocument 404 /misc/404.html

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

RewriteRule (.*).php$ /$1 [R=301,L]
RewriteRule (.*).html$ /$1 [R=301,L]

# Forces a trailing slash to be added
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
#RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
#RewriteRule (.*)$ /$1/ [R=301,L] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:43:09.693

> `http://demo.domain.com/en/index.php`带我去`http://demo.domain.com/index`，它应该带我去`http://demo.domain.com/en/index`
> 
> .htaccess 在 /en/ 目录中

您需要添加一个：

```
RewriteBase /en/ 
```

正下方`RewriteEngine on`。

您可能还需要`/en/`在重定向规则和条件中添加一个：

```
RewriteRule (.*).php$ /$1 [R=301,L]
RewriteRule (.*).html$ /$1 [R=301,L] 
```

需要是：

```
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteRule (.*).php$ /en/$1 [R=301,L]
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteRule (.*).html$ /en/$1 [R=301,L] 
```

# html - 具有共享功能的 html 5 或 jquery 播放器

> ID：12500534
> 
> 赞同：3
> 
> 时间：2012-09-19T18:16:18.333
> 
> 标签：html, audio, html5-audio, soundcloud, audio-player

我正在寻找具有至少 facebook 和 twitter 共享功能的 html 5 播放器或 jquery 播放器。还有一个链接复制功能，因此有人可以在电子邮件等中粘贴链接。

Soundcloud 很接近，但在 iphone 上，社交网站的分享功能消失了。并且复制链接功能默认为soundcloud而不是我自己的站点。

任何的意见都将会有帮助。

多谢你们！

# c# - 如何使用 C# 中的 WebRequest 检查 IP/网站是否在线？

> ID：12500535
> 
> 赞同：-4
> 
> 时间：2012-09-19T18:16:18.950
> 
> 标签：c#, .net, webrequest

例如，我想制作一个检查 IP 范围的工具，我只需输入：12.34.56.*，该工具应从 12.23.56.0 变为 12.23.56.255。我做了这部分，我尝试使用 ping，但它不能满足我的需要。我有一些正在工作的 IP，而 pinger 告诉我它们没有工作。

我在这里阅读了很多关于 webrequest 的问题，我认为（从我阅读的内容来看）最好的方法是下载网站头，并检查它是否为空。我尝试了很多类似问题的答案，但没有奏效。

PS：我还想设置一个 3000 毫秒左右的超时时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:20:48.287

您可以尝试使用此代码 - 基于`StatusCode`

```
WebRequest request = WebRequest.Create("...."); //Adjust your adress
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
if (response == null || response.StatusCode != HttpStatusCode.OK)
{
  System.Console.Write("is KO");
}
else
... 
```

# php - PHP ZipArchive ExtractTo 挂起问题

> ID：12500540
> 
> 赞同：1
> 
> 时间：2012-09-19T18:16:33.557
> 
> 标签：php, ziparchive

我正在尝试解压缩一个包含两个 csv 文件的文件。我的代码的每个变体都有相同的结果。使用我目前拥有的代码，它只会部分取出一个文件，然后挂起。解压缩的文件显示它是 38,480kb，并且卡在第 214410 行的末尾。存档中的真实文件是 38,487kb，总共有 214442 行。知道什么可能导致它在最后一分钟挂起吗？我正在 Windows 7 机器上的 localhost 上使用 xampp 进行所有测试。这是在 php 中，并且是文件中唯一的代码。所需的 zip 文件与它位于同一文件夹中。

```
<?php
ini_set('memory_limit','-1');
$zip = new ZipArchive;
if ($zip->open('ItemExport.zip') === TRUE) {
for($i = 0; $i < $zip->numFiles; $i++) {
    $filename = $zip->getNameIndex($i);
    $zip->extractTo('.', array($filename));
    }                   
$zip->close();
} else {
echo 'failed';
}
}
?> 
```

提前感谢您的帮助！

编辑** 该文件几乎立即显示在正确的目录中，几秒钟后，文件大小为 38,480kb。在这一点上，它不会做任何其他事情。在等待了足够长的 5-10 分钟后，我打开了文件。它被“锁定以供'另一个用户'编辑”，因为它仍然由 http 持有。写入 csv 文件只会停止第 214,442 行中第 11 列的第 9 列的中间词、中间句。

# c# - 无法从公共财产映射到公共虚拟财产

> ID：12500544
> 
> 赞同：1
> 
> 时间：2012-09-19T18:17:01.887
> 
> 标签：c#, .net, automapper

我有一个自定义类：

```
public class Class1 {
    public string Id { get; set; }
    public MFileType DefaultFileType { get; set; }
} 
```

我试图映射到：

```
public class Class2 {
    public string Id { get; set; }
    public virtual FileType DefaultFileType { get; set; }
} 
```

我知道我可以忽略 ForMember() 方法中的 FileType。

但是是否可以将 Class1 映射到 Class2 的 MFileType/FileType 属性？

我尝试使用：

```
Mapper.CreateMap<Class1, Class2>()
    .ForMember(dest => dest.FileType, opt => opt.MapFrom(src => src.MFileType)); 
```

但这不起作用。Class2 文件是由代码工具生成的，所以我无法更改。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:21:48.250

好的，`MFileType`是 (inherits) 的子类型`FileType`。查看您的代码，您的映射似乎不正确，因为您尝试映射`dest.DefaultFileType`（而不是`dest.FileType`）给定提供的类。如果你解决了这个问题，它应该可以工作，如下面的演示代码所示。

请注意，您应该添加对 AutoMapper 库的引用，或者直接通过 Nuget 安装它。

```
class FileType
{
    public int MyProperty { get; set; }
}
class MFileType : FileType
{
    public int MyProperty2 { get; set; }
}

class Class1
{
    public string Id { get; set; }
    public MFileType DefaultFileType { get; set; }
}
class Class2
{
    public string Id { get; set; }
    public virtual FileType DefaultFileType { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        AutoMapper.Mapper.CreateMap<Class1, Class2>()
            .ForMember(dest => dest.DefaultFileType, opt => opt.MapFrom(src => src.DefaultFileType));

        var class1 = new Class1() { Id = "class1", DefaultFileType = new MFileType() { MyProperty = 1, MyProperty2 = 2 } };
        var class2 = AutoMapper.Mapper.Map<Class2>(class1);

        Console.WriteLine("class2.Id = " + class2.Id);
        // If below it says "False", it mapped correctly
        Console.WriteLine("class2.DefaultFileType == null = " + class2.DefaultFileType == null);

        Console.ReadLine();
    }
} 
```

# list - 用于调用要输入到当前脚本的变量列表的 powershell 脚本

> ID：12500548
> 
> 赞同：1
> 
> 时间：2012-09-19T18:17:08.893
> 
> 标签：list, powershell, parallel-processing, enumerate

所以下面是我关于如何跨受信任域调用组中的递归成员的脚本。我需要帮助的是将其从查找单个组转换为多个组。

在这条线上，`$objGrp = [ADSI]"LDAP://CN=Administrators,CN=Builtin,DC=domain,DC=com"`我必须手动将其更改为我想要搜索的任何组。相反，我希望此脚本调用包含组列表的文本文件。

例如，在文本文件中会有

```
CN=Administrators,CN=Builtin,DC=domain,DC=com
CN=domain admins,CN=users,DC=domain,DC=com
CN=enterprise admins,CN=users,DC=domain,DC=com 
```

我需要添加/更改什么才能做到这一点？

```
# Script begins
#
# Bind to the AD group
$objGrp = [ADSI]"LDAP://CN=Administrators,CN=Builtin,DC=domain,DC=com"
#[ADSI]"LDAP://CN=Administrators,CN=Builtin,DC=domain,DC=com"
#

$Global:GroupMembers = @()

# Function to read the group members - nested members
Function GetGroupMember($objGrp)
{
# Enumerate the group members
foreach($member in $objGrp.member)
{
    # Bind to the each user using DN
    $strTemp = "LDAP://" + $member
    $objTemp = [ADSI]$strTemp

        # Check for AD Group object based on objectCategory
        $strCat = [System.String]$objTemp.objectCategory
    #foreign object

    $res = $strCat.StartsWith("CN=Foreign-Security-Principal")

    #$strCat
    If($res -eq $True)
    {

                # bind to the foreign object
    $strTemp = "LDAP://" + $member
    $tempObj = [ADSI]$strTemp
    # convert binary SID to bindable string SID
    $objBin = $tempObj.objectSID.Item(0)
    $objSID = New-Object System.Security.Principal.SecurityIdentifier($objBin,0)

    $srchDomain = New-Object System.DirectoryServices.DirectoryEntry("LDAP://dc=domain,dc=com")
    $dirSrchObj = New-Object System.DirectoryServices.DirectorySearcher($srchDomain)

    #$objSID.Value
    [System.Environment]::NewLine
    $dirSrchObj.Filter = "((objectSID=" + $objSID.Value + "))"
    # Search scope to sub-level
    $dirSrchObj.SearchScope = "Subtree"
    $dirSrchObj.PageSize = 1
    # Array of result collection - users 
    $srchResArr = $dirSrchObj.FindOne()

    "======================================="
    If ($srchResArr -ne $NULL)
    {
        # bind to the object
        #$strTem = [System.String]$srchResArr.ToString()

        $objEntry = $srchResArr.GetDirectoryEntry()
        # read and compare the object category for group object
        [System.String]$strTemp1  = $objEntry.objectcategory
        $res1 = $strTemp1.StartsWith("CN=Group")

        if($res1 -eq $True)
        {   
            #enumerate the group members
            Write-Host "The members of foreign group " $objEntry.Name "are: "
            Foreach($obj in $objEntry.member)
            {
                $strTemp2 = "LDAP://" + $obj
                $objTemp2 = [ADSI]$strTemp2     

                [System.String]$strTemp3 = $objTemp2.objectCategory
                $res2 = $strTemp3.StartsWith("CN=Group")
                if($res2 -eq $True)
                {
                    GetGroupMember($objTemp2)
                }
                Else
                {
                    $objTemp2.distinguishedName
                    $Global:GroupMembers += $objTemp2.distinguishedName

                }
            }
        }
        Else
        {
            "Foreign user object: "
            $objEntry.distinguishedName
            $Global:GroupMembers += $objEntry.distinguishedName
        }

    }
    "======================================="
    [System.Environment]::NewLine

    }
    Else
    {

        $flag = $strCat.StartsWith("CN=Group")

        # If it is a Group object then call this method (recursive)
        If($flag -eq $TRUE)
        {
            Write-Host "++++++++++++++++++++++Recursive Call to Enumerate" $objTemp.distinguishedName
            GetGroupMember($objTemp)
            Write-Host "---------------------- End Recursive Call to Enumerate" $objTemp.distinguishedName

        }
        # If user object then display its DN
        if($flag -eq $False)
        {
            $objTemp.distinguishedName
            $Global:GroupMembers += $objTemp.distinguishedName
            #$objTemp.sAMAccountname
        }
    }
}
}
#
GetGroupMember $objGrp

""
""
"Final List:"
$Global:GroupMembers | sort -uniq | out-file c:\temp\test.csv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:03:29.930

如果您的组列表在，`C:\grouplist.txt`那么您可以使用`Get-Content`来获取名称，然后遍历它们：

```
$groupNames = Get-Content 'C:\grouplist.txt'

foreach($groupName in $groupNames)
{
    GetGroupMember [ADSI]$groupName
}

"Final List:"
$Global:GroupMembers | sort -uniq | out-file c:\temp\test.csv 
```

# layout - 有没有办法在将大量内容添加到容器时暂停 qooxdoo 布局管理器？

> ID：12500549
> 
> 赞同：2
> 
> 时间：2012-09-19T18:17:13.293
> 
> 标签：layout, dynamic, containers, qooxdoo

我正在基于 ajax 调用在 qooxdoo 桌面应用程序中动态创建内容。我正在创建的一些内容中有很多小部件（大约 200 多个）。

我用谷歌浏览器做了一些分析，看起来大部分处理时间都被布局管理器占用了，因为我在容器上为我创建的每个小部件调用 add()。

有没有办法在我添加所有小部件时暂停布局管理器，然后让它在最后运行一次？

是否有更好的方法可以将大量小部件动态添加到容器中？

这是我正在做的一个例子：

```
var container = new qx.ui.container.Composite(new qx.ui.layout.Flow());

var groupbox = new qx.ui.groupbox.GroupBox();
groupbox.setLayout(new qx.ui.layout.Grid(10, 10));
container.add(groupbox);

// loop through data received from AJAX call and add it to the group box
var row = 0;
data.each(function(pair) {
    var label = new qx.ui.basic.Label(pair.key);
    var field = new qx.ui.form.TextField(pair.value);
    groupbox.add(label, {row: row, column: 0});
    groupbox.add(field, {row: row, column: 1});
    ++row;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:00:29.067

你大概可以

1.  首先将所有小部件添加到“未附加”容器中，即尚未添加到任何地方或其上级不属于布局的容器

2.  然后将“未附加”容器添加到布局中，触发小部件布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:21:16.453

添加小部件时，它会被添加到线程结束后执行的队列中，如果在同一线程上添加多个小部件，则布局重排将执行一次。

因此，如果一个 .add() 和下一个 .add() 之间没有异步，它们就在同一个线程上，并且只进行一次回流。

您在配置文件上看到的时间是布局管理器渲染的正常时间，它必须访问 dom 才能知道某些元素的大小，这个操作需要很多时间，我做的最后一个配置文件更昂贵的操作是“ el.innerWidth”。

如果您想使用 Qooxdoo，我认为没有什么可做的。

# scala - Scala 和多型容器

> ID：12500550
> 
> 赞同：0
> 
> 时间：2012-09-19T18:17:15.093
> 
> 标签：scala, collections, type-systems

我有点问题。我需要将一个函数存储到地图中，但这个函数必须有不同类型的参数。IE：

```
Map(1 -> Int => String, 2 -> String => SomeClass) and so on. 
```

所以，但是 Function1 的类型参数不应该是`Any`类型。我该怎么做？有任何想法吗。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:35:04.760

scala Map 接口只有两个类型参数，所以你不能用 scala 类型系统和标准映射做你想做的事。

由于类型系统已经完成，您可能可以做您想做的事，可能使用与 HList [http://jnordenberg.blogspot.de/2008/08/hlist-in-scala.html中类似的方法](http://jnordenberg.blogspot.de/2008/08/hlist-in-scala.html)

如果您通过这张奇怪的地图提供您尝试解决的实际问题，我们可能会为您的问题提供解决方案。也许类型构造函数采用一种类型并创建另外两种类型的 Function1，但在您陈述要解决的真正问题之前，这只是猜测。

# hibernate - 休眠条件以在地图中返回结果

> ID：12500556
> 
> 赞同：2
> 
> 时间：2012-09-19T18:17:46.443
> 
> 标签：hibernate

我有一个用户表，如何`Criteria`在 Hibernate 中创建一个以 UserId 作为键并以 User 对象作为值的 Map 的创建方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:23:21.640

我不认为这是可能的，因为查询总是返回一个列表：[http](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Criteria.html#list) ://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Criteria.html#list () 或特殊单个元素的情况。

没有可以返回地图的方法。

因此，如果没有像覆盖 Session 来创建一个特殊的 Criteria 那样的技巧，它也有一个 map() 方法，你就不能做你想做的事。

只需返回一个列表并将其转换为地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:28:56.473

使用谷歌番石榴

```
ImmutableMap<Long, User> immutableMap = Maps.<Long, User>uniqueIndex(hibernateSession.createCriteria(User.class).list(),
                    new Function<User, Long>() {
                        public Long apply(User input) {
                            return input.getId();
                        }
                    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T11:40:22.117

您可以使用 HQL ，它必须 `new map` 以地图的形式返回所需的数据。如果您可以使用它，那么我很乐意分享有关如何执行此操作的更多详细信息。

# html - 动态三可变宽度列 HTML 布局

> ID：12500560
> 
> 赞同：1
> 
> 时间：2012-09-19T18:18:05.500
> 
> 标签：html, fixed

我知道有一百万篇类似的文章，我花了几个小时尝试它们都无济于事。我希望必须有三列，并允许每列占用尽可能多的空间，但整个容器不超过一个固定值（在本例中为 500 像素）。左列必须始终向左冲洗，而右柱必须始终向右冲洗。通常左列和/或右列将是空的，并且中心应该使用整个宽度。

我当然可以使用具有固定布局的表格或具有固定大小的 div 来完成此操作，但是，我希望能够动态重用相同的容器来显示一、二或三列数据，然后使用可用的整个宽度。我绝对可以允许对第 1 列和第 3 列中的内容进行固定，尽管它似乎没有帮助。

这是一个例子：

```
<div style="width:500px;background:#ff0000;max-width:500px;">
    <div style="background:#00ff00;float:left;display:table-cell;">
          col1
    </div>
    <div style="background:#ff00ff;float:left;display:table-cell;overflow:hidden;text-overflow:elipsis;white-space:nowrap;">
          REALLY LONG DO NOT EXCEED 500 - WIDTH COL 1 AND COL2 SOMEHOW WOULD BE NICE
    </div>
    <div style="background:#00ffff;display:table-cell;float:right;">
          col3
    </div>
</div> 
```

抱歉，无法显示上述输出，因为它不允许我发布图像。

# xcode - EXEC_BAD_ACCESS（代码=1，地址=0x0）

> ID：12500565
> 
> 赞同：-1
> 
> 时间：2012-09-19T18:18:23.997
> 
> 标签：xcode, macos

`EXEC_BAD_ACCESS(Code=1 , Address 0x0)`此代码在 Appledelegate.m 之后`applicationDidFinishLaunching`。在while循环中随意随机发生（如果find事件很少，也不例外）。对不起语言，感谢任何帮助我......现在来源：

```
int trackindex = 14;
MusicSequenceGetIndTrack(sequence,trackindex, &track);

// Iterate throught the select track and add user event
Boolean hasNextEvent = false;
Boolean hasEvent = false;
NewMusicEventIterator(track,&iterator);
MusicEventIteratorHasCurrentEvent(iterator, &hasEvent);
MusicEventIteratorHasNextEvent(iterator, &hasNextEvent);

// loop throught track
while (hasNextEvent==true){
    MusicTimeStamp timestamp = 0;
    MusicEventType eventType = 0;
    const void *eventData = NULL;
    int note = 0;
    MusicTimeStamp duration = 0;
    MusicEventIteratorGetEventInfo(iterator, &timestamp, &eventType, &eventData, NULL);

    if(eventType == kMusicEventType_MIDINoteMessage) {
        MIDINoteMessage *noteMessage = (MIDINoteMessage *)eventData;
        note = noteMessage->note;
        duration = noteMessage->duration;
        UserEvent event;

        event.lenght = 0;
        event.lenght = sizeof(UserEvent);
        event.playedNote = note;
        event.tStamp = timestamp;

        MusicEventUserData *data = (MusicEventUserData *)&event;
        MusicTrackNewUserEvent((MusicTrack)track, timestamp, data);

        counter++;
        printf("counter : %u\n",counter);
    }

    MusicEventIteratorHasNextEvent(iterator, &hasNextEvent);
    MusicEventIteratorNextEvent(iterator);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:25:23.217

引起我注意的第一件事是“while (hasNextEvent==true)”与“while (hasNextEvent)”不同。

第二个是，在循环结束时，您获取迭代器的“hasNextEvent”然后在检查状态之前将其推进似乎很奇怪。不确定它是错的，但它看起来是错误的。

# javascript - jquery 验证引擎不工作 - jtable

> ID：12500573
> 
> 赞同：0
> 
> 时间：2012-09-19T18:18:56.683
> 
> 标签：javascript, jquery, jquery-plugins, jquery-jtable

我正在使用 jtable (jtable.org) 并且无法让验证引擎工作。

这是我在 firbug 控制台中遇到的错误：

```
TypeError: data.form.validationEngine is not a function 
```

这是我的 jscript 代码：

```
},
//Initialize validation logic when a form is created
formCreated: function (event, data) {
     data.form.find('input[name="Name"]').addClass(
    validate[required]');
     data.form.validationEngine();
},
//Validate form when it is being submitted
formSubmitting: function (event, data) {
     return data.form.validationEngine('validate');
},
//Dispose validation logic when form is closed
formClosed: function (event, data) {
         data.form.validationEngine('hide');
        data.form.validationEngine('detach');
}
}); 
```

我也在页面顶部包含了这个：

```
<!-- Import CSS file for validation engine (in Head section of HTML) -->
<link href="scripts/validationEngine/validationEngine.jquery.css" rel="stylesheet" type="text/css" />

<!-- Import Javascript files for validation engine (in Head section of HTML) -->
<script type="text/javascript" src="scripts/validationEngine/jquery.validationEngine.js"</script>
<script type="text/javascript" src="scripts/validationEngine/jquery.validationEngine-en.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:03:32.810

我没有使用验证引擎 1，而是使用引擎 2 将其放在控制 js 上

输入类：'验证[必需]'

然后将所需的验证 js 放在 jtable 填充 js 的末尾。

希望这可以帮助

避免在页面上使用任何外部 js，这可能会导致 JQUERY.conflict() 场景

# windows - 枚举同一进程中的开放端口

> ID：12500576
> 
> 赞同：1
> 
> 时间：2012-09-19T18:19:19.047
> 
> 标签：windows, winapi, sockets, tcp, port

Windows 中有什么方法可以让进程枚举它正在使用的所有打开的端口/套接字？我试图在我的应用程序中追踪一些高端口使用情况，但我的应用程序使用很少，所以它必须是其他一些 DLL 被加载到进程中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:53:54.683

Windows 自己的命令行`netstat`实用程序以及 SysInternals 的[TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437)应用程序可以显示拥有每个打开端口的进程的名称。

如果您想以编程方式枚举此信息，则必须手动枚举 Windows 的端口路由表并将它们映射到您的进程。在 XP 上，您可以使用[`AllocateAndGetTcpExTableFromStack()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365804.aspx)和[`AllocateAndGetUdpExTableFromStack()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365807.aspx)。在 Vista 及更高版本上，您可以使用[`GetExtendedTcpTable()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365928.aspx)and[`GetExtendedUdpTable()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365930.aspx)代替。两组函数都可以返回每个打开的 IP/端口的进程 ID，然后您可以将其与[`GetCurrentProcessId()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683180.aspx).

# ruby-on-rails - 如何以rails形式动态控制text_field属性

> ID：12500579
> 
> 赞同：1
> 
> 时间：2012-09-19T18:19:35.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想将 rails form text_field 属性设置为仅在模型已经包含值时才读取。

这是我的代码

```
<%= f.text_field :domain, class="span4", readonly: "true" %> 
```

我想避免做一些冗长的事情，比如：

```
<%if @model.domain.empty? %>
   <%= f.text_field :domain, class="span4"%>
<%else%>
   <%= f.text_field :domain, class="span4", readonly: "true" %>
<%end%> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:46:41.283

```
<%= f.text_field :domain, class="span4", :disabled => !@model.domain.blank? %> 
```

# java - 管理具有外部资源依赖关系的多个 Java 模块

> ID：12500583
> 
> 赞同：2
> 
> 时间：2012-09-19T18:19:47.627
> 
> 标签：java, maven, integration

假设我有一组 n 个 Java 库，每个库都有一个 conf 和一个资源文件夹，然后我有一个 Java 项目 X，它依赖于其中一些 n 个 Java 库，我该如何制作它，以便在构建 X 时，所有依赖conf 和 resources 文件夹被复制并合并到 dist 文件夹中。不——我不希望它们被嵌入罐子里。

显然，重复文件名会有问题，但我们假设所有文件都有不同的名称。

编辑：另一个相关的问题：如何让项目 X 在所有依赖项目的开发阶段检测到配置和资源，而无需将它们复制到项目 X 的​​文件夹中。例如，当我在 X 的主方法上单击“运行”时，我希望 Netbeans 能够找到引用的库使用的这些资源。

Edit2：这是一个项目设置的假设示例：

```
**Library 1:** Image Processing

conf: Processing configurations, log4j
resources: Training sets, etc.

**Library 2:** Machine Learning

conf: Training parameters, log4j
resources: Dependent C++ batch files (i.e. system calls)

**Library 3:** Reporting Tool

resources: Reporting templates

**Library 4:** Text Mining Toolkit

conf: Encoding, character sets, heuristics
resources: Helper PHP scripts

**Executable Project 1: **

Uses Library 1 to process images 
Uses Library 2 to do machine learning on processed images
Uses Library 3 to make reports

**Executable Project 2: **

Uses Library 4 to do text mining
Uses Library 2 to do machine learning on collected textual information
Uses Library 3 to make reports 
```

我们可以假设可执行项目 1 和 2 可以在部署后为其组成库使用不同的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:32:42.620

看看[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-artifacts.html)可以复制 deps 并将它们复制到特定位置。

```
<project>
  [...]
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.5.1</version>
        <executions>
          <execution>
            <id>copy</id>
            <phase>package</phase>
            <goals>
              <goal>copy</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
                  <groupId>junit</groupId>
                  <artifactId>junit</artifactId>
                  <version>3.8.1</version>
                  <type>jar</type>
                  <overWrite>false</overWrite>
                  <outputDirectory>${project.build.directory}/alternateLocation</outputDirectory>
                  <destFileName>optional-new-name.jar</destFileName>
                </artifactItem>
              </artifactItems>
              <outputDirectory>${project.build.directory}/wars</outputDirectory>
              <overWriteReleases>false</overWriteReleases>
              <overWriteSnapshots>true</overWriteSnapshots>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  [...]
</project> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:20:13.193

我在您的示例中看到以下内容。让我以图书馆 1 为例。

**库 1：**图像处理

conf：处理配置，log4j资源：训练集等。

您有库 1，其中包含处理配置，这在我看来就像运行时配置。这意味着它应该是创建的 jar 的一部分（src/main/resources 这些东西的位置）。log4j 配置也是如此。只需将其放入 jar 中（项目的 src/main/resources.

现在进入资源：训练集。如果您创建了一个包含训练集的单独 maven 项目，那么这将生成一个工件，稍后可以将其集成到示例 1 中。如果您有多个训练集，您可以创建不同的工件并将它们用作通常的依赖项或使用 maven-dependency-plugin（或者可能是 maven-remote-resources-plugin）在您的项目中使用它们。

通过此设置，您可以将 Library 1 部署到本地存储库中，当然也可以部署到存储库管理器中，并将其用作依赖项。

您可以使用相同的方法来处理库 2、3 等。

也许你可以看看[maven-remote-resource-plugin](http://maven.apache.org/plugins/maven-remote-resources-plugin/examples/sharing-resources.html)（我不确定这是否有帮助）。

# mysql - 您是否应该始终在 SELECT * 之前执行 COUNT(*) 以确定是否有任何行？

> ID：12500588
> 
> 赞同：1
> 
> 时间：2012-09-19T18:19:54.700
> 
> 标签：mysql, performance, select, count, row

在 MySQL 中，通常最好`COUNT(*)`先确定是否应该执行 SELECT * 来实际获取行，还是`SELECT *`直接执行然后检查它是否返回任何行更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:22:07.147

这取决于您是否需要该号码，但特别是在`mysql`有一个`calc_found_rows`IIRC 时。查找文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:22:28.003

总是`SELECT [field1, field2 | *] FROM.... The SELECT COUNT(*)`只会使您的代码膨胀，增加额外的传输和数据开销，并且通常无法维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:26:43.570

除非您锁定有问题的表，否则执行 a`select count(*)`是没有用的。考虑：

过程1：

```
SELECT COUNT(*) FROM T; 
```

过程2：

```
INSERT INTO T 
```

过程1：

```
...now doing something based on the obsolete count retrieved before... 
```

当然，在服务器环境中锁定表并不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T18:23:29.260

形式为2个查询，后者为1个查询。每个查询都需要与数据库服务器对话。算一算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T18:25:49.747

答案与许多此类问题一样-“视情况而定”。当您在表上没有索引时，您不应该执行这两个查询。一般而言，仅执行 COUNT 会浪费 IO 时间，因此如果此操作可以帮助您在大多数情况下节省花费在 IO 上的时间，那么它可能是一个选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T18:28:32.003

在某些情况下，某些数据库驱动程序实现可能不会为返回记录本身的 select 语句返回实际选择的行数。当您需要在选择实际数据之前知道结果记录集的精确大小时，预先发出的“count(*)”很有用。

# visual-studio - 是否有适用于 Visual Studio 的所有命令的平面列表？

> ID：12500591
> 
> 赞同：8
> 
> 时间：2012-09-19T18:20:02.403
> 
> 标签：visual-studio, visual-studio-2012, toolbar

我很好奇是否有Visual Studio的**所有命令的平面列表？**

拥有...对微软的工具团队来说，“添加命令”窗口的搜索/过滤框会很不错。

*具体来说，我想添加一个工具栏图标以将 VS2012 中的起始页重新显示到标准工具栏。当我进入“添加命令”窗口时，它们都被分类了，并且很好奇是否有一个可以轻松搜索的平面列表（此处或网站上）。我查看了类似的问题，但没有找到与该问题或该问题的有用答案的重要匹配。在线搜索也产生了几乎无用的结果。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-23T13:04:36.487

按照didito提供的答案，纯文本[VS命令的完整列表。](https://github.com/aburok/mysettings/blob/master/VisualStudio/vscommands.txt)

有很多，超过 4500 :)

我正在“尝试”使用 VsVim，并将一些命令映射到键组合。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T19:12:51.723

如果您使用的是 VS 2012，您可以使用新的快速启动工具，它允许您非常轻松地搜索任何菜单项、选项/首选项、命令等。您可以在此处阅读更多相关信息：[快速启动博客文章](http://blogs.msdn.com/b/zainnab/archive/2012/06/26/visual-studio-2012-new-features-quick-launch.aspx) 下面的屏幕截图是您搜索 Intellitrace 时的结果：

![快速启动](../Images/f0acce7f729c17590fdacf5fff201ec0.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T18:24:54.893

如果您转到“工具/选项/环境/键盘”，您将在 Visual Studio 中看到一个包含大量命令的列表框，以及一个标题为“显示包含的命令：”的文本框，允许您过滤可用命令列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-23T12:13:47.827

Resharper 有一个叫做“Resharper - 内部 - 转储所有 VS 命令”的东西。我通过快速启动工具发现了这一点。将所有命令转储到文本文件中，显然没有帮助或描述，但平淡无奇。（VS Pro 2012，JetBrains ReSharper 8.2）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T19:08:19.117

Scott Gu 发布了一个有用的列表，列出了 VS2010 中可用的所有键盘命令。这适用于所有 dotnet 语言。

[http://weblogs.asp.net/scottgu/archive/2010/07/29/visual-studio-2010-keyboard-shortcuts.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/29/visual-studio-2010-keyboard-shortcuts.aspx)

希望这可以帮助。

# jquery - 带有标题冻结但不使用任何其他 jquery 插件的可滚动表行？

> ID：12500592
> 
> 赞同：0
> 
> 时间：2012-09-19T18:20:11.667
> 
> 标签：jquery, scrollable

如何在不使用任何其他 jQuery 插件的情况下创建一个带有冻结标题的简单可滚动表格行？

我找到了一些使用 jQuery 插件的解决方案，如 fixedheadertable、chromatable 等，但我只想使用 jQuery 中的“纯”库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-30T13:30:41.047

## ColdFusion 模板在顶部显示/隐藏并调整大小修复

这是您可以使用的版本`cfinclude`- 仅`<cfset dataTblId="">`是必需的，但其他一些属性可用。将 HTML 保存在 header `<th>`s 中。

```
<CFIF isDefined("variables.dataTblId") and !findNoCase("Mozilla/4.0", cgi.http_user_agent) and !findNoCase("compatible", cgi.http_user_agent)>
<cfparam name="variables.hdrTblHtmlAttr" default=""><!--- for old HTML attributes of the data table (e.g., cellspacing, cellpadding, align, etc.) --->
<cfif len(variables.hdrTblHtmlAttr)><!--- inserted table is defined inside single quotes, must have doublequote attribute values --->
    <cfset variables.hdrTblHtmlAttr=replace(variables.hdrTblHtmlAttr, "'", '"', "all")>
</cfif>
<cfparam name="variables.hdrTrClass" default="">
<cfparam name="variables.hdrTrStyle" default="">
<cfparam name="variables.hdrTdClass" default="">
<cfparam name="variables.hdrTdStyle" default="">
<cfparam name="variables.dirOfJq" default="/js/"><!--- should be relative, but /js should be in place --->
<cfparam name="variables.jQFile" default="jquery-3.2.1.min.js"><!--- in case new version is implemented (expect this code should still work but?....) --->
<cfoutput>
<script type="text/javascript" src="#variables.dirOfJq##variables.jQFile#"></script>
<script type="text/javascript">
var distance = 0, $window = $(window);
function resizeHdr(){
    $("##tblHoldHdr").css("width", $("###variables.dataTblId#").css("width"));
    var oTr=$("##trHoldHdr").html("");//short var for frozen header row, cleared out
    $("###variables.dataTblId# tr:first").find("th").each(function(i){//loop through header to mimic
        oTr.append('<th style="width:'+$(this).css("width")+' !important">'+$(this).html()+'</th>');//copy content with forced width
    });
}
$(function(){
    $("body").prepend(<!--- stuff frozen header table html into the page just inside/at top of <body> --->
    '<table class="'+$("###variables.dataTblId#").attr("class")+'" style="display:none;position:fixed;background-color:white;'+$("###variables.dataTblId#").attr("style")+'" id="tblHoldHdr" #variables.hdrTblHtmlAttr#>'+
        '<tr id="trHoldHdr" class="#variables.hdrTrClass#" style="#variables.hdrTrStyle#"></tr></table>'
    )
    distance=$('###variables.dataTblId#').offset().top;
    $("##tblHoldHdr").css({"margin-left":$("body").css("margin"),"margin-top":-parseInt($("body").css("margin"))+"px"});//position frozen hder
    resizeHdr();//populate for scroll w/o resize
});
</cfoutput>
$(window).scroll(function(){
    $("#tblHoldHdr").css("left", -$(this).scrollLeft());//frozen hdr pos fixed doesn't move w/ scrolling so this keeps it lined up (w/o "-" header slides twice as fast out to the right) 
    if($window.scrollTop() >= distance){
        $("#tblHoldHdr").css("display","");// Hdr has reached the top
    }else{
        $("#tblHoldHdr").css("display","none");// Hdr below top
    }
});
$(window).resize(function(){
    resizeHdr();
});
</script>
</CFIF> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-28T03:24:52.723

## 在屏幕顶部显示/隐藏标题行 - 仅限 jQ

基本上隐藏一个空的 table/tr 外壳，在身体的顶部有固定的位置。创建一个函数来循环遍历数据表的第一行并捕获宽度和内部HTML。在页面加载时调用该函数，使其准备就绪。捕获从屏幕顶部到数据表顶部的距离。当页面滚动超过该点时，切换显示/隐藏表格。还可以在调整窗口大小以重新填充固定表/tr shell 时捕获....

```
<script type="text/javascript">
var distance = 0, $window = $(window);
function resizeHdr(){
    $("#tblHoldHdr").css("width", $("#tblData").css("width"));
    var oTr=$("#trHoldHdr").html("");//short var for frozen header row
    $("#tblData tr:first").find("th").each(function(i){//loop through header to mimic
        oTr.append('<th style="width:'+$(this).css("width")+' !important">'+$(this).html()+'</th>');//copy content with forced width
    });
}
$(function(){
    distance=$('#tblData').offset().top;
    $("#tblHoldHdr").css({"margin-left":$("body").css("margin"),"margin-top":-parseInt($("body").css("margin"))+"px"});//position frozen hder
    resizeHdr();
});
$(window).scroll(function(){
    $("#tblHoldHdr").css("left", -$(this).scrollLeft());//frozen hdr pos fixed doesn't move w/ scrolling so this keeps it lined up (w/o "-" header slides twice as fast out to the right)
    if($window.scrollTop() >= distance){
        $("#tblHoldHdr").css("display","");// Hdr has reached the top
    }else{
        $("#tblHoldHdr").css("display","none");// Hdr below top
    }
});
$(window).resize(function(){
    resizeHdr();
});
</script>
<!-- At the top goes this is the frozen header table - populated by jQ on doc.ready() -->

<table style="display:none;position:fixed;" id="tblHoldHdr">
    <tr id="trHoldHdr"></tr>
</table>
…other html code…
<!-- This is the data output table wherever you need it on the page -->
<table id="tblData"><thead>
    <tr><th> Col 1</th><th>Col 2</th></tr>
    <tr><td> Data 1/1</td><td>Data 1/2</td></tr>
    <tr><td> Data 2/1</td><td>Data 2/2</td></tr>
</table> 
```

我从不同的人那里借来了关于如何捕捉滚动和窗口大小调整的信息。我最初只填充了一次固定表/tr，然后只应用大小，但 Chrome 工作，然后它没有。其他人可能有魔法 juju 让这种更简单的方法起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-28T04:42:39.490

这里是滚动同步的演示

[https://jsfiddle.net/RaviMakwana/28fgaut5/](https://jsfiddle.net/RaviMakwana/28fgaut5/)

```
var div1 = document.getElementById("scrollDiv1");
var div2 = document.getElementById("scrollDiv2");
div2.addEventListener("scroll", function(){  
   div1.scrollLeft = this.scrollLeft;
})
```

```
<div id="scrollDiv1" style="height: 100px;overflow:hidden;">
   <div style="width:1000px;">
    Test 1 321321 131 313 1321 33 13
   </div>
</div>

<div id="scrollDiv2" style="height: 100px;overflow:scroll;">
   <div style="width:1000px;">
    Test 2 23232
   </div>
</div>
```

# css - 翻转后缓出脱节图像

> ID：12500593
> 
> 赞同：0
> 
> 时间：2012-09-19T18:20:12.543
> 
> 标签：css, fade, rollover

我有一个脱节的翻转，我想添加一个定时缓出（仅限）效果。 [我制作了一个页面，仅隔离了该特定问题，请参见此处：](http://raphaelzwyer.com/testRapha/overviewtest.html)

当悬停在“概览”上时，概览图像会显示在定义的区域中，并且在展开时图像会消失。一切都很好，但我现在希望图像在半秒后淡出，即使指针仍然悬停在“概述”上（不仅仅是指针熄灭时）。换句话说，每次访问者将鼠标悬停在“概览”上时，图像都会出现半秒钟然后淡出。我是新手。只有 CSS 会很棒。我尝试了 webkit 缓出/缓入，但不能真正让它显示，然后只能缓出。

编码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>raphaelzwyer</title>
<link href="css/raphaelzwyer.css" type="text/css" media="screen" title="raphaelzwyer stylesheet" rel="stylesheet" charset="utf-8"/>
<script type="text/javascript" src="js/raphaelzwyerFive.js"></script>
</head>

<body>

 <div id="header"> 
                    <ul id="overviewlayer">
                       <li>
                            <a href="portfolio.html">
                                <div id="overviewtext">overview</div>
                                <div class="overview"><img src="images/overview.png" width="660" height="1284" alt="overviewlayer"/></div>
                             </a>
                        </li>
                        <li id="wordmark"></li>
                    </ul>  <!-- end of overviewlayer -->
    </div>  <!-- end of header --> 

</body>
</html> 
```

相关的CSS：

```
#header {
        position: relative;
        top: 36px;
        left: 212px;
        width: 660px;
        height: 48px;}
#overviewlayer a .overview  {
        display:none;}
#overviewlayer a:hover .overview  {
        display: block;
        position: absolute;
        top: 116px;
        left: 0px;
        height: 852px;
        width: 660px;
        padding: 0px;
        margin: 0px;
        color: #000;
        font-size: 11px;
        background-color: #FFF;
        z-index: +20;}
.overview {
        position: relative;
        top: 12px;
        left: 0px;
        height: 852px;
        width: 660px;
        z-index: +10;}
#overviewtext {
        position: absolute;
        top: 0px;
        width: 100px;
        height: 48px;
        padding-top: 4px;
        border-top-style: solid;
        border-top-width: 1px;
        z-index: +600;}
a {
        text-decoration: none;
        color: #a9a9a9;}
a:hover, a:focus {
        text-decoration: none;
        color: #be1f2d;}
li {
        list-style-type: none;
        display: inline;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:33:29.123

也许您可以为此使用 CSS3 动画...

将这行代码添加到`{ #overviewlayer a:hover .overview }`

```
-webkit-animation: fade 1.0s ease-out forwards; 
```

然后将关键帧添加到您的 CSS。

```
@-webkit-keyframes fade

{
     0% {opacity: 1;}
    50% {opacity: 1;}
   100% {opacity: 0;}
} 
```

在这种情况下，当您将鼠标悬停在“概览”上时，图像会立即显示，然后图像会淡出。

因为我只为这个例子添加了 -webkit-，所以不要忘记为 Firefox、IE 和 Opera 添加前缀，并记住这仅适用于现代浏览器。

希望有帮助！

# php - php中的数组，可以在单击锚标记时显示一行

> ID：12500598
> 
> 赞同：0
> 
> 时间：2012-09-19T18:20:46.923
> 
> 标签：php, javascript, mysql

我已经问过这个[问题](https://stackoverflow.com/questions/12465545/php-database-display-in-same-fields-with-different-anchor-tags)，但我的朋友说要采取不同的方法。当点击一个新链接时，他不是不断地 ping 数据库，而是说将 php 数组缩小到有问题的楼层并将其转换为 javascript 对象，这样数据就在那里，而不必一直从数据库。

这就是我想要做的 - 我在座位上有一个楼层地图和一个锚标签，当它被点击时，我希望数据库中的信息出现在地图上方的另一个 div 中。

现在我有一个特定楼层的 php 数组，但从我读过的内容来看，我需要将它转换为 json。现在我将如何选择被点击的座位的数据，从 json 数组中获取数据并将其显示在地图上方的 div 中。我还希望在选择其他座位并填充新信息时让数据消失。

我想以座位#为目标->从那里获取javascript中的信息->在地图上方的div中显示。

这就是我所拥有的：

```
 <div id="information" style="display:none">
 </div>

 <div id="c324" class="seat seat-department">
<(a) class="trigger" onClick="document.getElementById('info').style.display='block';"></(a)></div>[2]
</div> 
```

如果有人能指出我正确的方向，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:31:10.410

您希望有一个脚本标签，其中包含您的 php 数组中某处的数据，

```
<script>
    var myInfoStuf = {'c234': 'This is info on the seat'}; // an object of info strings
</script> 
```

所以，然后在您的 onclick 中，我建议将其分解为一个函数，

```
function displayInfoForDiv(id) {
    document.getElementById('info').innerHTML = myInfoStuf[id];
    document.getElementById('info').style.display='block';
    return false;
} 
```

然后您可以从您的座位调用该 onclick 处理程序，例如：

```
<div id="c324" class="seat seat-department">
    <class="trigger" onclick="displayInfoForDiv('c234')"></a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:23:58.267

好的，所以我终于得到了我需要工作的东西！！！！

这就是我所做的。

JS

```
var jsonData = <?php echo json_encode($array); ?>;

function displayInfoForDiv(i){
    document.getElementById('fname').innerHTML = jsonData[i].first_name;
    document.getElementById('lname').innerHTML = jsonData[i].last_name;
    document.getElementById('ext').innerHTML = jsonData[i].extension;
    document.getElementById('lvl').innerHTML = jsonData[i].level;
    document.getElementById('seat').innerHTML = jsonData[i].seat;
    document.getElementById('depart').innerHTML = jsonData[i].department;
    document.getElementById('email').innerHTML = jsonData[i].email;

} 
```

html

```
 <div id="c234" class="seat">
    <a class="trigger" onClick="displayInfoForDiv(22)"></a>
</div> 
```

希望这对某人有所帮助，他们不必花费数天时间来尝试使其正常工作。再次感谢所有帮助

# worksheet-function - 表二中的 B 列等于表一中的 B 列，如果 A 列是表二，则等于表一中 A 列中的任何值

> ID：12500600
> 
> 赞同：0
> 
> 时间：2012-09-19T18:20:57.753
> 
> 标签：worksheet-function

我有两张excel表格。它们的格式相同。如果工作表 B 中的 A 列与工作表 A 中的 A 列中的任何值匹配，请您告诉我计算 B 列值的公式吗？

**表 A**

```
A列 B列
客户 A $1.25   
客户 B $1.00  
客户 C $0.75
```

**表 B**

```
A列 B列
客户 E ?  
客户 B ?
客户 A ?
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:31:17.233

`VLOOKUP`是你需要看的。

在工作表 B 上的单元格 B1 中，该公式`=VLOOKUP(A1,SheetA!A1:B3,2,FALSE)`将为您提供数据。

该函数的四个参数是：

1.  您要查找的数据
2.  在哪里查找第 1 部分中提到的项目
3.  从数据中返回哪一列
4.  如果需要完全匹配（不需要排序），或者关闭值（需要排序）
    *`False`= 完全匹配*

# c# - 将关系映射到实体框架中的抽象集合

> ID：12500604
> 
> 赞同：1
> 
> 时间：2012-09-19T18:21:26.410
> 
> 标签：c#, entity-framework, orm, ef-code-first

我有两个类，每个类都实现一个接口。其中一个类包含另一个接口的 ICollection。

现在我想使用 EF 将它映射到我的数据库，但得到一个异常（如下）。这应该以某种方式实现吗？

我的类（产品和类别）的实体定义：

```
public interface IProduct
{
    string ProductId { get; set; }
    string CategoryId { get; set; }
}

public interface ICategory
{
    string CategoryId { get; set; }
    ICollection<IProduct> Products  { get; set; };
}

public class ProductImpl : IProduct
{
    public string ProductId { get; set; }
    public string CategoryId { get; set; }
}

public class CategoryImpl : ICategory
{
    public string CategoryId { get; set; }
    public ICollection<IProduct> Products { get; set; }
} 
```

我想映射 CategoryImpl 和 ProductImpl 之间的关系，所以我`OnModelCreating`在我的 DbContext 中使用以下方法：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    var a = modelBuilder.Entity<CategoryImpl>();
    a.ToTable("Categories");
    a.HasKey(k => k.CategoryId);
    a.Property(p => p.CategoryId);
    a.HasMany(p => p.Products).WithOptional().HasForeignKey(p => p.CategoryId);

    var b = modelBuilder.Entity<ProductImpl>();
    b.ToTable("Products");
    b.HasKey(k => k.ProductId);
    b.Property(p => p.ProductId);
} 
```

我得到的例外如下。我是否应该以某种方式指定要用于的具体类型`IProduct`是`ProductImpl`？

```
 System.InvalidOperationException: The navigation property 'Products' 
is not a declared property on type 'CategoryImpl'. Verify that it has 
not been explicitly excluded from the model and that it is a valid navigation property. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:36:05.200

使用 EF 中的接口无法做到这一点。必须为要映射的属性映射导航属性的类型。对于要映射的类型，它需要是一个具体的类型。

如果您需要不同类型的产品和类别，则可以为它们使用基类：

```
public class ProductBase
{
    public string ProductId { get; set; }
    public string CategoryId { get; set; }
}

public class CategoryBase
{
    public string CategoryId { get; set; }
    public virtual ICollection<ProductBase> Products { get; set; }
}

public class DerivedProduct : ProductBase
{
}

public class DerivedCategory : CategoryBase
{
} 
```

# ruby-on-rails - Rails：创建一个静态字符串类

> ID：12500606
> 
> 赞同：0
> 
> 时间：2012-09-19T18:21:52.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, class, static, global-variables

我是 Rails 的新手，我正在尝试理解一个基本概念。

我想创建一个仅包含字符串静态变量的类，我可以在需要时从控制器调用它们。我想通过在**app目录下创建一个****字符串**文件夹来实现这一点。后来我创建了一个名为**String的类**

 ****```
class Strings
@testString="this is my test string"
end 
```

后来，当我尝试从控制器的**索引**中调用它时失败了（但我认为函数或控制器并不重要。为什么我无法访问它？我是否必须一直应用**def self.testString**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:40:49.023

我会将它们创建为方法或常量：

```
class Strings

  TESTCONST = "this is my test string"

  def self.test_string
   "this is my test string"
  end

end 
```

使用它们：Strings.test_strings 或 Strings::TESTCONST

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:42:14.997

假设您在 app/models 下有一个字符串文件夹。app/models 下的类之一是 ErrorMessages。

一种方法是使用常量。这就是在 ruby​​ 中设计常量的目的。所以文件 app/models/strings/error_messages.rb 将是：

```
class Strings::ErrorMessages
  TEST_STRING = "this is my test string"
end 
```

或者，您可以有一个[cattr_reader](http://api.rubyonrails.org/classes/Class.html#method-i-cattr_reader)，其中 app/models/strings/error_messages.rb 将是：

```
class Strings::ErrorMessages
  cattr_reader :test_string

  @test_string = "this is my test string"
end 
```

或者你可以让一个方法返回只读字符串。

```
class Strings::ErrorMessages
  def self.test_string
    "this is my test string"
  end
end 
```****

# javascript - 在 HTML5 Spec 中，似乎支持嵌套的 script 标签，那么一个真实的例子是什么样的呢？

> ID：12500613
> 
> 赞同：5
> 
> 时间：2012-09-19T18:22:21.620
> 
> 标签：javascript, html, html-parsing

在 HTML5 [Specification](http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#parsing-main-inhead)中，我读到了“如果脚本嵌套级别不为零：...否则，...”。似乎支持嵌套的脚本标签。

但是，使用嵌套脚本标签的真实示例是什么？像下面那个？

```
<script>  
document.write("<script> alert('I\'m in your head!')</script>");  
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:51:12.857

当用于包含动态脚本时，脚本可以嵌入内联，也可以使用 src 属性从外部文件导入

[http://www.quackit.com/html_5/tags/html_script_tag.cfm](http://www.quackit.com/html_5/tags/html_script_tag.cfm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T18:09:59.540

嵌套的脚本标签没有意​​义，因为脚本标签的内容必须是“文本”：

[http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#the-script-element](http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#the-script-element)

给出的示例是完全合法的，因为“嵌套”脚本标记只是一个文本字符串，将在脚本本身执行时进行解释。

像这样修改文档并替换它的内容应该只是替换它的当前内容，尽管我没有尝试过。

我在这里没有看到任何争议。

# python - Django：如何将用户提交的文件直接上传到另一台服务器？

> ID：12500623
> 
> 赞同：2
> 
> 时间：2012-09-19T18:22:58.327
> 
> 标签：python, django, file-upload, django-file-upload

*   我正在使用 Django 1.4。
*   有两个服务器（应用程序服务器和文件服务器）。
*   应用服务器使用 django、wsgi 和 apache 提供 Web 服务。
*   用户可以通过网络服务上传文件。
*   **我想直接将这些文件上传到文件服务器。**
*   “直接”表示文件不通过应用服务器上传。
*   我想让文件服务器尽可能简单。文件服务器只提供文件。
*   理想情况下，应用服务器和文件服务器之间的传输成本为零。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:28:40.153

您实际上不能同时执行这两项操作：

*   我想直接将这些文件上传到文件服务器。
*   我想让文件服务器尽可能简单。文件服务器只提供文件。

根据您的要求，文件服务器需要同时提供文件服务和接受文件上传。

有几种方法可以将文件放到 FileServer 上

*   最简单的方法就是上传到 AppServer，然后再上传到另一台服务器。这就是大多数 AmazonS3 实现的样子。
*   如果两台机器在同一个 LAN 上，您可以使用 NFS 或类似的东西将 FileServer 的一个卷安装到 AppServer 上。用户上传到 AppServer，但数据被保存到一个真正在 FileServer 上的分区。
*   您可以在 FileServer 上运行文件上传脚本。但是，您需要做一些复杂的事情：
    *   有一种机制来验证上传文件的能力。你不能只使用 authtkt，你需要有一些东西可以允许一个且只有一个文件上传以及某种标识符和特权令牌。我可能会选择一个带有时间戳的加密有效负载，并具有上传权限凭证+文件的 ID。
    *   从 FileServer 成功上传到 AppServer 时有一个回调，让它知道有效负载中的 id 已成功接收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:55:34.327

我认为您需要的是django 1.4 的[静态 url 设置](https://docs.djangoproject.com/en/1.4/howto/static-files/)，以便从应用服务器提供文件服务器文件。要将文件上传到文件服务器，您可以编写托管在此服务器上的 python 或 php 脚本（假设 apache2 服务器或类似服务器）来完成工作。

我你有这个想法，我认为你不需要跟踪上传的文件（考虑到使用这个解决方案你不能）

# python - 用于 Scrapy 的 XPATH

> ID：12500624
> 
> 赞同：0
> 
> 时间：2012-09-19T18:23:01.903
> 
> 标签：python, xpath, scrapy

所以我正在使用 SCRAPY 刮掉网站的书籍。

我有爬虫工作，它爬得很好，但是当谈到使用 XPATH 中的选择来清理 HTML 时，它有点不正常。现在因为它是一个图书网站，我每页有近 131 本书，他们的 XPATH 变成了这样

例如获取书籍的标题 -

```
1st Book --- > /html/body/div/div[3]/div/div/div[2]/div/ul/li/a/span
2nd Book --->  /html/body/div/div[3]/div/div/div[2]/div/ul/li[2]/a/span 
3rd book --->  /html/body/div/div[3]/div/div/div[2]/div/ul/li[3]/a/span 
```

DIV[] 数字随着书的增加而增加。我不知道如何让它进入一个循环，以便它捕获所有标题。我也必须为图像和作者姓名执行此操作，但我认为它会相似。只需要完成这个初始任务。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-14T11:06:44.387

有不同的方法可以得到这个

1.  最好选择多个节点，根据 ids 或 class 进行选择。例如：

    ```
    sel.xpath("//div[@id='id']") 
    ```

2.  你可以这样选择

    ```
    for i in range(0, upto_num_of_divs):
        list = sel.xpath("//div[%s]" %i) 
    ```

3.  你可以这样选择

    ```
    for i in range(0, upto_num_of_divs):
        list = sel.xpath("//div[position > =1 and position() < upto_num_of_divs]) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:18:31.973

这是一个如何解析示例 html 的示例：

```
lis = hxs.select('//div/div[3]/div/div/div[2]/div/ul/li')
for li in lis:
    book_el = li.select('a/span/text()') 
```

通常你可以做一些事情，比如`//div[@class="final-price"]//span`在一个 xpath 中获取所有 span 的列表。确切的表达方式取决于你的 html，这只是为了给你一个想法。

否则上面的代码应该可以解决问题。

# .net - 实体框架迁移错误 - 序列不包含任何元素

> ID：12500625
> 
> 赞同：32
> 
> 时间：2012-09-19T18:23:12.310
> 
> 标签：.net, entity-framework, ef-code-first, ado.net-entity-data-model, edmx

**命令：** add-migration blahblah -verbose
**错误：**序列不包含任何元素

在收到此错误之前，我做了一些事情。我对代码优先模型进行了更改，但尚未运行`add-migration`。然后我添加了一个 EDMX 模型来直观地玩弄一个想法。我意识到 EDMX 模型弄乱了我的代码，所以我删除了它。我试图运行`add-migration`并得到“序列不包含任何元素”。我升级到 EF 5 并卸载了旧的迁移包，但我的配置除外。然后我又试`add-migration`了一次，我仍然得到“序列不包含元素”。以下是错误的其余部分。

```
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
   at System.Data.Entity.Migrations.Infrastructure.EdmModelDiffer.GetQualifiedTableName(XDocument model, String entitySetName)
   at System.Data.Entity.Migrations.Infrastructure.EdmModelDiffer.<FindRenamedIndependentAssociationColumns>b__ba(<>f__AnonymousType16`2 <>h__TransparentIdentifieraa)
   at System.Linq.Enumerable.<>c__DisplayClass12`3.<CombineSelectors>b__11(TSource x)
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.<ConcatIterator>d__71`1.MoveNext()
   at System.Linq.Enumerable.<ConcatIterator>d__71`1.MoveNext()
   at System.Linq.Enumerable.<DistinctIterator>d__81`1.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at System.Data.Entity.Migrations.Infrastructure.EdmModelDiffer.Diff(XDocument sourceModel, XDocument targetModel, String connectionString)
   at System.Data.Entity.Migrations.DbMigrator.Scaffold(String migrationName, String namespace, Boolean ignoreChanges)
   at System.Data.Entity.Migrations.Design.MigrationScaffolder.Scaffold(String migrationName, Boolean ignoreChanges)
   at System.Data.Entity.Migrations.Design.ToolingFacade.ScaffoldRunner.Scaffold(MigrationScaffolder scaffolder)
   at System.Data.Entity.Migrations.Design.ToolingFacade.ScaffoldRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Sequence contains no elements 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-03-14T16:33:34.823

当尝试使用`DataAnnotations`.

坏的：

```
[Column(TypeName="VARCHAR(254)")]
public string ColumnName { get; set; } 
```

好的：

```
[MaxLength(254)]
[Column(TypeName="VARCHAR")]
public string ColumnName { get; set; } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-21T13:58:44.063

对我来说导致问题的原因是**更改名称**以及**更改**与实体关联的关系。

所以我的解决方案是：

*   改回原来的名字
*   添加迁移（然后能够做到）
*   更新数据库
*   更改实体名称并生成新迁移

但是，此问题可能有许多其他原因 - 例如，在应用迁移后删除迁移。不幸的是，在他们中，这个错误都没有意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T05:14:58.610

看起来像一个错误。您介意在[http://entityframework.codeplex.com/workitem/list/advanced](http://entityframework.codeplex.com/workitem/list/advanced)上提交它，并附上允许重现问题的详细信息吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-14T11:42:47.867

像这样使用 Fluent API 时出现此错误`OnModelCreating`：

```
modelBuilder.Entity<ApplicationUser>()
    .Property(b => b.Id)
    .HasColumnType("nvarchar(128)"); 
```

改为这个，然后一切正常：

```
modelBuilder.Entity<ApplicationUser>()
    .Property(b => b.Id)
    .HasColumnType("nvarchar")
    .HasMaxLength(128); 
```

请注意，使用`nvarchar(MAX)`和类似不是问题，**不会**导致此错误。

```
modelBuilder.Entity<ApplicationUser>()
    .Property(b => b.PasswordHash)
    .HasColumnType("nvarchar(MAX)"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-04T16:15:53.460

我也遇到了这个问题，因为我试图运行一个缺少公共访问修饰符的类的迁移。

一旦我添加了这个 - 错误就解决了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-14T09:17:34.463

我遇到了同样的问题，我发现了这个问题：[Migrations: "Sequence contains no elements" in model different after renamed PK property when self-reference relationship with no FK property (independent association)](http://entityframework.codeplex.com/workitem/569)这是我坚持的情况. 这是一个**错误**，但有一个用户建议的解决方法，我认为这是一个很好的解决方案：

“我的表是自引用的，删除外键列，然后添加迁移解决了问题并允许重命名属性

修复步骤，如果有帮助：

1.  删除（注释）自引用外键并搭建迁移、更新数据库
2.  重命名问题列，Scaffold 另一个迁移，Update-Database
3.  取消注释自引用外键并脚手架迁移，更新数据库
4.  删除步骤 1 和 3 生成的代码（但保留迁移）

测试修复：

1.  更新数据库，在第 1 步迁移之前定位
2.  将数据库更新到最近的迁移并确保它不会失败。”

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-22T11:53:58.843

当我为一个小型网络项目做这件事时，这发生在我身上。

网络的 .csproj 有一次加载失败，Visual Studio 决定将默认项目更改为可以加载的随机项目。

因为新默认项目中的 app.config 不包含任何 connectionStrings... EF 找不到要更新的地方。

通过右键单击项目并选择设置为启动项目，将我的默认项目更改回我的 web 项目，为我解决了这个问题。

但我想这里的问题是 EF 在默认配置中寻找第一个连接字符串，可用的字符串数量为 0。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-21T15:29:28.230

当两个实体之间存在继承并且我想在其中一个的属性上创建索引时，我遇到了同样的问题。在版本 6.3 上[报告了此问题的错误。](https://github.com/aspnet/EntityFramework6/issues/673)

当我删除继承或索引时，迁移已成功创建。作为一种解决方法，您可以手动创建索引。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-15T06:36:17.197

就我而言，这是由于我的错误。在我的配置中，我不小心包含了一个导航属性，而不是代表该列的属性，例如：

```
HasIndex(x => new { x.ID, x.Parent }).IsUnique(); 
```

应该是

```
HasIndex(x => new { x.ID, x.ParentID }).IsUnique(); 
```

这很容易被忽视，尤其是在更复杂的场景中。

# objective-c - performBlockAndWait 创建死锁

> ID：12500627
> 
> 赞同：6
> 
> 时间：2012-09-19T18:23:23.713
> 
> 标签：objective-c, ios, core-data, deadlock, nsmanagedobjectcontext

我正在编写一个执行一些 CoreData 东西的函数。*我希望该函数仅在*所有 CoreData 操作都执行后才返回。CoreData 的东西包括在后台上下文中创建一个对象，然后在父上下文中做更多的事情：

```
+ (void) myFunction
    NSManagedObjectContext *backgroundContext = [DatabaseDelegate sharedDelegate].backgroundContext;

    [backgroundContext performBlockAndWait:^{
      MyObject *bla = create_my_object_in:backgroundContext;

      [backgroundContext obtainPermanentIDsForObjects:[[backgroundContext insertedObjects] allObjects] error:nil];
      [backgroundContext save:nil];

      [[DatabaseDelegate sharedDelegate].parent.managedObjectContext performBlockAndWait:^{
        [[DatabaseDelegate sharedDelegate].parent updateChangeCount:UIDocumentChangeDone];

        // Do some more stuff
        NSOperationQueue *queue = [[NSOperationQueue alloc] init];
        [queue addOperation:someOperation];
      }];
    }];
   return;
} 
```

我希望返回只发生在`[queue addOperation:someOperation]`. 这似乎在大多数情况下都有效，但我遇到过一个情况，该函数从未返回。似乎它陷入了僵局，我怀疑这是因为`performBlockAndWait`.

我的问题是：

（1）有人可以解释为什么会发生这种死锁吗？

和

(2) 实现相同功能的正确方法是什么？要求是`myFunction`仅在两个块都执行后才返回。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T18:37:44.537

假设您正在`myFunction`从主线程调用。让我们想象一下`[DatabaseDelegate sharedDelegate].parent.managedObjectContext`被安排在主线程上。

与`[backgroundContext performBlockAndWait:]`您一起在上下文私有后台队列上安排一个块。阻塞主线程。

使用`[.parent.managedObjectContext performBlockAndWait:]`，您正在主线程上调度一个块，阻塞私有队列。

但是主线程已经被阻塞了。所以这个块永远不会执行。并且`performBlockAndWait:`永远不会回来。

僵局。

使用带有完成块的异步调度块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:42:12.770

您不必等待。你的后台工作执行，然后，**在它完成之前**，它会在主线程上开始工作，在它完成之前，它会执行你的“someOperation”。你可以用 async 替换它，它仍然可以工作。

查看这段代码，没有理由使用阻塞版本......

```
+ (void) myFunction {
    NSManagedObjectContext *backgroundContext = [DatabaseDelegate sharedDelegate].backgroundContext;

    [backgroundContext performBlock:^{
      // Asynchronous... but every command in this block will run before this
      // block returns...
      MyObject *bla = create_my_object_in:backgroundContext;

      [backgroundContext obtainPermanentIDsForObjects:[[backgroundContext insertedObjects] allObjects] error:nil];
      [backgroundContext save:nil];

      [[DatabaseDelegate sharedDelegate].parent.managedObjectContext performBlock:^{
        // Asynchronous, but this whole block will execute...
        [[DatabaseDelegate sharedDelegate].parent updateChangeCount:UIDocumentChangeDone];

        // Do some more stuff
        // This will not run until after the stuff above in this block runs...
        NSOperationQueue *queue = [[NSOperationQueue alloc] init];
        [queue addOperation:someOperation];
      }];
      // You will reach here BEFORE the code in the previous block executes, but
      // the "someOperation" is in that block, so it will not run until that
      // block is done.
    }];
    // Likewise, you will reach here before the above work is done, but everything
    // will still happen in the right order relative to each other.
   return;
} 
```

# ruby-on-rails - 您如何使用 Gibbon Gem 自动将订阅者添加到 MailChimp 中的特定兴趣组？

> ID：12500631
> 
> 赞同：7
> 
> 时间：2012-09-19T18:23:33.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, rubygems, mailchimp

我试图弄清楚如何使用 Rails 中的 Gibbon gem 自动将订阅者添加到 MailChimp 中的特定兴趣组？

我发现这篇文章详细介绍了这样做的非 Rails 方法：[http ://roman.tao.at/uncategorized/mailchimp-api-listsubscribe-listbatchsubscribe-and-groups/](http://roman.tao.at/uncategorized/mailchimp-api-listsubscribe-listbatchsubscribe-and-groups/)

我想弄清楚如何使用 Gibbon gem 实现该功能：[https ://github.com/amro/gibbon](https://github.com/amro/gibbon)

仅供参考，我也是 MailChimp 和 Rails 的新手。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T05:05:52.707

最后，经过数小时的代码阅读。我找到了我正在寻找的例子！

感谢 TJ Moretto 在 Google Groups[线程](https://groups.google.com/forum/?fromgroups=#!topic/mailchimp-api-discuss/QRcQhtHAk6o)中提供此内容：

> 我正在使用长臂猿 gem，但遇到了相同类型的问题。这是我必须格式化参数以最终使其正常工作的方法：
> 
> ```
> gb.list_subscribe({:id => "#{list.id}",
>                    :email_address => user.email,
>                    :update_existing => true,
>                    :double_optin => false,
>                    :send_welcome => false,
>                    :merge_vars => {'FNAME' => "#{user.first_name}",
>                                    'LNAME' => "#{user.last_name}",
>                                    'GROUPINGS' => {0 => {'id' => grouping.id, 'groups' => "#{challenge.name}"}}}
>                   }) 
> ```
> 
> 希望有帮助。
> 
> Mailchimp 团队 - 根据每个人在尝试执行此操作时遇到的问题数量（跨所有编程语言），我建议您更新 API 文档以使其更加清晰。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-04T16:11:11.460

MailChimp API 2.0 版和 Gibbon 1.0 版的更新（供@Calin 和后代使用）。以下是对先前版本的必要更改。现在可以像这样访问 API 对象：

```
gb = Gibbon::API.new 
```

并列出这样的方法：

```
gb.lists.subscribe(params) 
```

最后，`:email_address`参数已被参数替换，该`:email`参数应被赋予以下形式的值：该值本身应该是带有一个键的散列，要么是要么`'email'`，`'leid'`并且值应该是订阅者的电子邮件地址或 MC 的唯一地址订户的标识符 (LEID)。

所以一个完整的订阅调用可能看起来像这样：

```
gb = Gibbon::API.new
gb.lists.subscribe(:id => "ed6d1dfef4",
                   :email => 
                     { "email" => "example@domain.com" },
                   :merge_vars =>
                     {:groupings =>
                       {
                         0 => { :id => "95", :groups => ["Some Group", "Another Group"]},
                         1 => { :id => "34", :groups => ["A Third Group"]}
                       }
                     },
                    :update_existing => "true",
                    :double_optin => "false",
                    :replace_interests => "false") 
```

# powershell - PowerShell 中的参数绑定问题

> ID：12500632
> 
> 赞同：5
> 
> 时间：2012-09-19T18:23:34.973
> 
> 标签：powershell, parameterbinding

我有这个 PowerShell cmdlet：

```
function Test-ParameterBinding {
    #
    # .SYNOPSIS
    # Tests parameter binding.
    #
    [CmdletBinding()]
    param (    

        [Parameter(ParameterSetName = 's1', Mandatory = $true)]
        [int] $P1,

        [Parameter(ParameterSetName = 's1')]
        [Parameter(ParameterSetName = 's2', Mandatory = $true)]
        [string] $P2,

        [Parameter(ParameterSetName = 's1')]
        [Parameter(ParameterSetName = 's3', Mandatory = $true)]
        [bool] $P3
    )
    process { $PSCmdlet }
} 
```

这是此 cmdlet 的帮助：

```
SYNTAX
    Test-ParameterBinding -P1 <Int32> [-P2 <String>] [-P3 <Boolean>] [<Com…

    Test-ParameterBinding -P2 <String> [<CommonParameters>]

    Test-ParameterBinding -P3 <Boolean> [<CommonParameters>] 
```

查看代码和帮助，我想我可以像这样使用 cmdlet：

```
Test-ParameterBinding -P2 'Bind to param set s2'
Test-ParameterBinding -P3 $true # Bind to param set s3 
```

但对于这两个我得到：

```
Parameter set cannot be resolved using the specified named parameters. 
```

* * *

**问题 1：** PowerShell 是否应该能够绑定到参数集`s2`以及`s3`在我的两种情况下？

这意味着没有时间为 PowerShell 版本 2 实施它，或者他们没有发现这个问题。

**问题2：**我这里的推理有问题吗？在这些情况下参数绑定是否会失败？

* * *

[我在PowerShell 文档](http://msdn.microsoft.com/en-us/library/ms714420%28v=vs.85%29.aspx)中发现了一些可能与我的问题直接相关的内容：

> 在一种情况下，即使指定了默认参数集名称，Windows PowerShell 也无法使用默认参数集。Windows PowerShell 运行时无法仅根据对象类型来区分参数集。例如，如果您有一个参数集采用字符串作为文件路径，而另一个参数集直接采用 FileInfo 对象，则 Windows PowerShell 无法根据传递给 cmdlet 的值确定要使用的参数集，也不会它使用默认参数集。在这种情况下，即使您指定了默认参数集名称，Windows PowerShell 也会引发不明确的参数集错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T18:57:28.047

您的逻辑是正确的，Powershell*应该*能够根据您的函数定义和示例用法找出参数集。

显然，Powershell v2 根本没有足够强大的逻辑来解决这个问题。不过，它在 Powershell v3 中按预期工作，这进一步证实了它是 v2 中的一个缺点/错误。

# javascript - 为什么我不能在 Javascript 中调用原型方法？

> ID：12500637
> 
> 赞同：1
> 
> 时间：2012-09-19T18:23:52.200
> 
> 标签：javascript, prototype

[jsFiddle 演示](http://jsfiddle.net/centerwow/nHetS/)

我有从 Shape 继承的 F。

```
F.prototype = Shape.prototype; 
```

F 创建名为 test 的新方法。

```
F.prototype.test = function(){return 'test';}; 
```

我知道，如果我编写`F.prototype = Shape.prototype;`了我在 F 中创建的所有方法，那么从 Shape 继承的其他类将可以使用这些方法。

我做错了什么？

为什么我在执行代码时会出错`alert(B.test());`？

```
function Shape(){}
Shape.prototype.name = 'shape';
Shape.prototype.toString = function() {return this.name;};

var F = function(){};
F.prototype = Shape.prototype;
F.prototype.test = function(){return 'test';};

function Triangle(side, height) {
this.side = side;
this.height = height;
}

Triangle.prototype = new F();
Triangle.prototype.constructor = Triangle;
Triangle.prototype.name = 'Triangle';

var my = new Triangle(5, 10);
alert(my.toString());

var Second_class = function(){};
Second_class.prototype = Shape.prototype;
B.prototype = new Second_class();
alert(B.test()); 
```

在这个例子中，当`F`继承自jsFiddle`Shape`并`Triangle`创建自`F` [jsFiddle 演示 woek 好](http://jsfiddle.net/centerwow/nHetS/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:39:58.127

> 我有从 Shape 继承的 F。
> 
> `F.prototype = Shape.prototype;`

严格来说，你不是。您正在覆盖函数的`prototype`属性。`F`要构建真正的继承链，您需要使用

```
F.prototype = Object.create(Shape.prototype); 
```

因此 Shape 的属性在 F 实例上仍然可用，但反之则不行（因为两个原型都是同一个对象）。所以回答你的第一个问题：是的，你做到了。

另请参阅[为什么我不使用 Child.prototype = Parent.Prototype 而不是 Child.prototype = new Parent(); 用于 Javascript 继承？](https://stackoverflow.com/q/11088365/1048572)

> 为什么当我执行代码时 alert(B.test()); 它不工作？

这很容易解释。`B`（您忘记在示例中声明，但假设它是一个函数）是一个 Function 对象。您没有为其分配任何属性。您所做的是设置它的原型属性（使用`new`关键字也正确设置原型链，但不小心创建了一个实例 -`Object.create`是首选）。所以现在，任何*实例*都`B`将从该原型对象继承：

```
var b = new B();
b.test(); 
```

# python - 遇到 Django 的 ModelChoiceField “queryset”属性问题

> ID：12500641
> 
> 赞同：1
> 
> 时间：2012-09-19T18:24:07.140
> 
> 标签：python, mysql, django, django-queryset

默认情况下，在 django 中，模型外键的形式是 ModelChoiceField（您可以在其中从所有可能模型的列表中进行选择）。并且可以使用查询集属性更改这些，例如

// 在forms.py中

self.fields['possible_cars'].queryset = somequeryset

但是我的情况是我有一个东西列表，而不是查询集，并且由于无法将列表转换为查询集，我不确定如何使我的 ModelChoiceField 的选项类似于列表我想要的模型。（由于他们默认采用查询集，我假设他们无论如何都会从该查询中获得一个列表，所以这种事情应该是可能的）。

我试过 self.fields['possible_cars']._choices = mylist ，但它不起作用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:40:09.897

假设您的字段采用`Car`查询集，您可以构造如下：

```
mylist = ['BMW', 'Lamborghini', 'Porsche']
cars = Car.objects.filter(name__in=mylist)
self.fields['possible_cars'].queryset = cars 
```

# php - 使用 Mysql 将相同的内容“类型”存储在一个表中

> ID：12500642
> 
> 赞同：0
> 
> 时间：2012-09-19T18:24:12.293
> 
> 标签：php, mysql, database, model

我正在我的数据库中创建一个简单的论坛，其中一个`topic`有很多`comments`.

数据库结构不是问题，我实际上是在寻找一种使用同`comments`一张表的方法，使用`blog` `comments`. （我不知道我如何解释这一点，但我会尝试）

我希望博客帖子表有很多评论（好的），并且论坛主题也有很多评论。

由于博客中的评论和主题对我来说是相同的，将它们全部存储在同一个地方会很好吗？如果是，我怎样才能区分一个和另一个，并准确地“找到”它们？

（如果我知道关键字，我会搜索谷歌......我其他时候也遇到过这个问题，但我解决了它为表格创建了一个不同的名称，但它们是相同的，只是引用其他东西......）

我正在使用 CakePHP。

伊万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:28:34.577

一种简单的方法，表格评论，您可以在其中存储所有评论

```
id|text   |user_id
1 | hello |1
2 | world |2 
```

然后您从需要此类 blog_comments 的其他表中引用此表：

```
id|discussion_id|comment_id|timestamp
1 |1234         |1         |2012-19-09 20:30:00 
```

discussion_id 是 root 或 forum_comments：

```
id| forum_id| comment_id| timestamp
1 |123444   |2          |2012-19-09 20:31:00 
```

forum_id 也是论坛的参数，comment_id 是对评论的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:28:57.223

为什么不使用不同的索引名称？

对于博客 - blog_id

对于论坛 - 主题 ID

# jquery - 重用来自 JQuery DataTables 的排序函数

> ID：12500645
> 
> 赞同：0
> 
> 时间：2012-09-19T18:24:36.177
> 
> 标签：jquery, datatables

我正在使用[http://datatables.net/plug-ins/sorting](http://datatables.net/plug-ins/sorting)中的 ENUM 排序例程。我想重用相同的函数来对 DataTables 插件之外的另一个列表进行排序（基本上对与 DataTable 相同的页面上的 SELECT 元素进行排序）。我想避免复制和粘贴（并维护两组业务规则）排序功能的特性。

例如，如果这是我用于 DataTables 的“插件”：

```
jQuery.extend(jQuery.fn.dataTableExt.oSort, {
  "status-enum-pre": function (a) {
    switch (a) {
      case "Assigned": return 1;
      case "Contacted": return 2;
      case "Meeting Set": return 3;
      case "Closed": return 4;
      default: return 5;
    }
  },

  "status-enum-asc": function (a, b) {
    return ((a < b) ? -1 : ((a > b) ? 1 : 0));
  },

  "status-enum-desc": function (a, b) {
    return ((a < b) ? 1 : ((a > b) ? -1 : 0));
  }
}); 
```

如何重新使用该功能对以下选择列表进行排序？

```
<select>
  <option value="Contacted">Contacted</option>
  <option value="Assigned">Assigned</option>
  <option value="Closed">Closed</option>
  <option value="Meeting Set">Meeting Set</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:55:41.603

从属性中获取所需的排序函数`jQuery.fn.dataTableExt.oSort`，然后将其传递给`Array#sort`，它接收一个比较器函数。例如，要对`select`using进行排序`status-enum-asc`，您需要：

```
// Plugin sort functions
var sortFn = jQuery.fn.dataTableExt.oSort["status-enum-pre"];
var sortDirFn = jQuery.fn.dataTableExt.oSort["status-enum-desc"];

// Sort
var options = $("select option");
options.sort(function(a,b) {
    return sortDirFn(sortFn(a.text), sortFn(b.text));
});

// Empty and append sorted options
$("select").empty().append(options); 
```

**[演示](http://jsfiddle.net/fzteh/)**。

# sql - 哪个更快 - 不存在或不存在？

> ID：12500646
> 
> 赞同：11
> 
> 时间：2012-09-19T18:24:37.630
> 
> 标签：sql, performance, tsql

我有一个插入选择语句，它只需要插入行的特定标识符在其他两个表中的任何一个中都不存在的行。以下哪个会更快？

```
INSERT INTO Table1 (...)
SELECT (...) FROM Table2 t2
WHERE ...
   AND NOT EXISTS (SELECT 'Y' from Table3 t3 where t2.SomeFK = t3.RefToSameFK)
   AND NOT EXISTS (SELECT 'Y' from Table4 t4 where t2.SomeFK = t4.RefToSameFK AND ...) 
```

... 或者...

```
INSERT INTO Table1 (...)
SELECT (...) FROM Table2 t2
WHERE ...
   AND t2.SomeFK NOT IN (SELECT RefToSameFK from Table3)
   AND t2.SomeFK NOT IN (SELECT RefToSameFK from Table4 WHERE ...) 
```

...或者他们的表现大致相同？此外，还有其他更好的方法来构造这个查询吗？我通常不喜欢子查询，因为它们为查询添加了另一个“维度”，通过多项式因子增加了运行时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T18:36:49.213

`NOT IN`通常是否比 慢/快并不重要，**因为**`NOT EXISTS`它们在. 读：**`NULL`**

 **[不存在与不存在](https://stackoverflow.com/questions/173041/not-in-vs-not-exists)

在这些情况下，您几乎总是想要`NOT EXISTS`，因为它具有通常预期的行为。

如果它们是等效的，那么您的数据库很可能已经发现了这一点，并将为两者生成相同的执行计划。

在少数情况下，这两个选项是等效的并且您的数据库无法弄清楚，最好分析两个执行计划并为您的特定情况选择最佳选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:27:43.923

您可以使用 LEFT OUTER JOIN 并检查 RIGHT 表中的值是否为 NULL。如果值为 NULL，则该行不存在。这是避免子查询的一种方法。

```
SELECT (...) FROM Table2 t2
LEFT OUTER JOIN t3 ON (t2.someFk = t3.ref)
WHERE t3.someField IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:34:27.527

它取决于表的大小、可用的索引以及这些索引的基数。

如果您没有为两个查询获得相同的执行计划，并且如果两个查询都没有计划执行 JOIN 而不是子查询，那么我猜第二版更快。版本一是相关的，因此会产生更多的子查询，版本二可以满足总共三个查询。

（另外，请注意，不同的引擎可能会偏向一个方向或另一个方向。某些引擎可能会正确地确定查询是相同的（如果它们确实*相同*）并解析为相同的执行计划。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-19T14:44:38.147

对于较大的表，建议使用 NOT EXISTS/EXISTS，因为 IN 子句会根据表的体系结构多次运行子查询。

基于成本优化器：

没有区别。**

# gdb - main() 返回 0 后 GDB 不退出执行

> ID：12500648
> 
> 赞同：0
> 
> 时间：2012-09-19T18:24:41.260
> 
> 标签：gdb, bounds

我正在玩指针，只是做一些基本的事情来巩固我对它们的理解。当我尝试使用 GDB 的“下一步”和“步骤”调试并遵循我在网上找到的这个示例时，GDB 会在函数的末尾运行。在它到达语句“return 0;”之后 它告诉我它“无法在 start() 中访问地址 0x0 0x0000000100000de4 的内存

这是代码：

```
#include <cstdio>
#include <ctype.h>

int main()
{
    char my_str[] = "hello world";
    *my_str = toupper(*my_str);
    *(my_str + 6) = toupper(*(my_str + 6));
    printf("%s", my_str); // prints, "Hello World"
    return 0;
} 
```

这是 gdb 的输出：

```
Breakpoint 1, main () at pwp.cpp:10
10       return 0;
(gdb) n
Cannot access memory at address 0x0
0x0000000100000de4 in start ()
(gdb) s
Single stepping until exit from function start, 
which has no line number information.
0x0000000100000ed6 in dyld_stub_exit ()
(gdb) n
Single stepping until exit from function dyld_stub_exit, 
which has no line number information.
0x0000000100000f08 in dyld_stub_printf ()
(gdb) n
Cannot find bounds of current function
(gdb) q 
```

发生了什么导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:34:54.517

从返回`main()`不会立即退出您的程序 - libc 在退出之前会进行一些清理，其中包括刷新文件描述符上的输出，例如`stdout`（这里是必要的，因为您没有`\n`在您的`printf`.

默认情况下，GDB 中的`n`命令会尝试逐行执行源代码。由于您正在单步执行您没有可用于 (libc) 的源代码，并且由于您正在执行的代码有些奇怪（它是一个动态库“存根”函数），因此该命令不起作用正确。如果您真的想一次执行一个指令，请使用`si`.

# c# - 并非所有代码路径都在 C# 中返回值

> ID：12500649
> 
> 赞同：0
> 
> 时间：2012-09-19T18:24:48.067
> 
> 标签：c#, c#-4.0

```
public int Queue()
    {
        using (Entities server = new Entities())
        {
            var ServerId1 = (from serverID in server.AppPM_Patches
                             where serverID.PatchStatus == "NotStarted" && serverID.ServerId == 1
                             select serverID.ServerId).Count();
            var ServerId2 = (from serverID in server.AppPM_Patches
                             where serverID.PatchStatus == "NotStarted" && serverID.ServerId == 2
                             select serverID.ServerId).Count();
            var ServerId3 = (from serverID in server.AppPM_Patches
                             where serverID.PatchStatus == "NotStarted" && serverID.ServerId == 3
                             select serverID.ServerId).Count();
            if (ServerId1 == 0 && ServerId2 == 0 && ServerId3 == 0)
            {
                return ServerId1;//Convert.ToInt32(ServerId1);

            }
            else if (ServerId1 == 1 && ServerId2 == 0 && ServerId3 == 0)
            {
                return ServerId2;
            }
            else if (ServerId1 == 1 && ServerId2 == 1 && ServerId3 == 0)
            {
                return ServerId3;
            }
            else if (ServerId1 > ServerId2 && ServerId1 > ServerId3)
            {
                if (ServerId2 > ServerId3)
                {
                    return ServerId3;
                }
                else
                {
                    return ServerId2;
                }
            }
            else if (ServerId2 > ServerId3 && ServerId2 > ServerId1)
            {
                if (ServerId1 > ServerId3)
                {
                    return ServerId3;
                }
                else
                {
                    return ServerId1;
                }
            }
            else if (ServerId3 > ServerId1 && ServerId3 > ServerId2)
            {
                if (ServerId1 > ServerId2)
                {
                    return ServerId2;
                }
                else
                {
                    return ServerId1;
                }
            }
            else if (ServerId1 == ServerId2 && ServerId2 == ServerId3 && ServerId1 == ServerId3)
            {
                return ServerId1;
            }
            else if (ServerId1 == ServerId2 && ServerId1 > ServerId3 && ServerId2 > ServerId3)
            {
                return ServerId3;
            }
            else if (ServerId2 == ServerId3 && ServerId2 > ServerId1 && ServerId3 > ServerId1)
            {
                return ServerId1;
            }
            else if (ServerId1 == ServerId3 && ServerId1 > ServerId2 && ServerId1 > ServerId3)
            {
                return ServerId1;
            }
        }
    } 
```

我在方法中收到错误（并非所有代码路径都返回值）。此方法返回我定义的 int 值。但是即使我返回了一个 int 值，也不知道为什么会发生这个错误。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:27:28.887

你有`if`一堆`else if`陈述，但你没有`else`陈述。就编译器而言，完全可以想象`if`不满足任何条件。在这种情况下，该方法没有返回值。

您可以在`else`语句中或`if`通常在构造之后返回值。或者，如果代码确实*不*应该在不满足任何条件的情况下退出`if`语句，那么您可以在方法的末尾抛出异常以指示存在错误。异常是方法可接受的退出策略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:57:30.547

这里还有很多其他答案可以解决您的特定错误消息，但是您的方法还有更多潜在问题被忽略了。您有大量的 if/else if 语句，它们非常长且复杂，只是为了返回 3 个整数中的最小值。有*更*简单的方法可以做到这一点。重构最少的方法是在查询后立即添加以下内容：

```
return new[] { ServerId1, ServerId2, ServerId3  }.Min(); 
```

但是，您可以重构查询本身，以便只执行一个查询，而不是三个，并且不要在三个不同的服务器 ID 中硬编码。这将允许您将其中的所有内容替换为`using`：

```
return (from serverID in server.AppPM_Patches
where serverID.PatchStatus == "NotStarted"
group serverID  by serverID.ServerId into servers
select servers.Count())
.Min(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:41:38.467

```
 public int Queue()
        {

                using (Entities server = new Entities())
                {
int retVal=0;//initialize it your value
                    var ServerId1 = (from serverID in server.AppPM_Patches
                                     where serverID.PatchStatus == "NotStarted" && serverID.ServerId == 1
                                     select serverID.ServerId).Count();
                    var ServerId2 = (from serverID in server.AppPM_Patches
                                     where serverID.PatchStatus == "NotStarted" && serverID.ServerId == 2
                                     select serverID.ServerId).Count();
                    var ServerId3 = (from serverID in server.AppPM_Patches
                                     where serverID.PatchStatus == "NotStarted" && serverID.ServerId == 3
                                     select serverID.ServerId).Count();
                    if (ServerId1 == 0 && ServerId2 == 0 && ServerId3 == 0)
                    {
                        retVal=ServerId1;//Convert.ToInt32(ServerId1);

                    }
                    else if (ServerId1 == 1 && ServerId2 == 0 && ServerId3 == 0)
                    {
                        retVal=ServerId2;
                    }
                    else if (ServerId1 == 1 && ServerId2 == 1 && ServerId3 == 0)
                    {
                        retVal=ServerId3;
                    }
                    else if (ServerId1 > ServerId2 && ServerId1 > ServerId3)
                    {
                        if (ServerId2 > ServerId3)
                        {
                            retVal= ServerId3;
                        }
                        else
                        {
                            retVal=ServerId2;
                        }
                    }
                    else if (ServerId2 > ServerId3 && ServerId2 > ServerId1)
                    {
                        if (ServerId1 > ServerId3)
                        {
                            retVal=ServerId3;
                        }
                        else
                        {
                            retVal=ServerId1;
                        }
                    }
                    else if (ServerId3 > ServerId1 && ServerId3 > ServerId2)
                    {
                        if (ServerId1 > ServerId2)
                        {
                            retVal=ServerId2;
                        }
                        else
                        {
                            retVal=ServerId1;
                        }
                    }
                    else if (ServerId1 == ServerId2 && ServerId2 == ServerId3 && ServerId1 == ServerId3)
                    {
                        retVal=ServerId1;
                    }
                    else if (ServerId1 == ServerId2 && ServerId1 > ServerId3 && ServerId2 > ServerId3)
                    {
                        retVal=ServerId3;
                    }
                    else if (ServerId2 == ServerId3 && ServerId2 > ServerId1 && ServerId3 > ServerId1)
                    {
                        retVal=ServerId1;
                    }
                    else if (ServerId1 == ServerId3 && ServerId1 > ServerId2 && ServerId1 > ServerId3)
                    {
                        retVal=ServerId1;
                    }

        return retVal;
                }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T18:26:49.813

您没有其他案例，因此您没有涵盖所有案例。您可能在逻辑上涵盖了所有情况，但在语法上您没有。所以也许你可能想返回第一个服务器 ID 并添加

```
else
{
    return ServerId1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T18:26:55.670

`else if`如果没有满足s or中的至少一个`if`，则没有“默认”返回。

在最后添加 a `return`，或将最后`else if`一个更改为`else`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T18:27:16.347

如果你到达函数的末尾，你还没有返回任何东西。

# unix - 使用 grep 搜索 DNA 序列文件

> ID：12500653
> 
> 赞同：1
> 
> 时间：2012-09-19T18:25:10.170
> 
> 标签：unix, grep, line-breaks, dna-sequence

我正在尝试使用 Unix 的 grep 来搜索文件中的特定序列。这些文件通常非常大（~1Gb），有 'A's、'T's、'C's 和 'G's。这些文件也跨越很多行，每行是一个 60 多个字符的单词。我遇到的问题是，当我在这些文件中搜索特定序列时，grep 将返回单行上出现的模式的结果，但如果模式跨越一行（中间某处有换行符）则不会。例如：

使用

```
$ grep -i -n "GACGGCT" grep3.txt 
```

搜索文件 grep3.txt（我将目标“GACGGCT”放在双星中）

```
GGGCTTCGA**GACGGCT**GACGGCTGCCGTGGAGTCT
CCAGACCTGGCCCTCCCTGGCAGGAGGAGCCTG**GA
CGGCT**AGGTGAGAGCCAGCTCCAAGGCCTCTGGGC
CACCAGGCCAGCTCAGGCCACCCCTTCCCCAGTCA
CCCCCCAAGAGGTGCCCCAGACAGAGCAGGGGCCA
GGCGCCCTGAGGC**GACGGCT**CTCAGCCTCCGCCCC 
```

退货

```
3:GGGCTTCGAGACGGCTGACGGCTGCCGTGGAGTCT
8:GGCGCCCTGAGGCGACGGCTCTCAGCCTCCGCCCC 
```

所以，我的问题是`grep`没有找到`GACGGCT`跨越第 2 行末尾和第 3 行开头的。

如何使用 grep 查找在字符串中的任何位置可能包含或不包含换行符的目标序列？或者我怎么能告诉`grep`忽略目标字符串中的换行符？有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:31:24.693

我假设你的每一行都是 60 字符长。然后下面的 cmd 应该可以工作

```
tr '\n' ' ' < grep3.txt | sed -e 's/ //g' -e 's/.\{60\}/&^/g' | tr '^' '\n' | grep -i -n "GACGGCT" 
```

输出 ：

```
1:GGGCTTCGA**GACGGCT**GACGGCTGCCGTGGAGTCTCCAGACCTGGCCCTCCCTGGC
2:AGGAGGAGCCTG**GACGGCT**AGGTGAGAGCCAGCTCCAAGGCCTCTGGGCCACCAGG
4:CCAGGCGCCCTGAGGC**GACGGCT**CTCAGCCTCCGCCCC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T13:15:28.243

```
pcregrep -nM "G[\n]?A[\n]?C[\n]?G[\n]?G[\n]?C[\n]?T" grep3.txt
1:GGGCTTCGAGACGGCTGACGGCTGCCGTGGAGTCT
2:CCAGACCTGGCCCTCCCTGGCAGGAGGAGCCTGGA
CGGCTAGGTGAGAGCCAGCTCCAAGGCCTCTGGGC
6:GGCGCCCTGAGGCGACGGCTCTCAGCCTCCGCCCC 
```

# javascript - 未捕获的 ReferenceError：未定义 google

> ID：12500654
> 
> 赞同：16
> 
> 时间：2012-09-19T18:25:19.467
> 
> 标签：javascript, geolocation

我想使用地理定位和方向功能，但是有`google is not defined`错误。代码如下：

```
function loadScript() {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = "https://maps.googleapis.com/maps/api/js?key=mykey&sensor=true" + "&callback=initialize";
            document.body.appendChild(script);
        } 
```

看来 loadScript 不起作用！

```
var mapOptions = {
                zoom : 13,
                mapTypeId : google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions); 
```

错误从这里跳出来。有谁知道如何弄清楚吗？我需要使用密钥来获取地理定位服务，所以我不能使用简单的

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=true"></script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T05:16:30.443

如果你们在控制台中遇到错误，那么这是我应用的简单解决方案。

包括给定顺序的脚本文件..

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script> 
```

您必须首先包含“maps.googleapis.com/maps/api/js?sensor=false”，然后使用 jquery 库并将其从两者下方删除（它会起作用。）我希望它肯定会起作用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-20T07:25:43.353

我用这段代码自己尝试过——对我来说效果很好

**动态带键**

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        html {  height: 100%; }
        body
        {
            height: 100%;
            margin: 0px;
            padding: 0px;
        }
        #map_canvas { height: 100%;}
    </style>
    <script type="text/javascript">
        function initialize() {
            var latlng = new google.maps.LatLng(-34.397, 150.644);
            var myOptions = {
                zoom: 8,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
        }
        var myKey = "ENTER_YOUR_KEY_HERE";
        function loadScript() {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = "https://maps.googleapis.com/maps/api/js?key=" + myKey + "&sensor=false&callback=initialize";
            document.body.appendChild(script);
        }
    </script>
</head>
<body onload="loadScript()">
    <div id="map_canvas" style="width: 100%; height: 100%">
    </div>
</body>
</html> 
```

**静态无键**

```
 ...
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false">
</script>
</head>
<body onload="initialize()">
   ... 
```

在网上冲浪时，我偶然发现了一个重要的注意事项！

> **谷歌地图 JavaScript API v3**
> 
> Google Maps JavaScript API v3 不需要 API 密钥即可正常运行。但是，我们强烈建议您使用 API 控制台密钥加载 Maps API，该密钥允许您监控应用程序的 Maps API 使用情况。了解如何使用 API 控制台密钥。

请参阅[**Google 地图 API**](https://developers.google.com/maps/signup)

因此，显然您不再需要开发人员密钥！我尝试了两者 -*静态无键*和*动态键*-**都有效。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T08:16:07.160

Google 未定义意味着您的 google 地图库未加载，这意味着您在 https 或 http 上，并且您通过 http ot https 请求，因此将其更改为 https 或 http .... 表示如果您在 http 上

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

意思是如果你在 https 那么

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

# c++ - 使用 pow() 会出错

> ID：12500656
> 
> 赞同：2
> 
> 时间：2012-09-19T18:25:35.270
> 
> 标签：c++, math, cmath

请看下面的代码

```
#include <iostream>
#include <iomanip>
#include <cmath>

using namespace std;

int main()
{
    //int side1 = 0;
    //int side2 = 0;
    //int rightSide = 0;

    cout << "Right Side" << setw(10) << "Side1" << setw(10) << "Side2" << endl;

    for(int i=1;i<=500;i++)
    {
        //side1++;
        //cout << side1 << endl;

        for(int a=1;a<=500;a++)
        {
            //side2++;
            //cout << "side 2 " << side2 << endl;

            for(int c=1;c<=500;c++)
            {
                //rightSide++;
                int rightSideSqr = pow(c,c);
                int side1Sqr = pow(i,i);
                int side2Sqr = pow(a,a);

                if(rightSideSqr == (side1Sqr+side2Sqr))
                {
                    cout << rightSideSqr << setw(15) << i << setw(10) << a << endl;
                 }

            }
        }
    }
} 
```

这会给出一个错误“PythagorialTriples.cpp:28: error: call of overloaded `pow(int&, int&)' is ambiguous”。如果我只是使用 i*i 之类的手动电源而不是方法，则不会发生这种情况。有人可以解释一下为什么会这样吗？无论如何，我是 C++ 新手。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T18:31:09.227

`pow`在 中定义的有多个重载`<cmath>`。在您的代码中，这 3 个都同样有效，因此编译器无法选择正确的一个：

```
 pow(float, int);
        pow(double, int);
        pow(long double, int); 
```

最简单的解决方案是`static_cast`在第一个参数上使用，以消除任何歧义。例如

```
int side1Sqr = pow( static_cast<double>(i) ,i );
int side2Sqr = pow( static_cast<double>(a) ,a ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T18:28:38.373

哇！Pow(x,y) 是 x 的 y 次方（在数学术语中 - x ^y）！！不是 x*y

因此，您试图在 500 ³嵌套循环中获取^(第 i 个功率。)可能不是你想要的。用 pow(i,2) 替换您想要的行为。

请注意，@Mooing Duck 在 C++ 中提出了一个关于 x^y 的很好的观点，即 XOR 运算符。但我认为如果你已经在使用的话，你就会明白这一点`pow`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:35:09.983

你确定你能处理这么大的战俘吗？

Pow(x,y) 是 x ^y。看着那（这

[http://www.cplusplus.com/reference/clibrary/cmath/pow/](http://www.cplusplus.com/reference/clibrary/cmath/pow/)

> double pow（双底，双指数）；
> 
> long double pow ( long double base, long double exponent );
> 
> 浮动战俘（浮动基数，浮动指数）；
> 
> double pow（双底，int 指数）；
> 
> long double pow ( long double base, int exponent );

没有 INT 版本。您的编译器不知道哪个是正确的。您必须使用 static_cast 来告诉他们，例如：

```
int side1Sqr = pow(static_cast<double>i,i); 
```

对于大精度计算，您可以使用：

[http://gmplib.org/](http://gmplib.org/)

boost也有一种解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T18:36:43.117

它无法确定要使用哪个重载函数。尝试

```
pow(double(i), i); 
```

或者

```
pow(double(i), 2); 
```

因为这看起来像你想要的。

# jquery - 在页面上的每个元素上运行函数

> ID：12500661
> 
> 赞同：0
> 
> 时间：2012-09-19T18:26:01.510
> 
> 标签：jquery, jquery-selectors

有没有办法检查某个元素的任何父母是否是标签？目前，它只检查直接父级，但我想知道是否有办法检查它是否包含在任何 ankor 标签中？

HTML：

```
<!DOCTYPE html>
<html>
    <head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

    </head>
    <body>
        <a class="website">Load Content</a>
        <a href=""><img width="200" height="200" class="zoom" /></a>
        <a href=""><div><img width="78" height="101" class="zoom" /></div></a>
    </body>
</html> 
```

CSS：

```
.zoomBox {
    position:absolute;  
    opacity:0;
    background: url('http://www.shannonhochkins.com/_images/505706e8965f59080b0016a1') no-repeat center center;    
} 
```

JavaScript：

```
zoom = function() {    
zoomBoxClass = 'zoomBox';
zoomContainer = $('.zoom');
zoomContainer.each(function() {
    if ($(this).parent().is("a")) {
        var $el = $('<div class="' + zoomBoxClass + '"></div>').insertBefore($(this)),
            zwid = $(this).width(),
            zhei = $(this).height(),
            zpx = $(this).position().left,
            zpy = $(this).position().top;
        $el.css({
            width: zwid,
            height: zhei,
            top: zpy,
            left: zpx
        });;
    };
});

$(document).ready(function() {
    zoom();
    $("." + zoomBoxClass).mouseover(function() {
        $(this).stop(true, true).animate({
            opacity: 1.0
        }, 'slow');
    });
    $("." + zoomBoxClass).mouseleave(function() {
        $(this).stop(true, true).animate({
            opacity: 0
        }, 'slow');
    });
}); 
```

它确实有效，但当它击中第二个时不正确。

我需要能够为页面上存在的每个类单独运行该函数。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:37:47.097

你需要使用一个`.each()`

```
zoomContainer.each(function() {
    var zoomBox = $('<div class="zoomBox"></div>').insertBefore($(this));
    // anything else you want to do to zoomBox
}); 
```

zoomContainer 是 jQuery 对象的集合，`.each()`将遍历每个对象，上下文 (this) 指的是循环中的各个 zoomContainer jQuery 对象。

在您的代码示例的上下文中：

```
zoom = function() {
    zoomBoxClass = 'zoomBox';
    zoomContainer = $('.zoom');

    zoomContainer.each(function () {
        var $el = $('<div class="' + zoomBoxClass + '"></div>').insertBefore($(this)),
            zwid = $(this).width(),
            zhei = $(this).height(),
            zpx = $(this).position().left,
            zpy = $(this).position().top;

        $el.css({
            width: zwid,
            height: zhei,
            top: zpy,
            left: zpx
        });
    });
}; 
```

如果您想遍历 DOM 树，直到到达特定标签（如果存在），您可以使用 jquery`.closest(selector)`

```
`$(this).closest('a');` 
```

如果要检查是否`.closest()`返回任何内容，可以检查其长度属性是否 > 0

```
var $a = $(this).closest('a');

if ($a.length > 0) {
    // do stuff with $a here
} 
```

# php - 将 span/h1 样式添加到 php

> ID：12500665
> 
> 赞同：0
> 
> 时间：2012-09-19T18:26:24.953
> 
> 标签：php, html, css

下面的代码连接到一个联系表格。提交时，您会收到两条消息之一。如何向这些消息添加 span 和 h1 样式？

```
 <?php

    if($_GET['message'] == "thanks")  {  
        $message = "Message received! Thank you for contacting us.";
        } else {
        if($_GET['message'] == "wrongcaptcha")
        $message = "We are having problems processing your message. The captcha code you entered was incorrect.";
        }

?>

<div id="thankyoubox">
<p><?php echo $message?><p>

</div><!--end of thankyoubox--> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:29:27.753

改变你的`$message`变量。例如：

```
$message = "<h1>Message received!</h1> Thank you for contacting us."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:30:43.810

这两种方法中的任何一种都可以：

```
$message = '<h1 style="color:#333;font-weight:bold;" >Message received! <span>Thank you</span> for contacting us.</h1>'; 
```

或者

```
<h1><?php echo $message?><h1> 
```

# iphone - iOS从网络获取压缩图像

> ID：12500666
> 
> 赞同：0
> 
> 时间：2012-09-19T18:26:26.950
> 
> 标签：iphone, ios, image, download, compression

所以，我的 iOS 应用程序中有 tableview。我需要用一些来自网络的图像填充它。首先要从网络上获取这些图像，我使用：

NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.somepicture.jpg"]]; NSImage *image = [[UIImage alloc] initWithData:data];

但问题是这些图像有时很大，所以我需要在下载之前以某种方式压缩这些数据。我需要大约 85 像素 x 85 像素的图像。

所以，我的问题是如何通过不下载整个数据从网络获取这些图像。我确信有解决方案，因为我已经在 J​​ava 中为 Android 制作了它。或者是解决问题的任何其他方法。

感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:31:20.803

没有通用的方法可以做到这一点。一些网站可能提供其图像的缩略图，但并非所有网站都有。如果缩略图可用，则没有标准的位置或格式可供您找到它们，也无法让任意 Web 服务器为您创建缩略图。

（在 Android 上也没有办法做到这一点。您可能只是下载整个图像并缩小它。）

# c# - 如何从被 linq 填充的 gridview 中获取 DatakeyValue

> ID：12500667
> 
> 赞同：1
> 
> 时间：2012-09-19T18:26:29.087
> 
> 标签：c#, linq, gridview

我有以下网格视图：

```
 <asp:GridView ID="gvNOVs" runat="server" AllowPaging="true" AllowSorting="true" PageSize="10"
            AutoGenerateColumns="false" Width="100%" BackColor="Transparent" GridLines="None"
            RowStyle-HorizontalAlign="Left" PagerSettings-Mode="NumericFirstLast" DataKeyNames="NOVID"
            OnRowDataBound="gvNOVs_RowDataBound"
            OnRowCommand="gvNOVs_OnSelectRow" 
            OnPageIndexChanging="gvNOVs_PageIndexChanging"
            OnSorting="gvNOVs_OnSorting"
            >
            <AlternatingRowStyle CssClass="alternateItemStyle" />
            <HeaderStyle CssClass="headerStyle" />
            <PagerSettings Mode="NumericFirstLast" />
            <RowStyle CssClass="itemStyle" />

            <Columns>
                <asp:BoundField DataField="NOVID" HeaderText="NOVID" InsertVisible="false" ReadOnly="true" Visible="false"/>
                <asp:BoundField DataField="NOVNumber" HeaderText="NOV Number" SortExpression="NOVNumber"
                    ItemStyle-HorizontalAlign="Center" />
                <asp:BoundField DataField="NOVDate" HeaderText="NOV Date" SortExpression="NOVDate"
                    ItemStyle-HorizontalAlign="Center" DataFormatString="{0:d}" />
                <asp:BoundField DataField="CompanyName" HeaderText="Company Name" SortExpression="CompanyName"
                    ItemStyle-HorizontalAlign="Center"></asp:BoundField>
                <asp:BoundField DataField="CargoTankID" HeaderText="Cargo Tank Number" SortExpression="CargoTankNumber"
                    ItemStyle-HorizontalAlign="Center" />
                <asp:BoundField DataField="ARBInspectorFirstName" HeaderText="InspectorFirstName"
                    SortExpression="InspectorFirstName" ItemStyle-HorizontalAlign="Center" />
                <asp:BoundField DataField="ARBInspectorLastName" HeaderText="InspectorLastName" SortExpression="InspectorLastName"
                    ItemStyle-HorizontalAlign="Center" />
                <asp:BoundField DataField="ViolationName" HeaderText="Violation Name" SortExpression="ViolationName"
                    ItemStyle-HorizontalAlign="Center" />
            </Columns>
        </asp:GridView> 
```

它正在使用 linq 在页面加载事件中填充：

```
 var NOVs = from n in db.CT_NOVs
                   join i in db.CT_Inspectors on n.ARBInspectorID equals i.CTInspectorID
                   join v in db.CT_ViolationTypes on n.ViolationTypeID equals v.ViolationTypeID
                   join t in db.CT_Tanks on n.CargoTankID equals t.CargoTankID
                   join c in db.CT_Companies on t.CompanyID equals c.CompanyID
                   orderby n.NOVNumber descending
                   select new
                   {
                       n.NOVID,
                       n.NOVNumber,
                       NOVDate = n.NOVDate.Value.ToShortDateString(),
                       ARBInspectorFirstName = i.FirstName,
                       ARBInspectorLastName = i.LastName,
                       v.ViolationName,
                       t.CargoTankID, 
                       c.CompanyName
                   };

        this.gvNOVs.DataSource = NOVs;
        this.gvNOVs.DataBind(); 
```

当我点击一行时，我调用这个方法：

```
protected void gvNOVs_OnSelectRow(object sender, GridViewCommandEventArgs e)
{

} 
```

我不确定如何获取 datakeyValue，我想获取单击的行的 NOVID。如果我得到 e.CommandArgument.ToString()，它给了我 CargoTankID 的值，我不知道为什么它给了我这个值。

有人知道如何获取所选行的 NOVID 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:09:27.683

你应该尝试这样的事情

```
string dataKeyValue = (string)this.gvNOVs.SelectedDataKey.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:47:31.230

这可能会奏效。

1.  从中获取索引`CommandArgument`
2.  从获取网格本身`CommandSource`
3.  获取数据源
4.  获取索引处的数据项

    int index = int.Parse((string)e.CommandArgument); var grid = (GridView)e.CommandSource; var data = (IList)grid.DataSource; var NOVID = 数据[索引].NOVID;

# jquery - ajax请求后的HTML Anchor标记重定向链接

> ID：12500669
> 
> 赞同：5
> 
> 时间：2012-09-19T18:26:34.550
> 
> 标签：jquery, html, ajax, anchor, preventdefault

我正在尝试编写一种方法来捕获用户对站点菜单的点击，但我希望该过程对用户保持沉默，主要是当用户将鼠标悬停在锚标记上时，它会正常运行（显示链接它包含）。我已经尝试了各种方法来做到这一点，我现在几乎可以工作了，我的代码如下：

```
<div class="selectNode" id="selectNode_1" style="color: rgb(229, 229, 229); background-color: rgb(47, 47, 47); ">
  <a href="http://www.google.com" class="selectAnchor" style="color: rgb(229, 229, 229); ">
    Google
  </a>
  <img class="childImage" src="icon.png">
</div> 
```

在 jQuery 中，我有：

```
$(".selectAnchor, .menuAnchor").click(function(event){
    event.stopPropagation();
    console.log(event.target.nodeName);
    //event.preventDefault();

    $.ajax({
      type: 'POST',
      url: 'http://localsite/menuRedirect.php',
      data: {id:0, module:'Module',source:'Source'},
      complete: function(data){
        console.log("DONE");
        return true;
      }
    });
}); 
```

链接重定向到所选页面，但 ajax 代码永远不会完成，因此永远不会注册用户的点击。

我尝试使用 event.preventDefault，但无法恢复已取消的事件。

部分问题来自额外的功能，例如，大多数用户右键单击锚标记以在新选项卡中打开（或使用控制+单击或中间单击），并使用类似

```
<a href="javascript:saveClick(o)">Google</a> 
```

不允许在网站上使用（出于安全原因）。

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T18:31:50.840

使用`event.preventDefault`，然后在成功时使用`location.href = self.href`

```
$(".selectAnchor, .menuAnchor").click(function(event){
    event.preventDefault();
    console.log(event.target.nodeName);
    var self = this;

    $.ajax({
      type: 'POST',
      url: 'http://localsite/menuRedirect.php',
      data: {id:0, module:'Module',source:'Source'},
      complete: function(data){
        console.log("DONE");
        location.href = self.href;
      }
    });
}); 
```

或者使用 context 属性来移除`var self = this`

```
$(".selectAnchor, .menuAnchor").click(function(event){
    event.preventDefault();
    console.log(event.target.nodeName);

    $.ajax({
      type: 'POST',
      context: this,
      url: 'http://localsite/menuRedirect.php',
      data: {id:0, module:'Module',source:'Source'},
      complete: function(data){
        console.log("DONE");
        location.href = this.href;
      }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-20T09:21:05.650

最新的 chrome 浏览器不会完成 ajax 请求。由于浏览器页面从用户那里得到了新的 url 请求，所以浏览器会立即终止线程。

98% 的情况下，您可以看到 ajax 请求在网络选项卡中被取消。

所以解决方案是使用 sendBeacon API。这将异步执行 POST 请求。Google 分析使用此代码执行事件跟踪（例如：点击）。
[https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon)

```
 navigator.sendBeacon("{{url}}", param); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:31:41.143

尝试这个

```
<div class="selectNode" id="selectNode_1" style="color: rgb(229, 229, 229); background-color: rgb(47, 47, 47); ">
  <a href="#" class="selectAnchor" style="color: rgb(229, 229, 229); ">
    Google
  </a>
  <img class="childImage" src="icon.png">
</div> 
```

然后在jquery中：

```
$(".selectAnchor, .menuAnchor").click(function(event){
    event.preventDefault();
    console.log(event.target.nodeName);
    //event.preventDefault();

    $.ajax({
      type: 'POST',
      url: 'http://localsite/menuRedirect.php',
      data: {id:0, module:'Module',source:'Source'},
      complete: function(data){
        console.log("DONE");
        window.location = "http://www.google.com"
      }
    });
}); 
```

# c# - 批量 SQL 插入故障排除

> ID：12500670
> 
> 赞同：0
> 
> 时间：2012-09-19T18:26:35.303
> 
> 标签：c#, error-handling, bulkinsert, sqlexception

我正在编写一个数据转换代码，它将一系列日期从一个数据库移动到另一个数据库。当我这样做时，我得到一个 SQLTypeException 说值超出范围。我知道这意味着我在某处输入了不正确的数据。

那么我的问题是：由于大约有 5,000 个条目，代码中是否有一种简单的方法可以找到错误值的位置？我已经打开了 DataSet Visualizer，但有没有办法对其进行排序或更轻松地筛选数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:42:57.183

你可以试试`ERRORFILE ='file_name'`

指定用于收集具有格式错误且无法转换为 OLE DB 行集的行的文件。这些行“按原样”从数据文件复制到此错误文件中。

语法（您在查询末尾找到 ERRORFILE）

```
BULK INSERT 
   [ database_name . [ schema_name ] . | schema_name . ] [ table_name | view_name ] 
      FROM 'data_file' 
     [ WITH 
    ( 
   [ [ , ] BATCHSIZE = batch_size ] 
   [ [ , ] CHECK_CONSTRAINTS ] 
   [ [ , ] CODEPAGE = { 'ACP' | 'OEM' | 'RAW' | 'code_page' } ] 
   [ [ , ] DATAFILETYPE = 
      { 'char' | 'native'| 'widechar' | 'widenative' } ] 
   [ [ , ] FIELDTERMINATOR = 'field_terminator' ] 
   [ [ , ] FIRSTROW = first_row ] 
   [ [ , ] FIRE_TRIGGERS ] 
   [ [ , ] FORMATFILE = 'format_file_path' ] 
   [ [ , ] KEEPIDENTITY ] 
   [ [ , ] KEEPNULLS ] 
   [ [ , ] KILOBYTES_PER_BATCH = kilobytes_per_batch ] 
   [ [ , ] LASTROW = last_row ] 
   [ [ , ] MAXERRORS = max_errors ] 
   [ [ , ] ORDER ( { column [ ASC | DESC ] } [ ,...n ] ) ] 
   [ [ , ] ROWS_PER_BATCH = rows_per_batch ] 
   [ [ , ] ROWTERMINATOR = 'row_terminator' ] 
   [ [ , ] TABLOCK ] 
   [ [ , ] ERRORFILE = 'file_name' ] 
    )] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:37:23.040

5000个条目一个一个来做也不算多。这样您就可以轻松发现有问题的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T03:26:19.147

您也可以使用 BATCHSIZE = 100 来缩小已提交的批次大小:)

BATCHSIZE =batch_size 指定批处理中的行数。每个批次都作为一个事务复制到服务器。如果此操作失败，SQL Server 将提交或回滚每个批次的事务。默认情况下，指定数据文件中的所有数据都是一批。有关性能注意事项的信息，请参阅本主题后面的“备注”。

# php - PHP 脚本不工作：第 1 行第 538 列错误

> ID：12500672
> 
> 赞同：-3
> 
> 时间：2012-09-19T18:26:35.380
> 
> 标签：php, mysql, xml, web, xml-parsing

我不知道出了什么问题，我正在使用同一个脚本来获取另一个 XML，它工作得很好。这是脚本：

```
<?php
header("Content-type: text/xml");
echo "<?xml version=\"1.0\" encoding=\"LATIN-1\"?>";
echo "<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">";
echo "<plist version=\"1.0\">";

function getXML($sql="SELECT IDCargo FROM database.table"){

    $conn   = mysql_connect ("myserverurl.com", "user", "psw");
    $db     = mysql_select_db("database");
    $result = mysql_query($sql, $conn);
    $column = "";
    echo "<array>";

    while($row = mysql_fetch_assoc($result)){
        $column .= "<dict>";
        foreach ($row as $key => $value){
            $column .= "<key>$key</key>";
            $column .= "<string>$value</string>";
        }
        $column .= "</dict>";
    }

    echo $column;
    echo "</array>";
    echo "</plist>";
}
getXML("SELECT IDCargo as ID_CARGO, SequencialDoCandidato as NUMERO_SEQ_CANDIDATO, NomeDoCandidato AS NOME_CANDIDATO, NumeroDoCandidato as NUMERO_CANDIDATO, NomeDoPartido AS SIGLA_PARTIDO, Estado as SIGLA_ESTADO,IDUnidadeEleitoral AS ID_CIDADE_CANDIDATO, UnidadeEleitoral AS CIDADE_CANDIDATO FROM database.table");
mysql_close();
?> 
```

它带来了这个错误：

```
This page contains the following errors:

error on line 1 at column 538: Encoding error
Below is a rendering of the page up to the first error.

ID_CARGO11NUMERO_SEQ_CANDIDATO10000002965NOME_CANDIDATOAGRECINO DE SOUSANUMERO_CANDIDATO13SIGLA_PARTIDOPTSIGLA_ESTADOACID_CIDADE_CANDIDATO1120CIDADE_CANDIDATO 
```

任何人都可以看到任何东西吗？请在这里给我一些帮助。我从一个运行良好的脚本那里得到了脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:32:32.017

如果我阅读了您的代码，我可以看到：

```
echo "<?xml version=\"1.0\" encoding=\"LATIN-1\"?>"; 
```

所以我猜你想输出 LATIN-1 字符集。您需要在任何地方指定此字符集：

1/ 您可以尝试在 http 标头上指定编码：

```
header("Content-type: text/xml; charset=ISO-8859-1"); 
```

2/您还可以在数据库客户端上设置字符集：

```
mysql_set_charset('latin1', $db); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:37:36.660

您的输出很可能包含默认编码不支持的编码中的一个或多个字符。

更新您使用的编码，或转义任何不适合编码的字符。php 函数将`htmlentities`是一个好的开始。

# javascript - JavaScript 函数，将 HTML 作为参数传递

> ID：12500680
> 
> 赞同：3
> 
> 时间：2012-09-19T18:27:13.647
> 
> 标签：javascript, html, ajax, function, parameters

我的脚本中有两个函数，一个输出一些长的 HTML 字符串，另一个将这个字符串作为参数并处理它。

```
function myFirstFunction() {
    //output some HTML
    return myHTML;
}

var myHTML = myFirstFunction();

function mySecondFunction(myHTML) {
    //do something with parameter
} 
```

由于某种我无法弄清楚的原因，Chrome JS 控制台不断给我以下错误： **“Uncaught SyntaxError: Unexpected token <”**

我想这可能是因为输出的 HTML 很长，因为它似乎在处理小块 HTML。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:36:54.270

这是问题：

myHTML 是这样的 HTML**字符串**：

```
var myHTML ="<div id="foo"><div id='hello'>hello</div><div id="bar">bar'asdf'asf"sdf"&soidf;</div></div>"; 
```

那是行不通的，因为您在其中包含未转义的引号和内容。

如果您曾经`innerHTML`获取页面上某个元素的 HTML，这将不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:32:30.900

myHTML 是用一些 < 或 > 额外构造的，因此请验证 html 字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:59:02.357

有一种方法可以将 html 文本作为参数传递给 javascript 函数：只需在 html 标记中替换所有特定字符，然后再将其传递给 javascript 函数。稍后在 javascript 中，您只需将所有特定字符恢复正常即可。诀窍是让 javascript 只识别那些它除外的字符。

例子：

[[C＃]]

```
string urlString = "http://localhost:8698/DotNetNuke_Community_06.02.01_Install/Default.aspx?TabID=157&categoryId=92&newCategoryId=92";

                urlString = urlString.Replace("<", "µ");
                urlString = urlString.Replace(">", "Ħ");
                urlString = urlString.Replace("&", "€");
                urlString = urlString.Replace(":", "¥");
                urlString = urlString.Replace("=", "¬");
                urlString = urlString.Replace("/", "ä");
                urlString = urlString.Replace("?", "¿");
                urlString = urlString.Replace("'", "ʅ");
function(urlString); 
```

[[Javascript]]

```
function(urlString){
urlString = urlString.replace(/µ/g, "<");
        urlString = urlString.replace(/Ħ/g, ">");
        urlString = urlString.replace(/€/g, "&");
        urlString = urlString.replace(/¥/g, ":");
        urlString = urlString.replace(/¬/g, "=");
        urlString = urlString.replace(/ä/g, "/");
        urlString = urlString.replace(/¿/g, "?");
        urlString = urlString.replace(/ʅ/g, "'");
} 
```

问候，

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T18:37:07.110

我假设您实际上是在尝试传递 html，而不是在字符串文字中。如果您尝试以下操作：

```
myFunction(<html><body>...); 
```

那肯定会出错。您需要使用字符串文字：

```
myFunction("<html><body>..."); 
```

如果您使用的 html 中包含引号，则需要转义它们或使用单引号：

```
"<div id="name">" 
```

不是有效的字符串。使其成为：

```
"<div id=\"name\">" or
'<div id="name">' 
```

# node.js - BASH shell 脚本中的“节点运行”命令

> ID：12500681
> 
> 赞同：0
> 
> 时间：2012-09-19T18:27:14.067
> 
> 标签：node.js

我不知道如何处理“节点运行”命令，所以我只是简单地将它放在脚本中并得到错误：

```
module.js:340
    throw err;
'rror: Cannot find module 'C:\run
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

如何运行命令来启动实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:30:09.820

这很简单，你必须有一个`app.js`or`run.js`文件对吗？

dir 正确的目录，然后：

```
node you_file.js 
```

（.js 不是强制性的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:30:27.280

Node 是一个解释器。如果您只想要交互式解释器，请键入`node`. 如果要运行 javascript 程序，则需要将程序的路径传递给节点，例如`node myprogram.js`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:30:01.273

例如，如果您有一个名为 hello.js 的脚本，并且您的终端/cmd 提示符对该目录打开，您只需键入：

```
node hello 
```

这与以下内容相同：

```
node hello.js 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T02:41:59.463

假设文件名为“run”，你有你提到的 shebang 行，文件的权限设置为可执行，并且它所在的目录在你的路径上，你所需要的只是简单的“run”（如果目录不是t 在您的路径上，您需要指定其路径）。

# java - 将单实例 Redis 数据库移动到分片数据库？

> ID：12500685
> 
> 赞同：2
> 
> 时间：2012-09-19T18:27:30.123
> 
> 标签：java, redis

我有一个非分片 Redis 数据库，我想将数据复制到一个分片数据库。我环顾四周，但我能找到的最佳做法是将转储文件导出到 Json，然后将其重新加载到新的分片数据库实例，这样可以保留密钥哈希。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:00:28.940

Redis Cluster 仍在开发中，因此同时可以采取以下方法 -

1.  如果您使用 PHP 、 JAVA 或 scala ，那么 Predis 、 Jedis 和 scala-redis 支持客户端分片，即在客户端使用散列在多个 redis 服务器之间平均分配负载。
2.  如果您不使用上述语言，请查看 Redis-Sharding -

[https://github.com/kni/redis-sharding](https://github.com/kni/redis-sharding)

# ruby-on-rails - collection_select 在值和文本方法之间使用不同的模型

> ID：12500688
> 
> 赞同：0
> 
> 时间：2012-09-19T18:27:59.603
> 
> 标签：ruby-on-rails, model

我正在尝试`collection_select`为一个对象（**user**）创建一个字段，该字段`value_method`从另一个模型（**Product**）获取它，并`text_method`从另一个模型（**Product_description**）获取它。

**产品** `belongs_to` **Product_description**通过**product_description_id**。

**Product_description.rb**有两列，**:id**和**:name**

我该如何设置`text_method`？以下代码提供了正确的输入，但显示的是**product_description_id**整数而不是相应的文本名称。如何从**product_description表中获取相应的“****名称**” ？

 **```
<%= f.collection_select :product_description_id, @object.products.order(:product_description_id), :product_description_id, :product_description_id %> 
```

我试过这个，但这给了我一个无效的陈述。

```
<%= f.collection_select :product_description_id, @object.products.order(:product_description_id), :product_description_id, ProductDescription.find(:product_description_id).name %> 
```

反馈将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:30:10.653

您不能（至少在没有向产品添加返回描述的方法或使用描述方法将产品包装在对象中的情况下不能。这可能是一个好主意：产品类的用户是否真的必须知道实现细节名称存储在单独的表中？

但是，请记住，collection_select 只是常见情况下的一种方便方法。如果您不适合这种情况，则使用“正常”选择没有任何问题：

```
f.select :product_description_id, @object.products.order(:product_description_id).collect {|product| [product.production_description.name, product.product_description_id]} 
```

`includes`添加一个虽然没有它也可以工作，但这将是一个好主意。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T20:09:46.683

```
<%= f.collection_select :product_description_id, @object.products.order(:product_description_id).includes(:product_description), :product_description_id, "production_descriptions.name" %> 
```**

# java - 来自类的意图未启动

> ID：12500689
> 
> 赞同：2
> 
> 时间：2012-09-19T18:28:05.797
> 
> 标签：java, android

我正在尝试从活动类启动意图：

```
Intent i = new Intent(this, (Obscured)MapActivity.class);
    i.putExtra("stop", stop);
    this.startActivity(i); 
```

这是我在（模糊）MapActivity 中的意图接收器：

```
Intent i = this.getIntent();
if (i != null && i.getSerializableExtra("stop") != null) {
        this.displayLocations();
        BusStop tempStop = new BusStop();
        tempStop = (BusStop) i.getSerializableExtra("stop");
        this.goToStop(tempStop);
    } 
```

但由于某种原因，它没有启动。我还有另一个案例：

```
if (i != null && i.getSerializableExtra("loc") != null) {
        this.displayLocations();
        this.goToLocation((Location) i.getSerializableExtra("loc"));
    } 
```

这工作得很好，并且意图启动器代码几乎完全相同。有任何想法吗？

编辑：我也在使用 SherlockListActivity，不确定这是否会改变任何东西。

```
<activity
        android:name=".(Obscured)MapActivity"
        android:configChanges="keyboardHidden|orientation|screenSize|uiMode|screenLayout" 
```

我很高兴提供更多信息，这已经困扰了我几个小时了。

答：发现问题。出于某种原因，当我添加可序列化的附加（停止）时，它会中断。注释掉 putExtra() 并且它有效。问题是试图序列化 GeoPoint。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:46:23.147

发现问题。出于某种原因，当我添加可序列化的附加（停止）时，它会中断。注释掉 setExtra() 并且它有效。不知道为什么它不会通过它，该类扩展了可序列化但我尝试的一切只是让它再次中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:03:55.727

我不确定这是否有帮助，但[JavaDocs](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.io.Serializable%29)`putExtra()`声明您**必须**在额外名称中包含包前缀：

> 名称必须包含包前缀，例如应用程序 com.android.contacts 将使用类似“com.android.contacts.ShowAll”的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:31:43.677

在 manifest.xml 中添加

```
<activity android:name=".MapActivity"
    android:configChanges="orientation|keyboardHidden" /> 
```

# objective-c - 如何在 Cocoa 中获取 JPEG 图像的压缩系数？

> ID：12500694
> 
> 赞同：1
> 
> 时间：2012-09-19T18:28:21.210
> 
> 标签：objective-c, cocoa, jpeg, nsimage

OSX 应用程序读取 JPEG 图像，进行一些处理，并打算以原始图像的压缩系数保存图像。

我偶然发现了原始图像的压缩系数。NSImage 类没有类似的东西。

NSBitmapImageRep 类有方便的方法：

```
- (void)getCompression:(NSTIFFCompression *)compressionfactor:(float *)factor
```

但是，如果我从使用 dataWithContentsOfFile 读取的 NSData 中获得 NSBitmapImageRep，我会得到零压缩因子。

任何想法，如何在 Cocoa 中获得 JPEG 图像的压缩系数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:22:03.343

使用[ImageMagick++](http://www.imagemagick.org/script/magick++.php)库很容易：

```
图像magick_image([路径名cStringUsingEncoding:NSUTF8StringEncoding]);
size_t 压缩因子 = magick_image.quality(); // 0..100

```

它是 Objective-C 和 C++ 的混合体，称为 Objective-C++。顾名思义，Magick++ 是 C++ 库，是 C 库 ImageMagick 的包装器。在上面的代码片段中 Image 是来自 Magick++ 库的 C++ 类。pathname 是 NSString Objective-C 类的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T18:20:06.157

你可以试试这个，但根据我的经验，它并不总是有效。

```
NSNumber* factor = [imageRep valueForProperty:NSImageCompressionFactor]; 
```

这是该属性的 Apple 文档，来自`NSBitmapImageRep`.

**NSImageCompressionFactor**

标识包含图像压缩因子的 NSNumber 对象。

仅用于 JPEG 文件。不支持 TIFF 文件中的 JPEG 压缩，并且忽略该因素。该值是介于 0.0 和 1.0 之间的浮点数，其中 1.0 导致不压缩，而 0.0 导致可能的最大压缩。它在读入时设置，在写出图像时使用。

在 OS X v10.0 及更高版本中可用。

# c# - 设计一个级联表

> ID：12500696
> 
> 赞同：0
> 
> 时间：2012-09-19T18:28:22.660
> 
> 标签：c#, asp.net-mvc, jquery

我想在已经存在的表中插入两行两列。

例如

这是一个默认的折叠表： ![折叠表](../Images/1943f240948c97b427f866e598875ea5.png)

这是我单击 [+] 符号时想要的扩展表 ![扩展表](../Images/abcf69255486eb475789db7e367df6da.png)

看法：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<dynamic>" %>

<div>
<table>
        <tr>
            <th>
                Collapse/Expand
            </th>
            <th>
                Student ID
            </th>

            <th>
                Quarter
            </th>
            <th>
                Level
            </th> 
            <th>
                Subject
            </th>
            <th >
                Section
            </th>                        
        </tr>
</table>
</div>

<div>
<table>
        <% if (Model != null)                    
           foreach (var item in Model) { %>
         <tr>
             <td>
                <img id="showDetails" class="showDetails" alt="showDetails" src="/Content/show.gif" onclick="javascript:showDetails()"/>
                <img id="hideDetails" class="hideDetails" alt="hideDetails" src="/Content/hide.gif" onclick="hideDetails()"/>
             </td>
            <td>
                <%= Html.Encode(item.StudentID)%>
            </td>

            <td>
                <%= Html.Encode(item.Quarter) %>
            </td>
            <td>
                <%= Html.Encode(item.Level) %>
            </td>
            <td>
                <%= Html.Encode(item.Subject) %>
            </td>
            <td>
                <%= Html.Encode(item.Section) %>
            </td>            
            <td>
            <%="..." %>
            </td>
            <td>
            <%="..." %>          
        </tr>      
    <%}%>
</table>
</div> 
```

jQuery：

```
$(function () {
    $(".showDetails").click(showDetails);
}); 
```

函数显示详细信息（）{

```
$('td:last').remove(); // removes the last two td elements
$('td:last').remove();
var link = '/Student/ShowDetails';
$.ajax({
    type: 'POST',
    url: link,
    data: { id: this.parentElement.nextSibling.innerText },
    dataType: 'json',
    success: function (result) {
        $.each(result.Details, function (item, value) {
            var Subject = '<td>' + value.subject.toString() + '</td>';
            var Section = '<td >' + value.section.toString() + '</td>';
            var appendRow = Subject + Section;
            $(appendRow).insertAfter('td:last');
        });
    },
    error: function (result) {
        alert("Failed")
    }
});
} 
```

控制器：

```
[HttpPost()]
public ActionResult ShowDetails(string id)
{
    DataContext db = new DataContext();

    var subject = (from p in db.vwStudentDetails.Where(p => p.StudentID == id)
                      group p by p.Subject into g
                      select g.Key).ToList();

    var section = (from p in db.vwStudentDetails.Where(p => p.StudentID == id)
                      group p by p.Section into g
                      select g.Key).ToList();

    return Json(new { subject, section});
} 
```

我应该如何处理这个？

# opencv - cvErode 错误 - 未知数组类型

> ID：12500704
> 
> 赞同：0
> 
> 时间：2012-09-19T18:28:52.933
> 
> 标签：opencv

在将图像转换为 YCrCb 图像空间后，我试图对 JPEG 图像进行腐蚀。使用以下代码

```
 YCrCbMin.val[0] = 0;
 YCrCbMin.val[1] = 131;
 YCrCbMin.val[2] = 80;

 YCrCbMax.val[0] = 255;
 YCrCbMax.val[1] = 185;
 YCrCbMax.val[2] = 135;

 imshow("img",Img);// Img is the JPEG image I load off the disk. 
 waitKey(0);

 Mat YCrCbImg;
 cvtColor(Img, YCrCbImg, CV_BGR2YCrCb);

 Mat erodedImg;
 inRange(YCrCbImg, YCrCbMin, YCrCbMax, erodedImg);

 Mat InterMediateImg     = YCrCbImg;
 IplConvKernel* element  = new IplConvKernel();

 element->nCols      = 12;   element->nRows      = 12;   element->anchorX    = 6;    element->anchorY    = 6;

  cvErode(&erodedImg, &InterMediateImg, element, 1);
  element->nCols      = 6;    element->nRows      = 6;    element->anchorX    = 3;    element->anchorY    = 3;
  cvDilate(&InterMediateImg, &erodedImg, element, 2); 
```

在第一次侵蚀时，我收到以下错误，如屏幕截图所示。

![错误图像](../Images/1cc3c39da183cac9720e222b14c17b9f.png)

我已使用以下图像作为输入

![索引.jpg](../Images/556abea38bcc4d603481f949e62658b3.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:20:56.137

当您调用`cvErode`and时可能会出现该错误`cvDilate`。您正在混合 C 和 C++ 接口。所以，例如，在

`cvErode(&erodedImg, &InterMediateImg, element, 1);`

`erodedImg`并且当它们应该是`InterMediateImg`type时是 type 。同样的事情。`cv::Mat``cvMat``cvDilate`

您可以使用新界面：

[简历::侵蚀](http://opencv.willowgarage.com/documentation/cpp/image_filtering.html#cv-erode)

```
void erode(const Mat& src, Mat& dst, const Mat& element, Point anchor=Point(-1, -1), int iterations=1, int borderType=BORDER_CONSTANT, const Scalar& borderValue=morphologyDefaultBorderValue()) 
```

和

[简历::扩张](http://opencv.willowgarage.com/documentation/cpp/image_filtering.html#cv-dilate)

```
void dilate(const Mat& src, Mat& dst, const Mat& element, Point anchor=Point(-1, -1), int iterations=1, int borderType=BORDER_CONSTANT, const Scalar& borderValue=morphologyDefaultBorderValue()) 
```

或转换`cv::Mat`为`cvMat` [（链接到备忘单）](http://opencv.willowgarage.com/documentation/cpp/c++_cheatsheet.html)：

`CvMat cvmat = img; // convert cv::Mat -> CvMat`

另请注意，当您调用这些函数时，目标矩阵不是空的，并且可能与源矩阵的类型不同，因此如果我没记错的话，您也有可能在此处运行错误。

[OpenCV 2.4.2 中不错的腐蚀和膨胀教程](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)

# scala - 方法如何接受 (T <: Seq)[A] 并返回 T[B] - 具有不同类型参数的相同类型的序列？

> ID：12500709
> 
> 赞同：4
> 
> 时间：2012-09-19T18:29:02.013
> 
> 标签：scala

我想实现一个方法，它接受一个元素类型的序列并返回一个不同元素类型的序列。我怎样才能一般地做到这一点，以便返回相同的 Sequence 子类？

我的方法目前看起来像这样：

```
def lookerUpper(ids : Seq[String], someOtherInfo : Int) : Seq[UsefulData] = {
    ... retrieve data for each id ...
} 
```

我希望它更通用，以便传入任何类型的（字符串）序列也是返回的（UsefulData）序列类型。尤其是矢量和列表，或者我们可以做到的一般性。

这可以用 Scala 的类型系统来表达吗？“返回与此参数相同的类型，但类型参数不同。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:53:06.737

要获得完整的答案，您应该查看我关于构建器的相当长的问题和答案（注意：截至 2012 年 9 月，Miles 的替代版本在 2.9 或最新的 2.10 中都不起作用）。

这是一个帮助您入门的框架（请注意显式和隐式参数块的奇怪格式，以避免在 SO 上显示过长的行）：

```
import collection.generic.CanBuildFrom

case class UsefulData(data: Int) {}

def lookerUpper[C[String]](
  ids: C[String], someOtherInfo: Int
)(
  implicit cbf: CanBuildFrom[C[String],UsefulData,C[UsefulData]],
  ev: C[String] => Iterable[String]
): C[UsefulData] = {
  val b = cbf()
  val i = ev(ids)
  i.foreach{ s => b += UsefulData(s.length + someOtherInfo) }
  b.result 
} 
```

并观察它是否有效：

```
scala> lookerUpper(Vector("salmon","cod"),2)
res0: scala.collection.immutable.Vector[UsefulData] = 
  Vector(UsefulData(8), UsefulData(5))

scala> lookerUpper(Array("salmon","cod"),2)
res1: Array[UsefulData] = 
  Array(UsefulData(8), UsefulData(5)) 
```

* * *

编辑：如果您只关心`TraversableLike`（`Array`不是）的子类，并且您将使用标准收集操作来完成所有工作，那么您可以使用Luigi 指出[的 8609398 的答案。](https://stackoverflow.com/questions/8609398)（也许我应该把这个答案作为另一个视角移到那里。）

# java - 创建 Maven 原型

> ID：12500710
> 
> 赞同：3
> 
> 时间：2012-09-19T18:29:06.613
> 
> 标签：java, maven, maven-archetype

我有一些 Eclipse maven 项目，我通常会*复制并粘贴/修改*它作为“模板”应用程序。我怎样才能使它成为一个 maven 原型，以便我可以使用 maven 创建这些模板项目，并且可能在哪里发布它的最佳位置？

这样我就可以做类似的事情：

```
mvn archetype:generate -DarchetypeRepository=repo1.maven.org -DarchetypeGroupId=org.codehaus.mojo -DarchetypeArtifactId=gwt-maven-plugin -DarchetypeVersion=2.3.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:23:17.943

试试看这个：

*   **这本来自 Sonatype 的优秀书籍**：http : [//books.sonatype.com/mvnref-book/reference/archetypes.html](http://books.sonatype.com/mvnref-book/reference/archetypes.html)
*   **官方文档** [http://maven.apache.org/guides/mini/guide-creating-archetypes.html](http://maven.apache.org/guides/mini/guide-creating-archetypes.html)（见 Noahz 的评论）

使用 maven 官方网站，这是文档。

这些教程可能对您有所帮助，而不仅仅是我们的答案之一。

关于位置，您应该将它们放入您的公司存储库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T09:30:28.507

我最近不得不这样做，我写了一个可能有帮助的教程。它使用 Eclipse，并就如何创建目录、使用条件语句以及在 Eclipse 中安装它提供了一些指导。

那里还有原型本身的下载，因此您可以自由复制它。它是一个真正的救生员，所以我希望它也能帮助你：

[https://www.aplossystems.co.uk/article/create-a-maven-archetype.aplos?content_id=1&cp_id=28](https://www.aplossystems.co.uk/article/create-a-maven-archetype.aplos?content_id=1&cp_id=28)

# asp.net - 了解如何解密下载令牌

> ID：12500714
> 
> 赞同：0
> 
> 时间：2012-09-19T18:29:26.023
> 
> 标签：asp.net

我试图弄清楚如何解密在以下帖子中创建的下载令牌[https://stackoverflow.com/a/4324115/487892](https://stackoverflow.com/a/4324115/487892)

```
public static string GetDownloadToken(int fileId)
{
    byte[] idbytes = BitConverter.GetBytes(fileId); // 4 bytes 
    byte[] dateTimeBytes = BitConverter.GetBytes(DateTime.Now.ToBinary()); // 8 bytes
    byte[] buffer = new byte[16]; // minimum for an encryption block 
    string password = "password";

    byte[] passwordBytes = Encoding.ASCII.GetBytes(password);
    Array.Copy(idbytes, 0, buffer, 0, idbytes.Length);
    Array.Copy(dateTimeBytes, 0, buffer, idbytes.Length, dateTimeBytes.Length);
    byte[] encryptedBuffer = new byte[256]; 
    using (SHA1CryptoServiceProvider sha1 = new SHA1CryptoServiceProvider())
    {
        int count = sha1.TransformBlock(buffer, 0, buffer.Length, encryptedBuffer, 0);
        return Convert.ToBase64String(encryptedBuffer, 0, count);
    }
} 
```

我的主要兴趣是如何取回日期，以便可以将其与当前日期进行比较，以便在一段时间后使令牌过期？这不是在做单向哈希吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T18:45:01.803

这里的“加密”并不是真正的加密，而是“散列”。通过加密，您可以加密（使数据不可读）和解密（使其再次可读）。

散列的过程是不可逆的，即您不能从散列函数计算的值中检索原始数据，在本例中为 sha1.TransformBlock(..)。

如果你真的想用解密的能力进行加密，你需要使用不同的机制——即不是散列函数。

这是一个非常详细的 SO 链接，它提供了更多信息：[哈希和加密算法之间的基本区别](https://stackoverflow.com/questions/4948322/fundamental-difference-between-hashing-and-encryption-algorithms)

对我来说，您的选择似乎是：

1.  使用加密算法而不是散列算法
2.  更改方法以返回包含“encryptedBuffer”作为日期/时间对象作为成员的对象类型

# c# - 在 ASP.NET C# 中打开文件（pdf 或 jpg）后如何不更改网页中的字体？

> ID：12500716
> 
> 赞同：0
> 
> 时间：2012-09-19T18:29:26.957
> 
> 标签：c#, asp.net, file, fonts

> **可能重复：**
> [在 ASP.NET C# 中打开 pdf 后如何不更改网页中的字体？](https://stackoverflow.com/questions/12499254/how-to-not-alter-font-in-webpage-after-opening-a-pdf-in-asp-net-c)

之前我发过这个问题：

[如何在 ASP-NET c# 中从特定路径打开文件？](https://stackoverflow.com/questions/12498618/how-to-open-files-from-a-specific-route-in-asp-net-c)

事实上，我已经问过这个问题，但这只是一个小问题，所以我想这在上一篇文章中并不那么重要，所以我会在这里问。

每当我打开pdf时：

```
Response.Write("<script>window.open('FilePath');</script>"); 
```

页面中的所有字体都被改变了，例如，字母的大小增加了，一些字母的颜色变成了黑色，而不是我指定的字体。

有没有办法可以解决这个问题？

[http://imageshack.us/a/img838/5145/beforeja.png](http://imageshack.us/a/img838/5145/beforeja.png)

[http://imageshack.us/a/img546/4760/afterw.png](http://imageshack.us/a/img546/4760/afterw.png)

哦，我注意到当你打开像 jpg 这样的图像时也会发生这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:24:23.240

我不确定直接用 Response.Write 写是在这种特殊情况下的最佳解决方案。我对此的记忆很模糊，但似乎我（很久以前）尝试通过 Response.Write 直接写入输出并遇到了一些奇怪的行为，就像你描述的那样。其他 SO 成员应该能够更好地详细说明为什么会发生这种情况，但我*认为*这与您在页面生命周期和 IIS 流中所处的位置有关 Response.Write 是否会实现所需的行为。如果你想将文件直接推送到客户端，你可以考虑 MVC。MVC 使得通过 FilePathResult 类将文件直接推送到客户端变得更加容易。如果您愿意，可以混合搭配 MVC 和 WebForms。[Scott Hansleman在这里](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)展示了如何做到这一点。

但是，如果您想坚持使用 WebForms，那么这是我整理的一个简单页面，以展示如何使用 RegisterStartupScript 通过单击相应的按钮打开两个本地 PDF 中的任何一个：

**ASPX：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Register Startup Script Example</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="bnOpenTest1PDF" runat="server" 
         OnClick="opnTest1PDF" Text="OpenPDF1" />
        <asp:Button ID="bnOpenTest2PDF" runat="server" 
         OnClick="opnTest2PDF" Text="OpenPDF2" />
    </div>
    </form>
</body>
</html> 
```

**代码背后：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
    protected void opnTest1PDF(Object sender, EventArgs e)
    {
        Page.ClientScript.RegisterStartupScript(
            this.GetType(),
            "myFileOpenScript",
            "<script>window.open('test1.pdf');</script>");
    }

    protected void opnTest2PDF(Object sender, EventArgs e)
    {
        Page.ClientScript.RegisterStartupScript(
            this.GetType(),
            "myFileOpenScript",
            "<script>window.open('test2.pdf');</script>");
    }
} 
```

# visual-studio-2010 - 在文本框中写入变量值，Visual C++

> ID：12500720
> 
> 赞同：0
> 
> 时间：2012-09-19T18:29:52.893
> 
> 标签：visual-studio-2010, visual-c++, textbox, variable-assignment

我的代码有问题。我需要在文本框中显示存储在变量**rawValue中的值。**

这是我的代码中对问题很重要的部分：

```
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
    }
private: System::Windows::Forms::Button^  IniciarCaptura;
private: System::Windows::Forms::DataVisualization::Charting::Chart^  chart1;
private: System::Windows::Forms::Label^  label1;
private: System::Windows::Forms::Label^  label2;
private: System::Windows::Forms::Label^  label3;
private: System::Windows::Forms::TextBox^  textBoxRAW;
private: System::Windows::Forms::TextBox^  textBoxAtencao;
private: System::Windows::Forms::TextBox^  textBoxMeditacao;

protected: 

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        System::Windows::Forms::DataVisualization::Charting::ChartArea^  chartArea1 = (gcnew System::Windows::Forms::DataVisualization::Charting::ChartArea());
        System::Windows::Forms::DataVisualization::Charting::Legend^  legend1 = (gcnew System::Windows::Forms::DataVisualization::Charting::Legend());
        System::Windows::Forms::DataVisualization::Charting::Series^  series1 = (gcnew System::Windows::Forms::DataVisualization::Charting::Series());
        this->IniciarCaptura = (gcnew System::Windows::Forms::Button());
        this->chart1 = (gcnew System::Windows::Forms::DataVisualization::Charting::Chart());
        this->label1 = (gcnew System::Windows::Forms::Label());
        this->label2 = (gcnew System::Windows::Forms::Label());
        this->label3 = (gcnew System::Windows::Forms::Label());
        this->textBoxRAW = (gcnew System::Windows::Forms::TextBox());
        this->textBoxAtencao = (gcnew System::Windows::Forms::TextBox());
        this->textBoxMeditacao = (gcnew System::Windows::Forms::TextBox());
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->chart1))->BeginInit();
        this->SuspendLayout();
        // 
        // IniciarCaptura
        // 
        this->IniciarCaptura->Location = System::Drawing::Point(15, 443);
        this->IniciarCaptura->Name = L"IniciarCaptura";
        this->IniciarCaptura->Size = System::Drawing::Size(75, 23);
        this->IniciarCaptura->TabIndex = 0;
        this->IniciarCaptura->Text = L"Iniciar";
        this->IniciarCaptura->UseVisualStyleBackColor = true;
        this->IniciarCaptura->Click += gcnew System::EventHandler(this, &Form1::IniciarCaptura_Click);
        // 
        // chart1
        // 
        chartArea1->Name = L"ChartArea1";
        this->chart1->ChartAreas->Add(chartArea1);
        legend1->Name = L"Legend1";
        this->chart1->Legends->Add(legend1);
        this->chart1->Location = System::Drawing::Point(15, 99);
        this->chart1->Name = L"chart1";
        series1->ChartArea = L"ChartArea1";
        series1->Legend = L"Legend1";
        series1->Name = L"Series1";
        this->chart1->Series->Add(series1);
        this->chart1->Size = System::Drawing::Size(300, 300);
        this->chart1->TabIndex = 1;
        this->chart1->Text = L"chart1";
        // 
        // label1
        // 
        this->label1->AutoSize = true;
        this->label1->Font = (gcnew System::Drawing::Font(L"Microsoft Sans Serif", 8.25F, System::Drawing::FontStyle::Bold, System::Drawing::GraphicsUnit::Point, 
            static_cast<System::Byte>(0)));
        this->label1->Location = System::Drawing::Point(12, 13);
        this->label1->Name = L"label1";
        this->label1->Size = System::Drawing::Size(36, 13);
        this->label1->TabIndex = 2;
        this->label1->Text = L"RAW";
        // 
        // label2
        // 
        this->label2->AutoSize = true;
        this->label2->Font = (gcnew System::Drawing::Font(L"Microsoft Sans Serif", 8.25F, System::Drawing::FontStyle::Bold, System::Drawing::GraphicsUnit::Point, 
            static_cast<System::Byte>(0)));
        this->label2->Location = System::Drawing::Point(12, 40);
        this->label2->Name = L"label2";
        this->label2->Size = System::Drawing::Size(54, 13);
        this->label2->TabIndex = 3;
        this->label2->Text = L"Atenção";
        // 
        // label3
        // 
        this->label3->AutoSize = true;
        this->label3->Font = (gcnew System::Drawing::Font(L"Microsoft Sans Serif", 8.25F, System::Drawing::FontStyle::Bold, System::Drawing::GraphicsUnit::Point, 
            static_cast<System::Byte>(0)));
        this->label3->Location = System::Drawing::Point(12, 69);
        this->label3->Name = L"label3";
        this->label3->Size = System::Drawing::Size(66, 13);
        this->label3->TabIndex = 4;
        this->label3->Text = L"Meditação";
        // 
        // textBoxRAW
        // 
        this->textBoxRAW->Location = System::Drawing::Point(78, 5);
        this->textBoxRAW->Name = L"textBoxRAW";
        this->textBoxRAW->Size = System::Drawing::Size(355, 20);
        this->textBoxRAW->TabIndex = 5;
        this->textBoxRAW->TextChanged += gcnew System::EventHandler(this, &Form1::textBoxRAW_TextChanged);
        // 
        // textBoxAtencao
        // 
        this->textBoxAtencao->Location = System::Drawing::Point(78, 33);
        this->textBoxAtencao->Name = L"textBoxAtencao";
        this->textBoxAtencao->Size = System::Drawing::Size(355, 20);
        this->textBoxAtencao->TabIndex = 6;
        // 
        // textBoxMeditacao
        // 
        this->textBoxMeditacao->Location = System::Drawing::Point(78, 62);
        this->textBoxMeditacao->Name = L"textBoxMeditacao";
        this->textBoxMeditacao->Size = System::Drawing::Size(355, 20);
        this->textBoxMeditacao->TabIndex = 7;
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(448, 484);
        this->Controls->Add(this->textBoxMeditacao);
        this->Controls->Add(this->textBoxAtencao);
        this->Controls->Add(this->textBoxRAW);
        this->Controls->Add(this->label3);
        this->Controls->Add(this->label2);
        this->Controls->Add(this->label1);
        this->Controls->Add(this->chart1);
        this->Controls->Add(this->IniciarCaptura);
        this->Name = L"Form1";
        this->Text = L"Form1";
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->chart1))->EndInit();
        this->ResumeLayout(false);
        this->PerformLayout();

    }
#pragma endregion
static void handleDataValueFunc(unsigned char extendedCodeLevel, unsigned char code,
    unsigned char valueLength, const unsigned char *value, void *customData)
{
    /*FILE *arq1;
    FILE *arq2;
    FILE *arq3;
        arq1 = fopen("raw.txt","a");
        arq2 = fopen("atencao.txt","a");
        arq3 = fopen("meditacao.txt","a");*/

    if (extendedCodeLevel == 0 && code == RAW_WAVE_CODE)
    {
        short rawValue = ((value[0] << 8) & 0xff00) | (0x00ff & value[1]);
        /*printf("%d\n", rawValue);
        fprintf(arq1,"%d\n",rawValue);*/

        textBoxRAW.SetWindowText(textBoxRAW.text + "" + rawValue + " ");
    } 
```

我收到以下错误：

```
error C2228: left of '.Text' must have class/struct/union 
```

这是错误所在的行：

```
textBoxRAW.SetWindowText(textBoxRAW.text + "" + rawValue + " "); 
```

我怎么解决这个问题？我见过一些代码示例，人们会简单地编写“TextBox->Text”之类的内容，但它不适用于我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:19:21.283

从您的帖子中，我认为您倾向于忽略大小写。C++ 区分大小写；因此，文本和文本是不同的。您必须使用 -> 范围运算符进行引用。正确的语法：

```
 textBoxRAW->Text  = textBoxRAW->Text  + " " + rawValue + " "; 
```

# security - 在 Google Inspector 中更改 HTML

> ID：12500725
> 
> 赞同：1
> 
> 时间：2012-09-19T18:30:16.827
> 
> 标签：security, google-chrome, web-inspector

我知道打开 Google Inspect Element 并更改任何给定站点的 HTML、CSS 或其他内容是很有可能的。

不过，我的问题是，这真的不是安全威胁吗？或者至少对您网站的完整性构成威胁。假设您有一个用 PHP 完成的网站，并且在脚本中您希望从表单中发送 POST，但是有人在 Inspect Element 中打开了您的站点，并将表单更改为 GET。您的网站无法正常运行，对吗？

我不得不想象一些精通黑客的流氓可以对此造成一些损害，不是吗？我自己并不精通黑客，所以我不知道他们能做什么，但我必须想象最坏的情况。

那么这是我们在开发网站时应该考虑的另一件事吗？人们如何更改 HTML？我的意思是，我理解需要去掉标签以及所有这些来保护您的网站免受恶意用户输入的影响，但是不得不担心他们如何在他们眼前实际更改网站有点荒谬。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:59:33.807

不，这**绝不**是安全威胁。一点也不。真正的黑客会使用[BURP](http://www.portswigger.net/burp/proxy.html)（或类似的代理）来利用糟糕的 Web 应用程序，这通常比修改 JavaScript 的 HTML 更容易。

能够修改客户端脚本是显而易见的，这不是威胁。只有当一个天真的开发人员依赖这些控制来确保安全时，才会产生威胁，在这个行业中，我们称之为[CWE-602](http://cwe.mitre.org/data/definitions/602.html)违规。您永远不能信任客户端，这是 Web 应用程序安全的基础。 **所有与安全相关的控制都必须在服务器端。**

# php - php 会话和数组

> ID：12500727
> 
> 赞同：1
> 
> 时间：2012-09-19T18:30:20.133
> 
> 标签：php, arrays, session

我有一个存储在数组中的会话，我想知道如果该人访问同一页面，它不会将其添加到数组中，并且如果数组值为空，则不回显结果，我将如何处理，这是一个例子

```
$SESSION['image'][0] => page1 
```

他们访问了 page1，因此它被记录下来。现在，如果他们回到页面，数组看起来像这样

```
$SESSION['image'][0] => page1
$SESSION['image'][1] => page1 
```

我还回显了最近访问的 3 个页面的标题和缩略图，但是如果他们清除了历史记录或第一次访问该站点，则图像会损坏，因为数组中没有数据。这是我尝试过的

```
if(!empty($_SESSION['image'][1]) {
echo ' <div>$_SESSION[/'image/'][1]</div>
} 
```

我用它来保持数组更新前 4 个

```
if (!isset($_SESSION['image']))
{
$_SESSION['image'] = array();
}
array_unshift($_SESSION['image'], $rentals['Image']);
if (count($_SESSION['image']) > 4)
{
array_pop($rentals['Image']);
} 
```

但是，是否有更好的方法将数组保持在 4 个值并在 4 个值之后转储值？

哇，这是一个很长的问题，我很抱歉：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:54:45.317

我认为[array_slice](http://php.net/manual/ru/function.array-slice.php)函数是保持数组大小在界限内所需的。看一下这个：

```
<?php 
$a = array(1);
print_r(array_slice($a, -4));

$a = array(1, 2, 3, 4, 5);
print_r(array_slice($a, -4)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:03:30.790

使用 in_array 检查图像数组以确保尚未设置该值。如果数组为 4 或更大，则不要设置任何内容。

```
if (!in_array($SESSION['image'], $page) && count($SESSION['image']) <= 4) {
    $SESSION['image'][] = $page;
} 
```

# css - \ 在 css 十六进制颜色符号中是什么意思？

> ID：12500732
> 
> 赞同：15
> 
> 时间：2012-09-19T18:30:44.957
> 
> 标签：css

我很好奇这样的事情在 CSS 中意味着什么：

```
background-color: #080808 \9; 
```

我当然知道十六进制颜色符号，但我以前从未见过 \9 使用过。即使看 w3c，我也不确定他们是否定义它：[颜色单位](http://dev.w3.org/csswg/css3-color/#colorunits)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T18:33:02.140

这是一个旧的 Internet Explorer hack

> *\9 hack 适用于：IE8 IE8 标准、IE8 IE7 标准、IE8 Quirks 模式、IE7 Quirks、IE7 标准（所有种类的 IE8）、IE6*
> 
> *因此，简而言之，如果您想要一个适用于所有 IE 风格的 IE CSS hack，请使用反斜杠九 hack。*

[**来源**](http://webdood.com/?p=57)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:46:37.410

> # 2 特定于资源管理器的 CSS 规则（IE CSS hacks）
> 
> 另一种选择是声明只能由 Explorer 读取的 CSS 规则。例如，在 CSS 属性将针对 IE7 之前添加一个星号 (*)，或者在该属性针对 IE6 之前添加一个下划线。但是，不推荐使用此方法，因为它们不是有效的 CSS 语法。
> 
> ```
> IE8 or below: to write CSS rules specificially to IE8 or below, add a backslash and 9 (\9) at the end before the semicolon. 
> ```

[在这里](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)找到。我必须感谢@Zoltan，因为在他发布之前我不知道该谷歌搜索什么。

它也有一些其他的 IE 特定的 web 东西的例子。就像条件注释一样，它有助于仅在 IE 中加载内容以处理 IE 独特情况。

# jquery - HtmlService：导入到html后类型改变？

> ID：12500734
> 
> 赞同：0
> 
> 时间：2012-09-19T18:31:03.077
> 
> 标签：jquery, google-apps-script

我试图让[jquery 自动完成](http://jqueryui.com/demos/autocomplete/)功能在 HtmlService 模板中工作。当我输入它时，函数内部生成的数组按预期工作。这个想法是提供来自 ScriptDb 数据库的数据，我编写了一个函数，该函数从数据库返回一个数组（按预期返回一个数组）：

```
function doGet(e) {
  var htmlTemplate = HtmlService.createTemplateFromFile('Search');
  htmlTemplate.diseases = ['aname','bname','cname','dname','ename','fname','gname'];
  Logger.log(htmlTemplate.diseases instanceof Array);
  return htmlTemplate.evaluate();
} 
```

在这种情况下，Logger 返回 true。

```
<!DOCTYPE html>
<html>
  <head>
    <!-- <title>The Disease Database</title> -->

    <meta name="author" content="M. Oranje" />
    <meta name="description" content="My personal disease database" />

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/smoothness/jquery-ui.css" rel="Stylesheet" />
  </head>
  <body>

    <form action="https://script.google.com/macros/s/AKfycbxHmY6ejv8SnmnOupKKrieImaPTbCZAdtuQl_n8z78/dev" method="POST" id="diseases-form">

      <div id="page">

        <div class="search">
          <div class="name" name="name" id="name">Search</div>
          <div class="search_input"><input name="search" id="search" type="text"></div>
        </div>

      </div>

    </form>
    <script>
      $(function() {
    var tags = <?= diseases ?>;
      alert(tags instanceof Array);
    $( "#search" ).autocomplete({
      source: tags
    });
  });
    </script>

  </body>
</html> 
```

然而，这里的警报返回 false，并且强制打印数组返回引用错误（'aname is not defined'）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:58:04.737

解决了！JSON.stringify() 需要正确转换。

```
$(function() {
    var tags = <?!= JSON.stringify(diseases) ?>;
    $( "#search" ).autocomplete({
      source: tags
    });
  }); 
```

# node.js - 从 Node.js C++ 模块导出整数值

> ID：12500737
> 
> 赞同：1
> 
> 时间：2012-09-19T18:31:08.277
> 
> 标签：node.js

我正在为 Node.js 编写一个包含 C 库的 C++ 模块，因此我们可以使用 JavaScript 中的 C 库。C 库中的一个函数采用枚举参数，枚举值包含在相应的头文件中。我想将枚举值作为整数从 C++ 模块导出，这样 Node.js 应用程序就不必对值进行硬编码。这是基本思想：

C：

```
typedef enum 
{
    LOGLEVEL_ERROR = 0,
    LOGLEVEL_WARN,
    LOGLEVEL_INFO
} log_level_t;

write_to_log(log_level_t level, char* message); 
```

C++：

```
Logger::Write(int level, char* message)
{
    write_to_log(level, message);
} 
```

节点.js：

```
// This is what I want:
logger.write(logger.ERROR, "Oh no!  Something bad happened."); 
```

如何`LOGLEVEL_ERROR`从 C++ 中公开以便可以`logger.ERROR`在 JS 中使用？（我什至可以`logger.LOGLEVEL_ERROR`在 JS 中使用。）我发现了一个使用宏的旧 Node.js 本机模块，`EXPORT_INT32`但这似乎不再存在（我使用的是 Node.js 0.8.8）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:43:37.947

将数字包装起来，如下所示：

```
HandleScope scope;

/** method code here **/

Local<Number> num = Number::New(5);
return scope.Close(num); 
```

以我的模块`kexec`为例：[https ://github.com/jprichardson/node-kexec/blob/master/src/kexec.cc](https://github.com/jprichardson/node-kexec/blob/master/src/kexec.cc)

**编辑：**哎呀，我没有完全清楚地阅读你的问题。我会在 JS 中声明这些值。

**编辑 2：**经过进一步检查，似乎有点哈利，但有可能。看来您可能想使用[V8 Juice](http://code.google.com/p/v8-juice/)。

这是相关部分：[转换枚举](http://code.google.com/p/v8-juice/wiki/ConvertingTypes#Converting_Enums)

希望这对一些人有所帮助，但最简单的方法是在 JavaScript 中声明它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:52:35.863

这就是我最终做的事情：

```
Local<Object> instance = constructor->NewInstance(2, argv);

Local<Object> logLevel = Object::New();
logLevel->Set(String::NewSymbol("ERROR"), cvv8::CastToJS(LOGLEVEL_ERROR), ReadOnly);
logLevel->Set(String::NewSymbol("WARN"), cvv8::CastToJS(LOGLEVEL_WARN), ReadOnly);
logLevel->Set(String::NewSymbol("INFO"), cvv8::CastToJS(LOGLEVEL_INFO), ReadOnly);

instance->Set(String::NewSymbol("Level"), logLevel, ReadOnly); 
```

然后，您可以从 JavaScript 访问`logger.Level.ERROR`.

# c - 理解给定的代码

> ID：12500741
> 
> 赞同：1
> 
> 时间：2012-09-19T18:31:18.690
> 
> 标签：c, x86

如果有人帮助我理解以下代码，我将不胜感激谢谢

```
if (iins->uInstr.mnemonic == UD_Ipop)
    regsUsed = (regsUsed & ~(LYNX_ESP | LYNX_SP)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:33:08.540

如果助记符是，`UD_Ipop`则不使用`LYNX_ESP`and`LYNX_SP`寄存器。

更多： `LYNX_ESP`并且`LYNX_SP`将具有仅设置一位的值。比方说`LYNX_ESP`is`0x01`和`LYNX_SP`is `0x02`。

```
(LYNX_ESP | LYNX_SP) -> (0x01 | 0x02) -> 0x03  (00000011b)
~(LYNX_ESP | LYNX_SP) -> 0xfc                  (11111100b)

regsUsed can be anything; ????????b
(regsUsed & ~(LYNX_ESP | LYNX_SP)) -> (????????b & 11111100b) -> ??????00b 
```

所以它关闭代表`LYNX_ESP`和`LYNX_SP`的位，`regsUsed`并保持其他位不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:37:55.023

第二行相当于`regUsed &= ~(LYNX_ESP | LYNX_SP);`（我很难想象为什么有人会这样写）。

推测 LYNX_ESP 和 LYNX_SP 是（可能）在每个中设置一个位的值，例如：

```
LYNX_EAX 1    ; 00000001b
LYNX_EBX 2    ; 00000010b
LYNX_ECX 4    ; 00000100b
; ...
LYNX_SP 64    ; 01000000b
LYNX_ESP 128  ; 10000000b 
```

`Or`将这些 ( `(LYNX_SP | LYNX_ESP)`) 设置为两个位都设置的值。`not`对该 ( )进行逐`~`位操作会反转所有位，因此这两个位将被清除，并且所有其他位都将被设置。然后它`and`在结果值和 的当前值之间进行逐位处理`regsUsed`，这会清除这两个位，并保持所有其他位不变。

从更高的层次来看，我猜它使用的是负（低电平有效）逻辑——即，有一点被清除`regsUsed`表明寄存器*正在*使用中。从更高的角度来看，它基本上是说`pop`像这样的指令`pop ebx`不仅使用`EBX`，而且*还*使用`SP`/ `ESP`。

至于你为什么关心：这是 CPU 用来确定何时/是否可以并行执行指令的事情。例如，如果你有类似的东西：

```
pop ecx
pop ebx
pop eax 
```

您不能轻松地并行执行所有这三个操作，这并不是（必然）立即显而易见的。每个都写入一个不同的寄存器，*但*所有三个都依赖并修改`SP`/中的值`ESP`- 您上面的代码似乎专门用于提取/跟踪这种依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:35:12.077

'如果 ulnstr.mneminic 等于 UD_lpop 则在 regsUsed 中清除所有在 LYNX_ESP 和/或 LYNX_SP 中设置为 1 的位

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T18:38:16.030

该代码正在执行按位数学运算以设置某些标志。我不会在这里快速写一个不充分的解释，而是将你链接到[这篇文章](http://www.codeproject.com/Articles/13740/The-Beginner-s-Guide-to-Using-Enum-Flags)，它解释了发生了什么。

# intellij-idea - Intellij IDEA 工作流/快捷方式重构代码库以将一个类的方法调用替换为另一个类的方法

> ID：12500742
> 
> 赞同：1
> 
> 时间：2012-09-19T18:31:19.220
> 
> 标签：intellij-idea

`ClassA.doSomething(blah)`在 Intellij IDEA 中，用另一个类 [ ]替换来自一个类 [] 的方法调用的最简单方法是什么`ClassB.doSomethingElse(blah)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:24:37.887

里面`ClassA.doSomething(blah)`写`ClassB.doSomethingElse(blah)`，然后`Refactor`| **内联...**上`ClassA.doSomething(blah)`。

# asp.net - ReportViewer 中的 OutOfMemoryException

> ID：12500745
> 
> 赞同：0
> 
> 时间：2012-09-19T18:31:36.683
> 
> 标签：asp.net, rdlc

我有一个报表查看器，在本地模式下运行。它只显示对象列表，没有聚合函数或硬计算。

我们的对象有 27 个字符串属性，数据库中大约有 250000 条记录 - 在应用任何过滤器之前。所以reportViewer 会抛出OutOfMemoryException。

Linq 延迟加载对我们没有帮助 - 报告仅加载前 50 条记录，甚至不显示分页控件

您对如何解决此问题有任何想法吗？我只有一个选择 - 需要一个过滤器，所以我们的结果列表会小得多。

但也许还有其他更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:36:22.630

我没有时间写一个工作示例，但这里是一个可能的解决方案的要点。

(1) 实际上并不在标记中显示 ReportViewer。我想象当 ReportViewer 创建一个大报告时，整个事情可能作为一个字节数组在内存中。

（2）动态创建它，然后像这样调用render：

```
Viewer.LocalReport.Render(format, "", PageCountMode.Estimate, CreateStream, out warnings); 
```

(3) CreateStream 是这样的委托：

```
 private Stream CreateStream(string name, string fileNameExtension, Encoding encoding,
                              string mimeType, bool willSeek)
        {
            Stream stream = new FileStream(name + "." + fileNameExtension, FileMode.Create);
            return stream;
        } 
```

因此，结果以流的形式写入文件。DataTable 的大小可能仍会导致 OOM 异常，因此您可能希望使用 DbDataReader 提供数据，使用这种类型的 ReportDataSource

```
public ReportDataSource(string name, IEnumerable dataSourceValue); 
```

有可能上述建议中，您只需要从 DataTable 切换到 DataReader 即可。

# objective-c - Mountain Lion 特权助手守护进程状态

> ID：12500751
> 
> 赞同：3
> 
> 时间：2012-09-19T18:31:51.863
> 
> 标签：objective-c, cocoa, osx-lion, macos-carbon, launchd

我正在为 10.8+ 构建一个应用程序，其中必须修补文件。由于这个功能，我创建了一个“PrivilegedHelperTool”并安装为 KeepLive = YES RunAtLoad = YES（所以它一直在运行）。我还使用 XPC over mach 与 GUI 应用程序（菜单栏）进行通信

我希望能够检查“PrivilegedHelperTool”是否已安装并运行，到目前为止，我发现检查安装的最佳方法是在 /Library/LaunchDaemons/ 中查找 plist 并检查二进制文件是否在 /库/PrivilegedHelperTools 。

这真的是最好的方法吗？

此外，我还没有找到可靠的方法来检查 PrivilegedHelperTool（以 root 身份运行）是否已经是 root（例如 sudo launchctl list）

我添加了一个使用launch.h（/usr/include/launch.h）[http://brockerhoff.net/blog/2009/02/02/cocoa-musings-pt-3/](http://brockerhoff.net/blog/2009/02/02/cocoa-musings-pt-3/)的包装器， 但它只返回用户进程和让最终用户提升权限只是为了检查一些“插件”是否正在运行似乎是错误的。

我能期望的最好的结果是尝试与我的服务交谈，如果它没有响应就认为它“损坏或没有运行”，这是真的吗？（[http://mac-os-forge.2317878.n4.nabble.com/Programmatic-interface-to-launchctl-and-some-other-questions-OS-X-10-5-tp189494p189496.html](http://mac-os-forge.2317878.n4.nabble.com/Programmatic-interface-to-launchctl-and-some-other-questions-OS-X-10-5-tp189494p189496.html)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T11:55:33.000

您可以使用`sysctl`来获取所有正在运行的进程。看看[我的回答](https://stackoverflow.com/a/18821357/944634)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:09:47.423

当您安装后台助手守护程序时，您需要是 root。因此，要么您的安装程序使用适当的权限安装守护程序，要么在您启动应用程序时，您要求用户将自己授权为管理员，以便您可以即时安装守护程序。

这是一个从应用程序中获取根的代码片段。它会在从 pkg 安装某些东西时使用正常的用户名/密码对话框提示用户。

```
OSStatus myStatus;
uid_t   uid = -1;
AuthorizationRights myRights;
AuthorizationFlags myFlags;
AuthorizationItem myItems[1];

uid = geteuid();
if(uid != 0)
{
    myItems[0].name = "com.whatever";
    myItems[0].valueLength = 0;
    myItems[0].value = NULL;
    myItems[0].flags = 0;
    myRights.count = sizeof (myItems) / sizeof (myItems[0]);
    myRights.items = myItems;
    myFlags = kAuthorizationFlagDefaults |
        kAuthorizationFlagInteractionAllowed |
        kAuthorizationFlagExtendRights |
        kAuthorizationFlagPartialRights;
    myStatus = AuthorizationCreate (&myRights, kAuthorizationEmptyEnvironment,myFlags,NULL);
} 
```

# objective-c - 是否有更改 UIView 坐标系的属性或 API？

> ID：12500753
> 
> 赞同：0
> 
> 时间：2012-09-19T18:31:54.340
> 
> 标签：objective-c

我正在尝试制作折线图对象。

因此，我搜索了各种方法来将 UIView 的坐标系从左上更改为左下。

首先，我想知道苹果的 API 是否支持函数、方法或属性。

有这样的吗？

![在此处输入图像描述](../Images/ca05afcfe32820f69f856b6d1fdc514d.png)

# jquery - jQuery over Jquery mobile 用于普通 Web 应用程序以处理多个设备

> ID：12500754
> 
> 赞同：-2
> 
> 时间：2012-09-19T18:32:00.740
> 
> 标签：jquery, html, mobile, tablet, touchscreen

**背景**

我正在开发一个类似于 trello 的 Web 应用程序，其中一个页面被分成列，并且可以将任务/卡片添加到每一列，或者在它们之间拖放。

这将主要基于桌面并具有更多功能，例如左侧信息列，以及通过添加更多列和更改样式等来创建自定义布局的能力。

通常我会在 HTML 和 CSS 中使用 JQuery 来构建这个功能。

**问题/问题**

尽管它主要用于桌面使用，但我们也知道它很可能用于 iPad 或 Surface 等平板设备。此外，随着 Windows 8 的推出，一些台式机将开始拥有更多我们想要满足的触控界面。

我的问题是，使用 jQuery Mobile 而不是 jQuery 本身来构建它是否明智，因为我听说标准 jQuery 并没有真正设置为很好地处理触摸屏交互。另一方面，从我所看到的 jQuery mobile 看来，它似乎非常关注布局和样式，这可能是非常定制的。

不想使用 jQuery Mobile 并最终不得不删除、覆盖或隐藏样式和功能以使其按我的意愿工作，但同时又不想使用 jQuery Standard，它不适用于平板电脑和触摸设备。

Dot 一定会担心移动设备，因为由于屏幕尺寸的原因，我可能不得不专门开发移动版本。

谢谢肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:37:21.553

如果您希望在没有所有 jquery 移动视觉样式的情况下为您的 web 应用程序添加触摸兼容性，您应该看看[Hammer.js](http://eightmedia.github.com/hammer.js/)

它是一个支持许多常见触摸事件的 javascript 库，例如：

```
1\. Tap 
2\. Double-Tap 
3\. Swipe 
4\. Hold 
5\. Transform 
6\. Drag 
```

以与浏览器无关的方式

# magento - 如何自定义 Magento 主题并保留其源代码

> ID：12500756
> 
> 赞同：4
> 
> 时间：2012-09-19T18:32:12.643
> 
> 标签：magento, themes

运行 Magento 1.7.0.2（最新）

我下载了一个免费的主题并安装了它——没问题。

我希望开始对其进行细微的编辑，但我不想触及源代码。我想在一个目录中进行编辑，他们将在其中呈现和覆盖基本自定义主题，但如果我要升级免费主题，则如果发布了较新版本，则不会被丢弃。

我的主题安装在：

```
.../app/design/frontend/default/the_free_theme/
../skin/frontend/default/the_free_theme/ 
```

我将创建什么目录结构来从自定义主题复制选定的主题文件，以便它们覆盖基本文件但在升级时不会被删除？

谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T21:02:10.483

1) 在 Magento 管理员中：配置 -> 设计

默认类型：the_free_theme

现在在皮肤、模板和布局字段中，输入“my_new_theme”（或者你想怎么称呼它）。

现在创建新文件夹：

```
.../app/design/frontend/default/my_new_theme/
../skin/frontend/default/my_new_theme/ 
```

您要从复制到新文件夹的模板中更改的任何文件，它们将覆盖基本模板文件，使它们保持完整。

例如，如果您想更改标题模板：

复制 .../app/design/frontend/default/the_free_theme/template/page/html/header.phtml

到 .../app/design/frontend/default/my_new_theme/template/page/html/header.phtml

然后编辑新文件。这将覆盖基本模板文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T22:15:58.063

搞清楚怎么弄了，把下载的主题复制到新界面！

1) 对皮肤和设计文件夹执行此操作，即 .../app/design/frontend/default/my_downloaded_theme/ -> .../app/design/frontend/myinterfacename/default

../skin/frontend/default/my_dowloaded_theme -> ../skin/frontend/myinterfacename/default

interfacename 可以是任何东西！

现在，在与您刚刚复制的新默认主题相同的父文件夹下创建一个新的主题文件夹（皮肤和设计）。

在这种情况下，我将其称为主文件夹。该结构将如下所示：

........../frontend/myinterfacename/main

因此，在文件夹 myinterfacename 下，您应该会看到一个默认文件夹和一个主文件夹。

2) 进入 admin 进入 design 并使用 myinterfacename/main 作为你的默认主题....

这个文件夹是空的，因此它将回退到 myinterfacename 的默认值，这是您刚刚复制的下载主题。

现在，对于您想要更改的任何内容，只需从默认复制到新的主文件夹并从那里修改它！！！！

祝你好运！！！

# xml - 显示嵌套树中的前两个位置

> ID：12500757
> 
> 赞同：2
> 
> 时间：2012-09-19T18:32:24.017
> 
> 标签：xml, xslt, position, ancestor

我是 XSL 的新手，边走边学。我目前正在为本地创建的 XML 编辑第三方样式表，其中一部分如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl">

<c01>
    <did>
        <unittitle>Annual Reports</unittitle>
        <physdesc>19 folders</physdesc>                                   
    </did>
    <scopecontent>
        <p>Annual reports...</p>
    </scopecontent>
    <c02>
        <did>
            <container type="box">1</container>
            <container type="folder">1</container>
            <unittitle>1839-40, 1846 (SPP); 1852 (BPA); 1854 (SPP)</unittitle>
        </did>
    </c02>
    <c02>
         <did>
            <container type="folder">2</container>
            <unittitle>1869, 1872 (BPA); 1873 (IAS)</unittitle>
         </did>
    </c02>

<c01>
     <did>
         <unittitle>Bulletins</unittitle>
         <physdesc>2 folders</physdesc>
     </did>
     <scopecontent>
         <p>Bulletins...</p>
     </scopecontent>
     <c02>
         <did>
             <container type="box">1</container>
             <container type="folder">21</container>
             <unittitle>Bulletins 1945-46</unittitle>
         </did>
     </c02>
     <c02>
         <did>
         <container type="box">2</container>
         <container type="folder">1</container>
         <unittitle>Bulletins 1946-51</unittitle>
         </did>
     </c02>
</c01> 
```

`<c01>`使用一些为许多s、 s 等创建表的 XSL，`<c02>`部分看起来像这样：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="html" encoding="ISO-8859-1" doctype-public="-//W3C//DTD HTML 4.0 Transitional//EN"/>

<xsl:template match="c02/did">
<tr>    
    <xsl:choose>
        <xsl:when test="ancestor::c01/descendant::c02/did/container">
            <xsl:if test="position()=1">
                <th><xsl:value-of select="container[1]/@type"/></th>
                <th><xsl:value-of select="container[2]/@type"/></th>
            </xsl:if>
        </xsl:when>
        <xsl:otherwise></xsl:otherwise>
    </xsl:choose>
</tr>
</xsl:template> 
```

在创建多个列的 XSL 中此模板之前创建了一个表，其中前两个具有`<th>`拉动`<container type>`（通常是“Box”和“Folder”）的 s。每个`<container type>`应该只出现一次`<c01>`，它应该从第一个中提取`<c02>`。有时`<c02>`s 只有一个s `<container type>`，有时`<c01>`s 有多个`<c02>`s 和`<container type="box">`& `<container type="folder">`。

我已经尝试了许多变体`position()=1`和使用`<xsl:choose>`/ `<xsl:when>`，几乎所有我能想到的。它要么总是为&`<th>`的每个实例显示一个，要么每次有两个s 时显示s。`<container type="box">``<container type="folder">``<th>``<container type>`

有任何想法吗？

**使用实际（不需要的）输出更新**
我被要求提供一些所需/实际的 XML 输出。这是我传达实际 HTML 输出的最佳尝试（因为我无法复制/粘贴它），忽略所有内容（因为我已经弄清楚了那部分）`<c01>`：`</scopecontent>`

```
<tr>
<th>Box</th>
<th>Folder</th>
</tr>

<tr>
<td>1</td>
<td>1</td>
<td>1839-40, 1846 (SPP); 1852 (BPA); 1854 (SPP)</td>
</tr>

<tr>
<th>Folder</th>
</tr>

<tr>
<td></td>
<td>2</td>
<td>1869, 1872 (BPA); 1873 (IAS)</td>
</tr>

...

<tr>
<th>Box</th>
<th>Folder</th>
</tr>

<tr>
<td>1</td>
<td>21</td>
<td>Bulletins 1945-46</td>
</tr>

<tr>
<th>Box</th>
<th>Folder</th>
</tr>

<tr>
<td>2</td>
<td>1</td>
<td>Bulletins 1946-51</td>
</tr> 
```

**期望的输出**

```
<tr>
<th>Box</th>
<th>Folder</th>
</tr>

<tr>
<td>1</td>
<td>1</td>
<td>1839-40, 1846 (SPP); 1852 (BPA); 1854 (SPP)</td>
</tr>

<tr>
<td></td>
<td>2</td>
<td>1869, 1872 (BPA); 1873 (IAS)</td>
</tr>

...

<tr>
<th>Box</th>
<th>Folder</th>
</tr>

<tr>
<td>1</td>
<td>21</td>
<td>Bulletins 1945-46</td>
</tr>

<tr>
<td>2</td>
<td>1</td>
<td>Bulletins 1946-51</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:08:19.603

好吧，我起初以为这是一个需要[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)的分组问题。

但后来我仔细看了看，改变了主意。这是我的做法：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="html" encoding="ISO-8859-1"
    doctype-public="-//W3C//DTD HTML 4.0 Transitional//EN" />

  <xsl:template match="c01">
    <xsl:variable name="c01ID" select="generate-id()" />
    <tr>
      <xsl:for-each select="c02[1]//container">
        <th>
          <xsl:value-of select="@type" />
        </th>
      </xsl:for-each>
    </tr>
    <xsl:apply-templates select="c02" />
  </xsl:template>

  <xsl:template match="c02/did">
    <tr>
      <xsl:variable name="contextDid" select="." />
      <xsl:for-each select="ancestor::c01/c02[1]//container/@type">
        <xsl:variable name="currentType" select="." />

        <td>
          <xsl:value-of
            select="$contextDid/container[@type = $currentType]/text()" />
        </td>
      </xsl:for-each>

      <xsl:for-each select="unittitle">
        <td>
          <xsl:value-of select="." />
        </td>
      </xsl:for-each>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

针对以下示例输入运行时：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl"?>

<root>
  <c01>
    <did>
      <unittitle>Annual Reports</unittitle>
      <physdesc>19 folders</physdesc>
    </did>
    <scopecontent>
      <p>Annual reports...</p>
    </scopecontent>
    <c02>
      <did>
        <container type="box">1</container>
        <container type="folder">1</container>
        <unittitle>1839-40, 1846 (SPP); 1852 (BPA); 1854 (SPP)</unittitle>
      </did>
    </c02>
    <c02>
      <did>
        <container type="folder">2</container>
        <unittitle>1869, 1872 (BPA); 1873 (IAS)</unittitle>
      </did>
    </c02>
  </c01>

  <c01>
    <did>
      <unittitle>Bulletins</unittitle>
      <physdesc>2 folders</physdesc>
    </did>
    <scopecontent>
      <p>Bulletins...</p>
    </scopecontent>
    <c02>
      <did>
        <container type="box">1</container>
        <container type="folder">21</container>
        <unittitle>Bulletins 1945-46</unittitle>
      </did>
    </c02>
    <c02>
      <did>
        <container type="box">2</container>
        <container type="folder">1</container>
        <unittitle>Bulletins 1946-51</unittitle>
      </did>
    </c02>
  </c01>
</root> 
```

它产生所需的输出：

```
<tr>
   <th>box</th>
   <th>folder</th>
</tr>

<tr>
   <td>1</td>
   <td>1</td>
   <td>1839-40, 1846 (SPP); 1852 (BPA); 1854 (SPP)</td>
</tr>    

<tr>
   <td></td>
   <td>2</td>
   <td>1869, 1872 (BPA); 1873 (IAS)</td>
</tr>

<tr>
   <th>box</th>
   <th>folder</th>
</tr>

<tr>
   <td>1</td>
   <td>21</td>
   <td>Bulletins 1945-46</td>
</tr>

<tr>
   <td>2</td>
   <td>1</td>
   <td>Bulletins 1946-51</td>
</tr> 
```

# c# - Unable to cast object of type 'System.Data.Common.DataRecordInternal' to type 'System.Data.IDataReader'

> ID：12500763
> 
> 赞同：4
> 
> 时间：2012-09-19T18:32:58.420
> 
> 标签：c#, linq

When trying to create [this](https://stackoverflow.com/q/12496809/442580) linq statement. I ran into the following error:

> Unable to cast object of type 'System.Data.Common.DataRecordInternal' to type 'System.Data.IDataReader'

This is what I'm doing per @SLaks [promising answer](https://stackoverflow.com/a/6034408/442580).

```
List<TypeData> = reader.Cast<IDataReader>()
   .Select(dr => new TypeData { Type = (string)dr["type"] })                
   .ToList(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T18:39:54.437

Try `reader.Cast<DbDataRecord>` or `reader.Cast<IDataRecord>` instead:

```
IEnumerable<TypeData> typeData = reader.Cast<IDataRecord>()
   .Select(dr => new TypeData { Type = (string)dr["type"] }); 
```

[`IDataRecord` Interface](http://msdn.microsoft.com/en-us/library/system.data.idatarecord.aspx)

> Provides access to the column values within each row for a DataReader, and is implemented by .NET Framework data providers that access relational databases.

# ios - 在 iOS 键盘上覆盖自定义键盘

> ID：12500767
> 
> 赞同：2
> 
> 时间：2012-09-19T18:33:18.257
> 
> 标签：ios, keyboard, customization

**我正在为有视觉障碍的人开发一个 iOS 浏览器应用程序。**

我已经构建了一个带有大字母/数字和自定义弹出字母的大键盘，这使得有视觉障碍的人可以很容易地使用应用程序本身。

当用户导航到一个网站并尝试在该网站的某个字段（密码字段、搜索字段等）中输入文本时，就会出现问题。在这种情况下，标准的 iOS 键盘部署 - 大约是我的自定义键盘大小的 1/2 并且没有弹出字母 - 并且对于有视觉障碍的人来说不容易使用。

我正在为此寻找一种创造性的解决方法，并希望堆栈溢出的优秀思想能够提供帮助。

我知道我们不能禁用 iOS 键盘。我想提出的解决方案是：

**1)** 有没有办法在 iOS 键盘上覆盖一个图像，该图像在 iOS 键盘的字母/数字的确切位置包含更大的字母/数字字符 - 所以当 iOS 键盘部署时，我们的伪键盘将部署在上面吗？当用户选择一个键时，他们实际上将选择覆盖层下方的相应键 - 触发该字母或数字？如果是这样，我们还可以添加我们的自定义弹出窗口吗？

**2）** 代替上述，有没有办法使iOS键更大或以其他方式自定义它们的外观？

您可能有的任何意见或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T09:37:14.477

在我的项目中，我还被要求为 uiwebview 设计一个自定义数字键盘，发现我找到了防止显示默认键盘的解决方案。在输入标签中添加一个属性
`<input class="customPad" readonly="true">`，
然后在用户单击它时绑定一个事件。
`$('customPad').click(){window.location="locationpattern"}`
通过更改窗口位置，在您的 uiwebview 中，您可以使用委托逐个处理它并弹出任何您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:47:10.440

似乎解决方案是执行以下操作：

```
var hideKeyboard = function() {
    document.activeElement.blur();
    $("input").blur();
}; 
```

[我发现这是对SO](https://stackoverflow.com/questions/5937339/ipad-safari-make-keyboard-disappear)的一个不同措辞问题的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:10:30.940

为什么不能按照这个问题使用 iOS 自定义键盘：

[如何创建自定义键盘](https://stackoverflow.com/questions/4643167/iphone-objc-how-to-create-a-custom-keyboard)

您提到它在网页上，假设它在 UIWebView 中。似乎您可以尝试在 UIWebView 本身上设置自定义 inputView 以拉出您的自定义输入视图。

# sql - 任务组的 startTime 和 endTime 之间的差异

> ID：12500770
> 
> 赞同：1
> 
> 时间：2012-09-19T18:33:53.190
> 
> 标签：sql, date, group-by

我有一个包含三列的表。

*   任务应该开始的时间 (nominalStartTime)
*   什么时候开始（startTime）
*   当它结束时（endTime）

大约有一堆任务计划每 15 分钟运行一次。我需要知道第一个任务开始时间和最后一个任务结束时间之间的区别。例如，见下文

```
 NominalStartTime  |  startTime  |   endTime
____________________|_____________|____________
2012-09-19 08:15:00 | 08:15:41.27 | 08:15:47.00
2012-09-19 08:15:00 | 08:15:45.13 | 08:15:45.43
2012-09-19 08:15:00 | 08:15:49.88 | 08:15:50.13
2012-09-19 08:30:00 | 08:30:25.27 | 08:30:26.00
2012-09-19 08:30:00 | 08:30:45.13 | 08:30:45.43
2012-09-19 08:30:00 | 08:30:49.88 | 08:30:50.13 
```

我正在寻找要返回的查询

```
 NominalStartTime  |  startTime  |   endTime   | difference
____________________|_____________|_____________|____________
2012-09-19 08:15:00 | 08:15:41.27 | 08:15:50.13 | 00:00:08.86
2012-09-19 08:30:00 | 08:30:25.27 | 08:30:50.13 | 00:00:24.86 
```

我试过这个，但我得到聚合组错误等

```
Select NominalStart, MIN(TimeStarted) as TimeStarted, MAX(TimeEnded) as TimeEnded, DATEDIFF(ms, TimeStarted, TimeEnded)
FROM taskRuns
GROUP BY NominalStart
ORDER BY NominalStart 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:50:24.867

试试这个解决方案：

```
select NominalStart,min(TimeStarted),max(TimeEnded),
       DATEDIFF(ms ,min(TimeStarted),max(TimeEnded)) as difference
from taskRuns
group by NominalStart
order by NominalStart 
```

## [SQL 小提琴](http://sqlfiddle.com/#!3/e6505/12/0)演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:46:54.960

您是否考虑过使用时间戳？

它将时间值存储为从 1970 年开始的秒数

使操作时间和日期变得非常容易，您可以简单地从另一个中减去一个。这真的取决于你用什么来操作数据，php 与时间戳配合得很好。

如果我是你，我会考虑将日期存储为时间戳......

# php - 在另一个 CodeIgniter 模型中加载模型是否合适？

> ID：12500771
> 
> 赞同：1
> 
> 时间：2012-09-19T18:33:53.697
> 
> 标签：php, codeigniter

我有一个建筑问题一直困扰着我。

Codeigniter 定义了这样的[模型](http://codeigniter.com/user_guide/general/models.html)。现在有时一个模型与另一个模型紧密相关。即用户和安全。

**在模型中访问另一个模型是不好的做法吗？**

IE

```
class User extends CI_model 
{
    function getUser() 
    {
        $this->load->model('User');
        $user = // load user 

        $this->load->model('Security');
        $security = // load security

        $user->security = $security;
    }
} 
```

有些对我来说感觉不“犹太”。感觉就像我需要在顶部有一个 DAO 或某种 DAL，然后可以加载两个模型并进行必要的获取，同时将基本的 CRUD 和模型特定操作留在模型中。如果我们确实创建了一个单独的层，那么将它们放在 Codeigniter 框架中似乎不合逻辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:10:12.270

这是可悲的部分：CodeIgniter 没有实现 MVC 设计模式。它只是模仿 Rails 架构。它们是有区别的。

CodeIgniter 中所谓的“模型”通常是[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)（反）模式的实现。它们将域业务逻辑的职责与存储逻辑相结合。

因此，如果您正在使用标准 CI 代码，那么您不应该这样做。你不能`$this->load->model()` 在另一个[`CI_Model`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Model.php#L44)实例中调用，因为它没有这样的能力[`CI_Controller`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Controller.php)。

相反，您必须覆盖 default `__construct()`，这将访问 CI 的全局实例并将其绑定到`$this->load`变量。基本上这将是一个黑客。

您最好在控制器中实例化“模型”并手动注入这些依赖项。

* * *

话又说回来..您正在使用 CodeIgniter，所以谁在乎开发原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:39:21.060

查看 DataMapper ORM

[CodeIgniter 的 DataMapper ORM](http://datamapper.wanwizard.eu/)

从网站：

> DataMapper 是一个用 PHP 为 CodeIgniter 编写的对象关系映射器。它旨在将您的数据库表映射为易于使用的对象，充分了解彼此之间的关系。

# sql - 有人建议有关 SQL 查询并将 15 分钟间隔数据分组到几天吗？

> ID：12500772
> 
> 赞同：1
> 
> 时间：2012-09-19T18:33:56.387
> 
> 标签：sql, datetime

我希望有人能回答这个关于我想写的 SQL 查询的问题，它可能相当基本，但它让我发疯。

我有一个表，其中包含每 15 分钟为登录到电话系统的某些代理写入的数据。这是一些字段设置的示例，还有更多，但我保持简单快速输入

```
FieldName          Size  Type
BeginTimePeriodDt  93    datetime
User_Id            12    varchar
EndTimePeriodDt    93    datetime
TotalLoginTime      4    int 
```

以及数据的样本。还有更多的代理，但我再次保持简单。

```
BeginTimePeriodDT    User_ID EndTimePeriodDt      TotalLoginTime
2012-09-10 13:30:00  XXXXXX  2012-09-10 13:45:00  35
2012-09-10 13:30:00  YYYYYY  2012-09-10 13:45:00  900
2012-09-10 13:45:00  XXXXXX  2012-09-10 14:00:00  900
2012-09-10 13:45:00  YYYYYY  2012-09-10 14:00:00  600
2012-09-10 14:00:00  XXXXXX  2012-09-10 14:15:00  250
2012-09-10 14:00:00  YYYYYY  2012-09-10 14:15:00  95
2012-09-11 13:30:00  XXXXXX  2012-09-11 13:45:00  35
2012-09-11 13:30:00  YYYYYY  2012-09-11 13:45:00  900
2012-09-11 13:45:00  XXXXXX  2012-09-11 14:00:00  900
2012-09-11 13:45:00  YYYYYY  2012-09-11 14:00:00  600
2012-09-11 14:00:00  XXXXXX  2012-09-11 14:15:00  250
2012-09-11 14:00:00  YYYYYY  2012-09-11 14:15:00  95 
```

正如您所看到的，每个登录的代理都会每 15 分钟写入一次记录。我正在尝试做的是获取这些记录并添加登录时间。现在，如果该表仅包含每个代理 1 天的记录，那么这将是一件非常容易的事情，但是......

该表包含每个代理多天 15 分钟间隔的记录:-(

我遇到的麻烦是弄清楚如何每天分组和添加代理间隔并返回每日总数。

所以我想最终得到类似的东西

```
2012-09-10 XXXXXX 1185
2012-09-11 XXXXXX 1185
2012-09-10 YYYYYY 2000
2012-09-11 YYYYYY 1300 
```

（我知道我的数学不能加到上面的数据中，我无法计算出总和：-P）

如果有人能为我提供答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:50:49.847

```
SELECT YEAR(BeginTimePeriodDT), 
       MONTH(BeginTimePeriodDT), 
       DAY(BeginTimePeriodDT), 
       User_ID, 
       SUM(TotalLoginTime)
FROM MyTable
GROUP BY YEAR(BeginTimePeriodDT), 
         MONTH(BeginTimePeriodDT), 
         DAY(BeginTimePeriodDT), 
         User_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:59:05.367

这应该做

```
SELECT dateadd(dd,0, datediff(dd,0, beginTimePeriodDt)), UserId, SUM(TotalLoginTime)
FROM test 
group by dateadd(dd,0, datediff(dd,0, beginTimePeriodDt)), userId
order by 1, 2 
```

# php - PHP Mysql仅在提交后插入

> ID：12500773
> 
> 赞同：3
> 
> 时间：2012-09-19T18:34:00.563
> 
> 标签：php, mysql, html, post, pdo

我有 2 页。用户在第 1 页插入所有信息后，他们转到第 2 页。所有输入的信息都正确存储在 $_POST 中，因此我可以在下一页中访问它。我也可以插入到mysql数据库中，没问题。我要做的事情是仅在他们单击第二页上的提交按钮时才执行插入到数据库代码中。我试过这样做：

Page2.php

```
<script>
$(document).ready(function(e) {
    $("#PaySubmit").click(function() {
        $.ajax({
            url: 'Insert.php'
        });
    });
});
</script>
<input type="submit" name="PaySubmit" id="PaySubmit" value="Continue"/> 
```

插入.php

```
try {
    $link = new PDO('mysql:host=****;dbname=****;charset=UTF-8','****','****');
    $first = $_POST["fname"];
    $last = $_POST["lname"];

    $stmt = $link -> prepare("INSERT INTO Conference (`First Name`, `Last Name`) VALUES (:first, :last)");
        $stmt->bindParam(':first', $first);
        $stmt->bindParam(':last', $last);
    $stmt->execute();

} catch(PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
} 
```

问题是，当您单击第二页上的提交时，$_POST 会被第二页中的数据替换，因此我不再有权访问第一页的数据。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:35:38.610

将第一篇文章中的所有值存储在当前会话中。

然后，您可以使用`$_SESSION`全局访问它们。

看看[serialize 函数](http://www.php.net/manual/en/function.serialize.php)，它可能对你有很大帮助。或[json_encode](http://www.php.net/manual/en/function.json-encode.php)。它们对于将数组存储在一个变量中并稍后检索它非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:38:52.947

作为存储在会话中的替代方法，您可以简单地通过使用隐藏的输入字段将值从第一页传递到第二页。像这样的东西：

```
foreach($_POST as $k => $v) {
?>
<input type="hidden" name="<?php echo $k; ?>" value="<?php echo $v; ?>" />
<?php
} 
```

当然，您可能希望在发布到下一页之前以某种方式对发布中的数据进行清理，但这应该让您知道该怎么做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:38:53.223

我建议您将 DBconnection 作为单例类。并在您转到第 2 页后调整查询，并在您单击第 2 页中的提交时执行它。

# ruby - 正则表达式排除

> ID：12500774
> 
> 赞同：0
> 
> 时间：2012-09-19T18:34:05.763
> 
> 标签：ruby, regex

我有一个方法，它接受一个字符串并返回它发现的任何与正则表达式不匹配的字符。不过，我似乎无法让它适用于这种情况。

1.  任何地方都允许使用数字
2.  如果有负号，则必须在第一个空格中。
3.  如果字母字符是以下之一，则允许在最后一个位置使用字母字符：

    AR（大写）

    { 或者 }

我有一个正则表达式，它只返回符合这些要求的字符：

```
 [\d]|^[-]|[A-R{}]$ 
```

但我似乎无法修改它以返回任何不匹配的数字。以下是一些示例：

有效的：

```
12345
-12345
1234B
-1234B
1234{
-1234} 
```

无效的：

```
12-345 
12345- 
B12345 
12B345 
{12345 
12}345 
```

或任何其他字符：

```
"12345 
12345^ 
$%^&# 
STUVWXYZ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:41:36.020

```
-?\d+[A-R{}]? 
```

应该做的工作

# python - ElasticSearch/Solr - 产品网站的同义词？

> ID：12500780
> 
> 赞同：0
> 
> 时间：2012-09-19T18:34:32.910
> 
> 标签：python, django, solr, elasticsearch

我正在尝试为 ElasticSearch 设置同义词数据库。我相信 Solr 使用相同的同义词格式。

我正在开发的 Web 应用程序是一个基于 Python/Django 的电子产品站点。

有任何想法吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:58:43.827

你看过[https://www.elastic.co/guide/en/elasticsearch/reference/1.3/analysis-synonym-tokenfilter.html](https://www.elastic.co/guide/en/elasticsearch/reference/1.3/analysis-synonym-tokenfilter.html)

您可以使用 SOLR 格式或[WordNet](http://wordnet.princeton.edu/)格式。

还是我误解了你的问题？

# vim - 重新映射 zsh 终端热键

> ID：12500786
> 
> 赞同：1
> 
> 时间：2012-09-19T18:35:19.517
> 
> 标签：vim, terminal, zsh, remap

我在我的 Mac 上使用[yadr](https://github.com/skwp/dotfiles) dotfiles 和 ZSH。我使用分隔符“jj”在 vim 中从插入模式切换到编辑模式，我通过放置

```
imap jj <esc> 
```

在 ~/.gvimrc 中。但是，zsh / yadr 也允许您在终端中使用 vim 热键，但在此设置中将该行添加到 .gvimrc 似乎并没有将热键从 escape 更改为 jj。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:21:56.593

yard 不会从 Vim 键绑定中获取`~/.gvimrc`并使用它们来设置 Zsh 键绑定。Vim 和 Zsh 是分开配置的。

yard 启用了一些特定的键绑定，可以在[此处](https://github.com/skwp/dotfiles/blob/630063efe4d3177c77b1cb9f38974a0dc4b59372/zsh/key-bindings.zsh)找到。正如[@pb2q](https://stackoverflow.com/users/275567/pb2q)指出的那样，您必须添加`bindkey -M viins 'jj' vi-cmd-mode`到该文件才能获得您正在寻找的行为。

# javascript - jQuery 在 Heroku 上的 Rails 应用程序中包含两次

> ID：12500788
> 
> 赞同：1
> 
> 时间：2012-09-19T18:35:31.447
> 
> 标签：javascript, jquery, ruby-on-rails, heroku, asset-pipeline

我的问题与此处的其他一些问题相似，但仍然没有为我的情况提供答案

我在 Gemfile 的应用程序中包含 jQuery gem：

```
gem 'jquery-rails' 
```

在 application.js 中：

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
...
//= require_tree . 
```

我的 development.rb 有

```
# Do not compress assets
config.assets.compress = false
# Expands the lines which load the assets
config.assets.debug = true 
```

我的资产没有预编译，没有公共/资产。一切都在本地运行良好。但是当我推送到 heroku 时，我会在页面上得到不同的 application.js 文件。它不是一个清单文件，而是 jQuery 的缩小版本。因此，我将 jQuery 包含了两次。这是我的页面来源的样子：

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
...
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

当我点击时，`/assets/application.js?body=1`我看到了缩小的 jQuery。当我在本地运行我的应用程序并单击时，`/assets/application.js?body=1`我只会看到清单。我试图添加到 development.rb

```
 config.serve_static_assets = false 
```

它没有帮助。我还多次清除资产和缓存。唯一对我有用的是设置

```
config.assets.debug = false 
```

但我想知道是否有其他不影响调试的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T03:04:26.620

我删除了这一行

```
//= require_tree . 
```

并在 javascripts 中创建一个子文件夹，然后将 javascript 目录中的所有 js 文件移动到该子文件夹，但**application.js除外**

并写下了这一行

```
//= require_tree ./sub_folder_name 
```

它很棒而且很有效。

**需要注意的一件重要事情：**

这可能会导致您将同一个文件包含两次，一次由**javascript_include_tag**手动包含 ，另一次由 application.js 包含。首先确认如果是这种情况，您必须包含一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:52:53.420

请查看有关预编译资产的 heroku上的[这篇文章。](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)当您推送到 heroku 时，您是否会在以下部分看到任何错误消息：

```
-----> Preparing Rails asset pipeline
       Running: rake assets:precompile 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T03:45:54.623

开发和生产应该是不同的（/app/assets 并且在开发中未缩小，公共/资产在生产中缩小。

至于双重包含，如果您的生产网络服务页面两者都有，我会检查您的应用程序是否有诸如 application.html.erb 之类的页面，看看它是否在那里定义。如果是这样，请将其删除。

# javascript - Backbone.js 放置逻辑的位置

> ID：12500792
> 
> 赞同：0
> 
> 时间：2012-09-19T18:35:45.470
> 
> 标签：javascript, backbone.js, routes

使用backbone.js 和它的导航/路由，并在我们导航时从外部文件加载html 模板页面。这些页面的 javascript 都被排除在整个应用程序的一个大型 javascript 文件中。

将逻辑移动到我们放置在页面上的文件中的标记中的权衡是什么？

到目前为止：好：

*   更小的文件，更少的加载

坏的：

*   将javascript逻辑与html混合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:50:23.607

您应该真正致力于将您的视图（HTML、CSS 和模板）与您的逻辑（JavaScript 代码）分开。否则，随着应用程序的增长和/或从一页到下一页重用代码，将变得非常困难。

您可能想看看使用[Require.js 之](http://requirejs.org/)类的东西模块化您的 Javascript 。开发 Backbone.js 应用程序中的这一章应该可以帮助您入门：[http](http://addyosmani.github.com/backbone-fundamentals/#advanced) ://addyosmani.github.com/backbone-fundamentals/#advanced 。Require.js 有一个优化器，它将处理组合和缩小您的脚本以用于生产，从而开始解决大小和加载问题。

# opengl-es - Photoshop 与 OpenGL 的“混合模式”

> ID：12500797
> 
> 赞同：1
> 
> 时间：2012-09-19T18:36:07.303
> 
> 标签：opengl-es, webgl, photoshop, blend

我打算制作一个简单的绘图工具，它支持 Photoshop 的多个图层和所有混合模式。

我正在考虑在 GPU 上进行混合（将每一层放入纹理并绘制 2 个三角形来渲染每一层）。但我不确定，是否可以使用 OpenGL 的 blendFunc / blendEquation 等实现所有[混合模式。](http://www.northlite.net/ps/blend.htm)

另一种选择是将所有纹理+混合模式标志传递给一个片段着色器并按照我的意愿混合它们，但是在添加/删除某些层（sampler2D）时我将不得不重新编译FS。

所以你怎么看？是否可以？有没有更好的方法如何使用 GPU 进行混合？那么我应该现在关心它，还是应该把它全部放在 CPU 上并关心未来的增强功能？

顺便提一句。它将是使用 WebGL 的 JavaScript 程序，但我认为没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:46:17.370

当然可以。但这需要在共享者中完成。

加载两张图片（其实可以更多），渲染三角形。但是然后只需使用您的着色器来探测两个纹理并将这些值与取决于当前混合模式的方程混合（提供为统一）。

PS不要忘记关闭mipmaps和过滤。

# android - 使用特殊字符的 SQLite FTS4 搜索

> ID：12500799
> 
> 赞同：5
> 
> 时间：2012-09-19T18:36:22.207
> 
> 标签：android, sqlite, full-text-search, special-characters, fts4

我有一个 Android 应用程序，它使用 FTS4 虚拟表在 SQLite 数据库中搜索数据。它工作正常，但是当表中的数据包含特殊字符（如“á”、“é”、“í”、“ó”、“ú”或“ñ”）时，SQLite MATCH 函数不会给出任何结果。我在这一点上迷路了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:43:25.500

注意：默认分词器真的很差。要获得良好的结果，您应该实现自定义标记器。路径不是那么简单：

*   找到适合您需要的标记器（带有词干分析器？），或开发它
*   将其与 sqlite.c 源粘合在一起
*   粘合一个 JNI 接口来包装本机库，以便可以从 dalvik VM 访问它
*   使用NDK从头编译sqlite.c，准备Android动态库

在 stackoverflow 中，您应该找到一些好的帖子来开始学习如何做到这一点。

查看这些项目以获得一些好的起点：

*   sqlite4java
*   sqlcipher

# seo - 防止索引父域的子目录

> ID：12500801
> 
> 赞同：0
> 
> 时间：2012-09-19T18:36:35.153
> 
> 标签：seo, robots.txt

假设我的网站 children.com（我想要索引）也可以通过[http://mother.com/children/](http://mother.com/children/)（我不想索引）访问。

示例层次结构：/home/username/mother： http: [//mother.com](http://mother.com) |_ children： http: [//www.children.com](http://www.children.com)

我会在 mom.com/robots.txt 文件中添加什么内容，以防止 children.com 和 children.com 的所有子目录中的内容被索引为属于 mother.com？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:22:17.387

实际上，您可能甚至不想使用 robots.txt。而是使用[robots 元标记](http://googlewebmastercentral.blogspot.com/2007/03/using-robots-meta-tag.html)和[规范标记](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)的组合。

在所有 mother.com/children 页面上，添加值为“noindex”的元机器人标签。尽管搜索引擎将能够抓取该页面，但它不会将这些页面添加到索引中。现在，这仍然会对内容的权威位置造成一些混淆。

因此，您需要使用跨域规范标签来通知主要搜索引擎权威内容所在的位置。因此，您将在mother.com/children 的页面上添加一个规范标签，并在children.com 上为它们赋予值。您需要确保如果它是特定页面，则将其规范化为 children.com 上的相同内容，因为规范标签实际上仅适用于相同的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:48:53.010

我已经解决了我自己的问题并通过 phpwebby robots.txt 分析器确认了它...我将以下代码放入了 mother.com/robots.txt 文件中：

```
User-agent: Googlebot
Disallow: /
User-agent: Mediapartners-Google
Disallow: /
User-agent: Adsbot-Google
Disallow: /
User-agent: Jeeves
Disallow: /
User-agent: Slurp
Disallow: /
User-agent: Yahoo-MMCrawler
Disallow: /
User-agent: msnbot
Disallow: /
User-agent: psbot
Disallow: /
User-agent: *
Disallow: / 
```

并将以下内容添加到我的 chilren.com robots.txt 文件中。

```
User-agent: *
#block indexing of email and print pages -------
Disallow: /*~email.shtml
Disallow: /*~print.shtml
Sitemap: http://www.children.com/sitemap_index.xml 
```

当然，我三次检查以确保（使用 robots.txt 文件分析器）各种子目录无法通过 mother.com 域访问，并且它们可以通过 children.com 域进行索引。

注意：仅以mother.com 和children.com 域为例。

# google-chrome - css3边框半径不适用于子元素

> ID：12500802
> 
> 赞同：4
> 
> 时间：2012-09-19T18:36:41.297
> 
> 标签：google-chrome, safari, webkit, css

我正在尝试开发在父 div 中具有边框半径的幻灯片框。它适用于 Firefox，但在 safari 和 chrome 中出现问题。

问题是子元素与父 div 的圆角边框重叠。

[你可以在http://jsfiddle.net/7KgEh/6/](http://jsfiddle.net/7KgEh/6/)看到这个例子。看看 safari、chrome 和 firefox；您会在右侧看到差异，子 div 与父 div 的圆形边框重叠。

我搜索了互联网，但大多数帖子都指出它是 webkit 错误。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-24T16:44:53.763

只需添加`overflow: hidden;`到带有圆形边框的容器元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:44:36.663

圆角工作正常，它只是占用`width:100%`（页面） for `<div class='box'>`，因此您看不到它。试试看`width:50%`，你会明白我在说什么。在这里[试试这个jsfiddle](http://jsfiddle.net/7KgEh/15/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:30:34.490

如果您不需要与该背景进行交互，您可以用 z-index 将其掩埋：

[http://jsfiddle.net/7KgEh/23/](http://jsfiddle.net/7KgEh/23/)

掩埋背景并将按钮向上移动以成为它的兄弟，并写下额外的行以保持它们对齐。如果这是出于显示目的，这将总体上更加灵活（还允许按钮与插槽重叠）。如果有结构性原因，那么另一种选择可能会更好。

# storekit - 无法在 SKStoreProductViewController 中连接到 iTunes Store

> ID：12500810
> 
> 赞同：2
> 
> 时间：2012-09-19T18:37:00.357
> 
> 标签：storekit, ios6

我正在使用 SKStoreProductViewController 在我的应用程序中显示特定产品。在 iPHone 模拟器上，视图控制器正确加载并显示特定产品。但是，在我的实际 iPhone 上，我收到一个错误：“无法连接到 iTunes 商店”。

有没有人有任何想法？

编辑：我展示的产品不附属于我的应用程序，因此未在相同的捆绑 ID 下注册。

（[https://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011852](https://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011852)暗示这是可能的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:08:08.453

由于它在沙盒中运行，您应该为其创建一个测试用户。

打开 itunesconnect -> 管理用户 -> 测试用户 -> 添加新用户。

# asp.net - MVC3 FormCollection 突然 NULL

> ID：12500813
> 
> 赞同：0
> 
> 时间：2012-09-19T18:37:18.610
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一个偶尔报告 NullReferenceException 的 MVC3 应用程序。到目前为止，我还无法重现该问题。下面是该函数的编辑版本（以保护无辜者；）以及我在抛出 NullReferenceException 时得到的相应堆栈输出。

```
[HttpPost]
public ActionResult DoSomething(FormCollection collection)
{
    if (null == collection)
    {
       return RedirectToAction("Index", "Home");
    }

    // other work occurs...

   // NOTE: no problem here accessing collection
   QcModel qcModel = new QcModel (Int32.Parse(collection["Id"]),  collection["Result"]);
   try
   {
       Process(qcModel); // Process() throws some kind of exception
   }
   catch (Exception ex)
   {
        TempData["ValidationError"] = ex.Message;

        // next line is the one that reports the NullReferenceException in stack, aka line 254
        return RedirectToAction("Order", new { Id = Int32.Parse(collection["Id"]), result = collection["Result"], reserved = 0 });
   }

    // additional work if we make it here...
} 
```

到目前为止，基本上我所推断的是，当我们到达我的 catch{} 中突出显示的行时，集合对象为空。现在我无法证明这一点，因为我无法重现这个特定的错误，但我相信这是正在发生的事情，因为在 catch 中生成的异常会冒泡到更高级的处理程序，该处理程序会发送电子邮件给我这个堆栈输出：

```
Exception: System.NullReferenceException

Error Message: Object reference not set to an instance of an object.

Stack:    at MyWebsite.Controllers.MyController.DoSomething(FormCollection collection) in C:\MyWebsite\Controllers\MyController.cs:line 254
at lambda_method(Closure , ControllerBase , Object[] )
at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
at System.Web.Mvc.Controller.ExecuteCore()
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

# android - 安卓 ndk 多点触控？

> ID：12500825
> 
> 赞同：8
> 
> 时间：2012-09-19T18:38:42.383
> 
> 标签：android, events, android-ndk, java-native-interface, multi-touch

我正在编写一个仅使用本机代码的应用程序。
那么是否有可能在ndk中获得多点触控事件？
我觉得我搜索了整个网络，但没有找到任何东西！

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T18:45:09.687

是的。您可以查看调用的示例`native-activity`以了解如何获取输入事件。寻找`engine_handle_input`功能。`AInputEvent_getType`函数返回事件的类型。如果它正在`AINPUT_EVENT_TYPE_MOTION`使用`AKeyEvent_getAction`函数，您可以获得有关触摸事件的不同信息。使用`AMOTION_EVENT_ACTION_MASK`、`AMOTION_EVENT_ACTION_POINTER_INDEX_MASK`和枚举的方式`AMOTION_EVENT_ACTION_POINTER_DOWN`与`AMOTION_EVENT_ACTION_POINTER_UP`在 Java API 中使用它们的方式相同：[http ://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html](http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html)

# java - 在一个方法中使用多个 return 语句

> ID：12500830
> 
> 赞同：0
> 
> 时间：2012-09-19T18:38:53.647
> 
> 标签：java, set, return, pojo

```
import javax.swing.JOptionPane;

public class Speler
{

    public String naam;
    public String aantalKeerGespeeld;
    public String behaaldePunten;
    public String spelersInfo;

    public String setNaam(){
        return naam = JOptionPane.showInputDialog("Hoe heet je?");
    }

    public String setAantalKeerGespeeld(){
        return aantalKeerGespeeld = JOptionPane.showInputDialog("Hoe vaak heb je gespeeld?");
    }

    public String setBehaaldePunten(){
        return behaaldePunten = JOptionPane.showInputDialog("Hoe veel punten heb je behaald?");
    }

    public String setSpelersInfo(){
        **return naam = JOptionPane.showInputDialog("Hoe heet je?");
        return aantalKeerGespeeld = JOptionPane.showInputDialog("Hoe vaak heb je gespeeld?");
        return behaaldePunten = JOptionPane.showInputDialog("Hoe veel punten heb je behaald?");**

    }
    public String getNaam(){
        return naam;
    }

    public String getAantalKeerGespeeld(){
        return aantalKeerGespeeld;
    }

    public String getBehaaldePunten(){
        return behaaldePunten;
    }

    public String getSpelersinfo(){
        return naam;
        return aantalKeerGespeeld;
        return behaaldePunten;
    }
} 
```

看起来我不能返回或设置超过 1 个值。刚开始学习Java，在任何地方都很难找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:05:29.280

在仔细查看您的代码之后，我想澄清一些似乎是误解的地方。首先，据我所知，您不需要从任何方法返回多个值。事实上，以单词“set”开头的方法名根本不应该返回任何东西。另一方面，它需要一个参数来“设置”一个变量的值。例如

```
public void setNaam(String newNaam){
    naam = newNaam;
} 
```

请注意，我不使用 JOptionPane 对话框来获取名称。在代码的这一点上，我们不关心值来自哪里。其他一些方法负责实际从用户那里获取价值。此方法只是存储值以供以后使用。

另外，请注意，您有一个字段声明为

```
String spelersInfo; 
```

我相信`getSpelersInfo()`and`setSpelersInfo()`应该使用它，这就是为什么我声称您不需要从这些方法中的任何一个返回多个值。

最后，您似乎正在创建我们所说的[POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)。有关首字母缩写词含义的更多详细信息，请参阅此链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:50:24.633

语句的基本原理`return`是它使程序离开当前函数（子程序）并从调用函数的地方恢复，即返回地址。
当您输入一个函数时，返回地址会保存在调用堆栈中，因此很容易访问。

因此，对于您的代码，当您发出一个`return`语句然后另一个语句时，后者将不会被调用。
如果我没记错的话，它甚至不会在大多数编译器上编译。
因此，您需要做的是发出一个返回语句，将所有字符串一起返回。
这可以通过 Java 标准库中提供的许多基本[数据结构](http://en.wikipedia.org/wiki/Data_structure)来完成，如果您不想参与其中，您甚至可以将字符串附加到一个大字符串中，然后再将其拆分。

但现在我建议阅读一本基本的 Java 书籍/[教程](http://www.tutorialspoint.com/java/index.htm)，甚至是一本关于编程语言的基本书籍。
祝你好运！

[链接到一些基本的 Java 数据结构](http://www.tutorialspoint.com/java/java_data_structures.htm)

**编辑**
正如 Code-Guru 指出的并且是正确的，解决此问题的最佳方法是使用[POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)，您可以在他的回答中看到一个很好的解释。

尽管在我看来，阅读一本书并理解基本原理胜过所有技术解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:48:07.037

不，您不能以这种方式返回多个值。

关键字的工作方式`return`是它会立即将控制权返回给调用代码，使用返回的值作为函数的值。它看到的第一个返回调用将退出函数本身，因此任何后续代码都不会被执行。

通常，您不必以这种方式从函数返回多个值。但是，如果你想返回一个值列表，你可以将它们打包成一个 Container 对象（例如 的对象`java.util.Vector`）并返回向量对象。但是，在您列出的任何代码中，这似乎都不是必需的。

但是，在您发布的代码中，您似乎不想从函数返回值，而是希望您的类的实例变量由`JOptionPane`提示设置。`return`然后，一旦所有这些分配完成，您只需在函数末尾有一个语句。请注意，如果您的函数声明为`void`（即，它不返回值），则不需要`return;`在末尾有一行，因为一旦到达方法的末尾，它将退出。有时拥有`return;`是有用的（例如，如果您有多个返回点），但这是另一个时间研究的主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T19:03:52.287

许多现代语言具有返回多个值的优雅能力，但 java 没有。实际上，您必须选择其他东西。从除效率之外的所有方面来看，100% 可接受的解决方案是返回一个新类的新对象，该类旨在保存一组返回值。IE;

类 TwoStrings { 字符串名称；字符串地址；... }

并在您的代码中 return(new TwoStrings("foo","bar"));

另一个完全可以接受的选择是重构您的界面，以便一次返回一个值是很自然的。如果您想要“getXandY()，请将其重构为 getX() 和 getY()

一个常见的选择是使返回值的容器成为被调用者的参数之一。与其返回“姓名”和“地址”，不如向将加载姓名和地址的函数提供一个“人”（并可能返回成功的指示符）。

不太可接受的方法是使用非特定数组或向量返回多个值

最不可接受的是返回一个值，并隐藏其他值供调用者使用“副作用返回”

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T18:46:54.167

是的，你是对的，一个方法中不能有多个 return 语句。将 POJO 返回给调用者方法并在那里获取值怎么样？

# ruby-on-rails - 在 rails / devise / omniauth 中的某些模型中添加 facebook 生日信息

> ID：12500831
> 
> 赞同：0
> 
> 时间：2012-09-19T18:39:09.233
> 
> 标签：ruby-on-rails, facebook, devise

我在将生日信息从 facebook 获取到我的应用程序时遇到问题。最大的问题是误解了 FB 的权限页面：http: [//developers.facebook.com/docs/authentication/permissions/](http://developers.facebook.com/docs/authentication/permissions/)

这里的生日被描述为 user_birthday。但这不是您可以从响应中获取它的方式。我找到了一个非常简单的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:39:09.233

如果您有类似的方法，从 Facebook 获取生日很容易

```
def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
user = User.where(:provider => auth.provider, :uid => auth.uid).first
unless user
  user = User.create!(
                       provider:auth.provider,
                       uid:auth.uid,
                       email:auth.info.email,

                       password:Devise.friendly_token[0,20]
                       )
    @player = Player.new
    @player = Date.strptime(auth.extra.raw_info.birthday,'%m/%d/%Y')
    @player.save
end
user
end 
```

这里的关键部分是从正确的数组中获取strptime，它不是user_birthday，而只是生日。还要确保您已在 devise.rb 中将 user_birthday 设置为权限 -> 否则您只会收到 nil。

# javascript - 渲染大型 HTML 页面

> ID：12500832
> 
> 赞同：0
> 
> 时间：2012-09-19T18:39:11.037
> 
> 标签：javascript, java, html, json

由于某些定期报告的原因，我目前正在将大量数据写入 html。它只有一个大约 10,000 行的表。其中 7MB 越来越大。当用户打开它时，有时浏览器会因为大文件而变得无响应。

我可以将 JSON 存储在服务器上，然后在人们加载页面时获取该 JSON 并通过页面并一次显示 1000 条记录。

有什么更好的方法来实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:47:38.453

我做出以下假设

1.  数据存储在文件中
2.  数据只会附加到

如果是这样，您可以对文件实现分页。使用随机访问文件。只需逐行读取文件以获取许多记录。然后当你完成后，保存文件`position`。将 html 数据发送到浏览器时，也会保存文件位置。这可以使用链接中的查询参数来“获取更多数据”来完成。

当用户单击“获取更多数据”链接时，您重新打开文件，但首先`position()`到保存的位置。然后读取接下来的几条记录，保存位置等。

# php - json_encode 创建格式错误的 JSON 数据？

> ID：12500834
> 
> 赞同：3
> 
> 时间：2012-09-19T18:39:17.580
> 
> 标签：php, jquery, ajax

我有一个 codeigniter 应用程序将一些数据从我的数据库返回到一个视图。我正在尝试将其作为 json 数据发回。

问题是返回的数据格式错误。它看起来像这样：

```
 ({'2.5':"Admin1", '2.10':"Admin2"}) 
```

当我在 jsonlint.com 上测试它时，它表明这不是有效的 json。'2.5' 应该用双引号，而不是单引号。我不明白的是，在将数据传递给视图之前，我正在对我的数据调用 json_encode。我的控制器中的代码如下所示：

```
public function getbuildings()
{

        $buildings = array();
        $branchID = $this->uri->segment(3);
        $buildingforbranch = array();
        $_locations = $this->racktables_model->get_locations(); 
        //print_r($_locations);

        foreach ($_locations as $location)
        {
            if ((isset($location['L2FullID'])) && (!array_key_exists($location['L2FullID'],$buildings))) {
                $buildings[$location['L2FullID']] = $location['L2Location'];            
            }
        }

        foreach ($buildings as $key => $value)
        {

            $pattern = "/(".$branchID."\.\d)/i";            
            if (preg_match($pattern,$key))
            {
                $buildingforbranch[(string)$key] = $value;
            }

        }       
        header ('Content-Type: application/json; charset=UTF-8');
               echo json_encode($buildingforbranch);  

} 
```

从代码中可以看出，我什至尝试将 $key 显式转换为字符串数据类型。但这似乎并没有改变什么。有什么建议么？谢谢。

**编辑 1**

当我在 header / json_encode() 调用之前对 $buildingforbranch 进行 var 转储时，我得到以下结果：

```
array(3) {
  ["2.5"]=>
  string(7) "Admin 2"
  ["2.10"]=>
  string(7) "Admin 1"
  ["2.11"]=>
  string(3) "SB4"
} 
```

这里看起来不错……但是当我执行 console.log() 并从控制器传入数据时，浏览器会显示格式不正确的 json 数据。

**编辑 2** 这就是我想要完成的。当用户单击我页面上的控件时，我需要动态创建一个组合框。如果 ajax 调用导致一个空数组，我不想显示组合。否则，我尝试使用 ajax 调用的结果填充组合框。一切正常，除了我试图检查 json 数据长度的部分。无论发回什么，我的应用程序总是显示一个组合框。

这是代码：

```
$.ajax({
                        url:"<?php echo site_url('switches/getbuildings/');?>" + "/" + $selectedvalue,
                        type:'GET',
                        dataType:'json',
                        success: function(returnDataFromController) {
                               console.log("getbuildings ajax call successfull");
                                var htmlstring;
                                htmlstring="<select name='L2Locations' id='L2Locations'>";
                                htmlstring = htmlstring + "<option value='all'>All</option>";

                                //console.log(returnDataFromController);
                                 var JSONdata=[returnDataFromController];
                                 console.log(JSONdata);
                                 if (JSONdata.length != 0) 
                                 {
                                        for(var i=0;i<JSONdata.length;i++){
                                        var obj = JSONdata[i];

                                                  for(var key in obj){
                                                         var locationkey = key;
                                                         var locationname = obj[key];
                                                         htmlstring = htmlstring + "<option value='" + locationkey + "'>" + locationname + "</option>";
                                                    } //end inner for

                                                $('#l2locations').html(htmlstring);

                                        }//end outer for
                                    }

                                    else {
                                        //alert('i think undefined');
                                        $('#l2locations').html('');
                                    }

                            }//success

                    });//end ajax 
```

如果我直接调用返回 json 数据的页面，我会得到 [] 作为空数组的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:50:35.367

[] 实际上在您的特定情况下定义了一个具有单个元素的数组。但是正如我看到的，您正在使用 jQuery ajax `dataType: "json"`，这意味着返回的值已经是一个对象，您不需要再次解析它，所以只需删除 []：

```
var JSONdata=returnDataFromController; // instead of var JSONdata=[returnDataFromController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:17:19.473

如您在[其他问题](https://stackoverflow.com/questions/12484610/ajax-calls-from-php-page-checking-for-an-empty-array-as-result)中所述，您需要将 JSON 作为 JSON 处理。

基本概述是：

*   `returnDataFromController`将是一个字符串，使用`JSON.parse()`或[jQuery 的 parseJson()](http://api.jquery.com/jQuery.parseJSON/)将其转换为 JSON 对象
*   重写生成选项以迭代 JSON 对象而不是数组的循环。请注意，[jquery.each()](http://api.jquery.com/jQuery.each/)可以同时处理数组和对象将处理***这似乎是您缺少的部分。. .***

这里真正的关键是保持数据类型的正确性。你得到一个字符串，其中包含 JSON 数据。没有简单的方法将其转换为数组，因此将其作为 JSON 读取。由于它现在是 JSON 对象，因此您必须将其视为 JSON 对象，而不是数组。

检查[jQuery Utilities](http://api.jquery.com/category/utilities/)类别以获取其他与 JSON 相关的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:45:49.573

在firefox上使用firebug查看“net”选项卡上的“response”选项卡中显示的内容
此代码

```
<?php
echo json_encode(array(
  "2.5"  => "Admin 2",
  "2.10" => "Admin 1",
  "2.11" => "SB4"
)); 
```

`{"2.5":"Admin 2","2.10":"Admin 1","2.11":"SB4"}`在我的服务器（php5.3）和这个小提琴示例上 产生这个输出[http://www.phpfiddle.org/main/code/xqy-ize](http://www.phpfiddle.org/main/code/xqy-ize)

# wpf - 当该列进入编辑模式时，有没有办法更改 DataGridTextColumn 的绑定？

> ID：12500835
> 
> 赞同：3
> 
> 时间：2012-09-19T18:39:18.033
> 
> 标签：wpf, data-binding, wpfdatagrid, datagridtextcolumn

我真正想做的就是更改`StringFormat`a 上的特定绑定`DataGridTextColumn`，但由于这是由绑定定义的，我想我需要以某种方式更改整个绑定。

我想避免使用 a`DataGridTemplateColumn`的原因是因为 DataGridTextColumn 似乎有一些内置的基本功能，我会丢失并且必须编写代码来手动处理更多，例如：

*   开始输入非编辑模式单元格的能力，该单元格自动进入编辑模式
*   复制和粘贴数据（从 DataGrid 和 Excel 中）

当前绑定（所需的显示/读取模式绑定）

```
Binding="{Binding ADecimalNumber StringFormat={StaticResource ReadDecimalFormat}}" 
```

所需的编辑模式绑定

```
Binding="{Binding ADecimalNumber StringFormat={StaticResource WriteDecimalFormat}}" 
```

仅供参考，`ReadDecimalFormat`以 2 位精度显示十进制值，`WriteDecimalFormat`以显示输入的原始十进制值（全位精度，大多数情况下为 4 位）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:18:48.933

我想我已经暂时让它工作了，目前正在测试它。

```
<DataGridTextColumn Header="Value" ClipboardContentBinding="{Binding ADecimalNumber}">
    <DataGridTextColumn.ElementStyle>
        <Style TargetType="TextBlock">
            <Setter Property="Text" Value="{Binding ADecimalNumber, StringFormat={StaticResource ReadDecimalFormat}}"/>
        </Style>
    </DataGridTextColumn.ElementStyle>
    <DataGridTextColumn.EditingElementStyle>
        <Style TargetType="TextBox">
            <Setter Property="Text" Value="{Binding ADecimalNumber, StringFormat={StaticResource WriteDecimalFormat}}"/>
        </Style>
    </DataGridTextColumn.EditingElementStyle>
</DataGridTextColumn> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:20:06.700

我能够使用元素样式并检查我们是否正在编辑来完成此操作：

```
<DataGridTextColumn>
    <DataGridTextColumn.ElementStyle>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Text" Value="{Binding}" />
        </Style>
    </DataGridTextColumn.ElementStyle>

<DataGridTextColumn.EditingElementStyle>
    <Style TargetType="{x:Type TextBox}">
      <Setter Property="Text" Value="{Binding}" />
     </Style>
 </DataGridTextColumn.EditingElementStyle> 
```

# java - 如何在Java中加入来自oracle查询的两个结果集

> ID：12500837
> 
> 赞同：0
> 
> 时间：2012-09-19T18:39:34.533
> 
> 标签：java, oracle, jakarta-ee

是否可以连接两个 ResultSet，例如在 Java-oracle 编程中连接两个表？我正在编写一个查询两个不同的 oracle 数据库的 java 程序（数据库物理上位于不同的位置）。程序中sql1返回ResultSet ret1；sql2返回ResultSet ret2。假设 ret1 有以下数据：

```
Id   item
------------
1   item1
2   item 2
3   item 3
......... 
```

Ret2有以下数据

```
Id  info
---------
1  info1
2  info2
… 
```

我需要这样的结果

```
Id item info
----------------------
1   item1 info1
2   item2  info2 
```

我可以在java中做这样的事情吗：

```
Select ret1.id,ret1.item,ret2,info from ret1, ret2 where ret1.id=ret2.id 
```

我知道我可以从 ret1 循环并获取 id 然后从 ret2 获取信息；我想知道是否有一种快速的方法，比如加入两个表来加入两个结果集而不循环？实际上这两个结果都有 50 万行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:43:02.073

你可以尝试这样的事情：

```
 SELECT ret1.id,ret1.item,ret2.info
FROM ret1
RIGHT JOIN ret2 
ON ret1.id=ret2.id; 
```

[Sql 小提琴示例](http://sqlfiddle.com/#!4/ae35e/1)

**编辑：**

如果这两个 ResultSet 来自同一个数据库，那么在检索过程中为什么不使用 union 将它们组合起来呢？例如

```
select A, B
from C
union
select A, B
from D 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:00:06.490

您可以做的最好的事情是遍历结果集`ret1`和`ret2`Java 并 `id`在两者中进行比较，然后将结果存储在多维数组中，例如 -

```
 while (ret1.next()) {
        int id1 = rs.getInt("ID"); 
        while (ret2.next()){
               int id2 = rs.getInt("ID");
               if ( id1 == id2 )
               ...  
               ...
        }
  } 
```

正如其他人所说，更好的方法是使用`dblinks`. 正如汤姆·凯特所说——

> 您编写的代码越少，创建
> 的错误就越少 您编写的代码越多，您创建的错误越多
> 编写的代码越少，遇到的错误越少
> 编写的代码越多，遇到的错误越多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:03:04.337

最干净和更有效的解决方案是从一个数据库到另一个数据库的 dblink 并在查询中进行连接。否则，您必须遍历两个结果集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T19:10:08.013

您的预期输出是某种类型的 bean 还是其他 java 数据结构？
假设它是并且您正在使用[commons dbutils](http://commons.apache.org/dbutils/)来填充 javabean。
我将使用 BeanListHandler 创建一个 ret1 类型的 bean 列表[，](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/handlers/BeanListHandler.html)然后在 ret2 上使用[BeanMapHandler](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/handlers/BeanMapHandler.html)以从 ret2 获取以映射键为 id 的 bean 映射。
然后，当您遍历 ret1 时，您可以通过 ret1 的 id 访问 ret2 中的值。
希望这是有道理的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T03:15:56.947

您需要使用[DB Link](http://psoug.org/reference/db_link.html)来满足您的要求。

或者您可以尝试使用物化视图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T20:46:41.810

由于权限问题，不允许创建 dblink。我终于找到了另一个解决方案。这是我正在做的事情：我得到结果集 ret1 然后使用：

```
while (ret1.next()) { 
  get id from ret1, 
  query  info from another database;
  bla,bla,...
}
.... 
```

The performance is much better than getting two resultsets then looping one inside another...

# box-api - 请求票证时从 BOX Api 接收 JSON 响应

> ID：12500838
> 
> 赞同：1
> 
> 时间：2012-09-19T18:39:37.400
> 
> 标签：box-api

我正在尝试从[Box API 请求“票证”以对用户进行身份验证](http://developers.box.com/get-started/#authenticating) 。显然它只会发回一个 XML 响应。我确信这与 BOX 仍在使用 1.0 API 进行此用户身份验证过程这一事实有关。有没有办法接收 1.0 API 的 JSON 响应或为此过程使用 2.0 API？

*   https://www.box.com/api/ **1.0** /rest?action=get_ticket&api_key={api key} 返回 XML 响应。
*   https://www.box.com/api/ **2.0** /rest?action=get_ticket&api_key={api key} 返回 JSON 格式的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:40:19.960

此端点当前不返回 JSON。我们正在将我们的身份验证系统迁移到 OAuth2，它将像 V2 API 的其余部分一样返回 JSON 和 XML。

# mips - 获取用户输入并在 MIPS 中打印浮点数组

> ID：12500839
> 
> 赞同：0
> 
> 时间：2012-09-19T18:39:38.573
> 
> 标签：mips

我需要从用户那里获取一个浮点数组的输入，然后打印它。我尝试了以下代码：-

```
.text
.globl main
main:

 la $s0,size
 lw $s1,0($s0)      # size in $s1
 ori $s2,$zero,0    # i in $s2
 la $s3,arr         # arr in $s3

 li $v0,4
 la $a0,msg1
 syscall

 L1:
  beq $s2,$s1,DONE
  li $v0,6
  syscall
  swc1 $f0,0($s3)
  j UPDATE

 UPDATE:
  addi $s3,$s3,4
  addi $s1,$s1,1
  j L1

 DONE:
  li $v0,4
  la $a0,msg2
  syscall

  la $t0,arr
  ori $t1,$zero,0
  L2:
   beq $t1,$s1,EXIT
   lwc1 $f20,0($t0)
   li $v0,2
   mov.s $f12,$f20
   syscall
   addi $t0,$t0,4
   addi $t1,$t1,1
   j L2

  EXIT:
  li $v0,10
  syscall
    .data
  size: .word  9
  arr:  .float  0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0 
  msg1: .asciiz "Enter the elements:-"
  msg2: .asciiz "The elements are:-" 
```

当我给出输入时，系统调用 6 处出现运行时异常“无效浮点输入”。请帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:09:04.787

我猜您使用`,`的是小数点而不是`.`.

例如：不是输入，而是`3.14159`输入`3,14159`，这至少是 MARS 所不期望的。

除此之外，我认为`addi $s1,$s1,1`您的代码中的行应该是`addi $s2,$s2,1`，因为您似乎正在使用它`$s2`来保存索引计数器的当前值。

# jquery - jquery ui datepicker事件上的自定义文本

> ID：12500841
> 
> 赞同：0
> 
> 时间：2012-09-19T18:39:41.277
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我从数据库中接收到一个数组，其中包含一些日期和每天的描述。我希望显示一个 jquery datepicker 日历，其中使用自定义 css 类显示指定的日期。除此之外，用户应该能够单击特定日期并获得显示在不同 div 元素中的描述。

css 类的第一部分正在工作，但我无法显示描述。这是我到目前为止所拥有的：

```
var Event = function(text, className) {
    this.text = text;
    this.className = className;
};

var events = {};
events[new Date("09/18/2012")] = new Event("description 1", "pink");
events[new Date("09/19/2012")] = new Event("description 2", "green");

$("#minical").datepicker({
    beforeShowDay: function(date) {
        var event = events[date];
        if (event) {
            return [true, event.className, event.text];
        }
        else {
            return [true, '', ''];
        }
    },
    onSelect: function(dateText, inst) { 

    },
    minDate: "-3Y",
    maxDate: "+3Y",
    showButtonPanel: true,
    changeMonth: true,
    changeYear: true,
    altFormat: "yy-mm-dd",
    defaultDate: "+1w",
    "showButtonPanel": true
});

<style>
.pink > a { 
    background-color: pink !important;
    background-image:none !important;
}

.green > a { 
    background-color: green !important;
    background-image: none !important;
}
</style> 
```

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:20:04.873

我不确定我是否理解您的需求，但如果我理解正确，您希望在另一个 div 中显示所选日期/事件的描述。

您的`onSelect`活动可能是这样的：

```
onSelect: function(dateText, inst) { 
     var event = events[new Date(dateText)];
     $("#description").html(event.text);
} 
```

# java - 条纹：错误的动作类映射。

> ID：12500844
> 
> 赞同：3
> 
> 时间：2012-09-19T18:39:55.270
> 
> 标签：java, stripes

在 Stripes 中，如果存在错误的动作类映射，Stripes 的默认行为是将控件转发到发出请求的同一 JSP 并给出完整的错误堆栈。

我计划修改此行为，并希望在出现错误时提供更加用户友好的消息。

也就是说，如果 Stripes 中的操作映射错误，有没有办法重定向到新页面（错误页面）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:16:46.430

自从我上次从头开始设置 Stripes 应用程序已经有一段时间了，所以我不记得那个行为了。无论如何，您可以在 web.xml 中以标准方式设置错误页面：

```
<error-page>
    <error-code>404</error-code>
    <location>/path/to/page.jsp</location>
<error-page> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T14:00:27.623

您可以覆盖 ActionBeanContext#getSourcePageResolution 的行为。你可以在那里做你想做的事。

# php - PHP PDO 事务回滚后返回 JSON

> ID：12500848
> 
> 赞同：0
> 
> 时间：2012-09-19T18:40:05.370
> 
> 标签：php, jquery, transactions, pdo, rollback

我有一个使用 jQuery 的 AJAX 调用，它调用一个 PHP 脚本，然后将一些 JSON 格式的信息返回给`success`or`error`函数，如下所示：

```
$.ajax({
    url: 'crud/clients.php',
    dataType: 'json',
    type: 'POST',
    data: {
        oper:'add'
        ,id:''
        ,clientID:$('#clientID_add').val()
    },
    async: false,
    success: function(data){
        alert(data.errorsExist);
    },
    error: function(data){
        alert(data.appError);
    }
}); 
```

这是被调用的 PHP 脚本：

```
try {
                // Begin a transaction, turning off autocommit
                $dbh->beginTransaction(); 

                // Client INSERT
                $sthClients->execute($crudColumnValues);
                // Get the ID from the client we just INSERTED
                $lastInsertID = $dbh->lastInsertId();

                // Activity INSERT
                $sthActivity->execute();

                // commit the queries
                $dbh->commit();
            } 
            catch (PDOException $e) {
                // Close the connection
                $dbh = null;
                // Echo back JSON
                echo '{"appError": "'.$e->getMessage().'", "errorsExist":"Y"}';
                // rollback the transaction
                $testing = $dbh->rollBack();

                exit();
            } 
```

当我在 IDE 中测试错误处理和调试代码时，PHP 文件在`rollBack();`调用处停止，并且我的 JSON 在回滚后永远不会回显到我的 AJAX 调用中。

有什么方法可以在调用 a 时将该 JSON 返回到我的 AJAX 函数`rollBack`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:43:08.373

可能是因为这个：

```
// Close the connection
$dbh = null;
.....
$testing = $dbh->rollBack(); // $dbh is null 
```

# jquery - 用浮动包装的 div

> ID：12500855
> 
> 赞同：0
> 
> 时间：2012-09-19T18:40:41.587
> 
> 标签：jquery, css

我有 4 个 div，一个我想向左浮动，一个视频播放器（加载了 jquery），另一个包含一些将向右浮动的帮助/提示文本。这两个应该在顶部排列。在视频播放器下方将是一个 div 内的表格。

当有人单击表格中的按钮时，应在左侧视频播放器和表格之间放置一个新的 div。这是我的代码：

```
<div id="player-ipad"></div>
<div id="help-tips-ipad">
<p><img src="images/help-35-30.png" style="padding:8px;" align="left"/><h2 style="color:black;">Help Resources</h2><hr>
<p>Read our <a href="http://www.mysite.com/support/articles/quickstart-page">Quickstart Guide</a></p>
<p>Visit our <a href="http://www.mysite.com/support">Support Forum</a> and ask a question</p>
</p>
<p><img src="images/quicktip-35-30.png" style="padding:8px;" align="left"/><h2 style="color:black;">Tips</h2><hr>
<ul>
<li>Help tips here.</li>
<li>More tips.</li>
</ul>
</p>
</div>

<div id="quote"><p></p></div>

<div id="prettytablediv-ipad">
<p>
<table id="webcam-table" class="pretty">
<thead>
    <tr>
        <th>Camera Name</th>
    </tr>
</thead>
<tbody>
<?php

for($i=0;$i<$num_rows;$i++)
{

?>
<tr>
<td>
    <input type="submit" class="play" data-type="<?php echo $result_cameras[$i]["camera_type"]; ?>" data-hash="<?php echo $result_cameras[$i]["camera_hash"]; ?>" value="<?php echo $result_cameras[$i]["camera_name"]; ?>">
</td>
</tr>

<?php
}
?>
</tbody>
</table>
</p>
</div> 
```

我拥有的CSS是：

```
#prettytablediv-ipad {
    width: 550px;
    float: left;
}
#help-tips-ipad {
    width: 320px;
    float: right;
}
#player-ipad {
    width:320px;
    height:240px;
    background-image:url(../../images/videoPlaceHolder01.JPG);
    float: left;
    margin: 0 0 15px;
} 
```

当有人单击按钮时，第四个 div 出现：

```
$(document).on("click", ".play", function() {
   $('#quote p').html("INFO").css({'border': '1px solid', 'margin': '10px 0px', 'padding': '15px 10px 15px 50px', 'background-repeat': 'no-repeat', 'background-position': '10px center', 'color': '#00529B', 'background-color': '#BDE5F8', 'width': '320px','display': 'block','clear': 'left'});
}); 
```

早些时候有人帮我解决了这个问题，这里有一个[**小提琴**](http://jsfiddle.net/4HgyB/11/)显示它完美地工作。但是我已经对我的代码进行了所有更改，但我不明白为什么我不能让它像小提琴一样工作。

我的结果显示在帮助/提示文本下方而不是左侧的表格。它似乎被包裹在它旁边。另外，现在当有人单击按钮时，信息消息位于表格上方（这是正确的，但它们都应该左对齐）。

因为表格 ( `#prettytablediv-ipad`) 漂浮在帮助/提示的左侧，所以使用`clear:left`可以解决这个问题，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:10:13.470

你有很多未闭合的标签

```
<div>
  <p></p>
</div> 
```

一切都用 div #help-tips-ipad 包装

```
#help-tips-ipad {
width: 320px;
float: right;
] 
```

# sql-server-2008-r2 - 根据日期选择记录

> ID：12500856
> 
> 赞同：-2
> 
> 时间：2012-09-19T18:40:42.603
> 
> 标签：sql-server-2008-r2

假设数据如下：

```
 ID      EffDate            Rate
   1      12/12/2011         100
   1      01/01/2012         110
   1      02/01/2012         120
   2      01/01/2012          40
   2      02/01/2012          50
   3      01/01/2012          25
   3      03/01/2012          30
   3      05/01/2012          35 
```

我如何找到截至 2012 年 1 月 15 日 ID 2 的费率？或者，2012 年 1 月 15 日 ID 1 的费率？

换句话说，当日期介于两条记录的 EffDate 之间时，如何进行查询以找到正确的汇率？（价格应为所选日期之前的日期）。

谢谢，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:42:29.693

```
SELECT TOP 1 Rate FROM the_table
WHERE ID=whatever AND EffDate <='whatever'
ORDER BY EffDate DESC 
```

如果我没看错的话。

（编辑以适合我不知道的 ms-sql 的想法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:53:44.367

这个怎么样：

```
SELECT Rate 
  FROM Table1 
 WHERE ID = 1 AND EffDate = (
  SELECT MAX(EffDate) 
    FROM Table1 
   WHERE ID = 1 AND EffDate <= '2012-15-01'); 
```

这是一个可以使用的[SQL Fiddle](http://sqlfiddle.com/#!3/afe44/8)。我在这里假设“ID/EffDate”对对于所有表都是唯一的（至少相反的情况没有意义）。

# c++ - OpenMP Mac OSX Lion c++ 链接器错误未定义的符号架构 x86_64：“_omp_get_thread_num”

> ID：12500859
> 
> 赞同：5
> 
> 时间：2012-09-19T18:40:57.263
> 
> 标签：c++, osx-lion, openmp

我在互联网上的任何地方都找不到这个问题。所以我的链接器错误是：架构 x86_64 的未定义符号：“_omp_get_thread_num()”

这是我的代码：

```
int nthreads;
int tid;
#pragma omp parallel private(tid)
{
    tid = omp_get_thread_num();
    if (tid == 0) 
    {
        nthreads = omp_get_num_threads();
        printf("number of threads: %d\n", nthreads);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:50:40.793

看起来你忘了使用`-fopenmp`标志来告诉编译器你想使用 openmp，你的例子编译得很好，就像`g++ test.cpp -fopenmp -o test`在 mac osx lion 上一样

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:43:05.833

很难诊断出这样的问题。我猜链接器找不到库。将 libgomp 添加到您的链接器库。

您必须链接库才能获取对象。

这里的类似问题：

[http://www.eclipse.org/forums/index.php/m/901477/](http://www.eclipse.org/forums/index.php/m/901477/)

以及更多通过互联网。原因是没有链接库。

你可以通过添加：`-fopenmp`

在海湾合作委员会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-09T07:31:26.367

如果您使用的是 OSX，您应该执行以下步骤：

1.  `brew install gcc`
2.  `brew install libomp`
3.  `g++-9 -fopenmp -o main main.cpp` （而不是' `9`'你应该写你的版本`gcc`）
4.  运行`./main`

# objective-c - 有没有办法排除某些文件提交到 iOS 应用商店

> ID：12500860
> 
> 赞同：6
> 
> 时间：2012-09-19T18:40:57.587
> 
> 标签：objective-c, ios, xcode

我正在开发一个我想提交到商店的应用程序，并且我有一些文件是项目的一部分，我不想成为存档的一部分。

例如，我制作了一些视图控制器文件，但不会用于此版本的应用程序，或者我正在读入数据库中的一些数据文件，这些文件在发行版中不需要。

在创建存档之前我是否必须删除所有内容，或者我可以选择一些不包括在内的方法。故事板上的一些视图控制器也是额外的，我也必须删除它们吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T18:44:45.310

只有属于您正在归档的目标的文件才会包含在归档中并提交到 App Store。您可以通过选择它并编辑右侧文件检查器面板中的复选框来从目标中添加或删除文件：

![在此处输入图像描述](../Images/f8926e8cbe69cd2d83121aed3c5c2b82.png)

要查看目标中包含的所有文件，请在左侧的文件浏览器中选择您的项目。然后选择您的目标和**Build Phases**选项卡。

在**Copy Bundle Resourses**下，您将看到将添加到应用程序包（和存档）中的所有资源文件。

![在此处输入图像描述](../Images/a2b3afe9349c0091bad5552a482c6e18.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:44:19.453

您可以有选择地从 Xcode 项目中排除文件：

在您的项目设置中，选择您的目标。在您的目标中，选择 Build Phases 窗格。从那里，您可以通过“编译源”和“复制捆绑资源”列表排除编译源和捆绑源。

# magento - Google Affiliate 与 Magento 1.7 的集成

> ID：12500864
> 
> 赞同：1
> 
> 时间：2012-09-19T18:41:26.073
> 
> 标签：magento, pixel, affiliate

所以也许你们可以在这里帮助我，我正在尝试将谷歌跟踪像素集成到他们的谷歌联盟计划中。我在这里使用以下代码[http://www.studio1909.com/2009/10/16/google-affiliate-network-conversion-tracking-pixel-magento-ecommerce/](http://www.studio1909.com/2009/10/16/google-affiliate-network-conversion-tracking-pixel-magento-ecommerce/)但是，在与谷歌来回走动之后，他们是当涉及到可配置产品时，对于上述链接中的代码打印数据的方式并不那么兴奋。

```
<!--Start Google Affiliate Integration-->

<?php 
$lastOrderId = Mage::getSingleton('checkout/session')->getLastOrderId();
$order = Mage::getSingleton('sales/order');
$order->load($lastOrderId);

$order = Mage::getModel('sales/order')->load($lastOrderId);
foreach ($order->getAllItems() as $item) {
        $productArray[] = array(
                "product_sku" => $item->getSku(),
                "product_magento_id" => $item->getProductId(),
                "product_name" => $item->getName(),
                "product_qty" => $item->getQtyOrdered(),
                "product_price" => $item->getPrice(),
                "product_discount_amount" => $item->getDiscountAmount(),
                "product_row_price" => $item->getPrice() - $item->getDiscountAmount(),
                 );

        };
?>

<?php
$_totalData = $order->getData();

$_subtotal = $_totalData['subtotal'];

$_orderID = $_totalData['increment_id'];

?>

<img src="https://clickserve.cc-dt.com/link/
order?vid=KVENDORID&oid=<?php echo "$_orderID"; ?>&amt=<?php echo "$_subtotal"?>&prdsku=<?php foreach ($productArray as $key) {echo $key['product_sku']."^";}; 
?>&prdnm=<?php foreach ($productArray as $key) {echo $key['product_name']."^";};    
?>&prdqn=<?php foreach ($productArray as $key) {echo $key['product_qty']."^";};    
?>&prdpr=<?php foreach ($productArray as $key) {echo $key['product_price']."^";};
?>&prcatid=<?php foreach ($productArray as $key) {echo "your-product^";};
?>" width=1 height=1>

<!--End Google Affiliate Integration--> 
```

这是最终结果

```
<!--Start Google Affiliate Integration-->

<img src="https://gan.doubleclick.net/gan_conversion?advid=MYID&event_type=transaction&oid=10000XXXX&amt=19.0000&fxsrc=USD&prdsku=DVT2756CH CHAR M^DVT2756CH CHAR M^&prdnm=DaVinci 1952 In Charcoal T-Shirt^DaVinci 1952 In Charcoal T-Shirt^&prdqn=1.0000^1.0000^&prdpr=19.0000^0.0000^&prcatid=4425^4427^" width=1 height=1>

<!--End Google Affiliate Integration--> 
```

所以问题是有没有办法编辑上面的代码，所以它只是呼应了主要的可配置产品而没有简单的产品。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:21:05.097

一个很好的地方是显示订单项目的模板： `app/design/frontend/base/default/template/sales/order/items.phtml`

循环的代码是：

```
<?php $_items = $_order->getItemsCollection(); ?>
<?php $_index = 0; ?>
    <?php $_count = $_items->count(); ?>
<?php foreach ($_items as $_item): ?>
<?php if ($_item->getParentItem()) continue; ?> 
```

因此，这可能是获得所需内容的好方法。

# javascript - 使用 jquery 从另一个函数调用一个函数

> ID：12500866
> 
> 赞同：1
> 
> 时间：2012-09-19T18:41:25.730
> 
> 标签：javascript, jquery, json, function

我正在尝试在 javascript 中计算出一个迭代大约 10 个函数的函数。

我有一个函数可以创建服务以将 json url 调用到我的函数中。这与下面的 main 函数通信，该函数调用带有相应 url 选项的服务函数，以用作启动 json 请求的数据。请看下文；

```
var landp = {
getCountryCode : function(){
    console.info('landp.GetCountryCode');
    return window.location.pathname.match(/\/([a-zA-Z]{2})/)[1].toLowerCase();
},
Service : {
    getBaseUrl : function(){
        console.info('landp.Service.GetBaseUrl');
        return sprintf("/%s/service", landp.getCountryCode())
    },
    callService : function(method, options){
        console.info('landp.Service.CallService');
        var url = sprintf("%s/%s", landp.Service.getBaseUrl(), method);
        $.ajax({
            url : url,
            method : 'GET',
            success : options.success,
            error : options.error
        })
    },
    getCategories : function(options){
        landp.Service.callService('category', options);
    },
    getCategoryId : function(options){
        landp.Service.callService('category/id/13', options);
    },
            getCategoryTopTen : function(options){
        landp.Service.callService('category/name/top-ten', options);
    },
    getSeeMoreItems : function(options){
        landp.Service.callService('see-more', options);
    },
    getPartnerOffers : function(options){
        landp.Service.callService('partner-offers', options);
    }
} 
```

}

这可以正常工作，因为您可以看到 getCategoryTopTen 将调用一个包含我需要用来获取正确项目（如 item.name、item.description 等）的 json 数据的 url。代码如下；

```
landp.Service.getCategoryTopTen({
    success : function(data){
        $('#header').after('<div id="cat-sub-options"></div>');
        $('#cat-sub-options').after('<div class="flexslider"><ul class="slides"></ul></div><div id="carousel-button" class="click"></div>');            
        $.each(data[0].items, function(i, item){
        $('.flexslider .slides').append('<li class=""><h5>' + i + '</h5><a href="' + item.url + '"><img src="' + item.imageLargeUrl + '" alt="' + item.name + ' image" /><span>' + item.name + '</span></a></li>');
    });
    },
    error : function(){
        console.log("Error getting categories");
    }
}) 
```

如您所见，上面的代码有效，它将正确的信息提取到正确的元素等中。目前大约有 10 个类别，例如；

getCategoryTopTen getCategoryHistoryHeritage getCategoryWheretogo getCategoryShopping getCategorySportyPeople

正如你所看到的，每一个都将被分配到 json 文件中的一个类别 url。

我要解决的是如何对所有类别执行上述操作，例如我们拥有的类别：landp.Service.getCategoryTopTen 使用下面的代码而不是在每个类别上都写出来我可以将变量传递给每个函数吗？我将不得不对每个类别进行这些 json 调用。

任何帮助将非常感激。

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:53:51.137

您可以遍历方法名称的数组，并每次使用相同的回调函数调用它们。可以通过使用括号表示法来获取函数：

```
landp.Service[methodname](function(){…}); 
```

但是，我强烈建议不要为系统中的每个类别定义额外的方法，而只是将类别名称作为函数的参数：

```
…
getCategoryById: function(id, options){
    landp.Service.callService('category/id/'+id, options);
},
getCategoryByName: function(name, options){
    landp.Service.callService('category/name/'+name, options);
},
… 
```

现在，数组上的循环更方便：

```
var cats = ["top-ten", "HistoryHeritage", "Wheretogo", "Shopping", "SportyPeople"];
for (var i=0; i<cats.length; i++) {
    var catname = cats[i];
    landp.Service.getCategoryByName(catname, {…});
} 
```

顺便说一句，您需要从元素中删除 id，因为您将多次创建它们 - 但 id 必须是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:47:12.903

我不确定我是否完全理解问题所在，但您可能会从使用 [] 表示法访问 JavaScript 子项中受益不少。因此，例如， `landp.Service.getCategoryTopTen()`您可以打电话而不是打电话`landp.Service["getCategoryTopTen"]()`，然后可以将其拉出，这样您就有了类似的东西：

```
var category="TopTen"
var method="getCategory"+category
land.Service[method](...) 
```

然后你可以围绕它包装你的逻辑以迭代或以其他方式自动化。

# web-services - 如何将 CXF 与 SDO 一起使用？

> ID：12500873
> 
> 赞同：0
> 
> 时间：2012-09-19T18:41:52.200
> 
> 标签：web-services, cxf, sdo

我尝试使用“合同优先”模式为现有的 Web 服务构建基于 CXF 的客户端应用程序。

XSD 相当复杂，因此我正在寻找一种方法来利用 SDO 之类的东西，从而避免为 WSDL 生成代码。WSDL2Java 工具制作 20K 行的类。我已经在 IBM WebSphere ESB 中使用过 SDO，我希望我可以重用我以前的代码。

我找不到使用 CXF 执行此操作的方法，只有这个：[http](http://cxf.apache.org/docs/sdo.html) ://cxf.apache.org/docs/sdo.html 。

关于 SDO 的文本似乎已经过时，因为 WSDL2Java 工具不再支持“-db sdo”参数。它说：

```
WSDL2Java -o D:/wsdl2java_out -d sdo -uri WS.wsdl
...
Caused by: org.apache.axis2.wsdl.codegen.CodeGenerationException: No proper databinding has taken place 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:16:56.903

您使用的是 Axis2 wsdl2java 命令，而不是 CXF wsdl2java。

# javascript - Three.js 第一人称控制

> ID：12500874
> 
> 赞同：11
> 
> 时间：2012-09-19T18:41:57.543
> 
> 标签：javascript, 3d, webgl, three.js

我正在使用 Three.js 和 WebGL，无法完全按照我想要的方式获得控件。我选择尝试“滚动我自己的”控件，因为 Three.js 的 FirstPersonControls 不使用指针锁定。

无论如何，我从内置的 FirstPersonControls 中获取了我的大部分代码，将其转换为使用指针锁定（`movementX`而不是`pageX - offset`），但是我在平滑外观运动时遇到了麻烦。

这是我的`onMouseMove`（使用`originalEvent`，因为它是一个 jquery 事件）：

```
onMouseMove: function(e) {
    if(!document.pointerLockElement) return;

    var moveX = e.originalEvent.movementX       ||
                    e.originalEvent.mozMovementX    ||
                    e.originalEvent.webkitMovementX ||
                    0,
        moveY = e.originalEvent.movementY       ||
                    e.originalEvent.mozMovementY    ||
                    e.originalEvent.webkitMovementY ||
                    0;

    //Update the mouse movement for coming frames
    this.mouseMovementX = moveX;
    this.mouseMovementY = moveY;
} 
```

我的`Controls.update()`（在每个动画帧上调用，带有`THREE.Clock`增量）：

```
update: function(delta) {            
    if(this.freeze) {
        return;
    }

    //movement, works fine
    if(this.moveForward) this.camera.translateZ(-(actualMoveSpeed + this.autoSpeedFactor));
    if(this.moveBackward) this.camera.translateZ(actualMoveSpeed);

    if(this.moveLeft) this.camera.translateX(-actualMoveSpeed);
    if(this.moveRight) this.camera.translateX(actualMoveSpeed);

    /////////
    //ISSUES ARE WITH THIS CODE:
    /////////
    //look movement, really jumpy
    this.lon += this.mouseMovementX;
    this.lat -= this.mouseMovementY;

    this.lat = Math.max(-85, Math.min(85, this.lat));
    this.phi = (90 - this.lat) * Math.PI / 180;
    this.theta = this.lon * Math.PI / 180;

    this.target.x = this.camera.position.x + 100 * Math.sin(this.phi) * Math.cos(this.theta);
    this.target.y = this.camera.position.y + 100 * Math.cos(this.phi);
    this.target.z = this.camera.position.z + 100 * Math.sin(this.phi) * Math.sin(this.theta);

    this.camera.lookAt(this.target);
} 
```

这段代码确实有效，但是随着鼠标的移动，移动相机会变得很跳跃。我真的可以使用一些帮助来弄清楚如何平滑它。

[你可以在这里](http://static.pantherdev.com/dev/arena/client)看到我所说的“跳跃”是什么意思。我是 Three.js、WebGL 和一般 3D 的新手，因此不胜感激。

谢谢，

-乍得

* * *

**编辑**在使用[@przemo_li](https://stackoverflow.com/users/330242/przemo-li)之后，这是他想出的工作代码：

```
onMouseMove: function(e) {
    if(!document.pointerLockElement) return;

    var moveX = e.originalEvent.movementX       ||
                    e.originalEvent.mozMovementX    ||
                    e.originalEvent.webkitMovementX ||
                    0,
        moveY = e.originalEvent.movementY       ||
                    e.originalEvent.mozMovementY    ||
                    e.originalEvent.webkitMovementY ||
                    0;

    //Update the initial coords on mouse move
    this.mouseMovementX += moveX; //aggregate mouse movements as a total delta delta
    this.mouseMovementY += moveY;
},
update: function(delta) {            
    if(this.freeze) {
        return;
    }

    //movement
    if(this.moveForward) this.camera.translateZ(-(actualMoveSpeed + this.autoSpeedFactor));
    if(this.moveBackward) this.camera.translateZ(actualMoveSpeed);

    if(this.moveLeft) this.camera.translateX(-actualMoveSpeed);
    if(this.moveRight) this.camera.translateX(actualMoveSpeed);

    //look movement
    this.lon += this.mouseMovementX;
    this.lat -= this.mouseMovementY;

    this.mouseMovementX = 0; //reset mouse deltas to 0 each rendered frame
    this.mouseMovementY = 0;

    this.phi = (90 - this.lat) * Math.PI / 180;
    this.theta = this.lon * Math.PI / 180;

    if(this.constrainVertical) {
        this.phi = THREE.Math.mapLinear(this.phi, 0, Math.PI, this.verticalMin, this.verticalMax);
    }

    this.target.x = this.camera.position.x + 100 * Math.sin(this.phi) * Math.cos(this.theta);
    this.target.y = this.camera.position.y + 100 * Math.cos(this.phi);
    this.target.z = this.camera.position.z + 100 * Math.sin(this.phi) * Math.sin(this.theta);

    this.camera.lookAt(this.target);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-04T23:21:00.333

刚刚添加的“官方”版本：[https ://github.com/mrdoob/three.js/blob/master/examples/js/controls/PointerLockControls.js](https://github.com/mrdoob/three.js/blob/master/examples/js/controls/PointerLockControls.js)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T19:29:41.513

1）约束？在您的代码中，您将鼠标 X 移动限制为 -|+ 85 不太可能需要这种约束。

2）聚合帧期间发生的所有事件在您的代码中，您可以使用每个新事件覆盖鼠标移动。因此，如果您在帧期间收到 3 个事件，则只会存储最近的事件。

添加这些动作。比渲染帧后可以清除计数。并再次开始收集事件。

# visual-studio-2010 - 当 WCF 位于控制台主机应用程序中时如何添加服务引用？

> ID：12500877
> 
> 赞同：0
> 
> 时间：2012-09-19T18:42:08.557
> 
> 标签：visual-studio-2010, wcf

我想在控制台应用程序中自托管 WCF 服务，以便在我的托管层中进行调试。我还有一个 WPF 应用程序需要调用这个 WCF 服务。但是，我无法从 WPF 项目向控制台项目添加服务引用。在这种情况下我该怎么办？使用 IIS 自主机很容易做到这一点，只需添加一个 .svc 文件并将其指向 WCF 服务，但是如何使用控制台主机来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:55:08.660

使用“添加服务引用”的一种替代方法是[使用 SvcUtil 生成客户端](http://msdn.microsoft.com/en-us/library/ms733133.aspx)。只需启动控制台应用程序中托管的服务，并在 Visual Studio 命令提示符中执行一个带有类似这样签名的命令（全部在*一个*命令行上）：

```
svcutil.exe /language:cs /out:generatedProxy.cs /config:app.config 
http://localhost:8000/ServiceModelSamples/service 
```

最后一位是您服务的实际地址，可能因您的主机而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:06:47.780

首先运行控制台应用程序并确保服务正在运行。然后去 Visual Studio 中的 AddServiceReference 并按照你的直觉

# android - 部分视图失效未按预期工作

> ID：12500883
> 
> 赞同：0
> 
> 时间：2012-09-19T18:42:21.443
> 
> 标签：android, android-custom-view

在尝试处理自定义视图时，我正在尝试处理触摸事件和部分失效。为此，它只是一排以正方形为单位的数字，以填满屏幕。

现在，当我按下一个块时，我使用这个得到块的矩形：

```
private Rect getDirtyRegion(float e){
    // The value is the slot number
    mValue = ((int)e / mBlockSize);

    // start X of the "stall"
    int x1 = mValue * mBlockSize;
    int y1 = 0;

    int x2 = x1 + mBlockSize;
    int y2 = getMeasuredHeight();

    return new Rect(x1, y1, x2, y2);
} 
```

它按预期工作。当屏幕上只有几个时效果很好。这是我的`onTouchEvent`：

```
@Override
public boolean onTouchEvent(MotionEvent e){        

    switch(e.getAction()){
    case MotionEvent.ACTION_DOWN:
        Log.d(TAG, "ActionDown");

        setPaint(PinEntry.PAINT_PRESSED);
        invalidate(getDirtyRegion(e.getX()));
        break;

    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_CANCEL:

        setPaint(PinEntry.PAINT_NORMAL);
        invalidate();
        break;
    }
    return true;
} 
```

（这已经被重写了好几次，所以`invalidate`没有矩形的调用并不总是这样。）

我所追求的是，​​当我点击一个数字时，它会重新绘制以通过我在`setPaint`. 当我释放时，重置。

当我在 a 中有多个视图时`ScrollView`，它会中断。当我按下并释放，甚至拖到边界外（触发`ACTION_CANCEL`）时，它会重置。但是，回到该行会导致整个事情因“PRESSED”而无效。

这是 TouchEvent 逻辑问题、绘图问题还是我对创建自定义视图缺乏经验的某种组合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:53:51.703

我最终将它分成两个不同的类，一个用于容器（父级），另一个用于每个单独的块并使用类的`draw(Canvas)`方法`View`。

# php - PHP - 如果 URL 中有这个，不要显示 div

> ID：12500884
> 
> 赞同：2
> 
> 时间：2012-09-19T18:42:21.277
> 
> 标签：php, javascript, url, host

如果 url 是什么东西，我正在尝试找到隐藏 DIV 的最佳方法。例如，我有 2 个站点使用相同的模板，但只有其中 1 个站点我想显示一些东西。

所以站点 A 是 domain.com 站点 B 是 site.domain.com

我想要它，所以如果 site.domain.com 是人们所在的地方，那么不要显示 DIV ID="hide"。我还需要它不仅适用于特定的 URL，而且适用于它之后的任何内容，因此 site.domain.com/aboutus.php、site.domain.com/contact.php 等......

我想用 PHP 或 JS 来做这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:45:25.193

只需检查`HTTP_HOST`：

```
<?php
    if($_SERVER['HTTP_HOST'] != 'site.domain.com'){
        echo '<div>contents</div>'; // display div, he is not on site.domain.com
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:47:00.177

您可能可以执行以下操作：

```
<php if($_SERVER['HTTP_HOST'] == 'example.com'): ?>
<div>This is example.com</div>
<?php else: ?>
<div>This is NOT example.com</div>
<?php endif; ?> 
```

但我认为你最好创建某种 site1_settings.php 包含在一个站点的每个页面中，然后 site2_settings.php 包含在第二个站点中。一方面，这将使在本地测试代码变得更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:45:39.790

我通常为此使用[strpos 。](http://php.net/manual/en/function.strpos.php)

```
if(strpos($_SERVER["HTTP_HOST"], "site") !== FALSE)
{
  // The user is on site.domain.com
}
else
{
  // The user is on domain.com
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T18:47:20.067

这将是我的 javascript 实现。注意：jQuery

```
if(window.location.indexOf("textinurl"))
{
    $('#DivId').hide();

} 
```

# perl - perl split() 中的分隔符保留模式

> ID：12500887
> 
> 赞同：5
> 
> 时间：2012-09-19T18:42:28.197
> 
> 标签：perl, split

```
split /PATTERN/,EXPR 
```

我在一本书中读到以下内容，

> 在**split**中使用模式时，请务必避免模式中的内存括号，因为这些会触发分隔符保留模式。

我似乎找不到详细解释这一点的文档。有人可以简要解释一下**分隔符保留模式**及其可能的用法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T18:46:36.600

这记录在[`perldoc -f split`](http://perldoc.perl.org/functions/split.html)最后（代码中的评论是我自己的）：

> 如果`PATTERN`包含捕获组，则对于每个分隔符，为组捕获的每个子字符串生成一个附加字段（按照指定组的顺序，根据反向引用）；如果任何组不匹配，则它会捕获该 `undef`值而不是子字符串。另外，请注意，只要有分隔符（即发生拆分时），就会生成任何此类附加字段，并且此类附加字段**不**计入`LIMIT`. 考虑在列表上下文中评估的以下表达式（每个返回的列表都在相关注释中提供）：
> 
> ```
> split(/-|,/, "1-10,20", 3)       # ('1', '10', '20')
>                                  # No retention, '-', ',' consumed
> 
> split(/(-|,)/, "1-10,20", 3)     # ('1', '-', '10', ',', '20')
>                                  # Split on and retain '-' or ','
>                                  # 5 elements returned
> 
> split(/-|(,)/, "1-10,20", 3)     # ('1', undef, '10', ',', '20')
>                                  # undef because '-' matches
> 
> split(/(-)|,/, "1-10,20", 3)     # ('1', '-', '10', undef, '20')
>                                  # undef because ',' matches
> 
> split(/(-)|(,)/, "1-10,20", 3)   # ('1', '-', undef, '10', undef, ',', '20')
>                                  # one match per capturing group. (-) matches -, but
>                                  # (,) returns undef on trying to match -.
>                                  # 7 elements (!) 
> ```

* * *

因此，两个有趣的怪癖可能会引起粗心大意的人：

*   `undef`每当捕获组不匹配时，列表上下文中的 s 的生成，但其他东西`PATTERN`在

*   您可以使用捕获组进行拆分，指定`LIMIT`为`$n`，并且结果列表具有多个`$n`元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:52:21.110

这意味着如果您使用带有括号的正则表达式来生成反向引用，那么匹配的分隔符将被保留，并与拆分值一起返回到列表中。

# backbone.js - mailto：链接吞噬了一条路线

> ID：12500890
> 
> 赞同：0
> 
> 时间：2012-09-19T18:42:30.827
> 
> 标签：backbone.js, mailto

我在一个相对简单的 Backbone 视图上使用 jquery linkify 插件。此应用程序之外的网页链接正常工作，并且使用浏览器查看源代码，我看到 mailto 链接已正确生成。但是单击 mailto 链接会将 /mailto:q@example.com 附加到当前 URL（例如[http://example-acme.staging.myservername.com/mailto:q@example.com](http://example-acme.staging.myservername.com/mailto:q@example.com)）。

如果我使用 Inspector 复制生成的 HTML 并将其粘贴到任意页面的源中（不在此应用程序中），mailto 链接将按预期运行，从我的邮件客户端打开一个新的消息窗口。问题在 Chrome 和 Firefox 中是相同的。

您是否看到并解决了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:09:14.677

只是为了结束：我在处理程序中添加了一个事件处理程序，使用 window.location.assign(mailto) 并完成了工作。不一定“正确”但实用。@Brad，感谢您的参与！

# c# - 在 C# Visual Studios 项目中显示在 SSRS 中创建的一个或多个现有报表没有报表服务器？

> ID：12500892
> 
> 赞同：0
> 
> 时间：2012-09-19T18:42:43.900
> 
> 标签：c#, visual-studio-2010, ssrs-2008

我需要在不使用报表服务器的情况下从 C# Visual Studios 项目部署在 SSRS 中创建的一个或多个现有报表？我们正在做的项目只需要3个报表，项目负责人认为建立报表服务器是不合理的。

我们正在使用 Visual Studio 2010 和 Microsoft SQL Server 2008 R2。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:12:12.423

所以你想在没有报表服务器的情况下生成你的报表？

如果是这样，最好的（但不是推荐选项）是将 rdl 文件（您的报告）转换为 rdlc 文件（客户端报告）并将它们与 ReportViewer 控件（WebForms/WinForms）一起使用。根据您的实施，这可能很难做到。

这是来自 MSDN的[示例。](http://msdn.microsoft.com/en-us/library/ms252109%28v=vs.80%29.aspx)

# javascript - Google 脚本方法 getLastRow 为空

> ID：12500901
> 
> 赞同：1
> 
> 时间：2012-09-19T18:43:18.583
> 
> 标签：javascript, google-apps-script

```
function getInfo(){
  var id = "xyz";
  var sheet = SpreadsheetApp.getActiveSheet();
  var lastRow = sheet.getLastRow();
  for (var i = 2; i < (lastRow + 1); i++){
  var Emails = sheet.getRange(i, getColIndexByName("Email")).getValue();

  var row = Compare(Emails, id);

  if(row)
    PlusFreq(row, id);
  else if (checkEmail(Emails))
    setEmail(Emails, id);
  }
} 
```

我的代码工作正常，但方法 getLastRow(); 不起作用，它变得空了，为什么会这样？

一周前它工作正常，但现在不能正常工作，除了我使用 getLastRow 其他函数的方法之外，它也不再工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:08:14.300

您可能想查看[文档](https://developers.google.com/apps-script/class_sheet#getLastRow)中的以下行：

> 方法 getLastRow()
> 
> 返回有内容的最后一行的位置。

`getLastRow()`在调用函数之前，您可能必须检查工作表是否至少包含一行内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:19:34.250

我设法修复了错误，但不知道是什么原因造成的，只是删除了 60 行内容之后存在的空白行，然后再次添加它们，所以停止了错误，我确定这些行 estavao 空白。错误疯狂

# php - 字符串显示为等于数字

> ID：12500902
> 
> 赞同：1
> 
> 时间：2012-09-19T18:43:29.660
> 
> 标签：php, string, equals

我在我的一些 php.ini 文件中遇到了一个奇怪的问题。似乎正在发生的事情是 0 被显示为等于字符串“done”。这是正在发生的事情：

```
if(!isset($pointer)){
    $pointer = 0;   
}
error_log($pointer); //in this instance, I haven't set a pointer, returns 0
if($pointer == "done"){
    die();
} 
```

出于某种原因，第二个 if 语句正在触发和终止脚本。我不明白为什么，当 $pointer 等于 0 时，它显然也等于“完成”。这是我忽略的超级简单的事情吗？

我已经解决了这种情况，在第二个 if 语句上使用 === 给了我想要的结果，我只想了解为什么它一开始就不起作用。感谢您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T18:45:23.970

这是一个类型比较问题；正如你所说，使用：

```
if($pointer === "done"){ 
```

强制检查值和类型。

正在发生的事情是“完成”被转换为一个用于比较的数字。由于那里没有数字，因此它显示为空。在您的比较中，null 的计算结果为 0。

# ios - 非常新的安全性。如何将 SSL 添加到我的 Web 应用程序？

> ID：12500903
> 
> 赞同：0
> 
> 时间：2012-09-19T18:43:34.630
> 
> 标签：ios, security, cakephp, ssl

很难找到我要找的东西，所以转向 SO。

我只是“继承”了（其他人退出了......现在是我）一个调用私有 CakePHP JSON API 的 iOS 应用程序。目前，登录操作并不安全——我们只是通过网络发送纯文本（显然很糟糕）。

我正在使用基本的 MAMP 设置在本地开发它，并使用 Amazon Linux AMI 将其部署到 Amazon EC2。

我对服务器设置/配置完全陌生，所以我不确定从哪里开始。我过去的所有 Web 开发工作都具有自动魔法安全性，由其他人实现 :) 我知道您可以创建自签名 SSL 证书，我相信这应该足以满足我们的需求，因为这个 API 永远不会公开.

1) 如何制作证书？

2）我在哪里“放置”证书？（用于本地开发和生产部署）

3）我是否在客户端做任何不同的事情，或者只是将请求直接发送到“https://”而不是“http://”？

对这些问题中的一个或所有问题的答案将非常非常有帮助。

我的开发机器是 OSX，如果这很重要的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:58:53.910

1）如何制作证书：

生成密钥，然后生成证书

2）我在哪里“放置”证书？（用于本地开发和生产部署）

取决于服务器。在您的情况下，您使用的是 Apache webserver 您可以将密钥和证书放在一个文件夹中，并将该文件夹的所有权授予 Apache (chmod)。然后你需要配置你的 Apache 配置文件

3）我是否在客户端做任何不同的事情，或者只是将请求直接发送到“https://”而不是“http://”？

将请求定向到 https:// 应该可以。还要验证端口号。

他是[同一个话题的讨论](https://superuser.com/questions/73979/how-to-easily-create-a-ssl-certificate-and-configure-it-in-apache2-in-mac-os-x)

# mysql - mysql 特定查询

> ID：12500905
> 
> 赞同：0
> 
> 时间：2012-09-19T18:43:41.047
> 
> 标签：mysql, sql

我有两张桌子：`teams`和`formations`：

表**队**：

```
team_id | team_name
   1    | Barcelona
   2    | Real Madrid
   3    | PSG 
```

表格**编队**：

```
formation_id | team_id | module
    1        |    2    | 5-3-2
    2        |    1    | 4-4-2
    3        |    3    | 4-4-2
    4        |    2    | 4-4-3 
```

实际上，我需要在 2 个表 GROUP BY team_id 之间“加入”，但最后一个“formation_id”

结果我是这样的：

```
 team_id | team_name  | formation_id  | module
    1    | Barcelona  |     2         |  4-4-2
    2    | Real Madrid|     4         |  4-4-3
    3    | PSG        |     3         |  4-4-2 
```

其实我的查询是：

```
SELECT *
  FROM formations f
 INNER JOIN teams t 
    ON (f.team_id = t.team_id)
 GROUP BY t.team_id 
```

通过我的查询，我为每个团队选择了第一个插入阵型，而我必须为每个团队选择最后一个阵型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:36:05.950

您可以使用稍后将其与原始表连接起来的子查询找到它们的最大编队 ID。试试这个，

```
SELECT  a.*, c.formation_ID, c.`module`
FROM    teams a
        INNER JOIN
        (
            SELECT team_id, MAX(formation_ID) maxID
            FROM formations
            GROUP BY team_ID
        ) b ON  a.team_id = b.team_id
        INNER JOIN formations c
            ON  c.team_id = b.team_id AND
                c.formation_ID = b.maxID
ORDER BY a.Team_id 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/079fb/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:52:44.583

你可以写：

```
SELECT t.team_id,
       t.team_name,
       f.formation_id,
       f.module
  FROM teams t
  JOIN formations f
    ON f.team_id = t.team_id
       -- require f.formation_id to be MAX(formation_id) for some team:
  JOIN ( SELECT MAX(formation_id) AS id
           FROM formations
          GROUP
             BY team_id
       ) max_formation_ids
    ON max_formation_ids.id = f.formation_id
; 
```

或者：

```
SELECT t.team_id,
       t.team_name,
       f.formation_id,
       f.module
  FROM teams t
  JOIN formations f
    ON f.team_id = t.team_id
       -- require f.formation_id to be MAX(formation_id) for this team:
 WHERE f.formation_id =
        ( SELECT MAX(formation_id)
            FROM formations
           WHERE team_id = t.team_id
        )
; 
```

或者：

```
SELECT t.team_id,
       t.team_name,
       f.formation_id,
       f.module
  FROM teams t
  JOIN formations f
    ON f.team_id = t.team_id
       -- forbid f.formation_id to be less than another for the same team:
  LEFT
 OUTER
  JOIN formations f2
    ON f2.team_id = t.team_id
   AND f2.formation_id > f.formation_id
 WHERE f2.formation_id IS NULL
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T19:17:23.890

**检查这个[SQLFIDDLE](http://www.sqlfiddle.com/#!2/0aa9f/7)**

```
SELECT A.team_id,A.team_name,B.formation_id,B.module
FROM teams A,formations B
WHERE A.team_id=B.team_id
AND B.formation_id =
(
  SELECT max(formation_id)
  FROM formations C
  WHERE C.team_id =B.team_id
 )
ORDER BY A.team_id;

create table teams
(  
  team_id int
 ,team_name varchar(40)
);
create table formations 
(
  formation_id int
 ,team_id  int
 ,module int
);
insert into teams
values
(1,'Barcelona'),(2,'Real Madrid'),(3,'PSG');
insert into formations
values
(1,2,532),(2,1,442),(3,3,442),(4,2,443); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T18:56:36.677

您可以执行以下操作：

```
select f.*, t.team_name from formations f
  join (select team_id, max(formation_id) as max_formation_id from formations f 
          group by team_id) as mrf on mrf.max_formation_id = f.formation_id
  join teams t on f.team_id = t.team_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T18:57:48.223

```
create table teams (team_id integer, team_name varchar(50));
create table formations (formation_id integer, team_id integer, module varchar(20));

insert into formations (formation_id, team_id, module) values
(1, 2, '5-3-2'),
(2, 1, '4-4-2'),
(3, 3, '4-4-2'),
(4, 2, '4-4-3')
;

insert into teams (team_id, team_name) values
(1, 'Barcelona'),
(2, 'Real Madrid'),
(3, 'PSG')
;

select t.team_id, team_name, f.formation_id, module
from
    formations f
    inner join
    teams t on f.team_id = t.team_id
    inner join (
        select team_id, max(formation_id) as formation_id
        from formations
        group by team_id
    ) s on s.team_id = t.team_id and s.formation_id = f.formation_id
order by t.team_id
;
+---------+-------------+--------------+--------+
| team_id | team_name   | formation_id | module |
+---------+-------------+--------------+--------+
|       1 | Barcelona   |            2 | 4-4-2  |
|       2 | Real Madrid |            4 | 4-4-3  |
|       3 | PSG         |            3 | 4-4-2  |
+---------+-------------+--------------+--------+ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T19:03:36.580

此版本在没有聚合的情况下产生相同的结果，这通常会导致内部排序。

```
SELECT t.team_id,
   t.team_name,
   f.formation_id,
   f.module
FROM teams t
INNER JOIN formations f
    ON f.team_id = t.team_id
LEFT OUTER JOIN formations f2
    ON f2.team_id = t.team_id
   AND f2.formation_id > f.formation_id
WHERE f2.formation_id IS NULL 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T18:54:36.863

SQL 规范指出，当您使用 group by 子句时，输出中的所有字段/表达式应该是聚合函数的结果（如 count、avg 等）或 group by 子句中列出的字段。否则行为未定义。因此，如果您需要准确选择此记录，则需要在查询中添加一些条件。此外，不能保证简单的“select * from some_table”总是以相同的顺序返回行。

# c++ - 如何使用带有多个分隔符的 istringstream

> ID：12500906
> 
> 赞同：3
> 
> 时间：2012-09-19T18:43:48.383
> 
> 标签：c++, parsing

嗨，我想问一下如何从字符串中解析多个浮点数，用“/”和空格分隔。

文件中的文本格式为“f 1/1/1 2/2/2 3/3/3 4/4/4” 我需要将这行文本中的每个整数解析为几个 int 变量，然后使用构造一个“脸”对象（见下文）。

```
int a(0),b(0),c(0),d(0),e(0);
int t[4]={0,0,0,0};
//parsing code goes here
faces.push_back(new face(b,a,c,d,e,t[0],t[1],t[2],t[3],currentMaterial)); 
```

我可以用 sscanf() 来做到这一点，但我的 uni 讲师已经警告我不要这样做，所以我正在寻找替代方案。我也不允许使用其他 3rd 方库，包括 boost。

已经提到了正则表达式和使用 stringstream() 进行解析，但我对这两者都不太了解，希望得到一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:12:52.763

我这样做的方法是[更改​​对空间的解释](https://stackoverflow.com/questions/9027896/reading-formatted-input-from-an-istream)以包含其他分隔符。如果我想我会使用不同`std::ostream`的对象，每个对象都`std::ctype<char>`设置了一个方面来处理一个分隔符，并使用一个共享的`std::streambuf`.

如果您想明确使用分隔符，您可以改用合适的操纵器来跳过分隔符，或者，如果它不存在，则表明失败：

```
template <char Sep>
std::istream& sep(std::istream& in) {
    if ((in >> std::ws).peek() != std::to_int_type(Sep)) {
        in.setstate(std::ios_base::failbit);
    }
    else {
        in.ignore();
    }
    return in;
}

std::istream& (* const slash)(std::istream&) = Sep<'/'>; 
```

该代码未在移动设备上进行测试和输入，即可能包含小错误。你会读到这样的数据：

```
if (in >> v1 >> v2 >> slash >> v3 /*...*/) {
  deal_with_input(v1, v2, v3);
} 
```

注意：以上使用假设输入为

```
1.0 2.0/3.0 
```

即第一个值后的空格和第二个值后的斜线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:05:22.033

考虑到您的示例`f 1/1/1 2/2/2 3/3/3 4/4/4`，您需要阅读的是：`char int char int char int int char int char int int char int char int`

去做这个：

istringstream is(str);

```
char f, c;
int d[12];

bool success = (is >> f) && (f == 'f') 
            && (is >> d[0])  && (is >> c) && (c == '/') 
            && (is >> d[1])  && (is >> c) && (c == '/') && 
            .....  && (is >> d[11]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T19:02:29.697

如果您使用 std::ifstream 读取文件，则首先不需要 std::istringstream（尽管使用两者非常相似，因为它们继承自同一个基类）。以下是使用 std::ifstream 的方法：

```
ifstream ifs("Your file.txt");
vector<int> numbers;

while (ifs)
{
    while (ifs.peek() == ' ' || ifs.peek() == '/')
        ifs.get();

    int number;
    if (ifs >> number)
        numbers.push_back(number);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T18:48:06.847

你可以使用 boost::split。

示例是：

```
string line("test\ttest2\ttest3");
vector<string> strs;
boost::split(strs,line,boost::is_any_of("\t"));

cout << "* size of the vector: " << strs.size() << endl;    
for (size_t i = 0; i < strs.size(); i++)
    cout << strs[i] << endl; 
```

更多信息在这里：

[http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo.html](http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo.html)

还有相关的：

[使用 boost::algorithm::split 拆分字符串](https://stackoverflow.com/questions/4224935/splitting-the-string-using-boostalgorithmsplit)

# maven - 如何找到有关 mvn “尝试执行外部编译器的未知错误”的更多信息

> ID：12500907
> 
> 赞同：1
> 
> 时间：2012-09-19T18:43:51.417
> 
> 标签：maven, compiler-errors

如何调查**尝试执行外部编译器的 mvn 未知错误**？根据编译器插件源在这种情况下 javac 返回非零但 mvn 无法提取错误信息（唉 mvn 在这种情况下似乎吃掉了 javac 错误代码）- [JavacCompiler.Java](http://svn.codehaus.org/plexus/plexus-components/trunk/plexus-compiler/plexus-compilers/plexus-compiler-javac/src/main/java/org/codehaus/plexus/compiler/javac/JavacCompiler.java)。我知道 Mvn 在解析 java 7 输出时遇到问题，我尝试手动运行 java，但无法重现该错误。

我正在使用 mvn303、编译器插件 2.5.1 和 java 1.7 07。

*   mvn clean compile -X -**失败并出现错误**
*   复制粘贴 mvn 失败的 /bin/sh 以调用 javac - **sh+javac 完成且没有错误代码**

如果您对如何处理这种情况有任何想法，请告诉我。

谢谢

彼得

`[错误] /bin/sh -c cd /myproj/modules/memory && /usr/java/jdk1.7.0_07/jre/../bin/javac @/myproj/modules/memory/target/classes/org. codehaus.plexus.compiler.javac.JavacCompiler4013958444740287519arguments -J-Xmx512m -J-Xms512m [ERROR] -> [Help 1] org.apache.maven.lifecycle.LifecycleExecutionException: 未能执行目标 org.apache.maven.plugins:maven- compiler-plugin:2.3.2:compile (default-compile) on project memory：致命错误在 org.apache.maven.lifecycle 的 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217) 编译.internal.MojoExecutor.execute(MojoExecutor.java:153) ... ...

org.codehaus.plexus.compiler.javac.JavacCompiler.compileOutOfProcess(JavacCompiler.java:488) 在 org.codehaus.plexus.compiler.javac.JavacCompiler.compile(JavacCompiler.java:157)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:34:52.133

我们找到了问题的原因 - fork 没有内存。我们在后台有 java 进程，并将编译器插件设置为 fork。当 maven 尝试 fork 时，它失败了，导致错误代码但没有错误信息（至少没有插件可以理解）。

仅供参考，我认为我们可以对 JavaCompiler 代码进行改进。目前，没有消息的失败会产生通用错误语句。但是，我们确实有一个 returnCode 并且可以将它添加到文本中，以便在遇到这种情况时提供更多的面包屑。

```
 if ( ( returnCode != 0 ) && messages.isEmpty() )
                {
                    if ( err.getOutput().length() == 0 )
                    {
                        throw new CompilerException( "Unknown error trying to execute the external compiler: " + EOL
                            + cli.toString() );
                    }
                    else
                    {
                        messages.add( new CompilerError( "Failure executing javac,  but could not parse the error:" + EOL
                            + err.getOutput(), true ) );
                    }
                } 
```

# android - 如何使用 OpenGL ES 将纹理加载到圆上

> ID：12500908
> 
> 赞同：3
> 
> 时间：2012-09-19T18:43:53.790
> 
> 标签：android, opengl-es, texture-mapping, render-to-texture

我在将纹理加载到圆上时遇到问题。我的圆圈是用三角扇做成的。它给出了一个糟糕的输出。

原图： ![原始图像](../Images/d97d833e7a13d5ec6639ea210264d34f.png)

结果 ： ![结果](../Images/685cebaa62a2c1467269729ef7e79ea3.png)

我的代码：

```
public class MyOpenGLCircle {

    private int points=360;
    private float vertices[]={0.0f,0.0f,0.0f};
    private FloatBuffer vertBuff, textureBuffer;
    float texData[] = null;

    float theta = 0;
    int[] textures = new int[1];
    int R=1;
    float textCoordArray[] = 
        {
            -R, (float) (R * (Math.sqrt(2) + 1)),
             -R, -R,
            (float) (R * (Math.sqrt(2) + 1)), -R
        };
    public MyOpenGLCircle(){

        vertices = new float[(points+1)*3];
        for(int i=0;i<(points)*3;i+=3)
        {       
                //radius is 1/3 
                vertices[i]=(float) ( Math.cos(theta))/3;
                vertices[i+1]=(float) (Math.sin(theta))/3;
                vertices[i+2]=0;
                theta += Math.PI / 90;

        }
        ByteBuffer bBuff=ByteBuffer.allocateDirect(vertices.length*4);    
          bBuff.order(ByteOrder.nativeOrder());
          vertBuff=bBuff.asFloatBuffer();
          vertBuff.put(vertices);
          vertBuff.position(0);

        ByteBuffer bBuff2=ByteBuffer.allocateDirect(textCoordArray.length * 4 * 360);
        bBuff2.order(ByteOrder.nativeOrder());
        textureBuffer=bBuff2.asFloatBuffer();
        textureBuffer.put(textCoordArray);
        textureBuffer.position(0);
    }

    public void draw(GL10 gl){ 
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertBuff);
    gl.glEnable(GL10.GL_TEXTURE_2D);   
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]); //4
    gl.glTexCoordPointer(2, GL10.GL_FLOAT,0, textureBuffer); //5
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glDrawArrays(GL10.GL_TRIANGLE_FAN, 0, points/2);
     }  

    public void loadBallTexture(GL10 gl, Context context, int resource){
        Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), resource);
        gl.glGenTextures(1, textures, 0);
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
        bitmap.recycle();
    }
} 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:25:21.373

对于初学者，您的 texcoord 数组中的 texcoord 对的数量需要与顶点数组中的顶点元组数量相同。

看起来您刚刚获得了 3 对纹理坐标和 360 个顶点。

您需要有一个 texcoord 数组，其中包含 360 个纹理坐标。然后当绘制顶点时，vertex[0] 得到 texcoord[0]，vertex[1] 与 texcoord[1] 配对，等等。

===编辑===

您只需要以与定义顶点类似的方式定义纹理坐标：在循环中使用数学公式。

例如，三角形扇形的第一个顶点位于圆的中心。对于圆心，您希望 texcoord 参考纹理的中心，即坐标 (0.5, 0.5)。

当您绕过边缘时，只需考虑哪个纹理坐标映射到圆的那个部分。所以让我们假设你的下一个顶点是圆的最右边的顶点，它与圆的中心位于相同的 y 值上。这个的 texcoord 将是 (1.0, 0.5)，或垂直中间的纹理的右边缘。

圆的顶部顶点将有 texcoord (0.5, 1.0)，最左边的顶点将是 (0.0, 0.5)，等等。

您可以使用三角函数来填充其余顶点。

# assembly - 操作系统 API 是否使用中断？

> ID：12500909
> 
> 赞同：1
> 
> 时间：2012-09-19T18:43:55.670
> 
> 标签：assembly, operating-system

我的意思是，在操作系统 API 的核心深处，程序从操作系统请求的每个基本功能是否都有中断“调用”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:10:50.120

Yes, there very often is such an interrupt.

Interrupt and exception handlers and system calls are often implemented using the same mechanism. The reason for this is that in all these cases the control has to be transferred into the kernel and a number of registers has to be preserved before and restored after the handling of the event. Interrupt handling occurs in the kernel, is ubiquitous (rare CPUs don't support interrupts) and it's a natural choice for interrupt handling, exception handling and system calls.

What's more, in some cases it's desirable to invoke system calls from already within the kernel.

In Windows, for example, kernel code often has an option of calling either `ZwFoo()` or `NtFoo()`, where `Foo` is some meaningful function name and `Zw` and `Nt` are name prefixes, differentiating between the two versions of `Foo()`. If `ZwFoo()` is chosen, `Foo()` is called directly. OTOH, if `NtFoo()` is chosen, the control first has to go through the system call (AKA trap) mechanism/code and only then will it reach the actual `Foo()`. The choice between the two versions has to do with something called `Previous Mode`.

A few words on `Previous Mode`... Kernel code is trusted. User code is untrusted. When `Foo()` is called from user mode, the kernel will do its best to validate all untrusted inputs and check that all the permissions are in place before doing what's requested. That's how it's ought to be. Now the kernel itself sometimes needs to call `Foo()`. If it calls `Foo()` on behalf of itself, a number of rigorous checks don't need to be made. But if it calls `Foo()` on behalf of user code with inputs from user mode (and all that is untrusted), those checks must be made. Hence, depending on the situation the kernel calls either `ZwFoo()` or `NtFoo()`. When `NtFoo()` is called `PreviousMode` gets set to `UserMode` and that signals the necessity of the aforementioned checks. When `ZwFoo()` is called, `PreviousMode` remains `UserMode` for user mode callers or gets set to `KernelMode` for kernel mode callers. So, user mode callers can't avoid the checks but the kernel has a choice of doing them (when they are necessary) or not (when they aren't).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:47:30.500

至少在 Linux 上有系统调用。当用户空间想要从内核中获得某些东西时，它会发出一个软件中断`0x80`，其中包含它想要在寄存器中调用的函数的索引。

[更多在这里](http://docs.cs.up.ac.za/programming/asm/derick_tut/syscalls.html)

# php - ImageMagick 无法在雪豹服务器上运行

> ID：12500910
> 
> 赞同：1
> 
> 时间：2012-09-19T18:43:59.210
> 
> 标签：php, imagemagick, gd, osx-snow-leopard

我正在尝试将 imageMagick 集成到我的服务器上，但我很难让它与任何 php 命令一起使用。我认为这可能是因为我之前所做的服务器配置，现在我不确定该怎么做，因为这是我第一次使用雪豹服务器。

这是我试图处理的代码行：

```
$sCommand="/opt/local/bin/convert -geometry ".$neededWidth."x".$neededHeight." \"" .$image_path."\" \"".$newFile."\" ";
$vvv=exec( $sCommand, $exec_output, $exec_retval ); 
```

这是我上次服务器更新的一些历史记录，以防万一它可能有一些相关性：

> 在注意到验证码图像不起作用后，我对如何启用 freetype 进行了一些研究。安装 XCode 后，我用 libPNG、libPNG 重新编译了几次 PHP（我说了几次，因为某些安装有时会失败）。我终于让它工作了，结果如下： http: [//tradeport.on.ca/phpinfo.php](http://tradeport.on.ca/phpinfo.php)我的 GD 部分有我需要的一切。
> 
> 我尝试使用他们网站上的文件和说明来集成 imageMagick，但没有成功。我尝试安装自制软件，但这似乎使事情复杂化。
> 
> 现在我想我已经把我的电线交叉了，并认为可能还有 MacPorts、Homebrew 的配置以及来自本机服务器管理应用程序的一些配置

我不指望有人能治愈这台服务器，但任何信息都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:47:33.703

正确设置权限是这个问题的答案。感谢 Orblings 指导并遵循有关如何在此页面上设置 apache 权限的详细说明：

[如何让 Apache 访问 MAC OSx 上的文件夹？](https://stackoverflow.com/questions/6079783/how-do-i-give-apache-access-to-folders-on-mac-osx)

我的 imageMagick 功能正常运行。

# asp.net - 我的按钮单击仅在第一次起作用

> ID：12500912
> 
> 赞同：0
> 
> 时间：2012-09-19T18:44:11.023
> 
> 标签：asp.net, sharepoint

我的 SharePoint 网站上有一个经典的 ASP NET 页面，其中有几个按钮：

> ```
>  Button importZIPPOTBtn = new Button();
>             importZIPPOTBtn.Click += new EventHandler(importZIPPOTBtn_Click);
>             this.Controls.Add(new LiteralControl("<br/><br/>"));
>             this.Controls.Add(importZIPPOTBtn); 
> ```

第一次点击任何按钮都会完美触发事件，但任何进一步点击任何按钮都不会触发，我不明白为什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:35:48.557

考虑将按钮添加到 form1 或容器元素，如页面内的面板。

```
Button importZIPPOTBtn = new Button();
importZIPPOTBtn.Click += new EventHandler(importZIPPOTBtn_Click);
this.form1.Controls.Add(new LiteralControl("<br/><br/>"));
this.form1.Controls.Add(importZIPPOTBtn); 
```

您可以在 html 源代码中进行验证，除非您以这种方式添加，否则即使包含换行符的文字控件也不会被呈现。

# android - 公共或私有，Android变量真的很重要吗

> ID：12500913
> 
> 赞同：28
> 
> 时间：2012-09-19T18:44:16.293
> 
> 标签：android, memory, private, public

在单个活动内部，当定义仅在该活动中使用的组件时，以下定义之间的真正区别是什么：

```
Button  btnPower = null;
//or
private Button btnPower = null;
//or
public Button btnPower = null;

public void somethingUsingTheButton(){
  btnPower = (Button)findViewById(R.id.btnpower_id);
} 
```

是否应该考虑一些“幕后”约定（垃圾清理、内存等），如果实体本身只会在它所写的类中使用，建议总是使用私有而不是公共？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-19T19:11:57.883

私有字段促进**[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)**

`private`除非您需要将字段或方法公开给其他类，否则这是一个普遍接受的约定。从长远来看，养成这种习惯将为您节省很多痛苦。

`public`但是，字段或方法本身并没有任何问题。它对垃圾收集没有影响。

在某些情况下，某些类型的访问会影响性能，但它们可能比这个问题的主题更高级一些。

一种这样的情况与访问外部类字段的内部类有关。

```
class MyOuterClass
{
    private String h = "hello";

    // because no access modifier is specified here 
    // the default level of "package" is used
    String w = "world"; 

    class MyInnerClass
    {
        MyInnerClass()
        {
            // this works and is legal but the compiler creates a hidden method, 
            // those $access200() methods you sometimes see in a stack trace
            System.out.println( h ); 

            // this needs no extra method to access the parent class "w" field
            // because "w" is accessible from any class in the package
            // this results in cleaner code and improved performance
            // but opens the "w" field up to accidental modification
            System.out.println( w ); 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T19:12:16.047

好吧，重要的一点是，将变量定义为私有是 Java 编程的标准。因此，对于可能阅读您的代码的其他人来说，直接调用对象上的变量至少会显得很奇怪。

我要说的另一件事是，如果您不是一个人在项目上编码，那么限制对类实现至关重要的属性的可见性始终是一种很好的做法，以避免其他开发人员可能想出的奇怪工作。

我个人不知道这些修饰符是否用于编译和优化目的。

总结一下，我认为每个有经验的 java 编码器我都强烈建议在属性定义中使用这种模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T19:12:14.347

可见性范围与垃圾收集器或内存管理无关

您将希望尽可能减少可见性范围，以便您的代码更易于维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T19:02:19.280

`private`并且`public`都是具有面向对象设计目的的Java关键字。我建议你阅读一下：[http ://docs.oracle.com/javase/tutorial/java/concepts/](http://docs.oracle.com/javase/tutorial/java/concepts/)

如果您只想在活动中使用这些变量（对象），那么我建议您将这些变量设为私有。

我希望这有帮助。

**编辑：**

我不确定使用 private、public 或 no 关键字是否会从记忆的角度优化您的应用程序。据我所知，我认为它没有，您应该使用使您的代码最易读、最直观和可维护的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T18:50:35.293

如果你的变量声明在 Activity 的范围内，它通常会像一个范围变量一样正常工作。

然而，当它们不是参数时，在另一种方法中使用来自一种方法的变量是一种不好的编程习惯。

例子：

坏的：

```
void Foo()
{
    int foo = 5;
    System.out.println(Bar());
}

int Bar()
{
    return foo + 5;
} 
```

这实际上会引发语法错误，因为`foo`在范围之外声明`Bar()`

好的：

```
int foo;

void Foo()
{
    foo = 5;
    System.out.println(Bar(foo)); //prints 10
}

int Bar(int foo)
{
    return foo + 5;
} 
```

# mongoid - 我如何使用 mongoid 插入而不需要做额外的查询？

> ID：12500914
> 
> 赞同：1
> 
> 时间：2012-09-19T18:44:17.893
> 
> 标签：mongoid

有什么方法可以防止我在执行此操作时不必向数据库查询问题。

```
has_and_belongs_to_many :followed_questions,  class_name: 'Question', inverse_of: nil
qid = "501928374"
q = Question.find(qid)
self.followed_questions << q unless self.followed_questions.include?(q)
self.save 
```

我想做这个：

```
has_and_belongs_to_many :followed_questions,  class_name: 'Question', inverse_of: nil
qid = "501928374"    
self.followed_questions << qid unless self.followed_questions.include?(qid)
self.save 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:06:18.813

是的，您可以通过分配 ID 而不是文档来完成

```
has_and_belongs_to_many :followed_questions,  class_name: 'Question', inverse_of: nil
qid = "501928374"    
self.followed_question_ids << qid unless self.followed_question_ids.include?(qid)
self.save 
```

# regex - 从多个表达式输出的 sed 解释器中的不可预测的行为

> ID：12500916
> 
> 赞同：1
> 
> 时间：2012-09-19T18:44:19.283
> 
> 标签：regex, bash, sed, msys, mingw-w64

为什么 GNU sed 有时处理用管道输出到另一个 sed 实例的替换与使用多个表达式时不同？

具体来说，对于 msys/mingw 会话，在 /etc/profile 脚本中，我进行了一系列“重新排列”环境变量 PATH 的顺序并删除重复条目的操作。

请注意，虽然通常 sed 会单独处理每一行输入（因此不能轻易地在输入流中替换 '\n'，但此 sed 语句将 ':' 替换为 '\n'，因此它仍然处理整个输入流就像一行（其中包含 '\n' 字符）。对于同一 sed 实例中的所有 sed 表达式，此行为保持正确（基本上直到您将输出重定向或通过管道传输到另一个程序）。

这是强制性规格：

```
 Windows 7 Professional Service Pack 1
    HP Pavilion dv7-6b78us
    16 GB DDR3 RAM
    MinGW-w64 (x86_64-w64-mingw32-gcc-4.7.1.2-release-win64-rubenvb) mounted on /mingw/
    MSYS (20111123) mounted on / and on /usr/
    $ uname -a="MINGW32_NT-6.1 CHRIV-L09 1.0.17(0.48/3/2) 2011-04-24 23:39 i686 Msys"
    $ which sed="/bin/sed.exe" (it's part of MSYS)
    $ sed --version="GNU sed version 4.2.1" 
```

这是 PATH 操作前的内容：

```
 PATH='.:/usr/local/bin:/mingw/bin:/bin:/c/PHP:/c/Program Files (x86)/HP SimplePass 2011/x64:/c/Program Files (x86)/HP SimplePass 2011:/c/Windows/system32:/c/Windows:/c/Windows/System32/Wbem:/c/Windows/System32/WindowsPowerShell/v1.0:/c/si:/c/android-sdk:/c/android-sdk/tools:/c/android-sdk/platform-tools:/c/Program Files (x86)/WinMerge:/c/ntp/bin:/c/GnuWin32/bin:/c/Program Files/MySQL/MySQL Server5.5/bin:/c/Program Files (x86)/WinSCP:/c/Program Files (x86)/Overlook Fing 2.1/bin:/c/Program Files/7-zip:.:/c/Program Files/TortoiseGit/bin:/c/Program Files (x86)/Git/bin:/c/VS10/VC/bin/x86_amd64:/c/VS10/VC/bin/amd64:/c/VS10/VC/bin' 
```

这是 /etc/profile 的摘录（我已经开始 PATH 操作）：

```
 set | grep --color=never ^PATH= | sed -e "s#^PATH=##" -e "s#'##g" \
    -e "s/:/\n/g" -e "s#\n\(/[^\n]*tortoisegit[^\n]*\)#\nZ95-\1#ig" \
    -e "s#\n\(/[a-z]/win\)#\nZ90-\1#ig" -e "s#\n\(/[a-z]/p\)#\nZ70-\1#ig" \
    -e "s#\.\n#A10-.\n#g" -e "s#\n\(/usr/local/bin\)#\nA15-\1#ig" \
    -e "s#\n\(/bin\)#\nA20-\1#ig" -e "s#\n\(/mingw/bin\)#\nA25-\1#ig" \
    -e "s#\n\(/[a-z]/vs10/vc/bin\)#\nA40-\1#ig" 
```

该行中的最后一个 sed 表达式基本上**查找以“/c/VS10/VC/bin”开头的行，并在它们前面加上“A40-”，**如下所示：

```
 ...
    /c/si
    A40-/c/VS10/VC/bin
    A40-/c/VS10/VC/bin/amd64
    A40-/c/VS10/VC/bin/x86_amd64
    /c/GnuWin32/bin
    ... 
```

我喜欢我的 sed 表达式灵活（路径结构发生变化），但**我不希望它与以 amd64 或 x86_amd64 结尾的行匹配**（这些行前面将有不同的字符串）。所以我将最后一个表达式更改为：

```
 -e "s#\n\(/[a-z]/vs10/vc/bin\)\n#\nA40-\1\n#ig" 
```

这有效：

```
 ...
    /c/si
    A40-/c/VS10/VC/bin
    /c/VS10/VC/bin/amd64
    /c/VS10/VC/bin/x86_amd64
    /c/GnuWin32/bin
    ... 
```

然后，（为了**匹配与伪代码 "/x/.../bin" 匹配的任何“行”**）我将最后一个表达式更改为：

```
 -e "s#\n\(/[a-z]/.*/bin\)\n#\nA40-\1\n#ig" 
```

产生：

```
 ...
    /c/si
    /c/VS10/VC/bin
    /c/VS10/VC/bin/amd64
    /c/VS10/VC/bin/x86_amd64
    /c/GnuWin32/bin
    ... 
```

**？？？- sed 没有匹配任何字符 ('.') 任意次数 ('*')**在行的中间 ???

但是，如果我将输出通过管道传输到不同的 sed 实例（并补偿 sed 分别处理每个“行”），如下所示：

```
 | sed -e "s#^\(/[a-z]/.*/bin\)$#A40-\1#ig" 
```

我得到：

```
 sed: -e expression #1, char 30: unterminated `s' command 
```

**？？？那怎么没完没了？** 它在 s 之后有所有三个 '#' 字符，在第三个 '#' 之后有修饰符 'i' 和 'g'，整个表达式用双引号 ('"')。此外，没有转义 ( '\') 紧接在定界符之前，并且定界符不是搜索或替换的一部分。让我们尝试使用与 '#' 不同的定界符，例如 '~'：

我使用：| sed -e "s~^(/[az]/.*/bin)$~A40-\1~ig"

而且，我得到：

```
 ...
    /c/si
    A40-/c/VS10/VC/bin
    /c/VS10/VC/bin/amd64
    /c/VS10/VC/bin/x86_amd64
    A40-/c/GnuWin32/bin
    ... 
```

而且，这是正确的！**我唯一改变的是从'#'到'~'的分隔符，它起作用了？？？**

这不是（甚至接近于）sed 第一次对我产生无法解释的结果。

为什么，哦，为什么，sed 不匹配同一实例中的表达式中的语法，但是当管道传输到另一个 sed 实例时匹配？而且，为什么，哦，为什么，当我这样做时我必须使用不同的分隔符（为了不得到“未终止的's'命令”？

**我问的真正原因是：这是 sed 中的错误，还是我不理解的正确行为（如果是，有人可以解释为什么这种行为是正确的）？** 我想知道我是否做错了，或者我是否需要不同/更好的工具（或两者，它们不必相互排斥）。

**如果有人可以证明为什么这种行为是正确的，或者他们可以证明为什么这是一个错误，我会将它标记为答案。** 我很乐意接受有关其他工具或使用 sed 的不同方法的任何建议，但这些不会回答问题。

我将不得不在其他文本处理器（如 awk、tr 等）上做得更好，因为 sed 花费了我太多时间来处理无法解释的结果。

PS 这不是我的 PATH 操作的完整逻辑。完整的逻辑还完成了在所有行前面加上从 'A00-' 到 'Z99-' 的值，然后将输出通过管道传输到 'sort -u -f' 并返回到 sed 以删除每行上的相同前缀并将行 ('\n') 回到冒号 (':')。然后将“export PATH='”附加到单行并附加“'”。然后将该输出重定向到一个临时文件中。接下来，获取该临时文件。最后，该临时文件被删除。

/etc/profile 脚本还显示排序前后的 PATH 内容（以防它搞砸了路径）。

PPS 我确信有更好的方法来做到这一点。它从一些非常简单的 sed 操作开始，发展成为你在这里看到的怪物。即使有更好的方法，我仍然需要知道为什么 sed 会给我这些结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:03:28.527

```
sed -e "s#^\(/[a-z]/.*/bin\)$#A40-\1#ig" 
```

未终止，因为 shell 正在尝试扩展“$#A”。将您的表达式放在单引号中以避免这种情况。

表达方式

```
-e "s#\n\(/[a-z]/.*/bin\)\n#\nA40-\1\n#ig" 
```

失败，或者不符合您的预期，因为`.`匹配多行表达式中的换行符。检查你的整个输出，一`A40-`开始就是。将其更改为

```
-e "s#\n\(/[a-z]/[^\n]*/bin\)\n#\nA40-\1\n#ig" 
```

它可能更符合您的期望。多行修改的大多数问题可能就是这种情况。

您还可以将语句（每行一个）放入独立文件中，并使用 .sed 调用 sed `sed -f editscript`。它可能会使维护变得更容易一些。

# javascript - Javascript 删除比拼接

> ID：12500918
> 
> 赞同：1
> 
> 时间：2012-09-19T18:44:30.590
> 
> 标签：javascript, arrays, element, splice

我正在研究 javascript 项目，其中有 2 个数组 1\. elements 2\. elementsOrder ；elementsOrder 数组包含每个元素的名称，elements 数组包含每个元素的所有属性。当我想从每个数组中删除一个元素时，我使用“delete”内置函数执行此操作，但它不会删除元素仅将其设置为未定义，因此我使用拼接方法推出那些未定义的元素，但它没有不行。

这是来源：

```
var s1 = elementsOrder.indexOf(id);
delete elements[s1];
delete elementsOrder[s1]; 
```

它完成了这项工作并顺利地一一“未定义”设置元素，但是当我这样做时：

```
var s1 = elementsOrder.indexOf(id);
delete elements[s1];
delete elementsOrder[s1];
elements.splice(s1, 1);
elementsOrder.splice(s1, 1); 
```

使用简单的拼接方法**不起作用**：

```
var s1 = elementsOrder.indexOf(id);
elements.splice(s1, 1);
elementsOrder.splice(s1, 1); 
```

我在我的 Javascript Canvas 项目中使用这段代码来为一些画布对象设置动画，这样我可以很容易地看到“删除”何时可以顺利进行并且“取消定义”元素一个接一个，并且拼接不会那么顺利并且不会放置一一出元素

**请参阅[http://jsfiddle.net/7ZuuZ/](http://jsfiddle.net/7ZuuZ/)关注功能动画，倒数第三个功能**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T18:47:03.903

为什么不首先拼接呢？

```
var s1 = elementsOrder.indexOf(id);
elements.splice(s1,1);
elementsOrder.splice(s1,1); 
```

这里没有必要`delete`。

# groovy - Groovy DSL - 创建对象的快捷方式

> ID：12500919
> 
> 赞同：3
> 
> 时间：2012-09-19T18:44:32.187
> 
> 标签：groovy, dsl

Groovy 中有没有办法替换如下代码：

```
Task a = new Task('a')
Process p = new Process('p') 
```

用一些更简单的东西，比如：

```
task a
process p 
```

where`task`并且`process`可以是创建对象并将其返回或将其添加到脚本 Map 的方法调用。

我目前遇到的主要问题是我无法使用`a`，因为它没有定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T20:13:59.020

要创建对象并为其命名而不分配给变量，您可以使用绑定。创建并保留对闭包绑定的引用，并拥有实用方法`task`并将`process`新实例与名称相关联。例如：

```
def scriptBinding = new Binding()

def task = { String name ->
    scriptBinding[name] = new Task(name)
}
def process = { String name ->
    scriptBinding[name] = new Process(name)
}

def script = {
    task 'a'
    process 'b'

    println a
    println b
}
script.binding = scriptBinding
script() 
```

请注意，您必须引用`a`，`b`因此它们被解释为字符串而不是未定义的变量。如果你想省略引号，你可以使用一个自定义的 Binding 对象来评估未定义的符号作为它们的字符串表示，如下所示：

```
class SymbolAsStringBinding extends Binding {
    Object getVariable(String name) {
        try {
            super.getVariable(name)
        } catch (MissingPropertyException e) {
            name
        }
    }

    boolean hasVariable(String name) {
        true
    }
} 
```

添加后，您可以将脚本编写为：

```
def script = {
    task a
    process b

    println a
    println b
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:55:02.013

尝试这个：

```
class Task {
    String name
    Task(name) { this.name = name }
    String toString() { "task: $name".toString() }
}

def propertyMissing(String name) { this.getBinding()[name] = name }

def task(name) { this.getBinding()[name]  = new Task(name) }

task a
println a 
```

这将产生：

```
 task: a 
```

基本上当你到达

```
task a 
```

声明`propertyMissing()`将在绑定中放入一个以`a`它的名称命名的变量。稍后，该`task()`函数将用`a`新的任务替换绑定中的变量，并将缺失变量的名称作为名称传递`a`

# node.js - Nodejs在路由器页面中包含socket.io

> ID：12500922
> 
> 赞同：3
> 
> 时间：2012-09-19T18:44:38.267
> 
> 标签：node.js, express, socket.io, router

我有一个快速节点应用程序，我试图通过在 app.js 中不包含所有 socket.io 内容来保持我的代码整洁

我不知道解决这个问题的最佳方法。这是我最初的想法，感觉不是最干净的

```
// app.js
var express = require('express')
    , app = express()
    , server = require('http').createServer(app)
    , url = require('url')
    , somePage = require('./routes/somePage.js')
    , path = require('path');

    app.configure(function(){...});

    app.get('/', somePage.index); 
```

和路线

```
// somePage.js
    exports.index = function (req, res, server) {
        io = require('socket.io').listern(server)
        res.render('index',{title: 'Chat Room'})

        io.sockets.on('connection', function(socket) {
            ...code...
        }
    } 
```

我觉得我很接近但不完全在那里

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T14:35:22.060

我不知道我是否没看错，但看起来你正在为每个请求启动一个套接字服务器`/`，坦率地说，我对它的工作感到有点惊讶。

这就是我从 app.js 中分离出 socket.io 代码的方式（使用 express 3.x，这与 2.x 有点不同）：

```
// app.js
var express = require('express');
var app = express();

var server_port = config.get('SERVER_PORT');
server = http.createServer(app).listen(server_port, function () {
    var addr = server.address();
    console.log('Express server listening on http://' + addr.address + ':' + addr.port);
});

var sockets = require('./sockets');
sockets.socketServer(app, server);

// sockets.js
var socketio = require('socket.io');
exports.socketServer = function (app, server) {
  var io = socketio.listen(server);

  io.sockets.on('connection', function (socket) {
    ...
  });
}; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T16:27:25.500

类似的方法是传入`app`index.js 文件并在那里启动 http 和 socketio 服务器。

```
//app.js
//regular expressjs configuration stuff

require('./routes/index')(app);   //all the app.get should go into index.js 
```

由于`app`传入了 index.js 文件，我们可以`app.get()`在 index.js 中做路由的事情，以及连接 socketio

```
//index.js
module.exports = function(app){

var server = require('http').createServer(app)
    ,io = require('socket.io').listen(server);

app.get('/', function(req, res){
 });

server.listen(app.get('port'), function(){
   console.log("Express server listening on port " + app.get('port'));
});

io.sockets.on('connection', function(socket){  
   socket.on('my event', function(data){
   console.log(data);
  });
});

io.set('log level',1);

//io.sockets.emit(...) 
```

# jsp - 在jsp中计算在线考试的正确答案

> ID：12500923
> 
> 赞同：0
> 
> 时间：2012-09-19T18:44:42.150
> 
> 标签：jsp

我正在一个项目中工作，其中在线考试是其中的一部分，我正在为我的 sem 做这个。考试。我创建了一个在线考试系统（项目的一部分），我可以从 DB 中获取带有答案的问题，但我无法计算正确的答案。我需要帮助。任何帮助将不胜感激，因为我需要尽快完成。

编码是使用 jsp 脚本代码来获取数据的：

```
<%@ page import="java.sql.*"%>
<html>
  <form method="post" action="res2.jsp">
    <table>
      <%
Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/cms","root", "root");
Statement st=connection.createStatement();
ResultSet rs=st.executeQuery("Select * from quiz");
int i=1;
while(rs.next()){
%>

      <tr>
        <td>
          <%=i%>
        </td>
        <td>
          <%=rs.getString("quest")%>
        </td>
        <td>
          <input type="radio" value="QA" name="radio<%=i%>"/><%=rs.getString("QA")%>
        </td>
        <td>
          <input type="radio" value="QB" name="radio<%=i%>"/><%=rs.getString("QB")%>
        </td>
        <td>
          <input type="radio" value="QC" name="radio<%=i%>"/><%=rs.getString("QC")%>
        </td>
        <td>
          <input type="radio" value="QD" name="radio<%=i%>"/><%=rs.getString("QD")%>
        </td>
        <td>
          <input type="text" value='<%=rs.getString("correctAns")%>' name="ans<%=i%>"/>
        </td>
      </tr>

      <%
i++;
}
%>

      <tr>
        <td>
          <input type="submit" value="submit"></input>
        </td>
      </tr>
    </table>
  </form>
</html> 
```

现在编写代码以查看正确答案。我被卡住了...

```
<%@ page import="java.sql.*"%>
<%@ page import="java.util.*"%>
<%
    String id[]= new String[6];
    for(int i=0;i<6;i++){
      id[i]=request.getParameter("radio"+i);
      System.out.println(id[i]);
    }
    String str[]= new String[6];
    for(int j=0;j<6;j++){
      str[j]=request.getParameter("ans"+j);
      System.out.println(str[j]);
    }

    int count=0;
    //String answers[]=str.split(" ");
    for(int i=0;i<str.length;i++){
      if(id.equals(str)){

      count++;
      //System.out.println(id[i]);
      }
    }
    out.println("Your "+count+" answers are correct");
%> 
```

我可以看到在 jsp 页面中选择的数据，也可以看到正确的答案，但是在计算正确答案时，我得到了 0 值。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T12:57:36.990

这行得通。

```
if((str[i]!=null)&&(id[i]!=null)){
    if(id[i].equals(str[i])){
        count++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:48:32.753

我想你的意思是：

```
if(id[i].equals(str[i])){

count++;
//System.out.println(id[i]);
} 
```

# android - 不要创建第二个 SQLite 表

> ID：12500924
> 
> 赞同：0
> 
> 时间：2012-09-19T18:44:43.930
> 
> 标签：android, sqlite, android-sqlite

我仍然对 Java 和 Android 开发很陌生。但是在这部分中，我找不到问题所在。LogCat 返回“没有这样的表：翻译”。

```
package se.maxallan.birdsound;

    import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.util.Log;

    public class SpeciesDbAdapter extends SQLiteOpenHelper{
    public static final String DB_SPECIE_ID = "_id";
    public static final String DB_SCF_NAME = "scf_name";

    public static final String DB_T_LANG = "lang";
    public static final String DB_T_TRANS = "translated";

    private static SpeciesDbAdapter mDbHelp;
    private static SQLiteDatabase mDb;

    private static final String DB_NAME = "database.db";
    private static final String DB_TBL_SPECIES = "species";
    private static final String DB_TBL_TRANSLATIONS = "translations";
    //private static final String DB_TBL_SOUNDS = "sounds";
    private static final int DB_VERSION = 1;

    private final Context mCtx;

    static String createSpecies = "CREATE TABLE if not exists "
    + DB_TBL_SPECIES 
    +" ("+DB_SPECIE_ID +" INTEGER PRIMARY KEY AUTOINCREMENT,"
    +DB_SCF_NAME+");"; 

    static String createTranslations = "CREATE TABLE if not exists "
    + DB_TBL_TRANSLATIONS
    +" (tid INTEGER PRIMARY KEY AUTOINCREMENT,"
    +DB_SPECIE_ID+","
    +DB_T_TRANS+","
    +DB_T_LANG+");"; //The error is here?

    public SpeciesDbAdapter(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
        this.mCtx = context;
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(createSpecies);
        db.execSQL(createTranslations);
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    }

    //Open the database
    public SpeciesDbAdapter open() throws SQLException {
        mDbHelp = new SpeciesDbAdapter(mCtx);
        mDb = mDbHelp.getWritableDatabase();
        return this;
    }
    //Close the connection
    public void close() {
        if (mDbHelp != null) {
            mDbHelp.close();
        }
    }

    public void addSpecie(String scf, String translation, String lang){
        ContentValues specieValues = new ContentValues();
        ContentValues translationsValues = new ContentValues();
        specieValues.put(DB_SCF_NAME, scf);
        int LastInsertedId = (int) mDb.insert(DB_TBL_SPECIES, null, specieValues);
        translationsValues.put(DB_T_LANG, lang);
        translationsValues.put(DB_T_TRANS, translation);
        translationsValues.put(DB_SPECIE_ID, LastInsertedId);
        mDb.insert(DB_TBL_TRANSLATIONS, null, translationsValues);
    }

    public Cursor fetchAllSpecies() {
        Cursor mCursor = mDb.rawQuery("select * from "+ DB_TBL_SPECIES +" s inner join "+ DB_TBL_TRANSLATIONS +" t on s._id=t._id", null);
        Log.d("Database", "Result cursor size " + mCursor.getCount() );
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }
    public void insertSomeSpecies() {
        addSpecie("Cygnus olor", "Knölsvan", "sv");
        addSpecie("Cygnus cygnus", "Sångsvan", "sv");
    }

    } 
```

我认为错误是我创建表`translations`- 或尝试创建......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:02:57.480

我猜你至少用一张桌子运行了你的应用程序：

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(createSpecies);
} 
```

然后你补充说：

```
 db.execSQL(createTranslations); 
```

OpenHelper 不会*自动*检查此处的任何更改。您必须强制重新创建数据库。我认为最简单的方法是增加你的`DB_VERSION`.

```
private static final int DB_VERSION = 2; 
```

这将运行`onUpgrade()`应该删除现有模式并创建新模式。

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + DB_TBL_SPECIES);
    db.execSQL("DROP TABLE IF EXISTS " + DB_TBL_TRANSLATIONS);
    onCreate(db);
} 
```

下次更改架构时，只需更改一个数字 ( `DB_VERSION = 3`) 即可构建新表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-22T15:48:50.090

从终端删除您的数据库

```
adb shell
cd /data/data/com.example.apploicationname/databases
rm * 
```

我认为这也会对您有所帮助，而不是更改 DB_VERSION

# c# - 在 C# 中使用 FileSystemWatcher 确定复制/写入进度

> ID：12500927
> 
> 赞同：2
> 
> 时间：2012-09-19T18:44:59.557
> 
> 标签：c#, .net, file, file-io, filesystemwatcher

**背景：**一组操作员在第三方应用程序中处理高达 10GB 的大型批处理文件。每个文件包含数千张图像，每处理 50 张图像后，他们点击保存按钮。工作场所的电源不可靠，如果在保存过程中断电，整个文件就会损坏。为了克服这个问题，我正在编写一个使用 FileSystemWatcher 的小实用程序来检测保存并创建备份，以便无需重新处理整个批次即可恢复它。

**问题**：FileSystemWatcher 在报告事件方面做得很好，但有一个我无法确定的问题。由于监控的文件很大，保存过程需要几秒钟。我希望在保存操作完成后收到通知。我怀疑每次将文件缓冲区刷新到磁盘时，都会触发不需要的事件。无论保存是否正在进行中，该文件仍处于锁定状态，因此我无法判断。

在保存操作期间创建文件的备份会破坏目的，因为它会损坏备份的文件。

**问题：**

*   有没有办法在保存操作完成后使用 FileSystemWatcher 来通知？
*   如果没有，我还能如何可靠地检查文件是否仍在被写入？

**替代方案：**也欢迎任何替代建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:50:45.370

真的没有直接的方法来做你想做的事。文件系统本身不知道保存操作何时完成。从逻辑上讲，您可能将其视为一系列保存，因为用户多次单击“保存”按钮，但这不是文件系统所看到的。只要应用程序锁定了文件以进行写入，就文件系统而言，它仍处于保存过程中。

如果你仔细想想，这是有道理的。如果应用程序保留对文件的写访问权，文件系统如何知道文件何时处于“损坏”状态，何时不处于“损坏”状态？只有编写文件的应用程序知道这一点。

如果您有权访问写入文件的应用程序，则可能可以解决此问题。如果做不到这一点，您可能会获得最后修改日期的内容，仅当文件在一段时间内未修改时才创建备份，但这必然是错误且不可靠的。

# java - Intellij - 使用 XMLBeans 从 XML 模式生成 Java 代码

> ID：12500929
> 
> 赞同：0
> 
> 时间：2012-09-19T18:45:05.937
> 
> 标签：java, intellij-idea

我有一个 WSDL，我从中生成 Java bean 代码。它将其存储在名为 types.jar 的默认 jar 中。到目前为止，一切都很好。但是我依赖于生成代码的类似乎找不到它，所以我的代码不会编译。

我尝试将 jar 添加到“模块依赖项”中，但它似乎仍然无法识别它。

有人能告诉我我错过了哪一步吗？

# wpf - 在 MVVM 中创建 ViewModel 的最佳位置

> ID：12500930
> 
> 赞同：6
> 
> 时间：2012-09-19T18:45:07.197
> 
> 标签：wpf, mvvm, viewmodel, virtual-machine

我有一个问题：在 MVVM 中创建 ViewModel 的最佳位置在哪里以及如何创建？

1）在 App.xaml.cs 中创建一次作为静态字段，然后通过 App 使用它？

2) 当我导航到这个页面时，总是在 Page.cs 中创建新的 ViewModel？

3) 其他选项

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T19:14:22.667

在 MVVM 中，ViewModel*是*应用程序。这意味着我通常有一个启动 ViewModel 作为我的应用程序的入口点，我通常在 App.xaml.cs`OnStartup`代码中创建它的一个实例

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    var app = new ShellView();
    var context = new ShellViewModel();
    app.DataContext = context;
    app.Show();
} 
```

每隔一段时间，我就有一个应用程序会在启动窗口的构造函数中创建 ViewModel，但这并不是真正的首选，因为这意味着如果我有任何启动逻辑，我也必须将它放在 View 的代码隐藏中，而且我不喜欢在我的视图层中混合应用程序逻辑。

```
public partial class MainWindow
{
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = new ShellViewModel();
    }
} 
```

不管你怎么做，请记住，当使用 MVVM 时，你的 ViewModel 是你的应用程序，而不是你的 View，所以通常你的 ViewModel 以某种方式连接到启动 ViewModel。视图只是用户与您的应用程序（ViewModel）交互的一种用户友好的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T19:02:30.193

有不同的方法可以做到这一点，取决于你的想法。

我个人总是有一个类旨在创建我需要的所有对象，在`App.xaml.cs`. 该类基本上会在显示启动画面时执行那些耗时的启动过程。我在这里创建视图和视图模型并链接它们

这使我只有一个点来创建所有这些 View-to-ViewModel 链接，即使我添加/删除某些内容，我也可以轻松地回到它。

我不喜欢在每个视图的构造函数中初始化 viewModel 的方法。假设您的项目中有 15 个视图，如果您想检查所有 ViewModel 初始化，您将有 15 个不同的文件可供浏览。

这是我对此的谦虚参与=）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:55:50.570

您可以使用依赖注入并像这样创建它（假设您正在使用一些 DI 容器）：

```
 public partial class YourView : UserControl
{
    public YourView (IYourViewModel viewModel)
    {
        InitializeComponent();
        this.DataContext = viewModel;
    }
} 
```

# php - Zend Studio / Eclipse 在函数调用的结束括号上格式化新行

> ID：12500932
> 
> 赞同：2
> 
> 时间：2012-09-19T18:45:11.603
> 
> 标签：php, eclipse, ide, code-formatting, zend-studio

因此，这就是使用我的自定义格式设置函数调用的方式：

Eclipse 无论如何都会这样做，请注意末尾的 3 个括号一起。参数？

```
$this->addElement(
new Form_Element_Note('test', 
    array(
        'value' => 'test'
    ))); 
```

我想在格式化程序中解决这个问题，但除了可以完成这种格式化样式的链接方法调用之外，我真的什么都看不到：

```
$this->addElement(
    new Form_Element_Note(
        'test', 
        array(
            'value' => 'test'
        )
    )
); 
```

请注意，这适用于对象和函数调用。任何想法如何手动编辑？我在文档中找不到任何可以做到这一点的东西，但这看起来肯定是可能的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-05T14:48:06.010

我也有同样的问题。在 Eclipse 中使用自己的（无 psr）编码风格真的很困难。经过多次尝试，我终于成功地格式化了数组括号`[]`和`()`新行。但这不是一个很好的解决方案。

首先打开格式化程序并编辑您的个人资料，然后转到：

*   新行 > 数组初始值设定项 > 在数组初始值设定项的右括号之前插入新行
*   换行 > 表达式 > 数组初始值设定项 > 强制拆分

缺点：

*   现在每个数组都被拆分了，即使它只有一个条目
*   如果您使用数组作为方法参数，则结束圆括号不会在新行中

eclipse中代码格式化的另一个大问题是（也许只是我）。如果您执行多次格式化，它看起来会有所不同。至少对于保存使用它是一个大问题。

我停止尝试在 eclipse 中使用代码格式化，因为它实现得不是很好，而且是一种静态的方法。如果有人可以为我们提供帮助，我会很高兴（或为方法调用实现“在右括号前插入新行”）

为 PHP 开发人员使用 Mars.2 Release (4.5.2)。

# java - Java POI SS 用户模型转换

> ID：12500933
> 
> 赞同：0
> 
> 时间：2012-09-19T18:45:15.100
> 
> 标签：java, apache-poi

Helo all`page`新 SS 模型中的床单有吗？

我似乎找不到它......我的旧代码是这样的：

```
 Footer footer = sheet.getFooter();
        footer.setCenter( "(UNCLASSIFIED) Page " + Footer.page() + " of " + Footer.numPages() ); 
```

我无法在新模型 SS 中找到 Footer.page() 或 Footer.numPages()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:07:37.497

嗯，你已经在那里使用了 org.apache.poi.ss.usermodel 代码......请参阅[ss.usermodel.Footer javadocs](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Footer.html)

如果您仍在使用 HSSF，您将调用 HSSFFooter，您调用 Footer 而不是 HSSFFooter / XSSFFooter 的事实告诉您您正在使用新接口

# mysql - Ruby 中的 MySQL SQL/DDL 解析器/验证器（在 Rails 上）

> ID：12500934
> 
> 赞同：4
> 
> 时间：2012-09-19T18:45:19.303
> 
> 标签：mysql, sql, ruby-on-rails, ruby, ddl

我正在为 Rails 寻找工具或库来验证/解析可能是 SQL 和/或 DDL 的查询。目前，我没有找到可以快速轻松地使用的任何东西。

我发现[Parslet](http://kschiess.github.com/parslet)可以用来定义我自己的 SQL/DDL 语言来验证 SQL/DDL 语句。

达到的目标是拥有一个工具，我们可以在数据库上运行之前使用它来验证 SQL/DDL 语法。例如，DDL 查询与 MySQL 无关，因此，如果一个语句在更大的脚本中间失败，我们需要恢复数据库或从故障点运行脚本（这对用户来说并不友好）。如果我们至少可以验证语法，我们将通过消除许多“愚蠢”错误来改进我们的日常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:46:26.667

[这篇文章](https://stackoverflow.com/q/2488791/1177119)列出了一些您可能有兴趣查看的 Ruby SQL 解析器。[这个](https://stackoverflow.com/a/2489105/1177119)特别有一个 Treetop 语法文件，您可能可以将其用作您自己验证的基础。

# asp.net-mvc-3 - 我应该能够在没有模拟的情况下访问 MVC3 中的网络位置吗？

> ID：12500940
> 
> 赞同：0
> 
> 时间：2012-09-19T18:45:32.813
> 
> 标签：asp.net-mvc-3, windows-server-2003, windows-server-2008-r2

这种问题对我来说是第一次，因为我想知道正在工作的东西是否应该工作。

我们有：

**服务器 1** - Win2K3 文件服务器，也是我们的域服务器。

**服务器 2** - 部署了我们的 MVC3 站点的 Win2008 R2 服务器，它也加入了域。

我在服务器 2 上有代码，它使用 .NET 文件系统 (IO) 类使用指向网络共享目录的 UNC 路径访问服务器 1，例如`\\10.1.1.1\FileDirectory\`.

这段代码工作得很好，我们没有使用模拟或委托。我想知道这是否应该工作，或者它是否指向服务器 1 上的错误网络权限设置。我认为 MVC3 站点作为某种本地服务器系统帐户运行，该帐户没有任何域访问权限，这就是为什么我我很困惑。

这是服务器 1 上共享目录的权限的 2 个屏幕截图。

共享权限

![在此处输入图像描述](../Images/25f8a977e350799a9fc9f4b0de3fc5c2.png)

NTFS 权限

![在此处输入图像描述](../Images/df5ea67f01763356bc9eeb6c5a514281.png)

* * *

感谢您的任何意见。让我知道我是否可以进一步澄清或提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:49:20.067

从具有共享的服务器的角度来看，您的站点运行的用户（App Pool Identity？）会被视为“经过身份验证的用户”。

[http://www.windowsitpro.com/article/user-management-and-profiles/understanding-the-authenticated-users-group](http://www.windowsitpro.com/article/user-management-and-profiles/understanding-the-authenticated-users-group)

# lua - 使用 Lua 设计点击游戏的正确方法是什么？（Corona）

> ID：12500943
> 
> 赞同：0
> 
> 时间：2012-09-19T18:45:50.937
> 
> 标签：lua, coronasdk, moai

我有一些想法，我已经粗略地绘制了场景并将它们放入电晕中。这就是我认为它会起作用的方式。

*主要场景*

2.在每个*主要场景中*，都有*迷你场景*，导致*较小的场景*有谜题。

3.我创建了一个game.lua模块，它会处理游戏逻辑，并跟踪它们。

例子：

```
 A.Door is opened,puzzle number one is solved.
  B.Send a costume event to the game module. 
```

4.我需要一个单独的*库存箱*模块，这样它就可以覆盖其他场景。它还与游戏模块交互。

.

您有更好的建议或知道任何代码示例（Corona Sdk、Lua、Moai、GiderosMobile）吗？

. 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:42:24.113

我正在使用 Corona 或多或少地制作这种风格的游戏[，google play 上有一个测试版](https://play.google.com/store/apps/details?id=com.kidoteca.nonoamazonia.beta)。

Corona SDK 提供了一个名为 Storyboard 的 API，该 API 允许您将每个场景编码为 lua 模块，还允许您将场景加载为“叠加层”。

我想你会让你的每个场景都成为一个完整的故事板场景，而清单则是一个“叠加”场景。

叠加层与普通场景之间的区别在于，当您加载叠加层时，它会在已打开的场景上触发一个事件，而不是卸载该场景（当卸载了叠加层时，它会触发另一个事件）

所以是的，至少如果你在 Corona 中这样做，你就走在了正确的轨道上！

# windows - 从 Windows 上的 linux 日志中解析文本（添加已删除的空格）

> ID：12500946
> 
> 赞同：0
> 
> 时间：2012-09-19T18:46:03.400
> 
> 标签：windows, linux, return, carriage-return

所以我不时在 Linux 上做一些工作，今天我需要记录一些从终端窗口复制的文本文件。唯一的问题是我在我的 Win7 计算机上将一个 linux 文本文件带到了记事本上，我注意到所有回车符都从文本中删除了。

有什么方法可以快速添加回车符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:24:08.487

使用记事本++ 而不是记事本。它是免费的，并且具有很多功能，包括正确处理 EOL 标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:21:26.170

您可以在传输*前*进行转换：

```
unix2dos -o <pattern> 
```

如果您需要保留旧文件或者您只有读取权限：

```
unix2dos -n <original-file> <converted-file> 
```

默认情况下，您的 linux 发行版中可能没有此实用程序可用，在这种情况下，您需要安装该`tofrodos`软件包。

# android - 如何在 String.xml 中搜索单词

> ID：12500947
> 
> 赞同：0
> 
> 时间：2012-09-19T18:46:10.550
> 
> 标签：android, string, search

我是android编程的初学者。我有一个包含 10 个布局的程序，其中包含 10 个不同的表格。我使用 string.xml 作为文本资源。我想在我的程序中搜索不同的单词。如果我有匹配，我想设置包含它的布局。我怎样才能做到这一点？

```
<string name="table1_1">Kóros mértékben és tartósan <b>emelkedett, expanzív vagy irritábilis hangulat,</b> amely jól elhatárolható periódusban, legalább <b>1 héten át fennáll</b>(vagy bármeddig, ha kórházi felvétel szükséges).</string>
<string name="table1_2">A hangulatzavar időtartama alatt <b>az alábbi tünetek közül három (vagy több)</b> (irritált hangulat esetében négy) tünet az alábbiakból tartósan és jelentős mértékben fennáll: \n \n- felfokozott önértékelés vagy grandiózitás, \n- csökkent alvásigény (pl. 3 óra alvás után is kipihentnek érzi magát), \n- szokatlan beszédesség vagy folyamatos beszédkényszer (logorrhoea), \n- fellazult gondolkodás vagy gondolatrohanás, \n- szétszórtság (pl. a figyelem elhanyagolható, lényegtelen külső ingerekkel könnyen elterelhető), \n- fokozott célirányos aktivitás (társas érintkezés, munka/iskola, szexualitás területén), illetve pszichomotoros agitáltság, nyugtalanság, \n- olyan élvezetet vagy izgalmat okozó cselekedetek halmozása, amelyek meglehetősen nagy kozkázatot hordoznak magukban (pl. féktelen költekezés, szexuális kalandok, felelőtlen üzleti befektetések). </string>
<string name="table1_3">A tünetek <b>nem</b> elégítik ki <b>a kevert epizód ismérveit.</b></string>
<string name="table1_4">A hangulatzavar elegendően súlyos ahhoz, hogy: \n \n1\. jelentős zavart okozzon a munka vagy a szokásos társas tevékenységek, illetve kapcsolatok terén, vagy \n2\. az ön- és közveszélyesség miatt kórházi kezelést tegyen szükségessé, vagy \n3\. pszichotikus tünetek fellépjenek.</string>
<string name="table1_5">A tünetek <b>nem</b> tulajdoníthatók valamilyen szer (pl. kábítószer, gyógyszer stb.) közvetlen fiziológiai hatásának, és organikus betegség (pl. hyperthyreosis) kiváltó szerepe sem állapítható meg.</string>
<string name="table1_6"><b>Megjegyzés:</b> Egyértelműen az antidepresszív kezelés (pl. gyógyszer, elektrokonvulzív- vagy fényterápia) által kiváltott mániaszerű epizódok nem sorolhatók a bipoláros I. zavarokhoz.</string> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:50:23.263

> 我想在我的程序中搜索不同的单词。如果我有匹配，我想设置包含它的布局。我怎样才能做到这一点？

除非您检索每个单词并对其进行测试，否则您无法搜索`String`位于的单词。我认为你最好的选择是将你的字符串存储在一个 sqlite 数据库中（以及一个特殊的整数来表示字符串所在的表），然后你可以简单地在数据库上进行查询，看看你是否得到了一些东西（和返回特殊整数以根据需要设置布局）。`strings.xml``String``LIKE`

其他选项是：

*   从一开始就获取所有字符串并将它们存储在字符串数组的数组中（我不知道这在内存问题上会有多好）。然后你可以简单地检查特定单词的字符串数组并做任何你想做的事情。

*   或每次检查特定单词的所有字符串。这可以使用`getIdentifier`方法来完成（假设字符串具有特殊的集合 id（如你的）），但我认为性能会很糟糕，因为`getIdentifier`方法很慢。

# regex - 当模式“前缀”可变时如何使用正则表达式拆分字符串

> ID：12500948
> 
> 赞同：0
> 
> 时间：2012-09-19T18:46:11.207
> 
> 标签：regex, coldfusion

我有以下字符串：

> `Giants 2 9 : 10 L.Tynes 22 yd . Field Goal ( 4 - - 3 , 1 : 20 ) 0 3 Cowboys 2 1 : 01 K.Ogletree 10 yd . pass from T.Romo ( D.Bailey kick ) ( 7 - 73 , 2 : 33 ) 7 3 Cowboys 3 10 : 24 K.Ogletree 40 yd . pass from T.Romo ( D.Bailey kick ) ( 9 - 80 , 4 : 36 ) 14 3 Giants 3 5 : 11 A.Bradshaw 10 yd . run ( L.Tynes kick ) ( 9 - 89 , 5 : 13 ) 14 10 Cowboys 3 0 : 40 D.Bailey 33 yd . Field Goal ( 8 - 65 , 4 : 31 ) 17 10 Cowboys 4 5 : 57 M.Austin 34 yd . pass from T.Romo ( D.Bailey kick ) ( 8 - 82 , 7 : 06 ) 24 10 Giants 4 2 : 36 M.Bennett 9 yd . pass from E.Manning ( L.Tynes kick ) ( 12 - 79 , 3 : 21 ) 24 17 Time : 2 : 53`

子字符串的前缀将是“Cowboys”或“Giants”。字符串总是以右括号`)`和两个数字结尾。

我什至无法想象要使用什么正则表达式。我可以使用字符串函数并循环遍历字符串，但 Regex 稍后会帮助我。也许我可以使用 split 功能，但这超出了我的想象。

我想我可以解析“牛仔”然后“巨人”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:12:03.407

我认为这个 RegEx 给出了你想要的：

```
(Cowboys|Giants).*?\)\s\d+\s\d+ 
```

“Cowboys”或“Giants”后跟任意字符，直到你得到一个正确的括号、一个空格、一些数字、一个空格和更多数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:31:16.863

我不知道 ColdFusion，但这可以在 python 中完成：

```
match = re.findall(re.compile('((Giants|Cowboys)(.(?!Cowboys|Giants))*.)', re.DOTALL), s) 
```

`s`提供的字符串在哪里。`re.DOTALL`表示`.`匹配空格。`re.findall`意味着进行全局搜索，这`reFindAll`可能也是如此。

正则表达式这样做：

*   创建跨越组
*   寻找“Giants”或“Cowboys”作为起始字符串
*   查找`.`后面没有字符串“Cowboys”或“Giants”的任何字符 ()，并尽可能多地匹配（这意味着，匹配所有字符，直到后面有“Cowboys”或“Giants”的字符。
*   匹配另一个字符。

由于存在三个组，因此您感兴趣的组在 ColdFusion 中的编号可能不同。在 python 中，它们嵌入在父组中。

```
>>> match[0]
('Giants 2 9 : 10 L.Tynes 22 yd . Field Goal ( 4 - - 3 , 1 : 20 ) 0 3', 'Giants', '3')
>>> match[1]
('Cowboys 2 1 : 01 K.Ogletree 10 yd . pass from T.Romo ( D.Bailey kick ) ( 7 - 73 , 2 : 33 ) 7 3', 'Cowboys', '3')
>>> match[2]
('Cowboys 3 10 : 24 K.Ogletree 40 yd . pass from T.Romo ( D.Bailey kick ) ( 9 - 80 , 4 : 36 ) 14 3', 'Cowboys', '3') 
```

我认为在大多数其他语言中，您会`match[1], match[4], match[7], ...`改为使用。

# java - 从 JPanel（w/oa JFrame）创建 BufferedImage 时，我还可以使用布局管理器吗？

> ID：12500952
> 
> 赞同：2
> 
> 时间：2012-09-19T18:46:29.513
> 
> 标签：java, swing, jpanel, bufferedimage, layout-manager

我正在尝试从 JPanel 创建一个 BufferedImage，而不使用 JFrame。昨天，在这个社区的帮助下，我终于能够让图像出现（见下文），但现在我遇到了一些布局问题。BufferedImage 上的所有组件都从 0,0 开始绘制，而不是跟随布局管理器。有谁知道这个问题的解决方案？

昨天的问题：[我可以从 JPanel 创建一个 BufferedImage 而不在 JFrame 中渲染吗？](https://stackoverflow.com/questions/12480181/can-i-create-a-bufferedimage-from-a-jpanel-without-rendering-in-a-jframe)

在下面的代码中，两个标签将在图像的左上角相互覆盖。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.image.BufferedImage;

import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class RenderTest {

        RenderTest() {
        JPanel panel = new JPanel();
        panel.setBackground(Color.RED);
        panel.setLayout(new FlowLayout(FlowLayout.LEFT, 0, 0));
        Dimension dim = new Dimension(150,50);
        panel.setSize(dim);
        panel.setMinimumSize(dim);
        panel.setMaximumSize(dim);
        panel.setPreferredSize(dim);
        JLabel label = new JLabel("hello");
        JLabel label2 = new JLabel(" world");
        label.setSize(label.getPreferredSize());
        label2.setSize(label2.getPreferredSize());
        panel.add(label);
        panel.add(label2);

        BufferedImage bi = getScreenShot(panel);
        JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(bi)));
    }

    private BufferedImage getScreenShot(JPanel panel){
        BufferedImage bi = new BufferedImage(
            panel.getWidth(), panel.getHeight(), BufferedImage.TYPE_INT_ARGB);
        panel.paint(bi.getGraphics());
        return bi;
    }

    public static void main(String[] args) {
        new RenderTest();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:11:16.323

[来自女王的](https://stackoverflow.com/a/7372045/418556)更多提示。'打电话`addNotify()`'。

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class RenderTest {

    RenderTest() {
        JPanel panel = new JPanel(new GridLayout(0,1,10,10));
        panel.setBackground(Color.RED);
        panel.setBorder(new EmptyBorder(5,25,5,25));

        JLabel label = new JLabel("hello");
        panel.add(label);
        JLabel label2 = new JLabel("goodbye");
        panel.add(label2);

        panel.addNotify();
        panel.setSize(panel.getPreferredSize());
        panel.validate();

        BufferedImage bi = getScreenShot(panel);
        JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(bi)));
    }

    private BufferedImage getScreenShot(JPanel panel){
        BufferedImage bi = new BufferedImage(
                panel.getWidth(), panel.getHeight(), BufferedImage.TYPE_INT_ARGB);
        panel.paint(bi.getGraphics());
        return bi;
    }

    public static void main(String[] args) {
        new RenderTest();
    }
} 
```

顺便说一句 - 我不建议将尺寸设置为任意尺寸，然后尝试将其与布局结合起来。只是想我会提到这一点，因为我得到的印象就是你想要的。在这种情况下，我们可能会准确定位所有内容，因此这是一种方法，但选择一种方法或另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:22:15.413

```
JLabel label = new JLabel("hello");
panel.add(label);
JLabel label2 = new JLabel("goodbye");
panel.add(label2); 
```

这可能是系统要求的过程吗？

我不确定，但树看起来可能。

# python - 列出python中正在运行的作业

> ID：12500954
> 
> 赞同：1
> 
> 时间：2012-09-19T18:46:36.213
> 
> 标签：python, linux, shell

如何在 python 中获取正在运行的作业列表。IE。我基本上想要`jobs`字符串或列表或集合中的命令输出。

我目前正在尝试

```
 p1 = subprocess.Popen(['jobs'], shell=True, stdout=subprocess.PIPE)
 n = p1.communicate()[0].strip() 
```

但这似乎不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T18:55:42.087

您必须自己跟踪它。shell 会跟踪它的所有子进程作业，但您不是 shell，因此您必须自己进行跟踪。 `jobs`是[Bash shell 内置命令](http://www.gnu.org/software/bash/manual/bashref.html#Job-Control-Builtins)，而不是运行的实际可执行文件。当你这样做时`subprocess.Popen(['jobs'], shell=True)`，你正在产生一个新的 shall 并要求*它*提供*它的*工作，这当然是空的，因为它是一个没有任何正在运行的工作的新 shell。

如果您无法跟踪自己正在运行的作业，您将会遇到困难。在 Linux 上，您可以解析[`/proc`](http://en.wikipedia.org/wiki/Procfs)并查找所有以您为父进程的进程。在 Windows 上，您可以使用诸如 pywin32 之类的包装器或访问 Win32 API 的模块来执行[类似的操作。](https://stackoverflow.com/a/558251/9530)`ctypes`

# html - 在 IE9 中，TD 上的伪元素 :after 没有得到正确的 TD 高度，有解决办法吗？

> ID：12500957
> 
> 赞同：2
> 
> 时间：2012-09-19T18:46:41.840
> 
> 标签：html, css, internet-explorer, css-selectors, pseudo-element

我正在使用的设计需要围绕表格行的边框。由于其他复杂的原因，我不能直接使用边框属性来实现这一点。我尝试了 2 种方法，都涉及使用伪元素 :after。

1.  我用了一个`tr:after`. 这适用于除 IE8+ 之外的所有浏览器。IE 根本不呈现下指定的样式`tr:after`。

2.  我也试过了`td:after`。这次边框出现在 IE8+ 中，但 IE 并没有在 td 的整个高度周围呈现边框，尽管 CSS 说了什么。

[http://jsfiddle.net/kxmhW/2/](http://jsfiddle.net/kxmhW/2/)请看一下，如果有办法解决这个问题，请告诉我。链接中的第一个表使用 tr:after。第二个表使用`td:after`.

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:14:51.143

如果您只是想在行周围设置边框，这样的事情是否适合您的情况？

**CSS**

```
table {
border-collapse: collapse;
}

td {
background: #ddd;
width: 100px;
}

.tr-border  tr {
border: 2px solid red;
} 
```

**HTML**

```
<table class="tr-border">
      <tr>
        <td>1</td>
        <td>Lorem</td>
        <td>123,456</td>
        <td>XXXX</td>
        <td>$10.24</td>
        <td>Lorem Ipsum Dolor Sit Amet, Consect EturLorem Ipsum Dolor Sit Amet.</td>
      </tr>
      <tr>
        <td>2</td>
        <td>Lorem</td>
        <td>123,456</td>
        <td>XXXX</td>
        <td>$10.24</td>
        <td>Lorem Ipsum Dolor Sit Amet, Consect EturLorem Ipsum Dolor Sit Amet.</td>
      </tr>
  </table>

  <br />

  <table class="tr-border">
      <tr>
        <td>1</td>
        <td>Lorem</td>
        <td>123,456</td>
        <td>XXXX</td>
        <td>$10.24</td>
        <td>Lorem Ipsum Dolor Sit Amet, Consect EturLorem Ipsum Dolor Sit Amet.</td>
      </tr>
      <tr>
        <td>2</td>
        <td>Lorem</td>
        <td>123,456</td>
        <td>XXXX</td>
        <td>$10.24</td>
        <td>Lorem Ipsum Dolor Sit Amet, Consect EturLorem Ipsum Dolor Sit Amet.</td>
      </tr>
  </table> 
```

**小提琴**

[http://jsfiddle.net/krishollenbeck/kxmhW/30/](http://jsfiddle.net/krishollenbeck/kxmhW/30/)

# ios - iOS 6 上的应用程序崩溃：找不到符号：___sync_fetch_and_add_4

> ID：12500966
> 
> 赞同：2
> 
> 时间：2012-09-19T18:47:10.133
> 
> 标签：ios, xcode, g++, atomic, zeromq

我有一个与 iOS4 和 iOS5 完美配合的应用程序。它使用针对 ARM 的 zeromq 库的静态编译版本。Apple 拒绝了我的应用程序，因为他们声称它在 iOS 6 下崩溃（尚未发布..wth？）

在使用 iOS 6 GM 进行尝试后，我可以确认它在我们初始化 ZeroMQ 套接字时确实崩溃了。这是崩溃消息：

```
dyld: lazy symbol binding failed: Symbol not found: ___sync_fetch_and_add_4
Referenced from: /var/mobile/Applications/00EDEEDA-0068-4061-9188-01D627F9A6D6/OpenAir.app/OpenAir
Expected in: /usr/lib/libSystem.B.dylib

dyld: Symbol not found: ___sync_fetch_and_add_4
Referenced from: /var/mobile/Applications/00EDEEDA-0068-4061-9188-01D627F9A6D6/OpenAir.app/OpenAir
Expected in: /usr/lib/libSystem.B.dylib 
```

我了解 __sync_fetch_add_4 符号是编译器原子内置。我知道 ZeroMQ 正在使用互斥锁进行内部锁定。我一直在到处寻找，试图找出 iOS6 中可能导致这些符号不存在的变化。

使用 Xcode 4.5 和 iOS6 GM，库甚至不会使用相同类型的消息进行编译：

```
Undefined symbols for architecture armv7:
  "___sync_fetch_and_add_4", referenced from:
      zmq::socket_base_t::unregister_session(std::basic_string<unsigned char, std::char_traits<unsigned char>, std::allocator<unsigned char> > const&)in libzmq.a(libzmq_la-socket_base.o) 
```

有没有办法在 Apple 编译器中禁用原子内置函数以尝试完全绕过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:59:39.947

确实没有必要降级到早期版本的 iOS。我认为关键是使用可用于 C 和目标 C 开发的额外绑定：

[http://czmq.zeromq.org/](http://czmq.zeromq.org/) [http://www.zeromq.org/bindings:objc](http://www.zeromq.org/bindings:objc)

我使用了 czmq 并且可以在 iOS 6 项目中使用 xcode 确认这些构建。我花了一些时间试图让这些工作，因为没有太多关于将它们与 iOS SDK 一起使用的文档，但发现最简单的方法是：

*   [从http://download.zeromq.org/zeromq-3.2.2.tar.gz](http://download.zeromq.org/zeromq-3.2.2.tar.gz)下载 zeromq ，从命令行解压、配置和构建。
*   从上面的链接下载 czmq 并解压。
*   将上面的 src 和包含路径导入到 xcode 项目中。
*   将 -lstdc++ 添加到目标项目的“构建设置”下的“其他链接器标志”部分
*   导入“czmq.h”

图书馆应该成功链接在一起，那么你应该很高兴！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:08:41.473

升级到 Xcode 4.5 后，我尝试了 2 天，但没有任何效果。我终于放弃并重新使用 Xcode 4.2.1

> 打开 -a /Developer/Applications/Xcode.app

只是为了澄清。通过使用 iOS 5 SDK 构建，我在 iOS 6 上运行了我的应用程序。因此，除非您立即需要 iOS 6 功能，否则它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:56:36.263

确保您没有针对任何低于 4.3 的 iOS。您的静态库也是如此，您将需要重建这些库。另外，请确保从 Archs 中删除 armv6 并添加 armv7s（如果它不存在）。

# r - 在不同操作系统上使用 ggplot plot 时导致错误的原因是什么？

> ID：12500968
> 
> 赞同：0
> 
> 时间：2012-09-19T18:47:11.380
> 
> 标签：r, ggplot2

`.Rdata`在一个操作系统上加载并转移到另一个操作系统时，我遇到了一个奇怪的错误。在 Windows 机器上，我生成大量绘图并将它们存储在一个`.Rdata`文件中。然后我将它们传输到运行 CentOS 5 的 linux 服务器上，并通过加载文件和调用绘图来访问它们。

当我在 CentOS 上运行以下行时，出现错误：

```
library(ggplot2)
load('mydata.Rdata')
p

Error in UseMethod("facet_train_layout") : 
  no applicable method for 'facet_train_layout' applied to an object of class "c('proto', 'environment')" 
```

用于生成此 .Rdata 文件的 Windows 7 操作系统正在使用以下版本的 R：

> R 版本 2.14.2 (2012-02-29) 版权所有 (C) 2012 统计计算 R 基金会 ISBN 3-900051-07-0 平台：x86_64-pc-mingw32/x64（64 位）

产生错误的CentOS系统如下：

> R 版本 2.14.2 (2012-02-29) 版权所有 (C) 2012 The R Foundation for Statistical Computing ISBN 3-900051-07-0 平台：i686-pc-linux-gnu（32 位）

`ggplot2`两个系统上的版本都是`ggplot2_0.9.2.1`. 这个过程在过去六个月中运行良好，唯一的问题是今天由于更新，我不明白出了什么问题。

R 的两个版本都升级到了 2.14.2，而 ggplot 包也升级到了 ggplot2_0.9.2.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:12:43.080

我认为旧版本是 0.8.9 或以下。0.9.0 版发生了根本性的变化：

> 方面
> 
> *   从 proto 转换为 S3 对象，以及记录在`facet.r`. 这应该使开发新类型的刻面规范变得更加容易。

有关更多信息，请参阅[http://cran.r-project.org/web/packages/ggplot2/NEWS](http://cran.r-project.org/web/packages/ggplot2/NEWS)

# c - 使用冒泡排序对结构数组进行排序 - 如何加快结构成员的交换

> ID：12500971
> 
> 赞同：3
> 
> 时间：2012-09-19T18:47:19.707
> 
> 标签：c, bubble-sort

我有一个由两个元素`char *word`和`int number`. 当我想使用冒泡排序对它们进行排序时，我必须为它们编写交换部分：

```
int i,j,tmp;
    char * temp;
    for(i=0; i<max;i++)
    {
        for(j=0;j<max-i;j++)
        {
            if(strcmp(array[j].word,array[j+1].word)>0)
            {
                temp=array[j].word;
                array[j].word=array[j+1].word;
                array[j+1].word=temp;
                tmp=array[j].number;
                array[j].number=array[j+1].number;
                array[j+1].number=tmp;

            }
        }
    } 
```

* * *

**编辑**我的结构声明

```
typedef struct{
    char *word;
    int number;
}
words;
words *array=NULL; 
```

* * *

如果数组中有 n 个元素怎么办？交换所有东西将非常耗时。有没有办法省略这个？

当然，除了我不想使用的其他排序算法（如`qsort`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T18:56:39.070

如果您关心交换过程中的性能，您应该考虑您正在使用的结构类型的指针数组：

```
struct your_stuct *arr[MAX]; 
```

如果你正确设置了这个数组，交换将只改变内存地址而不是结构内容，它可以运行得更快：

在您的内部循环中，您应该使用：

```
struct your_struct *temp;
temp = arr[i];
arr[i] = arr[i+1];
arr[i+1] = temp; 
```

这是你在你的问题的意思吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:57:34.000

与其对自身进行排序，不如`structs`创建一个指向结构的指针数组，以及一个适当的比较函数，该函数通过指针从结构中读取适当的值，并对指针列表进行排序。当然，所有额外的间接方式都可能掩盖了您从不实际交换结构中获得的任何性能提升，因为您的结构相当小，但对于大型结构，这种方法很有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:02:48.857

```
int i, j, tmp;
words temp;

for (i = 0; i < max; i++)
{
    for (j = 0; j < max - i; j++)
    {
        if (strcmp(array[j].word, array[j + 1].word) > 0)
        {
            memcpy(&temp, array[j], sizeof(words));
            memcpy(array[j], array[j + 1], sizeof(words));
            memcpy(array[j + 1], &temp, sizeof(words));
        }
    }
} 
```

# java - 为什么 IsIterableContainingInOrder Hamcrest 匹配器无法使用数组？

> ID：12500973
> 
> 赞同：2
> 
> 时间：2012-09-19T18:47:30.187
> 
> 标签：java, junit, hamcrest

我显然对如何使用 Hamcrest`IsIterableContainingInOrder`来验证 List 相等性而不仅仅是使用`.equals()`. 我想在我的报告中看到 Hamcrest 的有用信息。

为什么下面的测试甚至无法编译？他们中的一些人比其他人更违反直觉，至少对我来说是这样。我认为，我得到的一般原则是类型参数将被推断为我传递给具有可变参数签名的方法的内容，因此它将 T 的数组视为 T 的可变参数，因此将基于 T 而不是基于T 的数组，T 的可迭代，或类似的东西。

我可以解释一下，为什么一些最直观的行实际上甚至无法编译。

特别：

*   3和4展示了array/List的不对称性
*   5 和 6 表明我可以查看列表而不是数组（？）

标记为这样的行上的编译器警告对我来说更加神秘。

* * *

```
@org.junit.Test
public void testTest() {
  String string1 = "A";
  String string2 = "B";
  String string3 = "C";

  List<String> list1 = Lists.newArrayList(string1, string2, string3);
  List<String> list2 = Lists.newArrayList(string1, string2, "C");

  String[] array1 = list1.toArray(new String[list1.size()]);
  String[] array2 = list2.toArray(new String[list2.size()]);

  // -------------------------------------------------------------------------
  // 1) The assertion after this comment line DOES NOT COMPILE
  // Assert.assertThat(array2, IsIterableContainingInOrder.contains(array1));
  // -------------------------------------------------------------------------
  // 2) The assertion after this comment line DOES NOT COMPILE
  // Assert.assertThat(list2, IsIterableContainingInOrder.contains(list1));
  // -------------------------------------------------------------------------
  // 3) The assertion after this comment line SUCCEEDS
  Assert.assertThat(list2, IsIterableContainingInOrder.contains(array1));
  // -------------------------------------------------------------------------
  // 4) The assertion after this comment line DOES NOT COMPILE + HAS WARNING
  // Assert.assertThat(array2, IsIterableContainingInOrder.contains(list1));
  // -------------------------------------------------------------------------
  // 5) The assertion after this comment line DOES NOT COMPILE
  // Assert.assertThat(array2, IsIterableContainingInOrder.contains(string1));
  // -------------------------------------------------------------------------
  // 6) The assertion after this comment line COMPILES but fails
  Assert.assertThat(list2, IsIterableContainingInOrder.contains(string1));
  // -------------------------------------------------------------------------
  // 7) The assertion after this comment line COMPILES and succeeds
  Assert.assertThat(list2,
      IsIterableContainingInOrder.contains(string1, string2, string3));
  // -------------------------------------------------------------------------
} 
```

* * *

### 大量的惊讶。:(

* * *

PS我意识到所有的惊讶都来自我自己的无知，没有别的。我应该复习泛型、类型推断、可变参数等。我真的可以对此进行彻底的解释，并且我可能会在以后多次回顾它。

PPS我*确实*尝试过先阅读代码，但看了一下......;）不是为了装腔作势：

```
@SuppressWarnings("unchecked")
@Factory
public static <E> Matcher<Iterable<? extends E>> contains(final Matcher<? super E> itemMatcher) {
    return contains(new ArrayList<Matcher<? super E>>(asList(itemMatcher)));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T19:33:15.880

这是答案...希望是正确的:)

```
// 1) The assertion after this comment line DOES NOT COMPILE
// Assert.assertThat(array2, IsIterableContainingInOrder.contains(array1)); 
```

这个不编译，因为数组不实现Iteratable。

```
// 2) The assertion after this comment line DOES NOT COMPILE
// Assert.assertThat(list2, IsIterableContainingInOrder.contains(list1)); 
```

为此， list2 应该是 a `List<List<String>>`，因为 contains 仅验证可迭代对象是否包含传递的项目

```
// 3) The assertion after this comment line SUCCEEDS
Assert.assertThat(list2, IsIterableContainingInOrder.contains(array1)); 
```

通过，因为 array1 被视为可变参数。

```
// 4) & 5) 
```

与 1 相同

```
// 6) The assertion after this comment line COMPILES but fails
Assert.assertThat(list2, IsIterableContainingInOrder.contains(string1)); 
```

包含期望集合中的***所有***项目，而不仅仅是一个子集。

```
// 7) 
```

与 3 类似，但每个项目都通过了。

# javascript - 使用 javascript 拖放

> ID：12500976
> 
> 赞同：2
> 
> 时间：2012-09-19T18:47:36.137
> 
> 标签：javascript, asp.net

我刚刚尝试了创建启用拖放功能的演练。我遵循了[http://www.webreference.com/programming/javascript/mk/column2/index.html上的指南](http://www.webreference.com/programming/javascript/mk/column2/index.html)

即使指南写得很好，我也无法让它发挥作用，这里有什么明显的错误吗？我的所有代码都粘贴在下面，指南作者的评论也在那里澄清。当我运行页面时会显示所有项目，但当我尝试移动它们时没有任何反应。

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">

<script type="text/javascript">
    // iMouseDown represents the current mouse button state: up or down
    /*
    lMouseState represents the previous mouse button state so that we can
    check for button clicks and button releases:
    if(iMouseDown && !lMouseState) // button just clicked!
    if(!iMouseDown && lMouseState) // button just released!
    */
    var mouseOffset = null;
    var iMouseDown = false;
    var lMouseState = false;
    var dragObject = null;
    // Demo 0 variables
    var DragDrops = [];
    var curTarget = null;
    var lastTarget = null;
    var dragHelper = null;
    var tempDiv = null;
    var rootParent = null;
    var rootSibling = null;
    Number.prototype.NaN0 = function () { return isNaN(this) ? 0 : this; }
    function CreateDragContainer() {
        /*
        Create a new "Container Instance" so that items from one "Set" can not
        be dragged into items from another "Set"
        */
        var cDrag = DragDrops.length;
        DragDrops[cDrag] = [];
        /*
        Each item passed to this function should be a "container".  Store each
        of these items in our current container
        */
        for (var i = 0; i < arguments.length; i++) {
            var cObj = arguments[i];
            DragDrops[cDrag].push(cObj);
            cObj.setAttribute('DropObj', cDrag);
            /*
            Every top level item in these containers should be draggable.  Do this
            by setting the DragObj attribute on each item and then later checking
            this attribute in the mouseMove function
            */
            for (var j = 0; j < cObj.childNodes.length; j++) {
                // Firefox puts in lots of #text nodes...skip these
                if (cObj.childNodes[j].nodeName == '#text') continue;
                cObj.childNodes[j].setAttribute('DragObj', cDrag);
            }
        }

    }
    function mouseMove(ev) {
        ev = ev || window.event;
        /*
        We are setting target to whatever item the mouse is currently on
        Firefox uses event.target here, MSIE uses event.srcElement
        */
        var target = ev.target || ev.srcElement;
        var mousePos = mouseCoords(ev);
        // mouseOut event - fires if the item the mouse is on has changed
        if (lastTarget && (target !== lastTarget)) {
            // reset the classname for the target element
            var origClass = lastTarget.getAttribute('origClass');
            if (origClass) lastTarget.className = origClass;
        }
        /*
        dragObj is the grouping our item is in (set from the createDragContainer function).
        if the item is not in a grouping we ignore it since it can't be dragged with this
        script.
        */
        var dragObj = target.getAttribute('DragObj');
        // if the mouse was moved over an element that is draggable
        if (dragObj != null) {
            // mouseOver event - Change the item's class if necessary
            if (target != lastTarget) {
                var oClass = target.getAttribute('overClass');
                if (oClass) {
                    target.setAttribute('origClass', target.className);
                    target.className = oClass;
                }
            }
            // if the user is just starting to drag the element
            if (iMouseDown && !lMouseState) {

                // mouseDown target
                curTarget = target;
                // Record the mouse x and y offset for the element
                rootParent = curTarget.parentNode;
                rootSibling = curTarget.nextSibling;
                mouseOffset = getMouseOffset(target, ev);
                // We remove anything that is in our dragHelper DIV so we can put a new item in it.
                for (var i = 0; i < dragHelper.childNodes.length; i++) dragHelper.removeChild(dragHelper.childNodes[i]);
                // Make a copy of the current item and put it in our drag helper.
                dragHelper.appendChild(curTarget.cloneNode(true));
                dragHelper.style.display = 'block';
                // set the class on our helper DIV if necessary
                var dragClass = curTarget.getAttribute('dragClass');
                if (dragClass) {
                    dragHelper.firstChild.className = dragClass;
                }
                // disable dragging from our helper DIV (it's already being dragged)
                dragHelper.firstChild.removeAttribute('DragObj');
                /*
                Record the current position of all drag/drop targets related
                to the element.  We do this here so that we do not have to do
                it on the general mouse move event which fires when the mouse
                moves even 1 pixel.  If we don't do this here the script
                would run much slower.
                */
                var dragConts = DragDrops[dragObj];
                /*
                first record the width/height of our drag item.  Then hide it since
                it is going to (potentially) be moved out of its parent.
                */
                curTarget.setAttribute('startWidth', parseInt(curTarget.offsetWidth));
                curTarget.setAttribute('startHeight', parseInt(curTarget.offsetHeight));
                curTarget.style.display = 'none';
                // loop through each possible drop container
                for (var i = 0; i < dragConts.length; i++) {
                    with (dragConts[i]) {
                        var pos = getPosition(dragConts[i]);
                        /*
                        save the width, height and position of each container.
                        Even though we are saving the width and height of each
                        container back to the container this is much faster because
                        we are saving the number and do not have to run through
                        any calculations again.  Also, offsetHeight and offsetWidth
                        are both fairly slow.  You would never normally notice any
                        performance hit from these two functions but our code is
                        going to be running hundreds of times each second so every
                        little bit helps!
                        Note that the biggest performance gain here, by far, comes
                        from not having to run through the getPosition function
                        hundreds of times.
                        */
                        setAttribute('startWidth', parseInt(offsetWidth));
                        setAttribute('startHeight', parseInt(offsetHeight));
                        setAttribute('startLeft', pos.x);
                        setAttribute('startTop', pos.y);
                    }
                    // loop through each child element of each container
                    for (var j = 0; j < dragConts[i].childNodes.length; j++) {
                        with (dragConts[i].childNodes[j]) {
                            if ((nodeName == '#text') || (dragConts[i].childNodes[j] == curTarget)) continue;
                            var pos = getPosition(dragConts[i].childNodes[j]);
                            // save the width, height and position of each element
                            setAttribute('startWidth', parseInt(offsetWidth));
                            setAttribute('startHeight', parseInt(offsetHeight));
                            setAttribute('startLeft', pos.x);
                            setAttribute('startTop', pos.y);
                        }
                    }
                }
            }
        }
        // If we get in here we are dragging something
        if (curTarget) {
            // move our helper div to wherever the mouse is (adjusted by mouseOffset)
            dragHelper.style.top = mousePos.y - mouseOffset.y;
            dragHelper.style.left = mousePos.x - mouseOffset.x;
            var dragConts = DragDrops[curTarget.getAttribute('DragObj')];
            var activeCont = null;
            var xPos = mousePos.x - mouseOffset.x + (parseInt(curTarget.getAttribute('startWidth')) / 2);
            var yPos = mousePos.y - mouseOffset.y + (parseInt(curTarget.getAttribute('startHeight')) / 2);
            // check each drop container to see if our target object is "inside" the container
            for (var i = 0; i < dragConts.length; i++) {
                with (dragConts[i]) {
                    if (((getAttribute('startLeft')) < xPos) &&
                    ((getAttribute('startTop')) < yPos) &&
                    ((getAttribute('startLeft') + getAttribute('startWidth')) > xPos) &&
                    ((getAttribute('startTop') + getAttribute('startHeight')) > yPos)) {
                        /*
                        our target is inside of our container so save the container into
                        the activeCont variable and then exit the loop since we no longer
                        need to check the rest of the containers
                        */
                        activeCont = dragConts[i];
                        // exit the for loop
                        break;
                    }
                }
            }
            // Our target object is in one of our containers.  Check to see where our div belongs
            if (activeCont) {
                // beforeNode will hold the first node AFTER where our div belongs
                var beforeNode = null;
                // loop through each child node (skipping text nodes).
                for (var i = activeCont.childNodes.length - 1; i >= 0; i--) {
                    with (activeCont.childNodes[i]) {
                        if (nodeName == '#text') continue;
                        // if the current item is "After" the item being dragged
                        if (
                        curTarget != activeCont.childNodes[i] &&
                        ((getAttribute('startLeft') + getAttribute('startWidth')) > xPos) &&
                        ((getAttribute('startTop') + getAttribute('startHeight')) > yPos)) {
                            beforeNode = activeCont.childNodes[i];
                        }
                    }
                }
                // the item being dragged belongs before another item
                if (beforeNode) {
                    if (beforeNode != curTarget.nextSibling) {
                        activeCont.insertBefore(curTarget, beforeNode);
                    }
                    // the item being dragged belongs at the end of the current container
                } else {
                    if ((curTarget.nextSibling) || (curTarget.parentNode != activeCont)) {
                        activeCont.appendChild(curTarget);
                    }
                }
                // make our drag item visible
                if (curTarget.style.display != '') {
                    curTarget.style.display = '';
                }
            } else {
                // our drag item is not in a container, so hide it.
                if (curTarget.style.display != 'none') {
                    curTarget.style.display = 'none';
                }
            }
        }
        // track the current mouse state so we can compare against it next time
        lMouseState = iMouseDown;
        // mouseMove target
        lastTarget = target;
        // track the current mouse state so we can compare against it next time
        lMouseState = iMouseDown;
        // this helps prevent items on the page from being highlighted while dragging
        return false;
    }
    function mouseUp(ev) {
        if (curTarget) {
            // hide our helper object - it is no longer needed
            dragHelper.style.display = 'none';
            // if the drag item is invisible put it back where it was before moving it
            if (curTarget.style.display == 'none') {
                if (rootSibling) {
                    rootParent.insertBefore(curTarget, rootSibling);
                } else {
                    rootParent.appendChild(curTarget);
                }
            }
            // make sure the drag item is visible
            curTarget.style.display = '';
        }
        curTarget = null;
        iMouseDown = false;
    }
    function mouseDown() {
        iMouseDown = true;
        if (lastTarget) {
            return false;
        }
    }
    document.onmousemove = mouseMove;  
    document.onmousedown = mouseDown;
    document.onmouseup = mouseUp;
    window.onload = function () {
        // Create our helper object that will show the item while dragging
        dragHelper = document.createElement('DIV');
        dragHelper.style.cssText = 'position:absolute;display:none;';
        CreateDragContainer(
        document.getElementById('DragContainer1'),
        document.getElementById('DragContainer2'),
        document.getElementById('DragContainer3')
    );
        document.body.appendChild(dragHelper);
    }

    function mouseCoords(ev) {
        if (ev.pageX || ev.pageY) {
            return { x: ev.pageX, y: ev.pageY };
        }
        return {
            x: ev.clientX + document.body.scrollLeft - document.body.clientLeft,
            y: ev.clientY + document.body.scrollTop - document.body.clientTop
        };
    }

</script>
    <title>Drag and drop test</title>
</head>
<body>
    <form id="form1" runat="server">
    <!--the mouse over and dragging class are defined on each item-->
<div class="DragContainer" id="DragContainer1">
    <div class="DragBox" id="Item1"  overClass="OverDragBox" dragClass="DragDragBox">Item #1</div>
    <div class="DragBox" id="Item2"  overClass="OverDragBox" dragClass="DragDragBox">Item #2</div>
    <div class="DragBox" id="Item3"  overClass="OverDragBox" dragClass="DragDragBox">Item #3</div>
    <div class="DragBox" id="Item4"  overClass="OverDragBox" dragClass="DragDragBox">Item #4</div>
</div>
<div class="DragContainer" id="DragContainer2">
    <div class="DragBox" id="Item5"  overClass="OverDragBox" dragClass="DragDragBox">Item #5</div>
    <div class="DragBox" id="Item6"  overClass="OverDragBox" dragClass="DragDragBox">Item #6</div>
    <div class="DragBox" id="Item7"  overClass="OverDragBox" dragClass="DragDragBox">Item #7</div>
    <div class="DragBox" id="Item8"  overClass="OverDragBox" dragClass="DragDragBox">Item #8</div>
</div>
<div class="DragContainer" id="DragContainer3">
    <div class="DragBox" id="Item9"  overClass="OverDragBox" dragClass="DragDragBox">Item #9</div>
    <div class="DragBox" id="Item10" overClass="OverDragBox" dragClass="DragDragBox">Item #10</div>
    <div class="DragBox" id="Item11" overClass="OverDragBox" dragClass="DragDragBox">Item #11</div>
    <div class="DragBox" id="Item12" overClass="OverDragBox" dragClass="DragDragBox">Item #12</div>
</div>

    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:02:05.943

您是否错过了一些 javascript 参考资料？Chrome 尖叫它找不到函数 getMouseOffset（第 95 行）

# java - jUnit 测试两个布尔数组

> ID：12500980
> 
> 赞同：7
> 
> 时间：2012-09-19T18:47:50.177
> 
> 标签：java, junit

我刚刚注意到 jUnit 4.8.1 不支持测试两个布尔数组是否相等。还有很多其他的 assertArrayEquals 但没有一个可以接受两个布尔数组。

有没有合适的方法来做到这一点？我目前的想法是我必须遍历一个数组并使用类似的东西

```
Assert.assertTrue(arrayOne[i] == arrayTwo[i]); 
```

有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T18:53:49.563

您可以使用[`Arrays.equals()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28boolean%5B%5D,%20boolean%5B%5D%29)比较两个数组，然后断言它们是等价的。

```
Assert.assertTrue(Arrays.equals(arrayOne, arrayTwo)); 
```

`Arrays.equals()`检查数组中的长度和每个元素，因此您不必担心遍历每个数组。

还有[`Assert.assertArrayEquals`](http://junit.sourceforge.net/javadoc/org/junit/Assert.html#assertArrayEquals(int[],%20int[]))，它将为您提供数组不同的确切位置。

示例：对于这样编写的测试：

```
@Test
public void doArrayTest() {
    int[] foo = {1, 2, 3};
    int[] bar = {4, 5, 6};
    assertArrayEquals(foo, bar);
} 
```

结果将是：

```
arrays first differed at element [0]; expected:<1> but was:<4>

Expected :1
Actual   :4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-27T10:21:23.907

该功能已添加到 2014 年 12 月发布的 JUnit 4.12 中。

```
assertArrayEquals(boolean[] expecteds, boolean[] actuals)
assertArrayEquals(String message, boolean[] expecteds, boolean[] actuals) 
```

供参考：这是包含提交的 PR： [https ://github.com/junit-team/junit/pull/632](https://github.com/junit-team/junit/pull/632)

# iphone - 调用函数“CFUUIDCreate”返回一个具有 +1 保留计数的 Core Foundation 对象

> ID：12500981
> 
> 赞同：1
> 
> 时间：2012-09-19T18:47:54.167
> 
> 标签：iphone, ios, sharekit

向项目中添加了共享工具包组，发现很多编译警告已修复，但其中大部分仍然显示。

这个来自 OAMutableURLRequest.m 类

```
- (void)_generateNonce
{
CFUUIDRef theUUID = CFUUIDCreate(NULL);
CFStringRef string = CFUUIDCreateString(NULL, theUUID);
NSMakeCollectable(theUUID);// **Reference count decremented on this line**
nonce = (NSString *)string; //**Incorrect decrement of the reference count of an object that is not owned at this point by the caller on this line**
} 
```

不知道如何解决这个问题。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:07:58.120

解决了。实际上，我并没有分享在这种情况下要发布的内容，但是当我添加时

```
 - (void)_generateNonce
 {
CFUUIDRef theUUID = CFUUIDCreate(NULL);
CFStringRef string = CFUUIDCreateString(NULL, theUUID);
NSMakeCollectable(theUUID);
nonce = (NSString *)string;
//[string autorelease];
CFRelease (theUUID);
} 
```

有效。看起来我负责释放我在 CFUUIDCreate 中分配的 UUID。

# vb6 - 如何在没有 UI 编辑器的 Visual Studio 6.0 中编写代码

> ID：12500983
> 
> 赞同：1
> 
> 时间：2012-09-19T18:47:56.397
> 
> 标签：vb6, visual-studio-6

我是 Visual Basic 的新手。我在 Visual Studio 2010 中完成了一些教程，并且正在使用 Visual Basic 6.0。

我不知道在哪里可以像在 VB 2010 中那样编写代码。我得到了一个 UI 编辑器，而不是 Visual Studio 2010 中可用的代码编辑器，我可以在其中添加按钮。我怎样才能简单地编写一些 Visual Basic 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T18:54:53.713

在 VB6 中，有一个代码视图。例如，如果您双击该按钮，它将带您进入代码视图中的单击事件。

如果您创建模块..（.bas 文件扩展名），您可以编写独立代码。也可以创建一个activex dll项目来编写代码组件。我过去常常这样做，用 com 注册它们，然后从 NT4 服务器上的 ASP 页面调用它们。

不过，VB6 早于 .NET 框架。它与您在 Visual Studio 2010 中学到的内容大不相同。没有任何 .NET 库，并且存在一些语法差异，因为 VB.net 比 VB6 更严格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-24T05:01:46.063

如果你真的很擅长 VB，那么你可以在 VB 6 的编辑器（如 Notepad ++ 和 Sublime Text）旁边使用其他编辑器进行编码，其他人只要坚持下去。它非常酷，人们正在使用 vb6 制作世界级的应用程序检查 planetsourcecode.com 你会看到奇迹

# css - CSS文本对齐不起作用

> ID：12500989
> 
> 赞同：19
> 
> 时间：2012-09-19T18:48:28.177
> 
> 标签：css, text-alignment, text-align

我这里有这个 CSS 代码

```
.navigation{
    width:100%;
    background-color:#7a7a7a;
    font-size:18px;
}

.navigation ul {
    list-style-type: none;
    margin: 0;
}

.navigation li {
    float: left;
}

.navigation ul a {
    color: #ffffff;
    display: block;
    padding: 0 65px 0 0;
    text-decoration: none;
} 
```

我想做的是将我的班级导航居中。我尝试使用`text-align:center;`，`vertical-align:middle;`但它们都不起作用。

这是HTML代码

```
<div class="navigation">
<ul>
<li><a href="http://surfthecurve.ca/">home</a></li>
<li><a href="http://surfthecurve.ca/?page_id=7">about</a></li>
<li><a href="http://surfthecurve.ca/?page_id=9">tutors</a></li>
<li><a href="http://surfthecurve.ca/?page_id=11">students</a></li>
<li><a href="http://surfthecurve.ca/?page_id=13">contact us</a></li>
</ul>
</div><!--navigation--> 
```

当我说它不起作用时，我的意思是文本向左对齐。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-19T18:52:20.220

更改`<a>`元素的规则：

```
.navigation ul a {
    color: #000;
    display: block;
    padding: 0 65px 0 0;
    text-decoration: none;
}​ 
```

到

```
.navigation ul a {
    color: #000;
    display: block;
    padding: 0 65px 0 0;
    text-decoration: none;
    width:100%;
    text-align:center;
}​ 
```

只需添加两个新规则（`width:100%;`和`text-align:center;`）。您需要使锚点展开以占据列表项的整个宽度，然后将其居中对齐。

**[jsFiddle 示例](http://jsfiddle.net/j08691/gnXcg/)**

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-19T18:57:56.377

您必须使`UL`内部`div`表现得像一个块。尝试添加

```
.navigation ul {
     display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T19:00:29.093

我尽量避免浮动元素，除非设计真的需要它。因为你已经漂浮了，`<li>`它们不正常*流动*。

If you add `.navigation { text-align:center; }` and change `.navigation li { float: left; }` to `.navigation li { display: inline-block; }` then entire navigation will be centred.

One caveat to this approach is that `display: inline-block;` is not supported in IE6 and needs a workaround to make it work in IE7.

# javascript - 在聊天框中创建新的消息通知

> ID：12500990
> 
> 赞同：1
> 
> 时间：2012-09-19T18:48:34.057
> 
> 标签：javascript, jquery

我正在尝试为[我的聊天框](http://www.goawaymom.com/)创建通知，当有人向您发送新消息时，可以在“谈话”标题旁边看到。我已经尝试了多种从未奏效的东西。

[一只忙碌的猫 http://goawaymom.com/damit.png](http://goawaymom.com/damit.png)

这是我的代码

```
$(document).ready(function(){
  //If user submits the form
  $("#submitmsg").click(function(){ 
    var clientmsg = $("#usermsg").val();
    $.post("post.php", {text: clientmsg});              
    $("#usermsg").attr("value", "");
    return false;
  });

  //Load the file containing the chat log
  function loadLog(){       
    $.ajax({
      url: "log.html",
      cache: false,
      success: function(html){     
        var chatbox= $("#chatbox");
        var atBottom = (chatbox[0].scrollHeight - chatbox.scrollTop() == chatbox.outerHeight());
        chatbox.html(html);

        if (atBottom )
          chatbox.animate({ scrollTop: 99999 }, 'normal');
      }
    });
  }
  setInterval (loadLog, 2500);  //Reload file every 2.5 seconds

  //If user wants to end session
  $("#exit").click(function(){
    var exit = confirm("Are you sure you want to end the session?");
    if(exit==true){window.location = 'index.php?logout=true';}
  });
}); 
```

有没有人知道我会怎么做。到目前为止，我尝试过的一切都失败了。我尝试使用不起作用的设置间隔函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:54:11.063

那么，如果我理解正确，提交消息会将其附加到 log.html 的末尾？我认为这对你想做的事情不起作用。您需要有一个服务来跟踪新帖子，以便您可以检查更新，而不仅仅是重新加载 div 的 innerHTML。

一旦你有了它，你就可以计算自从聊天获得焦点以来你加载了多少新消息，并在每次聊天获得焦点时将其重置为 0。

您可以使用 document.title 更新标题。因此，每当您需要更新计数时，您都可以

```
document.title = 'my normal title (' + newCount + ')'; 
```

简而言之，这不是你可以用 javascript 解决的问题，你需要重新设计你的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:34:13.837

你的问题有点不完整/不清楚。当您说“每当有人向您发送新消息时”时，您的意思是仅在出现新消息时（对您来说不是必需的，而是整个聊天室都需要）。

假设是这种情况，那么每当有人输入某些内容时，这个数字就会不断增加，这就引出了一个问题：你什么时候减少这个数字？

这是一段可以帮助您入门的代码。它不会减少通知号码，因为在您的问题中您没有说明该号码何时重置。

在最后`$(document).ready`添加以下行

```
// Load log and cache number of message on page when it first loaded
// Pass in a callback function to cache the message count. 
loadLog(function(){
  window.lastReadMessageCount = $('.msgln').length;
}); 
```

更新 loadLog 以接受回调：

```
function loadLog(callback){
  ...
  success: function(html){
    if (callback) callback();
    ...
  }
  ...
} 
```

现在您知道用户在页面加载时看到了多少条消息。现在，每当页面更新聊天时，我们都想更新新消息计数。

在您的`loadLog()`, 将以下行添加到末尾

```
newMessagesCount = $('.msgln').length - lastReadMessageCount;
document.title = newMessagesCount > 0 ? 'title (' newMessagesCount ')' : 'title'; 
```

就是这样！您现在需要做的就是明确何时更新 lastReadMessageCount。

# mahout - 如何使用 mahout 的 SVM 进行图分类？

> ID：12500992
> 
> 赞同：1
> 
> 时间：2012-09-19T18:48:42.953
> 
> 标签：mahout, svm

如何使用 mahout 的 SVM 进行图分类？我在 mahout 的网站上找不到任何下载链接。在这种情况下，我还应该选择顺序 SVM 还是线性 SVM？感谢您对此的任何帮助。

# c# - 将元服务器控件内容设置为方法返回值

> ID：12500996
> 
> 赞同：0
> 
> 时间：2012-09-19T18:49:08.670
> 
> 标签：c#, asp.net, user-controls

我正在开发一个用户控件，我想在其中将元数据发送到我正在针对 .NET 3.5 构建的头部。我希望某些元标记内容是动态的，这是方法调用的结果。这是我在用户控件中所做的示例：

```
<meta id = "metaOgUrl" property="og:url" content="<%=this.GetOgImage()%>" runat = "server"/> 
```

以及后面代码中的 GetOgImage() ：

```
public string GetOgImage()
{
    if (entry != null)
    {
        return entry.PhotoUrl; 
    }
    return String.Empty;
} 
```

又好又简单对吧？问题是我看到方法调用本身在浏览器中呈现为内容值：

```
<meta id="tmpl_appmain_block1_ctl00_metaOgUrl" content="<%=this.GetOgImage()%>" property="og:url"> 
```

有人可以告诉我我在这里做错了什么吗？根据我所阅读的内容，这应该可以工作。任何帮助将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:30:26.537

是的，head 标记中的代码被隐藏了，但是您可以删除 runat=server 属性并将其作为 hack：

```
<meta id="metaOgUrl" property="og:url" content="<%= "" + GetOgImage() %>" /> 
```

或者，保留 runat=server 并删除 content 属性并将其设置在代码隐藏中

```
<meta id="metaOgUrl" runat="server" property="og:url" />

protected void Page_Load(object sender, EventArgs e) {
    metaOgUrl.Attributes["content"] = GetOgImage();
} 
```