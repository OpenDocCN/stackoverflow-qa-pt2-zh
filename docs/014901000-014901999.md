# StackOverflow 问答 14901000-14901999

# powershell - 在powershell中使用特定文件名复制和重命名文件

> ID：14901000
> 
> 赞同：1
> 
> 时间：2013-02-15T18:23:42.397
> 
> 标签：powershell

我需要复制几百个文件（到同一个目录）并重命名它们。

所有这些文件都具有相同的名称。

例如

```
Z:/Directory/123/Photo.jpg
Z:/Directory/456/Photo.jpg
Z:/Directory/789/Photo.jpg 
```

我需要复制这些文件，给它们一个新名称，同时保留原始文件。

所以我最终会在同一个目录中得到 2 个相同但名称不同的文件。

```
Z:/Directory/123/Photo.jpg
Z:/Directory/123/Image.jpg
Z:/Directory/456/Photo.jpg
Z:/Directory/456/Image.jpg
Z:/Directory/789/Photo.jpg
Z:/Directory/789/Image.jpg 
```

我想使用 Powershell 来做到这一点，但其他任何方法都可以。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:29:17.117

```
Get-ChildItem -Path Z:\Directory\*\Photo.jpg | foreach { Copy-Item $_ (Join-Path $_.Directory 'Image.jpg') } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:34:37.393

```
Get-ChildItem Z:/Directory -Recurse -Include Photo.jpg | ? { !$_.PSIsContainer } | % { Copy-Item $_ (Join-Path $_.Directory Image.jpg) } 
```

# gwt - GWT-Bootstrap 中的表格

> ID：14901002
> 
> 赞同：3
> 
> 时间：2013-02-15T18:23:47.907
> 
> 标签：gwt, twitter-bootstrap, uibinder, gwt-bootstrap

尝试使用 UIBinder 使用 Bootstrap 将表添加到我的 GWT 应用程序。据我了解，有某种表格移植到 GWT-Bootstrap，但我不知道要使用哪个以及如何使用它（也找不到任何文档）。

我想要这样的东西，当然是 Bootstrap 风格：

```
<b:CellTable>
    <<ROW>
        <<COLUMN>>
           Text blabla
        <</COLUMN>>
        <<COLUMN>>
           Text blabla
        <</COLUMN>>
    <</ROW>>            
</b:CellTable> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T11:16:32.747

我认为你混淆了一些东西。

`<b:CellTable>`基本上是一个`CellTable`带有引导样式的普通 GWT（它扩展了正常`CellTable`并为样式注入了自定义`Resource`）。

Bootstrap 和 GWT-Bootstrap 也有普通 HTML 表格的样式。
您可以使用`<b:Table>`小部件，也可以只定义`<table>`和添加相应的引导类名。

所以有三个选择：

*   如果您需要`CellWidgets`（渲染大量记录，快速性能）的功能并希望使用引导样式，请使用`<b:CellTable>`
*   如果您只需要一个引导样式的 HTML 表格，并且还想与它进行交互，请使用`<b:Table>`小部件。
*   如果您只需要一个静态引导样式的 HTML 表，那么只需使用`<table class="table table-striped">`

# asp.net - ADFS 2.0 - 无主域发现

> ID：14901005
> 
> 赞同：1
> 
> 时间：2013-02-15T18:23:54.733
> 
> 标签：asp.net, adfs, ws-federation

我有以下用于联合 asp.net 应用程序的网络配置，但我没有看到我的家庭领域发现屏幕。我无法弄清楚我做错了什么。

ADFS #1 - ADFS #2 的依赖方信任

ADFS #2 - 依赖方信任我的 Web 应用程序。- 使用 ADFS #1 声明提供者信任 - 使用 Active Directory 声明提供者信任

Webserver - 具有对 ADFS #2 的 STS 引用的 ASP.NET 应用程序。

我想当我尝试访问该网站时，我会看到预设的家庭领域发现屏幕，我可以在其中选择 ADFS #1 或 #2 的领域。相反，我总是被提示输入 ADFS #2 域的凭据（我的应用程序有一个 STS 引用）。任何帮助，将不胜感激。我认为这个配置是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:41:37.893

你以前见过领域选择吗？通常，如果您从下拉列表中选择一个领域，它会自动对您进行 30 天的身份验证。您必须清除 cookie 才能看到领域发现页面。——</p>

# ios - 需要一种解决方案来在屏幕上一张一张地组合大量图像

> ID：14901006
> 
> 赞同：1
> 
> 时间：2013-02-15T18:23:58.233
> 
> 标签：ios, performance, uiimageview, cgcontext, composite

我有一千张小图片。我需要同时将它们一个一个地组合成一个大图像~~，~~并在屏幕上生活。无论我们如何加载/组合小图像，用户都应该能够快速流畅地观看显示的小图像。

意思是：

> 大图像 += 小图像 1；
> 
> 大图像 += 小图像2；
> 
> 大图像 += 小图像3；
> 
> ...
> 
> 大图像 += 小图像 1000+；

第一次，我只是用 addSubviews/addSublayers 将小图像添加到大图像中。可以想象，这会导致巨大的延迟，因为要渲染的视图太多，成本很高。

所以我尝试只使用一个imageView（大图像），每次将小图像组合成大图像。所以我写了一些代码，比如：

```
UIGraphicsBeginImageContextWithOptions(self.frame.size, NO, 0.0f);
CGContextRef ctx = UIGraphicsGetCurrentContext();
[bgImageView.layer renderInContext:ctx];
//[bgImageView.image drawInRect:self.frame];  // This line or the line above, same result
[smallImg drawInRect:rectToWindow];
bgImageView.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但是仍然存在巨大的滞后问题（但方式不同），我猜是因为它每次都渲染大图像，成本很高。

所以问题是：

有没有可能我可以保持在上下文中渲染的大图像，而不是每次都渲染它？

或者你有更好的主意可以做我需要的。只要和我谈谈，任何想法都会有所帮助。

感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:26:06.277

如果您正在处理大量图像，那么 OpenGLES 是最佳选择并使用单个 EAGL 视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:45:15.180

我认为您的视图应该是的子类，`UIImageView`当您想将一组小图像添加到大图像时，请使用以下方法：

```
- (UIImage *)addSmallImages:(NSArray *)smallImages   // array of UIImage
                   atPoints:(NSArray *)points        // array of NSValue
                 toBigImage:(UIImage *)bigImage
{
    if (smallImages.count != points.count)
    {
        NSLog(@"Array size mismatch");
        return nil;
    }

    NSUInteger count = [smallImages count];

    UIGraphicsBeginImageContextWithOptions(bigImage.size, NO, 0.0); 
    [bigImage drawAtPoint:CGPointZero];

    for (NSUInteger i = 0; i < count; i++)
    {
        UIImage *smallImage = [smallImages objectAtIndex:i];
        NSValue *pointVal = [points objectAtIndex:i];
        CGPoint point = [pointVal CGPointValue];
        [smallImage drawAtPoint:point];
    }

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext(); 
    UIGraphicsEndImageContext();
    return newImage; 
} 
```

这被称为这样的东西：

```
NSMutableArray *smallImages = [[NSMutableArray alloc] init];
NSMutableArray *points = [[NSMutableArray alloc] init];

for (NSUInteger i = 0 ...)
{
    [smallImages addObject:smallImage];
    [points addObject:[NSValue valueWithCGPoint:CGMakePoint(100.0, 120.0)]];
}

imageView.view = [self addSmallImages:smallImages atPoints:points toBigImage:imageView.view]; 
```

如果您想将“小图像”动画到“大图像”上，那么您可以通过创建一个`CALayer`，将“小图像”应用​​到它，然后将其动画到正确的位置来实现。然后调用上述方法提交更改，然后删除图层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:46:01.537

我的第一个想法是绘制一个 UIView`drawRect:`并每 1/10 秒或类似的东西绘制每个图像。之后，只需使用类似的函数`UIGraphicsGetImageFromCurrentImageContext()`并将整个上下文保存到图像中。这样图像是动态绘制的（所以即使需要很长时间用户也会看到它发生）。

我的第二个想法是在`CGBitmapContext`后台线程上绘制一个并在绘制时添加一个活动指示器。

# php - 使用 PHP 为 MySQL 表中两个日期之间的每周时间段的每个实例生成一条记录

> ID：14901012
> 
> 赞同：2
> 
> 时间：2013-02-15T18:24:35.920
> 
> 标签：php, mysql, date

我正在尝试执行以下操作：

我有一个 MySQL 表，其中包含客户每周定期开会的时间段（存储为 SQL 日期），例如星期一 13.00、星期一 14.00、星期二 15.00 等。每个时间段都是唯一的，并且只有每个时隙一个条目（即该表包含“样本”周的数据）。

我想使用 PHP 生成两个指定日期之间的所有每周时间段的列表，按时间段排序。

因此，例如，如果我在表中只有上述三个时间段，并且我想要 2013 年 1 月 1 日至 2013 年 1 月 15 日之间的所有时间段，则脚本将返回：

```
1 Jan 2013 15.00
7 Jan 2013 13.00
7 Jan 2013 14.00
8 Jan 2013 15.00
14 Jan 2013 13.00
14 Jan 2013 14.00
15 Jan 2013 15.00 
```

我可以添加我目前拥有的代码，但我觉得它真的无济于事，因为我对这个问题感到很困惑！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:36:57.783

编辑：忘记我的第一个答案，我误解了你的问题。我没有意识到您想在时间段表中创建每周重复的记录。

所以这是一个非常不同的解决方案。这只是部分的，但它可能会对你有所帮助。你的问题是你想要排序的输出。如果您在外部循环中遍历表中的行，然后在内部循环中遍历日期范围，您最终会得到错误的排序顺序。

为了避免这种情况，我们可以切换循环：在外循环中循环日期范围，在内循环中循环时隙。但是，问题在于您应该避免从 mysql 数据库重复请求相同的数据，这会不必要地减慢速度。

一种解决方案是从数据库中提取一次时隙，并将其存储在一个数组中。然后使用日期范围作为外循环。另一种解决方案是在外部循环中遍历数据库表中的行，但不立即回显结果，而是将它们添加到数组中，然后对数组进行排序。如果您存储 UNIX 日期（不是格式化的日期），那么排序很容易。

无论如何，这是使用第一种方法的可能解决方案。剩下的唯一一点是从您的时间槽表中创建 $timeslots 数组关联数组。

```
# $timeslots is an array of associative arrays.
# The trick is to extract this data from your mysql table

$timeslots = array( 
    # Timeslot corresponding to Monday 15:00
    array ( 'dow' => 1, 'hour' => 15 ),
    # Tuesday 13:00
    array ( 'dow' => 2, 'hour' => 13 ),
);

$date = 1356998400; // '2013-01-01';
$end_date = 1358208000; // '2013-01-15';

while($date <= $end_date)
{
    # Convert the loop variable to day of week              
    $date_dow = date('w', $date); 

    foreach ($timeslots as $timeslot)
    {
        # Check if it matches the one in the timeslot
        if ($date_dow == $timeslot['dow'])
        {
            $timeofday = $date + (3600 * $timeslot['hour']);
            echo date("D, j M Y H:i", $timeofday) . '<br>';
        }

    }
    $date += 86400; # advance one day
} 
```

上面的代码产生以下输出：

```
Tue, 1 Jan 2013 13:00
Mon, 7 Jan 2013 15:00
Tue, 8 Jan 2013 13:00
Mon, 14 Jan 2013 15:00
Tue, 15 Jan 2013 13:00 
```

# php - 使用 PHP Form Builder 类的动态字段

> ID：14901015
> 
> 赞同：0
> 
> 时间：2013-02-15T18:24:58.567
> 
> 标签：php

我正在使用 PHP 表单生成器类 v3.1 [http://code.google.com/p/php-form-b ​​uilder-class/](http://code.google.com/p/php-form-builder-class/)

我正在尝试创建一个动态表单

```
$options = array("Amount", "Reset Password");
$form->addElement(new Element\Radio("Command Type to Employee : ", "type", $options));

$form->addElement(new Element\TextBox("Amount :", "amount"));
$form->addElement(new Element\TextBox("New Password:", "password")); 
```

当我选择“金额”单选按钮时，“金额”文本字段应显示和

当我选择“重置密码”单选按钮时，应显示“密码”文本字段。

任何人都可以帮助我解决它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:12:55.990

如果您为项目设置了 jquery，则可以在呈现表单后在视图脚本中使用以下内容。这是未经测试的，但它应该工作。

```
<?php 
    // ... setup $form
    $form->render();
?>
<script>
$(function(){
    var amountElements = $('input[name=amount]').prev('label').andSelf();
    var passwordElements = $('input[name=password]').prev('label').andSelf();
    $('input[name=type]').change(function() {
        if ($(this).val() == 'Reset Password') {
            amountElements.hide();
            passwordElements.show();
        } else {
            amountElements.show();
            passwordElements.hide();
        }
    });

    // trigger the event for the selected radio button
    $('input[name=type]:checked').change();
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:09:30.647

HI Divey生成的html代码如下——

```
<style type="text/css">label span.required { color: #B94A48; }span.help-inline, span.help-block { color: #888; font-size: .9em; font-style: italic; }</style><form action="employeetransaction.php" id="vertical" method="post" class="ewForm"><label for="vertical-element-0"></label><input type="hidden" name="form" value="vertical" id="vertical-element-0"/><label for="vertical-element-1"></label><input type="hidden" name="empno" value="1007" id="vertical-element-1"/><label for="vertical-element-2"></label><BR><label for="vertical-element-3"></label><BR><label for="vertical-element-4">
    Command Type to Employee : </label><label class="radio"> <input id="vertical-element-4-0" type="radio" name="type" value="Amount" checked="checked"/> 
    Loan Approval </label> <label class="radio"> <input id="vertical-element-4-1" type="radio" name="type" value="Reset Password"/> 
    Reset Password </label> <label for="vertical-element-5"></label><BR><label for="vertical-element-6"></label><BR><label for="vertical-element-7">
    Amount :</label><input type="text" name="amount" id="vertical-element-7"/><label for="vertical-element-8">Password 
    :</label><input type="text" name="password" id="vertical-element-8"/><div class="form-actions"><input type="submit" value="Submit" name class="btn btn-primary" id="vertical-element-9"/> <input type="button" value="Cancel" name onclick="history.go(-1);" class="btn" id="vertical-element-10"/></div></form><script type="text/javascript">jQuery(document).ready(function() {      jQuery("#vertical").bind("submit", function() { 
            jQuery(this).find("input[type=submit]").attr("disabled", "disabled"); 
        });jQuery("#vertical :input:visible:enabled:first").focus();}); </script><script>
$(function(){
    $('input[name=type]').change(function() {
        if ($(this).val() == 'Reset Password') {
            $('input[name=amount]').closest('.control-group').hide();
            $('input[name=password]').closest('.control-group').show();
        } else {
            $('input[name=amount]').closest('.control-group').show();
            $('input[name=password]').closest('.control-group').hide();
        }
    });

    // trigger the event for the selected radio button
    $('input[name=type]:checked').change();
});
</script> 
```

# php - 当文件大小大于 50gb 时如何写入不同的文件

> ID：14901017
> 
> 赞同：0
> 
> 时间：2013-02-15T18:25:01.890
> 
> 标签：php, fwrite

我当前的代码：

```
$fileone= fopen("fileone.sql", "r"); //opens file fileone.sql
$fileonewrite = fopen("fileone.rdf", "w"); //this is the file to write to

$fileNum=1;
$i=0;
while (!feof($fileone) ) { //feof = while not end of file

    if ($contents = fread($fileonewrite ,53687091200));  //if file is more than 50gb, write to new file (below) .. this doesnt seem to work properly
    {    file_put_contents('fileone'.$fileNum.'.rdf',$contents);
    $fileNum++; 
    }

    $fileoneRow[] = fgets($fileone);  //fgets gets line
    $fileoneParts = explode("\t", $fileoneRow[$i]); //explode using tab delimiter 

    fwrite( " lots of stuff" );
     unset($fileoneParts);
    }
    fclose($fileonetype);   
    fclose($fileonewrite); 
```

我正在读取大量数据并输出更多数据，创建的文件很容易达到 >200GB。这会导致内存问题。所以我想做的是，当正在写入的文件（例如fileone.rdf）达到50gb 时，我想开始写入filetwo。我的代码 atm 不能很好地工作，因为它似乎输出了数千个空文件。

感谢您阅读我的查询，任何帮助，一如既往地非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:27:55.603

```
if ($contents = fread($fileonewrite ,53687091200));  //if file is more than 50gb, write  to new file (below) .. this doesnt seem to work properly
                                                  ^----BUG BUG BUG
{    file_put_contents('fileone'.$fileNum.'.rdf',$contents);
$fileNum++; 
} 
```

那里`;`终止了 if() 语句，所以里面的代码`{}`不是**if** (); 的一部分。如果 fread 没有返回数据 (eof)，那么无论 if() 测试是如何产生的，您仍然会从文件中写入一个空的 $contents。

一口气读取 50gigs 的数据简直是疯了。为什么不在这些方面做更多的事情：

```
$in = fopen('input');
$out = fopen('output');
$read = 0;
while($data = fread($fh, 1024*1024)) { // read in 1meg chunks 
    fwrite($out, $data);
    $read += strlen($data);
    if ($read > 50gig) {
        fclose($out);
        $out = fopen('new file goes here');
        $read = 0;
    }
} 
```

这将以 1meg 块的形式进行复制，这将对系统内存施加 FAR FAR FAR 更少的压力，然后在您最终达到 50gig 复制时交换到一个新文件。

# php - PHP FTP 转账金额

> ID：14901018
> 
> 赞同：3
> 
> 时间：2013-02-15T18:25:03.753
> 
> 标签：php

[是否可以检测到使用 PHP 的FTP 模块](http://www.php.net/manual/en/book.ftp.php)传输了多少数据？

伪代码

```
... connect to server
ftp_nb_put(file...)
while(true) {
    $data = ftp_nb_continue(file...);
    if ($data === FTP_MOREDATA) {
        continue ... get amount transfered ...
    } else {
        break ... check if finished etc ...
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-14T18:28:46.487

你现在可能已经得到了答案，但是对于任何搜索的人......这是一个带有进度回调的 ftp 上传功能。$lcfn = 本地文件名 $rmfn = 远程文件名

```
function ftp_upload($conn, $lcfn, $rmfn, $progress)
{
    $ret = false;

    $_pc = -1;
    $totalBytes = filesize($lcfn);

    $fp = fopen($lcfn, 'rb');

    $state = @ftp_nb_fput($conn, $rmfn, $fp, FTP_BINARY);

    if($state !== FTP_FAILED){

        while($state === FTP_MOREDATA){

            $doneSofar = ftell($fp);
            $percent = (integer)(($doneSofar / $totalBytes) * 100);

            if($_pc != $percent){
                $progress($percent);
                $_pc = $percent;
            }

            $state = @ftp_nb_continue($conn);
        }

        if($state === FTP_FINISHED){

            if($_pc != 100){
                $progress(100);
            }

            $ret = true;

        }else{
            //error: not finished
        }
    }else{
        //error: failure
    }

    fclose($fp);
    return $ret;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:34:38.793

**不。**

奇怪的是（而且很不幸），似乎*没有*任何方法可以确定上一次调用 上传了多少字节`ftp_nb_continue`，使用这个 PHP 扩展。

顺便说一句，您有一些错误：

1.  您应该以与检查 的结果`ftp_nb_put`相同的方式检查 的结果`ftp_nb_continue`，因为传输是从前者开始的，而不是从后者开始的；

2.  您的循环在看到时停止，但仅在未看到`FTP_MOREDATA`时才应*停止*。`FTP_MOREDATA`

 *```
... connect to server
$result = ftp_nb_put(file...)
while ($result === FTP_MOREDATA) {
    $result = ftp_nb_continue(file...);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-18T03:07:07.923

对于任何想在进行文件传输时显示上传进度的人，这是一个很棒的库[php-ftp-client](https://github.com/lazzard/php-ftp-client)开始：

编码

```
$interval = 1;
$ftp->asyncDownload('illustrations/assets.zip', 'assets.zip', function ($stat) use ($interval) {
    ob_end_clean();
    ob_start();

    echo sprintf(
        "speed : %s KB/%ss | percentage : %s%% | transferred : %s KB | second now : %s <br>",
        $stat['speed'],
        $interval,
        $stat['percentage'],
        $stat['transferred'],
        $stat['seconds']
    );

    ob_flush();
    flush();
}, true, $interval); 
```

结果在浏览器中：

[![在此处输入图像描述](../Images/b0824acdfac8fc5e612af3fa3517baa3.png)](https://i.stack.imgur.com/Xj3fS.gif)*

# javascript - 如何从用户脚本访问页面 jQuery？

> ID：14901036
> 
> 赞同：0
> 
> 时间：2013-02-15T18:26:25.680
> 
> 标签：javascript, jquery, google-chrome, userscripts

我想在已经包含 jQuery 的页面上写一个小的用户脚本。我可以从 chrome 开发人员控制台访问 $ 对象，但不能从用户脚本访问 - 它只是说 jQuery || $ || window.jQuery 未定义。

PS：用户脚本作为扩展安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:36:13.343

用户脚本不会在与页面相同的上下文中运行。为了访问页面的 javascript 环境，您需要像这样运行它：

```
var execute = function (body) {
    if(typeof body === "function") { body = "(" + body + ")();"; }
    var el = document.createElement("script");
    el.textContent = body;
    document.body.appendChild(el);
    return el;
};

execute(function() {
    $.noop();
} 
```

奖励：您还可以从 CDN 加载外部脚本。

```
var load = function (src, on_load, on_error) {
    var el = document.createElement("script");
    el.setAttribute("src", src);
    if (on_load != null) { el.addEventListener("load", on_load); }
    if (on_error != null) { el.addEventListener("error", on_error); }
    document.body.appendChild(el);
    return el;
};
load("//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js", function () {
    execute(function(){$.noop();});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:35:53.240

您必须在 Userscript 本身中包含 jQuery，页面是否包含它并不重要。

***更新***：我的好人 Brock（感谢您的提醒！）通知我上一个链接对 Chrome 扩展没有用，所以我发现了一些其他链接，告诉您如何为 Chrome 包含 jQuery（您必须将其添加到manifest.json 文件）

Chrome 扩展中的 Jquery
[http://blog.michael-forster.de/2009/08/using-jquery-to-build-google-chrome.html](http://blog.michael-forster.de/2009/08/using-jquery-to-build-google-chrome.html)

以及有关 manifest.json 的更多信息
[http://developer.chrome.com/extensions/manifest.html](http://developer.chrome.com/extensions/manifest.html)

# django - Redis 在内存已满之前驱逐键

> ID：14901052
> 
> 赞同：3
> 
> 时间：2013-02-15T18:27:29.553
> 
> 标签：django, heroku, redis

我使用 Redis 作为一个简单的键值存储。我实际上正在使用 Heroku 插件（Redis Cloud），但我认为这个问题并不重要。好的，Redis 的可用内存为 1GB，并且驱逐策略设置为`allkeys lru`. 存储数据时我没有设置 ttl。我的理解是数据会保留在 Redis 中，直到内存已满。然后最后一个最近使用的数据被驱逐。但事实并非如此。Redis 经常使用大约 3MB 的内存，并且很快就会删除数据。

我在这里理解有什么问题吗？为什么 Redis 不将数据保存在内存中？

谢谢西蒙
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:15:37.650

找到了。Redis 本身不是问题。我正在使用的 Django 插件之一（django-redis-cache、redis-py）将默认 TTL 设置为 300 秒。

# c# - Windows 为我的应用程序显示“结束任务窗口”

> ID：14901054
> 
> 赞同：0
> 
> 时间：2013-02-15T18:27:38.933
> 
> 标签：c#, winforms

我的 WindowsForms 应用程序使用 WCF 服务来发送信息以存储在我的服务器上。当 Windows 启动并且用户登录时，它开始工作。但是当用户关闭操作系统时，Windows（操作系统）会向用户显示一个“结束任务窗口”来结束我的应用程序的任务。

1.  为什么 windows 会显示“结束任务窗口”？
2.  我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:32:05.660

您正在寻找[`SystemEvents.SessionEnding`](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending.aspx)活动。您可能还需要取消任何正在进行的 WCF 查询。

如果您已经处理了这是您的`From.Closing`事件，则可以改用 MSDN 中的以下代码段：

```
private static int WM_QUERYENDSESSION = 0x11;

private static bool systemShutdown = false;

protected override void WndProc(ref System.Windows.Forms.Message m)
{
    if (m.Msg == WM_QUERYENDSESSION)
    {
        systemShutdown = true;
    }

    // If this is WM_QUERYENDSESSION, the closing event should be
    // raised in the base WndProc.
    base.WndProc(ref m);

} 
```

然后在您的`Form.Closing`处理程序中，您可以决定如何处理即将发生的系统关闭事件。

# java - Java eclipse - 活动目录，属性修改 #2

> ID：14901060
> 
> 赞同：1
> 
> 时间：2013-02-15T18:27:56.107
> 
> 标签：java, eclipse, attributes, active-directory

首先感谢 Sotirios Delimanolis，他帮助我解决了我的第一个问题（第一部分是访问活动目录）。

所以现在我的代码是：

```
 DirContext ctx = null;

        Hashtable<String, Object> env = new Hashtable<String, Object>();
        env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
        env.put(Context.PROVIDER_URL, "ldap://"+serverAddress+":389");

        env.put(Context.SECURITY_AUTHENTICATION, "simple");
        env.put(Context.SECURITY_PRINCIPAL, DOMAIN+username);
        env.put(Context.SECURITY_CREDENTIALS, password);

        try {

            // Create the initial context
            ctx = new InitialDirContext(env);

            Attributes matchAttrs = new BasicAttributes(true); // ignore attribute name case
            matchAttrs.put(new BasicAttribute("mail", "XXXXXX@XXXX.com"));
            matchAttrs.put(new BasicAttribute("cn"));

            // Search for objects that have those matching attributes
            NamingEnumeration<SearchResult> answer = ctx.search("ou=People", matchAttrs);

            while (answer.hasMore()) {
                SearchResult sr = (SearchResult)answer.next();
                System.out.println(">>>" + sr.getName());
            } 
```

我有错误： `Failed to bind to LDAP / get account information: javax.naming.NamingException: [LDAP: error code 1 - 000020D6: SvcErr: DSID-03100754, problem 5012 (DIR_ERROR), data 0 ; remaining name 'ou=People'`

[我在http://docs.oracle.com/javase/jndi/tutorial/basics/directory/basicsearch.html](http://docs.oracle.com/javase/jndi/tutorial/basics/directory/basicsearch.html)找到了这段代码（如下）：

```
// Specify the attributes to match
// Ask for objects that has a surname ("sn") attribute with 
// the value "Geisel" and the "mail" attribute
Attributes matchAttrs = new BasicAttributes(true); // ignore attribute name case
matchAttrs.put(new BasicAttribute("sn", "Geisel"));
matchAttrs.put(new BasicAttribute("mail"));

// Search for objects that have those matching attributes
NamingEnumeration answer = ctx.search("ou=People", matchAttrs);
 You can then print the results as follows. 
while (answer.hasMore()) {
    SearchResult sr = (SearchResult)answer.next();
    System.out.println(">>>" + sr.getName());
    printAttrs(sr.getAttributes());
} 
```

所以我想知道他的目标上下文“ou = People”是否特定于每个活动目录，或者对于“ou”和“People”来说总是相同的：[http://www.kouti.com/tables/userattributes。 htm](http://www.kouti.com/tables/userattributes.htm)

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:46:49.080

Active Directory 是一个 LDAP 服务器。还有其他 LDAP 服务器（想到 OpenLDAP）。它们中的每一个都有自己或相似的对象类和属性，它们构成了您的目录模式。您可以在[此 Microsoft 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675085%28v=vs.85%29.aspx)下查看所有 Active Directory 对象类和属性。

在您的示例`sn`中，,`mail`和 ,是分别代表,和`ou`的不同属性名称。这些属性是名称-值对，因此表示具有值为 的属性的对象。`surname``mail``organizational unit``ou=People``organizational unit``People`

您使用的搜索功能：

```
ctx.search("ou=People", matchAttrs) 
```

正在寻找与`ou=People`您传递的属性匹配的属性。

该参数`ou=People`并不特定于每个 Active Directory。`People`只是他们决定使用的名称。我的目录用`Users`，另一个可能用`Accounts`。然而`ou`，通常是用于唯一标识对象的属性。

我已经阅读并可以推荐的一个很好的资源是[构建 Java 企业应用程序第一卷 - 架构](http://fahmipratama07.alumni.ipb.ac.id/files/2010/06/OReilly-Building-Java-Enterprise-Applications-Volume-I-Architecture.pdf)。该链接包含一个 pdf 版本。它有一节介绍如何使用 LDAP 来验证您的应用程序用户，但解释了很多关于 LDAP 服务器条目组织的内容，我认为您会发现这些条目很有用。

# javascript - 脚本不工作

> ID：14901061
> 
> 赞同：-3
> 
> 时间：2013-02-15T18:28:01.163
> 
> 标签：javascript, jquery, html

```
<html>
<body>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>  
<script type="text/javascript">
$('img').click(function(){
    var getTitle = $(this).attr('alt');
    alert(getTitle)
});
</script>
</head>
<body>
<img src="http://localhost/wordpress/wp-content/uploads/2013/02/chair-228x300.jpg" alt="alt" width="228" height="300" class="size-medium wp-image-92" /> 
</body>
</html> 
```

这将基本上在单击后在弹出窗口中显示图像的 alt 属性，但它似乎不起作用。我错过了什么？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:30:30.073

当`DOM`你的代码执行时，它还没有准备好被操作/访问。使用`document.ready`快捷方式：

```
$(function(){
    $('img').click(function(){
        var getTitle = $(this).attr('alt');
        alert(getTitle)
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:30:34.887

将您的 jQuery 包装在一个[文档就绪调用](http://api.jquery.com/ready/)中。

```
$(document).ready(function() {
    $('img').click(function(){
        var getTitle = $(this).attr('alt');
        alert(getTitle);
    });
}); 
```

您在要应用它的实际元素被加载之前执行您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:30:46.493

您需要等待 DOM 完全加载。

```
 $(function() {
         // your code goes here
    }); 
```

**示例：http: [//jsfiddle.net/4Y6sL/](http://jsfiddle.net/4Y6sL/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T18:33:55.163

试试这个

***JS代码***

```
$(function(){
   $('img').on('click', function(){
    var getTitle = $(this).attr('alt');
    alert(getTitle)
   });
}); 
```

# matlab - 如何提高等高线图中线条的质量（平滑度） Matlab 的

> ID：14901063
> 
> 赞同：2
> 
> 时间：2013-02-15T18:28:10.660
> 
> 标签：matlab, matlab-figure, contour

如何为出版物提高等高线图中的线条平滑度？例如，虚线看起来很糟糕，实线看起来好像它们的粗细不同。见下文

以下是部分代码：

```
Vals = [0:5:200]; contourf(X,Y,W,Vals,'EdgeColor','k','LineWidth',1.2,'LineStyle',':');axis square;grid;hold on
Vals = [10:10:200]; contour(X,Y,W,Vals,'EdgeColor','k','LineWidth',1.2);
Vals = [20 : 20 : 200]; [C,h] = contour(X,Y,W,Vals,'Color','k','LineWidth',1.8);
clabel(C,h,'FontName','Palatino Linotype','FontAngle','italic','Fontsize',9,'Color','w')

print -djpeg -r300 filename 
```

谢谢！

![在此处输入图像描述](../Images/b7c72e936f51687790772d8c3dcd8037.png)

保存为 png 并没有多大帮助...检查行：/见下文：

![在此处输入图像描述](../Images/0b105dec0fcc2fe0f27a4d7c7d1e4570.png)

现在检查虚线...

![在此处输入图像描述](../Images/1af499aa0afa1aa079f39317f940f10e.png)

这里保存为 eps (-r1200)...看起来更好

![在此处输入图像描述](../Images/cfad2057fad2e19e21b5adf121e11864.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T19:05:17.107

导出为矢量图形肯定会改善您在屏幕上看到的图像；我将 LaTeX 用于出版物，您可以导出到`eps`用于 postscript 输出，也可以`epstopdf`用于 PDF 输出，并将它们直接嵌入到您的文档中；那将是最好的解决方案。

此外，还有一些通用实用程序可以使您的绘图看起来更适合相机准备的出版物，最值得注意的是 exportfig，它具有许多功能，即使是像素图形也可以提供帮助。这些不仅仅是生成更平滑的图像。

**[http://www.mathworks.us/matlabcentral/fileexchange/23629-exportfig](http://www.mathworks.us/matlabcentral/fileexchange/23629-exportfig)**

（从该页面复制）：

此函数将图形或单个轴保存为一种或多种矢量和/或位图文件格式，和/或将光栅化版本输出到工作区，具有以下属性：

*   在屏幕上显示的图形/轴再现
*   裁剪边框（可选）
*   嵌入字体（仅限 pdf）
*   改进的线和网格线样式
*   抗锯齿图形（位图格式）
*   以原始分辨率渲染图像（位图格式可选）
*   支持透明背景（pdf、eps、png）
*   支持半透明补丁对象（仅限 png）
*   RGB、CMYK 或灰度输出（CMYK 仅适用于 pdf、eps、tiff）
*   可变图像压缩，包括无损（pdf、eps、jpg）
*   可选择附加到文件（pdf、tiff）
*   矢量格式：pdf、eps
*   位图格式：png、tiff、jpg、bmp、导出到工作区

由于所制作媒体的高质量和便携性，此功能特别适合导出用于出版物和演示文稿的图形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:49:41.060

**更新：**我现在看到您的示例代码。您是否尝试过更改`-r300`为一些非常高的价值？每英寸更多的像素应该使一切看起来更平滑。对于出版，把它调得非常高，比如`-r1200`.

**原创：** 您可以尝试的一件事是以某种支持矢量图形的格式导出绘图。Matlab 支持 PDF 和 EMF，因此请尝试其中之一。[`saveas`](http://www.mathworks.com/help/matlab/ref/saveas.html)使用命令或从图形的“文件 -> 另存为”菜单项导出。之后，在其他应用程序中打开或导入图像文件，希望它看起来会更好。

如果您获得更好的图像，请添加新的屏幕截图！

# visual-studio-2012 - VS2012 添加参考是灰色的

> ID：14901064
> 
> 赞同：4
> 
> 时间：2013-02-15T18:28:16.653
> 
> 标签：visual-studio-2012

刚刚安装了 VS2012 Premium（不是 express，而是完整的产品）。我对它和网络编程完全陌生。

我正在遵循 ASP.NET 中的教程，当我到达[这里](http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/create_the_data_access_layer)时，它告诉我

> “右键单击引用并从右键单击菜单中选择添加引用”

但是，“添加参考”菜单项是灰色的。

我该如何摆脱困境？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T18:30:56.737

检查几件事

1.  你选好项目了吗？
2.  你在调试模式吗？

我会确保你没有在调试。并尝试不选择投影，而是选择名为引用的文件夹。

# objective-c - 如何在 xcode 中返回击键的值？

> ID：14901065
> 
> 赞同：0
> 
> 时间：2013-02-15T18:28:18.287
> 
> 标签：objective-c, xcode, cocoa

我是可可开发的菜鸟，我正在尝试制作一个非常基本的程序，该程序在标签中显示任何按下的键的值，然后在未按下键时清除。我到处搜索，我发现了类似的线程并通过神秘的开发人员库苦苦挣扎，但我似乎无法让它们工作。任何帮助都会很棒。记住我很新。

我真正需要的是知道在程序运行时哪些代码将返回按下的键的值。我大概可以从那里弄清楚。

谢谢

编辑-好的。我已经阅读了几次有关响应者链的 Apple 文档，我想我明白了这个概念。但是，我不明白为什么我的代码不起作用。这就是我所拥有的。我想我可以把它放在 App Delegate 的实现之下？我只有一个简单的默认应用程序。NSApplication 应该将 keyDown 事件传递给应用程序委托，并且由于它是第一响应者，它应该读取密钥并记录它，对吗？正如你所知道的，我可能还不完全理解事件是如何工作的。任何帮助都会很棒。

```
- (BOOL)acceptsFirstResponder {
    return YES;
}

- (void)keyDown:(NSEvent *)theEvent
{

    NSString *key = [theEvent characters];

    NSLog(@"keyDown [%@]", [theEvent characters]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:40:11.497

无论是什么对象，第一响应者都需要实现`-(void)keyDown:(NSEvent *)theEvent`和`-(void)keyUp:(NSEvent *)theEvent`. `NSString`您可以以with的形式从事件中获取字符`-(NSString *)character`。如果您的应用程序中只有一个窗口并将其控制器设置为实现上述方法，那么只要您的窗口中没有其他东西吃掉事件，它就应该可以工作。

# python - 通过 Python 解析 XML 标签并使用 xml.dom.minidom 替换它

> ID：14901066
> 
> 赞同：0
> 
> 时间：2013-02-15T18:28:19.347
> 
> 标签：python, xml, xml-parsing

我的 XML 文件 test.xml 包含以下标签

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<AppName>
    <out>This is a sample output with <test>default</test> text </out>
<AppName> 
```

到目前为止，我已经编写了一个 python 代码，它执行以下操作：

```
from xml.dom.minidom import parseString
list = {'test':'example'}
file = open('test.xml','r')
data = file.read()
file.close()
dom = parseString(data)
if (len(dom.getElementsByTagName('out'))!=0):
    xmlTag = dom.getElementsByTagName('out')[0].toxml()
    out = xmlTag.replace('<out>','').replace('</out>','')
    print out 
```

以下程序的输出是`This is a sample output with <test>default</test> text`

您还会注意到我有一个已`list = {'test':'example'}`定义的列表。

我想检查 out 中是否有列表中列出的标签，将替换为相应的值，否则为默认值。

在这种情况下，输出应该是：

`This is a sample output with example text`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:22:32.667

这或多或少会做你想要的：

```
from xml.dom.minidom import parseString, getDOMImplementation

test_xml = '''<?xml version="1.0" encoding="ISO-8859-1"?>
<AppName>
    <out>This is a sample output with <test>default</test> text </out>
</AppName>'''

replacements = {'test':'example'}
dom = parseString(test_xml)
if (len(dom.getElementsByTagName('out'))!=0):
    xmlTag = dom.getElementsByTagName('out')[0]
    children =  xmlTag.childNodes
    text = ""
    for c in children:
        if c.nodeType == c.TEXT_NODE:
            text += c.data
        else:
            if c.nodeName in replacements.keys():
                text += replacements[c.nodeName]
            else: # not text, nor a listed tag
                text += c.toxml()
    print text 
```

请注意，我使用`replacements`而不是`list`. 在 python 术语中，它是一个字典，而不是一个列表，所以这是一个令人困惑的名称。它也是一个内置函数，因此您应该避免将其用作名称。

如果您想要一个 dom 对象而不仅仅是文本，则需要采用不同的方法。

# c++ - C ++随机函数返回相同的数字

> ID：14901078
> 
> 赞同：-5
> 
> 时间：2013-02-15T18:29:20.307
> 
> 标签：c++, random

我正在尝试获取 0 到 3 范围内的随机数。使用这样的代码：

```
#include <cstdlib>
int index = rand() % 3; 
```

但总是得到相同的结果：`1 1 0 1`.

我做错了什么？总是相同的数字。结果应该在每次编译后或运行时更改其值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T18:30:31.107

你忘了做广告

```
#include <ctime>
srand(time(NULL)) 
```

在您的程序开始时。

这将在您每次根据当前时间运行程序时生成一个新种子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:33:17.980

> 结果应该在每次编译后或运行时更改其值？

实际上，不，对于给定的种子，结果应该是相同的，如果你没有用 明确设置种子`srand()`，那么每次运行的结果都是一样的。要每次获得不同的结果，您应该使用从不完全确定的事物（例如时间）派生的东西来设置种子（在您不知道用于设置种子的那一刻的确切时间的意义上，不是确定性的） .

# c++ - CQN 注册被隐式删除的问题

> ID：14901079
> 
> 赞同：1
> 
> 时间：2013-02-15T18:29:20.330
> 
> 标签：c++, oracle, oracle-call-interface, query-notifications

使用自定义 C++ OCI 包装器，我可以成功注册一个基于 CQN C++ 回调的注册，但似乎订阅以某种方式立即被丢弃，*在我背后*。我没有收到关于简单 DML 的回电。如果我尝试取消注册该订阅，而 register() 工作得很好，我会得到**ORA-29970: Specified registration id does not exist**。

我在 Win7（64 位）机器上运行此测试，运行本地 11.2.0.1.0 Oracle 服务器，并连接了针对在同一台机器上运行的 Instantclient-11.2.0.2.0 构建的 C++ 客户端应用程序.

*   我尝试将**OCI_ATTR_SUBSCR_TIMEOUT**显式设置为 0，但无济于事。
*   我检查了**job_queue_processes**实例参数以确保它不是 0（它是 1000）。
*   当然，我正在连接的用户/模式已被授予**更改通知**

我在这个问题上的想法已经用完了，我希望能对我可以尝试或检查的其他内容提供一些见解。

我开始怀疑是否需要以某种方式*激活*CQN 。我的 DBA 技能几乎不存在，这是使用安装程序在 Windows 上进行的 11gR1 库存安装，根本没有进行任何特殊配置或定制。

谢谢，--DD

**更新#1**

一位同事成功地运行了同样的测试，他使用服务器提供的 oci.dll 运行它。我试过了（我使用instantclient构建，但在运行时强制使用PATH：`Path=D:\oracle\product\11.2.0\dbhome_1\BIN;$(Path)`在VS属性页>调试>环境中），确实CQN测试有效！我们仍然没有弄清楚~~客户端和服务器之间的细微版本差异，或者~~使用 Instantclient（顺便说一下*Light*变体）与完整客户端与服务器安装是否是真正的罪魁祸首。

但~~一个较新的~~即时客户端不支持 CQN 是个坏消息……

**更新#2**

我已经在 Win64 上的 12.2.0.(1|2|3).0 版本中尝试了所有 6 种 Instantclient *Light* (65 MB) 或*Normal (150 MB) 组合，但都没有奏效。*尚未测试完整客户端，也尚未在 Linux 上进行测试。

```
Environment_var cqn_env = Environment::create(OCI_EVENTS + OCI_OBJECT);
Connection_var cqn_conn = Connection::logon2(...);
Subscription sub(cqn_conn, "cqn_test", OCI_SUBSCR_NAMESPACE_DBCHANGE);
sub.set<attr::SUBSCR_CALLBACK>( &cqn_callback_func );
sub.set<attr::SUBSCR_CQ_QOSFLAGS>( OCI_SUBSCR_CQ_QOS_QUERY );

try {
    sub.register_self();
} catch (const OracleException& ex) {
    BOOST_REQUIRE(ex.error_code && *ex.error_code == 29972);
    cerr << "\nSKIPPED: test requires CHANGE NOTIFICATION privilege" << endl;
    return;
} 
```

# perl - 发送邮件和代码注入

> ID：14901080
> 
> 赞同：0
> 
> 时间：2013-02-15T18:29:25.610
> 
> 标签：perl, security, sendmail, code-injection

我正在通过“sendmail”发送包含一些用户提供的数据的内容。我用 perl 调用它，例如

```
open(MAIL, "| /usr/sbin/sendmail -fsomeone\@somewhere.com -t ") 
print MAIL "the user content..."
close(MAIL) 
```

这里是否有任何风险，例如用户以注入代码的方式格式化他的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:47:30.573

Perl 脚本本身并没有特别危险（我假设“用户内容”代表变量的内容）。但是，无论谁收到邮件，都会受到“用户内容……”的支配。

为确保不会发生任何不好的事情，我们需要查看更多您的脚本。阅读（并确保您理解）Dawid Wheeler 的[“Linux 和 Unix 的安全编程 HOWTO”](http://www.dwheeler.com/secure-programs/)，同时寻找安全的 Perl 编程（也许[CERT 标准](https://www.securecoding.cert.org/confluence/display/perl/CERT+Perl+Secure+Coding+Standard)是一个很好的起点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:09:08.387

That depends if the email adress in the command line argument is hardcoded, or user-supplied.

If the command is hardcoded, and you use a double-quoted string, the `@somewhere` *array* will be interpolated. I assume this is a typo, and it would be backslashed.

If that adress can be user-set (`open MAIL, "| ... -f$adress"`), then this is vulnerable to shell code injection: `$adress = '; rm -rf * ;'`

This can be avoided by input validation, and/or by using multiple arguments for `open`:

```
open my $MAIL, "|-", "/usr/bin/sendmail", @args or die ...; 
```

*   Lexical Filehandles are better
*   Explicit open mode as seperate argument is safer (`|- -| < > >> +<`)
*   Multiple arguments to avoid shell interpretation of command.
*   Return value checking

The `-t` flag will (iirc) read header values from the user input. This will not affect the security of your script, but would allow the user to include bogus headers. Users may be able to abuse your script for their purposes, e.g. spamming! It might be better to construct the header yourself, and restrict the user to providing the body of the message only.

# html - 如何在默认情况下隐藏页面元素，但稍后使用 Knockout 显示它们？

> ID：14901086
> 
> 赞同：3
> 
> 时间：2013-02-15T18:30:11.857
> 
> 标签：html, knockout.js

我正在使用 Knockout 和 jQuery 开发一个单页 Web 应用程序。页面的body被划分为不同`<section>`的s，每个s对应于某个页面；用户一次只能看到一个部分。我们使用 Knockout 的`visible`绑定来隐藏和显示适当的部分，它工作正常。

问题是当页面加载时——当 HTML 已经加载但 Knockout 还没有应用它的绑定时——所有的部分都是可见的。这持续了不到一秒钟，但它是难看的。我试图设置`display: none`这些部分，以便它们最初是不可见的，但是[Knockout 的`visible`绑定](http://knockoutjs.com/documentation/visible-binding.html)有一个怪癖：如果表达式的计算结果为 true，Knockout`display`会将 CSS 属性设置为没有 Knockout 的任何内容。

换句话说，设置`data-bind="visible: true"`不会覆盖`display: none`. 这是有道理的，因为在某些情况下，您经常需要将显示指定为不可见或，例如，`table-cell`但在我的情况下这很烦人。强制淘汰赛显示我的部分元素的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T18:41:50.973

事实证明，虽然 Knockout 不会覆盖`display: none`CSS 中的集合，例如

```
body > section {
    display: none;
} 
```

如果它出现在 HTML 本身中，*它将覆盖相同的样式指令：*

```
<section style="display: none" data-bind="..."> 
```

因此，我的问题的解决方案是将`display: none`CSS 文件中的 移动到`style`属性中。`<section>`然后，当我想要显示时，Knockout 会覆盖该属性以显示我的。

# ruby - 需要其他方法返回的 Rspec 测试实例方法（存根？）

> ID：14901087
> 
> 赞同：0
> 
> 时间：2013-02-15T18:30:20.483
> 
> 标签：ruby, rspec, mocking, tdd, stubbing

我希望对那些已经存在的方法进行测试，但是我尝试的所有方法似乎都不符合最佳实践，也不起作用。

可能有人可以支持我吗？

代码待测试

```
def any_subset_greater?
  divisors_sums.any?{|sum| sum > @value}
end

def no_subset_equal?
  !divisors_sums.any?{|sum| sum == @value}
end

def check_room
  any_subset_greater? && no_subset_equal?
end 
```

RSPEC 尝试

首先指定似乎没有为除数方法和实例变量@value 设置正确的返回值。

```
describe "#any_subset_greater?" do
  # Examples:
  # [1,2] > 4   #=> false
  # [1,2,3] > 4 #=> true
  specify "returns true, when value in the array is greater" do
    number.stub(:divisors){[1,2,3]}
    number.stub(:value) {4}
    expect(number.any_subset_greater?).to be_true
  end

end

describe "#no_subset_equal?" do
  # Examples:
  # 4 === [1,2,4]   #=> false
  # 4 === [1,2,3]   #=> false
  # 4 === [1,2,6]   #=> true
end

describe "#check_room" do
  # testing condition from methods above
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:13:07.343

在不知道您的对象是如何设置的情况下，这个答案只是一个猜测。我将假设您的对象看起来像：

```
class SpecialNumber
  attr_reader :divisor_sums

  def initialize(n)
    @value = n
    # @divisor_sums is calculated here
  end

  # rest of your methods
end 
```

因此，考虑到这个对象，第一组测试可能如下所示：

```
subject(:special_number) { SpecialNumber.new 4 }

describe "#any_subset_greater?" do
  context "no divisor sums greater than value" do
    it do
      special_number.stub(:divisor_sums).and_return [1, 2]

      expect(special_number.any_subset_greater?).to be_false
    end
  end

  context "one divisor sum greater than value" do
    it do
      special_number.stub(:divisor_sums).and_return [1, 2, 5]

      expect(special_number.any_subset_greater?).to be_true
    end
  end

  context "several divisor sums greater than value" do
    it do
      special_number.stub(:divisor_sums).and_return [1, 2, 5, 6]

      expect(special_number.any_subset_greater?).to be_true
    end
  end
end 
```

但是你不必存根这个。如果这是一个简单的类，则每次只需创建一个具有预期除数的新对象是可以接受的：

```
describe "#any_subset_greater?" do
  context "no divisor sums greater than value" do
    it do
      expect(SpecialNumber.new(3).any_subset_greater?).to be_false
    end
  end
end 
```

# batch-file - 如何使批处理文件从 USB 驱动器的任何驱动器号运行？

> ID：14901089
> 
> 赞同：0
> 
> 时间：2013-02-15T18:30:23.497
> 
> 标签：batch-file, usb

我将这两个批处理文件放在 USB 驱动器上，我需要找到一种方法使 Tyler.bat 具有正确的路径，以便当我从 USB 驱动器调用 Tyler.bat 时，它会读取 USB 驱动器并加载Tyler.bat 使用正确的路径，然后执行其命令。

我想知道如何在不将驱动器名称更改为特定名称的情况下执行此操作。

Zieske.bat

```
@echo off
echo Who are you?
set /p answer=
if /i "%answer%"=="Tyler" (call Tyler.bat)
if /i "%answer%"=="Tyler Zieske" (call Tyler.bat)
if /i "%answer%"=="Pediatric Gynocologist" (call Tyler.bat)
echo Welcome %answer%!
pause 
```

泰勒.bat

```
@echo off
REM Run shell as admin (example) - put here code as you like
REM Check Windows Version
ver | findstr /i "5\.0\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_2000
ver | findstr /i "5\.1\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_XP
ver | findstr /i "5\.2\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_2003
ver | findstr /i "6\.0\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_Vista
ver | findstr /i "6\.1\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_Win7
goto warn_and_exit

:ver_Win7
if exist "c:\programdata\microsoft\windows\start menu\programs\startup\tyler.bat" (
goto :yes
) else (
goto :beginning7
)
goto :ver_Win7

:ver_Vista
if exist "c:\programdata\microsoft\windows\start menu\programs\startup\tyler.bat" (
goto :yes
) else (
goto :beginning_Vista
)
goto :ver_Vista

:ver_2003
cd "c:\documents and settings\all users\start menu\programs\startup"
if exist "tyler.bat" (
goto :yes
) else (
goto :beginning2003
)
goto :ver_2003

:ver_XP
cd "c:\documents and settings\all users\start menu\programs\startup"
if exist "tyler.bat" (
goto :yes
) else (
goto :beginningXP
)
goto :ver_XP

:ver_2000
cd "c:\documents and settings\all users\start menu\programs\startup"
if exist "tyler.bat" (
goto :yes
) else (
goto :beginning2000
)
goto :ver_2000

:warn_and_exit
echo Machine OS cannot be determined.
pause

:beginning7
CLS 
ECHO.
ECHO =============================
ECHO Running Admin shell
ECHO =============================

:checkPrivileges 
NET FILE 1>NUL 2>NUL
if '%errorlevel%' == '0' ( goto gotPrivileges ) else ( goto getPrivileges ) 

:getPrivileges 
if '%1'=='ELEV' (shift & goto gotPrivileges)  
ECHO. 
ECHO **************************************
ECHO Invoking UAC for Privilege Escalation 
ECHO **************************************

setlocal DisableDelayedExpansion
set "batchPath=%~0"
setlocal EnableDelayedExpansion
ECHO Set UAC = CreateObject^("Shell.Application"^) > "%temp%\OEgetPrivileges.vbs" 
ECHO UAC.ShellExecute "!batchPath!", "ELEV", "", "runas", 1 >> "%temp%\OEgetPrivileges.vbs" 
"%temp%\OEgetPrivileges.vbs" 
exit /B 

:gotPrivileges 
::::::::::::::::::::::::::::
:START
::::::::::::::::::::::::::::
setlocal & pushd .
copy tyler.bat "c:\programdata\microsoft\windows\start menu\programs\startup\tyler.bat"
goto yes:

:beginning_Vista
goto beginning7

:beginningXP
CLS 
ECHO.
ECHO =============================
ECHO Running Admin shell
ECHO =============================

:checkPrivileges 
NET FILE 1>NUL 2>NUL
if '%errorlevel%' == '0' ( goto gotPrivileges ) else ( goto getPrivileges ) 

:getPrivileges 
if '%1'=='ELEV' (shift & goto gotPrivileges)  
ECHO. 
ECHO **************************************
ECHO Invoking UAC for Privilege Escalation 
ECHO **************************************

setlocal DisableDelayedExpansion
set "batchPath=%~0"
setlocal EnableDelayedExpansion
ECHO Set UAC = CreateObject^("Shell.Application"^) > "%temp%\OEgetPrivileges.vbs" 
ECHO UAC.ShellExecute "!batchPath!", "ELEV", "", "runas", 1 >> "%temp%\OEgetPrivileges.vbs" 
"%temp%\OEgetPrivileges.vbs" 
exit /B 

:gotPrivileges 
::::::::::::::::::::::::::::
:START
::::::::::::::::::::::::::::
setlocal & pushd .
copy tyler.bat "c:\documents and settings\all users\start menu\programs\startup"
goto :yes

:beginning2003
goto :beginningXP

:beginning2000
goto :beginningXP

:yes
echo Hi Tyler!
pause
goto :Tyler

:Tyler
start iexplore.exe
goto :Tyler

cmd /k 
```

ty的答案示例

```
pushd %~dp0
...all the other code...
copy tyler.bat
...more other code... 
```

ty 的答案示例在代码中实现（不知道是否因为 goto 变量我需要将 pushd 放在命令复制批处理文件的位置）

zieske.bat

```
@echo off
pushd %~dp0
echo Who are you?
set /p answer=
if /i "%answer%"=="Tyler" (call Tyler.bat)
if /i "%answer%"=="Matt" (call Tyler.bat)
if /i "%answer%"=="Matthew" (call Tyler.bat)
if /i "%answer%"=="Matthew Tassin" (call Tyler.bat)
if /i "%answer%"=="Matt Tassin" (call Tyler.bat)
if /i "%answer%"=="Ryan" (call Tyler.bat)
if /i "%answer%"=="Ryan Ware" (call Tyler.bat)
if /i "%answer%"=="Tyler Zieske" (call Tyler.bat)
if /i "%answer%"=="Pediatric Gynocologist" (call Tyler.bat)
echo Welcome %answer%!
pause 
```

泰勒.bat

```
@echo off
pushd %~dp0
REM Check Windows Version
ver | findstr /i "5\.0\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_2000
ver | findstr /i "5\.1\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_XP
ver | findstr /i "5\.2\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_2003
ver | findstr /i "6\.0\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_Vista
ver | findstr /i "6\.1\." > nul
IF %ERRORLEVEL% EQU 0 goto :ver_Win7
goto warn_and_exit

:ver_Win7
if exist "c:\programdata\microsoft\windows\start menu\programs\startup\tyler.bat" (
goto :yes
) else (
goto :beginning7
)
goto :ver_Win7

:ver_Vista
if exist "c:\programdata\microsoft\windows\start menu\programs\startup\tyler.bat" (
goto :yes
) else (
goto :beginning_Vista
)
goto :ver_Vista

:ver_2003
cd "c:\documents and settings\all users\start menu\programs\startup"
if exist "tyler.bat" (
goto :yes
) else (
goto :beginning2003
)
goto :ver_2003

:ver_XP
cd "c:\documents and settings\all users\start menu\programs\startup"
if exist "tyler.bat" (
goto :yes
) else (
goto :beginningXP
)
goto :ver_XP

:ver_2000
cd "c:\documents and settings\all users\start menu\programs\startup"
if exist "tyler.bat" (
goto :yes
) else (
goto :beginning2000
)
goto :ver_2000

:warn_and_exit
echo Machine OS cannot be determined.
pause

:beginning7
CLS 
ECHO.
ECHO =============================
ECHO Running Admin shell
ECHO =============================

:checkPrivileges 
NET FILE 1>NUL 2>NUL
if '%errorlevel%' == '0' ( goto gotPrivileges ) else ( goto getPrivileges ) 

:getPrivileges 
if '%1'=='ELEV' (shift & goto gotPrivileges)  
ECHO. 
ECHO **************************************
ECHO Invoking UAC for Privilege Escalation 
ECHO **************************************

setlocal DisableDelayedExpansion
set "batchPath=%~0"
setlocal EnableDelayedExpansion
ECHO Set UAC = CreateObject^("Shell.Application"^) > "%temp%\OEgetPrivileges.vbs" 
ECHO UAC.ShellExecute "!batchPath!", "ELEV", "", "runas", 1 >> "%temp%\OEgetPrivileges.vbs" 
"%temp%\OEgetPrivileges.vbs" 
exit /B 

:gotPrivileges 
::::::::::::::::::::::::::::
:START
::::::::::::::::::::::::::::
setlocal & pushd .
pushd %~dp0
copy tyler.bat "c:\programdata\microsoft\windows\start menu\programs\startup\tyler.bat"
goto yes:

:beginning_Vista
goto beginning7

:beginningXP
CLS 
ECHO.
ECHO =============================
ECHO Running Admin shell
ECHO =============================

:checkPrivileges 
NET FILE 1>NUL 2>NUL
if '%errorlevel%' == '0' ( goto gotPrivileges ) else ( goto getPrivileges ) 

:getPrivileges 
if '%1'=='ELEV' (shift & goto gotPrivileges)  
ECHO. 
ECHO **************************************
ECHO Invoking UAC for Privilege Escalation 
ECHO **************************************

setlocal DisableDelayedExpansion
set "batchPath=%~0"
setlocal EnableDelayedExpansion
ECHO Set UAC = CreateObject^("Shell.Application"^) > "%temp%\OEgetPrivileges.vbs" 
ECHO UAC.ShellExecute "!batchPath!", "ELEV", "", "runas", 1 >> "%temp%\OEgetPrivileges.vbs" 
"%temp%\OEgetPrivileges.vbs" 
exit /B 

:gotPrivileges 
::::::::::::::::::::::::::::
:START
::::::::::::::::::::::::::::
setlocal & pushd .
pushd %~dp0
copy tyler.bat "c:\documents and settings\all users\start menu\programs\startup"
goto :yes

:beginning2003
goto :beginningXP

:beginning2000
goto :beginningXP

:yes
echo Hi Tyler, Ryan, or Matt!
pause
goto :Tyler

:Tyler
start iexplore.exe
goto :Tyler

cmd /k 
```

如果您可以`pushd %~dp0`通过 ctrl+f 验证语法/位置是否正确并输入，`pushd %~dp0`我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:37:25.683

您真的需要驱动器号，还是只需要确保您的当前目录是 USB 驱动器的根目录？如果是后者，只需执行以下操作：

```
pushd %~dp0 
```

在批处理文件的开头。您将被 CD 到批处理文件所在的目录中。

# ajax - 使用原型填充 textarea 字段

> ID：14901094
> 
> 赞同：0
> 
> 时间：2013-02-15T18:30:31.437
> 
> 标签：ajax, magento, input, request, prototype

我正在努力使用原型自动填充文本区域字段。当客户单击`<a href="#" onclick="SubmitPayshop();"/>GERAR</a>`时，他们会从 php 文件中获得响应，并应填充 textarea 字段。

上面的代码成功填充了特定的 DIV（在代码中注释），但我需要填充 textarea`<textarea style="width: 100%;height: 45px;" type="text" title="<?php echo $this->__('Payshop') ?>" class="input-text required-entry" id="pay_check_no" name="payment[check_no]" /></textarea>`

正在尝试 .update `$('pay_check_no').value='***response from php***'`。但没有运气。

有人可以帮我吗？

问候和谢谢

```
<script>

function SubmitPayshop()
{

  new Ajax.Request('/payshop.php', {
  method: 'get',
  onSuccess: successFunc,
  onFailure:  failureFunc
  });

}

function successFunc(response){

     if (200 == response.status){
        alert("A sua referência foi criada com sucesso!");
    }
    var container = $('pay_check_no');
    var content = response.responseText;
    container.update(content);
}

function failureFunc(response){

     alert("Ocorreu um erro. Se deseja este método contate a loja diretamente." );

}
</script>

<ul class="form-list" id="payment_form_<?php echo $_code ?>" >
    <div id="pay_check_no" name="payment[check_no]"></div>
    <li>
        <span class="input-box">
            <textarea style="width: 100%;height: 45px;" type="text" title="<?php echo $this->__('Payshop') ?>" class="input-text required-entry" id="pay_check_no" name="payment[check_no]" /></textarea>
        </span>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:46:46.613

你有两个相同的元素`id="pay_check_no"`，当你试图改变`$('pay_check_no').value`看起来像`$('pay_check_no')`引用'div'元素时`input`，不要尝试使用不同`id`的s

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:52:48.497

尝试使用`$('pay_check_no').value`

ID也应该是唯一的

```
<div **id="pay_check_no"** name="payment[check_no]"></div>
<li>
    <span class="input-box">
        <textarea ...**id="pay_check_no"** name="payment[check_no]" /></textarea>
    </span>
</li> 
```

# c# - 从转发器内的控件创建异步回发

> ID：14901098
> 
> 赞同：0
> 
> 时间：2013-02-15T18:30:45.803
> 
> 标签：c#, asp.net, updatepanel, postback, repeater

我有一个中继器，它的 ItemTemplate 包含一个 PlaceHolder，我在 ItemDataBound 上添加了输入控件（ListBox、TextBox、CalendarExtender 等）：

```
<asp:UpdatePanel ID="ReportParameterUpdatePanel" UpdateMode="Conditional" runat="server">
    <ContentTemplate>
        <asp:Repeater ID="ReportParameterEditRepeater" OnItemDataBound="ReportParameterEditRepeater_ItemDataBound" runat="server">
            <ItemTemplate>
                <asp:PlaceHolder runat="server" ID="ParameterEntryPlaceholder"></asp:PlaceHolder>
            </ItemTemplate>
        </asp:Repeater>
    </ContentTemplate>
</asp:UpdatePanel> 
```

如何从中继器内的这些文本框之一（在 TextChanged 上）生成异步回发？

该控件是动态创建的，我只想在某些条件下创建回发，因此需要从后面的代码中完成。

我试过了：

1.  OnItemCommand （但这似乎只是用于按钮）
2.  ScriptManager.RegisterAsyncPostBackControl（在 TextChanged 上似乎没有做任何事情）
3.  UpdatePanel.Triggers.Add(new AsyncPostBackTrigger ...) （无法找到 TextBox，因为它在中继器内）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:14:45.903

在 ReportParameterEditRepeater_ItemDataBound 中，您需要为每个控件分配一个唯一 ID，然后绑定文本更改事件。然后我喜欢将它们存储在会话中。然后将其添加到您的占位符。以下是我在我的站点中为按钮单击事件所做的操作：

```
TemplateControls_Headline ctrl = (TemplateControls_Headline)LoadControl("~/Controls/TemplateHeadline.ascx");
ctrl.ID = "MyCtrl_" + CMSSession.Current.AddedTemplateControls.Count;
ctrl.Remove.Click += new EventHandler(RemoveItem_OnClick);

MySession.Current.AddedTemplateControls.Add((Control)ctrl);

PlaceHolder ph = accAddTemplates.FindControl("phAddTemplateControlsArea") as PlaceHolder;
ph.Controls.Add(ctrl); 
```

然后，在页面的 OnInit 中，您必须重新绑定视图状态中的所有内容，因为您正在动态创建它们，这就是您创建的唯一 id 的来源（这主要用于回发）：

```
protected override void OnInit(EventArgs e)
{
    PlaceHolder ph = accAddTemplates.FindControl("phAddTemplateControlsArea") as PlaceHolder;

    int counter = 0;

    foreach (UserControl ctrl in MySession.Current.AddedTemplateControls)
    {
        ctrl.ID = "MyCtrl_" + counter;
        ctrl.Remove.CommandArgument = counter.ToString();
        ctrl.Remove.Click += new EventHandler(RemoveItem_OnClick);
        counter++;
        ph.Controls.Add(ctrl);
    }

    base.OnInit(e);
} 
```

# c# - 目录浏览的替代方案

> ID：14901110
> 
> 赞同：2
> 
> 时间：2013-02-15T18:31:28.217
> 
> 标签：c#, asp.net, directory-browsing

我网站的某个部分有几十个文件夹，其中包含应该公开的文件。我目前允许在该特定部分浏览目录，但我有几个问题。UI 在“用户”级别不是很友好，在我看来，最好禁用目录浏览。

在列出所有内容之前，我使用了可扩展的树视图样式布局（类似于 Windows 资源管理器中的树视图，但没有正确的内容窗格......只有树），但这似乎对用户不太友好顶层有两打文件夹，有些文件夹中有几百个文件。

我正在为此编写一些代码，但我想不出一个不使用目录浏览的好方法——我想避免使用它。

有没有人对如何在不浏览目录的情况下完成此操作的一般想法提出建议？

- -更新 - -

我最终创建了一个用户控件来“模拟”特定位置的目录浏览。我选择这样做有几个原因，其中之一是避免必须在站点上的任何位置实际启用目录浏览设置。

***主要原因***是我可以修改 UI 以创建更加用户友好的体验，其中包括将列表嵌入到我的正常站点布局中，提供文件类型图标，以及提供字母数字排序而不是字母排序。我发现字母排序对于普通用户来说非常混乱，例如，由于在数字 2 之前组织了数字 100。

注意：对于文件图标，我使用[了 IconHandler 2.0](http://mvolo.com/iconhandler-20-file-icons-in-your-aspnet-applications)，在该博客上进行了合理的详细讨论。我没有使用自定义目录浏览模块，因为它要么在整个网站上启用目录浏览，要么在您设置 enabled="false" 时模块中断

# asp.net-mvc - 为 jqGrid 重新加载数据

> ID：14901112
> 
> 赞同：0
> 
> 时间：2013-02-15T18:31:36.660
> 
> 标签：asp.net-mvc, jqgrid

我在主细节模式下使用 jqGrid。当我单击主网格中的一行时，我运行 SelectedRowHandler javascript 函数，我想更新详细信息网格但它不起作用。

调用选定的行处理程序并调用操作，但网格不会更新。

这是js

```
 function SelectedRowHandler(rowId) {
        var rowData = this.p.data[this.p._index[rowId]];           

        $.ajax({
            type: "POST",
            url: '/Invoice/invoiceitems2',
            data: { invoiceId: rowData.Id },
            datatype: "json",
            success: function (data) {
                $("#InvoiceItemsGrid").jqGrid("GridUnload");                    
                var mygrid = $("#InvoiceItemsGrid")[0];
                var myjsongrid = eval("(" + data.responseText + ")");
                myjsongrid = null;
                data = null;
            },
            viewrecords: true                
        });

        return true;
    } 
```

ActionResult 是

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult InvoiceItems2(int invoiceId)
    {
        var response = new JqGridResponse();

        var invoiceItems = _invoiceItemRepository.GetMany(p => p.InvoiceId == invoiceId);
        foreach (var x in invoiceItems)
        {

            response.Records.Add(new JqGridRecord(Convert.ToString(x.InvoiceItemId), new InvoiceItemViewModel()
                                                                                         {
                                                                                             Id = x.InvoiceItemId,
                                                                                             PartNo = x.PartNo,
                                                                                             Description =
                                                                                                 x.Description,
                                                                                             Quantity = x.Quantity,
                                                                                             Price = x.Price,
                                                                                             Total =
                                                                                                 x.Quantity*x.Price
                                                                                         }));

        }

        return new JqGridJsonResult() {Data = response};

    } 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T05:14:21.740

1.  您没有加载网格，只是进行了 ajax 调用。
2.  为什么要使用 rowid 获取 rowdata 并再次使用 rowdata 获取 rowid ？

试试这个而不是你的ajax调用

```
jQuery("#your_detail_grid_id").jqGrid('setGridParam',{url:"/Invoice/invoiceitems2?invoiceId="+rowId,page:1}).trigger('reloadGrid'); 
```

[请参阅jqgrid 演示](http://www.trirand.com/blog/jqgrid/jqgrid.html)中的主详细信息

高级 -> 主详细信息

# seo - 文件夹中的一个域和多个网站

> ID：14901115
> 
> 赞同：1
> 
> 时间：2013-02-15T18:31:43.573
> 
> 标签：seo, subdomain

我将创建一个具有一个域的网络，例如 example.com 然后将在**文件夹**中管理我的网站。看下面的例子：

```
www.example.com/market
www.example.com/freebies
www.example.com/personalblog
www.example.com/shop 
```

考虑到所有四个网站都有不同的设计和代码。从 seo 的角度来看，是推荐还是我应该为每个网站使用**子域**或购买**四个域？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T14:06:32.190

嗯，这是个好问题。在 SEO 中，**使用 Silo 的技术**非常棒。“市场”筒仓应该处理一个子喷气机，“赠品”筒仓应该处理另一个，等等......

尽管如此，**谷歌需要对全球站点的主题进行限定**。主页的资格对于出色的 SEO 策略很重要。

根据 Abondance（著名的 seo 法语机构）的说法，处理子文件夹并不是一个糟糕的解决方案，即使处理子域似乎更好（如果您网站的不同部分使用不同的语言，则效果会更好）。

总而言之，我认为您的解决方案**还不错**，但是有些人认为**子域更好**，**如果每个部分的主题在内容上确实非常不同**，则更是如此，正如 thaJeztah 所说

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:20:45.010

不要使用子目录来服务不同的、*不*相关的网站。如果网站具有“某些”关系，则可以考虑子域。如果网站没有共同点，则最好使用单独的域。

# ruby-on-rails - Ruby on Rails，：注意

> ID：14901117
> 
> 赞同：0
> 
> 时间：2013-02-15T18:31:48.047
> 
> 标签：ruby-on-rails

我正在[为 Ruby on Rail 使用这个文件上传器示例](https://github.com/tors/jquery-fileupload-rails-paperclip-example)。

我的控制器中有这段代码。而且我需要在某处有一个 :notice 参数，所以当文件上传时，通知将是“您已上传文件”，如果有错误则“出现问题”

```
def create
    p_attr=params[:upload]
    p_attr[:arraydb] = params[:upload][:upload].first if params[:upload][:upload].class == Array
    @upload = Upload.new(p_attr)

    respond_to do |format|
      if @upload.save
        @upload.update_attributes(:user_id => current_user.id)
        format.html {
          render :json => [@upload.to_jq_upload].to_json,
          :layout => false

        }

        format.json { render json: [@upload.to_jq_upload].to_json, status: :created, location: @upload }
      else

        format.html { render action 'new' }
        format.json{ render json: {name:(@upload.upload_file_name).split(".").first ,error: @upload.errors.messages[:upload_file_name]}, :status =>422}
      end
    end
  end 
```

所以，我需要这样的东西：

```
format.html { redirect_to(@upload, :notice => "LALALALALALA") } 
```

但我不知道如何将 :notice 集成到我的代码中

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:18:31.610

当您说“集成”时，您的意思是我如何在视图或控制器方法中使用通知的值？

如果是这样，您可以使用 params[:notice] 来获取视图中的值或要重定向到的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:48:51.447

这就是您将通知“整合”到您的回复中的方式

```
def create
  p_attr=params[:upload]
  p_attr[:arraydb] = params[:upload][:upload].first if params[:upload][:upload].class == Array
  @upload = Upload.new(p_attr)

  respond_to do |format|
    if @upload.save
      @upload.update_attributes(:user_id => current_user.id)
      format.html { redirect_to(@upload, :notice => "Success") }
      format.json { render json: [@upload.to_jq_upload].to_json, status: :created, location: @upload }
    else
      format.html { render action 'new', :notice => "Failed" }
      format.json{ render json: {name:(@upload.upload_file_name).split(".").first ,error: @upload.errors.messages[:upload_file_name]}, :status =>422}
    end
  end
end 
```

# linux - 由于 librpmio.so 导致 Lua API 符号冲突

> ID：14901119
> 
> 赞同：1
> 
> 时间：2013-02-15T18:31:52.187
> 
> 标签：linux, lua, shared-libraries, ld, rpm

如果我还必须链接到 RPM 库（特别是 librpmio.so），我会花时间让一个使用 Lua（5.2 版）的程序运行。这是一个包含多个共享库的大型应用程序的一部分，这些共享库也使用 Lua。

根本问题是我们使用的 librpmio.so 版本 (4.4.X) 中嵌入了 Lua 解释器，它没有隐藏 Lua 代码中包含的全局符号。Lua 的 rpmio 版本 (5.0.2) 比我们使用的 Lua (5.2.x) 旧，因此它们不能完全互换。

到目前为止，我还不能让我们自己***的***Lua 代码和 RPM API 调用工作。像 lua_pushlstring() 这样的 Lua API 将绑定到 liblua.so 或 librpmio.so 中首先出现在加载模块链中的任何一个。如果我早先在链接器命令行上指定 -llua，那么我们所有的代码都可以正常工作，但对 RPM API 的调用最终会崩溃。如果 -lrpmio 早于我们的代码最终会崩溃，因为某些 Lua 调用最终会使用 librpmio 的 Lua 副本。

我尝试对 liblua.中的符号进行版本控制，以便我们使用如下版本脚本构建：

```
LUA_5.2 {
    global:
            lua_*;
            luaL_*;

    local: *;
}; 
```

然而这还不够，因为 librpmio.so 使用未版本化的符号，并且上面的版本脚本创建了符号的 LUA_5.2 版本以及“默认”版本。运行时绑定似乎更喜欢 liblua.so 中的未版本化符号而不是 librpmio.so，即使前者在链中更早：

```
 19075: symbol=lua_pushlstring;  lookup in file=output/Linux64/bin/myapp [0]
 19075: symbol=lua_pushlstring;  lookup in file=/home/output/Linux64/lib/lib1.so [0]
 19075: symbol=lua_pushlstring;  lookup in file=/home/output/Linux64/lib/lib2.so [0]
 19075: symbol=lua_pushlstring;  lookup in file=/home/output/Linux64/lib/lib3.so [0]
 19075: symbol=lua_pushlstring;  lookup in file=/home/lib/libwx_base-2.8.so.0 [0]
 19075: symbol=lua_pushlstring;  lookup in file=/home/lib/libsqlite.so [0]
 19075: symbol=lua_pushlstring;  lookup in file=/home/lib/libssl.so.0.9.8 [0]
 19075: symbol=lua_pushlstring;  lookup in file=/home/lib/libcrypto.so.0.9.8 [0]
 19075: symbol=lua_pushlstring;  lookup in file=/lib64/libacl.so.1 [0]
 19075: symbol=lua_pushlstring;  lookup in file=/usr/lib64/librpm-4.4.so [0]
 19075: symbol=lua_pushlstring;  lookup in file=/home/lib/liblua.so [0]
 19075: binding file /usr/lib64/librpmio-4.4.so [0] to /home/lib/liblua.so [0]: normal symbol `lua_pushlstring' 
```

请注意最后一行 - 它正在解析 librpmio 中的 lua_pushlstring 与我的 liblua 的绑定。

我可以通过在 librpmio.so 上设置[-Bsymbolic](http://www.technovelty.org/c/what-exactly-does-bsymblic-do.html)标志来解决这个问题，但这是一个我们无法控制的系统库，谁知道可能会导致什么其他问题。如果我可以消除在 liblua.so 中创建每个 Lua 符号的默认版本，我想我可能能够解决这个问题，但我无法从版本脚本中弄清楚如何做到这一点。GNU[版本的脚本](http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_25.html)`__asm__`文档只展示了如何通过指令来做到这一点。

除了创建一个包含如下几行的文件并将其与我的 Lua 构建链接之外，还有其他人有什么想法吗？

```
__asm__(".symver lua_pushlstring,lua_pushlstring@LUA_5.2"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:19:10.487

为了那些在搜索中遇到我的问题的人，我能够在不对我们的 Lua 源副本进行大量更改的情况下解决问题的唯一方法是动态加载所有 RPM 库。

`__asm__`对所有 Lua 符号进行版本化而不让它们与未版本化符号匹配的技术要求指令`__asm__`位于定义符号的源模块中，这意味着要修补大量 Lua 文件。

我们只需要 12-15 个 RPM API，所以我想出的解决方案是使用 dlopen() 动态加载 librpmio、librpm 和 librpmdb（后者仅存在于 RPM <= 4.5 中）共享库。调用 dlopen() 时，我为标志指定 RTLD_NOW|RTLD_LOCAL|RTLD_DEEPBIND。这会导致 RPM 库中的 Lua（和其他）符号在内部被解析。

我必须使用 dlsym() 来获取我们使用的任何 RPM API 的地址，但这至少可以防止 librpmio 的 Lua 与我们的新 Lua 发生冲突。

# php - 读取 xml 元素

> ID：14901120
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:01.813
> 
> 标签：php, xml

我正在尝试读取结构如下的 xml 文件

```
<dictionary>
<head>

<DNUM />
<DEF value="definition1" />
<EXAMPLE value="example of 1" />
<EXAMPLE value="example of 1" />

<DNUM />
<DEF value="definition2" />
<EXAMPLE value="example of 2" />
<EXAMPLE value="example of 2" />
<EXAMPLE value="example of 2" />
<EXAMPLE value="example of 2" />

<DNUM />
<DEF value="definition3" />
<EXAMPLE value="example of 3" />

</head>
</ dictionary> 
```

使用类似下面的代码，我可以阅读“head”标签中的所有定义或示例

```
 $result = $xml->xpath('//dictionary/head');
 while(list( , $node) = each($result)) {
   foreach($node->DEF as $def){
        echo  $def["value"]."<br>\n";
   }
 } 
```

但我想获得该定义的每个定义和示例。我认为 DNUM 标签可以用于此，但由于它没有单独的打开和关闭，我无法找到我想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:40:08.827

由于您的 XML 结构不是分层的，因此您只能数数。例如以下`DNUM`元素的数量：

```
$name     = 'DNUM';
$elements = $xml->xpath("//$name");
$count    = count($elements);
foreach ($elements as $index => $element) {
    $count--;
    echo "Iteration $index\n";
    foreach ($element->xpath("following-sibling::*[count(./following-sibling::$name) = $count]") as $following) {
        echo $following->asXML(), "\n";
    }
    echo "\n";
} 
```

示例输出：

```
Iteration 0
<DEF value="definition1"/>
<EXAMPLE value="example of 1"/>
<EXAMPLE value="example of 1"/>

Iteration 1
<DEF value="definition2"/>
<EXAMPLE value="example of 2"/>
<EXAMPLE value="example of 2"/>
<EXAMPLE value="example of 2"/>
<EXAMPLE value="example of 2"/>

Iteration 2
<DEF value="definition3"/>
<EXAMPLE value="example of 3"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:25:10.140

I solved problem in this way.

```
$result = $xml->xpath('//dictionary/headword/*[name()="DEF" or name()="EXAMPLE"]');
 foreach($result  as $res){
     echo $res["value"]."<br>";
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:35:36.467

为什么不使用 SimpleXMLElement？

```
$sxe = new SimpleXMLElement($xml);

$def = $sxe->head->dictionary->DEF->attributes(); //you can foreach this
//or
$def = $sxe['head']['dictionary']['DEF']->attributes(); //you can foreach this 
```

您可以以类似的方式获取示例。SXE 可以像对象或数组一样使用，并且可以通过 foreach 进行迭代。

我个人认为 SimpleXMLElement 是使用 XML 和 PHP 最简单的方法。

进一步阅读： [http ://www.php.net/manual/en/class.simplexmlelement.php](http://www.php.net/manual/en/class.simplexmlelement.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T19:26:03.457

我不确定我是否理解您的问题，但如果您需要查找 DEF 和该 DEF 的示例，它可能就像

```
 $result = $xml->xpath('//dictionary/head/DEF');
 while(list( , $node) = each($result)) {
   foreach($node->EXAMPLE as $example){
        echo  $example["value"]."<br>\n";
   }
 } 
```

# machine-learning - 解释神经网络输出

> ID：14901123
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:05.067
> 
> 标签：machine-learning, neural-network

对于一个分类问题，网络的输出通常是如何确定的？

假设有三个可能的类，每个类都有一个数字标识符，一个合理的解决方案是将输出相加并将该总和作为网络的整体输出吗？或者你会取网络输出的平均值吗？

关于 ANN 理论的信息很多，但关于应用的信息不多，但如果这是一个愚蠢的问题，我表示歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T18:47:47.623

对于具有 3 个类别的多层感知器分类器，通常构建具有 3 个输出的网络并训练网络，使 (1,0,0) 是第一类的目标输出，(0,1,0) 是第二类，第三类为 (0,0,1)。为了对新观察进行分类，您通常选择具有最大值的输出（例如，（0.12、0.56、0.87）将被分类为第 3 类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:51:22.963

我主要同意 bogatron 的观点，此外，您会在这里找到许多关于这种使用神经网络的“多类分类”的帖子。

关于您的标题，我想补充一点，您可以将该输出解释为概率，因为我努力为此寻找理论基础。接下来，我将讨论一个在输出层有 3 个神经元的神经网络，表示相应类为 1。由于所有三个输出的总和在训练中始终为 1，因此神经网络也将给出总和为 1 的前馈输出（所以而不是（0.12 0.36 0.52）而不是 bogatrons 示例））然后您可以将这些数字解释为相应输入属于第 1/2/3 类的概率（属于第 3 类的概率为 0.52）。

当使用逻辑函数或 tanh 作为激活函数时，这是正确的。

更多信息：通过神经网络的后验概率：[http ://www-vis.lbl.gov/~romano/mlgroup/papers/neural-networks-survey.pdf](http://www-vis.lbl.gov/~romano/mlgroup/papers/neural-networks-survey.pdf)
[如何将人工神经网络的输出转换为概率？](https://stackoverflow.com/questions/1523420/how-to-convert-the-output-of-an-artificial-neural-network-into-probabilities)

# javascript - 选择 HTML 内容

> ID：14901125
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:04.773
> 
> 标签：javascript, jquery

我需要找到一个元素并抓取整个 HTML 块。

我试过这个：

```
$(this).find('h1').html(); 
```

但只能捕获带有 h1 标签的文本......我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:34:27.673

这是[一个简单的插件](http://boedesign.com/blog/2011/03/31/outerhtml-plugin-for-jquery/)。按如下方式使用它：

```
$(this).find('h1').outerHtml(); 
```

* * *

如果您不想依赖插件，这里有一个代码较少但效率不高的解决方案：

```
var html = $('<div />').html( $(this).find('h1').clone() ).html(); 
```

这是小提琴：http: [//jsfiddle.net/nxfTf/](http://jsfiddle.net/nxfTf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:35:32.803

你可以试试这个。

```
$(this).find('h1')[0].outerHTML 
```

我做了这个小提琴，如果你需要一些更直观的东西：http: [//jsfiddle.net/aPGGS/](http://jsfiddle.net/aPGGS/)

# javascript - js 如何从 $(document) & $(window) 获取选择器？

> ID：14901126
> 
> 赞同：2
> 
> 时间：2013-02-15T18:32:06.807
> 
> 标签：javascript, jquery, window, selector, document

我想知道如何从 $(document) & $(window) 获取选择器？

```
el = $(document);

alert(el.selector); // return nothing, I want to output -> document

el = $(window);

alert(el.selector); // return nothing, I want to output -> window 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:32:59.610

没有选择器，所以什么都没有。您正在传递一个节点。

“*选择器”*是符合[Selectors API](http://www.w3.org/TR/selectors-api/)的文本字符串，它与 CSS 使用的 API 相同。在 JavaScript 中，选择器是 API 的子集，或者如果使用 jQuery，则有专有扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:33:09.373

当您从 DOM 元素或类似`window`.

如果您只想知道 jQuery 对象是否包装`document`or `window`，请执行以下操作：

```
if (theObject.length === 1 && theObject[0] === document) {
  // it's $(document) ...
} 
```

事实上你也可以这样做：

```
if (theObject.is(document)) { 
```

或者

```
if (theObject.is(window)) 
```

如果您也想测试特定的 DOM 元素，该`.is()`功能也可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T18:33:20.073

没有选择器。正在将这些元素引用`jQuery`包装在一个对象中。`DOM``jQuery`

有关更多信息，请参阅[jQuery 源`init`](https://github.com/jquery/jquery/blob/master/src/core.js#L80)

# jquery - 如何处理多个ajax请求？

> ID：14901130
> 
> 赞同：1
> 
> 时间：2013-02-15T18:32:11.700
> 
> 标签：jquery, ajax, callback, jquery-deferred

我的脚本需要处理几个 ajax 请求。这是一个简化版本：

```
function request(variable){
    $.ajax({
        // call config
    }).done(function(data){
        // treatment of returned data
        // returning TRUE (ok) or FALSE (errors)
    }).fail(function(e){
        // generating error message
    });
} 
```

我需要打几个电话：

```
request(variableA);
request(variableB);
request(variableC); 
```

请求同时执行并且运行良好，但我不知道该过程何时完成。而且我无法显示返回值。

一些讨论建议使用 when()。

```
 $.when(request(variableA), request(variableB), request(variableC))
   .done(function(resultA, resultB, resultC) { 
         alert("Finished!");
         //results available
    }); 
```

使用此代码，警报似乎在过程的最开始执行，而不是等待完成......

我最好的选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T18:36:13.957

改变`request`以回报承诺

```
function request(variable){
    return $.ajax({
        // call config
    }).done(function(data){
        // treatment of returned data
        // returning TRUE (ok) or FALSE (errors)
    }).fail(function(e){
        // generating error message
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:36:22.843

这些 request() 调用无论如何都会立即返回，因为它们是**异步**的（因此 AJAX 中的 A）。要将请求链接在一起并仅在它们全部完成后才执行某些操作，您必须让各个 ajax 调用的成功处理程序增加一个计数器，然后仅在计数器达到某个点时才调用“继续”代码。例如

```
var alert_counter = 0;
function request('blahblah', alert_when_reached) {
$.ajax({
     success: function() { 
        alert_counter++;
        if(alert_when_reached >= alert_counter) {
           proceed_onwards();
        }
     }); 
```

并不是说这会按原样工作，而是应该给你这个想法。如果您需要调用 3 个并行请求，则传入`3`每个请求，当第三个结果最终出现时，成功处理程序的特定实例将调用任何让您的代码继续执行的函数。

一些小的改进是为成功处理程序定义一个闭包并将其传递给 request() 函数，因此您没有硬编码的“继续”函数调用，但这超出了此答案的范围。

# ruby-on-rails - rspec 控制器测试中嵌套关联的正确格式是什么？

> ID：14901132
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:18.757
> 
> 标签：ruby-on-rails, rspec, associations

`valid_attributes`在 rspec 控制器规范中，在模型`has_one`关联时定义方法的正确方法是什么？

*Rails 3.2.12、rspec 2.12、factory_girl_rails 4.2.1*

如果你创建一个包含两个模型 Person 和 Brain 的新 Rails 项目，如下所示：

```
rails new crowd
cd crowd
rails g scaffold person name:string
rails g scaffold brain weight_kg:float 
```

（并做所有的工作来关联它们），你最终可以得到这些模型：

```
class Brain < ActiveRecord::Base
  belongs_to :person
  attr_accessible :weight_kg
  attr_accessible :person
  attr_accessible :person_attributes
  accepts_nested_attributes_for :person
end
class Person < ActiveRecord::Base
  has_one :brain
  attr_accessible :name
  attr_accessible :brain
  attr_accessible :brain_attributes

  accepts_nested_attributes_for :brain
  validates :brain, :presence => { :message => "Please give me a brain" }
end 
```

**spec/controllers/people_controller_spec.rb 的相关自动生成内容：**

```
describe PeopleController do
  def valid_attributes
    {
        "name" => "A Person",
    }
  end 
```

此时valid_attributes 对Person 无效，因为它缺少Brain。好吧，让我们添加一个。但是怎么做？

**错误的：**

```
 def valid_attributes
    {
        "name" => "A Person",
        "brain" => { "weight_kg" => "25" }
    }
  end 
```

^ 生成`ActiveRecord::AssociationTypeMismatch: Brain(#86698290) expected, got ActiveSupport::HashWithIndifferentAccess(#84831840)`

**错误的：**

```
 def valid_attributes
    {
        "name" => "A Person",
        "brain" => Brain.new(:weight_kg => 25)
    }
  end 
```

^ 因为它不会保存。错误将是`Expected response to be a <:redirect>, but was <200>`和`expected persisted? to return true, got false`以及其他 2 个。

**错误：（**假设一个有效的规范/工厂/brain.rb）

```
 def valid_attributes
    {
        "name" => "A Person",
        "brain" => FactoryGirl.build(:brain),
    }
  end 
```

^ 这是错误的，因为这也不会`person`在创建/更新时保存记录。错误将是`Expected response to be a <:redirect>, but was <200>`和`expected persisted? to return true, got false`以及其他 2 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:32:18.757

```
 def valid_attributes
    {
        "name" => "A Person",
        "brain_attributes" => { "weight_kg" => "25" }
    } 
```

或者

```
 def valid_attributes
    {
        "name" => "A Person",
        "brain_attributes" => FactoryGirl.attributes_for(:brain)
    } 
```

# functional-programming - 如何知道用户是否在线仅提供用户名/昵称/参与者但不提供整个 JID (Ejabberd)

> ID：14901135
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:26.970
> 
> 标签：functional-programming, erlang, xmpp, ejabberd, erlang-ports

我正在自定义模块`mod_muc_room`，我想添加一个知道用户是否在线但只提供用户名的功能。在模块中我可以找到函数`is_user_online`：

```
is_user_online(JID, StateData) ->

LJID = jlib:jid_tolower(JID),

?DICT:is_key(LJID, StateData#state.users). 
```

我知道我必须提供用户名、服务器和资源。LJID，会导致类似`{"user", "myserver.com, "someid"}`

我想添加一个返回相同但只提供“用户”的函数

```
User = "user",

is_member_online(User, StateData) ->

?DICT:is_key(User, StateData#state.users). 
```

我可以就如何实现这一目标提出一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:14:36.660

您可以使用它来获取主机列表：

`ejabberd_config:get_global_option(hosts)`

然后使用它来检查用户是否在线：

`ejabberd_sm:get_user_resources(User, Host)`

如果用户离线，这将返回一个空数组。

# .htaccess - 在静态页面地址以外的其他页面地址上使用通配符

> ID：14901136
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:28.757
> 
> 标签：.htaccess, mod-rewrite, wildcard

我想使用通配符，以便允许任何页面地址。但我想使用一些静态页面地址，如用户登录、注册等。我目前正在使用这种方法，但正如我所料，它会尝试`page.php`在每个页面地址上查找。

```
# KONTO
RewriteRule ^skapa-ett-konto$    account-create.php [L]
RewriteRule ^logga-ut$    account-logout.php [L]

# KONTO: Sidor som behöver laddas in genom jQuery/AJAX
RewriteRule ^slutfor-registreringen$    configurations/javascripts/ajax-form/account-create.php [L]
RewriteRule ^logga-in$    configurations/javascripts/ajax-form/account-login.php [L]

# --------------------------------------- #

# PROFIL
RewriteRule ^anvandare/([a-z0-9]+)$    profile.php?u=$1 [L]

# --------------------------------------- #

# ENSKILDA FILER
RewriteRule ^(.*)$    page.php?p=$1 [L] 
```

我如何才能`RewriteRule`将通配符用于其他页面地址而不是静态地址？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:26:32.093

如果我理解正确，您想从最后一条规则中排除一些现有页面，例如`login`和。`registration`排除它们的方法是这样的：

```
# ENSKILDA FILER
# Add other pages to exclude here
RewriteCond %{REQUEST_URI}  !(page\.php|login|registration)  [NC]
RewriteRule ^(.*)$    page.php?p=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:14:49.687

如果所有其他地址都不是文件，您可以在`page.php`规则前加上

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* page.php?p=$0 [L] 
```

# jquery-mobile - jquery mobile 在生产 rails 3.2 应用程序中不起作用

> ID：14901137
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:33.397
> 
> 标签：jquery-mobile, ruby-on-rails-3.2, asset-pipeline, passenger

我有一个使用 jquery mobile 的 Rails 3.2.9 应用程序。

我使用 jquery_mobile_rails gem 来嵌入 jqm 和 mobylette gem 来检测请求何时来自移动设备。

在开发环境中一切正常（Webrick）

生产环境基于 apache/passenger。当我运行 rake assets:precompile all 似乎一切顺利，如果我查看 assets/manifest.yml 我可以看到一切似乎都很好。

当我调用欢迎页面时，登录表单被发送到浏览器，但是在开发环境中，页面具有所有 jqm 格式，在生产中，html 没有“注入”所需的 JQM 代码，因此例如标签很简单

```
<body> 
```

代替

```
<body class="ui-mobile-viewport ui-overlay-c"> 
```

因此，似乎在加载页面后，应该运行的 javascript 并使用 JQM 特定代码“丰富”html 没有被触发。

关于为什么会发生这种情况的任何提示？

**编辑**

```
assets
  javascripts
    application.js
    mobile
      application.js

views
  layouts
    application.html.erb
    application.mobile.erb 
```

清单文件是：

```
javascripts/application.js

//= require jquery
//= require jquery_ujs
//= require_directory .

javascripts/mobile/application.js

//= require jquery.mobile
//= require_directory . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:03:29.140

问题是由于最新版本的 jquery 和 jquery mobile 之间的不兼容造成的。

2012 年 10 月 2 日发布的 jquery mobile 1.2.0 与上一个 jquery 版本 1.9.x 存在问题。

具体来说，jquery 1.9 删除了在 jquery mobile 1.2.0 中使用的 $.browser 方法。

因此，当 jqwery mobile 尝试初始化页面上的对象时，它会因错误而死

```
TypeError: 'undefined' is not an object (evaluating 'e.browser.msie') 
```

我通过强制使用 jquery 1.8.3 解决了这个问题；在 Gemfile

```
gem 'jquery-rails', '~> 2.1.4' 
```

其中包括资产管道中的 jquery 1.8.3。

如果没有 BB Z10 上的网络检查器（或 android 4 设备上的远程调试功能），我将永远无法在移动平台上检测到此类 javascript 问题。

最后，BlackBerry Z10 Web Inspector 通过 Wi-Fi 工作，而 Android 设备需要 USB 连接才能进行远程调试工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:02:19.250

In case you would like to include a bunch of files from a particular directory (or a library ) ,you can use [index manifest file](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization) (look for 2.1.2). It is really simple:

*   in your directory (`app/assets/javascripts/mobile`) create a file `index.js` with content :

    ```
    //= require_self
    //= require other_files_you_want 
    ```

(and optionaly):

```
 //= require_tree . 
```

*   then in your `application.js` manifest file you can require the library with the name of the directory , in which you have created the `index.js` file :

    ```
    //= require mobile 
    ```

I would suggest, when you pass these steps, to remove the file `app/assets/javascripts/mobile/application.js`. It is not a good style in one app to have more than one file with the name `application.js`.

EDIT (after taking a look at the `application.css`):

I would suggest a couple of corrections in your manifest file `application.css`:

*   move the css code in a new file (for example `app/assets/stylesheets/custom.css.scss`)
*   if there are others css libs that you use , include them like normal (`*= require your_css`) in your `application.css`.

# php - 升级到 Symfony 2.2 RC2 会导致映射错误

> ID：14901139
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:44.460
> 
> 标签：php, symfony, orm, doctrine-orm, symfony-2.2

我刚刚将 Symfony 的项目版本从 2.1 升级到 2.2 RC2，并开始看到一些在 2.1 上没有出现的映射错误。我的整个映射似乎都抛出了错误。有一个例子：

这是我的两个实体。

1.

```
MyBundle\Entity\Usuario:
    type: entity
    table: usuario
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
            column: co_usuario
    fields:
        [...]
    oneToMany:
        historicos:
            targetEntity: Historico
            mappedBy: id
    [...] 
```

2.

```
MyBundle\Entity\Historico:
    type: entity
    table: historico
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
            column: co_historico
    fields:
        [...]
    manyToOne:
        coUsuario:
            targetEntity: Usuario
            inversedBy: historicos
            joinColumn:
                name: co_usuario
                referencedColumnName: co_usuario
        [...] 
```

这些是我得到的错误：

> 关联 MyBundle\Entity\Usuario#historicos 指的是未定义为关联的拥有方字段 MyBundle\Entity\Historico#id。
> 
> MyBundle\Entity\Usuario#historicos 关联是指不存在的拥有方字段 MyBundle\Entity\Historico#id。

我以前的 composer.json（从 2.1 版开始，一切正常）有这些版本的学说：

```
[...]
"doctrine/orm": ">=2.2.3,<2.4-dev",
"doctrine/doctrine-bundle": "1.0.*",
[...] 
```

Symfony 2.2 RC2 带有以下版本的 Doctrine：

```
[...]
"doctrine/orm": "~2.2,>=2.2.3",
"doctrine/doctrine-bundle": "1.2.*",
[...] 
```

我不确定我做错了什么，它看起来很像我们在学说的映射文档中看到的所有内容。如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:29:50.067

验证错误是正确的。

这并没有错：我们只是改进了 Doctrine 的运行时验证器，以便在加载元数据时也能捕获此类异常。

以下是您的 YAML 应该如何实际更改：

```
MyBundle\Entity\Usuario:
    [...]
    oneToMany:
        historicos:
            targetEntity: Historico
            mappedBy: coUsuario
    [...] 
```

我基本上修复了`oneToMany`关联`mappedBy`属性以指向正确的字段。

# java - Java 异常 java.lang.IllegalThreadStateException

> ID：14901141
> 
> 赞同：4
> 
> 时间：2013-02-15T18:32:52.497
> 
> 标签：java, multithreading, anonymous-class

在 Java 中，我得到了这个异常：

```
Exception in thread "main" java.lang.IllegalThreadStateException
    at java.lang.Thread.start(Unknown Source)
    at Threads4.go(Threads4.java:14)
    at Threads4.main(Threads4.java:4) 
```

这是代码：

```
public class Threads4 {
    public static void main(String[] args){
        new Threads4().go();
    }
    void go(){
        Runnable r = new Runnable(){
            public void run(){
                System.out.println("foo");
            }
        };
        Thread t = new Thread(r);
        t.start();
        t.start();

    }
} 
```

异常是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T18:34:07.557

你试图启动线程两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:34:30.130

您不能两次启动线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:34:38.317

你不能启动你的线程两次，

```
t.start();
t.start(); 
```

你正试图开始一些已经开始的事情，所以你得到`IllegalThreadStateException`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T18:34:50.177

您不能两次启动同一个线程。

创建另一个线程，例如

```
Thread thread2 = new Thread(r);
thread2.start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T18:37:23.173

您应该只启动一次线程。只有当线程完成运行时，您才能再次启动线程。

下面的代码不会抛出任何异常：

```
t.start();
if(!t.isAlive()){
   t.start();
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-20T23:07:28.497

一旦我们启动了一个线程，我们就不允许重新启动同一个线程，否则我们将
在您的代码中得到 IllegalThreadStateException 只需删除该行

```
 Thread t = new Thread(r);
        t.start();
        t.start(); // Remove this line 
```

# if-statement - 计算嵌套表单上的属性？

> ID：14901142
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:53.927
> 
> 标签：if-statement, count, nested-attributes

Rails 3.2.12 和 Ruby 1.9.3 和 Haml

我想使用属性计数来控制“link_to“删除””的显示，但我在设置逻辑时遇到了问题。

以下是我的表单中的一些代码，因为它是当前的：

```
 .field
      = codeline.label :name, "Units Alloc"
      %br/
      = codeline.text_field :units_alloc, :precision => 6, :scale => 2, :size => 10,
       :class => "ui-state-default"
      = codeline.hidden_field :_destroy
      = link_to "remove", '#', class: "remove_fields" 
```

这很好用，但我显示了“删除”链接，我希望它只显示是否有两个 :units_alloc 属性。

这是我尝试过的：

```
 .field
      = codeline.label :name, "Units Alloc"
      %br/
      = codeline.text_field :units_alloc, :precision => 6, :scale => 2, :size => 10,
       :class => "ui-state-default"
      - if :units_alloc.count > 1
      = codeline.hidden_field :_destroy
      = link_to "remove", '#', class: "remove_fields" 
```

这是我的错误：

```
 NoMethodError in Contracts#new

       Showing /home/tom/rails_projects/tracking/app/views/contracts
       /_codeline_fields.html.haml where line #9 raised:

       undefined method `count' for :units_alloc:Symbol 
```

如果我在参数中使用 units_alloc 而不是符号，我仍然会收到错误消息：

```
 NameError in Contracts#new

        Showing /home/tom/rails_projects/tracking/app/views/contracts
        /_codeline_fields.html.haml where line #9 raised:

        undefined local variable or method `units_alloc' for
        #<#<Class:0xadbde90>:0xa8956e8> 
```

我尝试使用'codeline.units_alloc'，但这不起作用，并且标记了相同的错误。

有什么建议或指示可以帮助我解决此问题吗？

谢谢。

解决方案：感谢 James Scott Jr。

应用程序/控制器/contracts_controller.rb

```
 def New
     @show_remove = false
     ....
     ....
   end 
```

app/views/contracts/_codelines_fields.html.haml

```
 .field
      = codeline.label :name, "Units Alloc"
      %br/
      = codeline.text_field :units_alloc, :precision => 6, :scale => 2, :size => 10,
       :class => "ui-state-default"
      - if @show_remove
          = codeline.hidden_field :_destroy
          = link_to "remove", '#', class: "remove_fields"
      - else
         - @show_remove = true 
```

就这样做了……删除按钮仅显示在第二行和随后的属性行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:37:18.350

我想补充一点，如果您的锚标记的目的是使用一些 javacscript 从表单列表中删除元素，那么您可能使用了错误的控件。锚标签不是表单元素，它们应该指向资源/内容，并且不能用作动画/客户端行为触发器。根据您描述的用例，输入标签 type=button 将是您似乎想要实现的更合适的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:04:01.937

当您进入表单（部分）时，codeline 不会引用表单（部分）所针对的 Co​​deline 实例的实例，而是简单知道如何操作的 ActionView::Helpers::FormBuilder 的实例将信息关联到 Codeline 的实例。你知道，因为在部分的第一行，你有`codeline.object.build_code`.

因此，如果您想访问有关 units_alloc 关联的信息，您可以使用`codeline.object.units_alloc`. 这将为您提供有条件的数据。

# php - PDO 不会给出结果

> ID：14901143
> 
> 赞同：0
> 
> 时间：2013-02-15T18:32:53.813
> 
> 标签：php, mysql, database, pdo

所以，我今天从 mysql_* 切换到 PDO 并试图让它运行，但不知何故我得到了零结果。

我的声明如下：

```
$serverConnector = new ServerConnector();
    $db = $serverConnector->connectToServer();
    $stmt = $db->prepare("SELECT * FROM `" . TABLE_USERS . "` WHERE `" . USER_NICKNAME . "` =:user_nickname OR `" . USER_EMAIL . "` =:user_email;");
    $stmt->execute(array(':user_nickname' => "'".$name_or_email."'", ':user_email' => "'".$name_or_email."'"));
    while ($row = $stmt->fetchAll(PDO::FETCH_ASSOC)) {
        $this->id = $row[USER_ID];
        $this->joined = $row[USER_JOINED];
        ...
    }
    $db = null; 
```

我尝试在 Xampp 上将此语句作为纯 SQL 执行。在那里工作。虽然在这里不起作用。我已经检查了所有传递的参数，一切都是正确的。不知何故，程序根本不会进入while循环。ServerConnector 只是通过 PDO 连接到数据库并将 PDO 数据库对象返回给 $db。

谢谢

编辑：嗯，我正在使用最新的 Xampp 和 PHP 5.4.7。PDO 应默认启用。自己检查了 php.ini 文件，它也在那里启用

编辑：这是我的 ServerConnector 类。启用错误报告。虽然我不会得到任何：/

```
class ServerConnector {

    public function connectToServer(){
        $db = new PDO('mysql:host=' . DATABASE_HOST . ';dbname=' . DATABASE_NAME . ';charset=UTF-8', 
                       DATABASE_USERNAME, 
                       DATABASE_PASSWORD, 
                       array(PDO::ATTR_EMULATE_PREPARES => false,
                             PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
        return $db;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T18:34:25.690

您不必引用准备好的声明：

```
$serverConnector = new ServerConnector();
    $db = $serverConnector->connectToServer();
    $stmt = $db->prepare("SELECT * FROM `" . TABLE_USERS . "` WHERE `" . USER_NICKNAME . "` =:user_nickname OR `" . USER_EMAIL . "` =:user_email;");
    $stmt->execute(array(':user_nickname' => $name_or_email, ':user_email' => $name_or_email));
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        $this->id = $row[USER_ID];
        $this->joined = $row[USER_JOINED];
        ...
    }
    $db = null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:43:23.243

基于上面所说的不需要在以下内容中添加引号`execute()`：

```
$serverConnector = new ServerConnector();
$db = $serverConnector->connectToServer();
$stmt = $db->prepare("SELECT * FROM `" . TABLE_USERS . "` WHERE `" . USER_NICKNAME . "` =:user_nickname OR `" . USER_EMAIL . "` =:user_email;");
$stmt->execute(array(':user_nickname' => $name_or_email, ':user_email' => $name_or_email));
while ($row = $stmt->fetchAll(PDO::FETCH_ASSOC)) {
    $this->id = $row[USER_ID];
    $this->joined = $row[USER_JOINED];
    ...
}
$db = null; 
```

以下内容不需要在 while 循环中：

```
$row = $stmt->fetchAll() 
```

这不需要在一个while循环中。它将整个记录集作为一个数组返回，因此您只会从该循环中获得一次迭代。

您可以将其更改为`$stmt->fetch(PDO::FETCH_ASSOC)`或不使用 while 循环，然后迭代`$row`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:29:23.980

好吧，用 print_r($row) 检查了我的数据库输出，发现我在这里有一个二维数组，我的程序没有通过。意味着我的所有信息都在 $row[0][KEY] 上，而不是在 $row[key] 上。

固定的 ：）

编辑：好吧，我也会发布我的代码。两个小时前也有同样的方法，但是没有用。不要问我为什么-.-'这样工作：

```
function receiveUserData( $name_or_email ) {

    $serverConnector = new ServerConnector();
    $db = $serverConnector->connectToServer();
    $stmt = $db->prepare("SELECT * FROM `" . TABLE_USERS . "` WHERE `" . USER_NICKNAME . "` =:user_nickname OR `" . USER_EMAIL . "` =:user_email");
    $stmt->execute(array(':user_nickname' => $name_or_email, ':user_email' => $name_or_email));

    $row = $stmt->fetch(PDO::FETCH_ASSOC); 

    $this->user_id = $row[USER_ID];
    $this->user_joined = $row[USER_JOINED];
    $this->user_last_seen = $row[USER_LAST_SEEN];
    $this->user_salt = $row[USER_SALT];
    $this->user_nickname = $row[USER_NICKNAME];
    $this->user_name = $row[USER_NAME];
    $this->user_last_name = $row[USER_LAST_NAME];
    $this->user_email = $row[USER_EMAIL];
    $this->user_password = $row[USER_PASSWORD];
    $this->user_save_password = $row[USER_SAVE_PASSWORD];

    $db = null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T18:47:38.597

您的问题缺少关键的东西：错误消息

以下似乎是对 PDO 问题最需要的答案：

您**真正的**问题是缺乏错误报告。所以

```
error_reporting(E_ALL); 
```

通知所有 PHP 错误，例如拼写错误的常量

```
$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

在您的服务器连接器中收到 PDO 错误通知

*收到实际错误消息后*，您可以自行解决或在此处寻求帮助

# python - python在xml元素中打印文本节点值

> ID：14901151
> 
> 赞同：0
> 
> 时间：2013-02-15T18:33:26.490
> 
> 标签：python, xml, dom, nodevalue

编辑：

谢谢你们，我完全忘记了 for 语句末尾的 : 。此外，对于带有空格的原始标签，我只是将其用作填充文本！实际名称确实有 aword_anotherword 作为元素标签

现在，如果我有这样的事情，

```
<TIER name="a">
<tier_1> 
 <tier_2>
   <tier_3> a1</tier_3> 
 </tier_2>
</tier_1>

<tier_1> 
 <tier_2>
   <tier_3> a2</tier_3> 
 </tier_2>
</tier_1>

<tier_1> 
 <tier_2>
   <tier_3> a3</tier_3> 
 </tier_2>
</tier_1>
</TIER>

<TIER name="b">
<tier_1> 
 <tier_2>
   <tier_3> b1</tier_3> 
 </tier_2>
</tier_1>

<tier_1> 
 <tier_2>
   <tier_3> b2</tier_3> 
 </tier_2>
</tier_1>

<tier_1> 
 <tier_2>
   <tier_3> b3</tier_3> 
 </tier_2>
</tier_1>
</TIER> 
```

我将如何使用 name="a" 仅从第一层打印 tier_3 ？

* * *

* * *

* * *

我有一个类似这样的 xml 表

```
<ALL TIERS>
<tier 1> 
 <tier 2>
   <tier 3> Hello one!</tier3> 
 </tier 2>
</tier 1>

<tier 1> 
 <tier 2>
   <tier 3> Hello two!</tier3> 
 </tier 2>
</tier 1>

<tier 1> 
 <tier 2>
   <tier 3> Hello three!</tier3> 
 </tier 2>
</tier 1>

</ALL TIERS> 
```

我想使用 python 打印第 3 层的文本节点值，所以结果是这样的

你好一个！两位好！你好三！

我写了这个：

```
from xml.dom import minidom 
xmldoc = minidom.parse(sys.argv[1])
xlist = xmldoc.getElementsByTagName('tier 3') 

for i in xlist

    print " ".join(t.nodeValue for t in i.childNodes if t.nodeType==t.TEXT_NODE) 
```

但这给了我一个指向“for i in xlist”的无效语法错误

有人可以帮我纠正这个吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:56:34.240

`text`从您那里获取 Xml的替代方法。

此外，您的 Xml 格式也不像标签中`spaces`的那样。

```
import xml.etree.ElementTree as ET
txt = """<ALL-TIERS>
<tier-1>
 <tier-2>
   <tier-3> Hello one!</tier-3>
 </tier-2>
</tier-1>
<tier-1>
 <tier-2>
   <tier-3> Hello two!</tier-3>
 </tier-2>
</tier-1>
<tier-1>
 <tier-2>
   <tier-3> Hello three!</tier-3>
 </tier-2>
</tier-1>
</ALL-TIERS>
"""

root = ET.fromstring(txt)

for e in root.iter('ALL-TIERS'):
    print ">>"
    print ET.tostring(e, method="text").strip()
    print "<<"

for e in root.iter('tier-3'):
    print ">>"
    print ET.tostring(e, method="text").strip()
    print "<<" 
```

给出：

```
>>
Hello one!

    Hello two!

    Hello three!
<<
>>
Hello one!
<<
>>
Hello two!
<<
>>
Hello three!
<< 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:46:04.783

您的直接问题是您缺少`:`for 语句

```
for i in xlist: 
```

您还想要`import sys`并且您的 XML 格式不正确，也许使用`<ALL_TIERS>`而不是`<ALL TIERS>`? （您也想更改结束标签。）

# less - 简化 LESS 混合

> ID：14901154
> 
> 赞同：1
> 
> 时间：2013-02-15T18:33:48.563
> 
> 标签：less

我有一些 LESS 可以根据被传递的一侧（顶部、右侧、底部、左侧或全部）制作边距：

```
 .margin(@px,@side) when (@side = top) {
      (){ margin-top: ~"@{px}px"; }
   }
   .margin(@px,@side) when (@side = right) {
      (){ margin-right: ~"@{px}px"; }
   }
   .margin(@px,@side) when (@side = bottom) {
      (){ margin-bottom: ~"@{px}px"; }
   }
   .margin(@px,@side) when (@side = left) {
      (){ margin-left: ~"@{px}px"; }
    }
   .margin(@px,@side) when (@side = all) {
      (){ margin-top: ~"@{px}px";
      margin-right: ~"@{px}px";
      margin-bottom: ~"@{px}px";
      margin-left: ~"@{px}px"; }
    } 
```

我的问题是，如果我有这样的身份证：

```
#testfeature {
.margin(10px,l);
.margin(10px,r);
} 
```

然后 LESS 像这样编译它：

```
#testfeature {
margin-left:10px;
}

#testfeature {
margin-right:10px;
} 
```

我如何让它像这样编译：

```
#testfeature {
margin-left:10px;
margin-right:10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:30:06.240

摆脱`() { ... }`包装所有 mixin 样式的不必要的 's。它们导致选择器被奇怪地解释并将它们分成不同的选择，而不是在一个选择下加入所有内容：

```
.margin(@px,@side) when (@side = top) {
    margin-top: ~"@{px}px";
}
.margin(@px,@side) when (@side = right) {
    margin-right: ~"@{px}px";
}
.margin(@px,@side) when (@side = bottom) {
    margin-bottom: ~"@{px}px";
}
.margin(@px,@side) when (@side = left) {
    margin-left: ~"@{px}px";
}
.margin(@px,@side) when (@side = all) {
    margin-top: ~"@{px}px";
    margin-right: ~"@{px}px";
    margin-bottom: ~"@{px}px";
    margin-left: ~"@{px}px";
} 
```

您也可以放弃使用`~"@{px}px"`simple `@px`，最后一个 mixin 也应该是：

```
.margin(@px, @side) when (@side = all) {
    margin: @px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:09:06.797

要让它们“分组”，您需要创建一个嵌套和分组的 mixin。下面是一个分组的 mixin 函数，“流线型”用于边距设置。

1.  它需要 1 到 8 个参数；总是成对的`position`then `value`（除了下面提到的；它可以接受任何位置顺序和`auto`or`inherit`的值）。
2.  传递一个“位置”只会`0px`在该位置设置一个边距。
3.  将非单位编号默认为`px`，但将明确设置的单位保持为已通过。
4.  传递一个*数字*值参数会将所有边距设置为该数字。

**少混音**

```
.setMargins(@s1: ~'', @v1: 0, @s2: ~'', @v2: 0, @s3: ~'', @v3: 0, @s4: ~'', @v4: 0) {

   .setPos(top, @T) {
        .setNum() when (isnumber(@T)) {
           margin-top: @T * 1px;
        }
        .setNum() when not (isnumber(@T)){
           margin-top: @T;
        }
        .setNum();
    }
   .setPos(right, @R) {
        .setNum() when (isnumber(@R)) {
           margin-right: @R * 1px;
        }
        .setNum() when not (isnumber(@R)) {
           margin-right: @R;
        }
        .setNum();
    }
   .setPos(bottom, @B) {
        .setNum() when (isnumber(@B)) {
           margin-bottom: @B * 1px;
        }
        .setNum() when not(isnumber(@B)) {
           margin-bottom: @B;
        }
        .setNum();
    }
   .setPos(left, @L) {
        .setNum() when (isnumber(@L)) {
           margin-left: @L * 1px;
        }
        .setNum() when not (isnumber(@L)) {
           margin-left: @L;
        }
        .setNum();
    }
   //allows all to be called with one number or value
   .setPos(@A, 0) when (isnumber(@A)) {
           margin: @A * 1px;
   }
   .setPos(auto, 0) {
           margin: auto;
   }
   .setPos(inherit, 0) {
           margin: inherit;
   }
   //default null if no valid side given
   .setPos(@other, 0) {}
   //call all possible positions
   .setPos(@s1, @v1);
   .setPos(@s2, @v2);
   .setPos(@s3, @v3);
   .setPos(@s4, @v4);
} 
```

**例子**

1.  `.setMargins(right);`生产`margin-right: 0px;`
2.  `.setMargins(right, 15);`生产`margin-right: 15px;`
3.  `.setMargins(left, 10em);`生产`margin-left: 10em;`
4.  `.setMargins(top, 12, right, 10);`产生：`margin-top: 12px; margin-right: 10px;`
5.  `.setMargins(25);`产生：`margin: 25px;`
6.  `.setMargins(auto);`产生：`margin: auto;`

所以你在选择器中使用它：

**较少的**

```
#testfeature {
   .setMargins(left, 10, right, 10);
} 
```

**CSS 输出**

```
#testfeature {
  margin-left: 10px;
  margin-right: 10px;
} 
```

# c# - c# JIT 和静态构造函数

> ID：14901157
> 
> 赞同：0
> 
> 时间：2013-02-15T18:34:02.687
> 
> 标签：c#, static, constructor, jit

好的，我对上面的那两件事有一点问题

以下情况：我有一个抽象类“发射器”。这个类有一个静态 Dictionary 来跟踪从它派生的所有类型。

例如，我有“LinearEmitter”类，这个类有一个静态构造函数。此构造函数将 typeof(LinearEmitter) 添加到字典中。现在的问题是，当我想使用来自 Emitter 的静态字典（静态方法“getMeEmitterFromID(int id)”）时，可能会发生“Emitter”的子代（例如 LinearEmitter）未初始化（我从文件，然后从“发射器”中的类中查找 id 并从中初始化一个实例）。

我如何确保每个 Child-class 之前都已初始化？（已将其自己写在字典中）？

当然其他人应该使用这个库，他们也应该使用静态构造函数将他们的类添加到“发射器”的字典中

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:06:12.327

Eric Lippert 刚刚有一个关于静态构造函数的精彩系列。

[静态构造函数第 1 部分](http://ericlippert.com/2013/02/06/static-constructors-part-one/)， [静态构造函数第 2 部分](http://ericlippert.com/2013/02/11/static-constructors-part-two/?utm_source=rss&utm_medium=rss&utm_campaign=static-constructors-part-two)， [静态构造函数第 3 部分](http://ericlippert.com/2013/02/14/static-constructors-part-three/?utm_source=rss&utm_medium=rss&utm_campaign=static-constructors-part-three)， [静态构造函数第 4 部分](http://ericlippert.com/2013/02/18/static-constructors-part-four/)

总结一下你的情况有用的一点：静态构造函数被调用

1.  就在第一次访问静态方法/字段之前。
2.  就在第一次访问该类型的实例之前。

因此，您要么调用静态方法，`Initialize()`要么实例化从`Emitter`.

除此之外，我确信有更好的方法来解决您的问题，因为静态初始化程序的运行方式可能会随着不同的`.NET`/`CLR`版本而改变，如果您不需要，我不会依赖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:46:25.200

我不会公开 Dictionary 本身，而是将其作为实现细节。然后你可以制作一个类似的方法`GetByType(Type typeToGetFromDictionary)`。现在，get 方法可以延迟加载它还没有的部分。

话虽如此，我同意您可能应该重新考虑架构的评论，因为这甚至可能没有必要。

# matlab - 如何找到 [nxn] 矩阵值的拟合函数

> ID：14901165
> 
> 赞同：1
> 
> 时间：2013-02-15T18:34:36.210
> 
> 标签：matlab, curve-fitting

给定 100x100 矩阵，其中每个元素表示空间中的函数值，我想找到函数 f(x, y) = A + B *x + C* y + D *X^的参数值 A、B、C、D、E 2+E* y^2 最适合给定矩阵值，其中 x 表示行号，y 表示列号

为了说明一个更小的例子的目的，假设我们有一个 3x3 矩阵 T：

```
T = [0.1 0.2 0.1; 0.8, 0.6, 0.5; 0.1, 0, 1] 
```

在这种情况下，f(1,1) = 0.1 和 f(3,2)= 0。

具体来说，我想为其找到拟合函数（曲面）的矩阵值显示在下图中：

![在此处输入图像描述](../Images/3b538f573856faf225a7ffaa7456ee7d.png)

如果有人提出一种方法来找到最适合给定矩阵的 3D 函数，我将不胜感激。

# 编辑

是否可以直接找到一个拟合，或者是否有必要（或更好）首先将数据表示为矩阵 [X, Y, f(X,Y)]：

```
vals = []
for(i = 1: 100)
for j = 1 : 100
if(T(i,j) ~= 0)
vals = [vals;i, j, T(i,j)];
end;
end;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:45:44.997

这些家伙似乎已经做到了这一点：

[http://www.mathworks.com/matlabcentral/newsreader/view_thread/134076](http://www.mathworks.com/matlabcentral/newsreader/view_thread/134076)

```
x = % vector of x values
y = % vector of y values
z = % f(x,y)

V = [1 x y x.^2 x.*y y.^2];
a = V \ z ; 
```

从[帮助页面](http://www.mathworks.com/help/matlab/ref/mldivide.html;jsessionid=f628af059d317c12624d7f165d14)：

*   如果 A 是 m ~= n 的 m×n 矩形矩阵，B 是具有 m 个元素的列向量或具有 m 行的矩阵，则 A\B 返回方程组 A* 的最小二乘解x = B。

# ruby - 使用链接检查器（红宝石）

> ID：14901169
> 
> 赞同：2
> 
> 时间：2013-02-15T18:34:40.080
> 
> 标签：ruby, link-checking

有人使用过[链接检查器 gem](https://rubygems.org/gems/link-checker)吗？

我不想在项目中使用它，我想编写一个小脚本来测试 Web 应用程序上的链接。

我似乎无法弄清楚如何使用它。尝试`require`它是行不通的，但说`gem 'link-checker'`确实会导致事实。

我在 IRB 中尝试使用它无处可寻。有人可以让我知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T19:01:03.613

你读过[文档](http://www.ryanalynporter.com/2012/10/06/introducing-the-link-checker-ruby-gem/)吗？Link-checker*是*一个小脚本，旨在检查链接。

该页面显示了它从命令行运行的示例，而不是从 IRB 或 Ruby 代码内部运行的示例。换句话说，它是一个命令行应用程序，而不是你的代码`require`：

> 用法：
> 
> 只需给它您希望它扫描的目标。例如，如果您有一个 Octopress 站点，那么您的输出 HTML 位于公共目录中，因此使用以下命令调用它：

```
检查链接“公共”

```

> 或者，如果您想查看实时站点上的链接，请改为提供 URL：

```
检查链接“http://www.ryanalynporter.com”

```

> 如果不传递任何目标，则默认扫描“./”目录。如果你有一个部署到 GitHub Pages 的 Jekyll 站点，那么你可以检查链接：

```
检查链接

```

# java - 在 ResposiveUIActivity 上带有 ActionBarSherlock 错误的 SlidingMenu 库

> ID：14901172
> 
> 赞同：1
> 
> 时间：2013-02-15T18:34:46.793
> 
> 标签：java, android, slidingmenu

我在文件 ResponsiveUIActivity.java 开头的这一行有一个错误：

公共类 ResponsiveUIActivity 扩展 SlidingFragmentActivity {

我该如何纠正包中的这个错误：

*com.slidingmenu.example.fragments*

?

--

错误：

ResponsiveUIActivity 类型的层次结构不一致

我使用 GoogleAPI 4.0.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:47:42.387

不要让你的活动 extend `SlidingFragmentActivity`，而是像这样以编程方式构建你的菜单：

```
 SlidingMenu menu = new SlidingMenu(this);
        menu.setMode(SlidingMenu.LEFT);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        menu.setShadowWidthRes(R.dimen.shadow_width);
        menu.setShadowDrawable(R.drawable.shadow);
        menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        menu.setFadeDegree(0.35f);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        menu.setMenu(R.layout.menu); 
```

# ruby - if/unless 修饰符的值是多少？

> ID：14901177
> 
> 赞同：3
> 
> 时间：2013-02-15T18:34:52.287
> 
> 标签：ruby

我在任何地方都找不到`if`(or `unless`) 修饰符的正式规范：

```
123 if x > 0 
```

如果`x`不高于零，上述语句的值是多少？`irb`建议`nil`，但它是否记录在任何地方？

（是的，这可能是一个愚蠢的问题，抱歉，找不到规范）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T18:49:58.797

未计算的表达式与不存在的表达式相同。并且您的条件应该是某些代码块的一部分，例如定义或主环境等。没有内容的代码块被评估为`nil`.

```
class A; end
# => nil

def foo; end
foo
# => nil

()
# => nil

begin; end
# => nil

eval("")
# => nil 
```

因此，您的示例返回的原因`nil`与条件本身无关。只是因为没有评价。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T18:37:58.433

是的，它是`nil`。它还能返回什么？子句中的语句`if`用于if本身，`then`不执行语句。没有什么可以返回的，所以`nil`.

[相关规范](https://github.com/rubyspec/rubyspec/blob/master/language/if_spec.rb#L96-L101)

```
it "returns nil if else-body is empty and expression is false" do
  if false
    123
  else
  end.should == nil
end 
```

# c# - 如何在 MVC 中从数据库中提取的数据的 8 项后创建一个新列

> ID：14901178
> 
> 赞同：0
> 
> 时间：2013-02-15T18:34:52.547
> 
> 标签：c#, asp.net-mvc

目前，这是我从数据库中提取项目列表并在菜单项下显示的代码：

```
<div class="top">
<ul>
<li class='itemCaption f17o'>&nbsp;</li>
@foreach (var category in Model.CatList)
{
<li>
<a href="/c/@category.Id/@category.Name" class='white'>@category.Name</a>
</li>
}

</ul>

</div> 
```

但这仅显示一列下的所有项目。当我到达一列中的第 8 个项目时，如何将列表拆分为另一列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:47:44.563

```
@foreach (var category in Model.CatList.Select((Value, i => new { i, Value }))
{
    if (category.i % 8 == 0)
    {
        @("</ul></li><li><ul>")
    }
    <li>
        <a href="/c/@category.Value.Id/@category.Value.Name" class='white'>@category.Value.Name</a>
    </li>
} 
```

# fft - 使用matlab数值积分的傅立叶系数

> ID：14901181
> 
> 赞同：0
> 
> 时间：2013-02-15T18:35:06.680
> 
> 标签：fft, matlab, numerical-integration

我一直在尝试在 matlab 中显示 an 和 bn 傅立叶系数，但没有成功，我能够显示 a0，因为这不是迭代的一部分。

我将非常感谢您的帮助，以下是我的代码

```
syms an;
syms n;
syms t;
y = sym(0);
L = 0.0005; 
inc = 0.00001; % equally sample space of 100 points

an = int(3*t^2*cos(n*pi*t/L),t,-L,L)*(1/L); 
bn = int(3*t^2*sin(n*pi*t/L),t,-L,L)*(1/L); 
a0 = int(3*t^2,t,-L,L)*(1/L); 
a0 = .5 *a0;

a0=a0

for i=1:5 
    y = subs(an, n, i)*cos(i*pi*t/0.0005)
    z = subs(bn, n, i)*sin(i*pi*t/0.0005)  
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:22:19.297

如果您在问题中陈述的所有内容都是正确的，我倾向于以这种方式解决它：

```
clc, clear all,close all

L = 0.0005;
n = 5;
an = zeros(1,n);
bn = zeros(1,n);

for i = 1:5    
    f1 = @(t) 3.*(t.^2).*cos(i.*pi.*t./L);
    f2 = @(t) 3.*(t.^2).*sin(i.*pi.*t./L);
    an(i) = quad(f1,-L,L).*(1./L);
    bn(i) = quad(f2,-L,L).*(1./L);
    a0 = .5.*quad(@(t) 3.*t.^2,-L,L).*(1./L);
end 
```

我希望这有帮助。

# c# - System.Drawing.Size 等效于控制台应用程序

> ID：14901182
> 
> 赞同：0
> 
> 时间：2013-02-15T18:35:09.073
> 
> 标签：c#, .net, console-application

是否有一个结构（如**System.Drawing.Size**），它有两个整数？我正在编写一个 C# 控制台应用程序并想使用这个结构，但显然你不能`System.Drawing`在控制台应用程序中使用。

我想知道在编写我自己的结构之前是否存在另一个这样的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:37:03.647

如果您需要一个具有两个整数的结构，您可以使用`Tuple`

```
var point = Tuple.Create( 0, 0);
int x = point.Item1;
int y = point.Item2; 
```

话虽如此，您应该能够添加对的引用，`System.Drawing.dll`以允许您`using System.Drawing;`在控制台应用程序中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:41:58.193

谁说你不能`System.Drawing`在控制台应用程序中使用。我现在在调整图像大小的服务中使用它。只需添加引用，然后使用`Size`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T18:53:34.097

我发现使用元组的代码非常难以阅读。我认为如果某件事值得做，那就值得做好。

在 Point 结构的情况下，您需要使其不可变（不像微软的业余努力！）并实现价值风格的比较。像这样的东西：

```
public struct Point2D: IEquatable<Point2D>
{
    public Point2D(int x, int y)
    {
        _x = x;
        _y = y;
    }

    public int X
    {
        get { return _x; }
    }

    public int Y
    {
        get { return _y; }
    }

    public bool Equals(Point2D other)
    {
        return _x == other._x && _y == other._x;
    }

    public override int GetHashCode()
    {
        return _x.GetHashCode() ^ _y.GetHashCode();
    }

    public override bool Equals(object obj)
    {
        if (!(obj is Point2D))
        {
           return false;
        }

        return Equals((Point2D)obj);
    }

    public static bool operator==(Point2D point1, Point2D point2)
    {
        return point1.Equals(point2);
    }

    public static bool operator !=(Point2D point1, Point2D point2)
    {
        return !point1.Equals(point2);
    }

    public override string ToString()
    {
        return string.Format("({0}, {1})", _x, _y);
    }

    private readonly int _x;
    private readonly int _y;
} 
```

# c - 当非 const 参数作为 const 参数传递时，英特尔 C++ 编译器警告 167

> ID：14901183
> 
> 赞同：4
> 
> 时间：2013-02-15T18:35:14.857
> 
> 标签：c, compiler-warnings, icc

我有一个大型代码库，最近从微软的编译器转移到了英特尔 C++ 编译器。我们团队的目标是在主线中编译没有警告。自切换以来，一个警告 167 的实例让我感到困惑。如果我编译以下代码：

```
int foo(const int pp_stuff[2][2])
{
   return 0;
}

int foo2(const int pp_stuff[][2])
{
    return 0;
}

int main(void)
{
    int stuff[2][2] = {{1,2},{3,4}};

    foo(stuff);
    foo2(stuff);

    return 0;
} 
```

ICC会给我警告：

```
1>main.c(17): warning #167: argument of type "int (*)[2]" is incompatible with parameter of type "const int (*)[2]"
1>        foo(stuff);
1>            ^
1>  
1>main.c(18): warning #167: argument of type "int (*)[2]" is incompatible with parameter of type "const int (*)[2]"
1>        foo2(stuff); 
```

为什么这应该是一个警告？通常将非常量变量作为 const 参数传递，并且类型和维度是相同的。

对于那些将其标记为重复问题的人，我敦促您重新考虑。如果其他人遇到此警告，他们必须知道在 C 中参数是通过原型函数中的赋值进行转换的，然后搜索严格与赋值有关的问题。尽管答案最终与 C90/C99 中的子句相同，但我认为问题是完全不同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:46:21.790

将变量传递给需要 const 的函数时，将其转换为 const。

```
foo( (const int (*)[2]) stuff ); 
```

[为什么我不能将 char ** 传递给需要 const char ** 的函数？](http://c-faq.com/ansi/constmismatch.html)

[类似的问题](https://stackoverflow.com/questions/14901183/intel-c-compiler-warning-167-when-non-const-argument-is-passed-as-const-parame)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:46:40.257

`stuff`数组的值是类型`int (*)[2]`。

```
int foo(const int pp_stuff[2][2]) 
```

相当于

```
int foo(const int (*pp_stuff)[2]) 
```

在函数调用中，就好像您将 type 的值分配给 type`int (*)[2]`的变量`const int (*)[2]`。

参数的转换就像通过原型函数中的赋值一样。如果满足以下条件，C 允许您分配两个指针：

> 两个操作数都是指向兼容类型的限定或非限定版本的指针，并且左边指向的类型具有右边指向的类型的所有限定符；

这里`int (*)[2]`和`const int (*)[2]`不是同一类型的合格/不合格版本。限定符`int`不适用于指针。

利用：

```
int foo(int (* const pp_stuff)[2]) 
```

如果你想制作指针`const`而不是`int`元素。

# django - Django South syncdb 给出了 SyntaxError

> ID：14901184
> 
> 赞同：1
> 
> 时间：2013-02-15T18:35:15.310
> 
> 标签：django, django-south

我使用 pip 安装了 South。

按照官方指南（[http://south.readthedocs.org/en/latest/installation.html#installation](http://south.readthedocs.org/en/latest/installation.html#installation)）

我将'south'添加到我的installed_apps，运行manage.py syncdb，得到这个：

*Long Traceback 以 south\management\commands\syncdb.py 结尾，第 52 行，导入错误除外，exc：

SyntaxError：无效的语法

向南走，运行syncdb，一切都很好。是什么赋予了？

更新：South 仅适用于 Python 2.x，因此安装 2.7 就可以了。谢谢 IRC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:42:57.220

我使用 python 3.2.3 遇到了同样的错误。我的情况是，这是从 python 2.* 开始的非向后兼容更改。我去了源文件并删除了“，exc”，你会在except语句的末尾找到。这修复了有问题的错误，但是您会从那里得到更多错误。我尝试在整个南目录上运行 2to3 并且不再获取和编码特定错误。不幸的是，我现在收到错误“NameError：未定义全局名称'exc'”但没有回溯。我已经在这里停留了一段时间，但至少这是进步。如果我让这个东西工作，我会报告。

[在此处查看有关特定不兼容性的信息。在“Python 2.6 中已经存在的变化”标题下] ( [http://docs.python.org/release/3.1.3/whatsnew/3.0.html](http://docs.python.org/release/3.1.3/whatsnew/3.0.html) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:26:43.230

我不知道您可能做错了什么，但要完成您之前描述的 3 个小步骤以南的工作。

1) pip install south 2) 在你的 INSTALLED_APPS 中添加 'south' 所有 "django.contrib" 3) 运行 python manage.py syncdb

通过这些步骤，您的同步数据库将有所不同，从现在开始，您通常应该使用南方。

我最近做了一个视频（葡萄牙语），展示了如何在一个项目已经开始的情况下安装和运行南，也许这个视频可以帮助你[http://bit.ly/XffRGy](http://bit.ly/XffRGy)

# php - jQuery AJAX bash telnet 不断更新 div 脚本

> ID：14901193
> 
> 赞同：0
> 
> 时间：2013-02-15T18:35:53.183
> 
> 标签：php, jquery, ajax, bash, telnet

我有一个连接到 telnet 端口的 bash 脚本；打开一些诊断；退出；并且，打开另一个 telnet 端口。

要检查脚本是否正常工作，我可以使用 jQuery 和 AJAX 执行它，但我无法不断更新`div`结果。

我不想在重新加载到时继续调用相同的命令`php`，`div`而只想刷新结果。

bash 脚本非常基本：

```
#!/bin/bash

{
sleep 2
echo diag gps info
sleep 2
echo exit
} | telnet 10.10.2.1 1700

telnet 10.10.2.1 1800 
```

HTML/PHP 文件：

```
<!DOCTYPE HTML >
<html>
<head>
<meta charset="UTF-8">
<title>diag stuff</title>
</head>
<body>
<button id="startGpsDiag" >Start gps diag</button>

<div id="results"></div>

</body>
<!-- <script langauge="JavaScript" src="{#javaScriptDir#}/jquery-min-1.8.js">    </script>   -->
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>   

jQuery(document).ready(function () {
    jQuery.ajaxSetup({cache: false});       

    jQuery("#startGpsDiag").click(function  () { 
        //  alert('true');
        callGpsDiag();             
    });        

    function callGpsDiag(){
    jQuery.ajax({
              type: "POST",
              url: "gpsDiag.php",
              data: "execGpsDiag=1",

              success: function(data) { 
              alert('success');
              jQuery('#results').html(data);

              setInterval(function() { 
                         jQuery('#results').html(data);
              },3000);    
              },
              error: function() {
              //    alert('fail');
              }                               
   });      
}            
});    
</script> 
```

php逻辑文件：

```
if(isset($_POST['execGpsDiag'])) {
    echo system('./gpsdiag.sh');
} 
```

我可能想编辑 bash 文件并删除最后一个 telnet 连接，它是我要监视的连接，并将其移动到`php`逻辑中，如果我们最初没有设置诊断来监视端口

我也尝试过`echo system(telnet 10.10.1.2 1800)` 并尝试`setinterval`自行加载监控端口但无法获得任何结果

如果我从命令行运行`gpsDiag.php`，`echo system(telnet 10.10.1.2 1800)`或者 `echo system('./gpsdiag.sh');`它可以工作并将结果显示到屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:59:22.770

您需要设置超时并在超时回调中调用您的函数。

```
function callGpsDiag(){
  jQuery.ajax({
    type: "POST",
    url: "gpsDiag.php",
    data: "execGpsDiag=1",
    success: function(data){ 
        alert('success');
        jQuery('#results').html(data);

        setTimeout(function(){ 
            callGpsDiag();
        },3000);
     },
     error: function() {
        //alert('fail');
     }
  });  

} 
```

# java - Session 对象中的 ArrayList 似乎丢失了内容

> ID：14901195
> 
> 赞同：0
> 
> 时间：2013-02-15T18:36:01.380
> 
> 标签：java

我在从会话中检索和转换 ArrayList 时遇到问题。我收到以下错误：

```
 javax.servlet.ServletException: java.lang.IndexOutOfBoundsException: Index: 1, Size: 1 
```

我将arrayList存储在会话中：

```
 List<UserApplication> userList = uaDAO.searchUser(eds);
    if (!userList.isEmpty()) {
    request.getSession().setAttribute("userList", userList);
    action_forward = EDITSUCCESS; 
```

并将会话对象转换为 ArrayList，执行以下操作：

```
 EditStudentForm edt = (EditStudentForm)form;
    if ((session.getAttribute("userList")) instanceof List){
    List <UserApplication> studtList = (ArrayList<UserApplication>)session.getAttribute("userList");
    }
    try {
    uaDAO.editUser(edt,studtList);
    action_forward = EDITSUCCESS;
    } 
```

我在 DAO 类中遇到了错误：

```
 public void editUser(EditStudentForm edt,List studtList) throws Exception {
    PreparedStatement pst = null;
    StringBuilder sb = new StringBuilder();
    int stCode =Integer.parseInt(studtList.get(1).toString());  GETTING ERROR HERE
    if (edt.getTitle() != null && !edt.getTitle().equals(studtList.get(2).toString())) {
    sb.append("title = '").append(edt.getTitle()).append("'");
    }
    .
    . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:38:28.540

您明确要求列表中的第 2 个 ( `studtList.get(1)`) 和第 3 个 ( `studtList.get(2)`) 项目，但从未真正确保此列表足够大。此外，您的代码显然甚至无法编译：

```
if ((session.getAttribute("userList")) instanceof List){
  List <UserApplication> studtList = ///...
}
try {
  uaDAO.editUser(edt,studtList); 
```

`studtList`在块中不可访问，语句中的`try`括号也不匹配。`if`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:39:02.647

检查你的`studtList`价值。从错误来看，您似乎`studtList`只包含一个项目，并且您尝试使用此代码获取第二个项目：

```
int stCode =Integer.parseInt(studtList.get(1).toString()); 
```

像这样更改您的代码：

```
 public void editUser(EditStudentForm edt,List studtList) throws Exception {
    PreparedStatement pst = null;
    StringBuilder sb = new StringBuilder();
    if(studtList.size() > 1)
        int stCode =Integer.parseInt(studtList.get(1).toString());  GETTING ERROR HERE
    if (studtList.size() > 2 && edt.getTitle() != null && !edt.getTitle().equals(studtList.get(2).toString())) {
    sb.append("title = '").append(edt.getTitle()).append("'");
    }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T18:41:14.600

在`studtList`没有两个元素并且列表的大小可能是 1 或 0 个元素的情况下，您应该在尝试调用之前检查它`studtList.get(1)`。在`ArrayList`索引中从 0 开始，如果你想获得第一个元素，你应该调用`studtList.get(0)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T18:44:10.610

在这段代码中：

```
 EditStudentForm edt = (EditStudentForm)form;
    if ((session.getAttribute("userList")) instanceof List){
    List <UserApplication> studtList = (ArrayList<UserApplication>)session.getAttribute("userList");
    }
    try {
    uaDAO.editUser(edt,studtList);
    action_forward = EDITSUCCESS;
    } 
```

您创建了一个从未使用过的新变量“studtList”。它的范围只是那一行周围的 { } 对。

在外部范围内必须有另一个具有相同名称的变量 studtList，以便“editUser()”调用可以工作。

*附加说明*

正如其他人所回答的那样，看起来您可能正在执行 .get(1) 并期待数组列表的第一个元素。也许。也许不吧。

# solr - 如果在特定字段中找到查询，Haystack/Solr 会提升结果

> ID：14901196
> 
> 赞同：0
> 
> 时间：2013-02-15T18:36:10.140
> 
> 标签：solr, django-haystack

我们遇到了将非相关结果作为搜索结果最高返回的问题，我们正在尝试改善这种行为，但不确定如何。

我们有大约十几个字段的 SearchIndex。document=True 字段是一个模板支持的字段，我们已将大部分内容放入其中。在那里找到的一些东西比其他东西的相关性要低得多，即使它仍然有用。

举一个具体的例子：如果用户搜索“红玫瑰”，我们希望返回红玫瑰作为最热门的结果......如果较低的结果只是玫瑰或只是红色，甚至被描述为“玫瑰红”，那就更好了“ 彩色。

问题是我们的 document=True 字段有大量被描述为“玫瑰红”的项目。更糟糕的是，实际的红玫瑰没有“红色”和“玫瑰”特别接近，因为这些值将来自不同的领域。结果，我们得到了完全不相关的前几百个结果。

我们想做的是：

A. 搜索主文档，然后搜索我们的每个其他字段并相应地提升（但不是硬过滤）。如果“玫瑰”一词出现在其中一个项目名称中，并且“红色”作为其属性值之一出现，则该结果应该具有更高的分数。这为我们提供了按相关性排序的理论上的最佳结果。

B. 一次搜索所有字段，如果值为任何“提升”字段，则提升。

似乎使用字段提升应该是答案，但我们无法弄清楚如何表达它，因为基于字段的过滤是一种苛刻的排除，我们希望它只影响相关性评分。

这两者的结果实际上是相同的。我们只是无法弄清楚如何使用 Haystack 来完成其中的任何一个。或者，如果我们不得不退回到原始查询，如何编写完成此任务的 solr 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:59:05.867

我可以给你一些指示，因为我没有得到确切的用例：-

您可以检查[Solr edismax 查询解析器](http://lucidworks.lucidimagination.com/display/solr/The+Extended+DisMax+Query+Parser)来配置：-

1.  您要搜索的字段 - 主要用于选择结果
2.  相关性字段的可变提升 - 确定字段的重要性
3.  不同单词组合的可变提升，例如单个单词、短语匹配、带斜率的 shingle 匹配以确定相关性
4.  在其他领域提供额外的推动

这将帮助您过滤结果并根据字段和单词组合匹配相应地对它们进行排序

# php - 加入 GROUP_CONCAT 只返回 1 行

> ID：14901203
> 
> 赞同：1
> 
> 时间：2013-02-15T18:36:34.257
> 
> 标签：php, mysql

我正在尝试返回一个结果集，其中包含来自另一个表的动态字段的分隔列表。它似乎正在工作，但即使我多次复制同一行，结果也只返回一行。

这是我的查询：

```
SELECT export_rules.*, GROUP_CONCAT( CAST( CONCAT( export_rule_fields.key, ': ', export_rule_fields.value ) AS char ) SEPARATOR '|') AS fields FROM export_rules
JOIN export_rule_fields ON export_rules.id = export_rule_fields.export_rule_id
WHERE export_rules.output_type = "email"
AND (export_rules.frequency = "daily" 
    AND export_rules.last_execution < TIMESTAMP(DATE_SUB(NOW(), INTERVAL 1 DAY))
    AND (export_rules.cron_expression = "25 11 * * *" 
        OR export_rules.cron_expression = "30 11 * * *" ))
OR (export_rules.frequency = "weekly" 
    AND export_rules.last_execution < TIMESTAMP(DATE_SUB(NOW(), INTERVAL 1 WEEK))
    AND (export_rules.cron_expression = "25 11 * * 5"
        OR export_rules.cron_expression = "30 11 * * 5" ))
OR (export_rules.frequency = "monthly" 
    AND export_rules.last_execution < TIMESTAMP(DATE_SUB(NOW(), INTERVAL 1 MONTH))
    AND (export_rules.cron_expression = "25 11 15 * *"
        OR export_rules.cron_expression = "30 11 15 * *" ))
GROUP BY export_rules.id 
```

它应该通过其相应的表达式（该部分有效）获取一个 cron 列表，然后将它们与他们的字段一起吐出，但我认为 GROUP_CONCAT 或连接对于每个导出规则都有多行的事实正在抛弃它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:49:37.893

我通过使用 LEFT JOIN 而不是常规 JOIN 解决了​​这个问题。当我之前测试过它时，我没有 GROUP BY export_rules.id。

此问题已解决。

# javascript - 使用 jQuery SVG 更改（或动画）路径

> ID：14901204
> 
> 赞同：2
> 
> 时间：2013-02-15T18:36:35.617
> 
> 标签：javascript, svg, jquery-svg

我创建了一些基于 jQuery SVG 插件的示例代码，该插件沿路径显示文本。现在，当我单击文本时，我想更改路径（例如从 [[50,50],[100,100]] 到 [[50,50],[200,300]]）。我还想知道如何使用动画应用此更改。

```
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script src="jquery.svg.min.js"></script>
    <script src="jquery.svgdom.min.js"></script>
    <script>
      jQuery(function($){
            $('#debugsvg').svg({onLoad: function(svg) {
                var path = svg.createPath();
                var text = svg.text("");
                var defs = svg.defs(); 
                svg.path(defs, path.move(50, 50).line(100, 100),  {id: "myPath"}); 
                svg.textpath(text, '#myPath', "foo bar");
                $(text).click(function(e) {
                    alert("Animate me please!");
                });
            }});
      });
    </script>
  </head>
  <body>
    <div id="debugsvg" style='height="600px", width="600px"'>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:04:48.830

我创建了一些代码来解析路径的“d”属性并用新值替换这个属性，见下文。动画似乎是不可能的，因为只有[某些属性](http://keith-wood.name/svgRef.html%20/%22certain%20attributes%22)可以用 JQuery SVG 动画。

```
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script src="jquery.svg.min.js"></script>
    <script src="jquery.svgdom.min.js"></script>
    <script src="jquery.svganim.min.js"></script>
    <script>
      jQuery(function($){
            $('#debugsvg').svg({onLoad: function(svg) {
                var path = svg.createPath();
                var text = svg.text("");
                var defs = svg.defs(); 
                var path = svg.path(defs, path.move(50, 50).line(100, 100),  {id: "myPath"}); 
                svg.textpath(text, '#myPath', "foo bar");
                $(text).click(function(e) {
                    var d = $(path).attr('d');
                    var re = new RegExp("([^,]+),([^L]+)L([^,]+),([^,]+)", "");
                    var m = d.match(re);
                    var dNew = m[1] + "," + (m[2] - 20) + "L" + m[3] + "," + (m[4] - 40);
                    $(path).attr({d: dNew});
                });
            }});
      });
    </script>
  </head>
  <body>
    <div id="debugsvg" style='height="600px", width="600px"'>
    </div>
  </body>
</html> 
```

# javascript - 如何防止骨干模型收集事件传播？

> ID：14901205
> 
> 赞同：7
> 
> 时间：2013-02-15T18:36:38.103
> 
> 标签：javascript, jquery, backbone.js, backbone-events

如何防止主干模型事件传播到主干集合？

编辑：

假设我有类似以下内容，其中 CollectionView 包含 MyModels 的集合......

```
var CollectionView = Backbone.Collection.Extend({
    initialize: function() {
        this.collection.on("change", doStuff);
    }
});

var ModelView = Backbone.View.Extend({ 
    initialize: function() {
        this.model = new MyModel();
        this.model.on( "change", doStuff );
        this.model.fetch();
    }
}); 
```

如果在特殊情况下我不希望“更改”事件在 fetch 完成后传播到集合，我想知道是否有任何方法可以阻止它。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T19:25:19.287

要防止模型触发更改事件：

```
model.set(attrs, {silent: true}); 
```

但是，这可能不是您想要的，因为这也会阻止模型的更改事件触发。

集合通过所有模型事件，但您可以做的是传递额外的选项，这些选项也将通过：

```
model.set(attrs, {dontBubble: true}); 
```

在您的 CollectionView 中：

```
var CollectionView = Backbone.View.extend({
  this.initialize = function() {
    this.collection.on('change', doStuff, this);
  },
  this.doStuff = function(model, collection, options) {
    if (options.dontBubble) {
      return;
    }
    // Do some stuff.
  }
}); 
```

当然，这有点难看，但这是解决问题的一种方法。

# php - PHP 取消设置所有键

> ID：14901209
> 
> 赞同：1
> 
> 时间：2013-02-15T18:36:59.303
> 
> 标签：php, arrays, unset

我的问题可能看起来很基本，但仍然无法弄清楚如何解决这个问题。

考虑一系列我最喜欢的水果

```
$array = array("Banana","Rasberry","Blackberry") 
```

我希望清除此数组，以便删除所有键和值。我的数组会是空的，就像我写的一样

```
$array = array(); 
```

然后，我可以输入`array_push`一些新数据。

我以为我可以，`array_walk($array, unset($array[$key])`但它不能正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T18:38:49.230

您的问题包括适合您情况的最佳解决方案：

```
 $array = array(); 
```

这是使`$array`变量指向空数组的最快方法。

# hibernate - org.hibernate.PropertyAccessException：具有多对多关系

> ID：14901210
> 
> 赞同：0
> 
> 时间：2013-02-15T18:37:01.737
> 
> 标签：hibernate, jpa, many-to-many

我在为多对多关系（用户和消息表）建立新表（用户消息）时遇到了问题。当我尝试从映射表中访问一行时，出现异常：`org.hibernate.PropertyAccessException: could not get a field value by reflection getter of com.package.model.User.userid`

UserMessage 实体对于进一步向关系表添加属性是必需的。

数据通过以下方式访问：

```
 Session session = (Session) entityManager.getDelegate();
    String hql = "FROM Message M, UserMessage UM WHERE M.messageid = UM.pk.message and UM.pk.user = :id";
    Query query = session.createQuery(hql);
    query.setParameter("id", id);
    query.list(); 
```

我的课程：

**用户.java**

```
@Entity
@Table(name = "USER")
public class User {
    @Id @GeneratedValue(generator="system-uuid")
    @GenericGenerator(name="system-uuid", strategy = "uuid")
    @Column(nullable = false)
    private Long userid;

    @Column(unique = true, nullable = false)
    private String username;

    @OneToMany(fetch = FetchType.EAGER, mappedBy = "pk.user", cascade = {CascadeType.PERSIST})
    private Set<UserMessage> inbox = new HashSet<UserMessage>();

    public User() {
    }

    public Long getUserid() {
        return userid;
    }

    public void setUserid(Long id) {
        this.userid = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public Set<UserMessage> getInbox() {
        return inbox;
    }

    public void setInbox(Set<UserMessage> inbox) {
        this.inbox = inbox;
    }

    public void addMessageToUser(Message message){
        UserMessage userMessage = new UserMessage();
        userMessage.setUser(this);
        userMessage.setMessage(message);
        inbox.add(userMessage);
    }
} 
```

**消息.java**

```
@Entity
@Table(name = "MESSAGE")
public class Message {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long messageid;
    private String subject;
    private String body;

    @OneToMany(fetch = FetchType.EAGER, mappedBy = "pk.message",cascade = {CascadeType.PERSIST})
    private Set<UserMessage> toUser = new HashSet<UserMessage>();

    public Set<UserMessage> getToUser() {
        return toUser;
    }

    public void setToUser(Set<UserMessage> toUser) {
        this.toUser = toUser;
    }

    public void addUserToMessage(User user){
        UserMessage userMessage = new UserMessage();
        userMessage.setUser(user);
        userMessage.setMessage(this);
        toUser.add(userMessage);
    }

    public Message() {
    }

    public Long getMessageid() {
        return messageid;
    }

    public void setMessageid(Long id) {
        this.messageid = id;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public String getBody() {
        return body;
    }

    public void setBody(String body) {
        this.body = body;
    }
} 
```

**用户消息.java**

```
@Entity
@Table(name = "USER_MESSAGE")
@AssociationOverrides({
        @AssociationOverride(name = "pk.user", joinColumns = @JoinColumn(name = "userid")),
        @AssociationOverride(name = "pk.message", joinColumns = @JoinColumn(name = "messageid"))
})
public class UserMessage{

    @EmbeddedId
    private UserMessagePK pk = new UserMessagePK();

    public UserMessagePK getPk(){
        return pk;
    }

    public void setPk(UserMessagePK pk){
        this.pk = pk;
    }

    public UserMessage(){
    }

    @Transient
    public User getUser(){
        return this.pk.getUser();
    }

    @Transient
    public Message getMessage(){
        return this.pk.getMessage();
    }

    public void setUser(User user){
        this.pk.setUser(user);
    }

    public void setMessage(Message message){
        this.pk.setMessage(message);
    }
} 
```

**用户消息PK.java**

```
@Embeddable
public class UserMessagePK implements Serializable {

    private static final long serialVersionUID = 1L;

    @ManyToOne
    private User user;

    @ManyToOne(cascade = CascadeType.REFRESH)
    private Message message;

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public Message getMessage() {
        return message;
    }

    public void setMessage(Message message) {
        this.message = message;
    }

    public UserMessagePK(User user, Message message){
        this.user = user;
        this.message = message;
    }

    public UserMessagePK(){
    }
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:08:47.737

问题出在查询中。

`select distinct M from Message M join M.toUser t where t.pk.user = :user`完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:17:28.473

我会建议一种不同的方法。在 User 类中，不要持有一组 UserMessage，而是这样写：

```
@Entity
@Table(name = "Users")
public class User implements Serializable {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "User_Id")
private Long userid;

@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true)
@JoinTable(name = "USER_MESSAGE", joinColumns = @JoinColumn(name = "User_Id"), inverseJoinColumns = @JoinColumn(name = "Message_Id"))
protected Set<Message> userMessages = new HashSet<>(0);

public void addUserMessage(Message toAdd) {
if (null != toAdd) {
    this.userProviders.add(toAdd);
}
}

public void getUserMessages() {
return this.userMessages;
}

public void setUserMessages(Set<Message> userMessages) {
this.userMessages.clear();
this.userMessages.addAll(userMessages);
}

// add getter and setter to id 
```

...

在 Message 类中，您应该具有：

```
@Entity
@Table(name = "User_Messages")
public class Message implements Serializable {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "Message_Id")
protected long id;

@ManyToOne(fetch = FetchType.LAZY)
@JoinTable(name = "Users_Messages", joinColumns = @JoinColumn(name = "Message_Id", insertable = false, updatable = false), inverseJoinColumns = @JoinColumn(name = "User_Id"))
protected User user;

// add getters and setters
... 
```

您也可以摆脱 UserMessagePK 类和 UserMessage （为什么需要这些？）。现在，当您生成表时（您可以使用[hbm2ddl 工具](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/toolsetguide.html)），您应该有一个用于 User<-->Message 关系的连接表。

现在您可以运行查询了。

# ruby-on-rails - “新”渲染重定向到意外的 URL

> ID：14901214
> 
> 赞同：0
> 
> 时间：2013-02-15T18:37:16.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的应用程序有一个页面，允许用户通过表单向我发送电子邮件（不公开我的地址）。它与电子邮件控制器相关联，并且是#new 操作，我将其重新路由到“/contact”。

奇怪的是，如果电子邮件由于任何原因没有发送（用户将字段留空或我输入的数学验证码失败），当控制器再次呈现“新”时，URL 变为“/电子邮件”。我根本想不通这个。一些相关代码：

```
#emails_controller.rb

require 'math_captcha'

class EmailsController < ApplicationController

    def new
    @captcha = MathCaptcha.new
    @email = Email.new
  end

    def create
    @captcha = MathCaptcha.decrypt(params[:captcha_secret])
    @email = Email.new(params[:email])

    unless @captcha.correct?(params[:captcha]) || params[:captcha] == "21261"
        flash.now[:error] = "Please make sure you answered the math question correctly."
        render :new
    else
      if @email.save
        Contact.contact_message(@email).deliver
        flash[:success] = "Your email has sent! I'll try to get back to you shortly."
        redirect_to root_path
      else
        flash.now[:error] = "Please correct the highlighted errors and try again."
        render :new
      end
    end

    end

end 
```

和：

```
#routes.rb

resources :users, :posts, :sessions, :emails

#...

match '/contact', to: 'emails#new', as: 'contact' 
```

在我添加“作为联系人”以尝试修复它之前，同样的问题也存在。有任何想法吗？

编辑——根据垃圾收集的请求（抱歉耽搁了；我有一段时间没靠近我的电脑了），这是用于导航到 /contact 并提交不成功的电子邮件尝试的开发日志（刷新并将 URL 更改为 /emails ):

```
Started GET "/contact" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Processing by EmailsController#new as HTML
  Rendered emails/new.html.erb within layouts/application (1.5ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered layouts/_header.html.erb (2.0ms)
Completed 200 OK in 20ms (Views: 19.5ms | ActiveRecord: 0.1ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /application.css - 304 Not Modified (2ms)

Started GET "/assets/custom.css?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /custom.css - 304 Not Modified (2ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /jquery_ujs.js - 304 Not Modified (0ms)

Started GET "/assets/angular.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /angular.js - 304 Not Modified (0ms)

Started GET "/assets/pygments.css?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /pygments.css - 304 Not Modified (0ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /jquery.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-transition.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-transition.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-affix.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-affix.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-alert.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-alert.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-button.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-button.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-carousel.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-carousel.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-collapse.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-collapse.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-modal.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-modal.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-dropdown.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-dropdown.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-scrollspy.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-scrollspy.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-popover.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-popover.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-tab.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-tab.js - 304 Not Modified (46ms)

Started GET "/assets/bootstrap-typeahead.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-typeahead.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-tooltip.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /bootstrap-tooltip.js - 304 Not Modified (0ms)

Started GET "/assets/emails.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /emails.js - 304 Not Modified (0ms)

Started GET "/assets/posts.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /posts.js - 304 Not Modified (0ms)

Started GET "/assets/expand.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /expand.js - 304 Not Modified (0ms)

Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /sessions.js - 304 Not Modified (0ms)

Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /users.js - 304 Not Modified (0ms)

Started GET "/assets/statics.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /statics.js - 304 Not Modified (0ms)

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:40 -1000
Served asset /application.js - 304 Not Modified (0ms)

Started GET "/posts.json" for 127.0.0.1 at 2013-02-16 08:46:41 -1000
Processing by PostsController#index as JSON
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" 
Completed 200 OK in 7ms (Views: 3.3ms | ActiveRecord: 0.4ms)

Started GET "/assets/sign_out.png" for 127.0.0.1 at 2013-02-16 08:46:41 -1000
Served asset /sign_out.png - 304 Not Modified (0ms)

Started POST "/emails" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Processing by EmailsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hjd4q/tvu6IhqpdC7rPMkS21s0GTiqILqOA8ZkLKXsk=", "email"=>{"name"=>"", "address"=>"", "subject"=>"", "content"=>""}, "captcha_secret"=>"xmuKN1l8HVyPlbsfymoVWTieuFYYO3qcXoUUawh8vyw=\r\n", "captcha"=>"", "commit"=>"Send"}
  Rendered emails/new.html.erb within layouts/application (1.7ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered layouts/_header.html.erb (2.5ms)
Completed 200 OK in 25ms (Views: 22.0ms | ActiveRecord: 0.1ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /application.css - 304 Not Modified (2ms)

Started GET "/assets/pygments.css?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /pygments.css - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-transition.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-transition.js - 304 Not Modified (0ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /jquery_ujs.js - 304 Not Modified (0ms)

Started GET "/assets/angular.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /angular.js - 304 Not Modified (0ms)

Started GET "/assets/custom.css?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /custom.css - 304 Not Modified (1ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /jquery.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-affix.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-affix.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-button.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-button.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-alert.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-alert.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-carousel.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-carousel.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-modal.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-modal.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-collapse.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-collapse.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-dropdown.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-dropdown.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-scrollspy.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-scrollspy.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-tooltip.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-tooltip.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-tab.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-tab.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-typeahead.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-typeahead.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap.js - 304 Not Modified (0ms)

Started GET "/assets/bootstrap-popover.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /bootstrap-popover.js - 304 Not Modified (0ms)

Started GET "/assets/expand.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /expand.js - 304 Not Modified (0ms)

Started GET "/assets/emails.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /emails.js - 304 Not Modified (0ms)

Started GET "/assets/posts.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /posts.js - 304 Not Modified (0ms)

Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /users.js - 304 Not Modified (0ms)

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /application.js - 304 Not Modified (1ms)

Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /sessions.js - 304 Not Modified (0ms)

Started GET "/assets/statics.js?body=1" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /statics.js - 304 Not Modified (0ms)

Started GET "/posts.json" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Processing by PostsController#index as JSON
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" [0m
Completed 200 OK in 5ms (Views: 2.3ms | ActiveRecord: 0.3ms)

Started GET "/assets/sign_out.png" for 127.0.0.1 at 2013-02-16 08:46:44 -1000
Served asset /sign_out.png - 304 Not Modified (0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:14:31.310

由于您刚刚发布到该网址，因此预计会在地址栏中显示“/电子邮件”。如果你真的想显示 '/contact'，你应该为 POST 设置一个路由，比如：

获取 '/contact'，到：'emails#new' 发布 '/contact'，到：'emails#create'

也许还有另一种更简洁的方法，但这应该可行。

# c++ - 从静态函数访问静态变量

> ID：14901217
> 
> 赞同：12
> 
> 时间：2013-02-15T18:37:28.207
> 
> 标签：c++, oop, class, static

我的函数是静态的，这一点非常重要，我需要访问和修改另一个静态/非静态类成员以便稍后打印出来。我怎样才能做到这一点？

## 流动

*   开始上课
*   构造函数将变量设置为使用必须是静态的内部函数的东西
*   一段时间后，我打印该变量

## 示例代码

```
#include <iostream>

class MyClass
{
public:
    static int s;
    static void set()
    {
        MyClass::s = 5;
    }

    int get()
    {
        return MyClass::s;
    }

    MyClass()
    {
        this->set();
    }
};

void main()
{
    auto a = new MyClass();

    a->set(); // Error

    std::cout << a->get() << std::endl; // Error

    system("pause");
} 
```

## 错误

```
LNK2001: unresolved external symbol "public: static int MyClass::s" (?s@MyClass@@2HA)
LNK1120: 1 unresolved externals 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T18:40:37.070

您已经**声明**了静态变量，但尚未**定义**它。

非静态成员变量在创建和销毁包含对象时创建和销毁。

然而，静态成员需要独立于对象创建而创建。

添加此代码以创建 int `MyClass::s`：

```
int MyClass::s; 
```

**附录：**

C++17 增加了[内联变量](http://en.cppreference.com/w/cpp/language/inline)，允许你在代码中进行更小的改动：

```
static inline int s;  // You can also assign it an initial value here
       ^^^^^^ 
```

# vb.net - 命名空间 - 逻辑分组类

> ID：14901219
> 
> 赞同：2
> 
> 时间：2013-02-15T18:37:31.097
> 
> 标签：vb.net, design-patterns, namespaces

我了解如何对类进行物理分组，即继承、组合等。但是，我从未真正理解命名空间的好处（类的逻辑分组）。我通常有一个表示层的名称空间，一个业务逻辑层的名称空间和一个数据访问层的名称空间，即：

```
com.Application.BusinessLogicLayer  
com.Application.PresentationLayer
com.Application.DataAccessLayer 
```

有时表示层会有多个应用程序，例如 VB.NET 应用程序和 ASP.NET 应用程序。有时业务逻辑层会被拆分为多个 DLL。

我可以回答关于什么是命名空间的考试问题，但我很难将知识应用到问题领域。例如，看看下面的代码：

```
Namespace com.application.businesslogiclayer
    Public Class ClassA
        Private CB As ClassB
    End Class
End Namespace
Namespace com.application.businesslogiclayer
    Public Class ClassB
        Private CC As ClassC
    End Class
End Namespace

Namespace com.application.businesslogiclayer
    Public Class ClassC

    End Class
End Namespace 
```

由于 ClassA 与 ClassB 有组合关系，而 ClassB 与 ClassC 有组合关系，所以我相信它们都应该属于同一个命名空间，例如

> com.application.businesslogiclayer.classABC

. 但是，您可以使用“导入”语句引入其他类，所以这可能是不正确的。

开发人员在设计命名空间时使用什么标准？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T18:46:41.720

命名空间不仅可用于对类型进行逻辑分组，还可用于避免类型之间的命名冲突，因为命名空间也是完整类型名称的一部分。例如，您的应用程序中可能有一个名为 Log 的类，但您还引用了由其他人编写的另一个程序集，该程序集也有一个名为 Log 的类。在某些实现中使用这两个 Log 类可能有一个实际的原因（即因为它们执行不同类型的日志记录，或者一个用于记录信息，另一个表示树的一部分）并且命名空间允许编译器区分这两个 Log类。不要低估使用命名空间进行分组的有用性，因为这在大型项目中变得更加重要。

就标准而言，从单个命名空间开始。随着应用程序的发展，您可能希望使用两个或多个嵌套命名空间来整理单个命名空间，以更好地组织代码，也许要折叠一些您当前不在 IDE 中处理的代码以使其不碍事，但分组应该合乎逻辑且有意义。在 .NET 中，请遵循基类库中命名空间的设计指南和示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:51:30.030

我建议阅读[类库开发设计指南的](http://msdn.microsoft.com/en-us/library/vstudio/ms229042%28v=vs.100%29.aspx)[类型和命名空间](http://msdn.microsoft.com/en-us/library/vstudio/ms229050%28v=vs.100%29.aspx)页面。这详细说明了何时应使用命名空间，并提供一般指导。

通常，将您的类型组织到单独的命名空间中，其中相关的功能被分组到一个命名空间中，这有助于保持您的项目井井有条。

在您的情况下，您可能希望将所有主要业务逻辑放入一个命名空间，但将您的表示逻辑分离到它自己的命名空间中。这在很多方面都有帮助，包括允许编译器帮助防止您混淆关注点（如果不显式添加 Import 语句，您不能使用错误的类）。

这也有助于避免类型名称冲突，因此您可以在每个问题区域内使用简单、干净、易于理解的名称。

# wordpress - 为什么 apache 拥有的文件是由 wordpress 创建的？

> ID：14901223
> 
> 赞同：3
> 
> 时间：2013-02-15T18:37:52.413
> 
> 标签：wordpress, apache, permissions, ftp

我不时遇到这个问题，我使用主机给我的 FTP 帐户并在 Wordpress FTP 中使用它们。但是由于某些原因，例如在更新主题时，新主题是在 apache/apache 而不是 user/psacln 用户名/组下创建的。所以那时我不能删除这些文件或对这些文件做任何事情，因为我在 psacln 组下。

我想了解更多关于为什么会发生这种情况以避免这个问题 - 欢迎任何建议！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:49:52.527

当您通过 wordpess 管理页面（如主题）上传文件时，以 apache 用户身份运行的 httpd 进程实际上是在您的系统上创建它们 - 因此它们归 apache 用户所有。我建议使用此选项来解决此问题：

1.  将您自己和 apache 添加到一个名为“wordpress”的新组中
2.  用于将您的 wordpress 的组所有权更改为新组
3.  使用设置 sgid 权限位和组对 wordpress docroot 中所有目录的写入权限。

sgid 位的设置将使添加到目录中的所有文件成为同一组所有者。

假设您已将自己和 apache 添加到同一个组，这里是用于设置目录以确保创建的文件对 wordpress 组中的所有人可写的 linux 命令：

```
chown -R :wordpress /path/to/wordpress/docroot/ 
chmod  -R g+w /path/to/wordpress/docroot/
find  /path/to/wordpress/docroot/ -type d -print | while read i; do SAVEIFS=$IFS; IFS=$(echo -en "\n\b");chmod g+s $i; IFS=$SAVEIFS; done 
```

**可能需要的其他东西：**

如果您看到 apache 在没有写入的情况下创建具有组权限的文件，您可能需要更改 apache 用户的默认 umask 以创建新文件。默认情况下，它应该是允许所有者和组写入的，但我知道某些帐户（如 root 用户）将默认 umask 设置为组只读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:43:51.443

因为 apache 的子进程在 apache 的用户 ID 下运行，并且 unix 系统上的“普通用户”不能使文件归某个 OTHER 用户所有。只有 root 帐户可以“放弃”所有权。

为什么？对于普通用户来说，创建一个由 root 拥有或由另一个用户拥有的文件是微不足道的。如果给定系统以用户配额运行，这将允许用户完全破坏配额，或者通过“给”他们一堆大文件并超过该用户的配额来拒绝其他人访问。

如果您需要访问这些文件，无论 unix 所有权如何，您都可以考虑使用 POSIX acls，它存在于/超出 unix 权限。

# c# - 使用带有 tmp 扩展名的 chrome 读取有效的格式化 html 本地文件

> ID：14901224
> 
> 赞同：1
> 
> 时间：2013-02-15T18:37:53.500
> 
> 标签：c#, html, google-chrome

我有一个带有临时扩展名 (.tmp) 的本地文件，其中包含有效的 HTML 代码。我想允许 chrome 将此文件作为基本 HTML 文件读取。当我使用 chrome 加载此文件时（例如：file:///C:/file.tmp），chrome 将其作为文本文件读取。我正在使用当前的 chromium 命令列表：http: [//peter.sh/experiments/chromium-command-line-switches/](http://peter.sh/experiments/chromium-command-line-switches/) 但找不到哪个命令（如果存在？）可以让我做我想做的事。

这个问题与 csharp 无关，但我正在使用网络应用程序来加载文件，这里是代码：

```
 var url = localFilePathUri; //e.g: file:///C:/file.tmp
 string args = "--kiosk --allow-file-access " + url;
 var test = System.Diagnostics.Process.Start("chrome.exe", args); 
```

我可以重命名本地文件以使用 .html 作为扩展名，但我想知道是否存在更直接的方法？

谢谢！

# sql - 根据位置区域的变化计算平均时间花费

> ID：14901230
> 
> 赞同：0
> 
> 时间：2013-02-15T18:38:42.907
> 
> 标签：sql, sql-server

我有一张类似于

```
create table LOCHIST
(
  RES_ID VARCHAR(10) NOT NULL,
  LOC_DATE TIMESTAMP NOT NULL,
  LOC_ZONE VARCHAR(10)
) 
```

具有诸如

```
insert into LOCHIST values(0911,2015-09-23 12:27:00.000000,SYLVSYLGA);
insert into LOCHIST values(5468,2013-02-15 13:13:24.000000,30726);
insert into LOCHIST values(23894,2013-02-15 13:12:13.000000,BECTFOUNC);
insert into LOCHIST values(24119,2013-02-15 13:12:09.000000,30363);
insert into LOCHIST values(7101,2013-02-15 13:11:37.000000,37711);
insert into LOCHIST values(26083,2013-02-15 13:11:36.000000,SHAWANDAL);
insert into LOCHIST values(24978,2013-02-15 13:11:36.000000,38132);
insert into LOCHIST values(26696,2013-02-15 13:11:27.000000,29583);
insert into LOCHIST values(5468,2013-02-15 13:11:00.000000,37760);
insert into LOCHIST values(5552,2013-02-15 13:10:55.000000,30090);
insert into LOCHIST values(24932,2013-02-15 13:10:48.000000,JBTTLITGA);
insert into LOCHIST values(23894,2013-02-15 13:10:42.000000,47263);
insert into LOCHIST values(26803,2013-02-15 13:10:25.000000,32534);
insert into LOCHIST values(24434,2013-02-15 13:10:03.000000,PLANSUFVA);
insert into LOCHIST values(26696,2013-02-15 13:10:00.000000,GEORALBGA);
insert into LOCHIST values(5468,2013-02-15 13:09:54.000000,19507);
insert into LOCHIST values(23894,2013-02-15 13:09:48.000000,37725); 
```

该表实际上包含数百万条记录。

每个 RES_ID 代表拖车的 ID，该拖车将其位置 ping 到 LOC_ZONE，然后将其存储在当时的 LOC_DATE 中。

我试图找到的是特定位置区域中所有预告片花费的平均时间。例如，如果拖车 x 在本地区域 PLANSUFVA 中呆了 4 小时，而拖车 y 在本地区域 PLANSUFVA 中呆了 6 小时，我想返回

```
Loc Zone  Avg Time  
PLANSUFVA   5 
```

无论如何，没有游标可以做到这一点吗？

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:47:05.740

这需要 SQL 2012：

```
with data
as (
      select *, (case when LOC_ZONE != PREVIOUS_LOC_ZONE or PREVIOUS_LOC_ZONE is null then ROW_ID else null end) as STAY_START, (case when LOC_ZONE != NEXT_LOC_ZONE or NEXT_LOC_ZONE is null then ROW_ID else null end) as STAY_END
      from (
            select RES_ID, LOC_ZONE, LOC_DATE, lead(LOC_DATE, 1) over (partition by RES_ID, LOC_ZONE order by LOC_DATE) as NEXT_LOC_DATE, lag(LOC_ZONE, 1) over (partition by RES_ID order by LOC_DATE) as PREVIOUS_LOC_ZONE, lead(LOC_ZONE, 1) over (partition by RES_ID order by LOC_DATE) as NEXT_LOC_ZONE, ROW_NUMBER() over (order by RES_ID, LOC_ZONE, LOC_DATE) as ROW_ID
            from LOCHIST
      ) t
), stays  as (
      select * from (
            select RES_ID, LOC_ZONE, STAY_START, lead(STAY_END, 1) over (order by ROWID) as STAY_END
            from (
                  select RES_ID, LOC_ZONE, STAY_START, STAY_END, ROW_NUMBER() over (order by RES_ID, LOC_ZONE, STAY_START desc) as ROWID
                  from data
                  where STAY_START is not null or STAY_END is not null 
            ) t
      ) t
      where STAY_START is not null and STAY_END is not null
)
select s.LOC_ZONE, avg(datediff(second, LOC_DATE, NEXT_LOC_DATE)) / 60 / 60 as AVG_IN_HOURS
from data d
inner join stays s on d.RES_ID = s.RES_ID and d.LOC_ZONE = s.LOC_ZONE and d.ROW_ID >= s.STAY_START and d.ROW_ID < s.STAY_END
group by s.LOC_ZONE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:46:04.843

要解决此问题，您需要在每个位置花费的时间量。

一种方法是使用相关子查询。您需要对相邻值进行分组。这个想法是找到序列中的下一个值：

```
select resid, min(loc_zone) as loc_zone, min(loc_date) as StartTime,
       max(loc_date) as EndTime,
       nextdate as NextStartTime
from (select lh.*,
             (select min(loc_date) from lochist lh2
              where lh2.res_id = lh.res_id and lh2.loc_zone <> lh.loc_zone and
                    lh2.loc_date > lh.loc_date
             ) as nextdate
      from lochist lh
     ) lh
 group by lh.res_id, nextdate 
```

有了这些数据，你就可以得到你想要的平均值。

我不清楚时间应该基于`EndTime - StartTime`（该位置的最后记录时间减去第一次记录的时间）还是`NextStartTime - startTime`（下一个位置的第一次减去该位置的第一次）。

此外，这将为 each 的最后一个位置返回 NULL `res_id`。你没有说如何处理序列中的最后一个。

如果在 上构建索引`res_id, loc_date, loc_zone`，它可能会运行得更快。

如果您有 Oracle 或 SQL Server 2012，正确的查询是：

```
select lh.*,
       lead(loc_date) over (partition by res_id order by loc_date) as nextdate
from (select lh.*,
             lag(loc_zone) over (partition by res_id order by loc_date) as prevzone
      from lochist lh
     ) lh
where prevzone is null or prevzone <> loc_zone 
```

现在您每次住宿都有一行，nextdate 是下一个区域的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:02:57.933

这应该让您按照在其中花费的平均分钟数对每个区域进行排序。返回另一个区域中的`CROSS APPLY`下一个 ping。

```
SELECT
     loc.LOC_ZONE
    ,AVG(DATEDIFF(mi,loc.LOC_DATE,nextPing.LOC_DATE)) AS avgMinutes
FROM LOCHIST loc
CROSS APPLY(
    SELECT TOP 1 loc2.LOC_DATE
    FROM LOCHIST loc2
    WHERE loc2.RES_ID = loc.RES_ID
    AND loc2.LOC_DATE > loc.LOC_DATE
    AND loc2.LOC_ZONE <> loc.LOC_ZONE
    ORDER BY loc2.LOC_DATE ASC
) AS nextPing
GROUP BY loc.LOC_ZONE
ORDER BY avgMinutes DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T19:54:29.093

我的解决方案变体：

```
select LOC_ZONE, avg(TOTAL_TIME) AVG_TIME from (
    select RES_ID, LOC_ZONE, sum(TIME_SPENT) TOTAL_TIME
    from (
        select RES_ID, LOC_ZONE, datediff(mi, lag(LOC_DATE, 1) over (
            partition by RES_ID order by LOC_DATE), LOC_DATE) TIME_SPENT
        from LOCHIST
    ) t
    where TIME_SPENT is not null
    group by RES_ID, LOC_ZONE) f
group by LOC_ZONE 
```

这说明了在同一地点的多次住宿。`lag`之间的选择`lead`取决于逗留应该以 ping 开始还是结束（即，如果一个拖车从 A 发送 ping，然后 x 小时后从 B 发送 ping，这对 A 或 B 算吗）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T18:57:11.493

要在不使用游标或相关子查询的情况下执行此操作，请尝试：

```
with rl as
(select l.*, rank() over (partition by res_id order by loc_date) rn
 from lochist l),
fdr as
(select rc.*, coalesce(rn.loc_date, getdate()) next_date
 from rl rc
 left join rl rn on rc.res_id = rn.res_id and rc.rn + 1 = rn.rn)
select loc_zone, avg(datediff(second, loc_date, next_date))/3600 avg_time
from fdr
group by loc_zone 
```

[SQLFiddle 在这里。](http://sqlfiddle.com/#!3/19f72/3)

（由于 SQLServer 计算时间差的方式，最好以秒为单位计算平均时间，然后除以 60*60。除了 getdate() 和 datediff 子句 - 可以替换为`sysdate`and `next_date - loc_date`- 这应该可在 SQLServer 2005 及更高版本和 Oracle 10g 及更高版本中工作。）

# android - 在应用程序最小化时打开/关闭手电筒

> ID：14901236
> 
> 赞同：2
> 
> 时间：2013-02-15T18:39:10.723
> 
> 标签：android, android-camera, android-service

在我的应用程序中，我有一个活动和一个服务。该服务持续管理一些数据。在某些情况下，服务会向 Activity 发送广播请求以打开手电筒。

这很好用。但是，当应用程序最小化（手动或通过来电）时，它不起作用。一旦我将应用程序带回前面，它就会再次开始工作。

当我观察日志时，我看到当应用程序最小化时服务仍在运行。但是，由于活动不再存在，因此无法访问相机对象来激活手电筒。但是日志中没有错误。

为什么手电筒没有启动？应用最小化时如何激活手电筒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:00:12.193

只有前台活动才能持有相机。从谷歌文档：

> “如果您的应用程序没有正确释放摄像头，那么所有后续访问摄像头的尝试，包括您自己的应用程序的尝试，都将失败，并可能导致您或其他应用程序被关闭。”

您可以尝试在服务上声明它，但我怀疑这不会很好。它只是真的不是为了这样工作而设计的。

# c# - 使用 ObservableCollection 绑定到 ItemSource 的列表框问题

> ID：14901239
> 
> 赞同：2
> 
> 时间：2013-02-15T18:39:22.677
> 
> 标签：c#, wpf, binding, listbox

我无法绑定到列表框控件的 ItemsSource。当用户执行某些操作时，我希望能够将文本行添加到列表框中。

SystemControls.xmal 代码：

```
<ListBox Grid.Column="4"  Grid.Row="1" Grid.RowSpan="9" ItemsSource="{Binding ListBoxInput}" Height="165" HorizontalAlignment="Left" Name="listBox1" VerticalAlignment="Top" Width="250" ></ListBox> 
```

SystemControls.xmal.cs 代码片段：

```
public partial class SystemControls : UserControl, ISystemControls
{
    IDriver _Driver;
    ISystemControls_VM _VM;
    public SystemControls(IDriver InDriver, ISystemControls_VM InVM)
    {
        _VM = InVM;
        _Driver = InDriver;
        DataContext = new SystemControls_VM(_Driver);
        InitializeComponent();
    } 
```

SystemControls_VM.cs 这应该是问题的核心所在。我已经让它在构造函数中工作，当我稍后尝试在代码中添加行时，例如当用户按下按钮时，它什么也不做：

```
public class SystemControls_VM:ViewModelBase, ISystemControls_VM
{
    IDriver _Driver;
    public ObservableCollection<string> _ListBoxInput = new ObservableCollection<string>();

    public SystemControls_VM(IDriver InDriver)
    {
        _Driver = InDriver;

        ListBoxInput.Add("test");//Works here
    }

    public ObservableCollection<string> ListBoxInput
    {
        get 
        { 
            return _ListBoxInput; 
        }
        set
        {
            _ListBoxInput = value;
            //OnPropertyChanged("ListBoxInput");
        }
    }

    public void OnButtonClickGetNextError()
    {
        ListBoxInput.Add("NextErrorClicked");//Does not work here                
    }

    public void OnButtonClickClear()
    {
        ListBoxInput.Clear();//Or Here
    } 
```

如果需要 OnPropertyChangedEventHandler：

```
namespace XXX.BaseClasses.BaseViewModels
{
    /// <summary>
    /// Provides common functionality for ViewModel classes
    /// </summary>
    public abstract class ViewModelBase : INotifyPropertyChanged
    {
    public event PropertyChangedEventHandler PropertyChanged = delegate{};

    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:09:58.700

1)~~您的公共属性称为**_ListBoxInput**但您绑定到**ListBoxInput** (no underscore)~~。将 _ListBoxInput 设为私有。

2) 因为该集合已经是可观察的，所以您不需要 OnPropertyChanged 来更新您的列表框。

3) 看起来您管理公共与私有 ListBoxInput 集合的方式可能有些问题。您在公共属性上调用 .Add （这将立即在可观察集合上引发事件），但最终您也会将其添加到私有集合中，然后您在公共属性上调用 PropertyChanged。令人困惑：在下面尝试我的代码，看看它是如何工作的。（请注意，在构造函数中添加到 _ListBoxInput，但在按钮单击事件中添加到 ListBoxInput。）

4) 尝试在构造函数中添加 this.DataContext = this

 `````
public partial class MainWindow : Window {

    public ObservableCollection<string> ListBoxInput { get; private set; }

    public MainWindow() {
       InitializeComponent();
       this.ListBoxInput = new ObservableCollection<string>();
       this.DataContext = this;
    }

    private void AddListBoxEntry_Click(object sender, RoutedEventArgs e) {
       this.ListBoxInput.Add("Hello " + DateTime.Now.ToString());
    }
} 
````  `在 xaml 中，看看[binding Mode](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingmode.aspx)。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition/>
    </Grid.RowDefinitions>

    <ListBox ItemsSource="{Binding ListBoxInput, Mode=OneWay}"
             Height="165" HorizontalAlignment="Left" 
             Name="listBox1" VerticalAlignment="Top" Width="250"  />

    <Button Grid.Column="1" Grid.Row="0" Name="AddListBoxEntry" 
             Margin="0,0,0,158" Click="AddListBoxEntry_Click" >
             <TextBlock>Add</TextBlock>
   </Button>
</Grid> 
```

5）在单独的说明中，这是您可以执行 INotifyPropertyChanged 的​​另一种方法（我发现这个更清洁）

```
public abstract class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged = delegate{};

    protected void OnPropertyChanged(string propertyName)
    {
          PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:39:19.360

所以从另一个来源得到了答案，但我想我会在这里发布以供参考。

所以发生的事情是，我正在将数据上下文设置为 SystemControls_VM 的一个实例，而处理按钮单击的 _VM 引用将转到 SystemControls_VM 的另一个实例。这也是为什么看起来按钮单击正在工作并且正在填充列表但没有数据进入控件本身的原因

我更改了以下代码部分，它可以工作：

```
public partial class SystemControls : UserControl, ISystemControls
{
    IDriver _Driver;
    SystemControls_VM _VM;
        public SystemControls(IDriver InDriver, SystemControls_VM InVM)
        {
            _VM = InVM;
            _Driver = InDriver;
            DataContext = InVM;//new SystemControls_VM(_Driver);
            InitializeComponent();
        } 
`````

# java - 将图像动态设置为 ImageView

> ID：14901242
> 
> 赞同：0
> 
> 时间：2013-02-15T18:39:34.583
> 
> 标签：java, android, imageview, dynamically-generated

如果这是一个重复的帖子，请原谅我，但我试过了，但找不到关于这个主题的任何内容。我在布局中有一个空白的 ImageView，现在我想在其中动态放置一个图像。既然有

```
TextView txt = (TextView) findViewById(R.id.textView1);
txt.setText("my text"); 
```

有没有办法像为 TextView 那样为 ImageView 做这件事？

IE...

```
ImageView image = (ImageView) v.findViewById(R.id.pPicture);
image.setImage(R.drawable.myImage); // I know this isn't correct. 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:40:33.797

尝试这个

```
image.setImageResource(R.drawable.yourimage); 
```

或者

```
image.setImageDrawable(getResources().getDrawable(R.drawable.yourimage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:42:28.080

```
image.setImageResource(int resId) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T18:45:51.927

如果要在手机上显示图像文件，可以这样做：

```
private ImageView imgView;
imgView = (ImageView) findViewById(R.id.imageViewId);
imgView.setImageBitmap(BitmapFactory.decodeFile("pathToImageFile")); 
```

如果要显示可绘制资源中的图像，请执行以下操作：

```
private ImageView imgView;
imgView = (ImageView) findViewById(R.id.imageViewId);
imgView.setImageResource(R.drawable.imageFileId); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T18:47:11.407

为了避免所有问题，您可以使用确定的方法

```
Resources res = getActivity().getResources();
 Drawable drawable= res.getDrawable(R.drawable.myImage);
 image.setImageDrawable(drawable); 
```

# json - 如何在 Github Wiki 中设置 JSON 块的样式？

> ID：14901245
> 
> 赞同：236
> 
> 时间：2013-02-15T18:39:42.267
> 
> 标签：json, github, markdown, wiki

有没有办法很好地格式化/样式`JSON`代码`Github Wiki`（即首选 Markdown）？

像这样的东西，颜色很少（或粗体）和正确的缩进：

[http://www.freeformatter.com/json-formatter.html#ad-output](http://www.freeformatter.com/json-formatter.html#ad-output)

* * *

## 回答 #1

> 赞同：516
> 
> 时间：2013-02-15T19:24:08.700

可以使用以下块代码语法应用一些颜色语法丰富

```
```json
Here goes your json object definition
``` 
```

**注意：**这不会美化 json 表示。为此，可以事先依赖外部服务（例如**[jsbeautifier.org）](http://jsbeautifier.org/)**并将美化结果粘贴到 wiki 中。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2013-05-23T17:48:48.890

```
```javascript
{ "some": "json" }
``` 
```

我尝试使用`json`但不喜欢它的外观。`javascript`看起来更顺眼一点。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2019-11-20T03:35:36.267

## ***2019 Github解决方案***

```
```yaml
{
   "this-json": "looks awesome..."
} 
```

### 结果

[![在此处输入图像描述](../Images/169b476fce02fefb4fcf13cdf91cdcd0.png)](https://i.stack.imgur.com/ElxM5.png)

如果您想让键的颜色与参数不同，请将您的语言设置为`yaml`

[@Ankanna 的回答](https://stackoverflow.com/a/46811028/2217801)让我想到了浏览[github 支持的语言列表](http://www.rubycoloredglasses.com/2013/04/languages-supported-by-github-flavored-markdown/)，`yaml`这是我最好的发现。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-10-18T13:12:06.213

我遇到了同样的问题。所以，我尝试`JSON`用不同的语言语法格式表示。但所有时间最喜欢的是`Perl`, `js`, `python`, & `elixir`。

这就是它的外观。

以下屏幕截图来自`Gitlab`Markdown 文件。这可能因`MARKDOWN`文件中使用 for 语法的颜色而异。

[![JsonasPerl](../Images/f82619d03aea6a5b36a02a885348465c.png)](https://i.stack.imgur.com/f6V5v.png)

[![JsonasPython](../Images/ca91984bbf8eac3bef6bb3b46daf76ce.png)](https://i.stack.imgur.com/8haZg.png)

[![JsonasJs](../Images/fdc67486daa93fcf199603d06f4d6647.png)](https://i.stack.imgur.com/vtMnT.png)

[![乔纳斯灵药](../Images/b3a85037861d01c3ec591ef4b1a764ae.png)](https://i.stack.imgur.com/g92xB.png)

# python - 用于分割嵌套列表的自适应函数？

> ID：14901246
> 
> 赞同：1
> 
> 时间：2013-02-15T18:39:45.497
> 
> 标签：python, list, nested-lists

如果我在 python 中有一个方阵作为嵌套列表，我可以将它分成几个大小相等的框并创建一个新列表，其中每个元素都是其中一个框中的数字列表。例如

```
a = [[1, 2, 3, 4],
     [5, 6, 7, 8],
     [9, 10, 11, 12],
     [13, 14, 15 ,16]]

b = [[a[0][0], a[0][1], a[1][0], a[1][1]],
     [a[0][2], a[0][3], a[1][2], a[1][3]],
     [a[2][0], a[2][1], a[3][0], a[3][1]],
     [a[2][2], a[2][3], a[3][2], a[3][3]]] 
```

有没有更简单的方法来做到这一点？有没有办法将其设置为可以应用于不同大小的矩阵并指定框的大小的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:44:32.553

以下内容等同于您拥有的内容，并且更简洁：

```
b = [a[0][:2] + a[1][:2],
     a[0][2:] + a[1][2:],
     a[2][:2] + a[3][:2],
     a[2][2:] + a[3][2:]] 
```

或等效的列表理解：

```
b = [a[i][s] + a[i+1][s] for i in (0,2) for s in (slice(None,2), slice(2,None))] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:51:29.817

使用[NumPy](http://www.numpy.org/)：

```
In [31]: import numpy as np

In [32]: a = np.arange(1,17).reshape(4,4)

In [33]: a
Out[33]: 
array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12],
       [13, 14, 15, 16]])

In [34]: b = a.reshape(-1,2,2,2).swapaxes(1,2).reshape(4,4)

In [35]: b
Out[35]: 
array([[ 1,  2,  5,  6],
       [ 3,  4,  7,  8],
       [ 9, 10, 13, 14],
       [11, 12, 15, 16]]) 
```

# mysql - 用于表示和查询 mySQL 表定义的 Perl 对象

> ID：14901252
> 
> 赞同：1
> 
> 时间：2013-02-15T18:40:31.423
> 
> 标签：mysql, perl, ddl

我不完全知道我想要什么，但肯定有人有同样的需求，并且以比我更好的方式解决了它：

我正在寻找某种机制来从数据库中提取 mySQL 表的数据定义并允许查询它以获取列列表及其定义，作为动态构造 DML 例程的一部分？让表参数（例如 ENGINE、INDEX 等）也可用也很好。

我们的数据库不是特别先进，而且我当然没有 SQL DDL 的百科全书知识，所以我想出的东西可能对其他人没有多大用处。Perl 中是否已经有一些东西 - 最好是面向对象的 - 可以做到这一点，至少对于 mySQL 而言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:44:27.013

是的，有一个 Perl 包 SQL::Translator，它是名为 SQLFairy 的工具集的一部分。它从 SQL 脚本或实时数据库实例中解析 SQL DDL。它支持多种 RDBMS，包括 MySQL。

然后它提供了进行模式转换、模式差异和其他一些很酷的东西的工具。

*   [http://metacpan.org/pod/SQL::Translator](http://metacpan.org/pod/SQL::Translator)
*   [http://sqlfairy.sourceforge.net/](http://sqlfairy.sourceforge.net/)

我发现文档比大多数 Perl 项目要好，但我仍然必须阅读代码才能了解如何以我想要的方式使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:48:07.373

DBI 接口有一组“目录方法”： http: [//metacpan.org/pod/DBI#Catalog-Methods](http://metacpan.org/pod/DBI#Catalog-Methods)。

您可以查看一个类似的 StackOverflow 问题： [如何从 Perl 的 DBI 中获取模式？](https://stackoverflow.com/questions/2903948/how-do-i-get-schemas-from-perls-dbi)

# android - Android：我有一个列表视图的固定标题，但“发光效果”仅适用于列表视图

> ID：14901254
> 
> 赞同：1
> 
> 时间：2013-02-15T18:40:36.133
> 
> 标签：android

我正在尝试制作类似于人员应用程序的布局，因此我有一个顶部带有固定标题的列表。我在相对布局内的列表视图顶部定义标题，但列表顶部的“发光效果”仅适用于列表视图，而不是整个布局。

这就是我所拥有的： ![在此处输入图像描述](../Images/3bf2cae5b9c15eb86b0452e39f4f66b8.png)

这就是我想要的： ![在此处输入图像描述](../Images/2fa224e11af63bfc193f819aad0ae457.png)

这是我的布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<LinearLayout 
    android:id="@+id/header_layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:minHeight="20dp"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/status_header"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="@string/last_updated"
        android:textSize="12sp"
        android:textStyle="bold"
        android:textAllCaps="true"
        android:gravity="center|left"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="7dp"
        android:layout_marginBottom="7dp"
        android:textColor="@color/nice_blue" 
        />

    <View style="@style/HeaderDivider"/>

</LinearLayout>

<ListView
    android:id="@+id/status_list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:headerDividersEnabled="false"
    android:footerDividersEnabled="false"
    android:layout_below="@+id/header_layout" >
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:58:02.380

两个示例中的发光效果功能相同。

People 应用程序中发生的事情是它也`ListView`和你的一样。效果发生在同一个地方。*Me*、*#*、*A*等标头实际上位于*ListView*内。

**选项1**

要做你想做的事，在 中放一个标题`ListView`，你还需要创建一个自定义的`ListView`. 这意味着**扩展** `ListView`.

这听起来比实际更具挑战性，但您应该能够在网上找到一些示例。寻找*扩展*a`ListView`而不是创建*custom* `ListView`的示例。

一般的想法是，您将添加`TextView`到将充当您的标题`View`的 the中。`ListView`这会将标题文本*Last updated*`ListView`放在您创建的视图内部，并且由于它在内部，因此它将包含在发光下方。

**选项 2**

您可能可以在自身上使用[addHeaderView(View v, Object data, boolean isSelectable)](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View,%20java.lang.Object,%20boolean%29)或[addHeaderView(View v)](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)方法`ListView`。

我相信这会在 中添加一个标题行`ListView`，但我从未使用过它，所以我不能确定它是如何工作的。这可能更容易，但灵活性会降低。

# python - 无法通过 REST api https url 连接到 JIRA Python

> ID：14901260
> 
> 赞同：0
> 
> 时间：2013-02-15T18:40:58.910
> 
> 标签：python, ssl, https, connection, jira

我尝试通过 https 连接到 jira 开发沙箱，但出现 SSL23_GET_SERVER_HELLO:unknown 协议错误

这是错误日志/堆栈跟踪。我尝试了 8080 和 443 端口，但没有任何乐趣。

```
>>> from jira.client import JIRA

>>> options = {'server':'localhost:8080'}

>>> auth = ('username', 'password')
>>> jira = JIRA(options, auth)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/ve/lib/python2.6/site-packages/jira/client.py", line 88, in __init__
    self._create_http_basic_session(*basic_auth)
  File "/home/ve/lib/python2.6/site-packages/jira/client.py", line 1369, in _create_http_basic_session
    r = self._session.post(url, data=json.dumps(payload))
  File "/home/ve/lib/python2.6/site-packages/requests/sessions.py", line 284, in post
    return self.request('post', url, data=data, **kwargs)
  File "/home/ve/lib/python2.6/site-packages/requests/sessions.py", line 241, in request
    r.send(prefetch=prefetch)
  File "/home/ve/lib/python2.6/site-packages/requests/models.py", line 638, in send
    raise SSLError(e)
requests.exceptions.SSLError: [Errno 1] _ssl.c:480: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol

>>> options = {'server':'localhost:443'}

>>> auth = ('username', 'password')
>>> jira = JIRA(options, auth)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/ve/lib/python2.6/site-packages/jira/client.py", line 88, in __init__
    self._create_http_basic_session(*basic_auth)
  File "/home/ve/lib/python2.6/site-packages/jira/client.py", line 1369, in _create_http_basic_session
    r = self._session.post(url, data=json.dumps(payload))
  File "/home/ve/lib/python2.6/site-packages/requests/sessions.py", line 284, in post
    return self.request('post', url, data=data, **kwargs)
  File "/home/ve/lib/python2.6/site-packages/requests/sessions.py", line 241, in request
    r.send(prefetch=prefetch)
  File "/home/ve/lib/python2.6/site-packages/requests/models.py", line 631, in send
    raise ConnectionError(sockerr)
requests.exceptions.ConnectionError: [Errno 110] Connection timed out
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:49:42.870

尝试这个：

```
from jira.client import JIRA
options = {'server':'localhost:8080'}
jira = JIRA(options)
jira = JIRA(basic_auth=('username', 'password')) 
```

如果它没有帮助，是否有可能[`OpenSSL`发生冲突](http://sourceforge.net/p/curl/bugs/990/)？

> 当 curl 与 OpenSSL 0.9.8 链接并尝试访问运行 OpenSSL 1.0.0 的服务器时，SSL 握手失败并显示： curl: (35) error:14077458:SSL routines:SSL23_GET_SERVER_HELLO:reason(1112)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:01:09.167

现在明白了。端口 8080 已设置并且不是 http 连接的默认设置，对于 https 我使用验证操作基本上在 jira-python 方法主体中设置 validate = False

# python - 数组中的数字总和，不计算 13 和紧随其后的数字（CodingBat 拼图）

> ID：14901265
> 
> 赞同：1
> 
> 时间：2013-02-15T18:41:18.223
> 
> 标签：python, list

**问题：**

返回数组中数字的总和，对于空数组返回 0。除了数字 13 非常不吉利，因此它不算数，紧跟在 13 之后的数字也不算数。

**我的代码：**

```
def sum13(nums):
  l = len(nums)
  tot = 0

  if l==0:
    return 0

  for x in range(l):
    if nums[x]!=13:
      if nums[x-1]!=13:
        tot+=nums[x]

  return tot 
```

**失败的地方：**

```
sum13([1, 2, 2, 1, 13]) should → 6, but my code is outputting 5
sum13([1, 2, 13, 2, 1, 13]) should → 4, but my code is outputting 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-20T02:08:22.093

`enumerate()`可以给出索引，然后可以使用`sum()`. 添加到列表末尾的额外 0 使其适用于`nums[i-1]`when `i = 0`。

```
def sum13(nums):
   nums += [0]
   return sum(n for i, n in enumerate(nums) if n != 13 and nums[i-1] != 13) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-06T04:20:31.157

这是解决方案：

```
def sum13(nums):

    if len(nums) == 0:
        return 0

    for i in range(0, len(nums)):
        if nums[i] == 13:
            nums[i] = 0
            if i+1 < len(nums): 
                nums[i+1] = 0
    return sum(nums) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T18:44:55.660

你的问题是什么时候`x`为零。`x - 1`会`-1`这样它会得到你列表的最后一个元素（`13`）。要修复它，请不要测试`x - 1`是否`x`为零：

```
if x == 0 or nums[x-1] != 13: 
```

在 Python 中，当您将负索引传递给列表时，它会向后访问其元素，因此：

```
>>> x = [1,2,3,4,5]
>>> x[-1]
5
>>> x[-2]
4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T19:10:14.863

`next()`您可以通过使用函数而不是容易出错的索引来避免该错误：

```
def exclude13(iterable):
    it = iter(iterable)
    for x in it:
        if x == 13: # don't yield 13
           next(it) # skip number immediately after 13
        else:
           yield x

print(sum(exclude13([1, 2, 2, 1, 13]))) # -> 6
print(sum(exclude13([1, 2, 13, 2, 1, 13]))) # -> 4 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-08T00:05:17.487

```
def sum13(nums):
    count = 0
    sum = 0
    for i in range(len(nums)):
         if nums[i] == 13 or sum == 1 :
            nums[i]= 0
            sum = sum + 1
         count = count + nums[i]
         if sum  ==  2:
            sum  = 0
    if nums == []:
          return 0
    return coun 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-05T06:48:57.230

```
def sum13(nums):
    count = 0
    while count < len(nums):
        if nums[count] == 13:
            del nums[count:count+2]
            continue
        count += 1
    return sum(nums) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-23T07:43:07.817

```
def sum13(nums):
  result = 0
  i = 0

  while i < len(nums):
    if nums[i] == 13:
      i += 2
      continue
    else:
      result += nums[i]
      i += 1

  return result 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-09T06:54:02.240

```
 def sum13(nums):
        sum = 0
        len_n = len(nums)
        k = 0
        while k < len_n:
            if nums[k] == 13:
                k += 2
            else:
                sum += nums[k]
                k += 1
        return sum 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-01T16:02:21.220

制作列表的副本以便原始列表不会更改，删除数字 13 和紧随其后的数字的实例，然后对结果列表求和：

```
def sum13(nums):
    nums = nums[:]
    while 13 in nums:
        i = nums.index(13)
        del nums[i:i+2]
    return sum(nums) 
```

这类似于此问题的最佳答案： [寻找更优雅的解决方案](https://stackoverflow.com/questions/10184714/looking-for-a-more-elegant-solution-to-this)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-07-22T21:35:56.350

```
def sum13(nums):
  if len(nums)==0:
    return 0
  sum=0
  for i in range(1,len(nums)):
    if nums[i]==13 or nums[i-1]==13:
      sum = sum
    else:
      sum += nums[i]
  if nums[0]==13:
    return sum
  else:
    return sum + nums[0] 
```

开始循环形式 1 并在末尾添加第一个数字（如果不是 13）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-09T09:44:56.707

列表的总和，除了什么时候`item=13`不会被计算在内，`item+1`也不会被计算在内

```
def sum13(nums):
  if len(nums)==0:
    return 0
  if nums[-1]==13:
    nums[-1]=0
  for i in range(len(nums)-1):
    if nums[i]==13:
      nums[i]=0
      nums[i+1]=0
  return sum(nums) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-29T12:22:27.827

另一种看待它的方式：

```
def sum13(nums):
  sub = 0
  for i in range(len(nums)):
    if nums[i] == 13 :
      sub+=nums[i]
      if i+1<len(nums) and nums[i+1]!=13:
        sub+=nums[i+1]

  return sum(nums)-sub 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-15T18:45:34.063

您排除了紧接在 13*之前*的数字，而您应该排除紧接在 13*之后*的数字。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-06-05T00:03:10.733

我建议使用递归解决方案。请注意，虽然列表的索引可能超出范围，但切片会给出一个空列表而不是错误，例如，如果 a = [1,1,2] 那么 a[3] 会给出错误，而 a[3:] 给出空列表 []。

```
def sum13(nums):
  if len(nums) == 0:
    return 0
  sum = sum13(nums[1:])
  if nums[0] != 13:
    return sum + nums[0]
  if nums[0] == 13:
    return sum13(nums[2:]) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-12-29T22:08:17.097

我以下列方式解决了这个问题。这是蛮力，但它确实有效：

```
def sum13(nums):
    count = 0
    if len(nums) == 0: 
        return 0
    for ans in range(len(nums)):
        if nums[ans] == 13 and ans < len(nums)-1: 
            nums[ans] = 0
            nums[ans+1] = 0
        elif nums[ans] == 13 and ans == len(nums)-1:
            nums[ans] = 0 
        else: 
            count += nums[ans]

    return count 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-30T17:21:01.683

```
def sum13(nums):
    li=[]
    if nums[-1]==13:
        li.append(13)
    for i in range(len(nums)-1):
        if nums[i]==13:    
            li.append(nums[i])
            li.append(nums[i+1])
    n=sum(nums)
    return (n-sum(li)) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-19T10:05:04.630

```
def sum13(nums):
  if len(nums) == 0:
    return 0
  total = 0
  for i in range(len(nums)):
    if nums[i] == 13 and  (len(nums)-1)>i:
      nums[i+1]=0
      total = total
    elif nums[i]==13:
      total = total
    else:
      total = total +nums[i]
  return total 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-06-04T07:22:38.730

返回数组中数字的总和，对于空数组返回 0。除了数字 13 非常不吉利，因此它不算数，紧跟在 13 之后的数字也不算数。

```
 def sum13(nums):
       nums += [0]
       add=sum(j for i, j in enumerate(nums) if j != 13 and nums[i-1] != 13)
       return add 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-12-29T18:53:40.047

这也应该有效。基本上这是一个双重继续声明。使用 enumerate() 为每次迭代分配索引和值对。如果一个数字是 == 13 --> continue，则下一个迭代项目应符合 elif 语句的条件，该语句也适用于以 13 开头的项目。elif 仅对索引 >= 1 的项目运行（因此没有问题在 [0] 处超出范围）。

```
def sum13(nums):
  if nums ==[]:
    return 0
  sum = 0
  for index, val in enumerate(nums):
    if nums[index] == 13:
      continue
    elif nums[index-1] == 13 and index > 0:
      continue
    else:
      sum += val
  return sum 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-06-15T12:14:37.727

当它`x=0`发生`nums[x-1]`冲突时，因为它的结果`nums[0-1]`好像是 13 那么它可能不会添加所以`nums[0]`最后检查。

```
def sum13(nums):
  co=0
  if len(nums)<=0:
    return co
  for a in range(1,len(nums)):
    if nums[a]==13:
      continue
    elif nums[a-1]==13:
      continue
    else:
      co=co+nums[a]      
  if nums[0]!=13:
    co+=nums[0]
  return co 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-02-11T23:42:55.473

这是我采取的一种方法，这也有效

```
nums = [1, 2, 2, 1, 13,2,1,2,3,13,4,5]
counter = 0
temp = []
for i in range(len(nums)):
    if nums[i] == 13:
        if (i+1) != len(nums) and nums[i+1] != 13:
            temp.append(nums[i+1])
            continue
        elif (i+1) == len(nums):
            continue
    else:
        counter = counter + nums[i]
temp_total = sum(temp)
count_total = counter - temp_total
print(count_total) 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-01-01T20:51:24.323

这里是另一个解决方案：

```
def sum13(nums):
  for i in range (len(nums)) :
    if nums[i] == 13 :
      nums[i] = 0 
      if i+1 < len(nums) and nums[i+1] != 13 :
        nums[i+1] = 0

  return sum(nums) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-07-06T07:11:52.437

这是我对这个练习的解决方案！！！！

```
def sum13(nums):
    total = 0
    for i in range(len(nums)):
        if (nums[i] == 13 or nums[i-1] == 13 and i != 0):
            total = total
        else:
            total += nums[i]
    return total 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-12-11T22:00:30.257

```
def sum13(nums):

  total = sum(nums)

  for i in range (len(nums)):
    if nums[i]==13:
      total = total - nums[i]
      if (i+1) < len(nums) and nums[i+1]!=13: #Using !=13 because 13 will already
        total = total-nums[i+1]               #be detected from previous if

  return total 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-08-22T21:12:38.890

```
def sum13(nums):

  summed=0
  flag=True
  index_13=0

  for index, num in enumerate(nums):

    if num==13:
      index_13=index
      flag=False

    if flag==True:
      summed=summed+num

    if index_13+1<= len(nums)-1 and num==nums[index_13+1]:
       flag=True

  return summed 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-08-13T12:14:47.430

```
def sum13(nums):
    sum=0
    ind13=[]
    for num in nums:
        if num==13:
            num=0
            ind13=nums.index(13)
            ind13next=ind13+1
            nums[ind13]=0
            if nums[ind13] !=nums[-1]:
                nums[ind13next]=0
                sum=sum+num
        else:
            sum=sum+num
    return sum 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-07-20T11:45:36.463

```
def sum13(nums):
  sum=0
  count=0
  for i in range(len(nums)):
    if nums[i]!=13:
        count=count-1
        if count<=0:
            sum=sum+nums[i]
    else:
        count=2
  return sum 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-09-24T02:00:53.053

我思考这个问题的方式让我可以遍历列表——除了最后一个元素。然后，如果值为 13，则下一个元素变为 0。从那里 - 我重新加载列表 - 并将 ALL 13 替换为 0。最后，我只是简单地将列表的值相加。

```
def sum13(nums):
for i,x in enumerate(range(len(nums)-1)):
    if (nums[x]==13):
        nums[i+1]=0
        nums=nums
for i,x in enumerate(nums):
    if x==13: #if the element is equal to 13
        nums[i]=0
return sum(nums) 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-03-24T23:14:52.537

```
def sum13(nums):
  nums2 = []
  if 13 in nums:
    for i in range(len(nums)-1): # the -1 is needed to avoid out of range.
      if nums[i] != 13: nums2.append(nums[i])
      else:
        nums[i] = 0
        nums[i+1] = 0
    return sum(nums2)
  return sum(nums) 
```

我创建了一个单独的列表并将我想要的数字附加到该列表中。我通过遍历每个元素并在它不等于 13 时附加该数字来通过 for 循环来做到这一点。

当它最终等于数字 13 时，我将通过将其设置为零来更改该数字（nums[i] = 0）。然后我还需要通过索引 (nums[i+1] = 0) 将下一个数字设置为零。所以他们然后从列表的总和中扣除。

这不是一个完美的解决方案，但它是一个可行的解决方案。

# mono - 在 CentOS 6.3 上安装 Mod_Mono 和 Xsp4

> ID：14901271
> 
> 赞同：4
> 
> 时间：2013-02-15T18:41:46.760
> 
> 标签：mono, centos, mod-mono, xsp

我已经安装了 Mono 3.0.1，但是我在尝试安装 Mod_Mono 和 Xsp4 时遇到了大量的依赖问题，有人让它工作吗？如果是这样，您必须采取哪些步骤？有一个中心位置吗？

非常感谢您花时间阅读我的问题和愉快的编码！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T22:44:48.667

环境：Centos 6.3 基本安装 Apache/2.2.15

安装步骤：

```
#Install required software
yum -y install httpd httpd-devel make glib2-devel libpng-devel libjpeg-devel 
giflib-devel libtiff-devel libX11-devel gcc* fontconfig-devel bison gettext bzip2  
libtool automake autoconf wget unzip 
```

# 我们将安装单声道的目录

```
mkdir -p /opt/mono 

cd /tmp 
```

# 下载和提取源

```
wget http://download.mono-project.com/sources/mono/mono-2.10.2.tar.bz2
wget http://download.mono-project.com/sources/xsp/xsp-2.10.2.tar.bz2
wget http://download.mono-project.com/sources/mod_mono/mod_mono-2.10.tar.bz2
wget http://download.mono-project.com/sources/libgdiplus/libgdiplus-2.10.tar.bz2

tar -xjf mono-2.10.2.tar.bz2
tar -xjf xsp-2.10.2.tar.bz2
tar -xjf mod_mono-2.10.tar.bz2
tar -xjf libgdiplus-2.10.tar.bz2 
```

# 编译安装 libgdiplus

```
cd libgdiplus-2.10
./configure --prefix=/opt/mono
make ; make install 
```

# 编译安装单声道

```
cd ../mono-2.10.2
./configure  --prefix=/opt/mono --with-libgdiplus=/opt/mono
make ; make install 
```

# 设置环境变量（确保也修改 ~/.bash_profile）

```
export PATH=$PATH:/opt/mono/bin
export PKG_CONFIG_PATH=/opt/mono/lib/pkgconfig 
```

# 编译安装xsp

```
cd ../xsp-2.10.2
./configure --prefix=/opt/mono
make ; make install 
```

# 编译安装 mod_mono

```
cd ../mod_mono-2.10
./configure --prefix=/opt/mono --with-mono-prefix=/opt/mono
make ; make install

mv /etc/httpd/conf/mod_mono.conf /etc/httpd/conf.d/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-02T14:43:31.970

目前正在使用单声道和 xsp4：

```
[root]# cat /etc/redhat-release
CentOS release 6.7 (Final)

[root]# mono --version
Mono JIT compiler version 4.5.0

[root]# xsp4 --version
xsp4.exe 2.10.2.0 
```

Chazt3n 解决方案还可以，但我必须进行一些更改才能使其正常工作：

*   我在文件中将单声道版本从**4.0**更改为**4.5**：**/opt/mono/bin/mod-mono-server4**
*   我运行了这个命令：**cp /opt/mono/lib/mono/4.0/xsp4.exe /opt/mono/lib/mono/4.5/**

现在很好用，谢谢。

# javascript - javascript防止滚动

> ID：14901273
> 
> 赞同：0
> 
> 时间：2013-02-15T18:41:53.243
> 
> 标签：javascript, html, scroll

当我在 HTML5 游戏中使用箭头键时，我试图阻止滚动。这是一个迷宫游戏，您可以使用屏幕上的箭头键或按钮进行控制，但每当我按下“向上”或“向下”键时，它总是会滚动。我正在使用：

```
document.addEventListener('keydown', function(e){
    if(e.keyCode === 40) {
        down();
    } else if(e.keyCode === 38) {
        up();
    } else if(e.keyCode === 37) {
        leftclick();
    } else if(e.keyCode === 39) {
        rightclick();
    }
}) 
```

这可以用javascript吗？我希望它能够用我的鼠标滚动，但当我使用键盘上的箭头键时不能。我的游戏在[http://thomaswd.com/maze](http://thomaswd.com/maze)。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:43:43.510

用于[`e.preventDefault()`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)防止发生正常的按键动作。

```
document.addEventListener('keydown', function(e){
    if(e.keyCode === 40) {
        down();
        e.preventDefault();
    } else if(e.keyCode === 38) {
        up();
        e.preventDefault();
    } else if(e.keyCode === 37) {
        leftclick();
        e.preventDefault();
    } else if(e.keyCode === 39) {
        rightclick();
        e.preventDefault();
    } 
```

})

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:48:43.463

尝试这个：

```
document.addEventListener('keydown', function(e) {
        if(e.keyCode > 36 && e.keyCode < 41) {
            e.preventDefault();
        }
        if (e.keyCode === 40) {
            down();
        } else if (e.keyCode === 38) {
            up();
        } else if (e.keyCode === 37) {
            leftclick();
        } else if (e.keyCode === 39) {
            rightclick();
        }
        return false;
    }, false);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:45:03.727

尝试`e.preventDefault();`在最后添加

# jquery - SlideDown 或 SlideUp 效果来设置高度

> ID：14901276
> 
> 赞同：0
> 
> 时间：2013-02-15T18:41:58.280
> 
> 标签：jquery

我怎么能做一个`slideDown()`or`slideUp()`效果，但我不想关闭我的`div`，我只想设置`height`但做`slideDown()`or`slideUp()`效果。

**例子**

```
<div id="modalNovoTicket" style="height: 600px;"></div>

$("#modalNovoTicket").slideUp("slow", function () {
    $(this).css("height", "400px");
}); 
```

**问题**

有了这段代码，我的`div`关闭

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:45:24.837

我认为这就是你想要的：

```
$("#modalNovoTicket").animate({
    'height': '500px'
}, 500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:44:08.100

你正在寻找`animate()`方法。

```
$(...).animate({ height: 400 }, "slow"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T18:44:25.823

使用动画：

```
$("#modalNovoTicket").animate({height:400},"slow"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T18:44:16.810

您正在寻找[animate()](http://api.jquery.com/animate/)方法。

试试这个代码

```
$("#modalNovoTicket").animate({
    height: 400
}, 600) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T18:55:21.057

您可以尝试`.animate()`方法和延迟使用`600`速度`slow`，`400`中速和`200`快速。这里的延迟时间将以毫秒为单位。

```
 $("#modalNovoTicket").animate({
        height: "400px"
    }, 600); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-15T18:44:10.600

改用[`animate()`](http://api.jquery.com/animate/)：

```
$("#modalNovoTicket").animate({
  height: "400px"
}); 
```

见[演示](http://jsfiddle.net/zaknotzak/P4qTA/)。

`"slow"`您还可以通过整数（以毫秒为单位）或字符串（ , ）指定动画速度`"fast"`：

```
$("#modalNovoTicket").animate({
  height: "400px"
}, 500); 
```

以及动画完成后要执行的代码块：

```
$("#modalNovoTicket").animate({
  height: "400px"
}, 500, function() {
  alert("Animation complete!");
}); 
```

# html - 当前 CSS 的 IE8 布局错误

> ID：14901280
> 
> 赞同：0
> 
> 时间：2013-02-15T18:42:17.743
> 
> 标签：html, css, internet-explorer

所以我的网站位于但现在它无法在 IE8 中正确显示。我在过去必须`display:inline-block`尝试补偿但无法正常工作的地方添加了以下 css：

```
display:inline-block;
*display:inline;
*zoom:1; 
```

是否有一个快速的技巧来让我的物品符合要求，还是我必须完全重做风格`float`？

IE8 不响应 HTML5 元素（如`section`、`article`和）上的 css`nav`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:13:53.510

似乎您正在使用 html5 元素，并且在您的 css 中您将它们称为 ex。

`header div#header_left {float: left; width: 350px;}`等等。大多数情况下IE8 无法识别[这些标签](https://stackoverflow.com/a/3746162/410273)。

当我检查元素时，我看到的是这个。![在此处输入图像描述](../Images/0c044a4f48baa31c44cc6b27245caddf.png)

如您所知，IE8 甚至无法识别您的 CSS。

建议：使用 div 或让 IE 识别标签（[这里有几个答案告诉你如何](https://stackoverflow.com/questions/289225/does-internet-explorer-8-support-html-5)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:54:45.193

查找后，我发现您的许多 HTML5 标签在 IE 8 中无法正常工作。有一种简单的方法可以让 IE8 识别这些标签。您基本上有一个简短的脚本，可以在您要使用的所有 html5 标签上运行 document.createElement。

这是脚本的链接和随附的 css。

[http://www.nickyeoman.com/blog/html/118-html5-tags-in-ie8](http://www.nickyeoman.com/blog/html/118-html5-tags-in-ie8)

# requirejs - 当我第二次实例化视图时，视图事件被设置了两次

> ID：14901283
> 
> 赞同：1
> 
> 时间：2013-02-15T18:42:23.443
> 
> 标签：requirejs

这是我的项目架构问题——这是我的第一个主干项目，我可能做错了什么。

在我所有的路由回调项目中，我都有：

```
myroute: function() {
    this.currentView = new MyCustomView();
},

mysecondroute: function() {
    this.currentView = new MySecondView()
},
//... 
```

因此，在所有路由回调中，我都会实例化一些视图。此视图具有调用渲染方法的初始化方法。`events: {}`除了每次实例化同一个视图时所有视图事件（在 所以当我访问同一条路线两次时，对应于这条路线的视图事件会被触发两次......

可能我应该在每个路由调用上实例化新视图 - 但我该怎么做呢？我的意思是标准是什么？也许我应该以某种方式卸载当前视图 - 有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:19:48.187

我认为您必须添加一种方法来取消绑定所有事件以关闭视图

像这样

```
close : function () {
   //your code to clean everything before closing the view
   this.remove();
   this.unbind();
} 
```

所以下次调用视图时，将在视图初始化期间添加事件，这就是为什么你有两次调用事件的原因。初始化方法将事件绑定到 .el 元素。您需要确保在某些时候解除绑定。

# c++ - 是否可以强制模板函数只接受某种数值类型的参数？

> ID：14901297
> 
> 赞同：1
> 
> 时间：2013-02-15T18:43:54.720
> 
> 标签：c++

例如

```
template <typename T>
T foo(){ ... } 
```

其中T只能是浮点类型，即float / double / long double

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T18:46:38.730

```
template <typename T>
typename std::enable_if<std::is_floating_point<T>::value, T>::type foo() { ... } 
```

这是完全标准的 SFINAE；我们在返回类型上启用。如果 T 不是浮点类型，`std::is_floating_point<T>::value`将提供`false`并且`std::enable_if<false, T>`不提供`type`typedef，这会导致函数不可编译。

有关这些标准库类的信息，请参见[http://en.cppreference.com/w/cpp/types](http://en.cppreference.com/w/cpp/types)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T18:47:55.387

是的，使用模板专业化和 SFINAE：

```
template<typename T>
struct foo_enabled
{
};

template<>
struct foo_enabled<float>
{
    typedef void *value;
};

template<>
struct foo_enabled<double>
{
    typedef void *value;
};

template<>
struct foo_enabled<long double>
{
    typedef void *value;
};

template <typename T>
T foo(typename foo_enabled<double>::value=NULL){ ... } 
```

当然，如果你有 C++11，Andrei Tita 的解决方案会更聪明。

# sql - 仅在 where 语句中，表达式中的 MS Access 数据类型不匹配

> ID：14901298
> 
> 赞同：0
> 
> 时间：2013-02-15T18:43:55.633
> 
> 标签：sql, ms-access

我正在研究一个仅在`Where`语句中引发数据类型不匹配的表达式。

```
Current: IIf(Nz([ISRS_VAL_ST_CAPP_LVL].[NBR_YRS_VALID],99)>0,
IIf(DateAdd("yyyy",CInt(Nz([ISRS_VAL_ST_CAPP_LVL].[NBR_YRS_VALID],99))
,CVDate(Format(Nz([TEST_DATE],19891231),"0000-00-00")))>Now(),True,False),True) 
```

如您所见，我`Nz()`为每个引用添加了一个函数，甚至尝试对`CBool()`整个语句进行强制转换，但它仍然会引发数据类型不匹配。

我已将其归结为该表达式，并且该表达式的工作方式与*statement**中的预期完全相同`Select`*。当我将它添加到`Where`只希望返回的语句中`True`时，会发生错误。

我会错过什么？

更新：有兴趣者的完整查询

```
SELECT Student.TECH_ID, Student.CAPP_LVL, Values.ABBR, Values.SHORT_DESC, Values.LONG_DESC, Values.GROUP_NBR, Values.NBR_YRS_VALID, Student.SEQ_NBR, Student.CAPP_LVL_SCORE, Student.TEST_DATE, IIf(Nz([Values].[NBR_YRS_VALID],99)>0,IIf(DateAdd("yyyy",CInt([Values].[NBR_YRS_VALID]),CVDate(Format([TEST_DATE],"0000-00-00")))>Now(),True,False),True) AS [Current], Values.END_DATE, Student.LOAD_DATE
FROM Student INNER JOIN Values ON Student.CAPP_LVL = Values.CAPP_LVL
WHERE (((Values.ABBR)<>"MTHB") AND ((Values.END_DATE) Like "9999*"))
ORDER BY Student.TECH_ID, Student.CAPP_LVL, Student.SEQ_NBR; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:05:40.707

TEST_DATE 是什么数据类型和格式？如果我将其设为日期/时间数据类型并使数据评估为假，我会收到错误，但如果它评估为真，它会起作用。这可能就是您看到它在 Select 中工作的原因。当我将 TEST_DATE 设为双精度并在 nz 函数（19981231）中使用您的格式时，它适用于所有情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:01:15.230

`Where`声明看起来不像`Select`声明。*Access 需要一个可以*测试真假的条件表达式。

快速版本将采用整个语句并对其进行测试`True`：

```
WHERE (IIf(Nz([ISRS_VAL_ST_CAPP_LVL].[NBR_YRS_VALID],99)>0,
IIf(DateAdd("yyyy",CInt(Nz([ISRS_VAL_ST_CAPP_LVL].[NBR_YRS_VALID],99))
,CVDate(Format(Nz([TEST_DATE],19891231),"0000-00-00")))>Now(),True,False),True))
= True 
```

更好的解决方案是将其重写为由`AND`or连接的几个不同的条件语句`OR`。我在解析它时遇到了麻烦，所以我不认为我会尝试这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:32:02.263

这对我有用：

```
SELECT 
    IIf(Nz([ISRS_VAL_ST_CAPP_LVL].[NBR_YRS_VALID],99)>0,IIf(DateAdd("yyyy",
       CInt(Nz([ISRS_VAL_ST_CAPP_LVL].[NBR_YRS_VALID],99)),
       CVDate(Format(Nz([TEST_DATE],19891231),"0000-00-00")))
         >Now(),True,False),True) 
       AS [Current],
    ISRS_VAL_ST_CAPP_LVL.NBR_YRS_VALID, 
    ISRS_VAL_ST_CAPP_LVL.TEST_DATE
FROM ISRS_VAL_ST_CAPP_LVL
WHERE (((IIf(Nz([ISRS_VAL_ST_CAPP_LVL].[NBR_YRS_VALID],99)>0,IIf(DateAdd("yyyy",
    CInt(Nz([ISRS_VAL_ST_CAPP_LVL].[NBR_YRS_VALID],99)),
    CVDate(Format(Nz([TEST_DATE],19891231),"0000-00-00")))
       >Now(),True,False),True))=true)); 
```

NBR_YRS_VALID 和 TEST_DATE 都是长整数

# cassandra - Cassandra 数据模型 - 多个复合列

> ID：14901299
> 
> 赞同：1
> 
> 时间：2013-02-15T18:43:55.647
> 
> 标签：cassandra, datamodel

我正在尝试在 Cassandra 中对以下数据模型进行建模：

业务 - 主键：BusinessId

```
Has Many Reviews - primary key : ReviewId
   - Review 1
        - Body
        - Rating
   - Review 2
        - Body
        - Rating 
   and so on
Has an Address
  - State
  - City
  - Zip
Has Business Hours
  - Monday Hours
  - Tuesday Hours
  and so on
Has Offers
  - Offer1
  - Offer2
  and so on 
```

我希望能够使用一个查询来提取所有这些信息，即我想将其存储在一个业务行中。我怎样才能做到这一点？本质上，我有许多子实体要与父业务实体一起存储。根据我对复合键的了解，您只能有一个复合键（例如）businessId:ReviewId 来模拟评论），但是我如何将所有这些实体存储在一行中，以便在一个查询中有效地检索所有业务详细信息。

我的第二个问题是关于更新。假设这些实体（评论）中只有一个经常更新。其他实体大多保持静止。是否建议将评论与这个巨大的业务行分开，或者我可以在不将整个业务行存储在内存中的情况下更新评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:27:16.513

您可以使用传统的无模式基于 Thrift 的查询模型来完成您想要做的事情。您的数据模型可能如下所示：

```
Key: ReviewID {
  Review:1:Body = ""
  Review:1:Rating = 1
  Review:2:Body = ""
  Review:2:Rating = 1
  Address:1:City = ""
  Address:1:State = ""
  Address:1:Zip = ""
  Hours:1:Monday = ""
  Hours:1:Tuesday = ""
  Offer:1:[fieldName] = ""
  Offer:2:[fieldName] = ""
} 
```

用于此的架构将`Composite(Utf8Type, IntegerType, Utf8Type)`使用与您的 ReviewID 匹配的任何键类型以及与您的值匹配的任何值类型（如果您有不同的类型，则可以是字节）。

# django - 使用 Django ModelChoice 字段创建下拉查找表？

> ID：14901300
> 
> 赞同：1
> 
> 时间：2013-02-15T18:44:00.337
> 
> 标签：django, django-models, django-forms

我正在尝试使用 ModelChoiceField 字段实现一个下拉字段，该字段包含客户帐单信息表单中的国家/地区名称列表。但是，当我尝试渲染表单时，我得到“AttributeError，'str' object has no attribute 'all'”，我不知道是什么原因造成的。

我有一个包含国家代码和名称的查找表：

```
# models.py
from django.db import models
class Country(models.Model):
    # Ex: code = 'us', name = 'United States'
    country_cd = models.CharField(max_length=2)
    name = models.CharField(max_length=40) 
```

然后，我有一个 Customer 模型和关联的 Customer Billing Information modelform，其中包含一个指向上述查找表的外键字段：

```
# models.py
class Customer(models.Model):
    user = models.OneToOneField(User, primary_key=True)
    country = models.ForeignKey(Country)
    # Other fields...

# forms.py
from django import forms
from app.models import Customer, Country
class CustomerBillingInfoForm(forms.ModelForm):
    class Meta:
        model = Customer
        fields = ('country',)

    country = forms.ModelChoiceField(queryset='Country.objects.all()', empty_label=None) 
```

我已经在调试器中运行了它，并且执行“type(country)”确实表明它是一个 QuerySet，并且“Country.objects.all()”正在返回我的“country”数据库中的所有国家。堆栈跟踪说错误是在“ModelChoiceIterator”类中的 /django/forms/models.py 模块（Django v. 1.4）的第 896 行引发的。

有人看到我在这里做错了吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:50:51.100

改变：

```
country = forms.ModelChoiceField(queryset='Country.objects.all()',
    empty_label=None) 
```

至：

```
country = forms.ModelChoiceField(queryset=Country.objects.all(),
    empty_label=None) 
```

# java - 按值降序打印 TreeMap

> ID：14901304
> 
> 赞同：0
> 
> 时间：2013-02-15T18:44:07.397
> 
> 标签：java

嗨 Stackoverflow 精灵，我有一个关于按值而不是键对 TreeMap 进行排序的问题。这是一个作业，所以我必须这样做，而且我不一定需要有人为我输入答案，只是提示我做错了什么。这是我的代码：

```
import java.security.KeyStore.Entry;
import java.util.Scanner;
import java.util.TreeMap;

public class Assignment2 {
    public static void main(String[] args) {
            int x = 10;
            if(args.length > 0) {
                    x = Integer.parseInt(args[0]);
            }
            Scanner in = new Scanner(System.in);
             TreeMap<String, Integer> t = new TreeMap<>();

             while(in.hasNext()) {
                     String k = in.next();   
                     Integer cur = t.get(k);
                     t.put(k, cur == null ? 1 : cur +1);
             }

             in.close();

            //Printing: iterate through two nested for loops, 

             int curmax = 0;
             String curstring = null;
             for(int i=0; i<x; i++){
                     for (java.util.Map.Entry<String, Integer> e : t.entrySet()) {
                             if(e.getValue() > curmax)
//if the value of e is bigger then the last maximum, set the maximum equal to the value. 
                                     curmax = e.getValue();
                                     curstring = e.getKey();
                     }

                     System.out.printf("%d %s\n", curmax, curstring);

   //Switched order of printing since that's what the example result does.
                         t.remove(curstring);
                        curmax =0;
                 }
        }
} 
```

# ajax - 使用几个表单创建基于 f:ajax 的注册，以便每个表单在步骤后消失

> ID：14901309
> 
> 赞同：1
> 
> 时间：2013-02-15T18:44:14.013
> 
> 标签：ajax, forms, jsf, render, commandbutton

我正在尝试使用 JSF 通过几个步骤进行注册。一切都基于 f:ajax，因为不必重新加载页面。

当我按下“显示第一步”按钮时，结果就会出现。我按下“SecondStep”按钮，出现第二步。但是当我按下“第三步”按钮时，一切都消失了，我根本看不到任何步骤。“SecondStep”和“ThirdStep”按钮之间没有区别。我不知道为什么这段代码不起作用。

这是html：

```
<aside class="block">
    <h:form id="newform"> 
        <h:commandButton value="Show First Step">
            <f:ajax event="action" render="-allContent -firstStepForm" listener="#{stateBean.ajaxShowFirstStep}"></f:ajax>
        </h:commandButton>
    </h:form>

    <h:panelGroup id="allContent">
        <h:panelGroup id="firstStep">
            <ui:fragment rendered="#{stateBean.firstStep}">
                <span>AAAA</span>
                <h:form id="firstStepForm">
                    <h:commandButton value="SecondStep">
                        <f:ajax event="action" render="-allContent  -secondStepForm" listener="#{stateBean.ajaxShowSecondStep}"></f:ajax>
                    </h:commandButton>
                </h:form>
            </ui:fragment>
        </h:panelGroup>

        <h:panelGroup id="secondStep">
            <ui:fragment rendered="#{stateBean.secondStep}">
                <span>BBBB</span>
                <h:form id="secondStepForm">
                    <h:commandButton value="ThirdStep">
                        <f:ajax event="action" render="-allContent  -thirdStepForm" listener="#{stateBean.ajaxShowThirdStep}"></f:ajax>
                    </h:commandButton>
                </h:form>
            </ui:fragment>
        </h:panelGroup>

        <h:panelGroup id="thirdStep">
            <ui:fragment rendered="#{stateBean.thirdStep}">
                <span>CCCC</span>
                <h:form id="thirdStepForm">
                    <h:commandButton value="Finish">
                        <f:ajax event="action" render="-allContent" listener="#{stateBean.ajaxShowFinish}"></f:ajax>
                    </h:commandButton>
                </h:form>
            </ui:fragment>
        </h:panelGroup>

        <h:panelGroup id="finish">
            <ui:fragment rendered="#{stateBean.finish}">
                <span>FINISH!!!</span>

            </ui:fragment>
        </h:panelGroup>
    </h:panelGroup>
</aside> 
```

这是豆：

```
@ManagedBean(name = "stateBean")
@ViewScoped
@Getter
@Setter
public class StateSavingBean implements Serializable{

private static final long serialVersionUID = 5264945113749405548L;

private Boolean firstStep;
private Boolean secondStep;
private Boolean thirdStep;
private Boolean finish;

public StateSavingBean() {

}

public void ajaxShowFirstStep(AjaxBehaviorEvent event) {
    setFirstStep(true);
    setSecondStep(false);
    setThirdStep(false);
    setFinish(false);
}

public void ajaxShowSecondStep(AjaxBehaviorEvent event) {
    setFirstStep(false);
    setSecondStep(true);
    setThirdStep(false);
    setFinish(false);
}

public void ajaxShowThirdStep(AjaxBehaviorEvent event) {
    setFirstStep(false);
    setSecondStep(false);
    setThirdStep(true);
    setFinish(false);
}

public void ajaxShowFinish(AjaxBehaviorEvent event) {
    setFirstStep(false);
    setSecondStep(false);
    setThirdStep(false);
    setFinish(true);
}

} 
```

如果我从 f:ajax 的渲染属性中删除“-allContent”，我将能够通过所有步骤直到完成，但不会隐藏前面和后面的步骤。

请帮我找到解决方案。

我在用着：

服务器：JBoss 应用服务器 7.1，

JSF：javax.faces-2.2.0-20130214.084242-247.jar

人脸配置：

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                        http://java.sun.com/xml/ns/javaee/web-facesconfig_2_2.xsd"
    version="2.2">
</faces-config> 
```

网络模块：3.0

一些答案：

1.  在 web.xml 中更改了分隔符字符：

    ```
    <context-param>
        <param-name>javax.faces.SEPARATOR_CHAR</param-name>
        <param-value>-</param-value>
    </context-param> 
    ```

2.  我尝试不使用 h:panelGroup id="allContent" 并且我只渲染了我想要隐藏的显示 panelGroup 以及我想要显示的下一个。结果是一样的。

3.  我也尝试使用 MyFaces 2.1.10、Mojarra 2.0.3-FCS，结果是一样的。BalusC 写道，它可能是 JSF 2.2 中修复的错误，但我仍然有这个问题。

希望有人能帮助我。谢谢！

# stata - Stata - 从.txt输入数据，带有“”和，

> ID：14901311
> 
> 赞同：1
> 
> 时间：2013-02-15T18:44:22.807
> 
> 标签：stata

我正在使用 perl 通过 .txt 抓取以下内容，最终将其引入 Stata。什么格式选项有效？我有很多这样的观察结果，所以想使用一种我可以概括的方法。

原始数据格式如下：

```
 First Name: Allen
 Last Name: Von Schmidt
 Birth Year: 1965
 Location: District 1, Ocean City, Cape May, New Jersey, USA

 First Name: Lee Roy
 Last Name: McBride
 Birth Year: 1967
 Location: Precinct 5, District 2, Chicago, Cook, Illinois, USA 
```

目标是在 Stata 中创建变量：

```
 First Name: Allen
  Last Name: Von Schmidt
  Birth Year: 1965
  County: Cape May
  State: New Jersey

  First Name: Allen
  Last Name: McBride
  Birth Year: 1967
  County: Cook
  State: Illinois 
```

什么可能的 .txt 可能会导致这种情况，我将如何将其加载到 Stata 中？

此外，在这 2 个示例中，位置的术语数量各不相同，但我总是希望 2 在美国之前。

目前，我将“”放在.txt 表中的每个变量周围。

```
 "Allen","Von Schmidt","1965","District 1, Ocean City, Cape May, New Jersey, USA"
 "Lee Roy","McBride","1967","Precinct 5, District 2, Chicago, Cook, Illinois, USA" 
```

有没有更好的方法来格式化.txt？我将如何在 Stata 中创建相应的变量？

谢谢您的帮助！

PS 我知道 stata 使用 infile 或 insheet 并且可以处理 , 或制表符来分隔变量。我不知道如何用所有这些在 perl 中刮取像 Location 这样的变量，所以我添加了“”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:38:12.533

有两种方法可以做到这一点。首先是将数据粘贴到您的 do-file 中并使用输入。假设格式相当规则，您可以使用逗号轻松地对其进行解析。请注意，我删除了逗号：

```
#delimit;
input
str100(first_name last_name yob geo);
 "Allen" "Von Schmidt" "1965" "District 1, Ocean City, Cape May, New Jersey, USA";
end;

compress;
destring, replace;

split geo, parse(,);

rename geo1 district;
rename geo2 city;
rename geo3 county;
rename geo4 state;
rename geo5 country;
drop geo; 
```

第二种方法是直接从 txt 文件中插入数据，这可能更容易。这假设没有删除逗号：

```
 #delimit;
 insheet first_name last_name yob geo using "raw_data.txt", clear comma nonames; 
```

然后像第一个例子一样清理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:30:52.260

这不是一个完整的答案，但我需要比评论（容易）允许的更多空间和灵活性。

一种技巧是从最后剥离元素。最简单的方法可能是开始寻找最后一个逗号，这又是反转字符串中的第一个逗号。使用`strpos(reverse(`字符串变量`), ",")`。

例如，第一个逗号是`strpos()`这样找到的

```
. di strpos("abcd,efg,h", ",")
5 
```

最后一个逗号是这样的

```
. di strpos(reverse("abcd,efg,h"), ",")
2 
```

一旦你知道最后一个逗号在哪里，你就可以剥离最后一个元素。如果最后一个逗号位于反转字符串中的 # 位置，则它位于字符串中的 -# 位置。

```
. di substr("abcd,efg,h", -2, 2)
,h 
```

这些示例显然是单个字符串的计算器样式示例。但是对于整个字符串变量，可以类似地剥离最后一个元素。

```
. gen poslastcomma = strpos(reverse(var), ",") 
. gen var_end = substr(var, -poslastcomma, poslastcomma) 
. gen var_begin = substr(var, 1, length(var) - poslastcomma) 
```

一旦你习惯了这样的东西，你可以用更少的变量编写更复杂的语句，但是当你学习时，慢慢地，一步一步地学习会更好。

顺便说一句，一个常见的 Stata 学习器错误（在我看来）是假设一个字符串问题的解决方案*必须*使用正则表达式。如果你对正则表达式非常流利，自然可以用它们做一些奇妙的事情，但其他字符串函数结合起来也可以非常强大。

在您的具体示例中，听起来好像您想忽略最后一个元素，例如“USA”，然后依次处理下一个向后工作的元素。

`split`在 Stata 中也很好（我是一个粉丝，并且确实是它的假定作者）但是如果拆分产生不同数量的元素可能会很尴尬，这就是我进来的地方。

# python - 简单但奇怪的 vstack/concatenate 问题（python）

> ID：14901317
> 
> 赞同：2
> 
> 时间：2013-02-15T18:44:38.540
> 
> 标签：python, list, numpy, concatenation

我一直在阅读有关 numpy 数组的文档，其中一些没有意义。例如，[这里](https://stackoverflow.com/questions/6740311/combining-numpy-arrays)给出的答案建议使用`np.vstack`或`np.concatenate`组合数组，就像互联网上的许多其他地方一样。但是，当我尝试使用转换为时执行此`lists`操作时`np.arrays`不起作用：“

```
>>> some_list = [1,2,3,4,5]
>>> np.array(some_list)
array([1, 2, 3, 4, 5])
>>> some_Y_list = [2,1,5,6,3]
>>> np.array(some_Y_list)
array([2, 1, 5, 6, 3])
>>> dydx = np.diff(some_Y_list)/np.diff(some_list)
>>> np.vstack([dydx, dydx[-1]])"

Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    np.vstack([dydx, dydx[-1]])
  File "C:\Python27\lib\site-packages\numpy\core\shape_base.py", line 226, in vstack
    return _nx.concatenate(map(atleast_2d,tup),0)
ValueError: array dimensions must agree except for d_0 
```

我有什么办法可以做到这一点？

在这种情况下，我所需要的只是使任何订单的导数与用户给定的 X 数组的形状相同，以便我可以进行处理。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:47:30.487

除非在一些非常有限的情况下，否则以下内容将不起作用：

```
np.vstack([dydx, dydx[-1]]) 
```

这里，`dydx`是一个数组并且`dydx[-1]`是一个标量。

目前尚不清楚您要达到什么目的，但您是否可能打算将它们水平堆叠：

```
np.hstack([dydx, dydx[-1]]) 
```

?

```
In [38]: np.hstack([dydx, dydx[-1]])
Out[38]: array([-1,  4,  1, -3, -3]) 
```

# c++ - 程序从 pthread (posix) 迁移到 openmpi

> ID：14901318
> 
> 赞同：-1
> 
> 时间：2013-02-15T18:44:41.507
> 
> 标签：c++, posix, mpi

我有一个使用 POSIX 的系统用 g++ 编译我的程序，但是，我有机会访问一台有多个处理器的大型机器，它必须有 mvapich2 和 openmpi 模块，所以，我认为 openmpi 应该是正确的迁移我的系统。问题是我在openmpi方面没有太多经验，也不知道如何将我的程序迁移到这个新环境。

稍微阅读一下，我认为我必须使用 MPI 函数来让我的系统在这种环境中工作并更改 POSIX 函数？

在本节中，我将调用 pthread 函数来处理我认为是常见指令的线程。

```
Thread::Thread( PFUNC func, void * arg )
{
        pthread_detach( pthread_self() );
        pthread_attr_t attr;
        pthread_attr_init(&attr);
        pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_DETACHED);
        int s = pthread_create( &xThreadId, &attr, func, arg);
    if (s != 0)
            throw EXCEPT_NOTHREAD;

       pthread_attr_destroy(&attr);
       pthread_detach( pthread_self() ); 

} 
```

我的系统可以与信号量、互斥量一起使用，我还需要更换信号量和互斥量吗？如何？。请告知如何解决这个问题，如果我真的需要更改我的程序或者有避免更改我的程序并在 openmpi 环境中运行它的技巧。

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:51:59.580

从多线程程序到并行 MPI 程序并不是一项简单的任务，您必须学习 MPI，并且可能没有办法解决这个问题。

[我将从基本的 MPI 示例开始，通过快速谷歌搜索可以](https://www.google.com/#hl=en&tbo=d&output=search&sclient=psy-ab&q=mpi+examples&oq=mpi+examples&gs_l=hp.3..0l3.687.2066.0.2422.12.10.0.2.2.0.193.1039.5j5.10.0.les;..0.0...1c.1.3.psy-ab.AEXMBeF4MlY&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.42553238,d.dmQ&fp=80231a349c1608&biw=1024&bih=684)找到很多

我还建议您参考 MPI 实现的文档（您提到[openmpi](http://www.open-mpi.org/doc/)）并参考[MPI 标准文档](http://www.mpi-forum.org/docs/docs.html)

# kendo-ui - Kendo-UI条形图显示方向（轴）

> ID：14901322
> 
> 赞同：8
> 
> 时间：2013-02-15T18:45:08.737
> 
> 标签：kendo-ui, data-visualization

我确信这是一个愚蠢的问题，但我只是没有看到它。

我有一个包含许多剑道图表的页面。其中之一出现在条形从左到右的位置。其他的出现在条形从下到上的位置。到底是什么属性来控制它？我根本看不到它。我希望它们都是垂直的。

从左到右的单个图表也是唯一具有预定义系列的图表（[x,y,z] 而不是使用数据源）。这也是我唯一拥有的堆叠图表。也许有什么原因导致了这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T21:06:29.647

"bar" 类型将条形设置为水平：

```
 $("#chart").kendoChart({
     seriesDefaults: {
         type: "bar"
     }
 }); 
```

而“列”类型将条形设置为垂直：

```
 $("#chart").kendoChart({
     seriesDefaults: {
         type: "column"
     }
  }); 
```

# php - 使用 PHP 和 MySQL 按年龄组对用户进行排序？

> ID：14901327
> 
> 赞同：0
> 
> 时间：2013-02-15T18:45:24.730
> 
> 标签：php, mysql

我正在尝试设置一个查询，根据我表中的年龄显示我网站上所有 25 岁以下的用户`ptb_stats.user_age`。我设置了 -25 年的间隔，但它没有按我预期的方式工作。我究竟做错了什么？

我的功能：

```
function categories_agegroup_under25() {
            global $connection;
            $query = "SELECT *
                        FROM ptb_users, ptb_stats
                        WHERE ptb_users.account_type = \"User\" AND ptb_users.account_status = \"Active\" AND ptb_stats.user_id = ptb_users.id
                        AND ptb_stats.userage >= ADDDATE(CURRENT_DATE(), INTERVAL -25 YEAR)             

                        ORDER BY ptb_stats.user_age DESC
                        LIMIT 0,40";
            $categories_under25_set = mysql_query($query, $connection);
            confirm_query($categories_under25_set);
            return $categories_under25_set;
        } 
```

我的PHP：

```
<?php
 $dob = $age['user_age'];

function age_from_dob($dob) {

       $date = date_diff(date_create($dob), date_create('now'))->y;  
       return $date;
}

?>
    <?php
        $categories_under25_set = categories_agegroup_under25();
        while ($age = mysql_fetch_array($categories_under25_set)) {
            $date = age_from_dob($age['user_age']);

            echo"
            <div class=\"boxgrid caption\">
            <a href=\"profile.php?id={$age['id']}\"><img width=140px height= 180px src=\"data/photos/{$age['id']}/_default.jpg\"/></a>
            <div class=\"cover boxcaption\">
            <h58> {$age['display_name']}, ".$date."</h58>
            </div>
            </div>";
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:48:53.507

我猜你正在寻找

```
SUBDATE(CURRENT_DATE(), INTERVAL 25 YEAR) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:48:50.827

是`ptb_stats.userage`数字还是时间戳？如果它是一个数字，那么`where ptb_stats.userage < 25`它将起作用。

# c++ - SDL 加载 bmp 问题

> ID：14901333
> 
> 赞同：0
> 
> 时间：2013-02-15T18:45:50.360
> 
> 标签：c++, sdl

我一直在关注惰性 foo SDL 教程，并且在第 2 课中遇到了障碍。我的代码正是他想要的，但每当我尝试对以下图像进行 blit 时，我都会遇到相同的错误：

SDLtest.exe 中 0x68126030 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000004。

以下是不断产生此类错误的代码：

```
#include "SDL.h"
#include <string>

const int SCREEN_WIDTH = 640;
const int SCREEN_HEIGHT = 480;
const int SCREEN_BPP = 32;

SDL_Surface *message = NULL;
SDL_Surface *background = NULL;
SDL_Surface *screen = NULL;

SDL_Surface *load_image(std::string filename)
{
    SDL_Surface* loadedImage = NULL;
    SDL_Surface* optimizedImage = NULL;
    //load the image
    loadedImage = SDL_LoadBMP( filename.c_str() );

    if (loadedImage != NULL)
    {
        optimizedImage = SDL_DisplayFormat(loadedImage);
        SDL_FreeSurface(loadedImage);
    }
    return optimizedImage;
}

void apply_surface(int x, int y, SDL_Surface* source, SDL_Surface* destination)
{
    SDL_Rect offset;

    offset.x = x;
    offset.y = y;
    //blit the surface
    SDL_BlitSurface(source, NULL, destination, &offset);
}

int main(int argc, char* args[])
{
    if (SDL_Init(SDL_INIT_EVERYTHING) == -1)
    {
        return 1;
    }

    screen = SDL_SetVideoMode(SCREEN_WIDTH, SCREEN_HEIGHT, SCREEN_BPP, SDL_SWSURFACE);

    if (screen = NULL)
    {
        return 1;
    }

    SDL_WM_SetCaption("Hello World",NULL);
    //loading images
    message = load_image("hello.bmp");
    background = load_image("background.bmp");
    //image blitting
    apply_surface(0,0,background,screen);
    apply_surface(320,0,background,screen);
    apply_surface(0,240,background,screen);
    apply_surface(320,240,background,screen);
    apply_surface(180,140,message,screen);

    if (SDL_Flip(screen) == -1)
    {
        return 1;
    }

    SDL_Delay(2000);

    SDL_FreeSurface(message);
    SDL_FreeSurface(background);

    SDL_Quit();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:49:19.767

错误`Access violation reading location 0x00000004`是说您正在取消引用值为 4 的指针，而不是真实的东西。

追踪此问题的最简单方法是在调试器下运行，并查看导致问题的行。然后您可以回溯以找出指针的值在哪里弄乱了。然后你可能会发现像 Bert 指出的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T10:12:04.270

换行

```
if(screen = NULL) 
```

和

```
if(screen == NULL) 
```

# java - 为什么在为我的玩家分配名称时出现空指针异常？

> ID：14901345
> 
> 赞同：2
> 
> 时间：2013-02-15T18:46:36.787
> 
> 标签：java, android

我有一个 android 活动，用户在其中指定游戏中的玩家数量，以及赢得游戏所需的积分。一旦用户点击“开始”，一个新的 Game 对象应该被创建，不管有多少 Player 对象。我已经验证了这些数字是从 EditText 视图中正确提取的，但是由于某种原因，我在以下行从我的 Game 类中收到了一个空指针异常：

```
players[i].name = "Player " + i; 
```

这是我的 Game 类的代码，还有一个 Player 类，它有一个数据成员名称（我没有包括）。

```
 public class Game{
  public int i;
  public int numOfPlayers;
  public int maxScore;
  Player[] players;

      public Game(int numOfPlayers, int maxScore){
          this.maxScore = maxScore;
          this.numOfPlayers = numOfPlayers;

          players= new Player[numOfPlayers];
           for(i =0; i<numOfPlayers;i++){
              players[i].name = "Player " + i;
          }
  }
 } 
```

感谢您花时间阅读本文，感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T18:48:32.827

您需要实例化每个玩家对象以及数组：

```
for(i =0; i<numOfPlayers;i++){
   players[i] = new Player();
   players[i].name = "Player " + i;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T18:47:56.950

您创建了数组，但没有创建任何 Players。创建数组时，数组中的所有点最初都是空的。

创建播放器，然后指定其名称。

```
players[i] = new Player();
players[i].name = "Player " + i; 
```

# go - 在初始化期间建立的 Go 中的常量

> ID：14901347
> 
> 赞同：6
> 
> 时间：2013-02-15T18:46:38.097
> 
> 标签：go

在我的 Go 程序中，有一些配置值我希望在程序执行期间保持不变，但我希望能够在部署站点进行更改。据我所知，没有办法用`const`关键字来实现这一点，因为（再次，据我所知）它的值必须是在*compile time*指定的常量。这意味着实现我想要的唯一方法是声明普通变量并在包的`init`函数期间初始化它们。并不是说这不起作用，而是现在没有任何东西可以阻止这些伪常数的值发生变化。

我的两个问题是：

1.  我是否遗漏了一些关于如何`const`工作的东西？
2.  假设我不是，处理这个问题的首选方法是什么？一个公共函数，它返回一个我从不公开、从不更改的私有变量？只是希望人们不要更改变量，因为它们实际上是配置设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:45:04.217

创建一个文件“config.go”并创建要公开的变量。

不要导出它们（使它们全部小写）。`func`而是创建可以访问每个项目的public (大写) s。

```
package config

var x = 10

func X() int {
   return x
} 
```

当您想要这些变量时，您只需`import ./config`在代码中使用它们，如下所示：

```
if config.X() 
```

显然，您可以在 package 中设置变量`init`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T02:07:02.283

以下代码与@Christopher 的第二种方法几乎相同，只是它不是模块，它位于主包中。

```
package main

import (
    "os"
)

type Config struct {
    debug                bool
    key                  string
    proxyNumber          int
}

func (c *Config) Debug() bool {
    return c.debug
}
func (c *Config) Key() string {
    return c.key
}
func (c *Config) ProxyNumber() int {
    return c.proxyNumber
}

const (
    CONFIG_NAME = "config.ini"
)

var config *Config

func init() {
    DefaultConfig()
    if Exists(CONFIG_NAME) {
        //try to save the config file
    }else {
        //try to load from the config file

    }
}

func DefaultConfig() {
    config = &Config{debug:true, key:"abcde",
        proxyNumber:5,
    }
}

//Exist: check the file exist
func Exists(path string) bool {
    _, err := os.Stat(path)
    if err == nil { return true }
    if os.IsNotExist(err) { return false }
    return false
} 
```

您可以使用[config](https://github.com/robfig/config)加载和保存配置文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T16:54:04.197

这是一个非常好的问题，因为它深入研究了我怀疑可能是 Go 遗漏的东西——不可变状态。

从[语言参考](http://golang.org/ref/spec#Constant_expressions)中，“常量表达式可能只包含常量操作数并在编译时进行评估。”

你不能让 vars 保持不变，这是一种耻辱。Joe 的回答提出将封装作为一种解决方案，它会很好地工作 - 但它很冗长、乏味并且可能会引入错误。

相比之下，许多不纯函数式语言将可变变量与单赋值不可变值结合在一起。例如，Scala 有关键字 'val' 和 'var'；Scala 的 'var' 的含义与 Go 的 'var' 非常相似。不变性是工具箱中的一个有用工具，因为可以编写引用透明的无副作用函数以及有状态的可变过程代码。两者都有自己的位置。不变性也是一种有价值的并发工具，因为如果在 goroutine 之间共享不可变值，则无需担心可能的竞争条件。

所以在我看来，在它的众多优点中，这是 Go 的缺点之一。支持 val 和 var 可能并不难，不同之处在于编译器检查每个 val 是否只分配一次。

在添加该功能之前，您只能选择封装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T17:42:56.413

你可以这样做：

```
package main

import (
    "fmt"
    "strconv"
)

var a string

func main() {
    myvar, err := strconv.Atoi(a)
    if err != nil {
        fmt.Println(err)
    }
    fmt.Println(myvar)
} 
```

并编译程序

```
go build -ldflags '-X main.a 10' test.go 
```

这样你就可以在编译时定义一个常量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-15T09:58:54.340

只需使用带有[iniflags的标准](https://github.com/vharitonsky/iniflags)[go 标志](http://golang.org/pkg/flag/)。标准的 go 标志允许在程序启动时通过传递命令行标志设置任意配置变量，而 iniflags “神奇地”添加了对从 ini 文件读取配置变量的支持。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-02T03:11:31.903

您可以将变量包装在返回其值的函数中：

```
func genConst(x int) func() int {
    return func() int {
        return x
    }
}

var Constx = genConst(5)
var x1 = Constx() 
```

这样，即使在定义它的文件中，也不会意外更改该值

# linux - Git不断删除组写权限

> ID：14901348
> 
> 赞同：6
> 
> 时间：2013-02-15T18:46:40.740
> 
> 标签：linux, git, file-permissions

我有一个与多个开发人员共享的 git 存储库。我们使用它进行常规的 git 拉取和推送。不幸的是，每次我执行 git pull 更改的文件都会失去组写入权限。如何阻止 git 这样做？

我在 Ubuntu 12.04 LTS 上运行它。

共享仓库上的配置如下所示：

```
[core]
        repositoryformatversion = 0
        filemode = true
        bare = true
        sharedRepository = group 
```

我还对其运行了以下命令以尝试修复它

```
find repo.git -type d -exec chmod g+rws {} +
sudo chmod -R g+rw repo.git/objects 
```

当我分别想要 775 和 664 时，无论我最终得到 755 的文件夹和 644 的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T13:57:55.980

您应该使用`core.sharedRepository=group`or`core.sharedRepository=0664`设置。

参见例如[http://criticallog.thornet.net/2010/01/07/sharing-your-git-repository/](http://criticallog.thornet.net/2010/01/07/sharing-your-git-repository/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:53:17.093

你可以在一个 git hook 上使用类似的东西来做到这一点：

```
#!/bin/sh
#
# .git/hooks/post-merge

sudo chmod -R g+rw * 
```

它在每次 git pull 后被调用，并且文件 (.git/hooks/post-merge) 必须是可执行的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T12:37:58.117

有问题的用户还需要将他们的 umask 设置为 002。

# java - 有人可以向我解释这个 Array Java 程序要我做什么吗？

> ID：14901357
> 
> 赞同：-3
> 
> 时间：2013-02-15T18:47:16.203
> 
> 标签：java, arrays

我被困在阵列上的这一问题上。我还没有开始这个程序，因为我真的不明白它要我做什么！这是问题所在：

**编写一个名为 wordLengths 的方法，该方法接受一个表示文件名的字符串作为其参数。您的方法应该打开给定的文件，计算文件中每个标记中的字母数，并输出包含每个字母数的单词数的结果图。例如，以下文本：**

> 排序前：
> 
> 12 23 480 -18 75
> 
> 你好你今天感觉如何
> 
> 排序后：
> 
> -18 13 23 75 480
> 
> 感觉你好今天你怎么样

**您的方法应向控制台生成以下输出：**

```
1: 0    

2: 6    [There should be 6 * printed here]

3: 10   [There should be 10 * printed here]

4: 0

5: 5    [There should be 5 * printed here]

6: 1    [There should be 1 * printed here]

7: 2    [There should be 2 * printed here]

8: 2    [There should be 2 * printed here] 
```

所以 StackOverflow 相当有限，所以我无法向您展示输出的完整样式，但总而言之，“排序前：”部分后跟 2 个句子是一组，“排序后：”和下面2句是另一组。“之前”和“之后”排序之间用一个空格分隔。

我不明白输出是如何实现的，这是我的问题。我有一种感觉，1-8代表行号，但是0、6、10等代表什么？因为当我计算字长时，它们超过了 6 或 10……如果有人能向我解释这个程序想让我做什么，那将是一个很大的帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:52:21.213

1 - 8 是单词（或数字，或标记）的长度；-18 的长度为 3，“排序：”为 8。

0, 6, 10... 是长度为 1, 2, 3... 的单词的出现次数

顺便说一句，这不是一个真正适合这里的问题，但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:24:20.540

根据这个....

**编写一个名为 wordLengths 的方法，该方法接受一个表示文件名的字符串作为其参数。您的方法应该打开给定的文件，计算文件中每个标记中的字母数，并输出包含每个字母数的单词数的结果图。例如，以下文本：**

我们将其分解为几个步骤......

```
A   Write a method called word Lengths 
B   that accepts a String representing a file name as its argument. 
C   Your method should open the given file, 
D   count the number of letters in each token in the file, 
E   and output a result diagram of how many words contain each number of letters. 
F   For example, the following text: 
```

# 文本

```
Before sorting:
12 23 480 -18 75
hello how are you feeling today
After sorting:
-18 13 23 75 480
are feeling hello how today you 
```

陷入以下意识形态...

1 是 0，因为没有单词包含 1 个字母

2 是 6，因为六个单词包含两个字母 (12 23 75 13 23 75)

3 是 10，因为十个单词包含三个字母（480 -18 你好吗 -18 480 你好吗）

4 是 0，因为没有单词包含四个字母

5 是 5，因为 5 个单词包含 5 个字母（hello today after hello today）

6 是 1，因为一个单词包含六个字母（之前）

7 是 2 因为两个词包含七个字母（感觉）

8 是 2 因为两个单词包含八个字母（排序：排序：）

# php - 在 CodeIgniter 中构建类和对象以供将来升级？

> ID：14901358
> 
> 赞同：1
> 
> 时间：2013-02-15T18:47:22.730
> 
> 标签：php, codeigniter

上个月左右，我是 Codeigniter 的新手，对 OOP 还是很陌生。我一直在玩，一直在尝试制作一个包含 10 个帖子列表的博客页面，并且每个帖子都有不同的功能和可能性。

例如，将来我希望能够在帖子下方显示不同的按钮，具体取决于他们是登录用户还是帖子创建者等。

我最好创建一个新类'blog_posts'并为我在页面上显示的每个帖子创建一个实例吗？喜欢：

```
$this->load->library('blog_posts'); // in library or models, I'm not too sure?
$new_inst = new blog_posts;
$new_inst->show_post(); 
```

我的最终目标是在将来需要时轻松更新、更改或修改它，我在网上看到了简单的教程：

[http://blog.pisyek.com/2011/03/create-a-simple-blog-using-codeigniter-2-0-part-1/](http://blog.pisyek.com/2011/03/create-a-simple-blog-using-codeigniter-2-0-part-1/)

但是我看不到它们将来会被轻松更新和修改。我还没有看到很多其他 CI 应用程序使用新的类实例，所以我认为 CI 中可能有不同的方式？CI 中使用的新实例很多吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:49:54.693

从控制器开始。使用 Codeigniter——您可以在模型中执行的任何操作，都可以在控制器中执行。最简单的开始方式——只需将你的方法放在控制器中并设置一个简单的视图文件。

始终进行简单的健全性检查，以确保基础知识是正确的。设置一个控制器并回显一些文本。

在控制器中尝试：

*   使用活动记录命令从数据库中获取博客文章
*   将博客文章结果传递给 $Data
*   对于每一步，在控制器中回显某些内容以确认其工作

接下来——尝试使用 $Data 将博客结果传递给视图。

在其工作并且您了解基础知识之后 - 然后开始将您的方法推送到模型。当你重构和清理时，你的控制器会变得“更薄”。

通常对于博客文章，您将拥有一个模型，该模型将返回博客文章，并且还可能具有您的插入/更新/删除方法。我说可能是因为拥有一个只显示博客文章的公共博客控制器通常更有意义。然后是一个单独的博客管理控制器——它只对登录的用户可用。

这两个控制器——可以共享同一个博客模型。因此，例如在管理屏幕上显示博客文章 - 您可以使用与在公共页面上显示文章相同的方法。而您可能有一个管理员博客模型——它具有创建/更新/删除方法。

这样，您从一开始就强制执行非常明确的用户角色分离——查看公共博客的人不应该能够删除帖子。公开秀博客类不“负责”编辑。

这是我正在努力解决的问题——就像展示博客的常规方法是将所有方法放在一起。就“我们可以用博客文章做什么”而言，这是有道理的——但就用户角色而言，它没有任何意义。

好的下一步 - 处理您的创建、更新和删除方法。

接下来尝试创建您的登录方法。使登录过程分离控制器/模型/视图。

最终，您可以在博客管理类的构造函数中调用一个方法来检查以确保用户已登录 - 否则会将他们重定向到登录页面。这样您就不必在视图文件等中一遍又一遍地检查以确保它们被授权。

（强烈推荐net tuts网站上的免费codeigniter教程系列）

* * *

更杂乱无章：

从参与者（用户、角色）的角度来看这个过程——对我来说有助于澄清控制链应该是什么。真正关键的角色——比如有权删除所有博客文章的管理员——系统应该知道该角色在班级的顶部。

最好的“最坏的例子”是“这是超级管理员吗？” 检查视图代码。视图不应该知道有关管理员角色的任何信息。但是当您在某个视图文件中引用管理员角色时会更糟糕——当您想以某种方式更改该管理员角色时会发生什么？现在你必须进入你所有的视图文件！

类和方法名称 - 我正朝着不在 URL 中透露任何业务或 crud 或字段或任何其他类型的业务信息的方向发展。没有名词没有动词没有标识。尽可能简单，只有很少的公共网址“门”进入应用程序。

奇妙的是，codeigniter 可以很容易地将您的方法设为私有。对于关键页面：仅使用类中的公共索引方法进行重定向，并将所有其他方法设为私有。

使用直接指向私有方法的路由。或具有广泛名称的公共方法，如果成功 - 就像您已经确认了他们的凭据 - 转到类中的私有方法，如 $this->_showAdminPage()

这就是定义一个角色（如博客编辑器）的地方，从功能的角度来看，事情会变得非常清晰，并保持有价值的业务知识的私密性。

# ruby-on-rails - Rails 中的两个按钮

> ID：14901365
> 
> 赞同：0
> 
> 时间：2013-02-15T18:47:44.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图让 2 个按钮在相同形式的导轨中工作。我有一个带有添加用户和注册按钮的登录表单。我的控制器中有 2 个方法已经处理了这 2 个不同的请求。

但是，我阅读了有关使用附加参数进行解析以确定调用哪个按钮的建议。对于此解决方案，您不需要使用另一个控制器方法进行一定程度的间接解析吗？我读到让一个控制器调用另一个控制器不是好的 MVC 做法。在这种情况下，在 MVC 控制器类中调用另一个方法是一种不好的做法吗？

我的表格：

```
<%= form_tag("users/delegate", :method=>"post") do %>
    <%= label_tag(:user, "Username:") %>
    <%= text_field_tag(:user) %>
    <br/><br/>
    <%= label_tag(:password, "Password:") %>
    <%= password_field_tag(:password) %>
    <br/><br/>
    <%= submit_tag "Login", :name=>'login' %>
    <%= submit_tag "Add User" %>
<% end %> 
```

另外，如何将 post 请求中的参数传递给其他方法？我基本上做到了，但没有通过论点。我需要将参数传递给其他方法吗？是全局变量吗？

```
def delegate
    if params[:login]
      login_post()
    else
      add_post()
    end
  end

def login_post
    user = params[:user]
    password = params[:password]
    errCode = UserModel.login(user,password)
    if (errCode>0)
        count = errCode
        errCode = 1
    end
    final_obj = {:errCode=> errCode, :count=>count}
    respond_to do |format|
        format.json { render :json=>final_obj, :status=>200}
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:52:27.873

你应该这样做：

```
def delegate
  if params[:login]
    login_post(params[:user], params[:password])
  else
    add_post()
  end
end

def login_post(user, password)
  #do your things
end 
```

# wpf - WPF ListView with ItemsSource：如何知道模型何时添加项目

> ID：14901367
> 
> 赞同：1
> 
> 时间：2013-02-15T18:47:45.933
> 
> 标签：wpf, listview, itemssource

问题：让用户控件的“视图模型”（.xaml.cs 文件）知道 ListViewItem 已添加到 ListView 的“正确”方式是什么？请注意，[这篇文章](https://stackoverflow.com/questions/4890559/how-can-i-know-when-itemssource-changes)解决了一个不同的问题。

细节：

我有一个包含 ListView 和 DataContext 的 UserControl：

1.  ListView 有一个 ItemsSource={Binding ActionLogEntries}
2.  ActionLogEntries 是 DataContext 中的 ObservableCollection 属性

当某些事情发生时，数据上下文会将项目添加到 ListView。

但是没有 ListView.ItemAdded 事件。在数据上下文中的 ObservableCollection 上有一个 CollectionChanged 事件，但视图模型的该事件的处理程序可能会在项目添加到 ListView 之前被调用，因此这似乎不是一个好的策略。

仅供参考：这是因为当项目添加到 ListView 时，它不会自动滚动到新添加的项目，这是我必须添加的行为。大概我会在那之后使用 ScrollIntoView 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:07:29.617

所以至少有两种方法可以给这只猫剥皮：

1.  按照克莱门斯在评论我的问题时的解释
2.  [按照WPF Mentor](http://www.wpfmentor.com/2008/11/notification-when-items-are-added-or.html)的这篇文章做

解决方案 1 对于事件订阅来说似乎更自然，因为您不需要强制转换；IntelliSense 也不会在没有强制转换的情况下显示已实现接口的类成员，因此对于解决方案 2，您必须记住查看实现了哪些接口并检查那里的事件。以下是每个解决方案的订阅内容：

```
protected override void OnInitialized(EventArgs e)
{
    base.OnInitialized(e);

    // Solution 1, subscription:
    xActionListView.ItemContainerGenerator.ItemsChanged +=
        new ItemsChangedEventHandler(ActionLog_ItemsChanged);

    // Solution 2, subscription:
    ((INotifyCollectionChanged)xActionListView.Items).CollectionChanged += 
        new NotifyCollectionChangedEventHandler(ActionListView_CollectionChanged);
} 
```

但是解决方案 2 在处理程序中更容易使用事件 arg：

```
// Solution 1, handler: 
private void ActionLog_ItemsChanged(object sender, ItemsChangedEventArgs e)
{
    if (e.Action == NotifyCollectionChangedAction.Add)
    {
        // Solution 1, scroll the new item into view  
        xActionListView.ScrollIntoView(
            xActionListView.Items[e.Position.Index + e.Position.Offset]);
    }      
}

// Solution 2, handler: 
private void ActionListView_CollectionChanged(
    object sender, NotifyCollectionChangedEventArgs e)
{
    if (e.Action == NotifyCollectionChangedAction.Add)
    {
        // Solution 2, scroll the new item into view  
        xActionListView.ScrollIntoView(e.NewItems[0]);
    }      
} 
```

看起来在某些情况下，一种解决方案可能比另一种更合适：根据您需要的数据，事件数据可能更容易在其中一种或另一种中使用。

# linux - 如何记录 shell 脚本的输出并在屏幕上显示？

> ID：14901373
> 
> 赞同：6
> 
> 时间：2013-02-15T18:48:07.800
> 
> 标签：linux, shell, unix, logging

我正在运行一个名为 upgrade.sh 的脚本

并且 upgrade.sh 调用了一个名为 roll.sh 的脚本

```
roll.sh >> logfile.text 
```

但是 roll.sh 有一些问题和提示，并且重定向会阻止这些输出显示在屏幕上。我无法编辑 roll.sh。

我也试过`results=$(roll.sh)

即使那样，输出也没有出现在屏幕上

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T18:49:49.797

使用`tee`，它是专门为此目的而创建的：将标准输入转发到屏幕和一个或多个文件。如果您不想覆盖它，请确保使用`-a`附加选项。`logfile.text`

```
roll.sh | tee -a logfile.text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:50:21.963

你想要`tee`：

```
TEE(1)                           User Commands                          TEE(1)

NAME
       tee - read from standard input and write to standard output and files 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T18:54:03.503

处理该问题的常用方法是让脚本将其提示写入 stderr 而不是 stdout。

# ruby-on-rails - ActionDispatch::ShowExceptions - rails 将 2.3.x 升级到 3.2.x

> ID：14901374
> 
> 赞同：2
> 
> 时间：2013-02-15T18:48:14.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, ruby-on-rails-2

在我的**rails2.3.11** `app/controllers/application_controller.rb`我有这个

```
ActionDispatch::ShowExceptions::rescue_responses["ActionController::RoutingError"] = :not_found 
```

现在此功能已在**rails-3.2.11**中弃用，我正在获取此服务器日志

```
DEPRECATION WARNING: ActionDispatch::ShowExceptions.rescue_responses is deprecated. Please configure your exceptions using a railtie or in your application config instead. (called from ApplicationController at /home/mbussey/demo/app/controllers/application_controller.rb:31) 
```

可能是我的问题是重复的，但我需要有关如何`ActionDispatch::ShowExceptions::rescue_responses`在 rails3.2.11 中设置的具体帮助，所以我无法收到已弃用的警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:46:55.410

添加以下行

```
config.action_dispatch.rescue_responses["ActionController::RoutingError"] = :not_found 
```

或者你可以

```
config.action_dispatch.rescue_responses.merge!( 'ActionController::RoutingError' => :not_found) 
```

在`config/environments/`env 文件中，您应该能够添加（production.rb、development.rb 或 test.rb）或`config/application.rb`用于所有环境

请让我知道这是否适合您

# python - 使用 pyplot 返回复数值的绘图函数

> ID：14901376
> 
> 赞同：3
> 
> 时间：2013-02-15T18:48:20.657
> 
> 标签：python, numpy, matplotlib, scipy

我在 Facebook 上找到了这张图片并想绘制它，因为我认为这将是一个学习新东西的好机会。

[![爱情公式](../Images/4c182f69a08996a2b7c1fdf96f4162b0.png)](https://i.stack.imgur.com/1VFvU.jpg)
[（来源：[akamaihd.net](https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-ash4/482615_550821728272176_1584451064_n.jpg)）]

编码：

```
import numpy as np
import scipy.special
import pylab

x = np.linspace( -1.0, 1.0, 200 )
y = np.sqrt(  1-np.square(np.complex64(x) ) ) + np.complex64( scipy.special.cbrt( np.square( x ) ) )
pylab.plot( np.complex64( x ), y )
pylab.show() 
```

输出：

[![IMG](../Images/d75471a64a8284fddf2052335fda743c.png)](https://i.stack.imgur.com/go5Hj.png)

我无法获得图中给出的情节。为了绘图，我将公式重新排序为`y = f(x)`形式并将其转换为上面的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T19:09:19.373

```
import matplotlib.pyplot as plt
import numpy as np

y, x = np.ogrid[-1:2:100j, -1:1:100j]
plt.contour(x.ravel(), y.ravel(), x**2 + (y-((x**2)**(1.0/3)))**2, [1])
plt.axis('equal')
plt.show() 
```

![在此处输入图像描述](../Images/10c2d7172c19aaf3f18825b1335c21c1.png)

* * *

您可以使用纵横比来使曲线更像心形：

```
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
y, x = np.ogrid[-1.5:2:1000j, -2:2:1000j]
plt.contour(x.ravel(), y.ravel(), x**2 + (y-((x**2)**(1.0/3)))**2, [1])
ax.set_aspect(0.75) 
plt.show() 
```

![在此处输入图像描述](../Images/43edfb089e88657d13224039f3354cae.png)

# php - codeigniter - 如何在一个视图上创建一组以上的分页链接

> ID：14901379
> 
> 赞同：1
> 
> 时间：2013-02-15T18:48:27.697
> 
> 标签：php, codeigniter, pagination

**问题描述**

我有一种情况，我必须在同一个视图上显示父/子表 - 在两个不同的部分中。每个部分都需要自己的一组分页链接。第 2 部分中的内容（因此，分页链接）必须根据父部分/第 1 部分中选择的内容而变化。
所以具体来说，我有一个类别表，对于每个类别，我都有产品。我想在页面顶部显示一个类别列表，底部将显示所选类别中的产品（如果有）。

**第一次尝试：**

我试图以两种不同的方式解决这个问题。第一次编写代码时，我在控制器中有一个方法，它可以根据用户选择的 id 查找所有子类别。它看起来像这样：

```
 public function browsecategory($category_id)
    {               
        //find all products in category.            
        $this->load->model('category/product_category_model');  

                    //pagination for products
        $this->load->library('pagination');

        $config['base_url'] = site_url('/product/browsecategory/'.$category_id);
        $config['uri_segment'] = 4;
        $config['total_rows'] = count($productrecords);
        $config['per_page'] = 10;
        $config['num_links'] = 10;

        $this->pagination->initialize($config);
        $offset = ($this->uri->segment($config['uri_segment'])) ? $this->uri->segment($config['uri_segment']) : 0;

        $productrecords = $this->product_model->limit($config['per_page'], $offset)->find_all();

                    //find any subcategories for this category
        $this->load->model('category/category_model');

                  //pagination for subcategories
        $this->load->library('pagination');

        $config['base_url'] = site_url('/product/browsecategory/'.$category_id);
        $config['uri_segment'] = 5;
        $config['total_rows'] = count($this->category_model->find_all_by('parent_id', $category_id););
        $config['per_page'] = 10;
        $config['num_links'] = 10;

        $this->pagination->initialize($config);
        $offset = ($this->uri->segment($config['uri_segment'])) ? 

                    $this->uri->segment($config['uri_segment']) : 0;    
                    $subcategoriesrecords = $this->category_model->limit($config['per_page'], $offset)->find_all_by('parent_id', $category_id);

        Template::set('categorydetails', $categorydetails);
        Template::set('productrecords', $productrecords);
        Template::set('subcategoriesrecords', $subcategoriesrecords);
        Template::render();
    }//end browsecategory 
```

视图看起来像这样：

```
 <?php if (isset($subcategoriesrecords) && is_array($subcategoriesrecords) && count($subcategoriesrecords)) : ?>
   <?php echo $this->pagination->create_links(); ?> 
    <div>
        <h1 class="page-header">Sub-categories in <i> <?php echo $categorydetails->title; ?></i>:</h1>
    </div>
    <br />  
        <table class="table table-striped table-bordered">

        </table>
    <?php endif; ?>

    <?php if (isset($productrecords) && is_array($productrecords) && count($productrecords)) : ?>
    <?php echo $this->pagination->create_links(); ?> 
    <div>
        <h1 class="page-header">Products in category <i> <?php echo $categorydetails->title; ?></i>:</h1>
    </div>
    <br />  

    <?php endif; ?> 
```

这不起作用，因为我意识到我实际上只是在创建一个分页对象。虽然我有两组代码，每个数据集一组，但我用我声明的第二个分页对象覆盖（我认为）第一个分页对象。无论如何，当系统在视图上显示两组数据时，单击产品的分页链接将触发类别的分页。无论我做什么，我都无法浏览产品。

**第二次尝试**

我决定尝试使用ajax。所以在我的控制器中，我将查找类别和产品的功能分成两种方法，如下所示：

```
 public function browsecategory($category_id)
    {               
        //find any subcategories for this category
        $this->load->model('category/category_model');
        $this->load->model('category/product_category_model');  
        $subcategoriesrecords = $this->category_model->find_all_by('parent_id', $category_id);

        //look up category information ... used for display purposes. 
        $categorydetails = $this->category_model->find_by('category_id', $category_id);

        //pagination for subcategories  
        $this->load->library('pagination');

        $config['base_url'] = site_url('/product/browsecategory/'.$category_id);
        $config['uri_segment'] = 4;
        $config['total_rows'] = count($subcategoriesrecords);
        $config['per_page'] = 5;
        $config['num_links'] = 10;

        $this->pagination->initialize($config);

        $offset = ($this->uri->segment($config['uri_segment'])) ? $this->uri->segment($config['uri_segment']) : 0;
        $subcategoriesrecords = $this->category_model->limit($config['per_page'], $offset)->find_all_by('parent_id',$category_id);

        //check for any products within this current category.. if exists, include ajax to display

        if ( count ($this->product_category_model->find_all_by('category_id', $category_id)) > 0 ) {
            //add jquery logic to call getproductsincategory on document load

            $inline = "$.ajax({
              url:'http://myserver/myapp/product/getproductsincategory/".$category_id."',
              type:'POST',
              dataType:'html',
              contentType : 'text/html',
              success: function(returnDataFromController) {

        $('#products').html(returnDataFromController);
                },
                error:  function(jqXHR, textStatus, errorThrown)
                {
                          alert(errorThrown);
                }
            }); 
                ";
            Assets::add_js( $inline, 'inline' );
        }
        Template::set('categorydetails', $categorydetails);
        Template::set('subcategoriesrecords', $subcategoriesrecords);
        Template::render();
    }//end browsecategory

    public function getproductsincategory($category_id)
    {
        //find all products in category.            
        $this->load->model('category/product_category_model');  
        $this->load->model('category/category_model');

        //pagination for prodcuts
        $this->load->library('pagination');

        $config['base_url'] = site_url('/product/browsecategory/'.$category_id);
        $config['uri_segment'] = 5;
        $config['total_rows'] = count($productrecords);
        $config['per_page'] = 10;
        $config['num_links'] = 10;

        $this->pagination->initialize($config);

        $offset = ($this->uri->segment($config['uri_segment'])) ?                 $this->uri->segment($config['uri_segment']) : 0;
        $productrecords = $this->product_model->limit($config['per_page'], $offset)->find_all_by('category_id',$category_id);

                    //build html string for displaying products

        print $htmlstring;      
    } 
```

可悲的是，我仍然有相同的结果。系统显示两组链接，但它们似乎只与类别相关联。我无法使用产品分页链接对产品进行分页。

有人可以告诉我这是否可以做到......如果可以，我哪里出错了？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:18:26.580

查看[https://github.com/EllisLab/CodeIgniter/wiki/AJAX-Pagination-with-CI-Pagination-Library](https://github.com/EllisLab/CodeIgniter/wiki/AJAX-Pagination-with-CI-Pagination-Library)这里还有一堆关于如何使用它的教程[https://www.google.com /search?q=codeigniter+分页+ajax](https://www.google.com/search?q=codeigniter+pagination+ajax)

我认为主要问题是生成的分页链接只是下一个/上一个/第一个/最后一个结果的 href。您将需要覆盖第二组分页链接，以便它们请求并使用新数据重新填充第二个窗格。

# css - 页脚链接溢出

> ID：14901381
> 
> 赞同：0
> 
> 时间：2013-02-15T18:48:30.703
> 
> 标签：css, overflow, hyperlink

我的页脚中有一张图片链接到我的博客。这个链接溢出了版权，我不知道为什么。

我从来没有将版权链接添加到图像本身，但由于某种原因，当我将鼠标悬停在版权链接上时，它会链接到博客。我无法解释它以前从未发生在我身上。

任何帮助，将不胜感激。

HTML

```
 <footer>
        <div class="footer">
            <div class="left">
                    <img src="#" alt="">
                <h6>Title</h6>
                <p></p>
            </div>
            <div class="middle">
                <p><a href="#"><img src="#" alt=""></p>
            </div>
            <div class="right">
                <p><a href="#"><img src="#" alt=""></p>
            </div>
        </div>
    </footer> 
```

CSS

```
footer {
    width: 100%;
    background-color: #212119;
}

.footer {
    margin: 0 auto;
    width: 960px;
    height: 350px;
    margin-bottom: 10px;
    color: #474741;
}

.footer .left {
    margin-top: 20px;
    margin-left: 10px;
    float: left;
    width: 33%;
    text-align: left;
}

.footer .left img {
    margin-top: 40px;
    margin-left: 10px;
    margin-right: 10px;
    margin-bottom: 10px;
    float: left;
    height: 110px;
    width: 113px;
}

.footer .left h6 {
    color: #474741;
    margin-top: 10px;
    margin-bottom: 10px;
    font-size: 18px;
    font-weight: bold;
    font-family: arial, sans-serif;
}

.footer .left p {
    margin-top: 40px;
    font-size: 14px;
}

.footer .left p:last-child {
    margin-top: -15px;
    font-family: arial, sans-serif;
}

.footer .middle {
    text-align: center;
    margin-top: 40px;
    float: left;
    width: 33%;
}

.footer .middle p {
    margin-top: 0px;
}

.footer .right {
    text-align: center;
    float: right;
    width: 33%;
}

.footer .right p {
    margin-top: -152px;
}

.copyright {
    clear: both;
}

.copyright p{
    margin: 0 auto;
    width: 960px;
    color: #e8ad4f;
    font-size: 20px;
    margin-bottom: 10px;
    vertical-align: top;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:51:02.473

您需要关闭`a`标签...

```
<p><a href="#"><img src="#" alt=""></p> 
```

……变成……

```
<p><a href="#"><img src="#" alt=""></a></p> 
```

否则后面的所有内容都将包含在链接中。

# json - Titanium Mobile 行数据的详细视图

> ID：14901384
> 
> 赞同：1
> 
> 时间：2013-02-15T18:48:39.220
> 
> 标签：json, titanium, titanium-mobile

我正在尝试创建我的 json 数据的详细视图。我不确定如何真正接近它。我有事件监听器，但我不确定如何根据所选栏的名称提取数据。这是我的 json 拉取：

```
var win =Titanium.UI.currentWindow;

var data = [];

var xhr = Titanium.Network.createHTTPClient();

var barList = Titanium.UI.createTableView({
    height:366,
    width: 320,
    top:0,
    left:0
});

win.add(barList);

xhr.onload = function () {
    var json = JSON.parse(this.responseText);
    Ti.API.info(json.length);
    for (var i = 0; i < json.length; i++) {

        var row = Titanium.UI.createTableViewRow({
            hasChild: true,
            className: 'bar-row',
            filter: json[i].bar.name
        });
        var titleLabel = Titanium.UI.createLabel({
            text: json[i].bar.name,
            font: {
                fontSize: 14,
                fontWeight: 'bold'
            },
            left: 70,
            top: 5,
            height: 20,
            width: 210
        });
        row.add(titleLabel);
        var addressLabel = Titanium.UI.createLabel({
            text: json[i].bar.address,
            font: {
                fontSize: 10,
                fontWeight: 'normal'
            },
            left: 70,
            top: 25,
            height: 40,
            width: 200
        });
        row.add(addressLabel);
        var iconImage = Titanium.UI.createImageView({
            text: json[i].bar.logo_file_name,
            width: 50,
            height: 50,
            left: 10,
            top: 10
        });
        row.add(iconImage);
        data.push(row);

        row.addEventListener('click',function(e){
        var detail = Ti.UI.createWindow({
            title: e.rowData.title
        });

    detail.open({modal: true});

})

    }
    barList.data = data;

};

xhr.open('GET', 'http://site.com/db.json');

xhr.send(); 
```

JSON 数据：我正在寻找所选栏的名称、描述、mon_special、tues_special 等

[http://pastie.org/private/eyp9m5il6hrulbds76a8q](http://pastie.org/private/eyp9m5il6hrulbds76a8q)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:48:49.097

最简单的方法是将数据附加到您创建的行：

```
var row = Titanium.UI.createTableViewRow({
    hasChild: true,
    className: 'bar-row',
    filter: json[i].bar.name,
    barData : json[i].bar
}); 
```

然后通过*添加到 TableView 本身*的事件侦听器访问它（如果您已经创建了行本身，请不要使用事件的 rowData 对象）

```
barList.addEventListener('click', function(e) {
    // Get the row clicked, then get our custom attribute
    var passedJSONBarData = e.row.barData;
    // Now pass along through the window, or build the window here
    var detail = Ti.UI.createWindow({
        title: passedJSONBarData.title,
        barData : passedJSONBarData
    });

    detail.open({modal: true});
}); 
```

我将事件侦听器添加到表中，以便我们仅在您使用这种方法获得一些性能/内存节省时才创建函数。

# c# - Visual Studio 2010/2012：32 位还是 64 位？

> ID：14901387
> 
> 赞同：3
> 
> 时间：2013-02-15T18:48:48.030
> 
> 标签：c#, visual-studio-2010, visual-studio

我正在使用 C#。如果我在 Visual Studio 2010 或 2012 中创建解决方案，我将获得默认配置调试/发布和平台“任何 CPU”。我是在创建 32 位还是 64 位应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T18:50:38.373

“任何 CPU”的意思就是它所说的：**任何**CPU。

它将作为操作系统的本机位数运行。

如果选中`Prefer 32-bit`，它将在 x86-64 平台上作为 x86 运行。
（但它仍然可以作为 ARM 运行）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T18:51:21.093

您正在创建一个 .Net 可执行文件，它将在 32 位或 64 位上下文中的 32 位或 64 位机器上运行。如果您使用的是非托管资源，这实际上非常重要！

例如，[如果您正在为 AnyCPU 编译但使用 32 位 DLL，您的应用程序将在 64 位机器上崩溃](https://stackoverflow.com/a/8224167/7116)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T19:23:10.987

您必须注意，配置的平台设置实际上并未在 C# 项目中选择平台。这种混淆源于 C++ 被集成在 Visual Studio 中，这是一个设置*确实*很重要的 IDE。

相关设置由项目属性控制。项目 + 属性、构建选项卡、平台目标组合框。VS2010 项目默认为 x86，VS2012 项目勾选“首选 32 位”选项。您可以选择 AnyCPU 并取消选中 EXE 项目的首选 32 位选项以获得 64 位进程。这意味着此设置不一定与您的配置的平台设置相匹配。这引起了*很大*的混乱。

# javascript - Jquery 等待 AJAX 调用完成

> ID：14901394
> 
> 赞同：2
> 
> 时间：2013-02-15T18:49:17.087
> 
> 标签：javascript, jquery

我有一个用于保存表单数据的 ajax 函数。我希望它保持异步，因为用户可以随时点击保存。但是，我有另一个将表单转换为 PDF 的功能，我希望它在创建 PDF 之前运行保存功能（以防用户添加了更多数据）。有没有办法`$('input.submit')`在打开pdf之前等待保存完成？下面是我正在使用的 jQuery：

```
$("button#save").on('click', function (){
                $.ajax({
                    type: 'POST',
                    url: '<?php echo matry::base_to('utilities/crm/field_day_save');?>',
                    data: $("form#trip_form").serialize(),
                    dataType: 'json',
                    success: function (data)
                    {
                        $("#alerts").html(data.alert);
                        $("#form_id").val(data.id);
                    }
                    });
            });
        $("input.submit").on('click', function(event){
            event.preventDefault();
            $("button#save").trigger('click');
            window.open('<?php echo matry::base_to('custom_worddocs/field_day');?>' + '&fd_id=' + $("#form_id").val());
        }); 
```

简而言之，我想`$('button#save').click()`保持异步，但我想`$(input.submit)`在打开新窗口之前等待按钮保存完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T18:51:01.280

jQuery 的[`ajax`](http://api.jquery.com/jQuery.ajax/)函数返回一个[`jqXHR`](http://api.jquery.com/Types/#jqXHR)对象，除其他外，该对象的行为类似于[deferred](http://api.jquery.com/category/deferred-object/)。

通过仅从函数`window.open`内部调用[`then`](http://api.jquery.com/deferred.then/)，它将等待 AJAX 完成：

```
$("button#save").on('click', function () {

    var jqXHR = $.ajax({ /* your config... */ });

    $("input.submit").one('click', function(event) {
        event.preventDefault();
        $("button#save").trigger('click');

        jqXHR.then(function () {
            window.open('<?php echo matry::base_to('custom_worddocs/field_day');?>' + '&fd_id=' + $("#form_id").val());
        });
    });

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:00:16.407

让您的点击处理程序返回一个承诺对象，然后用于`triggerHandler()`触发点击事件并获取它的返回值。

```
$("button#save").on('click', function (){
    return $.ajax({
        ... 
```

和

```
...
$("button#save").triggerHandler('click').done(function(){
    window.open(...);
});
... 
```

概念证明：http: [//jsfiddle.net/SRzcy/](http://jsfiddle.net/SRzcy/)

# javascript - ie10 支持从剪贴板粘贴图片吗？

> ID：14901423
> 
> 赞同：4
> 
> 时间：2013-02-15T18:51:06.313
> 
> 标签：javascript, html, internet-explorer-10, onpaste

ie10是否支持支持复制和粘贴图像的能力。IE 有 fileReader api，这很好，但是有能力粘贴图片会很酷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T10:41:00.657

[很好的网站http://pasteboard.co](http://pasteboard.co)是一个很好的指标，表明无法将图像粘贴到 IE10 中。该网站非常努力地允许粘贴图像，但是它在 IE10 上失败了。

为了完整起见：

*   在 chrome/webkit 中，您必须处理事件`paste`并查看 `event.clipboardData`.

*   在 Firefox 中，您必须创建一个`<div/>`with 属性`"contenteditable"`。见[http://joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with-javascript/](http://joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with-javascript/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-19T22:10:03.593

似乎[http://snag.gy/](http://snag.gy/)支持从 IE 10 中的图像剪贴板复制和粘贴。至少它对我有用。一旦我将模式更改为 IE 8/9，它只适用于 Java 小程序。

# c# - WPF 依赖属性问题

> ID：14901426
> 
> 赞同：0
> 
> 时间：2013-02-15T18:51:09.897
> 
> 标签：c#, wpf, button, data-binding, combobox

我想知道是否有人可以解释将集合的选定值绑定到组合框之间的区别。

或将值绑定到按钮内容。

像那样

```
<ComboBox x:Name="_culturedTitleViewModelSelector" Visibility="Hidden"  Style="{StaticResource ResourceKey=_culturedTitleViewModelSelectorStyle}"
            ItemsSource="{Binding Path=AvailableCultures, Source={x:Static Localized:ResourcesManager.Current}}"
            SelectedValue="{Binding Path=CurrentCulture, Source={x:Static Localized:ResourcesManager.Current}}"

<Button x:Name="LanguageBtn" Content="{Binding Path=CurrentCulture, Source={x:StaticLocalized:ResourcesManager.Current}}" 
```

问题是如果我不在那里使用 ComboBox，则不会调用我在另一个类中的 DependencyProperty。

但是，如果我使用组合框，一切正常......尽管组合框没有做任何事情，它只是一个“workarround”在我的 CS 代码中，当我点击我的按钮时，我会这样做：

```
 ResourcesManager.Current.SwitchToNextCulture();
        //We use a dummy comboBox to make sure the LanguageBehavior Property is being notified.
        _culturedTitleViewModelSelector.SelectedItem = ResourcesManager.Current.CurrentCulture; 
```

如果我不将组合框的 SelectedItem 设置为另一种文化。我的 languageBehavior 课程没有收到通知。

：

```
public class LanguageBehavior
{
    public static DependencyProperty LanguageProperty =
        DependencyProperty.RegisterAttached("Language",
                                            typeof(string),
                                            typeof(LanguageBehavior),
                                            new UIPropertyMetadata(OnLanguageChanged));

    public static void SetLanguage(FrameworkElement target, string value)
    {
        target.SetValue(LanguageProperty, value);
    }
    public static string GetLanguage(FrameworkElement target)
    {
        return (string)target.GetValue(LanguageProperty);
    }

    private static void OnLanguageChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
    {
        var element = target as FrameworkElement;
        if (e.NewValue!=null)
        element.Language = XmlLanguage.GetLanguage(e.NewValue.ToString());
    }
} 
```

我希望 ComboBox Content 的工作方式与 Button Content 相同。

在我的 Generic.Xaml 中，我这样做：

```
 <Style TargetType="{x:Type TextBlock}" x:Key="_textBlockLanguageProperty">
    <Setter Property="WpfServices:LanguageBehavior.Language" Value="{Binding Path=CurrentCulture, Source={x:Static Localized:ResourcesManager.Current}}" 
        />
</Style> 
```

这就是 CurrentCulture

```
 public CultureInfo CurrentCulture
    {
        get { return CultureProvider.Current; }
        set
        {
            if (value != CultureProvider.Current)
            {
                CultureProvider.Current = value;
                OnCultureChanged();
            }
        }
    } 
```

当前的 ：

```
 public static ResourcesManager Current
    {
        get
        {
            if (_resourcesManager == null)
            {
                var cultureProvider = new BaseCultureProvider();
                _resourcesManager = new ResourcesManager(cultureProvider);
                _resourcesManager.Init();
            }
            return _resourcesManager;
        }
    } 
```

编辑 ：

我的 _culturedTitelViewModelSelectorStyle 是

```
 <Style TargetType="{x:Type ComboBox}" x:Key="_culturedTitleViewModelSelectorStyle">
    <Setter Property="DisplayMemberPath" Value="DisplayName" />
    <Setter Property="SelectedValuePath" Value="." />
    <Setter Property="HorizontalAlignment" Value="Right" />
    <Setter Property="MaxHeight" Value="40" />
    <Setter Property="FontSize" Value="20" />
    <Setter Property="Margin" Value="5" />
    <Setter Property="SelectedIndex" Value="0" />
    <Setter Property="IsSynchronizedWithCurrentItem" Value="True" />
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:34:44.607

在中，`ComboBox`您将 绑定`SelectedValue`到特定的文化。这将从可用文化列表中选择该文化，并因此触发`CurrentCulture`属性上的集合。

a的`Content`属性`Button`只是向用户显示一些东西，它没有做任何分配。它读取属性值，然后显示它。这就是为什么您需要手动更改`Click`事件中的文化以使其执行任何操作。

如果您希望用户能够从可用值列表中选择一个值，a `ComboBox`or`ListBox`是要走的路。A`Button`用于触发特定操作，而不是用于从列表中选择。

# javascript - 表达式引擎中的漂亮照片

> ID：14901427
> 
> 赞同：0
> 
> 时间：2013-02-15T18:51:14.447
> 
> 标签：javascript, expressionengine, prettyphoto

是的，我环顾四周，似乎无法找到这个问题的答案。

我正在运行 Expression Engine Core（最新版本），并且正在构建一个模板。我已经使用 Bootstrap 和其他一些代码构建了模板。我在模板中使用 prettyPhoto 时遇到问题。我有一个按钮，它调用了一个 prettyPhoto 模式窗口。我的静态 HTML 站点可以正常工作，但某处似乎存在某种冲突。我所有的 js 文件和 css 文件链接都很好，但由于某种原因，js 不适用于我的 prettyPhoto。我正在使用的代码是：

```
 <a href="#maphelp" class="prettyPhoto">Need Help?&nbsp;<i class="icon-help-circle"></i></a><div id="maphelp" class="hide">text goes in here</div> 
```

但我无法终生弄清楚为什么这不起作用。我已经尝试将 class= 设置为 rel= ，但这仍然无济于事。我使用了来自[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)的代码以及关于内联内容的部分。

我还在帮助页面中完成了修复，以确保它处于活动状态。仍然没有任何反应...

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:57:40.800

您是否尝试过将 prettyPhoto.js 移动到代码的底部，可能在页脚内，或者更好的是，在页脚下方。我通常会创建一个嵌入模板，在其中放置所有 js、xml、css 文件并像这样调用嵌入

```
<script src="{path="embeds/jsfile"}"></script> 
```

通过这种方式，它允许我将文件移动到我的可视模板中的所有位置。

另一种是使用无冲突

```
<script type="text/javascript">
  $.noConflict();
 // Code that uses other library's $ can follow here.
 </script> 
```

我希望这有帮助。

# python - 在扩展将文件存储在文件系统中的应用程序时，我需要考虑什么？

> ID：14901429
> 
> 赞同：1
> 
> 时间：2013-02-15T18:51:21.543
> 
> 标签：python, filesystems, scalability, pyramid

我对制作一个应用程序很感兴趣，用户可以在其中上传转换为 html 文档的大文件 (~2MB)。此应用程序将没有数据库。相反，这些 html 文件存储在文档源树之外的特定可写目录中。因此，随着更多文件的添加，该目录将变得越来越大。用户应该能够通过访问相应的 url 来查看这些 html 文件。除了所有安全问题，如果这个目录继续增长，我需要担心什么？当里面的文件更多时，访问里面的文件会花费更长的时间吗？它会因此而崩溃吗？我应该每 100 个文件左右创建一个新目录以防止这种情况吗？

重要的是，我想使用金字塔和 python 制作这个应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:07:54.370

您可能希望按用户、应用程序或类似方式对目录进行分区，以便无论如何都易于管理 - 例如，如果用户停止使用该服务，您可以删除他们的目录。另外我想你会把它们拉上拉链。如果您保持良好的解耦，那么您以后就可以改变主意。

我很想知道使用 SQLite 之类的东西如何为您工作，因为您可以为每个分区目录拥有一个 sqlite db。

我认为 HTML 文件比他们上传的文件大，所以为什么要存储大的 HTML 文件。

Mongodb之类的东西是不可能的？由于您的应用程序与多个服务器一起扩展，因此您在访问不同服务器上的其他文件时遇到了问题，除非您首先使用某种技术选择正确的服务器。那么您的服务器可能处于闲置状态，因为没有人想要那里的文件。

为什么仅将文件存储在目录中的限制，它是 POC 吗？

**编辑**

我发现阅读[http://blog.fogcreek.com/the-trello-tech-stack/](http://blog.fogcreek.com/the-trello-tech-stack/)之类的内容很有价值，我建议您找到一个已经在做您所做的事情并阅读他们的技术的网站。堆。

正如有人已经评论过为什么不使用 Amazon S3 或类似产品。

现实地问自己，你想象有多少用户，你真的想花很多精力担心成为下一个 Facebook 并尝试为后端做终极技术堆栈，当你可以让你的东西在那里被使用时。

几年前，我在一个系统上工作，该系统在文件系统上存储保险证书，我们用来用完 inode。！

我敢说这是一个糟糕的例子，看看什么对你和你的应用程序有用。

**编辑**

[我相信HAProxy](http://haproxy.1wt.eu/)旨在处理所有负载平衡问题。

正如我想象的那样，作为一个用户，我想[http://docs.yourdomain.com/myname/document.doc](http://docs.yourdomain.com/myname/document.doc) 虽然我认为它是如此明显的名称存在安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:07:49.237

这在很大程度上取决于您的文件系统。您可能想查找 git 人员遇到的问题（也使用基于文件系统的唯一数据库）。

通常，明智的做法是拆分该目录，例如通过获取文件名的前两个或三个字母（或这些字母的哈希）并根据该键将文件分组到子目录中。你会有这样的结构：

```
uploaddir/
    00/
         files whose name sha1 starts with 00
    01/
         files whose name sha1 starts with 01 
```

等等。这通过对可能很大的目录进行分区来减轻文件系统的负担。如果您想确保没有用户可以通过专门上传名称散列为相同初始字符的文件来执行拒绝服务攻击，您还可以对散列进行不同的播种或加盐或类似的方法。

具体来说，大目录的影响是非常特定于文件系统的。有些可能会变慢，有些可能会处理得很好，有些可能对文件有每个目录的限制。

# linq - 在 LINQ to EF 查询中构建动态 where 子句

> ID：14901430
> 
> 赞同：2
> 
> 时间：2013-02-15T18:51:24.433
> 
> 标签：linq, entity-framework

我正在尝试在通过 EF 引用表的 LINQ 查询中动态构建 where 子句，但出现以下错误：

```
'ClaimantLastName' could not be resolved in the current scope or context. Make sure that all referenced variables are in scope, that required schemas are loaded, and that namespaces are referenced correctly. Near member access expression, line 6, column 2. 
```

这是我正在尝试的：

```
string whereClause = string.Format("ClaimantLastName = '{0}' and ClaimantSSN = '{1}'", lastName, ssn); 
```

我也试过没有单引号也无济于事。

这是实际的查询：

```
return db.Claims.Where(whereClause).Select(
                    u => new AdvancedSearchResult
                    {
                        ClaimNumber = u.ClaimNumber,
.
.
. 
```

我正在尝试做的事情可能吗？这似乎真的很基本。我哪里错了？

**更新**：这是声明实体。

```
public static Claim CreateClaim(global::System.Int32 id, global::System.String claimantFirstName, global::System.String claimantLastName, global::System.String claimantSSN, global::System.DateTime dateOfInjury, global::System.String claimNumber, global::System.String claimantMiddleName, global::System.String claimantAddress1, global::System.String claimantAddress2, global::System.String claimantCity, global::System.String claimantState, global::System.String claimantZip, global::System.DateTime claimantDateOfBirth, global::System.String compensability, global::System.Boolean injuryType, global::System.String jurisdictionState, global::System.String status, global::System.String condition, global::System.String managingBranch, global::System.String bodyPart, global::System.String acceptedBodyPart, global::System.Boolean pGCase, global::System.String employersDefenseAttorney, global::System.String accidentDescription, global::System.String claimExaminerFirstName, global::System.String claimExaminerLastName, global::System.String claimExaminerEmail, global::System.String claimantAttorney, global::System.String workerId, global::System.String workerType)
{
    Claim claim = new Claim();
    claim.Id = id;
    claim.ClaimantFirstName = claimantFirstName;
    claim.ClaimantLastName = claimantLastName;
    claim.ClaimantSSN = claimantSSN;
    claim.DateOfInjury = dateOfInjury;
    claim.ClaimNumber = claimNumber;
    claim.ClaimantMiddleName = claimantMiddleName;
    claim.ClaimantAddress1 = claimantAddress1;
    claim.ClaimantAddress2 = claimantAddress2;
    claim.ClaimantCity = claimantCity;
    claim.ClaimantState = claimantState;
    claim.ClaimantZip = claimantZip;
    claim.ClaimantDateOfBirth = claimantDateOfBirth;
    claim.Compensability = compensability;
    claim.InjuryType = injuryType;
    claim.JurisdictionState = jurisdictionState;
    claim.Status = status;
    claim.Condition = condition;
    claim.ManagingBranch = managingBranch;
    claim.BodyPart = bodyPart;
    claim.AcceptedBodyPart = acceptedBodyPart;
    claim.PGCase = pGCase;
    claim.EmployersDefenseAttorney = employersDefenseAttorney;
    claim.AccidentDescription = accidentDescription;
    claim.ClaimExaminerFirstName = claimExaminerFirstName;
    claim.ClaimExaminerLastName = claimExaminerLastName;
    claim.ClaimExaminerEmail = claimExaminerEmail;
    claim.ClaimantAttorney = claimantAttorney;
    claim.WorkerId = workerId;
    claim.WorkerType = workerType;
    return claim;
} 
```

**更新**：添加了 Paul 的建议代码作为试用版。这实际上有效。

```
whereClause = string.Format("ClaimantLastName = \"{0}\" and ClaimantSSN = \"{1}\"", lastName, ssn);

                   List<URIntake.Claim> claims = new List<Claim>();
URIntake.Claim claim = new Claim();
claim.ClaimantFirstName = "Jay";
claim.ClaimantLastName = "Williams";
claim.ClaimantSSN = "654219870";
claim.ClaimantDateOfBirth = new DateTime(1993, 1, 2);
claims.Add(claim);

claim = new Claim();
claim.ClaimantFirstName = "Santa";
claim.ClaimantLastName = "Claus";
claim.ClaimantSSN = "012345678";
claim.ClaimantDateOfBirth = new DateTime(1893, 1, 2);
claims.Add(claim);

List<AdvancedSearchResult> selectedClaims = claims.AsQueryable().Where(whereClause).Select(
    u => new AdvancedSearchResult
    {
        ClaimNumber = u.ClaimNumber,
        DateOfBirth = u.ClaimantDateOfBirth,
        DateOfInjury = u.DateOfInjury,
        Denied = u.Compensability == "Denied"
    }).ToList(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T22:42:43.923

这是一个使用[System.Linq.Expressions](http://msdn.microsoft.com/en-au/library/system.linq.expressions.aspx)的示例。尽管此处的示例特定于您的`Claim`类，但您可以使此类函数成为通用函数，然后使用它们为您的所有实体动态构建谓词。我最近一直在使用为用户提供在任何实体属性（或属性组）函数上灵活搜索实体的功能，而无需对所有查询进行硬编码。

```
public Expression<Func<Claim, Boolean>> GetClaimWherePredicate(String name, String ssn)
{
  //the 'IN' parameter for expression ie claim=> condition
  ParameterExpression pe = Expression.Parameter(typeof(Claim), "Claim");

  //Expression for accessing last name property
  Expression eLastName = Expression.Property(pe, "ClaimantLastName");

  //Expression for accessing ssn property
  Expression eSsn = Expression.Property(pe, "ClaimantSSN");

  //the name constant to match 
  Expression cName = Expression.Constant(name);

  //the ssn constant to match 
  Expression cSsn = Expression.Constant(ssn);

  //the first expression: ClaimantLastName = ?
  Expression e1 = Expression.Equal(eLastName, cName);

  //the second expression:  ClaimantSSN = ?
  Expression e2 = Expression.Equal(eSsn, cSsn);

  //combine them with and
  Expression combined = Expression.And(e1, e2);

  //create and return the predicate
  return Expression.Lambda<Func<Claim, Boolean>>(combined, new ParameterExpression[] { pe });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T20:29:49.323

我个人非常喜欢使用 PredicateBuilder，因为它仍然具有 LINQ 的外观和感觉，而不是一些神奇的字符串。您可以拥有各种条件，然后将子句添加到谓词中，它将为您编译所有内容。

[http://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

这是我自己的代码中的一个剪切示例：

```
var predicate = PredicateBuilder.True<MarketingCabinetItem>();

//add vendor filter
if (vendorComboBox.SelectedValue != null && !String.IsNullOrEmpty(vendorComboBox.SelectedValue.ToString()))
{
    var vend = vendorComboBox.SelectedValue.ToString();
    predicate = predicate.And(m => m.Vendor == vend);
    vendPredicate.And(v => v.VendorName == vend);
}

//get all mkt item types in category
if (categoryComboBox.SelectedValue != null)
{
    var mktCatId = Guid.Parse(categoryComboBox.SelectedValue.ToString());
    predicate = predicate.And(p => p.CategoryCategoryId == mktCatId);
}

// get the marketing items using the inner and outer
var mktItems = (from mi in ctx.MarketingItem.AsExpandable()
                join mType in ctx.ItemType.AsExpandable() on mi.MarketingItemTypeId equals mType.Id
                join mktCat in ctx.Category.AsExpandable() on mType.MarketingItemCategoryId equals mktCat.Id
                join att in ctx.Attachment.AsExpandable() on mi.Id equals att.MarketingItemId
                join pri in ctx.Priority.AsExpandable() on mi.PriorityId equals pri.Id

                select new MarketingCabinetItem
                {
                   Id = mi.Id,
                   Title = mi.Title,
                   ItemTypeDescription = mType.Description,
                   PriorityLevel = pri.Level,
                   StartDate = mi.StartDate,
                   ExpirationDate = mi.ExpirationDate,
                   HasAttachments = att != null,
                   CategoryDescription = mktCat.Description
               }).Where(predicate).ToList(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T19:07:15.840

You could/need to use dynamic linq

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

`db.Where("Something = @0 And SomethingElse = @1", "Blah", 42)`

Seems to be how it is handled (note the lack of need for string.Format)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-02T21:37:51.420

简单的方法是使用[LINQExtension](https://github.com/kbenhddia/LinqExtension)和[LINQKIT](http://www.albahari.com/nutshell/linqkit.aspx)

```
using (var context = new workEntities() )
{

    Dictionary<string, List<string>> dictionary = new Dictionary<string, List<string>>();
    dictionary["Title"] = new List<string> {  
                    "Network Engineer", 
                    "Security Specialist", 
                    "=Web Developer"
                };
    dictionary["Salary"] = new List<string> { ">=2000" };
    dictionary["VacationHours"] = new List<string> { ">21" };
    dictionary["SickLeaveHours"] = new List<string> { "<5" };                
    dictionary["HireDate"] = new List<string> { 
                    ">=01/01/2000",
                    "28/02/2014" 
                };
    dictionary["ModifiedDate"] = new List<string> { DateTime.Now.ToString() };

    var data = context.Employee.CollectionToQuery(dictionary).ToList();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-20T09:17:26.320

```
 public class SearchField
    {
        public string Name { get; set; }
        public string @Value { get; set; }
        //public string Operator { get; set; }

        public SearchField(string Name, string @Value)
        {
            this.Name = Name;
            this.@Value = @Value;
            //Operator = "=";
        }
    }

    public class FilterLinq<T>
    {
        public static Expression<Func<T, Boolean>> GetWherePredicate(params SearchField[] SearchFieldList)
        {

            //the 'IN' parameter for expression ie T=> condition
            ParameterExpression pe = Expression.Parameter(typeof(T), typeof(T).Name);

            //combine them with and 1=1 Like no expression
            Expression combined = null;

            if (SearchFieldList != null)
            {
                foreach (var fieldItem in SearchFieldList)
                {
                    //Expression for accessing Fields name property
                    Expression columnNameProperty = Expression.Property(pe, fieldItem.Name);

                    //the name constant to match 
                    Expression columnValue = Expression.Constant(fieldItem.Value);

                    //the first expression: PatientantLastName = ?
                    Expression e1 = Expression.Equal(columnNameProperty, columnValue);

                    if (combined == null)
                    {
                        combined = e1;
                    }
                    else
                    {
                        combined = Expression.And(combined, e1);
                    }
                }
            }

            //create and return the predicate
            return Expression.Lambda<Func<T, Boolean>>(combined, new ParameterExpression[] { pe });
        }

    } 
```

你可以为任何课程调用它

```
ClinicEntities x = new ClinicEntities();

  dataGridView1.DataSource = x.Patient
                          .Where(
FilterLinq<Patient>.GetWherePredicate(
new SearchField("PatientNameEnglish", "Mona Mohamed Ali"), 
new SearchField("PatientHusbandName", "Ahmed Sallam Kareem"))).ToList(); 
```

最后感谢**[bmused](/users/1914530/bmused)**

# regex - 正则表达式 - 应该不匹配 NewLine？

> ID：14901433
> 
> 赞同：4
> 
> 时间：2013-02-15T18:51:31.120
> 
> 标签：regex, c#-4.0

承诺，我的正则表达式问题有一段时间了。..真的。

我在不应该的情况下以某种方式将换行符添加到某些匹配项中，并且我确定这是我误解的内容，或者，我得到的数据不是我所期望的。（这是可能的..！）

我定义了一个正则表达式： `new Regex(@"^\s*[0-9]{4}[A-Z]{2}[\s\*]\s*(?<token>.*?)\-(?<value>.*?)$", RegexOptions.Compiled | RegexOptions.Multiline | RegexOptions.IgnoreCase | RegexOptions.ExplicitCapture);`

我得到的文档/字符串被格式化为偶尔出现的行，例如：

```
0000AA Token1     - Value
0000AA Token2     - Value
0000AA Token3     - Value
0000AA Another Tok- Value 
```

当我像这样按顺序获取所有令牌时，上面的正则表达式效果很好。我得到四场比赛：

```
Match# <token> <value>
1      Token1      Value
2      Token2      Value
3      Token3      Value
4      Another Tok Value 
```

这很好。但是，有时用户会向我发送一个文件，其中令牌偶尔会丢失行，例如：

```
0000AA Token1     - Value
0000AA Token2     - Value
0000AA Token3     - Value
0000AA
0000AA Another Tok- Value 
```

发生这种情况时，我的正则表达式会给我以下值：

```
Match# <token>           <value>
1      Token1             Value
2      Token2             Value
3      Token3             Value
4      0000AA Another Tok Value 
```

我知道为什么，它与 #4 的标记匹配，从它上面的行开始。但是，当我将 'token' 分组更改为 时`(?<token>[^\n]*?)`，我仍然在 'token' 中获得相同的值。

我觉得我错过了一些明显的东西，因为如果 . 在不应该匹配换行符的时候匹配换行符，比我更多的人会因为它而引起骚动。我检查了传入的字符串 - 换行符 ARE`\n`和 not `\r\n`，但想知道是否还有其他问题。

再次干杯 - 迈克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T19:52:57.063

问题出在开头字母数字代码后面的**\s中；****\s**也匹配换行符，而您不想这样做。你基本上需要匹配**\s**而不是**\n**。这不能用正则表达式表达，但如果使用德摩根定理，则可以重写此表达式：

```
\s AND NOT \n = NOT(NOT \s OR \n) 
```

事实证明**NOT \s**可以写成**\S**：

```
\s AND NOT \n = NOT(NOT \s OR \n) = NOT(\S OR \n) 
```

这很容易表达为正则表达式：

```
\s AND NOT \n = NOT(NOT \s OR \n) = NOT(\S OR \n) = [^\S\n] 
```

因此，代替**\s**使用**[^\S\n]**，这意味着*匹配除换行符之外的所有内容，以及 \s 的否定*。

我在同一区域做了一些其他更改，因为我觉得有些东西是不必要的。如果您认为是，您可以将其添加回来。

```
Regex re = new Regex(@"^[0-9]{4}[A-Z]{2}[^\S\n]*(?<token>.*?)\-(?<value>.*?)$", RegexOptions.Compiled | RegexOptions.Multiline | RegexOptions.IgnoreCase | RegexOptions.ExplicitCapture); 
```

# php - 带有多行注释的 simplexml

> ID：14901435
> 
> 赞同：0
> 
> 时间：2013-02-15T18:51:57.590
> 
> 标签：php, xml, xml-parsing, simplexml

使用 simplexml 通过 php 解析时，是否可以在 xml 中添加多行注释？

我试过这个：

```
<!--
     my comment
     fsdfs
  --> 
```

但是得到：评论没有终止

我真的必须：

```
<!-- my comment -->
<!-- fsdfs --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:21:51.120

您的示例似乎是有效的 XML，不应产生错误。下面的代码经过测试，在 PHP v5.4.7 中没有产生错误或警告。

```
<?php
error_reporting(E_ALL | E_STRICT);

$string = <<< EOT
<xml>
    <foo>Hello</foo>
    <bar>World</bar>
    <!-- This is a single line comment. -->
    <!--
    This is a
    multi-line comment.
    -->
</xml>
EOT;

$xml = simplexml_load_string($string);

echo '<pre>';
var_dump($xml); 
```

输出：

```
object(SimpleXMLElement)#1 (3) {
  ["foo"]=>
  string(5) "Hello"
  ["bar"]=>
  string(5) "World"
  ["comment"]=>
  array(2) {
    [0]=>
    object(SimpleXMLElement)#2 (0) {
    }
    [1]=>
    object(SimpleXMLElement)#3 (0) {
    }
  }
} 
```

# python - Django中的反向自引用外键

> ID：14901438
> 
> 赞同：5
> 
> 时间：2013-02-15T18:52:19.113
> 
> 标签：python, database, django, self-referencing-table

对不起，如果这是一个愚蠢的问题，但我有点 Django 新手，找不到答案。

我有一个带有自引用字段的 Order 模型：

```
source = models.ForeignKey(
    'self',
    help_text = "[redacted]",
    verbose_name = "Source Order",
    blank = True,
    null = True,
) 
```

虽然如果我有一个订单并且我想知道它的来源，这可以正常工作，但我还需要获取一个订单的“子”列表 - 即，该订单是其来源的订单列表。这需要通过`filter()`s 来完成，还是有一个不错的 Django-y 方式来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T19:09:14.057

如果你有一个 Order 对象，你可以使用[反向关系](https://docs.djangoproject.com/en/1.4/topics/db/queries/#following-relationships-backward)：

```
child_orders = my_order.order_set.all() 
```

您可能希望为该`source`字段提供一个更具描述性的`related_name`值，以代替`order_set`上述值。

# java - 或在预期中

> ID：14901443
> 
> 赞同：2
> 
> 时间：2013-02-15T18:52:29.500
> 
> 标签：java, jmock

在指定我的期望时如何进行 OR 操作？参数可以是 10 或 11。

```
public void testGetRandom() {
    context.checking(new Expectations() {{
        oneOf (myrandom).isSpecific(10)  **OR** oneOf (myrandom).isSpecific(11);
    }});

    context.assertIsSatisfied();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:49:13.553

你想使用[参数匹配](http://jmock.org/matchers.html)- 最后一个

示例（未经测试）：

```
oneOf (myrandom).isSpecific(with(anyOf(10,11))); 
```

# jquery - 动态阻止 onKeyUp 函数

> ID：14901445
> 
> 赞同：0
> 
> 时间：2013-02-15T18:52:36.877
> 
> 标签：jquery, ajax, onkeyup

我正在尝试构建 Facebook 之类的链接共享预览。对于那些有视觉倾向的人，这样的事情：

![在此处输入图像描述](../Images/41122bec4c3987c3c816962476683bb9.png)

一切都很好，但有一些小事情。**链接共享预览是在相应的 textarea 中**的 keyup 函数触发的。像这样的东西：

```
$('#txtPublish').keyup(function(e){
                if ($(this).val() != '' && $(this).parent().find('.share-with').hasClass('active')) {   

                     detectHyperlink(e,this);
                  }
                  else {
            //do whatever
                  }
            }); 
```

而对应的detectHyperlink开头是这样的：

```
function detectHyperlink(e,textarea)
{
    if((e.which == 13 || e.which == 32 || e.which == 17) && ($(textarea).val().trim() != "")){
        var hyperlink_post = $('#txtPublish').val(); // make dynamic
        if(hyperlink_post != null) {
            hyperlink_post = " " + hyperlink_post;
            var urlRegex = /(https?\:\/\/|\s)[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})(\/+[a-z0-9_.\:\;-]*)*(\?[\&\%\|\+a-z0-9_=,\.\:\;-]*)?([\&\%\|\+&a-z0-9_=,\:\;\.-]*)([\!\#\/\&\%\|\+a-z0-9_=,\:\;\.-]*)}*/i;
            if(urlRegex.test(hyperlink_post)){
                        // SImple DOM Manipulation

            $.ajax({
                type: "post",
                url: '/controller/crawlHyperlink',
                data: {message: hyperlink_post},
                cache: false,
                success: function(data) { 
```

// 对于那些对这些东西感兴趣的人来说，数据是 JSON 格式的。

这工作正常，但问题是：detectHyperlink 方法不断被调用不止一次。也就是说，一旦 Textarea 检测到超链接并共享信息，它仍然会继续循环并向服务器发出 ajax 调用。因此，当我点击 Post 按钮时，它仍然会向服务器发出几次调用以检测超链接，然后才能实际发布此信息。

你们能看出原因吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:09:08.100

You may want to supress the default hyperlink action if you are overriding it with jQuery.

```
$('#txtPublish').keyup(function(e){
  if ($(this).val() != '' && $(this).parent().find('.share-with').hasClass('active')) {   
    detectHyperlink(e,this);
    e.preventDefault();//prevents default submit() from firing
    } 
```

In addition you may want to set a temporary flag when the ajax is called, and prevent it from executing again if the flag is set.

```
if (ajaxWasCalled==false) {
  $.ajax({
    ...
    ajaxWasCalled=true;
    });
  } 
```

# javascript - Chrome 以中文显示 JavaScript 文件

> ID：14901449
> 
> 赞同：6
> 
> 时间：2013-02-15T18:52:57.180
> 
> 标签：javascript, google-chrome

# 问题的屏幕截图

![铬 js 文件](../Images/8c0669eafdf202cb408427a45e68d617.png)

## 我的html

```
<!DOCTYPE html>
  <html>
    <head>
  <title></title>
    </head>
    <body>
  <script src="scripts/vendor/require.js"></script>
    </body>
  </html> 
```

## js文件

```
var d; 
```

这就是全部。该文件曾经是其主站点中的 require.js。但我删除了所有试图弄清楚发生了什么的东西。然后我删除了整个文件并创建了一个新文件（同名）。我可以用 Chrome 改变一些东西来以这种方式解释文件吗？我无法用我的任何其他项目重现该问题。我最初也使用[jam](http://jamjs.org/)下载了文件。真的，我可以开始一个新的项目文件夹并可能解决问题，但我很好奇它为什么会这样做。也许一些愚蠢的简单，因为我是新手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T19:58:21.717

这是我的 index.html 文件的编码问题（我用 UTF-8 编码重新保存了文件，问题就消失了）。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-19T07:57:48.120

问题是主文件和链接脚本文件必须有**相同的编码**，否则Chrome浏览器将无法正确加载。

例如，如果 html 文件以 UTF-16 LE 编码，而 javascript 文件以 UTF-8 编码，那么 Chrome 会默默地假定 javascript 文件也是 UTF-16 LE 并无法加载它。

您可以向脚本元素添加 charset 属性以提示编码，在这种情况下，Chrome 将正确加载它：

```
<html>
  <head><title>Test</title>  </head>
  <body>
    <script type="text/javascript" charset="UTF-8" src="script.js"></script>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:20:27.777

这绝对不是 chrome 问题（看看`content-length: 6`）您是否在保存文件后尝试重新启动服务器？

# optimization - 基于度量/密度的聚类/分组

> ID：14901456
> 
> 赞同：0
> 
> 时间：2013-02-15T18:53:17.840
> 
> 标签：optimization, cluster-analysis, max, metric

我有有限数量的点（云），并在它们上定义了一个度量。我想在这个云中找到**最大数量的集群**，这样：

1) 一个簇中任意两点之间的最大距离小于给定的 epsilon ( *const* )

2) 每个簇中恰好有 k ( *const* ) 个点

我查看了各种不同的聚类方法，并且限制内部最大距离的聚类不是问题（基于密度）。2）约束和找到“最大数量的集群 st”的要求似乎是有问题的。对于有效的解决方案有什么建议吗？

谢谢阿~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:13:29.600

实际上，我和@Anony-Mousse 的印象是一样的：你还没有理解你的问题和要求。

如果您希望您的集群大小为`k`，那么您将获得多少个集群是毫无疑问的：显然是`n /k`. 因此，您可以尝试使用产生与本教程中所述相同大小的集群的 k-means 变体：[Tutorial on same-size k-means](http://elki.dbs.ifi.lmu.de/wiki/Tutorial/SameSizeKMeans)并将所需的集群数设置为`n/k`。

请注意，这不是一个特别明智或好的聚类算法。它*可以满足*约束条件，但从**聚类分析的角度来看，聚类并没有真正的意义**。这是约束满足，但不是聚类分析。

为了也满足您的 epsilon 约束，您可以从这个初始解决方案开始（这可能是@Anony-Mousse 所说的“显而易见的方法”）并尝试执行相同类型的优化交换元素为了满足 epsilon 条件。

您可能需要多次重新启动，因为可能没有解决方案。

也可以看看：

[将 k 个相同大小的簇中的 n 个点分组](https://stackoverflow.com/questions/8796682/group-n-points-in-k-clusters-of-equal-size)

[具有相等簇大小的 K-means 算法变化](https://stackoverflow.com/questions/5452576/k-means-algorithm-variation-with-equal-cluster-size)

对于本质上多余的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:37:49.970

鉴于您的限制，可能没有解决方案。实际上，这可能经常发生……

最明显的情况是当您没有多个`k`点时。

但如果`epsilon`设置得太低，可能会有一些点不能再放入集群中。

我认为您需要重新考虑您的要求和问题，而不是寻找一种算法来解决可能无法满足的不合理的硬要求。

还要考虑您是否真的需要找到保证的最大值，或者只是一个好的解决方案。

有一些相当明显的方法至少可以快速找到一个好的近似值。

# c# - 在 C# 中使用 TextureBrush 重复采样图像

> ID：14901460
> 
> 赞同：0
> 
> 时间：2013-02-15T18:53:36.113
> 
> 标签：c#, gdi+, gdi, bmp, windows-applications

所以我在 C# 中创建了一个程序，它获取图像并将其拆分为图块。我正处于想要拍摄大图像并将其切成不同的图块并保存每个图块的地步。我遇到的问题是它适用于第一个图块，但所有其他图块都是空白的，我不知道为什么。这是我正在砍的代码。

```
Graphics g;
Image tempTile;
TextureBrush textureBrush;
int currRow = 1;
int currCol = 1;
int currX = 0; //Used for splitting. Initialized to origin x.
int currY = 0; //Used for splitting. Initialized to origin y.

//Sample our new image
textureBrush = new TextureBrush(myChopImage);

while (currY < myChopImage.Height)
{
    while (currX < myChopImage.Width)
    {
        //Create a single tile
        tempTile = new Bitmap(myTileWidth, myTileHeight);
        g = Graphics.FromImage(tempTile);

        //Fill our single tile with a portion of the chop image
        g.FillRectangle(textureBrush, new Rectangle(currX, currY, myTileWidth, myTileHeight));

        tempTile.Save("tile_" + currCol + "_" + currRow + ".bmp");

        currCol++;
        currX += myTileWidth;

        g.Dispose();
   }

   //Reset the current column to start over on the next row.
   currCol = 1;
   currX = 0;

   currRow++;
   currY += myTileHeight;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:14:54.407

你有空白瓷砖的原因是这一行：

`g.FillRectangle(textureBrush, new Rectangle(currX, currY, myTileWidth, myTileHeight));`

坐标`currX, currY`指定开始在图块上绘制的位置。在循环的第一次迭代之后，这些值超出了图块的范围。

更好的方法可能是尝试使用裁剪图像`Bitmap.Clone`

```
while (currY < myChopImage.Height)
{
    while (currX < myChopImage.Width)
    {
        tempTile = crop(myChopImage, new Rectangle(currX, currY, myTileWidth, myTileHeight));
        tempTile.Save("tile_" + currCol + "_" + currRow + ".bmp");

        currCol++;
        currX += myTileWidth;
   }

   //Reset the current column to start over on the next row.
   currCol = 1;
   currX = 0;

   currRow++;
   currY += myTileHeight;
} 
```

裁剪方法可能看起来像这样：

```
private Bitmap crop(Bitmap bmp, Rectangle cropArea)
{
   Bitmap bmpCrop = bmp.Clone(cropArea, bmp.PixelFormat);
   return bmpCrop;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:04:06.950

你的情况是这样吗：

```
 g.FillRectangle(textureBrush, new Rectangle(currX, currY, myTileWidth, myTileHeight)); 
```

call 试图填写其范围之外的坐标？

比如tile是10x10，首先调用：g.FillRectangle(textureBrush, new Rectangle(0, 0, 10, 10));

在第二次通话中，您正在有效地做

```
 g.FillRectangle(textureBrush, new Rectangle(10, 0, 10, 10)); 
```

哪个超出了 tempTile 的范围？

该`fillRectangle`调用应始终为`0,0,myTileWidth,myTileHeight`，它是您要更改的源位置*。*`textureBrush`不知道你会如何做到这一点，也许使用翻译变换将它翻译成相反的方向？

# php - 如何将不同类型的文件上传到 SQL，然后用 PHP 检索它们以供下载

> ID：14901461
> 
> 赞同：0
> 
> 时间：2013-02-15T18:53:36.700
> 
> 标签：php, mysql, frameworks, yii, download

我正在研究 Yii，我想上传和下载一些文件，我可以将一些文件上传到 blob 类型的 blob_document 字段中的 Documents 表中，现在我已经尝试这样做来下载文件

```
<?
    $file = Documents::model()->findByPk('3');
    $file = $file->blob_document;
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    echo $file;
    exit;
?> 
```

我正在下载一个 .txt 文件，它是正确的扩展名，但内容具有文件名而不是原始文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:55:10.873

$file->blob_document 只是文件名，要获取内容，可以使用file_get_contents，或者更好（内存消耗少），readfile() 来输出文件的内容。

```
<?php
    $file = Documents::model()->findByPk('3');
    $file = $file->blob_document;
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    readfile($file);
    exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:55:47.533

数据库中的内容是什么样的？也许它没有正确插入....

抽象 SQL，应该是一种犯罪；-)

# phpstorm - PhpStorm 忽略 TODO 功能中的文件/目录

> ID：14901462
> 
> 赞同：39
> 
> 时间：2013-02-15T18:53:40.783
> 
> 标签：phpstorm, todo

是否可以从 PhpStorm 的 TODO 功能中排除某些文件？例如，我正在使用 highcharts javascript 库。我不想看到他们标记的几十个 TODO 与我自己的混在一起。我不想排除这个目录，因为我仍然希望能够以方便的方式查看文件。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-03-24T09:25:23.557

1.  `File > Settings > Scope`添加新范围并确保您喜欢的文件是绿色的。
2.  打开 TODO 选项卡`View > Tool Windows > TODO`（Alt + 6）
3.  在 TODO 顶部单击`Scope Based`
4.  下面从下面的步骤 1 中选择您的新范围`Custom Local Scopes`

![在此处输入图像描述](../Images/743583ccda9b0823b1320a01148b75a8.png)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-02-15T19:13:50.697

是的，您可以 -**通过自定义范围**，该范围将包括所有但不需要的文件/文件夹（设置 | 范围），然后只需在 TODO 窗口中选择它。

查看这些文章了解详细信息：

*   [http://blog.jetbrains.com/webide/2012/10/managing-todo/](http://blog.jetbrains.com/webide/2012/10/managing-todo/)
*   [http://confluence.jetbrains.com/display/PhpStorm/Working+with+todo+comments+and+the+todo+tool+window](http://confluence.jetbrains.com/display/PhpStorm/Working+with+todo+comments+and+the+todo+tool+window)

**PS**
此功能仅从 v6 开始可用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-20T06:33:44.587

对于图书馆，有一个我刚刚发现的一键式解决方案。

您可以使用“外部库”功能来包含特定的库文件夹，之后 PHPStorm / IDEA 会将文件夹标记为库主目录并将其排除在检查之外。

请注意，您可以在项目目录中包含文件夹，即使它被称为“外部”库。

![在此处输入图像描述](../Images/90d0e0537078d60d912f9d01d6e2041b.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-26T07:11:17.967

从分析中排除代码（通常是作曲家依赖项）。

*   右键单击所需的文件夹
*   单击“将目录标记为”
*   点击“排除”

下面的截图示例： ![在此处输入图像描述](../Images/6df679f0f4aa9153674345a8aeb65f54.png)

# xcode - 如何将 IBAction 分配给第二个 ViewController？

> ID：14901463
> 
> 赞同：0
> 
> 时间：2013-02-15T18:53:53.580
> 
> 标签：xcode

我有这个带有两个 ViewController 的项目。这很简单。在第二个窗口中，我只想要一个按钮来执行操作（链接到 iTunes 商店）。我将代码添加到我的 .h 和 .m 文件中，但无法将操作链接到第二个窗口中的按钮。但我可以进入第一个……我发誓我浏览和搜索过，但我找不到这样的答案。应该很容易，不是吗？谢谢大家！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:01:09.617

如果您`IBAction`在一个 ViewController 中创建一个，它将不会从另一个 ViewController 中看到。这只是 ViewControllers 的本质。如果你愿意，你可以让第二个类继承另一个类的方法和变量。您可以通过更换来做到这一点

```
@interface SecondViewController: UIViewController { 
```

和

```
@interface SecondViewController: FirstViewController { 
```

在 SecondViewController.h

（如果出现错误，请`#import "FirstViewController.h"`在类的最顶部添加）

# java - 如何为 Eclipse 下载 MS 932 文本文件编码？

> ID：14901466
> 
> 赞同：0
> 
> 时间：2013-02-15T18:54:03.090
> 
> 标签：java, eclipse

我想在eclipse中运行一个java文件，但它有一些基本的日文字符才能运行。我去了 Window->Preferences->Text File Encoding->Other，但没有列出 MS 932。我怎样才能让这个库到 Eclipse。当然，我尝试在线检查，但没有。我尝试切换到 UTF-8，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:30:28.530

编码可能受到限制；也可以试试 SJIS。

```
native2ascii -reverse -encoding MS932 My.java temp.txt
... rename My.Java
native2ascii -encoding UTF-8 temp.txt My.java 
```

# javascript - 扩展原型而不是声明整个对象的优点

> ID：14901468
> 
> 赞同：1
> 
> 时间：2013-02-15T18:54:23.070
> 
> 标签：javascript, object, prototype, declaration

我什么时候应该使用第一个符号：

```
var object = {
    a: function() {
        // object.a method body
    },
    b: function() {
        // object.b method body
    },
    c: function() {
        // object.c method body
    },
}; 
```

第二个是什么时候？

```
function Class() {};

Class.prototype.a = function() {
    // object.a method body
};

Class.prototype.b = function() {
    // object.b method body
};

Class.prototype.c = function() {
    // object.c method body
};

var object = new Class(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:55:14.397

主要优点是在第二种情况下，所有实例共享函数，这使得对象更轻。它明确地将对象定义为概念上类的实例。

但正确的语法是

```
function MyClass(){
}
MyClass.prototype.a = function(){
};
...
var o = new MyClass(); 
```

它还允许您定义继承链：

```
function OtherClass(){
}
OtherClass.prototype = new MyClass(); // makes OtherClass extend MyClass
OtherClass.prototype.b = function(){
};
...
var o2 = new OtherClass(); 
```

`o2`兼具`OtherClass`和的功能`MyClass`。

MDN 在其[Introduction to Object-Oriented JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)中提供了更多详细信息。

# linq - 获取数据子集中的第一个值

> ID：14901472
> 
> 赞同：1
> 
> 时间：2013-02-15T18:54:35.177
> 
> 标签：linq, lambda

我从 LINQ 语句返回的结果如下所示：

```
 Id dataId dataVal 
 A  1      1000 
 A  2      2000 
 A  3      3000 
 A  3      3001 
 A  3      3002 
```

我想要的是获得第一项（dataId = 3 和 dataVal = 3000）

这是生成上述结果的查询：

```
 var myIds = myList
            .Where(a => ListIds.Contains(a.dataId))
            .Select(x=> new 
            {
                Id = x.Id,
                DataId = x.dataId,
                DataValue = x.DataValue
            }).ToList().Distinct(); 
```

我需要做一些分组还是有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:58:02.913

按 对您的项目进行分组`dataId`，然后从每个组中选择第一个项目：

```
var myIds = (from a in myList
             where ListIds.Contains(a.dataId)
             group a by a.dataId into g
             let firstA = g.OrderBy(x => x.DataValue).First()
             select new {
                Id = firstA.Id,
                DataId = g.Key,
                DataValue = firstA.DataValue
             }).ToList(); 
```

或者使用扩展方法（它以原始顺序返回第一项）：

```
var myIds = myList
        .Where(a => ListIds.Contains(a.dataId))
        .GroupBy(a => a.dataId)
        .Select(g => new 
        {
            Id = g.First().Id,
            DataId = g.Key,
            DataValue = g.First().DataValue
        }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:58:18.763

在 Select 之后使用 .FirstOrDefault()

```
 var myIds = myList
                .Where(a => ListIds.Contains(a.dataId))
                .Select(x=> new 
                {
                    Id = x.Id,
                    DataId = x.dataId,
                    DataValue = x.DataValue
                }).FirstOrDefault(); 
```

# php - 如何从 PHP curl 传递 openssl 上下文选项

> ID：14901476
> 
> 赞同：0
> 
> 时间：2013-02-15T18:54:50.273
> 
> 标签：php, curl, openssl

我正在尝试与我无法通过 PHP+curl 控制 SSL 的错误网络服务器交谈。

我直接针对openssl lib编写了一个小C程序，并通过它确定，如果我在调用SSL_CTX_set_options（）时显式启用openssl选项SSL_OP_NO_COMPRESSION和SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS，我可以让它工作。像这样：

```
SSL_CTX_set_options(ctx,  SSL_OP_NO_COMPRESSION | SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS) 
```

但是，...那是在我孤立的 C 程序中。

当 PHP+curl 建立 SSL 连接时，我可以以某种方式设置这些选项吗？CURL 似乎在更高的层次上运行。

到目前为止，这是我自己的发现：

*   我知道`curl_setopt`，但我在其列表中看不到类似的选项。

*   我找到了一个叫做[流选项](http://www.php.net/manual/en/context.ssl.php)的东西，但我不清楚它们如何或是否与 CURL 一起使用，而且我再次看到我需要的选项不匹配。

*   [openssl 上](http://php.net/manual/en/book.openssl.php)的 PHP手册似乎只涉及处理密钥和证书的功能。

*   然后，有[HttpRequest setSslOptions](http://php.net/manual/en/httprequest.setssloptions.php)，但同样，这似乎与 CURL 上下文的选项非常匹配。

* * *

**更新**

在“user2076645”对禁用压缩选项的响应之后，我 git 克隆了 PHP 的源代码并环顾四周。

具体来说，我发现了这段代码：

```
#if OPENSSL_VERSION_NUMBER >= 0x0090605fL
    ssl_ctx_options &= ~SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS;
#endif 
```

这明确**禁用**了我需要的选项。我也查看了提交消息，这是对可能对 SSL 的攻击的修复。

所以，我猜它不能从 PHP 完成，目前:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:21:43.177

不确定它是否有帮助，但有一个选项可以禁用压缩

[http://git.php.net/?p=php-src.git;a=commitdiff;h=4a01ddfb5569da1b87dd4cac95c3f709fb607396;hp=bb4d11b405ae1f37a8b0e4db630e80c5678f0746](http://git.php.net/?p=php-src.git;a=commitdiff;h=4a01ddfb5569da1b87dd4cac95c3f709fb607396;hp=bb4d11b405ae1f37a8b0e4db630e80c5678f0746)

# ios - 核心数据和持有 NSManagerObject

> ID：14901477
> 
> 赞同：2
> 
> 时间：2013-02-15T18:55:10.297
> 
> 标签：ios, objective-c, core-data

我对核心数据的真正运作方式没有清晰的了解。可能这就是我面临的结果。我有一个应用程序，在其中我通过应用程序使用单个**managedObjectContext**。我知道 managedObjectContext 拥有其中的所有 managedObjects ，并且在我重置上下文之前，该对象始终由上下文本身保留。所以，我要做的是获取一些主要对象，例如用户数据，然后继续在整个视图控制器中传递相同的对象。如果发生某些更改，则该对象将由其他一些代码刷新。这在几乎所有情况下都非常有效。

但是，我不会在任何**viewcontrollers**中保留指向对象的强指针。我只是对其进行弱引用，因为对象本身由 managedObjectContext 池保留。但是，当对象通过同步到远程刷新时，我有时会遇到这种策略的问题。我的弱指针变得毫无用处。它里面没有数据。所有属性都变为空。虽然它在我登录时显示了所有属性名称，但值只是 nil。如何确保我的对象始终刷新并与主上下文同步？这种保持指向 managedObject 的弱指针的方式是一个坏主意吗？我会说我不会将它保留在任何视图控制器中。所有的视图控制器都只使用弱指针。

我的代码看起来像这样，

在根视图控制器中，我获取数据，

```
-(void)tableView:(UITableView*)tv didSelectRowAtIndexPath:(NSIndexPath*)indexPath{
  User *user = [self.fetchedResultsController objectAtIndexPath:indexPath];
  FirstViewController *firstViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"firstViewController"];
  firstViewController.user = user;
} 
```

**第一视图控制器：**

```
@interface FirstViewController:UIViewController
  @property(nonatomic, weak) User *user
@end 
```

我在这里对对象做了很多事情，同时，我可能会从 rootViewController 更新对象。但是，由于它是同一个对象，因此它似乎大部分时间都在更新。

然后再次在第一个视图控制器中；

```
-(void)tableView:(UITableView*)tv didSelectRowAtIndexPath:(NSIndexPath*)indexPath{
  User *user = [self.fetchedResultsController objectAtIndexPath:indexPath];
  SecondViewController *secondViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"secondViewController"];
} 
```

**第二视图控制器**：

```
@interface SecondViewController:UIViewController
  @property(nonatomic, weak) User *user
@end 
```

再次，对象被弱引用。我对对象做了很多事情，或者其他一些视图控制器可能会从远程同步，但它会不断更新。该对象被传递到深层层次结构，直到最后一个视图控制器，所有这些视图控制器都保留指向它的弱指针。

大多数时候它都很好。但是，在我当前的视图控制器中很多时候，即使对象已同步到网络，它也似乎为空，我的意思是该对象仍然存在所有属性描述，但其中没有值。但是，过了一段时间又突然出现。

可能发生了什么。如何保持对象同步到根上下文并在发生任何更改时刷新？保持一个强有力的指针，这是否能够解决我所有的问题。我想这可能是因为对象没有出错。我如何才能在其中一个对象中专门排除一个对象，以便它对所有其他对象可见。

真的很感谢您的帮助和考虑。我可能英语不好，但如果有人理解我的问题并能以更好的方式表达，我也会为此感到高兴。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:02:27.323

如果您需要对象在刷新后仍然存在，请不要软弱地握住它，而是用力握住它。然后你可以`refreshObject:`在上下文刷新后调用它。或者，在您的访问器中使用延迟获取，以便当您访问您的对象并且它为 nil 时，我们会再次执行获取。

也可以看看：

[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreData/Articles/cdTroubleshooting.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreData/Articles/cdTroubleshooting.html)

# jasper-reports - 在 JasperReport 中将子报表添加到主报表

> ID：14901488
> 
> 赞同：0
> 
> 时间：2013-02-15T18:55:51.367
> 
> 标签：jasper-reports

我有一个报告，它应该显示它的项目。现在我需要在主报告中添加 3 个子报告。

为此，我使用了 iReports。

我的问题是，我**如何将项目列表传递给子报告？？？** 我找到了一些教程，但在这些情况下，子报告的数据位于第一个报告中。

就我而言，我有一个带有 4 个细节带的报告，其中 3 个带有子报告。

我的代码：

```
JRBeanCollectionDataSource beanCollection = new JRBeanCollectionDataSource(report.getList());
        jasperPrint = JasperFillManager.fillReport("C:\\Users\\Desktop\\Report.jasper", new HashMap(), beanCollection) ;
HttpServletResponse http = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
        http.addHeader("Content-disposition", "attachment; filename=report.pdf");
        ServletOutputStream stream = http.getOutputStream();
        JasperExportManager.exportReportToPdfStream(jasperPrint, stream); 
```

我正在使用 jsf 2.0。

ps：我看到我可以创建 4 个 jasperPrint，并将每个页面添加到主报告中，但我想知道它是否可能是我想要的。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:20:50.427

假设您的数据源具有以下结构

```
public class MyPOJO{
    private List<POJOSubData1> sub1;
    private List<POJOSubData2> sub2;
    private List<POJOSubData3> sub3;

    //getters & setters
    ... 
} 
```

您可以通过将以下内容指定给子报表的属性，将所需的数据源传递给您的子报表

```
Connection type : Use a datasource expression
Data Source Expression : $F{sub1} //or sub2 or sub3 
```

的应该`Field Class`是。`sub1``List`

此外，您不需要将隔离 1 个子报表放在 1 个详细信息带中，您可以将所有子报表放在一个详细信息带中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:37:05.873

如果您使用 Ireport 创建报表，则在 Ireport 中打开主报表并选择子报表并转到报表的属性部分，单击“参数”属性并单击“从主文件复制”选项卡，从那里您可以选择参数你要传给太阳报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:41:52.443

我最终做了什么：

```
for(JRPrintPage p : jasperPrint1.getPages()){

     jasperPrint.addPage(p);
} 
```

其中 jasperPrint 是主报告， jasperPrint1 是子报告（即它自己的报告）。这样，我可以正常将项目列表传递给所有报告。

```
 JRBeanCollectionDataSource beanCollection1 = new JRBeanCollectionDataSource(report.getSections().get(1).getRowsReports());
        JasperPrint jasperPrint1 = JasperFillManager.fillReport("C:\\Users\\Desktop\\Meeting.jasper", new HashMap(), beanCollection1) ; 
```

# cuda - cudaMemcpyToArray

> ID：14901491
> 
> 赞同：0
> 
> 时间：2013-02-15T18:56:07.510
> 
> 标签：cuda, cuda-arrays

我似乎对函数 cudaMemcpyToArray 有疑问。我有以下命令：

```
float *h_data = new float[bmp.width * bmp.height];
...
cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 0, 0, 0, cudaChannelFormatKindFloat);
cudaArray *cuArray;
cudaMallocArray(&cuArray, &channelDesc, bmp.width, bmp.height);
cudaMemcpyToArray(cuArray, 0, 0, h_data, bmp.width * bmp.height, cudaMemcpyHostToDevice); 
```

据我了解，这应该给我一个 cuArray 中的二维数组，该数组的尺寸为 bmp.width，来自 h_data 中的数据，这是一个尺寸为 bmp.width * bmp.height 的一维数组。不幸的是，它只是在最后一个命令上出现段错误。我做错了什么可怕的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:05:55.230

我认为@lmortenson 是在正确的轨道上，但我们不会将宽度*和*高度乘以`sizeof(float)`，而只是其中之一。

1.  您需要确保您的`bmp.width`和`bmp.height`参数符合[此处](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g04a7553c90322aef32f8544d5c356a10)指定的限制`Valid extents`。这些范围是元素，而不是字节。
2.  您需要将宽度和高度参数传递给元素中的[cudaMallocArray ，而不是字节。](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g6c5308ef1b088989cbf8a7500918584e)
3.  您需要将整体大小参数传递给[cudaMemcpyToArray](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g8bb7cc359d74e394138d980e340ccbe4)以字节为单位，而不是元素，但这通常采用以下形式`width*height*sizeof(float)`

我根据您的代码创建了一个简单的复制器，并且能够重现 seg 错误。我相信以下代码是我对已修复错误的改编：

```
#include <stdio.h>
#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

int main(){
  int width = 256;
  int height = 256;
  float *h_data = new float[width * height];
  cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 0, 0, 0, cudaChannelFormatKindFloat);
  cudaArray *cArray;
  cudaMallocArray(&cArray, &channelDesc, width, height, cudaArrayDefault);
  cudaCheckErrors("cudaMallocArray");
  cudaMemcpyToArray(cArray, 0, 0, h_data, width*height*sizeof(float), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudaMemcpyToArray");
  return 0;
} 
```

# javascript - 在动态画布上移动对象

> ID：14901497
> 
> 赞同：0
> 
> 时间：2013-02-15T18:56:50.450
> 
> 标签：javascript, html, canvas

首先有很多关于如何移动对象的问题，但这是不同的：假设我（显然）希望我的对象在背景“前面”，并且我的背景正在被改变/生成时间。因此，当我将对象从一个地方移动到另一个地方时，我希望如果对象没有阻止它出现在它之前的位置，那么会生成什么。我该如何处理？我应该记录对象所在的“会生成什么”并在它移动时将其放在上面，还是有一种不那么烦人的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:51:38.200

Canvas 有一个绘图设置，可以完全按照您的意愿进行操作！

您可以使用画布上下文的**globalCompositeOperation**。

这允许您将“正面”图像移动到“背景变化”图像之上。

这是一些代码和小提琴：http: [//jsfiddle.net/m1erickson/TrXB4/](http://jsfiddle.net/m1erickson/TrXB4/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; background-color:black; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

var canvas=document.getElementById("canvas");
var ctx=canvas.getContext("2d");

var sun = new Image();
var moon = new Image();
var earth = new Image();
function init(){
  sun.src = 'http://cdn-img.easyicon.cn/png/36/3642.png';
  moon.src = 'http://openclipart.org/people/purzen/purzen_A_cartoon_moon_rocket.svg';
  earth.src = 'http://iconbug.com/data/26/256/e5b23e861bc9979da6c3d03b75862b7e.png';
  setInterval(draw,100);
}

function draw() {
  var ctx = document.getElementById('canvas').getContext('2d');

  ctx.globalCompositeOperation = 'destination-over';
  ctx.clearRect(0,0,350,350); // clear canvas

  ctx.fillStyle = 'rgba(0,0,0,0.4)';
  ctx.strokeStyle = 'rgba(0,153,255,0.4)';
  ctx.save();
  ctx.translate(150,150);

  // Earth
  var time = new Date();
  ctx.rotate( ((2*Math.PI)/60)*time.getSeconds() + ((2*Math.PI)/60000)*time.getMilliseconds() );
  ctx.translate(105,0);
  ctx.fillRect(0,-12,50,24); // Shadow
  ctx.drawImage(earth,-12,-12,48,48);

  // Moon
  ctx.save();
  ctx.rotate( ((2*Math.PI)/6)*time.getSeconds() + ((2*Math.PI)/6000)*time.getMilliseconds() );
  ctx.translate(0,28.5);
  ctx.drawImage(moon,-3.5,-3.5,16,32);
  ctx.restore();

  ctx.restore();

  ctx.beginPath();
  ctx.arc(150,150,105,0,Math.PI*2,false); // Earth orbit
  ctx.stroke();

  ctx.drawImage(sun,100,100,96,96);
}

    init();    

    }); // end $(function(){});
</script>

</head>

<body>

<canvas id="canvas" width=350 height=350></canvas>

</body>
</html> 
```

# php - 将表单数据与多维数组匹配

> ID：14901498
> 
> 赞同：0
> 
> 时间：2013-02-15T18:56:53.393
> 
> 标签：php

当所有数据通过

**$_GET['组'],**

**$_GET['章节']**

**$_GET['文章']**

**与已设置的$laws[$group][$chapter][$article]**多维数组不匹配？

**我问是因为我打算在$laws 多维数组**中一次回显一篇文章，如果不存在这样的数组构造，则会返回错误。

非常感谢！

```
 <?php

session_start();
$laws = array(
    "group1" => array(
        "1" => array(
            "1" => "This is article (1) in chapter (1) of (group1)",
            "2" => "This is article (2) in chapter (1) of (group1)",
            "3" => "This is article (3) in chapter (1) of (group1)",
        ),
        "2" => array(
            "1" => "This is article (1) in chapter (2) of (group1)",
            "2" => "This is article (2) in chapter (2) of (group1)",
            "3" => "This is article (3) in chapter (2) of (group1)",
        ),
    ),
    "group2" => array(
        "1" => array(
            "1" => "This is article (1) in chapter (1) of (group2)",
            "2" => "This is article (2) in chapter (1) of (group2)",
            "3" => "This is article (3) in chapter (1) of (group2)",
        ),
        "2" => array(
            "1" => "This is article (1) in chapter (2) of (group2)",
            "2" => "This is article (2) in chapter (2) of (group2)",
            "3" => "This is article (3) in chapter (2) of (group2)",
        ),
    )
);

$_SESSION['group'] = $_GET['group'];
$_SESSION['chapter'] = $_GET['chapter'];
$_SESSION['article'] = $_GET['article'];

$group = $_SESSION['group'];
$chapter = $_SESSION['chapter'];
$article = $_SESSION['article'];

// Echo Article from $laws multidimensional Array

echo $laws[$group][$chapter][$article];
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:07:49.570

If you want to return FALSE when ALL the data received does not match:

```
$grp= $_GET['group'];
$chap = $_GET['chapter'];
$art = $_GET['article'];
return isset($laws[$grp]) || isset($laws[$grp][$chap]) || isset($laws[$grp][$chap][$art]); 
```

But I think you want to return FALSE when ANY of the data received does not match, you should then use:

```
return isset($laws[$grp][$chap][$art]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:09:05.647

If you just want to check if the given article exists in the given group and chapter use isset() [http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php):

```
$article_exists = isset($laws[$group][$chapter][$article]; 
```

# html - 打印一页

> ID：14901500
> 
> 赞同：0
> 
> 时间：2013-02-15T18:57:08.233
> 
> 标签：html, css, printing-web-page

我打算打印我的页面.....我不希望显示顶部......如何在纸张上打印时移除顶部............在下面提供我的小提琴

[http://jsfiddle.net/2dMuB/embedded/result/](http://jsfiddle.net/2dMuB/embedded/result/)

```
<div class="mainDiv" style="border-bottom: 1px solid grey; height: 80px;">
            <div class="subDiv" style="font-size: 24px; color: grey; padding-left: 35px;">
                Company LOGO
            </div>
            <div class="subDiv" style="padding-left: 50px;">
                <p><span style="font-weight: bold;  font-family: arial; color: #333;">welcome xyz!</span> xyz@defie.co</p>
            </div>
            <div class="subDivMenu" style="width: 911px; margin-top: 0px; padding-left: 17px; ">

                <div class="inline" style="padding-top: 12px; ">

                    <ul class="homePageLists" style="">
                                    <li style="padding-bottom: 5px; list-style: none; color: #333;">
                                      <a style="color: #cc0000; font-family: arial; font-size: 14px; font-weight: bold;" href="http://www.w3schools.com/" target="_blank">
                                         Menu
                                        </a>
                                    </li>
                                    <li style="padding-bottom: 5px; list-style: none; color: #; ">
                                      <a style="color: #666; font-weight: bold;" href="http://www.w3schools.com/" target="_blank">
                                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_search.png">
                                        Search
                                      </a>
                                    </li>
                                    <li style="padding-bottom: 5px; list-style: none; color: #653921; ">
                                      <a style="color: #666; font-weight: bold;" href="http://www.w3schools.com/" target="_blank">
                                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                        Create ID
                                      </a>
                                    </li>
                                    <li style="padding-bottom: 5px; list-style: none; color: #653921; ">
                                      <a style="color: #666; font-weight: bold;" href="http://www.w3schools.com/" target="_blank">
                                          <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                          Product List
                                        </a>
                                    </li>
                                    <li style="padding-bottom: 5px; list-style: none; color: #9e1c20; ">
                                      <a style="color: #666; font-weight: bold;" href="http://www.w3schools.com/" target="_blank">
                                          <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                          BOM List
                                        </a>
                                    </li>
                                    <li style="padding-bottom: 5px; list-style: none; color: #ff5100; ">
                                      <a style="color: #666; font-weight: bold;" href="http://www.w3schools.com/" target="_blank">
                                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_inventory.png">
                                        Customer List
                                      </a>
                                    </li>
                                    <li style="padding-bottom: 5px; list-style: none; color: #184179;">
                                      <a style="color: #666; font-weight: bold;" href="http://www.w3schools.com/" target="_blank">
                                          <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://intra.defie.co/images/cube_vender.png">
                                          Vendor List
                                        </a>
                                    </li>

                                </ul>

                </div><!--/.nav-collapse -->

            </div>
            <div class="subDiv" style="float: right;">

                  <p style="font-weight: bold;">ABC Systems</p>
                  <p>1234 lakeview Blvd, CA 94538</p>
                  <p>510-657-8981</p>

            </div>
        </div 
```

>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:00:33.473

将打印样式表添加到页面，例如：

`<link rel="stylesheet" href="print.css" type="text/css" media="print" />`

然后在该文件中，进行重置：

`body {margin:0; padding:0; line-height: 1.4em; word-spacing:1px; letter-spacing:0.2px; font: 12px Arial, Helvetica,"Lucida Grande", serif; color: #000;}`

然后设置打印时不想显示的元素：

`.homepagelinks {display:none;}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:01:18.110

```
@media print {
    .mainDiv {
        display: none;
    }
    /* any other styles you wish to target go here */
} 
```

# mysql - MySQL 的最大并发连接数

> ID：14901508
> 
> 赞同：52
> 
> 时间：2013-02-15T18:57:36.207
> 
> 标签：mysql, database

我想为我的大学的社交网站建立一个 MySQL 数据库。

我的应用最多可以有 10,000 个用户。可能的最大并发 MySQL 连接数是多少？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-02-15T18:59:49.683

根据 MySQL 文档：[http ://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_max_user_connections](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_max_user_connections)

```
 maximum range: 4,294,967,295  (e.g. 2**32 - 1) 
```

在您接近该限制之前很久，您的服务器上的内存、文件句柄和网络套接字可能已经用完。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-02-15T19:02:51.600

您可能总共有 10,000 个用户，但这与并发用户不同。在这种情况下，正在运行的并发脚本。

例如，如果您的访问者访问 index.php，并且它进行数据库查询以获取一些用户详细信息，则该请求可能会持续 250 毫秒。您可以通过仅在查询时打开和关闭它们来进一步限制这些 MySQL 连接的生存时间，而不是在脚本期间保持打开状态。

虽然很难制定任何类型的公式来预测一次将打开多少个连接，但我会冒险进行以下操作：

在任何给定时间，您的活跃用户可能不会超过 500 个，而用户群为 10,000 个。在这 500 个并发用户中，一次**最多**可能有 10-20 个并发请求。

这意味着，您实际上只建立了大约 10-20 个并发请求。

正如其他人所提到的，您在那个部门没有什么可担心的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-20T22:08:45.740

我可以向您保证，原始速度最终取决于索引的非标准使用，以实现使用大型表的超快速度。

# java - 使用没有集合的泛型

> ID：14901509
> 
> 赞同：7
> 
> 时间：2013-02-15T18:57:40.090
> 
> 标签：java

假设我有以下内容：

```
List<Apple> myList = new ArrayList<Apple>(); 
```

如果我想调用`myList.add(myApple)`，Java 期望 from`myApple`具有类型`Apple`，而不是任何其他类型（当然子类除外）。但是，如果我想要一个对象 ( `Blender`) 并根据内部声明的类型具有不同的方法签名`<>`并且*没有*方法重载怎么办？像这样：

```
Blender<Apple> Tool = new Blender<Apple>();
Tool.blendIt(new Apple()); //expects to have only apples in here

Blender<Banana> OtherTool = new Blender<Banana>();
OtherTool.blendIt(new Banana()); //only Banana's are permitted 
```

可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T18:59:42.120

您正在寻找[**通用类**](http://docs.oracle.com/javase/tutorial/java/generics/types.html)。

```
class Blender<T>{
T t;
public void blendIt(T arg){
//stuff
}
}

class Test {
   public void method() {
     Blender<Apple> blendedApple = new Blender<Apple>();
     blendedApple.blendIt(new Apple()); 
     Blender<Bannana> blendedBannana = new Blender<Bannana>();     
     blendedBannana.blendIt(new Bannana());
   }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:00:32.330

是的：

```
public class Blender<T> {
   public void blendIt(T arg) { ... }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T19:07:26.797

In Java generics are NOT just for `Collections` only. It is a general concept and applies to classes, methods, etc. You can create a generic class.

# wcf - WCF XmlSerialization 以某种方式被误解为 DataContract 序列化 - VS 2012 Update1 后

> ID：14901510
> 
> 赞同：0
> 
> 时间：2013-02-15T18:57:47.357
> 
> 标签：wcf, xml-serialization, .net-4.5, datacontractserializer, svcutil.exe

我们有一个 WCF / ASP.NET 托管的 Web 服务。服务契约中的数据类型使用 XSD.exe 生成的类型，因此使用`XmlSerialization`属性进行修饰。我们使用 SvcUtil 为它创建了一个客户端，包括使用`/ser:XmlSerializer`参数。工作了很多年。

我们刚刚升级了构建脚本以使用 VS 2012 和 v 8.0A Windows/.NET SDK NETFX 4.0 工具版本的 SvcUtil.exe (v 4.0.30319.17929)。

当我们的客户端（使用 VS 2012 和新的 8.0A SvcUtil 构建）尝试调用 WCF 服务时，我们现在看到一条奇怪的错误消息：

`Type 'System.Threading.Tasks.Task1[MyNamespace.MyClient.MyDataStructure]' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute. If the type is a collection, consider marking it with the CollectionDataContractAttribute. See the Microsoft .NET Framework documentation for other supported types.`

这个错误阻止了我们的应用程序能够调用 WCF 服务，我们被卡住了。

我注意到我们没有将参数传递给 SvcUtil for `/async`. 我还注意到 .NET SDK 8.0A (v 4.0.30319.17929) 的 SvcUtil 帮助表明默认设置为`generate synchronous and task-based asynchronous method signatures.` Is there some built-in disconnect between `System.Threading.Task`and `XmlSerializer`?

关于我们如何防止运行时以某种方式认为我们正在使用的`DataContractSerialization`建议`XmlSerialization`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:51:16.523

从微软那里得到答案，发布[在这里](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/afdfb613-49cf-44ca-a3a0-b051e644406e)。

简而言之，`/syncOnly`如果您打算使用 .NET 4.5 构建`SvcUtil`但针对 .NET 4 运行时，则需要这样做。

# html - 内联 SVG 不会随着视口的变化而缩放......？

> ID：14901511
> 
> 赞同：0
> 
> 时间：2013-02-15T18:57:50.903
> 
> 标签：html, svg

我试图让我编写/绘制的 SVG 随着视口的变化而按比例缩放，这就是我选择 sVG 作为图像格式的原因。

但是，它似乎根本没有缩放。

我做了我的研究告诉我的所有事情，为 SVG 元素添加了宽度、高度和一些属性，并添加了一个 div 容器父级；然后在 CSS 中添加 max-height / width 和 height / width : 100% 。

知道为什么这个 SVG 不缩放以及如何让它缩放吗？

这是相关页面的实时示例：[https ://dl.dropbox.com/u/270523/inlineSVG.html](https://dl.dropbox.com/u/270523/inlineSVG.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:25:12.677

CSS on`#bookmark`状态：`width: 100%; max-width: 106px;`这意味着除非窗口小于 106px 宽（大多数/所有浏览器不允许），否则 svg 将永远不会缩放。

很难准确判断您想要实现什么，但如果您声明`width: 10%`您会观察到 SVG 确实根据浏览器宽度进行缩放。

# sql - 按列分组，单列中有 COUNT（列）>1

> ID：14901513
> 
> 赞同：0
> 
> 时间：2013-02-15T18:57:51.973
> 
> 标签：sql

1.  项目清单

我正在尝试加入两个表，过滤掉具有唯一值的 item_id，并显示包含相同值的任何 item_id。我正在使用的 SQL 语句似乎只工作了一半，除了它返回我认为我知道这个数字的所有内容，但我猜不是。

这句话拉动了一切。

```
--join two tables filtering out and item_id that has a unique value and displaying any 
--item_id that contains the same value

SELECT inv_bin.bin, inv_bin.quantity, inv_bin.inv_bin_uid, inv_bin.inv_mast_uid,
       inv_mast.inv_mast_uid,inv_mast.item_desc, inv_mast.item_id
FROM   inv_bin left join inv_mast on inv_bin.inv_mast_uid = inv_mast.inv_mast_uid  
WHERE inv_mast.item_id in ( SELECT item_id from inv_mast
                            GROUP BY item_id HAVING COUNT (item_id) >= 1 ) 
      AND inv_bin.bin not like 'rec'
      AND inv_bin.bin not like 'DEFBIN'
      AND inv_bin.bin not like 'DEFAULTBIN'
ORDER BY inv_mast.item_id; 
```

但是，如果我*`'='`*从 中删除，*`Group By item_id Having COUNT (item_id) >= 1 )`*则查询不会返回任何内容。我知道我在 item_id 列中有相同的数据：

```
bin        item_id
07C-C15    002-09-121
Z07-OS     002-09-121 
```

无论如何，有人可以告诉我哪里出了问题，在我看来，使用 > 1 会以相同的值显示 item_id 中的所有内容。

谢谢，布雷特

```
bin         quantity   inv_bin_uid   inv_mast_uid   inv_mast_uid   item_id
07C-C15     0          135           70             70             002-09-121
Z07-OS      10         130277        70             70             002-09-121
04C-B21     0          354           289            289            032-36-26
04C-B04     0          356           291            291            032-38-26
02A-B01     2          101           48             48             5-40050720L  
Z29-SKID00  0          117           48             48             5-40050720L 
```

这是产生所需结果的完成语句。

```
/*join two tables filtering out and item_id that has a unique value and displaying any 
item_id that contains the same value */

SELECT inv_bin.bin, inv_bin.quantity, inv_bin.inv_bin_uid, inv_bin.inv_mast_uid,
inv_mast.item_desc, inv_mast.item_id

from inv_bin left join inv_mast on inv_bin.inv_mast_uid = inv_mast.inv_mast_uid  

where inv_bin.inv_mast_uid in ( 
SELECT inv_mast_uid FROM inv_bin  
WHERE inv_bin.bin NOT IN ('REC','DEFBIN','DEFAULTBIN')
GROUP BY inv_mast_uid HAVING COUNT(inv_mast_uid)>1 )

and inv_bin.bin not like 'rec'
and inv_bin.bin not like 'defbin'
and inv_bin.bin not like 'Defaulbin'
/*look up filtering out ids based on not like statements*/

ORDER BY inv_bin.inv_mast_uid; 
```

再次感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:51:16.030

这不是答案，只是一个问题/评论：

在不了解有关您的数据库架构的更多详细信息的情况下，我想知道您是否只是在 group-by 子句中使用了错误的表？

如果您的“inv_mast”表仅包含唯一的“item_id”，那么您永远不会从该特定表中获得高于 1 的计数。

尝试使用“inv_bin”表上的 ID：

```
SELECT item_id 
FROM inv_bin
GROUP BY item_id HAVING COUNT(item_id) > 1 
```

# vb.net - 内存不足异常 - 非托管内存

> ID：14901520
> 
> 赞同：2
> 
> 时间：2013-02-15T18:58:26.720
> 
> 标签：vb.net, webbrowser-control, web-scraping, out-of-memory, unmanaged-memory

我正在开发一个网络爬虫，它通常工作得很好。它将浏览大多数网站上的数千个页面，并成功完成，没有任何问题。

在一些网站上，我反复看到同样的问题。

```
Insufficient memory to continue the execution of the program. 
```

* * *

**编辑：** 我使用 perfmon 来确定泄漏发生在非托管内存中。我知道，因为随着程序运行，“私有字节”不断增加，而所有堆中的字节保持稳定。

（实际上，它上升和下降，但逐渐攀升。它通常在我上面列出的代码部分中耗尽内存，但我不认为该部分是原因，而是可能是第一个受害者，因为它使用了大量内存...我认为它会在之后发布它）

* * *

**编辑2：**

我按照这个网站上的指示：http: [//www.codeproject.com/Articles/42721/Best-Practices-No-5-Detecting-NET-application-memo](http://www.codeproject.com/Articles/42721/Best-Practices-No-5-Detecting-NET-application-memo)

我使用 debugDiag 来检查程序。

分析数据后，调试诊断告诉我泄漏的原因：

```
jscript.dll is responsible for 1.10 GBytes worth of outstanding allocations. The following are the top 2 memory consuming functions:

jscript!Parser::GenerateCode+167: 498.19 MBytes worth of outstanding allocations.

jscript!NoRelAlloc::PvAlloc+96: 292.99 MBytes worth of outstanding allocations. 
```

我没有在我的应用程序中引用 jscript.dll，它必须被我正在使用的 Web 浏览器控件使用。

```
System.Windows.Forms.WebBrowser 
```

这是我的猜测，至少。

我还收到一个消息框，弹出标题为“来自网页的消息”，其内容是“X 行内存不足”。

所以，我想我可以处理 webbrowser 对象并取回我的记忆 - 所以我添加了一个带有以下代码的按钮：

```
Me.wbMain.Dispose() 'dispose all of thwe web-browsers
frmDebugger.wbDebugMain.Dispose()
Me.WBNewWin.Dispose()

GC.Collect() 'just for the heck of it 
```

所以，在运行了一段时间后，我停止了抓取并点击了我的新按钮......它根本没有任何区别。我正在观看 perfmon 中的总“Private Bytes”，它甚至没有动。

任何想法，任何人？

* * *

**编辑3：**

我尝试了一堆推荐的解决方案，但似乎都没有奏效。

有人建议这可能是由于图像未从缓存中清除，但我禁用了图像加载，所以我知道这不是问题。

我也听说IE7有问题，升级到IE8就可以解决。我有IE8，它仍然泄漏内存。

有人建议使用 webbrowser 控件最小化表单会释放一些内存。我试过了，它没有任何区别。

我还被告知我不应该期望内存使用量会下降，因为我将不得不等待垃圾收集器。这不是托管代码中的泄漏，因此 GC.Collect() 不会做任何事情。它在非托管内存中。显然，javascript 功能使用不同的内存，并且没有手动方式来强制收集。但是它已经到了崩溃的地步，所以显然存在问题。

我在这个问题上增加了 50 的赏金，我会将它奖励给任何帮助我解决泄漏的人。我想尝试这个解决方案：http: [//www.codeproject.com/Questions/322884/WPF-WebBrowser-control-vs-Internet-Explorer-browse](http://www.codeproject.com/Questions/322884/WPF-WebBrowser-control-vs-Internet-Explorer-browse) 但我无法弄清楚 vb.net 的等效项是什么。我尝试过在线转换器，但在转换此代码时它们会出错（尽管它们对于我过去转换的其他代码工作正常）

如果我无法解决泄漏，我会将它奖励给将我上面提到的页面从 c# 转换为 vb.net 的任何人。

我的后备计划是创建一个仅包含 webbrowser 的单独应用程序，并与该进程通信，直到它内存不足，此时我将重新启动它（当我完全关闭我的应用程序时，内存被释放）。这对于我的应用程序来说远非理想，因为网络浏览器非常紧密地融入了我的项目。

* * *

**编辑 4**

我尝试实施建议的 javascript 注入 - 这是我的代码：

（我在导航到新页面之前触发它）

```
Public Shared Sub Clean_JS(ByRef wb As System.Windows.Forms.WebBrowser)

        Dim args As Object() = {"document.body"}

        Dim head As HtmlElement = wb.Document.GetElementsByTagName("head")(0)

        Dim scriptEl0 As HtmlElement = wb.Document.CreateElement("script")
        Dim element0 As mshtml.IHTMLScriptElement = DirectCast(scriptEl0.DomElement, mshtml.IHTMLScriptElement)
        element0.text = "function ReleaseHandler() {" + vbCrLf + "        var EvtMgr = (function() {" + vbCrLf + "            var listenerMap = {};" + vbCrLf + " " + vbCrLf + "            // Public interface" + vbCrLf + "            return {" + vbCrLf + "                addListener: function(evtName, node, handler) {" + vbCrLf + "                    node[""on"" + evtName] = handler;" + vbCrLf + "                    var eventList = listenerMap[evtName];" + vbCrLf + "                    if (!eventList) {" + vbCrLf + "                        eventList = listenerMap[evtName] = [];" + vbCrLf + "                    }" + vbCrLf + "                    eventList.push(node);" + vbCrLf + "                }," + vbCrLf + " " + vbCrLf + "                removeAllListeners: function() {" + vbCrLf + "                    for (var evtName in listenerMap) {" + vbCrLf + "                        var nodeList = listenerMap[evtName];" + vbCrLf + "                        for (var i = 0, node; node = nodeList[i]; i++) {" + vbCrLf + "                            node[""on"" + evtName] = null;" + vbCrLf + "                        }" + vbCrLf + "                    }" + vbCrLf + "                }" + vbCrLf + "            }" + vbCrLf + "        })();" + vbCrLf + "    }"
        head.AppendChild(scriptEl0)

        Dim scriptEl1 As HtmlElement = wb.Document.CreateElement("script")
        Dim element1 As mshtml.IHTMLScriptElement = DirectCast(scriptEl1.DomElement, mshtml.IHTMLScriptElement)
        element1.text = "function ReleaseHandler() {" + vbCrLf + "        var EvtMgr = (function() {" + vbCrLf + "            var listenerMap = {};" + vbCrLf + " " + vbCrLf + "            // Public interface" + vbCrLf + "            return {" + vbCrLf + "                addListener: function(evtName, node, handler) {" + vbCrLf + "                    node[""on"" + evtName] = handler;" + vbCrLf + "                    var eventList = listenerMap[evtName];" + vbCrLf + "                    if (!eventList) {" + vbCrLf + "                        eventList = listenerMap[evtName] = [];" + vbCrLf + "                    }" + vbCrLf + "                    eventList.push(node);" + vbCrLf + "                }," + vbCrLf + " " + vbCrLf + "                removeAllListeners: function() {" + vbCrLf + "                    for (var evtName in listenerMap) {" + vbCrLf + "                        var nodeList = listenerMap[evtName];" + vbCrLf + "                        for (var i = 0, node; node = nodeList[i]; i++) {" + vbCrLf + "                            node[""on"" + evtName] = null;" + vbCrLf + "                        }" + vbCrLf + "                    }" + vbCrLf + "                }" + vbCrLf + "            }" + vbCrLf + "        })();" + vbCrLf + "    }"
        head.AppendChild(scriptEl1)

        wb.Document.InvokeScript("ReleaseHandler")
        wb.Document.InvokeScript("purge", args)

End Sub 
```

不幸的是，我仍然看到 perfmon 中的隐私字节在增加。

谁能看出我的逻辑有任何缺陷？我正在尝试实施此修复： http: [//www.codeproject.com/Questions/322884/WPF-WebBrowser-control-vs-Internet-Explorer-browse](http://www.codeproject.com/Questions/322884/WPF-WebBrowser-control-vs-Internet-Explorer-browse)

顺便说一句 - 我使用这样的简单代码对其进行了测试：

```
object[] args = {"my important message"};
webBrowser1.Document.InvokeScript("alert",args); 
```

和这个：

```
Dim head As HtmlElement = wb.Document.GetElementsByTagName("head")(0)
Dim scriptEl As HtmlElement = wb.Document.CreateElement("script")
Dim element As mshtml.IHTMLScriptElement = DirectCast(scriptEl.DomElement, mshtml.IHTMLScriptElement)
element.text = "function sayHello() { alert('hello') }"
head.AppendChild(scriptEl)
wb.Document.InvokeScript("sayHello") 
```

它在两个测试用例中都显示了消息。

奇怪的是，当我尝试通过这样做来测试脚本注入时：

```
 Dim head As HtmlElement = wbMain.Document.GetElementsByTagName("head")(0)
    Dim scriptEl As HtmlElement = wbMain.Document.CreateElement("script")
    Dim element As mshtml.IHTMLScriptElement = DirectCast(scriptEl.DomElement, mshtml.IHTMLScriptElement)
    element.text = "function sayHello() { alert('hello') }"
    head.AppendChild(scriptEl)
    wbMain.Document.InvokeScript("sayHello")

    RTB_RawHTML.Text = "TEST" + vbCrLf + wbMain.DocumentText 
```

我没有看到文本框中反映的注入代码 - 我看到的唯一变化是出现了“测试”一词（当页面从 documentCompleted 事件完成加载时，我运行代码 RTB_RawHTML.Text = wbMain.DocumentText...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:11:48.830

您引用的文章中的代码不是 C#，而是 Javascript。我相信这个想法是将 JS 注入您的 HTML 页面，以便它可以在页面卸载时运行，这将清除现有的 JS 事件。

您可以查看这篇文章，将 JS 添加到 WebBrowser 控件中的页面：http:
[//www.codeproject.com/Articles/94777/Adding-a-Javascript-Block-Into-a-Form-Hosted-by-We](http://www.codeproject.com/Articles/94777/Adding-a-Javascript-Block-Into-a-Form-Hosted-by-We)

```
Dim scriptText As String =
    <string>
        function ReleaseHandler() {
                var EvtMgr = (function() {
                    var listenerMap = {};

                    // Public interface
                    return {
                        addListener: function(evtName, node, handler) {
                            node["on" + evtName] = handler;
                            var eventList = listenerMap[evtName];
                            if (!eventList) {
                                eventList = listenerMap[evtName] = [];
                            }
                            eventList.push(node);
                        },

                        removeAllListeners: function() {
                            for (var evtName in listenerMap) {
                                var nodeList = listenerMap[evtName];
                                for (var i = 0, node; node = nodeList[i]; i++) {
                                    node["on" + evtName] = null;
                                }
                            }
                        }
                    }
                })();
            }

        function purge(d){
            var a = d.attributes, i, l, n;
            if (a) {
                for (i = a.length - 1; i >= 0 ; i -= 1) {
                    n = a[i].name;
                    if (typeof d[n] === 'function') {
                        d[n] = null;
                    }
                }
            }
            a = d.childNodes;
            if (a) {
                l = a.length;
                for (i = 0; i < l; i += 1) {
                    purge(d.childNodes[i]);
                }
            }
        }

    <string>

Dim head As HtmlElement = webBrowser1.Document.GetElementsByTagName("head")(0)
Dim script As HtmlElement = webBrowser1.Document.CreateElement("script")
Dim domElement As IHTMLScriptElement = CType(script.DomElement, IHTMLScriptElement)
domElement.text = scriptText
head.AppendChild(script) 
```

我没有测试过这段代码（我不确定我会怎么做，因为你自己没有提供示例代码）......这更多的是对你如何进行的建议。我从来没有尝试将 JS 插入 WebBrowser 控件，所以我不太确定你将如何执行它（因为理论上，JS 在加载页面后已经执行，因此你注入的 JS 会“迟到”）。

您还需要找到一种连接文档的方法，以便在卸载时调用这两个函数。这个想法是通过消除 JS 对象和事件来消除 JS 内存泄漏，因此仅声明函数是不够的。我在网上看到很多文章讨论了 WebBrowser 控件中的 OnBeforeUnload 事件是如何被破坏的（它不能正确触发），因此您可能需要做很多工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:26:23.630

可能您可以尝试不将 cookie 保存到用户计算机的代码。导致临时项目可能对用户计算机造成几个问题

# sql - 按数字、字符对 varchar 列进行排序

> ID：14901521
> 
> 赞同：1
> 
> 时间：2013-02-15T18:58:31.420
> 
> 标签：sql, postgresql, natural-sort

我有一个`varchar column [flat_number]`具有一些价值的

```
A1A1A
A1A2A
A1A101A
A3A5A
12
A2
A3 
```

我希望得到按数字排序的结果，然后先按字符排序

喜欢

```
12
A2
A3
A1A1A
A1A2A
A1A101A
A3A5A 
```

我设法按数字对其进行排序（如果该列仅包含使用正则表达式的数字 0-9，我将其视为一个数字），然后我按字符对其进行排序，但它似乎对 A1A101A 的列值有效（有多个数字和字符的组合）

```
CASE
  WHEN length(flat_number) < 10 AND flat_number SIMILAR TO '[0-9]+'
THEN
  flat_number::int
END
ELSE
  NULL
END,
( SELECT COALESCE( match[1], NULL ) FROM regexp_matches( flat_number, '[^0-9]+' ) AS match ),
( SELECT COALESCE( left( match[1], 9), NULL ) FROM regexp_matches( flat_number, '([0-9]+$)' ) AS match )::int 
```

当前查询的工作方式为

如果该列仅包含数字 [0-9]，我将其转换为 int 并将其排序为 ElSE，我将列拆分为 2 部分，并尝试在开头提取列字符并在结尾提取数字。

是否有更好的等待时间，并确保返回预期的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:01:54.610

我认为以下将起作用：

```
order by (case when flat_number ~ '^[0-9]+$' then 0 else 1 end),
         (case when flat_number ~ '^[0-9]+$' then length(flat_number) end),
         flat_number 
```

这首先对数字进行排序，使用一种技巧将它们按数字顺序排列，然后对其余的数字进行排序。

# ruby-on-rails - Heroku Rails 应用程序显示“应用程序错误”

> ID：14901522
> 
> 赞同：0
> 
> 时间：2013-02-15T18:58:53.683
> 
> 标签：ruby-on-rails, postgresql, heroku

当我尝试访问 Heroku 上最近发布的 Rails 应用程序时，它给了我以下错误：

```
Application Error
An error occurred in the application and your page could not be served. Please try again in a few moments.

If you are the application owner, check your logs for details. 
```

当我检查“heroku 日志”时，我看到以下内容：

```
2013-02-15T18:56:06+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=olivetalk.org fwd=76.168.74.9 dyno= queue= wait= connect= service= status=503 bytes=
2013-02-15T18:56:07+00:00 heroku[run.3278]: Client connection closed. Sending SIGHUP to all processes
2013-02-15T18:56:08+00:00 heroku[run.3278]: Process exited with status 0
2013-02-15T18:56:08+00:00 heroku[run.3278]: State changed from up to complete
2013-02-15T18:56:15+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=olivetalk.org fwd=76.168.74.9 dyno= queue= wait= connect= service= status=503 bytes=
2013-02-15T18:56:17+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=olivetalk.org fwd=76.168.74.9 dyno= queue= wait= connect= service= status=503 bytes= 
```

我无法弄清楚可能出了什么问题。有什么建议吗？

**更新：**这是来自 loggly 插件的错误：

```
2013-02-15T19:50:43.659Z,default,54.234.29.222,115 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/config.ru:in `new'
2013-02-15T19:50:43.659Z,default,54.234.29.222,176 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
2013-02-15T19:50:43.659Z,default,54.234.29.222,179 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
2013-02-15T19:50:43.659Z,default,54.234.29.222,129 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/config.ru:3:in `block in <main>'
2013-02-15T19:50:43.659Z,default,54.234.29.222,198 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
2013-02-15T19:50:43.66Z,default,54.234.29.222,177 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -  from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:304:in `wrapped_app'
2013-02-15T19:50:43.66Z,default,54.234.29.222,182 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -  from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands/server.rb:46:in `app'
2013-02-15T19:50:43.66Z,default,54.234.29.222,169 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -  from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:200:in `app'
2013-02-15T19:50:43.66Z,default,54.234.29.222,176 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -  from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:40:in `parse_file'
2013-02-15T19:50:43.66Z,default,54.234.29.222,170 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -  from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:40:in `eval'
2013-02-15T19:50:43.66Z,default,54.234.29.222,118 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -  from /app/config.ru:in `<main>'
2013-02-15T19:50:43.661Z,default,54.234.29.222,188 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>'
2013-02-15T19:50:43.661Z,default,54.234.29.222,175 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
2013-02-15T19:50:43.661Z,default,54.234.29.222,197 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-02-15T19:50:43.661Z,default,54.234.29.222,184 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands/server.rb:70:in `start'
2013-02-15T19:50:43.661Z,default,54.234.29.222,171 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:254:in `start'
2013-02-15T19:50:43.662Z,default,54.234.29.222,118 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from script/rails:6:in `<main>'
2013-02-15T19:50:43.662Z,default,54.234.29.222,119 <13>1 2013-02-15T19:50:43+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 app web.1 - -     from script/rails:6:in `require'
2013-02-15T19:50:44.749Z,default,50.17.90.179,127 <40>1 2013-02-15T19:50:44+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 heroku web.1 - - State changed from starting to crashed
2013-02-15T19:50:44.924Z,default,54.234.29.222,117 <40>1 2013-02-15T19:50:44+00:00 d.26e71b30-db64-4275-b420-db8e0213d871 heroku web.1 - - Process exited with status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:57:58.247

您是否已将“PG”gem 添加到您的 Gemfile（或正确配置您的 database.yml）？如果数据库设置不正确，Heroku 应用程序将崩溃。

# python - python3的Pyside-uic？

> ID：14901523
> 
> 赞同：2
> 
> 时间：2013-02-15T18:58:56.953
> 
> 标签：python, qt, python-3.x, pyside

是否有为 python 3 生成代码的 pyside-uic 版本？在 Ubuntu 存储库中，python 2 和 3 都有 pyside，但 pyside-tools（包含 pyside-uic 的软件包）仅适用于 python2 的 pyside。

如果没有python3版本，pyside还有其他工具可以生成python 3代码吗？我所知道的一切都只能生成 python 2 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:28:17.720

是的，有 pyside-uic 为 python 3 生成代码，但由于安装脚本错误而无法安装。它将很快修复并发布

**更新 1：** 问题出在分发脚本中，而不是在 pyside 安装脚本中。我已经修复了分发并创建了拉取请求，直到修复合并到官方分发并发布，您可以从这里使用我的分发克隆[https://bitbucket.org/rlacko/distribute](https://bitbucket.org/rlacko/distribute)

**更新 2：** 该修复已合并到官方分发版并在 0.6.36 版中发布

# c++ - 具有不同比例因子的定点数 4 字节或 8 字节 - 转换数字的库？

> ID：14901525
> 
> 赞同：-3
> 
> 时间：2013-02-15T18:59:02.300
> 
> 标签：c++, c, bit-manipulation, fixed-point

我必须读取 4 个字节或 8 个字节的定点数，并且每个项目的小数点位置移动（已知位置）（刻度数）

有没有自动化的图书馆？C/C++ 是首选语言

例如：

这是假设规模为 20

```
double toDoublePrecisionFixedPoint(short first,short second,short third,short forth)
{
    double d = 0;

    int top = (first << 0x10) | (second & 0x0000FFFF);
    top/=8;
    top >>= 8;
    d+=top;

    long long a = 0x0;
    a = ((long long)second&0x07FF)<< 0x20;
    long long t = 0x0;
    t = (((long long)third) << 0x10) & 0xFFFF0000;
    long long f = 0x0;
    f = (((long long) forth)) & 0xFFFF;
    long long bottom =  a | t | f;

    long long maxflag= 0x80000000000;
    double dlong = (double)bottom/(double)maxflag;
    d += dlong;

    return d;
} 
```

假设比例为 15：

```
 float toSinglePrecisionFixedPoint (short first, short second)
  {
float f;

    float dec = ((float)second) / ((float)0x10000);

    f = (float)first;

    if(f> 0 && dec >0)
        f += dec;
    else if(f >0 && dec <0)
        f += (1 + dec);
    else if(f < 0 && dec < 0)
        f += dec;
    else if(f < 0 && dec >0)
        f -= (1 - dec);
    else if(f == 0)
        f += dec;

    return f;
}

void floatToShorts(float f,short*ret)
{
    ret[0] = 0x00;
    ret[1] = 0x00;
    ret[0] = (short)f;
    double decimal = 0;

    //THIS IS REMOVING THE WHOLE NUMBER
    modf(f , &decimal);
    ret[1] = (short)(decimal * 0x10000);
}

void doubleToShorts(double d,short*ret)
{
    ret[0] = 0x00;
    ret[1] = 0x00;
    ret[2] = 0x00;
    ret[3] = 0x00;

    d*=0x80000000000;
    long long l = (long long)d;

    ret[0] = ((short)((l & 0xFFFF000000000000) >> 48));
    ret[1] = ((short)((l & 0x0000FFFF00000000) >> 32));
    ret[2] = ((short)((l & 0x00000000FFFF0000) >> 16));
    ret[3] = ((short)((l & 0x000000000000FFFF)));
} 
```

这对我来说没问题，直到我的项目现在需要一个可变比例的位置。这很好 - 但我只是好奇是否有更好的方法来做到这一点？必须有一个完整的图书馆

这很快就复杂了，我很容易让我的代码无法工作——我也确信我没有做我应该做的那么多的错误检查——所以很好奇是否有一个库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:43:53.143

也许您需要使用“bignum”库。可能有点矫枉过正，但这里有一个例子：[GMP](http://gmplib.org/)

# php - 在符号前截断 php 变量

> ID：14901526
> 
> 赞同：-1
> 
> 时间：2013-02-15T18:59:03.723
> 
> 标签：php, truncate, substr

谁能帮我快速解决问题？

我有一个从 api 返回的字符串，字符串如下所示：

$year = "181?make=2008"

所以我使用 substr($year, 0,3); 取出前 3 位数字。IE 181 问题是，现在有些字符串在 ? 之前只有 2 位数字。像这样 $year = "54?make=2008"

所以，如果我不知道 ? 之前会有多少位数，但我知道它总是以 ? 结尾 有没有办法可以提取之前的所有数据？并把它变成一个新的变量......

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:02:01.537

```
$year = strstr("181?make=2008","?"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:04:14.083

正则表达式将努力获得第一部分。就像是

```
preg_match("^([0-9]+)\?",$string,$match) 
```

如果是你想要的年份，你可以使用

```
$year = substr("181?make=2008",-4) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T19:01:47.077

list($data, $junk) = explode("?",$year); $data 将保存“？”之前的所有内容 然后，你也可以做一些我想象的正则表达式，但对我来说这更容易阅读。

# c++ - 使用 Debian Box 中的 Eclipse CDT 构建 TFS

> ID：14901527
> 
> 赞同：0
> 
> 时间：2013-02-15T18:59:15.887
> 
> 标签：c++, boost, debian, eclipse-cdt, tfsbuild

我想使用 Debian OS 的 TFS 构建系统，我使用 C++ 开发，我的 IDE 是 Eclipse CDT。我想知道是否可以使用 TFS 构建系统，如果可以怎么办？作为旁注，我的开发严重依赖于 Boost 库和 QT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:03:29.610

是和不是。您无法在 Linux 上运行 TFS 构建。但是，您可以使用 TFS 构建来运行 ANT 或 Maven，而后者又可用于构建 c++。

构建将在 TFS 构建代理上运行，该代理将是一台 Windows 机器。通常与 TFS 服务器不同的机器。这可以是一个虚拟机，您的 TFS 专家应该能够为您设置它。

要使用 ANT 或 Maven，您需要[TFS 构建扩展](http://visualstudiogallery.msdn.microsoft.com/45b4e378-5b81-4186-9b7f-21cc5c2f743d)，该链接适用于 TFS 2012 版本，但是旧版本的 TFS 有扩展。

设置好构建服务器后，您可以使用[ANT 构建您的 c++ 代码](https://www.google.co.uk/search?q=ant%20c%2b%2b%20build&ie=UTF-8&oe=UTF-8&hl=en&client=safari)或[Maven](https://stackoverflow.com/questions/1541771/using-maven-for-c-c-projects)。

如果我要尝试这个，我会先让 ANT 构建在 windows 盒子上工作，然后将它插入到带有扩展的 TFS 中。

但是，您最好使用更通用的构建引擎，例如[Jenkins](https://stackoverflow.com/questions/5653372/buildbot-vs-hudson-jenkins-for-c-continuous-integration)，在 Linux 上运行，它[连接到 TFS](https://wiki.jenkins-ci.org/display/JENKINS/Team+Foundation+Server+Plugin)以检索代码。

# objective-c - 我在支持原子属性的论点中是否遗漏了任何要点？

> ID：14901528
> 
> 赞同：4
> 
> 时间：2013-02-15T18:59:18.757
> 
> 标签：objective-c, multithreading, atomic, declared-property

我读了这个问题（以及其他几个问题）：

[原子属性和非原子属性有什么区别？](https://stackoverflow.com/questions/588866/atomic-vs-nonatomic-properties)

我完全理解（至少我希望如此 :-D）属性的原子/非原子说明符是如何工作的：

1.  Atomic 保证“读”操作不会被“写”操作中断。Nonatomic 不保证这一点。

2.  原子和非原子都不能解决竞争条件，即一个线程正在读取，两个线程正在写入。无法预测读取操作将返回什么结果。这需要通过额外的同步来解决。

3.  原子和非原子都不能保证整体数据完整性；一个线程可以设置一个属性，而另一个线程将第二个属性设置为与第一个属性的状态不一致的状态。这也需要通过额外的同步来解决。

让我挑眉的是，人们分为两个阵营：

**`nonatomic`Pro atomic：仅用于性能优化是有意义的。**

如果您不进行优化，那么由于第 1 点，您应该始终使用 atomic。这样，在多线程应用程序中读取此属性时，您不会得到一些完全的废话。当然，如果您关心第 2 点和第 3 点，则需要在其之上添加更多同步。

**反对原子：使用原子根本没有意义。**

由于 atomic 并不能解决多线程应用程序中的所有问题，因此使用它根本没有意义，因为无论如何您都需要在其之上添加更多同步代码。它只会让事情变慢。

我倾向于亲原子阵营，但我想做一个健全的检查，我没有错过任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T21:08:29.883

缺乏一个非常具体的问题（尽管仍然是一个很好的问题），我将用个人经验来回答，FWIW。

一般来说，并发设计很难。借助 GCD 和 ARC 等现代便利，实现并发系统的工具无疑得到了改进。但是，并发的**架构**还是*很困难*的。

而且，一般来说，困难的部分与个人属性无关。单独的 getter 和 setter。并发是在更高级别实现的东西。

当前最先进的技术是*孤立的并发*。也就是说，您的应用程序中同时运行的部分使用与应用程序其余部分的连接极少的对象的隔离图来执行此操作（通常，“连接”是通过捆绑一些状态和折腾的回调）它转移到其他一些队列，通常是更新 UI 的主队列）。

通过将并发表面积（必须是并发安全的代码入口点的数量）保持在绝对最小值，您可以减少复杂性和调试非常奇怪的、通常无法重现的并发问题的时间（那会吃掉你的理智）。

鉴于所有这些，原子属性的价值非常小。当然，它们对于应该是非常非常小的接口集（API）很有用，可能会被多个线程撞到，但仅此而已。

如果您的对象需要快速访问访问器，那么将它们设为原子*可能*会对性能造成重大影响，但过早的优化是魔鬼的指手画脚。

# html - Bootstrap typeahead ajax 结果格式 - 示例

> ID：14901535
> 
> 赞同：14
> 
> 时间：2013-02-15T18:59:40.617
> 
> 标签：html, ajax, asp.net-mvc-3, twitter-bootstrap, bootstrap-typeahead

我正在使用带有 ajax 函数的 Bootstrap typeahead，并且想知道正确的 Json 结果格式是什么，以返回 Id 和描述。我需要 Id 将 typeahead 选定元素与 mvc3 模型绑定。

这是代码：

```
 [Html]

    <input id="myTypeahead" class='ajax-typeahead' type="text" data-link="myUrl" data-provide="typeahead" />

    [Javascript]

    $('#myTypeahead').typeahead({
        source: function (query, process) {
            return $.ajax({
                url: $('#myTypeahead').data('link'),
                type: 'post',
                data: { query: query },
                dataType: 'json',
                success: function (jsonResult) {
                    return typeof jsonResult == 'undefined' ? false : process(jsonResult);
                }
            });
        }
    });

This works properly when I return a simple list of strings, for example:
{item1, item2, item3}

But I want to return a list with Id, for example:
{
 {Id: 1, value: item1},
 {Id: 2, value: item2},
 {Id: 3, value: item3}
} 
```

如何在ajax“成功：函数（）”中处理这个结果？

**使用jquery Autocomplete**这很容易，因为我可以返回一个 Json 对象列表。

```
[jquery Autocomplete process data example]
...            
success: function (data) {
                response($.map(data, function (item) {
                    return { label: item.Id, value: item.Value, id: item.Id, data: item };
                })
... 
```

但这不适用于 boostrap Typeahead。

谁能帮我？

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-19T14:03:49.267

我尝试了两天，终于可以正常工作了。默认情况下，Bootstrap Typeahead 不支持对象数组，只支持字符串数组。因为“matcher”、“sorter”、“updater”和“highlighter”函数需要字符串作为参数。

相反，“Bootstrap”支持可定制的“matcher”、“sorter”、“updater”和“highlighter”功能。所以我们可以在 Typeahead 选项中重写这些函数。

II 使用 Json 格式，并将 Id 绑定到隐藏的 html 输入。

编码：

```
$('#myTypeahead').typeahead({
    source: function (query, process) {
        return $.ajax({
            url: $('#myTypeahead').data('link'),
            type: 'post',
            data: { query: query },
            dataType: 'json',
            success: function (result) {

                var resultList = result.map(function (item) {
                    var aItem = { id: item.Id, name: item.Name };
                    return JSON.stringify(aItem);
                });

                return process(resultList);

            }
        });
    },

matcher: function (obj) {
        var item = JSON.parse(obj);
        return ~item.name.toLowerCase().indexOf(this.query.toLowerCase())
    },

    sorter: function (items) {          
       var beginswith = [], caseSensitive = [], caseInsensitive = [], item;
        while (aItem = items.shift()) {
            var item = JSON.parse(aItem);
            if (!item.name.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(JSON.stringify(item));
            else if (~item.name.indexOf(this.query)) caseSensitive.push(JSON.stringify(item));
            else caseInsensitive.push(JSON.stringify(item));
        }

        return beginswith.concat(caseSensitive, caseInsensitive)

    },

    highlighter: function (obj) {
        var item = JSON.parse(obj);
        var query = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
        return item.name.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {
            return '<strong>' + match + '</strong>'
        })
    },

    updater: function (obj) {
        var item = JSON.parse(obj);
        $('#IdControl').attr('value', item.id);
        return item.name;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-21T14:38:21.643

*注意：我看到@EralpB 的评论“这仍然是完成这项任务的最佳方式吗？”*

是的，@Gonzalo 解决方案有效，但它看起来很奇怪（就像拐杖，特别是在使用*jQuery-Autocomplete*之后） - 它应该“从盒子”工作。更好的是使用这个 - [Bootstrap-3-Typeahead](https://github.com/bassjobsen/Bootstrap-3-Typeahead)。结果它**支持**对象数组：格式 - [{ **id** : .. , **name** :...},...,{ **id** : .. , **name** :...}]。OP 问题的示例：

```
....
 source: function (query, process) {
    return $.ajax({
        ......
        success: function (result) {            
            var resultList = [];

            $.map(result,function (Id,value) {
                var aItem = { id: Id, name: value};
                resultList.push(aItem);
            });

            return process(resultList);
        }
    });
  }, 
```

# android - 如何在Android中抑制“大声音乐可能会损害您的听力......”警告

> ID：14901537
> 
> 赞同：14
> 
> 时间：2013-02-15T18:59:42.863
> 
> 标签：android

我有一个适用于三星平板电脑的 Android 应用程序，它使用从平板电脑耳机插孔获取电源的外部设备。当外部设备开机时（通过以编程方式将音量调到最大），Android 会短暂显示一个警告弹出窗口，上面写着：“如果你听太久，大声的音乐可能会损害你的听力……”我不希望该消息被显示。

这是有问题的代码行：

```
mAudioMgr.setStreamVolume(AudioManager.STREAM_MUSIC, mAudioMgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0); 
```

不能只将其调到一半。事实上，即使音量设置低于最大设置，我也看到平板电脑显示警告（手动更改音量时）。

是的，我录制了原始音量，并在我们使用完外部设备后恢复它。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-02T22:19:44.747

由于您无法禁用系统消息，并且当用户手动降低音量时也会遇到问题，因此我建议您进行一系列控制以帮助解决此问题。最大化音量：

```
public void maxVolume() {
    AudioManager audioManager = (AudioManager)context.getSystemService(this.AUDIO_SERVICE);
    while ( audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) < audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC)) {
        audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_RAISE, 0);
    }
} 
```

要防止用户手动更改音量：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) 
         || (keyCode == KeyEvent.KEYCODE_VOLUME_UP) 
         || (keyCode == KeyEvent.KEYCODE_VOLUME_MUTE)) {
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

您可以在 onCreate 方法中调用 maxVolume()，然后在开始使用插孔输出过程之前调用它，以确保系统没有更改您的音量。或者，您可以注册一个监听器来监听音量变化，将 maxVolume() 设为静态并从监听器调用它。希望它可以帮助你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T15:39:33.373

我知道这个问题已经很老了，但我自己也遇到了这个问题。我想我会用我发现的内容添加到给出的答案中，以防它帮助其他人发生这种情况。

这里的一篇帖子提到警告不在 AOSP 中，但事实并非如此。请在此处参考 VolumePanel::SafetyWarning 类：[VolumePanel::SafetyWarning](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.0.0_r1/com/android/systemui/volume/VolumePanel.java#VolumePanel.SafetyWarning)

仔细阅读 SafetyWarning 类后，您会注意到 AudioManager 类中有一个名为**disableSafeMediaVolume**的隐藏方法。您可以通过反射轻松调用此隐藏方法，但如果这样做，您将获得安全异常，因为它需要系统权限“android.permission.STATUS_BAR_SERVICE”。

所以......话虽如此，据我所知，除非您拥有此系统权限，否则无法以编程方式抑制对话框。

在产品管理的支持下，我们最终将音量设置缓存在 SharedPreferences 中，然后在应用程序启动时将其从缓存中重置。如果它恰好高于警告对话框的阈值，则将显示警告，用户只需按 OK 即可获得他们想要的音量设置，但至少他们不必自己手动重置音量.

关于为什么有些人看不到此对话框的其他一些说明。只有当您将耳机（或耳塞或有线耳机）插入设备并尝试将媒体音量流设置为某个阈值（在三星 Galaxy Tab A 上此阈值为 60%）时，您才会看到它。如果您在对话框中按 OK，那么它将不会再次显示，除非您重新启动设备或拔下耳机并重新插入（音量设置为或高于阈值）。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T08:59:37.477

我不知道您是否可以考虑这么多的答案，但我很确定您无法删除该消息，因为它由系统自动显示，而不是您可以访问的内容。我的三星 Galaxy S3 做同样的事情。

同样从我在网上看到的内容来看，一些安卓设备在你放入千斤顶时也会降低音量，这样“你不会伤害你的听力”。

您可以通过在之前或之后显示您自己的通知来覆盖通知吗？通知只是一个标准`Toast`。

# c# - 在 MVC 应用程序的存储库层进行授权的模式

> ID：14901540
> 
> 赞同：8
> 
> 时间：2013-02-15T18:59:47.107
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, repository-pattern

我有一个带有存储库层的 Windows 认证 MVC 应用程序。控制器与数据库的所有交互都是通过存储库完成的。每个控制器都有一个对存储库的引用：

```
public class PostController : Controller
{
    private Repository db = new Repository();

    [HttpPost]
    public ActionResult DeletePost(int id)
    {
        // Authorize that the user is allowed to delete this post...

        db.DeletePost(id);
    }
} 
```

我的问题是是否有一种将我的授权逻辑移动到存储库层的好方法。我希望该`Repository.DeletePost()`功能拒绝删除不是由经过身份验证的用户创建的帖子。问题是我的存储库不知道经过身份验证的用户是谁。控制器知道（通过`Controller.User`）。

将 传递给`Controller.User`构造`Repository`函数不起作用，因为在`Controller.User`调用构造函数时显然没有定义。

如何告知经过`Repository`身份验证的用户是谁？最好只`Repository`在每个动作中构建？或者在存储库层处理它是一个坏主意？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T19:27:58.560

> 或者在存储库层处理它是一个坏主意？

我认为Controller是您授权的更好地方。让存储库成为数据的网关，控制器成为应用程序的看门人。我希望尽可能早地在生命周期中看到授权/身份验证逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:26:27.947

只需执行以下操作：

```
db.DeletePostForUser(id, User.Identity.UserId); 
```

然后在您的存储库中：

```
public void DeletePostForUser(int id, int userId)
{
    var post = context.Posts.SingleOrDefault(m => m.PostId == id && m.User.UserId == userId)
    if (post != null)
    {
        context.Posts.Remove(post);
        context.SaveChanges();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T19:58:21.007

来自@BigDaddy 和@ChrisPratt 的好建议。

我最终通过创建一个基本控制器来解决这个问题，类似于[这个答案](https://stackoverflow.com/a/915539/546561)。我的基本控制器类如下所示：

```
public class BaseController : Controller
{
    private ILog _log;
    private Repository _db;

    protected Repository Db
    {
        get
        {
            return _db ?? (_db = new Repository(User));
        }
    }

    protected ILog Log
    {
        get
        {
            return _log ?? (_log = LogManager.GetLogger(this.GetType()));
        }
    }
} 
```

我所有的控制器都继承自这个类，并且具有对延迟加载的内置访问权限，该延迟加载`Repository`引用了当前经过身份验证的用户。

# c# - 为什么 DataBinding 找不到存在的属性？

> ID：14901542
> 
> 赞同：0
> 
> 时间：2013-02-15T19:00:11.680
> 
> 标签：c#, asp.net, data-binding

我已经声明了一个类，但是当我尝试访问它的成员时，我收到以下错误：
DataBinding：'reapTest.Toop' 不包含名为“Rang”的属性。

WebForm1.aspx.cs：

```
namespace reapTest {

    public class Toop {
        public string Rang;
        public int Gheymat;
    }

    public static class MyData {

        public static Toop[] TP = new Toop[] { new Toop() { Rang = "Ghermez", Gheymat = 100 }, new Toop() { Rang = "Yellow", Gheymat = 44 } };
        public static Toop[] RT() {
            return TP;
        }

    }

    public partial class WebForm1 : System.Web.UI.Page {
        protected void Page_Load(object sender, EventArgs e) {

        }
    }
} 
```

WebForm1.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="reapTest.WebForm1" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:Repeater ID="Repeater1" runat="server" DataSourceID="ObjectDataSource1">
            <ItemTemplate>
                <%#Eval("Rang")%>
            </ItemTemplate>
        </asp:Repeater>

        <asp:ObjectDataSource runat="server" ID="ObjectDataSource1" SelectMethod="RT" TypeName="reapTest.MyData"></asp:ObjectDataSource>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T19:04:14.687

我相信这是因为它正在寻找一个名为 Rang的文字*属性。*您有一个名为 Rang的*字段，但这与属性不同，即：*

编辑：代码示例

```
public class Toop {

     // These values are *fields* within the class, but *not* "properties." 
     private string m_Rang; // changing these field decls to include m_ prefix for clarity
     private int m_Gheymat; // also changing them to private, which is a better practice

     // This is a public *property* procedure
     public string Rang     
     {
         get
         {
             return m_Rang;
         }
         set
         {
             m_Rang = value;
         }
     }
} 
```

字段和属性是相关的，因为属性为类的每个实例的“私有”字段数据提供了一个公共“包装器”机制。但重要的是要注意它们是独立的概念，不可互换。仅仅拥有一个字段声明（在某些对象术语中也称为成员）不会将其作为属性公开。请注意@FrédéricHamidi 所说的 - 文档说明了`"value of the expression parameter must evaluate to a public **property**"`（重点是我的）。

正如*Microsoft 直接*摘录中所述，EVAL 必须有一个*属性*。

![在此处输入图像描述](../Images/25faa184a5a665b9dc5923a5fb9f557c.png)

希望这会有所帮助。

# asp.net-mvc - Razor - @Html.Raw() 仍在元标记属性中编码 &

> ID：14901550
> 
> 赞同：8
> 
> 时间：2013-02-15T19:01:01.320
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

当我正常使用 @Html.Raw(mystring) 时，它会正确呈现示例：

```
@{ ViewBag.Title = "My Site&reg;"; }
<title>@Html.Raw(ViewBag.Title)</title> 
```

将正确呈现`<title>My Site&reg;</title>`，但当我在属性中使用它时：

```
<meta name="description" content="@Html.Raw(ViewBag.Title)" /> 
```

它渲染`<meta name="description" content="My Site&amp;reg;" />`不正确，因为这样它就不会渲染注册商标。

你如何纠正这种行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T19:25:01.657

正如[patridge](https://stackoverflow.com/questions/12321616/why-is-mvc-4-razor-escaping-ampersand-when-using-html-raw-in-a-title-attribute)在他的回答中指出的那样，您可以将属性标记包含在参数 to 中`.Raw`。

在您的情况下，这将导致类似于以下内容：

```
<meta name="description" @Html.Raw("content=\"My Site&amp;reg;\"") /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T23:36:42.713

我认为这是最好的解决方案：

```
@{ ViewBag.Title = "My Site&reg;"; }
<title>@Html.Raw(ViewBag.Title)</title>
<meta name="description" content="@HttpUtility.HtmlDecode(ViewBag.Title)" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T14:12:43.353

您可以在 _layout.cshtml 中执行此操作：

```
<title>@{var title = new HtmlString(ViewBag.Title);}@title</title> 
```

这对我有用。

# c# - WCF：识别服务器端的时钟偏差错误

> ID：14901555
> 
> 赞同：0
> 
> 时间：2013-02-15T19:01:19.057
> 
> 标签：c#, wcf, security

我有一个 WCF 客户端/服务，并且一直收到消息安全异常。我知道它们是来自测试/更改时钟偏差的时钟偏差错误。我在客户端上收到默认消息安全错误，它没有明确告诉我这是时钟偏差，但是我想显示一个很好的错误消息，而且我不想假设所有消息安全异常都是时钟偏差。所以我想知道服务器上是否有某个地方我可以检测到时钟偏差并发送回更好的消息，或者是否在它到达我的服务代码之前检查了安全性，我没有希望检测它是否是时钟偏差或其他东西。

编辑：我在 5 到 10 分钟之间收到的消息是“......时间在未来，偏差是 5 分钟”，但是如果我将本地时间更改为超过 10 分钟，它只会返回一个默认的消息安全异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:37:47.840

我认为并希望这个带有链接的问答对您有所帮助！ [WCF 和时钟偏差——自定义绑定配置被忽略了吗？](https://stackoverflow.com/questions/6423423/wcf-clock-skew-custom-binding-configuration-ignored)

# c# - 检测用户何时完成输入

> ID：14901558
> 
> 赞同：-2
> 
> 时间：2013-02-15T19:01:39.027
> 
> 标签：c#, winforms

我在检测用户何时完成他/她在文本框上的输入时遇到了一点问题。我现在最简单的情况是查看他/她是否按下了回车键。因为目前，我的显示器屏幕报告用户输入的键被记录为

```
T
To
Tod
Toda
Today [the user presses Enter] 
```

相反，我只想得到`Today`. 有没有办法不使用计时器来观察用户的键盘活动来实现这种记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:15:55.757

使用计时器来监控不活动是您拥有的最佳工具。他们只有一个知道您所谓的“用户已完成”输入的人就是您。在这种特殊情况下，您声明用户必须在屏幕上出现“今天”一词时完成。但是，也许您的用户想要搜索“Todays”或“Tod”？还是“今日雅博连斯基”？（你知道；）来自“Fictionavsky Literatzky”的著名俄罗斯作家）

另一种选择是拥有一个单词书文件，它与您的输入相匹配。但是，当用户真正在寻找仅作为单词本中较大单词开头的较小单词时，可能会发生一些令人困惑的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:31:14.380

您的用户不会按 Enter 键，而是按 Tab 键。这是将焦点移动到 GUI 应用程序中的另一个控件的标准键。或者他单击一个按钮，例如对话框的“确定”按钮。还有当他按下 Enter 键时自动激活的按钮。

现在你知道他已经打字了。将触发 TextBox 的 Validating 事件。您可以使用它来做任何您想做的事情，包括在输入不可接受时实际验证和抱怨。

# javascript - 无法停止循环功能

> ID：14901561
> 
> 赞同：0
> 
> 时间：2013-02-15T19:02:01.227
> 
> 标签：javascript, settimeout

我正在尝试停止循环功能，但它不起作用

```
function ref(){
  var iin=setTimeout(ref,1000);
}

$('#start').click(function(){ ref(); });    
$('#stop').click(function(){clearTimeout(iin);}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T19:03:16.840

在事件处理程序`iin`中无法访问您的变量。`click`您应该使其全局可访问

```
var iin;
function ref(){
    iin = setTimeout(ref,(scdy/2)-100);
}

$('#start').click(function(){ ref(); });

$('#stop').click(function(){ clearTimeout(iin); }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T19:04:03.333

您必须在函数之外拥有变量。称为全局变量。并将其分配到您的函数中，如下所示：

```
var timer;
function go(){
/// STUFF
timer=setTimeout(some_function, 1000);
}

$('#start').click(function(){go();});

$('#stop').click(function(){clearTimeout(timer);}); 
```

# awk - 了解 awk 上的 substr

> ID：14901564
> 
> 赞同：-6
> 
> 时间：2013-02-15T19:02:18.230
> 
> 标签：awk

我想了解这条线是如何工作的，不知道我是否明白了。

```
ls -l | awk '
{
  k=0;
  for (i=0;i<=8;i++)
    k+=((substr($1,i+2,1)~/[rwx]/)*2^(8-i));
  if (k)
    printf("%0o ",k);
  print
}' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:11:36.507

此代码将`-rwxrwxrwx`生成的标准权限样式转换`ls -l`为可与 一起使用的八进制数`chmod`，并将它们添加到每一行。

例如，它将进行以下转换：

```
-rwxr-xr--
 7  5  4

-rwx-wx---
 7  3  0 
```

请注意，此 awk 脚本不支持粘性或 setuid 位。

# javascript - Kendo UI - 为什么我不能正确打开和关闭窗口？

> ID：14901566
> 
> 赞同：6
> 
> 时间：2013-02-15T19:02:39.783
> 
> 标签：javascript, jquery, window, kendo-ui

我尝试了不同的方法来打开我的窗口，但到目前为止一切都失败了。

我的第一次尝试是在单击按钮时使用基于[此](http://demos.kendoui.com/web/window/index.html)示例的代码打开窗口：

```
$('#btnUsuarios').click(function (e) {
    onUsuariosLoad();
    var window = $('#usuariosDiv');
    if (!window.data('kendoWindow')) {
        window.kendoWindow({
            draggable: true,
            height: "300px",
            modal: true,
            resizable: false,
            title: "Modal Window",
            width: "65%",
            close: hideUsuarios
        });
    } else {
        window.data('kendoWindow').open();
    }
    hideHomeScreen();
    showUsuarios();

}); 
```

onUsuariosLoad 是一个从远程 html 加载窗口内容的函数，该函数确保只加载一次内容，如果已经加载，则不会再次加载，我在尝试之前测试了该函数实现窗口 Kendo UI 小部件以确保其正常工作。

hideHomeScreen 是一个从打开窗口的 div 中隐藏某些元素的函数。

showUsuarios 是一个显示窗口内容的函数。

它应该检查是否已创建 kendoWindow 的数据然后打开窗口，否则它应该创建它。我第一次单击该按钮时它可以工作，但是当我关闭窗口并再次单击该按钮时，该窗口根本不显示（我说的是窗口小部件 UI，而不是 usuariosDiv 的内容，我检查了Firebug 和 usuariosDiv 的内容仍然存在，但未显示窗口小部件 UI）。

我做的第二次尝试是这样的：

```
$('#btnUsuarios').click(function (e) {
    onUsuariosLoad();
   $('#usuariosDiv').kendoWindow({
        draggable: true,
        height: "300px",
        modal: true,
        resizable: false,
        title: "Modal Window",
        width: "65%",
        close : hideUsuarios
    });
    hideHomeScreen();
    showUsuarios();
}); 
```

这类似于第一次尝试，但它发生了同样的事情：它第一次工作正常，但是当我关闭窗口时，当我再次单击按钮时它无法重新打开窗口。

我的第三次尝试基于[此](http://docs.kendoui.com/documentation/getting-started/web/window/overview#initialize-window-center-and-configure-button-click-action)页面中的示例*初始化窗口、居中和配置按钮单击操作*：

```
var win = $("#usuariosDiv").kendoWindow({
    draggable: true,
    height: "300px",
    modal: true,
    resizable: false,
    visible: false,
    title: "Modal Window",
    width: "65%",
    close: hideUsuarios
}).data("kendoWindow");
$('#btnUsuarios').click(function (e) {
    onUsuariosLoad();
   var win = $("#usuariosDiv").data("kendoWindow");
    win.open();
    hideHomeScreen();
    showUsuarios();
}); 
```

这不能正确显示窗口，而不是显示具有指定尺寸的窗口，它只显示一个小点模式窗口。

这是开头部分，当我尝试通过窗口上的控件触发的事件来关闭窗口时，我的问题就出现了。我不是在谈论右上角的关闭按钮，我指的是我在窗口上显示的任何按钮。

例如，我尝试这样关闭窗口：

```
$('#btnBack').click(function (e) {
    hideUsuarios();
    var window = $('#usuariosDiv');
    window.data('kendoWindow').close();
}); 
```

但我收到以下错误：`Uncaught TypeError: Cannot call method 'close' of undefined`. 如果您问我为什么不简单地依赖窗口上的默认关闭按钮，那是因为有程序，完成后需要关闭窗口。

这是我的观点：

```
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.common.min.css")%>" rel="stylesheet" type="text/css" />
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.metro.min.css")%>" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.7.min.js" type="text/javascript"></script>
    <script src="<%: Url.Content("~/Scripts/kendo/2012.3.1114/kendo.web.min.js")%>"></script>
    <script src="<%: Url.Content("~/Scripts/jquery.signalR-1.0.0-rc1.min.js")%>" type="text/javascript"></script>
    <script src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3" type ="text/javascript" ></script>
    <script src="<%: Url.Content("~/Scripts/index/templates.js")%>" type="text/javascript"></script>
    <script src="<%: Url.Content("~/Scripts/index/main.js")%>" type="text/javascript"></script>

    <style type="text/css">
        #verticalMenu {
            top: 39px;
            left: 0px;
        }
    </style>

</head>
<body onload="onPageLoad()">
    <div id="canvasDiv" style="position: absolute; top: 0px; left: 0; width: 100%; height: 100%; background-color: transparent;">
        <div id="alertDiv" style="position: absolute; top: -250px; background-color: #F00; z-index: 50; opacity:1; border-top: 1px solid #FFF; border-right: 1px solid #F5F5F5; border-bottom: 1px solid #D5D5D5; border-left: 1px solid #F5F5F5">
            <div id="msgDiv" style="position:absolute;left:10px; right:10px; bottom: 10px; text-align: center;width: 50%; margin: 0px auto;">Alerta Sismo Detectado</div>
            <div id="btnCloseAlert"  style="position: absolute; top: 0px; right: 0"><span class="k-icon k-i-close"></span></div>
        </div>
        <div id="homeScreenDiv" style="position: absolute; top: 0px; left: 0; width: 100%; height: 100%; background-color: white; z-index: 10; opacity:1">

        </div>
        <div id="usuariosDiv" style="position: absolute; left: 0; width: 100%; height: 100%; background-color: white; z-index: 2; opacity:0">

        </div>
        <div id="sismosDiv" style="position: absolute; left: 0; width: 100%; height: 100%; background-color: white; z-index: 2; opacity:0">
            <div id="leftBar" style="border: thin solid #666666; position: absolute; top: 0px; left: 0; width: 190px; height: 100%; background-color: white; z-index:20">
                <div onclick="hideSismos()" style="position:absolute;height: 39px; width: 25%; left:0; top:0"><div style="position:absolute; top: 10px; bottom:10px;left:10px;right:10px"><span class="k-icon k-i-arrow-w"></span></div></div>
                <div style="position:absolute;height: 39px; width: 75%; right:0; top:10px; bottom:10px; text-align:center">Sismos</div>
                <ul id="verticalMenu" style="position: absolute; width: 99%; height: auto; display: block;" >
                    <li id="Regiones" style="height: 75px; text-align: center;">Regiones</li>
                    <li id="Clusters" style="height: 75px; text-align: center;">Clusters</li>
                    <li id="Dispositivos" style="height: 75px; top: auto; text-align: center;">Dispositivos</li>
                    <li id="Eventos" style="height: 75px; text-align: center;">Eventos</li>
                </ul>
            </div>
            <div id="selectionBar" style="border: thin solid #666666; position: absolute; top: 0px; left: 0; width: 180px; height: 100%; background-color: white; left: 10px; overflow:auto; z-index:9">
                <div class="k-toolbar k-grid-toolbar" style="height: 34px;">
                    <button id="btnAgregarEntry" class="k-button k-button-icontext k-add-button" onclick="swapToNewData(this)"><span class="k-icon k-add"></span>Agregar</button>
                </div>
                <div id="listView" style="background-color: transparent; position: absolute; top: 40px; left: 0px; right: 0px; width:auto; height:auto" ></div>
            </div>
            <div id="dataBar" style="border: thin solid #666666; position: absolute; top: 0px; left: 0; width: 330px; height: 100%; background-color: white; left: 10px; overflow:auto; z-index:8">
                <div id="dataView" style="background-color: transparent; position: absolute; top: 40px; bottom:0px; left: 0px; right: 0px; width:auto; height:auto" ></div>
            </div>
            <div id='myMap' style="border: thin solid black; background-color: white; position: absolute; display: block; min-height: 100%; top: 0px; left: 189px; width: 88%; z-index: 20"></div>
        </div>
    </div>
</body>
</html> 
```

谁能帮我理解我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T12:52:57.190

我有一个类似的问题，而不是`close()`我建议`destroy()`每次都使用和创建新窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-06T13:14:00.160

我意识到这是在原始帖子之后很久，但在窗口关闭选项中设置了 70% 的比例因子。

该错误似乎会影响打开和关闭同一个窗口，因为窗口在关闭时缩放到 70%，但在打开时从未达到 100%。

我通过添加以下内容来解决这个问题，以阻止它在关闭时将其缩放到 70%。

```
var emptyWindow = $(theWindowId).data("kendoWindow");
emptyWindow.options.animation.close.effects.zoom.properties.scale = 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-23T08:22:06.800

我更愿意将销毁方法绑定到停用事件并在窗口上使用 close() 方法。这样，关闭动画将正确完成。

```
...
deactivate: function() {
   this.destroy();
}
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-02T05:59:30.160

安装

```
win.open(); 
```

你使用下面的代码。

```
$("#usuariosDiv").data("kendoWindow").open(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T19:27:50.510

这应该可以关闭一个窗口：

```
 $("#btnBack").click( function (e) {
                             $("#usuariosDiv").data("kendoWindow").close();
                        }); 
```

您也可能想研究设置动画：假；在打开的窗户上。

我记得我有一些与此相关的类似问题。

至于您的第一次尝试，您可能想尝试一下（将 .data("kendowindow") 添加到第一次创建中）

```
 $("#btnUsuarios").click(function (e) {
    onUsuariosLoad();
    var window = $("#usuariosDiv");
    if (!window.data("kendoWindow")) {
        window.kendoWindow({
            draggable: true,
            height: "300px",
            modal: true,
            resizable: false,
            title: "Modal Window",
            width: "65%",
            close: hideUsuarios
        }).data("kendoWindow");
    } else {
        window.data("kendoWindow").open();
    }
    hideHomeScreen();
    showUsuarios();

}); 
```

# java - 出于性能原因，Java String.split 传入预编译的正则表达式

> ID：14901569
> 
> 赞同：21
> 
> 时间：2013-02-15T19:03:00.383
> 
> 标签：java, regex, performance

正如问题所述，给出以下代码：

```
public class Foo
{
   public static void main(String[] args)
   {  
         String test = "Cats go meow";  
         String[] tokens = test.split(" ");
   }
} 
```

是否可以按照以下方式在 split 函数中预编译该正则表达式：

```
public class Foo
{  
   Pattern pattern = Pattern.compile(" ");
   public static void main(String[] args)
   {  
         String test = "Cats go meow";  
         String[] tokens = test.split(pattern);
   }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-15T19:06:13.263

对的，这是可能的。另外，使`pattern`静态方法`main`可以访问它。

```
public class Foo
{  
   private static Pattern pattern = Pattern.compile(" ");
   public static void main(String[] args)
   {  
         String test = "Cats go meow";  
         String[] tokens = pattern.split(test);
   }
} 
```

根据String中方法的[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)`split`，您可以使用 String's`split`或 Pattern's `split`，但 String's`split`编译 a`Pattern`并调用其`split`方法，因此用于`Pattern`预编译正则表达式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-15T19:16:11.193

不——我认为那是个坏主意！

仔细查看拆分方法的源代码 - 如果字符串只有一个字符（并且不包含正则表达式特殊字符），则实现了一种快捷方式

```
public String[] split(String regex, int limit) {
    /* fastpath if the regex is a
     (1)one-char String and this character is not one of the
        RegEx's meta characters ".$|()[{^?*+\\", or
     (2)two-char String and the first char is the backslash and
        the second is not the ascii digit or ascii letter.
     */
    char ch = 0;
    if (((regex.value.length == 1 &&
         ".$|()[{^?*+\\".indexOf(ch = regex.charAt(0)) == -1) || 
```

所以 - split(" ") 应该快得多。

另一方面，在使用正则表达式时，将它们设为静态最终成员总是一个好主意。

编辑：

String.split 的源代码 JDK1.7 和 OpenJDK 7 似乎相同 - 自己看一下： [第 2312ff 行。](http://www.docjar.com/html/api/java/lang/String.java.html)

所以 - 对于更复杂的模式（例如 1 个或多个空格）：

```
 static final Pattern pSpaces = Pattern.compile("[ ]+"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-15T19:06:20.827

```
public class Foo
{  
   private static final Pattern pattern = Pattern.compile(" ");
   public static void main(String[] args)
   {  
         String test = "Cats go meow";  
         String[] tokens = pattern.split(test);
   }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-15T19:04:49.973

改用[`Pattern.split()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#split%28java.lang.CharSequence%29)：

```
String[] tokens = pattern.split(test); 
```

# visual-studio-2010 - 为什么 Visual Studio 2010 重置窗口布局与我的不同

> ID：14901570
> 
> 赞同：0
> 
> 时间：2013-02-15T19:03:05.810
> 
> 标签：visual-studio-2010

当我重置窗口布局时，我曾经在底部有待处理的更改、错误列表、查找和替换以及其他几个窗口。但是在 VS 崩溃和恢复之后，现在当我重置窗口布局时，我不再拥有这些窗口了。如何恢复以前的默认窗口布局设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:05:05.240

按下`View`主菜单并打开您感兴趣的窗口。某些窗口，如搜索结果只会作为相应操作的结果出现。

# ios - 使用 Xamarin 将 iOS 应用程序转换为 mac 应用程序

> ID：14901572
> 
> 赞同：-2
> 
> 时间：2013-02-15T19:03:26.670
> 
> 标签：ios, macos, monodevelop, xamarin

我对 Xamarin 很陌生。我已经构建了一个简单的 iOS 应用程序（实际上是 iPad）进行测试。这是员工添加。用户输入名字、姓氏、员工职位 int 文本字段并单击保存，它应该保存到数据库。它工作正常。我可以使用相同的代码库从这个 iPad 应用程序编写/制作 Mac 应用程序吗？请解释一下。如果您需要更多信息，请询问。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:51:56.973

您可以重用部分代码来创建跨平台应用程序。如果您的应用程序设计良好，将非平台特定代码（服务、域逻辑、数据访问等）与 UI 和平台特定功能分开，那么您应该能够跨平台重用该代码。特定于平台的事物（尤其是 UI）将需要针对每个平台进行定制。

# xslt-1.0 - 如何使用 Firefox 或 Chrome XSLT 将刻度转换为可读的日期时间？

> ID：14901575
> 
> 赞同：1
> 
> 时间：2013-02-15T19:03:29.493
> 
> 标签：xslt-1.0

这与具有相似名称的其他问题非常相似，但是将答案限制为 XSLT1.0。我也删除了属性，让它变得简单。加上这个时间戳短了 3 位数字。

我有一个带有这样时间戳的 XML：

```
<node><stamp>1236888746</stamp></node>
<node><stamp>1360954731</stamp></node> 
```

我想在结果 HTML 中将它们显示为日期和时间。有没有办法在浏览器上运行 XSLT？

编辑：这不按预期工作，似乎是一个数学问题。一个飞跃是四年，如果必须的话，从 1970 年 2 月 29 日之后开始。我列出的数学产生了不正确的结果。我在 xPath 中测试过的月数部分，布尔值是 0 或 1，如下所示将它们加在一起会产生一个整数结果。

```
<xsl:variable name="leapoffset" select="31 + 29"/>
<xsl:variable name="leapdays" select="31 * 4 * 7 + 30 * 4 * 4 + 28 * 4 + 1"/>

<!-- Enter loop -->
<xsl:variable name="days" select="round(stamp div 86400 - 0.5)"/>
<xsl:variable name="leaps" select="round(($days - $leapoffset) div $leapdays + $leapoffset div $leapdays - 0.5)"/>
<xsl:variable name="dayofleap" select="$days - $leaps * $leapdays + $leapoffset - 1"/>
<xsl:variable name="tmp" select="0 +
($dayofleap &gt; 31) * 31745 +
($dayofleap &gt; 61) * 30721 +
($dayofleap &gt; 92) * 31745 +
($dayofleap &gt; 122) * 30721 +
($dayofleap &gt; 153) * 31745 +
($dayofleap &gt; 184) * 31745 +
($dayofleap &gt; 214) * 30721 +
($dayofleap &gt; 245) * 31745 +
($dayofleap &gt; 275) * 30721 +
($dayofleap &gt; 306) * 31745 +
($dayofleap &gt; 337) * 31745 +
($dayofleap &gt; 365) * 28673 +
($dayofleap &gt; 396) * 31745 +
($dayofleap &gt; 426) * 30721 +
($dayofleap &gt; 457) * 31745 +
($dayofleap &gt; 487) * 30721 +
($dayofleap &gt; 518) * 31745 +
($dayofleap &gt; 549) * 31745 +
($dayofleap &gt; 579) * 30721 +
($dayofleap &gt; 610) * 31745 +
($dayofleap &gt; 640) * 30721 +
($dayofleap &gt; 671) * 31745 +
($dayofleap &gt; 702) * 31745 +
($dayofleap &gt; 730) * 28673 +
($dayofleap &gt; 761) * 31745 +
($dayofleap &gt; 791) * 30721 +
($dayofleap &gt; 822) * 31745 +
($dayofleap &gt; 852) * 30721 +
($dayofleap &gt; 883) * 31745 +
($dayofleap &gt; 914) * 31745 +
($dayofleap &gt; 944) * 30721 +
($dayofleap &gt; 975) * 31745 +
($dayofleap &gt; 1005) * 30721 +
($dayofleap &gt; 1036) * 31745 +
($dayofleap &gt; 1067) * 31745 +
($dayofleap &gt; 1095) * 28673 +
($dayofleap &gt; 1126) * 31745 +
($dayofleap &gt; 1156) * 30721 +
($dayofleap &gt; 1187) * 31745 +
($dayofleap &gt; 1217) * 30721 +
($dayofleap &gt; 1248) * 31745 +
($dayofleap &gt; 1279) * 31745 +
($dayofleap &gt; 1309) * 30721 +
($dayofleap &gt; 1340) * 31745 +
($dayofleap &gt; 1370) * 30721 +
($dayofleap &gt; 1401) * 31745 +
($dayofleap &gt; 1432) * 31745 +
($dayofleap &gt; 1461) * 29697
"/>
<xsl:variable name="monthofleap" select="($tmp mod 1024) + 2"/>
<xsl:variable name="day" select="$dayofleap - round($tmp div 1024 - 0.5)"/>
<xsl:variable name="yearofleap" select="round($monthofleap div 12 - 0.5)"/>
<xsl:variable name="years" select="$leaps * 4 + $yearofleap"/>
<xsl:variable name="month" select="$monthofleap mod 12"/>
<xsl:value-of select="$years + 1970"
/>-<xsl:value-of select="format-number($month, '00')"
/>-<xsl:value-of select="format-number($day, '00')"
/>T<xsl:value-of select="format-number(round(stamp div 3600 - 0.5) mod 24, '00')"
/>:<xsl:value-of select="format-number(round(stamp div 60 - 0.5) mod 60, '00')"
/>:<xsl:value-of select="format-number(stamp mod 60, '00')"/> 
```

让我逐行解释，因为我不喜欢代码中的注释。实际上我根本不喜欢评论，例如，这些并不能准确地反映上面的代码。我不擅长用任何其他语言解释代码，然后是编写代码的语言，这很好，因为如果你能理解我正在尝试做的事情，因为我的解释而不是因为你阅读了上面的代码，那么我如果你对我有帮助，我会感到惊讶。前两个是全局常数，从 Epoch 到 2 月 29 日的天数和四年的天数。将刻度转换为天。尝试计算自纪元以来有多少闰日。自上次 2 月 29 日以来的天数。计算自飞跃开始以来的月份，每个月边界加一个，在飞跃中改变长方程 48 个月，因此有 48 个布尔值，高阶位用于存储/计算不属于当前月份的其他月份已过去的天数。一个数字（0 到 5），表示自此次飞跃前 2 个月（1 月 1 日）以来经过的年数。自纪元以来的年数。一个数字，表示自此次飞跃前 2 个月（1 月 1 日）以来经过的月数。

# visual-studio-2010 - Visual Studio 是否包含某种控制台模拟器？

> ID：14901576
> 
> 赞同：0
> 
> 时间：2013-02-15T19:03:31.527
> 
> 标签：visual-studio-2010

我刚开始使用 Visual Studio 2010，我什至不确定这是否是正确的问题。让我解释一下我正在尝试做的事情：

现在，在开发控制台应用程序时，我编译/调试，切换到命令提示符，导航到 *.exe 被转储的位置并运行它——只是发现我的输出缺少 a`\t`或`\n`某处——然后我需要返回，修复，重新编译等，等等。

我希望能够在不离开 Visual Studio 的情况下进行即时编译和在窗口中运行的事情。也许是从 VS 启动的弹出窗口？也许是命令提示符界面中的一个窗格？这样的事情存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:05:38.693

您只需按 F5 即可运行...可能需要包括

```
Console.Readline() 
```

所以窗口不会关闭得太快。

# c++ - 使用 make 构建时在 c++ 文件中概括包含语句

> ID：14901577
> 
> 赞同：2
> 
> 时间：2013-02-15T19:03:32.067
> 
> 标签：c++, windows, makefile, g++

您好（我使用的是 Windows，mingw g++ 编译器和 mingw32-make）
为了概括我的问题，我想学习如何编写一个 c++ 源文件，如下所示：

假设 foo.cpp 依赖于 foo.h，其中 foo.cpp 在 src\ 中，而 foo.h 在 include\
`// foo.cpp`
`#include "foo.h"`

通常我会这样写
`//foo.cpp`
`#include "..\include\foo.h"`

但我发现随着项目的增长，我开始需要更多的组织，这种方法不够动态。原因是如果我想将 foo.h 移动到新目录（比如 include\bar\foo.h），我必须更改每个文件的每个包含。有没有办法让 make 实现这一目标。如果是这样，它也可以用于头文件依赖项。

作为旁注，我是makefile的新手。我什至不确定它是否知道这些包含存在，因为它们在代码中（事实上据我了解它没有）。这将导致我遇到一个不幸的次要问题，即可以看到这些包括吗？如果不是，是否可以更改它以使其可以？随意回答你将如何解决这个问题，因为我觉得我通过将包含放在文件中而不是将它们链接到 makefile 中以错误的方式解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T19:06:55.533

The compiler is always looking into some default paths to look for .h-files. You can add your path.

For example `gcc` takes multiple `-I` arguments which contain a path. In your `foo.cpp` you do:

```
#include "foo.h" 
```

and when compiling you say:

```
g++ -I../include foo.cpp -c [other options] 
```

.

Regarding the second part of your question: The `makefile` and the call to `make` does not normally know anything about the files to be compiled and about your project. However there are several default variables and directives in make which lead to that impression: It could be, that in your environment you only need to change the `CFLAGS` or `CPPFLAGS` variable to add the `-I`-argument and it will work.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:21:32.753

Patrick B 已经很好地回答了如何让编译器知道从哪里包含，但不是以下位：

> 作为旁注，我是makefile的新手。我什至不确定它是否知道这些包含存在，因为它们在代码中（事实上据我了解它没有）。这将导致我遇到一个不幸的次要问题，即可以看到这些包括吗？如果不是，是否可以更改它以使其可以？

不，make 不了解您的源文件包含什么，或者它们如何依赖于其他文件只要文件之间存在“如果您有这样的文件，并且想要通过做某事来获得这样的文件”的关系，make就会为您排序。

有几种方法可以做到这一点。您可以手动添加：

```
 foo.cpp: foo.h 
```

或者你可以为你的包含文件使用一个依赖文件，并`make`通过添加它来自动构建它，例如：

```
 SOURCES = foo.cpp    # Add any further source files here. 
 INCLUDES = -I../includes   # Add other include directories if needed. 

 CFLAGS += ${INCLUDES}

 TARGET = foo.exe   # in Windows. Just foo in linux/MacOS.

 all: ${TARGET} deps.mk

 ${TARGET}: ${SOURCES}
     gcc -O $@ $^      

 desp.mk: ${SOURCES}
     gcc -MM ${INCLUDES} $^ > $@

 include deps.mk 
```

请注意，makefile 依赖于作为制表符的缩进。这篇文章使用了空格，因此您需要“标记”收据。另请注意，在“正确的”makefile 中，您将使用`foo.o`等`foo.cpp`，并将所有不同的`.o`文件链接在一起。这样，对于大型项目来说，编译会更快一些。为了便于阅读，我对其进行了简化。

也许我应该扩展一点：

`gcc -MM`给出正在“编译”的文件及其所有依赖项的列表（标准输出）。它实际上并不编译代码（只要代码至少有点）接近可编译，它会愉快地处理您的文件。

有关`gcc -MM`和相关的更多详细信息，请查看[GCC 调用](http://gcc.gnu.org/onlinedocs/cpp/Invocation.html)文档。

`$@`和`$&^`是所谓的`make`“自动变量” - 它们扩展到“目标”（容易记住，因为它看起来有点像用于射击或类似的箭头的目标）和“所有依赖项”（这里没有视觉线索，我'恐怕——我不得不时不时地提醒自己）分别。在[这里](http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/Automatic-Variables.html)查看更多详细信息。

# asp.net - ASP.NET 部署到 IIS7：默认站点根目录、默认站点中的应用程序还是单独的站点？

> ID：14901581
> 
> 赞同：0
> 
> 时间：2013-02-15T19:04:03.907
> 
> 标签：asp.net, deployment, iis-7, virtual-machine

我是 IIS7 的新手，我有点了解站点、应用程序和虚拟目录之间的差异。但是，我不太确定适合我的具体情况的最佳部署方法是什么。

我有一个干净的 Windows '08 服务器虚拟机，并设置了 IIS/asp.net。我用 C:\inetpub\wwwroot 作为 FTP 根建立了一个 FTP 站点，我认为我可以从 VS 快速“复制站点”到这个根。

但是，在进行复制之前，我想确保这是最快、最安全的方法。

请注意，这个虚拟机将专门用于我的 asp.net 应用程序（用于测试目的），我有点担心今天必须让这个应用程序由 EOD 运行。

也就是说，我的问题是，我应该...

1.  只需将“复制站点”直接复制到默认站点的根目录并利用已创建的默认应用程序池，或者
2.  在默认站点下添加一个新应用程序（如果我这样做，我应该选择默认应用程序池还是创建新应用程序池），或者
3.  添加一个全新的网站？

另外，当我这样做的时候......我的应用程序是用 asp.net 4 构建的。我应该选择默认应用程序池还是 ASP.NET 4.0 集成的应用程序池？

谢谢你，埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:09:14.697

Here's how I would setup IIS:

1.  Create a new site (I always name the sites by the domain that they will be using)
2.  Creating a new site will create a new application pool. Verify that the application pool is using .NET 4.0 Integrated.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:09:48.023

将您的站点复制/发布到一个文件夹，然后托管此文件夹。如果您在默认网站下托管它，您的网站 URL 将是 http:// machinename/sitename 或 http:// localhost /sitename 在另一种情况下，您将直接在指定端口上托管您的网站，或者您甚至可以托管它在 :80 端口下，可以通过您的机器名称直接访问。选择集成模式的应用程序池，支持4.0版本，你不会有任何问题（通常默认应用程序池配置这些设置）

# webdriver - 如何获取输入元素的标题属性？- 网络驱动程序

> ID：14901589
> 
> 赞同：7
> 
> 时间：2013-02-15T19:04:41.240
> 
> 标签：webdriver, selenium-webdriver

如何在输入元素中获取Title的属性

```
<input type="image" title="Previous Page">
<input type="image" title="First Page">
<input type="image" title="Next Page">
<input type="image" title="Last Page"> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T20:00:56.877

你试过什么？通常类似以下的东西应该起作用：

```
WebElement element = driver.findElement(By.tagName("input"));
String title = element.getAttribute("title"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T22:02:31.867

Jim Evans 提供的答案是正确的，但对于更具体的答案，我建议如下。请记住，copy-pasta 可能不起作用，您需要更改一些内容才能在完整的 HTML 上工作。

```
List<WebElement> elements = driver.findElements(By.tagName("input"));
for (WebElement element : elements) {
    if (element.getAttribute("type").equals("image")) {
        System.out.println(element.getAttribute("title"));
    }
} 
```

上面的代码将循环你网页中​​来自 type="image" 的所有内容，并在控制台上打印每个内容的 "title" 属性。

不过，您仍然应该将吉姆的答案选为正确答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T06:46:09.567

首先，您需要确定要从中获取属性**title**值的输入元素。

然后像下面这样的东西必须工作。

```
element.getAttribute("title"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-12-11T11:15:10.503

它非常简单，也适用。

```
String title = driver.getTitle(); 
```

# hadoop - 分组后查询单个字段

> ID：14901591
> 
> 赞同：0
> 
> 时间：2013-02-15T19:04:51.240
> 
> 标签：hadoop, apache-pig

我有关系

```
A = 
(John,19,SF)
(Mary,20,NY)
(Bill,23,SF)
(Joe,25,SF) 
```

架构是（姓名、年龄、城市）

```
B = foreach (group A by city) 
{
   sorted = ORDER A BY age;
   info = LIMIT sorted 10;
   GENERATE group, info.name;
} 
```

Pig 抱怨 GENERATE 组 info.name 的“Scalar 在输出中有不止一行”；

分组后如何查询包中的单个字段？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:36:40.453

对我来说，上面的代码正在运行，并且输出为 'Dump B;' 是

（纽约，{（玛丽）}）（SF，{（约翰），（比尔），（乔）}）

至于在 group by 之后查询单个字段，您必须以与现在相同的方式引用 Alias.fieldName。

# html - 如何为每个切片添加悬停效果（html5画布）

> ID：14901593
> 
> 赞同：-1
> 
> 时间：2013-02-15T19:04:57.760
> 
> 标签：html, canvas, charts, pie-chart

嗨，你能帮我设置这个代码吗？我不太擅长 html5。

> 如果您的浏览器不支持 HTML5 Canvas，则会显示此文本。
> 
> ```
> $(document).ready(function() {
>     // initialize some variables for the chart
>     var 
> 
> canvas = $("#canvas")[0];
>         var ctx = canvas.getContext('2d');
>         var data = [75,68,32,95,20,51];
>         var colors = ["#7E3817", "#C35817", "#EE9A4D", "#A0C544", "#348017", "#307D7E"];
>         var center = [canvas.width / 2, canvas.height / 2];
>         var radius = Math.min(canvas.width, canvas.height) / 2;
>         var lastPosition = 0, total = 0;
>         var pieData = [];
> 
>     // total up all the data for chart
>     for (var i in data) { total += data[i]; }
> 
>     // populate arrays for each slice
>     for(var i in data) {
>         pieData[i] = [];
>         pieData[i]['value'] = data[i];
>         pieData[i]['krasa'] = colors[i];
>         pieData[i]['startAngle'] = 2 * Math.PI * lastPosition;
>         pieData[i]['endAngle'] = 2 * Math.PI * (lastPosition + (data[i]/total));
>         lastPosition += data[i]/total;
>     }
> 
> function drawChart()
>     {
>         for(var i = 0; i < data.length; i++)
>         {
>             var gradient = ctx.createLinearGradient( 0, 0, canvas.width, canvas.height );
>             gradient.addColorStop( 0, "#ddd" );
>             gradient.addColorStop( 1, colors[i] );
>             ctx.beginPath();
>             ctx.moveTo(center[0],center[1]);
>             ctx.arc(center[0],center[1],radius,pieData[i]['startAngle'],pieData[i]['endAngle'],false);
>             ctx.lineTo(center[0],center[1]);
>             ctx.closePath();
>             ctx.fillStyle = gradient;
>             ctx.fill();
>             ctx.lineWidth = 1;
>             ctx.strokeStyle = "#fff";
>             ctx.stroke();
>         }
>     }
> 
>     drawChart(); // first render
> }); 
> ```

如何为*每个切片添加***悬停**效果？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:57:56.900

将楔形物绘制到画布上后，它们就变成了更大图像中的像素。

此时，您无法跟踪单个饼图。因此无法跟踪任何特定楔形上的悬停。

但是......你确实有几个选择！

选项#1 --- 进行自己的命中测试以确定您点击了哪个饼图。

它看起来像这样（我没有测试过这个！！！）

```
var chartStartAngle=0;  // you started drawing the pie at angle 0

function handleChartClick ( clickEvent ) {

    // Get the mouse cursor position at the time of the click, relative to the canvas
    var mouseX = clickEvent.pageX - this.offsetLeft;
    var mouseY = clickEvent.pageY - this.offsetTop;

    // Was the click inside the pie chart?
    var xFromCenter = mouseX - center[0];
    var yFromCenter = mouseY - center[1];
    var distanceFromCenter = Math.sqrt( Math.pow( Math.abs( xFromCenter ), 2 ) + Math.pow( Math.abs( yFromCenter ), 2 ) );

    if ( distanceFromCenter <= radius ) {

      // You clicked inside the chart.
      // So get the click angle 
      var clickAngle = Math.atan2( yFromCenter, xFromCenter ) - chartStartAngle;

      if ( clickAngle < 0 ) clickAngle = 2 * Math.PI + clickAngle;

      for ( var i in pieData ) {
        if ( clickAngle >= pieData[i]['startAngle'] && clickAngle <= pieData[i]['endAngle'] ) {
          // You clicked on pieData[i]
          // So do your effect here!
          return;
        }
      }
    }
  } 
```

选项#2 --- 使用 cavas 库，它允许您跟踪饼图中的每个楔形，从而实现悬停效果。几个好的库（在许多好的库中）是：EaselJs、FabricJs 和 KineticJs。

Elated.com 有一个很棒的教程，可以显示您正在寻找的内容。看看：[http ://www.elated.com/articles/snazzy-animated-pie-chart-html5-jquery/](http://www.elated.com/articles/snazzy-animated-pie-chart-html5-jquery/)*

# regex - Regex.IsMatch 的错误返回 - 正则表达式

> ID：14901595
> 
> 赞同：0
> 
> 时间：2013-02-15T19:05:16.277
> 
> 标签：regex

我想在字符串中找到一个被空格包围的特定字符串。例如，我想从以下位置接收值 true：

```
Regex.IsMatch("I like ZaleK", "zalek",RegexOptions.IgnoreCase) 
```

并且值 false 来自：

```
Regex.IsMatch("I likeZaleK", "zalek",RegexOptions.IgnoreCase) 
```

这是我的代码：

```
Regex.IsMatch(w_all_file, @"\b" + TB_string.Text.Trim() + @"\b", RegexOptions.IgnoreCase) ; 
```

当 w_all_file 中的字符串是我要查找的字符串后跟“-”时，它不起作用

例如：如果 w_all_file = "I like zalek_" - 找不到字符串 "zalek"，但如果 w_all_file = "I like zalek-" - 找到字符串 "zalek"

任何想法为什么？

谢谢，

扎莱克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:09:26.647

The `\b` character in regex doesn't consider an underscore as [word boundry](http://www.regular-expressions.info/wordboundaries.html). You might want to change it to something like this:

`Regex.IsMatch(w_all_file, @"[\b_]" + TB_string.Text.Trim() + @"[\b_]", RegexOptions.IgnoreCase) ;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:10:35.380

`\b`匹配单词边界，定义为包含在`\w`其中的字符与不包含的字符之间。 `\w`与 相同`[a-zA-Z0-9_]`，因此匹配下划线。

所以基本上，`\b`将在“k”之后匹配，`zalek-`而不是在`zalek_`.

听起来您希望匹配也失败`zalek-`，您可以使用[环视](http://www.regular-expressions.info/lookaround.html)来做到这一点。只需将`\b`开头的`(?<![\w-])`替换为`\b`，并将末尾的替换为`(?![\w-])`：

```
Regex.IsMatch(w_all_file, @"(?<![\w-])" + TB_string.Text.Trim() + @"(?![\w-])", RegexOptions.IgnoreCase) ; 
```

请注意，如果向字符类添加其他字符，则`[\w-]`需要确保“-”是最后一个字符，或者使用反斜杠对其进行转义（如果不这样做，它将被解释为人物）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:10:57.470

这就是你需要的吗？

```
string input = "type your name";
string pattern = "your";

Regex.IsMatch(input, " " + pattern + " "); 
```

# python - Mongoengine 链接 filter() 和 ReferenceField() 导致“TypeError: 'Collection' object is not callable”

> ID：14901598
> 
> 赞同：1
> 
> 时间：2013-02-15T19:05:25.670
> 
> 标签：python, mongodb, pymongo, mongoengine

拥有这 2 个 MongoEngine 文档：

```
class A(Document):
    a = StringField()

class B(Document):
    b = StringField()
    boolfield = BooleanField(default=False)
    ref = ReferenceField(A) 
```

我想首先`filter()`在一个特定的 A 对象上，然后从第一个查询开始，`filter()`在 BooleanField 上。但是这些行会导致错误：

```
a_objects = A.objects(a='test') # OK
query = B.objects(ref__in=a_objects) # OK
query2 = query.filter(boolfield=True) # FAILS 
```

错误是：

```
TypeError: 'Collection' object is not callable. If you meant to call the '__deepcopy__' method on a 'Collection' object it is failing because no such method exists. 
```

在此处查看完整代码和回溯：[https ://gist.github.com/nferrari/4962245](https://gist.github.com/nferrari/4962245)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:36:44.130

似乎不能在 0.7.8 中链接查询参考字段 - 所以暂时请使用字典，然后作为 kwargs 作为工作回合传入，例如：

```
 a_objects = A.objects(a='test')
    query_dict = {'ref__in': a_objects}
    query_dict['boolfield'] = True
    self.assertEquals(B.objects(**query_dict).count(), 1) 
```

我已添加：[https](https://github.com/MongoEngine/mongoengine/issues/234) ://github.com/MongoEngine/mongoengine/issues/234将在 0.8 中修复

# arrays - R获取向量中最后n个条目的快捷方式

> ID：14901604
> 
> 赞同：8
> 
> 时间：2013-02-15T19:06:01.703
> 
> 标签：arrays, r, vector, indexing

这可能是多余的，但我在 SO 上找不到类似的问题。

是否有在*不使用计算中的向量长度的情况下获取向量或数组中最后**n 个*元素/条目的捷径？

 *`foo <- 1:23`

```
> foo
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 
```

假设一个人想要最后 7 个实体，我想避免这种繁琐的语法：

```
> foo[(length(foo)-6):length(foo)]
[1] 17 18 19 20 21 22 23 
```

Python 有`foo[-7:]`. R中有类似的东西吗？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T19:08:07.977

你想要的`tail`功能

```
foo <- 1:23
tail(foo, 5)
#[1] 19 20 21 22 23
tail(foo, 7)
#[1] 17 18 19 20 21 22 23
x <- 1:3
# If you ask for more than is currently in the vector it just
# returns the vector itself.
tail(x, 5)
#[1] 1 2 3 
```

除了向量的最后/前 n 个元素*之外*`head`，还有一些简单的方法可以获取所有内容。

 *```
x <- 1:10
# Grab everything except the first element
tail(x, -1)
#[1]  2  3  4  5  6  7  8  9 10
# Grab everything except the last element
head(x, -1)
#[1] 1 2 3 4 5 6 7 8 9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:25:16.320

当您拥有出色的尾部功能时，这不是一个好主意，但这里有一个替代方案：

```
n <- 3
rev(rev(foo)[1:n]) 
```

我正在为反对票做准备。**

# java - java中的字符串排序

> ID：14901605
> 
> 赞同：0
> 
> 时间：2013-02-15T19:06:06.833
> 
> 标签：java, arrays, string, alphabetical

我有一个任务，我应该创建一个对象，该对象将字符串数组初始化为具有“大小”元素并且使用的元素数量等于 0。

我的问题是当我尝试比较字符串以将它们按字母顺序排列时。

```
int compare = storage[index].compareTo(value);
if (compare < 0) 
```

这就是我得到空指针异常的运行时错误的地方

这是我的完整代码。

类主

```
package assignment2;
public class Main {
    public static void main(String[] args) {
        OrderedStringList myList = new OrderedStringList(5);

        System.out.println("adding 10, 5, & 7");
        myList.Insert("10");
        myList.Insert("5");
        myList.Insert("7");

        myList.Display();

        System.out.println("Value 4 find = "+ myList.Find("4"));
        System.out.println("Value 7 find = "+ myList.Find("7"));

        System.out.println("Adding 24 & 3");
        myList.Insert("24");
        myList.Insert("3");

        myList.Display();

        System.out.println("myList size: "+ myList.Size());

        if (!myList.Insert("12"))
            System.out.println("Could not add 12, full");

        System.out.println("Removing 10, adding 12.");
        myList.Delete("10");
        myList.Insert("12");

        myList.Display();
    }
} 
```

类 OrderedStringList

```
package assignment2;
public class OrderedStringList {
    int length;
    int numUsed;
    String[] storage;
    boolean ordered;

    public OrderedStringList(int size){
        length = size;
        storage = new String[length];
        numUsed = 0;
    }

    public boolean Insert(String value){
        boolean result = false;
                int index = 0;
                if (numUsed < length) {
                    while (index <= numUsed) {
                        int compare = storage[index].compareTo(value);
                        if (compare < 0)
                            index++;
                    }
                    moveItemsDown(index);
                    storage[index] = value;
                    numUsed++;
                    result = true;
                }
                return result;
    }
    private void moveItemsDown(int start){
        int index;
        for (index = numUsed-1; index >=start; index--){
            storage[index+1] = storage[index];
        }
    }

    private void moveItemsUp(int start){
        int index;
        for (index = start; index < numUsed-1; index++){
            storage[index] = storage[index+1];
        }
    }

    public boolean Find(String value){
        return (FindIndex(value) >= 0);
    }

    private int FindIndex(String value) {
        int result = -1;
        int index = 0;
        boolean found = false;
        while ((index < numUsed) && (!found)) {
            found = (value.equals(storage[index]));
            if (!found)
                index++;
        }
        if (found)
            result = index;
        return result;
    }

    public boolean Delete(String value){
        boolean result = false;
        int location;
        location = FindIndex(value);
        if (location >= 0) {
            moveItemsUp(location);
            numUsed--;
            result = true;
        }
        return result;
    }

    public void Display() {
        int index;
        System.out.println("list Contents: ");
        for (index = 0; index < numUsed; index++) {
            System.out.println(index+" "+storage[index]);
        }
        System.out.println("-------------");
        System.out.println();
    }

    public void DisplayNoLF() {
        int index;
        System.out.println("list Contents: ");
        for (index = 0; index < numUsed; index++) {
            System.out.print(storage[index]+" ");
        }
        System.out.println("-------------");
        System.out.println();
    }

    public int Size(){
        return numUsed;
    }
} 
```

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:10:54.643

它应该是

```
while(index < numUsed) 
```

如果您使用 <=，您将始终访问空列表中的索引 0，该列表将为 null。然后，当您尝试对其调用 compareTo 时，它将引发 NPE。

此外，如果 null 是要添加到列表中的合法值，则需要对 compareTo 调用进行 null 检查，并确定 null 是按字母顺序排列的第一个还是最后一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:15:43.203

您可以使用`Arrays#sort`它来维护秩序，它已经在图书馆中可用。

```
public boolean Insert(String value){
    boolean result = false;

    if (numUsed < length) {
        storage[index] = value;
        numUsed++;
        result = true;
        Arrays.sort(storage); 
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:10:34.590

原因如下：

```
public boolean Insert(String value){
    boolean result = false;
            int index = 0;
            if (numUsed < length) {
                while (index <= numUsed) { // Here the first time numUsed = 0, index = 0, index <= numUsed;
                    int compare = storage[index].compareTo(value); // The first time, storage[0] == null; NullPointException is thrown
                    if (compare < 0)
                        index++;
                }
                moveItemsDown(index);
                storage[index] = value;
                numUsed++;
                result = true;
            }
            return result;
} 
```

也许改成`<=`会`<`做？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T19:26:11.733

在第一次运行这条线

```
int compare = storage[index].compareTo(value); 
```

您正在比较`storage[index]`哪个值`null`与`value`哪个值`not null or empty`

以实现平稳运行的替换

```
 while(index =< numUsed) {
        int compare = storage[index].compareTo(value);
        if(compare < 0)
            index++;
    } 
```

和

```
 while(index < numUsed) {
        int compare = storage[index].compareTo(value);
        if(compare < 0)
            index++;
    } 
```

# ios - 以编程方式添加 UIToolbar

> ID：14901606
> 
> 赞同：0
> 
> 时间：2013-02-15T19:06:08.313
> 
> 标签：ios, ios4

我在这里做错了什么？我只是在屏幕底部看不到工具栏 这是我的代码。

```
CGRect rect = self.view.frame;

UIToolbar *toolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(rect.origin.x,
                                                                 rect.size.height-44,
                                                                 rect.size.width,
                                                                 44)];
self.bottomToolbar = toolBar;
[toolBar release];
[_bottomToolbar setBackgroundImage:nil
                forToolbarPosition:UIToolbarPositionBottom
                        barMetrics:UIBarMetricsDefault];
[self.view addSubview:_bottomToolbar]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:22:43.437

您需要将工具栏设置`autosizingMask`为“灵活上边距”值。

此外，您的代码处理`toolBar`变量、`bottomToolbar`属性和`_bottomToolbar`ivar。使用属性或 ivar。像你一样使用这两种方法会让人感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:19:03.903

缺少一行，它的 sizeToFit 或 makeKeyAndVisible() 只需查看 ViewControllerProgrammingGuide 中的示例

# jquery - 通过 CSS 和 Jquery 访问动态生成的嵌套内容

> ID：14901613
> 
> 赞同：0
> 
> 时间：2013-02-15T19:06:20.100
> 
> 标签：jquery, css, html-table

我正在尝试访问表格和 div 中的锚链接。我没有任何运气访问 CSS 属性，因此我可以使用 jQuery 捕获单击事件。此内联对话框的内容是即时生成的。

```
<div id="cds-cad-inline-dialog" style="">
    <div>The model you requested has been successfully generated.</div>
    <table>
        <tbody>
            <tr>
                <td>
                    <div>
                        <a href="alinktoadownloadfile">Download File</a>
                    </div>
                </td>
            </tr>
        </tbody>
   </table>
</div> 
```

我尝试了以下方法：

```
 $("div.a#cds-cad-container").click(function () {
                $("#cds-cad-static-3D-viewer").show();
                $("#cds-cad-inline-dialog").hide();
            }); 
```

和

```
 $("div.table.tbody.tr.td.div.a").click(function () {
                $("#cds-cad-static-3D-viewer").show();
                $("#cds-cad-inline-dialog").hide();
            }); 
```

任何帮助，将不胜感激。

编辑：

## 之前的代码

```
 <form id="_3d" runat="server">
        <div id="show_3d" runat="server" style="display:block;width:635px">
            <div id="cds-cad-container">
                <div id="cds-cad-inline-dialog" style="display:none;"></div> 
```

## 之后的代码

看上面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:09:02.733

```
$("#cds-cad-container").on("click","table div a",function(event){
    alert("hello world, href : "+$(this).attr("href"));
    event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:08:19.747

Your selectors are incorrect. Try

```
$("#cds-cad-container a").click(function () { 
```

Your previous "div.a#cds-cad-container" is trying to select a `div` with class `a`.

and

```
$("div table tbody tr td div a").click(function () { 
```

You were using dots in this one, which is a class selector. Use spaces to select nested elements that may have intervening elements.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:45:23.457

就像添加它一样，如果您使用，请 `$("#cds-cad-container a").click(function () { //your code });`确保您只有一个要添加点击事件的锚标记。

这会将点击事件附加到具有 id 的 div 下的所有可用锚标记`cds-cad-container`。

为了避免它，你可以写这样的东西：

`var test = $("#cds-cad-container a")[0].onclick = function(){console.log("test")};`

这会将点击事件仅附加到具有 id 的 div 下的第一个锚标记`cds-cad-container`。

希望这可以帮助。

# vb.net - 一层的多个 DLL

> ID：14901617
> 
> 赞同：1
> 
> 时间：2013-02-15T19:06:52.077
> 
> 标签：vb.net

我通常将项目分为几层，即表示层、业务逻辑层和数据逻辑层。有时我会使用命名空间来分隔层，有时我会拥有三个独立的 DLL（使用层）。

我看到开发人员将层分成多个 DLL。例如，我曾经看到一个业务逻辑层包含一百多个不同的项目文件，因此也有一百多个不同的 DLL。此外，MSDN 文档显示 .NET 框架包含多个 DLL，例如 mscorlib 等。

我相信拥有单独的 DLL 背后的原因是它可以最大限度地减少内存占用，并且它还允许多个开发人员从事不同的项目，例如一个团队可以从事一个项目，另一个团队可以从事另一个项目等。

我在一个两个开发人员团队中工作。开发人员使用什么标准来决定拆分成单独的 DLL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:12:42.380

> 将层分成多个 DLL 的原因是什么？

这样做有多种原因。

1.  它增加了隔离，可以帮助编译器防止您混淆关注点。如果不显式添加引用，则不能“意外”在其他 DLL 中使用内部类型，这允许编译器帮助您保持代码更简洁。
2.  如果您在运行时不使用程序集，则不会加载它。这可以使内存占用更小。（但是，如果使用了所有程序集，则无济于事）。
3.  它在您的 API 和项目中提供了逻辑分离，这有助于您的代码的组织和可维护性。请注意，太多的项目与太少的项目一样糟糕（有时甚至更糟），但是，因为许多项目增加了可能无益的复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:53:55.647

将代码分成多个程序集的原因有很多，其中一些比其他的更具技术性。程序集可用于代码的逻辑分组，就像命名空间一样，事实上，一种常见的模式是将大型命名空间（关注点）分离到该命名空间的单独程序集中。但这个原因绝对不是使用多个程序集的最佳理由。

代码重用就像将代码放入不同程序集中的第一要素。例如，您可能有一个控制台应用程序，其中的所有代码都是编译的一个执行文件。稍后，您决定为同一个应用程序创建一个 Web 应用程序前端。您可能会将解决方案重构为三个项目，而不是将核心代码从控制台应用程序复制到 Web 应用程序：代码代码的类库（主要实现）、控制台应用程序（已经存在）和 Web 应用程序. 控制台应用程序和 Web 应用程序项目/程序集将引用类库项目/程序集，并且主代码在两个实现中重用。请注意，这是过于简单化了。

将代码分成多个程序集以在管理依赖项时分离关注点的另一个原因。在这种情况下，您的代码可能需要引用您可能不想在核心应用程序程序集中引用的面向 Web 的依赖项（其他程序集）。您可以这样做，以便您可以通过将应用程序分解为其他程序集/项目来重用您的核心程序集，而无需在不需要它们时采用不必要的依赖项。

另一个原因是促进大型团队的并发开发，其中子团队可能各自处理不同的程序集，有助于减少处理应用程序不同关注点的开发人员之间的“冲突”数量。

# javascript - Jquery 星级评分在 Firefox 和 chrome 中不起作用

> ID：14901620
> 
> 赞同：0
> 
> 时间：2013-02-15T19:07:00.000
> 
> 标签：javascript, jquery, firefox

[我正在使用来自https://github.com/ripter/jquery.rating](https://github.com/ripter/jquery.rating)的星级插件，并使用选择框代码作为

```
<select name="Rating">
    <option value="6">1</option>
    <option value="7">2</option>
    <option value="8">3</option>
    <option value="9">4</option>
    <option value="10">5</option>
</select> 
```

而javascript代码就像

```
<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="jquery.rating.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("select[name='Rating']").addClass('rating');
            $(".rating").rating();
            $("select[name=Rating]").bind("change", function(){
                alert( $("select[name=Rating]").val() );
            });
        });     
    </script> 
```

并且我使用插件可用的相同 CSS。这里我试图提醒选定的值。它在 IE8 上运行良好，但不适用于 Firefox 和 chrome。在 Firefox 和 chrome 中，警报值始终为 6。我没有得到什么问题。请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:15:03.317

尝试将 JQuery Migrate 包含到您的项目中，看看它是否有效

[https://github.com/jquery/jquery-migrate/](https://github.com/jquery/jquery-migrate/)

# opengl - Alternative color of the box creating with POLYGON

> ID：14901622
> 
> 赞同：1
> 
> 时间：2013-02-15T19:07:04.260
> 
> 标签：opengl

I am to alternative box color for each polygon.

```
void display(void){
    glClear(GL_COLOR_BUFFER_BIT);

    int evenoddcheck = 0;
    int height = 50;
    int width = 100;

    glBegin(GL_POLYGON);
    for( int a=0 ; a <= 1000 ; a=a+100 ) 
    {
        for( int b=0 ; b <= 500 ; b=b+50 ) 
        {
            if( evenoddcheck % 2 == 0 )
            {
                glColor3f(0.0f,0.0f,0.0f);          
            }
            else {
                glColor3f(1.0f,1.0f,1.0f);          
            }

            glVertex2i(b,a);
            glVertex2i(b,width+a);
            glVertex2i(height+b,width+a);
            glVertex2i(height+b,a);
            evenoddcheck++;
        }
    }

    glEnd();
    glFlush();

} 
```

work fine with single color, but when i render code it shows [http://s11.postimage.org/3ms3mmc4j/box.png](http://s11.postimage.org/3ms3mmc4j/box.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:22:20.330

您正在使用 GL_POLYGON，它仅适用于凸面、共面图元。您正在绘制的是规则网格上的一堆顶点，通过四边形连接边缘：这显然不符合这些约束；它也完全弄乱了你的拓扑。简单修复：将 GL_POLYGON 替换为 GL_QUADS。

哦，你一开始就不应该使用立即模式（你知道 glBegin ... glEnd）。它已经过时了超过 15 年（接近 20 年）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:17:49.870

我首先尝试了您的代码，我也发现了与您相同的问题。我像这样将 glBegin() 和 glEnd 保存在第二个 for 循环中，然后它工作正常，因为在每个循环中你绘制 ploygon 并开始下一个，所以在这里你可以使用 GL_POLYGON。但是在@dantenwolf 描述的代码中，您无法通过使用GL_POLYGON 获得正确的结果，您必须使用GL_QUADS。

```
for( int a=0 ; a <= 100 ; a=a+10 )
{        for( int b=0 ; b <= 50 ; b=b+5 ).
    {

        glBegin(GL_POLYGON);
        if( evenoddcheck % 2 == 0 )
        {
            glColor3f(0.0f,0.0f,0.0f);
        }
        else {
            glColor3f(1.0f,1.0f,1.0f);
        }

        glVertex2i(b,a);
        glVertex2i(b,width+a);
        glVertex2i(height+b,width+a);
        glVertex2i(height+b,a);
        glEnd();

        evenoddcheck++;
    }
}
glFlush(); 
```

# c# - Hiding GridView Columns with ItemTemplate

> ID：14901627
> 
> 赞同：0
> 
> 时间：2013-02-15T19:07:27.120
> 
> 标签：c#, asp.net, data-binding, gridview

I Have a `GridView` in .aspx page that I want to hide columns based on aspx.cs `BindData()` method. I have tried using below code but not able to hide. I am using Asp.net with C#.

Below is my `GridView` with columns and I have also included the `Button` click code.

```
<GridView>
    <Columns>
        <asp:BoundField DataField="id" HeaderText="Id" SortExpression="id" 
            Visible="false" />                     
        <asp:TemplateField HeaderText="RollNo" >
            <ItemTemplate>
                <%# Eval("st_rollno")%>
            </ItemTemplate>
            <EditItemTemplate>    
                <asp:TextBox ID="tbsturollno" runat="Server"
                    Text='<%# Eval("st_rollno") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Name">
            <ItemTemplate>
                <%# Eval("st_name")%>
            </ItemTemplate>
            <EditItemTemplate>    
                <asp:TextBox ID="tbstuname" runat="Server"
                    Text='<%# Eval("st_name") %>'></asp:TextBox>
            </EditItemTemplate>               
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Theory">
            <ItemTemplate>
                <%# Eval("theory")%>
            </ItemTemplate>
            <EditItemTemplate> 
                <asp:TextBox ID="tbtheory" runat="Server"
                    Text='<%# Eval("theory") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Total" >
            <ItemTemplate>
                <%# Eval("ttotal")%>
            </ItemTemplate>
            <EditItemTemplate>   
                <asp:TextBox ID="tbtheorytotal" runat="Server"
                    Text='<%# Eval("ttotal") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Lab" >
            <ItemTemplate>
                <%# Eval("lab")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="tblab" runat="Server"
                    Text='<%# Eval("lab") %>'>
                </asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Total" >
            <ItemTemplate>
                <%# Eval("ltotal")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="tblabtotal" runat="Server"
                    Text='<%# Eval("ltotal") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Tutorial" >
            <ItemTemplate>
                <%# Eval("tutorial")%>
            </ItemTemplate>
            <EditItemTemplate>   
                <asp:TextBox ID="tbtutorial" runat="Server"
                    Text='<%# Eval("tutorial") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Total" >
            <ItemTemplate>
                <%# Eval("tutotal")%>
            </ItemTemplate>
            <EditItemTemplate>    
                <asp:TextBox ID="tbtutorialtotal" runat="Server"
                    Text='<%# Eval("tutotal") %>'></asp:TextBox>
            </EditItemTemplate>   
        </asp:TemplateField>        
    </Columns>
</GridView>

private void BindData()
{
    DataTable dt = new DataTable();
    using (SqlConnection con = new SqlConnection(ConnectionString))
    {
        if (stype.Equals("L"))
        {
            query = "SELECT [id], [st_rollno], [st_name], [lab], [ltotal] FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]";
            GridView1.Columns[3].Visible = false;
            GridView1.Columns[4].Visible = false;
            GridView1.Columns[7].Visible = false;
            GridView1.Columns[8].Visible = false;
        }
        else if (stype.Equals("T"))
        {
            query = "SELECT [id], [st_rollno], [st_name], [theory], [ttotal] FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]";
            GridView1.Columns[5].Visible = false;
            GridView1.Columns[6].Visible = false;
            GridView1.Columns[7].Visible = false;
            GridView1.Columns[8].Visible = false;
        }
        else if (stype.Equals("T-L"))
        {
            GridView1.Columns[7].Visible = false;
            GridView1.Columns[8].Visible = false;    
            query = "SELECT [id], [st_rollno], [st_name], [theory], [ttotal], [lab], [ltotal] FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]";
        }
        else
        {    
            query = "SELECT [id], [st_rollno], [st_name],[theory], [ttotal], [lab], [ltotal], [tutorial], [tutotal] FROM [Attendence_Subject_Wise] WHERE (([branch_name] = @branch_name) AND ([scode] = @scode) AND ([sem_no] = @sem_no) AND ([sess_no] = @sess_no)) ORDER BY [st_rollno]";
        }

        com = new SqlCommand(query);
        com.Parameters.Add("@branch_name", dept);
        com.Parameters.Add("@scode", dpsubject.SelectedItem.Text.ToString());
        com.Parameters.Add("@sem_no", Int32.Parse(dpsemno.SelectedItem.Text.ToString()));
        com.Parameters.Add("@sess_no",Int32.Parse(dpsessional.SelectedItem.Text.ToString()));

        using (SqlDataAdapter sda = new SqlDataAdapter())
        {
            com.Connection = con;
            con.Open();
            sda.SelectCommand = com;
            sda.Fill(dt);
            GridView1.DataSource = dt;
            GridView1.DataBind();
            con.Close();
        }    
    }
}

protected void bsubmit_Click(object sender, EventArgs e)
{
    this.BindData();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:26:58.613

```
<asp:GridView runat="server" ID="GridView1" 
   AutoGenerateColumns="False" OnPreRender="GridView_PreRender">
    <Columns>
        <asp:BoundField DataField="LastName" HeaderText="LastName" />
        <asp:BoundField DataField="FirstName" HeaderText="FirstName" />
    </Columns>
</asp:GridView>

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        var users = new List<User>
            {
                new User {FirstName = "John", LastName = "Doe"},
                new User {FirstName = "Marry", LastName = "Newton"},
                new User {FirstName = "Joe", LastName = "Black"}
            };

        GridView1.DataSource = users;
        GridView1.DataBind();
    }
}

protected void GridView_PreRender(object sender, EventArgs e)
{
    foreach (DataControlField column in GridView1.Columns)
        if (column.HeaderText == "FirstName")
            column.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:29:24.867

使用 GrideView.DataBind() 您正在调用 PostBack，它将撤消您对前端所做的任何更改。尝试对 DataBind 之后的列进行处理。

# twitter-bootstrap - Twitter Bootstrap：没有匹配项的 Typeahead 功能

> ID：14901628
> 
> 赞同：6
> 
> 时间：2013-02-15T19:07:42.887
> 
> 标签：twitter-bootstrap, bootstrap-typeahead

我有一个将“用户”与“事物”相关联的“添加新事物”表单。

我正在使用 Twitter Bootstrap Typeahead 在我键入时提供用户列表。
它工作得很好，如果用户在列表中，我可以选择它。

但如果用户不存在，我想显示一个“创建新用户”链接。

所以基本上，我需要在`.typeahead()`. 我搞不定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-07T13:06:34.363

扩展 typeahead 类：

```
var newusertext = 'New user';
var newuserlink = '/add/user/0';

$.fn.typeahead.Constructor.prototype.process = function (items) {
      var that = this

      items = $.grep(items, function (item) {
        return that.matcher(item)
      })

      items = this.sorter(items)

      if (!items.length) {
         return this.rendernonmatch().show()
      }

      return this.render(items.slice(0, this.options.items)).show()
    } 

$.fn.typeahead.Constructor.prototype.rendernonmatch = function () {
      var that = this
      var items = new Array();
      items.push(newusertext)
      items = $(items).map(function (i, item) {
        i = $(that.options.item).attr('data-value', item)
        i.find('a').html(that.highlighter(item))
        return i[0]
      })
      items.first().addClass('active')
      this.$menu.html(items)
      return this
    }

/* redirect to the registration page to add a new user */    
$.fn.typeahead.Constructor.prototype.updater = function (item) {
      if(item === newusertext){ window.location =  newuserlink; return}
      return item
    } 
```

见：[http ://bootply.com/66630](http://bootply.com/66630)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T09:28:22.210

我使用了 typeahead **notFound** 'template' 选项，从那里我可以设置一个对我来说更易于访问的链接按钮。预输入设置：

```
$('#remote .typeahead').typeahead({
    hint: true,
    highlight: true,
    minLength: 2
  },
  {
    name: 'sn-tags',
    display: 'tag',
    source: oBusqTags, //Bloodhound object
    templates: {
      notFound: '<p>No matches<br><a id="btnAddNewTag" href="#">Add New Tag</a></p>'
    }
}).bind("typeahead:select", function(obj, datum, name) {
  //add selection as an option on a select element
  $('#lbxAddTag').append($('<option>', {
    value: datum.id,
    text: datum.tag
  }));
}); 
```

这是该链接的侦听器：

```
$('#remote').on('click', '#btnAddNewTag', function(e){
    $('#lbxAddTag').append($('<option>', {
        value: "0",
        // this is tricky, as there aren't any matches then 
        // $('#remote .typeahead').typeahead('val') contains '', 
        // so i had to set an id for the typeahead input text box and 
        // 'manually' get its value
        text: $('#tbxBusqTag').val()
    }));
    // as the text is already added as a select option
    // i clean the typeahead input box
    $('#remote .typeahead').typeahead('val','');
    e.preventDefault();
}); 
```

# css - 重用 CSS 类

> ID：14901634
> 
> 赞同：2
> 
> 时间：2013-02-15T19:08:05.320
> 
> 标签：css

我应该在上一个问题（[CSS 样式声明重用](https://stackoverflow.com/questions/14898852/css-style-declaration-reusage)）中问过这个问题，但当时我没有想到。既然已经回答了这个问题，我将开始一个新的问题。

我正在尝试在 CSS 中创建将在我的应用程序中使用的调色板。例如：

```
.blue  { color: #434544; }
.green { color: #G99933; } 
```

我不想在我的 CSS 中的其他任何地方定义颜色。`.blue`我遇到的问题是当我需要定义时如何使用样式`background-color`？看看这个：

```
.editor { background-color: #434544 } 
```

我想引用回`.blue`样式而不是在这里再次定义它。我怎样才能做到这一点？

**更新** 我为我的问题找到了完美的解决方案：Chirpy -> [http://chirpy.codeplex.com/](http://chirpy.codeplex.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T19:08:56.380

在原生 CSS 中没有办法做到这一点。您应该考虑[预处理您的 CSS](http://css-tricks.com/musings-on-preprocessing/)，因为所有这些预处理器都支持变量。

这是使用（scss-flavored）SASS 的样子：

```
$blue: #434544;
$green: #G99933;

.blue  { color: $blue; }
.green { color: $green; }

.editor { background-color: $blue } 
```

# javascript - Why is my image not loading?

> ID：14901636
> 
> 赞同：0
> 
> 时间：2013-02-15T19:08:07.863
> 
> 标签：javascript, jquery, css, dom

At [http://blajeny.com](http://blajeny.com) I have:

```
jQuery('body').click(function(event_object)
    {
    spark(event_object.pageX, event_object.pageY);
    });

function spark(x, y)
    {
    console.log('Spark called.');
    var image_object = new Image();
    image_object.onLoad = function()
        {
        image_object.style.position = 'absolute';
        image_object.style.zIndex = 1;
        image_object.style.top = y;
        image_object.style.left = x;
        }
    image_object.src = '/img/spark.png';
    } 
```

The intended effect, at this stage, is to load an image at the X and Y where the user clicked. (I want to do other things as well, like animate it, but right now I'm trying to get the image to show up where the user clicked.)

The javaScript console shows that the handler is being called, however I am not seeing what I expect, a hazy blue circle immediately below and to the right of the point where the mouse was clicked.

What can/should I do differently so it loads a fresh image below and to the right of the clicked coordinates?

Thanks,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:09:57.110

据我所知，`onLoad`应该是`onload`

```
var image_object = document.createElement('img');
image_object.onload = function() { // Note the small onload
    // your code
}

// Also, append the image_object to DOM
document.body.appendChild(image_object); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:09:31.623

您永远不会将图像附加到 DOM，这就是您看不到它的原因。

你可以做

```
document.body.appendChild(image_object); 
```

您还必须替换`onLoad`by并用 unit`onload`指定`top`and位置：`left`

```
image_object.onload = function()  {
    image_object.style.position = 'absolute';
    image_object.style.zIndex = 1;
    image_object.style.top = '100px';
    image_object.style.left = '100px';
} 
```

[示范](http://jsfiddle.net/5qAk9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:11:48.847

我没有看到您将图像附加到 DOM，这可能就是您看不到它的原因

```
$('body').append($(image_object)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T19:19:32.780

我同意，首先使用“img”标签创建一个元素，为其分配 src 值，并将其附加到当前 div（在本例中为主体），如下所示

```
var imgTag = document.createElement("img");
imgTag.src = '/img/spark.png';
document.body.appendChild(imgTag); 
```

希望这可以帮助。

# android - Android: onResume() crashes on HttpRequest to Google Places

> ID：14901637
> 
> 赞同：0
> 
> 时间：2013-02-15T19:08:08.393
> 
> 标签：android, httprequest, onresume, google-places

Before making an `HttpRequest` to Google Places, I need to check for a connection.

If there is no active connection, it will display "No Connection" to the user, otherwise it will get the current location and perform the request.

Some test cases:

a) 1\. Enable connection -> Gets data fine, 2\. Again -> Gets data fine

b) 1\. No connection -> "No Connection", 2\. Enable connection -> Gets data fine

c) 1\. Enable connection -> Gets data fine, 2\. Disable connection -> "No Connection"

Good so far, but then

d) 1\. Active Connection -> Gets data fine, 2\. Disable connection -> "No Connection", 3\. Enable Connection -> "Write error: ssl=0x5a90fbb0: I/O error during system call, Broken pipe"

I have log statements confirming that the location data is correct before the `HttpRequest` in the 3rd step of test case d). So I cannot see any reason why it is failing.

Code as requested:

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.results);

// set up location manager to work with location service
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

if (checkInternet()) {

    currentLocation = locationManager
                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

    location = currentLocation.getLatitude() + ","
                    + currentLocation.getLongitude();

    places = new PlaceList();

    // keyword is passed in from previous activity
    Intent intent = this.getIntent();
        keyword = intent.getStringExtra("keyword");

        if (keyword != "") {

            class GoogleRequest extends AsyncTask<Void, Void, Integer> {

                protected Integer doInBackground(Void... params) {
                    mht = MyHttpTransport.createRequestFactory();
                    Resources res = getResources();
                    try {
                        HttpRequest request = mht
                                .buildGetRequest(new GenericUrl(
                                        res.getString(R.string.places_search_url)));
                        request.getUrl().put("key",
                                res.getString(R.string.google_places_key));
                        request.getUrl().put("location", location);
                        request.getUrl().put("radius", Config.RADIUS);
                        request.getUrl().put("keyword", keyword);
                        request.getUrl().put("sensor", false);

                        places = request.execute().parseAs(
                                PlaceList.class);

                                } catch (IOException e) {
                        Log.e(Config.MSGTAG, e.getMessage());
                    }

                    return null;
                }

                @Override
                protected void onPostExecute(Integer result) {
        // details omitted because it fails to 
        // get data from the places field
                }

            }

@Override
protected void onResume() {
    super.onResume();

    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 5000, 100, this);
}

@Override
protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
}

@Override
public void onLocationChanged(Location location) {
    locationManager.removeUpdates(this);
    currentLocation = location;
}

public boolean checkInternet() {
    ConnectivityManager cm = (ConnectivityManager) this
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo wifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    NetworkInfo mobile = cm
            .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if (wifi.isConnected()) {
        return true;
    } else if (mobile.isConnected()) {
        return true;
    }
    return false;
    }
} 
```

Log:

```
02-15 19:34:32.582: E/*(9967): Write error: ssl=0x5efd0a98: I/O error during system call, Broken pipe 
```

the rest of the log is the postExecute() but that's irrelevant.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:02:06.707

我已经解决了这个问题。

在我的自定义`HttpTransport`类中，我有一个`final` `ApacheHttpTransport`对象，每次`createRequestFactory()`调用方法时都会重新使用它。问题似乎是，当连接丢失，然后创建一个新连接时，它会尝试使用旧连接（类似这些线）。所以为了解决这个问题，我`ApacheHttpTransport`在方法中创建了一个新对象`createRequestFactory()`。

# java - Using OpenGL with LWJGL won't yield a picture

> ID：14901640
> 
> 赞同：0
> 
> 时间：2013-02-15T19:08:24.510
> 
> 标签：java, eclipse, opengl, render

Im trying to create and RPG game based on the youtube series from TheBennyBox, and so far I have 8 classes, which are supposed to display a square with openGL and able to move the square around, although my square is not shwoing up on the screen. Here's my code for the important classes: Main:

```
 package com.base.engine;
    import java.util.logging.Level;
    import java.util.logging.Logger;

    import org.lwjgl.LWJGLException;
    import org.lwjgl.input.Keyboard;
    import org.lwjgl.opengl.Display;
    import org.lwjgl.opengl.DisplayMode;

    import com.base.game.Game;

    import static org.lwjgl.opengl.GL11.*;
    public class Main {
        private static Game game;
    public static void main(String[] args){
        initDisplay();
        initGL();
        initGame();
        gameLoop();
    }
    private static void gameLoop(){
        while(!Display.isCloseRequested()){
            getInput();
            update();
            render();
        }
    }
    private static void initGame(){
        game = new Game();
    }
    private static void render() {
        glClear(GL_COLOR_BUFFER_BIT);
        glLoadIdentity();
        Display.update();
        Display.sync(60);
        game.render();
    }
    private static void update() {
        game.update();

    }
    private static void getInput() {
        game.getInput();

    }
    private static void initGL(){
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0,Display.getWidth(),0,Display.getHeight(),-1,1);
        glMatrixMode(GL_MODELVIEW);
        glDisable(GL_DEPTH_TEST);
        glClearColor(0,0,0,0);
    }
    private static void cleanUp(){
        Display.destroy();
        Keyboard.destroy();
    }

    private static void initDisplay(){
        try {
            Display.setDisplayMode(new DisplayMode(800,600));
            Display.create();
            Keyboard.create();
            Display.setVSyncEnabled(true);
        } catch (LWJGLException ex) {
            // TODO Auto-generated catch block
            Logger.getLogger(Main.class.getName()).log(Level.SEVERE,null,ex);
        }

    }

    } 
```

Game:

```
 package com.base.game;

    import java.util.ArrayList;

    import org.lwjgl.opengl.Display;

    import com.base.engine.GameObject;
    import com.base.game.gameobject.Player;

    public class Game {
        private ArrayList<GameObject> objects;
        private Player player;
        public Game(){
            objects = new ArrayList<GameObject>();
            player = new Player(Display.getWidth()/2-Player.SIZE/2,Display.getHeight()/2-Player.SIZE/2);
            objects.add(player);
        }

    public void getInput(){
        player.getInput();
    }
    public void update(){
        for(GameObject go : objects){
            go.update();
        }
    }
    public void render(){
        for(GameObject go : objects){
            go.render();
        }
    }

    } 
```

GameObject:

```
 package com.base.engine;
    import static org.lwjgl.opengl.GL11.*;
    public abstract class GameObject {
    protected float x;
    protected float y;
    protected float sx;
    protected float sy;
    protected Sprite spr;
    public void update(){

    }
    public void render(){
        glPushMatrix();
        {
            glTranslatef(x,y,0);
            spr.render();

        }
        glPopMatrix();
    }
    public float getX() {
        return x;
    }
    public void setX(float x) {
        this.x = x;
    }
    public float getY() {
        return y;
    }
    public void setY(float y) {
        this.y = y;
    }
    public float getSx(){
        return spr.getSx();
    }
    public float getSy(){
        return spr.getSy();
    }
    protected void init(float x,float y,float r, float g, float b, float sx, float sy){
        this.x=x;
        this.y=y;
        this.spr = new Sprite(r,g,b,sx,sy);

    }
    } 
```

Sprite:

```
 package com.base.engine;
    import static org.lwjgl.opengl.GL11.*;
    public class Sprite {
    private float r;
    private float g;
    private float b;
    private float sx;
    private float sy;
    public Sprite(float r,float g,float b,float sx,float sy){
        this.g=g;
        this.r=r;
        this.b=b;
        this.sx=sx;
        this.sy=sy;

    }
        public void render() {
            glColor3f(r,g,b);
            glBegin(GL_QUADS);
            {
            glVertex2f(0,0);
            glVertex2f(0,sy);
            glVertex2f(sx,sy);
            glVertex2f(sx,0);
            }
            glEnd();

        }
    public float getSx(){
        return sx;
    }
    public float getSy(){
        return sy;
    }
    public void setSx(float sx){
        this.sx = sx;
    }
    public void setSy(float sy){
        this.sy=sy;
    }
    } 
```

Player:

```
 package com.base.game.gameobject;
    import org.lwjgl.input.Keyboard;

    import com.base.engine.GameObject;
    import com.base.engine.Sprite;
    public class Player extends GameObject{
        public static final float SIZE = 32;

    public Player(float x, float y){
        init(x,y,0.1f,1f,0.25f,SIZE,SIZE);
    }
    public void getInput(){
        if(Keyboard.isKeyDown(Keyboard.KEY_W)){
            move(0,1);
        }
        if(Keyboard.isKeyDown(Keyboard.KEY_S)){
            move(0,-1);
        }
        if(Keyboard.isKeyDown(Keyboard.KEY_A)){
            move(-1,0);
        }
        if(Keyboard.isKeyDown(Keyboard.KEY_D)){
            move(0,1);
        }

    }
    private void move(float magX,float magY){
        x += getSpeed()-magX;
        y += getSpeed()-magY;
    }
    public float getSpeed(){
        return 4f;
    }
    } 
```

And there are others but these are the most important. Sorry for so much code..i just don't know whats going wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:53:29.530

我不是 LWJGL 方面的专家，通常你会在渲染*后调用同步函数。*它当前的编写方式我假设您在缓冲区交换之后绘制图片（即在帧缓冲区的内容发送到屏幕之后），但下一次渲染迭代将清除它。尝试重新排序一些东西：

```
private static void render() {
    glClear(GL_COLOR_BUFFER_BIT);
    glLoadIdentity();

    game.render();

    Display.update();
    Display.sync(60);
} 
```

请注意，许多其他事情也有偏差。帧渲染迭代的标准序言是设置视口和投影。即 initGL 中的整个代码属于渲染的开始。

# android - Run single JSON parser class asynchronously

> ID：14901641
> 
> 赞同：0
> 
> 时间：2013-02-15T19:08:37.457
> 
> 标签：android, json, asynchronous

Currently, I have a class called JSONParser I want to run functions in this class asynchronously but I can't figure out how to so I stuck with disabling strictmode at the moment.

My class is like as follows...

```
public class JSONParser {

    // Constructor
    public JSONParser() {

    }

    public JSONArray getJSONFromUrl(String url) {
        // HTTP Request
        try {
            // defaultHttpClient
            HttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }   

        // Streaming data into variable
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // Try to parse the string to a JSON object
        try {
            jArr = new JSONArray(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jArr;
    }

    public void parseJSON(JSONArray jsonArray) {
        // Parsing goes here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:22:16.470

你需要这样的东西（小心，未经测试）

```
public class JSONParser {
    private OnParsedListener mListener;

    // Constructor
    public JSONParser(OnParsedListener l) {
        mListener = l;
    }

    public void getJSONFromUrlAsync(final String url) {
        new AsyncTask<Void, Void, String>() {
            private JSONArray arr;
            @Override
            protected String doInBackground(final Void... params) {
                arr = getJSONFromUrl(url);
            }
            @Override
            protected void onPostExecute(final String result) {
                mListener.onArrayResponse(arr)
            }
        }.execute();
    }

    public JSONArray getJSONFromUrl(String url) {
        // HTTP Request
        try {
            // defaultHttpClient
            HttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }   

        // Streaming data into variable
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // Try to parse the string to a JSON object
        try {
            jArr = new JSONArray(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }
        return jArr;
    }

    public void parseJSON(JSONArray jsonArray) {
        // Parsing goes here
    }
    public interface OnParsedListener{
        void onArrayResponse(JSONArray arr);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:23:46.780

> 目前，我有一个名为 JSONParser 的类，我想在这个类中异步运行函数，但我不知道如何去做，所以我现在坚持禁用严格模式。

所以你应该用它`AsyncTask`来达到你的目标。因此，只需创建子类`AsyncTask`并将您的`JSONParser`逻辑带入`doInBackground()`方法：

```
public class JSONWorker extends AsyncTask<String, Void, Void> {

   protected Void doInBackground(String... params) {
      JSONParser parser = new JSONParser();
      JSONArray arr = parser.getJSONFromUrl(params[0]);
      // do next work.

   }

   ...

} 
```

# php - Php text game project: flashing dash

> ID：14901642
> 
> 赞同：0
> 
> 时间：2013-02-15T19:08:37.477
> 
> 标签：php

I think this is probably a fairly original question. I'm new to php, and as practice to get comfortable with the language, Im working on a terminal like "hacker vs security" game. It's a pretty easy layout, and I'm looking forward to the possibilities, but I'd like to echo a dash (-) that flashes in front the "command line." Is this even possible: here is my current attempt:

```
 <?php
    $dash = "-";
    $space = " ";
    $int = 1;

    if ($odd == $int % 2)
    {
    $od_ev = 2;
    $int++;
    }
    else
    {
    $od_ev =3;
    $int++;
    }

    while ($od_ev == 2)
    {
    echo $dash;
    }

    ?> 
```

Edit: a while, else capability in php would work nicely here, allowing an:

```
 else
    {
    Echo $space
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:22:14.283

假设您想使用 PHP CLI，以下应该可以工作：

在破折号/空格之后输出 a `"\r"`，以便将光标设置为行首并覆盖最后一个输出。你应该使用下面的代码或类似的东西：

```
<?php
$char[0] = "-";
$char[1] = " ";
$int = 1;

while(1){
    $c = $int % 2;
    echo $char[c] . "\r";
    $int++;
    sleep(100); //that the user has a chance to see the flashing, time to wait in milliseconds
} 
```

您的代码只需将 $od_ev 设置为 3 并将 $int 加一然后停止。

# jquery - jquery image swap - for galleriffic

> ID：14901643
> 
> 赞同：0
> 
> 时间：2013-02-15T19:08:44.643
> 
> 标签：jquery, galleriffic

I have bit of a fiddly one here but I am basically attempting to put an image swap function into Galleriffic. I have been adapting the jquery Galleriffic image gallery to fit a client's needs and all is going well apart from this one function that I need to add.

[http://www.susanyounganimation.com/test/drawings/carnival.html](http://www.susanyounganimation.com/test/drawings/carnival.html)

Beneath the large image on the left is the text 'negative/positive'. The client wants the user to have the option to see a negative i.e. inverted version of the image when one clicks on 'negative' and then the image to revert back to the original when they click positive'. I have every image in the gallery as a negative version (exactly the same dimensions etc) so what I need to do is simply replace the current image with another when one clicks on the negative or positive text beneath.

Hope this all makes sense. Can anyone help me with some script that will enable this? Any comments welcome as I am at my wits end with this one!

All the best

S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:29:19.143

我不是那个画廊的专家，但我将如何解决这个问题。我会创建负片图像并将它们存储在与主图像相同的文件夹中，并在文件末尾添加一个负片，例如：

绘画-001.jpg

绘画-001-neg.jpg

然后为负和正链接添加一个单击事件处理程序，该处理程序将用相同的图像替换当前的大图像 src，并以“neg-”开头。

```
$("img#ID_OF_MAIN_IMAGE").src($(this).attr('src').replace('.jpg','-neg.jpg')); 
```

并恢复它：

```
$("img#ID_OF_MAIN_IMAGE").src($(this).attr('src').replace('-neg.jpg','.jpg')); 
```

您只需要一个正/负链接实例，而不是每张照片一个。

如果不清楚，请告诉我

# asp.net - .NET Ionic.Zip：压缩或未压缩大小，或偏移量超过最大值

> ID：14901652
> 
> 赞同：11
> 
> 时间：2013-02-15T19:09:13.523
> 
> 标签：asp.net, .net-4.0, windows-server-2008

我有以下设置：

*   Win2008服务器
*   Ionic.zip 参考模块
*   用于构建 zip 文件的单独驱动器
*   .NET 4.0

Web 应用程序即时构建 zip 包，并允许客户端下载该包。

这个系统运行得非常好……直到现在。

最近我们添加了一些较大的文件（2GB 到 11GB），这些文件在下载到客户端之前都需要打包。最初我将这个系统设置为在 C 上发生：（一个错误）。马上，尤其是对于较大的文件，我开始收到“磁盘空间不足”错误。我做的第一件事是将系统移动到一个 100GB 的独立驱动器 (K:) 上工作。现在这些文件已在 Intranet 上发布到生产环境中，但我仍然收到这些错误。

1.  我安排了一个每晚清理驱动器的任务，所以即使是 100GB，我也不应该收到错误
2.  C: 和 K: 都有足够的空间
3.  我还不知道是 C: (一个未知的临时文件夹??) 还是 K: 正在填满
4.  更新 - 查看事件日志，它是 K: 正在填满，但是当我检查它时，它没有满......所以我假设临时文件问题......或者？

有没有人可以对此有所了解或就发生的故障排除提供建议？

**编辑 - - - - - - - - - - - -**

我认为我要求的压缩方法可能与文件大小有关。我现在看到其他错误看起来像：

> 压缩或未压缩大小，或偏移量超过最大值。考虑在 ZipFile 实例上设置 UseZip64WhenSaving 属性。

我尝试添加`zip.CompressionMethod = Zip64Option.AsNecessary`认为 zip64 将是必要的行，但后来我得到了错误`Unsupported compression method`。我不确定这些新信息可以从哪里开始。我认为 ZipDotNet 会处理所有这些。

由于用户正在尝试下载此文件，这变得越来越紧迫。我现在正在开发一个补丁作为解决方法。

**更多编辑--------**

当我意识到常规 zip 的大小限制为 4GB 时，有一种 DUH 时刻。Zip64 的大小限制要大得多。

我将该行添加`zip.UseZip64WhenSaving = True`到我的代码中，这似乎已经解决了这个问题。到目前为止，没有任何问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T21:21:14.977

解决方案围绕着不注意 zip 文件大小限制。

使用 DotNetZip 压缩大尺寸文件时，您的 asp.net 编码中会出现如下错误：

1.  磁盘空间不足
2.  压缩或未压缩大小，或偏移量超过最大值。考虑在 ZipFile 实例上设置 UseZip64WhenSaving 属性

当您看到这些错误时，最好通过添加以下行来更改您的 asp 代码：

```
[yourZipReference].UseZip64WhenSaving = Zip64Option.Always 
```

这将更改您的代码以将文件保存为 zip64 格式，因此您可能需要在进行此更改之前进行文件大小检查。

还有一行：

```
[yourZipReference].CompressionMethod = CompressionMethod.BZip2;// or CompressionMethod.Deflate or CompressionMethod.None 
```

这将导致模块使用适合这种情况的 zip 压缩方法，但我还没有测试过这个。

# java - RatingBar（或位置和大小）中星星的边距/填充？

> ID：14901659
> 
> 赞同：0
> 
> 时间：2013-02-15T19:09:33.880
> 
> 标签：java, android

我尝试为我的应用程序制作一个自定义 RatingBar，它为 4 颗星中的每颗星都有不同的图像。使用以下 onDraw 方法，它在我的手机上运行良好。

```
public class MyBar extends RatingBar {

    private int[] starArrayColor = { R.drawable.star_1_color, R.drawable.star_2_color, R.drawable.star_3_color, R.drawable.star_4_color };
    private int[] starArrayGrey = { R.drawable.star_1_grey, R.drawable.star_2_grey, R.drawable.star_3_grey, R.drawable.star_4_grey };

    (...)

    @Override
    protected synchronized void onDraw(Canvas canvas) {
        int stars = getNumStars();
        float rating = getRating();
        float x = 10;

        for (int i=0;i<stars;i++) {
            Bitmap bitmap;
            Resources res = getResources();

            Paint paint = new Paint();
            paint.setAntiAlias(true);
            paint.setFilterBitmap(true);
            paint.setDither(true);

            if ((int) rating-1 == i) {
                paint.setAlpha(255);
                bitmap = BitmapFactory.decodeResource(res, starArrayColor[i]);
            } else {
                paint.setAlpha(70);
                bitmap = BitmapFactory.decodeResource(res, starArrayGrey[i]);
            }

            Bitmap scaled = Bitmap.createScaledBitmap(bitmap, 75, 75, true);
            canvas.drawBitmap(scaled, x, 12, paint);
            x += 96;
        }
    }
} 
```

但是图像的 x/y 位置和大小的“计算”成功了！获得正确的坐标只是反复试验......

如何计算位置/大小等以使其在每台设备上正常工作？

在 AbsSeekBar/Progressbar 的来源中，我发现了名为 mPaddingTop、mPaddingBottom 等的变量。有没有办法获得这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:14:37.043

Bitmap 有一个 getWidth 和 getHeight 函数。您可以使用它们来计算位图的大小。然后，您可以基于此放置它们（使用您希望使用的任何填充）。

# mysql - 在两个表中选择两个列（两个表中的一列相同）

> ID：14901661
> 
> 赞同：0
> 
> 时间：2013-02-15T19:09:39.873
> 
> 标签：mysql

我有两个表 - 类别和子类别，它们都有 id_category。
换句话说，在**类别中**：

```
id_category: 3
category_name: Security 
```

在**子类别**中：

```
id_subcategory: 1
id_category: 3
subcategory_name: Antivirus 
```

我在同一类别中有多个项目，所以我希望它列出这样的项目：
安全性：防病毒、间谍软件、防火墙。

另外，我希望它对其他类别做同样的事情，所以最后它会像这样列出：
安全性：防病毒、间谍软件、防火墙。
多媒体：音频、视频、图像。

我不知道该怎么做。我四处寻找并尝试了不同的东西，但对我没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:11:34.533

您可以使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)聚合函数：

```
SELECT
  category_name,
  GROUP_CONCAT(subcategory_name)
FROM
  category INNER JOIN subcategory
  ON subcategory.id_category=category.id_category
GROUP BY
  category_name 
```

[在这里](http://sqlfiddle.com/#!2/8c8b3/1)看小提琴。

# xcode - 将 PDFKit 添加到 XCode 4.6 项目

> ID：14901662
> 
> 赞同：3
> 
> 时间：2013-02-15T19:09:43.790
> 
> 标签：xcode, pdf, frameworks

我喜欢将 PDFKit 框架添加到我的 OS X Cocoa 项目中，但如果我尝试在*Targets -> Summary -> Linked Frameworks and Libraries*中添加它，它就不存在了。另外，在我的 .h 文件中导入它是不成功的，或者说它不是通过自动完成找到的。我能做些什么？

谢谢你的帮助！

解决了！看评论！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-21T13:54:29.820

正如评论中所要求的：

好的，显然我必须**导入 Quartz 框架**。现在它起作用了。也许这里的这个小小的自助会帮助其他人找到答案：）

# python - 无法导入ghostscript

> ID：14901664
> 
> 赞同：2
> 
> 时间：2013-02-15T19:09:56.453
> 
> 标签：python, import, python-3.x, ghostscript

我使用 Python 3.3。刚刚下载并安装了 ghostscript 32 位（GPL 版本），但我无法导入它。

我正在使用命令：

```
import ghostscript 
```

我收到错误：

```
ImportError: No module named ghostscript 
```

我用大写的“G”试过了，还是不行。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T08:10:20.453

您不仅需要安装 Ghostscript，还需要安装 Python 模块。从这里下载它：http: [//pypi.python.org/pypi/ghostscript](http://pypi.python.org/pypi/ghostscript)并解压文件，然后运行`python setup.py install`

据报道，此模块不适用于 Python 3，因此您可能必须使用 Python 2。此外，它还未经 Windows 测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T09:01:55.180

我可以通过在您导入包的文件下复制 ghostscript 存储库来解决此问题。但是由于 ghostscript 是用 python2 编写的，并且您使用的是 python 3，因此您需要修复一些错误。例如：

```
no module named _gsprint under __init__.py 
```

`import _gsprint as gs`（通过将“ ”更新为 来修复`from . import _gsprint as gs`）。

谢谢

# eclipse - 为什么 SubEclipse 会提示我签入在 SVN-ignore 中标记为已忽略的项目？

> ID：14901667
> 
> 赞同：0
> 
> 时间：2013-02-15T19:09:59.420
> 
> 标签：eclipse, svn, ignore

我正在使用带有 SubEclipse 的 Mac 10.7.5 (Java 6) 上的 Eclipse Juno。我还使用 SVN 进行版本控制。尽管我已经使用“svn propedit ignore”设置了一些文件/文件夹以忽略。命令行 …。

```
Daves-MacBook-Pro:sbadmin davea$ svn propedit ignore . 
```

显示

```
target
.classpath
.settings
.project
bin 
```

当我在 Eclipse 中时，右键单击我的项目 (sbadmin) 并选择 Team -> Commit，对话框始终显示“.classpath”和“.project”作为要签入的文件，尽管我希望它们被忽略。有什么办法可以纠正这个吗？

谢谢， - 戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:59:01.090

Eclipse 似乎忽略了一些全局 SVN 设置。如果您希望在*所有*项目中忽略这些文件，最简单的方法可能是将它们添加到 Eclipse 自己的忽略资源列表中。

只需转到*Preferences -> Team -> Ignored Resources*并将相应的模式添加到列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T10:14:13.330

你把属性名弄错了。不是`ignore`但是`svn:ignore`。这就是为什么这些文件不会被忽略并且您在 Eclipse 中的 svn 插件想要添加它们的原因，因为您在错误的属性中设置了文件列表，所以它没有被考虑在内。

由于您在命令行上看起来很舒服，因此以下是解决此问题的命令：

```
svn pget ignore . > ignore.txt       # backup the content of ignore
svn pset svn:ignore . -F ignore.txt  # set svn:ignore from the backup
svn pdel ignore                      # delete the ignore property 
```

或者正如其他答案指出的那样，您也可以使用 Eclipse 插件来设置忽略模式。

# java - Java 转换时区

> ID：14901673
> 
> 赞同：2
> 
> 时间：2013-02-15T19:10:35.100
> 
> 标签：java, date, timezone

我见过几个这样的问题，但我不能完全正确地转换。我想转换如下日期

**20121116203036Z**

至

**2012-11-16 15:30:36**

我有以下代码

```
 dateStringTime.set( year, mon-1 , day, hour, minute, second );

    Date date = dateStringTime.getTime();

    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    formatter.setTimeZone(TimeZone.getTimeZone("EST"));

    String output = formatter.format();
    return output; 
```

哪个有效，但它给了我以下

**2012-11-16 20:30:36**

关于如何获得**15**而不是**20**的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:18:02.207

首先，您的代码没有格式化“日期”，试试这个：

```
 String output = formatter.format(date); 
```

我还注意到您没有向我们展示您是如何创建`dateStringTime`我认为是`Calendar`. 我注意到该`Calendar.getInstance()`方法还接受`Locale`可能影响时区的 a 。

我的代码：

```
 Calendar dateStringTime = Calendar.getInstance();

    //convert 20121116203036Z       
    int year = 2012;
    int mon = 11;
    int day = 16;
    int hour = 20;
    int minute = 30;
    int second = 36;

    dateStringTime.set( year, mon-1 , day, hour, minute, second );

    Date date = dateStringTime.getTime();

    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    formatter.setTimeZone(TimeZone.getTimeZone("EST"));

    String output = formatter.format(date);
    System.out.println(output); 
```

我的输出：

```
2012-11-16 21:30:36 
```

你注意到这个小时是 1 小时的休息时间？那是因为我在中央时区，当我要求“EST”时，JVM 会考虑到这一点。它认为原始时间在当前时区。

当您注释掉时会发生什么

```
 //formatter.setTimeZone(TimeZone.getTimeZone("EST")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:22:59.827

您的问题是您在错误的时区输入日期。当你这样做时

```
dateStringTime.set(year, month-1 , day, hour, minute, second); 
```

您实际上是使用默认时区输入日期，在您的情况下这不太可能是 UTC。在幕后，Java`Date`表示为 UTC，因此它将*日期/时间转换为 UTC* ，而不是直接输入 UTC。

基本上，它执行以下时区转换序列：EST -> UTC -> EST

如果您打算使用 UTC 指定日期/时间，您应该这样做：

```
dateStringTime.setTimeZone(TimeZone.getTimeZone("UTC"));
dateStringTime.set(year, month-1 , day, hour, minute, second); 
```

然后你只会从 UTC -> EST 出发，你应该得到正确的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T19:16:39.357

时区。[getDefault()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TimeZone.html#getDefault%28%29)将给出运行时时区。如果您从 中删除[getRawOffet](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TimeZone.html#getRawOffset%28%29)值`date`，您将获得 UTC。另一个步骤是从 UTC 添加/删除 EST 值并完成转换

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-16T03:16:09.480

# c++ - 用 cin 读取特定格式

> ID：14901678
> 
> 赞同：2
> 
> 时间：2013-02-15T19:10:41.900
> 
> 标签：c++, formatting, cin

如何使用 cin 以特定格式阅读？示例：-为了读取一个复数，我希望用户像往常一样输入它：x+yi，所以我想要这样的东西：cin>>x>>“+”>>y>>“i”；但这给出了一个错误。什么是正确的方法？非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:19:34.920

一个非常简单的解决方案：

```
char plus,img;
double x,y;
cin>> x >> plus >> y >> img;
if (plus!='+' || img!='i')     ...error 
```

在“现实生活”代码中，您构建/使用 a `class complex`，并重载运算符`>>.`

我在 Ideone 中尝试：http: [//ideone.com/ZhSprF](http://ideone.com/ZhSprF)

```
#include <iostream>
using namespace std;

int main() 
{
    char plus{},img{};
    double x{},y{};
    cin>> x >> plus >> y >> img;
    if (plus!='+' || img!='i') 
        cout << "\nError: "<< "x=" << x <<", plus="  << plus <<", y="  << y <<", img="  << img;
    else
        cout << "\nComplex: " << x << plus << y << img;

    return 0;
} 
```

标准输入： `3 + 4i` -> 标准输出： `Complex: 3+4i`

标准输入： `1E4L1e3g`-> 标准输出： `Error: x=10000, plus=L, y=1000, img=g`

标准输入： `a+3i` -> 标准输出： `Error: x=0, plus=, y=0, img=`

标准输入： `1e3+93E-2i` -> 标准输出： `Complex: 1000+0.93i`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:33:04.383

根据[我对一个模糊相关的问题的回答](https://stackoverflow.com/a/9832875/845092)，使用流解析通常是一个坏主意，但可以做到：

我写了一些可以读取字符串和字符文字的代码。与普通流读取一样，如果它获得无效数据，它会设置流的坏位。这应该适用于所有类型的流，包括宽流。将这四个函数粘贴在标题中：

```
#include <iostream>
#include <string>
#include <array>
#include <cstring>

template<class e, class t, int N>
std::basic_istream<e,t>& operator>>(std::basic_istream<e,t>& in, const e(&literal)[N]) {
        std::array<e, N-1> buffer; //get buffer
        in >> buffer[0]; //skips whitespace
        if (N>2)
                in.read(&buffer[1], N-2); //read the rest
        if (strncmp(&buffer[0], literal, N-1)) //if it failed
                in.setstate(in.rdstate() | std::ios::badbit); //set the state
        return in;
}
template<class e, class t>
std::basic_istream<e,t>& operator>>(std::basic_istream<e,t>& in, const e& literal) {
        e buffer;  //get buffer
        in >> buffer; //read data
        if (buffer != literal) //if it failed
                in.setstate(in.rdstate() | std::ios::badbit); //set the state
        return in;
}
//redirect mutable char arrays to their normal function
template<class e, class t, int N>
std::basic_istream<e,t>& operator>>(std::basic_istream<e,t>& in, e(&carray)[N]) {
        return std::operator>>(in, carray);
} 
```

它将使输入字符变得非常容易：

```
if (cin>>x>>"+">>y>>"i";)  {
    // read correctly
} 
```

[概念证明](http://ideone.com/IVW7v)。现在您可以使用`cin`字符串和字符文字，如果输入不完全匹配，它的行为就像任何其他无法正确输入的类型一样。请注意，这仅匹配不是第一个字符的字符串文字中的空格。它只有三个功能，所有这些都非常简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T19:26:26.353

最好只使用`std::complex`.

这是说明我的评论的伪代码：

```
struct Complex { double real, imag; }

istream& operator>> (Complex& c, istream& str)
{
   // read until whitespace
   char C;
   string Buffer;

   enum { READING_REAL, READING_PLUS, READING_IMAG }
   State = READING_REAL;

   C = str.peek();
   while (/* C is not whitespace */)
   {
       // actually read C
       switch(State) {
       case READ_REAL:
           // check if it fits allowed double syntax
           // continue until first double is read
           /* when it is
               c.real = parsedouble(Buffer);
               Buffer.clear();
               State = READ_PLUS;
           */
       case READ_PLUS:
           // accept plus sign
       case READ_IMAG:
           // read 2nd double
       }
   }
} 
```

请注意，此操作可能会失败。

# git - 如何在本地使用 git 并推送到远程服务器

> ID：14901679
> 
> 赞同：1
> 
> 时间：2013-02-15T19:10:42.820
> 
> 标签：git, drupal

我想使用 git 来管理我的开发、集成测试和生产环境。我环顾四周，但似乎无法找到一个简单的解释（例如[Git - 推送到远程存储库](https://stackoverflow.com/questions/7151218/git-pushing-to-remote-repository)并不能完全做到这一点）。我想要做的一个非常简短的解释：

*   我在笔记本电脑上掌握我的代码库，因为这是我大部分工作的地方。
*   我在 1and1 上托管我的网站。在那里，我设置了两个站点，生产站点和集成测试站点。
*   我想设置 git，以便我的笔记本电脑上有两个遥控器，比如 siteprod 和 siteint。
*   每当我有一个要测试的分支时，我想从我的笔记本电脑上推送它，比如使用“git push siteprod newproductionversion”（我相信你明白了）。

通过使用 git --init（注意没有 --bare！）在 1and1 上创建一个存储库并使用 ssh 设置遥控器，我已经实现了一些接近。但是我必须将 receive.denyCurrentBranch 设置为忽略，一旦我推送，我必须通过登录到 1and1 服务器来签出分支。对于集成环境，我必须重复一遍。

这看起来很笨拙，但我确信我的用例一点也不稀奇。有没有明智的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T19:56:14.977

如果你有到服务器的 ssh 连接，你可以直接添加一个 git 远程到服务器上的存储库。就像是：

```
git add remote production sshUser@example.com:/path/to/repo/.git 
```

然后，要部署，

```
git push production branch 
```

也就是说，您可能不应该从 git 存储库中提供您的生产代码。更好的是在您的 Web 根目录*之外*建立一个存储库并使用`post-receive`挂钩将代码复制到 Web 根目录。这似乎在这里概述： [Deploy a project using Git push](https://stackoverflow.com/questions/279169/deploy-a-project-using-git-push)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:21:29.417

Git（最初）不是用于同步工作副本，而是用于同步 Git 的提交/分支/引用/等的存储库。

你想要做什么我会称之为远程结账。还有数百种其他方法可以做。我有两个想法：当你设置了一个 ssh 连接时，大工作就完成了：

1) 使用 git 和 ssh

```
git push origin my_branch
ssh user@server "(cd remote-dir-where-your-repo-is; git checkout -f my_branch;)" 
```

2) 使用 rsync

```
rsync -av . ssh://user@server/dir --exclude=.git 
```

# django - 如何在 Django 中做一个多步骤的表单？

> ID：14901680
> 
> 赞同：33
> 
> 时间：2013-02-15T19:10:52.540
> 
> 标签：django

我想在 Django 中创建一个多步骤表单，仅在所有步骤结束时提交数据以进行处理。每个步骤都需要能够访问和显示我们在上一步中输入的数据。

有没有办法用 Django 做到这一点？Django 的 Form-Wizard 无法处理这个基本功能。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-15T19:12:52.497

当然，在 Django 中有一种方法可以做到这一点。

一种方法是在会话中保留您的值，直到您最后提交它们。如果您返回上一步，您可以使用会话中保存的值来填充您的表单。

通过一些搜索，您可能会发现某人已经编写的应用程序可以满足您的需求，但是使用 Django 或任何其他框架来满足您的需求并不难。

示例，忽略导入语句：

```
#models/forms

class Person(models.Model):
    fn = models.CharField(max_length=40)

class Pet(models.Model):
    owner = models.ForeignKey(Person)
    name = models.CharField(max_length=40)

class PersonForm(forms.ModelForm):
    class Meta:
        model = Person

class PetForm(forms.ModelForm):
    class Meta:
        model = Pet
        exclude = ('owner',)

#views
def step1(request):
    initial={'fn': request.session.get('fn', None)}
    form = PersonForm(request.POST or None, initial=initial)
    if request.method == 'POST':
        if form.is_valid():
            request.session['fn'] = form.cleaned_data['fn']
            return HttpResponseRedirect(reverse('step2'))
    return render(request, 'step1.html', {'form': form})

def step2(request):
    form = PetForm(request.POST or None)
    if request.method == 'POST':
        if form.is_valid():
            pet = form.save(commit=False)
            person = Person.objects.create(fn=request.session['fn'])
            pet.owner = person
            pet.save()
            return HttpResponseRedirect(reverse('finished'))
    return render(request, 'step2.html', {'form': form}) 
```

我们假设`step2.html`有一个链接可以返回到 step1.html。

您会在`step1`视图中注意到我正在`fn`从保存表单时设置的会话中提取值。您需要将所有先前步骤的值保留到会话中。在步骤结束时，获取值、创建对象并重定向到`finished`视图，无论它可能是什么。

这些代码都没有经过测试，但它应该能让你继续前进。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-04-09T18:58:11.980

您可以使用[django-formtools的](https://github.com/django/django-formtools)[表单向导](http://django-formtools.readthedocs.io/en/latest/wizard.html)轻松完成此操作。一个简单的示例如下所示。

**表格.py**

```
from django import forms

class ContactForm1(forms.Form):
    subject = forms.CharField(max_length=100)
    sender = forms.EmailField()

class ContactForm2(forms.Form):
    message = forms.CharField(widget=forms.Textarea) 
```

**视图.py**

```
from django.shortcuts import redirect
from formtools.wizard.views import SessionWizardView

class ContactWizard(SessionWizardView):
    def done(self, form_list, **kwargs):
        do_something_with_the_form_data(form_list)
        return redirect('/page-to-redirect-to-when-done/') 
```

**网址.py**

```
from django.conf.urls import url

from forms import ContactForm1, ContactForm2
from views import ContactWizard

urlpatterns = [
    url(r'^contact/$', ContactWizard.as_view([ContactForm1, ContactForm2])),
] 
```

# template-engine - 如何在 mustache 模板中引用包含点的字段名称？

> ID：14901683
> 
> 赞同：8
> 
> 时间：2013-02-15T19:10:56.190
> 
> 标签：template-engine, mustache

如何在 mustache 模板中引用包含点的字段名称？例如，如果我有一个像

```
{
  "foo.bar": "my value"
} 
```

那么我该如何放入`my value`模板呢？使用`{{foo.bar}}`不起作用，因为 mustache 认为点是路径的一部分，就像应该有一个带有“bar”的“foo”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T21:41:27.353

您无法`.`从 Mustache 中读取带有 a 的密钥。Mustache 规范规定`.`用于拆分内容名称。Mustache 提供了一种转义方式，但仅适用于 HTML 内容。

小胡子规格：[插值](https://github.com/mustache/spec/blob/master/specs/interpolation.yml#L7)

您需要对数据进行预处理，以使其可用于 Mustache 模板。你如何做到这一点将取决于问题的广泛性。

[我找到了一个由Jon](https://stackoverflow.com/users/50079/jon)编写的在 JavaScript 中重新映射属性的简单示例：

```
function rename(obj, oldName, newName) {
    if(!obj.hasOwnProperty(oldName)) {
        return false;
    }

    obj[newName] = obj[oldName];
    delete obj[oldName];
    return true;
} 
```

来源：[重命名对象中的键...](https://stackoverflow.com/questions/6942137/rename-the-keys-in-an-object#6942238)

# r - 如何在 R 中对数组进行分块处理？

> ID：14901687
> 
> 赞同：0
> 
> 时间：2013-02-15T19:11:19.147
> 
> 标签：r, correlation, chunking, chunks

我正在计算两个数据集之间的相关性，但由于数据量很大（10 GB），而我的 RAM 只有 6 GB，我面临内存问题。我想知道如何分块我的代码？

```
dir1 <- list.files("D:sdr", "*.bin", full.names = TRUE)
dir2 <- list.files("D:dsa", "*.img", full.names = TRUE)
file_tot<-array(dim=c(1440,720,664,2))
for(i in 1:length(dir1)){
  file_tot[,,i,1] <- readBin(dir1[i], numeric(), size = 4 ,n = 1440 * 720 , signed = T)
  file_tot[,,i,2] <- readBin(dir2[i], integer(), size = 2 ,n = 1440 * 720 , signed = F)
  file_tot[,,i,2] <- file_tot[,,i,2]*0.000030518594759971
  file_tot[,,i,2][file_tot[,,i,2] ==  9999 ] <- NA
}
result<-apply(file_tot,c(1,2),function(x){cor(x[,1],x[,2])}) 
```

但是得到了这个错误：

```
 Error: cannot allocate vector of size 10.3 Gb
In addition: Warning messages:
 1: In file_tot[, , i, 1] <- readBin(dir1[i], numeric(), size = 4, n = 1440 *  :
Reached total allocation of 16367Mb: see help(memory.size)
2: In file_tot[, , i, 1] <- readBin(dir1[i], numeric(), size = 4, n = 1440 *  :
Reached total allocation of 16367Mb: see help(memory.size)
3: In file_tot[, , i, 1] <- readBin(dir1[i], numeric(), size = 4, n = 1440 *  :
Reached total allocation of 16367Mb: see help(memory.size)
4: In file_tot[, , i, 1] <- readBin(dir1[i], numeric(), size = 4, n = 1440 *  :
Reached total allocation of 16367Mb: see help(memory.size) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:09:06.360

处理大数据时的一个非常常见的问题。幸运的是，有几种解决方案：

1.  使用像 rhadoop 这样的大数据包。
2.  使用滚动窗口文件读取包，如 ff 和 filehash。
3.  使用 bigmemory 和相关软件包，请在下面查找链接。

您可能会发现有用的链接：

[R中ff和filehash包的区别](https://stackoverflow.com/questions/9918459/difference-between-ff-and-filehash-package-in-r)

[在 R 中哪些包可以快速加载更大的数据](https://stackoverflow.com/questions/9431992/in-r-which-packages-for-loading-larger-data-quickly/9432009#9432009)

[bigmemory 和有文件支持的朋友的示例](https://stackoverflow.com/questions/4997612/example-of-bigmemory-and-friends-with-file-backing/5006479#5006479)

[在 R 中使用非常大的数据集](https://stackoverflow.com/questions/13186077/work-in-r-with-very-large-data-set/13229835#13229835)

此外，[我建议你这样做，但我是为你做的。](http://bit.ly/XDR66B)

希望一些研究可以解决这个问题！祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T21:41:08.887

如果您只是在计算这种相关性，那么您实际上不需要切换到 are`ff`或`bigmemory`. 您可以分块处理文件。当您计划使用其中一个大数据包进行更多分析时，可能会有用。

这是一个示例，您可以如何分块处理文件：

```
# Generate some data; in this case I only use 7 columns,
# but it should scale to any number of columns (except 
# perhaps generating the files)
dim <- c(1440, 7, 664, 2)
# The last line should be replaced by the next for the data in 
# the question
# dim <- c(1440, 770, 664, 2)
for (i in seq_len(dim[3])) {
  dat <- rnorm(dim[1]*dim[2])
  writeBin(dat, paste0("file", i, ".bin"), size = 4)
  dat <- rnorm(dim[1]*dim[2])
  writeBin(dat, paste0("file", i, ".img"), size = 4)
}

dir1 <- list.files("./", "*.bin", full.names = TRUE)
dir2 <- list.files("./", "*.img", full.names = TRUE)

result <- array(dim=c(dim[1], dim[2]))
file_tot<-array(dim=c(dim[1], dim[3], dim[4]))

# Proces the files column by column
for (j in seq_len(dim[2])) {
  for(i in 1:length(dir1)){
    # Open first file
    con <- file(dir1[i], 'rb')
    # Skip to the next column
    seek(con, (j-1)*dim[1]*4)
    # Read colum
    file_tot[,i,1] <- readBin(con, numeric(), size = 4 ,n = dim[1])
    close(con)

    # And repeat for the next file
    con <- file(dir2[i], 'rb')
    seek(con, (j-1)*dim[1]*4)
    file_tot[,i,2] <- readBin(con, numeric(), size = 4 ,n = dim[1])
    # For the datasets in the example the previous line should be replaced
    # by the next three:
    #file_tot[,i,2] <- readBin(con, integer(), size = 2 ,n = dim[1] , signed = F)
    #file_tot[,i,2] <- file_tot[,i,2]*0.000030518594759971
    #file_tot[,i,2][file_tot[,i,2] ==  9999 ] <- NA
    close(con)
  }
  result[,j] <-apply(file_tot,c(1),function(x){cor(x[,1],x[,2])})
} 
```

# kendo-ui - KendoUI：获取最后一个视图的名称

> ID：14901688
> 
> 赞同：2
> 
> 时间：2013-02-15T19:11:19.747
> 
> 标签：kendo-ui

我想获得 KendoUI 中最后一个视图的 id。我已经检查了这个`event`物体，但没有发现任何揭示这一点的东西。

这可能是我通过点击获得的视图，也可能是我通过后退按钮获得的视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:36:50.490

那这个呢：

```
var id = $('[data-role=view]:last').attr('id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T05:33:06.233

**此答案适用于 Kendo UI 移动应用程序**，但基本原理也可用作 Kendo UI 桌面解决方案的基础。

我`e.view.nextViewID`在我的视图的 show 事件处理程序中使用来获取前一个视图，但这停止使用 kendo ui 版本 2014.1.528。因此，我想出了以下解决方法，它使用[pane.navigate](http://docs.telerik.com/kendo-ui/api/mobile/pane#events-navigate)事件将前一个视图存储在全局变量中：

```
var previousView = '';
var app = new kendo.mobile.Application();
app.pane.bind("navigate",
    function(e) {
        previousView = e.sender.view().id;
    }
); 
```

我还发现 app.pane 一开始可能是未定义的，所以我将上述对 app.pane.bind 的调用包装在[setTimeout](https://developer.mozilla.org/en/docs/Web/API/window.setTimeout)中，延迟为 50 毫秒 - 如果有官方方法可以知道 app.pane 何时设置，请分享。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-27T22:36:03.283

为了稍微改进上面的答案，可以在应用程序对象初始化时直接将事件附加到应用程序的窗格对象，因此不需要超时，因为应用程序的 init 触发有点过早。

```
var previous_view = '';
function store_previous_view(e)
{
    try
    {
        previous_view = e.sender.view().id;
    }
    catch(e){}
}
app = new kendo.mobile.Application({navigate: store_previous_view}); 
```

try-catch 在那里，因为事件将立即触发，并且 view() 将在第一时间返回 null。所以在使用之前应该检查previous_view 的值。

这适用于 Kendo UI 核心 2014.3.1119。我不知道这是漏洞还是有意的行为，绝对没有记录。

# linux - 我如何开始学习 asm（gas）？

> ID：14901689
> 
> 赞同：1
> 
> 时间：2013-02-15T19:11:20.950
> 
> 标签：linux, assembly, x86-64, gnu-assembler

我找到了“hello world”并写了它。纳米你好.s

这段代码

```
.data
msg:
.string  "Hello, world!\n"
len = . - msg
.text
global _start
_start:
    movl    $len,%edx
    movl    $msg,%ecx
    movl    $1,%ebx
    movl    $4,%eax
    int     $0x80
    movl    $0,%ebx
    movl    $1,%eax
    int     $0x80 
```

我已经完成了`as -o hello.o hello.s` 我给出了一个错误

```
hello.s:6: Error: no such instruction: global _start

delete global _start. 
```

我已经搞定了

```
ld -s -o hello.o hello*

error 

ld: hello: No such file: No such file or directory 
```

我错在哪里？

p/s debian，amd64。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:19:45.227

尝试`.globl _start`或`.global _start`。

`start`如果您在入口点遇到问题，您可以尝试不加下划线。

最后，如果您正在制作 64 位可执行文件，您可能需要使用不同的系统调用接口，而`int 0x80`不是`syscall`. 更多关于[这里](http://cs.lmu.edu/~ray/notes/linuxsyscalls/)。

# python - 尝试连接 MySQL 时出现“TypeError：需要整数”

> ID：14901690
> 
> 赞同：0
> 
> 时间：2013-02-15T19:11:24.987
> 
> 标签：python, mysql-python

总 Python 新手在这里。

我正在关注[此页面](http://zetcode.com/db/mysqlpython/)的教程。但是当我运行我的代码时，我在控制台中收到以下错误。

```
Traceback (most recent call last):
  File "/Users/tejenshrestha/Documents/ProjectAccess/access/trunk/analysis/src/json_xml/Database.py", line 37, in <module>
    con = MySQLdb.connect(socket, dbhost, dbuser, dbpass, dbname);
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/MySQLdb/__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/MySQLdb/connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
TypeError: an integer is required 
```

搜索我发现的一些解决方案需要包含 unix_socket 路径，正如您所看到的那样。

我也在使用**XAMPP**，我使用的套接字路径是 XAMPP 的 my.cnf 文件中指定的路径。我正在运行 MySQL，端口是 3306。

请帮助这个菜鸟。

Python代码：

```
import MySQLdb
import sys

con = None
dbhost = "localhost"
port   = "3306"
dbuser = "root"
dbpass = "password"
dbname = "name"
socket = "/Applications/XAMPP/xamppfiles/var/mysql/mysql.sock"

try:
    con = MySQLdb.connect(socket, dbhost, dbuser, dbpass, dbname);
    cur = con.cursor()
    cur.execute("SELECT VERSION()")

    data = cur.fetchone()
    print "Database version : %s " % data

except MySQLdb.Error, e:
    print "Error %d: %s" % (e.args[0],e.args[1])
    sys.exit(1)

finally:    
    if con:    
        con.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T19:18:22.237

从港口周围获取报价，看看是否有效。

* * *

```
<brilliant code>
port = 3306
<brilliant code> 
```

* * *

我认为您需要在连接函数中标记参数，请参阅此处的最佳答案：

[如何在 Python 中连接到 MySQL 数据库？](https://stackoverflow.com/questions/372885/how-do-i-connect-to-a-mysql-database-in-python)

# excel - 在 MATLAB 中更改列名

> ID：14901691
> 
> 赞同：0
> 
> 时间：2013-02-15T19:11:25.457
> 
> 标签：excel, matlab, text-files

使用 MATLAB：

我有一个excel文件：

```
California Texas Florida
123        333   234
222        567   123
234        324   334 
```

我想创建或写入具有更改列名但仍保留相同数据的文本文件。

所以期望的输出是：

```
CA     TX     FL
123    333    234
222    567    123
234    324    334 
```

谢谢，

阿曼达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:48:55.490

使用 MATLAB 很容易[`xlsread`](http://www.mathworks.com/help/matlab/ref/xlsread.html)，但只需复制和粘贴名称上的缩写同样容易，除非您有查找表和大量值要做。

在这种情况下：

```
[data,colNames] = xlsread('FileName.xlsx');
newColNames = {'CA','TX','FL'};
output = [newColNames;num2cell(data)];
xlswrite('NewFileName.xlsx',output); 
```

# qt - python qt的新手；setlayout() 似乎禁止 .self 前缀？

> ID：14901694
> 
> 赞同：0
> 
> 时间：2013-02-15T19:11:31.760
> 
> 标签：qt, class, python-2.7, pyside

我是一名 Python 新手/爱好者，希望将 Python 编程融入我的下一个职业。我购买并阅读了 Summerfield 书籍“使用 Python 和 QT 进行快速 GUI 编程”中的第 119 页。我遇到了障碍，想知道您是否可以给我一些指导。我的问题如下：为什么不允许或不需要插入“self”。作为下面每个小部件之前的前缀？

例如，如果我添加前缀“self”。到“title = QtGui.QLabel('Title')”行，我收到以下错误消息： NameError: global name 'title' is not defined

我在 Summerfield 的“Python gui Programming with qt4”一书中读到，“setlayout()”重新定义了小部件，因此 Form 是父级。我认为他表示使用“setlayout()”使得前缀“.self”变得不必要。

但如果你不使用“自我”。作为前缀，你如何指向一个小部件？例如，如果我使用 setlayout 将“Form”设为父级，我的函数“fn_okButton01_clicked(self):”应该能够获取“titleEdit”的文本值，但我无法找出获取文本的正确方法价值。

我尝试使用“print **self** .titleEdit.getText()”和“print **Form** .titleEdit.getText()”都不起作用。当我尝试使用后者时，错误消息是： AttributeError: 'Form' object has no attribute 'titleEdit' 任何指导将不胜感激。

谢谢，

```
 Marc 
```

这是我一直在使用的代码：

```
# -*- coding: utf-8 -*-

import sys
from PyQt4 import QtGui
from PyQt4.QtCore import (Qt, SIGNAL)
from PyQt4.QtGui import (QApplication, QDialog, QHBoxLayout, QLabel,
        QPushButton)

class Form(QDialog):

    def __init__(self, parent=None):
        super(Form, self).__init__(parent)

        self.initUI()

    def initUI(self):

        okButton01 = QtGui.QPushButton("OK")
        cancelButton01 = QtGui.QPushButton("Cancel")
        okButton01.clicked.connect(self.fn_okButton01_clicked)

        title = QtGui.QLabel('Title')
        author = QtGui.QLabel('Author')
        review = QtGui.QLabel('Review')

        titleEdit = QtGui.QLineEdit()
        authorEdit = QtGui.QLineEdit()
        reviewEdit = QtGui.QTextEdit()

        hbox01 = QtGui.QHBoxLayout()
        hbox01.addStretch(1)
        hbox01.addWidget(title)
        hbox01.addWidget(titleEdit)

        hbox02 = QtGui.QHBoxLayout()
        hbox02.addStretch(1)
        hbox02.addWidget(author)
        hbox02.addWidget(authorEdit)

        hbox03 = QtGui.QHBoxLayout()
        hbox03.addStretch(1)
        hbox03.addWidget(review)
        hbox03.addWidget(reviewEdit)

        hbox00 = QtGui.QHBoxLayout()
        hbox00.addStretch(1)
        hbox00.addWidget(okButton01)
        hbox00.addWidget(cancelButton01)

        vbox0 = QtGui.QVBoxLayout()
        vbox0.addStretch(1)
        vbox0.addLayout(hbox01)
        vbox0.addStretch(1)
        vbox0.addLayout(hbox02)
        vbox0.addStretch(1)
        vbox0.addLayout(hbox03)
        vbox0.addStretch(1)
        vbox0.addLayout(hbox00)

        self.setLayout(vbox0)    

        self.setGeometry(300, 300, 300, 150)
        self.setWindowTitle('Data Input Fields')    
        self.show()

    def fn_okButton01_clicked(self):
        print self.titleEdit.getText()

def main():

    app = QApplication(sys.argv)
    form = Form()
    form.show()
    app.exec_()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:49:57.507

您创建的对象被分配给局部变量。要稍后访问它们，您必须将它们分配给您的类的实例。例如，放置

```
self.titleEdit = titleEdit 
```

在您的 initUI 函数结束时。作为替代方案，您还可以检索触发信号的对象

```
self.sender() 
```

# c# - “加法”和“按位加法”有区别吗？

> ID：14901697
> 
> 赞同：8
> 
> 时间：2013-02-15T19:11:49.110
> 
> 标签：c#

作为一个小项目（没有关键任务），我决定尝试用 C# 编写 GOST 28147-89 的实现。但是，在阅读[RFC 5830](https://www.rfc-editor.org/rfc/rfc5830#section-3.2)（定义 GOST 28147-89 的信息）时，我注意到了这一点。

> (+) 是相同长度的字模 2 的按位相加。
> 
> [+] 是 32 位向量模 2^32 的加法。

这两者有什么区别，主要是第一个指定*按位*加法，第二个简单说明加法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:19:06.293

由于它说“模2”，我不得不假设它们只是意味着单独添加每个位而不带进位。

所以

```
 0101 
 +1111
-------
  1010 
```

我想不出一个特别好的用途，因为它本质上与 xor 相同。

# c - CUDA：是否保证对全局内存的连续字节进行半扭曲访问？

> ID：14901702
> 
> 赞同：1
> 
> 时间：2013-02-15T19:12:05.663
> 
> 标签：c, optimization, cuda

我有一个计算能力 1.3 GPU。根据文档，当相同半扭曲的线程根据字长从相同的 32-64 或 128 字节内存段访问字节时，这些内存访问将合并为一个。

但是，在使用 cudaMallocPitch() 分配的二维数组的情况下，当同一个 half-warp 的线程访问连续字节时，是否保证这些字节驻留在同一个内存段？

CUDA有一个类似的问题[合并访问全局内存](https://stackoverflow.com/questions/10325244/cuda-coalesced-access-to-global-memory)，但不包括计算能力 1.3 GPU 与 2D 阵列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:01:49.177

是的 -`cudaMallocPitch()`主要是为了确保合并行为从一行持续到下一行。合并的标准是 per-warp，因此它们的粒度要细得多，并且与 2D 数组的一行中的连续字节有关。

请注意，操作数大小必须至少为 32 位，否则合并根本不起作用。

# iphone - 设置第一个视图控制器 AppDelegate.m

> ID：14901704
> 
> 赞同：1
> 
> 时间：2013-02-15T19:12:06.787
> 
> 标签：iphone, objective-c

我有一个程序，用户必须输入密码才能使用它，但我不知道用户每次都必须输入密码。我相信我可以通过将第一个视图控制器设置为条件为真来做到这一点。

AppDelegate.m 中的代码：

```
NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
if ([standardUserDefaults objectForKey:@"PassCorrect"]) {
    //WHAT GOES HERE
    return YES;
} else {
    return YES;
} 
```

如果密码输入正确，则 PassCorrect 将布尔值设置为 TRUE。我需要知道在 if 语句中放入什么来将第一个视图控制器设置为不同于默认值的东西。

我环顾四周，但到目前为止，我遇到的所有事情都会抛出错误或只是出现空白屏幕。任何人都有真正有效的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T03:27:13.707

我建议不要尝试更改 AppDelegate 行为。相反，在您的根视图控制器中，只需检查用户是否有存储的密码（显然，您必须存储它），如果没有，则在`viewDidAppear`事件中显示一个模态视图控制器。如果他们这样做，那么您的应用程序可以正常运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T07:31:14.203

我已经为 SWReaveaViewController 完成了它，希望它对你有用

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];

UIViewController *viewController;

NSUserDefaults *loginUserDefaults = [NSUserDefaults standardUserDefaults];
NSString *check=[loginUserDefaults objectForKey:@"Checklog"];

if ([check isEqualToString:@"login"]) {

    viewController = [storyboard instantiateViewControllerWithIdentifier:@"SWRevealViewController"];
} else {

    viewController = [storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
}

self.window.rootViewController = viewController;
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:25:02.537

这有帮助吗？

```
 -(void)setFirstView
    {

        if(![self userIsLoggedIn])
        {

            [self.window setRootViewController:self.loginViewController];
        }
        else {
            [self.window setRootViewController:self.mainViewController];
        } 
    } 
```

编辑：

```
@property (nonatomic, strong) UIViewController* loginViewController
 @property (nonatomic, strong) UIViewController* mainViewController 
-(UIViewController*)loginViewController 
{ 
   if(!_loginViewContoller) 
    {
       _loginViewController = [UIViewController alloc]initWithNibName:@"loginNibName.xib"]] 
     } 
   return _loginViewController; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T19:26:41.563

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    [self loadInitialViewController];

    [self.window setBackgroundColor:[UIColor whiteColor]];
    [self.window makeKeyAndVisible];
    return YES;
}

 -(void)loadInitialViewController
{
    //Create first view controller
    NewLoginViewController* ipadLoginViewController = [[NewLoginViewController alloc]initWithNibName:@"NewLoginViewController" bundle:[NSBundle mainBundle]];

    //if you want a nav controller do this
    UINavigationController *navController =  [[UINavigationController alloc]initWithRootViewController:ipadLoginViewController];

     //add them to window
    [self.window addSubview:self.navController.view];
    [self.window setRootViewController:self.navController];

    if([standardUserDefaults objectForKey:@"PassCorrect"])
    {
        //push the next view controller on the stack inside the initial view
        [ipadLoginViewController bypassLoginView];
    }

} 
```

我更喜欢这样做而不是直接操作窗口，因为这样登录页面就在您注销时的堆栈上。您也可以通过直接操作窗口来添加第二个视图控制器，就像 //add to window 步骤一样。

# php - 使用 PHP 会话进行 PayPal Express Checkout

> ID：14901706
> 
> 赞同：0
> 
> 时间：2013-02-15T19:12:11.603
> 
> 标签：php, paypal, session-variables

PHP 会话一直存在，直到用户离开页面。因此，当他点击 PayPal Express Checkout 按钮时，他会被重定向到 PayPal 的网站并在那里付款，然后他会被重定向回该网站。但是随后会话（以及与购买/订单相关的所有信息）消失了！

这是否意味着 PayPal Express Checkout 必须使用 cookie 而不是会话？

# c++ - AVR-C 错误：在 '<' 标记之前应有 '='、','、';'、'asm' 或 '__attribute__'

> ID：14901708
> 
> 赞同：5
> 
> 时间：2013-02-15T19:12:19.390
> 
> 标签：c++, arduino, winavr

我目前正在尝试获取为 Arduino USB Host [shield](http://www.arduino.cc/en/Main/ArduinoShields)编写的代码库，并将其与 Arduino 核心库分离，以便我可以在非 Arduino 微控制器项目中使用该代码。

通过查看代码，对 Arduino 代码库没有太多硬依赖，但我遇到了一些奇怪的错误，这可能是由于 Arduino 构建系统和[LUFA 构建系统](http://www.fourwalledcubicle.com/files/LUFA/Doc/120730/html/_page__build_system.html)之间的差异造成的。具体来说，我在大约 75% 的头文件中收到以下错误，每个文件都有几十次：

```
error: expected '=', ',', ';', 'asm' or '__attribute__' before '<' token 
```

有时，错误表明错误中的标记不同，但它仍然是相同的错误。我在各种论坛和 Stack Overflow 上发现了很多类似的问题，但解决方案往往每次都不同。

需要明确的是，这段代码在 Arduino 构建系统中可以 100% 编译，但是当我尝试使用 LUFA 模板 makefile 直接使用 WinAVR 构建时会出现这些错误。通过查看代码，我确定我需要`#define`一些值，例如`-DARDUINO=102`（或至少一些值 >=100，但我使用的 Arduino IDE 的版本是 1.0.2，所以我认为那是一个很好的使用价值）。

所以我想我正在寻找熟悉 Arduino 构建系统的人来帮助我弄清楚我缺少什么。完整的代码库可以在[这里](https://github.com/felis/USB_Host_Shield_2.0 "USB Host Shield 2.0 库")找到，但是为了提供一个简单的例子来演示这个问题，而不包括整个代码库，这里是`printhex.h`：

```
#if !defined(__PRINTHEX_H__)
#define __PRINTHEX_H__

#if defined(ARDUINO) && ARDUINO >=100
#include "Arduino.h"
#else
#include <WProgram.h>
#endif

template <class T>
void PrintHex(T val)
{
    T mask = (((T)1) << (((sizeof(T) << 1) - 1) << 2));

    while (mask > 1)
    {
        if (val < mask)
            Serial.print("0");

        mask >>= 4;
    }
    Serial.print((T)val, HEX);
}

template <class T>
void PrintHex2(Print *prn, T val)
{
    T mask = (((T)1) << (((sizeof(T) << 1) - 1) << 2));

    while (mask > 1)
    {
        if (val < mask)
            prn->print("0");

        mask >>= 4;
    }
    prn->print((T)val, HEX);
}

template <class T>
void PrintBin(T val)
{
    for (T mask = (((T)1) << (sizeof(T) << 3)-1); mask; mask>>=1)
        if (val & mask)
            Serial.print("1");
        else
            Serial.print("0");
}

#endif 
```

我应该注意我确实已经`Arduino.h`复制到我的包含路径，并且如果我包含`Arduino.h`到我的主`.c`文件中，它编译得很好，所以问题不存在。`printhex.h`但是，包括会产生以下结果：

```
In file included from MIDI.c:38:
Lib/HostShield/printhex.h:26: error: expected '=', ',', ';', 'asm' or '__attribute__' before '<' token
Lib/HostShield/printhex.h:41: error: expected '=', ',', ';', 'asm' or '__attribute__' before '<' token
Lib/HostShield/printhex.h:56: error: expected '=', ',', ';', 'asm' or '__attribute__' before '<' token
make: *** [MIDI.o] Error 1 
```

第 26、41 和 56 行是以下 3 个实例：

```
template <class T> 
```

我难住了。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T19:15:09.137

您正在尝试将 C++ 代码编译为 C。您可以（通常）执行相反的操作，但您需要将其重写为纯 C 或使用 C++ 编译器（`avr-g++`出现）。将文件更改为`.cpp`可能会告诉构建系统自动使用 C++ 编译器。

# html - 为什么出现 标签周围的标签？

> ID：14901712
> 
> 赞同：6
> 
> 时间：2013-02-15T19:12:49.573
> 
> 标签：html, css

我有这个：

```
<p>
    <img src="media/icons/info_ticket.png"></img>
    <h3>Ticket #TKMA<span><?php echo $_GET['CRy3sjzZOJyXE']; ?></span></h3>
</p> 
```

当我应用 CSS 来改变它的样式时，`img`它不起作用！所以，我检查了这个元素，我发现了这个：

```
<p>
    <img src="media/icons/info_ticket.png">
</p>
<h3>Ticket #TKMA<span>17</span></h3>
<p></p> 
```

我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T19:14:50.553

[因为您的 HTML 无效](http://html5.validator.nu/)。[`<p>`元素只能包含短语内容。](http://www.w3.org/TR/html5/grouping-content.html#the-p-element)

请参阅[可以嵌套在 P 元素中的 HTML5 元素列表？](https://stackoverflow.com/questions/9852312/list-of-html5-elements-that-can-be-nested-inside-p-element/9852381#9852381)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T19:14:54.657

原因是`H`元素内的`<p>`元素无效，因此浏览器通过将其拉出来纠正它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T19:14:57.127

因为有一个`<h3>`内部 a`<p>`是无效的 html

浏览器正在执行其自动更正版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T19:15:09.657

标签在标签`<h3>`内无效`<p>`。您的编辑器通过将标题移到段落之外来“修复”它，只留下段落中的图像。

# iphone - iOS - 如何在设置包中获取滑块的值

> ID：14901718
> 
> 赞同：1
> 
> 时间：2013-02-15T19:13:28.487
> 
> 标签：iphone, ios

我在使用标识符设置捆绑包中有一个滑块，称为“音量”

如何获取滑块的值以在我的应用程序中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:17:49.240

你可以使用这个`NSUserDefaults`类。从[官方文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html#//apple_ref/doc/uid/10000059i-CH6-SW5)：

> 您选择哪个选项取决于您希望用户如何与偏好进行交互。设置包通常是显示首选项的首选机制。但是，包含配置选项或其他经常访问的首选项的游戏和其他应用程序可能希望将它们显示在应用程序中。**无论您如何呈现它们，您都可以使用 NSUserDefaults 类从您的代码中访问首选项值。**

（强调我的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T18:26:20.960

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults synchronize];//Synchronize With Settings App.
NSInteger mySliderValue = [defaults integerForKey:@"volume"];
NSLog(@"( ͡° ͜ʖ ͡°) %d",mySliderValue); 
```

# clojure - 如何并行减少 Clojure 序列

> ID：14901719
> 
> 赞同：2
> 
> 时间：2013-02-15T19:13:29.783
> 
> 标签：clojure, parallel-processing

我有一个未排序的地图序列（电视节目）需要合并，这意味着生成的序列基于特殊键 (:title) 是唯一的，并且其他键与重复项合并。可以将其视为将特定电视节目的所有放映合并到一个包含有关它们的所有信息的单个条目中。

一个程序看起来像这样（简化）：

```
[{:prog {:title "", ...} :starts #{} :directors #{} :actors #{} :categories {}}, ...] 
```

这是我当前进行合并的函数：

```
(defn- merge-programs [all-programs]
    "Merge all instances of the same program"
    (loop [acc      []
           programs all-programs]
        (if (empty? programs)
            acc
            (let [first-prog  (first programs)
                  dups        (filter #(= (:title first-prog) (:title (:prog %))) programs)
                  merged-prog {:prog       first-prog
                               :starts     (apply set/union (map :starts     dups))
                               :directors  (apply set/union (map :directors  dups))
                               :actors     (apply set/union (map :actors     dups))
                               :categories (apply set/union (map :categories dups))}]
                (recur (conj acc merged-prog)
                       (remove #(= (:title first-prog) (:title (:prog %)))) programs)))))) 
```

我试图弄清楚如何并行进行此合并。但是，由于在循环的每次迭代之后，开始序列的“随机”元素都被删除了，所以它必须是某种分而治之的方法。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:01:02.083

Clojure 1.5 中的[Reducers](http://clojure.com/blog/2012/05/08/reducers-a-library-and-model-for-collection-processing.html)功能正是您想要的。

# image - chrome 和 firefox 中的损坏图像在 safari 中工作

> ID：14901720
> 
> 赞同：2
> 
> 时间：2013-02-15T19:13:36.227
> 
> 标签：image, google-chrome, firefox, safari

我有一个在 Safari 中显示的徽标，但在 Chrome 中它显示为断开的链接，在 Firefox 中根本不显示。

```
 <a href="index.html"><img src="images/logo-01.png"/></a> 
```

我已经重新上传了很多次，甚至尝试过替代路径和文件名。

有谁知道我是怎么搞砸的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-07T10:05:59.610

我遇到了同样的问题。对我来说，事实证明图像已损坏。如果我尝试在 photoshop 中打开 png 文件，我会收到一条错误消息，说它无法解析文件。

无论出于何种原因，safari 可以显示损坏的文件，但 chrome 不能。这就是我解决问题的方法。我注意到我的 macbook 上的“预览”可以很好地打开文件。如果您使用的是 Windows，可能会尝试使用 Paint 或 gimp 或除 Photoshop 之外的其他程序。

1.  我将损坏的文件下载到我的 macbook 上，用预览打开它（用 > 预览打开）
2.  在预览应用程序中，转到文件 > 复制，这会复制您的图像
3.  保存重复的图像
4.  作为测试，我尝试在 Photoshop 中打开新复制的图像，我能够做到！
5.  将新文件上传到网站。我现在可以在 chrome 中查看图像。

希望对遇到同样问题的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:22:16.793

这可能是您的文件结构的问题。现在您的链接正在使用相对路径（例如`href="index.html"`）。如果您引用的文件与当前页面文件位于同一目录中，这很好。但是，如果您当前的页面位于其他地方，例如在“页面”目录或其他地方，那么您需要告诉链接从站点根目录开始。那看起来像`href="/index.html"`（注意斜线）。因此，对于图像，您将拥有：

`<a href="/index.html"><img src="/images/logo-01.png"/></a>`

# spin - Promela：如何对 typedef 类型的数组使用 for 循环

> ID：14901725
> 
> 赞同：0
> 
> 时间：2013-02-15T19:14:00.623
> 
> 标签：spin, promela

我希望能够使用 for 循环来遍历 typedef 值的数组，如下所示：

```
typedef chanArray {
    chan ch[5] = [1] of {bit};
}
chanArray comms[5];

active proctype Reliable() {
    chanArray channel;
    for ( channel in comms ) {
        channel.ch[0] ! 0;
    }   
} 
```

自旋给出以下错误：

```
spin: test2.pml:8, Error: for ( channel in .channel_name ) { ... } 
```

是否可以使用这种形式的 for 循环来遍历数组，而不必使用带有索引指针的 for 循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:06:48.503

尝试：

```
active proctype Reliable () {
  byte index;

  index = 0;
  do
  :: index < 5 -> channel.ch[index] ! 0; index++
  :: else -> break
  od
} 
```

这是唯一的方法。因此，您的“有可能……”问题的答案是“不，不可能……”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:47:11.500

我是 Promela 的新手，但您似乎正在使用

```
for '(' varref in channel ')' '{' sequence '}' 
```

代替

```
for '(' varref ':' expr '..' expr ')' '{' sequence '}' 
```

尝试类似的东西

```
int i;
for (i : 0..4 ) {...} 
```

# php - Play with data in a for loop

> ID：14901730
> 
> 赞同：-1
> 
> 时间：2013-02-15T19:14:25.583
> 
> 标签：php, loops

This isn't critical by any means, but I've got a loop through my users on my website, and i spit out data for each one, something like this

```
for( $i=1; $i<=999; $i++ ){
    $varA = function_a( $i );
    $varB = function_b( $i );
    $myownvar = 0;
    foreach ($varB AS $b) {
        $myownvar = ++$myownvar;
    }
    print($varA.$varB.$myownvar);
} 
```

I end up with a result like

*   1 - user_one: (10)
*   2 - user_two: (4)
*   3 - user_three: (9)

I was wondering if there was a 'relatively simple' way to turn the data around in a way similar to what I've got it, but print the data based on the `$this` like this.

*   1 - user_one: (10)
*   3 - user_three: (9)
*   2 - user_two: (4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:26:10.620

I'm not real sure what you are trying to accomplish, but if the pattern remains consistent, then you could do something like the following:

```
for ($i = 1; $i < 10; $i+=2) {
    echo $i;
    echo $i-1;
} 
```

Which outputs:

```
1032547698 
```

If you don't want the 0, then you could simply check for it, and discard it.

Since you didn't post all of your code, it's hard for me to give much more than that as an example, but I assume you should be able to see how this would apply to your situation.

# c# - 使用 CSharpCodeProvider 生成代码时如何从字段类型中删除 @prefix

> ID：14901739
> 
> 赞同：0
> 
> 时间：2013-02-15T19:14:59.420
> 
> 标签：c#, .net, codedom

我像这样创建字段成员：

```
var fieldMember = new CodeMemberField("int", "Test"); 
```

现在因为字段类型是“int”，它是保留的 C# 关键字，所以生成的代码如下所示：

```
@int Test; 
```

哪个不编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:26:47.627

尝试使用

```
var fieldMember = new CodeMemberField("System.Int32", "Test"); 
```

或者

```
var fieldMember = new CodeMemberField(typeof(int), "Test"); 
```

# ruby-on-rails - 依赖环境的 CSV 解析问题 - Rails MacOSX vs Heroku？

> ID：14901742
> 
> 赞同：0
> 
> 时间：2013-02-15T19:15:05.747
> 
> 标签：ruby-on-rails, parsing, csv, heroku

通过文件上传从 CSV 导入数据。 `csv.each_with_index`在我的本地开发环境和 Heroku（雪松）上以不同的方式解析相同的文件：

```
# Sample CSV row:
# Steel Can,100,2.6,31,Steelco

csv = CSV.parse(infile, {:headers => true})
csv.each_with_index do |row, i|
  row = ???
end 
```

在本地，该行被读取为包含单个长字符串的数组：

```
row = ["Steel Can,100,2.6,31,Steelco"]
parse via: row[0].split(",")
# Seems weird CSV parser requires a split on a comma, but w/e 
```

在 Heroku 上，该行被正确读取为包含多个字符串的数组：

```
row = ["Steel Can","100","2.6","31","Steelco"]
parse via: row 
```

对于 S&G，我尝试在 CSV 中的每个字段周围添加引号，结果导致 CSV 格式错误，我放弃了它。

**是什么导致同一文件在服务器上的解析方式不同？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:06:10.997

在 Ruby 1.8.x 中，CSV 是一个与 Ruby 1.9.2 完全不同的库。

在 Ruby 1.9.2 中，CSV 库是 Ruby 1.8 FasterCSV 库。

# javascript - Javascript，如何删除括号前的值以及它自己的括号

> ID：14901745
> 
> 赞同：2
> 
> 时间：2013-02-15T19:15:10.073
> 
> 标签：javascript, regex, replace, parentheses

```
 var s = "1236(75)";
 var s = s.replace(/\(|\)/g, '');

 alert (s); // this gives me 123675  

what i actually need is 75

any help will be appreciated! 
```

上面的代码结果为 123675，但我需要它只返回 75，请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T19:17:23.077

用于`^.+`匹配输入字符串开头的所有内容。

```
var s = "1236(75)";
var s = s.replace(/^.*\(|\)/g, ''); 
```

也就是说，您可以使用正则表达式来做相反的事情：而不是摆脱您*不*想要的一切，只需匹配您想要的*部分*：

```
var match = s.match(/\((\d+)|\)/)[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:18:24.290

尝试

```
var s = s.replace(/.*\(|\)/g, ''); 
```

但这只会删除前导字符（在 open-paren 之前）并且只允许一个带括号的部分。结束括号之后的任何内容都将保留。

您真正想要的是将字符串与周围的括号相匹配，并将括号内的部分返回给您。

```
var m = /\((.*\))/.exec(s);
if (m) var result = m[1] 
```

然后，如果有更多括号部分，您可以使用 [1] 和 [2] 等等来获取它们。

你也可以用新的正则表达式和'split()'做类似的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:20:52.893

如果您只需要匹配括号中的数字，您可以这样做

```
s.match(/\((\d+)\)/)[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T19:22:23.443

从开头删除数字和左括号，从结尾删除右括号：

```
s = s.replace(/^\d*\(/, '').replace(/\)$/, ''); 
```

# java - Hibernate 事务管理器 - Java 配置

> ID：14901748
> 
> 赞同：2
> 
> 时间：2013-02-15T19:15:21.830
> 
> 标签：java, spring, hibernate, spring-transactions

我一直在用头撞墙一段时间，现在试图让它发挥作用。我创建了以下数据访问对象：

```
public interface GenericDAO<T, ID extends Serializable> {
  T findById(ID id);
  List<T> findAll();
  T save(T entity);
  void update(T entity);
  void delete(T entity);
}

public class GenericHibernateDAO<T, ID extends Serializable> implements GenericDAO<T, ID> {

  private final Class<T> persistentClass;
  private final SessionFactory sessionFactory;

  public GenericHibernateDAO(final SessionFactory sessionFactory) {
    this.persistentClass = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
    this.sessionFactory = sessionFactory;
  }

  protected Session getSession() {
    return sessionFactory.getCurrentSession();
  }

  public Class<T> getPersistentClass() {
    return persistentClass;
  }

  @Override
  public T findById(final ID id) {
    return (T) getSession().load(getPersistentClass(), id);
  }

  @Override @SuppressWarnings("unchecked")
  public List<T> findAll() {
    return findByCriteria();
  }

  protected List<T> findByCriteria(final Criterion... criterion) {
    final Criteria crit = getSession().createCriteria(getPersistentClass());
    for (final Criterion c : criterion) {
      crit.add(c);
    }
    return crit.list();
  }

  @Override
  public T save(final T entity) {
    getSession().saveOrUpdate(entity);
    return entity;
  }

  @Override
  public void delete(final T entity) {
    getSession().delete(entity);
  }

  @Override
  public void update(final T entity) {
    getSession().saveOrUpdate(entity);
  }
}

@Repository
public class StockHibernateDAO extends GenericHibernateDAO<Stock, String> implements StockDAO {

  @Inject
  public StockHibernateDAO(final SessionFactory sessionFactory) {
    super(sessionFactory);
  }
} 
```

我正在尝试使用 Java 配置进行设置，所以这是我设置服务层的配置：

```
@Configuration @Profile("hibernate")
@EnableCaching @EnableTransactionManagement
@ComponentScan("reference.dao.hibernate")
public class HibernateServiceConfig implements TransactionManagementConfigurer {

  @Inject private StockDAO stockDao; //No extra methods, just the base stuff for now

  @Bean(destroyMethod = "shutdown")
  public DataSource dataSource() {
    return new EmbeddedDatabaseBuilder().setType(EmbeddedDatabaseType.HSQL).addScript("classpath:schema.sql").build();
  }

  @Bean
  public SessionFactory sessionFactory() {
    return new LocalSessionFactoryBuilder(dataSource()).addAnnotatedClasses(Stock.class)
    .setProperty("hibernate.show_sql", "true")
    .setProperty("hibernate.cache.region.factory_class", "org.hibernate.cache.ehcache.EhCacheRegionFactory")
    .setProperty("hibernate.cache.use_query_cache", "true")
    .setProperty("hibernate.cache.use_second_level_cache", "true")
    .setProperty("hibernate.dialect", "org.hibernate.dialect.HSQLDialect").buildSessionFactory();
  }

  @Override @Bean
  public PlatformTransactionManager annotationDrivenTransactionManager() {
    return new HibernateTransactionManager(sessionFactory());
  }

} 
```

这是交易服务：

```
@Service
public class TradingServiceImpl implements TradingService {    
  @Inject private StockDAO stockDAO;

  @Override @Transactional
  @CachePut(value = "stockCache", key = "#stock.name")
  public Stock addNewStock(final Stock stock) {
    stockDAO.save(stock);
    return stock;
  }

  @Override @Cacheable(value = "stockCache")
  public Stock getStock(final String stockName) {
    return stockDAO.findById(stockName);
  }

  @Override @CacheEvict(value = "stockCache", key = "#stock.name")
  public void removeStock(final Stock stock) {
    stockDAO.delete(stock);
  }

  @Override @CacheEvict(value = "stockCache", key = "#stock.name")
  public void updateStock(final Stock stock) {
    stockDAO.update(stock);
  }

  @Override
  public List<Stock> getAll() {
    return stockDAO.findAll();
  }
} 
```

仅当我将 session.flush() 添加到 save 方法时，股票的保存似乎才完成。我理解事物的方式，在服务层方法周围使用 TransactionManager 和 @Transactional 实际上应该会导致为我进行调用。这个配置缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:19:53.997

因为你正在注入一个`Session`

```
 @Bean
  public Session session() {
    return sessionFactory().openSession();
  } 
```

Spring 不能在它周围添加它的事务行为。让 Spring 打开会话并完成它的业务。

与其注入 a `Session`，不如注入 a `SessionFactory`。在您的 DAO 中，保留一个用于`SessionFactory`获取`sessionFactory.getCurrentSession()`会话的属性。

当 Spring 看到 时`@Transactional`，它会得到`SessionFactory`, call `openSession()`，在上面开始一个事务，然后调用你的方法。当您的方法成功返回时，它将关闭该事务。

您还应该`@Autowired`在您的服务类中使用 dao。

# javascript - 通过 onclick 事件运行多个 AJAX 函数

> ID：14901757
> 
> 赞同：3
> 
> 时间：2013-02-15T19:16:21.510
> 
> 标签：javascript, ajax

我觉得这个问题似乎很简单，所以我可能忽略了一些非常简单的东西，但我似乎无法在 Facebook 上找到解决方案。`onClick`基本上我有两个通过事件与 PHP 脚本交互的 AJAX 函数。这是我布置 HTML 的方式：

```
onClick = "previousMonth(this.id); monthDisplay_previous(this.id)" 
```

目前，它正在显示来自`previousMonth(this.id)`. 但是，如果我反转函数调用并将其设置为：

```
onClick = "monthDisplay_previous(this.id); previousMonth(this.id)" 
```

然后它只显示来自的输出`monthDisplay_previous(this.id)`——它只是不会同时运行它们。此外，它们都与不同的 PHP 脚本交互。我觉得这是足够的信息，但如果你想让我发布更多代码，我会很不情愿地。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:20:17.670

如果它们可以并行运行，您可以尝试这样的事情

```
var someFunction = function(that_id) {
  previousMonth(that_id);
  monthDisplay_previous(that_id);
}

onClick = "someFunction(this.id);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:19:49.100

尝试将您的两个函数包装到另一个函数中。

```
onClick = function(){ previousMonth(this.id); monthDisplay_previous(this.id); } 
```

# google-apps-script - 如何保密 Google Apps 脚本？

> ID：14901758
> 
> 赞同：0
> 
> 时间：2013-02-15T19:16:22.140
> 
> 标签：google-apps-script

有没有办法让你的 GAS 代码保密？我需要在电子表格中保密一些代码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:04:08.350

也许您可以将脚本与电子表格分开。然后将其作为库导入。我相信这会使您的代码保密。

就像注释一样，似乎对电子表格具有编辑权限的任何人也对与电子表格关联的脚本具有编辑权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:33:47.767

您可以通过共享来做到这一点，但这并不容易。与另一个帐户共享文档，然后另一个帐户就可以访问电子表格。您可以通过 URL 触发其他帐户中的脚本。我以前做过这个，它确实有效。

# mongodb - 服务器上 Meteor 中的 mongodb distinct() 实现？

> ID：14901761
> 
> 赞同：1
> 
> 时间：2013-02-15T19:16:55.307
> 
> 标签：mongodb, meteor

我需要从 Meteor 中的 mongodb 获取不同的值（基本上，实现 mongodb native distinct() 调用）。在客户端，[Meteor 是否对集合有不同的查询？](https://stackoverflow.com/questions/14514733/does-meteor-have-a-distinct-query-for-collections)- 这就像一个魅力。但我不知道如何在服务器端获得类似的工作。感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:10:40.363

好的，在对代码进行了一些挖掘并意识到 mongo lib 包含所有需要的方法的本机实现之后，我重用了来自[https://github.com/meteor/meteor/pull/644的 aggregate() 解决方案](https://github.com/meteor/meteor/pull/644)

简单的更改和对 coffeescript 的翻译提供了以下代码片段以放入您的服务器端代码：

```
path = __meteor_bootstrap__.require("path")
MongoDB = __meteor_bootstrap__.require("mongodb")
Future = __meteor_bootstrap__.require(path.join("fibers", "future"))

myCollection = new Meteor.Collection "my_collection"

#hacky distinct() definition from https://github.com/meteor/meteor/pull/644
myCollection.distinct = (key)->
  future = new Future
  @find()._mongo.db.createCollection(@_name,(err,collection)=>
    future.throw err if err
    collection.distinct(key, (err,result)=>
      future.throw(err) if err
      future.ret([true,result])
      )
    )
  result = future.wait()
  throw result[1] if !result[0]
  result[1] 
```

缺点是您必须为每个新集合定义它，但这很容易通过 _.extend 或我猜的其他方法修复...

PS它现在也是一个智能包 -`mrt add mongodb-aggregation`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T09:47:27.183

如果有人在 Meteor v1.0+ (1.0.2) 中尝试这个，这个代码对我有用，我把它放在服务器上。与提到调整的 J Ho 的答案基本相同 - Npm.require 以及 Future['return']。为那里的 Coffeescripters 清理了一点。

我正在考虑这个包，但已经有`meteorhacks:aggregate`包（只有`aggregate`功能），因此不想用另一个包覆盖它。`distinct`所以，我只是在其他人的帮助下推出了自己的产品。

希望这对某人有帮助！最有可能的是，如果我继续在更多集合上使用 distinct，我会`_.extend Meteor.Collection`在这里使用：`https://github.com/zvictor/meteor-mongo-server/blob/master/server.coffee`

```
path = Npm.require('path')
Future = Npm.require(path.join('fibers', 'future'))

myCollection = new Meteor.Collection "my_collection"

myCollection.distinct = (key, query) ->
  future = new Future
  @find()._mongo.db.createCollection @_name, (err,collection) =>
    future.throw err if err

    collection.distinct key, query, (err,result) =>
      future.throw(err) if err
      future['return']([true,result]) 

  result = future.wait()
  throw result[1] if !result[0]
  result[1] 
```

# jquery - Jqgrid自定义按钮发送POST数据

> ID：14901762
> 
> 赞同：0
> 
> 时间：2013-02-15T19:16:59.520
> 
> 标签：jquery, button, jqgrid

我使用这些代码：

```
 jQuery("#rowed2").jqGrid({        
    url:'server.php?q=3',
    datatype: "json",
        colNames:['Acc','Id','Ciudad', 'Corporacion','Radicado','Ultima Actuacion','Anotaciones'],
    colModel:[
    {name:'act',index:'act', width:72,  sortable:false},
    {name:'id',index:'id', width:31},
    {name:'ciudadh',index:'ciudadh', width:100, editable:true},
    {name:'corporacionh',index:'corporacionh', width:350, align:"right",editable:true,fixed:true },
    {name:'radicado',index:'radicado', width:190, align:"right",editable:true},     
    {name:'ultima',index:'ultima', width:160,align:"right",editable:true},      
    {name:'anotaciones',index:'anotaciones', width:200, sortable:false,editable:true}   
    ],

    rowNum:200,
    rowList:[10,20,30],
    imgpath: 'css',
    pager: jQuery('#prowed2'),
    sortname: 'actionID',
viewrecords: true,

sortorder: "desc",
height: "100%",

    loadComplete: function(){
    $("tr.jqgrow:odd").addClass('myAltRowClass');
            var ids = jQuery("#rowed2").getDataIDs();
            for(var i=0;i<ids.length;i++){
                    var cl = ids[i];
                    be = "<input style='height:20px;width:70px;' type='button' value='Modificar' onclick=jQuery('#rowed2').editRow("+cl+"); /><br>"; 
                    se = "<input style='height:20px;width:70px;' type='button' value='Guardar' onclick=jQuery('#rowed2').saveRow("+cl+"); /><br>"; 
                    ce = "<input style='height:20px;width:70px;' type='button' value='Cancelar' onclick=jQuery('#rowed2').restoreRow("+cl+"); />"; 

            send = "<input class='sendbuttons' id='tbuttonSend"+cl+"' type='button' value='Send' /><br />";
    clear = "<input class='sendbuttons' id='tbuttonClear"+cl+"' type='button' value='Send' /><br />";

            jQuery("#rowed2").setRowData(ids[i],{act:be+se+ce,anotaciones:send+clear})
            }    

             $(".sendbuttons").click(function(){
    alert("got to 1");
  });

    },

    editurl: "server2.php"
     });

   //botonañadir
   $("#bedata").click(function(){
jQuery("#rowed2").jqGrid('editGridRow',"new",{height:380,reloadAfterSubmit:false});
});

//botonborrar
$("#bedata2").click(function(){
var gr = jQuery("#rowed2").jqGrid('getGridParam','selrow');
if( gr != null ) jQuery("#rowed2").jqGrid('delGridRow',gr, {reloadAfterSubmit:false});
else alert("Antes de hacer clic en este boton seleccione el proceso que desea borrar!");
      });

    var timeoutHnd;
    var flAuto = false;

     function doSearch(ev){
if(!flAuto)
    return;
    //  var elem = ev.target||ev.srcElement;
if(timeoutHnd)
    clearTimeout(timeoutHnd)
timeoutHnd = setTimeout(gridReload,500)
    }

      function gridReload(){
var nm_mask = jQuery("#item").val();
var cd_mask = jQuery("#search_cd").val();
jQuery("#rowed2").jqGrid('setGridParam',{url:"server.php? nm_mask="+nm_mask+"&cd_mask="+cd_mask,page:1}).trigger("reloadGrid");
     }
      function enableAutosubmit(state){
flAuto = state;
jQuery("#submitButton").attr("disabled",state);
   } 
```

所以我认为这个按钮

```
 send = "<input class='sendbuttons' id='tbuttonSend"+cl+"' type='button' value='Send' /><br />"; 
```

可以通过 post 发送一些数据，就像这个按钮一样：

```
 be = "<input style='height:20px;width:70px;' type='button' value='Modificar'        onclick=jQuery('#rowed2').editRow("+cl+"); /><br>"; 
                se = "<input style='height:20px;width:70px;' type='button'  value='Guardar' onclick=jQuery('#rowed2').saveRow("+cl+"); /><br>"; 
                ce = "<input style='height:20px;width:70px;' type='button' value='Cancelar' onclick=jQuery('#rowed2').restoreRow("+cl+"); />"; 
```

例如，我的自定义按钮可以使用其他参数发送和操作称为“自定义”。

那可能吗？如何？

谢谢你的帮助。

更新：

我正在尝试执行这样的 ajax 函数：

```
 $(".sendbuttons").click(function(){
        $.ajax({
        type:'POST',
        url :'server2.php?id=+ids[i]+&oper=edit1',
        beforeSend : function(){
    $('#mensaje5').show().html('<br><br><h2>Por favor espere....<br><img src="c.gif" width="100" height="100" alt="cargando" border="0">');

        },
        success: function (){
         var nancu = parseInt(ids);
            alert(mega);
                ;

        },
        complete: function(){
     $('#form_data4').slideUp();

                }

    });

             }); 
```

这对我的需求来说似乎是个好主意，但我对这条线有疑问：

```
 url :'server2.php?id=+ids[i]+&oper=edit1', 
```

我想获取按钮行的 id，然后通过 post 在 url 中发送这个 id，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:19:49.120

尝试这个

改变这个`send = "<input class='sendbuttons' id='tbuttonSend"+cl+"' type='button' value='Send' /><br />";`

至

```
send = "<input class='sendbuttons' id='tbuttonSend"+cl+"' onclick='send("+cl+");' type='button' value='Send' /><br />"; 
```

并在 Jquery 主函数之外添加一个新函数

```
' function send(id)     $.ajax({
    type:'POST',
    url :'server2.php?id='+id+'&oper=edit1',
    beforeSend : function(){
$('#mensaje5').show().html('<br><br><h2>Por favor espere....<br><img src="c.gif" width="100" height="100" alt="cargando" border="0">');

    },
    success: function (){
     var nancu = parseInt(ids);
        alert(mega);
            ;

    },
    complete: function(){
 $('#form_data4').slideUp();

            }

});}' 
```

# java - NotSerializableException：java.util.regex.Matcher

> ID：14901766
> 
> 赞同：0
> 
> 时间：2013-02-15T19:17:16.990
> 
> 标签：java, serialization

鉴于`java.util.regex.Matcher`没有实现`Serializable`，是否可以以某种方式序列化一个私有声明和使用的类

```
private Pattern pattern;
private Matcher matcher; 
```

这里有什么可能的解决方法（如果有的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:18:07.880

使**Matcher 瞬态**，使其不会被序列化，因为瞬态变量没有序列化..

```
private transient Matcher matcher; 
```

# java - 在Java中从序列中拆分特定字符

> ID：14901772
> 
> 赞同：0
> 
> 时间：2013-02-15T19:17:32.530
> 
> 标签：java, arrays, string

我有一系列如下所示的字符串（以显示一些示例）：

```
S1+2S2  
S2  
2S3+S4  
S1+S2 
```

我只想从这些字符串中提取物种编号。也就是说，只有“S”字符后面的数字。因此，在拆分字符串（或从中提取？）之后，我希望它产生：

```
1 2  
2  
3 4  
1 2 
```

这是否可以在 Java 中使用一两行代码来完成？或者这会是一个多步骤的循环系列，将序列拆分一次，然后再一次，然后再一次，就像我目前拥有的那样？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:26:54.940

这通过了您的测试：

```
package com.sandbox;

import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class SandboxTest {

    @Test
    public void testInputEqualsOutput() {
        String input = "S1+2S2\n" +
                "S2\n" +
                "2S3+S4\n" +
                "S1+S2";
        String output = processInput(input);
        assertEquals("1 2\n" +
                "2\n" +
                "3 4\n" +
                "1 2", output);
    }

    private String processInput(String input) {
        return input.replaceAll("\\d?S", "").replaceAll("\\+", " ");
    }

} 
```

该`processInput`方法将所有前面可能有数字的“S”替换为“”。然后它将所有 + 符号替换为空格。

# android - Android 应用程序更高效地转到数据库或将集合保存在内存中

> ID：14901774
> 
> 赞同：0
> 
> 时间：2013-02-15T19:17:36.803
> 
> 标签：android, sql, database, performance

我构建了我的第一个 android 应用程序。我有一组要显示的列表。我想知道手机的内存很小，每次都为我的列表访问数据库还是将其保存在内存中是一种更好的设计方法吗？

我确实需要经常重新排序列表，因此只需按排序顺序将它们从数据库中抓取出来就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:40:23.607

内存中的列表使用 RAM，频繁的 DB 查询使用 CPU 并导致 I/O 延迟。在移动设备上，您必须平衡所有这些以使您的代码具有响应性，同时节省电池并且对 RAM 和 CPU 的影响最小。

为您的代码设置合理的限制并尝试在其中工作。确定最大内存限制和最小响应时间。

只要您有空闲的 RAM，就将数据保留在内存中，当您超过 RAM 限制（分页）时，开始将该数据的部分读/写到磁盘 DB。您只在极少数情况下需要它，因为大多数现代移动设备都有合理的 RAM 来满足它们提供的应用程序的平均需求。

一个典型的例子是显示一百万个项目的列表，您在 RAM 中保留 1000 个左右，并按需从 DB 加载下一个/上一个 1000 个。

最后，当您的 App 不存在时，请确保将重要数据保存到 DB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:21:24.057

数据库应该只用于存储电源循环之间或应用程序之间的非设置信息。您不应该将它们用于可以放入内存的东西，因为它会更慢并且需要大量额外的编程。

如果您需要处理大量列表并有一种很好的方法将它们组织成表格，在 SQL 中检索它们，我可能会看到使用数据库将数据保存在持久内存中是有用的。

**编辑**：

此外，您可能需要考虑访问数据的频率。您不想不断地查询数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:25:43.997

我们不知道您列表的内容，但通常您不会侵犯设备或应用程序的内存限制，除非您正在处理图形。

推论为简单数据类型的文本数据和结构不会耗尽设备的“有限内存”，除非它们确实很大。

无论如何，我的答案是把它留在记忆中。只保留您需要的数据。

# r - 如何使用 tidy 和 knitr 在 R 源代码中换行

> ID：14901781
> 
> 赞同：11
> 
> 时间：2013-02-15T19:18:22.933
> 
> 标签：r, knitr

我最近正在使用 knitr，虽然其中大部分方面都进行得相当顺利，但在完成的文档中包含 R 代码存在一个格式问题，我还没有弄清楚。我经常需要在我的 R 块中创建相对较长的文本字符串，例如`xtable()`函数的标题。虽然 tidy 通常在包装 R 代码并将其保存在 LaTeX 中的阴影框中做得很好，但它不知道如何处理文本字符串，所以它不包装它们，它们从右侧流出页。

我会很高兴有一个整洁地完成所有工作的解决方案。但是，我也会对可以手动应用于我的 Rnw 源中的 R 块中的长字符串的解决方案感到满意。我只是不想编辑由 KnitR 创建的 tex 文件。

下面是一个最小的工作示例。

```
\documentclass[12pt, english, oneside]{amsart}

\begin{document}

<<setup, include=FALSE, cache=FALSE, tidy=TRUE>>=
options(tidy=TRUE, width=50)
@

<<>>=
x <- c("This","will","wrap","nicely","because","tidy","knows","how","to","deal","with","it.","So","nice","how","it","stays","in","the","box.")
longstr <- "This string will flow off the right side of the page, because tidy doesn't know how to wrap it."
@

\end{document} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:55:32.697

这是一个非常手动的解决方案，但我已经使用过。

你建立了字符串，使用`paste0`它，这给了整洁的机会来分裂它。

```
longstr <- paste0("This string will flow off the right side"," of the page, because tidy doesn't know how to wrap it.") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:38:19.760

另一种解决方案是使用[strwrap](http://stat.ethz.ch/R-manual/R-patched/library/base/html/strwrap.html)。

```
> longstr <- "This string will flow off the right side of the page, because tidy doesn't know how to wrap it."
> strwrap(longstr, 70)
[1] "This string will flow off the right side of the page, because tidy" "doesn't know how to wrap it."                                      
> str(strwrap(longstr, 70))
chr [1:2] "This string will flow off the right side of the page, because tidy" "doesn't know how to wrap it." 
```

不幸的是，我不知道这是否适用于 tidy，但它适用于 knitr 的 HTML 输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T20:54:56.377

这个答案对派对来说有点晚了，但我发现即使我`tidy.opts = list(width.cutoff = 60)`在早期的块中使用（使用 RStudio 和 .Rnw 脚本），然后在我包含的每个块选项列表中`tidy = TRUE`，行的溢出仍然发生。我的溢出行位于创建 ggplot2 图的代码部分中。试错发现，如果我在行尾的+后加回车，就没有溢出问题了。LaTeX 创建的 PDF 中不会显示额外的行。

# jquery - 如何使用 jQuery .on() 方法声明分组事件来识别未来元素？

> ID：14901786
> 
> 赞同：-1
> 
> 时间：2013-02-15T19:18:36.337
> 
> 标签：jquery, onchange

我有以下结构：

**HTML**

```
<select name="var" id="myselect">
    <option value="">Select</option>
    <option value="1">Value 1</option>
    <option value="2">Value 2</option>  
</select> 
```

**JS**

```
$("#myselect").on({
    click: function(){
        console.log("event click fired!");
    },
    change: function(){
        console.log("event change fired!");
    }
}); 
```

事件没有触发，因为`select`在页面加载后动态创建。

有人知道如何使用[.on()](http://api.jquery.com/on/)来识别具有分组事件的未来元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:20:26.167

[您的代码有效](http://jsfiddle.net/rP7EN/)。

在您可能出错的事情中：

*   你不导入 jQuery
*   您的脚本在 HTML 之前被调用（只需将您的脚本放在正文的末尾）

如果您不能将脚本放在正文的末尾，请将其包含在准备好的事件处理程序中：

```
$(function(){
 $("#myselect").on({
    click: function(){
        console.log("event click fired!");
    },
    change: function(){
        console.log("event change fired!");
    }
 });
}); 
```

编辑 ：

如果选择是动态创建的，请使用：

```
$(document.body).on('click', "#myselect", function(){
     console.log("event click fired!");
}).on('change', "#myselect", function(){
     console.log("event change fired!");
}); 
```

请注意，您可能会替换`document.body`为调用此代码时存在的元素的选择器，该选择器将包含该选择。

# mongodb - $or mongoose 操作符在本地主机上工作，但不适用于生产环境

> ID：14901789
> 
> 赞同：0
> 
> 时间：2013-02-15T19:18:51.733
> 
> 标签：mongodb, mongoose

我刚刚在我的产品服务器上推送了我的 Web 应用程序，我发现了一个令人惊讶的问题：

```
var username = 'foo';
var User = this.db.model('User', UserSchema);
User.findOne({ $or: [ { username: username }, { email: { value: username } } ] }, 'id', function(err, Doc) {
  if (err) {
    console.log(err);
  }else if (Doc) {
    console.log('OK');
  }else {
    console.log('Any result');
  }
}); 
```

这个完全相同的代码适用于我的本地主机，但不适用于我的产品服务器（我进入`else`生产服务器和`else if (Doc)`本地主机的条件）。

`username`我在调用之前打印了我的变量`findOne`并手动检查，这个用户名确实存在。

**如果我放弃`$or`运算符并仅将条件应用于`username`，它可以工作！**`$or`这是运营商应对此故障负责的证据。

我在两个环境 ( `"mongoose": ">=3.5.4"`) 上以相同的方式更新我的节点模块。

我的 mongoDB 版本在两个环境中是相同的：

```
db version v2.0.4, pdfile version 4.5
git version: nogitversion 
```

我的本地主机服务器：`ubuntu`. 我的产品服务器：`debian`.

我们怎么解释呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:53:27.070

我已将 mongodb 升级到`v2.2.3`我的产品服务器上，它可以工作......

# grouping - 如何使用 IKImagebrowserView 的分组显示？

> ID：14901792
> 
> 赞同：1
> 
> 时间：2013-02-15T19:18:54.790
> 
> 标签：grouping, ikimagebrowserview, ikimagekit

我想要的效果就像 iPhoto 组（或时间线）显示。

![在此处输入图像描述](../Images/466698f84b83eb0afbbf1a9667f076f7.png)

我已经实现了常见的IKImageBrowserView。这就像 ![在此处输入图像描述](../Images/3a5687f1c684d05247ad32b5123596d1.png)

但我不知道如何将它们分配到不同的组中。

我提到：[自定义 IKImageBrowserView 组外观](https://stackoverflow.com/questions/8268797/customizing-ikimagebrowserview-group-appearance)，这可能是 stackoverflow 中唯一的帖子。

我使用了 4 种方法`IKImageBrowserDataSource`。

```
- (NSUInteger)numberOfItemsInImageBrowser:(IKImageBrowserView *)browser;
- (id)imageBrowser:(IKImageBrowserView *)browser itemAtIndex:(NSUInteger)index;
- (NSUInteger)numberOfGroupsInImageBrowser:(IKImageBrowserView *)browser;
- (NSDictionary *)imageBrowser:(IKImageBrowserView *)browser groupAtIndex:(NSUInteger)index; 
```

我想我不知道如何为最后两种方法编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:25:10.600

您肯定需要实现最后两种方法才能显示组。如果你只是想看看效果，你可以这样做：

```
- (NSUInteger) numberOfGroupsInImageBrowser:(IKImageBrowserView *) aBrowser
{
    return 1;
}
- (NSDictionary *) imageBrowser:(IKImageBrowserView *) aBrowser groupAtIndex:(NSUInteger) index
{
    NSRange r = {0, 3};
    return @{IKImageBrowserGroupRangeKey: [NSValue valueWithRange:r],
             IKImageBrowserGroupBackgroundColorKey: [NSColor redColor],
             IKImageBrowserGroupStyleKey: [NSNumber numberWithInt:IKGroupDisclosureStyle]};
} 
```

groupAtIndex 返回的目录中的重要键是`IKImageBrowserGroupRangeKey`. 这描述了给定组中的图像范围。请注意，NSRange 是一个结构，不是从 NSObject 派生的，因此它不能用作字典中的值。因此，它必须转换为 NSValue。

为了真正有用，您需要缓存您的一组范围值并提供一种对图像进行分组和取消分组的机制，但我希望这足以让您入门

# php - 数组是否应该在使用前声明？

> ID：14901793
> 
> 赞同：1
> 
> 时间：2013-02-15T19:18:56.513
> 
> 标签：php, variables

哪个是更好的做法，代码 A 或 B：

A：

```
 $array = array();
    $array[] = 'value'; 
```

B（使用数组而不将其声明为数组）：

```
 $array[] = 'value' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:20:30.717

`A`更好。 ~~`B`运行时会产生一个 PHP `Notice`，但仍然可以正常工作。~~ 正如其他一些人提到的并且我最初忽略的那样，`A`通过确保`$array`在需要它而不是其他变量类型或先前定义的变量时，它是您想要的，也将使您的代码更加健壮。

编辑：PHP 在使用未定义变量时不会发出通知的一次是在附加到未初始化的数组时。来自 php.net：

> 在使用未初始化变量的情况下会发出 E_NOTICE 级别错误，但在将元素附加到未初始化数组的情况下则不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:21:01.257

最佳实践是声明它。

原因：如果由于某种原因有人打开了 register_globals 并且在您使用它之前设置了 $array，您最终可能会得到奇怪的结果。如果你声明它，你总是确定你有一个空数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T19:26:13.957

或 C: $array = array('value');

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T19:28:13.953

A 是更好的方法，但如果它是一个已知值，我会做
$array=array('value');

[试试这个网站](http://www.homeandlearn.co.uk/php/php6p2.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T19:21:36.610

IMO 这取决于脚本的复杂性。就像 foreach 循环中的 $i 一样，您可能会经常使用数组。

通过首先定义数组，您可以确保它是一个新的空数组，从而确保它不包含以前使用的数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T19:24:22.750

`A`比`B`@G-Nugget 出于同样的原因所说的要好，但推论是，如果你有变量突然出现，它也会使你的代码更难阅读。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-15T19:43:18.453

根据[手册](http://www.php.net/manual/en/language.types.array.php)，提到**使用方括号语法创建/修改**的部分实际上意味着创建数组与`$array[] = 'value';`通过在为其分配值之前声明变量来创建数组一样正确。

换句话说，不要担心。

# mysql - 是否有像 Play Framework Blob 一样工作的 JPA 或 Hibernate 文件存储

> ID：14901798
> 
> 赞同：0
> 
> 时间：2013-02-15T19:19:26.227
> 
> 标签：mysql, spring, hibernate, jpa, playframework

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:49:10.347

不，JPA 中没有这样的文件存储，Hibernate 中也没有。JPA 的范围非常严格地映射对象和数据库表以及查询映射的对象。

# language-agnostic - “条件安全”和“线程安全”的区别

> ID：14901803
> 
> 赞同：4
> 
> 时间：2013-02-15T19:19:35.623
> 
> 标签：language-agnostic, thread-safety

我偶然发现了 Wikipedia 上的线程安全文章；它区分了几个安全级别，尤其是：

> **线程安全**：当多个线程同时访问时，保证实现没有竞争条件。
> **条件安全**：不同的线程可以同时访问不同的对象，并且对共享数据的访问不受竞争条件的影响。

但对我来说，这两个定义看起来像是用不同的方式来表达同一件事。两者都保证共享数据没有竞争条件。

有人可以解释其中的区别吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:07:27.930

您应该明白，在这两种情况下，*共享数据*不是一回事。

**线程安全**谈论从多个线程访问单个实例。因此，如果通过公共方法访问，*共享数据可能是该类的任何成员。*它不是在*实例*之间共享（因为只有一个），而是在*线程*之间共享。

**条件安全**谈论访问不同的实例，每个实例都来自自己的线程。数据必须在*实例*之间共享，因此它只能是聚合成员（可能由依赖注入提供）、静态成员或（外部）单例。

**但是**，如果您阅读了上面提到的 Wikipedia 文章中的所有引用（[Qt 是错误的](https://qt-project.org/doc/qt-4.8/threads-reentrancy.html)），您就会明白 Wikipedia 甚至可能歪曲了 IBM 的命名。*IBM的条件*意味着*只有类/API中的一些方法是线程安全*的，或者线程安全取决于API无法影响的底层服务（给出一个很好的例子）。*线程安全与可重入*的 Qt 命名约定似乎更合适，因为它不区分线程共享数据和实例共享数据。

# java - 将对象一一存储在 xml 中并将它们作为 ArrayList 读取

> ID：14901809
> 
> 赞同：0
> 
> 时间：2013-02-15T19:20:10.940
> 
> 标签：java, xml, xstream

我是 xml 对象转换的新手。我目前正在使用 xstream。

我的问题是有什么方法可以将对象一个一个地存储在一个 xml 中，就像最后附加的一样，并在读取时将它们作为数组列表读取。

基本上我有一个xml文件

```
<person>
    <firstname>Joe</firstname>
    <lastname>Walnes</lastname>
    <phone>
        <code>123</code>
        <number>1234-456</number>
    </phone>
    <fax>
        <code>123</code>
        <number>9999-999</number>
    </fax>
</person>
<person>
    <firstname>Joe</firstname>
    <lastname>Walnes</lastname>
    <phone>
        <code>123</code>
        <number>1234-456</number>
    </phone>
    <fax>
        <code>123</code>
        <number>9999-999</number>
    </fax>
</person> 
```

我想能够做到

```
List<Person> persons = (ArrayLIst<Person()>)xstream.fromXML(xml); 
```

xstream 是否适合在这里使用，有什么更好的方法可以用来实现这一点。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:24:38.843

您可以使用标准的 Java [XMLEncoder](http://docs.oracle.com/javase/7/docs/api/java/beans/XMLEncoder.html)和[XMLDecoder](http://docs.oracle.com/javase/7/docs/api/java/beans/XMLDecoder.html)类。它们与对象输入和输出流一样易于使用，并且可以将任何带有 getter 和 setter 的对象写入应保留的属性、集合以及多个对象到同一流中。缺点是它们生成和读取的 XML 对于人类来说相当难以理解。

如果您一个一个地手动编写对象，您还需要一个一个地读取它们，直到得到 ArrayIndexOutOfBoundsException（检测 EOF 的有趣事件，但这是它的记录方式）。您不能在一次调用中加载整个集合，但一个微不足道的循环在这里似乎并不复杂，最后您会得到 ArrayList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:39:56.200

编写单个对象和读取列表将不起作用。要了解原因，请在一个文件中写入一些对象 using`toXml`并在另一个文件中写入一个`List`对象并比较两者。

但是，逐个读取单个对象并将其添加到列表中应该相当容易，类似于

```
create list
while (read object using fromXml)
  add to list 
```

# qt - 在 QGraphicsScene 中为 QWidget 设置动画

> ID：14901811
> 
> 赞同：0
> 
> 时间：2013-02-15T19:20:17.980
> 
> 标签：qt, animation, qwidget, qgraphicsscene

所以我试图在已添加到 QGraphicsScene 的 QWidget 上使用 QPropertyAnimation 并且它不起作用。我不能真正复制和粘贴代码，因为它与一个有点复杂的系统交织在一起，但总结基本上是这样的：

创建了一个自定义小部件
`CustomWidget widget;`

小部件被添加到图形场景
`graphicsScene,addWidget(widget);`

稍后，小部件的成员函数之一尝试创建并启动 QPropertyAnimation

```
QPropertyAnimation *anim = new QPropertyAnimation(this, "_opacity");

anim->setDuration(5000);
anim->setKeyValueAt(0, 0);
anim->setKeyValueAt(1, 1);

anim->start(); 
```

属性更改为第二个值并保持在那里，而不是平滑的动画。

我在网上查看了一些相关问题及其解决方案，但似乎没有一个符合我的情况。有谁知道如何做到这一点？

编辑：我发现我只需要为 _opacity 调用 update() 创建 WRITE 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:33:18.937

我猜你是在堆栈而不是堆上分配 QPropertyAnimation 和朋友。请注意， QPropertyAnimation 对象将*在 scope 结束时*被破坏，因此以后不会更改任何属性。

您很可能希望在堆上创建该对象。另请参阅以下示例：[http ://doc.qt.digia.com/4.7/qpropertyanimation.html](http://doc.qt.digia.com/4.7/qpropertyanimation.html)

# javascript - 动作不能变成函数

> ID：14901812
> 
> 赞同：0
> 
> 时间：2013-02-15T19:20:24.413
> 
> 标签：javascript, jquery, function

为什么相同的动作在变成函数时会停止工作？有什么一般规则吗？这是这个问题的一个非常具体和明确的例子。

jQuery 移动，[http://jsbin.com/osovoh/2/edit](http://jsbin.com/osovoh/2/edit)

在这个版本中，js 运行良好。单选按钮的标签会立即更改。

```
var radio_elem = $('#edit-new-amount-no-cost');
$("label[for='edit-new-amount-no-cost']").html(radio_elem).append("label changed"); 
```

但是如果您删除 /* s 从而将相同的操作转换为由另一个按钮触发的功能，

```
function go() {
    var radio_elem = $('#edit-new-amount-no-cost');
    $("label[for='edit-new-amount-no-cost']").html(radio_elem).append("label changed");
} 
```

相同的代码会混淆目的地的格式。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:47:57.407

这是答案：

```
 <!DOCTYPE html>
<html>
<head>
  <meta name="description" content="WORKING: replace text in radiobutton" />
<meta charset=utf-8 />
<title></title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body style="text-align:center">
<div class="form-radios">
  <div class="form-item" id="edit-new-amount-no-cost-wrapper">
    <label class="option" for="edit-new-amount-no-cost" >
    <input type="radio" id="edit-new-amount-no-cost" name="new_amount" value="no_cost" class="form-radio"/>
    original label
    </label>
  </div>
    </div>
<input name="click to change the label" type="button" onClick="go()">
<script> 

function go(){

$("label[for='edit-new-amount-no-cost'] .ui-btn-text").html("label changed");

}

 </script>

  </body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:23:24.927

如果它在函数内部，则标记更改发生在 jQuery Mobile 呈现页面之后。您必须让 jQuery Mobile 重新呈现您正在修改的页面或元素。

# css - smartgwt 突出显示树节点文本

> ID：14901813
> 
> 赞同：1
> 
> 时间：2013-02-15T19:20:25.313
> 
> 标签：css, gwt, tree, smartgwt, treegrid

我想在 smartgwt 中突出显示/更改树节点文本的颜色。我尝试了有效的 TreeGrid.selectRecord(node) ，但这会为树的宽度创建背景。

我只想突出显示文本（节点的标题）或更改节点标题的文本颜色。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:25:30.560

您可以使用以下内容：

```
treeNode.setCustomStyle(stylename); 
```

你也可以看看这个[链接](https://stackoverflow.com/questions/8441631/how-to-apply-different-styles-to-treenode-for-different-states)。

# php - 用另一个没有正则表达式的 URL 替换一个 URL

> ID：14901818
> 
> 赞同：-2
> 
> 时间：2013-02-15T19:20:43.033
> 
> 标签：php

我正在尝试用另一个替换数据库（wordpress）中的一些 URL，但这很棘手，因为很多 URL 都是重定向。我正在尝试根据结果用重定向的 URL 或我选择的 URL 替换 URL。我可以毫无问题地完成匹配，但我无法替换它。我试过 str_replace，但它似乎没有替换 URL。当我尝试 preg_replace 时，它​​会给出“警告：preg_replace()：分隔符不能是字母数字或反斜杠”。谁能指出我正确的方式来做到这一点？

```
if(preg_match($url_regex,$row['post_content'])){
    preg_match_all($url_regex,$row['post_content'],$matches);

    foreach($matches[0] as $match){
        echo "{$row['ID']} \t{$row['post_date']} \t{$row['post_title']}\t{$row['guid']}";

        $newUrl = NULL;
        if(stripos($url_regex,'domain1') !== false || stripos($url_regex,'domain2') !== false || stripos($url_regex,'domain3') !== false){
            $match = str_replace('&amp;','&',$match);

            $ch = curl_init();
            curl_setopt($ch,CURLOPT_URL,$match);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
            curl_setopt($ch, CURLOPT_HEADER, true);
            curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
            $html = curl_exec($ch);
            $newUrl = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);

            if(stripos($newUrl,'domain4') !== false)
                $newUrl = NULL;

        }
        else

        if($newUrl == NULL)
        {   $newUrl = 'http://www.mysite.com/';

        }
        echo "\t$match\t$newUrl";
        $content = str_replace($match,$newUrl,$row['post_content']); 
        echo "\t (" . strlen($content).")";
        echo "\n";

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:49:23.610

这就是使用 Perl 正则表达式的方法。

```
$baesUrlMappings = array('/www.yoursite.com/i' => 'www.mysite.com', 
                         '/www.yoursite2.com/i' => 'www.mysite2.com',);

echo preg_replace(array_keys($baesUrlMappings), array_values($baesUrlMappings), 'http://www.yoursite.com/foo/bar?id=123');
echo preg_replace(array_keys($baesUrlMappings), array_values($baesUrlMappings), 'http://www.yoursite2.com/foo/bar?id=123'); 
```

[http://codepad.viper-7.com/2ne7u6](http://codepad.viper-7.com/2ne7u6)

请阅读说明书！你应该能够弄清楚这一点。

# python - Matplotlib：在两个不同的图形中绘制相同的图形，而无需两次写入“plot(x,y)”行

> ID：14901822
> 
> 赞同：3
> 
> 时间：2013-02-15T19:20:53.447
> 
> 标签：python, matplotlib

我有这个简单的代码，它在两个不同的数字（图 1 和图 2）中绘制完全相同的东西。但是，我必须写两次 ax?.plot(x, y) 行，一次用于 ax1，一次用于 ax2。我怎么能只有一个情节表达式（有多个冗余的可能是我更复杂的代码的麻烦来源）。像 ax1,ax2.plot(x, y) .​​.. 之类的东西？

```
import numpy as np
import matplotlib.pyplot as plt

#Prepares the data
x = np.arange(5)
y = np.exp(x)

#plot fig1
fig1 = plt.figure()
ax1 = fig1.add_subplot(111)

#plot fig2
fig2 = plt.figure()
ax2 = fig2.add_subplot(111)

#adds the same fig2 plot on fig1
ax1.plot(x, y)
ax2.plot(x, y)

plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:50:36.840

您可以将每个轴添加到列表中，如下所示：

```
import numpy as np
import matplotlib.pyplot as plt

axes_lst = []    
#Prepares the data
x = np.arange(5)
y = np.exp(x)

#plot fig1
fig1 = plt.figure()
ax1 = fig1.add_subplot(111)
axes_lst.append(ax1)

#plot fig2
fig2 = plt.figure()
ax2 = fig2.add_subplot(111)
axes_lst.append(ax2)

for ax in axes_lst:
    ax.plot(x, y)

plt.show() 
```

或者您可以使用此不受支持的功能来提取 pyplot 中的所有图形。取自[https://stackoverflow.com/a/3783303/1269969](https://stackoverflow.com/a/3783303/1269969)

```
figures=[manager.canvas.figure
         for manager in matplotlib._pylab_helpers.Gcf.get_all_fig_managers()]
for figure in figures:
    figure.gca().plot(x,y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:50:46.990

在不了解 matplotlib 的情况下，您可以将所有轴 (?) 添加到列表中：

```
to_plot = []
to_plot.append(ax1)
...
to_plot.append(ax2)
...

# apply the same action to each ax
for ax in to_plot: 
    ax.plot(x, y) 
```

然后，您可以根据需要添加任意数量，并且每个都会发生相同的事情。

# visual-studio-2012 - 如何在 Web 性能测试中替换 XML 表单发布参数中的字符串？

> ID：14901823
> 
> 赞同：2
> 
> 时间：2013-02-15T19:20:55.743
> 
> 标签：visual-studio-2012, performance-testing

我正在测试一个 Web 应用程序，该应用程序通常在与 Web 服务器通信时向应用程序的 Web 服务发送一些相当大的 XML 结构。当然，对于测试运行的每次迭代，我都需要改变测试数据——用数据源中的数据替换一些元素。是否有将标记放入记录的 XML 参数的语法，以便 Web 性能测试在测试运行期间替换来自数据库、另一个数据源或上下文参数的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:20:55.743

这很容易实现，在数据源名称周围使用双花括号，如下例所示：

```
<Message>
{{DataSource.TableName.ColumnName}}
</Message> 
```

您可以在参数中使用上下文参数，如下所示：

```
<Message>
{{ContextParameterName}}
</Message> 
```

这也适用于非 XML 表单发布参数。

# linux - 在 GTK+2 共享库中设置 gdb 断点？

> ID：14901824
> 
> 赞同：0
> 
> 时间：2013-02-15T19:20:58.053
> 
> 标签：linux, gdb, gtk2

我正在为 C(++) 应用程序开发 Centos6.3 -- Gtk-2.18。当我在 GTK 库中设置断点时，我遇到了 Metacity 挂起的问题。看起来断点正在影响库的系统范围副本，即 Metacity 的副本，而不仅仅是我的应用程序，我必须强制重启我的 VM。有没有办法为这些共享库强制写入时复制语义？

顺便说一句，我没有 GTK2.18 源代码——http://www.gtk.org/download/linux.php 上的链接已失效[——](http://www.gtk.org/download/linux.php)某处是否有工作镜像？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:02:13.827

断点不是系统范围的。相反，最有可能发生的是您的程序在服务器抓取时遇到断点。这可以防止您的其他窗口接收事件。

有不同的方法可以解决这个问题。一些 GUI 工具包（我不记得关于 Gtk）有防止抓取的方法，以便于调试。或者，您可以从另一台机器远程调试。或者，类似地，在 VM 中或为您正在调试的程序使用虚拟 X 服务器。

# java - 使用 Jsoup 存在 HTML 标签

> ID：14901828
> 
> 赞同：0
> 
> 时间：2013-02-15T19:21:04.960
> 
> 标签：java, html, tags, jsoup

使用 Jsoup 可以轻松计算特定标签在文本中出现的次数。例如，我试图查看给定文本中存在多少次锚标记。

```
 String content = "<p>An <a href='http://example.com/'><b>example</b></a> link.</p>. <p>An <a href='http://example.com/'><b>example</b></a> link.</p>. <p>An <a href='http://example.com/'><b>example</b></a> link.</p>. <p>An <a href='http://example.com/'><b>example</b></a> link.</p>";
    Document doc = Jsoup.parse(content);
    Elements links = doc.select("a[href]"); // a with href
    System.out.println(links.size()); 
```

这给了我 4 的计数。如果我有一个句子并且我想知道该句子是否包含任何 html 标签，那么 Jsoup 可以吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:30:53.473

使用正则表达式可能会更好，但是如果你真的想使用JSoup，那么你可以尝试匹配所有元素，然后减去4，因为JSoup会自动添加四个元素，即首先是根元素，然后然后是`<html>`,`<head>`和`<body>`元素。

这可能看起来像：

```
// attempt to count html elements in string - incorrect code, see below 
public static int countHtmlElements(String content) {
    Document doc = Jsoup.parse(content);
    Elements elements = doc.select("*");
    return elements.size()-4;
} 
```

但是，如果文本包含,或;则会给出**错误的结果** 比较以下结果：`<html>``<head>``<body>`

```
// gives a correct count of 2 html elements
System.out.println(countHtmlElements("some <b>text</b> with <i>markup</i>"));
// incorrectly counts 0 elements, as the body is subtracted 
System.out.println(countHtmlElements("<body>this gives a wrong result</body>")); 
```

因此，要完成这项工作，您必须单独检查“魔术”标签；这就是为什么我觉得正则表达式可能更简单。

更多失败的尝试使这项工作：使用`parseBodyFragment`而不是`parse`没有帮助，因为 JSoup 以相同的方式对其进行了清理。同样，计数 as`doc.select("body *");`可以省去减去 4 的麻烦，但如果`<body>`涉及 a，它仍然会产生错误的计数。仅当您有一个应用程序，您确定要检查的字符串中不存在 no或元素时，它才可能在该限制下工作`<html>`。`<head>``<body>`

# php - 查询问题-特定 col 与变量匹配的 LEFT JOINS

> ID：14901830
> 
> 赞同：0
> 
> 时间：2013-02-15T19:21:06.287
> 
> 标签：php, sql

我正在使用左连接查询从 sql 中获取数据，我想过滤更具体的查询，在我的数据库中我有客户，每个客户都有一个组，每个用户都有他的客户。我想你现在明白我需要什么了。
每个用户只会看到与他相关的行。这是我的查询：

```
SELECT t.*,c.fname,e.DISCODE,e.AREA,e.COLOR
FROM $tbl_name  AS t
LEFT JOIN customers AS c ON t.MCcode = c.MCcode
LEFT JOIN eventcodes AS e ON t.MCcode = e.MCcode AND t.CODE=e.CODE   
ORDER By `id` DESC LIMIT $start, $limit 
```

在客户表上，我有一个名为 Group 的字段，当用户连接时，我有他的组名，所以我如何过滤这个查询，只有在哪里（例如）c.Group = '$Group'，所有行都在 $ 中找到tbl_name，以及我通过连接获取的其他详细信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:33:08.793

像这样

```
LEFT JOIN customers AS c ON t.MCcode = c.MCcode and c.Group = '$Group' 
```

# asp.net - ASP.net 中使用 XML 的登录控制

> ID：14901833
> 
> 赞同：0
> 
> 时间：2013-02-15T19:21:10.030
> 
> 标签：asp.net, xml

我一直在寻找年龄寻求一些帮助，但找不到任何我能理解的东西。

我要做的就是将一个 XML 文件绑定到 ASP.net 中的登录控件。我可以让它们都使用网格视图，但我不明白如何让它与登录控件一起使用。

有人知道吗？

```
<?xml version="1.0" encoding="utf-8" ?>
<employee>
<User>
<username>Admin</username>
<password>Password</password>
 </User>
<employee/> 
```

是我的 XML 文件

我的登录控件是

```
<asp:Login ID="Login1" runat="server" BackColor="#F7F6F3" BorderColor="#E6E2D8" 
    BorderPadding="4" BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" 
    Font-Size="0.8em" ForeColor="#333333" Height="307px" 
    onauthenticate="Login1_Authenticate" Width="689px">
    <InstructionTextStyle Font-Italic="True" ForeColor="Black" />
    <LoginButtonStyle BackColor="#FFFBFF" BorderColor="#CCCCCC" BorderStyle="Solid" 
        BorderWidth="1px" Font-Names="Verdana" Font-Size="0.8em" ForeColor="#284775" />
    <TextBoxStyle Font-Size="0.8em" />
    <TitleTextStyle BackColor="#5D7B9D" Font-Bold="True" Font-Size="0.9em" 
        ForeColor="White" />
</asp:Login> 
```

我想要做的是将它们连接在一起，以便我可以登录到我的网站。然后，如果登录成功，它将重定向到一个页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:37:57.770

**更新：**

您的 xml 在关闭员工时出错，应该是：

```
</employee> 
```

在 page_load、loginControl_load 或 logincontrol_init 方法后面的代码上尝试：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
        doc.Load(Server.MapPath("~/path/to/file.xml"));
        System.Xml.XmlNode usernameNode = doc.SelectSingleNode("/employee/User/username");
        string username = usernameNode.InnerText;
        System.Xml.XmlNode passwordNode = doc.SelectSingleNode("/employee/User/password");
        string password = passwordNode.InnerText;
        Login1.UserName = username;
        ((TextBox)Login1.FindControl("Password")).Attributes.Add("Value", password);
    } 
```

# linux - 如何在 Linux 中从 netstat -i 获取队列字段？

> ID：14901844
> 
> 赞同：0
> 
> 时间：2013-02-15T19:21:43.127
> 
> 标签：linux, solaris

在 Solaris 中，“netstat -i”的输出如下所示：

```
root# netstat -i
Name  Mtu  Net/Dest      Address        Ipkts   Ierrs Opkts  Oerrs Collis Queue
lo0   8232 loopback      localhost      136799  0     136799 0     0      0
igb0  1500 vulture       vulture        1272272 0     347277 0     0      0 
```

请注意，最后有一个 Queue 字段。

在 Linux 中，'netstat -i' 给出没有 Queue 字段的输出：

```
[root@roseate ~]# netstat -i
Kernel Interface table 
Iface       MTU Met    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
eth0       1500   0  2806170      0      0      0   791768      0      0      0 BMRU
eth1       1500   0        0      0      0      0        0      0      0      0 BMU
eth2       1500   0        0      0      0      0        0      0      0      0 BMU
eth3       1500   0        0      0      0      0        0      0      0      0 BMU
lo        16436   0  1405318      0      0      0  1405318      0      0      0 LRU 
```

我已经想出了如何通过添加`-e`选项在 Linux 中获取冲突，但是有没有办法在 Linux 中获取**队列**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:39:07.027

**我在 Linux 上的 netstat 中看到的对队列**的唯一引用是在使用 -s 时，但这对于您的用例来说可能太啰嗦了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:47:41.627

```
$ netstat -na | awk 'BEGIN { RecvQ=0; SendQ=0; } { RecvQ+=$2; SendQ+=$3; } END { print "RecvQ " RecvQ/1024; print "SendQ " SendQ/1024; }'
RecvQ 255.882
SendQ 0.0507812 
```

对于每个界面，我都有肮脏的方式

```
[spatel@us04 ~]$  for qw in `/sbin/ifconfig  | grep 'inet addr:' | cut -d: -f2 | awk '{print $1}'`; do echo `/sbin/ip addr | grep $qw | awk '{print $7}'` : ; echo `netstat -na | grep $qw | awk 'BEGIN { RecvQ=0; SendQ=0; } { RecvQ+=$2; SendQ+=$3; } END { print "RecvQ " RecvQ/1024; print "SendQ " SendQ/1024; }'`; done
eth0 :
RecvQ 0 SendQ 0
eth2 :
RecvQ 0.0703125 SendQ 1.56738
:
RecvQ 0 SendQ 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T21:51:25.090

我最终使用

```
tc -s -d qdisc

[root@roseate ~]# tc -s -d qdisc
qdisc mq 0: dev eth2 root
Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
rate 0bit 0pps backlog 0b 0p requeues 0
qdisc mq 0: dev eth3 root
Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
rate 0bit 0pps backlog 0b 0p requeues 0
qdisc mq 0: dev eth0 root
Sent 218041403 bytes 1358829 pkt (dropped 0, overlimits 0 requeues 1)
rate 0bit 0pps backlog 0b 0p requeues 1
qdisc mq 0: dev eth1 root
Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
rate 0bit 0pps backlog 0b 0p requeues 0 
```

它给出了积压的字节和数据包。

[来源](http://timesinker.blogspot.com/2010/03/linux-networking-secrets.html)

# visual-studio-2010 - 在您的工作区问题中找不到 Visual Studio 2010 文件

> ID：14901847
> 
> 赞同：4
> 
> 时间：2013-02-15T19:21:57.820
> 
> 标签：visual-studio-2010, file, workspace

**当连接到 TFS 存储库并尝试编辑尚未在存储库中**`.sql`的本地文件时，我收到此消息。

 **> 在您的工作区中找不到项目 C:\bla\blabla\blablabla\USP_BLA.sql，或者您没有访问它的权限。未签出任何项目

如果我断开与 TFS 存储库的连接，一切都很好。如果我重新连接到 TFS 存储库，我会开始收到消息，即使只是尝试键入/保存文件。

**该文件实际上存在于我的本地文件夹中，并且我拥有相应的权限，对于那些不以为然的人。**它只是一个文本文件，无论我是否连接到存储库，我都应该能够对其进行编辑。

我今天早上在我的 Windows 7 上安装了 Windows SP1；不知道这是否是问题的原因。我们使用的是 .NET Framework 4。

知道问题是什么或如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T13:51:50.113

事实证明，问题出在我的问题中的“事实”之一，“尚未在存储库中的文件”。

TFS 存储库中已经有一个与我在本地具有相同文件名的文件，它已在一个月前被其他人签入。

只有当我尝试签入新的本地副本时，我才意识到这一点；该文件不应该在那里。

无论如何，在从 TFS 签出文件后，一切都恢复了正常；即使连接到 TFS，我也可以毫无问题地编辑/保存文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:25:47.010

尝试获取源代码的最新版本它应该可以解决问题..或者获取特定版本并允许覆盖现有文件。如果仍然无法解决，请确保该文件存在于本地目录中。

获取最新代码后不要忘记重建**

# javascript - Javascript - 通过自定义标签循环

> ID：14901848
> 
> 赞同：0
> 
> 时间：2013-02-15T19:21:58.530
> 
> 标签：javascript, html

使用 javascript，我如何循环自定义标签并显示结果而无需按下按钮？

我的JavaScript：

```
function a(){           
    var m=document.getElementsByTagName('myselect');
    for (var i = 0; i<m.length; i++)
         document.getElementById('divid').innerHTML  = m[i].value;                                      
} 
```

我的html：

```
 <myselect>
     <option> a </option>
     <option> b </option>
     <option> c </option>
   </myselect> 
```

现在，我无法获取自定义标签，也无法显示信息，除非我定义`<select>`标签而不是自定义标签。即便如此，我必须按下输入按钮，加上我的 javascript 不会循环遍历所有元素，而是循环当前选定的元素。

PS我使用myselect的原因是因为我不想在我的html上显示下拉菜单。有没有其他方法可以获取信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:37:15.063

正如我评论的那样，您不应该使用自定义标签，因为结果将不再是有效的 HTML。

其次，您使用`m[i].value`而不是`m.options[i].value`似乎给您当前选择的元素。

第三 - 不确定*获取信息*是什么意思，但似乎您正试图在 HTML 文档中保留一些信息。一种更好的方法是将其存储在 JavaScript 数组中：

```
var values = ['a', 'b', 'c']; 
```

如果你真的需要你的信息成为 HTML DOM 的一部分并且它需要是一个选择，你可以想出类似的东西

```
<select style="display: none;"> etc... 
```

那会很奇怪，但没人会看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:30:24.120

我会将您的 myselect 标签定义为普通的选择标签，并给它一个像这样的 id：

```
<select id="myselect"> 
```

然后在 body 标签中调用带有 onload 属性的函数：

```
<body onload="a()"> 
```

然后在您的 javascript 中将 getElementByTagName 更改为 getElementById ，如下所示：

```
ar m=document.getElementsById('myselect'); 
```

看看这是否适合你。我没有测试它，但这就是它的要点。我还建议使用 jQuery

# php - JQuery 完整日历日期格式

> ID：14901849
> 
> 赞同：1
> 
> 时间：2013-02-15T19:21:59.837
> 
> 标签：php, jquery, ajax, fullcalendar

我正在使用 JQuery 完整日历插件。代码：

```
 $('#mycalendar').fullCalendar({
        ** options **
        events: function(start, end, callback) {
            $.ajax({
                url: '/myloader/',
                dataType: 'json',
                data: {
                    // our hypothetical feed requires UNIX timestamps
                    start: Math.round(start.getTime() / 1000),
                    end: Math.round(end.getTime() / 1000)
                }
       *** more stuff
     }); 
```

现在在 myloader php 方面，当我尝试获取开始和结束日期时，我得到的是：

```
var_dump(date('m/d/Y H:i:s', $_GET['start']), date('m/d/Y H:i:s', $_GET['end'])); 
```

这返回：

```
string(19) "01/27/2013 06:00:00"
string(19) "03/10/2013 06:00:00" 
```

为什么是**6:00:00**？我希望它是**00:00:00**开始和**23:59:59**结束

我知道我可以使用 PHP 破解它，但是完整日历返回这样的日期是否有原因？

如果我使用 PHP，我可以使用以下方法获得所需的结果：

```
$start = strtotime(date('m/d/Y', $start) . ' 00:00:00');
$end = strtotime(date('m/d/Y', $end) . ' 23:59:59'); 
```

但我不想在 PHP 方面这样做有没有办法完整的日历来给出正确的时间？如果是时区问题，如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:27:43.223

这个怎么样：

```
var_dump(
   date('m/d/Y H:i:s', strtotime(date("m/d/Y",(int)$_GET['start'])), 
   date('m/d/Y H:i:s', strtotime(date("m/d/Y",(int)$_GET['end']))
); 
```

# algorithm - 如何实现伪随机函数

> ID：14901850
> 
> 赞同：3
> 
> 时间：2013-02-15T19:22:09.830
> 
> 标签：algorithm, random

我想生成一个随机数序列，用于为“迷宫”挑选瓷砖。每个迷宫都有一个 id，我想用那个 id 作为伪随机函数的种子。这样我就可以一遍又一遍地生成相同的迷宫，因为它是迷宫 id。最好我不想在语言中使用内置的伪随机函数，因为我无法控制算法并且它可能会因平台而异。因此，我想知道：

*   我应该如何实现自己的伪随机函数？
*   生成独立于平台的伪随机数是否可行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T19:27:53.147

对的，这是可能的。

[这](https://web.archive.org/web/20160529013225/http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)是用于噪声生成的此类算法（及其用途）的示例。

那些特定的随机函数（Noise1、Noise2、Noise3、..）使用输入参数并从那里计算伪随机值。它们的输出范围是从 0.0 到 1.0。

还有更多（就像评论中提到的那样）。

**2019 年更新**

回顾这个答案，更适合的选择是下面提到的`mersenne twister`. 或者您可以找到`xorshift`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:03:38.623

Mersenne [Twister](http://en.wikipedia.org/wiki/Mersenne_twister)可能是一个不错的选择。正如您从 wikipedia 上的伪代码中看到的那样，您可以使用您喜欢的任何内容为 RNG 播种，从而为具有该种子的任何实例生成相同的值。在您的情况下，迷宫 ID 或迷宫 ID 的哈希值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T19:27:58.303

如果您使用的是 Python，则可以通过在开头键入 import random 来使用 random 模块。然后，要使用它，你输入- var = random.randint(1000, 9999)

这为 var 提供了一个 4 位数字，可用于其 id

如果您使用的是另一种语言，则可能有类似的模块

# tsql - 从单独的日期时间值中提取日期和时间并将它们连接在一起的最简单方法是什么？

> ID：14901851
> 
> 赞同：1
> 
> 时间：2013-02-15T19:22:09.540
> 
> 标签：tsql, sap-ase

我目前正在处理一个有点奇怪的关系布局。该关系包含多个字段，其中两个，datetimeA 和 datetimeB 用于保存日期时间值。

我不确定为什么要这样设置，但是**datetimeA**用于存储所有时间分量为 00:00:00.0 的日期分量，而**datetimeB****用于**存储所有日期分量为 1970 的时间**分量**-01-01。

我正在创建一个使用此表的简单报告界面，我需要从 datetimeA 中提取日期，从 datetimeB 中提取时间并将它们加入到新的日期时间中。如果可能的话，我想在对数据库运行的查询中实现这一点。

一个理想的解决方案是类似于[datepart](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/blocks139.htm)函数，但具有“日期”和“时间”部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:46:23.730

这是 SQL Server TSQL，但日期函数在两种产品中似乎或多或少相同。我不确定 Sybase 如何处理日期文字，因此您可能需要更改它们才能使此示例正常工作：

```
declare 
    @date datetime = '2013-02-15T00:00:00', 
    @time datetime = '1970-01-01T15:15:15'

select dateadd(ss, datediff(ss, '19700101', @time), @date) 
```

# javascript - jQuery基本切换仅以一种方式工作

> ID：14901853
> 
> 赞同：1
> 
> 时间：2013-02-15T19:22:11.593
> 
> 标签：javascript, jquery, toggle

我创建了一些快速的 jQuery 切换代码：

```
$("#expander.closed").click(function(){
    console.log("opening");
    $("#expander").removeClass();
    $("#expander").addClass("open");
});
$("#expander.open").click(function(){
    console.log("closing");
    $("#expander").removeClass();
    $("#expander").addClass("closed");
}); 
```

这个想法是每次您单击类时都会在和`#expander`之间切换。`open``closed`

但是，由于某种原因，它只工作一次，从`closed`变为`open`，然后不再继续。

我不知道为什么。[这是一个 jsFiddle](http://jsfiddle.net/4u9Vn/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:27:11.187

只需使用 id 绑定它并使用[.toggleClass切换类](http://api.jquery.com/toggleClass/)

```
$("#expander").click(function(){
    $(this).toggleClass('open closed');
}); 
```

[小提琴](http://jsfiddle.net/wT4mX/)

如果您需要根据它具有的类执行其他功能，您可以像这样检查

```
$("#expander").click(function(){
    var $this = $(this);
    $this.toggleClass('open closed');
    if($this.hasClass('open')){
       // do your open code
    }else{
       // do your close code
    }   
}); 
```

[小提琴](http://jsfiddle.net/bZx8a/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:26:02.680

我想一开始，当你绑定事件时，`.closed`类不存在，所以事件没有被绑定

可能您应该将事件绑定到其他条件，或者使用`live`. 虽然已弃用

更好的方法是这样的

```
$("#expander_parent").on('click', '#expander.closed', function(){
    // Do your stuff
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T19:39:49.353

您可以执行此操作并在 if/else 条件中添加其他相关操作

**HTML：**

```
<div id="expander" class="closed">Click Me</div> 
```

**CSS：**

```
.closed {
    background-color: red;
}

.open {
    background-color: blue;
} 
```

**Javascript：**

```
$("#expander.closed").click(function (){
    if ($('#expander').attr('class') === 'closed') {
          $('#expander').attr('class', 'open');

          // Add other related functions here
    } else {
        $('#expander').attr('class', 'closed');

        // Add other related functions here
    }    
}); 
```

[http://jsfiddle.net/mCDwy/1/](http://jsfiddle.net/mCDwy/1/)

# jquery - 无限滚动的砌体 - jQuery 代码在第一页之后不起作用

> ID：14901858
> 
> 赞同：0
> 
> 时间：2013-02-15T19:22:17.027
> 
> 标签：jquery, jquery-masonry, infinite-scroll

我正在为我的项目使用 Masonry with Infinite Scroll。我的内容是通过 php 动态生成的。我在 div 中有图像，当它们（div）被点击时会做一些事情。这是我的 jQuery 代码：

```
$(document).ready(function(){
function vote(direction, media_id) {                                                                                                                                                                                                                                           
    $.get("http://"+ siteDomain +"/a/vote?type=image&mediaId="+ media_id +"&vote=" + direction, {}, function(data, textStatus) {                                                                                                                                               
        if(direction == 'up'){                                                                                                                                                                                                                                             
            var current_vote = $("#upmedia-"+ media_id +" div").text();                                                                                                                                                                                                
            $("#ico-likes-"+ media_id +" div").css({opacity: 0}).animate({opacity: 1}, 700 ).text(parseInt(current_vote)+1);                                                                                                                                               
            $("#upmedia-"+ media_id +" div").css({opacity: 0}).animate({opacity: 1}, 700 ).text(parseInt(current_vote)+1);                                                                                                                                                 
            $("#upmedia-"+ media_id +"").removeClass("voteup").addClass("hasvotedup");                                                                                                                                                                                     
        }                                                                                                                                                                                                                                                                  
    }, "json");                                                                                                                                                                                                                                                                
}                                                                                                                                                                                                                                                                              
$(".voteup").click(function() { 
    var media_id = $(this).attr("id").replace('upmedia-', '');
    vote('up', media_id);
    return false; 
}); 
```

});

上面的代码在点击 div .voteup 时执行。一切正常，但仅适用于第一页。当我通过无限滚动加载第二页并单击带有 .voteup 类的某个 div 时，什么也没有发生。我的 jquery 代码不适用于从第二页加载的所有元素。

这是我的砌体和无限滚动代码：

```
$(function(){                                                                                                                                                                                                                                                              
var $container = $(".gwrap-splash");                                                                                                                                                                                                                                   
$container.imagesLoaded( function(){                                                                                                                                                                                                                                   
    $container.masonry({                                                                                                                                                                                                                                               
        itemSelector : ".gimg-splash",                                                                                                                                                                                                                                 
        isAnimated: false,                                                                                                                                                                                                                                             
        cornerStampSelector: ".side-block-splash"                                                                                                                                                                                                                      
    });                                                                                                                                                                                                                                                                
});                                                                                                                                                                                                                                                                    
$container.infinitescroll({                                                                                                                                                                                                                                            
    navSelector  : ".public-navigation",                                                                                                                                                                                                                               
    nextSelector : ".public-navigation-next",                                                                                                                                                                                                                          
    itemSelector : ".gimg-splash",                                                                                                                                                                                                                                     
    bufferPx     : 20,                                                                                                                                                                                                                                                 
    loading: {                                                                                                                                                                                                                                                         
        finishedMsg: "No more pages to load.",                                                                                                                                                                                                                         
        img: "'.STATIC_URL.'/i/default/loader-big.gif"                                                                                                                                                                                                                 
    }                                                                                                                                                                                                                                                                  
},                                                                                                                                                                                                                                                                     
function( newElements ) {                                                                                                                                                                                                                                              
    var $newElems = $( newElements ).css({ opacity: 0 });                                                                                                                                                                                                              
    $newElems.imagesLoaded(function(){                                                                                                                                                                                                                                 
        $newElems.animate({ opacity: 1 });                                                                                                                                                                                                                             
        $container.masonry( \'appended\', $newElems, true );                                                                                                                                                                                                           
    });                                                                                                                                                                                                                                                                
}); 
```

});

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:25:06.487

我已经能够解决这个问题。目标是在`function vote()`里面添加`$container.infinitescroll()`

# java - 将心率监测器连接到 Windows PC Java 应用程序

> ID：14901862
> 
> 赞同：5
> 
> 时间：2013-02-15T19:22:26.033
> 
> 标签：java, windows, bluetooth, heartbeat

我目前正在从事一个论文项目，该项目需要我的 java 程序来跟踪用户当前的心率。现在，我的问题是我似乎无法找到能够连接到 Windows PC 上运行的 java 程序的任何类型的心率监测器。如果有人对任何可以做到这一点的心率监测器有任何建议，我将不胜感激！

我目前正在尝试使用 Polar H7 蓝牙智能心率监测器，我正试图让它与我的电脑连接，该电脑有一个蓝牙 4.0 适配器（蓝牙智能），但它似乎会导致死胡同。

再次感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T14:21:17.280

用他们的 GUI 软件试试 BlueGiga 智能加密狗。

# navigation - 如何添加显示：块到导航栏而不破坏显示：内联？

> ID：14901864
> 
> 赞同：0
> 
> 时间：2013-02-15T19:22:28.577
> 
> 标签：navigation, nav, css

我正在努力让我的导航栏正常工作，一切看起来但是，但我希望文本周围的整个块区域都是可点击的，而不仅仅是文本本身。

一切看起来都不错，但是当我将 display: 块添加到 'a' 元素时，内联中断并且我得到一个导航项列表。

希望有人可以帮助我，这似乎很容易，但我已经为此苦苦挣扎了几天。

即，这样做会破坏它：

```
nav li a{
    display: block;
    color: #000;
    font-size: 12px;
    text-transform: uppercase;
    text-decoration: none;
} 
```

[http://jsfiddle.net/9zvHa/](http://jsfiddle.net/9zvHa/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:25:26.570

为您的锚点添加一些填充，使它们更宽且更易于点击。

例如：

```
nav li a{
    color: #000;
    font-size: 12px;
    text-transform: uppercase;
    text-decoration: none;
    padding: 10px 30px;
} 
```

# c# - 使用 C# 或 MonoTouch 格式化以显示月份中的星期几

> ID：14901866
> 
> 赞同：0
> 
> 时间：2013-02-15T19:22:32.900
> 
> 标签：c#, xamarin.ios, date-format

我正在尝试在 MonoTouch 项目中格式化日期以显示如下字符串：

```
 1st Saturday of the month, February 2, 2013 
```

但我一直无法找到用 C# 格式化它的方法。

我以前可以通过使用如下格式化程序在 Objective C 中做到这一点：

```
 [dateFormatter setDateFormat:@"F'st' EEEE 'of the month', MMMM d, yyyy"]; 
```

并将“2st”替换为“2nd”，将“3st”替换为“3rd”等，但我一直无法找到“F”字符的替代品。

有没有办法在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:29:15.350

类似的东西`DateTime.Now.Day / 7 + 1`会给你那个数字，然后你添加字符串的其余部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:33:39.560

我不知道有任何标准格式说明符可以做到这一点，但计算起来应该相当简单：

```
DateTime date = DateTime.Now;

int day = date.Day;

int ordinal = (day / 7) + 1;

// if it's the first occurrence, ordinal will be 1, 2nd will be 2, etc 
```

（我没有通过编译器运行它来检查，但我认为基本的想法是有效的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:52:19.317

之前的两个答案很接近，但在同一个地方都有错误。这是我用来获取该月一周中某天发生的代码：

```
int dowin = (SelectedDate.Day - 1) / 7 + 1;
switch(dowin){
    case 1:{
        return "1st" + dateString;
    }
    case 2:{
        return "2nd" + dateString;
    }
    case 3:{
        return "3rd" + dateString;
    }
    case 4:{
        return "4th" + dateString;
    }
    case 5:{
        return "5th" + dateString;
    }
} 
```

# git - git：将下游本地跟踪分支合并到我的本地上游 master

> ID：14901872
> 
> 赞同：1
> 
> 时间：2013-02-15T19:23:12.610
> 
> 标签：git

**背景：**

我是一个小型项目的上游集成商。我从三个人中提取到本地跟踪分支，查看差异，并将它们重新定位到我的主人。然后我把我的主人推到一些生活区。

**工作流程：**

1.  我收到电子邮件说他们提交了一些新代码并使用我的仓库执行了 git pull。
2.  我检查了我主人的一些工作。现在它与他们的回购不同步。
3.  我结帐到他们当地的跟踪分支。
4.  `git pull their_branch`
5.  结帐我的主人
6.  如果 their_branch..master 之间没有差异，那么我将该分支重新设置为 master。但是，在第 2 步中，我签入了一些代码，因此存在差异。

**问题：**

在第 3 步，我想将 their_branch 合并到我的 master 中，但他们还没有 git pull，所以我的更改还没有在跟踪的分支中。我可以只合并本地跟踪分支，还是将尚未在跟踪分支中的主更改合并到我的主分支中？我总是可以要求然后执行 git pull，然后我在本地跟踪分支中执行 git pull。谁可以给我解释一下这个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:44:46.600

是的，您会将他们的更改合并到您当前的主分支中（与您的更改一起），因为在他们完成`git pull`. 合并会将您的更改与其更改结合起来。

就像您说的那样，您可以`git pull`先拥有它们，然后再将它们的更改合并。

# css - 使用其他浏览器后，Web 字体出现锯齿状

> ID：14901873
> 
> 赞同：0
> 
> 时间：2013-02-15T19:23:15.227
> 
> 标签：css, firefox, fonts, font-face

我知道关于“锯齿状”或“像素化”字体问题还有很多其他问题，但至少对我来说，这是奇怪的事情......

在本地构建站点并在 Firefox 中进行测试后，从 Google Webfonts 加载的字体看起来很棒。几乎是 Photoshop 的质量。直到我在其他浏览器（例如 IE、Opera、Chrome 和 Safari）中测试了该站点后，当我返回 Firefox 时，字体才开始出现锯齿状。

我想知道当我加载另一个浏览器时，它是否改变了我电脑上某处的设置。我有一台装有 Windows 7 的 AMD Advent Monza S150。

我也弄乱了 ClearType 选项，但仍然没有运气。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:28:10.953

更多的是在黑暗中拍摄，而不是真正的答案，但是......可能是您在您的网站上使用的字体安装在您的 PC 上的一个原因。谷歌网络字体和一般的网络字体通常具有仅在某些字体大小下看起来不错的缺点。

# asp.net - 如果在代码中使用了 .Expand()，则停止执行 TreeNodeExpanded 事件处理程序

> ID：14901874
> 
> 赞同：1
> 
> 时间：2013-02-15T19:23:22.720
> 
> 标签：asp.net, vb.net, treeview, handler

在 ASP.Net TreeView 上，我们将其结构如下：

```
+ Maintenance
+ Parents
+ Students
+ Financial 
```

用户可以通过单击 (+) 符号来展开 TreeView 节点。此 TreeView 也从代码隐藏文件中扩展。

在代码隐藏中是一个 TreeNodeExpanded 事件处理程序，它在用户单击 (+) 符号时执行。

在代码隐藏的其他子例程之一中，有一个 .Expand()，但这会导致 TreeNodeExpanded 事件处理程序执行。我们不希望在使用 .Expand() 使用代码扩展节点时执行该事件处理程序。例如：用户点击财务（不是 + 号），这也恰好是一个调用财务网页的链接。当该页面加载时，会有一个扩展 TreeView 节点的代码隐藏文件，就像用户单击 (+) 号一样。此编码导致执行 TreeNodeExpanded 事件处理程序。

在这种情况下是否可以停止执行 TreeNodeExpanded 事件处理程序？我们只希望 TreeNodeExpanded 处理程序在鼠标单击 (+) 符号时执行，而不是在任何其他时间执行。

# types - (sml) 语法错误？

> ID：14901877
> 
> 赞同：0
> 
> 时间：2013-02-15T19:23:40.100
> 
> 标签：types, functional-programming, sml

我有这个函数可以检查解析器列表是否有效。我收到错误：EQUALO LPAREN FN。有什么帮助吗？

```
fun oneOf [] = fn inp => NONE
 | oneOf (p::ps) = (fn inp => case parse p inp of
       NONE => oneOf ps inp
     | SOME (v,out) => SOME (v,out)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:50:42.230

用 定义的函数`fn`可以有多种情况，就像用 定义的函数一样`fun`。所以你可以写类似`fun pat1 => exp1 | pat2 => exp2`. 这意味着当 SML 解析器`|`在第 2 行的开头看到 时，它假定它属于第`fn`1 行，而不是`fun`（因为`fn`最近才出现）。因此，当它到达 时`=`，它会感到困惑，因为它期望的是`=>`。

要解决您的问题，请`fn`用括号将第 1 行括起来。

# javascript - 在 HTML 页面之间维护一个 Javascript 变量以发送到数据库？

> ID：14901879
> 
> 赞同：2
> 
> 时间：2013-02-15T19:24:03.547
> 
> 标签：javascript, python, html, persistence, cgi

我正在为大学做一个实验，涉及计算参与者阅读一个简单网页的时间。由于实验的性质，我不能在他们访问页面之前告诉他们我正在计时，所以在下一页我需要告诉他们他们正在计时，然后提供一个选项，如果他们选择退出反对他们的数据使用 Python CGI 脚本传递到数据库。

在第一页的顶部，我有这个：

```
<script type="text/javascript" src="timing.js">
</script> 
```

在底部我有一个链接可以将它们带到下一页，但也可以停止计时器：

```
Click here when you are ready to proceed.
<button onclick="window.location = 'timer2.html'; stopTime()">Click Here</button> 
```

...在 .js 文件中，我有以下内容：

```
var sec = 0;

function takeTime()
{
    setInterval(function(){sec += 1},1000);
}

myTime = takeTime();

function stopTime()
{
clearInterval(myTime);
}

function showTime()
{
alert("Time is " + sec + " seconds.");
} 
```

当我单击链接转到第二页时，“sec”变量只是重置为 0。如果我从 .js 文件中取出声明并将其放在引用 .js 文件之前的单独脚本标记中在第一个 HTML 页面中，第二个 HTML 页面根本无法识别变量“sec”。如何存储时间，以便我可以将其发送到数据库或从第二个 HTML 页面中删除它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T19:30:56.340

一种方法是使用查询字符串。

```
<button onclick="window.location = 'timer2.html?time=' + sec">Click Here</button> 
```

`timer2.html?time=252`如果花费了 252 秒，它们将被发送到例如。然后使用[How can I get query string values in JavaScript?](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values) 在 timer2.html 上获取此值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:36:37.933

Javascript 变量不会从一个页面加载到下一个页面保持其状态，因此您将需要另一种方式来存储该信息。除了通过查询字符串传递它之外，另一种方法是 HTML5 本地存储。使用本地存储，您可以将值存储在浏览器中，这些值可从同一域中的一个页面加载到下一个页面进行检索。

例如，您的第一页：

```
var sec = 0;
localStorage.time = 0;

function takeTime()
{
    setInterval(function(){sec += 1},1000);
}

myTime = takeTime();

function stopTime()
{
    clearInterval(myTime);
    localStorage.time = sec;
}

function showTime()
{
alert("Time is " + sec + " seconds.");
} 
```

在timer2.html的某个地方：

```
var sec = localStorage.time; 
```

# .net - 使用 Linq 计算实体框架中的匹配词

> ID：14901882
> 
> 赞同：1
> 
> 时间：2013-02-15T19:24:12.010
> 
> 标签：.net, entity-framework

许多网站，尤其是零售网站，都允许您以与按价格相同的方式按“相关性”进行排序。我将假设这意味着基于您搜索的单词数量，其中有多少与数据库匹配。

例如，如果我的关系数据库有一个搜索词表，对于一个特定的产品，这 3 个词是 table、tennis、club 并且我在网站上搜索了乒乓球馆，我将有 66% 的准确率，因为 3 个匹配项中有 2 个.

我需要这个功能，但我正在使用 EF 并且不知道从哪里开始。所以，从字面上看，我追求的是 %（“准确度分数”或相关性）。

到目前为止，我很高兴展示我的代码，但老实说，我觉得在页面上扔了 70 行代码只是为了证明我已经尝试过的东西不会使任何人受益，所以如果你想要代码，我'会显示它，如果没有，任何人都可以给我任何指向谷歌的指针甚至短语吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:52:24.727

假设这是一个 SQL Server 项目，您可以从查看全文搜索/全文目录开始。将这些与`CONTAINSTABLE`or`FREETEXTTABLE`搜索一起使用将返回一个分数，该分数是相对相关性的度量，而不是百分比。从 EF 的角度来看，我最终找到了最简单的解决方案，即调用存储过程以在 EF 之外获取我的排名结果（分数和 ID），然后按 ID 从上下文中加载对象。我编写了一个半复杂的存储过程，允许我根据包含字段的相关性对结果进行加权。我在这里向我的问题发布了其中的一些内容：[Code-First Entity Framework w/ Stored Procedure returned results from complex Full-text Searches](https://stackoverflow.com/questions/14243946/code-first-entity-framework-w-stored-procedure-returning-results-from-complex-f)

# c# - 在 Windows RT 中将数据绑定到 gridView

> ID：14901884
> 
> 赞同：0
> 
> 时间：2013-02-15T19:24:13.047
> 
> 标签：c#, windows, data-binding, windows-store-apps

我正在从互联网上获取电影信息，并将它们放在一个类中。该类包含电影的标题、名称、描述和图片。我将数据作为 Json 响应，我正确解析，因此获得 List（电影列表）。现在我想将我的数据绑定到一些 gridview，比如说 Visual Studio 中给出的网格应用程序模板，但我直到现在还没有成功。有没有人有建议，如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:20:40.953

查看有关此主题的快速入门。

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh758318(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh758318(v=win.10).aspx)

此示例特别向您展示了如何使用 gridview 和语义缩放。 [http://code.msdn.microsoft.com/windowsapps/GroupedGridView-77c59e8e/view/SourceCode](http://code.msdn.microsoft.com/windowsapps/GroupedGridView-77c59e8e/view/SourceCode)

您需要做的就是正确设置绑定，然后将列表设置为 ItemSource

# python - 创建对象时如何定义字段？

> ID：14901887
> 
> 赞同：0
> 
> 时间：2013-02-15T19:24:22.267
> 
> 标签：python, django

我正在创建一个像这样的对象，

```
order = Order.objects.create(created_by=anon_user,modified_by=anon_user) 
```

我收到一个错误`orders_order.phone may not be NULL`。`phone`是属于该`Order`模型的众多领域之一。

我在创建对象时（逻辑上）未能包含该`phone`字段。`Order`

有什么建议么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:55:10.450

Django 现在要求您的电话字段不为空。这也意味着您不能传递 phone=None，因此如果您传递给 Order 对象的 phone 变量是 None，它将失败。

您的选择是：

1.  在模型上设置默认值
2.  在模型上允许 null
3.  在创建时将非空值传递给模型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:03:31.280

根据您的问题，该模型要求电话号码在创建时存在。

你可以做的事情。

1.  `phone_number = models.PhoneField(null=True, blank=True)`
2.  `phone_number = models.PhoneField(default='6132760547')`

那些模型更改应该首先帮助的是说该字段可以是空白的，因为包含一个`empty`或`None`

其次是如果没有传递默认值就是那个数字。

# matlab - 如何使虚线/虚线在等高线图中看起来逼真 - Matlab

> ID：14901889
> 
> 赞同：1
> 
> 时间：2013-02-15T19:25:01.203
> 
> 标签：matlab, matlab-figure, contour

Matlab 图形中的点/虚线在图形窗口中看起来还不错，但是在打印时，它们会失去分辨率并且看起来非常糟糕。见下图。如何使虚线/虚线看起来与屏幕上一模一样？

![等高线上带有注释的示例等高线图](../Images/0d29b4babf65008747a294f77bcb6ff8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T23:28:55.490

我遇到了这个问题，并在另一个论坛上找到了解决方案。有几个选项。如果您不介意导出到位图，您可以使用替代渲染器（OpenGL 或 zbuffer），但对我来说，这不是一个可接受的解决方案。相反，您可以提取轮廓信息并绘制虚线。我欠这个解决方案的原始海报，但不记得我在哪里得到它。

```
[c1,h1] = contour(data, Contours,'--k')

% Take all the info from the contourline output argument:
i0 = 1;
i2 = 1;       
while i0 <  length(c1)
    i1 = i0+[1:c1(2,i0)];
    zLevel(i2) = c1(1,i0);
    hold on
    % And plot it with dashed lines:
    ph(i2) = plot(c1(1,i1),c1(2,i1),'k--','linewidth',.5); 
    i0 = i1(end)+1;
    i2 = i2+1;
end
% Scrap the contourlines:
delete(h1) 
```

希望有帮助！-D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:36:44.563

尝试使用FEX 中的[export_fig](http://www.mathworks.com/matlabcentral/fileexchange/23629-exportfig)，它应该可以解决该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T01:10:14.770

我会使用 Loren 从她关于[制作漂亮图表](http://blogs.mathworks.com/loren/2007/12/11/making-pretty-graphs/)的优秀帖子中建议的方法。它使用她编写的一个函数，该函数进入输出 eps 文件，并调整虚线的定义。`fixPSlinestyle`在[FEX](http://www.mathworks.com/matlabcentral/fileexchange/17928)上找到。

```
figure('renderer','painters')
hold on
plot([1 2 4],[2 3 7],'r-','linewidth',13)
plot([1 2 4],[2.5 3.5 7.5],'b:','linewidth',13)

print(gcf,'-depsc2','withoutedit.eps')
fixPSlinestyle('withoutedit.eps','withedit.eps') 
```

第一个图（withoutedit.eps）显示在左侧，调整 eps 线条样式后显示在右侧（withedit.eps）：

![在此处输入图像描述](../Images/f4b4e9d4ce645c9af72645a3ff991100.png)

我喜欢这个解决方案，因为您没有将完全控制权交给函数 - 您控制图形的导出（通过`print`命令），但您使用函数来调整最终的 eps 文件。

# windows-8 - Metro 应用程序中的 Google 地球插件

> ID：14901900
> 
> 赞同：2
> 
> 时间：2013-02-15T19:25:27.920
> 
> 标签：windows-8, microsoft-metro, winrt-xaml, google-earth-plugin

我一直在谷歌搜索，但没有找到明确的答案。我能否或将能够将 Google 地球插件嵌入到自定义 Windows 8 Metro 应用程序中？

我们当前的应用程序使用 WinForms WebBrowser 来显示插件，我知道 Metro 应用程序不支持 WinForms。是的，我们可以在 Windows 8 上将我们当前的应用程序作为桌面应用程序运行，但我对 Metro 应用程序感兴趣。

看起来 XAML WebView 可能是我们显示插件所需的，但我读过的一些内容表明该插件无法在 Metro 应用程序中工作，因为浏览是“无插件的”。对于自定义 Metro 应用程序有任何确认/进一步解释吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:37:49.667

这是不可能的，因为...

> ...新的 Windows UI 浏览体验不支持 Microsoft ActiveX 或任何其他二进制可扩展性。

请参阅[插件和 ActiveX 控件 (Windows)](http://msdn.microsoft.com/en-gb/library/ie/hh920753%28v=vs.85%29.aspx)

这是因为“地铁”版 IE 的整体理念是它应该只显示基于标准的、无插件的网站。

[您可以在本文档](http://msdn.microsoft.com/en-us/library/ie/hh968248%28v=vs.85%29.aspx)中阅读更多关于这背后的原因以及对新浏览器的更完整说明。

# java - 如何将 c++ 双打从一个系统发送到另一个发送方：Winsock 接收方：Java

> ID：14901902
> 
> 赞同：0
> 
> 时间：2013-02-15T19:25:45.870
> 
> 标签：java, c, network-programming, double, htonl

发送C端

```
double tmp = htonl(anydouble);
send(socket, (char *) &tmp, sizeof(tmp), 0); 
```

在 Java 方面，我将网络数据读入 char[8]

执行转换回双倍的正确方法是什么？是否可以简单地发送一个字符串并将其解析回双倍？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:28:01.433

这应该有效。

```
char[] sentDouble = readBytes(); // get your bytes char[8]
String asString = new String(sentDouble); // make a string out of it
double myDouble = Double.parseDouble(asString); // parse it into a double 
```

使用 byte[] 你可以做

```
import java.nio.ByteBuffer;

public static double toDouble(byte[] bytes) {
    return ByteBuffer.wrap(bytes).getDouble();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:30:37.527

我建议使用 Google 协议缓冲区：[https](https://developers.google.com/protocol-buffers/docs/overview) ://developers.google.com/protocol-buffers/docs/overview它具有 C 和 Java 以及许多其他语言的库，例如 Python，稍后您可能会发现它们很有用。它高效、健壮、会处理字节顺序等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T20:05:27.660

您正在将 double 重新解释为 long。这不会是便携式的。以下是一些替代方案：

*   你真的需要使用浮点值吗？您可以将您的值表示为整数（例如毫秒而不是秒）吗？
*   将双精度值编码为字符串（例如 sprintf 和 Double.parseDouble）
*   使用 frexp 提取尾数和指数并作为整数发送，然后使用 Double.longBitsToDouble 在 Java 中转换回

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T19:46:34.740

不需要`String`开销。将字节组装成`long`第一个，然后使用[Double 的静态 longBitsToDouble](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html)方法。

```
// The bit pattern for the double "1.0", assuming most signficant bit first in array.
char[] charArray = new char[] {0x3F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
long bytesAsLong = 0L;
for (int i = 0; i < 8; i++)
{
   bytesAsLong |= ((long) charArray[i] << (56 - 8*i));
}
double value = Double.longBitsToDouble(bytesAsLong);
System.out.println(value);  // prints "1.0" 
```

# c - 我什么时候可以在 C 中省略花括号？

> ID：14901919
> 
> 赞同：22
> 
> 时间：2013-02-15T19:26:34.740
> 
> 标签：c

我几乎可以肯定以前有人问过这个问题，但我在任何地方都找不到答案。

我什么时候可以在 C 中省略花括号？我以前看过无括号的`return`陈述，例如

```
if (condition)
  return 5; 
```

但这似乎并不总是适用于所有语句，即在声明方法时。

*编辑*：

大括号省略的规则与 Java 中的规则相同吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-15T21:39:06.997

唯一可以省略括号的地方是`if-else`, `for`, `while`, 或`do-while`语句的主体，如果主体由单个语句组成：

```
if (cond)
  do_something();

for (;;)
  do_something();

while(condition)
  do_something();

do 
  do_something();
while(condition); 
```

但是，请注意，根据语法，上述每个示例都算作单个语句；这意味着你可以写类似

```
if (cond1)
  if (cond2)
    do_something(); 
```

这是完全合法的；`if (cond2) do_something();`简化为单个语句。所以，就此而言，确实`if (cond1) if (cond2) do_something();`如此，所以你可以通过类似的东西进一步陷入疯狂

```
for (i=0; i < N; i++)
  if (cond1)
    if (cond2)
      while (cond3)
        for (j=0; j < M; j++)
          do_something(); 
```

不要那样做。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-15T19:59:31.680

如果您查看 C 语法，则有许多上下文需要*statement*，该术语由语法本身定义。

在任何这些上下文中，您可以使用的一种语句形式是*复合语句*，它由一个左大括号`{`、一个零个或多个声明和/或语句的序列以及一个右大括号组成`}`。（在 C90 中，复合语句中的所有声明必须在所有语句之前；C99 删除了该限制。）

*函数定义*特别需要复合*语句*，而不仅仅是任何类型的语句。（我相当确定这是复合语句是您可以使用的唯一一种语句的唯一情况）。如果没有这个限制，你可以写：

```
void say_hello(void) printf("Hello, world\n"); 
```

但是由于大多数函数定义都包含多个声明和/或语句，因此允许这样做并没有太大的优势。

还有一个单独的问题：什么时候*应该*省略大括号。在我个人看来，答案是“几乎没有”。这个：

```
if (condition)
     statement; 
```

是完全合法的，但是：

```
if (condition) {
    statement;
} 
```

恕我直言，读起来更好，更容易维护（如果我想添加第二条语句，大括号已经在那里）。这是我从 Perl 中学到的一个习惯，在所有这些情况下都需要大括号。

唯一一次我会省略大括号是当整个 if 语句或类似的东西适合单行时，这样做会使代码更易于阅读，*并且*我不太可能希望向每个语句添加更多语句`if`：

```
if (cond1) puts("cond1");
if (cond2) puts("cond2");
if (cond3) puts("cond3");
/* ... */ 
```

我发现这种情况相当罕见。即便如此，我仍然会考虑添加大括号：

```
if (cond1) { puts("cond1"); }
if (cond2) { puts("cond2"); }
if (cond3) { puts("cond3"); }
/* ... */ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T19:29:51.240

> 但这似乎并不总是适用于所有陈述。

具体来说？当需要单个语句时，它是完全有效的。循环、`if`语句等都需要一个语句，它要么是一个块，要么是一个没有包含在块中的单个语句。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T19:30:52.773

一个例子：

```
int a[2][2] = {{1, 2}, {3, 4}}; 
```

您可以使用有效的等效形式：

```
int a[2][2] = {1, 2, 3, 4}; 
```

一些冗长的编译器可能会发出警告，但它是有效的。

请注意，对于`if`语句（对于`while`，`for`语句，... 相同），`{}`不会省略。他们只是没有被要求。该`if`语句具有以下语法：

`if (expression) statement`

如果你想要一个多语句而不是单个语句，你可以使用一个被包围的复合语句`{}`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-15T19:40:18.087

当您想将多个语句或表达式组合为一个时，您主要需要花括号，例如：

```
{
  x = 1;
  y = 2;
} 
```

因此，如果您将上述内容放在`if`或`else`大括号中的整个内容将作为一个整体执行，而如果您省略大括号，则只有第一个（`x = 1;`在这种情况下）将用作`if`or的一部分`else`。

您通常还可以将它们用于`switch()`：

```
switch (x)
{
case 1:
  // do smth
  break;
case 2:
  // do smth else
  break;
} 
```

您通常需要将它们与以下`do-while`语句一起使用：

```
do
{
  printf("%d\n", x);
  x++;
} while (x < 10); 
```

当您想在代码中间定义和使用临时变量时，您需要使用 C89 编译器：

```
int main(void)
{
  puts("Hello World!");
  {
    int x;
    for (x = 0; x < 10; x++)
      printf("%d\n", x);
  }
  return 0;
} 
```

您可以使用它们来开始和结束函数体、结构/联合定义、枚举定义、结构/联合/数组的初始化，例如：

```
void blah(void)
{
}

enum e
{
  e1 = 1,
  e2 = 2
};

struct s
{
  int foo;
  int bar;
} s = { 1, 2 };

int a[3] = { 1, 2, 3 }; 
```

您有时可以在初始化时省略它们，例如：

```
char str2[] = { "abc" };
char str1[] = "abc"; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-15T19:33:28.283

当您正在执行单个语句时，您可以省略它们：

```
for(...)
 printf("brackets can be omited here");

if(...)
 printf("brackets can be omited here");
else
 printf("brackets can be omited here too"); 
```

等等。你可以随时添加它们，它永远不会伤害并有助于澄清范围，但你很安全。我能想到的唯一“捕获”是如果您尝试在该范围内进行声明（顺便说一句没用）：

```
if(...)
  int a = 5; 
```

这将导致错误，但那是因为您可以执行没有大括号的单个*语句，而不是**声明*。重要区别。

从技术上讲，如果它们与运算符连接，您甚至可以在不使用括号的情况下执行**多个**`,`操作......不是我建议这样做，只是值得注意：

```
if(...)
    value++, printf("updated value with brackets"); 
```

对于您的编辑，您可以在[java 规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.9)中看到规则是相同的。我专门链接到该`if`部分，但您可以在`if`它预期的声明之后看到，因此您可以跳过大括号。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-15T19:34:16.593

任何时候都有一个多行的块（将行计数为带有 ; 的单个语句）

**例子：**

```
for (i = 0; i < j; i++ ) 
   foo(i);

while (1) 
   foo();

if( bool )
   foo();

void cheese()
   printf("CHEESE"); 
```

; 之后的所有内容 在上面的几行中，就像有 {} 一样，不算在块的“内部”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-15T20:00:40.010

如果有疑问，请使用大括号。它们不会“花费”任何额外费用[除非您绝对错误地使用它们]。

一个相当基本的规则是“如果你在同一个缩进中有多个分号，你应该有大括号”。这并不完全那么简单，但作为“一个没有如果、但是或其他并发症的句子”，它必须这样做。

是的，基于 C 语法的 Java 具有相同的基本规则 - Java 与 C 或 C++ 不同的地方可能存在一些奇怪之处，但这是不寻常/奇怪的事情，而不是您在编写典型代码时通常会遇到的事情 [I没有做过太多的java，所以我不能说我找到了它们，但我很确定存在一些差异——毕竟它们是不同的语言]。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-18T21:04:31.487

从我刚刚回答的另一篇帖子中复制我自己的答案；显然可以使用没有花括号的 for 循环，并且实际上不离开括号！

```
#include <stdio.h>
int
 main(){
    for(int i=0; i<10;i++,printf("%d ",i),printf("%d\n",i));
 return 0;
} 
```

1 ... 10

1 ... 10

希望任何人都觉得这很有用！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-28T12:41:43.903

以下似乎有点棘手：

```
if (...)

        printf("I'm conditional\n"); 
```

我猜 C 预处理器会处理空行，所以这个语句很好。当然是非常糟糕的做法。

# .net - 404 关于外部组件中的控制器

> ID：14901920
> 
> 赞同：14
> 
> 时间：2013-02-15T19:26:37.080
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, assemblies

我在我的 Asp.Net MVC 4 项目中无法解决 404 响应。它内置于针对 4.5 的 VS2012 中。

我已将预编译的视图和控制器内置到独立的 DLL 中。我能够动态加载 DLL 并从我的核心项目中检查它们，甚至调用它们的方法；但是，似乎 MVC 框架不知道控制器。我在这里很近，但缺少一些东西。

**控制器和视图的背景**

控制器构建在独立的 MVC 项目中，并继承自`Controller`. 那里没有什么太有趣的事情发生。视图使用 RazorGenerator 并成为项目中的类。

项目的输出是一个正确包含控制器和视图的 DLL。

`IPlugin`DLL在库中的一个单独的类（不是控制器的一部分）中实现了一个特定的接口，我们称之为它。

**加载 DLL**

在 Visual Studio 中以管理员身份运行，我编译了托管在 IIS 下的应用程序。构建项目后，我将插件 DLL 放入我的“插件”目录。没有调试（这在以后变得很重要），我打开 IE 并导航到该站点。 *请注意，此时应用程序已构建，但从未运行，因此将触发启动事件。如果我回收应用程序池，这里的一切仍然是一致的。*

我有一个`Startup`有两个方法的类，`PreStart`并分别使用和`PostStart`调用这些方法。`WebActivator.PreApplicationStartMethod``WebActivator.PostApplicationStartMethod`

`PreStart`是我执行以下操作的地方：

*   获取我的“插件”目录中所有插件 DLL 的列表
*   将所有插件复制到`AppDomain.CurrentDomain.DynamicDirectory`
*   加载类型...如果它包含一个`IPlugin`I 然后
    *   将程序集添加到 BuildManager
    *   在实现IPlugin的类上调用一些方法

在“PostStart”中，我执行了这段代码（基于来自 RazorGenerator.Mvc 的代码）：

```
foreach (var assembly in Modules.Select(m=>m.Value))
{
    var engine = new PrecompiledMvcEngine(assembly)
    {
        UsePhysicalViewsIfNewer = HttpContext.Current.Request.IsLocal
    };

    ViewEngines.Engines.Insert(0, engine);
    VirtualPathFactoryManager.RegisterVirtualPathFactory(engine);
} 
```

`Modules`在这种情况下是一个键/值对，其中的值是加载的程序集。这段代码的目的是通过为每个知道如何解析视图的程序集添加一个视图引擎来确保 MVC 知道视图（这是 RazorGenerator 的一部分）。

**我怎么知道我很接近（但显然缺少雪茄）**

`IPlugin`定义了一个名为`RegisterRoutes`where 的方法，你猜对了，为实现接口的人注册路由。我调用此方法`PreStart`并添加路由 - 我已验证这些存在于我的路由表中。例如，在我的插件中定义的路由上，通过在 期间动态调用方法创建，`PreStart`在检查我的路由时，我看到这样的东西作为 DataToken：

```
Namespaces = Plugin.Name.Controllers 
```

因此，路由已注册，程序集已加载，我已验证 DLL 已正确复制到 AppDomain 的 DynamicDirectory。我能够调用在运行时动态加载的类的成员。但是当我导航到与路由匹配的 URL 时，**我得到一个 404**。这*不是*“找不到视图”的 YSOD，它更像是根本找不到控制器。

**这是让我感到困惑的部分**：如果此时不做任何事情，我返回 Visual Studio 并按 F5 ...一切正常。

就像 Visual Studio 以某种我无法识别的方式意识到控制器，而 MVC 框架正在接受它。

**最后，一个问题**

我错过了什么，如何让 MVC 框架了解我的控制器？

嘿，在这一点上，如果你还在读这个，谢谢。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T16:29:03.907

原来这是 Asp.Net 本身的一个错误。

在与 Asp.Net 团队的 Eilon Lipton 讨论了这个问题后，认为这是 MVC 框架中的一些问题，Eilon 和几个团队成员深入研究了这些问题，发现在这次对话中错误处于较低级别：[http： //aspnetwebstack.codeplex.com/discussions/403529](http://aspnetwebstack.codeplex.com/discussions/403529)

他们还提出了一种解决方法，其中包括在调用`BuildManager`之后的另一个调用`AddReferencedAssembly`，我通过以下代码实现了该调用：

```
 // Add the plugin as a reference to the application
    BuildManager.AddReferencedAssembly(assembly);
    BuildManager.AddCompilationDependency(assembly.FullName); 
```

这允许您在应用程序前的初始化阶段在启动时添加额外的控制器/编译视图。我现在正在做的是遍历我的插件目录中的 DLL 列表并将它们推送到`BuildManager`如上。

这里唯一的限制是您不能*删除*程序集或动态清除缓存。我发现这样做的唯一方法是将以前未知的程序集添加到引用的程序集和编译依赖项中。我正在尝试在预应用程序初始化期间动态发出一个新程序集，这样我就可以始终有效地清除缓存并通过伪造一个新程序集来删除以前包含的插件。

希望这对其他人有帮助。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:49:25.813

看起来像这个问题：

> MVC 使用视图引擎的程序集限定类型名称来消除来自不同视图引擎的视图缓存条目的歧义。**因此，不可能有多个 PrecompiledMvc​​Engine 对象（就像您在多个程序集中有预编译视图时一样）**。该问题可以通过为每个程序集从 PrecompiledMvc​​Engine 创建不同的派生类来解决。或者通过从程序集中创建一个使用某种类型参数化的单个泛型派生类。

文章在[这里](http://razorgenerator.codeplex.com/wikipage?title=Precompiled%20MVC%20Views)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:21:14.577

@MisterJames，看看这个：

[Asp.Net Mvc 可插拔应用程序](http://nileshhirapra.blogspot.sg/2012/02/aspnet-mvc-pluggable-application.html)

我希望它有用。

# sql - 任何人都可以破译这个 SQL 堆栈跟踪吗？

> ID：14901924
> 
> 赞同：0
> 
> 时间：2013-02-15T19:26:47.353
> 
> 标签：sql, exception, grails, driver, stack-trace

我有一个对我没有任何意义的堆栈跟踪。我认为它的本质是“找不到数据源名称并且没有指定默认驱动程序”部分，但是我已经注册了一个驱动程序并且我没有使用数据源。如果有帮助，我正在使用 SQL Anywhere 10 驱动程序 (ianywhere)。有没有人有任何想法？

```
2013-02-15 13:16:58,076 [http-apr-80-exec-1] ERROR errors.GrailsExceptionResolver  - SQLException occurred when processing request: [GET] /Booklist/booklist/show
[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified. Stacktrace follows:
java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified
    at ianywhere.ml.jdbcodbc.jdbc3.IDriver.connect(IDriver.java:490)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:243)
    at booklist.Book.getClassesWithBooks(Book.groovy:22)
    at booklist.BooklistController.show(BooklistController.groovy:11)
    at grails.plugin.cache.web.filter.PageFragmentCachingFilter.doFilter(PageFragmentCachingFilter.java:195)
    at grails.plugin.cache.web.filter.AbstractFilter.doFilter(AbstractFilter.java:63)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

编辑：问题是，这在我的本地开发机器上工作得很好，但是一旦我们构建一个 War 并将它放在 tomcat 服务器上，这个可爱的错误就会弹出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:36:28.687

我认为痕迹很清楚。查看第一条错误信息：

```
[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified. Stacktrace follows:
java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified 
```

未正确设置 ODBC 驱动程序。它指向一个不存在的数据库。或者，也许是一个不存在的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:38:58.743

这似乎是一个`Grails`配置问题。检查您正在构建战争的环境（开发、生产）以及 DataSource.groovy 中的相关配置。[Grails 文档](http://grails.org/doc/latest/guide/conf.html#dataSourcesAndEnvironments)

# java - 如何使用 Selenium 和 Java 在网页上查找文本并获取其 XPath 或 CSS

> ID：14901927
> 
> 赞同：0
> 
> 时间：2013-02-15T19:26:57.710
> 
> 标签：java, css, xpath, selenium

有一个页面列出了动态表上的项目。桌子上的顺序和物品数量随机变化。

我想根据文本“Itemx”找到其中一项“Itemx”，然后在代码的另一部分获取并使用它的 XPath 或 CSS。

我可以根据文本“Itemx”找到元素

```
driver.findElement(By.cssSelector("BODY")).getText().matches("^[\\s\\S]*Itemx[\\s\\S]*$"); 
```

但是我怎样才能得到它的 XPath 或 CSS？

我似乎在网上找不到任何东西。那里的所有内容都向您展示了如何使用 XPath 验证或查找文本。对我来说恰恰相反。我有文本，我想找到它的 XPath。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:43:12.223

XPath 和 CSS 选择器都是任意的。在一般情况下，对此没有好的答案。

使用 CSS 选择器选择 first `c`in`<a><b></b><c></c><c></c></a>`可能是`c:first-of-type`, or `a > c:nth-child(2)`, or `a c:first-of-type`, or `a > b + c`, 或其他一些东西。与 XPath 类似，有许多表示它的方法。如果更改标记，会发生什么？

这完全取决于上下文、所需的稳定性、误报或误报是否更糟（你可以让它非常严格，这样如果标记发生变化，它可能会中断，或者你可以让它非常松，这样如果标记发生变化你可能会选择错误的东西）和做这件事的人的心血来潮。（我会选择以上哪种方式？Eeny，meeny，miny，mo...）

但是，如果您只关心文档的当前状态并且不需要弹性，那么首先考虑您是否真的需要这样的选择器。您可以改为传递 DOM 元素。但是，如果您想唯一标识一个元素，那么遍历 DOM 树将是一种相当简单的方法，逐级向下移动，观察该节点是哪个子节点。你最终会得到这样的东西：

```
:root > :nth-child(3) > :nth-child(1) > :nth-child(4) 
```

丑陋，但它可能是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:55:32.133

如果您可以通过其文本识别该项目，那么您已经拥有了一个 XPath：`//*[contains(., 'Itemx')`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T23:01:35.027

Firefox 的萤火虫有一个名为 Firepath 的附加组件。基本上安装它后，您可以右键单击页面上的任何元素并选择：inspect in FirePath。如果您尝试修改 XPATH 或 CSS SELECTOR 路径更短等，您也可以在这里运行您的测试。

# c++ - Allegro 5 在调用 al_clear_to_color(ALLEGRO_COLOR) 时崩溃

> ID：14901930
> 
> 赞同：11
> 
> 时间：2013-02-15T19:27:16.867
> 
> 标签：c++, c, runtime-error, allegro, allegro5

我从 Allegro 5 开始，但很快我就陷入了我正在编写的第二个类似 hello-world 的程序中。经过一番调试，我得出结论，程序在调用函数时崩溃了`al_clear_to_color(ALLEGRO_COLOR)`。我尝试过静态和动态链接快板，但问题仍然存在。我完全迷路了。

这是代码：

```
#include <cstdio>
#include <allegro5/allegro.h>

int main() {
    ALLEGRO_DISPLAY         *display;
    ALLEGRO_KEYBOARD_STATE  kbState;

    if(!al_init())
        return 0;

    if(!al_install_keyboard())
        return 0;

    display = al_create_display(800, 600);
    if(!display)
        return 0;

    do {
        al_get_keyboard_state(&kbState);

        al_clear_to_color(al_map_rgb(255, 255, 255));

        al_flip_display();

        al_rest(0.5);
    } while(!al_key_down(&kbState, ALLEGRO_KEY_ESCAPE));

    al_destroy_display(display);

    return 0;
} 
```

编辑：

换行

```
al_clear_to_color(al_map_rgb(255, 255, 255)); 
```

为线

```
al_clear_to_color(tempClearColor); 
```

声明

```
ALLEGRO_COLOR tempClearColor = al_map_rgb(255, 255, 255); 
```

在循环开始之前，它确实可以工作，但是当函数崩溃时

```
al_destroy_display(display); 
```

叫做。

调试器返回消息：

> 读取 C:\Program Files (x86)\CodeBlocks\MinGW\bin\libstdc++-6.dll 的共享库符号时出错：
> 程序收到信号 SIGSEGV，分段错误。

# qt - 是否可以在 Qt 样式表中指定不仅仅是“常规”和“粗体”版本的字体？

> ID：14901933
> 
> 赞同：11
> 
> 时间：2013-02-15T19:27:30.790
> 
> 标签：qt, fonts, stylesheet, qtstylesheets

我有一种字体，它在一个系列中具有多种字体粗细（超轻、轻、常规、半粗体、粗体、黑色）。在这个例子中，我使用了免费的 Google Webfont Source Sans Pro，但是对于任何具有多个权重的字体（例如 Avenir Next，Mac OS 10.8 中的系统字体），我都遇到了同样的问题。在 Qt 样式表中，如果我指定：

```
QLabel
{
    font-family: Source Sans Pro;
    font-size:   24px;
} 
```

我得到了字体的“常规”样式。如果我指定：

```
QLabel
{
    font-family: Source Sans Pro;
    font-weight: bold;
    font-size:   24px;
} 
```

我得到了字体的粗体版本。除了常规或粗体之外，我想不出任何组合可以给我任何东西。我尝试将权重直接放在字体系列中（例如，字体系列：Source Sans Pro Light;），我尝试在字体重量：说明符中使用 Light、Semibold 等，我还尝试使用数字等价物（[Qt 文档](http://qt-project.org/doc/qt-4.8/qfont.html#Weight-enum)说它们应该是从 0 到 99 的值，而不是 CSS x00 编号）。没有任何效果。

编辑：我只是尝试编写一个快速程序来为 font-weight 属性添加 0 到 999 之间的数字。有趣的是，如果我输入 0 到 399 之间的任何值，我就能得到“光”。400 到 407 给了我“常规”，408 到 599 又给了我光，然后 600 或更高给了我半粗体。这看起来很奇怪，因为现在使用数字我至少可以访问“light”和“semibold”。我仍然找不到任何方法来获得“Extra Light”或“Black”权重。

我唯一的问题是，如果不求助于自定义代码，这是不可能的吗？我可以通过创建一个 QFont 来获得我想要的确切字体，如下所示：

```
QFontDatabase db;
QFont = db.font("Source Sans Pro", "Semibold", 24 ); 
```

但显然这意味着我不能使用样式表（或者更糟的是，我必须编写自己的样式表解析器或包装现有的 Qt 或其他东西）。这似乎有点难以置信，这对于样式表是不可能的。Qt 对多粗细字体的支持很差吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T00:13:30.150

最后浏览了 Qt 源代码，我想我找到了答案。简而言之，不，这是不可能的。或者至少，它取决于字体，甚至可能取决于平台（我正在使用 Qt 4.8.4 在 Mac OS X 中工作）。

QFonts 有两种字体“权重”（由 QFont::setWeight() 设置），这是一个 0-99 之间的数字。它们还有一个由 QFont::setStyleName() 设置的“样式名称”。您可以在样式表中使用 font-weight 设置权重，但不能设置 styleName（我通过查看 qcssparser 的来源确认）。有一个font-style参数，但是只能用来设置normal、italic或者oblique……也就是说，它调用的是QFont::setStyle()，而不是setStyleName()。

至少在我的情况下，访问某些字体权重的唯一方法是通过“样式名称”，给它一个特定的字符串，如“Extra Light”。显然，Qt 正在做一些内部（可能是特定于平台的）魔术来在 0-99 权重数字和样式名称之间进行转换，但它似乎做得并不好。我在 Qt 源代码中陷入了困境，无法真正弄清楚这种映射发生在哪里。

更奇怪的是，QFont::setWeight 采用 0-99 之间的数字（如我之前所述），但样式表中的 font-weight 属性采用 100 到 800 之间的数字，然后将其除以 8 并调用 setWeight。我想这是为了更接近地匹配[CSS 权重编号系统](http://www.w3schools.com/cssref/pr_font_weight.asp)。

现在我只需要弄清楚我要采取什么样的技巧来解决这个问题。我可以轻松地将诸如 font-style-name 之类的内容添加到 qcssparser，但我宁愿不修补 Qt 源代码，因此我可能会在应用程序级别做一些事情。

# networking - 如何在 Windows Azure（虚拟机）中检查网络总流量

> ID：14901935
> 
> 赞同：0
> 
> 时间：2013-02-15T19:27:35.730
> 
> 标签：networking, azure, virtual-machine

我有一个在 Windows Azure 上运行的 Ubuntu 虚拟机。我需要检查上传/下载了多少数据。

我可以在 Windows azure 仪表板中检查当前值，但我找不到任何关于总计的信息。

如果没有这样的信息可用，有没有办法在 Ubuntu 上设置一个计数器来跟踪网络总数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:58:04.260

你可以使用 zabbix 或 nagios 之类的东西

# java - Eclipse - 当我创建 JUnit Suite 时，测试类列表为空。为什么？

> ID：14901936
> 
> 赞同：6
> 
> 时间：2013-02-15T19:27:34.913
> 
> 标签：java, eclipse, junit

我有一个包含 4 个测试类的包。我想制作一个 JUnit 测试套件。所以在 Eclipse 中，我右键单击我的包并执行`New > Other > JUnit Test Suite`

该向导有一个警告，**“警告：未选择测试类”**并且列表`Test Classes to include in suite:`为空。

我不确定为什么。我有几个 *Test.java 类，其`public`方法用`@Test`. 我通过`JUnit Test Case`向导创建了这些...

我在其他 Stack Overflow 答案上看到了一些代码，可以用来创建测试套件，但为什么它不能在 IDE 中运行？

我什至应该为测试套件烦恼吗？好像我可以右键单击包和`Run As > JUnit Test`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:35:51.333

是的，不要打扰套房。

您可以选择项目并将其作为 junit 测试运行。Eclipse 将找到所有测试并运行它们

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T19:37:05.573

您是否在菜单中选择了正确的包`New -> Other > JUnit Test Suite`？通过使用“浏览...”按钮选择一个包，您应该会看到您的测试类。

您可以直接在项目上运行所有测试，`Run As > JUnit Test`但如果您有许多测试类，建议使用测试套件重新组合它们（例如：较慢的测试、程序特定部分的测试等）。

查看[这篇文章](http://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0)以了解有关 JUnit 测试分组的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-31T15:39:42.340

我也遇到了同样的情况，解释很简单：您已经使用**JUnit Jupiter**编写了测试。

[![在此处输入图像描述](../Images/1a66919f3b45c0275a15da5d697dda63.png)](https://i.stack.imgur.com/5gP5D.png)

但是，JUnit 测试套件向导让您只选择**这两种类型**的套件：**JUnit3**或**JUnit4**。

[![在此处输入图像描述](../Images/ba6dee5da8125b44a817b300cad2adcc.png)](https://i.stack.imgur.com/KED4s.png)

重构您的测试以符合 JUnit3 或 JUnit4 将使它们在 JUnit 测试套件向导中可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-28T01:16:59.857

只需使用 package.json 对 junit 测试用例进行分组。检查每个测试用例的成功和失败计数更可靠。

# xslt - 如何在 XSLT v 2.0 中测试参数是否已传递到模板中？

> ID：14901942
> 
> 赞同：2
> 
> 时间：2013-02-15T19:27:56.473
> 
> 标签：xslt, xslt-1.0, xslt-2.0, saxon

我目前正在尝试从 XSLT 1.0 升级到 XSLT 2.0。我曾经使用 XSLT 1.0 的模板之一中有以下内容：-

```
<xsl:template name="some_t">
  <xsl:param name="some_numeric_param"/>
  <xsl:if test="$some_numeric_param != ''">
    <xsl:attribute name="some_name">
      <xsl:value-of select="$some_numeric_param"/>
    </xsl:attribute>
  </xsl:if>
</xsl:template> 
```

现在，在三种情况下我称这个模板为：-

```
<xsl:call-template name="some_t">
  <xsl:with-param name="some_numeric_param" select="floor(number(./@attr1) div 20)"/>
</xsl:call-template> 
```

当我这样做时，基本上内部模板只会创建名为“some_name”的属性，前提是源文档中给出了名为“attr1”的属性。

另外，我可能称之为的另一种情况是没有这个参数：-

```
<xsl:call-template name="some_t">
</xsl:call-template> 
```

所以我基本上想要它做的是，当我传入一个参数然后创建一个属性，否则不要。无论我的样式表是否正确，这在 XSLT 1.0 中有效，但在 XSLT 2.0 中，它给出了一个错误消息：-

```
Error on line 195 of movwin.xsl:
  XPTY0004: Cannot compare xs:double to xs:string
Transformation failed: Run-time errors were reported 
```

有什么帮助吗？我正在使用 Saxon 9.4 处理器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T00:06:25.357

在 2.0 中声明参数的类型是个好主意。如果您期望一个整数，请声明`<xsl:param name="p" as="xs:integer"/>`- 并且不要尝试将其与字符串进行比较。如果整数可能存在也可能不存在，将其声明为可选整数，如下所示：`<xsl:param name="p" as="xs:integer?"/>`并将空序列（写入`()`）用作“空值”。然后，您可以使用 测试是否已提供值`test="empty($p)"`。

您的 1.0 代码有效，因为当您将数字与字符串进行比较时，字符串将转换为数字。空字符串转换为 NaN，NaN 比较不等于任何值。我认为——尽管我需要检查——如果你在向后兼容模式下运行，它在 2.0 中仍然有效，如果你的样式表指定 version="1.0"，就会发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:47:11.377

这是因为您正在将数字与字符串进行比较。

尝试改变：

```
<xsl:if test="$some_numeric_param != ''"> 
```

到：

```
<xsl:if test="$some_numeric_param"> 
```

**编辑**

还要处理`$some_numeric_param = 0`尝试：

```
<xsl:if test="string($some_numeric_param)"> 
```

没有必要进行`!= ''`比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T19:40:19.317

尝试将输入参数强制转换为字符串：

```
<xsl:if test="string($some_numeric_param) != ''"> 
```

xslt 2.0 的类型比 1.0 更强。

# javascript - 即使当前时间是标准时间，Javascript 日期构造函数也默认为夏令时

> ID：14901947
> 
> 赞同：3
> 
> 时间：2013-02-15T19:28:04.010
> 
> 标签：javascript, date

例如：

```
var rd = new Date(2013, 2, 15, 10, 0, 0, 0);
rd.toString(); 
```

将返回`"Fri Mar 15 2013 10:00:00 GMT-0700 (Pacific Daylight Time)"` 即使平台上当前的活动时间是“太平洋标准时间”..

这没有任何意义 - 它应该将 TZ 作为当前活动 TZ 返回

为什么构造函数会这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:49:27.533

我要说这是因为 DST 从 3 月 10 日开始。所以如果我想使用 JS 参加我计划在上午 10:00 举行的会议，我希望那是太平洋夏令时间上午 10:00 .

我测试了几个场景，我将我的 TZ 设置为太平洋，然后运行你的代码，它告诉我的和你一样，太平洋夏令时间 10:00，我将日期切换到 9 号，它说太平洋标准时间 10:00，然后我告诉我的时钟忽略 DST 并将其设置回 15 号，然后它告诉我太平洋标准时间 10:00。

我不得不说，这正是我希望它根据我本地机器上的时间设置工作的方式。

PS：IE 对本地机器时间设置的更改反应更快，我必须关闭并重新打开 chrome 才能识别我更改了我的时钟。

# regex - 使用正则表达式 shell 脚本比较文本（带破折号）

> ID：14901952
> 
> 赞同：0
> 
> 时间：2013-02-15T19:28:21.987
> 
> 标签：regex, grep

我想检查我的变量是否具有这种格式`--- foobar---> <some other stuff>` 换句话说，我想知道文本是否以`--- foobar --->`

所以我使用`grep -q`但得到了这个错误：

```
$echo "---  foobar---> subtree " | grep -q "--- fooobar--->*" 
grep: unrecognized option `--- fooobar--->*'
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information. 
```

（这是`OSX`，和`grep's version is:`

```
$ grep --v
grep (GNU grep) 2.5.1

Copyright 1988, 1992-1999, 2000, 2001 Free Software Foundation, Inc.
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

)

如何重写我的正则表达式以匹配预期的字符串？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:37:00.923

`-e`您可以通过在正则表达式之前添加来修复错误：

```
grep -q -e "--- fooobar--->*" 
```

从手册页：

```
 -e PATTERN, --regexp=PATTERN
        Use PATTERN as the pattern; useful to protect patterns beginning with -. 
```

至于正则表达式本身，`*`在正则表达式中的意思是“重复前一个字符零次或多次”，因此您的正则表达式正在检查`--- fooobar---`然后是零个或多个`>`字符。

如果要匹配任意数量的任意字符，请`.*`改用：

```
grep -q -e "--- fooobar--->.*" 
```

但是，由于看起来您只是在检查该行是否匹配，`.*`所以最后并没有真正改变任何东西，如果您完全删除它，它的行为方式会相同。

您可能还想`^`在模式的开头添加一个，这是行锚的开头，这样您就不会匹配像“一些其他内容...... --- fooobar---> baz”这样的行。

# logging - 我在哪里可以找到存储在 S3 中的文件的访问日志

> ID：14901953
> 
> 赞同：2
> 
> 时间：2013-02-15T19:28:40.220
> 
> 标签：logging, amazon-web-services, amazon-s3

我们只是想知道是否有人在特定存储桶中添加或删除了文件。

有地方可以看看吗？* 我不想要程序化界面，只是为了手动查看。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:30:28.483

您需要在特定存储桶上启用日志记录。一旦你这样做，亚马逊将开始将日志保存在另一个存储桶中（通常类似于“bucket-name-logging”，尽管一旦你设置它就可以定义它，所以它可以有任何名称） [这是](http://docs.aws.amazon.com/AmazonS3/latest/dev/LogFormat.html)解析格式的链接。每个访问事件（每个 GET、PUT、DELETE 等）都有一个键，因此您可能需要研究一种编程方式来读取它们，例如[Sawmill](http://www.sawmill.net/formats/amazon_s3.html)。

# jquery - 绝对定位的 div 并调整它们的大小

> ID：14901954
> 
> 赞同：0
> 
> 时间：2013-02-15T19:28:48.347
> 
> 标签：jquery, css

最近我正在研究一个带有背景全尺寸幻灯片的项目，并且在内容之上。页眉和页脚必须相应地在顶部和底部具有固定的边距。

中间部分应该是可调整大小的，并且对页眉和页脚有一点边距。最重要的部分 - 窗口应该没有滚动条，当然所有的 div 都应该居中。

我看到这个工作的唯一方法是，所有三个主要 div 都是绝对定位的。

我正在努力调整中间部分的大小。我从@media 查询开始，它工作正常，因为您同时垂直和水平调整窗口（对角线），但如果您尝试垂直调整窗口大小（改变高度），它会崩溃。我通过 jQuery 通过更改 div 中每个元素的 CSS 属性来实现这一点。这不是很一致，因为我必须更改图像的大小。此外，如果我在不刷新的情况下重新更改回正常宽度/高度，则 JS 文件中定义的 css 属性将覆盖 CSS 中的属性，因为它们具有更高的优先级。

有没有其他方法可以做到这一点？

调整中间部分大小的最佳方法是什么？

对不起，这是代码...

```
 <div class="container">
        <header>

        <div class="nav">
           ---upper navigation part
        </div>

        </header>   

        <div id="content">

            <span class="arrow-left"><a href="#"></a></span>
            <span class="arrow-right"><a href="#"></a></span>
            <div class="central">
            <div class="inner">                                  
                <h2>Contact Us</h2>

                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputat</p>
                <div class="contacts">
                <p>some text </p>
                <p>some text </p>
                <div>image div</div>
                </div>

            </div>

            </div>

        </div>

        <footer>
             <div class="nav">
                 ---- navigation part
             </div>
         </footer>             
    </div>
</body> 
```

```
CSS:

.container{
   position: relative;
    height:100%;
    margin:0 auto;
    width:100%;
}

header{
    position:absolute;
    top:50px;
    width:1000px;    
    left:50%;
    margin-left:-500px;
}
footer{
    position:absolute;
    bottom:50px;
    width:1000px;    
    left:50%;
    margin-left:-500px;
}

#content{
    width:1000px;
    margin:auto;
    position: absolute;
    top: 113px;
    bottom: 113px;
    left: 0px;
    right: 0px;

}
.central{
    height: 100%;
    position:relative;
    width:560px;
    float:right;
    background:red;
    overflow:hidden;
}

.inner{
    width:500px;
    float:right;
    padding:0 30px;
    margin: 4px 0;
}
.inner h2{
    font-family: sans-serif;
    font-size:2em;
    line-height:140%;
}
.inner p{
    line-height:120%;
    font-size:1em;
    padding:15px 0;
}
.image{
    background-image:url(image.png);
    margin-right:0 !important;
    display:block;
    margin:10px auto;
    width:500px;
    height:232px;
}

AND JS file:
$(window).resize(function(){
    var inner_h = $('.inner').height()/2;
    console.log(inner_h);
    $('.inner').css({
    position:'absolute',
    left: 0,
    top: '50%',
    'margin-top': '-'+inner_h + 'px'
    });
    $('.inner h2').css({
        'font-size': '2em'
    });
    $('.inner p').css({
        'font-size': '100%'
    });

    if($(window).width() < 1100){
        $('.map').css({
            'background-size':'350px 162px',
            'background-image':'url(images/contact-map350.png)',
            'width': '350px',
            'height':'162px',
            'float':'left'
        });     
    }
    if($(window).height() < 750){
        $('.inner').css({
            position:'absolute',
            left: 0,
            top: '55%',
            'margin-top': '-'+inner_h + 'px'
        });
        $('.inner h2').css({
            'font-size': '1.5em'
        });
        $('.inner p').css({
            'font-size': '90%'
        });
        $('.image').css({
            'background-size':'350px 162px',
            'background-image':'url(image.png)',
            'width': '350px',
            'height':'162px',
            'float':'left'
        });
    }
    if($(window).height() < 650){

        $('.image').css({
            'background-size':'350px 162px',
            'background-image':'url(image.png)',
            'width': '350px',
            'height':'162px',
            'float':'left'
        });

    }

});
$(window).load(function(){

    var inner_h = $('.inner').height()/2;
    console.log(inner_h);   
    $('.inner').css({
            position:'absolute',
            left: 0,
            top: '50%',
            'margin-top': '-'+inner_h + 'px'
    });
    $('.inner h2').css({
        'font-size': '2em'
    });
    $('.inner p').css({
        'font-size': '100%'
    });

    if($(window).width() < 1100){
        $('.image').css({
            'background-size':'350px 162px',
            'background-image':'url(image.png)',
            'width': '350px',
            'height':'162px',
            'float':'left'
        });     
    }
    if($(window).height() < 750){

        $('.image').css({
            'background-size':'350px 162px',
            'background-image':'url(image.png)',
            'width': '350px',
            'height':'162px',
            'float':'left'
        });

    }
    if($(window).height() < 650){

        $('.inner').css({
            position:'absolute',
            left: 0,
            top: '55%',
            'margin-top': '-'+inner_h + 'px'
    });
        $('.image').css({
            'background-size':'350px 162px',
            'background-image':'url(image.png)',
            'width': '350px',
            'height':'162px',
            'float':'left'
        });
    }

    });

// run the function:
$(window).resize();
$(window).load(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:41:19.193

由于您所有的 DIV 都是绝对定位的，因此我认为最动态的调整大小的方法是使用直接的 Javascript 或 jQuery。尝试放弃媒体查询并处理窗口调整大小事件中的所有内容。

由于您没有列出任何代码并且我不确定您的图像在哪里，因此很难提供准确的答案......但是一个好的开始是将图像加载到 DIV 中。然后在 JS 中使用 new Image() 加载您的图像并将其放置在 div 中。然后，您可以在加载图像时获取实际图像尺寸，将这些尺寸与屏幕尺寸进行比较，并相应地调整图像大小。

# c# - 解析引导表示

> ID：14901961
> 
> 赞同：0
> 
> 时间：2013-02-15T19:29:22.600
> 
> 标签：c#, guid

我正在使用通过代码方法和约定进行映射来动态生成 sqllite db 表。

Id 属性使用 Guid.Comb 算法像这样映射。

```
Id(x => x.Id, m => m.Generator(Generators.GuidComb)); 
```

测试似乎没问题，除了一件事，我的数据库表 Id 属性以这样的格式插入`X'0A16BBC77771594D9990A166014C54F6'`。

我想知道为什么以这种方式保存而不是以格式保存，`aaaef973-d8ce-4c92-95b4-3635bb2d42d5` 我该如何解析这个 guid 表示`X'0A16BBC77771594D9990A166014C54F6'`

谢谢

更新：感谢下面的答案，我尝试如下

```
Guid id = Guid.ParseExact("X'0A16BBC77771594D9990A166014C54F6'", "N"); 
```

现在我得到这个错误

`Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).`

我不需要 Guid 的字符串表示，我想在查询数据库时使用它作为标识符 `p = session.Get<Permission>(id);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:32:26.213

您可以使用以下方法生成 guid：

```
System.Guid.NewGuid().ToString("N").ToUpper() 
```

这将生成这种格式的 GUID：

> D51A752B70E743B0BA903DE7A3FFDF91

您可以附加到其中`X'`

```
string finalFormatted = "X'" + System.Guid.NewGuid().ToString("N").ToUpper(); 
```

当然，相应地调整（duh）。如果您已经有了 GUID，只需使用

```
string finalFormatted = "X'" + theGuidYouAlreadyHave.ToString("N").ToUpper(); 
```

**更新**

我现在意识到你想解析。它是这样的：

```
string yourGuidString = "X'D51A752B70E743B0BA903DE7A3FFDF91";
Guid g = Guid.ParseExact(yourGuidString.Replace("X'",""), "N"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:35:16.667

> 为什么这样保存？

它可能只是将其存储为 128 位数字字段而不是字符串。*插入*guid的语法可能不需要破折号。

> 我如何解析这个 guid 表示

[`Guid.ParseExact`](http://msdn.microsoft.com/en-us/library/system.guid.parseexact.aspx)与`"N"`格式说明符一起使用：

```
string x = "X'0A16BBC77771594D9990A166014C54F6'";
Guid g = Guid.ParseExact(x.Substring(2,32), "N"); 
```

# extjs - Sencha Touch 2：仅在生产版本中无法从 Java 类调用控制器内部的函数

> ID：14901963
> 
> 赞同：1
> 
> 时间：2013-02-15T19:29:30.890
> 
> 标签：extjs, sencha-touch, sencha-touch-2

背景：我正在 Android 设备的 webview 中加载一个 sencha 移动站点，并从 java 类访问在 sencha 控制器中声明的函数，如下所示。

```
webView.loadUrl("javascript:getMeNumbers();"); 
```

这个函数在我的控制器中声明

```
getMeNumbers : function(value) {
  console.log('Controller: Function called >> getMeNumbers');
} 
```

问题：当我在开发模式下运行这个应用程序时，我可以从 java 类调用这个控制器函数。但是，一旦我创建生产版本并尝试从 java 类调用此控制器函数，它就会开始给我错误：

```
'ReferenceError: Can't find variable: getMeNumbers at undefined:1''` in the console. 
```

有什么想法为什么它不能在生产版本中工作而只能在开发版本中工作？任何想法或指示都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:49:20.897

当构建压缩 js/css 的应用程序时，它会重命名函数、变量名称以缩短名称。它通常会删除压缩器认为无用的功能。通常这样做是为了减小文件的大小。

因此，在您的情况下，如果没有从任何 js 文件中调用它，压缩器可能已将函数重命名为其他内容，或者最不可能将其删除。

您可以做的是在压缩js文件后识别函数名称。尝试搜索函数体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T06:43:13.903

控制器函数不是全局函数，所以不能直接调用。

假设你的应用名称是 APP，而你的控制器是“MainController”，你可以试试这个：

```
webView.loadUrl("javascript:APP.app.getControllerInstances()['APP.controller.MainController'].getMeNumbers()"); 
```

另一种方法是使用路由：在您的控制器中，添加路由配置：

```
routes:{
  'getmenumbers': 'getMeNumbers'
} 
```

进而：

```
webView.loadUrl("#getmenumbers"); 
```

# windows-8 - 在 Surface Pro 上阻止睡眠

> ID：14901964
> 
> 赞同：2
> 
> 时间：2013-02-15T19:29:34.037
> 
> 标签：windows-8

我想创建一个可以在后台运行的应用程序，屏幕关闭，但防止 Surface Pro 进入睡眠状态。本质上，我有一个有声读物播放器，但只要我关闭屏幕以收听有声读物并尝试节省电量，Surface 就会进入睡眠状态。事实上，我知道如何防止睡眠的唯一方法是保持显示器打开，但我明确不想这样做，因为我想节省电量。因此，[DisplayRequest 类](http://msdn.microsoft.com/en-us/library/windows/apps/br241816.aspx)不是解决此问题的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:15:09.027

该按钮实际上并没有关闭屏幕。它的作用是告诉系统进入睡眠状态，这会关闭屏幕作为其例行程序的一部分。

您可以谷歌一个名为“nircmd.exe”的程序，下载它并将其放入 Windows 文件夹后，您可以使用命令“C:\Windows\nircmd.exe monitor off”在桌面等上创建快捷方式。关闭它有点挑剔（关闭盖子会重新打开屏幕，出于某种原因），但它可以工作。您还可以将电源选项设置为仅在空闲一分钟后关闭屏幕。

我认为 Surface Pro 存在另一个问题，即让它静置一分钟会自动使其进入睡眠模式，但播放媒体可能会使其正常工作。您还可以确保将您的电源选项设置为最可能节省的电量，并且它的耗电量应低至 6 瓦（可能需要 6 小时的此类读数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:09:54.260

那么，您实际上是在尝试制作背景音频吗？要启用它，您需要确保向 Media Control 对象注册四个事件处理程序，并在清单中启用背景音频。我刚刚[在这里回答了一个类似的问题](https://stackoverflow.com/questions/14783618/windows-8-audio-playing-in-background/14784613#comment20843170_14784613)，有关背景音频的更多信息可以在文档 ( [XAML](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj841209.aspx) | HTML/JS) 中找到。我也在[本书](http://aka.ms/BrockschmidtBook)的第 10 章中介绍了 JS 的主题。

了解背景音频是一类特殊的后台任务，与让整个应用程序一直运行相比，它可以让更多的设备进入睡眠状态，这一点很有帮助。它将允许您关闭屏幕（直接事件），并让音频仍然响应音量控制和播放/暂停控制（如 Surface 触摸键盘）。

.克雷格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:19:31.310

是的，这是可能的。比如说，你想写一个时钟应用程序，你会想要完成同样的事情，对吧？这篇博文将引导您完成整个过程： http: [//blogs.msdn.com/b/windowsappdev/archive/2012/05/16/being-productive-when-your-app-is-offscreen.aspx ?wa=wsignin1 .0](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/16/being-productive-when-your-app-is-offscreen.aspx?wa=wsignin1.0)我希望我已经写了它。

# c# - 如何获取 Azure CloudBlobContainer 的大小

> ID：14901965
> 
> 赞同：7
> 
> 时间：2013-02-15T19:29:38.007
> 
> 标签：c#, .net, azure-storage

我正在为我的应用程序创建一个 .net 包装服务，该服务使用 Azure Blob 存储作为文件存储。`CloudBlobContainer`我的应用程序为我系统上的每个“帐户”创建一个新帐户。每个帐户都被限制为最大存储量。

查询 Azure CloudBlobContainer` 的当前大小（空间利用率）的最简单和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T16:14:34.443

仅供参考，这是答案。希望这可以帮助。

```
public static long GetSpaceUsed(string containerName)
{
    var container = CloudStorageAccount
        .Parse(ConfigurationManager.ConnectionStrings["StorageConnection"].ConnectionString)
        .CreateCloudBlobClient()
        .GetContainerReference(containerName);
    if (container.Exists())
    {
        return (from CloudBlockBlob blob in
                container.ListBlobs(useFlatBlobListing: true)
                select blob.Properties.Length
               ).Sum();
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-14T13:30:15.250

从 WindwosAzure.Storage.dll（来自 Nuget 包）的 v9.xxx 或更高版本开始，该`ListBlobs`方法不再公开可用。因此，针对 .NET Core 2.x+ 的应用程序的解决方案如下：

```
BlobContinuationToken continuationToken = null;
long totalBytes = 0;
do
{
    var response = await container.ListBlobsSegmentedAsync(continuationToken);
    continuationToken = response.ContinuationToken;
    totalBytes += response.Results.OfType<CloudBlockBlob>().Sum(s => s.Properties.Length);
} while (continuationToken != null); 
```

# javascript - 拖放 Javascript HTML5

> ID：14901967
> 
> 赞同：4
> 
> 时间：2013-02-15T19:29:44.747
> 
> 标签：javascript, html, drag-and-drop

我正在尝试使用 javascript 和 HTML5 制作拖放功能，而不是 jQuery。我只是看不出有什么问题。看了很长时间，看不到我失败的地方。有人能找到吗？

```
 function doFirst(){
    mypic = document.getElementById('dragapple');
    mypic.addEventListener("dragstart", startDrag, false);

    leftbox = document.getElementById('leftbox');
    leftbox.addEventListener("dragenter", function(e){e.preventDefault}, false);
    leftbox.addEventListener("dragover", function(e){e.preventDefault}, false);
    leftbox.addEventListener("drop", dropped, false);
}
function startDrag(e){
    var code = '<img id="dragapple" src="stealeripsum.png">';
    e.dataTransfer.setData('Text', code);
}
function dropped(e){
    e.preventDefault();
    leftbox.innerHTML = e.dataTransfer.getData('Text');
}
window.addEventListener("load", doFirst, false); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:32:36.033

`.gegData('Text')`还是`.getData('Text')`？

```
function dropped(e){
   e.preventDefault();
   leftbox.innerHTML = e.dataTransfer.getData('Text');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T20:00:58.933

最终抓住我们的总是小事。在“dragover”事件侦听器的定义中，您需要为`()`e.PreventDefault 提供一个参数列表：

```
leftbox.addEventListener("dragenter", function(e){e.preventDefault();}, false);
leftbox.addEventListener("dragover", function(e){e.preventDefault();}, false); 
```

这样，浏览器将停止默认事件响应（即禁止放置）并让您的放置操作完成。这是我[愚蠢的 jsFiddle 演示](http://jsfiddle.net/amullins/9Kp7a/10/show/)，说明了成功。蓝色方块是`#dragapple`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-17T00:42:46.887

html5 拖放 api 有很多奇怪的边缘情况。我刚刚写了一个非常通用的低级 api，使拖放变得容易。以下是您在示例中的操作方式：

```
function doFirst(){
    var mypic = document.getElementById('dragapple')
    dripDrop.drag(mypic, {
      image: true,
      start: function(setData) {
        setData('Text', '<img id="dragapple" src="stealeripsum.png">')            
      }
    })

    var leftbox = document.getElementById('leftbox')
    dripDrop.drag(leftbox, {
      drop: function(data) {
        leftbox.innerHTML = data.Text        
      }
    })
}

window.addEventListener("load", doFirst, false); 
```

在这里查看：[https ://github.com/fresheneesz/drip-drop](https://github.com/fresheneesz/drip-drop)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-15T19:42:05.430

需要对接收拖拽的元素进行ondragover和ondrop事件，拖拽元素需要为draggable="true"。

前任：

```
<div ondragover="allowDrop(event);" ondrop="drop(event);">

function allowDrop(x) { x.preventDefault(); }

function drop(x) {  x.preventDefault(); var data=x.dataTransfer.getData("text"); ... } 
```

# php - mysql功能显示25岁以下的用户？

> ID：14901973
> 
> 赞同：0
> 
> 时间：2013-02-15T19:30:31.443
> 
> 标签：php, mysql

有人可以帮助我试图让我的 mysql 查询显示我网站上 18-25 岁的所有用户，并且它目前正在这样做，但它回显了大约 20 次相同的结果/相同的用户。

我只想在查询中显示每个结果/每个用户一次。有人可以告诉我我哪里出错了谢谢。

年龄当前在数据库中记录为 varchar (11) 我使用年龄与我的出生日期分开，这是一个时间戳，但我需要将年龄设置为与出生日期分开，所以我使用 varchar 列。

所以要明确的是，我试图显示 25 岁以下的所有用户（不会复制结果并在每个结果中回显一个以上的用户）

功能：

```
function categories_agegroup_under25() {
            global $connection;
            $query = "SELECT *
                        FROM ptb_users, ptb_stats
                        WHERE ptb_users.account_type = \"User\" AND ptb_users.account_status = \"Active\" AND ptb_stats.user_id = ptb_users.id
                        AND ptb_stats.user_age='18' OR  ptb_stats.user_age='19' OR ptb_stats.user_age='21' OR  ptb_stats.user_age='22' OR ptb_stats.user_age='23' OR  ptb_stats.user_age='24' OR  ptb_stats.user_age='25'           

                        ORDER BY ptb_stats.user_age DESC
                        LIMIT 0,40";
            $categories_under25_set = mysql_query($query, $connection);
            confirm_query($categories_under25_set);
            return $categories_under25_set;
        } 
```

php:

```
 <?php
        $categories_under25_set = categories_agegroup_under25();
        while ($age = mysql_fetch_array($categories_under25_set)) {

            echo"
            <div class=\"boxgrid caption\">
            <a href=\"profile.php?id={$age['id']}\"><img width=140px height= 180px src=\"data/photos/{$age['id']}/_default.jpg\"/></a>
            <div class=\"cover boxcaption\">
            <h58> {$age['display_name']}, {$age['user_age']}</h58>
            </div>
            </div>";
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:35:20.680

你有冲突`AND`和`OR`

尝试这个

```
 SELECT *
                    FROM ptb_users, ptb_stats
                    WHERE ptb_users.account_type = \"User\" 
                    AND ptb_users.account_status = \"Active\" 
                    AND ptb_stats.user_id = ptb_users.id
                    AND ptb_stats.user_age in (18,19,20,21,22,23,24,25)        
                    GROUP BY ptb_stats.user_id
                    ORDER BY ptb_stats.user_age DESC
                    LIMIT 0,40 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:31:57.417

ptb_stats.user_age 在 18 到 25 之间 [http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:32:04.547

尝试类似的东西

```
SELECT DISTINCT username FROM ... 
```

另外，您获得重复结果的原因是因为您使用`FROM table1, table2`where 而应该使用`JOIN`语句，因为第一个语句将执行表交叉产品。

# c++ - 带有 MinGW 的 PhysX3 - 链接错误

> ID：14901975
> 
> 赞同：1
> 
> 时间：2013-02-15T19:30:43.890
> 
> 标签：c++, linker, mingw, physx

我正在尝试使用 MinGW编译 PhysX[示例，但出现以下错误：](http://mmmovania.blogspot.de/2011/05/getting-started-with-physx-3.html)

```
undefined reference to `physx::PxProfileZoneManager::createProfileZoneManager(physx::PxFoundation*)'
undefined reference to `physx::PxDefaultErrorCallback::~PxDefaultErrorCallback()'
undefined reference to `physx::PxDefaultErrorCallback::PxDefaultErrorCallback()' 
```

我的编译命令：

```
g++.exe -o Test.exe Test.cpp -Iinc -Llib -lPhysX3Common_x86 -lPhysX3_x86 -lPhysX3Extensions -lfreeglut -lopengl32 -lPhysX3Extensions -lglu32 
```

现在我的问题是：这些方法存储在哪些 .lib 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T07:18:13.337

createProfileZoneManager() 符号应该在**PhysXProfileSDK.lib**中。

PxDefaultErrorCallback() 构造函数和析构函数符号确实应该在**PhysX3Extensions.lib**中。您的编译命令已经两次列出了该库，但这应该不是问题。

# javascript - 如何维护数据库查询的字符编码

> ID：14901983
> 
> 赞同：0
> 
> 时间：2013-02-15T19:31:18.817
> 
> 标签：javascript, sqlite, firefox-addon

在 Firefox 扩展中，我打开一个数据库文件并显示数据库内容。但是，Firefox 显示一些字符不正确，可能是由于编码问题。我尝试在 SQLite 数据库浏览器中打开数据库文件，并且名称列正确显示。

如何正确处理此文本字符串，以便它按预期输出字符（例如，`Caché`而不是`CachÃ©`）？

重现此问题的代码片段：

```
var StorageService = Cc["@mozilla.org/storage/service;1"]
    .getService(Ci.mozIStorageService);
_Conn = StorageService.openDatabase(file);
var stmt = _Conn.createStatement("Select name from data");
var RunQuery = function () {
    return {
        arr: [],
        handleResult: function (aResultSet) {
            var row = aResultSet.getNextRow();
            alert([row.getResultByName("name"), 'Cach\u00E9']);
        },
        handleError: function (aError) {},
        handleCompletion: function (aReason) {}
    };
};
stmt.executeAsync(RunQuery()); 
```

输出：`CachÃ©,Caché`
预期输出：`Caché,Caché`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:42:44.033

假设 IDX_NAME 是 column 的索引`name`，那么

```
alert([row.getUTF8String(IDX_NAME), 'Cach\u00E9']); 
```

会给你预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:02:08.860

这似乎有效：

```
var converter = Cc["@mozilla.org/intl/scriptableunicodeconverter"]
    .createInstance(Ci.nsIScriptableUnicodeConverter);
converter.charset = "UTF-8";
alert([converter.ConvertToUnicode(row.getString("name")), 'Cach\u00E9']); 
```

# c# - 将一个类移动到不同的命名空间，是否可以向我的文件添加隐式使用？

> ID：14901984
> 
> 赞同：2
> 
> 时间：2013-02-15T19:31:22.513
> 
> 标签：c#, visual-studio-2010, refactoring, resharper

我将一个类从一个命名空间移动到另一个命名空间，现在我有超过 2000 个错误要处理。

所有错误都与我移动的类有关，是否可以以某种方式向我的所有文件隐式或全局添加命名空间？

还是手动修复每个错误的唯一方法？

我有 ReSharper，但我厌倦了进行全局更改，甚至不确定 Resharper 是否会在所有文件中修复这个 ONE 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:48:41.883

使用 ReSharper，您可以右键单击类名，从弹出菜单中选择 Refactor，然后选择 Move... 选择 Move Type To Another Namespace。ReSharper 将更改命名空间并更正引用新命名空间的所有文件，如果您可以回滚移动，这是一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:43:17.960

您是否在调用此类的类上实现 using 语句？如果是这样，只需使用从旧名称空间到新名称的整个解决方案的搜索和替换。它会做到的。如果它们位于同一解决方案中的不同项目中，则必须添加。对该项目的引用。

# php - 为定义的宽度/高度找到最佳字体大小

> ID：14901985
> 
> 赞同：2
> 
> 时间：2013-02-15T19:31:27.350
> 
> 标签：php, gd

有人能告诉我 php 中是否有一个与 imagettfbbox 函数相反的函数吗？即它应该采用 8 个坐标和字体等，并返回最佳字体大小。我知道我们可以为此实现我们的功能，但是我可以为此获得一些现成的功能吗？

# networking - 使用网络代理进行 ssh 时查找我的 IP 地址

> ID：14901990
> 
> 赞同：0
> 
> 时间：2013-02-15T19:31:59.517
> 
> 标签：networking, ssh

我在公司网络上，需要找出我的 ssh 显示的外部 IP 地址，以便将其列入白名单。

我无法使用 whatismyip.com 或“curl ifconfig.me”，因为该网络正在代理所有 Web 流量，因此 IP 与 SSH 输出的 IP 不同。

是否有可以通过 SSH 访问的等效服务，它会重复我的外部 IP 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T08:11:39.797

好的，终于自己解决了这个问题：

[http://ipcheck.finne.us/](http://ipcheck.finne.us/)

Chrome 不会在端口 22 上发出请求，所以

```
curl http://ipcheck.finne.us:22/ 
```

# sql - 如何在 TSQL 中拆分数据

> ID：14901995
> 
> 赞同：2
> 
> 时间：2013-02-15T19:32:19.897
> 
> 标签：sql, sql-server, tsql, unpivot

需要一些帮助来弄清楚如何拆分一些数据

数据目前看起来像这样

```
╔═════════════════════════════════════════════╗
║ Name Data1 Data2 Data3 Field1 field2 Field3 ║
╠═════════════════════════════════════════════╣
║ a     1      2     3     x      y      z    ║
╚═════════════════════════════════════════════╝ 
```

我需要拆分该数据，使其看起来像这样

```
+-----------------+
| name data field |
+-----------------+
| a     1     x   |
| a     2     y   |
| a     3     z   |
+-----------------+ 
```

谁能帮我这个

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T19:36:53.317

取决于您的 SQL Server 版本。从 SQL Server 2008 开始，您可以使用以下方法*取消透视*数据`CROSS APPLY`：

```
SELECT t.name,
  x.Data,
  x.Field
FROM YourTable t
CROSS APPLY 
(
    VALUES
        (t.Data1, t.Field1),
        (t.Data2, t.Field2),
        (t.Data3, t.Field3)
) x (Data, Field); 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/52999a/2)。

这也可以使用SQL Server 2005+ 中的`UNPIVOT`and函数来完成：`PIVOT`

```
select name, data, field
from
(
  select name, left(col, len(col) -1) col, value,
    row_number() over(partition by left(col, len(col) -1) order by col) rn
  from
  (
    select name, 
      cast([Data1] as varchar(10)) Data1, 
      cast([Data2] as varchar(10)) Data2, 
      cast([Data3] as varchar(10)) Data3, 
      [Field1], [field2], [Field3]
    from yourtable
  ) src
  unpivot
  (
    value
    for col in ([Data1], [Data2], [Data3], 
                [Field1], [field2], [Field3])
  ) unpiv
) u
pivot
(
  max(value)
  for col in (data,field)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/0e421/5)

两者都给出结果：

```
| NAME | DATA | FIELD |
-----------------------
|    a |    1 |     x |
|    a |    2 |     y |
|    a |    3 |     z | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T19:34:27.560

有很多方法可以做到这一点（只需看看 bluefeet 的答案），但可以使用一种简单的方法`UNION ALL`：

```
SELECT [Name], Data1 AS Data, Field1 AS Field
FROM YourTable
UNION ALL
SELECT [Name], Data2 AS Data, Field2 AS Field
FROM YourTable
UNION ALL
SELECT [Name], Data3 AS Data, Field3 AS Field
FROM YourTable 
```

这[是一个演示的小提琴](http://www.sqlfiddle.com/#!3/0e421/6)（由 bluefeet 提供）。

# emulation - 无法启动三星 SDK 电视模拟器

> ID：14901996
> 
> 赞同：0
> 
> 时间：2013-02-15T19:32:20.907
> 
> 标签：emulation, samsung-smart-tv

出于某种原因，我的三星电视模拟器版本 2.5.1 (2011) 和版本 3.5.2 (2012) 工作正常，但版本 4.0 (2013) 除外。当我打开它时，它说

```
Emulator for Windows has stopped working. A program caused the program to stop working... 
```

我在我的机器上安装了以下内容，但似乎仍然无法正常工作：

*   Visual C++ Redistributable 2005 x86 和 x64
*   Visual C++ Redistributable 2010 x86 和 x64
*   Microsoft .NET 4.5 最新版本
*   Java JDK（包括 JRE）
*   [来自 ( http://www.microsoft.com/en-us/download/details.aspx?id=35](http://www.microsoft.com/en-us/download/details.aspx?id=35) )的最新 Direct X

任何想法为什么它显示此消息？谢谢。我在 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:02:57.770

您可能需要为 Emulator 安装字体。打开`C:\Program Files (x86)\Samsung\Samsung TV SDK 4\Emulator\Emulator2013_v4\bin\`，打开`*.ttf`文件并选择`Install`。