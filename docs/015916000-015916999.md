# StackOverflow 问答 15916000-15916999

# java - 没有正确显示数组列表？

> ID：15916000
> 
> 赞同：0
> 
> 时间：2013-04-10T02:40:23.053
> 
> 标签：java

我只有一个数组列表，我希望输出以表格格式打印，我知道数组你需要使用嵌套的 for 循环，一个用于行，另一个用于列，我怎样才能让我的输出使用arrayList我的for循环时以表格格式：

```
System.out.print("Inv/Mo.\tRate\tYears\tFuture Value\n");

     for (int i = 0; i < FutureValueArrayList.size(); i++)

      {

         String FutureValueArray = FutureValueArrayList.get(i);

         System.out.print(FutureValueArray + "\t");

      } 
```

我的 for 循环给了我这样的输出：

> $100.00 2.0% 2 $2,450.64 **$150.00 2.0% 2 $36,420.71**

粗体值是用户的第二次输入。我如何让它显示在第二行，并且对于每个新的值条目，它逐行输出，而不是一行中的所有内容？我尝试了`print`/`println`它仍然将所有内容放在第一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:46:19.513

使用番石榴库 Joiner.on(" ").join(arraylist); 它产生格式良好的输出，您甚至可以在 guava 中定义自定义迭代器或过滤器。

[https://code.google.com/p/guava-libraries/wiki/StringsExplained#Joiner](https://code.google.com/p/guava-libraries/wiki/StringsExplained#Joiner)

为了更好地格式化输出，您可以使用 stringObject.replace(x,y); 它允许您用例如 \n - 新行替换符号，或者您可以添加更多空格...

```
 String str = sentence.replace("and", " "); 
```

# vb.net - 根据 vb 中的组合框选择从数组中填充列表框

> ID：15916001
> 
> 赞同：0
> 
> 时间：2013-04-10T02:40:27.657
> 
> 标签：vb.net, combobox, listbox

好的，所以我找到的所有答案都与子程序有关。我不需要我需要的是根据组合框选择从数组中填充列表框。它必须由 btnCalculate 块激活

例如，如果组合框选择为 3，我需要列表框来填充 futureValueArray(0) futureValueArray(1) futureValueArray(2)

这是我的 btnCalculate 程序代码

```
Private Sub btnCalculate_Click(ByVal sender As System.Object,
        ByVal e As System.EventArgs) Handles btnCalculate.Click
    Try
        If IsValidData() Then
            Dim monthlyInvestment As Decimal =
                Convert.ToDecimal(txtMonthlyInvestment.Text)
            Dim yearlyInterestRate As Decimal =
                Convert.ToDecimal(txtInterestRate.Text)
            Dim years As Integer = Convert.ToInt32(cboYears.Text)

            Dim monthlyInterestRate As Decimal = yearlyInterestRate / 12 / 100
            Dim months As Integer = years * 12

            Dim futureValue As Decimal = Me.FutureValue(
                monthlyInvestment, monthlyInterestRate, months)

            Dim futureValueArray(19) As String
            futureValueArray(0) = "Year 1: " & CStr((monthlyInvestment * 12) * yearlyInterestRate)
            futureValueArray(1) = "Year 2: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 2)
            futureValueArray(2) = "Year 3: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 3)
            futureValueArray(3) = "Year 4: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 4)
            futureValueArray(4) = "Year 5: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 5)
            futureValueArray(5) = "Year 6: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 6)
            futureValueArray(6) = "Year 7: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 7)
            futureValueArray(7) = "Year 8: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 8)
            futureValueArray(8) = "Year 9: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 9)
            futureValueArray(9) = "Year 10: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 10)
            futureValueArray(10) = "Year 11: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 11)
            futureValueArray(11) = "Year 12: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 12)
            futureValueArray(12) = "Year 13: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 13)
            futureValueArray(13) = "Year 14: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 14)
            futureValueArray(14) = "Year 15: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 15)
            futureValueArray(15) = "Year 16: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 16)
            futureValueArray(16) = "Year 17: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 17)
            futureValueArray(17) = "Year 18: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 18)
            futureValueArray(18) = "Year 19: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 19)
            futureValueArray(19) = "Year 20: " & CStr(((monthlyInvestment * 12) * yearlyInterestRate) * 20)

            ListBoxFutureValue.Text = FormatCurrency(futureValue)
            txtMonthlyInvestment.Select()

            ListBoxFutureValue.Items.Add(futureValue)
        End If
    Catch ex As Exception
        MessageBox.Show(ex.Message & vbCrLf & vbCrLf &
            ex.GetType.ToString & vbCrLf & vbCrLf &
            ex.StackTrace, "Exception")
    End Try
End Sub 
```

这是我的组合框的代码

```
Private Sub frmFutureValue_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim items() As String =
    {"Please select a number: ", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20"}
    For Each item As String In items
        cboYears.Items.Add(item)
    Next

    If cboYears.Items.Count > 0 Then
        cboYears.SelectedIndex = 3    ' The first item has index 0 '
    End If

End Sub 
```

根据我的想法，我需要一个 for while 循环，但我不知道如何比较两者以填充列表框。我很迷茫。大脑没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:01:06.057

不确定我是否正确理解了这个问题，但如果我理解了，你想要的代码是

```
 Dim selectedNumber As Integer
    Integer.TryParse(cboYears.SelectedItem, selectedNumber)
    ListBoxFutureValue.Items.Clear()
    For i = 0 To selectedNumber - 1
        ListBoxFutureValue.Items.Add(futureValueArray(i))
    Next 
```

# sql - 你能用“吗？” 对于 postgres SQL 中的参数？

> ID：15916003
> 
> 赞同：1
> 
> 时间：2013-04-10T02:40:33.487
> 
> 标签：sql, postgresql

这应该是愚蠢的简单回答，但对于我的生活，我无法找到一个明确的答案。

你能用“吗？” 在 postgres 中，就像在其他数据库引擎中一样？

例如：

```
SELECT * FROM MyTable WHERE MyField = ? 
```

我知道我可以为此使用 $n 语法，例如从 psql 这可以工作：

```
CREATE TABLE dummy (id SERIAL PRIMARY KEY, value INT);
PREPARE bar(int) AS INSERT INTO dummy (value) VALUES ($1);
EXECUTE bar(10);
SELECT * FROM DUMMY; 
```

但是，如果我尝试使用“？”准备一个语句，例如。

```
PREPARE bar(int) AS INSERT INTO dummy (value) VALUES (?); 
```

我得到：

> 错误：“）”处或附近的语法错误第 1 行：准备 bar（int）AS INSERT INTO dummy（值）VALUES（？）；

...然而，在不同的地方我读到“postgres 支持 ? 语法”。

这里发生了什么？postgres 支持使用吗*？*而不是 1 美元、2 美元等。如果是这样，你如何使用它？

具体来说，将一堆现有的 sql server 查询移植到 postgres 让我的生活变得很痛苦，如果我可以避免重写所有 where 条件和*所有 sql 语句*，那将非常非常好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T03:07:13.413

PostgreSQL 中的SQL 级别`PREPARE`不支持`?`占位符，它使用`$1`...`$n`样式。

大多数客户端库支持该语言在参数化查询中使用的标准占位符，例如 PgJDBC 使用`?`占位符。

如果您通过 nPgSQL、psqlODBC、PgJDBC、psycopg2 等客户端库发送查询，那么您应该能够使用该语言和客户端的常用占位符。

# java - Java String ReplaceAll（正则表达式帮助）

> ID：15916005
> 
> 赞同：-3
> 
> 时间：2013-04-10T02:40:41.710
> 
> 标签：java, regex, string, replace, replaceall

我有以下字符串：

```
String str1= "ABCD"; 
```

我想要以下字符串

```
String str2 = "AD" 
```

因此，我想要一些类似的东西：

```
String str2 = str1.replaceAll("/* SOME REGEX HERE */", ""); 
```

我如何编写正则表达式以便两者`"B"`都`"C"`被替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:41:57.063

你可以写成...

```
String str2 = str1.replaceAll("[BC]", ""); 
```

# java - Java 文本文件无法读取

> ID：15916006
> 
> 赞同：0
> 
> 时间：2013-04-10T02:40:54.007
> 
> 标签：java, java.util.scanner, nosuchelementexception

我正在尝试读取一个文本文件并创建一个对象数组。我不断收到以下错误...

```
Exception in thread "main" java.util.NoSuchElementException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at Prog6.main(Prog6.java:33) 
```

它没有读取字段，我已经尝试了我能想到的一切来修复它。这是代码。任何意见，将不胜感激。谢谢！

```
import java.io.*;
import java.util.*;

public class Prog6
{
public static void main(String[] args)
{
    String fname;
    String lname;
    String team; 
    String position;
    int completions;
    int attempts;
    int yards; 
    int receptions;

    Scanner inFile = null;
    Report rep = new Report();

    /*
     * Open File
     */
    try
    {
        inFile = new Scanner( new File( "nfl.txt" ) );
    }
    catch ( FileNotFoundException e )
    {
        System.err.println( "Error: file not found" );
    }
    /*
     * Read file
     */

    while (inFile.hasNext())
    {
        fname = inFile.next();
        lname = inFile.next();
        team = inFile.next();
        position = inFile.next();
        if (position == "QB")
        {
            completions = inFile.nextInt();
            attempts = inFile.nextInt();
            yards = inFile.nextInt();
            Player qb = new Player ();

            rep.addQuarterback(qb);
        }
        else if (position == "WR")
        {
            receptions = inFile.nextInt();
            yards = inFile.nextInt();
            Player wr = new Player ();

            rep.addReceiver(wr);
        }

        // Print report

        rep.printReport();      
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:47:22.947

出于某种原因，正在读取的一行没有您认为的那么多项目。扫描仪有一组 hasNext 方法（例如用于 long 值的 hasNextLong()），它们告诉您是否有下一个要扫描的项目以及该项目的格式是否正确。在获取下一个项目之前使用这些方法，您可以避免错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:45:50.003

您可能想要尝试在“try”循环中读取 inFile 的“While”循环。

如果我没记错的话，文件会在此之后关闭，所以你不能真正调用扫描仪。

所以，你会去：

```
try {
     inFile = new Scanner(new File("nfl.txt"));        
     while(inFile.hasNext()) {    
         .....      
         ..... 
} catch 
```

# jquery - jQuery加载页面

> ID：15916008
> 
> 赞同：1
> 
> 时间：2013-04-10T02:41:00.560
> 
> 标签：jquery, html

我正在尝试使用 jquery创建一个简单的网站[http://cone.hostei.com/index3.html 。](http://cone.hostei.com/index3.html)我只想使用`.load()`函数将 html 页面加载到 div 中。问题是函数 -`$('.preloader').hide()`和 ( `{ opacity : 1 }`) 在页面及其图像完全加载到 div 之前触发！我该如何解决？

```
$(window).load(function () {
 $('li a').click(function () { //event on click
    var toLoad = $(this).attr('href'); //get href of a li element
    $('.load-in').fadeOut('fast', loadContent);
    $('.loader').show(); //show the loader

    function loadContent() {
        $('.load-in').css({ //set opacity 0.3
            opacity: 0.3
        }).load(toLoad, hideLoad); //load html page, then callback
    };

    function hideLoad() {
        $('.load-in').fadeIn('fast',

        function () { //hide preloader and set opacity 1
            $('.loader').fadeOut('fast');
            $('.load-in').animate({
                opacity: 1
            });
        });
    };
    return false;
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:46:36.020

您需要确保将 jQuery 代码放在 $(document).ready() 处理程序中。这将确保您的代码在页面中的所有元素都已加载后运行。

请参阅 jQuery API 页面： [jQuery - .ready()](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:55:31.153

如果要检测图像何时完全加载，以便在显示内容后看不到它们，则必须`load`在元素中包含的所有图像上附加一个事件处理程序，`.load-in`并在所有图像加载之前等待淡入元素并淡出加载指示器。

像这样的东西（基于您网站上的代码）：

```
function loadContent() {
    var $loadIn = $('.load-in');

    $loadIn.css({ opacity : 0.3 }).load(toLoad , function () {
        var $images = $('img', $loadIn),
            imageCount = $images.length,
            loadedCount = 0;

            //wait on images before showing the content
            $images.on('load', function () {
                if (++loadedCount === imageCount) {
                    $images.off('load');
                    hideLoad();
                }
            });

           //make sure the content is still shown if images fails to load
           //or are very slow to load
           setTimeout(function () {
               if (loadedCount !== imageCount) {
                   $images.off('load');
                   hideLoad();
               }
           }, 5000);
    });   
}; 
```

但是，这里有一些你应该知道的事情（取自[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)）：

> > 与图像一起使用时加载事件的注意事项 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些是：
> 
> *   它不能始终如一地工作，也不能可靠地跨浏览器
>     
>     
> *   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
>     
>     
> *   它没有正确地冒泡 DOM 树
> *   可以停止对已经存在于浏览器缓存中的图像进行触发

# html - 滚动表格时如何使我的第一列不可移动？ 我的表放在 div style = "overflow:auto" 内，但我希望第一列保持原位，而所有其他列滚动。 显示用户输入图像而不将其保存到文件夹

> ID：15916009
> 
> 赞同：1
> 
> 时间：2013-04-10T02:41:09.057
> 
> 标签：html, css, html-table, custom-scrolling

我的表放在 div style = "overflow:auto" 内，但我希望第一列保持原位，而所有其他列滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:53:35.587

添加`style="position:fixed;top:100px;left:50px"`到您要修复的行（您可以调整 px 值）。

# php - 显示用户输入图像而不将其保存到文件夹

> ID：15916010
> 
> 赞同：0
> 
> 时间：2013-04-10T02:41:20.880
> 
> 标签：php

如何在 php 的可执行文件中显示图像并将其作为输入参数传递，而不将图像保存在文件夹中。用户提供图像路径作为输入，当我将图像保存到可以工作的文件夹时，我使用 ajax 来显示图像，但是如何在不将其保存在文件夹中的情况下显示它？我现在的代码是

```
 move_uploaded_file($_FILES["file"]["tmp_name"],"upload/".$_FILES["file"]["name"]);
                        //echo "Stored in "."upload/".$_FILES["file"]["name"];
                        echo "<img src='upload/".$_FILES["file"]["name"]."' class='preview'>"; 
```

我试过了

```
 <img src=$_FILES["file"]["tmp_name"]. class='preview'> 
```

但它没有用。由于我将收到来自数千名用户的数千条输入，因此我不想保存它。有没有优化和有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:50:58.377

标签的`src`属性`<img>`应该是客户端可访问的 URL。

您尝试将`path/to/your/file.jpg`临时文件的本地路径（例如：）作为 URL，它将不起作用。

info：上传的图片保存在本地磁盘的一个临时目录下，以后可以被PHP删除。

如果您想显示图像而不将其移动到 URL 可到达的位置，您可以尝试将其内容加载为 base64 内容

```
$imagedata = file_get_contents($_FILES["file"]["tmp_name"]);
$base64 = base64_encode($imagedata); 
```

并在您的 HTML 中使用

```
<img src="data:image/png;base64, <?php echo $base64; ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:53:36.533

我认为，不保存就无法显示图像。您可以尝试将图像保存在服务器端的临时文件夹中，并定期清理此文件夹以避免大量空间消耗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T02:55:01.743

我不认为你可以在不保存的情况下显示图像。

如果您想稍后输出，您需要将文件保存到文件系统或内存中

您的问题是 $_FILES 仅存在于图像发送到的脚本中。因此，当您对 img 源发起另一个 http 请求时，php 不再知道您尝试读取的文件是什么。

您需要一种方法来判断要在 http 请求上读取哪个图像。

您可以做的一件事是您可以将文件保存在客户端可访问的位置，然后在输出后让 php 将其删除。因此，一旦输出图像，它将被删除并且不再存在于文件系统中。

另一种方法是通过直接将内容写入 httpresponse 从内存中获取图像。

你可以这样做

```
$image            = file_get_contents($_FILES["file"]["tmp_name"]);
$enocoded_data    = base64_encode($image); 
```

当您显示图像标签时：

```
<img src="data:image/png;base64, <?php echo $enocoded_data    ; ?>" /> 
```

希望这些对你有帮助

# log4j - 使用 slfj-log4j12 时如何正确排除 slf4j-jdk14？

> ID：15916012
> 
> 赞同：0
> 
> 时间：2013-04-10T02:41:43.187
> 
> 标签：log4j, ivy, slf4j

我在我的项目中使用 Ivy 进行依赖管理。我想使用*SLF4J*进行日志记录。我添加了

```
<dependency org="org.slf4j" name="slf4j-log4j12" rev="1.7.5" /> 
```

它同时下载*slf4j-log4j12*和*slf4j-* jdk14 ，这会导致绑定冲突。我试图通过使用排除它

```
<dependency org="org.slf4j" name="slf4j-log4j12" rev="1.7.5">
  <exclude module="slf4j-jdk14" />
</dependency> 
```

但是模块仍然被下载。我已将**排除**标记直接放在**依赖**项标记下以排除此模块。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T21:26:10.297

解决这个问题的最简单方法是创建一个全局排除：

```
<dependencies>
   <dependency ..
   <dependency ..
   <dependency ..

   <exclude org="org.slf4j" module="slf4j-jdk14"/>
</dependencies> 
```

为了发现传递依赖的来源，我建议总是生成一个常春藤报告：

```
<target name="resolve" description="Resolve dependencies using ivy">
    <ivy:resolve/>
    <ivy:report todir="${build.dir}/ivy-report" graph="false"/>
</target> 
```

# css - 如何根据“Checked”值设置 Radio 输入的样式

> ID：15916020
> 
> 赞同：0
> 
> 时间：2013-04-10T02:42:33.810
> 
> 标签：css, radio-button

如何根据 checked="checked" 特性向此单选按钮的 IMG 添加 CSS 样式？

```
<div id="edit-attributes-24-42-wrapper" class="form-item">
  <label for="edit-attributes-24-42" class="option">
    <input type="radio" class="form-radio" checked="checked" value="42" name="attributes[24]" id="edit-attributes-24-42">
    <img class="radio_image" src="/sites/default/files/imagecache/radio_thumb/days-3.png">
    <div class="radio_image_text">
      Radio Button text, hidden by display:none in CSS
    </div>    
  </label>
</div> 
```

理想情况下，我想将样式类“选择”添加到`<img class="radio_image" src="/sites/default/files/imagecache/radio_thumb/days-3.png">`代码部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:46:56.667

您不能仅使用 CSS 添加类，但您可以使用以下元素定位您想要的元素：

```
input[checked=checked] + img{
    /* style here */
} 
```

赋予它与您选择的班级相同的风格。

**[jsFiddle 示例](http://jsfiddle.net/j08691/shP2r/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:46:52.993

通常，每个浏览器都以自己的形状呈现收音机。

您可以使用它来帮助设置以下链接顶部的单选按钮：

[http://metroui.org.ua/forms.php](http://metroui.org.ua/forms.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:00:20.150

选中的属性本身有资格选择收音机。

```
input.form-radio:checked + img {
    border:5px solid;
} 
```

[**小提琴**](http://jsfiddle.net/wGA6t/)

示例 HTML

```
<div id="edit-attributes-24-42-wrapper" class="form-item">
    <label for="edit-attributes-24-42" class="option">
        <input type="radio" class="form-radio" value="42" name="attributes[24]" id="edit-attributes-24-42">
        <img class="radio_image" src="/sites/default/files/imagecache/radio_thumb/days-3.png">
        <div class="radio_image_text">Radio Button text, hidden by display:none in CSS</div>

        <input type="radio" class="form-radio" value="42" name="attributes[24]" id="edit-attributes-24-42">
        <img class="radio_image" src="/sites/default/files/imagecache/radio_thumb/days-3.png">
        <div class="radio_image_text">Radio Button2 text, hidden by display:none in CSS</div>

    </label>
</div> 
```

# ruby-on-rails - Rails 3 父模型验证失败是嵌套属性验证失败

> ID：15916024
> 
> 赞同：0
> 
> 时间：2013-04-10T02:43:13.060
> 
> 标签：ruby-on-rails, validation, nested-forms, nested-attributes

我有两个模型，用户和房屋。他们有一对一的关联。

```
class User < ActiveRecord::Base
   attr_accessible :name, :house_attributes
   has_one :house, :dependent => :destroy
   validates :name, :presence => true
   accepts_nested_attributes_for :house, allow_destroy: true, :reject_if =>    lambda { |a| a['desc'].blank? }
end

class House < ActiveRecord::Base
   attr_accessible :desc, :price
   belongs_to :user
   validates :desc, :presence => true
end 
```

现在我在用户新视图中创建了一个嵌套表单，如下所示：

```
<%= simple_form_for(@user) do |f| %>
  <%= f.input :name %>
  <%= f_builder.simple_fields_for :house, @house do |h| %>
    <%= h.input :price %>
    <%= h.input :desc %>
   <% end %>
  <%= f.button :submit %>
<% end %> 
```

而新的控制器是这样的

```
def new
  @user = User.new
  @house = @user.build_house

  respond_to do |format|
    format.html # new.html.erb
  end
end 
```

我想总是在创建用户的同时创建一个房子。因此，如果房屋未通过验证，则不应创建用户。（现在房屋模型只有一个验证，即需要存在 :desc 字段。）

如果 :desc 为空，则模型中的代码仅保证不创建房屋。但它仍然会创建用户。

我尝试在 User 模型中添加自定义验证，但找不到访问 User 模型内部的 :desc 属性（调用 self.desc 失败）或 :house_attributes （self.house_attributes）的方法。我真的不知道在创建房屋之前rails将这些房屋属性存储在哪里。

我希望你们能帮助我找出一个好的和清晰的方法

1) 能够验证并显示 :desc 属性的错误消息。现在错误消息只会显示在用户模型的 :name 字段中。

2) 如果用户或房屋的验证失败，请不要保存用户。

3）如果任何验证失败，渲染：新

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:02:27.933

您应该添加`validates_associated :house`到您的用户模型。这将运行众议院验证并确保它们在认为用户有效之前成功。

# ruby-on-rails - 如何理解 Rails 中视图和控制器的关系？视图是控制器的一部分吗？

> ID：15916028
> 
> 赞同：2
> 
> 时间：2013-04-10T02:43:58.823
> 
> 标签：ruby-on-rails, model-view-controller

让我感到困惑的是，例如，如果我们`index`在控制器中定义了一个方法，并且在`index`其中有一个实例变量`@var`，我们可以`@var`直接在 index.html.erb 中访问而无需指定任何内容。那么视图是控制器的一部分吗？视图中的 html.erb 文件可以访问控制器中的局部变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:51:13.510

控制器是处理来自浏览器的传入请求同时处理模型中的数据的事件处理程序。控制器将处理来自用户交互的请求，即键盘输入或来自鼠标的单击事件。然后在视图中输出控制器的响应。因此，如果您`UserController`有一个`index`动作，`index.html.erb`如果您想`users`通过循环访问它们，您将有某种类似的设置。

**控制器**

```
class UsersController < ApplicationController
def index
   @users = User.all #Returns an array of all users

   respond_to do |format|
   format.html { render "users/_users", :locals => { :users=> @user } }} 

    end 
```

**索引.html.erb**

```
<table>
  <thead>
  <tr>
    <th>Name</th>
  </tr>
  </thead>
  <tbody>
  <% @users.each do |user| %>
      <tr>
        <td> user.name</td>
      </tr>
  <% end %>
  </tbody>
</table> 
```

**更新：**

好的，所以我认为您的意思是发送一个局部变量并在视图中访问它。此外，众所周知，使用局部变量似乎是可取的，可以在应用程序范围内使用以避免依赖关系。因此，如果是这种情况，并且您想将局部变量传递到一个局部变量中，您将使用`:locals`它来保持它的清洁。示例如下：

```
render :partial => 'my_partial', :locals => { :some_variable => some_variable, :value=> 'value' } 
```

希望这可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:57:58.610

在 Rails 中，视图是与控制器分开的对象。控制器在渲染视图时将其实例变量包含到视图的上下文中。您应该认为这是一种特殊的参数传递约定，而不是违反封装（访问控制器私有变量的视图）。Rails 使用这个约定来避免将视图的（片段）结构反映到从控制器传递到视图的字段中。由于值以相对非结构化的方式从控制器传递到视图，因此我们可以灵活地重构视图，而不必对控制器造成太大的改变。

# android - Android 4.2 中多用户环境中的数据文件夹位置

> ID：15916029
> 
> 赞同：0
> 
> 时间：2013-04-10T02:44:01.470
> 
> 标签：android, database, sqlite

当我从不同的用户下运行我的应用程序时，调用**Environment.getDataDirectory()**会返回相同的信息 ( **/data )。**但是，我的应用程序实际上使用的数据库是不同的。我使用**SQLiteOpenHelper**在内部存储器中创建和访问数据库。

我可以使用以下路径直接从第一个用户访问数据库文件： **/data/app_package_name/databases/database_file.db**

从第二个用户那里我得到了**权限被拒绝**错误。显然我试图在其他用户环境中访问 db。

那么第二个用户的数据库的真实位置是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T17:53:56.630

尝试使用以下内容：

```
context.getFilesDir().getAbsolutePath().replace("files", "databases") + File.separator + DB_NAME 
```

# javascript - 有没有办法在 chutzpah 中执行 phantomJS 语句？

> ID：15916034
> 
> 赞同：1
> 
> 时间：2013-04-10T02:44:38.700
> 
> 标签：javascript, phantomjs, qunit, chutzpah

我正在运行一些 Qunit 测试来测试框架。当我的测试挂在那里时，我无法从 phantomJS 获取 cookie。它无法读取 cookie。

我尝试使用 phantom.cookies 函数获取 fetch phantom cookies，但 chutzpah 不执行这些语句？我有办法用 chutzpah 获取幻影饼干吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T16:53:19.210

只要您不违反同源政策，document.cookies 就应该有效。当您使用本地文件运行时，这有时会变得很棘手，因为文件系统文件的来源很奇怪。我将忽略允许跨域加载的参数传递给 Phantom，但我想知道这是否不适用于 cookie。

夫妇的事情

1.  你能给我一个可以重现你的问题的示例 zip 吗？
2.  你可能想在 PhantomJS 上提交一个 bug，如果你设置了 document.cookies 应该从其他域返回

`page.settings.webSecurityEnabled = false;`

谢谢！

# android - android活动中抛出奇怪的异常

> ID：15916036
> 
> 赞同：0
> 
> 时间：2013-04-10T02:44:49.530
> 
> 标签：android, android-activity

所以，我有一个 android 应用程序来完成一个项目的制作，与我之前在这里提出的问题相同，但这次我遇到了一个完全不同的方面的问题。由于该应用程序是关于 Pokémon 的，因此在一项活动中，我设置了一些 TextViews、EditTexts 和一个按钮来制作 IV 计算器。如果你很好奇并且不知道神奇宝贝中的“IVs”是什么，当然可以谷歌搜索。无论如何，回到正轨......我放在一起的这张图片突出了我的问题

![在此处输入图像描述](https://i.stack.imgur.com/IKaJ8.png)

在框线上方，您会看到抛出 ClassCastException，说不能从 TextView 类型转换为 EditText ...我知道这在一般意义上意味着什么，但我无法理解为什么会在这里发生，因为您可以在相关行中看到代码（我粘贴到图像中）该行中涉及转换的部分是从 View（findViewById 的返回类型）转换为 EditText。arg R.id.EditText06 在我的活动中指的是 EditText，所以我看不到错误的投射尝试应该发生在哪里。只是为了稍微澄清一下上下文，这是编码到按钮的 OnClickListener 中的内容的一部分。

抱歉，如果就显示的有关该问题的内容而言，这个问题似乎可能不完整，但对我来说已经很晚了（以至于我在发布此内容时要睡觉了），如果您觉得您可以要求我发布其他内容需要它来帮助我。

编辑：这是我有问题的活动的 xml 文件。[http://pastebin.com/g5B8d393](http://pastebin.com/g5B8d393)

EDIT2：好的，现在情况变得更糟了:(我目前的设置是我有一种虚拟的主要活动，只有一个按钮来启动一个活动。在测试时我改变了它根据需要启动的......直到一段时间昨晚（我真的不知道是什么导致了这个问题）`IVCalculatorActvity`一旦我让它完全正常工作，以及其他活动，它就可以正常工作。但是现在，当我按下按钮时它就崩溃了主要活动...我只是要将项目上传到某个地方。（[http://www.filehosting[DOT]org/file/details/429262/PokeUtility.zip](http://www.filehosting[DOT]org/file/details/429262/PokeUtility.zip)）Grrr...诅咒链接上的这个声誉限制发帖>.>我明白其中的道理，但是嗯……

EDIT3：为如此突然的编辑道歉，但我现在才看到你最新的帖子 HalR。测试应用 atm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:53:44.897

`findViewById`不返回 View 类的对象，而是返回 XML 文件中指示的任何类的对象。无论您认为您在 XML 中描述您的 EditText06，它都认为它是 a`TextView`而不是 and `EditText`。仔细检查并确保您没有`id="EditText06"`在多个位置定义。

如果您显示您的 xml，那么有人可能会更容易指出您的 xml 文件中的特定问题。

您需要为每个标签使用一次“@+id/...”格式，第一次出现时（作为参考或作为 id）。否则您会生成多个标签。我按照我的方式编辑了您的文件认为需要。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:paddingBottom="@dimen/activity_vertical_margin"
                android:paddingLeft="@dimen/activity_horizontal_margin"
                android:paddingRight="@dimen/activity_horizontal_margin"
                android:paddingTop="@dimen/activity_vertical_margin"
                tools:context=".IVCalculatorActivity" >

    <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="@string/calculate" />

    <EditText
            android:id="@+id/EditText01"
            android:layout_width="140dp"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/textViewD"
            android:layout_alignBottom="@id/textViewD"
            android:layout_alignLeft="@+id/EditText05"
            android:ems="10" />

    <EditText
            android:id="@+id/EditText03"
            android:layout_width="140dp"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/textView5"
            android:layout_alignBottom="@id/textView5"
            android:layout_alignLeft="@+id/EditText02"
            android:ems="10" />

    <EditText
            android:id="@+id/EditText04"
            android:layout_width="140dp"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/textView6"
            android:layout_alignBottom="@id/textView6"
            android:layout_alignLeft="@+id/EditText03"
            android:ems="10" />

    <TextView
            android:id="@+id/textViewA"
            android:layout_width="400dp"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/textViewC"
            android:layout_alignParentTop="true"
            android:text="@string/IVcalcHeader" />

    <TextView
            android:id="@id/textViewC"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/textViewD"
            android:layout_below="@id/textViewA"
            android:layout_marginTop="26dp"
            android:text="Stat" />

    <EditText
            android:id="@id/EditText05"
            android:layout_width="140dp"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@id/textViewC"
            android:layout_alignBottom="@id/textViewC"
            android:layout_alignRight="@id/textViewA"
            android:ems="10" />

    <TextView
            android:id="@id/textViewD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/textViewB"
            android:layout_below="@id/EditText05"
            android:layout_marginTop="27dp"
            android:text="Stat value" />

    <EditText
            android:id="@+id/EditText02"
            android:layout_width="140dp"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@id/textViewB"
            android:layout_alignBottom="@id/textViewB"
            android:layout_alignLeft="@id/EditText01"
            android:ems="10" />

    <TextView
            android:id="@id/textViewB"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/textView5"
            android:layout_below="@id/EditText01"
            android:layout_marginTop="28dp"
            android:text="Level" />

    <TextView
            android:id="@id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/textView6"
            android:layout_centerVertical="true"
            android:text="EV count" />

    <TextView
            android:id="@id/textView6"
            android:layout_width="100dp"
            android:layout_height="30dp"
            android:layout_alignRight="@id/button3"
            android:layout_below="@+id/EditText03"
            android:layout_marginTop="29dp"
            android:text="Base Stat" />

    <TextView
            android:id="@+id/textViewE"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/textView6"
            android:layout_below="@id/textView6"
            android:layout_marginTop="40dp"
            android:text="Nature" />

    <TextView
            android:id="@+id/textView7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/EditText04"
            android:layout_alignTop="@id/button3"
            android:text="      " />

    <EditText
            android:id="@+id/EditText06"
            android:layout_width="140dp"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@id/textViewE"
            android:layout_alignBottom="@id/textViewE"
            android:layout_alignLeft="@id/textView7"
            android:ems="10" />

</RelativeLayout> 
```

# database - 多表与单表

> ID：15916042
> 
> 赞同：0
> 
> 时间：2013-04-10T02:45:30.067
> 
> 标签：database, database-design, relational-database

我有一个与 stackoverflow 上已有的问题不同的问题。

我们有两个实体代表“Foo USA”和“Foo World”，而 Foo 的列在两个表中完全相同，不会出现需要连接和检索这两个表的情况，它们是完全根据定义相互独立。

仅因为它们定义了两个互斥实体而将两个表分开是否有意义？或者我应该有一个表，其中有一列定义它是属于美国还是世界？

将数据保存在小的独立表中会产生更好的性能吗？

请帮助并感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:14:42.047

将数据保存在小的独立表中可能会产生更好的性能，但根据表的预期大小，它可能并不明显。除非您期望有数亿条记录，否则使用单个表应该没有任何问题，假设您有需要的索引。

从开发的角度来看，最好使用单个表，因为一切都变得相同，并且您只需在访问数据时编写和维护一个查询。您不必担心忘记同时包含两者。从这个意义上说，维护起来会更容易。

话虽如此，如果您的系统的美国部分与世界部分有明显差异，那将是保持它们分开的一个论据。

如果不是，并且现在将它们放入同一张表中并不费力，那么您现在应该考虑合并它们。这可能是值得的，从长远来看可能会节省您的时间，甚至可能防止一些错误。

# c - 句子中字符出现的直方图

> ID：15916043
> 
> 赞同：-2
> 
> 时间：2013-04-10T02:45:39.253
> 
> 标签：c

**问题：**

设计一个单词和字符计数器并显示特定字符​​的直方图。

直方图可以使用任何字符来表示特定字母的单个实例，例如`X`，并且应该在行尾打印该字母的实例数。仅打印在输入的句子中出现一次或多次的字符的结果。您的程序必须将相同字母的小写和大写视为单独的字符。

下面是一个直方图可能看起来像句子的例子：`i_Looooove__eps_II`

```
Word total: 4
Character total: 18
Character total omitting underscore: 14

e: XX (2)
i: X (1)
o: XXXXX (5)
p: X (1)
s: X (1)
v: X (1)
I: XX (2)
L: X (1)
_: XXXX (4) 
```

**这是我到目前为止所拥有的：**

```
void histogram(char array3[]){
    char alphabet[25] = {0};
    int count;
    char *locate;
    int i;
    int j;

    for(i=0; array3[i] != '\0'; i++){
        array3[i] = tolower(array3[i]);
    }
    count = 0;
    for(i = 0; i <= 25; i++){
        locate = &array3[i];
        while(locate = strchr(locate, 'a' + i)){
            ++count;
            locate++;
        }
        alphabet[i] = count;
    }
    printf("\nThe number of occurrences of each letter is: \n");

    for(i = 0; i <= 25;i++){
        printf("%c:%3d\n", 'a' + i, alphabet[i]);
    }
    return;
} 
```

**有些东西没有按我的预期工作：**

直方图的输出是全1，而不是每个字符的出现次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:06:17.113

这不是一个好的开始：

```
locate = &array3[i]; 
```

您正在检查`i`字母表中的每个字母（不区分大小写），并从`i`输入字符串的第 th 位置开始搜索该字母。这是错误的。`count`您还应该在每次循环中重置。

与传统方式相比，您的方法有点倒退。您应该简单地计算遇到的那些字符，而不是在整个字符串中搜索每个可能的字符。这应该大致是您想要的：

```
int counts[256] = {0};

int num_words = 0;         // Total number of words
int num_chars = 0;         // Total number of characters (including underscores)
int num_underscores = 0;   // Total number of underscores
int in_word = 0;           // Are we currently inside a word?

for( int i = 0; str[i] != 0; i++ )
{
    if( isalpha(str[i]) )
    {
        counts[str[i]]++;
        num_chars++;

        if( !in_word ) {
            in_word = 1;
            num_words++;
        }
    }
    else if( str[i] == '_' )
    {
        counts[str[i]]++;
        num_underscores++;
        in_word = 0;
    }
    else {
        // Unhandled character.  Treat as word-break?
        in_word = 0;
    }      
} 
```

你可以从这里解决剩下的问题。

**[编辑]**我猜不是...

```
printf( "Word total: %d\n", num_words );
printf( "Character total: %d\n", num_chars );
printf( "Character total omitting underscore: %d\n", num_chars - num_underscores );

for( int i = 0; i < 256; i++ )  // Yes, this loop range is excessive...
{
    if( counts[i] == 0 ) continue;
    printf( "%c: ", (char)i );
    for( int x = 0; x < counts[i]; x++ ) fputc('X', stdout);
    printf( " (%d)\n", counts[i] );
} 
```

如果您仍然对此感到困惑，这里是提炼出纯字符频率计数的代码：

```
int counts[256] = {0};

for( int i = 0; str[i] != 0; i++ )
{
    counts[str[i]]++;
} 
```

请注意，每个可能的字符值都有一个数组位置。对于字符串中的每个字符，您只需增加其计数。您只对`counts['a']`,`counts['b']` *等*（大写和下划线类似）真正感兴趣。但是，如果您的输入表现良好，那么这很好，因为所有其他字符数都将保持为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:11:45.933

这会导致问题

```
for(i = 0; i <= 25; i++) 
```

i 从 0..25 即 26 个字符开始，但您的数组的尺寸仅为 25 个字符：

```
char alphabet[25] = {0}; 
```

你的循环应该是

```
for(i = 0; i < 25; i++) 
```

# .net - Event.Trigger Event.Publish f#

> ID：15916044
> 
> 赞同：7
> 
> 时间：2013-04-10T02:45:40.947
> 
> 标签：.net, events, f#

阅读有关在 f# 中创建新事件的代码我遇到了两个调用 event.Publish 和 event.Trigger，但我不太确定它们的含义。你能向我解释一下他们是做什么的吗？

请注意手册中的内容： `event.Publish`将观察结果作为第一类值发布。 `event.Trigger`使用给定参数触发观察。

由于我是意大利人，在这种情况下使用的“观察”一词对我没有任何好处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:14:37.873

实现公开事件的新 F# 类型时的典型模式是将事件值创建为本地字段，使用`event.Trigger`代码中的某处触发事件，并使用以下方式将其公开给您类型的用户`trigger.Publish`：

```
type Counter() =
  // Create the `Event` object that represents our event
  let event = new Event<_>()
  let mutable count = 0
  member x.Increment() =
    count <- count + 1
    if count > 100 then 
      // Trigger the event when count goes over 100\. To keep the sample
      // simple, we pass 'count' to the listeners of the event.
      event.Trigger(count)
  // Expose the event so that the users of our type can register event handlers
  [<CLIEvent>]
  member x.LimitReached = event.Publish 
```

已发布成员的`CLIEvent`属性是可选的，但最好了解它。它表示该成员将被编译为 .NET 事件（而 C# 将其视为`event`）。如果您不添加它，那么 F# 会将其公开为类型的成员`IEvent`（这对于 F# 使用来说很好）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T02:57:46.123

[这里](http://msdn.microsoft.com/en-us/library/dd233189.aspx)解释得很好。

简而言之，可以想`event.Publish`成是暴露事件的一种方式，让客户端可以通过调用`Add`函数来订阅。`event.Trigger`引发实际事件。

# jquery - 选择具有相同类的所有元素

> ID：15916050
> 
> 赞同：1
> 
> 时间：2013-04-10T02:46:30.410
> 
> 标签：jquery, css

我希望在悬停时突出显示页面上具有相同类的所有元素。

我到目前为止的代码：

```
$(document).ready(function () {
$('p.myclass').mouseover(function () {
    $(this).addClass('hover');
});
$('p.myclass').mouseout(function () {
    $(this).removeClass('hover');
});
}); 
```

[我的简短示例：JSFiddle](http://jsfiddle.net/enigmarm/Y69fr/1/)

目前它只突出显示我悬停的元素。但我希望它突出显示具有相同类的所有元素。这将如何完成？我并不特别是在 CSS3 还是 Jquery 中完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T02:47:57.843

由于`mouseover`将事件处理程序单独附加到查询集合中的每个元素，`this`因此回调内部的值是您悬停的元素，而不是整个集合。代替`this`，使用选择器。

```
$('p.myclass').mouseover(function () {
    $('p.myclass').addClass('hover');
}); 
```

或者，您可以缓存您的集合并参考它以在效率方面适度节省：

```
var coll = $('p.myclass');
coll.mouseover(function () {
    coll.addClass('hover');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:48:38.093

采用

```
$(document).ready(function () {
$('p.myclass').mouseover(function () {
    $('p.myclass').addClass('hover');
});
$('p.myclass').mouseout(function () {
    $('p.myclass').removeClass('hover');
});
}); 
```

# html - 在 C 中将字符串写入文件

> ID：15916060
> 
> 赞同：0
> 
> 时间：2013-04-10T02:47:32.967
> 
> 标签：html, c, file, creation

我正在编写一个基本上进入网页并将内容下载到用户定义的单独文件的 HTTP 客户端。我在写入文件本身时遇到了麻烦，但我遇到了一个奇怪的问题。我将在下面展示几个代码片段，但基本上当有

```
 fprintf(stdout, "%s", htmlcontent); 
```

其中 htmlcontent 定义为

```
 char *htmlcontent; 
```

它将整个 HTML 页面信息打印到标准输出。我还可以通过说 >myfile.txt 将此输出重定向到命令行中的文件（是的，我想比较文本文件而不是 html 文件）。

但是当我做这样的事情时：

```
 fprintf(savedfile, "%s", htmlcontent); 
```

savedfile 定义为

```
 FILE *savedfile; 
```

它是这样打开的：

```
 savedfile = fopen(filename, "w"); 
```

其中文件名定义为

```
 char *filename; 
```

并设置为与其对应的命令行参数。当我执行第二种类型的 fprintf 将其打印到我的文件而不是标准输出时，我没有得到同样的结果，我不知道为什么。谁能帮我理解为什么会有任何区别？如果您希望我发布这两个不同的程序，以便您可以完整地查看它们，请告诉我，我会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:01:19.750

您还没有真正告诉我们这两种输出方法之间有*什么*区别，但是根据给出的信息，应该没有区别。

从功能上讲，写入`stdout`和任何其他正确打开的输出流之间没有区别（存在一些*行为*差异，例如缓冲，但它们不应该影响输出）。

以下记录显示了这一点：

```
pax> cat xyzzy.c
#include <stdio.h>

int main (void) {
    char *filename = "xyzzy.txt";
    char *html = "<tag>some markup</tag>\n";

    FILE *xyzzy = fopen (filename, "w"); // should error check

    fprintf (stdout, "%s", html);
    fprintf (xyzzy, "%s", html);

    fclose (xyzzy);

    return 0;
}

pax> ./xyzzy
<tag>some markup</tag>

pax> cat xyzzy.txt
<tag>some markup</tag> 
```

如您所见，`xyzzy.txt`程序的文件和标准输出都包含相同的信息。

# c++ - 静态本地数据的延迟初始化

> ID：15916061
> 
> 赞同：2
> 
> 时间：2013-04-10T02:47:35.153
> 
> 标签：c++, static, factory, lazy-initialization

我有以下代码（为简单起见，省略了部分代码）

标题：

```
class DbgModuleMarker
{
public:
    DbgModuleMarker( std::string name );

    static std::ostream createStream( const DbgModuleMarker& marker );

    std::ostream& operator()() const;

};

extern DbgModuleMarker PHYSICS; 
```

资源：

```
std::ostream& DbgModuleMarker::operator()() const
{
    static std::ostream os = createStream( *this );
    return os;
} 
```

此代码的目标是允许`operator()`按如下方式使用

```
debug_modules::PHYSICS() << "Foo" << endl; 
```

我真的不知道以这种方式调用函数时静态的行为如何。

我希望该函数`createStream`只会被调用一次（或者如果从未调用过，`operator()`则永远不会被调用

我想知道我所期望的行为是否会发生，如果这是一个可能的想法，或者我正在做一些非常错误的事情而没有注意到它。

对线程安全和异常安全有什么影响？

（考虑创建的流本身是线程安全的，因为 std::ostream 的线程安全不是我关心的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:15:01.553

根据标准，在函数范围内定义的静态成员的初始化只发生一次。

```
 static std::ostream os = createStream( *this ); // initialized only once 
```

此外，如果您使用 C++11，它是线程安全的。

请看一下这些讨论：

1) [C++11 中局部静态初始化的线程安全](https://stackoverflow.com/questions/8102125/is-local-static-variable-initialization-thread-safe-in-c11)。

2)[静态变量的初始化](https://stackoverflow.com/questions/3898306/initialization-of-the-static-variables)。

如果您不使用 C++11，则 operator() 不是线程安全的

```
 static std::ostream os = createStream( *this ); // if not C++11, this is not thread-safe and must be guarded. 
```

# c - 将文本文件中的数据读入数组

> ID：15916065
> 
> 赞同：0
> 
> 时间：2013-04-10T02:48:01.923
> 
> 标签：c, file, input

我需要分析的文本文件中有大量数据。但是，我的问题是我不知道如何编写程序来读取我想要的数据。

我拥有的是一个像这样组织的文本文件：

```
 Event: 23365
     line 2
     Q1: x,y,z= 263.25 -25.112 0.68342
     Q2: x,y,z= 263.25 -25.112 0.68342
     (blank line)
     -next entry organized the same begins- 
```

所以我想做的是以某种方式将这些变量中的每一个放入几个数组中（每个变量一个数组），这样我就可以对它们进行数学运算。

哦，我正在用 C 编码。

我没有文件输入的经验，所以我几乎一无所知。我搜索了教程，但没有太大帮助。所以基本上我需要以某种方式扫描一个文本文件并挑选出数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:29:04.017

好的，这并不漂亮，但这是解析数据的一种方法的示例：

```
// you cant't get away from pointers in C, so might as well as force yourself to use them
// till they make sense. Here are some examples:

// pointer of type data
// data* d;

// d is assigned the address of a memory space the size of a data container
// d = (data*)malloc(sizeof(data));

// d can be dereferenced with *d.
// (*d).identifier is the same as d->identifier

// the memory space you got earlier can (and should) be freed
// free(d);
// if you free d and malloced d->extra, d->extra must be freed first

#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>

// define a type to hold information for each event
typedef struct
{
    char* identifier;
    char* extra;
    double var[6];
} data;

// returns a pointer to a new data
data*
new_data()
{
    // You are going to eventually need to know how malloc works
    // or at least what it does. Just google it. For now, it requests
    // memory from the heap to use
    data* d = (data*)malloc(sizeof(data));              // request memory the size of the type data
    d->identifier = (char*)malloc(sizeof(char)*128);    // request some space for the c string identifier
    memset(d->identifier,'\0',sizeof(char)*128);        // set identifier to all 0's (for null terminated 
                                                        //  strings this means that I can replace the first zero's 
                                                        //  and wherever I stop the c string ends)
    d->extra = (char*)malloc(sizeof(char)*128);         // request some space for the c string extra
    memset(d->extra,'\0',sizeof(char)*128);             // set extra to all 0's
    return d;                                           // return the pointer
}

int main(void)
{
    FILE *fp;   // pointer to file object
    int c;      // char could be used too. This is what holds whatever fgetc is assigned to
    int count = 0;  // This program is a state machine and count represents a state
    char* word = malloc(sizeof(char)*128);  // holds several chars
    int wordPosition = 0;   // position of the next char to be written in word

    fp = fopen("datafile.txt", "r");    // fp is assigned the file datafile.txt in read-only mode
    memset(word,'\0',sizeof(char)*128); // set word to all 0's

    data* d = new_data();   // get a new data container to write information to

    while(c = fgetc(fp))    // loops and gets a new char each loop
    {
        if(!isspace(c) && c != EOF) // if the char isn't white space or the End Of File
            word[wordPosition++] = c;   // add the char to word
        else
        {
            if(strlen(word) != 0)   // skip if word is empty (for example if there were two spaces in a row)
            {
                switch(count)   // determine the state 
                {
                    case(0):
                        // for case 0, you want the word that isn't "Event:", so
                        // count will stay at 0 and add every word that isn't "Event:"
                        // as long as there is only one other word then this will result
                        // in what you want
                        if(!(strcmp(word, "Event:") == 0))
                            strcpy(d->identifier, word);
                        // when there is a new line then go to state 1
                        // '\n' is a white space
                        if(c=='\n')
                            count++;
                        break;
                    case(1):
                        // for case 1 you just want the words on the line, so every word just add
                        // to extra with a space after it. Not the neatest way to do it.
                        strcat(d->extra, word);
                        strcat(d->extra, " ");
                        if(c=='\n')
                            count++;
                        break;
                    case(2): // for case 2 - 7 you just want the numbers so you can do something with them
                    case(3): // so if the first character of the word is a digit or '-' (negative) then 
                    case(4): // add it to var[]. An easy way to know which one is just count-2.
                    case(5): // When a new number is added, go to the next state.
                    case(6): // Then test if count == 8\. If so, you want to reset.
                    case(7): // skipping case 2-6 is simply saying for each of these go to case 7.
                             // that's why you need to break after a case you don't want to continue.
                        if(isdigit(word[0]) || word[0]=='-')
                        {
                            d->var[count-2] = atof(word);
                            count++;
                        }
                        if (count == 8)
                        {
                            // here is where you would do something different with the data you have. 
                            // I imagine you would want an array of data's that you would just add this to
                            // for example, at the beginning of main have
                            // data* events[MAX_EVENTS];
                            // int eventCount = 0;
                            // and here do something like
                            // events[eventCount++] = d;
                            // remember that eventCount++ gets the value first and then increments 
                            // after the instruction is over

                            printf("%s\n",d->identifier);
                            printf("%s\n",d->extra);
                            printf("%f\n",d->var[0]);
                            printf("%f\n",d->var[1]);
                            printf("%f\n",d->var[2]);
                            printf("%f\n",d->var[3]);
                            printf("%f\n",d->var[4]);
                            printf("%f\n",d->var[5]);

                            // set the state back to the beginning
                            count = 0;

                            // if you were doing something with the data, then don't free yet.
                            free(d->identifier);
                            free(d->extra);
                            free(d); 

                            // make a new data and start over for the next event.
                            d = new_data();
                        }
                        break;
                }

                // clear the word and set wordPosition to the beginning
                memset(word,'\0',sizeof(char)*128);
                wordPosition = 0;
            }
        }
        // check if the end of the file is reached and if so then exit the loop
        if(c == EOF)
            break;
    }
    fclose(fp);

    // here you would do something like 
    // for(i = 0; i < eventCount; i++)
    //      total1 += events[i]->var[1];
    // printf("The total of var1 is: %f\n",total1);

    return 0;
} 
```

# facebook - 如何从我的应用发布的图片中获取实时点赞数？

> ID：15916070
> 
> 赞同：0
> 
> 时间：2013-04-10T02:48:44.717
> 
> 标签：facebook, facebook-graph-api, real-time

我正在开发一个应用程序，我想要它做的是：

1.  在用户的墙上贴一个 poto
2.  实时获取此帖子将收到的点赞数

我遇到的第一个问题是根据 post-id 获取点赞数，这是我的照片上传代码：

```
FB.api('/photos', 'post', {
        message: $user_submited_string,
        url:'http://example/url/image.jpg'        
    }, function(response){
        if (!response || response.error) {
            //error handler
        } else {
           var posted_content_id = response.postid;
           console.log(posted_content_id);
        }) 
```

但是当我把这个`posted_content_id`变量放入 Open Graph Debugger 时，我不会得到喜欢的数量作为回报：

```
{
  "id": "1685033176_4107146412059", 
  "from": {
    "name": "João Paulo Apolinário Passos", 
    "id": "1685033176"
  }, 
  "picture": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-prn1/548929_4107355417284_1018318871_s.jpg", 
  "link": "https://www.facebook.com/photo.php?fbid=4107355417284&set=a.4107146292056.1073741826.1685033176&type=1&relevant_count=7", 
  "name": "My Test App Photos", 
  "icon": "https://fbstatic-a.akamaihd.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif", 
  "actions": [
    {
      "name": "Comment", 
      "link": "https://www.facebook.com/1685033176/posts/4107146412059"
    }, 
    {
      "name": "Like", 
      "link": "https://www.facebook.com/1685033176/posts/4107146412059"
    }
  ], 
  "privacy": {
    "description": "Public", 
    "value": "EVERYONE", 
    "friends": "", 
    "networks": "", 
    "allow": "", 
    "deny": ""
  }, 
  "type": "photo", 
  "status_type": "added_photos", 
  "object_id": "4107355417284", 
  "application": {
    "name": "My Test App", 
    "id": "178883808932511"
  }, 
  "created_time": "2013-04-10T01:20:12+0000", 
  "updated_time": "2013-04-10T01:20:12+0000"
} 
```

其中不包含我的图片的类似计数。所以**第一个问题是**：如何获得用户插入的图片的点赞数？

第二件事是，在得到喜欢的数量之后，我想对它们进行排名。为此，我考虑将它们存储到数据库中并设置一个 cron 作业来检查新帖子并使用新帖子更新排名。当我在寻找如何做到这一点时，我遇到了 Facebook 开发者文档的“实时更新”部分。但对我来说，我不清楚我是否可以实时获得类似的计数以及如何获得。这是**我的第二个问题**：我可以使用本机“实时更新”实时获取图像的点赞数吗？如果这不可能，如何创建我自己的计数器？扩展令牌和 cronjobs？

我将这两个问题合二为一，因为也许第二个问题的答案也是第一个。我需要知道的最后一件事：即使它是可行的，做这样的事情在某种程度上违反了 Facebook 政策？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T17:06:14.683

这是因为您查询的是**Post Id**，而不是**Photo Id**。

当您上传照片时，帖子也会自动发布在用户的提要上。要读取照片 ID，您必须使用该`response.id`属性。

在您的示例中，照片的 id 是`4107146412059`，您可以从 form 中的 post id 派生它`<user-id>_<photo-id>`，但不要指望它，因为将来可能会改变。

[Graph API 文档](https://developers.facebook.com/docs/reference/api/photo/)中关于 Photo 对象的文档

**实时更新：**

当用户提要更新时，您可以从 Facebook 获得实时推送通知： ![在此处输入图像描述](https://i.stack.imgur.com/zwVYg.png)

但这太过分了，因为您会将所有帖子都添加到用户提要中，而不仅仅是您的照片。可悲的是，我认为唯一的方法是轮询更新。

有关实时更新的其他信息：[Facebook 文档](https://developers.facebook.com/docs/howtos/managing-realtime-update-subscriptions/)

# java - “找不到战争的导出处理程序”，同时尝试导出 WSO2 网络应用程序

> ID：15916071
> 
> 赞同：0
> 
> 时间：2013-04-10T02:48:45.033
> 
> 标签：java, wso2

在尝试将项目导出为可部署存档时，我不断收到以下错误。这是我在日志中看到的内容：

```
!MESSAGE An error occured while creating the archive file
!STACK 0
java.lang.Exception: Can't find export handler for war
    at org.wso2.developerstudio.eclipse.platform.core.project.export.util.ExportUtil.buildProject(ExportUtil.java:84)
    at org.wso2.developerstudio.eclipse.distribution.project.ui.wizard.ProjectExportWizard.exportArchivable(ProjectExportWizard.java:121)
    at org.wso2.developerstudio.eclipse.distribution.project.ui.wizard.ProjectExportWizard.performFinish(ProjectExportWizard.java:81)
    at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:827)
    at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:432)
    at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
    at org.eclipse.jface.window.Window.open(Window.java:801)
    at org.wso2.developerstudio.eclipse.distribution.project.ui.action.ExportProjectAction.run(ExportProjectAction.java:36)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1053)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T17:54:05.557

出现此问题的原因是 web-app 项目的 pom.xml 中缺少以下属性。

```
<properties>
    <CApp.type>web/application</CApp.type>
  </properties> 
```

将其添加到 Web-App 项目 pom.xml 后，您将能够成功导出 WAR 文件。

/哈莎娜

# c# - DateTime Ticks，检查重叠日期 C#

> ID：15916075
> 
> 赞同：-3
> 
> 时间：2013-04-10T02:49:27.753
> 
> 标签：c#

可以说 I 2 long 开始和结束，这实际上是两个转换为刻度的日期时间。我如何判断这两个值是否重叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:13:56.533

正如 MPelletier 提到的：您需要两对 DateTimes：

```
var start1 = new DateTime(2013, 4, 10).Ticks;
var end1 = new DateTime(2013, 4, 20).Ticks;

var start2 = new DateTime(2013, 4, 9).Ticks;
var end2 = new DateTime(2013, 4, 11).Ticks;

if (start2 < end1)
{
    //// Overlapping
} 
```

# java - 适用于 API 级别 10 的 OpenGL 的 Android 教程

> ID：15916078
> 
> 赞同：1
> 
> 时间：2013-04-10T02:49:43.207
> 
> 标签：java, android, opengl-es

我目前正在尝试学习如何在 Android 中使用 OpenGLes，但我发现的所有教程都不使用 API 级别 10。（即 Gingerbread/2.3）

编辑：好吧，至少他们说他们使用它，但是当我构建它时，它会给我错误，就好像它不存在一样......

他们需要`EGLConfig`设置渲染器和表面。例子：

```
public void onSurfaceCreated(GL10 gl, EGLConfig config)... 
```

取自[本教程](http://android-developers.blogspot.com/2009/04/introducing-glsurfaceview.html)。

有谁知道这个问题的解决方案，或者参考一个这样做的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:56:56.957

AFAIK EGLConfig 自第 1 级以来一直存在，不是吗？不过，这是一个*非常*古老的教程。

也许像[这样](http://www.learnopengles.com/android-lesson-one-getting-started/?)最近的东西？

# c - Mac OS 编译动态 C lib 错误（lib 函数将在 lua 中调用）

> ID：15916082
> 
> 赞同：1
> 
> 时间：2013-04-10T02:50:36.370
> 
> 标签：c, lua, shared-libraries

Mac OS 编译动态 C lib 错误（lib 函数将在 lua 中调用）

```
#include "lua.h"
#include "lualib.h"
#include "lauxlib.h"
#include <stdio.h>

static int myCfunc ( lua_State *L) 
{
  printf ("Roses are Red\n");
  return 0; 
}

int luaopen_fromlua(lua_State *L) 
{
  static const luaL_Reg Map[] = { {"dothis", myCfunc}, {NULL,NULL} } ;
  luaL_register(L, "cstuff", Map);
  return 1; 
} 
```

编译错误1：

```
william:Desktop william$ gcc -o example.so -I /usr/local/include -L /usr/local/lib -fpic -shared test.c -llua -Wall
test.c: In function ‘main’:
test.c:43: warning: implicit declaration of function ‘lua_open’
test.c:43: warning: assignment makes pointer from integer without a cast
Undefined symbols for architecture x86_64:
  "_lua_open", referenced from:
      _main in cczPGNkR.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
william:Desktop william$ 
```

编译错误2：

```
william:Desktop william$ g++ -o example.so -L/usr/local/lib -I/usr/local/include test.c -llualib
test.c: In function ‘int luaopen_fromlua(lua_State*)’:
test.c:18: error: ‘luaL_register’ was not declared in this scope
william:Desktop william$ 
```

我的环境：

Mac 10.7.5

```
william:Desktop william$ lua -v
Lua 5.2.2  Copyright (C) 1994-2013 Lua.org, PUC-Rio
william:Desktop william$ 

william:Desktop william$ locate lua
/usr/local/Library/Formula/lua.rb
/usr/local/Library/Formula/luajit.rb
/usr/local/Library/Formula/luarocks.rb
/usr/local/Library/Formula/metalua.rb
/usr/local/bin/lua
/usr/local/bin/luac
/usr/local/include/lua.h
/usr/local/include/lua.hpp
/usr/local/include/luaconf.h
/usr/local/include/lualib.h
/usr/local/lib/liblua.a
/usr/local/lib/lua
/usr/local/lib/lua/5.2
/usr/local/man/man1/lua.1
/usr/local/man/man1/luac.1
/usr/local/share/lua
/usr/local/share/lua/5.2
/usr/share/file/magic/lua 
```

有机构能帮我解决吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:33:01.580

1.  更改`-shared`为`-bundle -undefined dynamic_lookup`。

2.  `luaL_register`不是 Lua 5.2 的一部分，除非你打开与`-DLUA_COMPAT_MODULE`. 或者只是使用这个

    `#define luaL_register(L,n,l) (luaL_openlib(L,(n),(l),0))`

创建共享库时，不要*将*其`.so`与 Lua 库链接。

# youtube - 如何通过偏移量从 youtube 获取视频

> ID：15916083
> 
> 赞同：1
> 
> 时间：2013-04-10T02:50:39.867
> 
> 标签：youtube, youtube-api, youtube-javascript-api

是否可以通过 Y 用户的 X 标签查询 YouTube API 的视频，但使用偏移量来构建分页列表。换句话说，从 Y 用户偏移量 10 通过 X 标记获取视频。我想这样做，这样我就可以建立一个分页列表。

```
catgeory=someTag&user=myUserName&offset=100 
```

我正在构建一个 Vlog 应用程序，一次加载 380 个结果对我来说不起作用。我基本上需要一次加载 20 个。

# mysql - 我必须查询两次才能得到这个结果吗？

> ID：15916085
> 
> 赞同：0
> 
> 时间：2013-04-10T02:50:49.357
> 
> 标签：mysql, sql

SQL 新手。我有 3 个表：`games`、`invitations`和`users`

此查询返回正在进行的游戏：

```
SELECT games.* 
FROM   games 
       INNER JOIN invitations 
               ON invitations.game_id = games.id 
                  AND invitations.user_id = 1 
                  AND invitations.status = 1 
                  AND games.status = 1; 
```

此查询返回已完成的游戏：

```
SELECT games.* 
FROM   games 
       INNER JOIN invitations 
               ON invitations.game_id = games.id 
                  AND invitations.user_id = 1 
                  AND invitations.status = 1 
                  AND games.status = 2; 
```

此查询返回用户仍未决定是否加入的游戏：

```
SELECT games.* 
FROM   games 
       INNER JOIN invitations 
               ON invitations.game_id = games.id 
                  AND invitations.user_id = 1 
                  AND invitations.status = 0; 
```

我想知道，如果我有一个需要这 3 个查询结果的 Web 应用程序，我是否必须执行 3 个 sql 语句，或者有没有办法将它们压缩成 1 个？提出 3 个请求对我来说似乎太多了，这是正常的处理方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:54:35.007

你可以像这样压缩它：

```
SELECT games.*, 
       CASE WHEN invitations.status = 1 THEN games.status 
            ELSE invitations.status 
       END status 
FROM   games 
   INNER JOIN invitations 
   ON invitations.game_id = games.id 
      AND invitations.user_id = 1 
      AND ((invitations.status = 1 AND games.status IN (1,2))
         OR (invitations.status = 0)) 
```

您可以使用返回的`status`列来确定哪一行是哪一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:57:09.843

试试这个

```
SELECT 
case when invitations.status = 1 
 then case 
        when games.status = 1 then 'progress'
        when games.status = 2 then 'finished'
      end
else 'not decided' end as game_status,
games.* 
FROM   games 
       INNER JOIN invitations 
               ON invitations.game_id = games.id 
                  AND invitations.user_id = 1 
                  AND (invitations.status = 0 or 
                        (invitations.status = 1 and games.status in (1,2))) 
```

[SQL 演示](http://sqlfiddle.com/#!2/1270b/1)

# command-line - 即使在 GAC 中使用共享程序集，BTSTask AddResource 也会失败

> ID：15916089
> 
> 赞同：1
> 
> 时间：2013-04-10T02:51:03.043
> 
> 标签：command-line, biztalk, gac, biztalk2006r2

我正在尝试创建 BizTalk 应用程序 ( ) 并使用命令行实用程序`App1`添加资源。`BTSTask`一些`App1`BizTalk 程序集依赖于一些`SharedApp`BizTalk 程序集。我`SharedApp`使用将程序集添加到 GAC`gacutil`并验证它们存在于 GAC 中。当我运行时，对于依赖于任何程序集`BTSTask AddResource`的任何 BizTalk 程序集，该命令都会失败。`App1``SharedApp`

`SharedApp`错误消息告诉我找不到特定的dll 以供参考。我已验证程序集上的详细信息（名称、版本等）`SharedApp`是否正确；它是正确的程序集并且存在于 GAC 中。

BizTalk 不应该能够`SharedApp`在 GAC 中检测到这些程序集并允许它们在我调用时用作参考程序集`AddResource`吗？

`SharedApp`关于为什么将程序集添加到 GAC 没有解决我的问题的任何想法？

**编辑：添加命令行示例文本**

```
BTSTask.exe AddApp -ApplicationName:App1 -Server:BTServer1 -Database:BTDatabase1 -Description:App1_instance
BTSTask.exe AddResource -ApplicationName:App1 -Source:"path_to_App1.Assembly.dll" -Destination:"destination_path_for_App1.Assembly.dll" -Type:BizTalkAssembly -Options:GacOnAdd,GacOnInstall -Overwrite -Server:BTServer1 -Database:BTDatabase1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:09:57.330

这是 BizTalk 2010 吗？在这种情况下，它可能与 .NET 4.0 引入的“双缓存”有关。您可能知道，现在有 2 个全局程序集缓存，来自 2.0 GAC 的程序集不能使用 4.0 GAC 程序集。
因此，也许您的 SharedApp 位于 .NET4.0 缓存中，而您要添加的资源是针对旧版本的 BizTalk 编译的？

只是大声思考，你永远不知道它是否有帮助。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:19:01.170

在深入了解我们的自动化并启用详细日志之后，我能够得到更清晰的错误消息：

```
Error: Assembly "App1.Assembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=xxxxxxxxxx" references the following assemblies that must be deployed before deploying this assembly: Assembly "SharedApp.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=yyyyyyyyyyyyyyyy" 
```

在在线搜索该错误后，我从[讨论帖子](http://www.windows-server-answers.com/microsoft/BizTalk/30337132/assembly-x-references-the-following-assemblies-that-must-be.aspx)中发现了以下内容：

> 如果 [a] DLL 包含 XSD (BizTalk) 架构，它也必须部署到 BizTalk 管理数据库。

显然，除了将程序集添加到 GAC 之外，还必须这样做。这就是为什么将`App1`程序集添加到我的应用程序会失败的原因；虽然我将`SharedApp`BizTalk 程序集添加到 GAC，但 BizTalk 管理数据库中也需要它们。

感谢那些关注这个问题的人。

# mysql - mysql 查询是否将临时表写入磁盘，它到底在写什么？

> ID：15916090
> 
> 赞同：1
> 
> 时间：2013-04-10T02:51:11.707
> 
> 标签：mysql

我正在优化一个`mysql`查询，该查询将 2 个表连接在一起，并有一些 where 子句和一个 order by。

我注意到（使用解释）在查询评估期间创建了一个临时表。（因为我正在对不是加入队列中第一个表的表中的字段进行分组）

我真的很想知道这个临时表是否正在写入磁盘，解释结果没有告诉我。

能够知道究竟是什么进入所述临时表也很好。我的 where 子句中的一些限制是在索引列上，而有些则不是，所以我认为 mysql 可能不会以最佳方式将行选择到临时表中。

具体来说，我的查询基本上是以下形式： select ... from a join b where ... 对索引列和非索引列的 a 和 b 都有限制。问题是进入从 a 中选择的临时表的行数比我怀疑的要多。我想对此进行调查。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-10T04:32:19.447

所有数据库都使用内存区域或工作区域来执行查询，并将根据您构建查询的方式在这些内存区域中使用临时表。如果您加入多个表，它可能会使用多个表来构建最终结果集。只要用户登录，这些临时表通常就存在于内存中。

Explain 说明了它在解释 SQL 时尝试优化的过程。如果您的 where 子句索引不佳，或者您在连接中使用 where 子句，则可能会在执行和构建最终结果集时将过多的数据拉入内存。这就是数据库级别性能不佳的样子。

通过阅读最后一段中的伪代码，我会说您需要一些索引并重写您的 Where 子句以加入索引字段。如果您真的想发表意见，请发布您的 SQL。

# python - Python 初学者：从 NP++ 运行但不是 IDLE 时出现 ImportError

> ID：15916092
> 
> 赞同：1
> 
> 时间：2013-04-10T02:51:40.530
> 
> 标签：python, notepad++, nppexec

我正在使用 Python 3.3（也安装了 2.7）和兼容版本的 pygame。最近我一直在尝试从 IDLE 切换到 Notepad++

我在记事本++中使用保存的快捷方式

```
 C:\Python33\python.bat "$(CURRENT_DIRECTORY)" "$(FILE_NAME)" 
```

运行批处理文件：

```
 @echo off

    cd %1
    %2

    if not errorlevel 1 goto quit
    echo.
    echo.
    pause
    :quit 
```

当我运行 C:\Python33\Foldername\imp_prob.py

```
 import pygame 
```

在 IDLE 中它工作正常，在 Notepad++ 中使用该快捷方式会给出 ImportError: No module named pygame

我的问题是：

1.  为什么 NP++ 方法没有产生相同的结果？
2.  如何更改快捷方式或批处理文件以使其运行 IDLE 可以运行的东西？
3.  无论我从哪个目录运行程序，我可以使用什么方法来确保我可以导入模块？

编辑：一个可行的替代方案是[如何从notepad ++中运行python脚本？](https://stackoverflow.com/questions/2392629/how-do-you-run-a-python-script-from-within-notepad)

我对他们提供的代码有一些问题，但是用我的 python33 安装的完整路径替换“python”解决了这个问题。

我仍然不明白为什么使用我的运行快捷方式时 pygame 不会导入。我也不明白为什么 NppExec 在 Run 不工作时工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:02:19.600

听起来您需要设置系统变量。空闲不需要这些步骤。您在 np++ 中输入了 python.exe 的完整路径来执行 python 程序，但模块等的路径仍然未知。

添加路径，然后重试。

系统属性 -> 高级 -> 环境变量，在底部窗口中查找“路径”变量，编辑并附加以下现有条目（不要删除其中的任何内容！）

;C:\Python33;C:\Python33\DLLs;C:\Python33\Lib

对于 Python 3.3，如果您已将其安装到其默认目录中。

要查看是否一切正常，请在任意位置打开控制台（shift+右键单击 -> 在此处打开命令窗口），然后输入“python”。python 控制台应该会打开，告诉您您使用的是 python 3.3。然后，您也不需要告诉 np++ 完整的 python 路径，而是可以再次使用“python”。

# c++ - 将输出放入指定的文件行时覆盖额外的文件行

> ID：15916094
> 
> 赞同：0
> 
> 时间：2013-04-10T02:51:56.140
> 
> 标签：c++, visual-studio-2010, output, fstream, overwrite

嘿，我有一个愚蠢的问题，但我的代码有点问题。我正在尝试覆盖文件的一行，这就是它的作用，但问题是它也覆盖了其他文件行。我正在使用 C++ Visual Studios 2010。我的代码如下。

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

const string FILENAME = "DatabaseTest.txt";

fstream& GoToLineI(fstream& file, int num)
{
file.seekg(ios::beg);
for(int i = 0; i < num+1; i++)
    file.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
return file;
}

fstream& GoToLineO(fstream& file, int num)
{
file.seekp(ios::beg);
for( int i = 0; i < num; i++)
{
    //gets the length of the line.
    GoToLineI(file, i);
    string s;
    file >> s;
    long pos = file.tellp();
    file.seekp( pos + s.length() );
}
return file;
 }

int main()
{
fstream myfile(FILENAME.c_str(), ios::out);
myfile.close();
myfile.open(FILENAME.c_str(), ios::in | ios::out);

myfile << "Usernames:" << endl;

for( int j = 0; j < 101; j++)
    myfile << j << endl;

cout << "Where do you want to grab the data from?";
int i = 0;
cin >> i;

GoToLineI(myfile, i);

string line;
myfile >> line;

cout << line << endl;

GoToLineO(myfile, i);

if( myfile.is_open() )
{
    cout << "File should be writeable" << endl;
    myfile << "This should be at line 75" << endl;
}

myfile.seekp(ios::end);

system("PAUSE");

myfile.close();

return 0;
} 
```

问题可能在于我如何拥有我的 GoToLineO，这就是我如何找到到达输出行的位置，并且它调用 GoToLineI 以获取行的长度，直到它到达正确的行以开始显示输出. 此代码生成的输出就是这样。

```
72
73
74
This should be at line 75
82
83
84 
```

它应该是这样的：

```
73
74
This should be at line 75
76
77
78
79
80
81 
```

任何形式的见解或建议将不胜感激。

编辑：更改为仅应显示的输出的重要部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:08:17.933

如果您寻找文件中的某个位置，然后开始在那里写入，您所写的内容将覆盖与您所写内容完全相同的字节数——有点像始终处于覆盖模式而不是插入模式的编辑器。

如果您希望结果保持为简单的文本文件，您所能做的就是将数据复制到新文件中，将新数据插入正确的位置，然后将原始文件中的剩余数据复制到新文件中您插入的新数据。

如果您希望该结果与原始结果具有相同的名称，您有几个选择 - 您可以将整个结果复制回现有文件，或者（如果您不担心多个硬链接到原始文件）您可以删除原始文件，并将新文件重命名为旧名称。

# string - Java 应用程序。字符串操作

> ID：15916096
> 
> 赞同：1
> 
> 时间：2013-04-10T02:52:12.497
> 
> 标签：string, jtextfield, string-length

我想限制没有。可以放入的字符，`JTextField`因为在我的数据库中，我有这个具有 Sex,Status 的列（允许的字符数仅为 1）。

和中间首字母（允许的字符数仅为 2）。

这就是我的想法：

（对于性别，状态列）

```
String text = jTextField2.getText();
        int count = text.();
        if (count>1) {
            (delete the next character that will be input)
        } 
```

（对于 MI 列）

```
String text = jTextField1.getText();
        int count = text.();
        if (count>2) {
            (delete the next character that will be input)
        } 
```

这可能吗？有没有删除下一个字符的命令，所以没有。的字符。我的数据库可以接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:06:42.163

当然。只需使用[String#substring](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring(int,%20int))。

```
String middleInitial = "JKL";
middleInitial.substring(0, 2);
System.out.println(middleInitial); // => JK 
```

同样，您可以`substring(0, 1)`用于性。

不过，如果性是一个枚举可能会更好。

```
public enum Sex {
  MALE("m"), FEMALE("f");

  final String symbol;
  private Sex(String symbol) {
    this.symbol = symbol;
  }
} 
```

现在你可以像这样使用它：

字符串性别=“男”；Sex.valueOf(sex.toUpperCase());

或者直接

```
Sex.MALE; 
```

您可以使用[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)而不是性别文本字段，这样用户只能选择两个选项之一。这样你肯定有有效的输入。

# objective-c - NSDecimalNumber 加法丢失小数位

> ID：15916097
> 
> 赞同：0
> 
> 时间：2013-04-10T02:52:22.503
> 
> 标签：objective-c, nsdecimalnumber

我正在尝试制作一个计算器 iphone 应用程序，我的老师说我们必须使用 NSDecimalNumber。我有很多麻烦。我试图让它的加法部分正确，但是在将像 1.24 这样的数字添加到像 33 这样的整数时遇到了麻烦。当我希望它是 34.24 时，结果是 34。有谁知道如何制作它，所以它会以这种方式出现？这是代码的相关部分

```
 -(void)outputNumber: (NSDecimalNumber*) number
{
    //used to format number of decimal places
    NSNumberFormatter* formatter = [[[NSNumberFormatter alloc] init] autorelease];
    [formatter setMaximumFractionDigits:self.afterDecimal];

    //output the number to calculator
    NSString* formatNumber = [formatter stringFromNumber:[NSNumber numberWithDouble:[number doubleValue]]];
    self.inputLabel.text = [NSString stringWithFormat: @"%@", formatNumber];

    if (self.isWaiting == TRUE) {
        self.numberB = number;
        //change button title default color
        [self.myButton setTitleColor:[UIColor colorWithRed:.196 green: .3098 blue: .52 alpha: 1] forState: 0];
    }
    else {
        self.numberA = number;
    }
}
if (self.binaryTag == 6) {
        self.numberC = [self.numberB decimalNumberByAdding: self.numberA]; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:11:08.533

实际上`NSNumberFormatter`不能与`NSDecimalNumber`. 它把一切都变成了`double`第一个。

使用`NSDecimalNumber`的时候尽量用自己的方法四舍五入再转换成`NSString`。使用 a`NSNumberFormatter`您将失去精度。

# iphone - iPhone iPad 应用程序的错误存储库

> ID：15916099
> 
> 赞同：3
> 
> 时间：2013-04-10T02:53:00.583
> 
> 标签：iphone, ios, repository, bug-reporting

是否有任何开源或公共领域的错误存储库，可以在其中查看特定应用程序的 ios 应用程序的错误。

有一些适用于 android，因为它是开源的，例如 Keepassdroid 的 bug 存储库：[http ://code.google.com/p/keepassdroid/issues/](http://code.google.com/p/keepassdroid/issues/)

是否有任何流行的 iOS 应用程序？

# javascript - 检查元素是否有类然后前置和元素

> ID：15916100
> 
> 赞同：0
> 
> 时间：2013-04-10T02:53:03.223
> 
> 标签：javascript, jquery, class, prepend

我在这里想要实现的是，当用户单击一个元素时，它会被隐藏，一旦发生这种情况，我想在包含元素内添加另一个元素，以使所有这些项目再次可见。

```
var checkIfleft = $('#left .module'),checkIfright = $('#right .module');
   if(checkIfleft.hasClass('hidden')) {
       $('#left').prepend('<span class="resetLeft">Reset Left</span>');
        } else if(checkIfright.hasClass('hidden')) {
          right.prepend('<span class="resetRight">Reset Right</span>');
       } 
```

我尝试了多种方法，老实说，我相信`.length ==1`这是我最好的选择，因为我只希望添加一个元素。我相信上面的 JS 会在每次隐藏新项目时添加一个新元素（如果它有效）。

其他尝试：

```
var checkIfleft = $('#left .module').hasClass('hidden'),
    checkIfright = $('#right .module').hasClass('hidden');
   if(checkIfleft.length== 1) {
       $('#left').prepend('<span class="resetLeft">Reset Left</span>');
        } else if(checkIfright.length== 1) {
          right.prepend('<span class="resetRight">Reset Right</span>');
       } 
      else if(checkIfleft.length==0){
          $('.resetLeft').remove()
      } else if (checkIfright.length==0){
         $('.resetRight').remove()
      } 
```

基本上，如果容器内的一个元素被隐藏，我希望出现一个重置按钮，如果不删除该重置按钮......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:04:40.713

`hasClass()`仅适用于集合中的第一项，因此它不会做您想要的。它不会告诉您是否有任何项目具有该类别。

你可以做这样的事情，而不是计算有多少隐藏项目，如果有 1 个或更多并且还没有重置按钮，那么你添加重置按钮。如果没有隐藏项目并且有一个重置按钮，则将其删除：

```
function checkResetButtons() {

    var resetLeft = $('#left .resetLeft').length === 0;
    var resetRight = $('#left .resetRight').length === 0;
    var leftHidden = $('#left .module .hidden').length !== 0;
    var rightHidden = $('#right .module .hidden').length !== 0;

    if (leftHidden && !resetLeft) {
        // make sure a button is added if needed and not already present
        $('#left').prepend('<span class="resetLeft">Reset Left</span>');
    } else if (!leftHidden) {
        // make sure button is removed if no hidden items
        // if no button exists, this just does nothing
        $('#left .resetLeft').remove();
    }

    if (rightHidden && !resetRight) {
        $('#right').prepend('<span class="resetRight">Reset Right</span>');
    } else if (!rightHidden) {
        $('#right .resetRight').remove();
    }

}

// event handlers for the reset buttons
// uses delegated event handling so it will work even though the reset buttons
// are deleted and recreated
$("#left").on("click", ".resetLeft", function() {
    $("#left .hidden").removeClass("hidden");
    $("#left .resetLeft").remove();
});

$("#right").on("click", ".resetRight", function() {
    $("#right .hidden").removeClass("hidden");
    $("#right .resetRight").remove();
}); 
```

仅供参考，如果我们可以更改 HTML 以使用更常见的类，那么左右的单独代码可以组合成一段通用代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:04:52.080

隐藏时添加重置按钮`.module`，如果它不存在：

```
$('#left .module').on('click', function() {
    $(this).addClass('hidden');
    var parent = $(this).closest('#left');
    if ( ! parent.find('.resetLeft') ) {
       var res = $('<span />', {'class': 'resetLeft', text : 'Reset Left'});
       parent.append(res);
       res.one('click', function() {
           $(this).closest('#left').find('.module').show();
           $(this).remove();
       });
    }
}); 
```

重复右侧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:35:36.280

我最近尝试使用 CSS 来做一些这样的事情，我觉得如果你不尝试为它制作动画，它会很好地工作。这是一个[jsfiddle](http://jsfiddle.net/asifrc/HBxtA/)，我可以在其中隐藏一个模块并通过向两个模块的共同父级添加/删除一个“hideLeft”或“hideRight”类来一次性显示重置按钮。

它首先隐藏两个重置按钮 div。然后它使用`.hideLeft #left { display:none;}`and`.hideLeft #right .resetLeft { display: block; }`来隐藏左侧模块，并`.hideLeft`在添加到两个元素所来自的任何元素时显示重置按钮。不久前，我受到了modernizr 的启发，并认为这是一种简洁的替代方式。让我知道你的想法，如果你觉得它有帮助，如果你有任何问题:)

# linux - 如何使用指定的字符串 grep 并将值存储在 unix 中

> ID：15916102
> 
> 赞同：1
> 
> 时间：2013-04-10T02:53:17.943
> 
> 标签：linux, shell, unix

下面是我的输入文件，

```
Server:         172.16.249.150
Address:        172.16.249.150#53

Non-authoritative answer:
cloud-us-east.digital-element.net       canonical name = usa.cloud.netacuity.com.
usa.cloud.netacuity.com canonical name = us-east.cloud.netacuity.com.
us-east.cloud.netacuity.com     canonical name = de-prod-nacs.elasticbeanstalk.com.
de-prod-nacs.elasticbeanstalk.com       canonical name = awseb-prod-nacs-397853066.us-east-1.elb.amazonaws.com.
Name:   awseb-prod-nacs-397853066.us-east-1.elb.amazonaws.com
Address: 54.243.94.244
Name:   awseb-prod-nacs-397853066.us-east-1.elb.amazonaws.com
Address: 54.243.113.63 
```

我想要一个像下面这样的输出，54.243.94.244 54.243.113.63

只有最后两个IP地址，

输入文件将来可能会有所不同，最后可能有很多IP地址。所以我需要单独排除第一个ip。如何实现这个unix？请提出一些命令。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:57:11.620

对于给定的输入文件，最直接的方法是：

```
$ grep "Address:" input.txt  | awk -F: '{print $2}' | tail -2
54.243.94.244
54.243.113.63 
```

或者：

```
$ nslookup cloud-us-east.digital-element.net  | grep "Address:"  | awk -F: '{print $2}' | tail -2 
```

单行，给 tr 添加一个管道：

```
$ nslookup cloud-us-east.digital-element.net  | grep "Address:"   | awk -F: '{print $2}' | tail -2 | tr '\012' ' '
54.243.94.244 54.243.113.63 
```

对于“主机”查找：

```
$ host cloud-us-east.digital-element.net | tr ' ' '\012' | grep -vi "[a-z]"
54.243.113.63
54.243.94.244 
```

编辑：

对于“nslookup”跳过名称服务器：

```
$ nslookup cloud-us-east.digital-element.net  | grep "Address:" | grep -v "#"  | awk -F: '{print $2}' 
54.243.113.63
54.243.94.244 
```

# wpf - 将 UI 元素的宽度绑定到另一个 UI 元素宽度的百分比

> ID：15916103
> 
> 赞同：1
> 
> 时间：2013-04-10T02:53:28.107
> 
> 标签：wpf, xaml

基于[this question](https://stackoverflow.com/questions/5873007/wpf-control-width-binding)，但略有不同。

我不确定这是否可能。有没有办法将 UI 元素的宽度链接到另一个元素的宽度**百分比**？

例如：

```
<ScrollViewer x:Name="scrollviewerWrapper">

     <TextBlock x:Name="textblock" 
                Width="{Binding Path=Width, [[[ % of ]]] ElementName=scrollviewerWrapper}" />

</ScrollViewer> 
```

所以如果我的 ScrollViewer 是 100px，我希望我的 TextBlock 是 60% = 60px（scrollviewer 的宽度是动态的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T03:31:04.547

所以我最终使用转换器来传递一个数字。想一想，而不是百分比，我选择了总数减去固定宽度的剩余部分，因为我有一个数字。

XAML：

```
Width="{Binding Path=ActualWidth, ElementName=exampleElement, Converter={StaticResource MyConverter}, ConverterParameter={StaticResource ResourceKey=actionAreaWidth}}"> 
```

参数转换：

```
<clr:Double x:Key="actionAreaWidth">150</clr:Double> 
```

和转换器本身：

```
 public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {

            double percentage = 100;
            double.TryParse(parameter.ToString(), out percentage);

            var actualWidth = (double)value;
            return actualWidth * (percentage / 100);
        } 
```

# java - 链接列表数组的广度优先搜索[编辑/缩短错误]

> ID：15916110
> 
> 赞同：0
> 
> 时间：2013-04-10T02:54:19.823
> 
> 标签：java, search, graph, linked-list, breadth-first-search

我正在研究在一个小世界（无向图）中，长距离连接如何缩短任何给定节点之间的路径长度。基本上我有一个链表数组。数组中的每个部分都链接到任一侧的第一个和第二个邻居，然后实现一些随机连接（制作邻接表）。

现在我必须对阵列中的每个点进行 BFS，以查看从阵列中的一个点到另一个点需要多少移动。

例如，这就是阵列的前 9 个点的样子

```
[1, 2]
[0, 2, 3]
[0, 1, 3, 4]
[1, 2, 4, 5]
[2, 3, 5, 6]
[3, 4, 6, 7]
[4, 5, 7, 8, 114]
[5, 6, 8, 9]
[6, 7, 9, 10]
[7, 8, 10, 11] 
```

如您所见，数组中的点 0 与 1 和 2 相邻，因为另一侧没有任何东西。Spot 6 与 Spot 114 有远程连接之一。

这是我在 bfs amd 上的尝试，我遇到了一些错误。首先你觉得它看起来怎么样？但我得到一个空指针异常就行了

```
u = q.remove(); 
```

空指针异常。知道为什么吗？你现在应该等于1。但我知道为什么它不起作用。我做了一些打印输出以查看它是否正常工作，并且在 addAll 之后 q = [1, 2] 所以当我打印输出 q.remove = 1 时，但由于某种原因现在它停止了我的程序！

```
public static int bfs(List<Integer>[] smallWorld, int start){

    int distance = 0;
    int size = smallWorld.length;

    //for each location in smallWorld do a bfs to every other location      
    int u;
    int white = 0, grey = 1, black = 2;
    int [] color, d, pie;
    Queue <Integer> q = new <Integer> LinkedList();

    color = new int [size];
    d = new int [size];
    pie = new int [size];

    for( int x = 0; x < size; x++){
        color[x] = white;
        d[x] = -1;
        pie[x] = -1;
    }

    color[start] = grey;
    d[start] = 0;
    pie[start] = -1;
    q.addAll(smallWorld[start]);        //enqueue the adjacent items
    while(q != null){
        u = q.remove();
        for(int v = 0; v < smallWorld[u].size(); v++){      //for every vertex u is adjacent to
            if(color[v] == white){
                color[v] = grey;
                d[v] = d[u] + 1;
                pie[v] = u;
                q.addAll(smallWorld[v]);
            }
        }
        color[u] = black;
    }

    return distance;
} 
```

多谢你们！

# html - 使用 position:fixed 固定 div 内的 div

> ID：15916111
> 
> 赞同：0
> 
> 时间：2013-04-10T02:54:26.823
> 
> 标签：html, css

有人可以帮助我将列表 div 下的列表项固定但可滚动吗？

```
<div id="listings"> 
```

因此，当用户希望向下滚动页面时，列表 div 是唯一滚动的框。基本上将其他所有内容都固定下来。我在这里模拟了它[http://jsfiddle.net/aQpwt/1/](http://jsfiddle.net/aQpwt/1/)

我一直在尝试使用 position:fixed 但它没有按计划工作。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:58:38.627

将 CSS 类更新为：

```
#listings {
    float:right;
    width:790px;
    max-height: 100px;
    overflow:scroll;
} 
```

并删除前导`<br>`：

```
<br class="clear" /> 
```

# iphone - iOS - 在另一个 UIViewController 中呈现一个 UIViewController

> ID：15916116
> 
> 赞同：1
> 
> 时间：2013-04-10T02:54:54.523
> 
> 标签：iphone, ios, cocoa-touch, ios6, uiviewcontroller

**我对这个话题不是很了解，所以请多多包涵**

我试图在另一个 UIViewController 中显示一个 UIViewController。我觉得那里没有足够的例子。我已经阅读了文档，但对 iOS 来说还很陌生，我有点迷路了。

这是我的问题：我可以让子 UIViewController 出现在父 UIViewController 内，但子视图显示不正确。

*抱歉，我还不能发图片。*
这是我的孩子 - [UIViewController](http://i.imgur.com/CQ0jXcd.png)。
这是我的父母 - [UIViewController](http://i.imgur.com/2Q8GDyX.png)。（蓝色区域是添加子视图的地方）

**结果如下：**
蓝色 UIView 到位 - [http://i.imgur.com/4vny8EZ.png](http://i.imgur.com/4vny8EZ.png)

*如果我将蓝色 UIView 移到右侧，那么*
蓝色 UiView 移到右侧会发生什么 - [http://i.imgur.com/XCOBwr6.png](http://i.imgur.com/XCOBwr6.png)

我尝试了很多不同的东西，但我对这个主题缺乏了解，这确实让我很难找出问题所在。

这是我在父 UIViewControllers 类中加载子 UiViewController 的方式：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Add Calculations View Controller
    CalculationViewController *calculationController = [self.storyboard instantiateViewControllerWithIdentifier:@"Calculate"];
    [self addChildViewController:calculationController];
    calculationController.view.frame = self.calcualtionView.bounds;

    [self.calcualtionView addSubview:calculationController.view];

} 
```

所以，我的问题是为什么它以一种奇怪的方式显示子视图？
谢谢！

*另外，对不起，我只能发布两个链接。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:07:31.433

将代码移动到 viewDidAppear。如果calculationView 是一个视图的IBOutlet，它的边界在viewDidLoad 中将为零。直到 viewDidAppear 才设置视图框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:36:27.150

快速回答：直到`viewWillAppear`. 在那里设置框架，它将起作用。

更长的答案：

1）如果您使用的是iOS6，我鼓励您使用`NSLayoutConstraints`来处理视图大小和定位，而不是手动设置视图框架。真正理解约束需要一点时间，但是一旦你这样做了，它们就比设置框架更强大和灵活，你不必担心何时或如何`IBOutlets`创建你的

2）您没有正确添加您的子视图控制器。您*必须*`didMoveToParentViewController:`在添加视图后调用。由于缺少代码行以及使用约束而不是框架，您的代码如下所示：

```
CalculationViewController *calculationController = 
              [self.storyboard instantiateViewControllerWithIdentifier:@"Calculate"];
calculationController.translatesAutoresizingMaskIntoConstraints = NO;
[self addChildViewController:calculationController];
[self.calcualtionView addSubview:calculationController.view];
[calculationViewController didMoveToParentViewController:self];

// Add constraints for the view to fill calculationView
UIView *calcView = calculationController.view;
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(calcView);
NSArray *hConstraint = 
       [NSLayoutConstraint constraintsWithVisualFormat:@"H:|[calcView]|" 
                                               options:0 metrics:nil
                                                 views:viewsDictionary];
[self.calculationView addConstraints:hConstraint];
NSArray *vConstraint = 
       [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[calcView]|" 
                                               options:0 metrics:nil
                                                 views:viewsDictionary];
[self.calculationView addConstraints:vConstraint]; 
```

# ruby-on-rails - Rails sql查询缓存命中数据库吗？

> ID：15916119
> 
> 赞同：6
> 
> 时间：2013-04-10T02:55:24.657
> 
> 标签：ruby-on-rails

在我的 Rails 应用程序中，我在服务器日志中的 SQL 查询期间看到了一些“缓存”：

> > [调试]缓存（0.0ms）选择`regions`。*从`regions`哪里`regions`。`name`=“纽约”限制 1

我想知道这些缓存是由 Rails 完成的，还是由 MySQL 本身完成的？换句话说，这些缓存查询是否完全触及数据库层？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-17T02:32:55.793

该问题的正确答案是“缓存由 Rails 完成；查询永远不会到达数据库”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T04:36:25.410

根据以下关于如何禁用所述功能的博客文章，它的轨道缓存而不是数据库缓存。

[https://coderwall.com/p/tvybhq](https://coderwall.com/p/tvybhq)

# jquery - 根据孩子身高设置父母身高

> ID：15916123
> 
> 赞同：1
> 
> 时间：2013-04-10T02:55:54.123
> 
> 标签：jquery, height

我有一个带有几张幻灯片的滑块；每张幻灯片都有不同的高度。

它是这样工作的：

第一张幻灯片

```
<holder>
 <slide - display: block>
 <slide - display: none>
 <slide - display: none>
</holder> 
```

第二张幻灯片

```
<holder>
 <slide - display: none>
 <slide - display: block>
 <slide - display: none>
</holder> 
```

等等

幻灯片有`position: absolute`（必须是这样）。

所以问题是：如何动态改变高度`holder`以查看每张幻灯片的全部内容？

我现在有：

```
<script type="text/javascript">
  $(document).ready(function(){
    $(".holder").height( $(".slide").height() );
  });
</script>

<script type="text/javascript">
  $(window).resize(function() {
    $(".holder").height( $(".slide").height() );
  });
</script> 
```

但它只使用第一张幻灯片的高度，因此其他幻灯片被切断。

请使用 javascript 来帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:02:44.893

您可以遍历它们以获得最高的高度`.slide`。

```
function updateSlideHolderSize() {
    var max = 0;
    $(".slide").each(function () {
        max = Math.max(max, $(this).height());
    });
    $(".holder").height(max);
} 
```

* * *

所以它会像这样进入你的应用程序：

```
<script type="text/javascript">
$(document).ready(updateSlideHolderSize);
$(window).resize(updateSlideHolderSize);

function updateSlideHolderSize() {
    var max = 0;
    $(".slide").each(function () {
        max = Math.max(max, $(this).height());
    });
    $(".holder").height(max);
}
</script> 
```

# emacs - 如何优雅地修改函数的定义

> ID：15916124
> 
> 赞同：8
> 
> 时间：2013-04-10T02:56:01.037
> 
> 标签：emacs, lisp, elisp

假设在库中定义了一个示例函数（这个问题的前提是这个库中的所有定义都不能被修改，比如“只读”）：

```
(defun sample ()
  (foo)
  (bar)
  (baz)) 
```

我想使用这个库，但功能`sample`无法满足我的要求，我想要的是：

```
(defun sample ()
  (foo)
  (when condition
    (bar))
  (baz)) 
```

有人告诉我使用`defadvice`，但我注意到`defadvice`只能在调用之前或之后插入代码`sample`，例如：

```
(before-advice ...)
(sample)
(after-advice ...) 
```

它不能修改`sample`自身的定义。那么，我怎样才能优雅地做到这一点呢？我应该重写一个`sample`自己，称为`my-sample`or`sample2`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T04:26:41.160

sds 的答案有效，除了您可能只想在执行`bar`时提供建议`sample`，因此您还需要建议 sample 以激活和停用`bar`. 我的`with-temporary-advice`宏促进了这一点：

```
(defmacro with-temporary-advice (function class name &rest body)
  "Enable the specified advice, evaluate BODY, then disable the advice."
  `(unwind-protect
       (progn
         (ad-enable-advice ,function ,class ,name)
         (ad-activate ,function)
         ,@body)
     (ad-disable-advice ,function ,class ,name)
     (ad-activate ,function)))

(defadvice bar (around my-conditional-bar disable)
  ;; This advice disabled by default, and enabled dynamically.
  (when condition
    ad-do-it))

(defadvice sample (around my-sample-advice activate)
  "Make execution of `bar' conditional when running `sample'."
  (with-temporary-advice 'bar 'around 'my-conditional-bar
   ad-do-it)) 
```

请注意，如果在执行`bar`时也以其他方式调用`sample`，建议也将适用于这些调用，因此如果有可能，您应该考虑到这一点。

或者，您可能更喜欢在需要时使用`flet`来重新定义`bar`。当然，这与第一个解决方案相同。

```
(defadvice sample (around my-sample-advice activate)
  "Make execution of `bar' conditional when running `sample'."
  (if condition
      ad-do-it
    (flet ((bar () nil))
      ad-do-it))) 
```

这*更*容易阅读，但由于我不明白的原因`flet`，从 Emacs 24.3 开始，不再受欢迎。它的文档字符串建议`cl-flet`改用，但由于`cl-flet`使用词法绑定，这实际上不起作用。据我所知，这听起来`flet`并没有真正消失，但目前的建议似乎是使用建议。

另请注意，如果在内部`bar`，不需要的行为取决于某个*变量*，那么最好使用`let`对该变量的绑定而不是对`flet`函数的绑定。

**编辑：**

当然，这些方法确实让我们更难看到正在发生的事情。根据具体情况，最好简单地重新定义`sample`函数以执行您想要的操作（或者`my-sample`按照您的建议编写一个函数来调用它）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T13:53:41.363

其他人已经提供了很好的答案，但是由于有些人抱怨`flet`' 的耻辱，我将展示我会使用什么：

```
(defvar my-inhibit-bar nil)
(defadvice bar (around my-condition activate)
  (unless my-inhibit-bar ad-do-it))
(defadvice sample (around my-condition activate)
  (let ((my-inhibit-bar (not condition)))
    ad-do-it)) 
```

看妈！没有`flet`也没有丑陋的激活/停用！当你看到它时，`C-h f bar`它会清楚地告诉你，还有更多的东西。另外我实际上会使用新的`advice-add`：

```
(defvar my-inhibit-bar nil)
(defun my-bar-advice (doit &rest args)
  (unless my-inhibit-bar (apply doit args)))
(advice-add :around 'bar #'my-bar-advice)
(defun my-sample-advice (doit &rest args)
  (let ((my-inhibit-bar (not condition)))
    (apply doit args)))
(advice-add :around 'sample #'my-sample-advice) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T04:07:18.357

您应该`bar`使用`around`建议来建议功能：

```
(defadvice bar (around my-condition)
  (when condition
    ad-do-it)) 
```

# plugins - 支持高级搜索的工具

> ID：15916128
> 
> 赞同：0
> 
> 时间：2013-04-10T02:56:40.353
> 
> 标签：plugins, frameworks, content-management-system, advanced-search

我不太确定如何问这个问题以及我的标题是否正确。如果认为合适，请编辑此问题。

Redmine 有一个功能，用户可以在执行搜索时过滤某些用户定义的参数：

![解决搜索问题](https://i.stack.imgur.com/pAgrB.jpg)

我想知道这种功能是否有一个术语，以便我可以对此进行更多研究。我还想知道是否有支持这种功能的现有技术（即框架/cms/插件）。如果可能的话，我想重用现有的技术，同时拥有这种搜索功能。

我的要求和Redmine差不多。也就是说，我搜索的是用户和与该用户相关的属性，而不是问题。要求如下：

*   我可以添加一个用户，指定与这个用户相关的属性。

*   对用户执行搜索并指定搜索用户的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:02:03.967

我的猜测是，除了“高级搜索”之外，没有真正的术语。不幸的是，这些功能从简单到令人难以置信的高级。

# c++ - 如何将 Qt 样式表移动到外部文件但将其编译到资源中？

> ID：15916135
> 
> 赞同：8
> 
> 时间：2013-04-10T02:57:28.093
> 
> 标签：c++, qt, qtstylesheets

我的 Qt 应用程序有一个大型样式表，其中包含大量边距、像素和其他直接基于绘图和图形并与之相关的内容。我很乐意将所有这些东西都交给设计师，但是样式表保存在 .ui 文件中，这对设计师来说并不方便；她更愿意查看一个单独的文件并使用她常用的工具对其进行编辑。

我想要的是将样式表移动到外部 .qss 文件，将该文件添加到程序资源中并将其链接到 .ui 文件，以便小部件自动编译和使用样式表，并且应用程序不会保留样式表文件并在运行时加载它。

如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T03:50:27.893

将所有样式复制到文件中并将其重命名为“然后将其作为新资源项`stylesheet.qss` 包含在文件中”。如果您已经有文件，`qrc`您可以简单地通过编辑文件来做到这一点。[请参阅](http://qt-project.org/doc/qt-5.0/qtcore/resources.html)有关如何添加新资源的文档。`qrc`

然后像这样修改您的代码以`qss`在运行时读取文件的内容并将样式应用于您的应用程序。

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QFile file(":/stylesheet.qss");
    if(file.open(QIODevice::ReadOnly | QIODevice::Text))
    {
        a.setStyleSheet(file.readAll());
        file.close();
    }

    MainWindow w;
    w.show();

    return a.exec();
} 
```

注意：当您在 中进行更改时`stylesheet.qss`，您必须编译`qrc`文件才能使更改生效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T04:16:20.767

当应用程序从外部文件运行时，我设置了样式表。此外，对于设计师，我们添加了一个按钮来“重新加载样式表”。这样设计者可以修改文件并立即尝试更改。

例如：

```
QFile styleFile("stylesheet.qss");
styleFile.open(QFile::ReadOnly);
QByteArray bytes = styleFile.readAll();
QApplication *app = (QApplication*)QApplication::instance();
app->setStyleSheet(newStyleSheet); 
```

# mongodb - 在 Lucene 中存储结构化数据

> ID：15916136
> 
> 赞同：3
> 
> 时间：2013-04-10T02:57:36.840
> 
> 标签：mongodb, search, solr, lucene, nosql

我看到很多引用指向使用 Lucene 或 Solr 作为 NoSQL 数据存储，而不仅仅是索引引擎： [NoSQL (MongoDB) vs Lucene (or Solr) as your database](https://stackoverflow.com/questions/3215029/nosql-mongodb-vs-lucene-or-solr-as-your-database) [http://searchhub.org/2010/04/ 29/for-the-guardian-solr-is-the-new-database/](http://searchhub.org/2010/04/29/for-the-guardian-solr-is-the-new-database/)

但是，由于 Lucene 只提供了一个“平面”文档结构，其中每个字段都可以是多值（标量），我似乎无法完全理解人们如何将复杂的结构化数据映射到 Lucene 中进行索引和存储。例如：

```
{
"firstName": "Joe",
"lastName": "Smith",
"addresses" ： [
    {
        "type" : "home", 
        "line1" : "1 Main Street",
        "city" : "New York",
    },
    {
        "type" : "office",
        "line1" : "P.O. Box 1234",
        "zip：“10000”
    }
]
} 
```

事情显然会变得更复杂。即如果对象有两个集合：地址和电话号码怎么办？如果地址本身有一个集合怎么办？

我可以想到两种方法来映射这两个 lucene“文档”：

1.  创建一个已存储但未索引的字段来存储对象的 JSON/BSON 版本，然后创建其他索引但不存储用于索引/搜索的字段。

2.  找到一种聪明的方法，以某种方式将对象放入 Lucene 存储数据的方式中。即使用点符号来平展字段，使用多值字段来存储单个集合值，然后以某种方式在返回的路上重新创建对象......

我想知道人们以前是否处理过类似的问题，您使用过什么解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-13T11:39:20.897

这要看用途是什么。如果只需要显示，可以将复杂值（地址）作为 JSON 字符串存储为多值字段，如果需要作为索引，可以选择以下结构：

```
    “地址类型”： [
    “家”，
    “办公室”
    ],
    "addresses_line1"： [
    “1大街”，
    “邮政信箱 1234”
    ],
    "addresses_city"： [
    “纽约”，
    “”
    ],
    "addresses_zip"： [
    "",
    “10000”
    ]

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T03:08:29.837

看看我的[Stupid Lucene Tricks: Hierarchies](http://use.perl.org/use.perl.org/_Mark+Leighton+Fisher/journal/40449.html) for one approach。

# c# - 正则表达式：区分句末和 URLS 中的句点

> ID：15916140
> 
> 赞同：1
> 
> 时间：2013-04-10T02:57:52.643
> 
> 标签：c#, regex

我正在构建一个在文本中搜索 url 并将 url 添加到列表框的应用程序。我有一些工作，但是如果它们结束了句子，我无法获取 URL（例如：这是 www.google.com。）。提前致谢

这是我的代码：

```
private void btnExtract_Click(object sender, EventArgs e)
        {
            StringBuilder taintedStr = new StringBuilder(txtInputText.Text);
            string cleanStr;

            taintedStr.Replace(",", "");
            taintedStr.Replace("!", "");
            taintedStr.Replace("(", "");
            taintedStr.Replace(")", "");
            taintedStr.Replace("[", "");
            taintedStr.Replace("]", "");
            taintedStr.Replace("http://", "");
            cleanStr = taintedStr.ToString();
            string[] wordlist = Regex.Split(cleanStr, @"\s");

            for (int i = 0; i < wordlist.Length; i++)
            {
                bool test = Regex.Match(wordlist[i], @"^[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(/\S*)?$").Success;  
                if (test == true)
                {
                    lstWebsites.Items.Add("http://" + wordlist[i]);
                }
            } 
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:12:22.820

为什么不通过添加一行来删除每个单词的结尾标点符号来调整您的代码呢？例如：

```
for (int i = 0; i < wordlist.Length; i++)
{
  wordlist[i] = wordlist[i].Trim().TrimEnd('.').TrimEnd('!').TrimEnd('?');
  bool test = Regex.Match(wordlist[i], @"^[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(/\S*)?$").Success;  
  if (test == true)
  {
    lstWebsites.Items.Add("http://" + wordlist[i]);
  }
} 
```

或者，以下 RegEx 应捕获该网站：

```
^[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}[.!?]?(/\S*)?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:12:47.183

您必须决定如何将其应用到您的代码中，但基本上您只想为此添加一个特殊情况。`".[a-zA-Z]{2,3}(/\S*)?$.\b"`将匹配`.*.`。如果是这种情况，请使用 do;

```
 myString = myString.TrimeEnd('.'); // remove the last character 
```

`/b`在单词边界上匹配。它将匹配返回、空格、EOF 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:13:15.157

在普通英语中，句尾的句号通常跟在空格后面。但如果句点位于英语表示的末尾，则它后面可能会跟随其他字符，例如 EOF 字符、“<”、引号等。

解决此问题的方法是识别句点后跟有效 url 字符的时间。

# nlp - 用 NLTK 检查英语语法

> ID：15916143
> 
> 赞同：4
> 
> 时间：2013-04-10T02:58:02.207
> 
> 标签：nlp, grammar, nltk, context-free-grammar

我开始使用[NLTK 库](http://nltk.org/)，我想检查一个英文句子是否正确。

例子：

“他看到鲍勃” - 不正确

“他看到了鲍勃”——正确

我读[了这个](http://www.ling.helsinki.fi/kit/2008s/clt231/nltk-0.9.5/doc/en/ch08.html)，但这对我来说很难。我需要一个更简单的例子。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T16:16:35.603

语法检查是 NLP 研究的一个活跃领域，因此目前还没有 100% 的答案（甚至可能没有 80% 的答案）。最简单的方法（或至少是一个合理的基线）将是一个 n-gram 语言模型（标准化话语长度的 LM 概率并为“语法”或“不语法”设置启发式阈值。

您可以使用 Google 的 n-gram 语料库，或者在域内数据上训练您自己的语料库。你也许可以用 NLTK 做到这一点；您绝对可以使用 LingPipe、SRI 语言建模工具包或 OpenGRM。

也就是说，n-gram 模型不会表现得那么好。如果它满足你的需求，很好，但如果你想做得更好，你就必须训练一个机器学习分类器。语法分类器通常会使用来自句法和/或语义处理的特征（例如 POS 标签、依赖和选区解析等）。您可以查看 Joel Tetrault 和他在 ETS 工作的团队或 Jennifer 的一些工作福斯特和她在都柏林的团队。

抱歉，没有简单直接的答案...

# lua - 如何远程登录一个地址？

> ID：15916144
> 
> 赞同：0
> 
> 时间：2013-04-10T02:58:04.473
> 
> 标签：lua, luasocket

我正在尝试了解套接字类，并且我正在使用以下示例来实现服务器示例

```
local server = assert(socket.bind("*", 0))

-- find out which port the OS chose for us
local ip, port = server:getsockname()

-- print a message informing what's up
print("Please telnet to localhost on IP [" ..ip.. "] and port [" .. port .. "]")
print("After connecting, you have 10s to enter a line to be echoed")

-- loop forever waiting for clients
while true do
-- wait for a connection from any client
local client = server:accept()

-- make sure we don't block waiting for this client's line
client:settimeout(10)

-- receive the line
local line, err = client:receive()

-- if there was no error, send it back to the client
if not err then
    client:send(line .. "\n")
end

-- done with client, close the object
client:close()
end 
```

但现在的问题是，我如何通过 lua 远程登录例如地址 localhost:8080？

编辑：我忘了说点什么，我什至不能在 cmd 上远程登录。当我键入命令时：

远程登录 ip 端口

我发送消息后它总是说“连接丢失”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:15:10.033

首先，按照[此处](http://social.technet.microsoft.com/wiki/contents/articles/910.how-to-enable-telnet-client-in-windows-7.aspx)的说明在 Windows 7 中启用 telnet：

1.  转到控制面板
2.  `Turn Windows features on or off`在下查找`Programs`（取决于布局）
3.  找到`Telnet client`并启用它。

完成此操作后，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T21:31:53.690

完毕！

```
local socket = require("socket")

local server = socket.connect(ip, port)

local ok, err = server:send("RETURN\n")
if (err ~= nil) then
    print (err)
else
    while true do
        s, status, partial = server:receive(1024)
        print(s or partial)

        if (status == "closed") then
            break
        end
    end
end

server:close() 
```

# c# - 图像绑定不起作用

> ID：15916146
> 
> 赞同：0
> 
> 时间：2013-04-10T02:58:38.547
> 
> 标签：c#, wpf, windows-phone-7, xaml, windows-phone-8

我在将后端绑定到前端图像时遇到了一些麻烦。图像是动态的。这是服务于前端的后端代码：

```
 public string currentCardImage
    {
        get
        {
            return currentCard.imageSource;
        }
    } 
```

并且为此的前端 XAML 是：

```
<Image Name="ImageMain"
       Source="{Binding currentCardImage}"
       HorizontalAlignment="Left"
       Height="100"
       Margin="368,529,0,0"
       Grid.Row="1"
       VerticalAlignment="Top"
       Width="100"
       RenderTransformOrigin="0.5,0.5">
  <Image.RenderTransform>
    <CompositeTransform Rotation="90.203" />
  </Image.RenderTransform>
</Image> 
```

不幸的是，这不起作用。我可以验证是否有数据加载到 currentCard 中，因此 imageSource 返回图像的位置。

如果您需要更多信息，请告诉我。任何帮助是极大的赞赏！

编辑：c# 代码在后面的 XAML 代码中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:45:04.750

绑定失败的原因是，默认情况下，绑定到`DataContext`属性中保存的实例。所以，绑定

```
{Binding currentCardImage} 
```

实际上意味着

```
this.DataContext.currentCardImage 
```

既然您说该属性在*codebehind*中，我假设您的代码如下所示：

```
public sealed class MyClass : Window
{
    public string currentCardImage
    {
        get { // SNIP! 
```

为了绑定到此属性，您必须*重定向*绑定以查找 xaml 树（您的窗口）的根以开始查找指定路径。

最简单的方法是命名你的根元素

```
<Window x:Class="HerpDerp"
        HideOtherAttributesBecauseThisIsAnExample="true"
        x:Name="thisIsTheBindingTarget">
    <!-- snip --> 
```

并告诉你的绑定看那里

```
{Binding currentCardImage, ElementName=thisIsTheBindingTarget} 
```

# python - 蟒蛇 | 使用内部设置大小的对象计算体积

> ID：15916151
> 
> 赞同：0
> 
> 时间：2013-04-10T02:59:06.630
> 
> 标签：python, volume, logistics

我试图弄清楚如何计算我的工作可以放入一个集装箱中的箱子数量。有谁知道我如何用 Python 做到这一点？这里有一个例子：

`http://www.searates.com/reference/stuffing/`

基本上，为和`user`输入一些不同的维度。then 将返回它的完整程度或每个可以添加多少。它还将计算整个单元。`boxes``quantities``weights``program``container``box``weights`

更理想的是，将是一张描述它是如何包装的图片。

# javascript - 将 div 的高度更改为浏览器窗口高度，只要浏览器高度大于 x

> ID：15916155
> 
> 赞同：0
> 
> 时间：2013-04-10T02:59:25.277
> 
> 标签：javascript, jquery

嗨，我希望有人能够解释我在这里做错了什么：

```
 var winHeight = $(window).height(),
 minHeight = 900,
 Height = 900;

 $(document).ready(function () {

 if (winHeight < MinHeight) {
     Height = minHeight;
 } else {
     Height = winHeight;
 }
 $('div.page').css('height', winHeight + 'px');
});

 $(window).resize(function () {
 if (winHeight < MinHeight) {
     Height = minHeight;
 } else {
     Height = winHeight;
 }
 $('div.page').css('height', winHeight + 'px');

}); 
```

在我的页面上，我有多个带有“页面”类的 div。我正在尝试将这些高度设为浏览器窗口的大小，除非浏览器窗口小于 900，否则我希望它们的高度为 900px。

我猜它是一个语法问题。特别是因为我是 jquery 和 javascript 的新手（我今天才开始使用它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:07:33.500

您必须调用`$(window).height()`resize 事件，以便响应当前窗口大小。你可以这样做：

```
$(document).ready(function () {
    //Call the method one time
    updateWindowSize();
    //Subscribe the method to future resize events
    $(window).resize(updateWindowSize);

    //updateWindowSize inside a closure to hide 'minHeight'
     var updateWindowSize = (function(){
        var minHeight = 900;

        //Actual updateWindowSize function
        return function(){
            var winHeight = $(window).height();
            var newHeight = winHeight < minHeight ? minHeight : winHeight;
            $('div.page').height(newHeight);
        }
     })();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:04:37.900

问题是当窗口调整大小时 winHeight 的值永远不会改变。我想知道变量“高度”在哪里使用？

代码应该是：

```
$(document).ready(function () {  
  $(window).resize(function () {
    var winHeight = $(window).height(),
    minHeight = 900,
    Height = 900;
    if (winHeight < minHeight) {
       Height = minHeight;
    } else {
       Height = winHeight;
    }

    $('div.page').height(Height);
  });
}); 
```

说得通？

# java - 子字符串方法 java

> ID：15916156
> 
> 赞同：-6
> 
> 时间：2013-04-10T02:59:41.520
> 
> 标签：java, substring

所以我已经在这部分代码上工作了一段时间，我需要帮助。我需要使用子字符串垂直打印出用户输入。我想我已经很接近了，但我认为只需要一点小费。

```
 public static void method3(){
   System.out.print("Method 3"); 
 Scanner console = new Scanner(System.in);
  String height = console.nextLine(); 

   System.out.println(" Type in a word to be printed vertically!");
  String str = console.nextLine();

  System.out.println(str.charAt(height) + " "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:02:35.237

简单的选择是-

```
System.out.println(str.charAt(height) + " "); 
```

或者您可以转换为 char 数组并遍历它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:02:46.867

`String.substring()`是一种方法，而不是一个字段，这意味着您需要调用`str.substring()`而不是简单地调用`str.substring`. 此外， substring 方法接受参数 - 您必须以字符串中哪些索引的形式告诉它您想要的特定子字符串。`str.substring(0, 2)`将打印字符 0 和 1（不包括上限）。为了你的目的，`str.substring(height, height+1)`会工作......

如果您必须使用子字符串。

我建议使用`str.charAt(height)`，它可以实现相同的目标。

编辑（基于您的编辑）：1）您将高度定义为字符串，然后调用 str.charAt(height)。charAt() 方法接受一个 int 参数 - 如果你给它 6，它会给你字符串中索引 6 处的字符（即第七个字母）。知道了这一点，将 String 作为参数传递是没有任何意义的，不是吗？

2）你仍然需要一个循环来完成这个。就像是：

```
String str = console.nextLine();
     for (int height = 0; height < str.length; height++) {            
         System.out.println(str.charAt(height);   
     } 
```

那有意义吗？如果我需要引导您了解我们在这方面所做的工作，请告诉我。

# php - phpQuery错误处理

> ID：15916160
> 
> 赞同：0
> 
> 时间：2013-04-10T03:00:06.663
> 
> 标签：php, phpquery

我正在使用 phpQuery 根据用户输入从页面中抓取一些信息，但是如果用户输入不存在的内容，我会尝试设置错误处理。

例如，用户输入了错误的产品编号，这可能会导致

```
Warning: file_get_contents([function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 404 Not Found in 
```

我可以在 if 语句中使用什么来检查这样的实例中的 phpQuery 错误？

例如

```
if(...error...){
    echo json_encode("error" => 'Incorrect value entered');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:14:14.300

尝试将您计划使用的逻辑与 try-catch 块中的输入一起使用。

就像是：

```
try {
  <..insert your logic here..>
} catch (Exception $e) {
  echo json_encode("error" => "Incorrect value entered");
} 
```

# jquery - mCustomScrollbar 插件有混乱的麻烦

> ID：15916164
> 
> 赞同：0
> 
> 时间：2013-04-10T03:00:30.307
> 
> 标签：jquery, jquery-ui, jquery-plugins, mcustomscrollbar

我为带有标题的横幅使用循环插件，标题有一个滚动条，如下图所示。我用来`mCustomScrollbar`设置滚动条的样式。滚动条在第一个标题中工作正常，但是当我在第二个标题中应用它时，滚动条不会出现。发生这种情况的原因是什么，它与什么有关`cycle`或什么？

下图显示了问题：

![在此处输入图像描述](https://i.stack.imgur.com/pYmsn.gif)

代码（JavaScript）：

```
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
  <script type="text/javascript" src="js/jquery.cycle.all.js"></script>
      <script type="text/javascript">

$(document).ready(function() {
    $('.slider').cycle({
    fx: 'scrollHorz',
    slideExpr: "img:not(.hide)",
    slideResize: false,
    containerResize: false,
    speed: 500,
    timeout: 5000,
    after:  function(curr,next,opts) {
            var index=opts.currSlide;   
            $('#caption div.captionContent:visible').hide();
            $('#caption div.captionContent').eq(index).show();
            }

    });
    });

</script>
<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
 <script>
        (function($){
            $(window).load(function(){
                $(".cc").mCustomScrollbar({
                    scrollButtons:{
                        enable:true
                    }
                });
            });
          </script> 
```

HTML：

```
<div class="banner">
        <div id="caption">
          <div class="captionContent slide5">
            <div class="cc">
              <p>Our clients receive a personalised one on one service from one of our principles to guide them from the initial brief to the final completion of their project.</p>
            </div>
          </div>
          <div class="captionContent"></div>
          <div class="captionContent"></div>
          <div class="captionContent"></div>

        </div>

        <div class="slider">
            <img class="hide" src="images/banner1.jpg" alt="slider 1" />
            <img src="images/banner5.jpg" alt="slider 1" />
            <img src="images/banner2.jpg" alt="slider 1" />
            <img src="images/banner3.jpg" alt="slider 1" />
            <img src="images/banner5.jpg" alt="slider 1" /> 
        </div>
    </div><!-- end banner --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:57:51.373

根据我对 mCustomScrollbar 的体验，您需要应用 mCustomScrollbar(); 在您要单独添加的每个元素上。此外，如果所述元素动态改变尺寸，则每次元素改变尺寸时都需要更新和销毁滚动条。

# java - 如何让 servlet 中的 System.out.println 在控制台上显示？

> ID：15916167
> 
> 赞同：3
> 
> 时间：2013-04-10T03:01:21.610
> 
> 标签：java, tomcat, servlets, console

我在 Windows 的 Tomcat 7.0 上运行一个简单的 servlet。

为了调试，我想

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // do some stuff
    System.out.println("Some stuff was done");
    ...

    PrintWriter out = response.getWriter();
    out.println("Done");
} 
```

但是，我在控制台或日志文件夹中的任何日志文件中都看不到我的 System.out.println 输出，无论是 catalina.log 还是 catalina.out。我已经搜索了很多次，但我阅读的方法都没有工作。

我所需要的只是让我的输出显示在控制台上，而无需使用其他实用程序，所以如果有人能告诉我如何修复它的步骤，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:05:41.487

为了调试，请使用一些日志框架，例如[log4j](http://logging.apache.org/log4j/)。

但是，system.out 日志将位于 catalina.out 或 Tomcat 日志目录中的 localhost*.log 文件之一

您没有使用日志记录框架或标准 Java 日志记录是否有特定原因？它更有用，并且可配置。

# qt - 如何在函数Qt中获取函数名

> ID：15916168
> 
> 赞同：12
> 
> 时间：2013-04-10T03:01:25.563
> 
> 标签：qt, logging, metaobject

当出现问题时，我会尝试记录日志，所以我想像这样编写类信息和函数名：

```
void MainWindowTest::testMethod()
{
    qDebug()<<QString("ClassName is:%0,Function Name is:%1")
              .arg(this->metaObject()->className()).arg("how to get method name");
} 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-10T03:33:31.743

您可以使用`Q_FUNC_INFO`

示例代码：

```
qDebug() << "Function Name: " << Q_FUNC_INFO; 
```

参考[Qt 文档](http://qt-project.org/doc/qt-5.0/qtcore/qtglobal.html#Q_FUNC_INFO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-18T06:46:47.973

QT_STRINGIFY

```
MainWindowVM::MainWindowVM(QObject* parent) : QObject(parent)
{
    QDebug() << QT_STRINGIFY(MainWindowVM);
} 
```

# php - 使用 php 插入记录并访问数据库 - 获取“odbc_exec() 的参数计数错误”

> ID：15916173
> 
> 赞同：0
> 
> 时间：2013-04-10T03:01:58.890
> 
> 标签：php, ms-access, sql-insert

使用 php 插入记录并访问数据库 - 获取“odbc_exec() 的参数计数错误” 一切正常，但我无法将其插入数据库。

```
$R1=rand(1,20);
$db=odbc_connect('Eightball','','');
 $sql  = "SELECT * FROM theAnswers";
 $sql .= " WHERE id = " . $R1;
 $rs=odbc_exec($db,$sql);
while (odbc_fetch_row($rs))
{       
 $FinalAnswer=odbc_result($rs,"Answer");
 $newdate = date('M j, Y');
 $newQuestion = $_POST["Question"];
 if(isset($_SERVER['HTTP_REFERER'])) {
 $Thereferrer=$_SERVER['HTTP_REFERER'];
 }
$theIPAddress=$_SERVER['REMOTE_ADDR'];

 echo $theIPAddress;
 echo $Thereferrer;
 echo $newQuestion;
 echo $FinalAnswer;
 echo $newdate;
}

$sql = "INSERT INTO theQuestions (ipaddress, referrer, Question, Answer, theDate)     VALUES ('$theIPAddress', '$Thereferrer', '$newQuestion', '$FinalAnswer', newdate)";
$rs=odbc_exec($db,$sql);
$result = odbc_exec($sql);
if (!$result) {exit('Execution failed!');} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:39:29.840

倒数第二行

```
$result = odbc_exec($sql); 
```

是给出“错误参数计数”错误的那个。第二个电话也是无关紧要的。

我也担心日期格式，但我在我的 Windows 服务器上尝试过，以下对我有用

```
<?php
$db = odbc_connect('db1', '', '');
$dateValue = date('M j, Y');
$sql = 
        "INSERT INTO phpTest (TextCol, DateCol) " .
        "VALUES ('testing', '" . $dateValue . "')";
echo $sql . "\r\n";
odbc_exec($db, $sql);
echo "Done.\r\n"; 
```

试运行成功...

```
C:\__tmp>\php\php odbcTest.php
INSERT INTO phpTest (TextCol, DateCol) VALUES ('testing', 'Apr 10, 2013')
Done. 
```

...并且该行确实已插入表中

![phpTest](https://i.stack.imgur.com/4eaTG.png)

不过，`date('Y-m-d')`这将是一个更安全的选择。

# c - 为什么每次编译时内存地址都在变化？

> ID：15916174
> 
> 赞同：1
> 
> 时间：2013-04-10T03:02:01.360
> 
> 标签：c, pointers

为什么指向的地方的地址一直在变化？导致这种情况发生的内存中发生了什么，还是我的`printf`陈述有问题？

```
#include <stdio.h>
#include <stdlib.h>

int main()
{

        char blocks[3] = {'A', 'B', 'C'};

        char *ptr = &blocks[0];

        char temp;

        temp = blocks[0];
        printf(" %c, %d ", temp, &temp);

        return 0;
} 
```

输出

```
A, 1764940775 
A, 1731746791 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:30:31.273

看起来您的堆栈指针是随机的。我怀疑这是因为地址空间布局随机化在大多数较新的操作系统中用作安全机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:28:17.903

您应该使用`%p`转换说明符来打印指针值。但是没有理由期望它每次都是相同的值。但是，全局或静态变量应该位于一致的位置。

# c++ - std::function 作为回调，是否可以注销？

> ID：15916175
> 
> 赞同：14
> 
> 时间：2013-04-10T03:02:05.313
> 
> 标签：c++, c++11

这个问题严格来说是关于`std::function`而不是`boost::function`。有关更多详细信息，请参阅此问题底部的*更新*部分，尤其是关于无法`std::function`根据 C++11 标准比较非空对象的部分。

* * *

C++11`std::function`类模板非常适合维护回调集合。例如，可以将它们存储在 中`vector`，并在需要时调用它们。然而，维护这些对象并允许注销似乎是不可能的。

让我具体一点，想象一下这个类：

```
class Invoker
{
public:
  void Register(std::function<void()> f);
  void Unregister(std::function<void()> f);

  void InvokeAll();

private:
  // Some container that holds the function objects passed to Register()
}; 
```

示例使用场景：

```
void foo()
{
}

int main()
{
  std::function<void()> f1{foo};
  std::function<void()> f2{[] {std::cout << "Hello\n";} };

  Invoker inv;

  // The easy part

  // Register callbacks
  inv.Register(f1);
  inv.Register(f2);

  // Invoke them
  inv.InvokeAll();

  // The seemingly impossible part. How can Unregister() be implemented to actually
  // locate the correct object to unregister (i.e., remove from its container)?
  inv.Unregister(f2);
  inv.Unregister(f1);
} 
```

很清楚如何`Register()`实现该功能。但是，如何实施`Unregister()`. 假设保存函数对象的容器是`vector<std::function<void()>>`. 您将如何找到传递给`Unregister()`调用的特定函数对象？`std::function`确实提供了一个重载的`operator==`，但它只测试一个空函数对象（即，它不能用于比较两个非空函数对象以查看它们是否都引用相同的实际*调用*）。

我会很感激任何想法。

**更新：**

到目前为止的想法主要包括添加一个与每个`std::function`可用于注销它的对象相关联的 cookie。`std::function`我希望有一些对对象本身来说不是外生的东西。`std::function`此外，和之间似乎有很多混淆`boost::function`。这个问题严格来说是关于`std::function`对象的，而**不是** `boost::function`关于对象的。

此外，您不能比较两个非空`std::function`对象是否相等。根据标准，他们总是会比较不相等。因此，在此问题的上下文中，评论中指向解决方案（并使用`boost::function`对象启动）的链接显然是错误的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T19:47:13.537

由于您无法测试容器中的元素身份，因此最好使用一个容器（例如`std::list`），其迭代器在修改容器时不会失效，并将迭代器返回给可用于注销的注册调用者。

如果你真的想使用`vector`(or `deque`)，你可以在添加回调时将整数索引返回到向量/双端队列中。这种策略自然会要求您确保以这种方式使用索引来识别函数在序列中的位置。如果回调和/或注销很少见，这可能仅仅意味着不重复使用点。或者，您可以实现一个空闲列表来重用空槽。或者，仅从序列的末尾回收空槽，并保持一个基本索引偏移量，当槽从开头回收时该偏移量会增加。

如果您的回调访问模式不需要随机访问遍历，那么将回调存储在 a 中`std::list`并使用原始迭代器取消注册对我来说似乎最简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-21T23:02:01.483

我对此有一个想法。

将回调存储为`std::weak_ptr<std::function<void(argtype1, argtype1)>>`. 然后调用者负责保持对应的`std::shared_ptr`存活，调用者取消注册回调所要做的就是将所有活动`std::shared_ptr`的s销毁到回调函数中。

调用回调时，代码必须小心检查`std::weak_ptr<>`它正在使用的 s 上的锁定失败。当它遇到这些时，它可以将它们从注册的回调容器中删除。

请注意，这并不能提供完整的线程安全性，因为回调调用者可以锁定`std::weak_ptr`并临时新激活`std::shared_ptr`回调函数，该回调函数可以在调用者`std::shared_ptr`超出范围后保持活动状态。

# jquery - 只读属性

> ID：15916177
> 
> 赞同：0
> 
> 时间：2013-04-10T03:02:12.893
> 
> 标签：jquery

我正在尝试在此处添加只读属性。你能帮我这里的代码，如果选中该框，我的平均行将是只读的吗？

```
<input type="text" name="average[]" class="average" 
id="average_<?php echo $row['student_no']; ?>" value="<?php echo
$row['average_pts']; ?>"  >
<input type="checkbox" name="disable[<?php echo $row['student_no']; ?>]" id="disable"          value="1" class="disable" <?php if ($row['disable_comp']=='1') { echo "checked=\"checked\""; } ?>>

$(".disable").change(function() {
   var val = $(this).val();
   if ($(this).is(':checked')) {
      var checked = $('input[type=checkbox]').is(':checked');
      $("input").unbind('keyup', computeValues);

      var checked=$("#able").is(':checked');

   }else{
      $("input").bind('keyup', computeValues).trigger('keyup');
       $("#average").prop('readonly');
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:04:37.137

假设条件正确，您只想使用 attr 函数：

```
$('#able').attr('readonly', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:26:15.203

$("#average").attr("readonly", true); $("#average").prop("readonly", true);

尝试将它们都用作 attr 有时会设置但永远不会以功能的方式工作，所以我们需要同时使用它们......（在页面加载时认识到我们必须使用 attr。）请找到[Attributes vs 。 特性。](http://api.jquery.com/prop/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:09:50.307

```
$(".disable").on('change', function() {
    if ( this.checked ) $("#able").prop('readonly', true);
}); 
```

# java - 在android中调用一个方法——实例

> ID：15916183
> 
> 赞同：-1
> 
> 时间：2013-04-10T03:02:36.300
> 
> 标签：java, android, xml, class, methods

我是 Android / Java 的新手。我想修改一个简单的开源安卓游戏。用真实的例子来学习编程对我来说要容易得多。

**目标**：我想在游戏进入下一关或玩家开始新游戏时生成随机背景。

**已经：**我找到了一种在用户启动应用程序时生成随机背景的方法，替换以下代码：

```
 mBackgroundOrig =
            BitmapFactory.decodeResource(res, R.drawable.background, options); 
```

和：

```
 TypedArray imgs = getResources().obtainTypedArray(R.array.random_background);
      Random rand = new Random();
      int rndInt = rand.nextInt(imgs.length());
      int resID = imgs.getResourceId(rndInt, 0);
      mBackgroundOrig = BitmapFactory.decodeResource(res, randBackground.resID, options); 
```

在：[https ://code.google.com/p/bubble-shoot/source/browse/trunk/bubble-shooter-pro/src/com/likeapp/game/bubbleshooter/GameView.java](https://code.google.com/p/bubble-shoot/source/browse/trunk/bubble-shooter-pro/src/com/likeapp/game/bubbleshooter/GameView.java)

**并在values/rand_bkgnd.xml**中创建一个带有字符串数组的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="random_background">
        <item name="background_01">@drawable/background01</item>
        <item name="background_02">@drawable/background02</item>
        <item name="background_03">@drawable/background03</item>
        <item name="background_04">@drawable/background04</item>
        <item name="background_05">@drawable/background05</item>
        <item name="background_06">@drawable/background06</item>
        <item name="background_07">@drawable/background07</item>
        <item name="background_08">@drawable/background08</item>
        <item name="background_09">@drawable/background09</item>
        <item name="background_10">@drawable/background10</item>
    </string-array>
</resources> 
```

**请求：**请帮我用上述随机化背景代码创建一个方法。我想将此代码放在一个单独的 java 文件中，并且能够在玩家完成一个级别并进入下一个级别时从**goToNextLevel()方法调用它：**

```
public void goToNextLevel() {
    SharedPreferences sp =this.mContext.getSharedPreferences(
               BubbleShooterActivity.PREFS_NAME, Context.MODE_PRIVATE);
    currentLevel = sp.getInt(BubbleShooterActivity.PREFS_LEVEL_KEY_NAME, 0);
    int maxLevel = sp.getInt(BubbleShooterActivity.PREFS_UNLOCK_LEVEL_KEY_NAME, 0);     
    currentLevel++;
    if(maxLevel<=currentLevel){
        maxLevel=currentLevel;
    }
    sp.edit().putInt(BubbleShooterActivity.PREFS_LEVEL_KEY_NAME, currentLevel).putInt(BubbleShooterActivity.PREFS_UNLOCK_LEVEL_KEY_NAME, maxLevel).commit();
    if (currentLevel >= MAX_LEVEL_NUM) {
        currentLevel = 0;
    }
} 
```

在：[https ://code.google.com/p/bubble-shoot/source/browse/trunk/bubble-shooter-pro/src/com/likeapp/game/bubbleshooter/LevelManager.java](https://code.google.com/p/bubble-shoot/source/browse/trunk/bubble-shooter-pro/src/com/likeapp/game/bubbleshooter/LevelManager.java)

我假设这对于至少具有平均 Java 技能的人来说一定很容易。请根据我的代码/游戏和分步说明或解释为我提供示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:14:51.050

只需创建一个类（例如，Background.class）

```
package com.yourpackage.name;

public class Background{
    public <type of the image> RandomBackground(){
        TypedArray imgs = getResources().obtainTypedArray(R.array.random_background);
        Random rand = new Random();
        int rndInt = rand.nextInt(imgs.length());
        int resID = imgs.getResourceId(rndInt, 0);
        mBackgroundOrig = BitmapFactory.decodeResource(res, randBackground.resID, options);
        return mBackgroundOrig;
    }
} 
```

在你的 goToNextLevel() 方法中

```
mBackgroundOrig = background.RandomBackground();//add this

public void goToNextLevel() {
mBackgroundOrig = background.RandomBackground(); //to this
SharedPreferences sp =this.mContext.getSharedPreferences(
           BubbleShooterActivity.PREFS_NAME, Context.MODE_PRIVATE);
currentLevel = sp.getInt(BubbleShooterActivity.PREFS_LEVEL_KEY_NAME, 0);
int maxLevel = sp.getInt(BubbleShooterActivity.PREFS_UNLOCK_LEVEL_KEY_NAME, 0);     
currentLevel++;
if(maxLevel<=currentLevel){
    maxLevel=currentLevel;
}
sp.edit().putInt(BubbleShooterActivity.PREFS_LEVEL_KEY_NAME, currentLevel).putInt(BubbleShooterActivity.PREFS_UNLOCK_LEVEL_KEY_NAME, maxLevel).commit();
if (currentLevel >= MAX_LEVEL_NUM) {
    currentLevel = 0;
} 
```

}

您还需要在主类中包含该类，以便调用 RandomBackground() 方法。

例如：

```
Background background; 
```

在 onCreate() 方法之前

# python - 无效的 XML 视图架构问题 - OpenErp

> ID：15916187
> 
> 赞同：1
> 
> 时间：2013-04-10T03:02:54.503
> 
> 标签：python, xml, module, openerp

我在我的 module.py 中得到了这段代码

```
class certificados(osv.osv):

_name = 'certificados.certificados'
_description="Certificados de No Produccion"
_inherit = ['mail.thread', 'ir.needaction_mixin']

_columns = {
        'Item' : fields.integer('Item'), 'Registro_Numero' : fields.integer('Registro Numero'),
        'Fecha_de_Emision': fields.date('Fecha de Emision', required=True, select=True),
        'Fecha_de_Solicitud': fields.date('Fecha de Solicitud', required=True, select=True),
        'Fecha_del_Documento': fields.date('Fecha del Documento', required=True, select=True),
        'Vigencia' : fields.integer('Vigencia'), 'cert_ids' : fields.one2many('certificados.line','requisicion_id','Items del Certificado',states={'done': [('readonly', True)]}),
        'descripcion' : fields.text('Descripcion'),
        'notas' : fields.text('Notas'),
        }

class certificados_line(osv.osv):

_name = "certificados.line"
_description="Certificados No Produccion"

_columns = {
'Codigo_Arancelario' : fields.integer('Codigo Arancelario'),
'product_id' : fields.many2one('product.product', 'Material'),
'Descripcion_Arancelaria' : fields.char('Descripcion Arancelaria', size=42, required = True, translate = True), 
'Especificaciones_Tecnicas' : fields.char('Especificaciones Tecnicas', size=60, required = True, translate = True), 
'Cantidad' : fields.float('Cantidad'), 'Unidad_de_Medida': fields.many2one('product.uom', 'Unidad de Medida'),
'Precio_Unitario_Declarado' : fields.float('Precio Unitario Declarado'), 'Moneda' : fields.many2one('res.currency', 'Moneda'),
'Valor_En_Divisas' : fields.float('Valor En Divisas'),
'requisicion_id' : fields.many2one('certificados.certificados', 'Certificados de No Produccion', ondelete='cascade'),
'Cantidad_Consumida' : fields.float('Cantidad Consumida'), 'Cantidad_Disponible' : fields.float('Cantidad Disponible'),

}
certificados_line() 
```

以及我的 module_view.xml 中的表单视图模型

```
 <record id="student_certificados_form" model="ir.ui.view">
        <field name="name">certificados.result.form</field>
        <field name="model">certificados.certificados</field>
        <field name="arch" type="xml">
            <form string="Introducir los datos" version="7.0">
                <sheet>
                    <div class="oe_edit_only">
                        <label for="Registro_Numero" class="oe_inline"/>
                    </div>
                    <h1>
                        <field name="Registro_Numero" class="oe_inline"/>
                    </h1>
                    <group>
                        <group>
                            <field name="Fecha_de_Emision"/>
                            <field name="Fecha_de_Solicitud"/>
                        </group>
                        <group>
                            <field name="Fecha_del_Documento"/>
                            <field name="Vigencia"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Productos">
                            <field name="cert_ids">
                                <tree string="Productos">
                                    <field name="product_id"/>
                                    <field name="Codigo_Arancelario"/>
                                    <field name="Descripcion_Arancelaria"/>
                                    <field name="Especificaciones_Tecnicas"/>
                                    <field name="Cantidad"/>
                                    <field name="Precio_Unitario_Declarado"/>
                                    <field name="Valor_En_Divisas"/>
                                    <field name="Cantidad_Consumida"/>
                                </tree>
                            </field>
                            <separator string="Observaciones"/>
                            <field name="descripcion"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div> 
            </form>
        </field>
    </record> 
```

xml 中有更多代码，但这是一个有趣的代码，我的意思是，我猜无效架构错误是因为我使用的模型 (certificados.certificados)，因为 (cert_ids) 正在调用另一个名为 (certificados_line) 的类)，所以，我的问题是，如何在表单视图中嵌入多个模型？

我在另一个名为 purchase_requisition 的模块中看到，这是可能的，但由于某种原因，我无法用这个模块完成它，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:02:52.833

**第一个问题** 最新的第一个讨论您对证书的搜索视图。

在搜索视图中，您添加了未在对象**certificados.certificados**中退出的 字段您已添加字段 `<field name="Valor_En_Divisas" string="Valor En Divisas" />`，但实际上该字段在对象**certificados.line中退出**

```
<record model="ir.ui.view" id="certificados_search">
            <field name="name">certificados.search</field>
            <field name="model">certificados.certificados</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
            <search string="Buscar Certificados" >
                <field name="notas" string="Notas" />

                <field name="Valor_En_Divisas" string="Valor En Divisas" />
            </search>
            </field>
        </record> 
```

**现在讨论你的第二个问题**

```
<record id="certificados_certificados_tree" model="ir.ui.view">
                <field name="name">certificados.result.tree.new</field>
                <field name="model">certificados.certificados</field>
                <field name="type">tree</field>
                <field name="arch" type="xml">
                        <tree string="Crear_Certificado" >
                                <field name="Item" />
                                <field name="Codigo_Arancelario" />
                                <field name="Descripcion_Arancelaria" />
                                <field name="Especificaciones_Tecnicas" />
                                <field name="Precio_Unitario_Declarado" />
                                <field name="Valor_En_Divisas" />
                                <field name="Cantidad_Consumida" />
                                <field name="Cantidad_Disponible" />

                        </tree>
                </field>
        </record> 
```

在此树视图中，您为对象**certificados.certificados**定义了一个与此对象相关的`<field name="Item" />`字段，所有其他字段都与**certificados.line**对象相关。

当您从搜索和表单视图中删除属于**certificados.line**的字段时，它会完美运行。

正如我所说，我刚刚从上一个问题中解决了一个问题，这两个问题也在您的视图中，当定义您的树视图或搜索视图时，请考虑放置该对象拥有的字段。

# php - 如何保护源代码？

> ID：15916190
> 
> 赞同：0
> 
> 时间：2013-04-10T03:03:07.537
> 
> 标签：php, zend-framework, architecture, software-design

我正在`Zend Framework`为一家公司开发一个系统，一旦完成，我也想把这个系统卖给其他公司。

这里的问题是，我要出售系统的第一家公司有自己的 IT 部门，所以我怀疑他们会对我开发的系统进行一些调整，然后开始将其出售给其他公司。

我的问题是，我怎样才能以这样的方式制作这个系统，以至于需要花费大量时间和精力来分析并且难以理解？

我都准备好了解令人困惑的目录结构......但正在寻找其他替代方案......

而且根据合同，我必须给他们原始源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:23:06.390

似乎你有相反的想法。如果你担心他们拿走你的代码，那么你不应该把它卖给他们。没有办法拥有未加密的源代码，同时对其保密。但是，为了回答您的问题，我建议您查看 google 在 gmail 或任何其他网络应用程序上使用的 javascript，您会注意到它们的所有变量名不仅被缩小，而且被重命名为 things像“var a, b, t;”，而不是像“var alpha, beta, theta;”这样的变量名。所以你可以用这种方式“伪装”你的代码以降低它的可读性，但这并没有真正起到多大作用，因为任何熟练和坚定的开发人员都可以弄清楚。

# ssl - 仅对某些页面使用 https 不起作用

> ID：15916192
> 
> 赞同：0
> 
> 时间：2013-04-10T03:03:13.083
> 
> 标签：ssl, tomcat7

我尝试遵循以下stackoverflow答案但没有运气 [仅对基于servlet的webapp中的某些页面使用HTTPS](https://stackoverflow.com/questions/1330187/use-https-only-for-certain-pages-in-tomcat-webapp) 这是我所做的，创建了一个自签名证书，将其安装在tomcat中，我的整个网站都在https上运行。然后我按照上面的链接单独登录 https。当我点击登录页面时，网址会转到[https://mywebsite.com:8443/signin.htm](https://mywebsite.com:8443/signin.htm)。我在 443 上启动了我的 SSL 连接器，为什么它试图连接到 8443？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:55:33.507

问题是连接器标记中的重定向。在 server.xml 中，我有 2 个连接器，用于 http(80) 和 https(443)。但是这些连接器中的重定向属性设置为 8443。我认为这意味着，当页面在 http(80) 上时，根据 web.xml，我们要求它转到安全页面，例如登录，然后它会查看重定向http(80) 连接器的属性。我将其更改为 443 并且效果很好。

# macos - 管理守护程序的软件更新——确保它们没有运行

> ID：15916193
> 
> 赞同：3
> 
> 时间：2013-04-10T03:03:27.853
> 
> 标签：macos, launchd

我有一个关于在 OS X 上进行软件更新的正确方法的一般性问题。我的应用程序运行两个守护程序，都以 root 身份运行。其中一个守护进程可以从网络下载软件更新包。下载后，它必须安装新的二进制文件，包括两个替换当前守护进程的二进制文件。由于这两个守护程序当前都在运行，因此替换它们可能是个问题。因此，我的想法很少，但是获得专家的建议会有所帮助。

方法一：下载更新后，可以保存在某个位置。更新守护程序可以将 bash 脚本放置在另一个指定位置并创建一个 plist，该 plist 可以放置在 LaunchDaemons 目录中，以便在下次重新启动时触发。该脚本只是在启动之前替换两个二进制文件。只有当我们能够确保在我的脚本执行之前这两个守护程序不会启动时，这才有可能。在启动守护进程之前，我没有找到一个好方法来告诉 launchd 先运行我的脚本。所以我不太确定这是否是一个好的解决方案。

方法 2：下载后，立即以编程方式使用 launchd 启动脚本。这应该是可能的，对吧？该脚本等待 TERM 信号，如下所示[https://discussions.apple.com/thread/3636062?start=0&tstart=0](https://discussions.apple.com/thread/3636062?start=0&tstart=0)以实际替换二进制文件并正常退出。问题再次是，当我的脚本启动时，我必须确保在替换二进制文件之前关闭我的守护进程。我不知道该怎么做。

任何人都可以建议哪种方法更好，并让我知道更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:13:35.810

我用来更新守护进程的解决方案是启动单独的 shell 脚本，它会执行以下操作：

*   通过卸载守护进程`launchctl unload -w path.to.plist`，它将等待作业完成。
*   删除旧文件
*   安装新文件（这里我实际安装了包，它将在 postflight 脚本中启动我的守护进程）
*   可选：启动守护进程`launchctl load -w path.to.plist`

要执行脚本，您只需要 fork()、setsid() 和 execv()

您可以在 shell 脚本中使用 applescript 来优雅地退出应用程序：

```
osascript << EOF
if application "Your Application" is running then
    -- Force application to quit
    tell application "Your Application" to quit
    -- Wait until it quits
    repeat
        if application "Your Application" is not running then exit repeat
        delay 1
    end repeat
end if
EOF
killall -15 your_app # just in case 
```

# http - 如何取消订阅 http 处理程序？

> ID：15916195
> 
> 赞同：4
> 
> 时间：2013-04-10T03:03:51.587
> 
> 标签：http, session, go, handler, unsubscribe

我想创建 http 处理程序来处理一个会话：

```
func init(){
    http.HandleFunc("/sess/215489598", func(w http.ResponseWriter, r *http.Request) {
        //do something
    })
} 
```

然后在会话结束（到期）时将其删除。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:03:38.970

这不可能直接实现：HTTP 多路复用器（ServeMux 类型）不公开删除操作。

使用 HTTP 多路复用器进行会话管理被证明是一个坏主意。HTTP服务的当前实现[有点低效。](http://golang.org/src/pkg/net/http/server.go?s=25470:25535#L899)它为每个 URL 扫描整个多路复用器表，因此您拥有的处理程序越多，性能就越差。这对于一些路径来说很好，但你甚至无法管理数百个会话，更不用说数十万个了。

HTTP 多路复用器需要某种同步才能用作会话管理工具。想象有一个 Unhandle 方法。如果您取消处理路径，您会期望多路复用器不再使用其先前的数据处理您的路径。但是，不同的 goroutine[不能保证在没有某种同步的情况下看到彼此对相同数据的更改。](http://golang.org/ref/mem#tmp_9)因此，HTTP 处理程序仍然可以看到多路复用器的旧视图，然后使用您认为已取消注册的处理程序响应请求。

因此，HTTP 处理程序本身不能为您执行此操作——也不应该这样做，因为您没有任何方法来同步会话生命周期。

为`"/sess/"`. 该处理程序应负责委派给各个会话。它可以使用 a`map[sessionID]sessionHandler`来有效地执行此操作，并且可以通过管道管道所有会话管理以让单个 goroutine 跟踪正在创建和销毁的会话，或者使用更传统的方法在会话映射周围使用读写器锁。这样，您可以确保在删除新请求后不会尝试将新请求分派给会话处理程序。

当然，您可以随时收到 HTTP 请求，因此如果在您决定要删除会话后在指令中发生上下文切换，那么有人可能会在您锁定地图以删除会话之前的那一刻跳入并连接到会话在实际操作之前锁定地图，因此请谨慎管理您的锁定和会话策略。这里要做的“正确的事情”主要取决于您个人应用程序的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T05:03:32.660

恐怕golang`http`包目前还没有实现删除或修改http处理程序的方法，请阅读：

`src/pkg/net/http/server.go`

[http://golang.org/src/pkg/net/http/server.go?s=28409:28496#L962](http://golang.org/src/pkg/net/http/server.go?s=28409:28496#L962)

```
type ServeMux
func NewServeMux() *ServeMux
func (mux *ServeMux) Handle(pattern string, handler Handler)
func (mux *ServeMux) HandleFunc(pattern string, handler func(ResponseWriter, *Request))
func (mux *ServeMux) ServeHTTP(w ResponseWriter, r *Request) 
```

它只是实现了注册功能`HandleFunc()`。

您有两种解决方法：

1 修改源代码实现注销功能。这是不可取的，因为`ServerMux`直接使用不是一个好主意。

或者：

2 也许你让事情变得更加复杂。你只需要解析`/sess/215489598`一个通用的处理函数，例如：

```
func Handler(response http.ResponseWriter, request *http.Request) {
  modules := strings.Split(request.URL.Path, "/")

  if modules[1] == "sess" {
    session_id := modules[2]
  }
} 
```

然后你知道下一步该怎么做:)

# graph - 我们可以在不着色的情况下进行图形 bfs 和 dfs 吗？

> ID：15916196
> 
> 赞同：0
> 
> 时间：2013-04-10T03:03:58.417
> 
> 标签：graph, depth-first-search, breadth-first-search

我知道怎么做 DFS 和 BFS 图形节点有一些属性，比如颜色，所以在 DFS 或 BFS 的过程中，我可以知道一个节点是否被访问过。我想知道是否给了我一个图形并且图形节点没有颜色标志，我该怎么做 DFS 或 BFS？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T18:19:01.657

是的，可以在不使用三种颜色的情况下进行 DFS，您可以在“节点”类中保留一个布尔属性，以查看它之前是否被访问过：

```
 void DFS-Visit(Node current , int time){
      current.visited = true;
      for (int i = 0 ; i < current.neighbor.length ; i++)
          if (!current.neighbor[i].visited)
              DFS-Visit(current.neighbor[i]);
      System.out.println(current.key);
      return;
  }
  void DFS(Node[] G){
       for (int i = 0 ; i < G.length; i++)
           G[i].visited = false;
       for (int i = 0 ; i < G.length; i++)
           if (!G[i].visited)
              DFS-Visit(G[i]);
       return;
  }
  class Node{
     Node[] neighbor;
     boolean visited;
     int key; // content of the node , it might be anything
  } 
```

# apache - Apache2 无法启动，ulimit 错误？

> ID：15916197
> 
> 赞同：5
> 
> 时间：2013-04-10T03:04:01.010
> 
> 标签：apache, apache2

这是尝试启动 apache2 的日志：

```
* Starting web server apache2                                                     
/usr/sbin/apache2ctl: 87: ulimit: error setting limit (Operation not permitted)
(13)Permission denied: make_sock: could not bind to address [::]:80
(13)Permission denied: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
Action 'start' failed.
The Apache error log may have more information. 
```

我是运行自己的 Apache 的新手。知道是什么导致了这个失败吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T05:04:00.693

使用 sudo 启动 apache 服务器，如果由于权限问题：

```
sudo service apache2 start 
```

# java - 实现一个java接口

> ID：15916198
> 
> 赞同：-1
> 
> 时间：2013-04-10T03:04:23.480
> 
> 标签：java, interface, compiler-errors, implements

我有一个我想实现的接口，看起来像这样，但是有更多的方法。例如，这里只有一个：

```
public interface List{

public void add(int position, Album album);

} 
```

然后我的实现它的类是这样开始的，包括接口中存在的所有方法：

```
public class SongList implements List{

public void add(int position, Album album){
...my code for this method
} 
```

我的编译器告诉我两个错误。第一个 - 在编译我的 List 接口时 - 说接口 List 找不到我的 Song 类：

```
List.java:23: error: cannot find symbol
public void add(int position, Song item);
                            ^
symbol:   class Song
location: interface List
1 error 
```

我有一个可以编译的歌曲类，它与界面和所有其他 java 文件位于同一文件夹中。
第二 - 编译 SongList 时 - 编译器说我没有覆盖 add() 方法：

```
SongList is not abstract and does not override abstract method add(int,Object) in List
public class SongList implements List{
       ^
1 error 
```

我在这里很迷茫……据我搜索，我遵循接口的所有规则，但显然不是。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:08:11.887

第一个和第二个代码块表明 add 方法需要一个 Album，但第三个和第四个代码块表明您已经使用 Song 参数实现了 add 方法。接口需要一个需要 Song 的 add 方法，或者您的类需要实现一个需要 Album 的 add 方法——这些方法需要相同的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:43:59.477

**我认为您正在导入错误的 List 接口。**

请检查导入语句中是否提到了您的 List 接口，并且没有其他 List 接口被导入，如错误语句所述。

> 添加（整数，对象）

并不是

> 添加（整数，专辑）

我认为您不小心**实现了 java 列表接口**。

我希望这是有帮助的..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:13:47.693

对于您的第一个问题，显然编译器无法定位 Song.class。如果 Song.java 在同一目录下，请确保已编译。

对于第二个问题，实现一个接口意味着你**必须**实现它的每一个方法。这意味着您需要编写具有完全相同的方法签名的方法 - 其中包括参数。

虽然这一次，由于您没有在界面中包含所有方法，我只是假设它们都已实现。在这种情况下，看起来 R.daneel.olivaw 是正确的，您可能使用了错误的列表。确保签名匹配，并且正在使用您的 List 版本。如上所述，这意味着它必须被编译并位于 java 的类路径（或在同一目录中）。

编辑：最初误解了问题的第二部分，此答案已相应更新。

# sql - SELECT LIKE 规范可以做到这一点吗？

> ID：15916208
> 
> 赞同：0
> 
> 时间：2013-04-10T03:05:11.903
> 
> 标签：sql

看这个链接：[SQL SELECT LIKE](http://www.techonthenet.com/sql/like.php)

如果您正在搜索以 开头`H`和结尾的名称`dinger`怎么办？

我会使用：

```
SELECT NAME LIKE

  'H_dinger'
  'H...dinger' or
  'H%dinger' ? 
```

我假设`H_dinger`会认为两者之间只有 1 个字符，但我不知道它是什么——所以我正在寻找它。

`H...dinger`无效。

`H%dinger`似乎它会检查所有内容，但在网站上，甚至没有列出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:07:37.430

您将使用`%`，这是可变大小的通配符。

但是您需要正确使用语法，例如：

```
select NAME from TABLE where NAME like 'H%dinger' 
```

请记住，查询使用`%` *可能*是一个性能问题（取决于它的使用方式和 DBMS 引擎）。它可以防止有效使用索引来加速查询。对于小桌子可能无关紧要，但如果您需要扩展，请记住这一点。

# c++ - *v8::String::Utf8Value(args[0]->ToString()) 不返回 node.js 插件参数的字符串

> ID：15916210
> 
> 赞同：6
> 
> 时间：2013-04-10T03:05:29.753
> 
> 标签：c++, c, node.js, v8, node.js-addon

我发现 *v8::String::Utf8Value(args[0]->ToString()) 在节点 0.8.2 32 位上返回正确的字符串，并且在节点 0.8.8 64-上不返回正确的字符串少量。

有人明白为什么吗？

我的 node.js 插件看起来像这样：

```
#define BUILDING_NODE_EXTENSION
#include <node.h>

#define MAX_OUTPUT_BUF  80
extern "C" char *do_sqlsig(char *in);

using namespace v8;

Handle<Value> Sqlsig(const Arguments& args) {
 HandleScope scope;
 char *c_arg, *ret;

 if (args.Length() < 1) {
   ThrowException(Exception::TypeError(String::New("Wrong number of arguments")));
   return scope.Close(Undefined());
 }

 c_arg = *v8::String::Utf8Value(args[0]->ToString());

 ret = c_arg; //do_sqlsig(c_arg);

 return scope.Close(String::New(ret));
}

void Init(Handle<Object> exports) {
  exports->Set(String::NewSymbol("sqlsig"),
      FunctionTemplate::New(Sqlsig)->GetFunction());
}

NODE_MODULE(sqlsig, Init) 
```

如您所见，我正在为 C 函数 do_sqlsig 编写一个包装器。我对C非常了解，对C++知之甚少

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T03:12:09.063

返回的指针指向的字符串`*v8::String::Utf8Value(args[0]->ToString());`在这一行的末尾被销毁（何时`Utf8Value`被销毁）。`Utf8Value`您可以在一行中创建和销毁一个对象。取消引用悬空指针时这是未定义的行为，以及为什么您在不同版本上看到不同的结果。

将其分成两行，只要您的`Utf8Value`对象在范围内，字符串就会有效。

```
v8::String::Utf8Value str(args[0]->ToString());
c_arg = *str; 
```

# iphone - 在启动期间执行长时间运行的代码时应用程序关闭

> ID：15916213
> 
> 赞同：0
> 
> 时间：2013-04-10T03:05:50.440
> 
> 标签：iphone, xamarin.ios, splash-screen

几个月前，我问了一个关于在 monotouch 上使用长时间运行的代码制作启动画面的问题。

[单点触控中带有繁重代码的启动画面](https://stackoverflow.com/questions/14621022/splash-screen-with-heavy-codes-in-monotouch)

我跟着答案。现在的问题是，当我使用`ModalViewController`长时间运行的操作失败时，如何以正常方式关闭应用程序？

例如，我长时间运行的代码正在从服务器下载一些配置。然后，下载失败。我`UIAlertView`向用户显示“下载失败，继续？”。当用户点击“是”时，应用程序会继续，但“否”呢？我应该怎么办？

我认为最好的选择是关闭应用程序，但我发现不建议这样做，并且在应用程序批准过程中应用程序可能会被拒绝。所以，我只是隐藏 AlertView 并要求用户按下“主页按钮”来关闭应用程序。但是，当用户再次启动应用程序时，应用程序不会从 开始`root`，而只是从以前的状态恢复。

# javascript - 目标域的 window.parent.postMessage 和 window.location.hostname

> ID：15916214
> 
> 赞同：0
> 
> 时间：2013-04-10T03:06:06.520
> 
> 标签：javascript, iframe, javascript-events

在子 iframe 中，我使用 window.parent.postMessage('some msg', targetDomain) 向父级发送消息。最初，targetDomain 是一个硬编码的“字符串”（例如，“ [http://my.childdomain.com](http://my.childdomain.com) ” ）。从那以后，有人问我——出于我们将在此处略过的原因——改为计划 targetDomain 是动态的。然后我尝试将 targetDomain 作为 'http://'+window.location.hostname 但有些不对劲。

我之前已经发出警报（window.location.hostname）并获得了正确的值，但 window.parent.postMessage() 似乎不喜欢 window.location.hostname。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:32:16.543

哎呀。问题解决了。主要问题是我没有解析 window.location.hostname 来获取 TLD。一旦我睡了一觉，醒悟过来，我就意识到我的方式是错误的。也就是说，我需要告诉 window.parent.postMessage 消息的去向，而不是它的来源。是的，我知道……呃？

# sql - SQL 约束/检查连接表

> ID：15916216
> 
> 赞同：1
> 
> 时间：2013-04-10T03:06:13.923
> 
> 标签：sql, constraints

我有三个表：`store`, `product`, `storeproduct`。

`store`和表中的内容并不重要`product`，只要知道表中有 a`storeID`和表中的`store`a即可。然而，该表跟踪每个不同的 s 。所以表有两列。列和列，都是来自和表的外键。`productID``product``storeproduct``product``store``storeproduct``storeID``productID``store``product`

有没有办法对任何表进行约束或检查，以确保商店必须有超过 0 个产品和少于 50 个产品。

注意：我不想要一个`select`声明来做到这一点。我只想知道在创建表时是否有办法设置约束或检查。

这样做的目的是，如果已经有 50 个产品（行）相同，则用户不能`insert`进入表，或者如果删除一行将导致最后一行消失，则用户不能从表中进入。`storeproduct``storeID``delete``storeproduct``storeID`

该`storeproduct`表可能如下所示

```
storeID productID
1       1
1       2
1       3
2       4
2       5
2       6
2       7
3       4
3       2
3       6
3       1
3       8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:13:40.923

实际上，根据您的数据库，您可能能够做到这一点。Oracle（也许还有其他人）提供可以应用约束的物化视图。因此，您可以使用 PRODUCTS_IN_STORES 列创建 MV（类似于`select storeID, count(*) as PRODUCTS_IN_STORES from stores left outer join storeproduct on store.storeid=storeproduct.storeid group by store.storeid` .然后对其施加约束，断言 PRODUCTS_IN_STORES 介于 0 到 50 之间或其他任何值。

[http://www.sqlsnippets.com/en/topic-12896.html](http://www.sqlsnippets.com/en/topic-12896.html)

和

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:21389386132607](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:21389386132607)

对你来说不是一个完整的答案，而是一些需要思考的东西，希望能让你走上自己的道路。

# php - PHP：strtotime 和日期超过 2038 年 1 月 19 日

> ID：15916219
> 
> 赞同：0
> 
> 时间：2013-04-10T03:06:49.350
> 
> 标签：php, strtotime

我正在使用 strtotime 函数来查找两个给定日期之间的差异，如下所示：

```
$diff_in_mill_seconds = strtotime($ToDate) - strtotime($FromDate);
$difference_in_years = round($diff_in_mill_seconds / (365*60*60*24),1); 
```

当 $ToDate 超过 2038-01-19 时，此脚本将失败。

PHP 官方文档说：

> 时间戳的有效范围通常是从 1901 年 12 月 13 日星期五 20:45:54 UTC 到 2038 年 1 月 19 日星期二 03:14:07 UTC

PHP 文档还说：

> 不建议将此函数用于数学运算。最好在 PHP 5.3 及更高版本中使用 DateTime::add() 和 DateTime::sub()，或者在 PHP 5.2 中使用 DateTime::modify()。

我不能使用 DateTime::add() 和 DateTime::sub() 因为服务器上的 PHP 版本是 5.2。

那么，如何使用 php 5.2 计算两个日期（超过 2038-01-19 年）之间的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:18:01.693

这是 UNIX [Y2K38 错误](http://en.wikipedia.org/wiki/Y2k38)。它已在 PHP 的 64 位实现中*或*通过 using得到修复`DateTime::diff`，后者在内部不使用整数，因此不会遇到问题。

你也需要。没有切换平台就没有真正的解决方案。

# javascript - IE7 和 IE8 中的 YouTube API 回调

> ID：15916231
> 
> 赞同：0
> 
> 时间：2013-04-10T03:08:03.383
> 
> 标签：javascript, api, youtube, youtube-api, youtube-javascript-api

我很难让 API 在 IE7 和 IE8 中工作。需要简单的暂停/停止检测。

甚至这个演示页面也有 IE8 错误并且回调事件失败： [https ://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

有人可以解决这个问题吗？

使用它适用于其他浏览器：

```
player = new YT.Player('youTubePlayer' + i, {
    height: height,
    width: width,
    videoId: getYouTubeID(src),
    enablejsapi : 1,
    events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange,
    },
    playerVars: {
        controls: 1,
        showinfo: 0 ,
        modestbranding: 1,
        wmode: "opaque"
    }
}); 
```

和

```
function onPlayerStateChange(evt) {
    if (evt.data == YT.PlayerState.PAUSED) {
    }
    if (evt.data == YT.PlayerState.ENDED) {
    }
    if (evt.data == YT.PlayerState.PLAYING) {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:56:17.703

Youtube Iframe API 与 IE7 不兼容，因为该浏览器不支持该`postMessage`功能。你只能使用 AS3 嵌入，虽然我不知道我会在那个篮子里放很多鸡蛋……鉴于谷歌承诺只支持最新的两个版本的浏览器（从技术上讲将是 IE9 和 10，尽管看看 IE8 会发生什么会很有趣，因为您的 Windows XP 即将达到 EOL 但 Windows 8 的采用速度很慢），这样的问题将随着技术和 API 的不断出现发展。

通常，只要您处于标准模式，IE8 现在就可以正常工作；演示页面对我没有任何错误（但是当我切换到兼容性或怪癖模式时）。您是否在开发人员工具控制台中遇到任何错误？（也就是说，回调失败是什么意思？）

# jquery - jQuery 插件未在 IE10 中加载

> ID：15916237
> 
> 赞同：0
> 
> 时间：2013-04-10T03:08:33.437
> 
> 标签：jquery, internet-explorer, zurb-foundation

我正在使用`jQuery`选择框，它适用于除 IE 之外的所有经过测试的浏览器。

这就是我加载它的方式：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#team").selectbox({
            speed: 100
        });
        $("#site").selectbox({
            speed: 100
        });
        $("#info").selectbox({
            speed: 100
        });
    });
</script> 
```

我越来越：

```
SCRIPT438: Object doesn't support property or method 'selectbox' 
```

如果可以的话请帮忙。

PS，这里是js加载顺序的内容：

```
<script type="text/javascript" src="/js/foundation/foundation.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.alerts.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.clearing.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.cookie.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.dropdown.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.forms.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.joyride.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.magellan.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.orbit.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.placeholder.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.reveal.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.section.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.tooltips.js"></script>
<script type="text/javascript" src="/js/foundation/foundation.topbar.js"></script>
<script type="text/javascript" src="/js/vendor/custom.modernizr.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/js/jquery.selectbox-0.2.min.js"></script>
<script type="text/javascript" src="/js/globals.js"></script> 
```

# node.js - npm install formidable 在节点 0.10 中不起作用

> ID：15916240
> 
> 赞同：1
> 
> 时间：2013-04-10T03:08:43.453
> 
> 标签：node.js, formidable

我正在学习**[The Node Beginner Book](http://www.nodebeginner.org/)**`formidable`中的教程，但由于版本错误而无法安装。这是错误。无论是否使用`sudo`and ，我似乎都会收到此错误`@latest`。

```
npm install formidable@latest
npm http GET https://registry.npmjs.org/formidable
npm http 304 https://registry.npmjs.org/formidable
npm WARN engine formidable@1.0.13: wanted: {"node":"<0.9.0"} (current: {"node":"v0.10.0","npm":"1.2.14"}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T03:14:05.387

该错误意味着确切的说明，该模块需要 0.9.0 之前的 Node 版本，而您当前的版本是 0.10.0。

```
wanted: {"node":"<0.9.0"}
current: {"node":"v0.10.0","npm":"1.2.14"} 
```

一个简单的解决方案是使用旧版本的 Node，您可以轻松地从 Node 存储库中获取它。

您还可以使用[*n*](https://github.com/visionmedia/n)，它允许您轻松地在多个节点二进制文件之间切换或安装。

```
npm install -g n
n 0.8.9
//installs node version 0.8.9 
```

如果您以后不需要二进制文件，您可以轻松删除它。

```
n rm 0.8.9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:08:43.453

转到[github 中的 readme.md，](https://github.com/felixge/node-formidable/blob/master/Readme.md)它将显示 npm install 命令以及 git clone 命令，如果 npm install 失败，该命令应该可以工作。

```
git clone git://github.com/felixge/node-formidable.git formidable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T04:57:40.457

尝试一个据称支持 0.10.x 的强大分支：

[https://github.com/superjoe30/node-multiparty](https://github.com/superjoe30/node-multiparty)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-15T02:34:19.770

运行以下代码后，我的节点 v0.10.25 遇到了同样的问题。

```
> npm install formidable@latest

npm http GET https://registry.npmjs.org/formidable
npm http 304 https://registry.npmjs.org/formidable 
```

我将指令更改为

```
> npm install formidable@1.0.2 
```

它现在工作得很好。我想最新版本不兼容。

# android - 空指针异常：addTextChangedListener

> ID：15916242
> 
> 赞同：0
> 
> 时间：2013-04-10T03:08:46.590
> 
> 标签：android, nullpointerexception

在我的应用程序中，有两个`AutoCompleteTextView`和一个`Button`来计算某个操作。我正在设置对`Button`两者的响应`AutoCompleteTextView`，如果两者都`AutoCompleteTextView`被填充，那么只有这样`Button`才会出现。

这样做我得到一个**空指针异常**。程序如下：

```
boolean isLocation=false;
boolean isDestination=false;

protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        location=(AutoCompleteTextView)findViewById(R.id.locale);
        location.setAdapter(new PlacesAutoCompleteAdapter(this, R.layout.list_item));
        location.setOnItemClickListener(new OnItemClickListener()

    {

    @Override
    public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
            // TODO Auto-generated method stub
            place1 = (Places) adapterView.getItemAtPosition(position);
            location.setText(place1.description);
            location.clearFocus();
            destination.requestFocus();
            Log.d("AutoCompleteTask", location.getText().toString());
                }
    });

    location.addTextChangedListener(new TextWatcher()
    {

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub
            fillLocation=true;
        }

    });

    destination = (AutoCompleteTextView)findViewById(R.id.destination);
    destination.setAdapter(new PlacesAutoCompleteAdapter(this, R.layout.list_item));
    destination.setOnItemClickListener(new OnItemClickListener() 
    {

    @Override
    public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
                // TODO Auto-generated method stub
            place2 = (Places) adapterView.getItemAtPosition(position);
            destination.setText(place2.description);
            destination.clearFocus();
            calculate.requestFocus();               
            Log.d("AutoCompleteTask2", destination.getText().toString());
                }
    });

    destination.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            fillDestination=true;
        }
    });

    if(fillLocation==true || fillDestination==true )
    {
        calculate.setVisibility(View.VISIBLE);
    }
    else
    {
        calculate.setVisibility(View.INVISIBLE);
    }

    calculate = (Button)findViewById(R.id.calculate);
    calculate.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

            if(location.getText().toString().length()<1 || destination.getText().toString().length()<1) 
            {
                Toast.makeText(getApplicationContext(), "Give values before placing a query", Toast.LENGTH_LONG).show();
            }
            else{
                @SuppressWarnings("deprecation")
                String url = "http://maps.googleapis.com/maps/api/distancematrix/json?origins="+URLEncoder.encode(location.getText().toString())+"&destinations="+URLEncoder.encode(destination.getText().toString())+"&unit=metric&mode=driving&sensor=false";
                new ReadDistanceJSONFeedTask().execute(url);
                }
            }
        }); 
```

作为开发应用程序的新手，这个**空指针异常**是什么？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:47:16.163

当您的代码中的某些内容返回 null 时，会发生 Null 指针异常

例如，如果您有：

```
int count;
String[] biz = {"hand","is","hammer"} 
```

然后你尝试这样做：

```
String isnt = biz[count]; 
```

如果你没有像这样初始化变量计数：

```
count = 1; 
```

然后

```
String isnt = biz[count]; 
```

会抛出空指针异常，因为没有设置任何计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:49:37.440

因为这个，你得到了一个`NPE`： -

```
if(fillLocation==true || fillDestination==true )
{
    calculate.setVisibility(View.VISIBLE); // NPE here
}
else
{
    calculate.setVisibility(View.INVISIBLE); // NPE here
}
calculate = (Button)findViewById(R.id.calculate); 
```

您已经尝试设置计算按钮的可见性，甚至在初始化它之前。移动`calculate = (Button)findViewById(R.id.calculate);`到块上方，`if-else`它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:01:30.977

它正在抛出`NullPointerException`，因为您`calculate = (Button)findViewById(R.id.calculate);`不可见将其放在您的`onCreate()`方法中`setContentView()`。

# python - matplotlib 图形是如何构成的？

> ID：15916247
> 
> 赞同：0
> 
> 时间：2013-04-10T03:09:24.953
> 
> 标签：python, matplotlib

所以我试图理解一个数字是如何构成的。我的理解如下：

你有一个画布（如果你有一个 gui 或类似的东西）、一个图形和轴

您将轴添加到图形，并将图形添加到画布。

该图由轴保持，例如：

```
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot([1, 2], [1, 4])
fig.show() 
```

我希望会创建一个数字但是我只是得到一个空白窗口......而且，它似乎`canvas`根本不需要？

任何帮助表示感谢，谢谢！

这里它说上面的代码应该可以工作......或者有一个类似的例子

[https://github.com/thehackerwithin/PyTrieste/wiki/Python7-MatPlotLib](https://github.com/thehackerwithin/PyTrieste/wiki/Python7-MatPlotLib)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:54:28.140

*除非您真的*知道自己在做什么（并且正在将 mpl 嵌入到另一个程序中）， 否则您不应该在画布上戳戳。`pyplot`有很多不错的工具可以为您完成大部分设置。

用户层（图形、轴、艺术家等）和渲染层（画布、渲染器等）之间存在分离。第一层是面向用户的，应该独立于机器。第二层是特定于机器的，但不应向用户公开任何内容。

有多种“后端”负责两层之间的转换（通过提供画布的子类等）。有交互式后端（QtAgg、GtkAgg、TkAgg、...），其中包含所有挂钩到一个 gui 工具包中以提供漂亮的窗口和仅保存文件的非交互式后端（PS、pdf、...）。

`figure`s 持有`axes`哪个持有`artists`（和`axis`）。这些类将与渲染层对话，但您（在大多数情况下）不需要担心具体如何。

# php - How to echo php within php?

> ID：15916248
> 
> 赞同：0
> 
> 时间：2013-04-10T03:09:33.363
> 
> 标签：php, forms, echo

How can I display the name the user entered back into the form if the user forgot to enter a password? i.e. echo $submitted_user into value="" under Username.

```
if(empty($_POST['password'])) {
    $submitted_user = htmlentities($_POST['username']);
    echo '<form action="register.php" method="post">
    Username:<br />
    <input type="text" name="username" value="" autofocus="autofocus" />
    <br /><br />
    Password:<br />
    <input type="password" name="password" value="" />
    <br /><br />
    <input type="submit" value="Register" />
    </form>';

    exit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:12:02.110

Append the `$submitted_user` to value should do it.

```
if(empty($_POST['password'])) {
    $submitted_user = htmlentities($_POST['username']);
    echo '<form action="register.php" method="post">
    Username:<br />
    <input type="text" name="username" value="'.$submitted_user.'" autofocus="autofocus" />
    <br /><br />
    Password:<br />
    <input type="password" name="password" value="" />
    <br /><br />
    <input type="submit" value="Register" />
    </form>';

    exit();
} 
```

# java - ColorPane - 可以抓取不同字符的字符串吗？

> ID：15916249
> 
> 赞同：0
> 
> 时间：2013-04-10T03:09:41.197
> 
> 标签：java, swing, jtextpane, styleddocument

我目前正在处理一个给我的旧项目，它目前使用 java swing 并有一个基本的 gui。它有一个 ColorPane 扩展 Jtextpane 以更改所选文本的颜色。

它使用这种方法

```
 public void changeSelectedColor(Color c) {
      changeTextAtPosition(c, this.getSelectionStart(), this.getSelectionEnd());
  } 
```

说那个字符串=“Hello World！” 你好颜色是绿色世界是黑色。如何根据 Jtextpane 中的颜色抓取 Hello。我已经尝试过一种笨拙的方式，它只是在我改变颜色时存储选定的单词，但是有没有一种方法可以一次抓取所有绿色文本？我试过谷歌搜索，但......它并没有真正想出任何好的方法。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:54:09.087

可能有很多方法可以做到这一点，但是......

您需要获取对`StyleDocument`支持 的的引用`JTextPane`，从给定的字符位置开始，您需要检查给定颜色的字符属性，如果是`true`，则继续到文本字符，否则就完成了。

```
import java.awt.Color;
import javax.swing.JTextPane;
import javax.swing.text.BadLocationException;
import javax.swing.text.Element;
import javax.swing.text.Style;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class Scrape {

    public static void main(String[] args) {
        JTextPane textPane = new JTextPane();
        StyledDocument doc = textPane.getStyledDocument();

        Style style = textPane.addStyle("I'm a Style", null);
        StyleConstants.setForeground(style, Color.red);

        try {
            doc.insertString(doc.getLength(), "BLAH ", style);
        } catch (BadLocationException ex) {
        }

        StyleConstants.setForeground(style, Color.blue);

        try {
            doc.insertString(doc.getLength(), "BLEH", style);
        } catch (BadLocationException e) {
        }

        Color color = null;
        int startIndex = 0;
        do {
            Element element = doc.getCharacterElement(startIndex);
            color = doc.getForeground(element.getAttributes());
            startIndex++;
        } while (!color.equals(Color.RED));
        startIndex--;

        if (startIndex >= 0) {

            int endIndex = startIndex;
            do {
                Element element = doc.getCharacterElement(endIndex);
                color = doc.getForeground(element.getAttributes());
                endIndex++;
            } while (color.equals(Color.RED));
            endIndex--;
            if (endIndex > startIndex) {
                try {
                    String text = doc.getText(startIndex, endIndex);
                    System.out.println("Red text = " + text);
                } catch (BadLocationException ex) {
                    ex.printStackTrace();
                }
            } else {
                System.out.println("Not Found");
            }
        } else {
            System.out.println("Not Found");
        }
    }
} 
```

这个例子简单地找到了第一个红色的单词，但是你可以很容易地遍历整个文档并找到你想要的所有单词......

# c++ - 自定义对象的 QList

> ID：15916251
> 
> 赞同：2
> 
> 时间：2013-04-10T03:09:59.390
> 
> 标签：c++, qt, qlist

我正在尝试创建`QList`自定义对象，但无法这样做。我尝试这样做时收到的编译错误是：

`error: symbol(s) not found for architecture x86_64 (file not found)`

我能够创建`QList`自定义对象的指针，以及原始数据类型的指针。正如文档中所说，我知道`QList`支持做我想做的事情。

我正在使用 Mac OS X 10.7.5、Qt 5.0.1 和 Qt Creator 2.6.2。

代码：

```
QList<MyClass> my_list; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T04:04:44.347

根据文档： **QList 的值类型必须是可分配的数据类型。**

要符合条件，类型必须提供默认构造函数、复制构造函数和赋值运算符。所以你的自定义类应该像这样实现。

```
class MyClass
 {
 public:
     MyClass() {}
     MyClass(const MyClass &other);

     MyClass &operator=(const MyClass &other);

 private:
     //private data members
 }; 
```

# c - 编译 amqsput0.c [MQ]

> ID：15916252
> 
> 赞同：0
> 
> 时间：2013-04-10T03:10:29.483
> 
> 标签：c, ibm-mq, mq

我是 MQ 的新手。我正在尝试编译 amqsget0.c 文件以用于测试目的，稍作修改。但是每当它尝试连接到队列时，它都会返回错误

<02:17:16>成功连接到 MQ 队列管理器 QMGR
<02:17:16>MQ 打开队列 QNME
失败，原因代码为 8667514137712（打印原因代码从 MQCONN 返回。）

用于编译 - [在 AIX 6.1 机器中]
`cc -g -q64 -qcpluscmt -c amqsget0.c`
`cc -g -q64 -qcpluscmt amqsget0.o -L/usr/mqm/lib64 -lmqm_r -o amqsget`

但是我的朋友能够编译相同的东西并且可执行文件在我的机器上正常工作。

我的机器
`dspmqver
Name: WebSphere MQ
Version: 7.5.0.0`

他的机器
`dspmqver
Name: WebSphere MQ
Version: 7.0.0.0`

任何人都可以指出我在编译时是否遗漏了什么？或任何我应该检查的指针？或者我错过了任何配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:52:24.947

问题解决了..是我的编译错误

# javascript - 网站抵押和保险计算器 = Javascript？

> ID：15916256
> 
> 赞同：0
> 
> 时间：2013-04-10T03:11:09.893
> 
> 标签：javascript, html, joomla

我正在使用 Joomla 为一家小型金融服务公司开发一个网站。我需要实现一个简单的抵押贷款和保险计算器，但我不知道从哪里开始。使用 Joomla，我可以创建自定义 HTML 模块并在任何我想要的地方实现它们。我浏览了其他网站，Javascript 看起来像是首选语言。

Javascript是构建计算器的唯一方法！？

有什么方法可以使用 html 来做到这一点！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:19:56.290

你需要一种可以为你做数学的语言。HTML 无法做到这一点。我发现了一堆类似于这个的 Joomla 扩展... [http://archive.extensions.joomla.org/extensions/financial/taxes-a-mortgages/2237](http://archive.extensions.joomla.org/extensions/financial/taxes-a-mortgages/2237)

但是...我建议您使用类似于此博客上的方法编写自己的 jQuery... [http://www.issackelly.com/blog/2009/01/11/Simple_JQuery_Mortgage_Calculato/](http://www.issackelly.com/blog/2009/01/11/Simple_JQuery_Mortgage_Calculato/)

# php - 缓存 googlemaps 地理编码结果，但我的代码已损坏

> ID：15916265
> 
> 赞同：0
> 
> 时间：2013-04-10T03:12:11.937
> 
> 标签：php, sql, google-maps, caching

我昨晚发布了这个问题，但我措辞错误并且没有正确解释。我正在尝试缓存 googlemaps 地理编码结果以用于我制作的消防地图，并且我正在接近 google 的限制，因此需要缓存结果。帮助！

下面的代码有点工作，但是每次代码运行时它都会创建一个新的 sql 记录，而不管地址是否已经在数据库中。似乎只调用一次谷歌然后保存数据，然后从数据库中加载数据正常，看起来其余的工作，但我看不出我哪里出错了..正如我所说，它创建了一条新记录每次代码运行时，我都会得到一个充满相同记录的数据库。我的脑子很痛，但我真的需要让这个工作，这样我才能继续帮助消防车灭火。:)

哦，我正在使用 googlemaps 上的地理编码结果（在 T&C 允许的情况下），这个代码实际上只是为了让它工作。我希望这是有道理的，我希望有人能提供帮助......谢谢:)

```
<?php

$jobadd = "1000 BURWOOD HWY, BURWOOD";

// connect to the database
include('connect-db.php');

// get results from database and find needle
$result = mysql_query("SELECT * FROM geocache") 
or die(mysql_error());  

while($row = mysql_fetch_array( $result ))
{
$needle =  '' . $row['address'] . '';

if (strpos($jobadd,$needle) !== false)
{
$status = "CACHED";
$latitude =  '' . $row['latitude'] . '';
$longitude =  '' . $row['longitude'] . '';
}

else

{
$status = "GOOGLE";
$address2 = "$jobadd, Victoria, Australia";
define("MAPS_HOST", "maps.google.com"); 
$base_url = "http://" . MAPS_HOST . "/maps/api/geocode/xml"; 
$request_url = $base_url . "?address=" . urlencode($address2) ."&sensor=false"; 
$xml = new SimpleXMLElement(file_get_contents($request_url)); 

$latitude = $xml->result->geometry->location->lat;
$longitude = $xml->result->geometry->location->lng; 

// save the data to the database
mysql_query("INSERT geocache SET address='$jobadd', latitude='$latitude', longitude='$longitude' ")
 or die(mysql_error()); 
}

}

echo $status;
echo '<BR>';
echo $jobadd;
echo '<BR>';
echo 'LAT:';
echo $latitude;
echo '<BR>';
echo 'LON:';
echo $longitude;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:22:37.673

你试过输出strpos的结果吗？逻辑看起来并没有错。问题在于 if 条件。数据库中的记录是什么样的？

# c# - WP8使用硬件后退按钮后无法重新选择列表框项目

> ID：15916270
> 
> 赞同：0
> 
> 时间：2013-04-10T03:12:39.417
> 
> 标签：c#, xaml, windows-phone-8

wp8, C#, VS12

I have a listbox item that when selected/clicked takes the user to anther page...WinePage.xaml

```
 <ListBox
        SelectedIndex="-1"
        SelectionChanged="OpenWinePage_Click"
        x:Name="allItemsListBox" 
        ItemsSource="{Binding AllItems}" 
        Margin="12, 0, 12, 0" Width="440"
        ItemTemplate="{StaticResource WineListBoxItemTemplate}" /> 
```

当我使用 WP8 的硬件后退按钮返回 MainPage.xaml 时，我刚刚单击的 ListBox 不再可选择/可单击。但我希望能够直接回到那个特定的 ListBox。

我的 MainPage.xaml.cs 页面中将用户带到 WinePage.xaml 的代码是

```
 private void OpenWinePage_Click(object sender, EventArgs e)
        {
        NavigationService.Navigate(new Uri("/WinePage.xaml", UriKind.Relative));
        } 
```

我需要做什么才能让 ListBox 在返回时可选择/可点击？

谢谢！

R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:49:16.550

带有列表框的页面可能不会被破坏，因此当您在其中选择一个项目时，该项目的状态可能会持续存在。

尝试将其索引设置为 -1，然后导航。

```
allItemsListBox.SelectedIndex = -1;

private void OpenWinePage_Click(object sender, EventArgs e)
{
    allItemsListBox.SelectedIndex = -1;
    NavigationService.Navigate(new Uri("/WinePage.xaml", UriKind.Relative));
} 
```

# java - 如何让 JComboBox 创建一个或多个新的 JComboBox

> ID：15916273
> 
> 赞同：0
> 
> 时间：2013-04-10T03:12:57.867
> 
> 标签：java, swing, user-interface, jcombobox

如何从 JComboBox 中进行选择删除或将选择添加到另一个 JComboBox？

更具体地说，我有一个 JComboBox，其中包含一年中的月份作为选择。我有另一个月中的日子。虽然 31 日应该是 12 月的选择，但不应该是 2 月的选择。任何帮助，将不胜感激。

```
 final JComboBox<String> monthBox = new JComboBox<String>();
    monthBox.addItem("January");
    monthBox.addItem("February");
    monthBox.addItem("March");
    monthBox.addItem("April");
    monthBox.addItem("May");
    monthBox.addItem("June");
    monthBox.addItem("July");
    monthBox.addItem("August");
    monthBox.addItem("September");
    monthBox.addItem("October");
    monthBox.addItem("November");
    monthBox.addItem("December");

    JComboBox<String> dayBox = new JComboBox<String>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:15:45.440

只需将 a 附加`ActionListener`到 master`JComboBox`并在`actionPerformed`方法内，用于`JComboBox#getSelectedItem`确定您应该采取的行动。

您可以设置一个`Map`选项，一个用于主控中的每个条目，`JCheckBox`这样可以更轻松地切换值

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Calendar;
import java.util.Date;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class JoinedComboBoxes {

    public static void main(String[] args) {
        new JoinedComboBoxes();
    }

    public JoinedComboBoxes() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            final JComboBox<String> monthBox = new JComboBox<String>();
            monthBox.addItem("January");
            monthBox.addItem("February");
            monthBox.addItem("March");
            monthBox.addItem("April");
            monthBox.addItem("May");
            monthBox.addItem("June");
            monthBox.addItem("July");
            monthBox.addItem("August");
            monthBox.addItem("September");
            monthBox.addItem("October");
            monthBox.addItem("November");
            monthBox.addItem("December");

            setLayout(new GridBagLayout());
            add(monthBox);

            final JComboBox<Integer> days = new JComboBox<>();
            days.setEnabled(false);
            add(days);

            monthBox.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    Calendar cal = Calendar.getInstance();
                    String month = (String) monthBox.getSelectedItem();
                    days.setEnabled(month != null);
                    if (month != null) {
                        int calMonth = 0;
                        switch (month) {
                            case "January":
                                calMonth = Calendar.JANUARY;
                                break;
                            case "February":
                                calMonth = Calendar.FEBRUARY;
                                break;
                            case "March":
                                calMonth = Calendar.MARCH;
                                break;
                            case "April":
                                calMonth = Calendar.APRIL;
                                break;
                            case "May":
                                calMonth = Calendar.MAY;
                                break;
                            case "June":
                                calMonth = Calendar.JUNE;
                                break;
                            case "July":
                                calMonth = Calendar.JULY;
                                break;
                            case "August":
                                calMonth = Calendar.AUGUST;
                                break;
                            case "September":
                                calMonth = Calendar.SEPTEMBER;
                                break;
                            case "October":
                                calMonth = Calendar.OCTOBER;
                                break;
                            case "November":
                                calMonth = Calendar.NOVEMBER;
                                break;
                            case "December":
                                calMonth = Calendar.DECEMBER;
                                break;
                        }
                        days.removeAllItems();
                        cal.setTime(new Date()); // For the current year...
                        cal.set(Calendar.MONTH, calMonth);
                        int min = cal.getActualMinimum(Calendar.DATE);
                        int max = cal.getActualMaximum(Calendar.DATE);
                        for (int day = min; day <= max; day++) {
                            days.addItem(day);
                        }
                    }
                }
            });
            monthBox.setSelectedItem(null);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.dispose();
        }
    }
} 
```

# spring - Spring - 根据标志选择控制器

> ID：15916274
> 
> 赞同：1
> 
> 时间：2013-04-10T03:13:13.073
> 
> 标签：spring, controllers

**问题定义** 我有一个链接指向说 myapp/doStuff

目前我有一个 Spring 控制器来处理这个请求。说 doStuffOld

但是现在有了一个新项目，我需要执行以下操作 1\. 添加一个与日期相关的标志 - dateFlag（如果 date< 10-Sep 否则为 true） 2\. 创建一个新控制器 doStuffNew 3\. 对于相同的 url (myapp/doStuff)如果 dateFlag 为假，我需要使用 doStuffOld 否则使用 doStuffNew

在春天实现这一目标的最佳方法是什么。注意：URL 来自应用程序外部，并且无法更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:19:36.787

你可以做[请求转发](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)

```
boolean dateFlag = Boolean.getBoolean(request.getParameter("dateFlag")); //Get the dateFlag value in the `doStuff` handler method

if(dateFlag){
    request.getRequestDispatcher("doStuffOld").forward(request, response);
    return null;
} 
```

在您的`myapp/doStuff`处理程序中，您可以检查标志并将请求转发到新的 url( `doStuffOld`)，您可以使用[params](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#params%28%29)选项。

[如果使用RequestMapping](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html)并且您不希望调用旧处理程序，则另一种解决方案`doOldStuff`

```
@RequestMapping(value="doStuff", params="dateFlag=true")
public ModelAndView doStuff(HttpServletRequest request, HttpServletResponse response){
    ....
}

@RequestMapping(value="doStuff", params="dateFlag=false")
public ModelAndView doOldStuff(HttpServletRequest request, HttpServletResponse response){
    ....
} 
```

# php - SQL - 为什么我的 INSERT 查询会死掉？

> ID：15916276
> 
> 赞同：0
> 
> 时间：2013-04-10T03:13:20.207
> 
> 标签：php, mysql, die

```
echo "</br></br></br>" . $sql;
mysql_query($sql) or die("Entry not added to database."); 
```

吐出：

```
INSERT INTO potentials (id, firstname, lastname, age, email, phone, twitter, timeofday, dayofweek, address, city, state, zip, joindate, parentname, parentnumber) VALUES (null, 'Rick', 'Bross', '14', 'rbross3@gmail.com', '8164896991', '@rick_bross', 'After 5:30PM', 'Weekdays', '1234 Cooper', 'Raymore', 'MO', '64130', '2013-04-09 20:10:06', 'Rick Bross II', '1234123412')Entry not added to database. 
```

为什么没有正确插入？我可以检查其中一个字符串是否不适合我的数据库列（类型类型 char 错误或其他内容）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:18:14.630

```
mysql_query($sql) or die(mysql_error()); 
```

尝试 msql_error() 函数。它是全局显示您的 sql 执行时发生的每个错误

# ruby-on-rails - Ruby on Rails javascript 动作响应 (js.erb) 正在呈现新的部分，但不执行 ui 效果

> ID：15916277
> 
> 赞同：0
> 
> 时间：2013-04-10T03:13:26.763
> 
> 标签：ruby-on-rails, ajax, jquery-ui, renderpartial

## 语境：

我有两个模型，模型 1 和模型 2。Model1 has_many model2's。在model1 的管理页面中，我呈现了一个_model2.html.erb 文件列表，每个model2 对应一个与model1 关联的文件。为了让用户从 model1 管理页面创建一个新的 model2，我在 model2 的视图目录下创建了一个 create.js.erb 文件。该文件当前如下所示：

```
$('#back').hide();
$('#allTab').removeClass('active');
$('#activeTab').addClass('active');
$('#completeTab').removeClass('active');
$('html,body').animate({
    scrollTop: $('html,body').scrollHeight
}, {
    duration: 600,
    queue: false
});
$('#activeTabList').closest('.number_of_model2s').text("<%= @model1.model2s.count %>");
$('#activeTabList').append("<li><%= escape_javascript(render partial: 'model2s/model2', locals: {f: @model2, g: @model1}) %></li>");
$('#activeTabList').last().children().effect('highlight', {}, 3000); 
```

## 问题：

我必须为`@model1`以使部分工作的渲染。但我无法获得任何动画或突出显示。这个列表可能会很长，这就是我想滚动到页面底部的原因。我希望用户看到添加到列表中。突出显示不是很重要，但我正试图让它工作，因为我也有一个更新操作以类似的方式工作，我想突出显示被更新的部分（我删除了部分在那里，然后我在同一个地方再次请求相同的模型 2 的部分）。

## 问题：

为什么似乎执行的唯一代码行是渲染部分行是否有特殊原因？

## 更多信息：

如果我将上面的部分渲染线替换为

```
$('#activeTabList').append("<li id='model2_<%= @model2.id %>'><%= escape_javascript(render partial: 'model2s/model2', locals: {f: @model2, g: @model1}) %></li>"); 
```

在管理页面 html 中，我以这种方式指定列表项的 id，但是如果我在此处添加 id，则部分不会呈现。这似乎与我遇到的问题有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:52:16.673

我终于让它滚动了。@gg_s，您的回答有助于我的动画滚动方法的语法，然后我必须修复它以与 mozilla 一起使用。这对我有用：

```
var $new_campaign_li = $('#activeTabList').children('li').last();
$(jQuery.browser.webkit ? 'body': 'html').animate({
    scrollTop: $new_model2_li.offset().top + $new_model2_li.children().height() / 2 - $(window).height() / 2
}, {
    duration: 600,
    queue: true
});// This delay doesn't seem to work: .delay(1000);
$new_model2_li.children().effect('highlight', {color: '#71EC5E'}, 1500); 
```

高光效果被修复了一个愚蠢的遍历错误。但我确实注意到，`queue`设置为`true`or `false`，即使我使用`delay(1000)`，这两个动画也会同时运行。它以我想要的方式工作！谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:46:43.700

这可能无法挽救局面，但该动画有一些错误。用这个：

```
$('body').animate({
    scrollTop: $('body')[0].scrollHeight
}, {
    duration: 600,
    queue: false
}); 
```

# winapi - 如何在 WIN 32 API 中使用命令行移动文件夹？

> ID：15916278
> 
> 赞同：0
> 
> 时间：2013-04-10T03:13:28.950
> 
> 标签：winapi, command, directory, move

我正在尝试使用 WIN32 API 中的命令行将 KFC 文件夹从 D 驱动器移动到 C 驱动器。在肯德基文件夹中还有一个文件夹：“新建文件夹”。我尝试使用此代码，但它不能？

```
CreateProcess(  L"C:\\WINDOWS\\system32\\cmd.exe",// path to application to run command
                                _T("/C MD C:\\KFC"),
                                NULL, 
                                NULL, 
                                FALSE, 
                                CREATE_NO_WINDOW, 
                                NULL, 
                                NULL, 
                                &startupInfo, 
                                &processInformation );
CreateProcess(  L"C:\\WINDOWS\\system32\\cmd.exe",// path to application to run command
                                _T("/C XCOPY D:\\KFC C:\\KFC /E"),
                                NULL, 
                                NULL, 
                                FALSE, 
                                CREATE_NO_WINDOW, 
                                NULL, 
                                NULL, 
                                &startupInfo, 
                                &processInformation );

CreateProcess(  L"C:\\WINDOWS\\system32\\cmd.exe",// path to application to run command
                                _T("/C RD D:\\KFC /S/Q"),
                                NULL, 
                                NULL, 
                                FALSE, 
                                CREATE_NO_WINDOW, 
                                NULL, 
                                NULL, 
                                &startupInfo, 
                                &processInformation ); 
```

感谢您的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:00:58.460

您可以使用`SHFileOperation`; 例如：

```
SHFILEOPSTRUCT sfo = { 0 };
sfo.wFunc = FO_MOVE;
sfo.pFrom = _T("D:\\KFC\0");
sfo.pTo = _T("C:\\\0");
sfo.fFlags = FOF_ALLOWUNDO;
SHFileOperation(&sfo); 
```

请注意，`pFrom`和`pTo`字符串都以双 NULL 结尾。

如果您想隐藏进度条等，您可以使用`FOF_NO_UI`标志或其他选项来执行此操作。

您也可以`IFileOperation`以类似的方式使用该界面。

# php - 获取所有 Facebook 状态

> ID：15916281
> 
> 赞同：0
> 
> 时间：2013-04-10T03:13:35.843
> 
> 标签：php, facebook

我正在尝试开发一个类似于 Archivebook 的应用程序，我可以在其中获取用户发布的所有状态。到目前为止，我有此代码，但仅限于 100 个。

```
 $status = $facebook->api(array('method' => 'fql.query', 'query' =>"SELECT message FROM status WHERE uid = me()"));
$i = 1;

foreach ($status as $statuses) {        
    echo $i. ". " .$statuses['message'] ."</br>"; //display status
    $i++;   //append 
```

我首先通过查询调用API，然后输出数组并编号。所有权限均已正确设置。

# html - CSS定位问题

> ID：15916288
> 
> 赞同：0
> 
> 时间：2013-04-10T03:14:13.247
> 
> 标签：html, css

出于某种原因，我的 div 名称“profile-stuff”底部有额外的空白。我似乎无法弄清楚它为什么在那里。我可能做错了什么。

JSFIDDLE：http: [//jsfiddle.net/8kvwC/](http://jsfiddle.net/8kvwC/)

我的 CSS：

```
#profile-stuff {
    margin: 0px 0px 20px 0px;
    height: auto;
    width: 100%;
    box-shadow: rgba(0, 0, 0, 0.498039) 0px 6px 16px -9px;
    background-color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:20:30.203

在您的`#cover-wrap`中，将您的位置更改为绝对并将顶部更改`-100px`为`50px`.

应该解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T03:29:35.927

好吧，从评论延伸：

正如@Adrift 解释的那样，`position:relative`元素仍然占据它们需要的空间，无论如何`top`/ `left`/etc。偏移它们被分配。

所以为了避免这种情况，改变

```
#cover-wrap {
    top:-100px;
    margin-bottom:-100px;
} 
```

至

```
#cover-wrap {
    margin-top:-100px;
} 
```

[http://jsfiddle.net/8kvwC/3/](http://jsfiddle.net/8kvwC/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T04:46:38.050

you can use that answer if u want the space for the bottom means you have to add

```
 div{
         float:left;
        margin-bottom:100px;
         } 
```

# javascript - 用于隐藏多个元素的 Cookie

> ID：15916291
> 
> 赞同：0
> 
> 时间：2013-04-10T03:14:18.347
> 
> 标签：javascript, jquery, cookies, uniqueidentifier

我试图隐藏随机的多个元素，所以我所做的就是给每个元素一个唯一的 ID。

```
$(function() {
  var left= $('#left'),
      right = $('#right'),
      heads = $('.maintitle'),
      i,
      leftHead = $(left).find(heads),
      rightHead = $(right).find(heads);
        $(leftHead).prepend('<div class="close"></div>');
        $(rightHead).prepend('<div class="close"></div>');
      var close = $('.close'),
      Lnumber = $('#left .module'),
      Rnumber =$('#right .module');
          for (i=0;i<Lnumber.length;i++) {
               $(Lnumber)[i].id='widg'+i; 
               }
       close.click(function() {
            var id = $(this).parent().parent().attr('id');
            $(this).parent().parent().slideUp().addClass('hidden');
            SetCookie('hidden'+id,"true",100);
            });
      var cookieId = $('#left .module');
           for (i=0;i<cookieId.length;i++) {
             var newArray = [cookieId[i].id];
           if (ReadCookie(newArray) == 'true') {
               var cName = newArray.replace('hidden','');
               alert(cName);
              }
            }  
        }); 
```

正如您在 ReadCookie 函数中看到的那样，我让它提醒隐藏的 ID，尽管这也不起作用。我是 Cookies 的新手，只是很难让它正常工作。

以下是 cookie 的功能...

```
function SetCookie(cookieName,cookieValue,nDays) {
var today = new Date();
var expire = new Date();
if (nDays==null || nDays==0) nDays=1;
expire.setTime(today.getTime() + 3600000*24*nDays);
document.cookie = cookieName+"="+escape(cookieValue)
    + ";expires="+expire.toGMTString(),';path = /';
 }

function KillCookie(cookieName) {
    SetCookie(cookieName,"", - 1);
 }

function ReadCookie(cookieName) {
  var theCookie=""+document.cookie;
  var ind=theCookie.indexOf(cookieName+"=");
  if (ind==-1 || cookieName=="") return "";
  var ind1=theCookie.indexOf(";",ind);
  if (ind1==-1) ind1=theCookie.length; 
  return unescape(theCookie.substring(ind+cookieName.length+1,ind1));
  } 
```

如果有人看到任何其他方法可以做到这一点，只需获取特定的 ID 以确保它们在单击和更改页面时保持隐藏状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:26:53.683

你试过 jQuery Cookie 插件吗？

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

然后创建过期 cookie，在整个站点中有效：

```
$.cookie('the_cookie', 'the_value', { expires: 7, path: '/' }); 
```

然后读取cookie：

```
$.cookie('the_cookie'); // => "the_value" 
```

# php - Mysql JoinInner 如果不为空

> ID：15916300
> 
> 赞同：0
> 
> 时间：2013-04-10T03:15:05.860
> 
> 标签：php, mysql, zend-framework

嗨，我有以下查询，它使用 joininner 语句来获取所有可能的业务。但是，当第一次创建业务时，只会更新 1 个类别，其余 2 个将保持为空

```
public function searchBusinessByCategoryString($str = null, $city=null,$start,$perpage)
    {
$select = $this->getDbTable()->getAdapter()->select();
        $select->from('business as b', array('b.business_name','b.business_url','b.reviews_num','b.cat_id','b.business_id','b.rating','b.business_phone','b.business_add1','b.business_add2','b.x','b.y','b.photo_url'))
               ->joinInner('business_category as bc','b.cat_id = bc.cat_id',array('bc.cat_name'))
               ->joinInner('business_sub_category as bsc','b.sub_cat_id = bsc.b_sub_cat_id',array('bsc.b_subcat_name','bsc.b_sub_cat_id'))
               ->joinInner('business_sub_category as bsc2','b.sub_cat2_id = bsc2.b_sub_cat_id',array('bsc2.b_subcat_name','bsc2.b_sub_cat_id'))
               ->joinInner('business_sub_category as bsc3','b.sub_cat3_id = bsc3.b_sub_cat_id',array('bsc3.b_subcat_name','bsc3.b_sub_cat_id'))
               ->where("bsc.b_subcat_name like '".$str."%'")
                   ->orWhere("bsc.b_subcat_name like '%".$str."'")                   
                   ->orWhere("bsc.b_subcat_name= '".$str."'")
                   ->orWhere("bsc2.b_subcat_name like '%".$str."'")                   
                   ->orWhere("bsc2.b_subcat_name = '".$str."'")
                   ->orWhere("bsc2.b_subcat_name like '".$str."%'")
                   ->orWhere("bsc3.b_subcat_name like '%".$str."'")                   
                   ->orWhere("bsc3.b_subcat_name = '".$str."'")
                   ->orWhere("bsc3.b_subcat_name like '".$str."%'"); 
$result = $this->getDbTable()->getAdapter()->fetchAll($select);
        return $result;
    } 
```

现在的问题是，如果其余 2 个类别为空，我怎么能不进行 joininner 查询？尽管有一个类别的企业，但我的上述语句返回空结果事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:42:51.363

使用`leftJoin`而不是`innerJoin`连接表可以包含 NULL 值的地方。`INNER JOIN`将使用条件连接表，并且当在连接表上找到空值时不会保留行。`LEFT JOIN`将允许你保持这条线

# asp.net-mvc - MVC 4 - 在哪里保留业务逻辑

> ID：15916306
> 
> 赞同：0
> 
> 时间：2013-04-10T03:16:12.707
> 
> 标签：asp.net-mvc

我第一次尝试实现 MVC。我也读过很多博客和一本专业的 mvc 书。现在当我实现它时，我无法弄清楚我的一些业务逻辑应该放在哪里

我有使用 Linq to SQL 定义的域模型。我了解存储库模式用于向模型添加持久性。但是我无法决定将实际业务逻辑放在哪里。例如，有一个特定的模型需要在保存之前检查是否有重复项。还有一些其他逻辑决定这个模型是否有资格被保存。你把这样的逻辑放在哪里？我应该把它放在存储库中吗？或者我应该在存储库之上插入一个业务层。

所以它看起来像

控制器 -> 业务逻辑 -> 存储库 -> DL

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T04:12:14.210

如果项目不是太大我一般把业务逻辑放到主项目中的一个单独的项目中。如果您已经设置了它，您可以将它移动到存储库，或者您可以将数据上下文传递给助手以删除冗余并允许助手简单地查找某些情况并报告真或假响应。

如果项目非常大，我通常会将数据移动到自己的项目中，并引入数据访问层，例如 repo 或类似的，以允许客户端无需显式调用数据即可获取数据。

# php - 回显 JavaScript 并使用 PHP 变量

> ID：15916307
> 
> 赞同：-1
> 
> 时间：2013-04-10T03:16:24.490
> 
> 标签：php, javascript

我想要做的是`echo`一些 JavaScript 并在我回显的 JavaScript 代码中使用 PHP 变量。

这是我到目前为止所尝试的。

```
echo "<script>document.getElementById('1').innerHTML = $output;</script>";
echo "<script>document.getElementById('1').innerHTML = '$output';</script>";
echo "<script>document.getElementById('1').innerHTML = ".$output.";</script>";
echo "<script>document.getElementById('1').innerHTML = '.$output.';</script>";
echo '<script>document.getElementById("1").innerHTML = "$output";</script>';
echo "<script>document.getElementById('1').innerHTML =".'$output'.";</script>"; 
```

我没有想法，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:25:10.390

简单，只是（ab）使用`json_encode()`；它也适用于字符串：

```
?>
<script>
document.getElementById('1').innerHTML = <?php echo json_encode($output); ?>;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:21:54.273

```
echo "<script>document.getElementById('1').innerHTML = '".$output."'</script>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:24:53.107

```
<script>
document.getElementById('1').innerHTML = "<?php echo $output ?>";
</script> 
```

# android - 说明 资源路径 位置 类型 构造函数 SQLiteAdapter(new BroadcastReceiver(){}) 未定义

> ID：15916309
> 
> 赞同：0
> 
> 时间：2013-04-10T03:16:34.067
> 
> 标签：android, sqlite

我在 SMSReceiverActivity 类中收到错误“描述资源路径位置类型构造函数 SQLiteAdapter(new BroadcastReceiver(){}) 未定义”。

有错误的行是`mySQLiteAdapter = new SQLiteAdapter(this);`

这是完整的代码：

```
package com.example.smsTest;

import java.util.ArrayList;
import android.database.Cursor;
import android.widget.SimpleCursorAdapter;
import android.app.ListActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class SMSReceiverActivity extends ListActivity {
    private SQLiteAdapter mySQLiteAdapter;

    private ArrayList<String> bodyarr = new ArrayList<String>();
    private ArrayAdapter<String> arrayAdpt;

    private BroadcastReceiver mIntentReceiver;
    ListView listview;
    //ArrayAdapter<String> arrayAdpt;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_smsreceiver);

        listview=this.getListView();
        arrayAdpt = new ArrayAdapter<String>(SMSReceiverActivity.this, android.R.layout.simple_list_item_1,
        bodyarr);

        listview.setAdapter(arrayAdpt);
    }

    @Override
    protected void onResume() {
        super.onResume();

        IntentFilter intentFilter = new IntentFilter("SmsMessage.intent.MAIN");
        mIntentReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String msg = intent.getStringExtra("get_msg");

                //Process the sms format and extract body &amp; phoneNumber
                msg = msg.replace("\n", "");
                String body = msg.substring(msg.lastIndexOf(":")+1, msg.length());
                String pNumber = msg.substring(0,msg.lastIndexOf(":"));

                bodyarr.add(body);

                arrayAdpt.notifyDataSetChanged();

                /*
                 *  Create/Open a SQLite database
                 *  and fill with dummy content
                 *  and close it
                 */
                mySQLiteAdapter = new SQLiteAdapter(this);
                mySQLiteAdapter.openToWrite();
                mySQLiteAdapter.deleteAll();

                mySQLiteAdapter.insert(body);

                mySQLiteAdapter.close();
            }
    };

    this.registerReceiver(mIntentReceiver, intentFilter);
    }

    @Override
    protected void onPause() {
        super.onPause();
        this.unregisterReceiver(this.mIntentReceiver);
    }

} 
```

这是我的 SQLiteAdapter 的代码：

```
package com.example.smsTest;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class SQLiteAdapter {

    public static final String MYDATABASE_NAME = "MY_DATABASE";
    public static final String MYDATABASE_TABLE = "MY_TABLE";
    public static final int MYDATABASE_VERSION = 1;
    public static final String KEY_ID = "_id";
    public static final String KEY_CONTENT = "Content";

    //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
    "create table " + MYDATABASE_TABLE + " ("
    + KEY_ID + " integer primary key autoincrement, "
    + KEY_CONTENT + " text not null);";

    private SQLiteHelper sqLiteHelper;
    private SQLiteDatabase sqLiteDatabase;

    private Context context;

    public SQLiteAdapter(Context c){
        context = c;
    }

    public SQLiteAdapter openToRead() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        return this;
    }

    public SQLiteAdapter openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        sqLiteHelper.close();
    }

    public long insert(String content){

        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT, content);
        return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
    }

    public int deleteAll(){
        return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
    }

    public Cursor queueAll(){
        String[] columns = new String[]{KEY_ID, KEY_CONTENT};
        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
        null, null, null, null, null);

        return cursor;
    }

    public class SQLiteHelper extends SQLiteOpenHelper {

        public SQLiteHelper(Context context, String name,
        CursorFactory factory, int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(SCRIPT_CREATE_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

        }

    }

} 
```

更新：

我认为这里需要 SmsReceiver 类：

这里是：

```
package com.example.smsTest;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {

       Bundle extras = intent.getExtras();
       if (extras == null)
       return;

       Object[] pdus = (Object[]) extras.get("pdus");
       for (int i = 0; i < pdus.length; i++) {
          SmsMessage SMessage = SmsMessage.createFromPdu((byte[]) pdus[i]);
          String sender = SMessage.getOriginatingAddress();
          String body = SMessage.getMessageBody().toString();

         // A custom Intent that will used as another Broadcast
         Intent in = new Intent("SmsMessage.intent.MAIN").
         putExtra("get_msg", sender+":"+body);

         // To display a Toast whenever there is an SMS.
         Toast.makeText(context,body,Toast.LENGTH_LONG).show();

         //You can place your check conditions here(on the SMS or the sender)            
         //and then send another broadcast 
         context.sendBroadcast(in);

         /*Intent act = new Intent(context, NewActivity.class);
         act.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         act.putExtra("message", body);
         act.putExtra("sender", sender);
         context.startActivity(act);*/

        // This is used to abort the broadcast and can be used to silently
        // process incoming message and prevent it from further being 
        // broadcasted. Avoid this, as this is not the way to program an app.
        this.abortBroadcast();
        }
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:27:37.413

```
mySQLiteAdapter = new SQLiteAdapter(this); 
```

在上面的语句中，`this`指的是你的匿名内部类的实例`BroadcastReceiver`。为了将封装引用`Activity`为`Context`参数，请使用以下内容：

```
mySQLiteAdapter = new SQLiteAdapter(SMSReceiverActivity.this); 
```

# php - 为什么这个 if else 条件不能正常工作？

> ID：15916311
> 
> 赞同：0
> 
> 时间：2013-04-10T03:17:13.837
> 
> 标签：php, mysql, if-statement

我正在使用带有 foreach 循环的 if else 条件来检查和插入新标签。

但无论 mysql 找到的 id 是否等于或不等于 foreach 发布的 ID，都同时应用了两个条件（if 和 alse）。请帮忙

```
$new_tags = $_POST['new_tags'];   //forget the mysl security for the time being   

foreach ($new_tags as $fnew_tags)
{
    $sqlq = mysqli_query($db3->connection, "select * from  o4_tags limit 1");
    while($rowq = mysqli_fetch_array($sqlq)) {
        $id = $rowq['id'];

        if($id == $fnew_tags) {    //if  ID  of the tag is matched then do not insert  the new tags but only add the user refrence to that  ID
            mysqli_query($db3->connection, "insert into user_interests(uid,tag_name,exp_tags) values('$session->userid','$fnew_tags','1')");
        } 
        else 
        {   //if  ID  of the tag is not  matched then  insert  the new tags as well as  add the user refrence to that  ID
            $r = mysqli_query($db3->connection, "insert into o4_tags(tag_name,ug_tags,exp_tags) values('$fnew_tags','1','1')");
            $mid_ne = mysqli_insert_id($db3->connection);
            mysqli_query($db3->connection, "insert into user_interests(uid,tag_name,exp_tags) values('$session->userid','$mid_ne','1')");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:22:19.527

我想你在插入

```
 $r = mysqli_query($db3->connection, "insert into o4_tags(tag_name,ug_tags,exp_tags)
 values('$fnew_tags','1','1')");$mid_ne = mysqli_insert_id($db3->connection); 
```

然后你正在使用 `while($rowq = mysqli_fetch_array($sqlq))`

现在有你刚刚插入的记录，因此你的 if 被执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:42:26.293

我很确定`select`下面的查询将始终返回相同的记录。

```
$sqlq = mysqli_query($db3->connection, "select * from  o4_tags limit 1"); 
```

我认为大多数时候它会`else`执行 2 插入。你不应该像下面这样写查询吗？

```
select * from  o4_tags where id = $fnew_tags limit 1 
```

# c# - 如何使用 Orchard CMS 实现这种简单灵活的页面布局

> ID：15916318
> 
> 赞同：0
> 
> 时间：2013-04-10T03:18:35.233
> 
> 标签：c#, asp.net, .net, layout, orchardcms

我是 Orchard 的新手，正在努力确定如何最好地设置下面的基本页面布局（为了清楚起见，从基于[Contoso 主题](https://gallery.orchardproject.net/List/Themes/Orchard.Theme.Contoso "Contoso 主题")的实际布局中进行了简化）：

![在此处输入图像描述](https://i.stack.imgur.com/VKabR.png)

我正在努力解决的问题是正确的内容区域 - 如上面的红色虚线框所示。该区域的内容会因各个页面而异。有时它会是空的，在这种情况下，纯红色内容应该扩展以填充内容区域。对于内容，它通常包含 1 或 2 个链接列表 - 特定于页面。

我尝试将 HTML 文本字段添加到页面内容类型，但是如何定位它？在内容模板中（例如来自 contoso 主题 ~/Themes/Contoso/Views/Content.cshtml），我们可以定位 Model.Content，但不能定位单个字段。

或者，如果我在布局的右侧添加另一个区域，是否可以将页面字段放置在内容区域之外的其他区域中？我在 Placement.info 中尝试了这个作为测试：

`<Place Fields_Common_Text="ContentAside"/>`

但它没有出现在内容旁区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:27:44.607

试试`<Place Fields_Common_Text="/ContentAside:1"/>`吧。

# php - 将内容从 html 表存储到 mysql 数据库

> ID：15916319
> 
> 赞同：2
> 
> 时间：2013-04-10T03:18:37.867
> 
> 标签：php, mysql

我要做的就是将用户输入的值存储到数据库中。有一个表，它有许多文本框，用户可以在其中输入他的输入。单击提交按钮后，值应该存储在 mysql 表中。我现在遇到了一些错误。我对 php 完全陌生，下面我附上了代码和屏幕截图。

```
//workingcode.php
<?php
$con = mysql_connect("localhost","tom","");
if (!$con) {
die('Could not connect: ' . mysql_error());
}
//select Database

mysql_select_db("sms", $con);

$result = mysql_query("SELECT * FROM dept_info", $con) or die(mysql_error());

echo "<table border='1'>";
echo '<tr> <th>Sl No</th> <th>USN</th> <th>Name</th><th>code1</th><th>code 2</th> <th>code 3</th> <th>code 4</th> <th>code 5</th> 
                <th>code 6</th> <th>code 7</th> <th>code 8</th></tr>';

while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row into a table
    echo "<tr><td>";
    echo $row['id'];
    echo "</td><td>";
    echo $row['usn'];
    echo "</td><td>";
    echo $row['name'];
    echo "</td>";
    for ($i=1; $i <= 8; $i++) {
        echo "<td> <input type='text' name='sl[{$row['usn']}][$i]' size='2' /> </td>" ;
    }
    echo '</tr>';
}

echo '
<form action = "insert.php" method = "post">
<div align="bottom">
<input type = "submit" align = "BOTTOM" value = "Proceed">
</div>
</form>
';
?> 
```

我已将其链接到 insert.php 文件，如下所示..

```
 <html>
<head>
<title>Marks Entry Results</title>
</head>
<body>
<h1>Student Marks Entry Results</h1>

    <?php

        $insertData = array();
foreach ($_POST['sl'] as $usn => $codes) {
    foreach ($codes as $sl) {
        $insertData[] = sprintf("('%s', %d)", mysqli_real_escape_string($usn), intval($sl));
    }
}
$con = mysql_connect("localhost","tom","");
if (!$con) {
die('Could not connect: ' . mysql_error());
}
//select Database

mysql_select_db("sms", $con);

$query = "INSERT INTO mytable (usn, code1) VALUES\n" . join(",\n", $insertData);
$result = mysql_query($query);
if ($result) {
echo mysql_affected_rows()." Marks inserted into database.";
} else {
echo "An error has occurred. Not added.";
}
mysql_close();
?>
</body>
</html>
//The description of the table which i made for this is
/*mysql> desc mytable;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| usn   | varchar(50) | NO   | PRI | NULL    |       |
| code1 | int(2)      | YES  |     | NULL    |       |
| code2 | int(2)      | YES  |     | NULL    |       |
| code3 | int(2)      | YES  |     | NULL    |       |
| code4 | int(2)      | YES  |     | NULL    |       |
| code5 | int(2)      | YES  |     | NULL    |       |
| code6 | int(2)      | YES  |     | NULL    |       |
| code7 | int(2)      | YES  |     | NULL    |       |
| code8 | int(2)      | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
9 rows in set (0.01 sec)
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:09:41.200

文本框不在任何表单标签内，因此当您点击提交时，文本框的值不会回传到服务器......请尝试以下操作。

```
echo '<form action = "insert.php" method = "post">';
while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row into a table
    echo "<tr><td>";
    echo $row['id'];
    echo "</td><td>";
    echo $row['usn'];
    echo "</td><td>";
    echo $row['name'];
    echo "</td>";
    for ($i=1; $i <= 8; $i++) {
        echo "<td> <input type='text' name='sl[{$row['usn']}][$i]' size='2' /> </td>" ;
    }
    echo '</tr>';
}

echo '
<div align="bottom">
<input type = "submit" align = "BOTTOM" value = "Proceed">
</div>
</form>';

  //insert.php

<?php

    $insertData = array();
    foreach ($_POST['sl'] as $usn => $codes) {
        foreach ($codes as $sl) {
            $insertData[] = sprintf("('%s', %d)", mysqli_real_escape_string($usn), intval($sl));
        }
    }

    $con = mysql_connect("localhost","tom","");
    if (!$con) {
       die('Could not connect: ' . mysql_error());
    }
    //select Database

    mysql_select_db("sms", $con);

    $query = "INSERT INTO mytable (usn, code1) VALUES\n" . join(",\n", $insertData);
    $result = mysql_query($query);
    if ($result) {
       echo mysql_affected_rows()." Marks inserted into database.";
    } else {
    echo "An error has occurred. Not added.";
    }
    mysql_close();
    ?> 
```

# python - Blender 是用什么创建的？

> ID：15916324
> 
> 赞同：12
> 
> 时间：2013-04-10T03:19:29.983
> 
> 标签：python, opengl, blender, cad

Blender 使用 OpenGl 还是 DirectX？还是一切都是从头开始的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T03:48:09.553

您可以查看[搅拌机源代码](http://www.blender.org/download/source-code/)，发现它是用 python 和 C/C++ 编写的——更少的 python，更多的 C。代码中经常引用 OpenGL，而 DirectX 很少。所以你去。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T11:04:51.907

> Blender 使用 OpenGl 还是 DirectX？

Blender 的所有图形输出都是使用 OpenGL 完成的。

> **还是**它使用编程语言（python？）从头开始做所有事情？

为什么是“或”？API 不能替代编程语言。Blender 已经用 C、C++ 和 Python 编程。OpenGL 用于在屏幕上渲染所有内容，包括用户界面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T21:40:05.937

扩展 datenwolf 所说的内容。大多数的 Blender 是用 C 编写的，游戏引擎是用 C++ 编写的，整个应用程序都有 Python 绑定*（这意味着您可以在应用程序中使用 python）*。Blender 使用 OpenGL 并有一个特殊的引擎*（由 opengl 调用和功能组成，主要是遗留但推动使用现代的东西，vbos 等）*，用于绘制界面并为其 3d 功能提供称为[GHOST](http://projects.blender.org/docman/view.php/13/4/ghost_doc.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T07:57:25.690

对于这样的问题，我发现[ohloh](http://www.ohloh.net)很有用。它是一个生成开源项目统计数据的网站。其中一项统计数据是项目中使用的不同编程语言的列表。您可以在[此处](https://www.ohloh.net/p/blender/analyses/latest/languages_summary)查看 Blender 的统计信息。 [ohloh](http://www.ohloh.net)对于识别项目使用的工具和/或与类似项目进行比较也很有用。

# c# - Windows Phone BackgroundAudioPlayer：加载在源上具有 301 重定向的曲目

> ID：15916325
> 
> 赞同：0
> 
> 时间：2013-04-10T03:19:36.003
> 
> 标签：c#, redirect, windows-phone, background-audio

我为 windows phone 创建了一个音频播放器，它使用从外部 API 收集的歌曲播放列表。

此播放列表同时保存到客户端应用程序和后台音频播放器，以便在歌曲结束后即使应用程序未运行，它也可以继续播放下一首曲目。

但是，此 API 返回带有 url 的源轨道，这些 url 是要流式传输的文件的实际 REDIRECTS。

如果我尝试将这些直接加载到后台音频播放器中，则会出现异常。

我试图通过允许客户端应用程序执行重定向并在将结果 url 传递给播放器之前捕获结果 url 并更新客户端和应用程序上的播放列表来解决此问题。

这工作得很好。

但是，如果我随后离开我的应用程序，后台音频代理会继续播放，这意味着更新客户端上的 url 的机制不会触发，并且原始重定向 url 正在加载，导致应用程序崩溃。

我试图在后台音频代理上做同样的事情（发出 HEAD 请求并从响应中获取结果 uri），但我无法让它工作；它永远不会从网络请求返回！

这是我想要完成的要点：

```
 try
    {
        var req = WebRequest.Create(src) as HttpWebRequest;
        req.Method = "HEAD";
        req.BeginGetResponse(ar =>
        {
            try
            {
                var response = req.EndGetResponse(ar);
                var uri = response.ResponseUri;
                selectedTrack.BeginEdit();
                selectedTrack.Source = uri;
                selectedTrack.EndEdit();
                player.Track = selectedTrack;
                player.Play();
            }
            catch (Exception ex)
            {

            }
        }, req);
    }
    catch (Exception ex)
    {

    } 
```

但是里面的回调永远不会执行，程序只是停止，直到我杀死它。

我确信必须有更好的方法来处理这个问题，但我发现关于这个问题的文档为零。其他人到底是如何处理这个问题的？

我虽然关于在客户端上触发一个计时器来解析列表并发出请求并即时更新整个内容，但这意味着每次应用程序启动时都会依次执行 100 个请求（因为它每次都会获得新的轨道时间），所以这似乎不是一个有效的解决方案......

有人在这里有什么想法吗？他们将不胜感激！

# java - 如何使用键盘按钮将多个数字打印到标签上

> ID：15916328
> 
> 赞同：0
> 
> 时间：2013-04-10T03:19:49.327
> 
> 标签：java, swing, jbutton, jlabel

您好，这真的很长，对不起，我的代码可以工作，但是如何只需按下按钮就可以在标签上打印多个数字。我的代码不完整，但我只想朝着正确的方向前进。感谢您提供的任何帮助。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;
import java.awt.event.*;

public class NumericKeyPadPanel extends JPanel {

    private JButton b1, b2, b3, b4, b5, b6, b7, b8, b9, b10, b11, b12, clear;
    private JLabel label1;
    private JPanel primary, panel2, panel3, panel4;

    public NumericKeyPadPanel() {
        label1 = new JLabel();
        primary = new JPanel();
        panel2 = new JPanel();
        panel3 = new JPanel();
        panel4 = new JPanel();
//Set up for the center grid
        panel2.setLayout(new GridLayout(4, 3));
        panel2.setBackground(Color.gray);
        panel2.setBorder(BorderFactory.createLineBorder(Color.black, 4));
//set up for the top box
        panel3.setBackground(Color.white);
        panel3.setBorder(BorderFactory.createEtchedBorder());
        panel3.add(label1);
//set up for the bottom
        panel4.setBackground(Color.gray);
//set up for the buttons for center and bottom
        ButtonListener listener1 = new ButtonListener();
        ButtonListener listener2 = new ButtonListener();
        ButtonListener listener3 = new ButtonListener();
        ButtonListener listener4 = new ButtonListener();
        ButtonListener listener5 = new ButtonListener();
        ButtonListener listener6 = new ButtonListener();
        ButtonListener listener7 = new ButtonListener();
        ButtonListener listener8 = new ButtonListener();
        ButtonListener listener9 = new ButtonListener();
        ButtonListener listener10 = new ButtonListener();
        ButtonListener listener11 = new ButtonListener();
        ButtonListener listener12 = new ButtonListener();
        ButtonListener listener13 = new ButtonListener();

        b1 = new JButton("1");
        b1.addActionListener(listener1);

        b2 = new JButton("2");
        b2.addActionListener(listener2);

        b3 = new JButton("3");
        b3.addActionListener(listener3);

        b4 = new JButton("4");
        b4.addActionListener(listener4);

        b5 = new JButton("5");
        b5.addActionListener(listener5);

        b6 = new JButton("6");
        b6.addActionListener(listener6);

        b7 = new JButton("7");
        b7.addActionListener(listener7);

        b8 = new JButton("8");
        b8.addActionListener(listener8);

        b9 = new JButton("9");
        b9.addActionListener(listener9);

        b10 = new JButton("*");
        b10.addActionListener(listener10);

        b11 = new JButton("0");
        b11.addActionListener(listener11);

        b12 = new JButton("#");
        b12.addActionListener(listener12);

        clear = new JButton("Clear");
        clear.addActionListener(listener13);

        panel2.add(b1);
        panel2.add(b2);
        panel2.add(b3);
        panel2.add(b4);
        panel2.add(b5);
        panel2.add(b6);
        panel2.add(b7);
        panel2.add(b8);
        panel2.add(b9);
        panel2.add(b10);
        panel2.add(b11);
        panel2.add(b12);
        panel4.add(clear);
//set up for main panel
        primary.setLayout(new BorderLayout());
        primary.setBackground(Color.gray);

        primary.add(panel2, BorderLayout.CENTER);
        primary.add(panel3, BorderLayout.NORTH);
        primary.add(panel4, BorderLayout.SOUTH);
        add(primary);
    }
    // this is the listener

    private class ButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent event) {
            if (event.getSource() == b1) {
                label1.setText("1");
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:21:47.867

将要在标签上打印的文本存储在单独的实例变量（字符串）中。每次按下按钮时，将数字附加到此文本并将其设置在标签上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:33:25.553

只需将结果附加到标签已包含的内容

```
label.setText(label.getText() + "1"); 
```

# html - 选择 li 之一时，如何更改 li 之前或之后的 CSS？

> ID：15916331
> 
> 赞同：1
> 
> 时间：2013-04-10T03:20:06.350
> 
> 标签：html, css, html-lists

```
<li><span class="item-label">1</span><li>
<li><span class="item-label">2</span><li>
<li class="selected"><span class="item-label">3</span><li>
<li><span class="item-label">4</span><li>
<li><span class="item-label">5</span><li> 
```

大家好

I want to ask how I can change CSS for before or after of li when one of li is selected.

例如，如果我选择 3，我需要更改 2 和 4 的 CSS。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:26:46.497

您可以使用第 n 个孩子。

前任 ：

li:nth-child(3):hover li:nth-child(2), li:nth-child(4) {

红色;

}

那是纯css，你的意思是用jquery选择，你基本上可以做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:32:13.277

使用 CSS，我相信您可以通过 .select + li 选择下一个列表项，但我不知道仅使用 CSS 选择上一个列表项的好方法。

我会用 mooTools 来完成这个...

document.getElement('.select + li').setStyles({border: '1px solid #000' });

document.getElement('.select !+ li').setStyles({border: '1px solid #000' });

这将为您的 .select 类周围的上一个和下一个列表项设置样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:28:22.853

你可以尝试这样的事情：

```
$('#menu li').click(function() 
{
    $(this).siblings('li').removeClass('active');
    $(this).addClass('active');
}); 
```

现在您创建一个样式，例如：

```
#menu .active
{
    background:rgba(0,0,0,0.2);
    font-size:12px;
} 
```

使用此方法，只有单击的`li`链接才会`class:active`与样式链接，并且`class:active`将从其他`li`链接中删除。

这是一个工作演示：[更改活动类](http://jsfiddle.net/xTWqT/2/)。

希望这可以帮助 ：）

# c# - C# 对象类型 - 对象引用未设置为对象的实例

> ID：15916334
> 
> 赞同：1
> 
> 时间：2013-04-10T03:20:20.757
> 
> 标签：c#, arrays, object

我正在编写一个调用一些 erp 类/函数的程序（erp 已经过时并且没有任何可用的支持）。我在定义“对象”时遇到了麻烦，希望能在这方面提供一些帮助。提前致谢

我有一堂课`typeUDDBTble`（定义如下）。

我的编码是。

```
typeUDDBTbl UDDB = new typeUDDBTbl();
UDDB.name = "xxxx";
UDDB.Rec = new typeRec[1];
// Edited, incorrect code
// UDDB[0].Items = new typeFld[1];
UDDB.Rec[0].Items = new typeFld[1]; 
```

Items 是一个对象数组。我尝试使用`new Object[1]`, 或其他`type(typeFld)`, 但都得到了

> 你调用的对象是空的

知道如何解决这个问题吗？

定义：

```
public partial class typeUDDBTbl : object, System.ComponentModel.INotifyPropertyChanged
{
    private typeRec[] recField;
    private string nameField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Rec", Order = 0)]
    public typeRec[] Rec
    {
        get
        {
            return this.recField;
        }
        set
        {
            this.recField = value;
            this.RaisePropertyChanged("Rec");
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute(DataType = "token")]
    public string name
    {
        get
        {
            return this.nameField;
        }
        set
        {
            this.nameField = value;
            this.RaisePropertyChanged("name");
        }
    }

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName)
    {
        System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
        if ((propertyChanged != null))
        {
            propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
}

public partial class typeRec : object, System.ComponentModel.INotifyPropertyChanged
{

    private object[] itemsField;

    private string dummyField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Fld", typeof(typeFld), Order = 0)]
    [System.Xml.Serialization.XmlElementAttribute("LangFld", typeof(typeLangFld), Order = 0)]
    public object[] Items
    {
        get
        {
            return this.itemsField;
        }
        set
        {
            this.itemsField = value;
            this.RaisePropertyChanged("Items");
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute(DataType = "token")]
    public string dummy
    {
        get
        {
            return this.dummyField;
        }
        set
        {
            this.dummyField = value;
            this.RaisePropertyChanged("dummy");
        }
    }

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName)
    {
        System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
        if ((propertyChanged != null))
        {
            propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
}

public partial class typeFld : object, System.ComponentModel.INotifyPropertyChanged
{

    private string nameField;

    private string valueField;

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute(DataType = "token")]
    public string name
    {
        get
        {
            return this.nameField;
        }
        set
        {
            this.nameField = value;
            this.RaisePropertyChanged("name");
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlTextAttribute()]
    public string Value
    {
        get
        {
            return this.valueField;
        }
        set
        {
            this.valueField = value;
            this.RaisePropertyChanged("Value");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:27:53.100

这是不正确的：

```
UDDB[0].Items = new typeFld[1]; 
```

`UDDB`是 类型`typeUDDBTbl`，它没有索引器方法。

它似乎也没有名为 的属性`Items`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:28:21.293

您的 typeUDBTble 不包含索引器，因此您尝试使用方括号访问其对象是无效的。

我想你的意思是：

```
UDDB.Rec[0].Items = ... 
```

`Rec`此外，除非您想要另一个异常，否则您必须初始化第一个单元格。

```
UDDB.Rec[0] = new typeRec();
UDDB.Rec[0].Items = new object[1] 
```

# servlets - Servlet 的 RequestDispatcher.forward() 方法不起作用

> ID：15916335
> 
> 赞同：0
> 
> 时间：2013-04-10T03:20:22.837
> 
> 标签：servlets, java-ee-6, requestdispatcher

我有一个使用 HttpURLConnection 连接到 servlet 的 Java 应用程序。应用程序在连接到 url 时将它想要传递给 servlet 的参数嵌入到 url 中。因此 servlet 可以使用它的 doGet() 访问和处理这些参数。我已经完成了这部分（我可以访问参数并在 servlet 中显示它们）。

接下来我要做的是将这些参数从 servlet 传递到 JSP。我是`request.setAttribute()`用来做的。但即使在 之后`RequestDispatcherObj.forward(request, response)`，JSP 也不会打开。我什至试过了`response.sendRedirect(url)`。

但是，如果我独立运行 servlet，则上述方法（forward() 和 sendRedirect()）都可以正常工作，并且 JSP 页面会打开。

我想知道我做错了什么。

在此先感谢您的帮助。

代码：

Java 应用程序

```
serverAddress = new URL("http://localhost:8080/WebApp/ServletPath"+"?message1"+"="+message);
(HttpURLConnection)serverAddress.openConnection();
connection.setRequestMethod("GET");
connection.setRequestProperty("Accept-Charset", charset);
connection.setReadTimeout(10000);
connection.connect(); 
```

小服务程序

```
message = request.getParameter("message1");//working
request.setAttribute("message1", message);//to be read in the jsp
url="/index.jsp";
RequestDispatcher dispatcher=getServletContext().getRequestDispatcher(url);
dispatcher.forward(request, response);//Works when servlet is run independently but not when the servlet is called from the App 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:16:52.730

`HttpURLConnection`不用于更改浏览器连接和显示的内容。它用于在 Java 应用程序本身中创建 HTTP 连接。

当 Java 程序连接到 URL 并读取响应时，浏览器不知道它，也不会神奇地显示任何内容。通过连接到 Java 应用程序中的 URL，您可以执行与浏览器相同的操作，但在您自己的程序中。因此，您可能会读取来自连接的响应，并显示 webapp 发送的内容。

# c++ - c++ 多重查找器

> ID：15916336
> 
> 赞同：-6
> 
> 时间：2013-04-10T03:20:23.803
> 
> 标签：c++

我试图使用循环查找数组的倍数

```
 int array[11] = {1,2,3,4,5,6,7,8,9,10,11};

  int size=11;

for(int i=0;i > size;i++)
{
 if (i%2==!0)
cout << array[i];
} 
```

为什么这行不通

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:24:11.913

我想你可能想改变（有点……不寻常）：

```
if (i%2==!0) 
```

进入：

```
if (i % 2 == 0) 
```

此外，您的循环终止条件使得循环永远不会执行。尝试：

```
for (int i = 0; i < size; i++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:25:46.640

//先声明num。

//如果条件更正..

//在for循环中正确的条件检查

```
int array[11] = {1,2,3,4,5,6,7,8,9,10,11};
  int index=2;
  int size=11;
int num = 5;

for(int i=0;i < size;i++)
{
 if (i%num==0)
cout << array[i];
} 
```

# web-services - Spring MVC 如何成为 REST 框架？

> ID：15916339
> 
> 赞同：9
> 
> 时间：2013-04-10T03:20:28.367
> 
> 标签：web-services, rest, spring-mvc

我见过很多所谓的 Spring REST 示例，它们基本上都是 Spring MVC。当然，使用 JAXB 和 JAXON 您可以提供 XML 和 JSON 响应，但 REST 不仅仅是提供文本响应。

一个主要问题是这些示例都没有提到任何有关会话的内容。REST 应用程序应该是无会话的，但 Spring MVC 肯定是会话满的。

那么，Spring MVC 是否会以某种方式禁用会话，或者我们应该在使用 Spring MVC 实现 REST 时禁用会话？

如果我们应该禁用会话；那它是怎么做的呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T10:22:55.470

*   Spring MVC 在您使用它们之前不会启用会话；

*   我完全同意 Spring 中所谓的“rest support”应该被称为“pretty urls 和 Jackson 集成”，但现在它几乎没有市场吸引力（尽管漂亮的 URL 和 JSON 是人们与 REST 相关联的唯一东西；并将 CRUD 映射到 http 动词）。

*   REST 是一种与会话无关的架构选择（也不是漂亮的 url，也不是 json）。由于它更像是一种宗教而不是一种实际的技术，因此没有人会为您将其转化为一套固定的实践。您可以将会话建模为在用户登录时创建并在一段时间后消失的资源。等等。

# javascript - 动态 iframe 高度在 chrome 中不起作用

> ID：15916342
> 
> 赞同：0
> 
> 时间：2013-04-10T03:20:32.267
> 
> 标签：javascript, iframe, dynamic, height

我在这里疯了。我在这里找到了一个脚本，据说它也可以在 chrome 上工作，但我就是无法让它工作

这是我标题中的脚本

```
<script type="text/javascript">
function resizeFrame() {
     var t=document.getElementById("Footer");
     var f = document.getElementById("mainContent");
     var y = f.contentWindow;
     t.innerHTML = y.document.body.offsetHeight;
     f.height = y.document.body.offsetHeight;
    }
</script> 
```

和 iframe

```
 <iframe onload="resizeFrame()" id="mainContent" src="swwbookpg1.php" scrolling=auto frameborder=0 
height="100%" width="100%">Working!</iframe>
<p id="Footer"> Footer</p> 
```

它适用于 Firefox 和 IE，但不适用于 chrome。

如果有人可以提供帮助，那就太棒了！

这里正在使用：[https ://www.whalewatchingsydney.com.au/payment_sww/](https://www.whalewatchingsydney.com.au/payment_sww/)

谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T21:17:47.863

谷歌似乎辜负了他们的标语“不作恶”。虽然 Chrome 能够动态调整 iframe 高度，但谷歌并没有让它变得很容易。经过两天的努力解决这个问题并尝试了大量的 JavaScript 片段，这些片段在所有其他浏览器中都能完美运行，但 Chrome 终于设法得到了一些可以工作的东西。我将分享这一点，希望能帮助其他网站开发人员免去我不得不经历的 48 小时痛苦。

在外部 SetiFrameHeight.js 文件中，然后可以将其添加到任何带有 html 的 iframe 子文档中。

```
<script type="text/javascript" src="SetiFrameHeigh.js"></script> 
```

setIframeHeight.js

```
window.onload=setIframeHeight(window.top.document.getElementById('iFrame_ID'));
//note this code only runs serverside when using Google Chrome, very helpful

function setIframeHeight(ifrm){
    var doc = ifrm.contentDocument? ifrm.contentDocument:
    ifrm.contentWindow.document;
    var RestHeight=ifrm.style.height; //Capture original height see why below.
    ifrm.style.visibility = "hidden";
    ifrm.style.height = "10px"; //Necessary to work properly in some browser eg IE
    var NewHeight = getDocHeight( doc ) + 10;
    if (NewHeight>20){
        ifrm.style.height=NewHeight + "px";
    } else { //if dom returns silly height value put back old height see above.
        ifrm.style.height=RestHeight + "px";
    }
    ifrm.style.visibility = "visible";
}

function getDocHeight(doc) {
    doc = doc || document;
    var body = doc.body, html = doc.documentElement;
    var height = Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight,
    html.scrollHeight, html.offsetHeight );
    return height;
} 
```

这段代码片段的真正魔力在于函数 getDocHeight，它基本上尝试了所有可能的 dom 组合并选择给出最大高度的组合。我不能把它归功于[http://www.christersvensson.com/html-tool/iframe.htm](http://www.christersvensson.com/html-tool/iframe.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T16:42:17.383

**铬**：

1.  我发现当我使用 document.createElement 创建一个 iFrame 并为其指定一个名称（“myIframe”）时，新的 iFrame 在我设置它的位置时不会加载内容。但是，如果我为元素的 src 分配一个 url，它就可以正常工作。现在，当我在 html 文本中手动插入 iframe 标记时（静态——而不是使用 document.createElement），它会在设置其位置（以及标记的 src）时加载文档。奇怪的。

2.  假设您打算直接显示 iframe 的内容，我想知道为什么？我喜欢使用 iframe，但实际上只是将内容动态加载到顶部窗口中的容器中。加载到 iframe 中的 html 的最后一部分包括一个脚本，该脚本将输出移动到顶部框架的所需位置。

通过 iFrame 加载新内容的 php 脚本示例。

```
// top Frame calls the php script like this:

 <div id="myContainerDiv">
    <p>old content - please replace me with fresh content</p>
</div>

<iframe name="hiddenFrame" style="display:none;"></iframe>

<script>

    hiddenFrame.location = 'index.php?getNewContent=125';

</script>

// the following script would be at the top of index.php

<?php //

if( isset($_GET['getNewContent']) ):

echo '<div id="myIframeHtml">';

    // the html that I want to load to the top frame..

echo '</div>';

?>
<script>

    newContent = document.getElementById('myIframeHtml').innerHTML; // from this iFrame

    topContainer = top.document.getElementById('myContainerDiv'); // in top frame

    topContainer.innerHTML = newContent; // no fuss-no muss --> no encoding or parsing

</script>

<?php

exit;

endif; 
```

# ruby-on-rails - 在 ruby on rails 项目中通过 opensrs api 创建电子邮件

> ID：15916344
> 
> 赞同：1
> 
> 时间：2013-04-10T03:20:43.087
> 
> 标签：ruby-on-rails, openssl, email

我正在开发一个 ruby​​ on rails 项目以在 ruby​​ 中使用 Opensrs Api 创建电子邮件。现在，我可以通过 openssl 在控制台登录中运行 opensrs 命令，以在每个域名下创建电子邮件。

但现在我坚持将代码集成到我的 Rails 项目中。似乎我可以登录 opensrs 服务器，但无法运行他们的命令来创建电子邮件。

任何人都知道如何使用 openssl 通过 ruby​​ 代码运行 opensrs 命令？

我正在使用的代码：

```
require 'socket'
require 'openssl'
p "1---------------"

tcp_client = TCPSocket.new 'admin.test.hostedemail.com', 4449

context = OpenSSL::SSL::SSLContext.new
ssl_client = OpenSSL::SSL::SSLSocket.new tcp_client, context

ssl_client.connect

ssl_client.write_nonblock "hello ========"
ssl_client.print "print hello ========"
ssl_client.write "write hello ========"

ssl_client.write_nonblock "ver ver='3.6'"
p ssl_client.readlines
p "2---------------" 
```

结果：

“1---------------”

“2---------------”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T02:51:35.633

我也遇到了这个问题，最后为它写了一个 gem：

[https://github.com/strikingly/opensrs-email](https://github.com/strikingly/opensrs-email)

我们已经在生产中使用了一段时间，它解决了我们的问题。

随意查看、分叉或发送拉取请求。

# postgresql - 将postgresql列从字符转换为整数

> ID：15916345
> 
> 赞同：3
> 
> 时间：2013-04-10T03:20:43.697
> 
> 标签：postgresql, alter-table, psql, alter-column

我正在尝试将列类型从“字符变化（15）”更改为整数。

如果我运行“=#SELECT columnX from tableY limit(10);” 我回来了：

```
columnX 
----------
34.00
12.00
7.75
18.50

4.00
11.25

18.00
16.50 
```

如果我运行“=#\d+ columnX”，我会回来：

```
 Column     |         Type          |                           Modifiers                           | Storage  | Description 

columnX       | character varying(15) | not null                                                      | extended | 
```

我搜索了高低，在 postgresql irc 频道上询问，但没有人知道如何更改它，我尝试过：

```
ALTER TABLE race_horserecord ALTER COLUMN win_odds TYPE integer USING (win_odds::integer); 
```

还：

```
ALTER TABLE tableY ALTER COLUMN columnX TYPE integer USING (trim("columnX")::integer); 
```

每次回来：

“错误：整数的无效输入语法：“34.00””

* * *

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T04:11:36.970

试试`USING (win_odds::numeric::integer)`。

请注意，它将舍入您的小数值（例如`'7.75'::numeric::integer`= `8`）。

# javascript - 将函数作为另一个函数的参数传递给嵌套函数

> ID：15916347
> 
> 赞同：0
> 
> 时间：2013-04-10T03:20:59.733
> 
> 标签：javascript, parameters, nested, arguments, parent

有点混乱。从函数 evenCard 我想调用函数 autoFlip 并将其传递给函数 evenBack 作为参数。然后更复杂的是，autoFlip 需要将参数传递给嵌套在其中的另一个函数，然后调用函数 evenBack。这可能吗？谢谢！

```
function evenCard() {
    autoFlip_toggle = true;     
    autoFlip(evenBack);
}

function autoFlip(back) {
    // do other stuff
    $(window).scroll(function() {
         if (autoFlip_toggle == true) {
           // Call evenBack somehow?
         }
     });
}

function evenBack() {
    // Does stuff
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:36:50.443

打回来（）; 在自动翻转中。

```
function autoFlip(back) {
    // do other stuff
    $(window).scroll(function() {
         if (autoFlip_toggle == true) {
           back();
         }
     });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:26:17.343

要从滚动函数调用 evenBack 只需编写`evenBack();`

# django - django rest框架返回视图中的选定字段

> ID：15916349
> 
> 赞同：6
> 
> 时间：2013-04-10T03:21:11.067
> 
> 标签：django, rest, django-rest-framework

假设我有一个模型名称 Book。我有两个视图（列表和详细信息）

模型.py

```
class Book(models.Model):
    name = models.CharField(max_length=100)
    author = models.CharField(max_length=100)
    publishdate = models.DateTimeField() 
```

序列化程序.py

```
class BookSerializer(serializers.ModelSerializer):

    class Meta:
        model = Book 
```

如果我要在我的列表视图和详细视图中使用这个序列化程序。我可以设置返回字段吗？示例：列表视图仅返回名称列表，详细视图将返回名称、作者、发布日期字段。或者我是否必须在两个类的 Class Meta 中创建新的序列化程序并插入字段？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T10:48:19.857

如果您需要列表和详细视图的不同表示形式，您应该为每个视图定义单独的序列化程序。例如...

```
class DetailBookSerializer(serializers.ModelSerializer):
    class Meta:
        model = Book
        fields = ('name', 'author', 'publishdate')

class ListBookSerializer(serializers.ModelSerializer):
    class Meta:
        model = Book
        fields = ('name',) 
```

然后确保`serializer_class`在每个视图上设置适当的属性。

# mysql - 使用 INNER JOIN 查询 UPDATE 的语法错误

> ID：15916356
> 
> 赞同：3
> 
> 时间：2013-04-10T03:21:56.633
> 
> 标签：mysql, pdo

嘿，我有一个带有内部连接的更新查询，但我无法正确使用语法以使其工作......这就是我目前拥有的：

```
UPDATE t1 
   SET t1.quantity = t1.quantity - ?  FROM items t1
INNER JOIN users t2 ON t1.id=t2.id
   WHERE t1.item_id=? AND t2.uid= ? 
```

语法错误说它就在附近：

```
near 'FROM items t1 INNER JOIN users t2 ON t1.id= 
```

我正在使用`pdo`encase 你想知道为什么我有问号！

希望你能帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T03:35:50.523

尝试以下查询，您的语法在 SQL Server 中有效，但在 MySQL 中无效

```
UPDATE items t1
INNER JOIN users t2 ON t1.id=t2.id
SET t1.quantity = t1.quantity - ?  
WHERE t1.item_id=? AND t2.uid= ? 
```

[SQL 演示](http://sqlfiddle.com/#!2/ecc4a)

# spring - Spring initWebApplicationContext 错误

> ID：15916357
> 
> 赞同：0
> 
> 时间：2013-04-10T03:22:09.493
> 
> 标签：spring, jakarta-ee

当我尝试部署我的应用程序时出现此错误。我不知道如何解决它。我搜索了3天，没有找到解决方案。

还是非常感谢。

```
 Apr 10, 2013 12:13:27 AM org.springframework.web.context.ContextLoader initWebApplicationContext
SEVERE: Context initialization failed
        org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'messageSource' defined in class path resource [spring/spring-framework-web.xml]: BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Cannot resolve reference to bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0' while setting bean property 'transactionAttributeSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0': Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: error at ::0 can't find referenced pointcut pointcutFindAndSearch
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:405)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:168)
        at org.springframework.context.support.AbstractApplicationContext.initMessageSource(AbstractApplicationContext.java:627)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:368)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4887)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5381)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722) 
```

- - - - - - - - - - - - - - - - - - - - -编辑 - - - - ----------------------------------

这是我的 spring-framework-web.xml。

我省略了部分代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" 
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/context 
            http://www.springframework.org/schema/context/spring-context-2.5.xsd">
...
    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:i18n/messages"/>
        <property name="defaultEncoding" value="UTF-8"/>
    </bean>
...
</beans> 
```

我的类路径中有包 i18n，里面有 messages.properties 文件。

# c++ - 得到很多重定义错误

> ID：15916358
> 
> 赞同：0
> 
> 时间：2013-04-10T03:22:13.400
> 
> 标签：c++, c

我遇到了很多错误，我根本无法运行它，代码不是我的（代码是在线给出的）。

是我的标题有问题吗？我知道这个问题非常广泛，但我是 C 的新手，这些错误给我带来了一些真正的麻烦。我的期望并不高，但如果有人能指出我正确的方向，那就太好了......

节点0.c

```
 #include <stdio.h>
#include "prog3.h"
extern struct rtpkt {
  int sourceid;       /* id of sending router sending this pkt */
  int destid;         /* id of router to which pkt being sent 
                         (must be an immediate neighbor) */
  int mincost[4];    /* min cost to node 0 ... 3 */
  };

extern int TRACE;
extern int YES;
extern int NO;

struct distance_table 
{
  int costs[4][4];
} dt0;

/* students to write the following two routines, and maybe some others */

void rtinit0() 
{

}

void rtupdate0(rcvdpkt)
  struct rtpkt *rcvdpkt;
{

}

printdt0(dtptr)
  struct distance_table *dtptr;

{
  printf("                via     \n");
  printf("   D0 |    1     2    3 \n");
  printf("  ----|-----------------\n");
  printf("     1|  %3d   %3d   %3d\n",dtptr->costs[1][1],
     dtptr->costs[1][2],dtptr->costs[1][3]);
  printf("dest 2|  %3d   %3d   %3d\n",dtptr->costs[2][1],
     dtptr->costs[2][2],dtptr->costs[2][3]);
  printf("     3|  %3d   %3d   %3d\n",dtptr->costs[3][1],
     dtptr->costs[3][2],dtptr->costs[3][3]);
}

linkhandler0(linkid, newcost)   
  int linkid, newcost;

/* called when cost from 0 to linkid changes from current value to newcost*/
/* You can leave this routine empty if you're an undergrad. If you want */
/* to use this routine, you'll need to change the value of the LINKCHANGE */
/* constant definition in prog3.c from 0 to 1 */

{
} 
```

节点1

```
#include <stdio.h>
#include "prog3.h"
extern struct rtpkt {
  int sourceid;       /* id of sending router sending this pkt */
  int destid;         /* id of router to which pkt being sent 
                         (must be an immediate neighbor) */
  int mincost[4];    /* min cost to node 0 ... 3 */
  };

extern int TRACE;
extern int YES;
extern int NO;

int connectcosts1[4] = { 1,  0,  1, 999 };

struct distance_table 
{
  int costs[4][4];
} dt1;

/* students to write the following two routines, and maybe some others */

rtinit1() 
{

}

rtupdate1(rcvdpkt)
  struct rtpkt *rcvdpkt;

{

}

printdt1(dtptr)
  struct distance_table *dtptr;

{
  printf("             via   \n");
  printf("   D1 |    0     2 \n");
  printf("  ----|-----------\n");
  printf("     0|  %3d   %3d\n",dtptr->costs[0][0], dtptr->costs[0][2]);
  printf("dest 2|  %3d   %3d\n",dtptr->costs[2][0], dtptr->costs[2][2]);
  printf("     3|  %3d   %3d\n",dtptr->costs[3][0], dtptr->costs[3][2]);

}

linkhandler1(linkid, newcost)   
int linkid, newcost;   
/* called when cost from 1 to linkid changes from current value to newcost*/
/* You can leave this routine empty if you're an undergrad. If you want */
/* to use this routine, you'll need to change the value of the LINKCHANGE */
/* constant definition in prog3.c from 0 to 1 */

{
} 
```

节点2

```
#include <stdio.h>
#include "prog3.h"
extern struct rtpkt {
  int sourceid;       /* id of sending router sending this pkt */
  int destid;         /* id of router to which pkt being sent 
                         (must be an immediate neighbor) */
  int mincost[4];    /* min cost to node 0 ... 3 */
  };

extern int TRACE;
extern int YES;
extern int NO;

struct distance_table 
{
  int costs[4][4];
} dt2;

/* students to write the following two routines, and maybe some others */

void rtinit2() 
{
}

void rtupdate2(rcvdpkt)
  struct rtpkt *rcvdpkt;

{

}

printdt2(dtptr)
  struct distance_table *dtptr;

{
  printf("                via     \n");
  printf("   D2 |    0     1    3 \n");
  printf("  ----|-----------------\n");
  printf("     0|  %3d   %3d   %3d\n",dtptr->costs[0][0],
     dtptr->costs[0][1],dtptr->costs[0][3]);
  printf("dest 1|  %3d   %3d   %3d\n",dtptr->costs[1][0],
     dtptr->costs[1][1],dtptr->costs[1][3]);
  printf("     3|  %3d   %3d   %3d\n",dtptr->costs[3][0],
     dtptr->costs[3][1],dtptr->costs[3][3]);
} 
```

节点3

```
#include <stdio.h>
#include "prog3.h"
extern struct rtpkt {
  int sourceid;       /* id of sending router sending this pkt */
  int destid;         /* id of router to which pkt being sent 
                         (must be an immediate neighbor) */
  int mincost[4];    /* min cost to node 0 ... 3 */
  };

extern int TRACE;
extern int YES;
extern int NO;

struct distance_table 
{
  int costs[4][4];
} dt3;

/* students to write the following two routines, and maybe some others */

void rtinit3() 
{
}

void rtupdate3(rcvdpkt)
  struct rtpkt *rcvdpkt;

{

}

printdt3(dtptr)
  struct distance_table *dtptr;

{
  printf("             via     \n");
  printf("   D3 |    0     2 \n");
  printf("  ----|-----------\n");
  printf("     0|  %3d   %3d\n",dtptr->costs[0][0], dtptr->costs[0][2]);
  printf("dest 1|  %3d   %3d\n",dtptr->costs[1][0], dtptr->costs[1][2]);
  printf("     2|  %3d   %3d\n",dtptr->costs[2][0], dtptr->costs[2][2]);

} 
```

头文件

```
/* libraries */
#include <stdlib.h>

/* definitions */

#define INF 999

#ifndef FALSE
#define FALSE (0)
#endif
#ifndef TRUE
#define TRUE (!FALSE)
#endif

struct rtpkt {
    int sourceid;       /* id of sending router sending this pkt */
    int destid;         /* id of router to which pkt being sent 
                                                 (must be an immediate neighbor) */
    int mincost[4];    /* min cost to node 0 ... 3 */
};

struct event {
   float evtime;           /* event time */
   int evtype;             /* event type code */
   int eventity;           /* entity where event occurs */
   struct rtpkt *rtpktptr; /* ptr to packet (if any) assoc w/ this event */
   struct event *prev;
   struct event *next;
};

struct distance_table 
{
    int costs[4][4];
    int link[4];
};

/* forward declarations */
void init();
void tolayer2(struct rtpkt packet);
void insertevent(struct event *p);
void rtupdate0(struct rtpkt *rcvdpkt);
void rtupdate1(struct rtpkt *rcvdpkt);
void rtupdate2(struct rtpkt *rcvdpkt);
void rtupdate3(struct rtpkt *rcvdpkt);
void linkhandler0(int linkid, int newcost);
void linkhandler1(int linkid, int newcost);
void rtinit0();
void rtinit1();
void rtinit2();
void rtinit3();
void sendpkt0();
void sendpkt1();
void sendpkt2();
void sendpkt3();
void printdt0(struct distance_table *dtptr);
void printdt1(struct distance_table *dtptr);
void printdt2(struct distance_table *dtptr);
void printdt3(struct distance_table *dtptr); 
```

主要： http: [//gaia.cs.umass.edu/kurose/network/prog3.c](http://gaia.cs.umass.edu/kurose/network/prog3.c)

我在顶部添加了以下内容：

```
#include "stdafx.h"
#include "prog3.h" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:31:56.780

还没有仔细观察它是否是您唯一的问题，但是重新定义错误无疑来自在每个 c 文件的顶部包含头文件，而没有任何类型的预编译器检查以确定头文件的符号是否已经被声明。

把这样的东西放在标题的顶部：

```
#ifndef _PROG3_H
#define _PROG3_H 
```

在头文件的底部：

```
#endif 
```

这确保了如果编译器单独检查每个文件，编译器就知道您已经声明了所需的符号。但是，如果所有文件都链接在一起，则不会为尝试链接的每个目标文件定义一次头文件中的所有符号。

**编辑：**现在我已经查看了其中的一些代码，虽然我提到的头文件问题肯定需要解决，但这并不是你重新定义事物的唯一地方。尽管您还从头文件中包含了它的定义，但您一次又一次地在 C 文件中声明`rtpkt`。`extern`如果它在标头中，您也不想将它放在 C 文件中。我看到你也`distance_table`定义了很多次。同样，如果它在标题中并以这种方式包含，请不要在 C 文件中重新定义它。

# android - IBM Worklight：在应用程序中集成服务器生成的页面

> ID：15916371
> 
> 赞同：1
> 
> 时间：2013-04-10T03:23:10.067
> 
> 标签：android, iframe, webview, ibm-mobilefirst

我正在使用[Worklight 教程 - 在混合应用程序中集成服务器生成的页面，](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/09_06_Integrating_server_generated_pages_in_Worklight_applications.pdf)并且有几个问题想问：

1.  我可以使用`<iframe src="http://m.ibm.com" />`在本地 HTML 中嵌入远程网页。除了有一些额外的 API 可以控制 WebView（例如设置是否启用 JavaScript、清除历史记录等）。在 iframe 上使用 WebViewOverlayPlugin 还有其他好处吗？

2.  我试图添加

    webViewOverlay.getSettings().setBuiltInZoomControls(true);

在 WebViewOverlaySample.java 中启用 WebView 中的缩放控制。但是，不显示缩放控制。当我创建一个原生的Android应用，将缩放控件添加到WebView中，就可以成功显示了。（环境详情：Android 4.1.1、三星 Galaxy 3、API 14）

1.  是否可以与远程页面中的混合应用程序交互？（通过自定义 URL 方案？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T10:35:11.100

iframe 在移动浏览器中效果不佳。有许多关于 iPhone 和 Android 上出现意外行为的报告。

但是，如果您使用 Worklight 5.0.6 及更高版本，则可以使用[Cordova 的 InAppBrowser](http://cordova.apache.org/docs/en/2.9.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)以避免直接在本机视图中对其进行编码。

# c++ - 谷歌测试 C++ 检查流是否为空

> ID：15916373
> 
> 赞同：2
> 
> 时间：2013-04-10T03:23:37.460
> 
> 标签：c++, unit-testing, stream, googletest

我有一个参考构造函数，它接收一个流作为参数。

```
Reference::Reference(std::istream& p_is)
{} 
```

如果流不为空，我必须使用 Google Test 签入单元测试。我在谷歌上检查了我能做什么，但我找不到任何东西。

我的问题是：你知道怎么做吗，或者你有什么建议给我。

此致，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:44:57.543

必须始终初始化引用以引用有效的对象或函数。未绑定到有效对象或函数的引用会产生未定义的行为。如果您需要传递空值，请使用指针，而不是引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:47:42.260

As Captain Obvlious pointed out, you can't have a reference to an invalid object/function. You could either pass it as a pointer, or only call to the constructor if(!p_is.good()) if you aren't restricted by the use of Google Test (Sorry, I'm not familiar with Google Test's functionality, so I might just be re-iterating what has already been said)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T19:54:20.217

也许您应该重新考虑为什么您认为需要测试 NULL 引用。与引用相比，指针更容易搞砸。

例如，这会导致崩溃

```
int *p;
if(true)
{
  int x;
  p = &x;
}

*p = 3;//runtime error 
```

但不会发生在引用中，因为必须为引用分配它的值，并且值在同一范围内。

但是，在某些情况下可能会发生崩溃并且检查会很有用：

```
 int* p = 0;
 int& ref(*p);
 int i(ref);  // access violation here 
```

但随后您可能想要检查指针，如

```
int* p =0;
if (p)
{
  int& ref(*p);
  int i(ref);
} 
```

因此，如前所述，您负责在代码中初始化引用。如果您的初始化是使用指针的指针，例如`int& ref(*p);`，只需检查指针。

高温高压

# vbscript - 从 Visual SVN 检索访问权限报告的 VB 脚本

> ID：15916380
> 
> 赞同：2
> 
> 时间：2013-04-10T03:24:50.107
> 
> 标签：vbscript, visualsvn, user-permissions

在我进行 SID 转换时，我发现在测试机器上安装了 VirsualSVN 的可行脚本，但该脚本在服务器上不起作用。我将文件保存为 test.vbs 放在桌面上并使用以下命令执行代码并将输出生成为文本文件： **cscript test.vbs > c:\output.txt**

在测试机器上，我安装了 VisualSVN **2.5.8**版本，**根存储库位于 C:\Repositories**

在服务器上，安装的 VisualSVN 版本**1.6.3**和**根存储库位于 E:\Repositories**

从下面的脚本中，我缺乏编码，不知道应该在哪里修改脚本以使其在服务器上工作？我正在寻求您的专家帮助。

```
'
' Print permissions in the form: user_name,path,level
'
strComputer = "."
Set wmi = GetObject("winmgmts:" _
  & "{impersonationLevel=impersonate}!\\" _
  & strComputer & "\root\VisualSVN")

Set win = GetObject("winmgmts:" _
  & "{impersonationLevel=impersonate}!\\" _
  & strComputer & "\root\cimv2")

' Return text representation for the Access Level
Function AccessLevelToText(level)
  If level = 0 Then
    AccessLevelToText = "No Access"
  ElseIf level = 1 Then
    AccessLevelToText = "Read Only"
  ElseIf level = 2 Then
    AccessLevelToText = "Read/Write"
  Else 
    AccessLevelToText = "Unknown"
  End If
End Function

' Return repository path for the object
Function GetPath(obj)
  cname = assoc.Path_.Class
  If cname = "VisualSVN_Service" Then
    GetPath = "Repositories Root"
  ElseIf cname = "VisualSVN_Repository" Then
    GetPath = assoc.Name
  ElseIf cname = "VisualSVN_RepositoryEntry" Then
    GetPath = assoc.RepositoryName & ": " & assoc.Path
  Else
    GetPath = "Unknown"
  End If
End Function

' Convert SID to user name
Function SidToUserName(sid)
  Set account = win.Get("Win32_SID.SID='" & sid & "'")
  user = account.AccountName
  domain = account.ReferencedDomainName
  SidToUserName = domain & "\" & user
End Function

' Iterate over all security descriptions
Set objs = wmi.ExecQuery("SELECT * FROM VisualSVN_SecurityDescriptor")
For Each obj In objs
  Set assoc = wmi.Get(obj.AssociatedObject)

  For Each perm in obj.Permissions
    sid = perm.Account.SID
    level = AccessLevelToText(perm.AccessLevel)

     Wscript.Echo SidToUserName(sid) & "," & GetPath(assoc) & "," & level
   Next
Next 
```

[来自http://www.svnforum.org/threads/38790-Access-Rights-Reporting-in-Subversion-or-Viusal-SVN](http://www.svnforum.org/threads/38790-Access-Rights-Reporting-in-Subversion-or-Viusal-SVN)的代码参考

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:32:59.943

`0x8004100e`表示命名空间 ( `/root/VisualSVN`) 不存在。可能服务器上安装的版本太旧，没有在 WMI 中创建这个命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:57:55.173

遵循@Ansgar 的回答。

早于 2.0 的 VisualSVN 服务器版本无法通过 WMI 进行管理。

# apache - 使用 .htaccess 重写从旧 url 重定向到新 url

> ID：15916382
> 
> 赞同：1
> 
> 时间：2013-04-10T03:25:08.093
> 
> 标签：apache, .htaccess

我有一个网站`example.com`，它是我网站的旧域名。我们希望从旧域名切换到新域名`theexample.com`。

由于该网站是使用网络主机托管的，因此我们目前的两个域名都指向相同的 IP 地址。我认为我应该能够在服务器的根目录中放置一个 .htaccess 文件，该文件会根据 rewritecond 从旧站点重定向到新站点。我认为下面的代码可以解决问题，但它不起作用

```
RewriteEngine on
rewritecond %{http_host} ^example.com [nc]
rewriterule ^(.*)$ http://theexample.com/$1 [r=301,nc] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:26:33.560

好的..您问题中的代码似乎正确！但是，您仍然可以在*.htaccess*文件中尝试这些配置指令：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteRule ^(.*)$ http://theexample.com/$1 
```

但首先，请确保您的网络主机中有一个**Apache HTTP 服务器。**`mod_rewrite`

# jquery - 改变表格的背景

> ID：15916384
> 
> 赞同：-1
> 
> 时间：2013-04-10T03:25:24.810
> 
> 标签：jquery, html-helper

如果值等于 130，我打算更改表格的背景，表格背景的颜色将为红色。这是我的代码它不起作用，所以你能改进我的代码吗？

```
var computeValues = function(){
  var id = $(this)
             .attr("id")
             .replace("prelim_", "")
             .replace("midterm_","")
             .replace("final_", "");

  p = $("#prelim_" + id).val();
  m = $("#midterm_" + id).val();
  f = $("#final_" + id).val();

  Compute(p, m, f, id);

  if(p, m, f ==130) {
    $(this).css('background-color','red');          
  }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:09:20.843

问题是`$(this)`没有定义你使用它的地方，因为你不在 jQuery 的回调函数范围内：

```
$(this).css('background-color','red'); 
```

此外，此`if`语句可能正在评估`false`if`f`不等于`130`：

```
if(p, m, f ==130) 
```

# xml - XML解析错误补救

> ID：15916387
> 
> 赞同：0
> 
> 时间：2013-04-10T03:25:42.493
> 
> 标签：xml, parsing

在解析 XML 文件期间，我面临解析错误，例如`[Fatal Error] :293:24: Invalid byte 2 of 2-byte UTF-8 sequence.`My XML sample contains some characters like **xc3**，这是一个字符（我的意思是在**xc3**字符一次删除时按下删除按钮。（我试图在此处粘贴此字符，但这个编辑器正在显示其他字符）。

```
<?xml version="1.0" encoding="utf-8"?>
<issue-info>
<issue-meta>
<date>January 24, 2013</date>
<from>Chris Burton, John Wiley &amp; Sons, Ltd.</from>
<journal>Greenhouse Gases: Science and Technology</journal>
<typesetter>Anju Upadhaya</typesetter>
<volume>3</volume>
<issue>1</issue>
<printer>Markono,</printer>
<cover-date>February 2013</cover-date>
<online-issn>2152-3878</online-issn>
<print-issn>2152-3878</print-issn>
<total-pages>FM &ndash; 4; TEXT &ndash; 95; EM &ndash; 1: TOTAL = 100</total-pages>
<spl-instruction></spl-instruction>
</issue-meta>
<issue-item>
<seq>1</seq>
<ed-ref>OFC</ed-ref>
<aid></aid>
<author></author>
<description>Update from GHG 2_1 cover</description>
<start-page>1</start-page>
<end-page>1</end-page>
<artty></artty>
<category>OFC (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>2</seq>
<ed-ref>IFC</ed-ref>
<aid></aid>
<author>49379Ůpdf</author>
<description>New GHG colour ADVERT</description>
<start-page>2</start-page>
<end-page>2</end-page>
<artty></artty>
<category>IFC (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>3</seq>
<ed-ref>FM1</ed-ref>
<aid></aid>
<author></author>
<description>Table of Contents</description>
<start-page>1</start-page>
<end-page>1</end-page>
<artty></artty>
<category>TOC (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>4</seq>
<ed-ref>FM2</ed-ref>
<aid></aid>
<author></author>
<description>Editorial Board</description>
<start-page>2</start-page>
<end-page>2</end-page>
<artty></artty>
<category>Editorial Board (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>5</seq>
<ed-ref>FM3</ed-ref>
<aid></aid>
<author></author>
<description>Aims and Scope</description>
<start-page>3</start-page>
<end-page>3</end-page>
<artty></artty>
<category>Aims and Scope (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>6</seq>
<ed-ref>FM4</ed-ref>
<aid></aid>
<author></author>
<description>Information Page</description>
<start-page>4</start-page>
<end-page>4</end-page>
<artty></artty>
<category>Information Page (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>7</seq>
<ed-ref></ed-ref>
<aid>GHG1333</aid>
<author>PROD ED</author>
<description></description>
<start-page>1</start-page>
<end-page>2</end-page>
<artty>ED</artty>
<category>Editorial (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>8</seq>
<ed-ref></ed-ref>
<aid>GHG1334</aid>
<author>PROD ED</author>
<description></description>
<start-page>3</start-page>
<end-page>4</end-page>
<artty>XX</artty>
<category>60 Second Interview (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>9</seq>
<ed-ref></ed-ref>
<aid>GHG1335</aid>
<author></author>
<description></description>
<start-page>5</start-page>
<end-page>7</end-page>
<artty>XX</artty>
<category>Feature (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>10</seq>
<ed-ref>GHG-12-0029.R2</ed-ref>
<aid>GHG1313</aid>
<author>PAN, CLODIC, TOUBASSY</author>
<description></description>
<start-page>8</start-page>
<end-page>20</end-page>
<artty>XX</artty>
<category>In the Field (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online>03 Jan 2013</pub-online>
</issue-item>
<issue-item>
<seq>11</seq>
<ed-ref>GHG-12-0023.R1</ed-ref>
<aid>GHG1298</aid>
<author>Peterson, O'Byrne, Endres, Peterson</author>
<description></description>
<start-page>21</start-page>
<end-page>29</end-page>
<artty>XX</artty>
<category>Spotlight (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online>14 Sep 2012</pub-online>
</issue-item>
<issue-item>
<seq>12</seq>
<ed-ref>GHG-12-0033.R2</ed-ref>
<aid>GHG1321</aid>
<author>Begag, Krutka, Dong, Mihalcik, Rhine, Gould, Baldic, Nahass</author>
<description></description>
<start-page>30</start-page>
<end-page>39</end-page>
<artty>XX</artty>
<category>Spotlight (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>13</seq>
<ed-ref>GHG-12-0036.R1</ed-ref>
<aid>GHG1331</aid>
<author>Cunningham, Lauchnor, Eldring, Esposito, Mitchell, Gerlach, Phillips, Ebigbo, Spangler</author>
<description></description>
<start-page>40</start-page>
<end-page>49</end-page>
<artty>XX</artty>
<category>Spotlight (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>14</seq>
<ed-ref>GHG-12-0034.R1</ed-ref>
<aid>GHG1328</aid>
<author>Elliot, Buscheck, Celia</author>
<description></description>
<start-page>50</start-page>
<end-page>65</end-page>
<artty>XX</artty>
<category>Modeling and Analysis (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>15</seq>
<ed-ref>GHG-12-0021.R1</ed-ref>
<aid>GHG1318</aid>
<author>Mazzoldi, Picard, Sriram, Oldenburg</author>
<description></description>
<start-page>66</start-page>
<end-page>83</end-page>
<artty>XX</artty>
<category>Modeling and Analysis (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online>03 Jan 2013</pub-online>
</issue-item>
<issue-item>
<seq>16</seq>
<ed-ref>GHG-12-0031.R1</ed-ref>
<aid>GHG1308</aid>
<author>Eccles, Pratson</author>
<description></description>
<start-page>84</start-page>
<end-page>95</end-page>
<artty>XX</artty>
<category>Modeling and Analysis (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online>26 Oct 2012</pub-online>
</issue-item>
<issue-item>
<seq>17</seq>
<ed-ref>EM1</ed-ref>
<aid></aid>
<author>Join the SCI</author>
<description>NEW COLOUR ADVERT</description>
<start-page></start-page>
<end-page></end-page>
<artty></artty>
<category>Society Ad (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>18</seq>
<ed-ref>IBC</ed-ref>
<aid></aid>
<author>ONLINE OPEN</author>
<description>COLOUR ADVERT</description>
<start-page>1</start-page>
<end-page>1</end-page>
<artty></artty>
<category>IBC (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
<issue-item>
<seq>19</seq>
<ed-ref>OBC</ed-ref>
<aid></aid>
<author>CCUS</author>
<description>NEW COLOUR ADVERT</description>
<start-page>2</start-page>
<end-page>2</end-page>
<artty></artty>
<category>OBC (GHG)</category>
<toc-category></toc-category>
<reprint></reprint>
<color>N</color>
<color-charge>0</color-charge>
<pub-online></pub-online>
</issue-item>
</issue-info> 
```

我用于解析的 Java 代码如下。

```
 DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
        docBuilderFactory.setValidating(false);
        docBuilderFactory.setCoalescing(false);
        docBuilderFactory.setXIncludeAware(false);
        docBuilderFactory.setNamespaceAware(false);
        docBuilderFactory.setIgnoringComments(true);
        docBuilderFactory.setExpandEntityReferences(false);

        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(rtfXmlIS);
        doc.getDocumentElement().normalize(); 
```

如何摆脱这种错误（`[Fatal Error] :16:45: Invalid byte 1 of 1-byte UTF-8 sequence.`，`[Fatal Error] :14:24: The entity "ndash" was referenced, but not declared.`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T03:35:31.373

这是两个不同的错误。

首先是因为输入不是 UTF-8。在将输入传递给解析器之前，您需要正确解码输入。

第二个可能是因为输入是 XHTML 而不是 XML。如果您想将此输入与 XML 解析器一起使用并解析实体`&ndash;`，则需要提供一个定义它的 DTD 以及输入中包含的任何其他实体。

# c# - 如何使用格式剪切、复制和粘贴？

> ID：15916389
> 
> 赞同：3
> 
> 时间：2013-04-10T03:25:46.467
> 
> 标签：c#, winforms, visual-studio, formatting

我有一个带有richTextBox 的WinForms 应用程序。我希望能够在我的应用程序中剪切、复制和粘贴格式化文本。目前，我的代码包括：

全部剪掉：

```
richTextBoxPrintCtrl1.Cut(); 
```

剪切选择：

```
Clipboard.SetText(richTextBoxPrintCtrl1.Text);
        richTextBoxPrintCtrl1.Text = ""; 
```

全部复制：

```
richTextBoxPrintCtrl1.Copy(); 
```

复制选择：

```
Clipboard.SetDataObject(richTextBoxPrintCtrl1.SelectedText); 
```

粘贴：

```
DataFormats.Format myFormat = DataFormats.GetFormat(DataFormats.Text);
        richTextBoxPrintCtrl1.Paste(myFormat); 
```

我希望这样，如果我从richTextBox 剪切/复制文本，它会保留所有格式（大小、字体、颜色等），如果我将文本粘贴到richTextBox，它也会保留所有格式。

这将如何实现？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T03:33:48.580

试试这两个功能：

**复制**

```
 private void Copy()
    {
        Clipboard.SetText(richTextBox1.Rtf, TextDataFormat.Rtf);
    } 
```

**粘贴**

```
 private void Paste()
    {
        if (Clipboard.ContainsText(TextDataFormat.Rtf))
        {
            richTextBox1.Rtf = Clipboard.GetText(TextDataFormat.Rtf);

        }
    } 
```

# android - 发送电子邮件返回主屏幕

> ID：15916394
> 
> 赞同：0
> 
> 时间：2013-04-10T03:26:11.390
> 
> 标签：android, email, android-intent, android-activity

因此，我有此代码来创建电子邮件`Intent`，以便我的用户可以发送支持邮件。

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("message/rfc822");
i.putExtra(Intent.EXTRA_EMAIL, new String[]{"username@example.com"});
i.putExtra(Intent.EXTRA_SUBJECT, "The subject");
i.putExtra(Intent.EXTRA_TEXT, "The body");
startActivity(Intent.createChooser(i, "Send email")); 
```

使用该代码，它会打开一个对话框，我将在其中选择我将使用哪个应用程序来发送电子邮件。当我按下 时`Back button`，它会返回，`Home screen`如果我点击其他地方来关闭对话框，它也会返回。当我选择一个应用程序时，例如 Gmail，它会打开 Gmail（我现在可以发送电子邮件），但是当我按下发送时，它也会返回，`Home screen`如果我按下`Back button`.

现在，我的问题是如何返回到`Activity`我按的上一个新闻`Back button`，如果我想取消发送邮件？当我想取消它时，也适用于对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:45:54.770

试试这个电子邮件，过滤器更好：

```
Intent feedback = new Intent(Intent.ACTION_VIEW);
            Uri data = Uri.parse("mailto:?subject=" + "SUBJECT"
                    + "&body=" + "BODY" + "&to="
                    + "EMAILADRESS");
            feedback.setData(data);
            startActivity(feedback); 
```

这对我来说做得很好

# python - 在 Django 中设置 gdata 以检索 google 联系人

> ID：15916396
> 
> 赞同：0
> 
> 时间：2013-04-10T03:26:15.667
> 
> 标签：python, django, gdata, gdata-api

我正在尝试使用 gdata 来获取我网站上用户的联系信息。

到目前为止，我已经做了一个 pip install gdata。

然后我添加了我的views.py

```
CLIENT_ID = 'mythingy'  # Provided in the APIs console
CLIENT_SECRET = 'mythingy'  # Provided in the APIs console
SCOPE = 'https://www.google.com/m8/feeds'
USER_AGENT = 'dummy-sample' 
```

我的页面上有一个按钮，但我希​​望如果您单击它，它应该会询问您的权限，然后打开一个带有用户 gmail 联系人的弹出窗口。

我想知道如何实现htat。

到目前为止，在我看来，我有：

```
@login_required
def activate_user(request, activation_key):

   user = User.objects.get(username=request.user)
   profile = user.get_profile()
   auth_token = gdata.gauth.OAuth2Token(client_id=CLIENT_ID,client_secret=CLIENT_SECRET,scope=SCOPE,user_agent=USER_AGENT)

    APPLICATION_REDIRECT_URI = 'http://127.0.0.1:8000/oauth2callback'
    authorize_url=auth_token.generate_authorize_url(redirect_uri=APPLICATION_REDIRECT_URI)

    return render_to_response('registration/activation_complete.html',{'user': user,'profile':profile}, context_instance=RequestContext(request)) 
```

但这无济于事。我没有触摸我的 urls.py 或我的 settings.py 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:21:28.600

我最终使用了 javascript API。如果有人需要代码，请告诉我

# tapi - 在 TSP 中设置呼叫者 ID

> ID：15916401
> 
> 赞同：1
> 
> 时间：2013-04-10T03:26:48.773
> 
> 标签：tapi

我开发了一个 TSP 来与 CTI 服务器通信。在大多数情况下，它可以工作，但是在设置呼叫者/被叫 ID 方时，在

```
function TSPI_lineGetCallInfo(
  hdCall : HDRVCALL;
  lpCallInfo : LPLINECALLINFO
) : LONG; 
```

我发现偏移量都是正确的，但大小字段不是。在函数结束时，我输出（到调试器）每个字段的大小和偏移量，它们是我所期望的。但是当我使用 TAPI 程序检查值时，大小是不同的，（但偏移量与调试语句完全相同）实际上大小字段 5 无论实际存在什么，而调试语句在末尾下面的代码显示了正确的值...

非常感谢任何帮助。

```
 lpCallInfo^.dwCallerIDOffset := 0;
      lpCallInfo^.dwCallerIDSize := 0;
      lpCallInfo^.dwCalledIDOffset := 0;
      lpCallInfo^.dwCalledIDSize := 0;
      lpCallInfo^.dwConnectedIDOffset := 0;
      lpCallInfo^.dwConnectedIDSize := 0;

      extnid := thiscall.CallItem.ExtnId;
      phoneno := thiscall.CallItem.DialNum;
      extnid_size := (Length(extnid) + 1) * sizeof(WCHAR);
      phoneno_size := (Length(phoneno) + 1) * sizeof(WCHAR);

      extnidw := StringToWideStringEx(extnid, CP_ACP);
      phonenow := StringToWideStringEx(phoneno, CP_ACP);

      if lpCallInfo^.dwOrigin = LINECALLORIGIN_INTERNAL then
      begin
        {me}
        lpCallInfo^.dwCallerIDOffset := sizeof(TLINECALLINFO);
        lpCallInfo^.dwCallerIDSize := extnid_size;
        Move(ExtnIdw[1], ptr^, extnid_size * 2);
        ptr := Pointer(integer(ptr) + lpCallInfo^.dwCallerIDSize);
        {other party}
        if phoneno <> '' then
        begin
          lpCallInfo^.dwCalledIDOffset :=
            sizeof(TLINECALLINFO) + lpCallInfo^.dwCallerIDSize;
          lpCallInfo^.dwCalledIDSize := phoneno_size;
          Move(phonenow[1], ptr^, phoneno_size * 2);
        end;
      end
      else
      begin
        if thiscall.CallItem.CallType = 1 then
        begin {incoming call}
          {agent is the called party}
          lpCallInfo^.dwCalledIDOffset := sizeof(TLINECALLINFO);
          lpCallInfo^.dwCalledIDSize := extnid_size;
          Move(ExtnIdw[1], ptr^, extnid_size);
          ptr := Pointer(integer(ptr) + lpCallInfo^.dwCalledIDSize);
          {other party is the caller}
          if phoneno <> '' then
          begin
            lpCallInfo^.dwCallerIDOffset :=
              sizeof(TLINECALLINFO) + lpCallInfo^.dwCalledIDSize;
            lpCallInfo^.dwCallerIDSize := phoneno_size;
            Move(phonenow[1], ptr^, phoneno_size);
            ptr := Pointer(integer(ptr) + lpCallInfo^.dwCallerIDSize);
          end;
        end
        else
        begin
          {agnet is the caller}
          lpCallInfo^.dwCallerIDOffset := sizeof(TLINECALLINFO);
          lpCallInfo^.dwCallerIDSize := extnid_size;
          Move(ExtnIdw[1], ptr^, extnid_size);
          ptr := Pointer(integer(ptr) + lpCallInfo^.dwCallerIDSize);
          {dialed number is the called party}
          if phoneno <> '' then
          begin
            lpCallInfo^.dwCalledIDOffset :=
              sizeof(TLINECALLINFO) + lpCallInfo^.dwCallerIDSize;
            lpCallInfo^.dwCalledIDSize := phoneno_size;
            Move(phonenow[1], ptr^, phoneno_size);
            ptr := Pointer(integer(ptr) + lpCallInfo^.dwCalledIDSize);
          end;
        end;
        if (thiscall.CallItem.CallState = cs_Connected) and
          (phoneno <> '') then
        begin
          lpCallInfo^.dwConnectedIDOffset := sizeof(TLINECALLINFO) +
            lpCallInfo^.dwCallerIDSize + lpCallInfo^.dwCalledIDSize;
          lpCallInfo^.dwConnectedIDSize := phoneno_size;
          Move(phonenow[1], ptr^, phoneno_size);
          ptr := Pointer(integer(ptr) + lpCallInfo^.dwConnectedIDSize);
        end;
      end;
    end;

    DEBUG('TSPI_lineGetCallInfo::dwCallerIDOffset=' + intToStr(lpCallInfo^.dwCallerIDOffset));
    DEBUG('TSPI_lineGetCallInfo::dwCallerIDSize=' + intToStr(lpCallInfo^.dwCallerIDSize));
    DEBUG('TSPI_lineGetCallInfo::dwCalledIDOffset=' + intToStr(lpCallInfo^.dwCalledIDOffset));
    DEBUG('TSPI_lineGetCallInfo::dwCalledIDSize=' + intToStr(lpCallInfo^.dwCalledIDSize));
    DEBUG('TSPI_lineGetCallInfo::dwConnectedIDOffset=' + intToStr(lpCallInfo^.dwConnectedIDOffset));
    DEBUG('TSPI_lineGetCallInfo::dwConnectedIDSize=' + intToStr(lpCallInfo^.dwConnectedIDSize)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:19:07.410

这些都是奇怪的结果。您的代码似乎已签出。这可能是一个远景，但结果可能是由于为 lpCallInfo 结构保留的内存太少造成的。你用什么tapi程序？大多数程序只是预先保留大量盈余。但是，另一种常用的方法是通过首先调用 TSPI_lineGetCallInfo 并在设置 dwNeededSize 并返回 LINEERR_STRUCTURETOOSMALL 后保留确切的数量来“询问”TSP 所需的确切数量。您似乎没有检查 dwTotalSize 或设置 dwNeededSize 和 dwUsedSize 字段（这很危险）。

请看：[LINEERR 常量](http://msdn.microsoft.com/en-us/library/windows/desktop/ms735630%28v=vs.85%29.aspx)

并让我知道它是否解决了问题。如果没有，我会很好奇从 Tapi 浏览器中查看结构日志，但我们希望它能正常工作。祝你好运！

# php - PHP调整图像大小，转换为jpg，并在浏览器中显示

> ID：15916404
> 
> 赞同：0
> 
> 时间：2013-04-10T03:27:00.820
> 
> 标签：php, forms, upload, image-resizing, image-conversion

我有一个表格来上传文件：

```
<form method="POST" action="upload-image.php">
    <input type="file" name="file"><br>
    <input type="submit" value="Submit">
</form> 
```

还有一个 PHP 代码来调整上传文件（图像）的大小，将其转换为 JPG，并在浏览器中显示。

```
<?php
function image_to_jpg($src_file){
    $file = $_FILES["file"]["name"];
    $ext = end(explode(".",$file));
    list($width_orig,$height_orig) = getimagesize($src_file);
    $width  = 128;
    $height = 128;
    ini_set("memory_limit","32M");
    if($ext == "jpg" || $ext == "jpeg"){
        $image = imagecreatefromjpeg($file);
    }
    if($ext == "gif"){
            $image = imagecreatefromgif($file); 
    }
    if($ext == "png"){
        $image = imagecreatefrompng($file);
    }
    $new_image = imagecreatetruecolor($width,$height);
    imagecopyresampled($new_image,$image,0,0,0,0,$width,$height,$width_orig,height_orig);
    $dest_file = "ok.jpg";
    header("Content-Type: image/jpeg");
    imagejpeg($new_image,$dest_file);
}
$src_file = $_FILES["file"]["tmp_name"];
image_to_jpg($src_file);
?> 
```

它不工作。它显示一个空白图像。我的错误是什么？

注意：改编自帖子的代码被接受为答案：

[如何使用 GD 调整上传图像的大小并将其转换为 PNG](https://stackoverflow.com/questions/22259/how-do-i-resize-and-convert-an-uploaded-image-to-a-png-using-gd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:46:22.127

因为你使用`imagejpeg($new_image,$dest_file);`你的缩放图像被写入 ok.jpg。不要使用第二个参数直接输出到浏览器。

```
header("Content-Type: image/jpeg");
imagejpeg($new_image);
imagedestroy($new_image);
exit; 
```

# finite-automata - 图灵机

> ID：15916405
> 
> 赞同：1
> 
> 时间：2013-04-10T03:27:01.040
> 
> 标签：finite-automata, turing-machines, formal-languages

我正在读一本关于语言和自动机的书，但我不了解图灵机。我已经自学了 DFA 的 NFA 和 Pushdown Automata，没有任何问题。有人可以解释这是在做什么吗？

B = {w#w|w ∈ {0, 1}*}

下图包含 Ml 的磁带在输入 011000#011000 开始时在阶段 2 和 3 中计算时的几个快照。

![图灵机](https://i.stack.imgur.com/dul3k.png)

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:57:14.847

“想象一排无穷无尽的酒店房间，每个房间都包含一个灯泡和一个控制它的开关。最初，所有房间都是黑暗的。机器人从其中一个房间开始，并具有操作开关并移动到相邻房间的能力房间。

机器人有几种可以处于的状态，每种状态都根据当前房间是亮还是暗来决定它应该做什么。例如，机器人的规则可能包括以下状态：

“害怕”状态：

如果房间很暗，请打开灯并移动到左侧的房间。

如果房间很亮，什么也不做，进入“正常”状态。“正常”状态：

如果房间很亮，请关掉灯并移动到右侧的房间。

否则，进入“害怕”状态。

一种特殊状态是“停止”状态。当机器人发现自己处于这种状态时，该过程就完成了。

假设一个机器人有 n 个状态（不包括“停止”状态），它停止了。此时灯室的最大数量是多少？

该系统直接与图灵机相提并论。旅馆是磁带，机器人是图灵机，暗室和亮室是 0 单元和 1 单元。”

它来自googology wiki。我提出了一个想法，但是，当然，从我开始，这篇文章就得到了改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:30:33.190

图灵机是一种带有存储符号的磁带的假设机器。它可以有多个磁头，可以从磁带读取符号或将符号写入磁带。

现在你的语法说 B = {w#w|w ∈ {0, 1}*}，即任何形式为“w#w”的字符串，其中 w 是 0 和 1 的任意组合，或者根本没有。因此，对于这个特定示例，假设 w = 011000。结果字符串将为 011000#011000 并且您的图灵机将验证它是否遵循此语法。

在这种情况下，您的图灵机只有一个头。它从字符串的开头开始。读取第一个字符，即 0。将其标记为“x”：表示我已阅读此内容。然后在 # 之后立即检查它刚刚读取的内容是否匹配。在这种情况下，它也为 0，因此将其标记为匹配“x”。然后它回到之前的位置并对下一个字符做同样的事情。它一直这样做，直到达到#。当它读取 hash 或 # 时，它检查字符串的结尾，如果它是字符串的结尾，它接受这个字符串，说是的，这遵循给定的语法。

# nexus - Nexus 搜索显然限制了代理存储库中的快照搜索结果

> ID：15916406
> 
> 赞同：1
> 
> 时间：2013-04-10T03:27:06.893
> 
> 标签：nexus

我正在运行 Nexus 2.3.1-01。我定义了一个代理存储库，它代理来自上游 nexus 实例的快照。当我浏览与此代理关联的远程存储库时，我可以看到感兴趣的快照工件。但是，当我在 Nexus 管理 web ui 中搜索此工件的所有版本时，会出现旧版本的快照工件，但不会出现感兴趣的最新版本。然而，当我浏览遥控器时，那些更新的版本清晰可见。

我已经为此苦苦挣扎了几个小时，并尝试过使代理缓存过期、重建索引和修复索引。这是 Nexus 的全新安装，因此损坏的索引似乎不太可能。

有人可以就我接下来可以尝试的内容提供一些指导吗？我应该补充一点，我的 mvn 客户端也无法解决感兴趣的快照依赖关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:05:23.370

我想到了。我的错，当然。

我的测试项目使用的 POM 中没有指向适当存储库的子句。存储库的唯一提示是在我的 settings.xml 文件中，并且该存储库位于我想要的子句中，但这还不够。

最后的提示是什么？当我转储有效的 POM (mvn help:effective-pom) 时，我看到配置的唯一存储库是 Maven Central。并且快照被禁用。我（实际上是同事）意识到这个单一的存储库无法引导解析快照的能力。

所以我在我的 POM 中添加了一个存储库子句，在其上启用了快照，现在一切、发布和快照都解决了。当然，存储库必须设置为交回版本和快照，但我已经对我的 Nexus 配置的那一部分进行了设置。

# wordpress - 自定义帖子的类别模板

> ID：15916407
> 
> 赞同：0
> 
> 时间：2013-04-10T03:27:07.187
> 
> 标签：wordpress, custom-post-type, wp-list-categories

您好我想使用 category-(slug).php 作为我的自定义帖子类型。

在functions.php中，我定义了电影帖子类型如下

```
add_action( 'init', 'create_post_type_movie' );
function create_post_type_movie() {
register_post_type( 'ra_movie',
array(
  'labels' => array(
    'name' => __( 'Movies' ),
    'singular_name' => __( 'Movie' )
  ),
  'public' => true,
  'has_archive' =>true,
  'rewrite' => array('slug' => 'movie'),
  'supports' => array('title','editor','author','thumbnail','excerpt','comments','custom-fields','revisions'),
  'taxonomies' => array('category', 'post_tag') // this is IMPORTANT
));
} 
```

所以帖子类型的 slug 是**电影**。当我加载

../类别电影/设计

它显示 404。我使用的是 wordpress 3.5.1，所以它应该能够显示 category-(slug).php

有任何想法吗？谢谢

# sql-server-2008 - 我的 Web 服务器部署好吗？

> ID：15916408
> 
> 赞同：-1
> 
> 时间：2013-04-10T03:27:09.787
> 
> 标签：sql-server-2008, deployment, iis-7, web-deployment

我将为我的**ASP.NET MVC 4**应用程序部署一个 IIS 7 Web 服务器。

**视窗服务器 2008**

**IIS 7**

**SQL Server 2008**

我要这样做： ![部署架构](https://i.stack.imgur.com/cvyCx.jpg)

在我的应用程序中：

***每个客户必须使用两个数据库**

*   第一个数据库：他们**自己的数据库**（每个客户都有一个）
*   第二个数据库：**全球数据库**（所有客户都有同一个）

并且**First DB 可以加入到第二个 DB**。

（我会用`Server Binding`）

**关于网络**服务器：

*   每个客户都有**自己的网站**（在同一个 IIS Web 服务器上）来获取视图/UI

*   所有客户都有**相同`API Web Server`**的（这个将做所有事情：从数据库中获取数据，添加/删除数据，......）

*   每个客户都有一个搜索引擎（建议工具），要使用此工具，我必须将**所有相关数据加载到内存**中（每 4 小时重新加载一次此数据）

这是我第一次不得不部署这样的服务器，所以我不知道如何做到最好......

如果有任何建议，建议，参考，书籍，......请发给我。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:41:30.527

IIS 和 SQL Server 已经在内存中缓存了一些东西以提高性能，只要有足够的内存并且编程允许。你不需要编写一个特殊的模块来做到这一点。

您不需要`Server Binding`在 SQL Server 中跨数据库连接。您只需在 SQL 中加入数据库（前提是它们在同一台服务器上）

```
SELECT D1.F1, D2.F2
FROM
ClientDatabase.dbo.Table1 D1
INNER JOIN
GlobalDatabase.dbo.Table2 D2
ON D1.Key = D2.Key 
```

SQL Server 已经带有一个文本搜索引擎[http://msdn.microsoft.com/en-us/library/ms142571.aspx](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

您是在数据库记录中搜索文本，还是在外部文档（即 Word、PDF）中搜索文本

看来您正在重新发明轮子。如果您使用预先构建的经过验证的组件，您更有可能取得成功！

# python - 在python中将两个列表与一些顺序规则合并

> ID：15916410
> 
> 赞同：1
> 
> 时间：2013-04-10T03:27:39.417
> 
> 标签：python

我不知道如何给出准确的标题，但这就是问题所在。

问题：

我想给出一个已经保留了一些位置的排名列表（想象一些顶级列表）。

假设我有 7 个插槽`[1, 2, 3, 4, 5, 6, 7, 8]`，有些已经保留了位置 1、3、4、7、9。（由于我们只有 8 个插槽，保留的位置 9 将意味着最后一个插槽。）

然后我剩下 2、5、6 个插槽，我必须用其他对象填充它们。

简化的问题：

我有两个清单：

```
>>> a = [1, 3, 4, 7, 9]
>>> b = [object_x, object_y, object_z] 
```

我想将它们合并到这个：

```
>>> c = [1, object_x, 3, 4, object_y, object_z, 7, 9] 
```

（我们可以将此处的“object_x”设为 0。）

就是这样，只是想看看是否有一种优雅的方式来实现这一点。

（根据评论编辑整个问题。非常感谢你们。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:38:59.643

您可以使用生成器：

```
def merge(a, b):
    b_clone = b[:]

    for n in range(min(a), max(a) + 1):
        if n in a:
            yield n
        elif b_clone:
            yield b_clone.pop(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:50:27.413

我相信这涵盖了边缘情况，但是，我同意其他人的观点，似乎必须有更好的方法来做到这一点。可能值得解释您正在尝试做的事情的背景。可能有一种方法可以在没有所有这些的情况下做到这一点。

```
def merge(a, b):
    b = list(b)
    a = iter(a)
    current = 1
    for item in a:
        while item != current:
            if b:
                yield b.pop(0)
            else:
                yield item
                yield from a  # <3.3 use `for item in a: yield item` instead.
                return
            current += 1
        yield item
        current += 1 
```

这似乎根据您的规范工作：

```
>>> print(list(merge([1, 3, 4, 7, 9], [0, 0, 0])))
[1, 0, 3, 4, 0, 0, 7, 9]
>>> print(list(merge([2, 4, 5], [1, 3])))
[1, 2, 3, 4, 5] 
```

还不清楚在给定额外元素的情况下应该发生什么`b`- 这会忽略它们，但在末尾添加`yield from b`（或 <3.3 `for item in b: yield item`）会将它们作为最终元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:48:14.093

你可能最好避免一开始就进行这种合并。如果您事先知道有多少个可能的排名，您可以从包含那么多`None`s 的列表开始，并且每次占用一个空间时，使用列表项分配而不是附加来设置它。然后你的最终合并很简单：

```
def merge(a, b):
   b = iter(b)
   for i,x in a: 
       if x is None:
          a[i] = next(b) 
```

如果您愿意，可以将这个 whoe 数据结构放入一个类中，例如，这还允许您检查何时尝试覆盖占用的位置（如果这会出错）：

```
class Ranks:
    def __init__(self, size):
        self._list = [None] * size

    def __getitem__(self, position):
        return self._list[position]

    def __setitem__(self, position, val):
        if self._list[position] is None:
            raise ValueError('attempting to clobber existing rank data')
        self._list[position] = val 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T03:59:35.630

这也应该有效：

```
>>>a = [2, 3, 5, 6, 7, 9]
>>>b = [0, 0, 0]
>>>length = len(a)
>>>i = 0

>>>while (i < length):
    if a[i] != i+1:
        a.insert(i, b.pop(0))
        length += 1
    i += 1

>>>print(a)
[0, 2, 3, 0, 5, 6, 7, 0, 9] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T05:58:44.473

Thanks all, and I get this solution inspired by @jurgenreza

```
>>> a = [1, 3, 4, 7, 9]
>>> b = [0, 0, 0]
>>> for i in a:
        b.insert(i - 1, i)

>>> print b
[1, 0, 3, 4, 0, 0, 7, 9] 
```

# java - 在 Struts2 视图中显示列表

> ID：15916411
> 
> 赞同：1
> 
> 时间：2013-04-10T03:27:43.043
> 
> 标签：java, jakarta-ee, struts2

我正在使用struts2作为MVC框架，但是我遇到了一个问题，我的问题在Action中，我定义了一个名为“Company”的模型，它的定义如下：

```
class Company
{
  private String name;
  private String address;
  ...
  private List<Staff>staffs;
  ...
}

class Staff
{
   private String name;
   private int age;
   ....
} 
```

动作如下

```
class Action
{
  private Company company;
  public String execute(){

  }
} 
```

如何在视图中显示整个公司和员工信息（视图是 JSP 文件）？我在 UI 中的期望是：

```
Company info
  company name                company address...
Staff 1 info
   staff name                 staff age...
Staff 2 info
   staff name                 staff age... 
```

jsp文件怎么定义？虽然OGNL可以显示公司信息，但是员工信息呢，因为是List，个数不定

有人告诉我我可以使用迭代器，但我的要求是：除了在 UI 中显示员工信息，我还希望让员工可以编辑，例如我可能会定义“表单”如下

```
<s:form> 
    Company info: Company Name:<s:input name="company.name"/> Company Address:<s:input name="company.name"/> 
   Staff 1 info: .... 
   Staff 2 info: ... 
 <s:form> 
```

是否可以用“表格”或“输入”来定义员工信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:56:23.177

要获取公司名称和地址，只需执行

```
 <s:property value="company.name"/>
 <s:property value="company.address"/> 
```

并使用 struts 迭代器标签获取员工列表

```
<s:iterator value="company.staffs" status="stat">
   Staff <s:property value="%{#stat.index}" /> 
      <s:property value="name" />  &nbsp;  <s:property value="age" />
      </br>

</s:iterator> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:34:01.810

您可以使用 Struts2 [Iterator 标记](http://struts.apache.org/release/2.3.x/docs/iterator.html)对列表进行迭代，并在您的 JSP 页面上显示所有信息

迭代器将迭代一个值。可迭代值可以是以下任何一种：`java.util.Collection, java.util.Iterator`

有关更多详细信息，请参阅迭代器[标记示例](https://cwiki.apache.org/WW/iterator-tag-examples.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:46:06.323

您可以指向 Lists 或 Maps 的元素，并使用 IteratorStatus 对象指定它们的索引：

```
<s:property value="company.name"/>
<s:property value="company.address"/>

<s:iterator value="company.staffs" status="stat">

    <span>Staff <s:property value="%{#stat.index}" /> info: </span>

    <label>name: </label>
    <s:textfield name="company.staffs[%{#stat.index}].name" />

    <label>age: </label>
    <s:textfield name="company.staffs[%{#stat.index}].age" />

    <br/>

</s:iterator> 
```

# android - 从svn下载android项目无法使用

> ID：15916414
> 
> 赞同：0
> 
> 时间：2013-04-10T03:27:54.120
> 
> 标签：android, eclipse, svn

眼镜

系统：win7 x64 IDE：Eclipse 插件：Subclipse

我正在尝试在 SVN 服务器中共享我的 android 项目，但只有我的计算机可以使用它。当其他人在他们的计算机上下载我的项目时，他们总是有一个名为的文件夹。

我的步骤：

1.  右键我的项目

2.  团队 > 分享项目

3.  选择 SVN > 下一步

4.  选择我的svn存储库链接>使用项目名称作为文件夹名称>下一步并完成

5.  团队同步 > 忽略 bin、gen、.classpath、.project

6.  提交

当我尝试运行和构建时，我的计算机中的屏幕截图

[截图 1](https://i.imgur.com/PFM0qBa.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/J2Dqn.jpg)

当其他人下载我的项目时截图

[截图 2](https://i.imgur.com/vrWePvw.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/N1Ek5.jpg)

为什么我总是有一个类似的文件夹？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:49:40.143

下载代码时，请确保项目的路径是

> ....../SourceCode/test1/test1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:12:35.753

似乎您正在 svn repo 上创建项目的文件夹名称。然后上传，

> 只需在 svn 上共享项目而不创建“test1”文件夹。

# c# - 调用时如何在 XNA 中绘制随机字符串？

> ID：15916415
> 
> 赞同：0
> 
> 时间：2013-04-10T03:27:57.073
> 
> 标签：c#, xna

我不敢相信我被困在这个问题上，目前我的播放器代码允许玩家四处走动，它甚至允许玩家在按下 Ctrl 和 K 按钮时自杀。现在我的问题来了，当玩家自杀时，它会在角落里画出一串带有有趣语句的文字。但我不希望这是唯一的一个，我希望它根据你的自杀在 3 种不同的陈述之间交替，我不知道如何将其付诸实践，这是我的播放器代码：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using Microsoft.Xna.Framework;
    using Microsoft.Xna.Framework.Audio;
    using Microsoft.Xna.Framework.Content;
    using Microsoft.Xna.Framework.GamerServices;
    using Microsoft.Xna.Framework.Graphics;
    using Microsoft.Xna.Framework.Input;
    using Microsoft.Xna.Framework.Media;
    using Microsoft.Xna.Framework.Net;
    using Microsoft.Xna.Framework.Storage;

    namespace Teir_Tactical_2A
    {
     public class Player
     {
    public Random random;
    public Texture2D playerunarmed;
    public Texture2D playerM1911;
    public Texture2D playerM4;
    public KeyboardState keyState;
    public SpriteFont Font1;
    public KeyboardState oldKeyboardState;
    public Vector2 playerPosition;
    public SpriteBatch spriteBatch;
    public float Angle { get; set; }
    public float AngularVelocity { get; set; }
    public Vector2 playerVelocity = Vector2.One;
    public bool M1911;
    public bool M4;
    public bool player;
    public bool LMBpressed;
    public bool RMBpressed;
    public bool isplayeralive;
    public bool respawnscreen;
    float angle;

    public Player(ContentManager content, Vector2 location)
    {
        this.playerunarmed = content.Load<Texture2D>("PLAYER");
        this.playerM1911 = content.Load<Texture2D>("PLAYERM1911");
        this.playerM4 = content.Load<Texture2D>("PLAYERM4");
        playerPosition = location;
        M1911 = true;
        M4 = true;
        player = true;
        LMBpressed = false;
        random = new Random(3); 
        RMBpressed = false;
        isplayeralive = true;
        respawnscreen = false;
        Font1 = content.Load<SpriteFont>("Font1");
    }

    public void Update()
    {
        MouseState curMouse = Mouse.GetState();

        if (isplayeralive == false)
        {
            alive();
        }

        if (respawnscreen == true)
        {
            respawn();
        }

        if (M1911 == true)
        {
            armedM1911();
        }

        if (M4 == true)
        {
            armedM4();
        }
        if (player == true)
        {
            unarmed();
        }
        if (LMBpressed == true)
        {
            LMBpressedA();
        }
        if (RMBpressed == true)
        {
            RMBpressedA();
        }
        Vector2 mouseLoc = new Vector2(curMouse.X, curMouse.Y);

        Vector2 direction = mouseLoc - playerPosition;

        angle = (float)(Math.Atan2(direction.Y, direction.X));

        if (curMouse.LeftButton == ButtonState.Pressed)
        {
            LMBpressed = true;

        }
        if (curMouse.RightButton == ButtonState.Pressed)
        {
            RMBpressed = true;
        }

        keyState = Keyboard.GetState();

        if (isplayeralive == false && LMBpressed == true)
        {
            isplayeralive = true;
            respawnscreen = true;
        }

        if (keyState.IsKeyDown(Keys.LeftControl) && keyState.IsKeyDown(Keys.K))
        {
            isplayeralive = false;

        }

        if (keyState.IsKeyDown(Keys.D1))
        {

            M1911 = false;
            M4 = false;
            player = true;

        }
        if (keyState.IsKeyDown(Keys.D2))
        {
            M1911 = true;
            player = false;

        }
        if (keyState.IsKeyDown(Keys.D3))
        {
            M4 = true;
            M1911 = false;
            player = false;

        }

        if (keyState.IsKeyDown(Keys.D))
            playerPosition.X += playerVelocity.X + 1;
        if (keyState.IsKeyDown(Keys.A))
            playerPosition.X -= playerVelocity.X + 1;

        if (keyState.IsKeyDown(Keys.W))
            playerPosition.Y -= playerVelocity.Y + 1;
        if (keyState.IsKeyDown(Keys.S))
            playerPosition.Y += playerVelocity.Y + 1;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Begin();
        {

            Rectangle sourceRectangle = new Rectangle(0, 0, playerunarmed.Width, playerunarmed.Height);
            Vector2 origin = new Vector2(playerunarmed.Width / 2, playerunarmed.Height / 2);

            if (M1911 == true)
            {
                spriteBatch.Draw(playerM1911, new Rectangle((int)playerPosition.X, (int)playerPosition.Y, playerunarmed.Width, playerunarmed.Height), null, Color.White, angle + 90, new Vector2(86, 88), SpriteEffects.None, 0f);
            }

            if (respawnscreen == true)
            {
                spriteBatch.DrawString(Font1, "Looks like someone commited suicide", new Vector2(968, 52), Color.Red);
            }

            if (player == true)
            {
                spriteBatch.Draw(playerunarmed, new Rectangle((int)playerPosition.X, (int)playerPosition.Y, playerunarmed.Width, playerunarmed.Height), null, Color.White, angle + 90, new Vector2(86, 88), SpriteEffects.None, 0f);
            }
            if (M4 == true)
            {
                spriteBatch.Draw(playerM4, new Rectangle((int)playerPosition.X, (int)playerPosition.Y, playerunarmed.Width, playerunarmed.Height), null, Color.White, angle + 90, new Vector2(86, 88), SpriteEffects.None, 0f);

            }
            if (LMBpressed == true)
            {
                spriteBatch.DrawString(Font1, "LMB PRESSED (shot taken prototype)", new Vector2(1000, 22), Color.GreenYellow);
            }
            if (RMBpressed == true)
            {
                spriteBatch.DrawString(Font1, "RMB PRESSED (grenade thrown prototype)", new Vector2(968, 34), Color.Red);
            }
            if (RMBpressed == true && LMBpressed == true)
            {
                spriteBatch.DrawString(Font1, "If you are seeing this, the mouse is functioning correctly", new Vector2(810, 45), Color.Black);
            }
        }
        spriteBatch.End();

    }
    public void armedM1911()
    {
        M1911 = true;
        M4 = false;
        player = false;

    }
    public void armedM4()
    {
        M4 = true;
        M1911 = false;
        player = false;
    }
    public void unarmed()
    {
        M1911 = false;
        M4 = false;
    }
    public void LMBpressedA()
    {
        LMBpressed = false;
    }
    public void RMBpressedA()
    {
        RMBpressed = false;
    }
    public void alive()
    {
        M1911 = false;
        player = false;
        M4 = false;
    }
    public void respawn()
    {
        player = true;
    }
} 
```

}

这是我希望它在我的绘制方法中交替出现的地方。

```
 if (respawnscreen == true)
            {
                spriteBatch.DrawString(Font1, "Looks like someone commited suicide", new Vector2(968, 52), Color.Red);
            } 
```

随机究竟是如何工作的？我将如何在这里实现它？

编辑：我已经尝试实现你所说的，我得到一个错误'不能隐式地将'string'转换为'string []'这很奇怪，我认为它是我试图把它放在哪里，它去哪里了？

EDIT2：对不起，我的错字，我只是在第一次字符串测试后注意到'[]'..

Final：在玩弄了你的代码之后，我终于让它达到了我的预期，为了保持连续性，我还不得不修改几个变量。

我在构造函数中添加了这个：

```
 String suicideStr;
    public bool suicide; 
```

并将其放入 LoadContent(); 方法：

```
 suicideStr = strs[random.Next(strs.Length)]; 
```

将此布尔值添加到 Update(); 方法：

```
 if (suicide == true)
        {
            suicided();
        } 
```

然后我为其添加了变量并将其添加到自杀按钮中：

```
 if (keyState.IsKeyDown(Keys.LeftControl) && keyState.IsKeyDown(Keys.K))
        {
            isplayeralive = false;
            isplayerdead = true;
            bloodspatter = true;
            suicide = true;
        } 
```

并将其添加到 click to respawn 变量中：

```
 if (isplayeralive == false && LMBpressed == true)
        {
            isplayeralive = true;
            isplayerdead = false;
            suicide = false;
            suicideStr = strs[random.Next(strs.Length)];
        } 
```

然后，如果自杀变量等于真，我就完成了它的绘制。

我*想*我所做的是告诉游戏在玩家自杀时绘制文本，并且每次玩家点击/自杀时它都会更新字符串。这是正确的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:33:08.930

**根据@Andrew Russell 的建议编辑**

你的意思是你想为自杀玩家随机选择一个字符串？

```
String[] strs = new String[]{ "It's a good day to die!", "Oops!", "I don't wanna live!" };
Random random = new Random(); 
```

当玩家自杀时，您可能需要“挑选”一个字符串。在玩家按下自杀键后插入此行。

```
String suicideStr = strs[random.Next(str.Length)]; 
```

并修改您的代码

```
if (respawnscreen == true){
    spriteBatch.DrawString(Font1, suicideStr, new Vector2(968, 52), Color.Red);
} 
```

这个怎么样？

# spring - 由于 Spring Security 登录重定向而丢失 Google Analytics 跟踪

> ID：15916420
> 
> 赞同：1
> 
> 时间：2013-04-10T03:28:52.627
> 
> 标签：spring, spring-security, google-analytics

我有一个邮寄活动，其中所有链接都包含谷歌分析跟踪代码，例如：

> [http://example.com/account/somePage.html?utm_source=example&utm_medium=email&utm_campaign=reminder](http://example.com/account/somePage.html?utm_source=example&utm_medium=email&utm_campaign=reminder)

上下文 /account/** 受到 Spring 安全性的保护，一旦用户单击电子邮件上的链接，在实际看到 somePage.html 之前，他将被重定向到登录。这样，显示的第一页类似于 /login.do，它没有分析跟踪代码。因此，谷歌不会跟踪我的来源、媒介和活动参数。

任何想法如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:04:52.537

基于[http://support.google.com/analytics/answer/1009614?hl=en](http://support.google.com/analytics/answer/1009614?hl=en)，我更新了显示登录页面以重定向到 /login?GOOGLE_PARAMATERS 的 LoginController：

```
private static final String ALREADY_REDIRECTED = "ALREADY_REDIRECTED";
....

@RequestMapping(value = "/login", method = RequestMethod.GET)
public ModelAndView loginView(HttpServletRequest request, HttpServletResponse response){
....

Boolean alreadyRedirected = (Boolean) request.getSession().getAttribute(ALREADY_REDIRECTED);
    if (alreadyRedirected==null){
        SavedRequest savedRequest = new HttpSessionRequestCache().getRequest(request, response);
        if (savedRequest!=null){
            String source[] = savedRequest.getParameterValues("utm_source");
            if (source!=null && source.length>0){
                // we need to redirect with login instead

                String mediums[] = savedRequest.getParameterValues("utm_medium");
                String medium = mediums.length==0 ? "" : mediums[0];
                String campaigns[] = savedRequest.getParameterValues("utm_campaign");
                String campaign = campaigns.length==0 ? "" : campaigns[0];

                String redirect = "redirect:/login?utm_source=" + source[0] +  "&utm_medium=" + medium + "&utm_campaign=" + campaign;
                mav.setViewName(redirect);

                // mark not to do twice
                request.getSession().setAttribute(ALREADY_REDIRECTED, new Boolean(true));
                return mav;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:23:09.323

我们有类似的问题，并已通过下一个解决方案解决。

我们有一个通过 Ajax 的注册表单，如果一切正常，我们会在回调中自动登录用户并丢失用于漏斗可视化的 Google Analytics 跟踪代码，因为 Spring Security 会话无效并设置了一个新的 cookie。

我们在自动登录之前通过 JS 所做的调用新用户

```
_gaq.push(['_trackPageview', '/signupDone']); 
```

[https://gist.github.com/moskinson/5418938](https://gist.github.com/moskinson/5418938)

signupDone 是一个不存在的假网址。

这样 GA 接收到一个新 url 的调用被加载，我们可以跟踪漏斗！

[http://packageprogrammer.wordpress.com/2013/04/19/seguimiento-con-google-analytics-a-traves-del-login-con-spring-security/](http://packageprogrammer.wordpress.com/2013/04/19/seguimiento-con-google-analytics-a-traves-del-login-con-spring-security/)

# cuda - nvcc：错误：标识符未定义，但已定义

> ID：15916423
> 
> 赞同：1
> 
> 时间：2013-04-10T03:29:12.943
> 
> 标签：cuda, compiler-errors, nvcc

我有一个 CUDA C 代码，当我尝试编译它时，nvcc 抱怨未定义的标识符错误，但它确实退出了变量！

```
extern "C"
void vRand3f_cuda (vec3f *d_v, int n)
{

    curandState *d_states;
    CUDA_CALL (cudaMalloc ((void **)&d_states, n * sizeof (curandState)));

    dim3 gDim (1);
    dim3 bDim (n);

    set_seed<<<gDim, bDim>>> (d_states, time (NULL), n);
    vRand3f_cuda_generate<<<gDim, bDim>>> (d_v, d_states, n);

    CUDA_CALL (cudaFree (d_states));

}

__global__ void set_seed (curandState *states, unsigned long seed, int n)
{
    int idx = threadIdx.x + blockIdx.x * gridDim.x;
    if (idx >= n)
        return ;

    curand_init (seed, idx, 0, &states[idx]);

}

__global__ void vRand3f_cuda_generate (vec3f *v, curandState *states, int n)
{
    int idx = threadIdx.x + blockIdx.x * gridDim.x;
    if (idx >= n)

    curandState localS = states[idx];
    double s, x, y;
    s = 2.;

    while (s > 1.)
    {
        x = 2\. - curand_uniform_double (&localS) - 1.;
        y = 2\. - curand_uniform_double (&localS) - 1.;
        s = x * x   +   y * y;
    }

    v[idx].z = 1\. - 2\. * s;
    s = 2\. * sqrt (1\. - s);
    v[idx].x = s * x;
    v[idx].y = s * y;

    states[idx] = localS;
} 
```

我使用以下行进行编译：

```
nvcc -m64 -g -G `pkg-config --cflags glib-2.0`  -gencode arch=compute_20,code=sm_20 -gencode arch=compute_30,code=sm_30 -gencode arch=compute_35,code=sm_35 -I/Developer/NVIDIA/CUDA-5.0/include -I. -o vec3-cuda.o -c vec3-cuda.cu 
```

我得到以下信息：

> vec3-cuda.cu(58)：警告：变量“localS”已声明但从未被引用
> 
> vec3-cuda.cu(64)：错误：标识符“localS”未定义
> 
> vec3-cuda.cu(74)：错误：标识符“localS”未定义

知道这里会发生什么吗？我在 OSX 上使用 CUDA 5。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T03:39:06.363

这是错误的：

```
if (idx >= n)

curandState localS = states[idx]; 
```

你的意思可能是这样的：

```
if (idx >= n) return;

curandState localS = states[idx]; 
```

正如您所写的那样，在 if 子句中定义的变量的范围对于该 if 子句是本地的。由于您从未在 if 子句中引用它，因此您会收到第一个警告。在其他地方，当您尝试在 if 子句范围之外引用它时会出错。

# java - 我的数组列表只输出一行？

> ID：15916434
> 
> 赞同：0
> 
> 时间：2013-04-10T03:31:29.263
> 
> 标签：java

我已经添加了我的整个代码来澄清，我的问题不是缺少一个“println”，就像许多人在下面的代码中提出了我的问题一样，我要求用户输入每月投资、年利率和我然后问的年份如果他们想继续添加另一个月度投资、年利率和年数，直到他们拒绝，然后我想显示它。问题是每次他们对输入更多数据说“是”时，它应该在第二行中显示该日期，这样程序就会结束，或者他们拒绝继续，而是只在一行中显示所有内容。

```
import java.util.*;
import java.text.*;

public class FutureValueApp
{
public static void main(String[] args)
{
    // display a welcome message
    System.out.println("Welcome to the Future Value Calculator");
    System.out.println();

    ArrayList<String> FutureValueArrayList = new ArrayList<String>(4);

    // perform 1 or more calculations
    Scanner sc = new Scanner(System.in);
    String choice = "y";
    while (choice.equalsIgnoreCase("y"))
    {

        // get the input from the user
        System.out.println("DATA ENTRY");
        double monthlyInvestment = getDoubleWithinRange(sc,
            "Enter monthly investment: ", 0, 1000);
        double interestRate = getDoubleWithinRange(sc,
            "Enter yearly interest rate: ", 0, 30);
        int years = getIntWithinRange(sc,
            "Enter number of years: ", 0, 100);

        // calculate the future value
        double monthlyInterestRate = interestRate/12/100;
        int months = years * 12;
        double futureValue = calculateFutureValue(
            monthlyInvestment, monthlyInterestRate, months);

        // get the currency and percent formatters
        NumberFormat currency = NumberFormat.getCurrencyInstance();
        NumberFormat percent = NumberFormat.getPercentInstance();
        percent.setMinimumFractionDigits(1);

        // format the result as a single string
        String results =
              "Monthly investment:\t"
                  + currency.format(monthlyInvestment) + "\n"
            + "Yearly interest rate:\t"
                  + percent.format(interestRate/100) + "\n"
            + "Number of years:\t"
                  +  years + "\n"
            + "Future value:\t\t"
                  + currency.format(futureValue) + "\n";

        // print the results
        System.out.println();
        System.out.println("FORMATTED RESULTS");
        System.out.println(results);

      String monthlyInvestmentFormat = currency.format(monthlyInvestment);
      String interestRateFormat = percent.format(interestRate/100);
      String futureValueFormat = currency.format(futureValue);

      FutureValueArrayList.add(monthlyInvestmentFormat);
      FutureValueArrayList.add(interestRateFormat);
      FutureValueArrayList.add(Integer.toString(years));
      FutureValueArrayList.add(futureValueFormat);

        // see if the user wants to continue
        System.out.print("Continue? (y/n): ");
        choice = sc.next();

        System.out.println();
    }

     System.out.print("Inv/Mo.\tRate\tYears\tFuture Value\n");
     for (int i = 0; i < FutureValueArrayList.size(); i++)
      {

         System.out.print(FutureValueArrayList + "\n");

      }

     System.out.println();
}

public static double getDouble(Scanner sc, String prompt)
{
    boolean isValid = false;
    double d = 0;
    while (isValid == false)
    {
        System.out.print(prompt);
        if (sc.hasNextDouble())
        {
            d = sc.nextDouble();
            isValid = true;
        }
        else
        {
            System.out.println("Error! Invalid decimal value. Try again.");
        }
        sc.nextLine();  // discard any other data entered on the line
    }
    return d;
}

public static double getDoubleWithinRange(Scanner sc, String prompt,
double min, double max)
{
    double d = 0;
    boolean isValid = false;
    while (isValid == false)
    {
        d = getDouble(sc, prompt);
        if (d <= min)
            System.out.println(
                "Error! Number must be greater than " + min + ".");
        else if (d >= max)
            System.out.println(
                "Error! Number must be less than " + max + ".");
        else
            isValid = true;
    }
    return d;
}

public static int getInt(Scanner sc, String prompt)
{
    boolean isValidInt = false;
    int i = 0;
    while (isValidInt == false)
    {
        System.out.print(prompt);
        if (sc.hasNextInt())
        {
            i = sc.nextInt();
            isValidInt = true;
        }
        else
        {
            System.out.println("Error! Invalid integer value. Try again.");
        }
        sc.nextLine();  // discard any other data entered on the line
    }
    return i;
}

public static int getIntWithinRange(Scanner sc, String prompt,
int min, int max)
{
    int i = 0;
    boolean isValid = false;
    while (isValid == false)
    {
        i = getInt(sc, prompt);
        if (i <= min)
            System.out.println(
                "Error! Number must be greater than " + min + ".");
        else if (i >= max)
            System.out.println(
                "Error! Number must be less than " + max + ".");
        else
            isValid = true;
    }
    return i;
}

public static double calculateFutureValue(double monthlyInvestment,
double monthlyInterestRate, int months)
{
    double futureValue = 0;
    for (int i = 1; i <= months; i++)
    {
        futureValue =
            (futureValue + monthlyInvestment) *
            (1 + monthlyInterestRate);
    }
    return futureValue;
} 
```

}

我的 for 循环给了我这样的输出，粗体是当用户输入是以输入更多数据时，它应该在第二行而不是他们第一次输入数据时：

> $100.00 2.0% 2 $2,450.64 **$150.00 2.0% 2 $36,420.71**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T03:34:16.290

您在哪里使用`System.out.print()`which 将打印一些没有分隔符的 1 行`\n`。

使用`System.out.println()`which 将自动将`\n`分隔符放在字符串的末尾。

**`\n`是一个新的行分隔符。**

**`\t`是制表符分隔符。**

**编辑：**我认为您正在尝试标记每个输出。（因为第一个打印语句）

如果是这样，您不能使用 for 循环（技术上）。主要是因为循环不知道哪个标签去哪个元素/索引。

如果您知道哪个元素将存储哪些数据，只需手动标记它们

> System.out.println("速率：" + FutureValueArrayList.get(i))
> 
> // i 是存储速率值的索引`

**编辑：**关于你的评论。

你需要调查[`Formatter`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)

**示例代码**- 这将打印一个列宽为 20 个字符的表格。

```
Formatter formatter = new Formatter();
    System.out.println(formatter.format("%20s %20s %20s %20s %20s", "Title*", "Title*", "Title*", "Title*", "Title*"));

    for (int i = 0; i < 10; i++) {
        formatter = new Formatter();
        String rowData = "info" + i;
        System.out.println(formatter.format("%20s %20s %20s %20s %20s", rowData, rowData, rowData, rowData, rowData));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:32:27.597

您需要用于`println()`在新行中显示每个条目。它将打印您的条目，然后在末尾插入一个行分隔符以终止该行。

```
System.out.println(FutureValueArray); 
```

否则，您可以修改`print()`方法参数以使其在新行上打印。像这样的东西： -

```
System.out.print(FutureValueArray + "\n"); 
```

请注意，`\t`表示水平制表符，而`\n`表示换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T03:35:56.593

采用

```
for (int i = 0; i < FutureValueArrayList.size(); i++)

      {

         String FutureValueArray = FutureValueArrayList.get(i);

         System.out.println(FutureValueArray + "\n");

      } 
```

println 自动在末尾添加换行符

"/n" 也可以用作换行符

# javascript - 在对象内部创建可以连续使用的属性

> ID：15916436
> 
> 赞同：5
> 
> 时间：2013-04-10T03:31:35.463
> 
> 标签：javascript

我是那种喜欢做很多项目的人，特别是如果它只涉及 JavaScript，因为这是我的强项。

我想到了一个有趣的想法。用 JavaScript 编写小段 CSS。然后这些 CSS 片段可以在 Blob 中使用或以其他方式实现到网页中。

`Most of the time, I do projects just for FUN and for build up in experience.`

让我们更多地了解我们正在使用的东西。这些 JavaScript 样式表之一可能如下所示：

```
var sheet = {
    "h1": {
        "font-size": "24px",
            "color": "blue",
        children: {
            "a": {
                "font-size": "15px"
            }
        }
    },
    "a": {
        color: "red"
    }
}; 
```

这将返回：

`h1{font-size:24px;color:blue}h1 a{font-size:15px}a{color:red}`

注意元素`children`中的属性。`h1`

这是我的嵌套方式，制作`h1 a`.

然而，我的问题是，我怎样才能进行连续嵌套，以便最终得到类似的结果：

“h1 div 跨度 a”

这意味着每个嵌套的孩子都需要能够使用该`children`属性。

我到目前为止的脚本如下（属于变量`sheet`）。

```
var to = "";
for (var el in sheet) {
    var props = [];
    for (var prop in sheet[el]) {
        if(prop != "children") {
            props.push(prop + ":" + sheet[el][prop]);
        }
    }
    to += el + "{" + props.join(";") + "}";
    //----
    if (sheet[el].children) {
        for (var el2 in sheet[el].children) {
            var props = [];
            for (var prop in sheet[el].children[el2]) {
                props.push(prop + ":" + sheet[el].children[el2][prop]);
            }
            to += el + " " + el2 + "{" + props.join(";") + "}"
        }
    }
    //----
} 
```

注释之间的部分是我用于 1 次嵌套的代码。

我不确定这将是多么困难。但我知道这可能并不容易。

我的完整示例在这里：http: [//jsfiddle.net/shawn31313/2tfnz/1](http://jsfiddle.net/shawn31313/2tfnz/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:49:40.087

你可以很容易地让你的代码递归：

```
function buildCSS(stub, node){
    var to = "";
    for (var el in node) {
        var rule = stub + " " + el;
        var props = [];
        for (var prop in node[el]) {          
            if(prop != "children") {
                props.push(prop + ":" + node[el][prop]);
            }
        }
        to += rule + "{" + props.join(";") + "}";
        if (node[el].children) {
            to += buildCSS(rule, node[el].children);
        }
    }

    return to;
}

var to = buildCSS("", sheet); 
```

这绝对可以清理，但它说明了这个想法。

[http://jsfiddle.net/2tfnz/3/](http://jsfiddle.net/2tfnz/3/)

* * *

您还可以考虑调整对象结构以使代码更简洁：

```
var sheet = {
    "h1": {
        rules: {
            "font-size": "24px",
            "color": "blue"
        },
        children: {
            "a": {
                rules: {
                    "font-size": "15px"
                }
            }
        }
    },
    "a": {
        rules: {
            color: "red"
        }
    }
}; 
```

这样，您就不需要区分已命名`children`的属性和未命名的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:55:36.610

[http://jsfiddle.net/2tfnz/6/](http://jsfiddle.net/2tfnz/6/)

将代码放在一个方法中，这样它就可以在找到孩子时递归地调用自己。这一个允许`children`和`descendant`属性并输出格式良好的 CSS。

```
var sheet = {
    "h1": {
        "font-size": "24px",
        "color": "blue",
        children: {
            "a": {
                "font-size": "15px",
                descendants: {
                    "span": {
                        "font-weight": "bold"
                    }
                }
            }
        }
    },
    "a": {
        color: "red"
    }
};

function toCSS(obj, pre) {
    var str = '', pre = pre || '';

    for (var selector in obj) {
        str += pre + selector + ' {\n';

        var rules = obj[selector];
        for (var ruleKey in rules) {
            if (['descendants', 'children'].indexOf(ruleKey) > -1) continue;
            str += '  ' + ruleKey + ': ' + rules[ruleKey] + ';\n';
        }

        str += '}\n\n';

        if ('descendants' in rules) str += toCSS(rules.descendants, pre + selector + ' ');
        if ('children' in rules) str += toCSS(rules.children, pre + selector + ' > ');
    }

    return str;
}

console.log(toCSS(sheet)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:19:44.480

我喜欢你们所有的代码。但是，我告诉了让我的代码递归的想法。

所以我做了：

```
 var to = "";
        for (var el in sheet) {
            var props = [];
            var nest = [el];
            var nestLookUp = {
                    "children": ">", 
                    "desendents": ""
            };
            var nests = /children|desendents/;
            var addNest = function (shh) {
                for (var found in nestLookUp) {
                    if (shh.hasOwnProperty(found)) {
                        for (var el2 in shh[found]) {
                            var props = [];
                            nest.push(nestLookUp[found]);
                            nest.push(el2);
                            for (var prop in shh[found][el2]) {
                                if (!prop.match(nests)) {
                                    props.push(prop + ":" + shh[found][el2][prop]);
                                }
                            }
                            if (props.length > 0) {
                                to += nest.join(" ").replace(/\s{2}/, " ") + "{" + props.join(";") + "}";
                            }
                            addNest(shh[found][el2]);
                            nest.pop();
                            nest.pop();
                        };
                    }
                }
            };
            for (var prop in sheet[el]) {
                if (prop != "children") {
                    props.push(prop + ":" + sheet[el][prop]);
                }
            }
            to += el + "{" + props.join(";") + "}";
            addNest(sheet[el]);
        } 
```

@Trevor - 你的`descendants`, 想法很好:)

我的代码比 Trevors 长一点，但我个人更易于管理。（他的 39 行是 20）

我通常喜欢编写自己的代码，因为我通常了解代码的工作原理。

哈，看着你们的代码，我有点困惑。

# reporting - 随着时间的推移准确平均数据

> ID：15916444
> 
> 赞同：2
> 
> 时间：2013-04-10T03:32:52.360
> 
> 标签：reporting, average, data-warehouse

我正在寻找一种方法来快速获得准确的平均库存以用于报告目的。

* * *

背景：

我正在寻找一种方法来确定库存项目的毛利率投资回报率 (GMROI)，其中库存水平不是随时间变化的（即某些项目可能缺货然后库存过剩，而其他项目将保持不变并且永远不会缺货股票）

```
GMROI = GrossProfit/AverageInvenotry 
```

说超过1年

这些需要即时获得，批处理不是一种选择。

* * *

问题：

鉴于使用的关系数据库仅具有当前库存水平。我可以计算回历史股票说：

```
HistoricStock=CurrentStock-Purchase+Sales 
```

但我真的想要一个**平均库存**，而不仅仅是一个时间点。

我可以计算出一系列点然后平均它们，但我担心计算开销（在较小程度上是准确性），因为我想即时执行此操作。我可以创建一个数据仓库并将数据存入银行，但我担心会超出数据库的大小（例如 StockHolding Per Barcode Per Location Per Day 2 年）

从内存中，库存/时间图的积分除以时间间隔将得出平均库存，但是如何在没有公式或大量小时间带的情况下整合现实世界的数据？

* * *

任何想法或参考将不胜感激

谢谢 B。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:09:09.617

一般来说，这似乎是开发库存事实表的好案例，但具体如何实现它在很大程度上取决于您的数据和源系统。

如果你还没有，我会得到[数据仓库工具包](https://rads.stackoverflow.com/amzn/click/com/0471200247)；第三章是关于库存数据管理。正如您所提到的，您可以创建一个库存事实表并从源系统加载库存水平的每日快照，然后您可以轻松地从数据仓库计算您需要的任何平均值，而不是从源系统。

您提到您担心数据量，尽管您没有说明每天要添加多少行。但是数据仓库可以设计为使用表分区或类似技术处理非常大的表，如果由于某种原因计算需要很长时间，您还可以在添加每天的数据后计算“运行平均值”。

# solr - solr 3.6 可以支持中文吗？

> ID：15916446
> 
> 赞同：0
> 
> 时间：2013-04-10T03:32:58.097
> 
> 标签：solr, localization, full-text-search

我发现它支持很多语言，但支持中文。

**更新** 我可以使用 Luke 搜索我的数据，请看截图 ![在此处输入图像描述](https://i.stack.imgur.com/9M2TX.png) 试过这个：添加

```
 <fieldType name="text_chinese" class="solr.TextField">
         <analyzer type="index">
        <tokenizer class="solr.CJKTokenizerFactory"/>
        </analyzer>
    </fieldType> 
```

到schema.xml，也试过

```
 <fieldType name="text_chinese" class="solr.TextField">
      <analyzer class="org.apache.lucene.analysis.cn.ChineseAnalyzer"/>
   </fieldType> 
```

和

```
 <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.CJKTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

但这些都不起作用。我想知道“ `<fieldType name=`”的格式到底是什么，是text_chinese还是text_cn还是text_zh_cn？但我已经尝试过所有这些格式。

顺便说一句，我可以使用 engnlish 属性搜索我的文档。而且我无法通过在我的网络浏览器 UI 中输入“name:something”进行搜索，我遇到了异常：

```
org.springframework.dao.InvalidDataAccessApiUsageException: Bad Request

Bad Request

request: http://localhost:8180/solr/select?q=name:*name:something* or description:*name:something* or type:*name:something* or mac_address:*name:something* or uri:*name:something* or attrs:*name:something*&start=0&rows=0&wt=javabin&version=2; nested exception is org.apache.solr.common.SolrException: Bad Request

Bad Request

request: http://localhost:8180/solr/select?q=name:*name:something* or description:*name:something* or type:*name:something* or mac_address:*name:something* or uri:*name:something* or attrs:*name:something*&start=0&rows=0&wt=javabin&version=2
    at org.springframework.data.solr.core.SolrExceptionTranslator.translateExceptionIfPossible(SolrExceptionTranslator.java:58)
    at org.springframework.data.solr.core.SolrTemplate.execute(SolrTemplate.java:106)
    at org.springframework.data.solr.core.SolrTemplate.count(SolrTemplate.java:126)
    at org.springframework.data.solr.repository.query.AbstractSolrQuery$CollectionExecution.count(AbstractSolrQuery.java:92)
    at org.springframework.data.solr.repository.query.AbstractSolrQuery$CollectionExecution.execute(AbstractSolrQuery.java:87)
    at org.springframework.data.solr.repository.query.AbstractSolrQuery.execute(AbstractSolrQuery.java:52)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:313)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 
```

这是春季数据解决方案错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:51:13.850

[SmartChineseAnalyzer](http://lucene.apache.org/core/4_0_0/analyzers-smartcn/org/apache/lucene/analysis/cn/smart/SmartChineseAnalyzer.html)似乎做了一个典型的分析器实现来索引中文文本。

[smartcn API](http://lucene.apache.org/core/4_0_0/analyzers-smartcn/overview-summary.html)中提供了更多工具，[CJKTokenizer](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/cjk/CJKTokenizer.html)是一个很好的中文分词器（以及日文和韩文，因此得名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T08:51:18.460

```
<fieldType name="wc_text" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.ChineseTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="0" preserveOriginal="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>

    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.ChineseTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0" preserveOriginal="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
</fieldType 
```

对中文字符使用上述过滤器工厂，并在应用程序端使用 UTF-8 编码。

# redis - 从 bash 运行时来自 redis-cli 的（空列表或设置）

> ID：15916447
> 
> 赞同：5
> 
> 时间：2013-04-10T03:32:59.140
> 
> 标签：redis

我的本地 redis 服务器中存储了 3 个虚拟密钥。

```
redis 127.0.0.1:6379> keys *
1) "key2"
2) "key3"
3) "key1" 
```

当我尝试从 bash 获取相同的结果时，它返回 "(empty list or set)" 。为什么？

```
$ redis-cli keys *
(empty list or set) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T03:36:14.123

哇。只记得 '*' 在 bash 中具有特殊含义。所以

```
redis-cli keys \* 
```

作品。

**注意**：不确定社区是否会拒绝投票，但将这个问题留给一些可能像我一样被困住的可怜的灵魂......

# java - 无法在 Android 中创建偏好活动

> ID：15916453
> 
> 赞同：0
> 
> 时间：2013-04-10T03:33:37.307
> 
> 标签：java, android, xml, preferences, deprecated

我正在尝试在 android 中进行首选项活动。发生的情况是您启动应用程序并在应用程序中按下手机上的菜单或设置按钮。首选项应该属于您可以选择的类别。问题是当我点击首选项时应用程序崩溃。有人可以修复并重新粘贴我的代码。

```
import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Prefs extends PreferenceActivity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.prefs);
}

} 
```

我知道我正在使用不推荐使用的方法，我尝试访问 android.developers 网站但找不到答案

这是我的 XML：

```
<EditTextPreference 
    android:title="EditText"
    android:key="name"
    android:summary="Enter Your Name"
    />

<CheckBoxPreference 
    android:title="CheckBox"
    android:defaultValue="true"
    android:key="checkbox"
    android:summary="check this box"
    />

<ListPreference 
    android:title="list"
    android:key="list"
    android:summary="This is a list to choose from"
    android:entries="@+array/list"
    android:entryValues="@+array/lvalues"
    ></ListPreference> 
```

# memory-management - 添加删除控制器时，AngularJS浏览器内存不断攀升

> ID：15916460
> 
> 赞同：1
> 
> 时间：2013-04-10T03:34:10.063
> 
> 标签：memory-management, memory-leaks, angularjs, deep-linking

我使用 Angular js 和 routeProvider 创建了一个 webapp。我没有在 ng-view 中加载部分内容，但我劫持了 routParam 更改，它导致创建我自己的对象，指示应用程序的哪些部分处于活动状态，请参见下文：

```
lrApp.config(function ($routeProvider) {
$routeProvider
    .when('/',{
        redirectTo:'/share'
    })
    .when('/:action',{
        controller: "viewController",
        template: ' '
    })
    .when('/:action/:section',{
        controller: "viewController",
        template: ' '
    })
    .when('/:action/:section/:subsection',{
        controller: "viewController",
        template: ' '
    })
    .otherwise({
        redirectTo:'/'
    });
 }); 
```

模板的空格并在您的正文中包含一个空格会触发 routeParams 更改然后我调用 viewController 包含在正文中并包含一个全局可访问的对象，即*ng-show="url.section == 'contacts'"*

所以我使用这个全局对象来 ng-show 或 ng-switch 或 ui-如果应用程序的某些部分在适用时就位。这也允许我创建 3 级深度链接。

我正在为应用程序的每个主要部分创建一个工厂，其中包含一个空对象，然后将增长的数据存储在工厂内的每个控制器中，这样当通过 ng-switch 重新加载控制器时，数据仍然存在，我不这样做不必再得到它...

**我的问题/问题**

这是存储我的数据的适当方式吗？或者我应该将它与**cacheFactory**耦合并将该对象存储在**cacheFactory**中，然后在控制器中返回**cacheFactory**？

将数据存储在 cacheFactory 和仅将数据存储在工厂中并将其放在控制器之外有什么区别......我很困惑？

当我这样做并使用 ng-switch 切换到不同的部分时，信息会从 DOM 中取出，当我切换回来时，数据会被放回，因为它仍存储在工厂中，但它为我的选项卡显示的内存在即使我没有加载任何新数据，每次我切换回来时，chrome 都会不断攀升......我做错了什么？

这是我如何构建应用程序的粗略示例...我构建的[测试应用程序](http://plnkr.co/edit/beAm3WRomMafKzx1SoSZ?p=preview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T08:52:44.670

当时我对 angularjs 的了解还不够，但我的第一个问题是我正在从 DOM 中反渲染和渲染大块数据，然后再返回，我认为内存泄漏实际上只是 DOM 内存爬升是因为 Angular 模板引擎不得不重新渲染模板。

# google-app-engine - GAE 插件或 GAE appcfg.cmd 不适用于 --enable_jar_splitting 参数

> ID：15916462
> 
> 赞同：5
> 
> 时间：2013-04-10T03:34:21.633
> 
> 标签：google-app-engine

我有这个错误信息：

> 准备部署：在以下位置创建暂存目录：'C:\Users\leet\AppData\Local\Temp\appcfg4768292050846213939.tmp' 扫描 jsp 文件。编译jsp文件。扫描本地磁盘上的文件。java.io.IOException: Jar C:\Users\leet\AppData\Local\Temp\appcfg4768292050846213939.tmp\WEB-INF\lib\appengine-api-1.0-sdk-1.7.7.jar 太大。考虑使用 --enable_jar_splitting。

我发出了这样的命令，但它不适用于--enable_jar_splitting。

> "C:\Program Files\Java\jdk1.7.0_17\bin\java.exe" -Xmx1100m -cp "%~dp0..\lib\appengine-tools-api.jar" com.google.appengine.tools.admin .AppCfg --enable_jar_splitting -e user@domain.com update "C:\myfolder\myproject\war"

任何意见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:51:09.303

Java App Engine 1.7.7.1 SDK 已发布以解决此 Windows 特定问题。Google Eclipse 插件以及 Google App Engine Maven 工件和插件已更新（仅使用 1.7.7.1 版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:32:54.060

i solved the issue by splitting the "appengine-api-1.0-sdk-1.7.7.jar" file my own.

in case anyone else want to know how to do that, follow these steps

1) unzip "appengine-api-1.0-sdk-1.7.7.jar" file from 7z.

2) balance them into 2 folders (each about 15mb) regardless any structure.

3) name the first folder as "appengine-api-1.0-sdk-1.7.7-1" and second folder as "appengine-api-1.0-sdk-1.7.7-2".

4) make sure you have jdk installed. e.g. "C:\Program Files\Java\jdk1.7.0_17\bin". set it to environment so you can run the file from that bin folder.

5) IMPORTANT: you must go into that first "appengine-api-1.0-sdk-1.7.7-1" folder and not at the parent folder of those folders.

6) launch cmd.exe and type "jar cf appengine-api-1.0-sdk-1.7.7-1.jar *" for the first archive.

7) do it again the same for the second archive (repeat step 5 and step 6).

8) go to \war\web-inf\libs folder, delete the existing appengine-api-1.0-sdk-1.7.7.jar.

9) copy and paste the appengine-api-1.0-sdk-1.7.7-1.jar and appengine-api-1.0-sdk-1.7.7-2.jar into \war\web-inf\libs folder.

10) now deploy it. it should work like charms!

EDIT: Spelling correction.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:52:47.570

to solve the library error message, you have to do this:

1) open your windows explorer and locate it to your eclipse folder. e.g. ".\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.7.7\appengine-java-sdk-1.7.7\lib\user".

2) you will then see a file called "appengine-api-1.0-sdk-1.7.7.jar", rename it to "appengine-api-1.0-sdk-1.7.7.original". (just don't delete as you need in future)

3) copy that 2 files you created earlier - "appengine-api-1.0-sdk-1.7.7-1.jar" and "appengine-api-1.0-sdk-1.7.7-2.jar" and paste into this folder.

4) switch it eclipse ide, clean the project and rebuild it. then, the error message will go away.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T03:28:39.573

使用该指令：

```
To clarify, we're going to release a minor update for 1.7.7\. For the
meantime, you can re-jar the file as follows:

cd to the working directory
$ jar xf somewhere\appengine-java-sdk-1.7.7\lib\user\
appengine-api-1.0-sdk-1.7.7.**jar
$ jar cfm somewhere\appengine-api-1.0-sdk-1.7.7.**jar META-INF/MANIFEST.MF *
and replace the old jar with the newly created one. 
```

从[http://www.mail-archive.com/google-appengine@googlegroups.com/msg67954.html](http://www.mail-archive.com/google-appengine@googlegroups.com/msg67954.html) 和来自解决方案的消息here，我能够使它像这样工作：

打开命令行并进入 jar.exe 文件所在的 JAVA 安装的 bin 目录

```
cd "C:\Program Files\Java\jdk1.7.0_17\bin\" 
```

然后，您需要在计算机的某个位置找到“appengine-api-1.0-sdk-1.7.7.jar”文件。它位于 Eclipse 项目的 \war\WEB-INF\lib 文件夹以及 Eclipse 安装的“plugins”文件夹中的 2 个位置（不包括临时目录）。正是在那里：`\plugins\com.google.appengine.eclipse.sdkbundle_1.7.7\appengine-java-sdk-1.7.7\lib\` 您只需要这两条路径之一。

现在在命令行中，只需键入：

```
jar xf "C:\whatever-folder-your-eclipse-is-in\plugins\com.google.appengine.eclipse.sdkbundle_1.7.7\appengine-java-sdk-1.7.7\lib\user\appengine-api-1.0-sdk-1.7.7.jar" 
```

接着

```
jar cfm "C:\whatever-folder-your-eclipse-is-in\plugins\com.google.appengine.eclipse.sdkbundle_1.7.7\appengine-java-sdk-1.7.7\lib\user\appengine-api-1.0-sdk-1.7.7.jar" META-INF/MANIFEST.MF 
```

现在，如果您转到该文件夹​​并检查 .jar 文件，它现在应该是 11 mb 而不是 30 的东西。现在您需要复制这个并替换 \war\WEB-INF\lib\ 的 webapp 文件夹中的相同 jar，以便名为“appengine-api-1.0-sdk-1.7.7.jar”的两个 jar 有 11 mb尺寸。

现在错误应该消失了，你不必拆分任何东西。

# arrays - java中的数据类型和数组

> ID：15916466
> 
> 赞同：0
> 
> 时间：2013-04-10T03:34:42.993
> 
> 标签：arrays, multidimensional-array

完全困惑如何做到这一点。我想要做的是在输出中放置最小或最大的城市。我的理解是您不能在方法中将字符串与另一种数据类型一起放入。世界上我怎么才能把名字和最低温度相匹配？

假设我想要 3 个城市： 然后
我想制作数组 3：
然后我将添加以下城市，（阿兰塔、纽约、里士满）
城市温度为（42.2、98.8、-12.4）

最小值是 -12.4
最大值是 98.8
我有，如何将存储在数组 [2] 中的里士满字符串链接到存储在数组 [2] 中的温度双精度值？任何帮助深表感谢。

```
import javax.swing.JOptionPane;
import java.util.Scanner;
import java.lang.Math;

public class Ex9
{
public static void main(String[] args)
{
    String message ="";
    double min = 0, max = 0, avg = 0;
    int counter = 1;

    int numberOfCities = Integer.parseInt(JOptionPane.showInputDialog(null, "How many cities would you like to enter?"));
    String[] nameOfCities = new String[numberOfCities];
    double[] temperatureOfCities = new double[numberOfCities];
    for (int i = 0; i < nameOfCities.length; i++)
    {

        nameOfCities[i] = JOptionPane.showInputDialog(null, "Please enter the name of  city " +counter+" :");
        temperatureOfCities[i] = Double.parseDouble(JOptionPane.showInputDialog(null, "Please enter the current temperature of the city " + counter +" :"));
        message += "City name " + nameOfCities[i] + ".\n"
        + "Temperature of city " + temperatureOfCities[i] + " is degrees\n";
        counter++;

    }//end numberOfCities loop

    if(
    JOptionPane.showMessageDialog(null, message + "\nThe average temperature is " +findAvg(temperatureOfCities)+ "\n[Name of city] has the lowest temperature, which is " + findMin(temperatureOfCities) + "\n[Name of city] has the highest temperature, which is " + findMax(temperatureOfCities));

}//end main

public static double findAvg(double[] temperatureOfCities)
{
    double sum =0;
    for(int i=0;i<temperatureOfCities.length;i++)
    {
        sum += temperatureOfCities[i];
    }
    sum = sum/temperatureOfCities.length;
    return sum;

}//end findAvg

public static double findMin(double[] temperatureOfCities)
{
    double min=0;
    for(int i =0; i <temperatureOfCities.length;i++)
    {
        if (temperatureOfCities[i] <= temperatureOfCities[0])
        {
            min = temperatureOfCities[i];
        }
    }//end for loop
    return min;
}//end findMin

public static double findMax(double[] temperatureOfCities)
{
    double max=0;
    for(int i =0; i <temperatureOfCities.length;i++)
    {
        if (temperatureOfCities[i] >= temperatureOfCities[0])
        {
            max = temperatureOfCities[i];
        }
    }//end for loop
return max;
}//end findMax

}//end program 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:39:48.640

这里有两种主要方法：

1）程序方法 - 只需传递两个数组而不是一个数组。如果它们保持同步就没有问题 - 只需为两者使用相同的索引。

2) 面向对象的方法 - 使用双温度和字符串 cityName 定义类 TemperatureReading。然后就可以做一个TemperatureReading[]数组传过来，数据自然就关联起来了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:46:19.403

更改您的 findMin、findAvg 和 findMax 方法以返回复合测量对象。

```
class Measurement {
  final double temperature;
  final String cityName;

  Measurment(String cityName, double temperature)
  {
    this.temperature = temperature;
    this.cityName = cityName;
  }
} 
```

更新后的方法可能如下所示：

```
public static Measurement findMax(String[] nameOfCities, double[] temperatureOfCities) {
  double maxTemp=0;
  String maxName=null;
  for(int i =0; i <temperatureOfCities.length;i++)
  {
      if (temperatureOfCities[i] >= temperatureOfCities[0])
      {
          maxTemp = temperatureOfCities[i];
          maxName = nameOfCities[i];
      }
  } //end for loop
  return new Measurement(maxTemp, maxName);
} 
```

现在您可以使用如下结果：

```
Measurement maxMeasurement = findMax(nameOfCities, temperatureOfCities);
System.out.println(maxMeasurement.cityName + "has a temperature of " + maxMeasurement.temperature); 
```

findMin 和 findAvg 也是如此。

# emacs - 如何防止 JFrame/EXIT_ON_CLOSE 杀死 nrepl 服务器？

> ID：15916467
> 
> 赞同：1
> 
> 时间：2013-04-10T03:35:00.793
> 
> 标签：emacs, clojure, nrepl

**编辑**使用 DISPOSE_ON_CLOSE 不是我所追求的，因为它们我遇到了“逆”问题：当我关闭 JFrame 时，REPL 保持活动状态（这很好），但是当从 REPL 外部启动时它*也*保持活动状态（这很糟糕）。

我正在 Clojure 中编写一个 Swing 应用程序，我发现从 REPL（ Emacs 下的*nrepl*）和 REPL 外部（例如通过使用`lein run`或运行独立的*.jar*）测试东西都很方便。

当我不从 REPL 启动我的 Swing 应用程序时，我发现将默认关闭操作设置为 EXIT_ON_CLOSE 很方便。例如：

```
 (.setDefaultCloseOperation jframe JFrame/EXIT_ON_CLOSE) 
```

所以我可以点击 JFrame 的关闭按钮并完成我的应用程序。

但是显然（我可能对此有误，但我认为我没有看到任何东西）从 REPL 运行时这是有问题的：一旦我单击 JFrame 的关闭按钮，我显然会杀死*nrepl*服务器并必须重新打开一个新的*nrepl* _

知道我需要从*nrepl*和任何 REPL 外部进行测试，我该如何解决我的问题？

我是否应该“检测到”我从 REPL 运行，然后不将默认关闭操作设置为退出？或者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:38:17.203

`JFrame.EXIT_ON_CLOSE``System.exit()`通过调用which[终止当前正在运行的 Java 虚拟机](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exit%28int%29)退出应用程序。由于您的应用程序和 REPL 在同一个 JVM 中运行（因为您已经从 REPL 启动了您的应用程序），这意味着 REPL 也将被终止。

相反，请尝试使用：

```
(.setDefaultCloseOperation jframe JFrame/DISPOSE_ON_CLOSE) 
```

当您单击其关闭按钮时，这还将隐藏（并处置）JFrame，但保持您的 JVM - 以及您的 REPL - 运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:47:05.533

启动 REPL 时使用环境变量，并根据该变量选择是在关闭时处理还是在关闭时退出。

独立启动时，变量检查将失败，因此您可以在关闭时退出。

编辑：

在外壳中：

```
export REPL_MODE=true ; lein repl 
```

在 clojure 代码中：

```
(def repl-mode (System/getenv "REPL_MODE"))
(if (not (nil? repl-mode))
     ; in repl, set to dispose on close
     ; in standalone mode, set to exit on close 
```

# android - Android 创建新进程而不是返回后台活动

> ID：15916474
> 
> 赞同：0
> 
> 时间：2013-04-10T03:35:53.220
> 
> 标签：android

我有一个简单的活动，可以启动和停止记录 GPS 数据的后台服务。然后我通过单击主页按钮将该过程置于后台。

当我通过单击它的图标返回应用程序时，它会创建一个新进程而不是恢复到原始活动。如果我然后关闭此过程（通过单击后退按钮），它会调用 onDestroy() 然后恢复到我原来的活动屏幕，显示该服务仍在录制。这对于应用程序的预期用途非常不便。

我的理解是应该从活动堆栈中弹出原始活动，而不是创建一个新进程。

下面是我的活动代码。我将不胜感激任何人对此的解释。

```
public class MainActivity extends Activity {

    GPSTracker gps;
    private static final String TAG = "MEDIA";
    private String tv;
    private boolean record = false;
    private   TextView status = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (savedInstanceState != null) 
            record = savedInstanceState.getBoolean("Status");
        Toast.makeText(getApplicationContext(),"onCreate",Toast.LENGTH_LONG).show();

        setContentView(R.layout.activity_main);
    }

    public void StartRecord(View v) {
        Button btn = (Button) findViewById(R.id.record);
        status = (TextView) findViewById(R.id.status);

        if (record == false) {

            btn.setText("Stop Record");
            status.setText("... Recording ...");

            record = true;

            ComponentName comp = new ComponentName(getPackageName(), LogService.class.getName());
            ComponentName service = startService(new Intent().setComponent(comp));
        }
        else {
            record = false;
            status.setText("... Standing By ...");
            stopService(new Intent(MainActivity.this,LogService.class));
            btn.setText("Start Record");
        }

    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
        super.onSaveInstanceState(savedInstanceState);
        Toast.makeText(getApplicationContext(), "onSaveInstanceState",Toast.LENGTH_LONG).show();
        savedInstanceState.putBoolean("Status", record);
        // etc.
    }
    @Override
    public void onResume() {
        super.onResume();  // Always call the superclass method first
        Button btn = (Button) findViewById(R.id.record);
        Toast.makeText(getApplicationContext(), "onResume",Toast.LENGTH_LONG).show();
        if (record == true) 
            btn.setText("Stop Record");
        else

            btn.setText("Start Record");

    }

    @Override
    public void onStart() {
        super.onStart();  // Always call the superclass method first
        Toast.makeText(getApplicationContext(), "onStart",Toast.LENGTH_LONG).show();

    }

    @Override
    public void onRestart() {
        super.onRestart();  // Always call the superclass method first
        Toast.makeText(getApplicationContext(), "onRestart",Toast.LENGTH_LONG).show();

    }

    @Override
    public void onDestroy() {
        super.onDestroy();  // Always call the superclass method first
        Toast.makeText(getApplicationContext(), "onDestroy",Toast.LENGTH_LONG).show();

    }
    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        // Restore UI state from the savedInstanceState.
        // This bundle has also been passed to onCreate.
        Toast.makeText(getApplicationContext(), "onRestoreInstanceState",Toast.LENGTH_LONG).show();
        record = savedInstanceState.getBoolean("Status");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:58:59.030

试试这个并覆盖下面的功能，它应该在你的情况下工作正常。

onResume() -> 设置记录=真

onPause() -> 设置记录=假

# excel - Excel中的分隔符

> ID：15916481
> 
> 赞同：0
> 
> 时间：2013-04-10T03:37:19.523
> 
> 标签：excel, csv, delimiter

当我从 csv 导入一堆数据时，我在为 excel 找到唯一分隔符时遇到问题。我想要“^;” 成为唯一的分隔符。但是，Excel 不够聪明，无法知道我只想要“^;” 作为分隔符不与单个“^”和/或单个“;”结合 甚至我检查了“分号”和“其他”（即^）以及选择“将连续分隔符作为一个”。有什么办法可以在 Excel 中实现“^;” 将是它必须寻找的唯一唯一分隔符。或者这只是我们需要在 MS Excel 中接受的痛苦现实？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:08:47.787

据我所知，使用 Excel 导入时无法使用多字符分隔符。

如果您的数据集可能，我建议使用查找和替换将所有实例更改`"^;"`为更常见的分隔符格式。完成此操作后，您应该能够轻松导入 Excel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T12:57:08.883

Openoffice 允许您在将文件保存为 .csv 时指定分隔字符串。

# actionscript-3 - as3：一个声道上的静音按钮和音量滑块

> ID：15916487
> 
> 赞同：0
> 
> 时间：2013-04-10T03:38:06.970
> 
> 标签：actionscript-3, audio, flash-cs6

在这个问题上我真的用尽了我所有的知识，所以我希望我的同龄人能够帮助我？

我正在构建一个混音器，它有五个轨道，每个轨道都有一个音量滑块和静音按钮。静音按钮而不是每个轨道的开始/停止按钮的原因是，无论何时引入样本，所有样本都将同步。该应用程序具有全局启动、停止和暂停按钮，它们都正常工作，但我无法让音量滑块和静音按钮在单个声道上协同工作。如果我注释掉另一个功能，音量滑块和静音按钮都可以工作，但是当两者都在播放时，只有音量滑块工作。我猜测存在冲突，因为我有两个使用 soundTransform 对象/类的单独变量，但也许您可以对这个难题有所了解？这是我的一首曲目的代码...任何帮助。

```
var mySound1:Sound1 = new Sound1();
var myChannel1:SoundChannel = new SoundChannel();
var volumeAdjust1:SoundTransform = new SoundTransform();
volumeAdjust1.volume = 0;

mute_btn1.stop();
mute_btn1.addEventListener(MouseEvent.CLICK,togglemute_btn1);

var Mute1:Boolean = false;

function togglemute_btn1(event:MouseEvent)
{
    if (Mute1)
    {
        mute_btn1.gotoAndStop(1);
        volumeAdjust1.volume = 1;
        myChannel1.soundTransform = volumeAdjust1;
        Mute1 = false;
    }
    else
    {
        mute_btn1.gotoAndStop(2)
        volumeAdjust1.volume = 0;
        myChannel1.soundTransform = volumeAdjust1;
        Mute1 = true;
    }

}

/*if the section below is commented out then the mute_btn1 works fine
otherwise the volume slider functions are dominent*/
var dragging1:Boolean = false;
var mySliderLength1:uint = 300;
var boundingBox1:Rectangle = new Rectangle(0,0,0,mySliderLength1);
slider_mc1.knob_mc1.addEventListener(MouseEvent.MOUSE_DOWN, dragKnob1);
stage.addEventListener(MouseEvent.MOUSE_UP, releaseKnob1);
slider_mc1.knob_mc1.buttonMode = true;

function dragKnob1(myEvent:Event):void
{
    slider_mc1.knob_mc1.startDrag(false, boundingBox1);
    dragging1 = true;
    slider_mc1.knob_mc1.addEventListener(Event.ENTER_FRAME, adjustVolume1);
}

function releaseKnob1(myEvent:Event):void
{
    if (dragging1)
    {
        slider_mc1.knob_mc1.stopDrag();
        dragging1 = false;
    }
}

function adjustVolume1(myEvent:Event):void
{
    var myVolume1:Number = slider_mc1.knob_mc1.y / mySliderLength1;
    var myTransform1:SoundTransform = new SoundTransform(myVolume1);

    if (myChannel1!=null)
    {
        myChannel1.soundTransform = myTransform1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:40:07.277

我相信您的问题是每次单击鼠标时都会不断添加 Enter_Frame 侦听器，但它永远不会被删除。因此，即使您松开旋钮，adjustVolume1 函数仍会被调用（在调用静音切换函数后，这会破坏静音函数调用在帧上所做的任何事情）。

因此，鉴于当前状态，我认为我将如何处理这个问题是将 Enter_Frame 侦听器添加到 dragKnob 函数之外，并且在 adjustVolume1 处理程序中只需检查 dragging1 是否为真，否则就返回。

```
slider_mc1.knob_mc1.addEventListener(Event.ENTER_FRAME, adjustVolume1);

function dragKnob1(myEvent:Event):void
{
...
}

function adjustVolume1(myEvent:Event):void
{
   if(!dragging1)
       return;
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:18:27.753

你应该在你`Mute1`的那个监听器中检查你的变量，如果静音，那么音量=0，否则计算音量。确实，请在`stopDrag()`调用点删除您的输入帧侦听器。

```
function dragKnob1(myEvent:Event):void
{
    slider_mc1.knob_mc1.startDrag(false, boundingBox1);
    dragging1 = true;
    slider_mc1.knob_mc1.addEventListener(Event.ENTER_FRAME, adjustVolume1);
}

function releaseKnob1(myEvent:Event):void
{
    if (dragging1)
    {
        slider_mc1.knob_mc1.stopDrag();
        dragging1 = false;
        slider_mc1.knob_mc1.removeEventListener(Event.ENTER_FRAME, adjustVolume1);
        // ^ this line added
    }
}

function adjustVolume1(myEvent:Event):void
{
    if (Mute1) return;
    // ^ and this line added
    var myVolume1:Number = slider_mc1.knob_mc1.y / mySliderLength1;
    var myTransform1:SoundTransform = new SoundTransform(myVolume1);

    if (myChannel1!=null)
    {
        myChannel1.soundTransform = myTransform1;
    }
} 
```

# excel - 将excel VBA中另存为对话框上的“取消”文本更改为“审阅”

> ID：15916488
> 
> 赞同：1
> 
> 时间：2013-04-10T03:38:14.437
> 
> 标签：excel, vba

有没有办法将excel VBA中另存为对话框上的“取消”文本更改为“审阅”？

我不知道如何更改默认的 Yes, No, Cancel 设置。

将感谢您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:03:34.877

不

为此，您需要：

1.  `Workbook`使用事件拦截 SaveAs
2.  `Save`如果用户正在使用而不是退出`SaveAs`
3.  提供您自己的自定义用户表单`SaveAs`（`UserForm1.Show`下面作为未设计表单的示例行）

请注意，`Events`应禁用以防止您的 UserForm Save 重新调用`Workbook_BeforeSave`事件

全部完成 - 我会保留默认值！

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
'exit on Save
If Not SaveAsUI Then Exit Sub
Application.EnableEvents = False
Cancel = True
UserForm1.Show
Application.EnableEvents = True
End Sub 
```

# xml - 来自hadoop的xml数据的可视化

> ID：15916491
> 
> 赞同：0
> 
> 时间：2013-04-10T03:38:36.393
> 
> 标签：xml, hadoop, hdfs

在我的 HDFS 中，我将进行 xml 处理。即处理一个 xml 文件并提取 2 个节点。这将是我绘制图形的 x 和 y。

我该怎么做。从 hdfs 输出生成图表。我想使用 Rapid miner。我怎么能做到这一点......

要不然

有没有办法可视化我的 hadoop 数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:56:31.910

HDFS 的工作方式是将文件拆分为预定义大小的块。它就像做一个

```
split -b 64M file.xml 
```

并获取每个块并将其保存到一个救助数据节点。现在，如果您的 HDFS 的块大小为 64MB 且文件大小为 1 GB，您的文件将被分成 16 个块并保存在不同的位置。因此，mapreduce 作业将无法从 xml 文件块中理解，因为 xml 的结构不同于简单的 csv 或 tsv 文件。据我所知，如果 xml 文件大于 hdfs 块大小，则无法通过 hdfs 处理 xml 文件。

# ruby - 应用程序因 TypeError 崩溃 - 不能将 nil 强制转换为 Float

> ID：15916492
> 
> 赞同：0
> 
> 时间：2013-04-10T03:38:47.983
> 
> 标签：ruby, heroku, sinatra

我对编程很陌生，只是试图将我的第一个项目放到网上，却遇到了内部服务器错误。我什至不知道从哪里开始，我在 Sinatra 上运行 Ruby 并将其托管在 Heroku

[http://clearli.herokuapp.com/](http://clearli.herokuapp.com/)

这是我对服务器的 lass 请求的 ruby​​ 日志，希望我正确地发布了这个问题。任何帮助将非常感激

```
2013-04-10T03:30:14.733305+00:00 app[web.1]: TypeError - nil can't be coerced into Float:
2013-04-10T03:30:14.733305+00:00 app[web.1]:    /app/app.rb:35:in `-'
2013-04-10T03:30:14.733305+00:00 app[web.1]:    /app/app.rb:35:in `block in <top (required)>'
2013-04-10T03:30:14.733305+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1415:in `call'
2013-04-10T03:30:14.733305+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1415:in `block in compile!'
2013-04-10T03:30:14.733305+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:944:in `[]'
2013-04-10T03:30:14.733305+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:944:in `block (3 levels) in route!'
2013-04-10T03:30:14.733305+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:960:in `route_eval'
2013-04-10T03:30:14.733305+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:944:in `block (2 levels) in route!'
2013-04-10T03:30:14.733305+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:981:in `block in process_route'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:979:in `catch'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:979:in `process_route'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:943:in `block in route!'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:942:in `each'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:942:in `route!'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1053:in `block in dispatch!'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1035:in `block in invoke'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1035:in `catch'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1035:in `invoke'
2013-04-10T03:30:14.733614+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1050:in `dispatch!'
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:878:in `block in call!'
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1035:in `block in invoke'
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1035:in `catch'
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1035:in `invoke'
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:878:in `call!'
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:864:in `call'
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.5.0/lib/rack/protection/xss_header.rb:18:in `call'
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.5.0/lib/rack/protection/path_traversal.rb:16:in `call'
2013-04-10T03:30:14.741803+00:00 heroku[router]: at=info method=GET path=/ host=clearli.herokuapp.com fwd="69.159.113.216" dyno=web.1 connect=1ms service=1474ms status=500 bytes=30
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.5.0/lib/rack/protection/json_csrf.rb:18:in `call'
2013-04-10T03:30:14.733865+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.5.0/lib/rack/protection/base.rb:49:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.5.0/lib/rack/protection/base.rb:49:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.5.0/lib/rack/protection/frame_options.rb:31:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/logger.rb:15:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/commonlogger.rb:33:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:209:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:202:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:172:in `call'
2013-04-10T03:30:14.734121+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1947:in `call'
2013-04-10T03:30:14.734355+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1610:in `block in call'
2013-04-10T03:30:14.734355+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1693:in `synchronize'
2013-04-10T03:30:14.734355+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.4.2/lib/sinatra/base.rb:1610:in `call'
2013-04-10T03:30:14.734355+00:00 app[web.1]:    /app/vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
2013-04-10T03:30:14.734355+00:00 app[web.1]:    /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-04-10T03:30:14.734355+00:00 app[web.1]:    /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-04-10T03:30:14.734355+00:00 app[web.1]:    /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-04-10T03:30:14.734355+00:00 app[web.1]: 69.159.113.216 - - [10/Apr/2013 03:30:14] "GET / HTTP/1.1" 500 30 1.4439
2013-04-10T03:30:16.891604+00:00 heroku[router]: at=info method=GET path=/ host=clearli.herokuapp.com fwd="69.159.113.216" dyno=web.1 connect=1ms service=1268ms status=500 bytes=30 
```

应用程序.rb

```
require 'rubygems'
require 'sinatra'
require 'haml'
require 'hashie'
require 'forecast_io'
require 'shotgun'
require 'geocoder'

Geocoder.configure(:timeout => 60)

Forecast::IO.configure do |configuration|
  configuration.api_key = 'fe6fa0b5700a6134723fabdb8a08b296'
end

get '/' do

    result = request.location
    @lat = result.latitude
    @long = result.longitude

    city = request.location.city
    @city = city

    forecast = Forecast::IO.forecast(@lat, @long)
    @current_temp = forecast.currently.temperature
    @current_wind = (forecast.currently.windSpeed)
    @current_icon = forecast.currently.icon
    @current_clouds = forecast.currently.cloudCover

    yesterday = Forecast::IO.forecast(@lat, @long, time: (Time.new.to_i - 86400))
    @yesterday_temp = yesterday.currently.temperature
    @yesterday_wind = (yesterday.currently.windSpeed)
    @yesterday_clouds = yesterday.currently.cloudCover

    @temp_difference = (@current_temp - @yesterday_temp)
    @temp_difference_abs = @temp_difference.abs 
    @wind_difference = (((@current_wind - @yesterday_wind)/@yesterday_wind)*100)
    @cloud_difference = (((@current_clouds - @yesterday_clouds)/@yesterday_clouds)*100)

    @temp_description = "warmer"
        if @temp_difference < 0
            @temp_description = "colder"
        end

    @wind_description = "you dont need to worry about the wind"
        if (@wind_difference >= 0 && @wind_difference <= 50)
            @wind_description = "a bit windier"
        elsif (@wind_difference > 50 && @wind_difference <= 100)
            @wind_description = "noticeably windier"
        elsif (@wind_difference > 100)
            @wind_description = "much more windy"
        elsif (@wind_difference <= 0 && @wind_difference >= -50)
            @wind_description = "a bit less windy"
        elsif (@wind_difference < -50 && @wind_difference >= -100)
            @wind_description = "noticeably less windy"
        elsif (@wind_difference < -100)
            @wind_description = "way less windy"
        end

    @cloud_description = "no brighter or cloudier than"
        if (@cloud_difference >= 0 && @cloud_difference <= 25)
            @cloud_description = "a bit cloudier than"
        elsif (@cloud_difference > 25 && @cloud_difference <= 75)
            @cloud_description = "much more cloudy than"
        elsif (@cloud_difference > 75)
            @cloud_description = "disgustingly cloudy compared to"
        elsif (@cloud_difference < 0 && @cloud_difference >= -25)
            @cloud_description = "a bit clearer than"
        elsif (@cloud_difference < -25 && @cloud_difference >= -75)
            @cloud_description = "way clearer than"
        elsif (@cloud_difference < -75)
            @cloud_description = "incredibly clear compared to" 
        end

    @unit = "degrees"
    if @temp_difference == 1 || @temp_difference == -1
        @unit = "degree"
    end 
    haml :index
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:04:05.773

第 35 行`app.rb`状态：

```
@temp_difference = (@current_temp - @yesterday_temp) 
```

该错误意味着这些临时文件之一是`nil`. AFAIU，在本地机器上你的项目运行没有任何问题，对吧？因此，问题在于获得预测。您会重新尝试获取预测，直到它最终产生？实际上我不知道`Forecast::IO#forecast`应该返回什么，但它似乎部分正常（因为没有错误获取像`yesterday.currently.temperature`, 这样的成员）虽然没有充满正确的数据（因为返回的温度是`nil`。）

希望能帮助到你。

# android - 第一个选项卡在 webview 中成功打开 url，但第二个选项卡在浏览器中打开 url

> ID：15916497
> 
> 赞同：0
> 
> 时间：2013-04-10T03:39:42.957
> 
> 标签：android

我有这个带有两个选项卡的应用程序。当我访问布局时，第一个选项卡成功打开，网页加载在 web 视图上作为选项卡的内容。但是当我尝试访问第二个选项卡时，它不会将 webview 显示为内容；因此它指向浏览器打开网页。我在主要活动中的意图访问的两个类都有相同的代码。这是我所拥有的：

TabbedActivity.java

 `````
import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TabHost;

public class TabbedActivity extends TabActivity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    TabHost host=getTabHost();

    host.addTab(host.newTabSpec("g")
    .setIndicator("Google")
    .setContent(new Intent(this, WebActivity2.class)));
    host.addTab(host.newTabSpec("y")
    .setIndicator("Yahoo")
    .setContent(new Intent(this, WebActivity3.class)));
    }
} 
````  `这是我用作意图的两个类：

WebActivity2.java

 `````
import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

    @SuppressLint("SetJavaScriptEnabled")
    public class WebActivity2 extends Activity {
        WebView browser;

        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);

            WebView browser = new WebView(this);
            setContentView(browser);
            browser.loadUrl("http://www.google.com");
        }
    } 
````  `WebActivity3.java

 `````
import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

    @SuppressLint("SetJavaScriptEnabled")               
    public class WebActivity3 extends Activity {    
        WebView browser;

        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);

            WebView browser = new WebView(this);
            setContentView(browser);
            browser.loadUrl("https://m.facebook.com/ama.manilacampus");
        }
    } 
````  `我认为错误不在我的 xml 布局中，因为它在第一个选项卡中运行良好。这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:02:59.763

在加载 facebook 链接时，webview 被重定向。由于重定向，默认情况下您的 webview 将启动浏览器活动。您可以通过使用以下代码来更改该行为：

```
browser.setWebViewClient(new WebViewClient() {
    //to avoid browser prompting for actions when clicking on URLs
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);  
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:47:05.737

我认为您的页面可能正在重定向。请参阅此相关问题以阻止`WebView`打开浏览器应用程序。您需要实现 a`WebViewClient`并返回`true`in `shouldOverrideUrlLoading`。``````

# html - HTML中列表的反向编号

> ID：15916499
> 
> 赞同：4
> 
> 时间：2013-04-10T03:40:30.977
> 
> 标签：html, css

我想知道如何使用 css/html 创建一个反向列表，例如

```
5\. 红色
4\. 绿色
3\. 蓝色
2\. 黄色
1\. 黑色

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T03:41:12.963

您可以通过使用带有 HTML 的简单保留属性来做到这一点，请访问以下链接以获取完整说明

```
<ol reversed>  
    <li>Red</li>  
    <li>Green</li>  
    <li>Blue</li>  
    <li>Yellow</li>  
    <li>Black</li>  
</ol> 
```

见小提琴 [http://jsfiddle.net/sYSEJ/](http://jsfiddle.net/sYSEJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T08:35:25.397

您可以使用 CSS 来执行此操作，但您需要指定起始值。这仍然比`value`在每个列表元素上填写属性更容易。

例如，有 4 个列表项：

```
ol {
  counter-reset: num 5;
  list-style-type: none;
}

li:before {
  counter-increment: num -1;
  content: counters(num, ".") " ";
} 
```

这适用于 IE8 及更高版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:45:57.643

```
<ol reversed="reversed">
  <li>Red</li>
  <li>Green</li>
  <li>Blue</li>
  <li>Yellow</li>
  <li>Black</li>
</ol> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:08:08.700

HTML5 CR 具有`reversed`用于此类目的的属性，但这是一个错误的解决方案，因为它使渲染依赖于浏览器。它已经在浏览器中缓慢实现，例如 IE 甚至在版本 10 中也不支持它。此外，它（可以说）是展示性的，向 HTML 添加新的展示性属性是违反大势所趋的。

一些替代方案：

1.  为每个元素添加`value`属性。`li`这可以在生成页面服务器端或使用客户端 JavaScript 时完成。
2.  使用一个`ul`元素，隐藏项目符号 ( `list-style-type: none`)，并将数字放入`li`内容中（可能以编程方式，如上所示）。为什么`ul`而不是`ol`？因为当 CSS 关闭时你不想要双重编号。
3.  如上所述，但在 CSS 中使用生成的内容和计数器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T05:24:23.650

您可以使用标签`reversed`的属性。`ol`但它[不支持](https://developer.mozilla.org/en-US/docs/HTML/Element/ol#Browser_compatibility)IE和Opera。

*   如果您想要一个跨浏览器支持解决方案，那么您需要查看 javascript。
*   或者，为什么不使用其他元素，如`div`or`span`并使用 javascript 动态分配数字？

如果您选择 javascript 而不是严格使用 HTML 和 CSS，那么有很多选择。

一个例子：（*使用javascript*）

```
<ol id="olTag">.............. 
```

* * *

```
ChangeNumbering();    
function ChangeNumbering() {
    var list = document.getElementById("olTag");
    var liTags = list.getElementsByTagName("li");
    var length = liTags.length;
    for (var i = length; i > 0; i--) {
        liTags[length - i].value = i;
    }
} 
```

**[JSFIDDLE](http://jsfiddle.net/sYSEJ/4/)**

***旁注***：`Value`属性`li`在 HTML4 中已弃用，但在 HTML5 中[再次引入。](https://developer.mozilla.org/en-US/docs/HTML/Element/li#value)所以，当然它仍然是 [跨浏览器](https://developer.mozilla.org/en-US/docs/HTML/Element/li#Browser_compatibility)。

# wpf - 如何将 wpf 组合框绑定到 DataTable - 但不显示重复值

> ID：15916500
> 
> 赞同：0
> 
> 时间：2013-04-10T03:40:49.430
> 
> 标签：wpf, binding, combobox, datatable

弄清楚这一点有些麻烦。所以我有一个简单的组合框，我将它绑定到代码隐藏中的现有 DataTable，如下所示：

```
roomCombo.ItemsSource = ((IListSource) myDataTable).GetList();
roomCombo.DisplayMemberPath = "Number"; 
```

组合框显示了我在数字列中的所有内容，当然包括重复项。我正在寻找一种仅显示独特价值的方法..

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:59:53.480

我找到了一个很好的方法来做到这一点：

```
DataView view = new DataView(myDataTAble);
DataTable distinctValues = view.ToTable(true, columnName); 
```

# java - Java Map vs Array（Temp）排序的最后一个索引

> ID：15916508
> 
> 赞同：1
> 
> 时间：2013-04-10T03:41:14.417
> 
> 标签：java, arrays, sorting, map, hashmap

我看过类似的问题，详细介绍了 Map 的排序和原始数据类型数组的排序，但没有问题直接详细说明 Java Map 的一次性排序与原始数据类型数组 ([]) 之间的区别。

`Primary note*`我知道“TreeMap”是 Java 中 Map 的排序版本（按键），但我不知道 TreeMap 如何对键进行排序的“幕后”有多少（在添加数据时，或在添加数据完成后）？

`Primary note 2*`Dijkstra 的算法`in this case`不是一个精确的实现。我们只是在大小为 M 个节点的图 G 中找到加权边的最短路径。这意味着邻接矩阵（格式见下文）的大小为 M x M。这是`not`一个 SMART 实现。几乎就像你能得到的基线一样……抱歉造成混乱！

* * *

我们得到了一个邻接矩阵，在以下示例中，元素彼此相关（“连接”）：

```
0,1,5   // 0 is connected to 1, and the weight of the edge is 5
0,2,7   // 0 is connected to 2, and the weight of the edge is 7
0,3,8   // 0 is connected to 3, and the weight of the edge is 8
1,2,10  // 1 is connected to 2, and the weight of the edge is 10
1,3,7   // 1 is connected to 3, and the weight of the edge is 7
2,3,3   // 2 is connected to 3, and the weight of the edge is 3 
```

* * *

但不要介意输入，只要假设我们有一个值矩阵来操作。

我们正在考虑将所有可能的路径存储在“最短路径”算法中（我相信 SO 上 75% 或更多的人都知道 Dijkstra 的算法）。这是家庭作业，而是一个实施问题，而不是“为我解决这个问题”。

`ASSUME`矩阵的大小为`very large`（大小 M x M），可能大于`50x50`大小。这将导致`[50-1]!/2 = 1.52 × 10^64`结果列表中的结果假设我们的算法足够聪明，可以挑选出重复项并且找不到重复路径的长度（事实并非如此，因为我们是图论和 Java 的菜鸟，所以请不要建议任何算法以避免重复...）。

* * *

我的朋友说，对 List 中 int[n] 的索引进行临时排序（使用临时变量），其中 int[n] 是`last index`并且`value of the shortest path`（ALGORITHM_1）可能比`key`Map 是的TreeMap（ALGORITHM_2）更快`value of the shortest path`. _

我们正在讨论在尝试找到所有`lengths`最短路径时哪种实现会更快。我们可以将它存储为每个路径的最后一个索引（有一个 int[]，其中最后一个元素是最短路径的值（总和）（数组中的所有元素）（ALGORITHM_1），或者我们可以将该总和存储为地图的 KEY (ALGORITHM_2)。

因为这是一个`shortest path algorithm`（虽然不是很好......），我们需要按长度（即图中每条边的总和）对每条路径的结果进行排序，以便找到最短路径。

* * *

所以真正的问题是：对结果进行排序会更快`ONLY ONE TIME`吗？通过 Map.sort() 算法（内置在 Java 标准库中）或通过创建一个临时变量来保存每个 int[] 中最新“长度”的值？例如：

```
myMap.sort(); // Unless TreeMap in Java does 'behind=the-scenes' sorting on keys...
myMap.get(0); // This would return the first element of the map, which is the shortest path 
```

或者

```
int temp = myList.get(0)[m]; // Store a temp variable that is the 'shortest path'
for( int[] i in myList<int[]>) {
    if (temp > myList.get(i)[m]) { // Check if the current path is shorter than the previous
        temp = myList.get(i)[m]; // Replace temp if current path is shorter
    }
} 
```

* * *

`Note`我还没有真正测试过实现，也没有检查过我自己的 Java 语法，所以我不知道这些语句是否正确声明。这只是一个理论问题。哪个跑得更快？这是我学习 Java 的第三年，我不知道 HashMap 中使用的底层数据结构，也不知道这两种实现的大 O 表示法。

也许了解 Java 标准的人可以描述在 HashMap 与（原始数据类型）[] 中使用了哪种数据结构或实现，以及在`ONE-TIME-ONLY`某种结构中运行时间的差异可能是什么。

我希望这个调查是有意义的，我感谢任何花时间回答我问题的人；我一直很感激像你们这样慷慨的人为帮助教育新手所付出的时间和精力！

问候，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:55:32.853

可能没有必要对数据进行排序以找到最短路径。相反，您可以遍历数据并跟踪您遇到的最短路径。

假设数据存储在 Data 对象数组中， data.pathLength 给出路径长度，

```
Data[] data; // array of data
Data shortest = data[0]; // initialize shortest variable
for(int i = 1; i < data.length; i++) {
    if(data[i].pathLength < shortest.pathLength)
        shortest = data[i];
} 
```

也就是说，TreeMap 是一棵[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)，它是平衡二叉树的一种形式。与标准二叉树不同，平衡二叉树将旋转其分支以确保其近似平衡，从而确保 log(n) 查找和插入。红黑树确保最长分支不超过最短分支长度的两倍；[AVL 树](http://en.wikipedia.org/wiki/AVL_tree)是具有更严格限制的平衡二叉树。长话短说，TreeMap 将在 n*log(n) 时间内对其数据进行排序（每次插入的 log(n)，乘以 n 个数据点）。假设您使用的是 Mergesort 或 Quicksort 或 Heapsort 等（与 Bubblesort 或其他 n^2 排序算法相反），您的一次性数组排序还将在 n*log(n) 时间内对其数据进行排序。 [使用比较排序你不能比 n*log(n) 做得更好](http://en.wikipedia.org/wiki/Comparison_sort)；顺便说一句，您可以使用像[基数排序](https://en.wikipedia.org/wiki/Radix_sort)这样的转换排序，它的 O(n) 很大，但是转换排序通常会占用内存并且表现出较差的缓存行为，因此您通常最好使用 n*log 之一(n) 比较排序。

由于 TreeMap 和您的自定义排序都是 n*log(n)，这意味着任何一个都没有太大的理论优势，所以只需使用更容易实现的那个。然而，TreeMap 的复杂数据结构并不是免费的，因此您的自定义排序算法可能会表现出稍微更好的性能，例如可能是 2 倍；与使用 TreeMap 相比，这可能不值得实现自定义排序的复杂性，特别是对于一次性排序，但这是您的决定。如果您想尝试提高程序的性能，那么请实现一种适合并行化的排序算法（如 Mergesort），并看看当您将排序任务拆分到多个线程中时会得到多少改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:01:54.730

如果您想要**最短**路径，则不需要排序。只需在完成每条路径时跟踪最短路径，并在遇到较短路径时更新最短路径。这最终会给你一个 O(n)，其中 n 是路径的数量。无论如何，您实际上无法存储 10^64 条路径，因此需要对结果集进行一些截断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:11:12.397

```
 how much about the 'behind-the-scenes' of how TreeMap sorts the keys (either while data   
 is being added, or after the data is FINISHED being added)? 
```

[TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)使用 RedBlack 树算法（BST 的一种变体），其中操作、`containsKey`和操作需要 O(log(n)) 时间，这是非常好的。正如 TreeMap 定义（在[链接](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)中）解释的那样，每次添加元素后，键都会被排序。排序将花费 O(nlog(n))`get``put``remove`

我不确定您为什么要比较 Map 类型 - 它使用键、值对与 Array。您已经提到过使用最短路径的长度作为 TreeMap 中的键，但是您将什么作为值？如果您只想存储“路径长度”，我建议将它们放入数组中并使用[Arrays.Sort()](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)对它们进行排序，这也将使用不同的算法 Dual-Pivot Quicksort 在 O(nlog(n)) 中排序。

希望这可以帮助！

# php - preg_match_all() 中的撇号给我带来了问题

> ID：15916510
> 
> 赞同：0
> 
> 时间：2013-04-10T03:41:21.793
> 
> 标签：php, preg-match, preg-match-all, apostrophe

所以我有这段代码不会很好玩。

```
preg_match_all("/(\{\[)([\w-\d\s\.\|']*)(\]\})/i",$replace_text, $match); 
```

它*应该*做的是在我的替换文本中允许一个撇号。所以在我的文本中，如果我有“{[SPIN--they are|they're]}”，它应该返回“它们是”或“它们是”。但相反，它什么也不做，并吐出整个 spintax 代码，就像我在上面键入的那样。

唯一不起作用的情况是替换文本有撇号。它在其他任何地方都能完美运行。两天来一直在尝试解决这个问题，我正要把我的键盘扔到我的显示器上。

我的项目做了很多事情，在指定替换文本之前必须有 {[SPIN-- 和 ]} 右括号。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:44:42.027

# javascript - 如何选择一个 div 并显示另一个具有更多关于该 div 的描述的 div？

> ID：15916511
> 
> 赞同：0
> 
> 时间：2013-04-10T03:41:23.850
> 
> 标签：javascript, jquery

嗨，我是 jquery 的新手，在 javascript 中无处可去，但无论如何我试图创建这个轮播，您可以在其中单击列表中的任何项目并在左侧 div 上显示有关该项目的更多信息。

这是预览： ![Web 部件屏幕截图](https://i.stack.imgur.com/3YSfv.png)

I've already created the carousel on the right part but im stuck on what to use for displaying the left part when specific item is selected can i do it with any jquery plugin or do i need to deep dive in javascript?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:02:37.080

假设您有：

```
<div id="carousel">

    <div id="details">      
      <div>Details 1</div>
      <div>Details 2</div>
      <div>Details 3</div>      
    </div>

    <div id="info">
      <div>info 1</div>
      <div>info 2</div>
      <div>info 3</div>
    </div>

</div> 
```

`**[LIVE DEMO](http://jsbin.com/azaper/1/edit)**`

```
var $det = $('#details > div');
$det.eq(0).show();

$('#info > div').click(function(){

  var idx = $(this).index();
  $det.hide().eq( idx ).fadeTo(500, 1);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:15:52.837

您可以使用以下示例

HMTL

```
<div id="slidercontent">      
  <div>Details 1</div>
  <div>Details 2</div>
  <div>Details 3</div>      
</div>

<div id="pager">
  <div>pager 1</div>
  <div>pager 2</div>
  <div>pager 3</div>
</div> 
```

jQuery

```
//Hidding the slidercontent
    $('#slidercontent div').hide();

    //Displaying first slidercontent
    $('#slidercontent div').eq(0).show();

    $('#pager div').click(function(){
        var idx = $(this).index();
        $('#slidercontent div').hide().eq( idx ).fadeTo(500, 1);
        $('#pager div').removeClass('active');
        $(this).addClass('active');

        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:00:28.203

将单击事件绑定到轮播列表项，单击时，向您的服务器发出 ajax 调用并检索 html 或 json 并将其显示在左侧 div 中。

像这样的东西可能会起作用

```
$("#carousel > li").click(function() {
    alert($(this).attr("value"));
    //$.post("url.html", { fruit: $(this).attr("value") }, function(data) {
    //    $("#left").html("<span>" + $(this).attr("value") + "</span>" + data);
    //}
}); 
```

[jsfiddler](http://jsfiddle.net/qbpuv/)

# assembly - 使用 QEMU 和 ARM 半托管获得输入？

> ID：15916514
> 
> 赞同：4
> 
> 时间：2013-04-10T03:41:39.653
> 
> 标签：assembly, arm, qemu

对于 ARM 架构，我们使用指令进行*系统*调用。`SVC`我的参考是以下[ARM 的*什么是半主机？*](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0471c/Bgbjjgij.html). 特别是，选择任何版本，选择 Arm Compiler Toolchain Developing Software ...，然后选择 Semihosting，以查看可用的系统调用号。

想要定义一个保留in 寄存器的`getChar()`例程。根据文档，调用时必须为 0，退出后包含读取的字符。因此有人认为，`char``r0``r1``r0`

```
mov r1,#0
mov r0,#7
svc 123456 
```

应该是必不可少的成分。但是，程序不等待输入。我也可以肯定地说，寄存器`r0`在退出后总是包含值 0。有什么想法吗？我怀疑问题在于理解*控制台*在文档中的含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:48:08.640

来自 qemu 1.4.0 源：（文件`target-arm/arm-semi.c`，第 303-305 行）

```
case TARGET_SYS_READC:
   /* XXX: Read from debug console. Not implemented.  */
    return 0; 
```

如果您真的想使用 qemu 的半主机模式并从“控制台”读取，我建议您使用 SYS_READ 的缓冲区大小为 1。

# meteor - 既然 Meteor 0.6.0+ 支持 npm 包，Meteorite 还相关吗？

> ID：15916515
> 
> 赞同：14
> 
> 时间：2013-04-10T03:41:52.357
> 
> 标签：meteor, npm, meteorite

由于 Meteor 0.6.0+ 直接支持 npm 包，Meteorite 是否仍然相关，使用它是否有任何优点/缺点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T13:54:39.867

陨石肯定仍然具有相关性，流星团队最近的谈话表明它最终将被折叠成流星本身。

Meteorite 不仅仅是 NPM，它还采用客户端 3rd 方库并指定它们如何集成到流星应用程序中。在这方面，它的用途与 yeoman/bower 相同。第三方客户端库，如 x-editable、sugar.js、moment.js 等并不真正属于 NPM，但您也不应该手动将它们合并到您的流星项目中。查看来自流星团队的评论：[https ://github.com/meteor/meteor/pull/516#issuecomment-12919473](https://github.com/meteor/meteor/pull/516#issuecomment-12919473)

Meteorite 不提供 NPM 的全部功能。仅使用流星，您不能只在应用程序中需要一个 NPM 包并使用它，即使在 0.6.0+ 中，您仍然必须制作一个包和一个 api 包装器。如果你想使用某个 NPM 并且它已经被打包并在陨石上共享，那实际上将通过陨石包提供一个 NPM“代理”。喜欢这个包[https://atmosphere.meteor.com/package/ncp](https://atmosphere.meteor.com/package/ncp)

我建议使用陨石来获得超越陨石本身的能力。但是，请注意，这是一个变化很大的领域，因此您可能不得不在短期内重新设计/调整您的项目。IMO，如果您构建的不仅仅是简单的应用程序，您肯定会需要陨石，以便于合并 3rd 方库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T05:49:10.073

陨石在这一点上仍然是相关的。即使流星支持 NPM 包，也没有社区 repo 可以从 ( [http://atmosphere.meteor.com](http://atmosphere.meteor.com) )添加包

即使现在可以添加 NPM 模块，它们仍然需要与流星一起使用。

Meteor 代码使用光纤来允许同步代码运行，因此每个正在使用的 NPM 模块仍然需要一个包来让它在流星中使用，这可以使其更易于使用（通过允许在项目中使用光纤代码），只需进行少量编辑。目前，这些软件包除了大气回购之外没有其他社区可以去。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-15T14:06:27.343

现在您可以完全访问 NPM。

做就是了`meteor add meteorhacks:npm`

见我的文章：[完整的 NPM 集成到 Meteor](http://meteorhacks.com/complete-npm-integration-for-meteor.html)

# c# - 数组字典到单个数组

> ID：15916516
> 
> 赞同：0
> 
> 时间：2013-04-10T03:42:18.703
> 
> 标签：c#, arrays, linq, dictionary

我似乎无法找到答案的简单问题：

在 C# 中，如何获取 Dictionary< TKey, TValue[] > 并使其成为 TValue[] 数组 - 将字典中的所有值放入单个数组中？

我尝试过使用 LINQ 进行试验，但找不到解决方案，可能比我想象的要容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T03:45:20.183

您可以[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)从 LINQ 使用：

```
 var array = dic.SelectMany(p => p.Value).ToArray(); 
```

# jquery - 引导选项卡动态内容

> ID：15916522
> 
> 赞同：2
> 
> 时间：2013-04-10T03:42:47.863
> 
> 标签：jquery, ajax, twitter-bootstrap, tabs, event-handling

我正在过渡到 jquery 1.9 并使用 .on，过去我过于依赖 .live()，当然生活很棒，现在事情再次看起来非常复杂。

我正在尝试将动态内容加载到一些引导选项卡中。但是使用 .on 时，我无法弄清楚在显示 #ticketnotes 时如何触发 ajax 调用。

html如下：

```
<div class="tabbable ticket_tabs">
    <ul class="nav nav-tabs" id="tickettabs">
        <li class="active">
            <a href="#ticketreplies" data-toggle="tab">Replies</a>
        </li>
        <li >
            <a class="tabtickets" href="#ticketnotes" data-toggle="tab">Ticket Notes</a>
        </li>
         <li>
            <a href="#timetrackticket" data-toggle="tab">Time Track</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="ticketreplies">
            $body
            $replyForm
        </div>
        <div class="tab-pane" id="ticketnotes">
            <div class="well">
                <div class="loader" style="display:none;">
            </div>
        </div>
        $replyForm
    </div>
    <div class="tab-pane" id="timetrackticket">
        <div class="well">time track info</div>
    </div>
</div> 
```

加载页面时，“票证回复”已经存在，但鉴于我希望如何将加载时间保持在最低限度，我宁愿单独加载所有相关数据，查看票证并不一定意味着有人要去浏览笔记，因此无需立即加载。

我的最后一次尝试看起来像：

```
$('#tickettabs').on('show', '.tabtickets', function(){
    if($('#ticketnotes').is(":visible")){
        alert("hi");
    }
}); 
```

不用说，它从来没有打过招呼。

如果 Firefox 中的条件正常运行，则运行完全相同。所以我非常有信心问题在于我如何尝试绑定事件处理程序。

我提前感谢你帮助我挽救了我的理智:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:54:42.133

这是因为当 show 事件被触发时，浏览器可能没有时间重新绘制 dom。

一个可能的解决方案是使用延迟为 0 的超时函数。

```
$('#tickettabs').on('show', '.tabtickets', function(e){
  setTimeout(function(){
    if($('#ticketnotes').is(":visible")){
        alert("hi");
    }
  }, 0)
}); 
```

演示：[Plunker](http://plnkr.co/edit/fqGUGY?p=preview)

另一种解决方案是检查单击了哪个选项卡标题

```
$('#tickettabs').on('show', '.tabtickets', function(e){
  if($(this).has('a.tabtickets')){
    alert('has tabtickets')
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-19T15:32:24.740

我相信这是最好的方法：

```
//the reason for the odd-looking selector is to listen for the click event
// on links that don't even exist yet - i.e. are loaded from the server.
$('#tabs').on('click','.tablink,#prodTabs a',function (e) {
    e.preventDefault();
    var url = $(this).attr("data-url");

    if (typeof url !== "undefined") {
        var pane = $(this), href = this.hash;

        // ajax load from data-url
        $(href).load(url,function(result){      
            pane.tab('show');
        });
    } else {
        $(this).tab('show');
    }
}); 
```

在内容链接上使用 .tablink 类来链接选项卡。请参阅 JS 中的注释。HTML

```
<div id="tabs">
    <ul class="nav nav-tabs" id="prodTabs">
        <li class="active"><a href="#tab_basic">Basic</a></li>
        <li><a href="#tab_images" data-url="?action=images">Images</a></li>
        <li><a href="#tab_videos" data-url="?action=videos">Videos</a></li>
    </ul>
    <div class="tab-content">
        <div id="tab_basic" class="tab-pane active"></div>
        <div id="tab_images" class="tab-pane active"></div>
        <div id="tab_videos" class="tab-pane active"></div>
    </div>
</div> 
```

原文：[https](https://coderwall.com/p/1lnxba/load-bootstrap-tabs-dynamically) ://coderwall.com/p/1lnxba/load-bootstrap-tabs-dynamically 改编： http: [//www.bootply.com/63891](http://www.bootply.com/63891)

# facebook - 启发式寻找“令人惊讶”的共同朋友

> ID：15916524
> 
> 赞同：0
> 
> 时间：2013-04-10T03:42:59.423
> 
> 标签：facebook, facebook-graph-api, cluster-analysis, hierarchical-clustering

我有我的 Facebook 朋友的无向朋友图，`G`即`G[i][j] = G[j][i] = true`如果我的朋友`i`和朋友`j`彼此是朋友。我想找到“令人惊讶的”共同朋友，即我通常不希望彼此认识的一对朋友。我可以应用哪些好的启发式/算法？我最初的想法是运行一个聚类算法（不确定哪一个是最好的），看看我是否能找到跨集群的边。还有其他想法吗？我可以使用什么好的聚类算法来接收 G 并吐出聚类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:52:56.803

这是我的想法。友谊是一种优势。令人惊讶的友谊是一条边，这样如果你去掉这条边，两个节点之间的距离就会变得非常大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T10:27:32.530

Wu Yongzheng 的回答可以与现有的网络概念相关联，该概念是一种稳健且可能更敏感的度量，即*对节点之间距离的量化采取变得非常大*。这个概念是**边缘介**数。在这种情况下，人们会计算一个估计的版本。参见例如[https://en.wikipedia.org/wiki/Betweenness_centrality](https://en.wikipedia.org/wiki/Betweenness_centrality)和[http://igraph.sourceforge.net/doc/R/betweenness.html](http://igraph.sourceforge.net/doc/R/betweenness.html)。

# php - 数组中最接近的数字，但在垄断表上

> ID：15916525
> 
> 赞同：0
> 
> 时间：2013-04-10T03:43:02.393
> 
> 标签：php, arrays, function

我正在进行一场垄断游戏，我需要从给定值中检索最近的位置。我得到这样的最近位置：

```
function Field_GetNearestByCategory($current,$category) {
    $current = (int)$current;
    $category = SQLEscape($category);
    $s = "SELECT ID,Location FROM `card` WHERE Category='$category' AND Location <> $current";
    $qr = SQLQuery($s);
    $locs = array();
    while($r = SQLGetArray($qr)) {
        $locs[] = $r[1];
    }
    return $locs;
} 
```

我找到了获取数组中最接近值的解决方案，但是当 $current == 40 并且下一个最接近的字段应该是 6 时会出现问题（假设我们想去最近的铁路）。

```
function closest($search, $arr)
{
    $closest = null;
    foreach($arr as $item)
    {
        if($closest == null || abs($search - $closest) > abs($item - $search))
        {
            $closest = $item;
        }
    }
    return $closest;
} 
```

请注意，如果 $current == 40，则低于它的任何东西都相距甚远，因为 Monopoly 朝一个方向发展，因此 1 比 39 更接近 40。

**更新：**

我找到了解决办法，谢谢大家

```
function closest($search, $arr) {
    $c = null;
    sort($arr);
    foreach($arr as $k) {
        if($k > $search) { return $k; }
        else {
            if(!$c) $c = $k;
        }
    }
    return $c;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:41:24.140

Here's a query that adds a "distance" field (the distance ahead the square is from $current) - mysql syntax for the CASE statement

```
SELECT ID, Location, 
CASE WHEN Location < $current THEN Location + 40 - $current 
    ELSE Location - $current
END
AS Distance 
FROM `card` WHERE Category='$category' AND Location <> $current 
```

# c++ - 可比类型引用

> ID：15916526
> 
> 赞同：0
> 
> 时间：2013-04-10T03:43:03.080
> 
> 标签：c++, function, pointers, reference

有人可以解释一下这样的功能吗

```
const Comparable & findMin() const; 
void insert ( const Comparable & x ); 
```

意思是。Comparable 被声明为模板。我特别不明白的是 & 引用运算符是如何工作的，这个 & 引用运算符对我有意义的唯一方式是如果以基本方式使用，例如 int & aref = a; 表示 aref 是对 a 的引用，但是在我上面提供的代码中，引用没有分配给任何让我感到困惑的东西，而且为什么要引用整个函数，例如 findMin() 函数？

以及这样的事情是如何工作的

```
void insert( const Comparable & x, BinaryNode * & t ) const; 
```

他们有一个指针和一个引用，这只是将引用分配给指针的一种简短方法吗？

# linux - 使用“perf”获取每个线程的 CPU 使用率（任务时钟）

> ID：15916530
> 
> 赞同：2
> 
> 时间：2013-04-10T03:43:28.773
> 
> 标签：linux, perf

全部

我正在运行多线程应用程序并想测量每个线程的 CPU 使用率。例如，我想看看

> 线程 0 17696.260293 任务时钟
> 
> 线程 1 244112.601727 任务时钟
> 
> ...

谁能让我知道如何使用“perf”或其他一些性能监控工具获取此类信息？

谢谢！

# matlab - 如何使用这些约束生成随机 matlab 向量

> ID：15916533
> 
> 赞同：2
> 
> 时间：2013-04-10T03:44:15.603
> 
> 标签：matlab, math, random, inverse-kinematics

我`V`在 Matlab 中创建随机向量时遇到了以下一组约束：（给定参数`N`、`D`、`L`和`theta`）

1.  向量`V`必须是`N`单位长
2.  元素的平均值必须为`theta`
3.  没有 2 个连续元素的差异可能超过 +/-10
4.  `D == sum(L*cosd(V-theta))`

我对最后一个问题最多。有任何想法吗？

*编辑*
其他语言或方程式形式的解决方案同样可以接受。Matlab 对我来说只是一个方便的原型设计工具，但最终的算法将在 java 中。

**编辑**
从评论和初步答案中，我想添加一些澄清和初步想法。

我不是从任何标准发行版中寻求“真正随机”的解决方案。我想要一个伪随机生成的值序列，满足给定参数集的约束。

我试图近似的系统是链长度为 L 的 N 个链，其中链的末端在 theta 方向上远离另一端 D。

我在这里的初步见解是，可以从考虑中删除 theta 直到最后，因为（2）本质上将 theta 添加到 0 均值向量 V 的每个元素（将均值移动到 theta）并且（4）只是再次删除该均值。所以，如果你能找到 theta=0 的解决方案，那么问题就解决了所有的 theta。

根据要求，这是一个合理的参数范围（不是硬约束，而是典型值）：
`5<N<200`
`3<D<150`
`L==1`
`0 < theta < 360`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:43:21.583

我将从创建一个“有效”向量开始。这应该是可能的 - 比如说为每个条目计算它以具有相同的值。

一旦你得到那个向量，我会应用一些转换来“洗牌”它。“[拒绝采样](https://en.wikipedia.org/wiki/Rejection_sampling)”是关键字 - 如果洗牌会违反您的规则之一，您就不要这样做。

作为我想出的转换：

*   切换两个条目
*   修改一个条目的值并修改第二个条目以保持第 4 个条件（理论上您可以将两个随机播放直到满足条件 - 但发生的机会非常低）

但也许你可以找到更多。

经常合理地执行此操作，您将获得一个“有效”的随机向量。理论上你应该能够得到所有有效的向量——实际上你可以尝试构建几个“开始”向量，这样就不会花那么长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:25:13.590

因此，根据您的新要求，您实际上正在寻找的是随机角度的有序列表，角度的最大变化为 10 度（我首先将其转换为弧度），这样距离和方向从头到尾并指定链接长度和链接数量？

模拟初始猜测。它不适用于 D 和 theta 约束（即指定的 D 和指定的 theta）

```
angles = zeros(N, 1)

for link = 2:N
    angles (link) = theta(link - 1) + (rand() - 0.5)*(10*pi/180)
end 
```

使用遗传算法（或其他优化）根据以下成本函数调整角度：

```
dx = sum(L*cos(angle));
dy = sum(L*sin(angle));

D = sqrt(dx^2 + dy^2);
theta = atan2(dy/dx); 
```

现在，成本只是 my`D`和`theta`above 给出的向量与指定的`D`and给出的向量之间的差`theta`（即输入）。

您仍然必须强制执行 10 度的最大变化规则，也许如果违反它会使成本函数变得巨大？也许有一种更简洁的方法可以在优化算法中指定序列约束（我不知道如何）。

我觉得如果您可以使用正确的参数找到正确的优化，这应该能够模拟您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:55:17.760

你没有给我们很多细节来处理，所以我假设如下：

*   随机数将从`[-127+theta +127-theta]`
*   所有随机数都将来自均匀分布
*   所有随机数都是类型`int8`

然后，对于前 3 个要求，您可以使用以下命令：

```
N = 1e4;
theta = 40;
diffVal = 10;

g = @() randi([intmin('int8')+theta  intmax('int8')-theta], 'int8') + theta;
V = [g(); zeros(N-1,1, 'int8')];
for ii = 2:N
    V(ii) = g();
    while abs(V(ii)-V(ii-1)) >= diffVal
        V(ii) = g();
    end
end 
```

内联匿名函数以提高速度。

现在，最后一个要求，

```
D == sum(L*cos(V-theta)) 
```

有点奇怪......`cos(V-theta)`是将数据重新缩放到`[-1 +1]`区间的特定方法，然后乘以`L`将缩放到`[-L +L]`. 乍一看，您会期望 的`sum`平均值为`0`.

`cos(x)`然而， when的期望值`x`是一个随机变量，来自于`[0 2*pi]`is的均匀分布（例如，`2/pi`参见[此处）。](http://mathforum.org/library/drmath/view/67290.html)暂时忽略我们的极限与 不同的事实`[0 2*pi]`， 的期望值`sum(L*cos(V-theta))`将简单地减少为 的常数值`2*N*L/pi`。

你怎么能*强迫*它等于其他一些常数`D`是我无法做到的......你能否再详细说明一下？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T08:52:52.783

这是一种方法。很明显，并非所有 theta、N、L 和 D 的组合都是有效的。很明显，您正在尝试模拟非常复杂的随机对象。您可能很难展示与这些向量有关的任何有用信息。

您尝试模拟的系列似乎类似于[Wiener process](http://en.wikipedia.org/wiki/Wiener_process)。所以我从那个开始，你可以从任何随机但合理的开始。然后，我将其用作尝试满足 2,3 和 4 的优化的起点。初始值越接近有效向量（满足所有条件），收敛性就越好。

```
function series = generate_series(D, L, N,theta)
s(1) = theta;
for i=2:N,
    s(i) = s(i-1) + randn(1,1);
end
f = @(x)objective(x,D,L,N,theta)
q = optimset('Display','iter','TolFun',1e-10,'MaxFunEvals',Inf,'MaxIter',Inf)
[sf,val] = fminunc(f,s,q);
val
series = sf;

function value= objective(s,D,L,N,theta)
a = abs(mean(s)-theta);
b = abs(D-sum(L*cos(s-theta)));
c = 0;
for i=2:N,
    u =abs(s(i)-s(i-1)) ;
    if u>10,
        c = c + u;
    end
end
value = a^2 + b^2+ c^2; 
```

似乎您正在尝试模拟非常复杂/奇怪的东西（给定曲率的路径？），请参阅其他评论者的问题。您仍然必须使用您的领域知识将 D 和 L 与合理的 mu 和 sigma 连接起来，以便 Wiener 充当初始化。

# asp.net-mvc-3 - 如何限制用户在同一会话中打开多个浏览器选项卡（窗口）？

> ID：15916534
> 
> 赞同：1
> 
> 时间：2013-04-10T03:44:31.367
> 
> 标签：asp.net-mvc-3, session

我开发了一个 ASP.NET MVC 3 网站，我在各个地方使用 TempData。我希望我的用户不要在同一会话中打开多个浏览器的选项卡/窗口，以避免会话数据发生冲突。如何施加此限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:03:07.447

一般情况下是不可能的。您在服务器端没有任何关于在客户端打开多少窗口的信息。此外，如果您需要限制用户打开多个窗口，那么您肯定做错了，因为在多个窗口中工作是 Web 应用程序的一种性质。

但是，您*可以*通过使您的应用程序完全使用 AJAX（它们被命名为一页应用程序）来减少这种可能性。因此，除非在另一个选项卡中手动打开应用程序的起始页，否则用户将无法打开多个窗口。但你猫对此无动于衷。再一次 - 这确实是一个非常糟糕的设计。

# c++ - 使用 strcat 将字符附加到 C 中的字符串

> ID：15916543
> 
> 赞同：2
> 
> 时间：2013-04-10T03:45:28.140
> 
> 标签：c++, c

大家好，我仍然对指针感到困惑，我想知道是否有任何方法可以在不必使用 sprintf 的情况下执行以下操作：

```
char a[100], b[100], c[2];

//Some code that puts a string into a 

for(i = 0; i<strlen(a); i++)
{
    if(a[i] == 'C')
        strcat(b, "b");
    else if(a[i] == 'O')
        strcat(b, "a");
    else if(a[i] == 'D')
        strcat(b, "1");
    else
    {
        sprintf(c, "%s", a[i]);
        strcat(b, c);
    }
} 
```

几乎是一个 for 循环遍历一个字符串（一个数组）并用一个字符（或字符串）填充另一个字符串，具体取决于字符是什么，如果字符不是 C、O 或 D，它只是将它添加到另一个细绳。

*   我似乎不能这样做`strcat(b, a[i]);`，而且我知道它不会起作用，因为它会尝试`strcat(char *, char)`而不是`char*, const char*)`.
    *无论如何我可以把它变成一个指针吗？*他们仍然让我很困惑..而且我对编程一般只是低级语言的新手......

*   还有什么是*初始化 s 的最佳方法`char[]`？*那将被一个字符串填充，我现在使用的是：

    ```
    char ie[30] = "" 
    ```

*   也让我知道是否有更简单的方法来做

如果不清楚这显然是一个一次性脚本，我想要并且很抱歉，但我的脚本中使用了相同的概念。

提前谢谢你stackoverflow：X

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:52:05.867

**(1)**您的代码中可能存在一个错误：

您正在评论*一些将字符串放入 a 的代码，*我认为您没有将任何字符串分配给`b`. 所以默认情况下`char b[100];`有垃圾值（可能不存在`\0`）`b`。但字符串连接函数要求它`b`必须是一个字符串。所以

```
strcat(b, "b");   <--will Undefined Behavior 
```

**(2)**一种初始化空字符串的技术：

是的，您应该始终使用默认值初始化变量（数组），例如：

```
char a[100] = {0}, b[100] = {0}, c[2] = {0}; 
```

注意：半初始化数组的剩余元素将为`0`（null），初始化[变量假设是一种好习惯](https://stackoverflow.com/questions/15201276/initialize-a-variable)

**(3)**是`strcat(b, a[i]);`是错的：

要将单词中的字符串连接`a[i]`到`b`您可以执行以下操作：

```
strcat(b, a + i); 
```

是的，你是正确`strcat(b, a[i]);` 的确实是无效的。

注意：`a[i]`和`(a + i)`不一样，`a[i]`是 char 类型，其中 as`(a + i)`是 . 类型的字符串`a`。

假设您有以下字符串数组`a`并且值为`i`2 则：

```
+----+----+----+---+---+----+----+----+---+
| 'u'| 's' |'e'|'r'|'5'| '6'| '7'|'8' | 0 |  
+----+----+----+---+---+----+----+----+---+
 201   202  203 204 205 206  207   208 209 210  211
  ^          ^  
  |          |
  a         (a+i) 
```

所以在上图中`a`values is`201`和 type is `char [100]`（假设数组大小为 100） 也指向一个来自at*地址*`(a + i)` 的字符串。然而`'e'` *`203``a[i] = 'e'`*

 *所以你不能做`strcat(b, a[i]);`但是`strcat(b, a + i);`是有效的语法。

此外，从@BenVoigt 到从th 位置连接`n`字符，您可以这样做： `a``i`

```
strncat(b, a+i, n); 
```

`n`它会将char 从附加`a+i`到`b`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:57:21.903

由于您想获取一个长度`a`正好为一个字符的子字符串：

```
strncat(b, a+i, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:53:59.720

将所有 char 数组初始化为 null，以便代码中不存在垃圾值。

您正在附加到垃圾字符数组。

```
char a[100]={0}, b[100]={0}, c[2]={0}; 
```

现在 strcat() 函数可以正常运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T03:54:43.037

有许多可能的方法来做你想做的事。有一些方法可以完全避免使用`strcat()`and `sprintf()`——见下文；您可以`sprintf()`在继续使用的同时避免`strcat()`。

我可能会这样做的方式是记录下一个字符要添加到目标字符串的位置，`b`. 这将更有效，因为重复使用`strcat()`涉及二次行为，因为您一次构建一个字符串。此外，出于同样的原因，通常最好避免`strlen()`在循环条件中使用；它（可能）在每次迭代时都被评估，因此它也会导致二次行为。

```
char a[100], b[100];
char *bp = b;

//Some code that puts a string into a 
size_t len = strlen(a);

for (int i = 0; i < len; i++, bp++)
{
    if (a[i] == 'C')
        *bp = 'b';
    else if(a[i] == 'O')
        *bp = 'a';
    else if(a[i] == 'D')
        *bp = '1';
    else
        *bp = a[i];
}
*bp = '\0';   // Null-terminate the string 
```

您也可以通过使用索引变量`i`来分配指针而不使用指针`b`（只要您只为每个输入字符添加一个字符到输出）：

```
char a[100], b[100];

//Some code that puts a string into a 
size_t len = strlen(a);

for (int i = 0; i < len; i++)
{
    if (a[i] == 'C')
        b[i] = 'b';
    else if(a[i] == 'O')
        b[i] = 'a';
    else if(a[i] == 'D')
        b[i] = '1';
    else
        b[i] = a[i];
}
b[i] = '\0';   // Null-terminate the string 
```

只要字符串`a`足够短以适应，显示的代码（任一版本）都不会溢出`b`。如果您有时向 中添加了几个字符`b`，则需要索引 (`i`和)，或者您可以在第一个版本中多次增加每个循环中`j`的指针，并且您需要确保不会溢出边界`bp`的`b`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T04:05:13.047

您似乎对*字符串*感到困惑。字符串不仅仅是一个数组。你在看哪本书？

当您第一次调用`strcat`操作时`b`，`b`不能保证是字符串。结果是未定义的行为。此代码在您的系统上似乎可以正常运行，但如果确实如此，那是巧合。我在其他系统上看到过这样的代码以奇怪的方式失败。像这样修复它：

```
char a[100], b[100];

//Some code that puts a string into a
a[x] = '\0'; // <--- Null terminator is required for a to contain a "string".
             //      Otherwise, you can't pass a to strlen.

for(i = 0; i<strlen(a); i++)
{
    if(a[i] == 'C')
        b[i] = 'b';
    else if(a[i] == 'O')
        b[i] = 'a';
    else if(a[i] == 'D')
        b[i] = '1';
    else
        b[i] = a[i];
}

b[i] = '\0'; // If you don't put a null character at the end, it isn't a string. 
```

现在，什么是字符串？*

# c# - 转换列表 到 0 到 100 正态分布

> ID：15916545
> 
> 赞同：-1
> 
> 时间：2013-04-10T03:45:36.593
> 
> 标签：c#

我有一个从 0 到超过 1000 的双精度列表。我想将列表转换为正态分布，并将每个条目转换为 0 到 100 之间的数字。我发现了很多关于如何计算均值、标准差、和随机数，但现在还没有将列表转换为正态分布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:58:52.960

```
var list = new List<double> { ... };
var max = list.Max();
var desiredList = list.Select(p => (p / max) * 100).ToList(); 
```

# javascript - 如何卸载不可见的 HTML？

> ID：15916546
> 
> 赞同：2
> 
> 时间：2013-04-10T03:45:36.480
> 
> 标签：javascript, html, performance, lazy-loading

如今，当用户将图像滚动到视图中时，通常会[延迟加载图像。](http://www.appelsiini.net/projects/lazyload)我需要懒惰地加载*和卸载*。

假设我有一个包含太多大图像的页面，以至于浏览器变慢了。那部分是不可改变的。并非所有图像都可以立即看到，因此我应该能够通过延迟加载视口内的图像并延迟卸载视口外的图像来加快速度。

有哪些方法可以做到这一点？原始 JavaScript 或像 jQuery 这样的库都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:58:33.843

使用 jquery 卸载函数来解决这个问题.. [http://api.jquery.com/unload/](http://api.jquery.com/unload/)

喜欢

```
$(window).unload(function() {
  alert('Handler for .unload() called.');
}); 
```

# matlab - 如何在matlab中将字符添加到数字矩阵？

> ID：15916549
> 
> 赞同：0
> 
> 时间：2013-04-10T03:45:58.643
> 
> 标签：matlab, matrix

在 matlab 中，我们通常使用`fprintf`命令添加标题。

当表的大小取决于输入并且超出某个范围（超过能够在命令窗口中显示的列的总数）时，这是一个问题。

发生这种情况时，我们之前使用`fprintf`命令指定的标头将与当前输出数据不兼容。

我想知道在某种迭代过程中是否有一种方法可以将字符串添加到矩阵的第一行。我几乎没有尝试过，但仍然找不到解决此问题的正确方法。

或者实际上不能为此目的在matlab中完成。

例如

```
clear;clc
A = [2 8 3 1;0 2 -1 4;7 -2 1 2;-1 0 5 2]
B = [-2;4;3;5]
Es = 1e-5

n = length(B);
x = zeros(n,1);
Ea = ones(n,1);
iter = 0;

while max(Ea) >= Es
    if iter <= 30
        iter = iter + 1;
        x_old = x;
        for i = 1:n
           j = 1:n;
           j(i) = [];
            x_cal = x;
            x_cal(i) = [];
            x(i) = (B(i) - sum(A(i,j) * x_cal)) / A(i,i);
        end
    else
        break
    end

    x_ans(:,iter) = x;
    Ea(:,iter) =abs(( x - x_old) ./ x);

    end

result = [1:iter; x_ans; Ea]' 
```

对于上面的编码..我如何为第一列添加标题，如迭代，x1...x2...x3..xn 为 `n`第 列，错误 x1..error x2..error xn 为另一个 n 列。我想让这个标题可以根据输入矩阵自动生成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:28:06.283

如果表格的大小取决于输入，请使用元胞数组，使用 c = cell(...)。在每次迭代中，只需调用 c{i,j} 而不是 c[i,j]。

# jpa-2.0 - 动态 JPA 实体

> ID：15916551
> 
> 赞同：3
> 
> 时间：2013-04-10T03:46:03.643
> 
> 标签：jpa-2.0

我正在使用 EJB 和 JPA 开发 Java EE 项目。服务器是 Jboss AS 7.1，它使用 Hibernate 作为 JPA 提供者。

在这个项目中，我想向数据库中添加许多新表。我还想*在运行时*向这些表中添加许多新列。添加这些列后，我将在表中添加、删除或选择数据（在运行时也是如此）。

我怎样才能用 JPA 做到这一点？

# php - 解析错误：语法错误、意外的 '' (T_ENCAPSED_AND_WHITESPACE)、需要标识符 (T_STRING) 或变量

> ID：15916552
> 
> 赞同：0
> 
> 时间：2013-04-10T03:46:04.333
> 
> 标签：php, javascript

执行此操作时，我不断收到此错误：

```
<?php
$info = $_POST['mname'];
$info = ucwords($info);

// Make a MySQL Connection
mysql_connect("localhost", "user", "password") or die(mysql_error());
mysql_select_db("javadatest") or die(mysql_error());  

// Get a specific result from the "example" table
$result = mysql_query("SELECT * FROM movieList
WHERE name = '$info'") or die(mysql_error());  

// get the first (and hopefully only) entry from the result
$row = mysql_fetch_array( $result );
// Print out the contents of each row into a table 
//echo $row['name']." ".$row['year']." ".$row['genre'];
echo "
  <script language=javascript>
  var jsvar;
  jsvar = <?php echo $row['name'], $row['year'], $row['genre'];?>
  function buy() {
    window.location = \"https://www.paypal.com\";   
    alert(\"Thanks for shopping at Movie Store\");     
  }
  var myWindow = window.open('', '', 'width = 300, height = 300);
  myWindow.document.write(jsvar);
  myWindow.document.write('<body>'); 

  myWindow.document.write('<input type="button" value="Buy" onclick=/"buy()/">');

  myWindow.document.write('</body>');

 //myWindow.buy = buy;
 </script>
";
?> 
```

我试图通过将我的 javascript 代码放在我的 echo 语句中来在 php 文件中使用 javascript。我无法弄清楚我做错了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:47:50.227

你不需要写这一行

```
jsvar = <?php echo $row['name'], $row['year'], $row['genre'];?> 
```

只需使用

```
jsvar = {$row['name']} {$row['year']} {$row['genre']}; 
```

因为你已经在 PHP 中了。

还

**代替**

```
myWindow.document.write('<input type="button" value="Buy" onclick=/"buy()/">'); 
```

**和**

```
myWindow.document.write('<input type=\"button\" value=\"Buy\" onclick=\"buy()\">'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:48:25.060

```
myWindow.document.write('<input type="button" value="Buy" onclick=/"buy()/">'); 
```

应该

```
myWindow.document.write(\"<input type='button' value='Buy' onclick='buy()'>\"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:53:22.527

```
 $row = mysql_fetch_array( $result );
    // Print out the contents of each row into a table 
    //echo $row['name']." ".$row['year']." ".$row['genre'];
    ?>
      <script language=javascript>
      var jsvar;
      jsvar = <?php echo json_encode($row['name']), json_encode($row['year']), json_encode($row['genre']);?>
      function buy() {
        window.location = \"https://www.paypal.com\";   
        alert(\"Thanks for shopping at Movie Store\");     
      }
...
</script> 
```

# mpi - MPICH/MVAPICH 中的 MPIR 前缀

> ID：15916560
> 
> 赞同：1
> 
> 时间：2013-04-10T03:47:04.257
> 
> 标签：mpi, mpich, mvapich2

以下链接表示 MPICH/MVAPICH 中的函数名称前缀约定（例如，MPID 和 MPIU 前缀）

[MPICH/MVAPICH 中的函数名称前缀约定](http://wiki.mpich.org/mpich/index.php/Function_Name_Prefix_Convention)

我只是想知道 MPIR 前缀代表什么（上面的链接中没有解释）？它在哪一层实现，哪一层可以访问它？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:16:58.250

`MPIR_`通常用于定义在顶层的符号，它在实际`MPI_`接口之下但在抽象设备接口（ADI）之上，其符号通常有`MPID_`前缀。大多数`MPIU_`符号也在这一层定义，但它们通常用于完全独立的实用程序，不实现任何“MPI 业务逻辑”。与这些命名约定一样，并非在所有情况下都 100% 严格遵守该约定。

来源：我的大脑；我已经开发 MPICH 超过 5 年了。

对在库中定义的例程使用非`MPI_`名称很重要，因为这意味着我们不会意外踩到 MPI 命名空间并可能与未来的标准化冲突或混淆用户对什么是实际标准功能：[http://www.mpi -forum.org/docs/mpi22-report/node31.htm#Node31](http://www.mpi-forum.org/docs/mpi22-report/node31.htm#Node31)

> 我们使用 ISO C 声明格式。所有 MPI 名称都有一个`MPI_`前缀，定义的常量全部大写，定义的类型和函数在前缀后有一个大写字母。程序不得声明名称以前缀开头的变量或函数`MPI_`。为了支持分析接口，程序不应声明名称以前缀开头的函数`PMPI_`。

# html - 响应式网页设计，它是如何工作的？

> ID：15916565
> 
> 赞同：0
> 
> 时间：2013-04-10T03:47:19.803
> 
> 标签：html, css, media-queries, meta-tags

我正在尝试制作一个网页，该网页会根据您使用的设备改变其外观。

我认为媒体查询和视口是我需要使用的东西。

有人可以确认这一点并告诉我应该如何制作使用此功能的网页吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:55:10.223

有几种方法可以解决这个问题：

1.  您可以使用用户代理测试（这是当您使用石灰现代化工具或 php 来测试用户代理时。然后您将使用 PHP if 语句或类似的东西来为不同的设备加载不同的内容

2.  您可以为每台设备使用相同的内容，只需使用 CSS 媒体查询（这是我使用的）更改它的外观您可以在我构建的名为 LeadRocket app.myleadrocket.com 的应用程序中看到它的实际效果。缩小屏幕尺寸

干杯

PS 这是一个很好的媒体查询样板，它是我用来构建 www.myleadrocket.com 的

[http://www.getskeleton.com/](http://www.getskeleton.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:57:50.217

哈哈，这需要一段时间才能回答。要点如下......

将此粘贴到该`<head>`部分：

```
<meta name="viewport" content="width=device-width"> 
```

该元标记将允许您使用媒体查询。然后在主 css 文件的末尾使用如下媒体查询根据屏幕宽度进行任何更改。

```
@media (max-width: 979px) {
  /* Everything in here will be styled for small desktops */
}

@media (max-width: 767px) {
  /* Everything in here will be styled for tablets */
}

@media (max-width: 480px) {
  /* Everything in here will be styled for mobile */
} 
```

媒体查询中的样式将覆盖样式表中以前使用的任何样式规则。

# php - php if + or 语句

> ID：15916566
> 
> 赞同：1
> 
> 时间：2013-04-10T03:47:20.230
> 
> 标签：php, if-statement

我一直在尝试以下方法：

```
 <?php if ((!is_page(9)) || (!is_page(52))) : ?>
 <?php if (!is_page(9) || !is_page(52)) : ?> 
```

但是我添加 || 的那一刻 if 停止工作，只有`else`显示

我想完成此操作：在第 9 页或第 52 页执行此操作

这里有什么错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T03:49:52.643

你的情况：

```
(!is_page(9) || !is_page(52)) 
```

翻译为：

```
!(is_page(9) && is_page(52)) 
```

这当然不可能是真的，一个页面不能同时是两个东西:)

> 我想完成此操作：在第 9 页或第 52 页执行此操作

只需删除否定，你应该没问题：

```
if (is_page(9) || is_page(52)) {
    // do something
} else { 
    // this was not 9 nor 52
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:49:55.673

```
if(is_page(9) || is_page(52)) { /* Do this */ }
else { /* Do other stuff */ } 
```

|| - 或者

＆＆ - 和

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:51:45.617

看起来你已经打断了 if 语句的括号。is_page 是一个函数吗？尝试：

```
<?php if(!is_page(9) || !is_page(52)) : ?> 
```

# linux - 如何在 Unix 中的分隔符后添加换行符？

> ID：15916569
> 
> 赞同：4
> 
> 时间：2013-04-10T03:47:38.670
> 
> 标签：linux, shell, unix

以下是我的输入

```
54.243.94.244, 54.243.113.63 
```

我想要如下所示，

```
54.243.94.244
54.243.113.63 
```

即在逗号之后我需要添加换行符。如何在 Unix 中实现它？请建议一些命令。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T03:54:02.280

另一种选择是`tr`

```
tr ',' '\n' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T03:51:33.523

`sed`会成功的：

```
$ echo '54.243.94.244, 54.243.113.63' | sed 's/, /\n/g'
54.243.94.244
54.243.113.63 
```

sed 命令`s/, /\n/g`将用换行符替换输入中所有出现的逗号和空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:55:10.560

一个简单的例子是

```
VAR1=a
VAR1="$VAR1"$'\n'b
echo "$VAR" 
```

这将给出类似的输出

```
a
b 
```

# vb.net - 表单上的所有控件单击事件

> ID：15916572
> 
> 赞同：0
> 
> 时间：2013-04-10T03:48:04.193
> 
> 标签：vb.net, click, controls

当单击表单中的任何控件（如 datagirdview、面板、菜单条、按钮、文本框、标签等）时，是否有一种简单的方法来激活表单......

碰巧我的项目可以显示许多不同的表单，当它位于活动表单的背面时，我很难激活一个表单。我需要单击表单的边框来激活它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T03:44:46.703

最有可能出现您的问题是因为您的表单是 MDI 子表单。您必须单击菜单栏才能激活表单。但是如果您有无边框表单，则单击控件不会激活表单。再次，这通常会发生在 MDI 上，但它不应该发生在常规的 winform 上。除非您在后台有其他正在运行的事件会干扰进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:23:03.377

您的问题根本不清楚，我不知道您要归档什么，但是要通过单击事件执行某些操作，您必须为每个控件添加处理程序。

如果您声明它不仅仅是：

```
Private Sub ControlsClick(sender As Object, e As EventArgs) _
Handles Panel1.Click, Button1.Click, TextBox2.Click ' etc.
    Me.Activate 'Or Whatever
End Sub 
```

您必须为每个控件添加处理程序。如果您以动态方式执行此操作，则相同：

```
Private Sub InitializeClickHandlers(sender As Control, Optional bChilds As Boolean = True)
    For Each elem As Control In sender.Controls
        AddHandler elem.Click, AddressOf ControlsClick(elem, New EventArgs)

        If bChilds AndAlso elem.Controls.Count > 0 Then
            Call InitializeClickHandlers(sender)
        End If
    Next
End Sub 
```

然后，对于表单中的每个控件，您可以将其称为：`Call InitializeClickHandlers(Me)`
或者，对于面板内的每个控件：`Call InitializeClickHandlers(Panel1)`

# selenium - 在 Grid2 上运行 Selenium 测试

> ID：15916573
> 
> 赞同：0
> 
> 时间：2013-04-10T03:48:07.440
> 
> 标签：selenium

我有一个在[Amazon EC2上运行的 Selenium Grid](http://ec2-54-244-205-27.us-west-2.compute.amazonaws.com:7055/grid/console)

我有一个基本测试，我正在尝试使用 Ruby 和 TestUnit 运行。

```
require "test/unit"
require "rubygems"
gem "selenium-client"
require "selenium/client"

class Test3 < Test::Unit::TestCase

  def setup
    @verification_errors = []
    puts "Running tests..."
    @selenium = Selenium::Client::Driver.new \
      :host => "http://ec2-54-244-205-27.us-west-2.compute.amazonaws.com:7055/wd/hub",
      :browser => "*chrome",
      :url => "https://news.google.com/",
      :timeout_in_second => 60

    @selenium.start_new_browser_session
  end

  def teardown
    @selenium.close_current_browser_session
    assert_equal [], @verification_errors
  end

  def test_test3
    @selenium.open "/nwshp?hl=en&tab=wn&authuser=0"
    @selenium.click "css=#gb_5 > span.gbts"
    @selenium.wait_for_page_to_load "30000"
    @selenium.click "css=div.main-appbar"
    @selenium.click "css=span.titletext"
  end
end 
```

但是，我不断收到以下错误：

SocketError: getaddrinfo: nodename or servname provided, or not known

我使用以下行创建了 Selenium Hub。

java -jar selenium-server-standalone-2.6.0.jar -role hub -port 7055

然后我通过执行注册 WebDriver 节点...

java -jar selenium-server-standalone-2.6.0.jar -role webdriver -hub [http://ec2-54-244-205-27.us-west-2.compute.amazonaws.com:7055/grid/register](http://ec2-54-244-205-27.us-west-2.compute.amazonaws.com:7055/grid/register) -端口 7056

我的网格控制台说...

```
WebDriverRemoteProxy
listening on http://10.250.11.113:7056/wd/hub
test session time out after 300 sec.
Supports up to 5 concurrent tests from: 
```

我不明白让我的测试与 Selenium Grid 连接。我做错了什么？我的 WebDriver 的 URL 是否应该是 WebDriverRemoteProxy 下的“正在侦听”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:25:16.760

我有一种感觉，你已经创建了节点来扮演集线器的角色`webdriver`。

为了向后兼容，“wd”和“rc”角色是“node”角色的有效子集。但是这些角色将远程连接的类型限制为与其相应的 API，而“节点”允许 RC 和 WebDriver 远程连接。

考虑到您正在运行的 RC，尝试将节点的角色定义为`rc`或更好`node`

```
java -jar selenium-server-standalone-2.31.0.jar -role node -port 7056  -hub http://ec2-54-244-205-27.us-west-2.compute.amazonaws.com:7055 
```

和你的硒远程实例这样

```
 @selenium = Selenium::Client::Driver.new \
      :host => "http://ec2-54-244-205-27.us-west-2.compute.amazonaws.com:7055/wd/hub",
      :browser => "*googlechrome",
      :url => "https://news.google.com/",
      :timeout_in_second => 60 
```

# linux - 如何通过 /etc/motd 向 linux 用户显示个人登录消息

> ID：15916583
> 
> 赞同：0
> 
> 时间：2013-04-10T03:49:04.700
> 
> 标签：linux

`/etc/motd`向所有用户显示通用消息。是否可以为每个用户显示单独的 /etc/motd 文件？

例如：用户 1 登录并看到“消息 1”，但用户 2 登录并获得“不同的消息 2”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:25:00.340

无法`motd`根据用户 ID 控制显示。

但是，可以对系统进行配置，使用户能够决定是否要查看 motd。可以通过添加一行来实现`/etc/login.defs`：

```
HUSHLOGIN_FILE   .hushlogin 
```

这样做`touch ${HOME}/.hushlogin`的用户不会看到 motd。

# php - 无法连接到远程 MySQL 服务器（改用默认服务器）

> ID：15916590
> 
> 赞同：0
> 
> 时间：2013-04-10T03:49:58.407
> 
> 标签：php, mysql, mysqli, debian

我正在尝试从我的 VPS 连接到 AWS MySQL 服务器，但无论我尝试什么，我都会被拒绝访问，我的用户有权从任何主机连接。

如果我尝试通过 PHP 连接：

```
$db = new mysqli('mysite.cufncdsjslka.us-east-1.rds.amazonaws.com', 'my_user', 'my_pass', 'my_db'); 
```

给我：`Warning: mysqli::mysqli(): (28000/1045): Access denied for user 'my_user'@'XXXX.myhost.com' (using password: YES) in /home/me/shopify/libraries/db.lib.php on line 4`

如果我尝试通过 MySQL CLI 连接：

```
mysql -h mysite.cufncdsjslka.us-east-1.rds.amazonaws.com -umy_user -p 
```

给我： `ERROR 1045 (28000): Access denied for user 'my_user'@'xxxx.myhost.com' (using password: YES)`

此命令在我的 PC 上完美运行，但在我的 VPS 上却不行。

我假设这是某种安全设置阻止 MySQL 使用外部服务器？

我的 VPS 使用标准 Debian 软件包中的 LAMP 组件运行 Debian 挤压，除了我手动更新到 5.4 的 PHP。

我将此作为一个新问题发布，因为我在 SO 上发现的大多数类似问题都是权限问题（我已授予我的 MySQL 用户从任何主机连接的权限）或 SELinux 问题（AFAIK 不适用于Debian）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:25:34.470

好的。

由于许多不同的原因，我已经多次看到这个问题。由于我看不到您的服务器或您的日志，所以我从信息中猜测可能存在绑定地址问题。

在 my.cnf 检查

```
bind-address=YOUR-SERVER-IP 
```

将其更改为您的 mysql 服务器的 IP 地址，例如 81.92.33.45

在此之后重新启动mysql。如果您仍然无法连接，请告诉我日志中的错误信息，我会再看一遍。

其次确保 iptables 不会引起问题。

```
iptables -A INPUT -i eth0 -p tcp --destination-port 3306 -j ACCEPT 
```

# python - 通过 paramiko (SSH) 连接到多个主机非常慢

> ID：15916593
> 
> 赞同：1
> 
> 时间：2013-04-10T03:50:16.930
> 
> 标签：python, paramiko

我对 python 不是一个完整的新手，但我相当新而且没有经验。最近，当我想编写一个脚本来自动化一些包版本检查+与我们的生产环境比较时，我发现了 paramiko，但是每个连接都需要很长时间:(

```
for app in apps:
        tstapp_address = test_env['prefix'] + str(app['tstapp']) + test_env['suffix']
        ssh = paramiko.SSHClient()
        ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        ssh.connect(tstapp_address, username='our_username', password='secret')
        sys.stdout.write('\n' + str(app_num) + ') ' + app['name'] + ' on ' + 'tstapp' + str(app['tstapp']) + '\n')
        stdin, stdout, sderr = ssh.exec_command('rpm -q ' + app['name'])
        tstapp_rpm = stdout.readline()
        sys.stdout.write(str(tstapp_rpm))
        stdin, stdout, stderr = ssh.exec_command('exit')
        app_num += 1
        ssh.close() 
```

我有一个 JSON 文档，我在这之前检索了它，它包含有关连接位置等的所有信息。问题是 - 每个连接大约需要 10 秒才能通过 ssh 连接到主机，连接到 rpm -q app-name，将其输出到屏幕上并在连接到下一个主机之前关闭连接。这是 python+paramiko 的常规行为吗？：/

如果您需要有关我在脚本中所做的工作的更多信息，请告诉我，但我认为这已经足够了。

编辑：还想提一下，手动连接到这些主机非常快，它们不是遥远的远程机器，也不是超级慢。它一定是我的代码的东西......我只是没有更多的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:34:57.783

I found the 'solution'... both downgrading pycrypto to 2.4.1 from 2.6 and also lowering the bit size of my public ssh key greatly improved the speed.

FYI, to downgrade pycrypto use:

```
sudo pip install -U https://pypi.python.org/packages/source/p/pycrypto/pycrypto-2.4.1.tar.gz 
```

to lower the bit size of the key use:

```
ssh-keygen -t rsa -b 768 -C "email@example.com" 
```

# random - 随机数生成器和图算法

> ID：15916597
> 
> 赞同：0
> 
> 时间：2013-04-10T03:50:34.683
> 
> 标签：random, graph

`G`给定一种均匀随机选择 0 和 1 之间实数的方法，你将如何使用这个随机数生成器在有边的图中均匀随机选择一条`n`边。我知道您可以使用随机数生成器创建随机图`G`，但我很困惑如何修改它以在特定图中选择随机边`G`。

另一个问题浮现在脑海。鉴于该图`G`现在已加权，该算法将如何变化。我想现在权重会对选择的边缘产生更多影响，但它会改变算法多少

有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:20:23.237

对于未加权图，假设边存储在列表中，您可以简单地在`1`和之间生成一个统一的随机整数`n`。大多数库（在任何编程语言中）都会有一个介于 0 和 1 之间的统一随机数生成器`u = U(0,1)`。

现在将`(0,1)`区间统一划分为`n`子区间。对于“k”，范围从`1 to n-1`检查哪个间隔`(k/n, (k+1)/n)`确实`u`下降。`k`是你的随机优势。

对于加权图，如果目标是根据其权重随机选择一条边（权重越高意味着选择的可能性越大），则使用与上述相同的方法。但是`(0,1)`根据它们的*权重*将区间划分为子区间。最后生成`u`并选择`k`.

例如：如果有 3 条边的权重为 {1,2,3}。然后`(0,1)`按该比例将区间分成3个子区间。即`(0,1/6)`：`(1/6,1/2)`和`(1/2,1)`。生成`u`并找到它所在的区间。说`u=0.45`，那么它位于第二个区间，所以选择第二个边缘。

# python - Python 冒泡排序

> ID：15916599
> 
> 赞同：0
> 
> 时间：2013-04-10T03:50:58.577
> 
> 标签：python, sorting, bubble-sort

嘿，所以代码可以完美运行，非常感谢！

我还有一个问题。我想在两个列之间显示一个箭头。我创建了这段代码，但我真的不知道如何让它进入正在切换的列之间。有什么建议么？

```
def arrow(lst, i):                 # function for the arrow
if (lst[i], lst[i+1] == lst[i+1], lst[i]):
    t.home()
    t.penup()
                     # im thinking something goes here but i dont know what :P
    t.pendown()
    t.pencolor("red")
    t.right(90)
    t.forward(20) 
```

任何帮助将不胜感激！谢谢！顺便说一句，其余代码就像 imran 的代码！：） 谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:24:25.420

从您的原始代码中只需要编辑一些东西，最好有两个 for 循环来检查它的值。同样，在您这样做之前`[i-1]`，它会破坏冒泡排序的目的，因为如果这有意义的话，您是从左到右排序的。无论如何，这就是我所做的。

```
def swap(lst):
    for i in range (len(lst)):
        for j in range (len(lst)-1):
            if lst[j] > lst[j+1]:
                lst[j], lst[j+1] = lst[j+1], lst[j]
                print (lst)

lst = input("Enter list to be sorted: ")
print (lst)
swap(lst) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:16:24.540

我根据您的代码编写了冒泡排序：

```
import types

def bubble_sort(lst):
    assert(type(lst)==types.ListType)
    for index in range(1,len(lst)):
        while index > 0 and lst[index-1] > lst[index]:
            lst[index-1] , lst[index] = lst[index] , lst[index-1]
            index -= 1
    return

lst = input("Enter list to be sorted: ")
print "Original: ",lst
bubble_sort(lst)
print "Sorted: ",lst 
```

测试看起来像：

```
C:\Users\NAME\Desktop>bubble.py
Enter list to be sorted: [4, 24, 25, 2, 6, -1, 73, 1]
Original:  [4, 24, 25, 2, 6, -1, 73, 1]
Sorted:  [-1, 1, 2, 4, 6, 24, 25, 73] 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:15:06.213

您的代码看起来很像[这里](http://www.codecodex.com/wiki/Bubble_sort#Python)的冒泡排序版本之一。您的版本不起作用的主要问题是因为您将索引 i 处的 lst 与 i-1 进行比较，当 i=0 时失败。将该部分更改为：

```
 if (lst[i] < lst[i + 1]):
            swapped = False
            lst[i+1], lst[i] = lst[i], lst[i+1] 
```

另外，不要在函数之外定义 n （理想情况下应该称为bubble_sort，或类似的东西），这是糟糕的编程，一个等待发生的错误。我不知道你想用什么来完成`lst = [lst]`。可能想要使用不同的变量名。

**编辑：** 我对您的代码进行了一些自由更改。我把所有的绘图调用都放在了冒泡排序中。冒泡排序还在内部将列表转换为元组列表，其中元组的第二个元素是颜色。代码末尾的 for 循环没有做任何有价值的事情。我认为您的主要问题是它没有在 while 循环的每次迭代之间暂停，因此您看不到列表中的元素冒泡。

```
#!/usr/bin/python
import turtle as t

def draw(lst, width):
  for x in lst:
    height = x[0]
    t.color(x[1])
    t.forward(width)
    t.left(90)
    t.forward(height)
    t.left(90)
    t.forward(width)
    t.left(90)
    t.forward(height)
    t.left(90)
    t.penup()
    t.forward(30)
    t.pendown()

def bubble_sort(orig_lst):  
  lst = [ (x, "blue") for x in orig_lst ]
  n = len(lst)-1 
  t.pensize(3)
  draw(lst, width)
  swapped = True  
  while swapped:  
    swapped = False  
    for i in range(n):  
        if lst[i+1][0] < lst[i][0]:  
            lst[i], lst[i+1] = lst[i+1], lst[i]
            lst[i] = (lst[i][0], "green")  
            swapped = True 
            next = raw_input("hit any key to continue ")
            t.home()
            t.clear() 
            draw(lst,width)
  newLst = [ x[0] for x in lst ]
  return newLst

# TOP LEVEL
original_lst = input("Enter list to be sorted: ")
width = input("Provide the width: ")

newLst = bubble_sort(original_lst)
print "Done! Sorted list is: ", newLst
next = raw_input("hit any key to exit ") 
```

# javascript - 带有可选美元符号的正则表达式整数金额

> ID：15916601
> 
> 赞同：-5
> 
> 时间：2013-04-10T03:51:06.583
> 
> 标签：javascript, jquery, regex

我正在使用 jQuery 来测试接受整美元金额（无小数）的美元金额的输入，并且在开始时美元符号是可选的。

我有`/^[$0-9]+/`但不工作。

```
Valid Numbers:

$100
100

Invalid:

$100.00
100.00
0.99 
```

编辑：我正在使用 jQuery 测试方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T03:53:22.990

```
/^\$?\d+$/ 
```

分解：

```
^    start of string
\$   literal dollar
  ?  optional
\d   digit
  +  one or more
$    end of string 
```

# javascript - 如何使用 Fabric.js 获取受事件影响的对象的属性？

> ID：15916603
> 
> 赞同：0
> 
> 时间：2013-04-10T03:51:16.030
> 
> 标签：javascript, events, fabricjs

使用 Fabric.js 1.1.6，我有以下内容：

```
var rect = new fabric.Rect({});
rect.on('moving', function(obj) {
    // I want to retrieve and set properties from the
    // object rect from inside this event function
}); 
```

*   是否可以从事件调用的函数内部检索和修改`rect`属性？
*   如果是，我该怎么做？
*   如果不是，关于如何从事件函数内部修改 rect 属性的任何建议？

先感谢您！

--

**更新：** @plalx 正确回答了上述问题，但实际上我在更大的背景下对此进行了回答：

```
function SomeClass()
{
    this.rect = new fabric.Rect({});
    this.rect.on('moving', function(obj) {
        // here, this.rect is undefined
    });
} 
```

好吧，在后一种情况下，我不能只在函数内部使用 this.rect，因为 there`this`指的是函数，而不是 SomeClass。

现在怎么样，以上三个问题的答案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:27:01.690

> “是否可以从事件调用的函数内部检索和修改矩形属性？”

这不仅是可能的，而且非常简单；) 你应该阅读 JavaScript 中的[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)。

对于问题 #1

```
var rect = new fabric.Rect({});
rect.on('moving', function(obj) {
    rect.someProperty = 'test';
}); 
```

对于问题 #2

```
function SomeClass() {
    var rect = this.rect = new fabric.Rect({});

    this.rect.on('moving', function(obj) {
        // here, this.rect is undefined
        rect.someProperty;
    });
} 
```

# pandas - 如何将熊猫列的值除以另一列

> ID：15916612
> 
> 赞同：21
> 
> 时间：2013-04-10T03:52:09.493
> 
> 标签：pandas, division

我有一个数据框：

```
>>> dt
                   COL000   COL001   QT
STK_ID  RPT_Date                       
STK000  20120331   2.6151   2.1467    1
        20120630   4.0589   2.3442    2
        20120930   4.4547   3.9204    3
        20121231   4.1360   3.8559    4
STK001  20120331  -0.2178   0.9184    1
        20120630  -1.9639   0.7900    2
        20120930  -2.9147   1.0189    3
        20121231  -2.5648   2.3743    4
STK002  20120331  -0.6426   0.9543    1
        20120630  -0.3575   1.6085    2
        20120930  -2.3549   0.7174    3
        20121231  -3.4860   1.6324    4 
```

我希望列值除以“QT”列，有点像这样：

```
dt =  dt/dt.QT     # pandas does not accept this syntax 
```

所需的输出是：

```
STK_ID  RPT_Date        COL000       COL001  QT
STK000  20120331   2.615110188  2.146655745   1
        20120630   2.029447265  1.172093561   1
        20120930   1.484909881  1.306795608   1
        20121231   1.034008443  0.963970609   1
STK001  20120331  -0.217808111  0.918355842   1
        20120630  -0.981974837  0.394977675   1
        20120930  -0.97157148   0.339633733   1
        20121231  -0.641203355  0.593569537   1
STK002  20120331  -0.642567516  0.954323016   1
        20120630  -0.178759288  0.804230898   1
        20120930  -0.784982521  0.239117442   1
        20121231  -0.871501505  0.408094317   1 
```

怎么做？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-10T03:59:45.463

dv的`/`运算符似乎等于具有默认轴“列”的[div 。](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.div.html)将轴设置为“索引”，然后它将起作用。

```
df = df.div(df.QT, axis='index') 
```

另一个棘手的方法是先转置，划分，然后转回：

```
df = (df.T / df.QT).T 
```

# objective-c - 处理 UIAlertView 中的“确定”按钮

> ID：15916614
> 
> 赞同：-2
> 
> 时间：2013-04-10T03:53:01.787
> 
> 标签：objective-c

我为两个要输入的名称设置了一个警报视图，如下所示

UITextField *player1; UITextField *player2;

```
 UIAlertView *prompt = [[UIAlertView alloc] initWithTitle:@"Enter 2 player names"
                                                     message:@"\n\n\n" // IMPORTANT
                                                    delegate:nil
                                           cancelButtonTitle:@"OK"
                                           otherButtonTitles:nil];

    player1 = [[UITextField alloc] initWithFrame:CGRectMake(12, 50, 260, 25)];
    [player1 setBackgroundColor:[UIColor whiteColor]];
    [player1 setPlaceholder:@"player1"];
    [prompt addSubview:player1];

    player2 = [[UITextField alloc] initWithFrame:CGRectMake(12, 85, 260, 25)];
    [player2 setBackgroundColor:[UIColor whiteColor]];
    [player2 setPlaceholder:@"player2"];
    [prompt addSubview:player2];

    // set place
    [prompt setTransform:CGAffineTransformMakeTranslation(0, 110)];
    [prompt show];
    //[prompt release];

    // set cursor and show keyboard
    [player1 becomeFirstResponder]; 
```

现在我想处理“确定”按钮的点击。我正在尝试做这样的事情没有运气..

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
if (buttonIndex == 0)
{
    NSLog(@"cancel");
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"OK works" message:@"no error" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
}
} 
```

从我读过的内容来看，这应该可行。但是，当我按下“确定”按钮时，什么也没有发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T03:55:17.547

您需要`self`为`UIAlertView`.

```
UIAlertView *prompt = [[UIAlertView alloc] initWithTitle:@"Enter 2 player names"
                                                     message:@"\n\n\n" // IMPORTANT
                                                    delegate:self
                                           cancelButtonTitle:@"OK"
                                           otherButtonTitles:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:28:17.277

**注意：** *与原始问题无关，但根据评论“您能否给我一些更多详细信息，说明您将标签分配给文本字段然后获取文本字段及其值？”我在这里发布答案。*

将标签分配给文本字段

```
 UIAlertView *prompt = [[UIAlertView alloc] initWithTitle:@"Enter 2 player names"
                                                     message:@"\n\n\n" // IMPORTANT
                                                    delegate:nil
                                           cancelButtonTitle:@"OK"
                                           otherButtonTitles:nil];

    player1 = [[UITextField alloc] initWithFrame:CGRectMake(12, 50, 260, 25)];
    [player1 setBackgroundColor:[UIColor whiteColor]];
    [player1 setPlaceholder:@"player1"];
    [player1 setTag:100]; // added this
    [prompt addSubview:player1];

    player2 = [[UITextField alloc] initWithFrame:CGRectMake(12, 85, 260, 25)];
    [player2 setBackgroundColor:[UIColor whiteColor]];
    [player2 setPlaceholder:@"player2"];
    [player2 setTag:200]; // added this
    [prompt addSubview:player2];

    // set place
    [prompt setTransform:CGAffineTransformMakeTranslation(0, 110)];
    [prompt show];
    //[prompt release];

    // set cursor and show keyboard
    [player1 becomeFirstResponder]; 
```

检索值

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {
        if (buttonIndex == 0)
        {
            NSLog(@"cancel");
        }
        else
        {
            UITextField *txtPlayer1 = (UITextField*)[alertView viewWithTag:100];
            NSLog(@"Value for player1: %@",txtPlayer1.text);

            UITextField *txtPlayer2 = (UITextField*)[alertView viewWithTag:200];
            NSLog(@"Value for player2: %@",txtPlayer2.text);

            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"OK works" message:@"no error" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
            [alert release];
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:43:56.063

我使用以下代码检查警报视图的按钮索引。

如前所述，在显示 UIAlertview 时也将委托设置为 self，然后...

```
 -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0) {
        NSLog(@"index 0 pressed ie cancel button");
        // do something when cancel pressed
    }
    else NSLog(@"index 1 pressed ie ok button");
         // do something when ok button pressed
} 
```

# recursion - 算术递归

> ID：15916623
> 
> 赞同：0
> 
> 时间：2013-04-10T03:54:17.703
> 
> 标签：recursion, scheme, arithmetic-expressions

我是计划的初学者，我正在尝试学习一些算术递归。我似乎无法使用方案来完成这项工作并产生正确的结果。对于我的示例，我试图通过对字符串中的每个字符进行算术运算来为字符串生成一个整数键。在这种情况下，字符串是一个列表，例如：'(hello). 我需要执行的算术是：

对于字符串中的每个字符，执行 --> (33 * 常量 + 字母在字母表中的位置) 其中常量是输入，字符串作为列表输入。

到目前为止，我有这个：

```
(define alphaTest
  (lambda (x)
    (cond ((eq? x 'a) 1)
          ((eq? x 'b) 2))))

(define test 
   (lambda (string constant)
      (if (null? string) 1
      (* (+ (* 33 constant) (alphaTest (car string))) (test (cdr string))) 
```

我正在尝试测试一个简单的字符串 (test '(ab) 2)，但我无法产生正确的结果。我意识到我的递归一定是错误的，但我一直在玩弄它几个小时，每次都碰壁。任何人都可以为实现这种算术递归提供任何帮助吗？谢谢，麻烦您了。请记住，我是 Scheme 语言的业余爱好者 :)

**编辑** 我想通过使新常量 = (+ (* 33 常量) (alphaTest (car string))) 在字符串的每次迭代中更改输入的常量。我期望输入字符串 '(ab) 和常量 2 的输出应如下所示：

第一次迭代 '(a): (+ (* 33 2) (1)) = 67 sum = 67, 常数变为 67
第二次迭代 '(b): (+ (* 33 67) (2)) = 2213 sum = 2213 , 常数变为 2213

```
(test '(a b) 2) => 2280 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:09:45.157

```
(define position-in-alphabet
  (let ([A (- (char->integer #\A) 1)])
    (lambda (ch)
      (- (char->integer (char-upcase ch)) A))))

(define (test chars constant)
  (define (loop chars result)
    (if (null? chars)
        result
        (let ((r (+ (* 33 result) (position-in-alphabet (car chars)))))
          (loop (rest chars) (+ r result)))))
  (loop chars constant))

(test (list #\a #\b) 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:27:44.347

这是你要找的吗？

```
(define position-in-alphabet
  (let ([A (- (char->integer #\A) 1)])
    (λ (ch)
      (- (char->integer (char-upcase ch)) A))))

(define make-key
  (λ (s constant)
    (let loop ([s s] [constant constant] [sum 0])
      (cond
        [(null? s)
          sum]
        [else
          (let ([delta (+ (* 33 constant) (position-in-alphabet (car s)))])
            (loop (cdr s) delta (+ sum delta)))]))))

(make-key (string->list ) 2) => 0
(make-key (string->list ab) 2) => 2280 
```

顺便说一句，该程序是否应该适用于包含字母以外的字符（如数字或空格）的字符串？在那种情况下，`position-in-alphabet`可能会产生一些令人惊讶的结果。要制作一个像样的密钥，您可能只需调用`char->integer`而不用`position-in-alphabet`. `char->integer`将为每个字符提供不同的数字，而不仅仅是字母表中的每个字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T05:39:56.577

这是一个解决方案（在 MIT-Gnu 方案中）：

```
(define (alphaTest x)
  (cond ((eq? x 'a) 1)
    ((eq? x 'b) 2)))

(define (test string constant)
  (if (null? string) 
      constant
      (test (cdr string) 
        (+ (* 33 constant) (alphaTest (car string)))))) 
```

示例输出：

```
(test '(a) 2)
;Value: 67

(test '(a b) 2)
;Value: 2213 
```

我只是在每个递归调用中转换常量，并在字符串用完时将其作为值返回。

我去掉了 lambda 表达式，以便更容易看到正在发生的事情。（此外，在这种情况下，实际上并不需要 lambda 形式。）

* * *

您的测试程序定义似乎被破坏：

```
(define test 
  (lambda (string constant)
    (if (null? string) 
    1
    (* (+ (* 33 constant) 
          (alphaTest (car string))) 
       (test (cdr string))) 
```

您的代码如下：

*   创建一个`test`接受两个参数的过程；`string`和`constant`。

*   如果`string`为 null，则传递值 1，以结束递归。否则，将以下值相乘：

    *   某项 x 即 = (33 * constant) + (alphaTest (car string))，以及
    *   某些术语 y 是递归传递（cdr 字符串）到测试过程的输出

我不知道术语 y 将如何评估，因为“测试”需要两个参数。我的解释器出错了。此外，括号是不平衡的。计算中有一些奇怪的地方，我无法指出 - 尝试进行纸质评估，看看在每个递归调用中可能会计算出什么。

# c# - MS Access 数据库不是最新的？（VS Web 开发者工作室）

> ID：15916630
> 
> 赞同：0
> 
> 时间：2013-04-10T03:54:43.230
> 
> 标签：c#, sql, ms-access, web

我正在学习 C# web dev 课程，目前正在尝试显示`.mdb`（Microsoft Access）数据库中的数据。我有两个页面都想在网格视图中显示存储在数据库中的表。一页的表格使用连接数据库然后将表格写入网格的功能。它连接到这个调用：

```
sqlConn = new OleDbConnection("PROVIDER=Microsoft.Jet.OLEDB.4.0;" +
        "Data Source=" + Database);

sqlDA = new OleDbDataAdapter("select * from tblPersonnel where LastName = '"+strSearch+"'", sqlConn);

//Initialize a new activity 
DS = new dsPersonnel();

//Add rows to the dataset from the data source
sqlDA.Fill(DS.tblPersonnel); 
```

该数据库称为`PayrollSystem_DB.mdb`. 在另一个页面中，我在页面上放置了一个`SqlDataSource`控件并将其连接到`PayrollSystem_DB.mdb`. 然后将此设置为`gridView`. 但是，在运行时，第一页显示了一个长表，其中包含我自上周以来输入的数据。第二页仅显示我测试它的第一天的数据。查看 vs explorer 中的数据库，表格与第二页相同。

所以我想知道第一页显示的所有其他数据是否都被存储？我是否在不知不觉中使用了我在解决方案中看不到的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:30:22.653

只是一个猜测，但是您是否尝试过清除浏览器缓存然后再次查看第一页？试试看。如果数据仍然显示，我会比较插入前后 MDB 的大小，以查看 MDB 是否增长。如果没有，请尝试搜索 PC 上的所有文件，将其限制为仅最近修改的文件，我认为这至少可以帮助您找到数据的存储位置。

# php - 在 php 类中无效的参数

> ID：15916632
> 
> 赞同：-1
> 
> 时间：2013-04-10T03:54:48.703
> 
> 标签：php, class

我试图创建我使用 php 类登录我已经检查了所有内容以及该站点的其他答案，但它向我显示警告“为 foreach 提供的参数无效”这是我的登录表单和类代码，请检查并帮助

```
<?php
session_start();

if(isset($_POST['login']))
{

    include('/class.login.php');
    $login= new Login();

    if($login->isLoggedIn())
        echo "yepeee";
    else
        $login->showErrors();
}

$token= $_SESSION['token']= md5(uniqid(rand(),true));

?>

<form method="post" action="<?=$_SERVER['PHP_SELF'];?>">
username <input type="text" name="username">
<br>
pass<input type="password" name="password">
<input type="hidden" name="token" value="<?=$_SESSION['token'];?>">
<input type="submit" name="login">
</form> 
```

班级代码

```
<?php

class Login
{
    private $_id;
    private $_username;
    private $_password;
    private $_passmd5;

    private $_errors;
    private $_access;
    private $_login;
    private $_token;

    function _construct()
    {
        $this->_errors= array();
        $this->_login= isset($_POST['login'])? 1 : 0;
        $this->_access=0;
        $this->_token=$_POST['token'];

        $this->_id=0;
        $this->_username=($this->_login)? $this->filter($_POST['username']): $_SESSION['username'];
        $this->_password=($this->_login)? $this->filter($_POST['password']): '';
        $this->_password=($this->_login)? md5($this->_password): $_SESSION['password'];

    }

    function isLoggedIn()
    {
        ($this->_login)? $this->verifyPost() : $this->verifySession();
        return $this->_access;
    }

    function filter($var)
    {
        return preg_replace('/[^a-zA-Z0-9]/', '', $var);
    }

    function verifyPost()
    {
        try
        {
            if(!$this->isTokenValid())
                throw new Exception("Invalid Token");
            if(!$this->isDataValid())
                throw new Exception("invalid from data");
            if(!$this->verifyDatabase())
                throw new Exception("invalid username pass");

        $this->_access=1;
        $this->registerSession();

        }
        catch(Exception $e)
        {
            $this->_errors[]= $e->getMessage();
        }
    }

    function verifySession()
    {
        if($this->sessionExist() && $this->verifyDatabase())
            $this->_access=1;
    }

    function verifyDatabase()
    {
        mysql_connect("localhost", "root", "")or die("cannot connect to server"); 
        mysql_select_db("test")or die("cannot select DB");

        $data=mysql_query("select id from user where username='($this->_username)' and password='($this->_passmd5)'");

        if(mysql_num_rows($data))
        {
            list($this->_id)= @array_values(mysql_fetch_assoc($data));
            return true;
        }
        else
            { return false; }
    }

    function isDataValid()
    {
        return preg_match('/^[a-zA-Z0-9](5,12)$/', $this->_username) && preg_match('/^[a-zA-Z0-9](5,12)$/', $this->_password)?1 :0;
    }

    function isTokenValid()
    {
        return (!isset($_SESSION['token']) || $this->_token != $_SESSION['token'])? 0 :1;
    }

    function registerSession()
    {
        $_SESSION['ID']=$this->_id;
        $_SESSION['username']=$this->_username;
        $_SESSION['password']=$this->_passmd5;

    }

    function sessionExist()
    {
        return(isset($_SESSION['username']) && isset($_SESSION['password'])) ? 1:0;
    }

    function showErrors()
    {
     echo "Error";
     foreach($this->_errors as $key=>$value)
        echo $value."<br>";
    }
}

?> 
```

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T04:00:53.340

`function _construct()`

魔术方法的两个下划线。这应该是`__construct()`。

这导致您看到的错误的原因是您的构造函数在您调用时没有运行`new Login()`，因此`$this->_errors`从未正确初始化为`array()`. 然后，当您的`foreach($this->_errors ... )`循环运行时，它会尝试迭代`null`并且您会收到该错误。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-10T04:00:42.863

foreach 要执行，`$this->_errors`应该是一个数组。

尝试改变

```
foreach($this->_errors as $key=>$value)
        echo $value."<br>";
    } 
```

到

```
foreach($this->_errors[] as $key=>$value)
        echo $value."<br>";
    } 
```

# mongodb - 在 MongoDb 中更新 3 级嵌套值

> ID：15916633
> 
> 赞同：1
> 
> 时间：2013-04-10T03:54:54.297
> 
> 标签：mongodb, nosql

从 [MongoDb 关于更新的官方文档] ( [http://docs.mongodb.org/manual/core/update/#Updating-The%24positionaloperator](http://docs.mongodb.org/manual/core/update/#Updating-The%24positionaloperator) )，我读到：

> 以下操作在 bios 集合中查询第一个文档，其中 _id 字段等于 6，awards 数组包含一个子文档元素，其 by 字段等于 ACM。如果找到，update() 方法会更新第一个匹配子文档中的 by 字段：

```
db.bios.update(
   { _id: 6, 'awards.by': 'ACM'  } ,
   { $set: { 'awards.$.by': 'Association for Computing Machinery' } }
) 
```

如果我在这里需要另一个嵌套级别怎么办？也就是说，如果不是：

`{ _id: 6, awards: [ { by: 'ACM', prize: 1000}, { by: 'ACS', prize: 2000} ] }`

我有类似的东西

`{ _id: 6, companies: [ { name: 'yyy', awards: [ { by: 'ACM', prize: 1000}, { by: 'ACS', prize: 2000 } ] } ] }`

我想更新 id 为 6、company.name 为“yyy”、company.$.awards.$.by 为“ACM”的那个？这在 MongoDB 中是否可行？

默克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:18:57.963

我不敢说你做不到。

甚至还有开放的 JIRA 票：[https](https://jira.mongodb.org/browse/SERVER-831) ://jira.mongodb.org/browse/SERVER-831 。

在 mongoDB 团队提出解决方案之前，您必须更改模式设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-26T09:39:53.943

现在您可以使用`$[]`运算符来执行此操作：

```
db.coll.update({}, {$set: {"a.$[i].b.$[j].c": 5}},  {arrayFilters: [{"i.id": 1},{"j.c":1]});

Input: {a: [{id:1, b: [{c: 0},{c:1}]]} 
Output: {a: [{id:1, b: {[c:0},{c:5}]]} 
```

您将在内部指定所有需要的过滤器`arrayFilters`。

# javascript - 防止 .load() 覆盖我的 html？

> ID：15916634
> 
> 赞同：0
> 
> 时间：2013-04-10T03:55:01.710
> 
> 标签：javascript, ajax, load

在我的主 html 文件中，我试图用`id="contentToLoad"`. 所有加载的 html 都将附加到`id="allWrapper"`我的 main.html 文件中。

```
$(function () {
  for(i = 1; i <= 4; i++) {
    $('#allWrapper').load('htmlFile' + i + '.html #contentToLoad', function () {
      $(this).appendTo('#allWrapper')
      //alert('Load was performed.');
    });
  }
}); 
```

我遇到的一个问题是每个新添加的 html 内容都会被前一个内容覆盖。如何在不覆盖每个 html 文件的情况下显示所有这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:50:29.400

找到了解决办法，代码如下：

```
<script type="text/javascript">

$(function(){

for (i=1;i<=4;i++)
{

    $.get('htmlFile' + i + '.html #contentToLoad', function(data){
      $(data).appendTo('#allWrapper') 
    });

}

});

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:58:34.683

这就是负载的工作原理，请尝试使用 $.get 代替。

```
for (i=1;i<=4;i++)
{
    $.get('htmlFile' + i + '.html', function(data) {
        $(data).find('#contentToLoad').appendTo('#allWrapper') 
        //alert('Load was performed.');
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:59:29.723

该[`load`](http://api.jquery.com/load/)方法的重点是将 GET 请求中的 HTML 插入到您选择的 DOM 元素中。

您将要使用的是该[`get`](http://api.jquery.com/jQuery.get/)方法，尤其是在 jQuery 文档的第一个示例中如何使用它：

```
$.get('ajax/test.html', function(data) {
  $('#allWrapper').append($(data).find('#contentToLoad'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T04:01:42.733

尝试将其存储到一个变量并将该变量附加到您想要的任何容器中

```
var mycode = $('<div></div>');

mycode.load('htmlFile' + i + '.html #contentToLoad', function() {
    var x = mycode.html();
    $('#allWrapper').append(x);
}); 
```

试试看。

# ios - 子浏览器插件在 iOS 的 Cordova 2.3.0 中不起作用

> ID：15916644
> 
> 赞同：2
> 
> 时间：2013-04-10T03:55:29.620
> 
> 标签：ios, cordova

我在 Cordova 2.3.0 中集成了子浏览器 + Google Oauth。但是子浏览器插件在 iOS 中不起作用。

这是集成问题吗？

我已经集成了以下链接中提到的使用步骤：

*   [谷歌 Oauth 集成](http://www.itsalif.info/content/oauth-google-api-gapi-phonegap-childbrowser-jquery)
*   [子浏览器](http://blog.digitalbackcountry.com/2012/03/installing-the-childbrowser-plugin-for-ios-with-phonegapcordova-1-5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:17:23.987

您可以使用包含在 phonegap 包中的 InAppBrowser。它是在 Phonegap/Cordova 2.3.0 中引入的，所以你很高兴。

参考[http://docs.phonegap.com/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

# java - JBOSS login-config.xml 和 *-ds.xml（映射数据源）

> ID：15916645
> 
> 赞同：0
> 
> 时间：2013-04-10T03:55:29.697
> 
> 标签：java, jboss, jboss5.x, login-config.xml

如何将 jboss *-ds.xml（在 server/default/deploy 中）中的两个不同数据源映射到 login-config.xml（在 server/default/conf 中）中的两个单独的登录模块？

（数据源位于两个不同的 IP 地址）

到目前为止，我已经尝试了以下方法，但无济于事：

***-ds.xml**

```
<connection-url>jdbc:mysql:loadbalance://hostip1,hostip2:port/dbname?loadBalanceBlacklistTimeout=5000</connection-url>

<security-domain>Policy1</security-domain> 
```

**登录-config.xml**

```
<application-policy name="Policy1">
<authentication>

  <login-module code="org.jboss.resource.security.SecureIdentityLoginModule" flag="sufficient">
<module-option name="username">userforip1</module-option>
<module-option name="password">pwdforip1</module-option>
</login-module>

  <login-module code="org.jboss.resource.security.SecureIdentityLoginModule" flag="sufficient">
<module-option name="username">userforip2</module-option>
<module-option name="password">pwdforip2</module-option>
</login-module>

</authentication>
</application-policy> 
```

还需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T14:01:34.143

如果您的项目有接缝，您可以使用编程方式让实体管理器使persistenceUnitName 对于每个用户都不同，例如：

EntityManager em =(EntityManager) org.jboss.seam.Component.getInstance("persistenceUnitName" + user.getName(), true);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:32:07.487

我试图弄清楚一些事情，但您似乎无法使用默认登录模块做任何事情。

我想到的唯一解决方案是创建自定义登录模块并实现所需的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:47:03.487

```
<local-tx-datasource>
    <jndi-name>Name1</jndi-name>
    <connection-url>jdbc:mysql://Host1:Port1/catissuecore</connection-url>
    <user-name>user1</user-name>
    <password>pwd1</password>
    <driver-class>org.gjt.mm.mysql.Driver</driver-class>
    <check-valid-connection-sql>select 1</check-valid-connection-sql>
</local-tx-datasource>
<local-tx-datasource>
    <jndi-name>Name2</jndi-name>
    <connection-url>jdbc:mysql://Host2:Port2/catissuecore</connection-url>
    <user-name>user2</user-name>
    <password>pwd2</password>
    <driver-class>org.gjt.mm.mysql.Driver</driver-class>
    <check-valid-connection-sql>select 1</check-valid-connection-sql>
</local-tx-datasource> 
```

以上是您可以用于您的目的的数据源文件。用户应具有适当的权限和访问权限。

# java - 流数据服务（网络服务）

> ID：15916650
> 
> 赞同：1
> 
> 时间：2013-04-10T03:56:03.610
> 
> 标签：java, web-services, amazon-web-services

我想编写从客户端（Android/Iphone）获取数据并实时推送到客户端（比如网站）的网络服务。Android不断向服务器发送数据，网站上应该显示相同的信息。

发送的数据将是纯文本文件。我在 android 上的应用程序将每秒生成纯文本，并将其发送到服务器。网站上应显示相同的纯文本。

```
-------            --------                  --------  
Android     ---->  Server      ------>       Website 
-------            --------                  -------- 
```

您建议使用哪些技术来实现实时结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:54:11.093

如果没有关于这个故事的更多信息，我可以想到一些建议，我相信有很多方法可以解决这个问题。

**情况 1：消息未经编辑发送到网站**- 这是迄今为止最简单的情况，您可以使用[Pusher.com](http://pusher.com)（或类似的东西）而不是编写自己的服务器。Android Client 提供了一个 android 客户[端](http://pusher.com/docs/client_libraries#android-java)。但这只有在您不想操纵 Android 和网站之间的消息时才有效。如果您希望服务器了解消息（例如出于日志记录的原因），您还可以让服务器收听与网站相同的频道。

```
-------            --------                  --------  
Android     ---->  Pusher.com      ------>   Website 
-------            --------                  -------- 
```

**案例2：您的服务器需要在中间或者您需要拥有中间人**-

这种设计可能比你想象的更狡猾。这仅取决于许多因素。
例如：

*   您的服务器需要水平扩展还是需要 HA？
*   Android 设备是仅与一个 WebClient 通信还是向多个 WebClient 发布：1 对 1 通道或 pub/sub？
*   它有多少服务器处理跟上您的入站负载。
*   您是否需要检索 WebClients 离线时产生的消息。
*   您需要支持哪些浏览器/android 版本。
*   ETC...

基于这些因素，您最终可能需要支持这样的设计：

```
 --------  
                              ---------- out-channel ->  WebClient0
                             |                           -------- 
-------                    --------                      --------  
Android  -- in-channel --> server1 ---- out-channel ->   WebClient1
-------               |    --------                      -------- 
                      |    --------                      --------  
                      \--> server2  ---- out-channel ->  WebClient2 
                           --------                      -------- 
```

一些帮助您入门的基本框架：

1.  [Pusher.com](http://pusher.com) - 您可以在两个入站/出站通道之间使用您的服务器的两个推送通道。
2.  [http://socket.io/](http://socket.io/) - 这是一个非常容易使用的 node.js 模块。它包含一个 JavaScript 库，是您出站渠道的绝佳选择。YFI：这个项目也有一个移植到 Java/Netty 的端口。
3.  [http://aws.amazon.com/sqs/](http://aws.amazon.com/sqs/) - 这是 AWS 提供的分布式队列。由于跨源策略，它不适用于 Web 浏览器，但 Android 可以很好地向它提交消息。因此，它可以用于入站通道。另外（如 Pusher 通道）SQS 队列支持 pub/sub，因此您可以将消息发布到所有服务器。

有很多框架可以处理实时处理，但在不了解更多信息的情况下，我将限制对这些基础知识的回答。

# c# - BinaryFormatter.Serialize(Image) - ExternalException - GDI+ 中发生一般错误

> ID：15916661
> 
> 赞同：3
> 
> 时间：2013-04-10T03:57:06.943
> 
> 标签：c#, gdi+

当我尝试使用 BinaryFormatter 对*一些*图像进行序列化时，我会得到一个 ExternalException - GDI+ 中发生一般错误。” 在摸索了一会儿之后，我决定创建一个简单的测试项目来缩小问题范围：

```
 static void Main(string[] args)
    {
        string file = @"C:\temp\delme.jpg";

        //Image i = new Bitmap(file);
        //using(FileStream fs = new FileStream(file, FileMode.Open, FileAccess.Read))

        byte[] data = File.ReadAllBytes(file);
        using(MemoryStream originalms = new MemoryStream(data))
        {
            using (Image i = Image.FromStream(originalms))
            {
                BinaryFormatter bf = new BinaryFormatter();

                using (MemoryStream ms = new MemoryStream())
                {
                    // Throws ExternalException on Windows 7, not Windows XP
                    bf.Serialize(ms, i);
                }
            }
        }
    } 
```

对于特定的图像，我尝试了各种加载图像的方法，即使以管理员身份运行程序，我也无法让它在 Windows 7 下工作。

我已将完全相同的可执行文件和映像复制到我的 Windows XP VMWare 实例中，我没有任何问题。

任何人都知道为什么某些图像在 Windows 7 下无法运行，但在 XP 下运行？

* * *

这是其中一张图片： [http ://www.2shared.com/file/7wAXL88i/SO_testimage.html](http://www.2shared.com/file/7wAXL88i/SO_testimage.html)

delme.jpg md5: 3d7e832db108de35400edc28142a8281

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:27:27.433

正如 OP 指出的那样，提供的代码引发了一个异常，该异常似乎只发生在他提供的图像上，但适用于我机器上的其他图像。

**选项1**

```
static void Main(string[] args)
{
    string file = @"C:\Users\Public\Pictures\delme.jpg";

    byte[] data = File.ReadAllBytes(file);
    using (MemoryStream originalms = new MemoryStream(data))
    {
        using (Image i = Image.FromStream(originalms))
        {
            BinaryFormatter bf = new BinaryFormatter();

            using (MemoryStream ms = new MemoryStream())
            {
                // Throws ExternalException on Windows 7, not Windows XP                        
                //bf.Serialize(ms, i);

                i.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp); // Works
                i.Save(ms, System.Drawing.Imaging.ImageFormat.Png); // Works
                i.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg); // Fails
            }    
         }
     }
} 
```

有问题的图像可能是使用添加了一些干扰 JPEG 序列化的附加信息的工具创建的。

PS 图像*可以*使用**BMP**或**PNG**格式保存到内存流。如果可以选择更改格式，那么您可以尝试其中一种或**ImageFormat**中定义的任何其他格式。

**选项 2** 如果您的目标只是将图像文件的内容放入内存流中，那么执行以下操作会有所帮助

```
static void Main(string[] args)
{
    string file = @"C:\Users\Public\Pictures\delme.jpg";
    using (FileStream fileStream = File.OpenRead(file))
    {
        MemoryStream memStream = new MemoryStream();
        memStream.SetLength(fileStream.Length);
        fileStream.Read(memStream.GetBuffer(), 0, (int)fileStream.Length);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T04:09:07.617

尽管`Bitmap`该类被标记为`[Serializable]`，但它实际上并不支持序列化。您可以做的最好的事情是序列化包含原始图像数据，然后使用和方法`byte[]`重新创建它。`MemoryStream``Image.FromStream()`

我无法解释您遇到的不一致行为；对我来说，它无条件地失败（尽管我在尝试在不同的应用程序域之间编组图像时首先发现了这一点，而不是手动序列化它们）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T04:49:19.387

我不确定，但我会倾向于 XP 与 Windows 7 的不同安全模型。图像继承自 System.MarshalByRefObject。执行序列化时，可能在应用程序域之间进行代理。此代理可能在 Windows 7 中被禁止。

[http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject%28v=vs.71%29.aspx)

# php - 在Javascript中下标字符串

> ID：15916662
> 
> 赞同：0
> 
> 时间：2013-04-10T03:57:13.050
> 
> 标签：php, javascript, string, subscript

我在对象中有一个数据，`section_data.title`我正在尝试使用`str.sup()`where`str=section_data.title;`并`str`保存以下数据：

> str="医院或疗养院的每位患者不少于 30 净**平方英尺**（2.8 净**平方米**），或有限护理机构的每位居民不少于 15 净**平方英尺**（1.4 净 **平方米**），应在聚合区域内提供走廊、病房、治疗室、休息室或用餐区以及水平出口两侧的其他类似区域。在不容纳床位或垃圾患者的楼层上，每位居住者不得少于 6 净**平方英尺**（0.56 净**平方米**）在水平出口的每一侧提供相邻隔间的乘客总数。”

现在我想为上面指出的粗体字添加上标（例如**ft2**）。我该如何使用`str.sup()`或有任何其他替代方法`so in javascript?`或任何其他技巧来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:01:53.227

javascript中的字符串未格式化。只有在输出到 HTML 时才能这样做。所以基本上你必须这样写

```
var str = "Not less than 30 net ft<sup>2</sup> (2.8 net m<sup>2</sup>)";
document.write(str); 
```

您可以对所有包含的字符串进行查找和替换，`ft2`并将`m2`它们转换`ft<sup>2</sup>`为`m<sup>2</sup>`

```
str.replace(/ft2/g,"ft<sup>2</sup>");  //But it not safe... 
```

# algorithm - 如何使用机器学习算法识别 URL 中的新模式（文本挖掘）

> ID：15916668
> 
> 赞同：1
> 
> 时间：2013-04-10T03:57:45.513
> 
> 标签：algorithm, machine-learning, data-mining, text-mining, web-analytics

在分析了许多 URL 后，我试图识别新模式。因此，假设我正在调查假设的网站 Yoohle.com，它们的 URL 具有以下结构。

*   域 = yoohle.com
*   q= 搜索词组
*   lan= 使用的语言
*   公关=合作伙伴ID
*   br = browser_id

所以一个示例网址看起来像这样

```
www.yoohle.com/test_folder/test_page?q=hello+world&lan=en&pr=stackoverflow&br=chrome 
```

如果我正在调查该网站的网络流量并看到逐月异常增加，我想找出造成这种情况的原因。在这个例子中，我可以只解析 URL 并查看 pr= 值，因为它会告诉我是否有新的合作伙伴关系（也许 stackoverflow 将由 yoohle.com 提供支持并推动增长等）

问题是，我如何构建可以比较 2 个月（或更多）个月并准确告诉我推动增长的因素。我想得到类似的东西，“我们看到了增长，它是由以下模式驱动的”

```
www.yoohle.com/test_folder/test_page%pr=stackoverflow% 
```

棘手的部分是，与此示例不同，您对令牌的含义一无所知，因为我不知道什么令牌代表 partner_id。另一个问题是，如果我们逐个标记，这将产生误导，因为假设用户仍将使用英语作为语言，lan=en 也会与新的合作伙伴一起使用。

我的想法是通过查看所有组合来分析令牌，但这非常昂贵（在这个例子中是 4！，对于其他网站可能是 10+！）。同样分析令牌本身也不能解决问题，因为我仍然需要分析令牌的值。

我尝试了 k-means 聚类，先验算法对 URL/文本挖掘做了一些研究，但无法得到我想要的。任何关于如何构建算法的想法都是有益的。

想象一下，您正在查看实时数据，因此我们正在讨论在给定月份分析大约 10 万个 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:47:23.813

我会走下面的路。您可以创建下表：

```
URL
time
time_month -- time rounded to month, for demonstration purpose
q_bol   -- boolean flag whether question parameter was used
q       -- question parameter value
lan     -- language parameter value
lan_bol -- boolean flag whether language parameter was used
pr      -- partner parameter value
pr_bol  -- boolean flag whether partner parameter was used
br      -- browser parameter value
br_bol  -- boolean flag whether browse parameter was used 
```

现在，您可以编写一些查询。

```
with t as (
select 
  time_month,
  q_bol, lan_bol, pr_bol, br_bol, count(*)
from
  urldata
where
  time_month > '2013-02-01'::date and time_month < '2013-04-01'::date -- last two months data
group by 
  time_month
)

, u as (
select
*,
t2-coalesce(t1,0) as abs_change, -- change in pattern MoM,
case when t1 is null then 0 else t2/t1 end as relchange  -- relative change
from
t t1 full outer join t t2 using (q_bol, lan_bol, pr_bol, br_bol)
) 

select * from u where abs_change > 5000 or relchange > 3 
```

上面的查询为您提供了每月变化超过 5000 次或每月增加超过 300% 的参数模式。如果您可以`group by rollup`在您的 sql 系统中使用它，它还会提供更高级别的聚合（三个参数、两个参数、一个参数的组合）。

你可以对参数值做同样的事情。因为您不知道值将出现哪些标记，所以您可以在以下表结构中解析 url：

```
-- urls
id_url
url
time

-- parameters
id_url
token
value 
```

然后你需要以某种方式重写上面的查询，例如你可以在 PostgreSQL 中使用数组聚合函数`array_agg()`。

# c++ - 使用历史（大）日期和时间（例如，公元前 11,043 年）的图书馆？

> ID：15916672
> 
> 赞同：14
> 
> 时间：2013-04-10T03:57:50.433
> 
> 标签：c++, c

是否有图书馆可以处理历史（大）日期（例如，公元前 11,043 年）？得到世纪，千年？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T07:20:14.130

For dates and times in general, there's the standard C++11 time classes, and the Glib library offers the GDateTime class, with a C++ binding Glib::DateTime in glibmm. Maybe the Boost libraries have a similar interface too.

If you need historical dates like when there were dinosaurs, you can write your own simple class (unless one of the options I mentioned are good enough, in which case computing the century or millenium by yourself is very easy).

Edit: Most implementations represent time as the number of second or microseconds in Unix time, i.e. since 1970, which means even a 64 bit integer may not be able to represent ancient times (you can try calculating or web-searching or reading on Wikipedia about these limits).

In this case a nice solution can be to use a separate AncientTime class which has just a year, and anything else you need, like month/day/hour can be imlemented by using a simple standrd DateTime class, in which you may ignore the year or keep it normalized to 0 through a thin wrapper.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:17:26.403

看看`dateutil`。

[重复规则](http://labix.org/python-dateutil#head-470fa22b2db72000d7abe698a5783a46b0731b57)和[相对增量](http://labix.org/python-dateutil#head-ba5ffd4df8111d1b83fc194b97ebecf837add454)是您想要的。

# iphone - NSDate dateByAddingTimeInterval 减去天数错误地更改时间

> ID：15916673
> 
> 赞同：5
> 
> 时间：2013-04-10T03:57:55.330
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nsdate

我是否遗漏了有关 NSDate dateByAddingTimeInterval 如何处理天数的信息？这是我从特定日期（AIDate）中减去 33 天的代码。AIDate 的时间值为 00:00 PST。

```
activityOne.ActivityDateTime = [AIDate dateByAddingTimeInterval:-33*24*60*60]; 
```

如果 AIDate 等于 4-9-2013 00:00 PST，上述代码将减去 33 天零 1 小时，得出 2013 年 3 月 6 日 23:00 PST。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T04:16:56.877

24*60*60 表示 24 小时，而不是 1 天。当您的计算跨越夏令时的变化时，这两者之间存在巨大差异。

巧合的是 33 天前，您所在的时区没有夏令时。

正确的方法是使用 NSDateComponents。像这样：

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
NSDateComponents *offset = [[NSDateComponents alloc] init];
[offset setDay:-33];
NSDate *offsetedDate = [calendar dateByAddingComponents:offset toDate:[NSDate date] options:0]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T04:01:44.163

```
 NSDateComponents *dc = [[NSCalendar currentCalendar] components:NSDayCalendarUnit|NSMonthCalendarUnit|NSYearCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit|NSQuarterCalendarUnit fromDate:yourDate];
 [dc setDay:dc.day - 33];
 NSDate *noticeDate = [[NSCalendar currentCalendar] dateFromComponents:dc]; 
```

# javascript - 如何查找当前光标区域是否为子弹头

> ID：15916681
> 
> 赞同：0
> 
> 时间：2013-04-10T03:59:05.067
> 
> 标签：javascript

我有一个如下的 HTML 代码。

```
<html>
<body>
    <div id="Editbox" contentEditable="true"  
        style="border: solid 1px red; width: 600px; height: 300px; 
        overflow-y: scroll; overflow-x: scroll;">
        <ol style = "list-style-type:lower-alpha";>
        <li> hello </li>
        <li> how are you</li>
        </ol>
     </div>
</body>
</html> 
```

当我将光标放在“are”之后时，我想找到它是哪种类型的子弹。我的意思是项目符号的样式，无论是有序列表还是无序列表。如何找出相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:08:45.840

您不能将`onmouseover`事件绑定到，`characterData`但可以将其包装在跨度中并绑定到跨度元素。

```
<ol>
    <li/>
    <li>how are <span id="test">you</span></li>
    <li/>
</ol>

var test = document.getElementById('test');
test.onmouseover = function(){
    console.log(this.parentNode.parentNode.tagName);
}; 
```

演示：http: [//jsfiddle.net/AsFvT/](http://jsfiddle.net/AsFvT/)

# python - 在网站上运行 Python 文件

> ID：15916687
> 
> 赞同：2
> 
> 时间：2013-04-10T03:59:48.813
> 
> 标签：python, web

我完成了一些 python 教程，并想更进一步。我可以通过在桌面上按 f5（保存并运行）打开 IDLE 并执行代码，但这是我能力的限制。我希望能够在网页上执行程序

我尝试简单地将文件上传到我的服务器，然后在 chrome 中浏览它。我相信你知道发生了什么：url 在屏幕上显示文本。

由于我是 python 的新手，我不知道从哪里开始，甚至不知道要问什么问题。基本上我想在浏览器中运行程序，就好像浏览器是空闲的一样，或者更好的是，创建一个 html/css 按钮，在单击时运行程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T04:19:47.253

我建议您研究类似[flask](http://flask.pocoo.org/)的东西。它是一个包含基本 Web 服务器的微型框架。文档应该可以让您了解大部分您想要的方式。

在网络上运行 python 通常意味着当你点击一个 URL 时，服务器会运行某种 python 脚本，并返回一个字符串——你请求的页面的 HTML 内容。您不能像使用 javascript 那样使用 python 来“编写”网页。

不过，您可以在网页内运行的交互式解释器中运行 python - 只需查看[try ipython 即可](https://www.pythonanywhere.com/try-ipython/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T04:24:09.617

烧瓶很好。

Cherrypy - [http://www.cherrypy.org/](http://www.cherrypy.org/) - 也是在服务器上运行 python 的一种非常简单的方法的绝佳选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T04:34:43.490

从根本上说，您只需将 Web 服务器配置为执行文件而不是显示它。通常，您为`*.py`文件设置此设置，但您可以将其限制为特定目录中的文件。显然，您的服务器已经对 PHP 文件进行了这样的设置。

用 PHP 包装 Python（显然）既不会增加速度，也不会增加安全性或实用性。

下线您可能想查看框架、`mod_python`WSGI 等，但对于您的直接问题，这些都是严重的矫枉过正。

这仅限于静态服务器端代码；JavaScript 在访问者的浏览器中以交互方式运行，允许更丰富的用户交互。服务器端脚本在浏览器尝试加载页面时运行，并且在脚本完成后页面加载完成。如果您想在浏览器中使用 IDLE 之类的东西，那就是 JavaScript 挑战而不是 Python 任务（并且该特定轮子已经被发明、产品化、营销并出售给美国人： http: [//pythonfiddle.com/](http://pythonfiddle.com/)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-04T09:36:52.363

像这样：

```
python -c "import urllib2; exec urllib2.urlopen("http://localhost:8000/test.py").read()" 
```

# facebook - FB Graph API 说 Open Graph 类型未设置为正确的对象

> ID：15916693
> 
> 赞同：1
> 
> 时间：2013-04-10T04:00:56.303
> 
> 标签：facebook, facebook-graph-api, facebook-like

我发布了 8 个自定义对象/操作，以便我可以提交一个新的“集合”以供批准。FB几天前刚刚推出了这个功能。我想它伴随着他们即将发布的新图形布局。

在 API 资源管理器中，我尝试发布以下 URL

```
/me/sportannica:predict?victory=http://www.sportannica.com/predictions/90/predictions_post 
```

在尝试发布此内容时，我收到一条消息，内容如下：

```
"message": "(#3502) Object at URL http://www.sportannica.com/predictions/90/predictions_post has og:type of 'website'. The property 'victory' requires an object of og:type 'sportannica:victory'. " 
```

该警告信息似乎是错误的。当我用我的浏览器查看源代码时，你可以清楚地看到 FB open graph 标签。我认为造成这种情况的是like按钮。我通过页面上的“喜欢”按钮“喜欢”了这个给定的预测。

URL 中的最后一个参数是“predictions_post”。如果最终参数设置为其他任何参数，PHP 会将 og:type 设置为 article，以便可以使用“喜欢”按钮“点赞”它。但是，当它设置为“predictions_post”时，它会设置为适当的对象（胜利）。所以，我认为我喜欢这个预测可能与我的这个问题有关。有任何想法吗？

# c++ - 谁能给我_dupenv_s的示例代码？

> ID：15916695
> 
> 赞同：23
> 
> 时间：2013-04-10T04:01:02.553
> 
> 标签：c++, visual-c++

我正在使用`getenv("TEMP")`，但我收到一个警告，告诉我使用`_dupenv_s`.

我在网上找不到 _dupenv_s 的示例。

文档内容如下：

```
errno_t _dupenv_s(
   char **buffer,
   size_t *numberOfElements,
   const char *varname
); 
```

但他们指的是什么缓冲区？我只有varname。避免使用缓冲区不是更好吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-10T04:05:32.560

`_dupenv_s`是 Microsoft 的一项功能，设计为更安全的`getenv`.

`_dupenv_s`分配缓冲区本身；您必须将指针传递给指针，并将其设置为新分配的缓冲区的地址。

例如，

```
char* buf = nullptr;
size_t sz = 0;
if (_dupenv_s(&buf, &sz, "EnvVarName") == 0 && buf != nullptr)
{
    printf("EnvVarName = %s\n", buf);
    free(buf);
} 
```

请注意，您负责释放返回的缓冲区。

# asp.net-mvc - ASP.NET MVC 子应用程序

> ID：15916697
> 
> 赞同：1
> 
> 时间：2013-04-10T04:01:39.863
> 
> 标签：asp.net-mvc, iis

我在根级别有一个 ASP.NET MVC 应用程序（例如[http://example.com](http://example.com)），现在已经部署了一个额外的 ASP.NET MVC 应用程序作为子应用程序（例如[http://example.com/api](http://example.com/api)）。我已将子应用程序设置为 IIS 中的“应用程序”。

但是，每当我尝试导航到子应用程序时，都会收到 403.14 Forbidden 错误。就像子应用程序没有被当作 ASP.NET MVC 应用程序一样。如果我尝试在子应用程序中点击一个具有控制器/操作方法的 url（例如[http://example.com/api/home/index](http://example.com/api/home/index)），我会收到 404 响应。

在设置方面，我在 IIS 管理器中看到的唯一区别是子应用程序缺少“ISAPI 过滤器”图标。我正在运行 .NET 4.5、ASP.NET MVC 4 和 IIS 7.5。

有人对如何让这个 ASP.NET MVC 子应用程序工作有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:54:14.767

原来我`<system.webServer>`在我的子应用程序的配置中缺少以下配置：

```
<modules runAllManagedModulesForAllRequests="true"/> 
```

在我把它放进去之后，它开始将子应用程序识别为一个 ASP.NET MVC 站点。

# image - 高级椭圆检测算法的 C++ 实现在哪里？

> ID：15916703
> 
> 赞同：2
> 
> 时间：2013-04-10T04:02:17.150
> 
> 标签：image, opencv, pattern-matching, hough-transform

我是椭圆检测/提取领域的新手。但我知道这个话题有着悠久的历史。尽管有大量关于椭圆检测的论文，但我几乎找不到这些高级算法的任何 C++ 实现，例如直线 HT (SLHT)、快速椭圆霍夫变换 (FEHT) 和随机 HT (RHT)。我很好奇为什么研究人员不将他们的代码放到网上以便更多人可以从中受益？谁能告诉我在哪里可以找到任何 C++ 实现？谢谢。

（PS：我对OpenCV很熟悉。我知道OpenCV的实现很少，比如fitEllipse和HoughCircle。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:13:33.293

许多图像处理研究都是在 Matlab 中完成的，通常有该语言可用的实现。您看不到任何 C++ 实现的原因是因为它们更多地是关于实现的细节（内存管理、性能等），而不是实际的算法；Matlab 在这方面要简洁得多。

如果您真的想了解图像处理算法，您可能需要学习阅读 Matlab 代码。

# android - Android 中的 Tumblr 风格的 GridView

> ID：15916706
> 
> 赞同：5
> 
> 时间：2013-04-10T04:02:28.657
> 
> 标签：android, gridview, tumblr

一直在寻找可以创建类似于 tumblr 的 /archive 页面的网格视图的库。

例如：sweethomestyle.tumblr.com/archive 或任何 tumblr 博客然后 /archive

它所做的是保持图像的纵横比，但使它们都适合屏幕。我知道这是一个词，但我不确定它是什么。

我想在 android 中复制它，图像的大小都不同。

![Tumblr /存档示例](https://i.stack.imgur.com/sxqhf.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T09:46:47.237

最近我在[这里](https://stackoverflow.com/questions/18557720/gridview-with-different-cells-sizes-pinterest-style)发布了一个类似的问题。

我推荐[**PinterestLikeAdapterView 库**](https://github.com/huewu/PinterestLikeAdapterView)。

请注意，即使它的样本非常适中，它也可以具有相同的行为......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:57:40.457

也许这个库对你[有用 https://github.com/maurycyw/StaggeredGridView](https://github.com/maurycyw/StaggeredGridView)

# c# - 试图解决 Project Euler #1 的问题

> ID：15916712
> 
> 赞同：4
> 
> 时间：2013-04-10T04:03:16.003
> 
> 标签：c#

我在尝试制作一个小应用程序来解决[Project Euler Problem #1](http://projecteuler.net/problem=1)时遇到问题。

每当我尝试运行它时，它都会返回 0，而不是 233168。

我不一定要寻找绝对的答案，只是一些提示，我正在努力学习。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            int x;
            List<int> listOne = new List<int>();
            for (x = 1; x < 1000; ++x)
            {
                if(x%3 == 0 || x%5 == 0)
                {
                    listOne.Add(x);
                }
                Console.WriteLine(listOne.Sum());
                Console.ReadLine();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T04:06:39.047

为了帮助您学习，我不会提供确切的答案。

看看你的`Console.WriteLine()`陈述的范围。我的猜测是，当您认为它应该运行时，它并没有运行。

# android - 实现线程处理程序

> ID：15916714
> 
> 赞同：-4
> 
> 时间：2013-04-10T04:03:17.307
> 
> 标签：android, multithreading

我有以下代码，用于线程。当我运行应用程序时，我得到以下异常。

```
04-10 09:16:29.399: E/AndroidRuntime(14847): FATAL EXCEPTION: Thread-10
04-10 09:16:29.399: E/AndroidRuntime(14847): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
04-10 09:16:29.399: E/AndroidRuntime(14847):    at android.os.Handler.<init>(Handler.java:121)
04-10 09:16:29.399: E/AndroidRuntime(14847):    at android.widget.Toast.<init>(Toast.java:76)
04-10 09:16:29.399: E/AndroidRuntime(14847):    at android.widget.Toast.makeText(Toast.java:251)
04-10 09:16:29.399: E/AndroidRuntime(14847):    at com.mobilevoiceapps.speeddial.Class_Add_Contact$1.run(Class_Add_Contact.java:88)
04-10 09:16:29.399: E/AndroidRuntime(14847):    at java.lang.Thread.run(Thread.java:1019) 
```

这是我的代码:::

```
Thread myThread = new Thread(new Runnable(){
    @Override
    public void run()
    {
        try
        {
          while(!isLoaded)
          {
              Toast.makeText(Class_Add_Contact.this, "Retrieving Contacts.. Please Wait !!!", Toast.LENGTH_LONG).show();
              wait(5000);
          }
        }
        catch (Exception e)
        {

        }
        finally{
            // Exception at below line
            Toast.makeText(Class_Add_Contact.this, "Retrieving Contacts Complete", Toast.LENGTH_LONG).show();
        }
    }
});

myThread.start(); 
```

我如何为这段代码实现处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:16:53.057

这是我如何改变它并且它起作用了。

```
Thread myThread = new Thread(new Runnable(){
            Class_Add_Contact cladd = new Class_Add_Contact();

            @Override
            public void run()
            {
                try
                {
                  while(!isLoaded)
                  {
                      Toast.makeText(Class_Add_Contact.this, "Retrieving Contacts.. Please Wait !!!", Toast.LENGTH_LONG).show();
                      wait(5000);
                  }
                }
                catch (Exception e)
                {

                }
                finally{

                    //Toast.makeText(Class_Add_Contact.this, "Retrieving Contacts Complete", Toast.LENGTH_LONG).show();

                    cladd.runOnUiThread(new Runnable() {
                          public void run() {
                            Toast.makeText(Class_Add_Contact.this, "Retrieving Contacts Complete", Toast.LENGTH_SHORT).show();
                          }
                        });
                }
            }
        });

        myThread.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:17:44.313

尝试

```
 runOnUiThread(new Runnable() { @Override public void run() { 
    try
        {
          while(!isLoaded)
          {
              Toast.makeText(Class_Add_Contact.this, "Retrieving Contacts.. Please Wait     !!!", Toast.LENGTH_LONG).show();
              wait(5000);
          }
        }
        catch (Exception e)
        {

        }
        finally{
            // Exception at below line
            Toast.makeText(Class_Add_Contact.this, "Retrieving Contacts Complete", Toast.LENGTH_LONG).show();
        }
      }}); 
```

希望这可以帮助你。

# javascript - 试图理解 D3 的 selection.data() 作品

> ID：15916716
> 
> 赞同：0
> 
> 时间：2013-04-10T04:03:24.277
> 
> 标签：javascript, d3.js

我的 HTML 是这样的：

```
<div>1</div>
<div>10</div> 
```

我的 JS：

```
divs = d3.select("body").selectAll("div");
alert(divs[0].length);

divs = divs.data([2]);
alert(divs[0].length); 
```

我的 js 小提琴：

[http://jsfiddle.net/p2v3B/](http://jsfiddle.net/p2v3B/)

D3 的文档 - [https://github.com/mbostock/d3/wiki/Selections#wiki-data](https://github.com/mbostock/d3/wiki/Selections#wiki-data) - 建议 selection.data() “将指定的数据数组与当前选择加入”但是这个测试似乎表明它是不加入任何东西，而是完全替换它。

IE。有两个 div 然后在做 data() 之后只有一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:06:07.933

连接的工作方式是尝试将给定数据与现有元素进行匹配。如果你只给一个数据项，它最多可以匹配一个。在您的情况下，`2`与第一个现有元素匹配（因为默认情况下 d3 匹配基于数组中的索引），另一个`div`是`.exit()`选择的一部分。

目的是在更新显示的数据时使用它。以前有两个数据项，现在只有一个。一个将以某种方式更新，而另一个将被删除。

如果您还没有这样做，我建议您查看[三个小圆圈教程](http://mbostock.github.io/d3/tutorial/circle.html)，该教程更详细地解释和说明了这些概念。

# c# - SharePoint 沙盒化自定义工作流活动，可根据多个条件从另一个列表中获取价值

> ID：15916727
> 
> 赞同：0
> 
> 时间：2013-04-10T04:04:54.083
> 
> 标签：c#, sharepoint, workflow-activity, sandbox-solution

我正在尝试编写一个沙盒化的自定义工作流活动，该活动将转到另一个列表并根据多个其他字段的组合值获取一个字段的值。

**清单 A**

*   状态 - 查找状态列表
*   城市 - 查找城市列表
*   人口 - 数量
*   ...其他列

（基本上州和市的组合使该行唯一可识别）

**清单 B**

*   公司 - 查找公司列表
*   状态 - 查找状态列表
*   城市 - 查找城市列表
*   影响人口百分比 - 数量（百分比）
*   受影响的人口 - 数字字段（由自定义活动工作流程填写）
*   ...其他列

**约束：**

*   由于唯一/不同的权限，我无法将公司字段添加到列表 A
*   查找字段需要保持查找字段，不能转换为单行文本字段。
*   由于这些字段属于查找类型，因此我无法将它们与简单的计算列连接起来。
*   解决方案必须是沙盒而不是农场。我们不允许部署 dll，只能部署 .wsp

**问题：** 我需要的是在添加/更改的列表 B 项目上触发的沙盒自定义工作流活动。触发时，活动从列表 B 中的项目中获取州和城市值，转到列表 A 并搜索相同州和城市的组合。找到后，它会抓取相关的人口。最后，它将人口乘以“影响人口百分比”的百分比，并将结果粘贴到“受影响的人口”字段中。

**奖励：** 在某些时候，我还需要一个沙盒自定义工作流活动，该活动在列表 A 项目更改（人口字段）上触发。当特定州+城市组合的人口发生变化时，活动将转到列表 B 并更新所有公司（多行）满足相同州+城市的所有“受影响人口”字段。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:35:47.113

你需要的是一个事件接收器。你上面所说的没有让我相信你需要一个工作流程。查看我的博客以查看您的选择：

[http://mattbramer.blogspot.com/2012/11/binding-event-handlers-to-sharepoint.html](http://mattbramer.blogspot.com/2012/11/binding-event-handlers-to-sharepoint.html)

# python - 将基于列表值的字符串拆分为 Python 中的列表

> ID：15916728
> 
> 赞同：0
> 
> 时间：2013-04-10T04:05:05.297
> 
> 标签：python, list, roman-numerals

目前我正在尝试根据来自另一个列表的匹配值从一个字符串创建一个新列表。例如，我的值列表是：

```
['IX', 'C', 'D', 'XL', 'I', 'XC', 'M', 'L', 'CD', 'X', 'IV', 'CM'] 
```

都是罗马数字。我将如何使用罗马数字：

```
MMIX 
```

并将其拆分为：

```
['M', 'M', 'IX'] 
```

根据之前的列表。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:18:31.957

我不确定这种方法是否适用于解析罗马数字。例如，此代码无法正确解析`VIII`，但那是因为`V`不在令牌列表中。但这是一个简单的递归函数，它在输入字符串的开头查找一个标记并组装一个列表：

```
tokens = ['IX', 'C', 'D', 'XL', 'I', 'XC', 'M', 'L', 'CD', 'X', 'IV', 'CM']

def rn_split(numeral, results_so_far=[]):
    if len(numeral)==0:
        return results_so_far # Break the recursion
    for token in tokens:
        if numeral.startswith(token):
            results_so_far.append(token)
            recurse_numeral = numeral[ (len(token)): ]
            return rn_split(recurse_numeral, results_so_far)
    # Remainder of numeral didn't match.  Bail out
    results_so_far.append(numeral)
    return results_so_far 
```

# assembly - 汇编程序 (TASM) 计算提高 m 的 n 次方 (m^n)

> ID：15916733
> 
> 赞同：1
> 
> 时间：2013-04-10T04:05:37.867
> 
> 标签：assembly, x86

我已经编写了一半的程序。问题是我不知道如何编写数学运算部分的`m`代码`n (m^n)`。那么，对我这个初学者有什么建议吗？

```
.MODEL SMALL

.DATA

greet   db 13,10, "Welcome to Simple Calculator: Raise m to the power n. $"
msg1    db 13,10, 0AH,0DH,"Please enter integer (m:-99 to 99): $"
m       db 3,4 dup(?)
msg2    db 10,13, 0AH,0DH,"Please enter power (n:1 to 9): $"
n       db 3,4 dup(?)
total   db 10,13, "Answer: $"

.CODE

START:

mov ax, seg greet
mov ds, ax
mov dx, offset greet
mov ah, 09h     ;Display message
int 21h 

mov ax, seg msg1
mov ds, ax
mov dx, offset msg1
mov ah, 09h
int 21h         ;Print a message

mov ah, 0ah
mov dx, offset m
int 21h         ;Get 'm' value

n_POWER:

mov ax, seg msg2
mov ds, ax
mov dx, offset msg2
mov ah, 09h
int 21h         ;Print a message

mov ah, 0ah
mov dx, offset n    ;Get 'n' value
int 21h

mov ax, m
mov n, ax
mul ax, n
mov total, n

finish:
mov ah, 09h ;Display message
int 21h

mov ax,4c00h    ;Return control to DOS
int 21h         
end start 
```

另外，我怎样才能从用户那里得到负面的输入（例如`-99`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:59:30.887

您可以重复乘法，如下所示：

```
int result = 1;  while (exp-->0) { result *= base; } return result; 
```

或者，您可以/应该以二进制表示形式处理指数：

```
5^13 = 5^(0b1101) = 1*(5^1)*(5^4)*(5^8) 
```

因此，人们可以重复计算以 5 为底的副本：5 -> 25 -> 625 -> 390625，并将在指数的二进制表示中具有相应位设置的那些项相乘*。*

这对于 16 位算术来说可能是多余的，但如果您的教授要求您执行模幂运算（如在非对称密码学中使用的那样），它会很方便。

两种方法都需要使用*条件*跳转：

有条件地重复`cx`操作次数，只需简单地执行以下操作：

```
 mov cx, 13
label:   nop  // put your block of code here
         nop
         loop label;  // The instruction at label will be executed 13 times
         // and cx will end up being zero 
```

要测试正在设置的位，可以这样做

```
 mov dx, 13      ;; let's have the exponent here
label:   test dx, 1      ;; check if the first bit is zero
                         ;; test performs bitwise _and_ between the operand
                         ;; and sets ZERO flag (among other things)
         jz   notset     
         nop             ;; insert here the statements to be executed
                         ;; when the bit in the exponent is set
notset:  shr dx, 1       ;; shift out the least significant bit -- this also
                         ;; sets the ZERO_FLAG if dx goes to zero
                         ;; (and it eventually does)
         jne label;      ;; 
```

顺便提一句。JNE == Jump if Not Equal 也测试零标志。如果不为零，则跳跃是同义词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:34:52.190

计算整数幂只是一系列乘法。例如，5^2 == 5*5、2^3 == 2*2*2 等等。

因此，一个简单的乘法循环就足够了：

```
mov bx,5   ; m
mov cx,3   ; n
mov ax,1   ; Initial result, i.e. m^0
power:
    jcxz power_done
    mul bx
    loop power
power_done:
; ax now contains m^n 
```

请注意，我的示例代码不处理结果增长大于 16 位的情况（除了在最后一次迭代中隐含）。它也不处理`m`. 我将把它作为练习留给你，让你在需要时查找指令集参考，以了解解决这些问题的方法。

# javascript - 将鼠标悬停在一个 div 上并更改另一个 div 的背景

> ID：15916736
> 
> 赞同：1
> 
> 时间：2013-04-10T04:05:58.173
> 
> 标签：javascript, image, html, hover

我一直在使用

```
$(function(){
$("#print").hover(function(){
$("#headerright").toggleClass("img/divright.jpg");
});
}); 
```

当我将鼠标悬停在我的 div id“print”（其中有一个图像）上时，是否可以更改我的另一个 div 的背景（headderright）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:09:10.190

```
$("#headerright").toggleClass("img/divright.jpg") 
```

您必须提供类名，但您要提供图像路径。你可以这样做

```
.class1{
background-image:url('image1.gif');
}
.class2{
background-image:url('image2.gif');
} 
```

并在hove将toggleClass更改为

```
$("#headerright").toggleClass('class1').toggleClass('class2') 
```

并最初`class1`作为你的 div 的一个类，带有 id`headerright`

**编辑** 我从您的讨论中了解的内容。将悬停功能更改为此

```
$("#print").hover(function() {
    $("#headerright").css("background-image","url('img/divright.jpg')");
},function(){
   $("#headerright").css("background-image"," ");
}); 
```

你可以试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:12:42.593

尝试

```
$("#print").hover(function() {
    $("#headerright").addClass("my-background");
},function(){
    $("#headerright").removeClass("my-background");
}); 
```

然后定义一个css样式

```
.my-background{
    background: img/divright.jpg;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/PurgD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:15:27.610

```
 Try this: it will change the background:     

 $(function(){
 $("#print").hover(function(){
  $("#headerright").css("background-image","url('img/divright.jpg')");
 });
 });

If u have image on print div it will change the src and display the other image.. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T04:17:16.367

创建一个新类

```
 .backgroungEG {

     background-image :  "img/divright.jpg"
  }

  $("#print").hover(function(){
    $("#headerright").addClass("backgroungEG ");
  }); 
```

我希望这有效..

# c# - TextBox LostFocus 无限循环

> ID：15916743
> 
> 赞同：1
> 
> 时间：2013-04-10T04:07:02.743
> 
> 标签：c#, wpf

我的表单中有一个文本框供用户输入项目代码。当文本框失去焦点时，它将查看数据库以检查项目代码是否存在。但是，当我尝试通过单击其他文本框来失去焦点时，我会陷入无限循环。

```
 private void txtICode_LostFocus(object sender, RoutedEventArgs e)
    {
        if (txtICode.IsFocused != true)
        {
            if (NewData)
            {
                if (txtICode.Text != null)
                {
                    if (txtICode.Text != "")
                    {
                        Item temp = new Item();
                        Item[] list = temp.Query(new object[] { Item.DataEnum.Item_Code }, new string[] { txtICode.Text });
                        if (list.Length > 0)
                        {
                            System.Windows.Forms.MessageBox.Show("This item code is already being used.", "Invalid information");
                            txtICode.Focus();
                            return;
                        }
                    }
                }
            }
        }
    } 
```

`txtICode.IsFocused`每次方法结束后都将其设置为true，并且循环将永远继续。我尝试删除`txtICode.Focus();`，但没有任何区别。我的代码有什么问题吗？

我正在为我的表单使用 .Net 3.5 和 WPF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:21:25.387

您不必`TextBox`在 LostFocus 事件中恢复焦点。

删除这两行：

```
txtICode.Focus();
return; 
```

* * *

您可以以更干净和可读的方式实现代码：

```
private void txtICode_LostFocus(object sender, RoutedEventArgs e)
{        
    if (!NewData)
        return;

    if (String.IsNullOrEmpty(txtICode.Text))
        return;

    Item temp = new Item();
    Item[] list = temp.Query(new object[] { Item.DataEnum.Item_Code }, new string[] { txtICode.Text });
    if (list.Length > 0)
    {
        System.Windows.Forms.MessageBox.Show("This item code is already being used.", "Invalid information");
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:22:22.010

您可以使用[BeginInvoke 方法](http://msdn.microsoft.com/en-au/library/cc190259%28v=vs.95%29.aspx)异步执行：

```
private void txtICode_LostFocus(object sender, RoutedEventArgs e)
{
    txtICode.Dispatcher.BeginInvoke(() => {
    if (txtICode.IsFocused != true)
    {
        if (NewData)
        {
            if (txtICode.Text != null)
            {
                if (txtICode.Text != "")
                {
                    Item temp = new Item();
                    Item[] list = temp.Query(new object[] { Item.DataEnum.Item_Code }, new string[] { txtICode.Text });
                    if (list.Length > 0)
                    {
                        System.Windows.Forms.MessageBox.Show("This item code is already being used.", "Invalid information");
                        txtICode.Focus();
                        return;
                    }
                }
            }
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:25:34.233

```
 private void txtICode_LostFocus(object sender, RoutedEventArgs e)
            {
               string inputText = txtICode.Text;
               if (string.IsNullOrEmpty(inputText) || !NewData)
               {
                   return;
               }
               Item temp = new Item();
               Item[] list = temp.Query(new object[] { Item.DataEnum.Item_Code }, 
                                                       new string[] { inputText  });
               if (list != null && list.Length > 0)
               {
                  MessageBox.Show("This item code is already being used.", "Invalidinformation");
                  txtICode.Focus();
                  return;
                }
            } 
```

# entity-framework - 实体框架 5 IBM DB2 EntityException 底层提供程序在 ConnectionString 上失败

> ID：15916744
> 
> 赞同：2
> 
> 时间：2013-04-10T04:07:04.447
> 
> 标签：entity-framework, frameworks, db2, entity

我正在使用**Visual Studio 2012**构建 Web 应用程序。该应用程序使用 Web 表单、Ent​​ity **Framework 5 和 IBM DB2 数据库服务器**。我的开发机器和 Web 服务器上都安装了最新的 IBM Drivers v10.1.2。Web 服务器正在运行**Windows Server 2008 R2 Standard x64bit OS**。

**问题我在本地机器上的 Visual Studio 的IIS Express**下运行应用程序工作正常，但是当我将应用程序部署到 Web 服务器时，我遇到了 EF 和 DB2 驱动程序问题。这是错误和堆栈跟踪。做错了什么？！

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

 ERROR [] [IBM][CLI Driver] SQL0000W  Statement processing was successful. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: IBM.Data.DB2.DB2Exception: ERROR [] [IBM][CLI Driver] SQL0000W  Statement processing was successful.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[DB2Exception (0x80004005): ERROR [] [IBM][CLI Driver] SQL0000W  Statement processing was successful.]
   IBM.Data.DB2.ConnSettingsFromXmlConfig.ProcessFromXmlConfig(DB2Connection connection, String dbname, String host, String port, String tmpClientEncAlg, String tmpAuthentication, String prevdb, String prevdb_ori, DB2ConnSettings& sSettings, DB2ConnSettingsInternal& sSettingsInternal, StringBuilder& modifiedValue) +21370
   IBM.Data.DB2.DB2ConnPool.ReplaceConnectionStringParms(DB2Connection connection, String szValue, DB2ConnSettings& pSettings, DB2ConnSettingsInternal& pSettingsInternal, Boolean bAttach, Boolean pushDownStrAppended) +19113
   IBM.Data.DB2.DB2Connection.set_ConnectionString(String value) +187
   System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString) +325

[EntityException: The underlying provider failed on ConnectionString.]
   System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString) +391
   System.Data.EntityClient.EntityConnection..ctor(String connectionString) +43
   System.Data.Entity.Internal.LazyInternalConnection.InitializeFromConnectionStringSetting(ConnectionStringSettings appConfigConnection) +78
   System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name, AppConfig config) +32
   System.Data.Entity.Internal.LazyInternalConnection.Initialize() +127
   System.Data.Entity.Internal.LazyInternalConnection.CreateObjectContextFromConnectionModel() +13
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +281
   System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +18
   System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +52
   System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() +15
   System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() +37
   System.Linq.Queryable.Where(IQueryable`1 source, Expression`1 predicate) +63

.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-01T22:42:10.327

我遇到了同样的问题，将应用程序池更改为网络服务就可以了。

# php - Windows 7 64 位和 wamp 64 位上的 php pdo_informix

> ID：15916745
> 
> 赞同：1
> 
> 时间：2013-04-10T04:07:15.943
> 
> 标签：php, windows, wamp, informix

我尝试在 Windows 7 64 位的 WAMP 64 位中安装 pdo_informix，但我发现了问题，因为 pdo_informix.dll 是 32 位版本。我尝试搜索 pdo_informix.dll，但找不到。如何解决这个问题呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:08:53.903

看起来您可能必须下载 PDO Informix 的源代码并进行编译；这始终是开源的可用选项（获取代码并编译它），但它假定您拥有编译代码所需的设施。

使用术语“pdo informix 64-bit windows”进行谷歌搜索会发现这个问题，除其他外，还指向[PDO Informix](http://php.net/manual/en/ref.pdo-informix.php)手册，其中包括“如何编译 PDO 扩展”等的链接。

谷歌还列出了一个关于这个主题的[IIS 论坛](http://forums.iis.net/t/1187738.aspx/2/10)帖子，上面写着（轻微编辑）：

> 作为替代方案，有一个更简单的选择；但是，根据您的要求，它可能并不理想。有一个名为 OpenAdmin Tool for Informix 的工具。这是一个基于 PHP 的工具，用于在 Informix 数据库上执行管理任务。该工具是一个带有 PHP 设置的现成 Apache 网络服务器，它使用 Informix pdo 驱动程序（它实际上是嵌入的），但是，其余部分是相同的，您可以将现有设置中的任何额外扩展/模块复制到OpenAdmin PHP 目录并在 OpenAdmin php.ini 文件中启用它们。然后将现有 htdocs 文件夹中的任何内容放入 OpenAdmin htdocs 文件夹中。

它列出了指向 IBM 站点的 OAT（OpenAdmin 工具）的链接，但这些链接嵌入了日期 2006-01-26，因此它们可能不是最新的，也可能不是直接可用的。最新信息可从[OpenAdmin Tool](http://openadmintool.org/)网站获得。

OAT 似乎没有专门为 64 位 Windows 分发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T12:44:31.393

我现在也有同样的问题。

OpenAdmin Tool 网站称，IBM 网站上提供的 Informix Client SDK 包括一个现成的 OpenAdmin Tool，包括 Apache Webserver、PHP 和 pdo_informix 扩展。但是，当前的 SDK 4.10 并未随 OpenAdmin Tool 一起提供。

因此，您必须使用 Apache 和 PHP 以及 OpenAdmin Tool 的社区版来设置您自己的环境。我尝试了适用于 x_86 和 x_64 系统 (Windows) 的 Apache 2.4 以及所有可用的 PHP 版本（5.4、5.5、5.6）。

您可以在此处下载 PHP 5.4 的 pdo_informix 扩展： [https ://pecl.php.net/package/PDO_INFORMIX/1.3.1/windows](https://pecl.php.net/package/PDO_INFORMIX/1.3.1/windows)

还有一个人为 PHP 5.5 编译了它： [https ://github.com/maryo/php-5.5-windows-extensions/tree/master/php_pdo_informix-1.3.1-5.5-vc11-x86](https://github.com/maryo/php-5.5-windows-extensions/tree/master/php_pdo_informix-1.3.1-5.5-vc11-x86)

还有一个提示，正确设置INFORMIXDIR环境变量非常重要。我尝试了几种可能性，例如 C:\Program Files\IBM Informix Software Bundle\ 或使用尾随 \bin，但它没有帮助。

不幸的是，没有什么对我有用。pdo_informix 扩展未加载。希望我可以通过我的解释帮助某人启动并运行 OAT。

# java - 如何在 Java 中返回 5 个随机“强力球”数字

> ID：15916749
> 
> 赞同：3
> 
> 时间：2013-04-10T04:08:24.447
> 
> 标签：java, random, for-loop

尝试在 Java 中返回 1 到 42 之间的 5 个随机数。

我目前有返回单个数字的逻辑（将其放入 ArrayList，但我想取消它。）我很难实现返回 5 个随机数。我需要 5 个 for 循环吗？

```
 for (int i = 0; i < 10; i++) {
        int r = (int) (Math.random() * 42 + 1);
    } 
```

我在这里看到了一些其他相关的例子，它们似乎比我的需要更复杂。但是，我可能是错的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:11:32.493

只需将每个随机数放入一个数组并返回该数组...

```
public int[] powerBalls() {
     int[] balls = new int[5];
     for (int index = 0; index < 5; index++) {
          balls[index] = (int) (Math.random() * 42) + 1;
     }
     return balls;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T04:28:22.153

您可以使用`Set`生成`5` **唯一随机**数。

```
Random random = new Random();
Set randomNumbers = new HashSet<Integer>();
while(randomNumbers.size()< 5) {
    randomNumbers.add(random.nextInt(42)+1);
} 
```

既然您提到您正在使用`ArrayList`将保存所有随机数的 an，您可以将 set 中存在的所有元素添加`randomNumbers`到您的`ArrayList`.

**更新：-**

为了满足您的需求，您需要执行以下操作：-

```
Random random = new Random();
Set<String> set = new HashSet<String>();
while(set.size()< 5) {
    set.add(String.valueOf(random.nextInt(42)+1));
}
fortuneList3.addAll(set); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T04:30:03.280

当心！每个号码只能取一次。使用您的解决方案，可以多次获得相同的数字。

其他解决方案（在这里你不能多次使用相同的数字）是创建包含所有数字的数组，将其打乱并取前 5 个：

```
public int[] powerBalls() {
  // create array with all numbers
  List<Integer> balls = new ArrayList<Integer>(42);
  for (int i = 1; i <= 42; i++)
    balls.add(i);

  // shuffle
  Collections.shuffle(balls);

  // take first 5
  int[] result = new int[5];
  for (int i = 0; i < 5; i++)
    result[i] = balls.get(i);

  return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T04:32:40.417

这是一种直截了当的方法。

```
 List<Integer> generated = new ArrayList<Integer>();
          for (int i = 0; i < 5; i++)
          {
              while(true)
              {
                 int r = (int) (Math.random() * 42 + 1);
                  if (!generated.contains(r))
                  {            
                      generated.add(r);
                      break;
                  }
              }
          } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T04:12:15.807

试试这样：

```
IntArray = new int[5]; //Create an array
for (int i = 0; i < 5; i++) {
        IntArray[i] = (int) (Math.random() * 42 + 1);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T04:13:32.130

将数字存储在数组中并返回该数组。

```
int []randArray;
randArray = new int[5];

for (int i = 0; i < 5; i++) { //for 5 random numbers
        randArray[i] = (int) (Math.random() * 42 + 1);
    }

//now return this array "randArray" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-16T18:32:56.367

只需投入 2 美分。我最近制作了一个 jQuery 插件，恰当地命名为“强力球”。我将与您分享我正在使用的公式以及链接您我的插件。不知道为什么有人真的需要这个。我这样做只是为了好玩！哈哈！

## 功能

```
function getNumbers() {
    var a=[];   //  array to return
    for(i=1;5>=i;i++){  //  for loop to get first 5 numbers
        var b = Math.floor(Math.random()*59)+1; //  set #
        while (a.indexOf(b) > -1) { b = Math.floor(Math.random()*59)+1; }   //  reset # if already used
        a.push(b);  //  add number to array
    }
    a.push(Math.floor(35*Math.random())+1); //  add ball 6 number
    return a;   //  0 index array will have a length of 6, [0-4] being whiteball numbers, [5] being the red ball
} 
```

## 插件

## [jsFiddle](http://jsfiddle.net/SpYk3/MJzVW/)

*   包含注释行之间的插件
*   显示示例使用

使用就像`$("element").powerball()`. 但是，目前只有一种方法存在，`$("element").powerball("setNumbers")`. 该方法只是重置 p 标签中显示的数字。

*   风格：注意！
    *   所有样式都是通过在初始化时添加到标题中的样式标记来完成的。这意味着不需要添加额外的文件，但它也使自定义样式变得容易。[在jsFiddle](http://jsfiddle.net/SpYk3/MJzVW/)中查看更多关于样式的信息！

# c++ - cv::Scalar 不显示预期的颜色

> ID：15916751
> 
> 赞同：8
> 
> 时间：2013-04-10T04:08:32.483
> 
> 标签：c++, ios, opencv, colors, drawellipse

在图像框架上，我使用

`void ellipse(Mat& img, Point center, Size axes, double angle, double startAngle, double endAngle, const Scalar& color, int thickness=1, int lineType=8, int shift=0)`

绘制一个椭圆，我想将椭圆颜色设置为绿色 ![在此处输入图像描述](https://i.stack.imgur.com/Vb1tn.png)[RGB 值：(165,206,94)]。所以我将参数设置`const Scalar& color`为

```
cv::Scalar(94.0, 206.0, 165.0, 0.0); // as BGR order, suppose the value is 0.0 - 255.0
cv::Scalar(94.0/255.0, 206.0/255.0, 165.0/255.0, 0.0); // suppose the value is 0.0 - 1.0 
```

我也尝试了 RGB 替代方案。

```
CV_RGB(165.0, 206.0, 94.0); // as RGB order, suppose the value is 0.0 - 255.0
CV_RGB(165.0/255.0, 206.0/255.0, 94.0/255.0); // suppose the value is 0.0 - 1.0 
```

但是显示的颜色是白色![在此处输入图像描述](https://i.stack.imgur.com/ul7p6.png)[RGB 值 (255, 255, 255) ]，而不是所需的绿色。

我在这一点上错过了什么？请有任何建议。谢谢你。

**编辑：**

让我把整个相关的代码放在这里。根据[OpenCV iOS - Video Processing](http://docs.opencv.org/doc/tutorials/ios/video_processing/video_processing.html#opencviosvideoprocessing)，这是以下`CvVideoCamera`配置`- (void)viewDidLoad;`：

```
self.videoCamera = [[CvVideoCamera alloc] initWithParentView:imgView];
[self.videoCamera setDelegate:self];
self.videoCamera.defaultAVCaptureDevicePosition = AVCaptureDevicePositionFront;
self.videoCamera.defaultAVCaptureSessionPreset = AVCaptureSessionPreset352x288;
self.videoCamera.defaultAVCaptureVideoOrientation = AVCaptureVideoOrientationPortrait;
self.videoCamera.defaultFPS = 30;
self.videoCamera.grayscaleMode = NO;
[self.videoCamera adjustLayoutToInterfaceOrientation:UIInterfaceOrientationPortrait]; 
```

然后在`[self.videoCamera start];`调用之后，`(Mat&)image`将被捕获并可以在 CvVideoCameraDelegate 方法中进行处理，`- (void)processImage:(Mat&)image;`这里是绘制椭圆的代码：

```
- (void)processImage:(Mat&)image {

NSLog(@"image.type(): %d", image.type()); // got 24

// image.convertTo(image, CV_8UC3); // try to convert image type, but with or without this line result the same

NSLog(@"image.type(): %d", image.type()); // also 24

cv::Scalar colorScalar = cv::Scalar( 94, 206, 165 );
cv::Point center( image.size().width*0.5, image.size().height*0.5 );
cv::Size size( 100, 100 );
cv::ellipse( image, center, size, 0, 0, 360, colorScalar, 4, 8, 0 ); 
```

}

最终，椭圆仍然是白色的，而不是所需的绿色。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-19T05:41:43.760

将 alpha 设置为 255 可以解决此问题。标量 (94,206,165,255)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T06:42:39.770

正如mrgloom 在评论中正确指出的那样，这可能是因为您的图像类型[您要绘制的Mat 对象，即ellipse() 函数中的Mat &img]。cv::Scalar(94, 206, 165) 是 8UC3 类型图像所需的绿色。在 32FC3 图像中设置这些值将产生白色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:30:35.780

您可以使用

src.convertTo(src, CV_8UC3);

其中 CV_8UC3 表示您使用 8 位无符号字符和 3 色图像表示。更多信息你可以在这里找到[OpenCV 文档](http://docs.opencv.org/modules/core/doc/basic_structures.html) ，如果它不能帮助发布整个代码，你的椭圆应该是绿色的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T13:40:37.270

我遇到了类似的问题，我已经设法通过首先将图像转换为 BGR 来解决它。所以在你的情况下 processImage 函数看起来像：

```
-(void)processImage:(Mat&)image
{
    cvtColor(image, image, CV_RGBA2BGR);
    cv::Scalar colorScalar = cv::Scalar( 94, 206, 165 );
    cv::Point center( image.size().width*0.5, image.size().height*0.5 );
    cv::Size size( 100, 100 );
    cv::ellipse( image, center, size, 0, 0, 360, colorScalar, 4, 8, 0 );
} 
```

我在您的代码中包含的唯一行是：

```
cvtColor(image, image, CV_RGBA2BGR); 
```

如果你还在上述函数中记录了频道、深度和类型信息，如下所示：

```
NSLog(@"Before conversion");
NSLog(@"channels %d", image.channels());
NSLog(@"depth %d", image.depth());
NSLog(@"type %d", image.type());
NSLog(@"element size %lu", image.elemSize());
cvtColor(image, image, CV_RGBA2BGR);
NSLog(@"After conversion");
NSLog(@"channels %d", image.channels());
NSLog(@"depth %d", image.depth());
NSLog(@"type %d", image.type());
NSLog(@"element size %lu", image.elemSize()); 
```

您将在转换前看到：

```
channels 4
depth 0
type 24
element size 4 
```

我认为是 CV_8UC4 转换后它变成：

```
channels 3
depth 0
type 16
element size 3 
```

这是CV_8UC3。

我猜如果没有 cvtColor 就无法工作的原因之一是，当目标图像是 4 通道时，opencv 绘图函数不支持 alpha 透明度，如[opencv 文档](http://docs.opencv.org/modules/core/doc/drawing_functions.html?highlight=rectangle#void%20cvRectangle%28CvArr%2a%20img,%20CvPoint%20pt1,%20CvPoint%20pt2,%20CvScalar%20color,%20int%20thickness,%20int%20line_type,%20int%20shift%29)中所述。所以通过转换 CV_RGBA2BGR 我们取出 alpha 通道。但是，话虽如此，如果我这样做，我将无法使其工作：

```
cvtColor(image, image, CV_RGBA2RGB); 
```

在这种情况下，红色和蓝色在图像中是反转的。因此，尽管它似乎有效，但我不确定这是否是实际原因。

# ruby - Ruby 将整数拆分为数组

> ID：15916754
> 
> 赞同：-3
> 
> 时间：2013-04-10T04:08:41.043
> 
> 标签：ruby

我有这个价值`x = 876885`。我想将该值拆分为数组，例如`[876,885]`

这是我尝试过的

```
x.to_s[0..2].split(',') #=> ["876"] 
```

我怎样才能得到类似的东西`[876,885]`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T04:24:41.260

类似于 DigitalRoss 的回答。

```
x.divmod(1000) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T04:16:49.480

```
[x/1000, x%1000] # => [876, 885] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-10T04:11:30.120

这个怎么样：

```
x = 876885
x.to_s.scan(/.../).map {|e| e.to_i }
=> [876, 885] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-10T04:12:40.577

如果您希望能够处理任意长度的数字，那么您可以使用`each_slice`：[http ://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice)

```
876885.to_s.each_char.each_slice(3).map{|x| x.join} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T04:21:20.513

顺便说一句，@DigitalRoss 的答案是 6 位数字的最佳答案。更通用的解决方案是：

```
a = 876885
a.to_s.chars.each_slice(3).map { |a| a.join.to_i }

# ⇒ [
#  [0] 876,
#  [1] 885
#] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-10T04:17:07.283

这个怎么样？

```
[x.to_s[0..2], x.to_s[3..-1]] 
```

# actionscript-3 - HitTest 带有数组的多个 MovieClip

> ID：15916756
> 
> 赞同：0
> 
> 时间：2013-04-10T04:08:46.797
> 
> 标签：actionscript-3, hittest

我有一个`MovieClip`导出到 ActionScript 的名为`smallGainPoints`. 我想要做的是`MovieClip`在舞台上以线性或对角线路径创建多个实例。完成此操作后，我希望`hitTestObject`在 Points 数组和播放器之间进行。这些点被添加到我希望它们成为的阶段，但 HitTest 不会启动。

这是我设置功能的方式：

这个函数被添加到我的 Gameloop 中，它是从一个 onEnterFrame 处理程序调用的：

```
private function checkPlayerHitPoints():void 
{
    for (var j:int = 0; j < aPointsArray.length; j++)
    {
        //get current points in j loop
        var currentPoints:smallGainPoints = aPointsArray[j];

        //test if player is hitting current point
        if (player.hitTestObject(currentPoints))
        {
            //remove point on stage
            currentPoints.destroyPoints()
            //remove point from array
            aPointsArray.splice(j, 1);

            nScore += 5;
            updateHighScore();
        }
    }
} 
```

我不确定我是否做对了，但我想在一条线上添加多个点的实例，以便玩家可以收集尽可能多的点。所以我创建了一个函数并设置了位置，然后在我的构造函数中添加了函数，`addPointsToStage()`这样它就不会循环每一帧。

```
private function addPointsToStage():void
{
    for (var i = 0; i < nPoints; i++)
    {
        points = new smallGainPoints();
        stage.addChild(points);
        points.x = (stage.stageWidth / 2);
        points.y = (stage.stageHeight / 2);

        points = new smallGainPoints();
        stage.addChild(points);
        points.x = (stage.stageWidth / 2) + 200;
        points.y = (stage.stageHeight / 2);
    } 
```

这就是我启动阵列的方式：

```
public var points:smallGainPoints;
    private var nPoints:Number = 5;
    private var aPointsArray:Array; 
```

然后在我的构造函数中我添加了：

```
aPointsArray = new Array(); 
```

因此，积分被添加到舞台上，但 hittest 不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:14:37.843

在您的`addPointsToStage`方法中，您永远不会将`smallGainPoints`对象添加到数组中。

在这一行之后：

```
points = new smallGainPoints(); 
```

将新的点对象推送到`aPointsArray`数组上：

```
aPointsArray.push(points); 
```

**编辑：**

连续添加点的更好方法可能是这样的：

```
private function addPointsToStage():void
{
    var startPoint:Point = new Point(stage.stageWidth / 2, stage.stageHeight / 2);
    var spacing:Number = 50;

    for (var i = 0; i < nPoints; i++)
    {
        points = new smallGainPoints();
        aPointsArray.push(points);
        addChild(points);
        points.x = startPoint.x + (spacing * i);
        points.y = startPoint.y;
    }
} 
```

这`for loop`将连续添加一堆`smallGainPoint`对象，从屏幕中心开始向右移动。

# c# - 如何在 VS 2012 中为 WPF 创建安装程序

> ID：15916757
> 
> 赞同：1
> 
> 时间：2013-04-10T04:08:51.113
> 
> 标签：c#, wpf, .net-4.0, installation, wpf-4.0

当我查看项目类型时，旧的设置项目已经消失了。有什么方法可以为我的项目创建安装程序吗？

我查看了 wix 工具集，它使用 XML 等的学习曲线很安静，用于创建设置的简单任务。

有没有比 wix 更简单的东西可以节省我的时间并提供 GUI，而不是我必须输入所有愚蠢的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:48:39.183

You can use [InstallShield Limited Edition](http://learn.flexerasoftware.com/content/IS-EVAL-InstallShield-Limited-Edition-Visual-Studio). It offers a nice GUI

# c++ - c++中的类函数重载？

> ID：15916766
> 
> 赞同：0
> 
> 时间：2013-04-10T04:09:44.107
> 
> 标签：c++, overloading

我正在尝试重载类下的函数，但我会将不同的数据类型传递给函数。传递给它的值可以是输入，也可以`int`取决于`char`输入。但我完全困惑如何去做。这是我的函数定义和主要函数。

```
 int main()        
    {
                int pushInt;
                char pushInt;
                cout<<"\n\nEnter Number: ";
                cin >> pushInt;
                mainClassStack.pushNumber(pushInt);
                break;
            }

void stack_class::pushNumber(int numberFunc)
{
    if(head==NULL)
    {
        head = new stack_struct;
        head->number = numberFunc;
        head->next_number = NULL;
        tailPointer=head;
    }
    else
    {
        pointerFunc = new stack_struct;
        pointerFunc->number=numberFunc;
        pointerFunc->next_number=NULL;
        head->next_number=pointerFunc;
        head=pointerFunc;
    }
}

void stack_class::pushNumber(char charFunc)
{

    int a=0;
    a= charFunc;
    if(head==NULL)
    {
        head = new stack_struct;
        head->number = a;
        head->next_number = NULL;
        tailPointer=head;
    }
    else
    {
        pointerFunc = new stack_struct;
        pointerFunc->number=a;
        pointerFunc->next_number=NULL;
        head->next_number=pointerFunc;
        head=pointerFunc;
    }

} 
```

如果你需要我的类定义，在这里

```
class stack_class
{
private:

    struct stack_struct *head;

public:
    stack_class();//constructor
    ~stack_class();//destructor
    void pushNumber(int number);
    void pushNumber(char number);
    void pushNumber(int *number);
    void popNumber();
    void findNumber();
    void clearStack();
    void sizeFinder();
    void printStack();
    void reverseStack();//Extra Credit
};

stack_class mainClassStack;

stack_struct *pointerFunc,*tailPointer=NULL,*pointerFunc3,*printPointer; 
```

我尝试编译，但是当我尝试通过编译器运行它时程序冻结。有什么建议我应该怎么做？

# sql - 如何让@@IDENTITY 或 SCOPE_IDENTITY() 在 SQL Server Compact Edition 中工作？

> ID：15916767
> 
> 赞同：0
> 
> 时间：2013-04-10T04:09:46.050
> 
> 标签：sql, sql-server, vb.net, tsql, sql-server-ce

在我的 SQL Server Compact Edition 数据库中，这是有效的：

```
INSERT INTO Clients (Title, FirstName, MiddleName, LastName, Suffix, IsMale)
VALUES (NULL, NULL, NULL, NULL, NULL, NULL) 
```

但这不起作用：

```
INSERT INTO Clients (Title, FirstName, MiddleName, LastName, Suffix, IsMale)
VALUES (NULL, NULL, NULL, NULL, NULL, NULL); SELECT @@IDENTITY 
```

这里的方言阻碍是什么？如果这有什么不同，我将它作为一个字符串/命令从 VB.Net 传递给 SQL Server CE。

最初我尝试使用 SCOPE_IDENTITY() 执行此操作，并且强烈希望这样做，但显然不支持？如果 SCOPE_IDENTITY() 问题有解决方法，我希望得到涉及该解决方法的答案；如果不是，那么我会很好地回答涉及@@IDENTITY 的问题。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T09:02:26.683

呃......你不能如果你用谷歌搜索这些命令中的任何一个，它们只会给出完整的 SQL 作为支持的版本。

# javascript - 从 ID 创建 Cookie？

> ID：15916769
> 
> 赞同：0
> 
> 时间：2013-04-10T04:10:06.007
> 
> 标签：javascript, cookies, location, geo

我发现了这个很棒的脚本，它可以根据用户的经度和纬度找到用户的邮政编码。通过阅读代码我发现必须有一个状态ID才能使信息变得可见。我的问题是，是否可以将信息放入状态 ID 的 cookie 中。所以它会根据这个人放置一个邮政编码，我想制作一个该邮政编码的 cookie，以便在我的网站上进一步使用它。它使用地理位置并将信息插入谷歌并获取邮政编码。因此，如果可能，我想捕获该邮政编码并从中创建一个 cookie。任何帮助将不胜感激。谢谢。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"    type="text/javascript" charset="utf-8"></script>
</head>

 <body>
 <p>&nbsp;</p>
<center>
<p id="status"></p>
<script>
$(function(){
var GETZIP = {
  getLocation: function(){
     $('#status').text('Searching...');
     if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(GETZIP.getZipCode, GETZIP.error,     {timeout: 7000});//cache it for 10 minutes
     }else{
        GETZIP.error('Geo location not supported');
     }
  },
  index: 0,
  error: function(msg) {
     if(msg.code){
        //this is a geolocation error
        switch(msg.code){
        case 1:
           $("#status").text('Permission Denied').fadeOut().fadeIn();
           break;
        case 2:
           $("#status").text('Position Unavailable').fadeOut().fadeIn();
           break;
        case 3:
           GETZIP.index++;
           $("#status").text('Timeout... Trying again (' + GETZIP.index +  ')').fadeOut().fadeIn();
           navigator.geolocation.getCurrentPosition(GETZIP.getZipCode, GETZIP.error,  {timeout: 7000});
           break;
        default:
           //nothing
        }
     }else{
        //this is a text error
        $('#error').text(msg).addClass('failed');
     }

  },

  getZipCode: function(position){
     var position = position.coords.latitude + "," + position.coords.longitude;
     $.getJSON('proxy.php',{
        path : "http://maps.google.com/maps/api/geocode/json?latlng="+position+"&sensor=false",
        type: "application/json"
     }, function(json){
        //Find the zip code of the first result
        if(!(json.status == "OK")){
           GETZIP.error('Zip Code not Found');
           return;
        }
        var found = false;
        $(json.results[0].address_components).each(function(i, el){
           if($.inArray("postal_code", el.types) > -1){
              $("#status").text(Your zip code: + el.short_name);
              found = true;
              return;
           }
        });
        if(!found){
           GETZIP.error('Zip Code not Found');
        }
     });
  }
}
GETZIP.getLocation();
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:28:56.437

假设您的代码正确检索 中的邮政编码`el.short_name`，您可以在检索后立即存储该值：

下面是一个创建 cookie 的函数：

```
function createCookie(name,value,days) {
    var expires = "", date;
    if (days) {
        date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        expires = "; expires=" + date.toGMTString();
    }
    document.cookie = name+"="+value+expires+"; path=/";
} 
```

这是 getZipCode 的修改版本，它在检索邮政编码后立即写入 cookie：

```
 getZipCode: function(position){
     var position = position.coords.latitude + "," + position.coords.longitude;
     $.getJSON('proxy.php',{
        path : "http://maps.google.com/maps/api/geocode/json?latlng="+position+"&sensor=false",
        type: "application/json"
     }, function(json){
        //Find the zip code of the first result
        if(!(json.status == "OK")){
           GETZIP.error('Zip Code not Found');
           return;
        }
        var found = false;
        $(json.results[0].address_components).each(function(i, el){
           if($.inArray("postal_code", el.types) > -1){
              $("#status").text(Your zip code: + el.short_name);
              createCookie("zipcode", el.short_name, 365);
              found = true;
              return;
           }
        });
        if(!found){
           GETZIP.error('Zip Code not Found');
        }
     });
  } 
```

# ruby-on-rails-3 - 如何使一个对象成为rails中另一个对象的属性

> ID：15916770
> 
> 赞同：0
> 
> 时间：2013-04-10T04:10:11.080
> 
> 标签：ruby-on-rails-3, oop, database-design, model

有没有办法让 Rails 模型具有另一个模型作为属性？

例如，我有一个带有地址属性的用户模型，用户模型中的地址属性是它自己的类。

```
User Model
----------       
lastName:string                 
firstname:string               
address: addressModel

Address Model
-------------
street: string 
city:string
zipCode:integer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:12:23.627

是的，您可以为此使用[关联](http://guides.rubyonrails.org/association_basics.html)：

```
class User < ActiveRecord::Base
  has_one :address
end

class Address < ActiveRecord::Base
  belongs_to :user
end 
```

请注意，要使其正常工作，您需要`user_id`在地址表中有一个字段。

这将神奇地为您的用户对象提供地址类型的地址属性。它还允许您为用户分配地址。例如：

```
address = Address.find(1)
user = User.find(1)
user.address = address
user.save

user.address.class # => Address
user.address.id # => 1 
```

这是用户和地址之间 1:1 关联的示例。查看我上面链接的指南，了解有关其他类型关联的说明。

# xampp - 无法连接 - http://10.0.2.2/test.php 本地主机 XAMPP

> ID：15916771
> 
> 赞同：1
> 
> 时间：2013-04-10T04:10:18.203
> 
> 标签：xampp, localhost

我已经*使用 PHP Script*制作了一个程序，但是每当我尝试*使用 Browser* getting Problem Loading Page: **Firefox 无法在 10.0.2.2 建立与服务器的连接时运行我的脚本。**

我已将 test.php 保存在 - *E:\xampp\htdocs*

**测试.php：**

```
 <?php
$objConnect = mysql_connect("localhost","root","");
$objDB = mysql_select_db("registration_login");

$_POST["sUsername"] = "testname";
$_POST["sPassword"] = "testpassword";
$_POST["sName"] = "testname";
$_POST["sEmail"] = "testemail";
$_POST["sTel"] = "testtel";

$strUsername = $_POST["sUsername"];
$strPassword = $_POST["sPassword"];
$strName = $_POST["sName"];
$strEmail = $_POST["sEmail"];
$strTel = $_POST["sTel"];

/*** Check Username Exists ***/
$strSQL = "SELECT * FROM member WHERE Username = '".$strUsername."' ";
$objQuery = mysql_query($strSQL);
$objResult = mysql_fetch_array($objQuery);
if($objResult)
{
$arr['StatusID'] = "0";
$arr['Error'] = "Username Exists!";
echo json_encode($arr);
exit();
}

/*** Check Email Exists ***/
$strSQL = "SELECT * FROM member WHERE Email = '".$strEmail."' ";
$objQuery = mysql_query($strSQL);
$objResult = mysql_fetch_array($objQuery);
if($objResult)
{
$arr['StatusID'] = "0";
$arr['Error'] = "Email Exists!";   
echo json_encode($arr);
exit();
}

/*** Insert ***/
$strSQL = "INSERT INTO member (Username,Password,Name,Email,Tel)
VALUES (
'".$strUsername."',
'".$strPassword."',
'".$strName."',
'".$strEmail."',
'".$strTel."'
)
";

$objQuery = mysql_query($strSQL);
if(!$objQuery)
{
$arr['StatusID'] = "0";
$arr['Error'] = "Cannot save data!";   
}
else
{
$arr['StatusID'] = "1";
$arr['Error'] = "";
}

mysql_close($objConnect);

echo json_encode($arr);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:37:15.243

我建议您*使用机器的 IP 地址*代替 10.0.2.2

所以**完整的 URL**应该是这样的：

```
 http://ipaddress/test.php 
```

**注意：**当您想*通过 Android Emulator 使用本地服务器时，上述解决方案*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:25:46.270

你知道 10.0.2.2 是从哪里来的吗？默认情况下 localhost 解析为 127.0.0.1。这可能是您的问题。

您遇到的问题不会来自您的 PHP 脚本。而是请求不是从您的浏览器发送到您的 Apache Web 服务器。- 您需要确保 Apache 正在运行。- 您可以尝试确保在 URL 中使用 localhost。- 您可以检查 /Xampp/apache/logs/ 下的 apache 日志文件，看看是否记录了任何最近的错误。- 您也可以尝试使用 Fiddler 之类的工具来查看请求的确切响应。

希望有帮助。

# javascript - 滚动一定距离后固定表头

> ID：15916772
> 
> 赞同：0
> 
> 时间：2013-04-10T04:10:18.663
> 
> 标签：javascript, php, html-table

我有一个带有 TABLE HEADER 和行数据的表。我的行和列数据超出了页面显示限制，因此只想修复 TABLE HEADER。

使用下面的代码能够设法修复 TABLE HEADER。

```
<tr style="position:fixed;z-index:999;top:190;left:230;background-color:#fff" > 
<th width="235" style="font-size:12px;text-align:left"  ><strong><u>List</u></strong></th>
<th width="200" style="font-size:12px" ><strong><u>Booking Details</u></strong></th>
<th width="100" style="font-size:12px;text-align:left" ><strong><u>Available Numbers</u></strong></td></th></tr> 
```

在这个表头上方（大约长度`190px`）我有网站标题。

问题：一旦 WEBSITE HEADER 在滚动上方传递并且当 TABLE HEADER 即将到达页面顶部时，我想修复此 TABLE HEADER。即我想在向下滚动一段距离后固定表头。

请帮忙

# php - PHP从字符串中删除域名

> ID：15916776
> 
> 赞同：2
> 
> 时间：2013-04-10T04:10:33.480
> 
> 标签：php, string

我需要从字符串末尾删除域名。我尝试了以下代码：

```
 $domainNAME="example.com";
    $result="_xmpp-client._tcp.example.com..example.com"
    $string = $result;
    $string = str_replace(".".$domainNAME, " ", $string); 
```

这里的结果是“ **_xmpp-client._tcp.** ”。但结果应该是“ **_xmpp-client._tcp.example.com.** ”。

我只需要从字符串末尾删除域名，如果域名存在于字符串中的任何位置，则不应删除它。如何更改代码？

任何帮助都应该不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:15:32.500

不需要花哨的 preg 或 substr .. 只需使用[trim()](http://www.php.net/manual/en/function.rtrim.php)函数:)

将从两端移除

```
echo trim($string,$domainNAME); 
```

将从字符串末尾删除 domainName

```
echo rtrim($string,$domainNAME); 
```

将从字符串的开始中删除 domainName

```
echo ltrim($string,$domainNAME); 
```

**例子**

```
echo rtrim('demo.test.example.com',"example.com");
//@return demo.test 
```

**第二种方法**

如果没有.. 然后使用预匹配:)。

```
$new_str = preg_replace("/{$domainNAME}$/", '', $str); 
```

这将仅在 $str 结尾时才从 $str 中替换 $domainNAME （var 后的 $ 符号表示 AT 字符串结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:29:12.417

如果您真的希望`_xmpp-client._tcp.example.com.`在最终使用点时获得输出

```
preg_replace("/\." . $domainNAME . "$/", " ", $string); 
```

你可以添加？如果您希望它是可选的

```
preg_replace("/\.?" . $domainNAME . "$/", " ", $string); 
```

[演示](http://ideone.com/FLIil9)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T04:24:16.123

```
$domainNAME="example.com";
$result="_xmpp-client._tcp.example.com..example.com";
$string = $result;
$string = substr($result,0, strrpos($result, $domainNAME)-1);   
echo $string; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T04:19:56.807

您可以使用 preg_replace 并指定字符串标记的结尾`$`：

```
$string = preg_replace("/" . $domainNAME . "$/", " ", $string); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T04:20:28.800

利用`str_ireplace('example.com.example.com', 'example.com', $string);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T04:19:55.313

```
 $domainNAME="example.com";
            $length = strlen(".".$domainNAME);
            $result="_xmpp-client._tcp.example.com..example.com";
            $string = substr($result, 0, $length*(-1)); 
```

试试看。我希望它可以帮助你

# matlab - 使用机器学习对 X 射线图像进行分类

> ID：15916778
> 
> 赞同：0
> 
> 时间：2013-04-10T04:10:48.253
> 
> 标签：matlab, machine-learning, computer-vision

通过什么方式我可以在任何机器学习算法的帮助下对 X 射线图像的特征进行分类，以便下次我通过发送个人的 X 射线图像特征来测试输入时，它应该向我发送此 X 射线是否是数据库中是否存在...我已经使用 matlab 找到了大约 20 张图像的特征。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:26:38.107

如果您匹配的 X 射线是相同的，则您实际上不需要使用机器学习。只需进行像素匹配并检查图像是否 99% 相同（以弥补扫描中的照明差异）。在 MATLAB 中，您可以通过简单地获取两个图像的绝对像素差异，然后计算差异超过预定义阈值的像素数来实现这一点。

如果 X 射线不完全相同，并且您知道同一个人身体的同一部位多次 X 射线照射时重复出现的特征，那么机器学习将很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:49:25.130

它有点像人脸识别，你输入一张人脸图像，然后机器学习输出这张脸是否在你的数据集中。对于您的问题，我能想到的最简单的方法就是定义一个“距离度量”来衡量两个图像特征的相似性并设置一个阈值来判断它们是否相同。

# ruby-on-rails - 使用 Unicode 字符 'HEAVY CHECK MARK' (U+2714)

> ID：15916781
> 
> 赞同：0
> 
> 时间：2013-04-10T04:10:55.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unicode

我知道有很多关于它的问题，但我仍然不明白我是如何使用它的。我想在我的控制器上使用[这个 Unicode 字符，例如：](http://www.fileformat.info/info/unicode/char/2714/index.htm)

```
mutation = that Unicode Character; 
```

我尝试了几种方法，例如：

```
mutation = &#x2714;
mutation = "#{&#x2714}";
mutation = "#{U+x2714}";
mutation = U+x2714;
mutation = "#{&#x2714}";
mutation = "#{\ux2714}"; 
```

但一切仍然没有给我任何成功。

我的*应用程序.rb*

```
config.encoding = "utf-8" 
```

*注意：我没有使用`iconv`它，因为它总是告诉我很快就会被弃用，而我的老板告诉我不要使用它。非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:27:52.280

这应该有效：`mutation = "\u2714"`

# spring - 自动装配或设置器注入

> ID：15916785
> 
> 赞同：0
> 
> 时间：2013-04-10T04:11:19.100
> 
> 标签：spring, autowired

到目前为止，在我们的项目中，我们的 bean 通过 setter 注入设置了引用；最近，有几个人开始使用 @Autowired 注解来设置他们的 bean 上的引用；为上下文混合注释和 xml 配置是否很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:27:11.127

将两者一起使用没有问题，但为了一致性起见，最好选择一个。所有开发人员都更容易理解和维护代码。

我的偏好是注释，因为我喜欢在一个地方定义的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:27:50.933

混合注释和 XML 定义可以很好地减少 XML 文件中的代码量。

当然，您可以同时并存；XML 定义将始终覆盖 Java 代码中的任何注释，而不会造成麻烦。

是好还是坏？？我认为这只是一种平衡 XML 文件大小的方法。我发现在 XML 中以简单的方式定义我的 bean 非常有用，然后只需使用`@Autowire`注释，包括`@Required`确保 bean 在使用之前已正确注入。

# python - wxpython中spin ctrl事件的消息框

> ID：15916791
> 
> 赞同：-1
> 
> 时间：2013-04-10T04:11:45.907
> 
> 标签：python, wxpython, wxwidgets, messagebox

大家好，我正在学习 python 和 wxpython，现在我在做 spin-ctrl 按钮事件时被卡住了，

问题：我有一个 spin ctrl 和几个 text_ctrl ，spin_ctrl 最大值是 7 并且它不应该使用 max、min 或 setvalue() 来设置它。当用户达到 8 或更多时，我想弹出一条消息，说 7 是最大值。或者如果用户输入 8 。我试图绑定它并显示一条消息，但每次点击都会出现一条消息。:(感谢您的帮助并提前花时间解决我的问题。如果发现任何错误，请见谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:43:43.090

您需要将最大值设置为 8，以便获得足够大的数字并收听 EVT_TEXT

```
import wx

class MyForm(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "Spin Button Tutorial")
        panel = wx.Panel(self, wx.ID_ANY)

        self.text = wx.SpinCtrl(panel, value="1")
        self.text.SetRange(1, 8)
        self.text.SetValue(1)

        self.text.Bind(wx.EVT_SPINCTRL, self.OnSpin)
        self.text.Bind(wx.EVT_TEXT, self.OnSpin)

    def OnSpin(self, event):
        if self.text.GetValue() > 7:
               self.text.SetValue(7)
               wx.MessageDialog(self,"Test Message","Too Big!").ShowModal()

# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

# android - 无法在 Google Play 商店中更新应用程序的价格

> ID：15916792
> 
> 赞同：7
> 
> 时间：2013-04-10T04:11:50.413
> 
> 标签：android, google-play

我最近使用新版本更新了我的应用程序。现在我想更改该版本的价格。

我这样做了：

1.登录我的谷歌账户

2.访问 play.google.com/apps/publish

1.  选择我的应用程序

2.  选择定价和分销

3.  在默认价格部分将当前价格更改为新价格

4.  点击保存和更新。

我在两天前做了这个，但应用程序的价格仍然没有更新。

如果我遗漏了，请建议我任何其他步骤。

我是否需要取消发布应用程序然后再次发布才能使价格生效？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:55:43.513

哦，所以它解决了。又等了 4 个小时后，我再次按照相同的步骤操作，现在它在一小时内更新。

似乎它是来自 Google End 的服务器问题。

最后，我的应用程序价格更新并可供下载。

感谢所有的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-18T23:20:21.050

我遇到了同样的问题，事实证明，您还必须进行一些其他更改 - 例如在商品详情的描述中添加一个新空间（或其他内容）。只有这样它才会更新价格。

# java - 在java中更改一个字节内的位

> ID：15916793
> 
> 赞同：4
> 
> 时间：2013-04-10T04:11:53.570
> 
> 标签：java, bit-manipulation

所以我了解如何更改一个字节内的单个位，我不确定为什么我的特定代码不起作用。

```
public static void setBit(byte[] input, int position, int value) {
    int byteLocation = position / 8;
    int bitLocation = position % 8;
    byte tempByte = input[byteLocation];

    if (value == 0) 
    tempByte = (byte) (tempByte & ~(1 << bitLocation));
    else
    tempByte = (byte) (tempByte | (1 << bitLocation));

    input[byteLocation] = tempByte;
} 
```

现在我一直在使用 64 位长的字符串“Testing1”对其进行测试，然后尝试设置位并显示值。它最多可以处理 46 位，然后在第 47 位，如果我尝试将其设置为 1，它会停止工作，但是可以正常使用 0。

以我的方式看不到错误，这是我测试它的方式

```
String test = "Testing1";

byte[] bytes = test.getBytes();

for (int i = 0; i < bytes.length; i++)
    System.out.print(String.format("%8s", Integer.toBinaryString(bytes[i])).replace(' ', '0') + "[" + i + "] ");

setBit(bytes, 44, 1);
System.out.println();
for (int i = 0; i < bytes.length; i++)
    System.out.print(String.format("%8s", Integer.toBinaryString(bytes[i])).replace(' ', '0') + "[" + i + "] "); 
```

以下是我尝试将第 47 位更改为 1 时的输出

```
01010100[0] 01100101[1] 01110011[2] 01110100[3] 01101001[4] 01101110[5] 01100111[6] 00110001[7] 
01010100[0] 01100101[1] 01110011[2] 01110100[3] 01101001[4] 11111111111111111111111111101110[5] 01100111[6] 00110001[7] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:37:11.277

将格式更改为

```
Integer.toBinaryString(0xFF & bytes[i]) 
```

byte 需要被屏蔽，因为它是符号扩展的，而不是零扩展的，到 32 位 int

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T04:39:33.540

问题是您正在相关字节中设置符号位。因此，该字节现在具有负值。你调用`Integer.toBinaryString()`，它接受一个 int 作为它的参数，而不是一个字节。字节被提升为 int，并且它正确评估了以下值：

```
11101110 
```

到它的等效整数：

```
11111111111111111111111111101110 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:44:28.660

I haven't looked at it in too much detail but I think the problem with the one bite is that it's being extended to an int (Since it's signed, the 1 extends to a negative int).

Just take the last 8 characters of the string and it will work fine.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T04:38:04.860

我使用`^`(xor)使您的方法更小

```
public static void setBit(byte[] input, int position, int value) {
    int byteLocation = position / 8;
    int bitLocation = position % 8;
    input[byteLocation] = (byte) (input[byteLocation] ^ (byte) (1 << bitLocation));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-28T05:56:47.793

我最近不得不做这样的事情。
我设法通过（大量使用白板但是..）将原始位右移到我想要替换的 LSB 的位置并使所有位包括我想要替换的 MSB 1 来实现它。
然后，我将我想要的位与我想要替换的位相加，左移与我右移相同的数字，将结果与原始结果进行或运算，并通过替换的异或掩码进行与运算。（喘口气，我会试着解释）

假设我有字节：
1111 **1010** 0001 1001

，我想用 0001 替换半字节 1010 以产生：

1111 **0001** 0001 1001。

我实现这一点的操作是：

1) 右移 8 以产生：
**0000 0000 1111 1010**

2) 或掩码 0xf (1111) 产生：
**0000 0000 1111 1111**

3) 并将 0001 替换为 0000 0000 1111 1111 以产生：
**0000 0000 0001**

000 ) 左移 8 以产生：
**0000 0001 0000 0000**

5) 将掩码移动 LSB 位置并与全字节异或

**1111 1111 1111 1111**
**0000 1111 0000 0000**
================ ==
**1111 0000 1111 1111**

6) AND 异或，移位掩码与原始产生：

**1111 0000 0001 1001**
**1111 0000 1111 1111**
==================
**1111 0000 0001 1001**

7) 或上述结果与替换：

**1111 0000 0001 1001
0000 0001 0000 0000
===================
1111 0001 0001 1001 <<*最终结果*
==================** 在java中，这导致函数：

```
public long overwriteBits(long overwrite, long with, long shift, long mask)
{
    return ((((overwrite >> shift) | mask) & with) << shift) | (overwrite & (~0 ^ (mask << shift)));
} 
```

其中“覆盖”是原始数据，“与”是您想要代替“移位”位置的位的位，掩码是一系列具有相同替换长度的正位。

要执行上述操作，我会调用（在 sudo 中）：
overwriteBits(1111 **1010** 00011001, **0001** , 8, 1111)

我想提一下，以上内容可用于替换任何原语中的位，不需要字节数组。eg Replacing 11 bits, as below:

1101001010101101 **1111 0101 101** 001101
with **1010 1010 101**

overwriteBits(1101001010101101 **1111 0101 101** 001101 **,** **1010 1010 101,** 6 **,** 11111111111)

1101001010101101 **1111 0101 101** 001101
1101001010101101 **1010 1010 101** 001101

覆盖位（1789785421l，1365l，6，0x7FF）

# ruby-on-rails - Rails 页面缓存与 3rd 方供应商的优缺点是什么？

> ID：15916802
> 
> 赞同：0
> 
> 时间：2013-04-10T04:12:52.937
> 
> 标签：ruby-on-rails, caching, heroku

您可以将一些 3rd 方插件添加到 Heroku 应用程序以管理缓存。为什么要使用它们而不是使用内置的缓存框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:48:33.763

I am assuming these 3rd party addons work like [CloudFlare](http://www.cloudflare.com/) or at least work on the same basic principles.

**Caching Framework**

1.  You control when the cache expires, allow for fresher more relavent content.
2.  Your site doesn't go down/get messed up/looks fugly when their service goes down.
3.  You can permanently cache things that will never change.
4.  Can make your own CDN with your own logic and setup.
5.  **Fragment caching, meaning only part of the page expires instead of the whole thing, leading to less dog piles.**

**3rd Party Service**

1.  Fire and forget.
2.  Cheap
3.  Usually pull all images, js, and css files into their 'CDN' also.
4.  Some claim added security because your site is now basically behind their servers now, though I haven't really read anything that said this was anything but market double talk.

# objective-c - 添加子视图是否也会添加该视图的子视图？

> ID：15916803
> 
> 赞同：0
> 
> 时间：2013-04-10T04:12:55.343
> 
> 标签：objective-c, uiview, uiimageview, subview

假设我有`UIImageView`几个`subviews`.

在 a`UIViewController`中，如果我创建 custom`imageView`并将其添加为`subview`to `self.view`，这是否意味着所有 custom`view`都`subviews`将显示在屏幕上，或者只是没有它的自定义视图`subviews`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:15:01.283

整个视图层次结构：当前视图、它的子视图、它们的子视图等等，将被添加到`self.view`的视图层次结构中。

# javascript - 花式盒子过渡效果坏了

> ID：15916805
> 
> 赞同：0
> 
> 时间：2013-04-10T04:13:05.880
> 
> 标签：javascript, jquery, fancybox

下面代码中的转场效果坏掉了，fancybox不是淡入，而是从窗口顶部往上跳到中间。
我怎样才能使它正常工作？

```
 window.onload = function() {
        $(function(){
                function showfb(id) {
                    if (/^#.*/.test(id)) {
                        $(id).show();
                        $.fancybox({
                            href: id,
                            type:'inline',
                            'transitionIn': 'fade', // elastic, none, ease, fade
                            'transitionOut': 'fade',
                            onClosed: function() {
                                $(id).hide();
                            }
                        });
                    }
                }
                showfb(location.hash);
                $('a.profile').click(function(e){
                        showfb($(this).attr('href'));
                });
        });
  }; 
```

# android - Android - 检测用户不活动并显示对话框

> ID：15916806
> 
> 赞同：0
> 
> 时间：2013-04-10T04:13:10.187
> 
> 标签：android, android-dialog, android-dialogfragment

我需要检测 android 应用程序中的用户不活动。我想继续观察应用程序的不活动状态，如果用户没有与应用程序交互，那么一段时间后我需要显示一个对话框。如果用户与应用程序交互我想再次重置时间，则在显示对话框之间或之后。

我打算使用线程来观察屏幕的用户不活动，并在超过时间后显示对话框。这很好还是任何其他方式在android中做到这一点

谢谢mindus

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:52:34.407

您可以在 Activity 中劫持事件`dispatchKeyEvent()/dispatchKeyShortcutEvent()/dispatchTouchEvent()`以检测用户是否有某些活动。并使用一个简单的处理程序来检查 lastactivity 时间。

# cocoa - 从 AVCaptureScreenInput 捕获空白静止图像？

> ID：15916808
> 
> 赞同：1
> 
> 时间：2013-04-10T04:13:24.153
> 
> 标签：cocoa, core-graphics, avfoundation, appkit

我正在`AVCaptureScreenInput`使用 a 对屏幕进行采样并输出它`AVCaptureVideoDataOutput`，但它不起作用。它输出的图像是空白的，但根据我阅读的所有文档，我似乎做的一切都是正确的。

我已经确定我做了`AVCaptureVideoDataOutput`一些可以被`CGImage` `(kCVPixelFormatType_32BGRA)`. 当我运行相同的代码并将其输出到 a`AVCaptureMovieFileOutput`时，电影渲染得很好，一切看起来都很好——但我真正想要的是一系列图像。

```
#import "ScreenRecorder.h"
#import <QuartzCore/QuartzCore.h>

@interface ScreenRecorder() <AVCaptureFileOutputRecordingDelegate, AVCaptureVideoDataOutputSampleBufferDelegate>  {
    BOOL _isRecording;
@private
    AVCaptureSession *_session;
    AVCaptureOutput *_movieFileOutput;
    AVCaptureStillImageOutput *_imageFileOutput;

    NSUInteger _frameIndex;

    NSTimer *_timer;

    NSString *_outputDirectory;
}
@end

@implementation ScreenRecorder

- (BOOL)recordDisplayImages:(CGDirectDisplayID)displayId toURL:(NSURL *)fileURL windowBounds:(CGRect)windowBounds duration:(NSTimeInterval)duration {
    if (_isRecording) {
        return NO;
    }

    _frameIndex = 0;

    // Create a capture session
    _session = [[AVCaptureSession alloc] init];

    // Set the session preset as you wish
    _session.sessionPreset = AVCaptureSessionPresetHigh;

    // Create a ScreenInput with the display and add it to the session
    AVCaptureScreenInput *input = [[[AVCaptureScreenInput alloc] initWithDisplayID:displayId] autorelease];
    if (!input) {
        [_session release];
        _session = nil;
        return NO;
    }
    if ([_session canAddInput:input]) {
        [_session addInput:input];
    }

    input.cropRect = windowBounds;

    // Create a MovieFileOutput and add it to the session
    _movieFileOutput = [[[AVCaptureVideoDataOutput alloc] init] autorelease];
    [((AVCaptureVideoDataOutput *)_movieFileOutput) setVideoSettings:[NSDictionary dictionaryWithObjectsAndKeys:@(kCVPixelFormatType_32BGRA),kCVPixelBufferPixelFormatTypeKey, nil]];
//    ((AVCaptureVideoDataOutput *)_movieFileOutput).alwaysDiscardsLateVideoFrames = YES;

    if ([_session canAddOutput:_movieFileOutput])
        [_session addOutput:_movieFileOutput];

    // Start running the session
    [_session startRunning];

    // Delete any existing movie file first
    if ([[NSFileManager defaultManager] fileExistsAtPath:[fileURL path]])
    {
        NSError *err;
        if (![[NSFileManager defaultManager] removeItemAtPath:[fileURL path] error:&err])
        {
            NSLog(@"Error deleting existing movie %@",[err localizedDescription]);
        }
    }

    _outputDirectory = [[fileURL path] retain];
    [[NSFileManager defaultManager] createDirectoryAtPath:_outputDirectory withIntermediateDirectories:YES attributes:nil error:nil];    

    // Set the recording delegate to self
    dispatch_queue_t queue = dispatch_queue_create("com.schaefer.lolz", 0);
    [(AVCaptureVideoDataOutput *)_movieFileOutput setSampleBufferDelegate:self queue:queue];
    //dispatch_release(queue);

    if (0 != duration) {
        _timer = [[NSTimer scheduledTimerWithTimeInterval:duration target:self selector:@selector(finishRecord:) userInfo:nil repeats:NO] retain];
    }
    _isRecording = YES;

    return _isRecording;
}

- (void)dealloc
{
    if (nil != _session) {
        [_session stopRunning];
        [_session release];
    }

    [_outputDirectory release];
    _outputDirectory = nil;

    [super dealloc];
}

- (void)stopRecording {
    if (!_isRecording) {
        return;
    }
    _isRecording = NO;

    // Stop recording to the destination movie file
    if ([_movieFileOutput isKindOfClass:[AVCaptureFileOutput class]]) {
        [_movieFileOutput performSelector:@selector(stopRecording)];
    }
    [_session stopRunning];

    [_session release];
    _session = nil;

    [_timer release];
    _timer = nil;

}

-(void)finishRecord:(NSTimer *)timer
{
    [self stopRecording];
}

//AVCaptureVideoDataOutputSampleBufferDelegate
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(imageBuffer,0);        // Lock the image buffer

    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddressOfPlane(imageBuffer, 0);   // Get information of the image
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGImageRef image = CGBitmapContextCreateImage(newContext);
    CGContextRelease(newContext);

    CGColorSpaceRelease(colorSpace);
    _frameIndex++;    
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    dispatch_async(dispatch_get_main_queue(), ^{
        NSURL *URL = [NSURL fileURLWithPath:[_outputDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.jpg", (int)_frameIndex]]];

        CGImageDestinationRef destination = CGImageDestinationCreateWithURL((CFURLRef)URL, kUTTypeJPEG, 1, NULL);
        CGImageDestinationAddImage(destination, image, nil);

        if (!CGImageDestinationFinalize(destination)) {
            NSLog(@"Failed to write image to %@", URL);
        }

        CFRelease(destination);
        CFRelease(image);
    });
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:21:42.003

您的数据不是平面的，因此平面 0 没有基地址 - 没有平面 0。（可以肯定的是，您可以使用 进行检查`CVPixelBufferIsPlanar`。）您需要`CVPixelBufferGetBaseAddress`获取指向第一个像素的指针。所有数据将被交错。

# web-applications - 带有junit测试的开源Web应用程序？

> ID：15916811
> 
> 赞同：0
> 
> 时间：2013-04-10T04:13:37.210
> 
> 标签：web-applications, spring-mvc, open-source, junit4

我们正在考虑在我们下一个基于 MVC 的 Web 应用程序中使用 junit 测试。但是团队中没有人有任何 junit 测试的经验。

当然，我们已经阅读了一些在线 junit 教程和一些关于 junit 测试的书籍以供参考。

但是，如果我们通过一些现有的使用 junit 测试的 web 应用程序来了解它是如何使用的，那就更好了。我们不想以扭曲或不当的方式使用它。

那么是否有任何这样的开源 Web 应用程序可供我们学习或通过以了解 junit 测试是如何编写的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:34:02.577

作为起点，您可以查看[Spring Samples](https://github.com/SpringSource/spring-petclinic/)源代码，其中包含示例 webapp 和单元测试。这应该有助于您入门。

之后您可以查看[Spring 测试框架](http://static.springsource.org/spring-framework/docs/3.2.0.BUILD-SNAPSHOT/reference/htmlsingle/#testing)，这有助于集成测试等。最新版本的 Spring 附带 Spring MVC Test，这对于测试 MVC 控制器非常有用。

另外，如果您正在寻找一个模拟框架，我建议[您使用 Mockito](https://code.google.com/p/mockito/)。

享受M

# python - 如何使用 MongoEngine 获取最新的 EmbeddedDocument 对象

> ID：15916816
> 
> 赞同：0
> 
> 时间：2013-04-10T04:13:58.120
> 
> 标签：python, mongodb, flask, mongoengine

我正在尝试进行查询以获取已发布到任何帖子的最新评论，但无法正确处理。我基本上想显示网站上发布的所有评论的活动列表。

我正在使用烧瓶，mongodb 和 mongo-engine。

这是我的模型：

```
class Post(db.Document):
    slug = db.StringField(max_length=255, required=True)
    title = db.StringField(max_length=255, required=True)
    body = db.StringField(max_length=255, required=True)
    comments = db.ListField(db.EmbeddedDocumentField('Comment'))

class Comment(db.EmbeddedDocument):
    message = db.StringField(required=True)
    author = db.ReferenceField(User, dbref=True)
    created_at = db.DateTimeField(default=datetime.datetime.now, required=True) 
```

任何想法，将不胜感激。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:37:14.907

`EmbeddedDocumentField`意味着该文档只是自己文档（如字典）的一部分。因此，您可以获得所有评论的所有帖子，然后您可以获取所有评论并对其进行排序。或者您可以将`comments`列表设为`ReferenceField`和。或者你可以编写自己的 mongo 函数来完成它。`Comment``Documetn`

也许 pymongo 允许获取列表的一部分，但我不知道如何。但是，据我所知，mongoengoe 不允许它开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:46:27.550

该特定用例的架构设计很差。您应该将评论存储为单独的文档，然后您可以以您需要的方式有效地查询数据。

或者，您可以将最新的 x 评论非规范化并存储在单独的文档/集合中。不过，您必须手动管理此集合。

mongodb 文档有一个很好的关于[数据建模](http://docs.mongodb.org/manual/core/data-modeling/)的部分，这可能会有所帮助。

# java - 从列表中删除元素时出现 UnsupportedOperationException

> ID：15916818
> 
> 赞同：-1
> 
> 时间：2013-04-10T04:13:58.827
> 
> 标签：java, list

我有两个具有逗号分隔值的字符串，例如一个具有 1 到 10 的数字，另一个具有质数。我想要

> 从数字中删除素数

.

这是我的代码片段：

```
String numbers = "1,2,3,4,5,6,7,8,9,10";
String prime = "2,3,5,7";

List<String> numList = Arrays.asList(numbers.split(","));
numList.removeAll(Arrays.asList(prime.split(","))); 
```

我得到了 UnsupportedOperationException。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T04:18:14.887

尝试使用这个： -

```
List<String> numList = new ArrayList<>(Arrays.asList(numbers.split(","))); 
```

如果您查看[文档](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#removeAll%28java.util.Collection%29)：-

> UnsupportedOperationException - 如果此列表不支持 removeAll 操作

`Arrays.asList`返回一个固定大小的列表，因此，`UnsupportedOperationException`当您尝试对其执行`remove`操作时，您会得到 。

# objective-c - NSRegularExpression 修改正则表达式组（回调）

> ID：15916819
> 
> 赞同：1
> 
> 时间：2013-04-10T04:14:01.783
> 
> 标签：objective-c, regex, regex-group

我需要将文本转换为以下两种格式之一：

`[[anyText~number]]`或者`[[anyText]]`

到各自的html格式：

`<span name="anyText~number">anyText</span>`或者`<span name="anyText">anyText</span>`

例子：

`[[Thanks~1]]`到`<span name="Thanks~1">Thanks</span>`

和

`[[Hello]]`到`<span name="Hello">Hello</span>`

为此，我在 NSString 类别中创建了以下函数：

```
- (NSString*) stringByReplacingOccurrencesOfRegex:(NSString*)regexString withString:(NSString*)replaceWithString {
    NSError* error;
    NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:regexString options:NSRegularExpressionCaseInsensitive error:&error];
    NSRange fullrange = NSMakeRange(0,self.length);
    return [regex stringByReplacingMatchesInString:self options:NSMatchingWithTransparentBounds range:fullrange withTemplate:replaceWithString];
} 
```

在我的代码的某处，我正在使用以下内容：

```
 regexString = @"\\[\\[([^\\]]*)\\]\\]";
    replaceWithString = @"<span name=\"$1\">$1</span>";
    rawStoryString = [rawStoryString stringByReplacingOccurrencesOfRegex:regexString withString:replaceWithString]; 
```

这样做的结果是`<span name=\"anyText~number\">anyText~number</span>`。有没有办法可以对`$1`（比如说`removeTilderAndFurther($1)`，在这种情况下，我的代码变成`replaceWithString = @"<span name=\"$1\">removeTilderAndFurther($1)</span>";`）进行操作，这样我就可以实现我所追求的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:22:31.717

试试这个正则表达式：

```
\[\[(\w+)(~\d+)?\]\] 
```

并替换为：

```
<span name="$1$2">$1</span> 
```

解释：

> ***`\w`*** 匹配任何单词字符。
> 
> ***`\d`*** 匹配任何十进制数字。
> 
> ***`+`***匹配前一个元素一次或多次。
> 
> ***`(subexpression)`*** 捕获匹配的子表达式并为其分配一个从零开始的序数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:31:24.300

多么棒的主意，添加一个类别来做到这一点！我能够这样做：

```
NSString *regexString = @"\\[\\[((\\w+)(~\\d+)?)\\]\\]";
NSString *replaceWithString = @"<span name=\"$1\">$2</span>"; 
```

1.  没有任何数字的第一个场景**`[[Hello]]`**：

    ```
    NSString *rawStoryString = @"[[Hello]]";
    NSLog(@"rawStoryString: %@", rawStoryString);
    rawStoryString = [rawStoryString stringByReplacingOccurrencesOfRegex:regexString withString:replaceWithString];
    NSLog(@"rawStoryString: %@", rawStoryString); 
    ```

    它的输出是：

    ```
    rawStoryString: [[Hello]]
    rawStoryString: <span name="Hello">Hello</span> 
    ```

2.  带有波浪号和数字的第二种情况**`[[Thanks~1]]`**：

    ```
    rawStoryString = @"[[Thanks~1]]";
    NSLog(@"rawStoryString: %@", rawStoryString);
    rawStoryString = [rawStoryString stringByReplacingOccurrencesOfRegex:regexString withString:replaceWithString];
    NSLog(@"rawStoryString: %@", rawStoryString); 
    ```

    它的输出是：

    ```
    rawStoryString: [[Thanks~1]]
    rawStoryString: <span name="Thanks~1">Thanks</span> 
    ```

# c++ - char* 转换重载

> ID：15916820
> 
> 赞同：1
> 
> 时间：2013-04-10T04:14:15.030
> 
> 标签：c++, string, std

我定义结构

```
struct X{
     char v;
     static int c;
     X():v(){c++};
     ~X(){c--};
     ...
}; 
```

和

```
typedef std::basic_string<X> xs; 
```

那么有没有什么方法可以在没有显式转换的情况下使用构造？我可以用这种方式初始化新字符串：

```
xs expl_conversion((X*)"olololo"); 
```

但是有没有办法通过隐式转换来做到这一点？

```
xs impl_conversion("olololo"); 
```

可能是一种转换运算符，但 std::basic_string 没有变化。

当我尝试使用这样的东西时：

```
X * operator X*(char* dat){ return (X*)(dat);} 
```

编译器回答：

```
operator X**(char*) must be a nonstatic member function 
```

那么有什么办法可以解决这个问题吗？谢谢。

# javascript - Selenium RC / Python / JavaScript .aspx / Loop 语句

> ID：15916823
> 
> 赞同：0
> 
> 时间：2013-04-10T04:15:02.870
> 
> 标签：javascript, python, selenium, selenium-rc

在过去的几个月里，我一直在自学 Python。我的第一个项目是一个使用 Selenium RC Web 驱动框架的浏览器驱动测试用例（但在我的项目中没有导入 webdriver，以免混淆）。基本上，我的测试用例需要连接到用 JavaScript 和 HTML 编写的“.aspx”页面的刷新循环中。此循环不断刷新此`.aspx`页面，直到`sel.is_text_present("foo")`满足条件。刷新直到出现定义的“文本”后，脚本应该是一个与字符串`click`一起出现的 JavaScript 按钮。`is_text_present`执行脚本后，Firefox 会打开并将自身定向到特定页面并输入其`refresh loop`，但是当文本出现时（即`.aspx`页面更改其状态并使用 JavaScript 按钮加载 JavaScript 表）脚本不执行循环的另一个分支。这是一段代码，显示了我已经实现的逻辑：

```
i = sel.is_text_present("Schedule")    #text that the test case is 'waiting' for
while i != True:
    print i
    print "Waiting for job..."
    sel.refresh()
else:                
    print "Job found..."
    sel.click("id=Select")
    sel.wait_for_page_to_load("30000")
    sel.click("id=1")
    sel.wait_for_page_to_load("30000")
    print "Success!"
    test_py_s_f_t_c()    #calls this function again to repeat the test case 
```

我的循环语句的逻辑是否指示 Firefox 刷新，直到它检测到一个文本字符串，然后在检测到这个字符串时单击一个按钮？如果按钮的名称是动态的并且发生变化，是否可以在按钮 ID 中使用通配符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:29:10.310

我只通过 c# API 使用过 selenium，但您可以尝试在 click 函数中使用 xpath

sel.click("//输入[包含(@id,'partialId')]"); 或按钮，具体取决于您使用的 html 类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:42:50.980

单纯从逻辑上看，是不正确的。因为您没有在刷新后检查文本是否存在。

你可以这样写。

```
i = sel.is_text_present("Schedule")    #text that the test case is 'waiting' for 
while i != True:
    print i
    print "Waiting for job..."
    sel.refresh()
    i = sel.is_text_present("Schedule")    #text that the test case is 'waiting' for

print "Job found..." 
```

# sql-server-2008 - 删除大型数据库中的重复行会引发错误

> ID：15916825
> 
> 赞同：0
> 
> 时间：2013-04-10T04:15:13.073
> 
> 标签：sql-server-2008

我有一组相当大的数据（大约 1000 万行），其中有很多重复项。为了删除这些重复项，我使用了这个查询（从[这篇文章](https://stackoverflow.com/questions/18932/how-can-i-remove-duplicate-rows)中我知道这是最有效的）：

```
;WITH cte
  AS (SELECT ROW_NUMBER() OVER (PARTITION BY COL1, COL2, COL3 
    ORDER BY ( SELECT 0)) RN
  FROM MYTABLE)
DELETE FROM cte
WHERE RN > 1 
```

服务器返回此错误：

**数据库“ABC”的事务日志已满。要找出日志中的空间不能被重用的原因，请参阅 sys.databases 中的 log_reuse_wait_desc 列**

我怎样才能解决这个问题并删除重复的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:35:43.687

一个长期存在的问题。DELETE 是一个记录操作，过去的经验告诉我，当删除大量数据时，日志可能会增长到比数据文件大。一个好的解决方案，但并非在所有情况下都适用，是将要保留的数据复制到新表中，删除原始表，然后将新表重命名为原始表。显然，这必须在不使用数据库的维护期间完成。

嘿微软：不记录的 DELETE 怎么样

# c# - 配置 Unity 以使用 InterfaceInterceptors 和方法拦截器来拦截接口

> ID：15916828
> 
> 赞同：1
> 
> 时间：2013-04-10T04:15:36.213
> 
> 标签：c#, unity-container

我想要做的是让统一在一个对象上注册两个不同的 InterceptorBehaviors。我发现了两个通过容器应用拦截器的示例。它们似乎单独工作，但是当我尝试将它们一起使用时，界面拦截行为似乎并未尝试确定基于属性的行为。我在如何配置容器时做错了什么？

这是界面...

```
 public interface ISomeInterface{

    [NullWarningBehaviorAttribute]
    void WillLogWarningIfNull(string someValue);

    void WillThrowException();
} 
```

这是实现类...

```
public class SomeImplementation : ISomeInterface {

    [NullWarningBehaviorAttribute]
    public void WillLogWarningIfNull(string someValue) {

    }

    public void WillThrowException() {
    }
} 
```

这是基于属性的行为...

```
 public class NullWarningBehavior : ICallHandler{

    public IMethodReturn Invoke(IMethodInvocation input, GetNextInterceptionBehaviorDelegate getNext)
    {
        return getNext()(input, getNext);
    }

    public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
    {
        return getNext()(input, getNext);
    }

    public int Order { get; set; }
}

public class NullWarningBehaviorAttribute : HandlerAttribute {
    public override ICallHandler CreateHandler(IUnityContainer container) {
        return container.Resolve<NullWarningBehavior>();
    }
} 
```

这是接口拦截行为

```
public class ExceptionLoggingBehavior : IInterceptionBehavior {

    public IMethodReturn Invoke(IMethodInvocation input, GetNextInterceptionBehaviorDelegate getNext) {
        return getNext()(input, getNext);
    }

    public IEnumerable<Type> GetRequiredInterfaces() {
        return Type.EmptyTypes;
    }

    public bool WillExecute {
        get {
            return true;
        }
    }
} 
```

此代码将正确检测属性并调用 NullWarningBehaviorAttribute 上的构造方法以创建 ICallHandler。

```
var uc = new UnityContainer();
        uc.AddNewExtension<Interception>();
uc.RegisterType<ISomeInterface, SomeImplementation>(
          .Configure<Interception>()
          .SetDefaultInterceptorFor<ISomeInterface>(new InterfaceInterceptor()); 
```

以这种方式配置容器将成功创建接口拦截器。

```
 uc.RegisterType<ISomeInterface, SomeImplementation>(
      new Interceptor<InterfaceInterceptor>(),
      new InterceptionBehavior<ExceptionLoggingBehavior>()); 
```

我在想我可以简单地将这两种方法结合起来，但是当我这样做时，NullWarningBehaviorAttribute CreateHandler 方法永远不会被调用。有没有特定的配置方法？

```
 uc.RegisterType<ISomeInterface, SomeImplementation>(
            new InterceptionBehavior<ExceptionLoggingBehavior>())
          .Configure<Interception>()
          .SetDefaultInterceptorFor<ISomeInterface>(new InterfaceInterceptor()); 
```

# ruby-on-rails - Rails Carrierwave stor_dir 位置无效（Model.#{association} 返回 nil）

> ID：15916829
> 
> 赞同：0
> 
> 时间：2013-04-10T04:15:46.143
> 
> 标签：ruby-on-rails, ruby, image, upload, carrierwave

我正在使用 carrierwave 将图像上传到我的 web 应用程序。

有必要将它们上传到父模型的位置。

IE。

父母是有许多图像的房子。

所以我想将图像存储在

```
public/uploads/houses/images/[:house_id]/ 
```

这是我目前的设置。

```
..uploaders/image_uploader.rb

  def store_dir
    puts "uploads/house/#{model.house_id}/#{mounted_as}/#{model.id}"
    "uploads/house/#{model.house_id}/#{mounted_as}/#{model.id}"
  end 
```

puts 语句打印出我想要的正确路径，但保存的路径不匹配。看来 model.house_id 返回 nil

房屋模型

```
class House < ActiveRecord::Base
  attr_accessible :address, :description, :title, :price, :image, :image_id, :images, :image_cache
  has_many :images
  mount_uploader :image, ImageUploader
end 
```

图像模型

```
class Image < ActiveRecord::Base
  attr_accessible :house_id, :image
  mount_uploader :image, ImageUploader
  belongs_to :house
end 
```

我如何获得正确的路径/我做错了什么:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T08:20:18.083

请试试：

```
def cache_dir
"#{Rails.root}/public/uploads/houses/images"
end
def store_dir
  "#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
end 
```

# mysql - 使用 ORDER BY 需要更长的时间来执行

> ID：15916834
> 
> 赞同：0
> 
> 时间：2013-04-10T04:16:32.423
> 
> 标签：mysql, sql

我尝试加入两个表：

```
SELECT E . * , D . * 
FROM  `basicincident` E
LEFT JOIN incident D ON E.`INC_KEY` = D.`INC_KEY` 
WHERE E.`STATE` =  "MD"
AND SUBSTRING( E.INC_DATE , -4 ) =  "2009"
LIMIT 0 , 10 
```

它产生了良好的结果。

但是使用时`order by`，需要更长的时间才能产生结果。

```
SELECT  E . * , D . *
FROM  `basicincident` E 
LEFT JOIN incident D ON E.`INC_KEY` = D.`INC_KEY` 
WHERE E.`STATE` =  'MD' 
  AND SUBSTRING( E.INC_DATE , -4 ) = '2009' 
  AND E.INC_KEY >"MD0100110520090000015011111" 
ORDER BY E.INC_KEY limit 0,2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:30:55.027

E.INC_KEY 和 D.INC_KEY 的索引出于各种原因（包括这个）都很好。

您可以尝试按 d.INC_KEY 进行排序，以防优化器中发生有趣的事情。

关于上面的回答，请无视！

1) 你不能忽略 ORDER BY with LIMIT。如果您这样做，它将选择哪些行？只是查询计划中出现的任何内容 - 很可能不是您想要的。如果您需要 ORDER BY，那么您需要它。性能问题绝不能妨碍交付实际正确的结果！

2）数据库被设计为排序。认为你可以做得更好是愚蠢的——你做不到。为正确的工作使用正确的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:20:09.443

您是否使用您需要在期间周围留出空格？

```
SELECT E . * , D . * 
```

您需要给出命令，所以这样编写 SQL：

```
SELECT  E.*, D.* FROM `basicincident` E
    LEFT JOIN incident D ON E.`INC_KEY` = D.`INC_KEY`
    WHERE E.`STATE` = 'MD'
        AND SUBSTRING( E.INC_DATE , -4 ) = '2009'
        AND E.INC_KEY > "MD0100110520090000015011111"
    ORDER BY `E`.`INC_KEY` ASC
    LIMIT 0,2 
```

# sql - sql 从 DB2 获取特殊字符

> ID：15916849
> 
> 赞同：0
> 
> 时间：2013-04-10T04:17:59.807
> 
> 标签：sql, sql-server, sql-server-2008, db2

名称 = 麦当劳 | # 176 地址通道

名称 = 肯德基 | 67地址通道

健康）状况 ：

应打印带有名称和地址的特殊字符 (.,/-!@#$^&.....)。

因此，应打印名称 McDonald's 和 #176 地址通道，并消除其余没有特殊字符的名称和地址

预期输出：

麦当劳#176地址车道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T04:18:42.947

您可能可以使用`TRANSLATE`：

```
SELECT Name, Address FROM mytable WHERE Name <> TRANSLATE(Name,'                 ', '(.,/-!@#$^&.....)') OR Address <> TRANSLATE(Address,'                 ', '(.,/-!@#$^&.....)') 
```

for的第二个参数`TRANSLATE()`是一个字符串，由您要捕获的所有字符组成。第一个参数是与第二个参数长度相同的空白字符串。

如果在第二个字符串中找到任何字符`Name`或`Address`与第二个字符串中的任何字符匹配，则将使用更改后的值进行比较。通过与原始值进行比较，您将捕获具有特殊字符的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:49:27.687

看看`LIKE`对比一下。它将允许您使用`%`（或其他字符）作为字符串比较的通配符。如果您在查看手册后需要更多帮助，请说明您不理解的部分。

# c++ - 在 C++ 中使用向量设置联合算法

> ID：15916856
> 
> 赞同：4
> 
> 时间：2013-04-10T04:18:37.417
> 
> 标签：c++, algorithm, vector, union-find

我只`std::vector`在这个问题中使用，我可以保证每个向量中没有重复（但每个向量中没有任何顺序）。如何合并我拥有的向量？

例子：

如果我有以下向量...

```
1
1
3 2
5
5 4
2
4
4 2 
```

在联合之后，我应该只剩下两个向量：

```
1
2 3 4 5 
```

同样，我只使用矢量，`std::set`不允许。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T04:23:21.357

您可以使用 std::set_union 算法。

```
int first[] = {5,10,15,20,25};
  int second[] = {50,40,30,20,10};
  std::vector<int> v(10);                      // 0  0  0  0  0  0  0  0  0  0
  std::vector<int>::iterator it;

  std::sort (first,first+5);     //  5 10 15 20 25
  std::sort (second,second+5);   // 10 20 30 40 50

  it=std::set_union (first, first+5, second, second+5, v.begin());
                                               // 5 10 15 20 25 30 40 50  0  0
  v.resize(it-v.begin());                      // 5 10 15 20 25 30 40 50 
```

参考：[http ://www.cplusplus.com/reference/algorithm/set_union/](http://www.cplusplus.com/reference/algorithm/set_union/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:25:04.113

对向量进行排序，然后像合并排序一样合并它们，但不要插入重复项。

```
vector<int> a, b, c;
sort( a.begin(), a.end());
sort( b.begin(), b.end());
int i = 0, j = 0;
while( i < a.size() && j < b.size())
if( a[ i ] == b[ j ] )
{
   c.push_back( a[ i ] );
   ++i, ++j;
}
else if( a[ i ] < b[ j ] )
   c.push_back( a[ i++ ] );
else 
   c.push_back( b[ j++ ] );

while( i < a.size()) c.push_back( a[ i++ ] );
while( j < b.size()) c.push_back( b[ j++ ] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:23:09.120

这是我的代码：

```
template<class T> bool vectorExist (vector<T> c, T item)
{
    return (std::find(c.begin(), c.end(), item) != c.end());
}

template<class T> vector<T> vectorUnion (vector<T> a, vector<T> b)
{
    vector<T> c;

    std::sort(a.begin(), a.end());
    std::sort(b.begin(), b.end());

    auto i = a.begin();
    auto j = b.begin();

    while (i != a.end() || j != b.end())
    {
        if (j == b.end() || *i < *j)
        {
            if(!exist(c,*i)) c.insert(*i);
            i++;
        }
        else
        {
            if(!exist(c,*j)) c.insert(*j)
            j++;
        }
    }

    return c;
} 
```

# delphi - 如何在 Delphi FMX 中制作像文件管理器一样的资源管理器？

> ID：15916857
> 
> 赞同：0
> 
> 时间：2013-04-10T04:18:49.310
> 
> 标签：delphi, firemonkey

Delphi FMX 中没有任何 ShellListView/ShellTreeView 组件。那么，如何在 Delphi FMX 中制作像文件管理器一样的资源管理器？只是简单地计算有多少文件/文件夹，某些类型的文件......并创建文本，读/写文件。如何在 Delphi FMX 中处理文件系统？我在 Delphi FMX 中找不到 System.IOUtils。我想，也许我完全误解了 FMX 框架。有什么提示吗？

谢谢！！！

胡米切尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:28:28.827

Firemonkey 是一个可视化框架。人们对 Embarcadero 的营销方式如此着迷，以至于他们常常没有意识到 VCL 可以完成的大部分工作也可以通过 Firemonkey 完成——它只是需要不同的方法和视角。

使用 VCL，您将处理 Windows 本身固有的控件。VCL 只是通过 Delphi（和 C++）语言公开这些。

使用 Firemonkey，控件是使用矢量形状创建的，因此它们不是特定平台的原生控件。因此，可以创建任何类型的界面并在众多平台上运行它。在 FMX 发布的同时，Embarcadero 使他们的单元跨平台，这意味着 Delphi 包含的*大多数*逻辑和数据单元可以在 Firemonkey 支持的任何平台上运行。一些功能仍然是特定于平台的，但由于巧妙地使用了**IFDEF** ，大多数功能都是平台包容性的。

在您的示例中，`System.IOUtils`它并不特定于框架，并且可以与 Firemonkey 一起使用。您确实需要先将其添加到您的`uses`文件中，然后才能使用它，但该单元包含创建文件管理器所需的一切。`System.IOUtils.TDirectory`包含用于创建、重命名、删除、遍历和操作目录属性的例程。您可以在 Google 上找到的许多旧示例例程仍然有效（您可能需要查找“递归目录”示例）。`System.IOUtils.TFile`提供了一组类似的例程，但用于文件而不是目录，而`System.IOUtils.TPath`为路径提供它们。

[XE3 Docwiki 上的 System.IOUtils](http://docwiki.embarcadero.com/Libraries/XE3/en/System.IOUtils)

*   [System.IOUtils.T目录](http://docwiki.embarcadero.com/Libraries/XE3/en/System.IOUtils.TDirectory)
*   [System.IOUtils.TFile](http://docwiki.embarcadero.com/Libraries/XE3/en/System.IOUtils.TFile)

**扩建 2013 年 4 月 14 日**

`TTreeView`与孩子一起使用`TTreeViewItem`将有助于在视觉中创建目录结构。

Using`System.IOUtils.TDirectory.GetDirectories('C:\')`将返回一个动态字符串数组 ( `TStringDynArray`)。这样的事情可能会起作用（注意：经过**测试**- 确认下面的代码示例有效）；

```
var
  DirArraySize, i : Integer;
  DirArray : TStringDynArray;
  TreeItem : TTreeViewItem;
begin
  DirArray := System.IOUtils.TDirectory.GetDirectories('C:\');
  DirArraySize := Length(DirArray);
  for i := 0 to DirArraySize-1 do
  begin
    TreeItem := TTreeViewItem.Create(TreeView1);
    TreeItem.text := DirArray[i];
    TreeItem.Parent := TreeView1;
  end;
end; 
```

我现在已经测试了上面的代码，并在进行了小幅更正后（应该更改`MyArray`为`DirArray`第 6 行），并且可以确认它将 C:\ 中的文件夹/目录列表输出到`TTreeView`. 使其递归不会太困难，也许我会在不久的将来对此进行扩展。

# c# - 使用 Roslyn 更改部分源代码的背景颜色

> ID：15916858
> 
> 赞同：0
> 
> 时间：2013-04-10T04:18:50.873
> 
> 标签：c#, visual-studio, syntax-highlighting, roslyn

我有点困惑，因为我没有找到任何关于使用 Roslyn 的编辑服务着色的信息。可能我使用了错误的短语和表达方式。

在与 Roslyn 进行分析后，我想更改源代码中单词或块的背景颜色。突出显示带有“错误”、“信息”或“警告”类型的部分的可能性并不是我想要的！也许你可以给我一个想法或从哪里开始的信息！

我使用 Visual Studio 2012 Ultimate 和 Roslyn Vers。2012 年 9 月

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:03:17.293

查看 ClassificationProvider 示例。分类是 VS 编辑器用于语法着色的术语。

# asp.net - 如何在DataList的特殊列/行中添加控件？

> ID：15916864
> 
> 赞同：0
> 
> 时间：2013-04-10T04:19:17.720
> 
> 标签：asp.net, datalist

我有一个包含 3 列和 3 行的数据列表，将其绑定到数据源。

```
 <asp:DataList ID="DataList1"  RepeatDirection="Horizontal" runat="server" RepeatColumns="3">
   <ItemTemplate>
     <a href="#" class="tile group0 " style="margin-left: 20px; margin-right: 20px; width: 145px; height: 126px; background: none repeat scroll 0% 0%  rgb(102, 128, 0); display: inline;">
       <h5 class="white"><%# Eval("Name") %></h5>
     </a>
   </ItemTemplate>
  </asp:DataList> 
```

我在数据源中有 8 条记录。

```
DataTable dt = clsCategoryFactory.GetAllDT();
DataList1.DataSource=dt;
DataList1.DataBind(); 
```

我想在 column3 rows3 上添加一个按钮。

可以在datalist的特殊列/行中添加控件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:49:05.703

why don't you put your button in footer template.

```
<FooterTemplate>
    <asp:Button ID="btnNext" runat="server" Text="CheckOut" 
         onclick="btnNext_Click" />
</FooterTemplate> 
```

# java - 通过使用特定于部署它的 jar 创建一个 java 类，在谷歌应用引擎中部署 war 文件

> ID：15916868
> 
> 赞同：0
> 
> 时间：2013-04-10T04:19:45.860
> 
> 标签：java, google-app-engine, executable-jar

我已经搜索了需要使用部署方法创建简单 java 类的各种解决方案。这个部署方法应该获取war文件的路径并部署在app engine google account中。我试图得到它的罐子并使用这些方法..但即使在搜索之后我也没有任何细节需要帮助。那么有什么好的建议吗？关于如何直接在谷歌应用引擎中部署它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:56:09.153

您的意思是以编程方式部署到 GAE 吗？

当然，这是可能的。查看[AppCfg 源](https://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/tools/admin/AppCfg.java?r=182)并提取与部署相关的类。

# delphi - 我在运行时包 delphi xe2 上运行 exe 文件时遇到问题

> ID：15916870
> 
> 赞同：0
> 
> 时间：2013-04-10T04:19:50.817
> 
> 标签：delphi, runtime-packages

我试图用动态运行时包制作程序Delphi XE2。当我编译它时没有问题，但是当使用 F9 程序运行时，刚刚编译并创建了 exe 文件但它没有运行。我的配置有什么问题？

我使用的配置

*   与运行时包集链接真——来自所有配置的值 32 位 Windows 平台集真

*   运行时包继承集 True

注意“当与运行时包链接时”设置为false，它可以正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:27:26.443

您描述的行为是找不到 .bpl 文件时发生的情况。如果您在 IDE 之外运行 .exe，您将收到一条错误消息。由于某种原因，从 IDE 中运行时不会显示错误消息。*请注意，即使使用Run without Debugging*选项也是不够的。您必须在 IDE 之外启动可执行文件，例如在资源管理器窗口中双击 .exe 文件。

调试它以找出哪些依赖项失败的最有效方法可能是使用 Dependency Walker。加载您的可执行文件并从“配置文件”菜单调试其启动。

通过确保可以找到 .bpl 文件来解决问题。确保它们位于 DLL 搜索路径上。最好的方法是将它们放在 .exe 文件旁边。

# camera - 等待相机保存照片，有什么比thread.sleep更好的？

> ID：15916873
> 
> 赞同：0
> 
> 时间：2013-04-10T04:20:02.987
> 
> 标签：camera, thread-sleep, start-activity

我有一个自定义的 OpenCV 相机活动，可以在点击屏幕时拍照。Activity 是带着一个`startActivityForResult`Intent 启动的，在 Activity 完成之后，照片的文件路径会交还给 MainActivity。但是，相机会异步保存照片，因此在拍摄照片之前不应检查文件路径。我正在使用文件路径来设置一个`imageView`，并立即调用它会给出一个空图像。我已经设法通过使用使其工作，`Thread.sleep(3000);`但这是一个可怕的选择，因为它只会停止 UI，正如我无数次阅读的那样，这是一个很大的禁忌！*有没有办法可以等到照片保存后再调用返回`MainActivity`意图？*我知道相机有回调，但我不明白它是如何工作的或如何使用它，也许这是最好的方法？

无论如何，这里有一些代码。

在`MainActivity extends FragmentActivity`：

```
rootView.findViewById(R.id.button_start_camera).setOnClickListener(new View.OnClickListener() {
                // Listen for Take Photo button Click, start app's openCV camera
                @Override
                public void onClick(View view) {
                    // Start Camera app
                    Intent intentCamera = new Intent(getActivity(), CameraActivity.class);
                    startActivityForResult(intentCamera, 2);
                }
            }); 
```

在`CameraActivity extends Activity implements CvCameraViewListener2, OnTouchListener`：

```
@Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.i(TAG,"onTouch event");
        if (takePicture) {
            SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd-HHmmss");
            String currentDateandTime = sdf.format(new Date());
            fileName = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).getPath() +
                    "/MatCom_" + currentDateandTime + ".jpg";
            mOpenCvCameraView.takePicture(fileName);
            Toast.makeText(this, fileName + " saved", Toast.LENGTH_SHORT).show();
            try {
                Thread.sleep(3000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            Intent returnIntent = new Intent();
            returnIntent.putExtra("result", fileName);
            setResult(RESULT_OK, returnIntent);
            finish();
        }
            return false;
    } 
```

然后回到`MainActivity`：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent)
    {
        super.onActivityResult(requestCode, resultCode, intent);
        Log.i(TAG, "onActivityResult. resultCode = " + requestCode);
        if (requestCode == 1) {//My other startActivityForResult...}

        if (requestCode == 131074 && resultCode == RESULT_OK){
            Bundle bundle = intent.getExtras();
            filepath = bundle.getString("result");
            Log.i(TAG, filepath);
            imageView = (ImageView) findViewById(R.id.imageView);
            bmp = BitmapFactory.decodeFile(filepath);
            imageView.setBackgroundResource(0);
            imageView.setImageBitmap(bmp);  
        }
    } 
```

**注意**：顺便说一句，出于某种原因，尽管我将其设置为 2，但由于某种原因，我`requestCode`每次都会返回 131074 `startActivityForResult`- 如果您知道为什么会这样，请告诉我。

最后，如果有必要查看，这里是类中的`takePicture`方法`CameraView`：

```
public void takePicture(final String fileName) {
        Log.i(TAG, "Taking picture");
        PictureCallback callback = new PictureCallback() {

            private String mPictureFileName = fileName;

            @Override
            public void onPictureTaken(byte[] data, Camera camera) {
                Log.i(TAG, "Saving a bitmap to file");
                Bitmap picture = BitmapFactory.decodeByteArray(data, 0, data.length);
                try {
                    FileOutputStream out = new FileOutputStream(mPictureFileName);
                    picture.compress(Bitmap.CompressFormat.JPEG, 90, out);
                    picture.recycle();

                    // Open the image for analysis

                    // Read in the image from the file
                    Mat mOriginalImage = Highgui.imread(fileName);

                    // Only process the image if it actually exists!
                    if (mOriginalImage != null) {

                        // Find the size of the image
                        org.opencv.core.Size mSizeReadImage = mOriginalImage.size();

                        // From the number of rows and columns get the coordinates of the largest possible centralised square
                        double height = mSizeReadImage.height;
                        double width = mSizeReadImage.width;
                        double minDim = Math.min(height, width);
                        double top = height/2.0 - 2.0*minDim/5.0;
                        double left = width/2.0 - 2.0*minDim/5.0;

                        // Create a submat of the image based on the centralised square
                        Mat mOriginalImageSubmat = mOriginalImage.submat((int)Math.round(top), (int)Math.round(top + 4.0*minDim/5.0), (int)Math.round(left), (int)Math.round(left + 4.0*minDim/5.0));

                        // Create another Mat the required size but same type as mOriginalImageSubmat and resize mOriginalImageSubmat to fit into it
                        Mat mDrawableSubmat = new Mat(new Size(480.0, 480.0), mOriginalImageSubmat.type());
                        Imgproc.resize(mOriginalImageSubmat, mDrawableSubmat, mDrawableSubmat.size());

                        Mat mColourSourceSubmat = mDrawableSubmat.clone();
                        Mat mCannyOutput = mDrawableSubmat.clone();

                        double minLineLength = 300.0;

                        ColourMatrix matrix = new ColourMatrix();

                        matrix.setColourMatch(colourMatch);
                        matrix.setColourOrder(colourOrder);
                        matrix.setComparison(comparison);
                        matrix.setDisplayHotspots(displayHotspots);
                        matrix.setDisplayOutline(displayOutline);
                        matrix.setIntensity(intensity);
                        matrix.setMatrixType(matrixType);

                        String output = matrix.decode(mColourSourceSubmat, mCannyOutput, mDrawableSubmat, minLineLength);
                        Log.i(TAG, "DJH - decoded: " + output);
                    }

                    mCamera.startPreview();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        };

        mCamera.takePicture(null, null, callback);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:31:49.540

Thread.sleep 本身并不坏。您可以使用循环到 30 和`thread.sleep(100)`. 然后，您一次只能暂停 0.1 秒，而 CPU 仍然不会达到峰值。

# c - 按位除法舍入到最接近的零

> ID：15916876
> 
> 赞同：3
> 
> 时间：2013-04-10T04:20:10.033
> 
> 标签：c, math, bit-manipulation

我想执行一个有符号整数按位除以 2 的幂。但是，我遇到了几个问题。我只是想知道是否有人可以帮助我。

首先，我尝试单独使用位移：

```
int result = number >> n; 
```

但是，当我尝试除以负数时遇到问题。（它总是用更大的数字四舍五入。例如：-9/4=-3 而不是-2。所以，我在互联网上查看了这个问题，最终我得到了这个解决方案：

```
int result = (number + (1<<n)-1) >> n; 
```

但是，当我尝试 11/4 = 3 而不是 2

有什么建议么？我只能用！~ & ^ | + << >>（不允许循环或 if/switch）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T04:57:19.253

以下方法不好，因为它依赖于：

*   负整数的右移是算术移位（可能不是这种情况）
*   有符号整数在 2 的补码表示中（极少数情况可能不是这样）
*   没有任何填充位的整数（这些天在现代 CPU 上你不会找到填充位，尽管标准允许它们存在）

`INT_MIN`由于有符号整数溢出，它可能会导致某些红利（例如）的未定义行为。

因此它不是便携式的，也不能保证总是工作。你被警告了。

```
#include <stdio.h>
#include <limits.h>

int DivByShifting1(int n, unsigned shift)
{
  int sgn = n >> ((sizeof(int) * CHAR_BIT) - 1);
  return ((((n + sgn) ^ sgn) >> shift) + sgn) ^ sgn;
}

int main(void)
{
  int n, s;
  for (n = -10; n <= 10; n++)
    for (s = 0; s <= 4; s++)
      printf("%d / %d = %d\n", n, 1 << s, DivByShifting1(n, s));
  return 0;
} 
```

输出（[ideone](http://ideone.com/vJt4nJ)）：

```
-10 / 1 = -10
-10 / 2 = -5
-10 / 4 = -2
-10 / 8 = -1
-10 / 16 = 0
-9 / 1 = -9
-9 / 2 = -4
-9 / 4 = -2
-9 / 8 = -1
-9 / 16 = 0
-8 / 1 = -8
-8 / 2 = -4
-8 / 4 = -2
-8 / 8 = -1
-8 / 16 = 0
-7 / 1 = -7
-7 / 2 = -3
-7 / 4 = -1
-7 / 8 = 0
-7 / 16 = 0
-6 / 1 = -6
-6 / 2 = -3
-6 / 4 = -1
-6 / 8 = 0
-6 / 16 = 0
-5 / 1 = -5
-5 / 2 = -2
-5 / 4 = -1
-5 / 8 = 0
-5 / 16 = 0
-4 / 1 = -4
-4 / 2 = -2
-4 / 4 = -1
-4 / 8 = 0
-4 / 16 = 0
-3 / 1 = -3
-3 / 2 = -1
-3 / 4 = 0
-3 / 8 = 0
-3 / 16 = 0
-2 / 1 = -2
-2 / 2 = -1
-2 / 4 = 0
-2 / 8 = 0
-2 / 16 = 0
-1 / 1 = -1
-1 / 2 = 0
-1 / 4 = 0
-1 / 8 = 0
-1 / 16 = 0
0 / 1 = 0
0 / 2 = 0
0 / 4 = 0
0 / 8 = 0
0 / 16 = 0
1 / 1 = 1
1 / 2 = 0
1 / 4 = 0
1 / 8 = 0
1 / 16 = 0
2 / 1 = 2
2 / 2 = 1
2 / 4 = 0
2 / 8 = 0
2 / 16 = 0
3 / 1 = 3
3 / 2 = 1
3 / 4 = 0
3 / 8 = 0
3 / 16 = 0
4 / 1 = 4
4 / 2 = 2
4 / 4 = 1
4 / 8 = 0
4 / 16 = 0
5 / 1 = 5
5 / 2 = 2
5 / 4 = 1
5 / 8 = 0
5 / 16 = 0
6 / 1 = 6
6 / 2 = 3
6 / 4 = 1
6 / 8 = 0
6 / 16 = 0
7 / 1 = 7
7 / 2 = 3
7 / 4 = 1
7 / 8 = 0
7 / 16 = 0
8 / 1 = 8
8 / 2 = 4
8 / 4 = 2
8 / 8 = 1
8 / 16 = 0
9 / 1 = 9
9 / 2 = 4
9 / 4 = 2
9 / 8 = 1
9 / 16 = 0
10 / 1 = 10
10 / 2 = 5
10 / 4 = 2
10 / 8 = 1
10 / 16 = 0 
```

请注意，这`((sizeof(int) * CHAR_BIT) - 1)`是一个编译时常量，因此`*`是`-`可以允许的。

另一个版本非常相似，但不需要负整数的右移是算术移位，并且没有有符号整数溢出（2 的补码和填充位仍然是限制，但在今天的实践中几乎不存在）：

```
#include <stdio.h>
#include <limits.h>
#include <string.h>

int DivByShifting2(int n, unsigned shift)
{
  unsigned un = n;
  unsigned sgn = 1 + ~(un >> ((sizeof(int) * CHAR_BIT) - 1));
  un = ((((un + sgn) ^ sgn) >> shift) + sgn) ^ sgn;
  memcpy(&n, &un, sizeof n);
  return n;
}

int main(void)
{
  int n, s;
  for (n = -10; n <= 10; n++)
    for (s = 0; s <= 4; s++)
      printf("%d / %d = %d\n", n, 1 << s, DivByShifting2(n, s));
  return 0;
} 
```

输出（[ideone](http://ideone.com/bVNWaV)）：

```
-10 / 1 = -10
-10 / 2 = -5
-10 / 4 = -2
-10 / 8 = -1
-10 / 16 = 0
-9 / 1 = -9
-9 / 2 = -4
-9 / 4 = -2
-9 / 8 = -1
-9 / 16 = 0
-8 / 1 = -8
-8 / 2 = -4
-8 / 4 = -2
-8 / 8 = -1
-8 / 16 = 0
-7 / 1 = -7
-7 / 2 = -3
-7 / 4 = -1
-7 / 8 = 0
-7 / 16 = 0
-6 / 1 = -6
-6 / 2 = -3
-6 / 4 = -1
-6 / 8 = 0
-6 / 16 = 0
-5 / 1 = -5
-5 / 2 = -2
-5 / 4 = -1
-5 / 8 = 0
-5 / 16 = 0
-4 / 1 = -4
-4 / 2 = -2
-4 / 4 = -1
-4 / 8 = 0
-4 / 16 = 0
-3 / 1 = -3
-3 / 2 = -1
-3 / 4 = 0
-3 / 8 = 0
-3 / 16 = 0
-2 / 1 = -2
-2 / 2 = -1
-2 / 4 = 0
-2 / 8 = 0
-2 / 16 = 0
-1 / 1 = -1
-1 / 2 = 0
-1 / 4 = 0
-1 / 8 = 0
-1 / 16 = 0
0 / 1 = 0
0 / 2 = 0
0 / 4 = 0
0 / 8 = 0
0 / 16 = 0
1 / 1 = 1
1 / 2 = 0
1 / 4 = 0
1 / 8 = 0
1 / 16 = 0
2 / 1 = 2
2 / 2 = 1
2 / 4 = 0
2 / 8 = 0
2 / 16 = 0
3 / 1 = 3
3 / 2 = 1
3 / 4 = 0
3 / 8 = 0
3 / 16 = 0
4 / 1 = 4
4 / 2 = 2
4 / 4 = 1
4 / 8 = 0
4 / 16 = 0
5 / 1 = 5
5 / 2 = 2
5 / 4 = 1
5 / 8 = 0
5 / 16 = 0
6 / 1 = 6
6 / 2 = 3
6 / 4 = 1
6 / 8 = 0
6 / 16 = 0
7 / 1 = 7
7 / 2 = 3
7 / 4 = 1
7 / 8 = 0
7 / 16 = 0
8 / 1 = 8
8 / 2 = 4
8 / 4 = 2
8 / 8 = 1
8 / 16 = 0
9 / 1 = 9
9 / 2 = 4
9 / 4 = 2
9 / 8 = 1
9 / 16 = 0
10 / 1 = 10
10 / 2 = 5
10 / 4 = 2
10 / 8 = 1
10 / 16 = 0 
```

@R .. 正确地提醒从 a`signed int`到 an的转换`unsigned int`可以通过添加 0u （无符号 0）来完成。

而且他还提醒，`un`可以直接退货，而不是做`memcpy()`to `n`。转换应该是实现定义的，但在 C 的 2 的补码实现中，逐位复制实际上总是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:38:29.393

只需使用`/`运算符：

```
int result = number / (1 << n); 
```

任何体面的编译器都会将其编译为最佳位移，并修复负面结果的“四舍五入”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:57:12.550

也许这应该对您有所帮助。

1）如果您使用`/`运算符，则标准说（`ISO/IEC TR3 in 6.5.5 Multiplicative operators`）运算符的**结果****是`/`**第一个操作数除以第二个操作数的商。

2) 如果您使用`>>`标准表明 ( `ISO/IEC TR3 in 6.5.7`) LHS 操作数是有符号类型且为负数的**结果`>>`，则结果值为`implementation defined`**。

所以`/`会给你你想要的结果。

但`>>`有符号 && 负数取决于您的编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T05:48:45.447

从拆机来看`int div(int a){return a/4;}`：

```
leal 3(%rdi), %eax
testl %edi, %edi
cmovns %edi, %eax
sarl $2, %eax 
```

`(1<<n)-1`当且仅当操作数为负时，必须调整操作数。

一个无条件的方法是使用`sgn(a)*(abs(a)>>n)`; 两者都可以根据实现定义的行为使用无分支 bitmagic 来实现。

# php - Preg_Replace 给出空值错误

> ID：15916879
> 
> 赞同：-1
> 
> 时间：2013-04-10T04:20:20.820
> 
> 标签：php, regex, preg-replace

您好，每当我检查用户输入是否输入任何值时，我都想使用 Preg_Replace 函数。如果没有给出错误消息，例如“请输入您的姓名”，但我收到的不是这个错误：

> 注意：未定义索引：第 24 行 C:\xampp\htdocs\spdealers\Admin
> Panel\Property_Insert_Page_exe.php 中的buildinglabs

这是我的代码：

```
<?php
  $buildingslabs = preg_replace("[^A-Z a-z0-9]", "", $_POST['buildingslabs']);

  if(empty($buildingslabs)
  {
    echo 'Plese Enter the Buildings Labs';
  }
  else
  {
    echo 'successfully inserted';
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:25:25.243

`isset`在这里使用

```
if(isset($_POST['buildingslabs'])) {
    $buildingslabs = preg_replace("[^A-Z a-z0-9]", "", $_POST['buildingslabs']);

    if(empty($buildingslabs)
    {
        echo 'Plese Enter the Buildings Labs';
    }
    else
    {
        echo 'successfully inserted';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:24:18.807

```
<?php
  if(!empty( $_POST['buildingslabs'])){
  $buildingslabs = preg_replace("[^A-Z a-z0-9]", "", $_POST['buildingslabs']);

  if(empty($buildingslabs)
  {
   echo 'Plese Enter the Buildings Labs';
  }
  else
  {
  echo 'successfully inserted';
  }
}
else{
echo 'Plese Enter the Buildings Labs';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:25:06.027

```
Notice: Undefined index: buildingslabs in C:\xampp\htdocs\spdealers\Admin        
Panel\Property_Insert_Page_exe.php on line 24 
```

它表明您在 $_POST['buildingslabs'] 中的索引不存在。尝试检查您输入的文本名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T04:26:18.763

错误不在 preg_replace 中。

采用

`if(empty($_POST['buildingslubs'])) $_POST['buildingslubs'] = '';`

在 preg_replace 开始之前

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T04:30:38.143

通知不是来自`preg_replace()`；相反，您正在尝试访问`$_POST['buildinglabs']`但未`buildinglabs`发布参数。

我会翻转正则表达式并使用`filter_input()`：

```
$labs = filter_input(INPUT_POST, 'buildingslabs', FILTER_VALIDATE_REGEXP, [
    'options' => ['regexp' => '/^[A-Z a-z0-9]+$/'],
    'flags' => FITLER_NULL_ON_FAILURE,
]);

if ($labs !== null) {
    // do something
} 
```

`$labs`如果未发布参数（可能是 GET 请求或 POST 中缺少某些内容），则为`null`.

如果不是，则正则表达式尝试验证整个字符串（从开始到结束），所有字符都在给定字符集中。

# php - 在 PHP 中用 dorks 抓取 google

> ID：15916882
> 
> 赞同：0
> 
> 时间：2013-04-10T04:20:33.153
> 
> 标签：php, curl, scrape

我正在尝试使用代码中提供的 dork 从 Google 抓取 URL。

现在我正在使用 cURL，但它说“curl_init() 在未定义的函数中”

到目前为止，我得到了：

```
 //This is the Pattern for URL finding
$pattern = "~^(http|ftp)(s)?\:\/\/((([a-z0-9]{1,25})(\.)?){2,7})($|/.*$)~i"; 
//Enter your dork here.
$dork = "inurl: login.php";
//Set the Useragent
$ua = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311";
//Initialize cURL
$ch = curl_init();
$url = "http://www.google.com/search?q=".$dork;
$timeout = 10;
curl_setopt($ch,CURL_OPT, $url);
curl_setopt($ch,CURLOPT_USERAGENT,$ua);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);

$exec = curl_exec($ch);
$contents = curl_getinfo($ch);
//curl_close($ch);

//Set empty url array
$urls = array();
//Find urls on page you just grabbed ^
preg_match_all($pattern, $contents, $matches);

//Assign the urls to the empty array urls
    foreach ($matches[0] as $match)
    {
        $urls[] = "{$match}";
    }

//Remove any duplicates in url array
$vurls = array_unique($urls);
//take out spaces
$urlStr = implode("", $urls);

//count number of unique urls
$count = count($vurls);

//Writing to text file
$fh = fopen('wp.txt', 'w');
fwrite($fh, $urlStr);
fclose($fh);

//Echoing # of urls found.
echo "Done. Found {$count} sites.\n"; 
```

我不知道出了什么问题，我也试图让它刮掉多个页面。但想知道我应该如何解决这个问题。

如果有人能指出我正确的方向，那将非常有帮助，我不需要用勺子喂食。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:23:38.397

您需要在 PHP中启用**cURL 。**为此，您需要在其中找到此行`php.ini`并取消注释：

```
;extension=php_curl.dll 
```

这样做：

```
extension=php_curl.dll 
```

![](https://www.joomlashine.com/images/content/blog/website-development-tutorials/how-to-enable-curl-in-php/curl-enable-line.png)

* * *

如果您使用的是**Windows 7**机器...

1.  确保`php.ini`php 引擎使用的是您认为的那个。
2.  确保`extension_dir`in`php.ini`正确设置为 ext 文件夹。
3.  确保`extension=php_curl.dll`在 中`php.ini`未注释。
4.  确保文件夹中有两个文件`%windir%\system32`：

    ```
    libeay32.dll
    ssleay32.dll 
    ```

如果没有，则需要从php文件夹中复制这两个文件

* * *

如果您在**Ubuntu 机器**上，您可能需要以这种方式安装 cURL：

```
apt-get install php5-curl
/etc/init.d/apache2 restart 
```

* * *

然后**重新启动 Apache 服务器**。使用此代码检查 cURL 函数是否已加载。

```
<?php
    phpinfo();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:23:11.890

PHP 不知道该函数的唯一原因`curl_init`是它没有配置 cURL 支持 ( [http://us1.php.net/manual/en/curl.installation.php](http://us1.php.net/manual/en/curl.installation.php) )。

您可以检查输出`phpinfo()`以确认这一点。

# javascript - 用于 Nicedit 图像的自定义浮动样式插件

> ID：15916887
> 
> 赞同：1
> 
> 时间：2013-04-10T04:21:02.753
> 
> 标签：javascript, plugins, wysiwyg, nicedit

我一直在使用 Nicedit，我使用以下代码将图像拖放到 textarea 中，效果很好。我想要做的是在插入后向图像添加 FLOAT 样式，例如：

```
 <img src="blah.jpg" height="266" width="400" style="float:left"> 
```

我知道我需要构建一个简单的插件，但我对 javascript 不太感兴趣，有人可以帮忙吗？非常感谢;-）

```
 <style type="text/css">
<!--
#lft {
float: left;
width: 250px;
height: 500px;
overflow: scroll;
overflow-y: scroll;
overflow-x: hidden;
}
#rgt {
float: right;
width: 700px;
}
#main {
width: 960px;
height: 500px;
margin-top: 0;
margin-right: auto;
margin-bottom: 0;
margin-left: auto;
}
.pc{clear:both}
-->
</style>

<script src="nicEdit.js"></script>
<script>bkLib.onDomLoaded(function() { nicEditors.allTextAreas() });</script>
<div id="main">

<div id="lft">
<form action="" method="post">
<select name="folder">
  <option value="s">Small</option>
  <option value="m">Medium</option>
  <option value="l">Large</option>
</select>
<input type="submit" name="Submit" value="CHANGE FOLDER" /></form>
<?php 
$folder=$_POST['folder'];
if(!$folder): 
$folder='s'; endif;
$files = glob("gal/".$folder."/*.{jpg,png,gif,bmp}", GLOB_BRACE);
for ($i=0; $i<count($files); $i++) {
$num = $files[$i]; 
list($width, $height, $type, $attr) = getimagesize($num); ?>
<img src="<?=$num?>" <?=$attr?>/><br />
<?php }  ?>
</div>

<div id="rgt">
<textarea name="textarea" cols="60" rows="50"></textarea>
</div>
<div class="pc"></div></div> 
```

# android - 按字母顺序对带有光标内容的列表视图进行排序（来自数据库）

> ID：15916890
> 
> 赞同：2
> 
> 时间：2013-04-10T04:21:25.903
> 
> 标签：android, sorting, listview, cursor

我在这里阅读了一些关于如何使用例如 collections.sort 或 sortOrder 按字母顺序排列列表视图的主题，但我无法让它在我的情况下工作，因为我没有使用数组列表。

我的列表视图是用数据库中的元素填充的，首先放入游标中，这样：

```
private void displayListView() {

    // getExtra
    Bundle bundle = getIntent().getExtras();
    String title = bundle.getString("title", "Choose here :");
    String inInterval = bundle.getString("inInterval");
    Log.d(TAG, "inInterval = " + inInterval);
    poititle.setText(title);
    // put the results of the method in a cursor
    c = dbHelper.findPoiInTable(inInterval);
    displayCursor();
} 

private void displayCursor() {

    String[] columns = new String[] { DatabaseAdapter.COL_NAME,
            DatabaseAdapter.COL_STREET, DatabaseAdapter.COL_WEBSITE,
            DatabaseAdapter.COL_TELEPHONE, DatabaseAdapter.COL_REMARKS,
            DatabaseAdapter.COL_PRICE, DatabaseAdapter.COL_MOBILE };
    int[] to = new int[] { R.id.name, R.id.street, R.id.website,
            R.id.telephone, R.id.remarks, R.id.price, R.id.mobile };
    cursorAdapter = new SimpleCursorAdapter(this, R.layout.poi_info, c,
            columns, to, 0);

    ListView listView = (ListView) findViewById(R.id.poilistview);
    // Assign adapter to ListView
    listView.setAdapter(cursorAdapter);

    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        // Comportement des éléments de la listview
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent i = new Intent(getApplicationContext(),
                    POIActivity.class);

            String name = ((TextView) view.findViewById(R.id.name))
                    .getText().toString();
            String street = ((TextView) view.findViewById(R.id.street))
                    .getText().toString();
            String website = ((TextView) view.findViewById(R.id.website))
                    .getText().toString();
            String telephone = ((TextView) view
                    .findViewById(R.id.telephone)).getText().toString();
            String remarks = ((TextView) view.findViewById(R.id.remarks))
                    .getText().toString();
            String price = ((TextView) view.findViewById(R.id.price))
                    .getText().toString();
            String mobile = ((TextView) view.findViewById(R.id.mobile))
                    .getText().toString();
            // i.putExtra(ID_EXTRA, name) ;
            i.putExtra(ID_NAME, name);
            i.putExtra(ID_STREET, street);
            i.putExtra(ID_WEBSITE, website);
            i.putExtra(ID_TELEPHONE, telephone);
            i.putExtra(ID_REMARKS, remarks);
            i.putExtra(ID_PRICE, price);
            i.putExtra(ID_MOBILE, mobile);
            startActivity(i);
        }

    });

    int numberResults = listView.getCount();
    listviewCount.setText("( " + numberResults + " results ) : ");
} 
```

我正在寻找最简单的方法来指定我希望结果与单词 (name / ID_NAME) 一起按字母顺序显示。所以我的问题是，有没有办法添加一行：

> 排序顺序（名称，byAlph）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T04:24:49.540

查询数据库时，只需添加“ORDER BY ID_NAME”即可。

或者，如果您想使用[查询生成器](https://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#query%28android.database.sqlite.SQLiteDatabase,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-18T13:05:13.350

要按字母顺序对数据进行排序，请执行以下操作：

```
Cursor cursor = getContentResolver.query(Phone.CONTENT_URI, null, null, null, Phone.DISPLAY_NAME + " ASC"); 
```

奇迹般有效

# slickgrid - 当同一行中的单元格更改时，仍会触发 SlickGrid onSelectedRowsChanged

> ID：15916896
> 
> 赞同：0
> 
> 时间：2013-04-10T04:22:29.033
> 
> 标签：slickgrid

在我的项目中，onSelectedRowsChanged 事件可以在行更改时触发，但也可以在同一行中的活动单元格更改时触发，实际上我们不希望它发生。它在 slickgrid exaple4-model.html 页面中进行了测试，代码在这里：

```
 grid.onSelectedRowsChanged.subscribe(function (e, args) {
      window.console.log("fire selected events...");
  }); 
```

谁能找到一个很好的解决方案来避免这种情况？感谢您的回复或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-27T12:23:28.587

```
//This works for me:

grid.setSelectionModel(new Slick.RowSelectionModel());

//onCellChange event, track current row.

var rowIndex;

grid.onCellChange.subscribe(function (e, args) {
    rowIndex = args.row;
});

//onSelectedRowsChanged event, if row number was changed call some function.

grid.onSelectedRowsChanged.subscribe(function (e, args) {
    if (grid.getSelectedRows([0])[0] !== rowIndex) {
        call function;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T19:40:44.853

这对我有用

```
//Declare Global Variable
var lastSelectedId;

grid.onCellChange.subscribe(function (e, args) {
    var selectedItem = grid.getDataItem(grid.getSelectedRows(0[0]);
    if (selectedItem.id != lastSelectedId){ 
        //Actions go here!
    }
    lastSelectedId = selectedItem.id
}); 
```

# java - 将字符串拆分为两个数组，一个 int 和一个 string

> ID：15916900
> 
> 赞同：-3
> 
> 时间：2013-04-10T04:22:57.823
> 
> 标签：java

我必须编写一个方法来获得`String`类似“Mike 40 Mark 59 Rita 99”并将其拆分为两个数组，一个是`String`数组，另一个是`int`数组。输出应如下：

```
Mike    40,
Mark    59,
Rita    99, 
```

这就是我所拥有的，我很新，被困在这里。请帮助，将不胜感激。

```
public static String[] getNames(){
   String s = JOptionPane.showInputDialog(" Enter one or more names");
   return s.split(" \\s+") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:39:05.193

您可以编写如下逻辑：

```
String input = "Mike 40 Mark 59 Rita 99";
String[] arr =  input.split(" ");

List<String> stringList = new ArrayList<String>();
List<Integer> intList = new ArrayList<Integer>();
for(String element : arr){
    if(elementIsnumber()) // write your logic to check its int or string
     {
        intList.add(parseInt(element)); // write to parse string to int here  
     }
    else{
      stringList.add(element);
     }
}

String[] srtingArray = stringList.toArray(new String[0]);
int[]  intArray =  intList.toArray(new int[0]); 
```

# java - 如何轮换首发球员？

> ID：15916902
> 
> 赞同：-1
> 
> 时间：2013-04-10T04:23:07.467
> 
> 标签：java, logic, poker

我正在设计一款多人扑克游戏。我有 Human 和 Computer 对象，它们都实现了 Player 接口，其中包含扑克玩家所需的方法。我有一个游戏中玩家的 ArrayList，我需要去找每个玩家并检查他们是否想要弃牌或站立。如果每个人都弃牌，那么最后一个过牌的人自动获胜。对于每一手，起始玩家需要轮换。对于第一手，ArrayList 索引 0 中的人将先走。第二手，索引 1 中的人会先走。只是想反弹想法并听取人们对如何实现这些功能的看法。

最初我有做这样的事情的想法；

```
public void poker(ArrayList<Player> players){
   int foldCounter = 0;
   int starter = 0; 

   while (weWantToPlay){
      for (int j = starter; j < players.size(); j++){
         //get the players game plan
         players.get(j).getStand

         //the player is folding
         if (!player.stand()){
            foldCounter++;
            //doStuff
         else{
            //doStuff
         }
     }

     //do more stuff and play poker

     //increment starter so the next hand, the second person starts
     // this obviously will not work, cause we need go to the end of the list, then wrap around
     starter++;

     //check who's folded to see if we automatically have a winner
     if (foldCounter == players.size()-1){
        for (Player element:players){
           if (element.stand()){
              winner = element; 
              break;
           }
        }
     }
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:40:53.893

I don't see any question so I'm not sure what problem you're trying to solve.

If it's the 'starter issue' : maybe, instead of using a starter that you increment, you can just iterate over your list of players from 0 to size-1, once you're done you remove the player at index 0 and add it back at the end of the list, and iterate again and etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:26:16.940

```
 I am not much aware of the game poker but as  per my understanding i understood that after each hand the starting player will be changed (i.e if A,B,C are three players then at first time A will be playing first then second time C will and third time B will be the first to play.

    If this is the requirement then you can keep on rotating the players after each round and put your logic to find the winner.

    The following code can be used for rotation

    import java.util.ArrayList;
    import java.util.Arrays;
    import java.util.Collections;
    import java.util.List;

    public class Main {
      public static void main(String[] args) {
        List numbers = new ArrayList();

        for (int i = 0; i < 5; i++) {
          numbers.add(i);
        }

        System.out.println("Original Array -" + Arrays.toString(numbers.toArray()));

        for(int i=0;i<numbers.size();i++){
            Collections.rotate(numbers, 1);

            System.out.println("After "+ i +" Rotation  -"+ Arrays.toString(numbers.toArray()));

            System.out.println("Element at first position - " +numbers.get(0));
        }
      }
    }

    Output :-

    Original Array -[0, 1, 2, 3, 4]
    After 0 Rotation  -[4, 0, 1, 2, 3]
    Element at first position - 4
    After 1 Rotation  -[3, 4, 0, 1, 2]
    Element at first position - 3
    After 2 Rotation  -[2, 3, 4, 0, 1]
    Element at first position - 2
    After 3 Rotation  -[1, 2, 3, 4, 0]
    Element at first position - 1
    After 4 Rotation  -[0, 1, 2, 3, 4]
    Element at first position - 0

NOTE:If you want to make rotation is some other fashion just change the digit in the following line
Collections.rotate(numbers, 1); 
```

# haskell - 输入“appendString”Haskell 时解析错误

> ID：15916905
> 
> 赞同：0
> 
> 时间：2013-04-10T04:23:29.313
> 
> 标签：haskell

嘿伙计们，这是我遇到的一个奇怪的小错误，我不明白为什么它会给我。

它在输入“appendString”中显示解析错误，但我认为它没有任何问题......

我从 if,then else 语句中调用它，如下所示：

```
createShow currentIndex (Grid {delta = d, middle = (x,y), points = g}) dir counter = 
if currentIndex ==0 || dir == 2
    then (appendString d (x,y) g currentIndex) ++ (createShow currentIndex+1 (Grid {delta = d, middle = (x,y), points = g}) 2 (counter+1))
else if counter == (2*d+1)
    then (appendString d (x,y) g currentIndex) ++ (appendX x)
else if dir == 1
    then (appendString d (x,y) g currentIndex) ++ (createShow currentIndex-1 (Grid {delta = d, middle = (x,y), points = g}) 1 (counter+1)) 
```

其中 createShow 返回一个字符串，appendString 也是如此

appendString 在构造函数中给出错误：

```
 appendString d (x,y) g currentIndex = 
(if currentIndex == y 
    then "y "
 else 
    "  " ) ++ (show currentIndex) ++(rowFunction g x d 0 (x+d) 1)++ "\n" 
```

你知道我哪里做错了吗？

编辑：添加了整个区域

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:53:15.830

Haskell`if`不像`if`Java 或 python 中的其他。最大的区别是它们是*表达式*，不像 java 或 python 中它们是语句。

它们更接近于`condition ? res1 : res2`来自 C.

编写嵌套 if 的正确方法是这样的：

```
if condition
  then foo
  else if condition2
         then bar
         else ... 
```

你会注意到这非常丑陋。

这就是为什么 haskell 有守卫：

```
foo args | condition = foo
         | condition2= bar
         | otherwise = meh 
```

在这里，我们声明一个函数`foo`，如果`condition`为真，那么我们执行`foo`，否则我们继续执行`condition2`并且`otherwise`始终为真。为你

```
createShow currentIndex (Grid {delta = d, middle = (x,y), points = g}) dir counter
  | currentIndex == 0 || dir == 2 = appendString d ....
  | counter == (2 * d + 1)        = appendString d ....
  | dir == 1                      = appendString d .... 
```

这看起来更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:19:27.180

这是一个重构：

```
createShow currentIndex grid@(Grid {delta = d, middle = (x,y), points = g}) dir counter =
    prefix ++ show currentIndex ++ row ++ "\n" ++ nextLine
  where
    prefix = if currentIndex == y then "y " else "  "
    row = rowFunction g x d 0 (x+d) 1

    nextLine | currentIndex == 0 || dir == 2 = createShow (currentIndex+1) grid 2 (counter+1)
    nextLine | counter == (2*d+1)            = appendX x
    nextLine | dir == 1                      = createShow (currentIndex-1) grid 1 (counter+1)

    appendX x = ... 
```

注意事项：

*   使用`where`子句通常可以避免重复参数
*   常见的调用`appendString`已被分​​解，并移至顶部，然后内联，因为它只被调用一次。
*   使用警卫来更清楚地`nextLine`处理级联。`if`
*   守卫和形式`nextLine`表明它不是一个*完整*的功能。当它从末端脱落时会发生什么？
*   用于`grid@`命名模式。`Grid`这样，您在进行递归调用时就不需要“重构”该值。

一个人可以走得更远。注意到`Grid {...}`并且`dir`在整个函数中永远不会改变建议将这些因素排除：

```
createShow currentIndex (Grid {delta = d, middle = (x,y), points = g}) dir counter =
    line currentIndex counter
  where
    line currentIndex counter =
        prefix ++ show currentIndex ++ row ++ "\n" ++ nextLine currentIndex counter

    prefix = if currentIndex == y then "y " else "  "
    row = rowFunction g x d 0 (x+d) 1

    nextLine currentIndex counter
        | currentIndex == 0 || dir == 2 = line (currentIndex+1) (counter+1)
        | counter == (2*d+1)            = appendX x
        | dir == 1                      = line (currentIndex-1) (counter+1)

    appendX x = ... 
```

在这里，`line`它扮演了“携带”随着函数递归而不同的唯一值的角色。将这些论点放在所需内容的末尾将是一种常见的习惯用法`createShow`，因此甚至将它们排除在外：

```
createShow :: Grid -> Int -> Int -> Int -> String
createShow (Grid {delta = d, middle = (x,y), points = g}) dir = line
  where
    line currentIndex counter =
        prefix ++ show currentIndex ++ row ++ "\n" ++ nextLine currentIndex counter

    prefix = if currentIndex == y then "y " else "  "
    row = rowFunction g x d 0 (x+d) 1

    nextLine currentIndex counter
        | currentIndex == 0 || dir == 2 = line (currentIndex+1) (counter+1)
        | counter == (2*d+1)            = appendX x
        | dir == 1                      = line (currentIndex-1) (counter+1)

    appendX x = ... 
```

# android - 联系人图像-Android中的分辨率较低

> ID：15916910
> 
> 赞同：2
> 
> 时间：2013-04-10T04:23:56.007
> 
> 标签：android, image, resolution, android-contacts

我已检索到 android 手机联系人图像并将其存储在 arraylist 中，如下所示。

```
id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
String photoWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " +ContactsContract.Data.MIMETYPE + " = ?";
String[] photoParams = new String[] {id,ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE};
Cursor photoCursor = contentResolver.query(ContactsContract.Data.CONTENT_URI, null, photoWhere, photoParams, null);                     
if(photoCursor!=null && photoCursor.getCount()>0)
{
 while(photoCursor.moveToNext())
    {
        byte[] contactPhoto = photoCursor.getBlob(photoCursor.getColumnIndex(ContactsContract.CommonDataKinds.Photo.PHOTO));                        
        if(contactPhoto!=null)
        {
            mContactImage="data:image/jpeg;base64," + Base64.encodeToString(contactPhoto, Base64.NO_WRAP);                   
            sContactImageArray.add(mContactImage);
        }                                           
   }
}                                 
photoCursor.close(); 
```

然后我将这个 base64 字符串传递给 javascript 并显示为图像。但是图像分辨率很差。这与存储在电话联系人中的图像不同。如何检索具有 100% 质量的联系人图像。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:38:04.523

请参考这些字段。看来，如果联系人头像是从本地照片中设置的，您可能有机会获得高分辨率版本。

```
 /**
     * Reference to the row in the data table holding the photo.  A photo can
     * be referred to either by ID (this field) or by URI (see {@link #PHOTO_THUMBNAIL_URI}
     * and {@link #PHOTO_URI}).
     * If PHOTO_ID is null, consult {@link #PHOTO_URI} or {@link #PHOTO_THUMBNAIL_URI},
     * which is a more generic mechanism for referencing the contact photo, especially for
     * contacts returned by non-local directories (see {@link Directory}).
     *
     * <P>Type: INTEGER REFERENCES data(_id)</P>
     */
    public static final String PHOTO_ID = "photo_id";

    /**
     * Photo file ID of the full-size photo.  If present, this will be used to populate
     * {@link #PHOTO_URI}.  The ID can also be used with
     * {@link ContactsContract.DisplayPhoto#CONTENT_URI} to create a URI to the photo.
     * If this is present, {@link #PHOTO_ID} is also guaranteed to be populated.
     *
     * <P>Type: INTEGER</P>
     */
    public static final String PHOTO_FILE_ID = "photo_file_id";

    /**
     * A URI that can be used to retrieve the contact's full-size photo.
     * If PHOTO_FILE_ID is not null, this will be populated with a URI based off
     * {@link ContactsContract.DisplayPhoto#CONTENT_URI}.  Otherwise, this will
     * be populated with the same value as {@link #PHOTO_THUMBNAIL_URI}.
     * A photo can be referred to either by a URI (this field) or by ID
     * (see {@link #PHOTO_ID}). If either PHOTO_FILE_ID or PHOTO_ID is not null,
     * PHOTO_URI and PHOTO_THUMBNAIL_URI shall not be null (but not necessarily
     * vice versa).  Thus using PHOTO_URI is a more robust method of retrieving
     * contact photos.
     *
     * <P>Type: TEXT</P>
     */
    public static final String PHOTO_URI = "photo_uri";

    /**
     * A URI that can be used to retrieve a thumbnail of the contact's photo.
     * A photo can be referred to either by a URI (this field or {@link #PHOTO_URI})
     * or by ID (see {@link #PHOTO_ID}). If PHOTO_ID is not null, PHOTO_URI and
     * PHOTO_THUMBNAIL_URI shall not be null (but not necessarily vice versa).
     * If the content provider does not differentiate between full-size photos
     * and thumbnail photos, PHOTO_THUMBNAIL_URI and {@link #PHOTO_URI} can contain
     * the same value, but either both shall be null or both not null.
     *
     * <P>Type: TEXT</P>
     */
    public static final String PHOTO_THUMBNAIL_URI = "photo_thumb_uri"; 
```

# ajax - JSON java.sql.SQLException：不支持定位更新

> ID：15916912
> 
> 赞同：0
> 
> 时间：2013-04-10T04:24:01.197
> 
> 标签：ajax, json, hibernate, spring-mvc, java-web-start

我正在尝试在 Java Web 中使用 JSON。通过调用 JSONArray.fromObject() 将 List 转换为 JSONArray，但抛出异常如下：

```
java.sql.SQLException: Positioned Update not supported.
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1075)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:929)
    at com.mysql.jdbc.ResultSetImpl.getCursorName(ResultSetImpl.java:2130)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.commons.beanutils.PropertyUtilsBean.invokeMethod(PropertyUtilsBean.java:2170)
    at org.apache.commons.beanutils.PropertyUtilsBean.getSimpleProperty(PropertyUtilsBean.java:1332)
    at org.apache.commons.beanutils.PropertyUtilsBean.getNestedProperty(PropertyUtilsBean.java:770)
    at org.apache.commons.beanutils.PropertyUtilsBean.getProperty(PropertyUtilsBean.java:846)
    at org.apache.commons.beanutils.PropertyUtils.getProperty(PropertyUtils.java:426)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:918)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
    at net.sf.json.JSONObject._processValue(JSONObject.java:2808)
    at net.sf.json.JSONObject.processValue(JSONObject.java:2874)
    at net.sf.json.JSONObject.setInternal(JSONObject.java:2889)
    at net.sf.json.JSONObject.setValue(JSONObject.java:1577)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:934)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
    at net.sf.json.JSONObject._processValue(JSONObject.java:2808)
    at net.sf.json.JSONObject.processValue(JSONObject.java:2874)
    at net.sf.json.JSONObject.setInternal(JSONObject.java:2889)
    at net.sf.json.JSONObject.setValue(JSONObject.java:1577)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:934)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
    at net.sf.json.JSONObject._processValue(JSONObject.java:2808)
    at net.sf.json.JSONObject.processValue(JSONObject.java:2874)
    at net.sf.json.JSONObject.setInternal(JSONObject.java:2889)
    at net.sf.json.JSONObject.setValue(JSONObject.java:1577)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:934)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
    at net.sf.json.JSONObject._processValue(JSONObject.java:2808)
    at net.sf.json.JSONObject.processValue(JSONObject.java:2874)
    at net.sf.json.JSONObject.setInternal(JSONObject.java:2889)
    at net.sf.json.JSONObject.setValue(JSONObject.java:1577)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:934)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
    at net.sf.json.JSONObject._processValue(JSONObject.java:2808)
    at net.sf.json.JSONObject.processValue(JSONObject.java:2874)
    at net.sf.json.JSONObject.setInternal(JSONObject.java:2889)
    at net.sf.json.JSONObject.setValue(JSONObject.java:1577)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:934)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
    at net.sf.json.JSONObject._processValue(JSONObject.java:2808)
    at net.sf.json.JSONObject.processValue(JSONObject.java:2874)
    at net.sf.json.JSONObject.setInternal(JSONObject.java:2889)
    at net.sf.json.JSONObject.setValue(JSONObject.java:1577)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:934)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
    at net.sf.json.JSONObject._processValue(JSONObject.java:2808)
    at net.sf.json.JSONObject.processValue(JSONObject.java:2874)
    at net.sf.json.JSONObject.setInternal(JSONObject.java:2889)
    at net.sf.json.JSONObject.setValue(JSONObject.java:1577)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:934)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
    at net.sf.json.JSONObject._processValue(JSONObject.java:2808)
    at net.sf.json.JSONObject.processValue(JSONObject.java:2874)
    at net.sf.json.JSONObject.setInternal(JSONObject.java:2889)
    at net.sf.json.JSONObject.setValue(JSONObject.java:1577)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:934)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:168)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:265)
    at net.sf.json.JSONArray._processValue(JSONArray.java:2514)
    at net.sf.json.JSONArray.processValue(JSONArray.java:2539)
    at net.sf.json.JSONArray.addValue(JSONArray.java:2526)
    at net.sf.json.JSONArray._fromCollection(JSONArray.java:1057)
    at net.sf.json.JSONArray.fromObject(JSONArray.java:123)
    at org.vclub.model.json.Page2Json.getJsonFromList(Page2Json.java:11)
    at org.vclub.controller.TopicController.loadMoreTopic(TopicController.java:91)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:185)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:502)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:465)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:863)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:792)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:851)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:767)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache
.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619) 
```

其实按照网上说的，有两种解决方案，修改struts.xml或者删除DAO字段的getter方法。我没有使用struts，所以我选择删除服务中DAO字段的getter方法。但它仍然无法正常工作。我在这里寻求帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T07:55:03.957

这似乎是一个**Hibernate 延迟加载**问题。

如果您要格式化的对象是某种休眠模型类，并将这些类配置为延迟加载，则会发生此问题。

**原因**是hibernate使用cglib动态生成这个模型类（使用子类方式生成类），这些子类包含“hibernateLazyInitializer”等新属性。然后 JSONObject 也会尝试序列化这些新属性。然后发生异常。

您可以尝试添加以下代码来解决此问题：

```
JsonConfig cfg = new JsonConfig();
cfg.setExcludes(new String[]{"handler","hibernateLazyInitializer"});
JSONObject json = JSONObject.fromObject(obj,cfg); 
```

# iphone - 带有 UIBarButon 背景图像的 UITabBarController 和 UITabbar

> ID：15916921
> 
> 赞同：1
> 
> 时间：2013-04-10T04:24:37.493
> 
> 标签：iphone, image, uitabbarcontroller, uitabbar

您好，请原谅我提出了非常常见的问题，我在应用程序委托中创建了 uitoolbarcontroller，并为视图中的标签栏分配了标题，并加载了视图控制器。

代码在这里：

```
 [[self.tabBarController.tabBar.items objectAtIndex:0] setTitle:@"Exercise Dict."]; 
```

请告诉我如何将图像设置为标题的背景。

我以相同的方法为背景图像添加了这个：

```
 [[self.tabBarController.tabBar.items objectAtIndex:0] setBackgroundImage:[UIImage imageNamed:@"Beginner-1"]]; 
```

但它给出了一个错误='NSInvalidArgumentException'，原因：'-[UITabBarItem setBackgroundImage:]：无法识别的选择器发送到实例 0xa25e9a0'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:28:35.373

尝试这个：

```
self.tabBarController.tabBarItem.image=[UIImage imageNamed:@"yourimage.png"]; 
```

# javascript - 遍历每个锚点并替换内部 HTML，如果它是具有特定东西的东西 - 其他

> ID：15916930
> 
> 赞同：0
> 
> 时间：2013-04-10T04:25:48.583
> 
> 标签：javascript, jquery

我正在尝试遍历所有作为类导航（.nav）后代的锚点并检查它们的内容。如果是任何一种情况，则将其内容替换为特定且相应的 unicode。

为什么这不起作用，有没有比我尝试过的更好的方法？

```
$(document).ready(function(){
    var navigationLinks = $('.nav a');
    for(var i=0; i < navigationLinks.length; i++){
    var thisLink = navigationLinks[i];
    switch(thisLink.html()){
        case "About":
            thisLink.replace(/About/g,'&#xe00f;');

        case "Work":
            thisLink.replace(/Work/g,'&#xe010');

        case "CV":
            thisLink.replace(/CV/g,'&#xe00c');

        case "Resume":
            thisLink.replace(/Resume/g,'&#xe00d;');

        case "down":
            thisLink.replace(/down/g,'&#xe00d;');

        case "Mail":
            thisLink.replace(/Mail/g,'&#xe011;');

        case "Dribbble":
            thisLink.replace(/Dribbble/g,'&#xe015;');

        case "GooglePlus":
            thisLink.replace(/GooglePlus/g,'&#xe012;');

        case "Facebook":
            thisLink.replace(/Facebook/g,'&#xe013;');

        case "Twitter":
            thisLink.replace(/Twitter/g,'&#xe014');

        default:
            thisLink.replace(thisLink.html(),thisLink.html());
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:31:48.873

使用这种方式：

```
$(document).ready(function(){
    var navigationLinks = $('.nav a');
    navigationLinks.each(function() {
    var thisLink = $(this);
    switch(thisLink.html()){
        // Your code with thisLink.html();
    }
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:34:48.513

您的代码绰绰有余..只需`thisLink.html()`像这样用于替换或修改

```
var thisLink = navigationLinks[i].html();
    switch(thisLink){
//
//
} 
```

# ruby-on-rails - Ruby on Rails 要求放置 require 和 enable？

> ID：15916931
> 
> 赞同：0
> 
> 时间：2013-04-10T04:25:48.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, instagram

我不确定在哪里放置要求和启用？

我正在尝试使用 instagram api，但它告诉我放

```
require "sinatra"
require "instagram"

enable :sessions 
```

在示例应用程序中：[https ://github.com/Instagram/instagram-ruby-gem](https://github.com/Instagram/instagram-ruby-gem)

但我是新来的学习rails，所以我只是想弄清楚一些点，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:15:08.330

那是一个sintatra应用程序，而不是一个rails应用程序，对于rails，我认为你需要做的就是像这样将它添加到你的gemfile中。

```
gem 'instagram' 
```

如果您仍然无法使用它，请尝试添加：require，尽管我认为您不应该这样做。

```
gem 'instagram', :require => 'instagram' 
```

# c# - 通过for循环碰撞

> ID：15916941
> 
> 赞同：-4
> 
> 时间：2013-04-10T04:26:58.147
> 
> 标签：c#, xna

```
 for (int x = bulletBounds.Count - 1; x > -1; x-- )
        {
            for (int y = alienPosition.Count - 1; y > -1; y--)
            {
                if (bulletBounds[x].Intersects(alienBounds[y]))
                {
                    alienPosition.RemoveAt(y);
                    bulletBounds.RemoveAt(x);
                    hit++;
                }
            }
        } 
```

我试图用这段代码做的是遍历两个对象列表，看看它们是否发生冲突。我在另一个问题中看到，这样做的唯一方法是向后遍历列表，所以我这样做了。现在的问题是，当一颗子弹与外星人相撞时，列表中在它之前的每个外星人也会被删除。因此，如果我在屏幕上有 6 个外星人，而我点击了最左边的那个，则它右侧的每个外星人都会被删除！我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:32:41.643

移除外星人和子弹后，您需要打破内循环。

```
 if (bulletBounds[x].Intersects(alienBounds[y]))
 {
     alienPosition.RemoveAt(y);
     alienBounds.RemoveAt(y);
     bulletBounds.RemoveAt(x);
     hit++;
     break;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:02:39.440

添加`break;`到您的 if 循环中。顺便问一下，alienBounds 和 alienPosition 有什么区别？但是，您正在循环通过 alienPosition，访问 alienBounds 中的数据。在下面的示例中，我只是循环通过 alienBounds。如果我误解了什么，请告诉我，我会相应地更新我的答案。

```
foreach (var bullet in bulletBounds)
{
    foreach (var alien in alienBounds)
    {
        if (bullet.Intersects(alien))
        {
            bulletBounds.Remove(bullet);
            alienBounds.Remove(alien);
            break;
        }
    }
} 
```

希望这可以帮助！

# redirect - 网站性能：rel=canonical vs redirect 301

> ID：15916949
> 
> 赞同：1
> 
> 时间：2013-04-10T04:28:10.037
> 
> 标签：redirect, seo, canonical-link, canonicalization

从[Matt Cutts 博客上的这个页面](http://www.mattcutts.com/blog/rel-canonical-html-head/)，他说`rel=canonical`如果你不能使用 301 重定向，那应该是次要选择。使用 301 重定向而不是使用 301 重定向是否存在任何性能问题`rel=canonical`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:07:39.153

根据我的经验，性能差异可以忽略不计。301 重定向的实施涉及更多步骤，因此`rel=canonical`可能会执行得稍好一些。额外的步骤通常执行得非常快，并且不会增加任何明显的延迟或对服务器资源造成压力。

## 相对=规范

1.  用户请求 /non-canonical.html
2.  服务器查找规范 URL：/canonical.html
3.  服务器构建一个包含规范标签的页面并将其发送给用户

## 301重定向

1.  用户请求 /non-canonical.html
2.  服务器查找规范 URL：/canonical.html
3.  服务器向规范 URL 发出 301 重定向。
4.  用户的浏览器自动对 /canonical.html 发出第二次请求
5.  服务器发现此请求是针对规范 URL 的。
6.  服务器构建一个页面并将其发送给用户。

# java - 从存储为字符串的 xml 文件中检索非根元素数组

> ID：15916952
> 
> 赞同：0
> 
> 时间：2013-04-10T04:28:25.670
> 
> 标签：java, parsing, xstream

我有一个场景，其中我有以下 xml 和类

XML：

```
<packages>
<package>
<name>class1</name>
      <classes>300</classes>
      <functions>21</functions>
      <ncss>283</ncss>
      <javadocs>20</javadocs>
      <javadoc_lines>111</javadoc_lines>
      <single_comment_lines>11</single_comment_lines>
      <multi_comment_lines>221</multi_comment_lines>
</package>
</packages> 
```

Java 类：

```
Class Package {

//all variables and setters getters
}

class Packages {
public  ArrayList<Package> x;
//add and remove methods for x
} 
```

在 mainClass 我有：

```
 BufferedReader br = new BufferedReader(new FileReader(new                                                    
File("C:\\old_code_complexity.xml")));
    String line;
    StringBuilder sb = new StringBuilder();

    while((line=br.readLine())!= null){
        sb.append(line.trim());
    }

    String x = sb.toString();

    XStream xstream = new XStream();
    xstream.alias("package", Package.class);
    xstream.alias("packages", Packages.class);
    xstream.addImplicitCollection(Packages.class, "x");

    Packages pList = (Packages)xstream.fromXML(x);
    Package pack = (Package) xstream.fromXML(x);

    System.out.println(xstream.toXML(pack)); 
```

println 之前的行每次都会出错

```
Exception in thread "main" java.lang.ClassCastException: dummyCompare.input.Packages     cannot be cast to dummyCompare.input.Package
    at dummyCompare.Logic.mainClass.main(mainClass.java:41) 
```

如何管理此强制转换操作，以便可以检索可以在代码中操作的对象数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:36:07.483

你为什么要把你的对象投射`Packages`到一个`Package`对象上？只需创建一个**吸气**剂`Packages`：

```
public  ArrayList<Package> getPackageList() {
  return x;
} 
```

而不是铸造它：

```
Packages pList = (Packages)xstream.fromXML(x);
ArrayList<Package> pack = pList.getPackageList(); 
```

# android - Android中的sqlite数据库表会自动生成KEY_ID吗？它被称为“KEY_ID”吗？

> ID：15916954
> 
> 赞同：2
> 
> 时间：2013-04-10T04:28:26.950
> 
> 标签：android, database, sqlite

我有一个在 android 应用程序中有一个表的 sqlite 数据库。当它使用如下所示的语句创建时，有两个列，KEY_CHECKBOX_STATUS 和 KEY_CHECKBOX_LABEL。“ID”是创建的主键。

如果我没有像下面的语句那样在创建时显式创建主键，它会自动创建吗？名字是“KEY_ID”吗？

```
 //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
     "CREATE_TABLE IF NOT EXISTS " + MYDATABASE_TABLE + " (" + "ID INTEGER PRIMARY KEY AUTOINCREMENT, " +  
     KEY_CHECKBOX_STATUS + " BIT, " + KEY_CHECKBOX_LABEL + " TEXT NOT NULL);"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:34:32.520

Sqlite 将创建一个`"rowid"`并且它是唯一的。您可以使用`"rowid" or "oid" or "_rowid_"`. 例如 SELECT rowid as id ...
您可以在此处阅读更多信息[http://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)。请注意，rowid 不区分大小写。

# c++ - 错误 C2248: '数组 ::Array' : 无法访问在类 'Array 中声明的私有成员 ' 当某种类型的变量传递给 std::async

> ID：15916957
> 
> 赞同：0
> 
> 时间：2013-04-10T04:28:43.170
> 
> 标签：c++

我对 C++ 没有经验，我正在尝试修改一些 C++ 代码（特别是[paq8l](http://cs.fit.edu/~mmahoney/compression/#paq)的代码）。我正在尝试将其中一种数据类型作为参数传递给`std::async`.

```
int testTest(SmallStationaryContextMap &sscm)
{
    return 1;
}

int someOtherMethod()
{
    SmallStationaryContextMap sscm(0x20000);
    testTest(sscm); // fine
    auto future = std::async(testTest, sscm); // compiler error
} 
```

我希望我只是错过了一些简单的东西，但这给了我标题中的错误。`error C2248: 'Array<T>::Array' : cannot access private member declared in class 'Array<T>'`

SmallStationaryContextMap：

```
class SmallStationaryContextMap {
    Array<U16> t;
    int cxt;
    U16 *cp;
public:
    SmallStationaryContextMap(int m): t(m/2), cxt(0) {
        assert((m/2&m/2-1)==0); // power of 2?
        for (int i=0; i<t.size(); ++i)
        t[i]=32768;
        cp=&t[0];
    }
    void set(U32 cx) {
        cxt=cx*256&t.size()-256;
    }
    void mix(Mixer& m, int rate=7) {
        *cp += (y<<16)-*cp+(1<<rate-1) >> rate;
        cp=&t[cxt+c0];
        m.add(stretch(*cp>>4));
    }
}; 
```

和数组：

```
template <class T, int ALIGN=0> class Array {
private:
    int n;     // user size
    int reserved;  // actual size
    char *ptr; // allocated memory, zeroed
    T* data;   // start of n elements of aligned data
    void create(int i);  // create with size i
public:
    explicit Array(int i=0) {create(i);}
    ~Array();
    T& operator[](int i) {
        return data[i];
    }
    const T& operator[](int i) const {
        return data[i];
    }
    int size() const {return n;}
    void resize(int i);  // change size to i
    void pop_back() {if (n>0) --n;}  // decrement size
    void push_back(const T& x);  // increment size, append x
private:
    Array(const Array&);  // no copy or assignment
    Array& operator=(const Array&);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:41:34.100

The problem is `Array`s copy ctor is private: `Array(const Array&); // no copy or assignment` and `std::async` is trying to make a copy of `sscm` which contains an `Array` as a member. Wrap it in a `std::reference_wrapper`:

```
auto future = std::async(testTest, std::ref(sscm)); 
```

# java - SimpleDateFormat 在解析“YYYY-MM-dd HH:mm”时产生错误的日 期时间

> ID：15916958
> 
> 赞同：20
> 
> 时间：2013-04-10T04:28:49.623
> 
> 标签：java, datetime, simpledateformat, datetime-parsing

我正在尝试将`String`( `YYYY-MM-dd HH:mm`) 解析为`Date`，但是错误的日期比预期的要多。

代码：

```
Date newDate = null;
String dateTime = "2013-03-18 08:30";
SimpleDateFormat df = new SimpleDateFormat("YYYY-MM-dd HH:mm", Locale.ENGLISH);
df.setLenient(false);
try {
    newDate = df.parse(dateTime);
} catch (ParseException e) {
    throw new InvalidInputException("Invalid date input.");
} 
```

产生：

> 2012 年 12 月 30 日星期日 08:30:00 EST （错误）

我尝试关闭 Lenient，但没有运气。

**更新**

感谢 Sudhanshu 的回答，它帮助我解决了 Java 转换。当我将上述代码返回的日期输入数据库时​​，我得到了正确的日期，但时间总是`00:00`。

```
ps.setDate(3, new java.sql.Date(app.getDate().getTime())); 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-10T04:30:18.777

YYYY 应该是 yyyy-

```
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm", Locale.ENGLISH); 
```

请在此处查看 SimpleDateFormat 的文档
Java 6：[http](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)
://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html Java 7：[http ://docs.oracle.com/javase/ 7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T04:54:25.463

使用小写字母 Y，而不是大写字母。即 yyyy 不是 YYYY

在此处查看评论：[Java Simple Date Format](https://stackoverflow.com/questions/15887612/java-simple-date-format)和此处引用的其他答案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-10T05:30:58.227

有两个问题。

1.  格式字符串应该是`"yyyy-MM-dd HH:mm"`.
2.  存储时间的数据类型是`TimeStamp`而不是`Date`在数据库中。

更正这两件事，您将能够随时间存储和检索日期。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-21T19:37:10.510

这是现代答案。其他答案在 2013 年编写时是很好的答案。在那之后的一年，现代日期和时间 API 出现，以替代旧的类`Date`和`SimpleDateFormat`朋友。恕我直言，您现在应该使用新课程。他们对程序员更友好。

```
 LocalDateTime newDate = null;
    String dateTime = "2013-03-18 08:30";
    DateTimeFormatter dtf = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm", Locale.ENGLISH);
    try {
        newDate = LocalDateTime.parse(dateTime, dtf);
    } catch (DateTimeParseException e) {
        throw new InvalidInputException("Invalid date input.");
    } 
```

除了类名之外，它与旧代码没有什么不同。与其他示例会有差异，通常现代类将提供更清晰的代码和更少的错误机会。

为了稍微展示一下差异，让我们尝试一下您在其中使用大写的格式模式字符串`YYYY`：

```
 DateTimeFormatter dtf = DateTimeFormatter.ofPattern("YYYY-MM-dd HH:mm", Locale.ENGLISH); 
```

现在代码抛出一个`java.time.format.DateTimeParseException: Text '2013-03-18 08:30' could not be parsed: Unable to obtain LocalDateTime from TemporalAccessor: {MonthOfYear=3, DayOfMonth=18, WeekBasedYear[WeekFields[SUNDAY,1]]=2013},ISO resolved to 08:30 of type java.time.format.Parsed`. 很长，我知道。需要注意的是，它提到的字段中没有年份，只有一个 WeekBasedYear。这是不一样的; 并且您现在可能已经知道这正是因为大写`Y`是基于周的年份（仅适用于周数），您应该使用小写`y`的年份。我认为这种行为比旧课程更有帮助：他们给你一个错误的结果，假装一切都很好，让你完全不知道哪里出了问题。

接下来，我了解您要将日期时间存储到数据库中。在过去，您会转换为某种合适的`java.sql`类型。不再需要。我相信使用 JDBC 4.2 驱动程序你可以做到：

```
 ps.setObject(3, newDate); 
```

不过，我还没有用数据库对此进行过测试。请注意，您使用`setObject()`而不是`setDate()`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-22T09:42:42.343

Although this was not the case here, beware that `SimpleDateFormat` is not thread-safe. So when used in a multi-threaded environment, race conditions can happen and cause wrong parsing results. Solution is to either

*   create a new instance on each usage (might decrease performance)
*   instantiate once but use it in a `synchronized` block
*   instantiate once but use `ThreadLocal`

Example with `ThreadLocal`:

```
class MyClass {
  private ThreadLocal<SimpleDateFormat> threadLocalFormat = 
    ThreadLocal.withInitial(() -> new SimpleDateFormat("yyyy-MM-dd HH:mm", Locale.ENGLISH));

  public void foo(String bar) {
    return threadLocalFormat.get().parse(bar);
  }
} 
```

# linux - 是否有等效于 set wildignore 的方法来忽略具有不可打印字符的文件？

> ID：15916963
> 
> 赞同：0
> 
> 时间：2013-04-10T04:29:10.857
> 
> 标签：linux, vim

目前我忽略了某些文件扩展名，但我认为如果我可以让 vim 在执行制表符完成时忽略二进制文件（我们可以将二进制定义为具有不可打印字符的文件），那将非常有用。

我在 Linux 而不是 windows 上运行，所以只匹配 .exe 是没有用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:45:15.977

不，没有这样的设置，我也看不出它有什么用处。特别是在 Unix 上，许多设置了可执行位的文件实际上是脚本（Shell、Perl、Python 等），非常适合用 Vim 进行编辑。

对于 custom `:command`，您可以自己构建这样的完成（`-complete=custom`参数，`executable()`用于测试），但要将其应用于内置命令，您必须修补 Vim 的源代码。

# python - Python数学从两个列表索引按索引添加数字

> ID：15916966
> 
> 赞同：0
> 
> 时间：2013-04-10T04:29:16.313
> 
> 标签：python, list, math

我仍然是 Python 的初学者。我正在尝试实现一种涉及向量和向量之间的归一化差异的算法。方程为

```
Sr = 1 - ( || r1 - r2|| / || r1 + r2|| )

A given example gives r1 and r2 as shown below. 

r1 = {1 2 3 4 5 6 0 3 3 0 0 0 1 1}
r2 = {4 0 3 0 0 0 1 2 3 5 6 7 8 9}

Sr = 0.2023 
```

公式的分解看起来像这样。

```
r1-r2 is the subtracting the item1 in r1 to the item1 in r2, subtracting the item2 in r1 to item2 in r2,..., until item-n in r1 and r2.

Let's say M is the total sum of (r1-r2)
M = sum(r1-r2) = sum[(1-4) + (2-0) +...+(1-9)]

||r1 - r2|| = math.sqrt(x)(math.(M, 2)) 
```

基本上我可以做所有其他与数学相关的函数，但是我在找到一种有效的方法来计算 M 时遇到问题，我需要从两个列表索引中逐个索引添加/减去数字。任何建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:49:32.290

要完成`sum`数学问题的一部分，您可以执行以下操作：

```
sum(map(operator.__sub__, r1, r2)) 
```

`r1`这将在元素 or和之间执行减法运算`r2`，然后对结果列表求和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:57:14.793

[`numpy`](http://docs.scipy.org/doc/numpy/)可以简化您的生活：

```
>>> import numpy as np
>>> r1 = np.array([1, 2, 3, 4, 5, 6, 0, 3, 3, 0, 0, 0, 1, 1])
>>> r2 = np.array([4, 0, 3, 0, 0, 0, 1, 2, 3, 5, 6, 7, 8, 9])
>>> 1 - np.linalg.norm(r1-r2) / np.linalg.norm(r1+r2)
0.20227596478253429 
```

您的问题没有明确说明您需要哪种规范。但答案似乎是正确的，这意味着您需要常规的 2 范数。另见[`numpy.linalg.norm`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:35:19.837

这是你想要的吗？

```
>>> r1 = [1, 2, 3 ,4 ,5 ,6 ,0 ,3 ,3 ,0 ,0 ,0 ,1 ,1]
>>> r2 = [4 ,0 ,3 ,0 ,0 ,0 ,1 ,2 ,3 ,5, 6 ,7 ,8 ,9]
>>> [r1[i]-r2[i] for i in range(0,len(r1))]
[-3, 2, 0, 4, 5, 6, -1, 1, 0, -5, -6, -7, -7, -8]
>>> [r1[i]+r2[i] for i in range(0,len(r1))]
[5, 2, 6, 4, 5, 6, 1, 5, 6, 5, 6, 7, 9, 10] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T04:38:39.150

```
>>> r1 = [1, 2, 3, 4, 5, 6, 0, 3, 3, 0, 0, 0, 1, 1]
>>> r2 = [4, 0, 3, 0, 0, 0, 1, 2, 3, 5, 6, 7, 8, 9]
>>> sum([x-y for x, y in zip(r1, r2)])
-19 
```

解释：

*   zip 以形式返回一个元组列表`[(r1[0], r2[0]),...,(r1[n], r2[n])]`
*   列表推导将执行`r1[n]-r2[n]`并返回结果列表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T04:40:18.103

对于总和只是做

```
map(sum, zip(r1, r2)) 
```

为了不同，你可以做

```
map(lambda t: t[0] - t[1] ,zip(r1, r2)) 
```

where`r1`和`r2`是列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T05:24:29.213

感谢所有回答的人。如果我可以投票给你们所有人，我会的。我决定选择 Reinier Torenbeek 的答案，因为它在一个简单的函数中完成了我想要为这个方程做的所有事情。

这就是我在这部分中使用方程式的方式。

```
def wordOrderSim(list1, list2):
    r1 = np.array(list1)
    r2 = np.array(list2)
    Sr = 1 - np.linalg.norm(r1-r2) / np.linalg.norm(r1+r2)
    return Sr

r1 = [1, 2, 3 ,4 ,5 ,6 ,0 ,3 ,3 ,0 ,0 ,0 ,1 ,1]
r2 = [4 ,0 ,3 ,0 ,0 ,0 ,1 ,2 ,3 ,5, 6 ,7 ,8 ,9]

print wordOrderSim(r1, r2) 
```

感谢 Serdalis、Sushant Gupta、Sheng 和 Paulo Scardine 的回答，因为它确实回答了我的问题，但我忘了提到，在 r1 和 r2 中添加/减去数字之后，每个数字都必须是其中两个的幂将所有数字加在一起之前的原始数字。抱歉，如果没有正确的数学符号，我很难解释它们。

```
r1-r2 = [-3, 2, 0, 4, 5, 6, -1, 1, 0, -5, -6, -7, -7, -8]
sum(r1-r2) = [(-3^2) + (2^2) + (0^2) + (4^2) + (5^2) + (6^2) + (-1^2) + (1^2) + (0^2) + (-5^2 + (-6^2) + (-7^2) + (-7^2) + (-8^2)] 
```

# c# - 如何使用 UIAutomation 获取鼠标和键盘的事件

> ID：15916967
> 
> 赞同：3
> 
> 时间：2013-04-10T04:29:21.697
> 
> 标签：c#, user-interface

我尝试使用 C# UIAutomation 库创建测试工具应用程序。示例代码是：

```
Automation.AddAutomationFocusChangedEventHandler(
   new AutomationFocusChangedEventHandler(OnAutomationFocusChanged)); 
```

当我检测到焦点改变时，我需要获取事件类型（左/右键单击或按下键盘）。是否有可能在方法 OnAutomationFocusChanged() 中找到这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:42:00.367

不，这在 UI 自动化中是不可能的。像鼠标和键盘事件这样的低级交互不是 API 的一部分。API 是围绕更高级别的交互设计`Invoke`的`InvokePattern`，`Select`例如`SelectionItemPattern`. 这些交互有一些事件，但没有检测按键或鼠标移动/单击/拖动的事件。

我知道获取这些事件的唯一方法是通过 windows api 中的全局挂钩。这个[项目](http://globalmousekeyhook.codeplex.com/)似乎是一个不错的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T04:37:50.360

**参考以下代码：**

```
public static void RightClick(this AutomationElement element)
    {
     var ev = new MouseButtonEventArgs(Mouse.PrimaryDevice, 0, MouseButton.Right);
     ev.RoutedEvent = Mouse.MouseDownEvent;
     this.OnMouseDown(ev);
    } 
```

**另请参阅：**

[用c#移动鼠标](https://stackoverflow.com/questions/8185916/move-mouse-with-c-sharp)

希望它有帮助。

# asp.net - 记录浏览器设置，在客户端浏览器上呈现 html。

> ID：15916971
> 
> 赞同：0
> 
> 时间：2013-04-10T04:29:55.577
> 
> 标签：asp.net, logging, elmah, client-side-scripting

我们会定期收到有关不同客户端错误的报告，尤其是我们的用户在使用我们的网站时看到“此页面包含安全和非安全项目”警告。我们知道我们网站中的各种屏幕都包含所有安全元素。如果客户端收到“此页面包含安全和非安全项目”警告，有没有办法记录 a. 在客户端浏览器上呈现的 html。湾。客户端可能具有的浏览器设置。例如：在 Internet Explorer 中，工具 => Internet 选项 => 安全选项卡 => “自定义级别”按钮 => 显示混合内容选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:50:09.273

我认为没有办法跟踪 IE 警报，但如此处“ [MVC 与 HTTPS IE7 捆绑](https://stackoverflow.com/questions/12357106/mvc-bundling-with-https-ie7)”所述，您的页面中可能有一些内容或脚本来自**HTTP**请求（不安全），而其他一些内容或脚本来自**HTTPS**（安全的）。

您是否可能提供来自 HTTPS 的页面，并且您有一些来自 HTTP 的脚本？

# asp.net - 通用 Web.Config 重写以删除查询字符串并添加 url seo slug

> ID：15916972
> 
> 赞同：1
> 
> 时间：2013-04-10T04:29:57.930
> 
> 标签：asp.net, url-rewriting, seo, web-config, url-rewrite-module

我正在尝试创建以下 URL 重写。

```
<rule name="Imported Rule 3">
    <match url="^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)" ignoreCase="true" />
    <action type="Rewrite" url="/{R:0}/{R:1}.aspx?p={R:2}&title={R:3}" appendQueryString="true" />                  
</rule> 
```

我希望以下网址重写为以下内容。

```
/Catalog/Product/1/Title-Description 
```

到

```
/Catalog/Product.aspx?pid=1&title=Title-Description 
```

和

```
/Events/Detail/1/Today
/Events/Detail.aspx?pid=1&title=Title-Description 
```

基本上我希望写作是通用的并适用于多种场景。每当有一个带有 4 个斜杠的 url 时，我希望重写规则将其拾取并将其转换为 url。

所以事件的网址

1/1/1/1 将是有效的。

这将转换为

/1/1.aspx?pid=1&title=1

只是给你一个例子。

我不想为每个场景编写单独的重写。

但是，我编写的上述重写一直在服务器上引发错误，我似乎无法找出我的语法有什么问题。服务器出现了一个通用的 500 错误，所以我无法缩小范围。

我相当确定问题出在操作标签上，

我把它写成

```
<action type="Rewrite" url="/{R:0}/{R:1}.aspx?p={R:2}&title={R:3}" appendQueryString="true" /> 
```

和

```
<action type="Rewrite" url="/{R:1}/{R:2}.aspx?p={R:3}&title={R:4}" appendQueryString="true" /> 
```

这两个选项都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:29:13.967

我认为有几个问题。第一个是使用 {R:0} 您已经发现自己。`{R:0}`匹配整个 URL，如`{R:1}`,`{R:2}`等。匹配片段。因此，在这种情况下，您必须使用`{R:1}`,`{R:2}`等。

另一个问题是您可能错误地使用`?p={R:3}`而不是`?pid={R:3}`. 最后，也可能是 500 错误的原因是您没有正确地 XML 编码`&title`which should be中的 & 符号`&amp;title`。

我认为以下应该有效：

```
<rule name="Imported Rule 3" stopProcessing="true">
    <match url="^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)" />
    <action type="Rewrite" url="/{R:1}/{R:2}.aspx?pid={R:3}&amp;title={R:4}" appendQueryString="false" />
</rule> 
```

# extjs - extjs 3.4 中 TabPanel 中的标题折叠

> ID：15916978
> 
> 赞同：2
> 
> 时间：2013-04-10T04:30:51.963
> 
> 标签：extjs, extjs3, tabpanel

在 ExtJS 3.4 中，用于实现`collapsible:true`and`titleCollapse:true`的 TabPanel 启用 TabPanel 的折叠和展开。但是，即使单击选项卡也会导致折叠/展开。

如何避免这种情况？

```
var tabs2 = new Ext.TabPanel({
    collapsible:true,
    titleCollapse:true,
    renderTo: document.body,
    activeTab: 0,
    width:600,
    height:250,
    plain:true,
    defaults:{autoScroll: true},
    items:[{
            title: 'Normal Tab',
            html: "My content was added during construction."
        },{
            title: 'Ajax Tab 1',
            autoLoad:'ajax1.htm'
        },{
            title: 'Ajax Tab 2',
            autoLoad: {url: 'ajax2.htm', params: 'foo=bar&wtf=1'}
        },{
            title: 'Event Tab',
            listeners: {activate: handleActivate},
            html: "I am tab 4's content. I also have an event listener attached."
        },{
            title: 'Disabled Tab',
            disabled:true,
            html: "Can't see me cause I'm disabled"
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:59:58.933

删除 `titleCollapse:true,`财产。选项卡标题呈现在标题元素内，当您打开`titleCollapse`属性时，您的按钮也可以用作展开/折叠按钮。

# string - If 语句匹配包含双引号的字符串

> ID：15916981
> 
> 赞同：3
> 
> 时间：2013-04-10T04:31:40.077
> 
> 标签：string, bash, if-statement, grep, double-quotes

我的 bash 脚本中的 if 语句存在问题。目标：我需要检查 的值`clustered`，但由于它不是唯一的名称，我决定尝试匹配整个字符串。例如，要在`clustered`此处查找是否为真/假，`if`查找整个“相邻”字符串。

问题：虽然`if`下面的语句适用于某些字符串，但它实际上不适用于下面的值。我怀疑这是因为`"false"`.

是否有可能改变它`if`，所以它会起作用（即接受额外的双引号）？

我的狂欢：

```
if grep -Fxq "<cache clustered="false" " confg.xml
then
    echo "Correct value"
    # code if found
else
    echo "Incorrect value"
    # code if not found
fi 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:41:10.380

问题是您在要查找的字符串以及字符串本身中使用双引号。Bash 通过将每个双引号与下一个双引号匹配来解释引号，而不是最后一个。如果引号是括号，那么`if grep -Fxq (<cache clustered=)false( ) confg.xml`当您真正想要的是`if grep -Fxq (<cache clustered=(false) ) confg.xml`. 换句话说，内部双引号不会被解释为文字双引号。如果您希望它们按字面意思解释，请将您的 grep 表达式用单引号而不是双引号括起来：

```
if grep -Fxq '<cache clustered="false" ' confg.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:04:13.290

试过这个，似乎工作正常

```
bash$ cat log; if grep -Fxq "<cache clustered=\"false\"" log ; then echo "got it"; else echo "missed"; fi
<cache clustered="false"
got it 
```

内部双引号需要被视为文字。所以他们前面的反斜杠通知 bash 他们不是字符串的开始或结束

# javascript - 每次刷新浏览器时都会打开onload弹出窗口

> ID：15916983
> 
> 赞同：-2
> 
> 时间：2013-04-10T04:31:45.557
> 
> 标签：javascript

```
$(document).ready(function() {  
        var id = '#dialog';

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow",0.8);  

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top',  winH/2-$(id).height()/2);
        $(id).css('left', winW/2-$(id).width()/2);

        //transition effect
        $(id).fadeIn(2000);     

    //if close button is clicked
    $('.window .close').click(function (e) {
        //Cancel the link behavior
        e.preventDefault();

        $('#mask').hide();
        $('.window').hide();
    });     

    //if mask is clicked
    $('#mask').click(function () {
        $(this).hide();
        $('.window').hide();
    });     

}); 
```

我将此代码用于加载弹出框，但是当我每次刷新浏览器时都显示此弹出框而不是 1 次，请告诉我正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:34:16.087

您需要使用某种 cookie 来设置第一次。[**因此，在添加jQuery.cookie**](https://github.com/carhartl/jquery-cookie)插件之后，将所有内容包装在一个函数中，`showPopup();`并以这种方式调用代码。[](https://github.com/carhartl/jquery-cookie)

 **```
$(document).ready(function() {
  if (!$.cookie('showPopup')) {
    showPopup();
    $.cookie('showPopup', 'yes')
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:45:32.060

使用此事件设置任何变量，并在您的代码中使用它。

```
window.onunload = function(){
alert("unload event detected!"); 
```

}**

# android - mpeg-ts 播放器的示例 ts 文件

> ID：15916994
> 
> 赞同：-2
> 
> 时间：2013-04-10T04:32:50.107
> 
> 标签：android, media-player, gstreamer, transport-stream

我在 Eclipse 上配置了 gstreamer 并构建了一个接受传输流文件的媒体播放器。现在进行测试，我想下载一些 ts 文件，但我没有得到任何文件。我已经尝试了链接[http://www.w6rz.net/](http://www.w6rz.net/)但帧速率非常高，因此音频和视频没有同步。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:27:50.203

如果您正在寻找 TS 文件：您可以查看以下链接：

[https://github.com/tsduck/tsduck](https://github.com/tsduck/tsduck)

[https://tsduck.io/streams/](https://tsduck.io/streams/)

如果您正在寻找 AV 无法播放的原因：您可能需要重新检查您的管道并使用这些功能为音频/视频接收器设置帧速率

# javascript - .fadeOut() 的行为类似于 .fadeIn()

> ID：15916997
> 
> 赞同：0
> 
> 时间：2013-04-10T04:33:08.547
> 
> 标签：javascript, jquery

我只是想在用户向下滚动时在滚动时淡入一个元素（#topNav），然后当用户向上滚动并点击 scrollTop 时，将其淡出。向下滚动时淡入；向上滚动时淡出。

但是，它在两个方向上都在消失吗？

我究竟做错了什么？

```
function scrollFunc(e) {
    if ( typeof scrollFunc.x == 'undefined' ) {
        scrollFunc.x=window.pageXOffset;
        scrollFunc.y=window.pageYOffset;
    }
    var diffX=scrollFunc.x-window.pageXOffset;
    var diffY=scrollFunc.y-window.pageYOffset;

    if(diffX<0){
        // Scroll right
    }
    else if(diffX>0){
        // Scroll left
    }
    else if(diffY<0){
                    // scroll down
        $('#topNav').fadeIn();
    }
    else if(diffY>0){
        // Scroll up
        if(document.body.scrollTop === 0){
                            //reached top
            $('#topNav').fadeOut();
        }
    }
    else{
        // First scroll event
        $('#topNav').css('position','fixed').show().fadeIn();
    }
    scrollFunc.x=window.pageXOffset;
    scrollFunc.y=window.pageYOffset;
}
window.onscroll=scrollFunc; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:39:58.713

我解决了这个问题，因为我试图实现同样的目标。然而，这取决于 jQuery。我假设您在使用淡入淡出功能时已经链接了 jQuery。

```
$(document).ready(function() {
    $(window).scroll( function(){
        if($(window).scrollTop()>0){
            $("#topNav").fadeIn();
        }
        else{
            $("#topNav").fadeOut();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:03:27.083

我在[jsfiddle](http://jsfiddle.net/u3mce/1/)中尝试了您的代码并且它有效，所以我想这可能是版本问题。
你的 jQuery 版本和浏览器是什么？

`//some code required by SO`

# automation - 如何自动运行提示用户输入的命令？

> ID：15916999
> 
> 赞同：0
> 
> 时间：2013-04-10T04:33:26.993
> 
> 标签：automation, expect

我有一个要求输入的程序。例如：

```
$ program arg1 arg2
Enter the value of arg3: foo
Enter the value of arg4: spam
$ 
```

如何使运行自动化？我怀疑`expect`为此提供了功能，但以下内容对我不起作用：

```
#!/usr/bin/expect
set timeout 20
spawn "./program arg1 arg2"
expect "Enter the value of arg3:" { send "foo\r" }
expect "Enter the value of arg4:" { send "spam\r" }
interact 
```

有人有想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:26:31.930

尝试以最简单的方式（不要期望）：这行得通吗？

```
program arg1 arg2 <<END
foo
spam
END 
```

（或`printf "%s\n" foo spam | program arg1 arg2`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:47:23.027

`spawn "./program arg1 arg2"`应该是`spawn ./program arg1 arg2`。