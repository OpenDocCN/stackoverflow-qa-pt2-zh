# StackOverflow 问答 15298000-15298999

# php - file_get_content and file_put_content to include php code?

> ID：15298000
> 
> 赞同：0
> 
> 时间：2013-03-08T15:54:04.250
> 
> 标签：php, html, webpage

I have read a few posts on similar issues but not managed to find myself an answer.

I have a template.php file and what I want to do with it is make an identical copy (this includes any php code in that file) make a few changes and save it as a seperate page.

heres what I have so far:

```
<?php
$data = file_get_contents("template.php");
$data = str_replace("blogpostidhere", $postid, $data);
file_put_contents($postid.".php", $data);
?> 
```

The file i need gets created but it doesnt contain anything from between the php tags. It is pure html. Is there a way around this as my template.php is set to simply be copied and a single variable (blogpostidhere) to be added to make the page work. it needs php though?

# php - 如何使用ffmpeg php检查视频是横向还是纵向？

> ID：15298004
> 
> 赞同：-1
> 
> 时间：2013-03-08T15:54:17.657
> 
> 标签：php, ubuntu, ffmpeg

在使用 ffmpge 旋转之前，我必须检查视频是横向还是纵向。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:12:51.060

[从 ffmpeg -i 获取视频尺寸](https://stackoverflow.com/questions/7362130/getting-video-dimension-from-ffmpeg-i)

1.  获取信息。
2.  提取维度。
3.  如果 x < y，则为纵向。其他景观。

例如：

```
$output = shell_exec("ffmpeg -i $myvideo");
$out_arr = explode("\n", $output);
foreach($out_arr as $line) {
  if( preg_match('/^Stream.*Video:/', trim($line)) ) {
    // match line: Stream #0.0(und): Video: h264 (High), yuv420p, 640x360 [PAR 1:1 DAR 16:9], 597 kb/s, 25 fps, 25 tbr, 25k tbn, 50 tbc
    $line_arr = explode(',', $line);
    // get field: 640x360 [PAR 1:1 DAR 16:9]
    $target_arr = explode(' ', $line_arr[2]);
    // get parts: 640x360
    $dims = explode('x', $target_arr[0]);
    $res_x = $dims[0];
    $res_y = $dims[1];
  }
}

if( !( isset($res_x) && isset($res_y) ) ) {
  die('Could not get dimensions');
} else {
  $orientation = ($res_x < $res_y) ? 'Portrait' : 'Landscape';
  printf('Resolution: %s x %s\nOrientation: %s\n', $res_x, $res_y, $oreintation); 
```

不过，我不知道您为什么要旋转视频的拍摄方式。旋转后，您最终会看到横向视频。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T11:00:48.983

使用 ffmpeg 我们无法检查视频是在 iphone 中采用横向模式还是纵向模式。

我们需要安装 mediainfo 或 exiftool

如果我们安装 exiftool 使用以下命令

exec('exiftool path/to/filename/ | grep Rotation');

由此我们可以得到视频的旋转

如果旋转为 90°，则在 iphone 中以纵向模式拍摄的视频

如果旋转为 0°，则在 iphone 中以横向模式拍摄的视频

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-10T06:48:59.917

有时我们会得到 2 种类型的输出“640x268 [SAR 1:1 DAR 160:67]”和“640x268”

```
$output = shell_exec("FFmpeg -i ".$localVideoPath." -vstats 2>&1");
            $out_arr = explode("\n", $output);
            foreach($out_arr as $line) {
                if( preg_match('/^Stream.*Video:/', trim($line)) ) {
                    $line_arr = explode(',', $line);

                    if (str_contains($line_arr[2], 'x')) {
                        //540x960
                        $target_arr = explode(' ', $line_arr[2]);
                        $dims = explode('x', $target_arr[1]);
                    }else{
                        //640x268 [SAR 1:1 DAR 160:67]
                        $target_arr = explode(' ', $line_arr[3]);
                        $dims = explode('x', $target_arr[1]);
                    }
                    $res_x = $dims[0];
                    $res_y = $dims[1];
                }
            }

            if(!(isset($res_x) && isset($res_y))){
                //die('Could not get dimensions');
            } else {
                $orientation = ($res_x < $res_y) ? 'Portrait' : 'Landscape';
            } 
```

# c++ - Does std::vector satisfy the container requirements for Boost.Interprocess allocators?

> ID：15298007
> 
> 赞同：8
> 
> 时间：2013-03-08T15:54:32.427
> 
> 标签：c++, vector, boost-interprocess, gcc4.7

In `boost::interprocess` documentation it is said as requirement for containers to be stored in shared memory:

1.  STL containers may not assume that memory allocated with an allocator can be deallocated with other allocators of the same type. All allocators objects must compare equal only if memory allocated with one object can be deallocated with the other one, and this can only tested with `operator==()` at run-time.
2.  Containers' internal pointers should be of the type `allocator::pointer` and containers may not assume `allocator::pointer` is a raw pointer.
3.  All objects must be constructed-destroyed via `allocator::construct` and `allocator::destroy` functions.

I am using gcc 4.7.1 with -std=c++11 (and boost 1.53). **Is it safe to use the below defined `ShmVector` type?**

```
typedef boost::interprocess::allocator<int,
    boost::interprocess::managed_shared_memory::segment_manager>  ShmemAllocator;
typedef std::vector<int, ShmemAllocator> ShmVector; 
```

I tried a dummy process which uses this type, and it looks it is working, but I am still not sure that the vector in gcc4.7.1 does satisfy all the requirements. I am especially not sure about the first requirement.

```
#include <iostream>
#include <boost/interprocess/allocators/allocator.hpp>
#include <boost/interprocess/managed_shared_memory.hpp>
#include <vector>
#include <cstdlib> //std::system

typedef boost::interprocess::allocator<int,
        boost::interprocess::managed_shared_memory::segment_manager>  ShmemAllocator;
typedef std::vector<int, ShmemAllocator> ShmVector;

int main(int argc, char *argv[])
{
    if(argc == 1){ //Parent process

        struct shm_remove
        {
            shm_remove() { boost::interprocess::shared_memory_object::remove("MySharedMemory"); }
            ~shm_remove(){ boost::interprocess::shared_memory_object::remove("MySharedMemory"); }
        } remover;

        //Create a new segment with given name and size
        boost::interprocess::managed_shared_memory segment(boost::interprocess::create_only,
                "MySharedMemory", 65536);

        //Initialize shared memory STL-compatible allocator
        const ShmemAllocator allocator(segment.get_segment_manager());

        ShmVector* v = segment.construct<ShmVector>("ShmVector")(allocator);
        v->push_back(1); v->push_back(2); v->push_back(3);

        //Launch child process
        std::string s(argv[0]); s += " child ";
        if(0 != std::system(s.c_str()))
            return 1;

    } else { // Child process

        //Open the managed segment
        boost::interprocess::managed_shared_memory segment(
                boost::interprocess::open_only, "MySharedMemory");

        //Find the vector using the c-string name
        ShmVector *v = segment.find<ShmVector>("ShmVector").first;

        for (const auto& i : *v) {
            std::cout << i << " ";
        }
        std::cout << std::endl;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:52:05.760

在 C++ 11 中，分配器规则略有变化，但我认为它不会影响您的问题。

您可能想先了解标准对此有何规定。但是您实际上想要检查您的特定 STL 实现是否符合标准并且不包含错误。

对于第二部分，我强烈建议您去来源并检查一下，实际上并不难。

此外，您可以编写测试以查看它是否真正正常工作：

*   创建自定义分配器：
    *   使用一些自定义类型作为指针，常量指针；
    *   在`construct()`中，`destruct()`计算调用次数；
*   创建`YourCustomType`与分配器一起使用，该分配器还计算构造/破坏的数量。
*   现在，创建`std::vetor<YourCustomType, YourCustomAllocator<YourCustomType>>`实例，插入一些元素，清除向量，销毁它，看看是否：
    *   调用次数`construct()` `destruct()`等于 的构造破坏次数`YourCustomType`。
    *   `typeid(YourCustomAllocator::pointer) == typeid(std::vetor<YourCustomType, YourCustomAllocator<YourCustomType>>::pointer)`

这样您就可以确保所有限制都适用。

至于问题的第一部分，这是一个[旧的 C++ 标准](http://www.csci.csusb.edu/dick/c++std/cd2/lib-containers.html)（不是 C++ 11）。

**1**没有办法（正确实施）向量将分配器无处不在。它将使用您提供的任何分配器，并将其用于一切。至于 operator==，它是在 boost 的分配器中实现的，因此让 operator== 按需要工作是 boost 的问题。虽然我无法在[标准](http://www.csci.csusb.edu/dick/c++std/cd2/lib-containers.html)中找到确认。

**2**除非有错误，否则`std::vector<T, YourAllocator>::pointer`应该是分配器的指针。[cppreference.com 这么说](http://en.cppreference.com/w/cpp/container/vector)，标准[这么说](http://www.csci.csusb.edu/dick/c++std/cd2/lib-containers.html)，（查找“模板类向量”）：

```
 typedef typename Allocator::pointer               pointer;
    typedef typename Allocator::const_pointer         const_pointer; 
```

尽管相同的标准对[分配器](http://www.csci.csusb.edu/dick/c++std/cd2/lib-utilities.html#lib.allocator.requirements)有这样的规定：本国际标准中描述的容器的实现被允许假设它们的分配器模板参数满足表 6 中的以下两个附加要求。

-- 给定分配器类型的所有实例都必须是可互换的，并且总是相互比较相等。

**--typedef 成员 pointer、const_pointer、size_type 和 difference_type 要求分别为 T*、T const*、size_t 和 ptrdiff_t。**

**所以，实际上标准不允许使用任何指针类型，但我的猜测是实际的 STL 实现会起作用。**

**3**只需检查`std::vector<T>::clear()`方法实现，看看是否调用了 allocator::destroy。检查`std::vector<T>::resize()`方法的实现以查看是否使用了 allocator::construct。我无法在标准中找到调用破坏和构造[的要求](http://www.csci.csusb.edu/dick/c++std/cd2/lib-containers.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-27T19:52:32.423

我没有评论的声誉，所以我必须回答..如果两个分配器比较相等，它们是可以互换的。例如，比较不相等的相同类型的分配器可以用不同的（共享的）内存进行初始化。请参阅[分配器](https://en.cppreference.com/mwiki/index.php?title=cpp/named_req/Allocator&oldid=103869)：

```
a1 == a2 => returns true only if the storage allocated by the allocator a1 can be deallocated through a2\. Establishes reflexive, symmetric, and transitive relationship. Does not throw exceptions. 
```

因此，如果您的`ShmVector`实例是使用`ShmemAllocator`比较相等的 s 创建的，那么您必须是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-07T01:08:13.950

我认为答案是否定的。因为在实践中（在 C++98 中）和理论上（C++11 标准），`std::vector`指针不能是`T*`.

这就是为什么`boost::interprocess::vector<T>`使用`boost::container::vector<T, boost::interprocess::allocator<T>>`（而不是`std::vector<T, boost::interprocess::allocator<T>>`）。

# php - Find statistical data for every combination(Uncommon one) of data using PHP & Mysql

> ID：15298008
> 
> 赞同：1
> 
> 时间：2013-03-08T15:54:37.500
> 
> 标签：php, mysql, statistics

![Example of Data](../Images/b0334fd3120ae6fd7fcd9d278b112aef.png)

In this example, I want average smoke column for every combination. Here when thing get complicate.

It's **NOT** simple as find average(smoke) of (Male,30-40,us),(Male,30-40,ca),(Male,30-40,th) and so on.

What I want is some variable can use for more than 1 times in a single query like (Male,30-40,(us,uk)) ,(Male,30-40,(us,uk,th)) ,,(Male,30-40,(us,uk,th,ca)) and more.

Any simple,efficient way to do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:14:16.473

你可以得到这样的每个组合：

```
SELECT q.sort_key,avg(s.id)
FROM foo AS s
JOIN
  (SELECT GROUP_CONCAT(f0.bar) AS sort_key
   FROM foo AS f1
   JOIN foo AS f2 ON f1.bar<=f2.bar
   JOIN foo AS f3 ON f2.bar<=f3.bar
   JOIN foo AS f0 ON f0.bar=f1.bar OR f0.bar=f2.bar OR f0.bar=f3.bar
   GROUP BY f1.bar,f2.bar,f3.bar) AS q ON find_in_set(s.bar,q.sort_key)
GROUP BY q.sort_key; 
```

[http://sqlfiddle.com/#!2/1fdbf/32](http://sqlfiddle.com/#!2/1fdbf/32)

由于 MySQL 不支持递归 CTE，因此您必须使用尽可能多的表，因为该参数可能有不同的值（2 代表性别，4（？）代表国家等等）。一旦您对所有参数进行了可能的组合，请对它们进行笛卡尔连接并按它们进行分组。在 PHP 中，您只需将 (male,female) 之类的排序键更改为 ALL GENDERS。

EDIT2：修复了欺骗，可能加入可能会更好，但它仍然可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:43:34.990

一种简单的方法是将独立/预测变量连接为单独列中的字符串，然后根据字符串的 GROUP BY 获取 AVG(smoke)

```
ALTER TABLE `statistical_data` ADD `variables_string` VARCHAR( 255 ) NOT NULL 

UPDATE `statistical_data` SET`variables_string` = CONCAT(`gender`, `age`, `country`)

SELECT `gender`, `age`, `country`, AVG(smoke) FROM `statistical_data`GROUP BY `variables_string` 
```

例如，可以使用 WHERE 子句来获取所有组合 WHERE 性别为男性的平均值，但您必须将所有组合的烟雾总和（1 的数量）除以组合的频率 (n)，因为您不能取平均值。

```
SELECT (SUM(smoke_sum) / SUM(smoke_count)) FROM (SELECT `gender`, `age`, `country`, SUM(smoke) AS smoke_sum, COUNT(smoke) AS smoke_count FROM`statistical_data` WHERE `gender` = 'male' GROUP BY variables_string ) AS t2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:57:54.020

如果可以的话，我建议对您的数据进行规范化，以便更容易使用内置函数来实现您的目标。这可能比提出一个可以按照您现在的方式工作的查询要快。

# ruby-on-rails-3 - Single table inheritance - Omniauth with multiple providers?

> ID：15298010
> 
> 赞同：1
> 
> 时间：2013-03-08T15:54:41.163
> 
> 标签：ruby-on-rails-3, polymorphic-associations, single-table-inheritance

I am using Omniauth with multiple identities to login (i.e., Facbook, LinkedIn etc.). Right now, I have a single model called Service, with `provider` (with values `facebook`, `linkedin` etc.), `oauth_token` and some other fields.

Now, I added many methods to Service model, which only applied to a particular provider. For example, `friend_count`, which only applies if provider is `facebook`.

I think my code starts to smell and needs refactoring. I don't think I will add a lot of columns that are provider-specific, so polymorphism would not be necessary.

My question is: which design pattern I should take: single-table inheritance, or something simpler?

# css - Why does this Selenium XPath expression fail to return results when concat() is used?

> ID：15298013
> 
> 赞同：2
> 
> 时间：2013-03-08T15:54:46.173
> 
> 标签：css, internet-explorer, xpath, selenium, concat

When I use the following XPath expression in Selenium, it works correctly. Its finds an ancestor div of the current element which contains a certain string in its class attribute:

```
inputEl.findElement(By.xpath("ancestor::div[contains(@class, 'x-form-item')]")).getAttribute("class") 
```

The answer it gives is `"x-form-item "` (notice the trailing space).

However, I want ancestors which precisely have the `x-form-item` class, and not other classes like `x-form-item-label`. So I changed the expression as follows:

```
inputEl.findElement(By.xpath("ancestor::div[contains(concat(' ', @class, ' '), ' x-form-item ')]")).getAttribute("class") 
```

However, once this in place, Selenium is unable to find the element. It gives this error:

```
org.openqa.selenium.NoSuchElementException: Unable to find element with xpath == ancestor::div[contains(concat(' ', @class, ' '), ' x-form-item ')] (WARNING: The server did not provide any stacktrace information) 
```

At first I thought I had some kind of mistake, so to simplify, I removed the leading/trailing space. Presumably this is semantically the same as my very first, working query:

```
inputEl.findElement(By.xpath("ancestor::div[contains(concat('', @class, ''), 'x-form-item')]")).getAttribute("class") 
```

However, this also fails:

```
org.openqa.selenium.NoSuchElementException: Unable to find element with xpath == ancestor::div[contains(concat('', @class, ''), 'x-form-item')] (WARNING: The server did not provide any stacktrace information) 
```

So my fundamental question is, why are these two resulting in different strings?

*   `@class`
*   `concat('', @class, '')`

Note: I am using the IEDriver with IE9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:08:53.110

要实现你想要的，你甚至不需要 concat(' ', @class, ' ')。你应该可以使用

```
By.xpath("ancestor::div[contains(@class, ' x-form-item ')]") 
```

因为您在“@class”标签中寻找“x-form-item”，而不是在“@class”标签中寻找。

# c++ - 字符串前应为 ')'

> ID：15298015
> 
> 赞同：0
> 
> 时间：2013-03-08T15:54:52.803
> 
> 标签：c++, compiler-errors, codeblocks

我已经尝试了很多不同的解决方案来解决这个问题，但我似乎无法弄清楚为什么编译器继续在我的头文件中给我这个错误。如果有人可以请给我一些见解，那将非常感激。编辑：抱歉忘记了哪一行给出了错误。它在头文件中的行： Date(string mstr, int dd, int yy);

是的，我知道 this = new Date... 是一个糟糕的解决方案，我只是在解决它；）

标题：

```
#include <string>

#ifndef DATE_H
#define DATE_H

class Date{
    public:
        Date(int mm, int dd, int yy);
        Date(string mstr, int dd, int yy);
        void print();
        void printFullDate();
        void prompt();

        void setMonth(int);
        void setDay(int);
        void setYear(int);

        int getMonth();
        int getDay();
        int getYear();

        static const int monthsPerYear = 12;
    private:
        int month;
        int day;
        int year;

        int checkDay(int);
};

#endif 
```

如果你需要，这里是实现（它还没有完全完成，我只是想测试我写的一些函数）：

```
#include <iostream>
#include <stdexcept>
#include "Date.h"
using namespace std;

Date::Date(int mm, int dd, int yy){
    setMonth(mm);
    setYear(yy);
    setDay(dd);
}

Date::Date(string mstr, int dd, int yy){
    cout << "It's working";
}

int Date::getDay(){
    return day;
}

int Date::getMonth(){
    return month;
}

int Date::getYear(){
    return year;
}

void Date::setDay( int dd ){
    day = checkDay(dd);
}

void Date::setMonth( int mm ){
    if( mm > 0 && mm <= monthsPerYear)
        month = mm;
    else
        throw invalid_argument("month must be 1-12");

}

void Date::setYear( int yy ){
    year = yy;
}

int Date::checkDay( int testDay){
    static const int daysPerMonth[ monthsPerYear + 1 ] = {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};

    if( testDay > 0 && testDay <= daysPerMonth[ getMonth() ])
        return testDay;
    if( getMonth() == 2 && testDay == 29 && (getYear() % 400 == 0 || ( getYear() % 4 == 0 && getYear() % 100 != 0 ) ) )
        return testDay;
    throw invalid_argument("Invalid day for current month and year");
}

void Date::print(){

}

void Date::printFullDate(){

}

void Date::prompt(){
    int userChoice = 1;
    int mm, dd, yy;
    string monthStr;

    while(userChoice != 3){
        cout << "Enter 1 for format: MM/DD/YYYY" << endl;
        cout << "Enter 2 for format: Month DD, YYYY" << endl;
        cout << "Enter 3 to exit" << endl;
        cout << "Choice: " << endl;
        cin >> userChoice;
        while(userChoice < 1 || userChoice > 3){
            cout << "Please enter a number 1 - 3 for the formats above." << endl;
            cout << "Choice: " << endl;
            cin >> userChoice;
        }
        if(userChoice != 3){
            switch(userChoice){
                case 1:
                    cout << "Enter Month (1 - 12): ";
                    cin >> mm;
                    setMonth(mm);
                    cout << "Enter Day of Month: ";
                    cin >> dd;
                    setDay(dd);
                    cout << "Enter Year: ";
                    cin >> yy;
                    setYear(yy);
                    break;
                case 2:
                    cout << "Enter Month Name: ";
                    cin >> monthStr;
                    cout << "Enter Day of Month: ";
                    cin >> dd;
                    cout << "Enter Year: ";
                    cin >> yy;
                    this = new Date(monthStr, dd, yy);
                    break;
                default:
                    break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T15:59:46.177

**问题 #1：**为`string`

```
#include <string> 
```

**问题 #2：**使用完全限定的`std::string`而不是 just `string`，或者在类定义之前放置一个 using 声明：

```
using std::string; 
```

**问题 #3：**您不能重新分配`this`指针：

```
this = new Date(monthStr, dd, yy); // ERROR! 
```

您正在尝试做的事情可能应该重写为：

```
*this = Date(monthStr, dd, yy); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:01:09.780

在代码开头使用`std::string`或声明。`using namespace std;`

# eclipse - Eclipse Code Assist inside method or type name

> ID：15298018
> 
> 赞同：0
> 
> 时间：2013-03-08T15:54:56.487
> 
> 标签：eclipse, visual-studio, adt

I'm used to Visual Studio, where when you start typing `System.Context` list will appear and you will be able to choose not only from type names that start with Context, but also from names like `ActivationContext`.

This gives me the ability to quickly find a method just by guessing it's name. Especially important when I'm beginning to learn to program for Android. For example, I was sure that `ListView` must have a method for setting `ListAdapter`, but I was dumb enough not to figure it will be just `setAdapter`. In VS I would just type `adapter` and `setAdapter` would have appeared.

Is there something similar in Eclipse?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:57:06.737

在 Eclipse 中，您可以使用键盘快捷键`Ctrl + Space`，它会尝试为您建议项目。您可以在您已经开始输入一段“建议”之后执行此操作。它更严格一些：

示例：在 String 对象上，您尝试查找`equalsIgnoreCase()`（您的字符串称为`test`）。键入`test.e`然后`CTRL + SPACE`给出三个选项（`endsWith`, `equals`, `equalsIgnoreCase`）。如果您键入`test.ignore`，则`CTRL + SPACE`不会得到任何结果。对于过滤帮助，您可以使用`test.`然后`CTRL + SPACE`，它将显示所有结果，以便您可以通过这种方式进行搜索。

# node.js - Scheduling an event for an hour, day, week, etc's time

> ID：15298022
> 
> 赞同：0
> 
> 时间：2013-03-08T15:55:00.873
> 
> 标签：node.js, postgresql, amazon-ec2, redis, rabbitmq

In my app I let users send messages and emails. I'd like to enable them to schedule them for sending - i.e. set a time and date when they'll be sent.

I've got quite a lot of messages being sent - how best can I architect this so that it'll scale? I've got them being stored in PostgreSQL for now, but I have no way other than polling to check which need to be sent. I'd like to avoid polling if possible.

I'm currently running PHP, node.js, redis, PostgreSQL and RabbitMQ on EC2, so any combination of those is favourable.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:08:01.743

如果您只使用数据库，您将轮询发送消息，但由于您有 RabbitMQ，您可以设置延迟消息。

我找到了[这篇](http://www.javacodegeeks.com/2012/04/rabbitmq-scheduled-message-delivery.html)关于这个话题的文章。

# excel - Excel 2010 Run-Time error '91'

> ID：15298024
> 
> 赞同：0
> 
> 时间：2013-03-08T15:55:12.847
> 
> 标签：excel, excel-2010, vba

I'm trying to run a macro. We will call this workbook A. The macro opens up a file menu to select another workbook, lets call this workbook B. The macro then opens up 5 other workbooks and pulls information from other excel files into Workbook B.

This worked just fine two months ago now I keep getting `Run-Time error '91'` Where I am having the problem at is

`Cells.Find(What:=sFindString, After:=ActiveCell, LookIn:=xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, MatchCase:=True, SearchFormat:=False).Activate`

and

`Cells.Find(What:=sFindString, After:=ActiveCell, LookIn:=xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=True, SearchFormat:=False).Activate`

My code is below:

```
Public Sub Main(sPath, sFile)
Dim CR, LR As Integer, sAB_Bal, sABClos, sABComp, sABOpen, sAP_Bal, sAPClos, sAPComp, sAPOpen, sCol, sCol_OC, sFileBank, sFileGIT, sMD, sMN, sPathGIT As String
Dim FSO As Scripting.FileSystemObject, SourceFolder As Scripting.Folder, FileItem As Scripting.File
Application.DefaultFilePath = ActiveWorkbook.Path & "\"                 'SET DEFAULT FILE PATH AND PROMPT TO OPEN THE GOAL AND INCENTIVE TRACKER FILE
Set FSO = New Scripting.FileSystemObject: Set SourceFolder = FSO.GetFolder(ActiveWorkbook.Path & "\")
sPathGIT = Application.GetOpenFilename("Worksheets (*.xlsx; *.xlsm; *.xlsb; *.xls), *.xlsx; *.xlsm; *.xlsb; *.xls", , "PLEASE SELECT THE G.I.T. FILE:")
If StrComp(sPathGIT, "False") = 0 Then
    iYesNo = MsgBox("You clicked Cancel.  Do you wish to exit?", vbYesNo, "EXIT?")
    If iYesNo = 6 Then
        GoTo Q1
    ElseIf iYesNo = 7 Then
        MsgBox ("You must re-open this file to be prompted for the G.I.T. file again."): Exit Sub
    End If
End If
MonthPrompt.Show                                                        'PROMPT FOR THE REPORT MONTH & YEAR
If MonthPrompt.ComboBox1.Value = vbNullString And MonthPrompt.ComboBox2.Value = vbNullString Then
    Application.DisplayAlerts = False: Application.Quit
End If                                                                  'PROMPT FOR THE GIT FILE NAME & OPEN
Application.EnableCancelKey = xlDisabled                                'PREVENT RANDOM LINE BY LINE VBA BREAK ISSUE
Application.ScreenUpdating = True: DoEvents: MsgBox ("First click OK to begin verifying each bank's file." & Chr(10) & Chr(10) & "(part 1 of 2...progress bar will display)")
ProgressBar.Caption = "PROCESSING - PLEASE WAIT...": DoEvents: ProgressBar.Percentage.Width = 0: Call ShowProgress(0.01): DoEvents
Workbooks.Open Filename:=sPathGIT: sFileGIT = Replace(sPathGIT, sPath, vbNullString)
sMN = MonthPrompt.ComboBox1.Value                                       'CURRENT MONTH NAME & DATE (ROW BELOW)
sMD = Month(MonthPrompt.ComboBox1.Value & "/1/" & MonthPrompt.ComboBox2.Value) & "/1/" & MonthPrompt.ComboBox2.Value
Sheets(8).Select: Call VerifyNoDup(sAB_Bal): sCol = CLet(sMD)                       'Business DDA Average Balance
Sheets(5).Select: Call VerifyNoDup(sABClos): If sCol <> CLet(sMD) Then GoTo E2      'Business DDA Closed
Sheets(4).Select: Call VerifyNoDup(sABOpen): If sCol <> CLet(sMD) Then GoTo E2      'Business DDA Openings
Sheets(6).Select: Call VerifyNoDup(sABComp): sCol_OC = CLet(sMD)                    'Business Open-Close
Sheets(7).Select: Call VerifyNoDup(sAP_Bal): If sCol <> CLet(sMD) Then GoTo E2      'Consumer DDA Average Balance
Sheets(2).Select: Call VerifyNoDup(sAPClos): If sCol <> CLet(sMD) Then GoTo E2      'Personal DDA Closed
Sheets(1).Select: Call VerifyNoDup(sAPOpen): If sCol <> CLet(sMD) Then GoTo E2      'Personal DDA Openings
Sheets(3).Select: Call VerifyNoDup(sAPComp): If sCol_OC <> CLet(sMD) Then GoTo E3   'Personal Open-Close
Windows(sFile).Activate: CR = 2: While StrComp(Range("C" & CR).Value, vbNullString) <> 0: CR = CR + 1: Wend: LR = CR: CR = 2
While CR < LR                                                           'CONFIRM ALL BANK FILES ARE PRESENT
    sFileBank = Range("C" & CR).Value
    If sFileBank <> Range("C" & CR - 1).Value Then
        If StrComp(Dir(sPath & sFileBank), vbNullString) = 0 Then GoTo E1
        Workbooks.Open Filename:=sPath & sFileBank: Windows(sFile).Activate
    End If: Call ShowProgress(CR / LR): DoEvents: CR = CR + 1
Wend: CR = 2
Application.ScreenUpdating = True: DoEvents: MsgBox ("Now click OK to begin copying data." & Chr(10) & Chr(10) & "(part 2 of 2...progress bar will display)")
ProgressBar.Percentage.Width = 0: Call ShowProgress(0.01): DoEvents
While CR < LR                                                           'CONFIRM ALL BANK FILES HAVE REQUIRED WORKSHEETS AND FIELDS
    Call ShowProgress(CR / LR): DoEvents
    Call ScanImport(CR, LR, 0, sMN, sFileGIT, sFile, sABOpen, sCol, "raw data", "Business DDA")
    Call ScanImport(CR, LR, 1, sMN, sFileGIT, sFile, sABClos, sCol, "raw data", "Business DDA")
    Call ScanImport(CR, LR, 0, sMN, sFileGIT, sFile, sAB_Bal, sCol, "raw data 3", "Business DDA")
    Call ScanImport(CR, LR, 0, sMN, sFileGIT, sFile, sABComp, sCol_OC, sCol, "Business DDA")    'FILL FORMULAS FOR BUSINESS OPEN-CLOSE
    Call ScanImport(CR, LR, 0, sMN, sFileGIT, sFile, sAPOpen, sCol, "raw data", "Personal DDA")
    Call ScanImport(CR, LR, 1, sMN, sFileGIT, sFile, sAPClos, sCol, "raw data", "Personal DDA")
    Call ScanImport(CR, LR, 0, sMN, sFileGIT, sFile, sAP_Bal, sCol, "raw data 3", "Personal DDA")
    Call ScanImport(CR, LR, 0, sMN, sFileGIT, sFile, sAPComp, sCol_OC, sCol, "Personal DDA")    'FILL FORMULAS FOR PERSONAL OPEN-CLOSE
    Call ShowProgress(CR / LR): DoEvents: CR = CR + 1
Wend: Application.ScreenUpdating = True: Windows(sFile).Close: Application.DisplayAlerts = True: Exit Sub
E1: MsgBox ("You are missing the following required bank file:" & Chr(13) & Chr(13) & sFileBank): GoTo Q1
E2: MsgBox ("The column for month '" & sMD & "' appears inconsisent among the Business & Personal 'Open' or 'Closed' worksheets."): GoTo Q1
E3: MsgBox ("The column for month '" & sMD & "' appears inconsistent between the Business & Personal 'Open-Close' ratio worksheets."): GoTo Q1
Q1: Application.DisplayAlerts = False: Application.Quit
End Sub

Public Function CLet(sFindString) As String                                'RETURN COLUMN LETTER
    Cells.Find(What:=sFindString, After:=ActiveCell, LookIn:=xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, MatchCase:=True, SearchFormat:=False).Activate
CLet = Mid(ActiveCell.Address, InStr(ActiveCell.Address, "$") + 1, InStr(2, ActiveCell.Address, "$") - 2)
End Function

Public Function RNum(sFindString) As Integer                                'RETURN ROW NUMBER
Cells.Find(What:=sFindString, After:=ActiveCell, LookIn:=xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=True, SearchFormat:=False).Activate
RNum = ActiveCell.Row
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:45:47.503

尝试以下更改。

```
 Public Function CLet(sFindString) As String                                'RETURN COLUMN LETTER
        Dim rng As Range
        Set rng = Cells.Find(What:=sFindString, After:=ActiveCell, LookIn:=xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, MatchCase:=True, SearchFormat:=False)

        If Not rng Is Nothing Then
            rng.Activate
            CLet = Mid(ActiveCell.Address, InStr(ActiveCell.Address, "$") + 1, InStr(2, ActiveCell.Address, "$") - 2)
        End If
    End Function

    Public Function RNum(sFindString) As Integer                                'RETURN ROW NUMBER
        Dim rng As Range
        Set rng = Cells.Find(What:=sFindString, After:=ActiveCell, LookIn:=xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=True, SearchFormat:=False)

        If Not rng Is Nothing Then
            rng.Activate
            RNum = ActiveCell.Row
        End If
    End Function 
```

# c# - Best Aggregate Roots and Data Repositories Suggestions

> ID：15298026
> 
> 赞同：0
> 
> 时间：2013-03-08T15:55:19.490
> 
> 标签：c#, asp.net-mvc, entity-framework, aggregateroot

I'm trying to implement data repositories based upon the aggregate roots. However, I'm not sure if this is the best way and I need your feedback.

Here are the aggregate roots of my system I've come up with (included are their childs indented below)

```
Customer (Has Data Repository)
    CustomerAccount
    CustomerAccountPerson
    CustomerOptions
    CustomerCustomField
    CustomerCustomFieldData
    CustomerFile
    CustomerNote
    CustomerLoginLog
    ..... and more
Order (Has Data Repository)
    OrderLineItem
    OrderStatusLog
    OrderFlag
    OrderOutsourcing
    ..... and more
Lead (Has Data Repository)
    LeadNote
    LeadSource
    LeadStatus
    LeadStatusLog
    ..... and more
Invoice  (Has Data Repository)
    InvoiceOrder
    InvoicePayment 
```

Plus more... the struggle I have is that, if proper data repositories are based upon aggregate roots, then technically should I have the Customer repository consume the Orders repository and instead of having two separate repositories for Customer and Order, instead we have Customer, with orders included in it

The only reason I have it separated is because of the large number of sub tables/items under the customer and order data repository.

I'm really interested in hearing how others would handle a situation like this when designing their data repositories and any other suggestions they might have for me.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:06:44.733

如果不了解您的用例，就无法判断。

聚合根代表一个逻辑单元，可以在其上作为一个整体执行操作。

如果命令可以单独存在，那它应该是一个聚合根。如果不能，那就不应该。例如 LineItem 在订单之外没有任何意义。但是，订单通常可以在没有客户对象的情况下使用 - 例如，您的运输部门可以将订单标记为已发货，而不管客户如何，因此通常它是 AR。

如果您尝试做 DDD（无论好坏），那么您的设计不应该由底层数据技术和表格布局驱动。谁说你需要使用 RDBMS？

当然，关于 DDD 的开创性书籍是 Eric Evans 的“领域驱动设计”，它提供了大量的背景信息，当人们开始热衷于货物 DDD 时，这些背景通常会丢失。

Jimmy Nilsson 的“应用领域驱动设计和模式”一书也经常被推荐，但我个人觉得它不是很好。

当您拥有具有大量业务规则和行为/逻辑且未以实体状态编码的复杂域时，DDD 非常有用。大多数应用程序远比这简单得多，并且有更好的设计替代方案。

我建议阅读 Martin Fowler 的优秀书籍“企业应用程序架构的模式”——它比 DDD 书籍涵盖更广泛的领域，并提供了许多处理应用程序行为的好方法，并涵盖了从后端到 GUI 的所有应用程序层。

# ms-access - "Not a valid bookmark" with DAO Recordset

> ID：15298027
> 
> 赞同：1
> 
> 时间：2013-03-08T15:55:20.010
> 
> 标签：ms-access, ms-access-2007, dao

I'm in the process of converting an Access Data Project (ADP) into a standard ACCDB format with ODBC linked tables. In the ADP, I had overridden the Refresh button to return the user to the current record by using the following code:

```
Public Sub RibbonCmd_RefreshScreen(ctl As IRibbonControl, ByRef cancelDefault)
    On Error GoTo ErrHandler

    cancelDefault = False

    DoCmd.Echo False

    Dim saveBookmark
    With Screen.ActiveForm
        saveBookmark = .Bookmark
        .Requery
        .Bookmark = saveBookmark
    End With

    'Success - cancel the default behavior
    cancelDefault = True

ExitHandler:
    DoCmd.Echo True
    Exit Sub

ErrHandler:
    cancelDefault = False
    Resume ExitHandler

End Sub 
```

My understanding is that this should work just fine with DAO, but I get error 3159, `Not a valid bookmark.` I've also tried replacing `.Bookmark` with `.Recordset.Bookmark`, but that gave me the same result. Is there something I'm doing wrong here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:37:29.233

实际上，重新查询表单或重新查询记录集将重新设置并使书签无效。

因此，此类书签在重新查询后不再有效。

所以这里最好的方法将取决于

a) 我只是想重新显示任何更改的记录（而不是移出当前记录）。

b）我只是想重新显示任何更改的记录并且还显示新记录（新记录是关键部分）。

如果您只需要刷新，则可以使用适当调用的命令刷新。

例如：

```
Me.Refresh 
```

或者在你的情况下

```
Screen.ActiveForm.Refresh 
```

所以上面是一行代码，就是你所需要的。使用此命令时，表单的当前记录指针不会改变。所有和任何更改的记录都将为您重新显示。

请注意，由于您可以在表单按钮后面使用：

```
Me.Refresh 
```

然后几乎不需要调用您编写的通用例程。

但是，如果您需要表单“加载”或显示添加的任何新记录，那么您必须使用重新查询。在这种情况下，如在这种情况下注明的书签都将失效。

因此，对于要重新查询的代码，我们使用 PK 值（希望您使用默认 20 年的 ID 的默认 pk）。然后代码将变为：

```
Dim lngID         As Long

If IsNull(Me!ID) Then Exit Sub

lngID = Me!ID

Me.Requery

Me.Recordset.FindFirst "id = " & lngID 
```

当然，如果每个表单的 PK id 不同，那么您当然可以将 PK 值的名称传递给您的“通用”刷新例程。它看起来像：

```
Public Sub MyRefresh(strPK As String)

   Dim lngID         As Long

   If IsNull(Me(strPK)) Then Exit Sub

   lngID = Me(strPK)

   Me.Requery

   Me.Recordset.FindFirst strPK & " = " & lngID

End Sub 
```

这里的“希望”是您实际上真的只需要刷新，因为如前所述，这只是一行代码，更好的是它不会移动记录指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T15:14:17.453

我使用了 Recordset.AbsolutePosition 表单，这可以正常工作，例如在字段的 OnKeyDown 出口中

```
Dim PrefilterPosition As Long

Private Sub ValnSubject_KeyDown(KeyCode As Integer, Shift As Integer)

' Not F2 - exit
If KeyCode <> vbKeyF2 Then Exit Sub

'   Get the active control
Dim ActiveCtl As Control
Set ActiveCtl = Me.ActiveControl

ActiveControlName = ActiveCtl.Name

' Is the form's filter set?
If Me.Filter = "" Then

' NO: Apply the new filter
        ' Note the current position in the recordset
        PrefilterPosition = Me.Recordset.AbsolutePosition

        ' Set the filter to the Active control's value
        Me.Filter = "[" & ActiveCtl.ControlSource & "]='" & ActiveCtl.Value & "'"
        Me.FilterOn = Me.Filter <> ""
        Me.Requery
Else

' YES: Clear the filter
        Me.Filter = ""
        Me.FilterOn = Me.Filter <> ""
        Me.Requery

        ' Align the recordset on the previously stored position
        Me.Recordset.AbsolutePosition = PrefilterPosition

    End If

' Restore the cursor to where it came from
Me.Controls(ActiveControlName).SetFocus

Ex_it:

End Sub 
```

* * *

对于上下文：此代码来自“即时过滤器”的想法，您将光标放在选项卡表单中的字段上，按 F2，然后应用过滤器，因此您只能看到具有所选字段值的记录。再次按 F2，过滤器被删除，光标回到第一次按 F2 时的位置。正如 Albert 上面所说，书签在这里不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T09:19:10.267

我在开发中使用 VB6 和 Visual Data Manager。我曾经也有过一样的问题。最有可能发生在 2 个用户尝试同时更新同一记录时。因此表中的某些字段已损坏。以下是我用来解决问题的步骤： 1- 将表的结构（我们称之为 table1）复制到另一个表（我们称之为 table2）。2- 在表 1 中找到正确的记录。3- 将数据从 table1 传输到 table2，但损坏的记录除外 4- 再次将排除的记录重新输入到 table2。5- 重命名表 1 表 3 6- 重命名表 2 表 1

这都是民间

abdobox@yahoo.com

# ruby-on-rails - 在 Rails 中无法捕获 Mysql2::Error

> ID：15298035
> 
> 赞同：2
> 
> 时间：2013-03-08T15:55:49.890
> 
> 标签：ruby-on-rails, ruby

目前正在测试以下代码：

```
def db_check
  begin 
    schema_call = ActiveRecord::Base.establish_connection(
      :adapter => 'mysql2',
      :host => 'localhost',
      :database => 'dev_db',
      :username => 'dev_user',
      :password => 'dev_pw').connection.execute("SELECT * FROM schema_migrations LIMIT 1")

    if schema_call
      render :status => 200, :file => "public/success.html"
    else
      render :status => 500, :file => "public/query_fail.html"
    end
  rescue Exception => e
    puts "#{e.class} ;; #{e.message}"
    logger.debug "#{e.class}"
    render :status => 500, :file => "public/500.html"
  end
end 
```

最终目标是调用 MySQL 服务器以查看 1) 服务器是否仍在运行以及 2) 数据库是否可用。如果连接不起作用，则会引发**错误**，因此我将代码放在一个`rescue`块中。不幸的是，即使我使用`rescue Exception`，我知道被建议不要使用，我仍然在浏览器中收到一条**Mysql2::Error**消息（我也尝试了 rescue `Mysql2:Error`，但没​​有效果）。

错误记录的重复`rescue`是额外尝试获取更多信息以使用，但到目前为止没有任何效果。任何人都知道如何捕捉这个错误？

更新：另外，对于其他上下文，使用当前未运行的 MySQL 测试代码（如果数据库服务器关闭的条件），请返回以下内容：

```
Mysql2::错误
无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)
```

考虑到服务器已关闭，这具有部分意义，但我仍然不明白为什么它不能挽救错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:20:19.747

`rescue`没有捕获**Mysql2::Error**的原因是错误不是来自**ActiveRecord::Base**代码，而是 Rails 抛出错误，因为它无法连接到它期望的 MySQL 服务器（我已经关闭以测试上面的代码）。

# ckeditor - 在CKEditor中，如何在一段时间后将2个空格变成1个

> ID：15298036
> 
> 赞同：0
> 
> 时间：2013-03-08T15:55:51.057
> 
> 标签：ckeditor, spaces

许多人在一段时间后仍然键入两个空格。

CKeditor 允许这样做（直接 html 将忽略第二个）。CKEditor 添加`&nbsp;`.

我只想要一个没有`&nbsp;`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:11:45.890

最好的解决方法取决于您的需求。我所做的是我实际上完全删除了所有恰好也摆脱了该问题的实体。我通过将以下内容添加到我的 CKEditor`config.js`文件中来做到这一点

```
config.removePlugins = 'entities'; // replaces ä with &auml; and I don't want that 
```

另一种选择是在保存之前对后端的传入数据进行后处理。完成的方式取决于您使用的语言，但简单的字符串替换就足够了。

# delphi - 如何在 Delphi 中安装和使用 VerySimpleXML？

> ID：15298038
> 
> 赞同：0
> 
> 时间：2013-03-08T15:55:55.740
> 
> 标签：delphi, delphi-xe

我是 Delphi 新手，我需要有关如何安装 VerySimpleXML 的帮助。如果你们知道我在哪里可以找到这样的教程，我也将非常感谢有关如何使用它将 html 转换为 xml 的教程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T16:08:47.447

我已经下载了[VerySimpleXML](http://blog.spreendigital.de/2011/11/10/verysimplexml-a-lightweight-delphi-xml-reader-and-writer/)，它是一个单一的 pas 文件，所以没有什么要安装的。

要使该单元可用于您的项目，您基本上可以：

1.  将文件放在磁盘中的任何位置，并将文件添加到要使用它*的每个项目中。*要将文件添加到项目中，请使用`Shift``F11`或通过 Project/Add to project 中的菜单
2.  将文件放在磁盘中的任何位置，然后将该文件夹添加到 Delphi*库路径*中，全局位于 Tools/Options/Delphi Options/Library/Library Path 中。
3.  将文件放在磁盘中的任何位置，然后将该文件夹添加到Project/Options/Delphi-Compiler/Search Path 中的 Project *search path中。*
4.  将文件放在项目 (dpr) 文件所在的同一文件夹中

一旦文件可用于项目，您只需在要使用它的任何单元中添加`Xml.VerySimple`子句`uses`，例如：

```
Unit myUnit;
interface
  //whatever

implementation
uses Xml.VerySimple; 
```

下载附带一个示例，您可以学习以了解如何使用它。

# selenium - 如何测试表单的对齐方式？

> ID：15298044
> 
> 赞同：1
> 
> 时间：2013-03-08T15:56:07.657
> 
> 标签：selenium, junit, junit4

我使用 Selenium 和 JUnit4，并且我有一个表格，我想测试它是否正确对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:36:33.893

您可以尝试使用方法`getLocation().x`和`getLocation().y`WebElement。

例如

```
int id1X = driver.findElement(By.id("id1")).getLocation().x; 
int id2X = driver.findElement(By.id("id2")).getLocation().x;
assertEquals(id1X, id2X); 
```

验证垂直对齐。您还可以玩`getSize().height`并`getSize().width`拥有更复杂的条件。

# java - 使用 POI 将不同的数据类型写入 Excel

> ID：15298045
> 
> 赞同：0
> 
> 时间：2013-03-08T15:56:09.200
> 
> 标签：java, excel, apache-poi

我正在尝试将数据从数据库导出到 Excel。我将数据导出并当前存储在 ArrayList 中（可以更改）。我已经能够将数据导出到 Excel，但所有值都作为字符串导出，我需要它们保持其数据类型，即货币/数字。

我正在使用 Apache POI，并且很难将字段的数据类型设置为字符串以外的任何内容。我错过了什么吗？有人可以告诉我更好的方法吗？对此的任何帮助将不胜感激。

```
public static void importDataToExcel(String sheetName, ArrayList header, ArrayList data, File xlsFilename, int sheetNumber)
        throws HPSFException, FileNotFoundException, IOException {

    POIFSFileSystem fs = new POIFSFileSystem();
    HSSFWorkbook wb = new HSSFWorkbook(new FileInputStream(xlsFilename));
    HSSFSheet sheet = wb.createSheet(sheetName);

    int rowIdx = 0;
    short cellIdx = 0;

    // Header
    HSSFRow hssfHeader = sheet.createRow(rowIdx);
    HSSFCellStyle cellStyle = wb.createCellStyle();
    cellStyle.setAlignment(HSSFCellStyle.ALIGN_CENTER);
    for (Iterator cells = header.iterator(); cells.hasNext();) {
        HSSFCell hssfCell = hssfHeader.createCell(cellIdx++);
        hssfCell.setCellStyle(cellStyle);
        hssfCell.setCellValue((String) cells.next());
    }
    // Data

    rowIdx = 1;
    for (Iterator rows = data.iterator(); rows.hasNext();) {
        ArrayList row = (ArrayList) rows.next();
        HSSFRow hssfRow = (HSSFRow) sheet.createRow(rowIdx++);
        cellIdx = 0;
        for (Iterator cells = row.iterator(); cells.hasNext();) {
            HSSFCell hssfCell = hssfRow.createCell(cellIdx++);
            hssfCell.setCellValue((String) cells.next());
        }
    }
    Logfile.log("sheetNumber = " + sheetNumber);
    wb.setSheetName(sheetNumber, sheetName);
    try {
        FileOutputStream out = new FileOutputStream(xlsFilename);
        wb.write(out);
        out.close();
    } catch (IOException e) {
        throw new HPSFException(e.getMessage());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:15:09.340

在投射之前，您需要检查单元格值的类别：

```
public static void importDataToExcel(String sheetName, List<String> headers, List<List<Object>> data, File xlsFilename, int sheetNumber)
        throws HPSFException, FileNotFoundException, IOException {

    POIFSFileSystem fs = new POIFSFileSystem();
    Workbook wb;
    try {
        wb = WorkbookFactory.create(new FileInputStream(xlsFilename));
    } catch (InvalidFormatException ex) {
        throw new IOException("Invalid workbook format");
    }
    Sheet sheet = wb.createSheet(sheetName);

    int rowIdx = 0;
    int cellIdx = 0;

    // Header
    Row hssfHeader = sheet.createRow(rowIdx);
    CellStyle cellStyle = wb.createCellStyle();
    cellStyle.setAlignment(HSSFCellStyle.ALIGN_CENTER);
    for (final String header : headers) {
        Cell hssfCell = hssfHeader.createCell(cellIdx++);
        hssfCell.setCellStyle(cellStyle);
        hssfCell.setCellValue(header);
    }
    // Data

    rowIdx = 1;
    for (final List<Object> row : data) {
        Row hssfRow = sheet.createRow(rowIdx++);
        cellIdx = 0;
        for (Object value : row) {
            Cell hssfCell = hssfRow.createCell(cellIdx++);
            if (value instanceof String) {
                hssfCell.setCellValue((String) value);
            } else if (value instanceof Number) {
                hssfCell.setCellValue(((Number) value).doubleValue());
            } else {
                throw new RuntimeException("Cell value of invalid type " + value);
            }
        }
    }
    wb.setSheetName(sheetNumber, sheetName);
    try {
        FileOutputStream out = new FileOutputStream(xlsFilename);
        wb.write(out);
        out.close();
    } catch (IOException e) {
        throw new HPSFException(e.getMessage());
    }
} 
```

我还添加了泛型 - 这使代码更具可读性。此外，您需要尽可能避免使用实际`class`并使用`interface`，例如`List`not`ArrayList`和`Row`not `HSSFRow`。

# function - 如何在 MatLab 中绘制卷积？

> ID：15298058
> 
> 赞同：0
> 
> 时间：2013-03-08T15:56:43.927
> 
> 标签：function, matlab, plot, convolution

谁能向我解释我将如何在 MatLab 中绘制卷积？

我要绘制的函数是 e^(-at)u(t)*u*t)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:01:46.503

Matlab中2个数组的卷积函数是`conv(array1, array2)`。但我不完全理解你试图卷积的数学表达式。

为了得到情节，你会做类似的事情

```
plot(conv(array1, array2)); 
```

要将单位阶跃函数 u(t) 与 u(t)e^(-at) 卷积，您必须创建单位阶跃函数的数组

```
u = ones(1,n); 
```

你还必须创建另一个函数的数组。例如，使用 for 循环

```
e = zeros(1,n);
for i=1:n
  e(i) = u(i)*exp(-a*i)
end 
```

然后对两者进行卷积并绘制。

# c# - 如何以编程方式覆盖 Web.config 中的值

> ID：15298059
> 
> 赞同：0
> 
> 时间：2013-03-08T15:56:45.200
> 
> 标签：c#, .net, web-config, config

我正在与一群人一起开发一个 Web 应用程序，我们的数据库都有不同的连接字符串。

连接字符串存储在我们的源代码控制的 web.config 中，有时人们使用他们的连接字符串检查他们的 web.config，这会弄乱我的环境。

我想使用一个环境变量，如果存在将覆盖我的 web.config 中的连接字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:05:20.653

正如其他人在您的评论中指出的那样，没有简单的方法可以阻止人们更改任何受源代码控制的文件。但是，您可以做的是将**web.config**文件更改为：

```
<connectionStrings configSource="Configs\ConnectionStrings.config" > </connectionStrings> 
```

然后有一个名为**Configs**的文件夹，其中有一个名为**ConnectionStrings.config**的文件，其内容如下：

```
<connectionStrings>
  <add name="YourVersionHere" ... />
</connectionStrings> 
```

这样您就可以在不更改连接字符串的情况下检查/输出**web.config文件（它现在保存在单独的文件中）。**当然，这不会让你出狱，因为他们可以覆盖**ConnectionStrings.config**文件，但它确实允许你打破你的配置，这样你就可以随时了解所有设置但永远不要执行 GET您的**ConnectionStrings.config**文件。

这同样适用于 AppConfig 等。基本上允许您以较小的块而不是在一个地方管理您的配置。

您可以在此处获取更多信息：http: [//msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:10:52.757

您是否可以将连接字符串从应用程序级 web.config 移动到系统级 machine.config 文件？

# php - 在 MySQL 中存储 UTF-8 PHP 数组，无需 serialize() 或 json_encode()

> ID：15298069
> 
> 赞同：1
> 
> 时间：2013-03-08T15:57:35.270
> 
> 标签：php, mysql, arrays

`serialize()`输出不必要的垃圾，如字符串长度和其他东西，这是完全没用的。

```
a:2:{s:10:"SOME VALUE";a:35:{s:36:"VAL1";s:1:"1";s:7: skipped............... 
```

`json_encode()`更好，但仍然会产生垃圾。

```
{"SOME VALUE":{"\u041a\u043e\u0434 \u041c\u0435\u0441\u0442\u0430 \u041f\u043e\u044f\u0432\u043b\u0435\u043d\u0438\u044f":"1","\u0415-\u0414\u0422":"0","\u0420\u0435\u0436\u0438\u043c \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438":"0","\u041c\u0430\u0440\u0448\u0440\u0443\u0442":"0","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439":"0","\u041e\u0442\u0432\. \u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b 
```

为什么我需要所有这些东西而不是可读数组？MySQL 字段已设置为`utf8_unicode_ci`.

结果，我得到了绝对不必要的流量。

我有什么选择而不是手动解析？

代码在这里无关紧要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T16:04:25.610

答案很简短。
不要将序列化的数组存储在数据库中。

即使您认为目前不需要对存储的数据进行任何过滤或关系链接搜索，几天后您就会意识到您需要这样做，但无法区分此 blob 中的最小值。

因此，为数据创建一个常规表并将每个值存储在一个单独的字段中。
您将完全按照您想要的方式获得您的数据 - 健全且安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:05:56.567

PHP 4 和 5 没有内置的 Unicode 支持；在这种情况下，我使用这个函数来反序列化数据。序列化功能工作正常。

```
/**
 * Mulit-byte Unserialize
 *
 * UTF-8 will screw up a serialized string
 *
 * @access private
 * @param string
 * @return string
 */
function mb_unserialize($string) {
    $string = preg_replace('!s:(\d+):"(.*?)";!se', "'s:'.strlen('$2').':\"$2\";'", $string);
    return unserialize($string);
} 
```

来源：[http ://dzone.com/snippets/muli-byte-unserialize](http://dzone.com/snippets/mulit-byte-unserialize)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T16:09:16.000

在 php 5.4 中`json_encode`支持一个额外的选项标志：`JSON_UNESCAPED_UNICODE`. 您可以按如下方式使用它：

```
$encoded = json_encode($array,JSON_UNESCAPED_UNICODE); 
```

这不会转义 utf8 序列（`\u041a`等）。

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

这当然要求您使用 PHP 版本 >= 5.4。

**请注意：作为一般规则，将序列化数据存储在数据库中被认为是不好的做法**

# php - 使用 php 进行 mysql 查询的进度条

> ID：15298071
> 
> 赞同：1
> 
> 时间：2013-03-08T15:57:43.743
> 
> 标签：php, mysql

我正在尝试使用 mysql 查询的迭代来更新进度条，但我无法理解如何更新进度条，以及如何找到已获取的行数，例如：

```
$query = 'SELECT tvshows.genres, tvshows.id_show FROM tvshows where tvshows.genres is not NULL';
$result = mysql_query($query);

$num_rows = mysql_num_rows($result);
echo $num_rows; 
```

this:`echo $num_rows;`是我获取的行数，然后以这种方式迭代结果：

```
while ($db_row = mysql_fetch_assoc($result)) 
{
    //Do seomthing with the row

} 
```

但是我怎么知道我在哪一行获取更新然后进度条？有谁知道一个很好的教程或示例代码来做一个进度条？我发现了这个：[http ://w3shaman.com/article/php-progress-bar-script](http://w3shaman.com/article/php-progress-bar-script)

但该示例需要这些：

```
 for($i=1; $i<=$total; $i++){
// Calculate the percentation
$percent = intval($i/$total * 100)."%"; 
```

而且我不知道如何使用php查询的结果，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:08:43.337

正如评论中提到的，如果您必须使用进度条，它应该是一个非常慢的查询。

如果是，您可以在循环中添加一个简单的计数器：

```
$i = 0;
while ($db_row = mysql_fetch_assoc($result)) 
{
    $i++;
    $percent = intval($i/$num_rows * 100)."%";

    //Do seomthing with the row

} 
```

然后按照文章中提到的做。

# .net - 创建相等比较器时，ReSharper 不显示基础类的属性

> ID：15298073
> 
> 赞同：0
> 
> 时间：2013-03-08T15:57:45.183
> 
> 标签：.net, visual-studio, resharper, iequalitycomparer

我的设置如下：

我有基于我的数据库的 T4 模板生成的 POCO 类。我的域模型继承自这些 POCO。基本上 POCO 模型就在那里，因此当我更改数据库时，我不必一直手动更新模型（我们使用 Dapper 作为我们的 ORM）。

我的问题是：

当我尝试使用 ReSharper 为我的域模型生成相等比较器时，resharper 接口不包含来自底层 POCO 类的属性，只包含来自域模型的属性。为什么会发生这种情况，就我而言，域模型从 POCO 继承，因此具有 POCO 的所有属性？

这是我的 POCO 课程：

```
 namespace Models.Database
 {
      [Table("Restaurants")]
      public abstract class Restaurant
      {
           [Key]
           public virtual int Id { get; set; }
           public virtual string RestaurantName { get; set; }
           public virtual int? PreferredDayOfWeek { get; set; }
           public virtual int? RestaurantTypeId { get; set; }
      }
 } 
```

然后我的域模型是：

```
 public class Restaurant : Models.Database.Restaurant
 {
      public virtual RestaurantType RestaurantType { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:47:39.487

这是已知问题，R# 8.0 的计划功能，抱歉 :(

# javascript - KnockoutJS：可写计算的可观察对象不更新

> ID：15298081
> 
> 赞同：0
> 
> 时间：2013-03-08T15:58:06.290
> 
> 标签：javascript, asp.net, knockout.js

我有以下代码，我试图使用可写的计算 observable 来验证用户输入，并自动拒绝无效输入。这只是一些测试代码，我试图阻止用户从文本中删除逗号字符。如果用户删除逗号字符，我会尝试将编辑器重新绑定到先前的值以覆盖最近的更改。这可能使用可写计算域吗？我遇到的问题是，可写计算绑定仅在我加载页面时触发（在手动设置 ValidText 属性之后）。但是，当用户在编辑器中键入内容时，我无法触发它。

代码：

```
<script type="text/javascript">

    var model = null;

    function EditModel() {

        this.Count = 2;

        var self = this;

        this.ExistingValue = ko.observable("");

        this.ValidText = ko.computed({
            read: function () {
                return self.ExistingValue();
            },
            write: function (text) {
                if (text.split(',').length === self.Count) {
                    self.ExistingValue(text);
                }
            },
            owner: self
        });
    }

    $(document).ready(function () {

        model = new EditModel();

        model.ValidText('@(Model.Text)');

        ko.applyBindings(model);
    });

</script>

<div id="mainContainer">
    <div id="editor" contenteditable="true" class="commentEditBox" data-bind="text: ValidText, valueUpdate: 'afterkeydown'" ></div>
</div> 
```

最终采用自定义绑定的想法并将代码转换为以下内容：

```
<script type="text/javascript">

    var model = null;

    ko.bindingHandlers.customEditorBinding = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

            $(element).on('keydown', function () {
                var observable = valueAccessor();
                observable($(this).text());
            });
        },
        update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
            var text = ko.utils.unwrapObservable(valueAccessor());

            if (text.split(',').length === model.Count) {
                model.ValidText(text);
                model.PreviousText = text;
                $(element).text(text);
            }
            else {
                 model.ValidText(model.PreviousText);
                $(element).text(model.PreviousText);
            }
        }
    };

    function EditModel() {

        var self = this;

        self.Count = 2;

        self.ValidText = ko.observable("");

        self.PreviousText = null;
    }

    $(document).ready(function () {

        model = new EditModel();

        model.ValidText('This is,a test');

        ko.applyBindings(model);
    });

</script>

<div id="mainContainer">
    <div id="editor" contenteditable="true" class="commentEditBox" data-bind="customEditorBinding:ValidText" ></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:04:05.910

好的，混淆了 self 和 this 的使用，你已经使用文本将它绑定到一个 div，并且你试图让它在值发生变化时更新。该 html 元素没有任何价值，所以这就是它没有触发的原因。

查看[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)并将您的写入逻辑移动到它的更新方法中。

```
ko.bindingHandlers.yourBindingName = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // This will be called when the binding is first applied to an element
        // Set up any initial state, event handlers, etc. here
    },
    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // This will be called once when the binding is first applied to an element,
        // and again whenever the associated observable changes value.
        // Update the DOM element based on the supplied values here.
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:04:24.773

在你的 write 方法中，添加这个 else 子句：

```
else { self.ValidText.notifySubscribers(self.ExistingValue()); } 
```

这将强制文本框更新回原始值。

# crystal-reports - 在字段顶部画一条线

> ID：15298083
> 
> 赞同：0
> 
> 时间：2013-03-08T15:58:07.257
> 
> 标签：crystal-reports

![在此处输入图像描述](../Images/f7857b45dbe0520d072f9f70853b0c97.png) 我正在为一件看起来非常简单的事情而苦苦挣扎。

我有一个带有一些颜色集和一条线的文本字段。我希望该行位于文本框上方。但它已经落后了，我找不到任何改变它的方法。在每个应用程序中都有类似“带到前面”“带到后面”的内容，但这里没有。也没有透明度选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:12:25.893

您通常无法控制行 z 顺序，但您可以右键单击文本对象并选择`Move -> To Back`。适用于 VS 2005 或更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-29T17:44:02.157

我正在努力解决同样的问题。为了解决这个问题，我设置了一个**盒子**对象作为背景。然后可以通过禁用格式对象上的背景复选框在**框上插入文本或线条对象。**

[![在此处输入图像描述](../Images/0e354b350a17d28def56578e44e907cc.png)](https://i.stack.imgur.com/uKe00.png)

希望能帮助到你。

# jquery - 如果选项不存在，则附加到选择列表

> ID：15298088
> 
> 赞同：5
> 
> 时间：2013-03-08T15:58:27.383
> 
> 标签：jquery

仅当所选选项不存在时，我才想附加到选择列表中。目前，我有这个：

```
$('#columnsAvailable').append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>"); 
```

有人可以帮我插入一个检查“$(this).val()”是否已经存在的语句，我不想​​插入重复值吗？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T16:00:42.047

就像是

```
var optionExists = ($('#columnsAvailable option[value=' + $(this).val() + ']').length > 0);

if(!optionExists)
{
    $('#columnsAvailable').append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");
} 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:13:13.270

你可以试试这样的

```
//get all the elements in an array
var values = $('#columnsAvailable').children('option').map(function(i, e){
    return e.value || e.innerText;
}).get();

//check if new element exists in the array    
if( $.inArray($(this).val(), values) > -1 ) {
    $('#columnsAvailable').append(
        "<option value='" + $(this).val() + "'>" + $(this).text() + "</option>"
    );
} 
```

# d3.js - d3.sparql - 如何直接从 D3js 查询 SPARQL 端点？

> ID：15298091
> 
> 赞同：11
> 
> 时间：2013-03-08T15:58:43.563
> 
> 标签：d3.js, sparql

我喜欢从 SPARQL 端点获取基于 RDF 数据的视觉效果。获得一个额外的外部数据加载器将是对 d3 的一个很好的补充，它可以通过发出 SPARQL 查询来提取数据。

已经有人在做这样的事情了吗？对这样的企业有什么建议吗？还是我忽略的一个完全明显的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-14T18:55:39.500

There is the d3sparql project that actually enables to create d3 visualizations from the results of a SPARQL query.

Here is how it self-describes:

> JavaScript natually fits for querying a SPARQL endpoint which provides a REST service returning the result in the JSON format. The d3sparql.js library provides functions executing a SPARQL query by Ajax call (XMLHttpRequest) and visulaizing results by the D3 library. Basically, this library transforms the SPARQL Query Results JSON Format (aka. application/sparql-results+json) into several JSON formats which major D3 layouts can accept. Many of the examples are borrowed from bl.ocks.org and bost.ocks.org.

Home page: [http://biohackathon.org/d3sparql/](http://biohackathon.org/d3sparql/)

Source code: [https://github.com/ktym/d3sparql](https://github.com/ktym/d3sparql)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T12:24:36.533

首先，我也是！我绝对希望在 d3 中看到 SPARQL 查询功能（实际上是任何 RDF 或 SPARQL 功能）。**据我所知，不存在这样的情况。**

**所以现在**：看一下[这个问题](https://stackoverflow.com/questions/7163639/how-to-use-json-output-from-external-sparql-request-directly-from-browser)，了解如何**使用 jQuery 访问 SPARQL 端点**。

**此外**，您可能想了解更多关于**同源策略**以及**如何使用 JSONP 规避它的**信息。[IBM developerWorks 上](https://www.ibm.com/developerworks/library/wa-aj-jsonp1/)的这篇文章是一个很好的介绍。

**看看 sgvizler.js ( 源代码 ) 的实现**可能**会[很](https://code.google.com/p/sgvizler/source/browse/trunk/sgvizler.js "sgvizler.js")有趣[。](https://code.google.com/p/sgvizler/)**

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-01T14:54:15.603

我终于开始创建一个[d3-sparql](https://github.com/zazuko/d3-sparql)插件，它是根据 d3 v4 插件架构构建的。（也提供[d3 v3 版本。）](https://github.com/zazuko/d3-sparql/tree/v3)

[下载](https://github.com/zazuko/d3-sparql/releases/latest)插件并将其添加到您的项目中：

```
<script src="d3-sparql.min.js"></script> 
```

指定*端点*和 *query" 以获取准备用于 d3 可视化的*数据：*

```
d3.sparql(endpoint, query, function (error, data) {
  console.log(data);
} 
```

该插件还确实将 RDF 数据类型转换为 JavaScript 等效项`Date()`和`Number()`.**

# .net - .NET：COM 包装器的命名空间/程序集设计

> ID：15298092
> 
> 赞同：1
> 
> 时间：2013-03-08T15:58:48.033
> 
> 标签：.net, architecture

我有一个带有命名空间的 .NET 项目`MyCompany.InformixConnector`。我添加了一个 COM 包装器作为单独的项目/程序集，它只会部署到少数客户端。我正在为如何组织项目/程序集而苦苦挣扎。

我目前有 2 个程序集：`MyCompany.InformixConnector`和`MyCompany.InformixConnector.Com`

该`.Com`程序集引用了“核心”程序集。但是，让较低级别的程序集引用更高级别的程序集感觉是错误的。

我想到了两种选择：

1.  重命名核心程序集，使它们处于同一级别： `MyCompany.InformixConnector.Core`和`MyCompany.InformixConnector.Com`
2.  将 COM 项目放在不同的命名空间中，例如`MyCompany.InformixConnectorForCom`

我想基本问题是：COM 包装器是否应该与它所包装的代码位于同一个命名空间中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:18:02.837

[MS 命名指南](http://msdn.microsoft.com/en-us/library/893ke618%28v=vs.71%29.aspx)指出，嵌套命名空间依赖于更高级别的命名空间没有任何问题：

> 嵌套命名空间应该依赖于包含命名空间中的类型。例如，System.Web.UI.Design 中的类依赖于 System.Web.UI 中的类。但是，System.Web.UI 中的类不依赖于 System.Web.UI.Design 中的类。

相同的逻辑可以应用于程序集命名。在您的特定情况下，我会将核心功能放入`MyCompany.InformixConnector.Core`名称空间和程序集中，这将明确指示常见的东西在哪里。

然后为互操作性创建一个命名空间，`MyCompany.InformixConnector.Interop`并将处理 com 和其他 3d 派对内容所需的所有通用内容放在那里。如果没有这样的东西，你可以跳过它并根据需要添加它。

然后为您的 com 包装器创建命名空间和程序集`MyCompany.InformixConnector.Interop.Com`。该程序集将引用`MyCompany.InformixConnector.Core`和`MyCompany.InformixConnector.Interop`（如果需要）。

# php - preg_replace 非单词字符正在替换 UTF-8 字符

> ID：15298093
> 
> 赞同：2
> 
> 时间：2013-03-08T15:58:50.423
> 
> 标签：php, utf-8, preg-replace

我有一个奇怪的问题，preg_replace 在不同的服务器上有不同的结果。在我的本地 wampserver 上执行以下代码时：

```
echo preg_replace('/[\W]+/u', '-', "blāh bl*h"); 
```

以下是输出：

```
"blāh-bl-h" 
```

在我的远程服务器上执行时，输出以下内容：

```
"bl-h-bl-h" 
```

“ā”也被替换。

本地wampserver上的php安装是5.3.13，服务器上是5.3.3-7+squeeze15。这是PHP版本的东西吗？

# node.js - 具有节点和连接的静态安全服务器

> ID：15298095
> 
> 赞同：1
> 
> 时间：2013-03-08T15:59:00.127
> 
> 标签：https, 服务器, node.js, connect, 节点, node.js

我需要一个静态[https](/questions/tagged/https "显示标记为“https”的问题") [服务器](/questions/tagged/server "显示标记为“服务器”的问题")。我选择[node.js](/questions/tagged/node.js "显示标记为“node.js”的问题")是因为它的可移植性。通过这种方式，我可以`.js`在 repo 中保存一个脚本，并让服务器在 windows 和 linux 机器上轻松运行。

经过一番研究，我最终使用[connect](/questions/tagged/connect "显示标记为“连接”的问题")得到了以下解决方案：

```
var fs = require('fs');
var connect = require('connect');

var options = {
  key: fs.readFileSync('ryans-key.pem'),
  cert: fs.readFileSync('ryans-cert.pem')
};
connect(options, connect.logger() , connect.static(__dirname))
    .listen(443); 
```

[使用本指南](http://nodejs.org/docs/v0.4.9/api/tls.html#tLS_)生成自签名证书的位置。不幸的是，这个漂亮的[节点](/questions/tagged/node "显示标记为“节点”的问题")脚本无法正常工作。确实，我`107`在 chrome 上遇到了错误，并且 firefox 出现“连接被中断”错误。

为了让简单的服务器正常工作，此设置缺少什么？

* * *

### 注释（回复评论）

*   为什么我说 node 是可移植的：与 apache 或 nginx 等其他 Web 服务器相比，我可以在 repo 根目录中保留一个简单的脚本，而不是文件系统中某处的配置文件。这种配置文件的位置会在不同的系统之间改变

*   为什么我需要一个安全级别：因为某些内容依赖于其他内容，如果源域不安全，这些内容将不被允许（异步）

*   证书是必需的，但您始终可以出于开发目的签署自己的证书，并将其与服务器脚本一起保存在 repo 中

# android - 如何编辑位于 Android 应用程序内部存储中的文件？

> ID：15298100
> 
> 赞同：0
> 
> 时间：2013-03-08T15:59:12.083
> 
> 标签：android, storage, internal

我想在内部存储中创建一个文件并使用它来修改 Android 应用程序的内容。

我的问题是我想继续访问这个文件以便随时编辑它。

尽管我进行了所有的搜索，但我没有找到任何方法来做到这一点。

如果你们中的任何人能提供帮助，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:15:24.130

这个答案取自[这里](https://stackoverflow.com/questions/3551821/android-write-to-sd-card-folder)，是[Shade](https://stackoverflow.com/users/361230/shade)找到的。

```
File sdCard = Environment.getExternalStorageDirectory();
File dir = new File (sdcard.getAbsolutePath() + "/dir1/dir2");
dir.mkdirs();
File file = new File(dir, "filename");

FileOutputStream f = new FileOutputStream(file);
... 
```

* * *

如果您有敏感数据并希望将其保存到内部存储中，您可以按照[本](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)教程进行操作。

# c - execvp(grep) 后失去控制

> ID：15298101
> 
> 赞同：0
> 
> 时间：2013-03-08T15:59:13.417
> 
> 标签：c, shell, grep, execvp

我正在尝试编写一个小程序来通过 execvp 运行 grep。[这与我在这里](https://stackoverflow.com/questions/15262446/losing-control-after-fork)遇到的问题基本相同，但在这种情况下，它仅在我运行 grep 时发生（与 echo、ls、emacs 等都工作正常相反）并且我更改了不正确的 wait() （我相信）。我也尝试在我想查找的文本上使用引号

我的代码：

```
int main(void) {

  int i;
  char inputprogram[50];
  char vars[50] = "a search.txt";
  printf("input grep\n");
  fflush(stdout);
  fgets(inputprogram,50,stdin);
  for(i = 0; i < 50; i++){
            if(inputprogram [i] == '\n' ){
                inputprogram[i] = 0;
            }
        }
  char *arg [] = {inputprogram, vars , NULL};
  printf(">%s<\n", arg[1]);
  printf(">%s<\n", arg[0]);

  int status = 0;
  pid_t child;

  (child = fork());
  if(child == 0){
    printf("execute\n");
    execvp(inputprogram,  arg);
    exit(1);
  }
  else{
    printf("parent waiting...\n");
    wait(&status);
  }
  return EXIT_SUCCESS;
} 
```

搜索.txt：

```
a
b
c
abc 
```

输入/输出（# 在我输入的行前面，虽然不是输入的一部分）：

```
shell> # ./work
input grep
# grep
>a search.txt<
>grep<
parent waiting...
execute
# a;dlghasdf
# go back
# :( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:50:24.700

函数 execvp 期望每个参数作为传入数组中的单独参数。您将“vars”作为单个参数传递，其中包含空格。Grep 正在等待来自标准输入（此处为控制台）的输入，并正在搜索包含“a search.txt”的行。以下程序可以满足您的期望。

```
#include "unistd.h"
int main(void) 
{
  char * executable = "grep";
  char *arg[] = { executable, "a","search.txt", NULL };
  execvp(executable, arg);
  return 0;
} 
```

通过将搜索到的字符串作为自己的参数传递，grep 将列表中的下一个参数视为要搜索的文件。

这是该程序为我所做的：

```
ericu@eric-phenom-linux:~$ gcc -o execgrep /home/ericu/execgrep.c 
ericu@eric-phenom-linux:~$ ./execgrep 
a
abc
ericu@eric-phenom-linux:~$ cat search.txt 
c
b
a
abc
ericu@eric-phenom-linux:~$ 
```

修改示例程序以反映您当前正在执行的操作

```
#include "unistd.h"
int main(void) 
{
   char * executable = "grep";
   char *arg[] = { executable, "a search.txt", NULL };
   execvp(executable, arg);
   return 0;
} 
```

导致程序期望来自标准输入的输入。

```
ericu@eric-phenom-linux:~$ echo -e "Review the man page from proper usage of execvp.a search.txt\nThis line does not show up in the output" | ./execgrep 
Review the man page from proper usage of execvp.a search.txt
ericu@eric-phenom-linux:~$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:17:35.243

获得已启动应用的退出状态后

```
wait(&status); 
```

解释它，使用 WIFEXITED 宏，

```
if ( WIFEXITED (status) )
    printf("App exit status = %u ",WEXITSTATUS(status));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:22:52.413

在处理输入/输出之前，请确保您的程序正常工作。这是一个重现错误的小程序：

```
int main(void) 
{
  char *arg[] = { "grep", "a search.txt", NULL };
  execvp("/bin/grep", arg);
  return EXIT_SUCCESS;
} 
```

但是，如果没有第一个字符串`arg`，它似乎可以工作：

```
int main(void) 
{
  char *arg[] = { "a search.txt", NULL };
  execvp("/bin/grep", arg);
  return EXIT_SUCCESS;
} 
```

但是，我不知道为什么它取决于`argv[0]`.

# bash - 我不小心创建了一个名为 / 的文件和另一个调用 --reporter，如何删除它们？

> ID：15298107
> 
> 赞同：3
> 
> 时间：2013-03-08T15:59:36.947
> 
> 标签：bash, shell

我不小心创建了一个名为 / 的文件和一个名为 --reporter=test 的文件，现在我无法删除它们，尝试删除 --reporter 文件会导致 rm: 非法选项 --

我没有尝试删除那个叫/我太害怕了，救命！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T16:02:02.233

```
rm ./--reporter=test 
```

应该摆脱第一个......我不确定“/”......我自己似乎无法创建一个。你是怎么做到的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-12T14:11:32.047

我实际上会这样说，以防它对任何人有帮助：

在stackoverflow浏览了大约15分钟后解决了创建文件夹的错误`~`，我记得有一个鼠标这样的东西，然后去文件夹删除它。

当然，不能在服务器上工作。

# highcharts - 缩放后highcharts工具提示不起作用

> ID：15298113
> 
> 赞同：1
> 
> 时间：2013-03-08T15:59:49.230
> 
> 标签：highcharts

放大后，highcharts 列范围工具提示出现问题。基本上在我在列范围图表上放大 (zoomType:'xy') 之后，对于某些列，工具提示会显示，而另一些列的工具提示只是拒绝弹出. 我尝试对其进行调试，但未调用 tooltip.positioner 函数。

[试试看](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/columnrange/)。_

复制以下内容并运行它。

```
$(function () {
    window.chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'columnrange',
            inverted: true,
            zoomType: 'xy'
        },

        xAxis: {
            categories: ['Jan', 'Feb', 'Mar']
        },

        legend: {
            enabled: false
        },

        series: [{
            name: 'Temperatures',
            data: [
                [-9.7, 9.4],
                [-8.7, 6.5],
                [-3.5, 9.4]
            ]
        }]
    });
}); 
```

现在尝试缩放，您会注意到有时某些特定列上的工具提示不会显示。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-20T17:59:51.707

我最近遇到了这个问题，并通过在**tooltip中设置****followPointer**属性来解决：

 **```
tooltip : {
    followPointer: true
} 
```

参考：[http ://api.highcharts.com/highcharts#tooltip.followPointer](http://api.highcharts.com/highcharts#tooltip.followPointer)**

# mysql - 为什么我在 MYSQL 查询中得到多行？

> ID：15298114
> 
> 赞同：3
> 
> 时间：2013-03-08T15:59:52.700
> 
> 标签：mysql, sql, random, count, floor

我正在尝试通过使用主键 _id 和以下查询从表（用户）中检索随机行。

```
SELECT * 
FROM   user 
WHERE  _id IN (SELECT Floor(1 + ( Rand() * ( Count(_id) - 1 ) )) 
               FROM   user); 
```

没有从表中删除任何行，但我（不一致地）返回了多行......

我觉得这很神奇，因为子查询的任何结果肯定会返回一个整数，它针对主键.....应该始终只有 1 条记录！

我想使用一个查询，我可能会使其成为一个准备好的语句，并且我没有使用 LIMIT 子句，因为我不能使用@variables 来选择随机行。

我的 MySQL 欢迎声明告诉我我的版本如下： 服务器版本：5.5.29-0ubuntu0.12.04.2 (Ubuntu)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:06:27.697

如何`ORDER BY RAND() LIMIT 1;`在您的查询中使用而不是`where _id IN (select FLOOR(1+(RAND()*(COUNT(_id)-1))) from user);`

您得到多行原因（从用户那里选择 FLOOR(1+(RAND()*(COUNT(_id)-1)))）将在“用户”表中为您返回一个不同的值。那是因为 RAND 位。

`select FLOOR(1+(RAND()*(COUNT(_id)-1))) from user`自行运行，您将看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:10:53.523

随机部分每行被评估一次，所以有时你会得到很多行，有时你什么也得不到。简单快速的使用和等值连接和限制

```
SELECT 
    * 
FROM 
    user 
WHERE 
    _id > (
        SELECT 
            FLOOR(1+(RAND()*(max(_id)-min(_id)))) 
        FROM 
            user
    ) LIMIT 1
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:13:41.480

```
select * 
from user join (select FLOOR(1+(RAND()*(COUNT(_id)-1))) as _id from user) as Temp
on user._id=Temp._id 
```

小提琴 - [http://sqlfiddle.com/#!2/2fda3/11](http://sqlfiddle.com/#!2/2fda3/11)

# alfresco - 露天无法启动

> ID：15298117
> 
> 赞同：1
> 
> 时间：2013-03-08T16:00:03.830
> 
> 标签：alfresco, alfresco-share

只需安装一个全新的 alfresco，共享应用程序就可以启动，但 alfresco repo 不能。我在 BE 中收到以下错误：

```
PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.alfresco.web.app.ContextLoaderListener
org.alfresco.error.AlfrescoRuntimeException: 02080001 Keystores are invalid
    at org.alfresco.encryption.EncryptionChecker$1.execute(EncryptionChecker.java:71
........

Caused by: org.alfresco.error.AlfrescoRuntimeException: 02080000 Failed to create key: metadata
 in key store: 
   Location: /srv/alfresco/alf_data/keystore/keystore
   Provider: null
   Type:     JCEKS
    at org.alfresco.encryption.AlfrescoKeyStoreImpl.createKey(AlfrescoKeyStoreImpl.java:644)
    at org.alfresco.encryption.AlfrescoKeyStoreImpl.validateKeys(AlfrescoKeyStoreImpl.java:890)
    at org.alfresco.encryption.AlfrescoKeyStoreImpl.validateKeys(AlfrescoKeyStoreImpl.java:187)
    at org.alfresco.encryption.KeyStoreChecker.validateKeyStores(KeyStoreChecker.java:47)
    at org.alfresco.encryption.EncryptionChecker$1.execute(EncryptionChecker.java:66)
    ... 28 more
Caused by: java.lang.NullPointerException
    at org.alfresco.encryption.AlfrescoKeyStoreImpl.getSecretKey(AlfrescoKeyStoreImpl.java:755)
    at org.alfresco.encryption.AlfrescoKeyStoreImpl.createKey(AlfrescoKeyStoreImpl.java:633)
    ... 32 more 
```

我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-07-03T14:12:44.747

在最近的版本中，密钥库现在存储在战争中，在类路径中，而不是在 alf_data 中。现在的默认值：dir.keystore=classpath:alfresco/keystore

因此，只需在您的 alfresco-global.properties 中注释 dir.keystore 行就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:45:47.987

我希望您删除**alf_data**和您的**alfresco 数据库**并重新创建。

它们都相互同步，因为 alf_data 存储 bin 文件，其位置保存在数据库中。

并检查这些设置是否在 alfresco-global.properties 中正确定义。

* * *

**保留密钥库**

如果要在删除后保留密钥库，可以将其保留在 alf_data 之外的任何位置。我的意思是如果您删除密钥库位置

```
dir.keystore=${dir.root}/keystore 
```

从`alfresco-global.properties`.

密钥库将在定义的***默认密钥库位置*** 下创建。`dir.keystore=classpath:alfresco/keystore``repository.properties``<apache-tomcat>\webapps\alfresco\WEB-INF\classes\alfresco`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T06:22:10.020

谢谢大家的回复。最后唯一有效的是将扩展战争下的密钥库文件夹复制到自定义目录。别的什么都行不通。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T14:04:46.607

尝试删除`/srv/alfresco/alf_data`目录并重新创建它。然后创建`/srv/alfresco/alf_data`- 并确保 tomcat/java 可以使用它（`sudo chown tomcat7:tomcat7 /srv/alfresco/alf_data`如果您完全按照该教程进行操作）。

或者，您可以将`dir.root`指令放在`<TOMCAT_HOME>/shared/classes/alfresco-global.properties`文件中并将 alf_data 放在其他位置。

# time-series - 使用 R 中的 y 轴数据提取 x 轴值

> ID：15298120
> 
> 赞同：1
> 
> 时间：2013-03-08T00:24:43.620
> 
> 标签：time-series, data-mining, missing-data, interpolation

我有一个这种格式的时间序列数据集：

```
 Time Val1 Val2
     0 0.68 0.39
    30 0.08 0.14
    35 0.12 0.07
    40 0.17 0.28
    45 0.35 0.31
    50 0.14 0.45
   100 1.01 1.31
   105 0.40 1.20
   110 2.02 0.57
   115 1.51 0.58
   130 1.32 2.01 
```

使用这个数据集，我想提取（而不是预测）FC1=1 和 FC2=1 的时间。这是我用要提取的注释点创建的图。

![在此处输入图像描述](../Images/403d5b85b820ccb3db6d77b49c8dddda.png)

我正在寻找一种使用或函数来插值/截取以提取值的解决方案。例如，如果我在倍数变化 1 处画一条直线（比如在 y 轴上），我想提取 X 轴上直线相交的所有点。

期待您的建议并提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:42:52.200

您可以使用`approxfun`进行插值并`uniroot`找到单根（线交叉的地方）。您需要多次运行 uniroot 才能找到所有交叉点，该`rle`功能可能有助于选择起点。

数据中的 FC 值永远不会接近 1，更不用说交叉了，因此您必须拥有比显示的更多的数据，或者意味着不同的值。

如果您可以提供更多详细信息（可能包括显示您想要的图表），那么我们可能会提供更详细的帮助。

**编辑**

好的，这里有一些 R 代码可以找到线交叉的位置：

```
con <- textConnection('           Time Val1 Val2
         0 0.68 0.39
        30 0.08 0.14
        35 0.12 0.07
        40 0.17 0.28
        45 0.35 0.31
        50 0.14 0.45
       100 1.01 1.31
       105 0.40 1.20
       110 2.02 0.57
       115 1.51 0.58
       130 1.32 2.01')

mydat <- read.table(con, header=TRUE)

with(mydat, {
    plot( Time, Val1, ylim=range(Val1,Val2), col='green', type='l' )
    lines(Time, Val2, col='blue')
})
abline(h=1, col='red')

afun1 <- approxfun( mydat$Time, mydat$Val1 - 1 )
afun2 <- approxfun( mydat$Time, mydat$Val2 - 1 )
points1 <- cumsum( rle(sign(mydat$Val1 - 1))$lengths )
points2 <- cumsum( rle(sign(mydat$Val2 - 1))$lengths )

xval1 <- numeric( length(points1) - 1 )
xval2 <- numeric( length(points2) - 1 )

for( i in seq_along(xval1) ) {
    tmp <- uniroot(afun1, mydat$Time[ points1[c(i, i+1)] ])
    	xval1[i] <- tmp$root
}

for( i in seq_along(xval2) ) {
    tmp <- uniroot(afun2, mydat$Time[ points2[c(i, i+1)] ])
    	xval2[i] <- tmp$root
}

abline( v=xval1, col='green' )
abline( v=xval2, col='blue') 
```

# entity-framework - 实体框架 5：使用代码优先创建集合

> ID：15298122
> 
> 赞同：0
> 
> 时间：2013-03-08T16:00:25.180
> 
> 标签：entity-framework, asp.net-mvc-4, ef-code-first, entity-framework-5

我是代码第一范式的新手，所以请多多包涵。我无法从我的实体类中获取在我的数据库上创建的基元或自定义类的集合/列表/数组。因此，我无法正确地为表播种。没有错误，只需获取一个包含除我的集合之外的所有属性的实体表。我正在使用 EF5、VS2010、MVC4 和 SqlExpress。我究竟做错了什么？

**我的实体类：**

```
public class MyEntity
{    
    public int MyEntityID { get; set; } // GOOD
    public string Property1 { get; set; }  // GOOD
    public bool Property2 { get; set; }  // GOOD
    public IList<CustomClass> CustomClassList { get; set; }  //BAD, NOT CREATED ON DB
    public CustomClass[] CustomClassArray { get; set; }  //BAD, NOT CREATED ON DB
} 
```

**我的自定义类：**

```
[ComplexType]
public class CustomClass
{
    public string Title { get; set; }
} 
```

**我的配置/迁移类**

```
public class Configuration : DbMigrationsConfiguration<MyContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = true;
    }

    protected override void Seed(MyContext context)
    {
        context.MyEntity.AddOrUpdate(x => x.MyEntityID,
             new MyEntity()
             {
                 Property1 = "abc",
                 Property2 = "xyz",
                 CustomClassList = new List<CustomClass> {new CustomClass{Title="Help"}}
             }
        context.SaveChanges();       
    }
} 
```

**我的 Global.asax.cs Application_Start() 方法**

```
protected void Application_Start()
{
    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    AuthConfig.RegisterAuth();
    SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, Configuration>());
} 
```

当我尝试创建一个新数据库时，我得到了相同的结果：

```
<!--NO LUCK-->
<add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS2;Initial Catalog=TESTDB_2;Integrated Security=SSPI" providerName="System.Data.SqlClient" />   
<!--NO LUCK-->
<add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS2;Initial Catalog=TESTDB_3;Integrated Security=SSPI" providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:27:41.353

实体框架不支持原始或复杂类型的集合。如果您想要一个集合，它必须是实体的集合（即它们需要具有关键属性）。如果您有一个实体集合 - 在最简单的情况下 - 将被建模为一个单独的表，并且将根据需要创建适当的外键（取决于关系的基数）。在您的情况下， CustomClass 被忽略，因为它不是实体并且在集合中使用（也被忽略，因为它不是实体类型的集合）。CustomClassArray 被忽略，因为根本不支持数组，因为您无法在不重新分配数组的情况下添加/删除项目。

# php - 你如何将变量传递给javascript并从php返回？

> ID：15298124
> 
> 赞同：0
> 
> 时间：2013-03-08T16:00:29.593
> 
> 标签：php, javascript, html, variables

```
//Javascript
function updateStudentAttendance(event)
  {
    if ($(this).hasClass('here')) {
  $(this).removeClass('here');
  $(this).addClass('absent');
  var schoolId = $(this).children('p').attr('id');
  var studentId = $(this).attr('id');
  var classId = document.getElementById("classId").value;
  postAttendance(studentId, schoolId, classId, 'Absent');
}

function postAttendance(studentId, schoolId, classId, attendanceEvent)
{
  $.post('post_attendance.php', {
  'studentId': studentId,
  'schoolId': schoolId,
  'event': attendanceEvent,
  'classId': classId
}, function(data) {
 // alert(data);
});
}

//php code looks like this:
<?php
    print sprintf('<div id="%s" class="student span2 well well-small %s">
        <input type="hidden" id="classId" name ="classId" value="%s">'
        , $student->getId(), $class, $classId);
    print '<img src="img/userp.png" style="width: 100%; text-align: center;">';
    print sprintf('<p id="%s" style="text-align: center; font-size: 12px;">%s %s'
        , $_GET['schoolId'], $student->getFirstName, $student->getLastSurname());               
    print '</p>';
    print '</div>';
?> 
```

这就是我使用的代码，它从 id 中提取信息，我必须添加一个隐藏元素来获取 classId。然后我在修改后将其发布回来，以使用新信息更新数据库。我觉得这是一种非常奇怪的方法，并且希望有一个更好的解决方案来传递这些变量。

请让我知道一个更好的方法来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:05:25.007

## 到 PHP

使用 jquery ajax 或使用表单发布

## 到 JS

使用带有 json 编码值的隐藏输入字段（如果数据结构复杂）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:15:29.347

您可以使用隐藏的输入字段，从而存储编码的 json。

```
$data = array(
    "key1" => "value1",
    "key2" => "value2"
);
$input = "<input type=\"hidden\" id=\"storage\" value=\"%s\" />";
printf($input, htmlspecialchars(json_encode($data))); 
```

在 jQuery 上

```
var storage = $.parseJSON($("#storage").val()); 
```

另一种方法是使用`data`属性，这些属性可以使用`$("#element").data()`.

做一些很酷的改变：

```
storage["key1"] = "value3"; 
```

回到 PHP：

```
$.post("url.php", storage, function(){
   alert("Alright, bro");
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:09:04.867

我认为您可以使用两种结构。

一种是[HTML5`dataset`](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)，它允许您为 Web 应用程序存储不属于标记语义的自定义私有数据。这比使用更灵活，`id`因为您只能拥有一个`id`并且它还有其他用途。你可以有多个`class`es，但这也很难使用。

第二个是[`hidden`](http://www.w3.org/TR/html5-author/editing.html#the-hidden-attribute)属性，它声明一个元素与页面的当前状态无关/供用户使用。我有时会使用此属性来创建组织与页面标记无关的应用程序数据的元素（我希望这是一个正确的用法，但我并不肯定）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T16:10:05.703

在您的 jQuery [$.post](http://api.jquery.com/jQuery.post/)添加一些 json 数据类型：

**jQuery**

```
 $.post('post_attendance.php', {data:value},
    dataType:"json"
}, function(data) {
   alert(data.error); //will be false
}); 
```

比`post_attendance.php`用 json_encode 回显你的结果：

```
$array = array('response'=>'Some value', error => false);
echo json_encode($array); 
```

# r - 在R中的几列中用冒号分割字符

> ID：15298125
> 
> 赞同：0
> 
> 时间：2013-03-08T16:00:32.623
> 
> 标签：r, strsplit

我有一些数据已经用冒号分隔。我想用冒号分割每列的所有内容。

这是我的数据示例：

```
 V8                        V9                      V10
1 0/0:0,108,255:36:0:0:99  0/0:0,255,255:103:0:0:99 0/0:0,226,255:107:3:0:99
2 1/1:255,69,0:23:23:0:65  1/1:255,159,0:63:62:0:99 0/1:255,0,255:58:25:4:99 
```

我希望它们看起来像：

```
 V8                        V9                      V10
1 0/0 0,108,255 36 0 0 99  0/0 0,255,255 103 0 0 99 0/0 0,226,255 107 3 0 99
2 1/1 255,69,0 23 23 0 65  1/1 255,159,0 63 62 0 99 0/1 255,0,255 58 25 4 99 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:06:35.920

假设您的 data.frame 称为 SODF，请使用`gsub`. `lapply`将允许您将该函数应用于您的所有列`data.frame`（因为 a`data.frame`是`list`R 中的一种特殊类型）：

```
> data.frame(lapply(SODF, function(x) gsub(":", " ", x)))
                       V8                       V9                      V10
1 0/0 0,108,255 36 0 0 99 0/0 0,255,255 103 0 0 99 0/0 0,226,255 107 3 0 99
2 1/1 255,69,0 23 23 0 65 1/1 255,159,0 63 62 0 99 0/1 255,0,255 58 25 4 99 
```

# jira - 如何显示或报告来自多个 JIRA 过滤器的问题数量？

> ID：15298126
> 
> 赞同：1
> 
> 时间：2013-03-08T16:00:34.913
> 
> 标签：jira

我们使用 JIRA 来跟踪问题。我必须制作一份关于不同项目组中未解决问题数量的月度报告。我为每个组创建了过滤器。我想创建一个仪表板，显示：

1.  每个过滤器报告的问题数量，最好不显示问题列表。
2.  各种过滤器集的总计。

最好的方法是什么？可以在不编写我自己的报告或小工具的情况下完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-04T18:27:02.810

我有一个类似的问题。对于那个问题，我创建了一个函数来获取每个 Jira 查询的问题总数，如下所示。

1.  创建一个新的电子表格（在谷歌表格中）

2.  从上到下列出您自己的 Jira 查询/过滤器，不带双引号。

    不用双引号，只用单引号。“ => '</p>

3.  将此电子表格下载/导出为 CSV 文件。

4.  现在回到您的 Jira => 高级搜索页面，然后打开检查和控制台  [https://yourprojectdomainname.atlassian.net/issues/?jql=](https://yourprojectdomainname.atlassian.net/issues/?jql=)

5.  将以下代码复制并粘贴到控制台中。

6.  调用此函数后，将出现“选择文件”输入。

7.  单击“选择文件”输入并选择您刚刚下载的 csv 文件。

8.  选择后，Jira 查询将自动触发并列出问题数量。

完成后，您将能够将它们复制并粘贴到报告电子表格的下一列中。

```
$("#search-header-view").after('<input type="file" id="the-file-input" /><div id="theContainer"></div>');
console.log("Author: MertKGursoy");
function theReader(e) {
  var file = e.target.files[0];
  if (!file) {
    return;
  }
  var reader = new FileReader();
  reader.onload = function(e) {
    var cont = e.target.result;
    theParsed(cont);
  };
  reader.readAsText(file);
}
function theParsed(cont) {
 const json = cont.split(",(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)");
  var theText = JSON.stringify(json);
  theText = theText.replace(/\[/g, "");
  theText = theText.replace(/\]/g, "");
  theText = theText.replace(/\\n/g, "");
  theText = theText.replace(/\\r/g, '", "');
  theText = theText.replace(/\\/g, '"');
  var str = theText;
  var str_array = str.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);
  var theLength = str_array.length + 1;
  for(var i = 0; i < theLength ; i++) {
            delay(i);
  }
  function delay (i) {
        setTimeout(() => {
            str_array[i] = str_array[i].replace(/^\s*/, "").replace(/\s*$/, "");
            var jqlQuery = str_array[i];
            var withoutdoublequotes = jqlQuery.replace(/\"/g, '');
            var text = document.getElementById('advanced-search');
            text.value = withoutdoublequotes;
            var jqlValue = document.getElementById("jql").value;
            $(".aui-button-primary").trigger("click");
            if (withoutdoublequotes) {    
                setTimeout(() => {
                    var resultValue = $('.results-count-total').first().text();
                    if (resultValue) {
                        $("#theContainer").append(resultValue  + '<br>');
                    } else {
                        resultValue = "0";
                        $("#theContainer").append(resultValue  + '<br>');  
                    }
                 }, 3000);
            } else {
                setTimeout(() => {
                    resultValue = "-";
                    $("#theContainer").append(resultValue  + '<br>');                      
                }, 3000);         
            }
        },i * 6000);
 }
}
document.getElementById('the-file-input').addEventListener('change', theReader, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:38:27.843

您可以使用[Jira 的远程 API](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference)进行搜索，[例如](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Query+issues)使用 REST API：

```
curl -D- -u fred:fred -X GET -H "Content-Type: application/json" http://kelpie9:8081/rest/api/2/search?jql=assignee=fred 
```

编写一个 html 页面，对 API 进行 ajax 调用，并在屏幕上显示您需要的任何内容。比使用文本小工具将此页面添加到仪表板。

一种更有效的方法可能是每 5 分钟左右运行一次 cron 作业，创建此页面，将其保存到 Jira 的 web 目录，而不是使用 ajax 调用来获取文件内容并将其显示到屏幕上。如果您选择此解决方案，您可以使用[Jira 的 CLI](https://bobswift.atlassian.net/wiki/display/JCLI/JIRA+Command+Line+Interface)获取统计信息。

# ios - 显示文档目录中的图像

> ID：15298128
> 
> 赞同：0
> 
> 时间：2013-03-08T16:00:40.483
> 
> 标签：ios, objective-c, nsdocumentdirectory, aqgridview

我正在使用以下方法在 AQGridview 中显示图像：

数据模型.m：

```
-(id)initWithCaption:(NSString*)theCaption andImage:(UIImage*)theImage andURLRequest:(NSURLRequest *)theURLRequest
{
    self = [super init];
    if(self)
    {
        self.caption = theCaption;
        self.image = theImage;
        self.myURLRequest = theURLRequest;
    }
    return self;
} 
```

然后：

```
DataModel *appService = [[AppsDocumentService alloc] initWithCaption:theAppName andImage:[UIImage imageNamed:iconIdentifier] andURLRequest:requestObject]; 
```

`iconIdentifier`与应用程序的支持文件夹中的图像匹配的字符串在哪里，例如`@"Icon.png"`

它适用，但仅适用于存储在支持文件/Xcode 项目文件夹中的图像，我希望能够显示应用程序文档目录中的图像。

我尝试了一些变化：

```
iconIdentifier = @"/var/mobile/Applications/28CC364F-0895-4556-9F58-DAB5AB9104A7/Documents/downloads/AppIcons/Icon.png"; 
```

但这行不通。

我希望有人能告诉我是否有办法修改我已经必须显示文档目录中的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:21:29.513

抱歉，伙计们-几乎在我发布问题后就想通了

代替：

```
initWithCaption:theAppName andImage:[UIImage imageNamed:iconIdentifier] andURLRequest:requestObject]; 
```

我需要：

```
initWithCaption:theAppName andImage:[UIImage imageWithData:[NSData dataWithContentsOfFile:iconIdentifier]] andURLRequest:requestObject]; 
```

# android - 使用 jPCT-AE 加载 3d 模型

> ID：15298130
> 
> 赞同：9
> 
> 时间：2013-03-08T16:00:42.510
> 
> 标签：android, eclipse, 3d, loading, jpct

我正在尝试使用[jPCT-AE](http://www.jpct.net/jpct-ae/)在我的应用程序中加载 3d 模型。我通读了几个教程，我想我了解了基础知识，但我还没有成功集成我拥有的 3d 文件。

我正在使用在教程包 com.example.jpct 上找到的代码片段；

```
import java.io.IOException;
import java.io.InputStream;
import java.io.UnsupportedEncodingException;
import java.lang.reflect.Field;

import javax.microedition.khronos.egl.EGL10;
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.egl.EGLDisplay;
import javax.microedition.khronos.opengles.GL10;

import android.app.Activity;
import android.content.res.AssetManager;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.view.MotionEvent;

import com.threed.jpct.Camera;
import com.threed.jpct.FrameBuffer;
import com.threed.jpct.Light;
import com.threed.jpct.Loader;
import com.threed.jpct.Logger;
import com.threed.jpct.Object3D;
import com.threed.jpct.Primitives;
import com.threed.jpct.RGBColor;
import com.threed.jpct.SimpleVector;
import com.threed.jpct.Texture;
import com.threed.jpct.TextureManager;
import com.threed.jpct.World;
import com.threed.jpct.util.BitmapHelper;
import com.threed.jpct.util.MemoryHelper;
import java.io.*;

import com.threed.jpct.*;

import android.content.res.Resources;
import android.opengl.GLSurfaceView.EGLConfigChooser;
import android.opengl.GLSurfaceView.Renderer;
import android.util.Log;

 /**
 * A simple demo. This shows more how to use jPCT-AE than it shows how to write
 * a proper application for Android. It includes basic activity management to
 * handle pause and resume...
 * 
 * @author EgonOlsen
 * 
 */
public class MainActivity extends Activity {

// Used to handle pause and resume...
private static MainActivity master = null;

private GLSurfaceView mGLView;
private MyRenderer renderer = null;
private FrameBuffer fb = null;
private World world = null;
private RGBColor back = new RGBColor(50, 50, 100);

private float touchTurn = 0;
private float touchTurnUp = 0;

private float xpos = -1;
private float ypos = -1;

private Object3D cube = null;
private int fps = 0;

private Light sun = null;

AssetManager assMan;
InputStream is;

private String thingName = "palm-realviz";
private int thingScale = 1;//end 

protected void onCreate(Bundle savedInstanceState) {

    Logger.log("onCreate");

    if (master != null) {
        copy(master);
    }

    super.onCreate(savedInstanceState);
    mGLView = new GLSurfaceView(getApplication());

    mGLView.setEGLConfigChooser(new GLSurfaceView.EGLConfigChooser() {
        public EGLConfig chooseConfig(EGL10 egl, EGLDisplay display) {
            // Ensure that we get a 16bit framebuffer. Otherwise, we'll fall
            // back to Pixelflinger on some device (read: Samsung I7500)
            int[] attributes = new int[] { EGL10.EGL_DEPTH_SIZE, 16, EGL10.EGL_NONE };
            EGLConfig[] configs = new EGLConfig[1];
            int[] result = new int[1];
            egl.eglChooseConfig(display, attributes, configs, 1, result);
            return configs[0];
        }
    });

    renderer = new MyRenderer();
    mGLView.setRenderer(renderer);
    setContentView(mGLView);
}

@Override
protected void onPause() {
    super.onPause();
    mGLView.onPause();
}

@Override
protected void onResume() {
    super.onResume();
    mGLView.onResume();
}

@Override
protected void onStop() {
    super.onStop();
}

private void copy(Object src) {
    try {
        Logger.log("Copying data from master Activity!");
        Field[] fs = src.getClass().getDeclaredFields();
        for (Field f : fs) {
            f.setAccessible(true);
            f.set(this, f.get(src));
        }
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
}

public boolean onTouchEvent(MotionEvent me) {

    if (me.getAction() == MotionEvent.ACTION_DOWN) {
        xpos = me.getX();
        ypos = me.getY();
        return true;
    }

    if (me.getAction() == MotionEvent.ACTION_UP) {
        xpos = -1;
        ypos = -1;
        touchTurn = 0;
        touchTurnUp = 0;
        return true;
    }

    if (me.getAction() == MotionEvent.ACTION_MOVE) {
        float xd = me.getX() - xpos;
        float yd = me.getY() - ypos;

        xpos = me.getX();
        ypos = me.getY();

        touchTurn = xd / -100f;
        touchTurnUp = yd / -100f;
        return true;
    }

    try {
        Thread.sleep(15);
    } catch (Exception e) {
        // No need for this...
    }

    return super.onTouchEvent(me);
}

protected boolean isFullscreenOpaque() {
    return true;
}

class MyRenderer implements GLSurfaceView.Renderer {

    private long time = System.currentTimeMillis();

    public MyRenderer() {
    }

    public void onSurfaceChanged(GL10 gl, int w, int h) {
        if (fb != null) {
            fb.dispose();
        }
        fb = new FrameBuffer(gl, w, h);

        if (master == null) {

            world = new World();
            world.setAmbientLight(20, 20, 20);

            sun = new Light(world);
            sun.setIntensity(250, 250, 250);

            // Create a texture out of the icon...:-)
            Texture texture = new Texture(BitmapHelper.rescale(BitmapHelper.convert(getResources().getDrawable(R.drawable.ic_launcher)), 64, 64));
            TextureManager.getInstance().addTexture("texture", texture);

            try {
                cube = loadModel("assets/" + thingName + ".3ds", thingScale);
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

                    //Primitives.getCube(10);
            //cube.calcTextureWrapSpherical();
            //cube.setTexture("texture");
            //cube.strip();
            cube.build();

            world.addObject(cube);

            Camera cam = world.getCamera();
            cam.moveCamera(Camera.CAMERA_MOVEOUT, 50);
            cam.lookAt(cube.getTransformedCenter());

            SimpleVector sv = new SimpleVector();
            sv.set(cube.getTransformedCenter());
            sv.y -= 100;
            sv.z -= 100;
            sun.setPosition(sv);
            MemoryHelper.compact();

            if (master == null) {
                Logger.log("Saving master Activity!");
                master = MainActivity.this;
            }
        }
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    }

    public void onDrawFrame(GL10 gl) {
        if (touchTurn != 0) {
            cube.rotateY(touchTurn);
            touchTurn = 0;
        }

        if (touchTurnUp != 0) {
            cube.rotateX(touchTurnUp);
            touchTurnUp = 0;
        }

        fb.clear(back);
        world.renderScene(fb);
        world.draw(fb);
        fb.display();

        if (System.currentTimeMillis() - time >= 1000) {
            Logger.log(fps + "fps");
            fps = 0;
            time = System.currentTimeMillis();
        }
        fps++;
    }

       private Object3D loadModel(String filename, float scale) throws UnsupportedEncodingException {

           InputStream stream = new ByteArrayInputStream(filename.getBytes("UTF-8"));
            Object3D[] model = Loader.load3DS(stream, scale);
            Object3D o3d = new Object3D(0);
            Object3D temp = null;
            for (int i = 0; i < model.length; i++) {
                temp = model[i];
                temp.setCenter(SimpleVector.ORIGIN);
                temp.rotateX((float)( -.5*Math.PI));
                temp.rotateMesh();
                temp.setRotationMatrix(new Matrix());
                o3d = Object3D.mergeObjects(o3d, temp);
                o3d.build();
            }
            return o3d;
        }

}
} 
```

所以应用程序失败了，这是我的 logCat

```
FATAL EXCEPTION: GLThread 93
java.lang.RuntimeException: [ 1363008600568 ] - ERROR: Not a valid 3DS file!
at com.threed.jpct.Logger.log(Logger.java:189)
at com.threed.jpct.Loader.load3DS(Loader.java:1554)
at com.threed.jpct.Loader.load3DS(Loader.java:154)
at com.example.jpct.MainActivity$MyRenderer.loadModel(MainActivity.java:269)
at com.example.jpct.MainActivity$MyRenderer.onSurfaceChanged(MainActivity.java:207)
at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1505)
at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

3d 文件位于“assets”文件夹中，并且是 3ds 有效文件（我在其他 3d 引擎上对其进行了测试）

你能帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T08:31:11.850

尝试用这个来构建你的`InputStream`in`loadModel`方法：

```
InputStream stream = mContext.getAssets().open("FILENAME.3DS") 
```

看看它是否改变了什么。这`Context`是`Application Context`您可以从创建渲染器的 Activity 中获得的内容：

```
// the "this" refers to your "MainActivity"
Context mContext = this.getApplicationContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T03:27:18.357

```
cube=Object3D.mergeAll(Loader.load3DS(getResources().getAssets().open("chair.3ds", 5)); 
```

使用此行加载 3ds 文件。以同样的方式，您可以加载 jPCT-AE 支持的其他文件格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-23T00:46:16.277

Amrish Kumar 的回答几乎是正确的，但他错过了一个重要的括号。

```
cube=Object3D.mergeAll(Loader.load3DS(getResources().getAssets().open("cubeship.3ds"), 1)); 
```

你最好抓住任何错误！

所以：

```
try {
     cube = Object3D.mergeAll(Loader.load3DS(getResources().getAssets().open("cubeship.3ds"), 1));
} catch (IOException e) {
     e.printStackTrace();
} 
```

希望对未来的搜索者有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-10T09:53:26.360

```
InputStream stream = new ByteArrayInputStream(filename.getBytes("UTF-8")); 
```

我猜..您代码中的上述行不会将文件读入InputStream，而不是它只是复制文件名字符串对象字节数组..

# mysql - 使用 or 优化查询

> ID：15298133
> 
> 赞同：2
> 
> 时间：2013-03-08T16:00:56.053
> 
> 标签：mysql, query-optimization

我需要将三个表连接在一起。第一个有 ~100k 行，第二个 ~300k 行，最后一个 ~40 行。第一个和第二个应该由一个复合条件连接，但这是诀窍。查询要求它是一个`OR`条件。由于 OR 条件，索引无法正确使用。我尝试将两个困难的表分离为两个单独的查询，并将它们与 union 连接以帮助 mysql 找到正确的索引。

我能做些什么来优化这个查询？

```
select * from a, b, c where (a.x = b.x OR a.y = b.y) and b.z = c.z 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:14:18.187

尝试 2 个查询的 UNION：-

```
select * 
from a
INNER JOIN b ON a.x = b.x
INNER JOIN c ON and b.z = c.z
UNION
select * 
from a
INNER JOIN b ON a.y = b.y
INNER JOIN c ON and b.z = c.z 
```

（在实际应用中，我同意不使用 SELECT *）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:14:42.440

我将从使用 ANSI 连接语法开始，然后使用它[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.5/en/using-explain.html)来优化查询：

```
select * 
from a
  inner join b on a.x = b.x OR a.y = b.y
  inner join c on b.z = c.z 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:40:57.330

你应该这样做

```
select 
   [your column names] 
from a
inner join b 
on a.x = b.x 
OR a.y = b.y
inner join c 
on b.z = c.z 
```

# asp.net - 如何成功将 ASP.NET 网站和 SQL Server 数据库传输到另一台机器

> ID：15298139
> 
> 赞同：0
> 
> 时间：2013-03-08T16:01:08.193
> 
> 标签：asp.net, sql, sql-server, aspnetdb

在我的家用电脑上，我正在处理一个 ASP.NET 网站项目。附带一个 SQL Server 2012 数据库。

我正在尝试将这个项目转移到我的笔记本电脑上。我已成功恢复笔记本电脑上的数据库并修复了 ASP.NET 网站项目（web.config 文件）上的一些连接错误。

在我的数据库中，我已经集成了 aspnetdb 来处理我的用户/角色/成员以及我拥有的其他表。不幸的是，在将整个数据库转移到我的笔记本电脑后，它似乎删除了我的角色，但没有删除我的用户。因此，当用户尝试登录我的 asp.net 网站时会出现问题。

我已经加载了 asp.net 网站管理工具，正如我所料，它说有 3 个用户和 0 个角色。我只是要重新创建角色，因为我的数据库没有那么大。奇怪的是，转移只删除了角色而不是用户。但是，在单击“创建或管理角色”时出现错误。只是想提一下在尝试使用此工具创建新用户时会发生同样的事情。

错误：

> 遇到错误。请返回上一页并重试。
> 
> 以下消息可能有助于诊断问题：建立与 SQL Server 的连接时发生网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）在 ASP.security_roles_manageallroles_aspx 的 System.Web.Administration.WebAdminPage.CallWebAdminHelperMethod(Boolean isMembership, String methodName, Object[] parameters, Type[] paramTypes)。 BindGrid() 在 ASP.security_roles_manageallroles_aspx.Page_Load() 在 System.Web.Util.CalliHelper.ArglessFunctionCaller(IntPtr fp, Object o) 在 System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) 在 System.Web。 UI.控件。

我认为问题在于我将 asp.net 网站项目文件夹转移到我的笔记本电脑上，而 asp.net 网站管理工具无法识别 sql server 实例，因此我需要以某种方式更新它以匹配新的 sql server 实例。

我该如何解决我的问题？

**更新：**

我刚刚检查了我的家用计算机数据库，有趣的是，aspnet_roles 表中没有存储任何数据。但是有用户存储在 aspnet_users 表中。现在为什么不将角色存储在该表中？：/

我有点困惑，如果它没有将角色存储在该表中......它将在哪里存储它们？

**更新 2**

我刚刚注意到这些角色被存储在 app_data 文件夹中到 ASPNETDB 中，而不是我在我的 sql 服务器上连接的数据库中。我不知道这是如何发生的，因为它用于添加到我的 sql 服务器。有没有办法可以将我的 aspnetdb 表和数据传输到我的 sql 数据库中？

我刚刚通过创建一个新用户进行了测试。新用户存储在我的 sql 数据库中。但它没有存储在 aspnetdb 中，但角色存储在 aspnetdb 中，而不是我的 sql 数据库中的表。

**问题：我怎样才能将这些结合起来，只让它更新我的 sql 数据库中的数据？**

**更新 3**

我解决了角色和用户存储在 2 个差异提供程序中的问题，我只需将它们指向一个提供程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:42:17.307

你是如何引用你的数据库的？您可能在连接字符串（或 IP 地址）中有计算机的名称。检查以确保这也已更改。这很可能在您的 web.config 文件中。如果您仍然有旧服务器设置，您实际上可以将所有表和记录导出到一个 sql 文件，然后将其上传到新服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:07:54.300

这是我的“会员转移”助手。

[http://granadacoder.wordpress.com/2007/11/29/membershipprovider-helper-to-transfer-data/](http://granadacoder.wordpress.com/2007/11/29/membershipprovider-helper-to-transfer-data/)

# ssl - 将我的网站更改为 SSL，但 http 网站出现在 google 上

> ID：15298143
> 
> 赞同：0
> 
> 时间：2013-03-08T16:01:17.723
> 
> 标签：ssl

我最近将我的网站从 http 更新为 https，当我在 google 上搜索我的网站时，出现了 http ……我该如何更改？我需要联系谷歌吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:02:03.527

不，只需设置 301 重定向，因此 HTTP 上的所有请求都转到 HTTPS

这可以在 Apache 中使用 Rewrite 模块完成。

请参阅此链接：[http ://wiki.apache.org/httpd/RewriteHTTPToHTTPS](http://wiki.apache.org/httpd/RewriteHTTPToHTTPS)

这有很多好处，这意味着您将保持您以前的新页面的 SEO 排名，任何直接输入地址的人都会转到您的 HTTPS 站点，而 Google 最终会更改为显示 HTTPS 站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:02:48.240

您需要从 http 站点到 https 站点的 301 重定向，Google 将逐步更新。

或者，您可以询问 Google [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=164734](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=164734)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:06:35.700

谷歌并没有真正关注端口 - 这是 http（端口 80）或 https（端口 443）。您需要在您的服务器配置文件或 htaccess 文件中设置一个重定向，将所有请求发送到端口 443。您也可以通过编程方式执行此操作，但效率较低。

# r - R randomForest 崩溃与 oob.prox=FALSE

> ID：15298147
> 
> 赞同：0
> 
> 时间：2013-03-08T15:33:13.350
> 
> 标签：r, random-forest

我一直能够用这些行使 R 崩溃：

```
 library(randomForest)

    x = matrix(runif(400), nrow=20)
    y = runif(20)

    rf = randomForest(x, y, proximity=TRUE, oob.prox=FALSE) 
```

使用 oob.prox=TRUE 它运行良好。

你能重现这个吗？

谢谢， 伊曼纽尔

```
 > sessionInfo()
    R version 2.15.1 (2012-06-22)
    Platform: i686-pc-linux-gnu (32-bit)

    locale:
    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8       
    [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
    [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
    [10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

    attached base packages:
    [1] stats     graphics  grDevices utils     datasets  methods   base     

    other attached packages:
    [1] randomForest_4.6-7

    loaded via a namespace (and not attached):
    [1] tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T15:39:39.240

该错误现在应该在 R-forge 上的版本（“4.6-8”）中得到修复。最终应该在 CRAN 上。

包的问题最好直接与包维护者沟通。有些人不经常阅读这个网站。如果没有人通过电子邮件引起我的注意，我就不会知道这一点。

# php - 使用 PostGis 的 ST_AsPNG() 输出通过 PHP 创建图像

> ID：15298152
> 
> 赞同：4
> 
> 时间：2013-03-08T16:01:36.010
> 
> 标签：php, postgis, php-gd

我想根据我从 PostgreSQL 空间数据库构建的栅格输出创建图像。

我有一个查询：

```
SELECT (
    ST_AsPNG(
        ST_AsRaster(
           geom, 1.5::double precision, 2::double precision, 11, 11, '8BUI', 100, 0, 0, 0, false
        )
    )
) AS "png" FROM "geom" AS "g" LIMIT 1 
```

当我转储返回的结果时，我得到：

```
resource(83) of type (stream) 
```

我已经尝试了许多使用 PHP 的内置函数处理图像的组合，但在实际绘制多边形时似乎无处可去。我总是遇到“提供的资源类型无效”或类似问题。

似乎没有有用的文档可用 - 任何人都可以指导我正确的方向吗？

使用的技术：

1.  地理信息系统 2

2.  Postgres 9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-04T23:00:52.283

PostGIS 文档有一章 (5.3.1)

“使用 ST_AsPNG 与其他栅格函数配合使用的 PHP 示例输出”：

[http://postgis.net/docs/using_raster_dataman.html#RT_PHP_Output](http://postgis.net/docs/using_raster_dataman.html#RT_PHP_Output)

# sql - 如何从包含数字和字母的列中仅返回数字？

> ID：15298153
> 
> 赞同：0
> 
> 时间：2013-03-08T16:01:37.770
> 
> 标签：sql, sql-server-2008, sql-server-2005

使用 SQL Server 2005/2008，我试图只返回列中的数字，该列中也有一些带有字母的字段。

```
SELECT
    DISTINCT Cashregister
FROM
    dbo.RPTrs
WHERE
    TRSDate > GETDATE()-100 AND
    StoreID = @sname 
```

退货

![在此处输入图像描述](../Images/105ca30e366804d011eef5aa3d0eda29.png)

还有这个

```
SELECT
    DISTINCT Cashregister
FROM
    dbo.RPTrs
WHERE
    TRSDate > GETDATE()-100 AND
    StoreID = @sname AND
    Cashregister not like '%[^0-9]%' 
```

退货

![在此处输入图像描述](../Images/399d19c589ab23e2e1d5020122a66eca.png)

我需要的是从第一个查询中返回所有寄存器，但在它所在的位置没有 X。

预期结果：

```
 | Cashregister
----------------
1  | 24
2  | 44
3  | 32
4  | 36
5  | 45
6  | 21
7  | 03
8  | 40
9  | 22
10 | 23
11 | 35
12 | 01
13 | 04
14 | 34
15 | 33
16 | 02 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:02:29.117

采用`REPLACE()`

```
SELECT DISTINCT REPLACE(Cashregister, 'X', '') Cashregister
FROM   dbo.RPTrs
WHERE  TRSDate > GETDATE()-100 AND
       StoreID = @sname 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/eef69/1)

~~注意：`REPLACE()`区分大小写。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:34:53.907

如果在您的 SQL 版本中可用，您可以使用 REGEXP。您不需要像我的示例中那样使用 UNION。这只是为了构建没有表的数据......：

```
-- Digits only --
SELECT REGEXP_REPLACE('X45','[^0-9]') digits_only FROM your_tab
  UNION
SELECT REGEXP_SUBSTR('X40','[[:digit:]]+') AS digits_only FROM your_tab
/

DIGITS_ONLY
------------
40
45 
```

此外：

```
SELECT REGEXP_REPLACE('12ZXC3ASD456FGH8TED63','\D') digits_only FROM some_tab
/
SELECT REGEXP_REPLACE('12ZXC3ASD456FGH8TED63','[^[:digit:]]') digits_only FROM some_tab
/ 
```

# cocoa - 创建数据对象

> ID：15298155
> 
> 赞同：1
> 
> 时间：2013-03-08T16:01:39.913
> 
> 标签：cocoa, debugging

我需要将数据发送到串行端口。发送内容的定义是：

```
Chr$(2) = Clear buffer
Chr$(48)&Chr(57) = Any number between 0 to 359 
```

我输入 2090 失败的尝试

```
int i, c;
char j;
NSString *tmpStr = [self.sendTextField stringValue];
NSString *tmpVal;
for (i = 0 ; i < [tmpStr length]; i++)
{
  NSLog(@"Iteration: %d", i);
  tmpVal = [tmpStr substringWithRange:NSMakeRange(i, 1)];
  c = [tmpVal intValue];
  j = (char)c;
  tmpVal = [NSString stringWithFormat:@"%c", j];
  NSData *dataToSend = [tmpVal.value dataUsingEncoding:NSUTF8StringEncoding]; **<Error here**
  [self.serialPort sendData:dataToSend];
} 
```

我不知道如何更正控制台报告的错误。

```
2013-03-08 10:38:12.430 ORSSerialPortCocoaDemo[40656:303] Iteration: 0
2013-03-08 10:38:38.819 ORSSerialPortCocoaDemo[40656:303] -[__NSCFString value]: unrecognized selector sent to instance 0x1001626a0
2013-03-08 10:38:38.819 ORSSerialPortCocoaDemo[40656:303] -[__NSCFString value]:    unrecognized selector sent to instance 0x1001626a0
2013-03-08 10:38:38.821 ORSSerialPortCocoaDemo[40656:303] (
0   CoreFoundation                      0x00007fff858180a6 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff835b03f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff858ae6ea -[NSObject(NSObject) doesNotRecognizeSelector:] + 186
3   CoreFoundation                      0x00007fff858065ce ___forwarding___ + 414
4   CoreFoundation                      0x00007fff858063b8 _CF_forwarding_prep_0 + 232
5   ORSSerialPortCocoaDemo              0x0000000100008e81 -[ORSSerialPortDemoController send:] + 465
6   AppKit                              0x00007fff868d6a59 -[NSApplication sendAction:to:from:] + 342
7   AppKit                              0x00007fff868d68b7 -[NSControl sendAction:to:] + 85
8   AppKit                              0x00007fff868d67eb -[NSCell _sendActionFrom:] + 138
9   AppKit                              0x00007fff868d4cd3 -[NSCell trackMouse:inRect:ofView:untilMouseUp:] + 1855
10  AppKit                              0x00007fff868d4521 -[NSButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 504
11  AppKit                              0x00007fff868d3c9c -[NSControl mouseDown:] + 820
12  AppKit                              0x00007fff868cb60e -[NSWindow sendEvent:] + 6853
13  AppKit                              0x00007fff868c7744 -[NSApplication sendEvent:] + 5761
14  AppKit                              0x00007fff867dd2fa -[NSApplication run] + 636
15  AppKit                              0x00007fff86781cb6 NSApplicationMain + 869
16  ORSSerialPortCocoaDemo              0x0000000100001d62 main + 34
17  ORSSerialPortCocoaDemo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:04:49.807

删除对`value`方法的调用：

```
NSData *dataToSend = [tmpVal dataUsingEncoding:NSUTF8StringEncoding]; 
```

# .net - 你能去掉内部类工厂的循环依赖吗？

> ID：15298156
> 
> 赞同：2
> 
> 时间：2013-03-08T16:01:45.433
> 
> 标签：.net, dependency-injection, circular-dependency

假设我有两个类，但它们只能通过工厂创建，为了强制执行，我将工厂创建为它们正在创建的对象的内部类，以便它们可以访问私有构造函数。在这种情况下，一个类需要创建另一个类的实例，而第二个类需要创建第一个类的实例：

```
public class A
{
    public class Factory
    {
        private readonly B.Factory bFactory;

        public Factory(B.Factory bFactory)
        {
            this.bFactory = bFactory;
        }

        public A Build()
        {
            return new A(this.bFactory);
        }
    }
    private A(B.Factory bFactory)
    {
    }
}

public class B
{
    public class Factory
    {
        private readonly A.Factory aFactory;

        public Factory(A.Factory aFactory)
        {
            this.aFactory = aFactory;
        }

        public B Build()
        {
            return new B(this.aFactory);
        }
    }
    private B(A.Factory aFactory)
    {
    }
} 
```

通常我会通过创建另一个工厂来解决这个问题，该工厂`ABFactory`可以同时创建`A`and`B`实例，并且我会 make `A`and `B`both 声明对 的依赖`ABFactory`，但在这种情况下`ABFactory`无法访问两者的私有构造函数`A`and `B`。

假设语义是正确的（在这种情况下，`A`返回 an 的实例`B`和`B`返回 another 的实例是合乎逻辑的`A`）那么解决这个问题的最佳方法是什么？

## **更新 1**

到目前为止，我的解决方案是创建一个名为 a 的新类`CircularDependencyResolver`。两个工厂中的每一个都声明依赖于它而不是另一个工厂。每个人都`this`在自己的构造函数中向该解析器注册自己（）。当他们去构建各自的对象时，他们会调用`Resolve`解析器上的方法，它会寻找其他注册的工厂，或者抛出异常。

问题当然是我们推迟了解决`A`or`B`的依赖，直到我们真正需要创建它，而不是在程序启动时，但它确实有效。

不过，我仍然对其他解决方案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:47:38.777

我的猜测：语义不可能是正确的。以哲学的方式，如果 A 只能在 B 的实例存在时创建（与这种情况下的常规构造相比，我在这里看不到工厂模式的相关性，因为您只是在代码方面移动问题，但不是语义明智的）和B只能在A存在时创建，那么没有办法，只要两者都不存在，就可以创建两者中的任何一个。

必须有一个，可以在没有另一个的情况下创建，除了 A 和 B 是同一事物的一部分，这里不是这种情况（因为 B 应该创建自己的 A 实例）。您需要使一个成为另一个的属性。

也许有助于了解 OOP 中概念*聚合*和*组合*的区别，以了解语义，

顺便说一句，您是否在依赖注入上下文中查看它并不重要，因为您无法以任何方式创建实例。

可能是，我错过了一些东西，虽然......有趣的问题！

**编辑：**

好的，那么这个呢：

```
public class A
{
    private int _privateInt;

    private B CreateB()
    {
        return B.Factory.Build();
    }

    public static class Factory
    {
        public static A Build()
        {
            return new A {_privateInt = 1};
        }
    }

    private A()
    {
    }
}

public class B
{
    public static class Factory
    {
        public static B Build()
        {
            return new B();
        }
    }

    private B()
    {
    }
} 
```

但也许，我真的不明白这个问题？

**编辑2：**

我无法真正描绘您的场景，但是为什么您需要将一个类的工厂传递给另一个类，尤其是在 DI 的上下文中？如果您想从另一个（A）中获取一个类（例如 B）的新实例，为什么不让容器为您创建该实例？

**编辑 3：**

如果您的容器支持解析`Lazy`实例的初始化程序，则可以将它们用作构造函数参数的类型：

```
public A(Lazy>B> b) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:56:42.643

First of all i would of course agree with what @PeterRitchie said in his comment as Cyclic Dependencies are a powerful design smell, secondly to break cyclic dependencies i go with an advise i read in Marc Seemann's book [Dependency Inject in .NET](http://www.manning.com/seemann/) and that is:

> Attempt to address cycles by using events. If that fails, try an Observer. Only if you’re still unsuccessful should you consider breaking the cycle by using PROPERTY INJECTION.

If all of this fails, i would use the solution that Object Oriented Languages are famous for which is to introduce another dependency or abstraction to break the cycle which is what you actually did.

# gcc - 在 x86_64 上的 linux 上禁用每个线程写入内存页

> ID：15298163
> 
> 赞同：3
> 
> 时间：2013-03-08T16:02:06.527
> 
> 标签：gcc, openmp, stack-overflow

有没有办法一个进程可以将它的一个内存页面标记为对于 Linux 上的一组特定线程不可写？

**背景**

我正在尝试在 OpenMP 增强的 C++ 应用程序中调试一个棘手的指针问题。我观察到的行为是程序在随机时间后出现段错误。给定一个二进制文件，它总是在同一个地方出现段错误，但是如果我更改二进制文件（通过注释掉代码或更改编译选项），导致段错误的代码行会更改。每个 OpenMP 线程中完成的工作都是微不足道的。

如果我使用 gdb 检查 segfaulting 线程上的堆栈，我观察到一个已损坏的指针指向一个接近 NULL 的地址。指针变量驻留在堆栈上并指向堆地址。我想让每个 OpenMP 线程将其堆栈标记为对所有其他线程不可写，以确保没有堆栈溢出问题或一个线程在另一个堆栈上行走的其他情况。

设置`OMP_STACKSIZE`为较大的值（例如 10M）会使问题消失，但我怀疑这只是运气。据我所知，我正在为任何线程使用 << 100K 的堆栈空间。

valgrind 的 memcheck 报告没有问题。

所有内存分配都在主线程中的单线程代码中执行。如果任何竞争条件处理不当，它们将导致不正确的输出，但不应导致指针问题。

**编辑：**最终，我发现了我的错误。我正在使用`const`具有成员的类的实例`mutable` `private`进行一些惰性评估。该`mutable`成员产生了竞争条件。解决方案是在进入并行块之前触发急切评估。至于标题问题，我怀疑@Damon 的评论是正确的。

# spring - Spring Logging 使用自定义注解

> ID：15298164
> 
> 赞同：3
> 
> 时间：2013-03-08T16:02:08.953
> 
> 标签：spring, logging, spring-mvc, annotations

我想写一个自定义注释，比如@loggable，当在方法级别声明时，它将向用户显示一些关于当前方法的日志消息。我该怎么办？这可能吗？如何使用 spring 注册此注释？我在哪里编写日志记录逻辑？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T16:11:13.107

这是一个关于如何做到这一点的好教程

[使用 Spring AOP 自定义注解](http://cfossguy.blogspot.in/2008/09/extend-your-favorite-framework-with.html)

* * *

**编辑 1**

那么这是我写的一个示例程序，它完成了你想要的。这个日志方法，甚至是 Method 的执行时间。希望这可以帮助。

**Loggable -- 自定义注解声明**

```
package com.test.common.custom.annotation;
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface Loggable {

   String message() default "Audit Message";

} 
```

**LogManager -- 这告诉 AspectJ 拦截哪些方法。**

```
package com.test.common.custom.annotation.pointcutmgr;
@Service
@Aspect
public class LogManager {

       @Pointcut("execution(* com.test.service.*.*(..))")
       public void auditLog() {}

       @Pointcut("execution(* com.test.service.*.*(..))")
       public void performanceLog(){

       }

} 
```

**LogInterceptor - 建议如何处理拦截的方法**

```
package com.test.common.custom.annotation;
@Service
@Aspect
public class LogInterceptor {
    @Before(value = "com.test.common.custom.annotation.pointcutmgr.LogManager.auditLog()"
            + "&& target(bean) "
            + "&& @annotation(com.test.common.custom.annotation.Loggable)"
            + "&& @annotation(logme)", argNames = "bean,logme")
    public void log(JoinPoint jp, Object bean, Loggable logme) {

        System.out.println(String.format("Log Message: %s", logme.message()));
        System.out.println(String.format("Bean Called: %s", bean.getClass()
                .getName()));
        System.out.println(String.format("Method Called: %s", jp.getSignature()
                .getName()));

    }

    @Around(value = "com.test.common.custom.annotation.pointcutmgr.LogManager.auditLog()"
            + "&& target(bean) "
            + "&& @annotation(com.test.common.custom.annotation.Loggable)"
            + "&& @annotation(logme)", argNames = "bean,logme")
    public void performanceLog(ProceedingJoinPoint joinPoint, Object bean, Loggable logme) throws Throwable {
        StopWatch stopWatch = new StopWatch();
        stopWatch.start();

        joinPoint.proceed();

        stopWatch.stop();

        StringBuffer logMessage = new StringBuffer();
        logMessage.append(joinPoint.getTarget().getClass().getName());
        logMessage.append(".");
        logMessage.append(joinPoint.getSignature().getName());
        logMessage.append("(");
        // append args
        Object[] args = joinPoint.getArgs();
        for (int i = 0; i < args.length; i++) {
            logMessage.append(args[i]).append(",");
        }
        if (args.length > 0) {
            logMessage.deleteCharAt(logMessage.length() - 1);
        }

        logMessage.append(")");
        logMessage.append(" execution time: ");
        logMessage.append(stopWatch.getTotalTimeMillis());
        logMessage.append(" ms");
        System.out.println(logMessage.toString());

    }
} 
```

**这是你如何使用它**

用 注释方法`@Loggable`，这个`will print logs and performance statistics`

```
@Loggable(message = "Add Cutomer is fired")
public void addCustomer(){
    try {
        Thread.sleep(2000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("addCustomer() is running ");
} 
```

# c# - 如何找到作为 ClickOnce 应用程序的一部分部署的文件的位置？

> ID：15298165
> 
> 赞同：0
> 
> 时间：2013-03-08T16:02:16.037
> 
> 标签：c#, visual-studio-2010, visual-studio, clickonce

例如我可以使用：

```
System.Reflection.Assembly.GetExecutingAssembly().Location; 
```

查找我调试时发布的文件的位置。安装后是否有类似的查找已部署文件的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:42:41.150

应用程序可执行文件不是“放入开始菜单”。ClickOnce 应用程序在开始菜单中放置了一个快捷方式，该快捷方式调用部署 url 并基本上运行应用程序。因此，您不会将批处理文件本身放在开始菜单中，而是将批处理文件的快捷方式放在开始菜单中。要查找 ClickOnce 应用程序的开始菜单，请尝试以下操作：

```
string startMenuFolder = string.Concat(Environment.GetFolderPath(Environment.SpecialFolder.Programs),
                    "\\", publisher_name); 
```

其中 publisher_name 是您在 Publish 属性中为 Publisher Name 填写的内容。如果你已经填满了套件，你也需要把它放在那里。

# c# - 访问视图中的操作信息

> ID：15298171
> 
> 赞同：0
> 
> 时间：2013-03-08T16:02:33.117
> 
> 标签：c#, .net, asp.net-mvc, razor

我正在我的主 _Layout 上使用动态构建菜单

```
 @{Html.RenderAction("PageMenu", "Service");} 
```

为每个页面添加一个菜单项

```
@model int

<ul id="pages">
    @for (var i = 1; i <= Model; i++) {
        <li>@Html.ActionLink("Page " + i,"Page", "Service", new { page = @i}, null)/li>
    }
</ul> 
```

我需要知道的是我实际在哪个页面上，以便我可以在菜单上指出这一点。有什么方法可以访问最后点击的 ActionLink 的页面#？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:03:25.440

您可以从以下位置检索当前页码`RouteData`：

```
@model int

@functions {
    IDictionary<string, object> GetHtmlAttributes(int i) {
        var routeData = ViewContext.ParentActionViewContext.RouteData;
        int currentPage = 0;
        string page = routeData.Values["page"] as string;
        var htmlAttributes = new RouteValueDictionary();
        if (int.TryParse(page, out currentPage) && currentPage == i)
        {
            htmlAttributes["class"] = "active";
        }
        return htmlAttributes;
    }
}

<ul id="pages">
    @for (var i = 1; i <= Model; i++) 
    {
        <li>
            @Html.ActionLink(
                "Page " + i,
                "Page", 
                "Service", 
                new RouteValueDictionary(new { page = i }), 
                GetHtmlAttributes(i)
            )
        </li>
    }
</ul> 
```

请注意我是如何使用`ViewContext.ParentActionViewContext.RouteData`属性而不是`ViewContext.RouteData`为了获取父视图上下文，因为您在子操作中（您使用了`Html.RenderAction`帮助器）。

# jflex - JFlex 和 CUP 编译错误

> ID：15298176
> 
> 赞同：1
> 
> 时间：2013-03-08T16:02:40.900
> 
> 标签：jflex

我编写了一个简单的词法分析器文件，JFlex 从中生成了一个没有任何抱怨的 Lexer.java 文件。

但是，如果没有错误，我无法编译 Lexer.java 文件：

包 java_cup.runtime 不存在

我不明白问题是什么，因为我按照教程说只要 java-cup-11a.jar 文件位于根文件夹中，就不应该有任何类路径问题。

我花了几个小时试图解决这个问题，并希望得到任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:47:20.773

我怀疑您刚刚复制了一个 jflex 文件作为教程实验的基础，并且它`%cup`在顶部附近有一个指令。该指令指示 JFlex 生成 java 代码以将词法分析器链接到 CUP 生成的解析器，并且您没有向 java 编译器提供预期的 CUP jar 文件。

如果您正在制作一个独立的扫描仪（如果您刚刚开始学习教程，您可能应该这样做），您需要使用该`%standalone`指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T18:15:41.397

```
import java_cup.runtime.*; 
```

只需将其放在 .jflex 文件的顶部即可

# c# - 传递运行时类型时无法解决符号异常

> ID：15298178
> 
> 赞同：1
> 
> 时间：2013-03-08T16:02:46.923
> 
> 标签：c#, serialization, .net-4.0

我有一个 JSON 反序列化器（如下所示），当我使用已知类型调用它时，它工作得非常好。

```
public static T Deserialize<T>(this object obj)
{
    var javaScriptSerializer = new JavaScriptSerializer();

    return (obj != null) ?
        javaScriptSerializer.Deserialize<T>(obj.ToString()) :
        default(T);
} 
```

所以这个电话会起作用：

```
var newExampleTypeX = exampleJsonString.Deserialize<ExampleTypeX>(); 
```

但是，我要做的是传入一个在运行时设置的类型，并使用它来代替“ExampleTypeX”。当我这样做时，我收到以下编译错误：

```
Cannot resolve symbol 'someType' 
```

所以 someType 的声明看起来像这样（这是一个简化的版本）：

```
var someType = typeof(ExampleTypeX);
var newExampleTypeX = message.Deserialize<someType>(); 
```

我应该以某种方式更改我的 Deserialize 扩展方法，还是更改我传入运行时类型的方式？如果是这样，那么我该如何实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:17:20.760

与泛型一起使用的类型必须在编译时知道。这就是为什么你不能这样做：

```
var someType = typeof(ExampleTypeX);
var newExampleTypeX = message.Deserialize<someType>(); 
```

它与 JavaScriptSerializer 无关——这就是泛型的工作方式。

如果你真的需要，你可以使用反射来绕过它，但我认为你不应该这样做。

您可以在这两个问题中阅读有关使用泛型类型和扩展方法的反射的更多信息：

[C#中的泛型，使用变量的类型作为参数](https://stackoverflow.com/questions/2107845/generics-in-c-using-type-of-a-variable-as-parameter)

[反思以识别扩展方法](https://stackoverflow.com/questions/299515/reflection-to-identify-extension-methods)

# android - android.widget.ProgressBar.onRestoreInstanceState 中无法解释的 ClassCastException

> ID：15298184
> 
> 赞同：40
> 
> 时间：2013-03-08T16:03:10.963
> 
> 标签：android, android-widget

我的应用程序在商店里已经有一段时间了，但根据开发者控制台中的崩溃报告，它似乎偶尔会崩溃，说： `java.lang.ClassCastException in android.widget.ProgressBar.onRestoreInstanceState`堆栈跟踪：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.company.myapp/com.mycompany.myapp.activity.MyActivity}: java.lang.ClassCastException: android.view.AbsSavedState$1 cannot be cast to android.widget.ProgressBar$SavedState
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1996)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2023)
at android.app.ActivityThread.access$600(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1174)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4503)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassCastException: android.view.AbsSavedState$1 cannot be cast to android.widget.ProgressBar$SavedState
at android.widget.ProgressBar.onRestoreInstanceState(ProgressBar.java:1093)
at android.view.View.dispatchRestoreInstanceState(View.java:9975)
at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2408)
at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2408)
at android.view.View.restoreHierarchyState(View.java:9951)
at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1611)
at android.app.Activity.onRestoreInstanceState(Activity.java:908)
at android.app.Activity.performRestoreInstanceState(Activity.java:880)
at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1102)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
... 11 more 
```

这些崩溃的原因让我无法理解，我无法在我的任何设备上重现它。我也没有`onRestoreInstanceState`任何地方被覆盖。谁能指出我有意义的方向？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-03-08T16:06:58.283

我以前见过与此类似的问题，这是因为您有两个共享相同名称的 id。

`onRestoreInstanceState`已执行该方法`findViewById`，但找到的第一个视图不是`ProgressView`.

仔细检查您的应用程序是否没有在两个不同的地方重用相同的 ID

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-24T16:24:39.260

我有一个不同的问题：在一个布局中，根是 ScrollView，而在另一个布局中，根是包含 ScrollView 的 RelativeView。所有小部件 id 都是相同的，并且没有重复。在轮换崩溃日志是：

```
java.lang.ClassCastException: android.view.AbsSavedState$1 cannot be cast to android.widget.ScrollView$SavedState 
```

一旦我匹配了布局（所以在两个根中都是RelativeLayout或ScrollView），旋转工作正常。

不知道为什么这会导致崩溃，所以任何见解都会受到赞赏......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-10T10:33:20.737

就我而言，有两个具有相同 ID 的不同视图。其中一个在主布局中，另一个在主布局中作为视图包含的另一个布局中。我更改了其中一个 ID。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-14T05:21:35.463

在我的情况下，我的肖像 xml 具有`Relativelayout`和`ScrollView`来自具有相同 ID 的横向 xml。

在我的活动课上，我尝试膨胀布局并将其分配给`ViewGroup`

因此，当屏幕旋转发生时，它会抛出： `java.lang.ClassCastException: android.view.AbsSavedState$1`cannot be cast to`android.widget.ScrollView$SavedState`

这是因为`ScrollView`延伸`FrameLayout`而`Relativelayout`延伸`ViewGroup`

所以我只是用景观xml包装`Relativelayout`并解决了问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-29T16:22:00.677

当我在两种不同的布局（一种纵向和另一种横向）中有一个 GridView 时，我在旋转时收到了这个崩溃消息。一个包含在 FrameLayout 中，而另一个则不包含，即它单独存在于布局文件中。当我删除包装 FrameLayout 时，一切正常。（注意：GridView 用于主/视图布局的主端。）

直到我将 Gradle 设置升级到此，该消息才出现：

```
android {
    compileSdkVersion 23
    buildToolsVersion '23.0.2'
    defaultConfig {
        applicationId 'com.example.android.redacted.app'
        minSdkVersion 16
        targetSdkVersion 23
        versionCode 1
        versionName "1.0"
    }  

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.android.support:appcompat-v7:23.1.1'

} 
```

他们以前是这样的：

```
android {
    compileSdkVersion 21
    buildToolsVersion '21.1.2'
    defaultConfig {
        applicationId 'com.example.android.redacted.app'
        minSdkVersion 11
        targetSdkVersion 21
        versionCode 1
        versionName "1.0"
    }

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.android.support:appcompat-v7:21.0.2'
} 
```

似乎 Marshmallow 对这个错误更加无情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-24T13:32:37.620

我需要使用具有相同 ID 的不同布局。所以，解决方法是

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    try {
        super.onRestoreInstanceState(savedInstanceState);
    } catch (Exception ignored) {
    }
} 
```

这将使您的应用程序免于崩溃。

`super.onRestoreInstanceState(savedInstanceState)`只能执行到点异常发生。但是，我觉得它没有用，至少在我的应用程序中，所以我可以绕过`onRestoreInstanceState`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-27T08:36:58.117

您可以在某些情况下使用： isSaveEnabled = false 用于具有相同 id 的视图，以避免在恢复状态期间出错

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-11T16:42:28.297

它发生在我身上，`<ProgressBar />`带有`android:id="@+id/progress"`- 没有任何 id 值冲突。在我的应用程序之外猜测与具有此预定义值的现有视图有关。更改为`android:id="@+id/progressBar"`或任何解决问题的方法。

# angularjs - 使用 angular.module().controller() 进行测试

> ID：15298189
> 
> 赞同：1
> 
> 时间：2013-03-08T16:03:32.883
> 
> 标签：angularjs, jasmine

我正在使用`module().controller()`语法创建我的控制器。

```
angular.module('App', []);

angular.module('App').controller('PhoneListCtrl', ['$scope', function ($scope) {
    'use strict';

    $scope.phones = [
        {
            "name": "Nexus S",
            "snippet": "Fast just got faster with Nexus S."
        },
        {
            "name": "Motorola XOOM™ with Wi-Fi",
            "snippet": "The Next, Next Generation tablet."
        },
        {
            "name": "MOTOROLA XOOM™",
            "snippet": "The Next, Next Generation tablet."
        }
    ];
}]); 
```

这很好用。但现在我想用茉莉花测试它，我的测试用

`ReferenceError: AppController is not defined`.

我的测试：

```
/* jasmine specs for controllers go here */
describe('PhoneCat controllers', function () {

    describe('PhoneListCtrl', function () {

        it('should create "phones" model with 3 phones', function () {
            var scope = {},
                ctrl = new PhoneListCtrl(scope);

            expect(scope.phones.length).toBe(3);
        });
    });
}); 
```

如果我将控制器更改为经典功能，测试工作正常。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:48:13.103

在您的测试中，您不应该“手动”创建控制器实例，而是让 AngularJS 使用该`$controller`服务创建实例。这是必要的，因为 AngularJS DI 系统需要有机会注入依赖项。

您的测试应该大致如下所示：

```
 beforeEach(module('App'));

 it('should create "phones" model with 3 phones', inject(function ($controller, $rootScope) {
    var ctrl = $controller('PhoneListCtrl', {$scope: $rootScope});   
    expect($rootScope.phones.length).toBe(3);
 })); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-29T16:42:45.437

对于希望实例化新范围并使用它的人：

```
 var ctrl = $scope.$new();
$controller('PhoneListCtrl', {$scope: ctrl});   
    expect(ctrl.phones.length).toBe(3); 
```

# python - 在 Python 2.6 中实现 tearDownClass 功能

> ID：15298196
> 
> 赞同：1
> 
> 时间：2013-03-08T16:03:57.130
> 
> 标签：python, selenium, nosetests, teardown

我在`setUp()`课堂上为多个测试实现了“全局”。

现在我想知道如何创建一个“全局”`teardown()`函数，该函数将在最后一次测试完成后运行，类似于`tearDownClass()`Python > 2.7

如果信息有帮助：我正在使用鼻子测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:03:39.910

怎么用[`unittest2`](https://pypi.python.org/pypi/unittest2)？

> unittest2 是 Python 2.7 中添加到 unittest 测试框架的新功能的反向移植。它经过测试可在 Python 2.4 - 2.7 上运行。
> 
> ...
> 
> 新功能包括：
> 
> *   类和模块级别的固定装置：setUpClass、**tearDownClass**、setUpModule、tearDownModule

# tabs - 使用未显示的用户控件动态加载 RadTabStrip 选项卡

> ID：15298198
> 
> 赞同：0
> 
> 时间：2013-03-08T16:03:59.580
> 
> 标签：tabs, telerik, radgrid

我有一个带有 NestedViewTemplate 的 RadGrid，其中有一个 RadTabStrip。我正在做的是将 UserControls(ascx) 文件加载到我在 RadMultiPage 中创建的每个选项卡中。选项卡是静态的，但用户控件是动态加载的。他们并没有一直出现。这是他们所在的主页。

```
<asp:Panel runat="server" ID="myPanel">
<telerik:RadGrid ID="gdDocket" runat="server" ShowGroupPanel="True" GridLines="None"
    CellSpacing="0" ActiveItemStyle-BackColor="#0066FF" Width="1000" AutoGenerateEditColumn="True"
    OnInsertCommand="gdDocket_InsertCommand" OnNeedDataSource="gdDocket_NeedDataSource"
    OnUpdateCommand="gdDocket_UpdateCommand" OnItemCommand="gdDocket_ItemCommand"
    Skin="Web20" OnItemCreated="gdDocket_ItemCreated" 
    onitemdatabound="gdDocket_ItemDataBound">
    <ActiveItemStyle BackColor="#0066FF"></ActiveItemStyle>
    <PagerStyle Mode="NumericPages"></PagerStyle>
    <GroupHeaderItemStyle BackColor="SlateGray" ForeColor="White" />
    <HeaderStyle Wrap="false" />
    <MasterTableView HierarchyDefaultExpanded="false" Width="100%" EditMode="PopUp" BorderWidth="1px" CellPadding="1"
        CellSpacing="1" CommandItemDisplay="Top" GridLines="Both" DataKeyNames="claim_num,docket_id"
        AutoGenerateColumns="false" HorizontalAlign="NotSet" GroupLoadMode="Server" >
        <NestedViewTemplate>
            <asp:Panel runat="server" ID="InnerContainer" Visible="true">
                <telerik:RadTabStrip runat="server" ID="TabStip1" AutoPostBack="true" EnableViewState="true" 
                MultiPageID="Multipage1" SelectedIndex="0" ClickSelectedTab="True" OnTabClick="TabStrip1_TabClick">
                    <Tabs>
                        <telerik:RadTab runat="server" Value="Full" Text="Full Claim" PageViewID="FullClaimPage">
                        </telerik:RadTab>
                        <telerik:RadTab runat="server" Value="Remand" Text="Remand History" PageViewID="RemandsPage">
                        </telerik:RadTab>
                        <telerik:RadTab runat="server" Value="Comments" Text="Docket Comments" PageViewID="DocketComments">
                        </telerik:RadTab>
                    </Tabs>
                </telerik:RadTabStrip>
                <telerik:RadMultiPage runat="server" ID="Multipage1" SelectedIndex="0" RenderSelectedPageOnly="false">
                    <telerik:RadPageView runat="server" ID="FullClaimPage" Width="460px">
                            <asp:Panel ID="pFullClaim" runat="server" Width="100%" />                                                         
                    </telerik:RadPageView>
                    <telerik:RadPageView runat="server" ID="RemandsPage">
                        <asp:Panel ID="pRemandHistory" runat="server" Width="100%" />
                    </telerik:RadPageView>
                    <telerik:RadPageView runat="server" ID="DocketComments">
                        <asp:Panel ID="pDocketComments" runat="server" Width="100%" />
                    </telerik:RadPageView>
                </telerik:RadMultiPage>
            </asp:Panel>
        </NestedViewTemplate>
        <GroupByExpressions>
            <telerik:GridGroupByExpression>
                <SelectFields>
                    <telerik:GridGroupByField FieldAlias="-Docket_Status" FieldName="Docket_Status_Descr"
                        FormatString="{0:D}" HeaderValueSeparator=" : "></telerik:GridGroupByField>
                </SelectFields>
                <GroupByFields>
                    <telerik:GridGroupByField FieldName="Docket_Status_Descr" SortOrder="Descending">
                    </telerik:GridGroupByField>
                </GroupByFields>
            </telerik:GridGroupByExpression>
        </GroupByExpressions>
        <CommandItemSettings ExportToPdfText="Export to PDF"></CommandItemSettings>
        <RowIndicatorColumn Visible="True" FilterControlAltText="Filter RowIndicator column">
        </RowIndicatorColumn>
        <ExpandCollapseColumn Visible="True" FilterControlAltText="Filter ExpandColumn column">
        </ExpandCollapseColumn>
        <Columns>
            <telerik:GridEditCommandColumn ButtonType="ImageButton" UniqueName="EditCommandColumn"
                HeaderStyle-Width="25">
                <HeaderStyle Width="25px" />
                <ItemStyle CssClass="MyImageButton"></ItemStyle>
            </telerik:GridEditCommandColumn>
            <telerik:GridTemplateColumn SortExpression="docket_id" UniqueName="docket_id" DataField="docket_id"
                Resizable="true" Visible="true" Display="false">
                <ItemTemplate>
                    <asp:Label ID="lblDocketID" runat="server" Text='<%#Eval("docket_id") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <asp:Label ID="lblAddDocketID" runat="server" Text='<%#Eval("docket_id") %>'></asp:Label>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <asp:Label ID="lblEditDocketID" runat="server" Text='<%#Eval("docket_id") %>'></asp:Label>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="claimant_name" UniqueName="claimant_name"
                DataField="claimant_name" HeaderText="Claimant" Resizable="true" HeaderStyle-Width="125">
                <ItemTemplate>
                    <asp:Label ID="lblClaimant" runat="server" Text='<%#Eval("claimant_name") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <asp:Label ID="lblAddClaimant" runat="server" Text='<%#Eval("claimant_name") %>'></asp:Label>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <asp:Label ID="lblEditClaimant" runat="server" Text='<%#Eval("claimant_name") %>'></asp:Label>
                </EditItemTemplate>
                <HeaderStyle Width="125px" />
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Docket_Date" UniqueName="Docket_Date"
                DataField="Docket_Date" HeaderText="Docket Dt" Resizable="true">
                <ItemTemplate>
                    <asp:Label ID="lblDocketDate" runat="server" Text='<%#Eval("Docket_Date", "{0:M/d/yyy}") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <telerik:RadDatePicker ID="dpAddDocketDate" runat="server" Width="90">
                    </telerik:RadDatePicker>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <telerik:RadDatePicker ID="dpEditDocketDate" runat="server" Width="90" DbSelectedDate='<%#Eval("Docket_Date") %>'>
                    </telerik:RadDatePicker>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="claim_num" UniqueName="claim_num" DataField="claim_num"
                HeaderText="JCN" Resizable="true">
                <ItemTemplate>
                    <asp:Label ID="lblJCN" runat="server" Text='<%#Eval("claim_num") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="txtAddJCN" runat="server" Text='<%#Eval("claim_num") %>'></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rfvCarrier" runat="server" ErrorMessage="Invalid Claim Number"
                        ControlToValidate="txtAddJCN" Display="Dynamic"></asp:RequiredFieldValidator>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtEditJCN" runat="server" Text='<%#Eval("claim_num") %>'></asp:TextBox>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Docket_Comment" UniqueName="Docket_Comment"
                DataField="PTDRB_Comment" HeaderText="Docket Comment" Resizable="true" Visible="false">
                <ItemTemplate>

                </ItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="txtAddDocketComment" runat="server"></asp:TextBox>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtEditDocketComment" runat="server"></asp:TextBox>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Docket_Status" UniqueName="Docket_Status"
                DataField="Docket_Status_Descr" HeaderText="Docket Status" Resizable="true" DataType="System.String"
                HeaderStyle-Width="175">
                <ItemTemplate>
                    <asp:Label ID="lblDocketStatus" runat="server" Text='<%#Eval("Docket_Status_Descr") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <telerik:RadComboBox ID="cboAddDocketStatus" EnableLoadOnDemand="true" DataTextField="Docket_Status_Descr"
                        AutoPostBack="true" DataValueField="Docket_Status_ID" runat="server" Width="250"
                        SelectionMode="Single" OnItemsRequested="cboAddDocketStatus_ItemsRequested">
                    </telerik:RadComboBox>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <telerik:RadComboBox ID="cboEditDocketStatus" EnableLoadOnDemand="true" DataTextField="Docket_Status_Descr"
                        AutoPostBack="true" DataValueField="Docket_Status_ID" Text='<%#Eval("Docket_Status_descr") %>'
                        runat="server" Width="250" SelectionMode="Single" DataCheckedField='<%#Eval("Docket_Status_id")  %>'
                        OnItemsRequested="cboAddDocketStatus_ItemsRequested">
                    </telerik:RadComboBox>
                </EditItemTemplate>
                <HeaderStyle Width="175px" />
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="accident_date" UniqueName="accident_date"
                DataField="accident_date" HeaderText="DOI" Resizable="true" ReadOnly="true">
                <ItemTemplate>
                    <asp:Label ID="lblInjuryDate" runat="server" Text='<%#Eval("accident_date", "{0:M/d/yyy}") %>'></asp:Label>
                </ItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Claim_Admin" UniqueName="Claim_Admin"
                DataField="Claim_Admin" HeaderText="Claim Admin" Resizable="true" Visible="false"
                ReadOnly="true">
                <ItemTemplate>
                    <asp:Label ID="lblClaimAdmin" runat="server" Text='<%#Eval("Claim_Admin") %>'></asp:Label>
                </ItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Carrier" UniqueName="Carrier" DataField="Carrier"
                HeaderText="Carrier" Resizable="true" Visible="false" ReadOnly="true">
                <ItemTemplate>
                    <asp:Label ID="lblCarrier" runat="server" Text='<%#Eval("Carrier") %>'></asp:Label>
                </ItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Self_Insured" UniqueName="Self_Insured"
                DataField="Self_Insured" HeaderText="Self Insured" Resizable="true" Visible="false"
                ReadOnly="true">
                <ItemTemplate>
                    <asp:Label ID="lblSelfInsured" runat="server" Text='<%#Eval("Self_Insured") %>'></asp:Label>
                </ItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Payment_Received" UniqueName="Payment_Received"
                DataField="Payment_Received" HeaderText="Payment Received" Resizable="true" DataType="System.String"
                Visible="false">
                <ItemTemplate>
                    <asp:Label ID="lblPaymentReceived" runat="server" Text='<%#Eval("Payment_Received_descr") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <telerik:RadComboBox ID="cboAddPaymentReceived" EnableLoadOnDemand="true" DataTextField="Payment_Received"
                        AutoPostBack="true" DataValueField="Payment_Received" runat="server" Width="50"
                        SelectionMode="Single" OnItemsRequested="cboAddPaymentReceived_ItemsRequested">
                    </telerik:RadComboBox>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <telerik:RadComboBox ID="cboEditPaymentReceived" EnableLoadOnDemand="true" DataTextField="Payment_Received"
                        AutoPostBack="true" DataValueField="Payment_Received" Text='<%#Eval("Payment_Received_descr")  %>'
                        runat="server" Width="50" SelectionMode="Single" DataCheckedField='<%#Eval("Payment_Received")  %>'
                        OnItemsRequested="cboAddPaymentReceived_ItemsRequested">
                    </telerik:RadComboBox>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Petition_Date" UniqueName="Petition_Date"
                DataField="Petition_Date" HeaderText="Petition Dt" Resizable="true">
                <ItemTemplate>
                    <asp:Label ID="lblPetitionDate" runat="server" Text='<%#Eval("Petition_Date", "{0:M/d/yyy}") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <telerik:RadDatePicker ID="dpAddPetitionDate" runat="server" Width="90">
                    </telerik:RadDatePicker>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <telerik:RadDatePicker ID="dpEditPetitionDate" runat="server" Width="90" DbSelectedDate='<%#Eval("Petition_Date") %>'>
                    </telerik:RadDatePicker>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Date_Received" UniqueName="Date_Received"
                DataField="Date_Received" HeaderText="Date Rec" Resizable="true">
                <ItemTemplate>
                    <asp:Label ID="lblDateReceived" runat="server" Text='<%#Eval("Date_Received", "{0:M/d/yyy}") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <telerik:RadDatePicker ID="dpAddDateReceived" runat="server" Width="90">
                    </telerik:RadDatePicker>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <telerik:RadDatePicker ID="dpEditDateReceived" runat="server" Width="90" DbSelectedDate='<%#Eval("Date_Received") %>'>
                    </telerik:RadDatePicker>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Remand" UniqueName="Remand" DataField="remanded_from_descr"
                HeaderText="Remanded From" Resizable="true" DataType="System.String" Visible="false">
                <ItemTemplate>
                    <asp:Label ID="lblRemand" runat="server" Text='<%#Eval("remanded_from_descr") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <telerik:RadComboBox ID="cboAddRemand" EnableLoadOnDemand="true" DataTextField="remanded_from_descr"
                        AutoPostBack="true" DataValueField="Remanded_From_ID" runat="server" Width="70"
                        SelectionMode="Single" OnItemsRequested="cboAddRemand_ItemsRequested">
                    </telerik:RadComboBox>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <telerik:RadComboBox ID="cboEditRemand" EnableLoadOnDemand="true" DataTextField="remanded_from_descr"
                        AutoPostBack="true" DataValueField="Remanded_From_ID" Text='<%#Eval("remanded_from_descr")  %>'
                        runat="server" Width="70" SelectionMode="Single" OnItemsRequested="cboAddRemand_ItemsRequested"
                        DataCheckedField='<%#Eval("Remand_From_ID")  %>'>
                    </telerik:RadComboBox>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Remand_Date" UniqueName="Remand_Date"
                DataField="Remand_Date" HeaderText="Remand Date" Resizable="true" Visible="false">
                <ItemTemplate>
                    <asp:Label ID="lblRemandDate" runat="server" Text='<%#Eval("Remand_Date", "{0:M/d/yyy}") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <telerik:RadDatePicker ID="dpAddRemandDate" runat="server" Width="90">
                    </telerik:RadDatePicker>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <telerik:RadDatePicker ID="dpEditRemandDate" runat="server" Width="90" DbSelectedDate='<% #Eval("Remand_Date") %>'>
                    </telerik:RadDatePicker>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Remand_Comment" UniqueName="Remand_Comment"
                DataField="Remand_Comment" HeaderText="Remand Comment" Resizable="true" Visible="false">
                <ItemTemplate>
                    <asp:Label ID="lblRemandComment" runat="server" Text='<%#Eval("Remand_Comment") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="txtAddRemandComment" runat="server"></asp:TextBox>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtEditRemandComment" runat="server" Text='<%#Eval("Remand_Comment") %>'
                        AccessKey='<%#Eval("remand_comment_id") %>'></asp:TextBox>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Settlement_Date" UniqueName="Settlement_Date"
                DataField="Settlement_Date" HeaderText="Settlement Date" Resizable="true" Visible="false">
                <ItemTemplate>
                    <asp:Label ID="lblSettlementDate" runat="server" Text='<%#Eval("Settlement_Date", "{0:M/d/yyy}") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <telerik:RadDatePicker ID="dpAddSettlementDate" runat="server" Width="90">
                    </telerik:RadDatePicker>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <telerik:RadDatePicker ID="dpEditSettlementDate" runat="server" Width="90" DbSelectedDate='<%#Eval("Settlement_Date") %>'>
                    </telerik:RadDatePicker>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn SortExpression="Settlement_Comment" UniqueName="Settlement_Comment"
                DataField="Settlement_Comment" HeaderText="Settlement Comment" Resizable="true"
                Visible="false">
                <ItemTemplate>
                    <asp:Label ID="lblSettlementComment" runat="server" Text='<%#Eval("Settlement_Comment") %>'></asp:Label>
                </ItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="txtAddSettlementComment" runat="server"></asp:TextBox>
                </InsertItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtEditSettlementComment" runat="server" Text='<%#Eval("Settlement_Comment") %>'
                        AccessKey='<%#Eval("settlement_comment_id") %>'></asp:TextBox>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn UniqueName="DocketHistory" HeaderText="Docket">
                <ItemTemplate>
                    <asp:Button ID="btnHistory" runat="server" Text="History" CommandName="DocketHistory" />
                </ItemTemplate>
            </telerik:GridTemplateColumn>
        </Columns>
        <EditFormSettings ColumnNumber="3" CaptionFormatString="Edit details for Admin Claim Num: {0}"
            CaptionDataField="claim_num">
            <EditColumn FilterControlAltText="Filter EditCommandColumn column">
            </EditColumn>
            <FormTableStyle GridLines="Horizontal" CellPadding="2" CellSpacing="0" Height="110px">
            </FormTableStyle>
            <FormMainTableStyle GridLines="None" CellPadding="3" CellSpacing="0" Width="100%">
            </FormMainTableStyle>
            <FormCaptionStyle CssClass="EditFormHeader"></FormCaptionStyle>
            <FormTableItemStyle Wrap="False"></FormTableItemStyle>
            <FormTableAlternatingItemStyle Wrap="False"></FormTableAlternatingItemStyle>
            <FormTableButtonRowStyle HorizontalAlign="Right" CssClass="EditFormButtonRow"></FormTableButtonRowStyle>
        </EditFormSettings>
        <HeaderStyle Wrap="False" />
    </MasterTableView>
    <ClientSettings ReorderColumnsOnClient="True" AllowColumnsReorder="True" Selecting-AllowRowSelect="false">
        <Selecting AllowRowSelect="True"></Selecting>
        <Resizing AllowRowResize="True" AllowColumnResize="True" EnableRealTimeResize="True"
            ResizeGridOnColumnResize="False"></Resizing>
    </ClientSettings>
    <GroupingSettings ShowUnGroupButton="false"></GroupingSettings>
    <FilterMenu EnableImageSprites="False">
    </FilterMenu>
</telerik:RadGrid>
</asp:Panel> 
```

这是我背后的代码：

```
 public void LoadTabs(GridNestedViewItem viewitem)
    {
            //Find the first panel in the outer grid
            //Panel panel = ((GridNestedViewItem)item.ChildItem).FindControl("InnerContainer") as Panel;
            Panel panel = viewitem.FindControl("InnerContainer") as Panel;
            GridDataItem item = viewitem.ParentItem;

            if (panel != null)
            {

                //item.GetDataKeyValue("claim_num");
                //item.GetDataKeyValue("docket_id");

                //string s = item["docket_id"].ToString();

                ////Admin Claim Number
                //Label lblJCN = (Label)item["claim_num"].FindControl("lblJCN");

                //Label lblJCN = ((DataRowView)item.DataItem).Row["docket_id"].ToString();

                //string claim_num = ((DataRowView)item.DataItem).Row["claim_num"].ToString(); 

                string claim_num = item.GetDataKeyValue("claim_num").ToString();
                string docket_id = item.GetDataKeyValue("docket_id").ToString();

                //Docket ID
               // Label lblDocketID = (Label)item["docket_id"].FindControl("lblDocketID");

                //int docket_id = Convert.ToInt32(lblDocketID.Text);

                //string docket_id = ((DataRowView)item.DataItem).Row["docket_id"].ToString();

                Dictionary<string, string> paramValues = new Dictionary<string, string>();

                paramValues.Add("claim_num", claim_num);
                paramValues.Add("docket_id", docket_id.ToString());
                paramValues.Add("comment_type_id", "3");

                BaseUserControl ucFC = (BaseUserControl)LoadControl("UserControls\\UCFullClaim.ascx");
                Panel pFullClaim = Utility.FindControlRecursive(panel, "pFullClaim") as Panel;

                ucFC.ParamsValue = new Hashtable(paramValues);
                ucFC.LoadDataSet();
                pFullClaim.Controls.Add(ucFC);

                BaseUserControl ucRH = (BaseUserControl)LoadControl("UserControls\\UCRemandHistory.ascx");
                Panel pRemandHistory = Utility.FindControlRecursive(panel, "pRemandHistory") as Panel;

                ucRH.ParamsValue = new Hashtable(paramValues);
                ucRH.LoadDataSet();
                ucRH.ID = "ucRH";
                pRemandHistory.Controls.Add(ucRH);

                BaseUserControl ucDC = (BaseUserControl)LoadControl("UserControls\\UCComments.ascx");
                Panel pDocketComments = Utility.FindControlRecursive(panel, "pDocketComments") as Panel;

                ucDC.ParamsValue = new Hashtable(paramValues);
                ucDC.LoadDataSet();
                pDocketComments.Controls.Add(ucDC);
            }

        }

    protected void gdDocket_ItemCreated(object sender, GridItemEventArgs e)
    {
        if (e.Item is GridNestedViewItem)
        {
            LoadTabs(e.Item as GridNestedViewItem);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:15:35.933

没关系，我发现了我的问题。我没有绑定我的详细信息视图的数据源

# sketchup - Google SketchUp 将动态组件导出到 .dae 模型选项是否丢失？

> ID：15298203
> 
> 赞同：0
> 
> 时间：2013-03-08T16:04:10.483
> 
> 标签：sketchup

我已将此模型导出到 dae：

[http://sketchup.google.com/3dwarehouse/details?mid=c1e4befdfbfd283135b07d6213c348&prevstart=0](http://sketchup.google.com/3dwarehouse/details?mid=c1e4befdfbfd283135b07d6213c348&prevstart=0)

但是当我导入它时，它说 `There are no options to choose on this component..`

为什么 dae 模型中缺少选项？有没有办法添加这些动态选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:29:21.327

简短的回答：分解导入的组件，或者打开模型而不是导入它。

并非所有动态组件都以这种方式工作 - 有些在导入时可以正常工作。这取决于模型作者如何保存 DC。

# javascript - Backbone 和 TypeScript，一段不幸的婚姻：构建一个类型安全的“get”？

> ID：15298215
> 
> 赞同：12
> 
> 时间：2013-03-08T16:05:05.297
> 
> 标签：javascript, backbone.js, typescript

我正在尝试将 TypeScript 与 Backbone.js 一起使用。它“有效”，但是 Backbone 的 get() 和 set() 丢失了大部分类型安全性。我正在尝试编写一个可以恢复类型安全的辅助方法。像这样的东西：

我会把它放在我的模型中：

```
object() : IMyModel  {
    return attributes; // except I should use get(), not attributes, per documentation
} 
```

这在消费者中： `var myVar = this.model.object().MyProperty;`

通过这种语法，我得到 TypeScript 的知识，即 MyProperty 存在并且是 bool，这太棒了。但是，[backbone.js 文档](http://backbonejs.org/#Model-attributes)告诉我使用 get 和 set 而不是直接使用属性哈希。那么是否有任何神奇的 Javascript 方法可以通过正确地获取和设置来管理该对象的使用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-09T02:32:57.823

我们大量使用带有 TypeScript 的骨干网，并提出了一个新颖的解决方案。
考虑以下代码：

```
interface IListItem {
    Id: number;
    Name: string;
    Description: string;
}

class ListItem extends Backbone.Model implements IListItem {
    get Id(): number {
        return this.get('Id');
    }
    set Id(value: number) {
        this.set('Id', value);
    }
    set Name(value: string) {
        this.set('Name', value);
    }
    get Name(): string {
        return this.get('Name');
    }
    set Description(value: string) {
        this.set('Description', value);
    }
    get Description(): string {
        return this.get('Description');
    }

    constructor(input: IListItem) {
        super();
        for (var key in input) {
            if (key) {
                //this.set(key, input[key]);
                this[key] = input[key];
            }
        }
    }
} 
```

请注意，接口定义了模型的属性，构造函数确保传递的任何对象都具有 Id、Name 和 Description 属性。for 语句只是调用每个属性上的主干集。这样以下测试将通过：

```
describe("SampleApp : tests : models : ListItem_tests.ts ", () => {
    it("can construct a ListItem model", () => {
        var listItem = new ListItem(
            {
                Id: 1,
                Name: "TestName",
                Description: "TestDescription"
            });
        expect(listItem.get("Id")).toEqual(1);
        expect(listItem.get("Name")).toEqual("TestName");
        expect(listItem.get("Description")).toEqual("TestDescription");

        expect(listItem.Id).toEqual(1);

        listItem.Id = 5;
        expect(listItem.get("Id")).toEqual(5);

        listItem.set("Id", 20);
        expect(listItem.Id).toEqual(20);
    });
}); 
```

**更新：** 我更新了代码库以使用 ES5 get 和 set 语法，以及构造函数。基本上，您可以使用 Backbone .get 和 .set 作为内部变量。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-12T20:02:06.893

我使用泛型和 ES5 getter/setter 提出了以下内容，建立在[/u/blorkfish](https://stackoverflow.com/users/391150/blorkfish)答案的基础上。

```
class TypedModel<t> extends Backbone.Model {
    constructor(attributes?: t, options?: any) {
        super(attributes, options);

        var defaults = this.defaults();
        for (var key in defaults) {
            var value = defaults[key];

            ((k: any) => {
                Object.defineProperty(this, k, {
                    get: (): typeof value => {
                        return this.get(k);
                    },
                    set: (value: any) => {
                        this.set(k, value);
                    },
                    enumerable: true,
                    configurable: true
                });
            })(key);
        }
    }

    public defaults(): t {
        throw new Error('You must implement this');
        return <t>{};
    }
} 
```

注意：Backbone.Model 默认值是可选的，但由于我们使用它来构建 getter 和 setter，现在它是强制性的。抛出的错误迫使你这样做。或许我们能想出更好的办法？

并使用它：

```
interface IFoo {
    name: string;
    bar?: number;
}

class FooModel extends TypedModel<IFoo> implements IFoo {
    public name: string;
    public bar: number;

    public defaults(): IFoo {
        return {
            name: null,
            bar: null
        };
    }
}

var m = new FooModel();
m.name = 'Chris';
m.get('name'); // Chris
m.set({name: 'Ben', bar: 12});
m.bar; // 12
m.name; // Ben

var m2 = new FooModel({name: 'Calvin'});
m2.name; // Calvin 
```

它比理想的稍微冗长，它要求您使用默认值，但效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-30T22:26:45.640

这是一种使用装饰器的方法，创建一个像这样的基类：

```
export class Model<TProps extends {}> extends Backbone.Model {

    static Property(fieldName: string) {
        return (target, member, descriptor) => {
            descriptor.get = function() {
                return this.get(fieldName);
            };
            descriptor.set = function(value) {
                this.set(fieldName, value);
            };
        };
    }

    attributes: TProps;
} 
```

然后像这样创建自己的类：

```
class User extends Model<{id: string, email: string}> {
    @Model.Property('id')        set Id(): string { return null; }
    @Model.Property('email')     set Email(): string { return null; }
} 
```

并使用它：

```
var user = new User;
user.Email = 'email@me.ok';
console.log(user.Email); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-13T00:45:34.847

我正在为同样的问题苦苦挣扎，但我想我在 TypeScript 聊天组中找到了有趣的解决方案。该解决方案似乎很有希望，我想在这里分享。所以我的代码现在看起来像这样

```
//Define model structure
interface IMarkerStyle{
    Shape:string;
    Fill:string;
    Icon:string;
    Stroke:string;
};

export class MarkerStyle extends StrongModel<IMarkerStyle>{ 
```

```
//Usage
let style=new MarkerStyle();

//Most interesting part. Oddly enough thease lines check for type
style.s("Fill","#F00"); //setter OK:  Fill is defined as string
style.s("Fill",12.3);   //setter ERROR: because of type mismatch 
```

我得到的另一个好处是它检查默认值和构造函数参数是否符合接口。因此静态类型检查将不允许您为不存在的属性指定默认值

```
let style=new MarkerStyle(
  {
    Shape:"circle", //OK 
    Phill:"#F00",   //ERROR typo in field name
    Icon:"car"      //OK
                    //ERROR Stroke is not optional in interface and not specified here
  }
); 
```

# ruby-on-rails - Rails 应用程序不会推送 Heroku - Tilt gem

> ID：15298223
> 
> 赞同：1
> 
> 时间：2013-03-08T16:05:35.693
> 
> 标签：ruby-on-rails, ruby, heroku, gemfile, tilt

这就是我的 Gemfile 的样子：

```
source 'https://rubygems.org'

ruby '1.9.3'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

gem 'heroku'
gem 'tilt'
gem 'execjs'
gem 'therubyracer'
group :development do
  gem 'taps'
  gem 'rvm'
end 
```

这是我的 Gemfile.lock 文件的样子：

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.12)
      actionpack (= 3.2.12)
      mail (~> 2.4.4)
    actionpack (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.5)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.12)
      activesupport (= 3.2.12)
      builder (~> 3.0.0)
    activerecord (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
    activesupport (3.2.12)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    addressable (2.3.3)
    arel (3.0.2)
    builder (3.0.4)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.6.1)
    erubis (2.7.0)
    excon (0.16.10)
    execjs (1.4.0)
      multi_json (~> 1.0)
    heroku (2.35.0)
      heroku-api (~> 0.3.7)
      launchy (>= 0.3.2)
      netrc (~> 0.7.7)
      rest-client (~> 1.6.1)
      rubyzip
    heroku-api (0.3.8)
      excon (~> 0.16.10)
    hike (1.2.1)
    i18n (0.6.4)
    journey (1.0.4)
    jquery-rails (2.2.1)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    json (1.7.7)
    kgio (2.8.0)
    launchy (2.2.0)
      addressable (~> 2.3)
    libv8 (3.11.8.13)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.21)
    multi_json (1.6.1)
    netrc (0.7.7)
    pg (0.14.1)
    polyglot (0.3.3)
    rack (1.4.5)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.12)
      actionmailer (= 3.2.12)
      actionpack (= 3.2.12)
      activerecord (= 3.2.12)
      activeresource (= 3.2.12)
      activesupport (= 3.2.12)
      bundler (~> 1.0)
      railties (= 3.2.12)
    railties (3.2.12)
      actionpack (= 3.2.12)
      activesupport (= 3.2.12)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    raindrops (0.10.0)
    rake (10.0.3)
    rdoc (3.12.2)
      json (~> 1.4)
    ref (1.0.2)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rubyzip (0.9.9)
    sass (3.2.6)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    therubyracer (0.11.4)
      libv8 (~> 3.11.8.12)
      ref
    thor (0.17.0)
    tilt (1.3.5)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.36)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)
    unicorn (4.6.2)
      kgio (~> 2.6)
      rack
      raindrops (~> 0.7)

PLATFORMS
  ruby

DEPENDENCIES
  coffee-rails (~> 3.2.1)
  execjs
  heroku
  jquery-rails
  pg
  rails (= 3.2.12)
  sass-rails (~> 3.2.3)
  therubyracer
  uglifier (>= 1.0.3)
  unicorn 
```

当我运行时：

```
$ git push heroku master
Counting objects: 90, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (76/76), done.
Writing objects: 100% (90/90), 31.71 KiB, done.
Total 90 (delta 18), reused 0 (delta 0)

-----> Ruby/Rails app detected
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.3.0.pre.5
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       Fetching gem metadata from http://rubygems.org/.........
       Fetching gem metadata from http://rubygems.org/..
       Could not find tilt-1.3.5 in any of the sources
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:xxxxx.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:xxxxx.git' 
```

我试图解决的问题：

*   $bundle 安装倾斜
*   $捆绑更新
*   删除 .git 和 $git init
*   删除 gemfile.lock 并再次安装 $bundle
*   登录和退出heroku
*   重新启动计算机
*   按照[Heroku for Rails](https://devcenter.heroku.com/articles/rails3)、[Rails Apps](http://railsapps.github.com/rails-heroku-tutorial.html)的说明进行操作，并搜索了有关 heroku 和 rails 的所有 stackoverflow 问题，并对我建议的代码进行了更改。（这些问题通常是关于 sqlite 数据库的，但我已经解决了这个问题。）
*   祈祷
*   哭了

...而且这些都没有奏效。这两天我一直在不停地进行故障排除。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:12:04.130

似乎新版本的倾斜存在问题。在您的 Gemfile 中尝试指定

```
gem 'tilt', '1.3.4' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T08:03:49.873

我已经这样做了

`rm Gemfile.lock`做`bundle install`, (!) 然后`git add .`,`git commit`和`git push`.

# schema - 如何在不破坏版本表的情况下正确扩展 Propel 的现有架构？

> ID：15298224
> 
> 赞同：1
> 
> 时间：2013-03-08T16:05:37.013
> 
> 标签：schema, versioning, propel, extend

我想将一列 (IS_ACTIVE) 添加到现有表 (Book)。所以我相应地扩展了模式文件（schema.xml）。我按照文档中的描述完成了以下命令。

```
propel-gen om
propel-gen convert-conf
propel-gen sql 
```

我已经从 schema.sql 文件中删除了所有不必要的部分，这样只有受影响的表会被删除和重新创建。然后我执行：

```
propel-gen insert-sql 
```

不幸的是，版本表在这个过程中没有更新，产生了像这样的插入错误

```
Unable to execute SELECT statement [SELECT book_version.ID, book_version.TITLE,
 book_version.URL, book_version.COMMENTS, book_version.IS_ACTIVE,
 book_version.VERSION FROM `book_version` WHERE book_version.ID=:p1 ORDER BY 
 book_version.VERSION DESC LIMIT 1] [wrapped: SQLSTATE[42S22]: Column not found:
 1054 Unknown column 'book_version.IS_ACTIVE' in 'field list'] 
```

打电话时

```
$book->save(); 
```

如何正确扩展现有的 schema.xml 而不会遇到这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T04:45:02.757

首先在 runtime-conf.xml 上创建一个 buildtime-conf.xml 文件作为相同位置，并且内容也与 runtime-conf.xml 相同。

然后在命令下面一一运行。

1.  推进差异

2.  推动迁移

3.  产卵

4.  propel-gen 转换配置

    我想这会对你有所帮助。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:05:37.013

正如建议的那样，您应该从生成的 SQL 文件 (schema.sql) 中删除所有引用应该保持原样的表的 SQL 语句。但是除了引用应该更改的表的**语句之外，引用相应版本表的语句也必须包含在此文件中**。然后你可以运行

```
propel-gen insert-sql 
```

这应该可以解决问题。

# sql - Informix 中的数字查找和排序

> ID：15298230
> 
> 赞同：1
> 
> 时间：2013-03-08T16:05:57.653
> 
> 标签：sql, vb.net, informix

我在 IBM Informix 数据库中有一个表，其中有一个数据类型为 CHAR(15) 的列“级别”。如果我对该列执行 SELECT DISTINCT，前 5 个结果是：

*   未知
*   菜鸟
*   1级
*   2A级
*   2B级

**我的意图是编写一个查询，该查询将按该列中数字**的升序对结果进行排序。我已经通过 VB.NET 代码实现了它，但想知道我是否可以在查询中实现它。

```
' Results is a generic list of a class with properties corresponding to column names
' I am using IDataReader to go through the queried rows and load the data to 'results'
results = results.OrderBy(Of Integer)(Function(p) Utilities.ExtractNumber(p.Level)) 
```

这就是 ExtractNumber 方法的样子：

```
Public Shared Function ExtractNumber(ByVal expr As String) As Integer
    Dim number As Integer = 0
    Dim character As Char
    Dim startPos As Integer = -1
    Dim endPos As Integer = -1

    For pos = 0 to expr.Length - 1
        character = expr(pos)

        If Char.IsDigit(character) And startPos = -1 Then
            startPos = pos
        Else If Not Char.IsDigit(character) And startPos > -1 Then
            endPos = pos
            Integer.TryParse(expr.Substring(startPos, endPos - startPos), number)

            Exit For
        End If
    Next

    'Number extends till end of string
    If startPos > -1 And endPos = -1 Then
        Integer.TryParse(expr.Substring(startPos), number)
    EndIf
End Function 
```

我的代码所做的是它为该列中的每个值查找字符串中第一次出现的数字。如果字符串中有多个数字（例如 ALPHA 1C 211"，它将返回 1，这是第一个数字。如果不存在数字，例如在“未知”中，它将只返回 0。

我上面所做的可以使用 Regex.Split 轻松完成，但我没有使用它，因为它返回一个字符串数组，其中包含数字前的空元素。

有没有办法可以在 SQL 查询中提取这个数字？也许使用某种字符串操作来摆脱除第一个数字之外的所有内容？不过，我不允许编写函数，所以如果可能的话，我必须在一个查询中完成所有这些操作。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:51:13.817

您的级别是否仅限于一个数字或至少一个已知的集合？如果是，case 语句可能会起作用。根据您对有效值的了解，您必须使用匹配模式以获得“ALPHA 2C 211”的正确结果。这在具有大约 89K 行的表中的 varchar(256) 字段上相当快。不确定大约 220 万：

```
SELECT
   CASE
   WHEN pr_last_name matches("*1*")
      THEN 1
   WHEN pr_last_name matches("*2*")
      THEN 2
   WHEN pr_last_name matches("*3*")
      THEN 3
   WHEN pr_last_name matches("*4*")
      THEN 3
   WHEN pr_last_name matches("*5*")
      THEN 4
   WHEN pr_last_name matches("*5*")
      THEN 5
   WHEN pr_last_name matches("*6*")
      THEN 6
   ELSE
      0
   END,
count(*)
FROM person
group by 1
order by 1 
```

样本输出：

```
0   88255
1   469
2   231
3   193
4   53
6   37 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:29:55.717

正如我最初提到的，虽然你不能使用用户定义的函数，但你不能解决这个问题。这根本不可行。

如果你可以使用一个函数，那么试试这个大小：

```
CREATE FUNCTION find_first_number(str VARCHAR(32), def INTEGER DEFAULT 0)
    RETURNING INTEGER AS number
    WITH(NOT VARIANT);

    DEFINE i    INTEGER;
    DEFINE j    INTEGER;
    DEFINE l    INTEGER;
    DEFINE c    CHAR(1);
    DEFINE nstr VARCHAR(32);

    IF str IS NULL THEN
        RETURN def;
    END IF;
    LET l = LENGTH(str);
    FOR i = 0 TO l
        LET c = SUBSTR(str, i, 1);
        IF c >= "0" AND c <= "9" THEN
            LET nstr = c;
            FOR j = i + 1 TO l
                LET c = SUBSTR(str, j, 1);
                IF c >= "0" AND c <= "9" THEN
                    LET nstr = nstr || c;
                ELSE
                    RETURN nstr;    -- String of digits in middle of string
                END IF;
            END FOR;
            RETURN nstr;    -- String of digits at end of string
        END IF;
    END FOR;

    RETURN def;

END FUNCTION; 
```

该`WITH(NOT VARIANT)`子句告诉优化器对于相同的输入，函数总是产生相同的输出（因此输出对于给定的输入是不变的）。

测试代码：

```
CREATE TEMP TABLE ffn_test
(
    str     VARCHAR(32),
    def     INTEGER,
    num     INTEGER
);

INSERT INTO ffn_test VALUES("UNKNOWN", 0, 0);
INSERT INTO ffn_test VALUES("ROOKIE", -1, -1);
INSERT INTO ffn_test VALUES("LEVEL 1", 0, 1);
INSERT INTO ffn_test VALUES("LEVEL 2A", 0, 2);
INSERT INTO ffn_test VALUES("LEVEL 2B", 0, 2);
INSERT INTO ffn_test VALUES("LEVEL 20", 0, 20);
INSERT INTO ffn_test VALUES("LEVEL 999", 0, 999);
INSERT INTO ffn_test VALUES("LEVEL 3.0", 0, 3);
INSERT INTO ffn_test VALUES(NULL, 0, 0);

SELECT str, def, num,
       find_first_number(str, def) AS result,
       CASE WHEN num = find_first_number(str, def) THEN "PASS" ELSE "FAIL" END pass_fail
  FROM ffn_test; 
```

测试输出：

```
UNKNOWN     0           0           0           PASS
ROOKIE      -1          -1          -1          PASS
LEVEL 1     0           1           1           PASS
LEVEL 2A    0           2           2           PASS
LEVEL 2B    0           2           2           PASS
LEVEL 20    0           20          20          PASS
LEVEL 999   0           999         999         PASS
LEVEL 3.0   0           3           3           PASS
            0           0           0           PASS 
```

# scala - akka firstCompletedOf，识别消息发送者

> ID：15298231
> 
> 赞同：2
> 
> 时间：2013-03-08T16:06:00.187
> 
> 标签：scala, akka, future, promise

我正在使用 Scala 2.10 / Akka 2.1 / Play 2.1，我对 firstCompletedOf 有疑问。如何在 firstCompletedOf 正文中识别结果的发送者？看下面的代码：

```
val futureString: Future[String] = myTestActor.ask(Message).mapTo[String]
val timeoutFuture = play.api.libs.concurrent.Promise.timeout("timed_out", 5 seconds)

Async {
  Future.firstCompletedOf(Seq(futureString, timeoutFuture)).map {
    case result: String => {
      println("got message " + result)
    }
  }
} 
```

在某些时候里面`myTestActor`有一个`sender ! "actor_result"`，但超时可能首先出现。

有没有一种快速、方便的方法来识别结果的发送者？`sender`不起作用，我认为对字符串的检查（如果等于`timed_out`）会很脏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:34:12.200

怎么样：

```
val futureString: Future[String] = myTestActor.ask(Message).mapTo[String]
val timeoutFuture: Future[String] = play.api.libs.concurrent.Promise.timeout(throw new TimeoutException(), 5 seconds)

Async {
  Future.firstCompletedOf(Seq(futureString, timeoutFuture)) map {
    case result: String => println("got message " + result)
  } recover {
    case _: TimeoutException => "Timed out?"
  }
} 
```

# java - 如何在不丢失 Java 精度的情况下将 String 转换为 Double？

> ID：15298232
> 
> 赞同：5
> 
> 时间：2013-03-08T16:06:00.660
> 
> 标签：java

尝试如下

```
String d=new String("12.00");
Double dble =new Double(d.valueOf(d));
System.out.println(dble); 
```

输出：12.0

但我想获得 12.00 精度

请让我知道在字符串类中不使用 format() 方法的正确方法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T16:07:13.700

使用[`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)代替双精度：

```
String d = "12.00"; // No need for `new String("12.00")` here
BigDecimal decimal = new BigDecimal(d); 
```

这是有效的，因为`BigDecimal`维护了“精度”，并且`BigDecimal(String)`构造函数将其设置为 . 右侧的位数`.`，并在`toString`. 因此，如果您只是将其转储出来`System.out.println(decimal);`，它就会打印出来`12.00`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-08T16:08:53.477

您的问题不是精度损失，而是您的数字的输出格式及其小数位数。你可以用它[`DecimalFormat`](http://download.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)来解决你的问题。

```
DecimalFormat formatter = new DecimalFormat("#0.00");
String d = new String("12.00");
Double dble = new Double(d.valueOf(d));
System.out.println(formatter.format(dble)); 
```

我还将补充一点，您可以使用[`DecimalFormatSymbols`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormatSymbols.html)来选择要使用的小数分隔符。例如，一个点：

```
DecimalFormatSymbols separator = new DecimalFormatSymbols();
separator.setDecimalSeparator('.'); 
```

然后，在声明您的`DecimalFormat`:

```
DecimalFormat formatter = new DecimalFormat("#0.00", separator); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T16:10:00.197

您没有丢失任何精度，12.0 正好等于 12.00。如果要显示或打印 2 位小数，请使用`java.text.DecimalFormat`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T16:09:18.450

如果要格式化输出，请使用[PrintStream#format(...)](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#format%28java.lang.String,%20java.lang.Object...%29)：

```
System.out.format("%.2f%n", dble); 
```

有`%.2f`- 小数点后两位和`%n`- 换行符。

## 更新：

如果您不想使用`PrintStream#format(...)`，请使用[`DecimalFormat#format(...)`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html).

# django - django session，函数必须返回session可以修改吗？

> ID：15298234
> 
> 赞同：0
> 
> 时间：2013-03-08T16:06:05.990
> 
> 标签：django, session

```
@dajaxice_register
def sendMailByIndex(request,confid,mailentyid,start_id,count):
    dajax = Dajax()
    for i in range(1,100000):
        print request.session.session_key
        request.session['percent']=i
        time.sleep(1)
    return dajax.json()
@dajaxice_register
def getProgress(request):
    dajax = Dajax()
    print request.session.session_key
    print request.session['percent']
    dajax.add_data(random.randint(1,100), 'recProgress')
    return dajax.json() 
```

在`sendMailByIndex`我要更改的功能中`session['percent']`，它将运行很长时间。然后我想调用 getProgress 来获取进度。但它不起作用，`session['percent']`不改变？如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:10:37.800

默认情况下，会话在请求结束时保存到数据库中。显式调用`save`：

```
@dajaxice_register
def sendMailByIndex(request, confid, mailentyid, start_id, count):
    dajax = Dajax()
    for i in range(1, 100000):
        print request.session.session_key
        request.session['percent'] = i
        request.session.save()
        time.sleep(1)
    return dajax.json() 
```

# bash - CATALINA_OPTS 调试选项

> ID：15298237
> 
> 赞同：0
> 
> 时间：2013-03-08T16:06:15.757
> 
> 标签：bash, tomcat, catalina

我想使用下面的代码来启动 apache-tomcat，

```
#!/bin/bash
DUMPSPATH='/home/tomcat/dumps'
export CATALINA_OPTS='-Djava.awt.headless=true -Dfile.encoding=UTF-8 -XX:ErrorFile=$DUMPSPATH/hs_err_pid%p.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=$DUMPSPATH'
/opt/apache-tomcat-6.0.36/bin/startup.sh 
```

只是想检查 DUMPSPATH 变量是否在导出语句中正确使用，或者 DUMPSPATH 是否应该用大括号或括号括起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:22:02.910

如果您想要 CATALINA_OPTS 中 DUMPSPATH 的内容（请参阅[变量替换](http://tldp.org/LDP/abs/html/varsubn.html)），您必须使用双引号而不是单引号：

```
export CATALINA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -XX:ErrorFile=$DUMPSPATH/hs_err_pid%p.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=$DUMPSPATH" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:16:56.490

只要`$DUMPSPATH`后面没有作为参数名称的合法字符的字符（例如`_`），您就可以按原样进行。也就是说，使用它永远不会出错`${DUMPSPATH}`，所以为了安全起见，请随意使用它。

# c# - 在标记的枚举中“或”所有值的最佳方法？

> ID：15298239
> 
> 赞同：16
> 
> 时间：2013-03-08T16:06:23.720
> 
> 标签：c#, enums

鉴于`enum`：

```
[Flags]
public enum mytest
{
    a = 1,
    b = 2,
    c = 4
} 
```

我想出了两种方法来表示单个变量中的所有值：

```
 var OR1 = (mytest)Enum.GetNames(typeof(mytest)).Sum(a => (int)Enum.Parse(typeof(mytest), a));
    var OR2 = (mytest)(typeof(mytest).GetEnumValues() as mytest[]).Sum(a => (int)a); 
```

现在，虽然它们都可以工作，但有没有更简洁的方法？可能是我缺少的 .NET 方法？

编辑：为澄清起见，我需要该函数是动态的——我不想通过指定每个`enum`值来计算它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-08T16:08:58.413

`All`如果拥有一个成员是有意义的，只需直接提供它：

```
[Flags]
public enum mytest
{
    a = 1,
    b = 2,
    c = 4,
    All = 7
} 
```

不过，写这些更惯用的方式可能是：

```
[Flags]
public enum MyTest
{
    A = 1,
    B = 1 << 0x01,
    C = 1 << 0x02,
    All = A | B | C
} 
```

这显示了枚举值的逻辑进展，并且在这种`All`情况下，可以轻松添加另一个成员。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-08T16:10:38.557

用于[`Enumerable.Aggregate()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aggregate.aspx)按位或将它们放在一起。即使您有代表多个设置位的枚举值，这也将起作用，而不是`Sum()`.

```
var myTestValues = (MyTest[]) typeof(MyTest).GetEnumValues();
var sum = myTestValues.Aggregate((a, b) => a | b);
sum.Dump(); 
```

使这个泛型有点棘手，因为您不能将泛型类型限制为枚举，原始类型之间也没有任何子类型关系。我能想到的最好的假设是底层类型在`int`大多数情况下应该足够好：

```
TEnum AllEnums<TEnum>() 
{
    var values = typeof(TEnum).GetEnumValues().Cast<int>();
    return (TEnum) (object) values.Aggregate((a,b) => a|b);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-08T16:08:34.777

对于泛型方法，使用 Linq 的[Enumerable.Aggregate](http://msdn.microsoft.com/en-us/library/bb549218.aspx)扩展方法；

```
var flags = Enum.GetValues(typeof(mytest))
                .Cast<int>()
                .Aggregate(0, (s, f) => s | f); 
```

或者在包装方法中

```
TEnum GetAll<TEnum>() where TEnum : struct
{
    return (TEnum) (object)
            Enum.GetValues(typeof(TEnum))
                .Cast<int>()
                .Aggregate(0, (s, f) => s | f);
} 
```

*这个双重施法技巧的全部功劳归于@millimoose*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T16:18:39.730

确保将所有枚举位设置为仅设置所有位的最简单方法：

```
mytest allValues = (mytest)int.MaxValue; 
```

这假设设置不对应于任何枚举的位没有问题，但这很可能是真的。您可以将其与任何枚举值相结合，结果将成真，这很可能是最终目标。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T16:25:57.810

像这样的东西怎么样

```
var all = Enum.GetValues(typeof(MyEnum)).Cast<MyEnum>().Last() * 2 - 1; 
```

基本上

```
all = max*2-1 
```

这仅适用于从 1 到最大值的所有值。

1,2,4...32,64...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-21T00:00:37.407

考虑到潜在的类型转换问题，这并不像乍一看那么容易：

```
static public TEnum GetAllFlags<TEnum>() where TEnum : struct, IComparable, IFormattable, IConvertible
    {
        unchecked
        {
            if (!typeof(TEnum).IsEnum)
                throw new InvalidOperationException("Can't get flags from non Enum");
            object val = null;
            switch (Type.GetTypeCode(Enum.GetUnderlyingType(typeof(TEnum))))
            {
                case TypeCode.Byte:
                case TypeCode.SByte:
                    val = Enum.GetValues(typeof(TEnum))
                                .Cast<Byte>()
                                .Aggregate(default(Byte), ( s, f) => (byte)(s | f));
                    break;
                case TypeCode.Int16:
                case TypeCode.UInt16:
                    val = Enum.GetValues(typeof(TEnum))
                                .Cast<UInt16>()
                                .Aggregate(default(UInt16), ( s, f) => (UInt16)(s | f));
                    break;
                case TypeCode.Int32:
                case TypeCode.UInt32:
                    val = Enum.GetValues(typeof(TEnum))
                                .Cast<UInt32>()
                                .Aggregate(default(UInt32), ( s, f) => (UInt32)(s | f));
                    break;
                case TypeCode.Int64:
                case TypeCode.UInt64:
                    val = Enum.GetValues(typeof(TEnum))
                                .Cast<UInt64>()
                                .Aggregate(default(UInt64), ( s, f) => (UInt64)(s | f));
                    break;
                default :
                    throw new InvalidOperationException("unhandled enum underlying type");

            }
            return (TEnum)Enum.ToObject(typeof(TEnum), val);
        }
    } 
```

[可以在此处](http://www.codeproject.com/Articles/22513/Extending-the-Enum-Class-to-Validate-the-Enum-Val)找到有关此类转换的更多信息

# command-line - 如何用 wget 解决空 index.html 问题？

> ID：15298240
> 
> 赞同：3
> 
> 时间：2013-03-08T16:06:27.283
> 
> 标签：command-line, download, wget

我想下载远程服务器上一个文件夹中的所有文件我在 Windows 客户端上使用 Wget 我的命令是：

```
>wget -r http://www.example.com/getfeed/d165161dasdvc561551as1v6/soccerfixtures/england/ 
```

这一行给了我 index.html 大小（0 KB）。

我当时用：

```
>wget -r --reject "index.html*" http://www.example.com/getfeed/d165161dasdvc561551as1v6/soccerfixtures/england/ 
```

现在，即使我排除了 index.html，我也没有得到任何文件，但我仍然没有下载任何文件，有人可以帮我解决这个问题并告诉我为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:14:16.360

这仅在对端的 Web 服务器配置为为您提供目录列表时才有效。并非所有服务器都以这种方式配置。大多数会自动将您重定向到您要求 wget 忽略的 index.html、index.php 等。

在第一种情况下，您不忽略 index.html，wget 只会跟随该页面中的链接。由于 web 服务器返回的 index.html 的大小为零，因此 wget 没有链接可以跟随，它终止。Wget 无法明确知道目录中有哪些文件。

编辑地址评论：

$ wget -i 下载文件列表.txt

# google-finance - 谷歌财务请求获取数量数据

> ID：15298243
> 
> 赞同：1
> 
> 时间：2013-03-08T16:06:29.997
> 
> 标签：google-finance, google-finance-api

[http://finance.google.com/finance/info?client=ig&q=NASDAQ%3aGOOG](http://finance.google.com/finance/info?client=ig&q=NASDAQ%3aGOOG) 这会立即返回实时最后价格（如 15 分钟在雅虎）。是否有可能从谷歌金融获得当天的当前交易量？

# ruby-on-rails - 设计用户路径

> ID：15298245
> 
> 赞同：0
> 
> 时间：2013-03-08T16:06:30.440
> 
> 标签：ruby-on-rails, routes, controllers

我正在使用设计进行身份验证，效果很好。我需要一个个人资料页面，并且我创建了一个控制器`Users`并在其中有一个`show`方法，该方法链接到`show.html.erb`并且一旦传递了 id 就可以工作。

我想在个人资料中添加一个链接以转到该 url `/users/[:id]`，但我无法使其正常工作。我试过了：

```
match 'users/:id', :to 'users#show', :as => :profile 
```

但我收到错误说没有动作节目。

谁能给我一些建议，以获取指向他们个人资料的链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T16:13:25.457

如果你想要一些东西去 /users/:id 是不是很简单：

路线.rb

```
resources :users 
```

view_file.html.erb

```
<%= link_to "Bob's profile", user_path(user_id) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:08:23.993

你的路线应该是

```
match 'users/:id', :to => 'users#show', :as => :profile
                      ^^^^ 
```

# plugins - 为什么 Lua 用于配置/插件？

> ID：15298253
> 
> 赞同：6
> 
> 时间：2013-03-08T16:06:53.110
> 
> 标签：plugins, configuration, lua

在我看来，Lua 基本上是一种普通的脚本语言，与 PHP、Python 或 Ruby 没有太大的区别，这些语言都[比较有名](http://www.google.com/trends/explore#q=PHP,%20Python,%20Ruby,%20Lua)。

但另一方面，有很多项目（例如[很棒的窗口管理器](http://awesome.naquadah.org/)）需要在 Lua 中进行配置和/或插件。因此，我认为应该有一些理由让这种通常不为人知的语言成为众多有才华的开发人员最喜欢的选择。你能说出一些吗？

你从使用/学习 Lua 中获得了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T23:06:23.577

Lua 的主要目标是编写脚本和扩展用 C 编写的托管应用程序。虽然它已经成为强大的独立语言，但它保留了易于嵌入应用程序的特性作为主要特性。

据我了解它的历史，PHP 的出现是因为需要有更简单的方法来编写 Web 应用程序。虽然它可以独立于 Web 服务器使用，但这种使用并不常见。

Python 和 Ruby（与 Perl 一样）最初是具有特定设计目标的独立语言。虽然可以将 Python 解释器嵌入到更大的应用程序中，但这并不是早期对其用户社区很重要的功能。今天，Python 比 Perl 更容易嵌入到应用程序中，但两者都作为构建从小型脚本到功能齐全的 GUI 应用程序的框架而大放异彩。

Ruby（也与 Perl 类似）在 Web 应用程序领域获得了很多可见性，原因可能是 Rails 框架。虽然我不能从个人经验中对 Ruby 说太多，但它经常在[Tiobe 指数](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html)中名列前茅。我的（有限的）理解是，将 Ruby 解释器嵌入到更大的应用程序中并不是早期的设计目标，但可以做到，并且显然甚至得到了更新版本的支持。刚才在 SO 关于嵌入 Ruby 的问题的快速浏览似乎产生了“不要那样做，使用 Lua 代替”与“有可能，去做”平衡的共识。

Perl 无疑是​​最出名的一种独立脚本语言，它早于现代网络。随着 CGI 的发展，Perl 在那里找到了归宿，这要归功于被解释，这使得在 Perl 中编写 CGI 脚本以在具有有限（或没有）命令行访问权限的商业托管 Web 服务器上运行实际上是可行的。虽然使用 C 编写的库代码来扩展 Perl 是可能的（现在甚至相当容易），但在应用程序中嵌入 Perl 解释器从来都不是一件容易的事。我在 Perl 社区边缘多年的感觉始终是嵌入从来都不是优先事项。

Lua 在强大的功能和简单的语法之间取得了很好的平衡。即使是非程序员也很容易阅读和修改 Lua 脚本。将其用作配置语言通常是迈向完全可编写脚本的应用程序的第一步。使用 Lua 在启动时解析并执行配置文件以获取程序设置非常简单。一旦该功能可用，将 Lua 核心用于其他任务就变得很容易（“它只是坐在那里”）。作为一个自然的发展过程，最终得到一个应用程序是由一层薄薄的 C 代码、C 中的核心“硬”功能、C 中的 UI 框架以及大部分用户体验用 Lua 编写的，这并不罕见。例如，[Adobe Lightroom](http://since1968.com/article/190/mark-hamburg-interview-adobe-photoshop-lightroom-part-2-of-2)就是这样构建的。

整个 Lua 源工具包，包括参考手册和二进制发行版只需要 1 MB 左右的存储空间，这并没有什么坏处。（现在在我的 Windows 机器上，Lua 和它的 DLL 总计刚刚超过 200KB，而 Perl 和它的 DLL 的重量约为 1.7MB。对于大多数应用程序来说，这意味着添加一个 Lua 解释器会花费大约 200KB 的额外可执行文件大小。 )

要考虑的另一个因素可能是许可证。像许多成功的脚本语言一样，Lua 是开源的。但是，它是根据明确允许商业用途的简单易懂的[MIT 许可证获得许可](http://www.opensource.org/licenses/mit-license.html)[的。](http://www.lua.org/copyright.html)虽然在 GPL（或更可能是 LGPL）下发布的产品可以进入商业环境，但它给律师带来了更多的麻烦。一个简单的许可证，例如适用于 Lua 的许可证，很容易让您的法律部门同意。因此，Lua 被用于一些[重要的商业产品](http://www.lua.org/uses.html)中，并且这些产品的开发团队已经在 Lua 语言社区中可见。

**编辑：**由于评论指出它在 Rails 框架之前更丰富的历史，我已经修改了我对 Ruby 的讨论。这提供了一个借口来给 Perl 自己的段落，并用具体的测量来吹嘘 Lua 的大小。是的，我确实喜欢 Lua。很多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T16:16:58.477

Lua 相对轻量级，旨在轻松嵌入（并与之交互）应用程序。这通常使它成为比设计为独立运行并创建自己的整个小世界的重型语言更好的选择。

# ios - 检查线程（使用 GCD）是否存在或已完成

> ID：15298254
> 
> 赞同：2
> 
> 时间：2013-03-08T16:06:54.333
> 
> 标签：ios, objective-c, multithreading, grand-central-dispatch

我希望能够在他们登录后在后台从我们的服务器下载一些数据。有没有办法可以设置它，所以当用户进入程序的那个部分（比如下载食谱）时，我可以检查是否有尚未保存的新食谱的当前下载？

如果用户去菜谱，并看到某种指示它当前正在下载新菜谱，那就太好了。

我可以命名线程吗？我可以将所有“配方”线程放入堆栈并检查它是空的还是里面有线程？

我正在使用 GCD。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:34:10.587

这就是我在使用 GCD 时会做的事情（未经测试，但要吸取的教训是，您可以 `dispatch_group_notify`在下载完成后使用全局标志来指示下载过程的状态）。

```
-(void)downloadRecipes
{
    //<--Start activity indicator-->
    //isDownloading = YES; //<- Some global flag to indicate download in progress
    //--or--
    //[[NSNotificationCenter defaultCenter] postNotificationName:@"DownloadDidBegin"];
    dispatch_block_t executionBlock = 
        ^{
              //Your download logic here
         };
    dispatch_block_t executionBlock_OnComplete =
        ^{
             //isDownloading = NO; //<- Global flag indicates no longer downloading
             //--or--
             //[[NSNotificationCenter defaultCenter] postNotificationName:@"DownloadDidEnd"];
             //<--Stop activity indicator-->
         };
    dispatch_queue_t someQueue = dispatch_queue_create("com.myapp.recipe.download", NULL);
    dispatch_group_t group = dispatch_group_create();
    dispatch_group_async(group, someQueue, executionBlock);
    dispatch_group_notify(group, dispatch_get_main_queue(), executionBlock_OnComplete);
    dispatch_release(group);
    dispatch_release(queue);
} 
```

或者，您可以使用`NSNotificationCenter`在进程开始和完成时发布通知，而不是设置全局标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T16:29:26.743

我建议您的模型具有指示下载状态的属性，而不是检查调度队列的状态。您可以让您的 GCD 代码在下载开始时将状态更改为“正在下载”，然后在下载完成后将该状态更改回其他状态。因为您似乎有多个视图控制器想要与此后台下载操作进行交互，所以您可能需要使用本地通知（或 KVN），以便任何依赖于模型状态的视图都可以在适当的时间自行更新。

如果您使用操作队列而不是调度队列（这对于其他原因也很有用，例如您想要并发下载但希望将其限制在某个合理的数量），理论上您可以使用`operationCount`，但我仍然倾向于维护如上所述的下载状态模型属性。

# python - 姜戈。获取未列出的项目

> ID：15298257
> 
> 赞同：0
> 
> 时间：2013-03-08T16:07:08.047
> 
> 标签：python, django, django-queryset

```
class Photo(models.Model):
    viewsT = models.ManyToManyField('PhotoViewT', symmetrical=False)
    ...

class PhotoViewT(models.Model):
    photo = models.ForeignKey('Photo', related_name="PhotoView")
    ... 
```

我必须制作过滤器以获取尚未查看的照片。在“PhotoViewT”中，我存储查看过的照片。换句话说，需要获取除“PhotoViewT”中的所有照片作为“照片”。可能吗？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:40:56.087

您应该删除 PhotoView 上的照片 ForeignKey，然后此查询应该可以工作：

```
Photo.objects.filter(viewsT__isnull=True) 
```

# ios - RACSignal combineLatest 使用多个 UIControls

> ID：15298260
> 
> 赞同：3
> 
> 时间：2013-03-08T16:07:26.147
> 
> 标签：ios, reactive-cocoa

我正在尝试使用[Reactive Cocoa](https://github.com/ReactiveCocoa/ReactiveCocoa)，但在组合来自多个 UIControls 的信号时遇到了麻烦。

我正在为 UIEdgeInsets 创建一个编辑器，并有四个 UISteppers，用于顶部、左侧、底部和右侧的插图。

我*想做*的是：

```
RAC(self.insets) = [RACSignal combineLatest:@[
          [topStepper rac_signalForControlEvents:UIControlEventValueChanged],
          [leftStepper rac_signalForControlEvents:UIControlEventValueChanged],
          [bottomStepper rac_signalForControlEvents:UIControlEventValueChanged],
          [rightStepper rac_signalForControlEvents:UIControlEventValueChanged]
          ] reduce:^(UIStepper *top, UIStepper *left, UIStepper *bottom, UIStepper *right) {
              return [NSValue valueWithUIEdgeInsets:UIEdgeInsetsMake(top.value, left.value, bottom.value, right.value)];
          }]; 
```

但是，这绝不会导致信号被处理。

如果我只包含一个信号，如下所示：

```
RAC(self.insets) = [RACSignal combineLatest:@[
    [topStepper rac_signalForControlEvents:UIControlEventValueChanged]]
    reduce:^(UIStepper *top) {
        return [NSValue valueWithUIEdgeInsets:UIEdgeInsetsMake(top.value, 0.0,0.0,0.0)];
    }]; 
```

它按预期工作（单独观察任何其他步进器也可以正常工作）但对于多个控件，我什么也得不到。我可以通过将每个控件视为一个单独的信号来解决问题，但这似乎错过了`combineLatest`方法的重点。我做错了什么，还是应该在 RAC 项目上提出问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T16:35:54.607

这是因为为了`combineLatest:reduce:`运行，该数组中的每个控件都必须广播至少一个信号以开始（观察最新的信号的任何非变异值都不会调用 reduce 块）。您可以很清楚地看到它，因为每个控件都必须至少轻按一次才能开始产生有效信号，这些信号会像您期望的那样被投入和处理。正如贾斯汀所说，您可以使信号具有初始值，这应该比调用更快地获得正确的值并运行`-sendActionForControlEvent:`

```
RAC(self.insets) = [RACSignal combineLatest:@[
                    [[self.topStepper rac_signalForControlEvents:UIControlEventValueChanged]startWith:nil],
                    [[self.leftStepper rac_signalForControlEvents:UIControlEventValueChanged]startWith:nil],
                    [[self.bottomStepper rac_signalForControlEvents:UIControlEventValueChanged]startWith:nil],
                    [[self.rightStepper rac_signalForControlEvents:UIControlEventValueChanged]startWith:nil]
                    ] reduce:^(UIStepper *top, UIStepper *left, UIStepper *bottom, UIStepper *right) {
                        return [NSValue valueWithUIEdgeInsets:UIEdgeInsetsMake(top.value, left.value, bottom.value, right.value)];
                    }]; 
```

# javascript - 升级的 jQuery、.on() 和 document.ready 不能与 UpdatePanels 一起使用

> ID：15298266
> 
> 赞同：0
> 
> 时间：2013-03-08T16:07:43.767
> 
> 标签：javascript, jquery, asp.net, .net

我在 StackOverflow 上看到了其他一些解决方案，但我特别好奇为什么这突然不起作用。一点背景... 我们仍在使用 jQuery 1.7.1，并且我们正在尝试修补插件和页面，这些插件和页面不适用于较新版本的 jQuery。目前，我正在使用 1.8.3 进行测试。这是问题：

我在 UpdatePanel 中有一个网格，在 TemplateField 中有按钮。每个按钮都有一个分配给它的类，当点击...时会弹出一个模式。这在我将 .live 事件放入 document.ready 的 1.7.1 下完美运行。升级到 1.8.3，我摆脱了 live() 并使用 on()，所有这些都在 document.ready 中。

每当我在网格上分页时，都会触发异步回发并且 .on() 会丢失。我所做的唯一更改是升级到 1.8.3。并将 live() 更改为 on()。这以前有效。为什么我突然不能这样做了。下面的示例代码：

```
$(document).ready(function () {
            $("#AppDialog").dialog({
                bgiframe: true,
                autoOpen: false,
                height: 400,
                width: 650,
                modal: true,
                resizable: false }
            });

            $(".AppEdit").on("click", function (e) {
                e.preventDefault();
                $("#AppDialog").dialog('open');
            });
}); 
```

按钮位于 UpdatePanel 中网格中的 TemplateField 内：

```
<asp:Button ID="btnEdit" runat="server" Text="Edit" CommandName="EditApp" CssClass="AppEdit" /> 
```

任何想法为什么会这样？我不想使用 pageLoad，那么我最好的选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:09:57.893

.live() 和 .on() 之间的区别在于 .live() 将适用于所有元素（包括将来使用 ajax 添加的元素），而 .on() 仅适用于当前在 DOM 中的元素。

```
$(document).on('click', '.AppEdit', function() {}); 
```

它的作用是为文档对象设置一个事件处理程序，每当事件冒出并被捕获时，它将检查 eventObject.target 是否具有 AppEdit 类，如果是，则执行您的函数。

# python - 如何在python中注入转义序列

> ID：15298267
> 
> 赞同：4
> 
> 时间：2013-03-08T16:07:49.413
> 
> 标签：python

对于某些字符，我需要将转义序列放入字符串中（此处以双引号为例）。例如，如果我有一个 string `abra"cada"bra`，我需要生成这个：`abra\"cada\"bra`。但是，如果字符串已经有我感兴趣的文字的转义字符（即本例中的双引号）`abra\"cada\"bra`，我需要不理会它。在 python 中最简单的方法是什么？

（想法是将其写入另一个实用程序读取的文本文件。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:11:56.760

首先解码字符串可能是最简单的，这样什么都不会被转义，然后重新转义得到的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:23:44.637

假设`\`除了紧接在某些字符（例如，`'"'`）之前没有特殊含义，那么[@chepner 建议](https://stackoverflow.com/a/15298354/4279)首先取消转义可以实现为：

```
def escape(text, char='"', escape="\\"):
    escaped_char = escape + char
    text = text.replace(escaped_char, char) # unescape
    return text.replace(char, escaped_char) # escape 
```

### [输入](http://ideone.com/jEGS2M)

```
"abra"cada"bra\"
\"abra\"cada\"bra"
"abra\"cada"bra\"
abra\"cada\\"bra\"
abra\"cada\\\"bra\" 
```

### 输出

```
\"abra\"cada\"bra\"
\"abra\"cada\"bra\"
\"abra\"cada\"bra\"
abra\"cada\\"bra\"
abra\"cada\\\"bra\" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T16:23:05.393

您可以在正则表达式中的断言后面使用适当的否定外观来获得它：

```
import re

PAT = re.compile(r'(?<!\\)"')
txt1 = '"abra"cada"bra'
txt2 = '\\"abra\\"cada\\"bra'
print PAT.sub(r'\\"', txt1)
print PAT.sub(r'\\"', txt2) 
```

如果引号是字符串的第一个字符，这将确保它甚至可以正常工作，如上例所示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T16:27:11.783

像这样的东西

```
def esc_string(mystring, delim, esc_char='\\'):
    return (esc_char+delim).join([s[:-1] if s.endswith(esc_char) else s for s in mystring.split(delim)]) 
```

然后

```
print esc_string('abra"cada"bra', '"')
abra\"cada\"bra
print esc_string('abra\\"cada\\"bra', '"')
abra\"cada\"bra
print esc_string('"boundary test"', '"')
\"boundary test\"
print esc_string('\\"boundary test\\"', '"')
\"boundary test\" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T16:22:53.393

正则表达式会做到这一点。如果它前面没有反斜杠，则表示匹配 " 字符。我在字符串的前面使用了一个 'r' 来告诉 python 不要特别处理 '\' 字符，我不得不将它放入两次以告诉正则表达式解析器不要专门使用它。试试 help(re) 什么 (?

```
import re
re.sub(r'(?<!\\)"', r'\"', 'abra"cada\\"bra')
# Returns 'abra\\"cada\\"bra' 
```

# django - Django：POST方法显示重新发布警告后重定向到当前页面

> ID：15298273
> 
> 赞同：10
> 
> 时间：2013-03-08T16:08:05.777
> 
> 标签：django, redirect, post

我对我遇到的问题感到非常困惑，我希望有人能指出我的错误。

我在 views.py 中有一个方法，它绑定到其中包含表单的模板。代码如下所示：

```
def template_conf(request, temp_id):
    template = ScanTemplate.objects.get(id=int(temp_id))
    if request.method == 'GET':
        logging.debug('in get method of arachni.template_conf')    
        temp_form = ScanTemplateForm(instance=template))
        return render_response(request, 'arachni/web_scan_template_config.html', 
                               {
                                'template': template,
                                'form': temp_form,
                               })
    elif request.method == 'POST':
        logging.debug('In post method')
        form = ScanTemplateForm(request.POST or None, instance=template)
        if form.is_valid():
            logging.debug('form is valid')
            form.save()
            return HttpResponseRedirect('/web_template_conf/%s/' %temp_id) 
```

这个页面的行为是这样的：当我按下“提交”按钮时，程序进入`POST`分支，并成功执行了分支中的所有内容。然后`HttpResponseRedirect`唯一重定向到当前页面（那个url是当前url，我认为应该等于`.`）。自从我重定向到当前页面后，该`GET`分支被执行，并且页面确实返回成功。但是，如果我此时刷新页面，浏览器会返回确认警告：

```
The page that you're looking for used information that you entered. 
Returning to that page might cause any action you took to be repeated. 
Do you want to continue? 
```

如果我确认，帖子数据将再次发布到后端。似乎浏览器仍在保存以前的 POST 数据。我不知道为什么会出现这种情况，请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T15:32:24.033

看起来您在 Chrome 25 中遇到了一个错误（请参阅[Chromium 问题 177855](http://code.google.com/p/chromium/issues/detail?id=177855)），该错误处理重定向处理不正确。它已在 Chrome 26 中修复。

您的原始代码是正确的，尽管可以按照 Brandon 的建议稍微简化一下。我建议您[在成功发布请求后](http://en.wikipedia.org/wiki/Post/Redirect/Get)*进行* 重定向，因为它可以防止用户意外重新提交数据（除非他们的浏览器有错误！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:01:49.360

如果您的表单操作设置为“.”，则无需进行重定向。浏览器警告不在您的控制范围内，无法覆盖。您的代码可以大大简化：

```
# Assuming Django 1.3+
from django.shortcuts import get_object_or_404, render_to_response

def template_conf(request, temp_id):
    template = get_object_or_404(ScanTemplate, pk=temp_id)
    temp_form = ScanTemplateForm(request.POST or None, instance=template)

    if request.method == 'POST':
        if form.is_valid():
            form.save()
            # optional HttpResponseRedirect here
    return render_to_response('arachni/web_scan_template_config.html', 
           {'template': template, 'form': temp_form}) 
```

这将简单地保留您的模型并重新渲染视图。如果您想在调用 之后将 HttpResponse 重定向到*不同*的视图`.save()`，这不会导致浏览器警告您必须重新提交 POST 数据。

此外，没有必要，也不是好的做法，硬编码您将重定向到的 URL 模式。使用`reverse`django.core.urlresolvers 中的方法。如果您的 URL 需要更改，它将使您的代码在以后更容易重构。

# jquery - Jquery 从列表框中检索选项 [mysql]

> ID：15298284
> 
> 赞同：0
> 
> 时间：2013-03-08T16:08:38.247
> 
> 标签：jquery, mysql, listbox, options

我有一个名为 products 的表，其中包含名称和价格。

我有一个列表框`select name = listbox[] id = listbox`等

当将某些内容添加到列表框时，我希望通过引用名为 products 的 mysql 表中的价格来更新列表框旁边的价格。

喜欢在同一页面上更新而无需重新加载。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:12:54.780

尝试使用这个 $.post("YourPage.php",{ parameters : Variable } , function(data) {

});

在“YourPage.php”页面中使用 php 和 SQL 执行所有更新指令

并且您必须将一些参数传递给您的页面并通过使用获取参数

返回值是“数据”，它传递给函数从 php 文件返回值

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/) 看看这个文档，它会帮助你

祝你好运朋友...

# visual-studio-2012 - 如何制作便携式visual studio 2012？（使用外部驱动器和脚本）

> ID：15298309
> 
> 赞同：3
> 
> 时间：2013-03-08T16:09:43.600
> 
> 标签：visual-studio-2012, batch-file, cmd, registry

所以我有一个问题，我需要在三台不同的计算机上安装 Visual Studio，而我只能在每台计算机上安装一个临时的 vs12。

我做了什么：

1.  连接我的外部驱动器，并将其卷号设置为`G:`
2.  尽可能多地安装在该驱动器上，其余安装在`%SystemDrive%`
3.  将所有文件复制`%SystemDrive%`到我的`G:`驱动器
4.  制作了一个`cmd`脚本来创建 Junction 目录`%SystemDrive%`

**CMD脚本：**

```
mklink /J "C:\Program Files (x86)\Microsoft Visual Studio 10.0" "G:\Program Files (x86)\Microsoft Visual Studio 10.0"
mklink /J "C:\Program Files (x86)\Microsoft Visual Studio 11.0" "G:\Program Files (x86)\Microsoft Visual Studio 11.0"
mklink /J "C:\Program Files (x86)\Microsoft Visual Studio" "G:\Program Files (x86)\Microsoft Visual Studio"
mklink /J "C:\Program Files\Microsoft Visual Studio 10.0" "G:\Program Files\Microsoft Visual Studio 10.0"
mklink /J "C:\Program Files\Microsoft Visual Studio 11.0" "G:\Program Files\Microsoft Visual Studio 11.0" 
```

1.  制作了一个`cmd`脚本以在工作完成后删除它们

**CMD脚本：**

```
rd "C:\Program Files (x86)\Microsoft Visual Studio"
rd "C:\Program Files (x86)\Microsoft Visual Studio 10.0"
rd "C:\Program Files (x86)\Microsoft Visual Studio 11.0"
rd "C:\Program Files\Microsoft Visual Studio 10.0"
rd "C:\Program Files\Microsoft Visual Studio 11.0" 
```

**结论：**

1.  如何找到 Visual Studio 的所有注册表？
2.  在哪里可以找到有关如何使用`.bat`或`cmd`脚本创建注册表的信息？
3.  我在哪里可以找到如何成功删除它们的信息？
4.  **想知道，是否有可能实现我想要的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T20:32:09.797

为什么不试试 WIN PE 技术 - 猜测 VS 深入系统内部，需要深度集成。

使用 Install Rite ( [http://www.pcwelt.de/downloads/Install-Rite-2-5-1332314.html](http://www.pcwelt.de/downloads/Install-Rite-2-5-1332314.html) )，您可以大致了解安装 VS 期间实际发生的情况，以了解您需要模仿的内容。

您可以轻松地在机器之间导出和导入注册表条目，并且以同样的方式进行，而 install rite 将帮助您完成此操作。

**这个神奇的驱动程序**（[http://write-code.blogspot.de/2010/08/file-redirection-using-driver-fsredir.html#.Up46WKMwd9A](http://write-code.blogspot.de/2010/08/file-redirection-using-driver-fsredir.html#.Up46WKMwd9A)）在普通窗口下也能很好地工作，我用它来重定向通常无法重定向的应用程序 :) 您可以在安装时使用它 D)

虽然这是一个等效的应用程序并且已经可以移植，但也许是一个选项？[http://portableapps.com/node/32713](http://portableapps.com/node/32713)

另一个想法是随身携带一台小型 VMware 机器，如果安装本地设备则可以满足您的工作需要。

# javascript - Flexlisder 图像幻灯片和标题淡出

> ID：15298311
> 
> 赞同：0
> 
> 时间：2013-03-08T16:09:46.490
> 
> 标签：javascript, jquery, flexslider

我想问一下flexslider是否可以做到这一点。我想在左侧创建一个会褪色的标题，而图像会在右侧滑动。我听说它需要两个弹性滑块，但我真的很想避免这种情况。你怎么看？

![左侧的字幕随着控制器的淡出使图像在右侧滑动](../Images/76928ee4d2933e11bdb25f7fe5c43519.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:47:21.970

你可以给标题/分页外 DIV 一个绝对位置和一个负左边距（z-index 设置为 2000 或其他东西，所以它总是在顶部）。

Flexslider 有一个回调方法，允许您在滑块移动时淡化标题。单击[http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)上的高级选项卡，这里有大量回调示例。

# mysql - MySQL C API - 在调用 mysql_store_result() 或 mysql_stmt_store_result() 之后重用连接

> ID：15298318
> 
> 赞同：1
> 
> 时间：2013-03-08T16:09:59.927
> 
> 标签：mysql, mysql++, libmysql

对于“选择” sql，在我们通过调用 my_fetch_xxx() API 从结果集中复制所有行之前，多次重复调用 my_xxxx_store() API（以缓存客户端中的所有结果）的连接是否安全通过调用 my_xxxx_store() API 缓存？

例如，如果从多个线程调用此函数，是否通过传递不同的 select 语句正确地获取数据，没有任何问题。就像同时调用

```
From thread-1: foo("select * from table1");
From thread-2: foo("select * from table2");
From thread-3: foo("select * from table3");
etc.... 
```

函数 foo 类似于。

```
/* Assume that "connection" is a valid properly initialiaed mysql connection handle global variabale*/
/* Assume that there is only one result set. (Means that we dont need to call mysql_next_result() ) */
foo( char *sqlStatement )
{
    threadLock();
    mysql_real_query( connection, sqlStatement, ... );
    MYSQL_RES* result = mysql_store_result(connection);
    threadUnLock();
    /* The "connection" can be reused now, since all data is cached in client. */

    while( more data rows )
    {
        MYSQL_ROW row = mysql_fetch_row(result);
        /*
           Copy data;
        */
    }
    mysql_free_result(result);
} 
```

准备好的陈述也安全吗？就像是。

```
bar( char *sqlStatement, char *params[] )
{
    threadLock();
    MYSQL_STMT *stmt = mysql_stmt_init(connection);
    mysql_stmt_prepare(stmt, sqlStatement, ...);
    int paramCount= mysql_stmt_param_count(stmt);
    MYSQL_RES *metaResult = mysql_stmt_result_metadata(stmt);
    int columnCount= mysql_num_fields(metaResult)
    mysql_stmt_execute(stmt);
    mysql_stmt_bind_result(stmt, ....)
    mysql_stmt_store_result(stmt);
    threadUnLock();
    /* The "connection" can be reused now, since all data is cached in client. */

    while( more data rows )
    {
        MYSQL_ROW row = mysql_stmt_fetch(stmt);
        /*
           Copy data;
        */
    }
    mysql_free_result(metaResult);
    mysql_stmt_free_result(stmt);
    mysql_stmt_close(stmt);
} 
```

# authentication - 使用 Coldfusion 的身份验证系统

> ID：15298321
> 
> 赞同：0
> 
> 时间：2013-03-08T16:10:03.010
> 
> 标签：authentication, coldfusion, cfml

我正在开发一个有管理部分的网站。我用谷歌搜索了这个，发现关于实现这个的最佳方法的信息相互矛盾（在博客上）。我希望你们中的一些 SO 开发人员对此有第一手经验。

将 login.cfm 和 login_process.cfm 文件放在管理区域内还是在完成身份验证***后将***用户路由到管理区域更好？ ***或者***这真的很重要吗？我更倾向于在身份验证后将用户路由到管理区域，主要是为了向没有帐户的人隐藏管理区域的位置以帮助抵御黑客攻击。

支持您的答案的链接表示赞赏，但不是必需的，除非我得到相互矛盾的答案。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:24:33.610

您的登录脚本所在的位置在安全方面并不重要。

重要的是，在授予用户访问安全脚本的权限之前，您实际上要检查以确保用户已通过身份验证和授权，而不仅仅是依赖于他们在签名之前不知道管理员 URL 的位置这一事实在。我无法告诉你我见过多少破碎的网站，其中管理 URL 已被谷歌索引，允许任何偶然发现它的人进入。

因此，您的身份验证过程应该有两个步骤。

1.  身份验证（您的`login.cfm`和`login_process.cfm`脚本）。这应该检查用户凭据，然后通常在用户`session`范围内设置一些内容。

2.  授权（在您的管理区域中）。这应该检查用户是否已登录（查看`session`您在步骤 1 中设置的变量），以及（如果您正在实施基于角色或权限的授权）用户是否有权访问请求的资源、显示错误或如果不是，则给予重定向。

如果您要保护整个目录，通常最容易`application.cfm|cfc`在 admin 目录中实现这一点（因此它会自动在该目录中的所有页面上调用）。如果你走这条路，将脚本放在受保护目录之外变得最容易，`login`这样你最终就不会要求用户登录才能访问登录脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T16:10:25.917

请记住，cf 只能保护 cfm 文件，如果他们知道 url，它不会阻止任何人访问图像、.html、.pdf 文档等。所以这取决于你想保护什么。如果这是一个简单的管理区域，这可能就足够了。为了获得最佳安全性，如果您需要保护非 cf 文件和资源，您应该使用 htaccess 或类似工具来保护整个文件夹及其中的所有内容。有一些方法可以在小范围内使用 cfcontent。

# c# - 来自 contextmenustrip 的发送键

> ID：15298327
> 
> 赞同：0
> 
> 时间：2013-03-08T16:10:08.977
> 
> 标签：c#, sendkeys

我想从上下文菜单条向应用程序发送一个字符串。例如，我打开记事本，打开我的应用程序，单击任务栏中的通知图标，然后选择一个项目，我希望它向当前打开的应用程序发送文本 (sendkeys.send)。

这样做的最佳方法是什么？

谢谢。

编辑：只需发送 %{TAB} 即可在除 Windows 8 之外的所有 Windows 版本中使用，并且必须兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T08:20:46.687

如果 W8 未经 Microsoft 或自签名认证，则根本不允许对其他应用程序进行击键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:15:39.920

下面将通过其名称找到一个应用程序（进程）。如果应用程序正在运行，它将收到文本。您只需要使用 ContextMenuStrip 的代码。如果我可能遗漏了什么，请告诉我：

```
public partial class Form1 : Form
{
    [DllImport("User32")]
    private static extern int SetForegroundWindow(IntPtr hwnd);

    public Form1()
    {
        InitializeComponent();

        Process notepad = Process.GetProcessesByName("notepad").FirstOrDefault();

        if (notepad != null)
        {
            SetForegroundWindow(notepad.MainWindowHandle);
            SendKeys.SendWait("test");
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T08:03:41.420

几乎我所有的“它总是在 Windows 8 之前工作”问题的解决方案是将进程设置为以管理员身份运行。就我而言，我使用的是 perl Win32::GuiTest 中的 SendKeys。该程序运行并将焦点设置在右侧窗口上，但拒绝发送任何密钥，除非我将其设置为以管理员身份运行。这可能是因为我发送给的进程是以管理员身份运行的，不知道。

# php - 验证不适用于 register.php 并发布到 verify.php MySQL PHP

> ID：15298329
> 
> 赞同：0
> 
> 时间：2013-03-08T16:10:15.907
> 
> 标签：php, mysql, validation, post

我遇到的问题是我有两种形式。student_register.php 和 student_verify.php 因此，当用户填写注册表并提交时，表单会发布到 student_verify.php，但会忽略 student_register.php 上的所有 php 脚本。它忽略了我放下的所有验证约束。看下面（它确实连接到 MySQL）

我有一个名为 student_register.php 的表单，其中包括以下代码：

```
<?php 
include_once("scripts/global2.php");
mysql_connect("mysql.cms.gre.ac.uk","****","****") or die("Could not connect     to server");
mysql_select_db("mdb_mj046") or die("Could not select database");
$message = '';
if(isset($_POST['username'])) {

$username = $_POST['username'];
$fname = $_POST['fname'];
$lname = $_POST['lname'];
$dob = $_POST['dob'];
$gender = $_POST['gender'];
$addline1 = $_POST['addline1'];
$addline2 = $_POST['addline2'];
$city = $_POST['city'];
$postcode = $_POST['postcode'];
$phone = $_POST['phone'];
$mobile = $_POST['mobile'];
$email = $_POST['email'];
$pass1 = $_POST['pass1'];
$pass2 = $_POST['pass2'];
$college_id = $_POST['college_id'];

//error handeling
    //If all the fields have been inserted
    if ( (!$username) || (!$fname) || (!$lname) || (!$dob) || (!$gender) || (!$addline1) || (!$addline2) || (!$city) || (!$postcode) ||(!$phone) || (!$mobile) || (!$email) || (!$pass1) || (!$pass2) || (!$college_id) ) {
    $message = 'Please insert all fields in the form below!';
}else{
    //Checking if the password matches
    if($pass1 != $pass2){
        $message = 'Your password fields do not match!';    
    }else{

        //securing the data, if passwords do match
        $username = preg_replace("#[^0-9a-z]#i","",$username);  
        $fname = preg_replace("#[^0-9a-z]#i","",$fname);    
        $lname = preg_replace("#[^0-9a-z]#i","",$lname);
        $dob = preg_replace("#[^0-9a-z]#i","",$dob);
        $gender = preg_replace("#[^0-9a-z]#i","",$gender);
        $addline1 = preg_replace("#[^0-9a-z]#i","",$addline1);
        $addline2 = preg_replace("#[^0-9a-z]#i","",$addline2);
        $city = preg_replace("#[^0-9a-z]#i","",$city);
        $postcode = preg_replace("#[^0-9a-z]#i","",$postcode);  
        $phone = preg_replace("#[^0-9a-z]#i","",$phone);
        $mobile = preg_replace("#[^0-9a-z]#i","",$mobile);

        //Encrypts the password
        $pass1 = sha1($pass1);
        //Gets rid of any unwanted characters
        $email = mysql_real_escape_string($email);

        //Check for Dublicates-USERNAME
        $user_query = mysql_query("SELECT username FROM students WHERE username='$username' LIMIT 1") or die ("Could not check username");  
        $count_username = mysql_num_rows($user_query);

        //Check for Dublicates-EMAIL
        $email_query = mysql_query("SELECT email FROM students WHERE email='$email' LIMIT 1") or die ("Could not check username");  
        $count_email = mysql_num_rows($email_query);

        if($count_username > 0){
            $message = 'Your username is already in use';   
        }else if($count_email > 0){
            $message = 'Your email is already in use!'; 
        }else{
            ///Insert the members into the DB

            $query=mysql_query("INSERT INTO students (username, fname, lname, dob, gender, addline1, addline2, city, postcode, phone, mobile, email, password, activationKey, active, college_id) VALUES ('$username','$fname', '$lname','$dob', '$gender', '$addline1','$addline2', '$city','$postcode','$phone','$mobile', '$email','$password', '$activationKey', '','$college_id' )") or die ("Could not insert your information");

            $student_id = mysql_insert_id();

            $message = 'You have now been registered!';
//insert the members

            }

    }       

}   

}

 ?>

         <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Register to my website</title>
<link href="css/global.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div class="container center">
   <h1>Register to my site by filling the fields below!</h1>
  <h3>Student Need to Register!</h3>
    <p><?php print("$message");?></p>
    <form action="student_verify.php" method="post" >
      <table width="318" border="1" align="center">
        <tr>
          <td width="100">Username:</td>
          <td width="144"><input type="text" name="username" placeholder="Username"  />       </td>
        </tr>
        <tr>
          <td>First Name:</td>
          <td><input type="text" name="fname" placeholder="Firstname"  /></td>
        </tr>
        <tr>
          <td>Last Name: </td>
          <td><input type="text" name="lname" placeholder="Lastname"  /></td>
        </tr>
        <tr>
          <td>Date of Birth:</td>
          <td><input type="text" name="dob" placeholder="Date of Birth" /></td>
        </tr>
        <tr>
          <td>Gender: </td>
          <td><input type="text" name="gender" placeholder="Gender" /></td>
        </tr>
        <tr>
          <td>Address: </td>
          <td><input type="text" name="addline1" placeholder="Address Line 1" /></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><input type="text" name="addline2" placeholder="Address Line 2" /></td>
        </tr>
        <tr>
          <td>City: </td>
          <td><input type="text" name="city" placeholder="City" /></td>
        </tr>
        <tr>
          <td>Postcode:</td>
          <td><input type="text" name="postcode" placeholder="Postcode" /></td>
        </tr>
        <tr>
          <td>Phone Number:</td>
          <td><input type="text" name="phone" placeholder="Phone Number" /></td>
        </tr>
        <tr>
          <td>Mobile Number:</td>
          <td><input type="text" name="mobile" placeholder="Mobile Number" /></td>
        </tr>
        <tr>
          <td>Email:</td>
          <td><input type="text" name="email" placeholder="Email Address"  /></td>
        </tr>
        <tr>
          <td>Password:</td>
          <td><input type="password" name="pass1" placeholder="Password"  /></td>
        </tr>
        <tr>
          <td>Confirm:</td>
          <td><input type="password" name="pass2" placeholder="Validate Password"  /></td>
        </tr>
        <tr>
          <td>College ID: </td>
          <td><input type="text" name="college_id" placeholder="College ID"  /></td>
        </tr>
      </table>
      <p>
        <input type="hidden" name="submitted" value="1"/>
        <br />        
        <input type="submit" value="Register!" /> <br/>
        <a href="index.php">Go Back  </a> 
      </p>    
    </form>
</div>

</body>
</html> 
```

问题是，student_register.php 中的所有 PHP 代码都没有运行，它不检查错误或什么都不检查，它只是发布到 student_verify.php，这意味着插入的代码没有运行。这就是我的 student_verify.php 的样子：

```
<?php
error_reporting (E_ALL ^ E_NOTICE); 
session_start();
mysql_connect("mysql.cms.gre.ac.uk","****","*****") or die("Could not connect to server");
mysql_select_db("mdb_mj046") or die("Could not select database");
$note='';
if ($_POST['submitted']==1) { 
##User is registering, insert data until we can activate it

$activationKey =  rand(12345,98765);
$username = mysql_real_escape_string($_POST['username']);
$fname = mysql_real_escape_string($_POST['fname']);
$lname = mysql_real_escape_string($_POST['lname']);
$dob = mysql_real_escape_string($_POST['dob']);
$gender = mysql_real_escape_string($_POST['gender']);
$addline1 = mysql_real_escape_string($_POST['addline1']);
$addline2 = mysql_real_escape_string($_POST['addline2']);
$city = mysql_real_escape_string($_POST['city']);
$postcode = mysql_real_escape_string($_POST['postcode']);
$phone = mysql_real_escape_string($_POST['phone']);
$mobile = mysql_real_escape_string($_POST['mobile']);
$email = mysql_real_escape_string($_POST['email']);
$password = sha1($_POST['pass1']);
$college_id = mysql_real_escape_string($_POST['college_id']);

$sql="INSERT INTO students (username, fname, lname, dob, gender, addline1, addline2, city, postcode, phone, mobile, email, password, activationKey, active, college_id) VALUES ('$username','$fname', '$lname','$dob', '$gender', '$addline1','$addline2', '$city','$postcode','$phone','$mobile', '$email','$password', '$activationKey', '','$college_id' )";

if (!mysql_query($sql))

  {

  die('Error:ERROR !! ' . mysql_error());

  }

echo 
    $note="An email has been sent to" .$_POST[email]. "with an activation key. Our systems are going to verify that you are a member of your institue. Please check your mail to complete registration.";

##Send activation Email

$to      = $_POST[email];
$subject = " E-Attendance Tracking & Monitoring System";

$message = "Welcome to our website!\r\rYou, or someone using your email address, has completed registration at Greenwich Freecycle. You can complete registration by clicking the following link:\rhttp:stuweb.cms.gre.ac.uk/~mj046/membership2/verify.php?$activationKey\r\rIf this is an error, ignore this email and you will be removed from our mailing list.\r\rRegards,\ Greenwich Freecycle Team";

$headers = 'From: noreply@ RBGFreecycle.com' . "\r\n" .

    'Reply-To: noreply@ mj046@greenwich.ac.uk' . "\r\n" .

    'X-Mailer: PHP/' . phpversion();

    ini_set("sendmail_from","mj046@greenwich.ac.uk");

mail($to, $subject, $message, $headers);

} else {

##User isn't registering, check verify code and change activation code to null, status to activated on success

$queryString = $_SERVER['QUERY_STRING'];

$query = "SELECT * FROM students"; 

$result = mysql_query($query) or die(mysql_error());

  while($row = mysql_fetch_array($result)){

    if ($queryString == $row["activationKey"]){

       echo $note="Congratulations!" . $row["username"] . " is now the proud new owner of an Greennwich Freecycle Website.com account.Please click here to access your account Profile Page ";

       $sql="UPDATE students SET activationKey = '', active='1' WHERE (student_id = $row[student_id])";

       if (!mysql_query($sql))

  {
        die('Error: ' . mysql_error());

  }

    }

  }

}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Verification Page</title>
<link href="css/global.css" rel="stylesheet" type="text/css">
</head>

<body>

<div class="container center" >
    <h3> Verification Page</h3>
    <form action="verify.php" method="POST">
    <p><?php print("$note");?></p>
    <a href="student_login.php">Login</a>
    </form>
            </div>

</body>
</html> 
```

我不明白为什么它无法验证 student_register.php 上的数据，谁能帮助我，亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:16:45.480

您需要`student_register.php`先将 post 请求发送到，然后包含`student_verify.php`. 您的发帖请求永远不会发送到`student_register.php`。

您可以通过将`action`表单更改为`student_register.php`然后`include 'student_verify.php';`在合适的地方插入来更改此设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:18:31.820

试着让你的输入像这样

```
 <input type="submit" name="submit" value="Register!" /> 
```

而不是

```
 if ($_POST['submitted']==1) { 
```

将其替换为

```
 if (isset($_POST['submit'])) { 
```

# java - PrimeFaces v3.4 ++：数据表排序无法正常工作

> ID：15298331
> 
> 赞同：1
> 
> 时间：2013-03-08T16:10:18.623
> 
> 标签：java, sorting, jsf-2, primefaces, datatable

我有以下简单的测试页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Test page</title>
    </h:head>
    <h:body>
        <div id="container">
            <h:form>
                <p:dataTable id="unusedTable" var="c" value="#{couponBean.unusedCoupons}"
                                 paginator="true" rows="5">

                    <p:column headerText="#{l10n.id}" sortBy="#{c.id}">
                        <h:outputText value="#{c.id}" />  
                    </p:column> 

                    <p:column headerText="#{l10n.name}" sortBy="#{c.name}" >
                        <h:outputText value="#{c.name}" /> 
                    </p:column>

                </p:dataTable>
            </h:form>
        </div>
    </h:body>
</html> 
```

当我使用 PrimeFaces v3.4.2 或 v3.5 部署应用程序时，我观察到以下奇怪的行为：

*   起初： ![排序前](../Images/4c938e1b72a84839012ab439018f0878.png)
*   排序后： ![排序后](../Images/e6563abb0ff2a427b47f376c52c57231.png)

如您所见，最初，表格出现在表格左侧，排序图标。如果我尝试对任何列进行排序，则会在原始表的第一列生成排序表。

我尝试使用 PrimeFaces v3.3.1 重新部署我的应用程序，一切正常。

如果您能告诉我如何解决这个问题，我将不胜感激。

最好的祝福，

詹姆斯·特兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:37:58.277

尝试在数据表中添加 rowKey 属性。rowKey="#{c.id}"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:38:19.937

只是一个想法-什么是类`unusedCoupons`？是否可排序？如果不是（或者即使是）。只需尝试`ArrayList`在您的项目中添加一个`filteredValue=`. 这是过滤所必需的（因为它创建了一个存储临时过滤数据的地方），它也可以用于排序。

**额外的信息**

我正在`p:dataTable`使用我的 primefaces 3.4++ 进行排序。我看到的区别是定义我使用的标题文本：

```
<p:column sortBy="#{c.id}">
    <f:facet name="header">
        <h:outputText value="#{l10n.id}" />   
    </f:facet>
    <h:outputText value="#{c.id}" />
</p:column> 
```

而不是你的`headerText`=。

我所有的列也都`id`分配了 's 。除此之外它是相同的（加上我有过滤）并且它可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:08:01.263

我的项目突然损坏了。我不知道为什么会这样。但是，在我创建了一个新项目并复制了所有文件之后，使用 PrimeFaces v3.4+++ 进行排序再次正常工作。

# python - 将数据发布到网络进行处理

> ID：15298341
> 
> 赞同：1
> 
> 时间：2013-03-08T16:10:44.283
> 
> 标签：python, web

我是 Web 开发的新手，所以如果以下问题听起来有点幼稚，请多多包涵。如何使用 python 发布到 Web 表单？我知道网络表单是这样的，我想上传一个本地文件以便在线处理并获取返回的数据

```
<form action="process.php" method="post" enctype="multipart/form-data">
    <input type="file" name="file" id="file" id="chooser" /><br />
    <input type="submit" value="Upload" name="submit"  />
</form> 
```

到目前为止，这是我的 python 程序。

```
upfile = urllib.urlencode( {'file':path/to/my/local/file})
filehandle = urllib.urlopen('http://www.comdroid.org/', upfile)
soup = BeautifulSoup(filehandle)
print soup 
```

我想查看返回的结果，但是当前的代码片段只给了我结果而不处理我上传的文件。有什么我想念的吗

------------更新----这是我现在的做法

```
import urllib2
import urllib 
import requests
import os
files1 ={'file':open('/opt/apps/au.com.psyborg.sbc-5.apk','rb')‌​}
#response= os.system("curl --form   file=@/opt/apps/au.com.psyborg.sbc-5.apk --form submit=Upload www.comdroid.org/process.php")
req = requests.post('comdroid.org/process.php', files = files1) 
print req.text 
```

* * *

奇怪的是我不能用请求来做，服务器抱怨我的文件不是 .apk 文件，它实际上是。但是，如果我使用注释掉的 os.system 切换到 curl，它可以工作！所以我怀疑我在这里遗漏了一些东西。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:44:40.403

如果您查看表单的`action`属性，它会`process.php`- 所以您需要将文件上传发送到`http://www.comdroid.org/process.php`.

使用标准库进行文件上传有点痛苦——如果你被允许，我建议你使用[requests](https://github.com/kennethreitz/requests) ——他们甚至[在他们的文档中提供了你所要求的示例](http://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)：

```
url = 'http://httpbin.org/post'
files = {'file': open('report.xls', 'rb')}
r = requests.post(url, files=files) 
```

我还找到[了这个关于如何使用 mechanize 库的 SO 答案](https://stackoverflow.com/a/6498163/240418)，以及[一个代码示例，如果您想使用标准库，它可能会有所帮助](http://code.activestate.com/recipes/146306-http-client-to-post-using-multipartform-data/)。

# node.js - Express Session + Angular：无法访问 connect.sid cookie

> ID：15298342
> 
> 赞同：11
> 
> 时间：2013-03-08T16:10:46.373
> 
> 标签：node.js, cookies, angularjs, express

这里有一些我真的不明白：

我已经在服务器端快速运行，会话已初始化。

```
app.use(express.session({
    secret: 'mySecret'
    })
})); 
```

正如这篇文章[Confusion over session IDs using Connect](https://stackoverflow.com/questions/4938525/confusion-over-session-ids-using-connect)中提到的，它向任何请求发送一个 connect.sid cookie。

在客户端，我想读取这个cookie的内容，感觉不可能：

```
angular.module('myApp.controllers', ['ngCookies','myApp.services'])
.controller('homeCtrl', function($scope, $cookies) {
    $cookies['test']='myValue';
    console.log($cookies);
}); 
```

当我运行它时，我在日志中得到了这个对象：`Object {test: "myValue"}`，而如果我去 Chrome 调试器中的资源选项卡，我可以看到两个 cookie：

![chrome 调试器中资源选项卡的屏幕截图](../Images/9287f5c4903bcc6a50b1a3e683d38bd5.png)

我究竟做错了什么 ？

是否无法从 angular 访问服务器制作的 cookie？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-08T18:54:58.807

默认情况下，连接会话使用 httpOnly cookie（[看这里](https://github.com/senchalabs/connect/blob/master/lib/middleware/session/cookie.js#L27)）。

当设置了 httpOnly 标志时，总是禁止读取 cookie。

尝试禁用 httpOnly 标志：

```
app.use(express.session({
    secret: 'mySecret',
    cookie: { httpOnly: false }
})); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-28T12:44:45.920

请注意，您不是在解决一个问题，而是在制造另一个更糟糕的问题。httpOnly 标志通常用于防御 XSS 攻击。有关详细信息，请参阅 OWASP 的此链接：[https ://www.owasp.org/index.php/HttpOnly](https://www.owasp.org/index.php/HttpOnly)

有趣的故事在这里： http: [//blog.codinghorror.com/protecting-your-cookies-httponly/](http://blog.codinghorror.com/protecting-your-cookies-httponly/)

# android - 以编程方式配置 android 设备

> ID：15298348
> 
> 赞同：-3
> 
> 时间：2013-03-08T16:11:03.323
> 
> 标签：android, configuration, device

我只是想知道是否有办法以编程方式配置 android 设备。我的意思是配置wifi，安全信息，...实际上我们可以使用界面进行的所有配置。

我知道我们已经可以，多亏了 adb，例如从计算机安装应用程序，但我想找到一种方法来从计算机配置我的所有设备。你认为有办法做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:56:22.310

> 我只是想知道是否有办法以编程方式配置 android 设备。我的意思是配置wifi，安全信息，...实际上我们可以使用界面进行的所有配置。

一般来说，没有。一些普通的 SDK 应用程序可以做的事情，通过`WifiManager`,`Settings.System`等。有些事情需要应用程序使用固件签名密钥进行签名或安装在系统分区上，例如操作`Settings.Secure`. 有些东西根本没有通过 API 公开，尽管可能可以在有根设备上被黑客入侵。

# asp.net - 没有竞争条件的 ASP.NET Web API 中的 OData CRUD 操作

> ID：15298351
> 
> 赞同：1
> 
> 时间：2013-03-08T16:11:40.483
> 
> 标签：asp.net, entity-framework, asp.net-web-api, odata

在 ASP.NET Web API 中使用 OData 的[官方指南](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-crud-operations)中，修改数据库的示例似乎都包含竞争条件。例如，示例`UpdateEntity`方法调用`_context.Products.Any`后跟`_context.SaveChanges`，但数据库可能在调用之间发生了变化。

这与 Visual Studio 为带有实体框架控制器的新 Web API 生成的样板代码不同，后者包含`DbUpdateConcurrencyException`. 是否有类似的模式是 OData 更新方法的最佳实践？

`Any`此外，随后的调用`SaveChanges`涉及两次数据库往返。有没有最好的做法只做一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:33:25.747

Any 调用只是确保您尝试更新的实体确实存在。您可以将该操作更改为，

```
protected override Product UpdateEntity(int key, Product update)
{
    try
    {
        _context.Entry(update).State = System.Data.EntityState.Modified;  
        _context.SaveChanges();
        return update;
    }
    catch(DbUpdateConcurrencyException)
    {
        throw new HttpResponseException(HttpStatusCode.NotFound);
    }
} 
```

如果该条目不存在，`SaveChanges()`将抛出一个`DbUpdateConcurrencyException`.

# java - FileDialog中不必要的构造函数？

> ID：15298352
> 
> 赞同：2
> 
> 时间：2013-03-08T16:11:42.870
> 
> 标签：java, inheritance, constructor, filedialog

有人可以向我解释一下**为什么要`FileDialog`实现两个构造函数，一个用于 Frame，一个用于 Dialog？**我的意思是，他们为什么不使用继承的祝福而只是使用创建构造函数`Window`？我问这个是因为有时当您需要使用 GUI 请求文件时，您可以从 a`Frame`或从 a请求文件，`Dialog`如果您不必担心为 a`Frame`和创建“请求者”方法会很好对于 a `Dialog`，我查看了 的源代码`FileDialog`，构造函数之间没有区别（我可以理解），因为它们只使用`Frame`and`Dialog`将它们建立为`parentComponent`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:26:19.347

这些建筑是在历史的不同时期创建的。对向后兼容性有强烈的、强制的需求。

```
// @since 1.5
public FileDialog(Dialog parent)

// @since JDK1.1
public FileDialog(Frame parent) 
```

# facebook - 下载 Facebook 自动填充数据？

> ID：15298355
> 
> 赞同：2
> 
> 时间：2013-03-08T16:11:56.707
> 
> 标签：facebook, facebook-graph-api, autocomplete

我正在尝试获取 Facebook 自动完成值的完整列表。曾经有一个可下载的 CSV 文件，其中包含 facebook 识别的所有国家、地区和城市，但该文件显然已经消失了。

在你说之前——是的，我知道我可以调用 Graph 的搜索端点来获取一个列表，但它是一个有限的列表，我更愿意拥有一个本地副本而不是进行大量的 Graph 调用。

那么，有人知道我可以下载的最新文件吗？

TIA,

德国之声

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:36:41.827

您可以从 Facebook 下载国家、地区和语言环境，但**不能**下载城市。

来自[https://developers.facebook.com/docs/reference/ads-api/get-autocomplete-data/](https://developers.facebook.com/docs/reference/ads-api/get-autocomplete-data/)：

> 要下载所有区域的完整列表，请将 q 参数留空 (q=&)，并将 limit 设置为较大的数字（例如，limit=1000）。下载完整数据集仅适用于国家、地区和语言环境。

您需要自己解析 JSON 响应并将结果数据插入到您的数据库或其他首选本地存储中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:01:37.207

geonames.org -> 右下页脚“转储” :)

# java - Struts 1.x validate() 和 validation.xml

> ID：15298358
> 
> 赞同：1
> 
> 时间：2013-03-08T16:12:10.503
> 
> 标签：java, struts, struts-1, struts-validation

我在 Struts 1.x 中使用验证框架，并在`validation.xml`.

我需要一些更复杂的验证，所以我也覆盖了`validate()`表单中的方法。

事实证明，重写该`validate()`方法会取消使用`validation.xml`. 这是真的？

可以`validate()`和`validation.xml`共存于同一个动作形式上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:12:02.240

如果您覆盖该`validate`方法而不调用`super.validate(mapping, request)`. 在您的代码中执行此操作，以通过`validate`方法和框架验证共存自定义验证`validation.xml`。

# r - 为什么 knitr 缓存对 data.table `:=` 失败？

> ID：15298359
> 
> 赞同：19
> 
> 时间：2013-03-08T16:12:16.993
> 
> 标签：r, caching, data.table, knitr

这在精神上与[这个](https://stackoverflow.com/q/15267018/1900520)问题有关，但在机制上必须不同。

如果您尝试缓存`knitr`包含分配的块，`data.table` `:=`那么它的行为就好像该块尚未运行，并且以后的块看不到`:=`.

知道这是为什么吗？检测对象是如何`knitr`更新的，是`data.table`什么让它感到困惑？

看来你可以通过做来解决这个问题`DT = DT[, LHS:=RHS]`。

**示例**：

```
```{r}
library(data.table)
```
Data.Table Markdown
========================================================
Suppose we make a `data.table` in **R Markdown**
```{r, cache=TRUE}
DT = data.table(a = rnorm(10))
```
Then add a column using `:=`
```{r, cache=TRUE}
DT[, c:=5] 
```
Then we display that in a non-cached block
```{r, cache=FALSE}
DT
```
The first time you run this, the above will show a `c` column, 
from the second time onwards it will not. 
```

**第二次运行输出**

![针织输出](../Images/211f62bbbb9f858db04e86094df9da07.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-08T17:14:32.787

## 推测：

这是正在发生的事情。

**knitr**非常明智地在创建对象后立即缓存它们。然后，只要检测到它们已被更改，它就会更新它们的缓存值。

**但是， data.table**绕过了 R 的正常的按值复制分配和替换机制，并使用`:=`运算符而不是 a `=`, `<<-`, or `<-`。结果**knitr**没有接收到`DT`由 改变的信号`DT[, c:=5]`。

## 解决方案：

只需将此块添加到您希望`DT`重新缓存当前值的任何地方。它不会花费您任何内存或时间（因为除了引用之外没有任何内容被复制），但它确实有效地向已更新的**knitr**`DT <- DT`发送（假）信号：**`DT`**

 **```
```{r, cache=TRUE, echo=FALSE}
DT <- DT 
``` 
```

* * *

## 示例文档的工作版本：

通过运行您的文档的此编辑版本来检查它是否有效：

```
```{r}
library(data.table)
```
Data.Table Markdown
========================================================
Suppose we make a `data.table` in **R Markdown**
```{r, cache=TRUE}
DT = data.table(a = rnorm(10))
```

Then add a column using `:=`
```{r, cache=TRUE}
DT[, c:=5] 
```

```{r, cache=TRUE, echo=FALSE}
DT <- DT 
```

Then we display that in a non-cached block
```{r, cache=FALSE}
DT
```
The first time you run this, the above will show a `c` column. 
The second, third, and nth times, it will as well. 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-08T01:20:09.173

正如 Josh O'Brien 回答下的第四条评论所示，我添加了一个新的块选项`cache.vars`来处理这种非常特殊的情况。在第二个缓存块中，我们可以指定`cache.vars='DT'`这样`knitr`将保存`DT`.

```
```{r}
library(data.table)
```
Data.Table Markdown
========================================================
Suppose we make a `data.table` in **R Markdown**
```{r, cache=TRUE}
DT = data.table(a = rnorm(10))
```
Then add a column using `:=`
```{r, cache=TRUE, cache.vars='DT'}
DT[, c:=5] 
```
Then we display that in a non-cached block
```{r, cache=FALSE}
DT
``` 
```

无论编译多少次，输出都是这样的：

![knitr 现在与 data.table 一起使用](../Images/fa2509ab516c22d414f545feca0aa2bc.png)**

# rabbitmq - RabbitMQ 让消费者在完成较早的任务之前接收更多的任务

> ID：15298366
> 
> 赞同：0
> 
> 时间：2013-03-08T16:12:50.107
> 
> 标签：rabbitmq, amqp, producer-consumer

根据我对 RabbitMQ/AMQP 的理解，我看到了一个不幸的权衡。

通常的工作流程是：

1.  生产者生产
2.  队列交付给消费者
3.  消费者确认*并在确认之前不会收到更多任务*
4.  队列*认为消息处理完成*

所以问题是 ack 结合了两件事：说“我可以接受更多的工作”和说“我已经完成了这项任务”。问题是！我的消费者机器被配置为并行处理 50 个任务，每个任务最多需要大约 30 秒。但是，如果一项任务悬而未决或失败 - 它需要重新交付。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:42:39.033

采用

```
channel.basicQos(prefetchCount); 
```

其中预取计数 = 我可以在不确认的情况下处理的任务数。

记录[在这里](http://www.rabbitmq.com/tutorials/tutorial-two-java.html)。

# php - php 通过 CLI 获取服务器的文档根目录

> ID：15298368
> 
> 赞同：5
> 
> 时间：2013-03-08T16:12:52.070
> 
> 标签：php, command-line-interface

简单地说，我想`$_SERVER['DOCUMENT_ROOT']`使用 PHP 从命令行获取。

PHP 文档状态：

> 您可能会或可能不会在 $_SERVER 中找到以下任何元素。请注意，如果在命令行上运行 PHP，其中很少有（如果有的话）可用（或确实有任何意义）。

是否有已知的替代方案来实现结果？如果这是重复的，请提前道歉，但我在这个特定问题上找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-18T15:43:04.940

您可以使用：

```
$pwd = getenv('PWD');   // Current directory
$home = getenv('HOME'); // Home user directory 
```

[您可以在此答案](https://stackoverflow.com/a/29788365/999820)中查看更多详细信息。

# javascript - 文本悬停在图像上

> ID：15298371
> 
> 赞同：0
> 
> 时间：2013-03-08T16:13:05.897
> 
> 标签：javascript, html, css, hover

如何使文本悬停在图像上？我希望文本框恰好出现在图像所在的位置，以便图像完全消失，并且在鼠标移出图像时重新出现。我搜索了每个人，但我只发现悬停效果与图像所在的悬停框的位置不同......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:16:43.387

不需要 JavaScript，除非你想要一些不依赖 CSS3 的平滑过渡。假设图像具有固定尺寸，您将执行以下操作：

```
<div>
    <p>Text</p>
    <img src="" alt="" width="100px" height="100px" />
</div>

div { position:relative; z-index:1; height:100px; width:100px;  }
img { position:absolute; top:0; left:0; z-index:2; }
div:hover img { display:none; } 
```

[JSF](http://jsfiddle.net/vG7v8/)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:20:55.693

CSS：

```
.textHover {
    display:none;
    width:100%;
    height:100%;
    position:absolute;
    top:0; left:0;
    text-align:center;
    color:white;
}
.imgContain {
    position:relative;
    display:table;
}
.imgContain:hover .textHover {
    display:block;
} 
```

标记：

```
<div class="imgContain">
    <img src="http://placehold.it/300x200"/>
    <div class="textHover">My text here</div>
</div> 
```

[http://jsfiddle.net/EACxV/](http://jsfiddle.net/EACxV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-06T10:34:48.423

您不需要 JavaScript 代码来执行此操作。在纯 html 和 css 中它会很好地工作。下面是带有不透明度变化的 css 动画的示例。

html

```
    <div class="hvrbox">
        <img src="https://upload.wikimedia.org/wikipedia/commons/2/22/Bochnia_poland_saltmine.jpg" alt="盐矿" class="hvrbox-layer_bottom">
        <div class="hvrbox-layer_top">
            <div class="hvrbox-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit。Fusce porttitor ligula porttitor, lacinia sapien non.</div>
        </div>
    </div>

```

css

```
    .hvrbox,
    .hvrbox * {
        box-sizing：边框框；
    }
    .hvrbox {
        位置：相对；
        显示：内联块；
        溢出：隐藏；
        最大宽度：100%；
        高度：自动；
    }
    .hvrbox img {
        最大宽度：100%；
    }
    .hvrbox .hvrbox-layer_bottom {
        显示：块；
    }
    .hvrbox .hvrbox-layer_top {
        不透明度：0；
        位置：绝对；
        顶部：0；
        左：0；
        右：0；
        底部：0；
        宽度：100%；
        高度：100%；
        背景：rgba(0, 0, 0, 0.6);
        颜色：#fff;
        填充：15px；
        -moz-transition：所有 0.4s 缓入出 0s；
        -webkit-transition：所有 0.4s 缓进出 0；
        -ms-transition：所有 0.4s 缓入出 0s；
        过渡：所有 0.4s 缓入缓出 0s；
    }
    .hvrbox：悬停 .hvrbox-layer_top，
    .hvrbox.active .hvrbox-layer_top {
        不透明度：1；
    }
    .hvrbox .hvrbox-文本 {
        文本对齐：居中；
        字体大小：18px；
        显示：内联块；
        位置：绝对；
        最高：50%；
        左：50%；
        -moz 转换：翻译（-50%，-50%）；
        -webkit-transform: 翻译(-50%, -50%);
        -ms-transform: 翻译(-50%, -50%);
        变换：翻译（-50%，-50%）；
    }
    .hvrbox .hvrbox-text_mobile {
        字体大小：15px；
        边框顶部：1px 纯色 rgb(179, 179, 179); /* 对于旧浏览器 */
        边框顶部：1px 实心 rgba(179, 179, 179, 0.7);
        边距顶部：5px；
        填充顶部：2px；
        显示：无；
    }
    .hvrbox.active .hvrbox-text_mobile {
        显示：块；
    }

```

我在这里[http://goo.gl/EECjCm用许多类似的例子（有更好的动画）描述了它](http://goo.gl/EECjCm)

# c - 使用 malloc 时连接字符串长度的差异

> ID：15298372
> 
> 赞同：0
> 
> 时间：2013-03-08T16:13:12.663
> 
> 标签：c, arrays, string

只是为了测试一些代码，我用 C 编写了以下程序：

```
int main(int argc, char *argv[])
{
    char *a = "hello ";
    char *b = "there";
    char *c = malloc(100);
    strcat(c, a); 
    strcat(c, b); 
    printf("length of a is %d\n", strlen(a));
    printf("length of concatenated string is %d\n", strlen(c));
    return 0;
} 
```

这个的输出是：

```
length of a is 6
length of concatenated string is 11 
```

现在我没有做 malloc，而是做了以下事情（其余代码相同）：

```
char c[100]; 
```

输出变为：

```
length of a is 6
length of concatenated string is 12 
```

我不明白为什么在 char 数组上使用指针会改变连接字符串的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:15:41.020

两个示例中的行为都是未定义的。 [strcat](http://linux.die.net/man/3/strcat)在源字符串中的终止 nul 之后附加数据。 `c`未初始化，因此未定义在何处（以及是否）它将具有 nul 终止符。

如果您更改为使用`strcpy`后跟，您将获得一致的结果`strcat`

```
strcpy(c, a); 
strcat(c, b); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T16:15:09.270

`c`由于您在调用后没有放入任何内容`malloc`，因此调用`strcat`会导致未定义的行为，因为分配的内存块可能根本不包含空终止符。在这种情况下，`strcat`最终将在搜索终止符期间访问分配块之外的内存。

这应该使调用一致：

```
char *c = malloc(100);
*c = '\0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T16:16:05.043

使用 calloc 将 c 的元素初始化为 0。否则它在第一次调用 strcat 之前保持未初始化，结果未定义。像您这样使用未初始化的变量会调用未定义的行为，这永远不会好。

# logging - What should I be logging in my apps

> ID：15298376
> 
> 赞同：0
> 
> 时间：2013-03-08T16:13:19.163
> 
> 标签：logging, log4net

I am a Junior developer and I have been tasked with installing Log4Net in my app and getting it working. That part is done. My question is What should I be loggining.

It seems very broad and I am mainly looking for an article/blog post/book that really says what to log or why you log specific events. I realize this could be very opinion laden but when I am googling around for an answer everyone says you should do it not why/what specifically you should log.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:41:03.207

I was recently given a similar task and felt the same way. I had to add logging to an installer. I logged the date and time the install was started, when it was completed and if it was completed successfully. I also log exceptions so I know where the install failed if it does and why.

# gdb - 如何更改 gdb 在交叉（ARM）调试中使用的运行时库（libc、ld 等）

> ID：15298377
> 
> 赞同：0
> 
> 时间：2013-03-08T16:13:18.997
> 
> 标签：gdb, runtime, arm

我有一个基于飞思卡尔 iMX6q ARM Cortex A9 处理器的 ARM 开发板。我还有一个要在板上调试的应用程序。开发板正在运行一个带有非剥离运行时库的 LTIB 文件系统。在主机上，我还下载了一个 Linaro 工具链（具体来说是软浮点 2012.04），它只有剥离的库。

我想告诉 gdb（在主机上运行）使用一组不同的运行时库（非剥离的），来自我保留在主机上的 LTIB 文件系统的映像。

我怎么做？

要求gdb给我

```
(gdb) show debug-file-directory 
```

它返回一些在我的主机文件系统上甚至不存在的路径....

```
The directory where separate debug symbols are searched for is 
"/cbuild/slaves/oort14/crosstool-ng/builds/arm-linux-gnueabi-linux/install/lib/debug". 
```

我什至不确定这是调整的正确变量..

更新：即使设置调试文件目录也无济于事，使用的运行时库仍在工具链路径中：

```
Reading symbols from /mnt/nfs_host/Linaro/gcc-linaro-arm-linux-gnueabi-2012.04-20120426_linux/arm-linux-gnueabi/libc/lib/ld-linux.so.3...(no debugging symbols found)...done. 
```

我能做什么？感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:34:45.497

使用 gdb 的`set sysroot DIRECTORY`命令（[GDB 手册](http://sourceware.org/gdb/onlinedocs/gdb/Files.html#index-set-sysroot-1067)）。假设您在设备上有一份文件系统副本，其调试信息位于`/LTIB_ROOT`：

```
[device]$ gdbserver --multi :2345
$ arm-linux-gnueabihf-gdb # GDB from Linaro toolchain
(gdb) set sysroot /LTIB_ROOT
(gdb) target extended-remote DEVICE-IP:2345
(gdb) set remote exec-file /bin/true
(gdb) file /LTIB_ROOT/bin/true
(gdb) start
Temporary breakpoint 1 at 0x842c: file XXX.c, line YYY.
(gdb) info sharedlibrary 
From        To          Syms Read   Shared Object Library
0x400007a0  0x4001cf80  Yes         /LTIB_ROOT/lib/ld-linux.so.3
0x40037ea0  0x4004948c  Yes         /LTIB_ROOT/lib/libgcc_s.so.1
0x40068760  0x40172b14  Yes         /LTIB_ROOT/lib/libc.so.6 
```

# php - PHP - 如何计算二维数组的第二维中的元素数？

> ID：15298378
> 
> 赞同：-4
> 
> 时间：2013-03-08T16:13:20.247
> 
> 标签：php, arrays, multidimensional-array

我有一个二维数组，我不知道如何计算数组第二维中的元素数。

例如：

```
$array1 = array(1,1,0,1,2,1,4);
$array2 = array(1,1,1,2,1,4);
$array3 = array(1,1,0,1,4);

$multi_array = array($array1,$array2,$array3); 
```

例如，我如何计算元素的数量`$multi_array[0][1]`？

输出： `count($ALPHABET[0][0]);`

`1`应该在哪里`7`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:15:37.360

将每个元素视为数组

```
count($multi_array[index]); 
```

我希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:16:16.570

这可能有效（未经测试）

```
$count = 0;
  foreach ($array as $type) {
  $count+= count($type);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:18:37.980

`$multiarray[0][1] = 1`，而不是数组。您可以通过以下方式完成`count($multiarray[$index])`或总结它们：

```
$total = 0;
foreach( $multiarray as $childarray ) {
  $total += count($childarray);
} 
```

或等价物：

```
$total = 0;
foreach( $i=0; $i<count($multiarray); $i++ ) {
  $total += count($multiarray[$i]);
} 
```

# jquery - for循环..等待AJAX 请求

> ID：15298381
> 
> 赞同：1
> 
> 时间：2013-03-08T16:13:28.960
> 
> 标签：jquery, ajax

我正在使用下面的代码遍历一系列日期。每次，我发出一个 ajax 请求并返回 xml 数据，然后调用一个函数在我的页面上的一行上显示一系列 div。问题是我的循环甚至在第一次 ajax 调用之前就完成了，我怎样才能保持 for 循环直到我的 ajax 请求和函数完成？非常感谢任何帮助！， 谢谢

```
 // Start of the loop for the date range selected    

        for(loopTime = startTime; loopTime <= endTime; loopTime += 86400000)   {

        // Produce the day from the date 
                loopDate=new Date(loopTime) 
                day = loopDate.getDate() ;          if (day < 10) { day = "0" + day } ; 
                mon = loopDate.getMonth()+1   ; if (mon < 10) { mon = "0" + mon } ; 
                year = loopDate.getFullYear()       
                epDate = year + "-" + mon + "-" + day 

        // Run the XML Query ONCE ONLY 
              $.ajax({
                  type: "POST",
                  url: "php_assoc/jobs_today.php",
                  data: { OnThisDate : epDate },
                  dataType: "xml",
                  success:returnedXMLdata             
                  });

        }// for loop date

        function returnedXMLdata(data) {
            script .... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T16:21:53.660

您的问题可能不是循环提前完成（这实际上是一件好事），而是所有 AJAX 请求几乎立即被触发。

如果您希望将 AJAX 请求排入队列，则需要使用事件处理程序本身进行循环迭代，而不使用`for`：

```
var loopTime = startTime;
(function iterate() {
    $.ajax(...).always(function() {
        loopTime += 86400 * 1000;
        if (loopTime <= endTime) {
            iterate();
        }
    });
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T16:15:11.843

在 ajax 请求中，添加一个 async 属性并将其设置为 false。

```
async: false, 
```

# drupal-6 - drupal 6 菜单层次结构管理

> ID：15298388
> 
> 赞同：0
> 
> 时间：2013-03-08T16:13:51.217
> 
> 标签：drupal-6

我正在寻找一个 D6 模块来以分类管理器的方式管理菜单层次结构。不想在节点编辑表单中做，核心的拖拽方式对于大菜单来说比较麻烦。如果我可以折叠菜单的各个部分，以便可以轻松地将项目拖到另一个部分，那将与分类管理器之类的东西一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:26:48.283

您要查找的模块称为[**Hierarchical Select**](http://drupal.org/project/hierarchical_select)。更准确地说，您对子模块“分层选择菜单”感兴趣。如果您访问该页面，您将在模块描述中看到以下内容：

> Drupal 6 版本集成了：
> 
> *   论坛（Drupal 核心）
> *   菜单（Drupal 核心）
> *   分类（Drupal 核心）
> *   内容分类
> *   视图——结合分类法，而不是内容分类法
> *   节点参考 (CCK)
> *   用户条款
> *   分层选择字段选择器
> *   OG 子组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:15:53.693

实际上，我想在一页中调整单个菜单的整个层次结构。到目前为止，我找到的最佳答案是 Big Menu。它提供了一个版本的菜单管理页面，如 Drupal 核心，但也允许您折叠/隐藏较低级别，或显示包含菜单子集的页面。

# javascript - 我将如何使用子/父符号访问此选择器

> ID：15298394
> 
> 赞同：0
> 
> 时间：2013-03-08T16:14:10.397
> 
> 标签：javascript, jquery, css, d3.js, selector

您好，我将如何`text`使用子父 css 选择器表示法访问对象

[![](../Images/c89c783b59f53e5e9c71033ed9a0543a.png)](https://i.stack.imgur.com/ox2ur.png)

即 `$(#mydivID > svg)` 会得到我的 svg 对象，它没有类名或 id。

我将如何获得`text`对象？会`$(.x axis > g > text)`吗？我不知道

我正在使用 d3，但 jquery 和 d3 可以使用类似的符号来获取选择器，我认为更多的人会熟悉 jquery，因此他们可能会充分回答这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:17:25.197

正确的 CSS 选择器应该是`.x.axis > g > text`.

**编辑：** [ajp15243 指出](https://stackoverflow.com/questions/15298394/how-would-i-access-this-selector-using-child-parent-notation/15298468#comment-21590510)，这将使`text`元素中的所有`g`元素立即嵌套在下面`.x.axis`。要获得上面突出显示的*特定* `text`元素，请使用此选择器：

`.x.axis > g:nth-child(2) > text`

# visual-c++ - 鼠标坐标变量的范围

> ID：15298395
> 
> 赞同：0
> 
> 时间：2013-03-08T16:14:10.497
> 
> 标签：visual-c++, global-variables, mouse, static-members

我正在寻求有关如何声明位于 a 内的鼠标坐标并由属于该`namespace`的所有 es 经常使用它的建议。我习惯在 a 中将其变量声明为静态变量，并在与其他es 处理时，将我置于它们之间的一些随机错误链接中。我喜欢全局声明它的范围，但不知道应该如何以正确的方式完成它。`class``namespace``struct``class`

我的一些实现是这样的：

```
struct Mouse {

    static double X,Y,Z;

    static int state,button;

} 
```

//像这样使用它

```
class Foo {

    void func() {

        Mouse::X = ?;
        Mouse::Y = ?;

    }

}

class Mouse {

    double X,Y,Z;

    int state, button;

} 
```

//

```
class Foo {

     static Mouse mouse;
    //or
    Mouse* mouse; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:17:30.517

对我来说，类和使用动态内存分配的例子是最好的

# c# - mvc 4 IEnumerable 检查其是否为空

> ID：15298396
> 
> 赞同：7
> 
> 时间：2013-03-08T16:14:11.907
> 
> 标签：c#, asp.net-mvc, linq, asp.net-mvc-4

我已经为此查看了stackoverflow，但找不到我正在寻找的答案，它真的很简单。基本上我想知道如何检查我的 IEnumerable 变量是否为空，我的 if 语句只是嘲笑我并让变量通过。

这是场景，我有一个从数据库中提取的数据列表，这一点是一个过滤功能（所以没有 [HttpPost]），它根据用户输入过滤内容。它检查的第一件事是评论数据库中的评论列表，如果返回空我希望它检查评论数据库中的用户列表。

这是代码：

```
 var review = from m in _db.Reviews
                     select m;        

        if (!String.IsNullOrEmpty(searchString))
        {
            review = review.Where(s => s.review.Contains(searchString));
            if (review != null && review.Any())
            {
                return View(review);      
            }
            else
            {
                review = review.Where(s => s.user.Contains(searchString));
                return View(review);      
            } 
```

我已经搞砸了一点，用于检查它是否为空的 if 语句，然后是 .any()，然后是 != null，现在两者都是，变量只是走过去，边走边笑。我运行调试器并将其放在几个位置。当我输入一个我知道不会返回结果的值时，这就是调试器所说的审查值：

“IEnumerable 没有产生任何结果”

为了防止这种情况发生，我什至在 if 语句中删掉了那句话。变量笑得很厉害，我发誓我可以通过扬声器听到它。

无论如何，伙计们，如果我能找到最好的方法来做到这一点，为什么。会有饼干。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T16:18:38.347

问题是当你这样说时：

```
 review = review.Where(s => s.user.Contains(searchString)); 
```

...您没有修改原始查询：

```
 var review = from m in _db.Reviews
              select m; 
```

而是您在此处创建的：

```
 review = review.Where(s => s.review.Contains(searchString)); 
```

如此有效地你在说：

> 如果查询没有任何结果，请向其添加其他条件。

这显然也不会产生任何结果。

试试这个：

```
 if (!String.IsNullOrEmpty(searchString))
    {
        var reviewMatches = _db.Reviews.Where(s => s.review.Contains(searchString));
        if (reviewMatches.Any())
        {
            return View(reviewMatches);      
        }
        else
        {
            var userMatches = _db.Reviews.Where(s => s.user.Contains(searchString));
            return View(userMatches);      
        } 
```

请注意，您声明变量的方式，它们不可能是`null`，因此您只需要担心它们是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T11:50:44.060

试试这个，而不是 if 条件：

```
var review = from m in _db.Reviews
             select m;        

if (!String.IsNullOrEmpty(searchString))
{
  review = review.Where(s => s.review.Contains(searchString));
  if (review.count() != 0 && review.Any())
  {
    return View(review);
  }
  else
  {
    review = review.Where(s => s.user.Contains(searchString));
    return View(review);
  }
  return null;
} 
```

# ruby-on-rails - 如何优化这个关联链？

> ID：15298397
> 
> 赞同：1
> 
> 时间：2013-03-08T16:14:15.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`Event`与模型`many-to-many`关联的`Service`模型

用户可以创建事件并选择将哪些服务标记到该事件。

用户可以订阅服务，当创建事件时，如果用户订阅了在该事件中标记的服务，则应通知用户。

此外，模型与`User`模型有`has_many`关联`Email`。

我希望能够获得所有电子邮件地址的数组，以便向订阅者发送通知。

这是我所拥有的：

```
class Event < ActiveRecord::Base

  has_many :event_services, :dependent => :destroy
  has_many :services, :through => :event_services

  def recipients
    recipients = services.each_with_object(arr = []) do |service|
      service.users.each do |user|
        user.emails.each do |email|
          arr << email.address
        end
      end
    end
  end
  recipients.uniq
end 
```

这行得通，但它超级丑陋而且效率不高。我将如何优化这个？

这是我的电子邮件模型：

```
class Email < ActiveRecord::Base
  attr_accessible :address, :user_id  
  belongs_to :user
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:52:52.750

使用单个 SQL 请求会更有效以下使用[多个连接](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)的请求应该可以工作：

```
def recipients
  Email.joins(:user => {:services => :event_services}).where(:event_services => {:event_id => self.id}).pluck(:address).uniq
end 
```

# mysql - 在本地使用 MySQL 用户的 VB.net 项目

> ID：15298400
> 
> 赞同：0
> 
> 时间：2013-03-08T16:14:23.647
> 
> 标签：mysql, vb.net

需要帮忙。

我做了一个 vb.net 项目，它已经完成了。但我的问题是，在我将项目安装到另一台计算机后。除非 WAMP 服务器打开，否则它无法连接到数据库。有没有办法在不打开 WAMP 服务器的情况下使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:25:02.933

WAMP 代表 Windows Apache **MySQL** PHP。它运行 MySQL 服务器，因此您需要它来访问数据库。选项是另一台计算机上的用户运行一些 MySQL 服务器或连接到运行应用程序所需的数据库的 Web 服务器。

您也可以考虑使用 Microsoft Access 数据库。在这种情况下，您不需要服务器。所有数据库都在一个 MS Access 文件中。

# knockout-mapping-plugin - HotTowel：在页面之间导航时 Viewmodel 丢失映射

> ID：15298402
> 
> 赞同：1
> 
> 时间：2013-03-08T16:14:30.230
> 
> 标签：knockout-mapping-plugin, single-page-application, hottowel

我刚开始使用 HotTowel，印象非常深刻。我设法学习如何将它与淘汰赛绑定一起使用。这是我面临的问题：

我有一个有 3 页的网站：首页、关于、罐子

在罐子里我有：

```
define(['services/logger', 'repo/jarrepo'], function (logger, repo) {
    var Jar = function () {
        this.Id = ko.observable(0);
        this.Name = ko.observable('');        
    }

    this.jars = ko.mapping.fromJS([]);

    var vm = {
        title: ko.observable('JARS'),
        jars: jars,
        AddJar: function () {
            this.jars.push(new Jar);
        },
        DeleteJar: function (jar) {
            jars.destroy(jar);
        },
        activate: function () {
            repo.getJars(this.jars);
            return true;
        }
    };

    return vm;
}); 
```

在我看来，我有：

```
<div data-bind="foreach: jars">
    <label data-bind="text: name" />
    <a href="#" data-bind="click $root.DeleteJar">Delete</a>
</div> 
```

我的回购代码：

```
$.getJSON("/api/jar/getjars", function (data) {
            ko.mapping.fromJS(data, jars);
        }); 
```

如果我在 Jar 页面上，它工作正常。但是，当我导航到 Home 并返回时，ko 映射丢失了。我使用 chrome 控制台检查它并检查 jars 数组，它的所有元素都丢失了`ko.mapping`属性中的节点。因此，我无法删除 jar，但仍然可以向其中添加新的。

谁能帮我弄清楚导航后如何重新映射对象？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:53:08.663

你的 repo.getJars(this.jars); 是一个异步任务，所以你必须在你的激活函数中返回一个承诺，让事情正常工作。

我认为这可以解决问题：

```
activate: function () {
        return repo.getJars(this.jars);
    } 
```

你的回购也应该返回承诺：

```
function getJars(jars){
    return $.getJson(...);
} 
```

# objective-c - Objective-C 等价于 Ruby 中的 string.unpack('N')

> ID：15298410
> 
> 赞同：2
> 
> 时间：2013-03-08T16:15:02.133
> 
> 标签：objective-c, ruby, nsstring

我正在尝试将字符串转换为 32 位无符号网络（大端）字节顺序。我似乎无法弄清楚如何做到这一点。在 Ruby 中，我通过`string.unpack('N')`- 但似乎无法在 Objective-C 中管理它。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T16:21:41.307

在 Objective-C 中，您将转换`NSString`为`NSData`. 然后您可以访问`NSData`对象中的字节。

```
NSString *str = @" H€llö Wòrld";
NSData *data = [str dataUsingEncoding:NSUTF32BigEndianStringEncoding];
NSLog(@"%@", data);
// Output:
// <0001f604 00000020 00000048 000020ac 0000006c 0000006c 000000f6 00000020 00000057 000000f2 00000072 0000006c 00000064>

const uint8_t *bytes = [data bytes]; // pointer to converted bytes
NSUInteger length = [data length];   // number of converted bytes 
```

# javascript - 处理部分视图和 javascript

> ID：15298421
> 
> 赞同：0
> 
> 时间：2013-03-08T16:15:24.210
> 
> 标签：javascript, ajax, asp.net-mvc, partial-views

我已经设置了一个局部视图以在索引页面中呈现。当用户单击排序按钮时，部分视图使用 Ajax 发布到服务器。这样整个页面就不会只刷新部分视图表。

问题是在第一次排序之后，索引页面中的 JavaScript 不再有效。我通过将 js 放在局部视图本身中以保持事件来解决这个问题，但这会产生 js 错误，说“继续”或“忽略”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:18:20.713

这是因为您新注入的元素（通过 ajax）不知道有界的事件。所以这些事件绑定对他们不可用。

您应该更改要使用的事件绑定，[`on`](http://api.jquery.com/on/)以便它处理当前元素和未来元素（通过 ajax 左右动态添加到 DOM）

例如，如果您想处理具有 css 类的元素的***点击***`someCssClassSelector`事件，

改变

```
$(".someCssClassSelector").click(function(){
  //do something
}); 
```

到

```
$(document).on("click",".someCssClassSelector",function(){
  //do something
}); 
```

# gravity - 计算 X 和 Y 速度

> ID：15298424
> 
> 赞同：0
> 
> 时间：2013-03-08T16:15:31.967
> 
> 标签：gravity

我正在尝试计算被一个大物体的重力吸引的小物体的 X 和 Y 速度[这是我的计算如何工作的视频](http://youtu.be/T6lAx7cFlkk)。正如您在一段时间后看到的那样，每个小物体都会进入一个点。我想实现像[这个](http://www.youtube.com/watch?v=vr03CIfjK4I)视频中那样的动作。我如何计算 X 和 Y 速度。我已经保存了列表中所有小对象的坐标，并且每个游戏周期我将 X 速度添加到 X 坐标，将 Y 速度添加到 Y 坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:45:47.453

从我从视频中可以看出，在你的视频中，速度是可变的。在您瞄准的视频中，速度是 -1 还是 1？似乎在这两种情况下，（诚然，您的版本更是如此）小物体会聚到一个点。

# sql-server - 休眠 JPQL CURRENT_DATE 在 SQL Server 上不起作用

> ID：15298426
> 
> 赞同：4
> 
> 时间：2013-03-08T16:15:34.387
> 
> 标签：sql-server, hibernate, jpa-2.0

我有以下 JPQL 查询：

```
SELECT x FROM Bla x WHERE x.deadline < CURRENT_DATE 
```

这在 MySQL 上按预期工作。但 SQL Server 抱怨`CURRENT_DATE`无法识别。

我在问自己到底是什么问题。然后`CURRENT_DATE`是一个标准的 JPA 函数，它应该独立于底层 RDBMS 进行解析。

此外，Hibernate 文档也已`CURRENT_DATE`记录（请参见此处：[http](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#ql-expressions) ://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#ql-expressions ）。

我用谷歌搜索，发现很多评论告诉我我应该`CURRENT_DATE()`改用。但这不是 JPQL。

那么为什么`CURRENT_DATE`不起作用，解决方案是什么？

我正在使用休眠 4.1.8.Final。

最好的问候，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:38:37.047

您可以尝试将当前日期作为参数传递给查询。此外，这不会有可移植性问题。

```
session.createQuery("SELECT x FROM TABLE_NAME x WHERE x.deadline < :currentDate")
        .setParameter( "currentDate", currentDate)
        .list(); 
```

否则，您可以尝试使用`current_date()`而不是查询`current_date`，这是 HQL 表达式的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:16:30.160

尝试使用`GETDATE()`

```
SELECT x FROM Bla x WHERE x.deadline < GETDATE() 
```

# r - 在双 for 循环中写入数据帧

> ID：15298432
> 
> 赞同：-5
> 
> 时间：2013-03-08T16:15:45.923
> 
> 标签：r

我有一个嵌套列表 ( `FCdat.pp.con[[x]][[y]]`)，其中单独的列保存矩阵的值（对于每个 x 和嵌套的 y）。现在我想通过写入数据帧来制作矩阵。

但是，我没有成功地在双 for 循环中为矩阵提供正确的名称。目前，我只成功地用关于“x”的信息制作了矩阵，但没有用关于“y”的信息制作矩阵。请帮助我或建议另一种方法来做到这一点。

```
for (x in 1:36){
    for (y in 1:5){
        cells <- c(0,
                   FCdat.pp.con[[x]][[y]]$A12,
                   FCdat.pp.con[[x]][[y]]$A13,
                   FCdat.pp.con[[x]][[y]]$A14,
                   FCdat.pp.con[[x]][[y]]$A21,0,
                   FCdat.pp.con[[x]][[y]]$A23,
                   FCdat.pp.con[[x]][[y]]$A24,
                   FCdat.pp.con[[x]][[y]]$A31,
                   FCdat.pp.con[[x]][[y]]$A32,
                   0,
                   FCdat.pp.con[[x]][[y]]$A34,
                   FCdat.pp.con[[x]][[y]]$A41,
                   FCdat.pp.con[[x]][[y]]$A42,
                   FCdat.pp.con[[x]][[y]]$A43,
                   0)
        rnames <- c("ALG1","ALG2","ALG3","ALG4")
        cnames <- c("ALG1","ALG2","ALG3","ALG4")
        Ind.matr <- t(matrix(cells, nrow=4, ncol = 4))
        dimnames(Ind.matr)=list(rnames, cnames)
        assign(paste0("Indmatr", x), Ind.matr)

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:23:23.203

在循环开始之前添加：`result <- lapply(1:36, function(.)vector("list",5))`

然后替换`assign(paste0("Indmatr", x), Ind.matr)`为`result[[x]][[y]] <- Ind.matr`.

# asp.net - 存储过程传递参数 MAX size Limite

> ID：15298433
> 
> 赞同：0
> 
> 时间：2013-03-08T16:15:57.800
> 
> 标签：asp.net, tsql, sql-server-2005, stored-procedures, report

我正在使用 Microsoft SQL Server 2005

我创建了用于生成报告的存储过程。

ASP.NET from 用于为存储过程传递参数。

问题是它没有采用为参数选择的所有 PartNumber。它只需要 225 个零件号，并且只为那些零件号生成报告，但实际上我有 700 多个零件号。

## 还有其他方法可以扩展参数的大小吗？

## sql server 2008 中是否有更多大小限制？

## 有没有办法将这个“@sqlQuery nvarchar(4000)”变量存储到 XML 变量中？

4000 是 nvarchar 的最大大小（因为我试图扩展它并且它不接受超过 4000）。XML 变量没有限制。

## 参数值示例（从 ASP.NET 传递）

```
PartNumber
314013        
314039       
314047        
314054     
314062        
314070      
314088         
314096         
314104       
314344        
314351    
314377        
314393 
```

## 存储过程

```
USE [Reportbox]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[spCreateReport2]

(@prod nvarchar(4000))

AS
BEGIN

DECLARE @sqlQuery nvarchar(4000)
declare @intMonth nvarchar(2)
declare @intMonth1 nvarchar(2)
declare @intMonth2 nvarchar(2)
declare @intMonth3 nvarchar(2)
declare @intMonth4 nvarchar(2)
declare @intMonth5 nvarchar(2)

SELECT @intMonth = fiscalmonth FROM FiscalWeeks WHERE CAST(FLOOR(CAST(GETDATE() AS FLOAT)) AS DATETIME) between weekstart and weekend
if @intmonth-1<=0 BEGIN set @intmonth1=@intmonth-1+12 END else set @intMonth1=@intMonth-1
if @intmonth-2<=0 BEGIN set @intmonth2=@intmonth-2+12 END else set @intmonth2=@intmonth-2
if @intmonth-3<=0 BEGIN set @intmonth3=@intmonth-3+12 END else set @intmonth3=@intmonth-3
if @intmonth-4<=0 BEGIN set @intmonth4=@intmonth-4+12 END else set @intmonth4=@intmonth-4
if @intmonth-5<=0 BEGIN set @intmonth5=@intmonth-5+12 END else set @intmonth5=@intmonth-5

Set @sqlQuery =
'select distinct d.PROD80, DESC80, SUM_AVGU80, AVGU80, SUM_ONHA80, d.ONHA80, SUM_SAFE80, d.SAFE80,
MAX_FOQT80, MAX_ABCC80, MAX_MINQ80,
SUM_WEEK_NO_PO, SUM_TRIG80, d.TRIG80, SUM_BQTY80, DQTY80, OQTY80,
CASE WHEN d.AVGU80<>0 THEN CAST(ROUND(d.ONHA80/d.AVGU80,0) AS INT) ELSE 0 END AS WKS30
FROM DI80ACT00 d INNER JOIN vwDataAtCompanyLevel v on (d.prod80=v.prod80)
LEFT OUTER JOIN DI80ACT01 t on (d.prod80=t.prod80) and t.ware80 <> ''30''
WHERE  d.prod80 in (' + @prod + ') and d.prod80<>''HLW54B'' and d.ware80=''30''
GROUP BY  d.PROD80, DESC80, SUM_AVGU80, AVGU80, SUM_ONHA80, d.ONHA80, SUM_SAFE80, d.SAFE80,
MAX_FOQT80, MAX_ABCC80, MAX_MINQ80,SUM_HSTA80,SUM_HSTB80,SUM_HSTC80,SUM_HSTD80,SUM_HSTE80,SUM_HSTF80,SUM_POOR80,POOR80,SUM_TWIN80,SUM_WEEK_No_PO,SUM_TRIG80,TRIG80,SUM_BQTY80,DQTY80,OQTY80'

exec(@sqlQuery)
END 
```

任何帮助或详细信息都会非常有帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:33:39.177

使用`NVARCHAR(MAX)`它支持超过 10 亿个字符。但是，我真的不希望您`IN()`对 700 个值的查询能够很好地执行。

如果他们选择`ALL`，则将字符串传递`'ALL'`给参数，并且仅在他们*没有*选择时才包含`IN()`列表。所以在 SQL 中：*`ALL`*

 *```
Set @sqlQuery = 'select distinct 
...
WHERE d.prod80<>''HLW54B'' and d.ware80=''30'''
+ CASE WHEN @prod = 'ALL' THEN '' ELSE 
'AND d.prod80 in (' + @prod + ')' END
+ 'GROUP BY ...' 
```

没有理由有一个庞大的`IN()`子句列出表中的每个值。*

# c - C 的未知模式提取

> ID：15298435
> 
> 赞同：3
> 
> 时间：2013-03-08T16:16:05.040
> 
> 标签：c, signal-processing, extraction

我目前正在开发一种音频处理软件，该软件必须通过使用过零估计来检测输入信号的频率。当输入一个完美的正弦波时，估计频率并不难，但是当谈到钢琴时，声波是不同的，其背后的理论也发生了变化。

目前，软件检测到每个零并保存它与前一个之间的索引位置（以记录经过了多少样本）。

以下是一个数组，其中包含以 44.1kHz 采样的 130 Hz 钢琴 C 音符的每个零之间的样本。

```
44  11  36  65  56  12  37  66  52  13  38  67  51  11  39  68  50  11  47  60  49  11  48  61  47  14  47  66  43  13 
```

任务是确定未知长度的未知模式。但是，这些模式可能有误差范围。例如，

```
44, 11, 36, 65
56, 12, 37, 66
52, 13, 38, 67 
```

是模式。因此，在处理模式的均值和之后，可以很容易地检测到频率。 **我怎样才能检测到这些类型的模式，知道模式，原样，它的长度是未知的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:00:41.020

你应该先尝试低通你的信号。这将减少信号分量，包括导致额外零交叉的更高泛音。这里的重点是增加基波相对于其他谐波的强度，这些谐波实际上只是产生了无关的零交叉。

有关 EQ 的一些提示：

[http://blog.bjornroche.com/2012/08/basic-audio-eqs.html](http://blog.bjornroche.com/2012/08/basic-audio-eqs.html)

和 eq 因为它特别与音高检测有关：

[http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html](http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html)

根据您的信号，您可能需要更陡峭的东西，例如更高阶或不同类型的滤波器。

当然，zeroX 音高检测将受到固有限制，低通可能不够。

**更新**：澄清了低通的目的是强调基础，而不是消除噪音。

# asp.net - 收到“服务器标签格式不正确”错误

> ID：15298436
> 
> 赞同：-3
> 
> 时间：2013-03-08T16:16:05.200
> 
> 标签：asp.net

```
<th style="width:200px;"><asp:CheckBox ID="UtilityChanged('<%# Eval("id") %>')" runat="server" Enabled="true" onchange="UtilityChanged('<%# Eval("id") %>');" Checked='<%# Convert.ToBoolean(Eval("Checked")) %>'/></th> 
```

错误：服务器标签格式不正确......我似乎无法调试它......有帮助吗？

* * *

编辑：我注释掉了ochange，但我仍然收到错误；

在这段代码的正上方，我使用相同的数据源绑定到不同的字段。哪个工作正常...

```
<th style="width:200px;"><%# Eval("Name") %></th> 
```

为什么（下面）不起作用.....

```
 <th style="width:200px;"><asp:CheckBox ID='UtilityChanged<%# Eval("id") %>' runat="server" Enabled="true" Checked='<%# Convert.ToBoolean(Eval("Checked")) %>'/></th> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:27:41.517

`onchange`您需要在属性中使用一些字符串连接：

```
<th style="width:200px;"><asp:CheckBox ID="CheckBox1" runat="server" Enabled="true" onchange='<%# "UtilityChanged" + (Eval("id")) %>' Checked='<%# Convert.ToBoolean(Eval("Checked")) %>' /></th> 
```

# java - Hibernate：关闭会话工厂不会关闭 c3p0 连接池

> ID：15298437
> 
> 赞同：8
> 
> 时间：2013-03-08T16:16:11.230
> 
> 标签：java, hibernate, c3p0

我最近开始在我的应用程序中使用 hibernate 和 c3p0 作为 ORM。但是，当我关闭会话工厂时，连接池不会自行关闭！这是我的应用程序中*唯一一个*我对会话进行任何操作的地方。

```
 StatelessSession session = null;
    Transaction transaction = null;

    try {
        session = sessionFactory.openStatelessSession();
        transaction = session.beginTransaction();

        List<Thingy> list = session.getNamedQuery("getAvailableThingy").list();

        transaction.commit();
        return list;

    } catch (Exception error) { 
        if (transaction != null) {
            transaction.rollback();
        }
        throw error;
    } finally {
        if (session != null) {
            session.close();
        }
    } 
```

这是我的`hibernate.cfg.xml`配置文件

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
        <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
        <property name="javax.persistence.validation.mode">none</property>
        <property name="hibernate.connection.release_mode">after_transaction</property>

        <property name="hibernate.c3p0.minPoolSize">1</property>
        <property name="hibernate.c3p0.maxPoolSize">2</property>
        <property name="hibernate.c3p0.acquireIncrement">1</property>
        <property name="hibernate.c3p0.initialPoolSize">1</property>
        <property name="hibernate.c3p0.timeout">30</property>
        <property name="hibernate.c3p0.maxIdleTimeExcessConnections">5</property>
        <property name="hibernate.c3p0.idleConnectionTestPeriod">300</property>
    </session-factory>
</hibernate-configuration> 
```

请注意，空闲连接非常短的原因是它是我发现的唯一让我的集成测试通过的方法。他们经常打开和关闭会话工厂，因此我总是用完连接。由于我们正处于项目的开始阶段，我想从长远来看这不是一个非常可持续的策略。

需要注意的“有趣”的事情是，尽管我将初始连接池设置为一个，但 c3p0 仍然尝试在启动时打开两个连接。我的猜测是某处有某种隐藏的会话不会关闭（但在哪里？打败我）。

那么我怎样才能让那个烦人的连接池自行关闭呢？

附加信息：我如何创建和销毁我的会话工厂

```
import static com.google.common.base.Preconditions.*;

import javax.inject.Inject;
import javax.inject.Provider;
import javax.inject.Singleton;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.google.inject.Provides;

@Singleton 
public class PostgisConnection implements Provider<SessionFactory>, AutoCloseable {
    private final Logger logger = LoggerFactory.getLogger(getClass());
    private final ConnectionInfo connectionInfo;
    private SessionFactory sessionFactory = null;

    @Inject 
    public PostgisConnection(ConnectionInfo connectionInfo) {
        this.connectionInfo = connectionInfo;
    }

    public AutoCloseable open() {
        checkState(sessionFactory == null, "Connections to postgis are already open");

        logger.info("Creating sessionFactory for connection to postgis: {}", connectionInfo.getJdbcUrl());
        sessionFactory = newPostgisSessionFactory(connectionInfo);

        return this;
    }

    @Override
    public void close() throws Exception {
        try {
            if (sessionFactory != null) {
                logger.info("Closing sessionFactory for postgis: {}", connectionInfo.getJdbcUrl());
                sessionFactory.close();
                checkState(sessionFactory.isClosed(), "Session factory should be closed at this point");
            }
        } catch (Exception error) {
            logger.error("Error closing SessionFactory", error);
        }
    }

    @Provides 
    public SessionFactory get() {
        return sessionFactory;
    }

    public static SessionFactory newPostgisSessionFactory(ConnectionInfo connectionInfo) {
        Configuration configuration = configurationWith(connectionInfo);
        return configuration.buildSessionFactory(registryFrom(configuration));
    }

    private static Configuration configurationWith(ConnectionInfo connectionInfo) {
        Configuration configuration = new Configuration();
        setConnectionInfo(connectionInfo, configuration);
        configuration.addURL(PostgisConnection.class.getResource("mapping.hbm.xml"));
        configuration.configure(PostgisConnection.class.getResource("hibernate.cfg.xml"));

        return configuration;
    }

    private static void setConnectionInfo(ConnectionInfo connectionInfo, Configuration configuration) {
        configuration.setProperty("hibernate.connection.url", connectionInfo.getJdbcUrl());
        configuration.setProperty("hibernate.connection.username", connectionInfo.getUsername());
        configuration.setProperty("hibernate.connection.password", connectionInfo.getPassword());
    }

    private static ServiceRegistry registryFrom(Configuration configuration) {
        return new ServiceRegistryBuilder()
                .applySettings(configuration.getProperties())
                .buildServiceRegistry();
    }

} 
```

*   休眠版本：4.1.10.Final
*   C3p0 版本：0.9.1.2

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-17T14:46:01.623

我遇到了同样的问题并成功使用了[此错误报告中](https://hibernate.atlassian.net/browse/HHH-7364)提供的解决方法：

```
private void closeSessionFactory(SessionFactory factory) { 
   if(factory instanceof SessionFactoryImpl) {
      SessionFactoryImpl sf = (SessionFactoryImpl)factory;
      ConnectionProvider conn = sf.getConnectionProvider();
      if(conn instanceof C3P0ConnectionProvider) { 
        ((C3P0ConnectionProvider)conn).close(); 
      }
   }
   factory.close();
} 
```

您必须引用 hibernate-c3p0-4.xx jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T06:41:17.817

[我遇到了同样的问题并成功使用了此错误报告中](https://hibernate.atlassian.net/browse/HHH-7364)提供的 ehnanced（2014 年 1 月）解决方法：

```
private static boolean closeSessionFactoryIfC3P0ConnectionProvider(SessionFactory factory) {

    boolean done = false;
    if(factory instanceof SessionFactoryImpl) {
        SessionFactoryImpl sf = (SessionFactoryImpl)factory;
        ConnectionProvider conn = sf.getConnectionProvider();
        if(conn instanceof C3P0ConnectionProvider) { 
            ((C3P0ConnectionProvider)conn).close(); 
            try {
                Thread.sleep(2000); //Let give it time...it is enough...probably
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            done = true;
        }
        factory.close();
    }
    return done;

} 
```

您必须引用 hibernate-c3p0-4.xx jar。

# javascript - 带有 HTML 内容解析的变量

> ID：15298438
> 
> 赞同：1
> 
> 时间：2013-03-08T16:16:11.610
> 
> 标签：javascript, jquery

我有一个名为的变量`$reservas`，它包含一个带有 HTML 表的字符串。`.tdRemove`我想在将它们分配给 div 之前删除部分表 ( ) `#cenas`。

```
if ($reservas){
    $($reservas).find('.tdRemove').each(function(){
        console.log($(this).html());
        $(this).remove();
    });
    $("#cenas").html($reservas);
} 
```

我试过这个，但它似乎没有删除任何东西。我也试过： `$($reservas).find('.tdRemove').remove();`没有`$($reservas).remove('.tdRemove');` 任何效果。有什么建议么？

有什么方法可以告诉 jQuery 该变量包含 html 内容，并且应该被解析为那个？如果是这样，怎么做？..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:22:50.877

将字符串转换为 jQuery 对象后，它现在是 jQuery 对象中保存的一系列 DOM 对象（在文档片段中）。删除该`.tdRemove`片段中的对象后，您可以直接将其附加到您的 DOM。无需返回 HTML：

```
if ($reservas){
    var item = $($reservas);
    item.find('.tdRemove').remove();
    $("#cenas").empty().append(item);
} 
```

此外，您的代码不起作用，因为`$reservas`HTML 字符串从未被修改过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:19:42.920

我认为，从[文档](http://api.jquery.com/remove/)告诉我的内容来看，您只能`remove()`看到 DOM 中已经存在的内容。

> 从 DOM 中删除匹配的元素集。

也许您想先添加您的表格，将其设置为 ? display: none`，然后过滤要删除的元素，最后显示表格。

```
if ($reservas) {
    $("#cenas")
        .hide()
        .html($reservas)
        .find('.tdRemove').each(function(){
            console.log($(this).html());
            $(this).remove();
        })
        .show();
} 
```

# c - 程序在循环处暂停

> ID：15298439
> 
> 赞同：-1
> 
> 时间：2013-03-08T16:16:13.093
> 
> 标签：c, while-loop, scanf

我有一个简单的 C 程序，它循环从用户那里获取无限数量的数字（它是一种 CAS）。我正在用多种语言编写程序，虽然 C++ 版本运行良好，但 C 版本在循环结束时停止，当程序要求另一个用户操作时，需要用户输入两次操作。以下是该程序的工作方式：

> **输入操作**
> 4+2
> **6**
> **6** +2 // 用户在上一个答案的基础上加 2
> **8** +x // 用户可以无限期地继续这样加

相反，会发生以下情况：

> **输入操作**
> 4+2
> **6** +2
> // 在用户再次输入“+2”之前什么都不会发生
> +2
> **8** +x
> +x
> [sum of 8+x]
> 等等。

我最初认为这种暂停是由于程序两次要求用户输入引起的，一次是在循环开始时，然后是在循环结束前。我在循环中放置了一个迭代计数器，以确定程序应该得到什么样的输入（`&num1,&op,&num2`或者`&op,&num2`）。出于某种原因，这并没有什么不同。这是代码的相关部分：

```
int opnubmer;
opnumber = 0;

printf("Enter an operation\n");
    while(op != '=')
    {
        if (opnumber == 0)
        {
            scanf("%d%c%d",&num1,&op,&num2);
        }
        else if (opnumber != 0)
        {
            scanf("%s%d",&op,&num2);
        }
        switch(op)
        {
            case '+':
                num2 += num1;
                break;

            case '-':
                num2 -= num1;
                break;

            case '*':
                num2 *= num1;
                break;

            case '/':
                num2 /= num1;
                break;

            default:
                printf("%s%c%s", "Unknown op: ", op, "\n");
                exit(1);
        }

        printf("Solution: ");
        printf("%d",num2);

        opnumber++;
        num1=num2;
   } 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:21:34.583

看起来您在第二次`scanf`通话中打错了，您使用`%s`而不是`%c`阅读`op`.

此外，在使用`scanf`读取输入时，您必须非常小心空格。尾随空格（包括换行符）留在输入流上，因此下次您从输入流中读取时，它会首先看到空格。

不是使用`scanf`，而是使用`fgets`一次将输入一行读入缓冲区，然后从该缓冲区中解析出您需要的内容。例如。：

```
char line[256];
fgets(line, sizeof(line), stdin);
sscanf(line, "%d%c%d", &num1, &op, &num2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:24:52.087

它表现得非常好，当您不在第一次迭代中时，您正在寻找 a `string`，即使您通过更改`%c`程序来修复它也只需要一个字符和一个数字而不是一个`number character number`序列。

# python - 2 图形鼠标运动 matplotlib

> ID：15298444
> 
> 赞同：3
> 
> 时间：2013-03-08T16:16:28.143
> 
> 标签：python, matplotlib

我有 2 个图表和一个鼠标运动功能，可以打印出它们所在画布的坐标。我怎样才能使鼠标运动功能仅在鼠标悬停在其中一个图形上时才被调用。

```
self.ax.imshow(matrix,cmap=plt.cm.Greys_r, interpolation='none')
self.ax.imshow(matrix2,cmap=plt.cm.Greys_r, interpolation='none')

def motion_capture(event)
    print event.xdata
    print event.ydata

self.canvas = FigureCanvas(self,-1,self.fig)
self.canvas.mpl.connect('Motion', motion_capture) 
```

目前，当鼠标沿着画布移动时调用它，如果它不在任一图形上，`none`则为坐标打印。我怎样才能做到这一点，所以它只被要求用于其中一张图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:08:17.090

从您的示例中不清楚，但我假设您有单独的轴/子图。（如果不是这种情况，那么你需要做更多的事情。）

在这种情况下，最简单的方法就是检测事件正在使用哪些轴`event.inaxes`。

举个简单的例子：

```
import matplotlib.pyplot as plt
import numpy as np

fig, axes = plt.subplots(ncols=2)

axes[0].imshow(np.random.random((10,10)), interpolation='none')
axes[1].imshow(np.random.random((10,10)), interpolation='none')

def motion_capture(event):
    if event.inaxes is axes[0]:
        print event.xdata
        print event.ydata

fig.canvas.mpl_connect('motion_notify_event', motion_capture)

plt.show() 
```

# javascript - MVC3 客户端验证意外触发（未应用验证属性）

> ID：15298445
> 
> 赞同：0
> 
> 时间：2013-03-08T16:16:28.010
> 
> 标签：javascript, asp.net-mvc-3, validation

我刚刚遇到了一种情况，让我把头发拉了好一阵子，我不知道为什么要解释。最后，我唯一能做的就是关闭客户端验证。

我们在生产环境中使用 MVC3 代码已经有一年多了，它使用了客户端和服务器端验证的组合。大部分验证是在服务器端完成的，但是我们已经为 [Required] 字段打开了客户端验证，因此如果缺少其中一个字段，则不必访问服务器，因为客户端-side 的东西首先被检查。

**今天早上，突然之间，对于没有**[Required] 属性的字段，我们收到客户端验证错误！为什么会这样？

引发客户端错误的字段仅具有服务器端验证，因为它是必须一起检查的一组复杂属性的一部分。我在代码中的验证行上放置了一个断点，但它从未到达它，因为它在客户端被验证为必填字段，尽管根本没有该属性（该属性根本没有验证属性）。

我不明白这一点。我查看了客户端上网页的源代码，它是：用于客户端验证的 javascript。但是在模型的代码中，我们没有指定该属性应该是必需的或任何其他验证属性。

是什么赋予了？我认为客户端验证代码只为具有指定属性的属性生成？

# jquery - 使用 Jquery 更改按钮单击时的显示属性

> ID：15298446
> 
> 赞同：3
> 
> 时间：2013-03-08T16:16:28.983
> 
> 标签：jquery, html, button, click

我正在尝试加载一个隐藏了一些 div 的页面，看起来像这样：

```
<input type="button" id="btnStats" values="Stats"/>
<div id="dvStats" style="display:none">Stats</div>
<div id="dvAlbums" style="display:none">Albums</div> 
```

现在 div 只有文本，因为我无法让它们工作。我有一个将 dvStats 显示分配给 btnStats 上的单击事件的 JS。

```
$("#btnStats").click($("#dvStats").style.display="block"); 
```

还尝试了一些我在搜索有关此问题的旧问题时看到的方法。

```
$("#btnStats").click($("#dvStats").css(":display","block")); 
```

我无法完成这项工作。也许我错过了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-15T09:08:34.777

使用 Jquery，您可以轻松完成上述任务。包括 Jquery 库，并使用以下代码：

```
$("#btnStats").on("click",function(){

    $("#dvStats").css("display","block")
    $("#dvAlbums").css("display","block")

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:18:26.083

尝试：

```
$("#btnStats").click(function() {
    $("#dvStats").css("display","block");
        /* OR  */
    $("#dvStats").show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:18:53.723

试试这个，而不是使用该`.css()`方法，而是使用该`.show()`方法，因为它做同样的事情：

```
$("#btnStats").click(function () {
    $("#dvStats").show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T16:18:59.190

[jQuery.click](http://api.jquery.com/click/)将回调函数作为参数，因此需要将函数作为参数传递给 click 函数调用。

```
$("#btnStats").click(function(){
    $("#dvStats").show()
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/P92YK/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T16:19:07.377

将您的按钮处理程序更改为此，例如：

```
$("#btnStats").click(function() {
          $("#dvStats").show();
     }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T16:19:27.943

我看不出为什么：

```
$("#btnStats").click($("#dvStats").css("display","block")); 
```

不起作用（注意在“显示”一词之前删除了冒号）。

PS 你的文件中有 jQuery 库，不是吗？

否则，您需要设置一个 onclick 事件，该事件调用一个函数来执行以下操作：

```
document.getElementById('dvStats').style.display = 'block'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-27T10:20:51.113

```
$("#btnStats").click(function () {
$("#cont div").toggleClass('hidden').removeClass('visible').siblings().toggleClass('visible').addClass('hidden'); // change class to Hidden if Visible
});
<div id="cont">   
<div id="dvStats" class="visible">Stats</div>
<div id="dvAlbums" class="hidden">Albums</div>
</div> 
```

# javascript - 在模板上渲染主干集合时无法获取模型的 cid

> ID：15298449
> 
> 赞同：11
> 
> 时间：2013-03-08T16:16:42.460
> 
> 标签：javascript, templates, backbone.js, mustache

我正在尝试在使用 mustache.js 构建的模板上呈现主干集合。问题是我无法在模板中获取模型的 cid。我的代码是

```
 <div class="phone span4">
            <h5> Phone Appointments</h5>
            {{ _.each(slots, function(slot) { }}
                {{ if(slot.aptType == "P"){ }}
                    <h6 cid="{{=slot.cid}}"  aptId="{{=slot.aptId}}"> {{=slot.beginTime}}  - {{=slot.endTime}} </h6>
                {{  }   }}
            {{  }); }}
        </div> 
```

从上面的代码中，我可以得到 aptId、beginTime 和 end Time，但不能得到 Cid。如何在模板上渲染时从集合中获取模型的 Cid？

我从视图中的渲染方法看起来像这样

```
 render:function(){
    var template = _.template($("#slot-display-template").html());
    compiledTmp = template({slots: this.collection.toJSON()})
    this.$el.append(compiledTmp);
    } 
```

使用 cid 作为模型的唯一标识符还有什么缺点吗？

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-08T16:36:42.840

默认情况下`cid`不包含在`toJSON`输出中。您将需要`toJSON`在模型定义中覆盖并包含`cid`.

```
toJSON: function() {
  var json = Backbone.Model.prototype.toJSON.apply(this, arguments);
  json.cid = this.cid;
  return json;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T22:04:10.300

如果您需要临时解决方案，这也可以：

```
var params = _.extend({}, this.model.toJSON(), {cid: this.model.cid}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-17T08:38:55.187

顺便说一句，如果您不需要扩展所有模型的行为，您可以`cid`使用方法添加到您的模型中`parse`。例如，您有收藏“收藏”。您可以为此集合指定模型并覆盖`parse`方法以将模型附加`cid`到响应。

```
var Collection = Backbone.Collection.extend({
    model: Model
});

var Model = Backbone.Model.extend({
    parse: function(response) {
        response.cid = this.cid;
        return response;
    }
}); 
```

因此，您将能够`cid`从模型的属性中获取。

# c++ - 我应该以及如何在 C++ 中的计算要求高的算法中创建进度报告

> ID：15298458
> 
> 赞同：2
> 
> 时间：2013-03-08T16:16:59.963
> 
> 标签：c++

我正在实现一些深度学习神经网络，Matlab 中的现有代码通常只是打印到控制台，这样用户就有了进展的想法。

当我为 C++ 进行设计并将算法的核心部分放入我不想将内容打印到控制台的单独函数中时，是否有方法或设计原则可以让使用该算法的用户选择获得某种进度指示？

是否可以让可选参数成为人们可以挂钩的函数指针，或者我将如何做到这一点？

```
void my_heavy_algorithm(int * data, int n,...); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:23:23.240

如果您将算法公开为函数的集合，那么要采用的方法是让其中一个参数成为具有如下签名的函数指针：

```
void (*reportProgress)(void*, int) 
```

但是，如果您使用 C++ 设计算法，您可能应该利用封装并为您的算法创建一个类（或一组类）。在这种情况下，您不希望将函数指针作为参数添加到各个函数。

相反，您可以使函数指针成为您的类的成员。并具有获取/设置它的访问器方法。或者更好的是，提供一个抽象类来报告进度。

```
class ProgressReporter
{
    public:
    virtual ~ProgressReporter() = 0;
    virtual void notifyProgressChanged(void* source, int progressValue) = 0;
}

class Algo
{
    private:
    ProgressReporter* _userProvidedReporter = NULL;

    public:
    void set_ProgressReporter(ProgressReporter*);   // set accessor
    ProgressReporter* get_ProgressReporter();       // get accessor
    void my_heavy_algorithm(int*, int, ...);        // your algo. implementation fn.
}

void Algo::set_ProgressReporter(ProgressReporter* reporter){
    _userProvidedReporter = reporter;
}

ProgressReporter* Algo::get_ProgressReporter(){
    return _userProvidedReporter;
}

void Algo::my_heavy_algorithm(int * data, int n,...){

    // do stuff

    if(_userProvidedReporter != NULL)
        _userProvidedReporter->notifyProgressChanged((void*)this, currentProgress);

    // do more stuff

    if(_userProvidedReporter != NULL)
       _userProvidedReporter->notifyProgressChanged((void*)this, currentProgress);

    // so on and so forth..
} 
```

当然，上面是一个非常简单的例子。如果您希望您的算法支持并发，您应该同步对内部用户报告器的访问，并且您可以考虑为您的算法创建一个基类并提供具体的派生实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:38:40.093

STL 风格的函子可以帮助你。这也将允许在没有任何进度指示器的情况下使用您的算法。

例如，假设您想提供一个百分比进度指示器。

```
// disclaimer - I didn't compile this code
class NoProgressFeedback; // see below
void my_heavy_algorithm(int * data, int n, ProgressFeedback giveFeedback = NoProgressFeedback() {
    int percentProgress = 0;
    giveFeedback(percentProgress);
    /* start calculations, do stuff */
    percentProgress++;
    giveFeedback(percentProgress);
    /* continue over and repeat percentProgress updates and giveFeedback calls */
}

/* NoProgressFeedback will do no progress feedback */
class NoProgressFeedback {
public:
    operator()(int percent) {}
} 
```

如果用户代码需要反馈，那么它应该通过你的 my_heavy_algorithm 函数一个不同的进度指示器，看起来像这样：

```
class GetProgressFeedback {
public:
    void operator()(int percent) { std::cout << "percent advance: " << percent; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:23:14.533

看看依赖注入。

您可以传递一个实现 IProgress 接口的对象。NullProgress 对象可能只有存根，但对于您对监视不感兴趣的对象没有实际作用。

通常的方法是在单独的线程中运行计算繁重的工作，并使用它通过锁来更新一段内存。UI 线程然后定期从这个内存位置读取并相应地更新屏幕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T16:30:57.807

要报告正确的进度，您需要三件事：

1.  对要完成的总工作的估计。
2.  估计到目前为止已经完成了多少工作。
3.  时间的来源。

你还需要一些方法让你的“重数学”函数“报告”。一种方法是在“函数开始”、“到目前为止的进度”和“函数结束”中调用某种函数。函数的开始也设置了“要做的工作总量”。迄今为止的进展报告“现在完成了多少”，“功能结束”表示“我完成了”。

在 C++ 类环境中，可以这样做：

```
class Progress
{
    Progress() { };
    virtual void Start(int todo) = 0;
    virtual void Done(int doneSoFar) = 0;
    virtual void Finish();
}; 
```

这提供了一个接口，其他类可以从中派生。

当然，你仍然需要找到一个有用的速度来放置你的“Done()”——如果你把它放在某个紧密的循环中太深，它会影响性能，但你需要经常这样做，以显示一些有用的进步也。

# java - JPA 与 JavaBeans 验证 (JSR 303) 与您的解决方案：在持久化之前自动截断字段

> ID：15298460
> 
> 赞同：0
> 
> 时间：2013-03-08T16:17:12.607
> 
> 标签：java, database, jpa, bean-validation

我在数据库中有一些具有固定长度的字段。我对`JPA`和相当陌生`JSR 303`。

JPA 不会让我保留一个具有比数据库中允许的大小更大的字段的实体（这是我想要的）；`@Column`并且用参数描述s`length`仅对 ddl 生成有用。

此外，AFAIK，使用 JSR 303 描述参数`@Size`只会在我希望修改字段时触发答案。

我想知道使用 JSR 303、JPA 或其他东西处理截断的标准方法是什么。

编辑：是否可以在 JPA 中启用一些自动截断？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:31:55.107

就像 JB Nizet 建议的那样，它可以用 setter 来完成。但这不会使它成为一个严格的 Java Bean。

您也可以在数据库中实现它，但这会降低您的实现的可移植性。

最好的方法是将这个逻辑保留在 bean 或 DB 之外。即在您的应用程序逻辑中。

**更新：**

如果您需要在 JPA 中进行截断，请查看 @EntityListeners 和回调。 [http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html)

# java - 在 Java 中生成非静态类的实例

> ID：15298474
> 
> 赞同：0
> 
> 时间：2013-03-08T16:17:44.790
> 
> 标签：java

我有以下课程：

```
public class MyClass {

   public static void callFromThirdPartyApp(String allInput){
      HideInput hi = new HideInput();
      hi.workWithInput(allInput);
   }
}

public class HideInput {
   public void workWithInput{String allInp)

   work with allInp...
} 
```

我想要实现的是，每当`callFromThirdPartyApp`调用该方法时，它都会接受输入，启动一个非静态类，将所有输入传递给该类并让它使用它。

挑战在于`callFromThirdPartyApp`可以同时调用。此代码是否会启动该类的不同实例，`HideInput`以确保该类`allInp`的其他实例无法触及？

EDIT1：缩进 EDIT2：对不起，我的意思是非静态的，而不是私有 EDIT3：将标题修改为非静态（来自私有）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:25:51.647

是的，由于以下原因，对 allInp 的访问将不会受到不必要的访问。

1.  每次调用 callFromThirdPartyApp() 时都会创建 HideInput 的新实例。
2.  allInp 作为参数传递给 workWithInput()。
3.  allInp 是一个字符串，它是一个不可变的类。

allInp 不仅对 HideInput 的无意共享是安全的，而且由于#2 和#3 也是线程安全的。

# php - PHP 输出查询

> ID：15298475
> 
> 赞同：0
> 
> 时间：2013-03-08T16:17:51.723
> 
> 标签：php

我是论坛的新手，但希望有人可以帮我解决困难..

我的代码在下面，我正在从 zen cart 数据库导出到 csv 文件

```
$products_cost =
    "select p.products_id, pd.products_name, p.products_quantity, ".
      "p.products_cost, (p.products_quantity*p.products_cost) AS products_total_cost, ".
      "p.products_type ".
    "from " . TABLE_PRODUCTS . " p, " . TABLE_PRODUCTS_DESCRIPTION . " pd ".
    "where p.products_id = pd.products_id and pd.language_id='" . $_SESSION['languages_id'] . "' ".
    "order by (p.products_cost) DESC, p.products_cost desc, pd.products_name";

  $products_stock = $db->Execute($products_cost);

//Start Of Output for Stock File

$output = array();      
$output["tx_type"]='ST';        
$output["Stock_Code"]= $products_stock->fields['products_id'];
$output["Qty"]= $products_stock->fields['products_quantity'];
$output["Description"]= $products_stock->fields['products_name'];
$output["CostPriceEx"]= $products_stock->fields['products_cost'];
$output["TotalCostEx"]= $products_stock->fields['products_cost'] * $products_stock->fields['products_quantity']; 

zen_sages_fwrite($output);

$stimer = microtime_float(); 
```

运行代码时，我得到如下输出，但不是显示数据库中的每个产品，而是显示相同的产品？？

```
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900
ST,1149,10,350gsm A6 Glossy Postcards,290.0000,2900 
```

我试过添加`$products_stock->MoveNext();`

但是打缝有什么影响，

提前谢谢大家

罗素

我的代码现在看起来像

//股票文件的输出开始

```
$output = array();  while (!$products_stock->EOF) {

$output["tx_type"]='ST';

$output["Stock_Code"]= $products_stock->fields['products_id'];

$output["Qty"]= $products_stock->fields['products_quantity'];

$output["Description"]= $products_stock->fields['products_name'];

$output["CostPriceEx"]= $products_stock->fields['products_cost'];

$output["TotalCostEx"]= $products_stock->fields['products_cost'] * $products_stock->fields['products_quantity']; 
```

$products_stock->MoveNext;

```
} 
```

zen_sages_fwrite($output);

$stimer = microtime_float();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:54:49.640

输入答案表格，以便您可以更快地工作^^您想要类似的东西：

```
while(!$products_sock->EOF) {
    $output = array();      
    $output["tx_type"]='ST';        
    $output["Stock_Code"]= $products_stock->fields['products_id'];
    $output["Qty"]= $products_stock->fields['products_quantity'];
    $output["Description"]= $products_stock->fields['products_name'];
    $output["CostPriceEx"]= $products_stock->fields['products_cost'];
    $output["TotalCostEx"]= $products_stock->fields['products_cost'] * $products_stock->fields['products_quantity']; 

    zen_sages_fwrite($output);
    $products_stock->MoveNext();
} 
```

使用上面添加的代码，您将覆盖`$output`每个循环，这将在覆盖之前在每个循环中写入它。

或尝试：

```
for($i=0;$i<$products_stock->rowCount();$i++) {
    $output = array();      
    $output["tx_type"]='ST';        
    $output["Stock_Code"]= $products_stock->fields['products_id'];
    $output["Qty"]= $products_stock->fields['products_quantity'];
    $output["Description"]= $products_stock->fields['products_name'];
    $output["CostPriceEx"]= $products_stock->fields['products_cost'];
    $output["TotalCostEx"]= $products_stock->fields['products_cost'] * $products_stock->fields['products_quantity']; 

    zen_sages_fwrite($output);
    $products_stock->MoveNext();
} 
```

# php - JQuery 三键单击事件一键执行

> ID：15298476
> 
> 赞同：0
> 
> 时间：2013-03-08T16:17:55.093
> 
> 标签：php, javascript, onclick, jquery

代码为每个选项卡生成 HTML + JS。现在在每个选项卡上，我有 2 个使用 PHP 在 HTML 中生成的按钮。它还使用 JQuery 为每个按钮生成 Javascript onclick 事件。

这是生成的每个按钮的 jquery click 事件：

```
 <script type="text/javascript">
    $(function() {
        $(document).on("click", ".mybutton", function(e) {
            e.preventDefault();
            alert($(this).attr('whoami'));
            return false;
        });
    });
    </script>' 
```

现在由 html 生成的两个按钮具有以下结构：

```
<button type="button" class="mybutton" whoami="button_1">First Button</button>
<button type="button" class="mybutton" whoami="button_2">Second Button</button> 
```

现在 html 和 JS 都生成正常我看到两个按钮都很好，没有 JS 错误什么都没有。我可以单击这两个按钮，但会发生以下情况：

当我单击第一个按钮时，它会发出以下警报：

```
 button_1
 button_2 
```

两个按钮单击都会执行，因为它们具有相同的类名。如何防止两个按钮都被执行？我只需要执行单击的按钮，而不是全部。

我尝试添加**e.stopImmediatePropagation()**这就是发生的事情：

当我点击第一个按钮时，我得到了正确的警报，它只执行 button_1 点击，但是当我点击第二个按钮时，它只执行 button_1 点击事件而不是 button_2。

请帮忙。

**注意：** 我认为它同时执行的原因是因为有 2 个 javascript 部分附加到 html 并且两个脚本都有**.button**上的单击事件，但我无法更改此代码，我需要以某种方式确保只有单击的按钮被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:11:38.957

解决方案如下：

```
$(".mybutton:not(.bound)").addClass("bound").on("click", function(e) {
   e.preventDefault();
   alert("hello");
   return false;
}); 
```

只提醒你好 1 次而不是 2 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:11:17.697

您可以使用 id 而不是使用 whoami 作为属性，这将是一个更好的主意。对于按钮的单击事件，您只需使用它们都具有的共享 className 选择按钮集合，然后将 clickhandler 应用于该按钮，然后 $(this) 将成为被单击的特定按钮。由于您已经在执行 e.preventDefault()，因此也无需返回 false。

```
$(function(){
  $('.mybutton').on('click', function(e){
     e.preventDefault();
     alert($(this).attr('id'));
  });
});

<button type="button" class="mybutton" id="button_1">First Button</button>
<button type="button" class="mybutton" id="button_2">Second Button</button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:21:50.610

不确定以文档点击为目标是您想要在此处执行的操作。不使用的原因是什么：

```
$('.mybutton').on('click', function() {
  /* YOUR CODE HERE */
}); 
```

这将完成您正在寻找的内容，而无需将文档的更大上下文强制到事件侦听器中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T16:22:15.390

为特定按钮编写`click`事件而不是`$(document)`单击。

```
 <button type="button" class="mybutton" id="button_1">First Button</button>
 <button type="button" class="mybutton" id="button_2">Second Button</button> 
```

JavaScript 代码应该是：-

```
 $('#button_1').click(function(){
    //write your code here     

  }) 

  $('#button_2').click(function(){
    //write your code here     

  }) 
```

或者你也可以按类名

```
 $('.mybutton').click(function(){
     var idval = $(this).attr('id');
     alert(idval);

    //on the basis of particular id you can perform desired operation here

  }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T16:40:55.777

如果按钮是动态生成的，实际上您可能需要使用您当前使用的事件委托模式：

```
$(document).on("click", ".mybutton", function(e) {...}) 
```

有关“直接和委托事件”下的更多信息：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

您确定没有其他未包含的代码正在运行吗？您的代码看起来很好，就像这里的小提琴一样：http: [//jsfiddle.net/8e3Gp/](http://jsfiddle.net/8e3Gp/)

# jenkins - 詹金斯和 SCP

> ID：15298477
> 
> 赞同：4
> 
> 时间：2013-03-08T16:17:57.443
> 
> 标签：jenkins, scp

我已经建立了一个 jenkins 版本，除了最后一步之外，一切都运行良好。

整个构建创建一个名为：`build`

此目录包含一个`web-inf`和其中的所有文件我想通过 SCP 发布到不同的位置，这样文件夹的所有内容都`build/web-inf`将成为目标文件夹的内容。

jenkins scp 插件的设置是（这是构建后的步骤）：

```
source: build/web-inf/**
destination: public_html/ 
```

这导致：

```
public_html/build/web-inf/... 
```

但应该是：

```
public_html/... 
```

（`keep hierarchy`方框打勾）

我怎样才能做到这一点？

**编辑**

我可以在没有任何额外脚本的情况下解决问题。解决方案非常简单，以至于我的问题被证明是愚蠢的。

我所做的只是告诉 ant 将所有 web 文件复制到，而`./public_html`不是`./build/web-inf/`让 jenkins scp完全按照预期复制所有文件。`public_html``public_html`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:09:40.303

如果您的目标只是构建期间生成的 SCP 文件，并且插件似乎无法正常工作（我在您的配置中看不到任何错误），您可以使用“执行 shell”构建步骤并键入 scp 命令类似的东西（首先在你的作业的构建目录中尝试它以获得正确的语法）：

```
scp -r build/web-inf/* user@host:/destination-directory 
```

# html - HTML 上传到网站的某个目录

> ID：15298479
> 
> 赞同：0
> 
> 时间：2013-03-08T16:18:11.343
> 
> 标签：html, file-upload, upload

我有一些 HTML 上传表单的代码：

```
<form name="Upload FILE" action="mailto:emailaddresshere" method="post">
    <input type="file" name="uploadField" />
</form> 
```

上面的表单上传一个文件并将其发送到一个设置的电子邮件地址。是否可以让它上传文件，并将其放置在某个目录的 Web 服务器上？最好是纯 HTML，*如果可能的话不要 PHP！*

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:19:56.787

如果没有服务器端语言，您将无法做到这一点。HTML 是客户端的，与服务器无关。

当向服务器发出请求时，需要有一些东西来确定要做什么。这就是 PHP 出现的地方（或任何其他服务器端语言）。

# c# - 当前上下文中不存在名称“TextBox1”

> ID：15298484
> 
> 赞同：0
> 
> 时间：2013-03-08T16:18:25.823
> 
> 标签：c#, asp.net

我收到此错误：`the name 'textbox1' does not exist in the current context`

我的代码：

```
namespace WebApplication19
{
    public partial class Default:System.Web.UI.Page

    {
        protected void TextBox1_TextChanged(object sender, EventArgs e)
        {
            if (TextBox1.Text == "msc")
            {
                RadioButton2.Visible = false;
                DropDownList2.Visible = false;
            }
            else
            {
                RadioButton1.Visible = false;
                DropDownList1.Visible = false;
            }               
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:52:24.907

除了@Michael 和@DGibbs 给出的建议之外，我还建议您仔细检查所有文件（ASPX、ASPX.cs 和 ASPX.Designer.cs）中的类名，以确保它们匹配，如以及命名空间声明。

此外，除非这只是一个快速而肮脏的概念证明，否则您应该给您的命名空间一个更具描述性的名称。“WebApplication19”以外的东西。

最后，很明显错误消息明确指出：`the name 'textbox1' does not exist in the current context`而不是**TextBox1**。在您的代码中搜索小写**textbox1**并将其重命名为匹配正确的大写名称，这样您的代码就可以编译了。

示例标记：

```
<asp:TextBox ID="TextBox1" runat="server" ontextchanged="TextBox1_TextChanged"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:20:23.833

添加`runat="server"`到标记`TextBox1`并确保它也有`ID="TextBox1`。

# r - R中“分位数”函数的行为

> ID：15298490
> 
> 赞同：4
> 
> 时间：2013-03-08T16:18:39.127
> 
> 标签：r, quantile

在解决问题时，我发现了一些有趣的事情。我不知道到底发生了什么，但发生了一些我没想到会发生的事情。我可能犯了一个错误，但让我从一个例子开始：

```
x <- rnorm( 100 )
y <- x[ x > quantile( x, 0.1 ) ]
z <- x[ x > quantile( x, c( 0.1, 0.2 ) ) ]
a <- x[ x > quantile( x, c( 0.1, 0.2, 0.3 ) ) ] 
```

我们得到三个不同的结果，但是如何解释这些结果。这些是使用的限制吗？

更新：我想我问错了问题。我们如何解释以下内容：

```
> x <- rnorm( 100 )
> length( x[ x > quantile( x, 0.1 ) ] )
[1] 90
> length( x[ x > quantile( x, 0.2 ) ] )
[1] 80
> length( x[ x > quantile( x, c( 0.1, 0.2 ) ) ] )
[1] 85 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T16:23:53.840

您对`>`R 的回收行为感到困惑。当`quantile`返回超过 1 个值（如在最后两个示例中）时，它会将这些向量回收为`x`与通过 进行向量化比较的长度相同的长度`>`。

因此，在最后两个示例中，它`quantile`一遍又一遍地重复 2 或 3 个值，直到结果向量的长度与 相同，`x`并且它们将它们逐元素地与 进行比较`>`。

**编辑**

也许我的解释不够清楚。在编辑的最后一行，`x > quantile( x, c( 0.1, 0.2 ) )`R 将 的第一个元素`x`与 0.1 分位数进行比较，将 的第二个元素`x`与 0.2 分位数进行比较，将 的第三个元素`x`与 0.1 分位数进行比较，将 的第 4 个元素`x`与 0.2 分位数进行比较，依此类推. 知道了？:)

# php - cakephp hasmany 有条件

> ID：15298492
> 
> 赞同：0
> 
> 时间：2013-03-08T16:18:43.820
> 
> 标签：php, cakephp-2.0

当我对其设置条件时，我无法从第三个表中获取记录。我收到错误缺失列 MonthlyReturns 缺失。但是如果我去掉 MonthlyReturns 条件，我会得到所有 3 个关联的表。

这些表是公司、员工和月度回报

我在 MonthlyReturnsController.php 中的查找代码：

```
$conditions = array("Employee.active" => true, "Employee.start" => $start, "NOT" => array("MonthlyReturn.month" => $date));
$empl = $this->MonthlyReturn->Employee->find('all', array('conditions' => $conditions)); 
```

员工模型：

```
/**
* belongsTo associations
*
* @var array
*/
public $belongsTo = array(
    'Company' => array(
        'className' => 'Company',
        'foreignKey' => 'company_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
);

/**
* hasMany associations
*
* @var array
*/
public $hasMany = array(
    'MonthlyReturn' => array(
        'className' => 'MonthlyReturn',
        'foreignKey' => 'employee_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    )
); 
```

更新：

我试图做一个左连接。现在我取回了所有记录，并且没有显示该日期在 MonthlyReturns 中没有记录的员工。

我得到的sql是

```
[query] => SELECT `Employee`.`id`, `Employee`.`company_id`,`Employee`.`p45_issued`, `Company`.`id`, `Company`.`member_number`
FROM `employees` AS `Employee` 
left JOIN `monthly_returns` AS `MonthlyReturn` ON (`MonthlyReturn`.`employee_id` = `Employee`.`id`) 
LEFT JOIN `companies` AS `Company` ON (`Employee`.`company_id` = `Company`.`id`) 
WHERE NOT (`MonthlyReturn`.`month` = '2013-03-01')

$options['joins'] = array(
    array('table' => 'monthly_returns',
        'alias' => 'MonthlyReturn',
        'type' => 'left',
        'conditions' => array(
            'MonthlyReturn.employee_id = Employee.id'
        )
    ),
);

$options['conditions'] = array("Employee.p45_issued" => false, "NOT" => array("MonthlyReturn.month" => $last_month));

$empl = $this->MonthlyReturn->Employee->find('all', $options); 
```

更新 2

我已经设法通过直接使用 sql 来获取我想要的记录。我不喜欢这样做，所以如果有人知道正确的 cakephp 方式？

```
 $emps_overdue = $this->Employee->query("SELECT employees.*, companies.`name`, companies.`id`

    FROM employees INNER JOIN companies ON employees.company_id = companies.id

    LEFT JOIN monthly_returns ON monthly_returns.employee_id = employees.id

    AND monthly_returns.month = '$last_month'

    WHERE monthly_returns.id IS NULL AND employees.p45_issued = false"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:33:26.627

尝试研究可包含的行为，这将使您的任务更容易。

# php - 读取和写入文件时如何处理服务器中的多个客户端

> ID：15298499
> 
> 赞同：0
> 
> 时间：2013-03-08T16:19:11.780
> 
> 标签：php

我有一个 php 页面，当访问它时，它将打开一个 txt 文件，从中读取，然后写入它。但是如果多个人同时访问 php 页面会发生什么？有没有办法等到文件没有被使用，然后php代码读/写它？向它添加同步。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:24:43.737

您可以为每个用户创建临时文件。一旦用户完成他的操作并注销。您可以创建一个函数来读取临时文件的内容并将其放入原始文件，然后删除临时文件。

# jquery - jQuery隐藏和显示多个元素

> ID：15298509
> 
> 赞同：1
> 
> 时间：2013-03-08T16:19:50.930
> 
> 标签：jquery, html, css

我有多个包含照片和文字的 div。当用户点击“bio”按钮时，传记文本就会出现。

如果单击图像，我该怎么做才能显示生物文本？

如果显示传记文本并且用户单击不同的图像，我怎样才能使以前的传记文本消失？我不希望它滑入和滑出，而只是淡入和淡出。

这是我的jQuery：

```
$('.bio-button').click(function () {
   $(this).siblings('.team-text').toggle();
});

$('.team-text .close').click(function () {
   $(this).parent('.team-text').hide();
});

$('.team-member img, .team-member-minor img').click(function() {
if ( !$(this).next('div').is(':visible') ) {
    $(".team-text").slideUp();
    $(this).next('div').slideToggle();
}
});

$('.close').click(function() {
    $(this).parent().slideUp();
}); 
```

这是我的html

```
 <div id="" class="team-member">
    <div class="team-text">
        <p>hello this is Billy's text</p>
        <div class="close"></div>
    </div><!-- .team-text -->
    <div class="team-photo">
        <img width="437" height="293" src="http://www.mgrear.com/clients/gls/wp-content/uploads/2013/02/billy.jpg" class="" alt="billy" />                          
        <h2>Billy Senecal</h2>
        <p>Producer / Director</p>
    </div><!-- .team-photo -->
    <div class="bio-button">BIO</div>   
    <div class="clear"></div>
</div><!-- #team-member -->
<div id="" class="team-member">
    <div class="team-text">
        <p>THis is Mark's text</p>
        <div class="close"></div>
    </div><!-- .team-text -->
    <div class="team-photo">
        <img width="439" height="293" src="http://www.mgrear.com/clients/gls/wp-content/uploads/2013/02/mark.jpg" class="" alt="mark" />                            
        <h2>Mark Montalto</h2>
        <p>Editor / Producer</p>
    </div><!-- .team-photo -->
    <div class="bio-button">BIO</div>   
    <div class="clear"></div>
</div><!-- #team-member --> 
```

这是一个[DEMO](http://jsfiddle.net/MGDTech/GT36x/18/)的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:59:27.230

我不完全确定您要通过布局完成什么，但我认为这可能是您在 jQuery 方面正在寻找的。

```
$('.team-photo, .bio-button').on('click', function(){
    $('.team-text').fadeOut();
    $(this).prevAll('.team-text:hidden').fadeIn();
}); 
```

[http://jsfiddle.net/kYJBM/](http://jsfiddle.net/kYJBM/)

因为 '.team-text' 元素的默认状态是隐藏的，我们只需在每次点击时隐藏它们，然后使用 fadeIn() 上的 ':hidden' 过滤器来防止它在已经可见的元素中消失（这是这样的如果用户单击它两次，我们可以隐藏一个磁贴）。我认为令人困惑的是有两个函数，而第二个函数是有条件的。这是一种更简短的表达方式：

```
if ($(this).prevAll('.team-text').css('display') === 'none') {
    $(this).prevAll('.team-text').fadeIn();
} 
```

（为便于阅读而编辑）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:28:30.037

如果您想在瓷砖上的任何地方工作：

```
$('div.team-photo').click(function(){
  $(this).parent().find('.team-text').is(':visible').hide();
  $(this).siblings('.team-text').toggle();
}); 
```

如果您只想添加图片：

```
$('div.team-photo > img').click(function(){
  $(this).parent().parent().find('.team-text').is(':visible').hide();
  $(this).parent().siblings('.team-text').toggle();
}); 
```

这两者都会`.team-text`在显示自己的元素之前隐藏所有其他可见元素，并且`.team-text`在用户再次单击事件时隐藏关联元素。

# java - 我不断收到此错误帮助..令牌“;”上的语法错误，预期

> ID：15298515
> 
> 赞同：-4
> 
> 时间：2013-03-08T16:20:03.960
> 
> 标签：java

我收到一个错误，说令牌“;”上的语法错误，这是预期的。我在做什么错或我错过了什么，错误来自字符串输入字符串。我试图创建我可以输入学生成绩的地方，然后将成绩平均在一起，所以我不确定我是否做得对。请帮忙！！！关于如何做到这一点的任何想法？帮助将不胜感激。

```
import java.util.Scanner;         //To hold the users score

import javax.swing.JOptionPane;  //For better style

 import java.text.DecimalFormat; //needed to format the Output

public class TestScore
{//begin class

    public static void main(String[] args)

    {//Begin main method

        //create the variables

     String inputString ;       // For reader's input

               DoubleScore1,      //Define DoubleScore 1

                DoubleScore2,     //Define DoubleScore 2

                DoubleScore3,    //Define DoubleScore 3

                AverageScore; //Define AverageScore

Scanner keyboard = new Scanner(System.in); //To hold the users grade

DecimalFormat formatter = new DecimalFormat("#,##0.00"); //format the scores

        //create keyboard for input

        Scanner Keyboard = new Scanner(System.in);

        //Ask the user to input DoubleScore1

        inputString=

          JOptionPane.showInputDialog("Please enter test score 1");

            // Convert the input to a double.

             DoubleScore1 = Double.parseDouble(inputString);

        //Ask the user to input DoubleScore

        inputString=

          JOptionPane.showInputDialog("Please enter test score 2");

            // Convert the input to a double

        DoubleScore2 = Double.parseDouble(inputString);

        //Ask the user to input DoubleScore

        inputString=

          JOptionPane.showInputDialog("Please enter test score 3");

            // Convert the input to a double

            DoubleScore3 = Double.parseDouble(inputString);

        //Calculate the average score for the tests

        AverageScore = ((DoubleScore1 + DoubleScore2 + DoubleScore3)/3);

        //Display Average test Score

        JOptionPane.showMessageDialog(null, "\t\nYour Double Score 1  is : "     +formatter.format(DoubleScore1)

                                      + "\t\nYour Double Score 2  is : " +formatter.format(DoubleScore2)

                                      + "\t\nYour Double Score 3  is : " +formatter.format(DoubleScore3)

                                      + "\t\nYour Average Score is: " +     formatter.format(AverageScore));

            //End the program.

          System.exit(0);

    }//End main method

}//end class`enter code here` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:21:27.737

这个

```
String inputString ;       // For reader's input

               DoubleScore1,      //Define DoubleScore 1

                DoubleScore2,     //Define DoubleScore 2

                DoubleScore3,    //Define DoubleScore 3

                AverageScore; //Define AverageScore 
```

应该

```
String inputString ,       // For reader's input

               DoubleScore1,      //Define DoubleScore 1

                DoubleScore2,     //Define DoubleScore 2

                DoubleScore3,    //Define DoubleScore 3

                AverageScore; //Define AverageScore 
```

`;`将结束该行，因此下一行必须再次声明该字段，或者使用`,`说它也是相同的类型。

```
 String inputString;       // For reader's input

               Double DoubleScore1,      //Define DoubleScore 1

                      DoubleScore2,     //Define DoubleScore 2

                     DoubleScore3,    //Define DoubleScore 3

                   AverageScore; //Define AverageScore 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:21:52.553

您需要声明变量 DoubleScore 的类型：

```
double DoubleScore1; 
```

# oracle - 如何恢复Oracle表中的数据？

> ID：15298516
> 
> 赞同：3
> 
> 时间：2013-03-08T16:20:08.140
> 
> 标签：oracle, oracle10g, flashback

我在工作中犯了一个可怕的错误，我在没有“where”子句的 oracle 表上执行了更新的查询，并且该表上的所有内容都发生了变化，我想知道是否有任何方法可以恢复表上的数据。我知道我可以使用闪回，但还有其他方法吗？如果您知道如何在 oracle 中制作闪回表，请告诉我。

我正在使用 Oracle 10g R2 10.2.0.1

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T16:37:19.947

首先，您是否提交了更改？如果没有，您可以简单地发出 a`rollback`来恢复您的更改。

假设您确实提交了更改，其他用户是否同时修改表？您是否需要保留其他人所做的更改并仅恢复您在事务中所做的更改？或者您可以将整个表恢复到进行更改之前的某个时间点吗？

如果可以将整个表恢复到某个时间点

```
FLASHBACK TABLE <<table name>>
  TO TIMESTAMP( systimestamp - interval '10' minute ) 
```

假设`UNDO`必要的操作仍然可用（因此您在犯错后只有有限的时间能够闪回该错误），会将表格返回到 10 分钟前的状态。为了发出 a `FLASHBACK TABLE`，您还必须确保

*   该表已启用行移动`ALTER TABLE <<table name>> ENABLE ROW MOVEMENT`
*   您必须具有`FLASHBACK`表特权或`FLASHBACK ANY TABLE`系统特权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T11:32:06.590

从 Oracle9i R2 开始，不需要特定权限

还原更新的列

```
update <table> t
    set (<column1>, <column2>, ...) 
    = (select <column1>, <column2>, ... 
        from <table> as of timestamp to_timestamp('2016-07-21 09:39:20', 'YYYY-MM-DD HH:MI:SS') h
        where t.<uk> = h.<uk>); 
```

还原已删除的行

```
insert into <table> 
    select * from <table> as of timestamp to_timestamp('2016-07-21 03:30:00', 'YYYY-MM-DD HH:MI:SS')
    where <uk> not in 
        (select t.<uk> from <table> t); 
```

不要被数据库时区误导并验证当前时间

```
select sysdate from dual; 
```

# swipe - Swipelistener 在菜单上不起作用

> ID：15298517
> 
> 赞同：0
> 
> 时间：2013-03-08T16:20:08.533
> 
> 标签：swipe, jqmobi

我正在使用[jqMobi](http://app-framework-software.intel.com/index.php)，（不是 jQuery Mobile ）。我正在尝试`swipelistener`在菜单上工作。基本上我只想用水平滑动动作“滑动”菜单打开或关闭。这是我的js：

```
$.ui.ready(function () {
    . . . . .
    $(window).swipeListener({
        vthreshold: 50,
        hthreshold: 70,
        callBack: function (dir) {                
            if (dir.right) {
                $.ui.toggleSideMenu(true);
            }
            if (dir.left) {
                $.ui.toggleSideMenu(false);
            }

        }
    });
 }); 
```

这很好用，除了我在这里的红色部分“滑动”-->

![在此处输入图像描述](../Images/f690541035e73f345e60e3a4d8992102.png)

如果我在其他任何地方刷卡，它工作正常。我也尝试过使用`document`选择器，但也没有用。我也尝试`swipelistener`在`#menu`and`#menu_scroller`中添加另一个。

这对我来说很难调试，因为我的设备是 IOS6 并且“调试控制台”已被删除，所以我不能只添加大量控制台日志记录。（我没有Mac，所以无法连接开发者菜单）

我的理论是，由于菜单项上有`ontouchstart`听众`ontouchend`，这会干扰我的`swipelistener`. 有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:33:59.110

swipeListener 已被弃用。相反，您可以绑定 jqUi [swipe,swipeLeft,swipeRight,swipeUp,swipeDown] 调度的事件。您为 ontouchstart/ontouchend 拥有的侦听器可能会阻止事件的传播（它们是自定义侦听器吗？）

```
$.ui.ready(function(){
    $(document).bind("swipeLeft",function(){
         $.ui.toggleSideMenu(false);
    });
    $(document).bind("swipeRight",function(){
         $.ui.toggleSideMenu(true);
    });
} 
```

# html - 下拉图像未在歌剧中显示

> ID：15298519
> 
> 赞同：0
> 
> 时间：2013-03-08T16:20:14.710
> 
> 标签：html, css

我的网页中有自定义下拉菜单。下拉菜单在 Chrome、Mozilla、IE9、Safari 4 大浏览器中完美显示。但是，Opera 中不显示下拉菜单的图像。我应该怎么做才能纠正它？这是我的html。

```
<div style="width:172px;">
   <div class="blue" style="float: left; width:100%;">
      <div class="lightblueHeading" style="text-align: left;">
         No. Of Guests
      </div>
      <div>
        <div class="styled-select">
           <select name="ctl00$cphMain$ddlNoOfGuest" id="cphMain_ddlNoOfGuest" style="width: 165px;">
            <option value="-1">No. of Guests</option>
            <option value="1">1</option>
            <option selected="selected" value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
          </select>
        </div>
      </div>
    </div>
    <span id="cphMain_cmpval_NoOfGuest" class="validation" style="float:left;display:none;">* - the field is required</span>
  </div> 
```

CSS

```
.blue {
border: 1px solid #74A4CA;
}

.lightblueHeading {
font-size: 12px;
background-color: #74A4CA;
color: white;
border: 1px solid #74A4CA;
padding-left: 4px;
}

.styled-select {
overflow: hidden;
background: url(../images/signup-dropdown_icon.png) no-repeat right;
background-color: white;
width: 100%;
background-position: 100%;
display: inline-block;
}

.styled-select select {
background: transparent;
width: 110% !important;
line-height: 1;
border: 0;
height: 34px;
-webkit-appearance: none;
-moz-appearance: none !important;
appearance: none;
font-size: 12px;
float: left;
} 
```

![这是有效的下拉菜单](../Images/8c9e01ce6beeeef228f2b966dc703bd2.png)

![此下拉菜单正在歌剧中显示](../Images/bf8235bf9d3da60b929d331feb20b27d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:36:09.377

Opera 不支持透明选择背景。尝试这个：

```
.styled-select select {
  background: rgba(0,0,0,0);
  background: transparent;
  .
  .
  . 
```

# servicestack - 如何从 ServiceStack 中永久删除不需要的 Nuget 依赖项？

> ID：15298520
> 
> 赞同：1
> 
> 时间：2013-03-08T16:20:17.583
> 
> 标签：servicestack

我刚刚安装了 ServiceStack Nuget 包，它坚持安装我不使用的数据库依赖项。我只对 REST 服务感兴趣。我发现有人遇到同样的问题，他声称典型的解决方法，如 -force uninstall 不适用。是否有其他可用的软件包或合适的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:33:25.147

您所指的数据库依赖项只是一个良性的 OrmLite dll。无论是否存在，它对运行时都没有影响。OrmLite 默认包含在内，因为 OrmLite AuthProvider 包含在 ServiceStack 中。

目前没有任何 NuGet 包不依赖于 OrmLite，但您可以简单地从`/packages`文件夹中手动挑选 dll 并复制它们并手动引用它们。

# cucumber - 失败后继续运行黄瓜步骤

> ID：15298521
> 
> 赞同：5
> 
> 时间：2013-03-08T16:20:19.293
> 
> 标签：cucumber, gherkin, cucumber-jvm, cucumber-junit

即使其中一个步骤失败，是否有任何方法可以继续执行 Cucumber Steps。在我当前的设置中，当一个步骤失败时，黄瓜会跳过剩余的步骤..我想知道是否有某种方法可以调整黄瓜跑步者的设置..

我可以注释掉失败的步骤，但是当你不知道哪个步骤会失败时它不实用......如果我可以继续剩下的步骤，我会一次知道完整的失败测试集......而不是循环往复...

环境：Cucumber JVM、R、Java、Ibatis、Spring Framework、Maven

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:27:43.820

在 step 失败后继续执行 step 不是一个好主意，因为 step 失败可能会给 World 带来不变的违反。更好的策略是增加场景的粒度。不要用多个“Then”语句编写单个场景，而是使用示例列表分别测试每个后置条件。有时，场景大纲和示例列表可以整合类似的故事。[https://docs.cucumber.io/gherkin/reference/#scenario-outline](https://docs.cucumber.io/gherkin/reference/#scenario-outline)

有一些关于添加功能以标记某些步骤以在失败后继续进行的讨论。[https://github.com/cucumber/cucumber/issues/79](https://github.com/cucumber/cucumber/issues/79)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:36:46.923

一种方法是捕获所有断言错误，并在最后一步决定是失败还是通过测试用例。在这种情况下，您可以对其进行定制，例如，在任何步骤检查是否有超过 n 个错误，如果是，则测试失败。

这是我所做的：

1.  为测试用例的 @Before 中的错误初始化 StringBuffer
2.  捕获断言错误并添加到 StringBuffer，这样它们就不会被抛出并终止测试用例。
3.  检查 StringBuffer 以确定测试用例是否失败。

    ```
    StringBuffer verificationErrors;

    // Initialize your error SringBuffer here

    @Before
    public void initialize() {
        verificationErrors = new StringBuffer();
    }
    // The following is one of the steps in the test case where I need to assert     something

    @When("^the value is (\\d+)$")
    public void the_result_should_be(int arg1) {
        try  {
            assertEquals(arg1, 0);
        }
        catch(AssertionError ae) {
            verificationErrors.append("Value is incorrect- "+ae.getMessage());  
        } 
    ```

在@After 或者测试用例最后一步检查StringBuffer，判断是否可以通过，如下：

```
if (!(verificationErrors.size()==0)) {
   fail(verificationErrors.toString());
} 
```

唯一的问题是，在报告中，所有步骤看起来都是绿色的，但测试用例看起来失败了。然后您可能需要查看错误字符串以了解哪些步骤失败了。每当出现断言错误时，您都可以向字符串添加额外信息，以帮助您轻松找到该步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T15:16:27.833

使用[SoftAssert](https://www.softwaretestingmaterial.com/soft-assert/)累积所有断言失败。然后将您的步骤定义类标记为@ScenarioScoped，并在步骤定义类中添加一个标记为@After 的方法，在其中执行 mySoftAssert.assertAll();

IE

```
import io.cucumber.guice.ScenarioScoped;
import io.cucumber.java.After;
import io.cucumber.java.Before;
import io.cucumber.java.en.Then;

@ScenarioScoped
public class MyStepDefinitions {

SoftAssert mySoftAssert=new SoftAssert();

    @Then("check something")
    public void checkSomething() {
       mySoftAssert.assertTrue(actualValue>expectedMinValue);
    }

    @After
    public void afterScenario(Scenario scenario) throws Exception {
        mySoftAssert.assertAll();
    }
} 
```

# php - 使用 PHP 的 Postgres 查询在不应该的情况下花费了太长时间

> ID：15298525
> 
> 赞同：0
> 
> 时间：2013-03-08T16:20:24.203
> 
> 标签：php, performance, postgresql

```
 SELECT a.COL1, a.COL2, b.COL3 ,
 a.COL4, e.COL1 , e.COL5,  e.COL6,
 e.COL7, a.COL8,b.COL9, b.COL10 , a.COL11,
 f.COL12 FROM TABLE1 a, TABLE2 b
 TABLE3 c, TABLE4 d, TABLE5 e, TABLE6 f 
 WHERE a.COL1=b.COL1 and a.COL2=c.COL2 and c.COL3=d.COL3 and d.COL5='2'
 ORDER BY date(a.COL8) DESC, a.COL2 desc, a.COL1 
```

当使用 PGAdmin 或 Navicat 直接在数据库上执行上述查询时，会返回 570 个结果并在不到一秒的时间内完成。然而，当通过 pg_query 执行时，它需要大约 40(!) 秒。

有人知道为什么是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:03:06.750

事实证明，答案很奇怪。我正在使用由其他人在过去某个时候编写的函数提供的连接......原来它正在使用

```
pg_query($db_platform, "set enable_seqscan=false"); 
```

难怪使用该连接时查询被破坏了。

# stata - 确定事件发生后的时间段（最多 n 个领先/滞后）

> ID：15298526
> 
> 赞同：1
> 
> 时间：2013-03-08T16:20:26.783
> 
> 标签：stata

我想测量自事件发生以来的周期数（这里是年）（这里由指标变量表示`pos`），直到给定数量的领先和滞后（这里是三个）。

下面的代码有效，但看起来很老套，就像我错过了一些基本的东西。是否有更强大的解决方案可以利用内置函数或更好的逻辑？我在11.2。谢谢！

```
version 11.2
clear

* generate annual data
set obs 40
generate country = cond(_n <= 20, "USA", "UK")
bysort country: generate year = 1766 + _n
generate pos = 1 if (year == 1776)

* generate years since event (up to three)
encode country, generate(countryn)
xtset countryn year
generate time_to_pos = 0 if (pos == 1)
forvalues i = 1/3 {
    replace time_to_pos = `i' if (l`i'.pos == 1)
    replace time_to_pos = -1 * `i' if (f`i'.pos == 1)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:39:35.413

明确的问题。

这可以缩短。这是一种方法。从您的代码开始设置沙坑

```
version 11.2
clear
* generate annual data
set obs 40
generate country = cond(_n <= 20, "USA", "UK")
bysort country: generate year = 1766 + _n 
```

现在它是

```
gen time_to_pos = year - 1776 if  abs(1776 - year) <= 3 
```

这就是您的示例所需的全部内容。如果您想概括每个面板中的多个事件，我想知道此类事件的规则。

我打算从[http://www.stata-journal.com/article.html?article=dm0055](http://www.stata-journal.com/article.html?article=dm0055)展示一个技巧，但它似乎不需要。

# javascript - JavaScript 对象中的条件语句

> ID：15298527
> 
> 赞同：1
> 
> 时间：2013-03-08T16:20:27.520
> 
> 标签：javascript, jquery, html

我正在创建以下 Dygraph 对象：

```
function prime() {
  g = new Dygraph(
    document.getElementById("g"),
      data, //This is the variable I want to avoid passing in for older browsers
      {
      labelsDivStyles: { 'textAlign': 'right' },
      title: document.getElementById("title").value,
      titleHeight: 35,
      labelsSeparateLines: true,
      includeZero: true
      }
  );
} 
```

我想要一个浏览器检查来确定是否包含“数据”，例如：

```
if(Browser.Version() > 8){
  //include data variable
} else{
  //don't include
} 
```

除了创建第二个函数来处理另一种情况之外，有没有人有任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:24:21.780

您要么需要事先创建和操作*对象字面量，要么需要在**value*和*null / undefined*之间交替使用三元运算符。

```
var myObj = {
    labelsDivStyles: { 'textAlign': 'right' },
    title: document.getElementById("title").value,
    titleHeight: 35,
    labelsSeparateLines: true,
    includeZero: true
};

if( Browser.Version() > 8 ) {
    myObj.data = 42;
} 
```

或者

```
function prime() {
    g = new Dygraph(
     document.getElementById("g"),
      data,
      {
      labelsDivStyles: { 'textAlign': 'right' },
      title: document.getElementById("title").value,
      titleHeight: 35,
      labelsSeparateLines: true,
      includeZero: true,
      data: Browser.Version() > 8 ? 42 : null
      }
  );
} 
```

您也可以选择使用一个自调用函数来完成这项工作并返回该对象，但这与示例 #1 几乎相同。无论哪种方式，您都不能告诉 ECMAscript 在形成对象字面量时创建或不创建键。

# wix - 从服务运行时，Windows 安装程序总是失败并出现错误 1601 或 1603

> ID：15298528
> 
> 赞同：1
> 
> 时间：2013-03-08T16:20:27.610
> 
> 标签：wix, windows-installer

我们有一个安装在客户位置的应用程序。此应用程序由作为 Windows 服务运行的自承载 WCF 服务器以及与此问题无关的客户端应用程序组成。

我们通过让服务在后台下载我们的 WiX 生成的 .msi 文件来向我们的客户发布更新，然后在客户选择安装它时安装它。安装过程如下：

1.  服务器将引导程序应用程序复制到临时路径并运行它，将路径传递给 MSI 文件以进行安装
2.  引导程序使用 MSI 文件中的升级代码卸载以前的版本，然后安装新版本。它使用与 MSI 相关的各种 P/Invoke 调用来调用安装程序，例如`MsiInstallProduct`.
3.  引导程序重新启动服务

问题是，在几乎呼叫客户的站点上，这个自动化过程失败了，尽管与所有事情一样，它在我们所在地的测试和生产中都有效。有时它会在卸载过程中失败，但通常是在安装过程中。错误代码 1601 (InstallServiceFailure) 和 1603 (InstallFailure) 很常见，因为它们完全无助于确定出了什么问题。

我们有一个备份过程，用户可以通过在 Windows 中运行引导程序来手动调用安装程序（当然，需要以管理员身份运行）。此过程不会失败，并且它使用*与失败的自动化过程完全相同的安装逻辑*。

所有服务都作为帐户运行，至少在服务器上具有管理权限。

我可以从哪里开始尝试查找有关导致错误的原因的更多信息，或者更好地从一开始就阻止它们？

**编辑**这是安装失败的详细日志文件的一个示例：

```
=== Verbose logging started: 3/29/2013  8:23:30  Build type: SHIP UNICODE 5.00.7600.00  Calling process: <<PATH TO MSI>> ===
MSI (c) (00:7C) [08:23:30:194]: Resetting cached policy values
MSI (c) (00:7C) [08:23:30:262]: Machine policy value 'Debug' is 0
MSI (c) (00:7C) [08:23:30:418]: ******* RunEngine:
           ******* Product: <<PATH TO MSI>>
           ******* Action: 
           ******* CommandLine: **********
MSI (c) (00:7C) [08:23:30:491]: Client-side and UI is none or basic: Running entire install on the server.
MSI (c) (00:7C) [08:23:30:520]: Grabbed execution mutex.
MSI (c) (00:7C) [08:23:30:562]: Failed to connect to server. Error: 0x800703FA

MSI (c) (00:7C) [08:23:30:605]: Failed to connect to server.
MSI (c) (00:7C) [08:23:30:637]: MainEngineThread is returning 1601
=== Verbose logging stopped: 3/29/2013  8:23:30 === 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:59:39.210

这个问题太宽泛了，无法回答，但这是我为其他客户设计的：

1) 提升的服务将 MSI 下载到本地目录并使用命令 msiexec /jm foo.msi “广告”（祝福）MSI

2) 非提升客户端组件然后使用命令 msiexec /I foo.msi 安装 MSI

MSI 必须经过适当设计并且符合 UAC。从 Install UI 到 Install Execute 的转换将在没有 UAC 提示的情况下发生。只有正确安排（延迟而不模拟）自定义操作才会运行提升。

一旦解决了所有问题，客户就会对他们的自动更新模式非常满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:26:11.473

也许你需要看看另一个角落：

当我过去遇到奇怪的安装问题时，它们通常是由行为分析工具导致的，这些工具意外地阻止了他们不应该拥有的东西。如果某些此类工具（可能是病毒扫描程序套件的一部分或诸如 ThreatFire 等独立应用程序的一部分）安装在相关计算机上，请确保您的更新过程所需的任何部件均未在任何地方列为“已阻止”。如果您的更新执行导致行为分析组件自动处理的操作，请确保将它们可靠地列入白名单。

# c# - 从控制台应用程序中的资源创建 WriteableBitmap

> ID：15298529
> 
> 赞同：0
> 
> 时间：2013-03-08T16:20:37.963
> 
> 标签：c#, console-application, writeablebitmap, writeablebitmapex

我正在尝试使用 WriteableBitmapEx 从硬盘驱动器上的图像创建 WriteableBitmap。添加nuget包后，我从官方页面复制了代码：

```
WriteableBitmap writeableBmp = new WriteableBitmap(0, 0).FromResource("Data/flower2.png"); 
```

但我得到了错误

> 'System.Windows.Media.Imaging.WriteableBitmap' 不包含采用 2 个参数的构造函数

我已经添加了 PresentationCore.dll，正如我[在控制台应用程序中的 WriteableBitmapEx 被告知的那样？](https://stackoverflow.com/questions/15297603/writeablebitmapex-in-console-application) 以及 System.Windows.Media.Imaging 的 using 语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T09:20:10.303

*WriteableBitmapEx*库为构造可写位图提供了一个通用工厂方法，即`BitmapFactory.New`. 改用这个可移植的方法来生成你的虚拟可写位图：

```
WriteableBitmap writeableBmp = BitmapFactory.New(0, 0).FromResource("Data/flower2.png"); 
```

该类`BitmapFactory`位于`System.Windows.Media.Imaging`命名空间中（除非您使用的是 WinRT 版本的*WriteableBitmapEx*，它位于`Windows.UI.Xaml.Media.Imaging`命名空间中）。

# .net - WPF Datagrid 刷新和维护排序顺序或滚动

> ID：15298533
> 
> 赞同：1
> 
> 时间：2013-03-08T16:20:49.873
> 
> 标签：.net, wpf, datatable

我有一个绑定到我的 ViewModel 的 WPF 数据网格，其中包含 Observable 属性。问题是，每当我新获取 DataTable 时，它​​完美地反映了数据网格上更改的行，但我失去了滚动位置和 SortOrder。我知道解决方案是让 Observable 对象保持活动状态，而不是为这个属性分配一个新的 DataTable，我应该专注于更新行。但是 DataTable Rows 没有实现 INotifyPropertyChange，在我的解决方案中我不能使用 DataTable 以外的任何数据对象。我应该怎么做才能解决这个问题？

# spring - contex:componet-scan 不拾取 jar 文件中定义的 bean

> ID：15298534
> 
> 赞同：0
> 
> 时间：2013-03-08T16:20:51.787
> 
> 标签：spring, jar, annotations

我正在开发一个 Spring Project:Common，它在 XML 中使用 Annotaions 和 Spring IOC 的组合。我有一个 common.jar，其中包含各种项目使用的 Common 类。

我还有另一个 Spring Project:WebService 引用 common.jar 中定义的 bean。

由于某种原因，Common.jar 中标有 @Component Annotation 的 bean 没有被我的 WebService 项目拾取。但是在 Common.jar 中使用 <bean id="" class="" /> 定义的所有 bean 都被拾取。

以下是所有具有必要配置的文件的代码。非常感谢您的帮助。提前致谢。

在 Common.jar 中，applicationContext.xml

```
 <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

    <import resource="springConfig/app/AppServices.xml"/> <!-- Beans in this file were loaded. -->

    <context:annotation-config/>
    <context:component-scan base-package="com.ipd.app1"/> <!-- Beans for all classes under app1 package were NOT loaded  -->

</beans> 
```

在 Common.jar 中，AppServices.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="inquireOrderApp" class="com.ipd.app.inquireOrderDetail.InquireOrderDetailAppImpl"/>

</beans> 
```

Common.jar、com.test.app.MyClass

```
package com.ipd.app1;
    @Component("createOrderApp")
    public class CreateOrderAppImpl implements CreateOrderApp {
        @Override   
        public CreateOrderResponse processMSSOrder(TransactionContext tx,
                CreateOrderRequest createOrderRequest)
                throws ApplicationException, Exception {

            System.out.println("In App Layer Class CreateOrderAppImpl to ProcessOrder.");
            return response;
        }
    } 
```

WebService 项目，IpdService_IPDSoapHTTPPortImpl.java

```
 @WebService(portName = "IpdSoapHTTPPort", serviceName = "IpdService", targetNamespace = "http://ipd.com/ipdIpdweb/", wsdlLocation = "/wsdls/Ipd.wsdl", endpointInterface = "com.ipd.ipdIpdweb.IpdPortType")
@BindingType("http://schemas.xmlsoap.org/wsdl/soap/http")
public class IpdService_IpdSoapHTTPPortImpl implements IpdPortType {

    ApplicationContext ctx;

    public IpdService_IpdSoapHTTPPortImpl() {
        this.ctx = AppContext.getCtx();
    }

    @Override
    public void createOrder(WSHeader wsHeader,
            CreateOrderRequest createOrderRequest,
            Holder<WSResponseHeader> wsResponseHeader,
            Holder<CreateOrderResponse> createOrderResponse)
            throws WSException {

            CreateOrderApp createOrderApp = (CreateOrderApp) ctx.getBean("createOrderApp");         
            res = createOrderApp.processOrder(tx, createOrderRequest);

            res.setResponseCode(BigInteger.valueOf(0));
            res.setResponseMessage("Success");

           .....
    }

} 
```

如果您需要查看任何其他文件的代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:44:06.387

好吧，将其添加到`applicationContext.xml`

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/> 
```

# php - PDO 执行上的变量/数组是否也准备好了？

> ID：15298537
> 
> 赞同：0
> 
> 时间：2013-03-08T16:20:56.970
> 
> 标签：php

在下面，我将谈论 $val1。$val1 也准备好了吗？

```
 $sql = "SELECT * FROM table WHERE col1=:var1 LIMIT 1";
 $q = $conn->prepare($sql);
 $q->execute(array(':var1'=>$val1)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:25:17.067

是的，它和任何其他基于占位符的值一样是“准备好的”（按照您的说法）。
否则这样的语法就没有意义了。

# iphone - 保存高分cocos2d

> ID：15298538
> 
> 赞同：0
> 
> 时间：2013-03-08T16:20:56.983
> 
> 标签：iphone, xcode, cocos2d-iphone

我试图更好地解释这种情况。

变量是：

```
int punteggio;

CCLabelTTF *labelPunteggio; 
```

然后在初始化方法中，我在屏幕上打印我的分数：

```
- (id)init {
    if ((self = [super init])) {

    // PUNTEGGIO
    labelPunteggio = [CCLabelTTF labelWithString:@"0000" fontName:@"Marker Felt" fontSize:13];

    [self addChild:labelPunteggio];
    ....
    }
} 
```

这就是在 Punteggio 上添加分数的功能：例如，每次我杀死一个怪物，我都会添加 10 分。

```
-(void)aggiungiPunti
{
    punteggio = punteggio +0001;

    [labelPunteggio setString:[NSString stringWithFormat:@"%d", punteggio]];
} 
```

但是现在，我不知道当玩家完成游戏时如何保存分数。我想保存这个分数，然后在屏幕上打印高分，我想

```
-(void) setScore:(int)score
{
    punteggio = highScore;

    if (punteggio>highScore)
    {
        highScore = punteggio;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:48:57.193

使用 NSUserdefaults

```
// Snippet used to save your highscore in the prefs.
int highScore  = yourGameScore;
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:highScore] forKey:@"HighScore"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

//在游戏结束屏幕中

```
// Get your highscore from the prefs.
highScore = [[[NSUserDefaults standardUserDefaults] objectForKey:@"HighScore"] intValue ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:05:32.257

查看此[链接](http://britneyleejohnson.com/?p=238#more-238)，您可以使用[SettingManager](http://getsetgames.com/2009/10/07/saving-and-loading-user-data-and-preferences/)类为您完成这项工作。我已经使用 settingManager 类来存储高分。希望这会有所帮助

# r - 错误 .. 需要 TRUE/FALSE 的地方缺少值

> ID：15298542
> 
> 赞同：0
> 
> 时间：2013-03-08T16:21:09.113
> 
> 标签：r, for-loop, message

我一直在尝试运行此代码（在此处下方）并且收到消息“if (temp[ii] == 0) { 中的错误：需要 TRUE/FALSE 的缺失值”...

```
temp = c(2.15, 3.5, 0, 0, 0, 1.24, 5.42, 6.87)
tm = length(temp)
for (i in 1:tm){
    if (temp[i] == 0) {
        counter3 = 1
        last = temp[i - 1]
        for (ii in i + 1:tm){
            if (temp[ii] == 0) {
                counter3 = counter3 + 1
            }
            if (temp[ii] != 0) {
                nxt = temp[i + counter3]
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:52:00.563

您的问题是因为超出范围`temp[ii]`而返回：`NA``ii`

```
ii = i + 1:tm     #Your declaration for ii
ii = 1:tm + 1:tm  #Evaluates to 
```

所以`ii`肯定会大于`tm`（因此`length(temp)`在某些时候。

为了更好地理解/调试`for`循环，请考虑仅打印索引：

```
for(i in 1:tm)
{
    print(i)
    for(ii in i + 1:tm)
        print(ii)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:40:06.543

猜测一下，我会说这是在`R`-如果是这样，我猜这行：

```
if (temp[i] == 0) (or temp[ii] == 0) 
```

产生一个`NA`,`if`条件必须有一个`TRUE`or`FALSE`值。

如果可以的话，使用调试器，我会在`if`块之前询问 temp[i] 的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T16:30:09.860

不了解语言很难，但我认为问题在于，当 i 处于上限时，ii 中的值可能大于 temp 的长度。我本来期望索引超出范围或类似的东西，但不知道语言，谁知道！希望你能解决你的问题。

# android - Android：如何用定时器切换？

> ID：15298546
> 
> 赞同：0
> 
> 时间：2013-03-08T16:21:20.813
> 
> 标签：android, timer, android-widget, switch-statement, timertask

我正在尝试使用开关小部件激活声音，因此我也可以将其关闭。虽然我也希望它在几秒钟后自动关闭。`s.performClick();` 尽管应用程序在任何人知道如何解决我遇到的问题时崩溃，但一切正常 ？

下面是我的完整代码片段。

```
public static class Therapy extends Fragment implements CompoundButton.OnCheckedChangeListener{
    MediaPlayer player = null;
    Switch s;

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) { 
        View v = inflater.inflate(R.layout.therapy, container, false);           
        Switch s = (Switch)v.findViewById(R.id.switch1);
        s.setOnCheckedChangeListener(this);

        return v;   
    }

    class MyTimerTask extends TimerTask {
        public void run() {
            s.performClick();
        }

    }

    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked) {                    
                player = MediaPlayer.create(getActivity(), R.raw.bird1);
                player.setLooping(true);
                player.start();

                MyTimerTask myTask = new MyTimerTask();
                Timer myTimer = new Timer();
                myTimer.schedule(myTask, 1000);
            } else {
                player.stop();
                player.release();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:26:56.493

在这里猜测一下，因为我没有尝试构建您的代码并运行它，但是：

`s.performClick()`是一个 UI 访问操作，不能使用`Timer`. 您可能需要考虑进行`Timer`调用[`Handler.post`](http://developer.android.com/reference/android/os/Handler.html#post%28java.lang.Runnable%29)（传入 Runnable）以确保您的 UI 访问内容不会让 Android 抱怨。或者，根据您的需要，您可以完全使用`Handler.postDelayed`.

# asp.net-mvc - 尝试运行应用程序时出错

> ID：15298549
> 
> 赞同：1
> 
> 时间：2013-03-08T16:21:25.563
> 
> 标签：asp.net-mvc, linq-to-sql, asp.net-web-api

我正在将一个 asp.net 网络表单应用程序移至 mvc。我想尽可能多地重复使用代码，所以我决定使用我现有的 linq to sql 库。

我是 MVC 的新手，但看过 PluralSite 的大量视频以寻求指导。

我创建了一个模型库来在 linq to sql 和 web api 之间工作。我读过我需要这样做，因为 linq to sql 的复杂性。

我还创建了一个 web api 并开始向控制器添加 linq 查询。

```
public IList<Model.vSchedulesFill> GetCustomerSchedules(int id)
    {
        var sch = from p in _context.vSchedulesFills
                  where p.CustomerID == id
                  orderby p.SchedStartDateTime descending
                  select new Model.vSchedulesFill(p);

        return sch.ToList();
   } 
```

我使用 Fiddler 测试了上面的查询，结果很好，所以我尝试运行程序并收到 HTTP 错误 403.14 - Forbidden 错误。

数据库位于远程服务器上，但我在本地计算机上以调试模式运行应用程序。

该错误提到没有默认文档或未打开 IIS 目录浏览器。

我查看了默认文档，看到了很多关于添加 web api 帮助文件的内容。所以我去了 NuGet 并安装了它，但应用程序仍然无法运行。

我已经到处寻找解决这个问题的方法......

我做错了什么，我需要做什么来解决这个问题？

谢谢你的帮助

添加

```
 <directoryBrowse enabled="true" /> 
```

到 system.webServer 部分下的 web 配置。

可以查看目录，但这不是我需要的。我基本上希望能够运行程序，然后在地址栏中输入路径，就像我在 Fiddler 中所做的那样。

我没有删除 web api 项目中包含的任何默认布局表单。

谢谢

# c# - 使用模板方法代替重复代码

> ID：15298553
> 
> 赞同：4
> 
> 时间：2013-03-08T16:21:32.943
> 
> 标签：c#, templates, generics, reusability

我有 4 种具有相似代码的方法

```
private void LogExceptions(ObjA.Input input, int customerId)
{
    //ObjA is a big object, thats why I try not to send the whole object in this method
    Log(input);
    Log(ObjA.Exceptions);
}

private void LogExceptions(ObjB.Input input, int customerId)
{
    //ObjB is a big object, thats why I try not to send the whole object in this method
    Log(input);
    Log(ObjB.Exceptions);
} 
```

等等

我无法使其成为模板方法，例如

```
private void LogExceptions<T1,T2>(T1 input, int customerId) whereas     T1:ObjA.Input,ObjB.Input
{
    Log(T1);
    Log(T2);
} 
```

怎么做或有其他方法吗？提前感谢任何帮助。

我不认为我的问题有助于获得正确的答案......这是确切的代码......

```
 private void LogExceptions(AccARef.Response response)
    {
        StringBuilder sbErrors = null;

        if (response.ValMethod != null && response.ValMethod.IsValid == false)
        {
            if (response.ValMethod.Errors.Count() > 0)
            {
                sbErrors = new StringBuilder();
                foreach (AccARef.Exception exp in response.ValMethod.Errors)
                {
                    sbErrors.Append(" * " + exp.Message + exp.StackTrace + " ");
                    Console.WriteLine(strError.ToString())
                }
            }
        }
    }

    private void LogExceptions(AccBRef.Response response)
    {
        StringBuilder sbErrors = null;

        if (response.ValMethod != null && response.ValMethod.IsValid == false)
        {
            if (response.ValMethod.Errors.Count() > 0)
            {
                sbErrors = new StringBuilder();
                foreach (AccBRef.Exception exp in response.ValMethod.Errors)
                {
                    sbErrors.Append(" * " + exp.Message + exp.StackTrace + " ");
                    Console.WriteLine(strError.ToString())
                }
            }
        }
    } 
```

现在 AcctBRef 和 A​​cctARef 不能实现通用接口，因为它们不是我的对象。或者如果它们不是我的物品，我还能把它们装饰成我的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:29:55.233

在这种情况下，您甚至不需要泛型，如果 ObjA 和 ObjB 要么继承自同一个基类或接口。

如果你有

```
interface IBaseClass 
{
   IEnumerable<Something> Exceptions {get;set;}
   InputType Input {get;set;}
}
class A : IBaseClass {}
class B : IBaseClass {} 
```

您可以将其用于您的 LogExceptions 签名：

```
void LogExceptions(IBaseClass obj, int CustomerId) 
{
   Log(obj.Exceptions);
   Log(obj.Input);
} 
```

如果他们*不*从通用接口继承，那么我建议他们应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T03:18:48.030

What I feel is if there are 4 methods and they don't have same method signature its completely fine, it doesn't always have to be generic it has to be readable as well.

Why would you make 4 calls `Log(T1),Log(T2),Log(T3),Log(T4)` if all you have to do is `Log(OneofTheTypeWhichYouKnowWhenCallingTheMethod)`.

Having said that you can always have reflection to play around like in your case.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:40:27.380

您不能将 Type 参数传递给 Log 方法。您必须传递 Type 参数的实例。

尝试以下：

```
 private void LogExceptions<T1, T2>(T1 input, T2 exceptions, int customerId) 
    {
        Log(input);
        Log(exceptions);
    } 
```

# android - 在 XML 文件中找不到错误

> ID：15298556
> 
> 赞同：1
> 
> 时间：2013-03-08T16:21:39.667
> 
> 标签：android, android-layout

我无法在每个`style`名称标签都显示错误的 XML 文件中找到错误。

```
<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/nav_bar</item>
    <item name="android:background">@drawable/nav_bar</item>
    <item name="android:cacheColorHint">@drawable/nav_bar</item>
</style>

<style name="Widget.Styled.TabView" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@drawable/tab_indicator_customize</item>
</style>

<style name="Widget.Styled.TabBar" parent="Widget.Sherlock.Light.ActionBar.TabBar">
    <item name="background">@color/space_menu</item>
    <item name="android:background">@color/space_menu</item>
    <item name="android:cacheColorHint">@color/space_menu</item>
</style>

<style name="Sherlock.__Widget.Holo.Spinner" parent="Widget">
    <item name="android:dropDownSelector">@drawable/abs__list_selector_holo_dark</item>
    <item name="android:popupBackground">@drawable/box_element</item>
    <item name="android:gravity">left|center_vertical</item>
    <item name="android:spinnerMode">dropdown</item>
    <item name="android:clickable">true</item>
    <item name="android:width">200dp</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:31:46.500

假设这是您的完整 xml，您缺少根节点

```
<resources>
...
</resources> 
```

从[文档](http://developer.android.com/guide/topics/resources/style-resource.html)

> 必需的。这必须是根节点。

如果你有这个，请发布完整的 xml 并告诉我们错误消息是什么，我将删除或编辑。

# javascript - 通过 div 进行 foreach

> ID：15298562
> 
> 赞同：1
> 
> 时间：2013-03-08T16:21:48.637
> 
> 标签：javascript, jquery

我在通过以下构造循环时遇到了一些麻烦：

```
<div id="items">
    <p id="test1">
        <select  name="1" id="1"><option>A</option><option selected>B</option></select>
        <input type="text" name="to" id="to">
        <input type="text" name="away" id="awy">
    </p>
    <p id="test2">
        <select  name="2" id="2"><option>A</option><option selected>B</option></select>
        <input type="text" name="to" id="to">
        <input type="text" name="away" id="awy">
    </p>
    <p id="test3">
        <select  name="3" id="3"><option>A</option><option selected>B</option></select>
        <input type="text" name="to" id="to">
        <input type="text" name="away" id="awy">
    </p>
</div> 
```

我需要运行 test1、test2 和 test3 并读取所选选项和文本字段的值（选择、到、离开）。如果我在例如 test1 中只有一件事，那么执行此操作对查询没有问题：

```
$('#items').children('p').each(function () {...} 
```

但是，如果我添加两个文本字段并想为每个测试（1-3）执行此操作，我不知道......

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:28:38.560

Id 应该代表 DOM 中的唯一项。改用类，如下所示：

```
<input type="text" name="to" class="to">
<input type="text" name="away" class="awy"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:35:44.887

注意：首先给出所有元素的唯一 ID。

以下代码可能会对您有所帮助。

```
$(‘p’).each(function(index){
this.children().get(0).val();

//now do for second and third also
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:28:27.950

这个怎么样？

```
$('#items').find('select option:selected, input:text').each(function(){
      alert($(this).val()); //Value of each selected option and text field within the div
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T16:28:50.673

你甚至不需要做这`.children`部分。

尝试这个：

```
$('#items > p').each(function () {
    // you can then use $(this) to reference the currently iterated p element.
    // such as $(this).find('input[type="text"]:first');
    // or
    // $(this).find('input[type="text"]:last');
}); 
```

# itextsharp - iTextSharp 中的 PdfPageEventHelper

> ID：15298566
> 
> 赞同：0
> 
> 时间：2013-03-08T16:21:54.497
> 
> 标签：itextsharp

抱歉，如果这是之前发布的

我需要在 pdf 文件中打印费用清单。该列表可以扩展到任意数量的页面。

我正在通过迭代 datarow 对象来编写列表。一件重要的事情是，当当前页面即将结束时，需要在页面末尾打印运行总计。我写了一个实现 PdfPageEventHandler 的类，如下所示

```
public class PaymentPageEventHandler : iTextSharp.text.pdf.PdfPageEventHelper
{
    PdfContentByte cb;

    private string subTotal = "";

    public string GetSubtotal
    {
        set{
            value = subTotal;
        }
        get
        {
            return subTotal;
        }
    }

    public override void OnEndPage(PdfWriter writer, Document document)
    {
    //    base.OnEndPage(writer, document);

        cb = writer.DirectContent;

        float[] iOuterTblWidth = { 10, 40F, 8, 12, 10 }; column widths of the table.

        PdfPTable pdftbl = new PdfPTable(iOuterTblWidth);
        PdfPCell cell = new PdfPCell();

        cell.Colspan = 4;
        cell.AddElement(new Chunk("Sub-Total"));
        cell.HorizontalAlignment = 0;
        pdftbl.AddCell(cell);

        cell = new PdfPCell();
        cell.AddElement(new Chunk(GetSubtotal));
        cell.HorizontalAlignment = 2;
        pdftbl.AddCell(cell);

    }
} 
```

上面的 onEndPAge 事件尝试写入两列。上面的代码被调用，但行没有出现在 pdf 页面中。

我正在调用上面的类，如下所示

```
PaymentPageEventHandler ppem = new PaymentPageEventHandler();
ppem.GetSubtotal = "123"; // test value to print as running total
writer.PageEvent = ppem; // assigning event to writer object 
```

我是否应该明确调用 PdfContentByte 变量 cb 来编写。如果是这样，我应该如何将单元格写入 pdf。

任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:05:07.500

您需要使用该`WriteSelectedRows`方法添加表。请阅读文档并查看此[示例](http://itextpdf.com/examples/iia.php?id=104)（或示例的 C#[端口](http://tinyurl.com/iiacsCH05)）

寻找线：

```
table.WriteSelectedRows(0, -1, 34, 803, writer.DirectContent); 
```

显然，您需要调整坐标。

# twitter-bootstrap - 从 UI Bootstrap 中动态加载的选项卡激活第一个

> ID：15298568
> 
> 赞同：0
> 
> 时间：2013-03-08T16:21:58.693
> 
> 标签：twitter-bootstrap, angularjs, pug

我正在使用带有 AngularJS 和 Jade 的UI Boostrap ( [http://angular-ui.github.com/bootstrap )。](http://angular-ui.github.com/bootstrap)我无法在加载该部分时选择动态生成的集合中的第一个选项卡。这是我的代码：

```
div#attachments-section
   tabs
      pane(ng-repeat='attach in attachments', heading='{{attach.filename}}', active='attach.active')
         div.content
            object(width='100%', height='100%', data='{{"http://localhost/files/" + attach.content}}') 
```

这意味着，当加载部分 (#attachments-section) 时，没有选择任何选项卡。我尝试为 JSON 集合（附件）的第一个元素中的 active 属性分配一个真实值，但它不起作用。

**检查：**我已经更新了我的代码（带有对象标签），因为我需要使用 PDF 的浏览器查看器显示每个附件。

**更新**我遵循了@blesh 的建议，我意识到它在 Firefox 中运行良好，但在 Chrome 中运行良好。我在 Punkler 中写了一个示例。

[http://plnkr.co/edit/ESBWciLAKJosK2u6eZVD?p=preview](http://plnkr.co/edit/ESBWciLAKJosK2u6eZVD?p=preview)

你知道会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:55:25.440

我找到了！在 Chrome 中，您必须在对象标记中指定嵌入内容的类型。

```
 <div ng-controller="MainCtrl">
    <div><h2>Example</h2></div>
    <div id="attachments-section">
      <tabs>
          <pane ng-repeat="attachment in attachments" heading="{{attachment.title}}" active="attachment.active">
            <div style="height: {{objHeight}}; overflow-y: hidden;">
              <object type='application/pdf' width='100%', height='100%', data='{{attachment.filename}}'></object>
            </div>
          </pane>
      </tabs>
    </div>
</div> 
```

现在 punkler 中的这段代码适用于任何浏览器：http: [//plnkr.co/edit/ESBWciLAKJosK2u6eZVD](http://plnkr.co/edit/ESBWciLAKJosK2u6eZVD)

谢谢你的帮助。

# php - 在PHP中获取服务器路径减去文件名

> ID：15298572
> 
> 赞同：2
> 
> 时间：2013-03-08T16:22:05.753
> 
> 标签：php

我有一个我正在编写的 PHP 脚本，它将在多个服务器上使用。所以它可能在以下任何一个：

```
/home/14535/domains/something.com/html/miller/test/index.php
/home/12345/domains/something.com/html/jones/test/dir4/index.php
/home/11112/domains/something.com/html/smith/test/test2/test3/index.html 
```

在上述任何情况下，都需要返回减去 index.php 或 index.html 的完整路径

如何**可靠地**返回当前目录的完整服务器路径减去实际脚本名称？（会有一些图片上传等，这就是我需要这条路径的原因）。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:25:27.237

使用[路径信息（）](http://php.net/manual/en/function.pathinfo.php)

来自 php 手册的示例

```
 <?php
  $path_parts = pathinfo('/www/htdocs/inc/lib.inc.php');

 echo $path_parts['dirname'], "\n";
 echo $path_parts['basename'], "\n";
 echo $path_parts['extension'], "\n";
 echo $path_parts['filename'], "\n"; // since PHP 5.2.0
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:25:11.977

`__FILE__`返回当前运行的完整路径和脚本。要获取目录名称，请通过`dirname()`. 如果你有一个符号链接，你还需要通过它`realpath()`

```
realpath(dirname(__FILE__)); 
```

这可能是您正在寻找的。例如，这会在我的服务器上返回正确的路径

```
root@upstairslinux:~# php example.php
/root

root@upstairslinux:~# 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:25:22.487

您可以使用以下内容：

```
$yourpath = dirname(__FILE__); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T16:30:22.643

如果您使用的是 PHP 5.3+，则应使用魔术常量：

```
__DIR__ 
```

如果您的版本低于此，您应该使用：

```
dirname(__FILE__); 
```

如果您的版本低于 4.0.2，请升级您的 PHP 版本；）

有关详细信息，请参阅[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)。

# zend-framework - Zend View - 自动转义分配的变量

> ID：15298574
> 
> 赞同：1
> 
> 时间：2013-03-08T16:22:14.537
> 
> 标签：zend-framework, xss, zend-view

的[文档](http://framework.zend.com/manual/1.12/en/zend.view.scripts.html)显示`Zend_View`了一种`escape($var)`方法。它还建议应该为我们要显示的每个变量手动调用它：`$this->escape($this->var);`

有没有办法扩展`Zend_View`自动逃生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:19:28.817

出于两个原因，这是一件有风险的事情。

首先，所需的转义类型取决于输出变量的上下文。例如，在一些 HTML 的中间输出一个字符串需要对不同的字符进行转义，而不是在一些`<script>`标签中输出它，或者作为 HTML 属性的值。

其次，你会如何处理对象？考虑`echo $this->name`vs. `echo $this->user->name`（`$this->user`类的实例在哪里）。在后一个示例`->name`中，甚至可以是作为`__get()`调用结果的动态生成的字符串。这是无法自动转义的，因此您最终会遇到一些数据被自动转义而有些数据没有被自动转义的情况。可以说，这比开箱即用的方法更不安全，因为它提供了一种错误的安全感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:19:45.587

我相信这可以通过使用使用自定义流处理程序的自定义 View 类来实现。

这种实现的细节由 Rob Allen 在[http://akrabat.com/zend-framework/a-view-stream-with-zend_view/](http://akrabat.com/zend-framework/a-view-stream-with-zend_view/)提供。

# c++ - HippoMocks - 在 C++ 中模拟 COM 接口？

> ID：15298578
> 
> 赞同：1
> 
> 时间：2013-03-08T16:22:42.260
> 
> 标签：c++, visual-c++, mocking, hippomocks

[最新版本的 Hippo Mocks](https://www.assembla.com/code/hippomocks/git/nodes/master/HippoMocks/hippomocks.h)（在其 Git 存储库中）似乎增加了对 COM 接口的支持。我试过模拟一个 ADO 连接对象；这需要对 Hippo Mocks 进行一些调整才能正确构建（似乎 COM 版本的代码没有针对 Hippo Mocks 其余部分的更改进行更新）。我现在正在构建它，但以下测试失败：

```
MockRepository mocks;
auto pConn = mocks.Mock<ADONS::_Connection>();
mocks.OnCall(pConn, ADONS::_Connection::AddRef).Return(1);

ADONS::_ConnectionPtr conn = pConn; 
```

智能指针做的第一件事就是`AddRef`接口。我的模拟不应该关心引用计数，所以我添加了一个简单地返回的调用期望`1`。但是，一旦`AddRef`被调用，`HippoMocks::NotImplementedException`就会抛出 a。

有没有人成功地用 Hippo Mocks 模拟 COM 接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-10T09:26:35.513

我有同样的问题并解决了它。hippomocks 的实际版本现已发布在 github 上：

[https://github.com/dascandy/hippomocks](https://github.com/dascandy/hippomocks)

非常感谢提供的链接，这有助于找到修复的想法。

**更新，关于我的实现和添加的 COM 支持的详细信息。**

首先我让它工作，下面的测试演示

```
class ICom 
{
public:
    virtual ~ICom() {}
    virtual long __stdcall A(void) = 0;
    virtual long __stdcall B(int) = 0;
    virtual long __stdcall C(int, int) = 0;
    ...
};

TEST(checkStdCallBase)
{
    MockRepository mocks;

    ICom* ic = mocks.Mock<ICom>();
    mocks.ExpectCall(ic, ICom::A)
        .Return(1);

    long actual = ic->A();
    EQUALS(1, actual);
} 
```

为了使它工作，我不得不修补 hippomocks.h 中的几个地方，这是 virtual_function_index 方法中最重要的。更正确保接口上调用的地址计算正确。

其次，我为 COM 对象添加了一些常见的设置助手，为 AddRef、Release 和 QueryInterface 提供标准行为。

测试显示了如何使用它：

```
MIDL_INTERFACE("4745C05E-23E6-4c6d-B9F2-E483359A8B89")
COMInterface1 : public IUnknown
{
public:
    virtual HRESULT STDMETHODCALLTYPE getTObjectCount( 
        /* [out] */ unsigned long *pCount) = 0;
};

typedef GUID ESTypeID;

MIDL_INTERFACE("356D44D9-980A-4149-A586-C5CB8B191437")
COMInterface2 : public IUnknown
{
public:
    virtual HRESULT STDMETHODCALLTYPE getMappablePackages( 
        /* [out] */ long *pSize,
        /* [size_is][size_is][out] */ ESTypeID **pIdList) = 0;
};

        TEST(CheckThat_AddCommExpectations_Stubs_QueryInterface_AddRef_Release)
{
    MockRepository mocks; 
    COMInterface1* deviceMock = mocks.Mock<COMInterface1>();

    AddComExpectations(mocks, deviceMock);

    {
        CComPtr<IUnknown> pUnk = deviceMock;  
        CComQIPtr<COMInterface1> pDevice = pUnk;

        CHECK(pDevice == pUnk);

        IUnknown* p = NULL;
        pDevice->QueryInterface(__uuidof(IUnknown), (void**)&p);

        CHECK(p == deviceMock);
    }
}

TEST(CheckThat_ConnectComInterfaces_Stubs_QueryInterface_ToEachOther)
{
    MockRepository mocks; 
    COMInterface1* deviceMock = mocks.Mock<COMInterface1>();
    COMInterface2* devMappingMock = mocks.Mock<COMInterface2>();

    ConnectComInterfaces(mocks, deviceMock, devMappingMock);

    {
        //Com objects can reach each other
        CComQIPtr<COMInterface2> pDevMapping = deviceMock;

        CHECK(pDevMapping != NULL);
        CHECK(pDevMapping == devMappingMock);

        CComQIPtr<COMInterface1> pDevNavigate = devMappingMock;

        CHECK(pDevNavigate != NULL);
        CHECK(pDevNavigate == deviceMock);
    }

} 
```

辅助方法 AddComExpectations 和 ConnectComInterfaces 在单独的头文件“comsupport.h”中提供。标头是 Hippomocks 的附加组件：

```
template <typename T>
void AddComExpectations(HM_NS MockRepository& mocks, T* m)
{
    mocks.OnCall(m, T::AddRef)
        .Return(1);
    mocks.OnCall(m, T::Release)
        .Return(1);
    mocks.OnCall(m, T::QueryInterface)
        .With(__uuidof(T), Out((void**)m))
        .Return(S_OK);

    mocks.OnCall(m, T::QueryInterface)
        .With(__uuidof(IUnknown), Out((void**)m))
        .Return(S_OK);

}

template <typename T1, typename T2>
void ConnectComInterfaces(HM_NS MockRepository& mocks, T1* m1, T2* m2)
{
    //from T1 to T2
    mocks.OnCall(m1, T1::QueryInterface)
        .With(__uuidof(T2), Out((void**)m2))
        .Return(S_OK);
    //from T2 to T1
    mocks.OnCall(m2, T2::QueryInterface)
        .With(__uuidof(T1), Out((void**)m1))
        .Return(S_OK);

    AddComExpectations(mocks, m1);
    AddComExpectations(mocks, m2);

    //no support for interface hierarchies
    //no Base IUnknown -> do it yourself if you really need that special case
} 
```

# masstransit - MassTransit 在 sagas 中具有业务逻辑/行为

> ID：15298579
> 
> 赞同：0
> 
> 时间：2013-03-08T16:22:43.263
> 
> 标签：masstransit

sagas 的事件处理程序似乎嵌入了业务逻辑/行为。
我指的是星巴克的例子。

由于示例的“示例应用程序”性质，这是故意这样做的吗？
域逻辑/行为似乎不是与公共交通密切相关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:07:53.760

MT 的 Dru 在 google 群里回复我（释义）： 样本写得很简单，把业务逻辑分开，在 saga 中调用。

# java - 继续读取 txt 文件并保存字符串 java

> ID：15298585
> 
> 赞同：-4
> 
> 时间：2013-03-08T16:22:54.463
> 
> 标签：java, file

我想要保持从 txt 文件中读取行并将它们保存到变量中以供以后处理的最佳方法最后处理它们编辑：

```
Scanner in = new Scanner(new FileReader(filename));

    while(in.hasNextLine()){
        answer=in.nextLine();
        if (answer.contains("-")) {
            temp=answer.split(":");
            value=Integer.parseInt(temp[0]);
            freq=Integer.parseInt(temp[1]);
        }

    } 
```

在我到达 txt 文件末尾后我想要什么我想比较频率值并将它们从最小到更大存档

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:32:21.943

读取整个文件的最简单方法是使用[Files 便捷方法](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllLines%28java.nio.file.Path,%20java.nio.charset.Charset%29)，例如：

```
List<String> lines = Files.readAllLines(Paths.get("path/to/your/file"),
                             Charset.forName("UTF-8")); 
```

然后，您可以处理列表并使用这些行做您需要的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:27:31.243

如果要单独保存行，可以使用数组，否则只需将文件内容添加到字符串变量即可。

但是您应该指定要对内容执行的操作，以便我们为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:31:12.803

像这样的事情应该使用[扫描仪来完成](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)

```
Scanner s = new Scanner(file object pointing at file));
List<String> listOfLines = new ArrayList<String>();
while (s.hasNext()) {
   listOfLines.add(s.next());
}
s.close(); 
```

但是有多种方法可以使用 BufferedReaders 和其他 java 类来完成。听起来您问题的症结在于要使用什么数据结构。您应该使用一个列表，因为它会动态增长。除非您预先知道文件中的行数，否则数组不适合您

更新：

如果您想添加 val 和 freq，那么我将创建另一个类。

```
class StuffHolder {
   private final String val;
   private final String freq;

   public StuffHolder(String val, String freq) { 
      this.val = val;
      this.feq = freq;
   }
   //plus some getters

} 
```

然后将您的列表更新为

```
List<StuffHolder> listOfLines = new ArrayList<StuffHolder>(); 
```

我相信你能想出一个比 StuffHolder 更好的名字；）

如果您正在尝试计算频率，那么如果 val 是键，则最好使用映射。Val 可能是映射中的键，然后您可以在每次找到 val 的实例时将该值加一

# ios - 将信息从视图控制器发送到另一个

> ID：15298591
> 
> 赞同：0
> 
> 时间：2013-03-08T16:23:16.127
> 
> 标签：ios, uibutton, uiimage, segue, viewcontroller

问题是，我在 viewcontroller (ViewController) 上有 9 个按钮，并且我有一个用于存储所有这些按钮插座的插座集合。

然后我有一个操作方法来处理这些按钮的点击事件。

我想要的是发送 CLICKED 按钮的按钮图像背景（作为 UIImage * img），segue 到另一个视图控制器（vc2），

这是我的代码：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *cardBtns;

- (IBAction)cardAction:(id)sender;

@end

#import "ViewController.h"
#import "ResultViewController.h"

@interface ViewController ()
@property(strong,nonatomic)UIImage *image;
@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)cardAction:(id)sender {
for(UIButton *cardButton in self.cardBtns){
    self.image = [cardButton currentBackgroundImage];
}
[self performSegueWithIdentifier:@"cardSegue" sender:self.image];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
//UIImage * img = [UIImage imageNamed:@"f1"];
UIImage * img = (UIImage *)sender;

ResultViewController *viewcontroller = [segue destinationViewController];
viewcontroller.img = img;
}

@end 
```

在 vc2 中，我在这里有另一个按钮，我希望用刚刚从 vc1 segue 发送的 img 绘制这个按钮背景 img。

```
@interface ResultViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIButton *cardBtn;
@property(strong,nonatomic)UIImage *img;

- (IBAction)cardDismiss:(id)sender;

@end

#import "ResultViewController.h"

@interface ResultViewController ()

@end

@implementation ResultViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
[self.cardBtn setImage:self.img forState:UIControlStateNormal];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)cardDismiss:(id)sender {
[self dismissViewControllerAnimated:NO completion:nil];
}
@end 
```

假设我的按钮是 1,2,3,4,5,6,7,8,9

现在，无论我在 vc1 中单击什么按钮，它总是在 vc2 中显示为“6”......有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:28:30.883

问题是这样的：

```
- (IBAction)cardAction:(id)sender {
for(UIButton *cardButton in self.cardBtns){
    self.image = [cardButton currentBackgroundImage];
}
[self performSegueWithIdentifier:@"cardSegue" sender:self.image];
} 
```

This will set self.image to the last item in self.cardBtns. You want to set self.image to sender.currentBackgroundImage (and change id in the argument type to UIButton *), and just eliminate the loop.

# java - 让 Jtextarea 能够被复制

> ID：15298596
> 
> 赞同：0
> 
> 时间：2013-03-08T16:23:25.123
> 
> 标签：java, jtextarea, look-and-feel

我有一个关于将我的 Java 版本从版本 6 更新到 7 的问题。虽然我必须对我的程序进行很少的更改，但我确实注意到了一些奇怪的事情。如果我愿意，我曾经能够复制面板中的文本并将其粘贴到记事本上。但是随着最近的 Java 升级，我发现我不能再这样做了。我对其样式代码进行了更改，但我不确定是否缺少任何内容，并且存储库根本没有显示任何更改。

这是我的 JTextArea 的代码：

```
public void SetStyleForTextAreaLabel( JTextArea ta) {
    ta.setEditable( false);
    ta.setHighlighter( null);
    ta.setLineWrap( true);
    ta.setWrapStyleWord( true);
    ta.setEnabled( false);
    ta.setDisabledTextColor( Color.black);
    ta.setBackground( this.getBackground());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:32:43.067

你需要`setEnabled(true)`。此外，由于您将荧光笔设置为 null，因此您可能看不到正在选择的内容。试试这个：

```
public void SetStyleForTextAreaLabel( JTextArea ta) {
    ta.setEditable( false);
    ta.setLineWrap( true);
    ta.setWrapStyleWord( true);
    ta.setDisabledTextColor( Color.black);
    ta.setBackground( this.getBackground());
} 
```

# git - 丢失了我的 git repo 中的所有文件，重置不起作用。发生了什么？

> ID：15298598
> 
> 赞同：4
> 
> 时间：2013-03-08T16:23:27.117
> 
> 标签：git, github

## 前言

我是 git 新手，几个月来一直在项目中使用它，并决定在 Github 上提供它。我刚刚发现我的备份脚本几乎可以正常工作，所以我已经备份了所有内容，但它很草率。呼……但我希望是 B 计划。

## 问题

我意识到一些 netCDF 数据文件基本上在版本控制（= 巨大的`.git`存储库）中被复制，所以我试图通过首先将这些文件扩展名（和一些测试/数据目录）添加到`.gitignore`根目录中的文件来排除这些文件。这似乎只忽略了这些文件的版本控制，但仍将它们包含在`.git`存储库中。然后我将它们添加到`.git/info/exclude`，我相信它会完全从存储库中忽略它们。

对于每一个发现，我首先做了一个

```
git pull [my_repo] master 
```

然后一个

```
git push [my_repo] master 
```

在第二次迭代之后（当我认为我只在 .gitignore 中添加了一些东西时），我收到一条错误消息，指出我在需要合并的文件方面遇到了一些问题。我首先`.gitignore`在 gitHub 上创建了不同的版本，我认为这是问题所在并开始合并。

在第三次迭代中（向`.git/info/exclude`文件中添加了一些东西），一切都很顺利，但我看到只有我想要 EXCLUDED 的目录出现在 gitHub 上。回到我的磁盘上，其他所有内容都消失了，包括 netCDF 数据文件......

我试过`git reset --hard master`了，重置后一切都一样。

## 任何人都可以阐明这一点吗？可能的解决方案？

我似乎找不到类似的问题；不过，我想我不可能是第一个这样做的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:19:23.450

编辑：TL；DR 版本：

如果你在 repo 中找到一个你想要被 git 忽略的文件：

1.  仅从 git 存储库中删除它

    `git rm --cached filesToIgnore`

2.  将文件或通配符规则（例如`*.swp`）放入`.gitignore`文件中。然后保存存储库`git commit`

好的，我没有将它们完全拼凑在一起，但让我们分解一下出了什么问题：

第一个。两者之间没有区别`.gitignore`，`.git/info/exclude`除了前者被检入存储库并且用于忽略项目特定文件，而后者用于环境特定文件，例如`.swp`与 vim 临时文件有关的文件。

考虑到这一点，将文件放入`.git/info/exclude`文件只会忽略新文件，而不是已经在存储库之外的文件（我假设 netCDF 文件是）

第二。使用`git pull`，它首先`git fetch`对远程存储库执行 a ，然后尝试合并远程存储库和本地存储库。为什么这是相关的？因为如果您有任何本地未检查的文件，它会抱怨。这是我猜你看到的错误。

第三。由于您强制合并，您可能最终丢弃了任何未签入的文件。这些都没了。由于它们从未被检入 git，因此 git 不知道它们。

编辑：但是，正如 cHao 指出的那样，git 提交中的任何先前文件仍然存在。使用 .查看您的存储库，`git log`并使用 . 临时签出其中的任何一个`git checkout <checksumNumber>`。用于`git reset --hard <checksumNumber>`将存储库永久重置为该提交。

第四。当您在 git 存储库中找到您想要忽略的文件时，您需要做的是正确的过程是

`git rm --cached filesToIgnore`

这会将它们从 git repo 中删除，但不会从工作目录中删除。

然后将它们添加到 .gitignore 文件中，提交更改，您应该一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:25:18.460

首先……把你的东西拿回来。 `master`现在是您在工作副本、删除和所有内容中看到的内容。您需要恢复或重置，具体取决于您是否有其他人从该回购中撤出。（如果你不这样做，任何一个都可以工作。不过，重置会给你一个更清晰的更改日志。）

请注意，如果其他人从您的回购中提取了错误的合并，我这样做的方式是一个坏主意。但如果你是唯一一个使用它的人，或者他们还没有注意到......

*   删除或移动`exclude`文件。这里显然有些古怪，您必须处理的变量越少越好。
*   `git log --summary`. 查找删除文件的提交。我将`abcd1234`在这个例子中使用。）
*   `git reset --hard abcd1234~1`去提交就在它之前。（您不必将整个 SHA 放入；足以消除歧义。）

你的东西现在应该回来了。如果你是唯一一个使用你的 repo 的人，你可以安全`git push --force origin master`地覆盖旧的（无效的）头。

如果其他人从 repo 中撤出，则恢复提交不会引起问题。你可以让他们完成你刚刚所做的重置，这会奏效……但如果你不知道谁在拉动，那么这是 Github 上的默认情况。:P

要恢复，而不是`git reset`上面的，只需说`git revert abcd1234`. 这将撤消该提交的更改。如果文件在多次提交中以某种方式被删除，请一次指定它们以通过一次提交恢复所有内容。无论哪种方式，您都不再需要`--force`with push 了，因为您的本地负责人仍然是 origin 的后代。

至于是什么导致了这一切……已经在 repo 中的文件不应该只是消失，句号。 `.gitignore`并且`exclude`不影响 repo 中已经存在的文件。发生了一些古怪的事情，而且没有完整的历史，几乎不可能准确地拼凑出发生了什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-04T02:03:18.453

我的建议是完全停止使用 git 或 github 并返回使用老式文件夹，并将文件夹的副本保存在云中，并在 USB 上保存另一个副本。

我知道 git 有利于协作，但对于简单的个人项目，我认为它是矫枉过正的。另外，我认为新来的孩子把事情弄得很复杂。.NET CORE、MVVM、MVM、NPM、VUE、REACT、NODE.JS、箭头函数等...

我记得在 2000 年代初期，我是一名 Microsoft 软件工程师，他照本宣科，按照 Microsoft 最佳实践编写所有代码，然后，一切都变得复杂起来，Microsoft 发布了新方法来做同样的旧事情，例如 LINQ to访问数据，当我曾经使用久经考验的企业数据访问应用程序块时。然后他们用模型视图控制器废话而不是 Web 窗体将 ASP.NET 更改为奇怪的东西。然后他们甚至添加了其他前端框架。我理解变化。我知道 IT 是一个不断变化的环境，但我认为为了改变而改变并不是改变的理由。顺便说一句，你知道你今天仍然可以在 UNIX 上运行一个 30 年前的 UNIX 命令，而且它仍然可以工作！我的问题是这样的 当 6 个月后发布“新”的东西来做同样的事情，旧的遗留应用程序可以完美地完成 20 年时，拥有大量投入巨资的遗留应用程序的大型企业如何能够超越水面。我认为 IT 就像没有头的鸡一样到处乱跑，只要考虑到从终端接收输入的 40 年历史的旧大型机类似于现代 JavaScript 应用程序今天使用的 API 调用。40 年前的终端也有“单页应用程序”，虽然并不花哨，但它们仍然是基于后端遗留应用程序“部分刷新”的一页。我认为 IT 就像没有头的鸡一样到处乱跑，只要考虑到从终端接收输入的 40 年历史的旧大型机类似于现代 JavaScript 应用程序今天使用的 API 调用。40 年前的终端也有“单页应用程序”，虽然并不花哨，但它们仍然是基于后端遗留应用程序“部分刷新”的一页。我认为 IT 就像没有头的鸡一样到处乱跑，只要考虑到从终端接收输入的 40 年历史的旧大型机类似于现代 JavaScript 应用程序今天使用的 API 调用。40 年前的终端也有“单页应用程序”，虽然并不花哨，但它们仍然是基于后端遗留应用程序“部分刷新”的一页。

只是我滑稽而真实的 2 美分

# python - Python，Tkinter：如何将函数的输出重定向到笔记本选项卡？

> ID：15298602
> 
> 赞同：1
> 
> 时间：2013-03-08T16:23:39.247
> 
> 标签：python, tkinter

我想知道是否可以将函数的输出重定向到 ttk 笔记本小部件中的选项卡。

我认为它类似于您刚刚使用的列表框小部件，`listbox.insert`但我无法让它工作。

如果这是一个简单的问题，我深表歉意，但它真的难倒我，我无法在网上找到任何有用的材料来帮助我。

提前致谢

我使用python 3.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:42:11.197

Insert 函数的工作方式几乎相同，唯一的区别是使用帧而不是字符串。不过，添加要简单得多，您无需指定索引，只需将其添加到末尾即可。您需要做的就是创建一个框架，将一个文本元素打包到其中，然后将整个内容打包到笔记本中。它看起来像这样

```
noteb = ttk.Notebook( root, width=500, height=300 )
frame1 = tkinter.Frame( noteb )
textbox = tkinter.Text( frame1, put whatever you want to put here )
frame1.pack( expand=1, fill='both' )
noteb.add( frame1, whatever parameters you want )
noteb.pack( expand=1, fill='both' ) 
```

然后，您应该能够直接更改文本框中的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:39:52.107

在某种程度上取决于您用作选项卡的小部件类型，但基本上它不应该有很大不同。只需跟踪您的选项卡小部件并调用适当的方法。

带有两个文本选项卡的示例：

```
from Tkinter import *
from ttk import Notebook

def addText(tab):
    tab.insert(END, "foo! ")

root = Tk()

nb = Notebook(root, height=240, width=480)
tabs = {"foo": [], "bar": []}

for tabname in tabs:
    tab = Text(nb)
    tabs[tabname] = tab
    nb.add(tab, text= tabname)
nb.pack()

Button(root, text= "Add text!", command = lambda: addText(tabs["foo"])).pack()

root.mainloop() 
```

点击“添加文字！” 按钮将一些文本附加到第一个选项卡。

# c++ - 来自 MATLAB Mex 库的链接错误

> ID：15298603
> 
> 赞同：3
> 
> 时间：2013-03-08T16:23:42.170
> 
> 标签：c++, macos, matlab, linker-errors, mex

我在编译 MATLAB Mex 库时遇到了麻烦——特别是来自[这个网站](http://www.wisdom.weizmann.ac.il/~bagon/matlab.html)的“相关聚类优化”代码。

我正在尝试在 OSX 机器上编译，并且正在使用提供的`mexall`函数。这运行以下行：

```
mex -O -largeArrayDims CXXFLAGS="\$CXXFLAGS -Wno-write-strings" QPBO.cpp QPBO_extra.cpp QPBO_maxflow.cpp QPBO_wrapper_mex.cpp QPBO_postprocessing.cpp -output QPBO_wrapper_mex 
```

错误发生在将以下输出链接到 MATLAB 命令行时：

```
ld: duplicate symbol QPBO<int>::GetMaxEdgeNum()    in QPBO_extra.o and QPBO.o
collect2: ld returned 1 exit status

    mex: link of ' "QPBO_wrapper_mex.mexmaci64"' failed. 
```

由此判断，该函数`GetMaxEdgeNum`同时出现在`QPBO_extra.o`和`QPBO.o`中。但是，它实际上只在头文件中定义，`QPBO.h`. 因此，我怀疑包含它的两个源文件都将其作为符号包含在其目标文件中，从而导致链接时出现问题。

（更多信息：每个源文件`#include "instances.inc"`在文件的*最后*还包括一个文件。`instances.inc`显然似乎包括模板的一些特定实例`QPBO`。）

我在这里犯了一个明显的错误吗？我能做些什么来增加编译这段代码的机会？

**编辑**

这是有问题的`GetMaxEdgeNum`函数的定义`QPBO.h`：

```
template <typename REAL> 
    inline int QPBO<REAL>::GetMaxEdgeNum() 
{
    return (int)(arc_max[0]-arcs[0])/2;
} 
```

**编辑 2**

关于我的机器的更多细节：

*   OSX 10.6.8
*   MATLAB R2012a（也有 R2011b）
*   g++ 4.2 或 g++ 4.0（或通过 MacPorts 的 g++ 4.6）

我在下面的“赏金描述”中添加了一些关于我真正想要的答案的详细信息。

**编辑 3**

有一些共识`instances.inc`可能会导致麻烦。这包含在每个`cpp`文件的末尾，它包含以下内容：

```
#include "QPBO.h"

#ifdef _MSC_VER
#pragma warning(disable: 4661)
#endif

// Instantiations

template class QPBO<int>;
template class QPBO<float>;
template class QPBO<double>;

template <> 
    inline void QPBO<int>::get_type_information(char*& type_name, char*& type_format)
{
    type_name = "int";
    type_format = "d";
}

template <> 
    inline void QPBO<float>::get_type_information(char*& type_name, char*& type_format)
{
    type_name = "float";
    type_format = "f";
}

template <> 
    inline void QPBO<double>::get_type_information(char*& type_name, char*& type_format)
{
    type_name = "double";
    type_format = "Lf";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:43:00.333

似乎问题在于某些模板代码位于 .cpp 文件中。

1.  从文件中删除`#include instances.inc`声明。`.cpp`
2.  **将QPBO.cpp**、**QPBO_extra.cpp**、**QPBO_maxflow.cpp**和**QPBO_postprocessing.cpp**中的所有代码移动到头文件**qpbo.h**中。
3.  您现在将拥有一个 .cpp 文件**qpbo_wrapper_mex.cpp**和一个头文件**qpbo.h**
4.  使用以下命令混合文件（在 matlab 中）：

    ```
    >> mex -O -largeArrayDims qpbo_wrapper_mex.cpp 
    ```

应该管用...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T16:30:27.380

更改`GetMaxEdgeNum`为静态函数或将其放入匿名命名空间可能会解决您的问题。

正如您所建议的，原因是它在两个目标文件中都有外部链接，这会导致名称冲突。我建议的解决方案为其提供了内部联系。

*编辑后：*

如果您在类定义中定义方法，它会改变什么吗？像这样：

```
template <typename REAL>
class QPB0 {
    ...
public:
    inline int GetMaxEdgeNum() 
    {
        return (int)(arc_max[0]-arcs[0])/2;
    }
    ...
}; 
```

# mysql - 如何制作一个脚本来从 .xlsx (excel) 文件中转储批量信息？

> ID：15298604
> 
> 赞同：0
> 
> 时间：2013-03-08T16:23:47.680
> 
> 标签：mysql, excel

1.  我需要制作一个脚本来获取包含表格的我的 excel 文件。“行业合作伙伴”。

2.  我数据库中的这张表包含 6 列“id”、“name”、“address”、“lat”、“lng”、“phoneNumber”

3.  我试图弄清楚如何从**仅**包含3 列的 excel 文件中转储表格：“名称”、“地址”、“电话号码”。我没有输入“ID”，因为它（AI）应该是脚本的一部分。

我怎样才能开始制作脚本来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:57:15.973

关于你的评论。我认为您的意思是“他们的“行业合作伙伴”表”而不是“那里的“行业合作伙伴”表”。如果你在编程时犯了这样的错误，后果可能是灾难性的！

无论如何，如果你需要一些可重复的东西，那么你需要我最近为客户写的那种东西。有一个很棒的库叫做 PHPExcel。使用它，您可以编写一个 php 脚本来：

1.  上传 Excel 工作簿
2.  阅读插入表
3.  将每一行插入到mysql表中

对于我为客户所做的应用程序，他们希望完全在 Excel 中管理更新，所以我在 mysql 表中包含了 last_update 日期/时间字段，然后在插入/更新电子表格中的所有行之后，我删除了任何有未在此最新运行中上传。显然，由于您没有在 Excel 文件中包含主键，因此您将无法执行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:37:07.957

如果这是一个卸载，那么我倾向于只写一个 Excel 公式放在每行的末尾，它只是构建一个 mysql INSERT 语句。您将所有行的公式复制下来，然后将结果粘贴到 phpmyadmin 之类的文件中。假设您的数据在 A、B、C 列中，那么公式将类似于：

```
="INSERT INTO table (name, address, phoneNumber) VALUES ('"&A2"','"&B2&"','"&C2&"');" 
```

上面的公式假设您在第 1 行中有标题。

# xml - 如何使用 apache POI 事件库使用具有一般格式的数字单元格进行解释

> ID：15298607
> 
> 赞同：1
> 
> 时间：2013-03-08T16:23:49.440
> 
> 标签：xml, excel, format, cell

我是读取 excel 文件的 Apache POI 事件库，当单元格是数字类型并且没有任何与之关联的格式时，我得到 excel 保存的绝对值。我想知道 excel 如何将其显示为 40.33，因为我需要这样做。我知道 formatlistener ，它在这种情况下不起作用。

我想知道 excel 如何解释具有一般格式的单元格。例如，如果我在一个单元格中有 40.33，它会保存为 40.332999999999998。使用一般格式，当值以 16 位小数保存时，excel 如何知道显示 40.33。

```
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" 
xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" 
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"xmlns:x14ac="http:
//schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac">

<dimension ref="A1:A3"/>

<sheetViews>

<sheetView tabSelected="1" workbookViewId="0">

<selection activeCell="A5" sqref="A5"/>

</sheetView>
</sheetViews>
<sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25"/>
<sheetData>
<row r="1" spans="1:1" x14ac:dyDescent="0.25">
<c r="A1">
<v>40.332999999999998</v>
</c>
</row>
<row r="2" spans="1:1" x14ac:dyDescent="0.25">
<c r="A2" s="1">
<v>20</v>
</c>
</row>
<row r="3" spans="1:1" x14ac:dyDescent="0.25">
<c r="A3" s="2">
<v>0.2</v>
</c>
</row>
</sheetData>
<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/>
<pageSetup orientation="portrait" r:id="rId1"/>
</worksheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T21:03:59.190

解决方案是在 poi 中使用 NumberToTextConverter 类来让数据看起来像 excel 显示的那样。

# paypal - Paypal Developer/Sandbox 新界面：无法使用测试账户登录

> ID：15298608
> 
> 赞同：20
> 
> 时间：2013-03-08T16:23:52.973
> 
> 标签：paypal, paypal-sandbox

我在使用我的测试帐户登录 sandbox.paypal.com 时遇到问题，因为他们更改了界面。

我被迫在 developer.paypal.com（现在是测试版）上创建一个新帐户并导入我的旧测试帐户。我已经这样做了，但所有帐户都不再起作用了！

我无法使用我的商家帐户登录沙盒，并且无法购买。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T16:51:52.833

使用您的 PayPal 凭据验证并登录后，您可以导入您的个人沙箱配置文件。在登录特定沙盒帐户之前，您必须清除浏览器缓存和 cookie。我在 Chrome 和 Firefox 上都遇到了同样的问题。清除缓存/cookie 后，我能够毫无问题地登录到沙盒配置文件。

如果不清除C&C，会收到如下错误：

“此沙盒电子邮件地址不可用。请输入另一个电子邮件地址。”

谢谢，

# fft - 获得正确的采样频率，如何？

> ID：15298611
> 
> 赞同：0
> 
> 时间：2013-03-08T16:23:58.153
> 
> 标签：fft, frequency, nyquist

我试图完全理解采样频率的概念。我从 PaxRomana99 得到了一个有用的答案（[我需要帮助设置正确的频率向量](https://stackoverflow.com/questions/15227950/i-need-help-setting-up-the-correct-frequency-vector)），似乎获得正确频率向量的方法是设置与 fs 相关的时间间隔：

t = 0:1/fs:10；% 10 秒在 fs 采样的数据 y = sin(2*pi*100.*t); 但是，就我而言，我无法控制时间间隔的设置方式，给了我 2 个数组，一个是时间间隔，一个是由该时间间隔产生的正弦波。那么我应该通过时间数组并提取 fs 吗？哪个应该是时间步长之间的间距？我在这里走错路了吗？感谢您的任何提示和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:13:23.857

是的，正如您所建议的，您从时间数组中获得采样频率。它只是 1/（时间采样间隔）。

# ssrs-2008 - SSRS - 引用行组中的文本框值

> ID：15298612
> 
> 赞同：2
> 
> 时间：2013-03-08T16:24:08.733
> 
> 标签：ssrs-2008, reporting-services, ssrs-grouping

我有一个使用 RowGroups 对数据实例进行分组的 tablix。tablix 中的文本框指的是一个字段，因为它与该组数据中的所有其他内容相关。我想在组外创建一个文本框，在 tablix 下方，并让它引用组内该文本框的值。我尝试使用*=ReportItems!GroupTextbox1.Value*引用组文本框，但这返回空。这在 SSRS 中是否可能？提前感谢任何人可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T01:12:10.240

可能不支持这种情况，参考[http://msdn.microsoft.com/en-us/library/dd255285.aspx](http://msdn.microsoft.com/en-us/library/dd255285.aspx)

如果您提供了有关您尝试实现的输出的更多信息（不仅仅是您的代码），我们可能会提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T11:32:37.527

希望这对某人有所帮助：您可以使用报告的自定义代码功能。打开报告属性，然后打开代码选项卡。在那里，您可以编写或拥有代码来保存结果并稍后阅读它们。变量在报告范围内。喜欢：

```
Public Shared Dim MyValue as Double = 0
Public Function SaveMyValue (ByVal s As Double) as Double
   MyValue+=s
   Return s
End Function

Public Function GetMyValue() as  Double
  Return MyValue 
End Function 
```

使用这些功能就像这样，例如。在文本框表达式中： =Code.SaveMyValue(Fields!SomeValue.Value)

# asp.net-mvc - 在“foreach”搜索中插入“where”规则

> ID：15298616
> 
> 赞同：0
> 
> 时间：2013-03-08T16:24:19.383
> 
> 标签：asp.net-mvc, foreach

我需要一些帮助才能将 where 规则放入 foreach 搜索中。我的目标是排除 customerOrder.ERPOrderNumber 以字母 E 开头的订单

我拥有的代码返回特定客户的所有订单。

预先感谢您的帮助。

```
 @foreach (var customerOrder in Model.CustomerOrders)
        { 
            <tr>
                <td class="mavo-order-date">@customerOrder.OrderDate.ToShortDateString()
                </td>
                <td class="mavo-status">@customerOrder.Status
                </td>
                <td class="mavo-order-number">
                    <a href="@Url.Action("OrderHistoryDetail", "Account", new { orderId = customerOrder.ERPOrderNumber })">@customerOrder.OrderNumber</a>
                </td>
                @if (Model.ShowErpOrderNumber)
                {
                    <td class="mavo-erp-order">@customerOrder.ERPOrderNumber
                    </td>
                }
                <td class="mavo-po">@customerOrder.CustomerPO
                </td>
                <td class="mavo-order-total">@customerOrder.OrderGrandTotal.ToCurrency()
                </td>
                <td class="mavo-view">
                    <a class="btn btnStyleA tbm5" href="@Url.Action("OrderHistoryDetail", "Account", new { orderId = customerOrder.ERPOrderNumber })">View Details</a>
                </td>
            </tr>
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:29:13.600

您可以`if`在循环中放置一条语句`foreach`，仅当订单号不以字母开头时才写出表格行`E`。

```
@foreach (var customerOrder in Model.CustomerOrders)
{  
    @if(!customerOrder.ERPOrderNumber.StartsWith("E")) 
    {
       // Markup goes in here
    }
} 
```

或者，您可以使用 LINQ 过滤`CustomerOrders`集合。

```
@foreach(var customerOrder in Model.CustomerOrders.Where(x => !x.StartsWith("E")) 
```

# windows - PyInstaller 创建的应用程序将从 cmd 启动，但不能从资源管理器启动

> ID：15298618
> 
> 赞同：0
> 
> 时间：2013-03-08T16:24:26.547
> 
> 标签：windows, wxpython, wxwidgets, pyinstaller

我在使用 wxWidget/wxPython 和 PyInstaller 制作的应用程序时遇到了一些问题。

我们已将该应用程序编译为适用于 Windows 的单个 exe，但是：

1）在某些机器上它根本不会启动。它不会在应用程序日志中生成错误或任何内容。它几乎立即停止。

2）在某些机器上，它可以从 cmd 启动，但不能从资源管理器启动。再次，同样的行为。它几乎立即停止。我什至没有看到它在进程资源管理器中弹出。

3）在某些机器上它工作得很好。

有什么提示可以让我找出问题所在吗？有没有办法用调试器启动 exe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:43:46.993

您可能需要研究以下几点：

1.  您是否将其编译为“一个文件”？我听说某个 exe 可能会被某些防病毒程序阻止。它使用一些技巧将所有内容都放在一个可执行文件中，这可能被认为是恶意的。
2.  您是否将其编译为 Windows 应用程序（无控制台）？您可能希望启用控制台并在根本不从控制台运行的机器上运行它。这样你可能会明白它为什么会崩溃。

# c++ - 用 OpenCV 校准我的相机

> ID：15298623
> 
> 赞同：0
> 
> 时间：2013-03-08T16:24:44.183
> 
> 标签：c++, visual-studio-2010, opencv, colors, computer-vision

我想使用 applyColorMap 在灰度图像上应用颜色映射，但它似乎没有考虑 IplImage 指针，根据： [http ://docs.opencv.org/trunk/modules/contrib/doc /facerec/colormaps.html](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/colormaps.html)

什么是正确的语法？

别的，相机校准和颜色映射之间有联系吗？这是同一件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:37:08.363

您可以根据OpenCV 文档中的[ColorMaps 页面](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/colormaps.html)`cv::Mat`传递一个to 。`applyColorMap`

查看[此 OpenCV C++ 备忘单](http://opencv.willowgarage.com/documentation/cpp/c++_cheatsheet.html)，我们看到只需将 传递给构造函数即可将 an`IplImage`转换为 a ：`Mat``IplImage``Mat``Mat imgMat(iplimg);`

# .net - 使用 VS2012 数据库项目：无法打开登录请求的数据库“my_database”

> ID：15298624
> 
> 赞同：0
> 
> 时间：2013-03-08T16:24:44.500
> 
> 标签：.net, sql, sql-server, visual-studio-2012, database-project

我正在尝试为现有产品启动并运行 VS2012 数据库项目。我架构比较了我的数据库以填充我的新数据库项目，一切看起来都很好。使用 Visual Studio 似乎可以正常部署，没有错误，但是当我尝试针对新部署的数据库运行我的应用程序时，出现以下错误：

> 无法打开登录请求的数据库“my_database”。登录失败。

我对此进行了广泛的研究，发现了一些我不理解的奇怪行为。如果我在部署数据库后执行以下 sql，一切都会开始工作：

```
DROP SCHEMA [my_app_user] 
GO
DROP USER [my_app_user] 
GO
CREATE SCHEMA [my_app_user]
GO
CREATE USER [my_app_user] FOR LOGIN [my_app_user] WITH DEFAULT_SCHEMA=[my_app_user]
GO
ALTER ROLE [my_app_role] ADD MEMBER [my_app_user];
GO 
```

奇怪的是，这段代码也在我的数据库项目中，完全如图所示，没有 drop 语句。它在我部署时创建了所有这些东西，但它不起作用。另一个奇怪的行为是当我在 Sql Server Management Studio 2012 中打开用户的登录名并查看登录名的用户映射时，它没有被映射。我可以选中我的数据库的复选框，一切看起来都不错，但是当我单击确定并返回同一个窗口时，它不再被选中。运行上面的脚本使用户映射窗口看起来不错。

**更新：**我将登录/模式/用户的创建语句和角色的更改语句移动到数据库项目使用的部署后脚本中，现在它可以很好地发布到数据库。然而，数据库项目似乎希望将这些语句与架构的其余部分放在一起，而不是部署后，所以我仍然想知道我能做些什么来解决这个奇怪的问题。

这里发生了什么，我能做些什么来解决这个问题？谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:03:39.313

这听起来像是权限问题。部署数据库的安全上下文是否有权限运行这条sql语句？

```
DROP SCHEMA [my_app_user] 
GO
DROP USER [my_app_user] 
GO
CREATE SCHEMA [my_app_user]
GO
CREATE USER [my_app_user] FOR LOGIN [my_app_user] WITH DEFAULT_SCHEMA=[my_app_user]
GO
ALTER ROLE [my_app_role] ADD MEMBER [my_app_user];
GO 
```

在 SQL Server 日志中查看数据库正在部署的时间点，并在执行部署的框中查看应用程序日志以查看是否有更详细的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:57:30.130

您需要将用户与部署后脚本中的角色相关联：

[http://msdn.microsoft.com/en-us/library/aa833199(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/aa833199(v=vs.100).aspx)

# php - 如何在 linux 机器上使用独立数据库？

> ID：15298626
> 
> 赞同：0
> 
> 时间：2013-03-08T16:24:46.453
> 
> 标签：php, database, linux, installation

我有一个 linux 机器服务器，我可以在其中使用 php。我只能使用 putty 命令提示符或 FTP 程序连接到它。（基本上访问受限）。有没有办法可以使用免费的数据库（如 mysql）？由于权限，我不认为我可以将它安装在根文件夹上，这就是为什么我想也许有一个数据库工具可以作为独立文件工作，并且每个数据库都作为资源文件创建。这样就不需要安装，您可以将整个内容保存在我可以访问的位置的某个子文件夹中。

这可能吗？

我希望有类似的东西，我下载一个文件，在通过 FTP 程序传输它后将它放在某个文件夹中。然后使用 php 代码创建数据库并插入/删除记录。并且创建的每个数据库都作为文件存储在数据库工具旁边的某个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:31:56.497

我认为使用 sqlite 正是您正在寻找的。

[http://www.sqlite.org/about.html](http://www.sqlite.org/about.html)

# c++ - boost::intrusive 中的线程安全保证

> ID：15298631
> 
> 赞同：0
> 
> 时间：2013-03-08T16:24:49.743
> 
> 标签：c++, boost, c++11, thread-safety

虽然在 的文档的线程安全段落中没有明确提到这种情况`boost::intrusive`，但我想知道在以下情况下是否可以考虑`boost::intrusive::list::front()`安全：

*   可能有一位作家`push_back()`在名单上
*   列表总是至少有一个元素

该列表是自动取消链接类型的。我的直觉告诉我，在这种情况下没有任何理由`front()`而且`push_back()`很不礼貌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:32:55.003

这绝对是一个竞赛条件。

> 只要插入的对象不同，对不同实例具有读或写访问权限的多个线程是安全的。

这里的关键是*不同的实例*。您正在同时读取和写入同一个实例，规范显然不能保证它的安全性。

实施*可能*没问题。我认为直觉上，它可能是。但是，该规范显然根本没有对此做出任何保证，并且您必须假设竞争条件，因为它不能保证。

# php - JavaScript 到 PHP - POST 编码问题

> ID：15298634
> 
> 赞同：1
> 
> 时间：2013-03-08T16:24:56.377
> 
> 标签：php, javascript, post, encoding, utf-8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:27:42.930

你有没有尝试过：

```
utf8_decode() 
```

在服务器端您传递的变量？PHP 可能期待**iso-8859-1**而不是**uft-8**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:30:06.120

原来池塘两边都有问题。这个问题所涉及的 PHP 方面的问题是数据正在通过 GET 请求（url 编码）发送到后端。我已将其更改为 POST 请求。

这允许我在发送 POST 请求的标头时指定 UTF-8 字符集。

# vim - 在 vim 中粘贴文本。繁琐的操作？

> ID：15298635
> 
> 赞同：2
> 
> 时间：2013-03-08T16:24:57.123
> 
> 标签：vim, insert, space, paste, yank

我使用 vim 已经有一年多了，在这段时间里，我从来没有对 vim 处理文本和粘贴文本的方式感到真正舒服（或者也许只是我没有以最有效的方式使用它）

例如，我将单词“World”拉到一个寄存器上，我想将它粘贴在“Hello”之后。（请注意，两个单词中都没有空格）。所以，我会做的是

```
Hello
    | 
```

将光标放在此处，然后按“p”。然后，我最终会得到的是

```
HelloWorld 
```

所以，为了避免这种情况，我总是切换到插入模式，插入一个空格，然后回到正常模式（或者确保被拉出的单词之前有一个空格）。尽管如此，这是非常烦人的行为，我想不出解决方案……我在这里遗漏了什么吗？

建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T16:40:10.823

**选项零**

用你现在拥有的东西生活。

**选项一**

为您的工作流程创建映射。例如

```
nnoremap <leader>p i<space><esc>p 
```

**选项二**

```
:set ve=all 
```

然后您可以将光标移动到任意位置并粘贴

**选项三**

你可以在插入模式下使用`<c-o>`正常模式的东西或`<c-r>`获取寄存器值

我推荐**选项零**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:48:33.003

您可以使用[Smartput ：在放置文本插件时调整空格和逗号](http://www.vim.org/scripts/script.php?script_id=2095)。它修改`p`/`P`命令（可以打开/关闭）。

# autofac - 基于多个构造函数解析 Autofac 工厂

> ID：15298636
> 
> 赞同：2
> 
> 时间：2013-03-08T16:24:59.770
> 
> 标签：autofac

有谁知道使这个测试工作缺少什么？遗憾的是它不能开箱即用。

```
class A { }

class B { public B(A a) { } }

class C { public C(B b) { } }

[Test]
public void SuperFactoryResolutionTest()
{
    var builder = new ContainerBuilder();            
    builder.RegisterType<B>();
    builder.RegisterType<C>();

    using (var container = builder.Build())
    {
        Assert.DoesNotThrow(() =>
        {
            var factory = container.Resolve<Func<A, C>>();
            var x = factory(new A());
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:39:42.520

不，Autofac 不支持此功能。

调用时只能传递直接依赖项`Resolve`。因此，您不能在层次结构链的深处特别指定依赖关系。

无论如何，这违反了控制原则的反转：`C`应该只知道`B`并且不应该知道某处 an`A`被`B`. 因此，当您要求 a 时，`C`您也不应该告诉`A`使用哪个。

但是，您可以通过手动构建解析链来实现类似的效果：

这是你能得到的最接近的：

```
var intermediateFactory = container.Resolve<Func<B,C>>();
Func<A, C> factory = 
    a => intermediateFactory(container.Resolve<B>(TypedParameter.From(a)));
var x = factory(new A()); 
```

# cas - 如何在 CAS 中指定默认查询字符串？

> ID：15298638
> 
> 赞同：1
> 
> 时间：2013-03-08T16:25:05.427
> 
> 标签：cas

我们有 CAS 启用应用程序，我们需要一个要求，即当我们提供用户 ID、密码并单击提交按钮时，默认情况下它应该采用查询字符串（类似于“service=www.casifiedapp.com”）。

什么是更好的解决方案？我需要在哪里更改 CAS 配置。我找不到命令行、操作网址等...

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:34:43.300

您可以编写自己的 AuthenticationHandler 以从查询字符串或其他位置加载服务数据。

看看文档： [https ://wiki.jasig.org/display/CAS/How+To+Write+an+AuthenticationHandler](https://wiki.jasig.org/display/CAS/How+To+Write+an+AuthenticationHandler)

# sql - SQL合并多行的最大值

> ID：15298648
> 
> 赞同：0
> 
> 时间：2013-03-08T16:25:19.803
> 
> 标签：sql, max, rows

假设我有一张桌子

```
-----------------------------------------------------------
| 编号 | 值1 | 值2 | 价值3 |
 -----------------------------------------------------------
| 102 | 10 | 1 | 3 |
 -----------------------------------------------------------
| 102 | 2 | 11 | 0 |
 -----------------------------------------------------------
| 102 | 0 | 9 | 13 |
 -----------------------------------------------------------
| 102 | 3 | 5 | 7 |
 -----------------------------------------------------------

```

对于每个不同的 id，我想在 value1、value2 和 value3 列中返回具有最大值的行，即

```
-----------------------------------------------------------
| 编号 | 值1 | 值2 | 价值3 |
 -----------------------------------------------------------
| 102 | 10 | 11 | 13 |
 -----------------------------------------------------------

```

（当然表中还有102以外的其他id）

我设法通过“分区”来做到这一点，但问题是我必须在 powerbuilder 的数据窗口中使用它，一旦我将它粘贴到那里，整个 IDE 崩溃并且项目被损坏。

我设法创建了一个 sql，它为每一行执行 3 个内部连接，选择返回每列的最大值。

还有其他更简单的方法吗？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:27:01.753

使用`GROUP BY`和`MAX()`

```
SELECT  id,
        MAX(value1) val1,
        MAX(value2) val2,
        MAX(value3) val3
FROM    tableName
GROUP   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1119f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:27:10.147

```
SELECT id, MAX(value1) value1, MAX(value2) value2, MAX(value3) value3
FROM yourtable
GROUP BY id 
```

# c# - 将行插入数据库的快速方法？

> ID：15298651
> 
> 赞同：1
> 
> 时间：2013-03-08T16:25:35.030
> 
> 标签：c#, optimization, insert, parallel-processing, tibco

我正在遍历数据集的行并将其插入到活动空间环境中（由 tibco 提供，它是一个内存数据库）。我就是这样做的。

有没有更快的方法来解决这个问题？

我正在考虑对行进行分区，然后将每个分区并行化，但我不知道这是否会使其更快。

```
System.Threading.Tasks.Parallel.ForEach(
    dataSet.Tables[0].Rows,
    currRow =>
    {
        var tuple = Com.Tibco.As.Space.Tuple.Create();

        for (int i = 0; i < currRow.Values.Length; i++)
        {
            if (currRow.Values[i] != null)
            {
                var k = ConvertToAny(currRow.Values[i].ToString());

                if (k.GetType().IsEquivalentTo(typeof(DateTime)))
                {
                    tuple.Put(dataSet.Tables[0].ColumnNames[i], (DateTime)k);
                }
                else if (k.GetType().IsEquivalentTo(typeof(double)))
                {
                    tuple.Put(dataSet.Tables[0].ColumnNames[i], (double)k);
                }
                else
                {
                    tuple.Put(dataSet.Tables[0].ColumnNames[i], k.ToString());
                }
            }
        }
        try
        {
            inSpace_.Put(tuple);
        }
        catch (Exception e)
        {
        }
    }
); 
```

我正在考虑一次批量处理大约 1000 个，如果有人可以请帮助:(

**编辑：**

List tuplesToAdd = new List(); for (int i = 0; i < dataSet.Tables[0].Rows.Length; i++) { var tuple = Com.Tibco.As.Space.Tuple.Create();

```
 for (int j = 0; j < dataSet.Tables[0].Rows[i].Values.Length; j++)
            {
                if (dataSet.Tables[0].Rows[i].Values[j] != null)
                {
                    var k = ConvertToAny(dataSet.Tables[0].Rows[i].Values[j].ToString());
                    if (k is DateTime)
                    {
                        tuple.Put(dataSet.Tables[0].ColumnNames[j], (DateTime)k);
                    }
                    else if (k is Double)
                    {
                        tuple.Put(dataSet.Tables[0].ColumnNames[j], (Double)k);
                    }
                    else
                    {
                        tuple.Put(dataSet.Tables[0].ColumnNames[j], k.ToString());
                    }
                }
            }

            tuplesToAdd.Add(tuple);

            if (i % 100000 == 0 || i == dataSet.Tables[0].Rows.Length - 1)
            {

                ThreadStart TUPLE_WORKER = delegate
                {
                    inSpace_.PutAll(tuplesToAdd);
                };
                new Thread(TUPLE_WORKER).Start();
                tuplesToAdd.Clear();
            }
        } 
```

这是我尝试做的新方法（通过批处理）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:01:36.970

我不确定，但看起来你可以避免`ToString`在转换代码中使用。也就是说，而不是：

```
var k = ConvertToAny(currRow.Values[i].ToString());

if (k.GetType().IsEquivalentTo(typeof(DateTime))) 
```

可以换成...

```
var k = currRow.Values[i];
if (k is DateTime)
{
    tuple.Put(dataSet.Tables[0].ColumnNames[i], (DateTime)k);
} 
```

这应该可以节省您转换为字符串然后返回的时间。

**为回应评论而添加**

首先，你`ConvertToAny`是不必要的。中的项目`currRow.Values[i]`已经是正确的类型。你只是不知道它是什么类型。除非您说它可能是 a`DateTime`或 a的字符串表示形式`Double`。例如，如果类型*已经*是双精度类型，则没有理由转换为字符串、解析然后再转换回来。也就是说，以下两段代码做同样的事情：

```
object o = 3.14;
var k = ConvertToAny(o.ToString());
if (k.GetType.IsEquivalentTo(typeof(double)) 
```

和

```
object o = 3.14;
if (o is double) 
```

唯一的区别是第二个会快得多。

但是，如果你有

```
object o = "3.14"; 
```

并且您希望将其转换为`double`，那么您必须进行转换。

您的批处理代码必须在添加和更新时锁定列表。否则你会破坏它。我会建议：

```
lock (tuplesToAdd)
{
    tuplesToAdd.Add(tuple);
    if ((tuplesToAdd.Count % 10000) == 0)
    {
        // push them all to the database.
        inspace_.PutAll(tuplesToAdd);
        tuplesToAdd.Clear();
    }
} 
```

当你全部完成时（即`Parallel.Foreach`完成）：

```
if (tuplesToAdd.Count > 0)
{
    // push the remaining items
} 
```

现在，如果您想避免在更新期间阻塞所有线程，您可以发挥一些创意。

首先，创建两个可以锁定的对象：

```
private object lockObject = new Object();
private object pushLock = new Object(); 
```

创建`tuplesToAdd`列表后立即创建。然后，当您要添加项目时：

```
Monitor.Enter(lockObject); // acquires the lock
tuplesToAdd.Add(tuple);
if (tuplesToAdd.Count == 100000)
{
    var tuplesToPush = tuplesToAdd;
    tuplesToAdd = new List<tuple>(10000);
    Monitor.Exit(lockObject);  // releases the lock so other threads can process
    lock (pushLock)  // prevent multiple threads from pushing at the same time
    {
        inspace_.PutAll(tuplesToPush);
    }
}
else
{
    Monitor.Exit(lockObject);
} 
```

这样，当一个线程更新数据库时，其他线程可以在下一次填充列表。

* * *

在我仔细考虑之后，您甚至可能不需要对这项任务使用并行处理。很可能您的大部分时间都花在等待`Put`调用的线程上。使用单个线程对这些进行批处理并批量编写它们可能会比您的原始解决方案执行得更快。您决定的并行版本会更快，但我怀疑它会*更快*。

# neo4j - 识别节点类型

> ID：15298652
> 
> 赞同：0
> 
> 时间：2013-03-08T16:25:46.970
> 
> 标签：neo4j

我有许多不同类型的节点，我的意思是节点上有不同的属性。例如，我有许多节点，它们只有一个 fileName 和 uploadDate 的属性。如果我想检查所有文件名，我只需要做

```
START n=node(*) WHERE has(n.File) RETURN n; 
```

这是最佳实践吗（即查询扁平化的数据库）。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T16:55:53.580

您的查询会扫描所有节点，随着数据集的增长，这将变得更慢。

为了识别某种类型的节点，有两种常见的方法：

## 类型属性

使用描述您的类型的值设置一个名为“type”的属性（或“_type_”fe，如果您想将其标记为系统属性），例如“文件”。

然后你可以通过这样的索引查找节点：

```
start n=node:node_auto_index(type='File') return n; 
```

## 类型节点

将某种类型的节点连接到“类型”节点并查询关系：

```
start type_node=node:node_auto_index(name='File')
match type_node<-[:IS_A]-file
return file; 
```

（此页面[http://www.neo4j.org/learn/try](http://www.neo4j.org/learn/try)上的啤酒图就是一个例子。）

# php - 未定义的变量：新 WAMP 设置上的 _SESSION

> ID：15298655
> 
> 赞同：1
> 
> 时间：2013-03-08T16:25:55.827
> 
> 标签：php, session

每当我尝试访问会话变量时，我都会收到以下错误：

```
Undefined variable: _SESSION 
```

我的登录页面顶部有一个 session_start() 命令（但在任何其他页面上都没有）。

这是在 Windows 2003 Server 上的新 WAMP 设置上，所以我怀疑我可能没有正确配置服务器以进行会话管理。除了下面的设置，我还需要做些什么来启用会话吗？

```
[Session]
session.save_path = "1;c:\inetpub\wwwroot" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:32:31.830

> 我的登录页面顶部有一个 session_start() 命令（但在任何其他页面上都没有）。

那么你应该。您需要调用`session_start()`将使用`$_SESSION`数组的每个连接，而不仅仅是在登录时。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-08T16:30:56.673

将您的`session_start()`命令和任何数据库连接放在一个单独的 php 文件中，然后将其包含在您的所有页面中。

# video.js - ie8 中的 Video.js 闪存回退没有控件？

> ID：15298659
> 
> 赞同：0
> 
> 时间：2013-03-08T16:26:11.117
> 
> 标签：video.js

我最近开始在 html5 中构建，玩弄 video.js。

我的视频可以在除 ie8 之外的所有浏览器中运行。

ie8 中的问题是视频播放但没有控件。

请在下面查看我的代码：-

```
 <!doctype html>
<!--[if IE 8]><html class="ie8" dir="ltr" lang="en"><![endif]-->
<!--[if IE 9]><html class="ie9" dir="ltr" lang="en"><![endif]-->
<!--[if gt IE 9]><!--> <html dir="ltr" lang="en"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta name="author" content="Storm Creative" />

        <title>Ventrica <?php echo $title; ?></title>

        <script src="<?php echo DIRECTORY; ?>assets/scripts/utils/modernizr.min.js"></script>
        <link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
        <script src="http://vjs.zencdn.net/c/video.js"></script>
        <?php foreach ( $stylesheets as $style ): ?>
            <link rel="stylesheet" href="<?php echo $style; ?>" />
        <?php endforeach; ?>

    </head>
    <body>
        <div class="header_img"></div>
        <div class="wrapper">
            <?php include "assets/includes/navigation.php"; flush(); ?>

<div class="video_section">
    <div class="mac">
    <div class="screen"></div>
        <video autoplay="" controls="" loop="" width="310" height="185" class="mac_player video-js vjs-default-skin" id="js-video"  preload="auto" data-setup='{"techOrder": ["html5", "flash"]}'>          <source src="assets/video/large.webm" type='video/webm; codecs="vp8, vorbis"' />
            <source src="assets/video/large.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
            <source src="assets/video/large.ogv" type='video/ogg; codecs="theora, vorbis"' />
            <object id="flash_fallback_1" class="vjs-flash-fallback" width="310" height="185">
                <embed width="310" height="185" src="assets/video/large.swf" type="application/x-shockwave-flash" wmode="transparent"></embed>
            </object>
        </video>
    </div>
    <div class="see_team">
        <h3 class="hidetxt">See Our team in action...</h3>
        <p><b>Watch our video and see our team in action to learn more about our multilingual services, quality assurance and training.</b></p>
        <p>If you are looking for a company to help manage your customer communication then you will want to partner with a contact centre that inspires trust, demonstrates credibility and has already been chosen by numerous “Blue Chip” companies to handle their customer contact...</p>
        <a href="">Choose Ventrica</a>
    </div>
</div>
<script>
    var myPlayer = _V_('js-video');
    _V_("js-video").ready(function(){
        myPlayer.volume(0);
    var onFullScreen = function(){
      if (this.isFullScreen) {
        this.volume(1);
        myPlayer.currentTime(0);
      } else {
        this.volume(0);
      }
    };
    myPlayer.addEvent("fullscreenchange", onFullScreen);
});
</script> 
```

有人遇到过这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T20:45:53.110

I found this thread and a few similar ones... none of the solutions worked for me.

Eventually I figured out the problem (in my case, at least), which involves IE8 not being able to handle `:before` while in IE7 mode. Solution is here: [https://stackoverflow.com/a/22645786/2895604](https://stackoverflow.com/a/22645786/2895604)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:39:04.167

I'm just now seeing that we have a related post. I too, have just about the same issue and am thinking it is CSS based.

Not sure if I should delete my post or mark it as duplicate somehow? Here it is here:

[Video.js CSS Styling Broken in < IE9 - [A.K.A. Controls Hidden]](https://stackoverflow.com/questions/15688042/video-js-css-styling-broken-in-ie9-a-k-a-controls-hidden)

# javafx-2 - Tool for Designing Polygons

> ID：15298660
> 
> 赞同：0
> 
> 时间：2013-03-08T16:26:19.920
> 
> 标签：javafx-2, polygon

I am looking to design a large number of polygon (geometric not 3D) shapes for use in a JavaFX 2 application. At the moment the only way I find to do that is manually enter every point for the polygons into and fxml file. Although this is a very slow process. I can not find a way to use Scene builder for this. When you create a polygon, its initially a triangle, and there is no apparent way of how to add more points.

Is there any free(or cheap) application that allows you to design shapes, and then give you all coordinates for the points ?

Im using OSX but also got win7.

p.s: If this is not the right place for this question please let me know.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:42:53.170

Current version of Scene Builder has poor support for shape manipulation. For polygons you can find a lot of editors by google "free vector editor". You can use Inkscape for example. It supports SVG format which simple to emmbed to JavaFX by java code, fxml or css.

# multithreading - intellij - 不在多线程代码中的所有断点处停止

> ID：15298662
> 
> 赞同：10
> 
> 时间：2013-03-08T16:26:32.207
> 
> 标签：multithreading, intellij-idea, breakpoints

我正在尝试使用以下断点运行以下代码：

```
 new Thread(new Runnable() {
        @Override
        public void run() {
            System.out.println("Starting"); //breakpoint here
        }
    }).start();

    int i = 10;
    i++; //breakpoint here 
```

当此代码仅运行时 i++ 断点被命中...如果我删除那个，另一个线程的断点将被正确命中。为什么会出现这种奇怪的行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-22T08:51:11.193

这记录在[http://www.jetbrains.com/idea/webhelp/breakpoints-2.html](http://www.jetbrains.com/idea/webhelp/breakpoints-2.html)中：

> 在某些情况下，IntelliJ IDEA 不会在断点处停止。考虑以下情况：在一个类的不同方法处设置两个断点，并且将挂起策略设置为全部。当某个断点被命中时，会执行一些单步操作。如果在单步执行另一个线程时遇到第二个断点，IntelliJ IDEA 不会停在那里。

我复制了您的代码示例并重新创建了这种情况。果然，就像文档中所说的那样，在`i++`断点处停止后，如果我按 F8（跳过），程序不会在另一个断点处停止。但是，如果我按 F9（恢复），程序**确实会**在另一个断点处再次停止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-27T07:48:31.600

我刚刚遇到了这个问题，为了其他遇到这个问题的人，这里是这种行为的原因以及如何改变它。

正如 Doron 指出的那样，有关于此的文档。但是，需要注意的**重要**一点是，默认情况下，当到达断点时，JVM 中的所有线程都会暂停。

您所期待的（以及我所期待的）是只有带有断点的线程被挂起。

这不是你想要的，也不是我想要的。

更改此行为（并提供所需的行为）。

1）左键单击边距创建断点。
2) 按 ctrl+shift+F8（调出断点菜单）。
3）选择你的断点。您将看到它的选项。
4) 确保选中“暂停”并选择“线程”单选选项。
5) 单击“设为默认值”按钮。

Now, when you run, you'll see that breakpoints in different threads are hit.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:30:37.980

因为另一个线程被*调度*在后台运行，当 OS 线程调度器决定运行它时，它就会运行。当您确实有一个断点时，它将被击中。

当您只运行代码时，它不一定会启动，因此`i++`会立即命中断点。

# jquery - 如何减去两个angularjs日期变量

> ID：15298663
> 
> 赞同：8
> 
> 时间：2013-03-08T16:26:35.300
> 
> 标签：jquery, angularjs

我对 angularjs 相当陌生，但它就在这里。我可以通过 angularjs 形式的两个日期`dd/mm/yyyy`，但我需要做的是以某种方式减去两个日期以获得两者之间的天数差异。我创建了一个 jquery 函数来执行此操作，但我不知道如何将两个日期传递给该函数。所以我想知道是否有不同的方法来解决这个问题？

我正在尝试根据两个日期之间的天数来设置触发系统，以使某些事物被风格化。例如，如果它在 10 天内我希望它使用**样式 1**，如果它在 20 天内使用**样式 2**，依此类推。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T17:14:09.330

基本的javascript方式：

```
var d1 = new Date('01/16/2013');
var d2 = new Date('02/26/2013');
var milliseconds = d2-d1;
var seconds = milliseconds / 1000;
var minutes = seconds / 60;
var hours = minutes / 60;
var days = hours / 24; 
```

使用 Date 库之一（例如 moment.js）：

```
var d1 = moment("01/16/2013");
var d2 = moment("02/26/2013");
var days = moment.duration(d2.diff(d1)).asDays(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-01T10:35:52.817

您只需将日期转换为时间戳，然后减去。

```
var Date1 = 08/16/2004;
var Date2= 10/24/2005;

var timestamp1 = new Date(Date1).getTime();
var timestamp2 = new Date(Date2).getTime();

var diff = timestamp1 - timestamp2

var newDate = new Date (diff); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-01T19:38:36.640

您可以使用[角矩](https://github.com/urish/angular-moment)来计算差异，使用**amDifference**过滤器：

> 以毫秒为单位获取两个日期之间的差异。参数是日期、单位和 usePrecision。日期默认为当前日期。例子：

```
<span>Difference: {{ dateFrom | amDifference : dateTo : 'days' }} days</span> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T16:35:59.423

我也是一个 angularjs 新手，但你不会通过你的 javascript 视图模型提供属性来处理这个问题吗？

例如，有一个基于日期字段更改的*样式*字段（即，如果差异为 10 天，样式返回样式 1），并希望通过 angularjs 绑定，更新将传播到屏幕。

我认为正确的术语是*计算属性*或*计算属性*

*编辑*

不确定这是否是您要查找的内容，但请参见 fiddle，例如计算日期差异和更改样式均基于视图模型（范围）的属性

`scope.diff`并且`scope.col`是要绑定的 2 个属性

[http://jsfiddle.net/chrismoutray/wfjv6/](http://jsfiddle.net/chrismoutray/wfjv6/)

HTML

```
<script src="http://code.angularjs.org/0.10.4/angular-0.10.4.min.js" ng:autobind></script>
<div ng:controller="ComputedPropertiesCtrl">
    first date <input ng:model="firstdate"> second date <input ng:model="seconddate"> difference {{diff}}
    <div>when the difference is greater than 10 color changes to green</div>
    <div>eg set the second date to 15/01/2013</div>
    <div style="background-color:{{col}};"> State </div>
</div> 
```

JS

```
function ComputedPropertiesCtrl() {
    var scope = this;
    scope.firstdate = '01/01/2013';
    scope.seconddate = '10/01/2013';
    scope.data_before = [];
    scope.differenceInDays = function() {

        var dt1 = scope.firstdate.split('/'),
            dt2 = scope.seconddate.split('/'),
            one = new Date(dt1[2], dt1[1]-1, dt1[0]),
            two = new Date(dt2[2], dt2[1]-1, dt2[0]);

        var millisecondsPerDay = 1000 * 60 * 60 * 24;
        var millisBetween = two.getTime() - one.getTime();
        var days = millisBetween / millisecondsPerDay;

        return Math.floor(days);      
    };
    scope.color = function() {
        return (scope.differenceInDays() > 10) ? 'green' : 'red';
    };

    scope.$watch('[firstdate, seconddate]', function(currScope,newVal,oldVal) {
        scope.data_before = oldVal;
        scope.diff = scope.differenceInDays();
    });

    scope.$watch('[firstdate, seconddate]', function(currScope,newVal,oldVal) {
        scope.data_before = oldVal;
        scope.col = scope.color();
    });
} 
```

CSS

```
h2 { position: fixed; right: 10px; top: 10px; color: red; background:white;z-index:1000; }
input { width: 100px; }
div { margin: 10px; padding: 10px; } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-08T01:29:59.360

这行得通，这里有 2 个完美的 JavaScript 日期函数，你永远不应该没有......

```
// Returns the days between a & b date objects...
function dateDiffInDays(a, b) {
    var _MS_PER_DAY = 1000 * 60 * 60 * 24;
    // Discard the time and time-zone information.
    var utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());
    var utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());
    return Math.floor((utc2 - utc1) / _MS_PER_DAY);
}

// Calculate how many days between now and an event...
function daysTill(e) {
    var eventE = new Date(e);
    var today =  new Date();
    return dateDiffInDays(today, eventE);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-25T07:30:06.187

* * *

**JavaScript 库确实非常有用且易于使用：**

* * *

```
var parsedServerOutTime = moment(serverOutTime, "HH:mm:ss");
var parsedServerInTime = moment(serverInTime, "HH:mm:ss");

var milliseconds= parsedServerOutTime.diff(parsedServerInTime) //default milliseconds
var days = moment.duration(parsedServerOutTime .diff(parsedServerInTime )).asDays();// For days 
```

**`asWeeks();` `asMonths();` `asYears();`等等更多细节检查[http://momentjs.com/docs/](http://momentjs.com/docs/)**

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-10-29T18:25:27.747

我尝试了下面的一个，它对我有用

```
var selecteddate = new Date($rootscope.selectvalue);
$scope.firstDate = selecteddate .getTime();
$scope.SecondDate = new Date().getTime(); 
```

选定日期是从日历中选择的日期，它来自父范围。第二个日期将是今天的日期。稍后我会使用moment diff找到差异。

```
var differenceinDays=parseInt(
      moment.duration(
        moment($scope.firstDate).diff(
          moment($scope.SecondDate)
        )
      ).asDays()
    ); 
```

我正在使用 parseInt 因为我只想返回整数值

希望这有效

# java - 如何在安卓模拟器和手机中接收数据包

> ID：15298668
> 
> 赞同：0
> 
> 时间：2013-03-08T16:27:04.860
> 
> 标签：java, android, udp

我正在尝试从 PC 接收一些 udp 数据包，但它不工作。我有一个[活动](http://pastebin.com/BiSDRctY)、一个[接收线程](http://pastebin.com/4BztabE3)和一个[服务器线程](http://pastebin.com/ADU9U5tC)。57111 端口在模拟器中被重定向。我先启动接收线程，然后启动服务器线程，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:00:22.303

我已经使用外部套接字模拟器“SocketTest v 3.0.0”和通过 telnet 进行的端口重定向完成了这项工作，它比在同一应用程序之间`Server`和`reviever`在同一应用程序中交替更现实和更简单。因此，如果您想这样进行：

1.  下载`SocketTest`它是免费的

2.  运行你的安卓应用程序（只是服务器线程）

3.  从您的主机执行 telnet 重定向：

    ```
    Telnet localhost <Port of you'r emulator> (5554 for me)
    redir add udp:5000:6000 
    ```

4.  去 udp 中`SocketTest`发送 udp 消息到 5000 端口

如果您的侦听器工作正常，您将收到该消息，我希望这会有所帮助。

问候

# java - Java 间歇性对等体未通过身份验证异常

> ID：15298677
> 
> 赞同：1
> 
> 时间：2013-03-08T16:27:23.737
> 
> 标签：java, ssl, vert.x

所以我设置了一个针对我的 vertx.io 服务器运行的 JMeter 测试，当测试执行时，偶尔会抛出一个“Peer not authenticated”异常。

通过谷歌搜索大多数人建议我禁用信任证书，但显然这不是问题，因为 JMeter 客户端显然连接并能够发送请求，但偶尔会抛出异常。还有一些其他 SSL 异常也会间歇性抛出。

有什么想法吗？

# magento - 如何在 magento 中生成错误以导致结帐失败？

> ID：15298678
> 
> 赞同：0
> 
> 时间：2013-03-08T16:27:29.943
> 
> 标签：magento, checkout, skinning

我是一名 magento 前端开发人员，我需要为失败的结帐页面设置样式，但我不知道如何访问它，有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T04:42:01.607

[遵循此处](https://magento.stackexchange.com/a/836/15128)显示的快速核心代码更改后

> 去`Mage_Checkout_OnepageController::successAction()`
> 
> 注释行`$session->clear();`。现在您可以下单并随时刷新页面。

对于成功页面的样式，只需通过测试订单，一旦您进入成功页面，只需将 url 从更改`/checkout/onepage/success/`为`/checkout/onepage/failure/`

**不要忘记撤消对核心代码的修改以避免死刑！**

# php - PHP/Ajax 联系表单仅在成功时清除输入字段

> ID：15298686
> 
> 赞同：0
> 
> 时间：2013-03-08T16:27:46.713
> 
> 标签：php, ajax, forms, validation, contact

我有一个简单的工作 php/ajax 联系表单，带有验证功能。我想在VALID提交后清除所有字段，所以我尝试了 $("#myform")[0].reset(); 请参阅下面的代码。它很好地清除了表单，但问题是当验证不成功时它也会清除所有内容，这真的很烦人。

这是HTML：

```
<form id="myform" method="post" action="sendEmail.php">

<div id="container">
    <div id="main">

    <p>Name / Company <span>*</span></p> 
    <input type="text" name="name" id="name" />

    <p>Email Address <span>*</span><p> 
    <input type="text" name="email" id="email" />

    <p>Offer / Message <span>*</span></p> 
    <textarea name="message" id="message" rows="6"></textarea>  

    <p><input type="submit" name="submit" id="submit" value="Send Request" /></p>

    <p><ul id="response" /></p>

    </div>
</div> 
```

和PHP：

```
<?php

$name = trim($_POST['name']);
$email = $_POST['email'];
$message = $_POST['message'];

$site_owners_email = 'sample@yahoo.com'; 
$site_owners_name = 'Joe';

if (strlen($name) < 3) {
    $error['name'] = "* Please enter your name.";   
}

if (!preg_match('/^[a-z0-9&\'\.\-_\+]+@[a-z0-9\-]+\.([a-z0-9\-]+\.)*+[a-z]{2}/is', $email)) {
    $error['email'] = "* Please enter a valid email address";   
}

if (strlen($message) < 4) {
    $error['message'] = "* Please leave an offer / message.";
}

if (!$error) {

    require_once('phpMailer/class.phpmailer.php');
    $mail = new PHPMailer();

    $mail->From = $email;
    $mail->FromName = $name;
    $mail->Subject = "Subject"; 
    $mail->AddAddress($site_owners_email, $site_owners_name);
    $mail->Body = $message;

    $mail->Send();

    echo "<li class='success'> Thanks for your request!<br> We will respond to you as soon as possible. </li>";

} # end if no error
else {

    $response = (isset($error['name'])) ? "<li>" . $error['name'] . "</li> \n" : null;
    $response .= (isset($error['email'])) ? "<li>" . $error['email'] . "</li> \n" : null;
    $response .= (isset($error['message'])) ? "<li>" . $error['message'] . "</li>" : null;

    echo $response;
} # end if there was an error sending 
```

?>

最后，js：

```
$(function() {

var paraTag = $('input#submit').parent('p');
$(paraTag).children('input').remove();
$(paraTag).append('<input type="button" name="submit" id="submit" value="Send Request" />');

$('#main input#submit').click(function() {
    $('#main').append('<img src="images/ajax-loader.gif" class="loaderIcon" alt="Loading..." />');

    var name = $('input#name').val();
    var email = $('input#email').val();
    var message = $('textarea#message').val();

    $.ajax({
        type: 'post',
        url: 'sendEmail.php',
        data: 'name=' + name + '&email=' + email + '&message=' + message,

        success: function(results) {
            $('#main img.loaderIcon').fadeOut(1000);
            $('ul#response').html(results);
            $("#myform")[0].reset();

        }
    }); // end ajax
}); 
```

});

我是 php 和 js 的新手，所以我已经粘贴了我的所有代码，如果我做错了什么，对你来说更容易。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:39:42.380

嗯，一个好主意是从 PHP 返回一个 JSON 对象，这样您就可以检查 Javascript 上的错误。

PHP：

```
$result = array(
            "error" => false, 
            "html" => null
);
if(!$is_valid){
    $result["error"] = true;
    $result["html"] = "<b>Error</b>";
}else{
    $result["error"] = false;
    $result["html"] = "<b>Success</b>";
}
echo json_encode($result); 
```

jQuery

```
$.ajax({
    type: 'post',
    url: 'url.php',
    data: {/*put a cool data here*/},
    dataType : "json", // return a json object

    success: function(result) {
        if(result.error){
            /* On error stuff */
            $("body").append(result.html);
        }else{
            /* On success stuff */
            $("body").append(result.html);
        }
    }
}); 
```

# cakephp - CakePHP json 输出

> ID：15298687
> 
> 赞同：0
> 
> 时间：2013-03-08T16:28:00.487
> 
> 标签：cakephp, json

我试图在我的视图中将我从控制器获得的内容输出为 json，但我认为我的输出很奇怪。

在网上我搜索 json 并得到如下输出：

```
{"menu": {
  "id": "file",
  "value": "File",
  "popup": {
    "menuitem": [
      {"value": "New", "onclick": "CreateNewDoc()"},
      {"value": "Open", "onclick": "OpenDoc()"},
      {"value": "Close", "onclick": "CloseDoc()"}
    ]
  }
}} 
```

但是我的只是没有格式化，看起来像这样。

```
[{"Customer":{"id":"1","first_name":"Ian","last_name":"Smith","address_1":"10 High Streets","address_2":"","town_city":"Plymouth","county":"Devon","postcode":"PL1 2JD"}},{"Customer":{"id":"2","first_name":"David","last_name":"Smith","address_1":"52 Low Avenue","address_2":"","town_city":"Exeter","county":"Devon","postcode":"EX2 1KO"}}] 
```

我怎样才能输出它，使它看起来像第一个？

编辑

控制器

```
$user = $this->Customer->find( 'all' );
$this->set( 'users', $user ); 
```

看法

```
<?php echo json_encode($user); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:24:30.527

在输出步骤中美化你的 json 是没有意义的。如果这很重要，您可以使用外部工具来制作漂亮的 json。

另外，考虑在 Cake 中使用 ( [JSON View )。](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)简而言之，您设置了一个特殊的视图变量，其中包含您想要 jsonify 的内容：

1.  为了局部效果，写在你的行动中**`Router::parseExtensions()`**
2.  指定包含要输出的数据的变量**`$this->set('_serialize', array('response'));`**（在 json 中，将有一个名为“response”的根对象，其内容为 $response 变量）。

使用这种方法，您无需创建视图文件 - 如果请求具有“Accept: application/json”标头，则会自动输出 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:59:24.657

这些 json 响应的唯一区别是第一个是带有子对象的 JSON 对象，第二个是带有子对象的 JSON 对象数组。

下面的代码检索客户的所有记录。当您将其编码为 json 对象时，它被编码为 Cutomers 数组

```
$this->Customer->find( 'all' ); 
```

您可以通过以下方式实现第一个响应

```
$this->Customer->find( 'first' ); 
```

上面的代码只会产生一个 Customer 对象。

# jquery - jQuery UI - 在最后一个值之前注入/添加字符

> ID：15298690
> 
> 赞同：0
> 
> 时间：2013-03-08T16:28:19.537
> 
> 标签：jquery, html, jquery-ui, slider, add

基本滑块，范围为 10-1000，每步之间有 20 个（10-30-50 等）。

我想要做的是，在最后一步（1000）的值之前添加/注入一个字符。

不是，它返回为“560 kr/h”或“400 kr/h”，这一切都很好。但是当在 1000 时，我希望它变成“>1000 kr/h”。

下面是我的设置。

HTML

```
<label for="value1" class="value">Mitt pris:</label>
<input type="text" id="value1" />kr/h
<div id="slider1"></div> 
```

jQuery

```
$(function() {
    $( "#slider1" ).slider({
        value: 300,
        min: 10,
        max: 1000,
        step: 20,
        slide: function( event, ui ) {
            $( "#value1" ).val(ui.value );}
    });
        $( "#value1" ).val( $( "#slider1" ).slider( "value" ) );

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:36:03.490

虽然还有其他方法可以做到这一点，`if`但设置值后的简单语句应该是您所需要的：

```
 slide: function( event, ui ) {
        $( "#value1" ).val(ui.value );
        if ($( "#value1" ).val == 1000) { $( "value1" ).val(">1000");} } 
```

这是一种更简洁的方式，但可能更难阅读

```
 slide: function( event, ui ) {
        $( "#value1" ).val(ui.value == 1000 ? ">1000" : ui.value );} 
```

实际上使这个 settor 成为一个函数是一个很好的设计，所以你可以在你设置的两个地方使用它`value1`：

```
$(function() {
    var setValue = function(value) {
        $("#value1").val(value == 1000 ? ">1000" : value); };
    $( "#slider1" ).slider({
        value: 300,
        min: 10,
        max: 1000,
        step: 20,
        slide: function( event, ui ) {
            setValue(ui.value);}
    });
    setValue($( "#slider1" ).slider( "value" ) );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:36:33.087

尝试：

```
$(function() {
    $( "#slider1" ).slider({
        value: 300,
        min: 10,
        max: 1000,
        step: 20,
        slide: function( event, ui ) {             
            $( "#value1" ).val(ui.value == 1000 ? '> 1000' : ui.value );
        }
    });
    $( "#value1" ).val( $( "#slider1" ).slider( "value" ) );
}); 
```

这是[小提琴](http://jsfiddle.net/3DSb6/1/)

# android - 从 ui 线程中的 alertdialog onclick 事件调用方法

> ID：15298691
> 
> 赞同：0
> 
> 时间：2013-03-08T16:28:20.567
> 
> 标签：android

我在调用 RunOnUiThread 中的 AlertDialog 的 OnClick 事件中的方法时遇到问题。

*下面的逻辑是在applyUpdate()*方法执行时显示 ProgressDialog 。如果下载失败或仍在进行中，该方法返回 0。用户可以选择重新启动或继续下载。

The issue is that when *Restart* is selected the AlertDialog remains on the screen (with the button clicked).

doDownload() 是否在对话框关闭之前启动，是线程问题还是其他问题？

```
public void doApply(View view){
    progressDialog = ProgressDialog.show(UpdateForm.this, "", "Applying update...");

    runOnUiThread(new Runnable() {

        @Override
        public void run() {
            try{
                applyUpdate = nnEngine.applyUpdate();
            } catch (Exception e) {
                // Handle exception
            }

            // Check update result.
            progressDialog.dismiss();
            switch (applyUpdate) {
// Other cases removed.....
                case 0:
                    // Download in progress or failed.
                    AlertDialog.Builder inprogDlg = new AlertDialog.Builder(UpdateForm.this);
                    inprogDlg.setTitle("Download in progress or failed.");

                    inprogDlg.setPositiveButton("Continue download", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();

                        // Wrong button may be displayed.
                        notifyUser(null, checkDownloadButton);
                    }
                });

                inprogDlg.setNegativeButton("Restart download", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        doDownload(getWindow().getDecorView().findViewById(android.R.id.content));
                    }
                });

                inprogDlg.create().show();
                break;
            }
        }
    });
} 
```

# c# - 如何在列表框中的项目之间添加填充？

> ID：15298701
> 
> 赞同：5
> 
> 时间：2013-03-08T16:28:42.690
> 
> 标签：c#, winforms, visual-studio-2012, listbox, padding

我想知道是否有办法在我的订单项之间添加填充。这是一种用于平板电脑的表格，每个表格之间的空间可以更容易地选择不同的项目。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T16:38:22.333

有一个`ItemHeight`属性。

您必须将`DrawMode`属性更改`OwnerDrawFixed`为使用 custom `ItemHeight`。

当您使用时，`DrawMode.OwnerDrawFixed`您必须“手动”绘制/绘制项目。

这是一个示例：[组合框外观](https://stackoverflow.com/questions/3789596/combobox-appearance)

来自上面链接的代码（由[max](https://stackoverflow.com/users/356716/max)编写/提供）：

```
public class ComboBoxEx : ComboBox
{
    public ComboBoxEx()
    {
        base.DropDownStyle = ComboBoxStyle.DropDownList;
        base.DrawMode = DrawMode.OwnerDrawFixed;
    }

    protected override void OnDrawItem(DrawItemEventArgs e)
    {
        e.DrawBackground();
        if(e.State == DrawItemState.Focus)
            e.DrawFocusRectangle();
        var index = e.Index;
        if(index < 0 || index >= Items.Count) return;
        var item = Items[index];
        string text = (item == null)?"(null)":item.ToString();
        using(var brush = new SolidBrush(e.ForeColor))
        {
            e.Graphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.ClearTypeGridFit;
            e.Graphics.DrawString(text, e.Font, brush, e.Bounds);
        }
    }
} 
```

# - 反应可可

> ID：15298703
> 
> 赞同：0
> 
> 时间：2013-03-08T16:28:45.183
> 
> 标签：

ReactiveCocoa (RAC) 是受函数响应式编程启发的 Swift 框架。它提供了用于组合和转换值流的 API。

# phpfox - getUserBy() phpfox

> ID：15298704
> 
> 赞同：0
> 
> 时间：2013-03-08T16:28:49.530
> 
> 标签：phpfox

在工作期间，我在 phpfox 脚本中遇到了一件非常奇怪的事情

我在表用户中放了一个新字段..这个字段是默认值为0的tinyint，并开始致力于让用户能够通过链接插入值，最后它成功了，但是当我试图通过getUserBy获取这个值时('name_of_the_field') 它给了我一个空值，尽管我在数据库表中检查它并发现该字段有一个值......所以你能帮我吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:09:44.160

getUserBy() 不会获取用户表中的每个字段，它会获取预定义的列列表。您将需要以不同的方式获取此字段或将插件写入挂钩“user.service_auth___construct_query”，以便加载您的新字段，我没有尝试过，但我相信它应该作为插件工作钩：

```
$this->database()->select('u.my_new_field,'); 
```

# linux - 是否可以使用 madwifi 驱动程序干扰 wifi 中 MAC 协议的标头？

> ID：15298708
> 
> 赞同：0
> 
> 时间：2013-03-08T16:28:51.630
> 
> 标签：linux, linux-kernel, wifi, driver

我正在使用 madwifi ath5k 驱动程序。基本上我想要做的是改变 MAC 协议的行为以实现网络编码。在我项目的某些部分，我需要在 802.11 MAC 协议的标头中添加一些字段，我的问题是：

1.  是否可以在帧头中间添加字段，并延长总帧长度？我尝试在序列号字段后添加 20 个字节，但这会导致一些问题（ping 停止工作）。
2.  如果可能，应该更改哪些数据结构以及如何更改？

谢谢！

奥马尔！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:07:48.903

您不能修改或添加到 802.11 MAC 标头，那里的每个字段都有特定的大小和位置。如果你改变它，你就破坏了协议。这并不意味着它是错误的，它只是意味着你正在实现一个不同的协议。为了工作，它必须由参与通信的所有各方（包括调解人，如 AP）来实施。如果您想符合 802.11，则需要在帧主体内添加任何专有信息，而不是在标头内。它通常通过由相应协议扩展（例如 CCX）解析的专有信息元素来完成。

# php - 使用带有 PHP/MYSQL 的 HTML 前端的 Ajax 驱动的用户组系统

> ID：15298711
> 
> 赞同：0
> 
> 时间：2013-03-08T16:28:52.583
> 
> 标签：php, javascript, html, jquery

我是新手，请原谅我的无知。

我正在制作一个 Ajax 驱动的用户联系人组 Web 应用程序，该应用程序根据指定的分配组存储联系人。创建用户联系人后，用户可以通过下拉框选择各种联系人组。然后，这将显示所选组内每个用户的摘要以及每个用户联系人的各个复选框。然后，用户可以使用这些复选框选择单个或多个用户联系人，从而得到用户的详细描述（选择 * users contact_group = family）。用户必须能够在不刷新页面的情况下删除单个或多个联系人。

我很难循环和显示带有复选框的联系人，并且无法同时删除多个用户。注意我只使用一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:40:47.533

这里有几件事：

**您可以使用一个简单的选择器获得选中的复选框：**

```
var inputs = $(':checkbox:checked'); 
```

**在结果循环中生成复选框：**

```
<?php
while($row = mysql_fetch_array($result)) :
    ?>
    <tr>
        <td><input type="checkbox" name="delete[]" value="<?= $row['User_Id']; ?>" /></td>
        <td><?= $row['First_Name']; ?></td>
        <td><?= $row['Last_Name']; ?></td>
        <td><?= $row['Email_Address']; ?></td>
    </tr>
    <?php
endwhile; 
```

**此时您的删除处理程序是一个简单的`WHERE..IN`查询：**

```
// NOTE: Use an abstraction library to sanitize user-submitted data for the query
$filtered_delete_ids = implode(',', $_POST['delete']);
$query = "DELETE FROM `users` WHERE `User_Id` IN (".$filtered_delete_ids.")"; 
```

# javascript - 在局部视图中保持滚动事件

> ID：15298712
> 
> 赞同：1
> 
> 时间：2013-03-08T16:28:59.817
> 
> 标签：javascript, ajax, asp.net-mvc, partial-views

有没有办法在部分视图中保留滚动事件？我有一个使用滚动事件的表，该事件是在索引页面内启动的部分的 ajax 表单发布之后所需的。有没有办法在不将 js 放入局部视图本身的情况下做到这一点。

滚动事件在桌子上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:31:52.533

我想出了一个解决此类问题的方法，因为滚动事件不会冒泡，我将滚动事件及其所需的元素放在一个冒泡的事件中，从而在呈现 Ajax 部分视图后保持滚动事件。

例子：

```
 $("#parent").on("click", "#child", function (event) {

            $.ajax({
                url: urlForPost,
                type: "POST",
                data: $("form").serialize(),
                contentType: "application/x-www-form-urlencoded;charset=ISO-8859-15"
            }).done(function (allData) {
                //First Remove white space for IE9 
                var expr = new RegExp('>[ \t\r\n\v\f]*<', 'g');
                allData = allData.replace(expr, '><');

                $("#parent").html(allData);
                ResizeContent();
              $("#id1").scroll(function () {
               $("#id2").scrollLeft($("#id1").scrollLeft());
           });
            }).fail(function (jqXHR, textStatus) {
                alert("Request failed: " + textStatus);
            });
          } 
```

# c# - 提醒选定的用户 SignalR

> ID：15298720
> 
> 赞同：1
> 
> 时间：2013-03-08T16:29:26.057
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-4, signalr

我正在为我的应用程序中的警报功能寻找替代`jQuery`解决`Ajax`方案`MVC4`。我偶然发现`SignalR`它看起来可以解决我的解决方案，但是我听说你可以向某个客户而不是全部广播，我似乎找不到一个例子。

基本上我想知道的是：

1.  在设置时，clientID 可以是登录时的应用程序 UserID 吗？
2.  您是否能够向特定角色和/或用户 ID 列表广播
3.  是否有任何示例可以帮助证明上述内容？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:12:49.127

1.  使用 SignalR，您可以管理自己的用户身份。SignalR 用 ConnectionId 代表每个用户，但最终取决于开发人员将其映射到现有用户配置文件。
2.  是的，您可以向群组或特定客户广播。您可以将客户端添加到组中，然后将单个消息同时发送给多个人，或者您可以发送给特定客户端。
3.  正如评论中指出的那样，JabbR 是一个很好的例子。此外，要快速入门 SignalR，请查看[快速入门中心页面](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)。最后 SignalR 是开源的，因此请查看[源代码](https://github.com/SignalR/SignalR)和[wiki](https://github.com/SignalR/SignalR/wiki)。

# css - CSS3 菜单边框 - 右箭头效果

> ID：15298723
> 
> 赞同：1
> 
> 时间：2013-03-08T16:29:30.463
> 
> 标签：css, css-shapes

我想使用css3实现右箭头效果，我已经尝试了很多次但没有运气。

[http://jsfiddle.net/ffCDw/](http://jsfiddle.net/ffCDw/)

```
.menu li {
list-style-type: none;
display:inline;

}
.menu li a {
padding: 0 20px;
background: green;
color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:10:18.547

我遇到了同样的问题，边框的方法对我来说不够满意，特别是如果你想使用 :hover ...

**HTML**

我在 div 中放了一个跨度，这仅用于箭头。

```
<div class="arrow">
    I am the first arrow
    <span></span>
<div> 
```

**CSS**

span 获取的位置：绝对；

![div 和跨度](../Images/23cb7de67f993c1c58410d1835ea58d7.png)

这里 span:after 被定位和转换（-45deg），所以它指向右边。

![跨度：之后](../Images/d23154e4ba458c0fe72a29b5ef6a0198.png)

最后，通过设置跨度溢出：隐藏，只有左边可见的部分指向右边......

![设置跨度溢出后：隐藏](../Images/35442f107bef4b3184d28804f30556dc.png)

```
span {
    content: "";
    position: absolute;
    top: 0;
    right: -1.625em;
    width: 2em;
    height: 2.5em;
    overflow: hidden;
    z-index: 10;
}
span:after {
    content: "";
    position: absolute;
    top: -3px;
    left: -1em;
    width: 2em;
    height: 2.5em;
    -webkit-transform: rotate(-45deg);
    -moz-transform: rotate(-45deg);
    -o-transform: rotate(-45deg);
    -ms-transform: rotate(-45deg);
    transform: rotate(-45deg);
    border: 1px solid #777;
    background: #60bee7;
} 
```

我希望这是可以理解的。唯一剩下的就是设置*div*和*span:after*的样式，如果你想在这些元素上定义 :hover 状态。

请注意不要给*跨度*任何背景颜色

这是一个工作示例：

[http://jsfiddle.net/marczking/PyKFT/](http://jsfiddle.net/marczking/PyKFT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:00:45.693

如果要在这些元素的右边缘添加箭头：

[更新的小提琴](http://jsfiddle.net/ffCDw/2/)

我们正在使用 CSS 在您的锚标记后添加一个三角形元素，并带有此块：

```
.menu li a:after{
    height:0;
    width: 0;
    top: 0;
    left: 100%;
    position:absolute;
    content: ' ';
    border-left: solid 5px green;
    border-top: solid 9px transparent;
    border-bottom: solid 9px transparent;
} 
```

然后增加`li`元素的左边距以考虑这些占用的额外空间。您可以通过增加`border-left`属性的像素大小来调整三角形的长度，但一定要相应地增加边距`li`。

# django - 如何在设置 satchmo 时首次出现模板语法错误？

> ID：15298725
> 
> 赞同：0
> 
> 时间：2013-03-08T16:29:32.123
> 
> 标签：django, satchmo

我正在尝试使用站点中给出的说明安装 satchmo。除了管理部分，一切正常。我点击的那一刻`http://<SERVER_NAME>/admin`，我收到以下错误：

> 'admin_static' 不是有效的标签库：找不到模板库 admin_static，尝试 django.templatetags.admin_static,satchmo_store.shop.templatetags.admin_static,django.contrib.admin.templatetags.admin_static,django.contrib.comments.templatetags.admin_static ,sorl.thumbnail.templatetags.admin_static,livesettings.templatetags.admin_static,satchmo_utils.thumbnail.templatetags.admin_static,satchmo_store.contact.templatetags.admin_static,tax.templatetags.admin_static,product.templatetags.admin_static,payment.templatetags.admin_static,satchmo_utils .templatetags.admin_static,app_plugins.templatetags.admin_static

我不知道为什么它说它应该默认存在。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:22:30.593

根据源文档，自 2012 年 7 月以来，Satchmo 目前需要 Django 1.4+。（现在修复了主页上过时的要求。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:38:19.773

您可能正在使用`Django 1.5`which 已放弃对`admin_static`satchmo 尝试查找的标签的支持。降级到`1.4.5.`你应该没问题。

# ssas - 报表生成器：如何在上周之前的所有日期的日期层次结构上创建过滤器表达式？

> ID：15298729
> 
> 赞同：1
> 
> 时间：2013-03-08T16:29:45.657
> 
> 标签：ssas, reporting-services, mdx, reportbuilder3.0

使用`Report Builder 3.0`连接到`TFS 2012`分析数据库时，需要在日期层次结构上创建过滤器，以匹配 14 天前的所有日期（特别是工作项维度的创建日期层次结构）。

我猜我需要将运算符设置为 MDX 并在`DATEADD`某处输入表达式，但我不知道如何正确使用语法。

我试过了：

```
[Date].[Date].membervalue <= DATEADD("d",-14,[Date].[Calendar].CurrentMember) 
```

在过滤器表达式框中，但它抱怨该`CURRENTMEMBER`函数需要层次结构表达式并且使用了成员表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:14:34.770

我没有尝试在数据集中进行过滤，而是在数据集中获取所有内容并创建过滤器作为报告的一部分（在数据集、数据集属性、过滤器下，然后我能够使用 DateAdd 和 Now 函数来获取什么我需要。

# windows - 从 Git Bash 调用 notepad++

> ID：15298732
> 
> 赞同：46
> 
> 时间：2013-03-08T16:29:56.233
> 
> 标签：windows, command-line, notepad++, msysgit, git-bash

我在 Windows 7 中使用[msysgit](http://msysgit.github.com/)。如何从 Git Bash 调用 notepad++，就像我们使用默认记事本一样？

比如像

name@usename 记事本 textfile.txt

相反，我希望文件用记事本++打开。

**注意：**我已将 notepad++ 添加到我的 PATH 中，但仍无法从命令行调用它。

**编辑**

我在**.gitconfig**中试过这个-->

[别名] notepad='C:/Program Files/Notepad++/notepad++.exe'

但不工作。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-05-13T22:32:09.170

因此，默认情况下您不会有 .bashrc 文件，因此只需键入以下内容导航到您的主目录：

```
cd ~ 
```

使用 vim（或您喜欢的任何编辑器）创建或编辑 .bashrc：

```
vim .bashrc 
```

这是我必须添加到我的行（我运行的是 64 位操作系统，所以如果你不是，请不要完全复制）

```
alias notepad="/c/Program\ Files\ \(x86\)/Notepad++/notepad++.exe" 
```

如果您的 Windows 副本是 32 位，那么它应该如下所示

```
alias notepad="/c/Program\ Files/Notepad++/notepad++.exe" 
```

最后，关闭并重新打开您的终端/bash（或者，如前所述，运行`source ~/.bashrc`），瞧！

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-11-16T05:40:32.597

这些是实现目标的更快方法

```
start notepad++ 
start notepad++ <filename>
alias np='start notepad++'
np <filename> 
```

尝试和测试，就去做吧！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-11T03:50:40.673

我用 32 位 Notepad++ 为我的 64 位机器添加了这个。

```
$ cd ~
$ vim .bash_profile 
```

将此添加到文件中，然后保存：

**64 位系统**

```
alias npp="/c/Program\ Files\ \(x86\)/Notepad++/notepad++.exe" 
```

**32 位系统**

```
alias npp="/c/Program\ Files/Notepad++/notepad++.exe" 
```

现在您应该可以通过输入使用 notepad++ 打开任何文件

```
$ npp [file_name] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-08T16:41:56.933

我相信 git-bash 是一个真正的 bash shell，所以当它启动时，它会`.bashrc`从某个地方运行一个文件（很可能是你的主目录或 git-bash 开始的目录）。查找该文件，当您找到该文件时，在某处为 notepad++ 添加别名行：

`alias notepad="/c/Program\ Files/Notepad++/notepad++.exe"`

当然，在此处使用您到 Notepad++ 的实际路径。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-14T19:28:50.607

@SageMage 的回答是正确的。

只是提醒。在 .bashrc 中进行更改后，您需要关闭并重新打开 GitBash 才能激活它。

PS：两年后，我希望这有帮助！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-02-28T15:39:34.890

下面[**列出了 Udacity**](https://www.udacity.com/wiki/ud775/sublime)在 Git 和 GitHub 上的课程。它对我有用：

1.  检查 PC 上 Notepad++ 的位置后，在 Git Bash 中运行以下命令。

    ```
    echo 'alias npp="C:/Program\ Files\ \(x86\)/Notepad\+\+/notepad\+\+.exe"' >> ~/.bashrc 
    ```

    请注意我必须如何转义空格和括号等字符。如果您不确定是否应该转义，您可以转义任何字符。还要确保使用您想要的别名；我选择了`npp`。

2.  关闭并重新打开 Git Bash

3.  输入`npp`Git Bash，**如果它打开了，那么你就可以开始了。**如果没有，请尝试以下几点：
4.  通过在 Git Bash 中运行以下命令来测试*.bashrc*

    ```
    source ~/.bashrc 
    ```

5.  重试键入`npp`以启动 Notepad++。如果 Notepad++ 没有启动，请检查在步骤 1 中创建的文件*~/.bashrc的内容。*

6.  为确保 . 每次打开 Git Bash 时都会加载*.bashrc文件内容，编辑**~/.bash_profile*并添加以下两行。（参考）

    ```
    if [ -r ~/.profile ]; then . ~/.profile; fi

    case "$-" in *i*) if [ -r ~/.bashrc ]; then . ~/.bashrc; fi;; esac 
    ```

7.  关闭并重新打开 Git Bash。输入`npp`Git Bash 以检查它是否正确启动。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-30T20:33:17.670

首先，如果您还没有创建任何 .bashrc 配置文件或 .bash_profile 使用 vim 或其他人提到的任何其他编辑器创建一个

或者

如果您没有任何可以与 git bash 一起使用的编辑器，但通过打开记事本或 notepad++ 编辑器并将文件保存在主目录中手动制作一个。

注意：您可以使用以下命令检查您的主目录

```
 cd ~

 pwd 
```

我的 Notepad++ 路径是 C:\Program Files\Notepad++\notepad++.exe

因此，要转到记事本++目录的任何目录，我必须转到根目录，然后转到所需的路径。所以这是我必须添加到我的 .bash_profile 的行

```
alias note="//\/c/Program\ Files/Notepad++/notepad++.exe" 
```

'//' 把它带到根目录

**PS：**

*   您可能需要根据目标目录（notepad++ 目录）更改路径
*   “Program Files”目录应该写成“Program\ Files”。
*   如果您的 Notepad++ 目录位于 Program Files (x86) 中，则使用“Program\ Files\ (x86)”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-29T14:08:18.663

在您的 .bash 个人资料中添加

> 别名 myeditor="'C:\\Program Files (x86)\\Notepad++\\notepad++.exe'"

给出“\\”而不是“\”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-03T10:46:03.960

1.  在您的系统/项目上打开 Git Bash 并在 Git Bash 中键入以下命令

    `git config --global core.editor "'C:/Program Files/Notepad++/notepad++.exe' -multiInst -notabbar -nosession -noPlugin"`

2.  按 Enter 键，如果没有出现错误，您已成功将 Notepad++ 设置为 Git Bash 中的文本编辑器。您也可以通过键入命令来检查它

    `git config --global core.editor`

[![在此处输入图像描述](../Images/e2c27b2ce5c38d06105a0eda64ff2c74.png)](https://i.stack.imgur.com/wa5oE.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-08T17:03:27.230

我将 Notepad++ 文件夹添加到我的路径中，所以我可以输入`notepad++`

```
$ which notepad++
/c/Program Files (x86)/Notepad++/notepad++ 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-13T11:21:00.920

这个配置对我有用

```
editor = \"/c/Program Files (x86)/Notepad++/Notepad++.exe\" -multiInst 
```

multiInst 参数只是为了使它对您已经打开记事本++ 的交互式编辑更友好。（如果 Notepad++ 已经打开并且您再次运行该过程，它会将文件添加到您现有的实例中，然后立即退出，这意味着您已经完成了 git）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-08T02:01:45.207

我遇到了找不到命令的问题。我发现那是因为我在我的工作目录下做所有这些 vim .bashrc 。看来我必须在 Git Bash 主目录下这样做......

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-08-06T05:55:57.750

在你的 git bash 中添加：

```
alias npp='notepad++ -multiInst -nosession' 
```

我希望这行得通。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2013-03-11T03:49:38.563

别名与`git`命令一起使用，因此使用 OP 中的别名，您应该能够运行`git notepad`. 不过，我认为这不是您想要的。如果您正确地将 notepad++ 添加到您的 PATH 变量中，那么您应该能够执行`notepad++`. 您可以通过运行来检查这一点`which notepad++`。如果这没有给出完整路径`notepad++`，则 PATH 设置不正确。

# c# - 在datagrid wpf中绑定组合框的动态数据

> ID：15298733
> 
> 赞同：0
> 
> 时间：2013-03-08T16:30:07.980
> 
> 标签：c#, wpf

```
<Window x:Class="Practise.DropdownGrid"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:staticData="clr-namsespace:ComboBoxDGWPF"
        Title="DropdownGrid" Height="700" Width="600" WindowState="Maximized" Background="#f0f0f0">
    <Window.Resources>
        <staticData:StatusList x:Key="StatusList" />  // Error of Namespace
    </Window.Resources>

    <StackPanel VerticalAlignment="Center" Width="300">

        <DataGrid AutoGenerateColumns="False" Height="366" Name="DemoGrid" ItemsSource="{Binding objLabel}" >
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Subject}" Header="Demo Label" Width="*">

                </DataGridTextColumn>
                <DataGridTemplateColumn Header="Drop Down">
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox Name="ComboBoxName" ItemsSource="StatusList" SelectedItem="Status"  >                                

                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </StackPanel>
</Window> 
```

**后面的代码 **

```
namespace Practise
{
    /// <summary>
    /// Interaction logic for DropdownGrid.xaml
    /// </summary>
    public partial class DropdownGrid : Window
    {
        public DropdownGrid()
        {
            InitializeComponent();
            List<MainContent> objMainContent = new List<MainContent>{
                new MainContent { Subject = "Maths", Status = "Open" },
                new MainContent { Subject = "Science", Status = "Closed" },
                new MainContent { Subject = "Computers" , Status = "high"}
            };

            DemoGrid.ItemsSource = objMainContent;
        }
        public class MainContent
        {
            public string Subject { get; set; }
            public string Status { get; set; }
        }
        public class StatusList : List<string>
        {
            public StatusList()
            {
                this.Add("Open");
                this.Add("Closed");
                this.Add("High");
                this.Add("Low");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:20:02.440

你不能在 中使用嵌套类`Xaml`，`StatusList`必须是它自己的类而不是嵌套在里面`DropdownGrid`

```
namespace Practise
{
    /// <summary>
    /// Interaction logic for DropdownGrid.xaml
    /// </summary>
    public partial class DropdownGrid : Window
    {
        public DropdownGrid()
        {
            InitializeComponent();
            List<MainContent> objMainContent = new List<MainContent>{
                new MainContent { Subject = "Maths", Status = "Open" },
                new MainContent { Subject = "Science", Status = "Closed" },
                new MainContent { Subject = "Computers" , Status = "high"}
            };

            DemoGrid.ItemsSource = objMainContent; 
        }
    }

    public class MainContent
    {
        public string Subject { get; set; }
        public string Status { get; set; }
    }

    public class StatusList : List<string>
    {
        public StatusList()
        {
            this.Add("Open");
            this.Add("Closed");
            this.Add("High");
            this.Add("Low");
        }
    }
}

<Window x:Class="Practise.DropdownGrid"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:staticData="clr-namsespace:Practise"
        Title="DropdownGrid" Height="700" Width="600" WindowState="Maximized" Background="#f0f0f0">
    <Window.Resources>
        <staticData:StatusList x:Key="StatusList" />  // Error of Namespace
    </Window.Resources>

    <StackPanel VerticalAlignment="Center" Width="300">

        <DataGrid AutoGenerateColumns="False" Height="366" Name="DemoGrid" ItemsSource="{Binding objLabel}" >
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Subject}" Header="Demo Label" Width="*">

                </DataGridTextColumn>
                <DataGridTemplateColumn Header="Drop Down">
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox Name="ComboBoxName" ItemsSource="{StaticResource StatusList}" SelectedItem="{Binding Status}"  >                                

                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </StackPanel>
</Window> 
```

# jquery - 如果我们单击图像，如何找到 span html？

> ID：15298735
> 
> 赞同：0
> 
> 时间：2013-03-08T16:30:15.307
> 
> 标签：jquery

`Descriptions`如果我们点击如何获取 名称`<img src="../Images/Checkmark.ico"`

```
<li id="liRightDescriptions" style="display: list-item;">
         <span><span>Descriptions</span>
        <img src="../Images/Checkmark.ico" class="checkImage"></span>
    </li> 
```

我厌倦了这个：-

```
$('.checkImage').live('click', function (event) {
        debugger;
        event.preventDefault();
        var name = $(this).prev().html(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:32:06.277

尝试：

```
$('.checkImage').click( function () {
    var name = $(this).prev().html();
    alert(name)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:34:14.277

该`live()`功能已弃用，并已替换为`on()`, 使用：

```
$('body').on('click', '.checkImage', function(){
    var text = $(this).prev('span').text();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:33:43.220

您可能应该使用`.siblings()`选择器（[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)）

举个例子 ：

```
$('.checkImage').live('click', function (event) {
  var name = $('.checkImage.').siblings('span').html();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T16:35:13.597

尝试这个

```
$('.checkImage').click(function() {
    var name = $(this).prev().html();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T16:36:34.213

这可能会起作用，除非您的图像中没有关闭**/**，也许还有更多。顺便说一句……使用 .click() 比使用 .on() 慢……并且 .live() 已贬值。

我让它工作了，所以这里有一个固定的小提琴：

[http://jsfiddle.net/digitalextremist/QT66f/](http://jsfiddle.net/digitalextremist/QT66f/)

基本相同，但我删除了您可能实际上不需要的东西。如果您这样做，请重新添加它们。

```
$('.checkImage').on('click', function (event) {
        var name = $(this).prev().html();
        alert( name )
}) 
```

和 HTML：

```
<li id="liRightDescriptions" style="display: list-item;">
    <span>
        <span>Descriptions</span>
        <img src="../Images/Checkmark.ico" class="checkImage" />
    </span>
</li> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T16:33:03.770

不要使用`live`它的折旧

```
$('body').delegate('.checkImage','click',function(){
alert($(this).prev().html());

}); 
```

# javascript - 如何使用 phonegap 在 iOS 应用程序中打开网页？

> ID：15298737
> 
> 赞同：7
> 
> 时间：2013-03-08T16:30:22.507
> 
> 标签：javascript, html, ios, url, cordova

我想在我的 iOS phonegap 应用程序中只有一个视图。

该视图将是一个网页。

如何使用特定的 url 加载这个唯一的视图？

我想你是通过 javascript 做到的，如果是的话怎么做？

*我不是 html/javascript 脚本编写者，我只开发原生 iOS 应用程序，但我需要用 phonegap 测试一些东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-10T05:14:11.910

**d0nparaalias** ,

1.  如果`index.html`要从远程服务器加载 main(Cordova's)，请编辑`config.xml`文件并更改

    `<content src="index.html" />`

    为

    `<content src="http://192.168.1.4:8080/www/index.html" />`

    例如。它将`index.html`从位于 192.168.1.4 的 Web 服务器加载。

2.  如果您想在加载您的应用程序后立即打开一个网站，您可以使用[InAppBrowser](http://cordova.apache.org/docs/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)，正如您已经注意到的那样。

    `window.open(url, target, options);`

    在这里您可以选择`target`（根据 Cordova docs 2.5.0）：

    2.1。`_self`你会得到类似注意的东西，在这种情况下
    ![在此处输入图像描述](../Images/8d8c0ec51c501e86ac972bf5dfaf4e33.png)
    你没有任何控件可以返回。`index.html`

    2.2\. `_blank`— 显示带有关闭按钮的模态视图控制器
    ![在此处输入图像描述](../Images/8923e471b198a718355de68961f83ba1.png)

    2.3\. `_system`— 在 Safari.app 中打开
    ![在此处输入图像描述](../Images/c92bc200f4e6f9584895b540987e1405.png)

有关更多信息，请访问[文档](http://cordova.apache.org/docs/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)和[wiki](http://wiki.apache.org/cordova/InAppBrowser)。

希望能帮助到你。

BR。
尤金

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:34:20.253

现在在 iOS 上称为 Apache Cordova 的 PhoneGap 默认只允许您使用文件 URL。这意味着您必须加载本地 .html 文件。如果要使用 http:// URL 打开远程页面，则需要添加自定义本机代码来告诉 WebView 加载远程 URL。

# iphone - 如何将 UIScrollView 添加到 iOS 应用程序中的视图？

> ID：15298742
> 
> 赞同：0
> 
> 时间：2013-03-08T16:30:28.043
> 
> 标签：iphone, view, ios6, uiscrollview

我已经构建了一个使用单一视图的小型 iOS 6 应用程序。但是，我想添加更多功能，因此需要更多空间。我认为最好的方法是添加一个 UIScrollView。

如何将这样的 UIScrollView 添加到我的视图中？我是否必须删除我的视图中的所有按钮、标签等，然后添加一个 UIScrollView，然后将所有这些按钮、标签等放在那个 UIScrollView 中？我认为这会起作用，但有没有更简单的方法可以做到这一点？（也许没有删除我认为的所有内容）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:18:58.747

是的，您可以在不删除按钮、标签等的情况下向 UIScrollView 添加视图。

将滚动视图添加到现有视图：

1.  将 UIScroll View 绘制并拖放到现有 View
2.  选择视图中的所有控件，如按钮、标签等；除了 UIScroll 视图
3.  将所有选中的组件拖入 UIScroll View

如果您有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:40:07.070

在滚动视图上添加所有视图，例如：

```
[scrollview addSubView:button]; 
```

最后将此滚动视图添加到主视图：

```
[self.view addSubView:scrollview]; 
```

我认为这会有所帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:44:29.370

以编程方式你必须

```
[scrollview addSubView:button]; 
```

代替`[self.view addSubView:button];`

在情节提要或 xib 中，您可以将按钮拖放到滚动视图上。

希望这会有所帮助。

# java - 使用 InputStreamReader 仅获取部分文本

> ID：15298747
> 
> 赞同：0
> 
> 时间：2013-03-08T16:30:35.690
> 
> 标签：java, inputstreamreader

我正在从 InputStreamReader 阅读，但我只得到了应该出现的文本的前 10,000 个字符。知道问题可能是什么吗？如果这门课没有解决方案，我的替代方案是什么？

我发现了有关 InputStreamReader 的信息：“缓冲区大小为 8K。” （[http://developer.android.com/reference/java/io/InputStreamReader.html](http://developer.android.com/reference/java/io/InputStreamReader.html)）。这可能是答案吗？

任何指针都非常感谢

```
 StringBuilder sb = new StringBuilder();  

    BufferedReader br = new BufferedReader(new InputStreamReader(  
      httpcon.getInputStream(),"utf-8"));  
    String line = null;  
    while ((line = br.readLine()) != null) {  
        sb.append(line);               
    }                  
    br.close();  
    result = sb.toString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:34:37.903

8K 缓冲区意味着 8000 个字节，因为一个字符是一个字节，这似乎对您的问题有意义。但令人困惑的是，你得到了 10,000 个字符。

# c# - 如何使用 AjaxFileUpload 将图像文件流式传输到 SQL 数据源？

> ID：15298750
> 
> 赞同：0
> 
> 时间：2013-03-08T16:30:43.407
> 
> 标签：c#, sql-server, sql-server-2008-r2, asp.net-ajax, ajaxcontroltoolkit

我想使用 . 将多个文件上传到 SQL 数据库中`AjaxFileUpload`。我有一种上传单个文件的方法；在 aspx 页面中：

```
<asp:FileUpload ID="file_Image" runat="server"/> 
```

在 aspx.cs 页面中：

```
protected void UploadFile(object sender, EventArgs e)
{
    FileUpload FileUpload1 = file_Image;

    // Read the file and convert it to Byte Array
    string filePath = file_Image.PostedFile.FileName;
    string filename = Path.GetFileName(filePath);

    if (FileUpload1.HasFile && FileUpload1.PostedFile != null)
    {
        Stream fs = file_Image.PostedFile.InputStream;
        BinaryReader br = new BinaryReader(fs);
        Byte[] bytes = br.ReadBytes((Int32)fs.Length);}} 
```

但是，我如何使用类似的东西`AjaxFileUpload`，甚至可以从 Ajax 控件流式传输这样的图像数据？感谢一百万分享您的知识！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:50:13.843

[参考新`AjaxFileUpload`控件`AjaxToolKit`][1] [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx)

这个新的 AjaxFileUpload 控件支持一次上传多个文件。但 IE10 或 Chrome 最新版本支持此功能有一些限制。

这个很靠谱，我在用这个。

**将 AjaxFileUpload 文件内容转换为 sql varbinary 数组的简单方法：**

```
protected void AjaxFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
byte[] image = e.GetContents();
} 
```

# c# - 如何使用会话制作登录页面

> ID：15298753
> 
> 赞同：0
> 
> 时间：2013-03-08T16:30:44.367
> 
> 标签：c#, asp.net, sql-server

我正在尝试编写一个基于`ASP.Net`. 当我使用*用户名*和*密码*创建登录页面，并连接到`SQL-server`.

但是当我输入正确的用户名和密码时。它需要点击登录两次才能登录。登录后，当我返回登录页面时。无论我试图在用户名和密码文本框中输入什么。系统会一直让我登录。听说`session`可以帮忙，但不知道怎么用。

有没有人可以帮助我？或者请给我一些可用的代码示例？

谢谢

吉米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:05:01.863

我支持@GojiraDeMonstah 的建议，并且还建议您尽可能使用Microsoft 的开箱即用（OOTB）功能来处理网站安全（即身份验证、授权、用户管理、密码重置等）。当一切都为您服务时，没有理由去重新发明轮子。您甚至可以扩展现有功能来创建您自己的自定义身份验证提供程序，但您确实希望避免尝试从头开始编写一个，特别是如果您不熟悉这些东西。

Microsoft 提供了无数的工具和教程，让您可以轻松设置所有这些东西。不要尝试创建自己的数据库，除非你真的真的必须这样做。只需使用他们为您提供的那个，并以此为起点。

[这](http://www.asp.net/mvc/tutorials/older-versions/security/authenticating-users-with-forms-authentication-cs)是另一个很棒的资源，它提供了一个更直观的教程，向您展示它是多么容易。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:27:50.253

像这样写代码

FirstPage.aspx（在您的第一页登录按钮单击）

```
protected void Login_Click(object sender, EventArgs e)
{
    Session["UserName"] = txtUserName.Text;//Store username in session
} 
```

SecondPage.aspx（在下一页登录后）

```
protected void Page_Load(object sender, EventArgs e)
{
    LabelUserName.Text = Session["UserName"].ToString();//Show username on a label
} 
```

希望能帮助到你 ....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:37:06.803

提供用户名和密码（凭据）然后使用提供的名称和密码来验证用户的过程称为身份验证。如果您使用 google asp.net 身份验证，您将获得数不胜数的结果。这是一个好的开始 --> [http://support.microsoft.com/kb/301240](http://support.microsoft.com/kb/301240)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-04T19:52:34.040

我发现最简单的方法是[在此处下载此示例中提供的示例页面。](https://www.codeproject.com/Articles/21474/Easy-way-to-create-secure-ASP-NET-login-using-Sess)

使用**Global.asac**文件，这样您就不必向应用程序中的每个页面添加登录代码。

在文件“Global.asax”中，在函数“Session_Start()”中定义您的会话

```
protected void Session_Start(Object sender, EventArgs e)
{
     //The first Session "Logged" which is an indicator to the
     //status of the user
     Session["Logged"]="No";
     //The second Session "User" stores the name of the current user
     Session["User"]="";

     //The third Session "URL" stores the URL of the
     //requested WebForm before Logging In
     Session["URL"]="Default.aspx";
} 
```

在每个页面中，您只需要经过身份验证的访问来检查用户是否被记录，如下所示：

```
private void Page_Load(object sender, System.EventArgs e)
{
    if(Session["Logged"].Equals("No"))
    {
         ....
    }
    else
    {
         ....
    }
} 
```

在您的**Login.aspx**页面中，使用如下函数检查数据库中的用户名和密码：

```
if(CheckUser(UserNametxt.Text.Trim()) && CheckPassword(Passwordtxt.Text.Trim())
{
    ....
}

else
{
    ....
} 
```

在您的代码隐藏中，通过连接到您的数据库并从登录页面传递变量来定义函数 CheckUser() 和 CheckPassword()。

[在此处下载示例文件。](https://www.codeproject.com/KB/aspnet/SessionLogin/SessionLogin.zip)

# java - AMQP - 兔子 MQ 使用

> ID：15298755
> 
> 赞同：3
> 
> 时间：2013-03-08T16:30:51.413
> 
> 标签：java, api, jms, rabbitmq, amqp

这可能是一个非常基本的问题。但我有点困惑。

我知道`RabbitMQ`是一个`AMQP`经纪人（意思是`RabbitMQ`实现/使用`AMQP`）。我使用了 RabbitMQ 提供的客户端库（jar）。这是否意味着我使用了客户端 API/库`AMQP`“内部”使用的协议`RabbitMQ`来连接到 RabbitMQ 代理？关于使用还有什么我需要知道的`AMQP`吗？

还是我需要遵循不同的路线才能使用`AMQP`？`AMQP`除了使用任何消息代理（如 RabbitMQ、Apache QPid 等）的 API 之外，开发人员还关心如何使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:06:56.400

> > 我使用了 RabbitMQ 提供的客户端库（jar）。这是否意味着我使用了 RabbitMQ 客户端 API/库“内部”使用的 AMQP 协议来连接到 RabbitMQ 代理？

是的，您使用过 AMQP 协议（​​可能）；RabbitMQ 内部没有使用 AMQP。它使用 AMQP 将消息从您的应用程序发送到 RabbitMQ 并从 RabbitMQ 发送到（您的）其他应用程序；或相反亦然。

> > 或者我需要遵循不同的路线来使用 AMQP？

除了使用 API，您还可以将其用作 Apache Camel 或 Spring Integration 的扩展；它更整洁，您可以在应用程序的更多部分使用它。实际上，只要您尊重协议，您如何使用并不重要。

> > 除了使用任何消息代理（如 RabbitMQ、Apache QPid 等）的 API 之外，开发人员如何关心使用 AMQP？

AMQP 是一种协议，就像 HTTP 一样；除了 API 之外，它还定义了消息格式，并具有路由或队列等特性，由协议提供服务，而不是由实现 API 的应用程序提供服务。

# c++ - 忽略返回值（返回对象）会发生什么情况？

> ID：15298760
> 
> 赞同：1
> 
> 时间：2013-03-08T16:31:07.557
> 
> 标签：c++, return-value, copy-constructor

我正在通过 Thinking in C++-Bruce Eckel 中的这个特定示例。我可以理解**语句 1（在评论中提到）和语句 2** ，但是即使函数声明和定义也没有返回，我也很难理解**语句 3**需要返回一个对象以用于复制目的。现在这里实际发生了什么？对于其他两个陈述（1和2），我可以推断出*编译器阻止了位复制，因为我们在类中指定了一个复制构造函数，而是通过我们为函数内部传递的对象以及函数返回的对象定义的复制构造函数来处理它。就在函数结束之前，函数内的临时对象被复制为返回值，然后被破坏*。我是对的吗？

```
#include <fstream>
#include <string>
using namespace std;
ofstream out("HowMany2.out");
class HowMany2 {
    string name; // Object identifier
    static int objectCount;
    public:
    HowMany2(const string& id = "") : name(id) {
        ++objectCount;
        print("HowMany2()");
    }
    ~HowMany2() {
       --objectCount;
       print("~HowMany2()");
    }
    // The copy-constructor:
    HowMany2(const HowMany2& h) : name(h.name) {
       name += " copy";
       ++objectCount;
       print("HowMany2(const HowMany2&)");
    }
    void print(const string& msg = "") const {
       if(msg.size() != 0)
       out << msg << endl;
       out << '\t' << name << ": "<< "objectCount = "<< objectCount << endl;
    }
};
int HowMany2::objectCount = 0;
// Pass and return BY VALUE:
HowMany2 f(HowMany2 x) {
    x.print("x argument inside f()");
    out << "Returning from f()" << endl;
    return x;
}
int main() {
    HowMany2 h("h");//statement 1 
    out << "Entering f()" << endl;
    HowMany2 h2 = f(h);//statement 2
    h2.print("h2 after call to f()");
    out << "Call f(), no return value" << endl;
    f(h);//statement 3
    out << "After call to f()" << endl;
} 
```

根据 Eckel ，输出为：

```
HowMany2()
h: objectCount = 1
Entering f()
HowMany2(const HowMany2&)
h copy: objectCount = 2
x argument inside f()
h copy: objectCount = 2
Returning from f()
HowMany2(const HowMany2&)
h copy copy: objectCount = 3
~HowMany2()
h copy: objectCount = 2
h2 after call to f()
h copy copy: objectCount = 2
Thinking in C++ www.BruceEckel.com
Call f(), no return value
HowMany2(const HowMany2&)
h copy: objectCount = 3
x argument inside f()
h copy: objectCount = 3
Returning from f()
HowMany2(const HowMany2&)
h copy copy: objectCount = 4
~HowMany2()
h copy: objectCount = 3
~HowMany2()
h copy copy: objectCount = 2
After call to f()
~HowMany2()
h copy copy: objectCount = 1
~HowMany2()
h: objectCount = 0 
```

还有为什么我们不能为返回值分配额外的存储空间，以便我们可以在函数调用之前将它们存储在那里。它可以替代使用引用吗？先感谢您！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:34:29.227

由于忽略了函数的返回值，因此没有复制构造函数调用。
请注意，即使可能需要副本，大多数编译器也可以在某些情况下 通过**复制省略来避免复制构造函数调用。**

由于`x`对象是函数的本地对象（*存在按值传递*），`x`因此一旦函数范围`{ }`结束就会被销毁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:38:07.140

> 对于其他两个语句（1 和 2），我可以推断出编译器会阻止位复制，因为我们在类中指定了一个复制构造函数，而是通过我们为函数内部传递的对象定义的复制构造函数来处理它至于函数返回的对象。就在函数结束之前，函数内部的临时对象被复制为返回值，然后被销毁。我是对的吗？

在 C++ 中：

1.  临时是从返回的对象*移动构造*的（如果你没有定义移动构造函数，这将是一个复制构造）；然后，
2.  分配返回值的对象是从返回值移动分配（如果使用`t = f()`）或移动构造（如果使用`T t = f()`）（如果未定义移动分配运算符，则移动分配变为复制分配，并且如果未定义移动构造函数，则移动构造变为复制构造）；然后，
3.  临时的被破坏了。

> 即使函数声明和定义要求返回一个对象以用于复制目的，当没有返回时也很难理解语句 3

如果您只是不使用返回值，则编译器没有真正的理由调用任何复制构造函数。从函数返回时，您返回的对象将超出范围，仅此而已。

如果您在此处看到对复制构造的调用，那可能是由于编译器未能优化上述第 2 步和第 3 步（*允许*但不*要求*编译器忽略调用）。

# c# - 处理所有错误

> ID：15298763
> 
> 赞同：0
> 
> 时间：2013-03-08T16:31:14.773
> 
> 标签：c#, asp.net-mvc, handleerror

祝大家有美好的一天！试图解决一个问题。我使用一种方法来处理网站上的所有错误（此方法在一个人的博客上找到）

**全球.asax**

```
protected void Application_Error(object sender, EventArgs e)
{
    HttpContext ctx = HttpContext.Current;
    Exception ex = ctx.Server.GetLastError();
    ctx.Response.Clear();

    RequestContext rc = ((MvcHandler)ctx.CurrentHandler).RequestContext;
    IController controller = new CategoryController(); 
    var context = new ControllerContext(rc, (ControllerBase)controller);

    var viewResult = new ViewResult();

    var httpException = ex as HttpException;
    if (httpException != null)
    {
        switch (httpException.GetHttpCode())
        {
            case 404:
                viewResult.ViewName = "Error404";
                break;

            case 500:
                viewResult.ViewName = "Error500";
                break;

            default:
                viewResult.ViewName = "Error";
                break;
        }
    }
    else
    {
        viewResult.ViewName = "Error";
    }

    viewResult.ViewData.Model = new HandleErrorInfo(ex, context.RouteData.GetRequiredString("controller"), context.RouteData.GetRequiredString("action"));
    viewResult.ExecuteResult(context);
    ctx.Server.ClearError();
} 
```

当我在工作室中启动项目时，导致错误。我在该代码中遇到异常：

```
RequestContext rc = ((MvcHandler)ctx.CurrentHandler).RequestContext; 
```

**例外：**

> 无法将“ ”类型的对象转换为“ ”`System.Web.DefaultHttpHandler`类型`System.Web.Mvc.MvcHandler`

一旦我停止调试（Shift + F5）。此方法效果很好并且可以处理任何错误。但是在项目开始时，导致错误。寻找这些主题的解决方案，但没有找到这个问题。请帮忙。

```
[HandleError]
public class CategoryController : Controller
{
     // some methods
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:59:59.630

通过使用代码解决了他的问题：

```
void Application_Error(object sender, EventArgs e)
        {
            Exception ex = Server.GetLastError();
            if (ex is HttpException && ((HttpException)ex).GetHttpCode() == 404)
            {
                Response.Redirect("~/Error/404");
            }
            else
            {
                Response.Redirect("~/Error/Other");
            }
            Server.ClearError();
        } 
```

# jquery - Internet Explorer 10 - jQuery Script 1014：使用 JSON 时出现无效字符 - 正确解决它

> ID：15298764
> 
> 赞同：0
> 
> 时间：2013-03-08T16:31:18.563
> 
> 标签：jquery, json, internet-explorer, h.264

由于使用了 jQuery 1.7.2 JSON.parse，我在 IE10 中遇到了众所周知的 SCRIPT1014 错误。我一直在阅读关于这个问题的几个问题，但最明确的答案是我没有找到任何实际通用的响应。我发现的所有内容基本上都是“检查数据是否有效”或“它可能是一个错误”。

但是，我找到了有关[此](http://msdn.microsoft.com/en-us/library/ie/cc836466%28v=vs.94%29.aspx)错误的链接。它提出了几个解决方案，但我真的不知道如何实现它们（我对 JS 和 HTML 不太了解）。

这是调用 JSON.parse 的一段代码：

```
 var jsonPlaylist;

            try {
                if (window.XMLHttpRequest) {
                    xmlDoc = new window.XMLHttpRequest();
                    xmlDoc.open("GET", 'playlist.xml', false);
                    xmlDoc.send("");
                    jsonPlaylist = xmlToJson(xmlDoc.responseXML);
                } else if (ActiveXObject("Microsoft.XMLDOM")) {
                    xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                    xmlDoc.async = false;
                    xmlDoc.load('playlist.xml');
                    jsonPlaylist = xmlToJson(xmlDoc);
                }
                if (window.XMLHttpRequest || ActiveXObject("Microsoft.XMLDOM")) {
                    var str1 = JSON.stringify(jsonPlaylist);
                    var str2 = str1.replace(/{(.*?)\[{"@attributes":{"src"/, '[{"0":{"src"');
                    var str3 = str2.replace(/@attributes/g, '0');
                    var cut = str3.substring(0, str3.length - 2);
                    var ret = JSON.parse(cut);
                    return ret;
                }
                alert("Error while loading the playlist.xml file.");
                return "[0:{src: \'video/default.mp4\', type: \'video/mp4\'}, 0:{src: \'video/default.mp4\', type: \'video/mp4\'}]";
            } catch (err) {
                return "[0:{src: \'video/default.mp4\', type: \'video/mp4\'}, 0:{src: \'video/default.mp4\', type: \'video/mp4\'}]";
            }
        } 
```

并且请不要建议放弃对 IE 的支持：它是唯一同时可靠支持 H.264 和 kiosk 模式的浏览器（如果有人知道另一个具有这些功能的浏览器并且它不会抛出这个 1014 问题，我会不过很高兴改变）。

**编辑：**

这是记录的“剪辑”：

```
 [{"0":{"src":"video/default.mp4","type":"video/mp4"}},{"0":{"src":"video/default.mp4","type":"video/mp4"}}] 
```

这是 playlist.xml 的内容，从中生成了“jsonPlaylist”以及“cut”：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><playlist><vid src="video/default.mp4" type="video/mp4"/><vid src="video/default.mp4" type="video/mp4"/></playlist> 
```

# php - PHP 本地设置/仅实时编码

> ID：15298767
> 
> 赞同：0
> 
> 时间：2013-03-08T16:31:29.927
> 
> 标签：php

我只编码到实时网络服务器（使用测试域然后转移到实时网络服务器）。

我实际上知道相当数量的 PHP，只是从未在本地编写过代码。

*   我还想设置、学习和使用 Symfony2。
*   我还想访问命令行（我知道 Symfony 2 需要它来设置捆绑包等）
*   我也知道人们将它与 Github 集成。
*   我使用的是 Mac OS X 10.8.2。
*   我想使用 Apache 作为 Web 服务器。

我理解每个人都在“本地”编码。我该如何设置这一切？也许只是我需要的所有东西的清单。到目前为止，这是我的粗略理解：

(1) 获取[http://www.mamp.info/en/index.html](http://www.mamp.info/en/index.html)

(2) 获取 Composer（虽然不知道是为了什么）

(3) Symfony2 下载

但是命令行访问呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:10:42.680

这里有更多信息：

在本地安装 Composer。

1) 编辑或创建 ~/.bash_profile

2）将其添加到编辑（更改为正确的php版本）：

别名 phpmamp='/Applications/MAMP/bin/php/php5.3.6/bin/php'

3）刷新终端bash：

. .bash_profile

4) 使用以下命令安装 Composer：

curl -s [https://getcomposer.org/installer](https://getcomposer.org/installer) | phpmamp

phpmamp 是 MAMP 安装的 PHP

# asp.net - 以提升的权限运行

> ID：15298769
> 
> 赞同：0
> 
> 时间：2013-03-08T16:31:34.100
> 
> 标签：asp.net, vb.net, powershell

我正在尝试通过 vb.net 调用一个在 asp.net 应用程序中创建打印机的 powershell 脚本。我正在使用[本教程](http://blogs.msdn.com/b/zainnab/archive/2008/07/26/calling-a-powershell-script-from-your-net-code.aspx)中给出的函数。它在 Visual Studio 中运行良好，但是在我发布应用程序后，在运行脚本时出现 Access denied 错误。我发现这是因为脚本需要提升权限才能在目标服务器上创建打印机，而我似乎无法找到有效执行此操作的方法。我会很感激任何建议。

打印机脚本：

```
# Test Printserver Server Running
$test = Get-Service -ComputerName $Server -Name Spooler | Select-Object -Property 'Status'
If ($test.status -ne 'Running') {
Out-Default -InputObject 'The Server You Requested is Unavailable'
Exit
}

# Test Printer Exist
$Test = get-wmiobject -class "Win32_Printer" -namespace "root\CIMV2" -computername $Server -Filter ("name = '$name'")
If ($test -ne $null) {
Out-Default -InputObject 'A Printer by This Name Already Exists!'
Exit
}

# Test Printer Port Exist
$Test = get-wmiobject -class "Win32_TCPIPPrinterPort" -namespace "root\CIMV2" -computername $Server -Filter ("hostaddress = '$Address'")
If ($test -ne $null) {
Out-Default -InputObject 'A Printer With This IP Address Already Exists!'
#Exit
}

# Generate Port Name
$Portname = 'IP_' + $address

# Create Port
$port = ([WMICLASS]"\\$server\ROOT\cimv2:Win32_TCPIPPrinterPort").createInstance() 
$port.Name= $Portname
$port.SNMPEnabled=$false 
$port.Protocol=1 
$port.HostAddress= $address
$site = get-spsite "http://localhost/nonfarmadminsitecollection";
$port.Put()

# Create Printer
$print = ([WMICLASS]"\\$server\ROOT\cimv2:Win32_Printer").createInstance() 
$print.drivername = $Driver
$print.PortName = $Portname
$print.Shared = $true
$print.Sharename = $Name
$print.Location = $location
$print.DeviceID = $name
$print.Put() 
```

VB Powershell 函数

```
' helper method that takes your script path, loads up the script
' into a variable, and passes the variable to the RunScript method
' that will then execute the contents
Shared Function LoadScript(ByVal filename As String) As String

    Try

        ' Create an instance of StreamReader to read from our file.
        ' The using statement also closes the StreamReader.
        Dim sr As New StreamReader(filename)

        ' use a string builder to get all our lines from the file
        Dim fileContents As New StringBuilder()

        ' string to hold the current line
        Dim curLine As String = ""

        ' loop through our file and read each line into our
        ' stringbuilder as we go along
        Do
            ' read each line and MAKE SURE YOU ADD BACK THE
            ' LINEFEED THAT IT THE ReadLine() METHOD STRIPS OFF
            curLine = sr.ReadLine()
            fileContents.Append(curLine + vbCrLf)
        Loop Until curLine Is Nothing

        ' close our reader now that we are done
        sr.Close()

        ' call RunScript and pass in our file contents
        ' converted to a string
        Return fileContents.ToString()

    Catch e As Exception
        ' Let the user know what went wrong.
        Dim errorText As String = "The file could not be read:"
        errorText += e.Message + "\n"
        Return errorText
    End Try

End Function

' Takes script text as input and runs it, then converts
' the results to a string to return to the user
Shared Function RunScript(ByVal scriptText As String) As String

    ' create Powershell runspace
    Dim MyRunSpace As Runspace = RunspaceFactory.CreateRunspace()

    ' open it
    MyRunSpace.Open()

    ' create a pipeline and feed it the script text
    Dim MyPipeline As Pipeline = MyRunSpace.CreatePipeline()

    MyPipeline.Commands.AddScript(scriptText)

    ' add an extra command to transform the script output objects into nicely formatted strings
    ' remove this line to get the actual objects that the script returns. For example, the script
    ' "Get-Process" returns a collection of System.Diagnostics.Process instances.
    ' MyPipeline.Commands.Add("Out-String")

    ' execute the script
    Dim results As Collection(Of PSObject) = MyPipeline.Invoke()

    ' close the runspace
    MyRunSpace.Close()

    ' convert the script result into a single string
    Dim MyStringBuilder As New StringBuilder()

    For Each obj As PSObject In results
        MyStringBuilder.AppendLine(obj.ToString())
    Next

    ' return the results of the script that has
    ' now been converted to text
    Return MyStringBuilder.ToString()
    ' Return results.ToString

End Function 
```

调用 Powershell

```
Dim script As String = Global_asax.LoadScript("path")     
Global_asax.RunScript(script) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:17:22.633

您无法更改 IIS 的提升状态。您可以启动另一个进程，例如提升的 PowerShell.exe，以运行需要提升的脚本部分，例如

```
Start-Process PowerShell -arg <path-to-script> -Credential $cred 
```

您将需要具有所需权限的人员的凭据。此外，如果您在 C# 中执行此操作，那么您也可以只使用 System.Diagnostic.Process.Start API。

# php - php获取css类并将其分配给rel属性

> ID：15298770
> 
> 赞同：0
> 
> 时间：2013-03-08T16:31:40.247
> 
> 标签：php, regex, search, preg-match-all, partial

我该怎么做：

```
<img class="classone twoclass alignLEFT" src="xxxx" /> 
```

在类数组中搜索单词“align”，获取单词“align”的其余部分（在本例中为“left”）并将其分配给实际的 align 属性？

```
<img class="classone twoclass alignLEFT" align="LEFT" src="xxxx" /> 
```

我知道我需要

```
$needle = "align";
$haystack = "<img class="classone twoclass alignLEFT" src="xxxx" />" 
```

我正在寻找的是

```
$pincushion = {{the rest of the word from $needle}} 
```

所以基本上我正在做一个`preg_match`for `$needle`。如果找到，我如何得到该词的其余部分（即，`$pincushion`）？

我试过`preg_split`了，但它不允许我使用“对齐”作为分隔符。（说得通）

这不能是 jquery / javascript - 它必须发生在呈现的 html 代码中。

有什么想法吗？我现在花了 10 个小时寻找没有真正运气的答案。我确实遇到了 DomDocument，但也找不到我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:01:14.333

由于您使用的是 HTML，因此您可以让 DOMDocument 正常工作。它有点冗长，但可能比复杂的正则表达式更容易阅读和更改

有一些库比 domdocument 更擅长处理 HTML 片段，但如果你想使用内置函数，domdocument 是最好的选择。

```
<?php

$html = '<img class="" src="xxxx" />adasdasdasd<img class="classone twoclass alignLEFT" src="xxxx" />';

$domdoc = new DOMDocument('');
$domdoc->loadHTML($html);

$xpath = new DOMXpath($domdoc);

$imgs = $xpath->query('//img');

foreach ($imgs as $element) {

    $class = $element->getAttribute('class');

    if (strpos($class, 'alignLEFT') !== false) {

        $element->setAttribute('align', 'left');
    }

}

// DOM Document works with full html documents, so now we have to isolate our fragment

$bodyelement = $xpath->query('/html/body');
$bodyhtml = $domdoc->saveXML($bodyelement->item(0));

echo str_replace(array('<body>', '</body>'), '', $bodyhtml); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:52:42.367

```
preg_match_all('#align(.*?)(" )#si', '<img class="classone twoclass alignLEFT" src="xxxx" />', $arr, PREG_PATTERN_ORDER); 
```

结果：

```
Array
(
[0] => Array
    (
        [0] => alignLEFT" 
    )

[1] => Array
    (
        [0] => LEFT
    )

[2] => Array
    (
        [0] => " 
    )

) 
```

说明： `#align(.*?)(" )#si`查找 algin 后跟由or`n-chars`分隔。`"`

# wpf - WPF ListView 中图像的奇怪转换行为

> ID：15298773
> 
> 赞同：0
> 
> 时间：2013-03-08T16:31:43.443
> 
> 标签：wpf, image, listview, rotatetransform, transformgroup

我有一个包含多列的 DataGrid。在其中一个内列中，我正在显示图像。这个图像需要旋转，所以我`TransformGroup`根据需要使用了 a 来缩放和旋转图像。

如果我不旋转，使用以下 XAML，图像会正常显示。当我更改图像列的宽度时，图像会按预期缩放。它保持在其列的范围内：

```
<GridViewColumn Header="Image" Width="200" x:Name="image_column">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <Image Source="{Binding Path=ImagePath}" Margin="5">
            </Image>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

现在，如果我尝试在图像列中根据需要旋转图像，事情就会变得很奇怪。列仍然与未旋转的图像宽度相关联，而行高与未旋转的图像高度相关联。该图像还侵入了其左侧邻居的空间。这是我尝试过的一种 XAML 变体：

```
<GridViewColumn Header="Image" Width="200" x:Name="image_column">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <Image Source="{Binding Path=ImagePath}" Margin="5">
                <Image.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="0.8" ScaleY="0.8" />
                        <RotateTransform Angle="90" CenterX="0" CenterY="0" />
                        <TranslateTransform X="{Binding ElementName=image_column, Path=Width}" />
                    </TransformGroup>
                </Image.RenderTransform>
            </Image>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

上面的 TranslateTransform 是一个完整的技巧，至少使图像的右边缘与其列的右边缘对齐。

我试图添加一个 Viewbox，认为它会按照我想要的方式缩放，并在其中旋转图像，但这不起作用。

谁能告诉我我在这里根本缺少什么，并提供有关如何解决解决方案的提示？此时我唯一的想法是在显示之前旋转图像并保存到磁盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:50:59.477

您应该设置[`LayoutTransform`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx)属性而不是`RenderTransform`.

```
<Image.LayoutTransform>
    <TransformGroup>
        <ScaleTransform ScaleX="0.8" ScaleY="0.8"/>
        <RotateTransform Angle="90"/>
    </TransformGroup>
</Image.LayoutTransform> 
```

由于列宽是固定的，ScaleTransform 似乎是多余的。

```
<Image.LayoutTransform>
    <RotateTransform Angle="90"/>
</Image.LayoutTransform> 
```

# sql-server - 日期时间字段和 UNION ALL 的 SQL Server 类型转换

> ID：15298775
> 
> 赞同：1
> 
> 时间：2013-03-08T16:31:45.110
> 
> 标签：sql-server, datetime, casting, union, union-all

`UNION ALL`在使用和必须填充一个表（由`UNION`命令连接的表）时，我正面临 SQL Server (T-SQL) 的一种奇怪行为。

表格1：

```
Firstname  Lastname  Date
---------  --------  ----
Peter      Pan       2013-01-21 12:29:55.000
Paul       Am        2013-01-22 12:39:45.000 
```

和表 2：

```
FN         LN
---------  --------
Laura      Loeb
Lisa       Lefteye 
```

我想对`UNION ALL`两张桌子都做一个。这只能通过使用“假”第三列“填充”表 2 来实现（因为它没有“数据”列），如下所示：

```
SELECT
  Firstname AS FName, Lastname AS LName, Date AS TheDate
FROM Table1

UNION ALL

SELECT
  FN AS FName, LN AS LName, NULL AS TheDate
FROM Table2 
```

我的问题是：SQL Server 给了我一条错误消息，告诉我它不能强制转换为`DateTime`类型。

我 100% 确定`Date`Table1 中列的数据类型设置为`DateTime`，也允许使用 NULL 值。

我尝试设置一个虚拟日期，如下所示：

```
... FN AS FName, LN AS LName, '2013-03-08' AS TheDate ... 
```

我尝试设置当前日期，如下所示：

```
... FN AS FName, LN AS LName, getdate() AS TheDate ... 
```

以上都不起作用。

但是，我知道一般的解决方案（使用“NULL AS Columnname”填充缺失的列）有效......

有谁知道如何解决这个问题？

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:35:14.950

不确定是什么问题...

```
SELECT '1' A, '2' B, GETDATE() C
UNION ALL
SELECT '1', '2', NULL 
```

**退货**

```
| 一个 | 乙| C |
--------------------------------------
| 1 | 2 | 2013 年 3 月 8 日 16:34:31+0000 |
| 1 | 2 | (空) |
```

你试过`CAST`你的`NULL`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:39:06.273

你已经发布的工作正常。

```
SELECT 'Frank' As 'Name', 'Grimes' as 'Name2', GETDATE() as 'TheDate'
UNION ALL
SELECT 'Jim' As 'Name', 'Bloggs' as 'Name2', null as 'TheDate' 
```

# asp.net-mvc-3 - 使用 Autofac 和 MVC3 创建拦截器

> ID：15298779
> 
> 赞同：1
> 
> 时间：2013-03-08T16:31:55.427
> 
> 标签：asp.net-mvc-3, autofac, castle-dynamicproxy, method-interception

我需要创建一个将通过 Autofac 连接的性能监控拦截器。不幸的是，它是针对 MVC3 项目的，这意味着我使用的是 Autofac 2.6.3，因为 Autofac 3 仅与 MVC4 兼容。因此，我不能使用`Autofac.Extras.DynamicProxy2`Nuget 包，因为它与 MVC3 不兼容。

我发现`AutofacContrib.DynamicProxy2`，它与`Autofac 2.6.3`. 问题是，由于依赖项之间的版本不匹配，Nuget 包无法安装。问题突出如下：

*   AutofacContrib.DynamicProxy2
    *   取决于'Autofac（> = 2.4.5.724）'
    *   取决于“Castle.Core (>= 2.5.2)”。
    *   取决于“Castle.DynamicProxy (>= 2.2.0)”。
        *   取决于“Castle.Core (= 1.2.0)”。

我收到以下 Nuget 包安装错误：

> 将“Castle.Core 2.5.2”更新为“Castle.Core 1.2.0”失败。找不到与“Castle.Core 1.2.0”兼容的“AutofacContrib.DynamicProxy2”版本

**如何使用 MVC3 和 Autofac 执行方法拦截？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:04:23.777

看起来我可以安装“DynamicProxy2”，感谢[这篇文章](http://weblogs.asp.net/nmarun/archive/2011/08/18/using-autofac-dynamicproxy2-interceptors-with-mvc3-part-1.aspx)

基本上，在安装并收到错误后，我需要使用标志`AutofacContrib.DynamicProxy2`再次安装它，它安装正常。`-ignoredependencies`

运行此命令：

> 安装包 autofaccontrib.dynamicproxy2

接下来是这个命令：

> 安装包 autofaccontrib.dynamicproxy2 -ignoredependencies

# .net - 绑定值为空时出现 WPF 日期选择器验证错误

> ID：15298781
> 
> 赞同：4
> 
> 时间：2013-03-08T16:31:56.560
> 
> 标签：.net, wpf, entity-framework

我有一个 WPF 应用程序，我在其中使用绑定到实体框架（带有 SQL 服务器）实体的日期字段的日期选择器。我将其绑定如下：

```
<DatePicker x:Name="dtComplete" Style="{StaticResource FTC_DatePicker}" Grid.Column="2" Grid.Row="7" Grid.ColumnSpan="3"                                            
Text="{Binding dtComplete, Mode=TwoWay, ValidatesOnDataErrors=True}"/> 
```

绑定工作正常，可以更新到实体。

我的问题是，当基础数据库字段为空时，我会**选择我想要的日期**水印，但该水印正在被验证并返回为不是日期格式。我想保留水印，但在用户更改输入之前没有验证触发器。另外，我想保留`ValidatesOnDataErrors=True`，因为我在其他地方使用它来评估业务逻辑。

要明白我的意思，这是一个使用日期选择器的表单，其日期为空值，您可以看到验证错误： ![wpf datepicker验证错误](../Images/dea4cf26a73387636a614d58f24a6db5.png)

调试时的输出窗口给出以下验证转换错误：

> System.Windows.Data 错误：7：ConvertBack 无法转换值“”（类型“字符串”）。绑定表达式：路径=dtComplete；DataItem='job_BF0D6052EEADCDA3C2B6D1A174D77C322D5AB16A035F214705610767131A80F0' (HashCode=17930557); 目标元素是'DatePicker'（名称='dtComplete'）；目标属性是“文本”（类型“字符串”） FormatException：“System.FormatException：字符串未被识别为有效的 DateTime。在 System.DateTime.Parse(String s, IFormatProvider provider) 在 System.Convert.ToDateTime(String value, IFormatProvider provider) 在 System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider) 在 System.Windows.Data.BindingExpression .ConvertBackHelper(IValueConverter转换器，对象值，类型sourceType，对象参数，

在用户更改输入之前，有人可以帮我摆脱这个验证错误吗？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T19:54:09.890

弄清楚了：

我正在绑定到 hte datePicker 的文本值，因此它试图将水印文本验证为日期，但我真正应该做的是绑定到 selectedDate 属性，如下所示：

```
<DatePicker x:Name="dtComplete" Style="{StaticResource FTC_DatePicker}" Grid.Column="2" Grid.Row="7" Grid.ColumnSpan="3"                                                                                        
 SelectedDate="{Binding dtComplete, Mode=TwoWay, ValidatesOnDataErrors=True}" /> 
```

现在它的行为如我所愿，选择日期水印仍然存在并且绑定日期值有效。现在都太明显了。简单修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:05:18.077

问题实际上是日期选择器的标准行为是使用选定的值来突出显示日历上的日期。由于您在 value 属性中放置了一个非日期值，因此当日历被激活时，它不知道该怎么做。打开日期选择器日历时会触发一个事件“下拉菜单”。一旦打开，您可以将值设置为今天，这将消除您的错误。
我不清楚的是您如何首先显示该文本。我认为 datepicker 验证了输入的任何值。

# grails - 如何使用 g:select 制作带有常量列表项的选择框

> ID：15298782
> 
> 赞同：5
> 
> 时间：2013-03-08T16:32:04.607
> 
> 标签：grails, groovy

我想使用`<g:select/>`转换为此 html 的选择框：

```
<select id="myselect" name="myselect">
  <option value="r">RED</option>
  <option value="g">GREEN</option>
  <option value="b">BLUE</option>
</select> 
```

我还希望在页面重新加载时从 bean 中预先选择该值。

我在里面做这个，所以我有一个表格，每一行都有一个单独的选项框。

我目前正在以下 html 中完成此操作：

```
<g:each in=${mylist} status="i" var="myInst">
   <select id="status${myInst}" name="status${myInst}" data-id="${myInst.id}">
      <option value="r" <g:if test="${myInst.color == "r"}">selected</g:if>>RED</option>
      <option value="g" <g:if test="${myInst.color == "g"}">selected</g:if>>Green</option>
      <option value="b" <g:if test="${myInst.color == "b"}">selected</g:if>>BLUE</option>
   </select>
</g:each> 
```

这一切都很好，但我想把那个丑陋的`<select>`变成`<g:select>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T16:51:47.160

```
<g:select id="myselect" name="myselect" value="${myInst.color}"
          from="${['r': 'RED', 'g': 'GREEN', 'b': 'BLUE']}"
          optionKey="key" optionValue="value" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T17:18:07.267

您必须在域类中声明“myselect”。我也遇到了这个问题，但我比你早了大约 2 周。看看[我如何为 g:select 标签编写一个集合](https://stackoverflow.com/questions/14864716/how-do-i-write-a-set-for-gselect-tag)

# flash - 随机化闪光灯中的按钮位置

> ID：15298784
> 
> 赞同：0
> 
> 时间：2013-03-08T16:32:06.470
> 
> 标签：flash, button

当我启动我的应用程序时，它会显示一个带有启动按钮的页面。

单击它后，将显示八个按钮。对于我的应用程序，我希望每次运行它时，按钮都应该随机化，即它们应该出现在页面上的不同位置。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:49:32.303

如果您在数组中有按钮，您可以执行以下操作：

```
for(1=i; i<=button_array.length; i++) {
    button_array[i].x = Math.random() * WIDTH_AVAILABLE;
    button_array[i].y = Math.random() * HEIGHT_AVAILABLE;
} 
```

您应该调整宽度和高度，以使按钮不会超出可用空间。这也没有任何重叠检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:54:26.550

你有 button1...button8

```
var arr:Array = new Array();
for (var i:int=1; i<=8; i++) {
    var btn:Sprite = this["button"+i] as Sprite
    arr.push({x:btn.x, y:btn.y})
}
suffle arr
for (i=1; i<=8; i++) {
    var btn:Sprite = this["button"+i] as Sprite
    btn.x = arr[i-1].x;
    btn.y = arr[i-1].y;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:55:15.970

```
function shuffleButtons(arrayOfButton:Array):void {
    trace ("input: " + arrayOfButton)
    for(var i:int=0; i<100; i++) {
        var btn1:DisplayObject = arrayOfButton[Math.floor(Math.random()*arrayOfButton.length)] as DisplayObject;
        do {
            var btn2:DisplayObject = arrayOfButton[Math.floor(Math.random()*arrayOfButton.length)] as DisplayObject;
        } while (btn1==btn2);

        var foo:Number;

        foo = btn1.x;
        btn1.x = btn2.x;
        btn2.x = foo;

        foo = btn1.y;
        btn1.y = btn2.y;
        btn2.y = foo;
    }
} 
```

当您需要调整 set ov 按钮时，请致电

`shuffleButtons([button1, button2, button3, button4, button5, button6 ]);`

# c# - 在 Linq 中向对象 where 子句发出问题：条件被绕过

> ID：15298786
> 
> 赞同：4
> 
> 时间：2013-03-08T16:32:09.060
> 
> 标签：c#, linq, where

大家好，

今天这是我在我最喜欢的 C# 帮助资源网站上的第一篇文章。我很高兴加入社区。

这是我的问题，我想在使用 .Where 子句过滤双值列表后调用 .Select linq 子句来创建结构列表，但过滤条件似乎没有被评估，或者它们总是返回 true。
请查看我的代码以很好地理解问题：

```
string[] msgNames = new string[] { "de", "vf", "ze", "ki", "vt", "er" };
double[] prevCounters = new double[] { 154.0, 24588.0, 4547.0, 788.0, 1455.0, 24577.0 };
double[] counters = new double[] { 8548.0, 54854.0, 54854.0, 44.0, 121.0, 48547.0 };
double[] lenValues = new double[] { 1.0, 2.0, 0.0, 4.0, 5.0, 0.0 };

BufferInfo[] positiveLenValues = counters
    .Where((c, it) => lenValues[it] >= 1.0 && prevCounters[it] != c)
    .Select((c, it) =>
    {
        prevCounters[it] = c;

        return new BufferInfo()
        {
            Name = msgNames[it],
            Length = lenValues[it]
        };
    }).ToArray(); 
```

也许我误解了 linq 的用法，但最后返回的 BufferInfo[] 包含所有值，而 lenValues 数组中有一些小于 1.0 的值。有关信息，没有对此代码块的并发访问。linq bloc 上的局部变量通常是动态实例化的（由外部程序集重新调整，来自 National Instruments），这里只是为了让您知道。

例如，相同的行为但带有 for 循环也可以：

```
List<BufferInfo> myInfos = new List<BufferInfo>();

for (int i = 0; i < 6; i++)
{
    if (lenValues[i] >= 1.0 && prevCounters[i] != counters[i])
    {
        oldCounters[i] = counters[i];
        myInfos.Add(new BufferInfo()
                    {
                        Length = lenValues[i],
                        Name = msgNames[i]
                    });
    }
}

BufferInfo[] buffers = myInfos.ToArray(); 
```

我不在乎是否使用 linq，我只想了解它为什么会失败。
请解释我为什么会得到这些奇怪的结果。

最好的问候，
Lun@ir。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:52:33.847

好吧，那是因为你`.Select((c, it) =>`的索引再次从 0 开始......

因此，如果您的`Where`子句过滤项目并仅返回 4 个项目，您`Select`将使用`0, 1, 2, 3`与您返回的项目的索引不对应的索引`Where`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:49:36.630

你的代码甚至没有编译，所以我不知道你是如何测试它没有工作的......

您必须先编写`Select`获取索引，然后将其传递给`Where`方法：

```
BufferInfo[] positiveLenValues = counters.Select((c, i) => new { c, i })
                                         .Where(e => lenValues[e.i] >= 1.0 && prevCounters[e.i] != e.c)
                                         .Select(e =>
                                         {
                                             prevCounters[e.i] = e.c;
                                             return new BufferInfo
                                             {
                                                 Name = msgNames[e.i],
                                                 Length = lenValues[e.i]
                                             };
                                         }).ToArray(); 
```

该代码返回 4 个值，这是可预测的并且似乎是正确的结果。

# selenium - 如何在 selenium IDE 中操作“值”？

> ID：15298787
> 
> 赞同：1
> 
> 时间：2013-03-08T16:32:09.753
> 
> 标签：selenium, selenium-ide, performance-testing

情景是，

我记录了任务，即，

登录，编辑一个字段并以不同的名称保存（但原始字段仍然存在），注销。

在这里，我需要操作“名称”字段，因此我可以获得 100 个或更多具有唯一名称的副本。

在 Selenium IDE 中是否有可能？如果没有，是否有任何开源工具可以做同样的事情？

```
</thead><tbody>
<tr>
    <td>open</td>
    <td>/SurveyHome.aspx</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>id=ctl00_ContentPlaceHolder1_gvSurvey_ctl02</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=ctl00_ContentPlaceHolder1_txtsurname</td>
    <td>Survey 1</td> // This is the name of the survey.
</tr>
<tr>
    <td>clickAndWait</td>
    <td>id=ctl00_ContentPlaceHolder1_btncopysurok</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>id=ctl00_ContentPlaceHolder1_btncopyok</td>
    <td></td>
</tr>

</tbody></table> 
```

如何在此代码中使用 while 循环，我尝试使用，但是 selenium ide 无法识别它。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:20:17.200

```
 You can use while loop for your purpose 

    <tr>
        <td>getEval</td>
        <td>index = 1;</td>
        <td></td>
    </tr>
    <tr>
        <td>while</td>
        <td>index &lt; 10;</td>
        <td></td>
    </tr>
    <tr>
        <td>storeEval</td>
        <td>index</td>
        <td>value</td>
    </tr>
    <tr>
        <td>echo</td>
        <td>survey ${value}</td>
        <td></td>
    </tr>
    <tr>
        <td>getEval</td>
        <td>index++;</td>
        <td></td>
    </tr>
    <tr>
        <td>endWhile</td>
        <td></td>
        <td></td>
    </tr>

    in the name text box field you give the value has survey ${value},
    now you can create any number of form with unique name by 
    using this while loop put your form inside this while loop.

    Try it

    Thank you.

<tr>
    <td>open</td>
    <td>/SurveyHome.aspx</td>
    <td></td>
</tr>
<tr>
    <td>getEval</td>
    <td>index = 1;</td>
    <td></td>
</tr>
<tr>
    <td>while</td>
    <td>index &lt; 100;</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>index</td>
    <td>value</td>
</tr>
<tr>
    <td>echo</td>
    <td>survey ${value}</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>id=ctl00_ContentPlaceHolder1_gvSurvey_ctl02</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=ctl00_ContentPlaceHolder1_txtsurname</td>
    <td>survey ${value}</td>
</tr>
<tr>
    <td>click</td>
    <td>id=ctl00_ContentPlaceHolder1_btncopyok</td>
    <td></td>
</tr>
<tr>
    <td>getEval</td>
    <td>index++;</td>
    <td></td>
</tr>
<tr>
    <td>endWhile</td>
    <td></td>
    <td></td>
</tr>

try it.

thank you 
```

# r - 在不使用循环的情况下，向量中有多少元素大于 x

> ID：15298788
> 
> 赞同：19
> 
> 时间：2013-03-08T16:32:11.650
> 
> 标签：r, loops, vector

如果我有以下向量：

```
x
[1]  1  5  8  9  1  0 15 15 
```

我想知道有多少元素大于 10，不使用循环如何进行？

我想得到：

```
2 
```

因此

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-08T16:33:49.147

使用`length`或`sum`：

```
> length(x[x > 10])
[1] 2
> sum(x > 10)
[1] 2 
```

在第一种方法中，您将创建一个向量子集匹配您的条件的值，然后检索`length`向量的 。

在第二种方法中，您只需创建一个逻辑向量来说明每个值是否与条件匹配 ( `TRUE`) 或不匹配 ( `FALSE`)。既然`TRUE`和`FALSE`等于“1”和“0”，你可以简单地使用`sum`来得到你的答案。

因为第一种方法需要在计数之前建立索引和子集，我几乎可以肯定第二种方法会比第一种更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-23T04:21:15.947

另一种方法：

```
> length(which(as.vector(x) > 10))
[1] 2 
```

# c++ - OpenCV：帧率低的限制是什么？

> ID：15298792
> 
> 赞同：0
> 
> 时间：2013-03-08T16:32:21.800
> 
> 标签：c++, opencv

在带有 PS3-Eye 相机的 Ubuntu 12.10 上使用 OpenCV 2.4.3.2，**我无法捕获超过每秒 60 帧**(FPS) 的图像。相机本身可提供高达 125 FPS 的速度。我想知道是什么限制了 OpenCV 中的帧速率。所以这是我到目前为止所做的：

```
#include <sys/time.h>
#include <time.h>
#include <iostream> // for standard I/O

using cv;
using std;

long time_diff( const timespec &t1, const timespec &t2 ) {
  return (long)(t2.tv_sec-t1.tv_sec)*1000000000 + (t2.tv_nsec-t1.tv_nsec);
}

int main(int argc, char *argv[]) {
  VideoCapture cap(0); // open the default camera
  cap.set(CV_CAP_PROP_EXPOSURE, 0);
  cap.set(CV_CAP_PROP_FPS, 125);
  cap.set(CV_CAP_PROP_FRAME_WIDTH, 320);
  cap.set(CV_CAP_PROP_FRAME_HEIGHT, 240);
  if(!cap.isOpened())  // check if we succeeded
    return -1;
  Mat frame;
  timespec t_start, t_end;
  for(int i=1;;++i) {
    cap >> frame;
    clock_gettime(CLOCK_REALTIME, &t_end);
    if( i%20==0 )
      std::cout << "FPS ~= " << time_diff(t_start, t_end) << std::endl;
    clock_gettime(CLOCK_REALTIME, &t_start);
  }
} 
```

这将每 20 帧的帧速率输出到标准输出。请注意，我必须修补源才能为 PS3-Eye 相机正确设置帧速率。

首先，我将帧速率设置为 30 ( `cap.set(CV_CAP_PROP_FPS, 30);`) 以验证我的测量结果是否正确。然后使用更高的帧速率，报告的**帧速率上限为 ~60 FPS**。

**USB 不是问题**，因为我可以使用`guvcview`.

我修改了上面的代码以**使用`grab()`，`retrieve()`**如下所示：

```
clock_gettime(ClOCK_REALTIME, &t_start);
cap->grab();
clock_gettime(ClOCK_REALTIME, &t_end);
cap->retrieve(frame); 
```

但帧速率**再次被限制在 ~60 FPS**。

那么**我怎么知道是什么限制了帧率呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:41:27.757

切换到台式机（从笔记本电脑）后，我能够捕获完整的帧速率。似乎 OpenCVs 捕获实现不如 guvcview 中的高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T06:52:16.267

我在使用 OpenCV 和 Delphi X6 的 win7 x64 中遇到 65 FPS 限制的相同问题。已确定的问题出在 cvWaitKey 或/和 Windows 消息队列中，这将重绘限制在 65 Hz。 **解决方案 - 减少调用 cvWaitKey 的频率，每秒减少 65 次。**

# sql - 这两条 SQL 语句是等价的吗？

> ID：15298794
> 
> 赞同：0
> 
> 时间：2013-03-08T16:32:22.050
> 
> 标签：sql, ms-access, sql-server-ce, inner-join

它们返回相同的行数，但我不确定一个是等待发生的事故，还是一个只是“首选方法”：

```
SELECT duckbill.id, duckbill.pack_size, duckbill.description, duckbill.platypus_id, duckbill.department, duckbill.subdepartment, duckbill.unit_cost, duckbill.unit_list, duckbill.open_qty, duckbill.UPC_code, duckbill.UPC_pack_size, duckbill.crv_id, duckbill_platypuss.platypus_item 
FROM duckbill 
INNER JOIN duckbill_platypuss ON duckbill.platypus_id = duckbill_platypuss.platypus_id

SELECT duckbill.id, duckbill.pack_size, duckbill.description, duckbill.platypus_id, duckbill.department, duckbill.subdepartment, duckbill.unit_cost, duckbill.unit_list, duckbill.open_qty, duckbill.UPC_code, duckbill.UPC_pack_size, duckbill.crv_id, duckbill_platypuss.platypus_item
FROM duckbill, duckbill_platypuss
WHERE (duckbill.platypus_id = duckbill_platypuss.platypus_id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:35:37.943

所以存在差异的原因是由于执行顺序。您可能没有注意到某些表组合的差异，但在非常大的表上，您通常希望先使用 JOIN 进行过滤。

这篇文章为此提供了一些很好的信息，如下所示：[SQL 查询的执行顺序](https://stackoverflow.com/questions/4596467/order-of-execution-of-the-query)

# java - 在 Java 中使用正则表达式选择性地查找模式

> ID：15298798
> 
> 赞同：2
> 
> 时间：2013-03-08T16:32:33.390
> 
> 标签：java, regex, twitter, pattern-matching

我有一个字符串列表（在这种情况下是来自 Twitter 的推文）。这些字符串由用户发布，有时会引用其他特定用户。我正在使用正则表达式和 Java 的 String.replaceAll(pattern, replace) 方法来替换语音常见问题的实例（在这种情况下，重复辅音），但我需要一种方法让它忽略它在用户名中找到的任何模式. 用户名模式普遍匹配正则表达式`\b@\S+\b`

所以我想匹配`y+`，但不是任何匹配的成员`\b@\S+\b`

所以`everybodyy @everybodyy everybodyy`我会匹配`ever(y)bod(yy) @everybodyy ever(y)bod(yy)`

这可能吗，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:16:43.213

`text.replaceAll("(?i)(?<!\\B@\\S{1,20})y+", "y");`作品。当前版本的 Java 支持可变长度的lookbefore，只要它显式地小于look-before 的某个最大长度大小。

由于 twitter 用户名有一个固定的最大长度，可变长度的固定最大值lookbefore 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:37:23.937

尝试以下操作：

```
String regEx = "(\\s+[^@\\s]\\S*y+\\S*)|(^[^@\\s]\\S*y+\\S*)"; 
```

# r - 仅读取 xls 中的某些列

> ID：15298800
> 
> 赞同：4
> 
> 时间：2013-03-08T16:32:35.400
> 
> 标签：r, xls

我有一个包含几张工作表的 Excel 电子表格。格式如下：

```
Date        A       B       C       D       E       F                       Reference   Ref Date    Half life
03/01/13    6.29    5.28    8.15    4.93    11.67   6.4                     8.88        01/01/99    30.23
04/01/13    6.39    5.39    8.22    5.04    11.75   6.4                 
07/01/13    6.34    5.32    8.17    4.92    11.82   6.4                 
08/01/13    6.33    5.3 8.16    4.96    11.68   6.4                 
09/01/13    6.29    5.29    8.13    4.93    11.73   6.4                 
10/01/13    6.29    5.32    8.17    4.95    11.61   6.4                 
11/01/13    6.21    5.27    8.12    4.95    11.57   6.4                 
14/01/13    6.28    5.28    8.09    4.92    11.65   6.4                 
15/01/13    6.25    5.26    8.06    4.9 11.59   6.4                 
16/01/13    6.26    5.3 8.08    4.94    11.7    6.4                 
17/01/13    6.27    5.27    8.09    4.96    11.57   6.4                 
18/01/13    6.29    5.27    8.04    4.94    11.57   6.4                 
21/01/13    6.34    5.33    8.23    4.99    11.68   6.4                 
22/01/13    6.31    5.34    8.23    4.97    11.63   6.4                 
23/01/13    6.24    5.26    8.03    4.93    11.58   6.4                 
24/01/13    6.24    5.27    8.03    4.93    11.56   6.4                 
25/01/13    6.26    5.3 8.08    4.93    11.6    6.4 
```

我只想将 colmuns Date 和 AF 读入数据框中，并忽略 J1,2,K1,2 和 L,1,2 中用于计算某些值的元素。

我正在使用 gdata 包中的 read.xls

`read.xls("filename.xls", "sheetname", na.strings=c("NA","#DIV/0!"))`

但是，这给了我一个包含 A - L 列的数据框。我可以将此数据框重新转换为所需的格式，但更愿意选择要读取的列。我可以用 read.xls 以类似于 read.table 可以实现这一点的[方式执行此操作（将文件中的选择列仅读取到 R 中的方法吗？（`read.table` 和 `scan` 之间的快乐媒介？）](https://stackoverflow.com/questions/2193742/ways-to-read-only-select-columns-from-a-file-into-r-a-happy-medium-between-re)）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T16:44:19.797

您可以使用库`XLConnect`来读取 .xls 文件。函数`readWorksheet()`让您设置需要导入的列和行。

```
library(XLConnect)
wb<-loadWorkbook("wb.xls")
data <- readWorksheet(wb, sheet = "Sheet1",startCol=1,endCol=7) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-03-23T09:49:52.597

通过使用`readxl`包，`read_xlsx`您可以指定范围。根据文件类型使用 read_xls 或 read_excel。

```
library(readxl)
df <- read_xlsx(path = "filename.xlsx", sheet = "sheetname", range = cell_cols("A:G")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T17:32:43.890

另一种选择是使用是使用`Excel named range`with `RODBC`。

```
channel<-odbcConnectExcel(paste(Repository,excelFile, sep = "/"))
ConsoTab<-sqlFetch(channel,NamesRangeAF)
odbcClose(channel) 
```

这`NamesRangeAF`是名为 Range 的 Excel。

# javascript - 仅从流媒体视频中下载音频？

> ID：15298802
> 
> 赞同：4
> 
> 时间：2013-03-08T16:32:40.100
> 
> 标签：javascript, flash, video-streaming, html5-video, audio-streaming

我了解我可以发出范围请求以下载流式网络视频的特定时间范围。

我现在想知道是否可以从视频中仅请求 MP3 或 AAC 音频流，以便在我的服务器上，我只下载音频。

据我所知，这是可能的，但我还没有在网上找到任何合法的解决方案或方法，所以我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T14:57:13.577

假设您正在谈论通过 HTTP 的流，这实际上是不可行的。我真的不建议您尝试它，除非您有非常具体的需求并且手头有很多时间。

可能吗？也许。首先，您必须有一个支持范围请求的 HTTP 服务器。如果是这样，那么您必须对容器格式有所了解。为此，您必须开始下载文件并弄清楚。

大多数容器将流交错在一起。也就是说，您将拥有一个用于视频的字节块、一个用于音频的字节块以及用于存在的任何其他流的块。出于演示目的，假设一个视频只有音频流和视频流，每个块包含 1 秒的内容。交错看起来像这样：

`HEADERS A V A V A V A V A V A V A V ...`

`HEADERS`是容器用于设置流的一切。 `A`是音频流块，并且`V`是视频流块。

如果您只想下载一个流，则必须能够自己解析该容器格式，下载容器标头和容器所需的任何其他数据，然后对特定流的所有块进行范围请求想。最后，根据交织的不同，这可能根本不是很有效！

当您下载数据时，您需要将其写回到您可以实际使用的文件中，这意味着您可能需要为此编写一些自定义代码，或者诱使 FFMPEG 为您编写它。

# html - 将带有图像的 word doc 转换为 HTML

> ID：15298806
> 
> 赞同：1
> 
> 时间：2013-03-08T16:32:46.220
> 
> 标签：html, ms-word, converter

我希望找到一个程序，它可以将 word doc 拉取图像到一个文件夹，然后将图像链接回 word doc 并将其转换为 HTML，以便我可以将其上传到我们的 Intranet 站点。有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:48:21.647

你搜索过谷歌吗？

如果你知道一些 html，那么你可以使用[这个干净的 html 转换器](http://word2cleanhtml.com/)，然后在你的图像中添加 img 标签。

图像标签示例

```
<img src="images/image.jpg" width="200px" height="300px" /> 
```

# java - 同时查看当前时间

> ID：15298811
> 
> 赞同：1
> 
> 时间：2013-03-08T16:32:58.670
> 
> 标签：java, concurrency

我正在用java创建一个程序，我想每分钟检查一次当前时间，以及它是否等于特定时间，例如上午10点println（“现在是上午10点做这个”）。到目前为止，我得到了这样的当前时间

```
public static String RemindMe() {
        DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm");
        Date date = new Date();
        System.out.println(dateFormat.format(date));

        if (dateFormat.format(date).equals("2013/03/08 11:19"))
            System.out.println("equal");
        else
            System.out.println("not equal");

        return dateFormat.format(date);
    } 
```

但我怎样才能让它每分钟检查当前时间，如果可能的话同时检查。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:35:59.083

您可以使用[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)：

```
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
final Runnable checkTime = new Runnable() {
    public void run() {
        remindMe();
    }
};
scheduler.scheduleAtFixedRate(checkTime, 0, 1, TimeUnit.MINUTES); 
```

注意：Java 中的约定是以小写开头的方法名称。

# macos - 如何从 Dock 中的程序快捷方式中检索命令行参数？

> ID：15298812
> 
> 赞同：1
> 
> 时间：2013-03-07T10:18:12.993
> 
> 标签：macos, command-line, dock

[我的问题与之前](https://apple.stackexchange.com/q/17476/44558)的问题完全相反。我正在开发一个开源应用程序，它以两种形式发布，预编译的二进制文件和源代码。

我安装了预编译的二进制文件，它运行良好，在 Dock 中有一个漂亮的小图标。

我成功编译了源代码，但是在启动它时出现运行时错误。经过调查，我怀疑这个应用程序需要命令行选项才能正确运行。

所以我的问题是：如果我的假设是正确的并且工作版本实际上是定义命令行参数，**我如何从打包的应用程序中检索 CL 参数**？

如果有什么不同，我正在谈论的应用程序是Cyber [​​duck](http://cyberduck.ch/)，我正在运行 OS X 版本 10.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:27:38.057

问题不在于命令行。从[这里的代码](http://svn.cyberduck.ch/tags/release-4-1-3/source/ch/cyberduck/ui/cocoa/utils.c)

```
// Get an instance of the non-localized keys.
CFDictionaryRef bundleInfoDict = CFBundleGetInfoDictionary(mainBundleRef);  
if(NULL == bundleInfoDict) {
    fprintf(stderr, "[Launcher Error] No info dictionary.\n");
    exit(-1);
} 
```

其中 mainBundleRef 指的是 .app 包。

问题是应用程序内的 Info.plist (/Applications/Cyber​​duck.app/Contents/Info.plist) 中没有正常的键。它已以某种方式损坏。代码存储库中的那个乍一看还可以。有关结构的信息，我会查看 Apple 开发[文档](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html#//apple_ref/doc/uid/TP40009254-SW1)。

最简单的解决方法是重新下载并安装该应用程序。

# wpf - 创建使用 windows 主题的边框

> ID：15298820
> 
> 赞同：2
> 
> 时间：2013-03-08T16:33:16.577
> 
> 标签：wpf, xaml, border

我想在 WPF (XAML) 中创建一个边框，该边框使用当前 Windows 主题（XP、Areo、Classic、Modern UI）中的颜色。

我已经尝试使用`SystemColors`类中的一些画笔，但边框看起来与 a 的默认边框不同`TextBox`。

有什么办法可以得到真正的边界刷？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:04:46.667

下面给出的是 WPF 用于`TextBox`控件的默认样式：

```
 <Style TargetType="{x:Type TextBox}">
    <Setter Property="SnapsToDevicePixels"
            Value="True" />
    <Setter Property="OverridesDefaultStyle"
            Value="True" />
    <Setter Property="KeyboardNavigation.TabNavigation"
            Value="None" />
    <Setter Property="FocusVisualStyle"
            Value="{x:Null}" />
    <Setter Property="MinWidth"
            Value="120" />
    <Setter Property="MinHeight"
            Value="20" />
    <Setter Property="AllowDrop"
            Value="true" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type TextBoxBase}">
          <Border Name="Border"
                  CornerRadius="2"
                  Padding="2"
                  BorderThickness="1">
            <Border.Background>
              <SolidColorBrush Color="{DynamicResource ControlLightColor}" />
            </Border.Background>
            <Border.BorderBrush>
              <SolidColorBrush Color="{DynamicResource BorderMediumColor}" />
            </Border.BorderBrush>
            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />
                <VisualState x:Name="Disabled">
                  <Storyboard>
                    <ColorAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                  Storyboard.TargetProperty="(Panel.Background).
                      (SolidColorBrush.Color)">
                      <EasingColorKeyFrame KeyTime="0"
                                           Value="{StaticResource DisabledControlLightColor}" />
                    </ColorAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="ReadOnly">
                  <Storyboard>
                    <ColorAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                  Storyboard.TargetProperty="(Panel.Background).
                      (SolidColorBrush.Color)">
                      <EasingColorKeyFrame KeyTime="0"
                                           Value="{StaticResource DisabledControlDarkColor}" />
                    </ColorAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="MouseOver" />
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <ScrollViewer Margin="0"
                          x:Name="PART_ContentHost" />
          </Border>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style> 
```

# spring-mvc - 具有 Spring MVC 通配符权限的 Shiro 不起作用

> ID：15298821
> 
> 赞同：1
> 
> 时间：2013-03-08T16:33:17.287
> 
> 标签：spring-mvc, shiro

我有几个权限：

```
inventory:po:view
inventory:po:create
inventory:po:update 
```

在 JSP 中，以下工作：

```
<shiro:hasPermission name="inventory:po:create">
   <li><a href='<c:url value="/inventory/document/viewDocument?doctype=2" />'>Purchase Order</a></li>                   
</shiro:hasPermission> 
```

但是，下面没有。

```
<shiro:hasPermission name="inventory:po:*">
</shiro:hasPermission> 
```

Shiro 版本是 1.2.1。我也尝试使用 subject.isPermitted() 调用，但这也不起作用。

我确定这应该很简单，但是我在配置中是否遗漏了启用通配符支持的任何内容？请指教。

**希罗配置：**

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<!-- Security Manager -->
<bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager">
    <property name="realm" ref="jdbcRealm" />
    <property name="cacheManager" ref="cacheManager"/>
</bean>

<!-- Caching -->
<bean id="cacheManager" class="org.apache.shiro.cache.ehcache.EhCacheManager">
    <property name="cacheManager" ref="ehCacheManager" />
</bean>

<bean id="ehCacheManager"
    class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" />

<bean id="sessionDAO"
    class="org.apache.shiro.session.mgt.eis.EnterpriseCacheSessionDAO" />

<bean id="sessionManager"
    class="org.apache.shiro.web.session.mgt.DefaultWebSessionManager">
    <property name="sessionDAO" ref="sessionDAO" />
</bean>

<!-- JDBC Realm Settings -->
<bean id="jdbcRealm" class="org.apache.shiro.realm.jdbc.JdbcRealm">
    <property name="name" value="jdbcRealm" />
    <property name="dataSource" ref="dataSource" />
    <property name="authenticationQuery"
        value="SELECT password FROM system_user_accounts WHERE username=? and status=10" />
    <property name="userRolesQuery"
        value="SELECT role_code FROM system_roles r, system_user_accounts u, system_user_roles ur WHERE u.user_id=ur.user_id AND r.role_id=ur.role_id AND u.username=?" />
    <property name="permissionsQuery"
        value="SELECT code FROM system_roles r, system_permissions p, system_role_permission rp WHERE r.role_id=rp.role_id AND p.permission_id=rp.permission_id AND r.role_code=?" />

    <property name="permissionsLookupEnabled" value="true"></property>
    <property name="cachingEnabled" value="true" />
</bean>

<!-- Spring Integration -->
<bean id="lifecycleBeanPostProcessor" class="org.apache.shiro.spring.LifecycleBeanPostProcessor" />

<!-- Enable Shiro Annotations for Spring-configured beans. Only run after 
    the lifecycleBeanProcessor has run: -->
<bean id="annotationProxy"
    class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"
    depends-on="lifecycleBeanPostProcessor" />
<bean id="authorizationAttributeSourceAdvisor"
    class="org.apache.shiro.sprinemphasized textg.security.interceptor.AuthorizationAttributeSourceAdvisor">
    <property name="securityManager" ref="securityManager" />
</bean>

<!-- Secure Spring remoting: Ensure any Spring Remoting method invocations 
    can be associated with a Subject for security checks. -->
<bean id="secureRemoteInvocationExecutor"
    class="org.apache.shiro.spring.remoting.SecureRemoteInvocationExecutor">
    <property name="securityManager" ref="securityManager" />
</bean>

<!-- Passthrough for Login page -->
<bean id="passThruLogin" class="org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter">
    <property name="loginUrl" value="/login" />
</bean>

<!-- Shiro filter -->
<bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
    <property name="securityManager" ref="securityManager" />
    <property name="loginUrl" value="/login" />
    <property name="successUrl" value="/dashboard" />
    <property name="unauthorizedUrl" value="/error" />
    <property name="filters">
        <map>
            <entry key="authc" value-ref="passThruLogin" />
        </map>
    </property>
    <property name="filterChainDefinitions">
        <value> 
            <!-- !!! Order matters !!! -->
            /authenticate = anon
            /login = anon
            /logout = anon
            /error = anon
            /static/** = anon
            /** = authc
        </value>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T09:54:17.823

“ *** ”不是 shiro 权限**检查**中的通配符，相反它表示“需要所有值”。您应该声明自己的通配符权限（读取通常是一个很好的默认通配符权限）并在权限检查中明确。

相反，“*”表示“**授予**用户所有权利”，这让您与恕我直言混淆。

来自[shiro 关于权限的文档的](http://shiro.apache.org/permissions.html)*检查权限*部分

> `if ( SecurityUtils.getSubject().isPermitted("printer:print") ) { //print the document }`
> 
> 因此，这是不正确的检查。如果当前用户没有能力打印到任何打印机，但他们确实有能力打印，比如 lp7200 和 epsoncolor 打印机，该怎么办。那么上面的第二个示例将永远不允许他们打印到 lp7200 打印机，即使他们已被授予该能力！

# c - 在 C 中删除整个数组

> ID：15298822
> 
> 赞同：7
> 
> 时间：2013-03-08T16:33:19.427
> 
> 标签：c, arrays

我是**C新手，我想知道是否可以在****C**中删除整个数组，而不仅仅是一个元素？在 C++ 中有， **C**`delete[]`中有类似的东西吗？

 *** * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T16:44:09.727

1）如果您的数组声明是以这种方式完成的：

```
int A[20]; 
```

无法删除您的数组，因为它是静态分配的

2）如果您的数组声明是以这种方式完成的：

```
int *A=malloc(20 * sizeof(int));
//or
int *A=calloc(20, sizeof(int)); 
```

您的数组可以被删除，`free(A)`因为它是动态分配的

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T16:35:00.250

您可以只使用`free`删除动态分配的数组。

```
int* array = malloc(10*sizeof(int));
...
free(array); 
```

如果您为每个数组元素分配内存，则还需`free`要先分配每个元素。

```
char** array = malloc(10*sizeof(char*));
for (int i=0; i<10; i++) {
    array[i] = malloc(i);
}
....
for (int i=0; i<10; i++) {
    free(array[i]);
}
free(array); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T16:39:55.577

当您在 C 中使用 分配内存时`malloc`，一些额外的信息会存储在分配的块之后（或之前）。`free`使用此信息来了解您首先分配了多少内存并将释放整个块。所以如果你只分配了一个元素，例如一个结构，它只会释放一个元素。如果您分配了整个结构数组，它将释放整个事物。

在 C++ 中，您使用`new`and`new []`而不是 malloc，后者使用构造函数初始化值。这就是为什么有两种不同的`delete`：一种用于单值（`delete`），另一种用于数组（`delete []`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T16:34:56.937

如果您已经动态分配了数组（使用`malloc()`），您只需使用`free()`它来取消分配它。然后你不能再访问指针，因为你不再“拥有”内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T16:34:37.013

在 C++ 中，`delete`除非您使用过`new`. 如果您不使用动态分配，则不会释放内存。

在 C 中，看一下`malloc`，`free`如果你想控制你的数组的生命周期。

```
#include <stdlib.h>

int *array = malloc (size_in_bytes);

/* Some stuff. */

free (array); /* When I don't need it anymore. */ 
```

否则，自动变量会自动释放。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T16:34:53.887

如果您使用`malloc()`/`calloc`只需使用`free()`：

```
type * ptr = malloc(n * sizeof(type));
if(ptr == NULL)
    couldnt_allocate_memory();
/* ... */
free(ptr); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T16:36:15.223

选项卡的创建：malloc 或 calloc 函数。然后释放函数来释放它

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T16:37:50.030

在 C 中，如果您将数组声明为静态 ex: int a[10]，则无需删除。当您的函数结束或程序终止时，它将被释放。如果您使用任何内存分配技术 [malloc,calloc] 分配了内存，因为它是由您分配的，应该由您自己释放，并且您使用 free(ptr) 来释放分配的内存块。**

# qt - 无日志输出 Qt Creator

> ID：15298823
> 
> 赞同：1
> 
> 时间：2013-03-08T16:33:27.290
> 
> 标签：qt, qt-creator, qml

几天前，我的 Qt Creator 停止显示日志输出。我没有更改任何设置，这似乎是整个项目的问题，因为我的队友在查看 GIT 的最新版本后遇到了同样的问题。改回以前的版本并不能解决问题！有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T15:35:13.277

我有同样的问题。我的答案很简单...
确保您选择的构建套件`Debug`不是`Release`:) ![构建套件](../Images/1406b8fc65a2874607d0308dad237f78.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:12:37.067

检查 stderr/stdout 是否已被重定向到程序中的任何位置。因为我没有控制台，所以我有故意使用`freopen`我的错误处理程序重定向到文本文件的代码。`stderr`

在调试模式下，我确保打印到 Qt Creator 控制台和文本文件。

# python - webkitgtk /python 中的 DOM 事件

> ID：15298830
> 
> 赞同：0
> 
> 时间：2013-03-08T16:33:55.247
> 
> 标签：python, webkit, gtk, pygobject

我正在尝试在 python 中使用 webkit_dom_event_target_add_event_listener 函数。经过大量研究，我得出的结论是，该功能仅在 C 中可用。我目前对事件的兴趣主要是捕获元素的点击并对其进行操作。

我可以使用其他东西来获取世界 python 方面的事件通知吗？我能想到的一种 hacky 方法是在 javascript 中使用事件处理程序，然后使用警报处理程序将数据传递给 python。有没有其他方法，我可以在 python 中获取事件通知？

出于讨论的目的，webkit 显示的页面完全在我的控制范围内，并且可以轻松调整其代码。

在 ubuntu 12.10 上试过这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:10:18.190

[不幸的是，这对于 Python](https://bugs.webkit.org/show_bug.cgi?id=77835)和所有其他语言绑定仍然被破坏，除了 C :(

# vb.net - 如何将文本框文本插入现有的excel文件？VB.net

> ID：15298832
> 
> 赞同：0
> 
> 时间：2013-03-08T16:34:09.247
> 
> 标签：vb.net, excel

我想制作一个程序，使用循环将文本框中的文本保存到 excel 文件中，因为我想将多个文本插入到 excel 中。我找到了代码，但它只会覆盖单元格中的数据。我希望程序找到最后一行并将新数据插入下一行。我被困在这里，请有人帮助我如何在 vb.net 中做到这一点。这是我的代码：

```
 Excel = CreateObject("Excel.Application")
    Excel.screenupdating = True
    Excel.Visible = True

    'fieldnames
    Dim xlWorkSheet As Object = Excel.workbooks.add
    Excel.workbooks(1).worksheets(1).cells(1, 1).value = "TITLE"
    Excel.workbooks(1).worksheets(1).cells(1, 2).value = "AUTHOR"
    Excel.workbooks(1).worksheets(1).cells(1, 3).value = "EDITION"
    Excel.workbooks(1).worksheets(1).cells(1, 4).value = "PUBLISHER"
    Excel.workbooks(1).worksheets(1).cells(1, 5).value = "ISBN"

    'i want to loop here the data in textboxes
    Excel.workbooks(1).worksheets(1).cells(2, 1).value = txtTitle.Text
    Excel.workbooks(1).worksheets(1).cells(2, 2).value = txtAuthor.Text
    Excel.workbooks(1).worksheets(1).cells(2, 3).value = txtEdition.Text
    Excel.workbooks(1).worksheets(1).cells(2, 4).value = txtPublisher.Text
    Excel.workbooks(1).worksheets(1).cells(2, 5).value = txtISBN.Text

    xlWorkSheet.SaveAs(FileName)

    Excel.quit()
    Excel = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:56:14.440

您将需要动态设置 rowindex 和 aplha 列的值。所以像这样

```
dim currRow as integer = 0
Excel = CreateObject("Excel.Application")
Excel.screenupdating = True
Excel.Visible = True

'fieldnames
Dim xlWorkSheet As Object = Excel.workbooks.add
Excel.workbooks(1).worksheets(1).cells((currRow+1), 1).value = "TITLE"
Excel.workbooks(1).worksheets(1).cells((currRow+1), 2).value = "AUTHOR"
Excel.workbooks(1).worksheets(1).cells((currRow+1), 3).value = "EDITION"
Excel.workbooks(1).worksheets(1).cells((currRow+1), 4).value = "PUBLISHER"
Excel.workbooks(1).worksheets(1).cells((currRow+1), 5).value = "ISBN" 
```

当前行 += 1

对于 i 作为整数 = currRow 到 5

```
'i want to loop here the data in textboxes
Excel.workbooks(1).worksheets(1).cells((currRow + i), 1).value = txtTitle.Text
Excel.workbooks(1).worksheets(1).cells((currRow + i), 2).value = txtAuthor.Text
Excel.workbooks(1).worksheets(1).cells((currRow + i), 3).value = txtEdition.Text
Excel.workbooks(1).worksheets(1).cells((currRow + i), 4).value = txtPublisher.Text
Excel.workbooks(1).worksheets(1).cells((currRow + i), 5).value = txtISBN.Text 
```

下一个

当前行 += 1

```
xlWorkSheet.SaveAs(FileName)

Excel.quit()
Excel = Nothing 
```

我不知道这是否有效，但这是让你开始的东西。

# javascript - 使用 ng-repeat 为输入字段创建动态行

> ID：15298833
> 
> 赞同：2
> 
> 时间：2013-03-08T16:34:09.940
> 
> 标签：javascript, angularjs

对 angularjs 来说非常新，所以如果它很简单，请原谅我。

我想使用 angularjs 的 ng-repeat 为输入字段创建动态行。基本上我有一个问题对象，我想为该问题添加选项，默认情况下用户将有 2 行选项，但他/她可以添加更多选项来添加另一行。

[提琴手](http://jsfiddle.net/rahulr/J7ae9/)

```
<div nd-repeat="option in question.options">
      <label>{{$index+1}}</label>
          <input type="text" ng-model="option.number" ng-change="change()" />
      <input type="text" ng-model="option.description" ng-change="change()" />
      <br/>
  </div> 
```

基本上我面临两个问题：

> 我应该如何使用 ng-model 添加具有 2 个输入（空）的新行，并将该 ng-model 读回控制器中？我不想添加任何空字段的新选项，我希望将选项对象添加到数组中，并且当用户编辑这些输入字段时，应该通过 ng-model 在控制器中更新值
> 
> 如何形成问题对象，以便我可以将其发送到问题对象具有作为选项数组的属性的服务器（自动映射应该可以工作）

这是我在服务器端的模型以供提问和选择..

```
public class Option
{
    public int Number { get; set; }
    public string Description { get; set; }
}

public class Question
{
    public int Id { get; set; }
    //....opther properties
    public Option[] Options { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T17:31:16.723

最简单的方法是使用新行的“option_new”模型：http: [//plnkr.co/edit/KERIO0](http://plnkr.co/edit/KERIO0)

# mysql - 如何保护 mysql 表免受意外的大规模更新

> ID：15298836
> 
> 赞同：2
> 
> 时间：2013-03-08T16:34:13.473
> 
> 标签：mysql

偶尔没有“where”子句的更新语句可能很容易破坏你的所有数据，我在 mysql 控制台中输入 UPDATE 语句时总是很紧张，害怕在输入“where”之前按 enter。

所以，我想知道是否可以保护表免受 mySQL 级别上的“where”子句的更新查询？有点简单地禁用它。
是的，我很清楚备份:-) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:36:52.060

不是侮辱：打开[--i-am-a-dummy](http://dev.mysql.com/doc/refman/4.1/en/mysql-tips.html#safe-updates)模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:42:23.177

MySQL 有 --safe-updates 开关，大多数其他数据库没有。这就是为什么在这种情况下，我个人总是从 where 子句开始写作：

```
where x > 134; 
```

然后将光标移动到开头并添加：

```
update whatever set a = 2 where x > 134; 
```

这样，查询直到它有效的那一刻才会出现语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-04T12:39:01.907

只需在要阻止它的表中添加触发器。

# html - Android 平板电脑似乎忽略了元视口

> ID：15298838
> 
> 赞同：4
> 
> 时间：2013-03-08T16:34:16.013
> 
> 标签：html, css, viewport, meta

我有一个网站，我正试图让它在所有设备中都能完美使用。

我正在使用媒体查询来根据设备指定不同的布局。但是，我对视口有疑问。

我的视口标签是：

```
<meta name="viewport" content="width=device-width"> 
```

它完美地放在 iPad 上，但在 android 平板电脑上，它似乎忽略了元视口标签。

（请原谅糟糕的照片。iPhone 相机！使用同事的平板电脑，不想进入他的电子邮件给自己发送屏幕截图）

以下是它的加载方式——注意它没有正确显示缩放级别。它放大得太远，一些页面不在屏幕右侧： ![在此处输入图像描述](../Images/8bc3d0ceda70caff7de4633debbb06e6.png)

当我捏缩小（在允许的范围内）时，它看起来像这样 - 这就是我希望它在用户缩小之前在第一次加载时出现的方式：

![在此处输入图像描述](../Images/e37fe74004d0de57346ef4f237dca11d.png)

当我旋转设备时，它根本不会改变显示宽度，因此它以相同的缩放级别显示，但两边都有空白。

有没有人知道如何让它表现得更好，这样我就可以去周末喝酒了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T06:44:37.980

您的页面正在被裁剪，因为您的浏览器 css 像素的大小大于您的设备物理像素的大小。

尝试将此 JavaScript 放在您的标题中以解决您的问题。

```
<script type="text/javascript">

    var scale = 1 / window.devicePixelRatio;

    var viewportTag = "<meta id=\"meta1\" name=\"viewport\" content=\"width=device-width, height=device-height, initial-scale=" + scale + ", maximum-scale=1, user-scalable=no\"/>";        

    document.write(viewportTag);        

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:07:20.403

不同版本的 Android 以不同的方式处理视口。

你用的是什么版本的安卓？

这是我的蹩脚的javascript hack来修复它：

```
<head>
  <!-- other stuff in the head tag goes here -->
  <script type="text/javascript">
    function viewport_to_device_width() {
      // omit viewport meta tag (to force setting initial scale to full extent) by returning false
      var b = true;
      if (window.navigator.userAgent.match(/android 2.2/i) || window.navigator.userAgent.match(/android 2.3/i) || window.navigator.userAgent.match(/android 4.0/i)) {
        b = false;
      } else if (window.navigator.userAgent.match(/android/i) && window.navigator.userAgent.match(/Linux armv7l/i) && window.navigator.userAgent.match(/fennec/i)) {
        b = false;
      }
      return b;
    }
    if (viewport_to_device_width()) {
      // omit viewport meta tag for Android 2.2 and Android 4.0 to force setting initial scale to full extent
      document.write('<meta name="viewport" content="width=device-width">');
    }
  </script>
  <noscript>
    <meta name="viewport" content="width=device-width">
  </noscript>
</head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:38:24.640

您是否尝试过添加`initial-scale=1.0`内容？那应该可以，但是如果不行，我可能会尝试在其中添加更多属性。您可以在此处阅读有关所有[不同视口属性](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)的更多信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T15:03:24.063

不同的浏览器工作方式不同。我可以在 Nexus 7 上正常工作的唯一浏览器是 Dolphin，它在 HTML5 按钮等方面存在其他问题。

# c# - 如何在不知道 doctype 的情况下检索文件

> ID：15298840
> 
> 赞同：0
> 
> 时间：2013-03-08T16:34:17.700
> 
> 标签：c#, file-io

我从文档名称列表中查询主文件夹。文档类型是任意的。每个文件都存储在同名的文件夹中。

样本结构：

主文件夹

-> 培根 --> bacon.doc

-> 樱桃 -> 樱桃.pdf

现在我有代码：

```
FileInfo file = new FileInfo(@"\\Main folder\\ + string[i] + "\\" + string[i]); 
```

但我不知道要附加什么，以便它搜索相同字符串 [i] 的任何文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:38:14.597

也许你应该看看这样的东西......

```
string[] filePaths = Directory.GetFiles(@"c:\MyDir\");
// returns:
// "c:\MyDir\my-car.BMP"
// "c:\MyDir\my-house.jpg" 
```

首先获取文件路径。然后将其用于 FileInfo 构造函数。

[http://www.csharp-examples.net/get-files-from-directory/](http://www.csharp-examples.net/get-files-from-directory/)

# javascript - 要求登录附加链？

> ID：15298842
> 
> 赞同：0
> 
> 时间：2013-03-08T16:34:28.307
> 
> 标签：javascript, jquery

我有一些经典的 JQuery / JavaScript 代码，我在其中使用方法链接附加了一堆元素。

```
jQuery('<div>').addClass('HEADER').append(
                    jQuery('<span>').addClass('TARGET ').html('&nbsp;').css('width', '25px')
                ).append(
                    jQuery('<span>').addClass('NAME HEADER').text(localization.opportunity).css('width', defaultNameSize-paddingTotal)
                ).append(
                    jQuery('<span>').addClass('HEIGHT HEADER').text(localization.amount)
                ).append(
                    jQuery('<span>').addClass('ANSWER HEADER').css('display', 'none').text(localization.solution)
                ).append(
                    jQuery('<span>').addClass('VALUETYPE HEADER').text(localization.type)
                ).append(
                    jQuery('<span>').addClass('VALUETOLEFT HEADER').css('display', 'none').text(abbreviate(CAT_VALUETOUS))
                ).append(
                    jQuery('<span>').addClass('VALUETORIGHT HEADER').css('display', 'none').text(abbreviate(CAT_VALUETOTHEM))
                ) 
```

我只想在这样那样的条件为真时才在中间附加一个元素。我可以把它分成三个不同的方法链，并在中间添加逻辑，看看是否应该附加这样和这样的元素。

但是，我想知道是否有更优雅的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:37:18.793

如果您的条件不满足，您可以简单地使用条件运算符选择性地传递`null`给。`.append()`jQuery 不会介意的。

```
// snip
.append(...)
.append(someBoolean ? jQuery(...) : null)
.append(...)
// snip 
```

请注意[，创建元素的语法](http://api.jquery.com/jQuery/#jQuery2)比您使用的更紧凑：

```
jQuery('<span>', { 'class': 'foo', text: 'bar', css: 'baz' }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:39:31.710

创建一个表示您希望附加的元素的对象数组。例如

```
var elements = [{ element: '<span>',
                  class: 'TARGET',
                  html: 'stuff',
                  text: 'node text'
               }];

$(elements).each(function(i, element) {
    // your logic here
    $('<div>')
       .append(element.element)
       .addClass(element.class)
       .html(element.html)
       .text(element.text);
}); 
```

# python - SimpleCV中的特殊颜色直方图

> ID：15298848
> 
> 赞同：0
> 
> 时间：2013-03-08T16:34:42.453
> 
> 标签：python, histogram, hsv, simplecv

我需要在 SimpleCV 中构造颜色直方图（使用 HSV 颜色空间），问题是直方图只需要包含饱和度和亮度超过一定水平（每个通道不同）的颜色。我如何实现这一目标？

我是计算机视觉领域的新手，所以我什至不知道要谷歌搜索哪些关键字，所以如果有人知道一些好的网站或文章来阅读更多关于此事的信息，那也会非常有帮助。

尊敬的安德拉兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:37:39.067

在 OpenCV 中，您可以使用`cv2.inRange(src, lowerb, upperb[, dst]) --> dst`

`hsv_filtered = cv2.inRange(hsv, [0, low_sat, low_value], [255, 255, 255])`过滤掉您感兴趣的值。

除了 SimpleCV，看看 OpenCV python 绑定（我认为你可以直接在 SimpleCV（导入 cv2）中使用它们，但不确定）和 SciPy：

[http://docs.scipy.org/doc/scipy/reference/ndimage.html](http://docs.scipy.org/doc/scipy/reference/ndimage.html)用于直方图函数。

我想 SimpleCV 中也应该有类似的功能，但我对此并不熟悉。

# css - 如何在 IE 8 及以下版本中删除选择元素周围的黑色边框效果？

> ID：15298851
> 
> 赞同：2
> 
> 时间：2013-03-08T16:34:50.750
> 
> 标签：css, forms, internet-explorer, select, border

我一直在寻找一个小时来了解如何在 IE 8 及以下版本中删除选择元素的顶部和左侧周围的黑色边框/阴影。我遇到的一切都不起作用。

我正在使用 normalize.css 并在选择元素的错误状态周围设置一个 1 像素的纯红色边框。

有人能告诉我如何去除顶部和左侧的黑色吗？我已经尝试了各种各样的东西，包括过滤器属性、绝对定位和其他一些东西，但没有任何效果。

这是我所指内容的放大屏幕截图：

![在此处输入图像描述](../Images/5e696df3e322e483d75bdf002690c636.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:43:01.460

尝试在您的 CSS 中设置以下内容：

```
select {
  outline: 0 !important;
} 
```

然而，为 select 元素设置样式是出了名的不靠谱的尝试。选择很像文件输入，因为浏览器不遵守应用于它们的样式规则。

如果您想更深入地了解如何解决这些问题，我强烈建议您查看[上一篇文章。](https://stackoverflow.com/questions/1895476/how-to-style-a-select-dropdown-with-css-only-without-javascript)

# iis - 在 Windows Server 2008 上降级 IIS 版本

> ID：15298852
> 
> 赞同：2
> 
> 时间：2013-03-08T16:34:51.610
> 
> 标签：iis

有谁知道是否可以在 Windows Server 2008 上将 IIS 版本 7 降级为较低版本的 IIS？我在 win 2000 服务器上有一个 ASP 程序，我计划在更好的硬件和软件上迁移这个程序，但我得到了 HTTP 500，在详细的错误日志中，我看到了经典 asp 和 IIS 7 的抱怨。显然，在我的情况下（由另一个程序员）使用的 ASP 是旧的经典 ASP 平台，现在有了这个冲突，我无法让我的网络服务器正常运行。

任何帮助/想法将不胜感激。

谢谢，艾伦

# sql - 如果项目在特定时间段内具有值，则排除项目

> ID：15298855
> 
> 赞同：0
> 
> 时间：2013-03-08T16:34:54.043
> 
> 标签：sql, subquery, where-clause, having-clause

我正在尝试返回销售特定产品的帐户列表 (SourceCustomerProductCode = 102) 并希望查看在 2013 年销售此产品的帐户，但如果他们在 2012 年销售，我希望将它们排除在我的查询（即我只想返回新客户）。我的以下查询是返回 2013 年销售此产品的帐户，但包括 2012 年销售此产品的帐户。

我知道我可以在 [CaseAndGalloneVolume] 语句中使用 case when 来在 SELECT 区域下编写此语句，但需要在 where 子句中编写此语句，因为最终我要将其他产品添加到我的表中。

谢谢你的帮助！

```
SELECT 

sum([FactActualDetail].[CaseAndGallonVolume]) AS [CaseAndGallonVolume],
sum([FactActualDetail].[AdjGrossMarginAmount]) AS [AdjGrossMarginAmount],
left([FactActualDetail].[SourceCustomerProductCode],7) as [Acct #]

FROM [dbo].[FactActualDetail] [FactActualDetail] 

LEFT JOIN [dbo].[DimCustomer] [DimCustomer] ON ([FactActualDetail].[CustomerSK] [DimCustomer].[CustomerSK])
LEFT JOIN [Common].[DimDate] [DimDate] ON ([FactActualDetail].[DeliveryDateSK] = [DimDate].[DateSK])

WHERE [Fiscal_Year] = 2013 AND [EQMultiplier] > 0 AND ([SuperChannelCode] = 04 OR [SuperChannelCode] = 06 OR [SuperChannelCode] = 07) AND (substring([SourceCustomerProductCode],8,3) = 102) 

GROUP BY left([FactActualDetail].[SourceCustomerProductCode],7) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:40:51.840

尝试放置

```
HAVING MIN([Fiscal_Year]) = 2013 
```

在查询结束时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:45:19.677

添加一个新的聚合列：

```
sum(case when year = 2013 then 1 else 0 end) as invalidItemCount 
```

并对其进行过滤：

```
having invalidItemCount = 0 
```

This works for arbitrary filter expressions, not just for just the year 2013.

# oop - 扩展 MATLAB uicontrol

> ID：15298859
> 
> 赞同：2
> 
> 时间：2013-03-08T16:35:03.027
> 
> 标签：oop, matlab, user-interface

我想自定义一些 MATLAB uicontrols（例如下拉框），以赋予它们更多用户友好的功能。

我的问题是：是否可以扩展/继承 uicontrol？如果是这样，你怎么做？如果没有，是否有解决方法？

我已经尝试过这个基本代码来设置它，但我收到以下错误：

`The specified super-class 'uicontrol' contains a parse error or cannot be found on MATLAB's search path, possibly shadowed by another file with the same name.`

```
classdef ComboBox < uicontrol    
    methods(Access = public)
        function obj = ComboBox()
            set(obj, 'Style', 'popup');
        end 
    end
end 
```

当我尝试将其添加到图形时发生错误：

```
cmb = ComboBox();
set(cmb, 'Parent', obj.ui_figure); 
```

* * *

编辑：经过考虑，我认为这将是一个不错的解决方法，但是，如果可能的话，我仍然想知道如何扩展 uicontrol。

```
classdef ComboBox < uicontrol    
    properties(Access = public)
       Control;
    end

    methods(Access = public)
        function obj = ComboBox(parent, items)
            obj.Control = uicontrol();
            set(obj.Control, 'Style', 'popup');
            set(obj.Control, 'Parent', parent);
            set(obj.Control, 'String', items);
        end 
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T17:19:11.370

1.  没有记录的方法（从 R2013a 开始）将子类写入 MATLAB Handle Graphics 类。事实上，由于 MATLAB 存储 hg 对象的方式，我们甚至无法轻松获取 hg 对象的类。例如：

    ```
    >> fig = figure();
    >> class(f)

    ans =

    double

    >> isa(f, 'figure')

    ans =

         0

    >> ishghandle(f)

    ans =

         1 
    ```

2.  对此的一种解决方案是编写一个类，该类继承[`handle`](http://www.mathworks.com/help/matlab/ref/handle.html), 或
    [`hgsetget`](http://www.mathworks.com/help/matlab/ref/hgsetget.html), 并将 uicontrol 对象的句柄作为私有属性。例如：

    ```
    classdef ComboBox < hgsetget
        properties (Access = private)
            Control
        end

        properties
            % extend the functionality of your new uicontrol with additional
            % properties
            newProp1
            newProp2
        end

        properties (Dependent = true)
            % make any properties of uicontrol for which you want to still
            % allow access as dependent properties. define set and get methods
            % for these properties below
            fontSize
            foregroundColor
            backgroundColor
            items
        end

        methods
            function obj = ComboBox(parent, items)
                obj.Control = uicontrol(parent, 'Style', 'popup', ...
                    'String', items);
                % make sure to delete this object if you delete the uicontrol
                set(obj.Control, 'DeleteFcn', {@(source, eventData)delete(obj)})
            end

            % Define set and get methods for your new properties. These methods
            % will set the actual properties, and then modify the uicontrol in
            % some way
            function prop = get.newProp1(obj)
                prop = obj.newProp1;
            end

            function set.newProp1(obj, newVal)
                obj.newProp1 = newVal;
                % do something else
            end

            function prop = get.newProp2(obj)
                prop = obj.newProp2;
            end

            function set.newProp2(obj, newVal)
                obj.newProp2 = newVal;
                % do something else
            end

            % Define set and get methods for any uicontrol properties you wish
            % to retain. These methods will simply redirect calls to the
            % uicontrol object.
            function size = get.fontSize(obj)
                size = get(obj.Control, 'FontSize');
            end

            function set.fontSize(obj, newSize)
                set(obj.Control, 'FontSize', newSize);
            end

            function color = get.backgroundColor(obj)
                color = get(obj.Control, 'BackgroundColor');
            end

            function set.backgroundColor(obj, newColor)
                set(obj.Control, 'BackgroundColor', newColor);
            end

            function color = get.foregroundColor(obj)
                color = get(obj.Control, 'ForegroundColor');
            end

            function set.foregroundColor(obj, newColor)
                set(obj.Control, 'ForegroundColor', newColor);
            end

            % You can even rename some uicontrol properties to fit your
            % purpose.
            function items = get.items(obj)
                items = get(obj.Control, 'String');
            end

            function set.items(obj, newItems)
                set(obj.Control, 'String', newItems);
            end

        end
    end 
    ```

    然后，您可以`ComboBox`像使用任何其他`uicontrol`句柄一样使用 ：

    ```
    obj = ComboBox(figure, 'hello|goodbye');
    set(obj, 'items', 'newItem1|newItem2'); 
    ```

3.  有扩展句柄图形类的未记录方法，但我不熟悉它们。查看此参考： [http ://undocumentedmatlab.com/blog/introduction-to-udd/](http://undocumentedmatlab.com/blog/introduction-to-udd/)

# android - Does an onTouchListener need to be refreshed or re-set if the target view changes size?

> ID：15298860
> 
> 赞同：1
> 
> 时间：2013-03-08T16:35:04.243
> 
> 标签：android

I have an imageView with some listeners, such as onClickListener and onLongClickListener. The onLongClickListener responds by adding an onTouchListener to the same view, to listen for motion events. The purpose of this is that when user long clicks on the button, he can then resize it.

The imageView resizing works (not very well, but enough for testing), but, after resizing, all the listeners attached to the view **only respond to touches in the area covered by the original dimensions of the imageView**. So if user stretches the button downwards to double its height, only the top half will respond to click and touch events.

So do I have to either;

*   detach and re-attach all of the listeners?

*   update the listeners somehow?

Here is my code

```
sendButton = (ImageView) findViewById(R.id.sendButton);
    sendButton.setOnLongClickListener(new View.OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            Log.d("long click", "long click");
            v.setOnTouchListener(new View.OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    final int action = event.getAction();
                    int currentY = 0;
                    switch (action & MotionEvent.ACTION_MASK) {

                    case MotionEvent.ACTION_DOWN:
                        currentY = (int) event.getY();
                        break;

                    case MotionEvent.ACTION_MOVE:
                        if (event.getY() > currentY) {
                            Log.d("y dir", String.valueOf(event.getY()));
                            ViewGroup.LayoutParams params = buttonSpace
                                    .getLayoutParams();
                            params.height++;
                            buttonSpace.setLayoutParams(params);
                        } else if (event.getY() < currentY) {
                            Log.d("y dir", "up");
                            ViewGroup.LayoutParams params = buttonSpace
                                    .getLayoutParams();
                            params.height--;
                            buttonSpace.setLayoutParams(params);
                        }
                        currentY = (int) event.getY();
                        break;

                    }
                    return false;
                }
            });
            return true;
        }
    });

    sendButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            sendButtonPressed();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:17:05.053

Just a tip, you can just switch on `event.getAction()`, there's no need to use the bitmask if you're not handling multiple pointers.

As far as your problem, you should be requesting a layout after changing the layout params. Remove the `setLayoutParams()` calls (you're already modifying the params that are attached the view) and replace them with `buttonSpace.requestLayout()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:24:24.513

So the problem actually turned out to be the fact that my listener was attached to the wrong element. I was attaching it to **sendButton** (which is a child of buttonSpace) but I was only resizing **buttonSpace**.

Here is the refactored code, with other improvements suggested here.

```
buttonSpace = (RelativeLayout) findViewById(R.id.button_space);
buttonSpace.setOnLongClickListener(new View.OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            v.setOnTouchListener(new View.OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    final int action = event.getAction();
                    ViewGroup.LayoutParams params = buttonSpace
                            .getLayoutParams();
                    switch (action) {

                    case MotionEvent.ACTION_DOWN:
                        oldY = (int) event.getY();
                        break;

                    case MotionEvent.ACTION_MOVE:
                        int newY = (int)event.getY();

                        int deltaY = 0;
                        if(oldY > 0){
                            deltaY = oldY - newY;
                        }
                        oldY = newY;
                        params.height -= deltaY;
                        buttonSpace.requestLayout();
                        break;
                    }
                    return false;
                }
            });
            return true;
        }
    });

    buttonSpace.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            sendButtonPressed();
        }
    }); 
```

# jquery - jquery 不会点击新生成的类，尝试委托

> ID：15298861
> 
> 赞同：2
> 
> 时间：2013-03-08T16:35:06.743
> 
> 标签：jquery, css

我有一个按钮，当我点击它时，我添加了类`revert-back`，然后当我点击这个新类时没有任何反应。我最初尝试了一个简单`.click`的方法，但由于那不起作用，我找到了一些关于使用`.delegate`. 问题是当我使用它时，它会立即自动点击

因此，一旦我单击`show-more`它就会立即再次向上滑动并显示“按钮单击”警报。

```
$(".show-more").click(function () {
    $(".show-more-products").addClass("revert-back");
    $(".show-more-products").removeClass("show-more");
    $(".all-products").slideDown(100);
    $('.show-more-products').html('Show Less');
});
$('.product-grid').delegate('.revert-back', 'click', function () {
    alert('Button Clicked');
    $(".all-products").slideUp(100);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:38:37.753

尝试`.on()`改用。

```
$('.product-grid').on('click','.revert-back', function () {
     alert ('Button Clicked');
     $(".all-products").slideUp(100);
}); 
```

# powershell - WMI Export-CSV 为 IP 地址创建 System.String（动态选择对象）

> ID：15298864
> 
> 赞同：1
> 
> 时间：2013-03-08T16:35:13.093
> 
> 标签：powershell

此代码在导出到 CSV 时会导致 IPAddress 字段的“System.String[]”输出。我知道解决此问题的方法是加入该字段，但我根据用户选择的设置动态选择对象，所以我不确定如何修复它。任何帮助表示赞赏。

```
$colItems = GWMI Win32_NetworkAdapterConfiguration -computername $PCname  -namespace "root\CimV2" -filter "IpEnabled = TRUE" 

###Define Settings Array
$settings_array = @()
Foreach ($objItem in $chklstGetMIPRet.CheckedItems)
{$settings_array += [String]$objItem}
#####

###Export to CSV
$colItems | Select-Object -Property $settings_array | export-  csv "$ScriptDir\Exports\$Outputfile" -NoType 
```

$chklstGetMIPRet 是一个复选框，用户可以选择他们希望显示的 WMI 类。$chklstGetMIPRet.CheckedItems 包含该检查列表框中当前检查的所有值。所以 foreach 会通过，并且对于每个选中的项目将该值添加到 $settings_array

编辑：

此代码有效：

```
$prop_list = @{"MACAddress" = "MACAddress"}
$prop_list += @{"Caption" = "Caption}
$prop_list += @{"IPAddress" = $colItems.IPAddress -join ', '}

Foreach ($objItem in $chklstGetMIPRet.CheckedItems)
 {$exp_settings_array += $prop_list[$objItem]}

$colItems | Select-Object -Property $exp_settings_array | export-csv "$ScriptDir\Exports\$Outputfile" -NoType 
```

除了导出时，我使用标签正确获取标题和 MAC 地址，但 IPAddress 只是将实际 IP 导出到没有标签的顶行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:53:34.693

我不确定你需要如何实现它，但根本原因是该字段实际上是一个字符串数组。这将为您提供一个示例：

```
$colItems = GWMI Win32_NetworkAdapterConfiguration -computername $PCname  -namespace "root\CimV2" -filter "IpEnabled = TRUE"
$settings_array = @()
$settings_array += 'DHCPEnabled'
$settings_array += @{n='IPAddress';e={$_.IPAddress -join ', '}}
$colItems | Select-Object -Property $settings_array 
```

显然，您必须在代码中的 $chklstGetMIPRet.CheckedItems 属性中使用它。

在您的情况下，我建议您使用一个哈希表，该哈希表的键与已检查项匹配，而值则表示要添加到该项目的属性数组中的确切内容。例如（未经测试，因为我没有时间模拟一个表格来测试它）：

```
$ph = @{n='IPAddress';e={$_.IPAddress -join ', '}
$propertyLookup = @{'DHCPEnabled' = 'DHCPEnabled';
                        'IPAddress' = $ph
                       } 
```

这为您提供了查找哈希，然后在您构建属性数组的 foreach 中：

```
$settings_array += $propertyLookup[$objItem] 
```

# ruby - Perl 相当于 Ruby 的分区函数？

> ID：15298870
> 
> 赞同：1
> 
> 时间：2013-03-08T16:35:25.517
> 
> 标签：ruby, arrays, perl

一个基本的例子是我有一个数组`['abc','cde','efg']`，想把它分成两个数组。一个包含包含 a 的元素`c`，一个包含其余元素。

在红宝石中，我只想说：

```
has_c, no_c = arr.partition { |a| a.include?('c') } 
```

是否有一个简单的 perl 等价物？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T16:44:18.280

中的[`part`](http://search.cpan.org/perldoc?List::MoreUtils#part)功能[`List::MoreUtils`](http://search.cpan.org/perldoc?List::MoreUtils)：

```
use List::MoreUtils 'part';
my $listref = [ 'abc', 'cde', 'efg' ];

my ($without_c, $with_c) = part { /c/ } @$listref;

print "with c : @$with_c\n";
print "without: @$without_c\n"; 
```

输出：

```
with c : abc cde
without: efg 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:49:21.583

我用三元运算符尝试了几件事，这似乎有效：

```
#!/usr/bin/perl
use warnings;
use strict;

my @a = qw[abc cde efg];
my (@has_c, @no_c);
push @{ \(/c/ ? @has_c : @no_c) }, $_ for @a;

print "c: @has_c\nno: @no_c\n"; 
```

**更新：**简化。

# c# - 线程类“飞溅型”屏幕的 TPL 等效项

> ID：15298871
> 
> 赞同：6
> 
> 时间：2013-03-08T16:35:26.493
> 
> 标签：c#, task-parallel-library

给定下面的类，在备用线程上启动启动屏幕：

```
public partial class SplashForm : Form
{
    private static Thread _splashThread;
    private static SplashForm _splashForm;    

    public SplashForm()
    {
        InitializeComponent();
    }

    // Show the Splash Screen (Loading...)      
    public static void ShowSplash()    
    {        
        if (_splashThread == null)        
        {            
            // Show the form in a new thread.          
            _splashThread = new Thread(new ThreadStart(DoShowSplash));            
            _splashThread.IsBackground = true;            
            _splashThread.Start();        
        }    
    }    

    // Called by the thread.  
    private static void DoShowSplash()    
    {        
        if (_splashForm == null)            
            _splashForm = new SplashForm();       

        // Create a new message pump on this thread (started from ShowSplash).       
        Application.Run(_splashForm);
    }    

    // Close the splash (Loading...) screen.
    public static void CloseSplash()    
    {        
        // Need to call on the thread that launched this splash.      
        if (_splashForm.InvokeRequired)            
            _splashForm.Invoke(new MethodInvoker(CloseSplash));        
        else            
            Application.ExitThread();    
    }
} 
```

使用以下相应命令调用并关闭它

```
SplashForm.ShowSplash();
SplashForm.CloseSplash(); 
```

美好的。

我对 TPL 并不陌生，当然我们可以使用以下简单的方法在另一个线程上显示表单：

```
Task task = Task.Factory.StartNew(() => 
{
    SomeForm someForm = new SomeForm();
    someForm.ShowDialog();
}; 
```

我的问题是`SomeForm`当你准备好时关闭它。必须有比`public static`在`SomeForm`类中创建方法更好的方法

```
private static SomeForm _someForm;
public static void CloseSomeForm()    
{        
    if (_someForm.InvokeRequired)            
        _someForm.Invoke(new MethodInvoker(CloseSomeForm));        
} 
```

我的问题是，**使用上面使用任务并行库 (TPL) 的 SplashForm 类执行相同操作的最佳方法是什么？**具体来说，关闭 UI 中另一个线程上调用的表单的最佳方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:42:28.063

您的问题似乎与和之间的区别不大`Thread`，`Task`因为您想要摆脱“肮脏”的静态状态。我建议你将它封装到一个类中：

```
class SplashController
{
    public void Run() {
        _someForm = new SomeForm();
        someForm.ShowDialog();
    }

    private SomeForm _someForm;
    public void CloseSomeForm()    
    {        
        if (_someForm.InvokeRequired)            
            _someForm.Invoke(new MethodInvoker(CloseSomeForm));        
    }
} 
```

您可以使用您喜欢的任何线程机制调用 Run。CloseSomeForm 不使用线程，因此它与此问题无关。

您现在可以存储对`SplashController`任何您喜欢的实例的引用。在局部变量中或实际上在静态变量中。后者是有道理的，因为只有一个启动画面。

因为现在已经很好地封装了静态状态，所以我认为静态保持它没有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:52:12.623

你可能不应该做这样的事情

```
Task task = Task.Factory.StartNew(() => 
{
    SomeForm someForm = new SomeForm();
    someForm.ShowDialog();
}; 
```

因为它需要一个消息循环出现在创建表单的确切线程上，这是一个线程池线程。但我没有测试过这个。

你可以试试这个：

```
public static Task<SplashForm> ShowSplash()    
{        
    var tcs = new TaskCompletionSource<SplashForm>();

    // Show the form in a new thread.          
    _splashThread = new Thread(() =>
    {
        var splashForm = new SplashForm();       

        tcs.SetResult(_splashForm);

        // Create a new message pump on this thread (started from ShowSplash).       
        Application.Run(splashForm);
    });

    _splashThread.IsBackground = true;            
    _splashThread.Start();        
} 
```

这将允许您从 CloseSplash 中删除静态修饰符：

```
// Close the splash (Loading...) screen.
public void CloseSplash()    
{        
    // Need to call on the thread that launched this splash.      
    if (this.InvokeRequired)            
        this.Invoke(new MethodInvoker(CloseSplash));        
    else            
        Application.ExitThread();    
} 
```

可以这样使用：

```
var form = await SplashForm.ShowSplash();
form.CloseSplash(); 
```

# sql - 调用Spring存储过程后如何解锁表

> ID：15298873
> 
> 赞同：1
> 
> 时间：2013-03-08T16:35:33.840
> 
> 标签：sql, spring, hibernate, sql-server-2005

我有一个 SQL Server 2005 存储过程，可以将一堆行从一个表移动到另一个表。我正在使用spring的`StoredProcedure`类来调用该过程。这是代码：

```
public class MigracionPagoMasivoNormalATemporalStoredProcedure extends StoredProcedure    {
...
    public Long ejecutar(final Long idPagoMasivo) {
        final Map<String, Object> inputs = new HashMap<String, Object>();
        Map<String, Object> outs = new HashMap<String, Object>();

        inputs.put(ID_UPLOAD_HEADER, idPagoMasivo);
        inputs.put(ID_UPLOAD_HEADER_TEMPORAL, 0);

        try {
            outs = super.execute(inputs);
            return Long.valueOf((Integer) outs.get(ID_UPLOAD_HEADER_TEMPORAL));
        } catch (final Exception e) {
            // TODO dcalderon: Controlar excepciones
            e.printStackTrace();
        }

        return new Long(0);
     }
} 
```

该过程被成功调用，并且完全按照它的意图进行。问题是我必须在之后查询迁移的行。这次我使用休眠。两种方法都可以很好地分开，但是我假设存储过程以某种方式锁定了表并阻止了查询的执行。

这是存储过程：

```
CREATE PROCEDURE dbo.SP_PM_MIGRARLOTENORMALATEMPORAL(@ID_UPLOAD_HEADER int, @ID_UPLOAD_HEADER_TEMPORAL int OUTPUT)
AS
BEGIN
  BEGIN TRANSACTION

  /* Se migra el pago masivo de la tabla normal a la tabla temporal*/
 INSERT INTO UPLOAD_HEADER_TEMPORAL (id_upload_header, ...)
 SELECT [id], ...
 FROM UPLOAD_HEADER WHERE [id] = @ID_UPLOAD_HEADER

 SET @ID_UPLOAD_HEADER_TEMPORAL = (SELECT SCOPE_IDENTITY())

 /* Se migra el detalle del pago masivo de la tabla normal a la temporal */
 INSERT INTO UPLOAD_RECORD_TEMPORAL (id_header, ...)
 SELECT @ID_UPLOAD_HEADER_TEMPORAL, ... FROM UPLOAD_RECORD
 WHERE id_header = @ID_UPLOAD_HEADER

 /* Se hace update al estado del detalle en la tabla temporal */
 UPDATE UPLOAD_RECORD_TEMPORAL SET status = 0 WHERE id_header = @ID_UPLOAD_HEADER_TEMPORAL

 COMMIT TRANSACTION
END 
```

我的问题是，如何执行查询，恢复表的锁？（我已经调试了代码，我知道它被锁定在查询中）。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T04:35:33.357

插入时表格将被锁定

如果您不关心新数据，您应该等待那个时间范围，您可以使用任何脏读方法，例如 NOLOCK

或读取未提交的隔离级别 - 在任何方面均不建议使用此方法

建议 - 尽量使用 Transaction 和 Atomic 来避免锁定

# ruby-on-rails - 使用标签更新博客文章时出错

> ID：15298875
> 
> 赞同：0
> 
> 时间：2013-03-08T16:35:44.733
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

您好，我刚开始使用 Ruby on Rails，它是一种非常酷的语言。但是在完成本教程后，我遇到了一个我不太理解的错误，因为我遵循了 ruby​​onrails.org 上的入门教程

这是我认为给出问题的代码

```
<%= form.fields_for :tags do |tag_form| %>
<div class="field">
  <%= tag_form.label :name, 'Tag:' %>
  <%= tag_form.text_field :name %>
</div>
<% unless tag_form.object.nil? || tag_form.object.new_record? %>
  <div class="field">
    <%= tag_form.label :_destroy, 'Remove:' %>
    <%= tag_form.check_box :_destroy %>
  </div>
<% end %> 
```

错误是

![在此处输入图像描述](../Images/5325456f225393a2e41ae028c26604ae.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:38:39.353

正确的做法是：

修改您的 Post 类并添加标签属性

```
attr_accessible :content, :name, :title, :tags_attributes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:46:35.183

每当您向模型添加关联或新字段时，如果您正在使用`attr_accessible`，您还需要将其添加到模型中。`attr_accessible`是一种允许通过批量分配修改这些字段的方法。例如，您不希望在您的用户模型中包含管理员布尔值，`attr_accessible`因为这将允许用户注入并将自己提升为管理员状态。这与 Github 几个月前的问题类似。

在您的情况下，您希望在 Post 模型中添加`:tag_attributes`您的`attr_accessible`行。

# sed - 用于修复无效 RFC2822 电子邮件标头的 sed 脚本

> ID：15298878
> 
> 赞同：1
> 
> 时间：2013-03-08T16:35:45.963
> 
> 标签：sed

我有电子邮件进入处理系统，其中一些已经开始使用无效的空白行分隔电子邮件标题，如下所示：

```
Date: Thu, 7 Mar 2013 22:24:44 +0000
Message-ID: <86A1035194F72547A2979A7767CD3BAF35485B8D@QTS-MB02.ecicloud.com>
References: <C0DA0966847B31409025BBD9A70187DA35399D17@QTS-MB02.ecicloud.com>

Accept-Language: en-US
Content-Language: en-US 
```

中间的空行无效，给下游程序带来问题。

我想提出一个简单的`sed`脚本来修复任何出现的特别`Accept-Language:.*`是空行之前的情况，从而消除空行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:53:46.460

删除文件行中的所有空行`sed`：

```
sed -i '/^\s*$/d' file 
```

从文件的开头删除空白行到开头的行`Content-Language`：

```
sed -i '1,/^Content-Language/{/^\s*$/d}' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:45:52.747

```
sed '/^[ \t]*$/ {N;/\nAccept-Language: en-US$/! P;D;}' FILE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:22:02.827

您应该真正查看用于处理电子邮件的 formail 和 procmail 命令。请参阅[http://www.procmail.org/](http://www.procmail.org/)和[http://linuxcommand.org/man_pages/formail1.html](http://linuxcommand.org/man_pages/formail1.html)。

# javascript - Javascript：使用浮点数和整数进行操作

> ID：15298881
> 
> 赞同：-3
> 
> 时间：2013-03-08T16:35:57.563
> 
> 标签：javascript, variables, int, operation

这是整个代码，我找不到错误：

```
var tmp = new Date();
var ora = tmp.getHours();
ora = parseInt(ora); 

var giorno = 98;
var delta = parseInt(23.45 * Math.sin((360 * (giorno - 81)) / 365));
delta = Math.round(delta);
delta = Math.abs(delta);
var col = 0;
col = -(ora - delta); 
```

为什么'col'未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:38:04.360

`'Col' is undefined: why?` `Col`并且`col`是 Javascript 变量的两个不同名称，因为 JavaScript 变量名称区分大小写

# javascript - 替换 HTML p 标签的 innerHTML - 事件未触发

> ID：15298884
> 
> 赞同：0
> 
> 时间：2013-03-08T16:35:59.810
> 
> 标签：javascript, html5-canvas, dom-events, mousemove

我有以下 JS 函数，我用它来检测光标何时悬停在 HTML5 画布上的特定图像上：

```
function cursorOverAssetsBox(mouseX, mouseY){
    if((mouseX >= assetsDescriptionBox.img_x && mouseX <= assetsDescriptionBox.img_x + assetsDescriptionBox.img_width) &&
    (mouseY <= assetsDescriptionBox.img_y && mouseY >= assetsDescriptionBox.img_y - assetsDescriptionBox.img_height))
    document.getElementById('tipsParagraph').innerHTML = tips[34];
    console.log(tips[34]);
} 
```

该功能正常工作，但由于某种原因，该行

```
document.getElementById('tipsParagraph').innerHTML = tips[34]; 
```

好像没有开火……

'tipsParagraph' 是我`<p></p>`在我的 HTML 中为 HTML 标记提供的 ID `<body></body>`。'tips' 是一个数组，其中的每个元素都包含一些文本。

每当光标位于我的 if 语句指定的位置时，我想显示存储在该数组的位置 34 中的文本。我知道该函数有效，因为`console.log(tips[34]);`只要光标位于该位置，该行就会在控制台中显示该数组元素的内容。但是由于某种原因，段落中的文本没有更新以显示该数组元素的内容。

谁能弄清楚这是为什么？

我从`mousemove`KineticJS 库的本地副本的函数中调用该函数。我正在使用该库的本地副本，因为我想对其功能进行一些细微的调整，例如这个。'mousemove' 函数目前如下所示：

```
_mousemove: function(evt) {
    this._setUserPosition(evt);
    var dd = Kinetic.DD;
    var obj = this.getIntersection(this.getUserPosition());
    getMousePosition(evt);
    document.getElementById('mouseLocation').innerHTML = "mouseX = " + evt.clientX + ". mouseY = " + evt.clientY;

    /*Add an if statement, so that cursorOverAssetsBox function is only called when the cursor's y value is greater than
        400\. This will improve performance, as the code will only check if it needs to call the function when the cursor is
        below that line. */
    if(mouseY >= 400){
        cursorOverAssetsBox(mouseX, mouseY);
    }

    /*Write an if statement that says, "if 'draggingImage' variable is set to true, check the x & y of that image to see if
        it's over its description box- if it is, do something, if not, don't", if 'draggingImage' variable is not set
        to true, don't check.*/
    //cursorOverAssetsBox(mouseX, mouseY);

    if(obj) {
        var shape = obj.shape;
        if(shape) {
            if((!dd || !dd.moving) && obj.pixel[3] === 255 && (!this.targetShape || this.targetShape._id !== shape._id)) {
                if(this.targetShape) {
                    this.targetShape._handleEvent('mouseout', evt, shape);
                    this.targetShape._handleEvent('mouseleave', evt, shape);
                }
                shape._handleEvent('mouseover', evt, this.targetShape);
                shape._handleEvent('mouseenter', evt, this.targetShape);
                this.targetShape = shape;
            }
            else {
                shape._handleEvent('mousemove', evt);
            }
        }
    }
    /*
     * if no shape was detected, clear target shape and try
     * to run mouseout from previous target shape
     */
    else if(this.targetShape && (!dd || !dd.moving)) {
        this.targetShape._handleEvent('mouseout', evt);
        this.targetShape._handleEvent('mouseleave', evt);
        this.targetShape = null;
    }

    // start drag and drop
    if(dd) {
        dd._startDrag(evt);
    }
} 
```

# gradle - 如何使用 Gradle 将 Java 代码和 Junit 测试保持在一起

> ID：15298886
> 
> 赞同：8
> 
> 时间：2013-03-08T16:36:03.950
> 
> 标签：gradle

我有一个项目，其中主要源和该源的测试用例保存在同一个包/目录中。每个测试类都是它正在测试的类的名称，并在末尾附加“Test”。因此，如果我有一个 Foo.java，那么它旁边就会有一个 FooTest.java。

我的问题是，如何使用 Gradle 构建这个项目？我仍然希望将类文件分开，即主类的文件夹和测试类的文件夹。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T18:58:18.973

这应该可以解决问题：

```
sourceSets {
    main {
        java {
            srcDirs = ["some/path"]
            exclude "**/*Test.java"
        }
    }
    test {
        java {
            srcDirs = ["some/path"]
            include "**/*Test.java"
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:44:37.767

作为参考，这里是我用来尝试解决 Eclipse 插件的类路径问题的代码。将此与上述彼得的答案结合使用似乎有效。

```
// The following ensures that Eclipse uses only one src directory
eclipse {
    classpath {
        file {
            //closure executed after .classpath content is loaded from existing file
            //and after gradle build information is merged
            whenMerged { classpath ->
                classpath.entries.removeAll { entry -> entry.kind == 'src'}
                def srcEntry = new org.gradle.plugins.ide.eclipse.model.SourceFolder('src', null)
                srcEntry.dir = file("$projectDir/src")
                classpath.entries.add( srcEntry )
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T14:04:05.927

这对我有用：

```
eclipse {
   classpath {
      file {
        withXml { 
            process(it.asNode())
          }
      }
   }
}
def process(node) {
  if (node.attribute('path') == 'src/test/java' || node.attribute('path') == 'src/test/resources')
    node.attributes().put('output', "build/test-classes")
  else
   node.children().each {
      process(it)
}} 
```

# android - 关闭网站上密码字段的预测文本

> ID：15298890
> 
> 赞同：12
> 
> 时间：2013-03-08T16:36:28.293
> 
> 标签：android, html, keyboard, autocorrect

我有一个 Android 应用程序，它在 web 视图中显示一个页面来处理用户名/密码登录。我发现对于某些键盘（如三星 Jellybean 设备上的普通键盘），预测文本会改变用户在密码字段中键入的内容。

例如，如果密码是“ab!d”，则预测文本会尝试通过在标点符号后自动输入一个空格来提供帮助，使其变为“ab!d”并导致输入不正确的密码。我知道预测文本背后的唯一原因是通过键盘菜单设置关闭预测文本时不会发生此问题。

有没有办法在输入网络表单时禁用预测文本？我已经将输入类型设置为“密码”以屏蔽该条目。这不是 Android TextView（它是 HTML 输入），所以我没有输入的平台级别控件，据我所知，Android 不理解某些网站使用的“autocorrect=off”设置在 iOS 设备上解决这个问题。

我注意到这个问题似乎不会在 mail.google.com 等其他网站上发生。无论设置如何，相同的键盘都会礼貌地将用户的输入单独留在密码字段中。浏览该页面上的 HTML 源代码并没有发现密码字段有任何特殊之处，只有我已经使用的相同输入类型。

你们有没有遇到过这个问题，或者你能想到可能的解决方案吗？mail.google.com 或其他网站是否有我遗漏的东西？任何帮助将不胜感激。

HTML 示例如下：

```
<div data-role="fieldcontain" class="ui-hide-label"  >
<label for="USER">ID</label>
<input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"  type="text" name="USER" id="USER" value="" maxlength="50" placeholder="${userId_text}" data-theme="c"/>
</div>
<div data-role="fieldcontain" class="ui-hide-label">
<label for="password">Password</label>
<input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"  type="password" name="password" id="password" value="" maxlength="50" placeholder="Password" data-theme="c"/>
</div> 
```

![在此处输入图像描述](../Images/c11bcc9742e93eaba262e338a3b58bb9.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T01:46:39.417

根据[Disable Autocomplete、Autocapitalize 和 Autocorrect ，](http://davidwalsh.name/disable-autocorrect)可以尝试一些不同的属性。

```
<input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" /> 
```

此外，对[Turning off auto-complete for textarea and inputfields in Android Cordova-app 的](https://stackoverflow.com/questions/11327968/turning-off-auto-complete-for-textarea-and-inputfields-in-android-cordova-app)回答表明这`<input name="password>`是解决方案。奇怪的是`type=password`不起作用。

# php - 将 PHP 函数转换为 ASP（经典）

> ID：15298897
> 
> 赞同：0
> 
> 时间：2013-03-08T16:36:47.383
> 
> 标签：php, asp-classic

我正在尝试将这个小 PHP 函数转换为 ASP（经典）：

```
<?php

    function load_partial() {
        $inc_folder = 'partials/';
        $inc_page = array_key_exists('page', $_GET) ?
        $_GET['page'].'.php' : 'home.php';
        if (!file_exists($inc_folder.$inc_page)) $inc_page = '404.php';
            include $inc_folder.$inc_page;
        }
    }
 ?> 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:00:02.987

经典 ASP 不允许您像在 PHP 中那样做“动态”包含。事实上`<!--#include file="myInclude.asp"-->`，Classic ASP 中的实际包含 ( ) 甚至无法参数化（使用变量来包含文件）。

但是，Classic ASP 支持 2 种其他方法，这些方法允许*执行*其他脚本的内容，这些方法支持包含要执行的脚本的变量。方法是`Server.Execute`和`Server.Transfer`。但要小心这些方法，因为在调用脚本中声明的所有局部变量在它们内部都不可用。所以如果你想共享局部变量，你将不得不找到另一种方式（会话、文件、数据库等）

例子 ：

```
Dim myScript

myScript = "scriptToInclude.asp"

Server.Execute myScript 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:49:38.217

经典 ASP 没有包含指令（它确实有，但它是静态的）。

如果要获取文件的内容并将其输出到浏览器，则需要打开文件，将其读入然后将其吐出。

这个问题可能会有所帮助：[How to read text file in classic asp](https://stackoverflow.com/questions/7695999/how-to-read-text-file-in-classic-asp)

# drupal - Drupal 7 和视图，通过多个/组合字段搜索的上下文过滤器。可能吗？

> ID：15298901
> 
> 赞同：1
> 
> 时间：2013-03-08T16:37:03.343
> 
> 标签：drupal, drupal-7, views, filtering, drupal-views

我已经使用 Drupal 7 和 Views 有一段时间了，我熟悉 Views 默认允许的内容以及作为模块化附加组件可用的内容。今天我遇到了上下文过滤器的问题，它允许您通过 URL 传入参数并使用它来过滤返回的数据。

另一方面，普通过滤器可以作为表单公开，也允许使用字段组合模块，这意味着我们可以一次搜索字段 {1,2,3} 并根据此输入显示数据。(views_combined_fields)

是否可以告诉 Views 向我显示所有行（WHERE field1="test" OR WHERE field2="test" OR WHERE field3="test"），但默认情况下，如果我添加多个上下文过滤器，则只有其中一个是触发。在此示例中，“test”值是从 url /data/test 获取的。

我的问题是用户有一个默认组，但他们也可以选择添加到在字段 {1,2,3} 字段中设置的其他组中。我当前的视图显示了所有用户 WHERE group = "test" 但我希望拥有二级或三级 "test" 组的用户也显示在此列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:02:36.663

据我了解，您正在谈论视图参数，请观看 MustardSeedMedia.com 的[教程视频](http://mustardseedmedia.com/podcast/episode39)。[以及有关Views 3 用户界面](http://mustardseedmedia.com/podcast/episode47)的有用视频

# javascript - jQuery on() 不适用于已添加的 DOM 项

> ID：15298909
> 
> 赞同：6
> 
> 时间：2013-03-08T16:37:26.700
> 
> 标签：javascript, jquery

我有这个：

```
$(document).on("click", ".prev", function(){
    $(this).closest("div").find(".slider").animate({
        "left": "+=450px"
    }, 800, "easeInOutBack");
    return false;
}); 
```

当新元素被添加到 DOM 时，它有效，但它不适用于 DOM 中已经存在的元素。

当我这样做时：

```
$(".prev").on("click", function(){
    $(this).closest("div").find(".slider").animate({
        "left": "+=450px"
    }, 800, "easeInOutBack");
    return false;
}); 
```

它适用于 DOM 中的元素，但不适用于添加到 DOM 中的新元素。有没有办法让我不必写两次或调用另一个函数就可以让这两者都起作用？

这是一个屏幕截图：

![射击](../Images/58a84b2a8a2a10eb2f3bb3bca8217e4d.png)

因此，这是对其工作原理的更深入描述。

```
<div id="simple-pevs" style="padding-right: 20px;">
    <?php require_once __DIR__ . "/data/get/PEVSection.php"; ?>
</div> 
```

然后当有人想要添加另一个部分时，他们单击添加按钮，然后运行此代码：

```
 $(".add-another-pev").click(function(){
        $.get("./data/get/PEVSection.php?pev="+pevGroup, function(data){
            $("#simple-pevs").append(data);
        });
        pevGroup++;
        return false;
    }); 
```

如您所见，它调用的是预加载在 php.ini 中的同一个。新的（以及添加的任何其他附加的）与 click 事件一起工作，而第一个没有

**@ArunPJohny**

`console.log($(".prev"));`添加新元素后：

```
[a.prev, a.prev, prevObject: b.fn.b.init[1], context: document, selector: ".prev", jquery: "1.9.1", constructor: function…]
0: a.prev
1: a.prev
context: #document
length: 2
prevObject: b.fn.b.init[1]
selector: ".prev"
__proto__: Object[0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:37:36.027

***下面是我从jquery官网复制的内容，可以解释的很清楚***： **事件处理器只绑定到当前选中的元素；当您的代码调用 .on() 时，它们必须存在于页面上。**为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。**如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。**

委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

除了能够处理尚未创建的后代元素上的事件之外，委托事件的另一个优点是当必须监视许多元素时，它们的开销可能会大大降低。在其 tbody 中有 1,000 行的数据表上，此示例将处理程序附加到 1,000 个元素：

```
$("#dataTable tbody tr").on("click", function(event){
alert($(this).text());
}); 
```

委托事件方法仅将事件处理程序附加到一个元素，即 tbody，并且事件只需要冒泡一个级别（从单击的 tr 到 tbody）：

```
$("#dataTable tbody").on("click", "tr", function(event){
alert($(this).text());
}); 
```

注意：委托事件不适用于 SVG。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T03:58:51.370

不，如果您像这样创建新元素，那么您需要重新绑定事件处理程序。

```
function bindHandler() {
    $(document).on("click", ".prev", function(){
        $(this).closest("div").find(".slider").animate({
            "left": "+=450px"
        }, 800, "easeInOutBack");
        return false;
    });
}
bindHandler();

$(".add-another-pev").click(function(){
    $.get("./data/get/PEVSection.php?pev="+pevGroup, function(data){
        $("#simple-pevs").append(data);
    });
    pevGroup++;

    bindHandler();
    return false;
}); 
```

# c++ - 优化：.cpp 或 .obj/.o 或 .lib/.a

> ID：15298911
> 
> 赞同：1
> 
> 时间：2013-03-08T16:37:28.643
> 
> 标签：c++, c, compiler-optimization

我有这段代码可以放在一个单独的库中，但我不确定这将如何影响编译器的优化能力。

选项 1：将代码直接包含在项目中并将其与其他所有内容一起编译。

选项 2：构建 .obj/.o 文件并在构建项目时简单地使用它们。

选项 3：创建一个静态库（.lib 或 .a）并在构建项目时与之链接。

现在，我的问题是：其中哪一个会提供最佳性能？如果您可以讨论/解释每个选项在编译器优化方面的后果，那将是非常棒的！

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:40:48.293

性能上应该没有区别：

`.a`文件只是文件的存档`.o`。链接器对它们的处理方式相同（除了`.a`需要先解压缩文件）。

将所有源直接编译在一起*仍然*会导致所有编译单元单独编译，然后链接在一起。只是编译器隐藏了这个并在你背后调用链接器。尽管如此，工作与首先单独编译编译单元然后在显式步骤中将它们链接在一起时的工作相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:41:09.950

编译器可以做的优化没有区别。在任何情况下，都可以使用您想要的优化来构建对象。

您可能会看到的唯一区别是构建共享库的时间。然后，在将对象或静态库直接链接到可执行文件时，您会产生调用开销，而您没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:55:20.083

如果选项 1 是指`#include`通过头文件的代码，那么编译器可能会比将多个对象链接在一起稍好一些，如选项 2 和 3。这是因为编译器可以看到整个源代码，而不仅仅是目标代码，并可能能够发挥`inline`作用。

选项 2 和 3 之间没有区别，因为存档文件 - `*.a`- 只是目标文件的集合 - `*.o`.

综上所述，[开源应用程序架构：LLVM](http://www.aosabook.org/en/llvm.html)意味着您可以构建 LLVM IR 代码对象，当链接时可以正确优化，包括函数的内联。因此，如果您正在使用`clang++`，这可能是一个选项。

# javascript - JavaScript - 从具有 m 个元素的 n 个数组生成组合

> ID：15298912
> 
> 赞同：73
> 
> 时间：2013-03-08T16:37:29.390
> 
> 标签：javascript, permutation, combinations

我很难想出代码来从n个数组中生成组合，其中包含m个元素，在JavaScript中。我在其他语言中看到过类似的问题，但答案包含我不确定如何翻译的句法或库魔法。

考虑以下数据：

```
[[0,1], [0,1,2,3], [0,1,2]] 
```

3 个数组，其中包含不同数量的元素。我想要做的是通过组合每个数组中的一个项目来获得所有组合。

例如：

```
0,0,0 // item 0 from array 0, item 0 from array 1, item 0 from array 2
0,0,1
0,0,2
0,1,0
0,1,1
0,1,2
0,2,0
0,2,1
0,2,2 
```

等等。

如果数组的数量是固定的，则很容易进行硬编码实现。但是数组的数量可能会有所不同：

```
[[0,1], [0,1]]
[[0,1,3,4], [0,1], [0], [0,1]] 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-03-09T11:18:13.697

这是一个使用递归辅助函数的非常简单而简短的方法：

```
function cartesian(...args) {
    var r = [], max = args.length-1;
    function helper(arr, i) {
        for (var j=0, l=args[i].length; j<l; j++) {
            var a = arr.slice(0); // clone arr
            a.push(args[i][j]);
            if (i==max)
                r.push(a);
            else
                helper(a, i+1);
        }
    }
    helper([], 0);
    return r;
} 
```

用法：

```
cartesian([0,1], [0,1,2,3], [0,1,2]); 
```

要使函数采用数组数组，只需将签名更改为，`function cartesian(args)`而不是使用 rest 参数语法。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-12-07T18:20:06.543

您可以通过构建子数组来采用迭代方法。

```
var parts = [[0, 1], [0, 1, 2, 3], [0, 1, 2]],
    result = parts.reduce((a, b) => a.reduce((r, v) => r.concat(b.map(w => [].concat(v, w))), []));

console.log(result.map(a => a.join(', ')));
```

```
.as-console-wrapper { max-height: 100% !important; top: 0; }
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-06-03T14:10:36.460

我建议一个简单的递归[生成器函数](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/function*)：

```
// Generate all combinations of array elements:
function* cartesian(head, ...tail) {
  let remainder = tail.length ? cartesian(...tail) : [[]];
  for (let r of remainder) for (let h of head) yield [h, ...r];
}

// Example:
for (let c of cartesian([0,1], [0,1,2,3], [0,1,2])) {
  console.log(...c);
}
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-08T18:39:37.763

在做了一些研究之后，我发现了一个之前的相关问题： [Finding All Combinations of JavaScript array values](https://stackoverflow.com/questions/4331092/finding-all-permuations-of-javascript-array-values)

我已经修改了那里的一些代码，以便它返回一个包含所有排列的数组数组：

```
function(arraysToCombine) {
    var divisors = [];
    for (var i = arraysToCombine.length - 1; i >= 0; i--) {
       divisors[i] = divisors[i + 1] ? divisors[i + 1] * arraysToCombine[i + 1].length : 1;
    }

    function getPermutation(n, arraysToCombine) {
       var result = [], 
           curArray;    
       for (var i = 0; i < arraysToCombine.length; i++) {
          curArray = arraysToCombine[i];
          result.push(curArray[Math.floor(n / divisors[i]) % curArray.length]);
       }    
       return result;
    }

    var numPerms = arraysToCombine[0].length;
    for(var i = 1; i < arraysToCombine.length; i++) {
        numPerms *= arraysToCombine[i].length;
    }

    var combinations = [];
    for(var i = 0; i < numPerms; i++) {
        combinations.push(getPermutation(i, arraysToCombine));
    }
    return combinations;
} 
```

我在[http://jsfiddle.net/7EakX/](http://jsfiddle.net/7EakX/)上放了一份工作副本，它采用了您之前提供的数组（[[0,1]，[0,1,2,3]，[0,1,2] ]) 并将结果输出到浏览器控制台。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-15T16:06:37.193

只是为了好玩，这是我的第一个答案中解决方案的一个更实用的变体：

```
function cartesian() {
    var r = [], args = Array.from(arguments);
    args.reduceRight(function(cont, factor, i) {
        return function(arr) {
            for (var j=0, l=factor.length; j<l; j++) {
                var a = arr.slice(); // clone arr
                a[i] = factor[j];
                cont(a);
            }
        };
    }, Array.prototype.push.bind(r))(new Array(args.length));
    return r;
} 
```

或者，为了全速，我们可以动态编译我们自己的循环：

```
function cartesian() {
    return (cartesian.cache[arguments.length] || cartesian.compile(arguments.length)).apply(null, arguments);
}
cartesian.cache = [];
cartesian.compile = function compile(n) {
    var args = [],
        indent = "",
        up = "",
        down = "";
    for (var i=0; i<n; i++) {
        var arr = "$"+String.fromCharCode(97+i),
            ind = String.fromCharCode(105+i);
        args.push(arr);
        up += indent+"for (var "+ind+"=0, l"+arr+"="+arr+".length; "+ind+"<l"+arr+"; "+ind+"++) {\n";
        down = indent+"}\n"+down;
        indent += "  ";
        up += indent+"arr["+i+"] = "+arr+"["+ind+"];\n";
    }
    var body = "var res=[],\n    arr=[];\n"+up+indent+"res.push(arr.slice());\n"+down+"return res;";
    return cartesian.cache[n] = new Function(args, body);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-19T12:08:55.493

```
const charSet = [["A", "B"],["C", "D", "E"],["F", "G", "H", "I"]];
console.log(charSet.reduce((a,b)=>a.flatMap(x=>b.map(y=>x+y)),['']))
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-08T18:01:46.953

```
var f = function(arr){
    if(typeof arr !== 'object'){
        return false;
    }

    arr = arr.filter(function(elem){ return (elem !== null); }); // remove empty elements - make sure length is correct
    var len = arr.length;

    var nextPerm = function(){ // increase the counter(s)
        var i = 0;

        while(i < len)
        {
            arr[i].counter++;

            if(arr[i].counter >= arr[i].length){
                arr[i].counter = 0;
                i++;
            }else{
                return false;
            }
        }

        return true;
    };

    var getPerm = function(){ // get the current permutation
        var perm_arr = [];

        for(var i = 0; i < len; i++)
        {
            perm_arr.push(arr[i][arr[i].counter]);
        }

        return perm_arr;
    };

    var new_arr = [];

    for(var i = 0; i < len; i++) // set up a counter property inside the arrays
    {
        arr[i].counter = 0;
    }

    while(true)
    {
        new_arr.push(getPerm()); // add current permutation to the new array

        if(nextPerm() === true){ // get next permutation, if returns true, we got them all
            break;
        }
    }

    return new_arr;
}; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-09T07:03:17.327

这是另一种方法。我将所有数组的索引视为一个数字，其数字都是不同的基数（如时间和日期），使用数组的长度作为基数。

因此，使用您的第一组数据，第一个数字是基数 2，第二个是基数 4，第三个是基数 3。计数器从 000 开始，然后是 001、002，然后是 010。这些数字对应于数组，并且由于保留了顺序，所以这没问题。

我有一个在这里工作的小提琴：http: [//jsfiddle.net/Rykus0/DS9Ea/1/](http://jsfiddle.net/Rykus0/DS9Ea/1/)

这是代码：

```
// Arbitrary base x number class 
var BaseX = function(initRadix){
    this.radix     = initRadix ? initRadix : 1;    
    this.value     = 0;
    this.increment = function(){
        return( (this.value = (this.value + 1) % this.radix) === 0);
    }
}

function combinations(input){
    var output    = [],    // Array containing the resulting combinations
        counters  = [],    // Array of counters corresponding to our input arrays
        remainder = false, // Did adding one cause the previous digit to rollover?
        temp;              // Holds one combination to be pushed into the output array

    // Initialize the counters
    for( var i = input.length-1; i >= 0; i-- ){
        counters.unshift(new BaseX(input[i].length));
    }

    // Get all possible combinations
    // Loop through until the first counter rolls over
    while( !remainder ){
        temp      = [];   // Reset the temporary value collection array
        remainder = true; // Always increment the last array counter

        // Process each of the arrays
        for( i = input.length-1; i >= 0; i-- ){
            temp.unshift(input[i][counters[i].value]); // Add this array's value to the result

            // If the counter to the right rolled over, increment this one.
            if( remainder ){
                remainder = counters[i].increment();
            }
        }
        output.push(temp); // Collect the results.
    }

    return output;
}

// Input is an array of arrays
console.log(combinations([[0,1], [0,1,2,3], [0,1,2]])); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-27T17:03:02.523

另一个使用 ES6 递归风格的实现

```
Array.prototype.cartesian = function(a,...as){
  return a ? this.reduce((p,c) => (p.push(...a.cartesian(...as).map(e => as.length ? [c,...e] : [c,e])),p),[])
           : this;
};

console.log(JSON.stringify([0,1].cartesian([0,1,2,3], [[0],[1],[2]])));
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-04-09T00:55:27.523

您可以使用递归函数来获取所有组合

```
const charSet = [["A", "B"],["C", "D", "E"],["F", "G", "H", "I"]];

let loopOver = (arr, str = '', final = []) => {
  if (arr.length > 1) {
    arr[0].forEach(v => loopOver(arr.slice(1), str + v, final))
  } else {
    arr[0].forEach(v => final.push(str + v))
  }
  return final
}

console.log(loopOver(charSet))
```

* * *

这段代码仍然可以使用三元来缩短，但我更喜欢第一个版本的可读性

```
const charSet = [["A", "B"],["C", "D", "E"],["F", "G", "H", "I"]];

let loopOver = (arr, str = '') => arr[0].map(v => arr.length > 1 ? loopOver(arr.slice(1), str + v) : str + v).flat()

console.log(loopOver(charSet))
```

# c# - MVC 文件导入和验证，无需将文件发送回用户

> ID：15298915
> 
> 赞同：0
> 
> 时间：2013-03-08T16:37:42.277
> 
> 标签：c#, asp.net-mvc, file-upload

我有一个场景，我希望客户端上传文件。我已经完成了这项工作，它会将文件拉入我的控制器。我得到文件的前 3 行，然后在另一个对象和视图中将其发送回用户。

我想要做的是将文件保存在服务器上并让客户端验证内容是否正确。如果客户回复，那么我们保留文件，我继续处理它，如果他们不喜欢它，我们将其删除。

我试图弄清楚的两个问题是：

1.  当我发回文件的 3 行时，我不想随它一起发送文件，但我不知道引用它的好方法
2.  如果用户没有响应，我希望删除该文件。

现在它这样做：

用户将文件上传到 HttpPostedFileBase 我使用流阅读器获取前 3 行我发回对象中的 3 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:50:29.947

1.  在视图模型中创建属性以支持存储文件和内容。填充此内容并将其发送回用户以供批准。

2.  最终，您无法通过网络会话准确地做到这一点。您可以尝试使用 Session_end，但这非常不可靠。您将不得不编写一个批处理文件，该文件假定如果该文件在位置 x 中存在更多 han y，则将其删除。

# php - 如何使用 preg_match 获取字符串中的最后一个单词

> ID：15298916
> 
> 赞同：1
> 
> 时间：2013-03-08T16:37:45.287
> 
> 标签：php, preg-match, word

我正在尝试获取字符串中的最后几个单词。对于最后一个词，我正在使用这个：

```
$string = "Hallo dies ist ein extrem langer Text den ich gern gekuerz haette, leider bin ich selbst zu doof daf&uuml;r und mach hier einen test.";

$pattern = '/[^ ]*$/';

preg_match($pattern, $string, $result);

echo "<br>The last word is:------ ". $result[0] ." ---------<br>"; 
```

它工作正常。但我不参加与前任一起跑步。最后一棵树的话。我不知道如何改变模式。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:40:26.783

`explode`在字符串上使用可能会更好，如下所示：

```
$string = 'Hello, my name is Jordan Doyle';
$string_array = explode(' ', $string);
echo end($string_array); 
```

示例输出：

```
root@upstairslinux:~# php example.php
Doyle

root@upstairslinux:~# 
```

这是一个获取指定数量行的函数......

```
<?php
function get_last_words($amount, $string)
{
    $string_array = explode(' ', $string);

    return array_slice($string_array, count($string_array) - $amount);
}

$string = 'Hello, my name is Jordan Doyle';
var_dump(get_last_words(3, $string)); 
```

示例输出：

```
root@upstairslinux:~# php example.php
array(3) {
  [0]=>
  string(2) "is"
  [1]=>
  string(6) "Jordan"
  [2]=>
  string(5) "Doyle"
}

root@upstairslinux:~# 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:14:01.793

这将完成这项工作

```
$pattern = '/(([^ ]*)\s+([^ ]*)\s+([^ ]*))$/'; 
```

**[例子](http://codepad.viper-7.com/Txh2ha)**

或者

```
$pattern = '/((([^ ]*)[\s.]+){3})$/'; 
```

**[例子](http://codepad.viper-7.com/bQ6PR2)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:42:32.537

**编辑**

```
 $patterns = '/\b[a-zA-Z]*\b/'; 
```

并使用 preg_match_all 匹配所有出现

```
 preg_match_all($patterns, $string, $result);

  $string = "Hallo dies ist ein extrem langer Text den ich gern gekuerz haette, leider bin ich selbst zu doof daf&uuml;r und mach hier einen test.";

 preg_match_all($patterns, $string, $result);

 foreach($result[0] as $value){
  echo "$value ";
 } 

for($length = count($result[0]), $i = 1; $i < 4; $i++){
       $offset = $length - $i;
       echo $result[0][$offset];
     } 
```

上面的片段提取了最后 3 个单词

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T12:54:25.270

在字符串上使用explode可能会更好，如下所示：

```
<?php 
$cate = 'category-node-25';
$cateId = explode('-', $cate);
echo end($cateId);
?> 
```

输出 --> 25。

# vaadin - vaadin 表变量中单元格的高度

> ID：15298922
> 
> 赞同：2
> 
> 时间：2013-03-08T16:37:58.503
> 
> 标签：vaadin

我在 Vaadin 有一张桌子。一列是字符串类型，因此它的大小是可变的。因此，我想修复列的宽度（具有扩展比率），但每行的高度应该是可变的（根据其内容 - 字符串）。

即，这是预期的

```
Date      | Item | Motive
01-02-2013|banana|Sold out
02-02-2013|DVD   |An alternative purchase
          |      |has occurred
02-02-2013|Mixer |Sold out 
```

但是，使用 String`An alternative purchase has occurred`结果

```
Date      | Item | Motive
01-02-2013|banana|Sold out
02-02-2013|DVD   |An alternative purchase
02-02-2013|Mixer |Sold out 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:02:48.147

# python - python在打开并启动线程时检测USB端口

> ID：15298927
> 
> 赞同：1
> 
> 时间：2013-03-08T16:38:09.657
> 
> 标签：python, multithreading, usb, detection

好的，我想升级我的代码以检测端口并在端口可用后启动线程。我目前正在做的是等待预期数量的端口在那里。然后我做一个for循环来启动线程。就像我说的，目前我做一个

```
subprocess.check_output('ls /tty' + number expected port) #to see if all ports are turned on. 

for port in portlist: 
    initialize the Thread object. 
```

问题是我在 USB 设备上的代码只有 10 秒的时间来写入设备，告诉它处于命令模式。因此，如果我有 10 个想要编程的设备，如果我不快速将它们全部打开，我将无法对前几个设备进行编程，因为我正在等待查看所有端口已打开... 无法更改 USB 设备上的时间。

我想查看新端口，然后启动线程。任何人都可以帮忙。我希望我解释得足够好。这是在 linux 机器上，因此端口在打开时被分配。

# .htaccess - 如何重写为站点“替换”（旧站点到子文件夹，根中的新站点）制作 .htaccess，同时保留 Google Love

> ID：15298932
> 
> 赞同：1
> 
> 时间：2013-03-08T16:38:19.813
> 
> 标签：.htaccess, mod-rewrite, rewrite

我在一个存在多年（10 年以上）的域上有一个站点，现在正在将该站点从一个 CMS 更改为另一个。这是一个移动内容的漫长过程，其中一些内容不会移动，并且应该在未来几年内共存。

我已经将旧站点从根目录 (www.example.com) 移动到子文件夹 (www.example.com/_old)。旧站点具有以下 .htaccess 来强制 www。自 2007 年初以来在我的域上。我已在 (www.example.com/_old/) 文件夹中的 .htaccess 上删除了此内容。

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

现在我在另一个子目录（www.example.com/dp/）中声明了新闻站点，以保持根目录为空，仅使用 .htaccess 并重写，但我真正想要的是：

1.  我想访问没有 www (example.com) 的域根目录上的新站点
2.  我希望旧网站仍然作为“世界”中所有旧链接的主要登录页面 - 主要是 Google（www.example.com/_old/[whatever] 来自 www.example.com/[whatever]
3.  我想确保当我将页面移动到新站点（www.example.com/_old/oldpage.html 到 example.com/newpage.html）时，我可以将该 URL 专门重定向到新站点以避免重复内容.

我在这里：

```
RewriteCond %{HTTP_HOST} www.example.com
RewriteRule ^(.*)$ /_old/$1 [L,R=301]

RewriteCond %{HTTP_HOST} example.com
RewriteCond %{REQUEST_URI} /dp/
RewriteRule ^(.*)$ http://example.com/$1 [L,R=307]

RewriteCond %{HTTP_HOST} example.com
RewriteRule ^(.*)$ http://www.example.com/_old/$1 [L,R=301] 
```

这仍然是子文件夹 /dp/ 中的新站点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:15:05.580

```
#if file or directory doesn't exist, check the _old directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/_old
RewriteRule .* /_old/$0 [L]
#note that I omitted the redirect flag. That way the old url just work like they used to. If you really want you can just add them, but please, just give it a try. This might even fix problem nr. 3

# remove www. from everything except _old urls
RewriteCond %{HTTP_HOST} www\.example\.com
RewriteCond %{REQUEST_URI} !/_old
RewriteRule ^(.*)$ http://example.com/$1 [L,R=307] 
```

只是为了澄清一点。我用户请求一个像 www.example.com/seafood.html 这样的旧链接，如果内部重写为 /_old/seafood.html，则该请求。如果将来您想为此创建一个新页面，您只需在根目录中创建seafood.html。此文件将自动优先于 /_old 文件夹中的相同文件名。

# r - 聚合数据框后，如何获取行名列表作为值？

> ID：15298940
> 
> 赞同：8
> 
> 时间：2013-03-08T16:38:43.250
> 
> 标签：r, reshape

我有一个这样的数据框df：

```
 type    V1    V2
1    A    bla    bla
2    A    bla    bla
3    B    bloo    bla
4    B    bloo    bla
5    C    moo    bloo
6    C    moo    bloo 
```

目前我融化/铸造得到这个：

```
type    bla    bloo    moo
A    4    0    0
B    2    2    0
C    0    2    2 
```

使用这些命令：

```
library(reshape)
melted <- melt(df, id='type')
count <- function(x) { 
  length(na.omit(x))
}
casted <- cast(melted, type~value, count) 
```

但是，我不想计算/求和，而是想获取原始行名的列表。像这样的东西：

```
type    bla    bloo    moo
A    1,2    0    0
B    3,4    3,4    0
C    0    5,6    5,6 
```

其中 bla、bloo 和 moo 的每个值都是原始数据帧中唯一行名的列表。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T17:01:49.900

```
library(reshape2)
df <- read.table(text="type    V1    V2
1    A    bla    bla
2    A    bla    bla
3    B    bloo    bla
4    B    bloo    bla
5    C    moo    bloo
6    C    moo    bloo")

df$id <- rownames(df)

melted <- melt(df, id=c('type','id'),measure.vars=c("V1","V2"))

fun <- function(x) paste(unique(x),collapse=",") 

dcast(melted,type~value,fun,value.var="id",fill="0")

#  type bla bloo moo
#1    A 1,2    0   0
#2    B 3,4  3,4   0
#3    C   0  5,6 5,6 
```

# php - 使用 (PHP) 将每行中的第 3 和第 4 分隔符从逗号更改为管道

> ID：15298941
> 
> 赞同：1
> 
> 时间：2013-03-08T16:38:47.450
> 
> 标签：php

我有一个大约 30 或 40 行的文件。该文件看起来与此类似：

```
1234567899,05/30/13,1430,10,ANDERSON MONTE
4567891234,06/01/13,930,10,ANDERSON JENNIFER
7891234567,06/02/13,1515,10,ANDERSON MONTE 
```

现在，我需要将时间周围的逗号更改为管道。我还需要将它从 24 小时制更改为 12 小时制，并在后面加上 AM 或 PM。不幸的是，我正在从文件而不是从数据库中读取所有这些内容。所以我需要它最终看起来像这样：

```
1234567899,05/30/13|02:30PM|10,ANDERSON MONTE
4567891234,06/01/13|09:30AM|10,ANDERSON JENNIFER
7891234567,06/02/13|03:15PM|10,ANDERSON MONTE 
```

任何帮助，将不胜感激。如果可能的话，我想使用 PHP。它最初是一份报告，我已经能够剥离到上述内容。

先感谢您。
蒙特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:56:14.797

你可以试试

```
$files = file("log.txt");
$list = array();

foreach ( $files as $data ) {
    $data = explode(",", $data);
    $time = sprintf("%s|%s|%s", 
            $data[1], 
            DateTime::createFromFormat("Gi", str_pad($data[2], 4, "0", STR_PAD_LEFT))->format("h:iA"), 
            $data[3]);
    $list[] = implode(",", array($data[0],$time,$data[4]));
}

echo "<pre>";
print_r($list); 
```

输出

```
Array
(
    [0] => 1234567899,05/30/13|02:30PM|10,ANDERSON MONTE

    [1] => 4567891234,06/01/13|09:30AM|10,ANDERSON JENNIFER

    [2] => 7891234567,06/02/13|03:15PM|10,ANDERSON MONTE
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:56:15.133

好吧，如果日期和时间总是排在第二位和第三位，那么肯定的一种解决方案是使用[`array_splice`](http://php.net/array_splice),[`array_slice`](http://php.net/array_slice)和[`join`/`implode`](http://php.net/implode)：

```
array_splice($arr, 1, 3, join('|', array_slice($arr, 1, 3)); 
```

* * *

这是完整的代码（但 stackoverflow 的存在是为了*帮助*您解决问题，而不是解决您的问题）：

```
$in = fopen('input.txt', 'r');
$out = fopen('output.txt', 'w');
while(($line = fgetcsv($in)) !== FALSE) {
  # you're probably better off using methods of the DateTime class:
  $hours = substr($line[2], 0, -2);
  $line[2] = (($hours+12-1)%12+1) . substr($line[2], -2) . (($hours<12)?'AM':'PM');

  array_splice($line, 1, 3, join('|', array_slice($line, 1, 3));

  $fputcsv($out, $line);
} 
```

# .htaccess - 改写到ip地址 - 网站不可用

> ID：15298943
> 
> 赞同：0
> 
> 时间：2013-03-08T16:38:56.607
> 
> 标签：.htaccess

这是我的`.htaccess`文件。

```
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^xxx\.xx\.xxx\.xx/domain\.com [NC]
RewriteRule (.*) http://xxx.xx.xxx.xx/domain.com/$1 [R=301,L] 
```

网站不可用，这是我得到的错误：
`The page isn't redirecting properly`

如何创建此重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:53:24.330

该`%{HTTP_HOST}`变量中不包含任何 URI 路径元素，它**只是**`Host:`作为请求标头给出的主机名。这通常出现在 URL 的主机名部分：

*   **`http://www.google.com/blahblahblah`**=`www.google.com`
*   **`http://localhost/foo/bar/zzzzz`**=`localhost`
*   **`http://123.45.67.89/something/something/`**=`123.45.67.89`

只需从您的条件中删除所有 URI：

```
RewriteCond %{HTTP_HOST} !^xxx\.xx\.xxx\.xx$ [NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:46:12.540

尝试更换

```
RewriteCond %{HTTP_HOST} !^xxx\.xx\.xxx\.xx/domain\.com [NC] 
```

有了这个

```
RewriteCond %{SERVER_ADDR} !xxx\.xx\.xxx\.xx 
```

# meteor - 构建一个 oauth 1 客户端以与另一个 API 交互

> ID：15298945
> 
> 赞同：1
> 
> 时间：2013-03-08T16:38:58.113
> 
> 标签：meteor

我已经搜索了很多这样的例子，但只找到了一些零碎的东西，并且无法将它们拼凑在一起。

有没有在流星中实现 oauth1 客户端的简单示例，以便我可以与我想使用的 API 提供者交谈？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:53:12.600

Accounts UI 为每个 OAuth 登录包提供配置向导 :) 还有更多信息：[http ://www.eventedmind.com/posts/meteor-customizing-login](http://www.eventedmind.com/posts/meteor-customizing-login)

# javascript - 以下是否将 HTML 与来自每个类实例的文本附加到该类的该实例？

> ID：15298946
> 
> 赞同：0
> 
> 时间：2013-03-08T16:39:00.450
> 
> 标签：javascript, jquery, foreach, jquery-append

我正在尝试获取以下代码以从 .banners_text_line 的每个实例中获取文本，并在其前面加上 span.shadow，其中包含来自该类的文本副本。这是我对 jquery 的想法：

```
<script>

$('.banners_text_line').each(function(){
$(this).append('<span class="shadow">'$(this).text()'</span>');
});

</script> 
```

如果有两个 .banners_text_line 实例，第一个有文本“hello world”，下一个有“你好吗”，那么我试图让输出显示：

```
<div class=".banners_text_line"><span class="shadow">hello world</span>hello world</div>
...
<div class=".banners_text_line"><span class="shadow">how are you</span>how are you</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:45:19.103

您省略了连接运算符：

```
$(this).append('<span class="shadow">' + $(this).text() + '</span>'); 
```

当然，如果您这样做，您将获得更好的性能并且不必担心连接：

```
var t = $(this);
t.append($(document.createElement('span')).addClass('shadow').text(t.text())); 
```

# actionscript-3 - Actionscript：在父 Sprite 上应用点击事件

> ID：15298949
> 
> 赞同：1
> 
> 时间：2013-03-08T16:39:08.400
> 
> 标签：actionscript-3, displayobject

`:Loader`在其中添加一些子实例后，我遇到了点击事件的困难。

```
var wr:Sprite=new Sprite();
stage.addChild(wr);         
wr.graphics.drawRect(0,0,stage.width,stage.height);
wr.width=stage.width;
wr.height=stage.height;
wr.addEventListener('click',function():void{
    log('CLICKED!');
});
wr.addChild(el.sprite); 
```

问题是单击事件仅在我单击时才起作用`el.sprite`，但是当我单击舞台上的任何位置时，它不起作用（不触发单击事件）。

为什么会这样做？我不是`wr`在整个舞台上拉伸了层吗？

我在 Flash DisplayObject 列表机制中缺少或不理解的内容？

我正在尝试将 el.sprite(pause button) 定位在 wr(pause layer) 的中心，并在整个 wr 层(整个舞台) 上应用 click 事件。

我正在开发视频播放器。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:11:51.330

Flash API 中的 Graphics 对象本质上是一个有限状态机，这意味着您需要 (1) 告诉它开始，(2) 给它一个或多个顺序命令，然后 (3) 告诉它停止。

在这种情况下，您缺少的关键是 begin 和 end 命令。其中最简单的是 beginFill() 和 endFill()。[您可以在有关图形](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html)的 AS3 文档中查看完整列表。

beginFill() 有两个参数——第一个是填充的颜色，第二个是填充的 alpha。所以如果你想让填充不可见，给它你想要的任何颜色（0 很好），但也给它一个 0 的 alpha。

另外，作为旁注，您不需要手动设置您命名为“wr”的对象的宽度和高度。绘制矩形后，其宽度和高度属性将反映矩形的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:01:35.160

drawRect 实际上并没有绘制任何东西，因为您没有设置填充。

在drawRect之前添加：

```
wr.graphics.beginFill(0xFFFFFF, 0); 
```

这会将填充设置为 0 alpha 白色（如果您希望它可见，请删除第二个参数）。现在，当您调用 drawRect 时，它可以绘制一些东西。

# php - PHP preg_match 匹配一切？

> ID：15298950
> 
> 赞同：0
> 
> 时间：2013-03-08T16:39:20.860
> 
> 标签：php, preg-match

下面的代码返回我使用的任何 $name 变量的匹配项。有人介意解释原因和必要的更正吗？谢谢！

```
$name = 'Johns Donuts';

if (preg_match("/INTERNAL USE ONLY | /",$name) ==1 ) {

    echo 'I match internal use only: '.$name.'';

} else {

    echo 'I DONT match internal use only: '.$name.'';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:41:51.503

问题在于管道字符，如果记忆正确，它实际上是一个“或”运算符。鉴于另一边是一个空格，它与您的字符串中的某处匹配。

解决方案：用反斜杠转义它。

# java - 数组中的重复项不会被多次打印

> ID：15298951
> 
> 赞同：0
> 
> 时间：2013-03-08T16:39:27.940
> 
> 标签：java, arrays

下面的代码打印文件中的所有单词（将其放在第一个数组中）和它旁边的第一个单词（第二个数组）。如果单词有重复，它会找到数组中的那个单词（第一个单词）并将 1 添加到数字数组，但它仍然会打印出数组中的重复项。我只想要旁边带有正确数字的单词的第一个实例来说明数组中有多少次。我的问题真的是我不希望重复打印出来。（请没有数组列表）。

```
while ((in.hasNext())) {

    l = in.next() ;

    for(int i = 0; i< Wrd.length-1;i++){
        if (l.equals(Wrd[i])){
            num[i] = num[i] +1;
        } 

    }

    Wrd[n]=l;
    num[n] = num;

    n++;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:08:29.967

听起来您无法使用 a `Set`or `Map`etc - 如果可以，那么这里的其他建议更容易实现我将建议的内容:-)

如果由于某种原因你不能，那么这个怎么样：

```
// capture all the words first into an array
// the array below is for test purposes
String[] words = {"1", "2", "3", "5", "1", "1", "3", "4", "1", "5", "7", "0"};

Arrays.sort(words);  // sort the array - this is vital or the rest wont work
String last = words[0];
int count = 0;
for (String word : words) {
    if (word.equals(last)) {
        count++;
    } else {
        System.out.println(last + "=>" + count);

        count = 1;
        last = word;
    }
}
System.out.println(last + "=>" + count); 
```

输出将是：

```
0=>1
1=>4
2=>1
3=>2
4=>1
5=>2
7=>1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:47:16.360

您需要使用地图 - 这会自动处理维护唯一的单词列表。如果您覆盖`put`聚合而不是覆盖的方法，那么它将自动累加计数。

```
private void readWords(final Iterator<String> in) {
    final Map<String, Integer> wordMap = new HashMap<String, Integer>() {
        @Override
        public Integer put(String key, Integer value) {
            final Integer origValue = get(key);
            if (origValue == null) {
                return super.put(key, value);
            } else {
                return super.put(key, origValue + value);
            }
        }
    };
    while (in.hasNext()) {
        wordMap.put(in.next(), 1);

    }
    //just for display - not necessary
    for (final Entry<String, Integer> entry : wordMap.entrySet()) {
        System.out.println("Word '" + entry.getKey() + "' appears " + entry.getValue() + " times.");
    }
} 
```

测试：

```
List<String> strings = new LinkedList<String>();
strings.add("one");
strings.add("two");
strings.add("two");
strings.add("three");
strings.add("three");
strings.add("three");
readWords(strings.iterator()); 
```

输出：

```
Word 'two' appears 2 times.
Word 'one' appears 1 times.
Word 'three' appears 3 times. 
```

`TreeMap`您可以使用 a而不是 a按字母顺序对单词进行排序`HashMap`- 这可能看起来更适合显示；取决于你打算用地图做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:47:30.587

使用布尔标志跟踪给定单词是否重复，如果是，则不要将其添加到数组中：

```
while (in.hasNext()) {
    boolean dup = false;
    l = in.next() ;

    for(int i = 0; i< Wrd.length-1;i++){
        if (l.equals(Wrd[i])){
            num[i] = num[i] +1;
            dup = true;
            break; // No reason to check the rest of the array
        } 
    }

    if (!dup) {
        Wrd[n] = l;
        num[n] = num; // If you're looking for frequency, you probably want 1 not num

        n++; // only increment the index if we add a new word
    }
} 
```

# apache - 使用子文件夹技术和代理添加 i18n

> ID：15298954
> 
> 赞同：2
> 
> 时间：2013-03-08T16:39:34.377
> 
> 标签：apache, mod-rewrite, internationalization, seo, mod-proxy-html

我有一个在上下文“/”上运行的 webapp，我现在想使用子文件夹技术将它国际化。

我想要以前托管的同一个网站

```
http://www.mysite.com/ 
```

现在在 url 下提供不同语言的内容

```
http://www.mysite.com/en/<br>
http://www.mysite.com/fr/<br>
http://www.mysite.com/de/<br> 
```

我正在考虑在 Tomcat 前面添加一个 Apache 代理，以使我的 webapp 保持不变。

假设应用程序已经基于请求中存在的识别语言的 cookie 支持 i18n。

使用 Apache 代理和重写规则，我可以从请求中去除语言，并使用提取的语言添加这个 cookie。

[`passProxyReverse`](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypassreverse)然后我需要 Apache 通过添加特定语言（ ？）来转换来自 Tomcat 的重定向

我还需要对我的应用程序生成的 HTML 进行某种解析，以便将看起来像`http://www.mysite.com/folder/contact.html`的链接修改为`http://www.mysite.com/de/folder/contact.html` （[`mod_proxy_html`](http://httpd.apache.org/docs/2.4/mod/mod_proxy_html.html)？）

我考虑过其他解决方案，例如在不同的上下文中部署相同的 webapp 并通过 memcache 共享会话。或者直接使用 webapp 中的一些过滤器和一些自定义 JSTL 等来管理这种语言子文件夹分离。

所有解决方案似乎都太复杂了。

我想要实现的是出于 SEO 原因使用子文件夹技术，并使我的 webapp 不太了解这一点。

我不明白我是不是把它复杂化了。
有没有更好/更简单的方法来实现我所需要的？

# php - 如何在没有自动增量字段的表中对 PHPMyAdmin 进行排序

> ID：15298957
> 
> 赞同：0
> 
> 时间：2013-03-08T16:39:45.460
> 
> 标签：php, mysql, sql

我的表有一个键，但它不是自动增量，我无法在此表中创建和自动增量字段。所以我想按插入的顺序对结果进行降序排序。

我无法创建像 data_row_was_inserted 这样的任何字段...通常当我有一个带有自动增量字段的表时，我只需单击它，PHPMyAdmin 就会按插入的顺序对表结果进行排序。

谢谢你们！

PS：我知道必须有某种方法可以做到这一点，而不会创建任何字段，因为当我在 PHPMyAdmin 中打开表时，它会自动按插入的 ASCENDING 顺序显示结果，但我想按 DESCENDING 顺序显示。它证明 MySQL 将这些信息存储在某处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:49:26.127

建立一个手动查询，然后将其添加到书签或转到表格，然后单击`Operations`顶部的选项卡，在`Operations`页面查找`Alter table order by`，然后选择您的列。

操作选项卡：http: [//i.imgur.com/iXyj3gp.png](http://i.imgur.com/iXyj3gp.png)

`Alter table order by`内部操作选项卡：http: [//i.imgur.com/herFA6h.png](http://i.imgur.com/herFA6h.png)

# sql - 数据库规范化，数字主键或字符串

> ID：15298958
> 
> 赞同：0
> 
> 时间：2013-03-08T16:39:47.557
> 
> 标签：sql, database, normalization

我不得不就此与我的教授争论，但他坚持认为我的解决方案异常，可能会引起冲突。他补充说，我无法理解数据库设计的概念。

但是，他无法向我解释为什么他的解决方案是正确的，而我的解决方案是错误的。

问题是关于以下 kena 数据库表的数据库规范化：

![问题](../Images/4d0e26038cebfe724f8b5a2e7c3d6ec2.png)

左边是我的回答，右边是教授的回答：

![答案](../Images/44c6d59b8c6a120d6f614f0f66c62764.png)

更好的视图： [http ://tny.cz/48c4a28b](http://tny.cz/48c4a28b)

您认为我的错误是什么？为什么您认为他说我的答案远非正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:47:42.877

在这里实际上没有太多要回答的问题-但是在这里……您的教授是正确的。

1.  小计不适合项目的概念 - 不属于该表。
2.  员工 - 相同 - 似乎还可以 - 但实际上工作类别可能会随着时间而改变，并且不属于任何一个
3.  jobclass 应该有你显示的所有 3 列 - id、name 和 charge
4.  行项目 - 一样好。

此外，项目负责人似乎是一个额外的概念。不应该是这个答案的一部分，因为它似乎没有出现在您正在处理的基表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:48:08.133

有两个显着差异。

首先，您似乎将小计存储在项目中。这是重复的信息 - 您可以通过汇总每个项目的费用来获得小计。数据库设计的一个关键方面是“不要重复自己”。

第二个是您为“jobclass”创建了一个无意义的主键，而您的教授使用 jobclass 的名称作为主键。

理想情况下，您希望您的主键是唯一的（两种解决方案都满足这一点）。您还希望它保持不变 - 这就是我认为您的解决方案更好的地方 - 当您更改工作类“系统分析师”的描述时会发生什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T17:06:23.033

无论您使用作业类名称还是代理键，从实际的角度来看，两者都可以且正确。如果您使用该名称，则该名称很难更改，因为它被用作 FK 关系的一部分。这就是为什么通常会分配像您的答案中这样的代理 ID。

它也更节省空间（这是一个物理问题）。

主键应该小而稳定，所以我喜欢基于 ID 的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T18:00:07.780

我在这里看到了一些问题。

1.  正如其他人指出的那样，小计是派生的，因此不应包括在内。

2.  教授未能抓住项目负责人，而项目负责人似乎无法以其他方式推导出来。在原始版本中，它与employee_name 一起存储，这实际上让我大吃一惊。

3.  正如其他人所说，在基于名称的 pk 可能更改的地方使用代理键是预期和正常的。

4.  Total_charge 是另一个派生字段，不应包含在 3nf 解决方案中。

不，你不会离开的。您包含了几个派生字段，这在 3nf 建模中是一个很常见的错误。你的教授也不远，但如果我采访他，我会更深入地挖掘这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T16:48:55.790

这是一个自然键与代理键的问题吗？我们以前吃过[这些](https://stackoverflow.com/questions/63090/surrogate-vs-natural-business-keys)。还是与项目表中的小计有关？这确实违反了 3NF。

# parsing - attoparsec 对双精度数的错误解析

> ID：15298961
> 
> 赞同：4
> 
> 时间：2013-03-08T16:39:54.203
> 
> 标签：parsing, haskell, floating-point, floating-accuracy, attoparsec

我正在使用 attoparsec 的内置解析器“double”和“number”来解析浮点值，并且从不同的解析器中得到不同的结果。

> >解析号码“8.918605790440055e-2”
> 
> 完成“” 8.918605790440054e-2
> 
> > 解析双“8.918605790440055e-2”
> 
> 完成“” 8.918605790440055e-2

使用“数字”解析器似乎会丢失一些精度，而“双”解析器则不会。由于可以将 8.918605790440055e-2 表示为双精度，因为“双”解析器设法做到了，为什么“数字”解析器返回不同的结果？这是一个错误吗？

我正在使用 attoparsec 0.10.4.0。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T17:06:52.453

[这是故意的](http://hackage.haskell.org/packages/archive/attoparsec/0.10.4.0/doc/html/Data-Attoparsec-Text.html#v%3anumber)：

> 注意：这个函数几乎比理性快十倍。在整数输入上，它给出了完全准确的答案，**而在浮点输入上，它的准确度**略低于`rational`.

`attoparsec`默认情况下以准确性换取速度，如果您需要完全准确的解析，则必须使用较慢的`rational`解析器。

结果的差异是如此之小，以至于对于大多数目的来说，这并不重要，所以更快的默认解析器总体上可能是一个更大的胜利。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-08T17:09:38.727

好吧，让我们看一下[文档](http://hackage.haskell.org/packages/archive/attoparsec/0.10.4.0/doc/html/Data-Attoparsec-Text.html)。

*   [`double`](http://hackage.haskell.org/packages/archive/attoparsec/0.10.4.0/doc/html/Data-Attoparsec-Text.html#v%3adouble)

    > *注意：*此函数几乎比 快十倍`rational`，但准确度稍差。
    > 
    > 该`Double`类型支持大约 16 位小数的精度。对于 94.2% 的数字，此函数`rational`会给出相同的结果，但对于剩余的 5.8%，此函数会丢失小数点后 15 位左右的精度。对于 0.001% 的数字，此函数将丢失第 13 位或第 14 位小数的精度。

*   [`number`](http://hackage.haskell.org/packages/archive/attoparsec/0.10.4.0/doc/html/Data-Attoparsec-Text.html#v%3anumber)

    > *注意：*这个函数比`rational`. 在整数输入上，它给出了完全准确的答案，而在浮点输入上，它的准确度略低于理性。

它们都被认为有点不准确（以换取相对较快）。`number`的不准确度没有被量化，因此它的不准确度与 's 不同的事实`double`不是错误。

如果准确性至关重要，请使用[`rational`](http://hackage.haskell.org/packages/archive/attoparsec/0.10.4.0/doc/html/Data-Attoparsec-Text.html#v%3arational).

# android - 如何将 ImageFetcher(iosched) 与 ActionBarSherlock + mapview 一起使用？

> ID：15298968
> 
> 赞同：0
> 
> 时间：2013-03-08T16:40:17.090
> 
> 标签：android, android-mapview, actionbarsherlock, iosched

我正在使用允许我使用 ActionBarSherlock + MapView 的 ActionBarSherlock 版本。现在，我正在尝试显示地图视图和列表视图，但列表视图中有一些带有 url 图像的项目。我想使用 iosched 的 ImageFetcher，但是 getImageFetcher（iosched）方法只允许类型 FragmentActivity。

在这种情况下我该怎么办？？无论如何要从 Activity 转换为 FragmentActivity 吗？还是有其他解决办法？？

问候

# url - 处理重写链接中的句点

> ID：15298970
> 
> 赞同：1
> 
> 时间：2013-03-08T16:40:23.907
> 
> 标签：url, rewrite, period

在一些了不起的人的帮助下，我已经成功地重写了我的 URL。

我的链接现在设置如下：

**mydomain.com/city/state/businessname/**

但是当链接中有一个句点时，我的问题就会发挥作用。

**[http://www.mydomain.com/toronto/on/St._Christopher/](http://www.mydomain.com/toronto/on/St._Christopher/)**

不，我对空格没有任何问题（我用下划线替换它们，然后在我的数据库中查找它们时将它们翻转回空格，但我不确定如何处理该句点。我可以删除它，但是然后当我需要查找公司名称时，我不知道如何将句点放回原来的位置。

**[http://www.mydomain.com/toronto/on/St._Christopher/](http://www.mydomain.com/toronto/on/St._Christopher/)**

关于如何更好地处理这个问题的任何想法或建议？

谢谢！！！:D

# perl - Perl - 解析二进制文件并返回指定偏移量的值

> ID：15298974
> 
> 赞同：2
> 
> 时间：2013-03-08T16:40:28.143
> 
> 标签：perl, binary, hex, offset

我有一个需要能够解析的二进制文件。我要做的是指定一个偏移量，然后让程序返回该位置的字节值。

我不确定如何去做。我有文件打开部分，但我不知道如何让程序跳转到该位置。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:02:45.420

```
use Fcntl qw(:seek);

my($fh, $filename, $byte_position, $byte_value);

$filename      = "/some/file/name/goes/here";
$byte_position = 42;

open($fh, "<", $filename)
  || die "can't open $filename: $!";

binmode($fh)
  || die "can't binmode $filename";

sysseek($fh, $byte_position, SEEK_CUR)  # NB: 0-based
  || die "couldn't see to byte $byte_position in $filename: $!";

sysread($fh, $byte_value, 1) == 1
  || die "couldn't read byte from $filename: $!";

printf "read byte with ordinal value %#02x at position %d\n",
     ord($byte_value), $byte_position; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:12:07.590

使用[Fcntl](http://perldoc.perl.org/Fcntl.html)模块中[`seek`](http://perldoc.perl.org/functions/seek.html)的和方便的常量，如

```
#! /usr/bin/env perl

use bytes;
use strict;
use warnings;

use Fcntl ':seek';

open my $fh, "<", $0 or die "$0: open: $!";

seek $fh, 0, SEEK_END or die "$0: seek: $!";

my $last = tell $fh;
die "$0: tell: $!" if $last < 0;

for (1 .. 20) {
    my $offset = int rand($last + 1);
    seek $fh, $offset, SEEK_SET or die "$0: seek: $!";
    defined read $fh, my $byte, 1 or die "$0: read: $!";
    $byte = "\\$byte" if $byte eq "'" || $byte eq "\\";
    printf "offset %*d: \\x%02x%s\n",
      length $last, $offset,
      unpack("C", $byte),
      $byte =~ /[[:print:]]/a ? " '$byte'" : "";
}
__DATA__

 :   ℞:      

 ¡ƨdləɥ ƨᴉɥʇ ədoɥ puɐ ʻλɐp əɔᴉu ɐ əʌɐɥ ʻʞɔnl poo⅁ 
```

样本输出：

```
偏移量 47：\x65 'e'
偏移量 392: \x20 ' '
偏移 704：\xf0
偏移量 427: \x5c '\''
偏移 524: \x61 'a'
偏移量 1088: \x75 'u'
偏移量 413: \x20 ' '
偏移量 1093：\xbb
偏移量 1112：\xc9
偏移量 377：\x24 '$'
偏移量 64：\x46 'F'
偏移量 361：\x62 'b'
偏移量 898：\xf0
偏移量 566：\x5d ']'
偏移量 843：\xf0
偏移 1075：\xc9
偏移 280: \x20 ' '
偏移量 3：\x2f '/'
偏移量 673：\x8a
偏移 153: \x20 ' '
```

该部分的内容是从[Tom 的](https://stackoverflow.com/a/6163129/123109)关于在 Perl 程序中处理 UTF-8的优秀建议`__DATA__`中借用的。

# javascript - 多个 JS 显示/隐藏

> ID：15298975
> 
> 赞同：-2
> 
> 时间：2013-03-08T16:40:33.227
> 
> 标签：javascript, show-hide, multiple-instances

我在以下测试页面上的视频和常见问题解答部分有显示/隐藏功能：[code]http://63.246.25.145/surety-bonds/contract-bonds/performance_bond.htm[/code]

我相信我的代码应该显示 5 个常见问题解答和 3 个视频，但它显示的是 3 个常见问题解答和 3 个视频。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:49:22.787

您正在显示 5 个“li”元素，但答案也是“li”元素。要显示 5 个问题，您需要显示前 10 个列表项。

```
if(f.children("li").size()<=10)
    return; 
```

# asp.net - ASP.NET GridView TemplateField 调用函数(:int)

> ID：15298977
> 
> 赞同：3
> 
> 时间：2013-03-08T16:40:40.693
> 
> 标签：asp.net, function, gridview, int, call

我的情况如下：

我有一个 GridView 并创建了一个类来代表其中的一行。我期待在单元格中显示类的属性和函数的结果。

为此，我正在使用这样的列：

```
<asp:TemplateField HeaderText="1">
    <ItemTemplate>
        <asp:Label runat="server" text='<%# MatchesCount((Int32)1) %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

该类具有以下功能：

```
public class MatchesGridViewRow
{
...
    public string MatchesCount(int day) {...}
} 
```

我像这样绑定到 GridView：

```
GridView.DataSource = GetGridViewData(DateTime.Now.Month);
GridViewCalendar.DataBind();    

private List<MatchesGridViewRow> GetGridViewData(int month); 
```

我得到的错误是：CS0103：当前上下文中不存在名称“MatchesCount”。

这不是调用方法的正确方法吗？如果不是我应该怎么称呼它？从现在开始感谢，期待答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:43:49.380

尝试将此方法更改为静态方法

```
public static  string MatchesCount(int day) {...} 
```

然后打电话

```
'<%# MatchesGridViewRow.MatchesCount((Int32)1)%>' 
```

请检查同样的问题

[使用 gridView 中的 Eval("") 从 .ASPX 文件访问公共静态类文件](https://stackoverflow.com/questions/11492140/accessing-public-static-class-files-from-aspx-file-using-eval-from-gridview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:22:09.213

我检查下面的代码，它很有用：我希望

```
 <asp:TemplateField HeaderText="type" ItemStyle-Width="200">
                    <ItemTemplate>
                        <asp:Label ID="lbtype" runat="server" Text='<%# GetDescrptionHumanType(Convert.ToInt32(Eval("HumanType"))) %>' ></asp:Label>
                    </ItemTemplate>
                    <ItemStyle Width="200px"></ItemStyle>
                </asp:TemplateField>

   public  static string GetDescrptionHumanType(int val)
    {
       return  Utility.EnumEx.GetEnumDescription((HumanResourceType)val);

    }

   public static string GetEnumDescription(Enum value)
    {
        FieldInfo fi = value.GetType().GetField(value.ToString());

        DescriptionAttribute[] attributes =
            (DescriptionAttribute[])fi.GetCustomAttributes(
            typeof(DescriptionAttribute),
            false);

        if (attributes != null &&
            attributes.Length > 0)
            return attributes[0].Description;
        else
            return value.ToString();
    } 
```

# javascript - 正则表达式（JS）中的奇怪（恕我直言）在逗号和一位数字之间添加2个空格

> ID：15298978
> 
> 赞同：3
> 
> 时间：2013-03-08T16:40:44.240
> 
> 标签：javascript, regex

我有一个非常简单的字符串：

```
data="1,2,3,4,5," 
```

我想在一位数字前添加两个空格。

所以我使用这个“非常非常简单”的正则表达式：

```
data = data.replace(/,\s*(\d),/g,",  $1,"); 
```

但输出是：

```
"1,  2,3,  4,5" 
```

见： [http ://tinyurl.com/a8njw65](http://tinyurl.com/a8njw65)

我完全糊涂了。对我来说它必须工作：我没有发现任何错误。但它不起作用，所以我陷入了僵局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:45:37.520

尝试这个。

`"1,24,3,4,56".replace(/,\s*(\d)(?=,|$)/g,", $1");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:43:23.987

它确实有效。您在正则表达式中的 2 之后包含逗号，这意味着逗号不能成为正则表达式的下一个匹配项的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T17:08:11.423

问题是表达式消耗了`,`并且下一个匹配将找不到它。要解决它，您可以使用环视。例如：

```
"1,24,3,4,56".replace(/,\s*(\d)(?!\d)/g,",  $1");
"1,24,3,4,56".replace(/,\s*(?=\d(?!\d))/g,",  ");
"1,24,3,4,56".replace(/,\s*(?=\d(,|$))/g,",  "); 
```

# .net-3.5 - 使用 Aspose.PDF 在段落中附加文本

> ID：15298982
> 
> 赞同：1
> 
> 时间：2013-03-08T16:40:52.073
> 
> 标签：.net-3.5, aspose

我想做一些非常简单的事情，但我不知道怎么做。这变得非常烦人，这是我的问题。

我想在 aspose.pdf 部分中添加以下文本

```
 "<h1>What a nice <i>italic</i> freaking title</h1>" 
```

由于 apsose 的 PDF 生成不正确地支持 css 样式，它接缝，我的团队决定我们将采取不同的方法，即：支持基本的 html 元素，并使用代码中预定义样式的 aspose 对象库直接添加它们。现在，我做了以下函数来添加标题：

```
 public static void AddTitle(XElement xElement, Section section, TitleType type)
    {
        Text title;
        title = xElement.HasElements ? new Text(section, GetFullValue(xElement)) : new Text(section, xElement.Value);
        var info = new TextInfo();
        switch(type)
        {
            case TitleType.H1:
                info.FontSize = 22;
                break;
            case TitleType.H2:
                info.FontSize = 20;
                break;
            case TitleType.H3:
                info.FontSize = 18;
                break;
            case TitleType.H4:
                info.FontSize = 16;
                break;
            case TitleType.H5:
                info.FontSize = 14;
                break;
        }

        info.IsTrueTypeFontBold = true;
        title.IsKeptTogether = true;
        //title.IsHtmlTagSupported = true;
        title.TextInfo = info;
        section.Paragraphs.Add(title);
    } 
```

顺便说一句：在这个例子中传递给文本对象的内容是“这是一个漂亮的*斜体*标题”

目前，斜体不工作。如果我取消注释 .IsHtmlTagSupported，斜体将起作用，但我会丢失我的 TextInfo（粗体、字体大小等）。有没有办法使这项工作？或者，有没有办法在具有不同样式的单个段落中附加文本。（就像我可以在包含斜体文本的段落中添加另一个 Text 对象）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:04:13.793

将以下简单代码与 Aspose.Pdf for .NET 7.7.0 一起使用时，我可以在 H1 中看到斜体文本和所有字符串。使用 IsHtmlTagSupported 时，建议使用 HTML 标签指定文本格式（粗体、字体大小等）。

```
Aspose.Pdf.Generator.Pdf pdf1 = new Aspose.Pdf.Generator.Pdf();
Aspose.Pdf.Generator.Section sec1 = pdf1.Sections.Add();
Text title = new Text("<h1>What a nice <i>italic</i> freaking title</h1>");
var info = new TextInfo();
info.FontSize = 12;
//info.IsTrueTypeFontBold = true;
title.TextInfo = info;

title.IsHtmlTagSupported = true;

sec1.Paragraphs.Add(title);
pdf1.Save("c:/pdftest/PDF_From_HTML.pdf"); 
```

此外，文本段落可以有一个或多个 Segment 对象，您可以为每个段指定不同的格式。为了满足您的要求，您可以尝试使用以下代码片段

```
Aspose.Pdf.Generator.Pdf pdf1 = new Aspose.Pdf.Generator.Pdf();
Aspose.Pdf.Generator.Section sec1 = pdf1.Sections.Add();
Text title = new Text("What a nice");

var info = new TextInfo();
info.FontSize = 12;
info.IsTrueTypeFontBold = true;
title.TextInfo = info;

Segment segment2 = new Segment(" italic ");
// set the formatting of segment2 as Italic
segment2.TextInfo.IsTrueTypeFontItalic = true;
// add segment2 to segments collection of text object
title.Segments.Add(segment2);

Segment segment3 = new Segment(" freaking title ");
// add segment3 to segments collection of text object
segment3.TextInfo.IsTrueTypeFontBold = true;
title.Segments.Add(segment3);

sec1.Paragraphs.Add(title);
// save the output document
pdf1.Save("c:/pdftest/PDF_with_Three_Segments.pdf"); 
```

# c++ - 现在和现在之间的 Difftime 会产生 1 小时的差异（C++）

> ID：15298987
> 
> 赞同：1
> 
> 时间：2013-03-08T16:41:08.953
> 
> 标签：c++

为什么现在和现在之间的差异时间会导致一小时？不应该是0吗？

```
time_t diffe = difftime(now, now);
CCLOG("wow %i", localtime(&diffe)->tm_hour); 
```

日志结果 = “哇 1”

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T16:49:01.583

[`difference`](http://linux.die.net/man/3/difftime)是一个双精度值`0`。

当您使用`time_t`带值`0`时，[`epoch`](http://linux.die.net/man/2/time)这是 1970-01-01 00:00:00。当您使用[`localtime`](http://linux.die.net/man/3/localtime)和 提前一小时的时区解释这一点时`GMT`，您会得到 1970-01-01 01:00:00，这就是您看到的原因

```
1 hour 
```

“不同之处”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:44:27.737

`difftime`返回 a `double`（秒数），而不是`time_t`.

`localtime`, 另一方面，接受一个`time_t*`论点。通过 a`double*`没有多大意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:45:08.497

`difftime`返回以秒为单位的差异（双）。`localtime`另一方面，`tm`使用提供的值初始化结构。所以我的猜测是你正在`GMT+1`时区执行代码。要获得小时差，只需打印`difftime(now, now) / (60.0 * 60.0)`

# jquery - jQuery .bind() 一个事件覆盖另一个

> ID：15298989
> 
> 赞同：1
> 
> 时间：2013-03-08T16:41:11.023
> 
> 标签：jquery

我创建了这个简单的工具来选择元素范围。[http://jsfiddle.net/EnRfQ/2/](http://jsfiddle.net/EnRfQ/2/) 但它有一些问题。

1）我希望选定的元素是绿色的。但是为什么`prvni.nextUntil(druha).andSelf().add(druha).css("background-color", "green");`当开始和结束元素相同时不起作用？

2）为什么悬停效果在第一次点击后停止工作？

如果你有一些想法，当然可以随意改进我的代码，因为这只是一个草稿。

祝你今天过得愉快

编辑：我遇到了最后一个（我希望）问题。[http://jsfiddle.net/ejtrD/11/](http://jsfiddle.net/ejtrD/11/)当我将鼠标移到一些`div`嵌套在 中时`tr`，悬停效果停止工作，我不知道为什么

EDIT no.2 已解决，我改用了 mouseleave 事件，它工作得很好，因为将光标移动到嵌套元素时它不会触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:47:54.743

第二个问题是以下行

```
tabulka.find("tr").css("background-color", "white"); 
```

将其更改为

```
tabulka.find("tr").css("background-color", ""); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/EnRfQ/4/)

# sql - 我怎样才能在一列中只列出一个不同的值？-SQL

> ID：15298993
> 
> 赞同：0
> 
> 时间：2013-03-08T16:41:24.953
> 
> 标签：sql, select

我有几列数据。第一列包含我只想显示一次的所有唯一值。第二列可能有相同数据的多个条目。这导致第一列显示多个条目，第二列中的每个条目一个。

例子：

```
A   123
A   432
A   2352
B   5342
C   34256
C   23423 
```

我只想看到 A 的一行，B 的一行，C 的一行。我不在乎为每个 A/B/C 行显示第二列中的哪个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:42:31.170

使用`GROUP BY`子句。

该`GROUP BY`子句可在 SQL SELECT 语句中使用，以跨多条记录收集数据并按一列或多列对结果进行分组。

```
SELECT  col1, MAX(col2) col2
FROM    tableName
GROUP   BY col1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/6da69/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:42:48.053

您可以使用聚合函数来获取第二列的`max`or`min`值，然后将 a`group by`应用于`col1`：

```
select col1, max(col2) as col2
from yourtable
group by col1 
```

# html - IE中容器div弹出滚动条

> ID：15298994
> 
> 赞同：3
> 
> 时间：2013-03-08T16:41:32.840
> 
> 标签：html, css, internet-explorer, scrollbar

我有一个奇怪的 IE 错误。我有一堆页面使用几乎相同的模板来显示内容。在每个页面中，有 3 个主容器：页眉、内容和页脚。内容 div 分为 2 个其他 div；1个图像容器，另一个是ul。在全部使用相同代码和模板的 9 个页面中，有 3 个在 ie9 中的 ul div 上弹出一个垂直滚动条。其他 6 页没有垂直滚动条。

我尝试将内容容器 div 从“位置：绝对”更改为“位置：相对”，但这没有用。我已经在页面上的css标题和主样式表的body标签中将溢出设置为隐藏和自动，但这不起作用。我检查了代码以确保没有任何错误的标签，一切都很干净。

如果您有 ie9，请随意查看一页，您可以通过转到“电影”并单击僵尸入侵和追逐白龙找到其他页面：
[http ://www.afterlightpictures.com/101.html](http://www.afterlightpictures.com/101.html)

容器div是#films，图片div是#largeposter，你可以在下面的代码中分辨出哪个是ul。让我知道我可能做错了什么，或者这是否是 IE 多么糟糕的另一个例子。

```
#films {
    width: 70%;
    padding: 0px 0px;
    position: relative;
    overflow: auto;
    margin-top: 180px;
    margin-left: 0px;
}

#largeposter  {
    position: relative;
    margin-left: 20px;
    float: left;
}

ul#info  {
    position:relative;
    float: left;
    margin-top: 0px;
    padding-left: 20px;
    list-style: none;
    display: list-item;
    width: 60%;
    text-align: justify;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:14:25.267

我想你是在问如何删除滚动条？

我删除了#films 元素上的滚动条的两种方法：

添加`height:100%`到您的#films css

或者你可以：

`overflow:auto;`从#films css中删除

# java - 带有异常 Java 的异常构造函数

> ID：15298995
> 
> 赞同：1
> 
> 时间：2013-03-08T16:41:33.163
> 
> 标签：java, exception, inheritance, constructor

有谁知道为什么对于重写过程，重写方法必须抛出与重写方法相同类型（或子类型）的异常，而另一方面，对于构造函数，它以相反的方式工作（因此，必须抛出相同的异常或超类抛出的超类型。提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:05:18.493

构造函数不会覆盖其超类的构造函数，但它们会显式或隐式*调用超类的构造函数。*因此，就像调用某个抛出 的其他方法的方法一样`Exception`，构造函数必须要么捕获超类的构造函数抛出的异常，要么必须声明它抛出相同的异常（或该异常的超类）。

另一方面，重写方法必须遵守超类的方法定义。因此，它可以抛出更具体的异常或根本不抛出异常。但它不能抛出更广泛的异常，因为这会违反超类的合同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:06:21.147

我相信子类构造函数没有这样的限制。他们可以抛出他们关心的任何类型的异常，与超类构造函数抛出的类型无关。显然，如果他们让来自超类构造函数的异常通过，他们将不得不声明它或它的超类型，就像使用任何其他方法一样。但是，这并不是对子类构造函数的特定限制：您可以通过抛出其他类型来轻松捕获和处理异常。

原因是子类中的构造函数不会“覆盖”超类中的构造函数，并且不会以多态方式使用。这是一个独立的东西，就像一个被调用`Subclass.B()`的函数独立于`Superclass.A()`.

此外，您*始终*知道，当您调用 时`new Subclass()`，您正在调用该构造函数。然而，如果您引用 a`Superclass`并调用`superclass.overriddenMethod()`它，您无法确定类型是什么。因此，任何重写该方法的子类都不能抛出除了在超类上声明的异常之外的异常，就像它们可以更改方法签名的其余部分一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:07:07.883

在构造函数中总是有一个（可能是隐式的）对 super 的调用。抛出一个超类 Exception 也会捕捉到这一点。

```
public B() {
    ... initialize fields declared with X x = ...;
    ... call super constructor
    ... body of constructor
} 
```

An overriding method however can be more specific, also for the exceptions: reduce the possibilities.

# delphi - 什么会导致 delete 循环 Sleep()ing 并且永远不会在 Borland / Embarcadero RTL 中返回？

> ID：15298997
> 
> 赞同：2
> 
> 时间：2013-03-08T16:41:40.867
> 
> 标签：delphi, memory, sleep, c++builder, fastmm

我有一个奇怪的错误，当删除一个特定对象时，`delete`永远不会返回。相反，它似乎花时间`Sleep()`在一个永久循环中调用。这是调用堆栈：

```
:7723fd71 ntdll.ZwDelayExecution + 0x15
:767c4498 KERNELBASE.Sleep + 0xf
:21495359 BORLNDMM.@Borlndmm@SysFreeMem$qqrpv + 0xb5
:32aaa3e5 CC32100MT._free + 0xd
:32a020b2 CC32100MT.@$bdele$qpv + 0x1e
[My code] 
```

运行时，它返回`SysFreeMem`（从不返回）并再次从内部`free`调用，永久循环。`Sleep``SysFreeMem`

我的代码非常简单：它是一个 VCL 事件处理程序，一个微调框刚刚更改，一个设置对象更新，并且它所做的临时设置正在被删除：

```
delete poNewSettings; 
```

这段代码一两年没有改变，设置类也有一段时间没有改变，它基本上是一个包含许多设置的巨大的类似结构的对象。它有一个编译器生成的析构函数。单步执行代码显示了一些删除字符串和其他 std:: 对象的调用，然后在单步执行下一个函数（即在 IDE结束时`~basic_string()`，在右大括号处按 F7 ）时，它似乎冻结了`}`从不显示。冻结是它在 Sleep() 中。此代码在主线程中运行。

我尝试使用 CPU 视图来推断调用 Sleep() 的延迟，但无法发现它 - 恐怕我还没有完全掌握 x86 汇编代码。

另一个线程在里面`Sleep`，可能与 COM 相关（该应用程序是一个 COM 服务器，尽管目前没有使用 COM）。它的整个调用栈是：

```
:7723fd71 ntdll.ZwDelayExecution + 0x15
:767c4498 KERNELBASE.Sleep + 0xf
:74c7d98d ; C:\Windows\syswow64\ole32.dll
:74c7d87a ; C:\Windows\syswow64\ole32.dll
:768133aa kernel32.BaseThreadInitThunk + 0x12
:77259ef2 ntdll.RtlInitializeExceptionChain + 0x63
:77259ec5 ntdll.RtlInitializeExceptionChain + 0x36 
```

另一个线程正在做某事并主动分配和释放内存并调用`Sleep()`- 一个后台任务正在运行，它正在检查它是否需要工作（它不必）并且正在休眠 100 毫秒以再次检查。分配和免费用于文件夹路径的字符串。虽然程序中还有其他线程，但它们都被阻塞等待做某事，这次使用`WaitForSingleObject`或类似的。此后台任务线程每 100 毫秒唤醒一次（从睡眠中返回）；我没有看到（还没有！）它如何影响另一个线程的`delete`.

据我所知，没有其他线程正在删除或分配任何东西。`CC32100MT._malloc`我在,`CC32100MT._free`和中放置了断点`CC32100MT._realloc`。运行时没有其他线程中断，当暂停检查时，没有其他线程在任何这些调用中。

**删除循环而不返回的原因可能是什么？**

我正在使用： * RAD Studio 2010，完全更新 * 应用程序主要是 C++（C++ Builder），带有少量 Delphi。* 因为它使用的是 Embarcadero RTL，所以我认为它使用的是 FastMM

我添加了 Delphi 标签，因为它使用 Embarcadero RTL 和 FastMM，Delphi 人使用的次数比 C++ 人多得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:42:51.300

在这种情况下，我不能 100% 确定您是否可以信任 RAD Studio IDE 中的调试器来正确命名所涉及的内核符号。

我认为您应该进入发生这种情况的地方，然后检查您正在释放的变量，看看它是否已损坏。

如果您要释放的变量是您自己定义的类，我通常喜欢将 Guard 字段添加到对象的开头和结尾。

```
class TMyPOSettings {
  public:
    ...
  private:
    int Guard1;
    // all my other instance data 
    int Guard2
}; 
```

在构造函数中，我将守卫设置为我在某处定义的 MAGIC1 和 MAGIC2，在析构函数中，我将守卫设置为 MAGIC_FREE_1 和 MAGIC_FREE_2。

然后我可以查看我是否重复破坏了同一个对象，或者是否有其他东西覆盖了我在该位置的堆内存。

我想知道您正在调试的内容是否可能实际上是在 Windows 中捕获到严重异常后代码的结果，中止您的线程正在执行的任何操作，并且基本上现在什么都不做，直到您的进程终止。我要调试的第一个地方是单步执行析构函数的代码并查看它的作用。

# java - 网页在不同浏览器中完美显示

> ID：15298999
> 
> 赞同：0
> 
> 时间：2013-03-08T16:41:46.187
> 
> 标签：java, jsp

在一次面试中，关于java，面试官问了很多关于核心java的问题，然后他主要问了spring，struts等框架，但后来他问了一个问题，比如说有一个网页，他有一个包含许多jsp页面的项目，但问题是当他在 Firefox 浏览器中点击他网站的网址时，网站可以完美打开，但是当他在 Internet Explorer 上点击网址时，网页对齐受到干扰，无法完美显示，并且在其他浏览器中也观察到类似问题，所以他需要执行的设置才能使网页完美地反映在所有浏览器中，请为此提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:42:25.723

正如许多评论者所指出的那样，没有一种正确的方法可以做到这一点。我会看看有条件的评论。它们在普通浏览器中呈现为注释掉的代码，但在 IE 中被拾取为指令以允许额外的格式。

看看[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

从上面的参考：

```
<!--[if IE 6]>
Special instructions for IE 6 here
<![endif]--> 
```

您可以使用这些技巧来显式设置 IE 以不同/神秘/自动魔术方式呈现的属性

一项重要的是

```
<!--[if lte IE 7]> 
```

这将允许您为小于或等于 IE9 的任何版本设置属性（比为您的客户可能想要呈现的每个版本都设置条件语句要好得多）