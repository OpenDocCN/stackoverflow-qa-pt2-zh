# StackOverflow 问答 13991000-13991999

# java - 用于查找最常用词或词组的 Lucene

> ID：13991000
> 
> 赞同：0
> 
> 时间：2012-12-21T13:22:53.537
> 
> 标签：java, lucene

> **可能重复：**
> [如何使用 Lucene 获取频繁出现的短语](https://stackoverflow.com/questions/3138928/how-to-get-frequently-occuring-phrases-with-lucene)

我需要在索引中找到出现次数最多的词或词组，这意味着出现次数最多的文本可能是词本身或词组。非常类似于推特的热门话题（当然没有标签实体）。Lucene 是否提供了某种方法来做到这一点，或者我如何在海量数据中实现这一点。如果问题不清楚，我可以举出更具体的例子。顺便说一句，我正在使用 java 和 Lucene 3.5。

快速编辑“词组”最多可以包含 3 个词。假设在一个大文本中，我有“是”500 次“天气”100 次“好”300 次和词组“天气很好”90 次。我需要确定“天气很好”的出现对我来说是否重要。当然，我需要查看每个索引词...

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:41:07.813

如果您想找到最大长度为 3 的最频繁出现的连续标记序列，则可以将问题视为搜索最频繁的 N-gram，如问题[如何使用 Lucene 获取频繁出现的短语中](https://stackoverflow.com/questions/3138928/how-to-get-frequently-occuring-phrases-with-lucene)
所述在您的情况下，您可能不需要不需要 Solr，看看[这个小代码](http://www.philippeadjiman.com/blog/2009/11/02/writing-a-token-n-grams-analyzer-in-few-lines-of-code-using-lucene/)，你只需要计算每个生成的 N-gram，并保持那些出现的次数比所需阈值大几倍。有效计数这些 Ngram 的问题更加困难。如果它们不是很多（例如少于 1~2M），您可以使用 HashMap。
如果数量更多，您可以尝试使用有趣的 count min sketch 算法，有一个[实现](https://github.com/clearspring/stream-lib)，但我个人从未使用过它，也不知道它有多好。

# c# - 在 C# 中修剪字符串数组的内容

> ID：13991005
> 
> 赞同：6
> 
> 时间：2012-12-21T13:23:15.470
> 
> 标签：c#, visual-studio-2005, .net-2.0, trim

```
 String []lines = System.IO.File.ReadAllLines(path);
    foreach (String line in lines)
    {
        line.Trim();
    } 
```

显然这不起作用，因为`String.Trim`将 Trimmed 版本作为新字符串返回。而你做不到`line = line.Trim()`。那么，这样做的唯一方法是老派`for`循环吗？

```
 for(int i=0;i<lines.Length;++i)
    {
        lines[i] = lines[i].Trim();
    } 
```

**注意**我仅限于 Visual Studio 2005 即 .Net 2.0

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T13:25:08.637

```
lines.Select(l => l.Trim()).ToArray(); 
```

或者，对于 .NET 2.0：

```
static IEnumerable<string> GetTrimmed(IEnumerable<string> array)
{
    foreach (var s in array)
        yield return s.Trim();
} 
```

通过以下方式使用：

```
lines = new List<string>(GetTrimmed(lines)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:27:44.847

据此，我们[在](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)`List<string>`.NET 2.0 中。

因此，尝试使用`List<string>`.

```
String []lines = System.IO.File.ReadAllLines(path);

List<string> yourLinesTrimed = new List<string>;
foreach (String line in lines)
{
        yourLinesTrimed.Add(line.Trim());
} 
```

然后，您可以`List<string>`使用`ToArray()`.

让我们构建一个执行此操作的方法：

```
 public String[] TrimAnArray(String[] lines)
 {
     List<string> yourLinesTrimed = new List<string>;
     foreach (String line in lines)
     {
         yourLinesTrimed.Add(line.Trim());
     }
     return yourLinesTrimed.ToArray();
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T13:35:56.353

*“那么，这样做的唯一方法是老式的 for 循环吗？”* 是的，在 .NET 2 上你没有 Linq 的东西。但老实说，“老派的 for 循环”也是最有效、最易读和最短的方法。所以有什么问题？

```
for(int i = 0; i < lines.Length; i++)
    lines[i] = lines[i].Trim(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T13:25:50.683

你也可以使用 LINQ：

```
String []lines = System.IO.File.ReadAllLines(path)
                .Select(line => line.Trim())
                .ToArray(); 
```

* * *

**编辑：**

如果您仅限于 .NET 2.0，那么我会坚持使用 for 循环，就像您在第二个代码示例中所做的那样。我认为没有更好的方法可以做到这一点，for循环就足够有效了。当然，有一些解决方法可以让 LINQ 在 .NET 2.0 中工作，但我认为这不值得。

# java - 执行外部程序

> ID：13991007
> 
> 赞同：37
> 
> 时间：2012-12-21T13:23:32.580
> 
> 标签：java, runtime, runtime.exec

我试图制作一个调用外部程序的应用程序，我必须传递两个参数。它没有给出任何错误。

用 C++ 编写的`program.exe`，拍摄照片并修改`.txt`文件的内容。

Java 程序运行但它什么也不做——

这是我的示例代码：

```
 String[] params = new String [3];
    params[0] = "C:\\Users\\user\\Desktop\\program.exe";
    params[1] = "C:\\Users\\user\\Desktop\\images.jpg";
    params[2] = "C:\\Users\\user\\Desktop\\images2.txt";
    Runtime.getRuntime().exec(params); 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-21T13:37:11.207

[从这里](https://stackoverflow.com/questions/5604698/java-programming-call-an-exe-from-java-and-passing-parameters)可耻地借了这个

```
Process process = new ProcessBuilder("C:\\PathToExe\\MyExe.exe","param1","param2").start();
InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
String line;

System.out.printf("Output of running %s is:", Arrays.toString(args));

while ((line = br.readLine()) != null) {
  System.out.println(line);
} 
```

更多信息[在这里](http://www.rgagnon.com/javadetails/java-0014.html)

关于如何在[此处](https://stackoverflow.com/questions/9958629/executing-external-program-in-java-and-passing-commands)和[此处传递命令的其他问题](https://stackoverflow.com/questions/2110415/how-to-bind-a-windows-console-application-with-java-application)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-21T13:32:52.900

你也可以试试它更现代的表亲，[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)：

[Java Runtime.getRuntime().exec() 替代品](https://stackoverflow.com/questions/2876964/java-runtime-getruntime-exec-alternatives)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-03T04:47:56.717

```
import java.io.*;

public class Code {
  public static void main(String[] args) throws Exception {
    ProcessBuilder builder = new ProcessBuilder("ls", "-ltr");
    Process process = builder.start();

    StringBuilder out = new StringBuilder();
    try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
        String line = null;
      while ((line = reader.readLine()) != null) {
        out.append(line);
        out.append("\n");
      }
      System.out.println(out);
    }
  }
} 
```

**[在线尝试](https://code.labstack.com/S2KUEMHz)**

# c# - 哪些 C# 桌面应用程序框架适用于 Windows XP 或更高版本？

> ID：13991012
> 
> 赞同：1
> 
> 时间：2012-12-21T13:23:48.497
> 
> 标签：c#, .net, windows, desktop-application, desktop

我将在 Visual Studio 上使用 C# 开发一个用于管理健身房的软件，该软件需要在任何版本的 Windows 上运行，而无需安装任何框架更新或其他任何东西。

那可能吗？

我在某处听说 .NET Framework 2.0 包含在所有当前支持的 Windows 版本中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:29:47.313

欢迎来到 StackOverflow！首先要回答的一个好问题是：您希望您的应用程序使用哪些版本的 Windows？“任何”都很大。运行 .NET 的最旧 Windows 版本是 Windows 98，但已安装 .NET 的最旧 Windows 版本是 Windows Vista。

如果您以 .NET 2.0 或 3.0 为目标，您将与最广泛的 Windows 版本兼容，这些版本将 .NET 作为操作系统的一部分。

# mysql - MySQL 按日期查询大倒数

> ID：13991015
> 
> 赞同：8
> 
> 时间：2012-12-21T13:24:01.697
> 
> 标签：mysql, performance, database-performance, database-indexes, sqldatetime

我有 2200 万条记录的大桌子。我想执行下一个查询：

```
select auto_alerts from alerts_stat  where endDate > "2012-12-01" 
```

为了提高性能，我为 endData 字段添加了 BTREE 索引：

```
CREATE INDEX endDate_index USING BTREE ON alerts_stat(endDate) 
```

在我开始分析查询执行计划之后：

当我想获取 15 到 7 天前的参数时：

```
explain select alerts_sp from alerts_stat 
where endDate between CURDATE() - 15 and CURDATE() - 7; 
```

我得到了下一个执行计划来处理 2,762,088 行。

```
'1', 'SIMPLE', 'browser_plugin_alerts_stat', 'range', 'endDate_index', 'endDate_index', '4', NULL, '2762088', 'Using where' 
```

当我将间隔增加一天时，我收到：

```
explain select alerts_sp from alerts_stat 
where endDate between CURDATE() - 15 and CURDATE() - 6; 
```

EXPLAIN 表示 MySQL 计划处理所有 22,923,126 行。

```
'1', 'SIMPLE', 'browser_plugin_alerts_stat', 'ALL', 'endDate_index', NULL, NULL, NULL, '22932390', 'Using where' 
```

例如在 WHERE 进程 22,925,642 中选择不带任何条件。

我可以改进执行计划吗？也许我在某个地方有错误，或者是正常的 MySQL 行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:29:22.917

当结果集超过所有行的 8-9% 时，MySQL 会进行全表扫描。对我来说，看起来有一天你会在全表扫描方向添加摆动 MySQL。您可以尝试强制索引以查看结果是否更好。

**更新：**

根据我的阅读，MySQL 查询优化器在这样的边缘情况下往往会选择错误，因此它可以很容易地更好地强制索引。否则，这是一个简单的查询，我没有太多的优化空间。

也许在这两列上创建[覆盖索引并强制使用它可能会产生最佳结果。](http://ronaldbradford.com/blog/tag/covering-index/)

# android - 如何在android中更改键盘移键按钮指示灯颜色

> ID：13991016
> 
> 赞同：3
> 
> 时间：2012-12-21T13:24:20.617
> 
> 标签：android, android-layout, android-library, android-keypad

我想改变`keyboard` `key-shift` `indicator`颜色。键如下所示。

默认颜色是`green`我需要改变它，因为`red`我想要做什么！？

在此指示灯呈绿色亮起时，我想更改该绿色。

![在此处输入图像描述](../Images/307f5a21c17779b10fa3df0b3cd0ad65.png)

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:26:10.200

编写您自己的自定义键盘应用程序。SDK 示例中的键盘可以为您提供基本代码。

您无法从应用程序中控制其他键盘的视觉行为，这就是您必须自己制作键盘的原因。

# regex - 同时交换两个字符串

> ID：13991017
> 
> 赞同：0
> 
> 时间：2012-12-21T13:24:31.447
> 
> 标签：regex, sed

我怎么能在 sed 中做什么`tr "ae" "ea"`？我不能像在[这个问题](https://stackoverflow.com/questions/3578549/easiest-way-to-swap-occurrences-of-two-strings-in-vim)中那样使用临时字符串，因为我不知道保证不会出现在文本中的字符串。

也许我可以先用反斜杠等转义所有“a”、“e”和“\”……还是有更简单的方法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:56:43.487

您得到了答案，但您的陈述是“我不能像在这个问题中那样使用临时字符串，因为我不知道保证不会出现在文本中的字符串。” 您可以像这样创建一个字符串：

```
sed 's/@/@A/g; s/foo/@B/g; s/bar/foo/g; s/@B/bar/g; s/@A/@/g' file 
```

上面将所有“@”字符转换为字符串“@A”，然后通过首先将“foo”s 转换为“@Bs”来交换 foo 和 bar。那时你可以保证你的文本中没有“@Bs”，因为每个原始的“@”现在都有一个“A”，它由第一个 s// 提供。其余的应该是显而易见的。

当您需要使用其他命令对文件执行其他操作并且需要一些保证不在输入中的字符串时，这是一种非常有用的技术：

```
sed 's/@/@A/g' file | <commands using @B, @C, etc.> | sed 's/@A/@/g' 
```

显然，您需要确保您在中间使用的任何命令都不会生成“@A”（或您选择的任何替换字符串）作为其输出的一部分！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:48:51.853

您可以使用[变换（y）命令](http://www.grymoire.com/Unix/Sed.html#uh-49)；

```
sed 'y/ae/ea/' 
```

> > 回声机场 | sed 'y/ae/ea/'
> 耳水肿

# c - 相当简单的 c 代码中的安全漏洞

> ID：13991018
> 
> 赞同：5
> 
> 时间：2012-12-21T13:24:42.230
> 
> 标签：c, security, buffer-overflow

我正在为我的最后一次考试而学习（是的！），并且遇到了一个我很难弄清楚的问题。这是一个古老的考试问题，您应该在其中找到至少两个可以在读取 ppm 图像文件的函数中被利用的漏洞。我能确定的唯一问题是 cols 和/或 rows 是否被赋予了意外的值，要么太大（导致整数溢出）要么为负，这会导致 img->raster 的大小不正确，从而打开基于堆的可能性缓冲区溢出攻击。

据我所知，未经检查的 malloc 不应该是可利用的。

```
struct image *read_ppm(FILE *fp)
{
    int version;
    int rows, cols, maxval;
    int pixBytes=0, rowBytes=0, rasterBytes;
    uint8_t *p;
    struct image *img;
    /* Read the magic number from the file */
    if ((fscanf(fp, " P%d ", &version) < 1) || (version != 6)) {
        return NULL;
    }
    /* Read the image dimensions and color depth from the file */
    if (fscanf(fp, " %d %d %d ", &cols, &rows, &maxval) < 3) {
        return NULL;
    }
    /* Calculate some sizes */
    pixBytes = (maxval > 255) ? 6 : 3; // Bytes per pixel
    rowBytes = pixBytes * cols; // Bytes per row
    rasterBytes = rowBytes * rows; // Bytes for the whole image
    /* Allocate the image structure and initialize its fields */
    img = malloc(sizeof(*img));
    if (img == NULL) return NULL;
    img->rows = rows;
    img->cols = cols; 
    img->depth = (maxval > 255) ? 2 : 1;
    img->raster = (void*)malloc(rasterBytes);
    /* Get a pointer to the first pixel in the raster data. */
    /* It is to this pointer that all image data will be written. */
    p = img->raster;
    /* Iterate over the rows in the file */
    while (rows--) {
        /* Iterate over the columns in the file */
        cols = img->cols;
        while (cols--) {
            /* Try to read a single pixel from the file */
            if (fread(p, pixBytes, 1, fp) < 1) {
                /* If the read fails, free memory and return */
                free(img->raster);
                free(img);
                return NULL;
            }
            /* Advance the pointer to the next location to which we
            should read a single pixel. */
            p += pixBytes;
        }
    }
    /* Return the image */
    return img;
} 
```

原文（最后一题）：[http ://www.ida.liu.se/~TDDC90/exam/old/TDDC90%20TEN1%202009-12-22.pdf](http://www.ida.liu.se/~TDDC90/exam/old/TDDC90%20TEN1%202009-12-22.pdf)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:57:19.207

创建一个大文件，这样读取`row`和`cols`都是否定的。`rasterBytes = pixBytes * rows * cols`是*积极*的，所以一切都会好起来的`p = img->raster;`。但是此时你有两个无限循环，程序可能会覆盖堆。

`row`另一种攻击是设置它们以`cols`使它们具有不同的符号。您可以选择其中一个值为`-1`，而另一个值足够大以读取您想要的数据。分配

```
 img->raster = (void*)malloc(rasterBytes); 
```

将失败，这导致 img->raster 指向 NULL。意思是

```
 fread(p, pixBytes, 1, fp) < 1 
```

会尝试将文件的内容读入内核内存。如果此代码在内核模式下执行，具体取决于系统（比如说旧的 unix，它不使用内存段），那么您将用文件的内容覆盖内核内存的内容。不使用内存段的内核不依赖于分段错误，而是依赖于页面错误（没有分配任何实际页面的虚拟地址）。问题是存在虚拟内存设计，因此第一个实际页面直接分配给内核页面。即内核虚拟地址 0x0 对应于 0x0 处的真实内存，并且完全有效（在内核内部）。

**编辑：**在这两种情况下，攻击者的目标是将输入文件的内容（完全在他的控制之下）注入他不应该访问的内存区域，同时无法修改函数`read_ppm()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:56:21.767

还有一个事实是，没有检查此分配是否成功。可能导致 DoS。

```
img->raster = (void*)malloc(rasterBytes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:03:23.690

如果分配失败：

```
img->raster = (void*)malloc(rasterBytes); 
```

你可能正在写一些你不打算写的记忆。

该分配的大小由文件中的数据控制。

# sql - 检索 Oracle 中所有互连存储过程的列表

> ID：13991019
> 
> 赞同：0
> 
> 时间：2012-12-21T13:24:44.073
> 
> 标签：sql, oracle, oracle10g

我有要在 Oracle 中部署到登台服务器的存储过程列表。我最终在部署时错过了一些程序。

有没有办法获取在另一个范围内被调用的所有存储过程的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:31:48.343

您可以使用[ALL_DEPENDENCIES](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1068.htm#i1576452)视图来获取它。

ALL_DEPENDENCIES 描述了当前用户可访问的包、触发器、过程和函数之间的依赖关系。USER_DEPENDENCIES 对当前用户拥有的那些对象和 DBA_DEPENDENCIES（如果您有权访问）对数据库中的所有内容执行相同的操作。

以下将为您提供依赖于另一个包的当前用户的包、过程和函数列表，该用户有权访问的函数过程。

```
select *
  from all_dependencies
 where type = 'PACKAGE BODY'
   and owner = user
   and type in ('PROCEDURE','FUNCTION','PACKAGE','PACKAGE BODY')
   and referenced_type in ('PROCEDURE','FUNCTION','PACKAGE','PACKAGE BODY') 
```

如果你愿意，你可以玩一下，例如我可能会排除 SYS 对象等。

# gwt - 如何在不执行重定向 gwt 的情况下取回 URL？

> ID：13991021
> 
> 赞同：0
> 
> 时间：2012-12-21T13:24:48.077
> 
> 标签：gwt

有人可以解决我的问题吗？？如何在不执行重定向 gwt 的情况下取回 URL ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:37:43.227

这个问题在另一个[帖子](https://stackoverflow.com/questions/13993681/how-can-i-get-the-url-that-the-page-is-redirected-from/13994647#13994647)中被问到，我刚刚回答了。

[如何获取重定向页面的 URL？](https://stackoverflow.com/questions/13993681/how-can-i-get-the-url-that-the-page-is-redirected-from/13994647#13994647)

# xaml - 如何在 Windows 应用商店应用程序中同时启用选择和项目单击

> ID：13991022
> 
> 赞同：2
> 
> 时间：2012-12-21T13:24:49.337
> 
> 标签：xaml, windows-store-apps

我有一个这样的 ListView：

```
<ListView SelectionMode="Single" IsItemClickEnabled="True" ItemsSource="..." ItemClick="listView_ItemClick">
    ...
</ListView> 
```

当显示此列表视图时，第一个项目被选中。

单击项目触发 listView_ItemClick。到目前为止一切都很好。

问题是，第一项始终保持选中状态。即使我单击其他项目，它们也会触发单击事件，但不会被选中。当用户点击或触摸它们时，如何让项目既触发点击事件又被选中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T13:49:29.040

根据[MSDN](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.ui.xaml.controls.listviewbase.isitemclickenabled)：

> 如果将 IsItemClickEnabled 属性设置为 true，则必须将 SelectionMode 属性设置为 ListViewSelectionMode.None。处理 ItemClick 事件以响应用户交互。

我很确定这是其中之一。但是为什么不使用 SelectionMode="Single" 并订阅选择更改事件呢？

# macos - 尝试构建项目的 java 部分时出现构建错误

> ID：13991026
> 
> 赞同：0
> 
> 时间：2012-12-21T13:25:04.937
> 
> 标签：macos, google-app-engine, ringojs

克隆 ringojs 存储库后，我在目录中运行：

```
ant jar 
```

但是，构建失败并出现大约 100 个错误，以下是其中的一些：

```
 init:

    compile:
        [javac] Compiling 55 source files to /Users/ZConsulting/repos/ringojs/build/classes
        [javac] repos/ringojs/src/org/ringojs/engine/Callback.java:19: error: package org.mozilla.javascript does not exist
        [javac] import org.mozilla.javascript.Context;
        [javac]                              ^
        [javac] repos/ringojs/src/org/ringojs/engine/Callback.java:20: error: package org.mozilla.javascript does not exist
        [javac] import org.mozilla.javascript.Function;
        [javac]                              ^
        [javac] repos/ringojs/src/org/ringojs/engine/Callback.java:21: error: package org.mozilla.javascript does not exist
        [javac] import org.mozilla.javascript.Scriptable;
        [javac]                              ^
        [javac] repos/ringojs/src/org/ringojs/engine/Callback.java:22: error: package org.mozilla.javascript does not exist
        [javac] import org.mozilla.javascript.ScriptableObject;
        [javac]                              ^
        [javac] repos/ringojs/src/org/ringojs/engine/RhinoEngine.java:19: error: package org.mozilla.javascript does not exist
        [javac] import org.mozilla.javascript.Context;
        [javac]                              ^

BUILD FAILED
repos/ringojs/build.xml:76: Compile failed; see the compiler error output for details. 
```

我的上下文是在 googleappengine 上为我的项目构建后端应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T16:19:33.490

您将需要安装 apache ant 和 ivy。Ivy 应该下载 rhino jar。

如果安装了常春藤和蚂蚁，请执行

```
ant update
ant jar 
```

这应该会有所帮助。

# joomla - 如何在 Tiny MCE Joomla 2.5 编辑器中禁用代码清理？

> ID：13991028
> 
> 赞同：1
> 
> 时间：2012-12-21T13:25:09.490
> 
> 标签：joomla, tinymce, joomla2.5

我正在使用 Joomla 2.5.8

**我需要在Tiny Mce** Joomla 编辑器中禁用代码清理功能。

我已经阅读了一些教程，说我必须进入 Extension ---> Plugin Managment ---> 单击“Editor - TinyMCE”，在这里我必须在基本配置参数中禁用此功能，如您在此图像：http: [//www.microsoft.com/netherlands/Web/media/scenarios/codesnippets/joomla-tinymce.jpg](http://www.microsoft.com/netherlands/Web/media/scenarios/codesnippets/joomla-tinymce.jpg)

问题是我的 Tiny MCE 插件配置中没有这个参数！！！

为什么？我该怎么做才能解决和禁用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:00:27.040

您很可能需要禁用 joomlas 过滤。[请参阅文档中此页面](http://docs.joomla.org/Entering_raw_HTML_in_editors)的“禁用 Joomla 的过滤”部分

# jquery - 另一个滑块中的滑块

> ID：13991030
> 
> 赞同：0
> 
> 时间：2012-12-21T13:25:21.440
> 
> 标签：jquery

我努力让我的 jQuery 滑块在我在我的[单页网站](http://openeye-design.no)上使用的这个面板切换器（基本上也是一个滑块）中运行。但是它只会在`pageload`. 在访问页面上的其他面板后，我需要它再次调用内容滑块脚本。

[对于jquery-content-panel-switcher](http://code.google.com/p/jquery-content-panel-switcher/wiki/Using_Other_Plugins_With_JCPS)背后的程序员来说，这是一个已知问题，他们推荐该`.live()`方法，但这对我也不起作用。

我猜这可以通过使用额外的脚本来解决，但我不知道是哪一个。

希望这里有人可以 - 或者至少告诉我在这个特定问题上是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:32:51.107

一个提示是不要监听`slide`事件，监听`change`事件，这是您可以让一个滑块中的更改影响第二个滑块的唯一方法。

[http://api.jquery.com/change/](http://api.jquery.com/change/)

由于 .live 将被弃用，请尝试使用 .on

[http://api.jquery.com/on/](http://api.jquery.com/on/)

例如

```
$(selector).live(events, data, handler); 
```

将被替换为

```
$(document).on(events, selector, data, handler);  

$('#your_page_id').live("pagecreate", function(){
 //your code here
}); 
```

将被替换为

```
$(document).on('pagecreate', '#your_page_id', function(){
     //your code here
}); 
```

随机示例

```
$("#my_id").on("click", function(event){
    //execute slider code
}); 
```

# c# - 有没有办法在 Windows Embedded 中使用用 c# 2010 编写的程序？

> ID：13991035
> 
> 赞同：0
> 
> 时间：2012-12-21T13:25:36.880
> 
> 标签：c#, windows-embedded

一开始我的英语不好，所以请原谅我用词不当。

我是一名程序员（新人），我用 .NET4 在 C# 2010 中编写了一个程序，该程序从网络摄像头（使用 Aforge）获取视频，从无线网络获取一些代码，然后在屏幕上显示接收到的代码和捕获的视频然后通过串行端口（RS232）将代码发送到微控制器，并通过无线将捕获的视频发送到服务器，它可以正常工作。（这是一个机器人程序）

现在的问题是：我的主人告诉我他有一台装有 Windows 的电脑（他告诉我它有 Windows Embedded），现在我的问题是什么是嵌入式 Windows 以及我如何在这个 Windows 上使用我的程序？

谢谢。

阿尔塔·阿夫坎德。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:33:48.897

根据 windows 嵌入式版本，客户应该能够安装匹配的 .Net 框架，因此如果他的操作系统允许 .Net 4，您的程序应该可以在上面运行。看看这些链接：

[http://www.microsoft.com/windowsembedded/en-us/evaluate/windows-embedded-standard-7.aspx](http://www.microsoft.com/windowsembedded/en-us/evaluate/windows-embedded-standard-7.aspx) http://msdn.microsoft.com/en-us/library/bb417255(WinEmbedded.5)。 aspx [http://www.elbacom.com/blog/2010/11/net-4-0-framework-template-available](http://www.elbacom.com/blog/2010/11/net-4-0-framework-template-available)

# salesforce - Salesforce 中的应用是什么

> ID：13991036
> 
> 赞同：2
> 
> 时间：2012-12-21T13:25:37.527
> 
> 标签：salesforce, salesforce-service-cloud

嗨，我正在创建 visualforce 页面和 apex 类触发器等一段时间。我想知道 salesforce 中的应用程序是什么以及如何在 AppExchange 上发布它？在应用程序交换上发布应用程序的任何要求我都通过了这个教程[链接](http://www.youtube.com/watch?v=lVITwMCotP8)

他们教如何在开发人员组织中创建应用程序，默认情况下有 6 个选项卡主页、聊天、文件、您的选项卡、报告、仪表板。我基本上想知道应用程序包含什么？apex 类，visualforce 页面这些组件或仅标准选项卡和一些自定义选项卡我们在开发人员组织中选择应用程序时看到的内容

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T15:49:18.357

Salesforce.com 中的 An`app`只不过是一个容器，其中包含一个名称、一个徽标和一组有序的选项卡。

[http://www.salesforce.com/us/developer/docs/fundamentals/Content/adg_simple_app_introduction.htm](http://www.salesforce.com/us/developer/docs/fundamentals/Content/adg_simple_app_introduction.htm)

所有元数据，如`Objects`, `Visualforce Pages`,`Classes`等都独立于`app`. 一个`app`只是有助于在**视觉上将**事物组合在一起。但在内部，元数据与 ie 无关，`app`您可以在多个应用程序中拥有相同`tab`的ie。`VF Page`

在 AppExchange 上发布应用程序是一个漫长的过程。请按照 AppExchange 发布指南[https://sites.secure.force.com/appexchange/resource/1237050882000/help/index_Left.htm](https://sites.secure.force.com/appexchange/resource/1237050882000/help/index_Left.htm)了解如何在 AppExchange 上发布您的应用程序的完整详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-14T15:36:15.513

在 Salesforce 中有两种类型的应用程序：

1.  标准
2.  风俗

自定义应用程序是自定义对象和标准对象（并非所有时间都必需）的集合，可通过显示在 UI 顶部的选项卡访问，其中对象就像记录的集合。记录只是字段的集合，字段基本上是最小的实体。

所以所有这些东西都属于科幻小说中的应用程序。

# php - 编程巫毒？执行注释代码

> ID：13991043
> 
> 赞同：-1
> 
> 时间：2012-12-21T13:25:59.200
> 
> 标签：php, html

```
// Get Id, Streamanbieter und StreamId
$sql = mysql_query("SELECT `Id`,`Anbieter`,`StreamId`,`Online` FROM `streams`");

// Aktualisiere streams
while($row = mysql_fetch_object($sql)) {
    $id              = $row->Id;
    $anbieter        = $row->Anbieter;  
    $streamid        = $row->StreamId;
    $ison            = $row->Online;
    $set_online      = "UPDATE streams Set Online = '1' WHERE Id = $id";
    $set_offline     = "UPDATE streams Set Online = '0' WHERE Id = $id";
    //$set_onlinesince = "UPDATE streams SET Online_since = current_timestamp WHERE Id = $id AND Online_since = '0000-00-00 00:00:00'";
    $viewers         = get_viewers($streamid, $anbieter);
    $update_viewers  = "UPDATE streams Set Viewers = $viewers WHERE Id = $id";
    $set_zero        = "UPDATE streams Set Viewers = 0 WHERE Id = $id";
    $set_datezero    = "UPDATE streams Set Online_since = '0000-00-00 00:00:00' WHERE Id = $id";
    if(get_online($streamid, $anbieter) == true) {
        if($ison == 0) {
            //mysql_query($set_onlinesince);
        }
        mysql_query($set_online);
        mysql_query($update_viewers);   
    }
    else {
        mysql_query($set_offline);
        mysql_query($set_zero);
        mysql_query($set_datezero); 
    }
} 
```

查看注释行 $set_onlinesince。我遇到了`mysql_query($set_onlinesince)`几乎一直执行的问题，所以我制作了该`IF`子句并在该子句中添加了一个附加语句`Where`。它被执行了大部分时间。在那之后，我在条款中做出了回应`IF`。当我执行文件时，它没有显示回显输出，但会执行`mysql_query($set_onlinesince)`. 然后我试图推翻这条线，它仍然被执行。当我用查询对变量进行注释时，它仍然在页面重新加载后执行。这确实吓坏了我。我多次删除浏览器中的缓存，并在其他浏览器中尝试过。没有效果。怎么会这样？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T13:29:28.877

在这种情况下，该字段可能设置为`ON UPDATE CURRENT_TIMESTAMP`，这将使用先前的查询之一自动更新它。

# c++ - 一个项目编译速度太慢（2000行左右）

> ID：13991054
> 
> 赞同：0
> 
> 时间：2012-12-21T13:26:57.327
> 
> 标签：c++, testing, build, compilation

一开始，代码很简单（不到500行），5秒内编译完成

但是**随着代码的增长**，**编译**变得越来越慢（大约需要20秒到c，并且随着代码的增长需要更多的时间

我现在拥有的文件是：

Socket、AsyncSocket、WebsocketHelper、AsyncWebsocketServer、MonitorMessage、HtmlHelper、JsonHelper（Jansson库的抽象）、StringHelper、SqlHelper、Logger、AddLocalServerWindow、LandPointWindow、ServerMonitorProxyDlg

真正的问题是，**每次我只想对项目进行一点改动时，编译都需要花费大量时间**

例如

**我只想改变一个值来测试一些东西，它需要大约 20 秒来编译**

然后我想添加 JsonHelper::buildArray() 函数，我至少需要 2*20 秒来编译：

当我实现完函数后，我会编译看看它是否可以正确编译，这是前20秒。然后将此方法集成到系统中并编译，大约需要20秒。事实是，每次我写了大约 5 行代码，我都会编译它，看看是否有语法错误（在这种情况下这是一个坏习惯吗？）

另一个问题是我总是在代码中犯语法错误（每 10-20 行），所以我需要一次又一次地重新编译代码。我刚刚写的代码编译时间很少（这部分是我真正关心的部分），大量编译时间花在稳定代码上（没有错误，我之前写过）。

如何让这种情况变得更好？任何建议表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:35:43.420

C# 编译时间很少成为问题。与 C++ 编译器相比，Microsoft C# 编译器非常快。我在一个大型 C++ 项目上工作，以下是我们为缩短构建时间所做的工作：

*   减少依赖。如果您只使用头文件中的类型的指针或引用，请转发声明类型而不是包含。
*   获得更快的机器。我们在具有 16 GB RAM 的 8 核 i7 上进行开发。这足够大，以至于整个源树都可以放入缓存中。大约 135000 行代码在 76 秒内编译，这通常更像是 10 秒，因为只有少数文件发生了变化。
*   根据应用程序，使用更快的编译器。我们有开发跨平台应用的好处，所以我在Linux上开发，使用g++，比微软Visual C++快几倍。铿锵声更快。
*   花更多时间规划您的界面。尽量不要太频繁地修改标题。适度使用时可以对此有所帮助的一件事是[PIMPL idiom](http://c2.com/cgi/wiki?PimplIdiom)。

# jquery - 按需添加 div 的最佳方式

> ID：13991057
> 
> 赞同：3
> 
> 时间：2012-12-21T13:27:03.927
> 
> 标签：jquery, html, dynamic

我想在我的页面中实现一个框，按需显示：用户按下按钮，显示 div。

作为我想要实现的视觉示例，请查看 jsfiddle 上的键盘快捷键框（左下角）：http: [//jsfiddle.net/](http://jsfiddle.net/)

现在我不确定我应该以哪种方式做到这一点：

*   立即创建 div 并将其设置为 display: none 而不需要
*   编写一个脚本，通过 JS 添加 div
*   编写一个从外部 .html 文件加载它的脚本

你会推荐什么方法？

**更新**

如果我有 15 个在页面加载时未显示但应按需添加的不同框怎么办？当然，它会起作用，但我们可以称它为“良好做法”来简单地隐藏我们不想看到的每个元素吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:37:19.980

只需将 div 添加到`HTML`并将 css 属性默认设置`display`为`none`，然后使用 jquery 在单击时将其淡入，如下所示：

```
 $('#some_button').click(function(){
     $('.hidden_box').fadeIn();
 }); 
```

# 工作示例

试试这个工作[jsfiddle](http://jsfiddle.net/NVA5D/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:39:09.483

*Update:* You recently modified the question to ask about 15 or so elements that aren't immediately needed. In this case, with so many non-immediate elements, I would probably consider creating them on the fly when you need them, but always checking for their existence prior so you don't end up re-creating them over and over.

* * *

I would just load the element in when the page loads:

```
<div id="box"></div> 
```

Style it, having it be non-visible by default:

```
​#box {
    position: fixed;
    top: 10%; left: 10%;
    width: 80%; height: 80%;
    background: red;
    display: none;
}​ 
```

And then wire-up the logic to show it on some event, perhaps pressing of the spacebar:

```
var $box = $("#box");

$(document).on({
    keydown: function (event) {
        if (event.which === 32 && $box.is(":not(:visible)"))
            $box.stop().fadeIn();
    },
    keyup: function (event) {
        if (event.which === 32) 
            $box.stop().fadeOut();
    }
}); 
```

And voila: [http://jsfiddle.net/GfMsd/](http://jsfiddle.net/GfMsd/)

Or you could base it off of the clicking of another element, like jsFiddle has done:

```
$(".toggle").on("click", function (event) {
    $("#box").stop().fadeToggle();
});​ 
```

Demo: [http://jsfiddle.net/GfMsd/1/](http://jsfiddle.net/GfMsd/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T13:38:18.257

一个没有 jQuery 的答案，只是为了确保原生 JS 没有被低估;-)

创建一个`div`包含您想要的任何内容，并将其放置在您最终想要的任何位置，然后将其隐藏：

```
<div id="hiddenDiv" style="display:none">Some content here</div> 
```

然后，在按钮上添加一个事件监听器来切换它的可见性。

```
document.getElementById('showDivButton').addEventListener('click', toggleDiv);
var div = document.getElementById('hiddenDiv');

function toggleDiv(){
    if(div.style.display == 'block') {
        div.style.display = 'none';
    }else{
        div.style.display = 'block';
    }
} 
```

# c# - unsigned char ** 在 c# 中等效，并且必须将返回值写入文件

> ID：13991060
> 
> 赞同：2
> 
> 时间：2012-12-21T13:27:10.387
> 
> 标签：c#, wrapper, intptr, unsigned-char

我必须调用一个win32 dll函数

```
int func1( int arg1, unsigned char **arg2, int *arg3); 
```

我需要用 c# 包裹起来

```
public extern int fuc1(int arg1, out IntPtr arg2, out IntPtr arg3); 
```

我从 ac# 应用程序中将其称为

```
int arg1;
IntPtr arg2 = IntPtr.Zero;
IntPtr arg3 = IntPtr.Zero;
func1(arg1,out arg2,out arg3); 
```

在 c# 包装器中声明的函数以及在 C# 测试应用程序中调用的函数是否正确？现在我需要将 arg2 存储在一个文本文件中。怎么做。

从汉斯那里得到答案，我把它写在一个文件中

```
System.IO.StreamWriter(@Application.StartupPath + "\\Filename.txt");
file.WriteLine(arg2);
file.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:48:12.417

您可能需要使用该`MarshalAs`属性，例如：

```
public static extern int func1(int arg1, [MarshalAs(UnmanagedType.LPStr)] string arg2, IntPtr arg3); 
```

在此处查看文档：

[http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshalasattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshalasattribute.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:24:02.473

> 我在 dll 中有一个空闲函数来清除内存

然后你就有机会完成这项工作。函数声明应该如下所示：

```
[DllImport("foo.dll", CallingConvention = CallingConvention.Cdecl)]
private static extern int func1(int arg1, out IntPtr arg2, ref int arg3); 
```

你会这样称呼它：

```
IntPtr ptr = IntPtr.Zero;
int dunno = 99;
string result = null;

int retval = func1(42, out ptr, ref dunno);
if (retval == success) {
    result = Marshal.PtrToStringAnsi(ptr);
    // etc...
}
if (ptr != IntPtr.Zero) func1free(ptr); 
```

其中“func1free”是释放字符串的其他未记录的函数。

# objective-c - 按字节数解析 NSData

> ID：13991062
> 
> 赞同：1
> 
> 时间：2012-12-21T13:27:20.483
> 
> 标签：objective-c, hex, nsdata

我有 NSData，我想按字节解析它。这是一个例子。 `data is <8283010c ec4f483f 0d00000c 0c0f2840 >`

我想将 8 个字节传递给我创建的每个对象`(8283010c ec4f483f for first object,0d00000c 0c0f2840 for the second)`，然后像这样解析每个字节。

```
 //  First byte > Action = 82
  //  2nd and 3rd byte > Status = 83 01
  //  4,5,6,7 byte > Time = 0c ec 4f48
  //  8 byte > Number = 3f 
```

我如何将 NSData 解析为这样的结构，我应该为我的变量（动作）使用什么类型？

```
unsigned char aBuffer[8];
[data getBytes:aBuffer length:8]; 
```

尝试以这种方式进行一些测试，但是 NSLog 打印带有奇怪符号的缓冲区，而不是字节值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:36:01.347

> NSLog 打印带有奇怪符号的缓冲区，而不是字节值。

因为这些是NSData 包含的**实际字节，而不是它们的十六进制表示。**如果您想要十六进制表示，则必须相应地格式化字节：

```
NSMutableString *hexRepr = [NSMutableString string];
for (int i = 0; i < 8; i++) {
    [hexRepr appendFormat:@"%02x", ((uint8_t *)[data bytes])[offset * 8 + i]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:23:16.547

作为@H2CO3回答的后续，

根据[NSData docs](http://developer.apple.com/library/ios/#Documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)，`[data description]`返回十六进制表示。那不是更容易吗？

更新：发现为什么`[data description]`不应该使用：[https ://stackoverflow.com/a/9084784/58505](https://stackoverflow.com/a/9084784/58505)

# backbone.js - Backbone 和 Require 如何添加 Qunit

> ID：13991065
> 
> 赞同：5
> 
> 时间：2012-12-21T13:27:40.587
> 
> 标签：backbone.js, require, qunit

我正在使用 Backbone 和 Require.js。一切都很好，但是我想在我的应用程序中添加一些单元测试。我决定使用 Qunit.js。

在我的**main.js**文件中，我创建了新对象`EventsView`：

```
require.config({
  paths: {
    jquery:                 'libs/jquery',
    underscore:             'libs/underscore',
    backbone:               'libs/backbone',
    qunit:                  'test/libs/qunit-1.10.0
    }
 });
 require(['view/eventsView', 
          'test/eventsView_test', 
          'test/eventView_test' ], function(EventsView){
           var events = new EventsView; //here I create first object my View
 }); 
```

在**eventsView.js** `initialize`我呈现主视图

```
 define(['jquery',
          'backbone',
          'underscore',
          'collection/eventC',
          'model/eventM',
          'view/eventView'], function($, Backbone,_,EventC,EventM, EventView,){

 var EventsView = Backbone.View.extend({
    el: $(".contener"),     
    initialize: function(){
        this.render();
     },
     ....//other functions
    });
     return EventsView;
 }); 
```

所以现在我需要在其他文件**eventsView_test.js**中从这个视图调用函数。我不能这样做，因为视图将再次呈现：

```
 define(['jquery','qunit','view/eventsView'], function($,qunit,EventsView){
    //var eventsView = new EventsView(); // I can't create object here 

    test( "first_test_func", function() {
        var result = eventsView.first_test_func(2,2);
        equal( result, 4, "2 square equals 4" );
    }); 
```

我该怎么办？我需要某种单身人士或其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T01:58:45.893

很棒的问题，也是我一直看到的问题。

实际上，我通过创建我称之为“引导程序”的范式解决了这个问题，但你可以随意称呼它。关键是 Backbone 视图不会渲染自己，而是由谁使用它来负责。你会遇到 fetch() 之类的问题，所以幸运的是这也解决了这个问题。

**目标：不要对渲染进行单元测试，而是一起跳过它！**

## 你的视图变成了这样：

```
require(function () {
    var view = Backbone.View.extend({
        // initialize is executed on new, just as you found
        initialize: function (options) {
            _.bindAll(this);

            // Create models, initialize properties, and bind to events here.
            // Basically only do __UNEXPENSIVE__, non-dom-changing things that
            // you don't care get executed a lot.                

            this.someCollection = new Backbone.Collection();
            this.someCollection.on('add', this.onSomeCollectionAdd);
        },

        // bootstrap is for server-side operations that you don't want executed
        // by every single test.
        bootstrap: function () {
            this.someCollection.fetch().done(this.render);
        },

        render: function () {
            this.$el.html(...);
        },

        first_test_func: function () {

        }
    });

    return view;
}); 
```

## 这将如何在您的应用程序中使用：

```
require(['viewpath'], function (myView) {
    var instance = new myView({ el: $('#something') });
    instance.bootstrap(); //triggers fetch, or if no fetch needed, just render
}); 
```

## 现在可以毫无顾虑地进行单元测试。

```
define(['jquery','qunit','view/eventsView'], function($,qunit,EventsView){

    test( "first_test_func", function() {
        // Now this line won't call the server, or render.
        // You can isolate/test what you want.
        var eventsView = new EventsView();
        var result = eventsView.first_test_func(2,2);
        equal( result, 4, "2 square equals 4" );
    });
}); 
```

## 使用 SinonJS

我强烈建议查看[SinonJS](http://sinonjs.org/)。对 JavaScript 进行单元测试，尤其是 Backbone 实现非常棒，因为它强大的模拟功能可以用来防止渲染和服务器调用（`fetch`、`save`等）实际访问服务器，同时仍然允许您断言它们被调用。

# ssas - MDX 查询结果所有元素都应该显示最后一个元组而不是总和

> ID：13991069
> 
> 赞同：1
> 
> 时间：2012-12-21T13:27:49.637
> 
> 标签：ssas, mdx, cube

我想在 mdx 查询结果的 All 元素上有一个不同的值。该值应该是指定维度属性中最后一个元组的值。例如：

```
Student     Schoolyear      Grade
Fred        All             B
Fred        2009 / 2010     A
Fred        2010 / 2011     A
Fred        2011 / 2012     B
Wilma       All             C
Wilma       2009 / 2010     B
Wilma       2010 / 2011     C 
```

因此，All 元素上的值应该是第二列中的最后一个元素，在本例中为“Schoolyear”，但可以是任何维度属性。对于“Wilma”，它将是“2010 / 2011”中的等级，对于“Fred”，它将是“2011 / 2012”中的等级。

我试图将 All 成员的度量限制为 lastChild 但这不起作用。在下面的示例中，我有一个工作查询，但它不是动态的，因为“Schoolyear”“2010 / 2011”不是动态的，而是硬编码的。

```
MEMBER [Measures].[GradeFixed] AS 
Iif( [Dimension School].[Schoolyear].Currentmember IS 
[Dimension School].[Schoolyear].[All], 
[Dimension School].[Schoolyear].[2011 / 2012]
,
[Measures].[Grade] ) 
```

有没有人想将此度量动态限制为 All 元素维度中的最后一个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:54:49.733

```
Scope ( 
    [Dimension School].[Schoolyear].[All],
    [Measures].[Grade]
);
This = Tail (
    NonEmpty (
        [Dimension School].[Schoolyear].[Schoolyear],
        [Measures].[Grade]
    ), 1
).item(0) 
```

# java - 如何设置双击编辑 SWT/JFace 中的表格单元格？

> ID：13991075
> 
> 赞同：2
> 
> 时间：2012-12-21T13:28:53.570
> 
> 标签：java, tree, swt, jface, treeviewer

是否可以更改 SWT/JFace 的默认行为以仅通过双击启用单元格编辑？现在的方式（单击）很难在不打开文本字段的情况下选择表格行。

这是一个独立的代码片段：

```
package table.editing;

import org.eclipse.jface.viewers.CellEditor;
import org.eclipse.jface.viewers.CellLabelProvider;
import org.eclipse.jface.viewers.EditingSupport;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.jface.viewers.TableViewerColumn;
import org.eclipse.jface.viewers.TextCellEditor;
import org.eclipse.jface.viewers.ViewerCell;
import org.eclipse.jface.window.ApplicationWindow;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;

public class TableEditor extends ApplicationWindow {

    class Element {
        private String value;

        public Element(String value) {
            this.value = value;
        }

        public String getValue() {
            return value;
        }

        public void setValue(String value) {
            this.value = value;
        }
    }

    public TableEditor() {
        super(null);

        setBlockOnOpen(true);
        open();

        Display.getCurrent().dispose();
    }

    protected Control createContents(Composite parent) {
        Composite composite = new Composite(parent, SWT.NONE);
        composite.setLayout(new FillLayout());

        TableViewer viewer = new TableViewer(composite, SWT.MULTI
                | SWT.H_SCROLL | SWT.V_SCROLL | SWT.FULL_SELECTION | SWT.BORDER);

        createColumns(composite, viewer);
        addElements(viewer);

        final Table table = viewer.getTable();
        table.setHeaderVisible(true);
        table.setLinesVisible(true);

        return composite;
    }

    private void addElements(TableViewer viewer) {
        for (int i = 0; i < 10; i++) {
            viewer.add(new Element("Element " + i));
        }
    }

    private void createColumns(Composite parent, final TableViewer viewer) {
        TableViewerColumn columnViewer = new TableViewerColumn(viewer, SWT.NONE);
        columnViewer.setLabelProvider(new CellLabelProvider() {

            @Override
            public void update(ViewerCell cell) {
                Element element = (Element) cell.getElement();
                cell.setText(element.getValue());
            }
        });
        columnViewer.setEditingSupport(new EditingSupport(viewer) {

            @Override
            protected void setValue(Object element, Object value) {
                ((Element) element).setValue((String) value);
            }

            @Override
            protected Object getValue(Object element) {
                return ((Element) element).getValue();
            }

            @Override
            protected CellEditor getCellEditor(Object element) {
                return new TextCellEditor(viewer.getTable());
            }

            @Override
            protected boolean canEdit(Object element) {
                return true;
            }
        });
        TableColumn column = columnViewer.getColumn();
        column.setText("Example");
        column.pack();
    }

    public static void main(String[] args) {
        new TableEditor();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T13:38:53.390

您需要`TableViewerEditor`在`TableViewer`. 看看下面的代码：

```
TableViewer viewer = ...

TableViewerFocusCellManager focusCellManager = new TableViewerFocusCellManager(viewer, new FocusCellOwnerDrawHighlighter(viewer));

ColumnViewerEditorActivationStrategy activationSupport = new ColumnViewerEditorActivationStrategy(viewer) {
    protected boolean isEditorActivationEvent(ColumnViewerEditorActivationEvent event) {
        // Enable editor only with mouse double click
        if (event.eventType == ColumnViewerEditorActivationEvent.MOUSE_DOUBLE_CLICK_SELECTION) {
            EventObject source = event.sourceEvent;
            if (source instanceof MouseEvent && ((MouseEvent)source).button == 3)
                return false;

            return true;
        }

        return false;
    }
};

TableViewerEditor.create(viewer, focusCellManager, activationSupport, ColumnViewerEditor.TABBING_HORIZONTAL | 
    ColumnViewerEditor.TABBING_MOVE_TO_ROW_NEIGHBOR | 
    ColumnViewerEditor.TABBING_VERTICAL |
    ColumnViewerEditor.KEYBOARD_ACTIVATION); 
```

# unit-testing - 我应该在哪里放置 Java 库的测试支持代码

> ID：13991083
> 
> 赞同：6
> 
> 时间：2012-12-21T13:29:31.663
> 
> 标签：unit-testing, maven, module

我有一个 Maven 项目，它在其他项目中用作库。设置非常标准：`src/main`带有库代码，`src/test`带有`src/main`.

假设我有一个`foo`依赖于这个库的项目。`foo`也有测试用例。为了帮助`foo`为使用我的库的代码编写测试，我想提供`foo`一个支持框架来编写测试（例如设置模拟环境）。

我可以把这个支持代码放在哪里？

*   它不应该进入`src/main`，因为它不打算投入生产。
*   它无法进入`src/test`，因为创建从`foo`的测试到库的测试的依赖项会在类路径中添加太多垃圾（例如`logback-test.xml`配置文件，从未执行的测试，...）。

我可以将代码放入一个新模块中，但它与 中的代码紧密耦合`src/main`，因此我想将其保留在同一个项目中（还允许测试支持代码访问包私有字段和方法）。

此外，其中的代码`src/test`应该可以访问它，以便我可以使用它来编写我自己的单元测试。

`src/main`Maven 有什么选择可以将其保留在同一个项目中，但仍将其与 和完全分开`src/test`？我可以以某种方式创建第三个输出 JAR`src/test-support`吗？还是应该将代码放入`src/test`JAR 插件中然后使用过滤器以仅包含支持代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:37:57.650

您可以使用 Maven Jar 插件执行此操作

[Maven Jar 插件](http://maven.apache.org/plugins/maven-jar-plugin/usage.html)

由于您使用的是 Maven，因此您可以剪切包含要在 foo 中使用的库的项目的单独工件，添加以下插件以创建另一个 jar 工件：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.3.2</version>
    <executions>
       <execution>
          <goals>
              <goal>test-jar</goal>
          </goals>
       </execution>
    </executions>
  </plugin> 
```

这将在该项目中创建 src/test 目录中所有内容的第二个 jar。

[测试罐](http://maven.apache.org/plugins/maven-jar-plugin/test-jar-mojo.html)

你可以用一些过滤器拼接出你不需要的那个罐子里的东西。

然后要使用这个库，你可以把它作为依赖包含在 foo 中：

```
 <dependency>
    <groupId>your.group</groupId>
    <artifactId>parent-artifact-id</artifactId>
    <version>1.0.0</version>
    <type>test-jar</type>
    <scope>test</scope>
 </dependency> 
```

要进一步分离项目，您还可以使用更多框架化的测试 jar 创建一个仅测试项目。
请参阅如何在 Maven Jar Plugin 文档中创建包含测试类的 jar（首选方式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T15:58:34.930

这是一个 POM 片段，它将主 JAR 拆分为普通工件和“JUnit 支持 JAR”：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-jar-plugin</artifactId>
            <executions>
                <execution>
                    <id>default-jar</id>
                    <phase>package</phase>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                    <configuration>
                        <archive>
                            <index>true</index>
                            <manifest>
                                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                            </manifest>
                        </archive>
                        <excludes>
                            <exclude>**/junit/**</exclude>
                        </excludes>
                    </configuration>
                </execution>

                <execution>
                    <id>junit-jar</id>
                    <phase>package</phase>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                    <configuration>
                        <classifier>junit</classifier>
                        <archive>
                            <index>true</index>
                            <manifest>
                                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                            </manifest>
                        </archive>
                        <includes>
                            <include>**/junit/**</include>
                        </includes>
                    </configuration>
                </execution>

                <execution>
                    <id>test-jar</id>
                    <goals>
                        <goal>test-jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

    </plugins>
</build> 
```

简而言之，它会查找`junit`名称中包含的任何包并将其放入 JUnit JAR 中，将其排除在正常工件之外。

如果普通罐子的坐标是

```
<groupId>com.group</groupId>
<artifactId>foo</artifactId> 
```

那么您只需添加以下内容即可获得 JUnit 支持代码`<classifier>junit</classifier>`：

```
<groupId>com.group</groupId>
<artifactId>foo</artifactId>
<classifier>junit</classifier> 
```

因此，要使用它，所依赖的 POM`com.group:foo`将如下所示：

```
<dependency>
    <groupId>com.group</groupId>
    <artifactId>foo</artifactId>
    <version>...</version>
</dependency>
<dependency>
    <groupId>com.group</groupId>
    <artifactId>foo</artifactId>
    <version>...</version>
    <classifier>junit</classifier>
    <scope>test</scope>
</dependency> 
```

有时，您将需要 JUnit 来编译您的“JUnit support JAR”。如果是这种情况，请使用

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <scope>compile</scope>
    <optional>true</optional>
</dependency> 
```

将 JUnit 包含到构建中。这将使依赖项在编译时可用，但不会泄漏给其他任何人。

# objective-c - 合并视频帧需要很多时间

> ID：13991084
> 
> 赞同：1
> 
> 时间：2012-12-21T13:29:32.647
> 
> 标签：objective-c, video, ios6, ios5

我有两个视频帧数组，每个数组等于 150-200 帧。我正在合并它们以获得合并帧的数组。我正在使用以下代码。

```
NSString *filePath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"/Documents/movie.mp4"]];
NSURL *outputURL = [NSURL fileURLWithPath:filePath];
player = [[MPMoviePlayerController alloc]initWithContentURL:outputURL];

float frame = 0.00;
int count = 1;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
docPath = [docPath stringByAppendingPathComponent:@"OutPut"];
BOOL success = [fileManager fileExistsAtPath:docPath];
if (success) {
    [fileManager removeItemAtPath:docPath error:nil];
}
[fileManager createDirectoryAtPath:docPath withIntermediateDirectories:YES attributes:nil error:nil];
for (frame = frameStartTime; frame < (frameStartTime+7); frame+=0.033)
    {
    @autoreleasepool
        {
    UIImage * singleFrameImage = [player thumbnailImageAtTime:frame timeOption:MPMovieTimeOptionExact];
    [player pause];
    NSString *imageName = [NSString stringWithFormat:@"export2%d.png",count];
    UIImage *overlayImage = [UIImage imageNamed:imageName];
    count = count + 1;
    NSString *imagePath = [NSString stringWithFormat:@"outImage%f.png",frame];
   imagePath = [NSString stringWithFormat:@"%@/%@", docPath, imageName];
    if (overlayImage)
    {
        UIImage *  outImage = [self mergeImage:singleFrameImage withImage:overlayImage];
        NSData *imgData = UIImagePNGRepresentation(outImage);
       [fileManager createFileAtPath:imagePath contents:imgData attributes:nil];

    }
    else
    {
        NSData *imgData = UIImagePNGRepresentation(singleFrameImage);
         [fileManager createFileAtPath:imagePath contents:imgData attributes:nil];

    }

    [outputFramesArray addObject:imagePath];
}

}

[player release];
if([fileManager fileExistsAtPath:filePath])
{

    [fileManager removeItemAtPath:filePath error:nil];

}

NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"/Documents/movie1.mp4"]];
NSLog(@"filePath %@", path);

if ([[NSFileManager defaultManager] fileExistsAtPath:path]) {
    [[NSFileManager defaultManager] removeItemAtPath:path error:nil];
}

[self writeImageAsMovie:outputFramesArray toPath:path size:CGSizeMake(480, 320) duration:10];
NSLog(@"hello Your layering is completed");

[outputFramesArray removeAllObjects];
[outputFramesArray release];
success = [fileManager fileExistsAtPath:docPath];

if (success) {
    [fileManager removeItemAtPath:docPath error:nil];
}

/// [self performSelectorOnMainThread:@selector(CompileFilesToMakeMovieWithAudio) withObject:nil waitUntilDone:YES];
[self CompileFilesToMakeMovieWithAudio];
  // [self compileFinalOutputMovie];
}

- (UIImage*)mergeImage:(UIImage*)first withImage:(UIImage*)second {
    CGSize mergedSize = CGSizeMake(480,320);   
    UIGraphicsBeginImageContext(mergedSize);
    [first drawInRect:CGRectMake(0, 0, 480, 320)];
    [second drawInRect:CGRectMake(0, 0, 480, 320)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

我的问题是合并所有帧需要很长时间。

有没有办法让任务更快？

谢谢

# jquery - Django - 模板标签中不可用的上下文包括

> ID：13991085
> 
> 赞同：0
> 
> 时间：2012-12-21T13:29:35.847
> 
> 标签：jquery, python, django-forms, django-templates, django-context

```
<form class="signup" id="signup_form" method="post" action="{% url 'account_signup' %}">
   {{ form.subscription_year_plan }}
   <div class="page1"> {% include "account/signup_1.html" %} </div>
   <div class="page2"> {% include "account/signup_2.html" %} </div>
</form> 
```

这是我的html的一部分。`{{ form.subscription_year_plan }}`外面和里面都可以，里面`signup_1.html`不行`signup_2.html`。

会有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:28:32.933

知道了。我试图`{{ form.subscription_year_plan }}`在 signup_2.html 中的 div 中使用，该 div 正在由文档准备好的 ajax 填充。

# javascript - 哪个 html 容器允许当您隐藏垂直项目时后续项目上升？

> ID：13991088
> 
> 赞同：0
> 
> 时间：2012-12-21T13:29:42.850
> 
> 标签：javascript, jquery, asp.net, html, css

我的应用程序有一个**垂直**菜单。每个菜单都是一个链接按钮。这些链接按钮放置在一个 html**表格单元格中** `<td>`，我创建它们并将它们放置**在后面的 ASP.NET 代码中。**

为了创建一个菜单，`menuCell.Controls.Add(newMenu);` 当我单击具有 sumenus 的链接时，这显示在主链接按钮下方：

![在此处输入图像描述](../Images/f3d12fc08a23bba958d28db2b50e739b.png)

当我再次单击它时，子菜单必须隐藏，但它们所占据的位置一直留在那里。我用 jquery 来做：

```
function toggleSubMenu(smenu) {
        $('.'+smenu').toggle();
    } 
```

看一下 Menu2 和 Menu 3 之间的空白区域。

![在此处输入图像描述](../Images/88b65d57cec7fcb1e54e029fc8f8a958.png)

所以主要目标是删除这个空间。是否有任何自动生成的 Asp.NET 占位符或容器？或者我是否必须使用 jQuery 手动上去 Menu3 和它下面的所有内容？

完整的 html 代码：**MenuCell**保留菜单。同样，每个菜单都是在 ASP.NET 代码后面创建和放置的。

```
<body MS_POSITIONING="Gridlayout">
    <!-- Logo -->
    <form id="Menu" method="post" runat="server">
        <table id="mainTable" style="Z-INDEX: 101; LEFT: 0px; POSITION: absolute; TOP: 0px" tabIndex="-1" height="800" cellSpacing="0" cellPadding="0" border="0" runat="server" width="125px">
            <tr align="left">
                <td style="WIDTH: 125px" tabIndex="-1" vAlign="bottom" align="middle" colSpan="2" height="55"><IMG id="imgLogo" tabIndex="-1" height="50" width="50" align="middle" border="0" runat="server">&nbsp;
                </td>
            </tr>
            <TR>
                <TD style="WIDTH: 125px" vAlign="top" align="middle"></TD>
                <TD vAlign="top" align="left" colSpan="1" rowSpan="2"><IMG id="imgLine" style="WIDTH: 1px" height="720" hspace="0" width="1" vspace="0" border="0" runat="server"></TD>
            </TR>
            <tr align="left">
                <td id="menuCell" style="WIDTH: 125px" tabIndex="-1" vAlign="top" align="left" height="740" runat="server"></td>
            </tr>
        </table>
    </form>
</body> 
```

由于隐私政策，我无法放置整个呈现的代码，但每个菜单和子菜单链接都呈现`<a>`为`<td>`命名`menuCell`：

渲染的代码是：

```
 <td id="menuCell" style="WIDTH: 125px" tabIndex="-1" valign="top" align="left" height="740">
    <a id="Menu1" style="width:124px;LEFT:1px;TOP:8px;POSITION:relative;">Menu1</a>
   <br />
   <a id="Menu6" style="width:124px;LEFT:1px;TOP:11px;POSITION:relative;">Menu6</a>
   <br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:16:58.660

ASP.NET 将在服务器端处理代码。页面加载后，DOM 只能使用 Javascript 或 jQuery 等 Javascript 库进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T22:12:54.473

我将每个子菜单放在一个 Asp.net 面板中：

```
Panel psubmenu = new Panel();
HyperLink hylSMenu = new HyperLink();
psubmenu.Controls.Add(hylSMenu); 
```

然后将面板放入整个容器中：

```
menuCell.Controls.Add(psubmenu); 
```

像这样我切换`panel`而不是每个子菜单。

# php - 如何在会话中存储复选框状态？

> ID：13991092
> 
> 赞同：-1
> 
> 时间：2012-12-21T13:29:53.490
> 
> 标签：php, session, checkbox

这是我的代码

```
<table class='block'>
  <tr>
    <td>
      <input class='c1' type='checkbox' lid='checkbox1'>
        <label>checkbox1</label>
      </td>
    <td>
      <input class='c2' type='checkbox' lid='checkbox2'>
        <label>checkbox2</label>
      </td>
    <td>
      <input class='c2' type='checkbox' lid='checkbox3'>
        <label>checkbox3</label>
      </td>
    <td>
      <input class='c2' type='checkbox' lid='checkbox4'>
        <label>checkbox4</label>
      </td>
    <td>
      <input class='c3' type='checkbox' lid='checkbox5'>
        <label>checkbox5</label>
      </td>
    <td>
      <input class='c3' type='checkbox' lid='checkbox6'>
        <label>checkbox6</label>
      </td>
  </tr>
</table>
<script type='text/javascript'>
  $('input[type=checkbox]').each(function (){
  if (this.checked) {
  var x = $(this).attr('lid');
  }
  });
</script>
<?php
    if(!isset($_SESSION))
        {
            session_start();
        }
    if(!isset($_GET['x'])) $_GET['x'] = '';
    $_SESSION['x'] = $_GET['x'];
 ?> 
```

我想在会话中保存选定的复选框。这样，当我回到页面时，应该保持选中相同的复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:35:31.360

在我看来，与其将它们保存到会话中，不如将它们保存在数据库中。当您返回同一页面时，从数据库中检索值。我相信，这将是更容易和最好的方法。

**解决您的问题**

首先，您需要确定您的数据/复选框值是否保存到会话变量中。因为，在浏览了你的代码片段之后，我真的怀疑你的复选框值是否会保存在会话变量中。

**问题 1：您没有使用 GET 方法将值存储到 Session 变量中**

```
<?php
    if(!isset($_SESSION))
        {
            session_start();
        }
    if(!isset($_GET['x'])) $_GET['x'] = '';
    $_SESSION['x'] = $_GET['x'];  //  storing data using GET method
 ?> 
```

这是您的代码，您尝试使用**GET**方法将数据存储在会话变量中。但是，我没有找到任何`form`您传递所选值的方法。

**问题 2：您没有检索 Session 变量**

```
<script type='text/javascript'>
  $('input[type=checkbox]').each(function (){
  if (this.checked) {
  var x = $(this).attr('lid');
  }
  });
</script> 
```

在您的`javascript`代码中，您没有提到任何会话变量，通过它，您可以匹配先前检查的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:58:36.273

好的，这是您尝试使用会话完成的工作示例。

```
<?php 
session_start();
if(isset($_GET['checkbox']))
{
    $_SESSION[$_GET['checkbox'][0]] = isset($_SESSION[$_GET['checkbox'][0]]) ? +!($_SESSION[$_GET['checkbox'][0]]) : TRUE;
    print_r($_SESSION[$_GET['checkbox'][0]]);
    die;
}
?>
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    </head>
    <body>
        <table class='block'>
             <tr>
                 <td>
                     <input class='c1' type='checkbox' lid='checkbox1' <?php echo (isset($_SESSION['checkbox1'])) ? 'CHECKED="CHECKED"' : ''; ?>><label>checkbox1</label>
                 </td>
                 <td>
                     <input class='c2' type='checkbox' lid='checkbox2' <?php echo (isset($_SESSION['checkbox2'])) ? 'CHECKED="CHECKED"' : ''; ?>><label>checkbox2</label>
                 </td>
                 <td>
                     <input class='c2' type='checkbox' lid='checkbox3' <?php echo (isset($_SESSION['checkbox3'])) ? 'CHECKED="CHECKED"' : ''; ?>><label>checkbox3</label>
                 </td>
                 <td>
                     <input class='c2' type='checkbox' lid='checkbox4' <?php echo (isset($_SESSION['checkbox4'])) ? 'CHECKED="CHECKED"' : ''; ?>><label>checkbox4</label>
                 </td>
                 <td>
                     <input class='c3' type='checkbox' lid='checkbox5' <?php echo (isset($_SESSION['checkbox5'])) ? 'CHECKED="CHECKED"' : ''; ?>><label>checkbox5</label>
                 </td>
                 <td>
                     <input class='c3' type='checkbox' lid='checkbox6' <?php echo (isset($_SESSION['checkbox6'])) ? 'CHECKED="CHECKED"' : ''; ?>><label>checkbox6</label>
                 </td>
             </tr>
         </table> 
    </body>
</html>

<script>
    $(document).ready(function() {
       $('input[type=checkbox]').on('change', function() {
           $.get("sefesf.php", { 'checkbox[]':$(this).attr('lid') });
       }) 
    });
</script> 
```

**瘦的**

基本上，每次您选中一个框时，都会向自身发出一个 GET 请求并执行 +! 在会议上。这意味着相反。所以它会自动检查和取消选中会话变量。该请求使用 AJAX 异步完成并存储数据。CHECK 功能是在服务器端使用 PHP 在页面加载时使用 DOM 中的简单三元运算符完成的。

**去做**

确保在 _GET 上添加一些验证，您不想存储错误数据。

此外，这是一种非常肮脏的方式来做这种事情，但仍然是一种方式。

祝你好运，如果您有任何问题，请告诉我！

# windows-8 - 平铺小图像尺寸指南？

> ID：13991097
> 
> 赞同：0
> 
> 时间：2012-12-21T13:30:16.583
> 
> 标签：windows-8, windows-store-apps

阅读了一些图像指南后，我仍然不确定瓷砖上的小图像所需的尺寸，例如 TileWideSmallImageAndText01

参考：

[平铺和 toast 图像大小](http://msdn.microsoft.com/en-us/library/windows/apps/hh781198.aspx)， [像素密度缩放指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)， [平铺模板目录](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:42:20.897

唯一的要求是：-

> 平铺图像的尺寸必须小于或等于 1024x1024 像素，文件大小必须小于或等于 200 KB，并且类型必须为 .png、.jpg、.jpeg 或 .gif。只要满足其他要求，图像就没有位深或颜色要求。

系统将为您正确处理缩放。200kb 是最难的，因为您几乎肯定必须调整图像大小。如果您不正确，则该图块将不会显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:14:11.513

使用 VS2012 中提供的 Package Designer 陷入成功的陷阱。双击解决方案资源管理器窗口中的 Package.appxmanifest 项以打开设计器。它准确地显示了您需要的图像尺寸。请注意，您应该提供多种尺寸，这些尺寸适用于用户机器上的不同 DPI 设置。您只需要为 100 比例提供一个，但随后您的图像将被重新缩放，并且可能会显示一些像素化伪影。

记录您在设计器中看到的内容，按比例（80、100、140、180）排序：

*   标志：120x120、150x150、210x210、270x270
*   宽徽标：248x120、310x150、434x210、558x270
*   小标志：24x24、30x30、42x42、54x64
*   商店标志：缺失，50x50、70x70、90x90

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-27T16:54:38.947

瓷砖尺寸如下：
宽瓷砖：310x150
小正方形：150x150
大正方形：310x310

[选择_between_different_tile_sizes](http://msdn.microsoft.com/en-US/library/windows/apps/hh465403.aspx#choosing_between_different_tile_sizes)

# symfony - Symfony2：如何测试配置节点值和索引

> ID：13991098
> 
> 赞同：8
> 
> 时间：2012-12-21T13:30:34.443
> 
> 标签：symfony, phpunit, symfony-2.1

在 Symfony2 中，使用此类设置，我如何测试每个节点是否在`Configuration`类中定义，以及它们的值是否正确配置。

**要测试的类**

```
# My\Bundle\DependencyInjection\Configuration.php

类 Configuration 实现 ConfigurationInterface
{
    /**
     * {@inheritDoc}
     */
    公共函数 getConfigTreeBuilder()
    {
        $treeBuilder = 新 TreeBuilder();
        $treeBuilder->root('my_bundle')
            ->儿童（）
                ->scalarNode("scalar")->defaultValue("defaultValue")->end()
                ->arrayNode("arrayNode")
                    ->儿童（）
                        ->scalarNode("val1")->defaultValue("defaultValue1")->end()
                        ->scalarNode("val2")->defaultValue("defaultValue2")->end()
                    ->结束（）
                ->结束（）
            ->结束（）
        ;

        返回$treeBuilder；
    }
}

```

以下是我想做的断言，在我的单元测试中：

我试图以数组的形式访问节点，但它似乎不起作用。此外`TreeBuilder`，除非它们由捆绑扩展加载，否则似乎不给我们以数组形式获取配置的可能性。

**测试**

```
# My\Bundle\Tests\DependencyInjection\ConfigurationTest.php

$configuration = $this->getConfiguration();
$treeBuilder = $configuration->getConfigTreeBuilder();

$this->assertInstanceOf("Symfony\Component\Config\Definition\Builder\TreeBuilder", $treeBuilder);

// 如何访问树生成器的节点？
$rootNode = $treeBuilder["my_bundle"];
$scalarNode = $treeBuilder["scalar"];
$arrayNode = $treeBuilder["arrayNode"];
$val1Node = $arrayNode["val1"];
$val2Node = $arrayNode["val2"];

$this->assertInstanceOf("Symfony\...\ArrayNodeDefinition", $rootNode);
$this->assertEquals("defaultValue", $scalarNode, "测试节点的默认值");
$this->assertEquals("defaultValue", $val1Node, "测试节点的默认值");
$this->assertEquals("defaultValue", $val2Node, "测试节点的默认值");

```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T15:36:53.563

我找到了一个可以基于[JMSSecurityBundle](https://github.com/schmittjoh/JMSSecurityExtraBundle/blob/master/Tests/DependencyInjection/JMSSecurityExtraExtensionTest.php)工作的解决方案。

我没有测试配置，而是测试了将顺便增加配置覆盖率的扩展。这样，我可以断言设置了默认配置。

例如，这`Extension`.

```
#My\Bundle\DependencyInjection\MyBundleExtension
class MyBundleExtension extends Extension
{
    /**
     * {@inheritDoc}
     */
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config        = $this->processConfiguration($configuration, $configs);

        $container->setParameter("crak_landing_frontend.scalar", $config["scalar"]);
        $container->setParameter("crak_landing_frontend.array_node", $config["array_node"]);

        $loader = new Loader\XmlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.xml');
    }
} 
```

可能是这样的测试：

```
#My\Bundle\Tests\DependencyInjection\MyBundleExtensionTest
class MyBundleExtensionTest extends \PHPUnit_Framework_TestCase
{
    /**
     * @var MyBundleExtension
     */
    private $extension;

    /**
     * Root name of the configuration
     *
     * @var string
     */
    private $root;

    public function setUp()
    {
        parent::setUp();

        $this->extension = $this->getExtension();
        $this->root      = "my_bundle";
    }

    public function testGetConfigWithDefaultValues()
    {
        $this->extension->load(array(), $container = $this->getContainer());

        $this->assertTrue($container->hasParameter($this->root . ".scalar"));
        $this->assertEquals("defaultValue", $container->getParameter($this->root . ".scalar"));

        $expected = array(
            "val1" => "defaultValue1",
            "val2" => "defaultValue2",
        );
        $this->assertTrue($container->hasParameter($this->root . ".array_node"));
        $this->assertEquals($expected, $container->getParameter($this->root . ".array_node"));
    }

    public function testGetConfigWithOverrideValues()
    {
        $configs = array(
            "scalar"     => "scalarValue",
            "array_node" => array(
                "val1" => "array_value_1",
                "val2" => "array_value_2",
            ),
        );

        $this->extension->load(array($configs), $container = $this->getContainer());

        $this->assertTrue($container->hasParameter($this->root . ".scalar"));
        $this->assertEquals("scalarValue", $container->getParameter($this->root . ".scalar"));

        $expected = array(
            "val1" => "array_value_1",
            "val2" => "array_value_2",
        );
        $this->assertTrue($container->hasParameter($this->root . ".array_node"));
        $this->assertEquals($expected, $container->getParameter($this->root . ".array_node"));
    }

    /**
     * @return MyBundleExtension
     */
    protected function getExtension()
    {
        return new MyBundleExtension();
    }

    /**
     * @return ContainerBuilder
     */
    private function getContainer()
    {
        $container = new ContainerBuilder();

        return $container;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-22T15:56:44.333

**要单独**测试您的配置，您可以这样做：

```
use Foo\YourBundle\DependencyInjection\Configuration;
use PHPUnit\Framework\TestCase;

class ConfigurationTest extends TestCase
{
    /**
     * @dataProvider dataTestConfiguration
     *
     * @param mixed $inputConfig
     * @param mixed $expectedConfig
     */
    public function testConfiguration($inputConfig, $expectedConfig)
    {
        $configuration = new Configuration();

        $node = $configuration->getConfigTreeBuilder()
            ->buildTree();
        $normalizedConfig = $node->normalize($inputConfig);
        $finalizedConfig = $node->finalize($normalizedConfig);

        $this->assertEquals($expectedConfig, $finalizedConfig);
    }

    public function dataTestConfiguration()
    {
        return [
            'test configuration'   => [
                ['input'],
                ['expected_config']
            ],
            // ...
        ];
    }
} 
```

# c# - 控制和输出音符

> ID：13991099
> 
> 赞同：0
> 
> 时间：2012-12-21T13:30:57.287
> 
> 标签：c#, visual-studio-2010, controls

我正在编写一个程序，以便单击按钮并根据您将鼠标按住的时间打印链接的注释。我的问题是第一次点击工作正常，但是当我第二次坚持时它没有更新，这让我发疯。任何帮助都感激不尽。下面找到我正在使用的以下代码。谢谢

对于 Form1：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace NoteShape
{
    public partial class Form1 : Form
    {
        public int duration = 0;
        MusicNote mn;

        public Form1()
        {
            InitializeComponent();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            duration++;
        }

        private void button1_MouseDown(object sender, MouseEventArgs e)
        {
            if (e.Button == MouseButtons.Left)
            {
                timer1.Enabled = true;
                duration = 0;
            }
        }

        private void button1_MouseUp(object sender, MouseEventArgs e)
        {
            if (e.Button == MouseButtons.Left)
            {
                timer1.Enabled = false;
            }
            duration = duration % 20;

            string bNoteShape = "";

            if (duration >= 12)
            {
                bNoteShape = "SemiBreve";
            }

            if ((duration >= 6) && (duration <= 11))
            {
                bNoteShape = "Minim";
            }

            if ((duration >= 3) && (duration <= 5))
            {
                bNoteShape = "Crotchet";
            }

            if ((duration >= 1) && (duration <= 2))
            {
                bNoteShape = "Quaver";
            }

            if (duration == 0)
            {
                bNoteShape = "SemiQuaver";
            }

            mn = new MusicNote(1, bNoteShape);
            MessageBox.Show(bNoteShape);
            this.Controls.Add(this.mn);

        }
    }
} 
```

对于相应的类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing;

namespace NoteShape
{
    class MusicNote: PictureBox
    {
        public string path = "ImagesName\\";
        public int pitch;
        public string noteShape;

        public MusicNote(int iPitch, string iNoteShape) : base()
        {
            pitch = iPitch;
            noteShape = iNoteShape;

            Location = new Point(150, 50);
            Size = new Size(40, 40);
            Bitmap bmp1 = new Bitmap(path + noteShape + ".bmp");
            Image = bmp1;
            BackColor = Color.Transparent;
        }

        protected override void OnPaint(PaintEventArgs pe)
        {
            base.OnPaint(pe);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:35:29.753

您正在创建一个新笔记，但每次都将其放置在相同的位置。

您应该编辑现有/单击的注释或放置新注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:50:18.083

我刚刚在 Visual Studio 2010 中“按原样”尝试了您的代码，没有任何问题。我唯一改变的是我评论了位图，因为我没有它们，但我选择了背景颜色黑色来查看它。

```
 //Bitmap bmp1 = new Bitmap(path + noteShape + ".bmp");
 //Image = bmp1;
 BackColor = Color.Black; 
```

另外，我将 timer1 设置为 500 毫秒的间隔，因为我不知道你的间隔是多少。

我可以一遍又一遍地做，然后弹出消息框，里面有正确的东西！您可以再试一次，或者更新您的代码，因为现在完全没有问题。

编辑

您需要将其添加到您的 button1_MouseUp

```
this.Controls.Add(mn);
mn.BringToFront(); 
```

画框画在前一个画框的后面。

# java - 您将密钥存储在 Java Web 应用程序中的什么位置？

> ID：13991100
> 
> 赞同：19
> 
> 时间：2012-12-21T13:30:58.310
> 
> 标签：java, web-applications, encryption

密码学是一种广泛采用的技术来确保机密性。不考虑实现缺陷，它有一个关键点：*密钥存储*。如果密钥被盗，整个系统将受到威胁。

**编辑 ：**

让我指定上下文以使问题不那么广泛：

1.  这里解决了一个 java web 应用程序
2.  更具体地说，它使用的是 spring 框架版本 3
3.  spring security 3.1 用于保护应用程序
4.  mysql5 数据库可用
5.  应用服务器是tomcat6或tomcat7
6.  服务器机器**不在**我的控制之下

也许问题可以集中在这种情况下，但正如所指出的，密钥存储的问题与所采用的技术是横向的。然而，一些库可能会提供可以以某种方式促进工作的特殊功能。一个明确的观点是，必须在安全性和做实际事情的需要之间找到一个权衡。为了完成分析，很明显，所需的安全级别取决于要保护的信息的价值。翻转我们的想法来执行超级安全的策略（需要付出很多努力）来保密客户的鞋码是没有意义的。

在这里，我必须保护电子邮件密码（将存储在数据库中）。我认为这些信息平均很关键。

我在这里寻找的是合理努力的最佳解决方案。

所以问题很明确：**你会将这些信息存储在哪里？**

1.  你将它存储在数据库中吗？所以它应该被加密，这需要另一个密钥（你在哪里存储第二个密钥？）
2.  你把它放在`.war`包里吗？您如何防止未经授权的访问源？
3.  你采取不同的策略吗？

您的策略的动机将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T13:42:55.280

**即使这与Java** Web 应用程序没有任何关系，我也冒昧地写一个答案：我认为问题存在于所有平台的微小差异中。

基本上有 3 个候选密钥存储，您提到的前 2 个：

*   数据库
*   应用程序（“硬编码”）
*   服务器上运行 WebApp 的其他地方，通常是一个文件

您已经指出了前两个的弱点，所以无需重复，我完全同意。

这也是我使用第三个候选人的动机。理由是这样的：

*   同一个应用程序的不同实例可以很容易地拥有不同的密钥，因此一个妥协不会自动传播到所有其他人
*   如果服务器以某种方式受到损害，允许攻击者读取任何文件，那么无论如何游戏都结束了：您将无法阻止他读取应用程序二进制文件或数据库
*   Web 服务器上的文件系统安全性是一个很好理解的主题
*   允许完整文件系统访问的入侵在统计上比应用程序或数据库入侵少得多

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T13:33:12.687

无论您总是需要将密钥存储在某处。即使您决定（这很愚蠢）手动提供密钥，密钥也会驻留在内存中，并且有人可以找到它。

您将其存储在哪里取决于您的选择。但是，它不应该是纯文本。因此，如果您将密钥存储在数据库中，则在应用程序中使用硬编码的辅助密钥。因此，如果入侵者只能访问 db，那么加密的主密钥就会受到保护。

我会去应用程序配置将辅助密钥存储在容器中。这样，只有您的应用程序才能访问此属性。因此，攻击者必须控制您的应用程序或容器才能访问该密钥。

所以假设以下场景：

1.  您的应用程序被黑：攻击者拥有与您相同的权限。可以尝试使用您的 API 来获取敏感信息，而无需使用加密。你的代码会为他们做这件事。下一个选项：她可以尝试获取您的 war 文件或类文件并对其进行反编译以找出硬编码的密钥，或者了解您使用的加密机制。
2.  只有数据库被黑客入侵：使用不在数据库本身的密钥加密数据应该没问题。

使攻击者更难。您可以将文件放在文件系统中。如其他答案中所述，为其添加适当的 FS 权限。但另外使用 java 安全管理器来限制对所有 java 类的访问，除了真正需要读取它的类。限制对 jar 和类文件的修改也是一个好主意。

您拥有的锁越多，您就越安全。与标准门锁一样。锁应该来自不同的供应商并具有不同的机制。但最终，熟练的窃贼无论如何都会进入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:58:29.890

文件系统没问题，选择用户权限并在战争中使用授予权限。存在许多安全漏洞，仅开放对数据库或战争内容的访问

# javascript - 如何在 jquery animate 中使用 -ms-filter

> ID：13991101
> 
> 赞同：2
> 
> 时间：2012-12-21T13:31:05.087
> 
> 标签：javascript, jquery, internet-explorer-8

我需要针对 IE8 优化我的网站。而且它不直接支持不透明度。可以使用 -ms-filter 属性进行设置。在我的 javascript 中，我正在使用 jquery animate() 更改不透明度。但是我如何将它与 -ms-filter 一起使用

目前正在给这个

```
$('.topbar img').animate({opacity:1, -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"},1500); 
```

但它抛出一个JS错误。显然是无效的财产。任何人都可以帮助我如何在 IE8 中制作动画..？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T13:35:04.380

尝试使用：

```
$('.topbar img').animate(
      {
       opacity:1, 
       '-ms-filter': 'progid:DXImageTransform.Microsoft.Alpha(Opacity=100)'
//     ^quotes
      }
  ,1500); 
```

[**也可以看看...**](https://stackoverflow.com/questions/5594117/ie9-why-setting-ms-transform-works-from-css-but-not-with-jquery-css/5594170#5594170)

实际上，使用 jquery，您不需要该`-ms-filter`属性。有关示例，请参[见此 jsfiddle](http://jsfiddle.net/KooiInc/hrNZF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:48:26.283

jQuery 有一个[step() 回调](http://api.jquery.com/animate/)，在动画的每一步都会触发。

```
$('.topbar img').animate({
  opacity: 1
},
{
  step: function(now, fx) {
    // Every step of the opacity animation we'll get the current 
    // opacity as the 'now' argument.
    var opacity = Math.round(now * 100);
    $(fx.elem).css('-ms-filter', 'progid:DXImageTransform.Microsoft.Alpha(Opacity=' + opacity + ')');
  }
}); 
```

# .htaccess - mod_rewrite 在 Chrome 和 Internet Explorer 中不能像在 Firefox 中那样工作

> ID：13991102
> 
> 赞同：0
> 
> 时间：2012-12-21T13:31:06.953
> 
> 标签：.htaccess, mod-rewrite, cross-browser

我有一个像`example.test.com`. 该网站由三个不同的 html 文件组成：

*   索引.html
*   产品.html
*   联系人.html

因此，如果用户输入`example.test.com/index.html`的 url 应该被重定向到`example.test.com`.

也`example.test.com/index`应该成为`example.test.com`

`example.test.com/contact.html`应该是`example.test.com/contact`等等。

`www`他们在 url 之前应该是 no 。

我想出了以下规则：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^example.test.com$ [NC]
RewriteRule ^(.*)$ http://example.test.com/$1 [L,R=301]

RewriteCond %{SCRIPT_FILENAME}/ -d
RewriteCond %{SCRIPT_FILENAME}.html !-f
RewriteRule [^/]$ %{REQUEST_URI}/ [R=301,L]

RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule ^(.+)\.html$ /$1 [R=301,L]

RewriteCond %{SCRIPT_FILENAME}.html -f
RewriteRule [^/]$ %{REQUEST_URI}.html [QSA,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.(html?|php)\ HTTP/
RewriteRule ^index\.(html?|php)$ http://example.test.com/ [R=301,L] 
```

在 Firefox 中，一切都按预期工作，但在 Chrome 和 Internet Explorer`example.test.com/index.html`中仅重定向到`example.test.com/index`，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:13:53.363

我不太确定你想用这个 `^[A-Z]{3,9}\`部分实现什么，但这里的罪魁祸首是你最后一个条件下索引末尾的点。将其更改为：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index(|\.html|\.php)\ HTTP/
RewriteRule ^index\.(html?|php)$ http://example.test.com/ [R=301,L] 
```

这应该可以正常工作。

# c++ - tftp 客户端未从服务器接收（发送到错误的端口）

> ID：13991105
> 
> 赞同：1
> 
> 时间：2012-12-21T13:31:29.097
> 
> 标签：c++, unix, client, port, tftp

我正在编写自己的 TFTP 客户端。客户端是用 c++ 编写的（部分是 c），并在 unix 系统（Linux Debian stable）上运行。

这是我的问题：

我可以将我的读取请求 (RRQ) 发送到 TFTP 服务器（在 Windows XP 上打开 TFTP 服务器）。TFTP 服务器收到 RRQ，但不能发送应答。

在服务器端我看到这条消息：Client 192.168.1.110:55239 C:\OpenTFTPServer\test.txt, Communication Error

但是端口 55239 不是我在 TFTP-Client 中定义的端口。

这是我的代码部分：

*   设置客户端和服务器地址：

    ```
    memset(&servaddr,0,sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons(servport); // servport=69
    servaddr.sin_addr.s_addr = inet_addr("192.168.1.152"); 

    memset(&cliaddr,0,sizeof(cliaddr));
    cliaddr.sin_family = AF_INET;
    cliaddr.sin_port = htons(cliport); // cliport=13337
    cliaddr.sin_addr.s_addr = inet_addr("192.168.1.110"); 
    ```

*   连接和绑定：

    ```
    if (connect(serv, (struct sockaddr *) &servaddr, serv_length) < 0)
    {
        bail("Unable to connect with the server!");
    }
    if(bind(cli, (struct sockaddr *)&cliaddr, cli_length)<0)
    {
        bail("Unable to bind to adr & port!");
    } 
    ```

*   创建 TFTP 请求：

    ```
    memset( &cBuf1, 0, sizeof cBuf1);
    rdwrFrame = (struct tftp_wr_rq *)&cBuf1;
    rdwrFrame->opcode=htons(1);
    rdwrFrame->data={'t','e','s','t','.','t','x','t','\0','o','c','t','e','t','\0'}; 
    ```

*   发送 TFTP 请求：

    ```
    if (sendto (serv,cBuf1,19,0,(struct sockaddr *)&servaddr,serv_length) < 0)
    {
        bail ("Send the first requirment Frame error -- UDP");
    } 
    ```

这是我的问题：

我在做什么错，TFTP 服务器接收到错误的端口？我认为它应该设置为 cliaddr.sin_port = htons(cliport);

感谢您的帮助和问候 Rico

**回答：**

我的问题是，我将错误的套接字与错误的地址结构组合在一起

这是我的工作代码部分：

*   创建套接字：

    ```
    serv = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    if (serv < 0)
    {
        bail("Unable to create socket tx!");
    }

    cli = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    if (cli < 0)
    {
        bail("Unable to create socket rx!");
    } 
    ```

*   设置客户端和服务器地址：

    ```
    memset(&servaddr,0,sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons(servport);
    servaddr.sin_addr.s_addr = inet_addr("192.168.1.152"); 

    memset(&cliaddr,0,sizeof(cliaddr));
    cliaddr.sin_family = AF_INET;
    cliaddr.sin_port = htons(cliport);
    cliaddr.sin_addr.s_addr = inet_addr("192.168.1.110"); 
    ```

*   连接和绑定：

    ```
    if(bind(cli, (struct sockaddr *)&cliaddr, cli_length)<0)
    {
        bail("Unable to bind to adr & port!");
    }

    if (connect(serv, (struct sockaddr *) &servaddr, serv_length) < 0)
    {
        bail("Unable to connect with the server!");
    } 
    ```

*   创建 TFTP 请求：

    ```
    memset( &cBuf1, 0, sizeof cBuf1);
    rdwrFrame = (struct tftp_wr_rq *)&cBuf1;
    rdwrFrame->opcode=htons(1);
    rdwrFrame->data={'t','e','s','t','.','t','x','t',(char)0,'o','c','t','e','t',(char)0}; 
    ```

*   发送 TFTP 请求：

    ```
    if (sendto (cli,cBuf1,19,0,(struct sockaddr *)&servaddr,serv_length) < 0)
    {
        bail ("Send the first requirment Frame error -- UDP");
    } 
    ```

*   接收数据：

    ```
    recvfrom(cli,cBuf2,19,0,(struct sockaddr *)&cliaddr,(socklen_t*)&cli_length); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T16:45:24.467

我单独添加了答案，所以没有人必须在原始帖子中搜索它。

**回答：**

我的问题是，我将错误的套接字与错误的地址结构组合在一起

这是我的工作代码部分：

*   创建套接字：

    ```
    serv = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    if (serv < 0)
    {
        bail("Unable to create socket tx!");
    }

    cli = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    if (cli < 0)
    {
        bail("Unable to create socket rx!");
    } 
    ```

*   设置客户端和服务器地址：

    ```
    memset(&servaddr,0,sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons(servport);
    servaddr.sin_addr.s_addr = inet_addr("192.168.1.152"); 

    memset(&cliaddr,0,sizeof(cliaddr));
    cliaddr.sin_family = AF_INET;
    cliaddr.sin_port = htons(cliport);
    cliaddr.sin_addr.s_addr = inet_addr("192.168.1.110"); 
    ```

*   连接和绑定：

    ```
    if(bind(cli, (struct sockaddr *)&cliaddr, cli_length)<0)
    {
        bail("Unable to bind to adr & port!");
    }

    if (connect(serv, (struct sockaddr *) &servaddr, serv_length) < 0)
    {
        bail("Unable to connect with the server!");
    } 
    ```

*   创建 TFTP 请求：

    ```
    memset( &cBuf1, 0, sizeof cBuf1);
    rdwrFrame = (struct tftp_wr_rq *)&cBuf1;
    rdwrFrame->opcode=htons(1);
    rdwrFrame->data={'t','e','s','t','.','t','x','t',(char)0,'o','c','t','e','t',(char)0}; 
    ```

*   发送 TFTP 请求：

    ```
    if (sendto (cli,cBuf1,19,0,(struct sockaddr *)&servaddr,serv_length) < 0)
    {
        bail ("Send the first requirment Frame error -- UDP");
    } 
    ```

*   接收数据：

    ```
    recvfrom(cli,cBuf2,19,0,(struct sockaddr *)&cliaddr,(socklen_t*)&cli_length); 
    ```

# spring - JPA+Hibernate4.1.6+Spring3.1.2+MySQL persist() 没有进入数据库

> ID：13991109
> 
> 赞同：0
> 
> 时间：2012-12-21T13:31:43.213
> 
> 标签：spring, hibernate, jpa

我能够检索数据、更新数据但坚持不进入数据库。我想我在这里缺少一些基本的东西。

**编辑：* *Jsut 发现这个，调用 EntityManager.merge() 也不会更新数据库。如果提供了更新查询，则数据库中的值正在更新。

```
<bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.HibernateJpaDialect"
    scope="singleton" />
<bean id="jpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
    p:showSql="true" p:databasePlatform="org.hibernate.dialect.${DIALECT}"
    scope="singleton" />
<bean id="jpaEntityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    p:dataSource-ref="rbtDataSource" p:jpaDialect-ref="jpaDialect"
    p:jpaVendorAdapter-ref="jpaVendorAdapter"
    p:packagesToScan="com.onmobile.apps.ringbacktones.service.db.bean"
    scope="singleton" />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
    p:entityManagerFactory-ref="jpaEntityManagerFactory" scope="singleton" />
<tx:annotation-driven transaction-manager="transactionManager" />

<!-- This automatically registers all Spring standard post-processors for 
    annotation-based configuration -->
<context:annotation-config />

<bean id="rbtDao" class="com.onmobile.apps.ringbacktones.service.db.dao.RBTDao"
    abstract="true" p:dbManager-ref="dbManager"></bean>
<bean id="categoryDao"
    class="com.onmobile.apps.ringbacktones.service.db.dao.impl.RBTCategoryDaoImpl"
    parent="rbtDao"></bean> 
```

以下是类 rbtDao 的 java 代码

```
@Repository
public abstract class RBTDao<T extends RBTDto> {

@PersistenceContext
private EntityManager entityManager;

protected void save(T dtoBean) {
    getEntityManager().persist(dtoBean);
}
} 
```

以下是 categoryDao 类的 java 代码

```
@Repository
public class RBTCategoryDaoImpl extends RBTDao<Category> {
@Transactional
public void createCategory(Category category) {
    save(category);
} 
```

Category 是必须持久化的 bean 类。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:42:11.023

您的事务处理过多且有点可疑。首先，在调用堆栈中的适当位置添加一个 @Transactional 注释就足够了。此外，当您使用 Springs 注释驱动的事务方案时，您既不需要也不应该执行显式的 begin()/commit() 操作。另外，以您的方式在flush（）之前执行commit（），我什至不确定那会做什么，但这是不对的。

我的建议

*   删除**所有**@Transactional 注释，除了`createCategory()`方法上的注释
*   删除显式`begin()`和`commit()`操作

# powershell - Powershell 似乎无法处理 cmdlet 中的大量参数集

> ID：13991114
> 
> 赞同：4
> 
> 时间：2012-12-21T13:31:58.843
> 
> 标签：powershell

对 cmdlet 可以具有的参数集数量是否有任何限制？我制作了一个 cmdlet，它有 56 个开关参数，我希望每个参数在其自己的参数集中都是强制性的。出于某种原因，powershell 将第 (n+1) 个与第一个分组，将第 (n+2) 个与第二个分组，等等，最终不超过 n 个参数集；如果我计算正确，n 是 32。这就是我的 cmdlet 的样子：

```
[Cmdlet(VerbsCommon.Get, "Foo")]
public class GetFoo : PSCmdlet
{
    [Parameter(ValueFromPipeline = true)]
    public string ParamA {get;set;}

    [Parameter(ValueFromPipelineByPropertyName = true)]
    public string ParamB {get;set;}

    [Parameter]
    public string ParamC {get;set;}

    [Parameter(ParameterSetName = "Group1", Mandatory = true)]
    public SwitchParameter Param1 {get;set;}

    [Parameter(ParameterSetName = "Group2", Mandatory = true)]
    public SwitchParameter Param2 {get;set;}
    . . .

    [Parameter(ParameterSetName = "Group56", Mandatory = true)]
    public SwitchParameter Param56 {get;set;}
} 
```

预期的：

```
PS> Get-Help Get-Foo
  Get-Foo -Param1 [-ParamA <string>] [-ParamB <string>] [-ParamC <string>]
  Get-Foo -Param2 [-ParamA <string>] [-ParamB <string>] [-ParamC <string>]
  . . .
  Get-Foo -Param56 [-ParamA <string>] [-ParamB <string>] [-ParamC <string>] 
```

实际的：

```
PS> Get-Help Get-Foo
  Get-Foo -Param1 -Param33 [-ParamA <string>] [-ParamB <string>] [-ParamC <string>]
  Get-Foo -Param2 -Param34 [-ParamA <string>] [-ParamB <string>] [-ParamC <string>]
  . . .
  Get-Foo -Param24 -Param56 [-ParamA <string>] [-ParamB <string>] [-ParamC <string>]
  Get-Foo -Param25 [-ParamA <string>] [-ParamB <string>] [-ParamC <string>]
  . . .
  Get-Foo -Param32 [-ParamA <string>] [-ParamB <string>] [-ParamC <string>] 
```

我很头疼，看不出我构建 cmdlet 的方式有什么问题；如果我减少参数集的数量，我看不到这种行为。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:04:36.903

看起来每个 cmdlet 有 32 个 ParameterSet 的限制。看看你是否可以通过创建 65 个参数集来测试它，看看 -Param65 是否在集合 1 中（使用 -Param1 和 -Param33）。

一种解决方法是将您的 SwitchParameters 更改为一个参数，该参数采用包含所有开关值的 Enum。

```
Get-Foo -ParamD <EnumParams1To56> [-ParamA <string>] [-ParamB <string>] [-ParamC <string>] 
```

# ajax - 如何使用 ajaxStart 和 ajaxStop 显示/隐藏带有进度条的 div？

> ID：13991122
> 
> 赞同：0
> 
> 时间：2012-12-21T13:32:38.593
> 
> 标签：ajax, jquery-ui, jquery, progress-bar

在编程方面我很新，所以也许这对你们来说是在公园里散步。我想创建一个带有进度条的 .gif 图像的 div，其中 div 仅应在按下按钮时显示，例如将一些设置保存到数据库中。

此功能将在 GUI 中的任何地方使用，并且每次对数据库进行查询时。我正在使用 jQuery UI 进行编码，并且有人建议我使用 ajaxStart() 和 ajaxStop()，但不太清楚如何正确使用它。下面的代码只是我写的一些代码，我认为我会以某种方式走上正确的轨道，但很可能不是。

- - - 脚本 - - -

```
$(document).ready(function(){
      $("#progressContainer").ajaxStart(function(){
        $(this).html("<img src='ajax-progressbar.gif' />");
      });
      $(".clickForProgressBar").click(function(){
        $("#progressContainer").load("");
      });
    }); 
```

----- HTML -----

```
<button class="clickForProgressBar">Click here</button>
<div id="progressContainer"></div> 
```

如果有人可以尝试给我一些关于如何进行的提示，我将永远感激不尽。如果你能理解我的意思；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:38:35.247

这是一种方法的概述。

首先，因为这是一个应用程序范围的策略，所以创建一个 Ajax 包装器并将该包装器用于所有调用。

接下来，在包装器中，在向服务器发出实际调用之前显示图像。

最后，当调用返回时（出于任何原因），在继续之前隐藏图像。

要记住的一个问题是您希望如何处理图像容器。例如，如果它将位于 div 标签中（正如您在上面指出的），您可能希望将 div 标签的 id 作为调用的一部分传递，以确保不同的 div 标签或展示位置仍然有效。或者，您可以使用在内容上弹出并显示图像的模式窗口。这将使您不必使用 div 标记，并且无需对页面布局做出任何假设，尽管它可能更加突兀（这可能是一件好事，具体取决于您在做什么）。

# r - 将多列与一列数据的值进行比较，并创建一个具有 0 和 1 的新列

> ID：13991124
> 
> 赞同：0
> 
> 时间：2012-12-21T13:32:50.217
> 
> 标签：r

谁能帮忙。我想将多列的值与一列进行比较。如果任何一列的标准列值大于在新列中放入 1，否则放入 0。我有很多文件，所以我想在循环中使用它。

```
df:
    Names   Standard    Das Dss Tri Tet
    Aa  32  42  21  45  34
    Ab  23  25  43  43  32
    Ac  43  34  23  32  23
    Ad  23  24  33  12  23
    Ae  14  24  12  20  24
    Af  43  42  13  12  43
    Ag  12  13  22  13  22
    Ah  32  32  42  42  23 
```

输出：

```
 Names  Standard    Das Dss Tri Tet Difference  No_Difference   Names_Difference    Total
Aa  32  42  21  45  34  15  3   Das, Tri, Tet   1
Ab  23  25  43  43  32  52  4   Das,Dss,Tri,Tet 1
Ac  43  34  23  32  23  0   0   NA  0
Ad  23  24  33  12  23  10  2   Das,Dss 1
Ae  14  24  12  20  24  26  4   Das,Tri,Tet 1
Af  43  42  13  12  43  0   0   NA  0
Ag  12  13  22  13  22  22  4   Das,Dss,Tri,Tet 1
Ah  32  32  42  42  23  20  2   Dss,Tri 1 
```

我正在使用@adibender 提供的这段代码：

```
df2 <- do.call(rbind, apply(df[, -1], 1, function(z) {
        ind <- z[2:5] > z[1]
        return(cbind.data.frame( Total= if(z[2:5]>z[1]{'1'} else {'0'},
                        Difference = sum(z[2:5][ind] - z[1]), 
                        No_Difference = sum(ind), 
                        Names_Difference = paste(colnames(df[3:6])[ind], 
                                collapse = ", ")
                ))
    }))

df <- cbind(df, df2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:43:55.813

我不确定您要查找的内容，但以下命令将`Total`在数据框中添加一个新列 , ，指示该行中的任何值是否高于 中的值`Standard`：

```
transform(df, Total = as.integer(apply(df[-(1:2)], 1, max) > Standard)) 
```

然后结果：

```
 Names Standard Das Dss Tri Tet Total
1    Aa       32  42  21  45  34     1
2    Ab       23  25  43  43  32     1
3    Ac       43  34  23  32  23     0
4    Ad       23  24  33  12  23     1
5    Ae       14  24  12  20  24     1
6    Af       43  42  13  12  43     0
7    Ag       12  13  22  13  22     1
8    Ah       32  32  42  42  23     1 
```

# c++ - BREW 中的静态字段和方法

> ID：13991137
> 
> 赞同：1
> 
> 时间：2012-12-21T13:34:21.983
> 
> 标签：c++, brew-framework

可以在 BREW 中创建和使用静态字段和方法吗？我正在用 C++ 编写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:16:14.343

*   静态方法：好的，它就像简单的独立函数，具有额外的访问权限。

*   静态字段：仅 POD（仍需谨慎使用）。BREW 运行时不调用全局变量和静态字段的构造函数（它们几乎相同，除了访问权限和命名空间），因此任何初始化都会失败。

请注意，单例将起作用（静态实例*指针*是 POD），因此您必须改用它们。

# php - 在卖家网站上提交付款

> ID：13991139
> 
> 赞同：3
> 
> 时间：2012-12-21T13:34:25.860
> 
> 标签：php, paypal, paypal-ipn, paypal-adaptive-payments

我正在开发一个可以接受贝宝付款的项目。我使用的顺序如下：

**我目前的开发网站的付款步骤：**

1.  用户访问我的网站，
2.  选择为某事买单，
3.  被重定向到贝宝，
4.  在paypal上完成付款，
5.  然后用户被重定向回我的网站成功 url。

这很好用，因为当贝宝决定确认已承诺的付款并相应地让用户知道时，我使用 IPN 侦听器在后台更新我的数据库。

然而，前几天，我在自己做一些网上购物，并使用贝宝付款。我注意到，当我付款时，我被重定向到贝宝，在那里我登录并看到了贝宝发票。我点击确认，然后我被重定向回卖家网站，在那里我做了一个总结，并被告知要提交购买！！！

所以基本上，序列是这样的：

**我在不同卖家网站的购物体验：**

1.  我想为这些物品付款，
2.  我被重定向到贝宝，
3.  我是发票并确认付款，
4.  我被重定向到卖家网站，
5.  我看到了订单的确认信息，并被要求付款，
6.  我承诺付款并被告知订单已完成。

不同之处在于，我的网站在 paypal 网站上进行了购买，我使用他们的 IPN 系统听取了 paypal 的回复，但是第二个网站似乎在卖家的实际网站上进行了付款。

我想，哇，从用户体验的角度来看，这让人更加放心。

这是怎么做的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:12:08.263

听起来您目前正在使用[Payments Standard](https://www.x.com/developers/paypal/development-and-integration-guides#wps)并且您想要[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)。

Express Checkout 与 Standard 非常相似，只是它是基于 API 的，并且用户会在完成付款之前返回您的站点。

它由 3 个 API 调用组成...

1) [SetExpressCheckout](https://www.x.com/developers/paypal/documentation-tools/api/setexpresscheckout-api-operation-nvp) - 从 PayPal 获取一个令牌，您将其附加到重定向 URL 的末尾，该 URL 将人发送到 PayPal 以登录并查看付款。

2) [GetExpressCheckoutDetails](https://www.x.com/developers/paypal/documentation-tools/api/getexpresscheckoutdetails-api-operation-nvp) - 这允许您将付款人详细信息（姓名、电话、送货地址等）从 PayPal 拉回您的应用程序。这是一个可选步骤。

3) [DoExpressCheckoutPayament](https://www.x.com/developers/paypal/documentation-tools/api/doexpresscheckoutpayment-api-operation-nvp) - 这将完成付款。在此 API 调用发生之前不会转移任何资金，当然，在用户已经回到您的站点并再次进入您自己的应用程序流程之前，它不会发生。

您仍然可以按原样使用 IPN，但您也可以直接在流程中进行操作，因为您可以从 API 获得即时响应，并且您可以根据需要设置自己的评论。

# ios - 用于水平滚动的 UIScrollView 内的 UITableView 无法按预期工作

> ID：13991141
> 
> 赞同：0
> 
> 时间：2012-12-21T13:34:41.410
> 
> 标签：ios, uitableview, uiscrollview

我使用了一个表格视图，其中包含具有不同信息集的单元格，并且不能包含在 tableView 的框架中。所以我确实需要在表格视图中具有水平滚动能力。

由于tableview无法进行水平滚动，因此我计划使用带有水平滚动的scrollView。我在 scrollView 的顶部添加了 tableView。

我面临的问题与滚动视图的内容大小属性无关，滚动视图永远不会滚动超过 256-320 像素的 contentOffset 值 X。

我打算实现如下屏幕截图中的效果![在此处输入图像描述](../Images/b4e2e09a76e96bf55f90740f81562ee7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:51:01.757

尝试两件事，

首先将 TableView 高度设置为 total numberOfRows ：

```
tableView.frame.size.y  = numberOfRows * 44; 
```

现在禁用 tableView 滚动

并根据您的需要设置他的 scrollView contentSize；

```
scollerView.contentSize = numberOfRowsintableView 
```

肯定能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:45:57.473

在 ViewDidLoad 中为 ScrollView 设置适当的 ContentSize。

```
scollerView.contentSize = CGSizeMake(Width,Height); 
```

根据要求和高度计算宽度（您正在使用 Tableview，因此您可以将高度与视图高度相同）

然后它肯定会滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:02:38.513

我使用代码实现了整个功能，而不使用界面生成器。它现在按预期工作。我不知道为什么它在与界面生成器一起使用时不起作用。

# javascript - ckeditor - javascriptspellcheck 插件

> ID：13991143
> 
> 赞同：4
> 
> 时间：2012-12-21T13:34:42.547
> 
> 标签：javascript, jquery, ckeditor

我正在尝试使用[ckEditor将](http://docs.cksource.com/Main_Page)[javascriptspellchecker](http://www.javascriptspellcheck.com/HTML_Editor_SpellChecker_in_JavaScript)集成到网页中（注意我使用的是 ckeditor 3.6 版）。我想用使用 javascriptspellcheck 的新自定义插件替换默认的拼写检查和 SCAYT（键入时进行拼写检查）插件。

我按照 javascriptspellchecker 网站上的示例创建了一个插件，但它不能正常工作。javascriptspellchecker 获取 textarea 的 id 并对它的值运行拼写检查（或在选择 SCAYT 时在输入后将事件处理程序附加到拼写检查）。问题是，当我更改 ckEditor 实例中的文本时，隐藏的文本框似乎没有在后台更新。这意味着我写的插件只检查textarea的原始值，而SCAYT不起作用。

到目前为止我的插件：-

```
(function () {
    //Section 1 : Code to execute when the toolbar button is pressed
    var a = {
        exec: function (editor) {
            $Spelling.SpellCheckInWindow($(editor.element).attr('id'))
        }
    },

    //Section 2 : Create the button and add the functionality to it
    b = 'javascriptspellcheck';
    CKEDITOR.plugins.add(b, {
        init: function (editor) {
            editor.addCommand(b, a);
            editor.ui.addButton("JavaScriptSpellCheck", {
                label: 'Check Spelling',
                icon: this.path + "images/spell.png",
                command: b
            });
        }
    });
})(); 
```

有谁知道是否可以制作一个工作插件？有没有办法强制编辑器更新隐藏的文本区域，或者是否有另一个 DOM 元素可以传递给拼写检查器？

**更新：**

如果有用，我的插件的 SCAYT 版本使用以下执行功能

```
exec: function (editor) {
    $Spelling.SpellCheckAsYouType($(editor.element).attr('id'))
} 
```

**更新 2：**

我找到了正常拼写检查的解决方案，我可以在运行拼写检查之前调用 editor.UpdateElement() 并且它可以工作！我不知道为什么，当我用萤火虫检查原始文本区域时，值似乎没有改变。

新的拼写检查插件

```
(function () {
    //Section 1 : Code to execute when the toolbar button is pressed
    var a = {
        exec: function (editor) {
            editor.updateElement();
            $Spelling.SpellCheckInWindow($(editor.element).attr('id'));
        }
    },

    //Section 2 : Create the button and add the functionality to it
    b = 'javascriptspellcheck';
    CKEDITOR.plugins.add(b, {
        init: function (editor) {
            editor.addCommand(b, a);
            editor.ui.addButton("JavaScriptSpellCheck", {
                label: 'Check Spelling',
                icon: this.path + "images/spell.png",
                command: b
            });
        }
    });
})(); 
```

我仍然无法让 SCAYT 工作。我找到了一个[ckeditor 插件](http://alfonsoml.blogspot.co.uk/2011/03/onchange-event-for-ckeditor.html)来捕获更改事件，并尝试在每次更改时再次调用 updateElement() 函数。但是这不起作用，有人可以帮忙吗？

我使用 ckeditor onchange 插件的 SCAYT 插件：

```
exec: function (editor) {
    editor.on('change', function (e) { this.updateElement(); });
    $Spelling.SpellCheckAsYouType($(editor.element).attr('id'));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:00:38.723

在联系了 JavaScriptSpellcheck 的支持后，他们回复说“ **SCAYT 不会与任何编辑器一起使用，因为它有可能将垃圾 HT​​ML 注入您的表单**”。所以 CK Editor 的 SCAYT 插件是不可能的。在我的问题更新中，CK Editor (v3.6) 的有效拼写检查插件的代码如下：

```
(function () {
    //Section 1 : Code to execute when the toolbar button is pressed
    var a = {
        exec: function (editor) {
            editor.updateElement();
            $Spelling.SpellCheckInWindow($(editor.element).attr('id'));
        }
    },

    //Section 2 : Create the button and add the functionality to it
    b = 'javascriptspellcheck';
    CKEDITOR.plugins.add(b, {
        init: function (editor) {
            editor.addCommand(b, a);
            editor.ui.addButton("JavaScriptSpellCheck", {
                label: 'Check Spelling',
                icon: this.path + "images/spell.png",
                command: b
            });
        }
    });
})(); 
```

# shell - shell脚本变量中的奇怪行为

> ID：13991153
> 
> 赞同：1
> 
> 时间：2012-12-21T13:35:32.663
> 
> 标签：shell, variables

我编写了一个 shell 脚本来解析一些文件，`grep`并在后续命令中使用结果。

源代码的相关部分是

```
VERSION=`grep "^Stable tag:" readme.md | awk -F' ' '{print $NF}'`
echo $VERSION
echo "Readme file version is $VERSION is it correct" 
```

readme.md 文件中的相关行是

```
Stable tag: 2.2.2 
```

你会期望输出

```
2.2.2
Readme file version is 2.2.2 is it correct 
```

但我得到以下输出

```
2.2.2
 is it correctrsion is 2.2.2 
```

我很确定在我的文本文件的行尾没有（不可打印或非 ascii）字符。`:set invlist`我通过在 vim 中启用命令来检查它。

知道为什么会这样吗？或任何其他想法来调试此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:38:06.020

这看起来像一个 DOS 编辑的文件，而你在一个类似 Unix 的系统上工作。去掉回车符 (Ctrl-M)。

你可以`tr(1)`用来删除那些：

```
VERSION=`grep "^Stable tag:" readme.md | tr -d '\015' | awk -F' ' '{print $NF}'` 
```

awk 可能还有一些内置功能可以处理这些，但我对 awk 的了解还不够。

# python-3.x - 使用 BottlePy 上传并保存一个 excel 文件

> ID：13991157
> 
> 赞同：1
> 
> 时间：2012-12-21T13:35:50.117
> 
> 标签：python-3.x, bottle

我正在使用 Bottle 框架创建一个应用程序。我需要一个上传 Excel 文件的功能。我正在使用以下文件上传。 [http://bottlepy.org/docs/dev/tutorial.html#post-form-data-and-file-uploads](http://bottlepy.org/docs/dev/tutorial.html#post-form-data-and-file-uploads)

在服务器端，我将文件数据作为二进制内容获取。我想将它作为 Excel 文件保存在临时文件夹中。

我是 Python 和 Bottle 的新手。任何帮助都感激不尽。

谢谢奇迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:48:31.053

您的`request.files.data`对象包含有关您的 excel 文件的数据。所以你只需要创建一个临时文件夹并保存在里面。这可以使用[tempfile 模块完成](http://docs.python.org/2/library/tempfile.html)

```
f = tempfile.NamedTemporaryFile(delete=False, suffix=".xlsx")
f.write(request.files.data.file.read())
f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T04:30:23.230

我无法让像你这样的简单文件编写代码工作，所以我使用了 tempfile 模块。查看您的代码，如果代码正常，我会假设它会写入 python 文件所在的目录。尝试使用下面的代码，如果您不将参数传递给 dir，它将在当前目录中创建一个文件。

```
def save_as_temp_file(data):
    with tempfile.NamedTemporaryFile(dir=settings.TEMP_PATH,
            delete=False,
            suffix=".xlsx") as f:
        f.write(data.file.read())
        return f.name 
```

# r - 在R中按数字顺序将一列匹配到另一列

> ID：13991160
> 
> 赞同：1
> 
> 时间：2012-12-21T13:36:01.750
> 
> 标签：r

我有一个数据文件：

```
https://dl.dropbox.com/u/22681355/example.csv 
```

读取文件：

```
example<-read.csv("example.csv")
example<-example[,-1] 
```

example[,1] 包含按数字顺序递增的数字列表。example[,2] 包含另一组数字

首先，我想确定 example[,2] 中未在 example[,1] 中列出的数字

```
diff<-setdiff(example[,2],example[,1]) 
```

现在我知道了这些值，我想将它们插入到 example[,1] 中，而 example[,1] 和 example[,2] 中的现有值保持不变。

一个简短的例子是：

```
Example[,1]   Example[,2]
1             1000
1             50
1             3
1             90
1             25
3             4
5             2
5             7
etc           etc 
```

运行 setdiff() 后，我得到的数字不在第一列，而是在第二列。

现在我想将它们放在 example[,1] 中以产生以下输出：

```
Example[,1]   Example[,2]
1             1000
1             50
1             3
1             90
1             25
2             NA
3             4
4             NA
5             2
5             7
etc           etc 
```

所以基本上把它们按数字顺序排列，但其他一切都完好无损。

第 1 部分由**Joris Meys 完美**解决！

我还有两个问题：

///////////////////////////////////////// /////////////////////////////////

1：

如果有额外的第三列但我不想对它做任何事情，是否可以这样做？

例如：

原来的

```
 Example[,1]   Example[,2] Example[,3]
 1             1000        37
 1             50          18
 1             3           54
 1             90          72
 1             25          23
 3             4           15
 5             2           20
 5             7           9
 etc           etc 
```

所需的输出：

```
Example[,1]   Example[,2]  Example[,3]
1             1000         37
1             50           18
1             3            54
1             90           72
1             25           23
2             NA           NA
3             4            15
4             NA           NA
5             2            20
5             7            19
etc           etc 
```

2：

而不是在 example[,2] 中添加 NA 到 example[,1] 没有来自 example[,2] 的值的情况，例如 example[,1] 没有数字 '30' 然后我想搜索example[,2] 是否有数字'30'并查看 example[,1] 在该行中有什么值，然后将其添加到 example[,2] 而不是 NA。

例如：

```
Example[,1]   Example[,2]  Example[,3]
1             1000         37
1             50           18
1             3            54
1             90           72
1             25           23
2             NA           NA
3             4            15
4             NA           NA
5             2            20
5             7            19
etc           etc 
```

而不是 NA 有：

```
Example[,1]   Example[,2]  Example[,3]
1             1000         37
1             50           18
1             3            54
1             90           72
1             25           23
2            5            20
3             4            15
4            3           15
5             2            20
5             7            19
etc           etc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:41:09.713

所以，在你明确你想要什么之后，这意味着你有一个矩阵

```
Example <- 
matrix(
  c(1,1,1,1,1,3,5,5,1000,50,3,90,25,4,2,7),
  ncol=2
) 
```

然后您可以执行以下操作：

```
diffs <- setdiff(Example[,2],Example[,1])
tmps <- rbind(Example,
              matrix(
                 c(diffs,rep(NA,length(diffs))),
                 ncol=2
              )
        )
solution <- tmps[order(tmps[,1]),] 
```

这将为您提供以下结果：

```
> solution
      [,1] [,2]
 [1,]    1 1000
 [2,]    1   50
 [3,]    1    3
 [4,]    1   90
 [5,]    1   25
 [6,]    2   NA
 [7,]    3    4
 [8,]    4   NA
 [9,]    5    2
[10,]    5    7
[11,]    7   NA
... 
```

请参阅帮助文件`?matrix`和`?order`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:19:05.467

如果您的矩阵有两列以上，则以下方法也适用。这是 Joris Meys 解决方案的延伸。

```
Example <- matrix(c(1,1,1,1,1,3,5,5,
                    1000,50,3,90,25,4,2,7,37,18,54,72,23,15,20,9),ncol=3)

diffs <- setdiff(Example[,2], Example[,1])
new_mat <- rbind(Example,
                 matrix(c(diffs,
                          rep(NA, length(diffs) * (ncol(Example) - 1))), 
                        ncol = ncol(Example)))
solution <- new_mat[order(new_mat[,1]),] 
```

结果：

```
 [,1] [,2] [,3]
 [1,]    1 1000   37
 [2,]    1   50   18
 [3,]    1    3   54
 [4,]    1   90   72
 [5,]    1   25   23
 [6,]    2   NA   NA
 [7,]    3    4   15
 [8,]    4   NA   NA
 [9,]    5    2   20
[10,]    5    7    9
[11,]    7   NA   NA
[12,]   25   NA   NA
[13,]   50   NA   NA
[14,]   90   NA   NA
[15,] 1000   NA   NA 
```

一旦你创建了这个矩阵，就很容易生成一个没有 NA 的新矩阵：

```
solution2 <- solution
solution2[is.na(solution2)] <- Example[match(sort(diffs), Example[,2]), -2] 
```

结果：

```
 [,1] [,2] [,3]
 [1,]    1 1000   37
 [2,]    1   50   18
 [3,]    1    3   54
 [4,]    1   90   72
 [5,]    1   25   23
 [6,]    2    5   20
 [7,]    3    4   15
 [8,]    4    3   15
 [9,]    5    2   20
[10,]    5    7    9
[11,]    7    5    9
[12,]   25    1   23
[13,]   50    1   18
[14,]   90    1   72
[15,] 1000    1   37 
```

# solr - 使用 Solr 进行多语言分析和词干分析

> ID：13991161
> 
> 赞同：2
> 
> 时间：2012-12-21T13:36:06.117
> 
> 标签：solr, multilingual

我们有一个应用程序可以获取不同语言的文本。我们的目标是理解文本的语言，对每种语言使用不同的词干分析器对其进行分析并对其进行索引。我能够使用[Solr 的语言检测](http://wiki.apache.org/solr/LanguageDetection)机制检测语言。

现在，我想使用每种语言的不同 fieldType 动态分析文本，并将每个文本存储在不同的字段中。

例如，假设我在`schema.xml`.

```
<!-- English -->
<field name="text_en" type="text_en" indexed="true" stored="true"/>

<!-- German -->
<field name="text_de" type="text_de" indexed="true" stored="true"/>

<!-- Turkish -->
<field name="text_tr" type="text_tr" indexed="true" stored="true"/> 
```

当我检测到文本是英文时，我想将其动态添加到`text_en`将使用与其他技术不同的技术进行分析/提取的字段中。

Solr 上是否有支持这一点的内置机制？如果是，我该如何配置它？或者我应该为此目的开发插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:05:17.487

请看一下[语言检测参数](http://wiki.apache.org/solr/LanguageDetection#langid.fl) 对我来说，首先您必须使用默认值或覆盖映射以将语言映射到一个字段，其中语言字母代码（如 en、de、... .) 是字段名称的一部分。

看看这个：

[http://alisalimi25.blogspot.de/2012/07/phonetic-search-and-language-detection.html](http://alisalimi25.blogspot.de/2012/07/phonetic-search-and-language-detection.html)

...广告示例看起来将填充字段：title_na，title_da，...

抱歉，我不是 100% 确定，但这是我解释文档的方式。

# javascript - 使用 $.ajax 发送表单数据时在控制器上获取 [nil] 数组

> ID：13991162
> 
> 赞同：1
> 
> 时间：2012-12-21T13:36:06.263
> 
> 标签：javascript, jquery, ruby-on-rails

我有一个表单，我在其中收集表单数据，当我**serializeArray()**这个表单时，我有这个：

```
[
  {
    "name": "authenticity_token",
    "value": "HRjaGFRSqX6EqTYnyohQbc9g6P6RTsDgV3qizYuoh+E="
  },
  {
    "name": "test[form_meta][index]",
    "value": "0"
  },
  {
    "name": "test[form_meta][location]",
    "value": "http://localhost/static/test/password.html"
  },
  {
    "name": "test[form_meta][title]",
    "value": "Passwords Form"
  },
  {
    "name": "test[form_meta][id]",
    "value": "form1"
  },
  {
    "name": "test[data][email[]]",
    "value": "arnel@personal.com"
  },
  {
    "name": "test[field_meta][email[]]",
    "value": "test.place_detail_email"
  },
  {
    "name": "test[data][password[]]",
    "value": "test"
  },
  {
    "name": "test[field_meta][password[]]",
    "value": "test.alarm_password"
  },
  {
    "name": "test[type][email[]]",
    "value": "text"
  },
  {
    "name": "test[label][email[]]",
    "value": "Email Address:"
  },
  {
    "name": "test[type][password[]]",
    "value": "text"
  },
  {
    "name": "test[label][password[]]",
    "value": "Password:"
  },
  {
    "name": "rec[email[]]",
    "value": "test.previous_address_category"
  },
  {
    "name": "rec[password[]]",
    "value": "c_test.password[]"
  }
] 
```

还行吧。但是当我像这样将它发送到我的控制器时：

```
$.ajax({
    type: "post",
    data: data,
    success: function(){<code>},
    error: function(){<code>}
}); 
```

我在我的控制器上得到了这个：

```
{
  "authenticity_token"=>"HRjaGFRSqX6EqTYnyohQbc9g6P6RTsDgV3qizYuoh+E=",
  "test"=>{
    "form_meta"=>{
      "index"=>"0",
      "location"=>"http://localhost/static/test/password.html",
      "title"=>"Passwords Form",
      "id"=>"form1"
    },
    "data"=>{
      "email"=>[
        nil
      ],
      "password"=>[
        nil
      ]
    },
    "field_meta"=>{
      "email"=>[
        nil
      ],
      "password"=>[
        nil
      ]
    },
    "type"=>{
      "email"=>[
        nil
      ],
      "password"=>[
        nil
      ]
    },
    "label"=>{
      "email"=>[
        nil
      ],
      "password"=>[
        nil
      ]
    }
  },
  "rec"=>{
    "email"=>[
      nil
    ],
    "password"=>[
      nil
    ]
  },
  "controller"=>"test",
  "action"=>"create"
} 
```

**[nil]**数组在这里杀死了我。我能做什么不必更改表单并获取实际输入的值而不是**[nil]**值。

这个问题有什么解决办法吗

# ruby-on-rails-3 - 为什么 AR Object.clone 有这种幻象行为？

> ID：13991164
> 
> 赞同：1
> 
> 时间：2012-12-21T13:36:24.497
> 
> 标签：ruby-on-rails-3, activerecord, clone

我有一个像这样的活动记录模型： `@model = ModelClass.find(1)`

然后我克隆它并进行修改： `@clone = @model.clone`

然后我更改克隆： `@clone.firstname = 'new name'`

但随后`@model.firstname`也更改为“新名称”。当我看到这个时，我的眼睛几乎要跳出来了。

为什么`clone`会带来这种奇怪的行为？

# php - 用要初始化的值填充关联数组

> ID：13991168
> 
> 赞同：5
> 
> 时间：2012-12-21T13:36:51.700
> 
> 标签：php

我有以下数组：

```
array(
    'elem1', 'elem2', 'elem3'
); 
```

我想要以下内容：

```
array(
    'elem1' => 0,
    'elem2' => 0,
    'elem3' => 0
); 
```

这可能`array_fill`吗？我看不出它是。

如果没有，有没有办法在不迭代数组的情况下做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T13:40:17.993

是的..试试这个

```
<?php
$keys = array('elem1', 'elem2', 'elem3');
$a = array_fill_keys($keys, 0);
print_r($a);
?> 
```

输出：

```
array(
    'elem1' => 0,
    'elem2' => 0,
    'elem3' => 0
); 
```

# c# - 工厂方法和泛型

> ID：13991173
> 
> 赞同：6
> 
> 时间：2012-12-21T13:37:20.563
> 
> 标签：c#, generics, factory-method

我有以下接口和实现：

```
public interface IRepository<T>
{
    IList<T> GetAll();
}

internal class TrendDataRepository : IRepository<TrendData>
{
    public IList<TrendData> GetAll()
    {
        //.. returns some specific data via Entity framework
    }
} 
```

我将有多个实现，它们都通过实体框架返回不同的数据。在某些时候，我想向用户表示一个实现 IRepository 接口的类的列表。我使用以下代码执行此操作。这对我很有用。

```
 public static IEnumerable<string> GetAvailableRepositoryClasses()
    {
        var repositories = from t in Assembly.GetExecutingAssembly().GetTypes()
                           where t.GetInterfaces().Any(x => x.IsGenericType && x.GetGenericTypeDefinition() == typeof (IRepository<>))
                           select t.Name;

        return repositories;
    } 
```

但是，我还想创建一个工厂方法，给定一个特定的字符串将返回一个具体的存储库类型，并允许我调用它的“GetAll”方法。在伪代码中：

```
someObject = Factory.CreateInstance("TrendData");
someObject.GetAll(); 
```

（我知道这行不通，因为我必须在工厂方法中指定具体类型）。

我想要这个功能，因为我想让用户能够将报表绑定到特定的数据源。通过这种方式，他们可以启动一个新报表，其中报表的数据源绑定到（例如）TrendDataRepository.GetAll() 方法。

但是，也许是因为世界末日越来越近了；-) 或者是星期五下午，我无法再清楚地思考，我不知道如何意识到这一点。

一些指针将非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:59:13.033

我建议返回存储库类型的集合而不是名称，并仅在 UI 中显示名称：

```
public static IEnumerable<Type> GetAvailableRepositoryClasses()
{
    return Assembly.GetExecutingAssembly().GetTypes()
        .Where(t => t.GetInterfaces().Any(x => x.IsGenericType && x.GetGenericTypeDefinition() == typeof (IRepository<>)));
} 
```

然后，当用户选择源时，您可以执行以下操作：

```
object repository = Activator.CreateInstance(selectedType); 
```

此方法要求每个存储库都有一个默认构造函数。

`Activator.CreateInstance`返回一个对象，除非您知道您期望`IRepository<T>`的泛型类型，否则您不能将其转换为您的界面。最好的解决方案可能是创建一个您的存储库类也实现`T`的非通用接口：`IRepository`

```
public interface IRepository
{
    IList<object> GetAll();
} 
```

现在您可以将创建的存储库转换为`IRepository`：

```
IRepository repository = (IRepository)Activator.CreateInstance(selectedType); 
```

您可以创建一个实现两者的存储库基类：

```
public abstract class RepositoryBase<T> : IRepository<T>, IRepository
{
    public abstract IList<T> GetAll();
    IList<object> IRepository.GetAll()
    {
        return this.GetAll().Cast<object>().ToList();
    }
} 
```

# java - 从现有 Thrift 或 Hector 对象生成 Cassandra 模式

> ID：13991178
> 
> 赞同：1
> 
> 时间：2012-12-21T13:37:44.230
> 
> 标签：java, cassandra, schema

我有一个动态创建列族的 Java 应用程序。所以我有一组 ThriftCfDef 对象。通常创建如下：

```
ThriftCfDef sfDef = (ThriftCfDef) HFactory.createColumnFamilyDefinition(TestKeyspace, MYCOLUMNFAMILY, ComparatorType); 
```

即这里没有什么特别的...

但是，有没有办法（工具、库、框架）生成 cli 或 CQL 命令来创建现有 ThriftCfDef java 对象的模式？

有一个 Cassandra-cli 命令“显示模式”，它显示了一个 cli 脚本来创建键空间和列族。我需要类似的东西，但来自 Java 对象-> script.file。

# java - 通过将 jpanel 组件作为参数传递来画一个圆

> ID：13991180
> 
> 赞同：5
> 
> 时间：2012-12-21T13:37:49.430
> 
> 标签：java, swing, jpanel

我真的很困惑如何通过将它作为参数传递来在 jpanel 上画一个圆圈..

```
public class test extends JPanel{

        public test(JPanel jpanelcomponent) {

        }
        @Override
        protected void paintComponent(Graphics g) {
            // TODO Auto-generated method stub
            super.paintComponent(g);
            int width = getWidth()/2;
            int height = getHeight()/2;
            g.fillOval(5, 5, width, height);
        }

    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T14:15:18.550

我认为更好的设计会让您将通过`Graphic`覆盖`paintComponent(..)`a获得的 s 对象传递`JPanel`给将绘制到图形对象的类

这是我做的一个例子：

![在此处输入图像描述](../Images/7e10140d5d499829b5b735968dff0be5.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final DrawingClass dc = new DrawingClass();
        JPanel testPanel = new JPanel() {
            @Override
            protected void paintComponent(Graphics grphcs) {
                super.paintComponent(grphcs);
                Graphics2D g2d = (Graphics2D) grphcs;
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                dc.draw(g2d, getWidth(), getHeight());

            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };

        frame.add(testPanel);

        frame.pack();
        frame.setVisible(true);
    }
}

class DrawingClass {

    public void draw(Graphics2D g2d, int w, int h) {
        g2d.setColor(Color.BLACK);
        g2d.fillOval(5, 5, w / 2, h / 2);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T15:05:24.773

@David 的答案更好，但您可以尝试使用他们[在此处显示的](https://stackoverflow.com/q/11725625/261156)[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。

# android - jQuery Mobile 在 Android 平板电脑上的性能缓慢

> ID：13991181
> 
> 赞同：2
> 
> 时间：2012-12-21T13:37:49.230
> 
> 标签：android, performance, jquery-mobile

我们正在运行一个 jquery 移动网站/web 应用程序。我们注意到，在 ipad 上，一切运行都非常流畅，但在我们的 Galaxy tab 10.1 上，性能却很差。这些页面没有什么特别之处，但是当我们单击某些东西时，它不会在 2-4 秒内执行任何操作。这导致非常糟糕的用户体验。我很确定这不是硬件，因为规格很好，但点击事件似乎有延迟。这是浏览器行为还是其他？

我们正在 Dolhpin Mini（浏览器）上进行测试，但问题也存在于默认浏览器和 chrome 中。

有没有人遇到过类似的问题，或者你能指出我正确的方向来解决这个问题吗？我知道这个问题可能听起来很模糊，但我们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:47:46.783

看看这个答案，我几个小时前就做了：[https ://stackoverflow.com/a/13986390/1848600](https://stackoverflow.com/a/13986390/1848600)

这些方法在安卓手机上得到验证，我相信同样应该转化为安卓平板电脑。您最好的选择是快速点击实施。这将减少点击延迟。

不幸的是，对于 android 平台没有完美的解决方案，特别是对于 2.X 版本。

# sass - Compass watch 编辑后在 config.rb 中生成语法错误

> ID：13991187
> 
> 赞同：1
> 
> 时间：2012-12-21T13:38:08.470
> 
> 标签：sass, compass-sass

我在我的网络服务器上使用 SASS 和 Compass。编辑我的 config.rb 文件并运行“指南针手表”后，它会引发以下错误。在编辑文件之前它没有抛出错误。这里可能出了什么问题？这可能是我的编辑器（尾声）保存文件的方式吗？还是发生了其他事情？

```
syntax error, unexpected tSTRING_BEG, expecting $end
@import "compass" 
```

**配置文件**

```
# Require any additional compass plugins here.

# Set this to the root of your project when deployed:
http_path = "/"
css_dir = "css"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "javascripts"
@import "compass"

# You can select your preferred output style here (can be overridden via the command line):
# output_style = :expanded or :nested or :compact or :compressed

# To enable relative paths to assets via compass helper functions. Uncomment:
# relative_assets = true

# To disable debugging comments that display the original location of your selectors. Uncomment:
# line_comments = false

# If you prefer the indented syntax, you might want to regenerate this
# project again passing --syntax sass, or you can uncomment this:
# preferred_syntax = :sass
# and then run:
# sass-convert -R --from scss --to sass sass scss && rm -rf sass && mv scss sass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:33:18.303

Coda 很可能正在更改文件的格式，我的赌注是 EOL（行尾）字符。我的 config.rb 具有 UNIX 换行符并可以按应有的方式进行编译（Windows 换行符也可以）。如果我将其更改为 Mac 换行符，我会收到此错误（与您的错误非常接近）：

```
$ compass watch
SyntaxError on line ["24"] of /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass/configuration/serialization.rb: /path/to/config.rb:1: syntax error, unexpected tIDENTIFIER, expecting $end
# Require any addit... 
```

我的编辑器（Notepad++）说文件被编码为 ANSI。将其更改为我的编辑器支持的其他一些编码会产生如下错误：

```
$ compass watch
SyntaxError on line ["24"] of /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass/configuration/serialization.rb: /path/to/config.rb:1: invalid multibyte char (US-ASCII)
Run with --trace to see the full backtrace 
```

# silverlight - 排队 XAP 文件下载请求

> ID：13991188
> 
> 赞同：0
> 
> 时间：2012-12-21T13:38:09.247
> 
> 标签：silverlight

我有一个超过 1000 个用户将使用的 silverlight 应用程序。XAP 每两周就会升级一次。第二天早上，所有用户都可以访问该页面，并且对于每个用户，silverlight XAP（应用程序）的副本通过浏览器下载到本地计算机。由于用户数量更多，因此可能会有更多的网络流量。我想通过确保下载 XAP 的请求是队列并且一次处理每 100 个请求来简化这一点。让我知道可能性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:05:24.663

我假设这是浏览器外的 Silverlight 应用程序？在这种情况下，它必须调用 Application.CheckAndDownloadUpdateAsync。不要在应用程序启动期间执行此操作，而是设置一个在某个随机时间（例如，0-60 分钟后）触发的 DispatcherTimer 来执行检查。

查找调用 CheckAndDownloadUpdateAsync 的任何位置并将其替换为：

```
 var timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromMinutes(new Random().Next(60));
        timer.Tick += (sender, args) =>
        {
            Application.Current.CheckAndDownloadUpdateAsync();
            timer.Stop();
        };
        timer.Start(); 
```

（我省略了连接 Application.Current.CheckAndDownloadUpdateCompleted，但这必须在计时器启动之前完成。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:10:07.357

抱歉，我看到 silverlight 应用程序在浏览器中。在这种情况下，这与 Silverlight 无关，只是关于 Web 服务器、HTML 和 HTTP。尝试重新构建问题并添加相关标签。

我认为您的策略是使用缓存控制指令来愚弄，让一些客户端拥有陈旧的副本，而另一些客户端则获得新的副本。不知道如何做到这一点（也许 javascript 可以，或者您可能需要调整 Web 服务器），但资源是 xap 还是 jpg 或其他什么都没有关系。

# java - Java 错误：缺少返回语句？

> ID：13991196
> 
> 赞同：0
> 
> 时间：2012-12-21T13:38:36.997
> 
> 标签：java

这是我的方法：

```
//usedLetters method to check if user's guess has already been guessed
private boolean usedLetters(char used[], char alphabet) throws IOException
{
   for(int x=0; x<used.length; x++){

    if(alphabet == used[x])
    {
        return true;
    }

    else
    {
        used[dataSize] = alphabet;
        return false;
    }
    }
}//End of usedLetters method 
```

IT 检查用户以另一种方法输入的字母表是否已经被猜到。如果已经被猜到，则返回真，如果还没有被猜到，则将字母表添加到已使用中，并返回假。但是错误说没有返回语句...我对一般方法不熟悉，所以我很困惑。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T13:41:05.313

万一`used.length==0`呢？然后永远不会进入for循环。

因此，您需要`return`在循环之后声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:40:12.537

如果从未输入过 for 怎么办？即`used.length == 0`（`used`是一个空数组）。在这种情况下 - 不会返回任何内容。

编译器禁止一个可以在不返回值的情况下终止的流，这就是它显示错误的原因。

* * *

另请注意，我相信即使在解决了这个问题之后 - 程序也会产生错误的结果，它只会检查 的第一个元素`used`，而不会前进到下一个元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T13:40:31.180

您应该将 移到`return false;`最后一个 之前`}`。否则它将在循环的第一次迭代中返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T13:42:45.140

当您编写代码时，该方法将始终在循环的第一次迭代时返回，而我怀疑这是否是您想要的。

我相信你应该在for之外返回false。我不确定“猜测字母”是什么意思，但我认为这就是你想要做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T13:40:24.530

```
/usedLetters 方法检查用户的猜测是否已经被猜到
private boolean usedLetters(char used[], char alphabet) 抛出 IOException
{
   for(int x=0; x

if(alphabet == used[x])
{
    return true;
}

else
{
    used[dataSize] = alphabet;
    return false;
}
} 
```

}//usedLetters方法结束

for 循环之后应该有 return 语句，目前没有 return 语句，这就是你得到错误的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T13:44:26.157

是的，以上都是对的。您最好在顶部定义返回变量，将其设置为方法体中任何您需要的值，跳出“for”循环并在最后返回一次。

# jquery - Jquery插件没有将默认值与选项合并

> ID：13991197
> 
> 赞同：3
> 
> 时间：2012-12-21T13:38:44.127
> 
> 标签：jquery, jquery-plugins

我创建了自己的 jquery 插件。它是这样设置的。

```
;(function ($)
{
    $.fn.bpeditor = function (options)
    {
        return this.each(function() 
        {
            // Merge passed options with defaults
            vars.options = $.extend({}, $.fn.bpeditor.defaults, options);

            alert(vars.options.test);
         }
     }

     var vars =
     {
         options: null
     };

     $.bpeditor.defaults =
     {
         user: 'a',
         dkey: 'b',
         side: 'c',
         test: 'd'
     };

})(jQuery); 
```

我这样称呼它：

```
$('div#canvas').bpeditor
({
    user: 'user1',
    dkey: 'dkey1'
}); 
```

如您所见，我传递了“用户”和“dkey”选项，但没有传递“测试”。测试有一个默认值，它没有在插件中设置。插件中的警报应该显示 vars.options.test 的内容，该内容应该用 $.bpeditor.defaults 的内容填充，但它会以未定义的形式返回。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T13:40:58.417

你忘了一个`.fn.`

```
$.fn.bpeditor.defaults = {
    ...
}; 
```

注意：公开您的默认选项以便可以在插件之外修改它们是不寻常的。

它们更常见的是只有插件才能访问的词法范围变量。也无需在`.each`循环内重新创建 options 变量——所有这些受影响的元素应该共享相同的选项状态：

```
(function($) {

    // only created once, shared between all instances
    var defaults = {
        ...
    };

    $.fn.bpeditor = function (options) {
        options = $.extend(true, {}, defaults, options);
        return this.each(function() {
            alert(vars.options.test);
        });
    };
})(jQuery); 
```

行`$.extend()`深复制默认值，然后将提供的选项复制到一个新的空对象中，重新使用`options`变量 - 确保`defaults`对象保持不变并且不修改传递的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:51:28.667

[小提琴棒](http://jsfiddle.net/Vjr3c/)

```
(function($) {
    $.fn.bpeditor = function(options) {
        var defaults = {
            user: 'a',
            dkey: 'b',
            side: 'c',
            test: 'd'
        };
        // Merge passed options with defaults
        options = $.extend(defaults, options);

        return this.each(function() {
            // Tooltip plugin code here
        });
    }
})(jQuery); 
```

# javascript - 将 EventListener 保存在 webstorage 中

> ID：13991198
> 
> 赞同：1
> 
> 时间：2012-12-21T13:38:47.137
> 
> 标签：javascript, html, dom-events, web-storage

是否可以将 EventListeners 保存到 webstorage？

```
var entity = document.createElement("a");
entity.addEventListener("click", function(e) {
    play(path, this.id, "audio");
    e.preventDefault();
});

function save() {
    var playlist = document.getElementById("playlist");
    localStorage.setItem("playlist", playlist.innerHTML);
    localStorage.setItem("id", id);
} 
```

这可以很好地保存元素，但是当页面重新加载时，监听器就消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:43:55.453

我对此表示怀疑，因为只能存储字符串，而且当您不知道所有用户甚至都有能力时，`LocalStorage`将事件侦听器保存到对象中似乎有点矫枉过正。`LocalStorage`

我会考虑一个伪元素存储，[类似于这里讨论的内容](http://james.padolsey.com/javascript/element-datastorage/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:14:04.963

不，绝对不是。localStorage 只存储字符串，句点。

# php - Yii 中的自定义 URL

> ID：13991200
> 
> 赞同：0
> 
> 时间：2012-12-21T13:38:57.153
> 
> 标签：php, url, yii, seo

我想在 Yii 中配置自定义 URL。我被困在最后一步。这就是我创建 URL 的方式：

```
$a->url =  Yii::app()->createUrl('view/profile',array('uid'=>$a->userid,'type'=>$a->type,'specialty'=>$specialty,'locality'=>$locality)) ; 
```

这就是我在配置文件中的规则：

```
'profile<uid:\w+>_<type:\w+>/'=>'view/profile, 
```

这工作正常，除了生成的 URL 是：

```
http://localhost/dev/profile122_doctor?specialty=Cardiology&locality=Times+Square 
```

我希望 URL 更简洁，类似于以下内容：

```
http://localhost/dev/profile122_doctor/specialty-Cardiology-near-Times-Square 
```

这可以做到吗？有什么建议么 ？顺便说一句，URL 正常工作实际上只需要 uid 和类型变量。其余信息是 SEO 所需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:11:30.950

您可以定义自己的 URL Rule 类，这样您就可以更自由地使用语法：

[在 Yii 中使用自定义 URL 规则类](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes)

# javascript - 使用 jquery.load 加载后 javascript 出错

> ID：13991201
> 
> 赞同：5
> 
> 时间：2012-12-21T13:39:07.827
> 
> 标签：javascript, jquery, jquery-load

在我的 a.html 中，我这样写：

```
<script>
function Flike()
{ jQuery('#ft').load('like.php'); }
</script> 
```

在我写的 a.html 正文中

```
window.onload = Flike()
```

like.php 是：

```
echo " <script> var e = document.createElement('script');
e.async = true;
e.src = '/facebook/like.js';
document.getElementById('ft').appendChild(e);
</script>
";} 
```

仍然现在，一切都很好并且工作正常。

问题出在 like.js 中，脚本不起作用。这就像.js

我也试过没有文档准备功能......没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:43:05.390

window.onload = Flike() 错误

它应该是

```
window.onload = Flike; 
```

但是如果您使用的是 jQuery，为什么不添加它

```
$(window).load(Flike) 
```

如果你只是加载一个脚本，你为什么不使用

```
$.getScript("/facebook/like.js"); 
```

最后，如果您在页面加载后调用它，document.ready 事件将不会为这个新脚本再次触发。

# android - ASyncTask、隐藏片段、保留实例和屏幕方向更改

> ID：13991203
> 
> 赞同：3
> 
> 时间：2012-12-21T13:39:14.937
> 
> 标签：android, android-asynctask, android-fragments, android-viewpager

我的设置如下。

我有一个从我的 Activity 调用的 FragmentPagerAdapter，它加载了两个片段。这是在 onCreate 中设置的。

在 onResume 中，我调用了从数据库加载数据的 ASyncTask，然后通过加载数据侦听器在我的活动 onLoadComplete 中调用回调。

```
 @Override
public void onLoadComplete(JSONArray data) {
    // TODO Auto-generated method stub

    LocalFragment fragmentB = (LocalFragment)getSupportFragmentManager().findFragmentByTag(ListTag);
    fragmentB.setList(data);

    LMapFragment fragmentA = (LMapFragment)getSupportFragmentManager().findFragmentByTag(MapTag);

    GoogleMap our_map = fragmentA.getMap();
    fragmentA.plotP(myLocation,data);

} 
```

片段由寻呼机初始化，并在每个片段代码中设置相应的标签，例如在 LocalFragment

```
 @Override
public void onAttach(Activity activity) {
    // TODO Auto-generated method stub
    super.onAttach(activity);

    String myTag = getTag();

        ((PagerTest) activity).setListTag(myTag);
        Log.d("what",myTag);

} 
```

这允许我访问片段，在其中调用填充列表或填充地图的函数。有用。

我现在要做的是考虑屏幕方向的变化。如果在 ASyncTask 运行时方向发生了变化，应用程序就会崩溃。

正如这里所建议的：[隐藏片段](https://stackoverflow.com/questions/13977509/retaining-asynctask-from-activity-not-fragment/13977685#comment19302821_13977685)我一直在尝试实现一个隐藏片段，它可以保存我的 ASyncTask 的状态。所以我所做的就是设置它，所以在我的活动的 onResume 中我调用了一个函数

```
 static LoadDataFromURL the_data = null;
static JSONArray pub_data = null;
private static final String TAG = "RetainFragment";

public RetainFragment() {}

public static RetainFragment findOrCreateRetainFragment(FragmentManager fm) {

    RetainFragment fragment = (RetainFragment) fm.findFragmentByTag(TAG);
    if (fragment == null) {
        fragment = new RetainFragment();
        fm.beginTransaction().add(fragment, TAG).commit(); // add this
    }
    return fragment;
} 
```

这基本上保存了我的数据。

基本上这意味着如果我旋转我的屏幕，我不会再次调用我的 ASyncTask .. 屏幕只是旋转.. 它工作得很好。

但是，如果我返回主菜单，然后再次单击活动，屏幕将返回空白（但不会崩溃）。我的理解是数据作为一个对象保留在片段中，但是在重新加载活动时，需要再次设置数据。需要调用 IE onLoadComplete 来填充列表/地图。

所以我得出结论，如果最初在 ASyncTask 完成后我将返回的数据保存在我的隐藏片段 onRetainInstance 中，那么我可以简单地调用 onLoadComplete 并传递它..

问题是，在这种情况下，似乎还没有调用片段，因为标签是空的，并且在 onLoadComplete 中调用回调会使应用程序崩溃。

多年来，我一直在努力解决这个问题。

我的 ASyncTask 在一个单独的类中： LoadDataFromURL 我想要实现如下 - 一个 fragmentviewpager 在屏幕上旋转 ASyncTask 在旋转/附加到新活动时保留，如果它在不应该再次运行之前完成..

任何人都可以建议。

非常感谢

编辑

将我的秘密片段中的变量更改为公共变量后，一切似乎都融合在一起了。但是因为我不是 100% 确定如何/何时调用事物，所以我不完全理解它为什么起作用。

所以.. 我调用 findOrCreateRetainFragment ，它要么创建一个新的“秘密”片段，要么返回当前实例。

如果它返回当前实例，我不会再次调用我的异步任务。如果不是，我调用我的 asynctask 并加载数据。

使用此设置，当我加载活动并旋转屏幕时，它会按预期旋转。

现在，当我返回主菜单然后再次单击活动时，它会调用异步任务。

我的理解是，在旋转时不再调用异步任务，并且 viewpager 以某种方式保存了片段。

另一方面，当我返回时，我的活动被破坏，我的秘密片段也是如此，因此当我再次单击它时，它会加载数据。这基本上是我想要的..

我是否正确理解了这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:18:42.260

您在这里遇到了一些问题（我认为）。

首先，您的回调崩溃的原因是因为它们附加到一个旧的，在屏幕方向和/或推送`Activity`之后不再“存在” 。`Activity`如果您使用将`onAttach()`回调附加到您的片段，则**必须**`onDetach()`在片段从`Activity`. 然后，每当您调用回调时，请检查是否为空，这样您就不会将数据发送到死对象。

基本上，您在这里尝试使用的逻辑是：

1.  开始活动。

2.  检查您的 Fragment 是否存在。如果是的话，抓住它。否则，创建它。

3.  检索数据（如果存在）。如果没有，请等待回调。

由于回调的性质（取决于您的实现），在事件触发之前您不会收到数据。但是，如果 Activity 消失并且事件已经触发，则回调将不会执行。因此，您必须手动检索数据。使用 时`setRetainInstance()`，将其视为与您的 Activity 分离的实体会很有帮助。只要您不弹出当前`Activity`或推送新的`Activity`. 但是，您的 current`Activity`将在屏幕方向更改时被销毁，而`Fragment`不会。因此，`Fragment`不应该依赖`Activity`.

对于您可能想要研究的问题，一个更优雅的解决方案是实现 Android [Loader](http://developer.android.com/guide/components/loaders.html) API。加载器是由系统处理的便捷工具，其工作方式大致相同，但更适合异步检索数据。它们以相同的方式有效地工作。您只需启动您的加载器和系统，如果它不存在则创建一个或重新使用一个已经存在的。`LoaderManager`配置更改后，它将保留在系统中。

**编辑：**

为了回答您的编辑，我想我会解释发生了什么。这很令人费解，所以如果有什么需要澄清的，请告诉我。

*从技术上讲*，片段不是您当前运行的一部分`Activity`。当您创建 Fragment 的实例时，您必须调用FragmentManager 上的`beginTransation()`and `commit()`。FragmentManager 是一个存在于应用程序领域内的单例。FragmentManager 为您保留 的实例`Fragment`。然后 FragmentManager 将 Fragment 附加到您的 Activity（请参阅 参考资料`onAttach()`）。然后 Fragment 存在于 FragmentManager 中，这就是为什么您永远不必在应用程序中保存对它的引用。你可以打电话`findFragmentByTag/Id()`来找回它。

在正常情况下，当您的 Activity 被销毁时，FragmentManager 将分离您的 Fragment 的实例（请参阅 参考资料`onDetach()`）并让它离开。Java 垃圾收集将检测到不存在对您的 Fragment 的引用并将其清理。

当您调用 时`setRetainInstace()`，您是在告诉 FragmentManager 坚持下去。因此，当您的 Activity 在配置更改时被销毁时，FragmentManager 将保留您的 Fragment 的引用。因此，当您的 Activity 被重建时，您可以调用`findFragmentByTag/Id()`以检索最后一个实例。只要它没有保留上一个 Activity 的任何上下文，就不应该有任何问题。

传统上，人们会使用它来保持对长期存在的数据的引用（就像你一样）或保持连接套接字打开，这样手机翻盖就不会删除它。

您的 ViewPager 与此无关。它如何检索片段完全取决于您如何实现它所连接的适配器。通常，保留的 Fragment 本身没有 View，因为 View 保存了它们创建的 Activity 的上下文数据。您基本上只想将其作为数据桶来保存 View 的数据，以便在它们被创建时从中提取被充气。

# wpf - wpf datagrid扩展器显示x项

> ID：13991205
> 
> 赞同：2
> 
> 时间：2012-12-21T13:39:24.437
> 
> 标签：wpf, datagrid, expander, groupstyle

我的 中有一个`Expander`，`DataGrid`但我只想显示两个项目，然后当用户单击展开时，显示剩余项目。

那怎么办？

```
<DataGrid.GroupStyle>
    <GroupStyle AlternationCount="7" >
        <GroupStyle.ContainerStyle>
            <Style TargetType="{x:Type GroupItem}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type GroupItem}">
                            <Expander IsExpanded="False" Background="{Binding XPath=recipient_color}">                                            
                                <Expander.Header>
                                    <Label Content="{Binding}">
                                    </Label>                                                
                                </Expander.Header>
                                <Expander.Content>
                                    <ItemsPresenter/>
                                </Expander.Content>
                            </Expander>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </GroupStyle.ContainerStyle>
    </GroupStyle>
</DataGrid.GroupStyle> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:45:37.303

1.  在扩展器的标题中，添加您选择的控件，该控件能够显示列表的前 2 个项目。
2.  将上述控件的可见性绑定到扩展器的“IsExpanded”属性上，使得扩展器展开时控件隐藏（使用IValueConverter）
3.  构建扩展器的内容以显示所有项目。

这样，当扩展器未展开时，它将在标题中显示 2 个项目（根据您的喜好设置此样式）。当用户展开时，2 项消失，展开器展开并再次显示整个列表。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:28:20.147

但是，另一种需要更多摆弄xaml的方法是修改Expander控件模板。在[MSDN](http://msdn.microsoft.com/en-us/library/ms753296%28v=vs.100%29.aspx)上的控件模板中，您可以看到名为`ContentRow`. 该行的高度从 0 开始，然后`IsExpanded`属性上的触发器将其扩展到所需的高度。如果您将默认`ContentRow`高度设置为 50（或显示所需项目数量所需的任何高度），它将在展开器折叠时显示组项目的顶部。

[您可以在此处](http://msdn.microsoft.com/en-us/library/ee230084%28v=vs.100%29.aspx)阅读有关如何修改 ControlTemplates 的更多信息。

# javascript - 角度 ng-app 控制器注入

> ID：13991213
> 
> 赞同：3
> 
> 时间：2012-12-21T13:40:02.973
> 
> 标签：javascript, angularjs

我的广播服务注入控制器有问题...
我找到了这个工作教程 [http://jsfiddle.net/simpulton/GeAAB/](http://jsfiddle.net/simpulton/GeAAB/)

但我有一个像这样封装的控制器（myApp）

```
myApp.controller('ControllerZero', 
    function ControllerZero($scope, sharedService) {
        $scope.handleClick = function(msg) {
            sharedService.prepForBroadcast(msg);
        };

        $scope.$on('handleBroadcast', function() {
            $scope.message = sharedService.message;
        });
    }); 
```

我的问题是.. 如果我将这个注入器放在我的控制器下，**我不知道如何像在教程中那样注入控制器**

```
ControllerZero.$inject = ['$scope', 'mySharedService']; 
```

这让我回到控制台：

> 未捕获的 ReferenceError：未定义 ControllerZero

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:47:52.757

您需要使用数组来让 Angular 知道所有控制器变量

```
myApp.controller('ControllerZero', ['$scope', 'mySharedService',  
function ControllerZero($scope, sharedService) {
    $scope.handleClick = function(msg) {
        sharedService.prepForBroadcast(msg);
    };

    $scope.$on('handleBroadcast', function() {
        $scope.message = sharedService.message;
    });
}]); 
```

# c# - 使用 nhibernate 和内存中的 sqlite db 进行单元测试的设置有什么问题？

> ID：13991214
> 
> 赞同：3
> 
> 时间：2012-12-21T13:40:03.817
> 
> 标签：c#, sqlite, nhibernate

我有一个使用 nhibernate 和 sqlite DB 用 c# 编写的应用程序。对于单元测试，我使用 xunit 和内存中的 sqlite db。

我知道当会话关闭时内存数据库被破坏，因此为了测试，我使用单个会话并在测试期间保持打开状态。在我的大多数测试中，这都很好。

但是，在少数情况下，我需要测试同时使用`ISession`和的方法`IStatelessSession`。经过一番研究，我决定采用与[此处](http://hotgazpacho.org/2012/03/testing-with-nhibernate-in-memory/)描述的方法类似的方法。所以`IStatelessSession`是使用`ISession`'s 连接创建的，如下所示：

```
statelessSession = factory.OpenStatelessSession(existingSession.Connection); 
```

问题是，一旦更改持久保存到数据库，这似乎会导致某种冲突。如果我与`session.SaveOrUpdate(new Entity() {...})`then 进行交易，那很好，但如果我再做，`statelessSession.Get<Entity>(1)`那么它将失败，并显示错误消息“集合与任何会话无关”。

通常，此错误表明会话已关闭，但在这种情况下，两个会话仍处于打开状态且处于活动状态。

如果我这样做`session.Get<Entity>(1)`，它会按预期返回实体。最初，我认为这可能是因为会话和无状态会话在某种程度上不同步，所以我替换`session.SaveOrUpdate..`并`statelessSession.Insert(new Entity() {...})`重新运行了测试。奇怪的是，这并没有什么不同。常规会话仍然可以正常工作，并且 statelessSession 仍然损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:03:40.800

最后，我找到了解决整个问题的方法：

最终，我回到了我的原始查询（一个比上面的示例更复杂的查询，它返回多个结果）并在调试时尝试了各种方法，但都没有解决问题。然后我决定删除该查询的“位置”部分，看看它是否有任何不同。奇怪的是，确实如此。它仍然失败，但这次我得到了一个不同的异常：“无法执行查询”，这也有一个内部异常：“可能对会话进行非线程安全访问”。

整个测试在单个线程上运行，我在调试时通过查看线程视图确认了这一点。所以我想我会撞到另一堵砖墙。然而，经过一番谷歌搜索，我发现[这篇博](http://bartwullems.blogspot.co.uk/2012/06/nhibernate-error-possible-non.html)文描述了同样的问题和解决方案：只需更新到最新版本的 nhibernate！

我从 3.1.0 更新到 3.3.1（感谢 NUGet，这很容易）重新运行测试并且它工作正常。把 where 子句放回去，测试就通过了。

# java - 路径数二维数组

> ID：13991223
> 
> 赞同：0
> 
> 时间：2012-12-21T13:40:33.050
> 
> 标签：java

我必须找到从一个索引到另一个索引的最短路径。

为了推进一个索引，索引必须是一个“邻居”，在索引内的值与它旁边的值相同。我必须创建一个函数，以递归方式计算所有可能的路径，然后将所有路径放入矩阵中。

到目前为止，我的想法是在哪里使用洪水填充算法并以某种方式计算每条路径。

好的，所以我在这里坐了很长时间试图弄清楚如何做到这一点，到目前为止，我想到了这个想法：创建一个重复的数组，在每个索引中都会显示到我的初始节点的距离。我不确定我是否正确执行此操作，因此需要一点帮助，这就是我写的：

```
public static int[][] createdistancematrix(int[][] map, int i, int j) {
    int[][] temp = new int[map.length][map[0].length];
    map[i][j] = 0;
    int count = 0;
    filldistance(temp, i, j,count);

    return temp;
}

public static int[][] filldistance(int[][] temp, int i, int j,int count) {
    if ((i<temp.length) && (i>=0) && (j<temp.length) && (j>=0)) {

        temp[i][j] = count;
        count++;

        //recursive call for north east west south.

        filldistance(temp, i-1,j, count);
        filldistance(temp, i+1,j, count);
        filldistance(temp, i,j-1, count);
        filldistance(temp, i,j+1, count);
    }
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:43:19.387

您给出的二维矩阵实际上称为邻接矩阵。我认为您会发现 Dijkstra 的算法很有用，或者在您找到目标顶点后停止的广度优先搜索。

# android - “M”附近的 SQLite (1)：语法错误

> ID：13991224
> 
> 赞同：1
> 
> 时间：2012-12-21T13:40:35.090
> 
> 标签：android, database, sqlite, insert

我在android中创建了这个表：

```
 String CREATE_TABLE="CREATE TABLE " + db_NAME + " ("
                        + row_ID + " INT PRIMARY KEY AUTOINCREMENT,"
                        + row_NAME + " TEXT, "
                        + row_EMAIL + " TEXT, "
                        + row_WEBSITE + " TEXT, "
                        + row_TELEPHONE1 + " TEXT, "
                        + row_TELEPHONE2 + " TEXT, "
                        + row_TELEPHONE3 + " TEXT, "
                        + row_TELEPHONE4 + " TEXT, "
                        + row_TELEPHONE5 + " TEXT;";
    db_name.execSQL(CREATE_TABLE); 
```

我正在尝试插入以下数据：

姓名：阿拉姆·侯赛因

电子邮件：ahlam@ahlam.ahlam

网址：www.ahlam.com

电话#1：123456789

电话#2：0987654321

电话#3：

电话#4：

电话#5：

使用以下字符串：

```
 String sql_entry = String.format("Insert into %s (%s, %s, %s, %s, %s, %s, %s, %s) values (%s, %s, %s, %s, %s, %s, %s, %s);",tab_NAME, row_NAME, row_EMAIL, row_WEBSITE, row_TELEPHONE1, row_TELEPHONE2, row_TELEPHONE3, row_TELEPHONE4, row_TELEPHONE5, name, email, website, telephone1, telephone2, telephone3,telephone4, telephone5);
     ourDatabase.execSQL(sql_entry); 
```

其中：`( row_NAME, row_EMAIL, row_WEBSITE, row_TELEPHONE1, row_TELEPHONE2, row_TELEPHONE3, row_TELEPHONE4, row_TELEPHONE5)`是列名'

和 :`(name, email, website, telephone1, telephone2, telephone3,telephone4, telephone5)`是要插入数据库的数据

当我运行应用程序时，我收到一条错误消息：

```
 SQLiteLog        (1) near "M" : syntax error 
```

那么问题是什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:44:30.023

您遗漏了`'`字符以包含字符串...

查询应为：

```
Insert into %s (%s, %s, %s, %s, %s, %s, %s, %s) values ('%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s'); 
```

所以创建查询字符串本身应该如下所示：

```
 String sql_entry = String.format("Insert into %s (%s, %s, %s, %s, %s, %s, %s, %s) values ('%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s');",
tab_NAME, row_NAME, row_EMAIL, row_WEBSITE, row_TELEPHONE1, row_TELEPHONE2, row_TELEPHONE3, row_TELEPHONE4, row_TELEPHONE5, 
 name, email, website, telephone1, telephone2, telephone3,telephone4, telephone5); 
```

顺便说一句，在开发应用程序时，我总是在不使用框架的情况下记录我创建的 SQL 查询——很容易犯这样的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:44:31.447

用单引号将非数字值括起来。

```
String sql_entry = String.format("Insert into %s (%s, %s, %s, %s, %s, %s, %s, %s)"
 +" values ('%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s')",
  tab_NAME, row_NAME, row_EMAIL, row_WEBSITE, row_TELEPHONE1, row_TELEPHONE2, 
  row_TELEPHONE3, row_TELEPHONE4, row_TELEPHONE5, name, email, website, 
  telephone1, telephone2, telephone3,telephone4, telephone5); 
```

# uiscrollview - 设置可滚动区域 UISCrollView

> ID：13991226
> 
> 赞同：1
> 
> 时间：2012-12-21T13:40:39.337
> 
> 标签：uiscrollview

我试图用这个问题来回答它[限制 UIScrollView 中的可滚动区域](https://stackoverflow.com/questions/3973461/limiting-the-scrollable-area-in-uiscrollview)但是我没有成功解决我的问题。

我有一个 UIScrollView，其中一个接一个地包含 3 个 UIView。当我按下 UIView 时，我在按下的 UIView 下添加了一个 UITableView。此时我需要限制滚动区域，所以我只能滚动这个 TableView 和 UIView。再按一次 UIView 我隐藏了 UITableView，我可以在水平方向上进一步滚动。我的问题是 - 怎么可能只在我描述的那个区域实现滚动？我只知道我必须更改 UISCrollView 的 contentSize，但是当我这样做时，我会到达 UIScrollView 的开头。

# java - EntityManager JNDI - 找不到名称

> ID：13991227
> 
> 赞同：2
> 
> 时间：2012-12-21T13:40:52.207
> 
> 标签：java, tomcat, jpa, jndi, persistence.xml

嗨，我在 Tomcat 7 服务器上创建了一个 JNDI 资源，我正在尝试通过 persistence.xml 使用它，但是我收到一个错误，即在上下文中找不到资源名称。我尝试了在网上找到的其他解决方案，但对我没有用。有人看到有什么问题吗？在我的 server.xml 片段下面：

```
<GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml"/>

    <Resource name="jdbc/myds" auth="Container"
              type="javax.sql.DataSource"
              maxActive="10" maxIdle="3" maxWait="10000"
              username="boardgames" password="boardgames"
              driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
               url="jdbc:sqlserver://localhost:1433;databaseName=boardgames;integratedSecurity=true;"

            />

</GlobalNamingResources> 
```

我还添加了对 web.xml 的资源引用：

```
 <resource-ref>
    <description>DB Connection</description>
    <res-ref-name>jdbc/mydb</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence    http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="persistence_sample" transaction-type="RESOURCE_LOCAL">

    <!--
   <provider>org.hibernate.ejb.HibernatePersistence</provider>

   <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    -->
    <non-jta-data-source>java:/comp/env/jdbc/myds</non-jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServer2008Dialect"/>        <!-- Enable Hibernate's automatic session context management -->
        <property name="connection.autocommit" value="false"/>
        <property name="hibernate.show_sql" value="true"/>
    </properties>

</persistence-unit> 
```

我尝试按如下方式获取实体管理器：

```
EntityManagerFactory emf =  Persistence.createEntityManagerFactory("persistence_sample");
EntityManager em = emf.createEntityManager(); 
```

我也试过看看数据源是否不为空并且没问题（ds不为空）：

```
 Context initCtx = new InitialContext();
  Context envCtx = (Context) initCtx.lookup("java:comp/env");

  logger.error("ctx " + envCtx);

  DataSource ds = (DataSource)
                envCtx.lookup("jdbc/mydb");
  logger.error("ds " + ds); 
```

异常的堆栈跟踪：

```
1314 [http-bio-8080-exec-2] ERROR org.hibernate.connection.DatasourceConnectionProvider  - Could not find datasource: java:/comp/env/jdbc/myds
javax.naming.NameNotFoundException: Name [myds] is not bound in this Context. Unable to find [myds].
    at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at org.hibernate.connection.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java:75)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:143)
    at org.hibernate.ejb.InjectionSettingsFactory.createConnectionProvider(InjectionSettingsFactory.java:51)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:91)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2163)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2159)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1383)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:892)
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:48)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:32)
    at org.bg.engine.DBAccessQDSL.getInstance(DBAccessQDSL.java:54)
    at org.bg.Login.login(Login.java:57)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:87)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:101)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:791)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1256)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
2012-12-21 14:26:56 com.sun.faces.lifecycle.InvokeApplicationPhase execute
WARNING: #{loginBean.login}: javax.persistence.PersistenceException: [PersistenceUnit: persistence_sample] Unable to build EntityManagerFactory
javax.faces.FacesException: #{loginBean.login}: javax.persistence.PersistenceException: [PersistenceUnit: persistence_sample] Unable to build EntityManagerFactory
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:117)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:791)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1256)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.faces.el.EvaluationException: javax.persistence.PersistenceException: [PersistenceUnit: persistence_sample] Unable to build EntityManagerFactory
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:101)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:101)
    ... 23 more
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: persistence_sample] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:901)
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:48)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:32)
    at org.bg.engine.DBAccessQDSL.getInstance(DBAccessQDSL.java:54)
    at org.bg.Login.login(Login.java:57)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:87)
    ... 24 more
Caused by: org.hibernate.HibernateException: Could not find datasource
    at org.hibernate.connection.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java:79)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:143)
    at org.hibernate.ejb.InjectionSettingsFactory.createConnectionProvider(InjectionSettingsFactory.java:51)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:91)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2163)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2159)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1383)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:892)
    ... 37 more
Caused by: javax.naming.NameNotFoundException: Name [myds] is not bound in this Context. Unable to find [myds].
    at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at org.hibernate.connection.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java:75)
    ... 45 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T13:46:15.940

在资源部分中，您编写了“myds”和资源引用“mydb”。看一下：

```
<Resource name="jdbc/myds" auth="Container" 
```

# sharepoint-2007 - 操作中止（HRESULT 异常：0x80004004 (E_ABORT)）共享点

> ID：13991233
> 
> 赞同：2
> 
> 时间：2012-12-21T13:41:10.787
> 
> 标签：sharepoint-2007, moss

突然我的共享点站点显示此错误“操作中止（HRESULT 异常：0x80004004（E_ABORT））”

我在 MOSS 2007（版本 12.0.6425.1000）和 SQL Server 2008 R2 上运行我的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:22:53.737

我遇到了类似的错误，但在使用**SQL 2005**作为数据库的**Windows Server 2003 SP2**上运行**SharePoint 2007 。**这是一个所有用户都通过域访问 SharePoint 内部网的组织环境，因此我授予对帐户访问权限的访问权限作为对 SharePoint 内容数据库、搜索数据库的访问权限，从而消除了错误。****`NT AUTHORITY\NETWORK SERVICE``db_owner`****

# java - 未知错误 - 声纳日食插件

> ID：13991235
> 
> 赞同：0
> 
> 时间：2012-12-21T13:41:21.350
> 
> 标签：java, maven, sonarqube

我已经在 eclipse Juno 中安装了声纳 eclipse 插件。我将 groupid 和 artifactid 放入正确的行中，但是出现错误：

> 未知异常

如何在eclipse中正确配置声纳插件？

![在此处输入图像描述](../Images/87179117d5fd0d3241d91bb03a4da7a3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:53:07.420

您需要在服务器上安装 Sonar（或在您的机器上运行以进行测试）。然后，您需要在 Eclipse 属性中对其进行配置，并从关联声纳对话框的下拉列表中选择它（除非它在您的机器上运行，在这种情况下，它已经从下拉列表中可用）。

在将项目与声纳相关联之前，您需要对该项目运行声纳分析（通常使用 maven）。查看[声纳文档](http://www.sonarsource.org/support/documentation/)以获取更多信息。

# php - Facebook PHP API getLogOutUrl（）不起作用

> ID：13991236
> 
> 赞同：1
> 
> 时间：2012-12-21T13:41:24.067
> 
> 标签：php, redirect, facebook-php-sdk, logout

我在 page.php 上有一个用作链接的注销按钮，单击时会将用户定向到 logout_facebook.php。问题是永远不会发生注销，而只是将用户引导到 Facebook 主页。我该如何解决？

示例代码

```
<?php

    require_once('engine/facebook/facebook.php');

    //Application Configurations (Facebook)
    $app_id ="XXXXXX";
    $app_secret="XXXXXXX";

    $facebook = new Facebook(array(
        'appId'     => $app_id,
        'secret'    => $app_secret,
        'cookie'    => true
        ));

    $logoutUrl = $facebook->getLogoutUrl(array( 'next' => ($fbconfig['baseurl'].'logout.php') ));

    //on logout page
    setcookie('fbs_'.$facebook->getAppId(), '', time()-100, '/', '.mydomain.com');
    session_destroy();
    header('Location:'.$logoutUrl);     
    /*$facebook->destroySession();
    header('Location: http://mydomain.com/index.php?lo=facebook&ad=1');*/

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T11:26:17.540

尝试使用 $facebook->destroySession(); 而不是 session_destroy();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:32:29.493

如果它重定向到 Facebook 主页和之后`facebook.com/logout.php`，这意味着在您的应用设置或`next`参数中未正确配置某些内容。

重新检查您的应用设置以查看是否允许您重定向到其他网址。

# spring - 通过 ProviderSigninController 向linkedin请求额外的权限

> ID：13991239
> 
> 赞同：0
> 
> 时间：2012-12-21T13:41:32.190
> 
> 标签：spring, spring-social

我正在使用spring social使用链接登录，我需要请求额外的权限，我对其他提供商（facebook，twitter）使用范围变量它工作正常，但对于链接它不能，因为Linked-在使用 oAuth 1.0 时，它不受支持 - 我可以在其他论坛中看到，我敢肯定有一种解决方法，你能推荐一个吗？

```
<form id="linkedin-login" action="signin/linkedin" method="POST">
    <input type="hidden" name="scope" value="r_fullprofile"  />
</form> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:31:33.410

嗨，我正在回答我自己的问题，这可能对其他人也有一些帮助。

Linkedin 使用 OAuth 1.0a。OAuth1.0 官方不支持授权范围，它只是 OAuth1.0 的 Linkedin 扩展，由于 Spring social 遵循 OAuth1.0 的标准，范围不是开箱即用的，它需要覆盖/添加的工作新的 ProviderSigninController、连接控制器和 Connectsupport（getAccessToken 方法）类。

更多详情： http: [//forum.springsource.org/showthread.php?129684-Linked-In-member-permissions](http://forum.springsource.org/showthread.php?129684-Linked-In-member-permissions)

# regex - 正则表达式在 TitleCase 中转换单词

> ID：13991240
> 
> 赞同：0
> 
> 时间：2012-12-21T13:41:42.007
> 
> 标签：regex, vim, case

我使用这个正则表达式来转换 TitleCase 中的单词并确认每个替换：

```
:s/\%V\<\([A-Za-z0-9àäâæèéëêìòöôœùüûçÀÄÂÆßÈÉËÊÌÖÔŒÙÜÛ]\)\([A-Za-z0-9àäâæèéëêìòöôœùüûçÀÄÂÆßÈÉËÊÌÖÔŒÙÜÛ]*\)\>/\u\1\L\2/gc 
```

然而，这也匹配已经在 Titlecase 中的单词。

有谁知道如何更改上述正则表达式以跳过已经在 TitleCase 中的单词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:54:41.053

```
:s/\%V\<\([a-z0-9àäâæèéëêìòöôœùüûç]\)\([A-Za-z0-9àäâæèéëêìòöôœùüûçÀÄÂÆßÈÉËÊÌÖÔŒÙÜÛ]*\)\>/\u\1\L\2/gc 
```

似乎可以解决问题，在这里。

因为您在第一个字母捕获组中使用的范围内明确包含大写字符，所以您的模式将同时*匹配* `foo` *和* `Foo`。从该范围内删除大写字符似乎可以解决您的直接问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T02:59:01.357

要仅匹配非大写单词，您希望匹配以 (a) 以小写字母开头或 (b) 以*两个*大写字母开头的单词。以下将做到这一点（添加重音字母和数字来品尝）：

```
\b([A-Z])([A-Z][A-Za-z]*)|\b([a-z])([a-zA-Z]+) 
```

但是有些单词在组`\1`and中匹配，而`\2`另一些在`\3`and中匹配`\4`。我不使用 vim，所以我不能说它是否会让你用这种模式代替。（例如，`\u\1\3\L\2\4`；四个中只有两个是非空的）

# arrays - 在 python 中，这将是与列表进行比较/测试的最快方法

> ID：13991243
> 
> 赞同：1
> 
> 时间：2012-12-21T13:42:07.513
> 
> 标签：arrays, optimization, data-structures, comparison, python-3.2

在我的代码中，列表最终将所有元素都为空。这是我正在测试的，所有元素==''。

列表的大小可以随输入而变化。

我正在考虑的两个测试是相等测试，并使用 list.count() 函数。这在运行时会更快。

我是 python 新手，所以我对后台的操作方式并不熟悉。我的假设是，如果不迭代检查每个元素进行比较，**测试 2会更快。**由于列表中的数据可以从空字符串到超过 100 个字符的字符串不等，因此由**Test 1** count('') 完成的简单检查也可能非常快。

设置我的变量以进行测试的示例代码。

```
mylist = [''] * 33
testlist = []
testlist.extend('' * mylist.__len__())
testlist.count('')
33
mylist.count('')
33 
```

以下哪个测试会更快。

**测试 1**

```
if mylist.count('') == 33:
    do some thing

while mylist.count('') !=33:
    do some thing 
```

**测试 2**

```
if mylist == testlist:
    do some thing

while mylist != testlist:
    do some thing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:55:29.173

您没有描述您实际尝试解决的问题，但是您是否将列表条目设置为空字符串以将它们标记为已完成，以便您不再处理它们？

如果是这种情况，那么您可以通过使用不同的数据结构获得更好的结果。例如，也许您可​​以在使用[`set`](http://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset), 和[`remove`](http://docs.python.org/3/library/stdtypes.html#set.remove)项目后使用它们。然后你可以测试一下你的集合是否为空，这是一个常数时间的操作。

但我们需要更多地了解您正在尝试做的事情，以便能够为您提供帮助。

如果您只是想弄清楚两种实现中的哪一种更快，Python 的[`timeit`模块](http://docs.python.org/3/library/timeit.html)包含用于定时执行代码的函数。例如：

```
>>> from timeit import timeit
>>> l1 = [''] * 1000
>>> l2 = [''] * 1000
>>> timeit(lambda:l1 == l2)
4.670141935348511
>>> timeit(lambda:l1.count('') == len(l1))
4.50224494934082 
```

所以看起来这两种方法在这种情况下几乎完全相同（你可能已经猜到了）。但是在列表没有满空字符串的情况下，`==`速度更快（因为当它发现不匹配时，它可以`False`立即返回，而无需检查任何更多列表元素）：

```
>>> l3 = ['a'] + [''] * 999
>>> timeit(lambda:l3.count('') == len(l3))
4.379799842834473
>>> timeit(lambda:l3 == l2)
0.19073486328125 
```

# javascript - 初始化脚本

> ID：13991246
> 
> 赞同：1
> 
> 时间：2012-12-21T13:42:12.817
> 
> 标签：javascript, jquery

我需要学习如何初始化脚本。我有谷歌它，但并不真正理解它。

现在我有一个 div 中的切换脚本，整个 div 被加载到另一个页面。切换脚本有效，但在加载时无效。

```
$(".class").click(function () {
$(this).toggleClass("add_class");
}); 
```

如果有人有时间，你能解释一下如何初始化这个脚本吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:43:50.663

您应该将此脚本放在 document.ready 调用中。

例如。

```
$(document).ready(function() {
    //Put your code here
}); 
```

如果我误解了您的问题，而您的实际意思是：

通过 AJAX 调用加载脚本后如何执行脚本。然后看到这个问题：[在jQuery Ajax Call之后执行脚本](https://stackoverflow.com/questions/3514096/executing-script-after-jquery-ajax-call)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:44:53.920

您是在页面上加载元素后调用它吗？

您应该使用[`on()`](http://api.jquery.com/on/)jQuery 1.7+

```
$(document).on("click", ".class", function () {
    $(this).toggleClass("add_class");
}); 
```

如果你想保持你的语法，你必须在元素被渲染之后做，或者在 document.ready 上做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:08:28.307

简单而最好的

```
$(function(){
    //your code here...
    $(".class").click(function () {
       $(this).toggleClass("add_class");
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T14:31:30.743

我想你正在使用 jquery.ajax 来获取 div？

如果是这样，您应该能够在 jquery.ajax 调用的成功函数中添加侦听器：

```
$('#result').load('ajax/test.html', function() {
  $("#result .class").click(function () {
    $(this).toggleClass("add_class");
  });
}); 
```

# sql - 如何在 SQL Server 的 Case 语句中执行多个 If 语句

> ID：13991247
> 
> 赞同：0
> 
> 时间：2012-12-21T13:42:12.940
> 
> 标签：sql, sql-server-2008, sql-server-2005

我想在 sql server 的情况下创建多个 if else 语句。有可能吗，请给我一个例子。在 c# 中，您可以在 case 中编写多行语句。

在 SQL Server 中是否可以像 C# switch case 一样。

我想把下面的代码放在案例循环中

```
IF @SegmentId > 0 and @AttributeName IS NOT NULL   
begin
  select AttributeID,Attribute_key from AttributeMaster 
  where AttributeTypeId =@AttributeType and SegmentId=@SegmentId 
  and Attribute_key   like '%'+@AttributeName+'%' order by AttributeID
end

else IF @SegmentId = 0 and NULLIF(@AttributeName, '') IS NULL   
begin
  select AttributeID,Attribute_key from AttributeMaster 
  where AttributeTypeId =@AttributeType  order by AttributeID
end

else IF @SegmentId > 0 and NULLIF(@AttributeName, '') IS NULL   
begin
  select AttributeID,Attribute_key from AttributeMaster 
  where AttributeTypeId =@AttributeType and SegmentId=@SegmentId  
  order by AttributeID
end 
```

我需要实现`@AttributeTypeId`is 1 然后不同的条件。`my@AttributeId`从`1 to 5`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:11:17.223

如果您正在寻找 Tsql`CASE`及其工作原理；

```
--(1) Simple case
case X when 1 then 'X is 1' 
       when 2 then 'X is 2' ...
       else 'X is not 1 or 2' end as colName

--(2) Searched case
case when X < 1 then 'X is less than 1' 
     when X = 1 then 'X is 1' ...
     else 'X is greater than 1' end as colName 
```

我想你的整个东西都可以放`into a single query`；

```
select AttributeID, Attribute_key 
       --uncomment next line if needed   
       --,case AttributeID when 1 then 'A' when 2 then 'B' ... end 
from  AttributeMaster
where AttributeTypeId =@AttributeType and 
      SegmentId= isnull(nullif(@SegmentId,0),SegmentId) and
      Attribute_key like 
           case when  @SegmentId > 0 and @AttributeName is not null 
           then '%'+@AttributeName+'%' else Attribute_key end
      --uncomment if filter needed
      --and AttributeID <6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:21:32.873

您可以使用下面的 sql 查询来完成问题中提到的所有 if/else 条件

```
select AttributeID,Attribute_key from AttributeMaster 
where AttributeTypeId =@AttributeType 
and (@segmentId = 0 or SegmentId=@SegmentId)
and (NULLIF(@AttributeName, '') IS NULL OR 
         Attribute_key   like '%'+@AttributeName+'%') 
order by AttributeID 
```

# python - Python 对象初始化性能

> ID：13991248
> 
> 赞同：2
> 
> 时间：2012-12-21T13:42:13.833
> 
> 标签：python

我只是在做一些快速的性能测试，我注意到一般初始化列表比显式初始化慢大约四到六倍（这些可能是错误的术语，我不确定这里的术语）。例如：

```
>>> import timeit
>>> print timeit.timeit('l = list()', number = 10000000)
1.66420578957
>>> print timeit.timeit('l = []',     number = 10000000)
0.448561906815 
```

与元组和整数类似：

```
>>> print timeit.timeit('l = tuple()', number = 10000000)
1.10791182518
>>> print timeit.timeit('l = ()',      number = 10000000)
0.23167181015

>>> print timeit.timeit('l = int()', number = 10000000)
1.3009660244
>>> print timeit.timeit('l = 0',     number = 10000000)
0.232784032822 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T13:45:16.033

使用[dis 模块](http://docs.python.org/2/library/dis.html)检查字节码：

```
import dis        
dis.dis(lambda: list()) 
```

产量

```
 6           0 LOAD_GLOBAL              0 (list)
              3 CALL_FUNCTION            0
              6 RETURN_VALUE 
```

尽管

```
dis.dis(lambda: []) 
```

产量

```
 7           0 BUILD_LIST               0
              3 RETURN_VALUE 
```

因此`list()`需要查找全局名称并调用对象，`[]`而不需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:44:44.690

这是因为使用文字语法，python 知道用一个字节码构建列表。调用构造函数需要查找`list`全局并改为调用它：

```
>>> def foo(): []
... 
>>> dis.dis(foo)
  1           0 BUILD_LIST               0
              3 POP_TOP             
              4 LOAD_CONST               0 (None)
              7 RETURN_VALUE        
>>> def bar(): list()
... 
>>> dis.dis(bar)
  1           0 LOAD_GLOBAL              0 (list)
              3 CALL_FUNCTION            0
              6 POP_TOP             
              7 LOAD_CONST               0 (None)
             10 RETURN_VALUE 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T13:45:48.967

不同的字节码。以`list()`vs`[]`为例：

```
l = list():
  1           0 LOAD_GLOBAL              0 (list)
              3 CALL_FUNCTION            0
              6 STORE_FAST               0 (l)

l = []:
  1           0 BUILD_LIST               0
              3 STORE_FAST               0 (l) 
```

前者涉及名称查找`"list"`和函数调用。

# forms - Zend 2 - 带有方括号的表单元素名称

> ID：13991253
> 
> 赞同：0
> 
> 时间：2012-12-21T13:42:32.007
> 
> 标签：forms, element, zend-framework2, brackets

我觉得 Zend 已经决定放弃让表单元素的名称带有方括号的可能性，例如 something['otherone']。

在 Zend Framework 1 中，如果您想显示样式的输入元素，您可以制作 $element->setBelongsTo ('piece')

我阅读了文档并搜索了 ZF2 代码，这个功能似乎已经消失了。

为什么？！

Zend Framework 2 中是否有一种方法可以做到这一点。

马修，如果你路过这里，我需要你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:15:52.007

在 Zend Framework 1 中，您必须使用 setBelong to 方法，因为 zf 正在从属性名称中删除括号。在 ZF2 中，您可以在名称中使用括号，因此您不需要使用 setBelong to 方法。

```
use Zend\Form\Element;
use Zend\Form\View\Helper;

$text = new Element\Text('something[otherone]');

$viewHelperElement = new Helper\FormText();
echo $viewHelperElement->render($text); 
```

输出将是：

```
<input type="text" name="something[otherone]" value=""> 
```

# c - c中的for语句中的声明

> ID：13991257
> 
> 赞同：2
> 
> 时间：2012-12-21T13:42:40.477
> 
> 标签：c, declaration

> **可能重复：**
> [C：for loop int 初始声明](https://stackoverflow.com/questions/1287863/c-for-loop-int-initial-declaration)

我们可以在 C 编程的语句中声明一些变量`for`吗？如果可以，我们将在哪个版本的 c 标准中找到该功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:47:02.310

是的，您可以从 c99 标准开始。直接编译代码：

```
int main()
{
   for(int i = 0; i<10; i++)
     printf("%d\n", i);
   return 0;
} 
```

with（默认的“gnu89”）`gcc`会给你答案：

> 在函数中`main`：
> 错误：仅在 C99 模式下才允许使用“for”循环初始声明
> 注意：使用选项 -std=c99 或 -std=gnu99 编译代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:50:41.273

在 C89/C90 中，所有声明都必须出现在块的开头：

```
/* valid in C89/C90 */
printf("Hello\n");
{
    int i;
    for (i = 0; i < 10; i++) {
        int j = i % 3;
        printf("%d\n", j);
    }
} 
```

从 C99 开始，您可以混合声明和语句，并在 a 的第一部分声明变量`for`：

```
/* valid in C99 */
printf("Hello\n");
int whatever;
for (int i = 0; i < 10; i++) {
    int j = i % 3;
    printf("%d\n", j);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T13:45:02.023

在纯 C 中，您不能在语句中声明变量`for`。此功能仅在 C++ 中可用。在 C 中，所有变量都必须在代码块的开头声明

# c - 未绘制顶点数组

> ID：13991258
> 
> 赞同：3
> 
> 时间：2012-12-21T13:42:41.133
> 
> 标签：c, opengl

我有一个有 8 个顶点的顶点数组，每个顶点由两个坐标表示。我已经使用`glVertexPointer`函数在函数绘图中使用这个数组`glDrawArray`。

```
void datasource()
{
    GLfloat vertex1[]={ -1.000000, 0.500000, -0.700000, 0.500000, -1.000000, 0.800000, -0.700000, 0.800000, -0.400000, 0.500000, -0.100000, 0.500000, -0.400000, 0.800000, -0.100000, 0.800000 };

    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(2, GL_FLOAT, 0, vertex1);
}

void display()
{
    frame++;

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glDrawArrays(GL_LINES, 0, 2);

    glutSwapBuffers();
    glutPostRedisplay();
} 
```

当我尝试使用前两个顶点画线时，我看不到任何东西，但它应该出现水平线。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:44:41.217

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:53:07.543

`glVertexPointer`每次调用函数时都`display`应该使用函数

# java - 使用 java Itext 获取字体颜色

> ID：13991262
> 
> 赞同：0
> 
> 时间：2012-12-21T13:42:55.110
> 
> 标签：java, pdf, itext

我正在使用 Itext，我需要提取 PDF 中特定标题的字体颜色，关于如何执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:54:17.280

在使用 iTextSharp（iText 的 .NET 端口）过去 6 个月后，我将尝试解释如何实现您想要的。虽然这不是一个准确的答案，但它很可能会引导您到一个可以做额外功课来实现它的地方。

PDF 格式保持内存中的“图形状态”，大致是一组指定当前颜色、笔粗细、线条样式等的值。所有渲染操作（包括文本渲染）都使用此图形状态来确定该操作将输出什么生产。例如，您可以将当前颜色设置为蓝色，然后画几条线，所有这些线都将是蓝色的。因此，您不必为每个线条绘制操作指定线条颜色。

对于着色，我们在图形状态中有两个变量：当前**描边**颜色和当前**非描边**颜色。描边颜色用于一维绘图，如线条、边框等（如果您使用过 GDI+，这大致是 System.Drawing.Pen），而非描边颜色用于 2D 操作，如填充（在GDI+，一个 System.Drawing.Brush）。我相信文本着色是使用非描边颜色完成的，因为字形是 2D 对象。

对，既然你知道了理论部分，这就是你需要做的。`PdfContentStreamProcessor`在 iText 源代码中定位类。在这里，您会发现`PopulateOperators()`列出了 iText 当前可以解析的所有运算符。与着色相关的操作符有很多，这里不能一一概括（详见PDF规范），总之`CS`and`cs`操作符设置当前的颜色空间（支持RGB、Grayscale、CMYK、 L*a*b 和其他）`SC`和`sc`设置当前描边和非描边颜色的运算符。同样，关于设置颜色空间，然后根据您应该查看 PDF 规范文档的当前颜色空间解释描边和非描边颜色的值，有很多细节。此外，还有一些*推送和弹出图形状态*操作会使事情变得更加复杂。

简而言之，您需要添加对运算符的支持，包括`CS`, `cs`, `G`, `g`, `RG`, `rg`, `K`, `k`, `SC`, `sc`,`SCN`和`scn`. 目前 iTextSharp 目前不支持它们中的大多数，因此您必须为它们中的每一个编写自己的类（实现`IContentOperator`接口）。

[您可以从这里](http://cjhaas.com/blog/2011/07/)获得很多实施帮助。尽管这个人并没有详细地实现它（我可以说这将是很多工作，尤其是处理 PDF 支持的所有颜色空间），这应该给你一个很好的起点。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:35:19.770

[**PDF Clown**](http://sourceforge.net/projects/clown/)（原生 Java 和 .NET）支持***文本样式**信息提取*（包括文本颜色和文本渲染模式）*和几乎所有*开箱即用的图形运算符（参见其代码库中的 TextInfoExtractionSample）。

这个开源/免费软件库具有*多功能**内容引擎***（请参阅 ContentScanner 类），能够执行不同的任务，例如内容解析、内容提取、内容编辑、内容呈现和打印（目前最后一个部分开发）。

*它的**对象模型**是丰富且有凝聚力的*（只有 2 个基类管理所有逻辑：*PdfObject*位于原始低级 PDF 类型（如字典、数组、数字...）的根；*PdfObjectWrapper*位于专用高级的根级 PDF 实体（例如页面、注释、书签...）），反映了官方 PDF 规范而没有其古怪之处。

我是它的开发者，所以我可能会有偏见，但如果你想尝试一下，我建议你从 sourceforge.net 上的 SVN 存储库中查看，因为 0.1.2 版本（目前正在开发中）引入了很多增强功能在最后一个版本。

# c# - 如何从 C# 中的方法获取多个值作为返回类型？

> ID：13991269
> 
> 赞同：2
> 
> 时间：2012-12-21T13:43:50.613
> 
> 标签：c#

假设在 C# 类中有一个方法`_Abc(int a, int b)`，通常它需要 2 个参数。

是否可以从`_Abc(int a, int b)`方法中获取 4 个 int 值作为返回值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T13:44:59.947

你可以返回一个[`Tuple<int, int, int, int>`](http://msdn.microsoft.com/en-us/library/dd414846.aspx). 但是，将元组作为公共 API 的一部分返回并不能提供很多信息，因此在这种情况下，我将创建一个类来保存返回值，以便您可以命名这些值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T15:41:53.860

尽管到目前为止的答案（返回元组、返回集合、返回自定义类/结构或使用 out 参数）是合理的答案，但更好的答案是：**首先不要这样做**。返回四个东西的方法可能是一个设计糟糕的方法。

你能重新设计类型，让你有，比如说，四种不同的方法（或属性），每一种都返回一个东西吗？可能有更好的模式供您使用。你能更详细地解释你的场景吗？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-21T13:47:11.313

您可以返回自定义类型，这是最灵活和可扩展的方法。

```
public static Foo GetFoo(int a, int b)
{
    Foo foo = new Foo();
    foo.A = 1;
    foo.B = 2;
    foo.C = 3;
    foo.D = 4;
    return foo;
} 
```

这是伪类

```
public class Foo
{
    public int A{ get; set; }
    public int B{ get; set; }
    public int C{ get; set; }
    public int D{ get; set; }
} 
```

另一种方法（使用 .NET 4）是使用[`Tuple`](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)

```
public static Tuple<int,int,int,int> GetFoo(int a, int b)
{
    return Tuple.Create(1,2,3,4);
} 
```

由于您以这种方式阅读属性，因此它不像类方法那样可读：

```
var values = GetFoo(1, 2);
int A = values.Item1;
int B = values.Item2;
int C = values.Item3;
int D = values.Item4; 
```

所以一个元组有点匿名。

如果您只想返回一个或两个附加参数，您也可以[`out`](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.80%29.aspx)在`TryParse`方法中使用参数。

```
DateTime dt;
String str = "01.01.2013";
if(DateTime.TryParse(str, out dt))
{
    // so this method returns two variables:
    // a bool as return value and a DateTime as out parameter
    Console.WriteLine("Year: " + dt.Year);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T13:46:22.427

除了李的回答，你可以添加一些`ref`或`out`参数，即：

```
_Abc(int a, int b, out int c, out int d, out int e, out int f) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T13:48:56.253

您也可以使用 out 参数创建这样的函数。

```
public void _Abc(int a, int b, out res1, out res2, out res3, out res4)
   {
    res1 = 1;
    res2 = 2;
    res3 = 3;
    res4 = 4;
   } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T13:58:40.910

如果可以更改方法，则可以使用 out 参数。[http://msdn.microsoft.com/en-us/library/t3c3bfhx(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/t3c3bfhx(v=vs.80).aspx)

```
_Abc(int a, int b, out int c, out int d, out int e, out int f){
c=1;
d=2;
e=3;
f=4;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T14:04:00.490

如果您要返回 4 个完全不同的东西，那么最好创建一个新类型。例如，如果您要返回一个新创建的形状的高度、宽度、顶部和底部值，那么您应该创建一个类，以使用正确的变量名称保存所有这些值。

如果您持有 4 个相同类型的东西，那么将它们全部放入某种集合中可能是有意义的。例如，如果四个数字代表四种不同形状的面积，那么返回 a`List<int>`或 an 是有意义的`int[]`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T14:12:15.947

我认为您需要简单的答案，对吗？

尝试理解这个简单的代码（只需复制和粘贴）：

```
class Class1
{
    private List<int> _Abc(int a, int b)
    {
        // do job

        int x = 128, y = 256, z = 512;
        List<int> returns = new List<int>();
        returns.Add(x);
        returns.Add(y);
        returns.Add(z);

        return returns;
    }

    public void anotherMethod()
    {
        List<int> simple = new List<int>();
        simple = _Abc(55, 56);

        int[] _simple = simple.ToArray();
        for (int i = 0; i < simple.Count; i++)
        {
            Console.WriteLine("" + _simple[i]);
        }
        //Console.ReadKey();
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-21T13:47:28.737

您可以将它们作为[输出参数返回](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.71%29.aspx)

# php - 正则表达式从函数参数获取字符串？

> ID：13991272
> 
> 赞同：0
> 
> 时间：2012-12-21T13:43:58.560
> 
> 标签：php, regex, string

谁能帮我解决正则表达式问题。我正在制作一个脚本来遍历我所有的 .php 文件并将所有字符串传递给某个函数。我需要匹配这种情况：

```
/* Double quotes */
function("some string"); // Match: some string
function("some \"string\""); // Match: some "string"
function("some 'string'"); // Match: some 'string'

/* Single quotes */
function('some string'); // Match: some string
function('some \'string\''); // Match: some 'string'
function('some "string"'); // Match: some "string" 
```

函数也可以接受字符串后面的参数，所以也需要匹配这种情况：

```
/* Additional parameters */
function("some string", "param"); // Match: some string
function("some string", $param); // Match: some string 
```

所以本质上，param 可以是字符串（带引号或双引号）或不带引号的变量。我只需要从函数的第一个参数获取字符串，无论第二个参数是否存在或以任何方式被引用......

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:17:09.597

而不是使用正则表达式（你自己），你可以使用一个 php 解析器，它给你某种[AST](https://en.wikipedia.org/wiki/Abstract_syntax_tree)，例如在[生成 PHP 源文件的 AST 中接受的答案](https://stackoverflow.com/questions/6153634/generate-ast-of-a-php-source-file)

```
<?php
require 'path/to/PHP-Parser-master/lib//bootstrap.php';

class MyNodeVisitor extends PHPParser_NodeVisitorAbstract
{
    public function beforeTraverse(array $nodes) {}
    public function enterNode(PHPParser_Node $node) { }
    public function leaveNode(PHPParser_Node $node) { 
        if ($node instanceof PHPParser_Node_Expr_FuncCall) {
            if ( 'foo'===(string)$node->name ) {
                foreach( $node->args as $arg ) {
                    echo $arg->value->value, "\n";
                }
            }

        }
    }
    public function afterTraverse(array $nodes) {}
}

$parser = new PHPParser_Parser(new PHPParser_Lexer);
$nv = new MyNodeVisitor;
$traverser = new PHPParser_NodeTraverser;
$traverser->addVisitor($nv);

try {
    $stmts = $parser->parse( data() );
        $stmts = $traverser->traverse($stmts);

} catch (PHPParser_Error $e) {
    echo 'Parse Error: ', $e->getMessage();
}

function data() {
    return <<< eot
<?php   
/* Double quotes */
foo("some string"); // Match: some string
foo("some \"string\""); // Match: some "string"
foo("some 'string'"); // Match: some 'string'

/* Single quotes */
foo('some string'); // Match: some string
foo('some \'string\''); // Match: some 'string'
foo('some "string"'); // Match: some "string"   
eot;
} 
```

印刷

```
some string
some "string"
some 'string'
some string
some 'string'
some "string" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:27:55.863

这里我写了一个脚本`sed`。将其保存在文件中`file.sed`

```
bs
:gf
s:,.*$::
s:^.::
s;.$;;
s:[\]\(["']\):\1:g
p;d
:s
/.*(\([^)]*\).*/ s::\1:
tgf
d 
```

接下来，运行它`sed -f file.sed FILE.py`：

```
for x in `find -name \*.py`; do sed -f file.sed $x; done 
```

编辑：

可以用 oneliner sed 命令替换脚本，但是调用它以便调试它的功能非常清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:56:10.580

这是一个可以帮助您入门的快速草图：

```
while (readline) {
    my ($matched) = m{
        \b function \s* \( \s*
        (
            " (?: [^"\\] | \\ .)* "
        |
            ' (?: [^'\\] | \\ .)* '
        )
    }sx or next;
    my $value = php_unescape $matched; # XXX: write me
    print $value, "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T14:02:57.530

您的特定示例已成功处理...

```
preg_match_all('#\\(\\s*("((\\\\.|[^"])+)"|\'((\\\\.|[^\'])+)\'),?#s', $test, $matches); 
```

这是[**ideone 演示**](http://ideone.com/cbA9FK)。

说明：我们尝试匹配左括号（谢天谢地，它是 PHP；在 Ruby 中要困难得多），然后是任意数量的空白字符，然后是...

*   任何一个`"(\\.|[^"])+"`
*   或者`'(\\.|[^'])+'`

... 后跟可选逗号。

每个序列都涵盖“特殊字符”（用斜杠转义）和“普通字符”（与分隔符不同）。

# logging - Logger 和 LogWriter 的区别

> ID：13991273
> 
> 赞同：5
> 
> 时间：2012-12-21T13:44:01.400
> 
> 标签：logging, customization, enterprise-library-5, tracelistener

我正在使用 Microsoft Enterprise Library 5.0 Logging 块，我想知道 LogWriter 和 Logger 类之间的区别。我有一些**自定义跟踪侦听**器，我已经构建用于我的日志记录，我想知道使用 Logger 与 LogWriter 是否会产生任何影响。

来自 MSDN [http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.logging.logwriter.aspx](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.logging.logwriter.aspx)

> 要将日志消息写入默认配置，请使用 Logger 外观。如果您需要使用自定义配置写入日志消息，请仅创建 LogWriter 的实例。

示例代码#1：

```
namespace ExampleOne
{
    using System;
    using System.Diagnostics;
    using Microsoft.Practices.EnterpriseLibrary.Common.Configuration;
    using Microsoft.Practices.EnterpriseLibrary.Logging;

    public class Program
    {
        private static LogWriter logger = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();

        public static void Main(string[] args)
        {
            try
            {
                throw new Exception("My test exception message");
            }
            catch (Exception ex)
            {
                LogEntry logEntry = new LogEntry();
                logEntry.Message = "Error: " + ex.ToString();
                logEntry.Categories.Add("General");
                logEntry.Severity = TraceEventType.Error;
                logger.Write(logEntry);
            }
        }
    }
} 
```

示例代码#2：

```
namespace ExampleTwo    
{
    using System;
    using System.Diagnostics;
    using Microsoft.Practices.EnterpriseLibrary.Logging;

    public class Program
    {        
        public static void Main(string[] args)
        {
            try
            {
                throw new Exception("My test exception message");
            }
            catch (Exception ex)
            {
                LogEntry logEntry = new LogEntry();
                logEntry.Message = "Error: " + ex.ToString();
                logEntry.Categories.Add("General");
                logEntry.Severity = TraceEventType.Error;
                Logger.Write(logEntry);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:21:56.560

获取当前实例的版本是成为更好版本的一部分，因为它更容易使用依赖注入，因此更容易进行单元测试，以防记录器写入数据库或发送电子邮件或以其他方式与一些大型外部组件交互具有与被测代码无关的行为。

另一方面，如果目标是鼓励您的团队进行日志记录，那么以最少的设置进行日志记录是更好的选择，但是配置将是配置文件驱动的，您需要一个单独的配置文件来进行测试和生产。

此外，在现实生活中的组织中，您不能总是期望操作人员是 web 配置（或者在这种情况下是 Ent Lib 配置）超级忍者，有时您需要提供打开日志记录和关闭日志记录或以其他方式更改行为（例如将错误发送到不同的邮件列表/用户列表），这将需要动态配置。当通过 UI 更改日志记录行为只是一项普通事务时，我曾在组织中工作，但更改如此之多，以至于 web.config 的一个角色采取了*上帝*的行为和变更控制委员会。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T07:11:18.743

使用静态 Logger.Write() 门面和使用 LogWriter 的 Write 方法没有区别。

这是 Logger.Write 所做的：

```
public static void Write(LogEntry log)
{
    Writer.Write(log);
} 
```

其中 Writer 是 LogWriter 的一个实例。提供 Logger.Write() 是为了向后兼容企业库的先前版本；首选方法是使用 LogWriter 实例，主要是因为增强了可测试性。

从[创建和引用企业库对象](http://msdn.microsoft.com/en-us/library/ff664535%28v=pandp.50%29.aspx#static_facades_factories)：

> 在 5.0 之前的 Enterprise Library 版本中，作为默认方法的遗留静态外观和工厂仍然可用，并且出于向后兼容的目的继续支持。但是，新代码应使用服务定位器方法或直接访问容器的技术，如本主题前面部分所述。

根据发布的异常记录示例，您可能需要考虑将异常处理块与记录一起使用，这样开发人员甚至不必记录 - 只需处理异常即可。您也许可以使用 Process 方法来包装调用，以便在被调用的方法中不需要代码：

```
ExceptionManager em = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();
em.Process( () => MethodThatMightThrow(), "My Logging Exception Policy"); 
```

另一种方法可能是将拦截与[ExceptionCallhandler](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.policyinjection.callhandlers.exceptioncallhandler.aspx)一起使用。

这两种方法，虽然从设计角度来看略有限制，但可以让开发人员完全隐藏异常日志记录，以便他们可以专注于编写应用程序而不是样板日志记录代码。

# android - 子活动关闭时更新活动

> ID：13991275
> 
> 赞同：2
> 
> 时间：2012-12-21T13:44:15.750
> 
> 标签：android, android-activity, oncreate, onresume, activity-stack

我有一个活动堆栈，如：

```
activity A make something

activity A call Activity B (without finish();)

activity B make something

activity B call activity C

activity B finish();

activity C make something

activity C finish(); 
```

我想更新活动 A 的视图，因为活动 C 所做的修改已经更新了数据库，也许我有不同的东西要在活动 A 中列出。

如果我的主要活动是这样的：

```
public class MainActivity extends ListActivity {
     private pollDataSource datasource;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        datasource = new pollDataSource(this);
        datasource.open();

        Cursor values = datasource.getAllCategorie();

        String[] categorieColumns =
            {
                MySQLiteHelper.COLUMN_NOME   // Contract class constant containing the word column name

            };

            int[] mWordListItems = { R.id.categoria_label };

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(
                getApplicationContext(),               // The application's Context object
                R.layout.single_list_item,             // A layout in XML for one row in the ListView
                values,                                // The result from the query
                categorieColumns,                      // A string array of column names in the cursor
                mWordListItems,                        // An integer array of view IDs in the row layout
                0);                                    // Flags (usually none are needed)

        setListAdapter(adapter);
    }

    @Override
        protected void onListItemClick(ListView l, View v, int position, long id) {

          TextView textView = (TextView) v.findViewById(R.id.categoria_label); 
          String text = textView.getText().toString(); 

          Intent myIntent = new Intent(MainActivity.this, domandeDiCategoria.class);
          myIntent.putExtra("categoriaName", text);
          myIntent.putExtra("categoriaId", id);
          datasource.close();
          MainActivity.this.startActivity(myIntent);

        }   

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

我必须写 onResume() 吗？并使其类似于 onCreate？或者我可以使用相同的光标、相同的适配器等来“更新”视图？什么是更好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:03:00.603

1）在A活动中定义

```
public static int UPDATE_A_ACTIVITY  = 1; 
```

2) `startActivityForResult(intentB, A.UPDATE_A_ACTIVITY); // start B from A`

3) `startActivityForResult(intentC, A.UPDATE_A_ACTIVITY); // start C from B`

4）当C活动一切正常时，完成C活动并通知A活动，他应该更新一些东西

在 C 活动中：

```
 finish();
 setResult(RESULT_OK); 
```

5）调用`setResult(RESULT_OK);`后将调用A中的下一个方法（在A活动中写这个）：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case UPDATE_A_ACTIVITY:
        if (resultCode == RESULT_OK) {
            // update what u want
        }
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:54:02.263

**在活动 C**中有一个标志。

```
boolean update = false; 
```

如果**活动 C**更改了数据库中的某些内容，则使其成为现实。

在**活动 A**

```
onResume(){

if(update){

//repopulate the list with new data
}
} 
```

# ruby-on-rails - 在不重启 Rails 服务器的情况下更新资产

> ID：13991282
> 
> 赞同：5
> 
> 时间：2012-12-21T13:44:58.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline, thin

### 所以问题基本上归结为：

您如何在无需重新启动服务器的情况下在生产 Rails 环境中有效地处理不断变化的资产？

我们遇到的问题是，我们必须重新启动运行应用程序的瘦服务器才能提供更新的 javascript 文件。

### 一些背景：

现在，我们每小时一次将来自几个长时间运行的任务的数据生成到 javascript 文件中，以便我们可以在 Rails 应用程序中使用它。
需要明确的是，我们更新/覆盖现有文件，而不是添加新文件。

生成后，我们运行这些命令以重新预编译所有资产。

`bundle exec rake assets:precompile
bundle exec rake rails_group=assets assets:clean RAILS_ENV=production`

仍然在清除浏览器缓存并重新加载页面后，我们仍然可以使用旧资产。

你们有没有类似的经历；你做了什么来解决它？

PS。祝大家节日快乐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:40:01.620

所以，我们最终做的基本上是让 Rails 也通过设置来服务静态资产

`config.serve_static_assets = true` 在`config/environments/production.rb`

并将经常更改的 javascript 数据文件放入`public/`. 这很有效，因为它还将资产和数据分离到不同的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:40:12.940

根据 Rails 指南：

> 6 缓存的工作原理 Sprockets 使用默认的 Rails 缓存存储来缓存开发和生产中的资产。

Rails 会缓存你的资源，除非你告诉它不要缓存它们。资产管道的重点是通过鼓励浏览器和服务器以及 Rails 服务器本身缓存资产来尽快提供资产。

如果您的用例涉及经常重做资产，那么资产管道可能不适合您。

# ios - 使用带有临时对象的父/子方法实现 CoreData

> ID：13991287
> 
> 赞同：2
> 
> 时间：2012-12-21T13:45:13.467
> 
> 标签：ios, core-data, nsmanagedobjectcontext

**问题：**处理一堆数据的最佳方法是什么，只有一些对象应该保存到 coredata 中的磁盘？

*这是应用程序/问题*：该应用程序将为用户提供在互联网上搜索不同项目的可能性。搜索将返回许多将显示给用户的对象。用户应该能够随时收藏这些对象中的任何一个。受青睐的对象应连接到当前登录的用户，并在应用退出后继续存在。

该应用程序将以 iOS6 为基础。

我一直在使用这些资源

*   [Apple 的核心数据编程指南：高效导入数据](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html "Apple 的核心数据编程指南：高效导入数据")
*   [在 iOS 5 上实现快速高效的核心数据导入](https://stackoverflow.com/questions/10542097/implementing-fast-and-efficient-core-data-import-on-ios-5/)
*   [iDeveloperTV CoreData 性能课程](http://ideveloper.tv/video/coredataperformancecourse.html)

我目前正在研究使用 3 个上下文的父/子方法：主上下文类型、主要上下文类型和限制上下文类型。

**当前可能的解决方案：**

*   在磁盘上执行保存的 MasterContext（具有persistentStoreCoordinator）
*   UI 使用的 MainContext（masterContext 的子级）
*   BackgroundContext 处理来自搜索的新对象。（mainContext 的子级）

因此，用户可以进行搜索，返回 100 个对象（在后台上下文中导入并保存到主上下文中）。其中 2 个对象受到用户的青睐（在主上下文中）。该对象将被添加到用户并设置为“应该保存”。（在保存时，对象将被推送到主上下文）

当我保存主上下文时，我不想将所有 100 个对象保存到磁盘。只是用户喜欢的两个对象。

所以我想在我保存mastercontext之前删除不应该保存到磁盘的对象。

```
- (void) mainContextHasSaved: (NSNotification *) notification {
NSLog(@"Lets save the master");

[_masterManagedObjectContext performBlock:^{
    //Loop through all inserted object and check if they should be saved to disk
    [self removeObjectThatShouldNotBeSavedToDisk];

    NSError *error = nil;
    BOOL saveSuccess = [_masterManagedObjectContext save:&error];

    if(saveSuccess) {
        //Do something
    }
}];
} 
```

但据我了解，当在父上下文上执行保存时，所有更改都将传播给子级。然后我将释放除已存储的两个之外的所有对象。

那么有谁知道如何解决这种问题？我可以在上面的例子中做些什么吗？或者我应该创建多个持久存储并在上下文之间移动对象？

感谢所有愿意提供帮助的人，如果需要更多信息，请询问:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:59:53.513

在一个类似的项目中，我使用了这个也受到用户青睐的解决方案：

在下载的项目中保留时间戳属性，并在时间戳超过某个阈值且未标记为收藏时将其*删除*。

# ruby-on-rails-3 - 交互式 Datagrid Ruby on Rails

> ID：13991291
> 
> 赞同：1
> 
> 时间：2012-12-21T13:45:20.573
> 
> 标签：ruby-on-rails-3, datagrid, handsontable

## 我的问题

我希望在我的 RoR 应用程序中有一个交互式数据网格（如 Excel/Numbers）。放入的数据应该更新一个 db-table-record。

做了一些研究，发现很多 Excel(/CSV) 处理器用于导入和导出 .xls(x) 和 .csv 文件。终于找到了一个基于JS、JQuery和html的数据网格视图。[在这里](http://www.handsontable.com)。这正是我所需要的。唯一的问题是，我无法让它在 RoR 中工作。

### 我尝试了什么：

**Application.html.erb**
*我用“Safari Inspector”检查了文件路径*

```
<script src="assets/lib/jquery.min.js"></script>
<script src="assets/dist/jquery.handsontable.full.js"></script>
<link rel="stylesheet" media="screen" href="assets/dist/jquery.handsontable.full.css"> 
```

**看法**

```
%div#exampleGrid

%script
  var myData = [
  ["", "Kia", "Nissan", "Toyota", "Honda"],
  ["2008", 10, 11, 12, 13],
  ["2009", 20, 11, 14, 13],
  ["2010", 30, 15, 12, 13]
  ];

  $("#exampleGrid").handsontable({
  data: myData,
  startRows: 5,
  startCols: 5,
  minSpareCols: 1,
  //always keep at least 1 spare row at the right
  minSpareRows: 1,
  //always keep at least 1 spare row at the bottom,
  rowHeaders: true,
  colHeaders: true,
  contextMenu: true
  });​ 
```

我也在**Application.js**中尝试了 JS，但也没有用。

我正在使用：
Ruby：`1.9.3p194`
Rails：`3.2.8`

有人可以指出我正确的方向/帮助我吗？
我已经尝试了几个小时，但无法让它工作。

具有相同可操作文件的普通 index.html 确实对我有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:22:23.933

您能否具体说明什么不起作用并提供错误消息？当我在我的测试应用程序中复制您的代码时，我收到错误`Uncaught SyntaxError: Unexpected token ILLEGAL`这是因为您的脚本中有一些奇怪的符号。我手动重新输入此代码，一切正常。这是我的文件（我放置的 jquery.handsontable.full.js 是 assets/javascripts 和 jquery.handsontable.full.css 我放置在 assets/stylesheets 中）： application.js：

```
//= require jquery
//= require jquery_ujs
//= require jquery.handsontable.full 
```

应用程序.css：

```
*= require_self
*= require jquery.handsontable.full 
```

在 index.html.erb 中：

```
<div id="exampleGrid"></div>
<script type="text/javascript">
var myData = [
   ["", "Kia", "Nissan", "Toyota", "Honda"],
   ["2008", 10, 11, 12, 13],
   ["2009", 20, 11, 14, 13],
   ["2010", 30, 15, 12, 13]
   ];

   $("#exampleGrid").handsontable({
   data: myData,
   startRows: 5,
   startCols: 5,
   minSpareCols: 1,
   //always keep at least 1 spare row at the right
   minSpareRows: 1,
   //always keep at least 1 spare row at the bottom,
   rowHeaders: true,
   colHeaders: true,
   contextMenu: true
   });
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:43:36.347

我一直在寻找类似的东西，最后写了自己的，作为[骨干宝石](https://github.com/charly/backbonify)。我在生产中使用它，但只在管理部分：它仍然是一个小测试版......

只是说：如果您已经熟悉骨干并且想要灵活性，那么这可能是一个好的开始。不是您正在寻找的答案，而是另一种选择。

# jquery - 通过 Jquery 调用页面时，GridView 分页不起作用

> ID：13991293
> 
> 赞同：0
> 
> 时间：2012-12-21T13:45:29.520
> 
> 标签：jquery, asp.net, ajax, gridview

我正在使用 asp.net 页面，该页面调用另一个包含 GridView 的 ASPX 页面，并在更新面板内进行分页

我通过 jquery 调用页面并且它的加载很好但是当我点击 Gridview 分页时，Grid 视图消失了

```
<div id = "divParent">

</div> 
```

```
$(document).ready(function () {
   BindDiv('divParent', 'Parent.aspx');         
});

function BindDiv(DivID, url) {
        $('#' + DivID).empty();
        $('#' + DivID).append('<img src="Images/ajax_loader.gif" alt="Loading..." />');

        $.get(url, function (response) {
            $('#' + DivID).empty();
            $('#' + DivID).append($(response).find('#ParentContainer')); 

        });
    } 
```

第二个aspx页面代码

```
<div id = "ParentContainer">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers ="true" UpdateMode ="Conditional">
    <ContentTemplate>
    <asp:GridView ID="gvParent" runat="server" SkinID="gvParent" AutoGenerateColumns="False"
        AllowSorting="true" AllowPaging="true" PageSize="10" OnPageIndexChanging="gvParent_PageIndexChanging">
        <Columns>
            <asp:TemplateField HeaderText="Customer ID" SortExpression="CustomerID">
                <ItemTemplate>
                    <asp:Label ID="lblCustomerID" runat="server" Text='<%# Eval("CustomerID") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="First Name" SortExpression="Fname">
                <ItemTemplate>
                    <asp:Label ID="lblFname" runat="server" Text='<%# Eval("Fname") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    </ContentTemplate>
    </asp:UpdatePanel>
</div> 
```

请帮助提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:02:49.010

你把一切都搞混了。
了解每个部分在这里做什么，你就会明白为什么这不起作用。

`Parent.aspx`包含 GridView 并且在她内部也有 UpdatePanel 的页面需要发回同一页面并从同一页面返回才能工作。

具有 jQuery 并加载的另一个页面`Parent.aspx`是获取结果，将其呈现到不同的页面，并且`Parent.aspx`包含的​​ javascript 永远不会运行。现在完整的代码`Parent.aspx`在其他页面中，你尝试`Parent.aspx`再次调用ajax，并在哪里得到结果？

网格视图是一个“开箱即用”的控件，需要一些标准方法才能正常工作。UpdatePanel 的设计可以容纳 GridView，并且它们可以一起工作，因为它们就是这样设计的。

如果您添加 jQuery 加载，那么您需要自定义所有逻辑，以制作自定义网格视图、自定义调用等。

如果你把它们混在一起，它们根本就行不通。

# android - Android Sherlock 操作栏 - 样式化 SearchView、共享意图图标、homeAsUpIndicator

> ID：13991296
> 
> 赞同：4
> 
> 时间：2012-12-21T13:45:42.967
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 Sherlock 操作栏，并希望将显示为已启用的主页的图标从深色更改为白色。

但我的主题需要 Holo.Light。有什么办法可以通过样式为此设置自定义图标吗？

我在操作栏中使用以下操作项

main_activity.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/action_search"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"
        android:icon="@drawable/ic_menu_search"
        android:showAsAction="always"
        android:title="Search"/>
    <item
        android:id="@+id/action_category"
        android:icon="@drawable/ic_menu_category"
        android:showAsAction="always"
        android:title="Category"/>
    <item
        android:id="@+id/action_sort"
        android:icon="@drawable/ic_menu_sort"
        android:showAsAction="always"
        android:title="Sort">
        <menu>
            <item
                android:id="@+id/action_sort_dist_nf"
                android:icon="@android:drawable/ic_menu_search"
                android:title="Distance (Near-Far)"/>
            <item
                android:id="@+id/action_sort_dist_fn"
                android:icon="@android:drawable/ic_menu_search"
                android:title="Distance (Far-Near)"/>
            <item
                android:id="@+id/action_sort_alpha_az"
                android:icon="@drawable/ic_menu_sort_az"
                android:title="Alpha (A-Z)"/>
            <item
                android:id="@+id/action_sort_alpha_za"
                android:icon="@drawable/ic_menu_sort_az"
                android:title="Alpha (Z-A)"/>
        </menu>
    </item>

</menu> 
```

活动地点.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/action_share"
        android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider"
        android:icon="@drawable/ic_menu_share"
        android:showAsAction="always"
        android:title="Search"/>

</menu> 
```

我想设置搜索视图和搜索图标的样式。以及共享意图图标。

![在此处输入图像描述](../Images/a21f8bc3ad64a02e089333d017f30f83.png) ![在此处输入图像描述](../Images/1608a29fc4249308e293f850b1eefc2c.png) ![在此处输入图像描述](../Images/0fe5e124041a5d4c614ca8232adc5020.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:48:07.377

像这样的自定义主题。

```
<style name="Theme.mTheme" parent="android:Theme.Holo.Light">
    <item name="android:homeAsUpIndicator">@drawable/image_with_whitecolorarrow</item>
    <item name="homeAsUpIndicator">@drawable/image_with_whitecolorarrow</item>
</style> 
```

对于自定义搜索视图：

**在菜单**文件夹中定义菜单布局

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/searchIcon"
        android:actionLayout="@layout/search_icon_actionview"
        android:icon="@drawable/search_icon"
        android:showAsAction="ifRoom|collapseActionView"
        android:title="Search"/>

</menu> 
```

**searchIcon**你可以使用你的自定义图标。但必须具有正确大小的操作栏中的 menuItems。

定义您的自定义 searchView 即..，**search_icon_actionview.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="5dp"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/search_image"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:clickable="true"
        android:contentDescription="Search icon"
        android:paddingLeft="5dp"
        android:paddingRight="5dp"
        android:src="@drawable/search_icon" />

    <AutoCompleteTextView
        android:id="@+id/search_editText"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_toLeftOf="@id/search_image"
        android:background="@drawable/rounded_corners_white"
        android:hint="Search"
        android:imeOptions="actionSearch"
        android:padding="5dp"
        android:singleLine="true"
        android:textColor="@color/text_dark_grey"
        android:textColorHint="@color/text_light_grey"
        android:textSize="20dp" />

</RelativeLayout> 
```

![在此处输入图像描述](../Images/d19b1c5ac22d539d21f4cb33f3dd37c6.png)

搜索图标和铃铛图标是我使用 photo shop 制作的自定义图像。

**活动代码：**

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case R.id.searchIcon:

        mEtSearchbar.clearFocus();
        (new Handler()).postDelayed(new Runnable() {
            public void run() {
                mEtSearchbar.dispatchTouchEvent(MotionEvent.obtain(
                        SystemClock.uptimeMillis(),
                        SystemClock.uptimeMillis(),
                        MotionEvent.ACTION_DOWN, 0, 0, 0));
                mEtSearchbar.dispatchTouchEvent(MotionEvent.obtain(
                        SystemClock.uptimeMillis(),
                        SystemClock.uptimeMillis(), MotionEvent.ACTION_UP,
                        0, 0, 0));
            }
        }, 100);

        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {

    inflater.inflate(R.menu.your_menu, menu);

    mSearchbar = (MenuItem) menu.findItem(R.id.searchIcon);
    View actionview = mSearchbar.getActionView();
    mEtSearchbar = ((AutoCompleteTextView) actionview
            .findViewById(R.id.search_editText));
    final ImageView searchImage = ((ImageView) actionview
            .findViewById(R.id.search_image));
    searchImage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            String s = mEtSearchbar.getText().toString();

            Intent intent = new Intent(CurrentActivity.this,
                    SearchActivity.class);
            intent.putExtra("search_string", s);
            startActivity(intent);
        }
    });

    mEtSearchbar
            .setOnEditorActionListener(new TextView.OnEditorActionListener() {

                @Override
                public boolean onEditorAction(TextView v, int actionId,
                        KeyEvent event) {
                    if (actionId == EditorInfo.IME_ACTION_SEARCH) {

                        searchImage.performClick();
                        return true;
                    }
                    return false;
                }
            });

    super.onCreateOptionsMenu(menu, inflater);
} 
```

# c++ - 为什么 putenv() 没有声明？

> ID：13991298
> 
> 赞同：1
> 
> 时间：2012-12-21T13:45:49.643
> 
> 标签：c++, qt

我正在尝试使用 GCC 4.7.1 (MinGW) 在 Windows 上编译 Qt 4.8.4。我编辑了 mkspec 以包含 C++11 功能（添加`-std=c++11`标志）以编译 Java 脚本（该模块使用[此问题](https://stackoverflow.com/questions/10354371/stdtr1-has-not-been-declared)中讨论的一些 tr1 功能）不幸的是，启用 C++11 会以某种方式`putenv()`从 C 库中删除函数，QtCore 无法在没有的情况下编译.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:09:04.893

在 Windows 上，它被命名为`_putenv`. 前导下划线正确地表明它不是标准 C 函数，而是实现扩展。你也许可以逃脱`/Dputenv=_putenv`

# iis-7.5 - 错误 405 - asmx 服务和 WCF Rest 服务不允许用于访问此页面的 HTTP 谓词

> ID：13991299
> 
> 赞同：2
> 
> 时间：2012-12-21T13:45:52.353
> 
> 标签：iis-7.5, asmx, wcf-rest, httpverbs

我们在[http://mobile.example.com](http://mobile.example.com)部署了 Web 服务。此位置同时具有 .asmx 服务和 WCF REST 服务，并且这两个服务在过去很多天都运行良好。从昨天开始，每当我们使用动词 PUT、POST 和 DELETE 发出请求时，都会收到错误消息**“不允许用于访问此页面的 HTTP 动词” 。**我们搜索了很多，阅读了很多论坛并尝试了很多东西。许多指向 WedDAV 模块，我什至禁用了该模块，即使现在我们仍然遇到问题。急需帮助。

**编辑：** DirectoryListingModule 抛出错误 405

# visual-studio - 在每次新提交时自动模拟 SVN 合并

> ID：13991300
> 
> 赞同：0
> 
> 时间：2012-12-21T13:45:52.740
> 
> 标签：visual-studio, svn, merge, versioning

我在 Windows 7 / Visual Studio 2008 下使用 TortoiseSVN 作为客户端。我的项目有很多分支，我经常遇到合并冲突/树冲突，特别是由于文件物理移动或删除。

由于我不是每天都将修订从一个分支推送到另一个分支，因此有时在合并时可能很难解决这些冲突。

所以我想介绍一种“快速失败”的方法，基于一个简单的想法：每次在特定分支中发生新的提交时，工具会自动检索提交，并尝试将其合并到一些预定义的其他分支，就像 Tortoise 的“测试”功能一样。并在发生一个或多个冲突时警告我。

一切都必须在客户端上运行，我无权访问存储库服务器。

CommitMonitor 允许用户在提交发生时得到通知，但它无助于预测进一步的合并问题。

非常感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:49:38.620

> 每次在特定分支中发生新的提交

这是提交后挂钩

> 新提交发生在特定分支中

即你已经有这个分支的工作副本

> 尝试将其合并到一些预定义的其他分支

它`svn merge`与`--dry-run option`

**加入上述注释：**

您的工具是 TortoiseSVN 或存储库（或独立的 bat 文件）中的提交后挂钩，它在您的 WC 中执行一些

`svn merge --dry-run URL-OF-BRANCH`

命令（每个测试分支一个合并）。您必须手动验证每次合并的结果（在 STDOUT 上）

# android - Android Maps API v2 画圈

> ID：13991301
> 
> 赞同：17
> 
> 时间：2012-12-21T13:45:53.207
> 
> 标签：android, google-maps, google-maps-android-api-2

使用以下代码绘制圆圈（取自 Google Play 服务“地图”示例）：

```
 PolylineOptions options = new PolylineOptions();
    int radius = 5; //What is that?
    int numPoints = 100;
    double phase = 2 * Math.PI / numPoints;
    for (int i = 0; i <= numPoints; i++) {
        options.add(new LatLng(SYDNEY.latitude + radius * Math.sin(i * phase),
                SYDNEY.longitude + radius * Math.cos(i * phase)));
    }
    int color = Color.RED;
    mMap.addPolyline(options
            .color(color)
            .width(2)); 
```

这是在世界不同地区绘制的：

![悉尼](../Images/88e4b0aee215c244c91c2c9a562de316.png) ![斯堪迪克](../Images/0f6f790f7fe91b5c0ae2fbad6c6210f2.png)

如您所见，圆圈并不是真正的圆圈，甚至第二个基本上都是椭圆。

我猜圆的“抗锯齿”取决于`int numPoints`变量中的点数。

1.  `int radius = 5`示例代码中的变量是什么？我的意思是它是什么度量？
2.  **主要问题是用给定的半径（以米**为单位）绘制漂亮的圆圈的正确方法是什么？类似于我们在 api v1 中的内容`canvas.drawCircle()`

更新 - - - - - - - - - -

好的，改进数学后，我能够画出“正确”的圆圈：

```
private void addCircle(LatLng latLng, double radius)
    {
        double R = 6371d; // earth's mean radius in km
        double d = radius/R; //radius given in km
        double lat1 = Math.toRadians(latLng.latitude);
        double lon1 = Math.toRadians(latLng.longitude);         
        PolylineOptions options = new PolylineOptions();
        for (int x = 0; x <= 360; x++)
        {                      
            double brng = Math.toRadians(x);
            double latitudeRad = Math.asin(Math.sin(lat1)*Math.cos(d) + Math.cos(lat1)*Math.sin(d)*Math.cos(brng));
            double longitudeRad = (lon1 + Math.atan2(Math.sin(brng)*Math.sin(d)*Math.cos(lat1), Math.cos(d)-Math.sin(lat1)*Math.sin(latitudeRad)));             
            options.add(new LatLng(Math.toDegrees(latitudeRad), Math.toDegrees(longitudeRad)));
        }           
        mMap.addPolyline(options.color(Color.BLACK).width(2));          
    } 
```

但是我猜圆圈的抗锯齿有点无法控制，并且在*某些*缩放级别上，圆圈可能会变得丑陋：

![在此处输入图像描述](../Images/d6b97f51a35334267e7a811ff5fc583e.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-31T08:36:53.677

Google 制作的地图 v2 很简单。下面的代码片段演示了绘制标记和圆圈以及一起更新它们的位置。

```
private Circle mCircle;
private Marker mMarker;
private GoogleMap mGoogleMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mGoogleMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.mapFragment)).getMap();
    mGoogleMap.setMyLocationEnabled(true);
    mGoogleMap.setOnMyLocationChangeListener(new GoogleMap.OnMyLocationChangeListener() {
        @Override
        public void onMyLocationChange(Location location) {
            LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude());
            if(mCircle == null || mMarker == null){
                drawMarkerWithCircle(latLng);
            }else{
                updateMarkerWithCircle(latLng);
            }
        }
    });
}

private void updateMarkerWithCircle(LatLng position) {
    mCircle.setCenter(position);
    mMarker.setPosition(position);
}

private void drawMarkerWithCircle(LatLng position){
    double radiusInMeters = 100.0;
    int strokeColor = 0xffff0000; //red outline
    int shadeColor = 0x44ff0000; //opaque red fill

    CircleOptions circleOptions = new CircleOptions().center(position).radius(radiusInMeters).fillColor(shadeColor).strokeColor(strokeColor).strokeWidth(8);
    mCircle = mGoogleMap.addCircle(circleOptions);

    MarkerOptions markerOptions = new MarkerOptions().position(position);
    mMarker = mGoogleMap.addMarker(markerOptions);
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-20T19:15:41.407

如何在 Google Maps v2（位图）中画圆

```
// 1\. some variables:

    private static final double EARTH_RADIUS = 6378100.0;
    private int offset;

// 2\. convert meters to pixels between 2 points in current zoom:

    private int convertMetersToPixels(double lat, double lng, double radiusInMeters) {

         double lat1 = radiusInMeters / EARTH_RADIUS;
         double lng1 = radiusInMeters / (EARTH_RADIUS * Math.cos((Math.PI * lat / 180)));

         double lat2 = lat + lat1 * 180 / Math.PI;
         double lng2 = lng + lng1 * 180 / Math.PI; 

         Point p1 = YourActivity.getMap().getProjection().toScreenLocation(new LatLng(lat, lng));
         Point p2 = YourActivity.getMap().getProjection().toScreenLocation(new LatLng(lat2, lng2));

         return Math.abs(p1.x - p2.x);
    }

// 3\. bitmap creation:

    private Bitmap getBitmap() {

        // fill color
        Paint paint1 = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint1.setColor(0x110000FF);
        paint1.setStyle(Style.FILL);

        // stroke color
        Paint paint2 = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint2.setColor(0xFF0000FF);
        paint2.setStyle(Style.STROKE);

        // icon
        Bitmap icon = BitmapFactory.decodeResource(YourActivity.getResources(), R.drawable.blue);

        // circle radius - 200 meters
        int radius = offset = convertMetersToPixels(lat, lng, 200);

        // if zoom too small
        if (radius < icon.getWidth() / 2) {

            radius = icon.getWidth() / 2;
        }

        // create empty bitmap 
        Bitmap b = Bitmap.createBitmap(radius * 2, radius * 2, Config.ARGB_8888);
        Canvas c = new Canvas(b);

        // draw blue area if area > icon size
        if (radius != icon.getWidth() / 2) {

            c.drawCircle(radius, radius, radius, paint1);
            c.drawCircle(radius, radius, radius, paint2);
        }

        // draw icon
        c.drawBitmap(icon, radius - icon.getWidth() / 2, radius - icon.getHeight() / 2, new Paint());

        return b;
    }

// 4\. calculate image offset:

    private LatLng getCoords(double lat, double lng) {

        LatLng latLng = new LatLng(lat, lng);

        Projection proj = YourActivity.getMap().getProjection();
        Point p = proj.toScreenLocation(latLng);
        p.set(p.x, p.y + offset);

        return proj.fromScreenLocation(p);
    }

// 5\. draw:

        MarkerOptions options = new MarkerOptions();
            options.position(getCoords(lat, lng));
            options.icon(BitmapDescriptorFactory.fromBitmap(getBitmap()));

            marker = YourActivity.getMap().addMarker(options); 
```

结果：

![谷歌地图 v2 画圈](../Images/d02edaed0deb7b2f18e16561470c69d9.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-27T21:10:23.433

Android 2.0 API 你可以使用 CircleOption 画一个圆，效果很好，没有像素到米的混乱转换。

```
public CircleOptions getCircleOptions() {
    CircleOptions co = new CircleOptions();
    co.center(latlng);
    co.radius(getCircleSize());
    co.fillColor(getCircleColor());
    co.strokeColor(getStrokeColor());
    co.strokeWidth(2.0f);
    return co;
}

    Circle circle = mapView.getMap().addCircle(munzeeMarker.getCircleOptions()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-10T13:34:48.250

这是我的代码，只是为了增加变化。我还没有找到解决抗锯齿或形状简化问题的方法：

```
// Make a circle of latitude and longitude points.
// Radius is in metres.
// Probably won't work if the circle is large or near the poles.
private ArrayList<LatLng> makeCircle(LatLng centre, double radius)
{
    ArrayList<LatLng> points = new ArrayList<LatLng>();

    double EARTH_RADIUS = 6378100.0;
    // Convert to radians.
    double lat = centre.latitude * Math.PI / 180.0;
    double lon = centre.longitude * Math.PI / 180.0;

    for (double t = 0; t <= Math.PI * 2; t += 0.1)
    {
        // y
        double latPoint = lat + (radius / EARTH_RADIUS) * Math.sin(t);
        // x
        double lonPoint = lon + (radius / EARTH_RADIUS) * Math.cos(t) / Math.cos(lat);
        points.add(new LatLng(latPoint * 180.0 / Math.PI, lonPoint * 180.0 / Math.PI));
    }

    return points;
} 
```

# 数学解释

谷歌地球使用[墨卡托投影](https://en.wikipedia.org/wiki/Mercator_projection)，这意味着物理圆圈不会在地图上显示为圆圈 - 相反，它们会像问题所示那样扭曲。你越靠近两极，它们就越扭曲。要在地图上绘制一个圆圈，但坐标以纬度/经度给出，我们需要反转失真。

首先，我们以弧度找到圆的中心 - 这非常简单，并且存储在`lat`and中`lon`。

然后我们绕着圆圈寻找边缘上的点。如果我们做一个物理圆，每个点的纬度和经度就是：

```
 double latPoint = lat + (radius / EARTH_RADIUS) * Math.sin(t);
        double lonPoint = lon + (radius / EARTH_RADIUS) * Math.cos(t); 
```

这是非常简单的三角函数。(radius / EARTH_RADIUS) 是以弧度为单位的圆的*角半径（例如，半径为 100 m 的圆的角半径为 0.000015 rad）。*

如果我们使用那个简单的代码，我们会发现地图上显示的圆圈在`cos(lat)`水平方向上被压扁了，所以我们只需将其除以将`cos(lat)`其解压。

我们同样可以这样做：

```
 double latPoint = lat + (radius / EARTH_RADIUS) * Math.sin(t) * Math.cos(lat);
        double lonPoint = lon + (radius / EARTH_RADIUS) * Math.cos(t); 
```

导致一个大圆圈 - 这取决于`radius`函数参数是指纬度还是经度。

这个解释可以使用一些图表，但我不能打扰，对不起。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-27T00:35:58.503

谷歌今天，2 月 26 日，刚刚发布了 Circle 作为覆盖类型。

[https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Circle](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Circle)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-27T09:08:56.677

昨天 Android 开发团队引入了 Google Play 服务 v3。滥用它！;) [https://developers.google.com/maps/documentation/android/shapes#circles](https://developers.google.com/maps/documentation/android/shapes#circles)

# regex - Bash：提取文件名的数量以移动到正确的目录编号

> ID：13991302
> 
> 赞同：4
> 
> 时间：2012-12-21T13:45:56.377
> 
> 标签：regex, string, bash, extract

我在单个目录中有一个文件列表，例如..

```
LDI_P1800-id1.0200.bin
LDI_P1800-id2.0200.bin
...
LDI_P1800-id17.0200.bin
LDI_P1800-id18.0200.bin
...
...
LDI_P1800-id165.0200.bin
LDI_P1800-id166.0200.bin
... 
```

我想将它们中的每一个移动到目录中

```
LDI_P1800-id165.0200.bin to ../id165/.
LDI_P1800-id166.0200.bin to ../id166/.
LDI_P1800-id167.0200.bin to ../id167/.
... 
```

等等。

我的猜测是我必须使用正则表达式从字符串中提取 id

```
for file in *.0200.bin ; do
    "extracting id from each file"
    mv $file ../id$id/.
done 
```

任何机构都可以帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T13:59:21.427

尝试以下纯 bash 解决方案：

```
for file in *.0200.bin
do
    id=${file#*-}      # delete everything upto the first hyphen
    id=${id%%.*}        # delete everything after the first dot
    [[ ! -d ../$id ]] && mkdir ../$id       # if the directory doesn't exist create it
    mv $file ../$id
done 
```

它也可以在 中完成`sed`，但我更喜欢第一种方法：

```
for file in *.0200.bin
do
    id=$(sed 's/[^-]*-\([^\.]*\).*$/\1/g' <<< $file)
    mkdir -p ../$id && mv $file ../$id
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:16:46.707

您也可以使用正则表达式（不仅仅是模式匹配）`bash`。

```
for f in *.0200.bin; do
    [[ $f =~ id[0-9]+ ]] && mv -- "$f" ../${BASH_REMATCH[0]}
done 
```

`BASH_REMATCH`是一个包含最近`=~`匹配结果的数组。第 0 个元素包含匹配整个正则表达式的字符串。非零索引保存与正则表达式中第 *n* 个括号组匹配的结果（如果有）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:54:39.437

有几种方法可以检索该 id，一种是使用以下方法：

```
ID=$(echo $file | grep -o "id[[:digit:]]*\." | cut -b3- | tr -d '.') 
```

它使用 grep 隔离`id[DIGITS].`表达式，然后剪切`id`它的一部分，最后`.`使用删除字符`tr`

实际上，您可以`id[DIGITS]`像这样隔离整个部分并在循环中使用它：

```
for file in *.0200.bin ; do
    echo "extracting id from each file"
    ID=$(echo $file | grep -o "id[[:digit:]]*\." | tr -d '.')
    mv $file ../$ID/.
done 
```

**更新**：正如@dogbane 所建议的，它可以进一步简化为：

```
for file in *.0200.bin ; do
    echo "extracting id from each file"
    ID=$(grep -o "id[[:digit:]]*" <<< $file)
    mv $file ../$ID/.
done 
```

# php - Zend Framework 2 - 如何从库中包含部分内容

> ID：13991303
> 
> 赞同：7
> 
> 时间：2012-12-21T13:46:00.983
> 
> 标签：php, partial-views, zend-framework2, zend-view, view-helpers

我写了一个我想在几个模块中使用的部分。我认为最好的方法是将它放入我的自定义库中。

但不幸的是，如果不使用非常丑陋的路径，我想不出一种方法来包含这个部分：

```
echo $this->partial('/../../../../vendor/myvendor/library/MyVendor/View/Views/FormPartial.phtml'
, array(...)); 
```

任何想法如何从我的视图链接到我的供应商目录？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-22T14:27:51.170

问题是解析器无法解析您提供的视图模板的路径。我通常在 module.config.php的**template_map**条目中为所有可访问的部分添加一个配置条目

例如，我有这样的页眉和页脚部分我的 view/layout/header.phtml 和 view/layout/footer.phtml

下面是我的配置

```
'template_map' => array(
    'layout/layout'         => __DIR__ . '/../view/layout/layout.phtml',
    'header'                => __DIR__ . '/../view/layout/header.phtml',
    'footer'                => __DIR__ . '/../view/layout/footer.phtml',
    'error/404'             => __DIR__ . '/../view/error/404.phtml',
    'error/index'           => __DIR__ . '/../view/error/index.phtml',
), 
```

在我的布局视图脚本中，我简单地放了

```
<?php echo $this->partial('header'); ?> 
```

和

```
<?php echo $this->partial('footer'); ?> 
```

另一个如果你在 /module/controller/action 格式下有你的部分，你也可以这样做

```
<?php echo $this->partial('/module/controller/action'); ?> 
```

您应该将视图脚本放在模块控制器文件夹的视图文件夹中

# javascript - 通过 jQuery 对随机字段项进行排序

> ID：13991305
> 
> 赞同：0
> 
> 时间：2012-12-21T13:46:06.440
> 
> 标签：javascript, jquery, sorting, random

我有一个 HTML 幻灯片菜单。具有以下内容：

```
<div class="slide">
<img typeof="foaf:Image" class="image-style-mylogo" src="http://site.com/1.png" alt="">
<img typeof="foaf:Image" class="image-style-mylogo" src="http://site.com/2.png" alt="">
<img typeof="foaf:Image" class="image-style-mylogo" src="http://site.com/3.png" alt="">
<img typeof="foaf:Image" class="image-style-mylogo" src="http://site.com/4.png" alt="">
<img typeof="foaf:Image" class="image-style-mylogo" src="http://site.com/5.png" alt="">
<img typeof="foaf:Image" class="image-style-mylogo" src="http://site.com/6.png" alt="">
</div> 
```

我想要，每次刷新都随机排序图像。我使用了这段代码：

```
function reorder() {
    var grp = $(".slide").children();
    var cnt = grp.length;

    var temp, x;
    for (var i = 0; i < cnt; i++) {
        temp = grp[i];
        x = Math.floor(Math.random() * cnt);
        grp[i] = grp[x];
        grp[x] = temp;
    }
    $(grp).remove();
    $(".slide").append($(grp));
}

function orderPosts() {
    $(".slide").html(orig);
}​ 
```

但不要工作。我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:58:17.200

有一种更简单的方法可以做到这一点。由于 jQuery 集合类似于 Array，因此您可以在它们上调用原生 Array 原型。因此，使用 native `Array.sort`，您的代码将被重写如下：

```
var grp = $(".slide").children(); // the original collection, if you want to save it...

Array.prototype.sort.call(grp, function() {
    return Math.round(Math.random())-0.5;
});

$('.slide').empty().append(grp); 
```

这是一个演示：http: [//jsfiddle.net/JTGfC/](http://jsfiddle.net/JTGfC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:58:32.417

我不确定这是否是 100% 洁净，但你可以在这里应用 Fisher-Yates，而不依赖于 jQuery。

```
fisherYates(document.getElementsByClassName('slide')[0]);

// Fisher-Yates, modified to shuffle DOM container's children instead of an array.
function fisherYates (node)
{
  var children = node.children,
  n = children.length;

  if (!n) {
    return false;
  }

  while (--n) {
     var i = Math.floor( Math.random() * ( n + 1 ) ),
     c1 = children[n];

     node.insertBefore(c1, children[i]);
   }
} 
```

[**演示**](http://jsbin.com/uvepun/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:56:14.713

你的`reorder()`功能很好，我在这个小提琴中测试了它：http: [//jsfiddle.net/kokoklems/YpjwE/](http://jsfiddle.net/kokoklems/YpjwE/)

虽然我没有使用第二个功能`orderPosts()`......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T13:56:32.297

这应该为你做：

```
function reorder() {
    var grp = $(".slide").children();
    var cnt = grp.length;

    var indexes = [];
    // Build a array from 0 to cnt-1 
    for (var i = 0; i < cnt; i++) {
        indexes.push(i);
    } 
    // Shuffle this array. This random array of indexes will determine in what order we add the images.
    indexes = shuffle(indexes);

    // Add the images. (No need to remove them first, .append just moves them)
    for (var i = 0; i < cnt; i++) {
        $(".slide").append($(grp[indexes[i]]));
    }
}

function shuffle(o){
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
} 
```

[洗牌功能源码](https://stackoverflow.com/a/6274381/1835379)

**[工作示例](http://jsfiddle.net/YmpSf/)**（我使用跨度而不是图像，以更好地显示结果）

# c# - linq 字符串在 1 个 lambda 表达式中处理 2 个字符

> ID：13991309
> 
> 赞同：0
> 
> 时间：2012-12-21T13:46:17.873
> 
> 标签：c#, linq

我已经看到了一些使用 Linq 处理字符串的有趣方法：

例如，要通过将数字替换为 X 来隐藏字符串中的数字，我可以这样做：

```
string strNum = "Hello, my number is ... 3456c456";

string strHidden = new String(strNum.ToCharArray()
     .Select(c => (!char.IsNumber(c)) ? c : 'X').ToArray());

Console.WriteLine(strHidden); 
```

是否有一种 Linq 方法可以做到这一点，仅当当前字符是数字并且以下两个字符是数字时才替换数字？

有很多方法可以定制上述方法，但我想知道是否有一种简单的 linq 方法可以一次处理多个字符。

编辑：增加了对当前字符也是数字的要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T13:54:55.727

根据我评论中的解释，您可以使用 LINQ 执行此操作：

```
string strHidden = new String(Enumerable.Range(0, strNum.Length)
    .Select(i => 
        char.IsNumber(strNum[i]) && 
        Enumerable.Range(i+1,2).All(j => j < strNum.Length && char.IsNumber(strNum[j]))
            ? 'X'
            : strNum[i])
    .ToArray()); 
```

正则表达式替代：

```
var strHidden = Regex.Replace(strNum, @"\d(?=\d{2})", "X"); 
```

好多了，不是吗？

# wordpress - wordpress 获取当前用户的登录会话数

> ID：13991312
> 
> 赞同：2
> 
> 时间：2012-12-21T13:46:23.287
> 
> 标签：wordpress, session, login

我曾尝试在整个互联网以及 wordpress 论坛中进行搜索，但没有得到答案。

有什么方法可以限制用户可以进行的登录会话数。

比如免费用户可以登录2次，金卡会员可以登录4次，白金会员可以登录6次等等。

我知道如何创建用户级别，只是对如何将每个用户角色限制为允许的特定登录会话数感到困惑。

提前致谢。

帕特里克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:46:51.873

像这样的东西可能会起作用：

```
function my_handle_login($username, $user) {
    $login_count = intval(get_user_meta($user->ID, 'my_user_count', true));

    $login_count++;
    update_user_meta($user->ID, 'my_user_count', $login_count);

    // Handle user status etc. according to $login_count
}
add_action('wp_login', 'my_handle_login', 10, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:59:28.163

这很简单。

1.  只需在数据库的用户表中添加一个带有 login_count 名称的字段。
2.  当用户登录时，您必须检查什么是 login_count nucmber
3.  如果 login_count 没有结束，则 login_count 加 1

# node.js - 表达 cookie-Sessions 和 connect-cookie-session 之间的区别

> ID：13991316
> 
> 赞同：1
> 
> 时间：2012-12-21T13:46:30.120
> 
> 标签：node.js, session, cookies, express

我正在实现一个系统，其中会话数据存储在 cookie 中。该系统不需要 memorystore 或 redis 支持，这使其具有吸引力。但是，我对添加哪个中间件感到困惑。

我应该添加与 connect 或第三方[connect-cookie-session](https://github.com/jpallen/connect-cookie-session)捆绑在一起的默认[cookieSession() 吗](https://github.com/caolan/cookie-sessions)？

哦，我正在运行最新的节点版本（0.8.16）和快速版本（3.0.0）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:08:50.453

`connect-cookie-session`一年多没有任何提交。这是一个废弃项目的良好指标，特别是因为问题跟踪器上仍有两个未解决的问题（这意味着它不是不活动的，因为没有什么可以做得更好）。它还有 2 个拉取请求等待接受一段时间。

我会选择默认的。

# r - R / POSIX 控制结果格式（秒、分、小时）

> ID：13991317
> 
> 赞同：1
> 
> 时间：2012-12-21T13:46:46.110
> 
> 标签：r, datetime, posixct

我正在使用`POSIXct`R 中的一些对象，并且想知道如何控制答案的格式。

```
train$targetVar1 <- as.numeric(as.POSIXct(as.character(string1),tz="UTC") - as.POSIXct(as.character(string2),tz="UTC")) 
```

答案似乎弹出为`sec`，`min`并且`hr`与数据没有明显关系。

我看着使用`POSIXlt`帮助文件使它听起来像`lt`对象为每个时间尺度创建一个向量，但无法弄清楚如何使用各种方法访问向量，例如：

```
> posixObj1 <- as.POSIXlt("2012-12-12 12:00:00")
> posixObj1$sec
[1] 0
> posixObj1$min
[1] 0
> posixObj1$hour
[1] 12

> x <- as.POSIXlt("2012-12-12")
> x
[1] "2012-12-12"
> format(x, "%s")
[1] "" 
```

有什么建议么？

注意：我在 Windows 7 机器上运行 R 2.15.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:36:28.630

`POSIXct`和`POSIXlt`对象是非常不同的。您可以使用以下命令查看`dput`：

```
dput(Sys.time())
structure(1356100378.30553, class = c("POSIXct", "POSIXt"))

dput(as.POSIXlt(Sys.time()))
structure(list(sec = 13.2815599441528, min = 33L, hour = 14L, 
    mday = 21L, mon = 11L, year = 112L, wday = 5L, yday = 355L, 
    isdst = 0L), .Names = c("sec", "min", "hour", "mday", "mon", 
"year", "wday", "yday", "isdst"), class = c("POSIXlt", "POSIXt"
), tzone = c("", "GMT", "BST")) 
```

`POSIXct`是记录自 UNIX 纪元以来的秒数，您可以使用`as.numeric`or获得这些秒数`unclass`：

```
as.numeric(Sys.time())
[1] 1356100510
unclass(Sys.time())
[1] 1356100516 
```

请注意，结果的差异是由于我需要 6 秒来调用第二个命令。

至于你原来的问题，`-.POSIXt`最终调用`difftime`默认`units`参数为`auto`. 这意味着输出单位将取决于差异的大小。要获得一致性，请`difftime`直接调用：

```
difftime(as.POSIXct(as.character(string1),tz="UTC"), as.POSIXct(as.character(string2),tz="UTC")), units="secs") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T14:16:20.627

你可以使用`format`：

```
x <- as.POSIXlt("2012-12-12")

format(x, "%s")    
[1] "1355266800" 
```

该参数`"%s"`表示秒。

# asp.net - ASP.NET Head Login View Text

> ID：13991322
> 
> 赞同：1
> 
> 时间：2012-12-21T13:47:10.937
> 
> 标签：asp.net

For some reason the text (Log In) inside the HeadLoginView in ASP.NET is being displayed as grey not white and only visible when i hover on it, I want it white and always visible.

What am I doing wrong? Also how/where do I code the signout when a user is logged in?

[small screenshot](http://i.stack.imgur.com/PXsoI.png)

Code:

```
<!-- Cart -->
    <div id="cart">
        <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    [ <a href="~/login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                    [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/"/> ]
                </LoggedInTemplate>
            </asp:LoginView>
        <div class="cl">&nbsp;</div>
        <a href="shoppingCart.aspx" class="cart-link">Your Shopping Cart</a>        
    </div>
    <!-- End Cart -->! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:50:57.030

Change font color of hyperlink text via *CSS* attribute.

```
#cart a
{
  color:white;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:52:47.503

There is some CSS throwing off the styles of the links somewhere. You can track this down using IE's developer tools or FireBug in FireFox. You can always style it yourself like @AVD suggested.

Also, with that template and logging out, the LoginStatus generates a logout link and there is code within the LoginStatus control itself to actually perform the logout process.

# c++ - 关于 OR (||) 运算符和返回语句

> ID：13991329
> 
> 赞同：0
> 
> 时间：2012-12-21T13:47:35.667
> 
> 标签：c++, operators

我一直在想，如果我有这样的功能：

```
bool Foo::Bar()
{
     return A() || B() || C();
} 
```

如果 A() 返回 true，Bar() 会立即返回 true，还是会在评估最终值之前计算 B() 和 C() 的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T13:48:44.043

如果`A()`为真，则 B 和 C 都不会被评估。这称为[运算符短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

类似地，在诸如`A && B && C`, if `A`is *false*之类的语句中，B 或 C 都不会被计算。

这不仅仅是优化；`B`当或`C`取决于时，它特别有用`A`。例如，您既可以测试指针是否*指向*某个对象，也可以在单个语句中调用指向对象的方法：

```
if (my_pointer && my_pointer->some_method() > 9) {

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:48:48.667

是的，`Bar`将立即返回`true`，而不调用`B`or `C`，因为`||`它是一个[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)运算符。`&&`当操作数返回时，操作符也是如此`false`：一旦知道评估结果，链就会停止。这在表达式的第一部分保护第二部分免受潜在错误影响的情况下是必不可少的，如下所示：

```
return (ptr == NULL) || ptr -> failed(); 
```

如果在发现表达式的初始部分是 之后评估没有停止，则`true`指针`NULL`将在第二部分被取消引用，从而导致未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T13:49:48.483

> 如果 A() 返回 true，Bar() 会立即返回 true，还是会在评估最终值之前计算 B() 和 C() 的结果？

没有！！`A()`如果return根本不会执行它`true`。

当 operator 的任何操作数`||`返回 true 时，不会评估其他操作数，因为完整表达式的结果是已知的。

# android - HTML 响应式电子邮件在 iPhone 上缩小，在 Android 上完美

> ID：13991330
> 
> 赞同：3
> 
> 时间：2012-12-21T13:47:38.083
> 
> 标签：android, iphone, responsive-design, html-email

我专门为移动设备设计了一个电子邮件模板，使用 % 作为宽度，使用 em 作为字体来测试我的公司。该电子邮件在 Android 2.2 上看起来符合预期，但它最初在 iPhone 上被缩小了。

我知道元视口，但我很担心，因为看起来我们的电子邮件系统（有点过时）会从 HTML 文件中删除所有内容，只取正文标签之间的内容。如果没有这个，iPhone 会一直显示它缩小了，还是我完全忽略了其他东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:45:13.743

这是我使用的，它适用于 Android 和 iPhone：

`<meta name="viewport" content="width=device-width, initial-scale=1" />`

以及以下媒体查询：

@media screen and (min-device-width:320px) and (max-device-width:760px)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T09:01:13.747

我能够在下面的链接上解决它，您可能想尝试一下：

[停止 iPhone 调整 HTML 电子邮件大小的问题](https://stackoverflow.com/questions/11801685/issue-stopping-iphone-resizing-html-e-mails/24055721#24055721)

# c++ - 为什么 CryptAcquireContext 从通过 WMI 启动的进程调用时返回 ERROR_ACCESS_DENIED？

> ID：13991337
> 
> 赞同：0
> 
> 时间：2012-12-21T13:47:54.770
> 
> 标签：c++, wmi, cryptoapi

我有一个使用 CRYPT_NEWKEYSET调用[CryptAcquireContext的可执行文件：](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379886%28v=vs.85%29.aspx)

```
BOOL b_result;
HCRYPTPROV prov;

b_result = CryptAcquireContext(&prov, L"testcontext6", MS_DEF_PROV, PROV_RSA_FULL, CRYPT_NEWKEYSET);

if(!b_result) {
    int err = GetLastError();
    fprintf(stderr, "Error acquiring context: %#x\n", err);
    return 1;
}
return 0; 
```

如果我在本地运行它，它工作正常。如果我按如下方式通过 WMI 运行它，它会返回错误 0x5 (ERROR_ACCESS_DENIED)：

```
using (var processClass = new ManagementClass(m_scope, new ManagementPath("Win32_Process"), new ObjectGetOptions()))
{
    var inParams = processClass.GetMethodParameters("Create");
    inParams["commandLine"] = @"cmd.exe /c C:\CppTest.exe 2>C:\test.log";
    var outParams = processClass.InvokeMethod("Create", inParams, null);
    return outParams["ProcessId"];
} 
```

似乎 WMI 下的环境在某种程度上更具限制性，这会阻止创建新的密钥容器。关于为什么会这样以及如何解决它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:11:48.683

Win32_Process.CreateProcess 下的环境禁止使用交互操作。事实证明，使用 CryptAcquireContext 访问特定于用户（而不是机器范围）的密钥容器在非交互式环境中不起作用（参见[http://social.msdn.microsoft.com/Forums/uk/clr/线程/2033c171-0809-4e14-aa50-1b9287389cb3](http://social.msdn.microsoft.com/Forums/uk/clr/thread/2033c171-0809-4e14-aa50-1b9287389cb3)，例如）。

# android - Google Maps Android API v2 自定义信息窗口示例代码

> ID：13991347
> 
> 赞同：0
> 
> 时间：2012-12-21T13:48:31.620
> 
> 标签：android, google-maps

我已经阅读了有关自定义信息窗口的[文档。](https://developers.google.com/maps/documentation/android/marker)

但我真的需要示例代码

我在哪里可以得到那个？多谢

类似于[图片](http://i.stack.imgur.com/nLxfq.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T14:02:49.910

查看示例代码部分中描述[的](https://developers.google.com/maps/documentation/android/intro)地图演示中的 MarkerDemoActivity（渲染方法） 。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:24:11.910

它就像任何适配器： [https ://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.InfoWindowAdapter](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.InfoWindowAdapter)

```
public abstract View getInfoWindow (Marker marker) 
```

# jquery - 循环遍历特定的 div

> ID：13991348
> 
> 赞同：0
> 
> 时间：2012-12-21T13:48:35.987
> 
> 标签：jquery, loops, html, gallery

我正在尝试创建一个无限循环，通过 div 并在其他 div 中显示图像和一些描述文本，所以基本上它是一个画廊。

```
<div class="gallery">
    <div class="header">gallery</div>
    <div class="gimages"></div>
    <div class="ggallery">
        <div class="gitem" id="0"><div class="imgtext"><div>text</div></div><img src="images/gallery/1.jpg" border="0" /></div>
        <div class="gitem" id="1"><div class="imgtext"><div>text</div></div><img src="images/gallery/2.jpg" border="0" /></div>
        <div class="gitem" id="2"><div class="imgtext"><div>text</div></div><img src="images/gallery/3.jpg" border="0" /></div>
        <div class="gitem" id="3"><div class="imgtext"><div>text</div></div><img src="images/gallery/4.jpg" border="0" /></div>
        <div class="gitem" id="4"><div class="imgtext"><div>text</div></div><img src="images/gallery/5.jpg" border="0" /></div>
        <div class="gitem" id="5"><div class="imgtext"><div>text</div></div><img src="images/gallery/6.jpg" border="0" /></div>
        <div class="gitem" id="6"><div class="imgtext"><div>text</div></div><img src="images/gallery/7.jpg" border="0" /></div>
        <div class="gitem" id="7"><div class="imgtext"><div>text</div></div><img src="images/gallery/8.jpg" border="0" /></div>
        <div class="gitem" id="8"><div class="imgtext"><div>text</div></div><img src="images/gallery/9.jpg" border="0" /></div>
        <div class="gitem" id="9"><div class="imgtext"><div>text</div></div><img src="images/gallery/10.jpg" border="0" /></div>
        <div class="gitem" id="10"><div class="imgtext"><div>text</div></div><img src="images/gallery/11.jpg" border="0" /></div>
        <div class="gitem" id="11"><div class="imgtext"><div>text</div></div><img src="images/gallery/12.jpg" border="0" /></div>
    </div>
</div> 
```

div ggallery 是 display:none，我从这里获取数据以放置在 div gimages 中。问题是它只会显示最后一张图像，除非我在每次迭代之间发出警报。这是脚本：

```
$(document).ready(function(){
    var refreshId = setInterval( function(){
        $('.gallery .ggallery .gitem').each(function(index){
            $('.gallery .gimages').html($(this).html());
            if(index==11){
                index = 0;
            }
        });
    }, 5000);
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:10:37.253

这应该可以解决问题：

```
$(document).ready(function(){
   var list = $('.gallery .ggallery .gitem');
   var j = 0;
   var f = function() {
       $('.gallery .gimages').html($(list[j%list.length]).html());
       j++;
   };        
   setInterval(f, 2000);
});​ 
```

查看完整的小提琴：http: [//jsfiddle.net/kokoklems/nQGw9/](http://jsfiddle.net/kokoklems/nQGw9/)

我所做的只是定义一个函数来改变你的`gimages`div 的内容，然后每 2 秒调用一次，这要归功于 setInterval 函数。回到开头的诀窍是使用`list[j%list.length]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:53:07.777

将计时器移到循环内 - 您每 5 秒运行一次循环并到达终点，而不是转到下一个项目并等待 5 秒（未经测试）

```
$(document).ready(function(){
    $('.gallery .ggallery .gitem').each(function(index){
        var refreshId = setInterval( function(){
            $('.gallery .gimages').html($(this).html());
            if(index==11){
                index = 0;
            }
        }, 5000);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:02:26.987

根据您的html，以下是代码。您也可以更改间隔。

```
function init(){
        var itemInterval = 1000;
        var numberOfItems = $('.gitem').length;
        var currentItem = 0;
        setInterval(function () {
            $(".gimages").html($('#' + currentItem).clone());
            if (currentItem == numberOfItems - 1) {
                currentItem = 0;
            } else {
                currentItem++;
            }

        }, itemInterval);
    };

    $(function () {
        init();
    }); 
```

# activerecord - Rails HABTM 关于关系的附加数据

> ID：13991356
> 
> 赞同：0
> 
> 时间：2012-12-21T13:49:07.150
> 
> 标签：activerecord

我有一个课程表和一个用户表，一个课程可以有很多学生（用户），一个学生可以有很多课程，所以我将它存储在两个模型中，如下所示

```
class Lesson < ActiveRecord::Base
  has_and_belongs_to_many :students, class_name: 'User', foreign_key: 'lesson_id', uniq: true
end

class User < ActiveRecord::Base
  has_and_belongs_to_many :lessons_signed_up, class_name: 'Lesson', foreign_key: 'user_id', uniq: true
end 
```

对于那个协会，我有一张桌子

```
lesson_id | user_id
         1|       1 
         2|       1 
```

但我也想存储课程的状态，无论是否完成，所以我会使用表格

```
lesson_id | user_id | completed
        1 |       1 | true
        1 |       2 | false 
```

如何为课程和用户之间的关系添加额外的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:21:48.903

您不应使用 habtm 关系，而应使用 has_many :through。您可以在此处找到有关它的信息：http: [//guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

基本上，您将关系表制作成模型。

# parsing - 通过 Lexing.from_string 解析字符串

> ID：13991359
> 
> 赞同：4
> 
> 时间：2012-12-21T13:49:14.067
> 
> 标签：parsing, ocaml, lex, lexical-analysis

我已经实现[了这个示例](http://caml.inria.fr/pub/docs/manual-ocaml/manual026.html#toc110)，并且效果很好。

现在，我想从字符串中读取而不是从 读取`stdin`，所以我更改了`calc.ml`：

```
let _ =
  try
    let lexbuf = Lexing.from_string "1+3" in
    let result = Parser.main Lexer.token lexbuf in
    print_int result
  with Lexer.Eof ->
    print_string "Lexer.Eof";
    exit 0 
```

奇怪的是，它`Lexer.Eof`作为结果返回。如果我`| eof { raise Eof }`从`lexer.mll`and 中删除，它会告诉`Fatal error: exception Failure("lexing: empty token")`. 我想`end-of-input`条件有问题...有谁知道如何更改词法分析器以便它可以对字符串进行词法分析？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:31:36.313

您忘记了 EOL：

```
let _ =
  try
    let lexbuf = Lexing.from_string "1+3\n" in
    let result = Parser.main Lexer.token lexbuf in
    print_int result
  with Lexer.Eof ->
    print_string "Lexer.Eof";
    exit 0 
```

**编辑**

或者，如果您不想添加 EOL：

在`parser.mly`中，添加令牌`EOF`并：

```
| expr EOF                    { $1 } 
```

在`lexer.mll`，不提高 eof 而是返回令牌`EOF`：

```
| eof            { EOF } 
```

最后，`calc.ml`：

```
let _ =
    let lexbuf = Lexing.from_string "3+1" in
    let result = Parser.main Lexer.token lexbuf in
    print_int result 
```

# facebook - Facebook 很好地提取数据；Soundcloud 上的曲目艺术仍是默认设置

> ID：13991360
> 
> 赞同：0
> 
> 时间：2012-12-21T13:49:21.480
> 
> 标签：facebook, caching, default, soundcloud, artwork

我曾经是一名高级技术人员（服务方面），并且只有一点（当前）编程知识，所以如果我错过了关于这个问题的明显内容，请原谅我。这里是这样：我昨天将我的第二个混音上传到 Soundcloud，并在仍在加载/编码屏幕上时添加了艺术作品。上传很顺利，我填写了曲目的所有数据，艺术作品在这里正确加载：http: [//soundcloud.com/dvjrickkraft/rick-kraft-01-2013-electro](http://soundcloud.com/dvjrickkraft/rick-kraft-01-2013-electro)

之后我尝试分享到 Facebook，但我得到的是默认的 Soundcloud JPG。根据您的建议和之前的经验，我通过 Facebook 调试 (lint) 栏运行了链接，这向我显示页面抓取在进行页面抓取时仍显示 Soundcloud 默认值。在我设置正确的图像之前，Facebook 缓存了一张图像，运行 debug/lint 并看到带有所有正确信息的新刮擦，它开始提取正确的数据之前，我在 Mixcloud 上遇到过类似的问题。

我还通过调试尝试了变体 ?1 ?123 ?2 （之前没有尝试过它们，因此它们不会被缓存），每个都提取默认的 Soundcloud JPG 而不是我的艺术作品。

此外......同一天，我在这里上传了之前的曲目 [http://soundcloud.com/dvjrickkraft/rick-kraft-12-05-05](http://soundcloud.com/dvjrickkraft/rick-kraft-12-05-05) ，这似乎已被我共享的 Jump Smokers 曲目所取代。我没有删除它，我不知道它是如何消失的......！我想测试一下 Facebook 是否会在第一次上传时加入艺术作品，但我必须在当前促销期结束时重新上传。我意识到这可能是一个需要报告的单独问题。

您可以建议我或您的开发团队为解决此问题提供的任何帮助将不胜感激。作为一名台湾艺术家，我正处于重大突破的边缘，每一点都非常重要。此致 里克·克拉夫特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:14:28.357

感谢您报告此事。

艺术品上传似乎没有成功。您可以在 API 响应中看到`artwork-url`没有`nil=true`实际内容 -`http://api.soundcloud.com/tracks/71930639?client_id=YOUR_CLIENT_ID`

我的建议是重新上传艺术品，然后做你正在做的 facebook lint 技巧。

至于第二个问题，也许[这个链接](http://help.soundcloud.com/customer/portal/articles/247765-why-did-my-sound-disappear-)会有所帮助。

# objective-c - iOS 4.3 的 NSDate 完整日期

> ID：13991364
> 
> 赞同：0
> 
> 时间：2012-12-21T13:49:44.990
> 
> 标签：objective-c, ios, nsdate

使用 显示完整日期+时间的简单方法是什么`NSDate`，并且还支持 iOS 4.3？例如，`Saturday 30 September, 14:00`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:54:39.427

使用[NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)：

```
NSDate* date= [NSDate date];
NSDateFormatter* formatter= [NSDateFormatter new];
[formatter setDateFormat:  @"eeee dd MMMM , hh:mm"];
NSString* formattedDate= [formatter stringFromDate: date]; 
```

**编辑**

其他方式：

```
formatter.dateStyle= NSDateFormatterFullStyle;
formatter.timeStyle= NSDateFormatterShortStyle; 
```

如评论中所述，这应该是首选方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:58:45.997

如果您想要本地化日期/时间：

```
NSString *s = [NSDateFormatter localizedStringFromDate:date dateStyle:NSDateFormatterFullStyle timeStyle:NSDateFormatterFullStyle]; 
```

在实践中，这通常是太多了。您的示例可以通过使用`NSDateFormatterLongStyle`for date 和`NSDateFormatterShortStyle`for time 获得。

[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)。

# python - 我在 ubuntu12.04 上测试 scikit 时出现导入错误

> ID：13991370
> 
> 赞同：0
> 
> 时间：2012-12-21T13:50:03.377
> 
> 标签：python, import, scikit-learn

我想在 ubuntu12.04 上安装 scikit，我按照[官方安装文档](http://scikit-learn.org/stable/install.html)的说明在 bash 中键入以下命令：sudo apt-get install python-sklearn

接下来我输入测试指令nosetests sklearn --exe

但是我有很多导入错误！我搜索了谷歌，但发现很少有用的链接。我是python新手，我想通过scikit学习python和机器学习。所以请帮助我，谢谢。

以下是我在bash中运行nosetests命令时的错误信息。由于篇幅限制，我删除了一些错误。

```
 EEEEEE..............EE.....EE........EE.............EEE......EE..........
======================================================================
ERROR: Failure: ImportError (No module named joblib)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/cluster/__init__.py", line 10, in <module>
    from .hierarchical import ward_tree, Ward, WardAgglomeration
  File "/usr/lib/pymodules/python2.7/sklearn/cluster/hierarchical.py", line 20, in <module>
    from ..externals.joblib import Memory
  File "/usr/lib/pymodules/python2.7/sklearn/externals/joblib/__init__.py", line 3, in <module>
    from joblib import *
ImportError: No module named joblib

======================================================================
ERROR: Failure: ImportError (No module named joblib)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/covariance/__init__.py", line 14, in <module>
    from .graph_lasso_ import graph_lasso, GraphLasso, GraphLassoCV
  File "/usr/lib/pymodules/python2.7/sklearn/covariance/graph_lasso_.py", line 20, in <module>
    from ..linear_model import lars_path
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/__init__.py", line 16, in <module>
    from .least_angle import Lars, LassoLars, lars_path, LARS, LassoLARS, \
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/least_angle.py", line 19, in <module>
    from ..cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
  File "/usr/lib/pymodules/python2.7/sklearn/externals/joblib/__init__.py", line 3, in <module>
    from joblib import *
ImportError: No module named joblib

======================================================================
ERROR: Failure: ImportError (No module named joblib)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/__init__.py", line 18, in <module>
    from .lfw import load_lfw_pairs
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/lfw.py", line 34, in <module>
    from ..externals.joblib import Memory
  File "/usr/lib/pymodules/python2.7/sklearn/externals/joblib/__init__.py", line 3, in <module>
    from joblib import *
ImportError: No module named joblib

======================================================================
ERROR: Failure: ImportError (No module named joblib)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/externals/joblib/__init__.py", line 3, in <module>
    from joblib import *
ImportError: No module named joblib

======================================================================
ERROR: Failure: ImportError (cannot import name Parallel)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/feature_extraction/tests/test_text.py", line 10, in <module>
    from sklearn.grid_search import GridSearchCV
  File "/usr/lib/pymodules/python2.7/sklearn/grid_search.py", line 18, in <module>
    from .cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
ImportError: cannot import name Parallel

======================================================================
ERROR: Failure: ImportError (cannot import name Parallel)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/feature_selection/__init__.py", line 17, in <module>
    from .rfe import RFE
  File "/usr/lib/pymodules/python2.7/sklearn/feature_selection/rfe.py", line 13, in <module>
    from ..cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
ImportError: cannot import name Parallel

======================================================================
ERROR: Failure: ImportError (cannot import name Parallel)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/__init__.py", line 16, in <module>
    from .least_angle import Lars, LassoLars, lars_path, LARS, LassoLARS, \
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/least_angle.py", line 19, in <module>
    from ..cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
ImportError: cannot import name Parallel

======================================================================
ERROR: Failure: ImportError (cannot import name Memory)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/metrics/cluster/tests/test_unsupervised.py", line 3, in <module>
    from .... import datasets
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/__init__.py", line 18, in <module>
    from .lfw import load_lfw_pairs
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/lfw.py", line 34, in <module>
    from ..externals.joblib import Memory
ImportError: cannot import name Memory

======================================================================
ERROR: Failure: ImportError (cannot import name Memory)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/metrics/tests/test_metrics.py", line 10, in <module>
    from ... import datasets
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/__init__.py", line 18, in <module>
    from .lfw import load_lfw_pairs
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/lfw.py", line 34, in <module>
    from ..externals.joblib import Memory
ImportError: cannot import name Memory

======================================================================
ERROR: Failure: ImportError (cannot import name Memory)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/utils/tests/test_sparsefuncs.py", line 5, in <module>
    from sklearn.datasets import make_classification
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/__init__.py", line 18, in <module>
    from .lfw import load_lfw_pairs
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/lfw.py", line 34, in <module>
    from ..externals.joblib import Memory
ImportError: cannot import name Memory

======================================================================
ERROR: Failure: ImportError (cannot import name Memory)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/utils/tests/test_svd.py", line 12, in <module>
    from sklearn.datasets.samples_generator import make_low_rank_matrix
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/__init__.py", line 18, in <module>
    from .lfw import load_lfw_pairs
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/lfw.py", line 34, in <module>
    from ..externals.joblib import Memory
ImportError: cannot import name Memory

======================================================================
ERROR: Tests that clone creates a correct deep copy.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_base.py", line 48, in test_clone
    from sklearn.feature_selection import SelectFpr, f_classif
  File "/usr/lib/pymodules/python2.7/sklearn/feature_selection/__init__.py", line 17, in <module>
    from .rfe import RFE
  File "/usr/lib/pymodules/python2.7/sklearn/feature_selection/rfe.py", line 13, in <module>
    from ..cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
ImportError: cannot import name Parallel

======================================================================
ERROR: Tests that clone doesn't copy everything.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_base.py", line 64, in test_clone_2
    from sklearn.feature_selection import SelectFpr, f_classif
  File "/usr/lib/pymodules/python2.7/sklearn/feature_selection/__init__.py", line 17, in <module>
    from .rfe import RFE
  File "/usr/lib/pymodules/python2.7/sklearn/feature_selection/rfe.py", line 13, in <module>
    from ..cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
ImportError: cannot import name Parallel

======================================================================
ERROR: sklearn.tests.test_base.test_is_classifier
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_base.py", line 109, in test_is_classifier
    from ..svm import SVC
  File "/usr/lib/pymodules/python2.7/sklearn/svm/__init__.py", line 13, in <module>
    from .classes import SVC, NuSVC, SVR, NuSVR, OneClassSVM, LinearSVC
  File "/usr/lib/pymodules/python2.7/sklearn/svm/classes.py", line 2, in <module>
    from ..linear_model.base import CoefSelectTransformerMixin
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/__init__.py", line 16, in <module>
    from .least_angle import Lars, LassoLars, lars_path, LARS, LassoLARS, \
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/least_angle.py", line 19, in <module>
    from ..cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
ImportError: cannot import name Parallel

======================================================================
ERROR: Failure: ImportError (cannot import name Memory)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_cross_validation.py", line 10, in <module>
    from ..datasets import make_regression
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/__init__.py", line 18, in <module>
    from .lfw import load_lfw_pairs
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/lfw.py", line 34, in <module>
    from ..externals.joblib import Memory
ImportError: cannot import name Memory

======================================================================
ERROR: Failure: ImportError (cannot import name Parallel)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_grid_search.py", line 12, in <module>
    from sklearn.grid_search import GridSearchCV
  File "/usr/lib/pymodules/python2.7/sklearn/grid_search.py", line 18, in <module>
    from .cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
ImportError: cannot import name Parallel

======================================================================
ERROR: Failure: ImportError (cannot import name Memory)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_hmm.py", line 6, in <module>
    from sklearn.datasets.samples_generator import make_spd_matrix
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/__init__.py", line 18, in <module>
    from .lfw import load_lfw_pairs
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/lfw.py", line 34, in <module>
    from ..externals.joblib import Memory
ImportError: cannot import name Memory

======================================================================
ERROR: Failure: ImportError (cannot import name Parallel)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_multiclass.py", line 13, in <module>
    from sklearn.svm import LinearSVC
  File "/usr/lib/pymodules/python2.7/sklearn/svm/__init__.py", line 13, in <module>
    from .classes import SVC, NuSVC, SVR, NuSVR, OneClassSVM, LinearSVC
  File "/usr/lib/pymodules/python2.7/sklearn/svm/classes.py", line 2, in <module>
    from ..linear_model.base import CoefSelectTransformerMixin
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/__init__.py", line 16, in <module>
    from .least_angle import Lars, LassoLars, lars_path, LARS, LassoLARS, \
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/least_angle.py", line 19, in <module>
    from ..cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
ImportError: cannot import name Parallel

======================================================================
ERROR: Failure: ImportError (cannot import name Parallel)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_pipeline.py", line 9, in <module>
    from ..svm import SVC
  File "/usr/lib/pymodules/python2.7/sklearn/svm/__init__.py", line 13, in <module>
    from .classes import SVC, NuSVC, SVR, NuSVR, OneClassSVM, LinearSVC
  File "/usr/lib/pymodules/python2.7/sklearn/svm/classes.py", line 2, in <module>
    from ..linear_model.base import CoefSelectTransformerMixin
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/__init__.py", line 16, in <module>
    from .least_angle import Lars, LassoLars, lars_path, LARS, LassoLARS, \
  File "/usr/lib/pymodules/python2.7/sklearn/linear_model/least_angle.py", line 19, in <module>
    from ..cross_validation import check_cv
  File "/usr/lib/pymodules/python2.7/sklearn/cross_validation.py", line 21, in <module>
    from .externals.joblib import Parallel, delayed
ImportError: cannot import name Parallel

======================================================================
ERROR: Failure: ImportError (cannot import name Memory)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_pls.py", line 3, in <module>
    from sklearn.datasets import load_linnerud
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/__init__.py", line 18, in <module>
    from .lfw import load_lfw_pairs
  File "/usr/lib/pymodules/python2.7/sklearn/datasets/lfw.py", line 34, in <module>
    from ..externals.joblib import Memory
ImportError: cannot import name Memory

======================================================================
FAIL: Test either above import has failed for some reason
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/lib/pymodules/python2.7/sklearn/tests/test_init.py", line 22, in test_import_skl
    assert_equal(_top_import_error, None)
AssertionError: ImportError('cannot import name Parallel',) != None

----------------------------------------------------------------------
Ran 100 tests in 6.478s

FAILED (errors=26, failures=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:03:01.867

检查`python-joblib`包是否安装

```
sudo dpkg -l | grep joblib 
```

如果没有返回，请尝试运行

```
apt-cache search joblib 
```

应该有一个名为`python-joblib`: install it using

```
sudo apt-get install python-joblib 
```

并重试。

**编辑**：

您是对的，该软件包已安装，但 Python 似乎无法找到它（您的`import joblib`失败证明了这一点）。通常这意味着安装包的路径不是 Python 搜索路径的一部分。

您可以做的是从源手动安装模块并指定路径（似乎是`/usr/lib/python2.7`），或者使用诸如`easy_install`或之类的工具`pip`为您执行此操作。

正如您的指南中所述，`pip install -U scikit-learn`或者`easy_install -U scikit-learn`应该为您解决问题，因为您的库已经在那里......

# css - alignin 2 div 保持一个垂直向下

> ID：13991371
> 
> 赞同：1
> 
> 时间：2012-12-21T13:50:04.377
> 
> 标签：css, alignment

我在对齐 2 个 div 时感到头疼。我读过很多教程，其中使用了两个 div，一个左浮动，另一个右浮动。这是我正在使用的代码。问题是，如果调整浏览器大小或使用较低分辨率，div“fotosder”中的图像会下降。

这是我的代码：

```
<li>
    <div class="holder_slogan">
         <p class="slogan"> slogan </p>

        <div class="social_buttons2">
    <div class="inset">
        <a class="fb login_button" href="http://xxx.com/facebook?next=xxx">
            <span class="logo_wrapper"><span class="logo"></span></span>
            <span>Facebook</span>
        </a>

    </div>
    <div class="registrate">
    <img src="data/images/registrate.png" alt="registrate" />
    </div>
    </div>

    </div>

<div class="fotosder"><img src="images/imagen1.jpg" alt="listad" /></div>
    <div style="clear:both;"></div></li>

.sp-slider > li {
    -moz-box-sizing: border-box;
    float: left;
    height: 100%;
    padding: 0 60px;
    position: relative;
    text-align: left;
    transition: opacity 0.4s ease-in 0.8s;
    width: 20%;
    z-index: 2000;
}

.holder_slogan {
    float: left;
    margin: 66px 0 0 18%;
    width: 387px;
}

#board .slogan, #board2 .slogan {
    float: left;
    font-size: 12px;
    line-height: 25px;
    margin-right: 30px;
    padding-right: 10px;
    padding-top: 6px;
    text-align: left;
    width: 470px;
}

.social_buttons2 {
    float: left;
    margin: 0 auto;
    width: 220px;
}

.fotosder {
    float: right;
    margin: 5px 18% 0 0;
    position: relative;
    width: 329px;
}

.sp-slider > li img {
    -moz-box-sizing: border-box;
    display: block;
    max-height: 100%;
    max-width: 100%;
    padding: 10px 0;
}

img {
    border-style: none;
    vertical-align: top;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:57:50.550

这是正常行为。当包裹元素的宽度不足以容纳两个浮动元素时，一个会在另一个下方。在这种情况下，右边是浮动的，因为它是文档流中的“最后一个”。

如果您担心这一点，请给元素一个 % 宽度，它们不应该重新排列，除非它们变得非常小或者元素的内容阻止它们进一步缩小。

# c - Freopen 导致分段错误

> ID：13991374
> 
> 赞同：1
> 
> 时间：2012-12-21T13:50:22.917
> 
> 标签：c, segmentation-fault, freopen

有任何想法为什么会这样：

```
#include <stdio.h>
#include <stdlib.h>

int nrpart;
int k;

void main()
{
    printf("lol");
    freopen("p2.in","r",stdin);
    freopen("p2.out","w",stdout);
    printf("roar");
} 
```

只输出大声笑？我在其他时候使用过 freopen ，但它现在似乎不起作用，我真的不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:13:08.207

签出文件`p2.out`。第二次调用打印的文本在`printf`那里，因为您将标准输出重定向到该文件。没有分段违规。不过，好笑话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:47:46.513

您编写的代码不会导致分段错误（至少对我而言）。除非您没有展示更多内容，否则不确定它是如何为您做到的。

请务必查看有关 的一些文档[，](http://www.cplusplus.com/reference/cstdio/freopen/)`freopen()`特别是有关返回值的部分：

> 如果文件重新打开成功，该函数返回作为参数流传递的指针，该指针可用于识别重新打开的流。否则，返回一个空指针。在大多数库实现中，errno 变量也设置为失败时特定于系统的错误代码。

因此，请确保在使用新重定向的流之前检查返回值和 errno 值。可能是您的错误的原因。

如果您的代码在 line 之前出现段`printf("roar");`错误，那么这就是您没有看到它的原因。如果之后出现段错误，那么您的“咆哮”应该在文件中`p2.out`。

一个重要的提示：记住在你`fclose` `stdin`的`stdout`程序结束时！这些现在分别重定向到`p2.in`和`p2.out`并且需要在您完成它们时关闭。

# c# - Sqlite min,max 在 ado.net 中返回错误结果

> ID：13991376
> 
> 赞同：1
> 
> 时间：2012-12-21T13:50:27.417
> 
> 标签：c#, sqlite, aggregate-functions, max, min

我在用`ADO.NET Data Provider for SQLite: 1.0.82.0`

聚合函数返回错误结果：

```
###Table structure###
CREATE TABLE ta85 (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, date INTEGER, _90 REAL, _100 REAL)

###Rows: ###
select * from ta85

id, date, _90, _100

"1","1355480577920","4,4","2"

"2","1355480877929","15","5,2"

"3","1355481177937","26,4","9,4"

------------------ 
```

现在，如果我想为每列选择最大值、最小值：

```
SELECT date,MIN(_90), MAX(_90),MIN(_100), MAX(_100) FROM ta85 WHERE date between 1355480296794 and 1355481366266 
```

返回：

```
"1355481177937","15","4,4","2","9,4" 
```

哪个 for column`_100`是正确的，但是 for column`_90`是错误的。

## 解决方案

感谢您的所有回答。你说的都是对的。

```
cmd.Parameters.AddWithValue(columname,""); 
```

到

```
cmd.Parameters.AddWithValue(columname,0.0d); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:00:09.180

您使用错误的文字类型将浮点数插入数据库，并且您正在进行字符串比较。使用点而不是逗号。

请记住，SQLite 的类型非常[松散](http://www.sqlite.org/datatype3.html)：

> SQLite 使用更通用的动态类型系统。在 SQLite 中，值的数据类型与值本身相关联，而不是与其容器相关联。

SQL Fiddle[在这里](http://sqlfiddle.com/#!7/f00e9/3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:56:30.213

看来您是在比较字符串而不是数字。也许将您的号码格式化为“4.4”而不是“4,4”

# linux - 打开 bash -x

> ID：13991377
> 
> 赞同：4
> 
> 时间：2012-12-21T13:50:27.950
> 
> 标签：linux, bash

当我在我的 Linux 控制台上为我输入的每个命令打开 bash -x 时，我都会得到这个输出。

`printf "\033]0;%s@%s:%s\007" "${USER}" "${HOSTNAME%%.*}" "${PWD/#$HOME/~}"`

这很烦人，我怎么能把它关掉。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:54:57.650

此命令输出转义序列以更改终端仿真器的标题。所以我猜它是在你的`.bashrc`or `.bash_profile`when `TERM`match中配置的`xterm*`。看看那里并评论代码。

打印命令是因为`bash -x`将显示调用的每个命令，即使它是打印的一部分`$PS1`。这就是为什么您可能不想`set -x`在交互式 shell 中使用，但可能应该将您的代码放在脚本中并`set -x`在开头和`set +x`结尾添加（可选，除非您`source`这样做）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:24:11.813

问题不是为什么，而是如何解决。在 bash 提示符下键入：

```
unset PROMPT_COMMAND; PS1='\w> ' 
```

现在为什么。command in`PROMPT_COMMAND`在每个 bash 命令（它设置`PS1`）之后进行评估，您通常看不到此活动。但有`-x`你可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:16:38.733

这似乎是您的`$PROMPT_COMMAND`变量在起作用。您可能只想`$PS1`改用。

见[http://www.gnu.org/software/bash/manual/bashref.html#index-PPID](http://www.gnu.org/software/bash/manual/bashref.html#index-PPID)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:50:36.843

您可以使用`set -x`打开调试和`set +x`关闭它。

当您打开调试选项时，BASH 将打印出`$P4`每一行的值。默认情况下，它是一个简单的`+`后跟空格。尝试设置`PS4='+ '`。

如果这不起作用，您有一个用于`$PROMPT_COMMAND`设置提示的 Kornshell 用户。在提示符中显示用户名和目录等有用信息是很常见的。在 BASH 中，您可以使用各种转义序列来做到这一点。例如：

```
PS1="\u@\h:\w$ " 
```

将替换`\u`为用户名，`\h`短主机名，`\w`当前目录基于`$HOME`目录，如果用户在`$HOME/bin`，提示将显示

```
david@foo-sys:~/bin$ 
```

如果用户在`/usr/bin`，提示将是

```
david!@foo-sys:/usr/bin$ 
```

使用 Kornshell，您不能使用这些*转义序列*。相反，您可以为`cd`命令设置别名，并使用 cd 函数来设置提示。或者，您使用`$(..)`语法。我使用 Kornshell，提示符如下所示：

```
PS1=$(print -n "`logname`@`hostname`:";if [[ "${PWD#$HOME}" != "$PWD" ]] then; print -n "~${PWD#$HOME}"; else; print -n "$PWD";fi;print "\n$ ") 
```

恶心，不是吗？在 BASH 中，我可以这样做：

```
PS1="\u@\h:\w\n$ " 
```

无论如何，Kornshell 用户在使用 BASH 时设置`$COMMAND_PROMPT`变量而不是使用*转义序列*是很常见的，因为他们知道这样做。而且，当你这样做时，你会看到每次都打印出提示命令。例如，我可以这样设置我的 BASH 提示：

```
PROMPT_COMMAND="print -n "`logname`@`hostname`:";if [[ "${PWD#$HOME}" != "$PWD" ]] then; print -n "~${PWD#$HOME}"; else; print -n "$PWD";fi;print "\n$ " 
```

当我`set -x`设置好后，我每次都会看到打印出来的。

你应该做的是进入`$HOME/.bash_profile`或如果该文件不存在`$HOME/.profile`，并摆脱设置的行`PROMPT_COMMAND`。相反，将其更改为：

```
PS1="\e]0\u@\h:\w\a$ " 
```

这或多或少是相同的提示。如果您不想更改`.profile`or `.bash_profile`，那么只需执行以下操作：

```
$ unset PROMPT_COMMAND
$ PS="\e]0\u@\h:\w\a$ " 
```

另一种可能性：可能是您没有看到在 中设置的提示`$HOME/.bash_profile`，`$HOME/.profile`甚至`$HOME/.bashrc`。在这种情况下，您的系统管理员是 Kornshell 人员，他们已在`/etc/profile`文件中设置了提示。您必须通过在`$HOME/.bash_profile`文件末尾添加上述两行来自己覆盖文件中的提示设置。

# java - java语言密文中的凯撒密码失败

> ID：13991379
> 
> 赞同：4
> 
> 时间：2012-12-21T13:50:29.727
> 
> 标签：java, encryption

我用 Java 语言制作凯撒密码加密器，这是我的代码

```
private void encCaesar() {
    tempCipher = "abcdef";
    char[] chars = tempCipher.toCharArray();
    for (int z = 0; z < tempCipher.length(); z++) {
        char c = chars[z];
        if (c >= 32 && c <= 126) {
            int x = c - 32;
            x = (x + keyCaesar) % 96;
            if (x < 0)
                x += 96;
            chars[z] = (char) (x + 32);
        }
    }
    ciphertext = chars.toString();
    etCipher.setText(ciphertext);
} 
```

我找不到任何错误，但密文是这样的 405888，这是胡说八道，明文是“abcdef”，默认密钥是 3

怎么了？

正确的 ：

```
private void encCaesar() {
    tempCipher = "abcdef";
    char[] chars = tempCipher.toCharArray();
    for (int z = 0; z < tempCipher.length(); z++) {
        char c = chars[z];
        if (c >= 32 && c <= 126) {
            int x = c - 32;
            x = (x + keyCaesar) % 96;
            if (x < 0)
                x += 96;
            chars[z] = (char) (x + 32);
        }
    }
    ciphertext = new String(chars);
    etCipher.setText(ciphertext);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:53:32.640

您应该创建`ciphertext`with`new String(chars)`而不是`chars.toString()`：

```
ciphertext = new String(chars); 
```

# php - PHP致命错误：超过最大执行时间

> ID：13991380
> 
> 赞同：-2
> 
> 时间：2012-12-21T13:50:33.663
> 
> 标签：php, mysql

我有这个问题：这个脚本检查链接上某个列表的 pagerank。当我插入〜150个链接时，它可以正常工作，但是如果我放置大量链接，则会显示以下错误：

![在此处输入图像描述](../Images/1c31be3c8e691eead770d2c3efa4ece5.png)

这是代码：

```
<?php
    error_reporting(E_ALL & ~E_NOTICE);
    function StrToNum($Str, $Check, $Magic)
    {
        $Int32Unit = 4294967296;  // 2^32

        $length = strlen($Str);
        for ($i = 0; $i < $length; $i++) {
            $Check *= $Magic;     
            if ($Check >= $Int32Unit) {
                $Check = ($Check - $Int32Unit * (int) ($Check / $Int32Unit));

                $Check = ($Check < -2147483648) ? ($Check + $Int32Unit) : $Check;
            }
            $Check += ord($Str{$i}); 
        }
        return $Check;
    }
    function CheckHash($Hashnum)
    {
        $CheckByte = 0;
        $Flag = 0;

        $HashStr = sprintf('%u', $Hashnum) ;
        $length = strlen($HashStr);

        for ($i = $length - 1;  $i >= 0;  $i --) {
            $Re = $HashStr{$i};
            if (1 === ($Flag % 2)) {              
                $Re += $Re;     
                $Re = (int)($Re / 10) + ($Re % 10);
            }
            $CheckByte += $Re;
            $Flag ++;    
        }

        $CheckByte %= 10;
        if (0 !== $CheckByte) {
            $CheckByte = 10 - $CheckByte;
            if (1 === ($Flag % 2) ) {
                if (1 === ($CheckByte % 2)) {
                    $CheckByte += 9;
                }
                $CheckByte >>= 1;
            }
        }

        return '7'.$CheckByte.$HashStr;
    }
    function HashURL($String)
    {
        $Check1 = StrToNum($String, 0x1505, 0x21);
        $Check2 = StrToNum($String, 0, 0x1003F);

        $Check1 >>= 2;     
        $Check1 = (($Check1 >> 4) & 0x3FFFFC0 ) | ($Check1 & 0x3F);
        $Check1 = (($Check1 >> 4) & 0x3FFC00 ) | ($Check1 & 0x3FF);
        $Check1 = (($Check1 >> 4) & 0x3C000 ) | ($Check1 & 0x3FFF);    

        $T1 = (((($Check1 & 0x3C0) << 4) | ($Check1 & 0x3C)) <<2 ) | ($Check2 & 0xF0F );
        $T2 = (((($Check1 & 0xFFFFC000) << 4) | ($Check1 & 0x3C00)) << 0xA) | ($Check2 & 0xF0F0000 );

        return ($T1 | $T2);
    }
    function getpagerank($url) {
        $query="http://toolbarqueries.google.com/tbr?client=navclient-auto&ch=".CheckHash(HashURL($url)). "&features=Rank&q=info:".$url;
        $data=file_get_contents($query);
        $pos = strpos($data, "Rank_");
        if($pos === false){} else{
            $pagerank = substr($data, $pos + 9);
            return $pagerank;
        }

    }
    if($_POST['urls'])
    {
        ?><table border="1">
        <th>URL</th>
        <th>Pagerank</th>
        <?
        $urls=trim($_POST['urls']);
        $url=explode("\n",$urls);
        foreach($url as $url)
        {
            if($url)
            {
                $url=trim($url);
                $pagerank=getpagerank($url);
                ?>
                <tr><td><?php echo $url; ?></td><td><?php echo $pagerank; ?></td></tr>
                <?        
                flush();
            }                
        }
        ?></table><?
    }
    else
    {
        ?><form action="" method="post">
        URLS:<br /><textarea name="urls" cols="50" rows="10">http://www.google.com
    http://www.yahootracer.com</textarea><br /><input type="submit" value="Check PR"/>
        </form>
        <?
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:54:09.323

您已达到默认脚本执行超时。您可以尝试使用`set_time_limit(0)`禁用超时。但是您可能正在网络服务器下运行您的脚本 - 然后可能会应用网络服务器超时，这是无法避免的，并且由系统管理员配置。在这种情况下 - 最好的办法是通过运行 shell 脚本（例如 cronjob）来执行大量插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:02:23.597

您必须`set_time_limit(0)`在行后 添加`$query="http://toolbarqueries.google.com/tbr?client=navclient-auto&ch=".CheckHash(HashURL($url)). "&features=Rank&q=info:".$url;`

# yii - 使用 Yii 框架的多语言网站

> ID：13991382
> 
> 赞同：-1
> 
> 时间：2012-12-21T13:50:42.917
> 
> 标签：yii, multilingual

我是 Yii 框架的新手。如何使用它开发多语言网站？我需要一份关于它的文件。

你能给我一些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:53:53.673

你可以从 wiki 开始：[http ://www.yiiframework.com/wiki/?tag=multilanguage](http://www.yiiframework.com/wiki/?tag=multilanguage)

# combobox - 带有数据源的 AjaxControlToolkit 组合框不接受键盘输入

> ID：13991383
> 
> 赞同：0
> 
> 时间：2012-12-21T13:50:50.040
> 
> 标签：combobox, ajaxcontroltoolkit

我试图在列表框模式下将 AjaxControlToolkit 组合框与 sqldatasource 一起使用，并建议追加。我发现在列表框模式下，在您输入然后退出文本框或单击下拉箭头之前，无法在框中键入。我无法在网上找到解决方案。有没有其他人遇到过这个问题并知道解决方案？

谢谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:20:56.927

将此代码放入您的 Page_Load 事件中以将您的组合框实例化为第一个索引

```
ComboBox1.SelectedIndex = 0; 
```

# python - 来自 Twitter 流 API 的推文

> ID：13991387
> 
> 赞同：0
> 
> 时间：2012-12-21T13:51:12.397
> 
> 标签：python, twitter

使用 Twitter Streaming API 从特定查询中获取推文。

然而，一些推文带有不同的编码（有框而不是文字）。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:52:36.187

使用不同的字体，或更好的显示方法。

流 API 中的所有推文都使用相同的编解码器进行编码（JSON 数据完全支持 unicode），但并非所有字符都可以通过所有字体显示。

# ios - iPad禁用横向模式，对App Store审批有何影响？

> ID：13991391
> 
> 赞同：0
> 
> 时间：2012-12-21T13:51:14.160
> 
> 标签：ios, app-store

我目前正在开发一个 iPad 应用程序，我们正在考虑禁用横向模式。

这会以任何方式影响 App Store 的批准吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:53:12.920

禁用横向模式不会妨碍您获得应用批准的机会。

确实，只有当您的应用程序需要它或使用它有一些优势时，横向方向才有意义；这不是强制性的。我在 App Store 中有几个不支持横向模式的应用程序，我对批准没有任何问题。

因此，您应该关注的是，同时支持方向（和自动旋转）是否对您的应用程序的用户有益。这是唯一的担忧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:53:15.647

不。应用程序只支持一种视图模式是完全可能和合理的。所以你可以去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:54:05.730

不，不会影响。你可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T13:54:52.403

你会被拒绝是值得怀疑的，因为我在

[应用商店审核指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)

暗示它会被拒绝。

我敢肯定，该文档中曾经有一些内容表明，如果应用程序不支持所有可能的方向，则可能会被拒绝，我希望您对此感到担忧。

# sql - 将结果集设置为表格

> ID：13991394
> 
> 赞同：-1
> 
> 时间：2012-12-21T13:51:28.527
> 
> 标签：sql

**您好，我想将结果集作为表格供您选择**

```
ResultSet rs=statement.executeQuery("SELECT FROM"); 
```

为了清楚起见，我使用了 sql server 并输入了

```
select * from (select column from table) as newtable where newtable.column='someting' 
```

这适用于sql server，但不适用于java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:56:37.007

通过以下步骤，您可以将结果集创建为表格。

```
PreparedStatement st = null;
st = con.prepareStatement("create table newTable select * from table");
st.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:03:48.397

**创建表**

`CREATE TABLE TABLE_NAME AS SELECT * FROM USERS`

**创建视图（虚拟表）**

`CREATE OR REPLACE VIEW VIEW_NAME AS (SELECT * FROM users);`

**注意：**视图是基于 SQL 语句结果集的虚拟表

**更新**

我不这么认为，这是一个问题`java`。如果您的查询在`sql server`. 然后它将在您的 java 程序中返回相同的值。因为，java 不负责`sql`查询。您必须缺少所需的驱动程序/包。您必须尝试一些基本查询`select * from user`，例如并检查它是否通过您的 java 程序显示任何输出。

**试试这个**

```
select newtable.column,newtable.column1,newtable.column2 from (select * from table) as newtable where newtable.column='someting' 
```

If above statement won't work again, then you must have done something wrong in your java code. And it is you, who would be responsible **NOT** java. And,Please **don't blame JAVA**

# java - 无法启动新活动（android）

> ID：13991396
> 
> 赞同：-2
> 
> 时间：2012-12-21T13:51:34.850
> 
> 标签：java, android

我正在尝试开始一项新活动，但我的应用程序停止了。如果 if 条件为真，则执行注册活动并工作，但如果为假，则跟踪活动停止我的应用程序 这是代码：

```
if(condition)
{
    Intent register = new Intent(HomeActivity.this, Register.class);
    HomeActivity.this.startActivity(register);
}
else
{
    Intent login = new Intent(HomeActivity.this, Track.class);
    HomeActivity.this.startActivity(login);
} 
```

也许这与我的 Track 课程有关？

日志猫：

```
 12-21 15:46:16.265: D/AndroidRuntime(540): Shutting down VM
12-21 15:46:16.265: W/dalvikvm(540): threadid=1: thread exiting with uncaught exception (group=0x40c711f8)
12-21 15:46:16.265: E/AndroidRuntime(540): FATAL EXCEPTION: main
12-21 15:46:16.265: E/AndroidRuntime(540): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.location/com.example.android.location.HomeActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.android.location/com.example.android.location.Track}; have you declared this activity in your AndroidManifest.xml?
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.ActivityThread.access$600(ActivityThread.java:128)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.os.Looper.loop(Looper.java:137)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.ActivityThread.main(ActivityThread.java:4514)
12-21 15:46:16.265: E/AndroidRuntime(540):  at java.lang.reflect.Method.invokeNative(Native Method)
12-21 15:46:16.265: E/AndroidRuntime(540):  at java.lang.reflect.Method.invoke(Method.java:511)
12-21 15:46:16.265: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
12-21 15:46:16.265: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
12-21 15:46:16.265: E/AndroidRuntime(540):  at dalvik.system.NativeStart.main(Native Method)
12-21 15:46:16.265: E/AndroidRuntime(540): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.android.location/com.example.android.location.Track}; have you declared this activity in your AndroidManifest.xml?
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1388)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.Activity.startActivityForResult(Activity.java:3281)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.Activity.startActivity(Activity.java:3388)
12-21 15:46:16.265: E/AndroidRuntime(540):  at com.example.android.location.HomeActivity.onCreate(HomeActivity.java:44)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.Activity.performCreate(Activity.java:4562)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
12-21 15:46:16.265: E/AndroidRuntime(540):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
12-21 15:46:16.265: E/AndroidRuntime(540):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:00:23.507

```
<activity android:name=".Track" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:56:58.137

这可能是因为清单中缺少马蹄莲的声明，将下面的行添加到清单中

```
 <activity android:name=".Track">
     <intent-filter>
          <action android:name="android.intent.action.ACTIVITY" />
     </intent-filter>
  </activity> 
```

[补充1]

如果您查看日志，您会看到

> 找不到明确的活动类 {com.example.android.location/com.example.android.location.Track}；您是否在 AndroidManifest.xml 中声明了此活动？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:56:06.320

你必须在你的 manifest.xml 文件中声明你的活动......也许这可能是原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T14:02:11.660

您的 Track 类未在您的 Manifest 中声明为您的 logcat 显示。尝试在清单中添加该 Track 类。

```
 <activity
        android:name=".Track"
        android:label="@string/app_name">
    </activity> 
```

# css - Django-CMS管理员没有css文件夹？

> ID：13991397
> 
> 赞同：2
> 
> 时间：2012-12-21T13:51:36.393
> 
> 标签：css, django, django-cms

我安装了 Django-CMS，但我的管理页面无法正确显示，因为它正在 中查找 CSS 文件`/static/admin/css/`，但我安装中的 admin 文件夹没有 .css 文件，并且管理页面使用了一个名为 .css 的文件`dashboard.css`，该文件存在在 django-cms 下载中无处。我应该在哪里获取 django-cms 管理插件的 .css 和图像文件？

# c++ - 定义一个常量数据成员

> ID：13991399
> 
> 赞同：0
> 
> 时间：2012-12-21T13:51:42.910
> 
> 标签：c++, static, constants

节目#1

```
// file.h
class File
{
public:
    static const int var = 9;
}; 
```

-

```
// main.cpp
#include <iostream>
#include "file.h"
using namespace std;

int main() {
    File f;
    cout << f.var;
    return 0;
} 
```

* * *

节目#2

```
// file.h
int GlobalVar ;
class File
{
public:
    static const int var = 9;
}; 
```

-

```
// main.cpp
extern int GlobalVar;

#include <iostream>
#include "file.h"
using namespace std;

int main() {
    cout << GlobalVar;
    return 0 ;
} 
```

* * *

程序#1 运行良好，但程序#2 给出链接器错误：

```
error LNK2005: "int GlobalVar" (?x@@3HA) already defined in file.obj 
```

我知道头文件永远不会被编译。那么在上述情况下，编译器如何知道变量 var 的定义，却找不到`GlobalVar`? 这两个程序有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T13:54:07.513

当你使用

```
#include "some_header.h" 
```

或者

```
#include <some_header.h> 
```

这些`include`指令直接*被预处理器替换为`some_header.h`.

因此，当您编译`cpp`文件时，它实际上包含`some_header.h`. 这就是这段代码的编译方式。

[* - 如果你有包含守卫，我会跳过内容，如果它已经包含在其他标题中]

* * *

**编辑：**关于您的编辑 - 关于`extern`：这不是正确的方法。

```
extern int GlobalVar ; 
```

应该放在**标题**中，并且

```
int Globalvar ; 
```

应该在**cpp**文件中。你应该阅读更多关于`extern`它是如何工作的以及它是做什么的（提示：假设你只想有**一个**变量，在一个地方定义并且可以在多个 cpp 文件中访问 - 你会怎么做？有很多SO中的问题也是关于这个案例的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T05:12:15.893

对静态 const 数据成员有一定的限制，类似于对内联函数的允许（在类声明中或标记为内联的头文件中定义的函数）。对于原始类型（例如整数）的静态 const 数据成员，允许在头文件中定义它们，即使这在技术上会导致违反单一定义规则 (ODR)，因为对于此类原始类型并假设所有链接器看到的那些数据成员的实例来自同一个头文件，可以安全地假设它们都是相等的。而且因为它们是常量，所以拥有许多副本（或完全优化它们）没有问题，但如果是非常量，则必须保证单个实例被操纵。并且因为它们是原始类型（具有微不足道的构造函数），所以不存在静态数据成员（在多个翻译单元中）的多重构造的副作用问题，但如果是非原始类型，则必须保证构造在静态初始化期间只发生一次。因此，很明显，这个例外规则不适用于非常量和/或非原始（类类型）的静态数据成员，在这种情况下，它们必须仅在一个翻译单元中定义（一个编译的 cpp 文件） .

# javascript - 在 Kendo UI Grid ColumnMenu 中为应用的过滤器签名

> ID：13991401
> 
> 赞同：0
> 
> 时间：2012-12-21T13:51:45.130
> 
> 标签：javascript, asp.net, filter, grid, kendo-ui

是否可以指出用户注意，在使用列菜单时，此时应用了来自列菜单过滤器的某些过滤器？并跟踪应用的过滤器？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:05:02.317

创建一些用户可以看到的 HTML 元素，并将其内容设置为从dataSource的[**filter** ()方法返回的对象中的字段值。](http://docs.kendoui.com/api/framework/datasource)每次触发 dataSource 的**[change](http://docs.kendoui.com/api/framework/datasource#change)**事件时也要更新其内容。

我希望你明白了。

# cocos2d-iphone - 来自本地文件的 CCSprite 绘制为黑色

> ID：13991402
> 
> 赞同：0
> 
> 时间：2012-12-21T13:52:01.653
> 
> 标签：cocos2d-iphone, uiimage, ccsprite

在开发我的下一个应用程序时遇到了一个奇怪的问题。我需要从服务器下载用户配置文件图像（png 文件）并将其添加为 CCSprite。下载工作完美。但是当我想从这张图片中制作一个 CCSprite 时，我得到了黑色正方形（我必须承认这个正方形的尺寸正确：100x100）。那么这张图有什么问题呢？如何更正图像属性以从中制作 CCSprite？

我使用 kCCTexture2DPixelFormat_RGBA8888 作为 DefaultAlphaPixelFormat。

编辑：我已将此 png 文件上传到保管箱文件夹（临时），因此您可以自己测试它。 [http://dl.dropbox.com/u/52921941/profilePicture.png](http://dl.dropbox.com/u/52921941/profilePicture.png)

# .net - .NET：使用 First() 或 Take() 获取 HashSet 元素

> ID：13991404
> 
> 赞同：0
> 
> 时间：2012-12-21T13:52:12.197
> 
> 标签：.net, visual-c++, c++-cli, hashset, visual-c++-2010

好的，我遇到了 .NET 初学者的问题。我正在使用 C++/CLI，所以很难找到代码示例。WWW 给了我很多要阅读的东西 - 但没有解决方案。

我正在使用.NETs HashSet。我试图获取/获取集合的随机元素。它实际上不能是**随机**元素，它也可能是第一个或最后一个。只需任何一个元素。

没有提供这个的方法。但是文档[http://msdn.microsoft.com/en-us/library/bb359438.aspx](http://msdn.microsoft.com/en-us/library/bb359438.aspx)列出了一些所谓的“扩展方法”。其中一个可以解决我的问题的是`First()`. 唉，我不知道如何使用它。我尝试`myHashSet->First()`了其他一些垃圾，但编译器告诉我它不知道该方法。

所以，请告诉我如何使用**C++/CLI**在 HashSet 上调用 First()“扩展方法” 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:02:53.607

该`First`方法是 Linq 提供的众多扩展方法之一。鉴于您使用的是 C++/CLI，您可能需要查看[有关如何将 Linq 与 C++/CLI 一起使用的问题](https://stackoverflow.com/questions/5643734/how-to-use-linq-in-c-cli-in-vs-2010-net-4-0)。

# java - 试图解析 Excel 文件

> ID：13991410
> 
> 赞同：0
> 
> 时间：2012-12-21T13:52:36.747
> 
> 标签：java, apache-poi

我正在尝试以这样一种方式解析 excel 文件，即当我找到一个空单元格时，我将添加到字符串的值中。示例代码：

```
for (int e = 0; e < wb.getNumberOfSheets(); e++) {
    sheet = wb.getSheetAt(e);
    for (int i = sheet.getFirstRowNum(); i < sheet.getLastRowNum(); i++) {
        System.out.println(sheet.getSheetName());
        row = sheet.getRow(i);
        if(row != null) {
            cell = row.getCell(0, Row.RETURN_BLANK_AS_NULL);
            if(cell.getCellType() != Cell.CELL_TYPE_BLANK) {
                cell = row.createCell(i);
                cell.setCellValue("foo");
            }
            cell = row.getCell(1, Row.RETURN_BLANK_AS_NULL);
            if(cell == null) {
                cell = row.createCell(i);
                cell.setCellValue("bar");
            }
            cell = row.getCell(2, Row.RETURN_BLANK_AS_NULL);
            if(cell == null) {
                cell = row.createCell(i);
                cell.setCellValue(0.0);
            }
        }
} 
```

我尝试了很多解决方案，我总是得到一个异常 NullPointerException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:00:20.893

知道哪一行给了你例外可能很有用，但我敢打赌是这一行：

```
cell = row.getCell(0, Row.RETURN_BLANK_AS_NULL);
if(cell.getCellType() != Cell.CELL_TYPE_BLANK) { 
```

据我所知，如果单元格为空，则策略 RETURN_BLANK_AS_NULL[将返回空值](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Row.html#RETURN_BLANK_AS_NULL)。因此，如果您在那里得到一个空白单元格，`cell.getCellType()`则 if 语句中的 引发 NullPointerException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:00:26.900

您在第一次检查中有 NPE，单元格为空：

```
cell = row.getCell(0, Row.RETURN_BLANK_AS_NULL);
if(cell.getCellType() != Cell.CELL_TYPE_BLANK) { 
```

稍后您检查正确：

```
cell = row.getCell(2, Row.RETURN_BLANK_AS_NULL);
if(cell == null) { 
```

创建新的细胞使用

```
Row.CREATE_NULL_AS_BLANK 
```

# java - 如何在 JSF2 Netbeans 项目中使用 Web 服务？

> ID：13991411
> 
> 赞同：2
> 
> 时间：2012-12-21T13:52:40.173
> 
> 标签：java, wcf, web-services, jsf, jsf-2

我知道这个问题被问了很多次，我读了很多，但我认为我缺少基本的东西，所以它对我不起作用..

（项目在 JSF2、Netbeans 7.3beta、Glassfish3.. 和用 WCF 编写的 Web 服务中）我已经做了什么：

1.  创建一个 JSF2 项目。
2.  右键单击项目，新建 Web 服务客户端。填写 WSDL URL。结束
3.  创建 ManagedBean，打开它。从我的 Web 服务中拖放“DoWork”方法。
4.  看看我的简单代码（我有 index.html，我在其中显示 DataTable，它是在我的 managedbean 中创建的） index.html

    ```
    <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:p="http://primefaces.org/ui">     
        <h:head><title>IGNORED</title></h:head>
        <h:body>
            <ui:composition template="/templates/masterPage.xhtml">         
                <ui:define name="content">
                    <h:form>
                       <h3>and #{bean.tst}!</h3>                           
                       <p:dataTable value="#{bean.rows}" var="row">
                           <p:columns value="#{bean.columns}" var="column" headerText="#{bean.headers[column]}">
                           #{row[column]}
                           </p:columns>
                       </p:dataTable>  
                    </h:form>
                </ui:define>                        
            </ui:composition>
        </h:body>
    </html> 
    ```

和... bean.java

```
 @Named(value = "bean")
    @SessionScoped
    public class Bean implements Serializable {  
        @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_62599/TestService.svc.wsdl")
        private TestService service;

        ... // list, maps.. not important for this example

        public Bean() {
            columns = new ArrayList<String>();  
            rows = new ArrayList<Map<String, Object>>();         
            headers = new HashMap<String,String>();

            // Columns:
            for(int i = 0 ; i < 4 ; i++)  
            {
                String column_id = "c" + i;
                String column_name = "Column name " + i;           
                columns.add(column_id);                                    
                headers.put(column_id, column_name);            
            }

            // Rows:
            for(int i = 0 ; i < 100 ; i++)  
            {               
                Map<String,Object> m = new HashMap<String,Object>();
                m.clear();          
                for(int j = 0 ; j < 4 ; j++)  
                {
**// HERE IT DOESNT WORK in table i've got Content:Null**
                    m.put("c" + j, "Content:" + Tst); 
                }                                               
                rows.add(m);
            }       
        }

        private String Tst;
        public String getTst() {
            return doWork("Test");
        }

        private String doWork(java.lang.String str) {
            DataTable.ITestService port = service.getBasicHttpBindingITestService();
            return port.doWork(str);
        } 
    } 
```

为什么我不能在我的托管 bean 中使用它？我做错了什么？我想在 bean 中使用它，这样我就可以填充我的 DataTable ...

# c# - 正则表达式问题 C#

> ID：13991418
> 
> 赞同：1
> 
> 时间：2012-12-21T13:53:08.987
> 
> 标签：c#, .net, windows

尝试使用以下正则表达式时遇到问题：

```
string profileConfig = File.ReadAllText(str);

string startIndex = "user_pref(\"network.proxy.autoconfig_url\", \"";
string endIndex = "\"";

var regex = startIndex + "(.*)" + endIndex;
// Here we call Regex.Match.
Match match = Regex.Match(profileConfig, 
                          regex,
                          RegexOptions.IgnoreCase);

// Here we check the Match instance.
if (match.Success)
{
    // Finally, we get the Group value and display it.
    string key = match.Groups[1].Value;
    MessageBox.Show(key);
} 
```

我得到错误：

> 附加信息：解析“user_pref("network.proxy.autoconfig_url", "(.*)"" - 还不够)。

我的正则表达式是否以某种方式格式错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T13:54:52.503

如果您打算`(`从字面上匹配字符，请转义第一个括号：

```
string startIndex = "user_pref\\(\"network.proxy.autoconfig_url\", \""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:56:40.643

纠正这个：

```
"user_pref(\"network. -> "user_pref\(\"network.
                                   ^ 
```

# iphone - 设置 VC.view 出现在不适合我的父 VC 的视图中

> ID：13991423
> 
> 赞同：0
> 
> 时间：2012-12-21T13:53:21.317
> 
> 标签：iphone, objective-c, ios

我正在尝试做一些非常简单的事情，所以我使用 SingleViewApplication 模板创建了一个测试项目。

在 ViewController.xib 中，我向主视图添加了一个子 UIView。我创建了一个 UIView 类型的 IBOutlet 并将其链接到 XIB 中的该视图。

我创建了一个名为 TVC 的第二类和 xib，并将它的背景颜色更改为蓝色，以便在它出现时很明显。

在 ViewController.m 中，我开始制作 TVC，如下所示：

```
self.childView = [[TVC alloc] initWithNibName:@"TVC" bundle:nil].view; 
```

但没有任何改变。我在 TVC 方法 initWithNibName 中设置了一个断点，它确实被调用了。

我做错了什么？我发誓过去我已经这样做了 10 次，并且一直有效。-.- 我今天错过了什么？

谢谢，-代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:57:34.150

您正在实例化视图控制器，但实际上从未对它做任何事情。如果您想以模态方式呈现它，请使用以下命令：

```
UIViewController *controller = [[TVC alloc] initWithNibName:@"TVC" bundle:nil];
[self presentViewController:controller animated:YES completion:nil]; 
```

或者，如果您只想将新的控制器视图添加到当前视图，则需要使用：

```
[[self view] addSubview:controller.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:58:40.553

让我们分解一下。

您的第一个 XIB 创建您的控制器，创建它的 childView 并在您创建第一个控制器时自动将其添加为子视图。

然后创建第二个控制器，获取它的视图并将其分配给 childView。

窗帘后面发生了什么？您的父视图控制器仍然将原始 childView 添加为子视图，并且由于您从未这样做过`[self.view addSubview:self.childView];`，因此您的 TVC.view 将永远不会显示。

**如何使它工作：** 为了使它工作，你需要从你的父控制器的xib中取出你的childView，`IBOutlet`如果你愿意，你可以从属性中删除标签。然后，添加以下代码：

```
self.tvc = [[TVC alloc] initWithNibName:@"TVC" bundle:nil];
self.childView = [[TVC alloc] initWithNibName:@"TVC" bundle:nil].view;
[self.view addSubview:self.childView]; 
```

是的，您需要将控制器存储在某个地方。如果您使用视图并且不在任何地方保留控制器，它将被释放并且您将开始遇到错误的访问崩溃

# extjs - 窗体内的对齐问题

> ID：13991425
> 
> 赞同：1
> 
> 时间：2012-12-21T13:53:21.620
> 
> 标签：extjs

团队，

我面临一个问题，我无法在表单面板内对齐文本框。基本上我想要内面板内的 2 列布局

基本上我正在创建一个表单面板，在里面我计划再创建 3 个面板，但文本框总是换行。

下面的代码。

```
<html>
<head>
<title>Hello World Window</title>
<link rel="stylesheet" type="text/css" href="ext-3.4.0/resources/css/ext-all.css" />
<script type="text/javascript" src="ext-3.4.0/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="ext-3.4.0/ext-all.js"></script>
</head>

<body>
<script type="text/javascript">

    Ext.onReady(function(){
        var tab2 = new Ext.FormPanel({
            labelAlign: 'top',
            title: 'formname',
            bodyStyle:'padding:5px',
            width: 1200,
            height:600,
            items: [{
                xtype:'panel',
                plain:true,
                border:false,
                activeTab: 0,
                height:50,
                autoScroll:true,
                items:[{
                title:'Personal Details',
                defaults: {width: 230},
                layout:'form',
                defaultType: 'textfield',
                    items: [

                        {
                            fieldLabel: 'First Name',
                            name: 'first',
                            allowBlank:false,
                            value: 'Jack'
                        },{
                            fieldLabel: 'Last Name',
                            name: 'last',
                            value: 'Slocum',

                        },{ 
                            xtype:'combo',
                            fieldLabel: 'Company',
                            name: 'company',
                            value: 'Ext JS'
                        }, {
                            fieldLabel: 'Email',
                            name: 'email',
                            vtype:'email'
                        }]

                }]
                }],
            buttons: [{
            text: 'Save'
            },{
            text: 'Cancel'
            }]
        });

    tab2.render(document.body); 

});
</script> 

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:20:08.940

使用 ExtJS 4，您不需要使用表单布局来管理字段标签：您可以使用每个布局容器来布局表单中的字段（查看此[http://docs.sencha.com/ext-js/4- 0/#!/指南/升级](http://docs.sencha.com/ext-js/4-0/#!/guide/upgrade)）。因此，请尝试为 FormPanel 使用列布局，然后添加 2 个子容器，每个子容器都具有 vbox 布局来管理所需的列：

```
new Ext.FormPanel({
        layout: 'column',
        items: [
        {
           xtype:'container',
           columnWidth: .5,
           layout: 'vbox',
           items: [
           put here left column items
           ]
        },
        {
           xtype:'container',
           layout: 'vbox',
           columnWidth: .5,
           items: [
           put here right column items
           ]
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-24T08:29:55.990

这是在带有 ExtJS 3.4 的 TabPanel 中工作的：

```
// p is the tabPanel
t = p.add ({
    xtype: 'form',
    layout: 'column',
    items: [
        {
            xtype:'container',
            columnWidth: .5,
            frame: false,
            items: new Ext.Panel ({
                frame: false,
                bodyCssClass: 'x-panel-mc',
                bodyStyle: 'background-color: white',
                layout: 'form',
                items: formPart
            }),
        }, {
            xtype:'container',
            columnWidth: .5,
            items: buttonPart,
        }
    ],
}); 
```

# iphone - 如何在 uipickerview 中禁用一个组件，直到选择另一个组件

> ID：13991426
> 
> 赞同：0
> 
> 时间：2012-12-21T13:53:23.183
> 
> 标签：iphone, objective-c, xcode

我正在创建一个包含 2 个组件的选择器视图。第一个组件有国家名称，第二个有他们的城市。现在我的要求是，只有在选择第一个组件之前，用户才能选择第二个组件，直到第二个组件处于禁用状态。

注意：主要问题是当用户在重新加载第二个组件之前选择了一个国家并立即选择了城市时，它会出现异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:00:34.810

使用 Dependent pickerView，它会在这种情况下帮助你。

# php - Tank_Auth 的安全库 codeigniter req

> ID：13991437
> 
> 赞同：0
> 
> 时间：2012-12-21T13:54:21.443
> 
> 标签：php, codeigniter, tankauth

Tank Auth 控制器尝试加载“安全库”。

```
$this->load->library('security'); 
```

我在 CodeIgniter FW 内的任何 lib 文件夹中都找不到该库。它不在 Tank_Auth 的包装中。那么它可能在哪里呢？我错过了什么？我在哪里可以买到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:10:12.513

`codeigniter/system/core/Security.php`

# build - 使用 Jenkins 构建连续环境中的 TFS 标签

> ID：13991438
> 
> 赞同：2
> 
> 时间：2012-12-21T13:54:21.857
> 
> 标签：build, tfs, jenkins

我们正在使用 Jenkins 在构建持续环境中改进我们的构建过程。我们有一个持续的构建作业，每次开发人员提交代码时都会运行。今天提出了一个重要问题：我们可以为每个成功构建应用一个 TFS 标签吗？

文件夹结构支持多少标签，何时我想查看历史标签，TFS 是否会一直显示所有标签，或者它是否具有仅显示最后 X 个标签的专家算法。以及每个成功构建的许多标签如何影响性能。（我们估计每天将有超过 10/20 个签入，每天生成 10/20 个构建和 10/20 个标签）。还有更多，有没有办法过滤 VS 历史窗口中的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:07:14.823

是的，您当然可以使用[tf.exe 命令行进行标记](http://msdn.microsoft.com/en-us/library/9ew32kd1%28v=vs.100%29.aspx)，标签始终存在，但可以在查找标签对话框中过滤。我认为它们不会影响性能，除非在查找标签对话框中。但是，在 TFS 构建系统中，当他们从历史记录中删除构建时，他们也会删除构建的标签，因此您也可以尝试维护它并删除某一天过去的所有标签，因为老实说，如果您标记 10-每天 20 次（或每次构建）这些标签中的值到底是多少？标签不会显示在历史窗口中，它们是变更集（签入）并且与标签无关。标签是一段元数据，用于识别整个工作区中每个文件的版本，以便在某些时候如果您需要重建它或检查所有文件，您可以按标签拉下代码并查看确切状态该构建的工作空间。您真的需要每天为所有 20 个构建执行此操作吗？或者是否有用于创建将进入 QA/Stage/Production 的安装程序或包的特殊版本？您可能会发现仅标记这些构建更有用。

# sql - sql中的DateTime差异之和（HH.MM）

> ID：13991440
> 
> 赞同：5
> 
> 时间：2012-12-21T13:54:38.143
> 
> 标签：sql, sql-server, sql-server-2008

我有 SQL 表，例如 DateDiff 的格式（hh.mm）

```
DateDiff   ATM
1.45       121
1.50       121
1.50       121 
```

当我在 ATM 上执行`Sum`DateDiff 时，`Group by`它会显示如下结果

```
4.45    121 
```

但实际的日期时差应该是

```
5.25     121 
```

我们如何在 SQL Query 中实现相同的功能

```
Select Sum(Cast(Convert(Varchar(10),DATEDIFF(HOUR,TicketRaisedOn,ClosedOn))+'.'+
Convert(Varchar(10),DATEDIFF(MINUTE,TicketRaisedOn,ClosedOn)%60) as Numeric(18,2)))[Down Time],ATM 
From Ticket Where Closed=1 And DATEPART(DAYOFYEAR,GETDATE())=DATEPART(DAYOFYEAR,TicketRaisedOn) 
Group BY ATM Order By [Down Time] Desc 
```

`TicketRaisedOn`&`ClosedOn`属于日期时间

数据库是 SQL Server 2008

上面的查询将打印这样的结果（但它是错误的，因为它将作为数字而不是日期时间格式求和）

```
Down Time       ATM
16.95           282
14.46           1811
14.20           52
14.04           936 
```

样本数据

```
Select TicketRaisedOn,ClosedOn,ATM 
From Ticket 
Where ATM=282 And DATEPART(DAYOFYEAR,GETDATE())=DATEPART(DAYOFYEAR,TicketRaisedOn) 
And Closed=1

TicketRaisedOn          ClosedOn                ATM
2012-12-21 01:15:23.793 2012-12-21 15:11:59.240 282
2012-12-21 16:42:29.820 2012-12-21 18:21:30.797 282 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:08:35.847

在格式化之前进行求和

```
SELECT
  ATM,
  CONVERT(VARCHAR(10), SUM(DATEDIFF(Minute, TicketRaisedOn, ClosedOn)) / 60)
  + '.' +
  RIGHT('00' + CONVERT(VARCHAR(2), SUM(DATEDIFF(Minute, TicketRaisedOn, ClosedOn)) % 60), 2)
FROM Ticket
GROUP BY ATM 
```

Sql 小提琴：[http ://sqlfiddle.com/#!3/eca01/1](http://sqlfiddle.com/#!3/eca01/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T14:00:22.007

你在做什么是行不通的，因为1.5代表一个半小时，*而不是*一小时50分钟。

为了得到你想要的，用一个小单位做算术，比如秒，然后把它转换成一个日期时间，然后把日期时间转换成一个最终的表示。这是一个例子：

```
select right(convert(varchar(255),
                     DATEADD(second, DATEDIFF(s, TicketRaisedOn,ClosedOn), cast(0 as datetime)),
                     120),
             8) 
```

# f# - F# 3 SQL 数据库在多列上使用 Type Provider/groupBy

> ID：13991448
> 
> 赞同：9
> 
> 时间：2012-12-21T13:54:53.870
> 
> 标签：f#, type-providers, f#-3.0

评估 F# 3 以使用类型提供程序功能替代编写 T/SQL 或存储过程。

```
let summary = 
  query {   for dsm in db.DistributorSalesMaster do
            join c in db.CustomerMain on 
              ( dsm.CustomerId = c.CustomerId)
            join cal in db.Calendar on
              ( dsm.InvoiceDate =? cal.TheDate)
            join dsd in db.DistributorSalesDetail on
              ( dsm.SalesId = dsd.SalesId)             
            where (dsm.InvoiceDate >= Convert.ToDateTime("2010-12-01") 
                && dsm.InvoiceDate <= Convert.ToDateTime("2011-11-30")
                && c.MainDistributorId=1s
                && c.DistributorId=1s
                && c.CustomerId = 159M
                && cal.APYear?=2011
                )

            groupValBy dsd.InvoiceQuantity ca.APYear into g
            select (g.Key,g.Count())} 
```

它的工作原理与预期的差不多。DB Context 日志将其确认为：

```
 SELECT COUNT(*) AS [Item2], [t2].[APYear] AS [Item1]
    FROM [dbo].[DistributorSalesMaster] AS [t0]
    INNER JOIN [dbo].[CustomerMain] AS [t1] ON [t0].[customerId] = [t1].[customerId]
    INNER JOIN [dbo].[Calendar] AS [t2] ON ([t0].[invoiceDate]) = [t2].[TheDate]
    INNER JOIN [dbo].[DistributorSalesDetail] AS [t3] ON [t0].[salesId] = [t3].[salesId]
    WHERE ([t0].[invoiceDate] >= @p0) AND ([t0].[invoiceDate] <= @p1) AND ([t1].[mainDistributorId] = @p2) AND ([t1].[distributorId] = @p3) AND ([t1].[customerId] = @p4) AND ([t2].[APYear] = @p5)
    GROUP BY [t2].[APYear]
    -- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [12/1/2010 12:00:00 AM]
    -- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [11/30/2011 12:00:00 AM]
    -- @p2: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
    -- @p3: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
    -- @p4: Input Decimal (Size = -1; Prec = 29; Scale = 0) [159]
    -- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [2011]
    -- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.0.30319.17929 
```

但是，尝试以下操作：

```
let summary = 
   query {   for dsm in db.DistributorSalesMaster do
             join c in db.CustomerMain on 
                ( dsm.CustomerId = c.CustomerId)
             join cal in db.Calendar on
                ( dsm.InvoiceDate =? cal.TheDate)
             join dsd in db.DistributorSalesDetail on
                ( dsm.SalesId = dsd.SalesId)             
             where (dsm.InvoiceDate >= Convert.ToDateTime("2010-12-01") 
                    && dsm.InvoiceDate <= Convert.ToDateTime("2011-11-30")
                    && c.MainDistributorId=1s
                    && c.DistributorId=1s
                    && c.CustomerId = 159M
                    && cal.APYear?=2011
                    )

             groupValBy dsd.InvoiceQuantity (cal.APYear, cal.APMonth) into g              
             select (g.Key,g.Count())} 
```

将 DB Context 日志生成为：

```
System.NotSupportedException: The member 'System.Tuple`2[System.Nullable`1[System.Int32],System.Nullable`1[System.Int32]].Item1' has no supported translation to SQL.
   at System.Data.Linq.SqlClient.PostBindDotNetConverter.Visitor.VisitMember(SqlMember m)
   at System.Data.Linq.SqlClient.SqlVisitor.Visit(SqlNode node)
   .
   .
   .
   at System.Data.Linq.DataQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at Microsoft.FSharp.Collections.SeqModule.ToArray[T](IEnumerable`1 source)
   at FSI_0002.showDataGrid[a](IEnumerable`1 x) in D:\Work\Tests\FP\FSharpVS2012\FSharpVS2012\IPFS3ZDPTests.fsx:line 21
   at <StartupCode$FSI_0024>.$FSI_0024.main@()
Stopped due to error 
```

我正在尝试`groupValBy`在多个列（`cal.APYear`，`cal.APMonth`）上。它似乎没有通过数据类型提供程序转换为 SQL。

我找到了一些其他方法来实现结果，但数据库上下文日志表明只有连接被转换为 SQL，剩余`groupBy`/`groupValBy`处理在内存中完成。这是我根本不想要的。我希望整个查询表达式在不在内存中的数据库中翻译和执行。希望我把我的任务说清楚了。

将不胜感激这方面的任何帮助或指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T00:06:28.133

您必须使用[AnonymousObject](http://msdn.microsoft.com/en-us/library/hh324124.aspx)。以下应该有效：

```
let summary = 
   query {   for dsm in db.DistributorSalesMaster do
             join c in db.CustomerMain on 
                ( dsm.CustomerId = c.CustomerId)
             join cal in db.Calendar on
                ( dsm.InvoiceDate =? cal.TheDate)
             join dsd in db.DistributorSalesDetail on
                ( dsm.SalesId = dsd.SalesId)             
             where (dsm.InvoiceDate >= Convert.ToDateTime("2010-12-01") 
                    && dsm.InvoiceDate <= Convert.ToDateTime("2011-11-30")
                    && c.MainDistributorId=1s
                    && c.DistributorId=1s
                    && c.CustomerId = 159M
                    && cal.APYear?=2011
                    )

             let key = AnonymousObject<_,_>(cal.APYear, cal.APMonth)

             groupValBy dsd.InvoiceQuantity key into g              
             select (key.Item1, key.Item2, g.Count())} 
```

# python - 在手写数字示例中使用 scikit-learn 实现 SVM 的特征提取器

> ID：13991453
> 
> 赞同：1
> 
> 时间：2012-12-21T13:54:59.593
> 
> 标签：python, svm, scikit-learn, feature-extraction

在指南中谈到：“在监督问题的情况下，解释变量存储在 .target 成员中。” 这是什么意思？

在 scikit 网站的这个例子中： [http](http://scikit-learn.org/stable/auto_examples/plot_digits_classification.html) ://scikit-learn.org/stable/auto_examples/plot_digits_classification.html 我不明白：

1）如果使用任何特征提取器（边缘检测）来识别数字。

2）目标向量中的平均数字是多少？是图片显示的对应数字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:58:49.383

from 的返回值`datasets.load_digits()`是一个类型的对象`Bunch`，一个用于表示标记数据集的便利类。没有特征提取，数字数据集只包含位图。目标向量中的数字确实是位图表示的数字，即要训练/预测的标签/目标。

# asp.net - 父网格视图

> ID：13991454
> 
> 赞同：1
> 
> 时间：2012-12-21T13:55:04.930
> 
> 标签：asp.net

我有一个带有 2 个子网格视图的网格视图“GridViewTtransmittals”

```
Child 1: GridViewTranstoCon (parent GridViewEfile) 
Child 2: GridViewEfile 
```

GridViewEfile（child2）本身是child1“GridViewEfile”的孩子现在我想定义GridViewEfile_RowDeleting但我有错误（GridViewTranstoCon'在当前上下文中不存在）请帮助是什么问题？

```
 protected void GridViewEfile_RowDeleting(object sender, GridViewDeleteEventArgs e)
 {
     GridView Efile = sender as GridView;
    var parentrow1 = (GridViewRow)Efile.Parent.Parent;
    var parentrow2 = (GridViewRow)Efile.Parent.Parent.Parent;
    //  int transid = Convert.ToInt32(GridViewTtransmittals.DataKeys[e.RowIndex].Value);

    int transid = Convert.ToInt32(GridViewTtransmittals.DataKeys[parentrow2.RowIndex].Value);

    GridView GridViewTranstoCon = GridViewTtransmittals.FindControl("GridViewTranstoCon") as GridView;

    int transmittoconid = Convert.ToInt32(GridViewTranstoCon.DataKeys[parentrow1.RowIndex].Value);
    int FileId = Convert.ToInt32(Efile.DataKeys[e.RowIndex].Value);

    //Also step into this and see what it's doing
    OnDeleteEfile(FileId, transmittoconid, transid);
} 
```

标记如下：

```
 <asp:GridView ID="GridViewTtransmittals" runat="server" AutoGenerateColumns="False" 
          BorderStyle="None" ShowHeader="False" Width="100%" DataKeyNames="TransID"  onrowdatabound="GridViewTtransmittals_RowDataBound"
        onrowdeleting="GridViewTtransmittals_RowDeleting">
          <columns>
              <asp:TemplateField>
                  <ItemTemplate>
                      <asp:RadioButton ID="RadioButton1" runat="server" GroupName="Transmittal" AutoPostBack="True" 
        OnCheckedChanged="RadioButton1_CheckedChanged" />

                  </ItemTemplate>
              </asp:TemplateField>
            <asp:hyperlinkfield DataNavigateUrlFields="TransId" 
              DataNavigateUrlFormatString="~/Copy of Transmittal.aspx?TransId={0}" DataTextField="TRANSMITTAL" 
              HeaderText="Transmittal" />
            <asp:CommandField ButtonType="Button" ShowDeleteButton="true" />

<asp:TemplateField HeaderText = "TRANSMITtoCon">
<ItemTemplate>

                 <asp:GridView ID="GridViewTranstoCon" runat="server" AutoGenerateColumns="False" CellPadding="4"
                    ForeColor="#000000" GridLines="Both" onrowdeleting="GridViewTranstoCon_RowDeleting" DataKeyNames="TransmittoconID">
             <AlternatingRowStyle BackColor="Yellow" />
                    <Columns>
                      <asp:BoundField DataField="TRANSMITtoCon" HeaderText= "TRANSMITtoCon" >
                       <ItemStyle Width = "20%" />
                      </asp:BoundField>
                      <asp:CommandField ButtonType="Button" ShowDeleteButton="true" />
                     </Columns>
                     <EditRowStyle BackColor="#7C6F57" />
         <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="Red" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#E3EAEB" />
        <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
                    </asp:GridView>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText = "E-FILES">
<ItemTemplate>

                 <asp:GridView ID="GridViewEfile" runat="server" AutoGenerateColumns="False" CellPadding="4"
                    ForeColor="#000000" GridLines="Both"  DataKeyNames="FileID">
             <AlternatingRowStyle BackColor="Yellow" />
                    <Columns>
                     <asp:TemplateField HeaderText = "E-FILES">
                  <ItemTemplate>

                      <asp:LinkButton HeaderText = "E-FILES" ID="LinkButton1" runat="server" OnCommand="LinkButton1_Command" CommandName="Download" CommandArgument='<%#Eval("FileID")%>'><%#Eval("FileName")%> </asp:LinkButton>

                       </ItemTemplate>
              </asp:TemplateField>
               <asp:CommandField ButtonType="Button" ShowDeleteButton="true" />

                     </Columns>
                     <EditRowStyle BackColor="#7C6F57" />
         <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="Red" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#E3EAEB" />
        <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
                    </asp:GridView>
                </ItemTemplate>
            </asp:TemplateField>

             </columns> 
```

# php - 我可以从 ajax 响应加载 CodeIgniter 视图并使用 $data obj 吗？

> ID：13991455
> 
> 赞同：1
> 
> 时间：2012-12-21T13:55:24.173
> 
> 标签：php, ajax, codeigniter

好的，所以我加载的视图使用它从控制器接收的数据。然后，我使用 jquery .change 侦听器来侦听选择选项列表中的更改。这将触发一个函数运行，本质上一个 ajax 请求将被发送到我在控制器中的一个函数。在该函数中，我需要尝试“重新加载”通过控制器索引加载的数据，但使用基于下拉列表值的新参数。截至目前，带有数据的初始页面加载工作正常。jquery .change 和 ajax 请求也可以正常工作，但是，控制器功能不会重置页面数据。这是我所拥有的......任何帮助将不胜感激。

jQuery（在我的 members_home.php 视图中）：

```
$('#folder_select').change(function() {
    var data = $('#folder_select').val();
    loadTables(data);
});

function loadTables(str) {
    console.log("dfgdfg");
    $.ajax({
            url: '<?php echo base_url().'account/members_home/folderSelector';?>', 
            type: 'POST',
            data: { folderCat: str },
            success: function(output_string){

            }
    }); 
} 
```

Members_home.php 查看（html）：

```
<table cellspacing="0" cellpadding="0">
    <tr>
        <th width="50%">File Name:</th>
        <th width="30%">File Size:</th>
        <th>Download Link:</th>
    </tr>

    <?php
    $c = true;
    foreach((array)$things as $files){
         if (!empty($files) > 0) {
             if ($files['size'] >= 1000000000) {
                $files['size'] = round( ($files['size'] / 1000000000) , 2).' GB';
             }
             else if ($files['size'] >= 1000000) {
                    $files['size'] = round( ($files['size'] / 1000000) , 2).' MB';
             }else{
                $files['size'] = round( ($files['size'] / 1000) , 2).' KB';
             }

            echo '<tr'.(($c = !$c)?' class="odd"':'').">
                <td>$files[name]</td>
                <td>$files[size]</td>
                <td><a href='$files[location]' >Download</a></td>
            </tr>";
         }else {
            echo '<tr><td colspan="3">Folder is empty.</td></tr>';
             break;
         }
    } ?>

 </table><br /> 
```

Members_home 控制器：

```
function index()
{
    $is_logged_in = $this->loggedin->loggedin();
    if(!$is_logged_in)
    {
        redirect('account/createaccount', 'refresh');
    }
    else
    {   
        $q = $this->account_model->folder();
        $data['folder'] = $q;

        // This part gets the data that's used in the html table
        $userID = $this->session->userdata('id');
        $data['things'] = $this->account_model->folder_Homepage($userID);

        $data['main_content'] = 'account/members_home';
        $this->load->view('includes/template2', $data);
    }
}

// This function is used during the ajax request
public function folderSelector()
{
    $fID = $this->input->post('folderCat');
    $limit = 10;
    $userID = $this->session->userdata('id');
    $data['things'] = $this->account_model->folder_page($fID, $userID, $limit);

    // This is the part that is not working, shouldn't I be able to reload 
    // $data['things'] and send it to the view with the new parameters?
    $data['main_content'] = 'account/members_home';
    $this->load->view('includes/template2', $data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:12:05.420

您的控制器方法看起来正确。`$data['things']`in方法使用`folderSelector`正确 - 每个方法调用（来自单独的请求 - 如 ajax 请求）不知道其他方法，因此您确实需要调用模型来设置`$data['things']`。

但是，您的 ajax 成功处理程序不会对返回的数据做任何事情。您应该将`loadTables`功能更改为：

```
function loadTables(str) {
    console.log("dfgdfg");
    $.ajax({
            url: '<?php echo base_url().'account/members_home/folderSelector';?>', 
            type: 'POST',
            data: { folderCat: str },
            success: function(output_string){
                // here you need to inject the new data in the page 
                // in place of the old data
                $('table').replaceWith(output_string);
            }
    }); 
} 
```

# ios - 使用 BOOL / 完成块停止自动反转 / 无限重复 UIView 动画

> ID：13991465
> 
> 赞同：26
> 
> 时间：2012-12-21T13:55:59.493
> 
> 标签：ios, objective-c, core-animation, uiviewanimation, completion-block

我正在设置以下`UIView animateWithDuration:`方法，目的是`animationOn`在程序的其他地方设置我的 BOOL 以取消无限循环重复。我的印象是`completion`每次动画循环结束时都会调用该块，但情况似乎并非如此。

`completion`是否曾在重复动画中调用过该块？如果没有，有没有另一种方法可以从这个方法之外停止这个动画？

```
- (void) animateFirst: (UIButton *) button
{
    button.transform = CGAffineTransformMakeScale(1.1, 1.1);
    [UIView animateWithDuration: 0.4
                          delay: 0.0
                        options: UIViewAnimationOptionCurveEaseOut | UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat
                     animations: ^{
                         button.transform = CGAffineTransformIdentity;
                     } completion: ^(BOOL finished){
                         if (!animationOn) {
                             [UIView setAnimationRepeatCount: 0];
                         }
    }];
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-21T13:59:25.357

只有在动画中断时才会调用完成块。例如，当应用程序进入后台并再次返回前台（通过多任务处理）时，它会被调用。在这种情况下，动画将停止。发生这种情况时，您应该重新启动动画。

要停止动画，您可以将其从视图层中移除：

```
[button.layer removeAllAnimations]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-26T12:07:09.560

旧但另一种选择。

您还可以设置另一个不在同一视图上重复的动画，这样您还可以在当前状态下捕获它并使用选项 UIViewAnimationOptionBeginFromCurrentState 将其返回到原来的状态。您的完成块也被调用。

```
-(void)someEventSoStop
{
    button.transform = CGAffineTransformMakeScale(1.0, 1.0);
    [UIView animateWithDuration: 0.4
                          delay: 0.0
                        options: UIViewAnimationOptionCurveEaseOut | UIViewAnimationOptionBeginFromCurrentState
                     animations: ^{
                         button.transform = CGAffineTransformIdentity;
                     } completion: ^(BOOL finished){

                     }];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T14:11:03.513

我已经通过调用解决了这个问题`[button.layer removeAllAnimations]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-21T19:28:08.063

根据 View 类参考的文档：如果您使用了任何类方法，例如[animateWithDuration:delay:options:animations:completion:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/#//apple_ref/occ/clm/UIView/animateWithDuration:delay:options:animations:completion:) 如果持续时间设置为负值或 0，则在不执行动画的情况下进行更改。所以我做了这样的事情来停止无限动画：

```
[UIView animateWithDuration:0.0 animations:^{
      button.layer.affineTransform = CGAffineTransformIdentity;
  }]; 
```

我认为这比建议的答案中从图层中删除所有动画要好。请注意，这适用于 UIView 类中的所有其他类动画方法。

# html - SVG 上的下拉菜单不适用于 viewBox 属性

> ID：13991473
> 
> 赞同：1
> 
> 时间：2012-12-21T13:56:20.407
> 
> 标签：html, svg

我想在 SVG 中设置一个使用 foreignObject 的下拉菜单。但是，当我设置 viewBox SVG 属性时，它将无法正常工作。我一直在尝试 Firefox 17.0.1。我重新制作了问题，以在下面的简单代码中重现错误。任何人都知道如何解决它？

当您单击下拉菜单时，列表不会出现在正下方，而是出现在不同的位置，您无法单击它。

```
 <svg version="1.1" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="svgScimul" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1200 600" width="100%" height="100%">
    <g>
    <foreignObject class="node" x="100" y="40" width="200" height="200">
          <select>
            <option value="1">Test1</option>
            <option value="2">Aga</option>
            <option value="2">BBB</option>
            <option value="4">AAA</option>
          </select>
    </foreignObject>
    </g>
    </svg> 
```

# ruby-on-rails - 如何重定向到 url 取决于用户

> ID：13991484
> 
> 赞同：0
> 
> 时间：2012-12-21T13:56:58.557
> 
> 标签：ruby-on-rails

我的项目中有用户和提供者。用户有一个提供商，这意味着要成为提供商，您应该首先以用户身份登录。我有一个导航栏，其中包含将用户发送到他的个人资料视图的个人资料链接。但是，如果用户有提供者用户，我希望链接重定向到提供者个人资料页面而不是用户页面。

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:08:19.863

有几种方法可以实现这一点。首先，如果用户有提供者，您可以在您的配置文件操作中重定向到 provider_path()。第二种方法是检查导航栏中是否有 user.provider，然后呈现您需要的链接（我更喜欢将此逻辑提取到帮助程序）。

# android - 标记在结束拖动时显示信息窗口

> ID：13991485
> 
> 赞同：3
> 
> 时间：2012-12-21T13:57:01.203
> 
> 标签：android, google-maps-markers, google-maps-android-api-2

我希望在将标记拖到某个点时显示标记的信息窗口。我希望地址出现在其中。我的 LogCat 为我提供了正确的地址，以便正常工作，但信息窗口未显示

这是我的代码

```
private void placeMarker() {
    getMap().addMarker(new MarkerOptions()
            .position(getMyLocation())
            .draggable(true)
            .snippet("")
            .title(""));
    getMap().setOnMarkerDragListener(new OnMarkerDragListener() {

        public void onMarkerDragStart(Marker arg0) {
            // TODO Auto-generated method stub

        }

        public void onMarkerDragEnd(Marker marker) {
            latLng = marker.getPosition();
            marker.setSnippet("Loading address...");
            marker.showInfoWindow();

            Geocoder geoCoder = new Geocoder(getActivity(), Locale.getDefault());
            try {
                address = geoCoder.getFromLocation(latLng.latitude, latLng.longitude, 1).get(0);
                String addressString = address.getAddressLine(0);
                addressString += "\n"+address.getAddressLine(1);
                marker.setSnippet(addressString);
                marker.showInfoWindow();

                Log.d("get address pinpoint", "drag end: " + addressString+ " shown:" + marker.isVisible());
            } catch (IOException e) {
                e.printStackTrace();
            }

        }

        public void onMarkerDrag(Marker arg0) {
            // TODO Auto-generated method stub

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:31:11.913

您需要非空标题才能显示默认信息窗口。

更改`marker.setSnippet(addressString);`为`marker.setTitle(addressString);`

附带说明：**永远不要**在 UI 线程上调用阻塞代码。`geoCoder.getFromLocation`在内部调用 web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T18:53:43.977

您可以使用 marker.showInfoWindow();

# php - 如何防止上传假图片？

> ID：13991486
> 
> 赞同：0
> 
> 时间：2012-12-21T13:57:01.920
> 
> 标签：php

> **可能重复：**
> [如何检查上传的文件是否是没有 mime 类型的图像？](https://stackoverflow.com/questions/6484307/how-to-check-if-an-uploaded-file-is-an-image-without-mime-type)
> [上传、处理、存储和交付用户提供的文件和图像](https://stackoverflow.com/questions/13972714/uploading-processing-storing-and-delivering-user-provided-files-and-images)

我有图像共享脚本，我做了一半。用户可以将任何php或cgi文件重命名为.jpg并上传，上传成功

如何防止上传此类假图片？

这是我检查文件类型的方法

```
$userfile_type = $_FILES['file']['type'];
```

当我将 php 文件重命名为 php.jpg 时，它可以轻松上传。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:02:48.823

```
// return mime type ala mimetype extension
$finfo = finfo_open(FILEINFO_MIME_TYPE);
    $type = finfo_file($finfo, $tmp_name);
finfo_close($finfo); 
```

这是服务器为您提供文件类型，而不是您的示例中的浏览器。

使用 GD，您可以执行 getimagesize() 之类的操作，如果文件不是图像，则返回零

> 编辑：“getimagesize 不是 GD 库函数。它是 PHP 原生的”感谢 Vivek

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:00:36.307

使用 imagemagic 并检查图像信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:02:48.510

最好的方法之一是使用[http://php.net/manual/en/ref.fileinfo.php](http://php.net/manual/en/ref.fileinfo.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T14:05:28.660

您可以使用 getimagesize() 检查图像大小。如果函数无法获取大小，则返回 False。如果您可以使用 GD 库并使用 imagecreatefromstring() 函数来查看它是否是真实图像，那就更好了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T14:07:02.947

[exif_imagetype()](http://us3.php.net/manual/en/function.exif-imagetype.php)

php.net 的例子：

```
 if (exif_imagetype('image.gif') != IMAGETYPE_GIF) {
        echo 'The picture is not a gif';
    } 
```

这也直接来自我链接的 php.net 页面：

*如果函数 exif_imagetype() 不可用；您可以尝试以下解决方法：*

```
if ( ! function_exists( 'exif_imagetype' ) ) {
    function exif_imagetype ( $filename ) {
        if ( ( list($width, $height, $type, $attr) = getimagesize( $filename ) ) !== false ) 
        {
            return $type;
        }
    return false;
    }
} 
```

# java - 重置 .nextLine() 扫描仪

> ID：13991494
> 
> 赞同：14
> 
> 时间：2012-12-21T13:58:03.103
> 
> 标签：java

当谈到 Java 时，我是一个业余爱好者，所以如果它看起来很愚蠢，请原谅我的问题：-P 我有以下代码，旨在计算文件中的行数：

```
while (scanNumOfLines.hasNextLine())    
    {
    NumOfLines ++;
    scanNumOfLines.nextLine();
    }
    System.out.println("NumOfLines = "+NumOfLines); 
```

所以它算不错，但我想将扫描仪重新用于其他目的，但 nextLine 已移动到文件的最后一行，我想将其重置回第一行。

（相反，为了其他目的，我不得不使用另一台扫描仪，在我看来，这似乎不如应有的优雅。）

我确定必须有一种扫描仪方法将计数器重置为零？

谢谢

CJ

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T14:01:59.347

这是不可能做到的。

不包括它的原因是它支持的输入类型范围很广。一个例子是流。这些在传递后不存储结果，因此它们不支持重置。

所以优雅的方式是创建一个新的`Scanner`. 如果你给它很多自定义设置，创建一个工厂方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T14:00:15.720

您将不得不重新声明`Scanner`. 当您调用`nextLine()`时，该行将从缓冲区中删除并有效地从`Scanner`.

所以，本质上，有*一种*方法可以做到这一点：它是构造函数。

```
Scanner scanNumOfLines = new Scanner(myFile); 
```

对象中没有“计数器” `Scanner`。相反，它更像是一条传送带。皮带不知道也不关心上面有什么。它只是不停地向你吐东西，而上面还有东西。一旦你拿走它们，它们就会永远消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T20:05:57.710

我意识到这已经得到了回答，但是如果我正在查找这些东西，我相信其他人也是如此，所以我想我会按照我解决这个问题的方式做出贡献：因为我的问题需要我阅读文件多次根据用户输入，我的测试类有一个 ArrayList 扫描仪读取文件，然后在不再需要时自行删除。我设置它的方式在 ArrayList 中永远不会超过 1 个扫描仪，但 ArrayList 在添加和删除对象时很有用。

```
public class TxtReader {
     private boolean PROGRAM_CONTINUES = true;
     private final int indexCount = 0;
     File newFile = new File("Reader Example.txt");
     ArrayList<Scanner> scanList = new ArrayList<Scanner>();

     public TxtReader(Scanner UserInput) throws FileNotFoundException {
         while(PROGRAM_CONTINUES) {
              if (UserInput.next().equalsIgnoreCase("end")) { 
          // some arbitrary way of concluding the while loop
                  PROGRAM_CONTINUES = false;
                  break;
              }
              scanList.add(new Scanner(newFile));
          // DO STUFF*********************************************
              while(scanList.get(indexCount).hasNext()) {
                 System.out.println(scanList.get(indexCount).nextLine());
             }
          //******************************************************
              scanList.get(indexCount).close(); 
          //always close a scanner after you're done using it
              scanList.remove(indexCount); // removes the now-unnecessary scanner 
              UserInput = new Scanner(System.in);
        }
    }
    public static void main(String[] args) throws FileNotFoundException {
        new TxtReader(new Scanner(System.in));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T18:53:45.103

```
File file = new File("StoreData.txt");

Scanner reader = new Scanner(new FileInputStream(file));
while (reader.hasNext()) {
        k++;
        reader.nextLine();
}
reader.close();
reader=null;    
//reset scanner         
reader=new Scanner(new FileInputStream(file));
while (reader.hasNext()) {
    System.out.println(reader.nextLine());              
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-21T14:00:54.373

您可以使用[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)并使用方法[seek()](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#seek%28long%29)回到第一行。

# android - 如何在android/eclipse上设置Jfeinstein10滑动菜单

> ID：13991496
> 
> 赞同：4
> 
> 时间：2012-12-21T13:58:12.983
> 
> 标签：android, eclipse, menu, compiler-errors, sliding

我正在尝试在 Eclipse 中设置 JFeinstein10 的[滑动菜单](https://github.com/jfeinstein10/SlidingMenu "在github上找到，点击进入")。

我试过的：

1.  `file > import > from existing android.. > select the library of sliding menu`
2.  `file > import > from ex.. > select the example of sliding me`
3.  `file > import > from ex.. > select actionbarsherlock library`
4.  `mark slidingmenu lib and actionbarlib as library`
5.  `add the library's to example of sldingmenu`
6.  `cleanup all`

然后我收到各种错误（例如：jar 不匹配，.. 无法解析为类型，方法 .. 的类型 .. 必须覆盖超类方法）我用谷歌搜索它们并使用清理和快速修复选项。但我不工作。

我希望你们中的一个人知道一个好的教程，或者也许能够写一个或知道该做什么。

我是 android 开发的新手，我以前的所有应用程序都是在`webview`.

我也尝试过[https://github.com/johnkil/SideNavigation](https://github.com/johnkil/SideNavigation)（也没有用，如果有人知道如何设置这个，太好了！）和 grimbo 滑动菜单（它有效，但它不是我寻找）

错误仅在库中`slidingmapactivity`（如下所示），并且在`actibarsherlock`库中有许多有错误的文件（几乎在 src 文件夹中的任何文件中）

```
code in lib: slidingmapactivity:
package com.slidingmenu.lib.app;

import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.ViewGroup.LayoutParams;

import com.slidingmenu.lib.SlidingMenu;

public abstract class SlidingMapActivity extends MapActivity implements         SlidingActivityBase {

private SlidingActivityHelper mHelper;

/* (non-Javadoc)
 * @see com.google.android.maps.MapActivity#onCreate(android.os.Bundle)
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mHelper = new SlidingActivityHelper(this);
    mHelper.onCreate(savedInstanceState);
}

/* (non-Javadoc)
 * @see android.app.Activity#onPostCreate(android.os.Bundle)
 */
@Override
public void onPostCreate(Bundle savedInstanceState) {
    super.onPostCreate(savedInstanceState);
    mHelper.onPostCreate(savedInstanceState);
}

/* (non-Javadoc)
 * @see android.app.Activity#findViewById(int)
 */
@Override
public View findViewById(int id) {
    View v = super.findViewById(id);
    if (v != null)
        return v;
    return mHelper.findViewById(id);
}

/* (non-Javadoc)
 * @see android.app.Activity#onSaveInstanceState(android.os.Bundle)
 */
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    mHelper.onSaveInstanceState(outState);
}

/* (non-Javadoc)
 * @see android.app.Activity#setContentView(int)
 */
@Override
public void setContentView(int id) {
    setContentView(getLayoutInflater().inflate(id, null));
}

/* (non-Javadoc)
 * @see android.app.Activity#setContentView(android.view.View)
 */
@Override
public void setContentView(View v) {
    setContentView(v, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
}

/* (non-Javadoc)
 * @see android.app.Activity#setContentView(android.view.View, android.view.ViewGroup.LayoutParams)
 */
@Override
public void setContentView(View v, LayoutParams params) {
    super.setContentView(v, params);
    mHelper.registerAboveContentView(v, params);
}

/* (non-Javadoc)
 * @see com.slidingmenu.lib.app.SlidingActivityBase#setBehindContentView(int)
 */
@Override
public void setBehindContentView(int id) {
    setBehindContentView(getLayoutInflater().inflate(id, null));
}

/* (non-Javadoc)
 * @see com.slidingmenu.lib.app.SlidingActivityBase#setBehindContentView(android.view.View)
 */
@Override
public void setBehindContentView(View v) {
    setBehindContentView(v, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
}

/* (non-Javadoc)
 * @see com.slidingmenu.lib.app.SlidingActivityBase#setBehindContentView(android.view.View, android.view.ViewGroup.LayoutParams)
 */
@Override
public void setBehindContentView(View v, LayoutParams params) {
    mHelper.setBehindContentView(v, params);
}

/* (non-Javadoc)
 * @see com.slidingmenu.lib.app.SlidingActivityBase#getSlidingMenu()
 */
@Override
public SlidingMenu getSlidingMenu() {
    return mHelper.getSlidingMenu();
}

/* (non-Javadoc)
 * @see com.slidingmenu.lib.app.SlidingActivityBase#toggle()
 */
@Override
public void toggle() {
    mHelper.toggle();
}

/* (non-Javadoc)
 * @see com.slidingmenu.lib.app.SlidingActivityBase#showAbove()
 */
@Override
public void showContent() {
    mHelper.showContent();
}

/* (non-Javadoc)
 * @see com.slidingmenu.lib.app.SlidingActivityBase#showBehind()
 */
@Override
public void showMenu() {
    mHelper.showMenu();
}

/* (non-Javadoc)
 * @see com.slidingmenu.lib.app.SlidingActivityBase#showSecondaryMenu()
 */
@Override
public void showSecondaryMenu() {
    mHelper.showSecondaryMenu();
}

/* (non-Javadoc)
 * @see com.slidingmenu.lib.app.SlidingActivityBase#setSlidingActionBarEnabled(boolean)
 */
@Override
public void setSlidingActionBarEnabled(boolean b) {
    mHelper.setSlidingActionBarEnabled(b);
}

/* (non-Javadoc)
 * @see android.app.Activity#onKeyUp(int, android.view.KeyEvent)
 */
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    boolean b = mHelper.onKeyUp(keyCode, event);
    if (b) return b;
    return super.onKeyUp(keyCode, event);
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:02:05.203

好吧，让我们一次一个地处理这些问题......

*   JAR Mismatch - 我认为这是支持库。将 SlidingMenu 文件夹中的 JAR 替换为`libs`您自己文件夹中的副本`libs`。

*   `Cannot be resolved to a type`表明您尚未单击项目属性并将 SlidingMenu 添加到库框中。如果做不到这一点，`Cmd-Shift-O`请在您的活动文件中按以修复您的导入。`@Override`我相信这也将解决您的问题。

让我知道您的进展情况，我会根据需要提供进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T13:13:37.300

您需要在 SLIDINGMENULIBRARY 的 libs 目录以及 PROJECT 的 libs 文件夹中都有相同的 android-support-v4 JAR。

事实上，转到您的 SDK 文件夹，转到 sdk\extras\android\support\v4\android-support-v4.jar 复制此 jar 并将其粘贴到两个目录中。

# java - 在使用 deployOnSave 禁用模式时，在 Netbeans 中手动重新部署的部署按钮

> ID：13991505
> 
> 赞同：7
> 
> 时间：2012-12-21T13:58:52.607
> 
> 标签：java, netbeans, deployment, netbeans-plugins

在对源进行某些更改后，有什么方法可以手动重新部署项目？

我在 Netbeans 中禁用`deployOnSave`了选项，以防止在对代码进行微不足道的更改时进行不必要的重新部署。也许工具栏中的重新部署按钮或类似的东西会有所帮助。

* * *

使用 Netbeans 7.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-24T09:19:20.447

1.  右键单击项目
2.  特性
3.  运行子菜单
4.  保存时部署复选框（取消选中此项）

放一个快捷键进行部署

1.  工具菜单
2.  选项
3.  键映射子菜单
4.  搜索部署并设置您的密钥组合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:27:10.247

将服务器添加到 Netbeans 上的托管服务器，转到`Windows -> Services`. 添加服务器后，编辑项目的属性并将刚刚添加的服务器设置为项目的默认服务器。现在您可以`clean`从工具栏按钮执行一个操作，然后`run`在您想要部署项目时执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:22:59.623

当您禁用**deployOnSave**时，当您想要**重新部署**时，只需在项目属性中启用**deployOnSave 。**服务器将重新部署，您可以再次禁用**deployOnSave**。

您可以添加访问项目设置的快捷方式。

单击“**调试**”或**“运行”**按钮将开始完全部署，例如。对于 maven 项目，它将从测试等开始...，取消部署，部署。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T04:50:30.703

我们可以这样做：

1.  右键单击项目>属性>构建>编译>保存时编译被选中。
2.  附加调试器（谷歌）
3.  调试 > 应用代码更改

# javascript - 使用 CSS 的无过渡关键帧

> ID：13991506
> 
> 赞同：4
> 
> 时间：2012-12-21T13:59:07.033
> 
> 标签：javascript, css, css-transitions

在 JavaScript 中，可以这样写：

```
var state = 0;
setTimeout(function keyFrames () {
    fooElement.style.backgroundPosition = '0 -' + (10*state++) + 'px';
    if (state === 2) {
        state = 0;
    }
    setTimeout(keyFrames, 500);
}, 500); 
```

CSS3 关键帧提供了非常相似的功能：

```
@keyframes foo { 0% { background-position: 0 0; } 50% { background-position: 0 -10px; } 100% { background-position: 0 -20px; } }
#fooElement { transition: foo 1500ms linear infinite; } 
```

不同之处在于 CSS 过渡将使用计时功能。有没有办法使用 CSS 复制确切的 JavaScript 行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:19:05.310

您可以使用动画计时功能`step-start`或`step-end`. 这将确保没有动画平滑并且每一帧都需要（总动画持续时间/帧），因此在您的情况下为 500 毫秒。可以在此处找到此工作的示例：http: [//jsfiddle.net/tUa6Y/3/](http://jsfiddle.net/tUa6Y/3/)。

```
#fooElement { transition: foo 1500ms step-start infinite; } 
```

有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/timing-function](https://developer.mozilla.org/en-US/docs/CSS/timing-function)。

**编辑：**您可能必须在开头或结尾添加一个虚拟帧（取决于您是否使用`step-start`vs `step-end`），因为第一帧或最后一帧的持续时间似乎为 0。

# java - Selenium 2：“driver.findElement(By....);

> ID：13991507
> 
> 赞同：1
> 
> 时间：2012-12-21T13:59:09.463
> 
> 标签：java, eclipse, firefox, selenium-webdriver

当通过调用驱动程序没有找到任何元素时，selenium webDriver 什么也不`driver.findElement(By.className("item"));` 做，甚至不会抛出我有时期待的 ElementNotfoundException。它只是挂起。这是一个例子：

```
ProfilesIni allProfiles = new ProfilesIni();
FirefoxProfile profile = allProfiles.getProfile("default");
driver = new FirefoxDriver(profile);
driver.manage().timeouts().implicitlyWait(3, TimeUnit.SECONDS);
driver.get(APP_ADDRESS);

WebElement sBoxPopup = driver.findElement(By
                .className("item"));
... 
```

驱动程序挂在 driver.findElement(...) 上。即使我删除了隐式等待，它也会挂起。自 4 天以来，我一直在寻找错误。我希望有人能给点提示。我正在使用 Firefox 17.0.1 和 selenium-java/-server 2.28。我还将 selenium 版本降级为 2.25，但没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:37:02.633

您可以尝试将您的 Firefox 版本降低到 16 并尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T19:55:39.530

尝试使用 driver.findelement(By.xpath("//*[@class='date']") 如果类名包含空格“数据”，则类名将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T12:25:46.713

我认为错误出在 xpath 本身，因为在您的网页中，“class=item”的次数可能更多。尝试通过在您的网页中找到一些唯一的字符串来更改 xpath。

# html - Firefox 的 html5 范围标签问题？

> ID：13991509
> 
> 赞同：3
> 
> 时间：2012-12-21T13:59:11.537
> 
> 标签：html, firefox, css, firebug

我正在使用 html5 范围标签，我不知道为什么，但我遇到了 Firefox 的问题。在 chrome 上它工作正常......这是我的代码

```
<div id="slider">
5% <input id="slide" type="range"
 min="5" max="200" step="5" value="100"
 onchange="updateSlider(this.value)" />
 200%
</div><br/>
<div id="chosen">0</div> 
```

而CSS是

```
#chosen {
border-radius:10px;
width:45px;
padding-top:10px; padding-bottom:10px;
background-image: -webkit-linear-gradient(top, #cccccc, #330000);
background-image: -o-linear-gradient(top, #cccccc, #330000);
background-image: -moz-linear-gradient(top, #cccccc, #330000);
text-align:center;
color:#ffffff;
font-weight:bold; font-size:large;
margin-left:40px;}
#slider {
margin-left:10px;
}
input[type='range'] {
-webkit-appearance: none;
padding-left:2px; padding-right:2px;
-webkit-border-radius: 5px;
background-image: -webkit-linear-gradient(top, #000000, #333333, #000000);
} 
```

我还使用了一些 javascript：

```
function updateSlider(slideAmount) {
//get the element
var display = document.getElementById("chosen");
//show the amount
display.innerHTML=slideAmount;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:16:02.230

Firefox 仍然没有实现它。我不知道为什么，但他们似乎在某种程度上搁置了 HTML 表单。

# asp.net-mvc - ReportViewer 无法在 Firefox 和 Chrome 中正确显示报告

> ID：13991516
> 
> 赞同：3
> 
> 时间：2012-12-21T13:59:23.847
> 
> 标签：asp.net-mvc, report-viewer2010

我正在尝试运行显示在页面上的此报告页面，它在 IE 中似乎可以正常工作/显示，但是当我在 Firefox 或 Chrome 中运行它时，我只能得到报告的标题栏，要么我必须刷新报告或页面，然后它将起作用 - 还尝试单击报告标题上的下一页和上一页箭头以在页面上正确显示报告。我不确定是什么原因，或者是否可以修复，但有时会令人沮丧。

这是我运行/显示报告的页面所拥有的：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="ActivityReport.aspx.cs" Inherits="Kids.MVC.Reporting.ActivityReport" %> 
```

```
<form id="form" runat="server">
    <asp:ScriptManager ID="scriptManager" runat="server" EnablePartialRendering="false" />
    <uc1:ReportViewer ID="reportViewer" runat="server" />
</form> 
```

这是我的 ReportViewer 显示页面：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ReportViewer.ascx.cs"
Inherits="Kids.MVC.Reporting.ReportViewer" %>
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>
<style type="text/css">
    .ReportViewer table
    {
        border-collapse: collapse;
        border-spacing: 0;
    }
    .ReportViewer *  
    {
        background-image:none;       
    }
</style>
<div class="ReportViewer">
    <rsweb:ReportViewer ID="reportViewer" runat="server" Width="100%" Height="100%" AsyncRendering="False"
        ExportContentDisposition="AlwaysAttachment" SizeToReportContent="true" BackColor="White" ShowRefreshButton="False">
    </rsweb:ReportViewer>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-03T15:50:11.573

有一个非常简单的解决方法。将 ReportViewer 控件放在一个 div 中，并将 div 的高度设置为较大的数字（1000px 是一个不错的圆形选择）。

设置 SizeToReportContent="true" 也可以解决这个问题。

这两种解决方案都适用于我，但 OP 已经将其设置为 true，因此它可能不适用于所有情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T14:19:00.810

这笔交易是 Microsoft ReportViewer 官方不支持 Chrome。
这个链接应该有帮助[http://msdn.microsoft.com/en-us/library/ms251673.aspx](http://msdn.microsoft.com/en-us/library/ms251673.aspx)
但它在 IE 中完美运行！:)

向 MS 表示感谢 ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T11:39:52.727

还有另一个解决方法，只需`Doctype`从您使用报告查看器的页面中删除。

如果存在文本框渲染问题，则设置`CanGrow=false`

它适用于我的所有浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T19:09:18.187

奇怪的是，我找到了故障的原因。由于这仅发生在某些报告中，我比较了报告并注意到我有换行符的报告导致了故障，并且报告没有以 FF 或 chrome 显示（仅显示报告的标题）。所以取出换行符解决了我的问题。我还在文本框中用一堆低于分数的换行符替换了换行符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-14T03:46:18.080

**在Viewer.aspx**页面中添加控件`ZoomMode="PageWidth"`和`SizeToReportContent="True"`属性。`ReportViewer`

 ****喜欢：**

```
<rsweb:ReportViewer ID="ReportViewer" 
   runat="server" Width="100%" Height="100%" 
   ZoomMode="PageWidth" SizeToReportContent="True">
</rsweb:ReportViewer> 
```**

# batch-file - 如何使批处理文件在显示正在编辑的内容时以用户想要的方式编辑文本文件？

> ID：13991521
> 
> 赞同：2
> 
> 时间：2012-12-21T13:59:40.133
> 
> 标签：batch-file, word-processor

我目前正在创建一个带有批处理文件的文字处理软件。我想知道是否有人知道如何在屏幕上显示文本，以便用户可以编辑它。我已经有一个用于创建、查看和删除文件的系统，但是编辑现有文件让我很难过。这是批处理文件的代码：

```
@echo off
title Word Processor
:MAIN
cls
echo Type help for help
set /p input=Command-
if %input%==view goto view
if %input%==new goto new
if %input%==exit exit
if %input%==edit goto edit
if %input%==help goto help
if %input%==delete goto delete
:new
cls
set /p words=Type-
set /p name=Name-
echo %words% >> %name%.txt
pause >nul
goto MAIN
:view
cls
set /p file=File to open (without .txt)-
cls
type %file%.txt
pause >nul
goto MAIN
:help
cls
type help.txt
pause >nul
goto MAIN
:edit
cls
echo Not Yet Implemented
pause >nul
exit
:delete
cls
set /p del=File to Delete-
del %del%.txt
echo Deleted...
pause >nul
goto MAIN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T06:55:13.130

尝试这个：

编辑文件.txt

这也许是你想要的

这是一个16位的程序，几乎和记事本一模一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:18:54.423

您可以在 VBScript 的帮助下做到这一点。

VBScript 看起来像这样

```
Set WshShell = WScript.CreateObject("WScript.Shell")
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile(WScript.Arguments(0), 1)
Do Until objFile.AtEndOfStream
    strCharacters = objFile.Read(1)
    WshShell.SendKeys strCharacters
Loop 
```

将其另存为`send.vbs`，批处理文件的编辑部分将如下所示

```
set /p file=File to edit-
cscript.exe rep.vbs %file%
set /p input=
echo %input% >%file% 
```

基本上，您获得了要编辑的文件并使用该文件作为参数调用 VBScript。批处理文件然后落在下一行，这是另一个`set /p`正在等待输入的行。

然后当 VBScript 运行时，它会读取您选择的文件并发送字符`SendKeys`，就像模拟击键一样。

字符最终被粘贴到控制台上，因此您可以随意编辑它。当您按下回车键时，编辑将保存到变量中，并用新的编辑覆盖文件。

或者，您可以使用 cmd 的内置文本编辑器`edit`，它具有用户可以用来编辑和保存文件的各种 gui。

只需键入`edit`或`edit %file%`使用它。

希望这可以帮助

# php - 取消设置数组值（将对象转换为数组后）

> ID：13991522
> 
> 赞同：2
> 
> 时间：2012-12-21T13:59:53.040
> 
> 标签：php, arrays, object, casting, json

您好我正在尝试从此数组中取消设置数组元素

```
Array(
    [52] => stdClass Object (
        [name] => test
        [company] => sf
        [addr] => sdf
        [email] => sdf
        [phone] => sdf
        [comments] => sdf
        [qty] => 150
        [date] =>
        [brand] => Nike
        [quoteimg] => xx
        [enqimg] => xxx
        [product_name] => t5
        [key] => 52
        [action] => new_product
    )
) 
```

我在用`unset($array['52']);`

但它不起作用，但原因不明。

```
function ajax_new_product(){
    $r=(array)json_decode(base64_decode($_COOKIE['products']));

    if (isset($_POST['remove']))
        {   print_r($r);
            unset($r[$_POST['key']+0]);
            print_r($r);
        }   
    else 
        if(is_array($r) && !empty($r))
            if (isset ($_POST['key']))
                $r[$_POST['key']]=(array)$_POST;
            else        
                $r[]=(array)$_POST;     
        else 
            if (isset ($_POST['key']))
                $r[$_POST['key']]=(array)$_POST;
            else        
                $r[]=(array)$_POST;     
    setcookie('products',base64_encode(json_encode($r)),time()+60*60*24*30,"/");
} 
```

这段代码：

```
if (isset($_POST['remove']))
    {   print_r($r);
        unset($r[$_POST['key']+0]);
        print_r($r);
    } 
```

输出

```
Array
(
    [52] => stdClass Object
        (
            [name] => test
            [company] => sf
            [addr] => sdf
            [email] => sdf
            [phone] => sdf
            [comments] => sdf
            [qty] => 150
            [date] => 
            [brand] => Nike
            [quoteimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/DESIGN_WONT_SAVE_THE_WORLD_TEE_AA_7503-195x196.jpg
            [enqimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/DESIGN_WONT_SAVE_THE_WORLD_TEE_AA_7503-65x66.jpg
            [product_name] => t5
            [key] => 52
            [action] => new_product
        )

    [49] => stdClass Object
        (
            [name] => 
            [company] => 
            [addr] => 
            [email] => 
            [phone] => 
            [comments] => 
            [qty] => 150
            [date] => 
            [brand] => Nike
            [quoteimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/ts21-164x196.png
            [enqimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/ts21-65x66.png
            [product_name] => t3
            [key] => 49
            [action] => new_product
        )

    [44] => stdClass Object
        (
            [name] => 
            [company] => 
            [addr] => 
            [email] => 
            [phone] => 
            [comments] => 
            [qty] => 150
            [date] => 
            [brand] => Nike
            [quoteimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/DESIGN_WONT_SAVE_THE_WORLD_TEE_AA_7501-195x196.jpg
            [enqimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/DESIGN_WONT_SAVE_THE_WORLD_TEE_AA_7501-65x66.jpg
            [product_name] => Polo
            [key] => 44
            [action] => new_product
        )

)
Array
(
    [52] => stdClass Object
        (
            [name] => test
            [company] => sf
            [addr] => sdf
            [email] => sdf
            [phone] => sdf
            [comments] => sdf
            [qty] => 150
            [date] => 
            [brand] => Nike
            [quoteimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/DESIGN_WONT_SAVE_THE_WORLD_TEE_AA_7503-195x196.jpg
            [enqimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/DESIGN_WONT_SAVE_THE_WORLD_TEE_AA_7503-65x66.jpg
            [product_name] => t5
            [key] => 52
            [action] => new_product
        )

    [49] => stdClass Object
        (
            [name] => 
            [company] => 
            [addr] => 
            [email] => 
            [phone] => 
            [comments] => 
            [qty] => 150
            [date] => 
            [brand] => Nike
            [quoteimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/ts21-164x196.png
            [enqimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/ts21-65x66.png
            [product_name] => t3
            [key] => 49
            [action] => new_product
        )

    [44] => stdClass Object
        (
            [name] => 
            [company] => 
            [addr] => 
            [email] => 
            [phone] => 
            [comments] => 
            [qty] => 150
            [date] => 
            [brand] => Nike
            [quoteimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/DESIGN_WONT_SAVE_THE_WORLD_TEE_AA_7501-195x196.jpg
            [enqimg] => http://verycreative.info/cristian/custompolos/wp/wp-content/uploads/2012/12/DESIGN_WONT_SAVE_THE_WORLD_TEE_AA_7501-65x66.jpg
            [product_name] => Polo
            [key] => 44
            [action] => new_product
        )

)
<br />
<b>Warning</b>:  Cannot modify header information - headers already sent by (output started at /home/veryinfo/public_html/cristian/custompolos/wp/wp-content/themes/custompolos/functions.php:32) in <b>/home/veryinfo/public_html/cristian/custompolos/wp/wp-content/themes/custompolos/functions.php</b> on line <b>48</b><br />
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:08:08.613

尝试删除引号：

`unset($array[52]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:57:37.620

返回的对象似乎并没有真正使用强制转换完全转换为数组`(array)`。然而，取消设置只影响数字索引。

要修复它，请使用 的**第二个参数**，[`json_decode()`](http://php.net/json_decode)这使它首先返回一个真正的数组，并且一切都应该正常工作。

## 发生什么了？

从与 rid 的讨论中，我提供了以下编译的见解。

[PHP 手册](http://php.net/manual/en/language.types.array.php)指出，使用强制转换语法将对象转换为数组`(array)`会使数字索引无法访问，但是 var_dump 似乎暗示了一些不同的东西：

```
$a = (array) json_decode('{"a": 123, "5": 234}');
var_dump($a);
// array(2) {
//   ["a"]=> int(123)
//   ["5"]=> int(234)
// } 
```

当他们试图从数组中删除一个数字索引条目时，出现了 OP 问题，在这种情况下，这将尝试`unset($a[5]);`完全不影响数组。事实上，这段代码表明什么都没有：

```
var_dump(isset($a['5'])); // bool(false)
var_dump($a['5']);        // NULL
$a["5"] = 1111;    
var_dump($a['5']);        // 1111 
```

那么，一切都好吗？好吧...几乎，让我们在最近的分配之后冒险另一个 var_dump

```
var_dump($a);
// array(3) {
//   ["a"]=>int(123)
//   ["5"]=>int(234)
//   [5]=>int(1111)
// } 
```

好吧，这很可疑，但我们已经在上面确定了`$a[5]`返回正确和新的`1111`. 而且我们无论如何也无法访问*隐藏的五个。*对？... 对？

```
foreach($a as $k=>$e) echo "$k -> $e\n";
// a -> 123
// 5 -> 234
// 5 -> 1111 
```

当然这是错误的。大错特错...

所以我认为，最好**不要将对象转换为当前 PHP 版本的数组，**而是使用 foreach 来遍历它们并以这种方式创建一个全新的数组。也就是说，如果您一开始就无法获得真正的数组。

（在 PHP 5.4.8 Win 上测试）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:45:33.480

您可以使用`array_shift($array)` which 将消除数组中的第一个索引

# jquery - 使用 jQuery 处理淡入淡出和淡出问题

> ID：13991524
> 
> 赞同：2
> 
> 时间：2012-12-21T14:00:01.863
> 
> 标签：jquery, fadein, fadeout

我制作了一个 JSFiddle ( [http://jsfiddle.net/wpC57/2](http://jsfiddle.net/wpC57/2) ) 来展示我的问题。

我希望#grid-viewer 有 display: none; 随着页面加载。然后，当您将鼠标悬停在任何链接上时，我希望它淡入并相应地重新定位。

重新定位现在按预期工作，但我在淡入淡出时遇到问题。淡出后不会再淡入。任何帮助，将不胜感激。

处理悬停功能的 JavaScript 如下所示；

```
$("a.mainlink").hover(function() {
    var dataTitle = $(this).attr("data-title");
    $("#grid-viewer").stop().fadeIn();
    $("#grid-viewer").stop().animate({
        "left": ($(this).offset().left - $("#grid-view").position().left)
    }, 200);
    $("#grid-text").html(dataTitle);
}, function() {
    $("#grid-viewer").stop().fadeOut();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:11:32.437

您必须删除第二个`.stop()`，它在启动后立即阻塞`fadeIn()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T14:12:30.890

你让它可见：`$("#grid-viewer").stop().fadeIn();`但是立即停止淡入淡出，`$("#grid-viewer").stop().animate({`因此不透明度保持为0并且它被隐藏了。尝试将淡入淡出功能包含在您的动画中，如下所示：

```
$("#grid-viewer").stop().animate({
            "display" : "block",
            "opacity": 1,
            "left": ($(this).offset().left - $("#grid-view").position().left)
        }, 200); 
```

完整示例：http: [//jsfiddle.net/wpC57/7/](http://jsfiddle.net/wpC57/7/)

```
$(document).ready(function() {
    $("a.mainlink").hover(function() {
        var dataTitle = $(this).attr("data-title");
        $("#grid-viewer").show();
        $("#grid-viewer").stop().animate({
            "opacity": 1,
            "left": ($(this).offset().left - $("#grid-view").position().left)
        }, 200);
        $("#grid-text").html(dataTitle);
    }, function() {
        $("#grid-viewer").stop().fadeOut();
    });
});​ 
```

# html - 表中的 Safari 额外行

> ID：13991528
> 
> 赞同：5
> 
> 时间：2012-12-21T14:00:19.830
> 
> 标签：html, css, safari

在我的网络项目中，我创建了一个简单的表格并使用 css 对其进行样式设置，在 chrome firefox 甚至在 ie 中，一切看起来都很正常，但在 safari 中，随机表格单元格中会出现额外的边框，当我选择单元格中的文本时，边框会消失。下面有图片。我该如何解决这个问题？我猜这是 Safari 问题，而不是错误的 css 或 html。

**页面加载后：** ![在此处输入图像描述](../Images/2e51522c8e3d616b66f5f3dc816bf2fe.png)

**选择文本后：** ![在此处输入图像描述](../Images/7f4746197902f600e79f25cc3c1b16a0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:06:10.923

在您的 css 中为该特定单元格（或所有单元格）使用此代码：

```
td:focus, td:active, td:hover, td{
    border: none;
} 
```

仅使用您不希望有任何边框的 <td> 的代码。

如果上述方法不起作用，请使用以下方法：

```
td:before, td:after{
    border: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:06:51.410

一切对我来说都是有效的。事实上，我正在使用 safari v6.02 并且没有呈现任何错误。也许它可能来自其他未发布的 html。

旁注.. 使用 safaris 元素检查器尝试查找问题

# php - 使用 mod_rewrite 和 Codeigniter 重写问题

> ID：13991532
> 
> 赞同：0
> 
> 时间：2012-12-21T14:00:24.470
> 
> 标签：php, apache, codeigniter, mod-rewrite

这个问题可能看起来很吓人。不，这很简单，但解释得很透彻。所以请继续阅读。

我需要制作一个多语言页面（英语和西班牙语），并且我想使用此段来路由每种语言：

mysite/ **en** /mycontroller/mymethod

这些是我在 .htaccess 中制定的规则及其描述：

```
# Rewrite url removing language segment and appending it as a request variable
RewriteRule ^(es|en)/(.*) $2?lang=$1 [L]

# Remove index.php from URL
RewriteCond $1 !^(index.php|css|images|scripts|robots.txt|sitemap.xml) 
RewriteRule ^(.*)$ index.php/$1 [L] 
```

有些事情我做的不对：

第一条规则是正确创建请求变量**lang**，但仍在路由 URL 而不删除语言段（**en|es**），这**会导致错误**，因为 Codeigniter 假设（所以我认为）期望一个名为**“en”**的控制器或**“是”**。我最终可以摆脱 CI 路线中的这一部分，但由于我是在 .htaccess 中进行的，因此无需再次重复。据我所知，这部分在重写后不应该再存在了。

**注意**：由于以下原因，我不想在这种特殊情况下使用 CI 路由：

*   默认情况下，它们不适用于附加的请求变量，
*   我不想在公共 URL 中使用可见的请求变量（无法在配置文件中启用它们），
*   将请求变量作为参数段传递意味着需要在索引或其他任何请求的方法中检索它，
*   我想在构造函数中处理这个（在其中检索 $_GET('lang') ）。

以防万一，这些是在输入 index.php 时转储的 $_GET 和 $_SERVER 变量（不是全部）：

示例网址：`http://localhost/mysite/en/portfolio`

$_GET：

```
Array
(
    [lang] => en
) 
```

$_服务器：

```
Array
(
    [DOCUMENT_ROOT] => C:/xampp/htdocs
    [CONTEXT_DOCUMENT_ROOT] => C:/xampp/htdocs
    [SCRIPT_FILENAME] => C:/xampp/htdocs/mysite/index.php
    [REDIRECT_QUERY_STRING] => lang=en
    [REDIRECT_URL] => /mysite/portfolio
    [REQUEST_METHOD] => GET
    [QUERY_STRING] => lang=en
    [REQUEST_URI] => /mysite/en/portfolio
    [SCRIPT_NAME] => /mysite/index.php
    [PATH_INFO] => /portfolio
    [PATH_TRANSLATED] => C:\xampp\htdocs\portfolio
    [PHP_SELF] => /mysite/index.php/portfolio
) 
```

没有语言段的相同 URL 可以完美运行并进入 Portfolio 控制器： `http://localhost/mysite/portfolio`

任何帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:01:43.367

尝试更改`RewriteRule ^(es|en)/(.*) $2?lang=$1 [L]`为`RewriteRule ^(es|en)/(.*) index.php/$2?lang=$1 [L]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:17:15.383

试试这个代码一次......

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# oracle10g - oracle 10g中的唯一键约束违反？

> ID：13991533
> 
> 赞同：1
> 
> 时间：2012-12-21T14:00:25.293
> 
> 标签：oracle10g

我正在使用 oracle10g 中的 sql* loader 将数据从平面文件加载到表中。

但是在加载时显示以下错误。

*

```
ERROR at line 1:
ORA-00001: unique constraint (SANFORDINTEGRATOR.SUBSCRIBER_ID_PK) violated
ORA-06512: at "SANFORDINTEGRATOR.DATAMOVE", line 26
ORA-06512: at line 1 
```

我该如何解决。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:03:38.367

表 SANFORDINTEGRATOR 有一个约束，要求列（可能是 SUBSCRIBER_ID）具有唯一值（可能是因为它是主键）。您显然正在加载该列没有唯一值的数据。所以甲骨文拒绝了它。

要修复它，请确保 SUBSCRIBER_ID 是唯一的（在您的文件和表中已经存在的数据中）。

# ruby-on-rails - 如何让 active_admin member_action 接受 GET 和 POST 请求

> ID：13991542
> 
> 赞同：1
> 
> 时间：2012-12-21T14:01:17.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, activeadmin

我希望我的 active_admin 成员操作接受 GET 和 POST 请求。我该怎么办？

这不起作用：

`member_action :stats, :method => [:get, :post] do`

如果我们不指定方法，它假定它是：get（查看源，默认设置为：get）

我如何以 DRY 的方式进行操作？我可以写两次相同的函数：

`member_action :stats, :method => :post do`

`member_action :stats, :method => :get do`

但如果我不得不这样做，我会感觉非常糟糕！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:29:23.010

简单的答案：你不能。使用 member_action 时，您只是创建了一个仅支持一个动词的 AA:ControllerAction 实例。

但是有希望:)，你可以用更有意义的动词来写你的成员动作（它有副作用吗？POST，它应该是可收藏的吗？GET）然后打开你的 routes.rb 并添加如下内容：

```
namespace :admin do
  resources :your_resource do
    get 'stats', :on => :member
    post 'stats', :on => :member
  end
end 
```

# jenkins - 覆盖 Jenkins/Hudson BUILD_URL

> ID：13991548
> 
> 赞同：2
> 
> 时间：2012-12-21T14:01:42.660
> 
> 标签：jenkins, hudson

是否可以覆盖或更改构建 url？

我尝试将 $BUILD_URL 设置为 pre 步骤，但它似乎不起作用。

默认构建 URL：`host:8080/job/H_tests_tests/13/`

我想要类似的东西`host:8080/job/H_tests_tests/REV2315_13`

jenkins 内部版本号在哪里`REV2315 = REV_${SVN_REVISION}`和是。`13`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:37:34.587

您不能覆盖 jenkins/hudson 环境变量。可以在构建步骤中临时覆盖它们，但是一旦您进入其他构建步骤或构建后步骤，它就会丢失。

*   您可以调查 EnvInject 插件
    [https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)

*   然而，一种更简单的方法是从其他组件创建您想要的 URL，这
    `${JOB_URL}/REV${SVN_REVISION}_${BUILD_NUMBER}`将为您提供您所要求的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:58:47.307

将 Jenkins 的环境变量视为“*只读*”，不要试图操纵它们。

代码应该能够在不同的位置运行 -
最好不要依赖在特定文件夹中运行的脚本，
因为该文件夹可以更改，具体取决于 Jenkins 配置
（例如，当您将作业更改为在*从属*设备上运行而不是在*Master*上，
或者当您从一个*Slave*切换到另一个 Slave 时）。

尝试使用与 Jenkins 的工作文件夹*无关*
的路径， 因为此位置可能会更改，例如：
脚本可以将目录更改为预定义的位置，执行其工作，
然后将工件复制到另一个预定义的位置。

# java - 在 Java Swing 中获取文档路径

> ID：13991553
> 
> 赞同：-3
> 
> 时间：2012-12-21T14:02:13.707
> 
> 标签：java, swing, path

嗨，我想获取文档的**路径**，我想使用**`jfilechooser`**但**`jfilechooser`**获取文件路径，但我想要文档**路径**，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:13:33.950

你真的应该先用谷歌搜索一下。这就是我为了找到这个所做的一切：

```
chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
chooser.setAcceptAllFileFilterUsed(false); 
```

然后运行文件选择器，并使用它来获取目录位置。

```
String dir = chooser.getCurrentDirectory(); 
```

你可以在谷歌上找到这个。下一次，在这里问你的问题之前，至少环顾四周 15 分钟。

# uiview - UIView 半透明上的按钮不可见

> ID：13991569
> 
> 赞同：0
> 
> 时间：2012-12-21T14:03:08.277
> 
> 标签：uiview, uibutton, subview, alpha

我有一个 UIView，其中一些部分是半透明的（alpha <1.0）和其他不透明的。我想将按钮不透明作为子视图，我注意到它们也变成半透明按钮的部分，而在不透明按钮的其他部分，即使设置为 alpha = 1.0，您也看不到。

```
-(void)viewDidLoad{
  //......
  self.viewSito = [[UIView alloc]init];
  //this view has some parts semi-trasparent and other opaque

  self.buttonClose =[UIButton buttonWithType:UIButtonTypeRoundedRect];
  self.buttonClose.backgroundColor=[UIColor blackColor];
  self.buttonClose.alpha =1.0;
 /*the output is semi-transparent when is on uiview semi-transparent, but when uiview is 
  opaque the button is not visible, as if it were "hidden" from the opaque part 
  of the view.*/
  //...

 [self.viewSito addSubview:self.buttonClose];

} 
```

按钮仍然有效，只是可见性问题。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:29:22.487

尝试以这种方式设置您的 UIView 半透明：

myView.backgroundColor = [UIColor colorWithRed:0.1f green:.1f blue:.1f alpha:.7f];

设置 alpha 值

# wpf - 为什么这个 RotateTransform 不能以编程方式工作？

> ID：13991570
> 
> 赞同：1
> 
> 时间：2012-12-21T14:03:09.567
> 
> 标签：wpf, rotatetransform

我想创建一个允许旋转其内容的按钮控件。我的课看起来像这样。ApplyRotation 确实被调用，但文本保持水平。

我忘记了什么吗？使布局无效或类似的东西......

```
public class KeyButton : Button
{
    private TextBlock content;
    private Viewbox viewbox;

    #region DEPENDENCY - Angle
    // Dependency Property
    public static readonly DependencyProperty AngleProperty =
         DependencyProperty.Register("Angle", typeof(double),
            typeof(KeyButton),
            new FrameworkPropertyMetadata(0.0, OnAnglePropertyChanged, OnCoerceAngleProperty),
          OnValidateAngleProperty);

    // .NET Property wrapper
    public double Angle
    {
        get { return (double)GetValue(AngleProperty); }
        set { SetValue(AngleProperty, value); }
    }

    private static void OnAnglePropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
    {
        KeyButton control = source as KeyButton;
        if (control != null)
        {
            ApplyRotation(control);
        }
    }

    private static object OnCoerceAngleProperty(DependencyObject sender, object data)
    {
        // TODO implement
        return data;
    }

    private static bool OnValidateAngleProperty(object data)
    {
        // TODO implement validation
        return data is double;
    }
    #endregion

    public KeyButton()
    {
        viewbox = new Viewbox();
        content = new TextBlock { Text = "X" };
        this.Content = viewbox;
        viewbox.Child = content;
    }

    private static void ApplyRotation(KeyButton control)
    {
        if (control.viewbox.Child != null)
        {
            control.viewbox.Child.RenderTransform = new RotateTransform(control.Angle);
        }
    }

    protected override void OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs e)
    {

        base.OnPropertyChanged(e);
        switch (e.Property.Name)
        {
            case "Content":
                content.Text = e.NewValue.ToString();
                ApplyRotation(this);
                break;
            default:
                try
                {
                    viewbox.SetValue(e.Property, e.NewValue);
                }
                catch (Exception)
                {
                }
                break;
        }
    }
} 
```

我使用 XAML 进行了尝试，效果很好。（我有大约 100 个按钮，所以我认为创建一个新类会更好......）

```
<Button Grid.Row="0" Grid.Column="0">
    <Viewbox>
        <TextBlock Text="Hello">
            <TextBlock.RenderTransform>
                <RotateTransform Angle="45"/>
            </TextBlock.RenderTransform>
        </TextBlock>
    </Viewbox>
</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:15:41.527

问题是当 KeyButton 的 Content 属性在 XAML 中设置时，如下所示

```
<KeyButton Content="Hello"/> 
```

您在构造函数中分配的 Viewbox 被新的内容对象替换。您重写的 OnPropertyChanged 方法不会阻止这种情况。然后，您的`viewbox`成员将不再包含在 Content 属性和分配中

```
control.viewbox.Child.RenderTransform = new RotateTransform(...) 
```

没有可见`control.viewbox`的效果，因为不再可见。

只要您的所有按钮具有相同的旋转角度，我强烈建议您按照 Erno 所示的默认按钮样式修改 ContentTemplate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:22:39.880

您仍然可以采用 XAML 方式：

```
<Style TargetType="Button">
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <Viewbox>
                    <ContentPresenter>
                        <ContentPresenter.RenderTransform>
                            <RotateTransform Angle="45"/>
                        </ContentPresenter.RenderTransform>
                    </ContentPresenter>
                </Viewbox>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# java - 是否可以在 java 调试中从外部完成线程？

> ID：13991583
> 
> 赞同：1
> 
> 时间：2012-12-21T14:04:17.390
> 
> 标签：java, multithreading, debugging, netbeans, netbeans-7

我想知道是否可以在调试中从外部完成一个线程，（我不介意它是否以不安全的方式通过已弃用的 Thread.stop()）。

我使用的是 Netbeans 7.1.2，线程调试的选项是 make current、suspend、interrupt，但没有停止选项。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T19:31:01.160

你可以试试这个 insted of thread.stop() 方法。

```
class TestThread implements Runnable{

 private Thread thread;

 public TestThread()
 {
   thread=new Thread(this);
 }

 public void stopThread()
 {
   thread=null;
 } 
 public void run()
 {
   while(thread!=null)
   {
     //Some Code here
   }
 }
}

class Main
{
   public static void main(String args[])
   {
     TestThread tt=new TestThread();
     //sleep for some time
     tt.stopThread();
   }
} 
```

当你想停止线程调用 stopThread() 函数时，如上例所示。

# file - 恢复更改文件的内容

> ID：13991584
> 
> 赞同：0
> 
> 时间：2012-12-21T14:04:21.800
> 
> 标签：file, text, restore

在一个重要的文件中，我错过了我所写的大部分内容。我一定是不小心按了 ctrl+a，然后写了我的新东西并保存了它或其他任何东西。我无法向我解释。

我在那台机器上使用windows和ubuntu。.txt 文件位于 windows 分区上，但我很可能使用 ubuntu 中的 gedit 对其进行了编辑。我不知道我所描述的文件应该发生的事情是否算作“覆盖”？

有什么方法可以恢复吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-11T00:22:56.680

首先，查看编辑器是否保留了任何备份文件，例如`#yourfile#`or `yourfile~`or `yourfile.bak`or `.yourfile.bak`or or or any of the sort. 如果失败，请转到 Ubuntu 机器并查看编辑器实例是否仍在运行。如果是这样，您可以只使用编辑器中的撤消命令。如果做不到这一点，请从昨晚的备份中提取一份副本。否则，没有机会。

# video.js - video.js - 淡出时间

> ID：13991587
> 
> 赞同：1
> 
> 时间：2012-12-21T14:04:31.853
> 
> 标签：video.js

首先 - video.js 是一个不错的工具！

在 Firefox/Chrome 中 - controlbar-fadeIn 很快 - 这很好。但是fadeOut 非常非常慢。在 IE 7/8/9 中没有淡入/淡出。

如何设置淡出时间？

非常感谢

# r - 将时间序列聚合到年度数据

> ID：13991589
> 
> 赞同：5
> 
> 时间：2012-12-21T14:04:34.733
> 
> 标签：r, time-series, finance, zoo

考虑我们有每天的股票价格时间序列（比如说富时指数）。我们要计算每日、每月和每年的回报。

为了计算每月和每年的回报，我们必须将时间序列数据聚合成月和年。在“zoo”包中，我们有聚合函数，它可以帮助我们将数据聚合到每月的频率。在使用 as.yearmon 类的代码行下方：

```
# Computing simple returns
FTSERet = diff(FTSE)/lag(FTSE,k=-1)

# Monthly simple returns
MonRet <- aggregate(FTSERet+1, as.yearmon, prod)-1

# Quarterly simple returns
QuartRet <- aggregate(FTSERet+1, as.yearqtr, prod)-1 
```

我还没有找到与 as.yearmon 用于月度数据或 as.yearqtr 用于季度数据以汇总到年度数据的等效类。你对那些东西有什么暗示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:43:42.027

`"yearmon"`并且`"yearqtr"`类将日期表示为年份 + 分数，因此：

```
as.year <- function(x) as.integer(as.yearmon(x)) 
```

还要注意这个结构：`diff(x, arithmetic = FALSE) - 1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:17:21.823

[在此处](http://cran.r-project.org/web/views/TimeSeries.html)查看时间序列包，并在文档中的某处查找“季节性”选项。我猜对于季度数据，您正在查看季节性为 4 的时间序列，如果您查看月度数据 - 您正在查看季节性为 12 的时间序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:44:49.987

您可能想查看`allReturns`quantmod 包中的函数。

```
library(quantmod)
getSymbols("^FTSE")
allRet <- allReturns(FTSE) 
```

要使用 计算年度回报`aggregate.zoo`，只需从指数中提取年份。

```
YearRet <- aggregate(FTSERet+1, as.integer(format(index(FTSERet),"%Y")), prod)-1 
```

# gcc - 具有多个目标的 Makefile 和使用 g++ -MMD 自动生成依赖项

> ID：13991592
> 
> 赞同：0
> 
> 时间：2012-12-21T14:04:50.053
> 
> 标签：gcc, makefile, dependencies

[SO上的另一个问题](https://stackoverflow.com/questions/11855386/using-g-with-mmd-in-makefile-to-automatically-generate-dependencies)描述了一个非常优雅的单一目标生成文件：

```
CXX = g++                     # compiler
CXXFLAGS = -g -Wall -MMD      # compiler flags
OBJECTS = x.o y.o z.o         # object files forming executable
DEPENDS = ${OBJECTS:.o=.d}    # substitutes ".o" with ".d"
EXEC = a.out                  # executable name

${EXEC} : ${OBJECTS}          # link step
    ${CXX} ${OBJECTS} -o ${EXEC}

-include ${DEPENDS}           # copies files x.d, y.d, z.d (if they exist) 
```

我的问题是：我们如何才能将其用于多个目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:25:48.407

您的解决方案看起来不错，但如果有很多目标，这会更容易扩展：

```
EXECS = exec_x exec_y

exec_x: a.o b.o c.o
exec_y: d.o e.o f.o

$(EXECS):
    ${LINK} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:04:50.053

我已经组合了一个似乎可行的解决方案，但我很想知道这是否是合适的技术。

```
CXX = g++                     # compiler
CXXFLAGS = -g -Wall -MMD      # compiler flags
LINK = ${CXX} $^ -o $@        # link step

exec_x: a.o b.o c.o
    ${LINK}

exec_y: d.o e.o f.o
    ${LINK}

-include *.d 
```

# php - ajax jquery自动表单提交问题

> ID：13991594
> 
> 赞同：0
> 
> 时间：2012-12-21T14:04:56.483
> 
> 标签：php, jquery

我正在使用下面的代码自动提交表单而不刷新，但问题是当我在表单字段中使用手动提交按钮并提交它时工作正常但自动提交刷新。我想提交表单并将数据存储在 mysql 中。手动提交和自动提交数据正在存储，但页面通过我不想要的自动提交刷新

```
<script type="text/javascript">
window.onload = function() {
  setTimeout('document.form1.submit()',10000);
}
</script>

<script type="text/javascript" >
$(function() {
$(".button").click(function() {

var searchBox = $("#searchBox").val();
var dataString = 'searchBox='+ searchBox ;
if(searchBox=='')
{
   $('.success').fadeOut(200).hide();
   $('.error').fadeOut(200).show();
}
else
{
   $.ajax({
   type: "POST",
   url: "ytitest1.php",
   data: dataString,
   success: function(){
   $('.success').fadeIn(200).show();
   $('.error').fadeOut(200).hide();
}
});
}
return false;
});
});

 </script> 
```

这是实时链接 [http://way2enjoy.com/try/k/ytitest1.php](http://way2enjoy.com/try/k/ytitest1.php)

我只想自动提交，但页面不应该刷新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:24:39.497

这就是您所需要的，我已经包含了整个代码供您参考。

此示例将表单本身绑定到 ajax 调用，当它被调用时，表单操作什么都不做，只处理 jquery。适用于自动呼叫或手动呼叫。

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    </head>
    <body>
        <form id="myform" name="myform" action="#NULL" method="POST">
            <input type="text" name="myname">
            <input type="submit">
        </form>

        <script>
            $(document).ready(function() {
               setTimeout(function() {
                   $('#myform').submit();
               }, 1000);
               $('#myform').submit(function(e) {
                  e.preventDefault();
                  window.alert('Do work here.'); 
               }); 
            });
        </script>
    </body>
</html> 
```

这是关于 jQuery .submit() 处理程序的文档：http: [//api.jquery.com/submit/](http://api.jquery.com/submit/)其中还包括有关 .preventDefault() 的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:18:08.680

你的 .click 函数应该有 e 参数然后添加

```
e.preventDefault(); 
```

在你的函数体中

```
$(function() {
$(".button").click(function(e) {
e.preventDefault(); 
var searchBox = $("#searchBox").val();
var dataString = 'searchBox='+ searchBox ;
if(searchBox=='')
{
   $('.success').fadeOut(200).hide();
   $('.error').fadeOut(200).show();
}
else
{
   $.ajax({
   type: "POST",
   url: "ytitest1.php",
   data: dataString,
   success: function(){
   $('.success').fadeIn(200).show();
   $('.error').fadeOut(200).hide();
}
});
}
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:21:22.707

```
 <script type="text/javascript" >
    $(function() {
        $("form").submit(function() {
            var searchBox = $("#searchBox").val();
            var dataString = 'searchBox='+ searchBox ;
            if(searchBox=='')
            {
                $('.success').fadeOut(200).hide();
                $('.error').fadeOut(200).show();
            }
            else
            {
                $.ajax({
                    type: "POST",
                    url: "ytitest1.php",
                    data: dataString,
                    success: function(){
                        $('.success').fadeIn(200).show();
                        $('.error').fadeOut(200).hide();
                    }
                });
            }
            return false;
        });
    });
     </script> 
```

当您自动提交表单时触发 onsubmit 事件，而不是点击

# requirejs - r.js 在使用 'dir' 和 'modules' 时排除非构建层文件

> ID：13991596
> 
> 赞同：1
> 
> 时间：2012-12-21T14:05:02.177
> 
> 标签：requirejs, r.js

我的项目结构非常复杂，它是 jsp/js/css 文件的混合体。

在 build.js 中，我使用“dir”和“modules”，输出文件夹包含从 baseUrl 开始的所有内容，它包含数千个文件和文件夹，但我只需要在“modules”指令中指定的少量构建层文件，

有没有办法不将非构建层文件复制到“dir”文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:17:26.673

利用

```
skipDirOptimize: true 
```

排除所有非构建层文件。r.js 将只优化（和复制）构建层（`modules`构建脚本的部分）。

请参阅文档[中的 example.build.js](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L95)文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T05:09:06.993

迟到的答案，但您可以尝试 removeCombined 选项。见[https://github.com/jrburke/r.js/blob/master/build/example.build.js#L349](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L349)

以下是上述网址的片段

```
//If set to true, any files that were combined into a build bundle will be
//removed from the output folder.
removeCombined: false, 
```

# vb.net - 如何使 ListView 复选框像单选按钮一样反应

> ID：13991600
> 
> 赞同：1
> 
> 时间：2012-12-21T14:05:13.550
> 
> 标签：vb.net, listview, checkbox, radio-button

我的列表视图中有几个项目是复选框。

我设法在我的列表视图“ItemChecked”事件中使用了这段代码：

```
For Each item In lwSources.Items
    If Not item.Index = e.Item.Index Then item.Checked = False
Next 
```

* * *

问题是它没有正确反应。例如，如果没有选择，我单击一次，该项目被正确选择。如果我尝试单击另一个项目（未选中），那么我检查的第一个项目将被取消选中，我必须再次单击以检查我当前想要的项目。

它需要比需要多 1 次点击...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:09:33.547

经过一个小时的尝试，我终于做到了。

首先像这样设置一个全局变量..

```
Dim a As Integer = 0 
```

在正常的点击事件中将其设置为 0，这将首先被触发。

```
 Private Sub ListView1_Click(sender As System.Object, e As System.EventArgs) Handles   ListView1.Click
     a = 0
    End Sub 
```

并在检查的列表视图项目中，检查 a = 0。

```
Private Sub ListView1_ItemChecked(sender As System.Object, e As System.Windows.Forms.ItemCheckedEventArgs) Handles ListView1.ItemChecked

    If a = 0 Then
        For Each item In lwSources.Items
            a = 1
            If Not item.Index = e.Item.Index Then
                item.Checked = False
            End If
        Next
    End If
End Sub 
```

我认为问题在于，当我们更改选中的值时，它会再次触发事件但没有发送者，这就是为什么它们都进入未选中状态的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:25:53.257

在这个条件下设置这个条件并尝试....

```
For Each item In lwSources.Items
      If  item.Index = e.Item.Index Then
       item.Checked = true
      End If
 Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-01T09:47:50.560

嘿，你在那边，你的代码很棒，如果你把代码放在 ItemCheck 事件中而不是像这样的 ItemChecked 事件中，它也会很好用

`Private Sub IMFavIconList_ItemCheck(sender As Object, e As ItemCheckEventArgs) Handles IMFavIconList.ItemCheck For Each item In sender.Items If Not item.Index = e.Index Then item.Checked = False Next End Sub`

它对我很有用，伙计！

# iis - asp 经典：应用程序“主页”网址

> ID：13991602
> 
> 赞同：1
> 
> 时间：2012-12-21T14:05:19.540
> 
> 标签：iis, iis-7, asp-classic

我在一家新公司工作，他们有一个经典的 asp 应用程序。没有人知道如何配置它，所以我玩得很糟糕。

问题是当代码调用类似的东西时： `<img src="/images/TesteiraHome.png" />`

在如下网址上：`http://localhost/myApplication/index.asp`

IIS 尝试从 URL 获取 IMG：`http://localhost/images/TesteiraHome.png`

如何为我的应用程序设置“基本”网址，以便 iis 将尝试从`http://localhost/myApplication/images/TesteiraHome.png`

谢谢

编辑：我不想重构所有项目。没有任何 IIS 配置可以使其理解 / 表示 locahost/myapp/ 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:08:02.963

好吧，坚持使用 HTML，您可以使用[`<base>`标签](https://developer.mozilla.org/en-US/docs/HTML/Element/base)：

```
<base href="http://localhost/myApplication/" /> 
```

但是，最好将图像指定为`runat="server"`并`~/images/TesteiraHome.png`用作位置。或者，您可以使用[`ResolveUrl`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl.aspx)or [`ResolveClientUrl`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveclienturl.aspx)：

```
<img src="<%=ResolveUrl("~/images/TesteiraHome.png")%>" /> 
```

并让 ASP 为您做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:07:43.530

找到了解决方案：

在 IIS 上添加一个新站点并放置物理路径。

选择它在任何未使用的端口上运行（对我来说是 8090）

现在它明白这是默认路由。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T16:58:07.257

过去是否成功运行？如果有，并且现在已移动到新服务器，请确保站点在 IIS 中的设置方式与最初相同，即设置为站点，还是默认设置为虚拟目录/应用程序地点。

从外观上看，它应该设置为站点本身，以便站点的根目录是它自己的目录，而不是 wwwroot。

另一种非常骇人听闻的可能性（以避免任何重构）是简单地将图像文件夹从站点移动到 wwwroot 目录的根目录。但是，如果您在那里运行任何其他站点，则不是真正可取的。

# node.js - Mongoose 模式：验证唯一字段，不区分大小写

> ID：13991604
> 
> 赞同：18
> 
> 时间：2012-12-21T14:05:38.480
> 
> 标签：node.js, validation, mongodb, express, mongoose

我有一个`userSchema`这样的：

```
var userSchema = new Schema({
    name: {
      type: String
    , required: true
    , validate: [validators.notEmpty, 'Name is empty']
    }
  , username: {
      type: String
    , required: true
    , unique: true
    , validate: [validators.notEmpty, 'Username is empty']
    }
}); 
```

该`username`字段应该是唯一的。如果数据库中已经存在此用户名，Mongoose 将抛出错误。但是，它不区分大小写，我需要它。

我是否认为实现不区分大小写的唯一检查的唯一方法是编写我自己的验证规则，该规则将对集合执行查询？是否可以编写这样的验证检查，创建更多与集合的连接？我也需要为 做类似的事情`email`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T14:13:04.900

如何使用：

```
{ type: String, lowercase: true, trim: true } 
```

达到你的目的？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-02-07T16:19:51.857

索引上的[排序规则](https://docs.mongodb.com/manual/reference/collation/)`strength: 2`解决了这个问题。

```
index: {
  unique: true,
  collation: {
    locale: 'en',
    strength: 2
  }
} 
```

将其放在您的模式创建代码中，如下所示：

```
var userSchema = new Schema({
  ...
  username: {
    type: String,
    required: true,
    index: {
      unique: true,
      collation: { locale: 'en', strength: 2 }
    }
}); 
```

**注意：**确保模型上的索引得到更新——您可能需要手动执行此操作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-02-03T05:44:00.957

**...在NodeJS上使用猫鼬进行查询：**

```
const countryName = req.params.country;

{ 'country': new RegExp(`^${countryName}$`, 'i') }; 
```

或者

```
const countryName = req.params.country;

{ 'country': { $regex: new RegExp(`^${countryName}$`), $options: 'i' } };

// ^australia$ 
```

或者

```
const countryName = req.params.country;

{ 'country': { $regex: new RegExp(`^${countryName}$`, 'i') } };

// ^turkey$ 
```

**一个完整的 Javascript 代码示例，NodeJS 和 Mongoose ORM on MongoDB**

```
// get all customers that given country name
app.get('/customers/country/:countryName', (req, res) => {
    //res.send(`Got a GET request at /customer/country/${req.params.countryName}`);

    const countryName = req.params.countryName;

    // using Regular Expression (case intensitive and equal): ^australia$

    // const query = { 'country': new RegExp(`^${countryName}$`, 'i') };
    // const query = { 'country': { $regex: new RegExp(`^${countryName}$`, 'i') } };
    const query = { 'country': { $regex: new RegExp(`^${countryName}$`), $options: 'i' } };

    Customer.find(query).sort({ name: 'asc' })
        .then(customers => {
            res.json(customers);
        })
        .catch(error => {
            // error..
            res.send(error.message);
        });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-03T19:08:14.290

我不知道你是否在 node.js 中这样做。但是您可以使用这样的 npm：[https](https://github.com/blakehaswell/mongoose-unique-validator) ://github.com/blakehaswell/mongoose-unique-validator来检查集合字段的唯一验证。其他方式可能是每次有新请求到来时检查集合。 [http://timstermatic.github.io/blog/2013/08/06/async-unique-validation-with-expressjs-and-mongoose/](http://timstermatic.github.io/blog/2013/08/06/async-unique-validation-with-expressjs-and-mongoose/) 您可以参考此处的材料并以适合您情况的方式使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-14T15:45:50.983

我使用[猫鼬唯一验证器](https://www.npmjs.com/package/mongoose-unique-validator)

例子 ：

```
const mongoose = require('mongoose');
const uniqueValidator = require('mongoose-unique-validator');
const { Schema } = mongoose;

const UserSchema = new Schema({
  name: {
    type: String,
    required: true,
    unique: true,
    index: true,
    maxlength: 100,
    trim: true,
    uniqueCaseInsensitive: true
  },
  username: {
    type: String,
    required: true,
    unique: true,
    index: true,
    maxlength: 100,
    trim: true,
    uniqueCaseInsensitive: true
  }
});

UserSchema.plugin(uniqueValidator, {
  message: 'Error, expected {PATH} to be unique.'
});

module.exports = mongoose.model('User', UserSchema); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-28T10:51:04.473

最好的方法是使用下面共享的现有 npm 包。 [https://www.npmjs.com/package/mongoose-unique-validator](https://www.npmjs.com/package/mongoose-unique-validator)

要使其区分大小写，您可以在同一页面中关注[uniqueCaseInsensitive 。](https://www.npmjs.com/package/mongoose-unique-validator#case-insensitive)

当已经有可用的包时，无需编写自己的验证逻辑（也可以关注[Avinash 的帖子](https://stackoverflow.com/a/35780875/4353189)）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-08T10:51:29.627

我在做一个项目时遇到了同样的问题。我只是用两行代码让它变得简单。将所有传入值转换为小写字母。

```
let getUsername = req.body.username;
let username = getUsername.toLowerCase(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-10T11:15:27.437

非常简单的解决方案

```
username : {
        trim:true,
        //lowercase:true,

        type:String,
        required:[true, '{PATH} is required.'],
        match : [
            new RegExp('^[a-z0-9_.-]+$', 'i'),
            '{PATH} \'{VALUE}\' is not valid. Use only letters, numbers, underscore or dot.'
        ],
        minlength:5,
        maxlength:30,
        //unique:true

        validate : [
            function(un, cb){
                console.log(v);
                student.findOne({username:/^un$/i}, function(err, doc){
                    if(err) return console.log(err);
                    if(!_.isEmpty(doc)) return cb(false);
                    return cb(true);
                });
            },
            'Username already exists.'
        ]
    }, 
```

`student`在这里，如果存在相同的字段，我正在使用异步验证并检查我的模型。如果需要，使用显然可以使用正则表达式。

但我不推荐这种方法，它不适合我的头脑。

而是坚持使用`{ type: String, lowercase: true, trim: true, unique:true }`方法并将原始用户名复制到其他字段以防万一。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-02-10T09:08:53.930

使用正则表达式怎么样？

```
var pattern = [ /some pattern/, "{VALUE} is not a valid user name!" ];

{ type: String, match: pattern } 
```

如需进一步参考： http: [//mongoosejs.com/docs/api.html#schematype_SchemaType-required](http://mongoosejs.com/docs/api.html#schematype_SchemaType-required)

# c# - 我无法在 Visual 2012 的配置管理器中更改平台

> ID：13991607
> 
> 赞同：1
> 
> 时间：2012-12-21T14:05:58.907
> 
> 标签：c#, asp.net, iis-7, visual-studio-2012, 32bit-64bit

自从我使用 Visual 2010 更改为 2012 以来，我运行了一个 Asp.net 站点，其中一个课程失控了。现在我遇到了这个错误。

> “由于以下错误，检索具有 CLSID 的组件的 COM 类工厂失败：80040154 类未注册”

我的搜索表明 IIS 管理器可以运行 32 位应用程序必须是真的。我修复了服务器中的问题，但在开发人员机器上我无法更改它。

我试图通过配置管理器更改平台。但它只显示“任何 CPU”我应该寻找本地 IIS 选项。我查看了那里并更改了它的 32 位应用程序规则。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:36:59.710

根据您所说，您已经在应用程序池中检查了 IIS 7 中的“启用 32 位应用程序”，这应该可以解决您的问题。

要在 32 位中编译您的应用程序，请打开应用程序属性并在“构建”选项卡中必须有一个“平台目标”下拉菜单。选择 x86 并重建您的解决方案。我相信这应该足够了。

# ajax - JSON AJAX 未定义项

> ID：13991611
> 
> 赞同：1
> 
> 时间：2012-12-21T14:06:16.950
> 
> 标签：ajax, jsonp

我在通过 AJAX 显示 JSON 时遇到问题。

提要未显示 - 浏览器说

> 未捕获的类型错误：无法读取未定义的属性“标题”

我想我在这些方面有问题：

```
$.each(data, function(i, item) {
            var news = '<h1>' + item.posts.title + '</h1>' 
                + '<p>' + item.posts.content + '</p>' 
                + '<p>' + item.posts.custom_fields.ecpt_chill + '</p>'; 
```

↪[查看 JSFiddle 的完整代码](http://jsfiddle.net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:03:16.330

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:09:08.597

您需要检查您尝试加载的内容。未定义意味着您没有正确加载对象。尝试使用 Firefox 的海报扩展程序检查源内容。

# asp.net - dataobjectmethod的第二个参数是什么，asp.net BLL

> ID：13991612
> 
> 赞同：0
> 
> 时间：2012-12-21T14:06:17.437
> 
> 标签：asp.net, bll

我正在研究 asp.net 中数据访问的 BLL。

只有一件事不清楚，DataObjectMethod 的第二个参数是什么，它是一个名为 isDefault 的布尔变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:31:04.533

在数据源控件的上下文中，您可以有多个选择方法。设置是默认值意味着这是它将使用的主要设置，除非指定了另一个。看到这个： http: [//msdn.microsoft.com/en-us/library/4ad99k3d (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/4ad99k3d(v=vs.100).aspx)

# java - GWT 显示插入到 texbox 中的值

> ID：13991614
> 
> 赞同：1
> 
> 时间：2012-12-21T14:06:25.623
> 
> 标签：java, gwt

我需要显示插入到文本框中的值。我创建了这段代码：

```
public void onModuleLoad()
{
    TextBox textValue = new TextBox();
    textValue.getSelectedText();
    final String index = textValue.getValue().toString();

    Button button = new Button("button", new ClickHandler()
    {
        public void onClick(ClickEvent event)
        {

            Window.alert("You selected: " + index);

        }
    });

    RootPanel.get().add(textValue);
    RootPanel.get().add(button);
} 
```

但该值不会出现在窗口中。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:21:10.973

如果要显示选定的文本，则应使用`getSelectedText`，而不是`getValue`

尝试这个

```
public void onModuleLoad()
        {
            final TextBox textValue = new TextBox();

            Button button = new Button("button", new ClickHandler()
            {
                public void onClick(ClickEvent event)
                {
                    final String index = textValue.getSelectedText();

                    Window.alert("You selected: " + index);

                }
            });

            RootPanel.get().add(textValue);
            RootPanel.get().add(button);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:12:36.983

将 textValue.getValue 条件放在按钮 onClick 事件中。

```
public void onModuleLoad()
{
    final TextBox textValue = new TextBox();
    textValue.getSelectedText();

    Button button = new Button("button", new ClickHandler() {
        public void onClick(ClickEvent event)
        {
            final String index = textValue.getValue().toString();

            Window.alert("You selected: " + index);

        }
    });

    RootPanel.get().add(textValue);
    RootPanel.get().add(button);
} 
```

# javascript - Box2dWeb 动态与静态实体恢复

> ID：13991615
> 
> 赞同：1
> 
> 时间：2012-12-21T14:06:28.653
> 
> 标签：javascript, box2d, box2dweb

我有一个带有一些动态物体的 Box2dWeb 模拟。我对所有动态物体都使用了相同的夹具，如下所示：

```
var fixDef = new b2FixtureDef;
fixDef.density = 1.0;
fixDef.friction = 0.1;
fixDef.restitution = 0; 
```

我认为将恢复设置为 0 可以防止任何弹跳，但是当产生一堆动态物体时，它的作用就像一个弹簧。例子在[这里](http://www.lelloman.altervista.org)。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:58:28.763

我认为问题不在于赔偿。块重叠并试图脱身。你会得到类似隧道的东西。尝试增加velocityIterations 和positionIterations。

# c++ - c++ 到 c# 的“As”？

> ID：13991617
> 
> 赞同：4
> 
> 时间：2012-12-21T14:06:52.407
> 
> 标签：c++

如何将结构转换为其一种基本类型？

在 c# 中，您可以使用关键字 "as" like 来做到这一点`Entity as Monster`。我怎样才能在 C++ 中做到这一点？

这是我的结构：

```
struct Entity
{
    USHORT X;
    USHORT Y;
    UINT Serial;
    USHORT SpriteID;
};

struct Monster : Entity
{
    UINT UNKNOWN;
    BYTE Direction;
    USHORT Type;
};

struct Item : Entity
{
    BYTE UNKNOWN1;
    USHORT UNKNWON2;
};

struct NPC : Entity
{
    UINT UNKNOWN1;
    BYTE Direction;
    BYTE UNKNOWN2;
    BYTE NameLength;;   
    byte Name[];
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T14:13:34.977

在 C++ 中，这种可能性只存在于指向*多态*类型对象的指针（即具有至少一个虚函数的类型）。您可以使用[`dynamic_cast<PtrType>`](http://en.wikipedia.org/wiki/Dynamic_cast).

这是一个完整的示例（[也在 ideone 上](http://ideone.com/U823Sd)）：

```
#include <iostream>
using namespace std;

struct A {virtual void foo(){}};
struct B {virtual void foo(){}};

int main() {
    A *a = new A();     
    B *b = new B();
    A *aPtr1 = dynamic_cast<A*>(b);
    cout << (aPtr1 == 0) << endl; // Prints 1
    A *aPtr2 = dynamic_cast<A*>(a);
    cout << (aPtr2 == 0) << endl; // Prints 0
    delete a;
    delete b;
    return 0;
} 
```

第一个`dynamic_cast`失败，因为`b`指向与`A*`;不兼容的类型的对象。第二个`dynamic_cast`成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:09:41.830

看一下 C++ 类型转换运算符：

[http://www.cplusplus.com/doc/tutorial/typecasting/](http://www.cplusplus.com/doc/tutorial/typecasting/)

```
Entity e;
Monster m = static_cast<Monster>(e); 
```

如果 Entity 至少有一个虚拟方法，你可以这样做：

```
Monster * m = dynamic_cast<Monster*>(&e); // m != null if cast succeed 
```

请注意，C# 的“as”不适用于`struct`. 在这种情况下，您必须在 C# 中转换对象，这等效`static_cast`于 C++ 中的 a。

如果转换无效，您的程序将根本无法编译。

# algorithm - 具有作业之间时间的动态编程间隔调度

> ID：13991620
> 
> 赞同：1
> 
> 时间：2012-12-21T14:07:09.317
> 
> 标签：algorithm, dynamic, recursion, scheduling, intervals

我正在尝试使用动态编程对间隔调度问题进行编程。所有工作都有不同的（正）权重并且不重叠。这些权重代表不同的运行时间。作业之间可能存在三个“间隙”的空闲时间。此外，每个作业的每个时间单位（以秒为单位）占用一个资源。资源都可以具有不同的值。我想使用动态编程算法（递归）找到所有作业的最小资源总和。

举个例子可能会更清楚：

假设您有 3 个工作，`time units { 2, 2, 3 }`并且您有一个 8 长的资源列表`{ 2, 5, 1, 8, 4, 1, 1, 5 }`。作业一需要两个时间单位，因此需要两个资源，因为它是第一个作业，它将占用资源列表的前 2 个资源。工作二不必在工作一之后立即开始，它也可以从接下来的三个“间隙”之一开始。第二个工作也需要两个资源，因为它可以从三个差距之一开始，而不是第一个工作，所以它可以利用的资源的可能性是`(1,8) (8,4) (4,1) (1,1) = 9 12 5 2`（可用资源的不同总和）。所有工作的总和当然小于资源的数量。

这一直持续到所有作业完成。我想使用动态编程算法（递归）找到所有作业的最小资源总和。

我尝试了不同的求解方法，但我发现在没有任何其他函数的情况下很难递归求解。

我确实编写了以下代码，但没有按预期执行：

```
public static double getCost(int t, int q, int r, int[] jobs, double[] resources){
    double table[][] = new double[t+1][r+1];
    for(int i = 0;i < t;i++){
        for(int j = 0;j < r;j++){
            double cost = 0;
            for(int k = j-jobs[i] + 1;k <= j;k++){
                if(k < 0){
                    break;
                }
                cost = cost + resources[k];
            }
            double min = Double.POSITIVE_INFINITY;
            for(int l = 1;l <= q;l++){
                if(i == 0 && l == 1){
                    min = cost+j-jobs[0]-l;
                }
                else{
                    double neww = cost+j-jobs[i]-l;
                    if(neww < min){
                        min = neww;
                    } 
                }
            }
            table[i+1][j+1] = min;
        }
    }
    return table[t][r];
} 
```

有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:10:54.360

首先，您需要为每个子问题定义状态，因此：

```
sum[t][r] = Minimum cost using up to 't' indexes in 'timeUnits',
            and 'r' indexes in 'resources' (exclusive indexes). 
```

基本情况是：

```
sum[0][0] = 0 
```

然后根据以前的值更新数组值。有两件事要计算：运行作业的成本，以及将其添加到什么（间隙大小）。

```
For each t
  For each r
    cost = Sum(resources[i]) for i = r-timeUnits[t]+1 ... r
    sum[t+1][r+1] = Min(cost + sum[t][r-timeUnits[t]-gap+1]) for gap = 0 ... 2 (0 only for t=0) 
```

最终成本是使用所有时间单位的最小值。

**编辑：**我修改了您的代码，使其通过了您的测试用例。

```
int[] jobs = { 2, 2, 2 };
int[] resources = { 1, 2, 3, 4, 5, 6, 7, 8, 1, 1 };
int q = 2;
int t = jobs.length;
int r = resources.length;

double table[][] = new double[t+1][r+1];

for(int i = 0;i <= t;i++){
    for(int j = 0;j <= r;j++){
        table[i][j] = Double.POSITIVE_INFINITY;
    }
}
table[0][0] = 0;

for(int i = 0;i < t;i++){
    for(int j = 0;j < r;j++){
        double cost = 0;
        for(int k = j-jobs[i] + 1;k <= j;k++){
            if(k < 0){
                cost = Double.POSITIVE_INFINITY;
                break;
            }
            cost = cost + resources[k];
        }

        double min = Double.POSITIVE_INFINITY;
        for(int l = 0;l <= q;l++) {
            int index = j-jobs[i]-l+1;
            if(index >= 0 && index <= r) {
                min = Math.min(min, cost + table[i][index]);
            }
            if(i == 0) break;
        }

        table[i+1][j+1] = min;
    }
}

double best = Double.POSITIVE_INFINITY;
for(int x = 0; x < r; x++) {
    best = Math.min(best, table[t][x+1]);
}

System.out.println("Best cost: " + best); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T10:26:22.740

```
http://www.cse.psu.edu/~asmith/courses/cse565/F10/www/lec-notes/CSE565-F10-Lec-13-dyn-prog-intro.pptx.pdf 
```

这将为问题提供明确的解决方案

# xampp - Kohana空白页，没有错误

> ID：13991622
> 
> 赞同：3
> 
> 时间：2012-12-21T14:07:14.667
> 
> 标签：xampp, kohana, kohana-2

所以，我已经在 Windows 上工作了，现在我正试图让它在 ubuntu 上工作。

我有一个我正在开发的 Kohana 2.3 应用程序，位于 localhost/myapp。当我导航到该 URL 时，我只是得到一个空白屏幕。我可以在 index.php 中回显“你好”，这很有效。问题似乎出在 bootstrap.php 中的 Kohana::setup() - 在该行打印出来之前回显一个字符串，在该行之后它什么也不做。

Kohana 核心目录与应用程序位于不同的位置，位于 /opt/lampp/htdocs/kohana。在我的 index.php 文件中：

```
$kohana_modules = '/opt/lampp/htdocs/kohana/modules';

$kohana_system = '/opt/lampp/htdocs/kohana/system'; 
```

这似乎不是问题，就好像我将这些值更改为其他值一样，我得到了正确的 PHP 错误。错误报告肯定是启用的。

有什么线索可以解决我的问题吗？相同的设置（据我所知）在同一台机器上的 Windows 上正常工作。

谢谢。我在 Ubuntu 12.10、Kohana 2.3、PHP 5.4 上使用 XAMPP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T10:06:05.633

尝试这个..

1.  编辑 system/core/Kohana.php
2.  修改 close_buffers 函数（大约第 626 行）
3.  注释掉“ob_end_clean();” 在函数结束时

# asp.net-mvc-3 - Asp.MVC 我们可以从模型组件中调用数据库层吗？

> ID：13991626
> 
> 赞同：3
> 
> 时间：2012-12-21T14:07:24.277
> 
> 标签：asp.net-mvc-3, design-patterns

我需要知道从架构的角度来看这是否是正确的方法。

我正在研究 MVC 项目，我有一个单独的数据层程序集和另一个模型程序集。这两个程序集都在 MVC 项目中引用。

现在出现了一个场景，我需要在模型组件中从数据库中获取数据注释字符串，是否可以在模型组件中引用数据层并从数据库中获取字符串，或者是否有更好的方法。

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:24:42.903

与设计问题一样，答案是“视情况而定”:)

我有一个项目，其中完全相同的实体用作模型和数据实体，因此在 UI (ASP.NET MVC) 和数据层 (EF 4.3) 中使用基本相同的数据注释。有用。好处是它在整个系统中都是一致的（一个`Account`对象在任何地方都意味着完全相同的东西），坏处是任何额外的模型逻辑，无论是面向数据库（例如导航属性）还是面向 UI（例如类`FullName`的属性`Account`）都会在同一个地方混合。

我有另一个项目，其中 UI 层的模型与数据层完全分离，通过管理层进行通信。有用。这里的好处是每一层都非常清晰，并且它的职责非常明确。然而，缺点是许多管理代码是管道代码，但还不够简单，无法自动生成。此外，任何更改，例如，将文本字段添加到实体，都需要在更多的地方进行更改。一个重要的评论是，开发人员之间的沟通受到了一些“Account”类（`AccountViewModel`，，`AccountEntity`等`AccountManager`）的阻碍

所以，我的观点是，做任何看起来最符合你当前架构的事情。

# magento-1.7 - Magento 1.7 更改购物车成功页面

> ID：13991628
> 
> 赞同：0
> 
> 时间：2012-12-21T14:07:30.627
> 
> 标签：magento-1.7

在结帐成功页面 (http://domain.com/checkout/cart/success) 上，如何将布局更改为 2columns-left 并拥有左侧边栏？当我在 checkout.xml 文件中编辑布局时，左侧块不会呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:43:56.810

添加了左侧参考。并更改了 2xolumns-left.phtml。在我的主题中创建了一个名为“custom”的目录，并在该目录中创建了一个 custom.phtml。此内容现在呈现在左侧。

**onepagecheckout.xml**

```
<onepagecheckout_index_success translate="label">
    <reference name="left">
        <block type="core/template" name="customproduct" template="custom/custom.phtml"/>
    </reference>    
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
    </reference>
    <reference name="content">
        <block type="checkout/onepage_success" name="checkout.success" template="checkout/success.phtml"/>
    </reference>
</onepagecheckout_index_success> 
```

**结帐.xml**

```
<checkout_onepage_success translate="label">
    <reference name="left">
        <block type="core/template" name="customproduct" template="custom/custom.phtml"/>
    </reference>
    <label>One Page Checkout Success</label>
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
    </reference>
    <reference name="content">
        <block type="checkout/onepage_success" name="checkout.success" template="checkout/success.phtml"/>
    </reference>
</checkout_onepage_success> 
```

希望你会成功！

# java - 管理线程的顺序

> ID：13991629
> 
> 赞同：2
> 
> 时间：2012-12-21T14:07:30.720
> 
> 标签：java, concurrency

我正在用java编写一个程序，其中必须有一些从主线程创建并在其旁边运行的线程（例如3个）。程序一步一步进行。在每个步骤中，主线程首先计算一个**时钟**并打印它（独占执行），然后其他线程**都**必须检查一些东西（它们的顺序不重要，它们必须同时工作），看看它们是否必须在这个**时钟**中打印出一些东西与否，这会重复。

如何以简单的方式强制它们之间的这种排序（*主*线程和其他线程的*集合*）？我必须这样写，我的意思是我不能没有线程。

这就是我想要的输出：

```
 Master Clock : 0
      Core 2 started its first task of 7 time units
      Core 0 started its first task of 9 time units
      Core 1 started its first task of 6 time units
    Master Clock : 1
    Master Clock : 2
    Master Clock : 3
    Master Clock : 4
    Master Clock : 5
    Master Clock : 6
      Core 1 started context switch
    Master Clock : 7
      Core 2 started context switch
    Master Clock : 8
      Core 1 started a new task of 9 time units
    Master Clock : 9
      Core 2 started a new task of 10 time units
      Core 0 started context switch
    Master Clock : 10
    Master Clock : 11
      Core 0 started a new task of 10 time units
    Master Clock : 12
    Master Clock : 13
    Master Clock : 14
    Master Clock : 15
    Master Clock : 16
    Master Clock : 17
      Core 1 started context switch
    Master Clock : 18
    Master Clock : 19
      Core 1 started a new task of 8 time units
      Core 2 started context switch
    Master Clock : 20
    Master Clock : 21
      Core 0 completed a total of 2 tasks
      Core 2 started a new task of 7 time units
    Master Clock : 22
    Master Clock : 23
    Master Clock : 24
    Master Clock : 25
    Master Clock : 26
    Master Clock : 27
      Core 1 completed a total of 3 tasks
    Master Clock : 28
      Core 2 completed a total of 3 tasks 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:58:09.177

我使用[`CyclicBarrier`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CyclicBarrier.html). 我定义了一个`Clock`类，它是一个专门的屏障，它在每一步都更新其内部计数器。这些任务是简单的线程，它们根据当前步骤完成工作，然后等待时钟继续。

```
package stackoverflow;

import java.util.LinkedList;
import java.util.List;
import java.util.Random;
import java.util.concurrent.BrokenBarrierException;
import java.util.concurrent.CyclicBarrier;

public class ClockTasks {

    public static void main(String[] args) {

        List<Task> tasks = new LinkedList<Task>();
        String[] tasksLabels = new String[] {"Physics", "Audio", "Video"};

        Clock clock = new Clock(tasksLabels.length, new Counter());

        for (String s: tasksLabels) {
            Task task = new Task(s, clock);
            tasks.add(task);
            task.start();
        }

    }

    static class Counter implements Runnable {
        volatile int step = 0;

        @Override
        public void run() {
            step++;
        }

        public int getStep() {
            return step;
        }
    }

    static class Clock extends CyclicBarrier {
        private Counter counter;

        public Clock(int parties, Counter counter) {
            super(parties, counter);
            this.counter = counter;
        }

        int getStep() {
            return counter.getStep();
        }
    }

    static class Task extends Thread {

        String name;
        Clock clock;
        boolean running = true;
        Random random = new Random();

        Task(String name, Clock clock) {
            this.clock = clock;
            this.name = name;
        }

        boolean checkStep(int step) {
            return true;
        }

        @Override
        public void run() {
            while (running) {
                try {
                    doIt(clock.getStep());
                    clock.await();
                } catch (InterruptedException e) {
                    running = false;
                    e.printStackTrace();
                } catch (BrokenBarrierException e) {
                    running = false;
                    e.printStackTrace();
                }
            }
        }

        public void doIt(int step) throws InterruptedException {
            System.out.println(name + ": step " + step);
            // Simulate a busy task
            Thread.sleep(random.nextInt(1000));
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T14:57:31.893

这可以通过[CyclicBarrier](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)来完成。

主线程可以创建`CyclicBarrier`并给它一个`Runnable`更新时钟。将 传递`CyclicBarrier`给每个线程，该线程将处理当前时钟，然后调用`await`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:13:06.733

这取决于您的时钟频率。如果不是太频繁，您可以拥有一个共享对象，所有工作线程`wait()`在完成工作时都可以使用该对象。当主线程希望它们恢复工作时，它可以`notifyAll()`在同一个对象上。如果滴答声很频繁，此方法确实存在您的工作人员无法在时钟滴答声内完成的小风险，但这是您无法控制的线程调度问题。

如果您必须在主线程再次滴答之前让所有工作人员完成，您可以设置两个`Semaphore`s，我们将其称为`okToWork`和`okToTick`。主线程在滴答之前需要`okToTick.acquire(X)`（其中 X 是工人的数量），这意味着所有 X 个工人都允许它滴答。当它完成滴答时，这`okToWork.release(X)`意味着它被允许所有 X 工人工作。工作人员在开始工作之前需要`okToWork.acquire()`从主线程获得许可才能工作，完成后需要`okToTick.release()`给主线程提供它需要勾选的 X 权限之一。请注意，如果您走这条路线，则`okToWork`必须将其`fair`设置为`true`. 信号量的起始许可计数应该是 0`okToWork`和 X`okToTick`这样 Mian 线程就可以开始滴答作响，但工人不必开始工作。

# c# - 如何使用 NPOI 在 asp.net 生成的 excel 中操作图表？

> ID：13991630
> 
> 赞同：1
> 
> 时间：2012-12-21T14:07:32.683
> 
> 标签：c#, asp.net, excel, npoi

我不确定是否可以修复它，但我有以下情况：

我有`DataTable`一些数据，我需要准备使用这些数据的图表。我已经读过动态制作任何图表的唯一可能性`NPOI`是准备模板并仅填充excel的单元格。但我有一些**问题**：

我可以拥有动态数量的数据行。所以我需要能够使用一个模板来例如 4 和 7 行。所以我有想法选择更多数据（在模板中）并只使用其中的一部分，但后来我遇到了这样的情况：

![](../Images/2885587e8d061c09fa46505dbb997b80.png)

所以我需要动态改变图表的范围。有没有可能解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-23T16:02:35.103

填充表格后，您只需更改图表中的范围。这是为三个图表填充表格的示例：

```
public static void ExportPackingReport_NPOI(string filepath, DataTable table)
        {
            IWorkbook xwb; // Workbook
            HSSFSheet sheet; // Sheet
            HSSFChart chart_0;// chart 1
            HSSFChart chart_1;// chart 2
            HSSFChart chart_2;// chart 3
            int rowIndex = 60; //First row of table with data
            int colIndex = 0;//First column of table with data
            int rows_count = table.Rows.Count; //Count of data in table
            try
            {
                //Read file
                using (FileStream rstr = new FileStream(filepath, FileMode.Open, FileAccess.Read))
                {
                    xwb = new HSSFWorkbook(rstr);
                    sheet = (HSSFSheet)xwb.GetSheet(xwb.GetSheetAt(0).SheetName);
                    var charts = HSSFChart.GetSheetCharts(sheet);
                    chart_0 = charts[0]; 
                    chart_1 = charts[1]; 
                    chart_2 = charts[2]; 
                    //Write file
                    using (FileStream wstr = new FileStream(filepath, FileMode.Open, FileAccess.ReadWrite))
                    {
                        //Populating file with data from Datatable
                        SetRowData_NPOI(table, xwb, rowIndex, colIndex);
                        //Overriding data ranges of charts 
                        CellRangeAddressBase chart_range_G = new CellRangeAddress(rowIndex + 1, rowIndex + rows_count, 6, 6);
                        CellRangeAddressBase chart_range_H = new CellRangeAddress(rowIndex + 1, rowIndex + rows_count, 7, 7);
                        CellRangeAddressBase chart_range_I = new CellRangeAddress(rowIndex + 1, rowIndex + rows_count, 8, 8);
                        CellRangeAddressBase chart_range_J = new CellRangeAddress(rowIndex + 1, rowIndex + rows_count, 9, 9);

                        //Apply new ranges of charts 
                        chart_0.Series[0].SetValuesCellRange(chart_range_G);
                        chart_0.Series[1].SetValuesCellRange(chart_range_J);

                        chart_1.Series[0].SetValuesCellRange(chart_range_H);
                        chart_1.Series[1].SetValuesCellRange(chart_range_J);

                        chart_2.Series[0].SetValuesCellRange(chart_range_I);
                        chart_2.Series[1].SetValuesCellRange(chart_range_J);

                        xwb.Write(wstr);
                        wstr.Close();

                    }
                    rstr.Close();
                    xwb.Close();
                }
            }
            catch (Exception)
            {
                throw;
            }
        } 
```

希望它会帮助某人:)

# hibernate - 用于查询的休眠代码

> ID：13991631
> 
> 赞同：4
> 
> 时间：2012-12-21T14:07:35.477
> 
> 标签：hibernate

我发现这个 Hibernate Criteria/Projection[教程](http://www.devarticles.com/c/a/Java/Hibernate-Criteria-Queries-in-Depth/2/)清晰、简洁且内容丰富。

作者 APRajshekhar 说，

```
SELECT COUNT(ID) FROM ORDER  HAVING PRICETOTAL>2000 GROUP BY ID 
```

> 可以在 Criteria 查询中重写如下：

```
List orders = session.createCriteria(Order.class)
     .setProjection( Projections.projectionList()
      .add( Projections.count(“id”) )
       .add( Projections.groupProperty(“id”) )
     )
      .list(); 
```

然而，在`HAVING PRICETOTAL>2000`Hibernate 代码中出现在哪里？此比较是否缺少标准（SQL 中的 where 子句）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:13:19.877

是的。您还需要：

```
.add(Restrictions.gt("priceTotal", 2000)) 
```

假设 Order 类上 PRICETOTAL 属性的名称确实是“priceTotal”

# php - 是否有任何基于遍历的路由的 PHP Web 框架？

> ID：13991635
> 
> 赞同：5
> 
> 时间：2012-12-21T14:08:01.720
> 
> 标签：php, url-routing, traversal, web-frameworks

所以，昨天我终于设法克服了我的懒惰并阅读了 Pyramid 框架的文档一段时间，我偶然发现了[以下主题](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/muchadoabouttraversal.html)。

我的问题是：是否有任何 PHP 框架支持遍历以替代 URL 调度..？我无法立即搜索任何内容。

# google-apps-script - 文档中inlineImages的水平对齐

> ID：13991643
> 
> 赞同：2
> 
> 时间：2012-12-21T14:08:17.630
> 
> 标签：google-apps-script

我正在尝试使用以下代码段在文档文件中插入图像：

```
var style = {};
style[DocumentApp.Attribute.HORIZONTAL_ALIGNMENT] = DocumentApp.HorizontalAlignment.CENTER;
doc.insertImage(j, fileBlob).setAttributes(style); 
```

图像已正确插入，但始终左对齐。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T06:54:07.930

试试修改后的代码

```
var style = {};
style[DocumentApp.Attribute.HORIZONTAL_ALIGNMENT] = DocumentApp.HorizontalAlignment.RIGHT;
doc.insertImage(j, blob).getParent().setAttributes(style); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:24:36.303

我以前从未使用过 Documents，所以这有点猜测。insertImage 调用返回 InlineImage（不是文档），因此您将样式应用于图像本身。尝试将图像包装在另一个元素（例如 ContainerElement）中，并将居中应用于包装“容器”元素。

# scala - Scala：生成伴随对象

> ID：13991645
> 
> 赞同：3
> 
> 时间：2012-12-21T14:08:24.903
> 
> 标签：scala, companion-object

无论如何，是否可以为某个类的每个子类自动生成一个伴随对象？

例如，我有`class Component[T]`一个`val companion: CompType[T]`where`T`应该是子类。例如：`class Transform extends Component[Transform]`。

有什么办法可以为每个子类生成伴随对象 - 虽然看起来很琐碎 - 以节省为我制作的每种组件输入对象定义？

**编辑：**

所有这一切的最终目标是一个实体系统。每个伴生对象都有一个唯一的整数（它从继承的特征中获取），可用于从组件数组中查找该特定类型的组件。例如，如果我想向实体添加一个 Transform 组件，我会调用：

```
addComponent(entity, Transform, new Transform(params)) 
```

然后，新`Transform`对象将被放置在表示由 Transform 伴随对象提供的索引处的实体的组件数组中。但是由于伴生对象从它们继承的特征中获取索引，因此除了它们的名称之外，它们之间没有任何类型的差异。因此，为什么生成它们会很好。

很抱歉一开始就没有更具体。如果这仍然令人困惑，那很可能是我只是以完全错误的方式做这件事！如果您这么认为，请随时告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:15:20.513

我认为目前没有任何方法可以在 Scala 中自动生成伴随对象。即将推出的宏类型支持最终可能会对您有所帮助，但这仍在开发中。

如果我理解正确，伴生对象的存在只是为了提供每个类的唯一整数？在这种情况下，也许这样的事情会起作用？

```
scala> object UniqueNumberProvider {
     |   val numbers = new collection.mutable.HashMap[Class[_], Int]
     |   def numberForClass(clazz: Class[_]) = numbers.get(clazz) match {
     |     case Some(n) => n
     |     case None => numbers.update(clazz, numbers.size + 1); numbers.size
     |   }
     | }
defined module UniqueNumberProvider

scala> UniqueNumberProvider.numberForClass(classOf[String])
res7: Int = 1

scala> UniqueNumberProvider.numberForClass(classOf[String])
res8: Int = 1

scala> UniqueNumberProvider.numberForClass(classOf[Int])
res9: Int = 2 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T16:15:59.770

您可以使用 Scala 2.10 中的宏来完成。[您可以在http://docs.scala-lang.org/overviews/macros/overview.html](http://docs.scala-lang.org/overviews/macros/overview.html)查找用法

# c++ - EnumProcessModulesEx 的替代品？

> ID：13991650
> 
> 赞同：1
> 
> 时间：2012-12-21T14:08:57.913
> 
> 标签：c++, winapi

我正在尝试迭代当前在 64 位机器上运行的进程，EnumProcessModules 与 32 位程序配合得很好，但对 64 位程序没有任何好处，我尝试使用我正在使用的 Devc++ 实现 EnumProcessModulesEx（没有visualstudio）但不能t 设法使头文件工作，看到这个[问题](https://stackoverflow.com/questions/13970345/enumprocessmodulesex-missing-in-psapi-h)，所以在想是否有另一种出路？

在我的程序中，我需要知道某个特定 exe 执行的进程是否正在运行，该进程可以是 32 位或 64 位，因此需要同时检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:20:32.327

`EnumProcessModules`确实要求调用进程使用与目标进程相同的架构（32 位与 64 位）。但是，对于您的用例，您不需要该功能。

创建当前进程表的快照然后迭代该快照以查找进程名称更有效（并且不会受到竞争条件的影响......）：

1.  调用[`CreateToolhelp32Snapshot`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx)创建进程表的快照

2.  使用[`Process32First`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684834%28v=vs.85%29.aspx)和[`Process32Next`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684836%28v=vs.85%29.aspx)迭代快照。

3.  对于快照中的每个元素，检查`szExeFile`（结构的）字段[`PROCESSENTRY32`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684839%28v=vs.85%29.aspx)以获取可执行文件名称。

您可能希望对名称进行不区分大小写的比较，因为 Windows 上的文件名不区分大小写。

# xml - JDK中XML相关的api

> ID：13991653
> 
> 赞同：1
> 
> 时间：2012-12-21T14:09:09.767
> 
> 标签：xml, java

我发现 jdk 6 中有很多包是 xml 相关的。如：

*   com.sun.org.apache.xerces.*
*   com.sun.org.apache.xml.*
*   com.sun.org.apache.xpath.*
*   javax.xml.*
*   org.w3c.dom.*
*   org.w3c.xml.*

作为一个java新手，我想知道，这些xml相关的api是如何组织的？他们可以在 xml 相关的编程中做什么？还请提及那些可以做类似工作的第三方库。

以前用dom4j做xml到object的转换，现在发现可以用jdk内置的jaxb了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:07:20.063

JDK中有几个API

*   **javax.xml.parers** - 用于 DOM/SAX 解析的 API
    *   **org.w3c.dom** - DOM 相关类
    *   **org.xml.sax** - SAX 相关类
*   **javax.xml.stream** - 用于 StAX（拉）解析的 API
*   **java.xml.bind** - 用于将域对象转换为 XML 的 API。
*   **javax.xml.transform** - 使用 XSLT 样式表将一个 XML 文档转换为另一个。
*   **javax.xml.validation** - 用于执行模式验证的 API
*   **javax.xml.xpath** - 用于查询 XML 文档的 API。

**一起使用这些 API**

这些 API 可以以多种不同的方式一起使用（以下是我博客中的示例）：

*   您可以使用`javax.xml.validation`API 来验证带有 JAXB 注释的对象：
    *   [http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html](http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html)
*   您可以使用`javax.xml.transform`API 来转换带有 JAXB 注释的对象：
    *   [http://blog.bdoughan.com/2012/11/using-jaxb-with-xslt-to-produce-html.html](http://blog.bdoughan.com/2012/11/using-jaxb-with-xslt-to-produce-html.html)
*   You could apply a SAX `XMLFilter` to a SAX parser to affect how JAXB objects are unmarshalled:
    *   [http://blog.bdoughan.com/2012/11/applying-namespace-during-jaxb-unmarshal.html](http://blog.bdoughan.com/2012/11/applying-namespace-during-jaxb-unmarshal.html)
*   You could unmarshal from a StAX `XMLStreamReader` to convert the middle of an XML document to objects.
    *   [http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html](http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html)

**Note:**

The `com.sun.org.apache` APIs are from the implementations of the standard XML APIs included in the JDK, I would recommend not using them directly. There are also alternate implementations of these standard APIs that can also be used that offer extensions beyond their corresponding specifications.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:21:38.243

也许您需要 JAXB：[JAXB 示例](http://www.mkyong.com/java/jaxb-hello-world-example/)。对我来说，Jaxb 涵盖了 java 中的所有需求。

# mysql - SQL 内连接不存在

> ID：13991663
> 
> 赞同：-4
> 
> 时间：2012-12-21T14:09:48.863
> 
> 标签：mysql, sql

我有以下类别（多对多关系）：

```
+ post

post_tag

+ tag

post_category

+ category 
```

我如何创建 SQL 查询来检查哪些标签在没有类别的帖子中？

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:13:42.147

```
select  distinct pt.tagname
from    post_tag pt
where   not exists
        (
        select  *
        from    post_category pc
        where   pc.post_id = pt.post_id
        ) 
```

# android - 所有活动的通用 SqliteopenHelper 类

> ID：13991665
> 
> 赞同：0
> 
> 时间：2012-12-21T14:09:49.863
> 
> 标签：android, oop, android-sqlite

我的项目中有两个数据库文件。

1.  在 assets 文件夹中可用（使用 SqliteOpenHelper 类打开）
2.  在运行时创建（使用 SqliteOpenHelper 类创建和打开）

哪个是最佳实践？

*   分别保留两个数据库并使用两个不同的类打开那些（扩展 SqliteOpenHelper 类）
*   保留资产数据库并在现有数据库中创建额外的表并使用相同的 Helper 类

我正在尝试对资产数据库和运行时创建数据库使用相同的 Helper 类。

我的应用程序也有带有多个片段和多个游标加载器的活动。我需要为 sqlite 使用通用帮助器类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:17:43.333

我建议您将 sqlite db 文件从 assets 复制到文件目录 (/data/data/files/) 中`onCreate`，`SQLiteOpenHelper`然后如果您需要在运行时创建额外的表，则可以使用相同的 db。这样可以减少使用 2 个 sqlite 文件和 2 个辅助类的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:18:38.177

始终尝试基于**松散耦合**进行设计，

所以你应该做一个类来进行sql操作，如果你需要不同的参数或不同的表，你应该封装它们。也许你可以创建一个 tableFactory ？但是你应该设计你的代码更有凝聚力和松散耦合......

# mysql - 如何解决此异常？

> ID：13991666
> 
> 赞同：1
> 
> 时间：2012-12-21T14:09:51.533
> 
> 标签：mysql, vb.net, mysql-workbench

**早上好，**

我对这个查询有点麻烦。当我在 Workbench 中对其进行测试时，它工作正常，但是 VB 抛出了一个异常，即“ccID”列是未知的。难道我做错了什么？我的意图是提取 ccID 字段以及今天与字段 ccAuthorizedUseEnd 中的日期之间的差异。

非常感谢您的帮助，谢谢。

**这是我在 MySQL 工作台中测试的查询：**

```
SELECT ccID, DATEDIFF(DATE(NOW()), ccAuthorizedUseEnd) AS Days
FROM accounting.cc_master 
```

**这是我在 VB.NET 中使用的相同查询**

```
Dim dbQuery2 As String = "SELECT ccID, DATEDIFF(DATE(NOW()), ccAuthorizedUseEnd) as Days " 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:13:13.190

您忘记了 VB.NET 版本中的 FROM 子句：

```
Dim dbQuery2 As String = "SELECT ccID, DATEDIFF(DATE(NOW()), ccAuthorizedUseEnd) as Days FROM accounting.cc_master" 
```

# css - 如何实现 li:last-child 少？

> ID：13991669
> 
> 赞同：6
> 
> 时间：2012-12-21T14:10:08.523
> 
> 标签：css, less

我有以下CSS：

```
ul.arbo {
    margin-top: 0.5em;
    }
ul.arbo li {color
    padding-bottom: 0.333em;
    }
ul.arbo li:last-child {
      color: #333;
    } 
```

我可以使用 Less 实现简单的 CSS。但是如何实现 li:last-child？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T14:15:06.907

尝试：

```
ul.arbo {
    margin-top: 0.5em;

    li {
        color: #444;
        padding-bottom: 0.333em;

        &:last-child {
         color: #333;
        }
    }
} 
```

# php - 删除选择类

> ID：13991672
> 
> 赞同：-1
> 
> 时间：2012-12-21T14:10:14.773
> 
> 标签：php, class

我的问题如下：我正在解析或抓取或类似字典以将其输出用作我的输入（换句话说，我显示了定义）。在这个输出中，包括了几个类。有一个类，即 f 类，它包括定义的术语，以及它后面的一个点。这个点打扰了我，我想把它擦掉。

![在此处输入图像描述](../Images/65c770b298107544e6be67cb4f62a59e.png)

```
<p class="p">

<a href="search?id=D536ScxxE2x5wsXG0ez" target="_self"><img align="right" alt="Ver artículo enmendado" border="0" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAAAZBAMAAADuyzxaAAAAElBMVEWEAgT8/vz8QkT8AgS8AgT8enxcJRi+AAAA0klEQVQ4y82SwQ3DMAhFOWQBxAJVqwyAWCCHjJDuv0r5OImR2hxqLkEWXxAeBis0vyu20LOCb85XBlidLwywBT8+wBr8y0btNrweGWmifIWwdN/5vVzOPpe8SveJl3z737x6zMJuoq7CzqOlQlhZkRGoQqz5xBty3sULw1kgFoAHbpFEs34S70UeN9QSz2ez6NOwb17sgu8Bypsq/+CB7nyevwf+zfLwmde2ItZgjbGx6fl+sbzE+2GN49zp/y3xNGwT+Mc4T+ALOE0LVa4nWqhoH2NuCULPEni8AAAAAElFTkSuQmCC"></a>

<span class="f">

<b>gas</b>

</span>

<span class="f">

<b>.</b>

</span>

</p> 
```

请注意，我正在彻底使用 php，所以如果你需要它，这里是：

```
<?php
    $word = $_REQUEST['word'];

    $url = "http://lema.rae.es/drae/srv/search?val={$word}";

    $css = <<<EOT

    <style type="text/css">

    .f /* I GUESS THE PROBLEM IS OVER HERE. I CANT VISIBILITY HIDE F BECAUSE THAT WOULD HIDE "GAS", APART FROM "." */
       {
         margin-left:50px;
         font-size: 200%;
         color: #ffe200;
         font-family: 'brannboll_fetregular';

       }

    </style>
EOT;

$data = file_get_contents($url);
$data = str_replace('</head>', $css.'</head>', $data);
echo '<div id="result1"
  style="
  top: 77%;
  left: 55%;
  overflow:scroll; 
  width:400px; 
  height:300px;
  border: 1px solid #000000;
  border-radius: 15px;
  background-opacity: 0.5;
  background: #047C8F;
  -webkit-border-radius: 15px;
  -moz-border-radius: 15px;
  box-shadow: inset 0px 3px 13px #000000;
  -moz-box-shadow:
               0px 3px 13px rgba(000,000,000,0.5),
               inset 0px 0px 13px rgba(0,0,0,1);
  -webkit-box-shadow:
               0px 3px 13px rgba(000,000,000,0.5),
               inset 0px 0px 13px rgba(0,0,0,1);
 ">
 '.$data.' 
 </div>';
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:29:20.203

您可以尝试以下几种方法：

**CSS**

您可以添加一条规则，指示浏览器仅显示 class 的第一个 span `f`：

```
span.f:not(:first-of-type) {
    display:none;
} 
```

这在旧浏览器中可能会失败，特别是在 IE8 和之前的浏览器中。

**PHP**

由于它看起来`.`是一个可预测的字符串，您可以简单地替换它：

```
$data = str_replace('<span class="f"><b>.</b></span>', '', $data); 
```

这也适用于您的“Word Not Found”页面 - 它只会`.`在每个世界的尽头消除 s：

[http://lema.rae.es/drae/srv/search?val=world](http://lema.rae.es/drae/srv/search?val=world)

**DOM 解析**

一种更强大的处理方法是查看 DOM Parser。您可以在此处阅读 DOM Parsing 的简要介绍：

[如何使用 dom php 解析器](https://stackoverflow.com/questions/960841/how-to-use-dom-php-parser)

基本上，您会希望`<span class="f">`在第一个中找到第二个`<p>`。

# java - 如何从 Java 运行一些使用 ActiveX .. 的 JS

> ID：13991673
> 
> 赞同：0
> 
> 时间：2012-12-21T14:10:14.553
> 
> 标签：java, javascript, activex

我必须在 java (1.5) swing 程序中使用设备。问题是供应商不提供 Java 的 API。它们提供 Visual C++ 支持、python、JS、VBSCript API

遗憾的是，JDK 的脚本引擎和 Rhino 甚至在 windows 平台上都不支持 activex。

运行这个简单的代码时

```
public static void main(String[] args) {
    ScriptEngine runtime = null;
    try {
        runtime = new ScriptEngineManager().getEngineByName("javascript");
        Object o =  runtime.eval( new FileReader( "something.js" ) );
    } catch (Exception ex) {
        System.out.println(ex.getMessage());
    }
} 
```

我收到一个错误，例如

```
sun.org.mozilla.javascript.internal.EcmaError: ReferenceError: "ActiveXObject" 
```

我理解为“不支持activex”（如果我错了，请纠正我）

是否有任何我可以在 java 中使用的兼容 activex 的 javascript 解释器？

我正在评估的一个选项是使用 Jacob 控制 Java 中的 IE。使那个 IE 不可见并执行一些利用 activeX 的 JS 脚本来显示结果。然后....以某种方式从页面正文中获取数据。

如果有人已经这样做了，请告诉我它是否有效:) 我对这个选项的未来性感到困惑

我的环境是 windows7、IE8、java5、eclipse

谢谢

# c# - 将键/值对列表转换为数据表

> ID：13991674
> 
> 赞同：4
> 
> 时间：2012-12-21T14:10:18.297
> 
> 标签：c#, wpf, datagrid, .net-4.5

我正在研究解析器。它从源文本中获取值。它事先不知道它将获得多少或哪些值，即变量的名称、它们的计数等可能会有很大的不同。源代码的每个部分仅提供一些值，而不是完整列表。这些值当前存储在自定义类列表中，类似于 KeyValuePair，但从头开始编写。

对从源中检索到的内容进行采样：

```
Section 1:
    KeyA = ValA1
    KeyB = ValB1
    KeyD = ValD1
Section 2:
    KeyC = ValC2
Section 3:
    KeyB = ValB3
    KeyD = ValD3 
```

等等

现在，我想以 DataGrid 的形式向用户显示此信息：

```
| KeyA  | KeyB  | KeyC  | KeyD  |
+-------+-------+-------+-------+
| ValA1 | ValB1 |       | ValD1 |
|       |       | ValC2 |       |
|       | ValB3 |       | ValD3 | 
```

目前，我正在遍历每个部分中找到的所有值，检查列是否存在 - 如果不存在 - 创建新列。如果列存在 - 将值添加到相应的行/列。然后将生成的 DataTable 附加到 DataGrid 为：

```
dg.ItemSource=dt.AsDataView(); 
```

这完全按预期工作，但是太慢了。

对于如何加快速度，我将不胜感激。初始存储，或转换为 DataTable，或其他绑定数据的方式，以实现对用户的相同呈现。

C#、WPF、.NET 框架 4.5

**更新：**所有加载和处理都是预先完成的。就绪数据存储为已处理部分的树。作为属性之一的每个部分都包含一个键/值对列表。每个部分都有类来用它的值填充给定的 DataTable。

即后端数据如下：

```
File1
  + Section 1 on level 1
  |   + Section 1
  |   + Section 2
  + Section 2 on level 1
  + Section 3 on level 1
  |   + Section 1
  |   + Section 2
  |   + Section 3
  |   + Section 4
  + Section 4
File2 ... 
```

每个部分都有一个方法：

```
public void CollectValues(DataTable target) {...} 
```

它由带有一些 DataTable 的更高级别元素调用（最初 - 为空并随着它的推移而被填充）。

每个部分都包含内部变量：

```
private List<CustomValue> Values; 
```

其中包含 CustomValue 类中所有已找到和处理的值。CustomValue ~= KeyValuePair，但添加了处理例程。

所以发生的事情是从请求的级别（可能是顶级，可能是任何其他级别）调用 CollectValues，并且未准备好空的 DataTable。CollectValues 迭代（foreach）当前级别列表中的所有可用值，并将它们一次添加到目标 DataTable 1，然后检查 DataColumn 是否存在所需的名称（target[Value.Key]！=null） - 并创建列如果需要，在尝试添加相应的值之前。在元代码中：

```
public void CollectValues(DataTable target)
{
    DataRow dr = target.Rows.Create();
    foreach(var pair in Values)
    {
        if(target[pair.Key]==null) target.Columns.Add(...);
        dr[pair.Key] = pair.Value;
    }
    foreach(var child in Children)
        child.CollectValues(target);
} 
```

为什么这个特定的部分 - 值只是类似例程的一部分。其他例程在相同的数据集上进行类似的爬网，检索其他内容（主要使用列表，没有 DataTables）——所有这些都可以立即工作。虽然收集 DataTable 可能需要几秒钟才能让 1 个源得到填充的结果 DataGrid。

值的平均数量很少超过 1000（例如，10 列乘 100 行）。DataTable 只有在完全填充后才附加到 DataGrid。

仅关于大小的信息：来源 - 通常是 2 到 10 个文件。每个源文本大小的范围可以是 100Kb - 100 MB。通常的文件大小约为 1-2 MB。内存中后端数据的大小通常在 100 MB 以下。

并再次强调。只有 DataTable 让我担心。亮点、切片、源检索、过滤等 - 一切都在我的预期之内。因此，我首先在寻找一种方法来优化从键/值对列表到 DataTable 的转换，或者寻找一种方法来以不同的方式存储这些值（在处理之后）以加快处理速度。

希望这能提供足够的信息。当前未列出源以减小大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:26:14.240

我会在这里寻找除 DataTable 之外的数据结构。在我看来，您需要的是一个`Dictionary<string, Dictionary<int, CustomValue>>`. 是您的`string`列名，`int`是数据行的 ID，`CustomValue`是数据本身。

```
public void CollectValues(Dictionary<string, Dictionary<int, CustomValue>> target)
{
    foreach(var pair in Values)
    {
        if(target[pair.Key]==null) target.Add(new Dictionary<int, CustomValue>());
        target[pair.Key].Add(pair.ID, pair.Value);
    }
    foreach(var child in Children)
        child.CollectValues(target);
} 
```

如果您还没有一个适当的`pair.ID`位置，您可以只使用一个计数器变量（`static`或者通过每次调用传递），以便每个对象具有不同的 ID。

* * *

按行存储值可能更有意义，每组数据具有列，而不是相反。那将是 a `IEnumerable<Dictionary<string, CustomValue>>`，每个`Dictionary`代表一行。您将使用 . 拉出所有列`target.Select(x => x.Key).Distinct()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:10:38.267

数据表很慢。它做了很多事情。

如果你们都是字符串，那么我会创建一个集合

```
List<String> ColNames;
List<String> ColValues;

List<ColValues> RowsColValues; 
```

然后，您需要使用 ColValues[i] 语法手动将列绑定到 DataGrid。

为了提高速度，请为此使用 ListView GridView。
与 Gridview 相比，DataGrid 速度慢且体积大。
但 GridView 不编辑。

不编造这个。
我正是这样做的，但情况不同。
用户选择他们想要查看的列。

[动态柱](https://stackoverflow.com/questions/6959600/wpf-display-grid-of-results-with-dynamic-columns-rows/6961874#6961874)

# java - JBoss AS7 仅适用于 Linux 上的 http://127.0.0.1:8080

> ID：13991702
> 
> 赞同：1
> 
> 时间：2012-12-21T14:12:57.397
> 
> 标签：java, linux, jboss

`JBoss AS7`仅适用`127.0.0.1:8080`于 Linux。

我下载`jboss-as-7.1.1`它`untar`。

然后我运行`bin/standalone.sh`它并启动，如果我尝试从中访问`127.0.0.1:8080`它效果很好。

但如果我尝试使用我的计算机 IP 访问它，`10.52.206.226:8080/` **它就不起作用**。

**我的问题是：**

1.  如何让其他计算机访问它？
2.  我如何告诉 Jboss 接受来自所有地址的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:56:04.117

您必须将服务器绑定到您的公共地址。使用命令启动服务器

```
bin/standalone.sh -b 10.52.206.226 
```

并且绑定到所有地址也应该有效

```
bin/standalone.sh -b 0.0.0.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T06:09:48.353

您可以将主机文件更改为

```
$ cd /etc
$ sudo gedit hosts 
```

只需添加您的 IP 地址，如下所示：

```
127.0.0.1   localhost
127.0.1.1   someone-pc
192.168.18.75   localhost 
```

使用您电脑的 ip(yourIP) 地址而不是 192.168.18.75

愿它运作良好。现在，如果您尝试访问
[ http://yourIP:8080]
就可以了。

# performance - Cuda 推动全局内存写入非常慢

> ID：13991707
> 
> 赞同：0
> 
> 时间：2012-12-21T14:13:12.327
> 
> 标签：performance, memory, cuda, thrust

我目前正在编写一个代码，它使用 Nvidia 推力库计算 GPU 上的积分直方图。

因此，我分配了一个连续的设备内存块，我一直使用自定义仿函数对其进行更新。

问题是，写入设备内存的速度非常慢，但读取实际上还可以。

基本设置如下：

```
struct HistogramCreation
{
    HistogramCreation(
    ...
    // pointer to memory
    ...
    ){}

    /// The actual summation operator
    __device__ void operator()(int index){
       .. do the calculations ..
       for(int j=0;j<30;j++){

       (1)  *_memoryPointer =  values (also using reads to such locations) ;

       }
  }
}

void foo(){

  cudaMalloc(_pointer,size);

  HistogramCreation initialCreation( ... _pointer ...);
  thrust::for_each(
    thrust::make_counting_iterator(0),
    thrust::make_counting_iterator(_imageSize),
    initialCreation);
} 
```

如果我将（1）中的文字更改为以下内容>

```
unsigned int val = values; 
```

性能要好得多。这是我唯一的全局内存写入。

使用内存写入我得到大约 2 秒的高清素材。使用局部变量大约需要 50 毫秒，因此大约减少了 40 倍。

为什么这么慢？我该如何改进它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:54:45.143

正如@OlegTitov 所说，应尽可能避免频繁加载/存储全局内存。当出现不可避免的情况时，合并的内存访问可以帮助执行过程不会变得太慢；然而在大多数情况下，直方图计算很难实现合并访问。

虽然以上大部分内容基本上只是重申@OlegTitov 的答案，但我只想分享一下我所做的一项关于使用 NVIDIA CUDA 求和的调查。实际上结果非常有趣，我希望它对其他 xcuda 开发人员有帮助。

该实验基本上是运行一个速度测试，以寻找各种内存访问模式的总和：使用全局内存（1 个线程）、L2 缓存（原子操作 - 128 个线程）和 L1 缓存（共享内存 - 128 个线程）

本实验使用：Kepler GTX 680, 1546 cores @ 1.06GHz GDDR5 256-bit @ 3GHz

以下是内核：

```
__global__
void glob(float *h) {
    float* hist = h;
    uint sd = SEEDRND;
    uint random;
    for (int i = 0; i < NUMLOOP; i++) {
        if (i%NTHREADS==0) random = rnd(sd);
        int rind = random % NBIN;
        float randval = (float)(random % 10)*1.0f ;
        hist[rind] += randval;
    }
}

__global__
void atom(float *h) {
    float* hist = h;
    uint sd = SEEDRND;
    for (int i = threadIdx.x; i < NUMLOOP; i+=NTHREADS) {
        uint random = rnd(sd);
        int rind = random % NBIN;
    float randval = (float)(random % 10)*1.0f ;
        atomicAdd(&hist[rind], randval);
    }
}

__global__
void shm(float *h) {
    int lid = threadIdx.x;
    uint sd = SEEDRND;

    __shared__ float shm[NTHREADS][NBIN];
    for (int i = 0; i < NBIN; i++) shm[lid][i] = h[i];

    for (int i = lid; i < NUMLOOP; i+=NTHREADS) {
        uint random = rnd(sd);
        int rind = random % NBIN;
        float randval = (float)(random % 10)*1.0f ;
        shm[lid][rind] += randval;
    }

    /* reduction here */
    for (int i = 0; i < NBIN; i++) {
        __syncthreads();
        if (threadIdx.x < 64) {
            shm[threadIdx.x][i] += shm[threadIdx.x+64][i];
        }
        __syncthreads();
        if (threadIdx.x < 32) {
            shm[threadIdx.x][i] += shm[threadIdx.x+32][i];
        }
        __syncthreads();
        if (threadIdx.x < 16) {
            shm[threadIdx.x][i] += shm[threadIdx.x+16][i];
        }
        __syncthreads();
        if (threadIdx.x < 8) {
            shm[threadIdx.x][i] += shm[threadIdx.x+8][i];
        }
        __syncthreads();
        if (threadIdx.x < 4) {
            shm[threadIdx.x][i] += shm[threadIdx.x+4][i];
        }
        __syncthreads();
        if (threadIdx.x < 2) {
            shm[threadIdx.x][i] += shm[threadIdx.x+2][i];
        }
        __syncthreads();
        if (threadIdx.x == 0) {
            shm[0][i] += shm[1][i];
        }
    }

    for (int i = 0; i < NBIN; i++) h[i] = shm[0][i];
} 
```

**输出**

```
atom:  102656.00 shm:  102656.00 glob:  102656.00
atom:  122240.00 shm:  122240.00 glob:  122240.00
... blah blah blah ...

  One Thread: 126.3919 msec
      Atomic:   7.5459 msec
      Sh_mem:   2.2207 msec 
```

这些内核之间的比例为 57:17:1。很多事情都可以在这里分析，这并不意味着使用 L1 或 L2 内存空间总是会给你整个程序的 10 倍以上的加速。

这是主要功能和其他功能：

```
#include <iostream>
#include <cstdlib>
#include <cstdio>
using namespace std;

#define NUMLOOP 1000000
#define NBIN 36
#define SEEDRND 1

#define NTHREADS 128
#define NBLOCKS 1

__device__ uint rnd(uint & seed) {
#if LONG_MAX > (16807*2147483647)
    int const a    = 16807;
    int const m    = 2147483647;
    seed = (long(seed * a))%m;
    return seed;
#else
    double const a    = 16807;
    double const m    = 2147483647;

    double temp = seed * a;
    seed = (int) (temp - m * floor(temp/m));
    return seed;
#endif
}

... the above kernels ...

int main()
{
    float *h_hist, *h_hist2, *h_hist3, *d_hist, *d_hist2,
    *d_hist3;
    h_hist = (float*)malloc(NBIN * sizeof(float));
    h_hist2 = (float*)malloc(NBIN * sizeof(float));
    h_hist3 = (float*)malloc(NBIN * sizeof(float));
    cudaMalloc((void**)&d_hist, NBIN * sizeof(float));
    cudaMalloc((void**)&d_hist2, NBIN * sizeof(float));
    cudaMalloc((void**)&d_hist3, NBIN * sizeof(float));

    for (int i = 0; i < NBIN; i++) h_hist[i] = 0.0f;
    cudaMemcpy(d_hist, h_hist, NBIN * sizeof(float),
    cudaMemcpyHostToDevice);
    cudaMemcpy(d_hist2, h_hist, NBIN * sizeof(float),
    cudaMemcpyHostToDevice);
    cudaMemcpy(d_hist3, h_hist, NBIN * sizeof(float),
    cudaMemcpyHostToDevice);

    cudaEvent_t start, end;
    float elapsed = 0, elapsed2 = 0, elapsed3;
    cudaEventCreate(&start);
    cudaEventCreate(&end);

    cudaEventRecord(start, 0);

    atom<<<NBLOCKS, NTHREADS>>>(d_hist);
    cudaThreadSynchronize();

    cudaEventRecord(end, 0);
    cudaEventSynchronize(start);
    cudaEventSynchronize(end);
    cudaEventElapsedTime(&elapsed, start, end);

    cudaEventRecord(start, 0);

    shm<<<NBLOCKS, NTHREADS>>>(d_hist2);
    cudaThreadSynchronize();

    cudaEventRecord(end, 0);
    cudaEventSynchronize(start);
    cudaEventSynchronize(end);
    cudaEventElapsedTime(&elapsed2, start, end);

    cudaEventRecord(start, 0);

    glob<<<1, 1>>>(d_hist3);
    cudaThreadSynchronize();

    cudaEventRecord(end, 0);
    cudaEventSynchronize(start);
    cudaEventSynchronize(end);
    cudaEventElapsedTime(&elapsed3, start, end);

    cudaMemcpy(h_hist, d_hist, NBIN * sizeof(float),
    cudaMemcpyDeviceToHost);
    cudaMemcpy(h_hist2, d_hist2, NBIN * sizeof(float),
    cudaMemcpyDeviceToHost);
    cudaMemcpy(h_hist3, d_hist3, NBIN * sizeof(float),
    cudaMemcpyDeviceToHost);

    /* print output */
    for (int i = 0; i < NBIN; i++) {
        printf("atom: %10.2f shm: %10.2f glob:
    %10.2f¥n",h_hist[i],h_hist2[i],h_hist3[i]);
    }

    printf("%12s: %8.4f msec¥n", "One Thread", elapsed3);
    printf("%12s: %8.4f msec¥n", "Atomic", elapsed);
    printf("%12s: %8.4f msec¥n", "Sh_mem", elapsed2);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T22:35:45.227

请注意，在您进行修改后，NVCC 可能会优化您的大量代码 - 它检测到没有写入全局内存，只是删除“不需要的”代码。因此，这种加速可能并非来自全球作家。

我建议在您的实际代码（具有全局写入的代码）上使用探查器，以查看是否存在未对齐访问或其他性能问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:21:13.497

在编写 GPU 代码时，您应该避免读写全局内存。GPU 上的全局内存非常慢。这就是硬件功能。您唯一能做的就是让相邻的踏板在全局内存中的相邻地址中读/写。这将导致合并并加速该过程。但一般来说，读取您的数据一次，处理它并写出一次。

# java - 为什么 Guava 不提供转换映射键的方法

> ID：13991710
> 
> 赞同：12
> 
> 时间：2012-12-21T14:13:15.633
> 
> 标签：java, guava

这个问题已经在这里发布了： [How to convert Map<String, String> to Map<Long, String> using guava](https://stackoverflow.com/questions/5733142/how-to-convert-mapstring-string-to-maplong-string-using-guava)

我认为CollinD的答案是合适的：

> Guava 的所有转换和过滤方法都会产生惰性结果……函数/谓词仅在需要使用对象时应用。他们不创建副本。但是，正因为如此，转换很容易破坏`Set`.
> 
> 例如，假设您有一个`Map<String, String>`包含“1”和“01”作为键的。它们都是不同`String`的 s，因此 `Map`可以合法地包含两者作为键。但是，如果您使用 转换它们 `Long.valueOf(String)`，它们都会映射到 value `1`。它们不再是不同的键。如果您创建地图副本并添加条目，这不会破坏任何内容，因为任何重复的键都会覆盖该键的先前条目。但是，延迟转换`Map`的 将无法强制执行唯一键，因此会破坏 a 的合同`Map`。

这是真的，但实际上我不明白为什么没有这样做，因为：

*   当键转换发生时，如果 2 个键被“合并”，则可能会引发运行时异常，或者我们可以传递一个标志以指示 Guava 为新计算的键获取多个可能值中的任何值（故障快速/故障安全可能性)

*   我们可以有一个 Maps.transformKeys 来生成一个 Multimap

做这些事情有我看不到的缺点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T16:40:48.797

正如@CollinD 建议的那样，没有办法以懒惰的方式做到这一点。要实现`get`，您必须使用转换功能转换所有键（以确保发现任何重复项）。

所以申请`Function<K,NewK>`就`Map<K,V>`不行了。

您可以安全地应用于`Function<NewK,K>`地图：

```
V value = innerMap.get( fn.apply(newK) ); 
```

我没有看到 Guava 的简写——它可能还不够有用。您可以通过以下方式获得类似的结果：

```
Function<NewK,V> newFn = Functions.compose(Functions.forMap(map), fn); 
```

# web-services - 不同域的少数网站之间的共同会话

> ID：13991714
> 
> 赞同：0
> 
> 时间：2012-12-21T14:13:37.820
> 
> 标签：web-services, cookies, authorization

我想做一些网络服务，所有这些都需要登录/通过授权。我想让它们保持同步（一个登录名，一个所有服务的密码），但我也想在它们之间共享会话。

如果用户登录到服务 A，并打开服务 B，它会自动登录到服务 B 上的同一帐户，就像在服务 A 中一样。

这通常是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:20:27.240

我会考虑一个数据库来支持会话。

您可以有一个包含关键会话信息的数据库记录。如果数据库支持 BLOB 字段，您甚至可以保存更复杂的会话数据。

该记录将具有 Web 服务请求将呈现的“cookie 事物”，服务实现代码将采用该“cookie 事物”并查看数据库表以查看最近是否正确发生了登录事件。

（我说“cookie 的东西”，因为如果它是一个网络服务，它实际上可能不是一个浏览器进来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:22:05.277

这称为分布式会话，每个网络服务器的实现都不同。

对于 Tomcat：http: [//tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html)

对于 WebSphere：[http ://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.iseries.doc%2Finfo%2Fiseriesnd%2Fae%2Fcprs_persistent_sessions.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.iseries.doc%2Finfo%2Fiseriesnd%2Fae%2Fcprs_persistent_sessions.html)

您还可以将持久变量存储在数据库中，这在您的情况下可能更容易。

# sql - 是否有用于刷新 SQL 2008 r2 中的存储过程的热键？

> ID：13991719
> 
> 赞同：2
> 
> 时间：2012-12-21T14:13:57.717
> 
> 标签：sql, sql-server-2008

我们有大量的存储过程。每次我添加一个新的，我必须一直走到存储过程的顶部，然后右键单击并点击“刷新”。是否有刷新表和存储过程列表的热键？我到处都用谷歌搜索过。MS 是否认为开发人员只会有几个？我知道这听起来微不足道，但是当您创建许多存储过程并且必须不断滚动到顶部并点击刷新才能将其拉起以执行它以对其进行测试时，这是一件很痛苦的事情。我正在使用 SQL 2008 R2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:43:35.037

没有刷新列表的键盘快捷键。但是，左箭头将您带到父节点。因此，如果您突出显示了一个程序，按向左箭头，然后按 F5 将刷新程序。但是你仍然必须再次找到新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:40:28.093

没有从查询窗口刷新过程列表的快捷方式。

下面是 SQL Server Management Studio 的快捷方式列表：

[http://technet.microsoft.com/en-us/library/ms174205.aspx](http://technet.microsoft.com/en-us/library/ms174205.aspx)

但是，如果您不想右键单击刷新，而只使用键盘，您可以执行以下操作：

```
1\. Create your procedure

2\. ALT-F8 (This will navigate your selection to your object explorer window, and highlight your connected server)

3\. Start typing the first letter of the database you are working in. This will highlight that database. Use the right arrow to expand, if not already expanded.

4\. Then type P for Programmability, and that will highlight that list. Again, use the right arrow to expand if not already expanded.

5\. Then type S for Stored Procedures. 

6\. Hit F5, and it will refresh your list. 
```

**另一种方法是您可以简单地按 ALT F8，然后使用箭头键导航到您的节点，然后按 F5 刷新。**

当然，这是很长的路要走。使用鼠标可能更容易。但是，如果您在没有鼠标的服务器上工作，则键盘导航是必不可少的。

# solr - Solr：具有多值字段的单个文档或多个展平文档

> ID：13991723
> 
> 赞同：1
> 
> 时间：2012-12-21T14:14:26.803
> 
> 标签：solr, solrj

我正在使用 DIH 和 TikaProcessor 从数据库和 SolrJ API 中提取二进制数据进行查询。

我们有如下数据结构，其中一个订单可以有多个附件。附件可以包含 100-300 mb 范围内的巨大二进制数据。

**订单表**

订单号 | 细节

**附件表**

姓名 | 数据 | 订单号

**使用这种结构，创建 solr 文档的最佳方式是什么？**

选项 1：每个订单一个 solr 文档，附件有多值字段

选项 2：每个附件一个文档 - 扁平结构。如果我们需要订单的所有文档，请使用 solr 分组/折叠。

我们还需要突出能力。

每个选项的性能影响是什么？我更倾向于选项 2。有什么想法吗？

# asp.net - ASP.Net MVC 3 中的数据级授权

> ID：13991725
> 
> 赞同：7
> 
> 时间：2012-12-21T14:14:57.137
> 
> 标签：asp.net, sql, asp.net-mvc-3

我必须开发一个用户管理应用程序。我需要在数据级别 Ex 中授权用户：

以银行为例：

1.  客户 - 例如：Bank1、Bank2、Bank3、Bank4。
2.  分支状态 - 例如：Stat1、State2、State3、State4
3.  分支机构区 - 例如：District1、District2、District3、District4
4.  设施 - 支票、直接借记、常规订单

当用户登录时，他将只能看到一些客户、一些州分支机构、一些地区分支机构，这取决于在用户管理应用程序中分配给他的分支机构、设施等。这些变化针对不同的用户。

请任何人都可以帮助我获得这种级别的授权任何可用的标准工具，或者如果没有，那么好的数据库模型是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:44:46.893

You need to implement your own `Authorization` mechanism, you need to create a control table where you store the user access level, (assuming a lot of things) something like:

```
UserAuthorization (UserId, EntityId, EntityType) 
```

**UserId**: Reference to User.

**EntityId**: Id of the element you want to grant access to.

**EntityType**: Type of element you want to grant access (Client, State, District, Facility)

```
+--------+----------+------------+
| UserId | EntityId | EntityType |
+--------+----------+------------+
|      1 |        2 | CLIENT     |
|      1 |        2 | STATE      |
|      1 |        3 | DISTRICT   |
+--------+----------+------------+ 
```

You can use and should use an integer to represent EntityType, i wrote it like text just for the example.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T22:22:56.557

您可以查看 ClaimsPrincipal 并使用基于声明的授权。在 .Net 4.5 中集成了 WIF。可以在这里查看摘要[http://msdn.microsoft.com/en-us/library/ms729851.aspx](http://msdn.microsoft.com/en-us/library/ms729851.aspx)

您可能必须围绕系统中的每个实体创建访问控制列表。最终，您需要一种简单的方法来唯一地定义我认为使用 GUID 的实体。然后要求该 GUID 的声明。您显然可能会变得更复杂，并且需要读、写类型权限。如果您直接授予每个实体的访问权限，您最终可能会收到很多索赔。

最终，您想定义单个实体的访问权限吗？某种分组可能会更好？如果您可以管理银行，则可以管理其所有州，如果您管理其地区，则可以管理所有地区分支机构等。

我会尝试将用户分组，然后为这些组分配访问权限。当您在 NTFS 中管理文件时，您很少会发现自己授予对单个文件的访问权限。

如果您授予某人对实体组的权限，请先进行某种组检查，如果他们没有该声明，则进行实体检查。

可能需要用[http://msdn.microsoft.com/en-us/library/system.security.claims.claimsauthorizationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsauthorizationmanager.aspx)做一些自定义的东西。传入您要编辑银行等的声明，然后检查您是否有权访问该特定银行。我认为您必须在 CheckAccess 方法中为 ACL 执行逻辑。

也看看[http://thinktecture.github.com/Thinktecture.IdentityModel.45/](http://thinktecture.github.com/Thinktecture.IdentityModel.45/)

我还发现了以下帖子[http://leastprivilege.com/2012/06/24/approaches-to-server-side-authorization/](http://leastprivilege.com/2012/06/24/approaches-to-server-side-authorization/) - 最后阅读 Luceros 的建议。基本如上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T00:45:48.540

感谢您的回复。请查找示例数据。它可以达到三个 / n 个级别。

User1d 用户名

```
USR1      John    
USR2      William
USR3      Joseph
USR4      Mathew
USR5      George 
```

ClientId 客户名称

```
CL1         Barclays
CL2         LLoyds TSB
CL3         Natwest
CL4         Nationwide
CL5         HSBC 
```

CountryId 国家名称

```
CON1        England
CON2        Wales
CON3        Scotland
CON4        Northern Ireland 
```

CountryId CityId CityName

```
CON1        CTY1      Liverpool 
CON1        CTY2      Waterloo
CON1        CTY3      Piccadilly
CON2        CTY4      Cardiff   
CON2        CTY5      Ammanford
CON2        CTY6      Abergele
CON3        CTY7      Glasgow
CON3        CTY8      Edinburgh
CON3        CTY9      Aberdeen
CON4        CTY10     Belfast
CON4        CTY11     Hannahstown
CON4        CTY12     Springfield 
```

CountryId CityId BranchId BranchName

```
CON1        CTY1      BRC1        Branch1
CON1        CTY1      BRC2        Branch2
CON1        CTY1      BRC3        Branch3
CON2        CTY4      BRC4        Branch4
CON2        CTY4      BRC5        Branch5
CON2        CTY4      BRC6        Branch6 
```

UserId ClientId CountryId CityId BranchId

```
 USR1      CL1         CON1        CTY1      BRC1        
 USR1      CL1         CON1        CTY1      BRC2        
 USR2      CL2         CON1        CTY1      BRC1
 USR2      CL2         CON1        CTY1      BRC2 
```

# .net - 将 LINQ 查询返回到 DataTable .NET 3.5？

> ID：13991729
> 
> 赞同：0
> 
> 时间：2012-12-21T14:15:11.720
> 
> 标签：.net, vb.net, linq, .net-3.5, datatable

我想`DataTables`使用 LINQ 查询两个（通过解析 Excel 文件填充）并将它们加入匹配字段“UPC”，如下所示：

```
Dim query = From c In dt.AsEnumerable() _
Join r In dtUnits.AsEnumerable() _
On c.Field(Of String)("UPC") Equals r.Field(Of String)("UPC") _
Select New With {.UPC = r.Field(Of String)("UPC")} 
```

此外，我想将此 LINQ 查询结果复制到 DataTable。我找到了一个[方法](http://msdn.microsoft.com/en-us/library/bb386921.aspx) `CopyToDataTable()`，但它是在 .NET 4.5 中的，而我们的服务器只支持 .NET 3.5。

如何在 VB .NET 3.5 中模拟此功能？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:24:25.873

[`CopyToDataTable`](http://msdn.microsoft.com/en-us/library/bb386921%28v=vs.90%29.aspx)自 .NET 35 以来就已经存在。但问题是您想`DataTable`从匿名类型“从头开始”创建。那是行不通的。

`CopyToDataTable`只是一个扩展`IEnumerable<DataRow>`。因此，您要么必须从已加入的选项中选择**一个** ：`DataRow``DataTables`

```
Dim query = From c In dt.AsEnumerable() _
            Join r In dtUnits.AsEnumerable() _
            On c.Field(Of String)("UPC") Equals r.Field(Of String)("UPC") _
            Select c
Dim table = query.CopyToDataTable() 
```

或使用[它`ObjectShredder`](http://msdn.microsoft.com/en-us/library/bb669096.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)使用反射，因此不是最有效的方法（[C# 实现](https://stackoverflow.com/a/9259348/284240)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:26:04.797

看看这篇文章：

[http://codecorner.galanter.net/2009/12/17/grouping-ado-net-datatable-using-linq/](http://codecorner.galanter.net/2009/12/17/grouping-ado-net-datatable-using-linq/)

您可以使用`.toDataTable`方法，但前提是您的 LINQ 查询返回实际的 DataTable 行。对于自定义类型，您可以使用附加到文章代码来执行相同的操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T09:23:42.007

请阅读这篇文章 LINQ TO DATATABLE in WCF ，连接到 Adventure 数据库。

数据集不实现 IEnumerable/IQueryable 接口。

所以请阅读这篇文章。

[http://www.wnewsone.com/tutorials/wcf/ShowArticle.aspx?articleid=20143](http://www.wnewsone.com/tutorials/wcf/ShowArticle.aspx?articleid=20143)

# php - 所有子域上的 Cookie 组合 Javascript/PHP

> ID：13991737
> 
> 赞同：0
> 
> 时间：2012-12-21T14:16:01.937
> 
> 标签：php, javascript, cookies

我正在我的网站上实现一个“cookie 通知栏”。它是一个灰色透明条，固定在屏幕底部，带有使用 cookie 的通知、包含更多信息的页面的链接以及最右侧的“关闭”按钮。该栏使用带有 javascript on-click 事件的 display:none 隐藏。我的下一个问题：是否可以在单击关闭栏的同一函数中设置 cookie？因为它似乎不起作用，我的代码：

//就在我的身体标签之前，我有：

```
<script language="javascript"> 
function closeCookieBar() {
document.getElementById('cookiepolicy').style.display = 'none';
SetCookie("cookiepolicy", 1, 8)
}

</script> 
```

// 在页面底部我有：

```
<div id="cookiepolicy" <?php if(isset($_cookie['cookiepolicy'])){ echo "style=\"display:none\""; } ?> >
<div id="cookiepolicy-wrapper">
<div id="cookiepolicy-txt">
<span id="cookiepolicy-notice">Deze website maakt gebruik van cookies. Waarom? Klik <a href="http://....nl/cookies.php" target="_blank">hier</a> voor meer informatie.</span>
<span id="cookiepolicy-accept-cookies" onclick="closeCookieBar();">Sluit</span>
</div>
</div>
</div> 
```

我正在预见的下一个问题：我有大约 415 个子域，我也希望保存这个 cookie，如果它设置在主域上，它是否适用于我的子域？

提前致谢！

桑德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:51:05.443

你可以在 js 中创建你的 cookie 并像这样在 PHP 中使用它

```
 function closeCookieBar() {
       document.getElementById('cookiepolicy').style.display = 'none';
          var date = new Date();
          date.setTime(date.getTime()+(days*24*60*60*1000));
          var expires = "; expires="+date.toGMTString();
          document.cookie = name+"="+value+expires+"; path=/; domain=.example.com";
     }

  <div id="cookiepolicy" <?php if(isset($_cookie['cookiepolicy'])){ echo "style=\"display:none\""; } ?> > 
```

代替 name 放置您的 cookie 的名称，并在 domain 中放置您的域。希望能帮助到你...

有关更多信息，您可以访问[使用 JS 设置 cookie，阅读 PHP 问题](https://stackoverflow.com/questions/5045053/set-cookie-wih-js-read-with-php-problem?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:23:18.803

我也许可以帮助解决其中的一部分。由于您使用的是 PHP，因此此 PHP 脚本可以设置一个可用于所有子域和子目录的 cookie。如果您使用的是 xxx.co.uk 之类的域，您可能需要在第 30-40 行进行一些调整。

```
<?php // RAY_cookie_splash_page.php
error_reporting(E_ALL);

// SHOW A SPLASH PAGE ON FIRST ENTRY, THEN COOKIE THE BROWSER TO SKIP SPLASH PAGE
// TO SEE COOKIES IN FIREFOX, FOLLOW TOOLS => OPTIONS => PRIVACY => SHOW COOKIES
// MAN PAGE: http://php.net/manual/en/function.setcookie.php

// DEFINITIONS AS NEEDED HERE
define('COOKIE_LIFE', 60*60*24); // A 24-HOUR DAY IN SECONDS ( = 86,400 )

// CONSTRUCT AND SET THE COOKIE
// USE THIS TO MAKE COOKIE EXPIRE AT END OF BROWSER LIFE
$cookie_expires = 0;

// USE THIS TO MAKE A PERSISTENT COOKIE - DEFINE COOKIE_LIFE IN SECONDS - date('Z') IS UTC OFFSET IN SECONDS
$cookie_expires = time() + date('Z') + COOKIE_LIFE;

// CHOOSE THE COOKIE NAME AND VALUE
$cookie_name  = 'Fred';
$cookie_value = 'Wilma';

// MAKE THE COOKIE AVAILABLE TO ALL DIRECTORY PATHS IN THE WWW ROOT
$cookie_path    = '/';

// MAKE THE COOKIE AVAILABLE TO ALL SUBDOMAINS - DOMAIN NAME STARTS WITH DOT AND OMITS WWW (OR OTHER SUBDOMAINS).
$x = explode('.', strtolower($_SERVER["HTTP_HOST"]));
$y = count($x);
if ($y == 1) // MAYBE 'localhost'?
{
   $cookie_domain = $x[0];
} else // SOMETHING LIKE 'www2.atf70.whitehouse.gov'?
{
// USE THE LAST TWO POSITIONS TO MAKE THE HOST DOMAIN
   $cookie_domain = '.' . $x[$y-2] . '.' . $x[$y-1];
}

// MAKE THE COOKIE AVAILABLE TO HTTP, NOT JUST HTTPS
$cookie_secure = FALSE;

// HIDE COOKIE FROM JAVASCRIPT TO IMPROVE SECURITY (PHP 5.2+)
$cookie_http  = TRUE;

// SET THE COOKIE (BUT DO NOT BOTHER OUTPUTTING THE DEBUGGING MESSAGES)
if (setcookie($cookie_name, $cookie_value, $cookie_expires, $cookie_path, $cookie_domain, $cookie_secure, $cookie_http))
{
// echo "<br/>SUCCESS!  THE COOKIE HAS BEEN SET AND WILL BE AVAILABLE TO THE NEXT PAGE LOAD \n";
} else {
// echo "<br/>FAILURE!  THE COOKIE WAS NOT SET AS EXPECTED \n";
}

// IF THE COOKIE IS NOT AVAILABLE IN THIS SCRIPT, SHOW THE SPLASH PAGE
if (empty($_COOKIE["Fred"]))
{
   echo "<h1>SPLASH PAGE</h1>\n";
   echo "<p><a href=\"{$_SERVER["REQUEST_URI"]}\">CONTINUE TO SITE</a></p>\n";
   echo date('c');
   die("\nSPLASH COMPLETE");
}

// SPLASH PAGE HAS ALREADY BEEN SHOWN
echo "<h1>REGULAR START PAGE - AFTER SPLASH HAS BEEN SHOWN</h1>\n";
echo "<p><a href=\"{$_SERVER["REQUEST_URI"]}\">CONTINUE TO SITE</a></p>\n";
echo date('c');
die("\nREGULAR PAGE COMPLETE"); 
```

# iphone - iPhone应用查询

> ID：13991738
> 
> 赞同：0
> 
> 时间：2012-12-21T14:16:02.723
> 
> 标签：iphone, objective-c, ios

我正在使用 UITabBarController 构建简单的数据添加应用程序，来自 firstviewcontroller 的数据通过 customcell 存储并显示在 secondviecontroller 中，但问题是当我从标签栏中选择 secondviewcontroller 时未显示存储的数据。如何解决这个问题？

这是 FirstViewController 的编码，用于将 dataarray 传递给 secondviewcontroller。

```
 SecondViewController *svc = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
        [self presentModalViewController:svc animated:YES];

    finalArray = [[NSMutableArray alloc]init];

    [finalArray addObject:DataDic];

    svc.dataArray  = [[NSMutableArray alloc]initWithArray:finalArray];
} 
```

和Secondcontroll.m 文件编码。

```
 #import "SecondViewController.h"
    #import "SaveDataCell.h"

 @implementation SecondViewController
@synthesize Dict1,dataArray,btninfo,btnBack;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Second", @"Second");
        self.tabBarItem.image = [UIImage imageNamed:@"second"];
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    Dict1 = [[NSMutableDictionary alloc]init];

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
//    dataArray = [[NSMutableArray alloc]init];

    NSLog(@"%@",dataArray);
}

- (void)viewDidAppear:(BOOL)animated
{

 [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}
- (NSInteger)numbe

rOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}
- (NSInteger)tableVi

ew:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return[dataArray count];
}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 150;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CatIdentifier";

    SaveDataCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = ( SaveDataCell*)[[[NSBundle mainBundle] loadNibNamed:@"SaveDataCell" owner:self options:nil] objectAtIndex:0];
    }

    cell.lblName.text = [[dataArray objectAtIndex:indexPath.row]valueForKey:@"Name"];
    cell.lblEmail.text = [[dataArray objectAtIndex:indexPath.row]valueForKey:@"Email"];
    cell.lblNo.text = [[dataArray objectAtIndex:indexPath.row]valueForKey:@"No"];
    cell.lblCity.text = [[dataArray objectAtIndex:indexPath.row]valueForKey:@"City"];
    cell.saveimg.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@",[[dataArray valueForKey:@"Image"]objectAtIndex:indexPath.row]]];
    return cell;
}
-(IBAction)ClicktoBack:(id)sender
{
    [self dismissModalViewControllerAnimated:YES];
}
-(IBAction)ClicktoInfo:(id)sender
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:26:59.640

您可以通过多种方法在视图控制器之间传递数据。

喜欢

// 对于较低版本：

```
 SecondViewController *tmpNamesListVC = [self.tabBarController.viewControllers objectAtIndex:1];
     [tmpNamesListVC yourArray]= self.arraytoPass; 
```

// 对于更高版本

```
SecondViewController *tmpNamesListVC = [self.tabBarController.viewControllers objectAtIndex:2];
 [tmpNamesListVC yourArray]= self.arraytoPass; 
```

你也必须改变你的编码顺序

```
SecondViewController *svc = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

finalArray = [[NSMutableArray alloc]init];

[finalArray addObject:DataDic];

svc.dataArray  = [[NSMutableArray alloc]initWithArray:finalArray];

[self presentModalViewController:svc animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:21:43.950

尝试这个：

```
SecondViewController *svc = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

finalArray = [[NSMutableArray alloc]init];

[finalArray addObject:DataDic];

svc.dataArray  = [[NSMutableArray alloc]initWithArray:finalArray];

[self presentModalViewController:svc animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T12:11:59.537

在您的 SecondViewController 中创建一个属性 .. 如下所示：-

```
@property(strong,nonatomic)NSMutableArray * array; 
```

并在“.m”文件中“@synthesize”。

现在，当您从“FirstViewController”导航时……请执行以下操作：-

```
SecondViewController *svc = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

finalArray = [[NSMutableArray alloc]init];

[finalArray addObject:DataDic];

svc.array  = finalArray

[self presentModalViewController:svc animated:YES]; 
```

# umbraco - 未知的服务器标签“uComponents:RenderTemplate”

> ID：13991739
> 
> 赞同：0
> 
> 时间：2012-12-21T14:16:06.563
> 
> 标签：umbraco

未知的服务器标签“uComponents:RenderTemplate”。嗨，刚刚从 4.9.1 升级到 4.7.1，后台似乎工作正常，但是当我想查看我的网站时，我不断收到来自模板标签的“未知服务器标签 'uComponents:RenderTemplate'”错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:39:57.513

我相信这是在 uComponents.Controls 程序集中。确保您的 bin 文件夹中有 uComponents.Controls.dll。另外，我认为您需要 uComponents 5 和 4.9.1（但 uComponents 4 和 4.7.1）。见：[http ://ucomponents.codeplex.com/](http://ucomponents.codeplex.com/)

你应该得到一个新版本的 uComponents。

# wpf - 树视图最多仅使用 N 个级别

> ID：13991748
> 
> 赞同：1
> 
> 时间：2012-12-21T14:16:45.707
> 
> 标签：wpf, c#-4.0, hierarchicaldatatemplate

我有这个树结构，我想在 2 个树视图中显示。两个树视图都将使用相同的集合。

*   东部会议
    *   大西洋
        *   纽约
            *   甜瓜
        *   布鲁克林
            *   德隆
        *   波士顿
            *   回旋曲
    *   中央
        *   芝加哥
        *   印第安纳州
    *   西南
        *   迈阿密
        *   亚特兰大

现在对于第一个树形视图，我只想显示会议和分区，而对于第二个树形视图，会议、分区和城市，而不是明星球员。

现在，我已经使用下面的 xaml 为第一个树视图实现了我想要的结果：

```
<HierarchicalDataTemplate DataType="{x:Type local:Conference}"
                                  ItemsSource="{Binding Path=Division}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Margin="3"
                           Text="{Binding Path=Name}" />
            </StackPanel>
  </HierarchicalDataTemplate> 
```

现在我被困在如何忽略明星球员，只显示第二个树视图的会议、分区和城市。

希望您能够帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:08:38.373

这应该适合你：

```
<TreeView ItemsSource="{Binding Conferences}">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Divisions}">
            <TextBlock Text="{Binding Name}" />
            <HierarchicalDataTemplate.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Name}" />
                </DataTemplate>
            </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

请记住为树视图所在的窗口/用户控件设置数据上下文。

# math - 如何找到密码字母值？

> ID：13991749
> 
> 赞同：0
> 
> 时间：2012-12-21T14:16:47.460
> 
> 标签：math, wolfram-mathematica, cryptarithmetic-puzzle

十字路口 + 道路 = 危险 ==> 答案是 ==> 96233 + 62513=158746

我正在寻找一个说明，以便更容易地找到另一个示例的答案。我的一位老师说我们可以用树来找到它。但有时使用树来找到答案是不可能的。

你通常如何找到你的密码解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:58:51.453

一种简单的方法：

定义变量（只是为了方便）：

```
vars = Symbol[#] & /@ ("abc" <> ToString[#] & /@ Range[26]) ; 
```

将变量与字母表的每个字母关联：

```
alphabet = Transpose[{CharacterRange["a", "z"], vars}]; 
```

编写一个辅助函数将字符串转换为表达式：

```
formDigits[astring_] := FromDigits[alphabet[[alphabet[[#, 2]] & /@ 
   Position[alphabet[[All, 1]], #][[1, 1]] & /@ Characters[astring], 2]]] 
```

例子 ：

```
formDigits["cross"]
(* abc19 + 10 (abc19 + 10 (abc15 + 10 (abc18 + 10 abc3))) *) 
```

写出对应于“Cross + road = danger”的方程组：

```
equation = formDigits["cross"] + formDigits["roads"] == formDigits["danger"] 
```

最后解决具有明显附加约束的系统：

```
sol = First@FindInstance[{equation, Sequence @@ Thread[Thread[0 <= vars <= 9]], 
    Not[Apply[And, Thread[vars == 0]]]}, alphabet[[All, 2]], Integers] ; 
```

查看 ：

```
formDigits["cross"] /. sol
formDigits["roads"] /. sol
formDigits["danger"] /. sol
(* 78644
   86614
  165258 *) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:27:32.723

这在 Prolog 中很自然地解决了。另请参阅[Prolog 中口头算术的更快实现](https://stackoverflow.com/questions/10925285/faster-implementation-of-verbal-arithmetic-in-prolog)：

```
%% unique selection from narrowing domain
selectM([A|As],S,Z):- select(A,S,S1),selectM(As,S1,Z).
selectM([],Z,Z).

%% a puzzle
cryp([[C,R,O,S,S]+[R,O,A,D,S]=[D,A,N,G,E,R]]):- 
   Dom=[0,1,2,3,4,5,6,7,8,9],
   selectM([S],Dom,D0), 
   N1 is S+S,          R is N1 mod 10, R=\=0, 
   selectM([R,D],D0,D1),               D=\=0,
   N2 is (N1//10)+S+D, E is N2 mod 10,
   selectM([E,O,A,G],D1,D2),
   N3 is (N2//10)+O+A, G is N3 mod 10,
   N4 is (N3//10)+R+O, N is N4 mod 10,
   selectM([N,C],D2,_), C=\=0, 
   N5 is (N4//10)+C+R, A is N5 mod 10,
   D  is  N5//10. 
```

效率的关键是逐个选择数字的实例化，立即测试以尽快废弃无效的选择。我确信这可以翻译成 Mathematica。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-01T05:58:20.490

像这个总和的另一个问题是

```
十字路口 + 道路 = 登格尔
```

这个问题的解决方案是

```
68244 + 82714 = 150958
```

# spring - 从 Spring 2.5.5 升级到 Spring 3 时 Spring mvc 上的问题

> ID：13991750
> 
> 赞同：2
> 
> 时间：2012-12-21T14:16:54.757
> 
> 标签：spring, spring-mvc

我将项目的模块升级为使用 spring 3 而不是 spring 2.5.5。

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping': Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/springframework/beans/factory/generic/GenericBeanFactoryAccessor
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:286)
            at org.springframework.web.servlet.DispatcherServlet.createDefaultStrategy(DispatcherServlet.java:772)
            at org.springframework.web.servlet.DispatcherServlet.getDefaultStrategies(DispatcherServlet.java:739)
            at org.springframework.web.servlet.DispatcherServlet.initHandlerMappings(DispatcherServlet.java:520)
            at org.springframework.web.servlet.DispatcherServlet.initStrategies(DispatcherServlet.java:412)
            at org.springframework.web.servlet.DispatcherServlet.onRefresh(DispatcherServlet.java:400)
            at org.springframework.web.servlet.FrameworkServlet.onApplicationEvent(FrameworkServlet.java:474)
            at org.springframework.context.event.GenericApplicationListenerAdapter.onApplicationEvent(GenericApplicationListenerAdapter.java:51)
            at org.springframework.context.event.SourceFilteringListener.onApplicationEventInternal(SourceFilteringListener.java:97)
            at org.springframework.context.event.SourceFilteringListener.onApplicationEvent(SourceFilteringListener.java:68)
            at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97)
            at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:303)
            at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:911)
            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:428)
            at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402)
            at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316)
            at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282)
            at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:126)
            at javax.servlet.GenericServlet.init(GenericServlet.java:212)
            at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161)
            at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:981)
            at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4071)
            at org.apache.catalina.core.StandardContext.start(StandardContext.java:4375)
            at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:790)
            at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:770)
            at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:553)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:296)
            at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.apache.catalina.core.StandardContext.init(StandardContext.java:5312)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:296)
            at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.web.tomcat.service.TomcatDeployer.performDeployInternal(TomcatDeployer.java:301)
            at org.jboss.web.tomcat.service.TomcatDeployer.performDeploy(TomcatDeployer.java:104)
            at org.jboss.web.AbstractWebDeployer.start(AbstractWebDeployer.java:375)
            at org.jboss.web.WebModule.startModule(WebModule.java:83)
            at org.jboss.web.WebModule.startService(WebModule.java:61)
            at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
            at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
            at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
            at $Proxy0.start(Unknown Source)
            at org.jboss.system.ServiceController.start(ServiceController.java:417)
            at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
            at $Proxy43.start(Unknown Source)
            at org.jboss.web.AbstractWebContainer.start(AbstractWebContainer.java:466)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
            at org.jboss.mx.interceptor.DynamicInterceptor.invoke(DynamicInterceptor.java:97)
            at org.jboss.system.InterceptorServiceMBeanSupport.invokeNext(InterceptorServiceMBeanSupport.java:238)
            at org.jboss.wsf.container.jboss42.DeployerInterceptor.start(DeployerInterceptor.java:87)
            at org.jboss.deployment.SubDeployerInterceptorSupport$XMBeanInterceptor.start(SubDeployerInterceptorSupport.java:188)
            at org.jboss.deployment.SubDeployerInterceptor.invoke(SubDeployerInterceptor.java:95)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
            at $Proxy44.start(Unknown Source)
            at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
            at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
            at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
            at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
            at $Proxy9.deploy(Unknown Source)
            at org.jboss.deployment.scanner.URLDeploymentScanner.deploy(URLDeploymentScanner.java:421)
            at org.jboss.deployment.scanner.URLDeploymentScanner.scan(URLDeploymentScanner.java:634)
            at org.jboss.deployment.scanner.AbstractDeploymentScanner$ScannerThread.doScan(AbstractDeploymentScanner.java:263)
            at org.jboss.deployment.scanner.AbstractDeploymentScanner.startService(AbstractDeploymentScanner.java:336)
            at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
            at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
            at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
            at $Proxy0.start(Unknown Source)
            at org.jboss.system.ServiceController.start(ServiceController.java:417)
            at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
            at $Proxy4.start(Unknown Source)
            at org.jboss.deployment.SARDeployer.start(SARDeployer.java:304)
            at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
            at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
            at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
            at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:766)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
            at $Proxy5.deploy(Unknown Source)
            at org.jboss.system.server.ServerImpl.doStart(ServerImpl.java:482)
            at org.jboss.system.server.ServerImpl.start(ServerImpl.java:362)
            at org.jboss.Main.boot(Main.java:200)
            at org.jboss.Main$1.run(Main.java:508)
            at java.lang.Thread.run(Thread.java:662)
        Caused by: java.lang.NoClassDefFoundError: org/springframework/beans/factory/generic/GenericBeanFactoryAccessor
            at org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping.determineUrlsForHandler(DefaultAnnotationHandlerMapping.java:113)
            at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.detectHandlers(AbstractDetectingUrlHandlerMapping.java:79)
            at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.initApplicationContext(AbstractDetectingUrlHandlerMapping.java:57)
            at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
            at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:69)
            at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
            at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:109)
            at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:88)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1413)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
            ... 157 more
        Caused by: java.lang.ClassNotFoundException: No ClassLoaders found for: org.springframework.beans.factory.generic.GenericBeanFactoryAccessor
            at org.jboss.mx.loading.LoadMgr3.beginLoadTask(LoadMgr3.java:306)
            at org.jboss.mx.loading.RepositoryClassLoader.loadClassImpl(RepositoryClassLoader.java:521)
            at org.jboss.mx.loading.RepositoryClassLoader.loadClass(RepositoryClassLoader.java:415)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
            ... 168 more
        ERROR 2012-12-20 15:35:54,756 (main:) [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/oxidemo]] Servlet /oxidemo threw load() exception
        java.lang.ClassNotFoundException: No ClassLoaders found for: org.springframework.beans.factory.generic.GenericBeanFactoryAccessor
            at org.jboss.mx.loading.LoadMgr3.beginLoadTask(LoadMgr3.java:306)
            at org.jboss.mx.loading.RepositoryClassLoader.loadClassImpl(RepositoryClassLoader.java:521)
            at org.jboss.mx.loading.RepositoryClassLoader.loadClass(RepositoryClassLoader.java:415)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
            at org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping.determineUrlsForHandler(DefaultAnnotationHandlerMapping.java:113)
            at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.detectHandlers(AbstractDetectingUrlHandlerMapping.java:79)
            at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.initApplicationContext(AbstractDetectingUrlHandlerMapping.java:57)
            at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
            at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:69)
            at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
            at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:109)
            at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:88)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1413)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:286)
            at org.springframework.web.servlet.DispatcherServlet.createDefaultStrategy(DispatcherServlet.java:772)
            at org.springframework.web.servlet.DispatcherServlet.getDefaultStrategies(DispatcherServlet.java:739)
            at org.springframework.web.servlet.DispatcherServlet.initHandlerMappings(DispatcherServlet.java:520)
            at org.springframework.web.servlet.DispatcherServlet.initStrategies(DispatcherServlet.java:412)
            at org.springframework.web.servlet.DispatcherServlet.onRefresh(DispatcherServlet.java:400)
            at org.springframework.web.servlet.FrameworkServlet.onApplicationEvent(FrameworkServlet.java:474)
            at org.springframework.context.event.GenericApplicationListenerAdapter.onApplicationEvent(GenericApplicationListenerAdapter.java:51)
            at org.springframework.context.event.SourceFilteringListener.onApplicationEventInternal(SourceFilteringListener.java:97)
            at org.springframework.context.event.SourceFilteringListener.onApplicationEvent(SourceFilteringListener.java:68)
            at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97)
            at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:303)
            at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:911)
            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:428)
            at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402)
            at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316)
            at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282)
            at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:126)
            at javax.servlet.GenericServlet.init(GenericServlet.java:212)
            at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161)
            at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:981)
            at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4071)
            at org.apache.catalina.core.StandardContext.start(StandardContext.java:4375)
            at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:790)
            at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:770)
            at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:553)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:296)
            at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.apache.catalina.core.StandardContext.init(StandardContext.java:5312)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:296)
            at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.web.tomcat.service.TomcatDeployer.performDeployInternal(TomcatDeployer.java:301)
            at org.jboss.web.tomcat.service.TomcatDeployer.performDeploy(TomcatDeployer.java:104)
            at org.jboss.web.AbstractWebDeployer.start(AbstractWebDeployer.java:375)
            at org.jboss.web.WebModule.startModule(WebModule.java:83)
            at org.jboss.web.WebModule.startService(WebModule.java:61)
            at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
            at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
            at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
            at $Proxy0.start(Unknown Source)
            at org.jboss.system.ServiceController.start(ServiceController.java:417)
            at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
            at $Proxy43.start(Unknown Source)
            at org.jboss.web.AbstractWebContainer.start(AbstractWebContainer.java:466)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
            at org.jboss.mx.interceptor.DynamicInterceptor.invoke(DynamicInterceptor.java:97)
            at org.jboss.system.InterceptorServiceMBeanSupport.invokeNext(InterceptorServiceMBeanSupport.java:238)
            at org.jboss.wsf.container.jboss42.DeployerInterceptor.start(DeployerInterceptor.java:87)
            at org.jboss.deployment.SubDeployerInterceptorSupport$XMBeanInterceptor.start(SubDeployerInterceptorSupport.java:188)
            at org.jboss.deployment.SubDeployerInterceptor.invoke(SubDeployerInterceptor.java:95)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
            at $Proxy44.start(Unknown Source)
            at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
            at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
            at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
            at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
            at $Proxy9.deploy(Unknown Source)
            at org.jboss.deployment.scanner.URLDeploymentScanner.deploy(URLDeploymentScanner.java:421)
            at org.jboss.deployment.scanner.URLDeploymentScanner.scan(URLDeploymentScanner.java:634)
            at org.jboss.deployment.scanner.AbstractDeploymentScanner$ScannerThread.doScan(AbstractDeploymentScanner.java:263)
            at org.jboss.deployment.scanner.AbstractDeploymentScanner.startService(AbstractDeploymentScanner.java:336)
            at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
            at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
            at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
            at $Proxy0.start(Unknown Source)
            at org.jboss.system.ServiceController.start(ServiceController.java:417)
            at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
            at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
            at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
            at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
            at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
            at 
```

我的模块正在使用spring mvc。我读到这个类在 spring 3 中被删除了，但是找不到是否有人有类似的错误并且它被移动到了。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:02:14.817

这有点猜测，但也许你还在拉一些`Spring 2.5.5`期望`GenericBeanFactoryAccessor`存在的罐子？我会仔细检查您的类路径中是否只有`Spring 3.x`jar。

如果您使用的是 Maven 之类的东西，您可以调用：

```
mvn dependency:tree 
```

查看所有依赖项。

就像我说的那样，这是一个猜测，但我希望它有所帮助！

# android - Adobe flex android 移动开发中的视频显示问题？

> ID：13991753
> 
> 赞同：0
> 
> 时间：2012-12-21T14:17:04.740
> 
> 标签：android, apache-flex, flash-builder, youtube-api

我有两个视图，view1 和 view2。使用Adobe Flex4.6开发

1)**视图1**

View1 显示视频信息，但不会播放视频。

2)**视图2**

View2 显示唯一的视频播放器，它正在播放来自 View1 的选定视频。

**问题：**

当用户从 View1->View2 移动时，播放视频。如果用户返回 **View1**，在 View2 中播放的视频不会被破坏。因此，如果用户在 View1 中再选择一个视频，当用户再次移动到 View2 时，两个视频开始一起播放。

请让我知道，当用户返回时，我需要做什么来销毁数据。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:25:06.007

您可以收听 `FlexEvent.VIEW_DEACTIVATE` (Dispatched when the current view has been deactivate) 和 `FlexEvent.REMOVING` ( Dispatched when the screen is about to be remove to response to a screen change) 事件来清除数据，因为 flex 不会强制您的视图立即被销毁。

考虑阅读[http://corlan.org/2011/01/12/understanding-flex-mobile-views-and-viewnavigator](http://corlan.org/2011/01/12/understanding-flex-mobile-views-and-viewnavigator)以更好地理解视图。

# dynamics-crm-2011 - 在 Dynamics CRM 2011 上扩展实体的最佳实践

> ID：13991757
> 
> 赞同：0
> 
> 时间：2012-12-21T14:17:26.843
> 
> 标签：dynamics-crm-2011, dynamics-crm

当 Dynamics CRM 2011 需要实体自定义时，我对推荐的最佳实践很感兴趣。Microsoft 建议[修改内置实体而不是创建新实体](http://msdn.microsoft.com/en-us/library/gg509027.aspx#CustomizationBestPractices)，但我担心使用这种方法在未来升级中的前向兼容性。

推荐的最佳做法是什么：

1.  自定义内置实体
2.  创建新的独立系统实体

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:09:33.457

这取决于你想要做什么，莱斯特。他们推荐使用内置实体的原因是您不必创建、定义它、创建视图、创建表单或任何东西。这一切都为你完成了。如果您需要跟踪个人的地址和其他个人信息，请使用联系实体。添加您需要的字段。隐藏那些你不知道的。

如果您需要做任何内置实体都不真正支持的事情，请务必创建自己的。请记住，您需要为其定义图标、视图、表单和安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T22:30:32.323

这实际上取决于您尝试创建的内容。

如果您需要联系人记录，那么在大多数情况下，您将使用联系人实体并根据需要进行自定义。另一方面，如果我需要进行授权管理，我不太可能只扩展现有实体 - 相反，我将创建 Grant 实体和适当的相关实体作为自定义实体。是的，您也许可以重用一些现有的来实现您的目标，但实际上没有充分的理由这样做，并且如果您需要它来实现预期的目标，您将面临无法使用自定义内置实体的风险未来的目的。

因此，快速得出的结论是问自己这个问题：根据要求，我是否自然适合现有实体？（即，此解决方案具有订单管理，它应该适合订单实体等）

如果否，则构建自定义实体。

如果是，请问自己下一个问题：我正在实施的业务逻辑是否与 CRM OOTB 的工作方式一致？如果是，请使用内置实体并自定义。如果否，则构建自定义实体。

希望有所帮助 - 没有很好的二元决定。其中很多是基于偏好和经验以及对解决方案如何随着时间的推移而发展的理解。

# capybara - Watir-webdriver 或 Capybara

> ID：13991762
> 
> 赞同：12
> 
> 时间：2012-12-21T14:17:40.533
> 
> 标签：capybara, watir-webdriver

我目前使用 Watir-webdriver 进行所有前端测试，但开发团队使用 Capybara 在 Jenkins CI 上运行测试。我们都使用相同的 Cucumber 功能。

值得我们做两次单独的测试并有效地进行两次测试吗？哪个是更好的工具？我已经阅读了网络上所有可用的比较，并且更喜欢使用 watir-webdriver，但是 Capybara 允许我无缝地使用无头测试。

那么有什么有用的想法和想法吗？我正处于十字路口，不确定是否要放弃 Watir-webdriver 并与开发团队的其他成员一起使用 Capybara。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-01T10:20:11.677

至于是否对相同的黄瓜功能使用两种不同的工具取决于测试域以及最适合它的方法。如果 Watir-webdriver 比 Capybara-webdriver 更适合前端测试，反之亦然。您需要花一些时间来研究 Capybara（一种设计高峰，用敏捷的说法），以将其与您所习惯的进行比较。尽量保持客观，即使使用熟悉的框架（根据我的经验）*非常*困难，然后对变化进行成本效益分析。直接成本可能只是时间/精力，但它仍然是会影响项目交付的成本。

Capybara 与 DRY 编程并非不兼容 - Capybara 的自定义选择器可以使用抽象层（如 Abe 在他的回复中提到的）。一旦创建了这些，您就可以像这样在自定义选择器上使用水豚查找器和匹配器；

```
Capybara.add_selector(:slide_show) do
  xpath { ".//div[contains(@class,'slideshow')]" }
end

Capybara.add_selector(:slide_show_element) do
  xpath { ".//div[contains(@class,'slideshowelem')]" }
end 
```

允许您使用 Capybara 的查找；

```
find(:slide_show_element, 'Sunset').click 
```

从 Cucumber 的角度来看，可以将定位符字符串从台阶中穿过；

```
And I Click "Sunset" in the "Holiday Pictures" Slide Show 
```

通过这样的步骤定义；

```
Given /^(?:I |)Click "(.*?)" in the "(.*?)" Slide Show$/i do |picture,slideshow|
   within(:slide_show, slideshow) do 
     find(:slide_show_element, picture).click
   end
end 
```

所以，问题仍然是流程之一 - 是否有两个框架会影响您的工作流程？调和两者是否会造成不可接受的时间损失？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:37:56.453

我们正在就我当前的项目进行完全相同的讨论。其中一位开发人员是 Capybara 的忠实粉丝，而我熟悉的是 Watir-webdriver。

Capybara 非常简单，可以非常快速地启动和运行测试，但我担心随着时间的推移会出现维护问题，而且我还担心它的简单性也可能意味着缺乏灵活性。

Watir-webdriver 允许我为我的网页编写一个抽象层，准确地识别我想要/需要的元素（灵活性），这也意味着“测试”层对于编写测试场景的人来说仍然*看起来*很简单，比如Capybara，但随着时间的推移，维护会很快，因为代码本质上是保持 DRY 的。编写该页面元素层需要更多的前期成本，但我有一种安全感，即框架的未来维护将很快。

当然，我有偏见——但思想开放。我很想听听一位水豚粉丝的反驳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:01:39.170

如果你在 Linux 上，你可以使用 watir-webdriver 运行真正的无头浏览器：[http ://watirwebdriver.com/headless/](http://watirwebdriver.com/headless/)

如果您想要这样做，可能有一种方法可以使用 watir-webdriver 运行无头浏览器。

使用一种工具还是两者都更好取决于您的上下文。使用这两种工具有什么问题吗？

# matlab - Matlab中的小计计算

> ID：13991765
> 
> 赞同：3
> 
> 时间：2012-12-21T14:17:50.193
> 
> 标签：matlab, subtotal

我想在matlab中对表格进行小计。如果两列的值相等，则取值，如果有条目则相加。

举个例子，源矩阵如下：

```
A = [1 2 3;
1 2 2;
1 4 1;
2 2 1;
2 2 3]; 
```

输出将如下所示：

```
B = [1 2 5;
1 4 1;
2 2 4]; 
```

如果前两列相等，则对第三列求和。有没有一种简单的方法，无需循环多次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:27:50.733

您可以使用 和 的组合来做到这`unique`一点`accumarray`：

```
%# find unique rows and their corresponding indices in A
[uniqueRows,~,rowIdx]=unique(A(:,1:2),'rows');

%# for each group of unique rows, sum the values of the third column of A
subtotal = accumarray(rowIdx,A(:,3),[],@sum);

B = [uniqueRows,subtotal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-09T12:40:18.610

您可以使用`unique`获取所有组，然后`splitapply`将它们相加

```
[u, ~, iu] = unique( A(:,1:2), 'rows' ); % Get unique rows & their indices
sums = splitapply( @sum, A(:,3), iu );   % Sum all values according to unique indices

output = [u, sums]
% >> output = 
% output =
%   26     7   124
%   26     8   785
%   27     7   800 
```

* * *

这是一个迟到的答案，因为刚刚提出了一个[重复的问题，所以我在这里发布了。](https://stackoverflow.com/questions/51767111/sum-values-in-matrix-based-on-criteria-in-other-matrix-columns/51767289#51767289)请注意，这`splitapply`是在 R2015b 中引入的，因此在`accumarray`发布解决方案时并不存在。

# java - Jena TDB 挂起/冻结命名模型访问

> ID：13991766
> 
> 赞同：2
> 
> 时间：2012-12-21T14:17:52.107
> 
> 标签：java, freeze, jena

我对 Apache Jena TDB 有疑问。基本上，我创建了一个新的数据集，将数据从 RDF/XML 文件加载到名为“http://example.com/model/filename”的命名模型中，其中文件名是 XML/RDF 文件的名称。加载数据后，命名模型中的所有语句都插入到默认模型中。出于备份原因，命名模型保留在数据集中。

当我现在尝试查询数据集中的命名模型时，TDB 冻结并且应用程序似乎在无限循环中运行，因此它没有终止，也没有引发异常。

是什么导致了冻结，我该如何预防？

示例代码：

```
Dataset ds = TDBFactory.createDataset("tdb");
Model mod = ds.getDefaultModel();

File f = new File("example.rdf");
FileInputStream fis = new FileInputStream(f);

ds.begin(ReadWrite.WRITE);

// Get a new named model to load the data into
Model nm = ds.getNamedModel("http://example.com/model/example.rdf");
nm.read(fis, null);

// Do some queries on the Model using the utility methods of Model, no SPARQL used

// Add all statements from the named model to the default model
mod.add(nm);

ds.commit();
ds.end();

// So far everything works as expected, but the following line causes the freeze
Iterator<String> it = ds.listNames(); 
```

任何访问现有命名模型的方法调用都会导致相同的冻结反应，`getNamedModel("http://example.com/model/example.rdf");`例如，这也是相同的。通过调用添加新的命名模型`getNamedModel("http://example.com/model/example123.rdf");`可以正常工作，因此只能访问现有模型。

使用环境：Linux 64bit, Oracle Java 1.7.0_09, Jena 2.7.4 (incl. TDB 0.9.4)

提前感谢您的帮助！

编辑：修复了代码片段中的错误

Edit2：解决方案（我对 AndyS 答案的最后评论）

好的，我浏览了整个程序并添加了所有丢失的交易。不是它按预期工作。我怀疑 Jena 在我的程序关闭序列期间抛出了一个异常，但该异常没有正确报告，并且“冻结”是由其他线程未正确终止引起的。感谢您指出错误的交易使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:17:58.030

你能把它变成一个测试用例并发送给jena用户的邮件列表吗？

您应该在事务内部获得默认模型 - 您在外部获得它。

此外，如果您以事务方式使用数据集，则不能像在`ds.listNames`. 它不应该冻结 - 你应该得到某种警告。

# ruby - Ruby：写入子目录中的文件

> ID：13991768
> 
> 赞同：1
> 
> 时间：2012-12-21T14:17:58.627
> 
> 标签：ruby, file

我正在尝试写入子目录中的文件。该文件由代码创建，但是一旦创建文件，脚本完成执行后它就为空。我究竟做错了什么？

```
# Creating output files
print "Creating output files and filling root menu..."
FileUtils.cd(outdir) do
  file = File.new("directory.xml", "w")
  file.puts "<?php header(\"Content-type: text/xml\"); ?>"
  file.puts "<CiscoIPPhoneMenu>"
  file.puts "<Title>Telefonbuch</Title>"
  file.puts "<Prompt>Dir External</Prompt>"
  letters_used.each do |letter|
    filename = "contacts_" + letter + ".xml"
    FileUtils.touch(filename)
    file.puts "<MenuItem>"
    file.puts "<Name>" + letter.upcase + "</Name>"
    file.puts "<URL>http://" + HOSTNAME + WEBSERV_DIR + "/" + filename + "</URL>"
    file.puts "</MenuItem>"
  end
  file.puts "</CiscoIPPhoneMenu>"
  file.rewind
end
print "Done\n" 
```

“directory.xml”应该链接到每个由脚本创建的“contacts_letter.xml”文件，但是 directory.xml 是空的。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:59:46.347

惯用的 Ruby 将使用块写入文件：

```
File.new("directory.xml", "w") do |fo|
  fo.puts "<?php header(\"Content-type: text/xml\"); ?>"
  fo.puts "<CiscoIPPhoneMenu>"
  fo.puts "<Title>Telefonbuch</Title>"
  fo.puts "<Prompt>Dir External</Prompt>"
  letters_used.each do |letter|
    filename = "contacts_" + letter + ".xml"
    FileUtils.touch(filename)
    fo.puts "<MenuItem>"
    fo.puts "<Name>" + letter.upcase + "</Name>"
    fo.puts "<URL>http://" + HOSTNAME + WEBSERV_DIR + "/" + filename + "</URL>"
    fo.puts "</MenuItem>"
  end
  fo.puts "</CiscoIPPhoneMenu>"
end 
```

这会在块的末尾自动关闭文件。

# c# - 一个实体应该是持久无知的吗？

> ID：13991773
> 
> 赞同：3
> 
> 时间：2012-12-21T14:18:14.990
> 
> 标签：c#, .net, entity-framework

一个实体应该是 Persitent 无知的吗？microsoft ADO.NET Entity Framorwok 呢？是执着无知吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T00:38:10.913

实体框架支持持久性无知和持久性感知实体。

以前的答案表明这是与您使用的生成模式有关，这在历史上是正确的（巧合），但现在不再如此，代码优先和数据库第一代模式都可以选择持久性感知（ish）或持久性无知。

在 EF 中支持或反对持久性无知的决定是更改跟踪的问题，即我们如何检测实体发生的更改并决定需要哪些操作才能将这些更改持久化到数据库中。EF 具有三种主要的变更跟踪方法

*   快照跟踪（实体完全**不了解持久性**）
*   POCO 代理更改跟踪（实体**似乎对持久性无知**，但在幕后是持久性感知的）
*   现在已弃用的自我跟踪实体 (STE)（实体具有**持久性意识**）

持久性无知是关于允许我们描述实体的外观，而无需明确推断它们映射到数据库表。这意味着我们与特定的数据库实现没有那么严格的联系。然而，对持久性的无知会在我们如何有效地与数据库通信方面进行一些权衡。

如果我们的实体完全不了解持久性，我们需要让我们的框架做更多的工作来了解它们何时更改以及更改对我们的数据库意味着什么。使用实体框架，这是通过存储上下文跟踪（看到）的所有实体的并排副本并执行差异来检测更改来实现的。

使用 POCO 代理，我们创建了原始实体的模拟扩展并监听特定属性的操作，因此我们可以更有效地跟踪更改。

EF 团队在快照更改跟踪器上做了非常了不起的工作，使我们能够拥有完全不了解持久性的实体。这在小型环境中表现得非常好（我们一次跟踪少于 1k 个对象），但在可能不适合我们使用的情况下，他们提供了替代跟踪方法。

即使使用纯 POCO 实体和快照跟踪，我们也有不同程度的持久性无知，这取决于我们是否决定使用属性修饰或模型构建器来配置我们映射到 SQL 表的确切细节。这是我非常喜欢使用模型构建器而不是属性装饰的关键原因之一。

回答您的标题问题*“实体应该是持久的无知吗？”* 我的意见理想上是肯定的，但仅限于实际上有意义的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:21:42.390

EF 与存储系统无关，是的。如果需要，您可以编写自己的提供程序。例如基于内存的存储模型。有一个 EF 期望的提供者模型。
[http://msdn.microsoft.com/en-us/library/ee789835.aspx](http://msdn.microsoft.com/en-us/library/ee789835.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:42:32.650

一般来说，您的实体对象应该是简单的数据持有者。他们不应该关心数据来自哪里，如何获得，或者去哪里，他们的工作是作为一组相关数据点的容器（如果你愿意的话，一个记录）。通常还有其他对象（数据访问对象），它们的工作是获取数据并用它填充实体对象，或者获取实体对象并将其数据保存到数据存储中。

# java - java中的任何trie实现（使用maven repo）

> ID：13991777
> 
> 赞同：5
> 
> 时间：2012-12-21T14:18:29.673
> 
> 标签：java, maven, trie

从这个[问题](https://stackoverflow.com/questions/623892/where-do-i-find-a-standard-trie-based-map-implementation-in-java)，似乎有一个 Patricia Trie 实现，但没有 maven repo 。无论如何，我在 Gauva/Google Collections 中找不到 trie。有谁知道java中的任何Trie实现库，它有一个maven repo？

**注意**：它基本上是为前端的自动完成功能创建一个后端。任何其他有助于实现这一目标的东西都应该足够好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T14:22:55.703

查看[concurrent-trees](http://code.google.com/p/concurrent-trees/)，它包含一个[并发的 Radix Tree/Patricia Trie](http://concurrent-trees.googlecode.com/svn/concurrent-trees/javadoc/apidocs/com/googlecode/concurrenttrees/radix/ConcurrentRadixTree.html)实现。它还向标准[maven repo](http://mvnrepository.com/artifact/com.googlecode.concurrent-trees/concurrent-trees/1.0.0)发布了工件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-27T12:40:07.097

[org.apache.commons.collections4.trie.PatriciaTrie](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/trie/PatriciaTrie.html)

# android - GridView 加载重复的图像和文本（使用 EndlessScrollListener）

> ID：13991787
> 
> 赞同：3
> 
> 时间：2012-12-21T14:19:18.660
> 
> 标签：android, scroll, android-asynctask, android-gridview

我有一个自定义的 gridVIew，其中包含一个 ImageView 和一个 TextView，并且我已将 gridView 设置为它显示 2 个列。这是 custom_grid_layout.xml 的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widget44"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imgBookCover"
    android:layout_width="88dp"
    android:layout_height="102dp"
    android:adjustViewBounds="true"
    android:background="@drawable/rounded_image_borders"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:src="@drawable/book5" >
</ImageView>

<TextView
    android:id="@+id/txt_BookTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:gravity="center_horizontal"
    android:lines="1"
    android:text="TextView"
    android:textColor="@color/White"
    android:textColorHighlight="#656565" >
</TextView> 
```

这是gridview.xml的布局

```
 <GridView
    android:id="@+id/gridview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/Rel_Spinner"
    android:layout_centerHorizontal="true"
    android:gravity="center"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth" >
</GridView> 
```

*   它从服务器加载图像并首次显示正确的图像和文本，因为我已经在我的项目中实现了 EndlessScrollListner 类。
*   在第一次迭代中，我从服务器加载 12 个图像，当我向下滚动 gridView 以结束时，它发送第二个请求以从服务器加载 12 个更多图像和文本。
*   在这里，实际问题开始加载相同的图像和文本。
*   请查看我庞大的代码并告诉我在哪里出现错误。

公共类首页扩展活动{静态最终字符串网址=“ [http://www.shiaislamiclibrary.com/requesthandler.ashx](http://www.shiaislamiclibrary.com/requesthandler.ashx) ”；

```
static final String KEY_ITEM = "Book"; // parent node
static final String KEY_BOOKAUTHOR = "book_author";
static final String KEY_BOOKRATING = "BookRating";
static final String KEY_BOOKID = "BookID";
static final String KEY_BOOKDESC = "BookDescription";
static final String KEY_BOOKDATEPUBLISHED = "DatePublished";
static final String KEY_BOOKTITLE = "BookTitle";
static final String KEY_BOOKCODE = "BookCode";
static final String KEY_BOOKIMAGE = "BookImage";
static final String KEY_ITEM_BOOKs_LIMIT = "Result"; // parent node
static final String KEY_ITEM_TOTAL_BOOKS = "TotalBooks";

    static ArrayList<String> BookTitle = null;
static ArrayList<Integer> BookRating = null;
static ArrayList<String> BookDescription = null;
static ArrayList<String> BookCoverPhotos = null;
static ArrayList<String> BookAuther = null;
static ArrayList<String> BookIDs = null;
static ArrayList<String> BookCode = null;
static ArrayList<String> BookPublishDate = null;
static ArrayList<String> ImageByte = null;
static ArrayList<Bitmap> bitmapArray = null;
static int initialIndex = 12;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
setContentView(R.layout.home_activity);
gridView = (GridView) findViewById(R.id.gridview);
gridView.setOnScrollListener(new EndlessScrollListener());
if (BookTitle == null) {
                BookTitle = new ArrayList<String>();
                BookRating = new ArrayList<Integer>();
                BookDescription = new ArrayList<String>();
                BookIDs = new ArrayList<String>();
                BookCode = new ArrayList<String>();
                BookCoverPhotos = new ArrayList<String>();
                BookAuther = new ArrayList<String>();
                BookPublishDate = new ArrayList<String>();
                ImageByte = new ArrayList<String>();
                bitmapArray = new ArrayList<Bitmap>();
                new UIThread().execute(URL, initialIndex + "");
                // Log.i("If", BookTitle + "");
            } else {

                // Log.i("else", BookTitle + "");
                ImageAdapter adapter2 = new ImageAdapter(getBaseContext(),
                        act);
                gridView.setAdapter(adapter2);

            } 
```

我使用 AsynkTaks 从服务器下载图像。这是代码

```
private class UIThread extends AsyncTask<String, Integer, String> {

    ProgressDialog progressDialog;
    ImageAdapter adapter = new ImageAdapter(getBaseContext(), act);

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        progressDialog = ProgressDialog.show(getParent(),
                "Acumlating Books from server...",
                "This may Take a few seconds.\nPlease Wait...");
    }

    @Override
    protected String doInBackground(String... params) {

        String URL = params[0];
        int initialIndex = Integer.valueOf(params[1]);
        Log.i("params", params[1] + "");

        XMLParser parser = new XMLParser();
        String XMLString = parser.getXmlFromUrl_FeaturedBooks(URL,
                initialIndex);

        Home.initialIndex = Home.initialIndex + 12;
        Log.i("Home.initialIndex", Home.initialIndex + "");

        Document doc = parser.getDomElement(XMLString);
        NodeList nlBooksLimit = doc
                .getElementsByTagName(KEY_ITEM_BOOKs_LIMIT);
        Element eLimit = (Element) nlBooksLimit.item(0);

        String totalBooks = parser.getValue(eLimit, KEY_ITEM_TOTAL_BOOKS);
        Log.i("totalBooks", totalBooks + "");
        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        // looping through all item nodes <item>

        Bitmap imageNotFound = BitmapFactory.decodeResource(getResources(),
                R.drawable.defaultcoverphoto);

        for (int i = 0; i < nl.getLength(); i++) {

            Element e = (Element) nl.item(i);

            try {
                BookRating.add(Integer.valueOf(parser.getValue(e,
                        KEY_BOOKRATING)));
                // Log.i("Rating Try", BookRating.get(i) + "");

            } catch (Exception e2) {
                BookRating.add(0);
                // Log.i("Rating Catch", BookRating + "");
            }

            BookDescription.add(parser.getValue(e, KEY_BOOKDESC));
            BookTitle.add(parser.getValue(e, KEY_BOOKTITLE));
            BookCoverPhotos.add("http://shiaislamicbooks.com/books_Snaps/"
                    + parser.getValue(e, KEY_BOOKCODE) + "/1_thumb.jpg");
            BookAuther.add(parser.getValue(e, KEY_BOOKAUTHOR));
            BookPublishDate.add(parser.getValue(e, KEY_BOOKDATEPUBLISHED));
            BookIDs.add(parser.getValue(e, KEY_BOOKID));
            BookCode.add(parser.getValue(e, KEY_BOOKCODE));
            // Log.i("URLs & Desc", BookCoverPhotos.toString());

            try {
                bookImageURL = new URL(BookCoverPhotos.get(i));
            } catch (MalformedURLException e1) {
                e1.printStackTrace();
                // Log.i("URL", "ERROR at image position" + i + "");
            }

            try {
                bitMapImage = BitmapFactory.decodeStream(bookImageURL
                        .openConnection().getInputStream());
                bitmapArray.add(bitMapImage);
                publishProgress(i + 1);

            } catch (IOException e2) {
                e2.printStackTrace();
                bitmapArray.add(imageNotFound);
                // Log.i("File Not Found", bookImageURL + "");
            }

        }

        Log.i("Book Title", BookTitle + "");

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
        progressDialog.setMessage(values[0]
                + " Book(s) found \nPlease wait...");

    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
        gridView.setAdapter(adapter);
    }
} 
```

这是 EndlessScrollListner.java 代码。当滚动到达gridView的底部时，它再次发送请求以进行下载。

```
private class EndlessScrollListener implements OnScrollListener {

    private int visibleThreshold = 0;
    private int currentPage = 0;
    private int previousTotal = 0;
    private boolean loading = true;

    public EndlessScrollListener() {
    }

    public EndlessScrollListener(int visibleThreshold) {
        this.visibleThreshold = visibleThreshold;
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        if (loading) {
            if (totalItemCount > previousTotal) {
                loading = false;
                previousTotal = totalItemCount;
                currentPage++;
            }
        }
        if (!loading
                && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold)) {
            // I load the next page of gigs using a background task,
            // but you can call any function here.
            new UIThread().execute(URL, Home.initialIndex + "");
            Log.i("Reached", "End");
            Log.i("Home.initialIndex", Home.initialIndex + "");
            loading = true;
        }
    } 
```

这里有两张图片让你更清楚我的问题。 ![在此处输入图像描述](../Images/89db14181031e4765bf0acac6546764e.png) ![在此处输入图像描述](../Images/be9f84f8780a9bbf441abe665c802e04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T16:55:38.253

虽然很晚，但我也遇到了同样的问题。它的发生是因为适配器的`getView`方法。在您的`ImageAdapter`中，如果该`getView`函数重用已创建的视图，那么这可能是您的图像重复的原因。如果代码如下所示，那么它应该像第二个代码片段一样进行更改，以下载来自 load more 的新图像。

`Snippet 1`

```
public View getView(int position, View v, ViewGroup parent) {
    ImageView imageview;
    if(v == null)
    {
        imageview = new ImageView(mcontext);
        imageview.setLayoutParams(new GridView.LayoutParams(250,250));
        imageview.setPadding(0,0,10,10);
        imageview.setScaleType(ImageView.ScaleType.CENTER_CROP);
        new DownloadImageTask(imageview).execute(arr.get(position).imageUrl);
    }
    else
        imageview = (ImageView) v;

   return imageview;
} 
```

`Snippet 2`

```
 public View getView(int position, View v, ViewGroup parent) {

    ImageView imageview;
    if(v == null)
    {
        imageview = new ImageView(mcontext);
        imageview.setLayoutParams(new GridView.LayoutParams(250,250));
        imageview.setPadding(0,0,10,10);
        imageview.setScaleType(ImageView.ScaleType.CENTER_CROP);
    }
    else
        imageview = (ImageView) v;
    new DownloadImageTask(imageview).execute(arr.get(position).imageUrl);
   return imageview;
} 
```

或者可能完全创建一个新视图，但是您可能需要自己处理`virtualization`/ 。`reusability``gridView``listView`

# bash - 两个进程之间使用的命名管道有什么问题？

> ID：13991790
> 
> 赞同：2
> 
> 时间：2012-12-21T14:19:24.297
> 
> 标签：bash, named-pipes, read-write

我让 2 个进程并行运行，它们与命名管道通信。我注意到一个奇怪的行为：每次写入都应该跟着读取，反之亦然！如果我们违反规则，程序会挂起，如果我们用 ctrl+C 终止它，孩子仍然会挂起，这意味着它不能再重新读取。

我的例子：

```
#!/bin/bash
shopt -u failglob
shopt -s extglob nullglob dotglob

function london (){
   local message answer fifo id return exitcode
   fifo=fifo_$RANDOM.$RANDOM.$RANDOM.$$
   mkfifo ${fifo}
   #trap 'rm -rf "$fifo"' EXIT
   ( berlin $fifo ) &
   id=$!
   echo "parent id: $$, child id: $id"
   message='Greetings from London!(1)'
   echo "$message" > $fifo
   echo "1\. parent sent it's 1st message"
   #*****write-to-write error!*****#
   message='Greetings from London!(2)'
   #read -r answer < $fifo
   echo "$message" > $fifo
   echo "2\. parent sent it's 2nd message"
   wait
   rm -rf $fifo
}

function berlin (){
   local message answer fifo
   fifo=$1
   read -r answer < $fifo
   echo 'Berlin says:> '"$answer"
   #*****read-to-read error!*****#
   #echo 'next' > $fifo
   read -r answer < $fifo
   echo 'Berlin says:> '"$answer"
}

london 
```

在我插入“write-to-write”或“read-to-read”消息的点下，有两条注释行解决了这个问题，让我觉得上面的规则神秘地成立了！！！有什么想法吗？

这是输出：

```
parent id: 4921, child id: 4923
1\. parent sent it's 1st message
2\. parent sent it's 2nd message
Berlin says:> Greetings from London!(1) 
```

谢谢！

我想现在一切都清楚了，并浓缩为一句话：**“保持管道对读者开放”**。

假设现在，我想为循环内的“一些”命令添加第二个输入文件描述符；我怎样才能做到这一点？这是我的新柏林功能：

```
function berlin (){
   local message answer fifo
   fifo=$1
   while true; do
      read -r answer
      echo 'Berlin says:> '"$answer"
      #this fails!
      read -r -p "reading from fd0: " <&0
      if [[ $answer = 'quit' ]]; then
         break
      fi
   done < "$fifo" 3>"$fifo"
} 
```

可以看到，我们使用文件描述符 3 作为管道，但是当我们尝试从 fd 0 读取时，我们实际上是从 fd 3 读取的！有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:47:01.037

管道可以容纳的数据量有限。如果您写入它们直到它们已满，则所有未来的写入都将阻塞，直到数据被读出。同样，如果管道中没有要读取的数据，则读取块。

最重要的是，在你做事之前，你需要管道两边的人。因此，您会遇到一种情况，即在您编写第二条消息后，读者会查看管道。因此，就它而言，没有数据。然后，您的主要过程完成，让孩子闲逛。

要解决此问题，请不要关闭阅读器端。使用 while 循环保持该端打开。像这样：

```
#!/bin/bash
shopt -u failglob
shopt -s extglob nullglob dotglob

function london (){
   local message answer fifo id return exitcode
   fifo=fifo_$RANDOM.$RANDOM.$RANDOM.$$
   mkfifo ${fifo}
   #trap 'rm -rf "$fifo"' EXIT
   ( berlin $fifo ) & 
   id=$!
   echo "parent id: $$, child id: $id"
   message='Greetings from London!(1)'
   echo "$message" > $fifo
   echo "1\. parent sent it's 1st message"
   #*****write-to-write error!*****#
   message='Greetings from London!(2)'
   #read -r answer < $fifo
   echo "$message" > $fifo
   echo "2\. parent sent it's 2nd message"
   wait
   rm -rf $fifo
}

function berlin (){
   local message answer fifo
   fifo=$1
   while read -r answer
   do  
       echo 'Berlin says:> '"$answer"
   done < $fifo
}

london 
```

# vb.net - VB如何删除Application Event

> ID：13991798
> 
> 赞同：-2
> 
> 时间：2012-12-21T14:19:51.593
> 
> 标签：vb.net

现在我知道如何使用VB查看应用程序事件，但我不知道如何使用VB删除应用程序事件，这里有人可以帮助我。

我的代码显示应用程序事件

```
dim WMI_function = "Win32_NTLogEvent where Logfile='Application'"       
dim Fields_to_load = "Logfile,Message,type"
dim fail_description = " Access to " + WMI_function + " is protected"
Try
    output_wmi_function_data_instances(WMI_function,Fields_to_load,2000)
Catch
    rw(fail_description)
End Try 
```

PS/请帮帮我，只用VB，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:33:34.573

我不知道该为您提供哪种语言，所以第一种是 VB.NET。

```
System.Diagnostics.EventLog.Delete("MyCustomLog") 
```

希望这可以帮助..

# eclipse - 我的 taglib <%@ taglib prefix="portlet" uri="http://java.sun.com/portlet_2_0"%> 中的错误

> ID：13991799
> 
> 赞同：6
> 
> 时间：2012-12-21T14:19:54.250
> 
> 标签：eclipse, portlet, taglib

当我开发我的 portlet 和编写我的 jsp 页面时，我使用了：

```
<%@ taglib prefix="portlet" uri="http://java.sun.com/portlet_2_0"%> 
```

但是 Eclipse 向我显示一个错误，告诉我它**找不到[http://java.sun.com/portlet_2_0](http://java.sun.com/portlet_2_0)的标签库描述符。**

如何在不使用 tld 文件的情况下解决此问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:16:49.933

就我而言，我使用的是 Liferay Portal，所以为了避免这个错误，我更改了：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0"% prefix="portlet"> 
```

至

```
<%@ taglib uri="/WEB-INF/tld/liferay-portlet.tld" prefix="portlet" %> 
```

并在文件**“WEB-INF/liferay-plugin-package.properties”中**；我添加了这一行

```
portal-dependency-tlds=/WEB-INF/tld/liferay-portlet.tld 
```

这是 Liferay 工作人员建议的（[链接](http://www.liferay.com/community/forums/-/message_boards/message/4899348)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-24T20:26:47.593

删除线

```
<%@ taglib uri="http://java.sun.com/portlet_2_0"% prefix="portlet"> 
```

并粘贴这一行：

```
<%@taglib uri="http://java.sun.com/portlet" prefix="portlet"%> 
```

然后，在`WEB-INF/tld`文件夹中放置这些文件：`aui.tld`, `liferay-portlet.tld`, `liferay-portlet-ext.tld`, `liferay-security.tld`, `liferay-theme.tld`, `liferay-ui.tld`, `liferay-util.tld`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:33:46.480

您可以下载[portlet-2.0.jar](http://www.java2s.com/Code/Jar/p/Downloadportlet20jar.htm)并将其添加到您的项目路径中。但是，如果您正在为 Liferay 进行开发，我建议您使用`liferay-portlet.tld`具有 portlet 2.0 规范的版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T08:56:34.677

如果将此添加到 WEB-INF 文件夹中的 web.xml 中，它将删除 Eclipse 错误消息。

```
<web-app>
    <taglib>
        <taglib-uri>http://java.sun.com/portlet_2_0</taglib-uri>
        <taglib-location>/WEB-INF/tld/liferay-portlet.tld</taglib-location>
    </taglib>
</web-app> 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-16T18:09:10.823

此错误仅意味着 Eclipse 无法找到解析给定 ( [http://java.sun.com/portlet_2_0](http://java.sun.com/portlet_2_0) ) 标记 URI 的标记库描述符 (TLD)。您可以从 GitHub 下载与您的门户容器（Gatein、Pluto、Liferay 等）对应的 TLD，并将其放在 WEB-INF 文件夹中。可以在[此处](https://github.com/gatein/gatein-pc/blob/master/portlet/src/main/resources/META-INF/portlet_2_0.tld)找到 Gatein 特定的 tld 。此外，请确保您的项目路径中有 portlet_2.0 jar。

# java - 使用阻塞队列问题在线程之间共享数据

> ID：13991802
> 
> 赞同：-3
> 
> 时间：2012-12-21T14:20:24.023
> 
> 标签：java, multithreading, concurrency

```
protected BlockingQueue<DataPack> queue = new ArrayBlockingQueue<DataPack>(1024); 
```

我已经使用上面的代码很长一段时间了，但我从来没有完全理解它，我的意思是我知道如何使用它来做我需要它做的事情，但我不知道 arrayblockingqueue 和任何类型之间的差异可能有，所以有人会介意解释这一点，并解释何时使用每一个。您还介意给我一些有关此速度的信息以及更好的替代方案（如果有的话）吗？我是否有可能丢失数据？（我可能会丢失一些数据，但我不会丢失 10% 的共享数据。）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:24:10.090

您不会丢失任何数据。该队列存在于进程中，并且仅保存由一个线程插入并由第二个线程获取的对象引用。这是一个普通的 Java 集合，但具有同步的（线程感知/线程安全的）变异器。

关于速度，我怀疑任何差异都可以忽略不计。与以往一样，您应该衡量它是否值得关注，但我怀疑您有两个线程这一事实意味着您在其他地方有延迟，并且队列的存在根本不会影响这一点。

# c# - 如何建立数据库（sql）连接以使用 c# 从文本字段接收数据？

> ID：13991803
> 
> 赞同：1
> 
> 时间：2012-12-21T14:20:23.570
> 
> 标签：c#, asp.net, sql, database

我想建立数据库连接以从文本字段接收数据并将该数据存储在数据库记录中。为此，到目前为止，我已经尝试过：

我创建了`.mdf`数据库文件，并创建了名称为 as 的表，`Table1`并放置了两个文本字段和提交按钮，代码如下： **data.aspx**

```
<b>Username:<asp:TextBox ID="TextBox1" runat="server" BackColor="AliceBlue">
</asp:TextBox><br/>
<b>Lastname:<asp:TextBox ID="TextBox2" runat="server" BackColor="AliceBlue">
</asp:TextBox><br/>
<asp:Button ID="Button1" runat="server" Text="Submit" OnClick="SubmitBtn_Click"/> 
```

代码文件如下： **data.aspx.cs**

```
using System.Web.Configuration;
using System.Data.SqlClient;
protected void SubmitBtn_Click(object sender, EventArgs e)
{
    string connectionStrings = "Data Source=|SQLEXPRESS;Integrated                       
   Security=True; Connect Timeout=30;User Instance=True;";

    using (SqlConnection sqlConnection = new SqlConnection(connectionStrings))
{
    string insertStatement = "INSERT INTO Table1(column1,column2) 
                              VALUES (@col1, @col2)";
    SqlCommand sqlCommand = new SqlCommand(insertStatement, sqlConnection);
    sqlCommand.Parameters.AddWithValue("@col1", TextBox1.Text);
    sqlCommand.Parameters.AddWithValue("@col2", TextBox2.Text);
    sqlConnection.Open();
    sqlCommand.ExecuteNonQuery();
    try
    {
        sqlConnection.Open();
        sqlCommand.ExecuteNonQuery();

    }
    finally
    {
        sqlConnection.Close();
    }
}

} 
```

我也有如下配置文件来建立连接，代码如下： **web.config**

```
<?xml version="1.0"?>
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0" />

</system.web>
</configuration> 
```

但是对于该代码，我在单击提交按钮后收到此错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

还有一个例外：

> System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:28:13.200

检查您的 sql server 实例是否正在运行。转到**开始-> SQL Server 配置管理器**
并检查您的 sql server 实例是否已启动。

或尝试将您的连接字符串更改为

```
string connectionStrings = "Data Source=.\SQLEXPRESS;
 Initial Catalog=databaseName Integrated Security=True;"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:09:15.790

引发异常的原因是您的 SQL Server 实例实际上无法访问，或者您的 SQL Server 实例未启动，或者有防火墙阻止了对默认 1433 端口的请求，以远程访问 SQL Server 实例。

阅读文档页面：http: [//msdn.microsoft.com/en-us/library/ms177440.aspx](http://msdn.microsoft.com/en-us/library/ms177440.aspx)

请记住检查您的连接字符串。您编写的连接字符串：

```
"Data Source=|SQLEXPRESS;Integrated                       
   Security=True; Connect Timeout=30;User Instance=True;" 
```

我认为这是不正确的。如果您要连接到名为**SQLEXPRESS**的本地第二个 SQL 实例，则这是正确的连接字符串：

```
"Data Source=.\SQLEXPRESS;Integrated                       
   Security=True; Connect Timeout=30;User Instance=True;" 
```

此外，您正在使用设置`Integrated Security=True;`。这意味着您正在尝试使用您的 Windows 凭据进行连接。您确定您有权使用您的 Windows 凭据进行连接吗？如果没有，请删除此设置并添加您的用户名和密码，例如在此连接字符串中：

```
"Data Source=.\SQLEXPRESS;User Id=sa; Password=sa123; Connect Timeout=30;" 
```

阅读[这个](https://stackoverflow.com/questions/1229691/difference-between-integrated-security-true-and-integrated-security-sspi)关于`Integrated Security`设置使用的有趣问题。

此外，您的**SQLEXPRESS**实例似乎是一个[用户实例](http://msdn.microsoft.com/en-us/library/ms254504.aspx)。此实例是否启用？

# c# - for循环中的sql

> ID：13991806
> 
> 赞同：1
> 
> 时间：2012-12-21T14:20:40.530
> 
> 标签：c#, .net, sql, wpf

> **可能重复：**
> [变量名称“@VarName”已被声明问题](https://stackoverflow.com/questions/13868128/the-variable-name-varname-has-already-been-declared-issue)

```
using (SqlCommand command = connection.CreateCommand())
{
    int j = 1;
    for (int i = 0; i < temp4.Count; i++)
    {
        #region idsetter

        int prevId = 0;

        command.CommandText = "SELECT MAX(id) FROM Configuration";
        connection.Open();
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                if (reader[0].ToString() != "")
                {
                    prevId = Int32.Parse(reader[0].ToString());
                }
                else
                {
                    prevId = 0;
                }
            }
        }

        connection.Close();
        int currId = prevId + 1;
        #endregion
        command.CommandText = "INSERT INTO Configuration (id,A, B, C, D, E, F,G) " + 
                              "VALUES (@id, @a, @b , @c, @d, @e, @f, @g)";

        command.Parameters.AddWithValue("@id", currId);
        command.Parameters.AddWithValue("@a", myL);
        command.Parameters.AddWithValue("@b", pipi);
        command.Parameters.AddWithValue("@c", temp4[i].ad);
        command.Parameters.AddWithValue("@d", temp4[i].asa);
        command.Parameters.AddWithValue("@e", temp4[i].Tasa);
        command.Parameters.AddWithValue("@f", j);
        command.Parameters.AddWithValue("@g", 1);
        connection.Open();
        command.ExecuteNonQuery();
        connection.Close();
        j++;
        if (j > 7)
        {
            j = 1;
        }
    }
} 
```

我正在尝试在配置表中写入，首先读取 id 并增加它，然后再写入其他所有内容。但是当添加第二个条目时，它会给出异常

> 变量名称“@id”已被声明。变量名称在查询批处理或存储过程中必须是唯一的。

如何避免此异常的任何解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T14:32:36.440

如果您每次都添加相同的参数，那么它总是会给您一个例外。

在 for 循环之前声明变量并给它们一些默认值，例如：

```
command.Parameters.AddWithValue("@id", 1);
command.Parameters.AddWithValue("@a", "");
command.Parameters.AddWithValue("@b", "");
command.Parameters.AddWithValue("@c", "");
command.Parameters.AddWithValue("@d", "");
command.Parameters.AddWithValue("@e", "");
command.Parameters.AddWithValue("@f", 1);
command.Parameters.AddWithValue("@g", 1); 
```

然后在`command.CommandText = "INSERT INTO Configuration (id,A, B, C, D, E, F,G) VALUES (@id, @a, @b , @c, @d, @e, @f, @g)";`like之后改变参数的值

```
cmd.Parameters["@id"].Value=currId;
cmd.Parameters["@a"].Value=myL;
cmd.Parameters["@b"].Value=pipi;
cmd.Parameters["@c"].Value=temp4[i].ad;
cmd.Parameters["@d"].Value=temp4[i].asa;
cmd.Parameters["@e"].Value=temp4[i].Tasa;
cmd.Parameters["@f"].Value=j;
cmd.Parameters["@g"].Value=1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T14:22:09.893

现在，第一个查询中的参数与第二个查询中的参数冲突。每次执行都使用新命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T14:23:22.537

您需要在循环的每次迭代中清除 Command 参数。

```
command.CommandText = "INSERT INTO Configuration (id,A, B, C, D, E, F,G) VALUES (@id, @a, @b , @c, @d, @e, @f, @g)";

command.Parameters.Clear();
command.Parameters.AddWithValue("@id", currId); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T14:23:10.800

您将@id 和所有其他参数多次添加到参数集合中。您需要先清除集合，然后添加新记录。

您应该能够使用 clear 方法。[清除参数集合](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.clear%28v=vs.71%29.aspx)

```
command.Parameters.Clear(); 
```

# qt4 - 如何让 qextserialport 在 Qt 中更快地读取字节？

> ID：13991807
> 
> 赞同：-1
> 
> 时间：2012-12-21T14:20:43.417
> 
> 标签：qt4

大家好，我在 Qt 中使用 qextserialport 进行串行通信。发生的情况是，当我从控制器板发送数据时，它会读取数据，但即使我关闭板，它也会继续读取数据。这意味着它的读取速度非常慢，当我关闭电路板时，终端上仍有字节要读取。那么如何解决这个问题？

当关闭电路板时，它应该停止读取字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:02:37.827

**串行端口中的奇偶校验配置错误**。

*   如果您已经尝试过另一个串行终端软件并且它工作正常，那么您错误地配置了您的驱动程序 qextserialport。

*您应该遵循这种类型的初始化：*

```
 ...

  bool uart_openPort(QString name, PortSettings *setting) {

        static bool port_created = false;

        if (port_created == false) {
            port = new QextSerialPort();
            port->setQueryMode(QextSerialPort::Polling);
            port_created = true;
        }

        if (connection_ready) {
            uart_closePort();
            connection_ready = false;
        }

        port->setPortName(name);
        port->setBaudRate (setting->BaudRate);
        port->setDataBits(setting->DataBits);
        port->setStopBits(setting->StopBits);
        port->setParity(setting->Parity);
        port->setFlowControl(setting->FlowControl);
        port->setTimeout(1);

        if (port->open(QextSerialPort::ReadWrite)) {
            connection_ready = true;
            qDebug("INFORMATION (UART OPEN PORT): Port open Successful!");

        } else {
            connection_ready = false;
            qDebug("CRITICAL (UART OPEN PORT): Error open Port!");
        }

        return(connection_ready);
    }

    ... 
```

*或者您可以在此模式下使用一些固定参数*

```
...

    port->setPortName("/dev/ttyUSB0");
    port->setBaudRate(BAUD9600);
    port->setDataBits(DATA_8);
    port->setStopBits(STOP_1);
    port->setParity(PAR_NONE);
    port->setFlowControl(FLOW_OFF);
    port->setTimeout(1);

... 
```

*   如果您在任何软件中都无法正常运行，则应检查板上的控制奇偶校验设置；

*   如果您使用软件生成的 uart 流，则在串行序列中应检查正确放置起始位和传输结束时的一个字节是否足以容纳一个停止位。

# gwt - 在 GWT 中实现具有多个视图的应用程序

> ID：13991812
> 
> 赞同：0
> 
> 时间：2012-12-21T14:21:01.363
> 
> 标签：gwt

我从这个论坛和 Google GWT 论坛的主题中了解到，在 GWT 世界中，您通常只加载一个页面，然后在用户看来是不同页面的只是同一个页面，其内容由用户操作更新。许多帖子暗示您开发应用程序就像开发桌面应用程序一样。如果您已经完成桌面开发，这听起来很容易，但我来自纯 Web 服务/Servlets/Struts 背景，并且希望看到一个非常基本的示例，该示例显示了实现 GWT 应用程序的正确方法，您可以在其中向用户显示一个 txt 框和按钮，当他们单击按钮时，视图将替换为 2 个不同的组件。我已经完成了许多基本应用程序和许多复杂的多页类型应用程序，但我只是一个让我通过单击按钮查看消息类型应用程序进入下一个级别的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:29:36.210

我建议学习[活动和地点设计模式](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)。在我看来，对于具有多个视图的大型应用程序，这是最好的方法。它提供了许多“开箱即用”的重要功能，例如浏览器历史管理、令牌支持、高效内存管理等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T00:40:20.170

您可能想研究模型-视图-演示者模式 (MVP)。正确使用这种模式将极大地解耦您的应用程序，允许您创建不仅高度模块化和一次性的视图，而且非常容易换出和更改。

事实上，Google 在开发 GWT 应用程序时完全推荐 MVP 模式。[他们在此处](https://developers.google.com/web-toolkit/articles/mvp-architecture)提供了 MVP GWT 应用程序的完整示例和演练，我认为这是基于2009 年关于最佳 GWT 应用程序架构实践的[Google I/O 演示文稿。](http://www.google.com/events/io/2009/sessions/GoogleWebToolkitBestPractices.html)

我在最新的 GWT 项目中一直遵循这种模式，并且效果非常好。添加、删除和交换视图非常容易。

# c# - 传递一个动作作为参考

> ID：13991815
> 
> 赞同：2
> 
> 时间：2012-12-21T14:21:14.120
> 
> 标签：c#, lambda

我试图在另一个动作中设置一个动作，但我传递给它的动作最终仍然为空。这是一个愚蠢的例子：

```
Action<Action<VerifylocalResult>> docollectprint = (vl) =>
{
    vl = (vlocres) => 
                    {
                        //DoStuff
                    };

    //This returns false, indicating the action has been set:
    Console.WriteLine((vl == null).ToString()); 
};

//Hookups
docollectprint(vlocobj.Action_NotExists);

//This returns true, so the action has not been set:
Console.WriteLine((vlocobj.Action_NotExists==null).ToString()); 
```

我已经尝试过传递一个getter方法而不是真正的交易，但结果是一样的..它最终仍然是空的。

```
Action<Func<Action<VerifylocalResult>>> docollectprint = (vl) =>
        {
            Action<VerifylocalResult> theaction = vl();
            theaction = (vlocres) => 
                {
                    //DoStuff
                };

            //This returns false, indicating the action has been set
            Console.WriteLine((theaction == null).ToString());
    };

//Hookups
docollectprint(() => { return vlocobj.Action_NotExists; });

    //This returns true, so the action has not been set
Console.WriteLine((vlocobj.Action_NotExists==null).ToString()); 
```

有没有办法做到这一点？另外，很抱歉，如果以前有人问过这个问题，但是当我搜索时，我发现的只是人们试图做的事情`Action<ref string x>`或类似的事情。

*更新（解决方案）：*

```
Func<string, Action<VerifylocalResult>> docollectprint = (msg) =>
            {
        Action<VerifylocalResult> vl = (vlocres) => 
        {
            /*DoStuff*/
        };
                    return vl;
            };

    //Hookups
    vlocobj.Action_NotExists = docollectprint("x"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:23:29.613

默认情况下，引用是按值传递的。这意味着对引用的任何更改都仅在本地范围内。您应该返回一些东西，而不是尝试更改传入的引用。来自 MSDN：

*   在引用它的委托超出范围之前，不会对捕获的变量进行垃圾收集。
*   在 lambda 表达式中引入的变量在外部方法中不可见。

*   lambda 表达式不能直接从封闭方法中捕获 ref [ByRef in VB] 或 out 参数。

*   lambda 表达式中的 return 语句不会导致封闭方法返回。

*   lambda 表达式不能包含 goto 语句、break 语句或 continue 语句，其目标位于主体之外或包含的匿名函数的主体中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T14:33:42.213

让我们摆脱所有的动作，用一个更普通的对象尝试同样的例子。您的代码基本上等同于：

```
Action<string> changeString = (s) =>
    {
        s = "result";
        Console.WriteLine(s);
    }; 
```

string myString = "someString" changeString(myString); //引用是按值传递的，不会起作用 changeString("someString"); //这应该怎么做？？？

但是，您可以只返回更改后的内容，或者在这种情况下，只返回该内容，因为您没有对传递的值做任何事情，如下所示：

```
Func<string> getString = () => return "result";

string myString = "someString";

myString = getString(); //works 
```

或者在你的情况下：

```
Func<Action<VerifylocalResult>> docollectprint = () =>
    {
        return (vlocres) => 
        {
            //DoStuff
        };
    };

vlocobj.Action_NotExists = docollectprint(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T14:33:15.583

要解决您的问题，您可以使用另一个代表。首先，声明它：

```
delegate void RefAction<T>(ref T reference); 
```

然后将您的方法更改为此。

```
RefAction<Action<string>> docollectprint = (ref Action<string> vl) =>
{
    vl = vlocres =>
    {
        //DoStuff
    };
    //Action has been set
    Console.WriteLine((vl == null).ToString());
};

Action<string> action = null;
docollectprint(ref action);
//Action is still set
Console.WriteLine((action == null).ToString()); 
```

`Func`当然，如果您出于任何原因不想使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T14:30:13.557

看来你想要一个`Func<Action<VerifyLocalResult>>`：

```
Func<Action<VerifylocalResult>> docollectprint = (vl) =>
{
    vl = (vlocres) => 
    {
        //DoStuff
    };
    return vl;
}; 
```

那么你可以做

```
vlocobj.Action_NotExists = docollectprint(); 
```

# java - Java、主要命令行参数和 Ant 构建文件

> ID：13991816
> 
> 赞同：-2
> 
> 时间：2012-12-21T14:21:18.473
> 
> 标签：java, ant

> **可能重复：**
> [使用 Ant 运行带有命令行参数的程序](https://stackoverflow.com/questions/3730880/use-ant-for-running-program-with-command-line-arguments)

我编写了一个 java 程序，它获取几个文件名作为命令行参数（输入到`String[] args`main 的数组中。现在我需要编写一个 Ant 构建文件。我该如何制作这个命令：

```
ant run SampleFile1.txt SampleFile2.txt ... 
```

获取这些论点并将它们传递给我的主要？

这是我的示例 Ant 文件：

```
<?xml version="1.0" ?>
<project name="MyProgram" default="main">

<property name="src.dir"     value="src"/>

<property name="build.dir"   value="build"/>
<property name="classes.dir" value="${build.dir}/classes"/>
<property name="jar.dir"     value="${build.dir}/jar"/>

<property name="main-class"  value="MyProgram.MainClass"/>

<target name="clean">
    <delete dir="${build.dir}"/>
 </target>

<target name="compile">
    <mkdir dir="${classes.dir}"/>
    <javac srcdir="${src.dir}" destdir="${classes.dir}"/>
</target>

   <target name="jar" depends="compile">
        <mkdir dir="${jar.dir}"/>
        <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
            <manifest>
                <attribute name="Main-Class" value="${main-class}"/>

            </manifest>

        </jar>
    </target>

    <target name="run" depends="jar">
        <java jar="${jar.dir}/${ant.project.name}.jar" fork="true">
//now when I run it here, I want it to get the arguments I input when I do ant run. for example: ant run file1.txt, file2.txt <- I want those to go to my String[] args of the main 
        </java>
    </target>

    <target name="clean-build" depends="clean,jar"/>

    <target name="main" depends="clean,run"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:50:31.013

以下是`<java>`任务的一些变化：

```
<target name="run" depends="jar">
    <java jar="${jar.dir}/${ant.project.name}.jar" fork="true">
        <arg value="${file1}"/>
        <arg value="${file2}"/>
    </java>
</target> 
```

`file1`现在，您有两个新参数：`file2`您可以像这样从命令行传递这些参数：

```
$ ant -Dfile1=foo.txt-Dfile2=bar.txt run 
```

Ant 获取一个目标列表，您正在执行 target *run*。`-D`参数是您传递给程序的属性。

我建议您将默认参数放在程序中，如下所示：

```
<target name="run" depends="jar">
    <property name="file1" value="bar.txt"/>
    <property name="file2" value="foo.txt"/>
    <java jar="${jar.dir}/${ant.project.name}.jar" fork="true">
        <args value="${file1}"/>
        <args value="${file2}"/>
    </java>
</target> 
```

这样，如果您不传递任何参数，它将使用您的默认参数`foo.txt`and `bar.txt`。请记住，使用参数在命令行上设置的属性会覆盖文件本身`-D`中设置的那些属性的值。`build.xml`一旦设置了属性，就永远无法更改。

# mysql - 如何在 SQL 字符串中添加“if 子句”？

> ID：13991817
> 
> 赞同：215
> 
> 时间：2012-12-21T14:21:20.807
> 
> 标签：mysql, sql

所以这就是我想要在我的*MySQL*数据库上做的事情。

我想要做：

```
SELECT *
    FROM itemsOrdered
    WHERE purchaseOrder_ID = '@purchaseOrdered_ID'
        AND status = 'PENDING' 
```

如果这不会返回任何行，这可以通过`if(dr.HasRows == false)`，我现在将`UPDATE`在`purchaseOrder`数据库中创建一个：

```
UPDATE purchaseOrder
    SET purchaseOrder_status = 'COMPLETED'
    WHERE purchaseOrder_ID = '@purchaseOrder_ID' 
```

我怎样才能使这个过程更短一点？

* * *

## 回答 #1

> 赞同：489
> 
> 时间：2012-12-21T14:23:30.693

对于您的特定查询，您可以执行以下操作：

```
UPDATE purchaseOrder
    SET purchaseOrder_status = 'COMPLETED'
    WHERE purchaseOrder_ID = '@purchaseOrder_ID' and
          not exists (SELECT *
                      FROM itemsOrdered WHERE purchaseOrder_ID = '@purchaseOrdered_ID' AND status = 'PENDING'
                     ) 
```

但是，我可能会猜测您正在循环更高级别。要设置所有此类值，请尝试以下操作：

```
UPDATE purchaseOrder
    SET purchaseOrder_status = 'COMPLETED'
    WHERE not exists (SELECT 1
                      FROM itemsOrdered
                      WHERE itemsOrdered.purchaseOrder_ID = purchaseOrder.purchaseOrdered_ID AND
                            status = 'PENDING'
                      limit 1
                     ) 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-12-21T14:25:08.523

您可以使用多表`UPDATE`语法来实现`ANTI-JOIN`between `purchaseOrder`and `itemsOrdered`：

```
UPDATE purchaseOrder p LEFT JOIN itemsOrdered i
    ON p.purchaseOrder_ID = i.purchaseOrder_ID
   AND i.status = 'PENDING'
SET    p.purchaseOrder_status = 'COMPLETED'
WHERE  p.purchaseOrder_ID = '@purchaseOrder_ID'
   AND i.purchaseOrder_ID IS NULL 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-12-21T15:00:39.823

由于 MySQL 不支持`if exists(*Your condition*) (*Write your query*)`，您可以通过这样编写来实现“if 子句”：

```
(*Write your insert or update query*) where not exists (*Your condition*) 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2015-03-17T14:37:37.867

您还可以使用以下查询来检查记录是否存在，然后对其进行更新：

```
if not exists(select top 1 fromFROM itemsOrdered
    WHERE purchaseOrder_ID = '@purchaseOrdered_ID'
        AND status = 'PENDING' )
Begin

UPDATE purchaseOrder 
    SET purchaseOrder_status = 'COMPLETED'
    WHERE purchaseOrder_ID = '@purchaseOrder_ID

End 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2014-11-27T12:54:32.533

```
Select FROM t1
    WHERE s11 > ANY
        (SELECT col1,col2 FROM t2
            WHERE NOT EXISTS
                (SELECT * FROM t3
                    WHERE ROW(5*t2.s1,77)=
                        (SELECT 50,11*s1 FROM t4 UNION SELECT 50,77 FROM
                            (SELECT * FROM t5) AS t5))); 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2015-11-04T12:30:36.207

```
if not exists(select top 1 fromFROM itemsOrdered
    WHERE purchaseOrder_ID = '@purchaseOrdered_ID'
        AND status = 'PENDING' )
Begin

UPDATE purchaseOrder 
    SET purchaseOrder_status = 'COMPLETED'
    WHERE purchaseOrder_ID = '@purchaseOrder_ID

End 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2016-12-08T06:42:33.487

sql server 2008 提供`Merge`基于单个匹配语句的插入、更新和删除操作后，也允许您加入。下面的示例示例可能会对您有所帮助。

```
MERGE Target AS T
USING Source AS S
ON (T.EmployeeID = S.EmployeeID) 
WHEN NOT MATCHED BY TARGET AND S.EmployeeName LIKE 'S%' 
    THEN INSERT(EmployeeID, EmployeeName) VALUES(S.EmployeeID, S.EmployeeName)
WHEN MATCHED 
    THEN UPDATE SET T.EmployeeName = S.EmployeeName
WHEN NOT MATCHED BY SOURCE AND T.EmployeeName LIKE 'S%'
    THEN DELETE 
OUTPUT $action, inserted.*, deleted.*; 
```

像这样，您可以在一个语句中插入、更新和删除。

有关更多信息，您可以参考 [https://technet.microsoft.com/en-us/library/bb522522(v=sql.105).aspx上的官方文档](https://technet.microsoft.com/en-us/library/bb522522(v=sql.105).aspx)

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2018-05-10T09:55:48.380

如果表包含数百万条记录，则以下查询将快速运行。

```
UPDATE PO
SET PO.purchaseOrder_status = 'COMPLETED'
FROM purchaseOrder PO
LEFT OUTER JOIN itemsOrdered IOD ON IOD.purchaseOrder_ID = PO.purchaseOrdered_ID and IOD.status = 'PENDING'
WHERE IOD.purchaseOrder_ID IS NULL 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-11-26T12:41:39.290

您可以声明一个变量来保存选择查询的返回结果数。如果此变量大于 0，则可以运行更新语句

```
 Declare @ResultCount int
    SELECT @ResultCount = count(*) FROM itemsOrdered WHERE purchaseOrder_ID = '@purchaseOrdered_ID' AND status = 'PENDING'        
    If @ResultCount > 0
UPDATE purchaseOrder SET purchaseOrder_status = 'COMPLETED' WHERE purchaseOrder_ID = '@purchaseOrder_ID' 
```

# ruby-on-rails - Ajax 不会每 3 秒正确重新加载一次。为什么？

> ID：13991819
> 
> 赞同：0
> 
> 时间：2012-12-21T14:21:25.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我试图让它重新加载显示每 3 秒未读消息数的部分。

但是，即使有 1 条未读消息，我编写的代码也根本不会显示数字……
如何重新加载显示正确数量的未读消息的部分内容？

我的代码是

## 资产/javascript/refresh_messages_count.js

```
$(document).ready(function () {
    // will call refreshPartial every 3 seconds
    setInterval(refreshPartial, 3000)
});

function refreshParital() {
  $.ajax({
    url: "messages/refresh_part";
  })
} 
```

## 消息控制器.rb

```
def refresh_part
    @message_count = current_user.mailbox.inbox(:read => false).count(:id, :distinct => true)
    # get whatever data you need to a variable named @data
    respond_to do |format|
        format.js {render :action=>"refresh_part.js"}
    end
end 
```

## 视图/布局/_menu.html.erb

```
<span id="message_received_count">
  <%= render :partial => "layouts/message_received_count" %>
</span> 
```

## 视图/布局/_message_received_count.html.erb

```
<% if user_signed_in? && current_user.mailbox.inbox(:read => false).count(:id, :distinct => true) > 0 %>
  <li><%= link_to sanitize('<i class="icon-envelope"></i> ') + "Received" + sanitize(' <span class="badge badge-info">'+@message_count.to_s+'</span>'), messages_received_path  %> 
  </li>
<% else %>
  <li><%= link_to sanitize('<i class="icon-envelope"></i> ') + "Received", messages_received_path  %>
  </li> 
```

## 视图/消息/refresh_part.js.erb

```
$('#message_received_count').html("#{escape_javascript(render 'layouts/messages_received_count', data: @message_count)}"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:31:22.220

将您的函数 refreshPartial 更改为以下内容：

```
function refreshPartial() {
  $.ajax({
    url: "/messages/refresh_part",
    type: "GET",
    dataType: "script",
    success: function(data) {
             console.log("Called refresh_part");
    },
    error: function (xhr, ajaxOptions, thrownError) {
      alert("Error: " + xhr.status + " " + thrownError);
    }
  });
} 
```

（`/`消息前面很重要，其他字段也很有用 - 一旦成功，您可以删除它的选项）。

并将控制器中的方法更改为：

```
def refresh_part
    @message_count = current_user.mailbox.inbox(:read => false).count(:id, :distinct => true)
    # get whatever data you need to a variable named @data
    respond_to do |format|
        format.js 
    end
end 
```

（移除`render`部件 - rails 知道如何自动执行此操作）。

*编辑*

经过讨论 - 最后一个要解决的问题与 JQuery 冲突有关 - JQuery 被包含在多个地方并阻止 $(document).ready 触发。固定的。

# design-patterns - TDD 是否以纯值对象和纯操纵器/控制器结束？

> ID：13991822
> 
> 赞同：4
> 
> 时间：2012-12-21T14:21:35.960
> 
> 标签：design-patterns, tdd

我越来越喜欢 TDD，在我看来，我所有的课程通常最终都是纯粹的数据持有者或纯粹的数据操纵者。这是TDD的预期结果吗？还是我采取了过于极端的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:40:44.367

TDD 确实意味着您将倾向于编写依赖较少的代码。这反过来又意味着类倾向于承担单一责任。正如您所描述的，这可能表现为拥有更简单的类。它不一定必须以这种方式结束，但通过无情地重构你可以解决这个问题。

# php - 显示按日期分组的数组元素

> ID：13991825
> 
> 赞同：0
> 
> 时间：2012-12-21T14:21:41.163
> 
> 标签：php

我有一个数组 $history：

```
Array (
Array ([id] => 1, [created] => 2012-12-20 22:40, [message] => 'Message1 to display here'),
Array ([id] => 2, [created] => 2012-12-20 22:40, [message] => 'Message2 to display here'),
Array ([id] => 3, [created] => 2012-12-20 22:40, [message] => 'Message3 to display here'),
Array ([id] => 4, [created] => 2012-12-20 21:30, [message] => 'Message4 to display here'),
Array ([id] => 5, [created] => 2012-12-20 21:30, [message] => 'Message5 to display here'),
Array ([id] => 6, [created] => 2012-12-20 20:20, [message] => 'Message6 to display here'),
); 
```

我想显示按日期 [创建] 字段分组的消息 [消息]。

喜欢

```
2012-12-20 22:40
======================
Message1
Message2
Message3

2012-12-20 21:30
======================
Message4
Message5 
```

我知道有一个函数 array_count_values() 可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:25:23.927

```
$arr_by_dates = array();
foreach($arr as $a){
    if (!isset($arr_by_dates[$a['created']])){
        $arr_by_dates[$a['created']] = array();
    }
    $arr_by_dates[$a['created']][] = $a['message'];
} 
```

如果要在每条记录上保存其他信息，可以使用数组而不是消息本身：

```
$arr_by_dates = array();
foreach($arr as $a){
    if (!isset($arr_by_dates[$a['created']])){
        $arr_by_dates[$a['created']] = array();
    }
    $arr_by_dates[$a['created']][] = $a;
    // or  = array('message'=>$a['message'], 'id'=>$a['id']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:27:30.967

希望这可以帮助：

```
$keys = array();
foreach ($arr as $item) 
{
    $keys[] = strtotime($item['created']);
}
sort($keys);
array_multisort($arr, $keys); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:28:56.163

您可以转换您的结构，然后逐步进行打印

```
$grouped = array();
foreach( $histories as $row ) {
  $date = $row['created'];
  if ( isset($grouped[$date]) ) {
    $grouped[$date][] = $row;
  }
  else {
    $grouped[$date] = array($row);
  }
} 
```

或者您可以随时打印，后者将取决于您按`created`日期排序的结果：

```
$last = $html = '';
foreach( $histories as $row ) {
  $date = $row['created'];
  if ( $last != $date ) {
    if ( $last ) $html .= '</div>';
    $html .= '<div>';
    $html .= '<h3>'.$date.'</h3>';
    $last = $date;
  }
  $html .= '<p>'.$row['message'].'</p>';
}
$html .= ($html?'</div>':''); 
```

# c++ - 将子进程输出重定向到 FIFO 不起作用

> ID：13991829
> 
> 赞同：0
> 
> 时间：2012-12-21T14:21:46.040
> 
> 标签：c++, ipc, fifo

我正在分叉一个进程并使用 execl 运行 mysqldump。我想将 mysqldump 的输出重定向到我创建的 FIFO。但是打开 fifo 失败了，所以 dup2()。

```
int main(int argc, char** argv) {
    int i;
    char *fifoname="/home/maverick/myfifo";
    mkfifo(fifoname,0666);

    int forkret=fork();
    if(forkret==0){
        setuid(getpwnam("mysql")->pw_uid);
        cout<<"In child....Running as :"<<(int)getuid()<<endl;
        sleep(2);
        int fdw=open(fifoname,O_WRONLY);

         if ((dup2(fdw, STDOUT_FILENO)) != STDOUT_FILENO)
             cout<<"Error redirecting output of mysqldump ";
         if (dup2(fdw, STDERR_FILENO) != STDERR_FILENO)
             cout<<"Error redirecting error stream of mysqldump";
        execl("mysqldump","-u","root","-proot","--all-databases");
       }
    else{
        char buf[20];

     int fdr=open(fifoname,O_RDONLY);
     while(read(fdr,(char*)buf,sizeof(buf))!=0){
         cout<<buf;
     }

    }
    return 0;
} 
```

open () 调用失败..我不明白这里出了什么问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:46:53.947

您正在创建 fifo，只允许访问拥有它的用户和组，然后使用`setuid`来更改用户。据推测，新用户没有访问该文件的权限。

您需要在调用*之前*`setuid`打开文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T12:52:45.877

我使用两个不同的文件而不是 dup2。在第一个文件中，我打开以写入父级并读取子级。第二个我打开儿子的写作和父亲的阅读。

在这个问题中，我展示了一些我的做法

[FIFO - 在 C++ 中恢复通信](https://stackoverflow.com/questions/40676486/fifo-restore-communication-in-c)

# c# - 在 foreach 中创建对象以推送到 C# 中的数组

> ID：13991833
> 
> 赞同：1
> 
> 时间：2012-12-21T14:22:03.370
> 
> 标签：c#, arrays, api, xserver

我想要实现的是将字符串拆分为多个地址，例如“NL，VENLO，5928PN”，getLocation 将返回“POINT（xy）”字符串值。

这行得通。接下来我需要为每个位置创建一个 WayPointDesc 对象。并且这些对象中的每一个都必须被推入 WayPointDesc[]。我尝试了各种方法，但到目前为止我找不到可行的选择。我最后的手段是硬编码最大数量的航路点，但我宁愿避免这样的事情。

不幸的是，使用列表不是一种选择......我认为。

这是功能：

```
 /* tour()
     * Input: string route
     * Output: string[] [0] DISTANCE [1] TIME [2] MAP
     * Edited 21/12/12 - Davide Nguyen
     */
    public string[] tour(string route)
    {
        // EXAMPLE INPUT FROM QUERY
        route = "NL,HELMOND,5709EM+NL,BREDA,8249EN+NL,VENLO,5928PN"; 
        string[] waypoints = route.Split('+');

        // Do something completly incomprehensible
        foreach (string point in waypoints)
        {
            xRoute.WaypointDesc wpdStart = new xRoute.WaypointDesc();
            wpdStart.wrappedCoords = new xRoute.Point[] { new xRoute.Point() };
            wpdStart.wrappedCoords[0].wkt = getLocation(point);
        }

        // Put the strange result in here somehow
        xRoute.WaypointDesc[] waypointDesc = new xRoute.WaypointDesc[] { wpdStart };

        // Calculate the route information
        xRoute.Route route = calculateRoute(waypointDesc);
        // Generate the map, travel distance and travel time using the route information
        string[] result = createMap(route);
        // Return the result
        return result;

        //WEEKEND?
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:29:47.047

数组是固定长度的，如果要动态添加元素，需要使用某种类型的链表结构。此外，当您最初添加它时，您的 wpdStart 变量超出了范围。

```
 List<xRoute.WaypointDesc> waypointDesc = new List<xRoute.WaypointDesc>();

    // Do something completly incomprehensible
    foreach (string point in waypoints)
    {
        xRoute.WaypointDesc wpdStart = new xRoute.WaypointDesc();
        wpdStart.wrappedCoords = new xRoute.Point[] { new xRoute.Point() };
        wpdStart.wrappedCoords[0].wkt = getLocation(point);

        // Put the strange result in here somehow
        waypointDesc.add(wpdStart);
    } 
```

如果您以后真的希望列表作为数组，请使用：`waypointDesc.ToArray()`

# zsh - Zsh Mac OSx Mountain Lion vim 提示符

> ID：13991837
> 
> 赞同：0
> 
> 时间：2012-12-21T14:22:15.703
> 
> 标签：zsh, zshrc

我想知道是否有人能够使用最新版本的 Mac OSx Mountain Lion 使 vim 提示正常工作。我可以在命令行上以 vim 模式进行编辑，但我之前使用 zsh 看到你可以进入启动 vim 编辑器的 Vim 模式，你可以在那里编写命令，然后编写并退出，它会将其添加到终端的下一行。可能有一个插件可以做到这一点我不确定？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:46:37.163

这个答案发布在这里： [https ://stackoverflow.com/a/903973/1031826](https://stackoverflow.com/a/903973/1031826)

基本上，如果您使用 vi 模式，您可以在 .zshrc 中添加以下行：

```
autoload -U edit-command-line
zle -N edit-command-line
bindkey -M vicmd v edit-command-line 
```

您可以按 ESC-V 在默认编辑器中编辑当前行。

如果要更改使用的键绑定，可以调整最后一行（“bindkey...”）。

# android - 在适配器之外更改 gridVIew 的 imageView

> ID：13991843
> 
> 赞同：0
> 
> 时间：2012-12-21T14:23:00.790
> 
> 标签：android, gridview, adapter

我该怎么做？这是 GridView 适配器中的方法

```
 public static void changeView(Bitmap bmp, int pos){

   GridView gridView = new GridView(mContext);

    ImageView view = (ImageView) gridView.getChildAt(pos);
    if (view == null)
    Log.e("ImageAdapter Error", "ImageView is null");
    } 
```

这是一个 getView 方法

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {

    ImageView imageView;
    if (convertView == null) {  
    //  imageView = Inflater.inflate(R.layout.image_layout, null);
        imageView = new ImageView(mContext);
        if (DefinedValues.width/3 < DefinedValues.height/4)
        imageView.setLayoutParams(new GridView.LayoutParams
                (DefinedValues.height/4, DefinedValues.height/4));
        else
            imageView.setLayoutParams(new GridView.LayoutParams
                    (DefinedValues.width/3-5, DefinedValues.width/3-5));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }
    imageView.setImageResource(R.drawable.test3);

    return imageView;
} 
```

imageView 每次都是空的。并且可以在静态类中设置 Context 对象 mContext 吗？

这是一个将适配器附加到 gridView 的片段类

```
 public class fragment1 extends Fragment {

/* (non-Javadoc)
 * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)
 */
GridView gridView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        //
        Bundle savedInstanceState) {

    if (container == null) {
        Log.e("Null container", "Null");
        return null;
    }
    Log.e("fragment1", "fragment1 reached!");
    View view =  inflater.inflate(R.layout.menu1_fragment, container, false);
    gridView = (GridView)view.findViewById(R.id.gridview1);

    gridView.setAdapter(new ImageAdapter(this.getActivity()));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            ImageView imageView = new ImageView(getActivity());
            LinearLayout.LayoutParams vp = new LinearLayout.LayoutParams
                    (LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
            imageView.setLayoutParams(vp);

            imageView.setImageBitmap(DefinedValues.imageContainer.get(position).getThumbnail());
            getActivity().addContentView(imageView, vp);
        }

    });

    return gridView;
}
    } 
```

MyImage 类：public void downloadThumbnail(){

```
 DefinedValues.thumbnail.put("activity", DefinedValues.images);
    DefinedValues.thumbnail.put("type", "thumbnail");
    DefinedValues.thumbnail.put("name", this.name);
    DefinedValues.thumbnail.put("width", DefinedValues.width + "");

    //Creates request to server
    String req = Json.stringToJson(DefinedValues.thumbnail);
    Log.d(TAG, "downloadImage() called. Request to server: " + req);
    DefinedValues.thumbnail.clear();
    thumb = new ImageDownloader();
    thumb.setListener(MyImage.this);
    thumb.execute(req);

    Log.d(TAG, "downloaded thumbnail nr." + imageCount);

}

public void returnImage(Bitmap res) {
    Log.d(TAG, "Setting up thumbnail...");
    this.setThumbnail(res);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:45:39.830

在您的适配器中创建一个集合以保存您需要应用的图像。当需要更改特定`getView`行的图像时，在相应集合中更改图像：

```
private Bitmap[] imgCollection;

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ImageView imageView;
    if (convertView == null) {  
        //  imageView = Inflater.inflate(R.layout.image_layout, null);
        imageView = new ImageView(mContext);
        if (DefinedValues.width/3 < DefinedValues.height/4)
            imageView.setLayoutParams(new GridView.LayoutParams
                    (DefinedValues.height/4, DefinedValues.height/4));
        else
            imageView.setLayoutParams(new GridView.LayoutParams
                    (DefinedValues.width/3-5, DefinedValues.width/3-5));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }
    imageView.setImageBitmap(imgCollection[position]); // <-- changed 
    return imageView;
}

public void changeImageBitmap (Bitmap bmp, int pos) {
    imgCollection[pos] = bmp;
    notifyDataSetChanged(); // refresh the listview
} 
```

此外，如果您不愿意将冗余位图放入集合中，只是为了将它们作为默认值加载，您可以使用以下方法进行管理`getView`：

```
 if (imgCollection[position] == null) {
        imageView.setImageResource(R.drawable.test3);
    } else {
        imageView.setImageBitmap(imgCollection[position]); // <-- changed           
    } 
```

* * *

> 可以在静态类中设置 Context 对象 mContext 吗？

不，绝对不是。永远不需要这样做。如果上下文是静态的，它可能会阻止您的活动或其中的任何内容被垃圾收集。您的应用程序最终可能会因缺乏资源而崩溃。

# excel - 使用 X++ 在 Excel 中创建多个工作表

> ID：13991845
> 
> 赞同：1
> 
> 时间：2012-12-21T14:23:04.860
> 
> 标签：excel, export-to-excel, x++, axapta

我目前能够创建一个新的 Excel 电子表格，写入它并通过 X++ 保存电子表格。

我在一个新类中有几个方法，每个方法都打算写入工作簿中的单独工作表。

第一种方法创建电子表格，写入数据，保存电子表格，然后退出 Excel 就好了。但在下一个方法中，我尝试打开保存的电子表格，写入另一个工作表（选项卡），再次**保存**，然后退出 Excel。

第二种方法会导致以下错误。**类“_Workbook ”**的 COM 对象中的方法“ saveAs”返回错误代码 0x800A03EC ()，这意味着：您不能将此工作簿与另一个打开的工作簿或加载项同名保存。选择其他名称，或在保存前关闭其他工作簿或加载项。

是否可以在 X++ 中的一个 Excel 工作簿中创建和保存多个 Excel 工作表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:18:42.647

再次感谢 Jan 的回复

在查看了**SysDataExcelCOM**类之后，有一个**CreateWorkbook**方法可以为 Excel 数据定义导出创建额外的工作表。在创建了一个新的类似类方法并为 Excel 工作表声明了我自己的一组定义名称 (#define.ExampleExcelWorksheetName('abcSheet') 之后，我就能够创建具有多个工作表的 Excel 工作簿。然后保存 (SysExcelWorkbook.saveAs ) 在首先创建所有必要的工作表之后，而不是打开保存的工作簿，然后为每个新的类方法添加工作表。

在打算将数据写入工作表的其他类方法中，我打开了由类似于 CreateWorkbook (sysExcelWorkbooks.open(yourExcelFile) 的新方法创建的工作簿，然后使用 (sysExcelWorksheet.itemByName) 引用每个工作表来写入数据到特定的工作表，然后保存。

```
excelApplication    = SysExcelApplication::construct();
excelWorkbooks      = excelApplication.workbooks();
excelWorkbooks.open(fileNameSave);
excelWorkbook       = excelWorkbooks.item(1);

//Add styles and fonts
excelStyles = excelWorkbook.styles();
excelStyle  = excelStyles.add("Header");
excelFont   = excelStyle.font();
excelFont.bold(true);

excelWorksheets     = excelWorkbook.worksheets();
excelWorksheet      = excelWorksheets.itemFromName(#declared name of your worksheet);

// Begin Header Row
excelWorksheet.cells().item(1,1).value("value of your choice");
excelWorksheet.cells().item(1,2).value("value of your choice");
excelWorksheet.rows().item(1).style("Header");

excelWorksheet.name("Rename your declared worksheet name or use current name here");
excelCells          = excelWorksheet.cells();
excelCells.range('A:B').numberFormat('@');

//Find you data to write to Excel Worksheet here

excelWorksheet.columns().autoFit();
excelApplication.displayAlerts(false);
excelWorkbook.saveAs(fileNameSave);
excelWorkbook.comObject().save();
excelWorkbook.saved(true);
excelApplication.quit(); 
```

走这条路对我来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:53:47.903

这可能不是您问题的直接答案，但可能会给您提供创建 Excel 文件的另一个视角。

我倾向于使用 XML 和 XSLT 创建 Excel 文件。您可以轻松地在 Excel 中创建您想要的内容，然后将 Excel 文件保存为 XML，然后您可以应用一些 XSLT，从另一个 XML 文件中读取数据并将其放入您想要的 Excel 文件中。

您可以在我的博客上找到有关此主题的帖子：[使用 C#、XML 和 XSLT 创建 Excel 文件](http://www.ksaelen.be/wordpresses/dynamicsaxblog/2009/08/using-c-xml-xslt-to-create-excel-spreadsheet/)

在那里，我创建了一个包含 Items 的 XML 文件并将其转换为 Excel 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T07:11:53.020

检查 Excel COM 服务的身份。看看[别人](http://www.hagrin.com/319/exception-hresult-0x800a03ec-excel-net-sql-and-windows-server-2008)做[了什么](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/3ecbc477-a5d9-4033-887b-3e7dbaf2b7cb/)。

# common-lisp - 在 Common Lisp 中如何确定系统包含的包

> ID：13991848
> 
> 赞同：1
> 
> 时间：2012-12-21T14:23:14.410
> 
> 标签：common-lisp, packages, quicklisp

每次我通过 Quicklisp 安装系统时，我总是发现自己在搜索基本包的名称，普通用户会对此感兴趣，因为它导出了要使用的“最终产品”API。因此任何人都需要知道它的名字并在 REPL 上发出命令：

```
(use-package :package) 
```

为了在 REPL 上玩它。

有没有一种快速简便的方法来确定由 Quicklisp 加载的系统所包含的包，而无需搜索过时的文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T15:23:15.243

您可以列出所有带有`LIST-ALL-PACKAGES`.

如果您在加载软件之前和之后保留它们，您可以比较它们。

```
CL-USER 14 > (setf *print-length* 10)
10

CL-USER 15 > (list-all-packages)
(#<The SQL-COMMON package, 0/4 internal, 28/32 external> #<The QL-LISPWORKS package, 0/16 internal, 5/16 external> #<The QL-SETUP package, 25/32 internal, 3/16 external> #<The QL-ALLEGRO package, 0/16 internal, 6/16 external> #<The QL-DIST package, 110/256 internal, 81/256 external> #<The COMM package, 1053/4096 internal, 949/1024 external> #<The MP package, 921/1024 internal, 209/256 external> #<The REG package, 41/64 internal, 0/4 external> #<The LOOP package, 247/256 internal, 3/4 external> #<The QL-DIST-USER package, 0/16 internal, 0/16 external> ...)

CL-USER 16 > (defpackage "FOO")
#<The FOO package, 0/16 internal, 0/16 external>

CL-USER 17 > (list-all-packages)
(#<The SQL-COMMON package, 0/4 internal, 28/32 external> #<The QL-LISPWORKS package, 0/16 internal, 5/16 external> #<The QL-SETUP package, 25/32 internal, 3/16 external> #<The QL-ALLEGRO package, 0/16 internal, 6/16 external> #<The QL-DIST package, 110/256 internal, 81/256 external> #<The COMM package, 1053/4096 internal, 949/1024 external> #<The MP package, 921/1024 internal, 209/256 external> #<The REG package, 41/64 internal, 0/4 external> #<The LOOP package, 247/256 internal, 3/4 external> #<The QL-DIST-USER package, 0/16 internal, 0/16 external> ...)

CL-USER 18 > (set-difference * ***)
(#<The FOO package, 0/16 internal, 0/16 external>) 
```

所以你发现在两个包列表之间，`FOO`引入了一个包。

另请注意，这`USE-PACKAGE`不一定是有用的东西。`USE-PACKAGE`将导出的符号导入您当前的包中。这可能会也可能不会。它可能导致任意符号名称冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T14:50:54.087

不，没有。通常，如果不阅读项目文档以了解如何使用它，就无法加载项目。

不幸的是，有时唯一的文档就是代码本身。Slime 有助于探索代码，`M-.`但你必须知道从哪里开始。

# java - OSGi：在两个不同的捆绑包中具有相同的包路径

> ID：13991860
> 
> 赞同：4
> 
> 时间：2012-12-21T14:23:47.710
> 
> 标签：java, osgi, bundle, apache-felix

我有一个`bundle1`具有以下软件包的：

```
com.anderson.servlet.osgi (exported) 
com.anderson.servlet
com.anderson.util (exported) 
```

第二个，`bundle2`看起来像这样：

```
com.anderson.jetty
com.anderson.servlet.osgi 
```

我也`com.anderson.servlet.osgi`从`bundle1`.

是否可以合并两个包`bundle2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T20:57:18.483

不可以。如果您导入一个包，它优先于与您的包中可能碰巧拥有的同名的私有包。

为什么不直接重命名 bundle2 中的私有包呢？

# php - php 上传无法识别 .flv 和 f4v 扩展名

> ID：13991863
> 
> 赞同：5
> 
> 时间：2012-12-21T14:24:07.573
> 
> 标签：php, flash, file-extension

我有一个上传视频的页面，我希望文件类型是 mp4 flash 和 webm 文件。所有 mp4 扩展文件和 webm 文件都可以正常工作，但无法识别 flash 文件（.flv 和 .f4v），因此 php 返回值“application/octet-stream”，我认为这是任何文件的默认 MIME t 认可。有没有比这段代码更好的方法来分别识别真正的 MIMES（video/x-flv 和 video/x-f4v）的 flash 文件？

```
$type   = $_FILES["uploaded"]["type"];
$allowedTypes  = ["video/mp4","video/quicktime","video/x-flv","video/x- f4v",  
                 "video/webm"];
$isRefusedType = !in_array($type, $allowedTypes);

if ($isRefusedType)
 {
   $message="not an accepted file type";
 }
    else $message="OK"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:35:44.040

也许你可以试试这段代码：

```
<?php
    $finfo = finfo_open(FILEINFO_MIME_TYPE); // mimetype
    $type  = finfo_file($finfo, $filename);
    finfo_close($finfo);
?> 
```

[如此处](http://php.net/manual/en/function.finfo-file.php)所述，您将需要 PHP >= 5.3.0，这是一个问题吗？

**另一个想法**可能是检查数据签名（见[那里](https://en.wikipedia.org/wiki/Flash_Video#Header)）：

```
<?php
    $s = file_get_contents($_FILES["uploaded"]["tmp_name"]);
    if ( substr($s,0,3) == 'FLV' ) { /* It's good! */ } 
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T14:45:05.977

查看 php 文档中 $_FILES['userfile']['type'] 的描述，我们可以看到：

> 文件的 MIME 类型（如果浏览器提供此信息）。一个例子是“image/gif”。然而，这种 mime 类型在 PHP 端没有被检查，因此不要认为它的价值是理所当然的。

因此，Tiger-222 选项似乎是您获得真正价值的最佳机会：

```
<?php
    $finfo = finfo_open();
    $fileinfo = finfo_file($finfo, $file, FILEINFO_MIME);
    finfo_close($finfo);
?> 
```

# python - 将包含变音符号的数据导出为 Excel 可读的 .csv

> ID：13991864
> 
> 赞同：2
> 
> 时间：2012-12-21T14:24:07.797
> 
> 标签：python, excel, csv, encoding, utf-8

我在*Mac OS X 10.8.2*上使用*Python 2.7.2*。**我需要编写一个 .csv 文件，该文件通常包含几个“元音变音”，如 ä、ö 和 ü。**当我编写 .csv 文件时，Numbers 和 Open Office 都能够正确读取 csv 并且还可以毫无问题地显示变音符号。

 ***但如果我用 Microsoft Excel 2004 阅读它，文字会显示如下：

```
TuÃàrlersee 
```

我知道，Excel 在处理 UTF-8 时存在问题。我读到 2007 以下的 Excel 版本无法正确读取 UTF-8 文件，即使您设置了 UTF-8 BOM（字节顺序标记）。我正在使用以下行设置 UTF-8 BOM：

```
e.write(codecs.BOM_UTF8) 
```

所以我下一步尝试的不是将它导出为 UTF-8 文件，而是我想将字符编码设置为 mac-roman。通过以下行，我从 utf-8 解码了值，并使用 mac-roman 对其进行了重新编码。

```
projectName = projectDict['ProjectName'].decode('utf-8').encode('mac-roman') 
```

但后来我收到以下错误：

```
UnicodeEncodeError: 'charmap' codec can't encode character u'\u0308' in position 6: character maps to <undefined> 
```

**如何将这些数据导出到 Excel 能够正确读取元音变音的 .csv 文件中？**Python 在内部以 UTF-8 处理所有内容。或者我可能没有正确理解解码/编码。在 Python 3.0 中，他们已经适应了整个编码/解码模型，但我需要保持在 2.7.2 版本。

我正在使用这样的 DictWriter：

```
w = csv.DictWriter(e, fieldnames=fieldnames, extrasaction='ignore', delimiter=';', quotechar='\"', quoting=csv.QUOTE_NONNUMERIC)
w.writeheader() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T14:31:18.940

是`\u0308`组合分音符；在解码为 mac-roman 之前，您需要[标准化您的 unicode 字符串：](http://docs.python.org/2/library/unicodedata.html#unicodedata.normalize)

```
import unicodedata

unicodedata.normalize('NFC', projectDict['ProjectName'].decode('utf-8')).encode('mac-roman') 
```

演示，将`ä`非规范化形式的字符（`a`加上组合分音符号）在规范化为组合字符后编码为 mac-roman：

```
>>> unicodedata.normalize('NFC', u'a\u0308').encode('mac-roman')
'\x8a' 
```

我过去曾使用此技术为特定客户端生成 Excel 的 CSV，这些客户端的平台编码是预先知道的（Excel 将解释当前 Windows 编码中的文件，IIRC）。在那种情况下，我编码为`windows-1252`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:30:46.490

CSV 文件实际上只是 ASCII 格式 - 如果您正在做的只是写出数据以便稍后导入 Excel，那么我会将其写为 Excel 工作簿开始，这样可以避免为此烦恼种东西。

检查模块的[http://www.python-excel.org/](http://www.python-excel.org/)`xlwt`。***

# facebook - 通过 Facebook 的图形 API 作为 Facebook 应用程序创建“秘密”事件

> ID：13991867
> 
> 赞同：3
> 
> 时间：2012-12-21T14:24:09.600
> 
> 标签：facebook, facebook-graph-api, facebook-apps

我能够使用这个 POST 请求通过**我的 Facebook 应用程序中的图形 api 创建 facebook 事件：**

```
POST https://graph.facebook.com/<MY_APP_ID>/events?
      start_time=2013-12-21T19%3A30%3A00
     &end_time=2013-1221T20%3A30%3A00
     &name=test+event
     &access_token=<MY_APP_ACCESS_TOKEN> 
```

响应是 JSON，带有新创建事件的 id。

在此之后，我尝试创建另一个具有“秘密”隐私的事件：

```
POST https://graph.facebook.com/<MY_APP_ID>/events?
      start_time=2013-12-21T19%3A30%3A00
     &end_time=2013-1221T20%3A30%3A00
     &name=test+secret+event
     &privacy_type=SECRET
     &access_token=<MY_APP_ACCESS_TOKEN> 
```

这里的响应也是一个带有创建事件 id 的 JSON。

之后，我尝试列出我的应用程序的事件：

```
 GET https://graph.facebook.com/<MY_APP_ID>/events/?access_token=<MY_APP_ACCESS_TOKEN> 
```

在响应 JSON 中，我只能看到一个非秘密事件。那个秘密不见了。

在此之后，我试图一一获取事件的详细信息：

```
 GET https://graph.facebook.com/<EVENT_ID>/?access_token=<MY_APP_ACCESS_TOKEN> 
```

在使用非秘密事件的 id 的情况下，响应包含该事件的所有详细信息，但是当我使用秘密事件的 id 时，它会以错误消息响应：

```
{
  "error": {
    "message": "Unsupported get request.", 
    "type": "GraphMethodException", 
    "code": 100
  }
} 
```

为什么我无法使用我的应用创建秘密（仅限邀请）事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:33:03.203

根据 Graph API[事件](https://developers.facebook.com/docs/reference/api/event/)页面，可以通过 Graph API 为三种对象类型创建事件：用户、页面和应用程序：

> User、Page 和 Application 对象具有事件连接。

但是，Graph API 事件页面仅提供有关如何创建事件的用户和页面部分的链接（请参阅图 API 事件页面，创建事件部分）。没有进一步提到应用程序事件，[应用程序](https://developers.facebook.com/docs/reference/api/application/)部分也没有提到事件连接。

在两种链接到的事件类型中，*仅支持用户*`privacy_type`使用参数创建事件，而不支持页面：

 *创建用户事件支持的参数

> 名称、开始时间、结束时间、描述、位置、位置 ID、隐私**类型**

资料来源：[Facebook Developers 上的用户图 API 详细信息](https://developers.facebook.com/docs/reference/api/user/#events)

创建页面事件支持的参数：

> 名称、开始时间、结束时间、描述、位置、位置 ID

来源：[Facebook Developers 上的 Page Graph API 详细信息](https://developers.facebook.com/docs/reference/api/page/#events)

所以我的猜测是应用程序遵循页面事件连接参数，但这没有正确记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T22:19:33.440

If you created it as `SECRET`, you won't be able to retrieve that event using the app access token, because your app is not a user, and cannot see the event.

It's only visible to the user who created it and the other attendees - the user's access token should return the event, because the user access token acts with the same permissions as the user, and if they're marked as attending the event, they can see it

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:46:48.423

我想，您应该使用以下方法之一：

```
GET /EVENT_ID/invited/USER_ID
GET /EVENT_ID/attending/USER_ID
GET /EVENT_ID/maybe/USER_ID
GET /EVENT_ID/noreply/USER_ID
GET /EVENT_ID/declined/USER_ID 
```

或者看看这个：

[http://developers.facebook.com/docs/reference/api/event/](http://developers.facebook.com/docs/reference/api/event/)*

# python - 为用于谷歌应用引擎中多对多关系的链接模型创建什么类文件

> ID：13991871
> 
> 赞同：0
> 
> 时间：2012-12-21T14:24:13.957
> 
> 标签：python, google-app-engine

我有 2 个模型：a 和 b

我想建立一个多对多关系，我将使用链接模型方法，因此我需要创建一个 a_to_b_membership 模型。

问题是：

我应该把模型类放在模型文件上吗？b模型文件？或者创建一个新的模型文件？

如果我需要创建一个新的模型文件，那么我应该如何命名呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:40:01.870

这完全没有区别。

但是，首先，您应该意识到没有必要为每个模型创建一个单独的文件。在一个 models.py 文件中包含多个模型类是完全正常的。这种划分是在不同的应用程序之间进行的，每个应用程序都将相关模型组合在一起。

其次，您还应该意识到，除非您特别需要在多对多关系上添加额外数据，否则您不需要创建链接表。一旦你定义了一个 ManyToManyField，Django 就会为你解决这个问题。

# highcharts - Highcharts：确保 y 轴 0 值位于图表底部

> ID：13991873
> 
> 赞同：31
> 
> 时间：2012-12-21T14:24:22.130
> 
> 标签：highcharts

我在页面上输出一系列的高图。在某些情况下，指定时间段的所有数据可能会返回 0 值。

在这种情况下，图表如下所示：http: [//jsfiddle.net/charliegriefer/KM2Jx/1/](http://jsfiddle.net/charliegriefer/KM2Jx/1/)

只有 1 个 y 轴标签，0，它位于图表的中间。

我想强制 y 轴的 0 值位于图表的底部，这与页面上确实有数据的其他图表一致。

尝试过各种 yAxis 属性，例如“min: 0”、“minPadding: 0”、“maxPadding: 0”、“startOnTick: true”。

似乎它应该很简单，但我很茫然:(

相关yAxis代码：

```
yAxis: {
    min: 0, 
    minPadding: 0, 
    startOnTick: true, 
    title: {
        text: ""
    }
}, 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-04-23T11:51:53.353

我找到了另一个（而且非常简单）的解决方案：

您可以设置 y 轴`minRange`属性：

```
yAxis: {
    ...
    minRange : 0.1
} 
```

这使得 Highcharts 在所有数据为 0 时呈现 yAxis 最小值和最大值。

更新：

Highcharts 4.1.9 修复还需要：

```
 plotOptions: {
            line: {
                softThreshold: false
            }
        } 
```

[更新的 js 小提琴](http://jsfiddle.net/ynWLK/27/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-21T16:51:35.403

我能让它“正确”显示它的唯一方法是同时提供一个 yAxis`max`值。当您不提供具有 y 值的数据元素时，我认为这是一个 HighCharts 问题。它绘制了它认为可以的最佳图表。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-21T17:36:41.917

我也将此发布到 HighCharts 论坛，在那里我得到了似乎有效的回复。不幸的是，这将涉及我在渲染图表之前对数据进行一些预处理，以检查所有“0”数据值......但它会起作用。只是希望 HighCharts 有更多“内置”的东西。

所以在总结“y”值之后，如果我得到 0，y 轴属性应该如下所示：

```
yAxis: {
    minPadding: 0, 
    maxPadding: 0,         
    min: 0, 
    max:1,
    showLastLabel:false,
    tickInterval:1,
    title: {
            text: ""
    }
} 
```

见：http: [//jsfiddle.net/KM2Jx/2/](http://jsfiddle.net/KM2Jx/2/)

键似乎是“max”和“showLastLabel”属性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-28T14:52:28.963

这是我想出的一个修复程序，它不需要对数据进行任何预处理，只需让 highcharts 完成它，就像在更新之前一样。[http://jsfiddle.net/QEK3x/](http://jsfiddle.net/QEK3x/)

```
if(chart.yAxis[0].dataMax === 0)
{
   chart.yAxis[0].setExtremes(0, 5);
} 
```

您只需要检查第一个系列轴，如果第一个不为0，则不会出现问题。我可能会为此向高级图表提交拉取请求，尽管我觉得他们出于某种原因打算使用此功能。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-01T10:33:34.140

从 Highcharts 5.0.1 开始，你也可以使用 softMax。

> **softMax: Number**
> 轴的软最大值。如果系列数据最大值大于此值，则轴将保持在此最大值，但如果系列数据最大值较高，则轴将弯曲以显示所有数据。

```
yAxis: {
    min: 0,
    softMax: 100,
    ...
} 
```

这是一个带有柱形图的示例：http: [//jsfiddle.net/84LLsepj/](http://jsfiddle.net/84LLsepj/)

请注意，目前在 Highcharts 5.0.7 中，它似乎不适用于所有类型的图表。正如您在[其他 jsfiddle](http://jsfiddle.net/th1e6tfm/)中看到的那样，它不适用于折线图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-02T09:06:50.777

只需添加“min”选项

```
yAxis: {
   min: 0
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-20T13:54:07.923

对于 Highcharts 5.xx，您应该能够指定：

```
yAxis: {
  softMin: 0,
  softMax: 1,
}; 
```

这不适用于折线图，它要求您还设置`minRange`与上述相同的配置对象。尝试不同的值，因为定义 example `minRange: 6`，在 yAxis 上创建了一个介于 0 和 4 之间的范围。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-16T09:12:08.820

minRange : 1 或任何你觉得以
softMax 的分数显示的值：100 或任何你觉得

[![结果](../Images/bf8feb829581d7ed83b8602e921b487e.png)](https://i.stack.imgur.com/YjQ4m.jpg)

```
yAxis: {
         minRange : 1,
         softMax: 100
       } 
```

# visual-studio - 如何配置 Visual Studio 2012 不使用箭头键？

> ID：13991876
> 
> 赞同：2
> 
> 时间：2012-12-21T14:24:30.817
> 
> 标签：visual-studio

我想使用没有箭头键的快乐黑客键盘。但我不确定是否能够将 Visual Studio 键重新定义为箭头键以外的其他键。

VS 也使用传统的 Ctrl+HJKL 键来完成其他一些重要任务。

什么是停止在 VS 快捷方式中使用箭头键的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:52:26.067

我个人喜欢[VsVim](http://visualstudiogallery.msdn.microsoft.com/59ca71b3-a4a3-46ca-8fe1-0e90e3f79329)。将编辑器更改为与 Vim 非常相似，因此`hjkl`请替换您的箭头键。与许多其他插件配合良好，通常非常稳定，并且经常更新（与 ViEmu 类似的插件很不一样）。

如果您不想使用插件，您可以尝试重新映射所有箭头键，但我不确定 VS 是否提供重新映射编辑器命令的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:34:10.457

使用（工具）（选项）（键盘）下的内置功能

# php - 防止滥用邀请系统

> ID：13991881
> 
> 赞同：5
> 
> 时间：2012-12-21T14:24:50.063
> 
> 标签：php, zend-framework, security, spam-prevention, invite

最近我帮助一些朋友在他们的网站上发布了一个邀请系统，它的工作原理是这样的：用户创建一个帐户，我们发送一封验证电子邮件，当他验证电子邮件时，他会获得一个免费积分，可以在网站上消费。除此之外，他还拥有可以在社交网络上或通过电子邮件分享的个性化链接，当人们使用此链接注册时（再次通过电子邮件验证帐户），他每次邀请都会获得一个积分。很像 thefancy.com 上的邀请系统或网络上任何其他奖励驱动的邀请系统。

最近，我们看到可能是自动化的虚假用户帐户的比率上升。注册页面上有一个验证码，但我们知道这可以被绕过。我们还看到，用户创建一次性电子邮件地址以在特定邀请链接后创建帐户的比例有所提高，从而归功于一位合法用户，该用户随后使用了他获得的免费积分。

我正在寻找一种自动化的方法来防止这种滥用。我目前正在研究对来自同一 IP 地址的邀请/注册设置速率限制，但该系统本身有其自身的缺陷。

还有其他经过生产测试的想法吗？

谢谢

**编辑：** 我还建议通过短信进行 2 因素注册，但由于预算不足而被拒绝。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:40:04.383

我以前使用过的一个非常简单的方法是在注册表中添加一个使用 CSS 隐藏的附加输入（即具有显示：无）。大多数表单机器人会填写此字段，而人类不会（因为它不可见）。然后，在您的服务器端代码中，您可以拒绝任何填充了输入的 POST。

很简单，但我发现它非常有效！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T14:40:26.077

在用户发送邀请之前，您似乎需要的不仅仅是一个经过验证的电子邮件地址，最好是显示用户以某种方式参与您的网站的东西。在不知道您的网站是什么的情况下，很难给出具体信息，但 StackOverflow 等效项要求用户至少拥有 X 名声才能邀请其他人。如果您正在运行一个论坛，您可以要求他们至少发布 X 个帖子。

我还建议在新帐户可以邀请之前有一个小的时间限制 - 例如，他们必须成为会员至少 X 天。这使自动邀请变得有些复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:36:45.223

一些想法：

*   禁止使用“mailinator”之类的电子邮件。
*   延迟推荐奖励，让您延长欺诈检测时间段，让您有更多时间检测虚假账户并做出相应反应。
*   *要求被推荐的用户在您提供任何推荐奖励之前*创建一个创收交易（我知道这可能不是您可以做出的转变） - 可能反过来增加奖励以解决推荐人的不便（您应该节省通过减少欺诈来赚钱，所以不是硬卖）。
*   机器学习。持续观察和调整您的欺诈检测。您拥有的数据越多，您就能更好地识别这些案例。（您提到的 IP 地址。）运输/账单信息更能说明它是否适用 - 请注意相邻的邮政信箱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T14:47:46.193

将 CAPTCHA 测试添加到确认页面。我想知道如果您的验证码以某种方式被绕过，它是否足够坚固。您可能会考虑使用看起来很流行的（可恶的）reCaptcha。确认页面上的验证码将降低“机器人”提交确认页面的风险。换句话说，它将实现注册后客户端与站点交互的想法。一种类似的方法是询问注册人的密码。

# html - 如何更改通过鼠标悬停在映射图像上出现的图像的位置？

> ID：13991883
> 
> 赞同：0
> 
> 时间：2012-12-21T14:24:53.593
> 
> 标签：html, css, position, imagemap, mousehover

我正在做这样的事情 [http://jquery-image-map.ssdtutorials.com/](http://jquery-image-map.ssdtutorials.com/) 当我将鼠标悬停在现有的映射图像上时，新的图像和段落出现了，但我无法改变它们的位置。我尝试使用 CSS，但没有任何效果。它们总是出现在屏幕的右上角。帮助将不胜感激！

```
<div id="inside" 
    onmouseover="document.getElementById('div2').style.display = 'block';"  
    onmouseout="document.getElementById('div2').style.display = 'none';">
<area shape="poly" id="cr1" class="jTip" coords="550,277,485,342,533,385,597,322"
href="car_park_1.html" alt="cr1" name="room-1">
</div><!-- element inside brackets will be shown--> 
```

这是图像和段落出现的代码：

```
<div id="div2" style="float: left;">    <!--things to show on mouse hover appear here -->
<img src="fun_ahead.gif" class="thumb_cr1" height"100px" width="90" style="float:left;"/>
<p class="thumb_cr1"> hellooo </p>
</div> 
```

# ruby-on-rails - 带复选框的搜索逻辑

> ID：13991889
> 
> 赞同：0
> 
> 时间：2012-12-21T14:25:15.773
> 
> 标签：ruby-on-rails, searchlogic

我正在使用 searchlogic 对我的结果集进行搜索。

下面是我的搜索表单，其中包含复选框。

```
<% form_for @search do |f| %>
  <div class="searchbox" style="text-align: left; width: 100%">

    <span> Status: </span>

    Incomplete - <%=   f.check_box :sub_status_fk_equals_any, {:name => "search[sub_status_fk_equals_any][]"}, "51" %> 
    Complete - <%=   f.check_box :sub_status_fk_equals_any, {:name => "search[sub_status_fk_equals_any][]"}, "52" %> 
    Under Review - <%=   f.check_box :sub_status_fk_equals_any, {:name => "search[sub_status_fk_equals_any][]"}, "53" %> 
    Approved - <%=   f.check_box :sub_status_fk_equals_any, {:name => "search[sub_status_fk_equals_any][]"}, "54" %> 

    <%= f.submit "Submit"%>
  </div>
<% end %> 
```

只要选中复选框，上面的代码就可以正常工作，但是如果所有复选框都是空的，而不是返回所有行，则不会返回任何内容。

在我的地址栏中，显示以下参数：

```
http://localhost/sub_test/?
search[order]=descend_by_sub_entry_date&
search[sub_status_fk_equals_any][]=0&
search[sub_status_fk_equals_any][]=0&
search[sub_status_fk_equals_any][]=0&
search[sub_status_fk_equals_any][]=0&
commit.x=15&commit.y=18&commit=Search 
```

如果没有选中任何复选框，则传递 0。

如果未选择任何内容，如何返回所有行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:47:30.187

好的，找到了解决方案。您需要为 unchecked_value 传递“nil”

```
Incomplete - <%=   f.check_box :sub_status_fk_equals_any, {:name => 
      "search[sub_status_fk_equals_any][]"}, "51", nil %> 

        Complete - <%=   f.check_box :sub_status_fk_equals_any, {:name => "search[sub_status_fk_equals_any][]"}, "52", nil %> 

        Under Review - <%=   f.check_box :sub_status_fk_equals_any, {:name => "search[sub_status_fk_equals_any][]"}, "53", nil %> 

        Approved - <%=   f.check_box :sub_status_fk_equals_any, {:name => "search[sub_status_fk_equals_any][]"}, "54", nil %> 
```

希望这对其他人有帮助

# math - 使用数学从 Markdown 创建一个 ePub 文件

> ID：13991893
> 
> 赞同：4
> 
> 时间：2012-12-21T14:25:32.370
> 
> 标签：math, latex, markdown, tex, pandoc

我花了相当多的时间试图弄清楚如何获取包含 TeX 数学的降价文件并将其转换为正确呈现数学的 ePub 文件。

例如：

```
This is a markdown file. Here is a [link](www.example.com).

Here is some inline math: $\sigma_{i=1}^n \frac{\mu}{100}$

Here is an equation:

$$ y = mx + b $$ 
```

如何将带有上述文本的降价文件转换为 ePub 文件？

我已经使用 Pandoc 尝试了不同的转换方法；但是，我仍然找不到使数学甚至 50% 正确的解决方案。

任何人都可以就我如何做到这一点提供任何帮助吗？

我已经尝试过[这个解决方案](https://stackoverflow.com/questions/11338049/how-to-convert-html-with-mathjax-into-latex-using-pandoc)以及其他 Pandoc 选项，但没有成功。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:17:09.187

Pandoc 有一个 EPUB3 作家。它将乳胶数学渲染成 MathML，EPUB3 阅读器应该支持（但不幸的是仍然很少有人支持）。用于`pandoc -t epub3`强制 EPUB3 输出，而不是默认的 EPUB2。

当然，如果您想要 EPUB2 输出或针对不支持 MathML 的阅读器，这并没有多大帮助。然后您可以尝试使用该`--webtex`选项，该选项将使用 Web 服务将 TeX 转换为图像。

# php - IE9 空文本节点

> ID：13991899
> 
> 赞同：1
> 
> 时间：2012-12-21T14:25:54.800
> 
> 标签：php, html, internet-explorer, cross-browser, internet-explorer-9

我正在 PHP 下建立一个站点，它在 Chrome、Firefox、IE7、8、9 中显示良好。问题是当我分析 IE9 中的源代码（使用 IE9 标准）时，它充满了空文本节点（每个元素在关闭后都有一个空节点文本）。是因为我使用的是 PHP 包含吗？例如`index.php`包括`header.php`and `footer.php`...文件编码是 UTF-8 No Mark 但我尝试了不同的...

![空文本节点](../Images/5b07a2912a9d1fe52846898c50cd0e59.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:39:56.350

元素之间的文本节点不为空。它们只包含空格（通常是空格、换行符和制表符）。完全没问题。

# http - POST 不是幂等的后果（RESTful API）

> ID：13991904
> 
> 赞同：34
> 
> 时间：2012-12-21T14:26:16.350
> 
> 标签：http, rest, post, put, idempotent

我想知道我目前的方法是否有意义，或者是否有更好的方法来做到这一点。

我有多种情况要创建新对象并让服务器为这些对象分配一个 ID。发送 POST 请求似乎是最合适的方式。然而，由于 POST 不是幂等的，请求可能会丢失，再次发送它可能会创建第二个对象。此外，由于 API 经常通过移动网络访问，因此丢失请求可能很常见。

结果，我决定将整个过程分为两步：

1.  首先发送一个 POST 请求以创建一个新对象，该对象在 Location 标头中返回新对象的 URI。

2.  其次，对提供的位置执行幂等 PUT 请求，以用数据填充新对象。如果新对象在 24 小时内未填充，服务器可能会通过某种批处理作业将其删除。

这听起来合理还是有更好的方法？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-28T13:06:52.283

POST 创建优于 PUT 创建的唯一优势是服务器生成 ID。我认为它不值得缺乏幂等性（然后需要删除重复项或空对象）。

相反，我会在 URL 中使用带有[UUID的 PUT。](http://en.wikipedia.org/wiki/Universally_unique_identifier)由于 UUID 生成器，您[几乎可以确定](http://en.wikipedia.org/wiki/UUID#Random%5FUUID%5Fprobability%5Fof%5Fduplicates)您在客户端生成的 ID 将是唯一的服务器端。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-02T12:43:56.890

这一切都取决于，首先你应该更多地谈论**URI、资源和表示**，而不是关心对象。

POST 方法是为非幂等请求或具有副作用的请求而设计的，但它[可以用于幂等请求](http://en.wikipedia.org/wiki/POST_%28HTTP%29#Affecting_server_state)。

将表单数据 POST 到 /some_collection/

```
normalize the natural key of your data (Eg. "lowercase" the Title field for a blog post)
calculate a suitable hash value (Eg. simplest case is your normalized field value)
lookup resource by hash value
if none then
    generate a server identity, create resource
        Respond =>  "201 Created", "Location": "/some_collection/<new_id>" 
if found but no updates should be carried out due to app logic
        Respond => 302 Found/Moved Temporarily or 303 See Other 
        (client will need to GET that resource which might include fields required for updates, like version_numbers)
if found but updates may occur
   Respond => 307 Moved Temporarily, Location: /some_collection/<id> 
   (like a 302, but the client should use original http method and might do automatically) 
```

一个合适的散列函数可能像一些连接字段一样简单，或者对于大字段或值，可以使用截断的 md5 函数。详情请参阅[散列函数] [2](http://en.wikipedia.org/wiki/Hash_functions)。

我假设你：

*   需要与哈希值不同的标识值
*   无法更改用于身份的数据字段

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-10T16:23:03.750

您在服务器、应用程序、专用请求响应中生成 id 的方法非常好！唯一性非常重要，但是客户，就像追求者一样，会不断重复请求，直到他们成功，或者直到他们愿意接受（不太可能）失败。所以你需要从某个地方获得独特性，你只有两个选择。客户端，如 Aurélien 所建议的 GUID，或服务器，如您所建议的。我碰巧喜欢服务器选项。关系数据库中的种子列是一种现成的唯一性来源，冲突风险为零。在 2000 年左右，我读到了一篇提倡这种解决方案的文章，名为“使用 HTTP 进行简单可靠的消息传递”，因此这是解决实际问题的既定方法。

阅读 REST 的东西，你可能会认为一群青少年刚刚继承了 Elvis 的豪宅。他们正在兴奋地讨论如何重新布置家具，他们对可能需要从家里带一些东西的想法感到歇斯底里。建议使用 POST ，*因为它在那里*，而没有提出非幂等请求的问题。

在实践中，您可能[希望确保对您的 api 的所有不安全请求都是幂等](http://www.infoq.com/articles/no-reliable-messaging)的，但身份生成请求除外，正如您所指出的那样，这并不重要。生成身份很便宜，未使用的身份很容易被丢弃。作为对 REST 的认可，请记住使用 POST 获取您的新身份，这样它就不会被缓存并在所有地方重复。

关于[幂等意味着什么的无意义的辩论](http://leedavis81.github.io/is-a-http-delete-requests-idempotent/)，我说它需要是一切。连续的请求应该不会产生额外的影响，并且应该收到与第一个处理的请求相同的响应。为了实现这一点，您需要存储所有服务器响应，以便可以重放它们，并且您的 id 将识别操作，而不仅仅是资源。你会被赶出猫王的豪宅，但你会拥有一个防弹 api。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T14:52:06.813

但是现在您有两个请求可能会丢失？POST 仍然可以重复，创建另一个资源实例。不要想太多东西。只需让批处理过程寻找受骗者。可能对您的资源有一些“访问”计数统计信息，以查看哪些被欺骗的候选人是被放弃的职位的结果。

另一种方法：根据一些日志筛选传入的 POST 以查看它是否是重复的。应该很容易找到：如果请求的正文内容与 x 前的请求的正文内容相同，则认为它是重复的。您可以检查额外的参数，如原始 IP、相同的身份验证、...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-31T19:26:08.443

无论您使用哪种 HTTP 方法，理论上都不可能在不生成唯一标识符客户端、临时（作为某些请求检查系统的一部分）或作为永久服务器 id 的情况下发出幂等请求。丢失的 HTTP 请求不会创建重复，尽管有人担心请求可能成功到达服务器但响应不会返回到客户端。

如果最终客户端可以轻松删除重复项并且它们不会导致固有的数据冲突，那么开发一个临时的重复预防系统可能还不够大。对请求使用 POST 并在 HTTP 标头中向客户端发回 201 状态，并在响应正文中返回服务器生成的唯一 ID。如果您的数据显示重复经常发生或任何重复会导致严重问题，我会使用 PUT 并在客户端创建唯一 ID。使用客户端创建的 id 作为数据库 id - 在服务器上创建额外的唯一 id 没有任何好处。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-21T14:37:07.993

我认为您也可以将创建和更新请求合并为一个请求（更新插入）。为了创建新资源，客户端 POST 一个“工厂”资源，例如位于 /factory-url-name。然后服务器返回新资源的 URI。

# r - 如何绘制多列 CSV 文件？

> ID：13991905
> 
> 赞同：15
> 
> 时间：2012-12-21T14:26:16.943
> 
> 标签：r, csv, charts

我对 R 很陌生，所以请原谅我的问题可能很愚蠢。

我有一个多列 CSV（纯逗号分隔，无引号）文件，其中第一行是标题，第一列是连续整数索引，其他 17 列是函数的浮点值。

任务是在同一张图表上绘制所有 17 条线（具有相同的轴）。

听起来很简单，但实际上并不是很明显。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-21T14:56:12.457

可能最紧凑、仅基于 R 的解决方案是

```
mydata <- read.csv("mydatafile.csv")
matplot(mydata[, 1], mydata[, -1], type="l") 
```

*   `header=TRUE`是 的默认选项`read.csv()`，因此您无需明确指定标题行的存在
*   `mydata[, 1]`选择第一列；`mydata[, -1]`选择*除*第一列之外的所有列
*   `type="l"`选择线（默认为点）；`?matplot`有关更改线型、颜色等的详细信息，请参阅`?plot`等等...

一旦您知道这`matplot`很有用，您可以在 StackOverflow 中搜索其他示例，例如[How to draw multiple Lines from csv in R](https://stackoverflow.com/questions/10955493/how-to-draw-multiple-lines-from-csv-in-r)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T14:43:58.140

您可以使用`read.csv`将数据作为 data.frame 输入。然后你有很多绘图的选择。我更喜欢`lattice`大多数调查工作。

两个在格子里。在这里，我正在为图表创建随机数据。

```
library(lattice)
d <- data.frame(index=1:20, x=rnorm(20), y=rnorm(20))

> head(d, n=3)
  index         x          y
1     1 -1.065591  0.2422635
2     2 -1.563782 -1.4250984
3     3  1.156537  0.3659411

xyplot(x+y~index, data=d, type='l', auto.key=list(space='right')) 
```

您可以从列的名称生成公式。我通常不会在提示符下执行此操作，而是在代码中使用此类结构：

```
f <- paste(paste(names(d[,-1,drop=FALSE]), collapse="+"),
           names(d[,1,drop=FALSE]),
           sep=" ~ ")

xyplot(as.formula(f), data=d, type='l', auto.key=list(space='right')) 
```

正如本的回答，`type='l'`指定行。默认`type='p'`为点。我在`auto.key`这里添加了参数，以标记系列。

![在此处输入图像描述](../Images/622dd184a92ed9940f54474701b7fc3b.png)

# java - 如何对可嵌入实体属性实施验证约束？

> ID：13991906
> 
> 赞同：9
> 
> 时间：2012-12-21T14:26:18.767
> 
> 标签：java, hibernate, validation, annotations, hibernate-mapping

我有一个带有电子邮件集合属性的 Person 实体：

```
@ElementCollection
@CollectionTable(schema="u",name="emails",joinColumns=@JoinColumn(name="person_fk"))
@AttributeOverrides({
    @AttributeOverride(name="email",column=@Column(name="email",nullable=false)),
})
public List<EmailU> getEmails() {
    return emails;
} 
```

在我的电子邮件课程中，我尝试使用 @Email 注释电子邮件：

```
@Embeddable
public class EmailU implements Serializable {
    private String email;

    public EmailU(){
    }

    @Email
    public String getEmail() {
        return email;
    }
} 
```

但它不起作用。我的方法应该是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T15:37:01.960

向您的集合属性添加`@Valid`注释。这会触发您的验证提供程序来验证集合中的每个项目，然后它将调用您的`@Email`验证器。

```
@Valid
@ElementCollection
@CollectionTable(schema="u",name="emails",joinColumns=@JoinColumn(name="person_fk"))
@AttributeOverrides({
    @AttributeOverride(name="email",column=@Column(name="email",nullable=false)),
})
public List<EmailU> getEmails() {
    return emails;
} 
```

注释文档：[http ://docs.oracle.com/javaee/6/api/javax/validation/Valid.html](http://docs.oracle.com/javaee/6/api/javax/validation/Valid.html)

# android - SlidingDrawer 关闭时显示距离底部太远，打开时不与视图重叠

> ID：13991908
> 
> 赞同：1
> 
> 时间：2012-12-21T14:26:41.607
> 
> 标签：android, slidingdrawer

这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:facebook="http://schemas.android.com/apk/res-auto"
        android:layout_width="fill_parent"
    android:layout_height="fill_parent"
        android:background="#FFF">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:gravity="center">

        .................................
        .................................

        <SlidingDrawer
        android:layout_width="fill_parent"
        android:id="@+id/SlidingDrawer"
        android:handle="@+id/slideButton"
        android:content="@+id/contentLayout"
        android:padding="10dp"
        android:layout_height="150dp">

            <Button android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/slideButton"
                android:background="@drawable/action_eating">
            </Button>
            <LinearLayout
                android:layout_width="fill_parent"
                android:id="@+id/contentLayout"
                android:orientation="vertical"
                android:gravity="center"
                android:padding="10dp"
                android:background="#45454F"
                android:layout_height="wrap_content">
            <Button
            android:id="@+id/history"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/history"
            android:textColor="#000000"
            android:textSize="20sp" />
        </LinearLayout>
    </SlidingDrawer>

    </LinearLayout>    

</ScrollView> 
```

问题是，SlidingDrawer 仍然在我的布局底部（这很好），但它仍然在底部太远（我认为它仍然在我的布局下方 150dp）。当我点击它时，它会打开，但不会在我的布局上翻转，它会保留在我在布局中显示的所有内容之下。但我需要，当我点击它时，将它滑过我的视图。当它关闭时，它应该保持在我的布局下方，离我的布局不太远（比如 150dp）。

**对不起，我的英语不好。如果您对理解我所说的内容有任何问题，请告诉我。**谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:35:29.337

将您`LinearLayout`的内容`SlidingDrawer`放入`RelativeLayout`

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:facebook="http://schemas.android.com/apk/res-auto"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#FFF">
<RelativeLayout
android:layout_width="fill_parent"
        android:layout_height="fill_parent">

<LinearLayout
android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:gravity="center">

        // your content
</LinearLayout>

<SlidingDrawer
android:layout_width="fill_parent"
        android:id="@+id/SlidingDrawer"
        android:handle="@+id/slideButton"
        android:content="@+id/contentLayout"
        android:padding="10dp"
        android:layout_height="150dp">

<Button android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/slideButton"
        android:background="@drawable/action_eating">
</Button>
<LinearLayout
android:layout_width="fill_parent"
        android:id="@+id/contentLayout"
        android:orientation="vertical"
        android:gravity="center"
        android:padding="10dp"
        android:background="#45454F"
        android:layout_height="wrap_content">
<Button
android:id="@+id/history"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/history"
        android:textColor="#000000"
        android:textSize="20sp" />
</LinearLayout>
</SlidingDrawer>

</RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:10:02.550

我找到了。这就是我所做的：

首先，我`<RelativeLayout>`作为父母使用。在这个父母下我用过`<ScrollView>`。然后我删除了`<SlidingDrawer>`from`<ScrollView>`并将其粘贴到`<ScrollView>`但 in 中`<RelativeLayout>`。但在那之后，当我点击抽屉按钮时，它打开但覆盖了我不想要的整个屏幕。我只想要wrap_content。所以我用过：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:background="#FFF"
    android:gravity="bottom"
    android:layout_gravity="bottom">
<SrollView .....>
    .............................
    .............................
</ScrollView>

<SlidingDrawer
    android:layout_width="wrap_content"
    android:id="@+id/SlidingDrawer"
    android:handle="@+id/slideButton"
    android:content="@+id/contentLayout"
    android:layout_height="95dp"
    android:orientation="vertical"
    android:layout_alignParentBottom="true">

    ..................
    ..................

</SlidingDrawer>
</RelativeLayout> 
```

# c++ - iter_swap 的意义何在？

> ID：13991909
> 
> 赞同：37
> 
> 时间：2012-12-21T14:26:43.653
> 
> 标签：c++, templates, namespaces, swap, argument-dependent-lookup

我只是想知道，为什么有人会写这个：

```
std::iter_swap(i, k); 
```

而不是这个？

```
std::swap(*i, *k);   // saved a few keystrokes! 
```

然后我研究了 的实现`iter_swap`，当然它只使用`swap`而不是`std::swap`因为我们已经在`namespace std`，无论如何。这让我想到了下一个问题：

为什么会有人写这个：

```
using std::swap;
swap(a, b); 
```

而不是这个？

```
std::iter_swap(&a, &b);   // saved an entire line of code! 
```

我在这里忽略了任何重要的差异/问题吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-21T14:28:41.153

来自 SGI 文档（[这里](http://www.sgi.com/tech/stl/iter_swap.html)）：

> [1] 严格来说，iter_swap 是多余的。它的存在仅出于技术原因：在某些情况下，某些编译器难以执行解释 swap(*a, *b) 所需的类型推导。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-21T14:37:26.357

要回答您的第二个问题，`using`+`swap`允许编译器使用用户定义的交换函数，这可能比默认实现更有效（通过使用 ADL）。明确地说`std::swap`禁止 ADL 和它可能已经找到的任何自定义交换方法。

至于`iter_swap`它可能在模板中使用并清楚地表明意图而不是可能表明您期望指针的交换。

# php - YII 迁移历史未保存到数据库中

> ID：13991910
> 
> 赞同：1
> 
> 时间：2012-12-21T14:26:47.133
> 
> 标签：php, yii

我正在使用 YII 1.1.12。当我做：

```
yiic migrate 
```

在我的应用程序的受保护文件夹中，我被告知有一个新的迁移要应用。我回答“是”以便应用迁移。过了一会儿，我得到：

```
*** applied m121220_121256_initialize_database (time: 6.060s)
Migrated up successfully. 
```

到目前为止一切都很好。然后当我输入“yiic migrate”时，我没有被告知没有新的迁移，而是被告知：

```
Yii Migration Tool v1.0 (based on Yii v1.1.12)

Total 1 new migration to be applied:
    m121220_121256_initialize_database 
```

应用上述迁移？（是|否）[否]：

当我检查 tbl_migration 表时，里面唯一的就是基本迁移。没有关于initialize_database 的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:06:59.790

您的迁移是否创建了数据库？如果是这样，它可能会抛弃 Yii，并且它在开始时创建迁移结构，然后无法插入，我不确定行为会是什么。

如果正在做任何类型的破坏性工作，那么在运行它之后手动将数据库设置为此迁移`m121220_121256_initialize_database`可能是个好主意。`yiic migrate mark 121220_121256`

这样，您可以进行进一步的测试，以查看它是迁移错误还是迁移中的破坏性因素，例如删除/创建数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:23:46.620

我意识到问题是我直接从 PHPMyAdmin 运行的 sql 命令包含一个事务。当我删除有关事务的行时，yii_migration 表中的数据库行已成功插入。我不确定为什么会这样，但确实如此。

# javascript - 更改 javascript 按钮以在任何地方单击

> ID：13991913
> 
> 赞同：1
> 
> 时间：2012-12-21T14:27:05.693
> 
> 标签：javascript, jquery, onclick, document-ready

我是一个完全的 JavaScript 菜鸟。我无法将我拥有的脚本（提交时的功能）更改为我想要的脚本，即单击任意位置。这是我的脚本：

提示 ％：

```
<p>Split by: <input id="parties" /></p>
<p>Tip amt: <input id="tip" disabled="disabled" /></p>
<p>Total Bill: <input id="total" disabled="disabled" /></p>
<p>Each Party: <input id="each" disabled="disabled" /></p>
<p><input type="submit" /></p>

function calculate () {

var amount = $('#amount').val();
var percentage = $('#percentage').val();
var parties = $('#parties').val();

var tip = amount * (percentage / 100)
var each=tip/parties;
var total = Number(amount) + tip;

$('#tip').val( tip.toFixed(2) );
$('#total').val( total.toFixed(2) );
$('#each').val( each.toFixed(2) );

return false;}

$('#calculator').submit( calculate ); 
```

我尝试使用 document.ready，但要么我没有正确使用它，要么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:34:00.213

改变这个：

```
$('#calculator').submit( calculate ); 
```

对此：

```
$('#calculator').click( function(e){
    e.preventDefault();//you might not need this, but that is unclear
    calculate();
}); 
```

有关默认操作预防的一些文档，请参见此处：http: [//api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

编辑注意：我不清楚你的问题是否：

```
<p><input type="submit" /></p> 
```

应该是这样的：

```
<p><input id="calculator" type="submit" /></p> 
```

# file - 如何在 Delphi 中创建结构化文件

> ID：13991917
> 
> 赞同：1
> 
> 时间：2012-12-21T14:27:11.190
> 
> 标签：file, delphi

我想创建一个结构化文件来存储：

类型 1 数据如下：

```
Name: UnicodeString;
ID: Integer;
Content: UnicodeString;
Img: TBitmap; 
```

在它的功能中，我需要它来存储大量记录并能够查找给定记录并计算记录总数。

在另一个文件中，我想按如下方式存储类型 2 数据：

```
-Name: String;
-BitmapDir
+ Bitmap1: TBitmap;
+ Bitmap2: TBitmap;
+..............: TBitmap;
+ BitmapN: TBitmap;
-Database
+ IniFile: TINIFiles; 
```

你知道创建这些文件的任何方法吗？

我知道我可以使用库 uKBDynamic 使用示例 SimpleStorage 创建类型 2 的文件，但我真的不知道它以及如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:43:31.413

您可以使用[结构化存储](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380369%28v=vs.85%29.aspx)。它是一个基于 COM 的 api，可让您编写几乎嵌入完整文件系统的文件。在那里，您可以编写一个流列表，每个流都包含您的一条记录的数据。

# c#-4.0 - App Fabric：虽然 GET 错过了 Enum 属性

> ID：13991918
> 
> 赞同：0
> 
> 时间：2012-12-21T14:27:19.967
> 
> 标签：c#-4.0, appfabric, appfabric-cache

我有一个标记为`CollectionDataContract`具有枚举成员的类。当我在 Appfabric 中放置此类的对象时，我就完成了。当我从 App 结构中取回它时，它不会反序列化枚举成员。但我不确定序列化部分本身是否遗漏了枚举。

请帮忙。

如果您需要更多信息，请告诉我。

谢谢。

```
[CollectionDataContract]
public partial class RuleConditionList : List<IRuleCondition>, IRuleCondition
{
   public LogicalOperator Operator;
} 
```

`LogicalOperator`枚举在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:00:14.010

我认为序列化/反序列化对象时存在问题。AppFabric 在将项目存储在缓存中之前使用 NetDataContractSerializer 类进行序列化。

您可以在使用 DataContractAttribute 或 SerializableAttribute 标记的任何类型或实现 ISerializable 接口的类型上使用 NetDataContractSerializer。

因此，取决于您的对象，应该有一些错误，例如私有类型、私有字段、缺少的属性，......

**编辑**

你应该添加`DataMember`到你的领域。

```
[DataMember]
public LogicalOperator Operator; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:13:40.127

标有 Collection 数据协定的类中的任何数据成员都不能被 NetdataContractSerializer 序列化，NetdataContractSerializer 是 App Fabric 用于存储数据的序列化技术。

为了使事情顺利进行，我们有两个选择：

1.  为 RuleConditionList 做一个包装器
2.  与其从 List 继承，不如将其作为属性并将属性更改为 DataContract。

# jquery - 定位jquery ui工具覆盖的问题

> ID：13991926
> 
> 赞同：0
> 
> 时间：2012-12-21T14:27:34.993
> 
> 标签：jquery, user-interface

我正在使用 jquery ui 工具覆盖插件，它几乎 100% 工作，但是当我单击打开图像并向下滚动图像棒时。我很快发现这是因为脚本将定位设置为固定。[但是，当我使用文档http://jquerytools.org/demos/overlay/custom-effect.html](http://jquerytools.org/demos/overlay/custom-effect.html)中提供的配置更改定位时，我仍然得到相同的结果。该网站是 marccasavant.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:10:17.333

这比看起来更复杂......确实，您**只需**将`position`from更改`fixed`为`absolute`，但由于它是由覆盖插件完成的，您不能只在 css 中设置它，您需要在-飞。

我想出的解决方案是声明一个自定义效果：

```
$.tools.overlay.addEffect("change", function(css, done) {
css.position = 'absolute';
overlay = this.getOverlay();
   overlay.css(css).show();
   overlay.animate({
      top: '+=55',  opacity: 1,  width: '+=20'
      }, 400, done
   );
   done.call();
}, function(done) {
   this.getOverlay().animate({
      top:'-=55', opacity:0, width:'-=20'
   }, 300, function() {
      $(this).hide();
      done.call();
   }); 
```

});

谁只是更改 css`position`属性（并做一些动画，你显然可以改变），并做默认的东西。然后在初始化叠加层时添加它：

```
$(document).ready(function() {
   $("img[rel]").overlay({effect: 'absolute'});
}); 
```

我使用了本教程： http: [//jquerytools.org/demos/overlay/custom-effect.html](http://jquerytools.org/demos/overlay/custom-effect.html)并删除了他们的自定义放置效果，并添加了定位更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:30:56.007

我使用开发人员工具将位置更改为“绝对”，它按预期工作。验证配置是否应用绝对位置，否则使用 jQuery 修改 css：

```
$('.simple_overlay').css('position', 'absolute'); 
```

# objective-c - 警告：在此块中强烈捕获 $XXX 可能会导致“AFHTTPClient.m”中的保留周期

> ID：13991927
> 
> 赞同：2
> 
> 时间：2012-12-21T14:27:43.387
> 
> 标签：objective-c, automatic-ref-counting, warnings, afnetworking

我`AFNetworking`在我的项目中使用，但这里有 2 个警告： ![警告](../Images/733e70a362de74cd3cd93753eb946bf4.png)

完整的警告字符串是：

`/AFNetworking/AFHTTPClient.m:575:38: Capturing 'operation' strongly in this block is likely to lead to a retain cycle`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T23:34:23.170

这是另外两个[关于这个](https://stackoverflow.com/questions/7853915/how-do-i-avoid-capturing-self-in-blocks-when-implementing-an-api) [问题](https://stackoverflow.com/questions/7205128/fix-warning-capturing-an-object-strongly-in-this-block-is-likely-to-lead-to-a)的很好答案的问题。这是在块中使用强变量的问题。要在使用 ARC 时抵消这种情况，您必须使用`__weak`声明。我建议您阅读第一个链接，特别是了解更多信息。

编辑

起初我没有意识到你在 AFNetworking 的代码中看到了这个警告。使用最新版本的 AFNetworking 我没有看到此警告。

# vb.net - 比较 VS 2012 中的两个对象时单元测试失败

> ID：13991929
> 
> 赞同：0
> 
> 时间：2012-12-21T14:27:49.650
> 
> 标签：vb.net, visual-studio-2010, unit-testing, object

我有以下单元测试：

```
 Public Sub pickWeaponTest_Rock()
        Dim lastMove As String = "Rock"
        Dim actualSelectedMove As Weapon = New Paper()

        Dim result As Weapon

        Dim target As Object = New PlayerComputerTactical() ' TODO: Initialize to an appropriate value
        result = target.pickWeapon()
        Assert.AreEqual(result, actualSelectedMove)
        Assert.Inconclusive("A method that does not return a value cannot be verified.")
    End Sub 
```

我收到以下错误，即使两者都是 Paper 对象：

Microsoft.VisualStudio.TestTools.UnitTesting.AssertFailedException 未由用户代码处理 Message=Assert.AreEqual 失败。预期的：。实际的：。

有人可以说明如何使其工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:30:34.817

您正在比较两个**不同的** `Paper`对象。
您需要覆盖`Equals()`并`GetHashCode()`认为它们是平等的。

但是，如果您希望类的所有实例都相等，则应该使用枚举。

# php - Magento：Xdebug 在某些方法上错过断点

> ID：13991934
> 
> 赞同：0
> 
> 时间：2012-12-21T14:28:27.597
> 
> 标签：php, magento, xdebug, breakpoints

这是我无法弄清楚的：

在某些情况下，例如在某些内部方法上，例如 _costruct() （也可能是 ajax call ）Xdebug 没有达到断点。

有什么解决办法吗？

# php - 从 PHP 网站进行 Git 结帐？

> ID：13991939
> 
> 赞同：3
> 
> 时间：2012-12-21T10:11:26.603
> 
> 标签：php, git, apache, nginx, git-checkout

是否可以使用 PHP 网站从 Git 版本控制系统中签出特定分支？我所需要的只是一个网页，让我可以选择任何可用的分支并在按下按钮后进行结帐（当然是在身份验证之后）。

制作一个脚本来列出所有可用的分支并显示页面很容易，但是 PHP 脚本没有足够的权限来运行 Git 检出。我可以以 root 身份运行网络服务器（Apache 或 Nginx），但显然这会带来太大的安全风险。

如何使用 min 从 PHP Web 脚本启动 Git 签出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:00:57.240

最好设置一个 git 服务器，例如使用 gitolite（在 Google 中搜索）。它甚至可以为您处理密钥设置等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:39:06.670

我遇到了同样的问题，我的解决方案是把整个网站都给 apache 用户。现在您的 PHP 脚本可以运行 git checkout。

这个解决方案对于安全性来说并不是 100% 理想的，因为现在有缺陷的脚本可以更改您的 web 文件夹中的脚本。正确的解决方案是编写一个守护程序，而不是作为特权用户运行，并且只根据请求为 apache 用户运行非常特定的命令。我只需要为我们的开发网络服务器提供一个解决方案，所以这个守护进程会有点矫枉过正。

# asp.net-mvc - KendoUI ASP MVC 无法获取 Grids Selected 行值

> ID：13991946
> 
> 赞同：2
> 
> 时间：2012-12-21T14:29:09.937
> 
> 标签：asp.net-mvc, grid, editor, kendo-ui, selecteditem

我正在使用 Kendo UI Grid 显示邮件列表，当我单击一行时，我需要从客户端已经拥有的邮件对象中选择一行并在编辑器中显示邮件正文。但无法获取选中的行值。

这是查看代码：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<MVC3toHTML5.Models.MailModel>" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Index</title>
    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" />
     <link href="<%= Url.Content("/Content/web/kendo.common.min.css") %>" rel="stylesheet" type="text/css" />
    <link href="<%= Url.Content("/Content/web/kendo.rtl.min.css") %>" rel="stylesheet" type="text/css" />
    <link href="<%= Url.Content("/Content/web/kendo.default.min.css") %>" rel="stylesheet" type="text/css" />
    <link href="<%= Url.Content("/Content/shared/examples-offline.css") %>" rel="stylesheet" type="text/css" />
    <script src="<%: Url.Content("/Scripts/jquery-1.5.1.min.js") %>" type="text/javascript"></script>
    <script src="<%: Url.Content("/Scripts/modernizr-1.7.min.js") %>" type="text/javascript"></script>
      <script src="<%= Url.Content("/Scripts/jquery.min.js") %>"></script>
    <script src="<%= Url.Content("/Scripts/kendo.web.min.js") %>"></script>
    <script src="<%= Url.Content("/Scripts/kendo.aspnetmvc.min.js") %>"></script>
    <script src="<%= Url.Content("/Scripts/console.min.js") %>"></script>
    <script src="<%= Url.Content("/Scripts/prettify.min.js") %>"></script>
</head>
<body>
    <div style="font-size:medium;">
        <%: Html.Kendo().Grid(Model.mailList)
        .Name("Grid")
        .Columns(columns =>
        {
            columns.Bound(p => p.MailId).Width(200);
            columns.Bound(p => p.From.Value).Width(200);
            columns.Bound(p => p.Subject).Width(200);

        })
                        .Pageable()
                        .Sortable()
                        .Scrollable()
                        .Filterable()
                        .Groupable()
                        .DataSource(dataSource => dataSource
                            .Ajax()
                            .ServerOperation(false)
                                        .Events(events => events.Change("Grid_OnRowSelectUID"))

                         )
    .Selectable()
%>
    </div>
    <div style="margin-left:220px;">
  <% Html.Kendo().Editor()
      .Name("Editor")
      .HtmlAttributes(new { style = "width: 740px;height:440px;" })

      .Render();
%>
<script type="text/javascript">
    function Grid_OnRowSelectUID() {

        var dataSource = new kendo.data.DataSource({
            change: function (e) {
                alert("datasource");
            }
        });

        dataSource.bind("change", function (e) {
            alert("Bind");
        });

    }

</script>
    </div>
</body>
</html> 
```

控制器如下：

```
namespace MVC3toHTML5.Controllers
{
    public class Home2Controller : Controller
    {
        public ActionResult Index()
        {
            MailModel mailModelobj = new MailModel();
            mailModelobj.GetMailList();
            return View(mailModelobj);

        }

    }
} 
```

我从网络服务收到邮件。实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T23:00:25.653

使用Grid 的**[change](http://docs.kendoui.com/api/web/grid#select)**事件而不是 dataSource 的 change 事件。

```
<%: Html.Kendo().Grid(Model.mailList)
    .Name("Grid")
    .Selectable()
    .Events(ev=>ev.Change("onSelectRow"))
   //...

   <script>
        function onSelectRow(e){
             var currentSelectedItem = this.dataItem(this.select());
             alert(currentSelectedItem.SomeProp);
             $('#Editor').data().kendoEditor.value(currentSelectedItem.SomeProp);
        }
   </script> 
```

# html - 是否可以在 Wordpress 中显示 HTML 代码？

> ID：13991948
> 
> 赞同：10
> 
> 时间：2012-12-21T14:29:13.557
> 
> 标签：html, wordpress

我尝试了无数插件，用转义键编写 HTML，我的血液开始沸腾。在 Visual 和 HTML 模式之间切换实际上是在改变我的内容，即破坏它！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T03:17:54.760

好的，我知道该怎么做了。

1.  首先进入视觉模式。
2.  在格式下拉列表中选择预格式化。创建了一个小灰色框。
3.  在灰色框中，复制并粘贴您的原始 HTML。

保存它并从视觉视图切换到 HTML 视图几次。不应该有乱码。

*粘贴到**可视选项卡而不是文本选项卡中*****绝对至关重要***，否则它会被完全塞满（非常不直观。你会认为它会以相反的方式工作）。*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:47:46.993

Wordpress 做了一件奇怪的事情，如果你在可视模式和“文本”模式之间切换（HTML 模式在 3.5 更新中被重命名），它会去除任何看起来为空的标签，而这些标签通常可能不是。如果我正确理解问题，这可能就是您遇到的情况。

如果您只是想在您的网站上显示代码，您应该能够像这样包装代码：

```
<code><p>Example code post</p></code> 
```

这在这些指南中列出：http: [//codex.wordpress.org/Writing_Code_in_Your_Posts](http://codex.wordpress.org/Writing_Code_in_Your_Posts)

如果它是一个不需要包装的代码块，你也可以像这样使用“pre”标签：

```
<pre><code><p>Example code post</p></code></pre> 
```

这在这里描述得很好：[<code> vs <pre> vs <samp> 用于内联和块代码片段](https://stackoverflow.com/questions/4611591/code-vs-pre-vs-samp-for-inline-and-block-code-snippets)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-15T07:43:24.520

是的，这是绝对可能的。您可以遵循上述任何一种方法。我更喜欢以下方式。

首先，使用在线 html 解码器对 HTML 代码进行解码。你可以在谷歌上找到任何。然后，您可以将解码后的代码粘贴到您的帖子上。这种方法的好处是，您的**缩进**不会丢失。

**解码代码** [![在此处输入图像描述](../Images/a06e66efce394283a71be6f020c11ed9.png)](https://i.stack.imgur.com/vqfKb.png)

**渲染视图文件** [![在此处输入图像描述](../Images/ac5a9c9cc418e2c2b059d8add97ce2c6.png)](https://i.stack.imgur.com/u05cx.png)

希望，它可以帮助未来的读者找到一种方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-12T13:29:27.290

Wordpress 非常有问题。我花了很长时间才终于成功。对于安装在我的电脑上的 Wordpress.org，我尝试了：转到可视模式，添加预格式化的文本块，复制/粘贴解码或编码。我试过 ：

```
<pre><code><p>Example code post</p></code></pre> 
```

那没有用。

它对我有用的唯一方法是：

转到视觉，而不是添加预先格式化的文本块，我创建一个段落文本块，复制/粘贴编码的 HTMl，然后将其转换为预格式化。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T14:38:06.797

也许，你应该试试这个插件 [http://wordpress.org/extend/plugins/insert-html-snippet/](http://wordpress.org/extend/plugins/insert-html-snippet/)

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-07T17:46:03.437

一种方法是对代码进行注释。就像是，

```
<!--div>
    <md-divider class="org__meta-divider md-soc-theme"></md-divider>
    <h4 class="org__meta-heading">Technologies</h4>
    <ul layout="" layout-wrap="" class="org__tag-container layout-wrap layout-row">
        <li class="organization__tag organization__tag&#45;&#45;technology">web services</li>       
    </ul>
</div--> 
```

代替

```
<div>
    <md-divider class="org__meta-divider md-soc-theme"></md-divider>
    <h4 class="org__meta-heading">Technologies</h4>
    <ul layout="" layout-wrap="" class="org__tag-container layout-wrap layout-row">
        <li class="organization__tag organization__tag&#45;&#45;technology">web services</li>       
    </ul>
</div> 
```*

# android - 向 UI 线程发送消息

> ID：13991952
> 
> 赞同：3
> 
> 时间：2012-12-21T14:29:20.140
> 
> 标签：android, multithreading, messaging, knx

我正在为 android 中的 knx 模块开发一个串口应用程序。我可以向 knx modulde 发送和接收推荐信。当从串口收到消息时，我想更改 ui（例如按钮属性）。我用处理程序尝试过，但我无法更改 ui。请帮帮我。

> @Override public void OnSerialsData(final byte[] buffer, final int size) { .... }

它是我的串行端口侦听器函数调用 insine ReadThread。该线程从我的活动的不同包中开始。我想用这种方法向主要活动发送一条消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T14:31:47.707

您可以使用[Activity.runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)与 UI 线程进行通信。阅读有关[进程和线程](http://developer.android.com/guide/components/processes-and-threads.html)的更多信息，尤其是有关[工作线程](http://developer.android.com/guide/components/processes-and-threads.html#WorkerThreads)的信息。

例如在你的`OnSerialsData`，你可以打电话

```
mActivity.runOnUiThread(new Runnable() {
    public void run() {
        mActivity.mButton.setText("message arrived!");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:34:29.163

首先，您必须在主要活动中创建一个静态处理程序：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public static Handler myHandler = new Handler(){

    @Override
    public void handleMessage(Message msg) {
        // TODO Auto-generated method stub
        super.handleMessage(msg);

        Log.e("Test", msg.getData().getCharSequence("MAINLIST").toString());

    }

};
} 
```

然后在你的套接字类中：

```
public void OnSerialsData(final byte[] buffer, final int size) {

    Message msg = MainActivity.myHandler.obtainMessage();
    Bundle bundle = new Bundle();
    bundle.putCharSequence("MAINLIST", "IS_OK");
    msg.setData(bundle);
    MainActivity.myHandler.sendMessage(msg);

} 
```

但是您必须确保在调用 OnSerialsData 方法之前必须创建您的处理程序。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:37:11.863

只是扩展@auselen 答案。

在您的活动上创建以下内容：

```
public void messageReceived(final String msg){
runOnUiThread(new Runnable() {

    @Override
    public void run() {
    // Put here your code to update the UI

    }
});
} 
```

然后您可以从任何引用您的活动的类中调用它。如果该类没有对活动的引用，那么您应该将引用传递给它。

# c# - 如何验证页面内的 WebUser 控件

> ID：13991955
> 
> 赞同：1
> 
> 时间：2012-12-21T14:29:25.100
> 
> 标签：c#, asp.net

我的页面中有一个网络用户控件。在 web 用户控件中，我有一个单选按钮列表和一个必填字段验证器，用于检查是否单击了任何单选按钮。但是，在主页上，我有一个按钮，单击该按钮应检查验证。我不知道该怎么做。

这是结构：

```
Page -> usercontrol -> radiobuttonList
  |
  |->  button 
```

单击按钮时，我希望 Web 用户控件单选按钮列表验证器执行其验证并相应地设置 Page.IsValid。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:43:19.500

如果您将`validationgroup`所有控件和按钮的属性设置为相同的字符串，则验证器是在单独的控件中还是全部在一个 Web 表单中都无关紧要。

IE`validationgroup="MyFormToValidate"`

这是关于该属性的文档：

[http://msdn.microsoft.com/en-us/library/ms227424(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms227424%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:31:49.450

您可以使用[CustomValidator 控件](http://msdn.microsoft.com/en-us/library/9eee01cx%28v=vs.71%29.aspx)并指定 OnServerValidate 方法。

```
protected void cvRBLCheck_ServerValidate(object source, ServerValidateEventArgs args)
{
    args.IsValid = radiobutton.Checked;
} 
```

在您的按钮上，确保将 CausesValidation 设置为 true。

单击按钮时，将触发 OnServerValidate 方法，您可以在那里进行检查。

# c# - 异步单元测试中的存根任务返回方法

> ID：13991956
> 
> 赞同：27
> 
> 时间：2012-12-21T14:29:30.110
> 
> 标签：c#, unit-testing, task-parallel-library, async-await

假设我有以下类和它依赖的接口：

```
public class MyController
{
    private IRepository _repository;
    public MyController(IRepository repository)
    {
        _repository = repository;
    }

    public async Task MethodUnderTest(int someId)
    {
        var o = await _repository.FindById(someId);
        // update o
        await _repository.Commit();
    }
}

public interface IRepository
{
    Task Commit();
} 
```

当我对该方法进行单元测试时，我可以执行以下操作（使用 xUnit 和 Rhino Mocks）：

```
[Fact]
public async Task MyTest()
{
    IRepository repositoryStub = MockRepository.GenerateStub<IRepository>();

    MyController controller = new MyController(repositoryStub);

    await controller.MethodUnderTest(1);
} 
```

这将失败并出现*System.NullReferenceException：未将对象引用设置为对象的实例*。

使用以下 StackTrace：

```
UnitTest.MyController.<MethodUnderTest>d__0.MoveNext() in 
\UnitTest\Class1.cs:line 35
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at \UnitTest\Class1.cs:line 20 
```

发生此错误是否正确，因为为 async/await 调用生成的`Commit()`返回和状态机调用a ？`null``MoveNext()``null`

我可以通过执行以下操作来解决此问题：

```
repositoryStub.Expect(r => r.Commit()).Return(Task.FromResult<bool>(true); 
```

但这感觉有点奇怪..我可以使用任何`T`for`FromResult<T>`并且测试将运行。我找不到`FromResult`会返回非泛型的方法`Task`。

我用什么重要`T`吗？还是我应该以其他方式解决这个问题？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-21T16:29:38.273

您将需要退回一些东西；`async Task`方法永远不能返回`null`。

`T`没关系。如果需要，可以将 a 声明`static readonly Task SuccessTask = Task.FromResult<object>(null);`为辅助常量。我的 AsyncEx 库中有[类似的常量](http://nitoasyncex.codeplex.com/wikipage?title=TaskConstants)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-04T10:06:37.990

如果您的目标是 .NET Framework 4.6 或更高版本，您现在可以`.Returns(Task.CompletedTask)`改用稍短一些的版本。

# javascript - 加载到div后执行脚本

> ID：13991958
> 
> 赞同：2
> 
> 时间：2012-12-21T14:29:38.100
> 
> 标签：javascript, ajax, jquery

> **可能重复：**
> [初始化脚本](https://stackoverflow.com/questions/13991246/initialize-script)

我有一个页面（Page1.html），在这个页面中有一个 div（#div1），它从另一个页面（Page2 #div1/2/3/4/5）中的其他 div 获取其内容。内容由 jQuery 加载脚本加载。根据选择框中的选择加载内容，因此在 Page1 完成加载后加载内容。

**问题：** 当我从 Page2 获得一些依赖于 jQuery 的内容时，这些元素不起作用。他们不执行。

**我的问题：** 有什么方法可以使 Page2 中的整个加载的#div（所有内容）在加载时执行？现在，现有元素在加载时会“初始化”，例如：function initializeSlider(){slider };。

现在我正在尝试根据 jQuery 添加更多元素，如果初始化所有对象是执行所有这些脚本的正确方法，或者是否有任何方法可以一次执行所有 jQuery 元素所以不需要初始化所有一一反对？

**执行或初始化一个脚本：** 如果在加载 div 时无法一次执行/初始化所有脚本。我试图执行或初始化此脚本但没有成功，请尝试“$(document).ready( function() {" 并像滑块一样初始化它，但元素没有执行。

```
$(document).ready(function() {
    $(".lil").click(function () {
      $(this).toggleClass("highlight");
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:34:42.403

取决于您正在初始化的内容；对于事件，请确保并使用[`.on()`](http://api.jquery.com/on/)：

```
$("#div1").on('click', '.lil', function () {
    $(this).toggleClass("highlight");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T14:35:07.653

利用：

```
$(document).ready(function() {
    $("#div1").on('click', '.lil', function () {
      $(this).toggleClass("highlight");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:40:43.830

你可以给那个函数一个名字。就像是：

```
function toggleClasses(classToToggle) {
    $(classToToggle).click(function () {
        $(this).toggleClass("highlight");
    });
} 
```

然后，您的主页可能有：

```
$(document).ready(function() {
    toggleClasses('.lil');
}); 
```

在您从第 2 页加载的局部视图的底部，添加以下内容：

```
<script>
    toggleClasses('.partialViewClass');
</script> 
```

这样，一旦部分视图完成加载，它将调用相同的函数。

如果您所做的只是切换该类，则可能需要为辅助类添加一个参数，以区分部分视图中的元素与原始页面中的元素，这样原始页面中的元素就不会得到加载局部视图时切换回来。

因此，您的部分视图中的那些将需要突出显示类以及次要区分类（class="lil partialViewClass"）。将类作为参数传递给函数，这样每个人都只会切换它应该做的事情。

# git - .gitignore 的更改未显示在日志中，但显示在提交到提交差异中

> ID：13991959
> 
> 赞同：3
> 
> 时间：2012-12-21T14:29:42.653
> 
> 标签：git, gitignore, git-diff, git-log

10 东西提交回来，我对 .gitignore 文件进行了更改。今天，当我提取最新代码时，我的更改不存在。所以我运行了这个命令：

```
git log -p .gitignore 
```

它告诉我文件的最后一次更改是我的。然后我提取了从现在到我的提交之间的所有提交，并确定了删除我的更改的提交。然后我拿了那个提交的差异，以及之前的那个，在差异中我可以看到文件的变化。

但是为什么我不能通过上面的命令看到变化呢？当我使用时，我什至看不到这种变化

```
gitk .gitignore 
```

我也想知道，当我尝试查看其他文件的历史记录时，是否会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:07:19.813

也许您正在谈论的更改是通过与另一个分支合并引入的？有不同的合并策略，尽管您的提交可能是按时间顺序排列的最后一个，但合并过程可能更喜欢符合策略规则的旧提交。

默认情况下，git 使用`recursive`策略，它将按照创建的顺序排列提交。但也许在你的情况下，合并是使用`ours`和`heirs`策略更喜欢来自一个分支的提交而不是来自另一个分支的提交。这就是为什么您可能看不到您实际期望的内容。

请访问[此问答](https://stackoverflow.com/questions/366860/when-would-you-use-the-different-git-merge-strategies)以获取有关策略的更多信息。

# typescript - office.js 有打字稿参考吗？

> ID：13991960
> 
> 赞同：3
> 
> 时间：2012-12-21T14:29:43.057
> 
> 标签：typescript, office-js

有谁知道 Office 2013 任务窗格应用程序的 TypeScript 参考或声明文件？

我尝试添加：

```
/// <reference path="_officeintellisense.js" />
/// <reference path="office/1.0/office.js" /> 
```

但是 tsc 似乎无法解释 office.js（或者至少我无法理解），因为它似乎是上下文感知的，需要知道它是否在 Excel、Word 等中运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-26T19:53:15.853

请注意，Microsoft 的 Office 可扩展性团队也刚刚发布了 Office.js TypeScript 定义，包括[新添加的 Excel 和 Word 2016 API](https://github.com/OfficeDev/office-js-docs)。你可以在[DefinitelyTyped github 存储库](https://github.com/borisyankov/DefinitelyTyped/blob/master/office-js/index.d.ts)或[Nuget](http://www.nuget.org/packages/office-js.TypeScript.DefinitelyTyped/)上找到它。

~ 迈克尔·兹拉特科夫斯基

   Office 可扩展性团队的开发人员，MSFT

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:16:18.387

您需要一个包含类型信息的 .d.ts 文件来获得自动完成和类型检查。

您可以只声明您需要使用的位，并且在添加更详细的类型信息之前，您可以首先将其视为动态的。例如，如果脚本公开了一个 Office 对象，您可以从以下内容开始：

```
declare var Office: any; 
```

# mysql - 来自两个连接表和多行的 MySQL 总和

> ID：13991965
> 
> 赞同：1
> 
> 时间：2012-12-21T14:30:17.050
> 
> 标签：mysql, join, sum

我对以下查询有疑问：

```
SELECT sum(((ordered_items.price + ordered_items.vat) * ordered_items.qty) + orders.postage_price + orders.postage_vat) as total_price
FROM orders
JOIN ordered_items
ON orders.id_orders = ordered_items.order_id
GROUP BY orders.id_orders 
```

我们的想法是恢复包括邮资在内的订单总价。

*   ordered_items - 包括所有订购的物品（所以可以有多行）
*   订单 - 包括订单的邮费（这里每个订单只有一行）

我遇到的问题是，如果订单在“ordered_items”中包含多个项目，则上述总和多次计算“订单”中的邮资。

如何重写此查询，使邮资只计算一次？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:41:11.350

您不需要子查询，只需将 postage_price 和增值税移出聚合并按它们分组：

```
SELECT sum((ordered_items.price + ordered_items.vat) * ordered_items.qty) + orders.postage_price + orders.postage_vat as total_price
FROM orders
JOIN ordered_items
ON orders.id_orders = ordered_items.order_id
GROUP BY orders.postage_price, orders.postage_vat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:34:03.093

```
SELECT items.total + orders.postage_price + orders.postage_vat) AS total_price
FROM orders
JOIN (SELECT order_id, SUM((ordered_items.price + ordered_items.vat) * ordered_items.qty) AS total
    FROM ordered_items
    GROUP BY order_id) items
ON orders.id_orders = items.order_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:34:05.980

您需要添加分组

```
GROUP BY ordered_items.order_id 
```

# html - 如何添加滚动条？我尝试将溢出：自动添加到正文，但它没有用

> ID：13991967
> 
> 赞同：0
> 
> 时间：2012-12-21T14:30:24.103
> 
> 标签：html, scroll, scrollbar, horizontal-scrolling

我敢肯定，对你们大多数人来说都是一个简单的问题。我在页面内的文本框中使用溢出：自动添加了一个滚动条。用身体尝试了同样的事情，但它不起作用。

如果我更改浏览器窗口的大小，则不会出现滚动条，并且会丢失一半的内容。 [www.mcgregor-beauty.co.uk](http://mcgregor-beauty.co.uk)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:47:55.397

您的问题是您的 html 元素的样式设置`overflow: hidden`为阻止滚动条出现并且只是隐藏了多余的内容。

要修复它，请从您的 html 中删除此声明，或者为 html 元素添加一个覆盖以设置`overflow: auto`为您尝试的 body。

# mercurial - mercurial - 忽略所有合并提交查看分支上的更改

> ID：13991969
> 
> 赞同：9
> 
> 时间：2012-12-21T14:30:28.390
> 
> 标签：mercurial, branch, diff, branching-and-merging

我有一个开发了很长时间的分支。在开发过程中，默认分支多次合并到该分支中。我现在想查看在忽略合并的情况下对该分支所做的所有更改，以确定将其合并为默认值是否安全。

我试过了

`hg diff -r "branch('myBranch') - merge()"`

但它仍然显示合并带来的变化。还尝试遵循此[如何在 mercurial 中显示特定于命名分支的差异，](https://stackoverflow.com/questions/4731190/how-to-show-the-diff-specific-to-a-named-branch-in-mercurial)但

`hg diff -r "branch('myBranch') - branch('default')"`

仍然带来合并带来的变化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T10:58:39.383

您的命令的问题在于，当您执行 a`hg diff`并将其传递几个变更集时，您实际上在这些变更集之间执行了差异，因此您将看到合并结果。

如果您只想查看变更集所做的更改，则可以使用`export`：

```
$ hg export -r "branch('mybranch') and not merge()"
// lists the changes made by each changeset 
```

为了便于查看，您可以将这些输出到名称基于修订/变更集 id 的文件中：

```
$ hg export -r "branch('mybranch') and not merge()" -o "%H.patch" 
```

... 为 中的每个非合并变更集创建一个文件`mybranch`，并将其输出到名为“40 位变更集 id.patch”的文件。如果您更喜欢修订号（仅对您的本地存储库有用，因为修订 id 是本地的），请使用`"%R.patch"`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T15:09:38.663

您**必须**阅读有关[revsets](http://www.selenic.com/hg/help/revsets)语法

你的情况

`hg log -r "branch('myBranch') and ! merge()"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-26T12:21:06.353

以下使用该`log`命令，但使用`--patch`参数它也可以显示修改后的行：

```
hg log --branch my-branch --no-merges --patch 
```

简写：

```
hg log -Mpb my-branch 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-01T17:21:22.897

这是一个非常好的问题，我试图找到一个好的答案很长一段时间，但没有找到一个好的答案。好的，100% 有效的一件事是：

```
hg status     # make sure that you don't have local changes
hg up <target_branch>
hg merge <your branch>
hg diff > merge.diff
hg up -C  # this one cleans the merge 
```

我一直使用这个工作流程，但它并不能完全满足我，因为它需要切换分支（当我实际上可能不想在这个确切的时刻进行实际合并时，我只是在检查那里有什么）

我一直在这里寻找一个好的解决方案，但到目前为止还没有找到。试过那些：

```
hg diff -r "branch('.') and ! merge()"  # this page
hg diff -r "default:branch('.') and not merge()"
hg diff -r "parents(branch(.)):branch('.') and not merge()" 
```

这个问题也讨论过：

*   [Mercurial：我怎样才能只看到合并引入的更改？](https://stackoverflow.com/questions/1919130/mercurial-how-can-i-see-only-the-changes-introduced-by-a-merge) 答案很好：“因此，如果您可以明确定义它，您可能会说服我们其中一位阅读 SO 的 Mercurial 贡献者来实现它。”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-27T20:09:39.587

尝试：

```
 hg diff -r"ancestor(default,my_branch)" -rmy_branch 
```

如果您没有对分支进行任何合并，那么“祖先”将选择原始分支点。如果您已完成合并，则“祖先”将选择最新的合并点。

例如，在下图中，您将获得 520 和 519 之间的差异：

```
@  521 (default)
|
| o  520 (my_branch)
|/|
o |  519
| |
o |  518
| |
o |  517
| |
| o  516
| |
| o  515
| |
| o  514
|/
o  513 
```

在下面更简单的图表中，您将获得 516 和 513 之间的差异：

```
@  517 (default)
|
| o  516 (my_branch)
| |
| o  515
| |
| o  514
|/
o  513 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-24T19:16:00.750

Per [Matt Mackall](http://mercurial.808500.n3.nabble.com/Generating-diffs-without-merged-in-changes-tp3630147p3630470.html)你可能想要的是：

`hg diff -r mainbranchrev -r mywork`

他写：

> 您可能会有“变更集是 delta”或类似的印象，这意味着 Mercurial 可以神奇地将一堆不连续的 delta 链接在一起，以构建一个更大的 delta，这就是您的更改。
> 
> 事实上，Mercurial 比这简单得多。变更集实际上是一个快照：一组完整的完整文件，表示提交时项目的状态。差异只是这两个快照之间的差异。所以当你这样做时：
> 
> hg stat --rev '3408::3575 and user(mdiamond) 而不是 merge()'
> 
> ..status 只是使用结果集的第一个和最后一个变更集来进行计算。
> 
> 当您在开发分支上进行增量合并时，您的工作与主线开发密不可分，而 Mercurial 还不够聪明，无法按照您的要求解开它。最好的办法是将工作的负责人与主分支的负责人进行比较：
> 
> hg diff -r mainbranchrev -r mywork
> 
> ..这将显示您所有的工作以及您必须做的任何合并修复。

# android - 如何在android设备的uiautomator测试用例中打开wifi？

> ID：13991977
> 
> 赞同：6
> 
> 时间：2012-12-21T14:30:49.917
> 
> 标签：android, android-uiautomator

`uiautomator`我想使用android 中的工具打开 wifi 作为测试用例的一部分。我尝试在`uiautomator`测试用例中使用以下代码：

```
WifiManager wi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
      if(wi.isWifiEnabled()){
        wi.setWifiEnabled(false);
      }else{
        wi.setWifiEnabled(true);
    } 
```

但它给出了这个错误：

> Mainclass 未定义“getSystemservice”方法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T22:17:44.717

You can actually use UIAutomator to set the WiFi setting on and off. I wrote the code this evening :)

Here's the code. You can add it to the Android example which is here [http://developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)

Add the following enum at the top of the class

```
private enum OnOff {
    Off,
    On
}; 
```

Add the new code after:

```
 // Validate that the package name is the expected one
    UiObject settingsValidation = new UiObject(new UiSelector()
    .packageName("com.android.settings"));
    assertTrue("Unable to detect Settings", settingsValidation.exists()); 
```

Here is the new code:

```
 UiSelector settingsItems = new UiSelector().className(android.widget.TextView.class.getName());
    UiObject wiFi = appViews.getChildByText(settingsItems, "Wi-Fi");

    // We can click on Wi-Fi, e.g. wiFi.clickAndWaitForNewWindow();
    // So we know we have found the Wi-Fi setting

    UiSelector switchElement = new UiSelector().className(android.widget.Switch.class.getName());
    setSwitchTo(OnOff.Off); // Or set it to On as you wish :)
}   

private void setSwitchTo(OnOff value) throws UiObjectNotFoundException {

    String text;
    UiObject switchObject = getSwitchObject();
    for (int attempts = 0; attempts < 5; attempts++) {
        text = switchObject.getText();
        boolean switchIsOn = switchObject.isChecked();
        final OnOff result;
        if (switchIsOn) {
            result = OnOff.On;
        } else {
            result = OnOff.Off;
        }

        System.out.println("Value of switch is " + switchObject.isSelected() + ", " + text + ", " + switchIsOn);
        if (result == value) {
            System.out.println("Switch set to correct value " + result);
            break;
        } else {
            switchObject.click();
        }
    }
}

private UiObject getSwitchObject() {
    UiObject switchObject = new UiObject(new UiSelector().className(android.widget.Switch.class.getName()));
    assertTrue("Unable to find the switch object", switchObject.exists());
    String text;
    return switchObject;
} 
```

The loop was to compensate for some behaviour I observed, where the click didn't seem to change the switch position.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-23T11:51:24.190

启用 WiFi：
`device.executeShellCommand("svc wifi enable");`

禁用 WiFi：
`device.executeShellCommand("svc wifi disable");`

这些是在您的 UiDevice 上使用的命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-12T13:31:06.880

在 Android 4.2 和 4.4 上用于生产

要在您的代码中打开 Android Wifi 设置：

```
final Intent intent = new Intent(WifiManager.ACTION_PICK_WIFI_NETWORK);
mContext.startActivity(intent); 
```

要使用 UiAutomator 单击开/关开关（在您确定您的活动良好之后）：

```
public void enableWifiOnAndroidWifiSettings(boolean enabled) throws UiObjectNotFoundException {
    final UiSelector wifiSwitchSelector = new UiSelector().className(android.widget.Switch.class.getName());
    UiObject wifiSwitch = UiDevice.getInstance(sInstrumentation).findObject(wifiSwitchSelector);
    if (wifiSwitch.waitForExists(5000) && wifiSwitch.isEnabled()) {
        if (wifiSwitch.isChecked() != enabled) {
            wifiSwitch.click();
        }
    }
} 
```

已知限制：它正在搜索第一个可用的 Switch。如果您有自定义 ROM，或者如果 Android 设置应用程序在未来发展，这可能还不够。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-15T21:34:03.877

在我使用 UIAutomator 进行的套件测试中，我使用：

```
Runtime.getRuntime().exec("\"svc wifi disable\"")

Runtime.getRuntime().exec("\"svc wifi enable\"")

Runtime.getRuntime().exec("\"svc data disable\"")

Runtime.getRuntime().exec("\"svc data enable\"") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T16:26:00.657

您可以通过 adb 启用或禁用 wifi，如下所示

> adb shell sqlite3 /data/data/com.android.providers.settings/databases/settings.db update secure set value=1 where name='wifi_on'; 。出口

但是你不能使用 uiautomator 工具来做同样的事情

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-12-21T18:55:24.990

你不能这样做。UI Automator 测试不作为 Android 框架的一部分运行，因此它无法访问 Android 系统服务。它旨在测试用户界面；它并不声称是一个功能齐全的测试框架。在运行测试之前手动打开 WiFi。

# javascript - 如何使用自己的 css 自定义 google 自定义搜索栏 API

> ID：13991981
> 
> 赞同：0
> 
> 时间：2012-12-21T14:31:00.547
> 
> 标签：javascript, html, css

虽然这可能很简单，但我不知道如何使用我的站点 css 自定义 Google 自定义搜索栏 API。我已经尝试应用几个宽度受限的预定义 css 类，`div`但它的搜索栏似乎仍然不合时宜`iframe`。

这是我的代码：如何将 CSS 应用到它

```
<html>
    <head>
        <div width="100%" id="cse" style="width: 100%;">Loading</div>
        <script src="http://www.google.com/jsapi" type="text/javascript">
        </script>
        <script type="text/javascript"> 
            google.load('search', '1', {language: 'en', style: google.loader.themes.V2_DEFAULT});
            google.setOnLoadCallback(function() {
                var customSearchOptions = {};
                var customSearchControl = new google.search.CustomSearchControl('009437919812836441502:rka9ujkwvwe', customSearchOptions);
                customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET); 
                customSearchControl.draw('cse');
            }, true);
        </script>
    </head>
</html> 
```

或者有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:28:15.203

似乎有可能，如果您给我更多示例代码，也就是您尝试过的 css，我可以看到它不适合您的地方。这是我为限制搜索栏的宽度所做的事情。

```
#cse .gsc-search-box {
   width: 200px;  
}​ 
```

JSFiddle：[示例代码](http://jsfiddle.net/5ZGwx/)

我假设您的 CSS 样式没有比 Google 代码足够高的特异性，所以这就是您看不到应用样式的原因。您的 CSS 样式需要具有比 Google 更大的 CSS 特异性才能使您的样式正常工作。（参考：[CSS 特性：你应该知道的事情](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)）

让我知道这是否有助于您继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:33:50.833

我的第一个建议是不要在`<head>`. 也就是说，将`<div>`你拥有的从头部移动到`<body>`标签。

其次，您绝对可以为 Google 的自定义搜索框设置样式。您需要使用可以检查 DOM 的工具，例如 Chrome 中的 Web Developer Tools 或 Firefox 中的 Firebug（尽管 Firefox 的内置工具现在也很不错）。Google 使用该 div 连接到您的网站并通过 JavaScript 提供更多 DOM 元素。搜索框加载后，您可以使用开发人员工具对其进行检查，并查看它注入的所有其他元素。

您将用来设置样式的主要元素都与`.gsc-input`类相关。~~有一个 Google 文档支持讨论这些东西的样式。稍后我将尝试使用链接查找和编辑此帖子。~~ 这是自定义搜索框和结果样式的[Google 示例](https://developers.google.com/custom-search/docs/api?hl=en#searchbox)。

# testing - 使用 Angularjs 和 requirejs 时在测试中注入

> ID：13991982
> 
> 赞同：0
> 
> 时间：2012-12-21T14:31:05.923
> 
> 标签：testing, mocking, angularjs, requirejs, inject

我目前正在尝试将 AngularJS 与 RequireJS 一起使用，但我不知道如何使测试与注入一起工作。如果没有 RequireJS，我们可以，

**实施**

```
PhoneListCtrl.$inject = ['$scope', '$http'];  
var PhoneListCtrl = ['$scope', '$http', function($scope, $http) { 
    /* constructor body */ 
}]; 
```

**测试**

```
beforeEach(inject(function(_$httpBackend_, $rootScope, $controller) {
  $httpBackend = _$httpBackend_;
  $httpBackend.expectGET('phones/phones.json').
      respond([{name: 'Nexus S'}, {name: 'Motorola DROID'}]);
  scope = $rootScope.$new();
  ctrl = $controller(PhoneListCtrl, {$scope: scope});
})); 
```

但是，当我们使用 RequireJS 时，我们可以将控制器定义如下，

演示控制器.js

```
define(["dependency"], function() {
    /* constructor body */ 
}); 
```

使用此控制器时，我们将其添加为依赖项之一，并且没有变量声明。（让我以“控制器”为例，因为我们最好将其称为“服务”）

一些JS.js

```
define(["demoController"], function(controller) {
     controller.method();
}); 
```

**我的问题**
在使用 RequireJS(AMD) 时，我们如何将 $http、$scope（或其他）注入目标控制器或服务进行测试？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:40:47.933

我做过类似的事情：

```
/*global define, document */

define(['angular', 'jquery'], function (angular, $) {
    'use strict';

    return function () {
        var $injector = angular.bootstrap(document, ['myApp']);
        var $controller = $injector.get('$controller');
        var myController = $controller('myController');
    };
}); 
```

这个想法是 angular.bootstrap 返回一个注入器，它允许您获取服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:28:05.153

我终于通过以下方式使其工作。

```
angular.module('app').controller('MyController', ['$scope', 'dep2', function              ($scope, dep2) {
    $scope.method = function () {//do something};
}]); 
```

我们可以在这样的测试用例中使用这个控制器：

```
inject(function($controller, $rootScope, dep2) {
        scope = $rootScope.$new();
        myController = $controller("MyController",
                {
                    $scope : scope,
                    dep2: dep2
                });
); 
```

# html - 如何将此表转换为 DIV？

> ID：13991991
> 
> 赞同：-4
> 
> 时间：2012-12-21T14:32:06.800
> 
> 标签：html, css, html-table

我有这张桌子：

```
<table border="0" cellspacing="0" cellpadding="0" >
        <tr>
          <td width="100" height="110"><a href="Frankrijk.html"><img src="Images/Landen/Frankrijk.gif" alt="Frankrijk" width="100" height="67" border="0"></a></td>
          <td width="30">&nbsp;</td>
          <td width="100" height="110"><a href="Spanje.html"><img src="Images/Landen/Spanje.gif" alt="Spanje" width="100" height="67" border="0"></a></td>
          <td width="30">&nbsp;</td>
          <td width="100" height="110"><a href="Zuid_Afrika.html"><img src="Images/Landen/ZuidAfrika.gif" alt="Zuid Afrika" width="100" height="67" border="0"></a></td>
          <td width="30">&nbsp;</td>
          <td width="100" height="110"><a href="Argentinie.html"><img src="Images/Landen/Argentinie.gif" alt="Italië" width="100" height="67" border="0"></a></td>
        </tr>
        <tr>
          <td class="detailText" valign="top" nowrap="nowrap" align="center"><a href="Frankrijk.html">Frankrijk</a></td>
          <td>&nbsp;</td>
          <td class="detailText" valign="top" nowrap="nowrap" align="center"><a href="Spanje.html">Spanje</a></td>
         <td>&nbsp;</td>
           <td class="detailText" valign="top" nowrap="nowrap" align="center"><a href="Zuid_Afrika.html">Zuid-Afrika</a></td>
         <td>&nbsp;</td>
           <td class="detailText" valign="top" nowrap="nowrap" align="center"><a href="Argentinie.html">Argentinië</a></td>
        </tr>
        <tr>
            <td colspan="7">&nbsp;</td>
        </tr>

        <tr>
          <td height="110"><a href="Chili.html"><img src="Images/Landen/Chili.gif" alt="Chili" width="100" height="67" border="0"></a></td>
          <td>&nbsp;</td>
          <td height="110"><a href="Australie.html"><img src="Images/Landen/Australie.gif" alt="Italië" width="100" height="67" border="0"></a></td>
          <td>&nbsp;</td>
          <td height="110"><a href="Italie.html"><img src="Images/Landen/Italie.gif" alt="Italië" width="100" height="67" border="0"></a></td>
          <td>&nbsp;</td>
          <td height="110">&nbsp;</td>
        </tr>
        <tr>
          <td class="detailText" valign="top" nowrap="nowrap" align="center"><a href="Chili.html">Chili</a></td>
          <td>&nbsp;</td>
           <td class="detailText" valign="top" nowrap="nowrap" align="center"><a href="Australie.html">Australië</a></td>
         <td>&nbsp;</td>
           <td class="detailText" valign="top" nowrap="nowrap" align="center"><a href="Italie.html">Italië</a></td>
         <td>&nbsp;</td>
           <td class="detailText" valign="top" nowrap="nowrap" align="center">&nbsp;</td>
        </tr>
    </table> 
```

但我想将其转换为 Div 并将它们彼此相邻放置。在我将它们更改为 Divs 的测试中，我使用了以下 CSS。

```
.OverviewContainer{Margin:35px auto;text-align:center;display:inline;margin-left:auto;margin-right:auto;}
.OverviewPicture{width:130px;height:120px;margin-left:auto; margin-right:auto;}
.OverviewText{width:130px;font:12px arial;color:#ffffff;line-height:16px;letter-spacing:.1em;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:50:58.187

忽略这样一个事实，即我也认为这是一个相当糟糕的问题，很可能只是“让别人做这项工作的隐秘请求”（正如@meagar 所说），这很容易回答。此外，正如@Pekka 已经提到的，最好将表格用于表格数据。

HTML

```
<div class="OverviewContainer">
    <a class="OverviewPicture" href="Chili.html">
        <img src="Images/Landen/Chili.gif" alt="Chili">
    </a>
    <a class="OverviewText" href="Chili.html">Chili</a>
</div>

<div class="OverviewContainer">
    <a class="OverviewPicture" href="Australie.html">
        <img src="Images/Landen/Australie.gif" alt="Australie">
    </a>
    <a class="OverviewText" href="Australie.html">Australië</a>
</div>

<div class="OverviewContainer">
    <a class="OverviewPicture" href="Italie.html">
        <img src="Images/Landen/Italie.gif" alt="Italië">
    </a>
    <a class="OverviewText" href="Italie.html">Italië</a>
</div> 
```

CSS

```
.OverviewContainer{
    float: left;
    overflow: hidden;
    margin-right: 5px;
}

.OverviewPicture{
    width: 100px;
}

.OverviewText{
    display: block;
    margin-top: 10px;
}​ 
```

​</p>

# design-patterns - 在 Application 子类中声明对象的缺点是什么？

> ID：13991992
> 
> 赞同：0
> 
> 时间：2012-12-21T14:32:19.017
> 
> 标签：design-patterns, android

我需要存储一个将从数据库中获取数据的 ArrayList，我正在考虑在作为 android.app.Application 类的子类的类中声明 ArrayList，因为在我的应用程序中我经常需要这个来进行搜索、排序等目的.

```
1\. It would be good approach to create get the Database instance in Application subclass.   
2\. Storing a list in the Application subclass. 
```

我不确定这是正确的方法，我想知道这种方法的缺点是什么。建议是否可以使用其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:39:40.540

尽管您必须在清单上声明您的应用程序，但我认为没有任何缺点。

但是您可以轻松地创建一个单例来实现相同的结果，恕我直言，这是一种更清洁的方式。

**编辑：**

我刚刚看到你的编辑，我正在编辑我的答案：

同样的事情也发生在 DB 对象上。使用单例！并在第一次访问时打开数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:41:34.113

如果我对您的理解正确，您可以设置一个类来处理您的数据库操作，然后在需要时创建对该类的引用，并传递您需要的任何参数。`ArrayList`如果这就是你需要的，你可以有一个函数来返回一个。根据您的需要，您可以将其作为需要它们的活动中的接口来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:52:23.617

在决定是使用 Singleton 设计模式还是使用 Android 提供的 Application 类之前，您应该考虑一些事项。

您可能会在这些 SO 帖子中找到一些可以帮助您选择的论点：

*   [单身人士有什么不好的？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)
*   [Android中的单例与应用程序上下文？](https://stackoverflow.com/questions/3826905/singletons-vs-application-context-in-android)

这是一个关于 Android 数据库的精彩教程：

*   [Android SQLite 数据库和 ContentProvider - 教程](http://www.vogella.com/articles/AndroidSQLite/article.html)

# android - 如何在android中实现始终打开“移动数据”？

> ID：13991993
> 
> 赞同：-1
> 
> 时间：2012-12-21T14:32:26.243
> 
> 标签：android

我要求在 android 中始终将移动数据“打开”。如何通过代码实现？我需要注册一些广播接收器或类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:37:00.897

您无法控制何时开启移动数据。您只能注册一个接收器，以便在它更改时被告知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:37:53.510

是的，您需要 CONNECTIVITY_CHANGE 接收器的寄存器，

您可以使用我的连接更改助手来执行此操作，

[https://github.com/talhakosen/ConnectionListener](https://github.com/talhakosen/ConnectionListener)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T05:55:32.517

当用户选择始终打开时，也许解决方案可以是：如果尚未连接，则连接，如果已连接，则注册接收器以侦听状态变化，在断开状态接收时，再次连接..请建议这种方法是否正确？

# python - Python 脚本：将随机日期格式转换为固定的 yyyy-mm-dd

> ID：13991995
> 
> 赞同：0
> 
> 时间：2012-12-21T14:32:37.477
> 
> 标签：python, date, converter

我对python很陌生，对它了解不多，但我需要制作一个小脚本，当有人以任何格式输入日期时，它会将其转换为 yyyy-mm-dd 格式。该脚本应该能够共享输入日期的元素，并识别模式。

对某些人来说这可能很容易而且很明显，但我自己做一个是我头上的事。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:38:18.373

这对自己来说是一项艰巨的任务；你可能想看看[`dateutil`](http://labix.org/python-dateutil)哪个有一个相当健壮的[`parse()`](http://labix.org/python-dateutil#head-c0e81a473b647dfa787dc11e8c69557ec2c3ecd2)方法，你可以用它来尝试解析任意格式的日期字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:38:19.463

您可以`strftime`用于输出（您的格式是`"%Y-%M-%d"`）。

对于解析输入，有一个相应的函数 - `strptime`。但是您将无法处理“任何格式”。你必须首先知道你得到了什么。否则，您将无法区分（例如）美国日期和其他日期。例如，01.02.03 是什么意思？这可能是：

*   年年月日
*   dd.mm.yy
*   mm.dd.yy

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:43:28.643

你可以做这样的事情（未经测试）

```
import locale
import datetime
...
parsedDate = datetime.strptime(your_string, locale.D_FMT)
print datetime.strftime(parsedDate, "%Y-%M-%d") 
```

这假定用户将使用自己的本地日期约定。