# StackOverflow 问答 14319000-14319999

# android - 在服务和活动之间传递参数

> ID：14319005
> 
> 赞同：2
> 
> 时间：2013-01-14T13:09:25.070
> 
> 标签：android, android-intent, service, android-activity, bundle

将浮点值从服务传递到活动的代码：

```
call.putExtra("floatvalue", fv);
call.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(call); 
```

在活动中获取浮点值的代码：

```
Bundle extras=new Bundle();
float value = extras.getFloat("floatvalue"); 
```

问题是无论从服务作为浮点值传递什么，我在活动中都只得到 0.0。

代码有什么问题？

**编辑**

我将活动中的代码更改为

```
Bundle extras=new Bundle();
extras=getIntent().getExtras();
float value = extras.getFloat("floatvalue"); 
```

它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:17:02.663

试试这个：

```
float value =  getIntent().getFloatExtra("floatvalue", 0.0f); 
```

由于您在启动它之前将浮动添加到您的意图中，因此您应该从该意图而不是从捆绑中获取浮动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:22:54.083

在您的服务中定义一个侦听器，如下所示：

```
// listener ----------------------------------------------------
static ArrayList<OnNewLocationListener> arrOnNewLocationListener =
        new ArrayList<OnNewLocationListener>();

// Allows the user to set a OnNewLocationListener outside of this class and
// react to the event.
// A sample is provided in ActDocument.java in method: startStopTryGetPoint
public static void setOnNewLocationListener(
        OnNewLocationListener listener) {
    arrOnNewLocationListener.add(listener);
}

public static void clearOnNewLocationListener(
        OnNewLocationListener listener) {
    arrOnNewLocationListener.remove(listener);
}

// This function is called after the new point received
private static void OnNewLocationReceived(float myValue) {
    // Check if the Listener was set, otherwise we'll get an Exception when
    // we try to call it
    if (arrOnNewLocationListener != null) {
        // Only trigger the event, when we have any listener
        for (int i = arrOnNewLocationListener.size() - 1; i >= 0; i--) {
            arrOnNewLocationListener.get(i).onNewLocationReceived(
                    myValue);
        }
    }
}
} 
```

并像这样在您的活动中注册它：

```
 OnNewLocationListener onNewLocationListener = new OnNewLocationListener() {
            @Override
            public void onNewLocationReceived(float myValue) {

                //use your value here

                MyService.clearOnNewLocationListener(this);
            }
        };

        // start listening for new location
        MyService.setOnNewLocationListener(
                onNewLocationListener); 
```

有关更多信息，请查看此链接：[https ://stackoverflow.com/a/7709140/779408](https://stackoverflow.com/a/7709140/779408)

# modeling - 序列图和协作图的区别

> ID：14319015
> 
> 赞同：19
> 
> 时间：2013-01-14T13:10:12.297
> 
> 标签：modeling, uml, tool-uml

当我阅读UML规范上层结构时，有序列图和协作图，那么它们之间有什么区别

## 序列图和协作图？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T16:11:21.867

序列图和协作图都旨在描述对象之间的动态交互。你能描述的信息基本相同，只是两个模型的侧重点不同：

*   序列图通过沿（垂直）时间线显示调用和响应以及通过显式显示对象的激活时间来突出显示时间方面。序列图显示对象如何根据消息的时间序列相互通信。时间流是这些图中最明显的方面，因为消息是根据垂直时间线排序的，并且与这些消息关联的对象的生命周期也会被报告。下图（取自我们的[书](http://www.modeldrivenstar.org/2012/10/model-driven-software-engineering-the-book.html)）显示了描述 3 个对象（Shipment、Invoice 和 PartList 类的实例）以及彼此之间交换的消息的序列图示例。交互图描述了系统的执行场景。

![UML 序列图示例](../Images/ceb20a6b696ecffc3d3f5eb5d7ec5ff0.png)

*   协作图旨在通过定义彼此之间流动的消息来显示对象之间发生的通信。它们基本上包括将通信动作叠加在对象图上。通过对与顺序标签的交互进行编号，这里也可以显示时间方面。协作图根据链接（连接可以交互的元素的无向实线）和流经链接的消息来显示对象或类之间的交互。这同时描述了系统的某种静态结构（链接和节点）和动态行为（消息）。一个例子如下所示。

![UML 协作图示例](../Images/c8f972d4f88851811f5f2175a2c2ae13.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T15:07:03.297

UML1：这些图是相同的，但从不同的角度呈现数据。

UML2：将协作图重命名为通信图（有误解，因为人们认为协作图是用来展示协作的）。这些图几乎相同，但目前的序列图有更多的可视化可能性（例如，组合片段、状态不变量）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-29T12:27:40.137

序列图以时间序列方式指定交互，该交互可能在对象和/或类之间。这些图是在早期细化阶段创建的，其中用例的每个流程都是根据序列定义的，即在每个步骤之后接下来会发生什么。这种表示对于理解和与客户讨论用例非常有帮助，两者都可以得出所有可能的功能方面。另一方面，协作图提供了对象之间的直接交互。当您在设计关系的实现时，这些图似乎更多地用于开发的设计阶段。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-16T18:04:34.757

序列图和协作图是有区别的。序列图及时显示对象交互（因此无需对消息进行编号）。但是协作图没有及时显示对象交互。（需要给消息编号）。

**笔记：**

现在协作图也称为通信图。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T13:15:26.397

*序列图是动态的，更重要的是，它是按时间排序的。协作图在实现的目的上与序列图非常相似；换句话说，它显示了系统中对象的动态交互。协作图的一个显着特征是它显示了对象及其与系统中其他对象的关联，除了它们如何相互交互。对象之间的关联不在序列图中表示。*

链接： http: [//www.developer.com/design/article.php/3102981/Collaboration-Diagram-in-UML.htm](http://www.developer.com/design/article.php/3102981/Collaboration-Diagram-in-UML.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-15T11:31:45.983

*   使用序列图来显示时间并强调交互的顺序或顺序。

*   使用沟通图强调参与者之间的联系。通信图可以是对对象图的有益补充。

# maven - 在 Maven 中跟踪托管依赖项版本

> ID：14319018
> 
> 赞同：8
> 
> 时间：2013-01-14T13:10:24.607
> 
> 标签：maven, dependencies, pom.xml

假设我有一个具有很多依赖项的复杂项目。依赖项的版本由许多导入范围 pom 管理。我的项目依赖于 artifact `group:artifact`，它依赖于 artifact `group:transitive-dependency`。当我跑步时，`dependency:tree`我看到这样的东西：

```
+- group:artifact:jar:1.3
   +- group:transitive-dependency:jar:1.1 (version managed from 1.3) 
```

问题是`group:artifact:1.3`需要`group:transitive-dependency`1.3 或更高版本。当然，其中一个导入 pom 正在强制使用错误的版本。但是除了搜索所有这些之外，还有什么方法可以知道是哪一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-18T05:25:33.720

您应该尝试使用 maven-enforcer-plugin 并将其配置为执行 DependencyConvergence，例如

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-enforcer-plugin</artifactId>
    <version>1.2</version>
    <executions>
      <execution>
        <id>enforce</id>
        <configuration>
          <rules>
            <DependencyConvergence/>
          </rules>
        </configuration>
        <goals>
          <goal>enforce</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

这将向您显示哪些顶级依赖项在其依赖项树中具有不同版本的其他依赖项。然后，您可以使用排除项来抑制您不想要的依赖项变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-04T09:39:10.083

当 2 个或更多父 Pom 与同一个工件发生冲突时，就会发生这种情况。

例如：

```
[INFO] |  \- com.rbs.gbm.risk:framework-core:jar:1.6.6:compile
[INFO] |     +- com.rbos.gbm.risk:log4jextensions:jar:2.3:compile (version managed from 2.2)
[INFO] |     +- oro:oro:jar:2.0.8:compile 
```

就我而言，framework-core 提到了 log4jextentsions 2.2。我的超级 pom 说 log4jextentsions 2.3。不知何故，框架核心说服 maven 使用 log4jextentsions 2.2。

后来当我更新 framework-core pom 以使用 2.3 时：

```
[INFO] |  \- com.rbs.gbm.risk:framework-core:jar:1.6.6:compile
[INFO] |     +- com.rbos.gbm.risk:log4jextensions:jar:2.3:compile
[INFO] |     +- oro:oro:jar:2.0.8:compile 
```

# sql-server - SQL Server 2005：SSIS - 将启用宏的电子表格导入数据库

> ID：14319019
> 
> 赞同：1
> 
> 时间：2013-01-14T13:10:25.543
> 
> 标签：sql-server, ssis

SQL Server 2005 不允许导入启用宏的电子表格，当我们选择 excel 作为提供程序并提供此启用宏的电子表格时，它会给出文件类型错误。

任何人都可以建议他们是否尝试在 sql server 中使用 SSIS 导入启用宏的电子表格。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:45:13.117

一些简单的解决方案需要安装 Microsoft Access Database Engine 2010 Redistributable： [http ://devinknightsql.wordpress.com/2012/06/29/using-excel-macro-xlsm-enabled-files-in-ssis/](http://devinknightsql.wordpress.com/2012/06/29/using-excel-macro-xlsm-enabled-files-in-ssis/)

# ruby-on-rails - devise_invitable 参数消失

> ID：14319022
> 
> 赞同：1
> 
> 时间：2013-01-14T13:10:29.770
> 
> 标签：ruby-on-rails, devise, devise-invitable

我的设计直到几天前都运行良好。似乎参数在发送电子邮件之前的某个地方丢失了：这是确认设计正在将电子邮件保存在数据库中的堆栈跟踪：

```
Processing by Devise::InvitationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9Cj9YYy7gPbVbplSAHs+a3DkUxAYU00oMJUG11dIMAI=", "athlete"=>{"email"=>"asdfasdf@asdf.dk"}, "commit"=>"Send an invitation"}
  Admin Load (0.2ms)  SELECT "admins".* FROM "admins" WHERE "admins"."id" = 1 LIMIT 1
  Athlete Load (0.2ms)  SELECT "athletes".* FROM "athletes" WHERE "athletes"."email" = 'asdfasdf@asdf.dk' LIMIT 1
  Athlete Exists (0.2ms)  SELECT 1 AS one FROM "athletes" WHERE "athletes"."email" = 'asdfasdf@asdf.dk' LIMIT 1
  Athlete Load (0.1ms)  SELECT "athletes".* FROM "athletes" WHERE "athletes"."invitation_token" = 'aDop2Zd7DUSu94zydpy2' LIMIT 1
   (0.1ms)  begin transaction
  SQL (0.6ms)  INSERT INTO "athletes" ("current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "invitation_accepted_at", "invitation_limit", "invitation_sent_at", "invitation_token", "invited_by_id", "invited_by_type", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "asdfasdf@asdf.dk"], ["encrypted_password", ""], ["invitation_accepted_at", nil], ["invitation_limit", nil], ["invitation_sent_at", Mon, 14 Jan 2013 12:59:46 UTC +00:00], ["invitation_token", "aDop2Zd7DUSu94zydpy2"], ["invited_by_id", 1], ["invited_by_type", "Admin"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0]]
   (619.1ms)  commit transaction
Completed 500 Internal Server Error in 701ms

ArgumentError (wrong number of arguments (2 for 1)):
  devise_invitable (1.1.4) lib/devise_invitable/mailer.rb:5:in `invitation_instructions'
  actionpack (3.2.11) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.11) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.11) lib/abstract_controller/rendering.rb:45:in `process'
  actionmailer (3.2.11) lib/action_mailer/base.rb:458:in `process'
  actionmailer (3.2.11) lib/action_mailer/base.rb:452:in `initialize'
  actionmailer (3.2.11) lib/action_mailer/base.rb:439:in `new'
  actionmailer (3.2.11) lib/action_mailer/base.rb:439:in `method_missing'
  devise (2.2.1) lib/devise/models/authenticatable.rb:159:in `send_devise_notification'
  devise_invitable (1.1.4) lib/devise_invitable/model.rb:168:in `deliver_invitation'
  devise_invitable (1.1.4) lib/devise_invitable/model.rb:132:in `invite!'
  devise_invitable (1.1.4) lib/devise_invitable/model.rb:240:in `_invite'
  devise_invitable (1.1.4) lib/devise_invitable/model.rb:252:in `invite!'
  devise_invitable (1.1.4) app/controllers/devise/invitations_controller.rb:16:in `create'
  actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (3.2.11) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.11) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.11) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.11) lib/active_support/callbacks.rb:447:in `_run__4580775493151678536__process_action__2740541638652288271__callbacks'
  activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.11) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.11) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.11) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.11) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.11) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.11) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.11) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.11) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.11) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:36:in `call'
  actionpack (3.2.11) lib/action_dispatch/routing/mapper.rb:42:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__1152214596362570374__call__1601018742063366623__callbacks'
  activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.11) lib/rails/engine.rb:479:in `call'
  railties (3.2.11) lib/rails/application.rb:223:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
  thin (1.5.0) lib/thin/connection.rb:81:in `block in pre_process'
  thin (1.5.0) lib/thin/connection.rb:79:in `catch'
  thin (1.5.0) lib/thin/connection.rb:79:in `pre_process'
  thin (1.5.0) lib/thin/connection.rb:54:in `process'
  thin (1.5.0) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.0) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.0) lib/eventmachine.rb:187:in `run'
  thin (1.5.0) lib/thin/backends/base.rb:63:in `start'
  thin (1.5.0) lib/thin/server.rb:159:in `start'
  rack (1.4.4) lib/rack/handler/thin.rb:13:in `run'
  rack (1.4.4) lib/rack/server.rb:268:in `start'
  railties (3.2.11) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.11) lib/rails/commands.rb:55:in `block in <top (required)>'
  railties (3.2.11) lib/rails/commands.rb:50:in `tap'
  railties (3.2.11) lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `require'
  script/rails:6:in `<main>'

  Rendered /Users/anderskonring/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/anderskonring/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/anderskonring/.rvm/gems/ruby-1.9.3-p194/gems/actionp 
```

我试图找出错误隐藏的位置，但我很确定这是设计的默认配置。奇怪的是，我的浏览器显示电子邮件不再是参数的一部分：

```
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"9Cj9YYy7gPbVbplSAHs+a3DkUxAYU00oMJUG11dIMAI=",
 "athlete"=>{},
 "commit"=>"Send an invitation"} 
```

不知道它是否有帮助，但我也在发布我的路线：

```
App::Application.routes.draw do

  root :to => 'home#index'

  # Devise for admins and athletes but no registration possible
  # without an invitation

  devise_for :admins do
    get 'admins/edit' => 'devise/registrations#edit', :as => 'edit_admins_registration'
    put 'admins' => 'devise/registrations#update', :as => 'admin_registration'
  end

  devise_for :athletes, :except => :invitable do
    get 'athletes/edit' => 'devise/registrations#edit', :as => 'edit_athletes_registration'
    put 'athletes' => 'devise/registrations#update', :as => 'athlete_registration'
  end

  # Common ressource url for both athletes and admins
  # events are nested for athletes (note: athlete --hasmany--> events)

  resources :athletes do 
    resources :events, :only => [:index, :show] 
    resources :attachments, :only => [:create, :index, :new, :destroy]
    post 'exportcal' => 'athletes#exportcal'        
  end 
  resources :admins
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:15:32.147

我也发生了同样的事情。该问题已在此处讨论并解决：

[https://github.com/scambra/devise_invitable/issues/265](https://github.com/scambra/devise_invitable/issues/265)

我的解决方案：

```
gem 'devise'
gem 'devise_invitable', :git => "git://github.com/scambra/devise_invitable.git", :branch => 'master' 
```

目前这给了我：

```
Using devise (2.2.1) 
Using devise_invitable (1.1.4) from git://github.com/scambra/devise_invitable.git (at master) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:30:29.917

哇，这花了我好几个小时。嗯，这是设计和设计的版本的问题。经过几个小时浏览库和 git 存储库后，我发现这种组合在我的 Gemfile 中有效。

```
gem 'devise', :git => "git://github.com/plataformatec/devise.git", :branch => 'master'
gem 'devise_invitable', '~> 1.0.0' 
```

如果您知道如何使用没有错误的最新版本，请发表评论。

# python - 使用python找出谁在linux上登录

> ID：14319023
> 
> 赞同：0
> 
> 时间：2013-01-14T13:10:29.970
> 
> 标签：python, linux

我有 8 台服务器要监控。所有服务器都安装了龙卷风 python 服务器。其中一个服务器是一个监视器，它会轮询其他服务器并在出现问题时通过 SMS 提醒我。

其中一个警报是当用户登录到其中一台服务器时。

如何使用 Python 检测谁在我的 Ubuntu 服务器上登录？我需要将登录的用户返回到主监视器。我希望这能让事情清楚..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T13:10:29.970

我在网上找到的最好的东西是`psutil`. 请参阅[psutil 文档](https://psutil.readthedocs.io/en/latest/)

首先安装 psutil ：

```
pip install psutil 
```

之后一切都很简单，例如从终端运行 python 控制台：

```
import psutil 

psutil.users() 
```

**输出：**

```
[user(name='root', terminal='pts/0', host='your-local-host-from-isp.net',
started=1358152704.0)] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T13:13:33.810

使用该[`subprocess`](http://docs.python.org/library/subprocess.html)模块，然后运行命令`who`。

```
In [5]: import subprocess

In [6]: subprocess.check_output("who")
Out[6]: 'monty    pts/0        2013-01-14 16:21 (:0.0)\n' 
```

`who | wc -l`您可以使用:获取当前登录次数

```
In [42]: !who
monty    pts/2        2013-01-14 19:09 (:0.0)
monty    pts/0        2013-01-14 19:07 (:0.0)

In [43]: p=Popen(["who"],stdout=PIPE)

In [44]: Popen(["wc","-l"],stdin=p.stdout).communicate()[0]
2 
```

用户名称：

```
In [54]: users=check_output("who")

In [55]: set([x.split()[0] for x in users.splitlines()])
Out[55]: set(['monty']) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T13:13:02.343

```
from subprocess import Popen, PIPE, STDOUT

who = Popen(['who'],stdin=PIPE, stdout=PIPE, stderr=STDOUT)
print who.stdout.read()

# Output 
>>> sudo_O  :0           2013-01-14 11:48 (:0)
>>> sudo_O  pts/0        2013-01-14 11:48 (:0)
>>> sudo_O  pts/1        2013-01-14 12:41 (:0)
>>> sudo_O  pts/2        2013-01-14 12:42 (:0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:14:35.000

如果您不想安装 3-rd 方软件。您可以随时运行 unix **who**实用程序

```
import os
os.popen('who').read() 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-14T13:42:12.660

```
In [1]: import subprocess
In [2]: print subprocess.check_output("who").split()[0]
Out[3]: 'rikatee' 
```

# c# - Rails 堆栈的 .NET 替代方案是什么？

> ID：14319037
> 
> 赞同：0
> 
> 时间：2013-01-14T13:11:23.263
> 
> 标签：c#, .net, ruby-on-rails

我认为它类似于 MVC4 + LINQ（或者可能是 NHibernate？）

我正在潜入 .NET 世界（再次），并希望与最好的一起去。有什么建议和意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:12:44.340

没有确切的等价物。如果需要，您可以使用 ASP.NET MVC + Entity Framework (NHibernate) 的组合。

# iphone - 滚动指示器的不正确行为

> ID：14319046
> 
> 赞同：0
> 
> 时间：2013-01-14T13:12:16.963
> 
> 标签：iphone, uiscrollview, scroll, uiscrollviewdelegate

我有`UIScrollView`。我使用以下代码设置 contentOffset ：

```
 [UIView animateWithDuration:0.2 delay:0 options:UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionCurveEaseOut animations:^{
    [comicsScrollView setContentOffset:CGPointMake(comicsScrollView.contentOffset.x, currentView.frame.origin.y + currentView.bounds.size.height/2 - comicsScrollView.bounds.size.height/2) animated:NO];
        } completion:^(BOOL finished) {
     }]; 
```

进入

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate 
```

方法和相同的代码进入

```
- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView 
```

当我进行垂直滚动时 - 滚动指示器的行为不正确，它会跳跃或保持在先前的位置。

我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:22:40.607

该`setContentOffset`呼叫可以为您处理动画。通过`animated:YES`并失去`UIView animationWithDuration:`块。

换句话说，试试这个：

```
[comicsScrollView setContentOffset:CGPointMake(comicsScrollView.contentOffset.x,     
   currentView.frame.origin.y + currentView.bounds.size.height/2 -    
   comicsScrollView.bounds.size.height/2) animated:YES];
} completion:nil]; 
```

# jsf - SessionScoped 控制器不工作

> ID：14319052
> 
> 赞同：1
> 
> 时间：2013-01-14T13:12:38.803
> 
> 标签：jsf, session, jakarta-ee, javabeans

编辑：好的，所以我尝试设置一些 console.writes 来检查发生了什么......似乎我的注销脚本在导航时被调用。但我不会在任何地方调用它，除非在我的注销按钮上。

这是我的模板代码：

```
<div class="navbar">
    <div class="navbar-inner">
        <ul class="nav">
            <li class="active"><a href="#{root}index.xhtml">Home</a></li>
            <li><a href="#{root}races/list.xhtml">Races</a></li>
            <li><a href="#{root}horses/list.xhtml">Horses</a></li>
            <h:panelGroup rendered="#{memberController.logged == true}">
                <li><a href="#{root}profile/history.xhtml">History</a></li>
                <li><a href="#" onclick="#{memberController.logout()}">Logout</a></li>
            </h:panelGroup>
            <h:panelGroup rendered="#{memberController.logged == false}">
                <li><a href="#{root}users/login.xhtml">Login</a></li>
                <li><a href="#{root}users/register.xhtml">Create Account</a></li>
            </h:panelGroup>
        </ul>
    </div>
</div> 
```

* * *

原始信息：

我正在为我的学校项目（Java EE）创建一个网站......这是我们这样做的第一年。现在因为这是夜校，只有一个学期的学习时间，你可能会发现我的做事方式并不是最好的:)

因此，首先，我正在尝试创建一个*登录功能，但我们可以使用一个**简单的会话范围成员对象*来代替那些数百行安全代码。

所以这里有一些我的课程：

**会员等级：**

```
@Entity
@Table(name = "members")
public class Member implements Serializable {
    //+ Getters, setters, HashCode and equals

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    private long id;
    private double money;

    @NotNull(message = "Username cannot be null")
    @Size(min = 4, message = "Username should be of minimum 4 characters")
    private String userName;

    @NotNull(message = "Password cannot be null")
    @Size(min = 4, message = "Password should be of minimum 4 characters")
    private String password;

    @PostPersist
    private void initDefault() {
        this.money = 500;
    }
} 
```

**MemberBean 类：**

```
@Stateless
public class MemberBean {

    @PersistenceContext(unitName="HorseRacingPU")
    private EntityManager em;

    public Member getMember(long id){
        return em.find(Member.class, id);
    }

    public Member getMember(String username, String password){
        TypedQuery<Member> q = em.createQuery("SELECT u FROM Member u WHERE u.userName=?1 AND u.password=?2", Member.class);
        q.setParameter(1, username);
        q.setParameter(2, password);
        return q.getSingleResult();
    }

    public List<Member> getAllMembers(){
        TypedQuery<Member> q = em.createQuery("SELECT u FROM Member u", Member.class);
        return q.getResultList();
    }

    public Member addOrUpdateMember(Member u){
        Member original = em.find(Member.class, u.getId());
        if(original == null){
            em.persist(u);
            return u;
        }else{
            return em.merge(u);
        }
    }

    public Member deleteMember(long id){
        Member original = em.find(Member.class, id);
        if(original != null){
            em.remove(original);
        }
        return original;
    }
} 
```

**成员控制器类：**

```
@SessionScoped
public class MemberController implements Serializable {

    @EJB
    private MemberBean bean;
    private String username;
    private String password;
    private Member member;
    private boolean logged = false;
// + their getters and setters

    public List<Member> getAllMembers() {
        return bean.getAllMembers();
    }

    public String login() {
        member = bean.getMember(username, password);
        if (member != null) {
            logged = true;
            return "/races/list.xhtml?faces-redirect=true";
        }
        return "/users/login.xhtml?faces-redirect=true";
    }

    public String logout() {
        FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
        return "/index.xhtml?faces-redirect=true";
    }

    public void checkLogin(ComponentSystemEvent e) {
        if (!logged) {
            FacesContext context = FacesContext.getCurrentInstance();
            ConfigurableNavigationHandler handler = (ConfigurableNavigationHandler) context.getApplication().getNavigationHandler();
            handler.performNavigation("/users/login.xhtml?faces-redirect=true");
        }
    }

    public Member getMember() {
        return member;
    }

    public void submit() {
        bean.addOrUpdateMember(member);
    }
} 
```

我得到的*主要错误如下：*

> 信息：处理尝试重置响应的错误时出现异常。

可以在此处找到更具体的详细错误：http: [//pastebin.com/h5nTNnes](http://pastebin.com/h5nTNnes)

所以发生的事情是，当我登录时，一切正常。在我*导航*到另一个 url 的那一刻（在被转发到 /races/list 之后）我被*注销了*。当我使用 checkLogin() 时，错误本身就会显示：

```
<f:event type="preRenderView" listener="#{memberController.checkLogin}" /> 
```

我不确定这是否相关，但是当我在没有任何演示数据（或使用错误凭据）的情况下登录时，我得到一个评估异常并且无法检索任何实体。这里有更多细节： http: [//pastebin.com/Tv9mQ1K9](http://pastebin.com/Tv9mQ1K9)

这可能是什么？我现在挠了 3 天，似乎在任何地方都找不到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:10:12.097

这，

```
<li><a href="#" onclick="#{memberController.logout()}">Logout</a></li> 
```

是不正确的。

该`onclick`属性应引用 JavaScript 处理程序。例如`alert('peek-a-boo');`。JSF/EL 将其视为普通字符串，并期望该`logout()`方法返回一些 JavaScript 代码`String`，然后将其内联到 HTML 结果中。想象一下该方法实际返回`alert('peek-a-boo');`了，那么最终结果（正如您在浏览器中通过右键单击*查看源代码*所看到的）将是这样的：

```
<li><a href="#" onclick="alert('peek-a-boo');">Logout</a></li> 
```

但是，在您的特定情况下，您实际上是在执行注销并返回字符串值`/index.xhtml?faces-redirect=true`. 所以生成的 HTML 最终是

```
<li><a href="#" onclick="/index.xhtml?faces-redirect=true">Logout</a></li> 
```

这是无效的 JS 代码。但这不是主要问题：用户没有点击链接就被注销了！

您需要一个完整的 JSF 命令组件。例如`<h:commandLink>`。

```
<li><h:form><h:commandLink value="Logout" action="#{memberController.logout()}"/></h:form></li> 
```

该方法仅在实际单击链接时才调用，这正是您所需要的。

# python - 基于sql数据库更新网页

> ID：14319056
> 
> 赞同：0
> 
> 时间：2013-01-14T13:12:58.547
> 
> 标签：python, database, web

作为一个非网络开发人员，我真的很想你能指出我这样做的“正确”方法。

我构建了**一个定期填充和更新数据库**的应用程序（准确地说是 sqlite）。我将排行榜存储在我的数据库中，并希望在网页中显示它们。

由于我的排行榜可以随时更改，因此我需要网页是动态的，无论是基于时间的触发器还是数据库更改时。

我正要为此使用 javascript，因为我意识到我的数据库托管在我的服务器上，所以客户端 js 可能无法工作。

有什么想法吗？

由于我的应用程序是用 Python 构建的，我宁愿避免使用 php 解决方案，而是使用更多“时尚”技术（js、ruby、python、???随便）

谢谢！

好的，鉴于我现在在这里得到的关键字几乎完全相同： [Notify user on database change? JavaScript/AJAX](https://stackoverflow.com/questions/2626029/notify-user-on-database-change-javascript-ajax)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:41:15.833

这就是 Ajax 的用途。您在前端编写 Javascript，使用 Ajax 调用服务器端代码以返回数据库内容，然后在收到响应时更新您的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:48:16.833

您需要在客户端而不是服务器上使用 javascript。您的 javascript 代码将进行异步调用（使用 ajax）以检查数据库是否更改并相应地更新网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:14:04.763

您可以使用 javascript 定期轮询服务器端。或者，您可以使用 javascript 创建（可能使用 SockJS 或 SocketIO 之类的库）一个 websocket 连接，该连接可以在数据更改时将数据实际推送到客户端。我在服务器端使用 Tornado 的 websocket 支持的许多项目中执行此操作。

# facebook - 从 fql 获取邀请者

> ID：14319058
> 
> 赞同：2
> 
> 时间：2013-01-14T13:13:05.977
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我试图找出谁邀请了 Facebook 活动中的每个用户。我是活动的管理员。有什么办法吗？

我尝试使用`inviter`from `event_member`，但它`null`为所有用户返回，除了我自己。

# java - 如何验证 jtextfield 只接受整数

> ID：14319064
> 
> 赞同：2
> 
> 时间：2013-01-14T13:13:29.227
> 
> 标签：java, swing

> **可能重复：**
> [将 JTextField 输入限制为整数](https://stackoverflow.com/questions/11093326/restricting-jtextfield-input-to-integers)
> [检测 JTextField “取消选择”事件](https://stackoverflow.com/questions/14305921/detecting-jtextfield-deselect-event)

`JTextField`如果用户输入除数字以外的任何字符，我需要通过只允许用户在其中输入整数值来验证 a ，`JOptionPane.show`应该出现一个消息框，显示输入的值不正确并且只允许整数数字。我已将其编码为数字值，但我还需要丢弃字母

```
public void keyPressed(KeyEvent EVT) {
    String value = text.getText();
    int l = value.length();
    if (EVT.getKeyChar() >= '0' && EVT.getKeyChar() <= '9') {
        text.setEditable(true);
        label.setText("");
    } else {
        text.setEditable(false);
        label.setText("* Enter only numeric digits(0-9)");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T13:17:04.343

除了使用 JFormattedTextField，您可以编写一个自定义 JTextField，其中包含仅允许整数的文档。我只喜欢更复杂的掩码的格式化字段......看看。

```
import javax.swing.JTextField;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.Document;
import javax.swing.text.PlainDocument;

/**
 * A JTextField that accepts only integers.
 *
 * @author David Buzatto
 */
public class IntegerField extends JTextField {

    public IntegerField() {
        super();
    }

    public IntegerField( int cols ) {
        super( cols );
    }

    @Override
    protected Document createDefaultModel() {
        return new UpperCaseDocument();
    }

    static class UpperCaseDocument extends PlainDocument {

        @Override
        public void insertString( int offs, String str, AttributeSet a )
                throws BadLocationException {

            if ( str == null ) {
                return;
            }

            char[] chars = str.toCharArray();
            boolean ok = true;

            for ( int i = 0; i < chars.length; i++ ) {

                try {
                    Integer.parseInt( String.valueOf( chars[i] ) );
                } catch ( NumberFormatException exc ) {
                    ok = false;
                    break;
                }

            }

            if ( ok )
                super.insertString( offs, new String( chars ), a );

        }
    }

} 
```

如果您使用 NetBeans 构建您的 GUI，您只需将常规 JTextFields 放入您的 GUI 和创建代码中，您将指定 IntegerField 的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:16:35.577

有一个组件：格式化文本字段： [http ://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T13:16:46.193

使用`JFormattedTextField`能力。看看[例子](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)。

# macos - 哪个版本的 Mac OS X 首次包含临时例外权利？

> ID：14319066
> 
> 赞同：6
> 
> 时间：2013-01-14T13:13:33.857
> 
> 标签：macos, sandbox, appstore-sandbox

我知道沙盒是在 Mac OS X Lion (10.7) 中引入的，但临时异常权利，特别是 com.apple.security.temporary-exception.files.home-relative-path.read-write 是在后来的 10.7.x 中引入的更新。哪个 10.7.x 更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:37:12.613

它的 10.7.2

[签入此博客链接](http://mjtsai.com/blog/2011/09/)

# asp.net - 执行带参数的查询时 SqlCommand 很慢

> ID：14319069
> 
> 赞同：1
> 
> 时间：2013-01-14T13:13:53.133
> 
> 标签：asp.net, sql-server, performance, ado.net, oledbdataadapter

DbDataAdapter.Fill() 在执行参数时非常慢！

我有一个内部有 2 个参数的查询，当我将这些参数硬编码到查询中时，执行需要 1 秒（在 470k 表行中，仅返回 20 行）。

我在这里发现了许多类似的帖子，我尝试了所有这些解决方案（设置 arithabort、选项重新编译、选项优化……），但没有成功。

我只是执行查询（sql server 2008）而不是存储过程，所以使用 arithabort 的查询是这样的：

> ```
>  string strSql = @"set ARITHABORT ON;
>                              select  TOP 20 .... 
> ```

我也尝试在同一个事务中调用 set arithabort 但首先执行该查询..

我不知道我是否做错了什么，但感觉是当我在 ado.net 上定义参数时，ado.net 在 ado.net 中执行了一个非常糟糕的执行计划。

由于这个错误的选择，SSMS 中的执行时间是 1 秒（缓存后），但在 asp 中是 9 秒！

查询是这样的：

> strSQL @=" select *
> from Table1 where Name like @name";

接着：

> ```
>  DbProviderFactory factory = DbProviderFactories.GetFactory(mProvider);
>         DbCommand dbcmd = factory.CreateCommand();
>         if (CommandTimeout != null)
>             dbcmd.CommandTimeout = CommandTimeout.Value;
>         if(this.transaccion != null)
>             dbcmd.Transaction = this.transaccion;
>         dbcmd.Connection = dbc;
>         dbcmd.CommandText = strSQL;
>         if (parametros != null)
>             dbcmd.Parameters.AddRange(parametros);
>         DbDataAdapter dbda = factory.CreateDataAdapter();
>         dbda.SelectCommand = dbcmd;
>         DataTable dt = new DataTable();
>         dbda.Fill(dt);
>         return dt; 
> ```

**编辑 14/01/2013 (18:44)**

我不再从 DbProviderFactory 检索连接，而是直接使用 SqlConnection 和 SqlCommand。我知道 DbCommand 和 DbProvider 是一个基类......但我认为那里还有更多......因为性能急剧提高了 300%！

这不是填充方法，因为我已经尝试过之前显示的代码..

无论如何，我不知道为什么但是使用 SqlConnection 更快！任何想法？也许之前没有制定过那么糟糕的执行计划？

> ```
>  SqlCommand objCmd = new SqlCommand(strSQL, sqlConn);
> 
>         if (CommandTimeout != null)
>             objCmd.CommandTimeout = CommandTimeout.Value;
>         if (this.transaccion != null)
>             objCmd.Transaction = SQLtransaccion;
> 
>         if (parametros != null)
>             objCmd.Parameters.AddRange(parametros);
> 
>         DbDataReader dbReader = objCmd.ExecuteReader();
>         DataTable dt = new DataTable();
>         dt.Load(dbReader);
>         dbReader.Close();
>         return dt; 
> ```

任何帮助将不胜感激，

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T01:10:06.640

我找到了解决方案！

是参数！

我在列表中使用了错误的类型！

> Parametross.Add(bd.MakeParameter("@val", "%" + txtFind.Text + "%", DbType.String));

**DbType.String 与 DbType.AnsiString**

尽管 DbType.String 和 DbType.AnsiString 都处理字符数据，但这些数据类型的处理方式不同，使用错误的数据类型会对应用程序的性能产生负面影响。DbType.String 将参数标识为 2 字节 Unicode 值，并按此方式发送到服务器。DbType.AnsiString 使参数作为多字节字符串发送。为避免过多的字符串转换，请使用：

*   **DbType.AnsiString**用于 char 或**varchar**列和参数。
*   **DbType.String**用于 unichar 和 univarchar 列和参数。

来源： http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc20066.0115/html/adonet/ [adonet49.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc20066.0115/html/adonet/adonet49.htm)

在我的查询中有一个：

> ....其中 Table.Col1 像 @val

但是列类型是**varchar**，我应该使用 DbType.AnsiString，而不是 DbType.String

> Parametross.Add(bd.MakeParameter("@val", "%" + txtFind.Text + "%", DbType.AnsiString));

在我巨大的桌子上，我做了很多不必要的演员，这就是性能急剧下降的原因！

希望这会对某人有所帮助，

# c# - 将样式应用于特定类型的所有子元素

> ID：14319079
> 
> 赞同：3
> 
> 时间：2013-01-14T13:14:23.190
> 
> 标签：c#, wpf, xaml, styles

我想为 wpf 编写一个样式，其中 StatusBar 中的所有按钮（具有定义的样式）具有相同的样式（例如宽度）。

这是我的风格：

```
<Style TargetType="{x:Type StatusBar}"
               x:Key="DialogBoxStatusBarStyle">
    <Setter Property="Background"
                    Value="LightGray" />
    <Setter Property="Padding"
                    Value="5" />

    ...?

</Style> 
```

以及元素的 xaml：

```
<StatusBar Style="{StaticResource ResourceKey=DialogBoxStatusBarStyle}" Grid.Row="3"
               FlowDirection="RightToLeft">
        <Button Content="Übernehmen"
                Width="100"
                HorizontalAlignment="Right" />
        <Button Content="Abbrechen"
                Width="100"
                HorizontalAlignment="Right" />

        <Button Content="OK"
                Width="100"
                HorizontalAlignment="Right" />
    </StatusBar> 
```

在最终版本中，我不想将所有按钮的宽度设置为 100。这应该以 的样式定义，`StatusBar`或者更好地以`StatusBar`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T13:25:09.190

您可以将按钮的默认样式添加到`Resources`您的`DialogBoxStatusBarStyle`：

```
<Style TargetType="StatusBar" x:Key="DialogBoxStatusBarStyle">
    <Style.Resources>
        <Style TargetType="Button">
            <Setter Property="Width" Value="100"/>
        </Style>
    </Style.Resources>
    ...
</Style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-25T23:04:35.643

要扩展上面的答案（@Clemens），您甚至可以这样做，以独立重用按钮样式，并将其应用于特定容器的子项。

款式：

```
<Style TargetType="{x:Type Button}" x:Key="MyButtonStyle">
    <Setter Property="Width" Value="100" />
    <Setter Property="HorizontalAlignment" Value="Right" />
</Style>

<Style TargetType="{x:Type StatusBar}" x:Key="DialogBoxStatusBarStyle">
    <Setter Property="Background" Value="LightGray" />
    <Setter Property="Padding" Value="5" />

    <Style.Resources>
        <Style TargetType="{x:Type Button}" BasedOn="{StaticResource MyButtonStyle}" />
    </Style.Resources>
    ...
</Style> 
```

# struts2 - 如何理解表单在struts动作中提交

> ID：14319083
> 
> 赞同：0
> 
> 时间：2013-01-14T13:14:26.580
> 
> 标签：struts2

在 struts2 动作中，注入用于设置动作类的属性值，因此属性由表单提交上的表单字段更新。为了发现提交了哪个表单，我创建了一个方法调用`isFormSubmitted()`，并在其中检查了仅为此动机创建的冗余属性。该属性在隐藏字段中更新。但我觉得这个锻炼太脏了！我认为必须有更好的方法来解决这个问题。

我要做的是：

```
<s:form name="form1">
  <s:hidden name="submit" value="10" />
  ...other fields go here
</s:form> 
```

在我有的动作类中`getSubmit`，`setSubmit`方法和以下方法：

```
public boolean isFormSubmitted(){
  return (submit == 10);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:04:05.107

您可以在您的操作中调用不同的操作方法，而不仅仅是“执行”方法。只需在您的请求中输入名称为“method:actionMethodName”的参数即可。这是示例：

```
public class MyAction extends ActionSupport {    

  public String execute() {      
    // Base code
    return SUCCESS;
  }

  public String one() {      
    // Code one
    return SUCCESS;
  }

  public String two() {      
    // Code two
    return SUCCESS;
  }    

} 
```

这是jsp：

```
<s:form action="MyAction">
  <input type="submit" value="Call execute"/>
  <input type="submit" name="method:one" value="Call method one"/>
  <input type="submit" name="method:two" value="Call method two"/>
</s:> 
```

或者你可以这样做：

```
<s:form action="MyAction" name="form0">
  <!-- call execute-->
</s:>

<s:form action="MyAction" name="form1">
  <!-- call method one-->
  <input type="hidden" name="method:one"/>
</s:>

<s:form action="MyAction" name="form2">
  <!-- call method two-->
  <input type="hidden" name="method:two"/>
</s:> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:19:50.720

您应该使用`<s:form>`tag`action`属性来提交特定操作。

```
<s:form action="action1">
  ...
</s:form>

<s:form action="action2">
  ...
</s:form> 
```

请参阅`<s:form>`标签文档：[http](http://struts.apache.org/2.x/docs/form.html) ://struts.apache.org/2.x/docs/form.html 。

**更新**

然后只需使用单独的操作来加载和保存用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:31:15.717

你应该像这样提交表单。

```
<s:form name="form1">
 <s:hidden name="submit" value="10" />
</s:form> 
```

创建一个java脚本函数

```
function onclick()
{
document.form1.submit();
} 
```

然后为隐藏字段创建 getter & setter

并在执行方法中

```
 public String execute()
    {
    setSubmit(10);
    return SUCCESS;
} 
```

**更新 ：**

```
<a href="your_action_name"></a> 
```

或者

```
 <s:a href="your_action"></a> 
```

# python - 如何使用 SQLAlchemy 在 PostgreSQL ARRAY 中的某个位置选择值？

> ID：14319089
> 
> 赞同：5
> 
> 时间：2013-01-14T13:14:50.740
> 
> 标签：python, postgresql, sqlalchemy

对于嵌套评论系统，我使用`Comment`模型中的以下定义将树结构存储在 PostgreSQL 表中：

```
path = sa.Column(ARRAY(sa.Integer)) 
```

这会将评论的所有 ID 存储在当前路径的路径中。因此，如果带有`id`15 的评论是 11 和 13 的孩子，那么它的路径将是`[11,13,15]`.

现在我想找到并计算孩子的评论。因此，为了找到评论 11 的所有子项，包括它自己，我想生成如下所示的 SQL：

```
SELECT id, path FROM comments WHERE path[1] = 11; 
```

在我的数据库中，这很高兴返回一组不错的评论 11 及其子项。

对于上面的示例，如果我想获取评论的子项，可以使用以下 SQL：

```
SELECT id, path FROM comments WHERE path[1] = 11 AND path[2] = 13; 
```

**应该如何使用 SQLAlchemy 来生成这个 SQL？**

我已经成功了，`filter_by()`也`filter()`没有成功......这些都不起作用：

```
q = Comment.query.filter(path[1] == 11)
> NameError: name 'path' is not defined

q = Comment.query.filter_by(path[1] = 11)
> SyntaxError: keyword can't be an expression 
```

我不希望为此查询编写自定义 SQL，但如果这是唯一的方法，那么请提供一些关于如何最好地构造它的指示。

***编辑 1***

确认我正在使用 SQLAlchemy 0.7 - 所以在这个版本中工作（周围）的答案会更有帮助。

我意识到对于上面的注释实现，没有必要在确切的位置找到 id 编号，在任何位置找到它们也可以。因此，有关如何创建 SQLAlchemy 以生成类似这样的内容的任何输入都会很好：

```
SELECT id, path FROM comments WHERE 11 = ANY (path); 
```

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T13:48:54.000

这只能从 SQLAlchemy 0.8 开始工作（在撰写本文时为 beta2）：

```
from sqlalchemy.dialects import postgresql

class Comment(Base):
    __tablename__ = 'comments'
    id = Column(Integer, primary_key=True)
    path = Column(ARRAY(Integer))

q = Comment.query.filter(Comment.path[1] == 11)
# This is just to demonstrate how compiled query would look like.
print q.statement.compile(dialect=postgresql.dialect()) 
```

输出：

```
SELECT comments.id, comments.path 
FROM comments 
WHERE comments.path[%(path_1)s] = %(param_1)s 
```

* * *

**更新**

最近在 SA 邮件列表中[讨论](https://groups.google.com/forum/#!topic/sqlalchemy/VCaPAhfivBs)了如何`= ANY`为 Postgres 数组创建（和相关）查询。即使那里的示例是为 0.8 编写的，它也应该在 0.7 中工作。`= ANY`这是0.7的工作实现（经过测试）：

```
from sqlalchemy.sql import literal, tuple_

# There's already built-in any() function in Python, we don't want to
# shadow that.
def any_(value, col):
    return literal(value).op('= ANY')(tuple_(col))

q = Comment.query.filter(any_(11, Comment.path)) 
```

# php - AS3 - 从 Flash 导出数据以在 Microsoft Excel 中使用

> ID：14319090
> 
> 赞同：1
> 
> 时间：2013-01-14T13:14:53.003
> 
> 标签：php, xml, actionscript-3, excel, csv

我正在使用 ActionScript3 编程语言在 Flash Professional CS5 中制作一个 Flash 教程项目，我的 SWF 针对 Flash Player 10（或更高版本）进行了优化。

我的问题涉及是否可以在 AS3 中编写鼠标单击函数，附加到一个按钮，当单击该按钮时，将**保存在 Flash 中的数组中的数字/字符串数据导出**为**新的合适的文件格式（例如 CSV/XML）**，我的用户随后可以在**Microsoft Excel**中打开、查看和编辑哪些内容？这些数据在任何阶段都不需要传回 Flash。

我的教程很可能嵌入到网页或框架中，而不是放在桌面上。Flash 可以想象**“打包”数组保存的数据并生成新的文件类型**吗？如果用户要研究从 Excel 软件包中从 Flash 导出的数据，从阅读 CSV 和 XML 文件格式来看我的最佳选择？

如果我将项目嵌入到网络上，是否还需要任何 PHP，这可以帮助重新打包过程并将 CSV 或 XML 发布到服务器上的文件位置，甚至更好地发布到用户的硬盘驱动器？Flash 是否可以直接与 Microsoft Excel 进行“对话”并进行转换、导出和打开，或者用户最多只能获取 CSV/XML 文本文件并在 Excel 中手动打开文件？

我知道一些问题，但如果任何遇到（并希望克服）此类问题的开发人员可以为我提供一些指导，甚至更好地提供一些解决此问题的示例 AS3 代码，我将非常感激。

亲切的问候，

乔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:57:03.647

试试这个解决方案[在 AS3 中写入 CSV 文件](https://stackoverflow.com/questions/7316416/writing-to-csv-file-in-as3)- 简单的 as3 代码或谷歌代码上的[csvlib](http://code.google.com/p/csvlib/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:07:15.077

稍后我将发布一个示例：

1.  创建一个 PHP 页面以输出到 Excel
2.  将数据发布到 PHP 页面（使用 JSON 以方便使用）
3.  在 PHP 端解析数据以生成足够的 Array 结构
4.  从 PHP 输出 Excel 工作表

从 PHP 导出 Excel：

1) [http://code.google.com/p/php-excel/](http://code.google.com/p/php-excel/)

2) [PHP_excel 的替代方案](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)

3) [http://forums.digitalpoint.com/showthread.php?t=60681](http://forums.digitalpoint.com/showthread.php?t=60681)

# c# - NHibernate QueryOver 中使用表达式的动态排序

> ID：14319092
> 
> 赞同：3
> 
> 时间：2013-01-14T13:14:53.980
> 
> 标签：c#, nhibernate, expression, queryover

鉴于以下情况`QueryOver`：

```
UserProfile userProfileAlias = null;
Pegfile pegfileAlias = null;
var q = Session.QueryOver(() => pegfileAlias)
        .JoinAlias(() => pegfileAlias.UserProfile, () => userProfileAlias); 
```

我想通过交换使以下语句动态化

```
q = q.OrderBy(() => userProfileAlias.Forename).Asc; 
```

`(OrderBy(Expression<Func<object>>`或 ( `OrderBy(Expression<Func<T, object>>)`)

和

```
q = q.OrderBy(GetMemberExpression(userProfileAlias, "Forename")).Asc; 
```

我从另一个帖子借来得到

```
private Expression<Func<object>> GetMemberExpression(UserProfile instance, string propertyName)
        {
            var arg = Expression.Constant(instance, typeof(UserProfile));
            var body = Expression.Convert(Expression.PropertyOrField(arg, propertyName), typeof(UserProfile));
            var lambda = Expression.Lambda<Func<object>>(body);
            return lambda;
        } 
```

但这不起作用，我得到：

```
System.InvalidOperationException
No coercion operator is defined between types 'System.String' and 'Pegfect.Domain.PegDudes.UserProfile'. 
```

我想我可能需要匹配以下信号：

```
OrderBy(Expression<Func<UserProfile,object>>) 
```

如何`GetMemberExpression`变成退货？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:26:56.937

您的版本不起作用的原因是 NHibernate 实际上并没有为在`JoinAlias`. 它只是一个正在被解析的令牌。这意味着当您想在其他地方使用它时，它必须是完全相同的*变量。*
为此，您需要保存别名表达式并使用其主体来检索该变量：

```
UserProfile alias = null;
Expression<Func<object>> aliasExpression = () => alias;
session.QueryOver<Pegfile>()
       .JoinAlias(x => x.UserProfiles, aliasExpression)
       .OrderBy(GetMemberExpression(aliasExpression, "Forename")).Asc
       .List();

private Expression<Func<object>> GetMemberExpression(
                                     Expression<Func<object>> aliasExpression,
                                     string property)
{
    var propertyExpression = Expression.Property(aliasExpression.Body,
                                                 typeof(UserProfile), property);
    var body = Expression.Convert(propertyExpression, typeof(object));

    var result = Expression.Lambda<Func<object>>(body);
    return result;
} 
```

# jquery - 样式选择2多选与单选相同？

> ID：14319095
> 
> 赞同：4
> 
> 时间：2013-01-14T13:15:01.050
> 
> 标签：jquery, css, jquery-select2

基本上我想要做的是让*输入*仅用作显示，当单击该字段时，我希望搜索字段的下拉列表与单选相同。

下面的（做得不好的）模型比我能更好地解释这一点。

![在此处输入图像描述](../Images/192ee5fecc1026fd3062c4ea602b3f0d.png)

Select2 是否内置了此功能，或者是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-25T18:01:38.207

对于那些仍在寻找解决方案的人，看看我的小提琴。

我已经使用了几个关于这个问题的小提琴并将它们组合成 1

不完美，但它有效。

[https://jsfiddle.net/Lkkm2L48/7/](https://jsfiddle.net/Lkkm2L48/7/)

```
jQuery(function($) {
    $.fn.select2.amd.require([
    'select2/selection/single',
    'select2/selection/placeholder',
    'select2/selection/allowClear',
    'select2/dropdown',
    'select2/dropdown/search',
    'select2/dropdown/attachBody',
    'select2/utils'
  ], function (SingleSelection, Placeholder, AllowClear, Dropdown, DropdownSearch, AttachBody, Utils) {

        var SelectionAdapter = Utils.Decorate(
      SingleSelection,
      Placeholder
    );

    SelectionAdapter = Utils.Decorate(
      SelectionAdapter,
      AllowClear
    );

    var DropdownAdapter = Utils.Decorate(
      Utils.Decorate(
        Dropdown,
        DropdownSearch
      ),
      AttachBody
    );

        var base_element = $('.select2-multiple2')
    $(base_element).select2({
        placeholder: 'Select multiple items',
      selectionAdapter: SelectionAdapter,
      dropdownAdapter: DropdownAdapter,
      allowClear: true,
      templateResult: function (data) {

        if (!data.id) { return data.text; }

        var $res = $('<div></div>');

        $res.text(data.text);
        $res.addClass('wrap');

        return $res;
      },
      templateSelection: function (data) {
        if (!data.id) { return data.text; }
        var selected = ($(base_element).val() || []).length;
        var total = $('option', $(base_element)).length;
        return "Selected " + selected + " of " + total;
      }
    })

  });

}); 
```

CSS：

```
.select2-results__option .wrap:before{
    font-family:fontAwesome;
    color:#999;
    content:"\f096";
    width:25px;
    height:25px;
    padding-right: 10px;

}
.select2-results__option[aria-selected=true] .wrap:before{
    content:"\f14a";
} 
```

# css - CSS：自动调整 div 大小以适应容器宽度

> ID：14319097
> 
> 赞同：18
> 
> 时间：2013-01-14T13:15:08.937
> 
> 标签：css

我有两个`<div>`：**left**和**contents**。这两个在**具有**`min-width:960px;`. **left**有固定宽度，但我想让内容灵活，最小宽度为**700px**，如果屏幕更宽，请将其粘贴到屏幕的右边界。
![截屏](../Images/aabcef2cbe2e0136a3f01e6fd3688ccf.png)

**CSS：**

```
#wrapper
{
    min-width:960px;
    margin-left:auto;
    margin-right:auto;
}
#left
{
    width:200px;
    float:left;
    background-color:antiquewhite;
    margin-left:10px;
}
#content
{
    min-width:700px;
    margin-left:10px;
    width:auto;
    float:left;
    background-color:AppWorkspace;
} 
```

JSFiddle：http: [//jsfiddle.net/Zvt2j/](http://jsfiddle.net/Zvt2j/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T13:34:23.653

You can `overflow:hidden` to your `#content`. Write like this:

```
#content
{
    min-width:700px;
    margin-left:10px;
    overflow:hidden;
    background-color:AppWorkspace;
} 
```

Check this [http://jsfiddle.net/Zvt2j/1/](http://jsfiddle.net/Zvt2j/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T13:38:07.743

你可以使用 css3 灵活的盒子，它会是这样的：

首先，您的包装器包装了很多东西，因此您需要一个仅用于 2 个水平浮动框的包装器：

```
 <div id="hor-box"> 
    <div id="left">
        left
      </div>
    <div id="content">
       content
    </div>
</div> 
```

你的css3应该是：

```
#hor-box{   
  display: -webkit-box;
  display: -moz-box;
  display: box;

 -moz-box-orient: horizontal;
 box-orient: horizontal; 
 -webkit-box-orient: horizontal;

}  
#left   {
      width:200px;
      background-color:antiquewhite;
      margin-left:10px;

     -webkit-box-flex: 0;
     -moz-box-flex: 0;
     box-flex: 0;  
}  
#content   {
      min-width:700px;
      margin-left:10px;
      background-color:AppWorkspace;

     -webkit-box-flex: 1;
     -moz-box-flex: 1;
      box-flex: 1; 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-03T00:56:28.237

```
#wrapper
{
    min-width:960px;
    margin-left:auto;
    margin-right:auto;
    position-relative;
}
#left
{
    width:200px;
    position: absolute;
    background-color:antiquewhite;
    margin-left:10px;
    z-index: 2;
}
#content
{
    padding-left:210px;
    width:100%;
    background-color:AppWorkspace;
    position: relative;
    z-index: 1;
} 
```

如果您需要 右侧的空格`#left`，则添加`border-right: 10px solid #FFF;`to`#left`并添加`10px`到`padding-left`in`#content`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T13:34:22.797

[CSS auto-fit container between float:left & float:right divs](https://stackoverflow.com/questions/10858438/css-auto-fit-container-between-floatleft-floatright-divs?rq=1) solved my problem, thanks for your comments.

```
#left
{
    width:200px;
    float:left;
    background-color:antiquewhite;
    margin-left:10px;
}
#content
{
    overflow:hidden;
    margin-left:10px;
    background-color:AppWorkspace;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T13:36:42.980

我已经更新了你的[jsfiddle](http://jsfiddle.net/Zvt2j/2/)，这是你需要做的 CSS 更改：

```
#content
{
    min-width:700px;
    margin-right: -210px;
    width:100%;
    float:left;
    background-color:AppWorkspace;
} 
```

# sql - 在十进制计算中丢失精度

> ID：14319098
> 
> 赞同：1
> 
> 时间：2013-01-14T13:15:12.223
> 
> 标签：sql, sql-server, sqldatatypes

我有一组执行一组计算的存储过程，但是在使用十进制类型时我似乎失去了精度。

我期望下面的计算为 0.0493318673793 - 而我得到的是 0.049331。我已经测试了不同的数据类型，并且我只在使用浮点数时获得了准确度（我已经阅读过应该避免）。

```
--Representative of SP
SELECT CAST(4000000.00 AS MONEY)/CAST(81083490.50 AS DECIMAL(34,26))
--0.049331

--Using greater decimal precision
SELECT CAST(4000000.00 AS MONEY)/CAST(81083490.50 AS DECIMAL(38,16))
--0.0493318

--Using Float
SELECT CAST(4000000.00 AS MONEY)/CAST(81083490.50 AS FLOAT)
--0.0493318673793403 
```

花车真的那么差吗？如果是这样，我有什么选择？

* * *

探索下面的哈姆雷特笔记。为什么以下提供不同的输出？

```
 SELECT CAST(4000000.00 AS MONEY)/CAST(81083490.50 AS DECIMAL(38,16))
 --0.0493318

 SELECT CAST(4000000.00 AS MONEY)/CAST(81083490.50 AS DECIMAL(38,3))
 --0.04933186737934031096 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:02:07.647

这只会回答你的问题“浮动那么糟糕吗？”......

您是否要要求某人付款至小数点后 15 位？;) 因为`money`似乎只有 4 位小数精度。

至于那个著名的事情，如果您犹豫要不要使用它，那么[由于 this](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)和[this](http://randomascii.wordpress.com/2012/02/13/dont-store-that-in-a-float/)`float`是有道理的。但在您的情况下，您可以满足您的需要，并提供高达 15 个小数点的精度。但它是一种**近似的数据类型。**所以如果你想用钱，那意味着没有太多的准确性。`float``float`**`float`**

 **因此，在这种情况下，您最好使用`decimal`or `money`。

参考：

*   [会计应用程序美元金额使用浮点数还是小数？](https://stackoverflow.com/questions/61872/use-float-or-decimal-for-accounting-application-dollar-amount)**

# jpa - 使用 JPA2 按地图的键和值过滤

> ID：14319100
> 
> 赞同：0
> 
> 时间：2013-01-14T13:15:16.757
> 
> 标签：jpa, map

对于定义如下的实体：

```
@Entity
public class Acl implements Serializable {

@Id
@GeneratedValue
@Column(name = "acl_id")
private Long id;

@ElementCollection(fetch=FetchType.EAGER)
@JoinTable(name = "acl_permits")
private Map<String, Integer> permits = new HashMap<String, Integer>(); 
```

询问：

```
query = em.createQuery("select a FROM Acl a " +
"JOIN a.permits p WITH KEY(p) = '" + user + "' and VALUE(p) = " + permit + ""); 
```

转换为：

```
select acl0_.acl_id as acl1_1_ from Acl acl0_ 
inner join acl_permits permits1_ on acl0_.acl_id=permits1_.Acl_acl_id 
and (permits1_.permits_KEY='user1' 
and (select permits1_.permits from acl_permits permits1_ where acl0_.acl_id=permits1_.Acl_acl_id)=1) 
```

为了将其转换为查询将是什么？：

```
select acl0_.acl_id as acl1_1_ from Acl acl0_ 
inner join acl_permits permits1_ on acl0_.acl_id=permits1_.Acl_acl_id 
and (permits1_.permits_KEY='user1' and acl0_.acl_id=permits1_.Acl_acl_id=1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:35:19.687

您可以在 JPA 中使用本机 SQL。所以你可以这样做。

```
query = em.createNativeQuery("select acl0_.acl_id as acl1_1_ from Acl acl0_ 
    inner join acl_permits permits1_ on acl0_.acl_id=permits1_.Acl_acl_id 
    and (permits1_.permits_KEY=?user and acl0_.acl_id=permits1_.Acl_acl_id=?permit_id)"); 
```

# php - 将私人消息“正文”字段存储在单独的表中以提高速度

> ID：14319101
> 
> 赞同：3
> 
> 时间：2013-01-14T13:15:19.130
> 
> 标签：php, mysql, select, ifnull

我为我的用户创建了一个私人消息系统，该系统是在 php 中使用 mysql 后端创建的。系统会删除旧消息，但通常保留超过 500,000 条消息。目前所有数据都包含在一个表中：

```
message_table
    message_id (int 11)
    message_from_id (int 11)
    message_to_id (int 11)
    message_timestamp (int 11)
    message_subject (varchar 50)
    message_text (text) 
```

大多数消息都很短，所以我正在考虑将系统更改为：

```
message_table
    message_id (int 11)
    message_from_id (int 11)
    message_to_id (int 11)
    message_timestamp (int 11)
    message_subject (varchar 50)
    message_short_body (varchar 50)
    message_text_id (int 11)

text_table
    text_id (int 11)
    text_body (text) 
```

然后，如果输入了一条短消息，它将在“message_short_body”下输入，如果更长，将添加到“text_table”，“text_id”存储为“message_text_id”。当消息被访问时，我会得到类似的东西：

```
SELECT * FROM message_table LEFT JOIN text_table ON text_table.text_id = message_table.message_text_id IF message_table.message_text_id != 0 WHERE message_table.message_to_id = $user_id 
```

我添加了“IF message_table.message_text_id！= 0”，不知道这样的事情是否可行。

作为一般规则，是否可以判断这是否会减少数据库的大小/加快查询速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:19:44.967

> 我添加了“IF message_table.message_text_id！= 0”，不知道这样的事情是否可行。

`text_id = 0`除非您的 中实际上有一行，否则`text_table`没有必要这样做。只需省略`IF`并使用以下查询：

```
SELECT IFNULL(text_table.text_body, message_table.message_short_body) AS body,
       …
FROM message_table
LEFT JOIN text_table ON text_table.text_id = message_table.message_text_id
WHERE message_table.message_to_id = $user_id 
```

在性能方面，如果将条件添加到连接条件中，引擎可能可以更有效地优化事物*：*

```
SELECT IFNULL(text_table.text_body, message_table.message_short_body) AS body,
       …
FROM message_table
LEFT JOIN text_table ON text_table.text_id = message_table.message_text_id
                    AND message_table.message_text_id != 0
WHERE message_table.message_to_id = $user_id 
```

您还可以尝试使用子查询的方法：

```
SELECT IF(message_text_id = 0, message_short_body, (
  SELECT text_table.message_short_body
  FROM text_table
  WHERE text_table.text_id = message_table.message_text_id)) AS body,
       …
FROM message_table
WHERE message_table.message_to_id = $user_id 
```

这样做的好处是，如果不需要，则不执行搜索`text_table`，但缺点是对带有长消息的每个案例执行单独的查询。我希望上述查询更好，但我不确定。

> 作为一般规则，是否可以判断这是否会减少数据库的大小/加快查询速度？

您必须进行基准测试，因为这取决于用例。如果您的大多数查询从文本以外的字段中检索数据，那么较小的表将使这些查询更快，从而提高性能。另一方面，如果您通常希望正文与消息的其余部分一起使用，那么您最终可能会得到更差的性能。

您还应该使用基准来区分上述不同的替代方案。

在数据库大小方面，您可能会看到增加：文本数据的存储要求大致相同，但额外表的索引将花费您。

我想如果这是我的架构，我会删除`message_text_id`，而是将主键`text_table`与`message_table`. 即每个键要么只出现在消息表中，要么出现在两个表中，并且具有相同键的行属于一起。在这些情况下，可以通过设置`message_table.message_short_body`为来对消息是否在另一个表中进行编码。`NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:29:21.863

试试这个：

```
SELECT *, IFNULL(tt.text_body,  mt.message_short_body) textBody 
FROM message_table mt 
LEFT JOIN text_table tt ON tt.text_id = mt.message_text_id 
WHERE mt.message_to_id = $user_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:34:25.580

> 我添加了“IF message_table.message_text_id！= 0”，不知道这样的事情是否可行。

您正在寻找的查询是这样的：

```
SELECT
  IFNULL(t.text, m.short_text) AS text
  -- other columns may follow
FROM messages2 m
LEFT JOIN texts t on m.text_id = t.id
WHERE to_id = A_USER_ID 
```

> 作为一般规则，是否可以判断这是否会减少数据库的大小/加快查询速度？

是的，有可能！至少可以测试一下。我已经做到了。我创建了一个包含 500.000 个条目的消息表的测试场景。每十分之一都有一个长文本。消息 from_id 和 to_id 是从 50 个用户中随机选择的。

第 1 部分：速度

第二次尝试，使用一个单独的文本表，将给出一个**BIGGGGGG 加速**。第一次尝试的平均查询时间**约为 1.6**秒。仅第二个**~0.28**秒！！！！

回答这个问题：是的，它更快！:)

第 2 部分：数据库大小

正如预期的那样，数据库的大小将略有增长。来自文本的附加索引让我的数据库增长了约 10%

结论：将大文本存储在单独的表中是一个**好**主意。在您的情况下，它将以大约 10% 的磁盘成本将查询性能提高多达 80%。

# grails - 设置 Grails 和 IntelliJ

> ID：14319104
> 
> 赞同：0
> 
> 时间：2013-01-14T13:15:33.790
> 
> 标签：grails, intellij-idea

我想我应该看看 Grails 和 IntelliJ。但是，我在第一个障碍中挣扎。当我选择“Groovy SDK”时，我选择了我的安装目录——在本例中为 Grails 2.2.0——但 IDE 上的 OK 按钮保持灰色。如果我选择另一个安装目录 - Grails 1.3.7 - OK 按钮被激活，但我收到一条错误消息，指出我的 groovy 安装已损坏。

有谁知道我错过了什么？

我正在使用 IntelliJ 12 社区版并尝试使用 Grails 2.2.0。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:51:30.897

请查看此[IntelliJ IDEA 功能](http://www.jetbrains.com/idea/features/ "IntelliJ IDEA 功能")页面，您将看到某些 Web 技术，如 Grails，仅在 Ultimate Edition 中受支持。我建议升级到终极版，因为它具有出色的 Grails 支持。

作为替代方案，可以使用支持 Grails 的免费 IDE：[STS](http://www.springsource.org/sts)、[GGTS](http://grails.org/products/ggts)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:44:53.677

Community Edition 不支持 Grails 开发。请注意，它要求的是 Groovy SDK（受支持），而不是 Grails SDK。

# sql - 解析sql中的整数字段

> ID：14319107
> 
> 赞同：2
> 
> 时间：2013-01-14T13:15:39.380
> 
> 标签：sql, sql-server-2008, crystal-reports

我想拆分 sql 表中整数字段中的每个数字。例如：financialNb = 7869 我需要 7 作为第一位，8 作为第二位，6 作为第三位，9 作为第四位。这是必需的，因为我希望每个数字都用作水晶报表中的 1 个数据字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:30:45.800

首先，您必须先将数字转换或转换为文本，然后才能以这种方式操作它们。您正在寻找的功能是[CAST()](http://msdn.microsoft.com/en-us/library/ms187928.aspx)和[SUBSTRING()](http://msdn.microsoft.com/en-gb/library/ms187748.aspx)。要让数字从右边开始，您可以使用[REVERSE()](http://msdn.microsoft.com/en-us/library/ms180040.aspx)。

试试这个例子：

```
SELECT 7869 AS field1
INTO #tmp

SELECT   SUBSTRING(REVERSE(CAST(field1 AS VARCHAR(255))),8,1) AS [Column8]
    ,SUBSTRING(REVERSE(CAST(field1 AS VARCHAR(255))),7,1) AS [Column7]
    ,SUBSTRING(REVERSE(CAST(field1 AS VARCHAR(255))),6,1) AS [Column6]
    ,SUBSTRING(REVERSE(CAST(field1 AS VARCHAR(255))),5,1) AS [Column5]
    ,SUBSTRING(REVERSE(CAST(field1 AS VARCHAR(255))),4,1) AS [Column4]
    ,SUBSTRING(REVERSE(CAST(field1 AS VARCHAR(255))),3,1) AS [Column3]
    ,SUBSTRING(REVERSE(CAST(field1 AS VARCHAR(255))),2,1) AS [Column2]
    ,SUBSTRING(REVERSE(CAST(field1 AS VARCHAR(255))),1,1) AS [Column1]
FROM #tmp

DROP TABLE #tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:23:53.530

大概你的问题是关于 parsing `7869`。为此使用该`substring`功能：

```
select substring(cast(<col> as char(4)), 1, 1) as FirstChar,
       substring(cast(<col> as char(4)), 2, 1) as SecondChar,
       substring(cast(<col> as char(4)), 3, 1) as ThirdChar,
       substring(cast(<col> as char(4)), 4, 1) as FourthChar
from YourTable 
```

我可能错误地解释了数字的顺序，这假设字符串始终是 4 位数字并且您需要字符。另一种方法是将其视为数字：

```
select <col%10 as FirstNum,
       (col/10) %10 as SecondNum,
       (col/100)%10 as ThirdNum,
       (col/1000)%10 as FourthNum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:33:44.370

您可以使用模运算符 ( `%`) 来获取整数的数字，而无需使用较慢的字符串操作函数，如下所示

```
select 
  value % 100000000 / 10000000,
  value % 10000000 / 1000000,
  value % 1000000 / 100000,
  value % 100000 / 10000,
  value % 10000 / 1000,
  value % 1000 / 100,
  value % 100 / 10,
  value % 10
from testData 
```

这是一个可以使用的[SQL Fiddle](http://www.sqlfiddle.com/#!3/08a83/9)。如果该字段始终是 4 个数字长，您可以逃脱：

```
select 
  value / 1000 as Thousands,
  value % 1000 / 100 as Hundreds,
  value % 100 / 10 as Tens,
  value % 10 as Units
from testData 
```

但是，如果您需要在任意数字上使用它，您可以创建一个用户定义的表值函数，它将返回表中的数字，如下所示：

```
create function dbo.getDigits(@Input int)
returns @Digits table
(
    Digit int,
    Position int
)
as begin
  declare @pos int
  declare @digit int
  set @pos = 0

  if @input = 0
  begin
    -- zero is just a single zero digit at position 1
    insert into @digits values (0,1)
    return
  end

  while @input<>0 begin
    set @pos=@pos+1
    set @digit = @input % 10
    set @input = @input / 10
    insert into @digits values (@digit, @pos)
  end
  return
end 
```

并像这样使用它：

```
SELECT td.ID, td.Value, d.Digit, d.Position 
FROM   testData td
    CROSS APPLY dbo.getDigits(td.Value) AS d
order by td.ID, d.Position Desc 
```

（这是另一个[SQL Fiddle](http://www.sqlfiddle.com/#!3/88ea0/8)，基于前一个）

# youtube-api - 在 .Net 中使用 Youtube API 创建频道

> ID：14319111
> 
> 赞同：0
> 
> 时间：2013-01-14T13:16:13.790
> 
> 标签：youtube-api, gdata, channel

如果 google 帐户未链接到 youtube，则新的 youtube api（2.1 和 3.0）支持为 youtube 创建频道 [http://apiblog.youtube.com/2011/10/introducing-google-account-support-and.html](http://apiblog.youtube.com/2011/10/introducing-google-account-support-and.html)

我正在使用 C#，有人可以提示我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:32:34.677

API v3 不支持将 YouTube 频道添加到未关联的 Google 帐户。

有一个[v2.1 API 调用](https://developers.google.com/youtube/2.0/developers_guide_protocol_profiles#Upgrading_an_Unlinked_Google_Account)，但不幸的是，现有的[.NET GData 客户端库](https://code.google.com/p/google-gdata/)没有对该调用的内置支持，正如您所注意到的。

您可以`HTTP PUT`使用标准的[.NET HTTPWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.71%29.aspx)调用自己制作底层。

[或者，您可以要求您的用户完成以https://www.youtube.com/create_channel](https://www.youtube.com/create_channel)（或移动设备上的 https://m.youtube.com/create_channel）[开头](https://m.youtube.com/create_channel)的基于网络的流程。

# jsf - RichFaces 动态 TabPanel

> ID：14319124
> 
> 赞同：2
> 
> 时间：2013-01-14T13:17:03.103
> 
> 标签：jsf, tabs, richfaces, tabpanel

如何实现简单的添加/删除动态`<rich:tabPanel>`？

（我见过有人问这个问题，所以我想发布一个简单实现的问答）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:17:03.103

该实现有 3 个自定义类：

1.  内容：包含要在选项卡中显示的值；
2.  ItemTab：包含一个UITab对象和一个Content对象；
3.  MyTabs：提供对选项卡和添加/删除方法的访问的 EJB 托管 bean。

代码是：

内容：

```
public class Content {

    String name;
    String job;
    String dept;

    public Content() {
        name = "John Doe";
        job = "None";
        dept = "None";
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getJob() {
        return job;
    }

    public void setJob(String job) {
        this.job = job;
    }

    public String getDept() {
        return dept;
    }

    public void setDept(String dept) {
        this.dept = dept;
    }
} 
```

选项卡项：

```
public class TabItem {

    UITab component;
    Content content;

    public TabItem() {
        component = new UITab();
        content = new Content();
    }

    public UITab getComponent() {
        return component;
    }

    public void setComponent(UITab tab) {
        this.component = tab;
    }

    public Content getContent() {
        return content;
    }

    public void setContent(Content content) {
        this.content = content;
    }
} 
```

我的标签：

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.enterprise.context.SessionScoped;
import javax.inject.Named;

@Named
@SessionScoped
public class MyTabs implements Serializable {

    private List<TabItem> tabs;

    public MyTabs() {
        tabs = new ArrayList<TabItem>();
    }

    @PostConstruct
    private void init() {
        createTab();
        createTab();
        createTab();
    }

    public void createTab() {
        TabItem tab = new TabItem();

        tab.getComponent().setId("Tab" + (tabs.size()+1));
        tab.getComponent().setHeader("Tab " + (tabs.size()+1));
        tab.getContent().setName("John Doe " + (tabs.size()+1));
        tab.getContent().setJob("Salesman " + (tabs.size()+1));
        tab.getContent().setDept("Sales " + (tabs.size()+1));

        tabs.add(tab);
    }

    public void removeTab(TabItem tab) {
        tabs.remove(tab);
    }

    public List<TabItem> getTabs() {
        return tabs;
    }

    public void setTabs(List<TabItem> tabs) {
        this.tabs = tabs;
    }
} 
```

tabview.xhtml:

```
<h:commandLink value="Add Tab" 
                   actionListener="#{myTabs.createTab()}"/>
<rich:tabPanel switchType="client">
    <c:forEach items="#{myTabs.tabs}" var="tab">
        <rich:tab value="#{tab.component}">
            <f:facet name="header">
                <h:outputLabel value="#{tab.component.header}"/>
                <h:commandLink value="  X" actionListener="#{myTabs.removeTab(tab)}"/>
            </f:facet>

            <h:panelGrid columns="2">
                <h:outputLabel value="Name: "/>
                <h:outputLabel value="#{tab.content.name}"/>
                <h:outputLabel value="Dept: "/>
                <h:outputLabel value="#{tab.content.dept}"/>
                <h:outputLabel value="Job: "/>
                <h:outputLabel value="#{tab.content.job}"/>
            </h:panelGrid>
        </rich:tab>
    </c:forEach>            
</rich:tabPanel> 
```

# backbone.js - 带有把手的主干木偶抛出异常试图加载我的模板

> ID：14319125
> 
> 赞同：0
> 
> 时间：2013-01-14T13:17:03.660
> 
> 标签：backbone.js, requirejs, handlebars.js, marionette

这是向我的控制台抛出的错误

```
Uncaught TypeError: Object  has no method 'chain' hbs.js:282
getExternalDeps hbs.js:282
(anonymous function) hbs.js:306
xhr.onreadystatechange hbs.js:73
Uncaught Error: Load timeout for modules: hbs!templates/reset_unnormalized2,hbs!templates/pages/login_unnormalized3,hbs!templates/reset,hbs!templates/pages/login
http://requirejs.org/docs/errors.html#timeout require.js:160 
```

我正在使用handlebars-require-plugin，我什至尝试将“hbs”添加到我的require shim，但结果是一样的。

这是我的木偶视图代码：

```
define([
    "bootstrap", // bootstrap does not export anything, so no arg sent to our function
    "marionette", 
    "session", "events",
    "hbs!templates/pages/login"
], function( Marionette, Session, Events, LoginTemplate ){
    return Marionette.View.extend({
        template : {
            type : "handlebars",
            template : LoginTemplate
        }
    });
}); 
```

我不知道这里发生了什么，我进行的每一次搜索都没有产生有用的结果。

发生了什么？为什么会这样？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:46:56.513

可能是您的回调参数定义不正确？如果一个值没有定义任何东西（例如引导程序），那么让它最后。现在你的 Marionette arg 包含 bootstrap 的未定义值，Session 现在包含 Marionette 等。

```
define([
    "marionette", 
    "session", "events",
    "hbs!templates/pages/login",
    "bootstrap", // bootstrap does not export anything, so no arg sent to our function
], function( Marionette, Session, Events, LoginTemplate ){
    return Marionette.View.extend({
        template : {
            type : "handlebars",
            template : LoginTemplate
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:48:45.097

我想到了。

事实证明，我的问题与`hbs`插件无关，因为它与使用它、车把和 json2 与 requirejs 无关。

如上所述，第一个问题是通过`lodash`使用`underscore`. 我的印象是这两个是可以互换的，但显然情况**并非**如此。

然后我遇到了错误，`"stringify" is not a function on the object null`导致我发现`JSON`里面没有定义`hbs`。

我不得不回到我的`require.config({ shim:{} })`并定义 json2 导出`JSON`

现在我没有收到错误，`hbs`但我必须弄清楚为什么我的视图没有显示。

这是我的配置代码，如果其他人有兴趣。

```
require.config({
    // paths to required javascript files
    paths : {
        bootstrap   : "../assets/js/bootstrap.min",
        jquery      : "../assets/js/jquery.min",
        json2       : "../assets/js/json2",
        underscore  : "../assets/js/underscore.min",
        backbone    : "../assets/js/backbone.min",
        marionette  : "../assets/js/backbone.marionette.min",
        hbs         : "../assets/js/hbs",
        handlebars  : "../assets/js/handlebars",
        i18nprecompile : "../assets/js/hbs/i18nprecompile"
    },

    // "shim" will allows us to load in deps synchronously so that we do not
    // run into a situation where dependencies are not available
    shim : {
        json2       : { exports : "JSON" },
        jquery      : { exports : "jQuery" },
        underscore  : { exports : "_" },
        backbone    : {
            deps : ["jquery", "underscore", "json2"],
            exports : "Backbone"
        },
        marionette  : {
            deps : ["jquery", "underscore", "json2", "backbone"],
            exports : "Marionette"
        },
        hbs : {
            deps : ["jquery", "underscore", "json2", "i18nprecompile", "handlebars"],
            exports : "hbs"
        },
        bootstrap : { deps : ["jquery"] }
    }
}); 
```

# android - 动态创建活动的 ArrayList

> ID：14319129
> 
> 赞同：0
> 
> 时间：2013-01-14T13:17:23.400
> 
> 标签：android, android-activity

我希望能够动态创建活动列表，并将它们存储在 ArrayList 中。我还将为每个活动创建一个片段列表，用于设置该活动。这在Android上可能吗？我已经在 iPhone 上完成了这项工作，基本上我有一个 JSON 文件，用于设置应用程序中选项卡和屏幕的数量，请参阅下面的链接，其中显示了如何在 iPhone 中进行设置。

[xCode 动态创建 ViewControllers](https://stackoverflow.com/questions/11191056/xcode-dynamically-create-viewcontrollers)

[xCode 在动态创建的 ViewController 之间传递数据](https://stackoverflow.com/questions/11222038/xcode-pass-data-between-dynamically-created-viewcontrollers)

我想在 Android 上重新创建类似的东西。你在 iPhone 上看到，我有一个数组列表，我循环遍历 JSON 并创建一个我已经设置的 ViewController 类的新实例。

在 Android 上，我有一个名为 DefaultActivity 的活动，我想循环并创建几个实例，这样我就可以设置我需要的选项卡数量。然后，我将为活动的每个实例提供一个片段数组列表，这些片段将用于设置每个屏幕的外观。

这样的事情在Android上可能吗？或者我将如何实现类似的目标？

提前致谢：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:33:52.647

使用一系列活动创建一个单例。

在您的 DefaultActivity 上，恰好在 onCreate 方法中，只需将该实例添加到单例的集合中。

然后，您的所有活动都必须扩展 DefaultActivity，因此它们会将自己添加到集合中。

在单例方面，定义要检查活动计数的方法或类似的方法。

# ios - 核心数据多项目编辑效率和随机错误

> ID：14319132
> 
> 赞同：1
> 
> 时间：2013-01-14T13:17:40.293
> 
> 标签：ios, core-data

我希望这不是一个重复的问题。我似乎找不到类似的东西。大多数核心数据问题似乎都与新对象的创建有关……

我有一个包含大约 23,000 个项目的数据库的程序。我正在尝试创建一个导出/导入功能以将数据发送到其他设备（未与 iCloud 链接）。

导出工作正常，电子邮件也是如此......

我有导入功能，但它运行缓慢（稍后会详细介绍，似乎不适用于 iPhone 5 或 iPad 3）

我有一个函数可以解析导入到 NSArray (_importedRows) 中的数据，然后运行以下代码：

```
self.managedObjectContext = [(AppDelegate*)[[UIApplication sharedApplication] delegate] managedObjectContext];

    NSManagedObjectContext *ctx = self.managedObjectContext;
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"CHECKLIST"
                                   inManagedObjectContext:ctx];
    [fetchRequest setEntity:entity];
    ImportedData *importedData;
    NSString *verify;
    NSError *error = nil;
    NSManagedObject *updatedObject;
    NSArray *matchingItems;
    for (int i = 0; i < [_importedRows count]; i++) {
        importedData = [_importedRows objectAtIndex:i];
        verify = importedData.uniqueID;
        [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"uniqueID == %@", verify]];
        [fetchRequest setFetchLimit:1];
        matchingItems = [ctx executeFetchRequest:fetchRequest error:&error];

        for (updatedObject in matchingItems) {
            HUD.detailsLabelText = [NSString stringWithFormat:@"Updating %@" , [updatedObject valueForKey:@"figureName"]];
            [updatedObject setValue:importedData.numberOwned forKey:@"numberOwned"];
            [updatedObject setValue:importedData.numberWanted forKey:@"wishList"];
            [updatedObject setValue:importedData.availableTrade forKey:@"tradeList"];

        }

        [ctx save:&error];

        if (error != nil) {
            NSLog(@"error saving managed object context: %@", error);
        }

    } 
```

基本上，我正在抓取一个核心数据实体，然后循环遍历我的数组以检查匹配项。当我找到匹配项（uniqueID 谓词）时，我正在使用导入的数据更新对象。此代码在我的 iPhone 4s 上运行良好，但速度较慢。4,000 个项目大约需要 4-5 分钟。我做错了什么公然错误吗？我应该更频繁地调用保存功能吗？

作为奖励，由于某种原因，当我在 iPhone 5 上测试它时，这段代码几乎永远不会工作。10 次中有 9 次（在我的 iPad 3 上 50% 的时间）我得到一个

“1 月 14 日 08:06:44：***由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'-[__NSCFSet addObject:]: 尝试插入 nil'”

在控制台中。想法？

如果需要更多详细信息，请告诉我！

更新：似乎handleOpenURL被调用了两次......一次在applicationdidfinishlaunching中 `NSURL *url = (NSURL *)[launchOptions valueForKey:UIApplicationLaunchOptionsURLKey]; if (url != nil && [url isFileURL]) { [self.window.rootViewController performSelector:@selector(showWithLabel:) withObject:url afterDelay:6]; }`

一次在这里：

```
-(BOOL) application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
```

> { if (url != nil && [url isFileURL]) { [self.window.rootViewController performSelector:@selector(showWithLabel:) withObject:url]; } 返回是；}

我必须将这两个都放在应用程序委托中，否则函数不会总是被调用（一次是在应用程序启动时，如果应用程序已经在后台，我相信一次） - 我添加了一个检查以防止它在 showWithLabel 线程中第二次启动，但这似乎不是一个非常优雅的解决方案......

更新：@mundi 建议清理 fetchedresults 代码如下：

```
NSArray *importedIDs = [_importedRows valueForKeyPath:@"uniqueID"];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    fetchRequest.entity = [NSEntityDescription entityForName:@"CHECKLIST"
                                      inManagedObjectContext:ctx];
    fetchRequest.predicate = [NSPredicate predicateWithFormat:
                              @"uniqueID in %@", importedIDs];

    NSError *error = nil;
    NSManagedObject *updatedObject;
    NSArray *matchingItems;
    matchingItems = [ctx executeFetchRequest:fetchRequest error:&error];
    ImportedData *importedData;
    for (int i = 0; i < [_importedRows count]; i++) {
        importedData = [_importedRows objectAtIndex:i];
        for (updatedObject in matchingItems) {
            if ([importedData.uniqueID isEqualToString:[updatedObject valueForKey:@"uniqueID"]]) {
                HUD.detailsLabelText = [NSString stringWithFormat:@"Updating %@" , [updatedObject valueForKey:@"figureName"]];
                [updatedObject setValue:importedData.numberOwned forKey:@"numberOwned"];
                [updatedObject setValue:importedData.numberWanted forKey:@"wishList"];
                [updatedObject setValue:importedData.availableTrade forKey:@"tradeList"];
            }

        }
    }

    [ctx save:&error]; 
```

但组合的 fetchedresults 极大地提高了速度（最初 4000 个项目需要 240 秒，现在 80-120 秒之间）

首先对数组进行排序，然后按顺序更新再次大大加快了它的速度：

```
NSArray *matchingItemsSorted;
    matchingItemsSorted = [matchingItems sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
        NSString *first = [a valueForKey:@"uniqueID"];
        NSString *second = [b valueForKey:@"uniqueID"];
        return [first caseInsensitiveCompare:second];
    }];

    NSArray *importedRowsSorted;
    importedRowsSorted = [_importedRows sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
        NSString *first = [a valueForKeyPath:@"uniqueID"];
        NSString *second = [b valueForKeyPath:@"uniqueID"];
        return [first caseInsensitiveCompare:second];
    }];

    int i = 0;
    for (updatedObject in matchingItemsSorted) {
        NSLog(@"do we match? %@  :  %@", [[importedRowsSorted objectAtIndex:i] valueForKeyPath:@"uniqueID"], [updatedObject valueForKey:@"uniqueID"]);
        HUD.detailsLabelText = [NSString stringWithFormat:@"Updating %@" , [updatedObject valueForKey:@"figureName"]];
        [updatedObject setValue:[[importedRowsSorted objectAtIndex:i] valueForKeyPath:@"numberOwned"] forKey:@"numberOwned"];
        [updatedObject setValue:[[importedRowsSorted objectAtIndex:i] valueForKeyPath:@"numberWanted"] forKey:@"wishList"];
        [updatedObject setValue:[[importedRowsSorted objectAtIndex:i] valueForKeyPath:@"availableTrade"] forKey:@"tradeList"];
        i++;

    } 
```

有 nslog 的 4000 个项目需要 13 秒左右......现在唯一奇怪的是，当我注释掉 nslog 时，它经常崩溃......它发生得如此之快以至于破坏了核心数据 - 当它不崩溃时，只需要大约 4 秒？

谢谢，扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:43:12.817

你有两个嵌套循环。使用此模式加快速度：

```
NSArray *importedIDs = [_importedRows valueForKeyPath:@"uniqueID"];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
fetchRequest.entity = [NSEntityDescription entityForName:@"CHECKLIST"
                                  inManagedObjectContext:ctx];
fetchRequest.predicate = [NSPredicate predicateWithFormat:
            @"uniqueID in %@", importedIDs]; 
```

像这样，您可以获取一个包含所有匹配项的数组。

# c - AVR C 中的位和字节解释

> ID：14319133
> 
> 赞同：0
> 
> 时间：2013-01-14T13:17:41.960
> 
> 标签：c, byte, microcontroller, bit, avr-gcc

我知道这可能是错误的部分，但我的问题是微控制器编程特定（主要是 AVR）！

我正在使用 Uart 在两个 AVR atmega8 之间发送字节，其中字节中的每一位代表某种东西，每个发送的字节中只有一位是 1

因此，如果我想检查，例如，接收到的字节中的第 5 位，那么如果按如下方式写入：

```
short byte=UDR;
if(byte&(1<<5))
{
// do stuff for bit 5
} 
```

然后它总是工作正常

但是，如果我这样写：

```
short byte=UDR;
if(byte==0b00100000)

OR
short byte=UDR;
if(byte==0x20) 
```

然后它不起作用，如果我使用 Switch-case 而不是 if-else 它也会失败我无法理解这个问题，编译器是否将其解释为有符号的 no 和第 7 位作为符号？或者是其他东西？编译器是来自 AVR studio 5 的 AVR-gnu

如果有人问我在接收器上也有显示接收到的字节的 LED，所以我知道接收到的字节是正确的，但由于某种原因，我无法比较它的条件！仍然会有一些噪音导致 Uart 误解位，从而改变接收到的实际字节吗？

帮助 ！

看着每一个人

这里的东西就像超自然

最后，我已经解决了问题区域

我添加了 8 个 LED 来表示接收字节的位，这就是我发现的：

LED 将 (1<<5) 表示为 0b00100000 没关系，因为它是我发送的

但

接收到 0b00100000 时分配为发光的其他 LED（不包括 8 个）不发光！

FTW 男人！

我很确定收到的字节是正确的..但是 if-else 和 switch-case 比较有问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:25:17.940

C 没有二进制文字的语法，您无法键入`0b00100000`并编译它。

有点难以理解为什么它不适用于这种`== 0x20`情况，因为我们不知道`UDR`特定于您的平台的价值。

如果`UDR`设置了超过 1 位，那么精确相等性检查当然会失败，而单个位测试会成功。

您只能使用`switch()`each 的精确值`case`，但您当然可以在检查之前进行屏蔽：

```
switch( byte & 0x20 )
{
  case 0:
   break;
  case 0x20:
   break;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T13:34:43.960

It doesn't work because the second formulation changes the meaning of the code, not just the spelling of the mask constant. To test a bit, you must apply the bitwise and (`&`) to the constant, not just compare the value with the constant:

```
if (byte & 0b00100000)    /* note: 0b00100000 is a gcc extension */ 
```

or:

```
if (byte & 0x20)          /* or byte & 32, or byte & (1 << 5), etc. */ 
```

# php - Mysql自动递增类似数据的int

> ID：14319136
> 
> 赞同：2
> 
> 时间：2013-01-14T13:17:56.340
> 
> 标签：php, mysql, int, auto-increment

因此，这更多是对如何进行此操作的查询，当涉及到基础知识之外，我是 MySQL/PHP 编码的新手，所以我只是想知道如何设置一个自动递增的 int where if两个姓氏相同，它会计算它们。我在网上搜索时找不到任何东西，但一个例子是：

在数据库中，我们有 5 个用户

```
 1\. james smith 1   
 2\. terry smith 2
 3\. john smith 3
 4\. jerry fields 1
 5\. tom straus 1 
```

当这些用户注册时，我需要创建一个 int，即 john smith 是第三个具有相同姓氏的人，而 jerry fields 是第一个具有姓氏字段的人等。如何做到这一点？

我制作的表单是使用 jquery/php ajax 方法注册用户的表单，但我想添加与此类似的内容，以便将该数字与他们的姓名结合起来以创建特定的用户 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:24:02.787

如[使用`AUTO_INCREMENT`](http://dev.mysql.com/doc/en/example-auto-increment.html)中所述：

> 对于`MyISAM`和`BDB`表，您可以`AUTO_INCREMENT`在多列索引中的辅助列上指定。在这种情况下，`AUTO_INCREMENT`列的生成值计算为。当您要将数据放入有序组时，这很有用。`MAX(*auto_increment_column*) + 1 WHERE prefix=*given-prefix*`

因此，您可以这样做：

```
CREATE TABLE my_table (
  firstname VARCHAR(31) NOT NULL,
  lastname  VARCHAR(31) NOT NULL,
  counter   BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (lastname, counter)
) Engine=MyISAM;

INSERT INTO my_table
  (firstname, lastname)
VALUES
  ('james', 'smith' ),
  ('terry', 'smith' ),
  ('john' , 'smith' ),
  ('jerry', 'fields'),
  ('tom'  , 'straus')
; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/4c3f7/1/0)上查看。

# session - AZURE ACS 将身份与多个登录相关联

> ID：14319138
> 
> 赞同：1
> 
> 时间：2013-01-14T13:18:08.370
> 
> 标签：session, azure, identity, acs

我正在使用 Azure ACS 或“Windows Azure Active Directory 访问控制”创建网页，因为它也被称为。

我设法让它工作，登录后我提取索赔信息，如下所示：

```
var identity = Thread.CurrentPrincipal.Identity as     Microsoft.IdentityModel.Claims.ClaimsIdentity; 
```

然后，我将 nameidentifier 存储在数据库中，以便在用户再次登录时可以识别该用户。

现在我想让用户使用另一个身份登录，而他仍然使用第一个身份登录，以便我可以将这两个声明集与一个用户相关联。

当我将他定向到 acs 登录页面并在登录后他被重定向回来时，身份中的声明列表仍然相同，它不包含他登录的新身份的新声明。在将他重定向到 ACS 登录页面以获取下一个身份声明信息之前，我是否必须以某种方式将身份存储在 cookie 中并注销他？如果不是，这是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-03T09:27:07.500

您必须实现类似验证码之类的东西，以便您识别用户并存储其各种名称标识符。

1.  用户登录
2.  它是一个“已验证”的用户，即它的名称标识符与一个用户相关联吗？2a. 是的，继续。2b。不行，求验证码2b1。有效代码，将用户与验证码 2b2 关联。无效代码，转至 2b

这样可以通过验证码将多个身份与同一个用户关联起来。

希望这可以帮助！

# facebook-php-sdk - Facebook PHP SDK - 登录/未登录/连接到应用状态

> ID：14319140
> 
> 赞同：0
> 
> 时间：2013-01-14T13:18:11.993
> 
> 标签：facebook-php-sdk

我目前有一个 Javascript，可以让我识别访问我网站的用户的三种状态：-

1.  未登录 Facebook
2.  登录 Facebook 但未连接到我的应用
3.  登录 Facebook 并连接到我的应用

这很棒，效果很好，除了我要为三种状态显示三种不同的内容，目前我们将所有三种状态加载到 DOM 中，并使用 jQuery 显示正确的版本用户理解。

加载三种不同的内容类型只是为了显示一个不是一种很好的做事方式。我有两个选择：-

1.  使用 Facebook SDK 获取相同的信息服务器端
2.  使用 AJAX 加载正确的内容

所以，我的问题是：是否可以使用 Facebook PHP SDK 确定我上面列出的三种状态？

```
FB.getLoginStatus(function(response) {
        if (response.authResponse) {
            FB.api('/me', {accessToken: response.authResponse.accessToken}, function(user) {
               //connected to the app
            });
        } else {
            if (response.status == "not_authorized") {
               // logged in but not connected
            } else {
               // not connected to Facebook
            }
        }
    }); 
```

对此的任何帮助都非常感谢，因为经过数小时的尝试后我有点难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:55:13.223

看一下会话变量。

我似乎记得，如果用户已登录但尚未授权您的应用，则访问令牌将是您应用的访问令牌而不是用户访问令牌。

另请查看 Facebook 的 PHP SDK 中的示例，[了解如何将其与 JS SDK 一起使用，](https://github.com/facebook/facebook-php-sdk/blob/master/examples/with_js_sdk.php)确保您已`cookie:true`为 JS SDK 设置。

# sql-server - 从字符串中删除某些字符

> ID：14319141
> 
> 赞同：68
> 
> 时间：2013-01-14T13:18:15.987
> 
> 标签：sql-server, tsql

我正在尝试删除某些字符。

目前我有输出，`cityname district`但我想删除`cityname`.

```
SELECT Ort FROM dbo.tblOrtsteileGeo
WHERE GKZ = '06440004' 
```

输出：

```
Büdingen Aulendiebach
Büdingen Büches
Büdingen Calbach
Büdingen Diebach
Büdingen Dudenrod
Büdingen Düdelsheim 
```

期望的输出：

```
Aulendiebach
Büches
Calbach
Diebach
Dudenrod
Düdelsheim 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-01-14T13:24:21.947

您可以将`Replace`函数用作；

```
REPLACE ('Your String with cityname here', 'cityname', 'xyz')
--Results
'Your String with xyz here' 
```

如果将此应用于表列，其中`stringColumnName, cityName both are columns of YourTable`

```
SELECT REPLACE(stringColumnName, cityName, '')
FROM YourTable 
```

或者，如果您想`'cityName'`从列的输出中删除字符串，那么

```
SELECT REPLACE(stringColumnName, 'cityName', '')
FROM yourTable 
```

**编辑：**由于您现在提供了更多详细信息，`REPLACE`因此功能不是解决问题的最佳方法。以下是另一种方法。@MartinSmith 也给出了一个很好的答案。现在您可以再次选择。

```
SELECT RIGHT (O.Ort, LEN(O.Ort) - LEN(C.CityName)-1) As WithoutCityName
FROM   tblOrtsteileGeo O
       JOIN dbo.Cities C
         ON C.foo = O.foo
WHERE  O.GKZ = '06440004' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T13:37:46.760

一个问题`REPLACE`是城市名称包含地区名称。你可以使用类似的东西。

```
SELECT SUBSTRING(O.Ort, LEN(C.CityName) + 2, 8000)
FROM   dbo.tblOrtsteileGeo O
       JOIN dbo.Cities C
         ON C.foo = O.foo
WHERE  O.GKZ = '06440004' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-12T06:22:59.963

```
UPDATE yourtable 
SET field_or_column =REPLACE ('current string','findpattern', 'replacepattern') 
WHERE 1 
```

# vb.net - VB.NET：图像作为复选框状态框

> ID：14319142
> 
> 赞同：1
> 
> 时间：2013-01-14T13:18:16.847
> 
> 标签：vb.net, checkbox, background

是否可以使用图像作为复选框“选中”指示方块？

我知道我可以使用背景图像，但这也位于标签后面，而且（据我所知）不可能对齐它。

如何使用图像而不是正方形并保留标签和所有其他自定义项？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:49:26.907

你看起来像这样？

```
Dim frm As New Form
frm.Size = New Size(320, 200)

Dim iList As New ImageList
iList.Images.Add(Image.FromFile("check.png"), Color.White)
iList.Images.Add(Image.FromFile("uncheck.png"), Color.White)

Dim chk As New CheckBox
chk.Text = "Check Box With Image"
chk.AutoSize = False
chk.Size = New Size(350, 20)
chk.ImageList = iList
chk.ImageIndex = 1
chk.CheckAlign = ContentAlignment.MiddleRight
chk.ImageAlign = ContentAlignment.MiddleLeft
chk.TextImageRelation = TextImageRelation.ImageBeforeText
chk.Location = New Point(32, 32)

frm.Controls.Add(chk)

AddHandler chk.CheckStateChanged,
    Sub(sender1 As Object, e1 As EventArgs)
        chk.ImageIndex = IIf(chk.Checked, 0, 1)
    End Sub

frm.ShowDialog() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:53:20.310

**更新#1**：实际上，@brahm 下面的解决方案比我的要好得多！

**更新＃2**：实际上，它不是。现在我看到了他是如何做到的：他将复选框移到了可见`Form`区域之外。不是一个很好的解决方案...

* * *

理想的解决方案是对控件进行子类化并通过覆盖该方法`CheckBox`进行自己的渲染。`OnPaint`

一个更简单但可能更混乱的解决方案是在复选框上放置一个 PictureBox 并`PictureBox`通过`CheckBox`'`CheckedChange`事件控制图像。

另一种选择：您仍然可以按照您的建议使用`CheckBox`按钮模式 ( `Appearance = Button`)，但随后在其旁边添加一个标签。然后，处理`Click`Label 上的事件以切换`CheckBox`. 然后最终结果应该为您提供您正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-16T09:35:52.933

```
Imports System.Drawing
Imports System.Windows.Forms
Imports System.Windows.Forms.VisualStyles

Public Class ImageCheckBox

  Public State As CheckBoxState = CheckBoxState.UncheckedNormal
  Public Hot As Boolean = False
  Public Pressed As Boolean = False
  Public ImageDictionary As Dictionary(Of CheckBoxState, Image) = New Dictionary(Of CheckBoxState, Image)
  Private Const PaddingModifier As Integer = 2

  Sub New()
    Me.New(New Dictionary(Of CheckBoxState, Image) From {
      {CheckBoxState.CheckedDisabled, My.Resources.form_checkbox_checked},
      {CheckBoxState.CheckedHot, My.Resources.form_checkbox_checked},
      {CheckBoxState.CheckedNormal, My.Resources.form_checkbox_checked},
      {CheckBoxState.CheckedPressed, My.Resources.form_checkbox_checked},
      {CheckBoxState.UncheckedDisabled, My.Resources.form_checkbox_unchecked},
      {CheckBoxState.UncheckedHot, My.Resources.form_checkbox_unchecked},
      {CheckBoxState.UncheckedNormal, My.Resources.form_checkbox_unchecked},
      {CheckBoxState.UncheckedPressed, My.Resources.form_checkbox_unchecked}})
  End Sub

  Sub New(imageDictionary As Dictionary(Of CheckBoxState, Image))

    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.

    Me.ImageDictionary = imageDictionary
  End Sub

  Sub CheckBox_Paint(sender As Object, e As PaintEventArgs) Handles Me.Paint
    'Return if the specific Image is not found
    If Not ImageDictionary.ContainsKey(State) Then Return

    'Get the Size of the CheckBox
    Dim glyphSize As Size = CheckBoxRenderer.GetGlyphSize(e.Graphics, State)

    'Get the Location of the CheckBox in relation to the Alignment of it
    Dim glyphLocation As Point
    Select Case Me.CheckAlign
      Case Drawing.ContentAlignment.TopLeft
        glyphLocation = New Point(Me.Padding.Left, Me.Padding.Top)
        Exit Select
      Case Drawing.ContentAlignment.TopCenter
        glyphLocation = New Point(Me.Padding.Left + (Me.Width - glyphSize.Width) / 2, Me.Padding.Top)
        Exit Select
      Case Drawing.ContentAlignment.TopRight
        glyphLocation = New Point(Me.Padding.Left + Me.Width - glyphSize.Width, Me.Padding.Top)
        Exit Select
      Case Drawing.ContentAlignment.MiddleLeft
        glyphLocation = New Point(Me.Padding.Left, Me.Padding.Top + (Me.Height - glyphSize.Height) / 2)
        Exit Select
      Case Drawing.ContentAlignment.MiddleCenter
        glyphLocation = New Point(Me.Padding.Left + (Me.Width - glyphSize.Width) / 2, Me.Padding.Top + (Me.Height - glyphSize.Height) / 2)
        Exit Select
      Case Drawing.ContentAlignment.MiddleRight
        glyphLocation = New Point(Me.Padding.Left + Me.Width - glyphSize.Width, Me.Padding.Top + (Me.Height - glyphSize.Height) / 2)
        Exit Select
      Case Drawing.ContentAlignment.BottomLeft
        glyphLocation = New Point(Me.Padding.Left, Me.Padding.Top + Me.Height - glyphSize.Height)
        Exit Select
      Case Drawing.ContentAlignment.BottomCenter
        glyphLocation = New Point(Me.Padding.Left + (Me.Width - glyphSize.Width) / 2, Me.Padding.Top + Me.Height - glyphSize.Height)
        Exit Select
      Case Drawing.ContentAlignment.BottomRight
        glyphLocation = New Point(Me.Padding.Left + Me.Width - glyphSize.Width, Me.Padding.Top + Me.Height - glyphSize.Height)
        Exit Select
    End Select

    'Set the drawing Area
    Dim glyphRectangle As Rectangle = New Rectangle(glyphLocation, glyphSize)

    'Enlarge the Rectangle to completely hide default symbol
    Dim clearRectangle As Rectangle = New Rectangle(glyphLocation.X - PaddingModifier,
                                                    glyphLocation.Y - PaddingModifier,
                                                    glyphSize.Width + 2 * PaddingModifier,
                                                    glyphSize.Height + 2 * PaddingModifier)

    'Draw the Parent Background over the default CheckBox to clear it
    CheckBoxRenderer.DrawParentBackground(e.Graphics, clearRectangle, Me)

    Debug.WriteLine(State)
    'Finally draw the custom CheckBox image on the position of the default one
    e.Graphics.DrawImage(ImageDictionary(State), glyphRectangle)
  End Sub

  Sub CheckBox_MouseClick(sender As Object, e As EventArgs) Handles Me.MouseClick
    Me.Checked = Not Me.Checked
  End Sub
  Sub CheckBox_MouseDown(sender As Object, e As MouseEventArgs) Handles Me.MouseDown
    Me.Pressed = True
  End Sub
  Sub CheckBox_MouseUp(sender As Object, e As MouseEventArgs) Handles Me.MouseUp
    Me.Pressed = False
  End Sub
  Sub CheckBox_MouseEnter(sender As Object, e As EventArgs) Handles Me.MouseEnter
    Me.Hot = True
  End Sub
  Sub CheckBox_MouseLeave(sender As Object, e As EventArgs) Handles Me.MouseLeave
    Me.Hot = False
  End Sub

  Public Sub updateState() Handles Me.MouseClick, Me.MouseDown, Me.MouseUp, Me.MouseEnter, Me.MouseLeave, Me.EnabledChanged
    Debug.WriteLine(Me.Checked & " " & Me.Enabled & " " & Me.Hot & " " & Me.Pressed)
    Me.State = CurrentState()
    Me.Refresh()
    Debug.WriteLine(State)
  End Sub

  Public Function CurrentState() As CheckBoxState
    If (Me.Checked) Then
      If (Not Me.Enabled) Then Return CheckBoxState.CheckedDisabled
      If (Me.Pressed) Then Return CheckBoxState.CheckedPressed
      If (Me.Hot) Then Return CheckBoxState.CheckedHot
      Return CheckBoxState.CheckedNormal
    Else
      If (Not Me.Enabled) Then Return CheckBoxState.UncheckedDisabled
      If (Me.Pressed) Then Return CheckBoxState.UncheckedPressed
      If (Me.Hot) Then Return CheckBoxState.UncheckedHot
      Return CheckBoxState.UncheckedNormal
    End If
  End Function

End Class 
```

# php - PHP 应用强模糊的最快方法

> ID：14319144
> 
> 赞同：5
> 
> 时间：2013-01-14T13:18:18.277
> 
> 标签：php, image, gaussian

我需要编写一个脚本来模糊图像。如果我不需要它**真的很难**模糊它，那将不是问题。

现在，GD的高斯模糊滤镜真的很弱。由于某种原因，图像[卷积](http://php.net/manual/en/function.imageconvolution.php)只接受 3x3 矩阵，所以我不能生成具有更大半径的[高斯矩阵以获得更强的模糊？](http://en.wikipedia.org/wiki/Gaussian_blur#Sample_Gaussian_matrix)即使我可以，我也不确定它会有多快。

多次运行高斯模糊可以解决问题，但速度**非常**慢。为了达到我正在寻找的效果，我需要在图像上运行 40-100 次，当然，完成需要 10-20 秒。

有没有办法使用与 PHP 捆绑在一起的库在合理的时间内实现我正在寻找的东西？

这是确切的效果。**生成时间：10.972307920456 秒。80 次通过。**

# 原来的：

![在此处输入图像描述](../Images/b0c8b6605aff33ff344a21c53bab1f9f.png)

# 处理：

![在此处输入图像描述](../Images/c536b865cc14bab2ba1faca9dc78179a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:01:49.730

`bool Imagick::blurImage ( float $radius , float $sigma [, int $channel ] )`

一个）。`$radius` 模糊半径

乙）。`$sigma` 标准差

C）。`$channel` 通道类型常量。未提供时，所有通道都会模糊。

# android - 如何在另一个apk中执行apk

> ID：14319146
> 
> 赞同：2
> 
> 时间：2013-01-14T13:18:20.763
> 
> 标签：android, apk

我正在开发一个在某些平板电脑上运行的应用程序。这些平板电脑已植根，使用该平板电脑的用户无法使用平板电脑运行的单个应用程序。如果我想在我的应用程序中使用外部应用程序是可能的吗？就像我的应用程序中的模拟器一样。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:29:11.883

从技术上讲，要在您需要的 Android 应用程序和 Android 设备上的 android 模拟器中运行 android 应用程序，这需要大量 CPU，现在既没有实现，也不是您可能面临的任何问题的良好解决方案。理论上这是可能的，但在技术上 - 非常复杂，在我看来毫无用处。

您应该尝试找到一个更优雅的解决方案，而不是这个。您可以做的最简单的事情是在受限应用程序之间建立封装的切换机制，或者考虑如何集成这些应用程序的解决方案。

# mysql - := 在占位符的上下文中表示什么

> ID：14319149
> 
> 赞同：2
> 
> 时间：2013-01-14T13:18:32.400
> 
> 标签：mysql, sql

对于那些知道的人来说，这可能是一个愚蠢的问题，但在这里。

尝试在查询中使用占位符。我发现以下工作：

```
SELECT day, @dy:=CAST( CASE day
                         WHEN 'Su' THEN 1
                         WHEN 'Mo' THEN 2
                         WHEN 'Tu' THEN 3
                         WHEN 'Wed' THEN 4
                         WHEN 'Th' THEN 5
                         WHEN 'Fr' THEN 6
                         WHEN 'Sa' THEN 7
                     END AS UNSIGNED) as dayofweek 
 FROM `Schedule_Repetition` WHERE repetition_Key='426'; 
```

**但这不起作用**

```
SELECT day, @dy=CAST( CASE day
                         WHEN 'Su' THEN 1
                         WHEN 'Mo' THEN 2
                         WHEN 'Tu' THEN 3
                         WHEN 'Wed' THEN 4
                         WHEN 'Th' THEN 5
                         WHEN 'Fr' THEN 6
                         WHEN 'Sa' THEN 7
                     END AS UNSIGNED) as dayofweek 
 FROM `Schedule_Repetition` WHERE repetition_Key='426'; 
```

我看到了占位符的各种示例，其中一些使用`@P=.....`和其他使用`@P:=.......` 请有人解释**:=**表示什么以及为什么语法会有所不同，或者指出解释使用**:=**的文档的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:20:15.843

`:=`是一个[赋值运算符](http://dev.mysql.com/doc/refman/5.0/en/assignment-operators.html#operator_assign-value)。以下信息来自 dev.mysql.com 上的[文档](http://dev.mysql.com/doc/refman/5.0/en/assignment-operators.html#operator_assign-value)。

> 赋值运算符。使运算符左侧的用户变量采用其右侧的值。右侧的值可以是文字值、另一个存储值的变量或任何产生标量值的合法表达式，包括查询结果（前提是该值是标量值）。

`=`和的区别`:=`：

> = 赋值（作为 SET 语句的一部分，或作为 UPDATE 语句中 SET 子句的一部分）：= 赋值
> 
> 与 = 不同，:= 运算符永远不会被解释为比较运算符。这意味着您可以在任何有效的 SQL 语句（不仅仅是在 SET 语句中）中使用 := 来为变量赋值。

查看[dev.mysql.com 上的完整运算符列表](http://dev.mysql.com/doc/refman/5.0/en/non-typed-operators.html)。

# php - curl 命令处理程序

> ID：14319155
> 
> 赞同：0
> 
> 时间：2013-01-14T13:18:53.617
> 
> 标签：php, curl

我正在使用 curl 来列出帖子并检查其详细信息。现在我也想用 curl 删除某些帖子。但是，我实际上不知道如何处理以下命令：

```
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "DELETE"); 
```

设置的 CURLOPT_URL ，我必须在那里添加一条线吗？那里实际发生了什么？现在是否设置了 $_REQUEST 变量？我似乎不明白，因为我真的无法想象您可以在不处理命令的情况下使用 customrequest。

列出的内容是从数据库中提取的。

我期待着您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:49:49.507

`$_SERVER['REQUEST_METHOD']`将告诉您该请求是否为*DELETE*请求。

`$_REQUEST`并将`$_GET`由通常的数据位填充。

`$_SERVER['REQUEST_URI']`如果您想通过其他方法确定要删除的内容，将为您提供请求的 URI。

其他所有内容都特定于您要删除的数据的组织方式。

# ruby-on-rails - rails按条件更新

> ID：14319156
> 
> 赞同：1
> 
> 时间：2013-01-14T13:18:56.157
> 
> 标签：ruby-on-rails, web

我试图在反馈表中将已删除列中的单元格更新为 true，其中 fid 和 pid 等于给定的参数

```
Feedback.update_all ({:deleted => true} , {:fid => params[:fid] , :pid => params[:pid]}) 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:20:39.033

```
Feedback.where(fid: params[:fid], pid: params[:pid).update_all(deleted: true) 
```

完毕！

# ios - performSelector:withObject:afterDelay 在 CALayer 动画结束后调用

> ID：14319159
> 
> 赞同：1
> 
> 时间：2013-01-14T13:19:07.343
> 
> 标签：ios, objective-c, core-animation, calayer, performselector

我想对一些 CALayers 的位置进行动画处理。在动画结束之前，我想推另一个`UIViewController`，这样当我弹出最后一个 UIView 控制器时，`CALayers`它们会回到原来的位置。这是我的代码：

```
CABasicAnimation *animation4 = [CABasicAnimation animationWithKeyPath:@"position"];
animation4.fromValue = [control.layer valueForKey:@"position"];

CGPoint endPoint4=CGPointMake(512, -305);

animation4.toValue =[NSValue valueWithCGPoint:endPoint4];
animation4.duration=1;
[control.layer addAnimation:animation4 forKey:@"position"];

[self performSelector:@selector(goToSolutionViewController) withObject:nil afterDelay:0.9]; 
```

在`goToSolutionViewController`我有：

```
-(void)goToSolutionViewController{

    SolutionViewController *solution=[self.storyboard instantiateViewControllerWithIdentifier:@"SolutionViewID"];

    [self.navigationController pushViewController:solution animated:NO]; 
```

}

问题是

`[self performSelector:@selector(goToSolutionViewController) withObject:nil afterDelay:0.9]`

直到动画结束才被调用。所以`goToSolutionViewController`在 1.9 秒而不是 0.9 秒后调用。

在动画结束之前我能做些什么来推送 UIViewController？或者`CALayers`当我弹出时让背部处于原始位置`UIViewController`但用户看不到返回的方式。

编辑： - -

此性能问题仅在我第一次执行动画并推送 UIViewcontroller 时发生。当我弹出它并再次执行所有操作时，性能就像幽灵一样。问题可能与第一次 UIViewController 加载时间有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:48:22.363

与延迟后执行相比，您应该使用动画回调之一来调用您的方法，而不是依赖动画的时间。您可以使用允许您使用块的 CATransaction，也可以使用普通的委托方法。

## 使用 CATransaction

通过在事务中包装动画（将其添加到图层），您可以使用事务的完成块。

```
[CATransaction begin];
// Your animation here...
[CATransaction setCompletionBlock:^{
    // Completion here...
}];
[CATransaction commit]; 
```

## 使用委托回调

通过将自己设置为动画委托，您将在动画完成时获得委托回调。

```
animation4.delegate = self; 
```

和回调

```
- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag {
    // Completion here..
} 
```

# django - 修改模型后django中的South Data迁移

> ID：14319162
> 
> 赞同：2
> 
> 时间：2013-01-14T13:19:27.023
> 
> 标签：django, django-south

我有一个现有类模型的项目

```
class Disability(models.Model):
    child = models.ForeignKey(Child,verbose_name=_("Child")) 
```

但是随着最近的架构变化，我必须将其修改为

```
class Disability(models.Model):
    child = models.ManyToManyField(Child,verbose_name=_("Child")) 
```

现在对于这个新的变化..（即使我必须为新的数据库修改现有的数据库）我想数据迁移是最好的方法，而不是手动进行。

我参考了这个在线文档

[http://south.readthedocs.org/en/latest/commands.html#commands-datamigration](http://south.readthedocs.org/en/latest/commands.html#commands-datamigration)

但它很少涉及数据迁移。以及有关架构迁移的更多信息。

问题 1。如果我进行架构迁移，这会让我失去属于那个旧模型的所有以前的数据。

问题2 。即使我正在尝试模式迁移，它也在问这个......

```
 (rats)rats@Inspiron:~/profoundis/kenyakids$ ./manage.py schemamigration web --auto 
  ? The field 'Disability.child' does not have a default specified, yet is NOT NULL.
  ? Since you are removing this field, you MUST specify a default
  ? value to use for existing rows. Would you like to:
  ?  1\. Quit now, and add a default to the field in models.py
  ?  2\. Specify a one-off value to use for existing columns now
  ?  3\. Disable the backwards migration by raising an exception.
  ? Please select a choice: 1 
```

谁能解释一下模式和数据迁移之间的概念和区别，以及如何分别实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:22:51.223

架构和数据迁移不是您可以用来修改表结构的不同选项。它们是完全不同的东西。当然，数据迁移[在 South docs 中有完整的描述](http://south.readthedocs.org/en/latest/tutorial/part3.html#data-migrations)。

在这里，数据迁移对您没有帮助，因为您需要修改架构。South 和其他迁移系统的全部意义在于它们允许您在不丢失数据的情况下执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:03:20.733

1.  South 将尝试通过将您的表数据移动到临时表（我可能错了）来进行事务，然后重组表并尝试将原始数据添加到新结构中。像这样：

**old_table -> 克隆 -> tmp_table**

**旧表->重组**

**tmp_table.data -> 表**

South 将查看字段类型。如果有很大的变化，它会问该怎么做。例如，将文本字段更改为 int 字段将很难转换:)

1.  当您删除字段时，您可能仍希望能够转换回旧结构，因此 south 需要一些默认数据才能创建具有旧结构的表。

移动数据始终是一个问题，因为您可能会更改表结构和字段类型。例如，您将如何手动处理从 Char(max_length=100) 到 Char(max_length=50) 的数据？

最好的建议是保持良好的备份。还可以利用 djangos 固定装置。您可以保存不同数据结构的固定装置以及南迁移。

> South 将以与 syncdb 相同的方式加载 initial_data 文件，但它会在每个成功的迁移过程结束时加载它们

[http://south.readthedocs.org/en/latest/commands.html#initial-data-and-post-syncdb](http://south.readthedocs.org/en/latest/commands.html#initial-data-and-post-syncdb)

# angularjs - 使用 AngularJS 裁剪图像

> ID：14319177
> 
> 赞同：9
> 
> 时间：2013-01-14T13:20:29.877
> 
> 标签：angularjs, jcrop, angular-ui

我想让用户裁剪图像，我找到了这个 JQuery 插件 - [http://deepliquid.com/content/Jcrop.html](http://deepliquid.com/content/Jcrop.html)

我尝试将它与 Angular-ui 的 Jquery passthrough 选项一起使用，将`ui-jq=Jcrop`指令添加到`<img>`

问题是，如果我使用 ng-src 动态更改图像，它将不起作用并且什么也看不到。如果我将其更改为 src 并放置一个静态 url，我可以看到图像和 Jcrop。

我该如何解决？另外，我怎样才能听 Jcrop 的回调来知道用户的选择是什么？

有没有更好/更简单的方法向 AngularJS 添加图像裁剪功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T16:58:54.493

这是我的解决方案：

我编写了一个指令来创建 img 元素并在其上应用插件。当 src 改变时，这个 img 被删除，由插件创建的内容也被销毁，然后用新的 src 重新创建新的 img 并再次在其上应用插件。

还提供了 'selected' 回调，以便能够协调选择的内容（包装在 $apply 中，以便您可以修改其中的范围值）。

[在 Plunker](http://plnkr.co/edit/Z2IQX8s9UK6wQ1hS4asz?p=preview)检查我的解决方案

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-12T15:15:10.127

我在这里使用 AngularJS 和 Jcrop 构建了一个演示：

演示：[https ://coolaj86.github.com/angular-image-crop](https://coolaj86.github.com/angular-image-crop)

在 Github 上：[https ://github.com/coolaj86/angular-image-crop](https://github.com/coolaj86/angular-image-crop)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T00:07:34.913

您可以利用`ui-event`创建一个事件定义对象，其中键是事件名称，值是回调。或者您可以简单地将这些事件作为选项传递给 Jcrop（[根据文档](http://deepliquid.com/projects/Jcrop/demos.php?demo=handler)）

最后，还有[一个新的更新](https://github.com/angular-ui/angular-ui/pull/347)，`ui-jq`让您可以添加`ui-refresh`一个表达式，以重新触发插件。

理论上你应该能够做到

```
<img ui-jq="Jcrop" 
     ui-options="{onSelect:myCallback}"
     ui-event="{onChange:'myCallback($event)'}"
     ui-refresh="imgSrc"
     ng-src="imgSrc" /> 
```

**注意：这只是再次重新触发直通，并不意味着这将解决问题或插件在重新初始化时将正常运行**

我们仍在研究一种让您在不同时间触发不同事件的好方法。

# c# - 通过添加 Cookie 对 Web 请求进行身份验证会引发错误

> ID：14319178
> 
> 赞同：2
> 
> 时间：2013-01-14T13:20:30.693
> 
> 标签：c#, asp.net, forms-authentication

在我的网站中，我正在使用表单身份验证。我想为此目的进行网络请求，我正在使用**cookieContainer**的帮助。我的代码是这样的

```
 string url = HttpContext.Current.Request.Url.AbsoluteUri;
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
    HttpCookie cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
    Cookie authenticationCookie = new Cookie(
        FormsAuthentication.FormsCookieName,
        cookie.Value,
        cookie.Path,
       HttpContext.Current.Request.Url.Authority);
    req.CookieContainer = new CookieContainer();
    req.CookieContainer.Add(authenticationCookie);
    WebResponse res = req.GetResponse(); 
```

但是此代码会引发错误“ **cookie的'Domain'='localhost:300'部分无效。** ”。因此我发现错误来自这行代码

```
Cookie authenticationCookie = new Cookie(
    FormsAuthentication.FormsCookieName,
    cookie.Value,
    cookie.Path,
   HttpContext.Current.Request.Url.Authority); 
```

该站点的 url 是 localhost:300。我找不到任何解决方案。谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T13:37:21.023

尝试从传递给 Cookie 构造函数的域属性中排除端口号：

```
Cookie authenticationCookie = new Cookie(
    FormsAuthentication.FormsCookieName,
    cookie.Value,
    cookie.Path,
    HttpContext.Current.Request.Url.Host
); 
```

或者直接将 cookie 设置为 HTTP 标头而不使用 cookie 容器：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
HttpCookie cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
req.Headers[HttpRequestHeader.Cookie] = string.Format("{0}={1}", cookie.Name, cookie.Value);
WebResponse res = req.GetResponse(); 
```

# c++ - 从列表容器中删除元素

> ID：14319180
> 
> 赞同：3
> 
> 时间：2013-01-14T13:20:34.423
> 
> 标签：c++, list, containers, erase

我很难理解为什么代码会这样。首先，我已经阅读了相关的回答材料，仍然发现解释有点先进。所以我想知道是否有人可以用简单的方式解释这一点。

好的，所以我正在从列表中删除元素。

该列表包含奇数和偶数的 int 元素。这部分我明白了。这是我最初编写的用于从列表中删除奇数的代码

```
for(list<int>::iterator i = lNo.begin(); i != lNo.end(); i++)
    {
        if(*i%2 == 0 )
        {
             lNo.erase(i);
        }
        else
        {
             cout << " " << *i;
        }
     } 
```

使用此代码，程序根本无法编译，我阅读了一条消息，指出程序必须关闭。

当我编写此代码时，擦除功能起作用：

```
for(list<int>::iterator i = lNo.begin(); i != lNo.end(); i++)
    {
        if(*i%2 == 0 )
        {
             i = lNo.erase(i);  
        }
        else
        {
            cout << " " << *i;
        }
   } 
```

我只需要了解为什么当我编写 i = lNo.erase(i) 而不是仅使用 lNo.erase(i) 时程序可以工作？

一个简单简洁的答案将不胜感激。我知道不同的容器有不同的约束，那么我在原始代码中违反了哪个约束？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T13:27:11.010

如[文档](http://en.cppreference.com/w/cpp/container/list/erase)中所述，该`erase`函数使传入的迭代器无效。这意味着它不能再次使用。循环无法继续使用该迭代器。

该文档还指出，它会返回一个迭代器，指向擦除后的元素。该迭代器是有效的，可用于继续。

但是请注意，由于它*在被擦除的元素之后*返回一个迭代器，因此不需要增加它来推进，否则不会检查该元素的奇数。循环应该对此进行处理，并且仅在未完成擦除时才增加。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T13:26:12.207

即使您的第二个代码也不正确。

正确的代码应该是这样的：

```
for(list<int>::iterator i = lNo.begin(); i != lNo.end(); /*NOTHING HERE*/ )
{
    if(*i%2 == 0 )
    {
         i = lNo.erase(i);  
    }
    else
    {
        cout << " " << *i;
        ++i; //INCREMENT HERE, not in the for loop
    }
} 
```

请注意，`erase()`删除该项目并将迭代器返回到下一个项目。`i`这意味着，擦除时不需要增加代码；相反，您只需要`i`使用来自`erase`.

您可以[`erase-remove idiom`](http://en.wikipedia.org/wiki/Erase-remove_idiom)用作：

```
lNo.erase(std::remove_if(lNo.begin(),
                         lNo.end(),
                         [](int i) { return i%2 == 0; }), 
                         lNo.end()); 
```

[现场演示](http://stacked-crooked.com/view?id=829689e7a7de56c8de3cdaecc0f8159a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:32:17.660

问题是您使用的迭代器不希望修改列表的链接。因此，当您在列表中调用 erase() 时，链接会被有效地修改，因此您的迭代器不再有效。i++ 语句不再起作用。

但是，在第二个版本中，您将迭代器重新分配给仍然具有完整链接的有效对象，因此 i++ 语句仍然可以工作。

在某些框架中，您有两种迭代器，一种能立即反映底层数据集发生的情况（这是您正在使用的），另一种不会改变它们的链接，无论底层数据集发生了什么（所以你不必使用第二版的奇怪技巧）。

# css - 捆绑和缩小字体真棒css。在 mvc 4 中

> ID：14319184
> 
> 赞同：6
> 
> 时间：2013-01-14T13:20:47.403
> 
> 标签：css, asp.net-mvc-4, minify, bundling-and-minification, font-awesome

我正在尝试缩小字体 awesome.css 但是当我最小化它时，它会显示不同的垃圾字符，例如：

```
{ content: "\f048"; } 
```

上面是内容图标，如向上箭头等....

有什么办法可以克服这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:37:43.863

也许我误解了你在问什么，但那些不是垃圾字符。这些是 Font Awesome 使用的 Unicode 代码点（特别是私人使用区域）。它们绝对应该在您的缩小 CSS 中。或者您可以使用 Font Awesome 附带的缩小 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T03:09:50.930

我使用[YUI Bundle Transformer解决了它](http://www.nuget.org/packages/BundleTransformer.Yui)

通过 NuGet 包安装它

代码如下所示：

```
 var cssBundle = (new StyleBundle("~/bundles/css").Include(
            "~/Content/css/font-awesome.css");
        cssBundle.Transforms.Add(new CssTransformer(new YuiCssMinifier()));

        bundles.Add(cssBundle); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:38:44.957

我以前遇到过这个。当您缩小时，您需要指定一个字符集。在项目的配置中，将 xml 的编码设置为：

```
<?xml version="1.0" encoding="utf-8"?> 
```

如果您不喜欢弄乱配置或无权访问，您可以修改 CSS。

```
@charset "UTF-8"; 
```

在这两种情况下，它都必须是文件的第一行。如果您要连接它，它只需要在第一个文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-19T15:24:43.357

尝试通过 CssRewriteUrlTransform 注册。

例如：

```
bundles
  .Add(new StyleBundle("~/Content/utilities")
     .Include("~/Content/font-awesome.min.css", new CssRewriteUrlTransform())); 
```

# mysql - 关系表是否应包含重复数据以加快查询速度

> ID：14319188
> 
> 赞同：0
> 
> 时间：2013-01-14T13:21:06.427
> 
> 标签：mysql, database-design, indexing, database-performance

我有一个带有 4 个表的 MySQL 数据库：

```
job
job_application
client
candidate 
```

每个表都有自己的主键，即`job_id`, `job_application_id`, `client_id`,`candidate_id`

表中的雇主可以在`client`表中发布职位`job`。该`job`表包含一个`client_id`标识客户的字段

表中的候选人`candidate`可以申请工作，在`job_application`表中插入一行。该`job_application`表包含一个`job_id`字段和一个`candidate_id`字段，用于标识工作是什么以及是谁申请的

我在为雇主编写查询以管理他们收到的工作申请时遇到了一些问题。作为一个例子，这里是我写的一个函数，它从`job_application`

```
public function deleteJobApplications($job_application_ids) {
    $this->db->query("DELETE ja.* FROM " . DB_PREFIX . "job_application ja LEFT JOIN " . DB_PREFIX . "job j ON (j.job_id = ja.job_id) WHERE ja.job_application_id IN ('" . implode("','", array_map('intval', $job_application_ids)) . "') AND j.client_id = '" . (int)$this->client->getClientId() . "'");
} 
```

因为`client_id`只在表中引用，`job`所以`LEFT JOIN`每次`job`想从表中`UPDATE`或`DELETE`从表中都需要到`job_application`表

我应该`client_id`向表中添加另一个字段`job_application`，本质上是复制数据库中已经保存的数据，还是继续`LEFT JOIN`for every `UPDATE`and `DELETE`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:01:26.733

您的问题*不*在于您需要通过将“client_id”作为冗余列引入来非规范化“job_applications”。（目前接受的答案在这方面实际上是不正确的。）您的问题是您一开始没有正确规范化。如果您*有*，则“client_id”列将*已经*在该表中，并且您的问题一开始就不会出现。

让我们假设候选人姓名、客户姓名和职位名称是全球唯一的。

看起来像这样的表将满足名为“candidate_name”的谓词 Person 在公司“client_name”申请“job_name”。

```
job_applicatons
Person named <candidate_name> applies for <job_name> at company <client_name>.

client_name  job_name                candidate_name  
--
Microsoft    C++ programmer, Excel   Ed Wood 
Microsoft    C++ programmer, Excel   Dane Crute 
Microsoft    C++ programmer, Excel   Vim Winder
Microsoft    C++ programmer, Word    Wil Krug
Microsoft    C++ programmer, Word    Val Stein
Google       Python coder, search    Ed Wood
Google       Programmer, compilers   Ed Wood
Google       Programmer, compilers   Val Stein 
```

三列，没有 id 号，没有空值，没有非主属性，都是键。这种关系在 6NF 中。

很明显，您可以通过从前两列中选择不同的值来为工作（或工作机会）创建一个表。外键引用是显而易见的。

```
jobs
Company named <client_name> offers <job_name>.

client_name  job_name
--
Microsoft    C++ programmer, Excel
Microsoft    C++ programmer, Word
Google       Python coder, search
Google       Programmer, compilers 
```

以类似的方式，您可以仅从第一列中为一组公司选择不同的值，而从最后一列中为一组申请人选择不同的值。同样，外键引用应该是显而易见的。

```
clients
Company named <client_name> is a client.

client_name
--
Microsoft
Google

candidates
Person named <candidate_name> is looking for a job.

candidate_name  
--
Ed Wood 
Dane Crute 
Vim Winder
Wil Krug
Val Stein 
```

所有这些表都在 6NF 中。

当您正确执行时，除了自然键之外，使用代理键来扩充表不会改变正常形式。让我们用您的代理 ID 号替换“job_applications”中的自然键。进行替换将使您的表格看起来像这样。（实际上，您也会在其他表中做同样的事情。）

```
job_applications
--
client_id
job_id
candidate_id
primary key (client_id, job_id, candidate_id)
other columns go here... 
```

请注意，client_id 已经存在。如果没有其他列，则您至少仍处于 5NF 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:28:38.620

要回答您的问题，这取决于您的情况，特别是桌子的大小是否值得。这个过程称为非规范化。例如，您可以在这里获得信息： [http ://en.wikipedia.org/wiki/Denormalization](http://en.wikipedia.org/wiki/Denormalization)

# iis - 使用 IIS 8.0 安装 Umbraco

> ID：14319189
> 
> 赞同：0
> 
> 时间：2013-01-14T13:21:08.807
> 
> 标签：iis, umbraco, iis-8

我正在使用 Web Platform Installer 安装 Umbraco 4.11，我想在 Windows 8 中使用 IIS 8.0。我进行了基本安装，一切顺利，但是当我打开网站时，它会循环重定向我，直到我得到一个404.15 错误。查询字符串太长。不太确定发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:21:56.790

你检查过IIS中的权限吗？

我总是建议手动安装 Umbraco 而不是使用 WPI - 我认为它更容易和更快

# javascript - 当前位置（currentposition）功能不起作用

> ID：14319193
> 
> 赞同：0
> 
> 时间：2013-01-14T13:21:20.007
> 
> 标签：javascript, jquery, google-maps-api-3, geolocation

当前位置功能不起作用，`Alert2`已显示，即使那样地图也没有出现。请帮帮我，我无法找到解决方案

```
if (navigator.geolocation){

    navigator.geolocation.getCurrentPosition(function (position) {
            // Set the user's position
            userLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            alert("currentloc1 : "+ userLocation);
            mapObject.setCenter(userLocation);
            setUserMarker();
            // Get the user's address if possible
            geoCodeObject.geocode({ 'latLng': userLocation }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {

                    $("#location_details").html(results[0].formatted_address);
                    userAddress = results[0].formatted_address;
                }
                else {

                        var errormessage="There were no hospitals found at the location. Please provide another location.";
                        alertBox(errormessage);
                        $("body").css("cursor", "default");

                }
            });
        },
        function () {
            userLocation = locationPune;
            alert("currentloc2 : "+ userLocation);
        },
        {
            timeout: 5000
        }

    );
}else{

    userLocation = locationPune;
   alert("currentloc3 : "+ userLocation);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:41:28.607

目前您有 5 秒的超时时间。多尝试一点：

```
{
    timeout: 15000
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:47:51.630

你知道这些论点是什么吗？

```
getCurrentPosition(showLocation, ErrorHandler, options); 
```

只有在出现错误情况时才会调用第二个警报。

# c - 在没有继续和中断的情况下重写c表达式

> ID：14319198
> 
> 赞同：-2
> 
> 时间：2013-01-14T13:21:36.643
> 
> 标签：c, break, continue

在学校练习（在纸上）我有这个问题：

5) 不使用 continue 和 break 重写代码：

```
for (i = 0; i < N; i++) {
    scanf("give me an int %d", & a);
    if (a < 0) {
        continue;
    }
    if (a == 0) {
        break;
    }
    /* elaborate positive int */
} 
```

* * *

我在想这个：

```
for(i=0;i<N;i++){

 scanf("give me an int %d",&a");

 if(a==0){return -1; //??i dont know how to exit}
 if(a<0){
  do{
        scanf("give me an int %d",&a");
        if(a==0){return -1; //??i dont know how to exit}
    }while(!(a<0))
 }
 /* elaborate positive int */
} 
```

但是，我实际上无法做到这一点..你能帮帮我吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:24:24.120

可能不是您的老师想要的，但这实际上是最简单的方法：

```
a = INT_MAX;
for(i = 0; i < N && a != 0; i++) {
    scanf("give me an int %d", &a);
    if(a > 0) {
        /* elaborate positive int */
    }
} 
```

不使用的原因`return`是您只想退出/重新启动循环。该函数*可能*包含更多不应跳过的内容。

而且那个`scanf`电话看起来不对..你真的想每次都输入“给我一个int ..”吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:24:31.793

```
for(i = 0; i < N && a != 0; i++)
{
    scanf("give me an int %d",&a");
    if(a>0)
    { /*do stuff*/ }
}
if(a==0) i--; //As noted by Daniel Fischer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:24:16.270

不会给你完整的代码，但是：

*   请记住，您可以在`for`语句的子句中添加条件。（提示：将中断条件移到那里以终止循环）
*   在你的例子中`continue`实际上做了什么吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:40:11.067

在这种特定情况下，不需要做太多事情。由于`a < 0`和`a == 0`是互斥条件，因此可以使用 if-else-if 语句，如下所示：

```
for (i = 0; i < N; i++)
{
    scanf("give me and int %d", &a);

    if (a < 0)
        // Do something or nothing here, but this skips the rest of the loop
        // body just like continue would.
    else if (a == 0)
        i = N; // This satisfies the loop condition, so it won't loop again
               // just like break would.
} 
```

这不是一个通用的解决方案，但它应该在这种情况下为您提供正确的行为。

# model-view-controller - 从模型到视图的 Joomla 组件数据

> ID：14319201
> 
> 赞同：0
> 
> 时间：2013-01-14T13:21:56.003
> 
> 标签：model-view-controller, view, joomla, model, components

我第一次在 Joomla 中创建一个组件，现在我很难将模型中的数据调用到我的视图中。我这样做如下：

//在我的模型中

```
 class InternetModelDefault extends JModel {

      public function test(){
        $this->test='test';
      }

    } 
```

//在我看来

```
class InternetViewInternet extends JView {
        $model = $this->getModel();
        $test = $model->test();
        var_dump($test);

      // Display the view
        parent::display($tpl);
    }

} 
```

输出给出以下错误：

> 致命错误：在第 66 行的 /var/websites/www.infrait.nl/content/components/com_internet/views/internet/view.html.php 中的非对象上调用成员函数 test()

哪里出错了？请一些帮助..

***当前地图结构：http://imgdump.nl/hosted/ad9e57de83060b3240f8fc6bba99237b.png***
[由于](http://imgdump.nl/hosted/ad9e57de83060b3240f8fc6bba99237b.png)
我是新手，我只能与您分享此直接链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:28:47.390

您收到错误是因为对象未正确启动。将类名更改为`InternetModelInternet`. 模型文件名将是`internet.php`.

让我知道它是否不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:22:53.280

你的model.php像这样

```
jimport ('joomla.application.component.modellist');
class InternetModelInternet extends JModelList
{
  public function test(){
        $this->test='test';
      }

    } 
```

并在 view.html.php 中获取模型

```
 jimport ('joomla.application.component.view');
    class InternetViewInternet extends JView
    {
    public function display ($tpl = null)
        {

            $model = &$this->getModel ();
             $test = $model->test();
                    var_dump($test);
                 // Display the view
                parent::display($tpl);
        }
} 
```

# php - 在 sql 查询中使用 LIMIT 和 ORDER BY 和 LEFT JOIN

> ID：14319204
> 
> 赞同：2
> 
> 时间：2013-01-14T13:22:03.383
> 
> 标签：php, mysql, sql, join, sql-order-by

我有点陌生`JOIN`，我发现很难理解如何使用和查询一张表，`ORDER BY`并且`LIMIT`只`ORDER BY`在我`JOINED`认为的“正确”表上使用？所以基本上，如果我要单独查询这两个表，我会使用这些查询：

```
SELECT * FROM posts ORDER BY dateSubmitted DESC LIMIT ?,5 
```

“？” 代表我`bind_param()`，因为我正在创建一个分页。现在对于我的“正确”第二张桌子：

```
SELECT * FROM postcomments WHERE postcomments.postID = posts.ID ORDER BY dateSubmitted DESC 
```

据我的理解，我想将两个表“链接”在一起，`LEFT JOIN`以便我将从“左”表（作为帖子）接收所有数据。

```
SELECT * FROM posts LEFT JOIN postcomments ON postcomments.postID = posts.ID 
```

现在我可以做到这一点，但我不确定除了我的`ORDER BY`和`LIMIT`两张桌子我会在哪里？我见过几种不同的方式，我认为这让我感到困惑，就像我见过这样的：

```
SELECT p.* FROM posts p ORDER BY posts.dateSubmitted DESC LIMIT ?,5 
LEFT JOIN (SELECT * FROM postcomments 
WHERE postscomments.postID = p.ID ORDER BY postcomments.dateSubmitted); 
```

但我真的不确定如何构建我的查询：S任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:24:06.273

最后会是这样：

```
Select * from
(SELECT * FROM posts  ORDER BY dateSubmitted DESC LIMIT ?,5) as tempPost
LEFT JOIN postcomments on (postscomments.postID = tempPost.ID) 
```

# ember.js - 错误尝试处理事件`loadedData`：deleteRecord 后对象未更新

> ID：14319205
> 
> 赞同：0
> 
> 时间：2013-01-14T13:22:06.543
> 
> 标签：ember.js, ember-data

使用 ember-js 和 ember-data 的最新版本，删除记录时出现问题。

**我的路线：**

```
App.ListContactsRoute = Em.Route.extend({
    model: function() {
        App.Contact.find();
    },
    setupController: function(controller, model) {
        controller.set('contacts', model);
    }
});

App.EditContactRoute = Em.Route.extend({
    setupController: function(controller, model) {
        this.transaction = controller.get('store').transaction();
        this.transaction.add(model);
        controller.set('content', model);
        controller.set('organizations', App.Organization.find());
    },
    events: {
        delete: function(contact) {
            contact.deleteRecord();
            this.transaction.commit();
            this.transaction = null;
            this.transitionTo("listContacts");
        },
        save: function(contact) {
            this.transaction.commit();
            this.transaction = null;
            this.transitionTo("editContact", contact);
        }
    }
}); 
```

删除联系人时，我将返回**ListContactsRou​​te**，因此调用 API 会返回联系人列表。此时，已删除的联系人尚未在服务器上删除。

结果，删除的联系人仍然存在于我的联系人列表模板中。这是错误：

```
"Uncaught Error: Attempted to handle event `loadedData` on <App.Contact:ember469:null> while in state rootState.deleted.inFlight. Called with undefined" 
```

我做错了什么还是有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:41:18.993

记录不再是 的一部分`this.transaction`，一旦您提交事务，记录就会移动到存储默认事务。为了反映您的删除操作，您需要提交存储。

```
contact.deleteRecord()
App.store.commit(); 
```

# .net - WPF different Window Icon & Taskbar Icon

> ID：14319206
> 
> 赞同：2
> 
> 时间：2013-01-14T13:22:06.787
> 
> 标签：.net, wpf, taskbar

是否可以在 WPF 中为窗口和任务栏设置不同的图标。在我的特殊情况下，我想为窗口设置一个透明的图标，为任务栏设置一个“Metro”样式（带有彩色背景）。

设置不同的应用程序图标不起作用，任务栏总是显示窗口图标。

任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:35:58.637

由于 Window 图标始终为 16px，并且任务栏中的 Icon 较大（我不知道使用哪种尺寸，但我猜是 32x32），您可以制作一个具有不同内容的不同尺寸的图标。

标准图标通常为 64x64 或 48x48，其余尺寸按比例缩小。如果您改为创建一个 48x48 图标，带有彩色背景，一个 16x16 图标没有背景，您的应用程序将使用 16x 图标作为窗口图标，使用 48x 图标作为任务栏。

# types - 使用 F# 可区分联合替代作为参数类型

> ID：14319207
> 
> 赞同：6
> 
> 时间：2013-01-14T13:22:16.887
> 
> 标签：types, f#

我正在尝试使用可区分联合的特定成员作为参数类型。例如：

```
type SomeUnion =
   | A of int * int
   | B of string

type SomeType(A(i, j)) =
    member this.I = i
    member this.J = j

let a = A(10, 20)
let instance = SomeType(a) 
```

但这是非法语法，并在 SomeType 的参数列表中出现“类型定义中的意外符号 '('”。这是有效的语法：

```
let doSomethingWithA (A(i, j)) = i + j 
```

但是类型签名`SomeUnion -> int`不是`A -> int`，它抱怨不完整的模式匹配（给定签名可以理解）。

那么这可能吗？我相信 F# 联合成员被编译为 CLR 类，所以理论上似乎可行，但实际上是否可行（即不使用反射之类的东西）？否则我想你必须做更冗长的手动 OOP 方式，并且不能保证完全匹配。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T15:49:53.373

我同意您无法对构造函数参数进行模式匹配是令人惊讶的。它*确实*适用于普通会员。

也许您可以在构造函数中进行显式匹配，以在值错误时获取运行时错误：

```
type SomeType(a) =
    let i, j = match a with | A(k, l) -> k, l
    member this.I = i
    member this.J = j 
```

但除此之外，人们必须明白那**不是**`A`一种类型。因此，类型不符合您的预期也就不足为奇了。而且您将不得不忍受不完整的模式匹配警告。**`doSomethingWithA`**

 *** * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T21:24:06.730

正如 wmeyer 所指出的，DU 的“A”情况根本不是一种类型，而只是联合类型的一个组成部分。

如果您真的想自己重用其中一个联合案例，我看不出有任何替代方法可以使其成为显式独立类型。

选项一是只使用类型别名：

```
type TypeA = int * int

type SomeUnion =
    | A of TypeA 
    | B of string

type SomeType(a:TypeA) =
    let (i,j) = a
    member this.I = i
    member this.J = j

let a = (10, 20)
let instance = SomeType(a) 
```

为了清楚起见，我在构造函数中添加了`TypeA`注释。

第二种选择是将其包装在一个单箱 DU 中。

```
type TypeA = TA of int * int

type SomeUnion =
    | A of TypeA 
    | B of string

type SomeType(a:TypeA) =
    let (TA(i,j)) = a  
    member this.I = i
    member this.J = j

let a = TA (10, 20)
let instance = SomeType(a) 
```

（请注意，匹配`let (TA(i,j)) = a`必须有额外的括号，以免与函数混淆。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-14T13:53:49.250

我的 F# 有点生锈，但也许你可以做这样的事情（在单声道上用 f#2 测试）？

```
type SomeUnion =
   | A of int * int
   | B of string

type SomeType(i:int, j:int) =
    member this.I = i
    member this.J = j

let createSomeType(SomeUnion.A(i,j)) = new SomeType(i,j)
let a = A(10, 20)
let instance = createSomeType(a) 
```**

# android - 采样率不起作用

> ID：14319209
> 
> 赞同：0
> 
> 时间：2013-01-14T13:22:21.747
> 
> 标签：android, sensors, sample-rate

我有这条线

```
manager.registerListener(sensorListener, manager.getDefaultSensor(Sensor.TYPE_PRESSURE), logTime); 
```

其中 logTime = 300000000 微秒 = 5 分钟。

我正在尝试每 5 分钟记录一次，但通过此设置，它每秒左右记录一次。你知道什么可能是错的或如何解决这个问题吗？

我的经理是 SensorManager。

BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:39:45.683

为您的任务设置更好的设置是每 5 分钟安排一次闹钟唤醒您的应用程序。然后您可以注册监听器并在收到一个样本后取消注册它。

# ios - Cocos2d 2.0和CCSpriteBatchNode：CCRepeatForever开始第二个动画循环时CCAnimation崩溃APP

> ID：14319211
> 
> 赞同：0
> 
> 时间：2013-01-14T13:22:31.343
> 
> 标签：ios, animation, cocos2d-iphone, textures

编辑 4：我在 CCSpriteFrameCache spriteFrameByName 方法中添加了一个断点，并且无法跨过以下步骤（我很清楚 spriteFrames 以某种方式从 CCSpriteFrameCache 中删除）：

![无法跨过的台阶](../Images/fe30a963d70a6f60d7faa8916b0d57d8.png)

编辑 3：在投票结束问题之前，请使用**Cocos2d 2.0 和附加的文件和 plist 文件****尝试下面的代码**（EDIT2） 。

 **编辑 2：我创建了一个全新的 GameScene 测试类，所以你们都可以尝试这个问题。一旦动画开始重复，它就会崩溃。我也更新了标题。

```
//  GameScene2.h
//
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface GameScene2 : CCScene {

}
@end

//  GameScene2.m
//
#import "GameScene2.h"

@implementation GameScene2
-(id)init {
    self = [super init];
    if (self != nil) {
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"artfile.plist"];
        CCSpriteBatchNode* batchNode = [CCSpriteBatchNode batchNodeWithFile:@"artfile.png"];
        [self addChild:batchNode];

        CCSprite * test = [CCSprite spriteWithSpriteFrameName:@"frame0.png"];
        test.anchorPoint = CGPointMake(0.5f, 0.5f);
        test.position = CGPointMake(160.0f, 160.0f);
        [batchNode addChild:test z:1];

        NSMutableArray* frames = [[NSMutableArray alloc]initWithCapacity:2];
        CCSpriteFrame* frame = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"frame0.png"];
        [frames addObject:frame];
        CCSpriteFrame* frame2  = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"frame1.png"];
        [frames addObject:frame2];

        CCAnimation* anim = [CCAnimation animationWithSpriteFrames:frames delay:0.3f];
        [[CCAnimationCache sharedAnimationCache] addAnimation:anim name:@"test"];
        CCAnimate * animate = [CCAnimate actionWithAnimation:anim];
        CCRepeatForever * repeat = [CCRepeatForever actionWithAction:animate];
        //CCSequence * seq = [CCSequence actions:anim, nil];

        [test runAction:repeat];
    }
    return self;
}
@end 
```

artfile.png 如下所示： ![艺术文件.png](../Images/123fb8c10701654cb09fed3aa672fca8.png)

plist文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>frames</key>
    <dict>

        <key>frame0.png</key>
        <dict>
            <key>aliases</key>
            <array>

            </array>
            <key>spriteColorRect</key>
            <string>{{3, 40}, {76, 28}}</string>
            <key>spriteOffset</key>
            <string>{0, 0}</string>
            <key>spriteSize</key>
            <string>{150, 94}</string>
            <key>spriteSourceSize</key>
            <string>{150, 94}</string>
            <key>spriteTrimmed</key>
            <false/>
            <key>textureRect</key>
            <string>{{0, 96}, {150, 94}}</string>
            <key>textureRotated</key>
            <false/>
        </dict>

        <key>frame1.png</key>
        <dict>
            <key>aliases</key>
            <array>

            </array>
            <key>spriteColorRect</key>
            <string>{{10, 33}, {98, 32}}</string>
            <key>spriteOffset</key>
            <string>{0, 0}</string>
            <key>spriteSize</key>
            <string>{150, 94}</string>
            <key>spriteSourceSize</key>
            <string>{150, 94}</string>
            <key>spriteTrimmed</key>
            <false/>
            <key>textureRect</key>
            <string>{{0, 192}, {150, 94}}</string>
            <key>textureRotated</key>
            <false/>
        </dict>

        <key>frame2.png</key>
        <dict>
            <key>aliases</key>
            <array>

            </array>
            <key>spriteColorRect</key>
            <string>{{4, 17}, {146, 48}}</string>
            <key>spriteOffset</key>
            <string>{0, 0}</string>
            <key>spriteSize</key>
            <string>{150, 94}</string>
            <key>spriteSourceSize</key>
            <string>{150, 94}</string>
            <key>spriteTrimmed</key>
            <false/>
            <key>textureRect</key>
            <string>{{0, 0}, {150, 94}}</string>
            <key>textureRotated</key>
            <false/>
        </dict>

    </dict>
    <key>metadata</key>
    <dict>
        <key>version</key>
        <string>1.5.2</string>
        <key>format</key>
        <integer>3</integer>
        <key>size</key>
        <string>{1024, 1024}</string>
        <key>name</key>
        <string>artfile</string>
        <key>premultipliedAlpha</key>
        <false/>
        <key>target</key>
        <dict>
            <key>name</key>
            <string>default</string>
            <key>textureFileName</key>
            <string>artfile_default</string>
            <key>textureFileExtension</key>
            <string>.png</string>
            <key>coordinatesFileName</key>
            <string>artfile_default</string>
            <key>coordinatesFileExtension</key>
            <string>.plist</string>
            <key>premultipliedAlpha</key>
            <false/>
        </dict>
    </dict>
</dict>
</plist> 
```

## EDIT2结束：

原始问题：

我得到：

**-[CCSprite setTexture:], /Users/.../libs/cocos2d/CCSprite.m:934 中的断言失败**

它肯定与batchNode有关，因为没有它它曾经可以工作......

我知道动画的精灵帧应该在同一个精灵表中，就是这样。我不知道如何解决这个问题，它必须与使用批处理节点有关。

```
//
//  Navigator.h
@interface Navigator : CCLayer {

}
//Batch Nodes
@property(readwrite, nonatomic) CCSpriteBatchNode* batchNode;

//  Navigator.m
@implementation Navigator
@synthesize batchNode;

+(id) scene {
    CCScene *scene = [CCScene node];
    Navigator *layer = [Navigator node];//??
    [scene addChild:layer];
    return scene;
}

-(void) loadStuff{
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"art1-hd.plist"];
    batchNode = [CCSpriteBatchNode batchNodeWithFile:@"art1-hd.png"];
    [self addChild:batchNode];

    CCSprite * test = [CCSprite spriteWithSpriteFrameName:@"emptyCircle0.png"];
    test.anchorPoint = CGPointMake(0.5f, 0.5f);
    test.position = CGPointMake(160.0f, 160.0f);
    [batchNode addChild:test z:1];

    NSMutableArray* frames = [[NSMutableArray alloc]initWithCapacity:2];
    CCSpriteFrame* frame = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"emptyCircle0.png"];
    [frames addObject:frame];
    CCSpriteFrame* frame2  = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"emptyCircle1.png"];
    [frames addObject:frame2];

    CCAnimation* anim = [CCAnimation animationWithSpriteFrames:frames delay:0.3f];
    //[[CCAnimationCache sharedAnimationCache] addAnimation:anim name:@"test"];
    CCAnimate * animate = [CCAnimate actionWithAnimation:anim];
    CCRepeatForever * repeat = [CCRepeatForever actionWithAction:animate];
    //CCSequence * seq = [CCSequence actions:anim, nil];

    [test runAction:repeat];
}

-(id)init
{
    CCLOG(@"Navigator init");
    if((self=[super init])){
        CCLOG(@"%@: %@", NSStringFromSelector(_cmd), self);
        [self loadStuff];
        }
    return self;
} 
```

**编辑：我检查了 CCSprite setTexture 的源代码，这就是我所看到的。然而，控制台日志确实只说 NSAssert 而没有给出问题所在的日志消息。添加断点似乎使第一个 NSAssert 失败，但我不确定 100%，因为应用程序会立即转到此图像：**

![图片](../Images/340a21f5ec98e857a52d86770c4fd96f.png)

```
-(void) setTexture:(CCTexture2D*)texture
{
    // If batchnode, then texture id should be the same
    NSAssert( !batchNode_ || texture.name == batchNode_.texture.name , @"CCSprite: Batched sprites should use the same texture as the batchnode");  

    // accept texture==nil as argument
    NSAssert( !texture || [texture isKindOfClass:[CCTexture2D class]], @"setTexture expects a CCTexture2D. Invalid argument");

    if( ! batchNode_ && texture_ != texture ) {
        [texture_ release];
        texture_ = [texture retain];

        [self updateBlendFunc];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:55:01.983

您的资源中是否只有一个带有 -hd 后缀的 .plist 和 .png 文件？您确定所有框架名称都在您的 plist 中吗？您确定您将资源正确添加到项目中吗？

此外，通常您可以将帧添加到动画中，如下所示：

```
 animFrames = [[NSMutableArray alloc] init];
         for(int i =1; i<7; i++){

              [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"anim-00%d.tif", i]]];
        }
         CCAnimation *animAnimation = [CCAnimation animationWithSpriteFrames:animFrames delay:0.04f]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:47:29.100

我找到了发生这种情况的原因......我从前一个场景中调用了 [self startGame] 方法，然后调用了清理方法，还调用了我从纹理缓存中删除精灵的那段代码。

愚蠢的我，我没有正确考虑这一点。对象导航器场景被创建并加载纹理，但与此同时（在动画实际开始之前）之前的场景清理调用执行 **[CCSpriteFrameCache purgeSharedSpriteFrameCache];** 称呼。

愚蠢的我！

```
-(void) startGame
{
    [[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[Navigator scene] withColor:ccc3(255, 255, 255)]];
}

-(void) cleanup
{
//    [[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFrames];
    [super cleanup];

    [CCTextureCache purgeSharedTextureCache];
    [CCSpriteFrameCache purgeSharedSpriteFrameCache];
    [CCAnimationCache purgeSharedAnimationCache];

    //Remove music
} 
```**

# java - 为什么 main 方法需要是静态的？

> ID：14319218
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:22:53.203
> 
> 标签：java, main

> **可能重复：**
> [为什么 Java 主方法是静态的？](https://stackoverflow.com/questions/146576/why-is-the-java-main-method-static)

JAVA还支持反射JAVA为什么需要main方法是静态的？

使用反射我们可以创建类的对象，甚至可以调用该类的方法，所以为什么 JAVA 需要 main 方法是静态的。

感谢您对此的评论。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T13:24:43.287

唯一可以可靠给出的答案是“[因为 JLS 这么说](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1)”。引用：

> 该方法`main`必须声明为`public`、`static`和`void`。它必须指定一个声明类型为数组的形式参数（第 8.4.1 节）`String`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:27:31.373

好吧，反射是从 Java 1.1 开始引入的，所以最初的 Java 1.0 标准不能基于它们。他们可能有一些类似反射的代码只是为了引导，并且不知道在 Java 仍被称为 Oak 的时候它有多完整。

此外，这可能是从 C++ 继承的，然后是从 C 进一步继承的。虽然 C++ 也可以先构造一个应用程序对象并调用`virtual main()`它，但这可能看起来太复杂了，选择使用`main`C 开发人员熟悉的简单的 .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T13:24:45.330

因为当您运行程序时，运行时环境会查找带有签名的方法`public static void main (String[] args)`。即使支持反射，运行时仍然需要先调用一个类的`main`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:32:31.580

**Public**：为了让 JVM 能够访问 main 方法，它必须是公共的。

**静态**：因为它非常复杂，或者可能无法预见托管 main 方法的类的实例化标准，所以它被强制为静态，使 JVM 无需从类中创建对象即可调用它。

毕竟，在定义语言时需要一个明确的约定，如果没有这样的强制约束，JVM 设计人员可能会遇到麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T14:03:41.663

`public static void main(String []args)`
1.中每个关键字的解释`public`：
一定是`public`因为它不是你定义方法`JVM`的一部分。所以，它不应该是 2 .：不会构造任何对象来调用。并且 main 不依赖于. 3\. :不会返回任何有用的信息给. 程序执行从开始，如果正常退出，则以.In 中的最后一条语句结束，在批次之间发生。 4\. : 这只是一个专有名词，用来表示方法的重要性。 5\. ：传递给main的args是一个或多个单词，它们可能是一个`class``main``private`
`static`
`JVM``main``class`
`void`
`main``JVM``main()``main`
`main`

`Array of Strings``int`, `float`,`char`或`String`. 上面的一切都可以表示为`Strings`。

> 希望能帮助到你

# php - 在 PHP 和 JavaScript 中获取 Hashtag 的值

> ID：14319220
> 
> 赞同：0
> 
> 时间：2013-01-14T13:22:56.940
> 
> 标签：php, javascript, url

> **可能重复：**
> [PHP 可以读取 URL 的哈希部分吗？](https://stackoverflow.com/questions/940905/can-php-read-the-hash-portion-of-the-url)

我有一个画廊网站。
实际选择的专辑在 URL 中标有井号标签。
以专辑 HDR 为例：

> `http://www.example.com/gallery#HDR`

现在我想用`parse_url`. 但是我需要一个带有标签的字符串中的 URL。所以它不适用于`$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']`...

我知道到达 URL 的唯一方法是使用 JavaScript。
但是如何在 PHP 变量中转换 JavaScript 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:27:25.473

您不能将 javascript 变量转换为 php，因为 php 是服务器端的，而 js 是客户端的。

$_SERVER 中没有变量包含“#xxx”部分。

检查：[我可以在我的服务器端应用程序（PHP、Ruby、Python 等）上读取 URL 的哈希部分吗？](https://stackoverflow.com/questions/940905/can-php-read-the-hash-portion-of-the-url)

# upgrade - 升级到更新版本的 Cocos2dx

> ID：14319226
> 
> 赞同：3
> 
> 时间：2013-01-14T13:23:32.373
> 
> 标签：upgrade, cocos2d-x

到目前为止，我一直在运行 cocos2dx 版本 1.0.1-x-0.11.0 并且有一个小项目运行良好。我需要升级到最新版本，cocos2d-2.0-x-2.0.4。这样做的正确方法是什么？我不想 A. 搞砸我的项目。B. 最终得到 2 个不同版本的 cocos2dx

我可以下载并用新的 cocos2dx 文件夹替换旧的文件夹吗？任何帮助表示赞赏。

谢谢。

编辑：我实际上下载了最新版本并尝试单独设置。我运行了 build_win32.bat 并运行了一段时间后打开了测试应用程序。然后我打开了 vs2010.sln 并尝试添加一个新项目，但它抛出了包含错误。

```
Error   3   error C1083: Cannot open include file: 'CCApplication.h': No such file or directory c:\cocos2d-2.0-x-2.0.4\chilra\classes\appdelegate.h 4   1   Chilra.win32
Error   2   error C1083: Cannot open include file: 'CCPlatformDefine.h': No such file or directory  c:\cocos2d-2.0-x-2.0.4\cocos2dx\platform\ccplatformmacros.h 32  1   Chilra.win32
Error   1   error C1083: Cannot open include file: 'CCStdC.h': No such file or directory    c:\cocos2d-2.0-x-2.0.4\chilra\win32\main.h  11  1   Chilra.win32 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:43:29.653

1.  X:\CC2Dx （我的源文件所在的位置，将整个源文件解压缩到此文件夹中）

2.  打开 cocs2d-Win32.sln。在调试模式和发布模式下运行它，你应该在你的 cocos2d-x 中找到 Debug.win32、Release.win32 文件夹（现在你可以在这里测试，通过右键单击文件夹 TestCpp 将 TestCpp 设置为 startupProject ..然后运行）

3.  现在运行 build_win32.bat （它会将一些文件复制到您的 Debug.win32 和 Release.win32

这是它创建解决方案 Debug.win32 和 Release.win32 的地方。

1.  现在运行 build_win32.bat 后，您可以使用 VS 2008 模板创建新项目，因为 Vs2012 有一些脚本错误我也有解决方案但是我建议您复制 HelloWorldProject 并将其替换为您的文件

2.  永远记住，每当您遇到一些 cocos2d 文件错误时，就像您在上述过程中遇到的那样，只需从 Debug.win32 和 Release.win32 复制那些 .lib 文件和 .dll 文件，然后运行......

这工作正常

如有任何疑问，请随时询问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:41:33.370

我已将 cocos2dx 添加到上游跟踪器进行分析，似乎在 0.11.0 和 2.0.4 之间进行了一些 API/ABI 更改：http: [//upstream.rosalinux.ru/versions/cocos2d-x.html](http://upstream.rosalinux.ru/versions/cocos2d-x.html)

[![在此处输入图像描述](../Images/bb780842c17a2a007145bc917a489d45.png)](https://i.stack.imgur.com/tiGP4.jpg)

您可以使用[japi-compliance-checker](https://github.com/lvc/japi-compliance-checker)工具生成此类报告。

# c# - 如何定义匿名列表的返回类型

> ID：14319227
> 
> 赞同：0
> 
> 时间：2013-01-14T13:23:32.590
> 
> 标签：c#, list, class, types, return-value

我有以下方法：

```
public static object GetBarChart(int dataValue)
{
using (var myEntities = new i96X_dataEntities())
{
  var myValues = (from values in myEntities.PointValues
                  where values.PointID == dataValue
                  select new
                  {
                     values.DataTime,
                     values.DataValue
                  }).ToList();
  }
  if (myValues.Count() != 0)
  {
    return myValues;
  }
  return null;
} 
```

我只能将它作为一个对象返回，因为我不知道如何将它定义为它的类型。当我调试它告诉我返回类型是：

{System.Collections.Generic.List<<>f__AnonymousType2<System.DateTime,double>>}

但我不知道如何定义它。

我定义了一个类：

```
public class BarChart
{
  public DateTime Time { get; set; }
  public double Value { get; set; }
}
public class BarList
{
  public List<BarChart> BarL { get; set; } 
} 
```

我想这是正确的。但是如果我现在使用 BarList 作为我的返回类型，编译器会读取：

无法将表达式类型 'System.Collections.Generic.List<{DataTime:System.DateTime, DataValue:double}>' 转换为返回类型 BarList'

我认为答案只是定义 BarChart，然后返回 List<BarChart>。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:13:53.813

你有没有尝试过这样的事情？

```
public static IEnumerable<Tuple<DateTime, DataValue>>  GetBarChart(int dataValue)
  {
  return
    (
    from values in new i96X_dataEntities()
    where values.PointID == dataValue
    select new Tuple<DateTime, DataValue>(values.DataTime, values.DataValue)
    );
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:36:22.837

该函数返回匿名类型的集合。匿名类型在 LINQ 表达式中定义。

如果您知道数据库中 PointValues 集合的类型，则可以直接返回该类型。

如果您有一个名为例如**Point**的类，则将 LINQ 表达式中的匿名构造函数更改为具体的构造函数：

```
select new Point { Time = values.DataTime, Value = values.DataValue } 
```

在这种情况下，您的方法将返回一个点列表。**IList<<点>>**

# android - android确定启动哪个Activity

> ID：14319228
> 
> 赞同：0
> 
> 时间：2013-01-14T13:23:32.667
> 
> 标签：android, android-activity

我有多个活动，但根据用户启动应用程序的一天（或晚上）的时间，应该只启动其中一个。有没有办法在应用启动后立即检查时间并启动适当的活动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:27:42.167

您可能必须启动一个默认活动，使用`android:theme="@android:style/Theme.NoDisplay"`该活动将启动正确的活动。然后打电话`finish()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:38:50.443

让启动 Activity 执行以下操作：

```
public static enum Time {MORNING,OTHER} //--define more times

@Override
public void onCreate(Bundle savedInstanceState){

    switch (decideTime()){
        case MORNING:
            startActivity(new Intent(com.some.Activity1.class));
            break;
        case OTHER:
            startActivity(new Intent(com.some.Activity2.class));
            break;
        //--add more cases--
    }
    finish();

}

private Time decideTime(){
    Calendar c = Calendar.getInstance();

    int hour = c.get(Calendar.HOUR_OF_DAY);

    if(hour >= 6 && hour < 12){
        return Time.MORNING;
    }else {
           return Time.OTHER;
    }
    //-- add more checks--
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:27:54.100

使用功能 NO_HISTORY、类别启动器活动创建新活动。让我们决定在 OnCreate (startActivity) 中运行哪个活动

# sql - Postgres/SQL 加入和更新

> ID：14319231
> 
> 赞同：1
> 
> 时间：2013-01-14T13:23:41.420
> 
> 标签：sql, postgresql, join

连接是我永远无法理解的一件事，即使用哪种类型以及它们实际上是如何工作的。我需要写一个查询，我知道我需要一个连接。

数据库是postgres。

基本表设置是这样的（部分细节已编辑）

```
rates (
rates_id Primary Key, Auto Increment
state String, can either be 'current' or 'history'
)

rates_records (
rates_records_id Primary key, auto increment
rates_id = integer
column_1,
column_2
) 
```

每个`rates_records`条目都设置为表`rates_id`中存在的值`rates`

我想更新每一`rates_records`行并修改关联`column_1`的数据`column_2``rates` `state = 'current'`

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:31:18.343

Stefan 答案的替代方案。

```
update rates_records 
   set column_1 = 'foo', 
       column_2 = 'bar'
from rates 
  where rates.rates_id = rates_records.rates_id
    and rates.state = 'current'; 
```

更多详细信息和示例在手册中：[http ://www.postgresql.org/docs/current/static/sql-update.html](http://www.postgresql.org/docs/current/static/sql-update.html)

您喜欢哪种格式基本上是一个品味问题。我不相信一个比另一个更好或更快（Stefan 的答案是标准 SQL，因此它可以跨 DBMS 移植）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:28:37.660

```
update rates_records set column_1 = 'this', column_2 = 'that'
where rates_records_id 
in (select rates_records_id from rates_records rr 
join rates r on rr.rates_id = r.rates_id where state = 'current') 
```

# java - 从枚举值中获取枚举名称

> ID：14319232
> 
> 赞同：47
> 
> 时间：2013-01-14T13:23:43.837
> 
> 标签：java, enums

`enum`我已经阅读了很多关于如何使用 java 从其值中获取相应名称的内容，但似乎没有一个示例对我有用！怎么了？

```
public class Extensions {

    public enum RelationActiveEnum
    {
        Invited(0),
        Active(1),
        Suspended(2);

        private final int value;

        private RelationActiveEnum(final int value) {
            this.value = value;
        }
    } 
```

}

在我使用的另一堂课中：

```
 int dbValue = supp.ACTIVE;
        Extensions.RelationActiveEnum enumValue(dbValue);
        String stringName = enumValue.toString(); //Visible
        // OR
        int dbValuee = supp.ACTIVE;
        String stringValue = Enum.GetName(typeof(RelationActiveEnum), dbValue); 
```

我应该工作，对吧？但它没有！！！！它告诉我不能将 dbValue 强制转换为 RelationActiveEnum ...

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-14T13:33:33.260

假设我们有：

```
public enum MyEnum {
  Test1, Test2, Test3
} 
```

要获取枚举变量的名称，请使用[`name()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#name())：

```
MyEnum e = MyEnum.Test1;
String name = e.name(); // Returns "Test1" 
```

要从（字符串）名称中获取枚举，请使用[`valueOf()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#valueOf(java.lang.Class,%20java.lang.String))：

```
String name = "Test1";
MyEnum e = Enum.valueOf(MyEnum.class, name); 
```

如果您需要`integer`值来匹配枚举字段，请扩展枚举类：

```
public enum MyEnum {
  Test1(1), Test2(2), Test3(3);

  public final int value;

  MyEnum(final int value) {
     this.value = value;
  }
} 
```

现在您可以使用：

```
MyEnum e = MyEnum.Test1;
int value = e.value; // = 1 
```

并使用整数值查找枚举：

```
MyEnum getValue(int value) {
  for(MyEnum e: MyEunm.values()) {
    if(e.value == value) {
      return e;
    }
  }
  return null;// not found
} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-01-14T13:41:10.723

由于您的“价值”也恰好与序数匹配，您可以这样做：

```
public enum RelationActiveEnum {
    Invited,
    Active,
    Suspended;

    private final int value;

    private RelationActiveEnum() {
        this.value = ordinal();
    }
} 
```

并从值中获取枚举：

```
int value = 1;
RelationActiveEnum enumInstance = RelationActiveEnum.values()[value]; 
```

我想一个静态方法将是一个很好的地方：

```
public enum RelationActiveEnum {
     public static RelationActiveEnum fromValue(int value) 
             throws IllegalArgumentException {
         try {
              return RelationActiveEnum.values()[value]
         } catch(ArrayIndexOutOfBoundsException e) {
              throw new IllegalArgumentException("Unknown enum value :"+ value);
         }
     }
} 
```

显然，如果您的“价值”与枚举序数不同，这一切都会崩溃。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-01-14T14:08:00.033

您可以创建一个查找方法。不是最有效的（取决于枚举的大小），但它可以工作。

```
public static String getNameByCode(int code){
  for(RelationActiveEnum e : RelationActiveEnum.values()){
    if(code == e.value) return e.name();
  }
  return null;
} 
```

并这样称呼它：

```
RelationActiveEnum.getNameByCode(3); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-14T13:30:34.390

你能做的是

```
RelationActiveEnum ae = Enum.valueOf(RelationActiveEnum.class,
                                     RelationActiveEnum.ACTIVE.name(); 
```

或者

```
RelationActiveEnum ae = RelationActiveEnum.valueOf(
                                     RelationActiveEnum.ACTIVE.name(); 
```

或者

```
// not recommended as the ordinal might not match the value
RelationActiveEnum ae = RelationActiveEnum.values()[
                                     RelationActiveEnum.ACTIVE.value]; 
```

如果您想通过枚举的字段进行查找，则需要构造一个集合，例如 List、数组或 Map。

```
public enum RelationActiveEnum {
    Invited(0),
    Active(1),
    Suspended(2);

    private final int code;

    private RelationActiveEnum(final int code) {
        this.code = code;
    }

    private static final Map<Integer, RelationActiveEnum> BY_CODE_MAP = new LinkedHashMap<>();
    static {
        for (RelationActiveEnum rae : RelationActiveEnum.values()) {
            BY_CODE_MAP.put(rae.code, rae);
        }
    }

    public static RelationActiveEnum forCode(int code) {
        return BY_CODE_MAP.get(code);
    }
} 
```

允许你写

```
String name = RelationActiveEnum.forCode(RelationActiveEnum.ACTIVE.code).name(); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-05-15T09:16:04.777

在我的情况下，值不是整数而是字符串。可以将 getNameByCode 方法添加到枚举中以获取字符串值的名称-

```
enum CODE {
    SUCCESS("SCS"), DELETE("DEL");

    private String status;

    /**
     * @return the status
     */
    public String getStatus() {
        return status;
    }

    /**
     * @param status
     *            the status to set
     */
    public void setStatus(String status) {
        this.status = status;
    }

    private CODE(String status) {
        this.status = status;
    }

    public static String getNameByCode(String code) {
        for (int i = 0; i < CODE.values().length; i++) {
            if (code.equals(CODE.values()[i].status))
                return CODE.values()[i].name();
        }
        return null;
    } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-19T15:12:26.517

如果您想要在运行时条件下更有效，您可以拥有一个映射，其中包含枚举的每个可能选择的值。但是在初始化JVM时它会更慢。

```
import java.util.HashMap;
import java.util.Map;

/**
 * Example of enum with a getter that need a value in parameter, and that return the Choice/Instance 
 * of the enum which has the same value.
 * The value of each choice can be random.
 */
public enum MyEnum {
    /** a random choice */
    Choice1(4),
    /** a nother one */
    Choice2(2),
    /** another one again */
    Choice3(9);
    /** a map that contains every choices of the enum ordered by their value. */
    private static final Map<Integer, MyEnum> MY_MAP = new HashMap<Integer, MyEnum>();
    static {
        // populating the map
        for (MyEnum myEnum : values()) {
            MY_MAP.put(myEnum.getValue(), myEnum);
        }
    }
    /** the value of the choice */
    private int value;

    /**
     * constructor
     * @param value the value
     */
    private MyEnum(int value) {
        this.value = value;
    }

    /**
     * getter of the value
     * @return int
     */
    public int getValue() {
        return value;
    }

    /**
     * Return one of the choice of the enum by its value.
     * May return null if there is no choice for this value.
     * @param value value
     * @return MyEnum
     */
    public static MyEnum getByValue(int value) {
        return MY_MAP.get(value);
    }

    /**
     * {@inheritDoc}
     * @see java.lang.Enum#toString()
     */
    public String toString() {
        return name() + "=" + value;
    }

    /**
     * Exemple of how to use this class.
     * @param args args
     */
    public static void main(String[] args) {
        MyEnum enum1 = MyEnum.Choice1;
        System.out.println("enum1==>" + String.valueOf(enum1));
        MyEnum enum2GotByValue = MyEnum.getByValue(enum1.getValue());
        System.out.println("enum2GotByValue==>" + String.valueOf(enum2GotByValue));
        MyEnum enum3Unknown = MyEnum.getByValue(4);
        System.out.println("enum3Unknown==>" + String.valueOf(enum3Unknown));
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-12-09T16:00:25.653

这是我的看法：

```
public enum LoginState { 
    LOGGED_IN(1), LOGGED_OUT(0), IN_TRANSACTION(-1);

    private int code;

    LoginState(int code) {
        this.code = code;
    }

    public int getCode() {
        return code;
    }

    public static LoginState getLoginStateFromCode(int code){
        for(LoginState e : LoginState.values()){
            if(code == e.code) return e;
        }
        return LoginState.LOGGED_OUT; //or null
    }
}; 
```

我已经将它与 Android 中的系统偏好设置一起使用，如下所示：

```
LoginState getLoginState(int i) {
    return LoginState.getLoginStateFromCode(
                prefs().getInt(SPK_IS_LOGIN, LoginState.LOGGED_OUT.getCode())
            );
}

public static void setLoginState(LoginState newLoginState) {
    editor().putInt(SPK_IS_LOGIN, newLoginState.getCode());
    editor().commit();
} 
```

在哪里`pref`和`editor`在哪里`SharedPreferences`和一个`SharedPreferences.Editor`

# dart - 大数字和精度损失

> ID：14319236
> 
> 赞同：3
> 
> 时间：2013-01-14T13:24:01.460
> 
> 标签：dart

我做这个操作，我想要没有指数的结果：

```
main(){
  var result = ((1.1+2)+3.14+4+(5+6+7)+(8+9+10)*4267387833344334647677634)/2*553344300034334349999000;
  print(result); // With exponent
  print(result.toInt()); // Full number ?
} 
```

它打印

```
3.18780189038289e+49
31878018903828901761984975061078744643351263313920 
```

但是`toInt()`结果是错误的，好的结果是 31878018903828899277492024491376690701584023926880 。它使用 groovy (web) 控制台检查它。我该怎么做才能获得我的 int 完整号码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:19:23.077

因为`result`有`double`文字，`result`类型是`double`.

在 Dart 中 a`double`是 a ：

> IEEE 754 标准规定的 64 位（双精度）浮点数

这就是你失去精确度的原因。

您可以使用以下代码查看精度损失：

```
final bignum = 31878018903828899277492024491376690701584023926880;
print(bignum);
// displays 31878018903828899277492024491376690701584023926880
print(bignum.toDouble().toInt());
// displays 31878018903828901761984975061078744643351263313920 
```

`31878018903828899277492024491376690701584023926880.0`例如，这种精度损失并不是 Dart 特有的，`31878018903828901761984975061078744643351263313920.0`在 Java 中也是如此。

[groovy web 控制台为您提供正确的结果，因为带有小数点的](http://groovy.codehaus.org/Groovy+Math)AFAICT groovy 文字默认实例化为 java.math.BigDecimal 。

最后还有[一个关于 Decimal 数据类型的未解决问题，](http://dartbug.com/681)您可以加注星标，在原生支持小数之前，您可以使用我的[decimal 包](http://pub.dartlang.org/packages/decimal)；

# wordpress - 侧边栏内容相对于页面其余部分的位置

> ID：14319240
> 
> 赞同：0
> 
> 时间：2013-01-14T13:24:09.283
> 
> 标签：wordpress, sidebar

在我网站的这个页面上：[http](http://www.herefordequestrian.co.uk/ask-the-expert/) ://www.herefordequestrian.co.uk/ask-the-expert/ 右侧边栏未按应位于页面的右上角（和在其他页面上一样） . 我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:39:33.370

使您的#container 宽度为 789 像素或更小。

# extjs - Sencha Charts 饼图标签旋转

> ID：14319241
> 
> 赞同：4
> 
> 时间：2013-01-14T13:24:11.323
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-charts, sencha-touch-2.1

我正在使用带有 Charts 1.1 的 Sencha Touch 2.1 来显示一些数据。

我有一个如下所示的饼图：

![饼图示例](../Images/89094c3dad76536af7f8fe20ca99927f.png)

我希望标签保持在现在的位置，但我希望它们是水平的（不旋转）。

```
extend: 'Ext.chart.PolarChart',
    requires: [
    'Ext.chart.axis.Numeric',
    'Ext.chart.axis.Category',
    'Ext.chart.series.Pie',
    'Charting.store.charts.perStore',
    'Ext.chart.interactions.Rotate'
],
config: {
    colors: ["#6295C7", "#CCCCC", "#FFFFF"],
    store: 'chrtProduct',
    // centered:true,
    // innerPadding:20,
    series: [{
        type: 'pie',
        labelField: 'verdeling',
        label:{
            /*display:'middle',
            orientation:'horizontal',*/
            field:'patVerdeling',
            font: '1em Trade Gothic LT Std Bold',
            contrast:true,
            disableCallout:true
        },
        xField: 'patVerdeling'
        //,rotation:90
    }] 
    //,interactions: ['rotate'] 
```

以下代码在未注释时似乎没有做任何事情。

```
display:'middle',
orientation:'horizontal', 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:57:31.493

好的，我不确定这是否是最好的方法，但它对我有用，所以在花一些时间研究 sencha 图表库之后，解决方案比我预期的要容易。

`PieSlice.js`只需在 `touch/src/chart/series/sprite/PieSlice.js`您的应用项目中注释此行：

```
labelCfg.rotationRads = midAngle + Math.atan2(surfaceMatrix.y(1, 0) - surfaceMatrix.y(0, 0), surfaceMatrix.x(1, 0) - surfaceMatrix.x(0, 0)); 
```

这条线作为旋转饼图标签的关键角色。

# session - 关于 Symfony2 会话

> ID：14319243
> 
> 赞同：0
> 
> 时间：2013-01-14T13:24:20.933
> 
> 标签：session, symfony

在 symfony2 中，每个用户创建的控制器都扩展了控制器类，如下所示，

```
class MyController extends Controller { 
```

因此与会话处理相关的功能可通过 $this 对象获得，但 Vendor 和 Core 中的控制器不扩展 Controller 类，因此不提供对会话相关功能的访问。那么有什么方法可以在不扩展 Controller 类的情况下使用这些功能。

目前我正在使用`$_SESSION[]`, 来设置和获取会话变量。

除了上面还有什么办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:32:41.020

Symfony2 为会话提供服务，这就是您要检索的内容。symfony2 中的所有服务都是使用服务容器检索的，这就是您所指的

`$this->get('session');`

要在您自己的控制器中正确使用服务容器，您可以...

1.  将您的控制器配置为服务（请参阅：[此处](http://symfony.com/doc/current/cookbook/controller/service.html)）
2.  扩展 Symfony2 堆栈提供的基本 Controller 类（使该`get()`方法可用于您的子 Controller）

第一个选项是正确的方法，您可以完全控制哪些服务被注入到各自的控制器中（请参阅[服务容器文档](http://symfony.com/doc/current/book/service_container.html)）

# visual-c++ - Cmake 无法为 Visual Studios 10 amd64 配置项目

> ID：14319247
> 
> 赞同：6
> 
> 时间：2013-01-14T13:24:27.973
> 
> 标签：visual-c++, cmake, point-cloud-library

我正在尝试让 CMAKE 为 x64 架构的 msvc 10 express edition 创建一个项目。我同时安装了 MSVC 2010 Express 和 Windows SDK 7.1。

如果我开始 CMake 通常我可以创建一个 32 位项目，但是它无法创建一个 64 位项目。我还尝试从 Windows SDK 命令提示符（cl cmd 映射到 x64 版本）中启动 CMAKE，但是它仍然失败并出现以下问题。

```
Found Windows SDK v7.1: C:\Program Files\Microsoft SDKs\Windows\v7.1\
Check for working C compiler using: Visual Studio 10 Win64
Check for working C compiler using: Visual Studio 10 Win64 -- broken
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:52 (MESSAGE):
  The C compiler "c:/Program Files (x86)/Microsoft Visual Studio
  10.0/VC/bin/amd64/cl.exe" is not able to compile a simple test program.

  It fails with the following output:

   Change Dir: C:/Users/Dan/Desktop/pclt/PCL/bin/CMakeFiles/CMakeTmp

  Run Build Command:C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe
  cmTryCompileExec1400574213.vcxproj /p:Configuration=Debug

  Microsoft (R) Build Engine Version 4.0.30319.1

  [Microsoft .NET Framework, Version 4.0.30319.296]

  Copyright (C) Microsoft Corporation 2007\.  All rights reserved.

  Build started 1/14/2013 8:15:59 AM.

  Project
  "C:\Users\Dan\Desktop\pclt\PCL\bin\CMakeFiles\CMakeTmp\cmTryCompileExec1400574213.vcxproj"
  on node 1 (default targets).

  PrepareForBuild:

    Creating directory "cmTryCompileExec1400574213.dir\Debug\".
    Creating directory "C:\Users\Dan\Desktop\pclt\PCL\bin\CMakeFiles\CMakeTmp\Debug\".

  InitializeBuildStatus:

    Creating "cmTryCompileExec1400574213.dir\Debug\cmTryCompileExec1400574213.unsuccessfulbuild" because "AlwaysCreate" was specified.

  ClCompile:

    c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64\CL.exe /c /Zi /W3 /WX- /Od /Ob0 /D WIN32 /D _WINDOWS /D _DEBUG /D "CMAKE_INTDIR=\"Debug\"" /D _MBCS /Gm- /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo"cmTryCompileExec1400574213.dir\Debug\\" /Fd"C:/Users/Dan/Desktop/pclt/PCL/bin/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec1400574213.pdb" /Gd /TC /errorReport:queue C:\Users\Dan\Desktop\pclt\PCL\bin\CMakeFiles\CMakeTmp\testCCompiler.c  /Zm1000 /GZ 

  C:\Program Files
  (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\x64\Microsoft.Cpp.x64.Targets(146,5):
  error : Required file "" is missing.
  [C:\Users\Dan\Desktop\pclt\PCL\bin\CMakeFiles\CMakeTmp\cmTryCompileExec1400574213.vcxproj]

  Done Building Project
  "C:\Users\Dan\Desktop\pclt\PCL\bin\CMakeFiles\CMakeTmp\cmTryCompileExec1400574213.vcxproj"
  (default targets) -- FAILED.

  Build FAILED.

  "C:\Users\Dan\Desktop\pclt\PCL\bin\CMakeFiles\CMakeTmp\cmTryCompileExec1400574213.vcxproj"
  (default target) (1) ->

  (ClCompile target) -> 

    C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\x64\Microsoft.Cpp.x64.Targets(146,5): error : Required file "" is missing. [C:\Users\Dan\Desktop\pclt\PCL\bin\CMakeFiles\CMakeTmp\cmTryCompileExec1400574213.vcxproj]

      0 Warning(s)
      1 Error(s)

  Time Elapsed 00:00:00.12

  CMake will not be able to correctly generate this project.
Call Stack (most recent call first):
  CMakeLists.txt:3 (project)

Configuring incomplete, errors occurred! 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-24T14:21:53.327

我发现我的 x64 编译器被安装 SP 1 破坏了。试试这个更新来恢复它们：

[http://www.microsoft.com/en-us/download/details.aspx?id=4422](http://www.microsoft.com/en-us/download/details.aspx?id=4422)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T03:22:48.610

我在 Win7 上遇到了类似的问题，并且遇到了同样的错误 - C 编译器“cl.exe”无法编译简单的测试程序。

对我有用的解决方案：

1.  在 Windows 上 不要在 cygwin 终端上运行 cmake。
2.  从命令提示符运行它，并确保您具有管理员权限，在 Windows 7 中，您可以通过转到开始->所有程序->附件->（右键单击命令提示符）以管理员身份启动命令提示符并选择“运行作为管理员”

然后运行`cmake <your source>` 对我来说就像一个魅力。

# java - 如何使用 apache 在不同的目录中运行 index.jsp？

> ID：14319248
> 
> 赞同：0
> 
> 时间：2013-01-14T13:24:27.887
> 
> 标签：java, apache, jsp

问题：如何在不同的目录中运行 index.jsp？（参考下图）。

我成功地使用此路径[http://localhost.:8080/Community/index.jsp在 (Community/WebContent/index.jsp) 中运行 index.jsp 文件](http://localhost.:8080/Community/index.jsp)

但是希望以相同的路径运行 webapp 文件夹（Community/Serializer/src/main/webapp/index.jsp）中的 index.jsp。

我正在使用 eclipse，运行 apache-tomcat-7.0.28。server.xml 上的更改？任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:26:54.283

将此路径 Community/Serializer/src/main/webapp/index.jsp 放在 web.xml 的 wecome 文件中

# php - 使用 Reddit 的 API 进行投票计数时总是出现错误 500

> ID：14319262
> 
> 赞同：0
> 
> 时间：2013-01-14T13:25:10.663
> 
> 标签：php, json, curl, reddit

我正在使用 Reddit 的 API 来获取给定 URL 的投票计数（我正在这样做，[http://www.reddit.com/api/info.json?](http://www.reddit.com/api/info.json?url=) url= $url）。我总是收到错误 500 消息。我在下面给你我的代码片段。任何人都可以帮助我吗？

```
$useragent="Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1";
$ch = curl_init();
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,15);     
curl_setopt($ch, CURLOPT_USERAGENT, $useragent); 
$content = curl_exec($ch);
echo $content;
curl_close($ch); 
```

Echo 总是在下一行返回给我。

```
<html><body><h1>500 Server Error</h1>An internal server error occured.</body></html> 
```

谢谢阅读。

**--- 已编辑 ---**

它在本地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:54:20.633

> $useragent="Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1";

reddit 的[API 规则](https://github.com/reddit/reddit/wiki/API)对用户代理做了以下规定：

*   将您客户的 User-Agent 字符串更改为独特且具有描述性的字符串，最好引用您的 reddit 用户名。
    *   示例：用户代理：/u/spladug 的 super happy flair bot v1.0
    *   许多默认的用户代理（如“Python/urllib”或“Java”）被严格限制为鼓励独特和描述性的用户代理字符串。
    *   如果您正在制作应用程序供他人使用，请在用户代理中包含版本号。这使我们能够阻止有缺陷的版本，而不会阻止您应用的所有版本。
    *   永远不要对你的用户代理撒谎。这包括欺骗流行的浏览器和欺骗其他机器人。我们将禁止带有极端偏见的说谎者。

这并不能解释 500 错误，但是，如果在您使用浏览器时相同的 URL 可以正常工作，我会从这里开始。如果您在使用浏览器时也收到 500 个错误，那么您可能没有`info`正确使用 API（因此发现了一个错误）。

# android - 如何将 ScrollView 添加到布局？

> ID：14319266
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:25:19.560
> 
> 标签：android, android-layout, android-scrollview

我正在尝试将滚动视图布局添加到此布局：

![一只忙碌的猫](../Images/1db7a5d68a50d2e8e4b7f2b8ccfea644.png)

我收到这个错误。

```
ScrollView can host only one direct child 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:30:20.153

一个滚动视图不能在他里面包含一个孩子

**错误的**

```
<ScrollView>
   <LinearLayout>
       xxxxx
   </LinearLayout>
   <LinearLayout>
       xxxxx
   </LinearLayout>
<ScrollView> 
```

**对**

```
<ScrollView>
  <LinearLayout>
   <LinearLayout>
       xxxxx
   </LinearLayout>
   <LinearLayout>
       xxxxx
   </LinearLayout>
  </LinearLayout>
<ScrollView> 
```

*只有一个直系子女。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:29:46.880

您只能在 ScrollView 中添加一个视图。因此，在 ScrollView 和 LinearLayout(L1) 中添加一个 LinearLayout 说 L1 ，添加所有其他 Views 。

# php - 阻止并发 mysql 更新查询

> ID：14319267
> 
> 赞同：0
> 
> 时间：2013-01-14T13:25:23.307
> 
> 标签：php, mysql, transactions

我有一个数据库和一个表（innoDB）：表。

此表中的行是：m1 和 m2。

我在一页上有 2 个提交按钮。

提交 1 执行此操作：

```
Database::q('UPDATE table SET m1 = ?s, m2 = ?i WHERE id = ?i', $n, 0, $ID); 
```

提交 2 这样做：

```
Database::q('UPDATE table SET m2 = ?s WHERE id = ?i', $n2, $ID); 
```

问题：如果用户同时提交两个表单。假设提交 1 为 100 000 ($n)，提交 2 为 50 ($n2)。结果将在更新后：m1 为 99 950，m2 为 100 000。

我怎样才能防止这种情况？我尝试使用事务，但它仍然无法正常工作。

这个语法正确吗？我不明白什么时候使用哪个：执行，查询，执行？

```
try {
   Database::beginTransaction();
   Database::q('..');
   Database::commit();
} catch (Exception $e) {
   Database::rollBack();
   echo 'ERROR!';
} 
```

这是我正在使用的数据库类：http: [//pastebin.com/PfsiYysX](http://pastebin.com/PfsiYysX)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:42:02.120

正如 Martin 建议的那样，一些 javascript 将防止*意外*按下两个按钮。但是，它并非在所有情况下都有效，并且当然不能防止故意提交两种形式。但是，它会阻止大多数用户到达您对操作应用真实、有效控制的位置。

更安全的解决方案是合并一个单次使用的 CSRF 令牌（两种形式的相同令牌的副本） - 在第一次请求时检查并过期令牌。这样做的问题是，如果用户拆分会话（打开新窗口），他们可能会认为存在错误。有一些方法可以缓解这种情况——但这取决于应用程序如何实现的具体细节。

更好的解决方案是将 建模为有限状态机，允许在数据处于初始状态时进行两次更新，但不允许后续更新。我会提供一个示例，但从您提供的数据来看这是不可能的。因此，请考虑一下：用户已经装满了购物篮并去结账。此时他们有 2 个选择 - 购买或丢弃篮子。如果他们单击“进行购买”，如果是，那么您将状态设置为“购买”，其中购物篮状态为“结帐时”，如果成功，则继续进行购买处理。如果他们单击“丢弃”，则您将购物篮状态更改为“丢弃”，状态为“结帐时”，如果成功，则继续进行清理。如果任一操作不成功，然后你报错。请注意，每个操作都应该自动提交 - 这不使用锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:29:42.517

> 如果用户同时提交两个表单

意味着您对 1 个文件或 2 个单独的 php 文件有 2 个 http 请求 - 并不重要。无论如何，没有办法（也没有交易）来避免这个问题。

事务用于保护需要一个接一个地执行的一堆查询。在执行之前，它们必须为 sql 引擎所知。对于 2 个请求，发送不同的单语句查询，这是不可能的。

一种出路是通过javascript停用按钮2，按下1，反之亦然。但这仅适用于启用 js 的行为良好的客户端（无安全措施！）。

# mysql - MYSQL将INT字段转为BIGINT，不丢失数据

> ID：14319271
> 
> 赞同：1
> 
> 时间：2013-01-14T13:25:45.657
> 
> 标签：mysql, int, type-conversion, bigint

我目前有一个 mysql 表，它的自动增量列达到了 maxint 标记。

在不丢失数据的情况下将字段类型更改为 Bigint 是否可以保存？

还是我需要使用带有 bigint 字段的重复表，复制所有数据，然后删除原始数据并重命名副本以确保我不会丢失数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:26:32.103

BIGINT 可以保存所有 INT 值，因此可以进行类型转换而不会丢失任何数据。

```
ALTER TABLE <tbl> CHANGE <col> <col> BIGINT; 
```

# email - Powershell扫描文件夹以获取特定文件名并写入日志文件和电子邮件

> ID：14319272
> 
> 赞同：0
> 
> 时间：2013-01-14T13:25:50.390
> 
> 标签：email, powershell, vbscript, windows-server-2008, directory

我们在办公室运行 Dropbox，有时会创建冲突文件

它将保存文件的两个版本并将一个标记为“冲突副本”

这让我的老板很生气

我正在考虑使用任务调度程序每 6 小时运行一次脚本

我需要使用文件名“冲突副本”的子文件夹扫描文件夹，如果存在任何具有此名称的文件以写入日志文件并向 NOC 团队发送电子邮件

文件服务器详细信息操作系统：Windows Server 2008 Enterprise

目录 - E:\Dropbox

我修补了 Filesystemwatcher 并没有让它与我的修改一起工作，所以我正在寻求你们的帮助来阐明这一点

非常感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:10:14.043

这样的事情应该可以解决问题：

```
$conflicted = Get-ChildItem E:\Dropbox -Recurse -Filter "*conflicted copy*" | Foreach-Object {$_.FullName}

if($conflicted)
{
    $body = $conflicted | Out-String
    Send-MailMessage -SmtpServer srv1 -From you@domain.com -To boss@domain.com -Subject 'conflicted copy files' -Body $body
} 
```

# javascript - 单击时更改 CSS 属性

> ID：14319274
> 
> 赞同：37
> 
> 时间：2013-01-14T13:26:23.040
> 
> 标签：javascript, jquery, css, jquery-ui, onclick

我正在尝试在单击另一个元素时更改一个元素的 CSS。我搜索了很多，但没有一个完美的作品。目前我正在使用下面的代码，但它不起作用。谁能告诉我我错过了什么？

```
<div id="foo">hello world!</div>
<img src="zoom.png" onclick="myFunction()" /> 
```

```
function myFunction() {
    document.getElementById('foo').style.cssText = 'background-color: red; color: white; font-size: 44px';
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-14T13:28:46.570

首先，使用`on*`属性添加事件处理程序是实现您想要的非常过时的方式。当您使用 jQuery 标记您的问题时，这里有一个 jQuery 实现：

```
<div id="foo">hello world!</div>
<img src="zoom.png" id="image" /> 
```

```
$('#image').click(function() {
    $('#foo').css({
        'background-color': 'red',
        'color': 'white',
        'font-size': '44px'
    });
}); 
```

更有效的方法是将这些样式放入一个类中，然后在单击时添加该类，如下所示：

```
$('#image').click(function() {
  $('#foo').addClass('myClass');
});
```

```
.myClass {
  background-color: red;
  color: white;
  font-size: 44px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<div id="foo">hello world!</div>
<img src="https://i.imgur.com/9zbkKVz.png?1" id="image" />
```

对于需要它的人来说，这是上面的一个简单的 Javascript 实现：

```
document.querySelector('#image').addEventListener('click', () => {
  document.querySelector('#foo').classList.add('myClass');
}); 
```

```
.myClass {
  background-color: red;
  color: white;
  font-size: 44px;
}
```

```
<div id="foo">hello world!</div>
<img src="https://i.imgur.com/9zbkKVz.png?1" id="image" />
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-14T13:31:31.793

试试这个：

**CSS**

```
.style1{
    background-color:red;
    color:white;
    font-size:44px;
} 
```

**HTML**

```
<div id="foo">hello world!</div>
<img src="zoom.png" onclick="myFunction()" /> 
```

**Javascript**

```
function myFunction()
{
    document.getElementById('foo').setAttribute("class", "style1");
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-05T09:27:00.303

```
 <script>
        function change_css(){
            document.getElementById('result').style.cssText = 'padding:20px; background-color:#b2b2ff; color:#0c0800; border:1px solid #0c0800; font-size:22px;';
        }
    </script>

</head>

<body>
    <center>
        <div id="error"></div>
        <center>
            <div id="result"><h2> Javascript Example On click Change Css style</h2></div>
            <button onclick="change_css();">Check</button><br />
        </center>
    </center>
</body> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T13:33:42.440

在您的代码中，您没有使用 jquery，因此，如果您想使用它，您需要类似...

```
$('#foo').css({'background-color' : 'red', 'color' : 'white', 'font-size' : '44px'}); 
```

[http://api.jquery.com/css/](http://api.jquery.com/css/)

否则，如果您不使用 jquery，则需要执行...

```
document.getElementById('foo').style = 'background-color: red; color: white; font-size: 44px'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T13:29:15.443

使用 jquery，您可以这样做：

```
$('img').click(function(){
    $('#foo').css('background-color', 'red').css('color', 'white');
}); 
```

这适用于所有`img`标签，您应该`id`为它设置一个属性，`image`然后：

```
$('#image').click(function(){
    $('#foo').css('background-color', 'red').css('color', 'white');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T13:29:02.573

```
<div id="foo">hello world!</div>
<img src="zoom.png" id="click_me" /> 
```

JS

```
$('#click_me').click(function(){
  $('#foo').css({
    'background-color':'red',
    'color':'white',
    'font-size':'44px'
  });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T13:29:53.610

试试这个：

```
$('#foo').css({backgroundColor:'red', color:'white',fontSize:'44px'}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-14T13:35:42.757

此代码似乎工作正常（请参阅此[jsfiddle](http://jsfiddle.net/mEE69/)）。你的javascript是在你的身体*之前定义的吗？*当浏览器读取`onclick="myFunction()"`时，它必须知道是什么`myFunction`。

# android - rooted android只读文件系统错误

> ID：14319278
> 
> 赞同：0
> 
> 时间：2013-01-14T13:26:47.940
> 
> 标签：android, root, roottools

我正在尝试修改`/etc/hosts/`文件，为此我在外部存储中创建了一个单独的文件，然后`cp`将其保存到该位置。我收到这些错误消息：

```
01-14 18:51:51.069: E/HostsActivity(5356): rm failed for /etc/hosts, Read-only file system
01-14 18:51:51.079: E/HostsActivity(5356): failed on '/mnt/sdcard/hosts' - Cross-device link 
```

我该怎么办？

我正在使用[RootTools](http://code.google.com/p/roottools/wiki/Usage)。

我的代码：

```
 try {
            String fn = write_file("hosts", hostsData);
            RootTools.getShell(true).add(new Command(0, "rm /etc/hosts",  "mv " + fn + " /etc/hosts")
            {
                @Override
                public void output(int arg0, String arg1) {
                    // TODO Auto-generated method stub
                    Log.e("HostsActivity", arg1);
                }
            }).waitForFinish();
            tv_status.setText("Done");

        } catch (Exception ioe) {
            Log.e("HostsActivity", ioe.toString());
            tv_status.setText(ioe.toString());
        } 
```

我在活动开始时要求获得 root 权限`onCreate`

```
if (!RootTools.isAccessGiven()) {
            TextView tv = new TextView(this);
            tv.setText("Root access not given. Please ensure root access.");
            setContentView(tv);
        }
    setContentView(R.layout.activity_hosts); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:36:04.543

您需要重新挂载 /etc 默认情况下它是只读文件系统。
比您需要检查 /etc/hosts 上的权限，也许您需要使用 chmod 命令更正文件权限。

# windows-phone-8 - Windows Phone 8 模拟器部署问题与 Internet

> ID：14319282
> 
> 赞同：5
> 
> 时间：2013-01-14T13:26:54.353
> 
> 标签：windows-phone-8, windows-phone-8-emulator

我正面临 Windows 8 手机模拟器的问题。

> Windows Phone 模拟器无法连接到 Windows Phone 操作系统。电话没有响应连接请求

这是我得到的错误。当模拟器以互联网启动但我的应用程序未部署时。分配的 ip 是`192.168.137.1`. 以前它工作得很好，但突然它开始出现这个问题。

以下是我执行的故障排除列表：

1.  `169.254.xxx.xxx` 通过 dhcp 将地址设置为内部模拟器，应用程序部署成功，没有互联网连接

2.  尝试过 MAC 地址欺骗，但当我使用这些设置时没有任何效果。

3.  在共享模式下更改了外部虚拟交换机，这将使用 ip 启动互联网， `192.168.137.1`但应用程序未部署在调试器中显示的错误是：

> ```
> Invalid pointer error
> App deployment failed 
> ```

1.  试过网络桥接还是不行。
2.  手动创建所有设置，包括内部开关和外部开关。`192.168.137.1`但是当它获得ip然后互联网工作但应用程序没有部署时面临同样的问题。当它获得 `169.254.xxx.xxx`ip 系列应用程序部署但没有互联网连接时。
3.  没有打开防火墙或没有防病毒软件阻止任何连接。
4.  用于网络连接的无线路由器，仍然没有成功
5.  也尝试过干净安装所有东西，但还是不行。

需要帮助解决这个问题，因为我一周以来一直试图解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:03:56.037

如果通过虚拟机在同一台 PC 上完成安装，则不会遇到此问题。我所做的是：

> 已为 VM 分配了 4gb 内存、60gb 硬盘和 4 个内核。
> 
> 1）我安装了一个默认设置的虚拟机。
> 
> 2）然后我停止了你的虚拟机（关闭 Windows 8，不要挂起它）。
> 
> 3) 在 VMWare 虚拟机列表中，右键单击 Windows 8 机器，然后单击“在 Finder 中显示”。
> 
> 4）右键单击该文件，然后单击“显示包内容”，然后使用文本编辑器找到并打开扩展名为 .vmx 的文件
> 
> 5）一直到文件末尾并添加这两行（首先检查它们是否以前添加过）：
> 
> > hypervisor.cpuid.v0 = "假"
> > 
> > vhv.enable = "真"
> 
> 6) 在 VMWare 虚拟机列表中，右键单击 Windows 8，单击“首选项”，然后单击“高级”。选择“Intel VT-X with EPT”作为“首选虚拟化引擎”。

然后当我在虚拟机中启动窗口时，它似乎工作正常，无需任何额外的设置更改。但是它仍然没有在物理机器上运行

如果有人遇到类似问题，我建议使用虚拟机，直到此类问题得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T20:14:04.883

为同样的问题苦苦挣扎了 3 天，我终于通过禁用“访客或公共网络”的 Windows 防火墙解决了我的问题。我还没有弄清楚允许通过什么应用程序/服务，所以我可以重新启用它。

# eclipse-plugin - 如何基于代码模板创建 Eclipse 自定义基于 java 的新文件向导？

> ID：14319285
> 
> 赞同：3
> 
> 时间：2013-01-14T13:27:03.930
> 
> 标签：eclipse-plugin

我刚刚开始进行一些 Eclipse (juno) 插件实验。我要创建的插件的一个关键部分需要为用户提供创建新的基于 java 的类的能力。这些类可能是 3 种不同类型中的 1 种。

是否可以使用 NewFileWizard 的变体来做到这一点，它将在引擎盖下为每个类类型使用一个模板？

例如，当用户在他们从插件创建的新自定义项目中时，我希望他们能够右键单击“新建”并获得 3 个选择。根据选择，向导将使用相应的代码模板——填写类名、包名等，然后在适当的项目文件夹中生成文件。

如果您需要澄清我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:00:33.827

> 是否可以使用 NewFileWizard 的变体来做到这一点，它将在引擎盖下为每个类类型使用一个模板？

是的。

您基本上必须获得 New File Wizard 的 Eclipse 源代码，将其引入 Eclipse 插件项目，并对其进行修改以满足您的特定需求。

# qml - 如何指定条件 ActionSet？

> ID：14319286
> 
> 赞同：1
> 
> 时间：2013-01-14T13:27:07.770
> 
> 标签：qml, blackberry-10

我正在尝试在 QML 中创建不同的上下文菜单，但我不知道正确的语法是什么。我想做类似的事情：

```
contextActions: [
                              ActionSet {
                                  title: "Action Set"
                                  subtitle: "This is an action set."

                                  actions: if (_corporate.currentView == 2) {
                                      [ ActionItem { title: "Action 1" },
                                      ActionItem { title: "Action 2" },
                                      ActionItem { title: "Action 3" } ]
                                      } else {
                                        [ActionItem { title: "Action 4" },
                                        ActionItem { title: "Action 5" },
                                        ActionItem { title: "Action 6" }
                                         ]
                                      }
                              } // end of ActionSet  
                       ] // end of contextActions list 
```

这显然是错误的语法，那么正确的方法是什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:56:25.623

也许是这样的：

```
ActionItem { title: _corporate.currentView == 2 ? "Action 1" : "Action 4" } 
```

或者，如果您有更多值要检查，请使用函数：

```
 ActionItem {
     title: getTitleForView(_corporate.currentView);
     function getTitleForView(vid) {
      switch (vid) {
       case 1:
        return "abc"
       case 2:
        return "qwerty"
      }
     }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:11:28.043

对我来说正确的方法（使我能够在不同情况下拥有不同数量的上下文菜单项）是使用从上下文中选择的不同元素。

就我而言，我有一个列表，可以`ListItemComponents`根据数据的类型在其中单独列出。问的时候没有说的太具体，不好意思。

这是正确的答案，带有代码示例：http: [//supportforums.blackberry.com/t5/Cascades-Development/Context-dependent-contextActions/td-p/2044783](http://supportforums.blackberry.com/t5/Cascades-Development/Context-dependent-contextActions/td-p/2044783)

那里缺少的是`DataModel::itemType()`函数使用示例（在这种情况下至关重要），所以这里有一个例子：[https ://developer.blackberry.com/cascades/documentation/ui/lists/groupdatamodel.html](https://developer.blackberry.com/cascades/documentation/ui/lists/groupdatamodel.html)

# java - 大量点的贝塞尔曲线逼近

> ID：14319288
> 
> 赞同：5
> 
> 时间：2013-01-14T13:27:10.743
> 
> 标签：java, math, bezier, approximation

我有大约一百个点，我想用贝塞尔曲线近似，但如果有超过 25 个点（或类似的点），组合数量的阶乘计数会导致数字溢出。有没有办法以类似贝塞尔的方式（平滑曲线而不通过所有点，除了第一个和最后一个）来近似这样数量的点？还是我需要选择另一个具有相同效果的近似算法？我正在使用默认的挥杆绘图工具。

PS 英语不是我的母语，所以可能我在某处使用了错误的数学术语。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T13:45:30.727

你想得到一条在所有 100 个点中最适合的贝塞尔曲线吗？如果是这种情况，[Jim Herold](http://jimherold.com/2012/04/20/least-squares-bezier-fit/)有一个非常详细的解释如何做到这一点。[进一步的优化可能是使用Douglas-Peucker](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)算法减少点数。

# android - 无法移动到选项卡式布局

> ID：14319293
> 
> 赞同：0
> 
> 时间：2013-01-14T13:27:16.957
> 
> 标签：android, android-layout, android-intent

我刚刚从 Eclipse 新的 Android 文件向导创建了一个新活动。我使用选项卡式导航创建了活动。但是，当我尝试从主要活动移至该活动时，应用程序崩溃并出现错误：`unfortunately myAppName has stopped`

在我的主要活动中，单击一个按钮，我想将用户带到一个选项卡式活动。我正在使用以下代码将它们移动到下一个活动：

```
Intent calActivityIntent = new Intent(this, CalendarActivity.class);
this.startActivity(calActivityIntent); 
```

这段代码有问题吗？当我通过 Eclipse 向导添加选项卡式活动时，我假设该新活动的代码是正确的。

## 编辑：

日志猫：

```
01-14 18:42:15.770: E/AndroidRuntime(23918): FATAL EXCEPTION: main
01-14 18:42:15.770: E/AndroidRuntime(23918): java.lang.IllegalStateException: Could not execute method of the activity
01-14 18:42:15.770: E/AndroidRuntime(23918):    at android.view.View$1.onClick(View.java:3071)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at android.view.View.performClick(View.java:3538)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at android.view.View$PerformClick.run(View.java:14319)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at android.os.Handler.handleCallback(Handler.java:608)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at android.os.Looper.loop(Looper.java:156)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at android.app.ActivityThread.main(ActivityThread.java:5045)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at java.lang.reflect.Method.invokeNative(Native Method)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at java.lang.reflect.Method.invoke(Method.java:511)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at dalvik.system.NativeStart.main(Native Method)
01-14 18:42:15.770: E/AndroidRuntime(23918): Caused by: java.lang.reflect.InvocationTargetException
01-14 18:42:15.770: E/AndroidRuntime(23918):    at java.lang.reflect.Method.invokeNative(Native Method)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at java.lang.reflect.Method.invoke(Method.java:511)
01-14 18:42:15.770: E/AndroidRuntime(23918):    at android.view.View$1.onClick(View.java:3066)
01-14 18:42:15.770: E/AndroidRuntime(23918):    ... 11 more
01-14 18:42:15.770: E/AndroidRuntime(23918): Caused by: java.lang.NullPointerException
01-14 18:42:15.770: E/AndroidRuntime(23918):    at com.example.MyAppName.MainActivity.mainMenuButtonClicked(MainActivity.java:94)
01-14 18:42:15.770: E/AndroidRuntime(23918):    ... 14 more 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myappname"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.myappname.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.myappname.CalendarActivity"
            android:label="@string/title_activity_calendar" >
        </activity>

    </application>

</manifest> 
```

注意：名为“CalendarActivity”的活动是选项卡式活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:07:44.870

正如它在您的 logcat 输出中一样：

```
Caused by: java.lang.NullPointerException
at  com.example.MyAppName.MainActivity.mainMenuButtonClicked(MainActivity.java:94) 
```

问题出在`mainMenuButtonClicked()`方法中`MainActivity`。如果您确实想要，请发布此方法的代码。

干杯!

# tiff - 多页与 GnuWin32

> ID：14319294
> 
> 赞同：0
> 
> 时间：2013-01-14T13:27:19.703
> 
> 标签：tiff, gnuwin32

GnuWin32 库的 tiffSplit.exe 分割 tiff 图像。是否可以使用 GnuWin32 库将各种单页文件转换为多页 tiff？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:46:53.273

解决方案是使用`tiffcp`：

```
tiffcp -c lzw <source files> <dest file> 
```

该`-c`选项指定要使用的压缩。如果您不使用任何压缩，则文件可能会比压缩后的输入文件大得多。

# grails - 如何调用保存和更新多个域的方法？

> ID：14319295
> 
> 赞同：0
> 
> 时间：2013-01-14T13:27:23.143
> 
> 标签：grails, groovy, save

我想为一堆不同的域类的每个操作`update`调用一个服务方法。我可以从and`save`调用该方法，但是有很多域，并且为每个域执行此操作会很耗时。那么有没有办法解决这个问题？例如，添加`beforeInsert``beforeUpdate`

```
static transactional = true 
```

对服务或控制器使该过程具有事务性；所以以类似的方式，我可以对此做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:24:56.330

如果我明白你在问什么：

在更新或保存您的域组的循环中，调用您的服务方法，然后调用`save()`，将`flush`选项设置为`false`：

```
.save(flush: false) 
```

在您遍历您的组后，运行`.flush()`并`.clear()`在您的会话上运行。（这只会刷新您的记录一次。您还可以在循环中粘贴一个计数器`flush()`并`clear()`为每 x 条记录调用一次。）

# knockout.js - 渲染动态模型

> ID：14319300
> 
> 赞同：2
> 
> 时间：2013-01-14T13:27:34.613
> 
> 标签：knockout.js

我正在尝试渲染一个动态加载的模型（例如，通过 ajax 调用），它的属性是根据它的类型来识别的。

我有几个模板，每个模板都适合呈现特定类型的对象，并使用绑定`if`参数根据对象类型实例化特定模板。`template`如[文档](http://knockoutjs.com/documentation/template-binding.html)中所述：

> 这对于防止在填充模板之前将 null observable 绑定到模板很有用。

在第一次加载时，模型被成功渲染。当我尝试渲染不同的对象时，我得到了`Uncaught Error: Unable to parse bindings. Message: ReferenceError: property is not defined;`错误。

如果模型的一部分不稳定，渲染的最佳实践是什么？

这是示例视图：

```
<button data-bind="click: loadFruit">Show fruit</button>
<button data-bind="click: loadAnimal">Show animal</button>
<h2>Now showing: <span data-bind="text: objType"></span></h2>
<div data-bind="with: obj">
  <dl data-bind="template: { name: 'fruitTemplate', if: $parent.objType() == 'fruit' }"></dl>
  <dl data-bind="template: { name: 'animalTemplate', if: $parent.objType() == 'animal' }"></dl>
</div>

<script type="text/html" id="fruitTemplate">
  <dt>Name</dt>
  <dd data-bind="text: name"></dd>
  <dt>Color</dt>
  <dd data-bind="text: color"></dd>
</script>

<script type="text/html" id="animalTemplate">
  <dt>How may legs?</dt>
  <dd data-bind="text: numLegs"></dd>
  <dt>Has Tail?</dt>
  <dd data-bind="text: hasTail"></dd>
</script> 
```

和视图模型：

```
var viewModel = function() {
  var self = this;
  this.objType = ko.observable('n/a');
  this.obj = ko.observable();
  this.loadFruit = function() {
    self.obj ({name:'apple', color: 'green'});
    self.objType ('fruit');
  }
  this.loadAnimal = function() {
    self.obj ({numLegs:4, hasTail: true});
    self.objType ('animal');
  }
};

ko.applyBindings(new viewModel()); 
```

您可以使用[相关的 jsfiddle](http://jsfiddle.net/hmcKN/7/)进行尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:57:02.220

这可能不是最佳实践解决方案，但很容易实现：http: [//jsfiddle.net/hmcKN/9/](http://jsfiddle.net/hmcKN/9/)

只需`objType`在更改其他值之前设置为不存在的模板。然后设置所有需要的可观察对象，最后指定正确的模板。

# android - asmack pubsub getItems 错误

> ID：14319306
> 
> 赞同：0
> 
> 时间：2013-01-14T13:27:58.907
> 
> 标签：android, xmpp, publish-subscribe, asmack

我正在尝试使用 Pubsub 节点向服务器发布一些信息。不幸的是，我未能检索到之前发布的节点。与以下链接中的问题非常相似：http: [//community.igniterealtime.org/message/ 199690#199690](http://community.igniterealtime.org/message/199690#199690)

具体来说，代码片段如下：

```
 try {
            LeafNode node = mPubsub.getPEPNode(USEINFONODE,mFrom);
            if(null != node){
                List<Item> items = node.getItems();
                Log.i("items",items.toString());
            }

        } catch (XMPPException e) {
            Log.e("userInfoExtension","error : and the error is " + e.toString());
        } 
```

并且输出错误是服务器没有响应。

调试的输出是这样的：

```
<iq id="B9tI0-4" to="pubsub.mymachine" type="get"><query xmlns="http://jabber.org/protocol/disco#info" node="theNode"></query></iq>
<iq id="B9tI0-5" to="pubsub.mymachine" type="get"><pubsub xmlns="http://jabber.org/protocol/pubsub"><items node='theNode'/></pubsub></iq> 
```

但是根据上面提到的链接，预期的 iq 节应该是这样的：

```
<iq type='get'
    from='notifyserver@mymachine'
    to='pubsub.mymachine'
    id='items1'>
  <query xmlns='http://jabber.org/protocol/disco#items'
         node='theNode'/>
</iq> 
```

所以它表明我错过了 iq 节中的 from 字段，我想知道如何将 from ='client@server' 放入 iq 节中。我尝试过 asmack 库，包括： asmack-android-7.jar ， asmack-android-7-beem.jar asmack-android-16-beem.jar，都失败了。

有人能帮忙吗？非常感谢。

我发现它与接收数据包有关。实际上我已经收到了我需要的数据包，问题是该数据包可能无法在某处被 smack 处理，并且它不会从服务器异常中抛出任何响应。所以我认为问题实际上是没有正确接收传入的数据包。在我的另一个问题中也是如此：

```
 http://stackoverflow.com/questions/14357707/how-to-send-and-listen-to-custom-xmpp-presence-packet-with-asmack-the-library 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:58:18.793

很抱歉误导了你！该错误是由我的扩展提供程序引起的，它导致解析数据包进入无限循环，从而导致服务器异常无响应。

# security - 如何查看 Fortify 安全编码规则的所有规则？

> ID：14319312
> 
> 赞同：6
> 
> 时间：2013-01-14T13:28:23.527
> 
> 标签：security, rules, fortify

我想查看 Fortify 安全编码规则的具体规则（Fortify 默认使用的规则），因为我想写一份关于 Fortify 使用的所有规则的报告：

*   我试图在其中看到它们，`C:\Program Files\Fortify Software\HP Fortify v3.60\Core\config\rules`但我找到了`.bin`文件，但我看不到它们。
*   我也打开`AuditWorkbench`了，在安全内容管理中我也看不到它们。

有什么办法可以看到吗？？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:04:14.370

没有成为 HP Fortify 的软件工程师，不能。默认规则被视为 HP Fortify 的知识产权，工程部门以外的任何人都无法访问它们。

您想通过这份报告解决什么问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:08:49.783

由于 HP/Fortify 将规则包作为二进制文件分发以保护其知识产权，因此您将无法看到各个规则是如何编写的。

但是，如果您希望包含有关使用了哪些规则/规则包的***一些***信息，您可以导航到*项目摘要*屏幕并查看在扫描时使用了哪些规则包。您还可以访问诸如每个规则包的版本和每个包的附加元数据等信息。

能够在元报告中提供这种详细程度***可能***足以抢占后续问题。只是一个想法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-03T12:03:44.953

内置的 Fortify 规则不可读取和编辑，因为它是该工具的核心知识产权。

然而，Fortify 发布了一份关于扫描哪些漏洞的分类，以及它们与 CWE:s 的映射。链接在这里：[https ://vulncat.fortify.com/en/weakness](https://vulncat.fortify.com/en/weakness)

# java - JNI RegisterNatives 不适用于 ClassLoader.loadClass() 加载的类

> ID：14319314
> 
> 赞同：1
> 
> 时间：2013-01-14T13:28:27.047
> 
> 标签：java, java-native-interface

我将 JVM 嵌入到现有的 C++ 应用程序中，并且需要使用类注册本机 Java 函数的实现。

考虑这个带有本机函数的简单类：

```
class Native {
  static {
    System.out.println("Class 'Native' static initializer called.");
  }

  public native int f(int i);
} 
```

在 JVM 内部，我正在运行 OSGi，这就是我需要使用 Java 代码（使用正确的类加载器）而不是从 JNI 加载它们的原因。但是，为了使这个示例简单，我省略了 OSGi。

我有这四种不同的 Java 方法来获取`jclass`C++ 中的值：

```
class Bridge {
  public Class<?> getNativeClass1() throws ClassNotFoundException {
    return getClass().getClassLoader().loadClass("org.example.Native");
  }

  public Class<?> getNativeClass2() throws ClassNotFoundException {
    return Class.forName("org.example.Native", false, getClass().getClassLoader());
  }

  public Class<?> getNativeClass3() throws ClassNotFoundException {
    final Class<?> clazz = getClass().getClassLoader()
                                     .loadClass("org.example.Native");
    clazz.getMethods();
    return clazz;
  }

  public Class<?> getNativeClass4() throws ClassNotFoundException {
    return Class.forName("org.example.Native", true, getClass().getClassLoader());
  }
} 
```

要在 C++ 中注册本机函数实现，`Native.f()`我调用：

```
JNIEnv* env = ...
jclass clazz = ...; // Calling one of the four methods above.
JNINativeMethod nativeMethod = {
  (char*) "f",      // Method name 'f'.
  (char*)  "(I)I;", // Signature 'int --> int'.
  (void*) f         // Pointer to C++ implementation of function.
};
env->RegisterNatives(clazz, &nativeMethod, 1); 
```

根据我用于获取`Class<?>`实例的方法，我得到不同的结果：

*   `getNativeClass1()``Native`：加载类时（但当然是创建类的实例时），静态初始化程序不会在类中执行，并且本机实现*未*正确绑定。（在 Java 中调用本机函数会产生不正确的结果或使 JVM 崩溃。）
*   `getNativeClass2()`: 同上。
*   `getNativeClass3()``Native`：加载类时仍然没有在类中调用静态初始化程序，但本机实现*已*正确绑定，我可以`f()`成功调用。
*   `getNativeClass3()`:当类被加载并且本地实现*被*正确绑定时，静态初始化器在类*中被*调用。`Native`

 *因此，似乎`ClassLoader.loadClass()`以某种方式加载了类，因此它没有正确初始化并且`JNIEnv::RegisterNatives()`无法正常工作。但是，调用`Class.getMethods()`将以某种方式初始化类（不调用静态初始化程序），以便绑定本机方法。

另一方面，`Class.forName(clazz, false, classLoader)`它的工作方式似乎与`Class.loadClass()`返回未初始化的`Class`实例完全一样。

任何人都可以解释两者之间的区别

1.  一个未初始化的类，如 and 返回的`getNativeClass1()`类`getNativeClass2()`
2.  一个部分初始化的类，如返回的类`getNativeClass3()`
3.  一个完全初始化的类，如返回的类`getNativeClass4()`

在调用之前加载类的最便携的方法是`JNIEnv::RegisterNatives()`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:08:24.167

> 所以似乎 ClassLoader.loadClass() 以某种方式加载类，因此它没有正确初始化

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html)：

`loadClass(String)`：“调用此方法等效于调用 loadClass(name, false)。”

`loadClass(String,boolean)`（添加了重点）：“如果使用上述步骤找到了类，**并且解析标志为 true**，则此方法将在生成的 Class 对象上调用 resolveClass(Class) 方法”

这两种方法供需要在加载和链接之间做一些事情的类加载器内部使用。我不确定为什么`loadClass(String)`标记为公开，但可以说不应该。

> 在调用之前加载类的最便携的方法是什么

`Class.forName()`，它使用上下文类加载器并确保该类已准备好使用。*

# c# - 我如何在 desfire ev1 中进行本机身份验证

> ID：14319321
> 
> 赞同：2
> 
> 时间：2013-01-14T13:28:45.540
> 
> 标签：c#, mifare

我想在本机模式下使用 desfire 卡进行身份验证。这是我目前的步骤：

*   我选择主应用程序`(AID = 0×00 0×00 0×00)`
*   我收到卡的响应（“挑战”，randB）
*   然后，在第二步中，我生成一个响应（randA）；我将 8 字节 rand A 与 8 字节解密和旋转 rand B 连接起来
*   我对其进行加密，将其发送回卡。

我收到了`91 ae`答案，我不知道为什么。以下是消息序列：

*   到卡：90 0A 00 00 01 00 00
*   从卡 5B 57 69 C7 CE 4B 16 7B 91 AF
*   加密 RandB = 5B 57 69 C7 CE 4B 16 7B
*   破译 RandB' = 17 8D 23 57 10 C9 32 D5
*   一字节 lshitf RandB' = 8D 23 57 10 C9 32 D5 17
*   生成的兰德 A = 43 9D 17 8E 9A 5F BA 70
*   连接兰德 A 与兰德 B'' = 43 9D 17 8E 9A 5F BA 70 8D 23 57 10 C9 32 D5 17
*   加密兰德 A + 兰德 B'' = 9E ED DC 4F BC E7 BE BD 09 02 CF 99 F7 40 34 7B
*   至卡：90 AF 00 00 10 43 9D 17 8E 9A 5F BA 70 8D 23 57 10 C9 32 D5 17 00
*   来自卡片：91 AE

拜托，如果你发现有什么不对的地方，你能指出来吗？我可能会遇到哪些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:23:16.587

我知道回复有点晚了，但无论如何都要回答——我自己昨天才能够正确地进行身份验证。91 ae 代表身份验证错误。这意味着您在连接和加密后使用 RandA 发送到的 RandB' 与 PICC (Ev1) 的预期不同。问题可能出在加密中。您可以使用 EV1 数据表中的示例交叉检查您的逻辑加密吗？

希望它有所帮助（如果您自己无法解决问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T19:50:44.503

主密钥和其他应用程序身份验证使用相同的逻辑。[这](https://stackoverflow.com/questions/14117025/des-send-and-receive-modes-for-desfire-authentication)是我在主题 DesFire Authentication in Android 中的问答。希望能帮助到你。

您的问题必须在 en/deciphering 中。您应该使用 3DES 或 AES 使用**no-padding**进行 CBC 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:39:20.537

以我的经验，大多数时候是以错误的方式进行加密。您是否使用正确的模式来加密响应？（顺便说一句，您使用的是 DES、TDES 还是 AES？）。如果您使用DES，您是否在反向模式下使用CBC？IIRC，要加密响应，您需要使用“逆”算法（您通常使用的算法）。另外，检查密钥是否需要奇偶校验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-07T07:08:57.697

我在以下页面上找到了一个关于如何进行身份验证的工作示例：[https ://blog.chaucery.com/2017/02/desfire-authentication-in-c.html](https://blog.chaucery.com/2017/02/desfire-authentication-in-c.html)

页面[https://ridrix.wordpress.com/2009/09/19/mifare-desfire-communication-example/](https://ridrix.wordpress.com/2009/09/19/mifare-desfire-communication-example/)也非常有帮助。

不要忘记查看此 codeproject 文章：[https](https://www.codeproject.com/Articles/1096861/DIY-electronic-RFID-Door-Lock-with-Battery-Backup) ://www.codeproject.com/Articles/1096861/DIY-electronic-RFID-Door-Lock-with-Battery-Backup以及此处给出的示例：[https://hack .cert.pl/files/desfire-9f122c71e0057d4f747d2ee295b0f5f6eef8ac32.html](https://hack.cert.pl/files/desfire-9f122c71e0057d4f747d2ee295b0f5f6eef8ac32.html)

在这些博客文章的帮助下，我能够编写以下代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.InteropServices;
using System.Security.Cryptography;
using System.Text;
using System.Threading.Tasks;

namespace DesFireStackOverflow
{
class DesFire
{
    byte[] SessionKey = null;
    byte[] key = StringToByteArray("00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00");
    byte[] initVector = StringToByteArray("00 00 00 00 00 00 00 00");

    /// <summary>
    /// Status codes (errors) returned from Desfire card
    /// </summary>
    public enum DESFireStatus
    {
        ST_Success = 0x00,
        ST_NoChanges = 0x0C,
        ST_OutOfMemory = 0x0E,
        ST_IllegalCommand = 0x1C,
        ST_IntegrityError = 0x1E,
        ST_KeyDoesNotExist = 0x40,
        ST_WrongCommandLen = 0x7E,
        ST_PermissionDenied = 0x9D,
        ST_IncorrectParam = 0x9E,
        ST_AppNotFound = 0xA0,
        ST_AppIntegrityError = 0xA1,
        ST_AuthentError = 0xAE,
        /// <summary>
        /// data did not fit into a frame, another frame will follow
        /// </summary>
        ST_MoreFrames = 0xAF,
        ST_LimitExceeded = 0xBE,
        ST_CardIntegrityError = 0xC1,
        ST_CommandAborted = 0xCA,
        ST_CardDisabled = 0xCD,
        ST_InvalidApp = 0xCE,
        ST_DuplicateAidFiles = 0xDE,
        ST_EepromError = 0xEE,
        ST_FileNotFound = 0xF0,
        ST_FileIntegrityError = 0xF1,
    }

    public enum Instructions : byte
    {
        #region DESFire legacy instructions
        DF_INS_AUTHENTICATE_LEGACY = 0x0A,
        DF_INS_CHANGE_KEY_SETTINGS = 0x54,
        DF_INS_GET_KEY_SETTINGS = 0x45,
        DF_INS_CHANGE_KEY = 0xC4,
        DF_INS_GET_KEY_VERSION = 0x64,

        DF_INS_CREATE_APPLICATION = 0xCA,
        DF_INS_DELETE_APPLICATION = 0xDA,
        DF_INS_GET_APPLICATION_IDS = 0x6A,
        DF_INS_SELECT_APPLICATION = 0x5A,

        DF_INS_FORMAT_PICC = 0xFC,
        DF_INS_GET_VERSION = 0x60,

        DF_INS_GET_FILE_IDS = 0x6F,
        DF_INS_GET_FILE_SETTINGS = 0xF5,
        DF_INS_CHANGE_FILE_SETTINGS = 0x5F,
        DF_INS_CREATE_STD_DATA_FILE = 0xCD,
        DF_INS_CREATE_BACKUP_DATA_FILE = 0xCB,
        DF_INS_CREATE_VALUE_FILE = 0xCC,
        DF_INS_CREATE_LINEAR_RECORD_FILE = 0xC1,
        DF_INS_CREATE_CYCLIC_RECORD_FILE = 0xC0,
        DF_INS_DELETE_FILE = 0xDF,

        DF_INS_READ_DATA = 0xBD,
        DF_INS_WRITE_DATA = 0x3D,
        DF_INS_GET_VALUE = 0x6C,
        DF_INS_CREDIT = 0x0C,
        DF_INS_DEBIT = 0xDC,
        DF_INS_LIMITED_CREDIT = 0x1C,
        DF_INS_WRITE_RECORD = 0x3B,
        DF_INS_READ_RECORDS = 0xBB,
        DF_INS_CLEAR_RECORD_FILE = 0xEB,
        DF_COMMIT_TRANSACTION = 0xC7,
        DF_INS_ABORT_TRANSACTION = 0xA7,

        /// <summary>
        /// data did not fit into a frame, another frame will follow
        /// </summary>
        DF_INS_ADDITIONAL_FRAME = 0xAF,
        #endregion

        #region DESFire EV1 instructions
        DFEV1_INS_AUTHENTICATE_ISO = 0x1A,
        DFEV1_INS_AUTHENTICATE_AES = 0xAA,
        DFEV1_INS_FREE_MEM = 0x6E,
        DFEV1_INS_GET_DF_NAMES = 0x6D,
        DFEV1_INS_GET_CARD_UID = 0x51,
        DFEV1_INS_GET_ISO_FILE_IDS = 0x61,
        DFEV1_INS_SET_CONFIGURATION = 0x5C,
        #endregion

        #region ISO7816 instructions
        ISO7816_INS_EXTERNAL_AUTHENTICATE = 0x82,
        ISO7816_INS_INTERNAL_AUTHENTICATE = 0x88,
        ISO7816_INS_APPEND_RECORD = 0xE2,
        ISO7816_INS_GET_CHALLENGE = 0x84,
        ISO7816_INS_READ_RECORDS = 0xB2,
        ISO7816_INS_SELECT_FILE = 0xA4,
        ISO7816_INS_READ_BINARY = 0xB0,
        ISO7816_INS_UPDATE_BINARY = 0xD6
        #endregion
    }
    public bool Authenticate(byte[] key, byte[] initVector)
    {

        var tdes = new TripleDESCryptoServiceProvider()
        {
            Mode = CipherMode.CBC,
            Padding = PaddingMode.None,
            BlockSize = 64,
            IV = initVector
        };

        var decryptor = tdes.CreateWeakDecryptor(key, initVector);

        byte[] piccApplication = new byte[3] { 0x00, 0x00, 0x00 };
        byte[] response = null;
        // Select PICC Application 0x00 0x00 0x00
        DESFireStatus status = DataExchange(Instructions.DF_INS_SELECT_APPLICATION, 0, 0, piccApplication, out response);

        status = DataExchange(Instructions.DF_INS_GET_KEY_SETTINGS, 0, 0, null, out response);
        //-> BufOut Byte Nr 0 : 0F => All bits in lower nibble are set, meaning configuration can be changed, CreateApp/ GetAppIds / GetKeySettings can be performed without masterkey, and masterkey is changeable
        //-> BufOut Byte Nr 1 : 01 => Only 1 key can exist for this application(the PICC application)

        byte[] keyNumber = new byte[1];
        keyNumber[0] = 0;
        status = DataExchange(Instructions.DF_INS_GET_KEY_VERSION, 0, 0, keyNumber, out response);      // Get Key Version for Key 0            

        // Get RandB_enc from Card
        status = DataExchange(Instructions.DF_INS_AUTHENTICATE_LEGACY, 0, 0, keyNumber, out response);  // Authenticate for Key 0

        byte[] RndB_enc = new byte[8];
        Array.Copy(response, RndB_enc, response.Length);
        ShowBytes(RndB_enc, "RndB_enc");

        // Decrypt RndB_enc to RndB
        var RndB = decryptor.TransformFinalBlock(RndB_enc, 0, RndB_enc.Length);
        ShowBytes(RndB, "RndB");

        // Rotate RndB 1 Byte to the left
        var RndB_rot = RotateLeft(RndB);
        ShowBytes(RndB_rot, "RndB_rot");

        // RndA should be random bytes, instead of hardcoded bytes are here shown
        var RndA = StringToByteArray("84 9B 36 C5 F8 BF 4A 09");
        ShowBytes(RndA, "RndA");

        // Create a DECRYPTED Version of RndA  (Because the Card will ENCRYPT it)
        var RndA_dec = decryptor.TransformFinalBlock(RndA, 0, RndA.Length);
        ShowBytes(RndA_dec, "RndA_dec");

        // XOR RndA_dec with RndB_rot
        var aXb = XorBlocks(RndA_dec, RndB_rot);
        ShowBytes(aXb, "(RndA_dec) xor (RndB_rot)");

        // DECRYPT the XORed value
        var aXb_dec = decryptor.TransformFinalBlock(aXb, 0, aXb.Length);
        ShowBytes(aXb_dec, "Decrypt above result");

        // Concatenate RndA_dec with Xored_dec
        var dataToSend = RndA_dec.Concat(aXb_dec).ToArray();
        ShowBytes(dataToSend, "Data to send");

        // Send the result to the Card and get the response from the card
        status = DataExchange(Instructions.DF_INS_ADDITIONAL_FRAME, 0, 0, dataToSend, out response);

        // Card will return RndA ENCRYPTED
        byte[] RndA_FC_enc = new byte[response.Length];
        Array.Copy(response, RndA_FC_enc, response.Length);

        // DECRYPT the received value from the card
        byte[] RndA_FC_dec = decryptor.TransformFinalBlock(RndA_FC_enc, 0, RndA_FC_enc.Length);

        // Rotate the decrypted value from the card 1 byte right
        byte[] RndA_FC_dec_rot = RotateRight(RndA_FC_dec);

        // Check that the received, decrypted and right-shifted value from the card is egqual to the originial RndA
        if (!IsEqualTo(RndA, RndA_FC_dec_rot))
        {
            throw new Exception($"Error Authenticating CARD. RndA is not equal to RndA_FC_dec_rot");
        }

        SessionKey = new byte[16];
        Array.Copy(RndA, 0, SessionKey, 0, 4);
        Array.Copy(RndB, 0, SessionKey, 4, 4);
        Array.Copy(RndA, 4, SessionKey, 8, 4);
        Array.Copy(RndB, 4, SessionKey, 12, 4);

        tdes.Clear();
        return true;
    }

    private DESFireStatus DataExchange(DesFire.Instructions instruction, byte P1, byte P2, byte[] data, out byte[] response)
    {
        response = null;

        byte[] BufOut = new Byte[512];

        // Create the APDU Command which is sent the CARD
        byte[] apdu = new byte[5];
        apdu[0] = 0x90;                 // APDU-Command Class
        apdu[1] = (byte)instruction;    // APDU-Command Instruction
        apdu[2] = P1;                   // APDU-Command Parameter 1
        apdu[3] = P2;                   // APDU-Command Parameter 2
        if (data != null && data.Length > 0)
        {
            apdu[4] = (byte)data.Length;    // APDU-Command Parameter 3 (Length)
            Array.Resize(ref apdu, 6 + data.Length);    // Increase APDU Command byte array to fit the bytes from data
            Array.Copy(data, 0, apdu, 5, data.Length);  // Copy data bytes into APDU-Command
        }
        else
        {
            apdu[4] = 0x00;             // APDU-Command Parameter 3 (Lenght)
        }

        int bufOutLen = BufOut.Length;      // In-Out Parameter telling the CARD the maximum number of bytes allowed for BufOut, and afterwand reading the total number of bytes the card has returned
        // Send APDU Command to Card
        NativeMethods.ErrorCode erno = NativeMethods.card_PipeX(ref this._card, apdu, apdu.Length, BufOut, ref bufOutLen);
        if (erno != NativeMethods.ErrorCode._NoError)
        {
            throw new Exception($"Error on DataExchange for instruction '{instruction}'. ErrorNumber: '{erno}");
        }

        // Did the card return at least two bytes
        if (bufOutLen >= 2)
        {
            // SW1 should be 0x91
            byte SW1 = BufOut[bufOutLen - 2];

            // SW2 gives the status-message of the last call to the CARD
            DESFireStatus SW2 = (DesFire.DESFireStatus)BufOut[bufOutLen - 1];

            if (bufOutLen > 2)
            {
                // Did the CARD return a value, if so, copy the response from the CARD to the response-output-parameter of this function
                response = new byte[bufOutLen - 2];
                Array.Copy(BufOut, response, bufOutLen - 2);
            }
            return SW2;
        }
        else
        {
            throw new Exception("Invalid response from CARD");
        }
    }

    /// <summary>
    /// Display array of bytes on console
    /// </summary>
    /// <param name="resultArray">bytes to show</param>
    /// <param name="message">optional message to display</param>
    private static void ShowBytes(byte[] resultArray, string message = "")
    {
        Console.Write((message + ": ").PadLeft(20, ' '));
        for (int i = 0; i < resultArray.Length; i++)
            Console.Write("{0:X2} ", resultArray[i]);
        Console.WriteLine();
    }

    /// <summary>
    /// Rotate byte array left by one
    /// </summary>
    /// <param name="source">original byte array</param>
    /// <returns>rotated byte array</returns>
    static byte[] RotateLeft(byte[] source)
    {
        return source.Skip(1).Concat(source.Take(1)).ToArray();
    }

    /// <summary>
    /// Rotate byte array right by one
    /// </summary>
    /// <param name="source">original byte array</param>
    /// <returns>rotated byte array</returns>
    static byte[] RotateRight(byte[] source)
    {
        return source.Skip(source.Length - 1).Concat(source.Take(source.Length - 1)).ToArray();
    }

    /// <summary>
    /// XOR two byte arrays
    /// </summary>
    /// <param name="b1">first byte array</param>
    /// <param name="b2">second byte array</param>
    /// <returns>xor-ed array</returns>
    private static byte[] XorBlocks(byte[] b1, byte[] b2)
    {
        byte[] result = new byte[8];
        for (int i = 0; i <= 7; i++)
        {
            result[i] = (byte)(b1[i] ^ b2[i]);
        }
        return result;
    }

    public static byte[] StringToByteArray(string hex)
    {
        hex = hex.Replace(" ", string.Empty);
        return Enumerable.Range(0, hex.Length)
                         .Where(x => x % 2 == 0)
                         .Select(x => Convert.ToByte(hex.Substring(x, 2), 16))
                         .ToArray();
    }

    [DllImport("msvcrt.dll", CallingConvention = CallingConvention.Cdecl)]
    static extern int memcmp(byte[] b1, byte[] b2, long count);

    public static bool IsEqualTo(byte[] b1, byte[] b2)
    {
        // Validate buffers are the same length.
        // This also ensures that the count does not exceed the length of either buffer.  
        return b1.Length == b2.Length && memcmp(b1, b2, b1.Length) == 0;
    }

}
} 
```

和

```
using System.Reflection;
using System.Security.Cryptography;

namespace DesFireStackOverflow
{
    public static class ExtensionFunctions
    {
    #region TrippleDESCryptoExtensions
        public static ICryptoTransform CreateWeakEncryptor(this TripleDESCryptoServiceProvider cryptoProvider, byte[] key, byte[] iv)
        {
            MethodInfo mi = cryptoProvider.GetType().GetMethod("_NewEncryptor", BindingFlags.NonPublic | BindingFlags.Instance);
            object[] Par = { key, cryptoProvider.Mode, iv, cryptoProvider.FeedbackSize, 0 };
            ICryptoTransform trans = mi.Invoke(cryptoProvider, Par) as ICryptoTransform;
            return trans;
        }
        public static ICryptoTransform CreateWeakEncryptor(this TripleDESCryptoServiceProvider cryptoProvider)
        {
            return CreateWeakEncryptor(cryptoProvider, cryptoProvider.Key, cryptoProvider.IV);
        }
        public static ICryptoTransform CreateWeakDecryptor(this TripleDESCryptoServiceProvider cryptoProvider, byte[] key, byte[] iv)
        {
            return CreateWeakEncryptor(cryptoProvider, key, iv);
        }
        public static ICryptoTransform CreateWeakDecryptor(this TripleDESCryptoServiceProvider cryptoProvider)
        {
            return CreateWeakDecryptor(cryptoProvider, cryptoProvider.Key, cryptoProvider.IV);
        }
        #endregion
    }
} 
```

# c# - Linq动态选择？

> ID：14319323
> 
> 赞同：0
> 
> 时间：2013-01-14T13:28:47.043
> 
> 标签：c#, linq

我有以下代码可以将表转换为它的数据透视表。

```
IQueryable<MeterReadingsForChart> meterReadings = MeterReadingManager.GetCustomerMeterReadings(customer.sno, MeterType, Meter, startDate, endDate, DateTimeManager.GetTimeIntervalTypeById(DateRangeType)).AsQueryable();

// meterReadings Output:
// Customer  Value ReadingTypes
// cust1       235           T1
// cust1       241           T2
// cust1       765           T3
// cust1       247           T4
// cust1       967        Total
// ..........

var table = MeterReadingManager.GetMeterReadingsPivot(meterReadings, MeterType);

// table Output (pivot of meterReadings):
// Customer     T1     T2    T3    T4    Total
// cust1       235    241   765   247      967
// ............ 
```

我有一个 ReadingTypes 的字符串数组：

```
string[] selectedValues = Parameters.Split(','); 
// For example output : { "T1", "Total" } 
```

我想动态获取数据透视列。使用上面的数组。我预期的数据透视表：

```
// filtered pivot from meterReadings pivot Output:
// Customer     T1    Total
// cust1       235      967
// ............ 
```

我怎样才能做到这一点？动态选择还是其他方式？

转换函数也是：

```
return (from m in meterReadings
        group m by new { date = m.ReadDate } into g
        select new
        {
           ReadDate = g.Key.date.ToString("dd.MM.yyyy - HH:mm:ss"),
           T1 = (from t1 in g
                where t1.Name == "T1"
                select t1.Value.ToString("0.00 " + t1.Unit + "")).FirstOrDefault(),
           T2 = (from t2 in g
                where t2.Name == "T2"
                select t2.Value.ToString("0.00 " + t2.Unit + "")).FirstOrDefault(),
           T3 = (from t3 in g
                where t3.Name == "T3"
                select t3.Value.ToString("0.00 " + t3.Unit + "")).FirstOrDefault(),
           Total_T1 = (from t1 in g
                      where t1.Name == "Toplam T1"
                      select t1.Value.ToString("0.00 " + t1.Unit + "")).FirstOrDefault(),
           Total_T2 = (from t1 in g
                       where t1.Name == "Toplam T2"
                       select t1.Value.ToString("0.00 " + t1.Unit + "")).FirstOrDefault(),
           Total_T3 = (from t1 in g
                      where t1.Name == "Toplam T3"
                      select t1.Value.ToString("0.00 " + t1.Unit + "")).FirstOrDefault(),
           Reactive = (from t1 in g
                      where t1.Name == "Reaktif"
                      select t1.Value.ToString("0.00 " + t1.Unit + "")).FirstOrDefault(),
           Capasitive = (from t2 in g
                        where t2.Name == "Kapasitif"
                        select t2.Value.ToString("0.00 " + t2.Unit + "")).FirstOrDefault()
           }).AsQueryable<object>(); 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:03:31.043

我解决了：

```
var table = MeterReadingManager.GetMeterReadingsPivot(meterReadings, MeterType).Select("new (" + Parameters + ")"); 
```

# php - 如何在while循环中使用foreach？

> ID：14319328
> 
> 赞同：0
> 
> 时间：2013-01-14T13:29:06.767
> 
> 标签：php, mysql, foreach

目前我正在使用以下代码来获取按名称开头字母排序的数据，如果您运行此代码，您将得到我想要创建的内容

```
<?php 

$dirs = array('Aname1','Aname2','Aname3','A Nmae','Bname ','Cname','Cardiff','Dname','Dname',);
$cur_let = null;
foreach ($dirs as $dir) {
if ($cur_let !== strtoupper(substr($dir,0,1))){
$cur_let = strtoupper(substr($dir,0,1));
echo "<li class=\"title\">".$cur_let."</li>";
}

echo "<li class=\"clear\">

<div class=\"name\">".$dir."</div>
<div class=\"mobile\"></div>
<div  class=\"telephone\"></div>
<div  class=\"email\"></div>
<div  class=\"action\">edit | delete</div>

<div class=\"clear\"></div>

</li>";

} 
```

但是如何在下面使用上面的循环从数据库中获取值，它应该显示为（我想突出显示第一个字母）[http://i.stack.imgur.com/bLHVD.jpg](http://i.stack.imgur.com/bLHVD.jpg)

```
$query = "SELECT * FROM phone_number"; 

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
    $names =  $row['name'].",";

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:36:42.587

使用 MySQLi：

```
$last_letter = null;

$query = "SELECT name FROM phone_number ORDER BY name";
$sql = $mysqli->query($query);
while($row = $sql->fetch_assoc()) {
  $first_letter = substr(ucfirst($row['name']), 0, 1);
  if($last_letter != $first_letter) {
    $last_letter = $first_letter;
    echo '<div class="letter">', $first_letter, '</div>';
  }

  echo ucwords($row['name']), '<br />';

} 
```

`mysql_*` **不推荐使用的**功能：

```
$last_letter = null;

$query = "SELECT name FROM phone_number ORDER BY name";
$sql = mysql_query($query);
while($row = mysql_fetch_array($sql)) {
  $first_letter = substr(ucfirst($row['name']), 0, 1);
  if($last_letter != $first_letter) {
    $last_letter = $first_letter;
    echo '<div class="letter">', $first_letter, '</div>';
  }

  echo ucwords($row['name']), '<br />';

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:31:26.307

尝试这样的事情：

```
$query = "SELECT * FROM phone_number ORDER BY name DESC";
$result = mysql_query($query) or die(mysql_error());

$lastLetter = '';
$html = '<ul>';
while ($row = mysql_fetch_array($result)) {
    $name = $row['name'];
    if (strtoupper($name[0]) !== $lastLetter) {
        if ($lastLetter !== '')
            $html .= '</ul></li>';
        $lastLetter = strtoupper($name[0]);
        $html .= '<li class="title">' . $lastLetter;
        $html .= '<ul>';
    }
    $html .= '<li>' . $name . '</li>';
}
$html .= '</ul></li></ul>'; 
```

# php - ArrayCollection 中实体的存储库方法

> ID：14319331
> 
> 赞同：0
> 
> 时间：2013-01-14T13:29:16.357
> 
> 标签：php, symfony, repository, entity, arraycollection

所以，我们有两个实体。一个有存储库，另一个没有。当我们试图从另一个表中获取数据时，我们将获取 ArrayCollection 数据。问题是如何调用这个实体存储库方法？这是真的吗？

例子：

```
 $system = $this
            ->getDoctrine()
            ->getEntityManager()
            ->getRepository('SomeBundle:FirstEntity')
            ->findOneByColumnID($id);

    $den = $system->getDataFromSecondTable(); // ArrayCollection of SecondEntity 
```

然后我想使用某种：

```
 $den[0]->functionFromSecondEntityRepository(); 
```

因此，方法“functionFromSecondEntityRepository”位于 SecondEntity 类的存储库中，我无法调用它 - 未定义方法调用“functionFromSecondEntityRepository”时出错。

那么我怎样才能以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:47:37.453

您没有提供太多细节，所以我将在这里举一些例子。

假设您有一个 Entity`FriendsList`和[`One-to-Many`](http://symfony.com/doc/2.0/book/doctrine.html)与 Entity 的关系`Friend`。

```
$List = $this->getDoctrine()
                ->getEntityManager()
                ->getRepository('SomeBundle:FriendsList')
                ->find($id);

// The list you pulled in by ID can now be used
$List->getId();

foreach($List->getFriends() as $Friend)
{
    // Each friend will be output here, you have access
    // to the Friend methods now for each.
    $Friend->getId();
    $Friend->getFirstName();
    $Friend->getLastName();
    $Friend->getDOB();
    $Friend->getFavoriteColor();
} 
```

默认情况下，当您创建关系时，会创建一个获取集合的方法，在此示例`getFriends`中，它返回一个实体数组。生成实体后，查看您的实体模型以查看哪些方法可用。默认情况下，会为实体中的每个属性创建一个，并为集合创建其他属性。

```
SomeCool/Bundle/Entity/FriendsList
Somecool/Bundle/Entity/Friend 
```

如果您使用 YAML 配置，以下是一对多关系的样子。

```
SomeCool\Bundle\Entity\FriendsList:
  type: entity
  table: null
  oneToMany:
    friend:
      targetEntity: Friend
      mappedBy: friendslist
      cascade:  ["persist"]

SomeCool/Bundle/Entity/Friend
  manytoOne:
    friends:
      targetEntity: FriendsList
      mappedBy: friend
      cascade:  ["persist"] 
```

* * *

**访问存储库**

**YAML 配置 (services.yml)**

```
somebundle.bundle.model.friends:
    class: SomeBundle/Bundle/Model/Friends
    arguments: [@doctrine.orm.entity_manager] 
```

**在控制器上**

```
$friendsModel = $this->get('somebundle.bundle.model.friends');
$Friends = $friendsModel->findByFirstName('Bobby');

foreach($Friends as $Friend)
{
    $Friend->getLastName();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:38:55.270

存储库方法在实体中不可用。您需要在您的 AnotherEntity 中使用一个函数来获取 ArrayCollection。IE：

```
class FirstEntity {

   public function getAnotherEntity()
   {
       return $this->anotherEntity;
   }

}

class AnotherEntity 
{
   public function getArrayCollection()
   {
       return $this->myArrayCollection;
   }
}

$firstEntity->getAnotherEntity()->getArrayCollection(); 
```

另一种选择是根据第一个结果获取另一个实体的存储库：

```
$system = $this
        ->getDoctrine()
        ->getEntityManager()
        ->getRepository('SomeBundle:SomeEntity')
        ->findOneByColumnID($id);

$anotherEntity = $system->getAnotherEntity();

$anotherEntityResult = $this->getDoctrine()
                            ->getRepository(get_class($anotherEntity))
                            ->functionFromAnotherEntityRepository($anotherEntity->getId()); 
```

如果使用第二种解决方案，我会确保 $anotherEntity 在尝试检索存储库之前不为空。

# google-apps - 市场应用，使用 OAuth 1.0 还是 2.0？

> ID：14319334
> 
> 赞同：1
> 
> 时间：2013-01-14T13:29:25.607
> 
> 标签：google-apps, google-openid, google-data-api, google-apps-marketplace, google-oauth

我读过的很多关于如何构建 Marketplace 应用程序的文档都告诉我将 OpenID+Oauth 1.0 与 2-Legged 一起使用。但是阅读谷歌文档上有关身份验证的所有其他信息告诉我 OAuth 1.0 已被弃用，不应使用。

那么什么是正确的呢？我应该在 Marketplace 上使用 OAuth 1.0 吗？

PS：澄清一下，我将使用 Google Documents List API version 3.0 API，因为在 Drive SDK 上，基于文件的权限集是不可能知道用户的电子邮件的。在文件的权限集中，只有名称，但我需要用户的电子邮件。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T07:00:14.377

扩展 jonathanberi 的评论，

在这个答案中，谷歌已经弃用了 Oauth1 和 OpenId。Google 建议对所有市场应用程序使用 OAuth2，尤其是在新体验[发布之后](http://googleenterprise.blogspot.in/2013/11/third-party-apps-now-easier-to-find-and.html)

这是一些示例代码

```
 def get(self, *args, **kwargs):

        code = self.get_argument('code', None)

        error = self.get_argument('error',None)

        redirect_uri = "{protocol}://{host}{path}".format( protocol = self.request.protocol,

                                                           host = self.request.host,

                                                           path = self.request.path)

        flow = OAuth2WebServerFlow(

                            client_id    = config['CLIENT_ID'],

                            client_secret= config['CLIENT_SECRET'],

                            scope        = 'https://www.googleapis.com/auth/userinfo.email',

                            redirect_uri = redirect_uri,

                            access_type  = 'online'

                        )
        if code is None:

            auth_uri = flow.step1_get_authorize_url()

            self.redirect(auth_uri)

        elif error:
            self.redirect("http://error.com")

        else:
            credentials = flow.step2_exchange(code)

            http = httplib2.Http()

            http = credentials.authorize(http)

            service = build('oauth2', 'v2', http=http)

            user = service.userinfo().get().execute() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T02:30:34.093

使用 OpenID 的替代方法是让用户可以使用不同类型的帐户（如 facebook、google 等）登录您的应用程序。

[https://developers.google.com/accounts/docs/OpenID?hl=en](https://developers.google.com/accounts/docs/OpenID?hl=en)

如果您想提供这种可能性，您应该使用 OpenID，但如果您只想授予用户 gmail 帐户的权限，则应该只使用 OAuth 授权。

OAuth 1.0 自 2012 年 4 月起正式弃用[https://developers.google.com/accounts/docs/OAuth](https://developers.google.com/accounts/docs/OAuth)

# java - android 4.0/ 4.1.2 的下载问题

> ID：14319335
> 
> 赞同：2
> 
> 时间：2013-01-14T13:29:27.520
> 
> 标签：java, android, download, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

我在使用 android 4.0 或更高版本时遇到问题，我试图从 URL 下载文件，它在 android Galaxy Y 2.3 / 2.2 中运行良好，但是当我对 Galaxy S3(4.1.2) 使用相同的代码时下载开始，但没有完成。

代码：

```
 public void update() {
    Log.d(TAG, "Método para fazer a atualização iniciado.");
    try {
        Log.d(TAG, "Conectando com a internet...");
        URL url = new URL(
                url);
        HttpURLConnection c = (HttpURLConnection) url.openConnection();
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();

        Log.d(TAG, "Iniciando arquivo...");
        String PATH = Environment.getExternalStorageDirectory()
                + "/test/Update/";
        File file = new File(PATH);
        file.mkdirs();
        File outputFile = new File(file, "test.apk");
        FileOutputStream fos = new FileOutputStream(outputFile);

        Log.d(TAG, "Iniciando Stream...");
        InputStream is = c.getInputStream();

        Log.d(TAG, "Iniciando o download...");
        byte[] buffer = new byte[1024];
        int len1 = 0;
        while ((len1 = is.read(buffer)) != -1) {
            fos.write(buffer, 0, len1);
        }
        fos.close();
        is.close();

        Log.d(TAG, "Iniciando instalador...");
        final Intent promptInstall = new Intent(Intent.ACTION_VIEW);
        promptInstall.setDataAndType(Uri.fromFile(new File(PATH + "test.apk")),"application/vnd.android.package-archive");
        promptInstall.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(promptInstall);
        Log.d(TAG, "Instalador iniciado com sucesso!");
    } catch (MalformedURLException e) {
        Log.e(TAG, "Malformed URL. Mensagem: " + e.getMessage()
                + " Causa: " + e.getCause());
    } catch (IOException e) {
        Log.e(TAG, "IOException. Mensagem: " + e.getMessage() + " Causa: "
                + e.getCause());
    } catch (Exception e) {
        Log.e(TAG, "Exception. Mensagem: " + e.getMessage() + " Causa: "
                + e.getCause());
    }
} 
```

Obs：没有错误，它只是开始下载并停止它。文件大小：126,188 字节，在 Galaxy S3 中为 6,403 字节

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:00:06.090

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)提出您的请求。

> AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:39:55.770

您可能在主线程上进行网络操作，StrictMode 不允许这样做。

# azure - Azure Blob 存储 - 自动生成唯一的 Blob 名称

> ID：14319340
> 
> 赞同：7
> 
> 时间：2013-01-14T13:29:43.370
> 
> 标签：azure, naming, azure-blob-storage, auto-generate

我正在为 Windows Azure 编写一个小型 Web 应用程序，它显然应该使用 blob 存储来存储 blob。

是否有一种功能或方法可以在插入时自动为 blob 生成唯一名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T13:40:54.880

您可以为此使用[Guid](http://blogs.msdn.com/b/oldnewthing/archive/2008/06/27/8659071.aspx)：

```
string blobName = Guid.NewGuid().ToString(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T14:41:22.147

除了**Sandrino**所说的（使用*被复制的可能性非常低的*GUID ），您可以考虑一些生成无冲突标识符的第三方库示例：[Flake ID Generator](http://flakeidgenerators.codeplex.com/)

**编辑**

**Herve**指出了非常有效的 Azure Blob 功能，任何 blob 名称都应考虑该功能，即*Azure 存储负载平衡和 blob 分区*。

Azure 将所有 blob 保留在分区服务器中。应该使用哪个分区服务器来存储特定的 blob 取决于 blob 容器和 blob 文件名。不幸的是，我无法找到描述用于 blob 分区的算法的文档。

有关 Azure Blob 体系结构的更多信息，请参阅[Windows Azure 存储体系结构概述](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/12/30/windows-azure-storage-architecture-overview.aspx)文章。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T18:21:41.723

没有什么会在“插入”时生成唯一名称；你需要提前想出名字。

选择 blob 的名称时，在使用任何生成某种序列号的算法时要小心（在 blob 名称的开头或结尾）。Azure 存储依赖于负载平衡的名称；使用顺序值可能会在访问/写入 Azure Blob 时产生争用，因为它会阻止 Azure 正确地负载平衡其存储。您在每个节点（即服务器）上获得 60MB/秒。因此，为了确保正确的负载平衡并在多个存储节点上利用 60MB/秒，您需要为 blob 使用随机名称。正如 Sandrino 所推荐的那样，我通常使用 Guids 来避免这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-25T16:16:29.947

这是一篇旧帖子，但它是“azure storage blob unique id”搜索出现的第一个热门。

看起来“ **metadata_storage_path** ”生成的属性是唯一的，但它不可过滤，因此它可能对某些用途没有用。

[![在此处输入图像描述](../Images/17a15eb2c6a208517cad06b98a0ddb84.png)](https://i.stack.imgur.com/6HkGQ.png)

[![在此处输入图像描述](../Images/452c6423dea7dd10f938e7ea53806a09.png)](https://i.stack.imgur.com/oeE4u.png)

# c++ - 覆盖新运算符时 std::mutex 锁挂起

> ID：14319344
> 
> 赞同：5
> 
> 时间：2013-01-14T13:29:47.520
> 
> 标签：c++, multithreading, c++11, visual-studio-2012, mutex

我们有一个内部内存管理器，可用于我们的一种产品。内存管理器覆盖`new`and`delete`运算符，并且在单线程应用程序中工作正常。但是，我现在的任务是让它也适用于多线程应用程序。据我了解，以下伪代码应该可以工作，但即使使用`try_lock()`. 有任何想法吗？

**更新#1**

导致“访问冲突”：

```
#include <mutex>

std::mutex g_mutex;

/*!
\brief Overrides the Standard C++ new operator
\param size [in] Number of bytes to allocate
*/
void *operator new(size_t size)
{
   g_mutex.lock(); // Access violation exception
   ...   
} 
```

导致线程在旋转中永远挂起：

```
#include <mutex>

std::mutex g_mutex;
bool g_systemInitiated = false;

/*!
\brief Overrides the Standard C++ new operator
\param size [in] Number of bytes to allocate
*/
void *operator new(size_t size)
{
   if (g_systemInitiated == false) return malloc(size);
   g_mutex.lock(); // Thread hangs forever here. g_mutex.try_lock() also hangs
   ...   
}

int main(int argc, const char* argv[])
{
   // Tell the new() operator that the system has initiated
   g_systemInitiated = true;
   ...
} 
```

**更新#2**

递归互斥锁还会导致线程在自旋中永远挂起：

```
#include <mutex>

std::recursive_mutex g_mutex;
bool g_systemInitiated = false;

/*!
\brief Overrides the Standard C++ new operator
\param size [in] Number of bytes to allocate
*/
void *operator new(size_t size)
{
   if (g_systemInitiated == false) return malloc(size);
   g_mutex.lock(); // Thread hangs forever here. g_mutex.try_lock() also hangs
   ...   
}

int main(int argc, const char* argv[])
{
   // Tell the new() operator that the system has initiated
   g_systemInitiated = true;
   ...
} 
```

**更新#3**

Jonathan Wakely 建议我应该尝试`unique_lock`和/或`lock_guard`，但锁仍然挂起。

`unique_lock`测试：

```
#include <mutex>

std::mutex g_mutex;
std::unique_lock<std::mutex> g_lock1(g_mutex, std::defer_lock);
bool g_systemInitiated = false;

/*!
\brief Overrides the Standard C++ new operator
\param size [in] Number of bytes to allocate
*/
void *operator new(size_t size)
{
   if (g_systemInitiated == false) return malloc(size);
   g_lock1.lock(); // Thread hangs forever here the first time it is called
   ...   
}

int main(int argc, const char* argv[])
{
   // Tell the new() operator that the system has initiated
   g_systemInitiated = true;
   ...
} 
```

`lock_guard`测试：

```
#include <mutex>

std::recursive_mutex g_mutex;
bool g_systemInitiated = false;

/*!
\brief Overrides the Standard C++ new operator
\param size [in] Number of bytes to allocate
*/
void *operator new(size_t size)
{
   if (g_systemInitiated == false) return malloc(size);
   std::lock_guard<std::mutex> g_lock_guard1(g_mutex); // Thread hangs forever here the first time it is called
   ...   
}

int main(int argc, const char* argv[])
{
   // Tell the new() operator that the system has initiated
   g_systemInitiated = true;
   ...
} 
```

我认为我的问题是`delete`在锁定时由 C++ 11 互斥库调用。`delete`也像这样被覆盖：

```
/*!
\brief Overrides the Standard C++ new operator
\param p [in] The pointer to memory to free
*/
void operator delete(void *p)
{
    if (g_systemInitiated == false)
    {
       free(p); 
    }
    else
    {
       std::lock_guard<std::mutex> g_lock_guard1(g_mutex);
       ...
    }
} 
```

这会导致死锁情况，我看不到任何好的解决方案，除了我自己的锁定不会产生任何调用`new`或`delete`锁定或解锁时。

**更新#4**

我已经实现了我自己的自定义递归互斥锁，它没有调用`new`or `delete`，而且它允许同一个线程进入一个锁定的块。

```
#include <thread>

std::thread::id g_lockedByThread;
bool g_isLocked = false;
bool g_systemInitiated = false;

/*!
\brief Overrides the Standard C++ new operator
\param size [in] Number of bytes to allocate
*/
void *operator new(size_t size)
{
   if (g_systemInitiated == false) return malloc(size);

   while (g_isLocked && g_lockedByThread != std::this_thread::get_id());
   g_isLocked = true; // Atomic operation
   g_lockedByThread = std::this_thread::get_id();
   ...   
   g_isLocked = false;
}

/*!
\brief Overrides the Standard C++ new operator
\param p [in] The pointer to memory to free
*/
void operator delete(void *p)
{
    if (g_systemInitiated == false)
    {
       free(p); 
    }
    else
    {
       while (g_isLocked && g_lockedByThread != std::this_thread::get_id());
       g_isLocked = true; // Atomic operation
       g_lockedByThread = std::this_thread::get_id();
       ...   
       g_isLocked = false;
    }
}

int main(int argc, const char* argv[])
{
   // Tell the new() operator that the system has initiated
   g_systemInitiated = true;
   ...
} 
```

**更新#5**

尝试了 Jonathan Wakely 的建议，发现微软的 C++ 11 Mutexes 实现似乎肯定有问题；`/MTd`如果使用(Multi-threaded Debug) 编译器标志编译，他的示例会挂起，但如果使用`/MDd`(Multi-threaded Debug DLL) 编译器标志编译，则可以正常工作。正如乔纳森正确指出的那样，`std::mutex`实现应该是`constexpr`'s. 这是我用来测试实现问题的 VS 2012 C++ 代码：

```
#include "stdafx.h"

#include <mutex>
#include <iostream>

bool g_systemInitiated = false;
std::mutex g_mutex;

void *operator new(size_t size)
{
    if (g_systemInitiated == false) return malloc(size);
    std::lock_guard<std::mutex> lock(g_mutex);
    std::cout << "Inside new() critical section" << std::endl;
    // <-- Memory manager would be called here, dummy call to malloc() in stead
    return malloc(size);
}

void operator delete(void *p)
{
    if (g_systemInitiated == false) free(p); 
    else
    {
        std::lock_guard<std::mutex> lock(g_mutex);
        std::cout << "Inside delete() critical section" << std::endl;
        // <-- Memory manager would be called here, dummy call to free() in stead
        free(p);
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    g_systemInitiated = true;

    char *test = new char[100];
    std::cout << "Allocated" << std::endl;
    delete test;
    std::cout << "Deleted" << std::endl;

    return 0;
} 
```

**更新 #6**

向 Microsoft 提交了错误报告： [https ://connect.microsoft.com/VisualStudio/feedback/details/776596/std-mutex-not-a-constexpr-with-mtd-compiler-flag#details](https://connect.microsoft.com/VisualStudio/feedback/details/776596/std-mutex-not-a-constexpr-with-mtd-compiler-flag#details)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:08:10.367

mutex 库默认使用`new`，并且 std::mutex*不是*递归的（即可重入的）。鸡和蛋的问题。

**更新**正如在下面的评论中所指出的，使用 std::recursive_mutex 可能有效。但是，没有很好地定义全局变量的静态初始化顺序的经典 C++ 问题仍然存在，外部访问全局互斥体的危险仍然存在（最好将其放在匿名命名空间中。）

**更新 2**您可能过早地将 g_systemInitiated 切换为 true，即在互斥锁有机会完成其初始化之前，因此“首次通过”调用`malloc()`永远不会发生。要强制执行此操作，您可以尝试将 main() 中的赋值替换为调用分配器模块中的初始化函数：

```
namespace {
    std::recursive_mutex    g_mutex;
    bool                    g_initialized = false;
}
void initialize()
{
    g_mutex.lock();
    g_initialized = true;
    g_mutex.unlock();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:41:17.903

除了第一个示例外，您的所有示例都已损坏，这对于不使用作用域锁类型来说是非常糟糕的做法。

如果您的编译器或标准库没有损坏，这应该可以工作：

```
#include <mutex>

std::mutex g_mutex;

void *operator new(size_t size)
{
   std::lock_guard<std::mutex> lock(g_mutex);
   ...   
} 
```

# ruby-on-rails - @Ruby on Rails 中的变量

> ID：14319347
> 
> 赞同：339
> 
> 时间：2013-01-14T13:29:59.530
> 
> 标签：ruby-on-rails, ruby, variables

`@title`和有什么区别`title`？因为它们都可以是变量名。另外，我如何决定应该使用哪种变量？有`@`还是没有？

* * *

## 回答 #1

> 赞同：501
> 
> 时间：2013-01-14T13:40:30.227

`title`是一个局部变量。它们只存在于其范围内（当前块）

`@title`是一个实例变量 - 并且可用于类中的所有方法。

你可以在这里阅读更多：http: [//strugglingwithruby.blogspot.dk/2010/03/variables.html](http://strugglingwithruby.blogspot.dk/2010/03/variables.html)

在 Ruby on Rails 中 - 将控制器中的变量声明为实例变量 ( `@title`) 使它们可用于您的视图。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-01-14T13:40:48.300

`@title`当您希望变量在视图中可用时，请在控制器中使用。

解释是这`@title`是一个实例变量，`title`而是一个局部变量。Rails 使来自控制器的实例变量对视图可用，因为模板代码（erb、haml 等）在当前控制器实例的范围内执行。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2019-03-27T08:01:38.637

关于[什么是变量作用域的教程？](http://www.troubleshooters.com/codecorn/ruby/symbols.htm#_What_do_symbols_look_like)一些细节表现得很好，这里只附上相关的。

```
 +------------------+----------------------+
| Name Begins With |    Variable Scope    |
+------------------+----------------------+
| $                | A global variable    |
| @                | An instance variable |
| [a-z] or _       | A local variable     |
| [A-Z]            | A constant           |
| @@               | A class variable     |
+------------------+----------------------+ 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-01-14T13:33:59.730

区别在于变量的范围。@version 可用于类实例的所有方法。

简短的回答是，如果您在控制器中并且需要使变量对视图可用，则使用`@variable`.

对于更长的答案，试试这个：[http ://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_classes.html](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_classes.html)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-07-04T13:44:41.650

`@variable`s 在 ruby​​ 中被称为实例变量。这意味着您可以在类内的任何方法中访问这些变量。[跨类中的所有方法]

没有`@`符号的变量称为局部变量，这意味着您只能在 THAT DECLARED METHOD 中访问这些局部变量。限于本地范围。

实例变量示例：

```
class Customer
  def initialize(id, name, addr)
    @cust_id = id
    @cust_name = name
    @cust_addr = addr
  end

  def display_details
    puts "Customer id #{@cust_id}"
    puts "Customer name #{@cust_name}"
    puts "Customer address #{@cust_addr}"
  end
end 
```

在上面的示例`@cust_id`中，`@cust_name`,`@cust_addr`是在类中的另一个方法中访问的。但是使用局部变量将无法访问相同的内容。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-12-09T09:33:06.357

局部变量只能从它的初始化块中访问。局部变量也以小写字母 (az) 或下划线 (_) 开头。

并且实例变量是一个实例，`self`并且以一个开头，`@`而且一个实例变量属于对象本身。实例变量是您对 ie`.send`等执行方法的变量

例子：

```
@user = User.all 
```

是`@user`实例变量

并且未初始化的实例变量的值为`Nil`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-14T13:33:09.620

@变量是实例变量，没有是局部变量。

[在http://ruby.about.com/od/variables/a/Instance-Variables.htm](http://ruby.about.com/od/variables/a/Instance-Variables.htm)阅读更多信息

# java - 我应该生成异常消息吗？

> ID：14319349
> 
> 赞同：1
> 
> 时间：2013-01-14T13:30:04.817
> 
> 标签：java, exception

我应该生成异常消息（在我的示例中来自`link`参数）还是我的构造函数应该接受`message`参数？

```
class ReadFromNotConnectedInputException extends RuntimeException {

    private String link;

    public ReadFromNotConnectedInputException(final String link)
    {
        this.link = link;
    }

    public String getLink()
    {
        return link
    }

    public String getMessage()
    {
        return String.format("Cannot read from link \"%\", link not connected.", link);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:39:53.890

我会像下面这样写。但是，如果我努力创建一个异常，我会将其设为已检查异常。

```
class ReadFromNotConnectedInputException extends RuntimeException {
    private final String link;

    public ReadFromNotConnectedInputException(final String link) {
        super("Cannot read from link \"" + link + "\", link not connected.");
        this.link = link;
    }

    public String getLink() {
        return link
    }
} 
```

或者

```
class ReadFailedLinkNotConnectedException extends Exception {
    public ReadFailedLinkNotConnectedException (final String link) {
        super(link);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:38:24.787

由于您选择了 a `RuntimeException`，这意味着您不打算在本地处理它（靠近它被抛出的位置），而是在堆栈中的某个更高级别处理许多不同的异常。

在这种情况下，将不涉及特定于异常的逻辑；您将在日志文件中写入一个错误条目并进行清理。因此，一个简单的`message`属性比单独的 String 属性 + 一个复杂的`getMessage`实现更符合要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:35:01.817

您应该接受`message`参数并调用超级构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:37:24.927

IMO 如果异常是**API**的一部分，那么您应该在构造函数中获取消息参数并将其传递给超级。

这样做的主要优点是您可以更改来自不同模块的消息格式，如果您保持固定格式，那么所有模块都将使用相同的格式。

# jquery-mobile - 带有文本的插入列表

> ID：14319356
> 
> 赞同：1
> 
> 时间：2013-01-14T13:30:23.033
> 
> 标签：jquery-mobile

我想做一个像这样的漂亮布局表：http: [//jquerymobile.com/demos/1.2.0/docs/lists/lists-forms-inset.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-forms-inset.html)

左侧的文本标签，然后在右侧对齐输入/信息。

当我插入输入、选择等时，它在右侧正确对齐。但是我不确定如何插入简单的文本，使其在右侧正确对齐。我需要用 <> 标记来包围我的文本，以便正确对齐吗？

感谢您的帮助。

```
<ul data-role="listview" data-inset="true">
    <li data-role="fieldcontain">
        <label for="name">Text Input:</label>
        <input type="text" name="name" id="name" value=""  />
    </li>
    <li data-role="fieldcontain">
        <label for="textarea">Textarea:</label>
        THE TEXT I WOULD LIKE TO SEE RIGHT-ALIGNED.
    </li>
</ul> 
```

这是一个例子：[https ://tinker.io/71d3c/1](https://tinker.io/71d3c/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:42:44.137

您应该像这样添加一个类**ui-input-text**：

```
<label for="textarea" class="ui-input-text">Textarea:</label>
THE TEXT I WOULD LIKE TO SEE RIGHT-ALIGNED. 
```

这是一个例子：http: [//jsfiddle.net/YA8f6/](http://jsfiddle.net/YA8f6/)

**编辑：**

这是一个右对齐的例子：http: [//jsfiddle.net/DqD7X/](http://jsfiddle.net/DqD7X/)

# build - Launch4j / windres：如何正确设置路径？

> ID：14319358
> 
> 赞同：4
> 
> 时间：2013-01-14T13:30:25.363
> 
> 标签：build, path, launch4j

我为我的项目配置了 launch4j。当我在 windowsXP 上开发时，我使用了它，它在那里工作。现在我也需要它在 mac 上构建：

我的 build.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create-exe">

    <property name="platform" value="win32"/>
    <property name="launch4j.dir" location="${basedir}/tools/launch4j/" />

    <include file="create-jar.xml" as="sub"/>

    <target name="create-exe" depends = "sub.create-jar">
        <launch4j configFile="launch4j-config.xml" />
        <delete file="client.win32.jar"/>
    </target>

    <taskdef name="launch4j" classname="net.sf.launch4j.ant.Launch4jTask">
        <classpath>
            <pathelement path="tools/launch4j/launch4j.jar"/>
            <pathelement path="tools/launch4j/lib/xstream.jar"/>
        </classpath>
    </taskdef>
</project> 
```

我得到以下输出：

```
create-exe:
 [launch4j] Compiling resources
 [launch4j] Generated resource file...
 [launch4j] LANGUAGE 0, 1
 [launch4j] 2 RCDATA BEGIN "1.6.0\0" END
 [launch4j] 18 RCDATA BEGIN "0\0" END
 [launch4j] 25 RCDATA BEGIN "512\0" END
 [launch4j] 27 RCDATA BEGIN "1024\0" END
 [launch4j] 21 RCDATA BEGIN "http://java.com/download\0" END
 [launch4j] 20 RCDATA BEGIN "32\0" END
 [launch4j] 9 RCDATA BEGIN "true\0" END
 [launch4j] 101 RCDATA BEGIN "An error occurred while starting the application.\0" END
 [launch4j] 102 RCDATA BEGIN "This application was configured to use a bundled Java Runtime Environment but the runtime is missing or corrupted.\0" END
 [launch4j] 103 RCDATA BEGIN "This application requires a Java Runtime Environment\0" END
 [launch4j] 104 RCDATA BEGIN "The registry refers to a nonexistent Java Runtime Environment installation or the runtime is corrupted.\0" END
 [launch4j] 17 RCDATA BEGIN "true\0" END

BUILD FAILED
/Users/fabian/dev/rsys-client/create-win32-exe.xml:9: net.sf.launch4j.BuilderException: net.sf.launch4j.ExecException: java.io.IOException: Cannot run program "./bin/windres": error=2, No such file or directory 
```

当我添加`bindir="tools/launch4j/bin"`到launch4j-execution时，找到了ld和windres，输出变为：

```
create-exe:
 [launch4j] Compiling resources
 [launch4j] Linking
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./w32api/crt2.o: No such file or directory
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./head/guihead.o: No such file or directory
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./head/head.o: No such file or directory
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./w32api/libmingw32.a: No such file or directory
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./w32api/libgcc.a: No such file or directory
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./w32api/libmsvcrt.a: No such file or directory
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./w32api/libkernel32.a: No such file or directory
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./w32api/libuser32.a: No such file or directory
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./w32api/libadvapi32.a: No such file or directory
 [launch4j] /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld: cannot find ./w32api/libshell32.a: No such file or directory

BUILD FAILED
/Users/fabian/dev/rsys-client/create-win32-exe.xml:9: net.sf.launch4j.BuilderException: net.sf.launch4j.ExecException: Exec failed (1): /Users/fabian/dev/rsys-client/tools/launch4j/bin/ld -mi386pe --oformat pei-i386 --dynamicbase --nxcompat --no-seh --subsystem windows -s ./w32api/crt2.o ./head/guihead.o ./head/head.o /var/folders/n5/44dkvyzd00z0h5mklk_pwtch0000gn/T/launch4j3026065429236284429o ./w32api/libmingw32.a ./w32api/libgcc.a ./w32api/libmsvcrt.a ./w32api/libkernel32.a ./w32api/libuser32.a ./w32api/libadvapi32.a ./w32api/libshell32.a -o /Users/fabian/dev/rsys-client/Kassa.exe

Total time: 6 seconds 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-13T02:52:30.173

对于那些经历过：

```
error=2, No such file or directory 
```

在 64 位 Linux 上运行**windres**时出现问题，您需要安装 32 位库。在 Linux Mint 上，我安装了 ia32-libs 包：

```
sudo apt-get install ia32-libs 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T23:54:51.873

正如 Leo 所指出的，当您的当前目录不是 launch4j 目录时会发生此错误。

Launch4j 尝试通过查看launch4j.properties 的类路径来找到它自己的安装目录。这是在 Util.java 中完成的，位于 getJarBaseDir() 方法的顶部。最近更改为具有以下几行：

```
URI uri = new URI(Util.class.getClassLoader()
    .getResource(Launch4jProperties)
    .getFile());

String path = uri.getPath();

if (path.startsWith("file:")) {
  String jarPath = path.substring(5,path.lastIndexOf('!')); 
```

问题是 uri.getPath() 不返回本地文件 URI 的“file:”部分——它只返回以 / 开头的 URI 的路径部分。我将最后两行更改为此，它开始工作：

```
if (path.startsWith("/")) {
  String jarPath = path.substring(0, path.lastIndexOf('!')); 
```

注意子字符串中的 5 -> 0 因为我们不再需要删除“file:”部分。为了编译launch4j，我不得不将build.xml.prod 重命名为build.xml，但除此之外它工作得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T14:58:54.823

我遇到了同样的问题，无法正确设置路径/类路径，但作为一种解决方法，我在 launch4j 目录中创建了 Ant 构建，并且能够让它生成可执行文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-27T10:51:59.887

我也遇到了这个问题，我通过修改 launch4j 代码解决了这个问题。
在 Class Launch4JTask.java 我替换了这一行

```
final Builder b = new Builder(Log.getAntLog()); 
```

有了这个

```
final Builder b = new Builder(Log.getAntLog(), new File(getOwningTarget().getProject().getProperty("launch4j.bindir"))); 
```

通过此更改，我可以像这样在我的 ant 构建脚本中指定 Launch4j 的路径

```
<property name="launch4j.bindir" location="../tools/launch4j/" /> 
```

问候，-克里斯-

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-07T07:52:15.917

我在 Maven 中构建 launch4j 时遇到了类似的问题：

```
...
[INFO] launch4j: (longPathIn.m2Repository)\windres.exe: can't popen `type  (longPathToTemp)\Temp\launch4j8580185391499327059rc': No error
[ERROR] 
net.sf.launch4j.BuilderException: net.sf.launch4j.ExecException: Exec failed(1): [Ljava.lang.String;@9f1fb5
at net.sf.launch4j.Builder.build(Builder.java:145)
... 
```

清理系统变量 ComSpec 后开始正常工作：

```
was: ComSpec=%SystemRoot%\system32\cmd.exe;c:\Program Files (x86)\NSIS\NSIS.exe
now: ComSpec=%SystemRoot%\system32\cmd.exe 
```

似乎 NSIS 将自己插入那里，而不是我。

# jquery - 一个 div 与另一个 div 的覆盖在鼠标悬停时不起作用

> ID：14319363
> 
> 赞同：0
> 
> 时间：2013-01-14T13:30:41.763
> 
> 标签：jquery, html, css

我在 2x3 的矩阵中显示文章，我在包装器 div 中包装文章详细信息图像、标题、作者和 Desc，我希望整个 div 与包含一个图像的另一个相同尺寸的 div 重叠。

我试过但它不适合我下面是我正在处理的部分代码

```
 <div id="article2x3-article-wrapperHP">
      <div id="article2x3-image">
         <img src="../images/article/3897b78e-6770-4cf0-a8e5-8638e733c0f4.jpg" class="imgArticle2x3Image" />
      </div>
      <div id="article2x3-title">
         <span class="lblArticle2x3Title" >Article Title </span>
      </div>
      <div id="article2x3-author">
         <span class="lblArticle2x3Author" >by Author XYZ</span>
      </div>
      <div id="article2x3-desc">
         <span class="lblArticle2x3Desc" >Some Description of teh article wil do here</span>
      </div>
     <div class="overlay2x3"><img alt="google" src="http://www.google.com/images/logos/ps_logo2.png" /></div>
   </div>

   <div id="article2x3-article-wrapperHP"  >
      <div class="overlay2x3"><img alt="google" src="http://www.google.com/images/logos/ps_logo2.png" /></div>

      <div id="article2x3-image">
         <img src="../images/article/0e7207e6-d5e6-4f10-9224-988fe0ca338e.png" class="imgArticle2x3Image" />
      </div>
      <div id="article2x3-title">
         <span class="lblArticle2x3Title" >Article Title</span>
      </div>
      <div id="article2x3-author">
         <span class="lblArticle2x3Author" >>by Author XYZ<</span>
      </div>
      <div id="article2x3-desc">
         <span class="lblArticle2x3Desc" >>Some Description of teh article wil do here</span>
      </div>
   </div>

$("#article2x3-outer-wrapperHP").hover(
    function(){$(this).find(".overlay2x3").stop(true, true).fadeIn(500)},
    function(){$(this).find(".overlay2x3").stop(true, true).fadeOut(500)}
); 
```

[jsFiddle](http://jsfiddle.net/4qeqm/8/)上的完整代码

我不知道为什么悬停没有触发，我会感谢这方面的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:52:54.220

它会起作用，但您需要定位各种 div：请参阅[http://jsfiddle.net/4qeqm/9/](http://jsfiddle.net/4qeqm/9/)

覆盖 div 必须绝对定位，包装器必须有`position: relative;`.

编辑：请检查您的 HTML，您在不同的元素上使用相同的 ID。这会产生问题。尝试对类似对象使用类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:57:44.657

“#article2x3-outer-wrapperHP”的选择器是这里的主要问题，你定义了两次。放弃使用 ID 并转向类：

[http://jsfiddle.net/e54cz/](http://jsfiddle.net/e54cz/)

HTML

```
 <div class="article2x3-article-wrapperHP">
      <div class="article2x3-image">
         <img src="https://twimg0-a.akamaihd.net/profile_images/2788088920/ddc41d50d200366d3fbcb4483ee2154e.jpeg" class="imgArticle2x3Image" />
      </div>
      <div class="article2x3-title">
         <span class="lblArticle2x3Title" >Article Title </span>
      </div>
      <div class="article2x3-author">
         <span class="lblArticle2x3Author" >by Author XYZ</span>
      </div>
      <div class="article2x3-desc">
         <span class="lblArticle2x3Desc" >Some Description of teh article wil do here</span>
      </div>
     <div class="overlay2x3"><img alt="google" src="http://upload.wikimedia.org/wikipedia/en/6/61/Apple_Safari.png" /></div>
   </div>

   <div class="article2x3-article-wrapperHP"  >
      <div class="overlay2x3"><img alt="google" src="http://upload.wikimedia.org/wikipedia/en/6/61/Apple_Safari.png" /></div>

      <div class="article2x3-image">
         <img src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcRLU7TVcauaFMxvO9VVqi82GHljZECxqxT6RvZ6Q7KQ1nlD4wC7nv1ATgE" class="imgArticle2x3Image" />
      </div>
      <div class="article2x3-title">
         <span class="lblArticle2x3Title" >Article Title</span>
      </div>
      <div class="article2x3-author">
         <span class="lblArticle2x3Author" >>by Author XYZ<</span>
      </div>
      <div class="article2x3-desc">
         <span class="lblArticle2x3Desc" >>Some Description of teh article wil do here</span>
      </div>
   </div> 
```

CSS

```
.article2x3-article-wrapperHP {
float:left;
width:233px;
height:324px;
vertical-align:middle;
margin-right:25px;
overflow:hidden;
background-color: #f5f5f5;
}
.overlay2x3
{
    height:324px;
    width:233px;
    background-color:Red;
    display:none;
    padding:0px;
  z-index:1000;
}
.article2x3-image
{
    margin-top:10px;
    margin-bottom:10px;
    width:233px;
    height:155px;
    overflow:hidden;

}
.article2x3-title
{
    min-height:20px;
    max-height:36px;
    margin:10px 0 0 0;
    width:230px;
    overflow:hidden;

    font-size:14px;
}
#article2x3-author
{
    height:14px;
    margin:0 0 5px 0;
    width:230px;
    overflow:hidden;
     font-size:10px;
     font-style:italic;
     color:Gray
}
.article2x3-desc
{
    height:100px;
    margin:0 0 10px 0;
    width:230px;
    overflow:hidden;
     font-size:12px;
     border:0px solid #f5f5f5;
     text-align:justify;
}
.imgArticle2x3Image
{
    width:230px;
    border:0px;
    -moz-box-shadow: 1px 2px 3px #777;
    -webkit-box-shadow: 1px 2px 3px #777;
    box-shadow: 1px 2px 3px #999;
} 
```

# c# - WCF 自托管所需的组件？

> ID：14319366
> 
> 赞同：4
> 
> 时间：2013-01-14T13:30:48.390
> 
> 标签：c#, .net, installation

我的服务（TCP）之前在 IIS7 中安装了 bin，这是对此的要求：

```
Internet  Information Services
- Web Management Tools (all)
- Wold Wide Web Services
-- Application Development Features (all - CGI)
-- Common Http Features (all)
-- Health and Diagnostics
--- HTTP Logging
--- Request Monitor
-- Performance Features
--- Static Content Compression
-- Security
--- Basic Authentication
--- Client Certificate Mapping Authentication
--- IIS Client Certificate Mapping Authentication
--- Request Filtering
--- URL Authorization
--- Windows Authentication
Microsoft .NET framework 3.0
- Windows Communication Foundation HTTP Activation (for WAS)
- Windows Communication Foundation Non-HTTP Activation
Windows Process Activation Service
- .NET Environment
- Configuration APIs
- Process Model 
```

现在我已更改为 .NET WCF Selfhost，这让我想知道需要哪些组件？我可以删除 Internet 信息服务和 Windows 进程激活服务，这是真的吗？

我只需要保留 .NET 框架 X.0 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:31:16.727

WCF 自托管绝对不需要 IIS 或任何其他服务。它只需要支持 WCF 的 .NET Framework 版本（3.5 及更高版本）。TCPBinding 支持多种功能，包括可靠性、事务和安全性。

**框架** ——.Net 3.5 或更高版本。

**安全性** ——基本/Windows 身份验证。

**访问**
-- 创建代理 (svcutil/Channelfactory) 足以访问 Selfhosted wcf 服务。

**其他** ——不需要 IIS 或任何其他服务

希望这有帮助..[在这里](http://msdn.microsoft.com/en-us/library/ff647180.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:37:58.693

是的，WCF 自托管意味着自托管。您不依赖于 IIS 或 WPA。

[在 msdn 上](http://msdn.microsoft.com/en-us/library/ms731758.aspx)查看此链接。您使用第 8 点中提到的 ServiceHost 来制作实际的托管组件。

下面是一个将 WCF 服务作为 HTTP 服务自托管的片段。

```
 var baseAddress = new Uri("http://localhost:3124/");
  var host = new WebServiceHost(typeof(SSOUser), baseAddress);
  var sep = host.AddServiceEndpoint(typeof(ISSOUser), new WebHttpBinding(), "");
  sep.Behaviors.Add(new WebHttpBehavior());
  host.Open(); 
```

与 IIS 托管等相比，您可能会错过的是，您需要将服务主机放在正在运行的应用程序或 Windows 服务中，以使其连续侦听端点。但这可能不会让你感到惊讶:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:32:37.770

任何附加组件。wcf selfhost 仅需要框架 3/3.5/4/4.5

# build - 尝试构建 LLVM 和 Clang 时出现问题

> ID：14319370
> 
> 赞同：0
> 
> 时间：2013-01-14T13:31:17.463
> 
> 标签：build, compiler-errors, llvm, clang

我尝试构建 LLVM 和 Clang，但收到此错误：

> cp：cp：cp：无法统计`/home/saurabh/Build/clang-build/build/tools/clang/runtime/compiler-rt/clang_linux/asan-i386/libcompiler_rt.a'cannot stat`/home/saurabh/Build/clang-build/build/tools/clang/runtime/compiler-rt/clang_linux/ubsan-x86_64/libcompiler_rt.a'无法统计`/home/saurabh/Build /clang-build/build/tools/clang/runtime/compiler-rt/clang_linux/ubsan-i386/libcompiler_rt.a'：没有这样的文件或目录：没有这样的文件或目录：没有这样的文件或目录

我经历了[无法构建 LLVM 和 Clang](https://stackoverflow.com/questions/9177633/cannot-build-llvm-and-clang)，但似乎没有任何原因导致他出现类似错误（因此我再次询问）。我试图删除 compiler-rt/make/ 相关文件中的 -Werror 标志，因为在此之前，它在此错误上停止：

> /home/saurabh/Build/clang-build/llvm/projects/compiler-rt/lib/tsan/rtl/tsan_mutex.cc:53:13：错误：常量 4294967295 与“int”类型表达式的比较总是错误的 [ -Werror,-Wtautological-constant-out-of-range-compare] if (z == MutexTypeLeaf) { ~ ^ ~~~~~~~~~~~~~ 1个错误产生。

我曾在#llvm 上问过，并有人建议我这样做。有什么想法可能导致这种情况吗？Fwiw，我在 Ubuntu 12.10 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:20:55.610

我的 LD_LIBRARY_PATH 环境变量设置不正确。我改正后，这个问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:15:23.443

您必须遵循[http://llvm.org/docs/GettingStarted.html#getting-started-quickly-a-summary](http://llvm.org/docs/GettingStarted.html#getting-started-quickly-a-summary)。请注意您必须安装的软件依赖项。另外，再次检查您的 --prefix=directory 是否已设置。如果您无法通过 LLVM 安装 Clang（在您成功安装 LLVM 之后），您可以尝试使用 apt-get install clang 和 clang++ 安装它。因此，您可以使用这个 clang 编译您的 LLVM 通行证。对于其他对应的包，比如 VMkit for Java，你必须安装 ant 和 oracle jdk。

# for-loop - 使用批处理命令遍历 FTP 上的所有文件

> ID：14319375
> 
> 赞同：2
> 
> 时间：2013-01-14T13:31:36.180
> 
> 标签：for-loop, ftp, batch-file, connection

嗨，我想循环浏览 FTP 上的文件并一一复制。FTP连接和访问文件夹一切都很好。我的问题是如何遍历 FTP 上的所有文件。似乎没有“For”类型的功能可用于访问 FTP 文件，因为每一行都被视为完整的命令。

```
open MyServerName 21 
MyUserName
MyPassword
lcd E:\LocalDirectory
cd /FTPDirectory/upload
I WANT TO LOOP THROGH ALL FILES AND COPY ONE BY ONE TO LOCAL DIRECTORY
disconnect
bye 
```

为什么我要遍历 FTP 中的所有文件，我只想复制那些未锁定且可用于复制的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:12:19.457

使用不同的 FTP 客户端：wget。

使用`-m`选项（用于 --mirror），在脚本中使用以下内容

```
cd mylocaldirectory
wget -m ftp://username:password@hostname/theremotedirectory 
```

# c++ - 是否可以将 cout 流重定向到具有 hwnd 句柄的特定窗口（控件）？

> ID：14319377
> 
> 赞同：0
> 
> 时间：2013-01-14T13:31:46.703
> 
> 标签：c++, winapi, stream, cout, richedit

> **可能重复：**
> [将 cout 重定向到 Windows 中的控制台](https://stackoverflow.com/questions/311955/redirecting-cout-to-a-console-in-windows)

我创建了一个子 Richedit 窗口，`CreateWindow`我想知道是否可以重定向所有 cout 调用，以便文本出现在 RichEdit 控件而不是控制台中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:40:33.787

据我所知，你不能这样做。您需要发送窗口消息来设置控件中的文本。

这并不是说您不能使用流语法。您可以定义自己的`ostream`并使用它而不是`cout`，然后将字节传递到您的窗口中。它对您不生成的任何输出都没有帮助，如果您混合`printf`调用（您不应该这样做）也无济于事。

# c# - 通用类型的 Unity 配置

> ID：14319383
> 
> 赞同：4
> 
> 时间：2013-01-14T13:32:10.927
> 
> 标签：c#, generics, resharper, unity-container, app-config

我在 Unity 配置文件中注册了一个泛型类型。它可以工作，但 ReSharper 将此语法标记为红色的 INCORRECT_TYPE_PARAMETER_NUMBER 错误。有没有一种方法可以让 ReSharper 满意，而不会增加配置文件的开销？

```
<unity>
  <type alias="IList`1" type="System.Collections.Generic.IList`1, mscorlib"/>
                                                         ^^^^^^^
  <type alias="List`1" type="System.Collections.Generic.List`1, mscorlib"/>
                                                        ^^^^^^
  <type alias="string" type="System.String, mscorlib"/>
  <type alias="int" type="System.Int32, mscorlib"/>
  <register type="IList`1[string]" mapTo="List`1[string], mscorlib"/>
  <register type="IList`1[int]" mapTo="List`1[int], mscorlib"/>
</unity> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T22:54:42.880

您是否尝试过使用 mscorlib 的完整程序集名称（包括程序集版本、公钥令牌等）？

# sas - 如果在数据步骤中这意味着什么？

> ID：14319385
> 
> 赞同：2
> 
> 时间：2013-01-14T13:32:13.797
> 
> 标签：sas, datastep

在这个数据步骤中，我不明白做什么`if last.y`......你能告诉我吗？

```
data stop2;
    set stop2;
    by x y z t;

if last.y; /*WHAT DOES THIS DO ??*/

    if t ne 999999 then
        t=t+1;
    else do;
            t=0;
        z=z+1;
    end;
run; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T14:41:34.080

LAST.Y 指的是 Y 值发生变化之前的行。因此，在以下数据集中：

```
data have;
input x y z;
datalines
1 1 1
1 1 2
1 1 3
1 2 1
1 2 2
1 2 3
1 3 1
1 3 2
1 3 3
2 3 1
2 3 2
2 3 3
;;;;
run; 
```

LAST.Y 将出现在该数据集中的第三、第六、第九和第十二行（在 Z=3 的每一行上）。前两次是 Y 即将从 1 变为 2 时，以及即将从 2 变为 3 时。第三次是 X 即将变化时 - LAST.Y 在 Y 即将变化时触发*或当 BY 列表中它之前的任何变量*发生变化时。最后，数据集中的最后一行始终是 LAST。（无论如何）。

在上面的特定数据集中，子集 if 意味着您只取每组 Y 的最后一行。在这段代码中：

```
data want;
set have;
by x y z;
if last.y;
run; 
```

您最终会得到以下数据集：

```
data want;
input x y z;
datalines;
1 1 3
1 2 3
1 3 3
2 3 3
;;;;
run; 
```

在末尾。

如果您想了解 FIRST 和 LAST 如何运作，您可以做的一件事是使用`PUT _ALL_;`. 例如：

```
data want;
set have;
by x y z;
put _all_;
if last.y;
run; 
```

它将向您显示数据集上的所有变量，包括 FIRST.(whatever) 和 LAST.(whatever)。（FIRST.Y 和 LAST.Y 实际上是变量。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T20:29:58.997

在 SAS 中，首先。最后。是在数据步骤中隐式创建的变量。每个变量都有一个第一个。最后一个。对应于 DATA 步中的每条记录。这些值将是 0 或 1。last.y 与 last.y = 1 相同。

请参阅此处了解更多[信息](https://support.sas.com/documentation/cdl/en/lrcon/62955/HTML/default/viewer.htm#a000761931.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T22:09:35.790

这是子集 IF 语句的示例。这与 IF/THEN 语句不同。这基本上意味着如果条件不成立，则立即停止数据步骤的此迭代。
所以

```
if last.y; 
```

相当于

```
if not last.y then delete; 
```

或者

```
if not last.y then return; 
```

或者

```
if last.y then do;
  ... rest of the data step before the run ...
end; 
```

# glassfish - 部署 glassfish v3 时出现许多警告

> ID：14319388
> 
> 赞同：9
> 
> 时间：2013-01-14T13:32:20.753
> 
> 标签：glassfish

您好，当我尝试在 glassfish 中部署 ear 应用程序时，我收到了很多这样的警告：

```
[#|2013-01-14T14:12:52.404+0100|WARNING|glassfish3.1.2|org.apache.jasper.runtime.TldScanner|_ThreadID=34;_ThreadName=Thread-2;|PWC6351: In TLD scanning, the supplied resource file:/usr/local/glassfish3/glassfish/domains/pi/applications/person-ear-1.0-SNAPSHOT-rnull/APP-INF/lib/jaxb-api-2.1.jar does not exist
java.io.FileNotFoundException: /usr/local/glassfish3/glassfish/domains/pi/applications/person-ear-1.0-SNAPSHOT-rnull/APP-INF/lib/jaxb-api-2.1.jar (Nie ma takiego pliku ani katalogu)
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:214)
    at java.util.zip.ZipFile.<init>(ZipFile.java:144)
    at java.util.jar.JarFile.<init>(JarFile.java:152)
    at java.util.jar.JarFile.<init>(JarFile.java:89)

[#|2013-01-14T14:12:52.407+0100|WARNING|glassfish3.1.2|org.apache.jasper.runtime.TldScanner|_ThreadID=34;_ThreadName=Thread-2;|PWC6351: In TLD scanning, the supplied resource file:/usr/local/glassfish3/glassfish/domains/pi/applications/person-ear-1.0-SNAPSHOT-rnull/APP-INF/lib/resolver-20050927.jar does not exist
java.io.FileNotFoundException: /usr/local/glassfish3/glassfish/domains/pi/applications/person-ear-1.0-SNAPSHOT-rnull/APP-INF/lib/resolver-20050927.jar (Nie ma takiego pliku ani katalogu)
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:214)
    at java.util.zip.ZipFile.<init>(ZipFile.java:144)
    at java.util.jar.JarFile.<init>(JarFile.java:152 
```

和其他.... 对我来说，glassfish 似乎不使用他自己的类加载器，但我不确定....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-20T00:11:54.460

您的 pom.xml 中的错误配置可能会导致此问题。maven-war-plugin 可能包含为您的 MANIFEST.MF 自定义类路径的指令。就我而言，我有：

```
 <manifest>
     <addClasspath>true</addClasspath>
 </manifest> 
```

您应该能够通过简单地注释掉/删除指令来解决它。

# jquery - 缩放后拖放错误注册

> ID：14319390
> 
> 赞同：3
> 
> 时间：2013-01-14T13:32:29.673
> 
> 标签：jquery, css, drag-and-drop, responsive-design, jquery-ui-draggable

我正在开发一个项目，用户必须将正确的项目拖放到技术图纸上。例如，主板：用户将获得 CPU 或 DDR 内存的图片，他必须将该 CPU 拖到插槽上，并将内存拖到相应的插槽中。

它运行良好，并且在 iFrame 中加载到我们的网站中。由于该网站是响应式的，因此拖放应用程序也需要调整大小。我们通过使用 CSS3 变换缩放内部的 body 元素来调整 iFrame 的大小。

这也有效，但随后弹出的问题是我们所有的拖放区都已关闭。现在，必须将 CPU 放到插槽旁边才能让它做出反应。

这是我的意思的一个简单示例：http: [//jsfiddle.net/78EYh/](http://jsfiddle.net/78EYh/)

只需将蓝色方块拖到红色矩形上，您就会看到红色矩形将其注册在它的顶部，而您却没有。去掉缩放的div，一切正常。唯一的问题是我无法缩放 iframe，所以我需要修复。

有没有人遇到过这个问题？无论如何要修复它？

HTML：

```
<div id="scale">
  <span id="drop-1" class="drop"></span>

  <span id="drag-1" class="drag"></span>
</div> 
```

jQuery：

```
$("#drop-1").droppable({
  over: function() {
    $(this).css({'opacity' : '.4'});
  },
  out: function() {
    $(this).css({'opacity' : '1'});
  }
});

$("#drag-1").draggable(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T14:13:16.280

如何编写自己的拖放实现。我用您的示例进行了尝试，并使其与以下实现一起使用：

```
 $.fn.scaleDroppable = function(params, scaleFactor){
            var offset = $(this).offset();
            var bottom = offset.top + $(this).height() * scaleFactor;
            var right = offset.left + $(this).width() * scaleFactor;
            var element = this;
            $(document).mousemove(function(e){
                if(typeof($(document).data("dragObject")) != "undefined"){
                    if( e.pageX <= right && e.pageX >= offset.left &&  e.pageY <= bottom && e.pageY >= offset.top ){
                        //movein
                        if(typeof(params.over)=="function"){                        
                            params.over.call(element);
                            if( typeof($(document).data("dragObject").data("inElements")) == "undefined")
                                $(document).data("dragObject").data("inElements", []);
                                $(document).data("dragObject").data("inElements").push(element);
                        }
                    }else{
                        //moveout
                        var objectIndex = ($(document).data("dragObject").data("inElements") || []).indexOf(element);
                        if(typeof(params.out)=="function" && objectIndex > -1){
                            params.out.call(element);
                            $(document).data("dragObject").data("inElements").splice(objectIndex, 1);
                        }
                    }
                }
            });
        };

        $.fn.scaleDraggable = function(scaleFactor){
            $(this).mousedown(function(){
                $(document).data("dragObject", $(this));
                var moveObject = function(event){
                    $(document).data("dragObject").offset({top: event.pageY - ($(document).data("dragObject").height() * scaleFactor / 2), left: event.pageX -($(document).data("dragObject").innerWidth()  * scaleFactor / 2)});
                };
                $(document).mousemove(moveObject);
                $(document).one('mouseup', function(){
                    $(document).removeData("dragObject");
                    $(document).unbind("mousemove", moveObject);
                });
            });
        };

    $(document).ready(function(){

        $("#drop-1").scaleDroppable(
                {
                    over: function() {
                        $(this).css({'opacity' : '.4'});
                    },
                    out: function() {
                        $(this).css({'opacity' : '1'});
                    }
                },0.5   
        );

        $("#drag-1").scaleDraggable(0.5);

    }); 
```

您可以在[http://jsfiddle.net/VNwb8/上查看它](http://jsfiddle.net/VNwb8/)
上查看它， 这当然以 scaleFactor 作为参数。如果您想自动检索 scaleFactor，您可以编写一个实现来自动获取它。您可以从中获得一些想法[获取元素的比例值？](https://stackoverflow.com/questions/5603615/get-the-scale-value-of-an-element)

# python - 数字图像读取为整数数组

> ID：14319397
> 
> 赞同：1
> 
> 时间：2013-01-14T13:32:49.717
> 
> 标签：python, image-processing

使用`Python`'s`PIL`模块，我们可以将数字图像读入一个`array`整数，

```
from PIL import Image
from numpy import array

img = Image.open('x.jpg')
im = array(img)  # im is the array representation of x.jpg 
```

我想知道如何`PIL`将图像解释为`array`？首先我试过这个

```
od -tu1 x.jpg 
```

它确实给出了一个数字序列，但是如何`PIL`将彩色图像解释为 3D 数组？

简而言之，我的问题是我想知道如何在不使用任何模块的情况下获得彩色图像的数组表示`PIL`，如何使用 Python 完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:36:55.960

好吧，这取决于我要说的图像格式。

对于 .jpg，有允许读取图像的格式的完整描述。你可以在**[这里阅读](http://www.jpeg.org/public/jfif.pdf)**

PIL 所做的正是您最初所做的。但随后它会按照规范读取字节，这允许它将其转换为人类可读的格式（在本例中为数组）。

JPEG 可能看起来很复杂，但如果你使用 png（没有压缩的版本），一切看起来都更简单。 [例如这张图片](https://dl.dropbox.com/u/4286043/SO/binary.png)

![png 图像没有压缩](../Images/94bfe7c098e698759e85197f8d23f6dd.png)

如果你打开它，你会看到类似的东西： ![先前 png 图像的原始转储](../Images/99697f4dbe29ce5900e8613ed168d3a7.png)

您可以在顶部看到与标题相对应的几个信息。

然后你会看到所有这些零，它们是图像黑色像素的数字表示（左上角）。

如果你用 PIL 打开图像，你会得到一个大部分被 0 填充的数组。

如果您想了解更多关于第一个字节的信息，请查看[png**规范**](http://www.w3.org/TR/PNG/)第 11.2.2 章。

您会看到一些字节对应于图像的宽度和高度。这就是 PIL 能够创建数组的方式:)。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:42:51.587

取决于颜色模式。在 PIL 中，图像存储为整数列表，所有通道在每个像素的基础上交错。

为了说明这一点：

*   灰度图像：[pixel1, pixel2, pixel3, ...]
*   RGB：[pixel1_R，pixel1_G，pixel1_B，pixel2_R，pixel_2_G，...]
*   RBGA 等也是如此。

# android - try catch crash application android

> ID：14319406
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:33:18.310
> 
> 标签：android, crash, try-catch

I 'm doing an Android application but i have ever the same problem: If i want for example a variable of a second class, my application crashes.

Here's an exemple with my code:

```
public class Classement extends Activity{

TextView textview;
GetCode getCode = new GetCode();
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.classement);
    textview = (TextView)findViewById(R.id.textView1);
    try {
        textview.setText(String.valueOf(getCode.methode()[1]));
    } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

my logcat:

> 01-14 13:39:13.740: I/Process(3304): Sending signal. PID: 3304 SIG: 9 01-14 13:39:22.770: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:22.791: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:22.930: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:22.930: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:23.440: D/dalvikvm(3342): GC_FOR_ALLOC freed 54K, 7% free 2514K/2688K, paused 33ms, total 38ms 01-14 13:39:23.450: I/dalvikvm-heap(3342): Grow heap (frag case) to 3.210MB for 674916-byte allocation 01-14 13:39:23.510: D/dalvikvm(3342): GC_FOR_ALLOC freed 1K, 6% free 3171K/3348K, paused 59ms, total 59ms 01-14 13:39:23.580: D/dalvikvm(3342): GC_CONCURRENT freed <1K, 6% free 3171K/3348K, paused 6ms+14ms, total 70ms 01-14 13:39:25.441: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.441: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.451: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.481: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.560: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.560: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.570: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.650: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.650: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.670: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.670: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.680: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.680: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.700: D/gralloc_goldfish(3342): Emulator without GPU emulation detected. 01-14 13:39:25.800: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:25.840: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.040: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.060: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.060: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.060: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.260: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.260: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.260: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.270: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.400: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.520: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.520: I/Choreographer(3342): Skipped 34 frames! The application may be doing too much work on its main thread. 01-14 13:39:27.530: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.530: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.731: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.790: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:27.800: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:28.771: W/System.err(3342): android.os.NetworkOnMainThreadException 01-14 13:39:28.801: W/System.err(3342): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117) 01-14 13:39:28.801: W/System.err(3342): at java.net.InetAddress.lookupHostByName(InetAddress.java:385) 01-14 13:39:28.831: W/System.err(3342): at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236) 01-14 13:39:28.850: W/System.err(3342): at java.net.InetAddress.getAllByName(InetAddress.java:214) 01-14 13:39:28.850: W/System.err(3342): at libcore.net.http.HttpConnection.(HttpConnection.java:70) 01-14 13:39:28.871: W/System.err(3342): at libcore.net.http.HttpConnection.(HttpConnection.java:50) 01-14 13:39:28.871: W/System.err(3342): at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340) 01-14 13:39:28.871: W/System.err(3342): at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87) 01-14 13:39:28.900: W/System.err(3342): at libcore.net.http.HttpConnection.connect(HttpConnection.java:128) 01-14 13:39:28.900: W/System.err(3342): at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316) 01-14 13:39:28.920: W/System.err(3342): at libcore.net.http.HttpEngine.connect(HttpEngine.java:311) 01-14 13:39:28.940: W/System.err(3342): at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290) 01-14 13:39:28.950: W/System.err(3342): at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240) 01-14 13:39:28.990: W/System.err(3342): at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282) 01-14 13:39:28.990: W/System.err(3342): at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177) 01-14 13:39:29.000: W/System.err(3342): at com.example.gotteron.GetCode.methode(GetCode.java:18) 01-14 13:39:29.000: W/System.err(3342): at com.example.gotteron.Classement.onCreate(Classement.java:16) 01-14 13:39:29.031: W/System.err(3342): at android.app.Activity.performCreate(Activity.java:5104) 01-14 13:39:29.060: W/System.err(3342): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 01-14 13:39:29.060: W/System.err(3342): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 01-14 13:39:29.070: W/System.err(3342): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 01-14 13:39:29.070: W/System.err(3342): at android.app.ActivityThread.access$600(ActivityThread.java:141) 01-14 13:39:29.100: W/System.err(3342): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 01-14 13:39:29.130: W/System.err(3342): at android.os.Handler.dispatchMessage(Handler.java:99) 01-14 13:39:29.130: W/System.err(3342): at android.os.Looper.loop(Looper.java:137) 01-14 13:39:29.140: W/System.err(3342): at android.app.ActivityThread.main(ActivityThread.java:5039) 01-14 13:39:29.151: W/System.err(3342): at java.lang.reflect.Method.invokeNative(Native Method) 01-14 13:39:29.230: W/System.err(3342): at java.lang.reflect.Method.invoke(Method.java:511) 01-14 13:39:29.240: W/System.err(3342): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 01-14 13:39:29.250: W/System.err(3342): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 01-14 13:39:29.250: W/System.err(3342): at dalvik.system.NativeStart.main(Native Method) 01-14 13:39:29.460: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.570: I/Choreographer(3342): Skipped 57 frames! The application may be doing too much work on its main thread. 01-14 13:39:29.570: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.630: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.660: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.801: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.811: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.831: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.841: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.841: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.921: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.941: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:29.960: I/Choreographer(3342): Skipped 43 frames! The application may be doing too much work on its main thread. 01-14 13:39:30.000: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.010: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.060: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.060: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.090: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.090: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.310: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.370: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.410: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.440: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.962: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:30.962: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:31.021: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0 01-14 13:39:31.021: W/Trace(3342): Unexpected value from nativeGetEnabledTags: 0

methode():

```
package com.example.gotteron;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.Arrays;

public class GetCode {

    //Recupere le code HTML de la page
    public int [] methode() throws IOException{
        URL oracle = new URL("http://www.nationalleague.ch/NL/fr/");
        URLConnection yc = oracle.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                yc.getInputStream()));
        String inputLine;
        String s1 = "";
        while ((inputLine = in.readLine()) != null)
            s1 = s1 + inputLine;
        in.close();

        //12 car 12 équipes
        int tableauEquipes [] = new int [12];

        //Variable numérique de l'emplacement dans le code HTML pour chaque équipe
        //Le string représente l'équipe en HTML dans le tableau
        // doit apparaître 1x dans le code

        int Berne = s1.indexOf(">SC Bern</td>");
        int Fribourg = s1.indexOf("Fribourg</td>");
        int Geneve = s1.indexOf("Gen&egrave;ve</td>");
        int Zug = s1.indexOf("EV Zug</td>");
        int ZSC = s1.indexOf("ZSC Lions</td>");
        int Davos = s1.indexOf("HC Davos</td>");
        int Lugano = s1.indexOf("HC Lugano</td>");
        int Kloten = s1.indexOf("Kloten Flyers</td>");
        int Bienne = s1.indexOf("EHC Biel</td>");
        int Lakers = s1.indexOf("Lakers</td>");
        int Ambri = s1.indexOf("Ambri-Piotta</td>");
        int SCL = s1.indexOf("SCL Tigers</td>");

        //Mettre variables dans tableau
        tableauEquipes[0] = Berne;
        tableauEquipes[1] = Fribourg;
        tableauEquipes[2] = Geneve;
        tableauEquipes[3] = Zug;
        tableauEquipes[4] = ZSC;
        tableauEquipes[5] = Davos;
        tableauEquipes[6] = Lugano;
        tableauEquipes[7] = Kloten;
        tableauEquipes[8] = Bienne;
        tableauEquipes[9] = Lakers;
        tableauEquipes[10] = Ambri;
        tableauEquipes[11] = SCL;

        //Tri Tableau dans l'ordre croissant
        Arrays.sort(tableauEquipes);

        // Trouve la la place dans le classement de Berne
        int tdbBerne = 0;
        int tdbBerneDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbBerne++;
            if (tableauEquipes[i] == s1.indexOf(">SC Bern</td>")) {
                System.out.println("Berne est" + tdbBerne);
            }
        }
        tdbBerneDefinitif = tdbBerne;

        // Trouve la la place dans le classement de Fribourg
        int tdbFribourg = 0;
        int tdbFribourgDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbFribourg++;
            if (tableauEquipes[i] == s1.indexOf("Fribourg</td>")) {
                System.out.println("Fribourg est" + tdbFribourg);
                tdbFribourgDefinitif = tdbFribourg;
            }
        }
        System.out.println(tdbFribourgDefinitif);

        // Trouve la la place dans le classement de Geneve
        int tdbGeneve = 0;
        int tdbGeneveDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbGeneve++;
            if (tableauEquipes[i] == s1.indexOf("Gen&egrave;ve</td>")) {
                System.out.println("Geneve est" + tdbGeneve);

            }
        }
        tdbGeneveDefinitif = tdbGeneve;

        // Trouve la la place dans le classement de Zug
        int tdbZug = 0;
        int tdbZugDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbZug++;
            if (tableauEquipes[i] == s1.indexOf("EV Zug</td>")) {
                System.out.println("Zug est" + tdbZug);
            }
        }
        tdbZugDefinitif = tdbZug;

        // Trouve la la place dans le classement de ZSC
        int tdbZSC = 0;
        int tdbZSCDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbZSC++;
            if (tableauEquipes[i] == s1.indexOf("ZSC Lions</td>")) {
                System.out.println("ZSC Lions est" + tdbZSC);
            }
        }
        tdbZSCDefinitif = tdbZSC;

        // Trouve la la place dans le classement de Davos
        int tdbDavos = 0;
        int tdbDavosDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbDavos++;
            if (tableauEquipes[i] == s1.indexOf("HC Davos</td>")) {
                System.out.println("Davos est" + tdbDavos);
            }
        }
        tdbDavosDefinitif = tdbDavos;

        // Trouve la la place dans le classement de Lugano
        int tdbLugano = 0;
        int tdbLuganoDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbLugano++;
            if (tableauEquipes[i] == s1.indexOf("HC Lugano</td>")) {
                System.out.println("Lugano est" + tdbLugano);
            }
        }
        tdbLuganoDefinitif = tdbLugano;

        // Trouve la la place dans le classement de Kloten Flyers
        int tdbKloten = 0;
        int tdbKlotenDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbKloten++;
            if (tableauEquipes[i] == s1.indexOf("Kloten Flyers</td>")) {
                System.out.println("Kloten est" + tdbKloten);
            }
        }
        tdbKlotenDefinitif = tdbKloten;

        // Trouve la la place dans le classement de Bienne
        int tdbBienne = 0;
        int tdbBienneDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbBienne++;
            if (tableauEquipes[i] == s1.indexOf("EHC Biel</td>")) {
                System.out.println("Bienne est" + tdbBienne);
            }
        }
        tdbBienneDefinitif = tdbBienne;

        // Trouve la la place dans le classement de Lakers
        int tdbLakers = 0;
        int tdbLakersDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbLakers++;
            if (tableauEquipes[i] == s1.indexOf("Lakers</td>")) {
                System.out.println("Lakers est" + tdbLakers);
            }
        }
        tdbLakersDefinitif = tdbLakers;

        // Trouve la la place dans le classement de Ambri
        int tdbAmbri = 0;
        int tdbAmbriDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbAmbri++;
            if (tableauEquipes[i] == s1.indexOf("Ambri-Piotta</td>")) {
                System.out.println("Ambri est" + tdbAmbri);
            }
        }
        tdbAmbriDefinitif = tdbAmbri;

        // Trouve la la place dans le classement de SCL
        int tdbSCL = 0;
        int tdbSCLDefinitif = 0;
        for (int i = 0; i < tableauEquipes.length; i++) {
            tdbSCL++;
            if (tableauEquipes[i] == s1.indexOf("SCL Tigers</td>")) {
                System.out.println("SCL est" + tdbSCL);
            }
        }
        tdbSCLDefinitif = tdbSCL;

        int [] classement = {tdbSCLDefinitif, tdbAmbriDefinitif, tdbLakersDefinitif, tdbBienneDefinitif, tdbKlotenDefinitif,
                    tdbLuganoDefinitif, tdbDavosDefinitif, tdbZSCDefinitif, tdbZugDefinitif, tdbGeneveDefinitif, tdbFribourgDefinitif,
                    tdbBerneDefinitif};
        Arrays.sort(classement);
    return classement;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:35:23.037

First, IOException will not necesary catch the exception you are getting. So change IOException to Exception, the superclass of all exceptions.

Then, check your .methode, is it returning an array?

# jquery - jQuery Validation 插件 DOB 字段自定义验证

> ID：14319409
> 
> 赞同：-3
> 
> 时间：2013-01-14T13:33:21.147
> 
> 标签：jquery, jquery-validate

假设我有一个想要验证的出生日期字段。

日月年

现在我想同时验证这 3 个字段。我的意思是，如果用户仍然专注于这三个领域中的任何一个，那么暂时不要验证。当他离开所有这些时，验证日期。

看起来很简单，我可以做到：

```
 $('#dayInput').is(':focus') 
```

对于所有三个字段，然后检查其中一个是否为真……但这以一种非常有趣的方式失败了。在我看来，jQuery 验证插件验证了“inFocus”和“out of focus”事件之间的元素。

所以，如果我在年份输入然后移动到月份输入，在这两个事件之间，三个输入中没有一个是“聚焦”的，我无法判断用户是否离开了 3 个 dob 输入仍然在一个其中。

有没有办法解决这个问题？

PS 我不能在我要添加的额外方法中注册事件处理程序，因为它们注册得太晚了。假设我在当天输入，让它 => 验证启动，处理程序（焦点和模糊被注册），但为时已晚，前一个事件被跳过。

我希望我在这里有点道理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:50:21.020

如果您不想在字段失去焦点时触发验证，那么究竟是什么时候？（您不能指定一组字段在它们共同失去焦点时触发验证。）仅当您单击`submit`按钮时？如果是这样，请尝试这些选项...

```
$(document).ready(function() {

    $('#myform').validate({
        onfocusout: false,
        onkeyup: false,
        // your other options
    });

}); 
```

表单只会在您单击 时生效`submit`。

**工作演示：**

**[http://jsfiddle.net/CQnRn/](http://jsfiddle.net/CQnRn/)**

文档：

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

一个合理的替代方法是验证日期的单个字段而不是三个字段。

```
<input type="text" name="birthdate" /> 
```

规则选项：

```
rules: {
  birthdate: {
    required: true,
    date: true
  }
} 
```

[http://jsfiddle.net/LRAgX/](http://jsfiddle.net/LRAgX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:41:40.760

也许你可以使用“与”运算符“ `&&`”之类的

```
if ($('#dayinput').change() && $('#monthinput').change() && $('#yearinput').change()) {
$('#myform').validate(); 
} 
```

# binary - 如何转换二进制！到一个字符！在 Rebol 2 中？

> ID：14319411
> 
> 赞同：3
> 
> 时间：2013-01-14T13:33:22.217
> 
> 标签：binary, char, rebol

将 char 转换为二进制很容易：

```
>> c: #"^(52)"
== #"R"

>> type? c
== char!

>> b: to-binary c
== #{52} 
```

但如果我想走另一条路怎么办？

```
>> c: to-char b
** Script Error: Invalid argument: #{52}
** Where: to-char
** Near: to char! :value 
```

这适用于 Rebol 3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:28:19.823

转换为字符串，然后从字符串中提取第一个字符：

```
>> first to string! #{c3b6}
== #"ö" 
```

请注意，这会将二进制文件解码为 UTF-8（Rebol 3 中使用的默认 Unicode 编码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T02:13:56.607

您最初的问题[是关于 Rebol 3](https://stackoverflow.com/revisions/14319411/1)，在哪里`to-char` *可以*工作`binary!`

```
 >> c: #"^(52)"
    == #"R"

    >> type? c
    == char!

    >> b: to-binary c
    == #{52}

    >> c: to-char b
    == #"R"

    >> system/version
    == 2.101.0.3.1 
```

但是，它在 Rebol 2 中不起作用。

# android - 使用单个图像按下时更改按钮颜色

> ID：14319424
> 
> 赞同：0
> 
> 时间：2013-01-14T13:34:04.697
> 
> 标签：android, button

我有一个九个补丁图像的按钮。我不想为“按下”状态提供另一个图像（这是`StateListDrawable`需要的）。我只是希望它在按下时变得“更暗”（就像 iOS 按钮一样）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:41:11.463

使用这样的东西：

```
public class MyStateDrawable extends LayerDrawable {

    public MyStateDrawable(Drawable[] layers) {
        super(layers);
    }

    @Override
    protected boolean onStateChange(int[] states) {
        for (int state : states) {
            if (state == R.attr.state_activated || state == android.R.attr.state_pressed) {
                super.setColorFilter(0x7f000000, Mode.SRC_ATOP);
                return true;
            } else if(state == -android.R.attr.state_activated || state == -android.R.attr.state_pressed){
                super.setColorFilter(0x00000000, Mode.SRC_ATOP);
                return true;
            }else {
                super.setColorFilter(null);
            }
        }
        return super.onStateChange(states);
    }

    @Override
    public boolean isStateful() {
        return true;
    }
} 
```

进而

```
StateDrawable state = new MyStateDrawable(new Drawable[]{mDefaultDrawable});
view.setImageDrawable(state); 
```

希望对你有帮助 ：）

# ruby - Avoid shell hang when use ruby NET:SSH

> ID：14319431
> 
> 赞同：2
> 
> 时间：2013-01-14T13:34:25.210
> 
> 标签：ruby, shell, ssh

For a specific bash command when I execute it locally after completion I got the shell free but when I execute remotely the shell hangs like that:

```
[user@host ~]$ ruby bin/remote_control.rb  server start_server1
Running /home/server_manager.sh start_server ... wait

[] 
```

When I use ruby and NET::SSH to call remotely this command and it's necessary to press ctrl+C to to get the shell prompt available again and press enter doesn't work.

Again the remote script/command /home/server_manager.sh doesn't has this behavior when called locally

For get free the terminal the script has this syntax:

I'm trying to execute in backgroud

```
`commmand &` 2>&1 | echo "\n" 
```

And the ruby code bellow is used for calling the script above:

```
Net::SSH.start(@hostname, @username, :password => @password) do |ssh|

  channel = ssh.open_channel do |ch|
     ch.exec @cmd do |ch, success|
        raise "Could not execute command: #{cmd}" unless success

        ch.on_data do |c, data|            
           begin
              if !data.nil?  then
                  print data
              else 
                  exit
              end        
           rescue SystemExit
              puts "Rescued a SystemExit exception"
           end               
        end

        ch.on_extended_data do |c, type, data|
           begin
              if !data.nil?  then
                  print data
              else 
                  exit
              end        
           rescue SystemExit
              puts "Rescued a SystemExit exception"
           end   
        end

        ch.on_eof do |ch|
           puts "Cmd finished with success: #{@cmd}"
           $LOG.info("Cmd finished with success: #{@cmd}")
        end
        ch.on_close { puts "Done!" }
     end
  end
 channel.wait

 ssh.loop
end 
```

But I haven't success until now. What I need to add to this code to always have the shell free.

# c# - 延迟的 NUnit 断言消息评估

> ID：14319435
> 
> 赞同：11
> 
> 时间：2013-01-14T13:34:32.330
> 
> 标签：c#, nunit

我的测试代码中有这个断言

```
Assert.That(() => eventData.Count == 0,
Is.True.After(notificationPollingDelay),
"Received unexpected event with last event data" + eventData.Last().Description()); 
```

在一段时间后断言某些条件并且在失败时会产生一条消息。它无法运行，因为消息字符串是在断言开始时构造的，而不是在断言结束时构造的。因此`eventData`集合仍然是空的（因为它最初是空的）并且尝试获取`Description`集合中最后一个项目的尝试失败。是否有解决方法或体面的替代方法，`NUnit`或者我是否必须`Thread.Sleep`在我的测试中恢复使用？

PS：我使用的是 NUnit 2.5.10。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-22T19:18:54.113

您可以使用此方案：

```
var constrain = Is.True.After(notificationPollingDelay);
var condition = constrain.Matches(() => eventData.Count == 0);
Assert.IsTrue(condition, 
              "Received unexpected event with last event data" + 
              eventData.Last().Description()); 
```

此方法类似于使用 Thread.Sleep

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-22T07:57:13.157

在 NUnit 3.50 版中，我不得不使用不同的语法。这是示例：

```
var constraint = Is.True.After( delayInMilliseconds: 100000, pollingInterval: 100);
Assert.That( () => yourCondition, constraint ); 
```

这将测试使用方法创建的`yourCondition`等待某个最大时间是否为真。`DelayedConstraint``Is.True.After`

在此示例中，`DelayedConstraint`配置为使用 100 秒的最长轮询时间，每 0.1 秒轮询一次。

[另请参阅有关DelayedConstraint](https://nunit.org/index.php?p=delayedConstraint&r=2.5)的旧版 NUnit 2.5 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:29:24.590

最简单的答案是“不要在失败消息中包含该文本”。我个人几乎从不包含失败信息；如果您的测试足够原子，则不需要这样做。通常，如果我需要找出一个神秘的故障，无论如何只有调试器会有所帮助。

如果你真的想这样做，这段代码应该可以在不自己管理线程的情况下工作。

```
try
{
    Assert.That(() => eventData.Count == 0, Is.True.After(notificationPollingDelay));
}
catch(AssertionException)
{
    throw new Exception("Received unexpected event with last event data" + eventData.Last().Description());
} 
```

# php - Jquery mobile orientation uploaded photo

> ID：14319437
> 
> 赞同：0
> 
> 时间：2013-01-14T13:34:55.863
> 
> 标签：php, image, mobile, upload, orientation

I'm trying to upload some photo from a mobile using jquery mobile and php but after uploading my photo it's always in landscape format even if my photo is in portrait format on my iphone !

So i can't know which one must be rotated or no .

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:36:27.907

我有同样的问题。我的解决方案有点快速和肮脏，但你去吧：

编写一个在图像加载时调用的函数，检查图像是否要以横向呈现。

```
 $(".imgTile").load(function(){     
    if(this.width>this.height){
        $(this).css("transform","rotate(90deg)");
        $(this).css("top",".7em");
        $(this).css("left","-.5em");
        }
     } 
```

几点注意事项：我发现我必须进行一些重新定位才能使旋转的图像正确适合列表视图（因此设置了顶部和左侧属性），因此您可能需要根据需要进行调整。其次，对于不同的浏览器，有不同的 css“转换”属性，因此您可能需要设置每个属性以获得跨浏览器支持。这是关于这些属性的指南[http://www.w3schools.com/cssref/css3_pr_transform.asp](http://www.w3schools.com/cssref/css3_pr_transform.asp)

编辑：我花了一些时间想出了一个更可靠的解决方案。

首先，使用php读取exif标签：

```
$exif=exif_read_data("uploads/$fileExtension.jpg",0,true);
$orient=$exif["IFD0"]["Orientation"]; 
```

对 EXIF 标准的一些研究表明，iPhone 将生成的三种情况是：

1-- 不需要旋转 3-- 需要 180 度。旋转 6 - 需要 90 度。回转

然后使用 php 的 shell_exec 运行以下 shell 脚本，该脚本使用[imagemagick](http://www.imagemagick.org/script/index.php "图像魔术师")销毁 EXIF 标头，并将图像物理旋转指定量：

```
#!/bin/bash                                                                     
    for i in $[filename]
            do convert -rotate $[number of degrees] $i $i
    done

mogrify -strip $[filename] 
```

现在，图像将在任何地方正确定向，并且读取 EXIF 标头的浏览器不会以任何不同的方式显示它。

剩下要做的就是根据标签值使用正确的参数执行脚本。

希望这可以帮助！

# jquery - Nested jquery ui slider in accordian on slide to change div content

> ID：14319439
> 
> 赞同：0
> 
> 时间：2013-01-14T13:35:04.357
> 
> 标签：jquery, events, user-interface

Basically, I want to have the gray box of each slice-accordian div change when the slider is moved with a corresponding .text() that acts like a popover but within the gray box with Min/Max values corresponding to set information that gets updated (i.e. move up and this is where you are at and this is the information for this value of the slider). A bonus is if the handle of the slider can change color to correspond to the value range (i.e. Max=Red, Default=Green, Min=Red).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:13:06.530

尝试尽可能接近地重新创建您的示例（阅读：不更改任何其他可以清理的代码）。

我整理了一个[例子](http://jsfiddle.net/peK2s/1/)，做我认为你需要做的事情。

您的范围因不同颜色的阈值而关闭，它们没有相互覆盖的最小和最大范围。

对于灰色框中文本的更新，这是一个在 DOM 中查找与正在交互的滑块相关的简单案例，例如

`$(this).parent().siblings('.feelings-box').html('blah')`

# select - Find executing queries on Oracle 8

> ID：14319440
> 
> 赞同：0
> 
> 时间：2013-01-14T13:35:05.580
> 
> 标签：select, trace, oracle8i

I have a .NET application that uses parameterized queries to select data from an Oracle database. It seems that the parameters are not passed correctly or something, because I obtain different results in the application from those when executing the query directly on the database.

Therefore, I want to be able to see the select that is being executed on the server. How can I do that?

# loops - Naming inside a loop with deparse

> ID：14319441
> 
> 赞同：1
> 
> 时间：2013-01-14T13:35:07.013
> 
> 标签：loops, naming

I try to write several tables calculating the colMeans over diffrent columns within a dataframe. The function works fine but the naming is a problem:

```
function.test<-function(a,b,df)
  {for (i in a:b) 
     write.table(
      as.data.frame(
        lapply(
          split(df, df[,i]), colMeans)
        ),
      file=paste("E:\\R\\Outputs\\colMeans",deparse(i),deparse(df),".csv"
             ),
      sep=",",row.names=T,col.names=NA
      )
   } 
```

Deparsing only "i" works fine but deparsing "df" doesn't work. I get the follwoing error message:

```
 Error in file(file, ifelse(append, "a", "w")) : 
   invalid 'description' argument
   In addition: Warning message:
   In if (file == "") file <- stdout() else if (is.character(file)) { :
     the condition has length > 1 and only the first element will be used 
```

I guess it's like that because "i" changes with the loop and df stays always the same. Has anyone an idea how to name it using i and the df. Because if not I would have to write a seperate function for each dataframe and that will be a lot of code...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:50:18.403

好的试验和错误这次有帮助：

```
deparse(i),deparse(substitute(df)) 
```

# css - Why are in IE >= 9 using border-radius:[value] fixed child Elements clipped?

> ID：14319444
> 
> 赞同：1
> 
> 时间：2013-01-14T13:35:25.780
> 
> 标签：css, internet-explorer-9

If I use css `border-radius:[some value]` for a parent element and have a fixed positioned child element, in Internet Explorer the child element gets 'clipped' into the parent. If I use `border-radius:0` in the parent element, the result is ok (but without a border radius).

This is IE >= 9 only. Other browsers behave like expected.

Here's a [**jsfiddle**](http://jsfiddle.net/L98Md/) showing what I mean.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:14:23.663

我认为这与它处理溢出的方式有关。如果您完全删除了溢出属性，IE9 会将这些工具提示视为体面的浏览器。

# c# - C# 和 XNA 可以在 Game 类之间切换吗？

> ID：14319448
> 
> 赞同：2
> 
> 时间：2013-01-14T13:35:55.277
> 
> 标签：c#, xna, visual-studio-2012, windows-phone-8, game-engine

我正在为*Windows Phone 8*开发一个小型游戏应用程序。

我里面有三场比赛，我想知道是否可以（从main.cs）在随机时间内从game1切换到game2再到game3。

我要稍微解释一下 这是应用程序的树

*   资源
*   参考
*   课程
    *   抽象游戏.cs
    *   乒乓球
    *   打砖块.cs
*   项目清单
*   主文件
*   程序.cs

基本上游戏的目的是，你在 main.cs 中设置一个随机数字，然后在 pong 和 arkanoid 之间进行主切换（你必须为改变做好准备）

抽象只是一个继承 Microsoft.Xna.Framework.Game 的“容器”

在我在调试器上运行程序之前，它“运行良好”，因为它向我显示了这个错误。

“无法运行多个游戏”

这是因为 Main.cs、Pong.cs 和 Arkanoid.cs 是 Game-child 类

有什么解决办法吗？我的意思是，这种逻辑可以避免这种错误（在 Main.cs 中运行/切换游戏）

如果 Pong.cs 和 Arkanoid 继承自 DrawableGameComponent 会更好吗？

提前感谢您的任何回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:06:10.253

处理这个问题的最好方法是使用游戏组件，就像你在问题中提到的那样。

然后只需将所有游戏组件添加到主 Game 对象即可：

```
Game.Components.Add(myGameComponent); 
```

然后相应地设置启用标志。

```
myGameComponent.Enabled = true; 
```

然后，只需遍历您的游戏组件，并更新/绘制启用的组件即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:02:45.130

是的 - 如果您的每个迷你游戏都派生自 DrawableGameComponent，您会做得更好。

# javascript - 用于外部网页打印

> ID：14319450
> 
> 赞同：2
> 
> 时间：2013-01-14T13:36:00.720
> 
> 标签：javascript, html, printing

有没有可能使用这个？

```
<link rel="alternate" media="print" type="text/html" href="http://google.com" /> 
```

我有一个 wordpress 网站，我想在打印时使用其他格式。使用上面的代码将不起作用，因为 google.com 不是我网站的一部分（对吗？）所以我正在寻找任何可以帮助我解决这个问题的东西。

任何解决方法？诡计？

提前感谢和更多的力量。

使用 Javascript 的技巧也很有趣。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-14T13:50:58.573

您的代码尝试将 google.com 作为外部 CSS 加载到浏览器中，以使用它以特殊样式打印当前页面 :-)

如果您想尝试从您的页面打印 google.com，您必须将 google 加载到 iframe 中并`iframeName.print();`使用 Javascript。

# html - z-index woes - z-index 不适用于相对和绝对 div 的组合

> ID：14319453
> 
> 赞同：0
> 
> 时间：2013-01-14T13:36:05.750
> 
> 标签：html, css, z-index

我的 z 索引有一些问题。

简而言之，我在一个称为容器的相对 div 下方有一个绝对 div。在容器中，我有三个 div，左中右都绝对定位。

我希望底部的绝对 div（一条白线）出现在中心 div 的顶部但在左右 div 之后（所有这些都在容器 div 中）

现在 Z-index 做了两件事之一，它要么把白线放在所有三个主要 div 的下面，要么放在它们前面。没有回旋的余地。

[http://dev1.peeknpoke.co.uk](http://dev1.peeknpoke.co.uk)用于网站和参考资料

谢谢你的帮助，

仍在修复我的知识漏洞！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:45:12.283

那是因为你所有的代码都是错误的。`.wrapper`如果您将 z-index 设置为高于，z-index 将起作用`.whiteline`。但是由于 html 是错误的，它会破坏您网站的另一部分。

了解有关 z-index 的更多信息[https://developer.mozilla.org/en-US/docs/CSS/z-index](https://developer.mozilla.org/en-US/docs/CSS/z-index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:46:07.107

1) 移除#whiteline 元素

2) 像这样更改#blackbar 元素的css 属性：

```
background:black url("/img/line.png") repeat-x scroll 0 40px; 
```

3）您应该通过将其切成两半来编辑该`logobackground.png`图像，以免出现在行前。

# tomcat - Grails Tomcat 根上下文和 URL 中的双斜杠 (//)

> ID：14319458
> 
> 赞同：1
> 
> 时间：2013-01-14T13:36:41.150
> 
> 标签：tomcat, grails

`我的 grails 应用程序部署在 Tomcat 7.0.32 的 ROOT 上下文下，在 Debian Stable 上运行。我通过设置 apache-tomcat-7.0.32/conf/Catalina/localhost/ROOT.xml 启用了此功能：

```
<?xml version="1.0" encoding="UTF-8"?> 
<Context path="" docBase="/home/tomcat/explodedWarDirectory/" antiResourceLocking="false" privileged="true" /> 
```

当评估 Grails`g:link`标记或`redirect()`调用来自控制器的 a 时，所有 URL 都包含`//`在开头，可能是因为上下文为空。

所以，我把上面的配置改成了，`<Context path="/"`但还是有同样的问题。

如何使链接或重定向正常工作，这样我`//`的 URL 开头就没有了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:08:56.440

我已经解决了这个问题，感谢评论中的 Andrew。

在`grails-app/conf/Config.groovy`我有一个服务器 URL 的尾部斜杠（在我们的生产部分）：

`grails.serverURL = "http://ourhostname/"`

删除尾部斜杠解决了它。

# python - 使用 R SOAP (SSOAP) 检索数据/抓取

> ID：14319462
> 
> 赞同：4
> 
> 时间：2013-01-14T13:36:48.790
> 
> 标签：python, r, soap, rcurl

在 B 循环页面（www.bcycle.com/whowantsitmore.aspx）上，我试图抓取选票的位置和值。

URL [http://mapservices.bcycle.com/bcycleservice.asmx](http://mapservices.bcycle.com/bcycleservice.asmx)是一个 SOAP 服务。

根据[文档](http://svitsrv25.epfl.ch/R-doc/library/SSOAP/html/genSOAPClientInterface.html)，我相信我做得正确，但由于解析输入参数而出现错误。即使调用没有参数的函数也会产生错误。

```
# working with SOAP
#install.packages("SSOAP", repos="http://www.omegahat.org/R", dependencies = T, type =  "source")
library(SSOAP)

# Process the Web Service Definition Language (WSDL) file
bcycle.asmx <- processWSDL("http://mapservices.bcycle.com/bcycleservice.asmx?WSDL")

# Generate functions based on definitions to access the different data sets
bcycle.interface <- genSOAPClientInterface(bcycle.asmx@operations[[1]], def = bcycle.asmx, bcycle.asmx@name, verbose=T)

# Get the data by requesting the number of cities, username and password (yes it is public)
bcycle.interface@functions$getCities("10","bcycle","c@rbont0ns")
# receive error: Error in as(parameters, "limit.userName.pw") :
# no method or default for coercing "character" to "limit.userName.pw" 
```

这是由于函数中的以下代码：

```
function(parameters = list(...),... etc) {
    ...
    as(parameters, "limit.userName.pw")
    ...
} 
```

因此，我尝试直接使用 .SOAP 函数：

```
# Using RCurl library
library(RCurl)

# set up curl options
curl.opts <- curlOptions(
    verbose=T,
    header=T,
    cookie="ASP.NET_SessionId=dv25ws551nquoezqwq3iu545;__utma=27517231.373920809.1357910914.1357910914.1357912862.2;__utmc=27517231;__utmz=27517231.1357910914.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none);__utmb=27517231.13.10.1357912862",
    httpheader = c('Content-Type' = 'text/xml; charset=utf-8', Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"),
    followLocation = TRUE,
    useragent = "Mozilla/5.0 (Windows NT 6.1; rv:18.0) Gecko/20100101 Firefox/18.0")

# Define header and submit request
bcycle.server <- SOAPServer("http://mapservices.bcycle.com/bcycleservice.asmx")
.SOAP(bcycle.server,
    "getCities",
    limit=250,userName="bCycle",pw="c@rbont0ns",
    action="http://bcycle.com/getCities",
    xmlns="http://bcycle.com/",
    .opts=curl.opts,
    .literal=T,
    nameSpaces = "1.2",
    elementFormQualified = T,
    .returnNodeName = 'getCitiesResponse',
    .soapHeader = NULL) 
```

我设法连接到他们的服务器，但收到错误：

```
System.Web.Services.Protocols.SoapException:
  Server did not recognize the value of HTTP Header SOAPAction:
  http://bcycle.com/getCities#getCities 
```

这些是我尝试过但没有成功的选项。

使用 Python，我能够发出对 getCities 的请求，但没有收到任何回复。

```
import suds

client = suds.client.Client('http://mapservices.bcycle.com/bcycleservice.asmx?WSDL')

print client # prints WSDL info
print client.service.getCities(10,'bcycle','c@rbont0ns') #prints nothing 
```

我真的对保持这个 R 的关注很感兴趣，但是使用 python 可以更容易地了解问题可能是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:33:42.910

尝试更正用户名和显式命名参数：

```
library(SSOAP)
bcycle.asmx <- processWSDL("http://mapservices.bcycle.com/bcycleservice.asmx?WSDL")
bcycle.interface <- genSOAPClientInterface(bcycle.asmx@operations[[1]],
                               def = bcycle.asmx, bcycle.asmx@name, verbose=T)
out <- bcycle.interface@functions$getCities(
                     limit="10",userName="bCycle",pw="c@rbont0ns")

#> out[[1]]@
#out[[1]]@zip               out[[1]]@state_name
#out[[1]]@pop               out[[1]]@latitude
#out[[1]]@ambassador_count  out[[1]]@longitude
#out[[1]]@city_name         

out[[1]]@city_name
#[1] "toledo" 
```

Python 调用也适用于更正的用户名

```
import suds

client = suds.client.Client('http://mapservices.bcycle.com/bcycleservice.asmx?WSDL')
client.service.getCities(10,'bCycle','c@rbont0ns')
(ArrayOfCities){
   Cities[] = 
      (Cities){
         zip = "43606"
         pop = 337362
         ambassador_count = 455261
         city_name = "toledo"
         state_name = "oh"
         latitude = 41.6743
         longitude = -83.6029
      },............ 
```

# java - WS 发送生成的 xml 中的 multiRef

> ID：14319468
> 
> 赞同：6
> 
> 时间：2013-01-14T13:36:56.397
> 
> 标签：java, web-services, jboss, axis

我有在 jboss 上的本地机器上运行的应用程序。
我下载了wsdl文件，在eclipse中生成java代码。运行并出现异常：

> 处理请求时捕获异常：反序列化错误：java.lang.NumberFormatException：对于输入字符串：“”

（应用程序可以与另一个简单的 WS 一起正常工作）。

经过一番谷歌搜索后，我发现代码生成了错误的 xml：
**预期：**

```
<soapenv:Body>
    <ns1:setLevel soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
        xmlns:ns1="###">
        <id xsi:type="xsd:string">x2148</id>
        <level xsi:type="xsd:long">5</level>
    </ns1:setLevel>
</soapenv:Body> 
```

但是通过 TCPMon/Fiddler 我发现我的请求看起来像这样：

```
<soapenv:Body>
    <ns1:setLevel soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
        xmlns:ns1="###">
        <id xsi:type="xsd:string">x2148</id>
        <level href="#id0" />
    </ns1:setLevel>
    <multiRef id="id0" soapenc:root="0"
        soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
        xsi:type="xsd:long" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">5</multiRef>
</soapenv:Body> 
```

谷歌搜索后我发现解决方案是改变

```
<parameter name="sendMultiRefs" value="true"/> 
```

在服务器端的 server-config.wsdd 文件中设置为 false。但是我没有这个文件。
有什么解决办法吗？我只看到一种解决方案——在运行时更改 xml 文件——但这听起来不太好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:01:16.583

server-config.wsdd 文件是远程服务描述的一部分。发布您下载的 WSDL 的实体（服务提供者）必须对其进行更改并重新部署。如果您发布了服务，那么您很幸运……您可以更改它。如果与第三方打交道，你会很不走运。

我们通过将样式表应用于响应以展平多个引用来处理类似的问题。实际上 [here][1] 从 StackOverflow 获得样式表[创建 XSLT 转换以展平 multiRef 编码的 SOAP 消息](https://stackoverflow.com/questions/5185389/creating-xslt-transform-to-flatten-multiref-encoded-soap-message)

它可以很好地将响应展平回您期望的模式。但请注意，它不处理 multiRefs 的 multiRefs。我自己需要一个解决方案。

# php - 使用 google 作为搜索引擎或自定义搜索引擎

> ID：14319473
> 
> 赞同：0
> 
> 时间：2013-01-14T13:37:27.923
> 
> 标签：php, search-engine, google-search

这是我的网站：[我的网站](http://ankursinha.net/TestSite/)

我想知道放置在网站中的搜索栏（使用 Bootstrap 制作），我自己编写代码并制作搜索引擎（我知道该怎么做，我认为我不需要帮助）还是我使用谷歌在我的网站内搜索，并通过保留页眉和页脚在我的网站本身的容器主体中给出结果。我看到我的大学网站搜索引擎是由谷歌提供支持的。

如果后者是一个不错的选择，那么我可以这样做吗？首先它是免费的吗？有些人声称它是免费的，而有些人则声称它不是。所以我想澄清一下。

我只存储了用户配置文件，很快我的数据库中可能会有一些通知、公告、博客、常见问题解答等。所以数据不是那么大或任何东西，但它有点大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:40:51.310

请执行下列操作：

*   谷歌“谷歌 CSE”
*   注册它
*   提供他们要求的所有信息
*   尝试不同的模板和样式并检查适合您的

如果您想要自己的搜索引擎，那么实施它会很困难，因为您是新手，并且不时添加内容，您可能必须以关键字的形式更新内容。所以谷歌是一个不错的选择。

# c++ - 从 QList 中删除重复的对象

> ID：14319474
> 
> 赞同：4
> 
> 时间：2013-01-14T13:37:40.077
> 
> 标签：c++, qt, list, qlist

我有一个`QList<MyData>`，其中`MyData`有 2 个成员，`int id`（唯一）和`QString name`. 我想删除所有基于的重复条目`name`，并且该条目必须在`id`具有相同的其他对象之间最高`name`。关于如何以最快的方式做到这一点的任何建议？性能在这里是一个非常重要的因素。

谷歌一整天后我的一些想法：

*   `qStableSort()`它基于 id （降序），然后遍历，然后对于每个条目，当新条目上不存在时`QList`，将条目复制到另一个新条目`QList``name``QList`
*   使用`QList::toSet`（删除所有重复条目），并提供 operator==() 和基于 的 qHash() 实现`name`，但唯一条目可能没有最高 id
*   使用`std::list::unique`，但我不确定它是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T13:56:48.140

[`std::list::unique`](http://www.cplusplus.com/reference/list/list/unique/)可以将具有以下属性的函数作为参数：

> 二进制谓词，采用与列表中包含的相同类型的两个值，返回 true 以从容器中删除作为第一个参数传递的元素，否则返回 false。这应该是一个函数指针或一个函数对象。

因此，在您的情况下，您可以使用以下功能：

```
bool shouldRemove(MyData first, MyData second)
{
    // remove only if they have the same name and the first id
    // is smaller than the second one 
    return ( first.name == second.name && 
             first.id <= second.id ); 
} 
```

简单地说就是这样做，

```
std::list<MyData> myList = qlist.toStdList();
myList.unique(shouldRemove) 
```

请注意，您需要先排序`std::list`

**编辑**

看来您可以使用`std::unique`with `Qt containers`（如果`Qt`是用 STL 支持构建的）。因此，在这种情况下，您可以执行以下操作：

```
// lessThan is a function that sorts first by name and then by id
qSort(qList.begin(), qList.end(), lessThan );
QList<MyData>::iterator it = std::unique (qList.begin(), qList.end(), shouldRemove);
qList.erase(it, qList.end()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:29:16.570

这个怎么样：

```
QList<MyData> theList = ...;

QHash<QString, int> nameToIdMap;

for (const MyData& element : theList) {

    auto iter = nameToIdMap.find(element.name);
    if (iter != nameToIdMap.end() && iter.second > element.id) {
        // If item exists in map (name already occured) and the ID is 
        // bigger than in the current element, just skip the current element.
        continue;
    }

    // Otherwise, insert/overwrite it in the map.
    nameToIdMap[element.name] = element.id;
});

// nameToIdMap should now map unique names to highest IDs. If desired,
// you could copy it back into a new list by iterating over the map's entries
// and creating new MyData elements accordingly. 
```

在我看来，这样做的好处是：您不必将列表转换为`std`-container 并返回，如果您找到一种方法来继续使用`QMap`而不是 a `QList`，您只需在初始时迭代一次列表。并且`QHash`会给你摊销`O(1)`的查找复杂性。

编辑：更改为`QHash`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:33:16.913

我通过 STL 容器做到了这一点，但我认为将其转换为 Qt 容器并不难

# 包括

```
#include <list>
#include <set>
#include <iostream>
#include <algorithm>

struct MyData {
    int id;
    std::string name;
};

struct MyDataSortComparator {
    bool operator()( const MyData & left, const MyData & right ) {
        if ( left.name < right.name ) {
            return true;
        }
        else if ( left.name > right.name ) {
            return false;
        }
        return left.id > right.id;
    }
};

struct MyDataSetComparator {
    bool operator()( const MyData & left, const MyData & right ) {
        return left.name < right.name;
    }
};

int main() {
    std::list< MyData > theList = {
        { 1, "Dickson" },
        { 2, "Dickson" },
        { 3, "Dickson" },
        { 2, "borisbn" },
        { 1, "borisbn" }
    };
    std::set< MyData, MyDataSetComparator > theSet;
    theList.sort( MyDataSortComparator() );
    std::for_each( theList.begin(), theList.end(), []( const MyData & data ) {
        std::cout << data.id << ", " << data.name << std::endl;
    } );
    std::for_each( theList.begin(), theList.end(), [&theSet]( const MyData & data ) {
        theSet.insert( data );
    } );
    std::cout << "-------------------" << std::endl;
    std::for_each( theSet.begin(), theSet.end(), []( const MyData & data ) {
        std::cout << data.id << ", " << data.name << std::endl;
    } );
} 
```

[http://liveworkspace.org/code/wOFnM](http://liveworkspace.org/code/wOFnM) $5

# jquery - 将元素覆盖在 CSS 中的重复项上

> ID：14319484
> 
> 赞同：0
> 
> 时间：2013-01-14T13:38:14.157
> 
> 标签：jquery, html, css

我在以下页面中有一个 jQuery 菜单：

[菜单](http://tranceil.fm/new/?page_id=837)

如您所见，我将菜单复制了 2 次，因为我需要更多项目并控制每个菜单块。

但是当将鼠标悬停在它们上方时，您可以在背景中看到副本。

如果它们都拥有相同的 CSS 类，我如何将它们叠加在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:03:47.083

你为什么不做两个 CSS 类然后使用[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# ruby - Ruby 的返回值

> ID：14319488
> 
> 赞同：1
> 
> 时间：2013-01-14T13:38:37.470
> 
> 标签：ruby

我对 Ruby 中的返回值感到困惑。例如，如果我这样做

```
(1..5).each {|i| puts 2*i} 
```

它返回

```
=> 1..5 
```

我只是不知道为什么会这样。有时它似乎返回多个变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T13:41:55.083

ruby 中的一切都是一个表达式。* 表达式有一个值。`each`评估它迭代的对象。在这种情况下，它是一个`Range`对象。

看看[Array#each 的定义](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each)：

```
 VALUE
rb_ary_each(VALUE array)
{
    long i;
    volatile VALUE ary = array;

    RETURN_ENUMERATOR(ary, 0, 0);
    for (i=0; i<RARRAY_LEN(ary); i++) {
        rb_yield(RARRAY_PTR(ary)[i]);
    }
    return ary;
} 
```

对于输入数组中的每个元素，它都会调用块，然后返回输入数组。

**从我的脑海中，我无法用 ruby​​ 命名一个不是表达式的东西。*

# android - 是否可以在放入 apk 的文件上写入？

> ID：14319494
> 
> 赞同：0
> 
> 时间：2013-01-14T13:39:01.203
> 
> 标签：android

是否可以在放入 apk 的文件（例如 .txt）上进行写入？当用户关闭我的应用程序时，我想在文件上写一些东西，然后在我的应用程序重新打开时读取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:41:45.690

您应该写入共享首选项或在 app-private /data 文件夹中创建一个文件。如果您在编译时还有其他内容也应该在该文件中，请将其存储到资源中，并在第一次启动时将其写入 /data 中的新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:02:45.917

感谢大家的帮助。@Priya 建议了做我想做的最好的方法。

我使用了首选项。

但我仍然想知道它是否适合我想做的事情。我想跟踪用户在玩我的游戏时获得的积分；当用户重新打开我的应用程序时，我必须显示他们安装我的应用程序后获得的所有积分。我只是想知道 Preferences 是否适合并适用于此，或者我是否应该使用其他东西。

无论如何我发布我的代码，它可能会帮助某人

```
public class managePreferences{
Context context;    

    managePreferences(Context context){
        this.context = context;
    }

    public String readPreference(String fieldName, String defaultValue){    
        SharedPreferences prefs = context.getSharedPreferences("MY_PREFERENCES", Context.MODE_PRIVATE);
        String value = prefs.getString(fieldName, defaultValue);
        return value ;
    }

    public void writePreference(String fieldName, String value){
        SharedPreferences prefs = context.getSharedPreferences("MY_PREFERENCES", Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putString(fieldName, value);
        editor.commit();

    }

} 
```

# android - Android：如果我无法合法安装多个会触发“打开方式”窗口的应用程序，如何在模拟器上测试“打开方式”功能？

> ID：14319496
> 
> 赞同：2
> 
> 时间：2013-01-14T13:39:06.080
> 
> 标签：android

如标题所述。

你会如何解决这个问题？

我不想破解 Android 来安装市场和多个应用程序。

但另一方面，我确实必须测试我的应用程序的“打开方式”功能，我目前无法触发该功能，因为没有 2 个相同的应用程序可以打开某种文件。

注意：我没有真正的手机。

我指的代码是这样的（当用户单击文件时）：

```
 ...
    Intent intnt = new Intent(Intent.ACTION_VIEW);
    Uri uri = Uri.fromFile(f);

    String mime = General.getMimeType(full_path);
    intnt.setDataAndType(uri, mime);

    intnt.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    try {
        startActivity(intnt);

    } catch (ActivityNotFoundException e) {
        Toast.makeText(ctx, 
            "No Application Available to View ...", 
            Toast.LENGTH_SHORT).show();
    }
    finish(); 
```

基本上问题是，当前当我单击图像/音乐文件时，应用程序会自动启动（没有打开窗口）。

而且我无法禁用这些文件的默认应用程序，因为它们是唯一可以运行它们的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:50:03.140

您可以使用 mime 类型`*/*`，它会显示打开窗口：

```
intnt.setDataAndType(uri, "*/*"); 
```

与所有已安装的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:47:03.893

创建一个响应`ACTION_VIEW` `Intent`所需 MIME 类型的测试应用程序，并将其安装在设备上。

`ACTION_VIEW` `Intent`或者，找到可以响应所需 MIME 类型的开源应用程序，并将它们安装在设备上。

# .net - 进程和winrar中的Unicode字符

> ID：14319504
> 
> 赞同：0
> 
> 时间：2013-01-14T13:39:43.073
> 
> 标签：.net, unicode, winrar

我正在使用下面的代码来启动一个新进程并使用 winrar 归档文件：

```
Private Function RunCmd(ParamArray commands As String()) As String
    Dim returnvalue As String = String.Empty

    Dim info As New ProcessStartInfo("cmd")
    info.UseShellExecute = False
    info.RedirectStandardInput = True
    info.RedirectStandardOutput = True
    info.CreateNoWindow = True

    Using process__1 As Process = Process.Start(info)
        Using sw As StreamWriter = process__1.StandardInput
            Using sr As StreamReader = process__1.StandardOutput
                For Each command As String In commands
                    sw.WriteLine(command)
                    IO.File.AppendAllText(workingDir & "\log.txt", command & vbCrLf)
                Next
                sw.Close()
                returnvalue = sr.ReadToEnd()
                sr.Close()
            End Using
        End Using
    End Using

    info = Nothing

    Return returnvalue
End Function 
```

此代码无法归档名称中包含 Unicode 字符的文件。我得到的是：警告：没有文件

如果我在命令提示符下手动运行相同的命令，一切正常。将命令输出到文件的行正确输出命令（存在 unicode 字符）传递给此函数的命令示例如下：

```
rar.exe u "\\mypath\myRarFile.rar" -m5 -wE:\WorkingDir "\\pathToFile\miljö.txt" 
```

谢谢，杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:13:24.973

这解决了我的问题：

```
Private Function RunCmd(ParamArray commands As String()) As String
    Dim returnvalue As String = String.Empty

    Dim info As New ProcessStartInfo("cmd")
    info.UseShellExecute = False
    info.RedirectStandardInput = True
    info.RedirectStandardOutput = True
    info.CreateNoWindow = True

    Using process__1 As Process = Process.Start(info)
        Using sw As StreamWriter = process__1.StandardInput
            Using sr As StreamReader = process__1.StandardOutput
                For Each command As String In commands

                    sw.WriteLine("chcp 65001")

                    sw.WriteLine(command)
                Next
                sw.Close()
                returnvalue = sr.ReadToEnd()
                sr.Close()
            End Using
        End Using
    End Using
    info = Nothing

    Return returnvalue
End Function 
```

# c# - 订阅事件的后台工作者

> ID：14319505
> 
> 赞同：2
> 
> 时间：2013-01-14T13:39:46.187
> 
> 标签：c#, events, backgroundworker

我有一个表格。该表单有一个执行某些操作的逻辑类。我希望表单在完成此操作时能够响应，因此我创建了一个 BackgroundWorker 对象。我还想从逻辑类获取更新到表单。我想使用 BackgroundWorker 的进度更新事件。

所以我将表单上的一个方法订阅到worker.ProgressChanged。

```
public class MyForm : Form
{
    private LogicClass logicObject;

    public void StartOperation()
    {
        BGWorkerBase worker = new BGWorkerBase(logicObject);
        worker.DoWork += new DoWorkEventHandler(DoOperation);
        worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(OperationComplete);
        worker.ProgressChanged += new ProgressChangedEventHandler(worker_ProgressChanged);
        worker.RunWorkerAsync();
    }

    public void DoOperation()
    {
        logicObject.DoSomething();
    }

    private void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        // Update form
    }
} 
```

我创建了一个自定义的 Backgroundworker，它订阅了逻辑类的更新事件并调用 ProgressChanged 事件：

```
public class BGWorkerBase : BackgroundWorker
{
    public BGWorkerBase(LogicClass logicObject)
    {
        // connection is the logic class. it has an update event
        logicObject.UpdatePublished += new EventHandler(connection_UpdatePublished);
        this.WorkerReportsProgress = true;
    }
    // Here I invoke the backgroundworker OnProgressChangedEvent
    private void connection_UpdatePublished(object sender, EventArgs e)
    {
        OnProgressChanged(new ProgressChangedEventArgs(0, e));
    }
} 
```

问题是当我反复触发操作时，更新被多次发布。我检查并发现连接对象有多个订阅了发布事件的工作人员。所以看来我在这里创造了两个问题：
1\. 一个事件被多次发布。2\. 我在连接对象中保留了对后台工作人员的引用，一旦他们完成工作就应该将其处理掉。

解决此问题的最佳方法是什么？我也许可以在工人完成工作时删除它的订阅，但它看起来很脏。有没有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:48:21.820

工作人员完成后，您应该取消订阅该事件。即在您的代码中的某处，您应该添加以下内容：

```
logicObject.UpdatePublished -= connection_UpdatePublished; 
```

这将从注册处理`UpdatePublished`事件的委托列表中删除您的事件处理程序。

这个 SO 问题/答案解释了您如何使用事件意外创建内存泄漏： [为什么以及如何避免事件处理程序内存泄漏？](https://stackoverflow.com/questions/4526829/why-and-how-to-avoid-event-handler-memory-leaks)

# regex - 使用 perl 正则表达式提取 html 元素名称

> ID：14319506
> 
> 赞同：0
> 
> 时间：2013-01-14T13:39:46.483
> 
> 标签：regex, perl, parsing

我尝试能够在 perl 的一个正则表达式中提取 2 种形式的 html 元素名称，例如我有这个：

> 文件.all。*元素名称*。

并且

> document.all[" *ElemName* "]。

还有这个

> document.all[' *ElemName* ']。

而且我需要获取*ElemName*，我只能捕获一个选项，是否可以在 1 个正则表达式中提取它？这就是我所拥有的：

```
document.all[\.\w|\[](\w+) 
```

仅捕获第一个示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:16:11.240

您可以使用命名捕获，自 Perl v5.10 起可用：

```
#!/usr/bin/env perl
use strict;
use warnings;

my @array = qw{
    document.all.ElemName1.
    document.all["ElemName2"].
    document.all['ElemName3'].
};

for (@array) {
    /
        \b
        document\.all
        (?:
            \.(?<elem>\w+)
            | \["(?<elem>\w+)"\]
            | \['(?<elem>\w+)'\]
        )
        \.
    /x;

    print $+{elem}, "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:43:25.653

`ElemName`这将匹配第一个捕获组中的所有三种情况：

```
document\.all\.?(?:\[["'])?(\w+)(?:['"]\])? 
```

演示[在这里](http://rubular.com/r/qwnAZUTAdw)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:43:16.317

您可以使用包含单引号和双引号的字符类来匹配引号：

```
$a = 'document.all.Element["ElemNamea"]';
$b = "document.all.Element['ElemNameb']";
print "a : $a\n";
print "b : $b\n\n";

$a =~ /document.all.Element\[['"](\w+)['"]\]/;  # ["'] matches ' or "
print "result: $a and $1\n";                    # result is in $1
$b =~ /document.all.Element\[['"](\w+)['"]\]/;
print "result: $b and $1\n"; 
```

输出：

```
a : document.all.Element["ElemNamea"]
b : document.all.Element['ElemNameb']

result: document.all.Element["ElemNamea"] and ElemNamea
result: document.all.Element['ElemNameb'] and ElemNameb 
```

# c++ - 如何与 CRTP 一起使用？

> ID：14319512
> 
> 赞同：1
> 
> 时间：2013-01-14T13:40:08.873
> 
> 标签：c++, templates, c++11, typedef, crtp

在创建没有附加功能的类型时，我尝试使用`using`，而不是子类化或使用`typedef`。

我有一个 CRTP 层次结构，我试图在树上传播具体类型。

`GrandKid`似乎编译得很好。有办法`GrandKid_2`上班吗？

**错误信息**

```
junk.cpp:18:26: error: ‘GrandKid_2’ was not declared in this scope 
```

**代码**

```
template<typename T>
struct Parent
{
};

template<typename T>
struct Child
    : public Parent<T>
{
};

struct GrandKid : 
    public Child<GrandKid>
{
};

// using GrandKid_2 = Child<GrandKid_2>;   // doesn't compile

int
main( int argv, char* argc[] )
{
    GrandKid gk;  // ok
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:55:05.987

`using`, like `typedef`, 创建一个别名，而不是一个新类型。因此，您不能使用 GrandKid_2 来定义自己。

您肯定需要创建一个新类型：

```
struct GrandKid_2 : Child<GrandKid_2> {}; 
```

~~对了，你真的想做`GrandKid_2`自己的孩子吗？也许你的意思是`using GrandKid_2 = Child<GrandKid>`~~

# css - 按钮之间的 CSS 空间

> ID：14319513
> 
> 赞同：0
> 
> 时间：2013-01-14T13:40:10.133
> 
> 标签：css, jquery-mobile, button

我试图在 jQuery Mobile 中的两个按钮之间留一个空白区域。现实中的布局是这样的：

```
Button 1      Button 2 (Hidden w/ display: none)        Button 3 
```

在我的页面上，它看起来像这样：

```
Button 1      Button 3 
```

我希望它看起来像这样：

```
Button 1                            Button 3 
```

不删除隐藏的第二个按钮，因为该按钮将显示为返回按钮以返回搜索结果。因此，如果有搜索结果，它应该看起来像在页面顶部，除了 display: none 消失。

我试过 float: 就在第三个按钮上，但这给了我这个：

```
 Button 3              Button 1 
```

任何知道如何解决此问题的 CSS 专家将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:41:46.443

使用`visibility: hidden;`而不是`display: none;`.

# ruby-on-rails - String.to_datetime 不使用当前时区（当没有给出时）

> ID：14319516
> 
> 赞同：8
> 
> 时间：2013-01-14T13:40:26.357
> 
> 标签：ruby-on-rails, datetime

我注意到 Rails 的[String.to_timezone](http://apidock.com/rails/String/to_datetime)方法不使用当前时区，当字符串中没有给出时区时。

```
$ "2013-01-14 14:38".to_datetime
=> Mon, 14 Jan 2013 14:38:00 +0000
$ DateTime.now
=> Mon, 14 Jan 2013 14:39:50 +0100 
```

有没有办法告诉方法使用当前时区？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-20T01:15:09.950

尝试这个：

```
Time.zone.parse('2013-01-14 14:38').to_datetime 
```

这将使用当前时区将字符串解析为日期。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T13:56:21.607

您可以使用的对象上有[#in_time_zone](http://api.rubyonrails.org/classes/DateTime.html#method-i-in_time_zone)方法：`DateTime`

```
"2013-01-14 14:38".to_datetime.in_time_zone
"2013-01-14 14:38".to_datetime.in_time_zone("Prague") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-07T09:16:23.270

使用`in_time_zone`：

```
"2013-01-14 16:06".in_time_zone
=> Mon, 14 Jan 2013 16:06:00 CET +01:00 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-29T14:34:18.187

```
"2013-01-14 16:06".in_time_zone 
```

或者

```
"2013-01-14 16:06".in_time_zone 
```

没有其他答案。

# code-coverage - 从 cobertura 报告中排除某些类

> ID：14319520
> 
> 赞同：3
> 
> 时间：2013-01-14T13:40:36.153
> 
> 标签：code-coverage, gradle, cobertura

我正在使用 gradle-cobertura 插件生成测试覆盖率报告，可以在[此处](https://github.com/valkolovos/gradle_cobertura/wiki)找到。该插件工作得非常好。现在我试图从覆盖率报告中排除一些类。我尝试通过使用闭包配置约定属性来自定义 Cobertura 插件的行为，如下所示：

```
cobertura {
    coverageSourceDirs = sourcesSets.main.groovy.srcDirs
    coverageExcludes = ['class_name.groovy']
} 
```

但是覆盖率报告仍然显示我排除的类。任何帮助将不胜感激。

谢谢和问候， 迪甘塔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T20:21:21.957

您需要使用正则表达式。

```
cobertura {
   coverageSourceDirs = sourcesSets.main.groovy.srcDirs
   coverageExcludes = ['.*com\\.myCompany\\.class_name.*']
} 
```

插件页面上的示例仅显示了一个反斜杠来转义点，但我发现我必须使用双反斜杠（我使用的是 gradle 1.4）。

我还将在评论中支持使用更新的 gradle cobertura 插件的建议——我在[这个](https://github.com/stevesaliman/gradle-cobertura-plugin)插件上很幸运。

# javascript - 使用jQuery单击操作后重新启动功能

> ID：14319522
> 
> 赞同：0
> 
> 时间：2013-01-14T13:40:50.057
> 
> 标签：javascript, jquery, click, jquery-animate, restart

我有一些看起来像这样的功能：

```
var live_search_list = $('.live_search_list ul'),
    active_search_element = live_search_list.find('li.active'),
    search_element = live_search_list.find('li'),
    jsPane = $('.jspPane'); 

$('.bottom_search').click(function(){
    if (!search_element.last().hasClass('active')) {
        active_search_element.removeClass('active');
        active_search_element.next('li').addClass('active');
        jsPane.animate({top:"-=95px"});
    }
});
$('.top_search').click(function(){
    if (!search_element.first().hasClass('active')) {
        active_search_element.removeClass('active');
        active_search_element.prev('li').addClass('active');
        jsPane.animate({top:"+=95px"});
    }
}); 
```

所以，第一次点击后问题就开始了，我只有一个动作——这个是动画。第一次点击后功能不再检查我的状况，也没有改变，删除类`active`。每次单击此按钮后如何重新启动此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:02:33.577

您没有设置`active_search_element`到新的活动元素！

该行：

```
active_search_element = live_search_list.find('li.active') 
```

只选择当时的元素，它不会神奇地保持更新。

```
$('.bottom_search').click(function(){
    if (!search_element.last().hasClass('active')) {
        active_search_element.removeClass('active');
        active_search_element = active_search_element.next('li').addClass('active');
        jsPane.animate({top:"-=95px"});
    }
});

$('.top_search').click(function(){
    if (!search_element.first().hasClass('active')) {
        active_search_element.removeClass('active');
        active_search_element  = active_search_element.prev('li').addClass('active');
        jsPane.animate({top:"+=95px"});
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:02:44.590

将下一个`li`活动类设为活动类后，您需要将其重新缓存到`active_search_element`

```
var live_search_list = $('.live_search_list ul'),
    active_search_element = live_search_list.find('li.active'),
    search_element = live_search_list.find('li'),
    jsPane = $('.jspPane'); 

$('.bottom_search').click(function(){
    if (!search_element.last().hasClass('active')) {
        active_search_element.removeClass('active');
        active_search_element.next('li').addClass('active');
        active_search_element = live_search_list.find('li.active')
        jsPane.animate({top:"-=95px"});
    }
});
$('.top_search').click(function(){
    if (!search_element.first().hasClass('active')) {
        active_search_element.removeClass('active');
        active_search_element.prev('li').addClass('active');
        active_search_element = live_search_list.find('li.active')
        jsPane.animate({top:"+=95px"});
    }
}); 
```

# python - PythonPath pydev 从开发到生产的移植

> ID：14319525
> 
> 赞同：0
> 
> 时间：2013-01-14T13:40:55.637
> 
> 标签：python, eclipse, pydev, production

我即将将我的项目从开发系统移植到生产服务器。一切都准备好了（服务器等）。我正要在这台服务器上运行我的应用程序（你知道我安装了 MySQL，构建了一些 chroot，安装了强化等），但我遇到了不知道位于 /project/src/lib 的导入的问题。虽然这曾经在我的 Eclipse/pyDev 环境中工作。我做了一些挖掘，发现 pyDev 设置了一些环境变量。像 PYTHON_PATH 一样。

所以，我也这样做了：

`#!/bin/bash`
`PROJECT_PATH="/opt/project"` `export PYTHONPATH=$PYTHONPATH:$PROJECT_PATH:$PROJECT_PATH/src:$PROJECT_PATH/static:$PROJECT_PATH/tests`

`python project.py`

它没有用。同样的错误，我只是不知道我还应该改变什么。阅读 pyDev 文档，我打赌它是一个常见问题。我仍然想得到答案，因为我似乎无法在网上找到答案。

作为对 Python_Path 环境变量的响应：

我知道这一点，对不起，我在这里打错了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:52:46.670

环境变量是`PYTHONPATH`，不是`PYTHON_PATH`。请参阅[文档](http://docs.python.org/2.7/using/cmdline.html?highlight=pythonpath#envvar-PYTHONPATH)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:17:42.013

可能您将其设置在错误的位置（即：您的脚本没有被调用，或者它创建了另一个具有不同变量的 shell）。

您可以通过执行以下操作检查 python 程序中的“真实”PYTHONPATH：

```
import sys
print('\n'.join(sorted(sys.path))) 
```

并检查路径是否符合您的预期。

您甚至可以编辑 sys.path 作为您的程序在其中执行的第一件事，`__main__`因为这就是 python 在导入过程中使用的内容。

# javafx-2 - JavaFX 2.x：为 XY LineChart 设置停靠点

> ID：14319526
> 
> 赞同：1
> 
> 时间：2013-01-14T13:41:01.287
> 
> 标签：javafx-2, linechart

通过鼠标左键单击图表上的任意位置，可以向左/向右移动（拖动）绘制的线

这是代码

```
import javafx.application.Application; 
import javafx.beans.property.SimpleDoubleProperty; 
import javafx.event.EventHandler;  
import javafx.scene.chart.NumberAxis; 
import javafx.scene.chart.XYChart; 
import javafx.stage.Stage; 
import javafx.scene.Scene; 
import javafx.scene.chart.LineChart; 
import javafx.scene.input.MouseEvent; 
import javafx.scene.layout.BorderPane; 

public class XYMove extends Application {

BorderPane pane; 
XYChart.Series series1 = new XYChart.Series(); 

SimpleDoubleProperty rectinitX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectY = new SimpleDoubleProperty(); 

@Override 
public void start(Stage stage) { 

final NumberAxis xAxis = new NumberAxis(4, 16, 1); 
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005); 

xAxis.setAnimated(false);
yAxis.setAnimated(false);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) { 

@Override 
public String toString(Number object) { 
    return String.format("%7.5f", object); 
} 
}); 

final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis); 

lineChart.setCreateSymbols(false); 
lineChart.setAlternativeRowFillVisible(false); 
lineChart.setAnimated(false); 
lineChart.setLegendVisible(false);

series1.getData().add(new XYChart.Data(1, 0.53185)); 
series1.getData().add(new XYChart.Data(2, 0.532235)); 
series1.getData().add(new XYChart.Data(3, 0.53234)); 
series1.getData().add(new XYChart.Data(4, 0.538765)); 
series1.getData().add(new XYChart.Data(5, 0.53442)); 
series1.getData().add(new XYChart.Data(6, 0.534658)); 
series1.getData().add(new XYChart.Data(7, 0.53023)); 
series1.getData().add(new XYChart.Data(8, 0.53001)); 
series1.getData().add(new XYChart.Data(9, 0.53589)); 
series1.getData().add(new XYChart.Data(10, 0.53476));
series1.getData().add(new XYChart.Data(11, 0.53023)); 
series1.getData().add(new XYChart.Data(12, 0.53001)); 
series1.getData().add(new XYChart.Data(13, 0.53589)); 
series1.getData().add(new XYChart.Data(14, 0.53476)); 

pane = new BorderPane(); 
pane.setCenter(lineChart); 
Scene scene = new Scene(pane, 800, 600); 
lineChart.getData().addAll(series1); 

stage.setScene(scene);         

scene.setOnMouseClicked(mouseHandler); 
scene.setOnMouseDragged(mouseHandler); 
scene.setOnMouseEntered(mouseHandler); 
scene.setOnMouseExited(mouseHandler); 
scene.setOnMouseMoved(mouseHandler); 
scene.setOnMousePressed(mouseHandler); 
scene.setOnMouseReleased(mouseHandler); 
stage.show();
} 

EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() { 

@Override 
public void handle(MouseEvent mouseEvent) { 

if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {             
    rectinitX.set(mouseEvent.getX()); 
} 
else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED ||   mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED) { 
    LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter(); 
    NumberAxis xAxis = (NumberAxis) lineChart.getXAxis(); 

    double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound()); 
    double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound();             
    double Delta=0.3;

    if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED){
    if(rectinitX.get() < mouseEvent.getX()){    
        newXlower=xAxis.getLowerBound()-Delta;
        newXupper=xAxis.getUpperBound()-Delta;
    }
else if(rectinitX.get() > mouseEvent.getX()){    
        newXlower=xAxis.getLowerBound()+Delta;
        newXupper=xAxis.getUpperBound()+Delta;
    }    
    xAxis.setLowerBound( newXlower ); 
    xAxis.setUpperBound( newXupper );                        
    }                                        
    rectinitX.set(mouseEvent.getX());                                 
 } 
 } 
 }; 
  public static void main(String[] args) {
    launch(args);
}
} 
```

现在我的问题是：有没有办法修改此代码，以便在 X 值为 == 0（无需步入负 X 值）且 X == NumberAxis 的结束值时停止左/右移动？（在这种情况下 == 16）。

```
final NumberAxis xAxis = new NumberAxis(4, 16, 1); 
```

非常感谢。

# powershell - powershell 中的“%”字符

> ID：14319527
> 
> 赞同：0
> 
> 时间：2013-01-14T13:41:07.010
> 
> 标签：powershell

我是 powershell 新手，最近看到了这个代码片段：

```
$users = Get-User 
$users | % { $user = $_; Get-MailboxStatistics $_ | % 
    { 
        "User name:{0} - some mailbox statistics: {1}" -f $user.SomePropertyOfUser, $_.SomePropertyOfMailbox
    } 
} 
```

这里的 % 是什么意思？它似乎是在标记一段代码的开始，对吗？很多谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:42:56.313

这是`foreach-object`cmdlet的别名

另一个经常使用的别名是 :`?`代表`where-object`

# modal-dialog - 模态窗口内的video.js：全屏不起作用

> ID：14319531
> 
> 赞同：1
> 
> 时间：2013-01-14T13:41:16.077
> 
> 标签：modal-dialog, video.js

我一直在使用 video.js 在模态窗口中显示内容，如您在此处看到的：

[http://www.csdalbenga.it/galleria1.html](http://www.csdalbenga.it/galleria1.html)

点击“Clicca qui per visionare il video della recita！” 按钮。

所以，问题来了：视频工作正常，但全屏按钮只会让视频填满模态窗口，所以基本上什么都不会发生，或者大小会略有变化，具体取决于浏览器。

现在我想知道，有没有办法强制视频全屏？否则我想我将不得不删除按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:00:05.953

您的模态将播放器置于 iframe 中，除非您明确允许，否则浏览器将不允许在 iframe 中全屏显示。以下内容至少适用于 Chrome 和 Firefox；Internet Explorer 根本没有实现允许从 iframe 全屏显示。

```
<iframe … allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"> 
```

# azureservicebus - 在 Azure 服务总线中处理不同消息类型的最佳做法是什么

> ID：14319539
> 
> 赞同：7
> 
> 时间：2013-01-14T13:41:43.540
> 
> 标签：azureservicebus

我不熟悉使用基于消息的体系结构，例如 Azure 服务总线主题/订阅功能。

我想知道如何最好地处理不同的消息类型。

例如说我有两条消息。一个用于创建新客户，另一个用于删除客户。

我可以;

1.  创建两个主题。每个主题将有一个订阅。处理消息的代码将独立处理其消息类型。

2.  为客户创建一个主题。创建一个订阅以接收所有消息。处理消息的代码需要在处理之前确定消息类型。

3.  为客户创建一个主题。创建两个订阅，过滤消息类型。处理消息的代码将独立处理其消息类型。

我敢肯定没有对错之分，但希望在这方面有经验的人提供一些意见。

非常感谢，

大卫

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T19:07:31.510

选择主题/订阅的一些注意事项：

1.  您是否会有一个对不同消息类型或单个消息类型感兴趣的单个节点（进程/应用程序等）。如果您需要一个应用程序来处理多种消息类型（添加和删除），那么最好有一个主题。然后，您的应用可以收听单个订阅并处理两条消息，您还可以将应用的更多实例添加到该单个订阅。稍后，如果您决定分离该处理，您仍然可以创建两个不同的订阅并过滤消息以将添加/删除消息发送给一个或另一个。

2.  如果您的系统专注于单个客户，假设您正在编写针对每个客户的多个服务，那么每个客户有一个主题是好的，因为您可以与客户线性扩展，并且在不同客户之间有明确的授权/处理边界。但是，如果您通过单个多租户服务处理所有客户请求，并且不希望每个客户拥有不同的服务实例，那么这不是最佳方法。

    以单个主题开始为您提供了很大的灵活性，然后随着系统的发展，您可以使用[ForwardTo](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.subscriptiondescription.forwardto.aspx)将消息从单个订阅引导到另一个主题/队列等。这允许您从一个简单的拓扑开始创建丰富的消息传递拓扑。

# shell - 用于在文件名中搜索字符串模式的 Shell 脚本

> ID：14319542
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:41:48.123
> 
> 标签：shell

嗨，我想编写一个脚本，该脚本将转到包含许多文件的目录并搜索文件名，例如 test_HTTP_abc.txt 并搜索*HTTP*字符串模式，如果它包含此字符串，则设置一个等于某物的变量：

就像是：

var1=0

搜索 06 如果它包含 06 then var1=1 else var1=0 end if

但在 Unix 脚本中。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:52:08.580

可能最简单的事情是：

```
if test "${filename#*HTTP}" = "$filename"; then
  # the variable does not contain the string `HTTP`
  var=0
else
  var=1
fi 
```

一些 shell 允许在`[[`比较中进行正则表达式匹配，但没有必要在脚本中引入那种不可移植的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:51:14.473

像这样？

```
var=0
if fgrep -q 06 /path/to/dir/*HTTP*
then
    var=1
fi 
```

`fgrep`如果其中一个文件匹配，则返回 0（“真值”），否则返回非真（包括没有匹配输入文件的情况）。

如果您想要匹配文件的列表，请尝试`fgrep -l`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T13:49:58.263

好吧，我不会为你写脚本，你必须学习:)

如果您将其分解为较小的任务，则很容易；

该`ls`命令用于查看目录的内容。您还可以使用该`find`命令更直观一些，例如`find /some/folder -name "*string*"`

筛选命令的输出。您可以将命令的输出存储到[变量](https://stackoverflow.com/questions/4651437/how-to-set-a-bash-variable-equal-to-the-output-from-a-command)或使用[管道](https://stackoverflow.com/questions/2746553/bash-script-read-values-from-stdin-pipe)。

您可以使用`awk`( [link](http://www.cyberciti.biz/faq/bash-scripting-using-awk/) )、`grep`( [link](http://www.cyberciti.biz/faq/grep-in-bash/) ) 等搜索此输出。

在 bash 中设置变量也很容易；[http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-5.html](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-5.html)

`foundit=1`

您为什么不先尝试解决这个难题，而不是让别人告诉您：D 告诉我们您陷入难题的哪个地方。

# java - JPA 持续一段时间

> ID：14319544
> 
> 赞同：1
> 
> 时间：2013-01-14T13:41:57.250
> 
> 标签：java, jpa

我需要坚持一段时间，例如 5 d 4 h

我正在考虑使用转换（持续时间/日历/日期类），我可以将其作为`long (millisec)`数据库（MySql）持久化。像这样我可以很容易地转换和使用它。

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:06:13.080

对于 Hibernate 4.0 JPA 提供者，您可以使用[Usertype 项目](http://usertype.sourceforge.net/usertype-userguide.html)来获取 Joda Time 类的 JPA 持久性，然后使用 @Type 注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:54:10.403

JodaTime（以及即将推出的 javax.time）提供了一个 Duration 类，而[DataNucleus JPA](http://www.datanucleus.org)等 JPA提供程序为它们提供了开箱即用的持久性，而无需进行转换。

# apache - Apache 服务器签名

> ID：14319545
> 
> 赞同：1
> 
> 时间：2013-01-14T13:42:02.960
> 
> 标签：apache

我将 xampp 与 Apache/2.4.2 一起使用。我正在尝试隐藏 serverSignature。这就是我在 httpd.conf 文件中所写的内容。

serverSignature 关闭 serverTokens 主要

我已经一一尝试了 serverSignature 和 serverTokens 并且还一起尝试了它们。但结果仍然相同，即“Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4 Server at localhost Port 80” 我在做什么有什么问题？每次更改 httpd.conf 文件时，我都会重新启动 apache。我是 Apache 的新手。请帮我解决这些问题。您还可以建议我学习 Apache 的资源，而不是 apache 的吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:48:54.530

我刚刚找到了解决我的 serverSignature 问题的方法，我正在使用exampp。当我在 /xampp/apache/conf/extra/httpd-default.conf 中看到 httpd-default.conf 文件时，我正在搞乱它的配置文件。在那里我看到了上述两个指令，我改变了那里的参数，并且 apache 以我想要的方式工作。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T04:04:56.943

对于 XAMPP，转到`/xampp/apache/conf/extra/httpd-default.conf`并对其进行编辑以设置选项`serverSignature=Off`和`serverTokens=Prod`.

# dictionary - 返回Json（字典 ) -> javascript

> ID：14319547
> 
> 赞同：0
> 
> 时间：2013-01-14T13:42:15.653
> 
> 标签：dictionary, jsonresult

我在返回 Json 对象时遇到问题。这是代码。

```
 public JsonResult getDictionary(List<Int32> input)
 {
    Dictionary<Int32, Int32> dict = new Dictionary<Int32, Int32>();
    ...fill dict
    return Json(dict);
 } 
```

这是javascript代码

```
 var dict = new Object();
 ...
 $("#Button").click(function ()
 {
 var postData = { input: inputArray };

     $.ajax({
         type: "POST",
         url: "/Auction/getDictionary",
         data: postData,
         success: function(data){
             for(var i in data){
                 dict[i.Key] = i.Value;
             }
             //dict = data;
         },
         dataType: "json",
         traditional: true
     });
}); 
```

我的问题是“dict”没有被“data”填充，我无法检查“data”中是否有任何值，因为我无法在那里设置断点。

我已经在[这里](https://stackoverflow.com/questions/4256337/how-can-i-return-a-dictionarystring-object-as-jsonresult-and-get-the-proper)找到了一个类似的问题，但我不明白他在做什么。

编辑：我收到此错误（我尝试将其翻译成英文）：[ArgumentException]：类型“System.Collections.Generic.Dictionary`2[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]" 将不支持字典的序列化/反序列化。键必须是字符串或对象。

我将尝试在一个对象中使用一个包含两个整数的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T07:33:35.800

使用 List< List< Int32>> 给我以下结果： [[82,193],[136,142], ... ] 不如字典，但它有效。

# blackberry - 标签在黑莓中滚动

> ID：14319548
> 
> 赞同：0
> 
> 时间：2013-01-14T13:42:19.853
> 
> 标签：blackberry, tabs

在应用程序中，我有六个选项卡。我的问题是当我滚动屏幕时，我的选项卡也会滚动，但我希望修复 tabview。选项卡应始终可见。

开始屏幕是：---- ![当我运行我的应用程序屏幕看起来像这样](../Images/0aa7e47dc55ecceafd52ad8bbee4328a.png) 滚动后是：-------- ![当我向下滚动上方的标签移位器时，按钮下方有广告。](../Images/cce21c9aa2608d344a1b48f2b3727b52.png) 下面的分享经文按钮我显示了广告来查看这些标签，我需要向下滚动。当我向下滚动屏幕时，如上图所示。任何建议都会受到重视。请让我知道我在哪里做错了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:54:37.787

这就是你现在所拥有的：

```
 MainScreen's default manager (with scroll)
    ---------------------
    | ----------------- |
    | |  TABS         | |
    | ----------------- |
    |                   |
    | ----------------- |
    | |  Other things | |
    | ----------------- |
    --------------------- 
```

这应该是这样的：

```
 MainScreen's default manager (without scroll)
    ------------------------
    | -------------------- |
    | |     TABS         | |
    | -------------------- |
    |                      |
    |VerticalFieldManager  |
    | -------------------- |
    | |    Other things  | |
    | -------------------- |
    ------------------------ 
```

当您向 a 添加内容时`MainScreen`，实际上是将其添加到`VerticalFieldManager`在屏幕构造函数中在幕后创建的 a 中。此管理器默认具有滚动功能，但可以在`super`调用中自定义：

```
 public class MyScreen extends MainScreen {

        public MyScreen(){
            super(Manager.NO_VERTICAL_SCROLL);
        }

        ...
    } 
```

现在您需要添加到屏幕的是您的选项卡管理器，最后将所有其他字段添加到`VerticalFieldManager`滚动条中。

# asp.net-mvc-4 - 下划线字符串模型活页夹

> ID：14319552
> 
> 赞同：4
> 
> 时间：2013-01-14T13:42:45.373
> 
> 标签：asp.net-mvc-4, model-binding

我的印象是，当绑定到复杂模型时，所有公共属性都已处理，并尝试为每个属性进行匹配绑定。

我正在尝试解决变量命名问题，以便模型

```
class Model {
      public string Foo {get;set;}
      public string FooBar {get;set;}
} 
```

与查询字符串很好地配合使用

```
?foo=foo&foo_bar=foo_bar 
```

有没有比使用自定义模型绑定器更好的方法？无论如何，我的不起作用。FooBar 被简单地跳过。

```
public class StringModelBinder : DefaultModelBinder
    {
        public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            var model = base.BindModel(controllerContext, bindingContext);

            if (model != null)
                return model;

            var modelName = Regex.Replace(bindingContext.ModelName, "([a-z])([A-Z])", "$1_$2").ToLowerInvariant();

            var value = bindingContext.ValueProvider.GetValue(modelName);

            return value;
        }

    } 
```

注册于

```
ModelBinders.Binders.Add(typeof(string), new StringModelBinder()); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T13:48:53.277

> 我的印象是，当绑定到复杂模型时，所有公共属性都已处理，并尝试为每个属性进行匹配绑定。

不，这是错误的印象。默认模型绑定器将尝试仅绑定您在请求中具有相应值的属性。在您的情况下，您没有 FooBar 属性的相应值，因此它不会被绑定。

实际上，如果我们可以这样写就好了：

```
public class Model
{
    public string Foo { get; set; }

    [ParameterName("foo_bar")]
    public string FooBar { get; set; }
} 
```

所以让我们实现它。我们首先编写一个基本属性：

```
[AttributeUsageAttribute(AttributeTargets.Property)]
public abstract class PropertyBinderAttribute : Attribute, IModelBinder
{
    public abstract object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext);
} 
```

和一个自定义模型绑定器：

```
public class CustomModelBinder : DefaultModelBinder
{
    protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
    {
        var propertyBinderAttribute = propertyDescriptor
            .Attributes
            .OfType<PropertyBinderAttribute>()
            .FirstOrDefault();

        if (propertyBinderAttribute != null)
        {
            var value = propertyBinderAttribute.BindModel(controllerContext, bindingContext);
            propertyDescriptor.SetValue(bindingContext.Model, value);
        }
        else
        {
            base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
        }
    }
} 
```

如您所见，此自定义模型分析模型的元数据，并且如果使用 PropertyBinderAttribute 的实例修饰属性，它将使用它。

然后，我们将用我们的自定义模型替换默认模型绑定器`Application_Start`：

```
ModelBinders.Binders.DefaultBinder = new CustomModelBinder(); 
```

现在剩下的就是实现我们用来装饰模型属性的 ParameterNameAttribute 绑定器：

```
public class ParameterNameAttribute : PropertyBinderAttribute
{
    private readonly string parameterName;
    public ParameterNameAttribute(string parameterName)
    {
        this.parameterName = parameterName;
    }

    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var value = bindingContext.ValueProvider.GetValue(this.parameterName);
        if (value != null)
        {
            return value.AttemptedValue;
        }
        return null;
    }
} 
```

# bash - 如何尽可能紧凑地确定最新的主要和完整内核版本字符串

> ID：14319555
> 
> 赞同：4
> 
> 时间：2013-01-14T13:42:57.623
> 
> 标签：bash, sed, grep, cut, archlinux

所以我打算在这里做的是尽可能紧凑地确定最新的主要版本和完整的内核版本字符串（没有无数管道到 grep）。

我已经对结果非常满意，但是如果有人知道如何压缩第一行，即使是最轻微的，它也会非常棒（当[没有小补丁](http://wayback.archive.org/web/20120807125753/http://kernel.org/)时它也必须工作）。

[与http://www.kernel.org/pub/linux/kernel/v3.x/](http://www.kernel.org/pub/linux/kernel/v3.x/)的 136kB 相比，kernel.org 的索引只有 36kB，这就是我使用它的原因：

```
_major=$(curl -s http://www.kernel.org/ -o /tmp/kernel && cat /tmp/kernel | grep -A1 mainline | tail -1 | cut -d ">" -f3 | cut -d "<" -f1) 
pkgver=${_major}.$(cat /tmp/kernel | grep ${_major} | head -1 | cut -d "." -f6) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:30:01.680

这只是现阶段的一个思考练习，因为真正的答案在上面的评论中，但这里有一些可能的改进。

原来的：

```
_major=$(curl -s http://www.kernel.org/ -o /tmp/kernel && cat /tmp/kernel | grep -A1 mainline | tail -1 | cut -d ">" -f3 | cut -d "<" -f1) 
```

使用 tee 代替 cat：

```
_major=$(curl -s http://www.kernel.org/ | tee /tmp/kernel | grep -A1 mainline | tail -1 | cut -d ">" -f3 | cut -d "<" -f1) 
```

使用 sed 最小化管道数量，并使命令不可读

```
_major=$(curl -s http://www.kernel.org/ | tee /tmp/kernel | sed -n '/ainl/,/<\/s/ s|.*>\([0-9\.]*\)</st.*|\1|p') 
```

便宜的技巧：缩短网址

```
_major=$(curl -s kernel.org | tee /tmp/kernel | sed -n '/ainl/,/<\/s/ s|.*>\([0-9\.]*\)</st.*|\1|p') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-27T18:08:26.870

[kernel.org 在https://www.kernel.org/finger_banner](https://www.kernel.org/finger_banner)提供了所有当前版本的明文列表

对于主线：

```
curl -s https://www.kernel.org/finger_banner | grep mainline | awk '{print $NF}' 
```

对于最新的稳定：

```
curl -s https://www.kernel.org/finger_banner | grep -m1 stable | awk '{print $NF}' 
```

主线和最新的稳定版本永远不会 EOL，但其他版本通常是，因此上述 awk 命令不会对所有版本都正常工作。作为 bash 函数的一般解决方案：

```
latest_kernel() {
    curl -s https://www.kernel.org/finger_banner | grep -m1 $1 | sed -r 's/^.+: +([^ ]+)( .+)?$/\1/'
} 
```

例子：

```
$ latest_kernel mainline
4.18-rc2
$ latest_kernel stable
4.17.3
$ latest_kernel 4.16
4.16.18 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:42:44.927

你有一个[无用的 cat](http://partmaps.org/era/unix/award.html)。您可以更换：

```
cat /tmp/kernel | grep -A1 mainline 
```

简单地说：

```
grep -A1 mainline /tmp/kernel 
```

就您而言，您甚至根本不需要该文件。Curl 默认会发送到标准输出，所以你可以这样做：

```
curl -s http://www.kernel.org/ | grep -A1 mainline 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-01T04:34:24.580

扩展@Justin Brewer 的答案，您可能想知道内核何时 EOL，因为这是有用的信息……以下单个 awk 命令为您保留所有这些信息。

```
latest_kernel() {
    curl -s https://www.kernel.org/finger_banner |awk -F ':' -v search="$1" '{if ($1 ~ search) {gsub(/^[ ]+/, "", $2); print $2}}'
} 
```

*   -F ':' -- 字段分隔符，因为 : 之后的所有内容都是版本字符串。
*   -v search="$1" -- 将搜索字符串作为 awk 内部变量传递
*   if 语句 -- 检查字段 $1 是否与搜索字符串匹配
*   gsub -- 就地修改字段 $2 以去除前导空格

然后只需为任何匹配的记录打印字段 $2 （我假设您的搜索字符串只会匹配一行的左侧......如果在第一次匹配后退出很重要，请使用`print $2; exit`）

搜索字符串可以包含空格等。使用 awk 变量和匹配`~ variable`而不是模式匹配 '.../'"$1"'/...' 避免了退出单引号模式的需要并避免语法错误，其中搜索字符串包含“/”。

# r - 计算网络中的周期

> ID：14319556
> 
> 赞同：5
> 
> 时间：2013-01-14T13:42:59.067
> 
> 标签：r, social-networking, graph-theory, igraph

最好的方法是什么，或者是否有任何实现的方法是计算网络中的 3 和 4 个周期。

3 个周期相等连接组的三个节点（三角形）要从一个模式网络计算 4 个周期相等连接的四个节点组（正方形）要从两个模式网络计算

如果我有这样的网络：

```
onemode <- read.table(text= "start end
                              1    2
                              1    3
                              4    5
                              4    6
                              5    6",header=TRUE)

twomode <- read.table(text= "typa typev
                              aa    a
                              bb    b
                              bb    a
                              aa    b",header=TRUE) 
```

我想

```
 library(igraph)
 g <- graph.data.frame(twomode)
 E(g)
 graph.motifs(g, size = 4) 
```

会计算我的两种模式网络中的正方形数量，但我不明白输出。我以为结果是 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:42:10.990

`?graph.motifs`

> graph.motifs 在图形中搜索给定大小的图案，并返回一个包含不同图案数量的数字向量。基序的顺序由它们的同构类定义，参见 graph.isoclass。

因此，它的输出是数字向量，其中每个值都是图中某个主题（大小为 4 或 3）的计数。

```
 graph.motifs(g,size=4) 
```

要获得图案的总数，您可以使用`graph.motifs.no`

```
graph.motifs.no(g,size=4)
[1] 1 
```

哪个是主题的编号 20

```
which(graph.motifs(g,size=4) >0)
[1] 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T14:42:06.173

另一个可能更容易用于此任务的函数是 kcycle.census {sna}。详情：[http ://svitsrv25.epfl.ch/R-doc/library/sna/html/path.census.html](http://svitsrv25.epfl.ch/R-doc/library/sna/html/path.census.html)

# c# - 安装 .NET 后是否可能无法使用 C# 编译？

> ID：14319559
> 
> 赞同：0
> 
> 时间：2013-01-14T13:43:18.993
> 
> 标签：c#, .net, deployment, compilation

[这个答案](https://stackoverflow.com/a/826435/57428)显示了如何`CSharpCodeProvider`在运行时使用类来编译 C# 代码片段。由于这是一项相当具体的任务，我不确定每个安装了 .NET Framework 的系统是否都具有此功能——也许必须安装一些额外的东西。

它的 C# 代码编译功能是否`CSharpCodeProvider`可以在任何安装了 .NET Framework 的系统上使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:48:34.997

根据[CSharpeCodeProvider 类](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.csharp.csharpcodeprovider%28v=vs.110%29.aspx)的 MSDN 文档，它在所有框架中都可用

> 提供对 C# 代码生成器和代码编译器实例的访问。
> 
> .NET Framework
> 支持：4.5、4、3.5、3.0、2.0、1.1、1.0
> 
> .NET Framework 客户端配置文件
> 受以下版本支持：4、3.5 SP1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:02:33.653

之前的所有答案都是正确的，但是我在没有安装 .NET SDK/Visual Studio 的 VM 上进行了测试。它是一个普通的 2003 服务器，带有 .NET 4 Client Profile + .NET 4 Extended Framework。

结果是在这个设置中 CSharpCodeProvider 工作得很好！

如果您想进一步保护自己，可以通过以下调用检查特定代码提供程序的可用性：

```
 CodeDomProvider.IsDefinedLanguage("CSharp") 
```

[这种方法的文档](http://msdn.microsoft.com/EN-US/library/cedfxzxs%28v=VS.100,d=hv.2%29.aspx)说：

> 机器配置文件 (Machine.config) 中的元素包含计算机上每个 CodeDomProvider 实现的语言提供程序和编译器配置设置。IsDefinedLanguage 方法在提供程序配置元素中搜索指定的语言名称。

因此，可以在 CodeProvider 无法工作的计算机上运行您的程序（可能是一些偏执的系统管理员想要禁用动态代码编译（尽管它没有意义，因为使用 CodeDomProvider 无论如何都需要完全信任））。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T13:48:53.877

来自[CSharpCodeProvider 文档](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)：

> 版本信息 .NET Framework 支持：
> 
> 4.5、4、3.5、3.0、2.0、1.1、1.0
> 
> .NET Framework 客户端配置文件支持：
> 
> 4、3.5 SP1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T13:49:01.473

AFAIK`CSharpCodeProvider`只是 .NET 的包装器`csc.exe`，而.NET`csc.exe`的每个*桌面*版本都提供了 .NET（例如，Silverlight 上不提供）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T13:52:52.643

除了其他答案之外，似乎语言规范实际上与这个程序集相关，所以我相信答案是“是”。

请参阅：[动态（C# 参考）](http://msdn.microsoft.com/en-us/library/dd264741.aspx)（基于[https://stackoverflow.com/a/2460934/211627](https://stackoverflow.com/a/2460934/211627)的答案）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T13:48:21.647

[http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider%28v=vs.71%29.aspx)

第一次点击谷歌。点击“其他版本”

它提供了此类（以及因此此功能）可用的版本列表。

似乎这个类从 1.1 版开始可用，我想说这可能是每个版本，因为甚至 Object 类都回到了那个版本。

# php - 如何在我的 FTP 上上传 blob

> ID：14319563
> 
> 赞同：0
> 
> 时间：2013-01-14T13:43:31.447
> 
> 标签：php, upload, blob

我用 curl 检索 Blob ：

```
$ch = curl_init("http://MYURLFORRETRIEVEANIMAGE");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_USERPWD, $username . ":" . $password);
$img = curl_exec($ch);
curl_close($ch); 
```

`$img`我的 BLOB 也是如此。

现在，我想在我的 ftp 上上传这个 blob。我不知道我应该做什么？？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:46:12.437

PHP 有一个[FTP](http://php.net/manual/en/book.ftp.php)扩展。使用它，您可以获取文件，并将其上传到您的 FTP 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:46:50.377

您的 ftp 是否与您的脚本位于同一台机器上？如果是：只需通过[fwrite写入 $img 的内容](http://php.net/manual/en/function.fwrite.php)

# image - 使用 gtk 的图像查看器

> ID：14319564
> 
> 赞同：1
> 
> 时间：2013-01-14T13:43:31.623
> 
> 标签：image, gtk

我正在使用图像查看器。我想创建一个区域，其中将显示文件夹中所有图像的缩略图（如 gnome 之眼）。任何人都知道如何使用 Gtk 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:15:04.770

您可以通过在水平 GtkScrollbar 内使用水平 GtkBox 来模拟​​ Eye Of Gnome 行为。只需将您的缩略图添加到 GtkBox，就是这样：

```
+------------------------------------+
|                                    |
|                                    |
|                                    |
|       Your image viewer            |
|                                    |
|                                    |
|                                    |
+------------------------------------+
| GtkBox                             |
| +--------------------------------+ |
| |            |            |      | |
| | Thumbnail1 | Thumbnail2 | Th...| |
| |            |            |      | |
| +--------------------------------+ |
+------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:26:55.243

我认为您想使用[GtkIconView](http://www.gtk.org/api/2.6/gtk/GtkIconView.html)小部件。

# uml - UML 图 - 组合

> ID：14319565
> 
> 赞同：2
> 
> 时间：2013-01-14T13:43:34.050
> 
> 标签：uml, diagram, composition

有人可以帮我解决这个 UML 图吗？

![UML 图](../Images/f18c44d70dc3f0b3e25ad6335afe2668.png)

给定这个 UML 图，假设在运行时，我们从 A 类创建了对象 a1 和 a2，从 B 类创建了 b1 和 b2，从 C 类创建了 c1 和 c2，从 D 类创建了 d1 和 d2，从 E 类创建了 e1 和 e2。其中一种情况可能发生在运行时？

**一种。**e1 包含 d1，d1 包含 e2，e2 包含 b2

**湾。**a1 包含 c1，c1 包含 d1

**C。**b1 包含 d1，d1 包含 e2

**d。**c1 包含 a1，a1 包含 b1

我无法解决这个问题，因为我倾向于认为 b) 和 d) 都是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:51:54.503

**a) 是正确答案。**

b) 为假，因为 a1 不能包含任何内容

c) 是假的，因为 b1 不能包含任何东西

d) 为假，a1 不能包含任何内容

**描述：C 及其子级 (D,E) 可以包含此层次结构的任何类，因为它可以包含 A 的子级**

# ios - 它不会失败，它表示“没有问题”但仍然无法正常工作

> ID：14319569
> 
> 赞同：1
> 
> 时间：2013-01-14T13:43:55.640
> 
> 标签：ios, objective-c, xcode, uiview, compiler-errors

过去两天我一直在寻找和阅读各种错误。我发现了类似的问题，但是当我尝试修复我的问题时，它永远不会起作用。

我几乎准备好提交我的项目，而且效果非常好。但是，突然间，当我尝试运行代码时，它构建得很好，但是当它运行时，它停留在启动图像上，然后崩溃了。我在模拟器和设备上都试过了，同样的事情。

但是，当它运行时，我的 Xcode 将我带到了我完全理解的这一行，而不是。

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}
} 
```

它只是简单地指向那里，没有错误：线程 1：信号 SIGBRT

输出显示：

```
2013-01-14 14:17:17.127 LSA[37852:c07] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIView 0x7141450> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key keyPath.'
*** First throw call stack:
(0x1c8f012 0x10cce7e 0x1d17fb1 0xb79711 0xafaec8 0xafa9b7 0x64573 0xb25428 0x49c7e4 0x10e0663 0x1c8a45a 0x22fbb3 0xf4e37 0xf5418 0xf5648 0xf5882 0x44a25 0x44dbf 0x44f55 0x4df67 0x11fcc 0x12fab 0x24315 0x2524b 0x16cf8 0x1beadf9 0x1beaad0 0x1c04bf5 0x1c04962 0x1c35bb6 0x1c34f44 0x1c34e1b 0x127da 0x1465c 0x251d 0x2445)
libc++abi.dylib: terminate called throwing an exception
(lldb). 
```

如果您从本指南中理解一个词。我真的迷路了。

我觉得当我链接我的 UISwitch 时发生了这种情况，但我试过不喜欢它，删除它，评论所有代码，但还是一样！我是初学者，但学习速度很快，所以请详细说明并询问我是否需要更多详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:10:59.983

检查 IB 是否已连接所有网点。当我不小心与同一个 UI 元素建立两个连接时，我经常会遇到这种情况，通常是因为 IB 不能很好地撤消。

# c++ - 仅选择 MySQL 数据库/表中的更新/新行

> ID：14319570
> 
> 赞同：2
> 
> 时间：2013-01-14T13:43:58.177
> 
> 标签：c++, mysql, sql, myisam

在我当前的项目中，我正在尝试检查 MySQL 数据库：MySQL 数据库由另一个程序更新，因此我的 C++ 程序只需要选择新行。它不会是一个小表（>10000 行），所以我不想搜索每一行。即检查像isNew=0 或=1 这样的列。我已经发现：

[查询过去一小时内修改过的表](https://stackoverflow.com/questions/2492040/query-to-find-tables-modified-in-the-last-hour)

[http://www.codediesel.com/mysql/how-to-check-when-a-mysql-table-was-last-updated/](http://www.codediesel.com/mysql/how-to-check-when-a-mysql-table-was-last-updated/)

但是，在此示例中，您只能获取已更新的表。如何仅从表中选择新行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:12:59.793

> 如何仅从表中选择新行？

假设新行意味着新插入，并且如果您可以更改数据库架构，则可以使用[自动增量](http://dev.mysql.com/doc/refman/5.6/en/example-auto-increment.html)列。通过在程序每次选择结果集时记住最大值，它可以保存该值以供下一个查询使用：

```
select * from table where id > 123 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:48:46.333

我建议向`isNew`表中添加一个默认值为 1 的列并在其上添加一个索引。该索引将阻止您的查询检查所有行。处理完行后，设置`isNew`为 0。

# java - 泽西岛：无法从字符串中反序列化 ArrayList 的实例

> ID：14319573
> 
> 赞同：13
> 
> 时间：2013-01-14T13:44:19.013
> 
> 标签：java, rest, jersey, jackson, jax-rs

我有一个基于 json 的 REST Web 服务，使用：Jetty、Jersey、Jersey-JSON 使用 Jackson 实现。

我的一个方法接收一个 Person 实例，它有一个 List<String> 类型的字段。IE：

```
Public class Person {
    List<String> names;
} 
```

如果我用一组名称调用它，一切正常！例如：

```
{ "names" : [ "Jhon", "Doe" ] } 
```

但是如果这个人只有一个名字，我的客户会创建一个值元素，例如：

```
{ "names" : "Jhon" } 
```

当我尝试使用单个值调用服务时，出现异常：

```
Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token 
```

**问题：**

我应该如何创建/配置我的 Web 服务，以便能够在数组字段作为单个元素发送给我时对其进行反序列化。

--

我已经读过：

[Jackson 反序列化 - 包含 ArrayList<T>](https://stackoverflow.com/questions/10978748/jackson-deserialization-with-contained-arraylistt)

和

[如何自定义将 JAXB 对象列表序列化为 JSON？](https://stackoverflow.com/questions/2199453/how-can-i-customize-serialization-of-a-list-of-jaxb-objects-to-json/3143214#3143214)

这指的是最后一个答案：

[Jersey 客户端无法反序列化 json 服务 - 异常（无法反序列化实例）](https://stackoverflow.com/questions/13775881/jersey-client-can-not-deserializable-json-services-exceptioncan-not-deseriali)

[Jaxb json 缺少一个元素数组的括号](https://stackoverflow.com/questions/6386873/jaxb-json-missing-brackets-for-one-element-array)

但这些都不能解决问题。

先感谢您！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T16:07:11.253

经过漫长的一天，又一个......在阅读了大量的维基和常见问题解答之后，它终于起作用了。

我做了什么：

1.  使用杰克逊
2.  强制使用 Jackson 提供程序
3.  定义自定义反序列化器
4.  激活 ACCEPT_SINGLE_VALUE_AS_ARRAY 标志
5.  修复依赖关系

故事：

我使用的是 Jersey 1.13，它默认使用（我相信）jaxb。

我将其更改为**使用杰克逊**

```
<init-param>
    <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
    <param-value>true</param-value>
</init-param> 
```

如所述：

[https://stackoverflow.com/a/13895768/660990](https://stackoverflow.com/a/13895768/660990)

这使我的球衣使用杰克逊，但问题仍然存在；jackson 还不能对数组进行反序列化。

我强迫使用**杰克逊提供者**：

```
<init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>
        your.project.packages;
        org.codehaus.jackson.jaxrs</param-value>
</init-param> 
```

[https://stackoverflow.com/a/3143214/660990](https://stackoverflow.com/a/3143214/660990)

这是一个必要的步骤，但还不够。有必要激活**ACCEPT_SINGLE_VALUE_AS_ARRAY**标志。

```
ObjectMapper objectMapper;
objectMapper = new ObjectMapper().configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true); 
```

我需要定义**自定义反序列化器**

```
public class MyResolver implements ContextResolver<ObjectMapper> {

@Override
    public ObjectMapper getContext(final Class<?> objectType) {
        ...            
        return objectMapper;
    }
} 
```

为了做到这一点：

[定制-ObjectMapper](http://jersey.576304.n2.nabble.com/Customizing-ObjectMapper-td6234597.html)

做完这一切后，它仍然没有工作......

经过一段时间的搜索，我发现：

[杰克逊 2.0 和泽西 1.12](https://stackoverflow.com/questions/10668597/jackson-2-0-with-jersey-1-12)

这讨论了**依赖问题**..

这解决了我的问题，**Jersey v1.13**附带**Jackson v1.9.2 我需要 Jackson v2.0**

我删除了 jersey-json 的依赖项，因为它包含 jackson 1.9.2：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
</dependency> 
```

并直接声明依赖：

```
<dependency>
    <groupId>com.fasterxml.jackson.jaxrs</groupId>
    <artifactId>jackson-jaxrs-json-provider</artifactId>
</dependency> 
```

参考：

[杰克逊-jaxrs-json-提供者](https://github.com/FasterXML/jackson-jaxrs-json-provider)

**注意：**此更改删除了 Jersey 使用 Jaxb 或 jettison 的能力。

**题外话**，对某人来说可能很有趣：

[将 Jersey/Jackson 配置为不使用 @XmlElement 字段注释进行 JSON 字段命名](https://stackoverflow.com/questions/5005668/configure-jersey-jackson-to-not-use-xmlelement-field-annotation-for-json-field)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-16T12:26:33.800

您可以使用[JsonFormat](http://fasterxml.github.io/jackson-annotations/javadoc/2.1.0/com/fasterxml/jackson/annotation/JsonFormat.html)注释在类、字段或方法级别执行此操作

```
@JsonFormat(with = Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY)
protected List<String> list;

public List<String> getList() {
    return list;
}

public void setList(List<String> list) {
    this.list = list;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T13:51:13.693

[本页](http://jersey.java.net/nonav/documentation/latest/json.html#d4e987)的示例 5.10 和 5.11解释了您的确切问题。您可以配置 JSON 构建器以强制为单项列表创建数组，如下所示： `JSONConfiguration.mapped().arrays("names").build()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-30T22:14:32.497

通过将@JsonSerialize 添加到课程中，它对我有用

```
@JsonSerialize
Public class Person {
    List<String> names;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-13T13:27:05.707

```
{"results": {"place": {"lang": "en-US","woeid": "2168606"}}} 
```

&

```
{"results": {"place": [{"lang": "en-US","woeid": "2168606"}, {"lang": "en-US","woeid": "2168606"}]}} 
```

这种类型怎么办......使用yahoo place api时

# linux - 在 Linux 上从内核直接访问用户内存

> ID：14319576
> 
> 赞同：4
> 
> 时间：2013-01-14T13:44:29.500
> 
> 标签：linux, memory, memory-management, kernel

我有一个用户模式进程和内核模块。现在我想从内核读取用户模式进程的某些区域，但有一个问题：没有用户模式内存的复制和 VA 的简单访问。所以我们有：目标进程的task_struct、其他相关结构（如mm_struct、vma_struct）和我想读取的虚拟地址（如0x0070abcd）或者以某种方式映射到我的内核模块。

我可以使用 get_user_pages 获取所需内存区域的页面列表，但接下来呢？我应该以某种方式将页面映射到内核中，然后尝试将它们作为连续内存区域读取还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:36:46.400

问题是“查看”用户空间需要锁定大量内容。因此，最好做一个简短的副本，而不是将所有内容锁定任意时间。您的用户空间进程可能没有被 VM 映射到当前 CPU。事实上，它可能被完全换出到磁盘，在另一个 CPU 上运行，在它自己的内核调用中，等等。

[Linux 内核：copy_from_user - 带有指针的结构](https://stackoverflow.com/questions/1698396/linux-kernel-copy-from-user-struct-with-pointers)

# java - 我如何使用这个休眠查询来获取行？

> ID：14319582
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:45:11.330
> 
> 标签：java, hibernate

我正在使用休眠从表中获取行。

```
List<Work> W= sessionFactory.getCurrentSession().createSQLQuery("Select * from T_WORK ").addEntity(Work.class).list(); 
```

此查询工作正常。

但是下面的查询不能正常工作。

```
List<Work> W= sessionFactory.getCurrentSession().createSQLQuery("Select * from T_WORK WHERE STATUS = 5 ").addEntity(Work.class).list(); 
```

我收到一个错误，因为 .

```
could not execute query

Caused by: java.sql.SQLException: Invalid column name
        at oracle.jdbc.driver.OracleStatement.getColumnIndex(OracleStatement.java:3711)
        at oracle.jdbc.driver.OracleResultSetImpl.findColumn(OracleResultSetImpl.java:2763)
        at oracle.jdbc.driver.OracleResultSet.getTimestamp(OracleResultSet.java:512)
        at org.apache.commons.dbcp.DelegatingResultSet.getTimestamp(DelegatingResultSet.java:300)
        at org.apache.commons.dbcp.DelegatingResultSet.getTimestamp(DelegatingResultSet.java:300)
        at org.hibernate.type.descriptor.sql.TimestampTypeDescriptor$2.doExtract(TimestampTypeDescriptor.java:62)
        at org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:64)
        at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:254)
        at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:250)
        at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:230)
        at org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:331)
        at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2283)
        at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1527)
        at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1455)
        at org.hibernate.loader.Loader.getRow(Loader.java:1355)
        at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:611)
        at org.hibernate.loader.Loader.doQuery(Loader.java:829)
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
        at org.hibernate.loader.Loader.doList(Loader.java:2542) 
```

我正在使用 Oracle 并且状态列是数字数据类型。

在工作项类中

```
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "STATUS_CODE", nullable = false)  
private Status status; 
```

我哪里错了？提前致谢。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:55:00.307

您正在使用本机`SQL`查询。这意味着，您应该使用字段的**SQL**名称。所以使用`STATUS_CODE`而不是`STATUS`.

IE`...createSQLQuery("Select * from T_WORK WHERE STATUS_CODE = 5 ")...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:06:52.247

您使用的是 sql 而不是 hql ...所以您应该使用与 db 表中相同的查询参数名称而不是 pojo 类变量名称 ...

# git - 用于现场部署的 Git：如何从现场版本中获取文件？

> ID：14319584
> 
> 赞同：1
> 
> 时间：2013-01-14T13:45:16.560
> 
> 标签：git, git-push, git-pull

从我的工作站，我可以将修改“推送”到我服务器上的一个 git 裸存储库，其中包含一个运行“git checkout -f”的 Hook，因此我可以通过 Git 部署我的站点。

问题是我网站的用户可以上传文件（如图片）。没有这些文件，网站就无法运行。所以我的问题是：**我怎样才能在我的工作站上进行现场版本的修改？**（如用户上传的文件）。

** 编辑：有关我设置此配置所遵循的程序的一些详细信息：**

> 在已经包含站点的服务器上：
> 
> ```
> $ cd /home/website/www
> $ git init
> $ git add *
> $ git commit -m 'First commit !' 
> ```
> 
> ...然后创建一个裸存储库...
> 
> ```
> $ cd /home/website
> $ mkdir www.git 
> $ cd www.git
> $ git init --bare 
> ```
> 
> ...然后设置挂钩的东西...
> 
> ```
> $ git config core.bare false
> $ git config core.worktree /home/website/www
> $ git config receive.denycurrentbranch ignore
> $ cat > hooks/post-receive
> #!/bin/sh
> GIT_WORK_TREE=/home/site/www git checkout -f 
> ```
> 
> ...然后提交裸存储库：
> 
> ```
> $ git add /home/website/www
> $ git commit -m "First commit of the bare repository"   On my workstation, on a new folder, to get the whole directory :
> 
> $ mkdir /Users/me/Sites/website/
> $ git init
> $ git remote add live ssh://root@myserver.com/home/website/www.git
> $ git pull live master 
> ```
> 
> 然后它工作。如果我在我的工作站上修改文件并想让它们生效，我只需要“git push live master”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:55:42.547

我不建议将这些图像提交回裸存储库（如果这些图像很大或很多，裸存储库的大小可能很快变得太重要而无法轻松克隆）

但是您可以使用您的钩子将这些图像复制回某个共享目录中，然后您可以从您的工作站访问这些图像（并且您可以 rsync，以便仅获取增量）。
基本上，我建议在不使用 git 的情况下取回这些图像。

# mysql - 一天的总结或运行查询并总结结果？

> ID：14319585
> 
> 赞同：0
> 
> 时间：2013-01-14T13:45:24.030
> 
> 标签：mysql, database

由于我不知道计算效率我会在这里问，我希望有人能告诉我什么更好并解释一下。

**场景：**
目前我有一个表格，可以插入每个工人的生产行。
类似的东西：（Worker1）用（一些数量）为日期生产（product10）。
这适用于他白天工作的每个车站。

**问题：**
我需要生成一份工人在每个日期生产的总金额的报告。我知道如何生成报告，但问题是它如何更有效？

必须为每个人运行一个查询来总结每个日期的生产？或者有一个表格，我将插入总金额、workerID 和日期？

同样，如果您可以进一步解释它会很好，如果不是至少一个受过教育的答案会帮助我解决这个问题。

**示例：**
这是我现在在生产表中的内容：

```
ID EmpID ProductID Amount Dateofproduction
-------------------------------------------------- --------
1 1 1 100 14/01/2013  
2 1 2 20 2012 年 1 月 14 日

```

这就是我最终想要的：

```
EmpID 金额 生产日期
----------------------------------
1 120 14/01/2013

```

我应该为此开始另一张桌子吗？还是我应该总结我在生产表中拥有的东西并拿走我需要的东西？
请记住，生产表每天都会变得越来越大（当然）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:51:29.427

除非我遗漏了什么，否则听起来你只想要这个：

```
select empid,
  sum(amount) TotalAmount,
  Dateofproduction
from yourtable
group by empid, Dateofproduction 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/12f5c/1)

结果：

```
| EMPID | TOTALAMOUNT | DATEOFPRODUCTION |
------------------------------------------
|     1 |         120 |       2013-01-14 | 
```

*注意：*我猜您提供的第二行数据应该`2013`不是`2012`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:54:58.320

**i)**直接：

```
select EmpId, sum(Amount) as Amount, DateOfProduction 
from ProductionTable
group by EmpId, DateOfProduction. 
```

**ii)**现在，桌子的大小将继续增长。而且您只需要每日报告。

这张桌子是否被其他人使用？部分数据可以存档吗？如果某些数据可以存档，我建议在每天和报告之后，将此表中的所有数据备份到辅助存档表中。因此，您每天都必须只查询`today's`有价值的记录。

其次，您可以考虑添加一个`index`to `DateOfProduction`。然后，您将能够将查询限制在日期范围内。例如，`select EmpId, sum(Amount) as Amount, DateOfProduction from ProductionTable group by EmpId, DateOfProduction where DateOfProduction = Date(now()).`（或类似的东西）

因为它只是一张表，没有复杂的查询，MySql 将能够轻松处理数百万条记录。尝试 EXPLAIN 查询以检查被触及的记录数和正在使用的索引。

# javascript - 在输入输入时阻止发帖

> ID：14319588
> 
> 赞同：0
> 
> 时间：2013-01-14T13:45:33.167
> 
> 标签：javascript, jquery

我有一个输入字段作为过滤器。在每次键入时，他都会调用一个函数来发布 input.val() 以在表格中显示结果，这很好用。但如果我输入一个名称“stackoverflow”，他将发布 13 次。如果他发布的 3 秒内没有任何输入，我想要那个。

我认为有一个功能（不是默认功能）。而且我不想自动完成。

HTML：

```
<input type="text" id="filter" /> 
```

JavaScript：

```
$(document).ready(function(){
    $("#filter").keyup(function(){
        console.log('POST');
    });
 }); 
```

[jsfiddle](http://jsfiddle.net/fG65Y/)

我不想要延迟，因为那只会“延迟”它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:50:41.633

您可以使用原生 Javascript 函数 clearTimeout 和 setTimeout 来完成此操作。

```
$(document).ready(function(){
    var filterTimeout = null;
    $("#filter").keyup(function(){
        if (filterTimeout != null)
            window.clearTimeout(filterTimeout);
        filterTimeout = window.setTimeout(function() { console.log('POST'); }, 3000);
    });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:50:00.240

查看[jQuery 油门/去抖动插件](http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/)

它完全符合您的要求

```
$('input').keyup($.debounce(3000, function() { /* Post comes here */ })); 
```

# javascript - JScript：动态加载 JavaScript 库

> ID：14319592
> 
> 赞同：4
> 
> 时间：2013-01-14T13:45:45.763
> 
> 标签：javascript, jscript

我目前正在为 Microsoft JScript 运行时环境编写一个 JavaScript 脚本。它不在浏览器中，而是更像系统管理员使用 VBScript 那样运行。我写了很多代码，虽然其中一些是特定于需要完成的，但其中大部分是支持脚本执行它需要做的事情的框架。我想在其他未来的脚本冒险中使用这些代码，但就我目前的知识而言，我必须一遍又一遍地复制和粘贴这些迷你库，嗯，这只是一个更新的噩梦二是效率低下。我知道当我有`window`or时可以动态加载 JS `document`，我知道可以`require()`在 Node.js 中加载 JS 文件，但这在原始 JScript Runtime for MS 中是否可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:57:12.740

查看[Windows 脚本文件 (*.wsf)](http://msdn.microsoft.com/en-us/library/15x4407c%28v=vs.84%29.aspx)格式。它的功能之一是允许包含您所描述的内容。取自链接文档的示例：

```
<job id="IncludeExample">
   <script language="JScript" src="FSO.JS"/>
   <script language="VBScript">
      ' Get the free space for drive C.
      s = GetFreeSpace("c:")
      WScript.Echo s
   </script>
</job> 
```

其中“FSO.JS”包含 JScript 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:13:12.767

假设您在谈论 WSH，您可以加载文件并评估内容，这与包含它非常相似。

```
var incfso=new ActiveXObject("Scripting.FileSystemObject"); 
include = function(x) {
    eval(incfso.OpenTextFile(x,1).ReadAll());
} 
```

来源： http: [//www.mailsend-online.com/blog/wsh-javascript-includes.html](http://www.mailsend-online.com/blog/wsh-javascript-includes.html)

我找不到像 jscript 的“窗口”这样的全局对象，但你可以创建一个。

```
var host = this;
var test = "hello-world";

var messagebox = new ActiveXObject("wscript.shell");

if (host.test) {
    messagebox.Popup("host.test exists, value = " + host.test);
} else {
    messagebox.Popup("host.test does not exist.");
} 
```

我认为“主机”现在应该有效地成为全局对象。（无论如何，这个例子对我有用）

# sql - 撤消 sql 脚本

> ID：14319605
> 
> 赞同：-3
> 
> 时间：2013-01-14T13:46:43.233
> 
> 标签：sql, oracle, plsql, undo, flashback

我有一个问题要解决，它需要对 Oracle 数据库中每个已执行的 sql 文件进行撤消操作。

我使用 MSBuild 在 xml 文件中执行它们 - 使用登录和 @*.sql 执行命令 sqlplus。

显然回滚是不行的，因为它不能回滚已经提交的事务。

我已经搜索了几天，仍然找不到答案。我学到的是 Oracle 闪回和时间点恢复。问题是我希望仅对当前用户撤消更改，即如果另一个用户同时进行了一些更改，那么我的解决方案仅对用户' **X** '而不是' **Y** '执行撤消。

我在 flashback_transaction_query 中找到了 start_scn 和 commit_scn。但它是否只识别一个用户？如果我闪回到给定的**SCN**怎么办？是否只会为我或其他用户撤消？我已经拿出

> 从 flashback_transaction_query 中选择 start_scn WHERE logon_user='MY_USER_NAME'

和

> WHERE table_name = "MY_TABLE NAME"

并执行

> 闪回 SCN"这里是它的编号"

在所选操作的 SCN 上。这对我有用吗？

我还发现了有关时间点恢复的信息，但是当我阅读它时，它会使整个数据库不可用，因此其他用户将无法使用它。

所以我需要一些可以撤销整个 *.sql 文件的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:17:48.987

这是可能的，但可能不适用于您使用的工具。`sqlplus`可以回滚您的事务，您只需确保未启用自动提交，并且您的脚本`commit`在结束 sqlplus 会话之前仅包含一个权限（如果您根本不提交，sqlplus 将始终回滚所有更改它退出）。

当您有多个脚本并且想要回滚昨天运行的脚本时，问题就开始了。这是一个全新的蠕虫罐头，没有通用的解决方案总是有效的（它是“合并问题”组问题的一部分，即当每个人都可以保持交易开放时，如何合并不同用户的交易只要他们喜欢）。

可以这样做，但是您需要为此仔细设计数据库，业务规则必须可以接受，等等。

一般的方法是有一个表，其中包含脚本修改（=创建、更新、删除）的行的信息，加上脚本名称加上执行时间。

使用此信息，您可以生成 SQL，该 SQL 可以撤消脚本创建的更改。要填充这样的表，请使用触发器或生成脚本，以便它们也写入此信息（注意：这可能超出了“简单”的 sqlplus 解决方案；您必须为此编写自己的数据加载器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:48:47.830

好的，我通过创建 DDL 和 DML TRIGGER 解决了这个问题。第一个从 v$open_cursor 获取“额外”列（这是您刚刚输入的 DDL 语句）并插入到我的表中。第二个从 flashback_transaction_query 获取“undo_sql”，这是您的 DML 操作的相反操作 - 如果 INSERT 则 undo_sql 删除所有必要的数据。

触发器在特定表上的 DELETE、INSERT (DML) 和特定 SCHEMA 或 VIEW 上的 ALTER、DROP、CREATE (DDL) 之前工作。

# sql - 为什么检查现有数据不涵盖 SQL Server 2008 中的 NULL

> ID：14319613
> 
> 赞同：0
> 
> 时间：2013-01-14T13:47:05.517
> 
> 标签：sql, sql-server

这也可能是其他数据库中的情况，但是当您进行以下查询时

```
SELECT * FROM MyTbl WHERE MyColumn != 'Foo' 
```

然后获取 MyColumn 为“Bar”的任何记录，但未获取 MyColumn 为 NULL 的任何记录。我认为这是预期的行为，并且背后有原因，我想知道原因。

NULL 是否被认为等于 'Foo' 或者它只是不期望成为条件的一部分，因为条件 (NULL != 'Foo') 似乎为真。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T13:52:06.597

在 DB 逻辑中，`NULL`意味着该字段中根本没有定义的数据。它被认为与任何事物都不相同或不同。如果要获取相关行，则必须对其进行显式过滤：

```
SELECT * FROM MyTbl WHERE MyColumn != 'Foo' OR MyColumn IS NULL 
```

参见[维基百科](http://en.wikipedia.org/wiki/Null_%28SQL%29#Comparisons_with_NULL_and_the_three-valued_logic_.283VL.29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:52:12.370

在 SQL Server 中工作的三态逻辑，这意味着`NULL = NULL UNKNOWN which treats as FALSE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:53:00.887

在所有关系数据库中，空值不等于任何东西，包括它自己。

即使您的查询是 ，您也无法找到 MyColumn 具有空值的行`"select * from MyTbl where MyColumn = null"`。获得它们的唯一方法是`"select * from MyTble where MyColumn is null"`

有关详细说明，请参阅[http://en.wikipedia.org/wiki/Null_(SQL](http://en.wikipedia.org/wiki/Null_(SQL) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:54:24.253

是的，正如 Tim 所说，NULL 值是未知的。SQL Server 不会为了进行匹配而对 NULL 值做出假设。[您可以查看有关 SQL Server 如何处理 NULL 的更多信息。](http://msdn.microsoft.com/en-us/library/ms191504%28v=sql.105%29.aspx)

# ios - 如何在 ABAddressBook 上编辑记录

> ID：14319615
> 
> 赞同：1
> 
> 时间：2013-01-14T13:47:08.730
> 
> 标签：ios, objective-c, abaddressbook

我希望能够从 ABPeoplePickerNavigationController 中选择一条记录，然后从我的视图控制器中向该联系人添加一封电子邮件。

我试图搜索 ABAddressBook 类参考，看看我能做什么，但没有任何见解 =/

我被人参考困在这里，有人知道如何进行吗？

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person 
```

我在使用时遇到 EXC_BAD_ACCESS`ABRecordSetValue(person, kABPersonEmailProperty, (__bridge CFStringRef)@"a@a.com", &error);`但没有日志错误。

更新

好的，我设法将它保存在 peoplePicker 委托中，如下所示：

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    ...

    self.addressBook = peoplePicker.addressBook;
    self.selectedPerson = person;

    // adding to native contacts
    CFErrorRef error = nil;
    ABMutableMultiValueRef emailMultiValue = ABMultiValueCreateMutable(kABPersonEmailProperty);
    bool didAddEmail = ABMultiValueAddValueAndLabel(emailMultiValue, (__bridge CFTypeRef)(email), kABOtherLabel, NULL);
    if(didAddEmail){
        ABRecordSetValue(self.selectedPerson, kABPersonEmailProperty, emailMultiValue, nil);
        NSLog(@"Email saved......");
    } else {
        NSLog(@"Error adding email: %@", error);
    }
    ABAddressBookSave(self.addressBook, NULL);

    ...
} 
```

奇怪的是，如果我尝试在此方法之外执行此操作，例如在用户在 textField 上输入之后，我会收到错误消息。

然后在上述方法的内部和外部检查我的日志`peoplePickerNavigationController`：

```
(lldb) po self.selectedPerson
(ABRecordRef) $1 = 0x0a1838f0 <CPRecord: 0xa1838f0 ABPerson>
(lldb) po self.selectedPerson
(ABRecordRef) $4 = 0x0a1838f0 [no Objective-C description available] 
```

第一个日志似乎没问题，因为它是在 delegates 方法中完成的，但第二个很奇怪，我的意思是内存引用在那里但不是内容......第二个是在 peoplePicker 被解雇后记录的......

为什么会这样？

我的 .h 文件：

```
@property (nonatomic) ABAddressBookRef addressBook;
@property (nonatomic) ABRecordRef selectedPerson; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:46:46.283

我的解决方案是保存人员 ID，然后再次访问地址簿并使用： `ABAddressBookGetPersonWithRecordID(addressBook, self.selectedPersonID)`

并再次创建地址簿。

```
ABAddressBookRef addressBook = ABAddressBookCreate(); 
```

# arrays - 如何计算数组中每个值的出现次数？

> ID：14319616
> 
> 赞同：3
> 
> 时间：2013-01-14T13:47:16.080
> 
> 标签：arrays, mongodb, mapreduce

我在 MongoDB 中有一个 ISSUES 的数据库，其中一些 issue 有评论，这是一个数组；每个评论都有一个作者。我如何计算每个作者写的评论数量？

我试过了

```
db.test.issues.group(
{
    key = "comments.username":true;
    initial: {sum:0},
    reduce: function(doc, prev) {prev.sum +=1},
    }
); 
```

但没有运气:(

一个样品：

```
{
        "_id" : ObjectId("50f48c179b04562c3ce2ce73"),
        "project" : "Ruby Driver",
        "key" : "RUBY-505",
        "title" : "GETMORE is sent to wrong server if an intervening query unpins the connection",
        "description" : "I've opened a pull request with a failing test case demonstrating the bug here: https://github.com/mongodb/mongo-ruby-driver/pull/134\nExcerpting that commit message, the issue is: If we do a secondary read that is large enough to require sending a GETMORE, and then do another query before the GETMORE, the secondary connection gets unpinned, and the GETMORE gets sent to the wrong server, resulting in CURSOR_NOT_FOUND, even though the cursor still exis ts on the server that was initially queried.",
        "status" : "Open",
        "components" : [
                "Replica Set"
        ],
        "affected_versions" : [
                "1.7.0"
        ],
        "type" : "Bug",
        "reporter" : "Nelson Elhage",
        "priority" : "major",
        "assignee" : "Tyler Brock",
        "resolution" : "Unresolved",
        "reported_on" : ISODate("2012-11-17T20:30:00Z"),
        "votes" : 3,
        "comments" : [
                {
                        "username" : "Nelson Elhage",
                        "date" : ISODate("2012-11-17T20:30:00Z"),
                        "body" : "Thinking some more"
                },
                {
                        "username" : "Brandon Black",
                        "date" : ISODate("2012-11-18T20:30:00Z"),
                        "body" : "Adding some findings of mine to this ticket."
                },
                {
                        "username" : "Nelson Elhage",
                        "date" : ISODate("2012-11-18T20:30:00Z"),
                        "body" : "I think I tracked down the 1.9 dependency."
                },
                {
                        "username" : "Nelson Elhage",
                        "date" : ISODate("2012-11-18T20:30:00Z"),
                        "body" : "Forgot to include a link"
                }
        ]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:05:10.573

您忘记了值上的花括号`key`，您需要用 a`,`而不是 a终止该行`;`。

```
db.issues.group({
    key: {"comments.username":true},
    initial: {sum:0},
    reduce: function(doc, prev) {prev.sum +=1},
}); 
```

**更新**

在意识到`comments`是一个数组之后......您需要使用`aggregate`它，以便您可以“放松”`comments`然后对其进行分组：

```
db.issues.aggregate(
    {$unwind: '$comments'},
    {$group: {_id: '$comments.username', sum: {$sum: 1}}}
); 
```

对于问题中的示例文档，输出：

```
{
  "result": [
    {
      "_id": "Brandon Black",
      "sum": 1
    },
    {
      "_id": "Nelson Elhage",
      "sum": 3
    }
  ],
  "ok": 1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:09:31.513

这里只是一个讽刺的回答，以恭维@JohnnyHKs 的回答：这听起来像是您对 MongoDB 的新手，因此如果是这种情况（如果不是我会升级），那么可能会在新版本的 MongoDB 上工作，无论哪种方式旧的`group`计数有点糟糕。一方面，它不适用于分片。

相反，在 MongoDB 2.2 中，您可以这样做：

```
db.col.aggregate({$group: {_id: "$comments.username", count: {$sum: 1}}}) 
```

或类似的东西。你可以在这里阅读更多关于它的信息：http: [//docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

# java - JSF Primefaces：将 Gmap 组件转换为自动完成器

> ID：14319620
> 
> 赞同：1
> 
> 时间：2013-01-14T13:47:31.383
> 
> 标签：java, jsf, autocomplete, primefaces

我的要求是在自动完成器组件中放置一个 gmap（而不是使用我想显示 gmap 的图像）。

可能吗？

这是我想使用的基本 gmap：http: [//www.primefaces.org/showcase/ui/gmapBasic.jsf](http://www.primefaces.org/showcase/ui/gmapBasic.jsf)

这是gmap代码：

> ```
>  <p:gmap center="41.381542, 2.122893" zoom="15" type="HYBRID" tyle="width:600px;height:400px" /> 
> ```

这是带有图像的自动完成器组件：http: [//www.primefaces.org/showcase/ui/autoCompleteItemtip.jsf](http://www.primefaces.org/showcase/ui/autoCompleteItemtip.jsf) （键入“X”以查看图像）

谁能帮帮我？

# php - MySQL->execute() 导致另一个查询崩溃？

> ID：14319622
> 
> 赞同：1
> 
> 时间：2013-01-14T13:47:33.457
> 
> 标签：php, mysqli

当我运行以下代码时：

```
$_1= $Var->prepare("SELECT Status FROM UserCompletion WHERE `UserID`=?");
$_1->bind_param('i', $_SESSION['UID']);
$_1->execute();
$metaResults = $_1->result_metadata();
$fields = $metaResults->fetch_fields(); 
```

我收到此错误：

> 致命错误：在第 17 行的 /var/www/CMS/API/Constants.php 中的非对象上调用成员函数 fetch_row()

此查询与我正在处理的查询位于不同的页面上。此查询是：

```
$PathLocation = $STD->query("SELECT PathLocation From SiteVariables");
$FilePath = $PathLocation->fetch_row(); 
```

当我注释掉`execute();`它时，它会停止返回该错误；为什么我有一个执行导致另一个页面上的崩溃？

**更新**

`execute();`查询没有失败。

```
$_1 = $STD->prepare("SELECT Status FROM UserCompletion WHERE `UserID`=?");
$_1->bind_param('i', $_SESSION['UID']);
$_1->execute();
$metaResults = $_1->result_metadata();
$fields = $metaResults->fetch_fields(); 
#$GetCompletedArray = $GetCompletedResults->fetch_array(MYSQLI_ASSOC);
print_r($fields); 
```

回报：

> ( [0] => stdClass Object ( [name] => Status [orgname] => Status [table] => UserCompletion [orgtable] => UserCompletion [def] => [db] => SLMS [catalog] => def [max_length] => 0 [length] => 1 [charsetnr] => 63 [flags] => 36865 [type] => 3 [decimals] => 0 )

在执行到位之前，我的其他查询不会失败。我知道这一点，因为如果没有对 constants.php 的查询，用户访问的每个页面都会被阻止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:58:55.823

来自[MySQLi execute() 手册](http://php.net/manual/en/mysqli-stmt.execute.php)；

> 笔记：
> 
> 使用 mysqli_stmt_execute() 时，**必须使用 mysqli_stmt_fetch() 函数在执行任何其他查询之前获取数据。**

您包含的代码没有这样做，它只是获取元数据，因此查询很可能会留下一个打开的结果集或游标，这会使您的第二条语句失败。

# android - 跨域 ajax 适用于除 android 之外的所有应用

> ID：14319624
> 
> 赞同：1
> 
> 时间：2013-01-14T13:47:38.247
> 
> 标签：android, ajax, cordova, cross-domain, jsonp

在过去的两天半里，我一直在解决这个问题……

使用 phonegap 构建适用于 iPhone 和 Android 的应用程序。跨域 ajax 可以在我的浏览器和 iPhone 上运行。它不适用于 Android。

我一直没有使用 jQueryMobile，只是 jQuery，直到我在某处读到我应该使用移动版本来获得跨域以在 android 上工作。所以我改变了项目以适应 jMobile。我真的需要使用 JqueryMobile 才能让跨域 ajax 工作吗？如果可能的话，我宁愿不使用它。

尝试更改 $.mobile.allowCrossDomainPages=true; 之类的东西 $.support.cors = 真；无济于事。我不知所措。请帮帮我

这是我的ajax代码

```
$.ajax({
    url: 'URL',
    type: 'GET',
    contentType: "application/json",
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    success: function(response){
        console.log("inside ajax");
        $.each(response, function(i,item){
            var category = "<div class='icon-text'><a class='ajaxify' href='pages/onlineRecipe.html' onclick='$(setOnlineID("+item.id+"))' >"
                +"<p><img alt='Image-alt' width='64' class='wrap-around' id='img"+item.id+"' />"
                +"<strong>"+item.title+"</strong>"
                +"<br/>"+item.desc+"</p></a></div>";

            $('#categories').append(category);
            var img = "#img" + item.id;
            $(img).attr('src', "data:image/png;base64,"+item.image);
            //other bindings
            App.ajaxLinkify($("a.ajaxify"));
            App.addTouchEvents($(".page"));
        });
    },
    error: function(xhs, status, error){
        //output.text('Ha producido un error cargando el dato. Por favor, intèntalo de nuevo.');
        console.log("Ajax not working");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:15:54.127

我的建议是检查`<access origin="http://www.example.com" />`res **/xml/config.xml** (cordova 2.3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:38:42.957

尝试添加这个`jQuery.support.cors = true;`

哦，还有另一个提示，以防它缓存以前的错误调用，将其添加到您的 ajax

```
cache: false, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T08:44:37.643

需要将此添加到相应的php文件中： header("Access-Control-Allow-Origin: *");

# c++ - 如何在静态方法中将信号连接到插槽？

> ID：14319629
> 
> 赞同：0
> 
> 时间：2013-01-14T13:47:53.390
> 
> 标签：c++, qt, signals-slots

我正在尝试从静态方法中显示一个弹出窗口：

```
 void MainThread::popup(void){
 static klassePopup* roiPopup;
 roiPopup = new SavingROI();
 roiPopup->show();} 
```

这段代码工作正常，我的窗口有两个 QPushbuttons，但我不明白什么时候应该将 SIGNAL`clicked()`与 SLOT 连接。

以下代码不起作用：

```
 connect(roiPopup->getsaveROIButton(),SIGNAL(clicked()),this,SLOT(saveROI(cv::Mat))); 
```

我知道这个问题还不清楚，但是这里复制的代码有点复杂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:05:48.377

让我们仔细看看你的连接：

```
connect( roiPopup->getsaveROIButton(), SIGNAL( clicked(         ) ),
         this                        , SLOT  ( saveROI( cv::Mat ) ) ); 
```

我故意重新格式化它以显示几件事：

1.  您正在尝试将`clicked`没有参数的插槽连接到`saveROI`需要参数的插槽。这不起作用，因为连接不知道从哪里获取 for 的值`cv::Mat`。
    相反，您需要创建一个也不检索参数的插槽。
2.  正如 ahenderson 在评论中已经指出的那样，您不能`this`在静态方法中使用。

主要问题是，为什么需要静态方法？因为你只想要一个弹出窗口？如果这是唯一的原因，这就是您通常会这样做的方式：

主线程.h：

```
class klassePopup;  // Note: This is a "forward declaration". 
                    //       Google it if you don't know what that is.

class MainThread : public QObject // or anything else which inherits QObject
{
public:
    MainThread();
    ~MainThread();

public:
    void popup(); // not static

private slots:
    saveROI(); // no parameter

private:
    klassePopup* _roiPopup;
}; 
```

主线程.cpp：

```
#include "klassePopup.h"
#include "SavingROI.h"

MainThread::MainThread() :
   _roiPopup( new SavingROI() )
{
    bool bConnectionSucceeded
        = connect( _roiPopup->getsaveROIButton(), SIGNAL( clicked() ),
                 ( this                         , SLOT  ( saveROI() ) );
}

MainThread::~MainThread()
{
    delete _roiPopup;
}

void MainThread::popup()
{
    _roiPopup.show();
}

void MainThread::saveROI()
{
    // retrieve your cv::mat parameter from somewhere else
} 
```

此解决方案可行，但如果您想从静态方法调用它，您还必须在该静态方法中创建 MainThread 实例。

# iphone - 带有 RSS 的 UIAlertView

> ID：14319631
> 
> 赞同：-2
> 
> 时间：2013-01-14T13:48:07.933
> 
> 标签：iphone, ios, xcode, ipad

我想制作一个应用程序，当应用程序打开时，会弹出一个警报视图，其中包含一个或大多数帖子的 RSS 新闻。有没有关于它的例子或教程？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:05:42.763

对于初学者，您只需要创建 UIAlertView 并显示它。如果你想知道他们什么时候点击 OK，你必须实现一个委托。只需用您想要显示的任何内容填充 NSString 即可。

```
[[[UIAlertView alloc] initWithTitle:@"News" message:rssString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] show]; 
```

我假设您还需要知道如何下载 RSS。这不是最好的方法，但将 rss 下载到字符串中是最简单的方法。

```
NSString *rssOutput = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://news.google.com/?output=rss"] encoding:NSUTF8StringEncoding error:nil];

// No rss returned
if (!rssOutput) {
    NSLog(@"No Data");
} 
```

在您需要解析它以找到您想要的帖子之后。有几种可用的解析器，包括 Apple 自己内置在 Mac 和 iOS 中的 NSXMLParser。我认为解释这里超出了帖子的范围，所以我会查看 Apple 自己的文档以更好地了解如何使用它。

这也是一个有用的演练。[http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=3018](http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=3018)

# booggie - booggie2 中脚本的布尔返回值

> ID：14319632
> 
> 赞同：1
> 
> 时间：2013-01-14T13:48:08.247
> 
> 标签：booggie

脚本的布尔返回值（没有显式返回值）是如何定义的？规则总是返回 TRUE 或 FALSE（取决于它是否成功应用），可用于控制您的规则序列。对于脚本，这目前不起作用（至少在我的应用程序中）。

请注意：booggie 项目不再存在，但导致开发了涵盖相同功能的[Soley Studio 。](https://www.soley.io/en/pr-soley-studio/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:56:26.997

默认情况下，脚本会向序列返回一个布尔值。这是使用`bool()`-cast 完成的。

因此，如果您的脚本没有返回值，它会在内部被解释为`bool(None)`给您`False`.

如果您的脚本有明确定义的 return 语句，则`bool()`-cast 自然地 return `True`。

# mysql - 在 sphinx.conf 中更改 MySQL 端口后是否需要重新启动 Sphinx？

> ID：14319638
> 
> 赞同：0
> 
> 时间：2013-01-14T13:48:24.813
> 
> 标签：mysql, sphinx

在 sphinx.conf 中更改 MySQL 端口后是否需要重新启动 Sphinx？

我正在运行 Sphinx 0.9.9-release (r2117)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:01:51.847

是的，只有重新启动它才会重新加载配置文件。顺便说一句，0.9.9 是一个非常非常老的版本。从 sphinxsearch.com 获取一个较新的。

# matlab - 在matlab中使用带有ar函数的crossval函数的例子？

> ID：14319645
> 
> 赞同：4
> 
> 时间：2013-01-14T13:48:40.863
> 
> 标签：matlab, cross-validation

任何人都可以提供或重定向到一个来源，在那里我可以看到一个简单的[`crossval`](http://www.mathworks.com/help/stats/crossval.html)MATLAB 中函数用法示例，其中预测函数是`AR`or`ARX`函数？

我无法从 MATLAB 的文档或网络中找到示例...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T08:55:19.060

似乎这个问题已经在 matworks 论坛上得到解答：http: [//www.mathworks.nl/matlabcentral/answers/58730-example-of-using-crossval-function-with-ar-or-arx-function-in -matlab](http://www.mathworks.nl/matlabcentral/answers/58730-example-of-using-crossval-function-with-ar-or-arx-function-in-matlab)

# java - 如何为 VLCJ 添加或安装本机 x64 库？

> ID：14319656
> 
> 赞同：3
> 
> 时间：2013-01-14T13:49:06.373
> 
> 标签：java, video, windows-7-x64, vlcj

我正在尝试用 Java 制作一个包含视频播放器的信使程序，所以我正在使用 vlcj。但我收到此错误：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：
> 无法加载库“libvlc”：
> 找不到指定的模块。

我已按照[此处](http://www.capricasoftware.co.uk/projects/vlcj/tutorial1.html)的教程进行操作，但仍然出现此错误。这是我得到的唯一错误。

我在带有 x64 VLC 的 Windows 7 x64 Ultimate 上运行。我正在使用最新的 Eclipse 版本进行编码。

谁能指导我一步一步地解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:44:12.277

您必须在应用程序中添加“libvlc”和“libvlccore”dll 路径。这些将出现在您的 vlc 安装文件夹中。您可以添加以下代码行以使其正常工作。

```
NativeLibrary.addSearchPath("libvlc", "C:/VideoLAN/VLC"); 
```

这里“C:/VideoLAN/VLC”是vlc的安装文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:53:13.690

这是使用 JNA 加载 vlc 库的方式：

```
NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), "Path to native library"); 
```

对于我的程序，我将 vlc“libvlc.dll”和“vlccore.dll”放在一个子文件夹中，所以我使用和添加路径到末尾`lib/VLC/`来加载相对于我的“program.jar”的文件：`System.getProperty("user.dir")`

```
NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), System.getProperty("user.dir") + "/lib/VLC"); 
```

如果要从 Windows 7 中的默认 VLC 安装路径加载库，可以按如下方式进行：

```
NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), "C:/Program Files (x86)/VideoLAN/VLC"); 
```

编辑：如果您从 Eclipse 中运行此代码，它将不起作用，除非您指定 VLC 库文件的绝对路径。如果要测试相对路径，则首先构建 jar 文件并将其放置在相对于 VLC 库文件的正确文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T23:01:21.290

我阅读[了您发布的*vlcj*说明](http://www.capricasoftware.co.uk/projects/vlcj/tutorial1.html)。

似乎*vlcj库正在使用 JNA，您可以使用**NativeLibrary*类设置库搜索路径， 如检查程序中所述：

```
import uk.co.caprica.vlcj.binding.LibVlc;
import uk.co.caprica.vlcj.runtime.RuntimeUtil;

import com.sun.jna.Native;
import com.sun.jna.NativeLibrary;

public class Tutorial1A {
    public static void main(String[] args) {
        String vlcHome = "dir/with/dlls"; // Dir with vlc.dll and vlccore.dll
        NativeLibrary.addSearchPath(
            RuntimeUtil.getLibVlcLibraryName(), vlcHome
        );
        Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);
    }
} 
```

你可以尝试运行该代码并检查它是否在没有异常的情况下完成。

*vlcj*指令还指出了 JRE 的架构是相关的；您应该通过键入以下内容检查您的 JRE 架构：

```
java -version 
```

JRE 架构应该与 VLC 相匹配（也许您可以在 About 对话框中查看 VLC 架构）。两者应该相等（32b 或 64b）。

但是，奇怪的是错误消息指的是*libvlc*而不是在 Windows 中执行的*vlc*或*vlccore 。*

*无论如何，如果使用NativeLibrary*将 VLC 路径添加到搜索路径不起作用并且 JRE 架构与 VLC 匹配，您可以添加您正在使用的代码以尝试了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-10T08:44:29.837

确保您使用的是直接 x64 或 x32 环境。这表示：

*   Windows x64（显然）
*   Java JRE x64（不要安装第二个 x32 JRE）
*   Java JDK x64
*   VLC x64

现在你应该没事了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T14:51:54.533

如错误所示，JVM 正在尝试加载本机库“libvlc.dll”，但无法找到它。

要么将 dll 放在 java 安装的 .../jre/bin 目录中，要么使用`java.library.path`属性指向它的位置。

另请参阅[如何使用 Eclipse 启动将本机库添加到“java.library.path”（而不是覆盖它）](https://stackoverflow.com/questions/661320/how-to-add-native-library-to-java-library-path-with-eclipse-launch-instead-of)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-13T17:25:11.793

`jna.library.path`使用系统属性设置路径。可以在以下位置找到该技术的一个工作示例：

[https://github.com/johndeverall/BehaviourCoder/blob/master/src/main/java/de/bochumuniruhr/psy/bio/behaviourcoder/Main.java](https://github.com/johndeverall/BehaviourCoder/blob/master/src/main/java/de/bochumuniruhr/psy/bio/behaviourcoder/Main.java)

在`public static void main(String[] args)`方法中。

此代码可能很快会更新，这将破坏上述链接，但您始终可以使用版本控制返回到我发布此代码的日期并查看代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-19T03:40:18.137

```
cd src/main/resources/
cp -r /Applications/VLC.app/Contents/MacOS/lib darwin
rm darwin/*.*.*
cd darwin
install_name_tool -add_rpath @loader_path libvlc.dylib
mkdir vlc
cp -r /Applications/VLC.app/Contents/MacOS/plugins vlc/plugins 
```

这是 macOS 版本。也许能帮到你。

```
├── kotlin
│   └── App.kt
└── resources
    └── darwin
        ├── libvlc.dylib
        ├── libvlccore.dylib
        └── vlc
            └── plugins
                ├── liba52_plugin.dylib
                ├── libaccess_concat_plugin.dylib
                ├── libaccess_imem_plugin.dylib
                ├── libaccess_mms_plugin.dylib 
```

# validation - 服务中的 Grails 验证导致静默回滚

> ID：14319659
> 
> 赞同：0
> 
> 时间：2013-01-14T13:49:23.537
> 
> 标签：validation, grails, rollback

在 Grails 服务中，我基于外部列表创建/更新域实体。更新循环进行。如果输入文件中的行有效，则更新实体。否则，我存储错误的行号并处理下一个。

*问题：*当我在实体上调用 validate() 时，如果结果是`false`，则服务中完成的任何工作都会回滚，即使与验证无关，也没有可见异常。例如：

```
assert contact.firstName = 'Bruce'
contact.firstName = 'John'
assert contact.save()
...
company.vat = 'bogus'
if (!company.validate()) {
    log.error "bogus"
    company.discard()
} else {
    assert company.save()
}
log.debug "done" 
```

如果公司不验证，我的日志将显示“伪造”和“完成”。联系人名字将`'Bruce'`在数据库中，而不是`'John'`.

替代版本：如果我不打电话`company.validate()`，联系人的名字会更新。

在这个阶段，我怀疑 Grails 将我的公司实例附加到 validate() 调用上，当它意识到验证没有通过时，尽管进行了 discard() 工作，但它注定了该事务。

从 validate() 语义和它的 javadoc（“验证实例”）来看，我没想到会有任何副作用，无论验证是否失败，或者我什至是否调用 validate()。

你怎么看？这是“正常”的行为，还是错误？我该如何解决这个问题？

如果需要，我有一个带有两个实体的简单复制案例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:23:54.343

无法在此设置上对其进行测试，但您能否在服务中设置 transactional = false，处理所有对象（在一个列表中添加正确验证的对象并将失败的对象保存/记录到其他地方），然后最后保存“好" 使用 withTransaction 的对象列表？就像是：

```
static transactional = false
def sessionFactory
List<Company> validCompanies = []
for(Company company: listOfCompaniesToValidate) {
    if (!company.validate()) {
        log.error "bogus"
    } else {
        validCompanies.add(company)
    }
}
Company.withTransaction {
    for (Company validCompany: validCompanies)
        validCompany.save()
    }
    validCompanies.clear()
}
sessionFactory.getCurrentSession().clear(); 
```

只是一个想法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:59:04.627

我可能在这里遗漏了一些东西，但“[丢弃](http://grails.org/doc/latest/ref/Domain%20Classes/discard.html)”方法的全部目标不是不应用更改，您在这里看到的（在验证错误的情况下不应用更改）是合乎逻辑的吗？

# xml - 如何将具有深度（和属性中的信息）的 xml 转换为 csv，每行代表 xml 中的一级标记？

> ID：14319663
> 
> 赞同：0
> 
> 时间：2013-01-14T13:49:31.177
> 
> 标签：xml, xslt, csv, converter

我有一个具有这种结构的 xml 文件：

```
<a>
    <b attribute="54" name="Bob" ... >
        <c name="Foo" stuff="89" attr="First line&#xA;Second line" ... />
        <c name="Bar" stuff="23" attr="Blahs" ... />
        ...
    </b>
    ...
</a> 
```

我想在 csv 文件中获取这些数据，如下所示：

```
b_attribute, b_name, ... , c1_name, c1_stuff, c1_attr ... , c2_name, c2_stuff, c2_attr ... 
"54", "Bob", ..., "Foo", "89", "First line&#xA;Second line", ..., "Bar", "23", "Blahs", ... 
```

一些标签的值可能包含 html 逗号和引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:53:25.253

这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
                xmlns:templates="csv-templates" xmlns:values="csv-values"
>
  <templates:header />
  <templates:value />
  <xsl:variable name="header" select="document('')//templates:header" />
  <xsl:variable name="value" select="document('')//templates:value" />

  <values:substitutions>
    <sub from="&quot;" to="&quot;quot;" />
    <sub from="," to="&quot;#x2C;" />
    <sub from="&#xA;" to="&amp;#xA;" />
  </values:substitutions>
  <xsl:variable name="substitutions" select="document('')//values:substitutions" />

  <xsl:output method="text" />

  <xsl:template match="text()" />

  <xsl:template match="/">
    <xsl:apply-templates select="*/*" mode="headers">
      <xsl:sort data-type="number" select="count(*)" order="descending"/>
    </xsl:apply-templates>
    <xsl:variable name="headerCount">
      <xsl:apply-templates select="*/*" mode="countAttributes">
        <xsl:sort data-type="number" select="count(*)" order="descending"/>
      </xsl:apply-templates>
    </xsl:variable>

    <xsl:apply-templates select="*/*">
      <xsl:with-param name="headerCount" select="$headerCount" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="/*/*">
    <xsl:param name="headerCount" />
    <xsl:text>&#xA;</xsl:text>
    <xsl:call-template name="CommaList">
      <xsl:with-param name="items" select=".//@*"/>
      <xsl:with-param name="type" select="$value" />
      <xsl:with-param name="minCount" select="$headerCount" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template match="/*/*" mode="headers">
    <xsl:if test="position() = 1">
      <xsl:call-template name="CommaList">
        <xsl:with-param name="items" select=".//@*"/>
        <xsl:with-param name="type" select="$header" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <xsl:template match="/*/*" mode="countAttributes">
    <xsl:if test="position() = 1">
      <xsl:value-of select="count(.//@*)"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="templates:header" priority="2">
    <xsl:param name="item" />
    <xsl:variable name="index">
      <xsl:if test="count($item/ancestor::*) > 2">
        <xsl:value-of select="count($item/../preceding-sibling::*) + 1"/>
      </xsl:if>
    </xsl:variable>
    <xsl:value-of select="concat(local-name($item/..), $index, '_', local-name($item))"/>
  </xsl:template>

  <xsl:template match="templates:value" priority="2">
    <xsl:param name="item" />
    <xsl:if test="normalize-space($item)">
      <xsl:text>"</xsl:text>
      <xsl:call-template name="escape">
        <xsl:with-param name="value" select="$item" />
      </xsl:call-template>
      <xsl:text>"</xsl:text>
    </xsl:if>
  </xsl:template>

  <xsl:template name="CommaList">
    <xsl:param name="items" />
    <xsl:param name="type" />
    <xsl:param name="minCount" select="0" />

    <xsl:apply-templates select="$type">
      <xsl:with-param name="item" select="$items[1]" />
    </xsl:apply-templates>

    <xsl:variable name="remainder" select="$items[position() > 1]" />
    <xsl:if test="$remainder or $minCount > 1">
      <xsl:text>, </xsl:text>
      <xsl:call-template name="CommaList">
        <xsl:with-param name="items" select="$remainder" />
        <xsl:with-param name="type" select="$type" />
        <xsl:with-param name="minCount" select="$minCount - 1" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <xsl:template name="escape">
    <xsl:param name="value"/>

    <xsl:variable name="foundToEscape" select="$substitutions/sub[contains($value, @from)]" />

    <xsl:choose>
      <xsl:when test="$foundToEscape">
        <xsl:call-template name="escape">
          <xsl:with-param name="value" select="substring-before($value, $foundToEscape/@from)" />
        </xsl:call-template>
        <xsl:value-of select="$foundToEscape/@to"/>
        <xsl:call-template name="escape">
          <xsl:with-param name="value" select="substring-after($value, $foundToEscape/@from)" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$value"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

可以通过向元素添加其他`<sub>`元素来添加其他替换规则`<values:substitutions>`。

# c# - Base64 在 SQL 中编码一个 utf8 字符串

> ID：14319669
> 
> 赞同：2
> 
> 时间：2013-01-14T13:49:49.360
> 
> 标签：c#, sql, string, utf-8, base64

我有一个用于将字符串转换为 base64 编码字符串的 SQL 函数。唯一的问题是没有使用 UTF8，我可以说出来，因为我有一个单独的 C# 工具可以提供不同的输出。

SQL函数：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER FUNCTION [dbo].[Base64Encode] ( @sInput NVARCHAR(max) )
RETURNS NVARCHAR(max)
BEGIN

DECLARE @vInput              VARBINARY(max)
DECLARE @sEncodedOutput      NVARCHAR(max)

set @vInput = convert(varbinary(max), @sInput)
set @sEncodedOutput = cast('' as xml).value('xs:base64Binary(sql:variable("@vInput"))', 'NVARCHAR(max)')

RETURN @sEncodedOutput

END 
```

C＃

```
 try
        {
            encodedValueTextbox.Text = Convert.ToBase64String(
                Encoding.UTF8.GetBytes(valueTextbox.Text));
        }
        catch (Exception ex)
        {
            encodedValueTextbox.Text = ex.Message;
        } 
```

有没有办法让 SQL 使用 UTF8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:36:39.303

您的@sInput 是 NVARCHAR，即 UNICODE UCS-2。因此，您正在将 UCS-2 转换为二进制文件。

您可以将输入参数更改为 varbinary 并将 UTF-8 作为二进制传递给函数。如果您输入函数的源数据也是来自 SQL 的 nvarchar，则您需要继续将二进制数据转换推回源 C#（可能存储为 varbinary，基本上我不知道您的其余部分是什么）系统看起来像）。

另一种方法是在 CLR 中编写此函数。使用 C# 将 UCS-2 转换为 UTF-8，然后也在那里进行 Base64 编码。

# json - 使用 gruntjs，我将如何从“嵌套”的 json 文件中获取数据？

> ID：14319672
> 
> 赞同：0
> 
> 时间：2013-01-14T13:49:59.493
> 
> 标签：json, gruntjs

假设在我的 Gruntfile 中，我有`pkg: grunt.file.readJSON('package.json')`，里面`package.json`是以下对象：

```
{
  "file": "data.json"
} 
```

我将如何访问数据`data.json`？这可能看起来像这样：

```
{
  "name": "Jon Schlinkert",
  "company": "Sellside"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:45:04.163

只需加载第一个文件，然后使用该结果加载第二个文件并将其添加到 grunt 配置中。像这样：

```
module.exports = function (grunt) {
    var pkg = grunt.file.readJSON('package.json');

    grunt.initConfig({
        pkg: pkg,
        data: grunt.file.readJSON(pkg.file),
        task: {
            target: {
                files: {
                    'dest': '<%- data.name %>'
                }
            }
        }
    });

    grunt.registerMultiTask('task', function() {});

    console.log('name', grunt.config('data.name'));
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:09:33.517

也许我不明白这个问题，但怎么样：

```
var pkg = grunt.file.readJSON('package.json');
var data = grunt.file.readJSON(pkg.file); 
```

# javascript - jQuery Cookie：如何防止添加点“。” 在域的开头

> ID：14319677
> 
> 赞同：1
> 
> 时间：2013-01-14T13:50:10.187
> 
> 标签：javascript, jquery, cookies

我有个问题。我需要在没有`.`开始的情况下设置 cookie 的域。我像这样为cookie设置选项：

```
cookieOptions:{
    expires:30,
    path:'/',
    domain:document.domain,
    secure:false
}, 
```

和

```
$.cookie("searchQuery", cookieObj, this.cookieOptions); 
```

我可以自定义 jQuery 选项吗？

# ios - iOS - 缺少将自定义 UICollectionViewCell 添加到 UICollectionView 的内容

> ID：14319678
> 
> 赞同：4
> 
> 时间：2013-01-14T13:50:11.643
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我试图定义我自己的自定义`UICollectionViewCell`实现并在`UICollectionView`. 这是我所做的。

1-我正在使用故事板。

2-我`UICollectionView`在另一个视图中添加了一个，那是故事板上的一个场景。

3-我将集合指向场景`datasource`的`delegate`控制器。

4-我在控制器中提供了所需方法的实现。

5-我创建了一个单元格视图`.h`和`.m`文件。在`.h`我做的文件中

`@interface HscCellView : UICollectionViewCell`

6- 我创建了一个新视图，因此我得到了一个新画布，并在右侧的相应部分中指定了我的类名（与步骤 5 相同），并提供了一个唯一标识符。
7- 在场景的控制器中，我在 .h 文件中为我拖入的集合视图定义了一个出口。

`@property (nonatomic, strong) IBOutlet UICollectionView *holesCollectionView;`

在`viewDidLoad`我做

```
[self.holesCollectionView registerClass:[HscCellView class] forCellWithReuseIdentifier:@"cellView"]; 
```

请注意，这`cellView`是我为自定义单元格 xib 指定的唯一标识符。

8-最后，我实现了

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    HscCellView *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"cellView" forIndexPath:indexPath];

    return cell;

} 
```

当我启动应用程序时，我得到一堆单元格视图（9 个，因为我在`numberOfItemsInSection`消息上指定了 9），但它们不是我的自定义单元格视图。它们没有尺寸、颜色或标签。我没有看到任何错误。我被困住了。

几个辅助问题。

*   我什么时候使用注册笔尖，什么时候注册类名？我已经看到它以两种方式完成，但似乎你几乎总是同时得到一个 nib 和一个类定义代码，这是真的吗？

*   在第 6 步中，当我在画布中为自定义单元格视图指定唯一 id 时，这是否意味着我不需要在 中注册该类`viewDidLoad`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T14:47:19.190

明白了，我想。我会尝试解释它，如果我错了，希望能得到纠正。我认为这对其他人会有所帮助。根据我的问题的评论，我确定我的类的实例实际上正在加载。但是，xib 被忽略了。这意味着当我的类被加载时，xib 没有被使用。所以，在问题的第 7 步，我做

```
UINib *nib = [UINib nibWithNibName:@"HscCellView" bundle:nil];
    [self.holesCollectionView registerNib:nib forCellWithReuseIdentifier:@"cellView"]; 
```

而不是注册课程，现在事情似乎奏效了。

我有点好奇为什么，因为我将 xib 与我的自定义类联系起来，这是必要的，但我不再被困住。

# mysql - 如何设置 sql_mode 休眠

> ID：14319679
> 
> 赞同：4
> 
> 时间：2013-01-14T13:50:14.887
> 
> 标签：mysql, hibernate, sql-mode

有没有办法在 Hibernate 属性或连接字符串中设置 sql_mode（用于 MySql 数据库）？

谢谢，

斯特凡诺

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T18:41:32.307

是的，正如[记录在案](https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html)的 sessionVariables 属性定义如下，可以在 JDBC 连接字符串中使用：

> 当驱动程序连接时，将作为 SET SESSION ... 发送到服务器的名称/值对的逗号分隔列表。

值列表放在单引号内：

```
sessionVariables=sql_mode='ALLOW_INVALID_DATES,NO_BACKSLASH_ESCAPES' 
```

# php - Appfog PHP Slim 应用程序在尝试访问 API 时抛出错误

> ID：14319681
> 
> 赞同：0
> 
> 时间：2013-01-14T13:50:18.217
> 
> 标签：php, .htaccess, rest, slim, appfog

我正在尝试使用 Slim 框架在 Appfog 中设置一个 REST 应用程序。这是基于 Coenrats 在此链接中的教程：http: [//coenraets.org/blog/2011/12/restful-services-with-jquery-php-and-the-slim-framework/](http://coenraets.org/blog/2011/12/restful-services-with-jquery-php-and-the-slim-framework/)

只有我使用了更新版本的框架。文件夹结构如下

app
--> api
----> .htaccess
----> index.php
----> Slim 框架文件夹
--> js
----> jquery.js
----> main.js
-- > css
----> 样式.css
--> index.html

这是我如何瘦身的代码

```
// load required files
require 'Slim/Slim.php';

// register Slim auto-loader
\Slim\Slim::registerAutoloader();

// initialize app
$app = new \Slim\Slim(); 
```

这是我的 .htaccess 代码：

```
RewriteEngine On

# Some hosts may require you to use the `RewriteBase` directive.
# If you need to use the `RewriteBase` directive, it should be the
# absolute physical path to the directory that contains this htaccess file.
#
# RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

由于我正在做 REST，我还按照教程设置了一个 rootURL，即：

```
var rootURL = "http://test.ap01.aws.af.cm/app/api/"; 
```

当我运行应用程序时，我正在调用一个 get 方法来获取数据库中的所有数据，但是这个错误显示在我的控制台中：

**获取[http://test.ap01.aws.af.cm/app/api/](http://test.ap01.aws.af.cm/app/api/) 404（未找到）**

我会错过什么吗？

提前致谢。

干杯! 杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:47:06.267

我想我找到了错误的原因，我在不应该的 url 中包含了 /app。我在这个上的错误。当我检查应用程序目录时，我认为我应该包含整个 URL。

谢谢！

# gtk - 为不同的显示器尺寸制作应用程序

> ID：14319692
> 
> 赞同：1
> 
> 时间：2013-01-14T13:51:04.150
> 
> 标签：gtk, user-experience

我一直在开发具有以下布局的应用程序（大大简化）：

```
+----------------------------------+
|         +----------------+       |
| Main    |                | Info  |
|         |  Interactive   |       |
| Actions |                | And   |
|         |     Graph      |       |
| Go      |                | Forms |
|         |  (Resizable)   |       |
| Here    |                |       |
|         +----------------+       |
+----------------------------------+ 
```

屏幕分辨率为 1440x900。为按钮等设置了一些最小宽度，以使它们更漂亮（例如，内部的标签与按钮边框有一定距离）。现在，如果我将窗口大小调整为大约 800x600，它会变成这样：

```
+----------------------+
|         +----+       |
| Main    |    | Info  |
| Actions |    | And   |
|         |    |       |
| Go      |    | Forms |
| Here    |    |       |
|         +----+       |
+----------------------+ 
```

这不是那么漂亮。*中间面板变得如此之小的原因是两侧的标签无法收缩。*

**问题是，我如何告诉 gtk 缩放窗口内的所有内容（例如图像、字体等）？**

如果不存在这样的功能，我有什么选择可以使窗口内的所有内容（或至少字体大小）变小或变大，而无需手动更改每个小部件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:03:44.963

Gtk 不允许你在窗口中自动“缩放”任何东西。这也是一个坏主意，因为您不知道窗口会有多小（不仅因为屏幕分辨率，还因为用户手动调整窗口大小）。

我建议你重新设计你的布局。在没有真实屏幕截图的情况下提出解决方案很复杂，但也许可以在窗口顶部替换主要操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:24:08.153

使用带有主要操作的工具栏，并将其他操作放在菜单栏中。这将为交互式图形提供更多空间。信息和表格，如果不是每时每刻都需要，可能在选项卡式视图中，或在弹出窗口中。没有截图很难说更多。

# gdb - gdb 命令的重定向

> ID：14319695
> 
> 赞同：0
> 
> 时间：2013-01-14T13:51:17.497
> 
> 标签：gdb

如何重定向此命令的输出：

(gdb) x /a $esp 0x22ff30: 0x403064 <__register_frame_info+4206692>

要做到这一点：

(gdb) x /s 0x00403064 0x403064 <__register_frame_info+4206692>: "\n按键（q 退出）？"

(gdb)

我的意思是这样的： (x /a $esp) | (x /s)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:02:39.210

据我所知，在 GDB 中重定向命令的输出是不可能的。不过，还有另一种方法可以做到这一点： `x /s *(void**)$esp`.

这将检查存储在堆栈顶部的地址处的内存。

# soap - Soap 问题 - SoapFault 异常：[Client] 看起来我们没有 XML 文档

> ID：14319696
> 
> 赞同：0
> 
> 时间：2013-01-14T13:51:18.403
> 
> 标签：soap, encoding, php, byte-order-mark

我看过类似的错误，我认为它最有可能是由于 BOM 字符，但老实说，大多数其他编码都在不同的上下文中，我只是不明白，我对肥皂不太熟悉，只是用它来拉数据然后在 php.ini 中格式化。

我的代码很简单：

```
$activityClient = xpmClient::getModuleInstance('activity', $remoteSessionId, 'xxx.5pmweb.com');
$filter = new stdClass();
$count = 300;
$offset = 0;
$activityList = $activityClient->getList($filter, $offset, $count); 
```

现在服务器错误显示：

```
> PHP Fatal error:  Uncaught SoapFault exception: [Client] looks like we got no XML document in xxx/caching.php:59\nStack trace:\n  
\#0 xxx/caching.php(59): SoapClient->__call('getList', Array)\n  
\#1 xxx/caching.php(59): xpmClient->getList(Object(stdClass), 0, '371')\n  
\#2 /xxx/reports.php(296): include('/xxx/...')\n  
\#3 {main}\n  thrown in /xxx/caching.php on line 59 
```

第 296行`report.php`是该文件的包含，该`caching.php`文件的第 59 行是

```
$activityList = $activityClient->getList($filter, $offset, $count); 
```

这工作了几个月没有问题，所以我不确定今天发生了什么变化。任何想法如何剥离 BOM 并仍然将我的数据`$activityList`作为对象放入以便我可以访问信息？

```
edit// 
```

preg 替换不起作用，我想那是因为一旦我调用 $activityList，服务器就会给出一个致命错误并且在那之后不处理任何东西，所以我试图在它坏掉之后而不是之前修复它。

```
How would i go about doing __getLastResponse() 
```

我已经阅读了手册但不明白如何构建它，我很确定我需要一个 try catch，因为我说 preg replace 不起作用但我尝试了一些变化并且它什么也没做，我很确定结构是错误的，任何指针或想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:23:23.377

我不知道为什么 BOM 会导致这种情况，但如果你想在这里剥离 bom，你就去吧

```
function strip_bom( $str ) {
    return preg_replace( '/^(\x00\x00\xFE\xFF|\xFF\xFE\x00\x00|\xFE\xFF|\xFF\xFE|\xEF\xBB\xBF)/', "", $str );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:33:15.240

您正在使用的 Soap 服务器已损坏。您是否检查过手动尝试调用它？

# vb.net - gridview 编辑单元格 vb

> ID：14319703
> 
> 赞同：0
> 
> 时间：2013-01-14T13:51:35.123
> 
> 标签：vb.net, visual-studio-2010, gridview, webforms

我正在尝试获取网格视图中已编辑单元格的单元格值。有人可以帮助我的语法吗？此代码适用于 gridview 中的第一行：

```
Dim Q As Integer = e.NewValues(e.RowIndex) 
```

但是如果我更新第 2 行，我会收到错误消息......并且我的变量是“”：

```
Index was out of range. Must be non-negative and less than the size of the collection. 
```

这将打印当前正在编辑的正确行：

```
System.Diagnostics.Debug.Print(e.RowIndex) 
```

我什至尝试直接获取单元格值：

```
Dim Qoh As Integer = CInt(gvInventory.Rows(e.RowIndex).Cells(2).Text) 
```

出现错误：

```
Conversion from string "" to type 'Integer' is not valid. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:11:09.280

```
 Dim Qoh As Integer = CType(gvInventory.SelectedRows(0).Cells(2).Text, Integer) 
```

试试这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:05:21.880

此代码适用于我的问题：

```
Dim Qoh As Integer = CInt(e.NewValues(0)) 
```

我认为这是因为这是网格中唯一可编辑的单元格。

# asp.net-mvc-4 - ASP.NET MVC 4 和 Web API 和重载

> ID：14319704
> 
> 赞同：0
> 
> 时间：2013-01-14T13:51:35.907
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我是 ASP.NET MVC 4 的新手。我创建了一个端点。该端点位于：

/myController/actionName

在我的控制器中，我定义了以下内容：

[HttpPost] public void ActionName(string parameter1) {

}

我试图弄清楚它是否可能有过载。在 ASP.NET MVC 4 Web API 中，有没有办法让我说如下内容：

```
[HttpPost]
public void ActionName(string parameter1)
{

}

[HttpPost]
public void ActionName(string parameter1, string parameter2)
{

} 
```

如果没有，有没有办法使参数可选？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:01:39.850

您不能重载控制器操作，但是，您可以在定义路由时指定一个可选参数，如下所示：

```
routes.MapRoute(
    name: "OptionalParameter",
    url: "myController/actionName/{parameter1}/{parameter2}",
    defaults: new { controller = "myController", action = "actionName", parameter1 = "Default Value", parameter2 = UrlParameter.Optional }
); 
```

# css - 如何仅使用 CSS 减慢下拉菜单动画

> ID：14319707
> 
> 赞同：2
> 
> 时间：2013-01-14T13:51:38.097
> 
> 标签：css

我有一个使用 CSS 的下拉菜单，现在我被告知他们希望下拉菜单显示得慢一些。一切都很好，但到目前为止，当用户将鼠标悬停在导航上时，我无法减慢转换速度。使用纯 CSS 解决方案执行此操作的最佳方法是什么？

[JSFiddle](http://jsfiddle.net/tjaymz/7XQXW/)上的演示

## HTML

```
<nav>
  <ul>
    <li><a href="#">Line 1</a></li>
    <li><a href="#">Line 2</a>
      <ul>
        <li><a href="#">SubCat 1</a></li>
        <li><a href="#">SubCat 2</a></li>
        <li><a href="#">SubCat 3</a></li>
      </ul>
    </li>
    <li><a href="#">Line 3</a>
      <ul>
        <li><a href="#">SubCat 4</a></li>
        <li><a href="#">SubCat 5</a></li>
        <li><a href="#">SubCat 6</a></li>
      </ul>
    </li>
    <li><a href="#">Line 4</a>
      <ul>
        <li><a href="#">SubCat 7</a></li>
        <li><a href="#">SubCat 8</a></li>
        <li><a href="#">SubCat 9</a></li>
      </ul>
    </li> 
  </ul>
</nav> 
```

## CSS

```
nav {
    background: url(../images/global/Navigation_Full.png) no-repeat;
    width: 540px;
    height: 54px;
    margin: 0 auto;
    color: #000;
}

nav ul{
    display: inline-table;
    list-style: none;
    width: 100%;
    position: relative;
    border-top: 1px solid #FF9F69;
}

nav ul:after {
    content: ""; clear: both; display: block;
}

nav ul ul {
    display: none;
    position: absolute;
    width: auto;
    top: 100%;
}

nav ul li:hover > ul {
    display: block;
}

nav li:first-child {
    border-left: none;
}

nav li {
    text-align: center;
    margin-left: 1px;
    float: left;
    height: 38px;
    line-height: 40px;
    padding: 0 10px;
}

nav li a {
    padding: 10px 17px;
    font-size: 0.813em;
    text-decoration: none;
    text-shadow: inherit;
    color: #000;
}

nav li:hover {
    box-shadow: 1px 1px 20px 1px rgba(64, 23, 0, 0.4) inset;
    -webkit-transition-property:color, background;
    -moz-transition-property:color, background;
    -webkit-transition-duration: 0.2s;
    -moz-transition-duration: 0.2s;
    -webkit-transition-timing-function: linear, ease-in;
    -moz-transition-timing-function: linear, ease-in;
}

nav ul ul {
    background: rgb(125,56,16); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(125,56,16,1) 0%, rgba(233,103,31,1) 30px, rgba(233,103,31,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(125,56,16,1)), color-stop(30px,rgba(233,103,31,1)), color-stop(100%,rgba(233,103,31,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(125,56,16,1) 0%,rgba(233,103,31,1) 30px,rgba(233,103,31,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(125,56,16,1) 0%,rgba(233,103,31,1) 30px,rgba(233,103,31,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(125,56,16,1) 0%,rgba(233,103,31,1) 30px,rgba(233,103,31,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(125,56,16,1) 0%,rgba(233,103,31,1) 30px,rgba(233,103,31,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7d3810', endColorstr='#e9671f',GradientType=0 ); /* IE6-9 */
    border-radius: 0px; padding: 0;
    border-top: none;
    z-index: 1;
}

nav ul ul li {
    float: inherit; 
    position: relative;
    border-left: none;
    border-right: none;
    text-align: left;
    font-size: 1em;
    font-weight: lighter;
}
    nav ul ul li a {
        color: #fff;
    }   
        nav ul ul li a:hover {
            color: #000;
        }

nav ul ul ul {
    position: absolute; left: 100%; top:0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:01:02.210

您已经为主菜单设置了动画，但没有为下拉菜单设置动画。我已将下拉菜单中的转换从设置 display:block 更改为将 opacity 设置为 1，

```
nav ul li:hover > ul {
    display: block;
    opacity: 1;
} 
```

并在基础元素中添加显示块，将不透明度设置为 0，并对其进行动画处理。

```
nav ul ul {
    background: rgb(125,56,16); /* Old browsers */
    display: block;
    opacity: 0;
    -webkit-transition: opacity 3s;
} 
```

结果是：

[http://jsfiddle.net/vals/SmNq3/1/](http://jsfiddle.net/vals/SmNq3/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:55:07.197

[CSS3 过渡](http://www.w3.org/TR/css3-transitions/)有一个可以设置的持续时间属性。

```
#example
{
   transition-property: top;
   transition-duration: 2s;
} 
```

注意：支持可能需要使用供应商前缀（-webkit、-o、-ms、-moz）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:02:50.460

在您的 CSS 中尝试此代码

```
div {
    overflow:hidden;
    background:#000;
    color:#fff;
    height:0;
    padding: 0 18px;
    width:100px;
    -webkit-transition: all .5s ease;
    -moz-transition: all .5s ease;
    transition: all .5s ease;
}

.animated {
    height:auto;
    padding: 24px 18px;
} 
```

检查这个[http://jsfiddle.net/catharsis/n5XfG/17/](http://jsfiddle.net/catharsis/n5XfG/17/)

# wpf - WPF 和数据绑定

> ID：14319715
> 
> 赞同：0
> 
> 时间：2013-01-14T13:51:59.543
> 
> 标签：wpf, data-binding, textbox, isenabled

我有一个 WPF 应用程序，我想通过设置一个布尔值来控制代码中多个文本框的 IsEnabled 属性。所以我决定为文本框 IsEnabled 属性添加数据绑定。这是源对象定义：

```
<Window.Resources>
     <src:QuestionControlsState x:Key="QuestionContorlsState" IsEnabled="True"/>
</Window.Resources> 
```

其中只有一个公共属性“IsEnabled”的“QuestionControlsState”简单类然后我绑定了一些文本框：

```
<TextBox Name="textBoxQuestion" 
                IsEnabled="{Binding Path=IsEnabled, Source={StaticResource QuestionContorlsState}}"> 
```

此时它工作正常，当我更改 Window.Resources 部分中的 IsEnabled 属性时，数据绑定工作。但我想从代码中控制它，所以我得到源对象：

```
 QuestionControlsState _questionControlsState = (QuestionControlsState)this.FindResource("QuestionContorlsState"); 
```

现在，当我尝试设置 _questionControlsState.IsEnabled 时，文本框状态不会改变，现在输出中会出现警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:05:09.740

没有看到你的代码，我猜你的`QuestionControlsState`类没有实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms229614.aspx)。

像这样修改它：

```
public class QuestionControlsState : INotifyPropertyChanged
{
    private bool isEnabled = true;
    public bool IsEnabled
    {
        get { return isEnabled; }
        set
        {
            isEnabled = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("IsEnabled"));
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

每当您更改属性时，这将触发 PropertyChanged 事件`IsEnabled`，通知需要刷新的视图。

当然，如果您使用的是 MVVM 模式，那么正确的做法是将所有文本框绑定到***ViewModel 中***的布尔 IsEnabled 属性，而不是尝试在代码隐藏中查找静态资源……然后，`IsEnabled = false`在VM 将禁用所有文本框（不需要静态资源）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:00:57.900

请使用 MVVM 模式将数据传递给 XAML 视图并封装视图逻辑并使视图逻辑可测试。

使用[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)可以很容易地创建一个可观察的属性，该属性可以绑定到控件的 IsEnabled 属性。您只需使用命令将属性更改为 true 或 false 即可启用或禁用该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:13:34.410

谢谢你们，Blachshma 你是对的，我忘了在我的自定义类上实现 INotifyPropertyChanged 接口，现在它可以正常工作了。谢谢！我想到了 MVVM 模式，它看起来很酷，但我刚开始使用 WPF 并想学习基础知识。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-14T13:58:40.073

您可以尝试更改`StaticResource`为`DynamicResource`.

你可以在[这里找到信息](http://msdn.microsoft.com/en-us/library/ms750950.aspx)

# python - Django 在查询集中返回所述行

> ID：14319717
> 
> 赞同：0
> 
> 时间：2013-01-14T13:52:03.813
> 
> 标签：python, django

在 Django 中使用查询集（在视图中）我只想得到所说的第 51-100 行。即我只希望它返回这些行。

这是否可能以及如何在 .

```
 objectQuerySet = Recipient.objects.filter(incentiveid=incentive).order_by('fullname') 
```

我不想使用任何寻呼系统等，这只是一次性的吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T13:54:08.397

您可以使用[切片](https://docs.djangoproject.com/en/dev/topics/db/queries/#limiting-querysets)来执行`LIMIT` `OFFSET`语句：

```
objectQuerySet = Recipient.objects.filter(incentiveid=incentive).order_by('fullname')[51:100] 
```

# javascript - nodejs exec 命令失败，没有有用的错误消息

> ID：14319724
> 
> 赞同：12
> 
> 时间：2013-01-14T13:52:31.807
> 
> 标签：javascript, node.js, exec, child-process

这是要执行的代码

```
 cp.exec("cc -Wall /tmp/test.c -o /tmp/test", function(e, stdout, stderr) {
        if (e) {
            var errorstr = "Compilation failed with the following error
"+ e.message.toString()
            client.send(errorstr)
            console.log(e, stdout, stderr)
            ee.prototype.removeAllListeners()
        } else if (stderr.length > 0) {
            client.send("Compilion finished with warnings\n"+ stderr + '\n')
            client.send('compiled')
            ee.prototype.emit('compiled')
        } else {
            client.send("Compilation successful")
            ee.prototype.emit('compiled')
        }
    }) 
```

'client' 是 socket.io 的回调参数的参数。'ee' 是 EventEmitter 的一个实例

来到问题所在。在运行代码时，回调说命令不成功。console.log(e, stdout, stderr) 是

```
{ [错误：命令失败：] 杀死：假，代码：假，信号：未定义}''''
```

/tmp/test.c 是有效的 C 代码，在检查目录 /tmp 时，我发现 test.c 是正确的，并且正在生成二进制“测试”*并*在 shell 中运行时正确执行。所以我不明白为什么它会标记执行不成功。错误对象的信息也无济于事。将不胜感激一些帮助/解释

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T14:07:36.620

我有点担心控制台的输出。

```
{ [Error: Command failed: ] killed: false, code: false, signal: undefined } 
```

看起来不像一个合适的 JSON/JavaScript 对象，尤其是`[Error: Command failed: ]`部分；至少缺少一个逗号。

建议：

1.  从命令行运行命令并检查退出代码（使用`echo $?`）。如果退出代码是 != 0，那么这意味着命令“失败”（无论这意味着什么）。

2.  当命令失败时，[nodejs 说它会将退出代码](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)放入`e.code`（我在您的输出中缺少...）。找出这个值发生了什么。

3.  尝试`if(e !== null)`代替`if(e)`. **不过应该没什么**区别。

4.  与其直接调用编译器，不如调用一个将 stderr/stdout 重定向到文件（或使用 保存副本`cc ... |& tee /tmp/cc.log`）的 shell 脚本，以确保复杂设置的任何部分都不会吞下重要信息。

# java - 从 DOCX 读取详细信息属性

> ID：14319727
> 
> 赞同：2
> 
> 时间：2013-01-14T13:52:41.373
> 
> 标签：java, apache-poi, docx

如何从 *.docx 文档中读取 property->details->(title | subject | comments)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:27:20.290

文档元数据在 .docx、.pptx 和 .xlsx 格式中很常见，因此任何从这些格式中读取元数据的教程或示例都可以满足您的需求。Apache POI 包含您需要的一切。

读取 OOXML 元数据的一个很好的例子是[Apache POI 中的 POIXMLPropertiesTextExtractor](http://svn.apache.org/repos/asf/poi/trunk/src/ooxml/java/org/apache/poi/POIXMLPropertiesTextExtractor.java)，我建议您通读该代码以了解它是如何工作的。

# asp.net - 在 SharePoint 中显示 ASP.NET 用户控件？

> ID：14319728
> 
> 赞同：0
> 
> 时间：2013-01-14T13:52:41.690
> 
> 标签：asp.net, sharepoint, user-controls

我的任务是为`Sharepoint`网站创建“Web 部件”。我引用“Web Part”的原因是因为我认为它不适合我的需要。

对于`User Control`开发人员来说，他想添加什么样的控件是完全自由的。这可以很容易地在控件的（例如）`MyUserControl.aspx`文件中完成`MyUserControl.ascx`。您甚至可以将 jQueryUI 元素添加到`User Control`类似的选项卡等。

所以基本上我需要自由地添加到页面中的 (HTML) 元素和不添加的元素。

由于看起来这无法通过 SharePoint 实现，`Web Part`我想知道是否可以显示一个`User Control`代替？

有没有办法做到这一点..？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:16:11.870

您不能`User control`直接添加到特定的 SharePoint 页面，但可以添加到母版页或页面布局。（并且仅由 SharePoint 设计师）

另一种选择是创建`User Control`添加加载它到`Web Part`，然后添加`Web Part`到您的页面。

**编辑：**

正如 Rikard Uppström 所写，在 VS2010 中有一个名为 Visual Web Part 的模板可以为您完成这些工作，但如果您在 SP 2007 中工作，您可以自己完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:04:32.653

如果您使用 Visual Studio，您可以选择“创建新的 Visual WebPart”，前提是我们正在谈论的是 SharePoint 2010？此选项为您提供了一个 ascx 文件，您可以将其视为普通用户控件。它会自动包装为 SharePoint-webpart。

有关更详尽的信息，请参阅此演练：http: [//blogs.msdn.com/b/bethmassi/archive/2010/01/28/creating-a-sharepoint-visual-web-part-using-visual-studio-2010。 aspx](http://blogs.msdn.com/b/bethmassi/archive/2010/01/28/creating-a-sharepoint-visual-web-part-using-visual-studio-2010.aspx)

# android - Android Jelly Bean 4.1.2：人物应用不显示生日事件

> ID：14319729
> 
> 赞同：1
> 
> 时间：2013-01-14T13:52:45.017
> 
> 标签：android, contacts, android-4.2-jelly-bean, android-syncadapter

我正在编写一个 android 联系人同步适配器。我成功地从外部服务提供商那里检索了联系人数据，并将他们的数据插入到 android 联系人提供商中。我插入的数据是：个人资料图片、名字、中间名、姓氏、网站、生日和流项目。

我插入的所有数据都由标准的 android People 应用程序正确显示，生日事件除外。

这是我用来插入生日事件的代码：

```
op = ContentProviderOperation.newInsert(Data.CONTENT_URI)
    .withValue(Data.RAW_CONTACT_ID, existingRawId)
    .withValue(Data.MIMETYPE, Event.CONTENT_ITEM_TYPE)
    .withValue(Event.START_DATE, bDay)
    .withValue(Event.TYPE, Event.TYPE_BIRTHDAY); 
```

其中`bDay`是具有以下格式的字符串：yyyy-MM-dd

有谁知道我做错了什么或者为什么生日活动没有显示在人物应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:44:17.307

好的，从 AOSP 源代码来看，联系人应用程序似乎只处理 Google 和 Exchange 帐户类型的事件数据类型。因此，显然，不可能让应用程序显示任何自定义帐户类型的生日事件。

# java - 如何将 java.util.List 复制到另一个 java.util.List

> ID：14319732
> 
> 赞同：159
> 
> 时间：2013-01-14T13:52:50.337
> 
> 标签：java, collections, copy

我有一个`List<SomeBean>`从 Web 服务填充的。我想将该列表的内容复制/克隆到相同类型的空列表中。用于复制列表的 Google 搜索建议我使用`Collections.copy()`方法。在我看到的所有示例中，目标列表应该包含要进行复制的确切项目数。

由于我正在使用的列表是通过 Web 服务填充的，并且它包含数百个对象，因此我无法使用上述技术。还是我用错了？？！！无论如何，为了让它工作，我尝试做这样的事情，但我仍然得到一个`IndexOutOfBoundsException`.

```
List<SomeBean> wsList = app.allInOne(template);

List<SomeBean> wsListCopy=new ArrayList<SomeBean>(wsList.size());   
Collections.copy(wsListCopy,wsList);
System.out.println(wsListCopy.size()); 
```

我尝试使用，`wsListCopy=wsList.subList(0, wsList.size())`但`ConcurrentAccessException`后来在代码中得到了一个。打击和审判。:)

无论如何，我的问题很简单，**如何将列表的全部内容复制到另一个列表中？**当然，不是通过迭代。

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2013-01-14T13:53:44.687

只需使用这个：

```
List<SomeBean> newList = new ArrayList<SomeBean>(otherList); 
```

注意：仍然不是线程安全的，如果您`otherList`从另一个线程进行修改，那么您可能想要制作`otherList`（甚至`newList`） a [`CopyOnWriteArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)，例如 - 或使用锁定原语，例如[ReentrantReadWriteLock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)来序列化对任何列表的读/写访问并发访问。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-12-10T12:36:50.617

这是一种非常好的 Java 8 方法：

```
List<String> list2 = list1.stream().collect(Collectors.toList()); 
```

当然，这里的好处是您可以过滤并仅跳转到列表的一部分副本。

例如

```
//don't copy the first element 
List<String> list2 = list1.stream().skip(1).collect(Collectors.toList()); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-04-04T10:26:31.823

```
originalArrayList.addAll(copyArrayofList); 
```

请记住，每当使用**addAll()**方法进行复制时，对相同对象的两个数组列表（originalArrayList 和 copyArrayofList）引用的内容都将添加到列表中，因此如果您修改其中任何一个，则 copyArrayofList 也将反映相同的变化。

如果您不想要副作用，那么您需要将每个元素从 originalArrayList 复制到 copyArrayofList，例如使用 for 或 while 循环。对于深拷贝，您可以使用下面的代码片段。

但是您还需要做一件事，实现`Cloneable`接口并覆盖`clone()`SomeBean 类的方法。

```
public static List<SomeBean> cloneList(List<SomeBean> originalArrayList) {
    List<SomeBean> copyArrayofList = new ArrayList<SomeBean>(list.size());
    for (SomeBean item : list) copyArrayofList.add(item.clone());
    return clone;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-14T13:58:36.667

> 我试图做这样的事情，但我仍然得到一个 IndexOutOfBoundsException。
> 
> 我有一个 ConcurrentAccessException

这意味着您在尝试复制列表时正在修改列表，很可能是在另一个线程中。要解决此问题，您必须

*   使用专为并发访问而设计的集合。

*   适当地锁定集合，以便您可以对其进行迭代（或允许您调用为您执行此操作的方法）

*   找一个地方避免需要复制原始列表。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-04-15T17:24:40.267

从**Java 10**开始：

```
List<E> oldList = List.of();
List<E> newList = List.copyOf(oldList); 
```

[`List.copyOf()`](https://docs.oracle.com/javase/10/docs/api/java/util/List.html#copyOf(java.util.Collection))返回一个不可修改`List`的包含给定的元素`Collection`。

给定的`Collection`不能是`null`，并且不能包含任何`null`元素。

此外，如果您想创建 a 的深层副本，您可以[在此处](https://stackoverflow.com/questions/715650/how-to-clone-arraylist-and-also-clone-its-contents)`List`找到许多好的答案。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-12-14T12:32:40.307

Java 8 还有另一种方法是空安全的。

```
List<SomeBean> wsListCopy = Optional.ofNullable(wsList)
    .map(Collection::stream)
    .orElseGet(Stream::empty)
    .collect(Collectors.toList()); 
```

如果你想跳过一个元素。

```
List<SomeBean> wsListCopy = Optional.ofNullable(wsList)
    .map(Collection::stream)
    .orElseGet(Stream::empty)
    .skip(1)
    .collect(Collectors.toList()); 
```

Java 9+ 可以使用 Optional 的 stream 方法

```
Optional.ofNullable(wsList)
    .stream()
    .flatMap(Collection::stream)
    .collect(Collectors.toList()) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-14T19:54:45.740

我尝试了类似的方法并且能够重现问题（IndexOutOfBoundsException）。以下是我的发现：

1) Collections.copy(destList, sourceList) 的实现首先通过调用size() 方法检查目标列表的大小。由于对 size() 方法的调用将始终返回列表中的元素数（在本例中为 0），因此构造函数 ArrayList(capacity) 仅确保后备数组的初始容量，这与列表的大小。因此，我们总是得到 IndexOutOfBoundsException。

2) 一种相对简单的方法是使用以集合为参数的构造函数：

```
List<SomeBean> wsListCopy=new ArrayList<SomeBean>(wsList); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-16T04:24:51.107

我遇到了同样的问题**ConcurrentAccessException**，我的解决方案是：

```
List<SomeBean> tempList = new ArrayList<>();

for (CartItem item : prodList) {
  tempList.add(item);
}
prodList.clear();
prodList = new ArrayList<>(tempList); 
```

所以它一次只工作一个操作，避免了 Exeption ......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-03T04:30:56.383

您可以使用 addAll()。

例如：`wsListCopy.addAll(wsList);`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-10T17:51:23.823

re: `indexOutOfBoundsException`，您的子列表参数是问题所在；您需要以 size-1 结束子列表。从零开始，列表的最后一个元素总是大小为 1，大小位置没有元素，因此错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-27T11:47:43.413

我看不到任何正确的答案。如果你想要一个深拷贝，你必须手动迭代和复制对象（你可以使用复制构造函数）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-04T19:45:42.597

您应该使用该`addAll`方法。它将指定集合中的所有元素附加到副本列表的末尾。这将是您的清单的副本。

```
List<String> myList = new ArrayList<>();
myList.add("a");
myList.add("b");
List<String> copyList = new ArrayList<>();
copyList.addAll(myList); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-07T23:51:13.660

以防万一您使用龙目岛：

使用以下注释标记 SomeBean：

```
@Builder(toBuilder = true, builderMethodName = "") 
```

Lombok 将使用复制构造函数为您执行对象的浅拷贝：

```
inputList.stream()
         .map(x -> x.toBuilder().build())
         .collect(Collectors.toList()); 
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2015-06-04T14:20:36.243

subList 函数是一个技巧，返回的对象仍然在原始列表中。所以如果你在 subList 中进行任何操作，无论是单线程还是多线程，都会导致代码中的并发异常。

# c# - 在网格视图的绑定字段中显示多个数据字段

> ID：14319745
> 
> 赞同：1
> 
> 时间：2013-01-14T13:53:21.053
> 
> 标签：c#, sql-server-2008, visual-studio-2008

我有以下 sql 查询，我想在 gridview 中显示，基本上是加入的字段。

我怎样才能做到这一点？

```
SELECT 
--RTRIM(C.CustomerFirstName) + ' ' + LTRIM(C.CustomerLastName) as CustomerFullName,
C.CustomerCompany,
C.CustomerPosition, 
C.CustomerCountry, 
C.CustomerProvince, 
C.CustomerContact,
CP.ActionDate, 
CP.ProductCode,
CP.CustomerEmail
     FROM tblCustomers C
    INNER JOIN 
    tblCustomerProducts CP ON 
C.CustomerEmail = CP.CustomerEmail
     ORDER BY ActionDate DESC 
```

这是网格视图的 html。基本上我希望 CustomerFirstName 和 CustomerLastName 在一个字段中

```
<asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
        GridLines="None" Width="231px" AutoGenerateColumns="False">
        <RowStyle BackColor="#EFF3FB" />
        <Columns>
            **<asp:BoundField DataField="CustomerFirstName" HeaderText="Name" />
            <asp:BoundField DataField="CustomerLastName" HeaderText="Last Name" />**
            <asp:BoundField DataField="CustomerCompany" HeaderText="Company/Organisation" />
            <asp:BoundField DataField="CustomerPosition" HeaderText="Position" />
            <asp:BoundField DataField="CustomerCountry" HeaderText="Country" />
            <asp:BoundField DataField="CustomerProvince" HeaderText="Province" />
            <asp:BoundField DataField="CustomerContact" HeaderText="Contact" />
            <asp:BoundField DataField="CustomerEmail" HeaderText="Email Address" />
            <asp:BoundField DataField="ActionDate" HeaderText="Action Date" />
            <asp:BoundField DataField="ProductCode" HeaderText="Product code" />
        </Columns>
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <EditRowStyle BackColor="#2461BF" />
        <AlternatingRowStyle BackColor="White" />
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:02:47.793

你想要 [的是使用](http://msdn.microsoft.com/en-us/library/bb288032.aspx) `<asp:templatefield>`而不是`<asp:boundfield>`

上面链接中的第 2 步显示了使用模板字段的一种方式。这是另一个：

```
<columns>
    <asp:TemplateField  HeaderText="Name">
    <ItemTemplate>
        <div><%#Eval("CustomerFirstName")%>, <%#Eval("CustomerLastName")%></div>
    </ItemTemplate>
<asp:BoundField>
....
</columns> 
```

我添加了`<div>`and`,`来展示你可以在你的`<ItemTemplate>`.

# c++ - 指向成员模板类的指针

> ID：14319748
> 
> 赞同：3
> 
> 时间：2013-01-14T13:53:41.183
> 
> 标签：c++

AbstractFieldCollection 是hardwareMissingAlarm 等的基类。hardwareMissingAlarm 属于另一个模板类。

```
alarmFieldCollection.push_back((AbstractAlarmField Device::*)  &Device::hardwareMissingAlarm);
alarmFieldCollection.push_back((AbstractAlarmField Device::*)  &Device::hardwareErrorAlarm);
alarmFieldCollection.push_back((AbstractAlarmField Device::*)  &Device::badConfigAlarm);`` 
```

然后在另一个函数中，我正在读取这样的向量：

```
for(int32_t i=0; i<alarmFieldCollection.size(); i++) 
{
    AbstractAlarmField Device::* pAF = alarmFieldCollection[i];
    std::cout << "isRaised: "<< pDev << std::endl;
    if ((pDev->*pAF).isRaised(pContext))
    {
           .....
    }
 } 
```

并且`pDev`是 Device 对象，但`pDev->*pAF`返回`NULL`. 事实上，当我打印时`&Device::hardwareErrorAlarm`，`&Device::hardwareMissingAlarm` 结果是 1。我不知道我做错了什么。

`isRaised`是属于的方法`class AbstractAlarmField`。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:59:32.693

您几乎没有提供任何代码，但您似乎是按值存储抽象对象，而不是按引用或指针。这可能会导致对象切片和任何类型的内存问题。尝试改用`AbstractAlarmField&`作为`Device`字段的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:56:11.270

将成员指针转换`X C::*`为`Y C::*`. 标准允许它作为`reinterpret_cast`或 C 风格的转换，但完全未指定结果（除非您转换回原始类型）。您最好使用虚拟函子来安全地获取`AbstractAlarmField`子对象：

```
#include <type_traits>
#include <memory>

struct AlarmGetter {
public:
    virtual ~AlarmGetter();
    virtual AbstractAlarmField& get(Device& dev) const = 0;
};

template <typename T>
struct AlarmMemberPtr
  : public AlarmGetter {
    static_assert(std::is_base_of<AbstractAlarmField, T>::value,
                  "Member type is not an AbstractAlarmField");
public:
    explicit AlarmMemberPtr(T Device::*member)
      : m_member( member ) {}
    virtual AbstractAlarmField& get(Device& dev) const {
        return dev.*m_member;
    }
private:
    T Device::*m_member;
};

template <typename T>
std::unique_ptr<AlarmGetter> make_alarm_getter(T Device::*member) {
    std::unique_ptr<AlarmGetter> ptr(new AlarmMemberPtr<T>(member));
    return ptr;
}

// To populate:
std::vector<std::unique_ptr<AlarmGetter>> alarmFieldCollection;
alarmFieldCollection.push_back(make_alarm_getter(&Device::hardwareMissingAlarm));
alarmFieldCollection.push_back(make_alarm_getter(&Device::hardwareErrorAlarm));
alarmFieldCollection.push_back(make_alarm_getter(&Device::badConfigAlarm));

// To use:
if (alarmFieldCollection[i]->get(*pDev).isRaised(pContext)) 
```

如果它可能有用，您还可以轻松添加重载

```
virtual const AbstractAlarmField& get(const Device& dev) const; 
```

# c# - 更改 Telerik GricViewComboBox 追加列表字体

> ID：14319753
> 
> 赞同：0
> 
> 时间：2013-01-14T13:53:51.333
> 
> 标签：c#, winforms, telerik, radgridview, datagridviewcombobox

我有一个带有组合框列的 Telerik GridView，同时在这个组合框中过滤一个下拉的附加列表。

和下图一样...

![在此处输入图像描述](../Images/b5515bdfc485612756d6e6d0766e5f6d.png)

所以我想让附加列表的字体更大。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:35:53.160

RadDropDownList 对其默认项目表示和自动完成建议项目使用不同的弹出窗口。这是一个演示如何更改两者字体的示例：

```
 void radGridView1_CellEditorInitialized(object sender, GridViewCellEventArgs e)
    {
        RadDropDownListEditor editor = e.ActiveEditor as RadDropDownListEditor;
        if (editor != null)
        {
            editor.DropDownStyle = RadDropDownStyle.DropDown;
            RadDropDownListEditorElement element = (RadDropDownListEditorElement)editor.EditorElement;

            element.VisualItemFormatting -= element_VisualItemFormatting;
            element.AutoCompleteSuggest.DropDownList.VisualItemFormatting -= element_VisualItemFormatting;

            //this handles the default drop down formatting - when you press the arrow key to open the drop down
            element.VisualItemFormatting += element_VisualItemFormatting;
            //this handles the suggest popup formatting
            element.AutoCompleteSuggest.DropDownList.VisualItemFormatting += element_VisualItemFormatting;
        }
    }

    void element_VisualItemFormatting(object sender, VisualItemFormattingEventArgs args)
    {
        args.VisualItem.Font = new Font("Arial", 16);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:26:57.853

您可以使用您的字体制作一个 CellTemplate，也可以处理该`CellFormating`事件并执行以下操作：

```
void radGridView_CellFormatting(object sender, CellFormattingEventArgs  e)      
{ 
    // For all cells under the Account Name column
    if(e.CellElement.ColumnInfo.Name == "Account Name")
    {
        if(e.CellElement.Value != null)
        {
            System.Drawing.Font newfontsize = new System.Drawing.Font(e.CellElement.Font.FontFamily.Name,20);

            for each(GridViewCellInfo cell in e.Row.Cells)
            {
                e.CellElement.Font = newfontsize;
            }

        }
    }
    // For all other cells under other columns
    else
    {
        e.CellElement.ResetValue(Telerik.WinControls.UI.LightVisualElement.Font, Telerik.WinControls.ValueResetFlags.Local);
    }
} 
```

为“newfontsize”变量插入你想要的任何大小的字体。另请注意，在您的情况下可能不需要 else 语句，但您可以使用 ResetValue 属性将字体重置为默认值。

# asp.net - SignalR 轮询数据库以获取更新

> ID：14319758
> 
> 赞同：8
> 
> 时间：2013-01-14T13:54:20.430
> 
> 标签：asp.net, asp.net-mvc-4, signalr

我希望使用 SignalR 向客户端提供更新，更新将来自消息表，当应用程序发生事情时更新该消息表。

我的问题是应用程序将有大约 500-600 个并发用户，我不能让所有用户都连接到数据库并不断轮询表。

id 喜欢做的是有一个单一的事情{？} 轮询表，然后更新集线器而不是每个连接轮询.. 我正在考虑为此使用单例？所以也许当应用程序启动时，会创建一些东西，然后真正完成所有工作..

我的问题是 - 假设我有一个单例，它有一个事件，每次有更新时都会触发。如果说 500 个控制器订阅此事件，性能会如何？

另外..如果有更好的方法可以做到这一点，那么请说..这是我的第一个也是唯一一个可悲的想法！

任何帮助都会很棒！

编辑：数据是由遗留应用程序提供的，我无法控制数据的输入方式，因此需要进行数据库轮询。

圣。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T15:50:11.303

我宁愿不轮询数据库，因为这会很浪费。我会通过只为我的数据（HTTP API 等）打开一个入口点来解决这个问题，然后通过 SignalR Hub 向所有连接的客户端广播更新。Brad Wilson 有一个非常酷的演示文稿，演示了这种方法：

[Brad Wilson - Microsoft 的现代 Web 堆栈，由 ASP.NET Web API 主演](http://vimeo.com/43603472)

这是此方法的代码示例，它使用 ASP.NET Web API 技术进行数据输入。它使用内存字典进行数据存储，但这里不关心数据存储技术：

```
// This hub has no inbound APIs, since all inbound communication is done
// via the HTTP API. It's here for clients which want to get continuous
// notification of changes to the ToDo database.
[HubName("todo")]
public class ToDoHub : Hub { }

public abstract class ApiControllerWithHub<THub> : ApiController
    where THub : IHub {

    Lazy<IHubContext> hub = new Lazy<IHubContext>(
        () => GlobalHost.ConnectionManager.GetHubContext<THub>()
    );

    protected IHubContext Hub {

        get { return hub.Value; }
    }
}

public class ToDoController : ApiControllerWithHub<ToDoHub> {

    private static List<ToDoItem> db = new List<ToDoItem> {

        new ToDoItem { ID = 0, Title = "Do a silly demo on-stage at NDC" },
        new ToDoItem { ID = 1, Title = "Wash the car" },
        new ToDoItem { ID = 2, Title = "Get a haircut", Finished = true }
    };
    private static int lastId = db.Max(tdi => tdi.ID);

    // Lines removed for brevity

    public HttpResponseMessage PostNewToDoItem(ToDoItem item) {

        lock (db) {

            // Add item to the "database"
            item.ID = Interlocked.Increment(ref lastId);
            db.Add(item);

            // Notify the connected clients
            Hub.Clients.addItem(item);

            // Return the new item, inside a 201 response
            var response = Request.CreateResponse(HttpStatusCode.Created, item);
            string link = Url.Link("apiRoute", new { controller = "todo", id = item.ID });
            response.Headers.Location = new Uri(link);
            return response;
        }
    }

    // Lines removed for brevity
} 
```

Brad 演示的应用程序的完整源代码也可在：[https](https://github.com/bradwilson/ndc2012) ://github.com/bradwilson/ndc2012 获得。

您不喜欢的另一个选项是让您的数据库在数据更改后立即触发通知。然后，您可以将其拾取并通过 SignalR 进行广播。这是一个例子：

[使用 SignalR 和 SqlDependency 的 ASP.NET 中的数据库更改通知](http://techbrij.com/database-change-notifications-asp-net-signalr-sqldependency)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:15:26.633

抱歉，这个解决方案不是 signalR，但也许你可以从中获得灵感。

这是[在 GitHub 上下载的完整示例](https://github.com/XSockets/XVA/tree/master/XVA-02-07-PollingDbForUpdates/Any%20OS)

# java - Java - 反射，投射到未知对象？

> ID：14319760
> 
> 赞同：1
> 
> 时间：2013-01-14T13:54:23.517
> 
> 标签：java, swing, reflection, casting

基本上，我扫描 JFrame 中的所有组件，检查它是否具有方法 setTitle(String arg0)，如果有，则将其标题设置为“foo”。但是，为了设置它的标题，我需要将它转换为合适的对象。

```
 public void updateTitle(Container root){

        for (Component c : root.getComponents()){

            String s = "";
            for (Method m : c.getClass().getDeclaredMethods()){

                s += m.getName();
            }

            if (s.contains("setTitle")){                

                c.setTitle("foo"); //Here is where I need the casting 
            }

            if (c instanceof Container){

                updateTitle((Container) c);
            }
        }           
    } 
```

问题是，我不知道它是什么类。有什么办法可以将其投射到自己身上，还是我应该尝试做其他事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:58:59.510

当你有 a`Method`时，你可以使用`invoke()`它来调用它：

```
 for (Method m : c.getClass().getDeclaredMethods()){
     if( "setTitle".equals( m.getName() ) {
         m.invoke( c, "foo" ); // == c.setTitle("foo"); but without the casts
     }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:56:06.267

您可以通过反射调用 setTitle()，而不是通过强制转换

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T14:01:10.023

```
for (Method m : c.getClass().getDeclaredMethods()){
    if (m.getName().equals("setTitle")) {
        m.invoke(c, "foo");
    }
} 
```

删除所有其他不必要的代码。您的 String`s`是无用的（因为无论如何，附加所有方法名称并检查 是没有意义的`contains`。如果该类有调用方法`setT`怎么`itle`办？）

# c++ - 为什么在 void/int 声明后使用 const？

> ID：14319762
> 
> 赞同：1
> 
> 时间：2013-01-14T13:54:25.823
> 
> 标签：c++, function, constants

> **可能重复：**
> [const (c++) 是可选的吗？](https://stackoverflow.com/questions/2477461/is-const-c-optional)
> [常量成员函数](https://stackoverflow.com/questions/4691332/constant-member-functions)

我已经看到了不同的帖子`int a() const`。我的问题是我们为什么要把`const`关键字放在那里？我知道它会阻止我们对函数所在的类的成员进行更改，但那又如何呢？

我们可以在函数上方写一个注释，告诉编码器不要对函数内部的类本身进行任何更改，但是为什么我们真的关心声明`const`之后的内容呢？`void`例如，在哪些情况下可能有更好的方法来使用`int a() const`而不只是`int a()`编译的代码是否会发生变化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T13:55:58.703

它的确有所作为。考虑`A`成为一个有`print()`方法的类。然后这个：

```
const A a;
a.print(); 
```

只有 compiles`print`被定义为`const`.

当然，最主要的原因是为了防止对类内部的对象进行任何更改。这

> 我们可以在函数上方写一个注释并告诉编码器不要对函数内部的类本身进行任何更改

只是一厢情愿。这不会真的发生。因此，如果有人不阅读评论（或阅读并忽略它），您将收到编译器错误。

优化还有一个好处——编译器可以更好地并行处理`const`对象上的任务，因为它可以假设它们在对它们的操作之间不会发生变化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T13:57:13.230

使用`const`函数的三个基本原因：

1) C++ 只允许 const 引用可以绑定到临时对象。但是如果你没有有用的 const 函数，那么 const 引用就毫无用处。

2) 一些库，例如 C++ 标准库，提供了仅适用于 const 函数的特定语义保证。例如，您可以在标准集合上保证可以同时从多个线程访问集合的 const 函数。

3）它允许编译器捕捉到容易犯的错误。例如，如果您打算依赖 C++ 标准容器保证，如果您使用 const 对象，则只能调用 const 函数。所以一个错误，比如有人修改代码忘记了并发问题，会在编译时被发现。（而不是当有人依靠你的程序来做真正的工作时。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T13:56:34.407

声明成员函数 const 的好处是，如果您修改对象，编译器将发出错误。所以，即使你不小心修改了对象，编译器也会发现你的错误。

# c# - 使用实体框架查询多个表的联合结果

> ID：14319763
> 
> 赞同：2
> 
> 时间：2013-01-14T13:54:31.257
> 
> 标签：c#, entity-framework

我想查询 3 个表并获取所有表的最新活动，由 CreatedDate 时间戳确定。每个表都由我的域模型中的一个实体表示，并且我使用实体框架代码优先（无数据迁移）来映射我的域。

我知道查询在 SQL 中应该是什么样子，但我不确定如何在 LinqToEntities 或 EntitySql 中制作它。您能否告诉我如何在 Entity Framework 中执行此操作，即使使用 Entity Framework 查询方法执行此查询是否合适？

在此先感谢您的帮助。

这是我的实体（主键在基类上）：

```
public class Group : EntityThatBelongsToApartmentComplex<int>
{
    public string GroupName { get; set; }
    public string GroupDescription { get; set; }

    [Required]
    public DateTimeOffset CreatedDate { get; protected set; }

    public int CreatedById { get; set; }
    public virtual UserProfile CreatedBy { get; set; }    
}

public class Activity : EntityThatBelongsToApartmentComplex<int>
{
    [StringLength(150)]
    public string Name { get; set; }

    [StringLength(150)]
    public string Description { get; set; }

    public int CreatedById { get; set; }
    public virtual UserProfile CreatedBy { get; set; }

    [Required]
    public DateTimeOffset CreatedDate { get; protected set; }       
}

public class Comment : EntityBase<int>
{
    [StringLength(200)]
    public string Text { get; set; }

    public int CreatedById { get; set; }
    public virtual UserProfile CreatedBy { get; set; }

    [Required]
    public DateTimeOffset CreatedDate { get; protected set; }
} 
```

这是我对 SQL 中查询应该是什么样子的感觉：

```
WITH NewsFeed AS (
SELECT 
    g.Id AS ItemId
    ,'Group' AS ItemType
    ,g.GroupName AS HeaderText
    ,g.CreatedDate
    ,g.CreatedById AS CreatorId
    ,u.UserName AS CreatorName
FROM Groups g
    INNER JOIN UserProfiles u on g.CreatedById = u.Id

UNION 

SELECT 
    a.Id AS ItemId
    ,'Activity' AS ItemType
    ,a.Name AS HeaderText
    ,a.CreatedDate
    ,a.CreatedById AS CreatorId
    ,u.UserName
FROM Activities a
    INNER JOIN UserProfiles u on a.CreatedById = u.Id

UNION 

SELECT 
    c.Id AS ItemId
    ,'Comment' AS ItemType
    ,c.Text AS HeaderText
    ,c.CreatedDate
    ,c.CreatedById AS CreatorId
    ,u.UserName
FROM Comments c
    INNER JOIN UserProfiles u on c.CreatedById = u.Id
) 
SELECT TOP 10 *
    FROM NewsFeed
    ORDER BY CreatedDate 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:06:11.413

您需要使用投影。只需将每个单个查询的结果投影到具有相同参数（名称和类型必须匹配）的匿名（或非匿名）对象中。然后你可以做这样的事情：

```
var query =
    context.SetOne.Select(x => new { Key = x.ID })
        .Union(context.SetTwo.Select(x => new { Key = x.AnotherKey }))
        .Union(context.SetThree.Select(x => new { Key = 5 })); 
```

# javascript - 在IOS上使用ajax上传html5画布内容

> ID：14319766
> 
> 赞同：2
> 
> 时间：2013-01-14T13:54:35.317
> 
> 标签：javascript, ios, html5-canvas, blob, image-uploading

对于基于 Web 的应用程序，我们希望能够让人们在 Ipad 上签名。运行 IOS 我们使用画布元素进行绘制，然后将其上传到 IBM I Service.running net.data 它在 chrome 和 firefox 上运行良好个人电脑。

尽管请求似乎是空的，但在 safari 或 chrome 中的 ipad 上。我正在寻找几个小时，似乎无法找出这段代码有什么问题。

有人知道我可以解决这个问题吗？顺便说一句，我们没有使用 jquery。下面是我们使用的代码的一部分

谢谢！合资公司

```
GUI.Signature.dataURItoBlob = function(dataURI) {
  var binary = atob(dataURI.split(',')[1]);;
  var array = [];
  var content = null;
  for(var i = 0; i < binary.length; i++) {
    array.push(binary.charCodeAt(i));
  }
  content= new Uint8Array(array);
  return new Blob([content], {type: 'image/jpeg'}); 
};

GUI.Signature.send = function(){
  if(!GUI.Signature.isEnabled()){return;}
  var request = new XMLHttpRequest();
  var dataURL = GUI.Signature.canvas.toDataURL('image/jpeg', 0.8);
  var blob = GUI.Signature.dataURItoBlob(dataURL);
  var fd = new FormData(GLOBAL.activeForm);
  var fsUri = GLOBAL.activeForm.action.replace("MAIN","UPLOAD");

  fd.append("signature", blob);
  fd.append("blobName","signature" );

  request.open('POST', fsUri, false);
  request.send(fd);

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:47:13.083

问题确实是将 Uint8Array 附加到 Blob 对象。将 Uint8Array 包装在 ArrayBuffer 中可以解决问题

它在 [这里得到了回答](https://stackoverflow.com/questions/14340989/blob-does-not-accept-uint8array-on-ios/14389983#14389983)

# android - Android VideoView 可以用作 PhoneGap 插件吗？

> ID：14319767
> 
> 赞同：1
> 
> 时间：2013-01-14T13:54:39.370
> 
> 标签：android, cordova, phonegap-plugins

我正在尝试创建一个 PhoneGap 插件，它使用 Android VideoView 在没有视频控件的情况下播放全屏视频。但这似乎不起作用。调用插件函数没有做任何事情。难道我做错了什么？或者这甚至可能吗？

```
package com.phonegap.plugins.video;

import org.json.JSONArray;
import org.json.JSONException;

import android.net.Uri;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;

import android.widget.VideoView;

public class VideoPlayer extends Plugin {

    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId) {

        final Plugin that = this;
        final String id = callbackId;

        super.cordova.getActivity().runOnUiThread(new Runnable() {
            //@Override
            public void run() {
                    VideoView videoHolder = new VideoView(cordova.getActivity().getApplicationContext());
                    //setContentView(videoHolder);
                    videoHolder.setVideoURI(Uri.parse("file:///sdcard/Android/data/MyApp/v2.mp4"));
                    videoHolder.requestFocus();
                    videoHolder.start();
                    that.success(new PluginResult(PluginResult.Status.OK), id);
            }
        });

        PluginResult result = new PluginResult(PluginResult.Status.NO_RESULT);
        result.setKeepCallback(true);
        return result;
    }
} 
```

我的 JavaScript 看起来像这样：

```
function VideoPlayer() {
};

VideoPlayer.prototype.play = function(url) {
    cordova.exec(null, null, "VideoPlayer", "playVideo", [url]);
};

if(!window.plugins) {
    window.plugins = {};
}
if (!window.plugins.videoPlayer) {
    window.plugins.videoPlayer = new VideoPlayer();
} 
```

我正在调用如下函数：

```
<a href='#' onclick='javascript:window.plugins.videoPlayer.play("file:///sdcard/Android/data/MyApp/v2.mp4");'>Bismillah</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-22T07:50:36.753

检查这个插件[https://github.com/macdonst/VideoPlayer](https://github.com/macdonst/VideoPlayer) 它对我有用，也很容易配置集成到项目中

# linux - linux 网络驱动程序 --- net_device_ops

> ID：14319770
> 
> 赞同：2
> 
> 时间：2013-01-14T13:54:55.157
> 
> 标签：linux, linux-device-driver

到目前为止，我只在设备驱动程序中使用了文件操作结构。使用系统调用 open & read ， write 。

如何使用 net_device_ops 打开设备驱动程序和传输数据？网络上是否有用户程序与之交互的参考示例？

[http://lnxpps.de/rpie/mcp2515_mod.c](http://lnxpps.de/rpie/mcp2515_mod.c)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T02:14:24.003

我不确定我是否理解这个问题，所以如果我的回答没有意义，请告诉我。

我看到您已经为`.ndo_open`、`.ndo_stop`和定义了函数`.ndo_start_xmit`。 当您使用配置接口或使用 ifconfig 为接口分配地址 `.ndo_open`时由内核调用。当您删除模块或使用关闭接口时由内核调用。 `ifconfig up``.ndo_stop``ifconfig down`

ifconfig 在这里描述：http: [//linux.die.net/man/8/ifconfig](http://linux.die.net/man/8/ifconfig)

`.ndo_start_xmit`当使用套接字传输数据包时，由内核网络堆栈调用。因此，要使用传输数据，`.ndo_start_xmit`您需要创建一个套接字，分配适当的目标地址，并通过套接字发送数据。如果您使用 IP，可以使用一些工具轻松发送数据包，例如 netperf 或 iperf。

# python - urllib2 geturl() 不适用于某些 url 重定向

> ID：14319771
> 
> 赞同：1
> 
> 时间：2013-01-14T13:54:59.083
> 
> 标签：python, python-2.7, urllib2

我正在学习 python 并试图让 urllib2 geturl() 工作。到目前为止，我有以下骨架，如下所示：

```
import urllib2
gh=urllib2.urlopen(http://somewebsite.com/).geturl()
print gh 
```

这似乎工作正常。但是，例如，当我尝试使用[此处](http://pastebin.com/YQPH1yP9)给出的 url 时，它无法让我获得“最终 url”（但适用于浏览器）。

我将不胜感激任何指导来解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T14:03:44.160

发生这种情况是因为您使用 javascript 重定向，并且`urllib2`无法处理 javascript。如果处理 javascript 重定向很重要，请使用[selenium](http://pypi.python.org/pypi/selenium)。

# php - 检测用户是否下载了文件

> ID：14319781
> 
> 赞同：0
> 
> 时间：2013-01-14T13:55:22.600
> 
> 标签：php

> **可能重复：**
> [如何检测用户何时成功完成 php 中的文件下载](https://stackoverflow.com/questions/194579/how-to-detect-when-a-user-has-successfully-finished-downloading-a-file-in-php)

我想知道是否有办法检测用户是否下载了文件？

一旦用户单击“下载”按钮，我正在服务器上创建一个 .docx 文件，并允许他们下载文件，如下所示。我要做的是在定义文件的字节发送给用户后删除文件。这可能吗？

```
$objWriter-> save('docxFiles/'.$filename);
echo '<script type="text/javascript">window.location.href=\'docxFiles/'.$filename.'\'</script>'; 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:00:35.517

无法确定用户是否下载了文件。

在您的情况下，请不要保存文件。将其生成为字符串并将其与适当的标头一起发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:12:27.740

无法检查用户是否已完成下载文件或已暂停文件。但您可以在下载开始后 24 小时内删除。

或者您可以生成一个文件，使用 base64 对其进行编码并作为页面发送。

# database - Postgresql 9.1 中表列的动态默认值

> ID：14319782
> 
> 赞同：1
> 
> 时间：2013-01-14T13:55:24.190
> 
> 标签：database, postgresql

我有一张名为 members 的桌子

```
CREATE TABLE netcen.mst_member
(
  mem_code character varying(8) NOT NULL,
  mem_name text NOT NULL,
  mem_cnt_code character varying(2) NOT NULL,
  mem_brn_code smallint NOT NULL, -- The branch where the member belongs
  mem_email character varying(128),
  mem_cell character varying(11),
  mem_address text,
  mem_typ_code smallint NOT NULL,
  CONSTRAINT mem_code PRIMARY KEY (mem_code )) 
```

每种成员类型的成员代码都有不同的顺序。即对于黄金会员，他们的会员代码将是

> GLD0091、GLD0092、...

和白金会员代码将是

> PLT00020, PLT00021,...

我希望将字段 mem_code 的默认值作为动态值，具体取决于所选的成员类型。我如何使用检查约束来实现它？请帮忙，我正在使用 Postgresql 9.1

我已经创建了以下触发器函数来构造字符串，但是当我按照 Randy 所说的那样插入成员表时仍然出现错误。

```
CREATE OR REPLACE FUNCTION netcen.generate_member_code()
  RETURNS trigger AS
$BODY$DECLARE 
tmp_suffix text :='';
tmp_prefix text :='';
tmp_typecode smallint ;
cur_setting refcursor;
BEGIN
OPEN cur_setting FOR
EXECUTE 'SELECT typ_suffix,typ_prefix,typ_code FROM mst_member_type WHERE type_code =' || NEW.mem_typ_code ;
FETCH cur_setting into tmp_suffix,tmp_prefix,tmp_typecode;
CLOSE cur_setting;
NEW.mem_code:=tmp_prefix || to_char(nextval('seq_members_'|| tmp_typecode), 'FM0000000') || tmp_suffix;
END$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION netcen.generate_member_code()
  OWNER TO mnoma; 
```

我哪里出错了？我收到以下错误

```
ERROR:  relation "mst_member_type" does not exist
LINE 1: SELECT typ_suffix,typ_prefix,typ_code FROM mst_member_type W...
                                                   ^
QUERY:  SELECT typ_suffix,typ_prefix,typ_code FROM mst_member_type WHERE typ_code =1
CONTEXT:  PL/pgSQL function "generate_member_code" line 7 at OPEN 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:58:38.263

我认为这是一个规范化问题。

您提供的代码可从其他信息推导出来 - 因此实际上不属于独立列。

您可以将类型存储在一列中，将数字存储在另一列中 - 然后在需要的任何查询中将它们附加在一起以制作此组合代码。

如果您想保留这个非规范化的解决方案，那么您可以创建一个触发器以在任何插入或更新时构造字符串。

# sql - SQL Server 2005 嵌套视图 - 解除纠缠的策略？

> ID：14319785
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:55:50.733
> 
> 标签：sql, sql-server, views

我有一个报告 Web 应用程序，它根据在一系列嵌套 sql 视图（3 级深）中完成的聚合绘制信息。最后一个嵌套视图是从实体框架代码中的存储过程调用的。由于它难以获取数据并超时，因此性能损失已经开始产生影响：

在 Sql profiler 中有 360,000+ 读取和 CPU @ 28313。此外，我什至无法在 SQL 中打开第三级视图而不会超时。

第一个视图只是从几个表和聚合中收集数据。第二个对这些数据执行计算，例如日期差异、时区调整和平均值。第三个完成这些计算并提供所需数据的摘要。第三个视图是我查询的那个。

一般来说，解开嵌套视图的好策略是什么？具体来说，如果您有需要在 SQL Server 中完成的计算，但只能在将数据组合到某个级别后才能完成，那么有什么比嵌套视图更好的策略呢？

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:07:20.647

您可以将任何视图作为子查询包含在内，但是，我怀疑它本身是否有助于在这种情况下提高性能。它将使您能够查看部分视图，并可能将任何共享部分放入表变量或临时表中。

如果您可以分享更多信息，那可能会有所帮助。

我劝告你：

1.  内联这些视图，所以你已经得到了一切
2.  一点一点地削减它，看看（未编译的！！）性能问题在哪里。
3.  修复性能问题
4.  希望编译后性能问题在同一个地方。

# java - 如何在 Java8 中为 void（非 Void）方法指定函数类型？

> ID：14319787
> 
> 赞同：173
> 
> 时间：2013-01-14T13:56:01.563
> 
> 标签：java, java-8

我正在使用 Java 8 来了解如何作为一等公民。我有以下片段：

```
package test;

import java.util.*;
import java.util.function.*;

public class Test {

    public static void myForEach(List<Integer> list, Function<Integer, Void> myFunction) {
      list.forEach(functionToBlock(myFunction));
    }

    public static void displayInt(Integer i) {
      System.out.println(i);
    }

    public static void main(String[] args) {
      List<Integer> theList = new ArrayList<>();
      theList.add(1);
      theList.add(2);
      theList.add(3);
      theList.add(4);
      theList.add(5);
      theList.add(6);
      myForEach(theList, Test::displayInt);
    }
} 
```

我要做的是使用方法引用将方法传递`displayInt`给方法。`myForEach`编译器会产生以下错误：

```
src/test/Test.java:9: error: cannot find symbol
      list.forEach(functionToBlock(myFunction));
                   ^
  symbol:   method functionToBlock(Function<Integer,Void>)
  location: class Test
src/test/Test.java:25: error: method myForEach in class Test cannot be applied to given ty
pes;
      myForEach(theList, Test::displayInt);
      ^
  required: List<Integer>,Function<Integer,Void>
  found: List<Integer>,Test::displayInt
  reason: argument mismatch; bad return type in method reference
      void cannot be converted to Void 
```

编译器抱怨`void cannot be converted to Void`. 我不知道如何`myForEach`在代码编译的签名中指定函数接口的类型。我知道我可以简单地更改 to 的返回类型，`displayInt`然后`Void`返回`null`。但是，可能存在无法更改我想在其他地方传递的方法的情况。有没有一种简单的方法可以`displayInt`按原样重复使用？

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2013-01-15T13:01:03.883

您正在尝试使用错误的接口类型。[在这种情况下， Function](https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html)类型不合适，因为它接收参数并具有返回值。相反，您应该使用[Consumer](https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html)（以前称为 Block）

函数类型声明为

```
interface Function<T,R> {
  R apply(T t);
} 
```

但是，消费者类型与您正在寻找的类型兼容：

```
interface Consumer<T> {
   void accept(T t);
} 
```

因此，Consumer 与接收 T 且不返回任何内容 (void) 的方法兼容。这就是你想要的。

例如，如果我想显示列表中的所有元素，我可以简单地使用 lambda 表达式为其创建消费者：

```
List<String> allJedi = asList("Luke","Obiwan","Quigon");
allJedi.forEach( jedi -> System.out.println(jedi) ); 
```

您可以在上面看到，在这种情况下，lambda 表达式接收一个参数并且没有返回值。

现在，如果我想使用方法引用而不是 lambda 表达式来创建这种类型的消费，那么我需要一个接收字符串并返回 void 的方法，对吧？

`println`我可以使用不同类型的方法引用，但在这种情况下，让我们通过使用对象中的方法来利用对象方法引用`System.out`，如下所示：

```
Consumer<String> block = System.out::println 
```

或者我可以简单地做

```
allJedi.forEach(System.out::println); 
```

该`println`方法是合适的，因为它接收一个值并且返回类型为 void，就像`accept`Consumer 中的方法一样。

因此，在您的代码中，您需要将方法签名更改为：

```
public static void myForEach(List<Integer> list, Consumer<Integer> myBlock) {
   list.forEach(myBlock);
} 
```

然后您应该能够使用静态方法引用创建消费者，在您的情况下，通过执行以下操作：

```
myForEach(theList, Test::displayInt); 
```

最终，您甚至可以完全摆脱您的`myForEach`方法，只需执行以下操作：

```
theList.forEach(Test::displayInt); 
```

**关于作为一等公民的职能**

总而言之，事实是 Java 8 不会有函数作为一等公民，因为不会将结构函数类型添加到语言中。Java 将简单地提供一种替代方法来从 lambda 表达式和方法引用创建功能接口的实现。最终 lambda 表达式和方法引用将绑定到对象引用，因此我们所拥有的只是对象作为一等公民。重要的是功能已经存在，因为我们可以将对象作为参数传递，将它们绑定到变量引用并将它们作为来自其他方法的值返回，然后它们几乎可以用于类似的目的。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-12-12T10:09:51.347

当您需要接受一个不带参数且不返回结果（void）的函数作为参数时，我认为最好还是有类似的东西

```
 public interface Thunk { void apply(); } 
```

在您的代码中的某处。在我的函数式编程课程中，“thunk”这个词被用来描述这些函数。为什么它不在 java.util.function 中超出了我的理解。

在其他情况下，我发现即使 java.util.function 确实有一些与我想要的签名匹配的东西 - 当接口的命名与我的代码中函数的使用不匹配时，它仍然并不总是正确的。我想这与此处其他地方关于“Runnable”的观点相似——这是与 Thread 类相关的术语——所以虽然它可能有我需要的签名，但它仍然可能会让读者感到困惑。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-28T17:58:23.967

将返回类型设置为`Void`而不是`void`和`return null`

```
// Modify existing method
public static Void displayInt(Integer i) {
    System.out.println(i);
    return null;
} 
```

或者

```
// Or use Lambda
myForEach(theList, i -> {System.out.println(i);return null;}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-06-14T21:13:50.217

我觉得你应该使用 Consumer 界面而不是`Function<T, R>`.

Consumer 基本上是一个功能接口，旨在接受一个值并且不返回任何内容（即 void）

在您的情况下，您可以在代码的其他地方创建消费者，如下所示：

```
Consumer<Integer> myFunction = x -> {
    System.out.println("processing value: " + x);    
    .... do some more things with "x" which returns nothing...
} 
```

然后你可以`myForEach`用下面的代码片段替换你的代码：

```
public static void myForEach(List<Integer> list, Consumer<Integer> myFunction) 
{
  list.forEach(x->myFunction.accept(x));
} 
```

您将 myFunction 视为一流的对象。

# sql - 带有“case”的sql语句的奇怪行为

> ID：14319793
> 
> 赞同：1
> 
> 时间：2013-01-14T13:56:19.743
> 
> 标签：sql, oracle, switch-statement, case

我正在尝试创建一个 SQL 报告。这是选择语句：

```
 select
  -- ticket id
  '<tr align=left valign=top><td width=95>'||maspid||'</td>'||

  -- priority
  case when instr(masfld017, '<|lang' ) = 0 then
        '<td width=90>'||masfld017
  else
        '<td width=90>'||substr( masfld017, 1 , instrb(masfld017, '<|lang') - 1)
  end||'</td>'||

  -- customer
  '<td width=150>'||masfld007||'</td>'||

  -- status
    '<td width=100>'||decode(masfld104, '0', 'Collected',
          '1', 'Postponed',
          '2', 'Accepted',
          '3', 'in Progress',
          '5', 'Work Around',
          '7', 'Solved',
          '8', 'Closed')||'</td>'||

  -- subject
  '<td width=400>'||masfld001||'</td>'||

  -- full name
  '<td width=100>' || replace(replace(masfld037, '<||>'), '</||>')||'</td>'||

  -- creation date
  '<td width=150>'||to_char(to_date(masfld022, 'YYYYMMDDHH24MI'), 'DD.MM.YYYY HH24:MM')||'</td>'||

  -- target date
  '<td width=150>'||to_char(to_date(masfld023, 'YYYYMMDDHH24MI'), 'DD.MM.YYYY HH24:MM')||'</td>'||

  -- ticket type
  '<td width=180>'||decode(masfld040, '9', 'HUS',
        '8', 'Project',
        '7', 'Enhancement',
        '6', 'Complaint',
        '5', 'Change Request',
        '4', 'Bug (Do not use)',
        '3', 'Support',
        '2', 'Service Request',
        '1', 'Incident (Problem)',
        null, 'N/A')||'</td></tr>'
from
        k2h.tmaster01 tm inner join k2h.tprofile tp on replace(replace(tm.masfld035, '<||>'), '</||>') = tp.propid
where
        masfld024 is null and
        masfld082 = '&REGION' 

order by case masfld017
        when 'Emergency'         then 1 
        when 'Critical'          then 2
        when 'High'              then 3
        when 'Major Problem'     then 4
        when 'Major defect'      then 5
        when 'Semi-major defect' then 6
        when 'Medium'            then 7
        when 'Minor Problem'     then 8
        when 'Low'               then 9
        end; 
```

如果我直接用 sqldeveloper 运行它，我会得到一个结果列表。如果报告由 crontab 启动，则会失败并显示以下错误消息：

```
SP2-0734: unknown command beginning "case when ..." - rest of line ignored. SP2-0734: unknown command beginning "' 
```

似乎案件`command`不被认可，但为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:23:25.777

是否有可能在 crontab 中直接在 shell 中运行 SQL，例如

```
sqlplus...<<ESQL
select..
...
order by case end; 
```

? 如果是这样，请删除空白行。

否则你会得到类似的东西：

```
SQL> select
  2    -- ticket id
  3    '<tr align=left valign=top><td width=95>'||maspid||'</td>'||
  4
SQL>   -- priority
SQL>   case when instr(masfld017, '<|lang' ) = 0 then
SP2-0734: unknown command beginning "case when ..." - rest of line ignored. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T14:25:04.683

我建议从您的 SQL 命令中删除空格，甚至可能是注释，然后尝试一下。SQL*Plus 对嵌入在命令中的空格很挑剔。我什至遇到了双破折号注释和 SQL*Plus 脚本的问题。我认为是空格，但如果是评论，请使用`/* ... */`评论风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:18:07.657

出于某种原因，解析器似乎将该`case`语句解释为 PLSQL`case`语句，而不是`SELECT`case 语句。也就是说，它没有将表达式视为列的一部分，而是将其视为 PLSQL 语句的一部分。“SP”错误消息是指 SQL-Plus 而不是语言本身。

我的猜测是`select`语句上方的某些内容使脚本感到困惑。

# css - 百分比和 CSS 边距

> ID：14319795
> 
> 赞同：0
> 
> 时间：2013-01-14T13:56:30.023
> 
> 标签：css, margin

我创建了一个 jsFiddle 来演示我的问题：

> [http://jsfiddle.net/MXt8d/1/](http://jsfiddle.net/MXt8d/1/)

```
.outer {
  display: inline-block;
  vertical-align: top;
  overflow: visible;
  position: relative;
  width: 100%;
  height: 100%;
  background: red;
}

.inner {
  overflow: hidden;
  height: 50%;
  width: 100%;
  margin-top: 25%;
  margin-bottom: 25%;
  background: blue;
  opacity: 0.7;
  color: white;
}

<div class="outer">
    <div class="inner"></div>
</div> 
```

问题是，当我需要将一个 div 水平居中于另一个内部时。我以 % 指定内部 div 的高度（例如 50%），然后将 margin-top 和 margin-bottom 指定为其余部分（例如 (100 - 50) / 2 = 25 %）。

但正如您在 jsFiddle 中看到的那样，它没有按预期工作。

从 Parent 计算边距有效，但对我来说这是不可能的，因为我无法访问 div 的父级，因为元素样式对象通过 knockout.js 绑定到对象，它并不像 jsFiddle 中所示的那么简单.

希望有人可以帮助我:-)

bj99

**更新：**

刚刚发现为什么会发生这种情况，所以我会在这里为有类似问题的人发帖：

> 来自[http://www.w3.org/TR/CSS2/box.html#propdef-margin-top](http://www.w3.org/TR/CSS2/box.html#propdef-margin-top)：
> 
> 'margin-top', 'margin-bottom' 百分比：指包含块的***宽度***

而不是我坚持到**高度**：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:04:27.760

到`#inner`元素：

1) 添加`position:absolute`

2）删除`margin-top`和`margin-bottom`属性

3) 添加`top:25%`

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:04:28.273

这是解决您问题的方法。希望对您有所帮助

```
.inner {
  overflow: hidden;
  height: 50%;
  width: 100%;
  top:0;
  bottom:0;
  left:0;
  right:0;
  position: absolute;
  margin: auto;
  background: blue;
  opacity: 0.7;
  color: white;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:10:56.367

您的问题有多种解决方案：

1）在内部元素上添加`position:absolute`和-**[示例](http://jsfiddle.net/MXt8d/3/)**`top:25%`

2）`display:table`在外部和`display:table-cell`内部元素上使用，这也允许垂直居中。-**[示例](http://jsfiddle.net/MXt8d/2/)**

每个解决方案都有一些注意事项，我个人尽量避免绝对定位，但这也取决于个人喜好。

# c# - C# 打印图像不起作用

> ID：14319798
> 
> 赞同：0
> 
> 时间：2013-01-14T13:56:45.493
> 
> 标签：c#, visual-studio

我正在尝试使用下面的代码打印位图，但它不起作用。我不知道为什么......

```
 private void btnImprimir_Click(object sender, EventArgs e)
    {
        PrintDocument pd = new PrintDocument();
        pd.PrintPage += PrintPage;
        pd.Print(); 
    }

    private void PrintPage(object o, PrintPageEventArgs e)
    {
        button1.Visible = false;
        button2.Visible = false;
        button3.Visible = false;
        button4.Visible = false;
        Bitmap bitmap = new Bitmap(this.Width, this.Height);
        this.DrawToBitmap(bitmap, this.ClientRectangle);
        Point loc = new Point(this.Width, this.Height);
        e.Graphics.DrawImage(bitmap, loc);
        button1.Visible = true;
        button2.Visible = true;
        button3.Visible = true;
        button4.Visible = true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:00:37.063

用这种方式

```
Image bmIm;
private void PrintImage(Image img)
{
  bmIm = img;
  PrintDocument pd = new PrintDocument();
  pd.OriginAtMargins = true;
  pd.DefaultPageSettings.Landscape = true;
  pd.PrintPage += pd_PrintPage;
  pd.Print();
}
void pd_PrintPage(object sender, PrintPageEventArgs e)
{
  double cmToUnits = 100 / 2.54;
  e.Graphics.DrawImage(bmIm, 0, 0,(float)(27 * cmToUnits),(float)(18 * cmToUnits));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:39:11.193

看起来您的事件没有正确连接（除非我们缺少一些代码）：

```
pd.PrintPage += this.PrintPage; 
```

您试图分配`pd_PrintPage`代码示例中没有的内容，所以我不知道它应该做什么。

# c# - AutoMapper MaxDepth() 方法

> ID：14319804
> 
> 赞同：5
> 
> 时间：2013-01-14T13:56:50.067
> 
> 标签：c#, .net, automapper

在我的项目中，我有一个一对多的关系`Client -> Projects`。因此，在我的一个观点中，我试图展示属于该客户的所有项目。所以我有一个`IEnumerable<ProjectDetailsViewModel>`代表所有客户项目的项目。

问题是，`ProjectDetailsViewModel`有一个`ClientDetailsViewModel`，然后有一个`IEnumerable<ProjectDetailsViewModel>`，依此类推，创建了相同实体的无限循环。

这是否适合在该 .ForMember() 上使用 MaxDepth() 方法？如果是这样，在这种情况下我该如何使用它，如果不是，解决方案是什么？

我已经尝试过 MaxDepth(1) `Client`，虽然这可以防止 StackOverflow 异常，但它不会在该客户端的视图模型中保存任何数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:12:59.440

问题是我这样明确地调用了 AutoMapper `AutoMapConfig`：

```
.ForMember(x => x.Client, opt => opt.MapFrom(src =>
    AutoMapper.Mapper.Map<ClientDetailsViewModel>(src.Client))) 
```

如果我只是将其定义为：

```
.ForMember(x => x.Client, opt => opt.MapFrom(src => src.Client)) 
```

AutoMapper 将知道在 1 次递归后停止，因为我已经有了一张地图，`Client -> ClientDetailsViewModel`所以没有问题。

# capistrano - Capifony/Capistrano：使用不同端口通过 SSH 连接/部署到一个 IP

> ID：14319807
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:56:58.790
> 
> 标签：capistrano, capifony

我想在一个“cap deploy”命令中将我的 Symfony2 应用程序部署到具有一个 IP 但不同 SSH 端口的两台服务器：

通过 SSH 连接到`127.0.0.1:22`并部署，然后通过 SSH 连接到`127.0.0.1:24`并部署

如何使用 Capifony/Capistrano 完成此任务？

我只能找到可以部署到不同 IP 但不能同时部署到一个 IP 的两个不同端口的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:30:46.037

就像@CDub 已经说过的：

使用 2 个单独的任务和 1 个公用任务，只需覆盖每个任务中的 `:port' 值。像这样的东西：

```
 task :first do
    set :port,   22
    ...
  end

  task :second do
    set :port,   24
    ...
  end 
```

# c# - 如何更改 PropertyGrid 的默认 CollectionEditor？

> ID：14319814
> 
> 赞同：2
> 
> 时间：2013-01-14T13:57:15.963
> 
> 标签：c#, winforms

我`PropertyGrid`在 WinForms 中使用。我可以更改默认值`CollectionEditor`吗？我可以像这样`CollectionEditor`按`Editor`属性显示自定义：

```
[Editor("MyProgram.CustomCollectionEditor , MyProgram, Version=1.0.0.0, Culture=neutral, PublicKeyToken=neutral", typeof(UITypeEditor))] 
```

但我不想将它用于所有属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:24:37.460

您可以`EditorAttribute`在属性上使用，因此只有应用了该属性的属性才有自定义编辑器。

我认为[如何：控制集合编辑器的 PropertyGrid](http://dotnetfacts.blogspot.com/2008/05/how-to-take-control-over-collection.html)可能对您要完成的工作有所帮助。

# c# - MySQL参数不添加值

> ID：14319818
> 
> 赞同：3
> 
> 时间：2013-01-14T13:57:36.667
> 
> 标签：c#, mysql, parameters

我正在尝试获取帐户表的行数，以便我可以登录帐户，但 MySQL 参数没有添加这些值。

这是我的代码：

```
public int MyMethod(string username, string password)
{
    int count = 0;
    string query = "SELECT * FROM accounts WHERE username = '?user' AND password = '?pass' LIMIT 1;";

    using (MySqlCommand cmd = new MySqlCommand(query, connector))
    {
        cmd.Parameters.Add(new MySqlParameter("?user", username));
        cmd.Parameters.Add(new MySqlParameter("?pass", password));

        count = int.Parse(cmd.ExecuteScalar().ToString());
    }

    return count;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:01:26.680

参数占位符**不应该用单引号括起来，**因为它迫使它成为一个值而不是一个参数，试试这个，

```
public int MyMethod(string username, string password)
{
    int count = 0;
    string query = "SELECT * FROM accounts WHERE username = @user AND password = @pass LIMIT 1;";

    using (MySqlCommand cmd = new MySqlCommand(query, connector))
    {
        cmd.Parameters.Add(new MySqlParameter("@user", username));
        cmd.Parameters.Add(new MySqlParameter("@pass ", password));

        connector.Open(); // don't forget to open the connection
        count = int.Parse(cmd.ExecuteScalar().ToString());
    }

    return count;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:01:20.300

我相信你想做这样的事情：

```
SELECT COUNT(*) FROM accounts WHERE username = '?user' AND password = '?pass'; 
```

这将为您提供具有指定用户名和密码的记录数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:21:57.060

尝试添加这样的参数：

```
cmd.Parameters.AddWithValue("@user", username);
cmd.Parameters.AddWithValue("@pass", password); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T15:13:28.290

试试这个： **@myVariable**代替**'?myVariable'**，**SELECT COUNT(*)**代替**SELECT ***

```
public int MyMethod(string username, string password)
{
  int count = 0;
  string query = "SELECT count(*) FROM accounts WHERE username = @user AND password = @pass LIMIT 1;";

   using (MySqlCommand cmd = new MySqlCommand(query, connector))
   {
      connector.Open(); 
      cmd.Parameters.AddWithValue("@user", username);
      cmd.Parameters.AddWithValue("@pass", password);       
      count = int.Parse(cmd.ExecuteScalar().ToString());
   }

   return count;
} 
```

# iphone - 将 UITextField ( field.text) NSString * 转换为 char *?

> ID：14319819
> 
> 赞同：0
> 
> 时间：2013-01-14T13:57:41.650
> 
> 标签：iphone, ios, objective-c, xcode, nsstring

我想将 转换`NSString* str`为`char* ch`，以便在此函数中将其用作参数： `str`从`UITextField's`文本中获取。

```
void CUserSession::Login (char *pUsername, char *pPassword) 
```

请帮忙。

关于使用

```
ch = [str UTF8String]; 
```

//我收到这个**错误。**

```
Cannot initialize a parameter of type 'char *' with an rvalue of type 'const char *' 
```

然后在使用

```
ch = (const uint8_t *)[str UTF8String]; 
```

//我收到这个**错误**。

```
Cannot initialize a parameter of type 'char *' with an rvalue of type 'const uint8_t *' (aka 'const unsigned char *') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:59:11.250

代替它

```
ch = [str UTF8String]; 
```

和

```
const char *ch = [str UTF8String]; 
```

或尝试：

```
ch = (char *)[str UTF8String]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:59:11.227

你为什么不尝试明显的解决方案？正确声明指针：

```
const char *ch = [str UTF8String]; 
```

# ios6 - 模态 UINavigationController 以错误的方向呈现

> ID：14319820
> 
> 赞同：1
> 
> 时间：2013-01-14T13:57:43.173
> 
> 标签：ios6, uinavigationcontroller, rotation, presentmodalviewcontroller

我有一个 iPad 应用程序支持所有方向的设置。在应用程序的一部分中，点击会触发需要导航控制器的模态视图控制器的显示。所以我基本上在做：

```
UIViewController *myViewController = [[UIViewController alloc] initWithNibName:@"MyView" bundle:nil];
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:myViewController];
NSLog(@"%d", nav.interfaceOrientation);

[window.rootViewController presentModalViewController:nav animated:YES]; 
```

当 iPad 处于纵向（主页按钮）时，这可以正常工作。在任何其他方向，模态视图总是从主页按钮纵向显示，而不是设备的当前底部。

如果我完全跳过导航控制器并仅以`myViewController`模态方式显示，它会正确显示。

因此，我尝试继承 UINavigationViewController 并显式覆盖`shouldAutorotate:`and`supportedInterfaceOrientations:`方法，但这没有任何效果。有趣的是，如果我重写该`viewWillAppear`方法并记录属性的值，即使从上面的代码访问它时它返回正确的值，它也`interfaceOrientation`总是返回。`1`

我还检查了 Info.plist 是否支持所有方向。

那么，还有什么可能导致这种行为呢？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T02:40:09.540

尝试在导航控制器的子类中实现 preferredInterfaceOrientationForPresentation。

以下对我有用：

```
-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return self.interfaceOrientation;
} 
```

# windows - procdump -t -- 进程终止时的转储 -- 是如何使用的？

> ID：14319822
> 
> 赞同：6
> 
> 时间：2013-01-14T13:57:46.150
> 
> 标签：windows, visual-c++, crash-dumps, terminate, procdump

这个问题可能有点尴尬，但这是我的详细问题：

目前，我正在研究设置[SysInternals 的 procdump.exe](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx)来监控我们的应用程序，该应用程序表现出虚假的消失——也就是说，用户报告说，在应用程序的短暂可见挂起后，该应用程序只是“消失”了，没有任何痕迹窗户。

我的第一个想法是运行`procdump -e -x . MyApp.exe`它会在应用程序遇到未处理的异常时记录崩溃转储，但后来我看到还有一个`-t`开关，即——

> **-t** - 进程终止时写入转储。

进程终止时自动生成转储。

## 现在的问题

我已经用我们的应用程序测试了 -t 开关，方法是在我可以触发它的定义位置插入`ExitProcess`或调用。`TerminateProcess`

虽然应用程序的行为符合预期，即`TerminateProcess`立即“杀死”正在运行的应用程序并`ExitProcess`需要一段时间，因为全局清理正在运行，但以这种方式生成的转储在*这两种*情况下都是无用的。

我得到的转储`-t`总是只包含一个单线程（应用程序在终止时运行超过 20 个线程）并且调用堆栈甚至不在有用的位置。（它似乎只是来自已终止应用程序的一个随机线程。）

难道我做错了什么？我可以有用地`procdump -t`追踪进程退出函数的意外调用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:36:11.173

> 我可以有效地使用 procdump -t 来追踪进程退出函数的意外调用吗？

我认为不是，原因如下：测试进程 calc.exe

```
CommandLine: "C:\Program Files\Sysinternals\procdump.exe" -t calc.exe 
```

我尝试仔细建议 procdump 正在等待 calc.exe 进程句柄。

```
0:000> kb
ChildEBP RetAddr  Args to Child              
0017f2e0 77135e6c 75336872 00000002 0017f334 ntdll!KiFastSystemCallRet
0017f2e4 75336872 00000002 0017f334 00000001 ntdll!NtWaitForMultipleObjects+0xc
0017f380 76cbf14a 0017f334 0017f3a8 00000000 KERNELBASE!WaitForMultipleObjectsEx+0x100
0017f3c8 76cbf2c2 00000002 7ffdb000 00000000 kernel32!WaitForMultipleObjectsExImplementation+0xe0
0017f3e4 011c6135 00000002 0017f46c 00000000 kernel32!WaitForMultipleObjects+0x18
WARNING: Stack unwind information not available. Following frames may be wrong.
0017fc30 011c999e 00000003 013d1de0 013d1e78 procdump+0x6135
0017fc78 76cc1194 7ffdb000 0017fcc4 7714b495 procdump+0x999e
0017fc84 7714b495 7ffdb000 77ad79b5 00000000 kernel32!BaseThreadInitThunk+0xe
0017fcc4 7714b468 011c99f5 7ffdb000 00000000 ntdll!__RtlUserThreadStart+0x70
0017fcdc 00000000 011c99f5 7ffdb000 00000000 ntdll!_RtlUserThreadStart+0x1b
0:000> dd 17f46c
0017f46c  00000238 00000268
0:000> !handle 238 f
Handle 238
  Type          Process
  Attributes    0
  GrantedAccess 0x1fffff:
         Delete,ReadControl,WriteDac,WriteOwner,Synch
         Terminate,CreateThread,,VMOp,VMRead,VMWrite,DupHandle,CreateProcess,SetQuota,SetInfo,QueryInfo,SetPort
  HandleCount   5
  PointerCount  52
  Name          <none>
  Object Specific Information
    Process Id  1580
    Parent Process  2476
    Base Priority 8 
```

![在此处输入图像描述](../Images/ae81c7aa9244499dc82d88c91b709404.png)

在崩溃转储文件中，在进程结束之前获取堆栈最后一个完整的进程线程 (TID 3136)。

```
0:000> ~
.  0  Id: dc8.c40 Suspend: -1 Teb: 7ffdd000 Unfrozen
0:000> .formats c40
Evaluate expression:
  Hex:     00000c40
  Decimal: 3136 
```

![在此处输入图像描述](../Images/56a8745cdfeae5f1d22ce7896aaa7be7.png)

崩溃转储文件是在最后一个线程完成之后、进程结束之前创建的。

![在此处输入图像描述](../Images/3c6ad202c611f690eebbd2de6e36f6af.png)

# http - 一种资源的不同表示

> ID：14319823
> 
> 赞同：0
> 
> 时间：2013-01-14T13:57:47.453
> 
> 标签：http, url, rest, uri, restful-url

当我有一个资源时，假设`customers/3`哪个返回客户对象，我想用不同的字段或其他一些更改返回这个对象（例如，假设我需要在客户对象中包含他最近的购买（为了速度我不想做2个不同的查询））。

如我所见，我的选择是：

*   `customers/3/with-latest-purchase`
*   `customers/3?display=with-latest-purchase`

在第一个选项中，新表示有不同的 URI，但这真的需要吗？另外我如何告诉客户这个 URI 存在？

在第二个选项中有 GET 参数告诉服务器返回什么样的表示。URI 参数可以通过 OPTIONS 方法进行解释，并且更容易告诉客户端在哪里查找数据，因为所有表示都在一个地方。

所以我的问题是其中哪一个更好（更 RESTful）和/或有一些我不知道的更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:47:32.217

我认为最好的方法是定义原子的、不可分割的服务对象，例如`customer`and `customer-latest-purchase`、nice、clean、simple。然后，如果客户希望客户有他最近的购买，他们会调用这两个服务调用，而不是用时髦的参数将它们全部融合在一起。

对象的不同表示形式在 Java 中通过接口是可以的，但我认为这对 REST 来说是个坏主意，因为它损害了它的简单性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:07:39.297

有一种误解，认为让查询参数看起来像文件路径更 RESTful。在确定不同的 URI 时会包含地址的查询部分，因此第二个选项很好。

在所有客户 GET 请求中包含最新的购买数据是否会对性能造成很大影响？如果没有，最简单的方法就是这样做，这样就不会出现奇怪的 URL 参数或双重请求。如果获得最新订单是一项重大困难（可能不应该如此），那么在查询字符串中添加一个标志以包含它并没有错。

# java - 销毁 Spring 中的上一个会话

> ID：14319825
> 
> 赞同：1
> 
> 时间：2013-01-14T13:57:58.357
> 
> 标签：java, actionscript-3, spring, session, graniteds

我在 Flash 上有客户端，在 Spring 上有服务器。我想防止用户使用两个浏览器使用同一个帐户登录两次。因此，当用户登录时，服务器应检查该用户是否存在活动会话，并将其销毁。
那么，有一个问题，在 Spring 中销毁另一个会话的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:24:53.063

我不相信有可能指示 Spring 销毁其他会话。但是，您始终可以创建一个[信号量](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)，您的应用程序可以在用户登录时对其进行检查，如果已经有一个现有的用户会话正在运行，则使会话无效。

如果您在非集群环境中运行，此信号量可以像 Java 静态变量一样简单，或者更好的方法是在数据库表中设置标志，尤其是在集群环境中运行时。

# r - 在R中找到局部最大值/最小值

> ID：14319826
> 
> 赞同：9
> 
> 时间：2013-01-14T13:58:01.087
> 
> 标签：r

我有一堆数据（每个测量系列有 10,000 - 50,000 个值），我有兴趣从这些值分布的密度估计中自动识别局部最大值/最小值。事实上，我假设通常应该有两个峰，由一个坑隔开，我想找到将两个峰彼此分开的坑，以便将数据分成两部分以进行进一步处理。如果可能的话，我还想知道山峰的位置。

由于密度估计可能包含非常小的局部变化，我希望有可能调整“灵敏度”。到目前为止我能找到的最好的是@Tommy 的这个解决方案：[https](https://stackoverflow.com/a/6836924/1003358) ://stackoverflow.com/a/6836924/1003358这是一个例子：

```
library(ggplot2)

d <- density(faithful$eruptions, bw = "sj")
loc.max <- d$x[localMaxima(d$y)]

ggplot(faithful, aes(eruptions)) + geom_density(adjust=1/2) +
  geom_vline(x=loc.max, col="red") +
  xlab("Measured values") 
```

![识别忠实数据集中的最大值](../Images/ed95f5867fd1fc267748f3c9be2a07f4.png)

现在，我的数据更加嘈杂：

```
d <- density(my.df$Values, bw = "sj")
loc.max <- d$x[localMaxima(d$y)]

ggplot(my.df, aes(Values)) + geom_density(adjust=1/2) +
  geom_vline(x=loc.max, col="red") +
  xlab("Measured values") 
```

![第一次尝试在我的数据集中识别最大值](../Images/cc9c573a989062a9fd183f704e29e18b.png)

尝试调整参数（注意在尾部发现了两个“不需要的”峰）：

```
d <- density(my.df$Values, bw="nrd", adjust=1.2)
loc.max <- d$x[localMaxima(d$y)]

ggplot(my.df, aes(Values)) + geom_density(adjust=1/2) +
  geom_vline(x=loc.max, col="red") +
  xlab("Measured values") 
```

![第二次尝试检测我的数据集中的峰值](../Images/abfce9839420ddcf33b8c40c463a187e.png)

所以问题是：

1）如何在这样一个嘈杂的数据集中自动识别真正的峰值？2）如何可靠地找到分隔这些峰的坑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:18:25.550

我最喜欢的是`pastecs::turnpoints`。但是你是对的，你必须做一些主观过滤来区分尖峰噪声和真正的峰值。一种方法是要求原始数据或样条数据保持在 N 个连续值的某个阈值以上。

# ruby-on-rails - FactoryGirl 上未定义的方法“to_i”

> ID：14319827
> 
> 赞同：1
> 
> 时间：2013-01-14T13:58:14.753
> 
> 标签：ruby-on-rails, ruby, factory-bot

将我的 rails 升级到 3.11 后，我所有的工厂都坏了。

> 失败/错误：有效 = Factory.build(:effective, :document_type => DocumentType::RG, NoMethodError: undefined method `to_i' for ["Feminino", 2]:Array # ./spec/support/factories/effetive_factory.rb:10:in`block (3 levels) in ' # ./spec/models/effective_spec.rb:20:in `block ( 4 级）在 '

有效工厂.rb

```
# encoding: UTF-8
FactoryGirl.define do
  factory :effective do |e|
    e.document_type DocumentType::RG
    e.rg            "99999999999"
    e.salary_range  1
    e.job           999
    e.emission_date "12/12/1978"
    e.emitter       2
    e.profile       { |p| p.association(:profile) }
    e.quote         { |q| q.association(:quote) }
  end
end 
```

# winforms - WinForms 应用程序之间的 WCF

> ID：14319828
> 
> 赞同：1
> 
> 时间：2013-01-14T13:58:21.743
> 
> 标签：winforms, wcf

我有两个`WinForms`需要通信的应用程序。

我正在考虑使用`WCF`在这两者之间建立通信，但转换其中一个`WCF`服务应用程序不是一种选择。

有没有办法以`WCF`某种方式实现或者我应该忘记它？

例如，我想创建一个两个应用程序都可以使用的`WCF`服务器（带有`Push`和`Pull`机制），但我认为它不是很有效。

此外，如果这有助于提出其他解决方案，请考虑用户不能拥有管理权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T09:36:49.523

主要思想是创建一个托管在 Winform 或控制台应用程序中的 WCF 服务。比您应该将 WCF 服务引用添加到您的 Winform 应用程序引用。休息很简单。您可以在计时器中查询服务，例如 500 毫秒。这整个概念可能会对您有所帮助。如果您想查看已实现的示例，请参阅以下链接：

你见过吗：[http](http://wcfsimplechat.codeplex.com/) ://wcfsimplechat.codeplex.com/ 。这个小小的 WCF 聊天示例可以帮助我思考。

# .net - 使用类对象在 MySQL 中将文件存储为 Blob

> ID：14319834
> 
> 赞同：1
> 
> 时间：2013-01-14T13:58:42.833
> 
> 标签：.net, mysql, blob, autocad

我的数据库中有一个用于存储 AutoCad 文件的表。有一个名为 Blob 数据类型的内容的字段。我有一个与数据库中的表匹配的类对象。我应该为类对象的 Content 属性使用什么数据类型？我不太确定如何将其以代码形式存储到数据库中。

# c# - C# Web 开发人员 Web 服务

> ID：14319848
> 
> 赞同：2
> 
> 时间：2013-01-14T13:59:23.053
> 
> 标签：c#, asp.net

所以我正在创建一个网站作为 c# web 开发人员的大学项目的一部分，我收到了这个错误，这是 web 服务，它已经连接到数据库我似乎找不到错误：

```
**Error 1   Type or namespace definition, or end-of-file expected   
Source Error:
Line 278:        }
Line 279:    }
Line 280:}** 
```

现在我可以从这里去哪里？删除它会弄乱整个站点并添加另一个括号也无济于事。

```
using System;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Collections;
using System.Data;
using System.Data.OleDb;
using System.Web.Services.Protocols;
using System.Xml.Linq;

    [WebService(Namespace = "http://tempuri.org/")]

public class WebService : System.Web.Services.WebService
    {

    // Connection is initialized 
        OleDbConnection conn;
        OleDbDataReader dbReader;

    private void ConnectToDatabase()
    {
        // Creates a connection to the database
        conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + Server.MapPath("App_Data\\Sports Car Auction Database.accdb"));

        // Opens the connection
        conn.Open();
    }

    private void DisconnectDatabase()
    {
        // The connection is closed
        conn.Close();
    }

    [WebMethod]
    public string Login(string userName)
    {
        // Connects to the database
        ConnectToDatabase();

        try
        {
            OleDbCommand cmd = conn.CreateCommand();
            cmd.CommandText = ("Select Password FROM [Buyer Information]  WHERE UserName = '" + userName + "'");

            dbReader = cmd.ExecuteReader();
            dbReader.Read();

            // The result is read from the datareader and returned to the calling method
            string result = (string)dbReader["Password"];
            return result;
        }
        catch (OleDbException)
        {
            // Nothing is returned if there are exceptions
            return null;
        }
    }

     [WebMethod]
    public DataSet ForgetPass(string userName)
    {
        try
        {
            // Connect to database
            ConnectToDatabase();

            // Info from the database is selected via the data adapter
            OleDbDataAdapter adapter = new OleDbDataAdapter(@"SELECT [Secret Question], [Answer] From [Buyer Information] Where [UserName] = '" + userName + "'", conn);

            // Dataset stores results
            DataSet ds = new DataSet();
            adapter.Fill(ds);

            // Dataset is returned to calling method
            return ds;
        }
        catch
        {
            // Nothing is returned if there are exceptions
            return null;
        }
    }

    [WebMethod]
        // Method defines what will be recieved from ChangePassword.aspx
        public void ChangePass(string Pass, string userName)
        {
            // Connects to the database
            ConnectToDatabase();

            // Values in the database are updated
            OleDbCommand cmd = conn.CreateCommand();
            cmd.CommandText = (@"UPDATE [Buyer Information] SET [Password] = '" + Pass + "' WHERE UserName = '" + userName + "'");
            cmd.ExecuteNonQuery();

            // The connection is closed
            DisconnectDatabase();
        }

        [WebMethod]
        // Method define what values will be recieved form register.aspx
        public void RegisterCustomer(string UserName, string Address, string Tel, string Email, string Ques, string Ans, string Pass)
        {
            // Connects to thedatabase
            ConnectToDatabase();

            // Values are inserted into the database
            OleDbCommand cmd = conn.CreateCommand();
            cmd.CommandText = @"INSERT INTO [Buyer Information] ([UserName], [Address], [Telephone], [Email], [Password], [Secret Question], [Answer]) VALUES ('" + UserName + "', '" + Address + "', '" + Tel + "', '" + Email + "', '" + Pass + "', '" + Ques + "', '" + Ans + "')";

            cmd.ExecuteNonQuery();

            // The connection is closed
            DisconnectDatabase();
        }

        [WebMethod]
        public DataSet ViewDetails(string userName)
        {
            try
            {
                // Connects to the database
                ConnectToDatabase();

                // The correct data is selected from the database using the data adapter
                OleDbDataAdapter adapter = new OleDbDataAdapter(@" SELECT Address, Telephone, Email, [Secret Question], Answer FROM [Buyer Information] WHERE UserName = '" + userName + "'", conn);

                // The sesults are stored in the dataset
                DataSet ds = new DataSet();
                adapter.Fill(ds);

                // Dataset is returned to the calling method
                return ds;
            }
            catch (OleDbException)
            {
                // Nothing is returned if there are exceptions
                return null;
            }
        }

        [WebMethod]
        // This defines what values will be recieved from Details.aspx
        public void UpdateCustomer(string userName, string Address, string Tel, string Email, string Ques, string Ans)
        {
            // Connects to the database
            ConnectToDatabase();

            // Updates the database
            OleDbCommand cmd = new OleDbCommand(@"UPDATE [Buyer Information] SET [UserName] = '" + userName + "', [Address] = '" + Address + "', [Telephone] = '" + Tel + "', [Email] = '" + Email + "', [Secret Question] = '" + Ques + "', [Answer] = '" + Ans + "' WHERE [UserName] = '" + userName + "'", conn);

            cmd.ExecuteNonQuery();

            // The connection is closed
            DisconnectDatabase();
        }

        [WebMethod]
        public DataSet SelectItem()
        {
            try
            {
                ConnectToDatabase();

                // Get the model values for the drop down list
                OleDbDataAdapter da = new OleDbDataAdapter("SELECT Model FROM Car", conn);

                DataSet ds = new DataSet();
                da.Fill(ds, "Model");

                return ds;
            }
            catch (OleDbException)
            {
                // Nothing is returned if there are exceptions
                return null;
            }
        }

        [WebMethod]
        public DataSet selectCarInfo(string model)
        {
            try
            {
                // Connects to the database
                ConnectToDatabase();

                // Info is selected from the database via the data adapter
                OleDbDataAdapter adapter = new OleDbDataAdapter(@"SELECT [Car Information].carID, [Car Information].Make, [Car Information].Description, [Car Information].[Starting Bid], [Car Information].[Closing Date] FROM [Car Information] WHERE Model = '" + model + "'", conn);

                // The results are stored in dataset
                DataSet ds = new DataSet();
                adapter.Fill(ds);

                // Dataset is returned to calling method
                return ds;
            }
            catch
            {
                // Nothing is returned if there are exceptions
                return null;
            }
        }

        [WebMethod]
        public decimal highestBidVal(int carID)
        {
            try
            {
                // Connects to the database
                ConnectToDatabase();

                // Selects highestBid to compare to Buyer Informations value
                OleDbCommand cm = conn.CreateCommand();
                cm.CommandText = ("SELECT [Bid Information].HighestBid  FROM [Bid Information] WHERE carID = " + carID + "");

                dbReader = cm.ExecuteReader();
                dbReader.Read();

                decimal highestBidValue = (decimal)dbReader["HighestBid"];
                return highestBidValue;
            }
            catch (OleDbException)
            {
                // Nothing is returned if there are exceptions
                return 0;
            }
        }

        [WebMethod]
        // Method that defines what will be recieved from AddNewItem.aspx
        public void AddNewCar(string Make, string Model, string Description, decimal StartingBid, DateTime closeDate, string owner)
        {
            ConnectToDatabase();

            OleDbCommand cmd = conn.CreateCommand();

            // Values are inserted into the database
            cmd.CommandText = (@" INSERT INTO [Car Information] ([Make], [Model], [Description], [Starting Bid], [Closing Date], [Owner]) VALUES ('" + Make + "', '" + Model + "', '" + Description + "', '" + StartingBid + "', '" + closeDate + "', '" + owner + "')");

            cmd.ExecuteNonQuery();

            // Closes the connection
            DisconnectDatabase();
        }

        [WebMethod]
        // Method that defines what will be recieved from PlaceBid.aspx
        public void AddNewBid(int carid, string userName, decimal bidValue,
            DateTime bidingDate)
        {
            ConnectToDatabase();

            // Values are updated in the database
            OleDbCommand cmd = new OleDbCommand(@"UPDATE [Bid Information] SET [carID] = '" + carid + "', [UserName] = '" + userName + "', [Highest Bid] = '" + bidValue + "', [Bid Date] = '" + bidingDate + "' WHERE [carID] = " + carid + "", conn);

            cmd.ExecuteNonQuery();

            // The connection is closed
            DisconnectDatabase();
        }

        [WebMethod]
        // Method that defines what values will be recieved from Placebid.aspx
        public void AddBid(int carid, string userName, decimal bidValue, DateTime bidingDate)
        {
            ConnectToDatabase();

            OleDbCommand cmd = conn.CreateCommand();
            // Values are inserted into the database
            cmd.CommandText = (@"INSERT INTO [Bid Information] ([carID], [UserName], [UserName], [HighestBid], [Biddate]) VALUES ('" + carid + "', '" + userName + "', '" + bidValue + "', '" + bidingDate + "')");

            cmd.ExecuteNonQuery();

            // Closes the connection
            DisconnectDatabase();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:04:55.790

最后一个右括号似乎是与命名空间匹配的那个。删除它应该这样做。

您可以尝试使用 control-kd[格式化您的代码。](http://blogs.msdn.com/b/markhsch/archive/2008/01/10/visual-studio-tip-autoformat-your-code.aspx)如果它有效，那么你的括号（以及它们的数量）匹配。

如果您仍然收到错误，则意味着您的代码中有更多错误。您可能确实缺少 using 指令，但这是另一个错误。您确实需要删除该右括号，因为它没有开括号匹配。

# css - 表中的 CSS 表，行之间的空间（不是列）

> ID：14319849
> 
> 赞同：0
> 
> 时间：2013-01-14T13:59:24.267
> 
> 标签：css, html-table

我遇到了一个基本的 CSS 问题。

我在一个表中有一个表，嵌入的表包含一个切片图像以支持翻转图形更改。

嵌入表的第二行在第一行和自身之间有一个空格。

这是 HTML 标记：

```
<table border="0" cellpadding="0" cellspacing="0">
<tr>
<th class="appResourceHead text14px textBold">Parametric Search</th>
</tr>
<tr>
        <td class="appResourceBodyNoPad text12px">
        <table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td> <a href="http://web.centralsemi.com/paraSearch/parametricSearch_v1_1.php">
              <img src="http://www.centralsemi.com/centralSemi/images/Parametric_Search_01.png" width="163" height="132" style="border-style: none;" />
            </a>

          </td>
          <td> <a href="http://web.centralsemi.com/paraSearch/parametricSearch_v1_1.php">
              <img src="http://www.centralsemi.com/centralSemi/images/Parametric_Search_02.png" width="67" height="132" style="border-style: none;" />
            </a>

          </td>
        </tr>
        <tr>
          <td> <a href="http://web.centralsemi.com/paraSearch/parametricSearch_v1_1.php">
              <img src="http://www.centralsemi.com/centralSemi/images/Parametric_Search_03.png" width="163" height="48" style="border-style: none;" />
            </a>

          </td>
          <td><a href="http://web.centralsemi.com/paraSearch/parametricSearch_v1_1.php">
              <img src="/centralSemi/images/Parametric_Search_04.png" rel="/centralSemi/images/Parametric_Search_Down_04.png" class="rollover" width="67" height="48" style="border-style: none;" />
              </a>
         </td>
        </tr>
      </table>
      </td>
  </tr>
</table> 
```

我有以下 jsfiddle 向您展示我的标记在行动中。

[http://jsfiddle.net/5bZtz/](http://jsfiddle.net/5bZtz/)

在 Firefox 和 Chrome 中查看表格时，我没有空间，但在 IE 中显示的空间就像您在 jsfiddle 示例中看到的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:18:00.487

只需在您的 CSS 中添加以下代码，

```
 td {
    line-height:0;
    } 
```

我在这里更新你的小提琴。请看看它的工作原理！[http://jsfiddle.net/5bZtz/1/](http://jsfiddle.net/5bZtz/1/)

祝你好运 ..）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:10:44.380

添加到`<a href="http://web.centralsemi.com/paraSearch/parametricSearch_v1_1.php"><img ... /></a>`css 属性：`display:block;`和`height:132px;`

# javascript - 在javascript中拖动光标？

> ID：14319850
> 
> 赞同：4
> 
> 时间：2013-01-14T13:59:24.690
> 
> 标签：javascript, html, css, events, mouse-cursor

我需要在某些地方设置拖动光标，但我在这里看不到它[http://www.w3schools.com/cssref/pr_class_cursor.asp](http://www.w3schools.com/cssref/pr_class_cursor.asp)

在我的情况下，当我拖动一些图像时它会出现：

[![拖动光标](../Images/1926a35f64bcd5749a7ac18319d893a1.png)](https://i.stack.imgur.com/1QF6J.jpg) [http://s2.subirimagenes.com/otros/previo/thump_8236773bgform29.jpg](http://s2.subirimagenes.com/otros/previo/thump_8236773bgform29.jpg)

是否有类似 body{cursor: drag} 的代码可以使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:00:51.630

您可以使用移动光标参数：

```
.target {cursor:move} 
```

您要求的光标是独一无二的，如果您想使用纯 CSS 的光标，那么最适合这种情况的是移动光标。

**编辑：** 对于您看到的自定义光标，您可以使用 URL 属性值

```
.target{ cursor: url(mycursor.gif), auto; } 
```

您想在末尾指定一个默认光标，以防无法使用 URL 指定的光标。

如果您希望此光标仅在拖动时出现，那么您必须将此 CSS 规则应用于用户单击时拖动的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T14:04:30.203

您也许可以使用特定于供应商的抓取光标，但我认为目前还没有支持。最好使用自定义图标或 Chris B. 建议的移动光标。

```
.grab {
   cursor: url("http://www.example.com/openhand.cur") 8 8, move;
   cursor: -moz-grab;
   cursor: -webkit-grab;
}

.grabbing {
   cursor: url("http://www.example.com/closedhand.cur") 8 8, move;
   cursor: -moz-grabbing;
   cursor: -webkit-grabbing;
} 
```

# emacs - 我可以使用固定格式的 emacs f90 模式吗？

> ID：14319854
> 
> 赞同：3
> 
> 时间：2013-01-14T13:59:48.263
> 
> 标签：emacs, fortran, fortran90

我正在更新一些 fortran 77 代码以使用 fortran 90 结构，而 emacs 是我选择的编辑器。目前，源是固定格式，并且不会很快改变（由于外部限制）。我可以选择的两种 emacs 主要模式`fortran-mode`仅突出显示 fortran 77 构造的语法（它不理解`module`or`contains`等​​作为我觉得很烦人的关键字，但它确实理解固定格式——正确缩进代码在必要时）。然而，我可以使用的另一种主要模式是`f90-mode`缩进完全错误，这也有点烦人。有什么方法可以从 中获取语法高亮`f90-mode`，但在 中使用的缩进结构`fortran-mode`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-16T01:54:27.017

看起来这确实是可能的。尝试将以下内容添加到您的配置文件中：

```
(require 'f90)
(add-hook 'fortran-mode-hook 'f90-font-lock-2) 
```

这只是遵循[emacs.stackexchange.com](https://emacs.stackexchange.com/questions/5288/editing-fortran90-in-a-fixed-format-mode?newreg=e243834485dc442baa012a2b14f59706)上提供的解决方案，所以应该感谢用户[已弃用](https://stackoverflow.com/users/353062/deprecated)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T17:24:17.973

您可以通过添加来实现一些[fortran90 之](/questions/tagged/fortran90 "显示标记为“fortran90”的问题")类的突出显示`fortran-mode`

```
(add-hook 'after-change-major-mode-hook
 (lambda () (font-lock-add-keywords 'fortran-mode
 '(
      ("\\(CONTAINS\\)" 1 font-lock-keyword-face t )
      ("\\(USE\\)"      1 font-lock-keyword-face t )
 )))) 
```

到您的 ~/.emacs（或 ~/.emacs.d/init.el）文件。

对于一个全面的解决方案，需要对正则表达式进行一些额外的工作。但是只需几行代码，您就应该能够对自己的代码感到满意。使用不同的面可以获得不同的颜色：

```
font-lock-comment-face
font-lock-constant-face
font-lock-function-name-face 
font-lock-keyword-face
font-lock-type-face
font-lock-warning-face 
```

# php - 提交前验证表单

> ID：14319855
> 
> 赞同：0
> 
> 时间：2013-01-14T13:59:53.857
> 
> 标签：php, javascript, html

我想提交一个带有 php 变量的表单以输入到 javascript 中，问题是变量仅在发布后设置，这对于它们被回显到 javascript 来说已经太晚了。当然，如果我再次提交，变量已经被实现到 javascript 中并且它应该可以正常工作。但是，我宁愿只提交一次。有什么方法可以在提交之前验证表单吗？这是我的困境的一个例子：

```
<?php
      if(isset($_POST['submit'])){$name=$_POST['name'];}
?>

<html>
 <div id="message"></div>
    <form action="home.html" method="POST">
       <input type="text" name="name">
       <input type="submit" name="submit" value="conditions-met" 
              onclick=<?php if($name=="bob"){echo"start();";}?>>
    </form>
</html>

 <script type="text/javascript">

  function start(){
       document.getElementById('message').innerHTML = 'hello bob';
  return true;
}
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:26:17.990

男人对你很刻薄！！

基本上，您应该使用 JavaScript 验证字段。

单击提交按钮时，请进行检查。成功时继续，失败时显示错误消息。

例子

```
<form id="myForm" onsubmit="return ValidateFields(this)" name="myForm" accept-charset="UTF-8" enctype="multipart/form-data"" action="myPhpScript.php" method="POST">

// html fields

</form>

<script>

function ValidateFields(formObject)
{

   var FieldsValid = true;

   //Validate the fields and if one of them is not valid set FieldsValid to false

if(!FieldsValid )
{
   //show an error message

return false; // Returing false will prevent the form from submitting

}

return true;// the form will be submitted
}

</script> 
```

为了成为忍者，请阅读以下内容：

[http://www.script-tutorials.com/form-validation-with-javascript-and-php/](http://www.script-tutorials.com/form-validation-with-javascript-and-php/)

[http://www.webcredible.co.uk/user-friendly-resources/dom-scripting/validate-forms-javascript.shtml](http://www.webcredible.co.uk/user-friendly-resources/dom-scripting/validate-forms-javascript.shtml)

[http://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:05:10.160

如果验证正确，绑定到 onclick-event 的函数必须返回 true，否则返回 false。

相同的函数必须在 javascript 中。您不能在其中调用 php 函数。如果你想要php，试试ajax。

```
<input type="submit" onsubmit="return validate();" />

<script>
    function validate() {
        // do validation in javascript
        // or make an ajax request e.g. to 
        //  /validate.php?name=somename&surname=someothername 
        // and let this request answer with true or false

        // return true if valid, otherwise false
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:32:11.563

您可以使用 Ajax 和使用 Jquery 的*beforeSubmit函数来完成它您有：*

```
$.ajax({
            url: "your async page in php",
            cache: true,
            data: $("#formID").serialize(),
            type: 'POST',
            beforeSend: function(){ 
                         /* You can validate your input here*/
            },
            success: function(response){
                /* Based on the response from php you can handle the message to the user*/
            },
            error: function(response){/*Error Handler*/},
            complete: function(){/*If it's complete than you can reset the form*/}
        }); 
```

我认为如果您使用跨 Ajax/PHP 请求，它会更容易更清晰

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T14:43:55.757

```
<html>
<div id="message"></div>
<form action="home.html" method="POST" onsubmit="return validate()">
<input type="text" name="name" id="name">
<input type="submit" name="submit" value="conditions-met" >
</form>
</html>

<script type="text/javascript">

function validate(){

name=document.getElementById('name').value;
if(name == "")
{
document.getElementById('message').innerHTML = 'Please Fill Name';
return false;
}
return true;
}
</script> 
```

# mysql - 如何按月对结果进行分组？

> ID：14319856
> 
> 赞同：2
> 
> 时间：2013-01-14T14:00:00.247
> 
> 标签：mysql, select, group-by, union

目前，我的代码在这里产生这样的结果：

```
 SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS  MONTH, COUNT(*) AS TOTAL
 FROM news
 GROUP BY MONTH 

 UNION ALL 

 SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS MONTH , COUNT(*) AS TOTAL
 FROM equipment
 GROUP BY MONTH 

 RESULTS:
 YEAR MONTH TOTAL
 2013 FEB    1 (news table)
 2013 JAN   12 (news table)
 2013 FEB    1 (equipment table)
 2013 JAN   11 (equipment table) 
```

如何编辑 SQL 查询，以便我只能显示：

> ```
>  RESULTS:
>  YEAR MONTH TOTAL
>  2013 FEB    2 (both news and equipment table)
>  2013 JAN   23 (both news and equipment table) 
> ```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:01:47.103

尝试 ：

```
SELECT YEAR, MONTH, SUM(TOTAL) AS TOTAL
FROM (SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS  MONTH, COUNT(*) AS TOTAL
 FROM news
 GROUP BY MONTH 

 UNION ALL 

 SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS MONTH , COUNT(*) AS TOTAL
 FROM equipment
 GROUP BY MONTH) x
GROUP BY YEAR, MONTH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:03:07.447

尝试

```
Select year, month, sum(total) from
(
SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS  MONTH, COUNT(*) AS TOTAL
 FROM news
 GROUP BY MONTH 

 UNION ALL 

 SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS MONTH , COUNT(*) AS TOTAL
 FROM equipment
 GROUP BY MONTH 
)
group by year, month 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:05:52.273

```
select x.year, x.month, sum(x.total) from x(
 SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS  MONTH, COUNT(*) AS TOTAL
 FROM news
 GROUP BY MONTH 

 UNION ALL 

 SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS MONTH , COUNT(*) AS TOTAL
 FROM equipment
 GROUP BY MONTH ) x
group by x.month, x.year 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T14:04:26.883

尝试这个：

```
SELECT YEAR, MONTH, SUM(total) total 
FROM (SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS MONTH, COUNT(*) AS TOTAL 
      FROM news 
      GROUP BY MONTH
      UNION ALL
      SELECT YEAR(date_added) AS YEAR, MONTHNAME(date_added) AS MONTH , COUNT(*) AS TOTAL 
      FROM equipment 
      GROUP BY MONTH
     ) AS A 
GROUP BY YEAR, MONTH 
```

# jquery - jQuery验证：部分必填字段未填写但仍可提交表单

> ID：14319857
> 
> 赞同：0
> 
> 时间：2013-01-14T14:00:00.637
> 
> 标签：jquery, jquery-validate

我使用 jquery 验证（[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)）进行表单验证。以下是我的代码的一些片段：

HTML：

```
<form id="formID" action="/processForm" method="post">
  ...
  <input id="name" type="text" name="name" size="10" />
  <input id="username" type="text" name="username" size="10" />
  ...
<input type="submit" value="Submit" /> 
```

jQuery：

```
$("#formID").validate({
  onkeyup:false,

  rules: {
    name: {required: true},
    username: {required: true, checkUsername: true}
    ...
  },
  messages: {
    name: {required: "Must fill"},
    username: {required: "Must fill", checkUsername: "Username unavailable"},
    ...
  }

});

// Check if username exists
$.validator.addMethod('checkUsername', function(username) {
  var postURL = "/checkUsername";
  $.ajax({
    ...
  });
  return ...;
}, '');

// Submit the form by Ajax
$(document).ready(function() {
  $('.formID').ajaxForm({
    success: function(returnData) {
      $('#content').html(returnData);
    }
  });
}); 
```

奇怪的是，我可以将一些必填字段留空或取消选中，但仍然可以提交表单。如果留空，一些必填字段可能会阻止提交，但其他字段则不会。有没有人遇到过同样奇怪的问题？还是我在这里做错了什么？

顺便说一句，如果我单击提交按钮而不填写任何内容，所有必填字段都会正确显示错误消息。但其中一些不会阻止提交表单。请帮忙。

编辑：底部的 Ajax 表单提交功能似乎不起作用。我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:28:01.007

总结一下，为了同时使用表单验证和 ajax 提交，将 'submitHandler' 添加到 validate() 函数中：

```
$("#formID").validate({
  onkeyup:false,

  rules: {
    ...
  },

  messages: {
    ...
  },

  // Submit the form
  submitHandler: function(form) {
    theUrl = '/processData';
    var params = $(form).serialize();
    $.ajax ({
      type: "POST",
      url: theUrl,
      data: params,
      processData: false,
      async: false,
      success: function(returnData) {
        $('#content').html(returnData);
      }
    });
  }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T23:35:44.647

我遇到了同样的问题，我所做的是：
1）更改提交按钮：
从：

```
<input type="submit" class="savebutton" id="save" value="Save" />

to

 <input type="button" class="savebutton" id="save" value="Save" />  

(the save button is not going to submit the form when is click it). 
```

2）将我的验证脚本更改为：

```
<script type="text/javascript">
 $(document).ready(function() {
   $('#form').validate({ 
     rules: {
         qty: {
    max: 100,
            required: true
         }
    },
    messages: {
        qty: "please check quantity",
    }
});

 $( "#save" ).click(function() {
if ($('#form').validate())$('#form').submit();
 });
});
</script> 
```

当点击“保存”按钮时，它会验证表单。如果验证正确，那么它将提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:37:47.590

代替：

```
// Submit the form by Ajax
$(document).ready(function() {
  $('.formID').ajaxForm({
    success: function(returnData) {
      $('#content').html(returnData);
    }
  });
}); 
```

使用[Validate](http://docs.jquery.com/Plugins/Validation/validate#toptions)插件的`submitHandler`选项，如下所示：

```
$("#formID").validate({
    //all your other options
    submitHandler: function(form) {
      $(form).ajaxForm({
        success: function(returnData) {
          $('#content').html(returnData);
        }
      });
    }
 }); 
```

# android - WebViewDatabase NullPointerException

> ID：14319858
> 
> 赞同：3
> 
> 时间：2013-01-14T14:00:04.287
> 
> 标签：android

我在我的应用程序上做了很多测试。谷歌市场告诉我这个错误。通过“其他”设备。哪种设备是“其他”？哪个原因造成了错误？

```
java.lang.NullPointerException
at android.webkit.WebViewDatabase.getCacheTotalSize(WebViewDatabase.java:735)
at android.webkit.CacheManager.trimCacheIfNeeded(CacheManager.java:557)
at android.webkit.WebViewWorker.handleMessage(WebViewWorker.java:195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.os.HandlerThread.run(HandlerThread.java:60) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T17:18:04.560

这会导致当您使用广告但有时 webviewdb 为空时，要解决此问题：

```
WebViewDatabase webViewDB = WebViewDatabase.getInstance(this);  
if (webViewDB == null) {  
  View adView = findViewById(R.id.adView);  
  if (adView != null) {
    adView.setVisibility(View.GONE);  
  }
} 
```

此问题已在 Android 操作系统 2.3+ 中修复，因此在此操作系统版本捕获之前，您必须禁用向有此问题的人的广告。

# java - 如何在java中使用解析器从nmap XML字符串（IP，端口）获取信息

> ID：14319860
> 
> 赞同：1
> 
> 时间：2013-01-14T14:00:06.270
> 
> 标签：java, parsing, xml-parsing, sax, nmap

我是编码新手，我试图从**NMAP4j生成的 XML 字符串中获取信息**

```
<?xml version="1.0"?>
<?xml-stylesheet href="file:///usr/local/share/nmap/nmap.xsl" type="text/xsl"?>
<!-- Nmap 6.01 scan initiated Mon Jan 14 13:56:47 2013 as: /usr/local/bin/nmap -&#45;datadir /usr/local/share/nmap -T4 -oX - 192.168.1.1 -->
<nmaprun scanner="nmap" args="/usr/local/bin/nmap -&#45;datadir /usr/local/share/nmap -T4 -oX - 192.168.1.1" start="1358168207" startstr="Mon Jan 14 13:56:47 2013" version="6.01" xmloutputversion="1.04">
<scaninfo type="syn" protocol="tcp" numservices="1000" services="1,3-4,..."/>
<verbose level="0"/>
<debugging level="0"/>
<host starttime="1358168207" endtime="1358168209"><status state="up" reason="arp-response"/>
<address addr="192.168.1.1" addrtype="ipv4"/>
<address addr="xxx" addrtype="mac" vendor="yyy"/>
<hostnames>
</hostnames>
<ports><extraports state="closed" count="996">
<extrareasons reason="resets" count="996"/>
</extraports>
<port protocol="tcp" portid="21"><state state="open" reason="syn-ack" reason_ttl="64"/><service name="ftp" method="table" conf="3"/></port>
<port protocol="tcp" portid="22"><state state="open" reason="syn-ack" reason_ttl="64"/><service name="ssh" method="table" conf="3"/></port>
</ports>
<times srtt="36813" rttvar="25229" to="137729"/>
</host>
<runstats><finished time="1358168209" timestr="Mon Jan 14 13:56:49 2013" elapsed="2.48" summary="Nmap done at Mon Jan 14 13:56:49 2013; 1 IP address (1 host up) scanned in 2.48 seconds" exit="success"/><hosts up="1" down="0" total="1"/>
</runstats>
</nmaprun> 
```

我试过这段代码：

```
String nmapRun = nmap4j.getOutput() ;
OnePassParser opp = new OnePassParser() ;
NMapRun nmapRun1 = opp.parse( nmapRun, OnePassParser.STRING_INPUT ) ; 
```

但是我无法获得拥有对象并操纵这些对象以获取所有信息的解决方案，

请帮助我使用一个简单的代码示例让所有人都可以理解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:14:46.327

您是否尝试解析现有文件？如果是这样：

```
OnePassParser opp = new OnePassParser() ;
NMapRun nmapRun = opp.parse( fileName, OnePassParser.FILE_NAME_INPUT ) ; 
```

# javascript - 使用 Mechanize 将 HTML 注入页面

> ID：14319862
> 
> 赞同：1
> 
> 时间：2013-01-14T14:00:12.153
> 
> 标签：javascript, python, html, web-scraping, mechanize

我正在编写一个网页抓取程序来从网站上获取我的成绩。我使用 Mechanize 登录页面并导航到我正在抓取的区域。不幸的是，该页面使用 Javascript 来加密页面（可能是为了阻止我抓取）。我找到了解密脚本并移植到 Python。它可以工作，我用它从页面中提取加密字符串，当我转换它时，它变成了 HTML 中的表格。

那么，说到我的意思，有没有办法将 HTML 注入页面并使用 mechanize 使用表格上的链接来获取我的成绩？

谢谢您的帮助！

编辑：我也有美味的汤，如果有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:21:04.440

我最终只使用了这个：

```
response = br.open("www.linknotonpagethatiwanttogoto.com")
page = response.read() 
```

我发现您将链接的 .open() 存储为响应，而不是使用 .follow_link()。此外，浏览器使用相同的 cookie，因此会话 cookie 被保留。因此，在解析了 html 之后，我将链接弹出到 .open() 并获得了新页面。

# objective-c - 如何在编译时测试定义的宏是否为空（Cbjective-C / c）？

> ID：14319865
> 
> 赞同：2
> 
> 时间：2013-01-14T14:00:26.013
> 
> 标签：objective-c, c, macros, c-preprocessor

是否可以检查我是否有一个空定义？IS_EMPTY_OR_UNDEFINED 是我刚刚想出的虚构宏。

```
#define constantA 0
#define constantB 1
#define constantC null
#define constantF ""
#define constantH 

#if IS_EMPTY_OR_UNDEFINED(constantA)
# error constantA is defined 0 and the above if should not be true - this line should not run
#endif

#if IS_EMPTY_OR_UNDEFINED(constantB)
# error constantB is defined 1 and the above if should not be true - this line should not run
#endif

#if IS_EMPTY_OR_UNDEFINED(constantC)
# error constantC is defined null and the above if should not be true - this line should not run
#endif

#if IS_EMPTY_OR_UNDEFINED(constantF)
# error constantF is defined "" and the above if should not be true - this line should not run
#endif

#if ! IS_EMPTY_OR_UNDEFINED(constantH)
# error constantH is defined empty and the above if should not be true - this line should not run
#endif

#if defined(undefinedConstant) && ! IS_EMPTY_OR_UNDEFINED(undefinedConstant)
# error undefinedConstant is not defined and the above if should not be true - this line should not run
#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:50:40.050

可以检查表达式是否为空（以一些非常奇特的边界情况为模），但该技术有些复杂。[P99](http://p99.gforge.inria.fr/)有一个宏可以执行此操作，您可以将其用作

```
#if !defined(constantA) || P99_IS_EMPTY(constantA)
...
#endif 
```

C 标准不允许将其组合在一个宏中。从 C11 6.10.1 p4 开始，`defined`不允许在宏或其他表达式中使用令牌。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T14:04:28.470

您可以使用`#ifdef MACRO`or`#if defined(MACRO)`来测试是否定义了宏。您也可以比较它们，尽管只针对整数：

```
#if MACRO > 5 
```

等也许这对你有帮助？

编辑：虽然我不知道您将如何检查定义是否评估为“空”，或者这是否可能。

# objective-c - Objective-C如何在目标文件中初始化self后调用方法？

> ID：14319866
> 
> 赞同：0
> 
> 时间：2013-01-14T14:00:32.330
> 
> 标签：objective-c, methods, self

有什么方法可以知道自定义对象何时完成从对象文件内部初始化？或者让我换个说法，为什么我不能在这个方法中调用任何方法？

```
- (id)initWithCoder:(NSCoder *)coder {
    //NSLog(@"initWithCoder inside CustomObject (subclass of UIView)");
    self = [super initWithCoder:coder];
    if (self) {
        //... initialization here

        [self visibleEmptyButton]; //why does this method never get called?

    }
    return self;
} 
```

编辑：

```
-(void)viewDidLoad{

    NSLog(@"viewDidLoad inside CustomObject(subclass of UIView) is called"); //It never gets called
    [self viewDidLoad];
    //initialization here...

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:05:12.477

（如果您正在初始化的类是 UIViewController 的子类）应在加载视图后更改和设置屏幕中的内容。尝试使用以下方法：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [self visibleEmptyButton];
    //Do the additional view altering here
} 
```

如果此方法尚不存在，您只需将其添加到 .m 文件（无需将其添加到 .h 文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:15:37.683

代替您进行编辑，您可以简单地将调用移至 UIViewController：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [TheInstanceOfYourViewClass visibleEmptyButton];
} 
```

此外，为了避免公开一大堆与子视图相关的小方法，创建*一种*方法来处理初始视觉状态通常是有意义的。

# ajax - Ember.js 在 Rails 应用程序上设计：406 Not Acceptable on sign up

> ID：14319868
> 
> 赞同：4
> 
> 时间：2013-01-14T14:00:34.087
> 
> 标签：ajax, ruby-on-rails-3, devise, ember.js

我使用 Devise 设置了一个 rails 3.2.11 应用程序进行身份验证。我想使用[ember.js](http://emberjs.com/)作为 mvc 框架。

当我对 POST /users.json 路由发起 ajax 调用时，我得到 406 Not Acceptable。

这是我的ajax调用：

```
urlBase : '/users'

signup : (username, email, password, passwordConfirmation) ->
  $.ajax
    url: "#{@.get('urlBase')}.json"
    type: "POST"
    dataType: "json"
    data:
      "user[username]": username
      "user[email]": email
      "user[password]": password
      "user[password_confirmation]": passwordConfirmation

    success: (data) ->
      alert('Completed sign up process: '+ JSON.stringify(data));
      @errorMsg = "Signed up successfully." 

    error: (jqXHR, textStatus, errorThrown) ->
      alert "Error completing sign up: " + textStatus + " error: " + errorThrown 
```

以下是日志：

```
Started POST "/users.json" for 127.0.0.1 at 2013-01-14 14:38:57 +0100
Processing by Devise::RegistrationsController#create as JSON
  Parameters: {"user"=>{"username"=>"obo", "email"=>"obo@obo.dv", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
   (1.3ms)  begin transaction
  User Exists (1.3ms)  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'obo@obo.dv' LIMIT 1
   (0.1ms)  rollback transaction
Completed 406 Not Acceptable in 311ms (ActiveRecord: 2.6ms) 
```

我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:17:00.383

你用的是什么版本的设计？

上周我在意外升级到 Devise 2.2.0 后遇到了类似的问题。在该版本中进行了一些向后不兼容的更改，包括默认情况下`DeviseController`仅响应的更改。`HTML`您可以添加其他格式，例如`JSON`，这应该可以解决您的问题。

[在 Github 上的](https://github.com/plataformatec/devise/blob/master/CHANGELOG.rdoc)变更日志中阅读有关设计变更的信息。如果您不想这样做，请尝试降级到 Devise 2.1.2，这是我暂时所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:52:28.840

Zajn 的回答解释说 DeviseController 现在只响应 HTML 格式（从 2.2.0 版开始）。[更改日志](https://github.com/plataformatec/devise/blob/master/CHANGELOG.rdoc)说要将 JSON 格式添加到 DeviseController.respond_to 。

我将 SessionsController 和 RegistrationsController 子类化并添加了 respond_to :json ：

```
class RegistrationsController < Devise::RegistrationsController
  respond_to :json
end

class SessionsController < Devise::RegistrationsController
  respond_to :json
end 
```

# jquery - 使用 jQuery 在 twitter 引导模式中设置链接 href 属性

> ID：14319871
> 
> 赞同：0
> 
> 时间：2013-01-14T14:00:46.053
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我有一个带有表单的模式，在我提交表单后，我收到一条成功消息。成功消息有一个链接

```
<a href="#" id="register_again">Add another registration </a> 
```

当我尝试将此链接设置为指向当前 URL

```
jQuery(document).ready(function(){
    var url = window.location.href;
    jQuery('#register_again').attr('href', url + '&register_again');
}); 
```

但它并没有改变链接，仍然#，如果我把它作为一个普通的html，它在没有模态的情况下也能正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:57:20.640

所以我通过 ajax 获得了成功消息，我只是在成功函数中定义了 url，而不是添加普通的 JavaScript 代码来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:41:16.663

当您在提交请求后收到成功消息时，我不确定您如何处理页面，例如呈现新页面或其他方式，例如 ajax 请求方式。

但是在这里，在您的代码中，您正在尝试在加载页面时更新链接。因此，在您的情况下，您可以在用户单击链接时通过将偶数绑定到链接来重定向页面。

```
jQuery(document).ready(function(){
  var url = window.location.href;
  jQuery(document).on('click','#register_again',function(){
    window.location = url + '&register_again';
  });
}); 
```

希望能帮助到你 ：）

# asp.net - 防止出现滚动条

> ID：14319881
> 
> 赞同：0
> 
> 时间：2013-01-14T14:01:20.673
> 
> 标签：asp.net, css, ajax, c#-4.0, scrollbar

我正在用asp.net开发一个网站；在这个页面上是从 ajax 安装的可折叠面板控件。我的问题是，当我打开面板（其中有几个标签）时，滚动条出现在页面的一侧，并且页面发生了变化。这看起来不干净。我想知道是否有办法防止滚动条出现。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:10:31.853

如果您正在谈论禁用浏览器滚动条，您可以在 css中添加`overflow-y: hidden`到您的元素。`html`

**注意 -**这将禁用网站上的滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:21:10.707

如果你想防止滚动条出现和消失，你可以让它一直在那里。

```
html {overflow-y:scroll} 
```

它应该有助于根据滚动条的外观向左或向右移动站点的效果。希望能帮助到你。

# git - 手动还原更改

> ID：14319885
> 
> 赞同：0
> 
> 时间：2013-01-14T14:01:31.473
> 
> 标签：git, egit, tortoisegit

我正在使用 TortoiseGit 和/或 Eclipse 的 EGit。

假设我修改了一个文件。图标覆盖更改为已修改。然后我改变主意并将文件编辑回之前的状态。图标覆盖保持修改状态。

当我写这个问题时，几分钟后图标恢复正常。

这是 Git 应该如何工作的吗？为什么？

我习惯了 TortoiseSVN，它足够聪明，可以立即注意到文件恢复到原始状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:06:39.997

不，我猜这只是 TortoiseGit 和/或 Eclipse 的 EGit 注意到更改之前的一些延迟。从您的终端发出命令`git status`，您将立即获得正确的结果。

# java - 使用 Hibernate 显式更改列的名称

> ID：14319888
> 
> 赞同：0
> 
> 时间：2013-01-14T14:01:40.467
> 
> 标签：java, hibernate, jpa, hibernate-mapping

如何重命名生成 Hibernate 的表中的字段名称？创建时：

```
@ManyToMany(targetEntity = GroupRightEntity.class)
or
@ManyToMany(targetEntity = UserRightEntity.class) 
```

现在通过显式更改数据库中的列名来实现。

```
alter table security_mapping_user rename column sec_mapping_id to secmappingentity_id; 
```

感谢您的帮助和理解。

* * *

Hibernate 为其他表生成链接。因此，我了解生成的字段名称。我需要使用注释或其他东西，这些列名会改变。我希望我写的一切都正确。

* * *

我们有。

```
@Entity
@Table(name = "ROLE")
public class RoleEntity implements Role, Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(generator = "SEQ_ROLE")
    @SequenceGenerator(name = "SEQ_ROLE", sequenceName="SEQ_ROLE", allocationSize = 1)
    private Long id;
    private String name;
    private String description;

@Entity
@Table(name = "URL")
public class UrlEntity implements Url, Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(generator = "SEQ_URL")
    @SequenceGenerator(name="SEQ_URL", sequenceName="SEQ_URL", allocationSize = 1)
    private Long id;
    private String url;
    @OneToMany(targetEntity = RoleEntity.class, fetch = FetchType.EAGER, mappedBy="url_id")
    private Set<Role> roles; 
```

后来我们得到第三张桌子。“URL_ROLE”

在此表中，字段已命名。“URL_ID”和“ROLE_ID”

“URL_ID”需要重命名“urlentity_id”中的字段。

现在看来我正确地构建了一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:02:48.100

在定义 ManyToMany 时，您还应该定义您的关系映射到哪一列。那是您应该更改名称的地方。

# android - 使用 mongoDB 在 android 应用程序中存储用户信息和评论的示例代码

> ID：14319889
> 
> 赞同：-6
> 
> 时间：2013-01-14T14:01:46.320
> 
> 标签：android, mongodb, database

我需要使用 mongoDb 作为后端数据库来存储用户信息，例如用户名和密码。用户可以对应用程序等提供反馈。谁能提供在android应用程序中使用mongodb作为后端数据库的示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:15:23.540

您不能在 Android 上本地运行 MongoDB。

但是，您可以使用 MongoDB 构建 Web 服务应用程序进行存储，并从您的 Android 应用程序调用此 Web 服务上的方法。

# javascript - 使用带有 php mysql 数据的 jquery 数据表 - 进一步开发

> ID：14319893
> 
> 赞同：0
> 
> 时间：2013-01-14T14:01:57.820
> 
> 标签：javascript, jquery, mysql, flexigrid

我一直在探索 jquery 数据表和 flexigrid 插件来显示来自 mysql 数据库的数据。我有两个版本都显示来自 php 脚本的数据库中的数据。所以那里一切都好。

但是，我想添加一个表单以启用对标准的搜索，例如从日期、类型等多个标准。Flexi 网格有一个基本的过滤器——我没有深入研究数据表。

我可以在不使用插件的情况下执行此操作，但我希望我的结果显示在所选数据网格中，然后使用该表功能。我只是不确定如何执行此操作的工作流程。

如何从表单提交的回调中开始创建 flexigrid 或数据表，并使用该回调的结果？我是否将结果保存在变量中并将其传递给插件？

我希望我的问题是有道理的。我知道我想做什么，只是不知道怎么做

我对 php 没问题 - 从新闻到 javascript

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:48:51.807

## 弹性网格

您可以创建一个表单（例如调用它`searchForm`），然后序列化这些数据并将其传递给 Flexigrid 搜索参数。

然后，您可以通过单击按钮将表单数据添加到 Flexigrid 实现：

```
$(function () {
    $('#btnSearch').click(function () {
        addFormData();

        // Reload the grid from the URL, passing in search parameters from addFormData
        $('#flexGrid').flexOptions({ url: '/search/here/' }).flexReload();
    });
}); 
```

而该`addFormData`函数只是将表单中的数据序列化，并将其添加到 Flexigrid 回调到服务器的参数中：

```
function addFormData() {
    //Retrieve all input data from the searchForm
    var allSearchParams = $('#searchform').serializeArray();
    //Add the parameters to Flexigrid, so when it reloads, it will use them to filter the data
    $("#flexGrid").flexOptions({ params: allSearchParams });
    return true;
} 
```

## 数据表

DataTables 有方便的插件，例如[Column Filter](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/serverSide.html)，它具有服务器端过滤功能，可以为您完成所有这些工作，或者我建议您阅读 DataTables [server-side processing](http://datatables.net/release-datatables/examples/server_side/server_side.html)。

# java - 字符串中的 Java 格式单词

> ID：14319896
> 
> 赞同：1
> 
> 时间：2013-01-14T14:02:08.730
> 
> 标签：java, arraylist

例如，我有一个包含书籍每一行内容的文本文件，我有一个 Java 程序来搜索书中这些行中的特定单词。

这是程序：

```
import java.io.File;
import java.util.ArrayList;
import java.util.Scanner;

public class AliceSearch {

    public static void main(String[] args) throws Exception {

        ArrayList<String> aiw = new ArrayList<String>();
        ArrayList<String> matches = new ArrayList<String>();
        Scanner scan = new Scanner(new File("aiw.txt"));
        Scanner input = new Scanner(System.in);

        while (scan.hasNext()){
            aiw.add(scan.nextLine());
        }

        String searchTerm;

        System.out.print("Please Input Search Parameter : ");

        searchTerm = input.nextLine();

        boolean itemFound = false;

        String currItem = null;

        for(int i = 0; i<aiw.size(); i++  ) {
            currItem = (String)aiw.get(i);

            if (currItem.contains(searchTerm)) {

                matches.add(currItem);

                itemFound = true;

            }
        }

        System.out.println("");

        if ( itemFound == false ) {

            System.out.println ( "No results containing "+searchTerm );

        }else{

            System.out.println ( "We Found the following results : " );

            for(int r = 0; r < matches.size(); r++){
                System.out.println("");
                System.out.println(matches.get(r));
            }
        }

        scan.close();
        input.close();

    }

} 
```

我希望`searchTerm`每个结果行在输出时（或放置在匹配 ArrayList 中时）都为大写。我该怎么办？我知道您使用`.toUpperCase();`但我现在不知道如何更改一串单词中的一个单词。

**提前致谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:06:06.640

而不是按照您现在的方式输出它：

```
System.out.println(matches.get(r)); 
```

你不能用吗

```
System.out.println(matches.get(r).replace(searchTerm, searchTerm.toUpperCase())); 
```

这是用于将找到的单词替换为大写版本的方法的[JavaDoc 。](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)`replace()`最好有

```
String uppercase = searchTerm.toUpperCase(); 
```

在循环之外，然后使用

```
System.out.println(matches.get(r).replace(searchTerm, uppercase)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:06:07.763

有一种方法`String`应该完全适合您的用例：

```
line.replace(word, word.toUpperCase()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:06:17.377

这可以使用模式的替换功能轻松完成。我们当然还需要突出显示部分大写的单词（例如句子的开头），因此需要创建带有标志的 Pattern，不能只使用`String.replaceAll()`：

```
 Pattern highlight = Pattern.compile(
   Pattern.quote(word), Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE );
 String hw = word.toUpperCase();
 line = highlight.matcher(line).replaceAll(hw); 
```

一旦知道单词，就应该提前准备前两行。无需为每个找到的行重新计算它们。Pattern.quote 引用保留字符，因此它们不会被赋予特殊含义。

# git - 如何在 git pull 请求中缩写分支名称？

> ID：14319906
> 
> 赞同：1
> 
> 时间：2013-01-14T14:03:10.213
> 
> 标签：git, pull

我要运行的命令是

```
git pull origin_au a_really_long_branch_name_that_i_dont_want_to_type 
```

无论如何我可以缩写分支名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:04:57.473

您应该能够简单地使用 Tab 键来自动完成该长分支名称。

如果没有，请务必在以下文件的帮助下设置自动完成：[https ://github.com/git/git/tree/master/contrib/completion](https://github.com/git/git/tree/master/contrib/completion)

您需要哪些取决于您使用的 shell，对于 bash，它是`git-completion.bash`. 只需将文件放在路径变量中的文件夹中，就可以了。

有关更多信息，请参阅[超级用户上的此线程。](https://superuser.com/questions/31744/how-to-get-git-completion-bash-to-work-on-mac-os-x)[git flow 的 githib 页面上](https://github.com/bobthecow/git-flow-completion/wiki/Install-Bash-git-completion)还提供了一些附加信息。

# java - 将文件列表从服务器发送到客户端的 JPanel

> ID：14319911
> 
> 赞同：2
> 
> 时间：2013-01-14T14:03:29.760
> 
> 标签：java, swing, client-server

简要说明 ：

我的应用程序将文件从服务器端发送到客户端，客户端选择文件名和扩展名，但是，为了让客户端看到文件列表，我编写了一个方法来列出可用的文件服务器。

虽然该方法有效，但我需要将文件名发送给客户端并将它们插入并在`JPanel`那里列出它们，以便用户可以选择他想要的文件。

这是我在服务器端的方法：

```
 public static void listfile() {

 String path = "C:/SAVE"; 

  String files;
  File folder = new File(path);
  File[] listOfFiles = folder.listFiles(); 

  for (int i = 0; i < listOfFiles.length; i++) 
  {

   if (listOfFiles[i].isFile()) 
   {
   files = listOfFiles[i].getName();
   System.out.println(files);
      }
  }
    } 
```

如何修改它以便在调用时将文件列表发送给客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:26:46.587

如果您使用 tcp 连接，您的服务器可以实现一个名为“listFiles”的命令。当它接收到这个命令时，它应该向客户端发送文件列表。

客户端应该连接到服务器，发送命令“listFiles”，读入服务器发送的文件列表并将其显示在其 JPanel 上。

假设您有一个采用以下模式的简单单线程服务器：

```
class Server
{
    public void run()
    {
        ServerSocket server = new ServerSocket(<portno>);

        Socket socket = server.accept();

        InputStream in = socket.getInputStream(); // for reading the command

        OutputStream out = socket.getOutputStream(); // for writing out the list

        // Now read the argument from in, say the result is in variable "cmd"

        if("listFiles".equals(cmd))
        {
            // invoke your list files logic, and instead of writing to the console
            // write it to out
        }
    }
} 
```

您的客户应遵循以下模式：

```
class Client
{
    public void getList()
    {
        Socket client = new Socket(<portno>);
        InputStream in = client.getInputStream(); // to read in the file list
        OutputStream out = client.getOutputStream(); // to send the listFiles command

        // Write the  listFiles command to out

        // Read in the list of files from in

        // Update your JPanel with the list
    }
} 
```

我省略了从/到套接字的实际读取和写入，但你会明白的。

# nancy - 在 IIS 6 上使用 asp.net 托管 nancy - 失败 - 配置错误

> ID：14319917
> 
> 赞同：2
> 
> 时间：2013-01-14T14:03:45.880
> 
> 标签：nancy

我尝试了一些东西来在 IIS 6 下托管一个小的 nancy 测试 api：

[https://github.com/NancyFx/Nancy/wiki/Hosting-nancy-with-asp.net](https://github.com/NancyFx/Nancy/wiki/Hosting-nancy-with-asp.net)

[http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

但它不起作用。这是我的步骤：

1.  创建空的 Nancy Web 应用程序

2.  使用 nuget 添加参考 - Nancy.Hosting.Aspnet 版本 0.15.1

    *   新的 Web.config 会自动修改
    *   如维基中所述
3.  在解决方案根目录中添加新类 - HelloModule.cs
    *   插入测试代码“HelloWorld”
4.  在本地发布网站
    *   在 Windows 2003 上
    *   在 IIS 管理器中使用虚拟目录

浏览 url 'localhost/nancyTest' 会带来 HTTP 403 错误。

一个小的 ASP.NET WebApplication 使用相同的配置运行。

nancyTest 应用程序没有像 default.aspx 这样的起始站点。我想从 .../nancyTest/ 获取请求响应，编码为：

```
public class HelloModule : NancyModule
{
    public HelloModule()
    {
        Get["/"] = parameters => "Hello World";
    }
} 
```

也许调用 .../nancyTest/ 不是 GET 请求？还有其他更详细的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-26T06:40:26.113

我知道现在使用 IIS6 的人不多，但是有以下解决方案，我希望它可以帮助一些仍然使用这个旧版本的人，

1.  配置 aspnet_isapi 以处理新的 ext 文件等，`.start`
2.  设置此应用程序的默认页面是`index.start`
3.  在 nancy 模块中添加重定向方法，如下所示：

```
Get["index.start"] = _ => {
    return Response.AsRedirect("~/", Nancy.Responses.RedirectResponse.RedirectType.Permanent);
};
```

希望它有帮助

# c# - JSON.NET 将结果反序列化为具有默认值的列表

> ID：14319920
> 
> 赞同：0
> 
> 时间：2013-01-14T14:03:52.843
> 
> 标签：c#, json.net

我在这里遗漏了一些明显的东西吗？JSON：

> {"p":[{},{"clientId":102102059663,"checkbox1Ticked":false,"checkbox2Ticked":false},{"clientId":23841,"checkbox1Ticked":false,"checkbox2Ticked":false},{ "clientId":102102111426,"checkbox1Ticked":false,"checkbox2Ticked":false}]}

C#：（checkboxData 是上面的字符串）

```
 public JsonResult SubmitSelectedChanges(string checkboxData)
    {
        var deserializedClients = JsonConvert.DeserializeObject<ChangeList>(checkboxData);
        return null;
    }

    public class ChangeList
    {
        public List<Change> p { get; set; }
    }

    public class Change
    {
        string clientId { get; set; }
        bool checkbox1Ticked { get; set; }
        bool checkbox2Ticked { get; set; }
    } 
```

反序列化后，clientId 始终为 null，并且 checbox1Ticked 和 checkbox2Ticked 为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:05:05.307

这是因为我忘记了更改类的访问修饰符：

```
 public class Change
        {
            public string clientId { get; set; }
            public bool checkbox1Ticked { get; set; }
            public bool checkbox2Ticked { get; set; }
        } 
```

我原以为这会引发异常。

# jquery - jQuery ajax 重新加载正文并执行脚本

> ID：14319925
> 
> 赞同：1
> 
> 时间：2013-01-14T14:04:05.813
> 
> 标签：jquery, ajax

如何重新加载整个页面或`<body>`仅在调整大小事件并执行所有脚本。

我更喜欢仅重新加载 body 的 case，我在 head 内安装了所有重型插件，在 body 的末端，我可以在 body`functions.js`上完成所有工作。

我试过了：

```
var url = document.URL;
$('html').load(url); 
```

但是脚本没有在新的 DOM 上执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:09:15.157

要在窗口调整大小时重新加载页面，您可以执行以下操作：

```
window.onresize = function(event) {
  window.location.reload();
}; 
```

但我认为你真正需要的是创建一个响应式页面。响应式页面会根据窗口大小自行调整，如果您调整窗口大小，它将自动调整元素而无需重新加载页面。

CSS 示例：

```
/* Example for Smartphones */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Your Styles */
}

/* Example for  Desktops and laptops */
@media only screen 
and (min-width : 1224px) {
/* Your Styles */
} 
```

完整的例子[在这里](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

我建议你搜索媒体查询和响应式设计，你会发现很多例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:14:38.457

老实说，在不丢失范围的情况下，您可以更好地创建持有者。否则你的 ajax 调用不会很有用。像下面这样

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Ajax preview</title>
</head>

<body>
    <div id="siteHolder"></div>
</body>
</html> 
```

而不是使用您正在使用的 jQuery 插件将新页面插入到带有 id 的 div 中，`#siteHolder`所以看起来像：

```
var request = $.ajax({
  url: "example.html",
  dataType: "html"
});

request.done(function(data) {
  $("#siteHolder").html( data );
});

request.fail(function(jqXHR, textStatus) {
  alert( "Request failed: " + textStatus );
}); 
```

这样，您将只启动一次您的 css 和 js 库，并更好地控制您的文档。

# spdy - 如果服务器实现 spdy/3 而浏览器只支持 spdy/2 会发生什么？

> ID：14319927
> 
> 赞同：8
> 
> 时间：2013-01-14T14:04:09.963
> 
> 标签：spdy

如果我在我的服务器上添加对 spdy/3 的支持，而我的用户在他们的浏览器中只有 spdy/2，会发生什么？协议会优雅地降级到 spdy/2 还是只会使用普通的 https？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T14:35:07.023

支持 SPDY 的服务器（例如[Jetty ）通过](http://webtide.intalio.com/2012/03/spdy-support-in-jetty/)[NPN](http://en.wikipedia.org/wiki/Next_Protocol_Negotiation)宣传他们能够支持的协议，并且通常其中总是有“http/1.1”。

如果你的服务器宣传“spdy/3”、“http/1.1”，而浏览器只支持“spdy/2”，那么浏览器（作为浏览器意味着它默认支持HTTP）将回退到“http/1.1” TLS。

如果服务器不支持 spdy/2，它不会降级（spdy/2 和 spdy/3 是二进制不兼容的）。如果无法进行协议协商，则关闭连接。

# javascript - 迭代脚本的内存消耗

> ID：14319928
> 
> 赞同：9
> 
> 时间：2013-01-14T14:04:10.440
> 
> 标签：javascript, node.js, memory, php

我有一个用 PHP 编写的脚本和用 Javascript 编写的相同脚本。
它迭代一百万次，每次都将一个字符串剥离到一个数组中，并将第一个数组项分配给一个新变量。

PHP 是：

```
class First
{
public function Iterate()
{
    $count = 1000000; 
    $test_string = '';
    $test_array = '';
    $first_word = '';
    for($i=1; $i <= $count; $i++){
        $test_string = 'This is a test string';
        //could use explode but no explode in js
        $test_array = split(" ", $test_string);
        $first_word = $test_array[0];
    }
}
}
$first = new First();
$first->Iterate(); 
```

Javascript是：

```
function First() {
this.Iterate = function() {
    count = 1000000;
    test_string = '';
    test_array = '';
    first_word = '';
    for(var i=1;i <= count; i++){
                    test_string = 'This is a test string';
                    test_array = test_string.split(" ");
                    first_word = test_array[0];
    }
}
}
first = new First();
first.Iterate(); 
```

我使用 PHP-CLI 5.3.10 运行 PHP，使用节点 v0.6.12 运行 Javascript。

对于 PHP，我使用“memory_get_usage()”，对于 Javascript，我使用“process.memoryUsage()”。我在脚本的开头运行它们，然后在结尾，然后用 start 减去 end，最后将字节数转换为 mb。

PHP 使用 0.00065 mb 内存，而 Javascript 使用 0.25 mb 但是 PHP 需要 4 秒，而 Javascript 需要 0.71 秒。我已经在 2 台不同的机器上运行了结果。

有谁知道为什么 Javascript 的内存使用率会比 PHP 的高得多（尽管 Javascript 的执行速度要快得多）？

我能想到的唯一解释是 V8 使用隐藏类的特性提高了速度但增加了内存消耗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:09:40.453

因为它们是非常不同的执行环境。

对于 PHP，源代码被转换为一系列操作码——有点像 p 代码，而 v8 使用 JIT 编译器。后者往往更倾向于使用内存，但是我怀疑 2 之间内存使用的最大差异是由于垃圾收集的不同策略：

```
$test_array = split(" ", $test_string); 
```

和

```
test_array = test_string.split(" "); 
```

在堆栈上创建一个对象，该对象在每次迭代结束时被丢弃。

两者都没有提供太多控制运行时内存使用的访问权限。

# c++ - 当新大小小于当前大小时，std::vector::resize() 是否会重新分配？

> ID：14319930
> 
> 赞同：17
> 
> 时间：2013-01-14T14:04:12.803
> 
> 标签：c++, c++11, std, c++03, c++98

> **可能重复：**
> [std::vector 向下调整大小](https://stackoverflow.com/questions/1155693/stdvector-resize-downward)

如果我`resize()`的`std::vector`大小比其当前大小小一些，向量是否有可能分配新内存？

出于性能原因，这对我很重要。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T14:09:52.420

不，`resize`ing 到更小的大小将永远不会重新分配。

> 如果容器缩小，所有迭代器、指针和对未删除元素的引用在调整大小后仍然有效，并引用它们在调用之前引用的相同元素。

（从[这里](http://www.cplusplus.com/reference/vector/vector/resize/)）

鉴于此，我们可以确定不会发生重新分配。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T14:55:04.523

`resize()`减少时仅更改逻辑大小。其他人已经回答了这个问题，所以我在这里不添加任何内容。这样做的目的是优化速度，因为它不需要重新分配或移动任何数据。

但是，当您想要优化内存使用时，C++11 引入了一个进一步的函数`shrink_to_fit()`，您可以在您之后`resize()`（甚至在任何其他时间）调用它，这实际上将确保您无需为任何您不想要的内存付费.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T14:10:24.433

不会。除非在一些非常特殊的情况下，`vector`否则永远不会缩小它的内存。请记住，当`vector`调整大小时，迭代器会失效，所以它不能在你背后做这件事——这是一个可观察的变化，标准准确地指定了这可能会或可能不会发生的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T14:16:36.347

不。

Vector 使用两个值：*size*和*capacity*。大小是存储在向量中的实际元素数量，而容量是指在内存中分配的保留空间。性能提升来自于分配比需要更多的空间。

仅当执行将导致容量大于当前容量的调整大小请求时，才会进行重新分配。此外，如果您尝试在向量中间插入大量元素，则会影响算法性能，因为插入元素之后的所有元素都需要移动（有时，如果超出容量，这可能会触发重新分配向量）。

您可以使用*保留*成员函数进一步提高速度：*保留*成员函数将确保将容量设置为特定值。

您可以在第 148 页阅读有关 std::vector 的更多信息 - 在[C++ 标准库：教程和参考](https://rads.stackoverflow.com/amzn/click/com/0201379260)一书中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T15:00:52.950

首先你必须衡量你想要优化的东西，仅仅性能是不够的，你是什么意思？用户界面反应性？这需要您测量时间的典型用户操作。重算法？等等...然后你必须找到瓶颈在哪里，可能是内存、磁盘访问等，最后可能是vector::resize，但只在最后！而你问问题的方式，我敢打赌我的 $ that vector::resize 不会成为瓶颈。

对 STL 的设计方式充满信心，在修改 STL 行为之前检查您的代码；-)

# r - 多列比较

> ID：14319935
> 
> 赞同：2
> 
> 时间：2013-01-14T14:04:22.063
> 
> 标签：r

我处于这样的情况：我有一个如下所示的 data.frame：

> ```
>  Col1   Col2  
>   a     3.4   
>   a     3.4      
>   d     3.2   
>   c     3.2 
> ```

我想要以下输出：

> ```
>  Col1  Col2  
>   a    3.4      
>   d    3.2   
>   c    3.2 
> ```

换句话说，“Col1”中的值“a”将被考虑一次，因为它被精确复制，否则即使“d”和“c”的值与“Col2”中报告的相同，它也会被考虑两次，因为它们是不同的实体（“d”与“c”不同）

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:08:13.873

试试这个：

```
DF <- read.table(text=" Col1   Col2  
  a     3.4   
  a     3.4      
  d     3.2   
  c     3.2 ", header=T)
aggregate(Col2~Col1, unique, data=DF)
  Col1 Col2
1    a  3.4
2    c  3.2
3    d  3.2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T14:07:23.483

```
> df <- read.table(header=T, text='
+  label value
+      A     4
+      B     3
+      C     6
+      B     3
+      B     1
+      A     2
+      A     4
+      A     4
+ ')
> unique(df[duplicated(df),]) # Finds unique duplicated
  label value
4     B     3
7     A     4
> df[duplicated(df),] # Finds Duplicated
  label value
4     B     3
7     A     4
8     A     4
 > df[!duplicated(df),] # Finds rows which are not duplicated
  label value
1     A     4
2     B     3
3     C     6
5     B     1
6     A     2
> 
```

# powershell - Powershell - 比较文件夹内容

> ID：14319945
> 
> 赞同：6
> 
> 时间：2013-01-14T14:04:35.050
> 
> 标签：powershell, comparison

我有下面的代码比较两个文件夹并输出每个文件夹不同的文件，有没有办法让它输出子文件夹中文件的完整文件/文件夹路径？

干杯

```
 # Create varaibles to store folder paths - pass to Strings... 
 param([string]$argFolderA,[string]$argFolderB)

 # Set variables for folder
 $FolderA = Get-ChildItem -Recurse -path $argFolderA
 $FolderB = Get-ChildItem -Recurse -path $argFolderB

 # Compare the contents and output the files different within each folder. 
 Compare-Object -ReferenceObject $FolderA -DifferenceObject $FolderB >> C:\CmpOut.txt 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T14:18:24.293

像这样使用 Comapre-Object 的 Passthru 标志：

```
Compare-Object -ReferenceObject $FolderA -DifferenceObject $FolderB -Passthru | % {$_.FullName}  >> C:\CmpOut.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T14:13:22.093

尝试这个：

```
Compare-Object -ReferenceObject $FolderA -DifferenceObject $FolderB  | 
select @{n="InputObject";e={ 
     if ($_.inputobject -is [system.io.directoryinfo]) 
     {([system.io.DirectoryInfo]$_.InputObject).fullname}
      else 
      { ([system.io.FileInfo]$_.InputObject).fullname}}},SideIndicator 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:32:44.883

管它通过`ForEach {$_.InputObject.FullName}`。

像这样：

```
Compare-Object -ReferenceObject $FolderA -DifferenceObject $FolderB | ForEach {$_.InputObject.FullName} 
```

# android - 通过 Facebook API 将消息发布到别人的墙（朋友的墙）？

> ID：14319947
> 
> 赞同：3
> 
> 时间：2013-01-14T14:04:39.627
> 
> 标签：android, ios, facebook, facebook-graph-api

Facebook 是否允许**用户 A使用移动应用在****用户 B 的**墙上发布内容（文本、图像或 URL） ？

我已经搜索了几天，但我在 Facebook API 文档中找不到任何关于它的信息。

为了清楚起见，我不需要在自己的墙上发布东西，而是使用 Facebook API 在我朋友的墙上发布东西。

我是否正确地说目前这是不可能/允许的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:47:03.743

使用这段代码发布到另一个用户的墙上。

```
Bundle postStatusMessage = new Bundle();

// ADD THE STATUS MESSAGE TO THE BUNDLE
postStatusMessage.putString("message", finalStatusMessage);

Utility.mAsyncRunner.request(userID + "/feed", postStatusMessage, "POST", new StatusUpdateListener(), null); 
```

您也可以使用上述代码上传*照片，如下所示：*

```
byte[] data = null;

ByteArrayOutputStream baos = new ByteArrayOutputStream();
Bitmap bmpImageCamera.compress(CompressFormat.JPEG, 100, baos);
data = baos.toByteArray();

Bundle postImgGallery = new Bundle();

// ADD THE PHOTO DATA TO THE BUNDLE
postImgGallery.putByteArray("photo", data); 
```

然后用它来检查结果。

```
private class StatusUpdateListener extends BaseRequestListener  {

    @Override
    public void onComplete(String response, Object state) {

    }

    @Override
    public void onFacebookError(FacebookError e, Object state) {

    }

} 
```

如果发布成功，`String response`在 onComplete() 中会给你一个帖子的 ID。

**注意 1：**以上代码使用较旧的 Facebook SDK（Pre v 3.x），因此如果您使用它，您必须调整代码以与新的 SDK 一起使用。它将需要一些小的更改。

**注 2：** Facebook 已计划停止让应用程序发布到其他用户墙的功能。来源：[https](https://developers.facebook.com/blog/post/2012/10/10/platform-updates--operation-developer-love/) ://developers.facebook.com/blog/post/2012/10/10/platform-updates--operation-developer-love/ 。展望未来，您将需要使用[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)选项。

# facebook - 从没有浏览器的设备登录

> ID：14319948
> 
> 赞同：0
> 
> 时间：2013-01-14T14:04:44.497
> 
> 标签：facebook, authentication, login

我正在开发在无法向用户显示浏览器的设备上运行的软件。我处于这样的[情况](http://facebook.stackoverflow.com/questions/2760676/facebook-open-graph-without-a-browser)。我会将这个软件与 Facebook 集成。我可以从用户那里获取用户名和密码，将此信息传递到我的服务器，然后使用屏幕抓取工具之类的工具从 Facebook 获取 HTML 并填写身份验证表单。

有什么好办法吗？有没有官方的方法来做这样的事情？

例如，我在 PSVita 的许多游戏中都看到过类似的行为......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:20:58.497

如果您使用 Java，可以尝试使用这个库： http: [//facebook4j.org/en/index.html](http://facebook4j.org/en/index.html)

我们面临的最大问题是身份验证，但是一旦你进入它应该很容易使用。

# xcode - 在编译期间检查编译器优化设置

> ID：14319949
> 
> 赞同：1
> 
> 时间：2013-01-14T14:04:49.767
> 
> 标签：xcode

我想在编译期间检查特定的编译器设置。我说的是在 xCode 中设置并由编译器使用的设置。

例如，我想检查此设置并有条件地编译代码

```
#if GCC_OPTIMIZATION_LEVEL == 0
    NSLog(@"No Optimization");
#else
    NSLog(@"Optimization enabled");
#endif 
```

上面的代码不起作用，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:59:00.757

有：

```
#define __OPTIMIZE__ 1 
```

`-O`每当设置为上述级别时，它似乎已设置`0`。如果`-O0`使用，则不设置此常量。

这是使用以下方法发现的：

```
$ gcc -O2 -dM -E - < /dev/null | grep -i opt 
```

和：

```
$ gcc -O0 -dM -E - < /dev/null | grep -i opt 
```

在 Linux 下。

# mysql - 触发器以防止在表上删除

> ID：14319950
> 
> 赞同：4
> 
> 时间：2013-01-14T14:04:51.900
> 
> 标签：mysql

如何防止删除 MySQL 5.1 中特定表的任何行？

我不需要任何 where 条件，我只是不想删除这些表中的任何行。

必须在 MySQL 级别完成，因为我们也使用购买的接受删除的软件。我们使用 MySQL 5.1.66-cll

我试图为此调整不同的触发器，但我无法成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:54:24.637

正如其他人在评论中提到的那样，执行此操作的正确方法通常是通过表级授权。

但是，可以根据您的要求使用触发器来完成。

一种方法是使用“删除前”触发器，并执行一个总是会导致错误的简单 SQL 语句。例如，您可以调用不存在的存储过程，如“do_not_delete”。

尝试这样的事情：

```
delimiter $$

drop trigger if exists tr_your_table_no_deletes $$

create trigger tr_your_table_no_deletes before delete on your_table for each row begin
  call do_not_delete();
end $$

delimiter ; 
```

# r - 识别向量中的 NULL

> ID：14319955
> 
> 赞同：2
> 
> 时间：2013-01-14T14:04:59.047
> 
> 标签：r, vector, null

考虑以下向量`a`

```
a <- c(NULL, 1, 2, "A", NULL, NA) 
```

我正在尝试识别`NULL`向量中的位置。但是，`NULL`不是字符串。我想知道为什么`is.null`不像`is.na`返回`NA`向量中 s 的位置那样工作。

```
> is.na(a)
[1] FALSE FALSE FALSE  TRUE
> is.null(a)
[1] FALSE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:09:00.980

该函数`is.null`用于检查对象是否与 相同`NULL`。这些`NULL`值不是向量的一部分，它们是“无”的。

因此，您的向量不包含任何`NULL`s，而仅包含其他值：

```
[1] "1" "2" "A" NA 
```

有关`NULL`用于创建向量的 s 的信息已丢失且无法检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:59:51.577

从 R[文档](http://cran.r-project.org/doc/manuals/r-release/R-lang.pdf)：

> NULL 当需要指示或指定对象**不存在时**使用它。

所以你无法识别向量中缺失的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:22:44.273

NULL 不能是向量的成员，只能是列表。NA 用于标记向量中的缺失数据。

NULL 是一个特殊的数据对象，它表示“这是未定义的”，并由具有未定义值的表达式和函数返回。

# javascript - AngularJS路由没有哈希'#'

> ID：14319967
> 
> 赞同：226
> 
> 时间：2013-01-14T14:06:02.100
> 
> 标签：javascript, angularjs

我正在学习 AngularJS，但有一件事让我很恼火。

我用来`$routeProvider`为我的应用程序声明路由规则：

```
$routeProvider.when('/test', {
  controller: TestCtrl,
  templateUrl: 'views/test.html'
})
.otherwise({ redirectTo: '/test' }); 
```

但是当我在浏览器中导航到我的应用程序时，我看到`app/#/test`的不是`app/test`.

所以我的问题是为什么 AngularJS 会将此哈希添加`#`到 url？有没有可能避免它？

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2013-01-14T14:36:01.890

事实上，对于非 HTML5 浏览器，您需要 #（井号标签）。

否则，他们只会在提到的 href 处对服务器进行 HTTP 调用。# 是一个旧的浏览器短路，它不会触发请求，它允许许多 js 框架在此之上构建自己的客户端重新路由。

如果可用，您可以使用`$locationProvider.html5Mode(true)`告诉 Angular 使用 HTML5 策略。

这里是支持 HTML5 策略的浏览器列表：http: [//caniuse.com/#feat=history](http://caniuse.com/#feat=history)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-07-28T15:21:53.313

如果您像其他人所说的那样启用了 html5mode，并创建一个`.htaccess`包含以下内容的文件（根据您的需要进行调整）：

```
RewriteEngine   On
RewriteBase     /
RewriteCond     %{REQUEST_URI} !^(/index\.php|/img|/js|/css|/robots\.txt|/favicon\.ico)
RewriteCond     %{REQUEST_FILENAME} !-f
RewriteCond     %{REQUEST_FILENAME} !-d
RewriteRule     ./index.html [L] 
```

当用户输入正确的路线时，他们将被引导到您的应用程序，您的应用程序将读取该路线并将他们带到其中的正确“页面”。

编辑：只要确保没有任何文件或目录名称与您的路线冲突。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-09-05T15:50:26.260

## 让我们写一个看起来简单而简短的答案

> 在最后的路由器中添加**html5Mode(true)** ;

```
app.config(function($routeProvider,$locationProvider) {

    $routeProvider.when('/home', {
        templateUrl:'/html/home.html'
    });

    $locationProvider.html5Mode(true);
}) 
```

> 在 html 头部添加**基本**标签

```
<html>
<head>
    <meta charset="utf-8">    
    <base href="/">
</head> 
```

感谢**@plus** - 详细说明上述答案

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2013-01-14T14:29:41.047

尝试

```
$locationProvider.html5Mode(true) 
```

更多信息在 [$locationProvider](http://docs.angularjs.org/api/ng.$locationProvider)
[使用 $location](http://docs.angularjs.org/guide/$location)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-12-07T19:26:56.110

以下信息来自：
[https ://scotch.io/quick-tips/pretty-urls-in-angularjs-removing-the-hashtag](https://scotch.io/quick-tips/pretty-urls-in-angularjs-removing-the-hashtag)

在 Angular 中获取干净的 URL 并从 URL 中删除主题标签非常容易。
默认情况下，AngularJS 将路由带有标签的 URL 例如：

*   [http://www.example.com](http://www.example.com)

*   [http://www.example.com/#/about](http://www.example.com/#/about)

*   [http://www.example.com/#/contact](http://www.example.com/#/contact)

有 2 件事需要做。

*   配置 $locationProvider

*   为相对链接设置我们的基础

*   $位置服务

在 Angular 中，$location 服务解析地址栏中的 URL 并对您的应用程序进行更改，反之亦然。

我强烈建议您阅读官方 Angular $location 文档，以了解定位服务及其提供的内容。

[https://docs.angularjs.org/api/ng/service/$location](https://docs.angularjs.org/api/ng/service/$location)

**$locationProvider 和 html5Mode**

*   我们将使用 $locationProvider 模块并将 html5Mode 设置为 true。
*   我们将在定义您的 Angular 应用程序和配置您的路由时执行此操作。

    ```
    angular.module('noHash', [])

    .config(function($routeProvider, $locationProvider) {

       $routeProvider
           .when('/', {
               templateUrl : 'partials/home.html',
               controller : mainController
           })
           .when('/about', {
               templateUrl : 'partials/about.html',
               controller : mainController
           })
           .when('/contact', {
               templateUrl : 'partials/contact.html',
               controller : mainController
           });

       // use the HTML5 History API
       $locationProvider.html5Mode(true); }); 
    ```

什么是 HTML5 历史 API？这是一种使用脚本来操作浏览器历史记录的标准化方法。这让 Angular 可以在不刷新页面的情况下更改页面的路由和 URL。有关这方面的更多信息，这里有一篇很好的 HTML5 History API 文章：

[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

**相对链接设置**

*   要使用相对链接链接您的应用程序，您需要`<base>`在`<head>`文档中设置。这可能在 Angular 应用程序的根 index.html 文件中。找到该`<base>`标签，并将其设置为您希望应用的根 URL。

例如：`<base href="/">`

*   还有很多其他方法可以配置它，设置为 true 的 HTML5 模式应该会自动解析相对链接。如果您的应用程序的根与 url 不同（例如 /my-base，则使用它作为您的基础。

**旧浏览器的回退**

*   对于不支持 HTML5 History API 的浏览器，$location 服务将自动回退到 hashbang 方法。
*   这对您来说是透明的，您无需对其进行任何配置即可工作。从 Angular $location 文档中，您可以看到后备方法及其工作原理。

**综上所述**

*   这是获取漂亮 URL 并在 Angular 应用程序中删除主题标签的简单方法。玩得开心制作那些超级干净和超级快速的 Angular 应用程序！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-11T08:29:44.913

![](../Images/c6f2f87565ebb23c334a840d478e71cf.png)

使用 HTML5 模式需要在服务器端重写 URL，基本上你必须重写所有指向应用程序入口点的链接（例如 index.html）。在这种情况下，需要一个`<base>`标签也很重要，因为它允许 AngularJS 区分作为应用程序基础的 url 部分和应该由应用程序处理的路径。有关更多信息，请参阅[AngularJS 开发人员指南 - 使用 $location HTML5 模式服务器端](https://docs.angularjs.org/guide/$location#server-side)。

* * *

# 更新

# 如何：配置您的服务器以使用 html5Mode ^([1](https://github.com/angular-ui/ui-router/wiki/Frequently-Asked-Questions#how-to-configure-your-server-to-work-with-html5mode))

启用 html5Mode 后，`#`您的网址中将不再使用该字符。该`#`符号很有用，因为它不需要服务器端配置。没有`#`， url 看起来更好，但它也需要服务器端重写。这里有些例子：

## Apache 重写

```
<VirtualHost *:80>
    ServerName my-app

    DocumentRoot /path/to/app

    <Directory /path/to/app>
        RewriteEngine on

        # Don't rewrite files or directories
        RewriteCond %{REQUEST_FILENAME} -f [OR]
        RewriteCond %{REQUEST_FILENAME} -d
        RewriteRule ^ - [L]

        # Rewrite everything else to index.html to allow html5 state links
        RewriteRule ^ index.html [L]
    </Directory>
</VirtualHost> 
```

## Nginx 重写

```
server {
    server_name my-app;

    index index.html;

    root /path/to/app;

    location / {
        try_files $uri $uri/ /index.html;
    }
} 
```

## Azure IIS 重写

```
<system.webServer>
  <rewrite>
    <rules> 
      <rule name="Main Rule" stopProcessing="true">
        <match url=".*" />
        <conditions logicalGrouping="MatchAll">
          <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
          <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
        <action type="Rewrite" url="/" />
      </rule>
    </rules>
  </rewrite>
</system.webServer> 
```

## 快速重写

```
var express = require('express');
var app = express();

app.use('/js', express.static(__dirname + '/js'));
app.use('/dist', express.static(__dirname + '/../dist'));
app.use('/css', express.static(__dirname + '/css'));
app.use('/partials', express.static(__dirname + '/partials'));

app.all('/*', function(req, res, next) {
    // Just send the index.html for other files to support HTML5Mode
    res.sendFile('index.html', { root: __dirname });
});

app.listen(3006); //the port you want to use 
```

也可以看看

*   [HTML5 模式与 Hash 模式 AngularJS 的优缺点](https://stackoverflow.com/questions/25674013/advantages-disadvantages-of-html5-mode-vs-hash-mode-angularjs)
*   [AngularJS - 如何关闭 hashbang 模式](https://stackoverflow.com/questions/26549724/angularjs-how-to-turn-off-hashbang-mode)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-01-31T16:19:28.447

如果您想在 OS X 10.8 上本地配置此功能，使用 Apache 为 Angular 提供服务，那么您可能会在 .htaccess 文件中找到以下帮助：

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On
    RewriteBase /~yourusername/appname/public/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !.*\.(css|js|html|png|jpg|jpeg|gif|txt)
    RewriteRule (.*) index.html [L]
</IfModule> 
```

如果未设置选项 +FollowSymlinks 可能会在日志中给您一个禁止的错误，如下所示：

```
Options FollowSymLinks or SymLinksIfOwnerMatch is off which implies that RewriteRule directive is forbidden 
```

需要重写基础，否则请求将被解析到您的服务器根目录，默认情况下本地不是您的项目目录，除非您专门配置了虚拟主机，因此您需要设置路径，以便请求找到您的项目根目录。例如，在我的机器上，我有一个 /Users/me/Sites 目录，用于保存我的所有项目。就像旧的 OS X 设置一样。

接下来的两行有效地说明了路径是否不是目录或文件，因此您需要确保没有与您的应用程序路由路径相同的文件或目录。

下一个条件表示如果请求没有以指定的文件扩展名结尾，那么在此处添加您需要的内容

最后一个 [L] 表示为 index.html 文件提供服务——您的应用程序用于处理所有其他请求。

如果您仍然有问题，请检查 apache 日志，它可能会给您有用的提示：

```
/private/var/log/apache2/error_log 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-30T03:12:10.223

在 Angular 6 中，您可以使用路由器：

```
RouterModule.forRoot(routes, { useHash: false }) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-27T14:27:18.183

您还可以使用以下代码重定向到主页（主页）：

```
{ path: '', redirectTo: 'home', pathMatch: 'full'} 
```

如上所述指定重定向后，您可以重定向其他页面，例如：

```
{ path: 'add-new-registration', component: AddNewRegistrationComponent},
{ path: 'view-registration', component: ViewRegistrationComponent},
{ path: 'home', component: HomeComponent} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-27T12:55:48.340

**

> 建议在 Angular 中使用 HTML 5 风格（PathLocationStrategy）作为定位策略

** **因为**

1.  它生成干净且对 SEO 友好的 URL，使用户更容易理解和记住。
2.  您可以利用服务器端渲染的优势，这将使我们的应用程序加载更快，方法是先在服务器中渲染页面，然后再将其交付给客户端。

> 仅当您必须支持旧版浏览器时才使用 Hashlocationstrtegy。
> 
> [点击这里了解更多](https://mahendrawaykos.blogspot.in/2017/12/location-strategies-in-angular-router.html)

# ios - 从superview转换点时委托不起作用

> ID：14319978
> 
> 赞同：0
> 
> 时间：2013-01-14T14:06:21.853
> 
> 标签：ios, objective-c

我被一个问题困扰了几天，我认为是时候寻求帮助了。

我有一个 UIView 类“BonusObjects”，它被设置为 ViewController 的委托。

我在这个类中添加了一些 UIImageViews，开始使用 NSTimer 将它们移向屏幕边缘，并尝试查看它们是否与 ViewController.m 中的 UIImageView 相交。我将目标对象的坐标作为 int 获取，并检查 BonusObjects 中图像的 X 和 Y 是否在目标附近。

由于来自 BonusObject 的图像具有 X=0，我必须从超级视图转换它们的坐标。像那样：

```
CGPoint newPoint = [[self superview]convertPoint:internal.center 
                                        fromView:[internal superview]];

bonusX= newPoint.x; 
```

**这是实际的问题**`if`：为什么委托在此语句中不起作用：

```
if (padX < bonusX && bonusX < padX+40 && padY <= internal.frame.origin.y) {

    [[self delegate] bonusEffect:internal.tag];

    [internal removeFromSuperview];
    internal=NULL;
} 
```

但是如果我把它从 if 中去掉，或者将 bonusX 更改为某个不是从超级视图中获取的随机值，它就会起作用。

如果工作正常，其他所有内容 - 它会删除图像，并显示正确的 .tag 值。

如果需要，我可以提供更多代码。

**编辑**： 代表`(null)`在其中`if`，但在它之外`<ViewController: 0xc03e600>`。

**EDIT2**：这是我设置委托的方式：

在 BonusObjects.h

```
@protocol BonusDelegate

-(void)bonusEffect:(int)effect;

@end

@interface BonusObjects : UIView <UIApplicationDelegate> {

    id <BonusDelegate> delegate;
     } @property (nonatomic)  id <BonusDelegate> delegate; 
```

在 ViewController.h 中：

```
#import "BonusObjects.h"

@interface ViewController : UIViewController <BonusDelegate, ADBannerViewDelegate> {

     BonusObject *bonusView;
       } 
```

在 ViewController.m 中：

```
 bonusView = [[BonusObjects alloc] init];
 [bonusView setDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:26:19.413

`(padX < bonusX && bonusX < padX)`总会失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:17:28.963

我得到了它。在我创建 BonusObject 的 ViewController.m 中，我必须将该对象的委托设置为 self。

```
BonusObjects *newObj = [[BonusObjects alloc] initWithFrame:objRect];
        newObj.delegate=self;
        [self.view addSubview:newObj]; 
```

我`delegate`将视图的 设置为`self`，但不是对象本身。现在就像一个魅力。谢谢大家！

# wpf - 将图标放在 XAML（WPF）中的文本框中

> ID：14319981
> 
> 赞同：2
> 
> 时间：2013-01-14T14:06:43.003
> 
> 标签：wpf, textbox, icons

我想在文本框的角落放一个小图标（一个 png 文件）。我的意思的草图在[http://dosketch.com/view.php?k=mIPeHLSBLx0e2YpoVpYO](http://dosketch.com/view.php?k=mIPeHLSBLx0e2YpoVpYO)

到目前为止，我有（在我的主要 xaml 文件中）

```
<TextBox Style="{StaticResource IconTextBox"} ... 
```

在我的资源区：

```
<Style x:Key="IconTextBox" TargetType="TextBox">
 <Setter Property="Template">
  <Setter.Value>
   <ControlTemplate TargetType="TextBox">
     <Image Source="icon.png" />
   </ControlTemplate>
  </Setter.Value>
 </Setter>
</Style> 
```

显然这是行不通的（我一开始就失去了文本框！）。理想情况下，当用户在文本框中输入内容时，文本不会与图像重叠 - 但目前我很乐意在文本框中获取图像。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:50:48.113

我不会覆盖模板，而是创建一个新的简单 UserControl：

```
//pseudocode, does not compile!
<UserControl x:Class="MyUserControl" x:Name="root">
    <Grid>
        <!-- put some effort in aligning the items so it looks nice -->
        <TextBox Text="{Binding ElementName=root, Path=Text}" />
        <Image Source="{Binding ElementName=root, Path=IconSource}" />
    </Grid>
</UserControl>

public class MyUserControl : UserControl{
    dependencyproperty string Text;
    dependencyproperty string IconSource;
} 
```

所以你可以按如下方式使用它：

```
<my:MyUserControl Text="{Binding MyText}" IconSource="{Binding MyIcon}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:13:00.830

不幸的是，每当您想更改 WPF 中控件的模板时，您将不得不覆盖整个模板，您不能只修改其中的一小部分。

幸运的是，所有模板都是公开可用的。例如，这是[文本框的默认模板](http://msdn.microsoft.com/en-us/library/ms752068.aspx)。

因此，要将图像添加到文本框，请从上面的链接中获取整个文本框模板，然后将图像添加到您认为合适的任何位置...

正如评论中所指出的，您*不必*覆盖文本框的所有属性，只需覆盖`Template`属性即可。这可以使用`BasedOn`属性轻松完成：

```
<Style x:Key="IconTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
   <Setter Property="Template">
       ....
   </Setter>
</Style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:11:08.313

您实际上可以在要创建的文本框样式中添加一个文本框，这实际上不会为您提供可以更改源的图像，因为它将被硬编码到 xaml 中，我想您可以创建传递该信息的附加属性。

无论如何，重要的部分是，如果您想在文本框样式内使用文本框，则必须将内部文本框样式设置为 {x:null}。

```
 <Style TargetType="TextBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{x:Null}" Grid.Column="0" 
                                       Text="{TemplateBinding Text}"
                                       Foreground="{TemplateBinding Foreground}"                                           
                                       Background="{TemplateBinding Background}" 
                                       FontFamily="{TemplateBinding FontFamily}"
                                       FontSize="{TemplateBinding FontSize}"
                                       FontWeight="{TemplateBinding FontWeight}"/>

                            <Image Grid.Column="1" Source=">Insert your image source here."/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

# c# - C# 中的自定义 Excel 函数始终处于禁用状态

> ID：14319982
> 
> 赞同：0
> 
> 时间：2013-01-14T14:06:44.160
> 
> 标签：c#, com, excel-addins, excel-dna

我正在尝试在 C# 中创建一个自定义 Excel 函数（我希望将报告数据从 Web API 提取到 Excel 中）。但是，当我进入 Excel 时，我可以添加新的自动化插件，但它列在“非活动应用程序插件”下，这里出了什么问题？

我根据[这篇博](http://blogs.msdn.com/b/gabhan_berry/archive/2008/04/07/writing-custom-excel-worksheet-functions-in-c_2d00_sharp.aspx)文创建了一个 COM 自动化插件。我的源代码[在 Github 上](https://github.com/jonathansewell/JS.Functions)。

我正在使用 Visual Studio 2010 和 Excel 2010 64 位（版本 14.0）的 Window 7 64 位机器上工作。我的项目设置为 x64 构建配置，使用 .NET Framework 4。

我正在使用一个界面：

```
namespace JS.Formulas
{
    public interface IFunctions
    {
        double JsAdd(double a, double b);
    }
} 
```

和班级：

```
using System;
using System.Runtime.InteropServices;
using Microsoft.Win32;

namespace JS.Formulas
{
    [ComDefaultInterface(typeof(IFunctions))]
    [Guid("652496B2-6F14-461B-98AF-D86B1BD5F439")]
    public class Functions : IFunctions
    {
        [ComRegisterFunction]
        public static void RegisterFunction(Type type)
        {
            string subkey = @"CLSID\{" + type.GUID.ToString().ToUpper() + @"}\Programmable";
            Registry.ClassesRoot.CreateSubKey(subkey);

            var key = Registry.ClassesRoot.OpenSubKey(@"CLSID\{" + type.GUID.ToString().ToUpper() + @"}\InprocServer32", true);
            if (key != null)
            {
                key.SetValue("", String.Format("{0}\\mscoree.dll", Environment.SystemDirectory), RegistryValueKind.String);
            }
        }

        [ComUnregisterFunction]
        public static void UnregisterFunction(Type type)
        {
            string subkey = @"CLSID\{" + type.GUID.ToString().ToUpper() + @"}\Programmable";
            Registry.ClassesRoot.DeleteSubKey(subkey, false);
        }

        public double JsAdd(double a, double b)
        {
            return a + b;
        }
    }
} 
```

我已经设置了一个构建后事件来使用 64 位版本的 regasm 注册组件，如下所示： "%Windir%\Microsoft.NET\Framework64\v4.0.30319\regasm" "$(TargetPath)"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:49:19.553

我决定为此使用[Excel DNA 项目](http://excel-dna.net)。花了 5 分钟让我的自定义功能正常工作，文档也很清晰（浏览 MSDN 文档后令人耳目一新）。

# indexing - Sitecore 索引错误 - 未定义根项目

> ID：14319983
> 
> 赞同：0
> 
> 时间：2013-01-14T14:06:44.197
> 
> 标签：indexing, sitecore

任何有关以下问题的帮助将不胜感激。我们正在为 sitecore CMS 使用 Advance 数据库爬虫，它内部使用 Lucene.NET。

当我们尝试登录到 sitecore 的桌面时，出现以下错误

```
Heartbeat 16:23:24 ERROR Exception in alarm clock event subscriber.
Exception: System.Reflection.TargetInvocationException
Message: Exception has been thrown by the target of an invocation.
Source: mscorlib
   at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
   at Sitecore.Configuration.Factory.AssignProperties(Object obj, Object[] properties)
   at Sitecore.Configuration.Factory.AssignProperties(XmlNode configNode, String[] parameters, Object obj, Boolean assert, Boolean deferred, IFactoryHelper helper)
   at Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper)
   at Sitecore.Configuration.Factory.GetInnerObject(XmlNode paramNode, String[] parameters, Boolean assert)
   at Sitecore.Configuration.Factory.AssignProperties(XmlNode configNode, String[] parameters, Object obj, Boolean assert, Boolean deferred, IFactoryHelper helper)
   at Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper)
   at Sitecore.Configuration.Factory.CreateObject(String configPath, String[] parameters, Boolean assert)
   at Sitecore.Search.SearchManager.get_SearchConfiguration()
   at Sitecore.Data.Managers.IndexingManager.UpdateIndexAsync(Database database)
   at Sitecore.Data.Managers.IndexingManager.AlarmClock_Ring(Object sender, EventArgs args)
   at Sitecore.Services.AlarmClock.Heartbeat_Beat(Object sender, EventArgs e) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:32:02.077

我看到此错误发生的最常见原因是您已为主数据库和 Web 数据库配置了索引，但尚未将内容树发布到 Web。

故障排除步骤：删除索引配置文件。登录到sitecore并确保根路径存在于master中。如果配置文件包含“web”索引定义，请将根路径（至少）发布到“web”。放回索引配置文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:18:46.053

假设您发布了错误的堆栈跟踪并且您得到的错误是“未定义根项目”，您应该检查您的配置并找到该元素：

```
search/configuration/indexes/index/locations/<any name here>/Root 
```

可以有更多这些节点（每个索引可以有多个位置节点）。

在您的情况下，这些 Root 节点中至少有一个包含不存在的 Sitecore 路径。将其指向现有项目，它将起作用。

您可能已经复制了 Advanced Database Crawler 附带的配置，而没有对其进行修改以适应您的环境。

# php - 带有 zend 1 的学说 2 给出“类 xxx 不是有效实体或映射的超类”

> ID：14319988
> 
> 赞同：0
> 
> 时间：2013-01-14T14:07:06.223
> 
> 标签：php, zend-framework, doctrine-orm

当我尝试添加带有教义的记录时，我收到此错误消息“消息：类“Application_Model_MbsUsers”不是有效实体或映射的超类。

这是我使用的代码

```
require APPLICATION_PATH . '/' . 'models/Application_Model_MbsUsers.php';
    $user = new Application_Model_MbsUsers;

    $user->setDisplayName( 'moahemd' );
    $user->setUserLogin( 'adminss' );
    $user->setUserPass( 'password' );
    $user->setUserActivationKey( 'aass' );
    $user->setUserRegistered( null );
    $user->setUserEmail( 'eng.sda@yahoo.com' );
    $user->setUserRole( 'admin' );

    $this->getRequest()->_em->persist( $user );
    $this->getRequest()->_em->flush(); 
```

我把我的实体放在模型文件夹'application\models'中

这是我的引导代码

```
protected function _initDoctrine()
{
    # doctrine loader
    require_once (APPLICATION_PATH .
            DIRECTORY_SEPARATOR . '..' .
            DIRECTORY_SEPARATOR . 'library' .
            DIRECTORY_SEPARATOR . 'Doctrine' .
            DIRECTORY_SEPARATOR . 'Common' .
            DIRECTORY_SEPARATOR . 'ClassLoader.php'
    );
    $doctrineAutoloader = new \Doctrine\Common\ClassLoader('Doctrine', APPLICATION_PATH .
    DIRECTORY_SEPARATOR . '..' .
    DIRECTORY_SEPARATOR . 'library'
    );
    $doctrineAutoloader->register();

    # configure doctrine
    $cache  = new Doctrine\Common\Cache\ArrayCache;
    $config = new Configuration;
    $config->setMetadataCacheImpl( $cache );

    echo APPLICATION_PATH . DIRECTORY_SEPARATOR . 'models';
    $driverImpl = $config->newDefaultAnnotationDriver( APPLICATION_PATH . DIRECTORY_SEPARATOR . 'models' );
    $config->setMetadataDriverImpl( $driverImpl );
    $config->setQueryCacheImpl( $cache );
    $config->setProxyDir( APPLICATION_PATH );
    $config->setProxyNamespace( 'Proxies' );
    $config->setAutoGenerateProxyClasses( TRUE );

    $this->_registry->doctrine      = new stdClass();
    $this->_registry->doctrine->_em = EntityManager::create( $this->_registry->config->application->doctrine->connection->toArray(), $config );

} 
```

和我的实体

使用 Doctrine\ORM\Mapping 作为 ORM；

```
/**
 * Application_Model_MbsUsers
 *
 * @ORM\Table(name="mbs_users")
 * @ORM\Entity
 */
class Application_Model_MbsUsers
{
/**
 * @var string
 *
 * @ORM\Column(name="user_login", type="string", length=64, nullable=false)
 */
private $userLogin;

/**
 * @var string
 *
 * @ORM\Column(name="user_pass", type="string", length=64, nullable=false)
 */
private $userPass; 
```

......

我想知道为什么会出现这个问题，我用谷歌搜索并找不到解决方案，所以你能帮助我的人吗......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:39:26.523

我解决了伙计们，问题出在实体类中的@ORM\ 中，我将其删除，现在可以正常工作了，谢谢

# django - Django 1.4：管理员不使用 STATIC_URL

> ID：14319989
> 
> 赞同：0
> 
> 时间：2013-01-14T14:07:06.567
> 
> 标签：django, django-admin, django-staticfiles, django-1.4

我已经将我的 Django 从 1.3 升级到 1.4，并使用`django.contrib.staticfiles`. 我必须将其更改`ADMIN_MEDIA_PREFIX`为仅使用`STATIC_URL`，其定义为`STATIC_URL = '/static/'`

当我打开管理界面时，css 文件链接到 /admin/css/base.css，但是，如果我是正确的，它们应该指向 static/admin/css/base.css

不知道为什么我的管理界面省略了`static_url`.

谢谢！

# spring - sessionFactory bean 在“持久性”元素上失败

> ID：14319990
> 
> 赞同：0
> 
> 时间：2013-01-14T14:07:08.427
> 
> 标签：spring, hibernate, persistent

首先，我知道有很多关于创建 sessionFactory bean 的问题，但不幸的是我没有找到任何适合我的解决方案。

这是堆栈跟踪中的整个异常：

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.InvalidMappingException: Unable to read XML
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.hibernate.InvalidMappingException: Unable to read XML
    at org.hibernate.util.xml.MappingReader.readMappingDocument(MappingReader.java:101)
    at org.hibernate.cfg.Configuration.add(Configuration.java:513)
    at org.hibernate.cfg.Configuration.add(Configuration.java:509)
    at org.hibernate.cfg.Configuration.add(Configuration.java:716)
    at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:756)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:611)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 22 more
Caused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'persistence'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1916)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:705)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3104)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:922)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.dom4j.io.SAXReader.read(SAXReader.java:465)
    at org.hibernate.util.xml.MappingReader.readMappingDocument(MappingReader.java:75)
    ... 29 more
14.1.2013 14:50:05 org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.InvalidMappingException: Unable to read XML
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.hibernate.InvalidMappingException: Unable to read XML
    at org.hibernate.util.xml.MappingReader.readMappingDocument(MappingReader.java:101)
    at org.hibernate.cfg.Configuration.add(Configuration.java:513)
    at org.hibernate.cfg.Configuration.add(Configuration.java:509)
    at org.hibernate.cfg.Configuration.add(Configuration.java:716)
    at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:756)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:611)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 22 more
Caused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'persistence'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1916)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:705)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3104)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:922)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.dom4j.io.SAXReader.read(SAXReader.java:465)
    at org.hibernate.util.xml.MappingReader.readMappingDocument(MappingReader.java:75)
    ... 29 more 
```

我的**web.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="ISMWebApp" version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>ISM</display-name>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>ISM</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/applicationContext.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>ISM</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>   
</web-app> 
```

我的**applicationContext.xml**：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:context="http://www.springframework.org/schema/context"
           xmlns:mvc="http://www.springframework.org/schema/mvc"
           xsi:schemaLocation="http://www.springframework.org/schema/beans
                               http://www.springframework.org/schema/beans/spring-beans.xsd
                               http://www.springframework.org/schema/context
                               http://www.springframework.org/schema/context/spring-context.xsd
                               http://www.springframework.org/schema/mvc
                               http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

        <context:component-scan base-package="sk.tuke.ism"/>

        <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
            <property name="prefix" value="/WEB-INF/jsp/"/>
            <property name="suffix" value=".jsp"/>
            <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        </bean>

        <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <property name="driverClassName" value="org.apache.derby.jdbc.ClientDriver"/>
            <property name="url" value="jdbc:derby://localhost:1527/studijne_materialy"/>
            <property name="username" value="admin"/>
            <property name="password" value="admin"/>
        </bean>

        <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
            <property name="dataSource" ref="dataSource"/>
            <property name="mappingLocations" value="META-INF/persistence.xml"/>
        </bean>
        <mvc:annotation-driven/>
        <mvc:default-servlet-handler/>
        <mvc:resources mapping="public/**" location="/public/**"/>

    </beans> 
```

最后一个我认为很重要的文件 - **META-INF/persistence.xml**：

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">

    <persistence-unit name="StudijneMaterialyUnit">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.connection.url" value="jdbc:derby://localhost:1527/studijne_materialy"/>
            <property name="hibernate.connection.driver_class" value="org.apache.derby.jdbc.ClientDriver"/>
            <property name="hibernate.connection.username" value="admin"/>
            <property name="hibernate.connection.password" value="admin"/>
            <property name="hibernate.archive.autodetection" value="class"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hbm2ddl.auto" value="update"/>
        </properties>
    </persistence-unit>
</persistence> 
```

感谢您的时间和建议，我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:19:56.073

`persistence.xml`不是 Hibernate 映射（即`.hbm.xml`）。

此外，由于您使用`SessionFactory`（不是 JPA），因此您根本不应该使用`persistence.xml`。

您需要`mappingLocations`从配置中删除并配置适当的属性[`AnnotationSessionFactoryBean`](http://static.springsource.org/spring/docs/3.2.0.RELEASE/javadoc-api/org/springframework/orm/hibernate3/annotation/AnnotationSessionFactoryBean.html)：

*   `packagesToScan`或`annotatedClasses`配置您的实体的位置
*   `hibernateProperties`，等等`hibernate.show_sql`_`hbm2ddl.auto`

此外，您不需要`hibernate.connection.*`属性，因为您已经在`DriverManagerDataSource`.

# html - 如何使滚动条与文本对齐？

> ID：14319995
> 
> 赞同：0
> 
> 时间：2013-01-14T14:07:28.930
> 
> 标签：html, css

在下面的小提琴中，滚动条位于小提琴的顶部。我需要滚动条与文本的第一个元素处于同一水平，但还要将滚动条垂直向下移动 40 像素。

[http://jsfiddle.net/ebLSe/7/](http://jsfiddle.net/ebLSe/7/)

是否有一个 css 选项可以将滚动条与自身对齐？

小提琴代码：

```
 <div class="scroll">
    <table  >
      <tr><td>
        test
        </tr></td>
        <tr><td>
        test
        </tr></td>
        <tr><td>
        test
        </tr></td>
        <tr><td>
        test
        </tr></td>
      </table>
    </div>

   .scroll {
    height: 80px;
    overflow-y:scroll;
}

.modeDown {
  padding-top: 100px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:12:44.933

您的文本位于 div 下方，因为您已经给出`.scroll`了`40px`. 如果您更改此值，您的文本将进一步向上移动 div。您可能还需要更改高度，因为此时您的 div 的高度为 80 像素（40 像素高度加上 40 像素填充）。

要将 div 保持在页面下方，您需要添加`margin-top:40px`到`.scroll`或您可以将其放入额外的 div 中，顶部填充为 40px

```
.scroll {
    margin-top:40px;
    height: 80px;
    overflow-y: scroll;
} 
```

# android - NullPointerException getDefaultSharedPreferences / getDefaultSharedPreferencesName

> ID：14319997
> 
> 赞同：0
> 
> 时间：2013-01-14T14:07:32.270
> 
> 标签：android, nullpointerexception, sharedpreferences

我有一个带有 ViewPager 的 Android 应用程序，它允许在选项卡之间滑动。当我在选项卡之间滑动时，我调用新活动片段中的函数来更新该片段上的文本，它有时会抛出一个`NullPointerException`但我无法在我的设备上复制它。想知道是否有人可以查看下面的代码和堆栈跟踪并可能提供帮助 - 将不胜感激。我不确定我是否遗漏了什么或没有正确执行此操作？

今天早上我的第一个想法是，也许我应该在一个单独的线程上运行它，以免干扰主 UI 线程，或者尝试/捕获这些函数，因为它们似乎只是有时会使应用程序崩溃？提前致谢。

**查看寻呼机代码**

```
public void onTabChanged(String tag) {
        //TabInfo newTab = this.mapTabInfo.get(tag);
        int pos = this.mTabHost.getCurrentTab();
        mTabHost.getCurrentTabView().invalidate();
        this.mViewPager.setCurrentItem(pos);

    // calculatePoints on TabChange
    if (pos == 1) {
        TabFragment2 fragTrack = (TabFragment2) fragments.get(1);
        fragTrack.calculatePoints();
        fragTrack.createAndFillDatabase();
    }

    else if (pos == 2) {
        TabFragment3 fragFoodList = (TabFragment3) fragments.get(2);
        fragFoodList.createAndFillDatabase("none");
    }

    this.supportInvalidateOptionsMenu();
} 
```

**计算点（）**

```
public void calculatePoints() {
        int prefDailyPoints, prefPointsUsed, prefPointsRemain, prefBonusPoints, prefBonusUsed, prefBonusPointsRemain;

        // Get points values and fill in respective fields
        appSettings = PreferenceManager.getDefaultSharedPreferences(currentActivity);
        nonDBData = currentActivity.getSharedPreferences(NONDB_DATA, 0);

        prefDailyPoints = Integer.parseInt(appSettings.getString("pointsAllowed", "0"));
        prefPointsUsed = nonDBData.getInt("pointsUsed", 0);
        //prefPointsRemain = nonDBData.getInt("pointsRemain", prefDailyPoints - prefPointsUsed);
        prefPointsRemain = prefDailyPoints - prefPointsUsed;

        textfieldPointsDaily.setText(Integer.toString(prefDailyPoints));
        textfieldPointsUsed.setText(Integer.toString(prefPointsUsed));
        textfieldPointsRemain.setText(Integer.toString(prefPointsRemain));

        if (prefPointsRemain < 0) {
                textfieldPointsRemain.setTextColor(Color.rgb(255, 0, 0));
                textfieldPointsRemain.setTypeface(null, Typeface.BOLD);
        }
        else {
                textfieldPointsRemain.setTextColor(Color.rgb(0, 0, 0));
                textfieldPointsRemain.setTypeface(null, Typeface.NORMAL);
        }
} 
```

**堆栈跟踪**

```
java.lang.NullPointerException 
at android.preference.PreferenceManager.getDefaultSharedPreferencesName(PreferenceManager.java:371)
at android.preference.PreferenceManager.getDefaultSharedPreferences(PreferenceManager.java:366)
at com.mattdonders.android.wppcalculator.TabFragment2.calculatePoints(TabFragment2.java:667)
at com.mattdonders.android.wppcalculator.TabsViewPagerFragmentActivity.onTabChanged(TabsViewPagerFragmentActivity.java:483)
at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:446)
at android.widget.TabHost.setCurrentTab(TabHost.java:431) 
at com.mattdonders.android.wppcalculator.TabsViewPagerFragmentActivity.onPageSelected(TabsViewPagerFragmentActivity.java:511)
at android.support.v4.view.ViewPager.scrollToItem(ViewPager.java:539)
at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:524)
at android.support.v4.view.ViewPager.onTouchEvent(ViewPager.java:1941)
at android.view.View.dispatchTouchEvent(View.java:7239) 
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903) 
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917) 
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917) 
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917) 
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917) 
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917) 
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917) 
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
at android.app.Activity.dispatchTouchEvent(Activity.java:2410) 
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
at android.view.View.dispatchPointerEvent(View.java:7419) 
at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
at android.os.MessageQueue.nativePollOnce(Native Method) 
at android.os.MessageQueue.next(MessageQueue.java:125) 
at android.os.Looper.loop(Looper.java:124)
at android.app.ActivityThread.main(ActivityThread.java:5039) 
at java.lang.reflect.Method.invokeNative(Native Method) 
at java.lang.reflect.Method.invoke(Method.java:511) 
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:05:26.587

我更改了代码以检测`userVisibleHint`Android 团队在 2012 年年中修复了哪些代码。这 100% 有效并解决了我的问题 - 谢谢大家！

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);

    if (isVisibleToUser == true) { 
        // TO-DO
    }
    else if (isVisibleToUser == false) {
        // TO-DO
    }

} 
```

* * *

> Android 支持库（第 11 版）[最终修复了用户可见提示问题](https://github.com/android/platform_frameworks_support/commit/bf7974e46b008ffa4a16c61386735c4817d343aa)，现在如果您将支持库用于片段，那么您可以安全地使用 getUserVisibleHint() 或覆盖 setUserVisibleHint() 来捕获gorn 回答中描述的更改。