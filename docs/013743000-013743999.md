# StackOverflow 问答 13743000-13743999

# haskell - Snap：带有抢劫的内/外循环

> ID：13743000
> 
> 赞同：2
> 
> 时间：2012-12-06T11:49:17.207
> 
> 标签：haskell, haskell-snap-framework

我不确定我是否正确地表述了标题中的问题，但情况就是这样。当表字段（模式）仅在运行时可用时，我需要创建一个带有抢劫的动态表。所以通常，当架构在编译时已知时，我会做这样的事情：

```
<table>
  <row-splice>
    <tr>
      <td> <field1/> </td>
      <td> <field2/> </td>
      <td> <field3/> </td>
    </tr>
  </row-splice>
</table> 
```

那是我在编译时知道字段数量及其名称的时候。我了解如何使用“runChildrenWith”、“mapSplices”等处理处理程序中的所有内容......

现在我处于字段和模式的数量仅在运行时可用的情况。因此，据我了解，抢劫模板如下所示：

```
<table>
  <row-splice>
    <tr>
      <field-splice>
      <td> <field/> </td>
      </field-splice>
    </tr>
  </row-splice>
</table> 
```

我真的很困惑如何在处理程序中实现它。我想我需要做两次“mapSplices”——一个在另一个里面，对吗？所以，从经验上讲，这将是一个内部和外部循环/映射，对吗？

我将如何在处理程序中执行此操作？

谢谢。

更新：

忘了提一下，可以在运行时从数据库中检索模式，并且可以作为：

```
Table { tableName   :: Text
      , tableFields :: [Text]
      } 
```

但它并不是真正需要的，因为数据来自无模式的 mongodb 并转换为 Map：

```
fromList [("FieldName1","Value1"),("FieldName2","Value2"),("FieldName3","Value3")] 
```

更新2：

我尝试了建议的示例，但没有成功，我只是将所有数据放在一个列中。我只需要一个简单的内部和外部循环来动态生成字段和行。再简单不过了：

```
<% @rows.each do |row| %>
  <tr>
  <% row.each do |field| %>
    <td> <%= field %> </td> 
  <% end %>
  </tr>
<% end %> 
```

更新3：

经过一个漫长的周末休息后，我终于破解了它......这是一个例子。它是特定于 mongodb 的，我实际上只是复制并粘贴了它。但是，我想，如果有人陷入内/外循环，那会很有帮助。

```
showTableH :: AppHandler ()
showTableH = do
  table <- liftIO $ fetchTable tname
  docs <- liftIO $ getColList tname
  let rowSplice doc = mapSplices (\f -> fieldSplice $ T.pack $ at f doc) (tableFields table)
    where fieldSplice field = runChildrenWithText [("field", field)]
  let listRowsSplice = mapSplices (\d -> runChildrenWith [("fields", rowSplice d)]) docs
  heistLocal (bindSplices [("rows", listRowsSplice)]) $ render "show-table" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:18:40.093

我认为这里的关键是使用 mapSplices 和 runChildrenWith。我认为它看起来像这样：

```
rowSplice = do
    rows <- lift getRowsFromDB
    mapSplices (\row -> runChildrenWith [("field-splice", fieldSplice row)]) rows
fieldSplice rowId = do
    fields <- lift $ getFieldsFromDB rowId
    mapSplices (\f -> runChildrenWith [("field", fieldToText f)]) fields 
```

# c# - 使用 C#.net 中的数据表将数据插入数据集中

> ID：13743007
> 
> 赞同：5
> 
> 时间：2012-12-06T11:49:32.933
> 
> 标签：c#, .net, crystal-reports, dataset

我正在使用数据集在不使用 SQL 服务器的情况下在水晶报表上显示数据。

我的问题是数据没有插入到表中。

这是我的代码：

```
try
{
    DataSet2 ds1 = new DataSet2();             
    DataTable t1 = ds1.Tables.Add("report1");
    t1.Columns.Add("mtrno", Type.GetType("System.String"));
    t1.Columns.Add("pf1", Type.GetType("System.String"));
    t1.Columns.Add("pf2", Type.GetType("System.String"));
    t1.Columns.Add("pf3", Type.GetType("System.String"));
    t1.Columns.Add("pf4", Type.GetType("System.String"));
    t1.Columns.Add("pf5", Type.GetType("System.String"));
    t1.Columns.Add("pf6", Type.GetType("System.String"));
    t1.Columns.Add("pf7", Type.GetType("System.String"));
    t1.Columns.Add("rel", Type.GetType("System.String"));

    //t3.Columns.Add("r_no",Type.GetType("System.String"));
    //t3.Columns.Add("date", Type.GetType("System.String"));
    //t3.Columns.Add("type", Type.GetType("System.String"));
    //t3.Columns.Add("const", Type.GetType("System.String"));
    //t3.Columns.Add("volt", Type.GetType("System.String"));
    //t3.Columns.Add("class", Type.GetType("System.String"));
    //t2.Columns.Add("rel", Type.GetType("System.String"));

    DataRow r1;
    // DataRow r3;

    textBox1.Clear();
    DirectoryInfo d_info = new DirectoryInfo("D:\\");
    FileInfo[] f_info = d_info.GetFiles("*.txt");
    foreach (FileInfo fi in f_info)
    {
        string fname = @"D:\\" + Path.GetFileNameWithoutExtension(fi.Name) + ".txt";
        if (fname.Contains(listBox1.SelectedItem.ToString()))
        {
            StreamReader sread1 = new StreamReader(fname);
            string line = null;
            while ((line = sread1.ReadLine()) != null)
            {

                if (line.Contains("[Report Header]|" + comboBox3.SelectedItem.ToString()))
                {
                    line = line.Replace("[Report Header]|", "");
                    string[] r_words = line.Split('|');

                    line = sread1.ReadLine();
                    if (line.Contains("[Field Heading]|"))
                    {
                        string[] f_words = line.Split('|');
                        foreach (string s in f_words)
                        {
                            textBox1.Text = textBox1.Text + s;
                        }
                    }
                    textBox1.Text = textBox1.Text + Environment.NewLine;
                    for (int i = 0; i < 32; i++)
                    {
                        line = sread1.ReadLine();
                        if (line.Contains("[Meter_Record]|") || line.Contains(comboBox4.SelectedItem.ToString()))
                        {
                            line=line.Replace("[Meter_Record]|","");                                        
                            string[] m_words = line.Split('|');
                            r1 = t1.NewRow();                                        
                            r1["mtrno"] = m_words[0].ToString();
                            r1["pf1"] = m_words[1].ToString();
                            r1["pf2"] = m_words[2].ToString();
                            r1["pf3"] = m_words[3].ToString();
                            r1["pf4"] = m_words[4].ToString();
                            r1["pf5"] = m_words[5].ToString();
                            r1["pf6"] = m_words[6].ToString();
                            r1["pf7"] = m_words[7].ToString();
                            r1["rel"] = "yes";
                            //for (int j = 0; j < m_words.Length;j++ )
                            //{
                            //    textBox1.Text = textBox1.Text + m_words[j];
                            //}
                        }
                        //textBox1.Text = textBox1.Text + Environment.NewLine;
                    }
                }
            }
        }
    }

    CrystalReport2 objRpt1 = new CrystalReport2();
    //objRpt.SetDataSource(ds.Tables["h_report"]);
    objRpt1.SetDataSource(ds1.Tables["report1"]);  
    crystalReportViewer1.ReportSource = objRpt1;
    crystalReportViewer1.Zoom(1);
    crystalReportViewer1.Refresh(); 
}
catch(Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:06:34.840

一般添加列看[这里的解决方案](https://stackoverflow.com/questions/351557/how-does-one-insert-a-column-into-a-dataset-between-two-existing-columns)，添加数据：

```
DataRow anyRow = ds1.report1.NewRow();

anyRow.mtrno  = 123;
anyRow.pf1 = "abc";

report1.Rows.Add(anyRow); 
```

编辑：（回应您的评论）

在您的代码中，您没有添加新行，您定义了一个但从不添加它，即

```
report1.Rows.Add(anyRow); 
```

看看你的 for 循环，即

```
r1 = t1.NewRow();
r1["mtrno"] = m_words[0].ToString(); 
```

但是您永远不会将此新行添加到表中。这就是为什么我给你一个如何“添加”一行的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:39:11.940

您没有将`t1`(DataTable) 添加到`dataset`.

添加这一行

```
ds1.Tables.Add(t1); 
```

前

```
CrystalReport2 objRpt1 = new CrystalReport2(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:53:56.030

问题是，在此之前，您必须将行添加到数据表，并将数据表添加到数据集。

```
objRpt1.SetDataSource(ds1.Tables["report1"]); 
```

您正在制作数据集、数据表、数据行并将值放入这些行中。您忘记的是数据表不知道您将数据添加到一行，就像数据集知道您对数据表做了什么一样。要让上层实际包含数据，您也必须将其添加到那里。

在行中输入值后使用此代码。

```
// Add row to the table.
t1.Rows.Add(r1);
// Now the table contains a single row. 
```

完成数据表后使用此代码（因为您只有一个可以在创建水晶报表之前使用。

```
// Add table to the upper level data set.
ds2.Tables.Add(t1);
// Now the data set contains a single data table. 
```

# jquery - JQuery datePicker Select多种格式dd/mm/yy

> ID：13743012
> 
> 赞同：0
> 
> 时间：2012-12-06T11:50:07.110
> 
> 标签：jquery, jquery-plugins, datepicker, jquery-ui-datepicker

让 datePicker 工作以选择多个日期。当用户选择多个日期并关闭日历时，文本框以以下格式显示日期：

```
Thur Jan 03 2013 00:00:00 GMT +0000
Fri Jan 03 2013 00:00:00 GMT +0000
Sat Jan 04 2013 00:00:00 GMT +0000, 
```

我的代码：

```
<script>

            $("#HolidayDate").addClass('date-pick');
            $('.date-pick').datePicker//({dateFormat: 'dd-mm-yy'}).val();
            (
                    {
                        createButton: false,
                        displayClose: true,
                        closeOnSelect: false,
                        selectMultiple: true,                  
                    }
            )
            .bind(
                'click',
                function () {
                    $(this).dpDisplay();
                    this.blur();
                    return false;
                }
            )
            .bind(
                'dateSelected',
                function (e, selectedDate, $td, state) {
                    console.log('You ' + (state ? '' : 'un') // wrap
                        + 'selected ' + selectedDate);
                }
            )
            .bind(
                'dpClosed',
                function (e, selectedDates) {
                    console.log('You closed the date picker and the ' // wrap
                        + 'currently selected dates are:');
                    console.log(selectedDates);
                    $('#HolidayDate').val( selectedDates );
                }
            );

    </script> 
```

* * *

但是我希望日期显示为 dd-mm-yy。如果我使用注释掉的行

```
$('.date-pick').datePicker//({dateFormat: 'dd-mm-yy'}).val();

and run it as    $('.date-pick').datePicker({dateFormat: 'dd-mm-yy'}).val(); 
```

文本框将以正确的格式返回日期，但现在它只允许我一次选择一个日期。

请指教？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:58:53.233

尝试使用 .bind(Date.format = 'dd-mm-yyyy') 选择日期格式并使用 selectMultiple: true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:54:20.240

这是因为您留下了选项说它是一个 selectmultiple。

尝试

```
$('.date-pick').datePicker
            (
                    {
                        createButton: false,
                        displayClose: true,
                        closeOnSelect: false,
                        selectMultiple: true,   
                        dateFormat: 'dd-mm-yy'               
                    }
            ) 
```

看到我将它添加到您之前的选项中了吗？

**编辑**

在阅读了有关此的 kelvinlucks 文档后，我知道是什么导致了您的问题。您返回的日期是 javascript Date 对象而不是字符串。您可以随意格式化它，但在您的重载方法 dateSelected 和 dpClosed 中，它们只是在没有格式化的情况下打印。

试试这个：

```
.bind(
    'dateSelected',
    function(e, selectedDate, $td, state)
    {
        var date = selectedDate.getDate() + "-" + (selectedDate.getMonth() + 1) + "-" +     selectedDate.getFullYear();
        console.log('You ' + (state ? '' : 'un') // wrap
            + 'selected ' + date);

    }
) 
```

我的日期格式不太好，但你明白了。这是关于格式化日期的帖子（http://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript）

# windows - TortoiseSVN - 全局忽略模式不适用于 thumbs.db

> ID：13743013
> 
> 赞同：2
> 
> 时间：2012-12-06T11:50:18.160
> 
> 标签：windows, svn, tortoisesvn, thumbnails, svnignore

如何使 TortoiseSVN（Windows 8 上的 64 位）忽略所有 Thumbs.db 文件？我知道设置-> 全局忽略模式存在。我进入了

```
*.db Thumbs.db thumbs.db 
```

在默认情况下存在的其他条目中。但是 TortoiseSVN 仍然没有忽略 Thumbs.db 文件。它们作为 ToirtoiseSVN 想要添加并提交到 repo 的新文件弹出。

我是否必须更改其他一些设置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T15:46:07.363

首先，如果您想忽略这些，请使用

```
[Tt]humbs.[dD][bB] 
```

作为忽略模式。

第二：当您在 TSVN 设置对话框中使用全局忽略模式时，该更改最多需要五分钟才能生效（因为该值已被缓存）。

虽然，在你的情况下，忽略是行不通的：Subversion 永远不会忽略已经在版本控制下的文件！（您在[这里](https://stackoverflow.com/questions/13743013/tortoisesvn-global-ignore-pattern-not-working-for-thumbs-db#comment18888418_13744489)提到覆盖图标变为红色感叹号，表示该文件受版本控制）。您必须首先从 SVN 中删除该文件，提交然后忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:20:14.647

您可以使用全局（*此主机*上的每个用户，任何 Subversion 客户端）忽略设置，适用于任何操作系统

`%APPDATA%/Subversion/config`，`[miscellany]`截面，`global-ignores`参数。添加 Thumbs.db 似乎没问题

# iphone - 插入 Plist 苍蝇

> ID：13743014
> 
> 赞同：0
> 
> 时间：2012-12-06T11:50:19.423
> 
> 标签：iphone, objective-c, ios, plist

我是 iPhone 新手

我已经存储了GameData.plist 文件，并且在“root”字典下的“root”字典下我有一个名为“gameProgress”的数组，我想在这个“gameProgress”数组中插入数据。

以下是我的代码

```
-(void)writeDataToPhone
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"storedGameData.plist"];

    // read or create plist

    NSMutableDictionary *dict;

    NSFileManager *fileManager = [NSFileManager defaultManager];

    if ( [fileManager fileExistsAtPath:plistPath] ) {

        // Reading the Plist from inside the if

        //statement

        NSLog(@"dictionary existed, reading %@", plistPath);

        dict = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];

    }

   NSNumber *newNumberOfCompletedLevels = [NSNumber numberWithInt:1];

    [dict setObject:newNumberOfCompletedLevels forKey:@"gameProgress"];

    NSLog(@"writing to %@…", plistPath);

    [dict writeToFile:plistPath atomically:YES];

NSLog(@"dictionary values are…:");

for (id key in dict) {

    NSLog(@"key=%@, value=%@", key, [dict objectForKey:key]);

    }
} 
```

但我的数组是空白的，没有插入任何内容

我的代码有什么问题？以及我应该在我的代码中更改什么以在数组中插入值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:07:52.013

错误在`dict`对象中。你还没有初始化它。

请使用这行代码：

```
NSMutableDictionary *dict = [NSMutableDictionary alloc] init]; 
```

代替：

```
NSMutableDictionary *dict; 
```

它会解决你的问题。请让我知道您的反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:45:54.267

工作得很好。我只是做，

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

```
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"storedGameData.plist"];

// read or create plist

NSMutableDictionary *dict=[[NSMutableDictionary alloc]init];

NSFileManager *fileManager = [NSFileManager defaultManager];

if ( [fileManager fileExistsAtPath:plistPath] ) {

    // Reading the Plist from inside the if

    //statement

    NSLog(@"dictionary existed, reading %@", plistPath);

    dict = [NSMutableDictionary dictionary
}

NSNumber *newNumberOfCompletedLevels = [NSNumber numberWithInt:5];

[dict setObject:newNumberOfCompletedLevels forKey:@"gameProgress"];

NSLog(@"writing to %@…", plistPath);

[dict writeToFile:plistPath atomically:YES];

NSLog(@"dictionary values are…:");

for (id key in dict)
{

    NSLog(@"key=%@, value=%@", key, [dict objectForKey:key]);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:16:59.387

您需要初始化您的`dict`对象。

```
NSMutableDictionary *dict = [NSMutableDictionary alloc] init]; 
```

# android - 后台进程android中的Wi-Fi可用性检查

> ID：13743019
> 
> 赞同：0
> 
> 时间：2012-12-06T11:50:33.693
> 
> 标签：android, bluetooth, notifications, background-process, bluetooth-lowenergy

我正在开发一个带有无线活动的应用程序。我必须使用 WLAN（无线 LAN）与互联网合作，并且我的蓝牙活动需要一直工作。

在这里，有时我的 wi-fi / 蓝牙设备出现超出覆盖范围的问题。我在不知道这方面的知识的情况下工作，在提交过程时我才知道 Internet 不可用..

每次在应用程序中处理时，我都需要更新数据。如果我的程序或应用程序中嵌入了 Wi-fi/蓝牙强度通知，则意味着我可以知道 Wi-fi/蓝牙强度是否变低。

帮我解决这个问题。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:19:14.083

我想您是在问如何检查您的 WiFi 是否已连接，如果是，您可以使用 ConnectivityManager

```
ConnectivityManager conman = (ConnectivityManager)
     getSystemService(CONNECTIVITY_SERVICE);
NetworkInfo wifi = conman.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

if(wifi.isConnected()) {
   // yay! your connected
} 
```

现在，要让上述内容在后台运行，您可以在后台运行并与您的活动通信的服务中实现上述内容。在这里查看一个示例，以帮助您开始使用后台服务。

[http://android-codes-examples.blogspot.co.uk/2011/11/running-service-in-background-on.html](http://android-codes-examples.blogspot.co.uk/2011/11/running-service-in-background-on.html)

在服务中，您需要通过以下方式获取 ConnectivityManager，因为您需要先获取应用程序上下文

```
ConnectivityManager conman = (ConnectivityManager)
     getApplicationContext().getgetSystemService(CONNECTIVITY_SERVICE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:33:42.320

按照@JustDanyul所说的，您可以简单地修改它，以便它始终通过使用while循环而不是if语句来检查其连接性，这样当您连接到互联网时，您的应用程序会做一件事，然后在断开连接时做其他事情

# linq - Linqpad 中的 UserQuery 是什么？

> ID：13743020
> 
> 赞同：5
> 
> 时间：2012-12-06T11:50:40.390
> 
> 标签：linq, c#-4.0, dbcontext, linqpad

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:51:54.533

`UserQuery`是 LINQPad 用作您在其文本字段中输入的代码的容器的类。因此，它仅适用于您在 LINQPad 中运行的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:19:41.307

听起来您正在尝试查询类型化数据上下文的属性。

要使其在 Visual Studio 中正常工作，请将 UserQuery 替换为您键入的 DataContext 的名称。

# python - python中多维搜索的最佳算法

> ID：13743024
> 
> 赞同：1
> 
> 时间：2012-12-06T11:50:44.973
> 
> 标签：python, algorithm, sorting, search, tree

我一直在试验一个应用程序，我遇到了这个问题。我有一个规则列表，如下所示。这是实验数据，真实数据有更多字段（30+）。每条记录都可以包含一些值和一些空值。这是一个列表列表，但我也可以将它保存在 defaultdict 中（如果有帮助的话）。大约 100 万条记录。

```
Age  Gender  City    Religion  Propensity
23   *       Delhi   *         0.33
*    M       Mumbai  *         0.78
*    *       *       Hindu     0.23
34   F       Chennai *         0.33
...
...
... 
```

现在我有一个数据集 - (23, M, Delhi, Hindu)，它包含所有值。

我需要从上表中选择与该记录匹配的所有记录，即使一个维度以尽可能快的速度按维度数降序排列。所以在这种情况下，第 3 行和第 1 行匹配。因此，空值数量最少的记录将位于底部。

我需要一种复杂的方法来实现这一点，它可以在 python 中大规模工作。不能用其他软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:09:26.940

**假设您的“搜索条件”始终相同，即“数据集” *（年龄、性别、城市、宗教）***

将其移动到由“数据集”索引的列表（或集合）字典中

```
result_dict = {}
for record in record_list:
    # you have to know the indexes
    # I'm assuming 0=Age, 1=Gender, 2=City, 3=Hindu
    key_data = []
    for index in [0, 1, 2, 3]:
        key_data.append(str(record[index]))
    key = ','.join(key_data)
    try:
        result_dict[key].append(record)
    except KeyError:
        result_dict[key] = []
        result_dict[key].append(record)

# Find all records that match '23,M,Delhi,Hindu'
print result_dict['23,M,Delhi,Hindu'] 
```

但实际上，我可能会将其存储在数据库中，然后在其上运行 SQL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:20:28.200

这里有几个很好的答案。我已经编写并测试了一些代码。

首先，这里是对需求的简单实现：

```
import pprint

t = [
    [ 23,   None, 'Delhi',   None,    0.33 ],
    [ None, 'M',  'Mumbai',  None,    0.78 ],
    [ None, None,  None,     'Hindu', 0.23 ],
    [ 34,   'F',  'Chennai', None,    0.33 ],
]

rlen = len(t[0])

# None may require special handling
m = [23, 'M', 'Delhi', 'Hindu', None]

a = [[] for i in range(rlen+1)]

for r in t:
    s = sum([1 for i in range(rlen) if r[i] == m[i]])
    if 0 < s:
        a[s].append(r)

# Print rows from least matching to most matching (easy to reverse)
rtable = [row for n in a for row in n]
pprint.pprint(rtable) 
```

问题是我们扫描每一行并检查每个元素值。为了避免在最后进行排序，我们为每个可能的匹配计数保留单独的列表，然后我们将列表列表展平以获得最终结果。我希望这相对于表的大小执行大约 O(n)，如果我们有大量匹配项（构建大型结果列表将比 O(n) 慢，接近 O(n^2) 作为最坏的情况下）。

如果我们索引表，我们可以加快速度。我们可以每列使用一个 dict 并使用集合组合列。

```
from collections import defaultdict
import pprint

# data table
TABLE = [
    [ 23,   None, 'Delhi',   None,    0.33 ],
    [ None, 'M',  'Mumbai',  None,    0.78 ],
    [ None, None,  None,     'Hindu', 0.23 ],
    [ 34,   'F',  'Chennai', None,    0.33 ],
]

# The index is a list of dicts, cdictlist.
# cdictlist is indexed by column number to get the column dict.
# The column dict's key is the data value of the column
def BuildIndex(table):
    rlen = len(table[0])
    rrange = range(rlen)
    cdictlist = [defaultdict(set) for i in range(rlen+1)]
    for ir in range(len(table)):
        r = table[ir]
        for ic in rrange:
            f = r[ic]
            cdictlist[ic][f].add(ir)
    return cdictlist

def multisearch(table, match, cdictlist):
    # rcounts is row counts, number of times columns have matched for a row
    rccounts = defaultdict(int)

    #rset is the result set, set of row indexes returned for this search
    rset = set()

    for ic in range(len(table[0])):
        cset = cdictlist[ic].get(match[ic], set())
        rset = rset.union(cset)
        for i in cset:
            rccounts[i] += 1

    # sort the list by column match count, original row index
    l = sorted((v,k) for (k,v) in rccounts.iteritems())

    # return list of rows, for each row we return (count, index, raw data)
    lr = [ [l[i][0], l[i][1]] + table[l[i][1]] for i in range(len(l)) ]
    return lr

def main():
    cdictlist = BuildIndex(TABLE)

    # None may require special handling
    match = [23, 'M', 'Delhi', 'Hindu', None]

    lr = multisearch(TABLE, match, cdictlist)
    pprint.pprint(lr)

if __name__ == '__main__':
    main() 
```

性能将取决于返回的记录数而不是表的大小。对于大量匹配，集合并集操作将很快成为问题。如果*任何*字段匹配并且示例字段之一是 Gender，则记录匹配，因此我们应该期望至少返回一半的行。

如果您必须匹配所有列，这种方法会*更好。*我们可以通过构建未返回的记录集（使用集合交集）来改进这一点**，**然后过滤掉这些记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:29:41.480

假设您确实使用了您在评论中提到的 SQL 数据库 (sqlite3)，则 SQL 将如下所示：

```
-- gives you the set of complete records
SELECT
    v0.*
FROM values v0
WHERE -- only full records
    v0.Age IS NOT NULL
AND v0.Gender IS NOT NULL
AND v0.City IS NOT NULL
AND v0.Religion IS NOT NULL
AND v0.Propensity IS NOT NULL

SELECT v1.*, 
    CASE v1.Age WHEN IS NULL THEN 0 ELSE 1 END + 
    CASE v1.Gender WHEN IS NULL THEN 0 ELSE 1 END +
    CASE v1.City WHEN IS NULL THEN 0 ELSE 1 END +
    CASE v1.Religion WHEN IS NULL THEN 0 ELSE 1 END + 
    CASE v1.Propensity WHEN IS NULL THEN 0 ELSE 1 END as dimensions
FROM values v1
WHERE v1.Age = 23
OR    v1.Gender = 'M'
OR    v1.City = 'Delhi'
OR    v1.Religion = 'Hindu'
ORDER BY dimensions desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:56:54.247

您可以将数据存储在一组字典中：

```
dict1:age->list<entry>
dict2:gender->list<entry>
... 
```

现在，当您收到查询时 - 您所要做的就是创建一个[直方图](http://en.wikipedia.org/wiki/Histogram)(map:entry->integer) 根据值对其进行排序并按降序打印。

运行时间是`O(d*m + mlogm)`（平均），其中`d`是列表（维度） `m`的数量，是输出条目的数量。

**伪代码：**

```
assume  list of dictionaries, let it be L:
printRelevants(entry):
   histogram <- new dictionary
   for each dimension d:
      l <- L[d].get(entry[d])
      for each element e in l: #remember to check for null l first
         val <- histogram.get(e)
         if val is null:
             histogram.put(e,1)
         else:
             histogram.put(e,val+1) #assuming overriding old entry with the same key
    #done creating the histogram! 
    sort histogram according to value
    print keys of histogram in descending order 
```

# web-services - WebService 使用的释放变量

> ID：13743028
> 
> 赞同：1
> 
> 时间：2012-12-06T11:50:54.557
> 
> 标签：web-services, delphi, delphi-xe2

如何释放 WebService 正在使用的变量。

我正在使用这种形式：

```
 HttpPrincipal.WSDLLocation: = FrmPrincipal.edtWS.Text;
 HttpPrincipal.Service: = 'CADServicesService'; 
 HttpPrincipal.Port := 'CADServices';     
 Trinity: = HttpPrincipal as CADServices; 
```

在我将关闭Form的那一刻出现错误，发现当我声明这部分时：

```
Trinity: = HttpPrincipal as CADServices; 
```

我认为它被卡在了记忆中。

错误如下：

> "Invalid Pointer" 关闭窗体时发生错误，在 OnClose 或 OnDestroy 窗体中没有任何事件。

说明： `Trinity : CADServices,` `HttpPrincipal is a THTTPRIO,` `CADServices is my Unit containing all procedures / functions from WebService.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:27:55.023

尝试在运行时创建 HTTPRIO，而不是使用设计时组件：

```
function GetCadServices(Addr : String): CadServices;
const
  defSvc  = 'CADServicesService';
  defPrt  = 'CADServices';
var
  RIO: THTTPRIO;
begin
  Result := nil;
  RIO := THTTPRIO.Create(nil)  
  try
    Result := (RIO as CadServices);
    RIO.WSDLLocation := Addr;
    RIO.Service := defSvc;
    RIO.Port := defPrt;
  finally
    if (Result = nil) then
      RIO.Free;
  end;
end; 
```

用法：

```
Trinity := GetCadServices(FrmPrincipal.edtWS.Text); 
```

如果您使用 WSDL 导入器导入 WSDL，则会自动为您生成此代码（查看 CadServices1 单元）

# java - 如何在 JPA Eclipselink 中有一个 MappedSuperType 类的列表？

> ID：13743030
> 
> 赞同：0
> 
> 时间：2012-12-06T11:51:00.290
> 
> 标签：java, generics, jpa, eclipselink

生成表时，eclipse 说它不能识别 DogMall 类中的商店类型。而且我不能制作通用类实体，因为它们的类型无法在生成表时确定。**确切的错误是“无法确定类 BaseballGame 上的关系属性事件的目标实体”。使用 eclipse 生成表时出现错误，而不是在问题视图中。我正在使用 Eclipse Juno SR1。**

我不想发布代码，因为它非常大。简要说明我使用泛型是因为这个原因：如果我有一个 League 类和 BaseballLeague 的子类。League 有一个运动员列表，但我希望如果实例是 BaseballLeague，运动员必须是 BaseballPlayers 并避免客户端可以将 BaslketballPlayer 添加到 BaseballLeague 类，因为联盟有运动员列表。这在[这个问题](https://stackoverflow.com/questions/13297651/is-this-approach-fine-for-returning-a-copy-of-a-list)中得到了回答。这是受影响的代码：

```
package pqlrd.bll.sport;

import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;

import pqlrd.bll.pim.Person;
@Entity
/**
 * Athlete
 * @author jhonnytunes
 *
 */
public abstract class Athlete extends Person {

/**
 * 
 */
private static final long serialVersionUID = 3099827166939719897L;

@OneToOne(cascade=CascadeType.ALL, orphanRemoval=true)
private PhysicalCondition physicalCondition;

@OneToMany(cascade=CascadeType.ALL, orphanRemoval=true)
private List<PaymentCard> cards;

private List<ScoutingReport> report;

public Athlete() {
    // TODO Auto-generated constructor stub
}

public PhysicalCondition getPhysicalCondition() {
    return physicalCondition;
}

public void setPhysicalCondition(PhysicalCondition physicalCondition) {
    this.physicalCondition = physicalCondition;
}

public List<PaymentCard> getCards() {
    return cards;
}

public void setCards(List<PaymentCard> cards) {
    this.cards = cards;
}

public List<ScoutingReport> getReport() {
    return report;
}

public void setReport(List<ScoutingReport> report) {
    this.report = report;
}

public Athlete(PhysicalCondition physicalCondition,
        List<PaymentCard> cards, List<ScoutingReport> report) {
    super();
    this.physicalCondition = physicalCondition;
    this.cards = cards;
    this.report = report;
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = super.hashCode();
    result = prime * result + ((cards == null) ? 0 : cards.hashCode());
    result = prime
            * result
            + ((physicalCondition == null) ? 0 : physicalCondition
                    .hashCode());
    result = prime * result + ((report == null) ? 0 : report.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (!super.equals(obj))
        return false;
    if (getClass() != obj.getClass())
        return false;
    Athlete other = (Athlete) obj;
    if (cards == null) {
        if (other.cards != null)
            return false;
    } else if (!cards.equals(other.cards))
        return false;
    if (physicalCondition == null) {
        if (other.physicalCondition != null)
            return false;
    } else if (!physicalCondition.equals(other.physicalCondition))
        return false;
    if (report == null) {
        if (other.report != null)
            return false;
    } else if (!report.equals(other.report))
        return false;
    return true;
}

}

//////////////////////////////////////////////////////////////

 package pqlrd.bll.sport;

import javax.persistence.Column;
import javax.persistence.Entity;

@Entity
/**
 * @author jhonnytunes
 *
 */
public abstract class BaseballEvent extends SportEvent<BaseballPlayer> {

/**
 * 
 */
private static final long serialVersionUID = 8163277354208426840L;

@Column(nullable = false)
private boolean onTop;

public void setOnTop(boolean onTop) {
    this.onTop = onTop;
}

public boolean isOnTop() {
    return onTop;
}

}
////////////////////////////////////////////////////
   package pqlrd.bll.sport;

import java.io.Serializable;
import java.util.LinkedList;
import javax.persistence.Entity;

@Entity
/**
 *  @author jhonnytunes
 *
 */
public class BaseballGame
        extends
    Game<BaseballPark, BaseballPlayer, BaseballEvent, BaseballCategory,             BaseballTeam>
    implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = 2260373487163641360L;

}

////////////////////////////////////
package pqlrd.bll.sport;

import java.util.LinkedList;
import javax.persistence.Entity;

@Entity
/**
 * @author jhonnytunes
*/
public class BaseballLeague extends
    League<BaseballPark, BaseballPlayer, BaseballCategory> {

/**
 * 
 */
private static final long serialVersionUID = -3600825760889806131L;

}

//////////////////////////////////////////////////

package pqlrd.bll.sport;

import javax.persistence.Entity;
import javax.persistence.EnumType;
import javax.persistence.Enumerated;
@Entity
/**
 * Baseball Player
 * @author jhonnytunes
 *
 */
public class BaseballPlayer extends Athlete {

@Enumerated(EnumType.STRING)
private Handedness _throws;

@Enumerated(EnumType.STRING)
private Handedness bats;

public BaseballPlayer() {
    // TODO Auto-generated constructor stub
}

public Handedness get_throws() {
    return _throws;
}

public void set_throws(Handedness _throws) {
    this._throws = _throws;
}

public Handedness getBats() {
    return bats;
}

public void setBats(Handedness bats) {
    this.bats = bats;
}

public BaseballPlayer(Handedness _throws, Handedness bats) {
    super();
    this._throws = _throws;
    this.bats = bats;
}

}

//////////////////////////////////////

package pqlrd.bll.sport;

import javax.persistence.Entity;

@Entity
/**
 * 
 * @author jhonnytunes
 *
 */
public class BaseballTournament
    extends
    Tournament<BaseballPark, BaseballPlayer, BaseballCategory, BaseballTeam,    TournamentInvitationBaseball, BaseballEvent, BaseballGame, BaseballLeague> {

/**
 * 
 */
private static final long serialVersionUID = 5315560497107867141L;

}

/////////////////////////////////

package pqlrd.bll.sport;

import java.io.Serializable;
import java.util.Calendar;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.MappedSuperclass;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.SequenceGenerator;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

import pqlrd.bll.pim.Person;

@MappedSuperclass
/**
 * Game
 * @author jhonnytunes
 */
public abstract class Game<P extends Park, A extends Athlete, SE extends SportEvent<A>, SC  extends SportCategory, T extends Team<A, SC>>
    implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = -1554044669639703370L;

@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "PQLRD_SEQ")
private long id;

@Column(nullable = false)
@Temporal(TemporalType.DATE)
private Calendar date;

@Column(nullable = false)
private boolean played;

@JoinColumn(nullable = false)
private P park;

@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
private Map<Integer, SE> events;

@JoinColumn(nullable = false)
private T homeTeam;
@JoinColumn(nullable = false)
private T visitorTeam;

private Person scorer;

private List<A> homeAthletes;
private List<A> visitorAthletes;
public Calendar getDate() {
    return date;
}
public void setDate(Calendar date) {
    this.date = date;
}
public boolean isPlayed() {
    return played;
}
public void setPlayed(boolean played) {
    this.played = played;
}
public P getPark() {
    return park;
}
public void setPark(P park) {
    this.park = park;
}
public Map<Integer, SE> getEvents() {
    return events;
}
public void setEvents(Map<Integer, SE> events) {
    this.events = events;
}
public T getHomeTeam() {
    return homeTeam;
}
public void setHomeTeam(T homeTeam) {
    this.homeTeam = homeTeam;
}
public T getVisitorTeam() {
    return visitorTeam;
}
public void setVisitorTeam(T visitorTeam) {
    this.visitorTeam = visitorTeam;
}
public List<A> getHomeAthletes() {
    return homeAthletes;
}
public void setHomeAthletes(List<A> homeAthletes) {
    this.homeAthletes = homeAthletes;
}
public List<A> getVisitorAthletes() {
    return visitorAthletes;
}
public void setVisitorAthletes(List<A> visitorAthletes) {
    this.visitorAthletes = visitorAthletes;
}
public long getId() {
    return id;
}

public Person getScorer() {
    return scorer;
}
public void setScorer(Person scorer) {
    this.scorer = scorer;
}
public Game() {
    // TODO Auto-generated constructor stub
}
public Game(Calendar date, boolean played, P park, Map<Integer, SE> events,
        T homeTeam, T visitorTeam, List<A> homeAthletes,
        List<A> visitorAthletes) {
    super();
    this.date = date;
    this.played = played;
    this.park = park;
    this.events = events;
    this.homeTeam = homeTeam;
    this.visitorTeam = visitorTeam;
    this.homeAthletes = homeAthletes;
    this.visitorAthletes = visitorAthletes;
}
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((date == null) ? 0 : date.hashCode());
    result = prime * result + ((events == null) ? 0 : events.hashCode());
    result = prime * result
            + ((homeAthletes == null) ? 0 : homeAthletes.hashCode());
    result = prime * result
            + ((homeTeam == null) ? 0 : homeTeam.hashCode());
    result = prime * result + (int) (id ^ (id >>> 32));
    result = prime * result + ((park == null) ? 0 : park.hashCode());
    result = prime * result + (played ? 1231 : 1237);
    result = prime * result
            + ((visitorAthletes == null) ? 0 :  visitorAthletes.hashCode());
    result = prime * result
            + ((visitorTeam == null) ? 0 : visitorTeam.hashCode());
    return result;
}
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Game other = (Game) obj;
    if (date == null) {
        if (other.date != null)
            return false;
    } else if (!date.equals(other.date))
        return false;
    if (events == null) {
        if (other.events != null)
            return false;
    } else if (!events.equals(other.events))
        return false;
    if (homeAthletes == null) {
        if (other.homeAthletes != null)
            return false;
    } else if (!homeAthletes.equals(other.homeAthletes))
        return false;
    if (homeTeam == null) {
        if (other.homeTeam != null)
            return false;
    } else if (!homeTeam.equals(other.homeTeam))
        return false;
    if (id != other.id)
        return false;
    if (park == null) {
        if (other.park != null)
            return false;
    } else if (!park.equals(other.park))
        return false;
    if (played != other.played)
        return false;
    if (visitorAthletes == null) {
        if (other.visitorAthletes != null)
            return false;
    } else if (!visitorAthletes.equals(other.visitorAthletes))
        return false;
    if (visitorTeam == null) {
        if (other.visitorTeam != null)
            return false;
    } else if (!visitorTeam.equals(other.visitorTeam))
        return false;
    return true;
}

}
////////////////////////////////
package pqlrd.bll.sport;

import java.io.Serializable;
import java.util.Calendar;
import java.util.LinkedList;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.ElementCollection;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.MappedSuperclass;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.SequenceGenerator;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

import org.apache.commons.lang.WordUtils;

import pqlrd.bll.cms.Attachment;
import pqlrd.bll.money.Payment;
import pqlrd.bll.pim.Address;
import pqlrd.bll.pim.ContactInformation;

@MappedSuperclass
/**
 * League class
 * @author jhonnytunes
 *
 */
public abstract class League<P extends Park, A extends Athlete, SC extends  SportCategory> implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = -6036071460102749097L;

@Id@GeneratedValue(strategy= GenerationType.SEQUENCE,generator="PQLRD_SEQ") 
private int id;

@Column(length=30, nullable=false)
private String name;

@Column(nullable=false)
@Temporal(TemporalType.DATE)
private Calendar dateOfOrigin;

@Column(columnDefinition="text")
private String history;

@ElementCollection
private List<String> requirements;

private List<AthletesCost> athletesCosts;

@Column(nullable=false)
private boolean visible;

private P park;

@OneToMany(cascade=CascadeType.ALL, orphanRemoval=true)
private List<LeagueStaff> leagueStaffs;

@OneToOne(cascade=CascadeType.ALL, orphanRemoval=true)
private List<ContactInformation>contactInformations;

@OneToOne(cascade=CascadeType.ALL, orphanRemoval=true)
private Address address;

@OneToMany(cascade=CascadeType.ALL, orphanRemoval=true)
private List<Team<A, SC>> teams;

@OneToMany(cascade=CascadeType.ALL, orphanRemoval=true)
private List<Attachment> attachments;

public String getName() {
    return WordUtils.capitalizeFully(name);
}

public void setName(String name) {
    this.name = name.toLowerCase();
}

public Calendar getDateOfOrigin() {
    return dateOfOrigin;
}

public void setDateOfOrigin(Calendar dateOfOrigin) {
    this.dateOfOrigin = dateOfOrigin;
}

public String getHistory() {
    return history;
}

public void setHistory(String history) {
    this.history = history;
}

public List<String> getRequirements() {
    return requirements;
}

public void setRequirements(List<String> requirements) {
    this.requirements = requirements;
}

public List<AthletesCost> getAthletesCosts() {
    return athletesCosts;
}

public void setAthletesCosts(List<AthletesCost> athletesCosts) {
    this.athletesCosts = athletesCosts;
}

public boolean isVisible() {
    return visible;
}

public void setVisible(boolean visible) {
    this.visible = visible;
}

public P getPark() {
    return park;
}

public void setPark(P park) {
    this.park = park;
}

public List<LeagueStaff> getLeagueStaffs() {
    return leagueStaffs;
}

public void setLeagueStaffs(List<LeagueStaff> leagueStaffs) {
    this.leagueStaffs = leagueStaffs;
}

public List<ContactInformation> getContactInformations() {
    return contactInformations;
}

public void setContactInformations(List<ContactInformation> contactInformations) {
    this.contactInformations = contactInformations;
}

public Address getAddress() {
    return address;
}

public void setAddress(Address address) {
    this.address = address;
}

public List<Team<A, SC>> getTeams() {
    return teams;
}

public void setTeams(List<Team<A, SC>> teams) {
    this.teams = teams;
}

public List<Attachment> getAttachments() {
    return attachments;
}

public void setAttachments(List<Attachment> attachments) {
    this.attachments = attachments;
}

public int getId() {
    return id;
}

public League() {
    // TODO Auto-generated constructor stub
}

public League(String name, Calendar dateOfOrigin, String history,
        List<String> requirements, List<AthletesCost> athletesCosts,
        boolean visible, P park, List<LeagueStaff> leagueStaffs,
        List<ContactInformation> contactInformations, Address address,
        List<Team<A, SC>> teams, List<Attachment> attachments) {
    super();
    this.name = name;
    this.dateOfOrigin = dateOfOrigin;
    this.history = history;
    this.requirements = requirements;
    this.athletesCosts = athletesCosts;
    this.visible = visible;
    this.park = park;
    this.leagueStaffs = leagueStaffs;
    this.contactInformations = contactInformations;
    this.address = address;
    this.teams = teams;
    this.attachments = attachments;
}

}

/////////////////////////////

package pqlrd.bll.sport;

import java.io.Serializable;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.IdClass;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.MappedSuperclass;

import org.apache.commons.lang.math.NumberUtils;

import pqlrd.bll.util.NumbersUtil;
@IdClass(SportEventPK.class)
@MappedSuperclass
/**
 * Event that occur in a time of a game
 * @author jhonnytunes
 *
 */

public abstract class SportEvent<T extends Athlete> implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 3814280347145588159L;

@Id private T athlete;
@Id private short period;
@Id private long random;
@Id private short quantity;

public T getAthlete() {
    return athlete;
}
public void setAthlete(T athlete) {
    this.athlete = athlete;
}
public short getPeriod() {
    return period;
}
public void setPeriod(short period) {
    this.period = period;
}
public long getRandom() {
    return random;
}

public SportEvent() {

    this.random = NumbersUtil.random.nextLong();
}
public short getQuantity() {
    return quantity;
}
public void setQuantity(short quantity) {
    this.quantity = quantity;
}

}

//////////////////////////////

package pqlrd.bll.sport;

import java.io.Serializable;

import javax.persistence.Embeddable;

public class SportEventPK implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = -1251889014150257402L;

private Athlete athlete;
private short period;
private long random;
private short quantity;

public short getQuantity() {
    return quantity;
}

public void setQuantity(short quantity) {
    this.quantity = quantity;
}

public SportEventPK() {
    // TODO Auto-generated constructor stub
}

protected Athlete getAthlete() {
    return athlete;
}

protected void setAthlete(Athlete athlete) {
    this.athlete = athlete;
}

protected short getPeriod() {
    return period;
}

protected void setPeriod(short period) {
    this.period = period;
}

protected long getRandom() {
    return random;
}

protected void setRandom(long random) {
    this.random = random;
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((athlete == null) ? 0 : athlete.hashCode());
    result = prime * result + period;
    result = prime * result + (int) (random ^ (random >>> 32));
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    SportEventPK other = (SportEventPK) obj;
    if (athlete == null) {
        if (other.athlete != null)
            return false;
    } else if (!athlete.equals(other.athlete))
        return false;
    if (period != other.period)
        return false;
    if (random != other.random)
        return false;
    return true;
}

}
/////////////////////////

package pqlrd.bll.sport;

import java.io.Serializable;
import java.util.LinkedList;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.JoinColumn;
import javax.persistence.MappedSuperclass;
import javax.persistence.OneToMany;
import javax.persistence.SequenceGenerator;
@MappedSuperclass

/**
 * @author jhonnytunes
 *
 */
public abstract class Team<A extends Athlete, SC extends SportCategory > implements     Serializable {

/**
 * 
 */
private static final long serialVersionUID = 5556278910044704061L;

@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "PQLRD_SEQ")
private int id;

@OneToMany(cascade=CascadeType.ALL, orphanRemoval=true)
private List<PracticeTime> times;

@JoinColumn(nullable=false)
private SC category;

private List<A> athletes;

public List<PracticeTime> getTimes() {
    return times;
}

public void setTimes(List<PracticeTime> times) {
    this.times = times;
}

public SC getCategory() {
    return category;
}

public void setCategory(SC category) {
    this.category = category;
}

public List<A> getAthletes() {
    return athletes;
}

public void setAthletes(List<A> athletes) {
    this.athletes = athletes;
}

public int getId() {
    return id;
}

public Team() {
    // TODO Auto-generated constructor stub
}

public Team(List<PracticeTime> times, SC category, List<A> athletes) {
    super();
    this.times = times;
    this.category = category;
    this.athletes = athletes;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:44:58.703

解决了。从作为映射超类的集合的属性中删除了 @OneToMany 注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:50:54.597

将 OneToMany 字段下移到子类。

# html - CSS - 在文本旁边嵌入块对象

> ID：13743034
> 
> 赞同：0
> 
> 时间：2012-12-06T11:51:17.493
> 
> 标签：html, css

我需要一个展开图标来与选项卡中的一段动态文本并排显示更多信息。展开图标有一个背景图像 - 因此需要显示为块 - 当单击时应用一个类，它将背景图像更改为减号并显示链接下方的文本。

有没有办法在动态文本的左侧显示 5px 的图标并且它仍然是一个块（这样你就可以看到背景图像）？

我的 HTML 在下面 - 请注意，该选项卡还包含一个具有单独功能的复选框。

```
 <div class="expandLinkWO">Cardio &amp; Arms<span class="plusCircle btn"><span></span>     </span> <span class="tickBox"></span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:56:09.613

您可以使用 inline-block，它可以满足您的需求。或者你可以让你的按钮浮动。两者都应该工作。

**内联版本**

```
.plusCircle {
   display:inline-block;
   vertical-align: top;
   margin-right: 5px;
} 
```

**浮动版：**

```
.plusCircle {
   display:block;
   float:left;
   margin-right: 5px;
} 
```

我相信 inline-block 方式更好，但 IE 和 inline-block 不是最好的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:53:47.717

您可能需要`inline-block`：

```
.plusCircle { 
    background: url(your/img/url.jpg);
    height: 20px;
    width: 20px;
    display: inline-block;
    margin-left: 5px;
} 
```

# c++ - 如何将 C++ unsigned char [] 传递给 Tcl 字节数组？

> ID：13743035
> 
> 赞同：2
> 
> 时间：2012-12-06T11:51:16.430
> 
> 标签：c++, tcl

我有一个放大图像的 Tcl 程序。

```
proc ShowWindow {wtitle zfactor imgdata} {

puts stdout "Now in the Tcl procedure ShowWindow!";

image create photo idata -data $imgdata;    # create a photo image from the input data
image create photo the_window;      # final window

the_window copy idata -zoom $zfactor $zfactor;  # copy the original and magnify

wm title . $wtitle;         # window title
wm resizable . false false;     # no resizing in both x and y directions

catch {destroy .dwindow};       # since this procedure will be called multiple times
                # we need to suppress the 'window name "dwindow" already exists in parent' message

label .dwindow -image the_window;   # create a label to display the image
pack .dwindow;          # display the image

} 
```

我想从 C++ 调用这个 Tcl 过程。

我认为“imgdata”是一个字节数组。这个对吗？

相关代码片段如下所示：

```
// ...Tcl/Tk initialization omitted...

unsigned char *img; // PPM image data
int num_bytes;      // PPM image file size

// ...routines to initialize img and num_bytes omitted...

Tcl_Obj *tcl_raw;

// transfer the PPM image data into Tcl_Obj

if (!(tcl_raw = Tcl_NewByteArrayObj(img, num_bytes))) {
  cerr << "Tcl_NewByteArrayObj() failed!" << endl;
  cerr << "Exiting..." << endl;
  return 1;
} else {
  cerr << "Tcl_NewByteArrayObj() succeeded!" << endl;
}

Tcl_IncrRefCount(tcl_raw);  // is this really necessary?

// set the Tcl variable "imgdata" to the Tcl_Obj

if (Tcl_SetVar2Ex(tcl_interpreter, "imgdata", "", tcl_raw, TCL_LEAVE_ERR_MSG) == NULL) {
  cerr << "Tcl_SetVar2Ex() failed!" << endl;
  cerr << "Exiting..." << endl;
  return 1;
} else {
  cerr << "Tcl_SetVar2Ex() succeeded!" << endl;
}

// execute the Tcl procedure

if (Tcl_Eval(tcl_interpreter, "ShowWindow TheImage 8 $imgdata") != TCL_OK) {
  cerr << "Tcl_Eval() failed!" << endl;
  cerr << "Tcl_GetStringResult() = " << Tcl_GetStringResult(tcl_interpreter) << endl;
  cerr << "Exiting..." << endl;
  return 1;
} else {
  cerr << "Tcl_Eval() succeeded!" << endl;
} 
```

程序在 Tcl_Eval() 处失败。程序输出为：

```
...
Tcl_NewByteArrayObj() succeeded!
Tcl_SetVar2Ex() succeeded!
Tcl_Eval() failed!
Tcl_GetStringResult() = can't read "imgdata": variable is array
Exiting... 
```

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:23:36.613

您可以使用 Tcl_ByteArraySetLength 或 Tcl_GetByteArrayFromObj 将 Tcl ByteArrayObj 类型视为缓冲区，这两者都允许您访问 Tcl 对象的数据部分。

```
Tcl_Obj *dataObj = Tcl_NewObj();
char *dataPtr = Tcl_SetByteArrayLength(dataObj, 1024); 
```

现在您可以使用 dataPtr 来设置对象中的字节。Tcl_SetByteArrayLength 函数将使这个对象成为一个 ByteArray 类型。

但是，您可能还想查看我用于拉伸 Tk 图像的[imgscale ，它使用各种插值模式，例如：](https://github.com/patthoyts/imgscale "图片比例尺")

```
image create photo thumbnail
::imgscale::bilinear $myphoto 64 64 thumbnail 1.0 
```

将某些照片缩小为缩略图。

# silverlight - 将图像放在页面顶部而不干扰点击事件 Windows Phone

> ID：13743038
> 
> 赞同：2
> 
> 时间：2012-12-06T11:51:32.747
> 
> 标签：silverlight, windows-phone-7, xaml

我有一个问题，我想在 Bing`Map`控件顶部的图像中显示，但我不希望它干扰我的地图控制手势。

该图像是一个十字准线，它在页面全屏上延伸，它捕获所有使用户无法使用地图的点击和缩放事件。

```
<Grid x:Name="LayoutRoot">
    <m:Map x:Name="LocationMap"/>
    <Image Source="/Assets/Crosshair.png"/>
</Grid> 
```

![在此处输入图像描述](../Images/e2dead8b6004c327dc596220a34b2b33.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:03:28.837

该`IsHitTestVisible`属性是我正在寻找的属性，通过在我的图像控件上将其设置为 false，它会停止捕获任何事件。

```
<Grid x:Name="LayoutRoot">
    <m:Map x:Name="LocationMap"/>
    <Image Source="/Assets/Crosshair.png" IsHitTestVisible="False"/>
</Grid> 
```

# cuda - 关于 cudaMemcpyAsync 函数

> ID：13743039
> 
> 赞同：9
> 
> 时间：2012-12-06T11:51:52.177
> 
> 标签：cuda

我有一些疑问。

最近我正在使用 CUDA 制作一个程序。

在我的程序中，Host 上有一个用 std::map(string, vector(int)) 编程的大数据。

通过使用这些数据，一些向量（int）被复制到 GPU 全局内存并在 GPU 上处理

处理后，在 GPU 上生成一些结果，并将这些结果复制到 CPU。

这些都是我的节目表。

1.  cudaMemcpy( ... , cudaMemcpyHostToDevice)
2.  内核函数（内核函数只有在必要的数据被复制到 GPU 全局内存时才能完成）
3.  cudaMemcpy( ... , cudaMemcpyDeviceToHost)
4.  重复 1~3 步 1000 次（对于另一个数据（向量））

但我想减少处理时间。

所以我决定在我的程序中使用 cudaMemcpyAsync 函数。

在搜索了一些文档和网页后，我意识到要使用 cudaMemcpyAsync 函数主机内存，其中有数据要复制到 GPU 全局内存必须分配为固定内存。

但是我的程序正在使用std::map，所以我不能把这个std::map数据放到固定内存中。

所以我没有使用这个，而是创建了一个缓冲区数组类型的固定内存，这个缓冲区总是可以处理复制向量的所有情况。

最后，我的程序是这样工作的。

1.  Memcpy（使用循环将数据从 std::map 复制到缓冲区，直到将整个数据复制到缓冲区）
2.  cudaMemcpyAsync( ... , cudaMemcpyHostToDevice)
3.  内核（内核函数只有在将整个数据复制到 GPU 全局内存时才能执行）
4.  cudaMemcpyAsync( ... , cudaMemcpyDeviceToHost)
5.  重复 1~4steps 1000 次（对于另一个数据（向量））

我的程序变得比以前的情况快得多。

但问题（我的好奇心）就在这一点上。

我试图以类似的方式制作另一个程序。

1.  Memcpy（仅将数据从 std::map 复制到一个向量的缓冲区）
2.  cudaMemcpyAsync( ... , cudaMemcpyHostToDevice)
3.  循环 1~2 直到整个数据复制到 GPU 全局内存
4.  内核（内核函数只有在必要的数据被复制到 GPU 全局内存时才能执行）
5.  cudaMemcpyAsync( ... , cudaMemcpyDeviceToHost)
6.  重复 1~5steps 1000 次（对于另一个数据（向量））

这种方法比上面讨论的方法快了大约 10%。

但我不知道为什么。

我认为 cudaMemcpyAsync 只能与内核函数重叠。

但我的情况我认为不是。而不是看起来可以在 cudaMemcpyAsync 函数之间重叠。

对不起我的长问题，但我真的很想知道为什么。

有人可以教我或向我解释什么是确切的设施“cudaMemcpyAsync”以及哪些功能可以与“cudaMemcpyAsync”重叠？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T15:00:54.983

cudaMemcpyAsync 的复制活动（以及内核活动）可以与*任何*主机代码重叠。此外，与设备之间的数据复制（通过 cudaMemcpyAsync）可以与内核活动重叠。所有 3 个活动：主机活动、数据复制活动和内核活动，可以相互异步完成，并且可以相互重叠。

正如您所看到和演示的，主机活动和数据复制或内核活动可以以相对简单的方式相互重叠：内核启动立即返回主机，cudaMemcpyAsync 也是如此。然而，为了获得数据复制和内核活动之间的最佳重叠机会，有必要使用一些额外的概念。为了获得最佳重叠机会，我们需要：

1.  固定的主机内存缓冲区，例如通过 cudaHostAlloc()
2.  使用 cuda 流来分离各种类型的活动（数据复制和内核计算）
3.  cudaMemcpyAsync 的使用（而不是 cudaMemcpy）

当然，您的工作也需要以可分离的方式分解。这通常意味着如果您的内核正在执行特定功能，您可能需要多次调用此内核，以便每次调用都可以处理单独的数据。例如，这允许我们在第一次内核调用处理数据块 A 时将数据块 B 复制到设备。这样我们就有机会将数据块 B 的副本与数据块 A 的内核处理重叠。

与 cudaMemcpyAsync（与 cudaMemcpy 相比）的主要区别在于：

1.  它可以在任何流中发出（它需要一个流参数）
2.  通常，它会*立即*将控制权返回给主机（就像内核调用一样），而不是等待数据复制完成。

第 1 项是必要的功能，以便数据副本可以与内核计算重叠。第 2 项是一项必要功能，以便数据复制可以与主机活动重叠。

尽管复制/计算重叠的概念非常简单，但在实践中实现需要一些工作。如需其他参考资料，请参阅：

1.  [CUDA 最佳实践指南的重叠复制/计算部分](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html#asynchronous-transfers-and-overlapping-transfers-with-computation)。
2.  [显示复制/计算重叠的基本实现的](http://docs.nvidia.com/cuda/cuda-samples/index.html#simple-multi-copy-and-compute)示例代码。
3.  [显示完整的多/并发内核复制/计算重叠场景](http://docs.nvidia.com/cuda/cuda-samples/index.html#concurrent-kernels)的示例代码。

请注意，上面的一些讨论是基于具有 2.0 或更高计算能力的设备（例如并发内核）。此外，不同的设备可能有一个或两个复制引擎，这意味着同时复制*到设备*和*从设备*复制只能在某些设备上进行。

# java - Android - 如何显示来自 SDcard android 的图像 使用 ImageGetter

> ID：13743040
> 
> 赞同：0
> 
> 时间：2012-12-06T11:51:51.430
> 
> 标签：java, android, html

大家好，我有问题我需要在 EditText 中使用显示图像：ImageGetter。这项工作

```
String html = "<img src=\"ic_launcher\">";
    CharSequence text = Html.fromHtml(html, new Html.ImageGetter(){
        public Drawable getDrawable(String source){
            int id = getResources().getIdentifier(source, "drawable", getPackageName());
            Drawable d = getResources().getDrawable(id);
            int w = d.getIntrinsicWidth();
            int h = d.getIntrinsicHeight();
            d.setBounds(0, 0, w, h);

            return d;
        }
    }, null);

    mContentEditText.setText(text); 
```

但我需要 SD 卡中的图像，而不是“R.drawable.IMAGE_NAME”，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:55:43.407

您必须在清单中应用适当的权限，以便您可以从外部存储中读取。然后创建一段代码，它将在您的 SD 卡中搜索您想要的图像。

```
Bitmap bitmap = BitmapFactory.decodeFile(imageFile.getAbsolutePath()); 
```

其中 imageFile 是您的 ImageFile，例如：`File imageFile = new File("/sdcard/gallery_photo_4.jpg");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:00:48.513

```
 public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

     mPath ="Your image Path here";
     l1=(LinearLayout) findViewById(R.id.layout1);
     l1.setBackgroundColor(Color.WHITE);
     System.out.println(mPath);

         Bitmap b=Bitmap.createScaledBitmap(BitmapFactory.decodeFile(mPath),l1.getWidth(),l1.getHeight(),false);
if(b!=null){

        ImageView iv=new ImageView(this);
            iv.setImageBitmap(b);
    l2.addView(iv);
    }

} 
```

这是适用于我的代码。希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:36:33.167

```
String html2 = "<img src=\"a.jpg\">";
    CharSequence text2 = Html.fromHtml(html2, new Html.ImageGetter(){
        public Drawable getDrawable(String source){
            String path = "/sdcard/a/" + source;
            File f = new File(path);
            Drawable bmp = Drawable.createFromPath(f.getAbsolutePath());
            bmp.setBounds(0, 0, bmp.getIntrinsicWidth(), bmp.getIntrinsicHeight());
            return bmp;
        }
    }, null);
    display.setText(text2); 
```

是为我工作！100% 感谢所有 :)

# python - 如何在方案中像 python 一样追加？

> ID：13743044
> 
> 赞同：2
> 
> 时间：2012-12-06T11:51:55.683
> 
> 标签：python, lisp, scheme, append, racket

像这样：

```
> (my-append (list 1 2) 3)
'(1 2 3) 
```

我知道`append`in`racket`实际上是连接两个列表。`cons`只需将元素添加到列表的**头部**而不是**尾部**

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:37:01.877

在 Pyton 中，该`append()`方法就地修改列表：

```
lst = [1, 2]
lst.append(3)

lst
=> [1, 2, 3] 
```

默认情况下，Racket 的列表是不可变的，最接近就地的`append()`需要您使用可变列表，并且您必须将要附加的元素打包到它自己的列表中：

```
(require scheme/mpair)

(define lst (mlist 1 2))
(mappend! lst (mlist 3))

lst
=> (mlist 1 2 3) 
```

请注意，在过程中使用不可变列表`append`将产生一个新列表，而原始列表保持不变 - 所以它不会“像 Python”：

```
(define lst (list 1 2))
(append lst (list 3))   ; this returns the new list '(1 2 3)

lst
=> (list 1 2) 
```

事实上，Scheme 的`append`过程就像 Python 的`+`列表之间的操作一样：

```
lst = [1, 2]
lst + [3]    # this returns the new list [1, 2, 3]

lst
=> [1, 2] 
```

想一想，Python`append()`可能有一个误导性的名称——在大多数函数式编程语言中，追加操作总是定义在两个*列表*之间，而在 Python 中，它是列表和元素之间的操作。也许`add()`会是一个更好的名字，就像Java的接口`add()`操作一样`List`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T23:46:39.943

如果您在 Racket 中，您可能想要查看可增长的向量库 ( [data/gvector](http://docs.racket-lang.org/data/gvector.html) )。这提供了一种容器类型，它支持您习惯使用 Python 的可增长列表的许多功能。

例子：

```
#lang racket
(require data/gvector)
(define lst (gvector 1 2))
(gvector-add! lst 3)
(for ([elt lst]) (printf "I see: ~s\n" elt)) 
```

否则，您的问题最终会归结为：如何使不可变链表像可变顺序分配的数组一样工作？这不会很好地工作：数据类型因不同的原因而不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:00:19.217

我不知道“append like python”是什么意思，但如果你只想在列表末尾插入一个新元素，你可以使用这个：

```
(define (my-append lst el)
  (append lst (list el))) 
```

# java - 读取文件并映射到有向图

> ID：13743046
> 
> 赞同：0
> 
> 时间：2012-12-06T11:52:06.480
> 
> 标签：java, list, readfile, directed-graph

我有读取文件功能，它将读取一个 txt 文件。读完后，我将值放入列表中。以下是样本数据：

```
public void readDisplayClient()
{   
DisplayClient dc = null;
try
{
    // Open the file that is the first 
    // command line parameter
    FileInputStream fstream = new FileInputStream("ClientData.txt");
    // Get the object of DataInputStream
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    String [] values = new String[3];
    int counter = 0;
    int clientCounter = 0;
    //Read File Line By Line
    while ((strLine = br.readLine()) != null)   
    {
        // Print the content on the console

        String delims = ";";
        String[] tokens = strLine.split(delims);

        if(counter == 0)//Reading total clients
        {                       
            totalClient = Integer.parseInt(tokens[0]);
            counter++;
        }
        else
        {
            //System.out.println("Test " + counter + " " + tokens.length);
            for (int i = 0; i < tokens.length; i++)
            {
                    values[i] = tokens[i];
                    //System.out.println(tokens[i]);
            }
            dc = new DisplayClient(clientCounter,values[0],values[1],values[2]);
            //dc.printDetails(); // save the connected nodes details to logger txt file.
            clientList.add(dc);
            clientCounter++;
        }
    }
    //Close the input stream
    in.close();
    ss.setTotalClient(totalClient);
    ss.setClientList(clientList);
    //ss.printClientList();
}
catch (Exception e)
{//Catch exception if any
    System.err.println("Error: " + e.getMessage());
}
} 
```

我的 txt 数据文件将类似于：

2// 共 2 个连接

0;1;500; // 节点 0 以 500 kbps 连接到节点 1

1;2;500 // 节点 1 以 500 kbps 连接到节点 2

当节点 1 连接到节点 2 时，它实际上也连接到节点 0。这能把它放在哈希图上吗？

我对此有点困惑。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:59:55.983

有多种方法可以做到这一点。由于每条边都有一个速度，你可以为每个节点设置一个类，为每条边设置一个类：

创建一个代表您的节点的类。它应该携带数据（节点 id），以及它从它发出的连接（边）（因为它是有向图）。

```
public class Node
{
  private int nodeId;
  private List<Connection> outboundConnections = new ArrayList<>();

  public Node(int nodeId)
  {
    this.nodeId = nodeId;
  }

  public void addConnection(Connection connection)
  {
    this.outboundConnections.add(connection);
  }

  //... setters and getters
} 
```

Then create a class which represents the edges, including the data for the connection and which node it connects to (destination, since its a directed graph):

```
 public class Connection
   {
      private int speedKbps;
      private Node endNode;

      public Connection(Node endNode, int speedKbps)
      {
        this.endNode = endNode;
        this.speedKbps = speedKbps;
      }

      //... setters and getters
   } 
```

In your class you keep a Map of all the created nodes (best if it is a member of the class but depends on what you're doing).

```
Map<Integer, Node> nodes = new TreeMap<>(); 
```

Then for each line in your loop you can do:

```
int fromNodeId = new Integer(values[0]);
int toNodeId = new Integer(values[1]);
int speedKbps = new Integer(values[2]);

Node fromNode = nodes.get(fromNodeId);
if (fromNode == null) //if we haven't seen this node already, create it and add it to the map
{
   fromNode = new Node(fromNodeId);
   nodes.put(fromNodeId, fromNode);
}

Node toNode = nodes.get(toNodeId);
if (toNode == null) //if we haven't seen this node already, create it and add it to the map
{
   toNode = new Node(toNodeId);
   nodes.put(fromNodeId, toNode);
}

Connection connection = new Connection(toNode, speedKbps);
fromNode.addConnection(connection); 
```

This approach works for a directed graph, assuming you want to traverse from the one of the nodes in the direction of the arrows.

There are of course other alternatives (for example storing it as a large 2D matrix, with the kbps as the number in the matrix and the node numbers on the left representing 'from' nodes, and the node numbers on the top the 'to' nodes, or the other way round).

# php - PHP - 对象的节点 - 内部带有“-”的变量名

> ID：13743049
> 
> 赞同：2
> 
> 时间：2012-12-06T11:52:19.690
> 
> 标签：php, object, variable-variables

根据讨论[如何检查字符串是否可以用作PHP中的变量名？](https://stackoverflow.com/questions/9844185/the-use-of-curly-braces-in-variable-names)用户 TIM 给出了一个很好的答案，但仍然没有解决我的问题。

我就是这样打电话的，但是在生产服务器上，他们有魔术引号 gpc 活动！和..当然..我不能禁用它，我不能要求禁用，最后但并非最不重要的是，我不能在运行时禁用它（按照手册）。所以在这种情况下，即使使用

```
echo $xml->example->{'phone-number-1'}; 
```

php 正在尝试在这些东西之间执行数学运算，在这种情况下，我真的很想了解如何访问该“节点”。

当然，如果我用魔法引号关闭来测试它，一切都可以按照手册进行。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:02:13.057

为了详细说明所发表的评论，以及您想要分享的可用信息，您的代码将按照宣传的方式工作，无论是否设置了 magic_quotes_gpc。它不会尝试对字符串执行任何算术运算，magic_quotes_gpc 不会影响 simplexml 解析其数据的方式。

```
~/temp  ►  cat foo.xml
<example>
    <node-ex>
       <identifier-1>ValueOfIdentifier1</identifier-1>
       <phone-number-1>141 555 1414</phone-number-1>
    </node-ex>
</example>

~/temp  ►  cat test.php
<?php
$root = simplexml_load_file("foo.xml");

echo $root->{'node-ex'}->{'identifier-1'} . "\n";
echo $root->{'node-ex'}->{'phone-number-1'} . "\n";

~/temp  ►  php test.php              
ValueOfIdentifier1
141 555 1414
~/temp  ►  php -dmagic_quotes_gpc=1 test.php
ValueOfIdentifier1
141 555 1414 
```

当然，如果您的示例与您实际使用的数据不同，那可能就是问题所在。如果启用了magic_quotes_gpc，则使用stripslashes() 应该将其反转，然后它应该可以工作。如果您使用的不是常量字符串，而是变量——这可能是问题的原因。但是，您的示例中没有任何内容表明任何应该受到 magic_quotes_gpc 或在属性名称中使用“-”的影响。

# ruby-on-rails - 在 RoR 上设计模块：未请求创建视图

> ID：13743050
> 
> 赞同：0
> 
> 时间：2012-12-06T11:52:25.873
> 
> 标签：ruby-on-rails, authentication, module, devise

我是 RoR 和设计框架的新手。

我只想登录管理员角色的页面。我已经执行了：

```
rails g devise Admin 
```

然后在 admin.rb 模型中我只有这个模块：

```
class Admin < ActiveRecord::Base
  devise :database_authenticatable, :rememberable 

  attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

并正确编辑迁移文件。

为什么 devise 也创建了 sign_up 页面？我已经验证，如果我尝试注册用户，那是行不通的……但我不想要那个页面。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:01:35.167

您可以告诉 Devise 只允许会话路由，这应该只允许登录和注销，而不是创建新用户。

将 /config/routes.rb 中对“devise_for”的调用更改为类似；

```
devise_for :users, :only => :sessions 
```

查看以下页面以获取有关设计路由的更多信息；

[http://rubydoc.info/github/plataformatec/devise/master/ActionDispatch/Routing/Mapper#devise_for-instance_method](http://rubydoc.info/github/plataformatec/devise/master/ActionDispatch/Routing/Mapper#devise_for-instance_method)

# angularjs - 如何使用 AngularJS 访问浏览器控制台中的 $scope 变量？

> ID：13743058
> 
> 赞同：1294
> 
> 时间：2012-12-06T11:52:41.037
> 
> 标签：angularjs, angularjs-scope

我想`$scope`在 Chrome 的 JavaScript 控制台中访问我的变量。我怎么做？

我在控制台中既看不到`$scope`也看不到我的模块名称`myapp`作为变量。

* * *

## 回答 #1

> 赞同：1827
> 
> 时间：2012-12-06T12:56:21.127

在开发人员工具的 HTML 面板中选择一个元素，然后在控制台中输入：

```
angular.element($0).scope() 
```

在[WebKit](http://en.wikipedia.org/wiki/WebKit)和 Firefox 中，`$0`是对元素选项卡中选定 DOM 节点的引用，因此通过这样做，您可以在控制台中打印出选定的 DOM 节点范围。

您还可以按元素 ID 定位范围，如下所示：

```
angular.element(document.getElementById('yourElementId')).scope() 
```

**插件/扩展**

您可能想查看一些非常有用的 Chrome 扩展程序：

*   [巴达朗](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk)。这已经有一段时间了。

*   [ng检查员](http://ng-inspector.org/)。这是最新的，顾名思义，它允许您检查应用程序的范围。

**玩 jsFiddle**

使用 jsfiddle 时，您可以通过在 URL 末尾添加来以*显示*模式打开小提琴。`/show`像这样运行时，您可以访问`angular`全局。你可以在这里试试：

[http://jsfiddle.net/jaimem/Yatbt/show](http://jsfiddle.net/jaimem/Yatbt/show)

**jQuery 精简版**

如果在 AngularJS 之前加载 jQuery，`angular.element`可以传递一个 jQuery 选择器。所以你可以检查控制器的范围

```
angular.element('[ng-controller=ctrl]').scope() 
```

一个按钮的

```
 angular.element('button:eq(1)').scope() 
```

... 等等。

您可能实际上想要使用全局函数来使其更容易：

```
window.SC = function(selector){
    return angular.element(selector).scope();
}; 
```

现在你可以这样做

```
SC('button:eq(10)')
SC('button:eq(10)').row   // -> value of scope.row 
```

在这里查看：http: [//jsfiddle.net/jaimem/DvRaR/1/show/](http://jsfiddle.net/jaimem/DvRaR/1/show/)

* * *

## 回答 #2

> 赞同：189
> 
> 时间：2013-04-02T04:49:14.257

为了改进jm的答案......

```
// Access whole scope
angular.element(myDomElement).scope();

// Access and change variable in scope
angular.element(myDomElement).scope().myVar = 5;
angular.element(myDomElement).scope().myArray.push(newItem);

// Update page to reflect changed variables
angular.element(myDomElement).scope().$apply(); 
```

或者，如果您使用的是 jQuery，这也是同样的事情......

```
$('#elementId').scope();
$('#elementId').scope().$apply(); 
```

从控制台访问 DOM 元素的另一种简单方法（如 jm 所述）是在“元素”选项卡中单击它，它会自动存储为`$0`.

```
angular.element($0).scope(); 
```

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2013-09-06T16:36:28.787

如果你已经安装了[Batarang](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk)

然后你可以写：

```
$scope 
```

当您在 chrome 的元素视图中选择了元素时。参考 - [https://github.com/angular/angularjs-batarang#console](https://github.com/angular/angularjs-batarang#console)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2014-06-04T17:02:47.433

这是一种在没有 Batarang 的情况下进入范围的方法，您可以这样做：

```
var scope = angular.element('#selectorId').scope(); 
```

或者，如果您想通过控制器名称查找范围，请执行以下操作：

```
var scope = angular.element('[ng-controller=myController]').scope(); 
```

对模型进行更改后，您需要通过调用将更改应用到 DOM：

```
scope.$apply(); 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2012-12-06T21:16:25.333

在你的控制器的某个地方（通常最后一行是一个好地方），把

```
console.log($scope); 
```

如果您想查看内部/隐式范围，例如在 ng-repeat 内部，则可以使用类似的方法。

```
<li ng-repeat="item in items">
   ...
   <a ng-click="showScope($event)">show scope</a>
</li> 
```

然后在你的控制器中

```
function MyCtrl($scope) {
    ...
    $scope.showScope = function(e) {
        console.log(angular.element(e.srcElement).scope());
    }
} 
```

请注意，上面我们在父作用域中定义了 showScope() 函数，但这没关系......子/内部/隐式作用域可以访问该函数，然后根据事件打印出作用域，因此与关联的作用域触发事件的元素。

@jm- 的建议也有效，~~但我认为它不适用于 jsFiddle。我在 Chrome 中的 jsFiddle 上收到此错误：~~

 ~~```
> angular.element($0).scope()
ReferenceError: angular is not defined 
```~~  ~~* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-02-24T04:00:40.350

对许多这些答案的一个警告：如果您为控制器设置别名，您的范围对象将位于从`scope()`.

例如，如果您的控制器指令是这样创建的： `<div ng-controller="FormController as frm">` 那么要访问`startDate`控制器的属性，您可以调用`angular.element($0).scope().frm.startDate`

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-08-02T16:41:16.493

要添加和增强其他答案，请在控制台中输入`$($0)`以获取元素。如果它是 Angularjs 应用程序，则默认加载 jQuery lite 版本。

如果你不使用 jQuery，你可以使用 angular.element($0) 如下：

```
angular.element($0).scope() 
```

要检查您是否有 jQuery 和版本，请在控制台中运行以下命令：

```
$.fn.jquery 
```

如果您检查了一个元素，则当前选定的元素可通过命令行 API 参考 $0 获得。Firebug 和 Chrome 都有这个参考。

但是，Chrome 开发人员工具将使用这些引用提供通过名为 $0、$1、$2、$3、$4 的属性选择的最后五个元素（或堆对象）。最近选择的元素或对象可以引用为 $0，第二个最近的元素或对象可以引用为 $1，依此类推。

这是[Firebug 的命令行 API 参考](https://getfirebug.com/wiki/index.php/Command_Line_API)，列出了它的参考。

`$($0).scope()`将返回与元素关联的范围。您可以立即看到它的属性。

您可以使用的其他一些东西是：

*   查看元素父范围：

`$($0).scope().$parent`.

*   你也可以链接这个：

`$($0).scope().$parent.$parent`

*   您可以查看根范围：

`$($0).scope().$root`

*   如果您突出显示具有隔离范围的指令，您可以使用以下命令查看它：

`$($0).isolateScope()`

有关更多详细信息和示例，请参阅[调试不熟悉的 Angularjs 代码的提示和技巧。](http://eng.localytics.com/tips-and-tricks-for-debugging-unfamiliar-angularjs-code/)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-01-23T23:54:54.747

我同意最好的是 Batarang，它是`$scope`在选择一个对象之后（它与 jQuery 相同`angular.element($0).scope()`甚至更短：（`$($0).scope()`我最喜欢的））

另外，如果像我一样，您有`body`元素的主要范围，a`$('body').scope()`可以正常工作。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-11-01T16:26:05.647

只需分配`$scope`为全局变量。问题解决了。

```
app.controller('myCtrl', ['$scope', '$http', function($scope, $http) {
    window.$scope = $scope;
} 
```

实际上，我们`$scope`在开发中比在生产中需要更多。

@JasonGoemaat 已经提到过，但将其添加为该问题的合适答案。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-12-07T15:54:56.777

检查元素，然后在控制台中使用它

```
s = $($0).scope()
// `s` is the scope object if it exists 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-12-13T21:16:35.250

我过去用过`angular.element($(".ng-scope")).scope();`，效果很好。仅当页面上只有一个应用程序范围时才有用，或者您可以执行以下操作：

`angular.element($("div[ng-controller=controllerName]")).scope();`或者`angular.element(document.getElementsByClassName("ng-scope")).scope();`

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-08-03T20:53:04.453

我通常为此使用 jQuery data() 函数：

```
$($0).data().$scope 
```

$0 当前是 chrome DOM 检查器中的选定项。$1, $2 .. 等等是之前选择的项目。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2021-09-30T05:33:21.303

您可以首先从要检查的范围内的 DOM 中选择一个元素：

[![在此处输入图像描述](../Images/b633cd8ff267615d38a7959268c6378d.png)](https://i.stack.imgur.com/kuNDl.png)

然后您可以通过在控制台中查询以下内容来查看范围对象：

`angular.element($0).scope()`

您可以查询范围内的任何属性，例如：

`angular.element($0).scope().widgets`

或者您可以检查附加到范围的控制器：

`angular.element($0).scope().$myControllerName`

（另一个可行的选择是在您的代码中放置一个断点。如果`$scope`当前位于当前的“普通旧 JavaScript”范围内，那么您可以`$scope`在控制台中检查 的值。）

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-09-03T16:24:28.300

假设您要访问元素的范围，例如

```
<div ng-controller="hw"></div> 
```

您可以在控制台中使用以下内容：

```
angular.element(document.querySelector('[ng-controller=hw]')).scope(); 
```

这将为您提供该元素的范围。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-06-18T22:19:31.477

这也需要安装 jQuery，但非常适合开发环境。它查看每个元素以获取范围的实例，然后返回标有控制器名称的它们。它还删除了任何以 $ 开头的属性，这是 angularjs 通常用于其配置的。

```
let controllers = (extensive = false) => {
            let result = {};
            $('*').each((i, e) => {
                let scope = angular.element(e).scope();
                if(Object.prototype.toString.call(scope) === '[object Object]' && e.hasAttribute('ng-controller')) {
                    let slimScope = {};
                    for(let key in scope) {
                        if(key.indexOf('$') !== 0 && key !== 'constructor' || extensive) {
                            slimScope[key] = scope[key];
                        }
                    }
                    result[$(e).attr('ng-controller')] = slimScope;
                }
            });

            return result;
        } 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-06-21T15:26:27.667

在 Chrome 的控制台：

```
 1\. Select the **Elements** tab
 2\. Select the element of your angular's scope. For instance, click on an element <ui-view>, or <div>, or etc.
 3\. Type the command **angular.element($0).scope()** with following variable in the angular's scope 
```

**例子**

```
angular.element($0).scope().a
angular.element($0).scope().b 
```

**Chrome 的控制台** [![在此处输入图像描述](../Images/1695832e1621c4fa535322f32c10d8e3.png)](https://i.stack.imgur.com/a7fib.png)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-03-08T17:05:16.587

仅出于调试目的，我将其放在控制器的开头。

```
 window.scope = $scope;

  $scope.today = new Date(); 
```

这就是我使用它的方式。

[![在此处输入图像描述](../Images/eac44e522dc507c75d92be77bd93de36.png)](https://i.stack.imgur.com/U1faS.png)

然后在我完成调试时将其删除。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-12-12T09:19:38.473

在 Angular 中，我们通过 angular.element().... 获得 jquery 元素。

> `angular.element().scope();`

例子：

`<div id=""></div>`

* * *

## 回答 #19

> 赞同：-7
> 
> 时间：2015-06-17T08:52:34.597

只需在范围之外定义一个 JavaScript 变量并将其分配给控制器中的范围：

```
var myScope;
...
app.controller('myController', function ($scope,log) {
     myScope = $scope;
     ... 
```

而已！它应该适用于所有浏览器（至少在 Chrome 和 Mozilla 中测试过）。

它正在工作，我正在使用这种方法。~~

# c# - 使用 linq 获取 SQL Server 日期

> ID：13743059
> 
> 赞同：-1
> 
> 时间：2012-12-06T11:52:54.547
> 
> 标签：c#, asp.net, wcf, linq, sql-server-express

在 WCF 服务中，我使用 Linq 类。我的代码如下：

```
AttendenceDataContext projectDataContext=new AttendenceDataContext();
var brAttendence = new BR_Attendance()
{
    SupId =1,
    AttenDate=from w in projectDataContext.gete,
    InTime =,
    OutTime =,
    ImageName =,
    ImageUrl =,
    PresentBR =,
    AbsentBR =,
    Active = true
}; 
```

我在 wcf 服务中编写代码，我可以在我的操作合同方法中插入*getsysdatefrom 。*我的wcf服务代码如下：

```
namespace ServiceHost
{
    [ServiceContract(Namespace = "")]
    [SilverlightFaultBehavior]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class UploadService
    {
        [OperationContract]
        public bool Upload(ImageFile image)
        {
            FileStream fileStream = null;
            BinaryWriter writer = null;
            string filePath;

            try
            {
                filePath = HttpContext.Current.Server.MapPath(".") + "\\Picture\\" + image.ImageName;
                if (image.ImageName != string.Empty)
                {
                    fileStream = File.Open(filePath, FileMode.Create);
                    writer = new BinaryWriter(fileStream);
                    writer.Write(image.Imagestream);
                }
                if (fileStream != null)
                    fileStream.Close();
                if (writer != null)
                    writer.Close();

                AttendenceDataContext projectDataContext = new AttendenceDataContext();
                var brAttendence = new BR_Attendance()
                {
                    SupId = 1,
                    AttenDate = from w in projectDataContext.gete,
                    InTime =,
                    OutTime =,
                    ImageName =,
                    ImageUrl =,
                    PresentBR =,
                    AbsentBR =,
                    Active = true
                };

                return true;
            }
            catch (Exception)
            {
                if (fileStream != null)
                    fileStream.Close();
                if (writer != null)
                    writer.Close();
                return false;
            }
            finally
            {
            }
        }
    }
} 
```

在*AttenDate*我想获取 microsoft sql server 当前日期。如何得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:04:26.217

听起来像一个重复的问题。

如果您使用的是实体框架，您可以查看：[如何使用实体框架向数据库服务器询问当前日期时间？](https://stackoverflow.com/questions/2585272/how-to-ask-database-server-for-current-datetime-using-entity-framework)

如果您使用的是 Linq to Sql，您可以查看：[如何在 Linq to SQL 表达式中使用 SQL 的 GETDATE() 和 DATEADD()？](https://stackoverflow.com/questions/200617/how-do-i-use-sqls-getdate-and-dateadd-in-a-linq-to-sql-expression)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:03:30.053

在 AttendenceDataContext 中编写此代码片段：

```
Function(Name = "GetDate", IsComposable = true)]
 public System.DateTime GetServerDate()
 {
   return ((System.DateTime)(this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod()))).ReturnValue));
 } 
```

接着

```
 AttenDate = AttendenceDataContext.GetServerDate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T07:57:08.783

```
[Function(Name = "GetDate", IsComposable = true)]
public System.DateTime GetServerDate()
{
    return ((System.DateTime)(this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod()))).ReturnValue));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-10T11:10:55.310

```
public DateTime getServerTime()
{
    workcalendar2Entities1 db = new workcalendar2Entities1();
    var con = db.Database.Connection;
    var cmd = con.CreateCommand();
    cmd.CommandText = "SELECT SYSDATETIME()";
    con.Open();
    var datetime = (DateTime)cmd.ExecuteScalar();
    con.Close();
    return datetime;
} 
```

我正在使用它与实体框架一起使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-10T02:35:12.227

你可以试试这个：

```
 using (AttendenceDataContext dboContext = new AttendenceDataContext())
                {
                    var dQuery = dboContext.Database.SqlQuery<DateTime>("SELECT getdate()");
                    return dQuery.AsEnumerable().First();
                } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-06T11:54:19.870

你有没有尝试过

```
System.DateTime.Now 
```

这将返回当前日期和时间。

请查看以下页面以获取更多信息：

[日期时间现在属性](http://msdn.microsoft.com/en-us//library/system.datetime.now.aspx)

# c# - C# Datagridview Doubliclick 事件和行上的 Click 事件

> ID：13743064
> 
> 赞同：0
> 
> 时间：2012-12-06T11:53:13.543
> 
> 标签：c#, datagridview, click, double-click

我的 C# 应用程序中有一个 datagridview。selectionmode 设置为 FullRowSelect。当用户单击/双击一行时，我有一个双击事件和一个单击事件。不幸的是，尽管我双击一行，但只有单击事件开始。如何区分这两个事件？

# ios - UIKit 中 Cocos2D replaceScene 的类比

> ID：13743067
> 
> 赞同：1
> 
> 时间：2012-12-06T11:53:29.603
> 
> 标签：ios, uiviewcontroller, replace, cocos2d-iphone, containment

我已经使用 Cocos2D 几个月了。我用：

```
MyCCScene *sceneToRun = [MyCCScene node];
[[CCDirector sharedDirector] replaceScene:sceneToRun]; 
```

这将加载新场景，从内存中清除前一个场景，然后显示新场景。很简单。

问题：UIKit 中是否有类似的东西？

-Modal segues 将旧的 ViewController 保存在内存中，它们的目的是不同的。

-Push segues 仅在 UINavigationControllers 中工作。

我认为要走的路是实现我自己的 Container ViewController 以我想要的方式处理它的子 ViewControllers 和内存。[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)

但我并不完全确定。没有更直接的方法吗？对于如此简单而明显的事情，这看起来像是一个巨大的矫枉过正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:37:54.013

我可能已经找到了一个不错的解决方案。应该使用 UINavigationController，并手动管理其 viewContollers 属性（即 UIViewController 的堆栈）。在加载新的 UIViewController 之后（或之前），您可以从堆栈中删除旧的 UIViewController，从而将其从内存中清除。

这篇文章有帮助： [如何从 UINavigationController 弹出视图并在一次操作中将其替换为另一个视图？](https://stackoverflow.com/questions/410471/how-can-i-pop-a-view-from-a-uinavigationcontroller-and-replace-it-with-another-i)

这样你就可以创建一个程序流，只有当 UIViewController 一次在内存中时，当你需要一个新的 UIViewController 时替换它们。

# java - 应用程序中的 Android 模式输入

> ID：13743068
> 
> 赞同：2
> 
> 时间：2012-12-06T11:53:32.897
> 
> 标签：java, android, security, android-intent

我想知道对于 Android 的平庸 EditText 密码输入是否还有其他选择。是否有类似于锁屏模式解锁的 API 或开源代码可以集成到我的应用程序中？Intent 可能会返回一个哈希、数字、字符串或任何代表用户输入的 Pattern 的地方。

我在想类似的东西。

1.  我的代码调用意图。
2.  类似于 Lockscreen Pattern 的东西显示
3.  用户输入他的模式
4.  Intent 返回代表该模式的内容。
5.  我取消了返回的数据。

为什么我想要/需要这个？在我的应用程序中，我需要用户输入密码（不用于登录或其他用途，用于加密）。而且我认为用户打字很乏味。对于那些滑动锁定模式来说，它会更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:08:24.987

看看这个项目[android-lockpattern](https://code.google.com/p/android-lockpattern/)它应该可以解决问题。

例如，要创建新模式，请使用

```
...
// this is your preferred flag
private static final int _ReqCreatePattern = 0;

...

Intent intent = new Intent(context, LockPatternActivity.class);
intent.putExtra(LockPatternActivity._Mode, LockPatternActivity.LPMode.CreatePattern);
startActivityForResult(intent, _ReqCreatePattern); 
```

然后得到结果

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case _ReqCreatePattern:
        if (resultCode == RESULT_OK) {
            String pattern = data.getStringExtra(LockPatternActivity._Pattern);
            ...
        }
        break;
    }
} 
```

# c++ - 使用 DirectShow 将视频捕获到 AVI 文件

> ID：13743076
> 
> 赞同：2
> 
> 时间：2012-12-06T11:53:54.280
> 
> 标签：c++, windows, video, directshow, video-capture

我正在尝试使用 directshow 编写一个 C++ 应用程序，将视频捕获保存到文件中。代码中的步骤是： 1\. 创建 Capture Graph Builder 2\. 创建 System Device Enumerator 3\. 创建 System Device Enumerator - 为了获取捕获过滤器 4\. 创建视频捕获类别的枚举器 5\. 创建查询捕捉视频

附上代码

```
// gets the device filter
HRESULT getDeviceFilter(REFCLSID clsid, int order, IBaseFilter **pCap)
{

ICreateDevEnum *pDevEnum = NULL;
IEnumMoniker *pEnum = NULL;

// Create the System Device Enumerator.
HRESULT hr = CoCreateInstance(CLSID_SystemDeviceEnum, NULL,
                              CLSCTX_INPROC_SERVER, IID_ICreateDevEnum,
                              reinterpret_cast<void**>(&pDevEnum));

if (SUCCEEDED(hr))
{
    // Create an enumerator for the video capture category.
    hr = pDevEnum->CreateClassEnumerator( clsid, &pEnum, 0);
}

IMoniker *pMoniker = NULL;

if (pEnum->Next(1, &pMoniker, NULL) == S_OK)
    hr = pMoniker->BindToObject(0, 0, IID_IBaseFilter, (void**)pCap);

return hr;
}

int main()
{
IGraphBuilder *pGraph = 0;
ICaptureGraphBuilder2 *pBuild = 0;
IBaseFilter *pCap = 0;
HRESULT hr = CoInitialize(NULL);

// Create the Capture Graph Builder.
hr = CoCreateInstance(CLSID_CaptureGraphBuilder2, 
                              NULL, 
                              CLSCTX_INPROC_SERVER, 
                                  IID_ICaptureGraphBuilder2, 
                              (void**)&pBuild );

ICreateDevEnum *pDevEnum = NULL;
IEnumMoniker *pEnum = NULL;

// Create the System Device Enumerator.
hr = CoCreateInstance(CLSID_SystemDeviceEnum, 
                      NULL,
                      CLSCTX_INPROC_SERVER, 
                      IID_ICreateDevEnum,
                      reinterpret_cast<void**>(&pDevEnum));

IBaseFilter *pMux = 0;
hr = pBuild->SetOutputFileName(&MEDIASUBTYPE_Avi,  // Specifies AVI for the target file.
                               L"C:\\Example.avi", // File name.
                               &pMux,              //     Receives a pointer to the mux.
                               NULL);              //     (Optional) Receives a pointer to the file sink.

// gets the first device, VDM tv card
hr = getDeviceFilter(CLSID_VideoInputDeviceCategory, 0, &pCap);

hr = pBuild->RenderStream(&PIN_CATEGORY_CAPTURE, // Pin category.
                          &MEDIATYPE_Video,      // Media type.
                          pCap,                  // Capture filter.
                          NULL,                  // Intermediate filter (optional).
                          pMux);                 // Mux or file sink filter.

// Release the mux filter.
pMux->Release();

IConfigAviMux *pConfigMux = NULL;
hr = pMux->QueryInterface(IID_IConfigAviMux, (void**)&pConfigMux);
if (SUCCEEDED(hr))
{
    pConfigMux->SetMasterStream(1);
    pConfigMux->Release();
}

return 0;
} 
```

但是，在调用**RenderStream 时**，我收到**E_INVALIDARG**错误

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:39:07.413

看看[这个话题](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373396%28v=vs.85%29.aspx)。您似乎错过了一些步骤。

首先，您没有`pGraph`在任何地方使用。您应该创建一个图形管理器，然后通过使用[SetFilterGraph](http://msdn.microsoft.com/en-us/library/windows/desktop/dd311925%28v=vs.85%29.aspx)为其提供指向图形管理器的指针来初始化图形构建器。

```
// Create the Filter Graph Manager.
hr = CoCreateInstance(CLSID_FilterGraph, 0, CLSCTX_INPROC_SERVER,
    IID_IGraphBuilder, (void**)&pGraph);
if (SUCCEEDED(hr))
{
    // Initialize the Capture Graph Builder.
    pBuild->SetFiltergraph(pGraph);

    // ...
} 
```

其次，您正在使用不受图形管理器管理的过滤器。[从这里](http://msdn.microsoft.com/en-us/library/windows/desktop/dd311924%28v=vs.85%29.aspx)引用：

> 在调用该方法之前，必须将 pSource、pIntermediate 和 pSink 指定的所有过滤器添加到图中。

您必须使用[AddFilter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390016%28v=vs.85%29.aspx)`pCap`添加过滤器和`pMux`您之前创建的图形管理器。您应该在调用 RenderStream 之前执行此操作。之所以如此，是因为 RenderStream 最终会调用管理器上的连接方法。

* * *

如果上述步骤不能解决您的问题，您可以尝试其他几种方法。

**设备过滤器**。您正在使用 的第一个设备`CLSID_VideoInputDeviceCategory`，但您确定这是正确的设备吗？网络摄像头等也包含在此类别中。确保没有连接其他同类设备，然后重试。

**连接**。每个设备都是不同的。可能是您的设备无法直接连接到多路复用器。在这种情况下，我们必须找出原因，并确定是否需要连接额外的过滤器（如解码器）。[GraphEdit](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407274%28v=vs.85%29.aspx)是查找这些过滤器的一种非常快速的方法。

**引脚类别/媒体类型**。以我的经验，E_INVALIDARG 90% 的时间是由`RenderStream`. 尝试将 pin 类别或媒体类型设置为`NULL`。

**System Device Enumerator**：正如您所描述的，您要创建两次系统设备枚举器。这对我来说似乎很奇怪，为什么不同时使用一个呢？

* * *

如果您的代码仍然无法正常工作，您应该向我提供更多信息。您在使用[GraphEdit](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407274%28v=vs.85%29.aspx)时实现了目标吗？您的 VDM 电视卡过滤器看起来如何（引脚、媒体类型）？

# html - 将 HTML 放入提交按钮的值中

> ID：13743078
> 
> 赞同：6
> 
> 时间：2012-12-06T11:53:56.263
> 
> 标签：html, forms, input, submit

我有一个用于保存表单的提交按钮。在提交按钮内，我想使用 HTML 标记。我正在使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)，我希望保存图标出现在按钮中保存的单词旁边。用于此的 HTML 是

```
<i class="icon-save"></i> Save 
```

唯一的问题是我似乎无法让 HTML`value=""`在提交按钮的属性内呈现。如何让 HTML 在提交按钮内呈现？这不会解析 HTML，它实际上会呈现一个带有文字内容的按钮

```
<input type="submit" value="<i class='icon-save'></i> Save" /> 
```

[这是我想要的一个例子](http://jsfiddle.net/d8sNv/1/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T11:58:58.553

你试过这样的 `button`标签吗：

```
<button type="submit">
   <i class='icon-save'></i> Save
</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:06:55.083

使用背景图片也可以实现这个[JSFiddle](http://jsfiddle.net/ssASY/)

```
<input type="button" 
       style="background-image:url(http://icons.iconarchive.com/icons/double-j-design/ravenna-3d/24/Access-icon.png);
       background-position:left; background-repeat:no-repeat; 
       padding-left:30px; padding-top:4px; padding-bottom:4px; padding-right:4px" 
       value="Save" />​ 
```

# ubuntu - ubuntu 上的 Jnetpcap

> ID：13743082
> 
> 赞同：0
> 
> 时间：2012-12-06T11:54:10.837
> 
> 标签：ubuntu, jnetpcap

好的，这是我的问题，我试图让 jnetpcap 在 ubuntu 中工作，但我遇到了一些问题。我尝试使用 jnetpcap 网站上的说明进行安装，将 jar 添加到构建路径很好，但我似乎无法在 Eclipse 上运行任何程序。我的代码如下。我收到的错误消息是“找不到任何设备，错误是”。除了将 jar 添加到构建路径之外，安装时我还应该做些什么，还是另一个问题？

```
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import org.jnetpcap.Pcap;
import org.jnetpcap.PcapIf;
import org.jnetpcap.packet.PcapPacket;
import org.jnetpcap.packet.PcapPacketHandler;

public class apples {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    List<PcapIf> devices = new ArrayList<PcapIf>();
    StringBuilder error = new StringBuilder();

    int x = Pcap.findAllDevs(devices, error);

    if(x==Pcap.NOT_OK||devices.isEmpty()){
        System.err.printf("Can't find any devices, error is %s", error.toString());
        return;
    }

    System.out.println("Network devices found");

    PcapIf device = devices.get(0);

    int snaplen = 64*1024;
    int flags = Pcap.MODE_PROMISCUOUS;
    int timeout = 10*1000;
    Pcap open = Pcap.openLive(device.getName(), snaplen, flags, timeout, error);

    if(open==null){
        System.err.printf("Error while opening device for capture:"+error.toString());
        return;
    }
    PcapPacketHandler<String> printSummaryHandler = new PcapPacketHandler<String>(){

        public void nextPacket(PcapPacket packet, String user){
            Date timestamp = new Date(packet.getCaptureHeader().timestampInMillis());
            int caplen = packet.getCaptureHeader().caplen();
            int len = packet.getCaptureHeader().wirelen();

            System.out.printf("Received packet at %s caplen=%-4d len=%-4d %s\n", timestamp.toString(), caplen, len, user);
        }
    };

    open.loop(10, printSummaryHandler, "Message!" );

    open.close();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T11:01:36.903

请首先以 root 身份运行 eclipse 来运行您的代码。我曾经在这个库中遇到过同样的问题，当我以 root 身份运行 eclipse 时它得到了修复。您可以打开终端并键入以下命令来运行 eclipse：

```
 sudo /your/eclipse/directory/eclipse 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T10:00:01.903

该错误可能与 jar 或 .so 文件有关。我相信您必须在eclipse中手动加载jar并将共享对象文件放入项目中。希望这可以帮助。

# django - 虚拟目录中的 Django 根站点

> ID：13743086
> 
> 赞同：2
> 
> 时间：2012-12-06T11:54:20.867
> 
> 标签：django, urlconf

以下是设置：

*   我的 Django 应用程序所在的 IIS 6 中有一个虚拟目录，IIS 配置为将该虚拟目录上的每个请求传递给 Django WSGI 处理程序

    假设这是 domain.com/virtual/

*   在我的 Django dev URL CONF 中，我的 url 配置如下：`url( r'^home$, 'project.views.home' )`

**问题**：

是否有一种简单的方法（通过 Django 设置或服务器设置）为 django 应用程序设置某种 ROOT_URL？（无需手动添加，因为这与 i18n_patterns 不兼容）

Django 应该将所有模式视为根植于 ROOT_URL 并重定向 - 再次 - 相对于同一个 ROOT URL。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T15:07:30.770

我过去曾这样做过。

在您的设置文件中添加一个名为的设置：VIRTUAL_DIRECTORY = "your_virtual_directory/"

如果您正在开发或在它自己的站点域后面有这个，您可以将其保留为空白。

然后在您网站的 urls.py 文件中将其添加到所有顶级 url 模式中：

```
from django.conf import settings

urlpatterns = patterns('',
    url(r'%sadmin' % settings.VIRTUAL_DIRECTORY),
) 
```

为所有 url 模式执行字符串模式。您只需要在站点级别的 urls.py 上执行此操作，而不是针对每个应用程序。这样，如果您有一个非空白 VIRTUAL_DIRECTORY ，那么它将在您的所有顶级 url 模式前添加前缀。

# android - 应用程序在尝试启动 Intent 时崩溃

> ID：13743089
> 
> 赞同：0
> 
> 时间：2012-12-06T11:54:26.227
> 
> 标签：android, android-intent

我有一个启动画面，我想在我的主应用程序屏幕之前运行。但是，当计时器结束时，应用程序崩溃。关于为什么会发生这种情况的任何想法？提前致谢。

下面是参考代码

```
public class Splash extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash);

        Thread timer = new Thread() {
            // Whatever is enclosed in the {} of method run(), runs when we
            // start the application
            public void run() {
                try {
                    sleep(2000);

                } catch (InterruptedException e) {
                    e.printStackTrace();

                } finally {

                    Intent openMainScreen = new Intent("com.package.Main_Screen");
                    startActivity(openMainScreen);

                }
            }
        };

        timer.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:58:27.353

你为什么不简单地使用这种Intent，

```
Intent openMainScreen = new Intent(Splash.this,Main_Screen.class);
startActivity(openMainScreen); 
```

并确保您已像这样在清单中添加了活动，

```
<activity android:name=".Main_Screen">
 </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:58:05.683

写下面的代码

```
Intent openMainScreen = new Intent(this, MainActivity.class);
startActivity(openMainScreen); 
```

代替

```
Intent openMainScreen = new Intent("com.package.Main_Screen");
startActivity(openMainScreen); 
```

并将您的 MainActivity 声明到 Androidmanifest.xml 文件中。

```
<activity
    android:name=".MainActivity"
    android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

它会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:02:09.370

你是`startActivity`从不同的地方调用的`Thread`。你必须从它运行它。`UI` `thread`你想要实现的目标可以通过以下方式轻松完成

```
 public class Splash extends Activity {
        Handler handler;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_splash);
            handler = new Handler();
            handler.postDelayed(new Runnable() {
                public void run() {
                    Intent openMainScreen = new Intent(Splash.this,
                            Main_Screen.class);
                    startActivity(openMainScreen);

                }
            }, 2000);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:07:19.650

你必须这样打电话

```
Intent openMainScreen = new Intent(ClassName.this, MainActivity.class);
startActivity(openMainScreen); 
```

你必须在清单文件中注册它

```
 <activity
        android:name=".MainActivity"
        android:label="@string/app_name" > 
```

# java - 通过引用传递的java函数原语

> ID：13743091
> 
> 赞同：1
> 
> 时间：2012-12-06T11:54:36.960
> 
> 标签：java, function, reference, primitive

我多次遇到这个问题，所以我在这里问什么是最佳实践

我有一个过程可以实现几个对象，修改它们并升起一些标志。

```
 boolean erros = false;
    for(MyData data: allData){
    //...

        //@ToDo  move this to a function titleCheck()
        if(data.getTitle().isEmpty()){
            data.setTitle('none');
            erros = true;
        }

        if(data.getTitle().equals('BIG')){
            data.setTitle('small')
        }

        if(data.getTitle().equals('error')){
            errors = true;
        }

    //...
    } 
```

我需要一个函数来更新数据并更改一个或多个标志，因此首选语法如下所示：

```
MyData updatedData = titleCheck(MyData data, &erros){...} 
```

但是布尔值不能通过引用传递，所以它们的工作原理是：

```
boolean errors = titleCheck(MyData dataForUpdate){...} 
```

女巫不太直观..（至少对我来说......来自PHP背景）如果您有几个要更新的标志，问题就会变得更大。

那么..处理这种结构的正确Java方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:59:32.547

当你这样做时：

```
titleCheck(MyData data); 
```

鉴于您上面的代码，您实际上是在更改数据对象 -*而不是*这个的副本。因此，您可以返回成功/失败布尔值，而不必返回传递的对象。因此，现在您可以将这些值组合在一起。

```
boolean error = false;
error |= titleCheck(...);
error |= nameCheck(...); 
```

等等

如果你想传回对象和状态，你可以简单地声明一个返回类：

```
class ReturnResult {
   public boolean error;
   public MyData data;
} 
```

（我已经公开了这些字段，因为我将它用作一个简单的结构）。这种方法的优点是您正在使用 OO 将相关对象绑定在一起，并且您可以将方法放在上述类上以便于合并连续的结果。

最后，我注意到您在对象上调用了许多方法`MyData`并确定该对象之外的成功/失败。我宁愿把它放在*对象*`MyData`中。然后 MyData 对象可以存储自己的有效/无效状态，您可以通过`isValid()`方法或类似方法向它询问自己的状态。这似乎是一种非常面向对象的做事方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:56:58.213

Java 不支持按引用传递。甚至引用也是按值传递的。

要执行您建议的操作，您需要传递对对象的引用，例如`boolean[]`or`AtomicBoolean`并使用它。

# java - Spring MVC Showcase Example的Maven构建过程出错

> ID：13743095
> 
> 赞同：0
> 
> 时间：2012-12-06T11:54:54.640
> 
> 标签：java, spring, maven, spring-mvc, maven-3

之后，我将 Spring MVC Showcase 示例从一个工作区复制到另一个工作区，我做了以下事情：

1）从 ./m2 文件夹中删除存储库目录 2）在 STS\Eclipse 中，我已经对项目进行了 Maven 安装

因此 Maven 开始下载项目的依赖项，但构建过程以堆栈跟踪中的以下错误消息结束：

```
[ERROR] MvcAsyncTask cannot be resolved to a type
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:29.538s
[INFO] Finished at: Thu Dec 06 12:43:05 CET 2012
[INFO] Final Memory: 17M/160M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:aspectj-maven-plugin:1.2:compile (default)     on project spring-mvc-showcase: Compiler errors :
[ERROR] error at import org.springframework.web.context.request.async.MvcAsyncTask;
[ERROR] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[ERROR] /home/andrea/Documents/workspace-sts-3.1.0.RELEASE/spring-mvc-showcase/src/main    /java/org/springframework/samples/mvc/async/CallableController.java:11:0::0 The import org.springframework.web.context.request.async.MvcAsyncTask cannot be resolved
[ERROR] error at public @ResponseBody MvcAsyncTask<String>     callableWithCustomTimeoutHandling() {
[ERROR] ^^^^^^^^^^
[ERROR] /home/andrea/Documents/workspace-sts-3.1.0.RELEASE/spring-mvc-showcase/src/main/java/org/springframework/samples/mvc/async/CallableController.java:64:0::0 MvcAsyncTask cannot be resolved to a type
[ERROR] error at return new MvcAsyncTask<String>(1000, callable);
[ERROR] ^^^^^^^^^
[ERROR] /home/andrea/Documents/workspace-sts-3.1.0.RELEASE/spring-mvc-showcase/src/main/java/org/springframework/samples/mvc/async/CallableController.java:74:0::0 MvcAsyncTask cannot be resolved to a type
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the     following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

并且似乎我在以下类中有一些问题：**org.springframework.samples.mvc.async.CallableController.java**因为给我以下错误：

**导入 org.springframework.web.context.request.async.MvcAsyncTask 无法解析**

为什么 Maven 这样做？我该如何解决？

这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>org.springframework.samples</groupId>
<artifactId>spring-mvc-showcase</artifactId>
<name>spring-mvc-showcase</name>
<packaging>war</packaging>
<version>1.0.0-BUILD-SNAPSHOT</version>
<properties>
    <java-version>1.6</java-version>
    <org.springframework-version>3.2.0.BUILD-SNAPSHOT</org.springframework-version>
    <org.aspectj-version>1.6.10</org.aspectj-version>
    <org.slf4j-version>1.6.1</org.slf4j-version>
</properties>
<dependencies>
    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
             </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>   

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
        <scope>runtime</scope>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-servlet-api</artifactId>
        <version>7.0.30</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp.jstl</groupId>
        <artifactId>jstl-api</artifactId>
        <version>1.2</version>
        <exclusions>
            <exclusion>
                <groupId>javax.servlet</groupId>
                <artifactId>servlet-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>jstl-impl</artifactId>
        <version>1.2</version>
        <exclusions>
            <exclusion>
                <groupId>javax.servlet</groupId>
                <artifactId>servlet-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <!-- Jackson JSON Processor -->
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.8.1</version>
    </dependency>

    <!-- Rome Atom+RSS -->
    <dependency>
        <groupId>net.java.dev.rome</groupId>
        <artifactId>rome</artifactId>
        <version>1.0.0</version>
    </dependency>

    <!-- JSR 303 with Hibernate Validator -->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.1.0.Final</version>
    </dependency>

    <!-- Joda Time Library -->  
    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time</artifactId>
        <version>1.6.2</version>
    </dependency>

    <!-- File Upload -->
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.2</version>
    </dependency>   
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.0.1</version>
    </dependency>

    <!-- Test -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework-version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>xmlunit</groupId>
        <artifactId>xmlunit</artifactId>
        <version>1.2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.jayway.jsonpath</groupId>
        <artifactId>json-path</artifactId>
        <version>0.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.hamcrest</groupId>
        <artifactId>hamcrest-library</artifactId>
        <version>1.3</version>
        <scope>test</scope>
    </dependency>

</dependencies>
<repositories>  
    <!-- For testing against latest Spring snapshots -->
    <repository>
        <id>org.springframework.maven.snapshot</id>
        <name>Spring Maven Snapshot Repository</name>
        <url>http://maven.springframework.org/snapshot</url>
        <releases><enabled>false</enabled></releases>
        <snapshots><enabled>true</enabled></snapshots>
    </repository>
    <!-- For developing against latest Spring milestones -->
    <repository>
        <id>org.springframework.maven.milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
        <snapshots><enabled>false</enabled></snapshots>
    </repository>
</repositories>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>                
            <configuration>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12</version>
            <configuration>
                <includes>
                    <include>**/*Tests.java</include>
                </includes>
                <excludes>
                    <exclude>**/Abstract*.java</exclude>
                </excludes>
                <junitArtifactName>junit:junit</junitArtifactName>
                <argLine>-Xmx512m</argLine>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>install</id>
                    <phase>install</phase>
                    <goals>
                        <goal>sources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <!-- Have to use version 1.2 since version 1.3 does not appear to work with ITDs -->
            <version>1.2</version>
            <dependencies>
                <!-- You must use Maven 2.0.9 or above or these are ignored (see MNG-2972) -->
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${org.aspectj-version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${org.aspectj-version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <version>1.1</version>
        </plugin>   
    </plugins>
</build> 
```

非常感谢

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:23:29.127

尝试添加此依赖项：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.0.4.RELEASE</version>
</dependency> 
```

我不确定 msising 类是否应该在 spring-webmvc 依赖项中，你已经包含了，但值得尝试一下

# sql-server-2005 - 如何循环遍历表直到达到条件

> ID：13743096
> 
> 赞同：1
> 
> 时间：2012-12-06T11:54:54.447
> 
> 标签：sql-server-2005

我有一个表产品，pick_qty，shortfall，location，loc_qty

```
Product Picked Qty Shortfall  Location    Location Qty
1742        4       58           1              15
1742        4       58           2              20
1742        4       58           3              15
1742        4       58           4              20
1742        4       58           5              20
1742        4       58           6              20
1742        4       58           7              15
1742        4       58           8              15
1742        4       58           9              15
1742        4       58           10             20 
```

我想要一个报告循环显示我需要减少的位置数量和数量，以弥补补货的不足。所以报告看起来像这样。

```
Product Picked Qty  Shortfall  Location  Location Qty
1742        4          58           1       15
1742        4          58           2       20
1742        4          58           3       15
1742        4          58           4       20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:52:48.997

请注意，最好不要将 SQL 视为“循环遍历表”，而应将其视为对表中某些行的子集进行操作。

听起来您需要做的是创建一个运行总计，告诉您如果从一个位置以及当前位置之前的所有位置取出所有物品，您将拥有多少物品，然后检查以查看如果这会给你足够的物品来弥补短缺。

根据您的示例数据，以下查询将起作用，但如果 Locations 实际上不是数字，那么您需要添加行号列并稍微调整查询以使用行号而不是位置号；它仍然与下面的查询非常相似。

```
SELECT
    Totals.Product, Totals.PickedQty, Totals.ShortFall, Totals.Location, Totals.LocationQty
FROM (
    SELECT
        TheTable.Product, TheTable.PickedQty, TheTable.ShortFall,
        TheTable.Location, TheTable.LocationQty, SUM(ForRunningTotal.LocationQty) AS RunningTotal
    FROM TheTable
        JOIN TheTable ForRunningTotal ON TheTable.Product = ForRunningTotal.Product
            AND TheTable.Location >= ForRunningTotal.Location
    GROUP BY TheTable.Product, TheTable.PickedQty, TheTable.ShortFall, TheTable.Location, TheTable.LocationQty
    ) Totals
-- Note you could also change the join above so the running total is actually the count of only the rows above,
-- not including the current row; Then the WHERE clause below could be "Totals.RunningTotal < Totals.ShortFall".
-- I liked RunningTotal as the sum of this row and all prior, it seems more appropriate to me.
WHERE Totals.RunningTotal - Totals.LocationQty <= Totals.ShortFall
     AND Totals.LocationQty > 0 
```

另外 - 只要您正在阅读我的答案，一个不相关的旁注：根据您上面显示的数据，您的数据库架构没有尽可能地标准化。看起来 Picked Quantity 和 ShortFall 实际上只依赖于 Product，所以这将是一个自己的表，然后 Location Quantity 取决于 Product 和 Location，所以这将是一个自己的表。我指出这一点是因为如果您的数据包含单个产品的不同 Picked Quantities/ShortFall，那么上述查询将中断；对于我提到的规范化表，这种情况是不可能的。

# wpf - Windows 8 上的 DVD 播放支持

> ID：13743118
> 
> 赞同：1
> 
> 时间：2012-12-06T11:56:07.757
> 
> 标签：wpf, windows-8

为 Windows 8 实现 DVD 播放的可能选项是什么？DirectShow 现在似乎无法正常工作，因为 Microsoft 已经取消了对 DVD 播放的支持。我说得对吗？我正在为 Windows 7 使用 WPF 和 DirectShow.NET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:49:30.983

VLC 播放器是免费的，并且可以在非 ARM Windows 8 上正常运行（即不适用于 WindowsRT）。您可以在此处获取副本：

[http://www.vlcapp.com/jump/vlc-free/](http://www.vlcapp.com/jump/vlc-free/)

在播放 DVD 方面做得很好。

# iphone - AVAudiorecorder - 在 iOS 6.0.1 的 iPhone 4 上没有录音

> ID：13743121
> 
> 赞同：0
> 
> 时间：2012-12-06T11:56:09.070
> 
> 标签：iphone, ios, audio, avaudiorecorder, recording

我正在每个可用的 iOS 模拟器上录制音频，并且在某些设备上没有任何问题（例如带有 iOS 5.1.1 的 iPhone 4 或带有 iOS 6.0.1 的 iPhone 4S），但最近我收到客户的反馈，告诉我录音在带有 iOS 6.0.1 的 iPhone 4 上失败，没有崩溃 - 他们点击记录，没有任何反应。有没有人遇到过这个问题？这个设备是特定的吗？或者 AVAudioRecorder 的通常工作和广泛使用的代码需要在这个设备+系统组合上进行一些特定的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:48:40.583

也发生在我身上，在我的情况下 PrepareToRecord() 失败，因为文件路径中的文件夹丢失（尚未创建）。

# api - Photoshop：通过 SDK 获取切片并复制内容

> ID：13743125
> 
> 赞同：2
> 
> 时间：2012-12-06T11:56:47.570
> 
> 标签：api, sdk, photoshop, cs3

我想使用自己编写的脚本/插件将我的 Photoshop cs3 文档中**当前选定切片的内容复制到新文档中。**

目前，我手动执行此操作：我选择切片，按 ctrl+c（复制），创建一个新文档，然后按 ctrl+v（粘贴）。

到目前为止，我所拥有的是创建新文档的自动化插件示例“MakeNew”：

```
static SPErr MakeNewDocument (void)
{
      SPErr error = kSPNoError;

      PIActionDescriptor descriptor = NULL;
      error = sPSActionDescriptor->Make (&descriptor);
      ...
} 
```

知道如何访问当前选定的切片并将内容复制到新文档吗？

感谢您的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T15:17:33.600

看起来即使通过 CS3 中的 SDK 也无法获取切片。

# ruby-on-rails-3 - 发条与工头不合作

> ID：13743126
> 
> 赞同：2
> 
> 时间：2012-12-06T11:56:51.160
> 
> 标签：ruby-on-rails-3, foreman

我正在使用发条宝石发送每日电子邮件。我在 lib 文件夹中创建了 clock.rb 文件。

```
 #clock.rb
  require 'rubygems'
  require 'clockwork'
  include Clockwork

  every(1.day, 'reminders.send', :at => '09:30'){
   @leave_details = LeaveDetail.all(:conditions => {:status => [LeaveDetail::STATUS_PENDING, LeaveDetail::STATUS_PENDING_MNGT]})
   @leave_details.each do |ld|
   UserMailer.leave_reminder_email(ld).deliver
 end
} 
```

我创建了一个 Procfile:-

```
web:    bundle exec thin start -d
clock:  bundle exec clockwork lib/clock.rb 
```

当我命令

```
foreman start 
```

它显示错误：-

```
17:20:51 web.1   | started with pid 21144
17:20:51 clock.1 | started with pid 21146
17:20:52 clock.1 | I, [2012-12-06T17:20:52.558231 #21150]  INFO -- : Starting clock for 1 events: [ reminder.deliver ]
17:20:52 clock.1 | I, [2012-12-06T17:20:52.558324 #21150]  INFO -- : Triggering 'reminder.deliver'
17:20:52 clock.1 | E, [2012-12-06T17:20:52.558399 #21150] ERROR -- : uninitialized constant LeaveDetail (NameError)
17:20:52 clock.1 | /home/akhileshwar/Desktop/14-11-2012/RoR/P10HR/lib/clock.rb:8:in `block in <top (required)>'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/gems/clockwork-0.4.1/lib/clockwork.rb:93:in `call'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/gems/clockwork-0.4.1/lib/clockwork.rb:93:in `run'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/gems/clockwork-0.4.1/lib/clockwork.rb:172:in `block in tick'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/gems/clockwork-0.4.1/lib/clockwork.rb:170:in `each'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/gems/clockwork-0.4.1/lib/clockwork.rb:170:in `tick'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/gems/clockwork-0.4.1/lib/clockwork.rb:156:in `block in run'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/gems/clockwork-0.4.1/lib/clockwork.rb:155:in `loop'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/gems/clockwork-0.4.1/lib/clockwork.rb:155:in `run'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/gems/clockwork-0.4.1/bin/clockwork:19:in `<top (required)>'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/bin/clockwork:23:in `load'
17:20:52 clock.1 | /home/akhileshwar/.rvm/gems/ruby-1.9.3-p194@rails326/bin/clockwork:23:in `<main>'
17:20:52 web.1   | >> Deleting stale PID file tmp/pids/thin.pid
17:20:52 web.1   | exited with code 0
17:20:52 system  | sending SIGTERM to all processes
SIGTERM received
17:20:52 clock.1 | terminated by SIGTERM 
```

LeaveDetail 是模型内部的一个 ruby​​ 类。谁能告诉我为什么'LeaveDetail'在这里显示未初始化？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:50:41.867

您实际上并没有在发条中加载您的应用程序。Clockwork 是一个独立的 ruby​​ 进程。如果你不告诉它你的应用程序的其余部分，它不知道它的存在，所以你的错误是合乎逻辑的。这是来自[sidekiq 的发条示例文档](https://github.com/mperham/sidekiq/blob/master/examples/clockwork.rb)：

```
# require boot & environment for a Rails app
require_relative "../config/boot"
require_relative "../config/environment" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:31:49.180

您可以`include Clockwork`用作模块，添加`require './config/boot'` 和`require './config/environment'`

```
require './config/boot'
require './config/environment'
require 'clockwork'

module Clockwork
every(1.day, 'reminders.send', :at => '09:30'){
   @leave_details = LeaveDetail.all(:conditions => {:status => [LeaveDetail::STATUS_PENDING, LeaveDetail::STATUS_PENDING_MNGT]})
   @leave_details.each do |ld|
   UserMailer.leave_reminder_email(ld).deliver
 end
}
end 
```

# wpf - 将 WPF DataGrid 导出到保留所有格式的文本文件

> ID：13743132
> 
> 赞同：1
> 
> 时间：2012-12-06T11:57:01.330
> 
> 标签：wpf, datagrid, wpfdatagrid

我原以为这很简单，但我找不到任何明显的方法！

我有一个绑定到 Access 数据库的 WPF DataGrid。我希望能够将 DataGrid 的内容导出到制表符分隔的文本文件，包括列标题并保留所有格式。这应该完全等同于选择 DataGrid 的所有行，然后复制并粘贴到一个空的文本文件中。

我可以从我的视图中获取数据，但我已经努力在 DataGrid 中正确获取所有数字格式。

有什么简单的方法可以做到这一点吗？

# java - 在 groovy 中如何读取 xml 并将其放在 JMS 消息中

> ID：13743136
> 
> 赞同：0
> 
> 时间：2012-12-06T11:57:21.937
> 
> 标签：java, xml, groovy, jms

我尝试像这样向 JMS 发送消息

```
MessageProducer messageProducer =queueSession.createProducer( queueSend );
TextMessage textMessageSend = queueSession.createTextMessage();
textMessageSend.setText("ddjhdfsdfjskdhfshkfas")
messageProducer.send( textMessageSend ); 
```

但不是将我的消息放在 textMessageSend.setText 中，我想从 XML 文件中读取消息，你怎么能这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:05:18.087

假设您的 XML 如下所示：

```
<messages>
  <message id="1">Hello</message>
  <message id="2">Goodbye</message>
  <message id="3">Whatever</message>
</messages> 
```

然后你可以写一个像这样的函数：

```
def sendMessage( MessageProducer messageProducer, String id ) {
  String message = new XmlSlurper().parse( new File( 'MESSAGES.xml' ) )
                                   .message.find { it.@id == id }.text()
  if( message ) {
    queueSession.createTextMessage().with { tm ->
      tm.text = message
      messageProducer.send( tm )
    }
  }
} 
```

所以调用：

```
sendMessage( messageProducer, '1' ) 
```

会发送消息`"Hello"`

# php - 关于使用 Doctrine 为现有项目创建 Symfony 1.4 模式

> ID：13743137
> 
> 赞同：2
> 
> 时间：2012-12-06T11:57:29.913
> 
> 标签：php, mysql, symfony-1.4

我首先尝试使用 symfony 1.4 创建一个应用程序我已经安装了使用 symfony 框架创建的橙色 hrm 2.7 版本应用程序现在我正在为新应用程序创建一个模式但是在我的应用程序中我使用现有的表列作为我的新应用程序中的关系两个应用程序都在同一个数据库中我已将 database.yml 配置为

```
all:
  doctrine:
    class: sfDoctrineDatabase
    param:
      dsn: 'mysql:host=localhost;dbname=neworangehrm'
      username: root
      password: null 
```

我创建了我的架构

```
samplepayperiod:
  tableName: samplepayperiod
  columns:
    emp_number:
      name: emp_number 
      type: integer(7)
    periodid:
      name: periodid 
      type: integer(11)
      primary: true
    startdate:
      name: starttime 
      type: date(25)
      default: ''
      notnull: true
    enddate:
      name: endtime 
      type: date(25)
      default: ''
      notnull: true
    locked:
      name: locked 
      type: smallint(5)
      default: ''
  relations:
   Employee:
    onDelete: CASCADE
    foreignAlias: samplepayperiods 
```

然后我曾经运行以下命令

```
C:\xampp\htdocs\orangehrm\neworangehrm\nohrm>php symfony doctrine:build-model
>> doctrine  generating model classes
>> file+     C:\Documents and Settings\Dilli...\Temp/doctrine_schema_56849.yml
PHP Notice:  Undefined index: class in C:\xampp\php\PEAR\symfony\plugins\sfDoctrinePlugin\lib\vendor
\doctrine\Doctrine\Import\Builder.php on line 684

Notice: Undefined index: class in C:\xampp\php\PEAR\symfony\plugins\sfDoctrinePlugin\lib\vendor\doct
rine\Doctrine\Import\Builder.php on line 684
PHP Notice:  Undefined index: alias in C:\xampp\php\PEAR\symfony\plugins\sfDoctrinePlugin\lib\vendor
\doctrine\Doctrine\Import\Builder.php on line 685

Notice: Undefined index: alias in C:\xampp\php\PEAR\symfony\plugins\sfDoctrinePlugin\lib\vendor\doct
rine\Doctrine\Import\Builder.php on line 685
>> tokens    C:/xampp/htdocs/orangehrm/newor...e/Basesamplepayperiod.class.php
>> autoload  Resetting application autoloaders
>> file-     C:/xampp/htdocs/orangehrm/newor.../config/config_autoload.yml.php 
```

我还尝试创建如下所示的方案，我首先在数据库中创建了一个表，然后尝试运行模式，`php symfony doctrine:build-schema` 但它抛出如下错误

```
C:\xampp\htdocs\orangehrm\neworangehrm\nohrm>php symfony doctrine:build-schema
>> doctrine  generating yaml schema from database

  Couldn't find class OhrmLocation

PHP Fatal error:  Call to a member function evictAll() on a non-object in C:\xampp\php\PEAR\symfony\
plugins\sfDoctrinePlugin\lib\vendor\doctrine\Doctrine\Connection.php on line 1239

Fatal error: Call to a member function evictAll() on a non-object in C:\xampp\php\PEAR\symfony\plugi
ns\sfDoctrinePlugin\lib\vendor\doctrine\Doctrine\Connection.php on line 1239..... 
```

# r - 如何在R中创建财务回报矩阵

> ID：13743140
> 
> 赞同：0
> 
> 时间：2012-12-06T11:57:52.003
> 
> 标签：r

我有一个资产价格矩阵

```
A,B
12.1,33.5
12.2,33.4
12.3,33.5
12.1,33.6 
```

如何使用类似的东西获得财务回报矩阵

```
RET(x) <- {(x-Previousx)/Previousx}  # My pseudocode 
```

给予

```
A,B
0.0082,-0.0029
0.008197,0.0029
-0.0162,0.00298 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:46:56.540

基于 Andrie 的回答，但不需要使用`apply`函数

```
diff(as.matrix(dat)) / dat[-nrow(dat),]
             A            B
1  0.008264463 -0.002985075
2  0.008196721  0.002994012
3 -0.016260163  0.002985075 
```

`diff`可以应用于矩阵，因此只需转换`dat`为矩阵并应用`diff`将返回每列的滞后差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:10:17.163

`diff()`与 一起使用`apply()`：

```
dat <- read.csv(text="A,B
12.1,33.5
12.2,33.4
12.3,33.5
12.1,33.6", header=TRUE)
dat

apply(dat, 2, function(x)diff(x)/x[-length(x)])
                A            B
[1,]  0.008264463 -0.002985075
[2,]  0.008196721  0.002994012
[3,] -0.016260163  0.002985075 
```

* * *

这有效，因为：

1.  该函数`diff()`返回滞后差异
2.  然后我将结果除以`diff(x)`by `x[-length(x)]`，即删除最后一个元素后的 x 。这可以确保您将差异除以前一个元素。
3.  然后只需将其包装成对`apply`每一列执行此操作的 a 即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T12:11:10.497

```
dat <- read.csv(text = "A,B
12.1,33.5
12.2,33.4
12.3,33.5
12.1,33.6", header = TRUE) 
```

这是一种简单有效的方法：

```
(tail(dat, -1) - head(dat, -1)) / head(dat, -1)

             A            B
2  0.008264463 -0.002985075
3  0.008196721  0.002994012
4 -0.016260163  0.002985075 
```

# java - 从 String[] 转换为 String 并再次转换为 String[]

> ID：13743141
> 
> 赞同：2
> 
> 时间：2012-12-06T11:57:52.783
> 
> 标签：java, string, agents-jade

在我的 JADE 程序中，一个代理需要向另一个代理发送 ACL 消息。对于发送消息的代理 (agent1)，它存储一个必须发送的值的 String[] 数组。

但是，为了实际发送 ACL 消息，内容只能是字符串，不能是其他任何内容。向消息添加内容的方法如下： `msg.setContent(String str)`

所以问题是我有一系列值存储在 agent1 中，它们都在一个数组中。我必须在一条消息中发送这些值，所以我不能用数组的每个元素发送多条消息。在我当前的“测试”数组中，我只放置了两个元素，所以这就是我目前正在做的事情：

```
msg.setContent(theArray[0] + theArray[1]); 
```

现在，当接收代理 (agent2) 打开此消息并获取内容时，它显然只是我从 agent1 发送的数组的两个元素的串联。

如何让 agent2 将这个 String 拆分回 String[] 数组？我看过方法

```
split(String regex) 
```

为消息内容的字符串值。所以我在想，因为 Agent1 中数组的每个元素都以大写字母开头，那么也许我可以在遇到大写字母时输入正则表达式来拆分字符串。

但是我不确定如何做到这一点，或者这是否是一个好主意。请提供任何建议。

相关 API 文档：

[http://jade.cselt.it/doc/api/jade/lang/acl/ACLMessage.html#setContent(java.lang.String](http://jade.cselt.it/doc/api/jade/lang/acl/ACLMessage.html#setContent(java.lang.String) )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:04:03.317

您可以使用`java.util.Arrays`类将数组转换为字符串

喜欢 ：

```
String [] myArray = new String[3];
array[0] = "Abc";
array[1] = "Def";
array[2] = "Xyz";
String s =java.util.Arrays.toString(myArray); 
```

所以现在 s 会有一个字符串`[Abc, Def, Xyz]`

现在从字符串转换回字符串数组，

您所要做的就是首先删除那些`[`（`]`获取子字符串）然后拆分字符串。

```
String myString = s.substring(1, s.length()-1);
String arrayFromString[] = myString.split(", "); 
```

请参阅此链接[java.util.Arrays javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)

注意：如果您的字符串包含`,`@jlordo 提到的（逗号和一个空格），这将不起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:23:42.433

您可以使用 JSON 作为交换格式，以便通过网络以字符串形式发送几乎所有内容。

这是一个使用 org.json 的示例。

```
Collection c = Arrays.asList(str);
org.json.JSonArray arr = new org.json.JSonArray(c);
msg.sendContents(arr.toString()); 
```

另一方面：

```
String s = getContents();
org.json.JSonArray arr = new org.json.JSonArray(s);
String[] strs = new String[arr.length()];
for (int i = 0; i < arr.length(); i++) {
    strs[i] = arr.getString(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:27:49.820

如果您的字符串永远不会包含“，”，那么 Abu 的答案中的解决方案将可以正常工作。

如果是这样，您需要选择其他东西作为分隔符（例如换行符 \n）。如果你不能确定任何字符永远不会出现在文本中，那么我想这是做不到的。

# sql-server - 表之间的关系，以防止插入不存在外键的记录

> ID：13743142
> 
> 赞同：0
> 
> 时间：2012-12-06T11:58:00.177
> 
> 标签：sql-server, database-design, relational-database

嗨，我已经设置了两个非常基本的表。一个表将用作查找，以标识字段作为主键。另一个表使用查找 ID 作为外键。

我已经创建了一个关系约束，所以如果在“主”表中使用了外键，我现在无法从查找中删除。

但是我的问题是我可以使用不存在的外键添加记录。

根据我的想法，这不应该被允许，谁能告诉我我需要使用什么设置来强制执行此操作以及这是否是典型的数据库设计？

谢谢戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:28:00.313

你的思路是对的。良好的数据库设计提供了某种方式来执行所谓的“引用完整性”。这只是您自己得出的概念的流行语。即，如果外键引用不存在的行，则应拒绝该外键。有关参照完整性的一般讨论，请参阅以下 Wikipedia 文章。它很短。

[http://en.wikipedia.org/wiki/Referential_integrity](http://en.wikipedia.org/wiki/Referential_integrity)

一些程序员希望在他们的程序中强制执行参照完整性。一般而言，在数据库中定义参照完整性约束并让 DBMS 执行是一个更好的计划。它更容易、更快、更有效。

SQL 数据定义语言 (DDL) 提供了一种在创建表时声明外键约束的方法。SQL 的不同方言之间的语法略有不同，但在所有方言中基本相同。这是一个胶囊摘要。

[http://www.w3schools.com/sql/sql_foreignkey.asp](http://www.w3schools.com/sql/sql_foreignkey.asp)

SQL Server 的文档应该有 CREATE TABLE 命令下的参照完整性约束的描述。

# selenium - 检查元素是否对用户真正可见

> ID：13743143
> 
> 赞同：9
> 
> 时间：2012-12-06T11:58:03.883
> 
> 标签：selenium, webdriver, selenium-webdriver

我想检查用户是否可以在当前 Web 浏览器视图中看到一个元素而无需滚动。

我发现可以检查元素是否在页面上的某个位置。

另一个提示建议检查元素位置，但我需要获取浏览器可见窗口的尺寸加上它的*x/y*偏移量到*0/0*。

如果有人能指出一个不需要 JavaScript 代码的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:55:10.503

您如何定义“对用户可见”？你建议如何检查？如果有高度？如果它没有被CSS隐藏？如果它的父元素被 CSS 隐藏了怎么办？

最可靠的方法是使用 Selenium 的内置`.Displayed`属性（如果您使用的是 C#，Java 也有类似的东西），并将其与 jQuery 的“可见”选择器结合使用：http: [//api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)。下面的示例，在 C# 中。

```
var element = Driver.FindElement(By.Id("test"));
bool isVisible = element.Displayed;
var javascriptCapableDriver = (IJavascriptExecutor)Driver;
bool jQueryBelivesElementIsVisible = javascriptCapableDriver.ExecuteScript("return $('#myElement').is(:visible);");
bool elementIsVisible = isVisible && jQueryBelievesElementIsVisible; 
```

这将得到大多数情况。

没有客户端代码是不可能的，或者在准备其他人找到一种可以用服务器端语言完成的方法时，我非常怀疑它是否漂亮、可读或可靠。

jQuery有`offset()`方法：

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

然而，当考虑到边界、边距等东西时，这将不起作用。

# asp.net - 检索连接到服务器的在线用户的名称

> ID：13743145
> 
> 赞同：0
> 
> 时间：2012-12-06T11:58:08.070
> 
> 标签：asp.net, signalr

我之前问过这个[**问题**](https://stackoverflow.com/q/13678493/1577396)，得到了很好的回应。但由于我是 asp.net（和 jquery）的新手，所以无法理解程序是如何流动的。

概括：

> 我创建了一个基本的聊天应用程序。现在我正在尝试添加一个高级功能，例如每当用户在线（连接到服务器）时，服务器应该向连接到该服务器的所有用户显示或广播可用的在线用户的用户名。

通过参考对上一个问题（[s0nica](https://stackoverflow.com/a/13683098/1577396)和[VinayC](https://stackoverflow.com/a/13679140/1577396)）的回复，我修改了我的`class`文件和`jquery`文件，它们给出了错误，如下面的链接所示。（我想我很接近）

> [**Chat.cs**](https://gist.github.com/4223491) （*两个错误，我在代码注释之间提到了错误*）
> [**file.js**](https://gist.github.com/4223598) （*工作正常，如果需要，请参考*）

请查看上述文件并为我提供帮助。

PS：在上一篇文章中，我在想如果我更改 Global.asax 代码，我的问题就会解决..后来我意识到这是错误的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:01:21.357

**您的第一个错误来自：**

```
Clients.joins(Context.ConnectionId, Caller.username, DateTime.Now); 
```

应为：

```
Clients.All.joins(Context.ConnectionId, Clients.Caller.username, DateTime.Now); 
```

与之相关的其他错误：在您的 JS 文件中，它应该是：第 15 行

```
chat.state.username = chatUsername; 
```

**第二个错误：** 错误与它所说的完全一样，您的字典对象没有 toList 函数。其次，您不能将 List 或字符串直接转换为 Chat 对象。

根据您的设置，您目前没有要返回的正确“用户”列表。现在，您正在保存一个列表来代表单个用户。您可能想尝试将您的字典对象更改为类似

```
static ConcurrentDictionary<string, User> _users = new ConcurrentDictionary<string, User>(); 
```

用户在哪里：

```
public class User
{
    public string Name { get; set; }
    public string ConnectionID { get; set; }
} 
```

然后在您的 Joined 功能上，您可以执行以下操作：

```
public void Joined()
{
    User user = new User 
    { 
        Name = Clients.Caller.username,
        ConnectionID = Context.ConnectionId
    };

    _users.TryAdd(user.ConnectionID, user);
    Clients.All.joins(user.ConnectionID, user.Name, DateTime.Now);
} 
```

最后，您的 GetConnectedUsers 将结束（确保您正在“使用 System.Linq;”）：

```
public List<User> GetConnectedUsers()
{
    return _users.Values.ToList();
} 
```

我可能有点过火了，但希望这会有所帮助！

如果您需要参考从 SignalR 0.5.3 到 1.0 alpha 的更改日志，这里有一篇关于所有修改的精彩帖子： [http ://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp -net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)

# asp.net - 如何防止在 asp.net 中的母版页上的菜单控件的回发？

> ID：13743147
> 
> 赞同：1
> 
> 时间：2012-12-06T11:58:20.007
> 
> 标签：asp.net, menu, master-pages, postback

我从 SQLServer2008 的数据库中创建了动态菜单，该菜单在页面加载时加载，并相应地显示菜单。问题是当我从内容页面单击菜单的任何 MenuItem 时，菜单控件也会再次从数据库加载，我想避免 PostBack 并防止命中数据库以加载菜单。

在 .master

```
<body>
    <form runat="server">
    <div class="page">
        <div id="navbar" runat="server">
           &nbsp;&nbsp; 
                    <asp:Menu ID="Menu1" Orientation="horizontal" RenderingMode="List" runat="server"
                        DynamicHorizontalOffset="0" OnMenuItemClick="Menu1_MenuItemClick">
                        <StaticMenuItemStyle HorizontalPadding="10px" />
                    </asp:Menu>
            </div>
             <br />
        <div class="main">
            <asp:ContentPlaceHolder ID="MainContent" runat="server">
                   Content here....
            </asp:ContentPlaceHolder>
        </div>
     </div>
    <div class="footer">
    </div>
    </form>
</body> 
```

在 .master.cs 文件中

```
public partial class SiteMaster : System.Web.UI.MasterPage
{

    static string  conStr = ConfigurationManager.ConnectionStrings["ConString"].ConnectionString;
    int empID = 0;
    int recAffect = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {

            populateMenuItem();

        }
    }
} 
```

populateMenuItem() 是从名为 MenuMaster 的 SQLServerDB 表绑定菜单的方法。

当我单击任何 MenuItem 时，页面被重定向。这工作正常。**只是我想避免在每次加载内容页面后加载菜单！** 帮助赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:46:53.457

我所做的是一旦应用程序加载，我创建菜单并将其加载到内存中，然后从内存中查询数据。所以我创建了一个类：

```
public class SiteMap
{
   public string Name { get; set; }
   public string Url { get; set; }
   public List<SiteMap> Items { get; set; }
} 
```

在应用程序启动期间，从数据库中查询并构建 SiteMap 对象的集合，并将其存储在静态引用中，例如：

```
public static class SiteMapStore
{
   private static List<SiteMap> _entries = null;

  public static List<SiteMap> Entries
  {
    get { return _entries; }
    set
    {
       if (_entries == value) 
         return;
       lock(typeof(SiteMapStore))
       {
            if (_entries != value) 
               _entries = value;
       }
    }
  }
} 
```

使用 SiteMapStore，您可以在构建菜单时始终参考它。将结果存储在对象中并全局存储会快得多。

# c++ - 如何从函数中读取返回值？

> ID：13743150
> 
> 赞同：-5
> 
> 时间：2012-12-06T11:58:29.833
> 
> 标签：c++, winapi

在 C++ 中，我试图使用该函数`GetActiveWindow()`来获取当前窗口的句柄，但我不知道如何获取函数返回值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:01:17.060

[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646292%28v=vs.85%29.aspx)将原型显示为：

```
HWND WINAPI GetActiveWindow(void); 
```

这意味着你可以这样称呼它：

```
const HWND active_window = GetActiveWindow(); 
```

这会将句柄放入`active_window`变量中，您可以直接使用它，即将它发送给其他需要`HWND`窗口句柄的函数。

正如评论中指出的，您还可以使用[C++11](http://www.cplusplus.com/articles/EzywvCM9/)的`auto`功能来确定类型：

```
const auto active_window = GetActiveWindow(); 
```

同样，这是[C++11](http://www.cplusplus.com/articles/EzywvCM9/)功能，但假设您使用的是 Visual Studio，应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:01:28.680

与任何其他函数相同 - 您创建该类型的对象并从函数调用构造它。

```
auto x = GetActiveWindow(); 
```

# mysql - mysql查询使用需要EXIST和NOT EXIST结果的连接状态表查找结果

> ID：13743154
> 
> 赞同：0
> 
> 时间：2012-12-06T11:58:40.547
> 
> 标签：mysql

我一直在寻找解决我的问题的方法。

我有一些可行的方法，但我不确定这是最有效的做事方式，并且在谷歌搜索时找不到任何人试图这样做。

我有一张包含客户的表格和一张包含该客户拥有的状态的表格。

如果我想查找客户已发生状态的结果，我已设法使用联接获得所需的结果，但有时我希望能够找到不仅已达到状态而且还有其他一些状态的客户状态还没有。

目前我正在使用 NOT EXISTS Sub 查询来执行此操作，但它似乎有点慢，并且考虑是否必须在再次通过所有结果找到与第一个状态匹配的结果后检查它是否与另一个不匹配可以解释缓慢。

例如，客户可能具有发票状态和已付款状态。

如果我想查看哪些客户已开具发票，那很好，如果我想查看哪些客户已开具发票并已付款，那很好，但如果我想查看哪些客户已开具发票但未付款，那我就开始使用不存在子查询

还有另一种更有效的方法吗？或者这是最好的方法，但我需要弄清楚mysql如何将索引与这些表一起使用以提高效率？

如果有帮助，我可以提供更多实际 sql 的详细信息吗？

谢谢

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:16:23.477

如果这是在多个客户端上，那么通常的解决方案是为每个客户端的状态设置一个子选择，然后使用 LEFT OUTER JOIN 来连接它。

就像是

```
SELECT *
FROM Clients a
LEFT OUTER JOIN (SELECT ClientId, COUNT(*) FROM ClientsStatus WHERE Status IN (1,2) GROUP BY ClientId) b
ON a.ClientId = b.ClientId
WHERE b.ClientId IS NULL 
```

这个（非常粗略的）示例是为您提供一个状态不为 1 或 2 的客户列表。

您应该能够扩展这个基本概念以涵盖您正在处理的场景/数据

编辑如下

我玩过你的 SQL。我认为您可以很容易地在子选择上使用 JOIN ，但这似乎并没有检查除了声明的状态是否为 3 或 95 之外的任何内容。

```
SELECT claims.ID, claims.vat_rate, claims.com_rate,
claims.offer_val, claims.claim_value, claims.claim_ppi_amount, claims.claim_amount, claims.approx_loan_val, claims.salutationsa, claims.first_namesa, claims.last_namesa, 
clients.salutation, clients.first_name,clients.last_name, clients.phone, clients.phone2, clients.mobile, clients.dob,clients.postcode, clients.address1, clients.address2, clients.town, client_claim_status.person,clients.ID 
AS client_id,claims.ID AS claim_id, claims.date_added AS status_date_added,client_claim_status.date_added AS last_client_claim_status_date_added,work_suppliers.name AS refname, financial_institution.name AS lendname, clients.date_added AS client_date_added,ppi_claim_type_2.claim_type AS ppi_claim_type_name 
FROM claims 
RIGHT JOIN clients ON claims.client_id = clients.ID 
RIGHT JOIN client_claim_status 
ON claims.ID = client_claim_status.claim_id 
AND client_claim_status.deleted != 'yes' 
AND ((client_claim_status.status_id IN (1, 170)) 
AND client_claim_status.date_added < '2012-12-02 00:00:00' ) 
LEFT OUTER JOIN (SELECT claim_id FROM client_claim_status WHERE status_id IN (3, 95 )) Sub1
ON claims.ID = Sub1.claim_id
LEFT JOIN financial_institution ON claims.claim_against = financial_institution.ID 
LEFT JOIN work_suppliers ON clients.work_supplier_id = work_suppliers.ID 
LEFT JOIN ppi_claim_type_2 ON claims.ppi_claim_type_id = ppi_claim_type_2.ID 
WHERE claims.deleted != 'yes' 
AND Sub1.claim_id IS NULL
ORDER BY last_client_claim_status_date_added DESC 
```

老实说，我建议您重新排列代码以删除 RIGHT OUTER JOIN。混合左右连接往往会非常混乱。

# php - Propel 和 I18N：如果未找到第一个语言环境，则回退到另一个语言环境

> ID：13743155
> 
> 赞同：0
> 
> 时间：2012-12-06T11:58:41.970
> 
> 标签：php, internationalization, locale, propel

我目前正在开发一个 API，允许用户在他们的设备上获取一些事件消息。用户调用我的 API 并指定我他们的首选语言环境（例如`fr_FR`）。

在后台，管理员可以选择他们想要支持的语言。假设他们选择英文和中文。所以，他们不支持法语。

我正在使用 Propel I18N 行为来处理所有的翻译。在我的请求中，我目前正在做：

```
SystemMessageQuery::create()
    ->joinWithI18N('fr_FR')
    ->findOne(); 
```

如果我指定现有的语言环境，它可以正常工作。但是，如果翻译不可用，则返回 null。听起来合乎逻辑。

我的问题是：`en_US`如果管理员没有计划提供的语言环境，我可以将用户退回到默认语言环境（在这种情况下，）吗？如果是，我该如何进行？

我想发送一个事先请求来检查语言环境是否存在。但是出于性能原因（尤其是对于 API），我认为这不是一个好方法。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:05:52.767

根据[文档](http://propelorm.org/behaviors/i18n#querying_for_objects_with_translations)，Propel 中没有这样的回退。

您可以尝试的是`setLocale`和的组合`joinWithI18N`。就像是：

```
$default_locale = 'en_US';
$items = ItemQuery::create()
  ->joinWithI18n('fr_FR')
  ->find();

foreach ($items as $item) 
{
  echo $item->getPrice();

  // test if name is translated
  if (!$name = $item->getName())
  {
    // otherwise, try to get the translation with default locale
    $item->setLocale($default_locale);
    $name = $item->getName(); // one query to retrieve the English translation
  }
} 
```

我没有测试过这段代码，但它似乎是一个解决方案。

另外，您是否尝试添加两个`joinWithI18N`（一个 for`en_US`和一个 for `fr_FR`）来查看查询如何处理它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:25:41.930

最后，我使用了以下代码：

```
public function setLocale($locale = 'en_US', $fallbackEnabled = false)
{
    if($fallbackEnabled) {

        $localeExists = SystemMessageI18nQuery::create()
            ->filterByLocale($locale)
            ->filterById($this->getId())
            ->count();

        if(!$localeExists) {
            $locale = SystemMessageI18nQuery::create()
                ->filterById($this->getId())
                ->select('locale')
                ->findOne();
        }

    }

    parent::setLocale($locale);
} 
```

出于性能原因，它不是最佳解决方案，但它是实用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:19:56.773

尝试这样的事情

```
public function joinWithI18nFallback($locale=null, $joinType = Criteria::LEFT_JOIN, $default_locale=null)
{

    $languages = sfConfig::get('sf_languages');
    if(null == $locale)
    {
        $locale = sfPropel::getDefaultCulture();
    }

    if(null == $default_locale)
    {
        $default_locale = sfPropel::getDefaultCulture();
    }

    $languages[] = $locale;
    $languages[] = $default_locale;
    $languages   = array_unique($languages);

        $FallbackQuery = CategoryQuery::create()
                                                  ->leftJoin('CategoryI18n')
                                                  ->addJoinCondition('CategoryI18n', "CategoryI18n.Culture IN ('".implode("','", $languages)."')" )
                                                  ->withColumn('CategoryI18n.Culture', 'CultureDefault')
                                                  ->addAscendingOrderByColumn("FIELD(category_i18n.culture, '".$locale."', '".implode("','", $languages)."' )")
                                                  ->where("CategoryI18n.name != ''");

         $this->addSelectQuery($FallbackQuery, 'Category')
              ->join('CategoryI18n', $joinType)
              ->addJoinCondition('CategoryI18n', 'CategoryI18n.Culture = Category.CultureDefault' )
              ->with('CategoryI18n')
              ->groupById();

     $this->with['CategoryI18n']->setIsWithOneToMany(false);

    return $this;
} 
```

# c# - 从 SELECT 查询返回多个值

> ID：13743160
> 
> 赞同：2
> 
> 时间：2012-12-06T11:58:54.860
> 
> 标签：c#, sql

例如，我有一个名为 dbuser 的数据库：

```
username: teste
password: xxxx
isonline: 1

username: teste2
password: xxxx
isonline: 1 
```

我认为这个查询：

```
"SELECT username FROM dbuser  WHERE (isonline ='1')" 
```

会同时返回 teste 和 teste2，但是当我在 MessageBox 中询问结果时，同时 teste 和 teste2 都在线时，它只显示 teste，但是当我关闭 teste 连接时，它会在 MessageBox 中出现 teste2。我猜它只返回第一行给我，那么我怎样才能得到所有的值呢？

这是方法代码：

```
public static string GetOnline() 
{ 
  string listaOnline; 
  listaOnline = ExecuteQuery("SELECT * username FROM dbuser WHERE (isonline ='1')").ToString();
  return listaOnline;
} 
```

我把它显示为`MessageBox.Show(DbManager.GetOnline());`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:21:51.180

这应该以最快的方式为您提供所需的字符串列表。`reader.GetString(0)`意味着您从索引为 0 的列中获取一个字符串值（所以是第一个）。

```
List<string> result = new List<string>();

using (SqlConnection connection = new SqlConnection(databaseConnectionString))
{
  connection.Open();
  using (SqlCommand command = new SqlCommand(query, connection))
  {
    command.CommandType = CommandType.Text;
    using (SqlDataReader reader = command.ExecuteReader())
    {
      while (reader.Read())
      {
        result.Add(reader.GetString(0));
      }

      reader.Close();
    }
    command.Cancel();
  }
}

return result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:25:05.420

尝试以下操作，为用户创建一个类：

```
[Table(Name = "foo")]
public class Users
{
   [Column(Name = "user_name")]
   username {get; set;};

   [Column(Name = "user_pword")]
   password {get; set;};

   [Column(Name = "user_isonline")]
   isonline {get; set;};
}

public static List<Users> GetOnline() 
{ 
   List<Users> listaOnline = new List<Users>(); 
   listaOnline = ExecuteQuery("SELECT * username FROM dbuser WHERE (isonline ='1')");
   return listaOnline;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:39:20.037

你可以这样做，它只是代码的大纲，会给你一些提示（需要在名称之间添加一些空格/特殊字符）。

```
string user = string.Empty;
foreach (var item in DbManager.GetOnline())
{
    user += item;
}
MessageBox.Show(user); 
```

希望它会有所帮助..

您也可以通过以下方式进行操作：

```
List<string> listUser= new List<string>();
listUser =DbManager.GetOnline();
string users= string.Join(",", listUser.ToArray());
 MessageBox.Show(users); 
```

这样，用户名将被打印出来，以“，”分隔。

# awk - AWK - 将字符串作为命令执行？

> ID：13743163
> 
> 赞同：1
> 
> 时间：2012-12-06T11:58:58.493
> 
> 标签：awk

此命令打印：

```
$ echo "123456789" | awk '{ print substr ($1,1,4) }'
1234 
```

是否可以将字符串作为命令执行？例如，这个命令：

```
echo "123456789" | awk '{a="substr"; print a ($1,1,4) }' 
```

结果：

```
$ echo "123456789" | awk '{a="substr"; print a ($1,1,4) }'
awk: {a="substr"; print a ($1,1,4) }
awk:                               ^ syntax error 
```

**编辑：**

```
$ cat tst.awk 
function my_substr(x,y,z) { return substr(x,y,z) }

{ a="my_substr"; print @a($1,1,4) }
bolek@bolek-desktop:~/Pulpit$ echo "123456789" | gawk -f tst.awk
gawk: tst.awk:3: { a="my_substr"; print @a($1,1,4) }
gawk: tst.awk:3:                        ^ nieprawidłowy znak '@' w wyrażeniu
bolek@bolek-desktop:~/Pulpit$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:33:48.530

我不认为直接在 awk 中可以做到这一点，但你可以通过使用 shell 来获得类似的效果。回想一下，awk 程序是作为字符串给出的，并且字符串在 shell 中通过将它们彼此相邻地写入来连接。因此，您可以这样做：

```
a=substr
echo "123456789" | awk '{ print '"$a"'($1, 1, 4) }' 
```

导致`1234`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T13:18:54.373

您可以使用间接函数调用通过 GNU awk 中的变量调用用户定义的函数，请参阅[http://www.gnu.org/software/gawk/manual/gawk.html#Indirect-Calls](http://www.gnu.org/software/gawk/manual/gawk.html#Indirect-Calls)

```
$ cat tst.awk
function foo() { print "foo() called" }
function bar() { print "bar() called" }

BEGIN {
   the_func = "foo"
   @the_func()

   the_func = "bar"
   @the_func()
}
$ gawk -f tst.awk
foo() called
bar() called 
```

不幸的是，由于内部实现问题，如果您想以这种方式调用内置函数，那么您需要为每个函数编写一个包装器：

```
$ cat tst.awk
function my_substr(x,y,z) { return substr(x,y,z) }

{ a="my_substr"; print @a($1,1,4) }
$ echo "123456789" | gawk -f tst.awk
1234 
```

# php - 是否有从多个对象获取属性值数组的本地方法？

> ID：13743164
> 
> 赞同：2
> 
> 时间：2012-12-06T11:59:01.440
> 
> 标签：php, oop

我经常遇到一种情况，我必须从多个对象中获取一组值。让我用一个虚构的情况和一些代码来澄清这一点。

想象一下我创建了一个类...

```
class MyObject {
    public $x = 0;
    public $y = 0;
} 
```

我有一系列实例......

```
$instances = array(
    new Object,
    new Object,
    new Object
); 
```

我想将所有`x`属性作为字符串加入，用逗号分隔......我必须使用循环......

```
$array = array();

foreach($instances as $instance) array_push($array, $instance->x);

$str = implode(',', $array); // holds an array of all x values 
```

这完全可行，但我非常反对不必要的循环和亲本机实现，因为我对性能有点痴迷 - 我不喜欢循环通过巨大的数组只是为了从每个实例中获取一个属性。

**是否有从多个对象获取属性值数组的本地方法？**如果是这样，怎么做？如果没有，知道为什么不？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:05:33.597

一个简单的方法是使用`array_map`

```
class MyObject {
    public $x = 0;
    public $y = 0;
}

$instances = array(
        new MyObject,
        new MyObject,
        new MyObject
);

$str = implode(",",array_map(function($v){ return $v->x;},$instances));
echo $str ; 
```

或者`array_reduce`

```
$str = trim(array_reduce($instances, function($a,$b){ $a .= $b->x . "," ; return $a;}),",");
echo $str ; 
```

两者都会输出

```
0,0,0 
```

您还可以修改您的类以使用`__toString()`示例

```
class MyObject {
    public $x = 0;
    public $y = 0;
    function __toString() {
        return $this->x . "," . $this->y;
    }
}

$instances = array(new MyObject(),new MyObject(),new MyObject());
echo implode("\n", $instances); 
```

输出

```
0,0
0,0
0,0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:05:03.843

我发现这个问题最简单的解决方案是使用`array_map()`，如下所示：

```
implode(',', array_map(
  function ($object) { return $object->property; }, 
  $instances)); 
```

# vbscript - 如何使用 VBscript 从值列表中获取唯一值？

> ID：13743165
> 
> 赞同：8
> 
> 时间：2012-12-06T11:59:04.850
> 
> 标签：vbscript

假设 Excel 工作表有一个名为*Student Names*的列，并且该列有重复值。说，

```
Student
=======

Arup
John
Mike
John
Lisa
Arup 
```

使用 VBScript，我怎样才能获得如下的唯一值？

```
Arup
John
Lisa
Mike 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T12:55:48.027

用于获取唯一项的 VBScript 工具是一个字典：将所有项作为键添加到字典中，并且 dictionary.Keys() 将返回一个数组 - 每个定义项 - 唯一键。在代码中：

```
 Dim aStudents : aStudents = Array("Arup", "John", "Mike", "John", "Lisa", "Arup")
  WScript.Echo Join(aStudents)
  Dim aUniqStudents : aUniqStudents = uniqFE(aStudents)
  WScript.Echo Join(aUniqStudents)

' returns an array of the unique items in for-each-able collection fex
Function uniqFE(fex)
  Dim dicTemp : Set dicTemp = CreateObject("Scripting.Dictionary")
  Dim xItem
  For Each xItem In fex
      dicTemp(xItem) = 0
  Next
  uniqFE = dicTemp.Keys()
End Function 
```

输出：

```
Arup John Mike John Lisa Arup
Arup John Mike Lisa 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-22T15:06:40.847

或者，由于您的源数据在 Excel 电子表格中，您可以使用 SQL 来填充 ADODB 记录集：

```
Option Explicit

Dim filePath, sheetName
filePath = "C:\path\to\excel\workbook.xlsx"
sheetName = "Sheet1"

Dim connectionString
connectionString = _
    "Provider=Microsoft.ACE.OLEDB.12.0;" & _
    "Data Source=""" & filePath & """;" & _
    "Extended Properties=""Excel 12.0;HDR=No"""

Dim sql
sql = "SELECT DISTINCT Student FROM [" & sheetName & "$]"

Dim rs
Set rs = CreateObject("ADODB.Recordset")
rs.Open sql, connectionString

Do Until rs.EOF
    WScript.Echo rs("StudentName")
Loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-22T01:25:35.280

如果您不想要 Dictionary 您可以使用以下内容将数组中的每个元素与其自身进行比较。

```
Info = Array("Arup","John","Mike","John","Lisa","Arup")

x = 0
z = ubound(Info)
Do
x = x + 1
Do
z = z - 1
If x = z Then
Info(x) = Info(z)
ElseIf Info(x) = Info(z) Then
Info(x) = ""
End If
Loop Until z=0
z = ubound(Info)
Loop Until x = ubound(Info)
For each x in Info 
If x <> "" Then
Unique = Unique & Chr(13) & x
End If
Next

MsgBox Unique 
```

# iphone - 尝试重叠两个图像并在第三个图像中显示重叠图像

> ID：13743167
> 
> 赞同：0
> 
> 时间：2012-12-06T11:59:08.790
> 
> 标签：iphone, ios, uiimageview

我正在尝试重叠两个本地图像并尝试在第三个图像中显示重叠的一个。我正在使用此代码，但模拟器什么也没显示。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    image1 = [[UIImage alloc]init];

    image1 = [UIImage imageNamed:@"iphone.png"];

    imageA = [[UIImageView alloc]initWithImage:image1];

    [self merge];

}

-(void)merge
{
  CGSize size = CGSizeMake(320, 480);
    UIGraphicsBeginImageContext(size);

    CGPoint thumbPoint = CGPointMake(0,0);
    imageview.image = imageA.image;
    [imageA.image drawAtPoint:thumbPoint];

    imageB = [[UIImage alloc]init];

    imageB = [UIImage imageNamed:@"Favorites.png"];

    CGPoint starredPoint = CGPointMake(0, 0);
    [imageB drawAtPoint:starredPoint];

    UIImage *imageC = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    imageview.image = imageC;

    [self.view addSubview:imageview];

} 
```

我不知道/不知道我在哪里犯错。

任何帮助都是不言而喻的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:41:37.877

从 Merge 中的以下代码除外的所有位置删除所有代码。

```
-(void)merge
{
    CGSize size = CGSizeMake(320, 480);
    UIGraphicsBeginImageContext(size);

    CGPoint point1 = CGPointMake(0,0);
   // The second point has to be some where different than the first point, other wise, the second image will be above the first image, and you wont even know that the two images are there.
    CGPoint point2 = CGPointMake(100,100);

    UIImage *imageOne = [UIImage imageNamed:@"Image1.png"];
    [imageOne drawAtPoint:point1];

    UIImage *imageTwo = [UIImage imageNamed:@"Image2.png"];
  // If you want the above image to have some blending, then you can do some thing like below. 
  //  [imageTwo drawAtPoint:point2 blendMode:kCGBlendModeMultiply alpha:0.5];

    [imageTwo drawAtPoint:point2];

    UIImage *imageC = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    UIImageView *iv = [[UIImageView alloc] initWithFrame:CGRectMake(100,100,200,200)];
    iv.image=imageC;

    [self.view addSubview:iv];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:36:47.737

这是一个通用的“合并”函数，写为 UIImage 类别......允许图像叠加/底图。

[http://saveme-dot-txt.blogspot.com/2011/06/merge-image-function.html](http://saveme-dot-txt.blogspot.com/2011/06/merge-image-function.html)

# android - Android 共享首选项

> ID：13743168
> 
> 赞同：0
> 
> 时间：2012-12-06T11:59:13.570
> 
> 标签：android, android-layout, android-intent

我的活动使用和扩展偏好活动作为

```
SettingsUser extends PreferenceActivity 
```

我正在使用 preferenceScreen XML 来设计我的共享首选项并将其添加到我的活动中

```
addPreferencesFromResource(R.xml.mypreferences); 
```

为了获得我正在做的共享偏好

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

现在我想`onClick`在我的共享偏好上添加监听器，我看到有一个方法叫做`OnSharedPreferenceChangeListener`but not `onClickListener`，任何人都可以指导如何处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:00:52.227

你可以这样做：

```
Preference infoPreference = findPreference(key);
infoPreference.setOnPreferenceClickListener(new OnPreferenceClickListener() {
        @Override
        public boolean onPreferenceClick(Preference preference) {
            //do something
            return true;
        }
    }); 
```

# google-maps-api-3 - 谷歌地图方向：功能未正确定义

> ID：13743172
> 
> 赞同：0
> 
> 时间：2012-12-06T11:59:23.107
> 
> 标签：google-maps-api-3

我在将 v2 中已经工作的方向脚本翻译成 v3 时遇到问题。错误是未正确执行的 tohere/fromhere 函数。

标记显示正确，第一次单击后打开信息窗口。当我然后单击“tohere”或“fromhere”时，它会引发错误“tohere is not defined”...

任何提示我做错了什么？

```
jQuery(document).ready(function () {

if (jQuery('#map_canvas').length) {
initActive();
}

function initialize(lat, long,html) {
var latid = lat;
var longit = long;
var myLatlng = new google.maps.LatLng(latid, longit);
//var myLatlng = new google.maps.LatLng(51.512098,-0.137692);
var myOptions = {
    zoom:17,
    navigationControl:true,
    mapTypeControl:false,
    scaleControl:false,
    scrollwheel:false,
    disableDefaultUI:true,
    disableDoubleClickZoom:true,
    center:myLatlng,
    mapTypeId:google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
var styles = [
    {
        stylers:[

            { saturation:-100 }
        ]
    }
];

map.setOptions({styles:styles});

var myLatLng = new google.maps.LatLng(latid, longit);
var marker = createMarker(map,myLatLng,html);
}

function initActive() {
var flat = jQuery('#map_canvas').data('coord-lat');
var flong = jQuery('#map_canvas').data('coord-lon');
var title = jQuery('#map_canvas').data('content');
initialize(flat, flong,title);
}   

function createMarker(map, latlng,html) {
var marker = new google.maps.Marker({
    position: latlng,
    map: map
    });

var infowindow = new google.maps.InfoWindow({ size: new google.maps.Size(150,50)});
marker.setIcon("mapIcons/marker_red.png");

    var gmarkers = []; 
    var to_htmls = [];
    var from_htmls = [];
    var htmls = [];
    var i = gmarkers.length;

    // The info window version with the "to here" form open
    to_htmls[i] = html + '<br>Directions: <b>To here<\/b> - <a href="javascript:fromhere(' + i + ')">From here<\/a>' +
       '<br>Start address:<form action="http://maps.google.com/maps" method="get" target="_blank">' +
       '<input type="text" SIZE=40 MAXLENGTH=40 name="saddr" id="saddr" value="" /><br>' +
       '<INPUT value="Get Directions" TYPE="SUBMIT">' +
       '<input type="hidden" name="daddr" value="' + latlng.lat() + ',' + latlng.lng() + 
              // "(" + name + ")" + 
       '"/>';
    // The info window version with the "to here" form open
    from_htmls[i] = html + '<br>Directions: <a href="javascript:tohere(' + i + ')">To here<\/a> - <b>From here<\/b>' +
       '<br>End address:<form action="http://maps.google.com/maps" method="get"" target="_blank">' +
       '<input type="text" SIZE=40 MAXLENGTH=40 name="daddr" id="daddr" value="" /><br>' +
       '<INPUT value="Get Directions" TYPE="SUBMIT">' +
       '<input type="hidden" name="saddr" value="' + latlng.lat() + ',' + latlng.lng() +
              // "(" + name + ")" + 
       '"/>';
    // The inactive version of the direction info
    html = html + '<br>Directions: <a href="javascript:tohere('+i+')">To here<\/a> - <a href="javascript:fromhere('+i+')">From here<\/a>';
    var contentString = html;

    google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString); 
    infowindow.open(map,marker);
    });

    gmarkers.push(marker);
    htmls[i] = html;
}

// functions that open the directions forms
function tohere(i) {
 infowindow.setContent(to_htmls[i]); 
}
function fromhere(i) {
  infowindow.setContent(from_htmls[i]); 
}

}); //documentready close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:25:34.550

您的所有代码都是 jQuery(document).ready 函数的本地代码，因此在运行 HTML 单击处理程序的全局上下文中不可用。将函数声明移到该函数之外。

看起来您的 v2 代码来自 Mike Williams 的 v2 教程。 我移植到 v3[的他的“Getting Directions”地图示例可能会对您有所帮助。](http://www.geocodezip.com/v3_MW_example_map4.html)

# javascript - 三个.js OBJ 加载器对象

> ID：13743176
> 
> 赞同：6
> 
> 时间：2012-12-06T11:59:33.687
> 
> 标签：javascript, html, webgl, three.js

我在访问事件边界之外的对象时遇到问题。如果我将对象放入一个数组并签出该数组，该数组也是空的，但在事件范围内它是满的。我需要知道如何访问事件范围之外的对象。

```
for (var i = 0; i < 19; i++){
    var loader = new THREE.OBJMTLLoader();

    loader.addEventListener( 'load', function ( event ) {
        var tree = event.content;
        myWorld.setWorldTreePosition(multiplier);

        tree.position.y = 0;
        tree.position.x = myWorld.myTreePosition.position.x;
        tree.position.z =  myWorld.myTreePosition.position.z;
        tree.rotation.x = -(Math.PI / 2);
        tree.scale.set(10,5,5);
        scene.add( tree );
        collidableMeshList2.push(tree);

        tree.castShadow = true;
        //collidableMeshList.push(tree);
        multiplier += 500;

        console.log(collidableMeshList2); // here it is full of trees.
    }
);

loader.load( 'obj/Palm_Tree.obj', 'obj/Palm_Tree.mtl' );
//outside this all becomes empty.

console.log(collidableMeshList2); // here is list is empty but I don't know why. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:58:56.487

这与范围无关；它是空的，因为您需要等待加载器加载对象，然后才能看到其中的树——这就是 addEventListener("load") 所做的。代码片段的最后一行在加载函数之前执行。

您的代码片段令人困惑，您试图用 for 循环做什么并不是很明显。您正在创建许多加载器并将加载事件侦听器附加到它们。但是您的 loader.load() 调用是在循环之后，因此它将应用于最后一个加载器。您可能希望将 loader 对象的创建移到 for 循环之外，或者将 loader.load 调用移到循环内。

# magento - 如何在magento 1.7中将客户“订单总数”和“总支出”添加到订单网格

> ID：13743178
> 
> 赞同：2
> 
> 时间：2012-12-06T11:59:45.557
> 
> 标签：magento

我想知道如何在 magento 1.7 的订单网格中添加以下两个额外的列

*   客户总订单数
*   客户在订单上花费的总金额

我已经设法添加了列，但我无法让它显示任何数据。我相信问题的关键在于函数 *_prepareCollection()*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:31:18.200

没错，Magento 中任何网格的内容都包含在集合中。

集合对象最终会解析为 MySQL 查询，因此为了让它们显示在网格中，您需要将该数据加入集合中。只要您要求它们是可搜索和可排序的。

您可以通过将子选择加入您的集合来完成此操作，例如：

```
 $alias = 'subselect';
    $subselect = Mage::getModel('Varien_Db_Select', 
                Mage::getSingleton('core/resource')->getConnection('core_read')
            )->from('sales_flat_order_grid', array(
                    'customer_id as s_customer_id', 
                    'sum(grand_total) as total_revenue', 
                    'count(*) as total_orders')
            )->group('customer_id');

    $collection->getSelect()
        ->joinInner(array($alias => $subselect), 
                "{$alias}.s_customer_id = main_table.customer_id"); 
```

在您的`_prepareCollection()`通话中，它应该覆盖`app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php`.

然后你可以在你的函数中定义`total_revenue`和列。`total_orders``_prepareColumns()`

实现此目的的另一种方法是关闭搜索和排序并在列上调用渲染器，然后实例化客户模型并即时将所有内容放在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:40:50.963

抱歉需要 50 位代表发表评论（我认为），但乔纳森指的是（我希望）该文件：

```
/app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php 
```

您应该扩展哪个（所以不要编辑核心），将文件复制到：

```
/app/code/local/Mage/Adminhtml/Block/Sales/Order/Grid.php 
```

并在那里编辑，建议的 _prepareCollection() 和 _prepareColumns()

在 setCollection() 调用之前将此添加到您的 _prepareCollection() 函数中：

```
the answer from Jonathan 
```

这给你的 _prepareColumns()

```
$this->addColumn('total_revenue', array(
        'header' => Mage::helper('sales')->__('Total Revenue'),
        'index' => 'total_revenue',
        'filter_index' => 'ctotals.total_revenue',
    ));

     $this->addColumn('total_orders', array(
        'header' => Mage::helper('sales')->__('Total Orders'),
        'index' => 'total_orders',
        'filter_index' => 'ctotals.total_orders',
    )); 
```

# java - ANTLR 语法的高级处理

> ID：13743184
> 
> 赞同：0
> 
> 时间：2012-12-06T11:59:55.127
> 
> 标签：java, antlr

我创建了一个简单的语法来解析一组 IF/THEN 语句。我可以获得各种识别异常（MissingTokenException、NoViableAltException 等）。

现在我需要更进一步，让我的处理更加细粒度。

例如，以下规则缺少 THEN：

```
IF CODE="1"
    DATE < TODAY
ELSE
    DATE >= TODAY
ENDIF 
```

这是另一个（缺少左括号）：

```
IF CODE="1" OR CODE="2") THEN
    DATE < TODAY
ENDIF 
```

另一个（字符串周围缺少引号）：

```
IF CODE=1" THEN
    DATE < TODAY
ENDIF 
```

任何人都可以提出任何建议吗？我唯一的想法是一个基于正则表达式的后处理器，如果语句没有被正确解析，它会与一系列正则表达式进行比较以确定出了什么问题。

杰森

# c++ - 使用浮点数存储大量数字

> ID：13743187
> 
> 赞同：1
> 
> 时间：2012-12-06T12:00:10.887
> 
> 标签：c++, precision

我`floats`用来代表我的游戏中的一个位置：

```
struct Position
{
    float x;
    float y;
}; 
```

我想知道这是否是最佳选择，以及随着位置值继续变大会产生什么后果。我花了一些时间来了解浮点数的存储方式，并意识到我有点困惑。

（我正在使用 Microsoft Visual C++ 编译器。）

在`float.h`中，`FLT_MAX`定义如下：

```
#define FLT_MAX         3.402823466e+38F        /* max value */ 
```

这是`340282346600000000000000000000000000000`。

该值远大于`UINT_MAX`定义为：

```
#define UINT_MAX        0xffffffff 
```

和对应的值`4294967295`。

基于此，存储一个非常大的数字（如位置）似乎`float`是一个不错的选择。尽管`FLT_MAX`非常大，但我想知道精度问题将如何发挥作用。

根据我的理解，a`float`使用 1 位存储符号，使用 8 位存储指数，使用 23 位存储尾数（假设前导 1）：

```
 S EEEEEEEE MMMMMMMMMMMMMMMMMMMMMMM 
```

这意味着`FLT_MAX`可能看起来像：

```
 0 11111111 11111111111111111111111 
```

这相当于：

```
1.11111111111111111111111 x 2^128 
```

或者

```
111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

即使知道这一点，我也很难想象精度的损失，而且我对随着值的不断增加会发生什么感到困惑。

有没有更简单的方法来思考这个问题？是否`floats`或`doubles`通常用于在类似的东西上存储非常大的数字`unsigned int`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:08:20.090

考虑浮点数精度的一种方法是认为它们具有大约 5 位数的精度。因此，如果您的单位是米，并且您有 1 公里以外的东西，那就是 1000 米 - 尝试以 10 厘米（0.1 米）或更小的分辨率处理该物体可能会出现问题。

游戏中的常用方法是使用浮点数，但将世界划分为相对于局部坐标系的位置（例如，将世界划分为一个网格，每个网格正方形都有一个平移值） . 一切都将具有足够的精度，直到它相对于相机进行转换以进行渲染，此时远处物体的不精度不是问题。

例如，想象一下太阳系中的游戏。如果你的坐标系的原点是在太阳的中心，那么行星表面的坐标就不可能用浮点数准确地表示出来。然而，如果你有一个相对于行星表面的坐标系，而后者又是相对于行星的中心，然后你知道行星相对于太阳的位置，你就可以在局部空间中对事物进行操作准确，然后转换为您想要渲染的任何空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:04:04.237

不，他们不是。

假设自从游戏对象移动后，您的位置需要在某个帧增加 10 厘米。

假设游戏世界以米为单位，则为 0.10。但是，如果您的`float`值足够大，它将无法再表示 0.10 的差异，并且您增加该值的尝试将完全失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:05:10.787

是否需要用小数部分存储大于 16.7m 的值？那么浮动会太小。

[Bruce Dawson 的这个系列可能会有所帮助](http://randomascii.wordpress.com/category/floating-point/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:09:21.120

如果您确实需要处理非常大的数字，请考虑使用[任意精度算术库](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)。您将不得不分析您的代码，因为这些库比内置类型的算术要慢。

您可能并不需要非常大的坐标值。例如，您可以环绕世界的边缘，并使用[模运算](http://en.wikipedia.org/wiki/Modulo_arithmetic)来处理位置。

# java - Jsp 上的 Struts2-Menu

> ID：13743192
> 
> 赞同：1
> 
> 时间：2012-12-06T12:00:15.183
> 
> 标签：java, jsp, struts2

我想在我的 jsp 页面上显示 struts2 菜单，但它给了我如下错误：

```
javax.servlet.jsp.JspException: The menu repository could not be found. 
```

我在互联网上搜索发现它需要 commons.lang jar、commons-logging.jar 并且我的 struts2 项目中已经有了这个 jar。

如何在我的 jsp 页面上显示 struts2 菜单？我的jsp代码如下：

```
<menu:useMenuDisplayer name="TabbedMenu" config="/templates/tabs.html">
        <ul id="primary-nav" >
                <li class="pad">&nbsp;</li>
                    <menu:displayMenu name="Order"/>
                    <menu:displayMenu name="Report"/>
                    <menu:displayMenu name="BatchProcessing"/>
                    <menu:displayMenu name="Master"/>
        </ul>
</menu:useMenuDisplayer> 
```

我有 menu-config.xml 如下：

```
<MenuConfig>
<Displayers>
        <Displayer name="TabbedMenu"  type="net.sf.navigator.displayer.TabbedMenuDisplayer"/>
    </Displayers>
    <Menus>
        <Menu name="Order" title="Order" />
        <Menu name="Report" title="Report" />
        <Menu name="BatchProcessing" title="Batch Processing" />
        <Menu name="Master" title="Master" />
    </Menus>
</MenuConfig> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:14:23.907

**在WEB-INF/Lib**的项目中添加**commons-logging.jar** 和**commons-lang.jar**

# python - 从列表字典中计算平均数，python

> ID：13743195
> 
> 赞同：-1
> 
> 时间：2012-12-06T12:00:19.473
> 
> 标签：python, list, dictionary, sum, average

我的代码我有一个字典，其中有两个列表与 zip() 函数相结合

```
self.dict = OrderedDict(zip(self.name,self.unit)) 
```

列表作为参数给出......`var=class([[1,2,4,7],["y","y","t"],[11.1,12.3,6]],name=["num1","letter","num2"])`

有一点应该有一个函数来检查每个括号中的项目是否只有数字。例如`int=[1,2,3]` ，如果这是真的，程序会计算每个仅数字列表的平均值。并将值打印为 `num1 = 3.5 num2 = 9.8`（作为表格）：

```
num1   num2
 3.5    9.8 
```

首先，我使用这个创建一个新列表：

```
for i in range(len(self.unit)):
                    if  all(isinstance(item, (int,float)) for item in self.unit[i]):
                        self.new_l.append(self.unit[i]) 
```

之后，我（在另一个函数中）创建一个名为的新列表`self.sum_l`，其中将每个数字列表的平均值放入新的列表列表中（在此示例中，我得到两个平均值）。

```
self.sum_l.append([sum(self.new_1[i])/float(len(self.new_1[i]))]) 
```

之后，我制作了一个使用`self.name`和`self.sum_1`列表 的新字典

```
 self.nov_slovar = OrderedDict(zip(self.ime, self.seznam_vsot)) 
```

哪个工作正常，但我面临的问题是......当我创建一个新字典时，代码`name`在形成新字典时从列表中取出尽可能多的元素，因为列表中有`self.sum_1`列表。但问题是，它需要前两个（在我的情况下）。这使得输出绝对不正确：

```
num1   letter
 4.6    9.8 
```

所以我的问题是，我应该怎么做才能防止这种情况发生。我已经尝试了很多东西。甚至试图计算字典中值的总和，但我遇到了错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:32:25.347

```
from __future__ import division

self.nov_slovar = {}
for key, value in self.dict.iteritems():
    try:
        self.nov_slovar[key] = sum(value)/len(value)
    except TypeError:  # can't sum non-numbers; skip those
        pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:34:55.800

对于一些非常简单的问题来说，这是一个很长的问题，我不确定我是否正确地回答了你的问题，但这可能会证明一些可能会有所帮助的事情......

```
import numbers

a = {"title": "num1", "values": [1,2,3,4,5]}
b = {"title": "letter", "values": [1,'b',3,4,5]}

def print_avg(r):
    if all(isinstance(x, numbers.Number) for x in r["values"]):
        print a["title"],":", sum(r["values"])/float(len(r["values"]))

print_avg(a)
>> num1 : 3.0
print_avg(b):
>> 
```

# php - 无法使用 php 获取会话值

> ID：13743199
> 
> 赞同：0
> 
> 时间：2012-12-06T12:00:37.307
> 
> 标签：php, html, session

我正在从我的 first.php 发送会话值并尝试从我的 second.php 获取。我已经对此进行了一些阅读，并且在我的本地主机上运行良好，但在我的服务器上根本无法运行。

这是我的 first.php 文件中的代码：

```
<?php
session_start();
ob_start();
?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="http://localhost/Shopping_biblioteka/css/style.css">
        <title></title>
    </head>
    <body align="center">
        <div id="login">
        <?php

        if (isset($_POST['username']) && isset($_POST['password'])) {
            $username = $_POST['username'];
            $password = $_POST['password'];
            mysql_connect("localhost", "shopping_katalog", "logik@112233") or die(mysql_error());
            mysql_select_db("shopping_katalog") or die(mysql_error());
        mysql_query("SET CHARACTER SET utf8");
        mysql_query("SET NAMES utf8");
            $result = mysql_query("SELECT password,id FROM x9qg6_users
            where username='" . $username . "'");
            if (!$result) {
                echo 'Could not run query: ' . mysql_error();
                exit;
            }
            $row = mysql_fetch_row($result);

            $userhash = md5($password . $test[1]);

            if ($test[0] === $userhash) {
                $_SESSION['login_user'] = $user_id;
                $_SESSION['username'] = $username;
                $url = "biblioteka.php";
                header("Location: $url");
            }
        } else {
            echo 'Внесете ги вашите податоци во полињата!';
        }
        ?> 
        <form action="" method="POST" accept-charset="UTF-8"> 
            Корисничко име:<br/>
            <input name="username" id="username" type="text"/><br/>
            Лозинка:<br/>
            <input type="password" id="password" name="password"/><br/>
            <input type="submit" value="Логирај се!"/>
        </form>

        </div>
    </body>
</html> 
```

这是我的 second.php 文件：

```
<?php
session_start();

?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="http://localhost/Shopping_biblioteka/css/style.css">
        <title>Библиотека на</title>
    </head>
    <body>
        <div id="wrapper">
            <?php

            $user_ID = $_SESSION['login_user'];
            $logged_user = $_SESSION['username'];
            ?>
            <h1 align="center" id="b_welcome">Добредојде <?php echo $logged_user; ?> во твојата библиотека! </h1>
            <h4 align="center" id="b_info">Во твојата библиотека ги имаш следниве книги</h4>
            <div id="knigi">
                <?php
                /* OVA E QUERITO
                 * 
                  SELECT *
                  FROM Knigi k, poracki p
                  WHERE k.knigaid = p.kniga
                  AND p.korisnikInt = $user_ID
                 * 
                 */

//-----------------------------------

                if(isset($_SESSION['login_user'])){
                mysql_connect("localhost", "user", "pass) or die(mysql_error());
                mysql_select_db("shopping_katalog") or die(mysql_error());
        mysql_query("SET CHARACTER SET utf8");
        mysql_query("SET NAMES utf8");
                $result = mysql_query("SELECT * FROM Knigi k, poracki p
        WHERE k.knigaid = p.kniga AND p.korisnikInt ='" . $user_ID . "'");
                while ($row = mysql_fetch_array($result)) {

//knigaid,naslov,avtor,link_do_pdf,thumb_link,kategorija,cena,br_strani
                    echo '<div id="item">';
                    echo '<a href="http://' . $row['link_do_pdf'] . '"><h5 align="center" id="b_item_title">' . $row['naslov'] . '</h5></a>';
                    //echo '<a href="http://' . $row['link_do_pdf'] . '">' . $row['avtor'] . '</a>';
                    echo '<a href="http://' . $row['link_do_pdf'] . '"><img src="http://' . $row['thumb_link'] . '" id="b_item_slika" /></a>';
                    echo '</div>';

                }

                if (!$result) {
                    echo 'Проблем со добивање на податоците: ' . mysql_error();
                    exit;
                }
                }else{
                    $url = "/index.php";
                header("Location: $url");
                }
                ?>
            </div><!--kraj na knigite-->
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:14:06.480

要检查是否启用了 cookie，请使用代码...

```
 <?php
setcookie('test', 1, time()+3600);
if(!isset($_GET['cookies'])){
    header('Location:/info.php?cookies=true');
}
if(count($_COOKIE) > 0){
    echo "Cookies are Enabled!";
} else {
    echo "Disabled";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:49:10.043

这是概念：

在你`first_page.php`的用户应该输入他的用户名和密码，如果你发现它们都是正确的并且与数据库中存在的匹配，那么你将设置一个会话并在其中存储你想要的任何数据，然后你会将用户重定向到`second_page.php`which将使用这些会话存储的值对它们做任何你想做的事情。如果用户没有输入他的用户名和密码，他将留在`first_page.php`

这是一个简单的示例，您可以从中获取主要概念并将其应用于您的案例：

在 first_page.php

```
<?php
session_start();
ob_start();
?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body align="center">
        <div>
            <?php
                if (!empty($_POST["username"]) && !empty($_POST["password"])) {
                    $_SESSION['username'] = $_POST["username"];
                    header("Location: second_page.php");
                }
            ?> 
            <form action="first_page.php" method="post" accept-charset="UTF-8"> 
                Username: <input type="text" name="username" /><br/>
                Password: <input type="password" name="password"/><br/>
                <input type="submit" value="Login"/>
            </form>
        </div>
    </body>
</html> 
```

而在 second_page.php

```
<?php
session_start();
?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <h3>Welcome <?php echo $_SESSION["username"] ?></h3>
    </body>
</html> 
```

# nant - 使用 pvcs 和 nantcontrib 提升和标记文件

> ID：13743200
> 
> 赞同：1
> 
> 时间：2012-12-06T12:00:38.900
> 
> 标签：nant, nantcontrib, pvcs

我们正面临着 nant 0.92 和 pvcs 8.4 的问题。我们的日常构建过程包括 1\. 从提升组“X”收集文件 2\. 使用收集的文件进行构建。3.将升级组“X”中的文件升级为“Y” 4.用特定的版本标签标记这些文件。

前 3 个步骤成功完成，但我们不知道如何标记文件。根据文档，我们需要指定需要提升的文件的修订版本。在这种情况下，我们唯一的线索就是促销组。以前版本的 Pvcs 曾经接受升级组，但现在它们仅限于文件的修订。问题是我们将文件分布在多个目录中，并且它们不需要总是进行尖端修订。任何人都可以帮助我们如何进行标签。

谢谢，萨蒂什

# mysql - 创建 dsn 时未显示 mysql 连接器版本

> ID：13743202
> 
> 赞同：1
> 
> 时间：2012-12-06T12:00:39.477
> 
> 标签：mysql

在这台特定的机器（Windows 7 32 位）上，我看不到连接器的驱动程序信息 - 虽然条目在那里（它显示 MySQL ODBC 5.1 驱动程序） - 但版本列或公司列中没有信息- 然后假设驱动程序未正确安装 -

我曾多次尝试卸载/安装 - 或安装不同的版本 - 只是没有帮助。

如何完全删除已安装的先前版本的连接器或如何确保正确安装驱动程序。

请注意，此驱动程序在其他 Windows 7 机器（32 位和 64 位）上运行得非常好——只是这台机器产生了问题。

我想在这里提到的另一件事是 - 我能够在这台机器上安装 MySQL 服务器 - 查询浏览器运行良好 - 其他机器上的应用程序可以访问这个服务器 - 但相同的应用程序不能在这台机器上运行 -它抛出错误“找不到数据源名称或未找到默认驱动程序” - 这是因为相同的连接器问题。

请帮忙！！

# java - 如何在 HttpClient 的请求中添加、设置和获取 Header？

> ID：13743205
> 
> 赞同：26
> 
> 时间：2012-12-06T12:00:45.697
> 
> 标签：java, http, servlets, httpclient, apache-httpclient-4.x

在我的应用程序中，我需要在请求中设置标头，并且需要在控制台中打印标头值...所以请举例说明 HttpClient 或在我的代码中编辑它...

我的代码是，

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

public class SimpleHttpPut { 
  public static void main(String[] args) {
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("http://http://localhost:8089/CustomerChatSwing/JoinAction");
    try {
      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
      nameValuePairs.add(new BasicNameValuePair("userId",
      "123456789"));
      post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

      HttpResponse response = client.execute(post);
      BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
      String line = "";
      while ((line = rd.readLine()) != null) {
    System.out.println(line);
      }

    } catch (IOException e) {
      e.printStackTrace();
    }
  }
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-24T06:17:27.497

可以使用 HttpPost，有一些方法可以在 Request 中添加 Header。

```
DefaultHttpClient httpclient = new DefaultHttpClient();
String url = "http://localhost";
HttpPost httpPost = new HttpPost(url);

httpPost.addHeader("header-name" , "header-value");

HttpResponse response = httpclient.execute(httpPost); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:38:41.247

在 apache 页面上：http: [//hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html)

你有这样的事情：

```
URIBuilder builder = new URIBuilder();
builder.setScheme("http").setHost("www.google.com").setPath("/search")
    .setParameter("q", "httpclient")
    .setParameter("btnG", "Google Search")
    .setParameter("aq", "f")
    .setParameter("oq", "");
URI uri = builder.build();
HttpGet httpget = new HttpGet(uri);
System.out.println(httpget.getURI()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-10T10:27:27.177

您可以完全按照使用公共 GitHub API 的方式测试此代码（不要超过请求限制）：

```
public class App {

    public static void main(String[] args) throws IOException {

        CloseableHttpClient client = HttpClients.custom().build();

        // (1) Use the new Builder API (from v4.3)
        HttpUriRequest request = RequestBuilder.get()
                .setUri("https://api.github.com")
                // (2) Use the included enum
                .setHeader(HttpHeaders.CONTENT_TYPE, "application/json")
                // (3) Or your own
                .setHeader("Your own very special header", "value")
                .build();

        CloseableHttpResponse response = client.execute(request);

        // (4) How to read all headers with Java8
        List<Header> httpHeaders = Arrays.asList(response.getAllHeaders());
        httpHeaders.stream().forEach(System.out::println);

        // close client and response
    }
} 
```

# sql - Oracle：加入字段的整数值

> ID：13743209
> 
> 赞同：2
> 
> 时间：2012-12-06T12:00:58.040
> 
> 标签：sql, oracle, join, integer

我意识到我正在使用的数据库中的数据结构还有很多不足之处，但我无法控制，所以请耐心等待。

我所拥有的是一个`ADDRESSES.COMPANY`可能是也可能不是整数 ID 的字段。有时它是一个字符串。但是，当它是整数时，我想加入另一个表`COMPANIES`。原始查询（预加入）如下所示：

```
SELECT *
  FROM (SELECT ROWNUM AS ROW_NUM, INNERQUERY.*
          FROM (  SELECT *
                    FROM ADDRESSES, COMPANIES
                ) INNERQUERY) OUTERQUERY
 WHERE ROW_NUM <= 50 AND ROW_NUM > 0 
```

如果我尝试正常加入，我会收到一个错误`ORA-01722: invalid number`......原因很明显（尝试加入的并不总是一个数字，或者至少我认为这就是它必须的意思，因为它是真的！）。尝试加入后我的查询：

```
SELECT *
  FROM (SELECT ROWNUM AS ROW_NUM, INNERQUERY.*
          FROM (  SELECT *
                    FROM ADDRESSES, COMPANIES
                    WHERE ADDRESSES.COMPANY(+) = COMPANIES.ID
                ) INNERQUERY) OUTERQUERY
 WHERE ROW_NUM <= 50 AND ROW_NUM > 0 
```

我能想出的唯一两个潜在解决方案都是使用该`TO_NUMBER()`函数，我认为它会将非数字字符串评估为 0。我试过：

```
SELECT *
  FROM (SELECT ROWNUM AS ROW_NUM, INNERQUERY.*
          FROM (  SELECT *
                    FROM ADDRESSES, COMPANIES
                    WHERE TO_NUMBER(ADDRESSES.COMPANY)(+) = COMPANIES.ID
                ) INNERQUERY) OUTERQUERY
 WHERE ROW_NUM <= 50 AND ROW_NUM > 0 
```

哪个错误`ORA-00936: missing expression`（在第 7 行）。我假设我对使用它的适当位置的猜测不正确，并尝试了以下方法：

```
SELECT *
  FROM (SELECT ROWNUM AS ROW_NUM, INNERQUERY.*
          FROM (  SELECT *, TO_NUMBER(ADDRESSES.COMPANY) AS COMPANYID
                    FROM ADDRESSES, COMPANIES
                    WHERE COMPANYID(+) = COMPANIES.ID
                ) INNERQUERY) OUTERQUERY
 WHERE ROW_NUM <= 50 AND ROW_NUM > 0 
```

第 3 行出错`ORA-00923: FROM keyword not found where expected`。

当我的第一次尝试没有成功时，我确信我的第二次会成功。但我对这个错误感到困惑。我对 Oracle 语法和/或行为完全一无所知，还是别的什么？我的问题有解决方案吗*？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:02:49.073

**1.**

`WHERE TO_NUMBER(ADDRESSES.COMPANY)(+) = COMPANIES.ID`

你不能做这个。

> (+) 运算符只能应用于列，不能应用于任意表达式。但是，任意表达式可以包含一个或多个标有 (+) 运算符的列。

[加入](http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries006.htm)

**2.**

```
SELECT *, TO_NUMBER(ADDRESSES.COMPANY) AS COMPANYID
  FROM ADDRESSES, COMPANIES
 WHERE COMPANYID(+) = COMPANIES.ID 
```

您不能在定义此别名的同一范围内按别名引用列（除非它是 order by 子句）。

在这种情况下执行外连接的正确方法是使用 ansi join 语法：

```
select * 
  from companies
  left join addresses on companies.id = addresses.companyid 
```

在字符串列上使用没有多大意义`to_number`，因为它会在连接期间遇到的第一个非数字值上产生相同的无效数字错误。

但是，您可以尝试将 number 转换为 char，正如已建议的那样。

```
 select * 
      from companies
       left join addresses 
         on to_char(companies.id) = addresses.companyid 
```

但是您必须记住，它可能会降低您的性能，因为您在转换列时将无法使用索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:22:13.133

我推断 ADDRESSES.COMPANY 是字符串类型（varchar2（），char（）），而 COMPANIES.ID 是数字类型（数字，整数，...）。

您不能总是将字符串转换为数字，因此 to_number() 是不可靠的。但是您可以将每个数字转换为字符串：

```
WHERE ADDRESSES.COMPANY(+) = to_char(COMPANIES.ID) 
```

当然，如果 ADDRESSES.COMPANY 中的数字以特定方式格式化，则必须使用相同的格式来转换 COMPANIES.ID

```
WHERE ADDRESSES.COMPANY(+) = to_char(COMPANIES.ID,'fm00009') 
```

fm00009 表示用零填充且没有前导空格（对于正数）。

如果 COMPANIES.ID 上有索引，优化器将不会使用它来解析查询，因为谓词涉及 COMPANIES.ID 的函数。一种解决方法是在 to_char(COMPANIES.ID,'fm00009') 上创建一个索引（所谓*的基于函数的索引*）。

另一种方法是使用*大小写*开关来决定何时可以将 COMPANY 转换为数字

```
SELECT ...
FROM
  (select ADDRESSES.*,
     case
       when translate(COMPANY,'X0123456789','X') is null -- base 10 non negative integer
       then to_number(COMPANY)
       else null
     end as COMPANY_N
   from ADDRESSES) as a,
  COMPANIES
where a.COMPANY_N(+) = COMPANIES.ID 
```

不会使用 ADDRESSES.COMPANY 上的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:16:15.890

如果只是基于字符串而不是整数转换并连接这些表`COMPANIES.ID`。`varchar`

```
SELECT *
  FROM (SELECT ROWNUM AS ROW_NUM, INNERQUERY.*
          FROM (  SELECT *
                    FROM ADDRESSES, COMPANIES
                    WHERE 
                    ADDRESSES.COMPANY(+) = CAST (COMPANIES.ID AS VARCHAR(100))
                ) INNERQUERY) OUTERQUERY
 WHERE ROW_NUM <= 50 AND ROW_NUM > 0 
```

# jsf - 在 Web-Logic Server 中部署 JSF 应用程序时出现此异常

> ID：13743213
> 
> 赞同：0
> 
> 时间：2012-12-06T12:01:17.663
> 
> 标签：jsf, weblogic

```
SEVERE: Critical error during deployment: 
com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! factoryName 'javax.faces.view.facelets.FaceletCacheFactory'
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:375)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225)
    at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:481)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:181)
    at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1872)
    at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153)
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205)
    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)
    at weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:140)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)
    at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178) 
```

# bluetooth - 带蓝牙的 NFC 读卡器

> ID：13743215
> 
> 赞同：3
> 
> 时间：2012-12-06T12:01:25.327
> 
> 标签：bluetooth, nfc

不确定这是否是 Stack Overflow 问题（如果有人知道 StackExchange 中更合适的部分，我会很高兴），但关于 NFC 阅读器的所有问题都在这里，所以，我来了：

我想在一个项目中使用 NFC-Tags 并且需要一个阅读器。虽然越来越多的手机能够读取此类标签，但任何旧手机都不能。然而，这些手机通常有蓝牙。所以我正在寻找的是可以通过蓝牙连接到手机的 NFC 阅读器。

我认为这将是一种常见的设备，但令我惊讶的是，我没有找到太多。读者通常通过 USB 连接（就像[这些](http://nfctags.tagstand.com/#nfc-reader-writers)一样）。至少有一种设备确实使用蓝牙，[Blueberry UHF](http://www.tertiumtechnology.com/blueberry_uhf.php)，但我找不到任何销售它的零售商。

所以，我的问题是：有没有这样的设备几乎没有的原因，还是我只是看错了地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-23T21:26:27.290

我知道我回答这个问题迟了，但也许我的回答会帮助其他正在寻找同样东西的人。您正在寻找的内容可从 Serialio 获得。有多个蓝牙 NFC 阅读器可用。BlueBerry 以 Scanfob 品牌重新命名。

这是更新后的 Scanfob NFC 页面的链接（之前发布的上述链接不再有效）：[https ://serialio.com/products/rfid/readerwriters/scanfob%C2%AE-nfc-bb2](https://serialio.com/products/rfid/readerwriters/scanfob%C2%AE-nfc-bb2)

有多个应用程序可以与读者交互。这实际上取决于您想对读取的数据做什么。这是在 Android 上使用 NFC 阅读器的考勤管理解决方案示例： [https ://serialio.com/products/mobile/software/MobileGrid/Android/use/TimeTrack/MG_TimeTrack_Android.php](https://serialio.com/products/mobile/software/MobileGrid/Android/use/TimeTrack/MG_TimeTrack_Android.php)

还有很多。我只是还没有添加更多链接的声誉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T03:37:00.550

您所指的设备类型可在此处获得：[https](https://serialio.com//store/index.php?cPath=89&osCsid=nep7av4i0431r39eqdl23oh2i7) ://serialio.com//store/index.php?cPath=89&osCsid=nep7av4i0431r39eqdl23oh2i7 。

您难以找到支持蓝牙的设备的原因是，NFC/RFID 阅读器的外围市场针对的是桌面嵌入式市场，在这些市场中，USB/RS232 电缆选项是人们熟悉的更便宜/更容易/稳定的产品。与有线设备一起提供的驱动程序堆栈也可以在处理传入数据方面做很多艰苦的工作。然而，市场上有几家公司生产 RS232 转蓝牙桥接器，这意味着您可以尝试使用蓝牙将外围设备连接到该桥接器。虽然您可以配对设备，但您需要编写可以通过蓝牙串行端口连接中断传入有效负载的软件，因此要建立这样的平台还有很多工作要做运行 - 尤其是旧设备。但是，如果需要，这是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:08:17.083

通过蓝牙连接手机的 NFC 读卡器会解决哪些可能的问题？手机不会对 NFC 有任何了解，它没有所需的软件或堆栈。

当然，您可以（可能）编写该软件，但目的是什么？当然，您链接到的单元是您所追求的，但它是出于非常特殊的目的（即您必须在另一端编写软件）。

购买支持 NFC 的手机而不是尝试升级不支持 NFC 的手机可能会更便宜（时间和金钱）。

# android - 是否可以在 Android 4 及更高版本上显示来自 URL 的视频缩略图？

> ID：13743223
> 
> 赞同：12
> 
> 时间：2012-12-06T12:01:45.323
> 
> 标签：android, url, bitmap, video-thumbnails

以下两者在模拟器（2.3.3）上都可以正常工作，但在真实设备（[Nexus S](http://en.wikipedia.org/wiki/Nexus_S)和 4.1.2）上没有显示缩略图的图像。我还将尝试在`Android 4 Emulator`. 如果我为 设置默认值`android:src`，`ImageView`则不再显示它。这让我觉得它被替换了，但它`ImageView`是空的。

```
public class MainActivity extends Activity {

    ImageView img;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        img = (ImageView)findViewById(R.id.img_thumbnail);
        new MyAsync().execute("http://commonsware.com/misc/test.mp4");
    }

    //This version is still not working, but it's more readable (edited: Selvin).
    public class MyAsync extends AsyncTask<String, Void, Bitmap>{

        @Override
        protected Bitmap doInBackground(String... objectURL) {
            //return ThumbnailUtils.createVideoThumbnail(objectURL[0], Thumbnails.MINI_KIND);
            return ThumbnailUtils.extractThumbnail(ThumbnailUtils.createVideoThumbnail(objectURL[0], Thumbnails.MINI_KIND), 100, 100);
        }

        @Override
        protected void onPostExecute(Bitmap result){
             img.setImageBitmap(result);
        }
    }
} 
```

我知道之前有人问过类似的问题，~~*[Displaying video thumbnails in an Android device from a remote video URL](https://stackoverflow.com/questions/10750502/displaying-video-thumbnails-in-android-device-from-remote-video-url)*~~，但我已经尝试过这个和相同的结果。

为什么这在设备上不起作用以及如何使它起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-07T16:23:17.623

Use FFmpegMediaMetadataRetriever to extract a thumbnail at the desired position: [FFmpegMediaMetadataRetriever](https://github.com/wseemann/FFmpegMediaMetadataRetriever)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:24:27.760

This is not possible on Android and Java and as far as I know any other language without downloading the entire video (correct me if I'm wrong). It is with good reason that YouTube and any other large video service provide a simple API for getting a video thumb. So if the server where the videos reside doesn't support this kind of API call your in bad luck.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T14:07:39.627

Faced the same problem on 2.3 when tried to make thumbnail from file which was located in the cache folder. Setting permission flags solved the problem:

```
videoFile.setReadable(true, false); 
```

# linux - 驱动/模块交叉编译

> ID：13743226
> 
> 赞同：1
> 
> 时间：2012-12-06T12:01:56.430
> 
> 标签：linux, embedded, driver

我正在尝试为基于 arm 的板交叉编译驱动程序。在 make 文件中，包含文件的搜索路径是主机内核的路径，即它指向 ubuntu 附带的 linux 头文件。我在主机系统（i7/ubuntu）上也有目标板的内核源代码树。我的问题是交叉编译需要哪个包含路径（本机系统的 linux 头文件路径或板的内核源代码树的路径？同样的事情适用于包括驱动程序在内的所有模块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:33:30.363

这是一个树外驱动程序的 Makefile。指定的架构、工具链和内核目录：

```
ifneq ($(KERNELRELEASE),)
# We were called by kbuild

obj-m += fpgacam.o

else  # We were called from command line

KDIR := path/to/your/target/kernel
PWD  := $(shell pwd)
CROSS=arm-none-linux-gnueabi-

default:
    @echo '    Building Cam drivers for 2.6 kernel.'
    @echo '    PLEASE IGNORE THE "Overriding SUBDIRS" WARNING'
    $(MAKE) -C $(KDIR) SUBDIRS=$(PWD)  ARCH=arm CROSS_COMPILE=$(CROSS) modules

install:
    ./do_install.sh *.ko

endif  # End kbuild check
######################### Version independent targets ##########################

clean:
    rm -f -r *.o *.ko .*cmd .tmp* core *.i 
```

当从模块目录调用 make 时，会采用命令行路径，并使用`make -C`. 内核构建系统然后传递给它的不同变量返回到模块目录，所有设置（包括路径、工具链等）以编译模块。这第二次通过 Makefile，采用 kbuild 路径，并像在树中一样构建模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:26:50.553

使用构建系统的头文件进行编译是非常糟糕的消息，并且可能会出现微妙的二进制不兼容性，表现为目标上看似奇怪的崩溃。

正如您已经发现的那样，内核已经对此进行了强化，并且将拒绝加载针对错误标头构建的模块。您需要使用与现有内核相同的源代码树进行构建——包括任何补丁。此时您不妨重建整个内核。

内核树是自包含的，因此只需在原地交叉编译即可。如果您要添加驱动程序，那么在树中编译它可能是最简单的。

如果您想构建任何用户空间组件，您有两种解决方案：

1.  `--sysroot=<dir>`将选项传递给 ，目标系统的系统根目录`gcc`在哪里`<dir>`
2.  构建 gcc 和 binutils 以用作它们的默认值`sysroot`

后一种方法是[Angstrom](http://www.angstrom-distribution.org)使用的方法，它节省了很多屁股伤害。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-07T07:04:26.003

您可能想尝试使用[crosstool-ng](http://crosstool-ng.org/)

它负责大部分工作。您只需关心要为内核编译启用的配置设置。

这里另一个参考：[链接](https://stackoverflow.com/questions/493210/linux-cross-compilation-for-arm-architecture?rq=1)

# c# - 如何从 Protocol Buffers .NET 代码生成 .proto 文件？

> ID：13743227
> 
> 赞同：7
> 
> 时间：2012-12-06T12:01:56.550
> 
> 标签：c#, c++, .net, protocol-buffers, protobuf-net

那么让我们的类在文件夹中具有属性如何从它们中生成 .proto 标记文件（以获取例如 C++ 代码）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T15:01:25.170

“具有属性的类”是指适合 protobuf-net 的属性吗？如果是这样，protobuf-net 有一个`GetProto`方法可以提供基于根类型的模式：

```
string proto = Serializer.GetProto<SomeType>(); 
```

尽管有相反的传言，但 v2 中的这种方法已经重新实现了相当长的一段时间。

# c# - MonoTouch 异常：在已被 GC 处理的类型的托管对象上从 Objective-c 调用选择器

> ID：13743230
> 
> 赞同：3
> 
> 时间：2012-12-06T12:02:07.337
> 
> 标签：c#, ios, exception, xamarin.ios

我在我的 MonoTouch 应用程序中遇到了这个异常，我似乎无法修复它。我已经尝试了大约 6 个小时，但我没有运气。

我对这个异常的理解是，一个对象正在被 MonoTouch 引用（或试图被引用），但垃圾收集已经处理了它。因此，它希望使用我没有在类中设置的构造函数，使用指针再次构建对它的引用。

最初我认为添加该构造函数就足够了，直到我做了一些研究并意识到它充其量只是一个临时绷带。我发现奇怪的是，据我所知，我持有对所有内容的引用。我什至有点过火了，开始为不一定需要保留的东西创建成员变量来尝试捕获异常，但仍然没有。

当我加载 ViewController，触发将新 ViewController 推送到 NavigationController 上的委托（从而离开屏幕），点击后退按钮并再次移动到另一个视图时，会发生错误。这始终以相同的方式发生，并且在这一点上总是会崩溃，尽管由于我认为 GC 的工作方式不一定在完全相同的时间发生。

到目前为止，该应用程序非常简单。第一个屏幕使用 ShinobiCharts 加载 5 个不同的图表。数据源和委托在 ViewController 中设置，并将 ViewModel 发送到视图，然后将图表添加到子视图。异常发生在 ColumnChart（继承自 ShinobiChart 的自定义类）中。异常总是会在这些控件上引发，而不是在 View 或 ViewController 上。但是，哪个图表导致异常似乎每次都是随机的。

我如何存储图表如下所示：

```
public class HomeViewModel
{
    public ColumnChart MeetingsChart { get; set; }
    public ColumnChart FirmDataChart { get; set; }
    public ColumnChart SystemUseChart { get; set; }
    public BarChart IllustrationsChart { get; set; }
    public PieChart TermsOfBusinessChart { get; set; }

    public ColumnChartDataSource MeetingsChartDataSource { get; set; }
    public ColumnChartDataSource SystemUseChartDataSource { get; set; }
    public StackChartDataSource FirmDataChartDataSource { get; set; }
    public BarChartDataSource IllustrationsChartDataSource { get; set; }
    public PieChartDataSource TermsOfBusinessDataSource { get; set; }

    public BarChartDataProvider TermsOfBusinessDataProvider { get; set; }

    public DashboardMeetingChartDelegate MeetingsChartDelegate { get; set; }
    public ColumnChartDelegate SystemUseChartDelegate { get; set; }
    public PieChartDelegate TermsOfBusinessDelegate { get; set; }
} 
```

然后在控制器中实现这个类，如下所示：（注意：很多代码被剥离，因为我认为不需要它）

```
public class HomeController : UIViewController
{
private HomeView _homeView;
private HomeViewModel _homeViewModel;
 …..

 public HomeController()
    {
        _homeViewModel = new HomeViewModel();
    }
….

private void LoadCharts()
    {           
        _homeViewModel.MeetingsChart = LoadMeetingsChart();
        _homeViewModel.FirmDataChart = LoadFirmDataChart();
        _homeViewModel.SystemUseChart = LoadSystemUseChart();
        _homeViewModel.IllustrationsChart = LoadIllustrationsChart();
        _homeViewModel.TermsOfBusinessChart = LoadTermsOfBusinessChart();
    }

    private ColumnChart LoadMeetingsChart()
    {
        ColumnChart meetingsChart = new ColumnChart(RectangleF.Empty);
        meetingsChart.DataSource = _homeViewModel.MeetingsChartDataSource;
        meetingsChart.Delegate = _homeViewModel.MeetingsChartDelegate;
        meetingsChart.LicenseKey = LICENSE_KEY;

        return meetingsChart;
    }
} 
```

最后，观点：

```
public class HomeView : UIView
{
    private HomeViewModel _homeViewModel;

    public HomeView(RectangleF frame, UINavigationController navigationController,       HomeViewModel homeViewModel)
        : base(frame)
    {
        this._homeViewModel = homeViewModel;
        this.BackgroundColor = UIColor.FromRGB(20, 20, 20);
        this.Title = "Sales 360 Dashboard";

          SetupChartBounds(UIApplication.SharedApplication.StatusBarOrientation);
    }   

 public void SetupCharts()
    {
        SetupMeetingsChartHeaderBar();
        SetupTermsOfBusinessChartHeaderBar();
        SetupIllustrationsChartHeaderBar();
        SetupSystemUserChartHeaderBar();
        SetupFirmDataChartHeaderBar();

        this.AddSubview(_homeViewModel.MeetingsChart);
        this.AddSubview(_homeViewModel.TermsOfBusinessChart);
        this.AddSubview(_homeViewModel.IllustrationsChart);
        this.AddSubview(_homeViewModel.SystemUseChart);
        this.AddSubview(_homeViewModel.FirmDataChart);
    }    
} 
```

我真的很感激在这个问题上的任何帮助，因为我非常坚持。谢谢。

**编辑1：**

HomeController 是从名为 SplashController 的东西推送而来的。SplashController 的唯一目的是显示初始屏幕视图并调用 Web 服务。Web 服务是异步调用的，完成后会将视图更改为显示所有图表的主视图。

这是一些 SplashController 类：

```
public class SplashController : UIViewController
{
    private SplashView _splashView;
    private SplashViewModel _splashViewModel;
    private readonly string BACKGROUND_IMAGE_PATH;
    private HomeController _homeController;
            .....

    public override void LoadView()
    {
        LoadViewModel();

        _splashView = new SplashView(new RectangleF(0, 0, Dimensions.Width, Dimensions.Height), _splashViewModel);
        this.View = _splashView;
    }

// .... a number of service calls eventually leading to this

   protected void GetTermsOfBusinessAllAgentsCompleted(object sender,   GetTermsOfBusinessAllAgentsCompletedEventArgs e)
    {
        _servicesHelper.StopTimer(e.UserState as Timer);
        if (e.Error != null)
            HandleError(e.Error, "Terms of Business");
        else
        {
            _termsOfBusinessGraphData = e.Result;
            ChangeViewToHomeView();
        }
    } 

   private void ChangeViewToHomeView()
    {
        _homeController = new HomeController(_meetingsGraphData, _firmDataGraphData, _systemUseGraphData, 
                                             _illustrationsGraphData, _termsOfBusinessGraphData);

        this.NavigationController.PushViewController(_homeController, false);
    }    
} 
```

HomeView 是在 HomeController 类中重写的 LoadView 方法中创建的，基本上如下所示：

```
_homeView = new HomeView(new RectangleF(0, 0, Dimensions.Width, Dimensions.Height),    this.NavigationController, _homeViewModel);
this.View = _homeView; 
```

至于 NavigationController，问得好。这是我之前在将 NavigationController 传递给委托时所做的事情。但是，现在所有这些都在 HomeController 中完成，因此不再需要它。对不起，我的错！我现在把它拿出来并尝试重新运行应用程序，同样的事情仍然发生。请忽略这一点。

**编辑2：**

这是其中一张图表的代表。我错过了处理错误的方法，因为它不需要。_meetingServices.GetAgentsData 方法在该方法中调用 Web 服务，然后返回此对象中的事件：

```
public class DashboardMeetingChartDelegate : SChartDelegate
{
    private UINavigationController _navigationController;
    private CategoryGraph _meetingsGraphData;
    private MeetingServices _meetingServices;
    private ServicesHelper _servicesHelper;
    private int _currentIndex;

    public DashboardMeetingChartDelegate(UINavigationController navigationController, CategoryGraph meetingsGraphData)
    {
        this._navigationController = navigationController;
        this._meetingsGraphData = meetingsGraphData;

        _meetingServices = new MeetingServices();
        _servicesHelper = new ServicesHelper();
        _currentIndex = -1;
    }

    protected override void OnToggledSelection (ShinobiChart chart, SChartDataPoint dataPoint, SChartSeries series, PointF pixelPoint)
    {
        _currentIndex = dataPoint.Index;
        _meetingServices.GetAgentsData(GetAgentsCompleted);
    }

    protected void GetAgentsCompleted(object sender, GetAgentsCompletedEventArgs e)
    {
        _servicesHelper.StopTimer(e.UserState as Timer);
        if (e.Error != null)
            HandleError(e.Error);
        else
        {
            int rsmId = Convert.ToInt32(_meetingsGraphData.Data[0].SeriesDataPoints[_currentIndex].PointMetaData);
            AgentContract currentAgent = e.Result.Agents.Where(agent => agent.Id == rsmId).First();
            _navigationController.PushViewController(new MeetingController(currentAgent), true);
        }
    } 
```

这是 MeetingController - 与另一个非常相似，只是加载的更少：

```
public class MeetingController : UIViewController
{
    private AgentContract _currentAgent;
    private RsmChartView _meetingView;
    private RsmChartViewModel _meetingViewModel;
    private MeetingTypeController _meetingTypeController;
    private ColumnChartDataProvider _columnChartDataProvider;

    public MeetingController(AgentContract currentAgent)
    {
        _currentAgent = currentAgent;
    }

    public override void LoadView ()
    {
        LoadColumnChartDataProvider();
        LoadViewModel();
        InitialiseView();
    }

    private void LoadColumnChartDataProvider()
    {
        _columnChartDataProvider = new ColumnChartDataProvider();
        _columnChartDataProvider.XValueList.Add(new NSString("Phone"));
        _columnChartDataProvider.XValueList.Add(new NSString("Demo"));
        _columnChartDataProvider.XValueList.Add(new NSString("Fact Finding"));

        _columnChartDataProvider.YValueList.Add(61);
        _columnChartDataProvider.YValueList.Add(22);
        _columnChartDataProvider.YValueList.Add(27);
    }

    private void LoadViewModel()
    {
        _meetingViewModel = new RsmChartViewModel();
        _meetingViewModel.Chart = LoadMeetingChart();
        _meetingViewModel.RsmContentModel = LoadRsmContentModel();
    }

    private RsmContentModel LoadRsmContentModel()
    {
        RsmContentModel model = new RsmContentModel();
        model.Name = _currentAgent.Name;

        return model;
    }

    private void InitialiseView()
    {
        _meetingView = new RsmChartView(new RectangleF(0, 0, Dimensions.Width, Dimensions.Height), _meetingViewModel);
        this.View = _meetingView;
    }

    private ColumnChart LoadMeetingChart()
    {
        ColumnChart meetingChart = new ColumnChart(new RectangleF(10, 220, Dimensions.Width - 20, 540));
        _meetingTypeController = new MeetingTypeController();
        _meetingViewModel.ChartDataSource = new ColumnChartDataSource(_columnChartDataProvider);
        _meetingViewModel.ChartDelegate = new ColumnChartDelegate(this.NavigationController, _meetingTypeController);

        meetingChart.DataSource = _meetingViewModel.ChartDataSource;
        meetingChart.Delegate = _meetingViewModel.ChartDelegate;

        return meetingChart;
    }

    public override void ViewDidLoad()
    {
        _meetingView.Load();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:30:29.507

这种情况通常很难调试。已对 MonoTouch 进​​行了一些更改，以减少此类事件的发生。

要尝试它们，我建议您尝试 6.0.7（在 beta 通道上）并在邮件列表（或错误报告）上报告任何未解决的问题。

更多详细信息可以在发行说明中找到（[直接链接](http://bit.ly/monotouch-experimental-dispose)）。

# javascript - 检测 ipad 和方向的 Javascript 解决方案

> ID：13743237
> 
> 赞同：1
> 
> 时间：2012-12-06T12:02:16.933
> 
> 标签：javascript, ipad

是否有可靠的方法来检测正在从 iPad 上查看网页（没有误报）以及通过 JavaScript 的方向是什么？

我认为这对第一部分有好处：

```
var isiPad = navigator.userAgent.match(/iPad/i) != null; 
```

我想我找到了第二部分：

```
<button onclick="detectIPadOrientation();">What's my Orientation?</button>

<script type="text/javascript">
    window.onorientationchange = detectIPadOrientation;
    function detectIPadOrientation () {
        if ( orientation == 0 ) {
            alert ('Portrait Mode, Home Button bottom');
        } else if ( orientation == 90 ) {
            alert ('Landscape Mode, Home Button right');
        } else if ( orientation == -90 ) {
            alert ('Landscape Mode, Home Button left');
        } else if ( orientation == 180 ) {
            alert ('Portrait Mode, Home Button top');
        }
    }
</script> 
```

我不知道它是否适用于所有 iPad，包括新的更小的 iPad。所以我的问题是：这些功能能否在所有 iPad 上可靠运行？会有任何误报吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:58:45.550

依赖用户代理字符串绝不是一个好主意，因为它可能会被欺骗。但是，您应该考虑阅读“响应式网页设计”

[http://en.wikipedia.org/wiki/Responsive_web_design](http://en.wikipedia.org/wiki/Responsive_web_design)

我建议你使用 jQuery。我有一种感觉，方向将是横向或纵向。我认为操作系统足够聪明，可以根据您拿着设备的方式知道面对浏览器的方式。

考虑一下这个 jQuery，这可能是您想要的...

```
$(window).resize(function() {
    /*  This function should be triggered when the orientation 
        changes since orientation essentially changes the window size. */

    if($(window).width() == ipadLandScapeWidth) {
        //Do this in landscape mode.
    } else {
        //Do this in portait mode.
    }
}); 
```

# c# - 如何以与数据表定义的顺序不同的顺序检索数据列？

> ID：13743238
> 
> 赞同：-1
> 
> 时间：2012-12-06T12:02:34.267
> 
> 标签：c#

我有一个包含 5 行的数据表，并且想要将数据读入网格视图。此时 in 一次读取一列信息。

但我想按这个顺序阅读信息

```
col1 | col2 | col4 | col5 | col3 | col6 |
     |      |      |      |      |      | 
```

数据在数据表而不是 sql 表上

及其在 c# 代码中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:55:20.897

如果我理解正确，您可以设置列的序号

```
dataTable.Columns[1].SetOrdinal(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:05:41.817

`*`从数据库中选择时不要使用。而是按所需顺序显式列出所有列名：

```
SELECT col1,col2,col4,col5,ol3,col6
FROM dbo.TableName
ORDER BY desired_column 
```

您也可以轻松地修改订单`GridView`本身。只是改变它的顺序[`GridViewColumns`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.columns.aspx)。

```
<asp:gridview id="GridView1" runat="server">

    <columns>
      <asp:boundfield datafield="col1" headertext="col1"/>
      <asp:boundfield datafield="col2" headertext="col2"/>
      <asp:boundfield datafield="col3" headertext="col3"/>
      <asp:boundfield datafield="col4" headertext="col4"/>
      <asp:boundfield datafield="col5" headertext="col5"/>
      <asp:boundfield datafield="col6" headertext="col6"/>
    </columns>

</asp:gridview> 
```

# objective-c - 将 NSManagedObjectModel 中的关系添加到以编程方式创建的 NSEntityDescription

> ID：13743242
> 
> 赞同：11
> 
> 时间：2012-12-06T12:02:55.960
> 
> 标签：objective-c, cocoa, core-data, nsmanagedobject, nsentitydescription

当您编写一个使用 CoreData 的静态库时，项目中包含一个普通的 .xdatamodeld 文件，因为您不能只是将其编译版本（.momd）链接到您的二进制文件中，因此最好`NSManagedObjectModel`在代码中创建整个文件，例如这：

```
NSAttributeDescription *dateAttribute = NSAttributeDescription.new;

dateAttribute.name = @"timestamp";
dateAttribute.attributeType = NSDoubleAttributeType;
dateAttribute.optional = NO;
dateAttribute.indexed = YES;

NSAttributeDescription *payloadAttribute = NSAttributeDescription.new;

payloadAttribute.name = @"payload";
payloadAttribute.attributeType = NSBinaryDataAttributeType;
payloadAttribute.optional = NO;
payloadAttribute.indexed = NO;

NSEntityDescription *entry = NSEntityDescription.new;

entry.name = entry.managedObjectClassName = NSStringFromClass(MyCustomEntry.class);
entry.properties = @[dateAttribute, payloadAttribute];

NSManagedObjectModel *mom = NSManagedObjectModel.new;

mom.entities = @[entry]; 
```

一切都很完美......

但！等等，如果我的实体中有多个实体`NSManagedObjectModel`并且它们是相关的（对多、反向等），我将如何在代码中连接它们，就像上面的例子一样，没有那个漂亮的 Xcode 编辑器，你在哪里通过几次鼠标点击建立关系？

**例子**

想象一下，我们有一个 MyCustomElement 类，它与上面代码中的 MyCustomEntry 几乎相同。现在，如果我为实体使用 Xcode 生成，它们的界面如下所示：

```
@interface MyCustomEntry : NSManagedObject

@property (nonatomic, retain) NSNumber *timestamp;
@property (nonatomic, retain) NSData *payload;
@property (nonatomic, retain) MyCustomElement *element;

@end

@interface MyCustomElement : NSManagedObject

@property (nonatomic, retain) NSNumber * timestamp;
@property (nonatomic, retain) NSString * identifier;
@property (nonatomic, retain) NSSet *entries;

@end

@interface MyCustomElement (CoreDataGeneratedAccessors)

- (void)addEntriesObject:(MyCustomEntry *)value;
- (void)removeEntriesObject:(MyCustomEntry *)value;
- (void)addEntries:(NSSet *)values;
- (void)removeEntries:(NSSet *)values;

@end 
```

我需要为他们创建什么 NSRelationshipDescription 以及如何初始化它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T13:10:02.590

关系由`NSRelationshipDescription`对象描述。以下代码为“MyCustomEntry”、“MyCustomElement”创建了两个实体描述以及关系

*   `entries`(MyCustomElement --> MyCustomEntry, to-many),
*   `element`(MyCustomEntry --> MyCustomElement, to-one)，与`entries`.

两个实体都只有一个字符串属性“标识符”（以节省一些代码行）。

**目标-c：**

```
NSEntityDescription *entry = [[NSEntityDescription alloc] init];
[entry setName:@"MyCustomEntry"];
[entry setManagedObjectClassName:@"MyCustomEntry"];

NSAttributeDescription *entryIdAttribute = [[NSAttributeDescription alloc] init];
entryIdAttribute.name = @"identifier";
entryIdAttribute.attributeType = NSStringAttributeType;

NSEntityDescription *element = [[NSEntityDescription alloc] init];
[element setName:@"MyCustomElement"];
[element setManagedObjectClassName:@"MyCustomElement"];

NSAttributeDescription *elementIdAttribute = [[NSAttributeDescription alloc] init];
elementIdAttribute.name = @"identifier";
elementIdAttribute.attributeType = NSStringAttributeType;

// To-many relationship from "Element" to "Entry":
NSRelationshipDescription *entriesRelation = [[NSRelationshipDescription alloc] init];

// To-one relationship from "Entry" to "Element":
NSRelationshipDescription *elementRelation = [[NSRelationshipDescription alloc] init];

[entriesRelation setName:@"entries"];
[entriesRelation setDestinationEntity:entry];
[entriesRelation setMinCount:0];
[entriesRelation setMaxCount:0]; // max = 0 for to-many relationship
[entriesRelation setDeleteRule:NSCascadeDeleteRule];
[entriesRelation setInverseRelationship:elementRelation];

[elementRelation setName:@"element"];
[elementRelation setDestinationEntity:element];
[elementRelation setMinCount:0];
[elementRelation setMaxCount:1]; // max = 1 for to-one relationship
[elementRelation setDeleteRule:NSNullifyDeleteRule];
[elementRelation setInverseRelationship:entriesRelation];

[entry setProperties:@[entryIdAttribute, elementRelation]];
[element setProperties:@[elementIdAttribute, entriesRelation]];

NSManagedObjectModel *mom = [[NSManagedObjectModel alloc] init];
[mom setEntities:@[entry, element]]; 
```

**Swift**（现在为 Swift 3/4 更新）：

```
let entry = NSEntityDescription ()
entry.name = "MyCustomEntry"
entry.managedObjectClassName = "MyCustomEntry"

let entryIdAttribute = NSAttributeDescription()
entryIdAttribute.name = "identifier";
entryIdAttribute.attributeType = .stringAttributeType;

let element = NSEntityDescription()
element.name = "MyCustomElement"
element.managedObjectClassName = "MyCustomElement"

let elementIdAttribute =  NSAttributeDescription()
elementIdAttribute.name = "identifier"
elementIdAttribute.attributeType = .stringAttributeType

// To-many relationship from "Element" to "Entry":
let entriesRelation = NSRelationshipDescription()

// To-one relationship from "Entry" to "Element":
let elementRelation = NSRelationshipDescription ()

entriesRelation.name = "entries"
entriesRelation.destinationEntity = entry
entriesRelation.minCount = 0
entriesRelation.maxCount = 0  // max = 0 for to-many relationship
entriesRelation.deleteRule = .cascadeDeleteRule
entriesRelation.inverseRelationship = elementRelation

elementRelation.name = "element"
elementRelation.destinationEntity = element
elementRelation.minCount = 0
elementRelation.maxCount = 1 // max = 1 for to-one relationship
elementRelation.deleteRule = .nullifyDeleteRule
elementRelation.inverseRelationship = entriesRelation

entry.properties = [entryIdAttribute, elementRelation]
element.properties = [elementIdAttribute, entriesRelation]

let mom = NSManagedObjectModel()
mom.entities = [entry, element] 
```

我已经测试了这段代码，它似乎可以工作，所以我希望它对你有用。

# java - 我可以使用调用类中的泛型类型吗？

> ID：13743246
> 
> 赞同：5
> 
> 时间：2012-12-06T12:03:29.800
> 
> 标签：java, generics

我目前正在复习我的 Java 并阅读泛型。由于它们在我的 Java 课程中没有得到广泛的处理，所以我仍然很难理解它，所以在回答时请记住这一点。

首先，我很确定我想要做的事情是不可能的。但是，我想找出我的想法错在哪里，以及我应该如何实现我想要的。

我正在尝试做的是操作一个对象，该对象从另一个不了解实例化类型的类实现通用接口。因此，我有以下类：

```
public interface CalledInterface<E> {
    public E get() { ... }
    public set(E e) { ... }
}

public class Called implements CalledInterface<String> {
    ...
} 
```

现在我想做的是：

```
public class Caller {
    protected CalledInterface<?> c;

    public Caller (CalledInterface<?> arg) {
        c = arg;
    }

    public void run(){
        // I can do this:
        c.set(c.get());

        // But I'd want to be able to do something like:
        <?> element = c.get();
        c.set(element);
    }
} 
```

如果有的话，我的想法中的根本缺陷是什么？我应该采取什么方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T12:09:03.027

首先，请记住泛型是编译时的东西而不是运行时。

现在在`Caller`你定义的`Called c`. `Called`被定义为实现`CalledInterface<String>`，因此自动`Called`在编译时生成以下方法：

```
String get();
void set(String e); //i assume you wanted to return void 
```

所以本质上这并没有什么意义：

```
<?> element = c.get(); 
```

该类`Caller`甚至不知道`Called`在内部使用泛型，因为它只`Called`处理字符串。

**更新**

根据您的评论，由于您不想直接`Caller`使用`Called`而是使用`CalledInterface`您要做的第一件事就是将类型更改为该类型`c`。在这种情况下，您不应该使用泛型，因为泛型的全部意义在于，同一个类用于具有不同类型的不同场景（再次在编译时确定），强制类型而无需重复代码。

如果我理解正确，您不想限制`Caller`使用 String，那么您要做的就是更改`CalledInterface`为不使用泛型，并将方法更改为：

```
Object get();
void set(Object o); 
```

这就是我们在 Java 1.4 中的泛型之前的做法。您显然冒着没有类型安全的风险，因此请仔细考虑您想要的内容是否真正具有设计意义，因为它可能没有，因为无论如何您都必须执行 instanceof 来检查类型以`Object`以有用的方式使用（即访问其方法）。

另一方面，如果您只是将`c`成员（以及 的构造函数参数`Caller`）更改为：

```
CalledInterface<String> c; 
```

您`Caller`将与`CalledInterface`而不是实现进行交互，同时仍然是类型安全的。所以你仍然可以传递一个实例`Called`并将其设置为`c`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:45:42.953

编辑后：

```
 // I can do this:
    c.set(c.get()); 
```

不，你不能。它不会与`c`being一起编译`CalledInterface<?>`。（你试过了吗？）

为此，您可以使用“捕获助手”：

```
private static <T> void helper(CalledInterface<T> c) {
    c.set(c.get());
}
public void run(){
    helper(c);
} 
```

这也解决了你的第二个问题：

```
private static <T> void helper(CalledInterface<T> c) {
    T element = c.get();
    c.set(element);
}
public void run(){
    helper(c);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:16:54.707

您的代码中有一些小错误：

```
protected Called c;

public Caller (CalledInterface arg) {
    c = arg;
} 
```

此处不允许指定`arg`，因为类型`CalledInterface`不是的子类型`Called`（反之亦然）此外，您应该在使用时提供类型信息`CalledInterface`（允许将其省略，但仅用于遗留目的）。

现在到你想知道的部分。对于 type `Called`，编译器知道`get()`返回 a `String`，如果您对此不感兴趣，当然可以始终`Object`使用`element`. 编译器也知道`set()`需要一个`String`作为参数，所以它要求你给一个。在泛型中使用本质上与在没有泛型的情况下使用相同`Object`（即使在您使用它的位置上不允许使用它，因为它没有意义）。这意味着您将告诉编译器忘记第一行（调用`get()`）的类型并在下面的行中忘记它。

# oracle - 更新列

> ID：13743247
> 
> 赞同：0
> 
> 时间：2012-12-06T12:03:43.550
> 
> 标签：oracle, oracle10g

我创建了一个具有以下属性的表：

```
 TABLE "VENDORACCOUNT" 

 (  "VEN_ACCOUNTID" 
    "VEN_REGNO" 
    "VEN_TXDATE"
    "VEN_INVOICE_REFNO"
    "TOTALAMOUNT"
    "PAID_TOVEN"
    "BALANCE"
) 
```

我根据其值从另一个表中获取`TOTALAMOUNT`列值。这里的场景是从列值中减去列值。但是下次我选择该值时，它不会显示更新的值。它向我显示了旧值，如下面的报告所示。 `POPUP LOV``VEN_INVOICE_REFNO``TOTALAMOUNT``PAID_TOVEN``TOTALAMOUNT`

报告查询：

```
select "VEN_ACCOUNTID",
      "VEN_REGNO" ,
      "VEN_TXDATE" ,
      "VEN_INVOICE_REFNO" as ,
      "TOTALAMOUNT" as ,
      "PAID_TOVEN" as ,
       TOTALAMOUNT-PAID_TOVEN as "Balance"
 from    "VENDORACCOUNT" 
```

![报告截图](../Images/54b074fb7108d210693dce520257337d.png)

在上面的报告中，我希望每当我做第二个条目时，它应该向我显示减去或更新的值，即分别`1800`代替`2800`和`4550`代替`9550`。所以下次我可以从`1800`和中减去金额`4550`。

* * *

我创建了这个触发器

```
create or replace trigger "VENDORACCOUNT_T2"
BEFORE
insert or update or delete on "VENDORACCOUNT"
for each row
begin
DECLARE new_balance INT; 
DECLARE new_total INT;
DECLARE new_paid INT;

   SELECT balance INTO old_balance,
   total INTO old_total,
       PAID_TOVEN INTO new_paid
   FROM vendoraccount
   WHERE ven_regno = new.ven_regno
   AND VEN_INVOICE_REFNO = new.VEN_INVOICE_REFNO;

   UPDATE vendoraccount SET TOTALAMOUNT = old_total + old_balance - new_paid,
   balance = TOTALAMOUNT - new_paid
   WHERE VEN_REGNO= new.VEN_REGNO
   AND VEN_INVOICE_REFNO = new.VEN_INVOICE_REFNO;

end; 
```

并收到此错误：

> 错误：PLS-00103：'在预期以下情况之一时遇到符号“DECLARE”：开始函数杂注过程子类型类型当前 curs'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:44:18.353

我认为你不需要触发器。您可以根据以下查询创建视图，然后根据`VIEW`. 查询看起来像 -

```
select accid,regno,inv_refno,LAG(bal,1,totalamount) OVER (PARTITION BY regno ORDER BY accid) "TOTALAMOUNT", paid_toven, bal
from (with temp_data as
       (select 2 accid,3 regno, 16 inv_refno, 2800 totalamount, 1000 paid_toven from dual
         union
        select 3 accid,3 regno, 16 inv_refno, 2800 totalamount, 2000 paid_toven from dual
         union
        select 4 accid,8 regno, 22 inv_refno, 9550 totalamount, 5000 paid_toven from dual
         union
        select 5 accid,8 regno, 22 inv_refno, 9550 totalamount, 5000 paid_toven from dual
         union
        select 6 accid,8 regno, 22 inv_refno, 9550 totalamount, 8000 paid_toven from dual)
      select accid,regno,inv_refno,totalamount,paid_toven,totalamount-paid_toven bal       
      from temp_data); 
```

输出是 -

```
ACCID REGNO INV_REFNO TOTALAMOUNT PAID_TOVEN BAL
----- ----- --------- ----------- ---------- ---
    2     3        16        2800       1000 1800 
    3     3        16        1800       2000 800 
    4     8        22        9550       5000 4550 
    5     8        22        4550       5000 4550 
    6     8        22        4550       8000 1550 
```

因此，根据您的表格，查询将是-

```
select accid,regno,inv_refno,LAG(bal,1,totalamount) OVER (PARTITION BY regno ORDER BY accid) "TOTALAMOUNT", paid_toven, bal
    from (select accid,regno,inv_refno,totalamount,paid_toven,totalamount-paid_toven bal       
          from VENDORACCOUNT); 
```

该查询几乎可以满足您的需求，但是您的示例数据看起来不正确。这实际上是运行总计的一个示例。

# ios - UITableview - didSelectRowAtIndexPath 显示不同的数据问题

> ID：13743248
> 
> 赞同：0
> 
> 时间：2012-12-06T12:03:47.943
> 
> 标签：ios, uitableview, didselectrowatindexpath

我正在将 RSS 解析为 UITableview，数据看起来应该是这样，但是当我选择 UITableview 中的一个字段时，它会打开不同的数据，然后是它应该打开的数据。此外，当我滚动表格视图时，我选择的同一字段再次给出不同的数据。

那么请问我在哪里犯了我的错误？

RSS 链接：[http ://www.luaikalkatawi.me/picksound](http://www.luaikalkatawi.me/picksound)

从现在开始感谢。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *trimed = [[containerObject.track init] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSLog(@"The link is %@", trimed);
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString* cellIdentifier = @"ImgCell";

ImgCell *cell = (ImgCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:cellIdentifier owner:nil options:nil];
    cell = (ImgCell*)[nib objectAtIndex:0];
}

containerObject = [objectCollection objectAtIndex:indexPath.row];//use the common object again for holding the corresponding array object

///// Image reloading from HJCacheClasses
[cell.img clear];
NSString *str1 = containerObject.image; //we use image property of rss object to set the image
NSString *trimmedString = [str1 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSURL *url = [NSURL URLWithString:trimmedString];
cell.img.url = url; //set the url to img view
[self.imgMan manage:cell.img];

cell.mainText.text = containerObject.title; //title member variable for setting title
cell.detailText.text = containerObject.description;//desc variable foe
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:28:48.760

我不知道为什么这会让你感到困惑，但正确的 containerObject 应该在 didSelectRowAtIndexPath 中访问。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    containerObject = [objectCollection objectAtIndex:indexPath.row];
    NSString *trimed = [[containerObject.track init] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSLog(@"The link is %@", trimed);
} 
```

# xml - 的意思 -

> ID：13743250
> 
> 赞同：118
> 
> 时间：2012-12-06T12:03:57.227
> 
> 标签：xml, character-encoding, xml-declaration, xml-encoding

我是 XML 新手，我正在尝试了解基础知识。我在“Learning XML”中阅读了下面的行，但对我来说仍然不清楚。有人可以指出我清楚地解释这些基础知识的书或网站吗？

从*学习 XML*：

> XML 声明描述了文档的一些最通用的属性，告诉 XML 处理器它需要一个 XML 解析器来解释这个文档。

这是什么意思？

我理解这`xml version`部分 - 文档和文档用户都应该在同一版本的 XML 中“交谈”。但是那`encoding`部分呢？为什么这是必要的？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2014-12-10T10:18:22.803

*要了解“编码”属性，您必须了解bytes*和*characters*之间的区别。

将字节视为 0 到 255 之间的数字，而字符则是“a”、“1”和“Ä”之类的东西。所有可用字符的集合称为*字符集*。

每个字符都有一个或多个字节序列，用于表示它；但是，字节的确切数量和值取决于所使用的*编码*，并且有许多不同的编码。

大多数编码基于旧的字符集和称为 ASCII 的编码，每个字符一个字节（实际上只有 7 位），包含 128 个字符，包括美国英语中使用的许多常见字符。

例如，这里有 ASCII 字符集中的 6 个字符，由值 60 到 65 表示。

```
Extract of ASCII Table 60-65
╔══════╦══════════════╗
║ Byte ║  Character   ║
╠══════╬══════════════║
║  60  ║      <       ║
║  61  ║      =       ║
║  62  ║      >       ║
║  63  ║      ?       ║
║  64  ║      @       ║
║  65  ║      A       ║
╚══════╩══════════════╝ 
```

在完整的 ASCII 集中，使用的最低值是 0，最高的是 127（这两个都是隐藏的控制字符）。

但是，一旦您开始需要比基本 ASCII 提供的字符更多的字符（例如，带有重音符号的字母、货币符号、图形符号等），ASCII 就不再合适，您需要更广泛的字符。您需要更多字符（不同的字符集）并且需要不同的编码，因为 128 个字符不足以容纳所有字符。某些编码提供一个字节（256 个字符）或最多六个字节。

随着时间的推移，已经创建了许多编码。在 Windows 世界中，有 CP1252 或 ISO-8859-1，而 Linux 用户倾向于使用 UTF-8。Java 本机使用 UTF-16 [见评论]。

一种编码中字符的一个字节值序列可能代表另一种编码中完全不同的字符，甚至可能无效。

例如，在*ISO 8859-1*中，**â**由一个字节 value 表示`226`，而在*UTF-8*中它是两个字节：`195, 162`. 但是，在*ISO 8859-1*中，`195, 162`将是两个字符**Ã、¢**。

将 XML 视为不是字符序列，而是字节序列。

想象一下接收 XML 的系统会看到字节`195, 162`。它怎么知道这些是什么字符？

为了让系统将这些字节解释为实际字符（并因此显示它们或将它们转换为另一种编码），它需要知道 XML 中使用的编码。

由于大多数常见的编码都与 ASCII 兼容，就基本的字母字符和符号而言，在这些情况下，声明本身可以不使用仅使用 ASCII 字符来说明编码是什么。在其他情况下，解析器必须尝试找出声明的编码。因为它知道声明以它开头，`<?xml`所以这样做要容易得多。

最后，该`version`属性指定 XML 版本，目前有两个（参见[Wikipedia XML 版本](https://en.wikipedia.org/wiki/XML#Versions)。版本之间存在细微差别，因此 XML 解析器需要知道它正在处理什么。在大多数情况下（对于英语无论如何扬声器），1.0版就足够了。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-06T13:08:11.557

并非所有 XML 文档都需要 XML 声明；但是，强烈建议 XHTML 文档作者在其所有文档中使用 XML 声明。当文档的字符编码不是默认的 UTF-8 或 UTF-16 并且没有由更高级别的协议确定编码时，需要这样的声明。这是一个 XHTML 文档的示例。在此示例中，包含 XML 声明。

```
<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE html 
 PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Virtual Library</title>
  </head>
  <body>
    <p>Moved to <a href="http://example.org/">example.org</a>.</p>
 </body>
</html> 
```

请参阅[XML 的 W3 标准](http://www.w3.org/TR/xhtml1/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-06T12:06:21.257

这是 XML*可选*序言。

*   `version="1.0"`表示这是此文件符合的 XML 标准
*   `encoding="utf-8"`表示文件使用 UTF-8 Unicode 编码进行编码

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-06T12:06:33.310

> 编码声明标识了使用哪种编码来表示文档中的字符。

更多关于**XML 声明**的信息：http : [//msdn.microsoft.com/en-us/library/ms256048.aspx](http://msdn.microsoft.com/en-us/library/ms256048.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-20T06:15:31.250

> 有人可以指出我清楚地解释这些基础知识的书或网站吗？

您可以通过示例查看此[XML 教程](https://www.xmlfiles.com/)。

> 但是编码部分呢？为什么这是必要的？

W3C 提供了关于编码的[解释：](http://www.w3.org/International/O-charset)

> “XML 和 HTML 4.0 的文档字符集是 Unicode（又名 ISO 10646）。这意味着 HTML 浏览器和 XML 处理器的行为应该就像它们在内部使用 Unicode。但这并不意味着文档必须以 Unicode 传输。只要客户端和服务器在编码上达成一致，他们就可以使用任何可以转换为 Unicode 的编码……”

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-27T17:06:20.667

文档映射中的 XML 声明包含以下内容：

> ```
> The version number, ?xml version="1.0"?. 
> ```

这是强制性的。尽管对于 XML 的未来版本，该数字可能会发生变化，但 1.0 是当前版本。

编码声明，

> ```
> encoding="UTF-8"? 
> ```

这是可选的。如果使用，编码声明必须紧跟在 XML 声明中的版本信息之后，并且必须包含一个表示现有字符编码的值。

# sql - SQL - 如果记录为 NULL，则 CASE 语句，因为表中不存在记录

> ID：13743254
> 
> 赞同：2
> 
> 时间：2012-12-06T12:04:15.493
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个问题，我认为其中一个问题会在底部解决，但我仍然有问题。问题是我的案例陈述是错误的（但运行时没有错误）但不确定我还缺少什么。

我的目标是，如果 DueDate 为 NULL，因为 Table2 中没有记录，因此我想要的只是将此值显示为“否”而不是“NULL”。我在代码中添加了“IsNull”，但没有解决我的问题。我在这些论坛上看到过 ISNULL() 和 COALEASE() 但无法得到我想要的结果

下面是我的工作代码：

```
SELECT 
    Client, 
    COUNT(*) AS ReadyRecords, 
    (SELECT COUNT(*) FROM Table1 EPR WHERE actioned=8 AND EPR.Client=Table1.Client) AS Outstanding, 
    (SELECT TOP 1 
        CASE 
            WHEN DueDate < GETDATE() THEN 'Yes' 
            WHEN DueDate IS NULL THEN 'No' 
        ELSE 'No' 
        END AS DueDate
    FROM Table2 GL WHERE GL.Client=Table1.Client ORDER BY DueDate) AS DueDate

    FROM Table1 WHERE Actioned=2 GROUP BY Client 
```

编辑：

当前结果集：

```
Client   | ReadyRecords  |  Outstanding  |  DueDate

Test     |     42        |      54       |   NULL
Stack    |     150       |      10       |   NULL
JBloggs  |     32        |      28       |   Yes
DBloggs  |     2         |      17       |   Yes
Overflow |     1         |      1        |   No 
```

期望的结果集：

```
Client   | ReadyRecords  |  Outstanding  |  DueDate

Test     |     42        |      54       |   No
Stack    |     150       |      10       |   No
JBloggs  |     32        |      28       |   Yes
DBloggs  |     2         |      17       |   Yes
Overflow |     1         |      1        |   No 
```

表格1：

```
id      |  Client   |   Actioned  | etc...

5245    |  Test     |      8      | etc...
....so on 
```

表 2：

```
id   |   Client   |   DueDate

1    |  JBloggs   | 2012-12-01 00:00:00.000
2    |  DBloggs   | 2012-12-05 00:00:00.000
3    |  Overflow  | 2012-12-12 00:00:00.000 
```

需要帮助请叫我。

类似/相关问题：

*   [在 sql 选择语句中使用大小写](https://stackoverflow.com/questions/3759167/using-case-in-a-sql-select-statement)
*   [T-SQL CASE 子句：如何指定 WHEN NULL](https://stackoverflow.com/questions/3237646/t-sql-case-clause-how-to-specify-when-null)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:32:58.533

您需要将`ISNULL()`or`COALESCE()`函数应用于整个内联子查询，如下所示：

```
SELECT 
    Client, 
    COUNT(*) AS ReadyRecords, 
    (SELECT COUNT(*) FROM Table1 EPR 
     WHERE actioned=8 AND EPR.Client=Table1.Client
    ) AS Outstanding, 

    COALESCE(
        (SELECT TOP 1 
            CASE 
                WHEN DueDate < GETDATE() THEN 'Yes' 
            END AS DueDate
        FROM Table2 GL WHERE GL.Client=Table1.Client ORDER BY DueDate
        ), 'No' 
    ) AS DueDate

FROM Table1  WHERE Actioned=2  GROUP BY Client ; 
```

或将`CASE`表达式移到那里：

```
SELECT 
    Client, 
    COUNT(*) AS ReadyRecords, 
    (SELECT COUNT(*) FROM Table1 EPR 
     WHERE actioned=8 AND EPR.Client=Table1.Client
    ) AS Outstanding, 

    CASE WHEN 
           (SELECT TOP 1 
              DueDate
            FROM Table2 GL WHERE GL.Client=Table1.Client ORDER BY DueDate
           ) < GETDATE() 
        THEN 'Yes'
        ELSE 'No'
    END AS DueDate

FROM Table1  WHERE Actioned=2  GROUP BY Client ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:48:53.153

首先，您需要知道，表中的日期时间字段可能会显示为 NULL，但是在查询中使用它时，sql 会将其转换为该数据类型允许的最小日期，即 '1900-01-01'因此，您可能会获得比实际更多的“是”值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:27:16.243

这项工作是否可行 - 怀疑其中可能存在一些故障，但我目前没有管理 sudio：

```
SELECT 
        Client, 
        COUNT(*) AS ReadyRecords, 
        (SELECT COUNT(*) FROM Table1 EPR WHERE actioned=8 AND EPR.Client=Table1.Client) AS Outstanding, 
        [DueDate] = CASE 
                                WHEN [MXDATE] < GETDATE() THEN 'Yes' 
                                WHEN [MXDATE] IS NULL THEN 'No' 
                            ELSE 'No' 
                            END 
FROM 
    Table1 T1
    LEFT OUTER JOIN
        (
        SELECT 
            Client,
            [MXDATE] = MAX(DueDate)
        FROM Table2
            GROUP BY Client
        ) GL
        ON
         GL.Client=T1.Client 
WHERE Actioned=2 
GROUP BY Client 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:23:15.927

我认为问题是如果`DueDate`NULL 你的`DueDate < GetDate()`结果为 NULL 并且你得到`No`的结果是 DueDate 在这种情况下永远不会小于 GetDate。像这样更改顺序

```
CASE 
    WHEN DueDate IS NULL THEN 'No'
    WHEN DueDate < GETDATE() THEN 'Yes'        
ELSE 'No' 
END AS DueDate 
```

通过这样做，在其他条件之前首先检查 NULL 值。或者，您可以将此行更改为

```
WHEN ISNULL(DueDate,'Some Valid Default Value Here') < GETDATE() THEN 'Yes' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T12:24:02.463

```
You can use this...
SELECT 
Client, 
COUNT(*) AS ReadyRecords, 
(SELECT COUNT(*) FROM Table1 EPR WHERE actioned=8 AND EPR.Client=Table1.Client) AS Outstanding, 
(SELECT TOP 1 
    CASE 
        WHEN DueDate < GETDATE() THEN 'Yes' 
        ELSE ISNULL(Cast(DueDate AS VARCHAR),'NO' )        
    END AS DueDate
FROM Table2 GL WHERE GL.Client=Table1.Client ORDER BY DueDate) AS DueDate

FROM Table1 WHERE Actioned=2 GROUP BY Client 
```

# knockout.js - 为什么 Knockout.js 不绑定

> ID：13743255
> 
> 赞同：1
> 
> 时间：2012-12-06T12:04:21.270
> 
> 标签：knockout.js

我正在尝试学习 knockOut.js，但无法真正起步。当我调用 ko.applyBindings 时，我的模型始终未定义。

我已经尝试过[这里](https://stackoverflow.com/questions/11672732/knockout-js-noob-looking-for-some-understanding-on-tutorial-1)已经回答的解决方案。

我也在 jsFiddle 中尝试过：[这里](http://jsfiddle.net/4748N/)

我有以下 htm 表单：

```
<head>
   <title>Mashup</title>
   <script src="Scripts/jquery-1.8.2.js" type="text/javascript"></script>
   <script src="Scripts/knockout-2.2.0.js" type="text/javascript"></script> 
</head>

//html body    

 <script type="text/javascript">

   $(window).load(function () {

       function AppViewModel() {
           this.firstName = ko.observable("Bert");
           this.lastName = ko.observable("Bertington");
       }

       var model = ko.applyBindings(new AppViewModel());
       alert(model);
   }); 
```

我也尝试过使用准备好的文档：

```
 //I've also tried document ready but still not working.

   $(document).ready(function () {
       function AppViewModel() {
           this.firstName = ko.observable("Bert");
           this.lastName = ko.observable("Bertington");
       }

    var model = ko.applyBindings(new AppViewModel());
    alert(model);
}); 
```

我知道 ir 将是非常愚蠢的事情。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:09:02.057

`ko.applyBindings`不返回模型。您将模型传递给`applyBinding`它将绑定到 html。将您的代码修改为：

```
 function AppViewModel() {
       this.firstName = ko.observable("Bert");
       this.lastName = ko.observable("Bertington");
   }

   var model = new AppViewModel();
   ko.applyBindings(model);
   alert(model.firstName()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:09:16.023

`ko.applyBindings()`没有返回您所期望的。创建模型，然后对其应用绑定。这是一个更新的[小提琴](http://jsfiddle.net/4748N/7/)。

代码：

```
function AppViewModel() {
    this.firstName = "Davy";
    this.lastName = "Cassidy";
}

var model = new AppViewModel();
ko.applyBindings(model);

alert(model.firstName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:09:49.753

你确实犯了两个错误：

1.  ko.applyBindings() 不返回模型。

    ```
    // Create the view model
    var model = new AppViewModel();

    // Apply bindings using this model
    ko.applyBindings(model); 
    ```

2.  在您的小提琴中，您尝试在`<label>`元素上使用“值”绑定。此类元素没有“值”属性，因为您无法输入任何内容。您需要在此处使用“文本”绑定：

    ```
    <label id="lblFilename" data-bind="text: firstName"></label> 
    ```

[http://jsfiddle.net/4748N/8/](http://jsfiddle.net/4748N/8/)

# java - 查找和打印高数数组方法Java

> ID：13743263
> 
> 赞同：0
> 
> 时间：2012-12-06T12:04:57.133
> 
> 标签：java, arrays, methods, numbers, find

我正在尝试做的是搜索“gradePsd”数组找到最高成绩，如果有两个成绩相同，则打印学生的姓名以进行控制台。

我遇到的问题是这种方法正在获取数组的第一个索引值并打印它，因为它是第一遍的高值，如果第二个值大于第一个值，那么它也会打印等等.

所以我的问题是我怎样才能让它打印出高分的学生。

```
public static void hiMarkMethod(String[] NamePsd, int[] gradePsd)
{
    String nameRtn = "";
    int num = gradePsd[0];

    System.out.println ("\n\nThe Student(s) with Hightest Mark(s) are:");

    for (int  i = 0; i < gradePsd.length;  i++)
    {
        if (gradePsd[i] >= num)
        {
            num = gradePsd[i];
            nameRtn = NamePsd[i]; 
        }

        System.out.print(nameRtn + ", ");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:13:25.617

`num`用 -1初始化并`System.out`退出 for 循环。但是您只能使用您的代码确定一名学生。如果要存储多个名称，则需要`nameRtn`成为 a 。`Collection`

像这样的东西：

```
public static void hiMarkMethod(String[] NamePsd, int[] gradePsd) {
    Collection<String> namesRtn = new ArrayList<String>();
    int num = -1;

    for (int  i = 0; i < gradePsd.length;  i++) {
        if (gradePsd[i] > num) {
            num = gradePsd[i];
            namesRtn.clear();  // clear name list as we have a new highest grade
            namesRtn.add(NamePsd[i]);  // store name in list
        } else if (gradePsd[i] == num) {
            namesRtn.add(NamePsd[i]);  // if a second student has the same grade store it to the list
        }

    }
    System.out.println ("\n\nThe Student(s) with Hightest Mark(s) are: " + namesRtn);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:14:19.000

首先找到最大的数字，然后打印具有该数字的学生

```
public static void hiMarkMethod(String[] NamePsd, int[] gradePsd)
    {

    String nameRtn = "";
    int num = gradePsd[0];

     System.out.println ("\n\nThe Student(s) with Hightest Mark(s) are:");
    //find the highest number
    for (int  i = 0; i < gradePsd.length;  i++){
    if (gradePsd[i] >= num){
        num = gradePsd[i];
    }
    //print students with that number
    for (int  j = 0; j < NamePsd.length;  j++){
        if (gradePsd[j] == num)
        {
            nameRtn = NamePsd[j]; 
            System.out.print(nameRtn + ", "); 
        }
    } 
```

可能的 1000 个解决方案之一。

# php - 一般：调试php $_POST

> ID：13743264
> 
> 赞同：2
> 
> 时间：2012-12-06T12:05:00.337
> 
> 标签：php

我想知道调试`$_POST`PHP 函数的最佳方法是什么，我似乎正在丢失数据并且 URL 看起来像`$_GET`，我不想发布代码，因为我想学习如何正确调试 PHP 代码（如果有）关于如何做到这一点的一些秘诀/一些一般准则，我将不胜感激。

简而言之：在做了一些阅读（哦，大约 8 个小时试图弄清楚这一点）之后，我真的迷路了，做什么/不做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:06:46.213

```
var_dump($_POST); 
```

将为您提供所有 POST 变量的列表。

```
<?php
echo '<pre>';
print_r($_POST);
echo '</pre>';
?> 
```

也将工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:07:33.557

请尝试以下代码。

```
print_r($_POST); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:07:35.803

用于`print_r($_POST);`打印所有发布数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:09:50.133

检查里面有什么`$_REQUEST`：

```
var_dump($_REQUEST); 
```

这将为您提供一个表示您的 http 请求的数组，以及您使用的方法 [主要是 GET/POST]，以防您使用了错误的方法。

# c# - 可以使用名为数字的对象反序列化此 JSON

> ID：13743273
> 
> 赞同：1
> 
> 时间：2012-12-06T12:05:14.060
> 
> 标签：c#, json, json.net

是否可以使用 JSON.NET 反序列化此 json？

```
"players": {
        "0": {              
            "success": 1,               
            "name": "xsusususdd"
        },
        "1": {              
            "success": 1,               
            "name": "bleeps"
        },
       ..."n": {
               "success": 1,                
               "name": "bloops"
               }
       } 
```

我正在使用的第 3 方 Web 服务不返回数组，而是返回由任意数量的嵌套对象组成的对象。

我从以下方面开始：

```
 public class Players
    {
      public Player 0 {get;set;} //cant name the Player 0
      public Player 1 {get;set;} //cant name the Player 1
      public List<Players> players {get;set;} //doesn't work because it isn't being returned as an array
    }

    public class Player
    {          
        public string success { get; set; }         
        public string name { get; set; }        
    }

  var URL = new WebClient().DownloadString("http://webservice");
  Players result = JsonConvert.DeserializeObject<Players>(URL); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:16:56.000

您应该能够反序列化为`Dictionary<string, Player>`（或可能`<int, Player>`）。

一旦你有了它，你就可以`Players`从你的字典中创建一个类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T12:27:03.290

你可以改用这个。

```
"players": [
        {
            "id": 0,
            "success": 1,               
            "name": "xsusususdd"
        },
        {
            "id": 1,              
            "success": 1,               
            "name": "bleeps"
        },
        {
            "id": n,
            "success": x,
            "name": y
        }
    ] 
```

这将创建一个包含人员对象的列表，您可以将其转换为字典

`Dictionary<string, Player> dictionary = players.ToDictionary(v => v.id, v => v);`

或者只是一个`List<Person>`或你喜欢的。

如果您需要从 javascript 访问它们，只需使用 eg `players[1].name`。

# gwt - 如何在 JBoss AS 7 中设置 GWT 全局模块？

> ID：13743277
> 
> 赞同：1
> 
> 时间：2012-12-06T12:05:21.740
> 
> 标签：gwt, jboss, module, ejb-3.0

伙计们，

我正在使用 JBoss AS 7 发布我的项目，并且所有项目都使用 ejb 和 gwt，因此我不想在每个项目中部署它，而是为它创建一个模块。我创建了文件夹 JBOSS_HOME\modules\com\google\gwt\main 然后我不知道我需要做什么。我在本[指南](http://www.javacodegeeks.com/2012/11/running-drools-5-4-0-final-as-a-jboss-as-7-module.html)中看到包含`module.xml`. 如何在 JBoss 中设置 GWT 全局模块？提前致谢

# javascript - 我们是否获得了速度优势： new String("a string") for multiple tests on that string in javaScript

> ID：13743280
> 
> 赞同：0
> 
> 时间：2012-12-06T12:05:31.613
> 
> 标签：javascript, string

我正在制作一个经常搜索字符串的小型搜索引擎。`var thatString = "a string"`由于当我们在它们上使用类似方法时，javaScript 会将字符串原语（声明为 like ）转换为对象`indexOf`，然后再转换回原语，我认为将所有原语`var aString = new String("aString")`字符串转换为要分析的字符串数组中的对象可能会带来速度优势。但这真的值得吗？
搜索引擎原型可以在[http://bottinbio.com](http://bottinbio.com)看到，它的代码（开源）在[http://ogfor.com/bottinbio/code.js](http://ogfor.com/bottinbio/code.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:55:47.210

即使我们不向使用 new String 创建的字符串 Object 添加属性，在 ubuntu 中的 firefox 和 chrome 中，原语的速度也要快得多（43-45%）。感谢 DhruvPathak 提供到 jsperf.com 的链接

# objective-c - 点击时 UICollectionViewCell 不显示 DetailView

> ID：13743282
> 
> 赞同：0
> 
> 时间：2012-12-06T12:05:34.993
> 
> 标签：objective-c, ios, uicollectionview

我在单元格中实现了一个带有 ImageViews 的 CollectionView。我希望在点击单元格时出现 DetailViewController。我在 ImageView 和 Cell 的 Interface Builder 中设置了 User Interaction Enabled。我做错了什么？我在 ViewController 中有这段代码：

```
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section;
{
    return 9;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath;
{

    PhotosCell *cell = [cv dequeueReusableCellWithReuseIdentifier:kCellID forIndexPath:indexPath];

    // load the image for this cell
    NSString *imageToLoad = [NSString stringWithFormat:@"%d.jpg", indexPath.row +1];
    // NSLog(imageToLoad);
    cell.imageView.image = [UIImage imageNamed:imageToLoad];

    return cell;
}

// the user tapped a collection item, load and set the image on the detail view controller
//
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   // NSLog(@"inside!");
    if ([[segue identifier] isEqualToString:@"showDetail"])
    {
        NSIndexPath *selectedIndexPath = [[self.collectionView indexPathsForSelectedItems] objectAtIndex:0];

        // load the image, to prevent it from being cached we use 'initWithContentsOfFile'
        NSString *imageNameToLoad = [NSString stringWithFormat:@"%d_full", selectedIndexPath.row+1];
        NSString *pathToImage = [[NSBundle mainBundle] pathForResource:imageNameToLoad ofType:@".jpg"];
        UIImage *image = [[UIImage alloc] initWithContentsOfFile:pathToImage];

        PhotoDetailViewController *detailViewController = [segue destinationViewController];
        detailViewController.myImage = image;
    }
} 
```

但是当点击单元格时，不会调用“prepareForSegue”方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:20:26.880

实现collectionview委托方法

```
collectionView:didSelectItemAtIndexPath: 
```

有电话

```
[self performSegueWithIdentifier:@"showDetail" sender:self]; 
```

# sql - Oracle 数据透视错误

> ID：13743284
> 
> 赞同：0
> 
> 时间：2012-12-06T12:05:42.567
> 
> 标签：sql, oracle, oracle11g, pivot

嗨，我在 oracle 中有以下查询来获取数据。它在 sql server 中运行良好，但是，当我尝试在 oracle 中执行它时，它给出了错误。

```
 SELECT PRODUCT, FRED, KATE FROM (
    SELECT CUST, PRODUCT, QTY
    FROM Product
    )
    PIVOT
    (
    SUM(QTY) FOR CUST IN (FRED, KATE)
    )
    ORDER BY Product 
```

错误：

![在此处输入图像描述](../Images/83795b28bf4992f80d70117b444a839b.png)

表o/p如下

![在此处输入图像描述](../Images/e4530e9ee5ca5b6ef02b84d0c148e6b5.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:07:52.910

尝试`SUM(QTY) FOR CUST IN ('FRED' as fred , 'KATE' as kate)`

# javascript - 如何在 JavaScript localStorage 中存储（字典）对象？

> ID：13743292
> 
> 赞同：13
> 
> 时间：2012-12-06T12:06:15.177
> 
> 标签：javascript, json, object, local-storage

我有一本非常简单的字典。

```
var meta = {'foo':'1','moo':'2'} 
```

我想将其存储在本地存储中并检索它。

```
 window.localStorage.setItem("meta", meta);
 var meta1 = window.localStorage.getItem("meta");
 alert(meta1['foo']); 
```

以上不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-06T12:08:52.520

`localStorage`将其输入转换为字符串，因此您必须将对象转换为 JSON 字符串，然后返回：

```
window.localStorage.setItem("meta", JSON.stringify(meta));
var meta1 = JSON.parse(window.localStorage.getItem("meta"));
alert(meta1['foo']); 
```

* * *

您的代码不起作用的原因是因为将对象设置为`localStorage`将其值设置为`"[object Object]"`（`object.toString()`返回`"[object Object]"`）：

```
window.localStorage.setItem("objectInput", {some:"object"});
var objectOutput = window.localStorage.getItem("objectInput");
alert(objectOutput);
// This returns "[object Object]" 
```

# c# - 请求 WebClient.DownloadingString 更改 URL

> ID：13743293
> 
> 赞同：0
> 
> 时间：2012-12-06T12:06:17.183
> 
> 标签：c#, .net

如果我将 URL 放在浏览器中，我的服务器会正​​确响应（一个 XML）。虽然，如果相同的 URL 通过 WebClient.DownloadingString() 方法，URL 中的某些内容会发生变化，并且我的服务器会正​​确响应，但会显示拒绝访问消息（XML 也是如此），就好像发生了某些变化一样。

“错误信息”

```
<?xml version="1.0" encoding="ISO-8859-1"?><said:service xmlns:said="http:xxx"><said:codigo_erro>8</said:codigo_erro><said:mensagem_erro>Unable</said:mensagem_erro></said:service> 
```

根据请求使用的 URL 如下所示：

```
http://...<parameter1>S<%2Fparameter1>%0D%0A++<parameter2>S<%2Fparameter2>%0D%0A++<parameter3>S<%2Fparameter3>%0D%0A<%2Fqueryservice>%0D%0A%09%09 
```

我已经尝试将 de Encode 更改为 UT8、ISO 等。它们都没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:12:51.413

您必须确保发送服务器期望的所有必要数据、cookie 和请求标头。

我建议您安装 Fiddler Web Debugger 并监控来自 Web 浏览器的成功请求，然后尝试在您的应用程序中重新创建此类请求。

也许服务器正在将您重定向到某个错误页面，因为`WebClient`它没有处理 cookie。您可以创建自己的版本`WebClient`并添加 cookie 支持。创建一个继承`WebClient`并覆盖`GetWebRequest`方法的类，您必须在其中添加`CookieContainer`. 以下是处理 cookie 的简单实现`WebClient`：

```
public class MyWebClient : WebClient
{
    public CookieContainer CookieContainer { get; private set; }

    public MyWebClient()
    {
        this.CookieContainer = new CookieContainer();
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = this.CookieContainer;
            (request as HttpWebRequest).AllowAutoRedirect = true;
        }

        return request;
    }
} 
```

# php - Onblur 或 onchange 检查，在注册表单中使用 php 函数

> ID：13743295
> 
> 赞同：1
> 
> 时间：2012-12-06T12:06:20.173
> 
> 标签：php, javascript, ajax

我希望能够在文本更改后检查文本框中的文本，并报告问题所在。这是一个注册表。

这是 register.php 的一部分，其中

```
<form action"" method="post">
<ul class="ul-reg">
<li>
<p>Username: </p><input name="username-field" type="text" onblur="someFunction()" /><span id="UsernamehelpText">      </span>
</li>
</ul>
</form> 
```

然后我将有一个 registerfunctions.php，我将在其中存储所有用于检查长度、字符、可能是正则表达式等的函数。我调用什么函数并不那么重要。我只是不知道怎么称呼他们。

形成我所看到的跨度是你发布错误的地方，但是如果我有任何其他选项我打开它，我想要的只是能够将错误文本发布在与文本框相同的行中

我已经检查了 JavaScript 和 AJAX，但我对此很陌生，并不真正了解它是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:31:32.847

在评论中讨论后，我明白你想要什么。

首先，一个解释。有两个地方进行验证：在您的前端（您的网页）和您的后端（在保存发布值的 PHP 脚本中）。任何你真的不想保存的东西——例如未转义的 SQL 字符串、太长的字段等等——*都*必须在 PHP 中进行验证，因为绕过 Javascript 验证很简单。例如，没有什么可以阻止某人向您的服务器发送包含非法值的 POST，甚至无需访问您的网页。

即使您需要在后端执行验证，在前端执行相同的验证仍然是用户友好的，因此用户不必等待很长时间才能看到错误。这也减少了到您的服务器的流量。在一个大项目中你可能想做的事情是有某种系统来集中编写验证规则，然后使用这些规则动态生成 PHP 和 Javascript 验证。这样做的好处是您不会在两个地方重复您的业务规则，但在较小的项目中可能不值得麻烦。

前端的验证看起来像这样：您将一个事件处理程序绑定到一个或多个适当的事件（例如，您可以添加 onkeydown="validateUserName()" 以便验证反应更快一些），并适当地更新您的警告文本.

```
<form action="" method="post">
  <ul class="ul-reg">
    <li>
      <p>Username: </p>
      <input id="username" name="username-field" type="text" onblur="validateUserName()" />
      <span id="UsernamehelpText"></span>
    </li>
  </ul>
</form>

<script type="text/javascript">
  function validateUserName() {
    var userNameElement = document.getElementById('username');

    //Do your work: Get the value of the user name field, check
    // the values against your validation rules...

    var helpText = document.getElementById('UsernamehelpText');
    if(isValid)
      helpText.innerHTML = "";
    else
      helpText.innerHTML = "Invalid!";
  }
</script> 
```

在后端，当您处理表单时，您必须检查 PHP 中的相同规则，以防止非法值被恶意发布或由于 Javascript 中的错误而被发布。如果发现错误，您不保存，而是可以使用输入字段中提交的值和指示无效的消息重新呈现表单 - 这允许用户更改他们的输入而不会丢失他们的值提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:13:05.403

使用[jQuery](http://jquery.com/)，它看起来像这样：

```
function someFunction() {
  $.ajax({
    url: "checkStuff.php",
    data: $("input[name='username-field']").serialize,
    success: function(data) {
      if (data == "correct") {
        $("#UsernamehelpText").html("Valid");
      } else {
        $("#UsernamehelpText").html("Invalid");
      }
    }
  });
} 
```

您的 PHP 可能非常简单，只需检查输入的有效性，然后回显“正确”（如果是）。

# php - Joomla如何使到类别的链接起作用

> ID：13743297
> 
> 赞同：1
> 
> 时间：2012-12-06T12:06:22.487
> 
> 标签：php, joomla, content-management-system, joomla2.5

我在 mytemplate/html/com_content/featured/default.php 中有以下代码

```
<?php if (!empty($this->lead_items)) : ?>
    <div class="<?php echo $this->pageclass_sfx;?>">
<div class="block-head">
        <h2><?php echo $this->escape($this->params->get('page_heading')); ?></h2>
        <a href="<?php echo JRoute::_(ContentHelperRoute::getCategoryRoute($this->item->catslug)); ?>" class="more">all news</a>
    </div><!-- .block-head -->
<?php foreach ($this->lead_items as &$item) : ?>
    <dl>
        <dt>
        <?php 
            $params = JComponentHelper::getParams( 'com_content' );
            $this->item = &$item;
            $images = json_decode($item->images);
        ?>  
        <?php  if (isset($images->image_intro) and !empty($images->image_intro)) : ?>
            <?php $imgfloat = (empty($images->float_intro)) ? $params->get('float_intro') : $images->float_intro; ?>
                    <a href="<?php echo JRoute::_(ContentHelperRoute::getArticleRoute($this->item->slug, $this->item->catid)); ?>" class="img-intro-<?php echo htmlspecialchars($imgfloat); ?>">
                    <img <?php if ($images->image_intro_caption):
                    echo 'class="caption"'.' title="' .htmlspecialchars($images->image_intro_caption) .'"';
                endif; ?>
                src="<?php echo htmlspecialchars($images->image_intro); ?>" alt="<?php echo htmlspecialchars($images->image_intro_alt); ?>"/>
            </a>
        <?php endif; ?>
        </dt>
        <dd>
            <var class="date"><?php echo JHtml::_('date', $this->item->publish_up, JText::_('DATE_FORMAT_LC')); ?></var>
            <h3><a href="<?php echo JRoute::_(ContentHelperRoute::getArticleRoute($this->item->slug, $this->item->catid)); ?>" class="<?php if($this->params->get('page_heading') == 'projects'){echo 'more';}; ?>"><?php echo $this->item->title; ?></a></h3>
            <?php echo $this->item->introtext; ?>
            <div class="news-link clearfix">
                <a href="<?php echo JRoute::_(ContentHelperRoute::getArticleRoute($this->item->slug, $this->item->catid)); ?>" class="more"><?php  echo JText::sprintf('COM_CONTENT_READ_MORE_TITLE'); ?></a>
                <div class="line"></div>
            </div>
        </dd>
    <?php
        $leadingcount++;
    ?>
    </dl>
<?php endforeach; ?> 
```

一切正常，除了类别新闻的链接。这里是：

```
<a href="<?php echo JRoute::_(ContentHelperRoute::getCategoryRoute($this->item->catslug)); ?>" class="more">all news</a> 
```

如何让它发挥作用？

谢谢你。

* * *

谢谢洛德的帮助。我使用了你的代码，只是添加了中断

```
<div class="block-head">
    <h2><?php echo $this->escape($this->params->get('page_heading')); ?></h2>
    <?php foreach ($this->lead_items as &$item) :
          $this->item = &$item;
          $title = $this->escape($this->item->category_title);
          echo '<a href="'.JRoute::_(ContentHelperRoute::getCategoryRoute($this->item->catid, $this->item->catid)).'" class="more">all '.$title.'</a>';
          break;
     endforeach; ?>
</div><!-- .block-head --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:37:04.690

我唯一能做到的就是这样：

```
<div class="block-head">
    <h2><?php echo $this->escape($this->params->get('page_heading')); ?></h2>
    <?php foreach ($this->lead_items as &$item) :
              $this->item = &$item;
              echo '<a href="'.JRoute::_(ContentHelperRoute::getCategoryRoute($this->item->catid, $this->item->catid)).'">all news</a>';
           endforeach; ?>
</div><!-- .block-head --> 
```

它必须包含在`foreach`语句中并包含`$this->item = &$item;`在它之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T12:45:44.113

完整的解决方案

```
<div class="block-head">
    <h2><?php echo $this->escape($this->params->get('page_heading')); ?></h2>
    <?php foreach ($this->lead_items as &$item) :
          $this->item = &$item;
          $title = $this->escape($this->item->category_title);
          echo '<a href="'.JRoute::_(ContentHelperRoute::getCategoryRoute($this->item->catid, $this->item->catid)).'" class="more">all '.$title.'</a>';
          break;
     endforeach; ?>
</div>
<?php foreach ($this->lead_items as &$item) : ?>
    <dl>
        <dt>
        <?php 
            $params = JComponentHelper::getParams( 'com_content' );
            $this->item = &$item;
            $images = json_decode($item->images);
        ?>  
        <?php  if (isset($images->image_intro) and !empty($images->image_intro)) : ?>
            <?php $imgfloat = (empty($images->float_intro)) ? $params->get('float_intro') : $images->float_intro; ?>
                    <a href="<?php echo JRoute::_(ContentHelperRoute::getArticleRoute($this->item->slug, $this->item->catid)); ?>" class="img-intro-<?php echo htmlspecialchars($imgfloat); ?>">
                    <img <?php if ($images->image_intro_caption):
                    echo 'class="caption"'.' title="' .htmlspecialchars($images->image_intro_caption) .'"';
                endif; ?>
                src="<?php echo htmlspecialchars($images->image_intro); ?>" alt="<?php echo htmlspecialchars($images->image_intro_alt); ?>"/>
            </a>
        <?php endif; ?>
        </dt>
        <dd>
            <var class="date"><?php echo JHtml::_('date', $this->item->publish_up, JText::_('DATE_FORMAT_LC')); ?></var>
            <h3><a href="<?php echo JRoute::_(ContentHelperRoute::getArticleRoute($this->item->slug, $this->item->catid)); ?>" class="<?php if($this->params->get('page_heading') == 'projects'){echo 'more';}; ?>"><?php echo $this->item->title; ?></a></h3>
            <?php echo $this->item->introtext; ?>
            <div class="news-link clearfix">
                <a href="<?php echo JRoute::_(ContentHelperRoute::getArticleRoute($this->item->slug, $this->item->catid)); ?>" class="more"><?php  echo JText::sprintf('COM_CONTENT_READ_MORE_TITLE'); ?></a>
                <div class="line"></div>
            </div>
        </dd>
    <?php
        $leadingcount++;
    ?>
    </dl>
<?php endforeach; ?> 
```

# c - 双指针：指向结构成员的指针，它是一个指针

> ID：13743306
> 
> 赞同：0
> 
> 时间：2012-12-06T12:06:57.150
> 
> 标签：c, pointers, struct, double-pointer

我正在尝试编写一个程序来播放“Pangolin”（就像[这个人](http://en.akinator.com/#)一样- 它问是/否问题，沿着二叉树走直到它到达叶节点。然后它“猜测”，如果用户说答案是错误的，询问用户他们在想什么，并提出一个将其与错误猜测区分开来的问题。然后将新数据添加到树中）。

这是我的树节点结构。NodeType 对于包含问题的节点是 QUESTION_NODE，对于包含“对象”的节点是 OBJECT_NODE - 这是程序推断用户正在考虑的事情。问题节点具有指向子节点的指针 - 一个表示是，一个表示否。

```
typedef struct _TreeNode {
  NodeType type;
  union {
    char* question;
    char* objectName;
  } nodeString; 
  //children for yes and no answers: will be invalid when type is OBJECT_NODE
  struct _TreeNode* yes;
  struct _TreeNode* no;
} TreeNode; 
```

由于这是一个学习练习，我试图用双指针来做。这是应该向树中添加问题节点的函数：

```
void addData(TreeNode** replace, char* wrongGuess) {
  //create a new object node for what the user was thinking of
  // ... (code to get user input and build the new object node struct) ... //

  //create a new question node so we don't suck at pangolin so much
  // ... (code to get a question from the user and put it in a question node struct) ... //

  //link the question node up to its yes and no
  printf("What is the answer for %s?\n", newObjectName);
  if (userSaysYes()) {
    newQuestionNodePtr->yes = newObjectNodePtr;
    newQuestionNodePtr->no = *replace;
  }
  else {
    newQuestionNodePtr->no = newObjectNodePtr;
    newQuestionNodePtr->yes = *replace;
  }

  //redirect the arc that brought us to lose to the new question
  *replace = newQuestionNodePtr;
} 
```

然后调用 addData*函数*：

```
void ask(node) {
  //(... ask the question contained by "node" ...)//

  //get a pointer to the pointer that points to the yes/no member pointer
  TreeNode** answerP2p;
  answerP2p = userSaysYes() ? &(node.yes) : &(node.no);

     //(... the user reports that the answer we guessed was wrong ...)//

      puts("I am defeated!");
      //if wrong, pass the pointer to pointer
      addData(answerP2p, answerNode.nodeString.objectName); 
```

我的（可能是错误的）理解是这样的：

在“ask()”中，我向 addData 传递了一个指针，该指针指向“node”的成员“yes”（或 no）。该成员又是一个指针。当我在 addData 中分配给“*replace”时，这应该修改结构，将其“是”（或否）成员指针重定向到指向我创建的新问题节点。

我调试了一下，发现newQuestionNode和newObjectNode创建成功。newQuestionNode 的子节点已正确分配。但是，新的问题节点不会插入到树中。“*replace = newQuestionNodePtr”行没有我期望的效果，并且“询问”范围内的“节点”引用的节点没有重定向其子指针。

谁能看出我的理解有什么问题？或者也许是我没有在我的代码中正确表达它的一种方式？抱歉这个问题太长了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:12:35.643

您不应将传递给函数的指针声明为双指针。而是将单个指针的地址传递给函数：

```
TreeNode* answerP2p;
answerP2p = userSaysYes() ? node.yes : node.no;

addData(&answerP2p, answerNode.nodeString.objectName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:56:12.430

不幸的是，我不太理解上面 Joachim Pileborg 的回答，但我最终解决了我的问题，我想这对于新的 C-farers[1] 来说是一个相当常见的错误，所以我会以我自己的方式在这里发布。

在我从 Java 到 CI 的仓促过渡中，我告诉自己“好的，*结构*只是没有方法的*对象*”。评估这种简化的有效性留给读者作为练习。我还将这个假设扩展到“当参数是结构类型时，它会自动通过引用传递”。这显然是错误的，但我什至没有考虑过。愚蠢的。

所以这里真正的问题是我为它的参数传递`ask()`了一个类型`TreeNode`的`node`变量。整个结构是按值传递的（当然）。当我传递`answerP2p`给 时`addData()`，它实际上工作正常，但它正在`ask()`修改`TreeNode`. 我换`ask()`了一个`TreeNode*`，瞧，有一棵树。

1.  *C*我在那里做了什么[1]？

# c# - WCF – SSL – 客户端身份验证 – 无法在 Windows 7 上实现，而我可以在 Windows XP 上实现

> ID：13743311
> 
> 赞同：4
> 
> 时间：2012-12-06T12:07:21.283
> 
> 标签：c#, wcf, ssl, certificate, makecert

我正在尝试使用 ssl（传输安全）两种方式创建 wcf 客户端和服务器（自托管） - 服务器证书和客户端证书。

在 Windows XP 中一切正常，但在 Windows 7 中，客户端证书失败。如果服务器在winXp，而客户端在win7——它会工作，相反——它不会工作。

这是服务器的 app.config：

```
<configuration>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>         
        </behavior>
        <behavior name="NewBehavior1">
          <serviceMetadata httpsGetEnabled="true"/>
          <serviceCredentials>
            <serviceCertificate findValue="ServerCert" storeName="My" x509FindType="FindBySubjectName" />
            <clientCertificate>
              <authentication certificateValidationMode="ChainTrust" revocationMode="NoCheck" trustedStoreLocation="LocalMachine" />
            </clientCertificate>
            <windowsAuthentication allowAnonymousLogons="True"/>
          </serviceCredentials>

        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="Binding1">
          <security mode="Transport">
           <transport clientCredentialType="Certificate" proxyCredentialType="None" realm=""/>
          </security>
        </binding>
      </basicHttpBinding>

    </bindings>
    <services>
      <service behaviorConfiguration="NewBehavior1"
            name="Service.Calc">
        <endpoint
          address="https://172.18.96.116:8413/MyCalcService1"
          binding="basicHttpBinding"
          bindingConfiguration="Binding1"
          name="TestWCFService.Http"
          contract="Contarcts.ICalc" />
        <host>
          <baseAddresses>
            <add baseAddress="https://172.18.96.116:8413/MyCalcService1" />
          </baseAddresses>
        </host>
      </service>
    </services>
  </system.serviceModel>

</configuration> 
```

客户：

```
<system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="clientBehavior1">
          <clientCredentials>
            <clientCertificate findValue="ClientCert"
                 storeLocation="LocalMachine"
                 storeName="My"
                 x509FindType="FindBySubjectName" />
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>

    <bindings>
      <basicHttpBinding>
        <binding name="TestWCFService.Http1">
          <security mode="Transport">
          <transport clientCredentialType="Certificate" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://172.18.96.116:8413/MyCalcService1"
      binding="basicHttpBinding"
      bindingConfiguration="TestWCFService.Http1"
      contract="CalcProxy.ICalc"
      name="TestWCFService.WSHttp1"
      behaviorConfiguration="clientBehavior1"
      />
    </client>
  </system.serviceModel> 
```

服务器的代码：

```
ServiceHost calcHost = new ServiceHost(typeof(Calc));
calcHost.Open(); 
```

客户代码：

```
System.Net.ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(ValidateRemoteCertificate);

CalcClient proxy = new CalcClient();
int res = proxy.Add(2, 4); 
```

我的 makecert 命令是：

```
makecert -sv SignRoot.pvk -cy authority -r MyCA.cer -a sha1 -n "CN=MyCA" -ss my -sr localmachine

makecert -iv SignRoot.pvk -ic MyCA.cer -cy end -pe -n CN="ClientCert" -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localmachine -sky exchange -sp "Microsoft RSA SChannel Cryptographic Provider" -sy 12

makecert -iv SignRoot.pvk -ic MyCA.cer -cy end -pe -n CN="ServerCert" -eku 1.3.6.1.5.5.7.3.2 -ss my -sr localmachine -sky exchange -sp "Microsoft RSA SChannel Cryptographic Provider" -sy 12 
```

* * *

我还验证了 ca 位于正确的位置（本地计算机 - 受信任的根 CA），并且服务器/客户端证书也在正确的位置（本地计算机 - 个人）。

私钥可以导出，并且我验证“每个人”都有权访问私钥（C:\Documents and Settings\All Users\Application Data\Microsoft\Crypto\RSA\MachineKeys）。

它通过提琴手工作。

* * *

我从 SvcTraceViewer 得到的错误：

客户端 -**客户端身份验证方案“匿名”禁止 HTTP 请求。**

服务器端 -**需要客户端证书。在请求中未找到证书。**

http 跟踪错误：**服务器应用程序尝试接收客户端证书失败，状态为：0xC0000225。**

我发现了类似的问题，但我仍然坚持： [.NET 应用程序无法发送客户端证书 - Win 7 vs Win XP？](https://stackoverflow.com/questions/9858275/net-application-fails-to-send-client-certificate-win-7-vs-win-xp)

如何让它在 Windows 7 上运行？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:41:38.453

我会尝试的几件事：

1.  证书的友好名称应与运行服务的机器的 dns 相同。如果服务器和客户端都在同一台机器上运行，请使用“CN=localhost”。

2.  查看此链接以获取有关如何创建和安装[证书](http://wcfsecurity.codeplex.com/wikipage?title=How%20To%20-%20Create%20and%20Install%20Temporary%20Certificates%20in%20WCF%20for%20Transport%20Security%20during%20Development&referringTitle=How%20Tos)的重要信息。

3.  自托管时，您需要手动将证书与端口关联。使用**netsh**命令行。[检查这个](http://aviadp.blogspot.co.il/2010/05/configuring-self-hosted-wcf-service.html)。

希望这些步骤会有所帮助......祝你好运

# c# - CSP 未检测到智能卡微型驱动程序 C#

> ID：13743314
> 
> 赞同：2
> 
> 时间：2012-12-06T12:07:40.400
> 
> 标签：c#, .net, cryptography, smartcard

我正在使用智能卡编写一个用于加密目的的小程序，但我的迷你驱动程序有问题。当我启动程序时，我可以看到卡（出现选择智能卡的弹出对话框）但我无法使用它，因为以下情况：

```
A smart card was detected but is not the one required for the current operation. The smart card you are using may be missing required driver software or a required certificate. 
```

我使用的 C# 代码非常简单，如下所示：

```
CspParameters csp = new CspParameters(
        1,
        "Microsoft Base Smart Card Crypto Provider",
        "my_container"
);
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(csp); 
```

请注意，我有另一个应用程序（金雅拓微型驱动程序管理器）可以识别此微型驱动程序，因此问题不存在。

提前致谢

## 更新

为了让 CSP 识别智能卡，您需要告诉它使用默认密钥容器。只需在创建 RSACryptoServiceProvider 之前添加下一行：

```
csp.Flags = CspProviderFlags.UseDefaultKeyContainer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:37:28.033

检查微型驱动程序是否以 32 位和 64 位模式安装。在 64 位上，微型驱动程序及其配置（在 calais 数据库中）必须同时设置为 32 位和 64 位模式。

# python - 在 django 上，ajax 请求上的 request.GET["paramName"] 返回列表

> ID：13743324
> 
> 赞同：1
> 
> 时间：2012-12-06T12:08:17.583
> 
> 标签：python, django, jquery

这是我的 Javascript 代码：

```
expr = "A simple string"
$.ajax({
    type: "GET",
    url: "/ajaxrequest/get_dt_paragraphs?expr=" + expr,
    timeout: 8000,
    success: function(data) { doSomething(); }
}); 
```

在我的 django 视图中，我编写了这个方法：

```
def get_dt_paragraphs(request):
    if request.method == 'GET':
        my_string = request.GET["expr"]
        # print on the console for debugging purposes.
        print my_string
    # Do other stuff 
```

控制台的输出是[u"A simple string"]，所以我发现参数名返回的是一个数组。当然，我可以写 request.GET["expr"][0] 来获取字符串，但是我想知道为什么我得到一个列表而不是字符串，以及如何避免这种情况以写得更好更优雅代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:24:22.753

GET 和 POST 对象属于 QueryDict 类，旨在处理每个键 ( [docs](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict) ) 的多个值。

如果你确定你想要一个值，我会建议

```
request.GET.get('expr', [])[:1] 
```

如果 'expr' 不可用，这将退回到空数组，但这应该是惯用的 Python，因为 [] 的布尔值为 False。

# java - jnlp.BasicService.showDocument url 权限被所有权限和签名的 jar 拒绝

> ID：13743327
> 
> 赞同：3
> 
> 时间：2012-12-06T12:08:19.713
> 
> 标签：java, jar, permissions, jnlp, signed

我有一个在 jnlp 中运行的小程序。我的单个 jar 文件已签名。每次启动 JNLP 客户端时，我都会接受权限提示。我可以获得 BasicService 但当我尝试遵循 URI 时它仍然会引发 url permission denied 异常：

```
file:///D:\temp\test.txt 
```

该文件存在于我尝试过的所有 Windows 客户端计算机上，打开它没有安全问题。

在客户端上使用 32 或 64 位 JRE 时会出现此问题。服务器是 32 位的，但我认为这无关紧要。唯一的线索（或者可能是红鲱鱼）是当客户端和服务器位于同一主机上时，我没有遇到安全异常。如果我使用远程客户端，那么我会得到异常。

虽然我需要包含 jnlp.jar 文件来编译代码，但如果使用 Java WebStart 运行，我认为客户端不需要它。

你还需要知道什么？我还应该尝试什么？

那天晚些时候...

现在这可能是也可能不是错误，我的 jnlp 文件中的参数可能有问题，但我怀疑我使用了错误的方法。只是重申我正在尝试打开一个`file://`网址。

***这是我现在正在做的事情：***

我假设桌面设施仅在桌面应用程序中可用 - 而不是小程序。我错了（而且文档很少——即使在这个神圣的网站上，唯一的参考资料告诉我将 JNLP 服务用于 Applet 和桌面用于应用程序）——错误（谢天谢地）

因此，您可以在小程序中使用 Desktop（当然首先检查过`Desktop.isDesktopSupported()`） - 只要您通过 WebStart 运行而不是作为小程序嵌入。

我会向任何人提出以下方法。

1.  查看是否支持桌面并使用它。

    `Desktop.getDesktop().open(file);`

2.  如果没有，那么看看您是否可以获得基本 JNLP 服务。

    `BasicService bs = (BasicService)ServiceManager.lookup("javax.jnlp.BasicService");`

    如果可用，则将其与`boolean openedOK = bs.showDocument(url);`

3.  最后求助于applet API。

    `AppletContext context = applet.getAppletContext();`

    `context.showDocument(url, targetFrame);`

# jms - 如何在一个线程中连续读取 JMS 消息并在另一个线程中根据它们的 JMSMessageID 确认它们？

> ID：13743328
> 
> 赞同：1
> 
> 时间：2012-12-06T12:08:22.973
> 
> 标签：jms, activemq, kettle

我写了一个连续 JMS 消息接收器：在这里，我使用 CLIENT_ACKNOWLEDGE 因为我不希望这个线程确认消息。

```
(...)
connection.start();
session = connection.createQueueSession(true, Session.CLIENT_ACKNOWLEDGE);
queue = session.createQueue(QueueId);
receiver = session.createReceiver(queue);
While (true) {
  message = receiver.receive(1000);
  if ( message != null ) {
    // NB : I can only pass Strings to the other thread
    sendMessageToOtherThread( message.getText() , message.getJMSMessageID() ); 
  }
  // TODO Implement criteria to exit the loop here
} 
```

在另一个线程中，我将执行以下操作（成功处理后）：
这是在一个不同的 JMS 连接中同时执行的。

```
public void AcknowledgeMessage(String messageId) {
  if (this.first) {
    this.connection.start();
    this.session = this.connection.createQueueSession( false, Session.AUTO_ACKNOWLEDGE );
    this.queue = this.session.createQueue(this.QueueId);
  }
  QueueReceiver receiver = this.session.createReceiver(this.queue, "JMSMessageID='" + messageId + "'");
  Message AckMessage = receiver.receive(2000);
  receiver.close();
} 
```

似乎找不到消息（**超时后 AckMessage 为空**），而它确实存在于队列中。我怀疑消息被连续输入线程阻塞了。确实，当单独触发 AcknowledgeMes​​sage() 时，它工作正常。

有没有**更简洁的方法来检索 1 条消息？**基于它的 QueueId 和 messageId另外，如果连续阅读器必须长时间记住消息或 ID
，我觉得可能存在**内存泄漏的风险.. 合理吗？**

如果我使用 a`QueueBrowser`来避免影响确认线程，看起来我不能有这个连续的输入提要.. 对吗？

更多上下文：我正在使用[ActiveMQ](http://activemq.apache.org/)，这 2 个线程是 Pentaho Kettle 转换的 2 个[自定义“步骤”](http://wiki.pentaho.com/display/EAI/Writing+your+own+Pentaho+Data+Integration+Plug-In)。
注意：代码示例被简化以专注于该问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:23:41.367

好吧，您不能两次阅读该消息，因为您已经在第一个线程中阅读了它。

ActiveMQ 不会删除该消息，因为您尚未确认它，但在您断开 JMS 连接之前它不会可见（我不确定 ActiveMQ 中是否也存在长时间超时）。

因此，您将不得不使用原始消息并执行以下操作：`message.acknowledge();`。但是请注意，会话不是线程安全的，因此如果您在两个不同的线程中执行此操作，请小心。

# excel - 如何将文件名的用户输入转换为 VBA 宏中的硬编码文件名

> ID：13743330
> 
> 赞同：2
> 
> 时间：2012-12-06T12:08:39.953
> 
> 标签：excel, vba, macos

我有一个非常简单的问题，因为我刚刚开始在 VBA 中编程，所以我希望并感谢有关此方面的任何帮助。如何将用户提示更改为宏中硬编码的输入和输出文件名。

# ruby-on-rails - 单索引多类型 - 通过轮胎进行弹性搜索索引

> ID：13743334
> 
> 赞同：0
> 
> 时间：2012-12-06T12:08:56.563
> 
> 标签：ruby-on-rails, elasticsearch, ruby-on-rails-2, tire

在我的多租户应用程序（基于每个帐户的用户数的帐户）中，当用户文档发生更改时，我将如何更新特定帐户的索引。

我为每个帐户都有一个单独的索引，其中指定了每个模型（用户和评论 - 只是一个示例实际应用程序有许多模型）的映射。在这种情况下，如果对用户模型或评论模型进行了任何更改，则必须更新为相关帐户创建的索引。这可能吗？如果是，请告诉我。

我想这是我在我的案例中指定映射的方式。如我错了请纠正我。

**账户模式：**

```
include Tire::Model::Search

Tire.index('account_1') do
  create(
    :mappings => {
      :user => {
        :properties => {
          :name => { :type => :string, :boost => 10 },
          :company_name => { :type => :string, :boost => 5 }
        }
      },
      :comments => {
        :properties => {
          :description => { :type => :string, :boost => 5 }
        }
      }
    }
  )
end 
```

使用帐户索引的两个映射正确创建了索引。但是，当映射中指定的任何模型发生更改时，我看不到可以更新索引的方法。

每当添加新用户或更新用户时，必须更新为相应帐户创建的索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:54:02.543

This question is cross-posted from Github issue [*Multiple model single index approach*](https://github.com/karmi/tire/issues/514). Crossposting the answer here.

* * *

Let's say we have an Account class and we deal in articles entities.

In that case, our Account class would have following:

```
class Account
  #...

  # Set index name based on account ID
  #
  def articles
      Article.index_name "articles-#{self.id}"
      Article
  end
end 
```

So, whenever we need to access articles for a particular account, either for searching or for indexing, we can simply do:

```
@account = Account.find( remember_token_or_something_like_that )

# Instead of `Article.search(...)`:
@account.articles.search { query { string 'something interesting' } }

# Instead of `Article.create(...)`:
@account.articles.create id: 'abc123', title: 'Another interesting article!', ... 
```

Having a separate index per user/account works perfect in certain cases -- but definitely not well in cases where you'd have tens or hundreds of thousands of indices (or more). Having index aliases, with properly set up filters and routing, would perform much better in this case. We would slice the data not based on the tenant identity, but based on time.

Let's have a look at a second scenario, starting with a heavily simplified curl `http://localhost:9200/_aliases?pretty` output:

```
{
  "articles_2012-07-02" : {
    "aliases" : {
      "articles_plan_pro" : {
      }
    }
  },
  "articles_2012-07-09" : {
    "aliases" : {
      "articles_current" : {
      },
      "articles_shared" : {
      },
      "articles_plan_basic" : {
      },
      "articles_plan_pro" : {
      }
    }
  },
  "articles_2012-07-16" : {
    "aliases" : {
    }
  }
} 
```

You can see that we have three indices, one per week. You can see there are two similar aliases: articles_plan_pro and articles_plan_basic -- obviously, accounts with the “pro” subscription can search two weeks back, but accounts with the “basic” subscription can search only this week.

Notice also, that the the articles_current alias points to, ehm, current week (I'm writing this on Thu 2012-07-12). The index for next week is just there, laying and waiting -- when the time comes, a background job (cron, Resque worker, custom script, ...) will update the aliases. There's a nifty example with aliases in “sliding window” scenario in the Tire integration test suite.

Let's not look on the articles_shared alias right now, let's look at what tricks we can play with this setup:

```
class Account
  # ...

  # Set index name based on account subscription
  #
  def articles
    if plan_code = self.subscription && self.subscription.plan_code
      Article.index_name "articles_plan_#{plan_code}"
    else
      Article.index_name "articles_shared"
    end
    return Article
  end
end 
```

Again, we're setting up an index_name for the Article class, which holds our documents. When the current account has a valid subscription, we get the plan_code out of the subscription, and direct searches for this account into relevant index: “basic” or “pro”.

If the account has no subscription -- he's probably a “visitor” type -- , we direct the searches to the articles_shared alias. Using the interface is as simple as previously, eg. in ArticlesController:

```
@account  = Account.find( remember_token_or_something_like_that )
@articles = @account.articles.search { query { ... } }
# ... 
```

We are not using the Article class as a gateway for indexing in this case; we have a separate indexing component, a Sinatra application serving as a light proxy to elasticsearch Bulk API, providing HTTP authentication, document validation (enforcing rules such as required properties or dates passed as UTC), and uses the bare Tire::Index#import and Tire::Index#store APIs.

These APIs talk to the articles_currentindex alias, which is periodically updated to the current week with said background process. In this way, we have decoupled all the logic for setting up index names in separate components of the application, so we don't need access to the Article or Account classes in the indexing proxy (it runs on a separate server), or any component of the application. Whichever component is indexing, indexes against articles_current alias; whichever component is searching, searches against whatever alias or index makes sense for the particular component.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:23:39.370

您可能想使用另一个像橡皮筋[https://github.com/grantr/rubberband](https://github.com/grantr/rubberband)这样的宝石来按照您想要的方式设置索引，事先，也许在创建帐户时，您可以在 after_create 回调中执行此操作

然后在映射您的 User 和 Comment 模型时，您可以使用 Tire 执行以下操作：

```
tire.mapping :_routing => { :required => true, :path => :account_id } do
  index_name 'account_name_here'
  ...
  ...
end 
```

棘手的部分是将 account_id 或 name 放入 index_name 字符串/参数中，可能容易或困难，尚未尝试动态分配 index_name

希望这可以帮助！

# iphone - 从我的应用程序拨打电话时，如何确定用户是否按下了呼叫或取消按钮？

> ID：13743344
> 
> 赞同：10
> 
> 时间：2012-12-06T12:09:19.097
> 
> 标签：iphone, objective-c, nsurl, uiapplication

从我的应用程序拨打电话后，我需要返回我的应用程序，因此我使用以下代码：

```
NSURL *url = [NSURL URLWithString:@"telprompt://123-4567-890"]; 
[[UIApplication  sharedApplication] openURL:url]; 
```

当用户按下按钮执行此代码时，会显示带有 2 个按钮的警报，“呼叫”和“取消”。

如何确定用户是否按下了“呼叫”按钮？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-06-23T08:45:46.713

这是适用于**Swift 4.2的****iOS 10+**解决方案，在 iOS 12 上进行了测试，可以检测到“取消”和“呼叫”按钮。

 ****不要忘记导入 CallKit 并使您的课程符合`CXCallObserverDelegate`!**

```
let callObserver = CXCallObserver()

var didDetectOutgoingCall = false

func showCallAlert() {
    guard let url = URL(string: "tel:+36201234567"),
        UIApplication.shared.canOpenURL(url) else {
            return
    }

    callObserver.setDelegate(self, queue: nil)

    didDetectOutgoingCall = false

    //we only want to add the observer after the alert is displayed,
    //that's why we're using asyncAfter(deadline:)
    UIApplication.shared.open(url, options: [:]) { [weak self] success in
        if success {
            DispatchQueue.main.asyncAfter(deadline: .now() + 0.3) {
                self?.addNotifObserver()
            }
        }
    }
}

func addNotifObserver() {
    let selector = #selector(appDidBecomeActive)
    let notifName = UIApplication.didBecomeActiveNotification
    NotificationCenter.default.addObserver(self, selector: selector, name: notifName, object: nil)
}

@objc func appDidBecomeActive() {
    //if callObserver(_:callChanged:) doesn't get called after a certain time,
    //the call dialog was not shown - so the Cancel button was pressed
    DispatchQueue.main.asyncAfter(deadline: .now() + 0.3) { [weak self] in
        if !(self?.didDetectOutgoingCall ?? true) {
            print("Cancel button pressed")
        }
    }
}

func callObserver(_ callObserver: CXCallObserver, callChanged call: CXCall) {
    if call.isOutgoing && !didDetectOutgoingCall {
        didDetectOutgoingCall = true

        print("Call button pressed")
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-06T12:46:49.113

这并不完美，但是您可以通过侦听 UIApplicationSuspendedNotification 来识别按下“呼叫”而不是“取消”（当有人按下“home”键时，您必须添加一些逻辑来忽略此事件，或者接受来电...可能通过在显示电话号码的逻辑周围添加/删除观察者）：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(suspended:) name:@"UIApplicationSuspendedNotification" object:nil];

-(void)suspended:(NSNotification *) notification
{
    NSLog(@"Suspended");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-17T18:28:40.353

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(suspended:) name:@"UIApplicationSuspendedNotification" object:nil]; 
```

@J Saprio 的上述代码工作得很好。在它暂停应用程序`NSNotificationCenter`调用之前`UIApplicationSuspendedNotification`。单击“调用”后，它将执行该`(suspended:)`方法。这里要注意的是，每次调用`NSNotificationCenter`方法时，它都会以`(suspended:)`1 为增量进行调用。解决方案是删除观察者`NSNotificationCenter`。以下是它的片段。它将帮助您只执行一次以下方法。

```
-(void)suspended:(NSNotification *) notification
{
    NSLog(@"Suspended");
   [[NSNotificationCenter defaultCenter] removeObserver:self name:@"UIApplicationSuspendedNotification" object:nil];

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T12:22:43.677

根据**iOS 条款**，这是不可能的。完成通话时无法重定向到应用程序。

只有在越狱手机中才有可能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T12:24:35.687

当应用程序执行上述代码时，它将退出当前应用程序并导航到调用 iPhone 的应用程序。因此，应用程序无法识别用户是否按下了呼叫或取消。希望，它会帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-30T12:07:10.897

试试这个，我处理这个问题如下：

添加`-(void)viewDidLoad`以下内容：

```
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];

[center addObserverForName:UIApplicationDidBecomeActiveNotification
                    object:nil
                     queue:[NSOperationQueue mainQueue]
                usingBlock:^(NSNotification *note)
 {
     // use instance flag to know
     if (self.isBeginCallPhone)
     {
         //do some thing
         self.isBeginCallPhone = NO;
     }
 }]; 
```

别忘了：</p>

```
- (void)dealloc{
    [[NSNotificationCenter defaultCenter]removeObserver:self];
  } 
```**

# php - 无法创建包含中文内容的文件

> ID：13743347
> 
> 赞同：0
> 
> 时间：2012-12-06T12:09:28.707
> 
> 标签：php, file, character-encoding, special-characters

我正在尝试创建一个 html 文件来为我的国际化网站存储中文字符，但它们都显示为问号。

如果我将页面的内容存储在数据库中并在加载特定页面时将其拉出，它可能会正常工作，但这意味着每次有人想看到中文时都要连接到数据库。

有没有办法在平面文件上做到这一点？我想创建一个文件并读取它的内容并在网站上显示。

网站在 PHP+Mysql 上运行

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:28:57.347

可能的解决方案：

1.  将“AddDefaultCharset UTF-8”添加到您网站的 .htaccess 文件中。
2.  添加 header('Content-Type: text/html; charset=utf-8'); 到 PHP 文件的顶部。
3.  对需要中文显示的数据使用 utf8_encode() php 函数。

# javascript - Notepad++ 中的自动缩进 HTML / Javascript

> ID：13743348
> 
> 赞同：6
> 
> 时间：2012-12-06T12:09:30.087
> 
> 标签：javascript, html, notepad++, auto-indent

所以似乎这个问题在几年前就已经提出过，但似乎没有一个回应适用于最新版本的 Notepad++ 6.2.2

我也尝试过使用 NppAutoIndent 插件无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-21T09:32:47.400

对于 javascript，您可以尝试 JsMin (JsTool) 插件。它具有 jsformatter 功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T14:19:05.630

尝试使用记事本#插件，只需转到设置，然后单击首选项，然后单击杂项，然后禁用可单击链接设置以消除滚动崩溃，希望对您有所帮助。

如果您需要，这是插件信息

通用插件（正确的换行处理、注释、缩进等）

目前已实施：

*   用于 C、C++、Javascript、PHP 的 CommentDo//DocBlock 中的正确新行
*   Ruby 中 # 注释的正确换行
*   为类 C 语言、CSS 打开花括号后缩进，
    并为关闭花括号进行适当缩进
*   删除当前行保留列
*   撤消关闭的选项卡
*   使用 ALT + LEFT/RIGHT 切换选项卡
*   使用打开/关闭标签包装选择
*   网址编码/解码选择
*   自动关闭 ruby​​ 和 php 的嵌入脚本标签 (<% |
*   柱尺
*   打开标签后缩进 - XML、HTML 和 PHP
*   关闭最后一个打开的标签
*   在 CommentDoc/DocBlock 和 #comment 中自动编号
*   Ruby 指令后缩进 - module|class|def|do|if|else|elsif|private
*   匹配 Ruby 的“结束”缩进
*   自动完成 CommentDoc/DocBlock 关键字
*   查看 CSS 十六进制颜色
*   滚动到文件末尾
*   将前导 TABS 转换为空格并反转
*   粘贴缩进
*   双击编辑标签作者：jvdanilo 来源：[https](https://github.com/jvdanilo/NotepadSharp) ://github.com/jvdanilo/NotepadSharp 主页：[https ://github.com/jvdanilo/NotepadSharp](https://github.com/jvdanilo/NotepadSharp)

# web-services - 在axis2 Web服务中返回列表

> ID：13743349
> 
> 赞同：2
> 
> 时间：2012-12-06T12:09:31.803
> 
> 标签：web-services, soap, axis2

您好我想从网络服务返回一个列表。我的代码是

```
public class WebListTest {
    public List serviceFunction(String arg1,String arg2)
    {
    List list=new ArrayList();
        list.add(arg1);
        list.add(arg2);
            return list;    

        }
} 
```

但是在wsdl创作中我发现

```
<xs:element minOccurs="0" name="return" nillable="true" type="xs:anyType"/> 
```

当从客户端调用这个网络服务时，我得到了异常

```
org.apache.axis2.AxisFault: org.apache.axis2.databinding.ADBException: Any type element type has not been given
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at webservice1.WebListTestStub.fromOM(WebListTestStub.java:1622)
    at webservice1.WebListTestStub.serviceFunction(WebListTestStub.java:191)
    at webservice1.ServiceTest.main(ServiceTest.java:24)
Caused by: java.lang.Exception: org.apache.axis2.databinding.ADBException: Any type element type has not been given
    at webservice1.WebListTestStub$ServiceFunctionResponse$Factory.parse(WebListTestStub.java:917)
    at webservice1.WebListTestStub.fromOM(WebListTestStub.java:1616)
    ... 2 more
Caused by: org.apache.axis2.databinding.ADBException: Any type element type has not been given
    at org.apache.axis2.databinding.utils.ConverterUtil.getAnyTypeObject(ConverterUtil.java:1612)
    at webservice1.WebListTestStub$ServiceFunctionResponse$Factory.parse(WebListTestStub.java:895)
    ... 3 more 
```

现在我做什么。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T12:49:29.523

从 Axis2 POJO Web 服务对象返回数据时，不应使用 Java 集合类型，而应返回对象数组或原始类型。WSDL 不允许 Java 集合数据结构。请记住，Web 服务需要可以从任何语言访问，并且它们不会使用与 Java 相同的集合框架。

所以，做这样的事情：

```
public class WebListTest {
    public String[] serviceFunction(String arg1,String arg2) {

    List<String> stringList=new ArrayList<String>();

    stringList.add(arg1);
    stringList.add(arg2);

    return stringList.toArray( new String[stringList.size()] );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T05:08:30.227

您可以将返回类型从 "List" 更改为 "List< String >" ，它会正常工作。

```
public class WebListTest {
    public List<String> serviceFunction(String arg1,String arg2)
    {
        List<String> list=new ArrayList();
        list.add(arg1);
        list.add(arg2);
        return list;    

    }
} 
```

# codeigniter - 为本地服务器的 codeigniter 配置电子邮件 yahoo、AOL

> ID：13743354
> 
> 赞同：4
> 
> 时间：2012-12-06T12:10:01.357
> 
> 标签：codeigniter, email, smtp

我为雅虎使用了以下代码，但它不起作用，你能帮我解决我做错的地方吗？当我将 gmail 用于主机为 smtp.gmail.com 时，相同的代码运行良好。我正在尝试使用 yahoo、AOL、windows hotmail 从本地服务器发送电子邮件。以下是在 application/config 文件夹中创建的名为 email.php 的文件

```
$config['protocol'] = "smtp";
$config['smtp_host'] = "ssl://smtp.mail.yahoo.com";
$config['smtp_user'] = "myusername@yahoo.com";
$config['smtp_pass'] = "**************";
$config['smtp_port'] = "465";
$config['charset']="utf-8";
$config['newline']="\r";
$config['crlf'] = "\r"; 
```

gmail的工作代码

```
$config['protocol'] = "smtp";
$config['smtp_host'] = "ssl://smtp.gmail.com";
$config['smtp_user'] = "username@gmail.com";
$config['smtp_pass'] = "*****";
$config['smtp_port'] = '465';
$config['charset']='utf-8';
$config['newline']="\r\n";
$config['crlf'] = "\r\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:23:39.993

雅虎使用 995 端口作为发送邮件端口

[http://www.emailaddressmanager.com/tips/mail-settings.html](http://www.emailaddressmanager.com/tips/mail-settings.html)

# c++ - 对象成员的位置

> ID：13743357
> 
> 赞同：0
> 
> 时间：2012-12-06T12:10:08.143
> 
> 标签：c++

> **可能重复：**
> [数据成员是否与 C++ 中的对象分配在相同的内存空间中？](https://stackoverflow.com/questions/187797/are-data-members-allocated-in-the-same-memory-space-as-their-objects-in-c)

如果我声明这样的对象：

```
void main() {
  MyClass class;
} 
```

它将在堆栈上自动创建。

如果我这样做会发生什么：

```
class MySecondClass {
  private:
    MyClass class;
} 
```

成员会在堆栈上创建吗？如果是这样，如果`MySecondClass`是通过创建会发生什么`new`？这个成员还会在堆栈上吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:12:32.790

> 成员会在堆栈上创建吗？

是的。

> 如果是这样，如果`MySecondClass`是通过创建会发生什么`new`？这个成员还会在堆栈上吗？

不会。它将与对象的其余部分一起存储，“在堆上”或实现自由存储的任何地方，或者对象被动态分配的任何地方（可能是一些内存池或其他东西）。

这里值得注意的是，术语“堆栈”和“堆”通常被误用。您*真正*要问的是以下内容：

**会员有*自动存储期限*吗？**是的。

***即使封装对象具有动态存储持续时间*，它也会这样做吗？**不——封装对象的动态性在某种意义上是“继承的” *。*

> `[C++11: 3.7.5]:`成员子对象、基类子对象和数组元素的存储时间是它们完整对象的存储时间（1.8）。

在任何一种情况下，内存中的实际位置将分别是堆栈和空闲存储（“堆”），这并不重要。

And, by the way, `main` *must* have `int` return type.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:13:39.427

Yes, member is created on the stack.

If you create a new object of MyClass using "new", resources will be allocated on the heap.

# windows-8 - 合同和扩展之间的 Windows 应用商店应用程序的区别？

> ID：13743358
> 
> 赞同：0
> 
> 时间：2012-12-06T12:10:13.510
> 
> 标签：windows-8, windows-store-apps

有人可以简单解释一下 Windows 应用商店应用程序中的合同和扩展之间的区别吗？

我已经阅读了这篇文章： http: [//msdn.microsoft.com/en-us/library/windows/apps/hh464906.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464906.aspx)，但是，在某些示例中，不清楚为什么一个是合同而不是合同扩展，反之亦然。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:53:21.290

当您“扩展”Windows 8 的本机功能时，例如拍照或挑选文件 - 那么您的应用程序就是一个“扩展”。它更多是基于其功能的一类应用程序。相比之下，合同只是利用魅力和设备功能。//结尾

总结一下：

*   许多应用程序将使用合同。
*   很少（很少？）应用程序将成为扩展程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:42:51.127

合同是一种以特定格式消费和/或提供数据的协议，通常在应用程序之间，就像共享合同一样。合同会导致激活，并且通常直接从超级按钮栏（搜索、分享、设置、PlayTo）或开始菜单（启动）调用。

扩展是您的应用程序和操作系统之间的协议。这是一种使用您的应用程序扩展操作系统功能的方法。例如，自动播放允许操作系统在选择特定类型的项目时启动您的应用程序。相机设置将允许您在用户配置相机时自定义操作系统提供的相机设置。

所以总的来说，我认为合同是应用程序或应用程序用户，而扩展程序是应用程序操作系统，但很明显有些是灰色区域（比如文件选择器，我认为它更像是一个扩展而不是合同，但它被分类作为合同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:14:02.237

合同就像一个界面，具有常见的 Windows 8 魅力栏功能，例如共享和搜索。您可以使您的应用程序可用于向这些合同提供或从这些合同中接收。

扩展名是您可能会说的，我的应用程序 ID 用作第三方组件，或者如链接所示，您的应用程序处理特定扩展名的文件并将其自身呈现为可能针对该文件类型的处理程序

# jquery-mobile - 获取后更改 jqm 中的页面 - 视图不显示主干

> ID：13743361
> 
> 赞同：0
> 
> 时间：2012-12-06T12:10:31.900
> 
> 标签：jquery-mobile, backbone.js

我正在尝试更改页面并显示带有 JQM 和主干的视图。

我的主页加载正常，但是当我尝试转到第二页时 - 这是我有几个问题的时候。页面加载但没有显示

所以我的应用程序有一个路由器

```
 var AppRouter = Backbone.Router.extend({
//define routes and mapping route to the function
    routes: {
        '':    'showHome',         //home view
        'home': 'showHome',        //home view as well
        'products/productList' : 'showProducts',

    },

    initialize:function () {
    // Handle back button throughout the application
    $('.back').live('click', function(event) {
        window.history.back();
        return false;
    });
    this.firstPage = true;
    },

    defaultAction: function(actions){
        this.showHome();
    },

    showHome:function(actions){
        // will render home view and navigate to homeView
        var homeView=new HomeView();
        homeView.render(); 

        this.changePage(homeView, 'fade');
    },

    showProducts:function(){

    var productList=new Products();
    var self = this;

      productList.fetch({
         success:function(data) {   
        self.changePage(new ProductListView({collection:data}));
         }
            }); 

    },

    changePage:function (view, transition) {
        //add the attribute 'data-role="page" ' for each view's div

        if (transition != "slidefade") {
         transition = "pop";                
        }

        view.$el.attr('data-role', 'page');   
        $('.ui-page').attr('data-role', 'page');

        //append to dom
        $('body').append(view.$el);  

        if(!this.init){   
            $.mobile.changePage($(view.el), {changeHash:false, transition: transition});

        }else{   
            this.init = false;
        }            
    }       

});

$(document).ready(function () {
console.log('App Loaded');
app = new AppRouter();
Backbone.history.start();
});

return AppRouter; 
```

这也是我的产品查看页面

```
var ProductListView = Backbone.View.extend({

template: _.template(productViewTemplate),

initialize: function () {
        _.bindAll(this, "render");
     this.collection.bind("reset", this.render);
    },

 render: function () {
 var self = this;
        this.collection.each(function(model) {
        self.$el.append(self.template(model.toJSON())); 
        console.log("here");
 });

}

});

return ProductListView; 
```

因此，从 homeView 中我可以更改页面，这很好，我在产品视图上做错了什么，因为它不返回任何东西.. 没有返回错误。

谢谢

* * *

所以我做了更多的工作并使我的展示产品功能

```
showProducts:function(){

        var productList=new Products();
        var self = this;
        var productListView =new ProductListView({collection:productList});

 productList.fetch(self.changePage(productListView)); 

    } 
```

当视图为

```
var ProductListView = Backbone.View.extend({

template: _.template(productViewTemplate),
initialize : function () {
    _.bindAll(this, "render");
    this.collection.bind("reset", this.render, this);

},

 render: function() {
 var self = this;
        this.collection.each(function(model) {
        self.$el.append(self.template(model.toJSON())); 
        console.log("here");
 });

}

});

return ProductListView; 
```

但是现在 jQueryMobile 没有添加它的代码，所以它没有样式..

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:38:38.847

Backbone.js 的路由器和 jQuery Mobile 都使用`hashtag`并且不能很好地协同工作。有一些方法可以让它们工作，但除非你有特定的理由这样做，否则我不确定它是否值得，相反，我建议使用[jQuery-Mobile-router](https://github.com/azicchetti/jquerymobile-router)这是一个 jQuery Mobile 插件，它是为此创建的非常原因（即使用 Backbone.js）。作为奖励，jQuery Mobile 路由器与特殊的 JQM 页面[事件](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)相关联。

# hibernate - 是否有 JPA 替代 Hibernate 的 Session.reconnect

> ID：13743363
> 
> 赞同：1
> 
> 时间：2012-12-06T12:10:33.447
> 
> 标签：hibernate, jpa

`Session.disconnect`Hibernate 能够使用和将 Session 从其底层 JDBC 连接断开并重新连接`Session.reconnect(Connection)`。

有没有办法只使用 JPA 来实现相同的目标？如果没有，JPA 中是否有另一种模式允许我在临时释放底层 JDBC 连接的同时保持长时间运行的 JPA 会话打开。

问候， 约臣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:34:08.683

[EntityManagerFactory](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManagerFactory.html)和[EntityManager](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html)都没有这样的方法。

您可以使用 @PersistenceContext(type=PersistenceContextType.EXTENDED) 或 EntityManagerFactory.createEntityManager() 创建一个长时间运行的 EntityManager，但没有断开和重新连接连接的方法。

但是，如果在关闭 EntityManger 之后，您可以创建一个新的 EntityManger 并使用 EntityManger.merge() 重新连接任何分离的实体（如果需要，然后使用 EntityManger.refresh() ）。

# flex4 - 如何重置弹性火花状态

> ID：13743364
> 
> 赞同：0
> 
> 时间：2012-12-06T12:10:42.267
> 
> 标签：flex4, flex-spark

我正在创建使用火花状态的 flex 应用程序。

状态1：是初始页面。

状态 2：具有单选按钮、提交和取消按钮。

现在我的问题是..

当我从状态 1 移动到状态 2 并单击单选按钮时，提交按钮将被启用，如果我单击取消按钮，它会返回状态 1，现在假设如果我再次进入状态 2，那么我在最后所做的任何操作状态它仍然保持不变意味着启用提交按钮并单击单选按钮。

**所以有人帮我当我重新访问相同的状态时如何重置状态？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:28:03.190

您可以使用单击“取消”按钮时调用的重置功能。此功能可以按照您喜欢的方式重置您的组件，然后返回您的状态1

```
function reset():void
{
   submitButton.enabled = false;
   radioChoice.selectedValue = "myInitValue"; 
   currentState = "state1";
} 
```

# shell - 如何根据列匹配从两个输入文件生成输出？

> ID：13743369
> 
> 赞同：-3
> 
> 时间：2012-12-06T12:11:15.823
> 
> 标签：shell, sed, awk

输入1

**1 886817** 2 122 **C**：0.983607 **T**：0.0163934

**1 886817** 3 123 **C** :2.111 **CATTTT** :1.11

输入 2

**1 886817** rs10465241 **C** **T** 100 通过 AC=1573；

**1 886817** 。 **CATTTT 874 通过** **AVGPOST** =0.9884；

输出

1 886817 rs10465241 CT 100 通过 AC=1573;REF=0.983607;ALT=0.0163934

1 886817。CATTTT 874 通过 AVGPOST=0.9884;REF=2.111;ALT=1.11

输出是根据加粗的列匹配生成的。REF 和 ALT 值正在添加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:28:18.503

我想我刚刚回答[了这个](https://stackoverflow.com/questions/13739020/i-need-to-merge-two-files-and-create-a-new-files)问题。然而，一些小的变化：

```
awk 'FNR==NR { split($5,a,":"); split($6,b,":"); c[$1,$2,a[1],b[1]]="REF=" a[2] ";ALT=" b[2]; next } ($1,$2,$4,$5) in c { print $0 c[$1,$2,$4,$5] }' file1 file2 
```

结果：

```
1 886817 rs10465241 C T 100 PASS AC=1573;REF=0.983607;ALT=0.0163934
1 886817 . C CATTTT 874 PASS AVGPOST=0.9884;REF=2.111;ALT=1.11 
```

# java - 一次运行多线程并使线程快速运行

> ID：13743370
> 
> 赞同：1
> 
> 时间：2012-12-06T12:11:17.490
> 
> 标签：java, android, multithreading

我试图一次运行两个不同的线程，但无法做到这一点。Thread_1 & Thread_2 运行，但它们之间的差异约为 500 毫秒。我没有在我的代码中使用`wait()`或任何地方。`sleep()`

问题：

1.  如何使运行线程同时或并行？

2.  如何让线程快速运行？

对于第二个问题，我使用了这个，`Thread.setPriority(Thread.MAX_PRIORITY)`但其他之间的时间差是相同的。

## 更新了示例代码

与以下示例相同，但两个线程之间需要更多时间才能运行。

```
public static void main(String args[])
{
    MyThread thread1 = new MyThread("thread1: ");
    MyThread thread2 = new MyThread("thread2: ");
    thread1.start();
    thread2.start();
    boolean thread1IsAlive = true;
    boolean thread2IsAlive = true;
    do {
       if (thread1IsAlive && !thread1.isAlive()) {
           thread1IsAlive = false;
            System.out.println("Thread 1 is dead.");
       }
       if (thread2IsAlive && !thread2.isAlive()) {
           thread2IsAlive = false;
           System.out.println("Thread 2 is dead.");
       }
    } while(thread1IsAlive || thread2IsAlive);
} 
```

我已经在网上搜索并浏览了一些文档。接下来我可以尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:14:53.563

> 如何使运行线程同时或并行？

作为程序员，只有在多处理器机器上才有可能。在单处理器上，一次只能运行一个线程，由 JVM（和 OS）来选择运行哪个线程。

> 如何让线程快速运行？

您可以尝试（正如您所做的那样），但总体控制仅由 JVM（和操作系统）控制。

但是，增加线程的优先级并不意味着它会运行得很快。它只会使线程比其他线程更频繁地运行。即操作系统可能（或可能不会）选择它更多没有。次比其他线程。

通过此[链接](http://lass.cs.umass.edu/~shenoy/courses/fall01/labs/talab2.html)了解更多详细信息。也检查[一下](https://stackoverflow.com/questions/2816011/what-is-the-jvm-scheduling-algorithm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:14:10.087

您无法确定也无法做到。您调用 thread.start() 来启动线程。但这取决于操作系统何时启动。即使设置了优先级，您也无法完全实现这一点。

# c# - 如何更改程序文件中应用程序的图标？

> ID：13743375
> 
> 赞同：0
> 
> 时间：2012-12-06T12:11:23.050
> 
> 标签：c#, wpf, visual-studio-2010, installation

我正在开发 wpf 应用程序。我已经创建了安装项目。它成功运行并安装应用程序。该应用程序将显示在开始 -> 所有程序中。现在，当应用程序名称出现在“所有程序”列表中时，它会在应用程序名称左侧显示默认图标。我想更改此默认图标。例如，所有程序中的 IE 在其左侧都有符号 (e)。如何更改所有程序中的应用程序图标？你能为我提供上述问题的任何解决方案吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:14:50.193

您可以在创建安装程序之前为应用程序设置图标。您可以转到应用程序选项卡下的项目属性，您可以为应用程序设置默认图标。

![在此处输入图像描述](../Images/173c5b7e910225a5aebaa1fb7e967eac.png)

*如果要修改已安装应用程序的图标，则与其他应用程序的其余快捷方式相同。右键单击快捷方式，选择属性和更改图标。*

编辑：如果要向 WPF 应用程序添加桌面快捷方式，您可能会看到此[讨论。](https://stackoverflow.com/questions/8956621/how-to-add-icon-to-wpf-application-desktop-shortcut)

# android - 使用另一个声音引擎

> ID：13743376
> 
> 赞同：0
> 
> 时间：2012-12-06T12:11:24.160
> 
> 标签：android, audio, media-player, soundpool, pitch

我目前正在从事一个音频很重要的项目。我应该播放大约 20-30、3-4 秒的剪辑（一次最多两个）。（每个剪辑最大 180kB）我还计划实时投放这些剪辑。

android中的标准媒体播放器很稳定，但没有我想要的功能，比如投球。

我也试过 Soundpool。SoundPool 支持俯仰，但非常不稳定。使用 Soundpool 我使用 OGG 声音文件，但我不断收到错误消息：AudioFlinger 无法创建轨道，状态：-12。我猜是因为这些剪辑太大了？

**我想知道是否还有其他声音引擎的替代品？或者，如果有人有提示如何避免 soundpool 内存不足？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:19:31.820

看看`JetBoy`android [SDK 示例](http://developer.android.com/tools/samples/index.html)。它正在使用`JetPlayer`

# c# - NHibernate 从对象中获取集合

> ID：13743377
> 
> 赞同：0
> 
> 时间：2012-12-06T12:11:26.257
> 
> 标签：c#, .net, asp.net-mvc, nhibernate, fluent-nhibernate

我有个问题。当我尝试时，我想从对象中获取集合

```
 UserProfile user = _session.Query<UserProfile>()
                            .Where(x => x.Email == email)
                            .FirstOrDefault(); 
```

用户有一组角色，没关系。但是当我尝试这个时：

```
 IList<UserRole> role = _session.Query<UserProfile>()
                                .Where(x => x.Email == email)
                                .Select(x => x.Roles).FirstOrDefault(); 
```

它不起作用我收到一个错误：

```
 could not execute query[SQL: SQL not available] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:14:47.860

试着像这样写你的查询

var roles = (from u in _session.Query from r in u.Roles select r).ToList();

# ios - NSString 的 initWithData 和 initWithBytes 的区别

> ID：13743380
> 
> 赞同：1
> 
> 时间：2012-12-06T12:11:40.280
> 
> 标签：ios, nsstring, byte, nsdata

我对使用以下方法感到困惑`NSString`

1.  `initWithData:encoding:`

    > 返回通过使用给定编码将给定数据转换为 Unicode 字符来初始化的 NSString 对象。

2.  `initWithBytes:length:encoding:`

    > 从以给定编码解释的给定字节缓冲区返回一个初始化的 NSString 对象，该对象包含给定数量的字节。

它们的用法是这样的：

```
NSMutableData *someData = //some data;
NSString *someString = nil; 
```

*   `someString= [[NSString alloc] initWithData:someData encoding:NSUTF8StringEncoding];`

*   `someString=[[NSString alloc] initWithBytes:[someData mutableBytes] length:[someData length] encoding:NSUTF8StringEncoding];`

`NSData`class 是**字节缓冲区**的包装器，那么这些类似方法之间有什么区别。请帮助我理解其中的区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:13:29.290

好吧，您可能有一些尚未包装在`NSData`对象中的原始字节。在这种情况下，您`initWithBytes:length:encoding:`无需先包装即可使用。

# java - SecurityException：无法找到 dex.jar android 的字段

> ID：13743394
> 
> 赞同：5
> 
> 时间：2012-12-06T12:12:31.057
> 
> 标签：java, android, error-handling, adt

昨天晚上我升级到`ADT-21`并重新启动了eclipse。然后eclipse说你需要把android工具更新到21版本，我下载`window_installer21`安装在我之前window_installer安装的同一个位置。所以它会覆盖文件。然后我重新启动了eclipse，突然所有项目都停止工作了。Eclipse 总是打开并显示错误。 `SecurityException: Unable to find field for dex.jar`

当我尝试启动一个项目时，它会因以下错误而停止 `Unknown error: Unable to build: the file dx.jar was not loaded from the SDK folder!`

SDK 管理器也没有打开。

我努力了：

1.  清除所有项目
2.  重新盯着eclipse和电脑大约20-30次
3.  卸载Android SDK、JAVA并重新安装
4.  设置 find_java.bat 文件的路径
5.  在互联网上搜索了 6 小时并阅读了一些表格

[这个](https://stackoverflow.com/questions/9617830/eclipse-upgrade-not-working)，[这个](https://stackoverflow.com/questions/5323684/error-while-creating-new-project-in-android)。还有[这个](https://stackoverflow.com/questions/5228453/android-adt-error-dx-jar-was-not-loaded-from-the-sdk-folder)。

似乎没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T06:27:21.133

将出现一个弹出窗口，警告您更新到最新的 sdk 并打开相应的工具。试过这个（几次 - 每次重新启动）没有效果。

相反，答案是..

1.  在 eclispe 中，找到您的 android sdk 的位置（Window->Preferences->Android，SDK 位置在页面顶部）。

2.  关闭 eclispe。

3.  在磁盘上找到 sdk - 并运行独立的 SDK Manager.exe（第一次打开时它似乎失败了 - 但等待一两秒钟让 gui 出现）。注意 - 这与 eclipse 之前打开的 gui 相同！

4.  按照建议进行所有更新。将出现一个对话框，指示管理工具本身已更新并应重新启动。

5.  重新启动该工具 - 获取更多推荐的更新并关闭。

6.  开始 eclipse - 问题已经消失了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:30:49.197

*   **更新 Eclipse 包：** `Help > Check for Updates`
*   **更新 Android SDK：** `Window > Android SDK Manager`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T23:21:25.803

直接从 Android 开发人员站点安装最新的 Android/Eclipse 后，我遇到了类似的问题。我还看到另一个与 find_java 相关的错误，声称它在 c:\windows\system32\java.exe 中找不到 Java。一年前我曾经使用过 MOTODEV 工作室（从那以后就没有碰过它）。我担心它可能会导致冲突，所以我卸载了它。但是，它在我的 c:\Users\ 文件夹中留下了一些零碎的东西。我炸掉了一些与 android 相关的隐藏目录，以及一个已经安装在那里的 androidsdks 目录，同样炸掉了我的工作区文件夹。然后我启动了 Eclipse/SDK Manager，一切都很好:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:18:09.260

用最新的更新您的 Android 工具/sdk 并创建新的工作区。它为我解决了问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T14:01:14.093

尝试安装新的 andoridSDK。问题出在 SDK 而不是您的 Eclipse。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-22T23:15:34.517

我收到了相同的错误消息，但 SDK 管理器为您工作，以管理员权限运行它并删除 Tools 文件夹中的两个包。然后再次安装它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-10T00:45:48.660

`dx.jar`这是由于VirtualStore（Windows 存储系统和程序文件的用户版本的文件夹）中存在较旧版本的。转到`"C:\Users\<your user name>\AppData\Local\VirtualStore\<android-sdk path>"`并删除所有内容，或仅删除`"\platform-tools\lib\dx.jar"`文件。

即：如果您的用户名是`"user32"`并且您的 android SDK 放置在 中，`"C:\Program Files\Java\android-sdk"`则更新后您可能会有一个过时版本`dx.jar``"C:\Users\user32\AppData\Local\VirtualStore\Program Files\Java\android-sdk\platform-tools\lib\"`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T18:11:30.103

自从我遇到这个问题后，我开始使用来自[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)
的 Google ADT Bundle 现在一切都很好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-27T09:02:38.687

如果 .jar 文件无法加载，试试这个..

找到**android-sdks\build-tools\28.0.3\lib**

删除 dx.jar 文件

通过 sdk 管理器选择适合您的 android 应用程序使用的 sdk 工具

再次搜索

这里我使用的是*apk 21.0.1*

找到**android-sdks\build-tools\21.0.1\lib**

将 dx.jar 文件剪切并粘贴到 **android-sdks\build-tools\28.0.3\lib**文件夹中

# php - 如何使用 php 从 xml 文件中获取更新？

> ID：13743399
> 
> 赞同：0
> 
> 时间：2012-12-06T12:12:33.447
> 
> 标签：php, xml

我正在编写一个 livecore 和统计网站，我想将我的网站“使用 php”链接到一个 xml 页面，以帮助我尽快获得分数和数据的更新。我尝试了以下 php 代码：

```
$xml = simplexml_load_file("http://www.iddaa.com.tr/XML/IDDAAMACPROGRAMI/index.htm?iddaadrawid=05.12.2012&iddaadrawide=06.12.2012&foraccess=KSsec654");

print_r($xml); 
```

它给了我以下错误：

`Warning: simplexml_load_file() [function.simplexml-load-file]: http://www.iddaa.com.tr/XML/IDDAAMACPROGRAMI/index.htm?iddaadrawid=05.12.2012&iddaadrawide=06.12.2012&foraccess=KSsec654:22: parser error : Opening and ending tag mismatch: link line 10 and head in C:\wamp\www\test\11.php on line 2`

注意：我尝试了另一个链接“http://www.goalserve.com/samples/soccer_livescore.xml”我可以从该链接打印信息。

任何人都可以帮助我将xml文件正确链接到我的网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:45:34.513

你可以试试

```
$xml  = file_get_contents("http://www.iddaa.com.tr/XML/IDDAAMACPROGRAMI/index.htm?iddaadrawid=05.12.2012&iddaadrawide=06.12.2012&foraccess=KSsec654");
$config = array(
        'indent' => true,
        'clean' => true,
        'input-xml'  => true,
        'output-xml' => true,
        'wrap'       => false
);

$tidy = new Tidy();
$xml = $tidy->repairString($xml, $config);

$xml = new SimpleXMLElement($xml);
print_r($xml); 
```

# c# - 如何从放置在 DataGridView 中的组合框中获取选定的值

> ID：13743401
> 
> 赞同：0
> 
> 时间：2012-12-06T12:12:42.703
> 
> 标签：c#

我正在尝试使用以下代码从放置在 DataGridView 中的 Combobox 中获取选定的值

```
 DataGridViewComboBoxColumn dgvcmb = new DataGridViewComboBoxColumn();
  dgvcmb.HeaderText = "Tran_Mode";
        for (ni = 0; ni < dTable.Rows.Count; ni++)
        {
            dgvcmb.Items.Add(dTable.Rows[ni][1].ToString());
         }

        dgv.Columns.Add(dgvcmb);
        dgv.Columns[5].DisplayIndex = 4; 
```

谁能告诉我如何获得价值？

# java - 如何获取属性文件的第一个键

> ID：13743402
> 
> 赞同：2
> 
> 时间：2012-12-06T12:12:47.727
> 
> 标签：java, properties

给定以下属性文件，

```
abc=10
bcd=20
cde=11
def=321 
```

如何获取属性文件的第一个键（在这种情况下`abc`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:16:30.757

您可以使用[**stringPropertyNames()**](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#stringPropertyNames%28%29)方法，它返回一个 Set 键。

```
Properties prop = new Properties();
        try {
          prop.load(new FileInputStream("config.properties"));
            Set<String> keys = prop.stringPropertyNames();
            TreeSet<String> sorted = new TreeSet<>(keys);
            System.out.println(sorted.iterator().next());//returns abc
        } catch (IOException ex) {
            ex.printStackTrace();
        } 
```

但请记住，对 stringPropertyNames() 的调用会返回一个未排序的 Set，这仅在您的属性文件已排序时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:14:23.433

基本不用`java.util.Properties`。这是基于一个没有排序概念的哈希表。

目前尚不清楚上下文是什么，但如果可能，请使用已知键作为“最重要的”或您想要实现的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:17:51.867

您可以使用以下方法获取键的枚举`propertyNames`：

[http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#propertyNames](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#propertyNames) ()

但是，API 中没有任何内容可以保证枚举中的第一个将是文件中的第一个。关心属性文件的顺序是相当不寻常的——如果你能解释为什么你想要这个，它可能有助于获得更好的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:15:29.600

正如上面 JS 指出的那样，如果你想有秩序感，你不应该使用属性。另一方面，如果您已经在项目中使用/继承它，则此代码将起作用。

```
 public static void main( String[] args )
    {
        Properties prop = new Properties();
        p.load("properties.txt");

        try {
            //set the properties value
            prop.getProperty("abc");
            }catch (IOException ex) {
            ex.printStackTrace();
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T12:28:45.290

只需阅读文件：

```
BufferedReader b = new BufferedReader(new FileReader("Ranjan.properties"));
String line, firstPropertyKey;
// loop ignore initial whitespace
while ((line = b.readLine())!=null && line.trim().equals(""));
// whitespace gone (or end of file reached)
if (line != null) firstPropertyKey = line.split("=")[0].trim(); 
```

因为上面的代码对于没有经验的开发者来说比较容易混淆，所以while循环也可以这样写：

```
while ((line = b.readLine())!=null && line.trim().equals("")) { /*no body*/ } 
```

也就是说，它不需要正文，并且**if**语句在**循环之外**。另请注意，WHILE 循环不仅检查条件，而且从文件中读取一行并将其分配给*line*变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-20T06:40:53.090

你可以试试下面的代码。其他用户提到的枚举不会给您正确的顺序，但是当您想将值从属性文件传递到另一个方法时，此方法很有帮助。例如，另一个方法（值）；

```
try {
        File file = new File("jasper.properties");
        FileInputStream fileInput = new FileInputStream(file);
        Properties properties = new Properties();
        properties.load(fileInput);
        fileInput.close();

        Enumeration enuKeys = properties.keys();
        while (enuKeys.hasMoreElements()) {
            String key = (String) enuKeys.nextElement();
            String value = properties.getProperty(key);
            System.out.println(key + ": " + value);

            if(value=="10"){
                doSomething();
            }
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

# 这是我的 jasper.properties 文件

```
key=bond.investment , value=10  
key=bond.encashment, value=15 
bond.investment=10  
bond.encashment=15 
```

# android - 在Android中获取物理内存信息？

> ID：13743406
> 
> 赞同：0
> 
> 时间：2012-12-06T12:12:54.670
> 
> 标签：android, memory-management

我正在尝试获取有关物理内存的信息，例如总内存、已用内存和可用内存，而不仅仅是关于堆的信息。

我在这里搜索过这样的问题，但没有找到正确的答案。

我试过这样：

```
long freeSize = 0L;
    long totalSize = 0L;
    long usedSize = 0L;

    try {
        Runtime info = Runtime.getRuntime();
        freeSize = info.freeMemory();
        totalSize = info.totalMemory();
        usedSize = totalSize - freeSize;
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

但是不要获取正确的信息。

我也尝试过 MemoryInfo 类。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:21:48.277

**另一种计算当前正在运行的应用程序的内存使用情况的方法。**

```
public static long getUsedMemorySize() {

    long freeSize = 0L;
    long totalSize = 0L;
    long usedSize = -1L;
    try {
        Runtime info = Runtime.getRuntime();
        freeSize = info.freeMemory();
        totalSize = info.totalMemory();
        usedSize = totalSize - freeSize;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return usedSize;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:38:51.937

```
ActivityManager activityManager = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
            MemoryInfo memoryInfo = new ActivityManager.MemoryInfo();
            activityManager.getMemoryInfo(memoryInfo);

            String TAG = "a";
            Log.i(TAG, " memoryInfo.availMem " + memoryInfo.availMem + "\n" );
            Log.i(TAG, " memoryInfo.lowMemory " + memoryInfo.lowMemory + "\n" );
            Log.i(TAG, " memoryInfo.threshold " + memoryInfo.threshold + "\n" );

            List<RunningAppProcessInfo> runningAppProcesses = activityManager.getRunningAppProcesses();

            Map<Integer, String> pidMap = new TreeMap<Integer, String>();
            for (RunningAppProcessInfo runningAppProcessInfo : runningAppProcesses)
            {
                pidMap.put(runningAppProcessInfo.pid, runningAppProcessInfo.processName);
            }

            Collection<Integer> keys = pidMap.keySet();

            for(int key : keys)
            {
                int pids[] = new int[1];
                pids[0] = key;
                android.os.Debug.MemoryInfo[] memoryInfoArray = activityManager.getProcessMemoryInfo(pids);
                for(android.os.Debug.MemoryInfo pidMemoryInfo: memoryInfoArray)
                {
                    Log.i(TAG, String.format("** MEMINFO in pid %d [%s] **\n",pids[0],pidMap.get(pids[0])));
                    Log.i(TAG, " pidMemoryInfo.getTotalPrivateDirty(): " + pidMemoryInfo.getTotalPrivateDirty() + "\n");
                    Log.i(TAG, " pidMemoryInfo.getTotalPss(): " + pidMemoryInfo.getTotalPss() + "\n");
                    Log.i(TAG, " pidMemoryInfo.getTotalSharedDirty(): " + pidMemoryInfo.getTotalSharedDirty() + "\n");
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:16:08.390

**获取当前内存：**

```
MemoryInfo mi = new MemoryInfo();
ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
activityManager.getMemoryInfo(mi);
long availableMegs = mi.availMem / 1048576L; 
```

# perl - 如何告诉 DBD::CSV 使用逗号作为小数分隔符？

> ID：13743409
> 
> 赞同：4
> 
> 时间：2012-12-06T12:13:14.563
> 
> 标签：perl, csv, dbi

[我正在尝试使用带有 DBI 和DBD::CSV](https://metacpan.org/module/DBD%3a%3aCSV)的德式 CSV 文件。这反过来又使用[Text::CSV](https://metacpan.org/module/Text%3a%3aCSV)来解析文件。我想使用 SQL 查询该文件中的数据。

我们先看一下文件。用分号（ ）隔开`;`，里面的数字是这样的：`5,23`，相当于英文的`5.23`。

这是我到目前为止所得到的：

```
use strict; use warnings;
use DBI;

# create the database handle
my $dbh = DBI->connect(
  'dbi:CSV:',
  undef, undef,
  {
    f_dir => '.',
    f_schema => undef,
    f_ext => '.csv',
    f_encoding => 'latin-1',
    csv_eol => "\n",
    csv_sep_char => ';',
    csv_tables => {
      foo => {
        file => 'foo.csv',
        #skip_first_row => 0,
        col_names => [ map { "col$_" } (1..3)  ], # see annotation below
      },
    },
  },
) or croak $DBI::errstr;

my $sth = $dbh->prepare(
  'SELECT col3 FROM foo WHERE col3 > 80.50 ORDER BY col3 ASC'
);
$sth->execute;

while (my $res = $sth->fetchrow_hashref) {
  say $res->{col3};
} 
```

现在，这看起来相当不错。问题是 SQL（意思是 SQL::Statement，它位于 DBI 和 DBD::CSV 后面的某个位置）没有将 中的数据`col3`视为中间带逗号的浮点值漂浮。相反，它将列视为整数，因为它不理解逗号。

以下是一些示例数据：

```
foo;foo;81,90
bar;bar;80,50
baz;baz;80,70 
```

因此，上面带有此数据的代码将产生一行输出：`81,90`. 当然，这是错误的。它使用了比较的`int()`部分`col3`，这是正确的，但不是我想要的。

问题：**我怎样才能告诉它把带逗号的数字当作浮点数？**

我想过的事情：

*   我没有在 Text::CSV 中找到任何内置方式来执行此操作。我不确定在 Text::CSV 中的哪个位置可以将其连接，或者 Text::CSV 中是否有机制可以将这些东西放入其中。
*   我不知道如果可能的话 DBD::CSV 想要使用 Text::CSV_XS 是否会造成问题。
*   也许我可以稍后再做，在数据被读取并且已经存储在某个地方之后，但我还不确定正确的访问点在哪里。
*   我知道这些东西存储在 SQL::Statement 中。我还不知道在哪里。这可能会很方便。

将源 CSV 文件更改为使用点而不是逗号**不是**一种选择。

我愿意接受各种建议。也欢迎通过 SQL 处理整个 CSV 的其他方法。非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T12:38:57.023

您需要使用[`SQL::Statement::Functions`](https://metacpan.org/module/SQL%3a%3aStatement%3a%3aFunctions)（已作为 的一部分加载[`DBD::CSV`](https://metacpan.org/module/DBD%3a%3aCSV)）编写用户定义的函数。

这个程序做你想做的。添加`0.0`到转换后的字符串是完全没有必要的，但它说明了子程序的目的。（还要注意您在调用`f_encoding`参数中的拼写错误`connect`。）

```
use strict;
use warnings;

use DBI;

my $dbh = DBI->connect(
  'dbi:CSV:',
  undef, undef,
  {
    f_dir => '.',
    f_schema => undef,
    f_ext => '.csv',
    f_encoding => 'latin-1',
    csv_eol => "\n",
    csv_sep_char => ';',
    csv_tables => {
      foo => {
        file => 'test.csv',
        #skip_first_row => 0,
        col_names => [ map { "col$_" } (1..3)  ], # see annotation below
      },
    },
  },
) or croak $DBI::errstr;

$dbh->do('CREATE FUNCTION comma_float EXTERNAL');

sub comma_float {
  my ($self, $sth, $n) = @_;
  $n =~ tr/,/./;
  return $n + 0.0;
}

my $sth = $dbh->prepare(
  'SELECT col3 FROM foo WHERE comma_float(col3) > 80.50 ORDER BY col3 ASC'
);
$sth->execute;

while (my $res = $sth->fetchrow_hashref) {
  say $res->{col3};
} 
```

**输出**

```
80,70
81,90 
```

# ubuntu - java.lang.InternalError：无法连接到 X11 窗口服务器

> ID：13743410
> 
> 赞同：1
> 
> 时间：2012-12-06T12:13:16.863
> 
> 标签：ubuntu, x11

我正在尝试在 ubuntu 服务器上运行我的 java 应用程序，但我经常收到此错误：java.lang.InternalError：无法连接到 X11 窗口服务器。我将 DISPLAY 变量设置为 :0.0 但这没有帮助。在 X11 日志文件中，我收到以下错误消息： (EE) open /dev/fb0: No such file or directory (EE) intel(0): No kernel modesetting driver detected。(EE) 找到屏幕，但没有可用的配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:38:06.213

利用

java -Djava.awt.headless=true …</p>

在不连接到 X 服务器的情况下启动。这个（和其他提示）可以在

[http://javatechniques.com/blog/linux-x11-libraries-for-headless-mode/](http://javatechniques.com/blog/linux-x11-libraries-for-headless-mode/)

# c# - 多个 FileSystemWatcher 对象

> ID：13743418
> 
> 赞同：0
> 
> 时间：2012-12-06T12:13:39.500
> 
> 标签：c#, filesystemwatcher

我需要观察几个（可能多达 50 个）不同的目录（一些包括子目录）来更改文件。

所有这些目录都在网络共享上。网络共享包含不断更新的日志文件。

现在我听说 FileSystemWatcher 不可靠（缺少事件），并且无法观看这么多目录。

现在不可靠性不是问题，因为我不需要处理每个事件，因为如果这样做，事件将在亚秒级引发，我更关心你可以实际使用多少的可伸缩性。

所以我的问题是，我是否应该构建自己的轮询系统观察器（例如每 5 秒）并遍历正在观察的目录中的所有文件，还是这样做是错误的？

我该如何克服我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:22:37.063

使用 FileSystemWatcher 并偶尔检查更改。您可以根据重要性或紧迫性降低轮询时间。

更多信息可以在[这里](https://stackoverflow.com/questions/239988/filesystemwatcher-vs-polling-to-watch-for-file-changes)找到。

# windows-phone-7 - wp7中的日文键盘

> ID：13743421
> 
> 赞同：1
> 
> 时间：2012-12-06T12:13:56.323
> 
> 标签：windows-phone-7, keyboard

我已经在我的 wp7 项目中实现了 textbox.Keydown 事件以失去焦点并使软键盘在按键时隐藏。它适用于美国软键盘。但是当我将系统语言和键盘更改为日语时，按键事件不是当我按下键并能够使用键盘插入文本时调用。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:48:19.710

您尝试订阅该[`TextChanged`](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.textbox.textchanged%28v=vs.95%29.aspx)事件。

# php - WP-PostRatings - 随机返回 4 或 5 星帖子

> ID：13743427
> 
> 赞同：0
> 
> 时间：2012-12-06T12:14:19.990
> 
> 标签：php, wordpress

我浏览了这个支持论坛，但如果我错过了答案，我无法找到我想要的东西，所以很抱歉。

我正在开发一个 query_posts 参数列表，以返回评分为 4 或以上的随机自定义帖子类型。

我当前的代码如下所示：

```
$query_args['post_type'] = 'recipes';
$query_args['post_status'] = 'publish';
$query_args['r_sortby'] = 'highest_rated';
$query_args['r_orderby'] = 'rand';
$query_args['posts_per_page'] = '1';
query_posts($query_args); 
```

这是返回评分最高的食谱。我怎样才能修改为只返回一个随机的 4/5 星食谱？

非常感谢。

[http://wordpress.org/extend/plugins/wp-postratings/](http://wordpress.org/extend/plugins/wp-postratings/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:05:05.800

对于任何有兴趣的人，使用以下方法设法使其工作：

```
 $query_args['meta_query'] = array(
        array(
            'key' => 'ratings_average',
            'compare' => 'IN',
            'value' => array(4,5) // 4 or 5 star recipes
        )
    );
    $query_args['post_type'] = 'recipes';
    $query_args['post_status'] = 'publish';
    $query_args['orderby'] = 'rand';
    $query_args['posts_per_page'] = '1'; 
    query_posts($query_args); 
```

# java - ResourceBundle [messages] not found for MessageSource: Can't find bundle for base name messages

> ID：13743433
> 
> 赞同：2
> 
> 时间：2012-12-06T12:14:34.390
> 
> 标签：java, spring, spring-mvc, internationalization

在 applicationContext.xml 我定义了 MessageSource 像这样：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>/WEB-INF/i18n/messages</value>
        </list>
    </property>
</bean> 
```

我还需要加载所有本地化消息，因此我为它创建了自己的类：

```
public class ErpMessageSource extends ResourceBundleMessageSource {

    public Map<String, String> getMessages(String basename, Locale locale) {
        Set<String> keys = getKeys(basename, locale);
        Map<String, String> m = new HashMap<String, String>();

        for (String key : keys) {
            try {
                m.put(key, getMessage(key, null, locale));              
            } catch (Exception e) {
                System.err.println(key + " - " + e.getLocalizedMessage());
            }
        }

        return m;
    }

    private Set<String> getKeys(String basename, Locale locale) {
        ResourceBundle bundle = getResourceBundle(basename, locale);
        return bundle.keySet();
    }

} 
```

我有两个问题：

**问题1：** 我的消息文件位于WEB-INF/i18n 目录下。它仅包含 2 个文件：messages_en.properties 和 messages_hr.properties。

如果我尝试运行上面的代码，我会收到警告：“找不到 MessageSource 的 ResourceBundle [messages]：找不到基本名称消息的捆绑包，语言环境‘某些语言环境’”，然后是 NullPointerException。

如果我将消息文件移动到 WEB-INF/classes 文件夹，问题就消失了，但是我遇到了第二个问题。

**问题 2：** 如果我在消息位于 WEB-INF/classes 目录下时运行上面的代码，我会收到异常：“在代码 'some.code' 下找不到任何消息，用于区域设置 'some locale'”，即使所有键都已正确加载.

问题是：如何通过将消息保存在 WEB-INF/i18n 文件夹中来避免问题 1，我需要解决第二个问题，因为我真的不知道那里发生了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T10:24:02.460

您可能只需要将资源文件夹添加到项目的类路径中。

尝试执行以下操作：

右键单击 Package Explorer 视图中的项目名称---> Properties ---> Java Build Path ---> 停留在 Source 选项卡（默认打开）---> 单击 Folder ---> 列表现在应该出现项目中的所有文件夹 ---> 在包含消息属性文件的文件夹上打勾

重建项目并尝试运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T14:26:54.763

虽然问这个问题已经2年了，但我遇到了同样的问题并找到了解决方案。

如果要将 i18n 属性文件保存在 webcontent 文件夹之外的某个位置，则应修改该文件夹中的 org.eclipse.resources.prefs`.setting`文件。并这样做：

```
eclipse.preferences.version=1
encoding//WebContent/WEB-INF/i18n/property_en.properties=UTF-8
encoding//WebContent/WEB-INF/i18n/property_fr.properties=UTF-8 
```

在 bean 属性中，像以前一样设置 messageSource。但添加：

```
<property name="defaultEncoding" value="UTF-8" /> 
```

希望它有效。

# android - 解析的 XML 未显示所需的结果

> ID：13743435
> 
> 赞同：0
> 
> 时间：2012-12-06T12:14:39.603
> 
> 标签：android, xml, xml-parsing

我有一个名为**data.xml**的本地 xml 文件。我已经使用**PullParser**对其进行了解析。解析后logcat输出为：

```
12-06 10:51:33.761: I/End:(5026): START_TAG: quiz
12-06 10:51:33.761: I/End:(5026): START_TAG: mchoice
12-06 10:51:33.761: I/End:(5026): START_TAG: question
12-06 10:51:33.761: I/End:(5026): TEXT: Not a team sport for sure
12-06 10:51:33.761: I/End:(5026): END_TAG: question
12-06 10:51:33.761: I/End:(5026): START_TAG: id
12-06 10:51:33.761: I/End:(5026): TEXT: 1
12-06 10:51:33.761: I/End:(5026): END_TAG: id
12-06 10:51:33.761: I/End:(5026): START_TAG: option1
12-06 10:51:33.761: I/End:(5026): TEXT: Cricket
12-06 10:51:33.761: I/End:(5026): END_TAG: option1
12-06 10:51:33.761: I/End:(5026): START_TAG: option2
12-06 10:51:33.761: I/End:(5026): TEXT: Tennis
12-06 10:51:33.761: I/End:(5026): END_TAG: option2
12-06 10:51:33.761: I/End:(5026): START_TAG: option3
12-06 10:51:33.761: I/End:(5026): TEXT: Rugby
12-06 10:51:33.761: I/End:(5026): END_TAG: option3
12-06 10:51:33.761: I/End:(5026): START_TAG: option4
12-06 10:51:33.761: I/End:(5026): TEXT: Soccer
12-06 10:51:33.761: I/End:(5026): END_TAG: option4
12-06 10:51:33.761: I/End:(5026): START_TAG: answer
12-06 10:51:33.761: I/End:(5026): TEXT: Tennis
12-06 10:51:33.761: I/End:(5026): END_TAG: answer
12-06 10:51:33.761: I/End:(5026): END_TAG: mchoice
12-06 10:51:33.761: I/End:(5026): START_TAG: mchoice
12-06 10:51:33.761: I/End:(5026): START_TAG: question
12-06 10:51:33.761: I/End:(5026): TEXT: I am the biggest planet in the Solar System
12-06 10:51:33.761: I/End:(5026): END_TAG: question
12-06 10:51:33.761: I/End:(5026): START_TAG: id
12-06 10:51:33.761: I/End:(5026): TEXT: 2
12-06 10:51:33.761: I/End:(5026): END_TAG: id
12-06 10:51:33.761: I/End:(5026): START_TAG: option1
12-06 10:51:33.761: I/End:(5026): TEXT: Saturn
12-06 10:51:33.761: I/End:(5026): END_TAG: option1
12-06 10:51:33.761: I/End:(5026): START_TAG: option2
12-06 10:51:33.761: I/End:(5026): TEXT: Jupiter
12-06 10:51:33.761: I/End:(5026): END_TAG: option2
12-06 10:51:33.761: I/End:(5026): START_TAG: option3
12-06 10:51:33.761: I/End:(5026): TEXT: Neptune
12-06 10:51:33.761: I/End:(5026): END_TAG: option3
12-06 10:51:33.761: I/End:(5026): START_TAG: option4
12-06 10:51:33.761: I/End:(5026): TEXT: Pluto
12-06 10:51:33.761: I/End:(5026): END_TAG: option4
12-06 10:51:33.761: I/End:(5026): START_TAG: answer
12-06 10:51:33.761: I/End:(5026): TEXT: Jupiter
12-06 10:51:33.761: I/End:(5026): END_TAG: answer
12-06 10:51:33.761: I/End:(5026): END_TAG: mchoice
12-06 10:51:33.761: I/End:(5026): START_TAG: mchoice
12-06 10:51:33.761: I/End:(5026): START_TAG: question
12-06 10:51:33.761: I/End:(5026): TEXT: I am the closest star to the earth
12-06 10:51:33.761: I/End:(5026): END_TAG: question
12-06 10:51:33.761: I/End:(5026): START_TAG: id
12-06 10:51:33.761: I/End:(5026): TEXT: 3
12-06 10:51:33.761: I/End:(5026): END_TAG: id
12-06 10:51:33.761: I/End:(5026): START_TAG: option1
12-06 10:51:33.761: I/End:(5026): TEXT: Milky way
12-06 10:51:33.761: I/End:(5026): END_TAG: option1
12-06 10:51:33.761: I/End:(5026): START_TAG: option2
12-06 10:51:33.761: I/End:(5026): TEXT: Moon
12-06 10:51:33.761: I/End:(5026): END_TAG: option2
12-06 10:51:33.761: I/End:(5026): START_TAG: option3
12-06 10:51:33.761: I/End:(5026): TEXT: Sun
12-06 10:51:33.761: I/End:(5026): END_TAG: option3
12-06 10:51:33.761: I/End:(5026): START_TAG: option4
12-06 10:51:33.761: I/End:(5026): TEXT: North Star
12-06 10:51:33.761: I/End:(5026): END_TAG: option4
12-06 10:51:33.761: I/End:(5026): START_TAG: answer
12-06 10:51:33.761: I/End:(5026): TEXT: Sun
12-06 10:51:33.761: I/End:(5026): END_TAG: answer
12-06 10:51:33.761: I/End:(5026): END_TAG: mchoice
12-06 10:51:33.761: I/End:(5026): START_TAG: mchoice
12-06 10:51:33.761: I/End:(5026): START_TAG: question
12-06 10:51:33.761: I/End:(5026): TEXT: A number which is not prime
12-06 10:51:33.761: I/End:(5026): END_TAG: question
12-06 10:51:33.761: I/End:(5026): START_TAG: id
12-06 10:51:33.761: I/End:(5026): TEXT: 4
12-06 10:51:33.761: I/End:(5026): END_TAG: id
12-06 10:51:33.761: I/End:(5026): START_TAG: option1
12-06 10:51:33.761: I/End:(5026): TEXT: 31
12-06 10:51:33.761: I/End:(5026): END_TAG: option1
12-06 10:51:33.761: I/End:(5026): START_TAG: option2
12-06 10:51:33.761: I/End:(5026): TEXT: 61
12-06 10:51:33.761: I/End:(5026): END_TAG: option2
12-06 10:51:33.761: I/End:(5026): START_TAG: option3
12-06 10:51:33.761: I/End:(5026): TEXT: 71
12-06 10:51:33.761: I/End:(5026): END_TAG: option3
12-06 10:51:33.761: I/End:(5026): START_TAG: option4
12-06 10:51:33.761: I/End:(5026): TEXT: 91
12-06 10:51:33.761: I/End:(5026): END_TAG: option4
12-06 10:51:33.761: I/End:(5026): START_TAG: answer
12-06 10:51:33.761: I/End:(5026): TEXT: 91
12-06 10:51:33.761: I/End:(5026): END_TAG: answer
12-06 10:51:33.761: I/End:(5026): END_TAG: mchoice
12-06 10:51:33.761: I/End:(5026): START_TAG: mchoice
12-06 10:51:33.761: I/End:(5026): START_TAG: question
12-06 10:51:33.761: I/End:(5026): TEXT: Which is correct?
12-06 10:51:33.761: I/End:(5026): END_TAG: question
12-06 10:51:33.761: I/End:(5026): START_TAG: id
12-06 10:51:33.761: I/End:(5026): TEXT: 5
12-06 10:51:33.761: I/End:(5026): END_TAG: id
12-06 10:51:33.761: I/End:(5026): START_TAG: option1
12-06 10:51:33.761: I/End:(5026): TEXT: Foreine
12-06 10:51:33.761: I/End:(5026): END_TAG: option1
12-06 10:51:33.761: I/End:(5026): START_TAG: option2
12-06 10:51:33.761: I/End:(5026): TEXT: Fariegn
12-06 10:51:33.761: I/End:(5026): END_TAG: option2
12-06 10:51:33.761: I/End:(5026): START_TAG: option3
12-06 10:51:33.761: I/End:(5026): TEXT: Foreig
12-06 10:51:33.761: I/End:(5026): END_TAG: option3
12-06 10:51:33.761: I/End:(5026): START_TAG: option4
12-06 10:51:33.761: I/End:(5026): TEXT: Foreign
12-06 10:51:33.761: I/End:(5026): END_TAG: option4
12-06 10:51:33.761: I/End:(5026): START_TAG: answer
12-06 10:51:33.761: I/End:(5026): TEXT: Foreign
12-06 10:51:33.761: I/End:(5026): END_TAG: answer 
```

我已经使用这种**方法来解析 XML 文件**：

```
//local XML
         private String getEventsFromAnXML(Activity activity)
                    throws XmlPullParserException, IOException
                    {
                     StringBuffer stringBuffer = new StringBuffer();
                     Resources res = activity.getResources();
                     XmlResourceParser xpp = res.getXml(R.xml.data);
                     xpp.next();

                     int eventType = xpp.getEventType();
                     while (eventType != XmlPullParser.END_DOCUMENT)
                     {
                      if(eventType == XmlPullParser.START_DOCUMENT)
                      {
                      // stringBuffer.append("--- Start XML ---");
                       Log.i("Start:", "--- Start XML ---");
                      }
                      else if(eventType == XmlPullParser.START_TAG)
                      {
                       stringBuffer.append("\nSTART_TAG: "+xpp.getName());

                       Log.i("Start:", stringBuffer.toString());
                      }
                      else if(eventType == XmlPullParser.END_TAG)
                      {
                       stringBuffer.append("\nEND_TAG: "+xpp.getName());
                       Log.i("End:", stringBuffer.toString());
                      }
                      else if(eventType == XmlPullParser.TEXT)
                      {
                       stringBuffer.append("\nTEXT: "+xpp.getText());
                       Log.i("Text:", stringBuffer.toString());
                      }
                      eventType = xpp.next();
                     }
                     stringBuffer.append("\n--- End XML ---");
                     return stringBuffer.toString();
                    } 
```

但是，我希望**输出是这样**的：

```
<?xml version="1.0" encoding="utf-8"?>
12-06 10:51:34.891: I/XML:(5026): <quiz>
12-06 10:51:34.891: I/XML:(5026):   <mchoice>
12-06 10:51:34.891: I/XML:(5026):     <question>Not a team sport for sure</question>
12-06 10:51:34.891: I/XML:(5026):   <id>1</id>
12-06 10:51:34.891: I/XML:(5026):     <option1>Cricket</option1>
12-06 10:51:34.891: I/XML:(5026):     <option2>Tennis</option2>
12-06 10:51:34.891: I/XML:(5026):     <option3>Rugby</option3>
12-06 10:51:34.891: I/XML:(5026):     <option4>Soccer</option4>
12-06 10:51:34.891: I/XML:(5026):   <answer>Tennis</answer>
12-06 10:51:34.891: I/XML:(5026):   </mchoice>
12-06 10:51:34.891: I/XML:(5026):   <mchoice>
12-06 10:51:34.891: I/XML:(5026):     <question>I am the biggest planet in the Solar System</question>
12-06 10:51:34.891: I/XML:(5026):   <id>2</id>
12-06 10:51:34.891: I/XML:(5026):     <option1>Saturn</option1>
12-06 10:51:34.891: I/XML:(5026):     <option2>Jupiter</option2>
12-06 10:51:34.891: I/XML:(5026):     <option3>Neptune</option3>
12-06 10:51:34.891: I/XML:(5026):     <option4>Pluto</option4>
12-06 10:51:34.891: I/XML:(5026):     <answer>Jupiter</answer>
12-06 10:51:34.891: I/XML:(5026):   </mchoice>
12-06 10:51:34.891: I/XML:(5026):   <mchoice>
12-06 10:51:34.891: I/XML:(5026):     <question>I am the closest star to the earth</question>
12-06 10:51:34.891: I/XML:(5026):   <id>3</id>
12-06 10:51:34.891: I/XML:(5026):     <option1>Milky way</option1>
12-06 10:51:34.891: I/XML:(5026):     <option2>Moon</option2>
12-06 10:51:34.891: I/XML:(5026):     <option3>Sun</option3>
12-06 10:51:34.891: I/XML:(5026):     <option4>North Star</option4>
12-06 10:51:34.891: I/XML:(5026):     <answer>Sun</answer>
12-06 10:51:34.891: I/XML:(5026):   </mchoice>
12-06 10:51:34.891: I/XML:(5026):   <mchoice>
12-06 10:51:34.891: I/XML:(5026):     <question>A number which is not prime</question>
12-06 10:51:34.891: I/XML:(5026):   <id>4</id>
12-06 10:51:34.891: I/XML:(5026):     <option1>31</option1>
12-06 10:51:34.891: I/XML:(5026):     <option2>61</option2>
12-06 10:51:34.891: I/XML:(5026):     <option3>71</option3>
12-06 10:51:34.891: I/XML:(5026):     <option4>91</option4>
12-06 10:51:34.891: I/XML:(5026):     <answer>91</answer>
12-06 10:51:34.891: I/XML:(5026):    </mchoice>
12-06 10:51:34.891: I/XML:(5026):   <mchoice>
12-06 10:51:34.891: I/XML:(5026):     <question>Which is correct?</question>
12-06 10:51:34.891: I/XML:(5026):   <id>5</id>
12-06 10:51:34.891: I/XML:(5026):     <option1>Foreine</option1>
12-06 10:51:34.891: I/XML:(5026):     <option2>Fariegn</option2>
12-06 10:51:34.891: I/XML:(5026):     <option3>Foreig</option3>
12-06 10:51:34.891: I/XML:(5026):     <option4>Foreign</option4>
12-06 10:51:34.891: I/XML:(5026):     <answer>Foreign</answer>
12-06 10:51:34.891: I/XML:(5026):      </mchoice>
12-06 10:51:34.891: I/XML:(5026): </quiz> 
```

我哪里错了？如果我可以将 xml 数据存储在 String 变量中，那将是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:55:31.043

尝试这个 ：

```
 int eventType = parser.getEventType();

            done = false;

            while (eventType != XmlPullParser.END_DOCUMENT && !done) {
                String name = null;
                switch (eventType) {
                case XmlPullParser.START_DOCUMENT:

                    break;

                case XmlPullParser.START_TAG:
                    name = parser.getName();

                    if (name.equalsIgnoreCase("mchoice")) {

                        // Initialize your list

                    } else if (list!= null) {

                        if (name.equals(question)) {

                            System.out.println("question : " + parser
                                    .nextText());

                        }

                        else if (name.equalsIgnoreCase("id")) {

                            System.out.println("id : " + parser
                                    .nextText());

                        }

                        else if (name.equalsIgnoreCase("option1")) {

                            System.out.println("option 1 : " + parser
                                    .nextText());

                        }

                        else if (name.equalsIgnoreCase("option2")) {

                            System.out.println("option 2 : " + parser
                                    .nextText());

                        }

                        else if (name.equalsIgnoreCase("option3")) {

                            System.out.println("option 3 : " + parser
                                    .nextText());

                        }

                        else if (name.equalsIgnoreCase("option4")) {

                            System.out.println("option 4 :" + parser
                                    .nextText());

                        }

                        else if (name.equalsIgnoreCase("answer")) {

                            System.out.println("answer :" + parser
                                    .nextText());

                        }                       
                    }

                    // -------------

                    break;

                case XmlPullParser.END_TAG:
                    name = parser.getName();
                    if (name.equalsIgnoreCase("mchoice")
                            && list != null) {  

                        // add elements in list

                    } else if (name.equalsIgnoreCase("quiz")) {

                        done = true;
                    }
                    break;
                }
                eventType = parser.next();
            } 
```

# python - 根据图案将一行拆分为多行

> ID：13743437
> 
> 赞同：0
> 
> 时间：2012-12-06T12:14:45.067
> 
> 标签：python, regex, text-parsing

我整天都在使用正则表达式将复杂的字符串解析为有意义的数据。我已经解决了几乎所有问题，但剩下最后一个问题：

我正在解析代表时间表的字符串列表。每天都是列表中的一个单独项目。有些日子一天有多个约会，比如这一行：

周二 10/13/2011 SHIFT 00:00-08:00 约会描述 DAYOFF 08:00-17:30 08:00-12:30 12:30-13:00 13:00-17:30 约会描述 NIGHT 17:30-24:00 预约说明

我希望这个字符串根据班次分成三行，但同时保持日期和日期。所有班次的共同点是它们由大写字母组成，因此 [AZ]。

预期输出为：

周二 10/13/2011 SHIFT 00:00-08:00 预约说明
周二 10/13/2011 DAYOFF 08:00-17:30 08:00-12:30 12:30-13:00 13:00-17 :30 描述
周二 10/13/2011 晚上 17:30-24:00 约会描述

我不能简单地扫描所有可能的转变，因为它们是未知的，唯一可以肯定的是它们都是大写的。因此我需要使用正则表达式。

我想到了这样的结构（regexmatch = a shift ([AZ]{5,})）：

```
placeholder = []
for day in schedule:
    newLine = []
    if day.count(regexmatch) > 1:
        newline.append(day[:2])       #To include day and date
        i = 2
        for i < len(day):
            if day[i] == regexmatch:
                placeholder.append(newLine)
                newLine = []
                newLine.append(day[:2])
                newLine.append(day[i])
            else:
                newLine.append(day[i])
        i += 1
    placeholder.append(newLine) 
```

我希望这是有道理的，有人可以帮助我实现正则表达式匹配，或者采取完全不同的路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:23:47.843

我会组织代码来*生成*约会（而不是重复附加到列表中）：

```
import re
day_re = re.compile(r'((?:Mon|Tues|Wednes|Thurs|Fri|Sat|Sun)day \d{2}/\d{2}/\d{4}) (.*)')
shift_re = re.compile(r'([A-Z]{5,} [^A-Z]*(?:[A-Z]{1,4}[^A-Z]+)*)')

def appointments(lines):
    """
    Given iterator `lines` containing one or more appointments per day,
    generate individual appointments.
    """
    for line in lines:
        day, remainder = day_re.match(line).groups()
        shifts = shift_re.findall(remainder)
        if shifts:
            for shift in shifts:
                yield '{} {}'.format(day, shift.strip())
        else:
            yield '{} {}'.format(day, remainder.strip()) 
```

# python - 如何使用 werkzeug/bottle 实现私有/公共 apikey？

> ID：13743438
> 
> 赞同：0
> 
> 时间：2012-12-06T12:14:46.620
> 
> 标签：python, rest, public-key-encryption, bottle, werkzeug

我正在使用 Bottle 开发一个 RESTful Web 服务，可能很快就会迁移到 Werkzeug。我想实现一个基于私钥/公钥对的身份验证方案，其中服务器只需要存储公共部分，而用户保留私有部分。在访问时，服务器将要求访问者使用服务器可以验证并与公钥部分相关的私钥执行操作。成功后，例如生成一个可以使用一段时间的令牌。为 Werkzeug 或 Bottle 实现类似的路径是什么？我可以使用的任何项目/示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:47:22.917

我相信，这里最好的选择是将使用密码学的责任转移到其他事情上。Web 服务器和 CA（认证机构）都很好用。

基本上，他们完全可以

1.  确保连接安全
2.  确保客户端使用由有效（例如，您的）CA 签名的证书
3.  确保证书未被吊销
4.  向您的应用程序提供您需要的唯一信息：远程方的标识符

我们使用这种机制来验证第三方支付服务（对不起，私人代码），[Redmine 也有一个插件](https://github.com/koke/redmine_ssl_auth)提供相同的客户端授权机制，我们也使用它（当然，它是 Ruby，但它也是一个有效证明可以在野外找到此类服务。）

为了使事情顺利进行，您所需要的只是

1.  配置您的 CA。
2.  配置您的网络服务器以确保它接受您的授权证书，并且只接受这些证书，并将客户端 ID 进一步传递给您的应用程序。
3.  确保您的应用程序可以从请求中提取客户端标识符。

下面是一个带有easyrsa、nginx、uWsgi和werkzeug的小例子

**配置 CA**

easyrsa 工具包是 OpenVPN 安装的一部分。可以使用 OpenSSL“原始”命令或 PyOpenSSL，但 easyrsa 至少在概念阶段很方便且适用。

```
cp -a /usr/share/doc/openvpn/examples/easy-rsa/2.0 /etc/nginx/easyrsa
cd /etc/nginx/easyrsa && source vars && ./clean-all 
```

创建 CA

```
./build-ca 
```

创建服务器证书

```
./build-key --server server 
```

创建客户端证书。

```
./build-key-pkcs12  client1 
```

在上面的示例中，您创建了客户端密钥及其相应的公共部分（证书），但良好的做法假设您签署客户端证书请求，并且无权访问机密部分。

有些服务会为您生成一对密钥+证书，然后在下载页面上写一条消息，例如“这是您下载密钥的唯一机会。我们不存储它，因此以后无法下载。”

此外，此命令会创建一个带有加密密钥和证书的 PKCS12 文件，便于导入浏览器。

**配置 nginx**

首先，我们应该创建一对“服务器证书 + ca 证书”，作为我们的 CA 自签名：

```
cat keys/server.crt keys/ca.crt > keys/server_and_ca.crt 
```

然后可以应用以下配置：

```
server {
    listen 443;

    location / {
        # Here we define the name and the contents of the WSGI variable to pass to service
        uwsgi_param SSL_CLIENT_ID $ssl_client_s_dn;
        include uwsgi_params;
        uwsgi_pass 127.0.0.1:5000;
    }

    # SSL support
    ssl                 on;
    ssl_protocols       SSLv3 TLSv1;
    ssl_certificate     easyrsa/keys/ca_and_server.crt;
    ssl_certificate_key easyrsa/keys/server.key;

    # We don't accept anyone without correct client certificate
    ssl_verify_client on;
    # The CA we use to verify client certificates
    ssl_client_certificate easyrsa/keys/ca.crt;
} 
```

有关配置选项的更多信息，请参见[此处](http://wiki.nginx.org/HttpSslModule)和[此处](http://wiki.nginx.org/HttpUwsgiModule)。

确保您对 /etc/nginx/easyrsa 目录具有正确的权限，并且只有 root 和 nginx 可以访问密钥。

**编写 Werkzeug 应用程序**

python部分是微不足道的。只需从 WSGI 环境中读取变量 SSL_CLIENT_ID。

文件中示例应用程序的内容`sample.py`

```
from werkzeug.wrappers import Response

def application(environ, start_response):
    text = 'Hello, your certificate id is %s\n' % environ.get('SSL_CLIENT_ID', '(unknown)')
    response = Response(text, mimetype='text/plain')
    return response(environ, start_response) 
```

使用 uwsgi 服务器启动服务：`uwsgi -w sample:application --socket 127.0.0.1:5000`

**测试您的安装**

用 curl 很容易测试

```
$ curl --cert keys/client1.crt --key keys/client1.key --cacert keys/ca.crt https://localhost/
Hello, your certificate id is /C=US/ST=CA/L=SanFrancisco/O=Fort-Funston/OU=changeme/CN=client1/name=changeme/emailAddress=mail@host.domain 
```

# maven - WSDL2JAVA 无法在 Maven 中设置 extraarg

> ID：13743445
> 
> 赞同：1
> 
> 时间：2012-12-06T12:15:05.683
> 
> 标签：maven, ant, wsdl, migration, wsdl2java

我进行了从 Ant 到 Maven 项目的迁移，但我遇到的问题让我很困惑：

1.  在我的 Ant bild.xml 中，我在 wsdl2java tasc 中有以下参数：

    ```
     <arg value="-ns2p" />
        <arg value="${wsdl-ns-binding}" /> 
    ```

    我想在我的 pom.xml 中做同样的事情。但是没用！！不管我怎么尝试..我做错了什么？？？这里是 WSDL2Java 插件定义的例子：

    ```
     <plugin>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-wsdl2code-maven-plugin</artifactId>
            <version>1.6.2</version>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>wsdl2code</goal>
                    </goals>
                    <configuration>
                        <packageName>ru.domain.ws.services.persistence.etb.mortgage.axis2.jaxb.server</packageName>
                        <wsdlFile>${wsdl-home}/ETB_MortgagePersistence.wsdl</wsdlFile>
                        <outputDirectory>${basedir}/src/main/generated</outputDirectory>        
                        <flattenFiles>true</flattenFiles>
                        <databindingName>jaxbri</databindingName>
                        <overWrite>true</overWrite> 
                <!--    <namespaceToPackage> 
                            http://ws.domain.ru/persistence/ETB/mortgage/wsdl=ru.domain.ws.services.persistence.etb.mortgage.wsdl
                        </namespaceToPackage> -->

                        <wsdlOptions>
                            <wsdlOption>
                                 <extraargs>
                                    <extraarg>-ns2p</extraarg>
                                    <extraarg>http://ws.domain.ru/persistence/ETB/mortgage/wsdl=ru.domain.ws.services.persistence.etb.mortgage.wsdl</extraarg>  
                                 </extraargs>                                
                            </wsdlOption>
                        </wsdlOptions>

                        <options>
                            <property>
                                <name>bindingFileName</name>
                                <value>${jaxb-binding-path}</value>
                            </property>
                        </options> 

                    </configuration>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.apache.axis2</groupId>
                    <artifactId>axis2-jaxbri</artifactId>
                    <version>1.6.2</version>
                </dependency>
            </dependencies>
        </plugin> 
    ```

${wsdl-ns-binding} 变量是[http://ws.domain.ru/persistence/ETB/mortgage/wsdl=ru.domain.ws.services.persistence.etb.mortgage.wsdl](http://ws.domain.ru/persistence/ETB/mortgage/wsdl=ru.domain.ws.services.persistence.etb.mortgage.wsdl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:57:12.557

Try this layout (specifying the wsdl file inside the wsdlOptions)

```
<plugin>
    <groupId>org.apache.axis2</groupId>
    <artifactId>axis2-wsdl2code-maven-plugin</artifactId>
        <version>1.6.2</version>
    <executions>
        <execution>
            <id>generate-sources</id>
            <phase>generate-sources</phase>
            <configuration>
                <sourceRoot>${basedir}/src/main/java</sourceRoot>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>${wsdl-home}/ETB_MortgagePersistence.wsdl</wsdl>
                        <extraargs>  
                            <extraarg>-ns2p</extraarg>  
                            <extraarg>http://ws.domain.ru/persistence/ETB/mortgage/wsdl=ru.domain.ws.services.persistence.etb.mortgage.wsdl</extraarg>
                        </extraargs>
                    </wsdlOption>
                </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

# timer - Stellaris Launchpad、lm4f120h5qr、定时器未按预期运行，可以倒计时但不能倒计时

> ID：13743450
> 
> 赞同：1
> 
> 时间：2012-12-06T12:15:39.630
> 
> 标签：timer, arm

我决定不使用提供的 Stellarisware 功能，并试图弄清楚如何让我的 Timer 工作。此时，我要做的就是让 Timer0 A 计数到指定值（存储在 TIMER0_TAILR_R 中）。

现在的程序将从指定值开始倒计时（通过使 TIMER0_TAMR_R |= 0x1），但在向上计数模式下，无论 TIMER0_TAILR_R 中存储的值如何，指定的 LED 都会以恒定速率（缓慢）闪烁。

```
#include "lm4f120h5qr.h"

int main(void){
    SYSCTL_RCGCGPIO_R |= 0x20; // clock gate to port F
    GPIO_PORTF_DIR_R |= 0x7 << 1; // Set Led's as outputs
    GPIO_PORTF_DEN_R |= 0x7 << 1;// for LED's

    GPIO_PORTF_DEN_R |= 0x1; // For timer
    GPIO_PORTF_PCTL_R |= 0x7; //select T0CCP0
    SYSCTL_RCGC1_R |= 0x1 << 16; 
    SYSCTL_RCGCTIMER_R |= 0x1;

    TIMER0_CTL_R = 0;
    TIMER0_CFG_R  = 0;
    TIMER0_CFG_R  |= 0x4;
    TIMER0_TAMR_R |= 0x11; // set mode
    TIMER0_TAPR_R |= 0xF; // prescale
    TIMER0_TAILR_R = 0x1F1; // load value

    while(1){
        GPIO_PORTF_DATA_R |= 0x1 << 2;
        TIMER0_CTL_R |= 0x1;
        while(TIMER0_CTL_R & 0x1);
        GPIO_PORTF_DATA_R &= ~(0x1 << 2);
        TIMER0_CTL_R |= 0x1;
        while(TIMER0_CTL_R & 0x1);

    }
} 
```

据我所知，我已经正确初始化了 Timer 并且做的一切都正确（显然这是不正确的）。非常感谢任何关于我哪里出错的帮助，因为我已经为此绞尽脑汁了很长一段时间并且找不到解决方案。干杯，卢克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:10:12.020

根据数据表 11.3 (p660)，上下计数的代码：

```
 #include "lm4f120h5qr.h"

    int main(void) {
        SYSCTL_RCGCGPIO_R |= 0x20; // clock gate to port F
        GPIO_PORTF_DIR_R |= 0x7 << 1; // Set Led's as outputs
        GPIO_PORTF_DEN_R |= 0x7 << 1; // for LED's

        GPIO_PORTF_DEN_R |= 0x1; // For timer
        GPIO_PORTF_PCTL_R |= 0x7; //select T0CCP0
        SYSCTL_RCGC1_R |= 0x1 << 16;
        SYSCTL_RCGCTIMER_R |= 0x1;

        TIMER0_CTL_R = 0;
        TIMER0_CFG_R = 0;
        TIMER0_CFG_R |= 0x4;

        // up
        TIMER0_TAMR_R = 0x11; // set mode
        TIMER0_TAPR_R = 0xF00; // prescale

        // down
        //TIMER0_TAMR_R = 0x1; // set mode
        //TIMER0_TAPR_R = 0x0F; // prescale

        TIMER0_TAILR_R = 0x1F1; // load value

        while (1) {
            GPIO_PORTF_DATA_R |= 0x1 << 2;
            TIMER0_CTL_R |= 0x1;
            while (TIMER0_CTL_R & 0x1)
                ;
            GPIO_PORTF_DATA_R &= ~(0x1 << 2);
            TIMER0_CTL_R |= 0x1;
            while (TIMER0_CTL_R & 0x1)
                ;

        }
    } 
```

# c# - XNA - 更新方法与绘制方法

> ID：13743454
> 
> 赞同：2
> 
> 时间：2012-12-06T12:15:58.823
> 
> 标签：c#, windows-phone-7, xna, xna-4.0, game-loop

我很想知道，如果我将所有精灵动画/运动逻辑放在 Draw 方法中而不是 Update 方法中，而 update 方法只是管理触摸和其他事件。1) 游戏动画/逻辑性能有什么问题吗？
2) 游戏画面会不会像预期的那样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T12:42:52.960

draw 和 update 方法之间基本上有一个很大的区别。draw 方法随着机器的性能循环运行，因此如果计算机速度较慢，如果计算机性能低，您可能会每秒获得 30 个循环。这也意味着周期不是固定的，因此前一秒您可能会从 draw 方法中获得 30 个周期，而下一次您可能会获得 40 个周期。

更新方法有固定的周期数，所以这意味着游戏不会因为电脑慢而变慢。

把精灵动画逻辑放在draw方法里面是没有问题的。这只是意味着动画将以机器可以处理的速度运行。但是，如果动画直接影响游戏中的其他逻辑，我建议将代码放在更新线程中。

# wpf - 依赖属性在设计时有效，但在运行时无效。为什么？

> ID：13743455
> 
> 赞同：0
> 
> 时间：2012-12-06T12:16:03.083
> 
> 标签：wpf, dependency-properties

我创建了一个显示数字键盘的自定义控件。该控件有一个依赖属性 ( **ButtonWidth** )，它设置数字键盘中所有键的键大小。当属性更改时，所有子按钮都会被枚举，并且它们的 Height 和 Width 属性也会更新。

在设计时，这工作正常。我可以更改属性，数字键盘显示也会相应更改。

但是在运行时会创建数字键盘，但不会更新按钮宽度。我添加了一个在 Click 事件中设置宽度的按钮，这很有效。

```
public static readonly DependencyProperty ButtonWidthProperty =
     DependencyProperty.Register("ButtonWidth", 
        typeof(int),
        typeof(VirtualKeyboard), 
        new FrameworkPropertyMetadata(40,
            FrameworkPropertyMetadataOptions.AffectsArrange |
            FrameworkPropertyMetadataOptions.AffectsMeasure |
            FrameworkPropertyMetadataOptions.AffectsRender |
            FrameworkPropertyMetadataOptions.AffectsParentMeasure |
            FrameworkPropertyMetadataOptions.AffectsParentArrange,
        OnButtonWidthPropertyChanged, OnCoerceButtonWidthProperty),
        OnValidateButtonWidthProperty);

public int ButtonWidth
{
    get { return (int)GetValue(ButtonWidthProperty); }
    set { SetValue(ButtonWidthProperty, value); }
}

private static void OnButtonWidthPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
{
    Console.WriteLine("VK width");
    VirtualKeyboard control = source as VirtualKeyboard;
    int newVal = (int)e.NewValue;
    control.UpdateButtons();
}

private static object OnCoerceButtonWidthProperty(DependencyObject sender, object data)
{
    return data;
}

private static bool OnValidateButtonWidthProperty(object data)
{
    return data is int;
}

public VirtualKeyboard()
{
    Console.WriteLine("VK constr");
    InitializeComponent();
}

protected override void OnInitialized(EventArgs e)
{
    base.OnInitialized(e);
    isCaps = true;
    SetKeys();
    UpdateButtons();  // this is where the current ButtonWidth property 
                      // is read and the button width set
}

private void UpdateButtons()
{
    Console.WriteLine("VK bw=" + ButtonWidth);

    foreach (Button button in FindVisualChildren<Button>(this))
    {
        button.Width = button.Height = ButtonWidth;
    }
} 
```

我注意到的是，如果我还设置了按钮的 Content 属性，这似乎会强制重新布局控件。

我在这里做错了什么？为什么它在设计时有效，但在运行时无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:30:11.550

尝试在加载自定义控件后更新按钮，即在`Width`事件中....而不是在 OnInitialized....因为您需要等待应用模板和创建按钮并在您的视觉树中。`Height``Loaded`

# php - 如何在不使用 AJAX 或任何东西的情况下单击复选框调用 php 函数

> ID：13743457
> 
> 赞同：-3
> 
> 时间：2012-12-06T12:16:06.893
> 
> 标签：php, html

我在 PHP 的 echo"" 中拥有的普通“复选框”输入“表单”

```
<input type='checkBox' onclick='if(this.checked) {selectItem(".$row['serial_no'].",".$user_id.")}'>

function selectItem($serial_no,$user_id){echo $serial_no;} 
```

它们都在 PHP 文件中....为什么单击复选框时不调用该函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:19:00.603

因为 PHP 只在页面加载时运行，而不是之后。这就是为什么您需要使用 Ajax 从 PHP 中获取值的原因

# android - FragmentActivity 上的 OnItemClickListener listView 不起作用

> ID：13743461
> 
> 赞同：0
> 
> 时间：2012-12-06T12:16:17.900
> 
> 标签：android, listview, onitemclicklistener, onitemclick

这个问题让我发疯....

我有一个 FragmentActivity。在里面我有一个 listView 我列出了一些客户。我需要在列表中单击进行操作。但是 OnItemClickListener 没有被触发。我不知道为什么。我尝试了我查看的所有解决方案，但都不起作用......

```
 public class MainActivity extends FragmentActivity implements OnQueryTextListener, LoaderManager.LoaderCallbacks<Cursor>, SimpleCursorAdapter.ViewBinder, OnItemClickListener{

   @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.main);

    listActivos = getListView();

    cursorFiltroAutocomplete = Client.listActiveClients(this);

    cursorAdapter = new SimpleCursorAdapter(this, 
            R.layout.client_row,
            cursorFiltroAutocomplete,
            new String[]{Client.NAME,Client.ACCOUNT,Client.ICON,Client.PHOTO,Client.DATEINI,Client.DATEFIN},
            new int[]{R.id.nameClient,/*R.id.accountClient*/R.id.star,R.id.photo,R.id.dateIni,R.id.dateFim}
    );
   listActivos.setAdapter(cursorAdapter);
   cursorAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {   
        @Override
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
            switch (view.getId()){
            case R.id.nameClient:
                TextView tv = (TextView)view;
                tv.setText(cursor.getString(columnIndex));
                return true;
            //case R.id.accountClient:
            //  return true;
            case R.id.star:
                star = cursor.getInt(cursor.getColumnIndex(Client.ICON));
                tbFavorite = (ToggleButton)view;
                if(star==1)
                    tbFavorite.setChecked(true);
                else
                    tbFavorite.setChecked(false);               
                return true;        
            case R.id.photo:
                byte[] bb = cursor.getBlob(cursor.getColumnIndex(Client.PHOTO));
                ImageView myImage = (ImageView)view;
                if (bb != null) {
                    myImage.setImageBitmap(BitmapFactory.decodeByteArray(bb, 0, bb.length));
                } else {
                    Bitmap bm = null;
                    try  {
                    bm = getBitmapFromAsset("contact_userUpdate.png");
                    } catch (IOException ex){ex.printStackTrace();}
                    if ( bm != null)
                        myImage.setImageBitmap(bm);
                    else 
                        Log.w(MainActivity.class.getName(), "ICON IS NULL");        
                  }
                return true;
            case R.id.dateIni:
                dateIni = cursor.getString(cursor.getColumnIndex(Client.DATEINI));
                TextView dateI = (TextView)view.findViewById(R.id.dateIni);
                dateI.setText(dateIni);
                return true;
            case R.id.dateFim:
                dateFim = cursor.getString(cursor.getColumnIndex(Client.DATEFIN));
                TextView dateF = (TextView)view.findViewById(R.id.dateFim);
                dateF.setText(dateFim);
                return true;
            }
            return false;
        }
    });
     registerForContextMenu(listActivos); 
     listActivos.setClickable(true);
     listActivos.setOnItemClickListener(this);
     getSupportLoaderManager().initLoader(0, null, this);
   }  

   /*********************************Function to get ListView************************/
   private ListView getListView() {
    return (ListView)findViewById(android.R.id.list);
}  

   /*********************************Function onItemClick*****************************/

   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    Log.w(MainActivity.class.getName(), "ITEM CLICADO");

}

 /******************************XML with the row of the List************************/
   <?xml version="1.0" encoding="utf-8"?>

 <TableRow xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:background="@android:drawable/list_selector_background"
     android:gravity="fill_horizontal"
     android:longClickable="true"
     android:clickable="true"
     android:minHeight="?android:attr/listPreferredItemHeight"
     android:paddingBottom="8dip"
     android:paddingTop="5dip">

  <ImageView
      android:id="@+id/photo"
      android:layout_width="70dp"
      android:layout_height="70dp"
      android:layout_marginLeft="20dp"
      android:layout_marginRight="10dp"
      android:scaleType="fitXY"
      android:src="@drawable/contact_user"
      android:focusable="false"
      android:clickable="false" />

  <LinearLayout
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_gravity="fill_horizontal"
      android:layout_marginLeft="10dp"
      android:layout_marginRight="10dp"
      android:layout_weight="1"
      android:gravity="fill"
      android:orientation="vertical">

    <TextView
        android:id="@+id/nameClient"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#ffffff"
        android:textAppearance="?android:attr/textAppearanceMedium" 
        android:minLines="1"
        android:maxLines="1"
        android:focusable="false"
        android:clickable="false"/>
    <LinearLayout
        android:layout_width="match_parent" 
        android:layout_height="wrap_content" 
        android:layout_gravity="fill_horizontal"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_weight="1"
        android:gravity="fill" 
        android:orientation="horizontal">

        <TextView android:id="@+id/dateIni"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/dateIni"
                  android:textColor="#59df8f"
                  android:textAppearance="?android:attr/textAppearanceMedium"
                  android:minLines="1"
                  android:maxLines="1"
                  android:focusable="false"
                  android:clickable="false" />

        <TextView android:id="@+id/dateFim"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/dateFim"
                  android:textColor="#ff3100"
                  android:textAppearance="?android:attr/textAppearanceMedium"
                  android:minLines="1"
                  android:maxLines="1"
                  android:focusable="false"
                  android:clickable="false"/>
      </LinearLayout>           
  </LinearLayout>
        <ToggleButton
            android:id="@+id/star"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="20dp"
            android:background="@drawable/list_star_selector"
            android:focusable="false"
            android:clickable="false"/>
     </TableRow>

   /******************************XML with the list View******************************/
     <?xml version="1.0" encoding="utf-8"?>

   <LinearLayout 
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:background="@drawable/background_tile"
     android:orientation="vertical" >

  <ListView 
      android:id="@+id/@android:id/list"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:clickable="true"
      />
   </LinearLayout> 
```

有人有想法吗？我把列表中的项目“android:focusable="false" 但不起作用。我把 android:descendantFocusability="beforeDescendants" 但结果是一样的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:18:01.197

删除`listActivos.setClickable(true);`,`android:descendantFocusability="beforeDescendants"`和

```
android:focusable="false"
android:clickable="false" 
```

从所有的观点。它们对实现你想要的毫无用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:30:17.803

在 TableRow 上设置 focusable=false 试试看：

```
 <TableRow xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:background="@android:drawable/list_selector_background"
         android:gravity="fill_horizontal"
         android:longClickable="true"
         android:clickable="true"
         android:minHeight="?android:attr/listPreferredItemHeight"
         android:paddingBottom="8dip"
         android:focusable="false"      // try this
         android:paddingTop="5dip"> 
```

# android - 将自定义变量添加到 libGoogleAnalyticsV2.jar

> ID：13743466
> 
> 赞同：0
> 
> 时间：2012-12-06T12:16:25.423
> 
> 标签：android, google-analytics, google-analytics-api

如何在 libGoogleAnalyticsV2.jar 中使用自定义变量？我刚刚添加了新的谷歌应用跟踪库（libGoogleAnalyticsV2.jar），任何示例。新库中缺少自定义变量类接缝。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:02:42.880

根据 Google 的文档，目前 V2 不支持自定义变量。

[https://developers.google.com/analytics/devguides/collection/android/v2/migration](https://developers.google.com/analytics/devguides/collection/android/v2/migration)

> 版本 2 目前不支持自定义变量，应删除对 setCustomVar() 的调用。

# git - 为什么我不能推送我的新分支？

> ID：13743468
> 
> 赞同：13
> 
> 时间：2012-12-06T12:16:33.363
> 
> 标签：git, github, git-branch

我创建了一个新分支，检查并提交：

```
git branch my-branch [HASH]
git checkout my-branch
git commit -am "Add some stuff to my new branch" 
```

但是，我无法将其推送到 github。`git push origin my-branch`返回：

```
error: src refspec branch does not match any.
error: failed to push some refs to 'https://github.com/Me/my-project.git' 
```

`git show-refs`看起来像这样：

```
[HASH] refs/heads/my-branch
[HASH] refs/heads/master
[HASH] refs/heads/some-branch
[HASH] refs/remotes/origin/master
[HASH] refs/remotes/origin/some-branch
[HASH] refs/stash 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T14:00:23.367

这是您将执行的命令以将所有更改从本地分支（“my-branch”）推送到 GitHub 存储库上的“my-branch”分支：

```
git push -u origin my-branch 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T13:36:00.017

该分支在 github 上不存在，当您推送时 git 检查您的分支的原始引用并没有找到它。

将分支添加为远程分支：

**混帐 1.8.x**

```
git branch -u origin/my-branch my-branch 
```

**混帐 1.7.x**

```
git branch --set-upstream my-branch origin/my-branch 
```

现在可以推了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:24:34.363

命令行解析出错。正如您在此消息中看到的：

```
error: src refspec branch does not match any. 
```

git 尝试推送一个名为 的分支`branch`，而不是`my-branch`. 您正在运行什么操作系统/外壳？也许试试

```
git push origin "my-branch" 
```

# excel - Excel - 根据特定单元格值选择数据行

> ID：13743470
> 
> 赞同：0
> 
> 时间：2012-12-06T12:16:33.717
> 
> 标签：excel

我对 Excel 不是很好，我正在尝试根据预定义的单元格值选择特定的数据行。

我正在尝试查询每日数据文件，以便填充概览页面以进行快速数据挖掘。用户将通过在单元格中输入值来选择报告年份和周，然后这将返回该周的相关数据，然后将其分解。

如果我正在运行 SQL 查询，它看起来像：

```
SELECT * from sales
were Period = 'Yr:2012 Wk:051'
End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:15:14.380

假设您有一个 Period 列，其中每个期间仅出现一次，您可以使用`VLOOKUP`公式检索销售值（如果 Period 是在 Sales 列之后`INDEX/MATCH`，请改用，有关详细信息，请参阅[此处](http://www.randomwok.com/excel/how-to-use-index-match/)。）

但是，如果您在该期间有多行，您可以使用该期间聚合该期间的销售额`SUMIFS`- 或者您使用数据透视表聚合整个销售额（将期间放在类别中，将销售额放在值字段中）并使用`GETPIVOTDATA`公式。要轻松构建 GETPIVOTDATA 公式，只需开始输入 = 并从数据透视表中选择任何值单元格。Excel 将填充公式，您只需替换期间的参数...

# android - Android：如何检查是否启用了 3G？

> ID：13743477
> 
> 赞同：2
> 
> 时间：2012-12-06T12:17:00.417
> 
> 标签：android, settings, 3g

我需要知道设备上是否允许 3G 连接。我不想知道当前的网络状态是什么，因为如果您将“移动网络设置”屏幕中的“网络模式”设置为“自动”，网络状态可能是 2G 或 3G。我只想知道那里选择了哪个设置 - 2G、3G 或自动（后两个对我来说意味着相同）。

两者`telephonyManager.getNetworkType()`和`ConnectivityManage.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState()`

正在返回当前网络状态，这可能会将我引向错误的方向，因为如果当前状态为 2G，则可能意味着 3G 已禁用或仅在特定位置不可用 3G 模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:56:43.133

*在 LG GT540 手机上测试后更新：*

您可以使用`Settings.Secure`读取首选网络模式，如以下代码所示：

```
ContentResolver cr = getContentResolver();
int value = Secure.getInt(cr, "preferred_network_mode"); 
```

在我的带有 CM 7.1 固件的 LG GT540 上，我有四个选项：

*   GSM/WCDM（自动）- 上面的代码返回**3**
*   仅限 WCDMA - 上面的代码返回**2**
*   仅限 GSM - 上面的代码返回**1**
*   GMS/WCDMA（首选 WCMDA）- 上面的代码返回**0**

当然，GSM是2G，WCDMA是3G。请注意，这不会为您提供有关当前处于活动状态的连接的信息（前提是您都允许）。为此，请参阅@VikashKLumar 的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:26:56.337

您可以使用检查 3G

```
boolean is3G3 = (telephonyManager.getNetworkType() == TelephonyManager.NETWORK_TYPE_HSUPA);
boolean is3G2 = (telephonyManager.getNetworkType() == TelephonyManager.NETWORK_TYPE_HSPA);
boolean is3G = (telephonyManager.getNetworkType() == TelephonyManager.NETWORK_TYPE_HSDPA); 
```

这些网络是 3G 网络。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T08:48:29.193

直接拨×#×#4636#×#×进入手机信息看看有没有GSM只有你的手机不支持3G，如果是WCDMA的话你的手机可以使用3G

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T12:22:44.113

```
/**
 * Checks if we have a valid Internet Connection on the device.
 * @param ctx
 * @return True if device has internet
 *
 * Code from: http://www.androidsnippets.org/snippets/131/
 */
public static boolean haveInternet(Context ctx) {

    NetworkInfo info = (NetworkInfo) ((ConnectivityManager) ctx
            .getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null || !info.isConnected()) {
        return false;
    }
    if (info.isRoaming()) {
        // here is the roaming option you can change it if you want to
        // disable internet while roaming, just return false
        return false;
    }
    return true;
}
You also need

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
in AndroidMainfest.xml 
```

# java - 对通用集合进行排序

> ID：13743478
> 
> 赞同：2
> 
> 时间：2012-12-06T12:17:02.740
> 
> 标签：java, generics, sorting, collections

我搜索但找不到关于如何对我自己的通用集合类进行排序的任何答案。

我有这四个类：

**第二次编辑** 简化代码，应用了 Evgeniy 的建议，但仍然没有排序，连线：\

轨道类：

```
public class Track {
    private Integer id;
    private String interpreter;
    private String title;
    Track(int id,String interpreter,String title) {
        this.id=id;
        this.interpreter=interpreter;
        this.title=title;
    }
    public String getInterpreter() {
        return this.interpreter;
    }
    public String getTitle() {
        return this.title;
    }
    public int getID() {
        return this.id;
    }
    public String getCompleteName() {
        return this.id+"\t"+this.interpreter.toString()+" - "+this.title.toString();
    }
} 
```

一个 TrackContainer 类：

```
import java.util.ArrayList;
import java.util.Iterator;

public class TrackContainer<T> extends ArrayList<T> {
    private static final long serialVersionUID = 1L;
    ArrayList<T> arraylist;

    TrackContainer() {
        arraylist = new ArrayList<T>();
    }

    public boolean insertTrack(T track) {
        if(arraylist.add(track)) 
            return true;
        return false;
    }
    public void listAllTracks(java.util.Iterator<T> iterat) {
        while(iterat.hasNext()) {
            System.out.println(iterat.next());
        }
    }

    public Iterator<T> iterator() {
        // TODO Auto-generated method stub
        return arraylist.iterator();
    }
} 
```

TrackIDComparator 类：

```
import java.util.Comparator;
public class TrackIDComparator implements Comparator<Track> {
    @Override
    public int compare(Track t1, Track t2) {
        // TODO Auto-generated method stub
        Comparable id1 = (Comparable)(t1.getID());
        Comparable id2 = (Comparable)(t2.getID());
        return id1.compareTo(id2);
    }
} 
```

最后是 Main 类：

```
import java.util.Collections;
import java.util.Iterator;
public class Main {
    public static void main(String[] args) {
        TrackContainer<Track> ltc = new TrackContainer<Track>();
        ltc.insertTrack(new Track(2,"trackname1","tracktitle1"));
        ltc.insertTrack(new Track(1,"trackname2","tracktitle2"));
        ltc.insertTrack(new Track(3,"trackname3","tracktitle3"));

        System.out.println("unsorted:");
        Iterator<Track> it = ltc.iterator();
        while(it.hasNext()) {
            System.out.println(it.next().getCompleteName());
        }

        System.out.println("sorted:");
        Collections.sort(ltc,new TrackIDComparator());
        Iterator<Track> it2 = ltc.iterator();
        while(it2.hasNext()) {
            System.out.println(it2.next().getCompleteName());
        }
    }
} 
```

输出：

```
未分类：
2 曲目名称 1 - 曲目标题 1
1 曲目名称 2 - 曲目标题 2
3 曲目名称 3 - 曲目标题 3
排序：
2 曲目名称 1 - 曲目标题 1
1 曲目名称 2 - 曲目标题 2
3 曲目名称 3 - 曲目标题 3

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:29:34.273

只需将 sort() 方法添加到 TrackContainer

```
public void sort()  {
    Collections.sort(arraylist, new TrackIDComparator()); 
} 
```

更新

目前尚不清楚为什么 Track 是通用的以及为什么是 T id；T口译员；标题；应该有相同的类型。我建议修改设计。反正，

```
class TrackIDComparator 

     public int compare(Track<T> o1, Track<T> o2) {
           if(o1.getID().hashCode() > o2.getID().hashCode())
               return 1;
... 
```

不正确，改成

```
public int compare(Track<T> o1, Track<T> o2) {
      Comparable id1 = (Comparable)(o1.getId());
      Comparable id2 = (Comparable)(o2.getId());
      return id1.compareTo(id2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:30:44.747

简单的方法是更改​​ TrackContainer

`public class TrackContainer<T> extends ArrayList<Track<T>>`

删除`arraylist`成员变量并`this`在任何覆盖的方法中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:22:28.763

`TrackContainer<T>`不是`List`- 如果你想[`Collections.sort(List,Comparator)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)在它上面使用，你应该做它`implements List<T>`（当然，实现所有接口方法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:24:07.687

`TrackContainer`不是 a `List`，所以你不能使用`Collections.sort(List<T>, Comparator<? super T> c)`方法。

或者，您想对`TrackContainer.arrayList`字段进行排序，因此我建议添加一个接受 a 的排序方法`Comparator<Track<T>>`在内部进行排序。

此外，您希望`new TrackIDComparator<String>()`在绑定`Track`到类型时执行此操作。

# javascript - 在无序列表中定位项目

> ID：13743482
> 
> 赞同：0
> 
> 时间：2012-12-06T12:17:24.650
> 
> 标签：javascript, css, css-float, floating

我有一个[演示](http://www.olmasigereken.com/demo2/)。我想像图中一样左对齐红色[箭头](http://i.stack.imgur.com/h4Rkj.jpg)。但我不知道我该怎么做。顺便说一句，来自 javascript 方面的红色箭头。

```
 function ytplayer_render_playlist( )
  {
    var arrOfListNodes = Array.prototype.filter.call(document.getElementById('mylist').childNodes, function (e) {return e.tagName === 'LI';});
    for ( var i = 0; i < ytplayer_playlist.length; i++ )
    {   
      var img = document.createElement( "img" );
      img.src = "track_arrow.gif";
      var a = document.createElement( "a" );
      a.href = "#ytplayer";
      a.onclick = (
        function( j )
        {
          return function( )
          {
            ytplayer_playitem = j;
            ytplayer_playlazy( 0 );
          };
        }
      )( i );
      a.appendChild( img );
      arrOfListNodes[i].insertBefore(a, arrOfListNodes[i].firstChild);
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:20:14.210

**定义** `.ikinciSol ul li a` `float:left;`

在你的CSS中像这样

```
.ikinciSol ul li a{
float:left;
} 
```

结果

![在此处输入图像描述](../Images/3ec4049face2faae9f63dd48c8c870c5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:22:45.907

您可以尝试另一种方法，使用`::before`选择器。

像这样：

```
artist_track::before {
  background-image: url(http://www.olmasigereken.com/demo2/track_arrow.gif);
  background-repeat: no-repeat;
} 
```

# c# - EF，代码优先 - 如何在插入时设置自定义 Guid 标识值

> ID：13743483
> 
> 赞同：12
> 
> 时间：2012-12-06T12:17:30.617
> 
> 标签：c#, entity-framework, .net-4.0

**在处理以Guid**作为主键的数据库中插入新实体时，我面临以下问题- **EF 5 和代码优先**方法。

我知道有很多类似的主题，因为我为这个问题徘徊了几个小时，但我找不到这个问题的主题。

例如，我的 POCO 课程是：

```
public class EntityRole : IAdminModel
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid Id { get; set; }

    [Required]
    [MaxLength(50)]
    public string Name { get; set; }

    [Required]
    [Display(Name = "Role code")]
    [MaxLength(20)]
    public string RoleCode { get; set; }

    [Display(Name = "Entities Assigned")]
    [InverseProperty("Role")]
    public List<Entity> Entities { get; set; }
} 
```

*RoleCode 和 Name 只是文本数据，可以在管理面板中编辑，所以不要考虑这些字段名称。*

添加新实体时，我不指定主键值。到目前为止一切顺利，这里一切正常。作为需要值并具有自动生成值的主键字段，它应该不总是指定 Id，但是如果我设置了一个值，则应该保留它（如果启用了身份插入）。

但在某些情况下，我想指定一个主键值，例如用于我的数据库的初始种子值。我需要它以供以后处理 - 可以说我需要那个特定的 Guid 在那里。因此，如果我在我的配置类中有：

```
// Initial data seed
protected override void Seed(WebPortalDbContext context)
{
    context.MenuItems.AddOrUpdate(
        m => m.Id,
        new EntityRole {Id = new Guid("268bf332-910e-4ea1-92f8-1ac0611f4c62"), Name = "Some name", RoleCode = "SN"},
    );
} 
```

即使我进行常规添加，Guid 键设置也不起作用：

```
using (var context = new MyDBContext())
{
    context.MenuItems.Add(
        new Entity() {Id = new Guid("<some guid>"), Name = "fooname" /*some other values*/}
    );

    context.SaveChanges();
} 
```

我在 SQL Server 跟踪中拥有的是：

```
exec sp_executesql N'declare @generated_keys table([Id] uniqueidentifier)
insert [dbo].[EntityRoles]([Name], [RoleCode])
output inserted.[Id] into @generated_keys
values (@0, @1)
select t.[Id]
from @generated_keys as g join [dbo].[EntityRoles] as t on g.[Id] = t.[Id]
where @@ROWCOUNT > 0',N'@0 nvarchar(50),@1 nvarchar(20)',@0=N'Chief Captain',@1=N'CO1' 
```

这里很明显，新的 Guid 值只是没有从 EF SQL 生成器发送到 SQL Server，所以问题出在 EF 中。

所以我删除了**DatabaseGeneratedOption.Identity**属性，然后就可以了，但是我丢失了 Id 键的自动生成，这对我不起作用，因为这种情况非常罕见。

**我目前唯一的解决方案：**

我最终是覆盖了 DBContext 的 SaveChanges() 方法并修改了所有要添加状态的实体（我从[这里](https://stackoverflow.com/questions/12012736/entity-framework-code-first-using-guid-as-identity-with-another-identity-column)得到了这个想法）：

```
/// <summary> Custom processing when saving entities in changetracker </summary>
public override int SaveChanges()
{
    // recommended to explicitly set New Guid for appropriate entities -- http://msdn.microsoft.com/en-us/library/dd283139.aspx
    foreach (var entry in ChangeTracker.Entries().Where(e => e.State == EntityState.Added))
    {
        var t = entry.Entity.GetType();
        if (t.GetProperty("Id") == null)
            continue;

        var info = t.GetProperty("Id").GetCustomAttributes(typeof (DatabaseGeneratedAttribute), true).Cast<DatabaseGeneratedAttribute>();
        if (!info.Any() || info.Single().DatabaseGeneratedOption != DatabaseGeneratedOption.Identity)
        {
            if (t.GetProperty("Id").PropertyType == typeof(Guid) && (Guid)t.GetProperty("Id").GetValue(entry.Entity, null) == Guid.Empty)
                t.GetProperty("Id").SetValue(entry.Entity, Guid.NewGuid(), null);
        }
    }
    return base.SaveChanges();
} 
```

与此相结合，应删除所有**DatabaseGeneratedOption 。**所有模型都有名为“Id”的主键，遵循命名约定的最佳实践主题之一。

但这看起来不是很优雅的工作，因为我认为 EF5 应该能够处理这种情况。如果身份插入打开，它适用于 Int 身份。

那么有人知道如何更好地解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:16:20.357

由于它是 GUID，因此您执行此操作的简单方法是在您的类中有一个构造函数，例如

```
public EntityRole()
{
   Id = Guid.NewGuid();
} 
```

并删除数据库生成的选项或将其更改为 DatabaseGeneratedOption.None。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T23:53:36.417

您可以将 Id 标记为虚拟属性。因此，在您创建假数据的项目中，您可以拥有带有覆盖 Id 的内部 EntityRole，在这里您可以删除 DatabaseGeneratedOption.Identity 属性或在 DatabaseGeneratedOption.None 上更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-10T02:57:11.540

Visual Studio 2017、C#、EntityFramework v6.0 允许您通过在创建时通过控制器传递值来覆盖自定义值。它不需要在模型中定义，因为它已经在 ApplicationUser 中定义了。

```
private string DateGuid()
    {
        string pre = "Ugly Users -";
        return pre + Guid.NewGuid();
    }

// POST: /Account/Register
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]    
public async Task<ActionResult> Register(RegisterViewModel model)
    {
        if (ModelState.IsValid)
        {
            var user = new ApplicationUser { Id = DateGuid() };
            var result = await UserManager.CreateAsync(user, model.Password);
... 
```

# linux - 修改完整 csv 文件的最后一个字段

> ID：13743497
> 
> 赞同：2
> 
> 时间：2012-12-06T12:18:35.313
> 
> 标签：linux, shell, vi

我有一个像这样的 csv(delimiter:commaseparated) 文件 a,b,c,d 在上面的 csv 文件中大约有 10000 行。无论最后一个字段写什么，我都必须用“e”更改。

例如。输入文件

```
a,b,c,d
e,f,g,h
i,j,k,l
m,n,o,p 
```

输出文件

```
a,b,c,e
e,f,g,e
i,j,k,e
m,n,o,e 
```

如您所见，d（第一行最后一个元素），h（第二行最后一个元素），l（第三行最后一个元素），p（第四行最后一个元素）...全部替换为'e'。

我如何通过 linux 上的 shell 脚本来改变这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:20:28.847

使用 awk 的一种方法：

```
awk -F, '{$NF="e";}1' OFS=, file 
```

`$NF`表示文件的最后一个字段。只需将“e”设置为 $NF 即可完成您的工作。1是打印每一行。

`-F`=> 指定输入字段分隔符， `OFS`=> 指定 o/p 字段分隔符

使用**sed**的另一种选择：

要使用 GNU sed 更改文件：

```
sed -i 's/\(.*,\).*/\1e/' file 
```

sed 匹配模式直到最后一个逗号，并将其分组为`\1`. 通过仅附加“e”，我们得到了解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T12:20:54.480

```
awk -F',' -v OFS=',' '{ print $1, $2, $3, "e" }' 
```

这种方法的一个缺点是它假定逗号不会出现在字段本身中。

# javascript - Bootstrap Typeahead 仅允许列表值

> ID：13743498
> 
> 赞同：15
> 
> 时间：2012-12-06T12:18:35.817
> 
> 标签：javascript, jquery, twitter-bootstrap

是否可以将用户的选择限制为 Bootstrap Typeahead 项的预定义数据源项？因此，如果用户键入的内容不在数据源中，则会显示一条消息通知他们？

这是演示：[http ://cruiseoutlook.com/test](http://cruiseoutlook.com/test)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T12:59:50.853

如果我理解，当 typeahead 组件失去焦点时，如果它不在列表中，应该提醒用户它的输入无效？

因此，代码将是这样的：

```
var myData = [...]; // This array will contain all your possible data for the typeahead

$("#my-type-ahead").typeahead({source : myData})
                   .blur(validateSelection);

function validateSelection() {
    if(source.indexOf($(this).val()) === -1) 
        alert('Error : element not in list!');
} 
```

请注意`indexOf`在 IE6-8 中未实现的事实。但是可以找到垫片，例如：[Best way to find if an item is in a JavaScript array?](https://stackoverflow.com/questions/143847/best-way-to-find-an-item-in-a-javascript-array) .

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-20T11:38:07.403

我遇到了同样的问题，但在我的情况下，我的所有数据都是**远程**的。Bloodhound 并没有我目前知道的任何好的钩子可以让你做到这一点，但你可以钩入 ajax 完整回调并手动建立一个有效的输入缓存，然后在更改/模糊时检查它。

```
var myData = new Bloodhound({
    remote: {
        url: '/my/path/%QUERY.json',
        ajax: {
            complete: function(response){
                response.responseJSON.forEach(function (item) {
                    if (myData.valueCache.indexOf(item.value) === -1) {
                        myData.valueCache.push(item.value);
                    }
                });
            }
        }
    }
});
myData.valueCache = [];
myData.initialize();

$('#artists .typeahead').typeahead(null, {
    source: myData.ttAdapter()
}).bind('change blur', function () {
    if (myData.valueCache.indexOf($(this).val()) === -1) {
        $(this).val('');
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T15:39:47.707

Using jquery and Samuel's solution I think you will overcome the IE problem. Change your validateSelecion function to:

```
function validateSelection() {
    if ($.inArray($(this).val(), myData) === -1) 
        alert('Error : element not in list!');
} 
```

Leave the rest as Samuel pointed out.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-26T12:50:57.847

我以稍微不同的方式解决了这个问题——大多数情况下，您需要捕获建议选项的 id，然后发布到后续的 Web 服务调用等。

我决定在 typeahead 异步调用开始时清空一个隐藏字段，并将隐藏字段的值设置为 datum.id 在自动完成或选定的 typehead 事件上。

提交表单时，我只是检查隐藏字段是否有值，如果没有，则用户从未选择过建议的选项。

我通过根据 typeahead 字段的名称为其添加 _id 来命名隐藏字段，然后在 onAutocompleted 和 onSelected 函数中使用此代码

我通过添加来指定这些功能：

```
.on('typeahead:selected', onAutocompleted)
.on('typeahead:autocompleted', onSelected) 
```

在将 .typeahead 功能添加到输入字段的代码中。

```
var n = $(this).attr('name')+'_id';
$('input[name="' + n + '"]').val(datum.id); 
```

typeahead 文档谈到有三个参数传递给自动完成和选择的函数，事件、数据和名称，但我从未见过传递的名称，这就是我使用 $(this).attr 的原因('name') 机制来获取字段的名称。

# solr - Solr/Lucene Copyfield 总结

> ID：13743499
> 
> 赞同：1
> 
> 时间：2012-12-06T12:18:37.547
> 
> 标签：solr, lucene, summary

我正在使用 Solr。我创建了一个包含多个普通字段的复制字段“文本”。当我进行搜索时，“文本”字段作为数组返回，但我无法以编程方式定义在哪个字段中找到了搜索字符串。

是否可以使用结果创建类似字段的摘要？一种动态字段，包​​含产生结果的字段片段。

因此，当我搜索：描述、信息、附加信息 .... 字段时，

我想获取在其中找到搜索词的字段的文本片段（具有最大数量的字符）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:26:19.323

突出显示不适用于多值字段 + 突出显示在响应底部显示为单独的部分。（感谢 aitchnyu）

# rtc - 为什么 RTC 源代码控制试图强迫我交付变更集？

> ID：13743503
> 
> 赞同：1
> 
> 时间：2012-12-06T12:18:50.493
> 
> 标签：rtc

签入和交付文件时，我收到此消息：

![在此处输入图像描述](../Images/5584b29ff7074d2fbbc37b8e57671cf9.png)

我不想在此文件交付过程中交付其他更改集？RTC 源代码控制是否有这样做的原因，如何防止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:28:26.990

我通常避免并且不推荐“[签入并交付](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.team.scm.doc/topics/t_delivering_changes.html)”选项，特别是因为它会“完成”更改集并迫使开发人员在下次签入时创建*新*的更改集。
这意味着我最终得到了开发人员不知道这个“功能”的*大量*变更集。

要控制交付的内容，最好先办理登机手续，*然后再*交付。

[该线程](https://jazz.net/forum/questions/23362/question-on-check-in-and-deliver)提到了与您类似的情况：

> UI 允许选择一个变更集，然后签入并交付这个特定的变更集。
> 控制元素是您右键单击传出更改的位置。
> 
> *   如果您右键单击单个更改集，您就可以交付它。
> *   如果您右键单击传出，您将交付所有变更集
> 
> 我从您的描述中怀疑发生了什么，本地有几个传出更改需要签入。
> 用户选择了未解决的节点并选择了“签入并交付”。
> 结果是这些更改包含在一个新的更改集中并交付。

# python - 为什么在这种特殊情况下使用生成器对象？

> ID：13743506
> 
> 赞同：4
> 
> 时间：2012-12-06T12:18:53.837
> 
> 标签：python, list, web-crawler, generator

我正在查看从互联网上下载的一些代码。这是一个基本的网络爬虫。我遇到了以下`for`循环：

```
for link in (links.pop(0) for _ in xrange(len(links))):
    ... 
```

现在，我觉得下面的代码也可以工作：

```
for link in links:
    ....
links=[] 
```

研究，我发现第一个实例清除`links`并生成一个`generator object (genexpr)`. `links`从未在`for`循环中使用，因此它的递减长度与代码无关。

每次使用 xrange 并弹出元素有什么特别的原因吗？即使用生成器对象比调用标准列表的元素有什么优势吗？此外，在什么情况下生成器会有用；为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T12:29:42.840

很难看到您引用的代码有任何理由。

我唯一能想到的是其中的对象`links`可能很大，或者与稀缺资源相关联，因此尽快释放它们可能很重要（而不是等到循环结束才释放它们） ）。但是 (a) 如果是这样，最好在创建每个链接时处理它（可能使用生成器来组织代码），而不是在开始处理之前建立整个链接列表；(b) 即使您别无选择，只能在处理之前建立整个列表，清除每个列表条目比弹出列表更便宜：

```
for i, link in enumerate(links):
    links[i] = None
    ... 
```

*（从具有n 个*项目的列表中弹出第一个元素需要 O( *n* )，尽管实际上它会相当快，因为​​它是使用 实现的`memmove`。）

即使您绝对坚持在遍历列表时反复弹出列表，最好像这样编写循环：

```
while links:
    link = links.pop(0)
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:35:25.387

生成器的目的是避免构建大量不为任何外部使用提供服务的*中间*对象。

如果所有代码都是在页面上构建一组链接，那么第二个代码片段就可以了。但也许可能需要的是一组根网站名称（例如 google.com 而不是 google.com/q=some_search_term....）。如果是这种情况，您将获取链接列表，然后浏览完整列表，仅删除第一部分。

这是第二个剥离部分，您可以通过使用发电机获得更多收益。与其不必要地构建一个需要内存和时间来构建的链接列表，您现在可以一个接一个地通过每个链接，在没有所有链接的大中间列表的情况下获得网站名称。

# php - 使用 php，如何通过 POST 发送数据，模拟完整的表单提交？

> ID：13743507
> 
> 赞同：3
> 
> 时间：2012-12-06T12:18:57.300
> 
> 标签：php, curl

我的问题是：我有一个托管客户目录的在线服务。
此服务需要身份验证，但我只有一个用户名/密码。
相反，我的客户希望使用自己的用户/密码和访问统计信息分别管理每个用户。所以我所做的是建立自己的账户管理，到目前为止一切顺利。
我现在需要做的是添加一个登录表单，用户应该使用自己的凭据填写该表单；一旦发送，脚本应该继续进行身份验证，如果一切正常，增加访问计数，通过 POST 发送远程系统的登录数据并将浏览器重定向到响应页面，与普通表单一样。
我尝试使用`curl`这种方式：

```
if (authenticate($_POST['usr'],$_POST['pwd'])) {
    $url = "http://www.foo.com/login.php";
    $postdata = http_build_query(array('username'=>"foo",'password'=>"bar"));
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $postdata);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_exec($curl);
    curl_close($curl);
} 
```

但我最终将目标页面的数据加载到我自己的页面中，而不是被重定向到该站点。
我应该怎么办？
PS 如果可能的话，我会避免使用通过 JS 提交的隐藏表单。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:13:23.940

我认为你没有看到你正在尝试做的事情的全貌。基本上，重定向对您没有帮助，因为身份验证不是基于 URL，而是基于 cookie 或会话。换句话说，您无法对自己进行身份验证（当您使用隐藏凭据在该网站上模拟表单提交时会发生这种情况）并使您的访问者自己获得该身份验证。重定向在这里对您没有帮助。即使您重定向他，他也没有经过身份验证。您的服务器是，因为它提交了表单，而不是用户本人。

我不明白的是，您可以使用隐藏的凭据对用户进行身份验证，然后让他完全访问统计信息，为什么不给他访问权限呢？您为他提供了对所有内容的完全访问权限，但不给他登录名和密码？

另一方面，POST 重定向是不可能的，所以你不能用伪造的 POST 数据在表单提交时重定向他。所有 POST 数据在重定向时都会丢失。

作为一个丑陋的解决方法，我建议如下：您可以像现在一样对自己进行身份验证，然后让用户从您的网站浏览统计信息，类似于代理所做的。然后，您可以将页面上的所有链接更改为类似的内容，即统计站点用户想要查看的页面在`yoursite.com/viewstats/?page=URL`哪里。`URL`您抓取该页面并将其显示给用户。您将需要更改 css/js 文件的相对路径以保持其设计，并且您还需要像这样更改所有网站内链接，`"/viewstats/?page=" . urlencode($old_url)`以便它们指向您的类似代理的门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:21:33.303

使用[CURLOPT_RETURNTRANSFER](http://php.net/manual/en/function.curl-setopt.php)：

```
curl_setopt($curl, CURLOPT_RETURNTRANSFER, false); 
```

从手册：

> TRUE 将传输作为 curl_exec() 的返回值的字符串返回，而不是直接输出。

# c# - 检查字典键包含

> ID：13743509
> 
> 赞同：1
> 
> 时间：2012-12-06T12:19:04.820
> 
> 标签：c#, key, contains

我必须在字典中存储两个键一个值。所以我这样使用。

```
Dictionary<int, Dictionary<int, int>> dicThreatPurgeSummary = new Dictionary<int,Dictionary<int,int>>(); 
```

我添加了键、键和值。

```
Dictionary<int, int> innerdict = new Dictionary<int,int>();
innerdict.Add(Month, Count);
dicThreatPurgeSummary.Add(Group, innerdict); 
```

我能够像这样查看价值

```
int a = dicThreatPurgeSummary[Group][Month]; 
```

如果 dicThreatPurgeSummary[Group][Month] 已经存在，我需要更新它的值。请帮我找出这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:34:30.627

比两次调用`ContainsKey`和三个字典索引更有效：

```
Dictionary<int, int> forGroup;
if (dicThreatPurgeSummary.TryGetValue(Group, out forGroup) &&
    forGroup.ContainsKey(Month))
{
    forGroup[Month] = newValue;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T12:27:01.037

这应该工作

```
if(dicThreatPurgeSummary.ContainsKey(Group) &&
   dicThreatPurgeSummary[Group].ContainsKey(Month))
{
    dicThreatPurgeSummary[Group][Month] = NewValue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:27:14.070

您可以使用[Dictionary<>.ContainsKey](http://msdn.microsoft.com/en-us/library/kw5aaea4.aspx)来检查密钥是否存在，因此您可以这样做：

```
if (dicThreatPurgeSummary.ContainsKey(Group))
{
    if (dicThreatPurgeSummary[Group].ContainsKey(Month))
    {
        // dicThreatPurgeSummary[Group][Month] exists
    }
} 
```

请注意，使用二维*键*而不是级联两个字典可能会更好。这样，您无需在每次为第一级使用新键时都添加新字典，并且所有值都在同一个字典中，从而允许您迭代值或检查值是否存在。

您可以为此使用[元组](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)：

```
var dicThreatPurgeSummary = new Dictionary<Tuple<int, int>, int>();
dicThreatPurgeSummary.Add(new Tuple<int, int>(Group, Month), Count);

// accessing the value
int a = dicThreatPurgeSummary[new Tuple<int, int>(Group, Month)];

// checking for existance
if (dicThreatPurgeSummary.ContainsKey(new Tuple<int, int>(Group, Month)))
{
    // ...
} 
```

### 使用更漂亮的子类型

*（未经测试）*

```
class IntIntDict<T> : Dictionary<Tuple<int, int>, T>
{
    public T this[int index1, int index2]
    { get { return this[new Tuple(index1, index2)]; } }

    public bool ContainsKey (int index1, int index2)
    {
        return ContainsKey(new Tuple(index1, index2));
    }

    public void Add (int index1, int index2, T value)
    {
         Add(new Tuple(index1, index2), value);
    }
    // ...
} 
```

然后你可以像这样使用它：

```
var dicThreatPurgeSummary = new IntIntDict<int>();
dicThreatPurgeSummary.Add(Group, Month, Count);

// accessing the value
int a = dicThreatPurgeSummary[Group, Month];

// checking for existance
if (dicThreatPurgeSummary.ContainsKey(Group, Month))
{
    // ... 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:28:28.837

```
Dictionary<int, int> innerDic = null;
bool isGroupPresent = dicThreatPurgeSummary.TryGetValue(Group, out innerDic);
if(isGroupPresent == false)
{
    //No entry for Group.
}
else
{
    int count;
    bool isMonthPresent = innerDic.TryGetValue(Month, out count);
    //Same as above
} 
```

# java - 将实例数组视为单个实例

> ID：13743511
> 
> 赞同：4
> 
> 时间：2012-12-06T12:19:14.837
> 
> 标签：java, design-patterns, syntactic-sugar

在 Java 中，我正在寻找一个通用模板，它意味着给定类型的数组（比如`Foo`），将允许对数组进行实例方法调用。在幕后，这将转化为遍历数组中的所有 Foo 实例，并在每个实例上调用实例方法。

也许一些代码会更好地证明这一点：

```
public class Foo{

   public Foo(){}

   public void Method1(){}

} 
```

所以你有了：

```
Foo foo = new Foo();
foo.Method1(); 
```

但是您能否为您的自定义类型制作一些通用模板，从而使这种事情成为可能：

```
Foo[] foos = new Foo[]{new Foo(),new Foo(), new Foo()};
foos.Method1(); 
```

这本质上是语法糖：

```
foreach(Foo f : foos){
  f.Method1();
} 
```

我的动机是有人可以使用可变参数，这样：

```
someHelper(fooInstance1,fooInstance2).Method1() 
```

哪里`someHelper()`返回`Foo[]`.

如果每次调用都返回一个值，那么将其包装到一个返回值数组（其中）`Method1()`中会更好。`ReturnVals.size == Foos.size`

在最坏的情况下，我必须为我需要为此工作的每种类型编写一个单独的类来实现这一点，可能使用接口来描述适用于单个实例和实例数组的功能。

是否有任何 Java 魔法、设计模式或通用 jiggery-pokery 可以优雅地实现这一点？

此外，如果没有，是否有任何语言在本质上促进了这一点？

我很欣赏它不适用于所有场景，但我认为这是由程序员自行决定的。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:29:51.713

你可以通过反射来做到这一点。

创建一个泛型类，它在运行时查看 T 的所有公共方法，并将具有相同签名的方法和一个循环注入其所有对象并在它们上调用相同方法的主体注入自身。

这个问题是如何调用动态创建的方法。由于这只能通过反射实现，这意味着原始代码中的任何方法调用都必须通过反射完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:38:57.053

您正在呼吁[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)。[您可以在项目PerfectJPattern](http://perfectjpattern.sourceforge.net)中找到组件化的通用和可重用实现，确保查看 Composite[文档页面](http://perfectjpattern.sourceforge.net/dp-composite.html)以及与 GoF 书中[示例](http://perfectjpattern.sourceforge.net/xref/org/perfectjpattern/core/structural/composite/Example.html)匹配的示例。

示例相关部分的逐字复制，假设您有 IGraphic 接口和一些实现，例如 Rectangle 和 Line，那么您可以这样做：

```
// build the composite
IComposite<IGraphic> myComposite = new Composite<IGraphic>(IGraphic.class);
myComposite.add(new Rectangle());                
myComposite.add(new Line());
myComposite.add(new Line());

// use the composite, invokes the IGraphic#draw() in the 
// underlying Rectangle and two Line instances
myComposite.getComponent().draw(); 
```

这就是它适用于您的特定情况的方式：

```
Foo fooInstance1 = new Foo();
Foo fooInstance2 = new Foo();
IComposite<Foo> myComposite = new Composite<Foo>(Foo.class);
myComposite.add(fooInstance1);    
myComposite.add(fooInstance2);    
// invokes Method1 on instance1 and instance2 transparently
myComposite.getComponent().Method1();

// alternatively do
Foo myCompositeFoo = myComposite.getComponent();
// pass this myCompositeFoo around and do
myCompositeFoo.Method1(); 
```

请注意，`IComposite`可重用实现包含实际的组合，它**不**实现/提供`Foo`接口，您宁愿通过`getComponent`方法来获取它。这是一个小麻烦，它是必需的，因为在 Java 中没有其他方法可以创建`Composite`实现任何任意和静态未知接口的事物的实例（在本例中）。我能做的最好的就是给你一个`Composite`在下面为你构建一个真正的复合组件并返回你想要的接口类型`Foo`。这是使用动态代理实现的，但该实现是类型安全的并且完全组件化，即您不必创建任何新的复合数组来实现您的接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:02:43.267

有多种方法可以做到这一点，大多数使用包装对象等......但是，如果您想要的类型是接口，那么您很幸运，这实际上可以使用[动态代理](http://docs.oracle.com/javase/1.4.2/docs/guide/reflection/proxy.html)来实现。

例如

```
public static void main(String[] args) throws IOException {
    B[] objs = {new B(), new B(), new B()};
    A oneForAll = createMulticastObject(objs, A.class);
    oneForAll.print();
}

@SuppressWarnings("unchecked")
public static <T, U extends T> T createMulticastObject(final U[] targets, Class<T> interfaceClass) {
    return (T) Proxy.newProxyInstance(Thread.currentThread().getContextClassLoader(), new Class<?>[] {interfaceClass}, new InvocationHandler() {

        @Override
        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
            Object ret = null;
            for (U target : targets) {
                ret = method.invoke(target, args);
            }
            return ret;
        }
    });
}

interface A {
    void print();
}

static class B implements A {
    @Override
    public void print() {
        System.out.println("Invoked.");
    }
} 
```

明显的限制是`A`（这是您将在多播方法调用中使用的对象类型必须是一个接口。

另一个明显的限制是多播对象只能从所有这些调用返回单个返回。

当代码都在一个地方时可能看起来很难看，但是`createMulticastObject`方法是一种可以用作实用方法的方法，`A`并且`B`无论如何都已经编写好了。因此`dynamic proxies`，将通常的包装器等减少为：

`A oneForAll = createMulticastObject(objs, A.class);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:31:59.587

> 是否有任何 Java 魔法、设计模式或通用 jiggery-pokery 可以优雅地实现这一点？

不是真的 - 不是没有很多样板，这意味着你自己编写该死的循环的代码更少。

> 此外，如果没有，是否有任何语言在本质上促进了这一点？

大多数函数式语言都支持类似的东西。在 Scala 中，您可以这样做`foos.foreach(_.Method1())`，其中`foreach`是在所有元素上调用代码块的方法，下划线是当前元素的别名。可运行代码：http: [//ideone.com/QRtPlK](http://ideone.com/QRtPlK)

在 Java 8 中，您将能够使用集合的流视图以及方法引用来执行以下操作：

```
foos.stream().forEach(Foo::method1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T12:31:23.860

查看 apaches 的[CollectionUtils](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html)中的方法。您必须为要在列表上调用的每个方法实现一个接口。

例子：

```
CollectionUtils.collect(foos, new Transformer() {
    public Object transform(Object foo) {
        return ((Foo) foo).method();
    }
}); 
```

这里我使用了一个 anymous 类，但你也可以在一个单独的类中实现 Transformer 并重用它。

我不知道是否存在具有泛型的版本。

还可以尝试一种功能语言（scala，haskell，...）。他们使这种事情很容易做到。

# php - PHP：不能使用 [] 读取 - 但它不是 [] 而是 [$counter]

> ID：13743514
> 
> 赞同：1
> 
> 时间：2012-12-06T12:19:23.323
> 
> 标签：php, arrays

一般来说，我想我理解错误消息的含义。但就我而言，这是一个我没有成功解开的谜语......

```
 $keywords_all = array();
    $count = 0;

    for ($z = 0; $z < $num_results; $z++)
    {
        $keywords_array = explode(",", $row['free_keywords']);

        for ($i = 0; $i < count($keywords_array); $i++)
        {
            if (in_array(strtolower(trim($keywords_array[$i])), $keywords_all))
            {
                $count++;
            }
            else
            {
                echo "<br />".$keywords_array[$i];
                $keywords_all[$count] = $keywords_array[$i];
            }
        }

        $row = pg_fetch_array($result);
    } 
```

那么，那个有什么问题呢？该行中弹出错误消息

```
 $keywords_all[$count] = $keywords_array[$i]; 
```

我不知道，对我来说似乎没问题。但是猜猜，这又是我忽略的一件小事……感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:50:03.787

我无法重现您的错误消息。不过，我确实在您的代码中发现了一个错误（我假设您将所有关键字都放在 $keywords_all 数组中而没有任何重复）。因此，您不应在 IF 中增加 $count，而应更新 $keywords_all 计数。见下文：

```
if (in_array(strtolower(trim($keywords_array[$i])), $keywords_all)) {
    $count = count($keywords_all);
} else {
    echo "<br />".$keywords_array[$i];
    $keywords_all[$count] = $keywords_array[$i];
    $count++;
} 
```

将值存储到 $keywords_all 数组后，您将增加 $count。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:15:48.313

```
 $keywords_all = array();
    $count = 0; // what for you neet this var ?

    $myRow = 'keyW1,keyW2,keyW3,keyW2';

//    for ($z = 0; $z < $num_results; $z++) // there is no variable $num_results at your code so I've replaced it with constant
    for ($z = 0; $z < 1; $z++)
    {
//        $keywords_array = explode(",", $row['free_keywords']); 
        $keywords_array = explode(",", $myRow);

//        for ($i = 0; $i < count($keywords_array); $i++)
        foreach ($keywords_array as $keyword)
        {

            $keyword = strtolower( trim( $keyword ) ); // some syntax sugar would be nice

            if ( !in_array( $keyword, $keywords_all) )
            {
                echo "<br />".$keyword;

                $keywords_all[] = $keyword;

            }
        }

//        $row = pg_fetch_array($result);
    }

    var_dump($keywords_all); 
```

我认为这段代码对你来说会更好，但如果你只是想摆脱重复的记录

```
array_uniq( array("1", "1", "2", "1") ) 
```

对你来说会是更好的解决方案。

# mysql - 如果 sum>x 则自定义选择

> ID：13743517
> 
> 赞同：0
> 
> 时间：2012-12-06T12:19:25.673
> 
> 标签：mysql, group-by

我有这张桌子：

```
TICKETID | PRICE | NUMBER 
```

所以对于每一个`ticketid`，玩家都可以为每一个数字付出一个代价`ticketid`。

因此，如果玩家想为数字 22,23 和 24 支付 1$、3$ 和 4$ 为`ticketid`25，那么表格将如下所示：

```
TICKETID | PRICE | NUMBER 
25       |   1   |  22 
25       |   3   |  23 
25       |   4   |  24 
```

我想随机选择一张 TOTAL PRICE >50 的票，让它获得奖品。

我还希望随机化是公平的，并且在进行抽奖时，每张票只有 1 个幻影率。如果我不使用 DISTINCT 或 GROUPBY，那么`ticketid`10 个号码的抽奖机会将比 2 个号码的彩票更多。

我试过这个，但它不工作：

```
SELECT DISTINCT(ticketid),SUM(price) FROM table 
     WHERE SUM(price)>50 GROUP BY ticketid 
```

我收到错误消息

> GROUP BY 函数的无效使用

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:34:38.513

您想要的是“HAVING”子句，该子句在 group by 聚合处理后应用于任何可能的候选记录。应用 THEN 并在最终结果集中包含（或不包含）。

```
SELECT 
      ticketid,
      SUM(price) TotalPrice
   FROM 
      table 
   group by
      TicketID
   HAVING
      sum(price) > 50 
```

# php - 无效查询：此 MySQL 版本不允许使用的命令

> ID：13743518
> 
> 赞同：-1
> 
> 时间：2012-12-06T12:19:26.890
> 
> 标签：php, mysql, load

我正在尝试使用从 php 脚本加载数据本地 infile 将记录插入数据库表，但它给了我以下错误：

> 无效查询：此 MySQL 版本不允许使用的命令

但是它是在 mysql 命令提示符下工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:25:24.803

假设您已在 my.cnf 文件的所有适当位置（mysqld、safe_mysqld、mysql）正确启用本地 infile，请确保 PHP 代码中的 MySQL 连接参数设置了“client_flags”选项。

例子：

```
mysql_connect(HOST,USER,PASS,false,128); 
```

最后一个参数 128 启用本地文件。有关更多信息，请参阅[PHP 手册](http://php.net/manual/en/function.mysql-connect.php)：

# ruby-on-rails - 根据选择标签值渲染视图 - 简单

> ID：13743527
> 
> 赞同：0
> 
> 时间：2012-12-06T12:20:30.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这样的看法：

```
<h2>Select the type of Project</h2>
<%= form_tag('/select') do -%>
<label>Select A Type Of Project</label><%= select_tag "project_type", options_from_collection_for_select(ProjectType.all, "name", "name"),:prompt => "Select Project Type" %> 
<%= submit_tag 'Next' %>
<% end -%> 
```

这里我只是选择一个特定类型的项目并提交。

HTML 输出为：

```
<select id="project_type" name="project_type">
<option value="">Select Project Type</option>
<option value="Sales">Sales</option>
</select> 
```

现在，我想根据所选项目的类型呈现特定的模板。如果 value = "Sales" 我想渲染模板 sales.html.erb。

我应该在名为 select 的控制器操作中放入什么。现在它是空的。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:58:59.130

类似的东西

```
def select
  view_to_render = case params[:project_type]
  when 'name1'
      #do smth
      'view_name'
  else
      # do smth else
      'another_view'
  end   
  respond_to do |format|
    format.html { render view_to_render }
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:59:23.237

在您的操作下添加此

```
template = params[:project_type] || 'new'
respond_to do |format|
  format.html { render template }
  format.json { render json: @projects }
end 
```

'new' 方法被假定为默认方法

# java - JavaFX - 在两个节点之间画一条线

> ID：13743529
> 
> 赞同：2
> 
> 时间：2012-12-06T12:20:43.303
> 
> 标签：java, line, javafx-2, nodes

我正忙于使用 JavaFX2 编写一个简单的应用程序。目标只是绘制 2 个节点（节点可以通过拖动来移动），然后具有在这些节点之间画线的功能。我完成了添加和移动节点的功能（目前我只是使用椭圆形状，但稍后我将用我自己的节点类替换它）但现在我正在努力处理连接线。添加节点或线条的操作来自下拉菜单，我在线条功能上有以下代码：

```
 private void drawLine(MenuItem line) {

    final BooleanProperty lineActive = new SimpleBooleanProperty(false);
    final BooleanProperty clickOne = new SimpleBooleanProperty(false);
    final BooleanProperty clickTwo = new SimpleBooleanProperty(false);

    line.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent t) {              
            lineActive.set(true);
        }
    });

    nodeGroup.setOnMousePressed(new EventHandler<MouseEvent>() {
        public void handle(final MouseEvent t1) {
            clickOne.set(true);

            if (lineActive.get()) {

                if (clickOne.get()) {
                    //get x and y of first node
                    x1 = ((Ellipse) t1.getTarget()).getCenterX();
                    y1 = ((Ellipse) t1.getTarget()).getCenterY();
                    clickOne.set(false);
                    clickTwo.set(true);
                }

                if (clickTwo.get()) {
                    nodeGroup.setOnMouseClicked(new EventHandler<MouseEvent>() {
                        public void handle(MouseEvent t2) {
                            //get x and y of second node
                            x2 = ((Ellipse) t2.getTarget()).getCenterX();
                            y2 = ((Ellipse) t2.getTarget()).getCenterY();

                            //draw line between nodes
                            final Line line = new Line();
                            line.setStartX(x1);
                            line.setStartY(y1);
                            line.setEndX(x2);
                            line.setEndY(y2);

                            canvas.getChildren().add(line);

                            clickTwo.set(false);
                            lineActive.set(false);                     
                        }
                    });
                }
            }
        }
    });
} 
```

我只有布尔值来检查第一次和第二次单击以获取每个节点的中心。我的第一个问题是，当我单击线功能并在 2 个节点之间添加一条线时，它似乎并没有结束该功能，并且我单击的任何其他节点都会得到一条线。我怎样才能防止它多次执行。

我的第二个问题是如何将线“连接”到节点，如果节点移动，线会停留在节点的中心？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:07:02.603

我认为有几件事可以使这更简单......

1.  当您有两个以上的状态（不单击、单击一个、单击两个）时，不要使用布尔值，而是使用枚举。那么你只需要一个变量来照顾。
2.  只在 nodeGroup 上设置一个鼠标侦听器并检查您所处的状态并在那里有适当的代码，而不是单独的鼠标侦听器。

我想该程序正在为第二次单击设置侦听器，而不是在完成后将其重置为第一次单击的侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T10:04:13.420

由于我是 Stack Overflow 的新手，所以我尝试了一些关于您的问题的方法 首先在两个标签之间添加行

```
final Line line = new Line();

@Override
public void initialize(URL arg0, ResourceBundle arg1) 
{
    // TODO Auto-generated method stub

     line.setStartX(lblDragTest.getLayoutX());
     line.setStartY(lblDragTest.getLayoutY());
     line.setEndX(lblNew.getLayoutX());
     line.setEndY(lblNew.getLayoutY());
     rootAnchorPane.getChildren().add(line);

} 
```

然后添加这个方法......

```
// This code handles label move
//set lblDragMousePressed method to Mouse Pressed event for lblDrag
@FXML
public void lblDragMousePressed(MouseEvent m)
{
    System.out.println("Mouse is pressed");     
    prevLblCordX= (int) lblDragTest.getLayoutX();
    prevLblCordY= (int) lblDragTest.getLayoutY();
    prevMouseCordX= (int) m.getX();
    prevMouseCordY= (int) m.getY();     
}
//set this method on mouse released event for lblDrag
@FXML
public void lblDragMouseReleased(MouseEvent m)
{       
    System.out.println("Label Dragged");    
}
// set this method on Mouse Drag event for lblDrag
@FXML
public void lblDragMouseDragged(MouseEvent m)
{   

    diffX= (int) (m.getX()- prevMouseCordX);
    diffY= (int) (m.getY()-prevMouseCordY );        
    int x = (int) (diffX+lblDragTest.getLayoutX()-rootAnchorPane.getLayoutX());
    int y = (int) (diffY+lblDragTest.getLayoutY()-rootAnchorPane.getLayoutY());     
    if (y > 0 && x > 0 && y < rootAnchorPane.getHeight() && x < rootAnchorPane.getWidth()) 
    { 
     lblDragTest.setLayoutX(x);
     lblDragTest.setLayoutY(y);
    }

    line.setStartX(lblDragTest.getLayoutX());
    line.setStartY(lblDragTest.getLayoutY());
    line.setEndX(lblNew.getLayoutX());
    line.setEndY(lblNew.getLayoutY());
    // rootAnchorPane.getChildren().add(line);      
} 
```

# jaxb - Sun/Oracle JAXB RI 错误？

> ID：13743537
> 
> 赞同：0
> 
> 时间：2012-12-06T12:21:03.553
> 
> 标签：jaxb, unmarshalling, sun

> 编辑#1：我使用了 JAXB RI 2.2.6（截至今天 12/06/12 的最新版本），我观察到相同的行为:-(

我正在使用 JAXB 来解组 XML 有效负载。当我第一次通过 Unmarshaller 传递无效负载时，我收到以下类型的错误：

```
 javax.xml.bind.UnmarshalException: Unable to create an instance of foo.bar.FooBarType
 - with linked exception:
[java.lang.InstantiationException] 
```

在我的代码的下一行（在 catch() 块中），我尝试了相同的 Unmarshaller 实例并提供了一个有效的有效负载，我得到以下类型的错误：

```
java.lang.ClassCastException: foo.bar.SomeAType cannot be cast to foo.bar.SomeBType 
```

在下一行（再次在随后的 catch() 中），我尝试相同的 Unmarshaller 实例并再次提供相同的有效负载，这可以很好地解组！

有没有人经历过 JAXB 的这种行为？我在这里遇到错误了吗？在哪里看/挖？

以下是我正在使用的 JAXB jar 清单的详细信息：

```
Manifest-Version: 1.0
 Ant-Version: Apache Ant 1.7.0
 Created-By: 1.5.0_12-b04 (Sun Microsystems Inc.)
 Specification-Title: Java Architecture for XML Binding
 Specification-Version: 2.1
 Specification-Vendor: Sun Microsystems, Inc.
 Implementation-Title: JAXB Reference Implementation 
 Implementation-Version: 2.1.12
 Implementation-Vendor: Sun Microsystems, Inc.
 Implementation-Vendor-Id: com.sun
 Extension-Name: com.sun.xml.bind
 Build-Id: hudson-jaxb-ri-2.1-833
 Class-Path: jaxb-api.jar activation.jar jsr173_1.0_api.jar jaxb1-impl.jar
 Name: com.sun.xml.bind.v2.runtime
 Implementation-Version: hudson-jaxb-ri-2.1-833 
```

非常感谢您！

> 编辑＃2：不可能粘贴所有内容，但这是它的外观要点：

```
final JAXBContext jaxbContext = JAXBContext.newInstance(FooRequestType.class);
        final Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();

        JAXBElement<FooRequestType> result = null;
        try {

            //try unmarshalling invalid payload.
            result = unmarshaller.unmarshal(invalidPayload.getDocumentElement(), FooRequestType.class);

        }catch(Exception e1){

            try {
                //now try unmarshalling valid payload . ##NOTE: If you try unmarshalling Invalid Payload here, it will fail again.
                result = unmarshaller.unmarshal(validPayload.getDocumentElement(), FooRequestType.class);

            } catch(Exception e2){

                //try again unmarshalling valid payload
                result = unmarshaller.unmarshal(validPayload.getDocumentElement(), FooRequestType.class);
                System.out.println("Result:=" + result.getValue());
                System.out.println("Successfully unmarshalled. Exiting with (0)");
                System.exit(0);
            }
        }
        System.out.println("Not expecting to reach here.Exiting with (1)");
        System.exit(1); 
```

> 编辑#3：使用 EclipseLink MOXy 作为 JAXB Impl 运行同一段代码；它的行为正确。我在 Sun/Oracle JAXB RI 上打开了一个错误：http: [//java.net/jira/browse/JAXB-931](http://java.net/jira/browse/JAXB-931)

# c - c 和指针中的 void*

> ID：13743538
> 
> 赞同：2
> 
> 时间：2012-12-06T12:21:08.210
> 
> 标签：c

我无法理解 c 中的 void* 指针。我已经四处搜索，但还没有真正理解如何解决这个特定问题：

```
typedef struct _Test{
   char* c;
}Test;

void method(void* test){
    Test t;
    t = *(Test*)test;
    t.c = "omg";
    printf(t.c); //WORKS
}

int main(){
Test t;
method(&t);
printf(t.c); //NOT WORKING,  prints nothing/random letters

return 0;} 
```

为什么？或者更确切地说，解决/解决此问题的最佳方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T12:23:40.343

在将的对象复制到其中之后，您正在更改`t`内部的本地对象。这不会改变' 对象中的任何内容，因为您从不向另一个方向复制。`method()``main()``t``main()`

您应该只通过指针访问并直接更改调用者的对象：

```
((Test *) test)->c = "omg"; 
```

或者，您可以通过使用正确类型的本地指针使其更清晰，这可能是您想要做的：

```
void method(void* test) {
    Test *t = test;
    t->c = "omg";
} 
```

请注意，这里不需要强制转换，因为在 C 中`void *`自动转换为。`Test *`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T12:24:06.297

您在方法中定义一个`Test`对象（在堆栈上创建），然后将给定的指针指向那里。方法返回后，分配的堆栈`Test`就消失了。

改写：

```
void method(void* test){
    Test *t;                     // defines a pointer to a Test object
    t = (Test*)test;             // casts the void pointer to a Test pointer
    t->c = "omg";                // assigns data to attribute
    printf(t->c); //WORKS
} 
```

当然，它可以全部放在一行中（不包括`printf()`），不需要堆栈分配的`Test`指针：

```
 void method(void* test){
        ((Test *)test)->c = "omg";
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:46:40.173

```
typedef struct _Test{
   char* c;
}Test;

void method(void* test){
    Test *t;
    t = (Test*)test;
    t->c = "omg";
    printf(t->c); //WORKS
}

int main(){
Test t;
method(&t);
printf(t.c);

return 0;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T12:26:35.487

`t`in `method()`'s 范围内的阴影`t`，`main()`永远不会被触及，因此当您调用`printf()`它时包含无法确定的数据。

# windbg - Windows 7 上的“vfbasics.pdb”在哪里？

> ID：13743539
> 
> 赞同：4
> 
> 时间：2012-12-06T12:21:10.923
> 
> 标签：windbg

MS 公共符号存储中似乎没有它，但 C:\Windows\System32 文件夹中也没有它。

我的符号路径配置正确，因为我确实从 MS 公共符号库下载并被 windbg 识别的 kernel32.dll 等符号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T02:11:40.117

看起来 PDB 缺少 MSI。它曾经在 MSI 的早期版本中回到 4.1。但是自从进入 6.2（Windows 7\8 SDK 的一部分）以来，MSI 就没有私有 PDB。

还在寻找...

来自 Application Verifier x64 External Package-x64_en-us.msi 的 FILE TABLE

```
vfluapriv.dll                                 281656    6.2.9200.16384    1033    512    35
vfluapriv.dll                                 242776    6.2.9200.16384    1033    512    25
catdc3acb184552e9eeac50269425274d3c.cat       9783                                512    29
vfprintpthelper.dll                           711320    6.2.9200.16384    1033    512    36
appverif.chm                                  657331                              512    15
appverif.chm                                  657331                              512    6
appverif.exe                                  173520    6.2.9200.16384    1033    512    9
appverif.exe                                  216816    6.2.9200.16384    1033    512    17
cuzzapi.dll                                   23072     6.2.9200.16384    1033    512    34
cuzzapi.dll                                   21448     6.2.9200.16384    1033    512    22
cat2d609858545493b503b24bd3328d8d2a.cat       8157                                512    5
cat4c0b3f635c0903217a3535759b7ce85f.cat       7792                                512    10
catb1033a9482d5307d3df8fcd97174719e.cat       9783                                512    19
vfprintpthelper.dll                           367392    6.2.9200.16384    1033    512    26
cat9070517e54c750dca5f4eaa025eb8057.cat       8136                                512    14
vfntlmless.dll                                40136     6.2.9200.16384    1033    512    27
vfntlmless.dll                                45336     6.2.9200.16384    1033    512    37
vfbasics.dll                                  406848    6.2.9200.16384    1033    512    16
vfbasics.dll                                  353328    6.2.9200.16384    1033    512    8
vfcompat.dll                                  90480     6.2.9200.16384    1033    512    38
vfcompat.dll                                  87328     6.2.9200.16384    1033    512    21
vfcuzz.dll                                    48976     6.2.9200.16384    1033    512    30
vfcuzz.dll                                    52032     6.2.9200.16384    1033    512    23
vfnet.dll                                     105056    6.2.9200.16384    1033    512    33
vfnet.dll                                     81592     6.2.9200.16384    1033    512    20
vfnws.dll                                     83248     6.2.9200.16384    1033    512    31
vfnws.dll                                     61384     6.2.9200.16384    1033    512    24
vfprint.dll                                   433376    6.2.9200.16384    1033    512    32
vfprint.dll                                   306592    6.2.9200.16384    1033    512    28
vrfauto.dll                                   211064    6.2.9200.16384    1033    512    2
vrfauto.dll                                   167392    6.2.9200.16384    1033    512    12
vrfauto.h                                     112394                              512    4
vrfauto.h                                     112394                              512    13
vrfauto.idl                                   31344                               512    3
vrfauto.idl                                   31344                               512    11
vrfcore.dll                                   183568    6.2.9200.16384    1033    512    18
vrfcore.dll                                   164200    6.2.9200.16384    1033    512    7
cat0f5c9874ec8b03b3a2ef2148f76b34cf.cat       7792                                512    1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:01:55.243

vfbasics.pdb 作为应用程序验证程序的一部分安装并使用私有符号，这就是公共 MS 符号存储服务器没有此 pdb 的原因。

从我们的评论看来，安装中出现了一些错误，您可以从[这里](http://www.microsoft.com/en-gb/download/details.aspx?id=20028)重新安装 Application Verifier ，我刚安装了 64 位版本，它出现在

> c:\windows\system32

[《 Inside Windows Debugging](http://books.google.co.uk/books?id=5VAmuo5Rn94C&pg=PT436&lpg=PT436&dq=vfbasics.pdb&source=bl&ots=ChjlBPmzz9&sig=IEfVVFIGy5I27RHpZPzPnAO0zDU&hl=en&sa=X&ei=nKXAUL-5NYjj4QSFs4HQAQ&ved=0CFYQ6AEwBg)》一书中要注意的另一件事是，您必须将其放在`c:\windows\system32` *MS*公共符号服务器路径之前。

# android-layout - 在 Android Jelly Bean 上的 EditText 中使用软键盘进行编辑时，如何检测“输入”字符？

> ID：13743540
> 
> 赞同：1
> 
> 时间：2012-12-06T12:21:20.467
> 
> 标签：android-layout, android-4.2-jelly-bean, ime, textedit

我有一个 EditText，并且正在尝试使用 setOnKeyListener 侦听击键，以便当我检测到 Enter 按键时，它会执行一些操作。它适用于硬键盘和模拟器，但不适用于我的 Galaxy Nexus。

[setOnKeyListener](http://developer.android.com/reference/android/view/View.html#setOnKeyListener%28android.view.View.OnKeyListener%29)的文档说“软件输入法中的按键通常不会触发此侦听器的方法”，这解释了为什么不会。

我不想像在[构建您的第一个应用程序](http://developer.android.com/training/basics/firstapp/building-ui.html)教程中那样在屏幕上显式添加“完成”按钮。

我现在已经将它设置为使用`android:inputType="text"`布局 xml 中的属性，并且它似乎具有预期的效果。这被认为是正确的方法吗？它在任何地方都有记录吗？它适用于所有设备吗？有没有更好的办法？

这是我在我的活动中使用的代码：

```
 myEditText.setOnKeyListener(new View.OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_DOWN) 
                if ((keyCode == KeyEvent.KEYCODE_DPAD_CENTER) ||
                  (keyCode == KeyEvent.KEYCODE_ENTER)) {
                    // Process the entered text here
                    myEditText.setText("");
                    return true;
                }
            return false;
        }
    } 
```

这是基于[专业 Android 4 应用程序开发](http://www.wrox.com/WileyCDA/WroxTitle/Professional-Android-4-Application-Development.productCd-1118102274.html)第 4 章中的 ToDo 列表示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:30:02.417

It appears that `android:inputType="text"` is indeed the correct approach.

# c - 读取 MIDI 文件 (C): 0x00 出现在 var-length 值的末尾

> ID：13743546
> 
> 赞同：5
> 
> 时间：2012-12-06T12:21:51.540
> 
> 标签：c, hex, midi, binaryfiles, file-format

我正在尝试编写一些函数来读取 MIDI 文件。我一直在参考许多提供规范的网站，但主要是这个： http: [//www.sonicspot.com/guide/midifiles.html](http://www.sonicspot.com/guide/midifiles.html)

我一直在为我下载的超级马里奥兄弟主题的 MIDI 文件测试它，我得到了一些意想不到的数据。可能是文件格式错误，但我认为更有可能是我做错了什么。这是我遇到问题的数据（来自十六进制编辑器），以及我*认为*我所知道的：

```
4D 54 72 6B 00 00 00 19 00 FF 51 03 05 7B 71 00 FF 58 
|---------| |---------| || || || |------| || ||
    MTrk    Chunk size  || || ||  Tempo   || ||
             (25 bytes) || || ||(ms per   || ||
                        \/ || ||1/4 note) || ||
                VLen value || ||          \/ ||
          (Event at time 0)|| ||  VLen value ||
                           \/ || (event at   ||
                 Beginning of ||  time 113)  ||
                 meta-event   ||             ||
                              \/             \/
                 Meta-event type:           ????
                      set tempo 
```

如您所见，如果之前的一切`0x00`都是正确的，那么它在那里做什么？之前的 VLen 值具有二进制值，`01110001`因此不期望 VLen 值的另一部分，因此，AFAIK*应该*是事件类型。但是，没有与 关联的事件类型`0x0`。谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:40:12.083

我发现了问题：元事件代码（在我的例子`0x51`中）像正常事件一样按块大小进行。我之所以这么认为是因为，对于 set tempo 元事件，tempo 数据大小始终为 3。因此`51 03 05 7B 71`实际上是 set tempo 事件代码（`51`），速度数据的大小（`03`）然后是实际速度（`05 7B 71`），然后`00`只是另一个可变长度值，告诉我下一个事件是在时间 0。

我希望这可以帮助别人。我还为 MIDI 格式找到了更好的文档，这使得这一点更加清晰：[http ://www.omega-art.com/midi/mfiles.html](http://www.omega-art.com/midi/mfiles.html)

# c# - c# 如何在 Windows 2008R2 中获取分配给终端会话的虚拟 IP

> ID：13743548
> 
> 赞同：0
> 
> 时间：2012-12-06T12:22:01.773
> 
> 标签：c#, networking

我有为终端服务启用 IP 虚拟化的 Windows 2008 R2 服务器。我需要在我的程序中知道哪个虚拟 IP 分配给了我运行我的程序的会话。

现在当我得到 IP 地址时：

```
 String strHostName = Dns.GetHostName();
       IPHostEntry ipEntry = Dns.GetHostByName(strHostName);
        IPAddress[] addr = ipEntry.AddressList; 
```

我只有服务器的 IP 没有分配给会话的虚拟 IP。

如何获得（使用 c#）这个虚拟 IP？

最好的问候， 皮奥特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:30:43.117

你可以试试这个

```
System.Net.IPAddress[] IpAddresses = System.Net.Dns.GetHostAddresses(System.Net.Dns.GetHostName());

for (int i = 0; i < IpAddresses.Length; i++)
{
   Console.WriteLine("IP Address {0}: {1} ", i, IpAddresses[i].ToString());
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T20:37:27.850

利用`WTSQuerySessionInformation`

# javascript - 单击链接后的正文 onload 事件

> ID：13743552
> 
> 赞同：4
> 
> 时间：2012-12-06T12:22:20.777
> 
> 标签：javascript

基本上，我的页面 test.php 页面上有链接。

```
 <a href="demo.php">click</a> <!-- test.php page --> 
```

我想每次都在 demo.php 页面上的 body onload 事件上调用函数，但只有当点击上面的链接时才会在页面刷新时调用它。

```
 <body onLoad="JavaScript:event(1,product,100);">  <!-- demo.php page --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:25:13.137

您可以通过在 URL 中使用主题标签来实现此目的，您的链接 HTML：

```
<a href="demo.php#noCall">click</a> 
```

demo.php javascript：

```
<script type="text/javascript">
window.onload = function() {
    if (document.location.href.indexOf("#noCall") == -1) { //Does the hashtag NOT exist in the URL?
        alert("Event called when link is not clicked"); //Event called
        window.location.hash = ''; //Remove noCall from the hash for page-reload
    }
};
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:26:31.027

添加一个变量，例如`var first_time = true;`，然后在你的函数中做任何事情之前首先检查它是否是第一次：在第一次`if (first_time == false) return false;`运行函数后将.`first_time``false`

**更正**

上述解决方案将无法按问题中的预期工作。刷新页面时会出现问题。我不会删除这个答案，因为它可以帮助其他人看到工作解决方案和这个解决方案之间的区别。

# jquery - jQuery 可拖动和可放置接受和恢复问题

> ID：13743554
> 
> 赞同：0
> 
> 时间：2012-12-06T12:22:22.277
> 
> 标签：jquery, jquery-ui-draggable, jquery-ui-droppable

此处的示例代码：http: [//jsfiddle.net/pDuxe/](http://jsfiddle.net/pDuxe/)

我有一个`droppable`包含两个`draggable`元素的空间。我有两个问题：

1.  如果该`droppable`区域已经有一个`draggable`项目，然后我尝试将第二个项目放在顶部，我需要它`refused`并恢复到其原始位置。

2.  我可以`revert: 'invalid'`毫无问题地使用代码，但是如果我将一个`draggable`项目放入一个`droppable`区域然后想要将其移回 - 它会一直恢复到它在该`droppable`区域中的位置，而不是它的原始位置。

那么，我将如何实现这两种情况呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:16:48.820

您可以做的是将您的可拖动对象包装在`div`您也制作的 a 中`droppable`：

```
<div id="originalposition">
    <div id="draggable" class="ui-widget-content">
        <p>Drag me to my target</p>
    </div>

    <div id="draggable2" class="ui-widget-content">
        <p>Drag me to my target</p>
    </div>
</div> 
```

然后您可以执行以下操作：

```
$(function() {
    $("#draggable").draggable({ revert: 'invalid' });
    $("#draggable2").draggable({ revert: 'invalid' });
    $("#originalposition").droppable({
        drop: function(event,ui) {
                 $("#droppable").removeClass("ui-state-highlight").addClass("ui-widget-header").html("<p>Drop here</p>"); 
              }
    });
    $("#droppable").droppable({
        drop: function(event, ui) {
                 $(this).addClass("ui-state-highlight").find("p").html("Dropped!");
              },
        accept: function(dropElem) {
                //dropElem was the dropped element, return true or false to accept/refuse it
                return (!$(this).hasClass("ui-state-highlight") && $(dropElem).hasClass("ui-widget-content"));
                }
    });
});​ 
```

[在这里拉小提琴](http://jsfiddle.net/mccannf/kxweq/1/)。

# php - 将自定义按钮添加到 Joomla 的文章编辑器 (TinyMCE)

> ID：13743561
> 
> 赞同：12
> 
> 时间：2012-12-06T12:22:47.697
> 
> 标签：php, tinymce, joomla2.5, joomla3.0, joomla-extensions

我正在尝试在 Joomla 的文章编辑器中插入一个额外的按钮。它在扩展模式下使用默认的 TinyMCE 插件。如您所知，编辑器下方有 4 个按钮（文章、图像、分页符和阅读更多）。我想做的是插入第 5 个按钮。（我确实附上了一个图片按钮，所以说我不能发布至少需要 10 个代表点。）

我尝试复制分页按钮插件并重命名它等，然后将其重新安装为新插件，但所有这些都会导致 TinyMCE 出现错误并且没有按钮出现。

**问题**：如何插入按钮？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T09:10:14.750

我继续进行了广泛的搜索，并找到了有关在 Joomla 1.5 的文章编辑器中添加附加按钮的指南。

该教程位于：http: [//tushev.org/articles/programming/18-how-to-create-an-editor-button-editors-xtd-plugin-for-joomla](http://tushev.org/articles/programming/18-how-to-create-an-editor-button-editors-xtd-plugin-for-joomla)。

开箱即用，这不适用于 Joomla 2.5 和 Joomla 3.0，因为 XML 清单标准已经发生了微小的变化。为了与本教程保持一致，请改用此 XML 清单。

```
<?xml version="1.0" encoding="utf-8"?>
<extension version="2.5" type="plugin" method="upgrade" group="editors-xtd">
        <name>test</name>
        <author>Name</author>
        <creationDate>Month 2013</creationDate>
        <copyright>Month Name. All rights reserved.</copyright>
        <license>GPL</license>
        <authorEmail>Email</authorEmail>
        <authorUrl>Your URL</authorUrl>
        <version>1.0.0</version>
        <description>
            "adds the button 'test' to the editor"
        </description>
        <files>
            <filename plugin="test">test.php</filename>
        </files>
</extension> 
```

教程PHP是正确的，如下：

```
<?php

 // no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );

jimport( 'joomla.plugin.plugin' );

class plgButtonTest extends JPlugin {

    function plgButtonTest(& $subject, $config)
    {
        parent::__construct($subject, $config);
    }
    function onDisplay($name)
    {
        $js =  "                      
         function buttonTestClick(editor) {
                             txt = prompt('Please enter something','123');
                             if(!txt) return;
                               jInsertEditorText('{test '+txt+'}', editor);
        }";
        $css = ".button2-left .testButton {
                    background: transparent url(/plugins/editors-xtd/test.png) no-repeat 100% 0px;
                }";
        $doc = & JFactory::getDocument();
        $doc->addScriptDeclaration($js);
        $doc->addStyleDeclaration($css);
        $button = new JObject();
        $button->set('modal', false);
        $button->set('onclick', 'buttonTestClick(\''.$name.'\');return false;');
        $button->set('text', JText::_('Test'));
        $button->set('name', 'testButton');
        $button->set('link', '#');
        return $button;
    }
}
?> 
```

感谢大家的帮助。如果您有任何其他更好的方法，我将不胜感激。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T14:10:22.570

如果您的插件安装成功，那么您必须将您的插件名称放入插件 `Custom plugin`中`Custom button`的高级参数设置中。`tinymce`并确保您安装的插件已发布。例如，请参见下图。

这是我设置为启用的自定义插件。请参阅此图像： ![在此处输入图像描述](../Images/1483fe1d755151fb0357e88bb2bd426c.png)

然后在`tinymce`插件中转到高级参数并在最后看到自定义字段选项。请参阅此图像：

![在此处输入图像描述](../Images/77d8831de7a561425344a0c293bbecac.png)

输入插件名称和按钮名称。然后在文章管理器编辑器中找到您的按钮。

# c# - 从控制器将 HTML 表传递给 MVC 视图

> ID：13743562
> 
> 赞同：0
> 
> 时间：2012-12-06T12:22:48.670
> 
> 标签：c#, asp.net-mvc, json, html-table

我有一个 MVC 应用程序，我想使用 json 将一个 html 表从控制器传递到视图。

我在这个网站上找到了这个问答： [通过 JSON 发送 HTML 代码](https://stackoverflow.com/questions/5064561/sending-html-code-through-json)，它推荐[json_encode](http://php.net/manual/en/function.json-encode.php)但它适用于 PHP，我正在使用 C#...

如何使用 Json 传递 HTML 表？

目前我尝试过：

```
return Json(MyHTMLTable); 
```

在我看来：

```
<script type="text/javascript">
$(document).ready(function () {
    $.ajax({
        url: '@Url.Action("GetTable","MyPages")',
        type: 'POST',
        success: function (result) { $('#ph').html(result.responseText); },
        error: function (result) {
            $('#err').html(result.responseText);
        }
    })
}); 
```

（ph 是一个 div）

我收到以下错误： **序列化“System.Web.UI.WebControls.TableRow”类型的对象时检测到循环引用。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:31:51.493

首先，不需要使用 JSON 将 HTML 表从控制器传递到视图。JSON 旨在作为一种传输字符串化数据的方式，通常在 Web 服务和客户端之间传输。它在功能上类似于 SOAP。以这种方式将数据从控制器传输到视图是不好的，因为您失去了通过模型传递给您的强类型。

因此，您可以简单地将 HTML 表作为变量传递给视图模型中的视图。您也可以使用 ViewBag，但这样会丢失强类型。无论哪种方式，假设表是在您的 C# 中生成的，您只需将包含 HTML 的字符串转换为`MvcHtmlString`. 你这样做：

```
var table = MvcHtmlString.Create("<table>..."); 
```

然后将其包含在您的模型或 ViewBag 中。然后，您可以在视图页面上使用经典的 Razor 语法将表格打印到页面：

```
@Model.Table 
```

或者

```
@ViewBag.table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:28:32.903

更改您的 ajax 以删除`@URL.Action`

```
$.ajax({
    url: 'MyPages/GetTable',
    type: 'POST',
    success: function (result) { $('#ph').html(result.responseText); },
    error: function (result) {
        $('#err').html(result.responseText);
    }
}) 
```

在你的`ActionResult()`回报一个`PartialView()`？

在此示例中名为 TableHtml 的局部视图中将是您的 html

```
public ActionResult GetTable(){

     // do something

     return PartialView("TableHtml");

} 
```

阿贾克斯将接受这一点

但是，如果您必须返回 HTML，那么您可以使用 Json

```
public ActionResult GetTable(){

     // do something
     String myHtml = "<div></div>;

    return Json(myHtml, JsonRequestBehaviour.AllowGet);
} 
```

# c++ - 模板 std::map::iterator 实例化

> ID：13743563
> 
> 赞同：1
> 
> 时间：2012-12-06T12:22:50.327
> 
> 标签：c++, templates, map, iterator

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)
> [编译器无法识别模板函数中的映射迭代器](https://stackoverflow.com/questions/3184682/map-iterator-in-template-function-unrecognized-by-compiler)

我有一个模板函数，其中有`std::map::iterator`实例化 -

```
template <class B , class C> 
C getValue (B& myMap , C returnType) {
    map<string,C>::iterator it = myMap.find(var);
    // implementation ...
} 
```

它会提示错误-

```
In function ‘C getValue(char*, B&, C)’:
error: expected ‘;’ before ‘it’
error: ‘it’ was not declared in this scope 
```

我应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:27:22.680

它是一种依赖类型，因此您需要`typename`：

```
typename map<string,C>::iterator it = myMap.find(var); 
```

请参阅[在哪里以及为什么必须放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)更多细节*。*

正如[Zoidberg'](https://stackoverflow.com/users/142019/zoidberg)所评论的，C++11`auto`指示编译器推断类型。请参阅[现代 C++ 风格](http://herbsutter.com/elements-of-modern-c-style/)的元素以获得简要概述（以及其他一些功能）。

# formula - QBasic - 如何找到这个值？

> ID：13743564
> 
> 赞同：1
> 
> 时间：2012-12-06T12:22:50.180
> 
> 标签：formula, qbasic

如果我们有`M`以下情况：

`M = 1+2+3+5+6+7+9+10+11+13+...+n`

找到什么`QBasic`程序`M`。

到目前为止，我已经完成了以下操作，但没有返回我的预期值

```
INPUT "ENTER A VALUE FOR N"
SUM = 0
FOR I = 1 TO N
IF I MOD 4 = 0
SUM = SUM + I
NECT I 
```

我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:30:44.087

您混合了相等运算符。尝试这个：

```
INPUT "ENTER A VALUE FOR N"
SUM = 0
FOR I = 1 TO N
IF I MOD 4 <> 0
    SUM = SUM + I
NEXT I 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:45:41.703

不需要编写程序，或者至少不需要使用循环。

前 n 个自然数之和：

```
sum_1 = n * (n + 1) / 2 
```

4 < n 的倍数之和：

```
sum_2 = 4 * (n / 4) * (n / 4 + 1) / 2 = 2 * (n / 4) * (n / 4 + 1) 
```

结果是`sum_1 - sum_2`：

```
sum = sum_1 - sum_2 = n * (n + 1) / 2 - 2 * (n / 4) * (n / 4 + 1) 
```

注意：`/`=整数除法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-06T00:01:27.250

这个片段计算整数和 n 个可被 4 整除的跳过值。

```
PRINT "Enter upper value";
INPUT n
' calculate sum of all values
FOR l = 1 TO n
    x = x + l
NEXT
' remove values divisible by 4
FOR l = 0 TO n STEP 4
    x = x - l
NEXT
PRINT "Solution is:"; x 
```

# sql - SQL：为什么 SYS.COLUMNS 显示我的列的属性与我设置的不同

> ID：13743565
> 
> 赞同：5
> 
> 时间：2012-12-06T12:22:54.303
> 
> 标签：sql, sql-server

我向数据库中添加了一个表，其中包含以下列名称和数据类型

"ID" bigInt, "描述" nchar(11)

如果我检查表的设计视图，列的数据类型与我设置的相同。

如果我编写一个查询，该查询将从 SYS.COLUMNS 获取该表中的列，则列属性是不同的，例如（描述的 max_length 是 22，而不是 11）

有人可以解释为什么会这样吗？

如果相关，我正在使用 Microsoft SQL Server Enterprise Edition（64 位）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T12:28:57.957

[sys.columns](http://msdn.microsoft.com/en-us/library/ms176106.aspx)`max_length`中的列显示最大长度（以字节为单位）。[nchar](http://msdn.microsoft.com/en-us/library/ms186939.aspx)是双字节，因此 11 个字符占用 22 个字节。

如果您想要字符数，您可以使用[INFORMATION_SCHEMA.COLUMNS](http://msdn.microsoft.com/en-us/library/ms188348.aspx)

```
select COLUMN_NAME, CHARACTER_MAXIMUM_LENGTH
from INFORMATION_SCHEMA.COLUMNS
where TABLE_NAME = 'YourTable' 
```

或者你可以使用函数[COLUMNPROPERTY](http://msdn.microsoft.com/en-us/library/ms174968.aspx)

```
select name,
       columnproperty(object_id, name, 'charmaxlen') as charmaxlen
from sys.columns
where object_name(object_id) = 'YourTable' 
```

# java - 二叉搜索树：AVL 树中节点的高度

> ID：13743566
> 
> 赞同：0
> 
> 时间：2012-12-06T12:22:55.600
> 
> 标签：java, data-structures, nodes, binary-search-tree, avl-tree

这是我必须制作的 AVL 树（希望足够大以便看得清楚）

[http://oi46.tinypic.com/2426fer.jpg](http://oi46.tinypic.com/2426fer.jpg)

我知道我的树对于我必须做的事情是正确的，但我不确定 AVL 树的高度以及它是如何工作的，正如您可能在我的绘图中看到的那样。真的希望您能提供帮助，我了解与 AVL 树有关的所有其他概念。谢谢

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T02:02:40.817

您删除了以前的问题，在该问题中您的 binarySearchTree 有问题。这是我在您删除问题之前写的解决方案。也许会有所帮助。

```
 if (tree.left == null && tree.right == null) {
                    if (compResult < 0) {
                            tree.left.data = item;
                            return true;
                    }
                    if (compResult > 0) {
                            tree.right.data = item;
                            return true;
                    }
            }
            if (compResult < 0) {
                    if (tree.left == null) {        //RED FLAG 
                            tree.left.data = item;  //BUT tree.left IS NULL!!
                            return true;
                    } else
                            add(tree = tree.left, item, count);
            }
            if (compResult > 0) {
                    if (tree.right == null) {       //RED FLAG
                            tree.right.data = item; //BUT tree.right IS NULL!!
                            return true;
                    } else
                            add(tree = tree.right, item, count);
            } 
```

要解决这些问题，请创建一个新节点，然后将其分配给 tree.left 或 tree.right。

您应该进行迭代添加而不是递归添加，它更快。

# java - 服务器返回 HTTP 响应代码 405 时的其他选项

> ID：13743572
> 
> 赞同：0
> 
> 时间：2012-12-06T12:23:32.617
> 
> 标签：java, servlets, urlconnection, http-status-code-405

**背景：**

我正在尝试将数据从一个小程序调用的类发送到同一服务器上的一个 servlet。

```
public class SendData {
    public void send() {
        URL url = new URL("http://address.edu/folder/package/Servlet.class");
        URLConnection conn = url.openConnection();
        conn.setUseCaches(false);
        conn.setDoInput(true);
        conn.setDoOutput(true);
        ObjectOutputStream objout = new ObjectOutputStream(conn.getOutputStream());
        Object data = new Object();
        objout.writeObject(data);
        objout.flush();
        objout.close();
}} 
```

servlet 看起来像：

```
public class Servlet extends HttpServlet {
    public void doPost(HttpServletRequest req, HttpServletResponse resp) {
        ObjectInputStream objin = new ObjectInputStream(req.getInputStream());
        Object input = objin.readObject();
        objin.close();
        resp.setStatus(HttpServletResponse.SC_OK);
        ...// do other things
}} 
```

**问题：**

返回的错误是`java.io.IOException: Server returned HTTP response code: 405 for URL: http://address.edu/folder/Servlet.class`。我正在使用我学校的服务器，我不是 100% 确定，但我认为服务器不允许 doPost 方法。

有没有办法解决？如果我提供授予访问权限的用户名和密码，我能否以某种方式通过 ftp 连接到 servlet.class？我是一个完整的初学者，所以任何建议/建议将不胜感激！

编辑：添加 web.xml

```
 <web-app xmlns="http://java.sun.com/xml/ns/j2ee" version="2.5"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
  <servlet>
    <servlet-name>Servlet</servlet-name>
    <servlet-class>package.Servlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>Servlet</servlet-name>
    <url-pattern>/Servlet</url-pattern>
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:00:29.633

假设您的服务器上的所有内容都已正确配置（web.xml、URL 映射等），您还必须指定在客户端上使用 POST 方法。

默认情况下，与 URL 的URLConnection`http://`使用 GET 方法。

如果您确定此请求将始终是 HTTP 请求，那么您可以强制转换为`HttpURLConnection`，它允许您设置请求方法：

```
 URL url = new URL("http://address.edu/folder/Servlet.class");
  conn = (HttpURLConnection)url.openConnection();
  conn.setRequestMethod("POST");
  ... 
```

# typo3 - 我们可以在typo3 中为父内容元素创建子内容元素吗？

> ID：13743574
> 
> 赞同：0
> 
> 时间：2012-12-06T12:23:37.107
> 
> 标签：typo3, typoscript

是否可以为一个内容页面创建子内容元素。我不喜欢调用 n 个子页面

这是我现在的结构：

```
Main page
    ->Sub Page One
      -> Main content one Sub page One
    ->Sub Page Two
      -> Main content one Sub page Two
And i need like this :
     Main page
        ->Sub Page One
             -> Main content one Sub page One (Child One)
                   -> Sub  content of Main content (Child One Sub Child)
        ->Sub Page Two
             -> Main content one Sub page Two (Child Two)
                   -> Sub  content of Main content (Child Two Sub Child) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:04:53.307

可以在页面上“滑动”内容。这篇文章有一些关于它的例子[http://wiki.typo3.org/Content_Slide](http://wiki.typo3.org/Content_Slide)

当您使用 TemplaVoila 时，您应该查看扩展`kb_tv_cont_slide` [http://typo3.org/extensions/repository/view/kb_tv_cont_slide](http://typo3.org/extensions/repository/view/kb_tv_cont_slide)

此外，您还可以引用现有的内容元素。这可以通过“创建参考”选项轻松完成。

# powershell - 如何让 Powershell 运行 SH 脚本

> ID：13743577
> 
> 赞同：1
> 
> 时间：2012-12-06T12:23:39.463
> 
> 标签：powershell, scripting, environment-variables, sh

有人可以告诉我如何让 Powershell 运行 .sh 脚本吗？当我运行此命令时，它一直试图在记事本中打开我需要的文件：

```
.\update-version.sh 123 
```

我已将 .SH 添加到我的 PATHEXT 环境变量中，并将 Microsoft.PowerShell_profile.ps1 目录添加到 Path 环境变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:04:52.007

PowerShell 脚本具有 .ps1 扩展名（以及其他受支持的扩展名，例如 psm1、psd1 等），除此之外它不会运行其他扩展名。

# jquery - 两个 jQuery 插件在同一页面上冲突

> ID：13743578
> 
> 赞同：0
> 
> 时间：2012-12-06T12:23:39.590
> 
> 标签：jquery, jquery-plugins, conflict, conflicting-libraries

我有两个 jQuery 插件在同一个文件上工作。一个是`jquery.autocomplete.js`，另一个是`jquery.thumbnailScroller.js`。

问题是当我在同一个文件上同时使用这两个文件时，自动完成功能根本不起作用，thumbnailScroller 正在工作，但如果没有 thumbnailScroller 插件，同样可以正常工作。

现在，当我浏览 js 文件时，我进入`$.fn.`了这两个文件。但是，我不知道是因为这个还是其他任何问题。

我也在谷歌和stackoverflow中搜索过，但我没有得到正确的解决方案。请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:33:47.710

有一些方法可以避免 jquery 中的冲突。我总是这样

```
var $k = jQuery.noConflict(); 
```

并为任何一个插件的每个 $ 函数使用 $k。不要在插件 js 文件中执行此操作。为您的实施页面执行此操作，例如，

```
$k("#id").autocomplete({... 
```

问候

iijb

# android - Android 计费示例应用程序的问题

> ID：13743591
> 
> 赞同：3
> 
> 时间：2012-12-06T12:24:20.820
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

[我遵循了在http://developer.android.com/google/play/billing/billing_integrate.html#billing-download](http://developer.android.com/google/play/billing/billing_integrate.html#billing-download)中运行 Android 计费示例应用程序的所有步骤

我成功购买了一个项目，但有几个问题：

1.  当我选择要购买的商品时，我首先收到“找不到商品”错误，当我单击“确定”时，我在 google play 中看到了该产品。这在别人身上发生过吗？

2.  我购买了几件新物品，我在我的谷歌结帐帐户上看到订单已“发货”但在结算测试应用程序中，在“您拥有的物品”下我什么也没看到......

3.  在[http://developer.android.com/google/play/billing/billing_integrate.html#billing-download](http://developer.android.com/google/play/billing/billing_integrate.html#billing-download)他们建议

> 退款使用测试帐户进行的购买，否则购买将显示为您的商家帐户的实际付款

我在哪里可以进行退款？在我的谷歌结帐帐户中，“退还一些钱”项目是灰色的......

有谁知道如何处理这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:57:14.300

他们有几个原因

1.  检查您的产品是否已发布。
2.  您的 APK 是否处于草稿模式。
3.  产品必须激活。
4.  首先在开发者控制台中的 License key 下创建 TestMails。并且您的设备必须使用此邮件 ID 作为设备的主邮件 ID。 ![在此处输入图像描述](../Images/94ba4fbffd825d44286a02c46e192876.png)

# sql - PostgreSQL - 创建 primaryID 表副本的规则

> ID：13743597
> 
> 赞同：0
> 
> 时间：2012-12-06T12:24:40.210
> 
> 标签：sql, postgresql, relational-database

在我的架构中，我想要一个 primaryID 和一个 SearchID。对于每个 SearchID，它是 primaryID 加上开头的一些文本。我需要这个看起来像这样：

*   主 ID = 1
*   搜索 ID = 搜索 1

由于 PrimaryID 设置为自动增量，我希望我可以使用 postgresql 规则来执行以下操作（伪代码）

```
IF PRIMARYID CHANGES
{
SEARCHID = SEARCH(PRIMARYID)
} 
```

这有望在 primaryID 更新并自动发生之后发生。那么，这是实现这一目标的最佳方式吗？谁能提供一个例子来说明它是如何完成的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:13:59.283

我会使用“生成”列——PostgreSQL 的特殊功能。假设您的表被命名`tbl`并且串行主键被命名`tbl_id`：

```
CREATE FUNCTION search_id(t tbl)
  RETURNS text STABLE LANGUAGE SQL AS
$$
SELECT 'Search' || $1.tbl_id;
$$; 
```

那么你也能：

```
SELECT t.tbl_id, t.search_id FROM tbl t; 
```

在这种情况下，*需要***t** .search_id 中的表限定。由于没有作为 table 的列找到，Postgres 会寻找一个以next 为参数的函数。*`search_id``tbl``tbl`*

 *实际上，`t.search_id`它只是 的语法变体`search_id(t)`，但使用起来非常直观。*

# iphone - 带有菜单和精灵的 Cocos2D 应用程序因 EXC_BAD_ACCESS 而崩溃

> ID：13743598
> 
> 赞同：0
> 
> 时间：2012-12-06T12:24:52.050
> 
> 标签：iphone, objective-c, ios, memory-management, cocos2d-iphone

我一直使用 ARC，但我的 cocos2d 模板不使用 ARC，因为我必须使用手动引用计数，这可能就是我崩溃的原因。
目标是制作一个带有两个标签的菜单，如果我点击一个标签，我会显示一个带有精灵的图像。如果我点击图像，我可以返回菜单并再次选择。
这是 CCLayer 类：

```
-(id) init
{
    if( (self=[super init]))
    {
        CCMenuItemLabel* item1, *item2;
        CCLabelTTF* label1= [CCLabelTTF labelWithString: @"Shark Icon" fontName: @"Arial" fontSize: 30], *label2;
        label2= [CCLabelTTF labelWithString: @"Cocos2D Icon" fontName: @"Arial" fontSize: 30];
        label1.color=  ccRED;
        label2.color= ccRED;
        [label1 retain];
        [label2 retain];
        item1=[CCMenuItemLabel itemWithLabel: label1 block:^(id sender)
        {
            NSLog(@"Clicked shark icon");
            [self removeChild: menu cleanup: NO];
            shark=[CCSprite spriteWithFile: @"shark.jpeg"];
            [shark setPosition: CGPointMake(150, 200)];
            [self addChild: shark];
            [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate: self priority: 0 swallowsTouches: YES];
        }];
        item2= [CCMenuItemLabel itemWithLabel: label2 block:^(id sender)
        {
            NSLog(@"Clicked cocos2d icon");
            [self removeChild: menu cleanup: NO];
            icon=[CCSprite spriteWithFile: @"icon.png"];
            [icon setPosition: CGPointMake(150, 200)];
            [self addChild: icon];
            [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate: self priority: 0 swallowsTouches: YES];
        }];
        [item1 retain];
        [item2 retain];
        menu=[CCMenu menuWithItems: item1,item2, nil];
        [menu alignItemsVertically];
        [self addChild: menu];
    }
    return self;
}

- (BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    [[CCTouchDispatcher sharedDispatcher] removeDelegate: self];
    [self removeChild: shark cleanup: NO];
    [self addChild: menu];
    return YES;
} 
```

**会发生什么：**我点击“鲨鱼图标”（或“Cocos2D 图标”），然后出现鲨鱼图像，如果我点击它，我会得到 EXC_BAD_ACCESS：

```
EXC_BAD_ACCESS (code=1, address= 0x70Baafc8) 
```

我尝试打印所有地址（菜单、项目 1 等...），但没有一个项目有这个地址。有时我什至得到一个无效的地址，比如 0x00000008 。

**编辑**

我会通过保留菜单来解决问题，但我不明白为什么：菜单已经保留：

```
@property (nonatomic, retain) CCSprite* shark;
@property (nonatomic, retain) CCSprite* icon;
@property (nonatomic, retain) CCMenu* menu; 
```

如果我启用僵尸，我会得到：

```
*** -[CCMenu tag]: message sent to deallocated instance 0x7c71a10 
```

所以菜单是一个僵尸，但保留属性不应该让它被保留吗？
奇怪的是我不需要保留鲨鱼和图标，只需要菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:05:24.933

```
menu = [CCMenu menuWithItems: item1,item2, nil]; 
```

菜单从未保留。如果它是一个保留属性，请使用 self.menu

您每次都创建一个新鲨鱼，但想重复使用您的菜单！

# java - JFileChooser 和 Eclipse

> ID：13743601
> 
> 赞同：0
> 
> 时间：2012-12-06T12:25:03.067
> 
> 标签：java, eclipse, swing, jfilechooser

我正在寻找一种让 JFileChooser 允许用户从仅包含在 Eclipse 项目的 bin 文件中的 txt 文件中进行选择的方法。有没有办法让 JFileChooser 弹出并显示位于 bin 文件夹中的选定数量的 txt 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:29:16.490

您可以参考以下代码，只需指定文件夹/目录的绝对或相对路径

```
JFileChooser chooser = new JFileChooser();
FileNameExtensionFilter filter = new FileNameExtensionFilter(
    "TXT files", "txt");
chooser.setFileFilter(filter);
chooser.setCurrentDirectory("<YOUR DIR COMES HERE>");
int returnVal = chooser.showOpenDialog(parent);
if(returnVal == JFileChooser.APPROVE_OPTION) {
   System.out.println("You chose to open this file: " +
        chooser.getSelectedFile().getName());
} 
```

[JFileChooser](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:16:47.447

另一种方法是实现 FileSystemView 以便它只显示您的目录并防止在层次结构或其他“驱动器”中上升。

这是这样一个 FileSystemView 的演示。您必须在输入中提供根目录（即 bin 的路径，可能是诸如`new File("bin")`工作目录被认为是 Eclipse 项目的根目录，这是 Eclipse 默认执行的操作）。

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;

import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.filechooser.FileSystemView;

public class TestJFileChooser2 {

    public static class MyFileSystemView extends FileSystemView {

        private File root;

        public MyFileSystemView(File root) {
            super();
            try {
                this.root = root.getCanonicalFile();
            } catch (IOException e) {
                this.root = root;
            }
        }

        @Override
        public File[] getRoots() {
            return new File[] { root };
        }

        @Override
        public File createNewFolder(File containingDir) throws IOException {
            return FileSystemView.getFileSystemView().createNewFolder(containingDir);
        }

        @Override
        public File createFileObject(String path) {
            File file = super.createFileObject(path);
            if (isEmbedded(file)) {
                return file;
            } else {
                return root;
            }
        }

        @Override
        public File createFileObject(File dir, String filename) {
            if (isEmbedded(dir)) {
                return super.createFileObject(dir, filename);
            } else {
                return root;
            }

        }

        @Override
        public File getDefaultDirectory() {
            return root;
        }

        private boolean isEmbedded(File file) {
            while (file != null && !file.equals(root)) {
                file = file.getParentFile();
            }
            return file != null;
        }

        @Override
        public File getParentDirectory(File dir) {
            File parent = dir.getParentFile();
            if (isEmbedded(parent)) {
                return parent;
            } else {
                return root;
            }
        }
    }

    protected void initUI() {
        JFrame frame = new JFrame("Test file chooser");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JButton ok = new JButton("Click me to select file");
        ok.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                EventQueue.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        final JFileChooser openFC = new JFileChooser(new MyFileSystemView(new File("")));
                        openFC.setDialogType(JFileChooser.OPEN_DIALOG);
                        // Configure some more here
                        openFC.showDialog(ok, null);
                    }
                });
            }
        });
        frame.add(ok);
        frame.setBounds(100, 100, 300, 200);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {

                new TestJFileChooser2().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T13:13:58.470

所以你只想显示目录中的某些文本文件？

如果找到匹配项，则使用`FileFilter`将检查文件名与`ArrayList`文件名的匹配项，它将返回`true`允许`JFileChooser`显示文件

就像是：

```
JFileChooser fc=..;
fc.setCurrentDirectory(new File("path/to/bin/"));//put path to bin here

 ....     

 ArrayList<String> filesToSee=new ArrayList<>();
 //add names of files we want to be visible to user of JFileChooser
 filesToSee.add("file1.txt");
 filesToSee.add("file2.txt");

fc.addChoosableFileFilter(new MyFileFilter(filesToSee));

//By default, the list of user-choosable filters includes the Accept All filter, which        enables the user to see all non-hidden files. This example uses the following code to disable the Accept All filter:
fc.setAcceptAllFileFilterUsed(false);

....

class MyFileFilter extends FileFilter {

     private ArrayList<String> files;

     public MyFileFilter(ArrayList<String> files) {
         this.files=files;
     }

    //Accept only files in passed array
    public boolean accept(File f) {

        for(String s:files) {
            if(f.getName().equals(s)) {
                return true;
             }
        }

        return false;
    }

    //The description of this filter
    public String getDescription() {
        return "Specific Files";
    }
} 
```

参考：

*   [如何使用文件选择器](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)

# formula - QBasic - 如何获得 F 的值

> ID：13743606
> 
> 赞同：2
> 
> 时间：2012-12-06T12:25:23.830
> 
> 标签：formula, qbasic

我有以下公式：

```
F =  X / 1+4+9+16+....+n^2 
```

我怎样才能编写一个`QBasic`找到结果的程序`F`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T20:29:59.600

```
CLS
INPUT "Input the value of n: ", n%
INPUT "The value of X: ", X
denominator% = 0
FOR i% = 1 TO n%
    denominator% = denominator% + i% ^ 2
NEXT i%
F = X / denominator%
PRINT "F = "; F 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:35:39.270

在[这个有用的页面](http://www.trans4mind.com/personal_development/mathematics/series/sumNaturalSquares.htm)中，前 n 个自然数的平方和为：

![前 n 个自然数的平方和](../Images/e48dced2d7932961876b84a67885180d.png)

所以你只需要计算：

```
F = X * 6 / (n * (n + 1) * (2 * n + 1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-12T06:02:01.473

功率倍增器：

```
DEFDBL A-Z
INPUT "Input the value of n: ", n
INPUT "The value of X: ", X
INPUT "The power: ", p
denominator = 0
FOR i = 1 TO n
    denominator = denominator + i ^ p
NEXT
F = X / denominator
PRINT "F = "; F
END 
```

# c# - 从子类c#调用父方法

> ID：13743609
> 
> 赞同：36
> 
> 时间：2012-12-06T12:25:31.260
> 
> 标签：c#, .net

这是一个与我之前看到的答案略有不同的问题，或者我没有得到它。我有一个父类，其中有一个名为的方法`MyMethod()`和一个变量`public Int32 CurrentRow;`

```
public void MyMethod()
{    
     this.UpdateProgressBar();    
} 
```

在父级中，我创建了一个新实例`ChildClass`

```
Boolean loadData = true;
if (loadData) 
{    
     ChildClass childClass = new ChildClass();    
     childClass.LoadData(this.Datatable);    
} 
```

在子类`LoadData()`方法中，我希望能够设置`CurrentRow`父类的变量并调用该`MyMethod()`函数。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-06T12:28:20.750

要访问父类的属性和方法，请使用`base`关键字。所以在你的子类`LoadData()`方法中你会这样做：

```
public class Child : Parent 
{
    public void LoadData() 
    {
        base.MyMethod(); // call method of parent class
        base.CurrentRow = 1; // set property of parent class
        // other stuff...
    }
} 
```

请注意，您还必须将父级的访问修饰符更改`MyMethod()`为至少`protected`子类才能访问它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-06T16:42:25.713

找到了解决方案。

在父级中，我声明了 ChildClass() 的一个新实例，然后将该类中的事件处理程序绑定到父级中的本地方法

在子类中，我添加了一个公共事件处理程序：

```
public EventHandler UpdateProgress; 
```

在父类中，我创建了这个子类的一个新实例，然后将本地父事件绑定到子类`public` `eventhandler`中

```
ChildClass child = new ChildClass();
child.UpdateProgress += this.MyMethod;
child.LoadData(this.MyDataTable); 
```

然后在`LoadData()`我可以调用的子类中

```
private LoadData() {
    this.OnMyMethod();
} 
```

在哪里`OnMyMethod`：

```
public void OnMyMethod()
{
     // has the event handler been assigned?
     if (this.UpdateProgress!= null)
     {
         // raise the event
         this.UpdateProgress(this, new EventArgs());
     }
} 
```

这将在父类中运行事件

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-26T16:40:27.503

跟进 suhendri 对 Rory McCrossan 回答的评论。这是一个动作委托示例：

在孩子中添加：

```
public Action UpdateProgress;  // In place of event handler declaration
                               // declare an Action delegate
.
.
.
private LoadData() {
    this.UpdateProgress();    // call to Action delegate - MyMethod in
                              // parent
} 
```

在父级中添加：

```
// The 3 lines in the parent becomes:
ChildClass child = new ChildClass();
child.UpdateProgress = this.MyMethod;  // assigns MyMethod to child delegate 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T12:34:54.343

一种方法是将实例传递`ParentClass`给`ChildClass`on 构造

```
public ChildClass
{
    private ParentClass parent;

    public ChildClass(ParentClass parent)
    {
        this.parent = parent;
    }

    public void LoadData(DateTable dt)
    {
       // do something
       parent.CurrentRow++; // or whatever.
       parent.UpdateProgressBar(); // Call the method
    }
} 
```

确保`this`在构造`ChildClass`内部父项时传递对的引用：

```
if(loadData){

     ChildClass childClass = new ChildClass(this); // here

     childClass.LoadData(this.Datatable);

} 
```

警告：这可能**不是**组织课程的最佳方式，但它直接回答了您的问题。

**编辑**：在您提到超过 1 个父类想要使用的评论中`ChildClass`。这可以通过引入接口来实现，例如：

```
public interface IParentClass
{
    void UpdateProgressBar();
    int CurrentRow{get; set;}
} 
```

现在，确保在两个（全部？）父类上实现该接口并将子类更改为：

```
public ChildClass
{
    private IParentClass parent;

    public ChildClass(IParentClass parent)
    {
        this.parent = parent;
    }

    public void LoadData(DateTable dt)
    {
       // do something
       parent.CurrentRow++; // or whatever.
       parent.UpdateProgressBar(); // Call the method
    }
} 
```

现在任何实现的东西都`IParentClass`可以构造一个实例`ChildClass`并传递`this`给它的构造函数。

# ios - 在 Facebook 粉丝页面上发布图片

> ID：13743611
> 
> 赞同：0
> 
> 时间：2012-12-06T12:25:42.630
> 
> 标签：ios, facebook, image, upload

我无法使用 Facebook SDK for IOS 上传图片....

我已经检索到页面 ID，并且我正在使用 {Page_ID}/photos 但图片在我的墙上！！！

然后我在粉丝页面上创建了一个相册，我试图上传到 {ALBUM_ID}/photos 但系统返回消息 = "(#120) Invalid album id"！有人有什么想法吗？！？

我还设置了正确的授权（我想）！！！

# iphone - 使用objective-c在iphone应用程序中打开.indd文件？

> ID：13743613
> 
> 赞同：-1
> 
> 时间：2012-12-06T12:25:51.023
> 
> 标签：iphone, objective-c, xcode4.5, adobe-indesign

我需要在我的 iphone 应用程序中打开杂志。但是杂志有扩展名.indd。我发现了很多，但我无法获得任何线索或示例如何做到这一点。

所以我的问题是

*   如何在 iphone 中使用 Objective-c 打开 .indd 文件，如果可能，请提供链接或演示示例。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:54:57.777

据我所知，.indd 文件是二进制文件。因此，您在 iOS 上完全无法使用它。您需要的是[Indesign Server](http://www.adobe.com/nl/products/indesignserver.html)来解析/读取这些文件。

# java - 在 Java 测试套件中自动包含类

> ID：13743616
> 
> 赞同：4
> 
> 时间：2012-12-06T12:26:11.103
> 
> 标签：java, testing, junit, junit4, suite

Junit4 中的测试套件运行良好，但这里有一个障碍：

```
@RunWith(Suite.class)
@Suite.SuiteClasses({ A.class, B.class, ...}) 
```

如果有人开发了一个单元测试并忘记将它包含在 Suite.SuiteClasses 中，那显然是个问题。

（这不是一个亟待解决的问题，因为 Ant 稍后会抓住它，但仍然如此）

所以我想知道：如果您在 Eclipse 项目中说“测试”文件夹并且其中有一些包含类的包 - 有没有办法以某种方式将它们全部自动包含在 junit4 测试套件中？

（是的，您可以右键单击“测试”文件夹并以 Junit 身份运行，但有时会由于某种原因在个别测试通过时失败，所以我对这个解决方案不太信任，而且测试套件是很好的玩具； -))。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:27:19.553

我建议[ClasspathSuite](http://johanneslink.net/projects/cpsuite.jsp)

```
import org.junit.extensions.cpsuite.ClasspathSuite;
import org.junit.runner.RunWith;
@RunWith(ClasspathSuite.class)
public class MySuite {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:41:38.470

不是答案，而是更多评论：

> [...] 以 Junit 身份运行，但有时由于某些原因导致个别测试失败，而它们分别通过 [...]

原因是某些测试没有正确清理。这应该始终让您保持警惕。尝试找出一对无法在一次“运行”中执行的测试，并仔细查看第一个测试。根据我自己的经验：尽快解决这些问题（又名：现在！），否则您以后可能会遇到非常深的问题（通常：来自 QA 人员的投诉，例如“测试在我的环境中失败”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:22:20.877

我不同意 Andreas_D。这不是因为测试不会自行清理。好的单元测试不必自己清理。这是因为您的某些测试取决于另一个测试的结果。你需要更好的测试和/或夹具

但是我同意“立即修复它们！”部分。当您的测试结果不可重现时，您遇到了严重的问题

# node.js - 如何渲染多个玉模板

> ID：13743617
> 
> 赞同：0
> 
> 时间：2012-12-06T12:26:11.577
> 
> 标签：node.js, pug

当有多个模板时，我试图了解 JADE 是如何工作的。

我按照本教程工作： [http ://www.franz-enzenhofer.com/jade](http://www.franz-enzenhofer.com/jade)

但是，我得到了这个：

```
$ curl http://localhost:3000
<h1> <a href="http://www.franz-enzenhofer.com/">Franz Enzenhofer</a></h1> 
```

似乎命令 "res.render('index.jade',..." 只取了 index.jade 模板，但没有像应该发生的那样将它插入到 layout.jade 模板中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:20:37.340

我假设您正在使用`partials`. 它们已使用 express v3[删除。](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)有关详细信息，请参阅查看系统更改部分。

从 express v3 开始，您应该使用块。例如：[_](http://www.devthought.com/code/use-jade-blocks-not-layouts/)

我的模板.jade：

```
extends my-layout

block head
  script(src="myfile.js")

block content
  h1 My page 
```

我的布局.jade

```
doctype 5
html
  head
    title My title
    block head
  body
    #content
      block content 
```

# java - 如何从Java中的一个字符串获取多个变量集

> ID：13743618
> 
> 赞同：0
> 
> 时间：2012-12-06T12:26:22.097
> 
> 标签：java, arrays, string, variables, split

我正在尝试使用一个 println 设置多个字符串变量。这是我所拥有的：

```
Scanner scanner = new Scanner(System.in);

String teacher = "";
String classSelect = "";
String location = "";

System.out.println("Enter a teacher: ");
teacher = scanner.next();

System.out.println("Enter a class name: ");
classSelect = scanner.next();

System.out.println("Enter a location: ");
location = scanner.next(); 
```

这是我想要完成的事情：

```
String section = "";
String instructor = "";
String location = "";

System.out.printf("Only fill in applicable criteria, leave the rest blank :\n"
        + "Section://Sets section var// \n"
        + "Instructor://Sets instructor var// \n"
        + "Location://Sets location var// \n"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:43:19.753

这可能不是一种道德的方式，但试试吧

```
System.out.printf("Only fill in applicable criteria, leave the rest blank and use | after every field:\n"
        + "Section://Sets section var// \n"
        + "Instructor://Sets instructor var// \n"
        + "Location://Sets location var// \n"); 
```

如果用户输入

```
abc|xyz|loc 
```

在字符串中接受它

```
String input = scanner.nextLine();
String[] inputs=input.split("|");
inputs[0]//<--section
inputs[1]//<--instructor
inputs[2]//<--location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:30:19.223

您是否正在寻找这个：

```
 String message = 
        String.format("Only fill in applicable criteria, leave the rest blank :\n"
        + "Section: %s \n"
        + "Instructor: %s \n"
        + "Location:%s \n", 
        section ,instructor,location ); 
```

或这个？

```
 System.out.printf("Only fill in applicable criteria, leave the rest blank :\n"
            + "Section: %s \n"
            + "Instructor: %s \n"
            + "Location:%s \n", 
            section ,instructor,location ); 
```

# java - 来自用户输入的 Java 对象名称作为方法调用

> ID：13743637
> 
> 赞同：1
> 
> 时间：2012-12-06T12:27:46.287
> 
> 标签：java, object

被赋予创建一个 Wallet 类的任务，您可以在其中创建成员并在它们之间转移资金。然后，用户可以选择谁给钱和谁收钱。以下是一些相关代码：

```
Wallet adamsWallet = new Wallet("Adam", 403.50);
Wallet bentsWallet = new Wallet("Bent",  873);
Wallet clarksWallet = new Wallet("Clark", 319.50);

object_name_here.transfer(other_object_name_here, 200); 
```

因此，我希望用户例如在扫描仪中输入“adam”，然后以某种方式将“sWallet”附加到 adam，然后将其用作方法调用的对象名称。

我该怎么做，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T12:31:27.260

使用 a`Map`来存放钱包。例如：

```
Map<String, Wallet> wallets = new HashMap<>();

wallets.put("Adam", new Wallet("Adam", 403.50));
wallets.put("Bent", new Wallet("Bent",  873));
wallets.put("Clark", new Wallet("Clark", 319.50)); 
```

您可以从地图中按名称查找钱包。

```
Wallet wallet1 = wallets.get("Adam");
Wallet wallet2 = wallets.get("Clark");

wallet1.transfer(wallet2, 200); 
```

请注意，对象没有名称 - 变量有名称。对象不是变量；变量是对对象的引用。您可以有多个变量引用同一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:30:47.223

您可以使用地图。

```
Map<String, Wallet> wallets = new HashMap<String, Wallet>();
wallets.put("Adam", new Wallet("Adam", 403.50)); 
```

但是，在这种情况下，我建议尽可能删除 Wallet 构造函数的“Adam”参数。**让钱包本身独立于谁拥有它。**

然后你可以得到一个这样的个人钱包：

```
String name = "Adam"; // this string could be read from your Scanner object.
Wallet wallet = wallets.get(name); // You can also use wallets.get("Adam") directly of course. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:42:10.950

由于钱包的所有者是您系统中的一个实体，因此我会亲自给他们自己的课程。这允许更复杂的安排，例如一个人拥有多个钱包，或存储有关所有者的其他元数据。

您的示例将是：

```
Map<Person, Wallet> wallets = new HashMap<Person, Wallet>();

wallets.put(new Person("Adam"), new Wallet(403.50));
wallets.put(new Person("Bent"), new Wallet(873));
wallets.put(new Person("Clark"), new Wallet(319.50)); 
```

如果你`.equals()`在你的类中定义了一个合理的方法`Person`，你就可以再次找到钱包：

```
Wallet wallet = wallets.get(new Person("Adam")); 
```

我还会考虑一个`Person`类是否可能包含一个`Wallet`，而不是有一个将人们链接到钱包的地图。正确的选择取决于您的整体应用目标。为查找目的使用地图可能更有效，但将钱包存储在个人内部可能更合乎逻辑，特别是如果一个钱包不能同时由两个人拥有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:34:36.213

您可以创建哈希映射

```
HashMap<String,Wallet> hm=new HashMap<String,Wallet>();
hm.put("adams",adamsWallet);
... 
```

然后

```
 Wallet temp=hm.get("adams"); 
```

会返回你相应的对象

# vba - 使用 VBA 从尚未创建的工作表中收集数据

> ID：13743649
> 
> 赞同：0
> 
> 时间：2012-12-06T12:28:28.207
> 
> 标签：vba, excel

我被要求为我不填充的 excel 文件创建摘要工作表。这些是“每月”的 Excel 文件，工作表“通常”以开始日期命名。我说“通常”是因为拼写错误可能会蔓延或不允许在创建工作表名称之前对其进行预测。在相关周开始之前，不会创建工作表。

我正在尝试做的事情，尽管正在努力，是创建一些 VBA 代码来将每个工作表中的许多单元格和范围复制到将被隐藏的摘要工作表中。工作表都遵循相同的格式，主要信息是：A1 作为开始日期，O4 到 R4 作为 4 个汇总列标题，N5 到 N30 作为用户名信息。然后根据工作表中的数据，O5 到 R30 在其中进行计数。

我想创建一些代码，在每个非空白用户名（N5：N30）旁边复制周开始日期（A1）以及相应行中的值。由于 O4 到 R4 中的列标题不会更改，因此它们可以在汇总表上保持不变。

恐怕我对vba不太了解。我想我会使用 Worksheets.Count 来查找工作表的数量？打算在[这里](http://www.ozgrid.com/VBA/sheet-index.htm)修改代码，但我不知道如何确保每行数据在摘要工作表中换行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:39:06.853

使用 ozgrid 示例，但进行以下更改：

`.Range("A1").`

至

`.Range("A" & l).`

然后用更多问题+您正在使用的实际代码修改您的原始帖子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-31T16:57:47.523

我已经用以下可能或多或少与您的查询相关的 ozgrid 代码进行了修改。如果您可以将查询改写为更多的任务 1、任务 2 方式，那么将以下脚本更改为您想要的内容将很容易。

下面的脚本只是作为一个模块而不是更易于控制的工作表事件工作，只需创建一个子模块并将其复制粘贴到那里然后运行它，或者您也可以在工作表上创建一个按钮来运行，使用开发选项卡并选择链接到宏 SplitWs 的表单或 activex 按钮。

```
Sub SplitWs()

Dim wSheet As Worksheet, ws As Worksheet
Dim i As Long

Set wSheet = ThisWorkbook.Worksheets(1)

i = 1

    With wSheet
        .Columns(1).ClearContents
        .Cells(1, 1) = "INDEX"
        .Cells(1, 1).Name = "Index"
    End With

    For Each ws In Worksheets
        If ws.Name <> wSheet.Name Then
            i = i + 1
                With wSheet
                    .Range("A1").Name = "Start_" & wSheet.Index
                    .Hyperlinks.Add Anchor:=.Range("A1"), Address:="", _
                    SubAddress:="Index", TextToDisplay:="Back to Index"
                End With

                wSheet.Hyperlinks.Add Anchor:=wSheet.Cells(i, 1), Address:="", _
                SubAddress:="Start_" & wSheet.Index, TextToDisplay:=wSheet.Name
        End If
    Next ws

End Sub 
```

我还将“l”变量更改为更易于阅读的“i”。

希望对您有所帮助，否则请对要修改的内容发表评论。

帕斯卡

[http://multiskillz.tekcities.com](http://multiskillz.tekcities.com)

# java - 将 jtextfields 中的数据放入 JButton 单击时的数组列表（Actionlistener）

> ID：13743652
> 
> 赞同：0
> 
> 时间：2012-12-06T12:28:41.873
> 
> 标签：java, multithreading, arraylist, actionlistener, jtextfield

对不起，如果我对我的问题的解释有点笨拙。

好吧，我正在尝试添加 X 数量的 JTextField，并将其中每个的内容（int）添加到 arrayList 中。我想在单击我的提交按钮时发送带有此信息的数组列表。

所以这里是循环，它创建 JTextFields 并应该将字段中的数据添加到 arraylist。

```
If I enter antalVare = new JTextField("0"),
the 0 will be added to the arraylist, 
```

但它应该在单击我的 JButton 时再次用来自 JTextFields 的数据填充数组列表。我怎样才能做到这一点？我尝试了使用线程的不同方法，但失败了。

```
 kundeOrdreArrayList = new ArrayList<String>();

    alleVarerList = kaldSQL.alleVarer(connectDB);

    try {
        while (alleVarerList.next()) {
            antalVare = new JTextField();

            innerPanel.add(new JLabel(alleVarerList.getString(2) + " ("
                    + alleVarerList.getString(3) + ",- kr.)"));
            innerPanel.add(antalVare);
            innerPanel.add(new JLabel(""));
            kundeOrdreArrayList.add(antalVare.getText());
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    innerPanel.add(new JLabel(""));
    innerPanel.add(submit);
    innerPanel.add(new JLabel("")); 
```

**这是我的 ActionListener：**

```
if (a.getSource().equals(submit)) {
        // DO SOMETHING ?

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:13:12.467

在您的第一个代码片段中，您添加的值是*此时*`kundeOrdreArrayList`文本字段的值。之后更改文本字段时不会更新这些值。

 *因此，在您的 ActionListener 中，您需要再次遍历所有 JTextField。为此，首先更改您的第一个代码片段以跟踪您拥有的所有 JTextField。因此，在您的类中添加一个新字段“ArrayList textfields”，然后（用`// ++`

```
textfields = new ArrayList<JTextField>(); // ++

try {
    while (alleVarerList.next()) {
        antalVare = new JTextField();
        textfields.add(antalVare); // ++

        innerPanel.add(new JLabel(alleVarerList.getString(2) + " ("
                + alleVarerList.getString(3) + ",- kr.)"));
        innerPanel.add(antalVare);
        innerPanel.add(new JLabel(""));
        kundeOrdreArrayList.add(antalVare.getText());
    } 
```

现在，在您的 ActionListener 中，清除 kundeOrdreArrayList 并再次添加所有 JTextFields 中的值：

```
 if (a.getSource().equals(submit)) {
      kundeOrdreArrayList.clear();
      for (JTextField field : textfields) {
           kundeOrdreArrayList.add(field.getText());
      }
  } 
```*

# mysql - 总结 MySQL 查询的输出

> ID：13743661
> 
> 赞同：1
> 
> 时间：2012-12-06T12:28:59.267
> 
> 标签：mysql, select, aggregate

我正在尝试总结查询的输出，但正在苦苦挣扎。下面的查询检查了fax_authorized 表，并根据它们生成带有电子邮件地址的扩展摘要。

我有以下查询：

```
SELECT extended_number, IF(COUNT(extension_id)<5,1,0) AS 'fax5', 
  IF(COUNT(extension_id)>5 AND COUNT(extension_id)<11,1,0) AS 'fax10',
  IF(COUNT(extension_id)>10,1,0) AS 'fax10+', COUNT(extension_id) AS 'fax_total'
FROM fax_authorized fa, extension e
WHERE fa.extension_id = e.id
GROUP BY extended_number; 
```

输出如下所示：

```
+-----------------+------+-------+--------+-----------+
| extended_number | fax5 | fax10 | fax10+ | fax_total |
+-----------------+------+-------+--------+-----------+
| 0009*004        |    1 |     0 |      0 |         1 |
| 0139*601        |    0 |     1 |      0 |         6 |
| 0139*743        |    1 |     0 |      0 |         2 |
| 0139*996        |    1 |     0 |      0 |         1 |
+-----------------+------+-------+--------+-----------+ 
```

我想要的是根据 LEFT(extended_number,4) 总结这些数据，例如上面的 0139 将具有传真 5 = 2、传真 10 = 1、传真总计 = 9。

我试过这个，它不起作用：

```
SELECT extended_number, SUM(IF(COUNT(extension_id)<5,1,0)) AS 'fax5',   
  SUM(IF(COUNT(extension_id)>5 AND COUNT(extension_id)<11,1,0)) AS 'fax10', 
  SUM(IF(COUNT(extension_id)>10,1,0)) AS 'fax10+', 
  COUNT(LEFT(extension_id,4)) AS 'fax_total'
FROM fax_authorized fa, extension e
WHERE fa.extension_id = e.id
GROUP BY LEFT(extended_number,4); 
```

编辑：我使用下面的 Saharsh Shah 的答案来解决这个问题，但遇到了另一个我认为值得添加的问题。我试图从他的嵌套子查询解决方案创建一个视图，但无法创建，因为视图中不允许子查询。所以我创建了两个相关的视图如下：

```
CREATE VIEW vw_xoom_faxdetail AS 
  SELECT LEFT(extended_number,4) client_id, 
   IF(COUNT(extension_id)<5,1,0) AS 'fax5', 
   IF(COUNT(extension_id)>5 AND COUNT(extension_id)<11,1,0) AS 'fax10',
   IF(COUNT(extension_id)>10,1,0) AS 'fax10plus', 
   COUNT(extension_id) AS 'fax_total'
 FROM fax_authorized fa, extension e WHERE fa.extension_id = e.id
 GROUP BY client_id;

CREATE VIEW vw_xoom_fax AS 
 SELECT client_id, SUM(fax5) fax5, SUM(fax10) fax10,
  SUM(fax10plus) 'fax10+', SUM(fax_total) fax_total 
 FROM vw_xoom_faxdetail
 GROUP BY client_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:41:16.040

试试这个：

```
SELECT extended_number, SUM(fax5) fax5, SUM(fax10) fax10, SUM(fax10plus) 'fax10+', SUM(fax_total) fax_total 
FROM (SELECT LEFT(extended_number,4) extended_number, IF(COUNT(extension_id)<5,1,0) AS 'fax5', 
             IF(COUNT(extension_id)>5 AND COUNT(extension_id)<11,1,0) AS 'fax10',
       IF(COUNT(extension_id)>10,1,0) AS 'fax10plus', COUNT(extension_id) AS 'fax_total'
      FROM fax_authorized fa, extension e WHERE fa.extension_id = e.id
      GROUP BY extended_number) AS A 
GROUP BY extended_number; 
```

# image - 如何标准化透视拉伸图像以获得平方图像？

> ID：13743664
> 
> 赞同：0
> 
> 时间：2012-12-06T12:29:06.600
> 
> 标签：image, computational-geometry

让我们想一想，我会以一定角度拍摄桌子上的一张床单，而不是正面。当然，我会有一个透视拉伸的图像。

当源（拍摄的照片）中的所有 4 个边缘/边缘点都被定义/可能被用户单击时，有谁知道一种简单的算法，可以将区域再次“标准化”为平方区域？

插值可能很容易，我不需要算法来获得平滑的边界，最近邻就足够了（因此，只需从源位置复制像素，它满足根据计算的像素的舍入值，忽略逗号后）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:34:35.400

OpenCV 拥有一切。

基本上，你得到 4 分并使用

[http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#getperspectivetransform](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#getperspectivetransform)

（基本上就是把里面的一个矩阵倒置）得到透视变换矩阵，然后用

[http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#warpperspective](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#warpperspective)

在图像上应用透视变换。

后者内部的算法可以在[http://en.wikipedia.org/wiki/Texture_mapping中找到](http://en.wikipedia.org/wiki/Texture_mapping)

# jpa - EclipseLink 缓存 refreshOnlyIfNewer 不起作用

> ID：13743666
> 
> 赞同：0
> 
> 时间：2012-12-06T12:29:14.430
> 
> 标签：jpa, eclipselink

我正在尝试将缓存与 EclipseLink 一起使用。我在我的 persistence.xml 中启用了 shared-cache-mode = ENABLE_SELECTIVE ，所以当我使用 @Cacheable(true) 时，实体会被缓存。现在我想让它在版本过时并且实体被刷新时工作。

我已经设置了一个乐观锁定字段

```
@Version
@Column(name="optLock")
private int versionNum ; 
```

当我尝试保存具有旧版本号的实体时，这是有效的，然后数据库会出现异常。

所以当我添加注释以启用缓存和刷新时

```
@Cacheable(true)
@Cache(size = 500, alwaysRefresh = true, refreshOnlyIfNewer = true) 
```

实体不会被缓存。我启用了 eclipselink.profiler，我可以看到没有为这个实体制作缓存并且缺少 Counter:CacheHits 和 Counter:CacheMisses 日志。

当我删除

```
@Cache(size = 500, alwaysRefresh = true, refreshOnlyIfNewer = true) 
```

该实体再次被缓存，但直接在数据库中完成的任何更改（并增加 optLock 字段）都不会通过。

什么我忘了她？或者我应该考虑什么才能让它工作？我一直在阅读的文档似乎应该可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:55:11.907

@Cache 覆盖@Cacheable，因此因为您没有在@Cache 中启用缓存，所以它获得了不缓存的持久性单元默认值。

添加，

```
@Cache(isolation=SHARED, ...) 
```

到您的注释。

还请记录一个错误，EclipseLink 应该足够聪明，可以看到@Cacheable 并将其用作默认值，因为@Cache 中没有隔离设置，或者至少报告一个警告。

# css - !important 对性能有害吗？

> ID：13743671
> 
> 赞同：197
> 
> 时间：2012-12-06T12:29:26.240
> 
> 标签：css, performance

我讨厌它们，它违背了 CSS 的级联特性，如果你不小心使用它们，你最终会陷入添加更多`!important`.

但我想知道它们对性能有害吗？

**编辑**
从（快速）回复中，我可以得出结论，它不会对性能产生（显着）影响。但很高兴知道，即使它只是作为劝阻他人的额外论据；）。

**EDIT 2**
BoltClock 指出，如果有 2 个`!important`声明，规范会选择最具体的一个。

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2012-12-06T15:28:40.237

它不应该对性能产生任何明显的影响。看到**Firefox 的 CSS 解析器，[`/source/layout/style/nsCSSDataBlock.cpp#572`](http://mxr.mozilla.org/mozilla2.0/source/layout/style/nsCSSDataBlock.cpp#572)**我认为这是相关的例程，处理CSS 规则的**覆盖**。

这似乎只是对“重要”的简单检查。

```
 if (aIsImportant) {
    if (!HasImportantBit(aPropID))
      changed = PR_TRUE;
    SetImportantBit(aPropID);
  } else {
    // ...
  } 
```

另外，评论在**[`source/layout/style/nsCSSDataBlock.h#219`](http://mxr.mozilla.org/mozilla2.0/source/layout/style/nsCSSDataBlock.h#219)**

```
 /**
     * Transfer the state for |aPropID| (which may be a shorthand)
     * from |aFromBlock| to this block.  The property being transferred
     * is !important if |aIsImportant| is true, and should replace an
     * existing !important property regardless of its own importance
     * if |aOverrideImportant| is true.
     * 
     * ...
     */ 
```

* * *

> 1.  Firefox 使用手动编写的自顶向下解析器。在这两种情况下，每个 CSS 文件都被解析为一个 StyleSheet 对象，每个对象都包含 CSS 规则。
>     
>     
> 2.  Firefox 然后创建包含最终值的样式上下文树（在以正确的顺序应用所有规则之后）

![CSS 解析器 Firefox](../Images/abdc32dd0e9afcc18f08361d82349c10.png)

**[来自：http://taligarsiel.com/Projects/howbrowserswork1.htm#CSS_parsing](http://taligarsiel.com/Projects/howbrowserswork1.htm#CSS_parsing)**

现在，您可以很容易地看到，在使用上述对象模型的情况下，解析器可以`!important`轻松地标记受其影响的规则，而无需太多后续成本。性能下降**并不是**反对`!important`.

**但是，可维护性确实会受到影响（如其他答案所述），这可能是您反对它们的唯一论据。**

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2012-12-06T12:42:59.183

我不认为这`!important`在浏览器匹配规则的速度方面本质上是坏的（它不构成选择器的一部分，只是声明的一部分）

但是，正如已经说过的，它会降低代码的可维护性，因此可能会由于未来的变化而导致代码不必要地增长。的使用`!important`也可能会降低开发人员的性能。

如果你**真的很**挑剔，你也可以说`!important`在你的 CSS 文件中增加了 11 个额外的字节，这并不算多，但我想如果你`!important`的样式表中有相当多的 s，它可能会加起来。

只是我的想法，不幸的是我找不到任何关于如何`!important`影响性能的基准。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-12-06T12:45:23.977

`!important`有它的位置。相信我。它救了我很多次，而且通常作为一种短期解决方案更有用，然后才能找到解决问题的更长更优雅的方法。

然而，像大多数事情一样，它被滥用了，但不必担心“性能”。我敢打赌，一个小的 1x1 GIF 在网页上比 !important 对性能的影响更大。

如果您想优化您的页面，还有更多*!important*路线可供选择 ;) ;)

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-12-06T14:04:11.593

幕后发生的事情是，当你的 CSS 被处理时，浏览器读取它，遇到一个`!important`属性，然后浏览器返回应用由`!important`. 这个额外的过程可能看起来像是一个额外的小步骤，但如果你要处理许多请求，那么你的性能就会受到影响。[（来源）](http://www.ishmaelsanchez.com/using-important-your-css)

> 在你的 CSS 中使用 !important 通常意味着开发人员自恋和自私或懒惰。尊重即将到来的开发者...

开发者在使用时的思考`!important`：

1.  我的摇摆 CSS 不工作... grrrr。
2.  我现在该怎么办？？
3.  然后`!important`是的......现在它工作正常。

`!important`然而，仅仅因为我们没有很好地管理 CSS ，它并不是一个好的使用方法。它产生了很多设计问题——比性能问题更糟糕——但它也迫使我们使用许多额外的代码行，因为我们正在覆盖其他属性，`!important`并且我们的 CSS 变得混乱无用的代码。我们应该做的是首先很好地管理 CSS，而不是让属性相互覆盖。

我们*可以*使用`!important`. 但是要谨慎使用它，并且只有在没有其他出路的情况下才使用它。

![在此处输入图像描述](../Images/ca7ea209c7ec52324a94d4926bbec628.png)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-12-06T13:19:53.357

我同意你不使用它的观点，因为这是不好的做法，无论性能如何。仅基于这些理由，我会`!important`尽可能避免使用。

但在性能问题上：不，它不应该引起注意。它可能会产生一些影响，但它应该是如此之小，以至于您永远不会注意到它，也不*应该*担心它。

如果它的重要性足以引起注意，那么您的代码中可能会遇到更大的问题，而不仅仅是`!important`. 简单使用您正在使用的核心语言的正常语法元素永远不会成为性能问题。

让我用一个反问来回答你的问题；一个你可能没有考虑过的角度：你指的是哪个浏览器？

每个浏览器显然都有自己的渲染引擎，并有自己的优化。所以现在的问题变成了：每个浏览器的性能影响是什么？也许`!important`在一种浏览器中表现不佳，但在另一种浏览器中表现良好？也许在下一个版本中，情况会相反？

我想我的观点是，我们作为 Web 开发人员不应该考虑（或需要考虑）我们正在使用的语言的单个语法结构的性能影响。我们应该使用这些语法结构，因为它们是实现我们想要做的事情的正确方法，而不是因为它们的执行方式。

性能问题应与使用分析器一起提出，以分析系统中的关键点。首先解决真正让你慢下来的事情。在你深入到单个 CSS 结构的层次之前，几乎可以肯定你要解决的问题要大得多。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-12-06T12:38:47.197

它不会显着影响性能。但是，它确实会降低代码的可维护性，因此从长远来看可能会降低性能。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-12-06T15:34:00.227

之前不得不使用`!important`过几次，我个人注意到使用它时没有明显的性能下降。

作为注释，请参阅[此堆栈问题的答案，](https://stackoverflow.com/questions/13607568/twitter-bootstrap-override-a-in-navbar/13607839#13607839)因为您可能想使用`!important`.

另外我会提到一些其他人都没有提到的东西。`!important`是重写内联 css 的唯一方法，而不是编写一个 javascript 函数（即使只有一点点也会影响你的性能）。因此，如果您需要覆盖内联 css，它实际上可以为您***节省一些性能时间。***

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-12-06T22:22:04.227

嗯... !important 还是 !!important？

让我们一步一步来：

1.  解析器必须检查每个属性的 !important，无论您是否使用它 - 所以这里的性能差异为 0
2.  覆盖属性时，解析器必须检查被覆盖的属性是否是 !important - 所以这里的性能差异再次为 0
3.  如果被覆盖的属性是 !!important，它必须覆盖属性 - 性能命中为 -1，因为不使用 !important
4.  如果被覆盖的属性是 !important，它会跳过覆盖属性 - 使用 !important 的性能提升 +1
5.  如果新属性是 !important，则无论被覆盖的属性是 !important 还是 !!important，解析都必须覆盖它 - 性能差异再次为 0

**所以我猜 !important 实际上有更好的性能，因为它可以帮助解析器跳过许多它不会跳过的属性。**

正如@ryan 在下面提到的那样，覆盖内联css并避免使用javascript的唯一方法......所以另一种避免不必要的性能影响的方法

嗯...原来 !important 很重要

并且，

*   使用 !important 为开发人员节省了大量时间
*   有时可以使您免于重新设计整个 CSS
*   有时 html 或父 css 文件不在您的控制范围内，因此它可以挽救您的生命
*   显然可以防止 !important 元素被其他 !!important 元素意外覆盖
*   有时浏览器只是没有选择正确的属性，没有在选择器中过于具体，所以使用 !important 真的变得很重要，并且可以让你免于在你的 CSS 中编写大量特定的 CSS 选择器。所以我想即使您使用更多字节来编写！important，它也可以在其他地方为您节省字节。我们都知道，css 选择器会变得混乱。

**所以我想使用 !important 可以让开发人员开心，我认为这非常重要**:D

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-07-24T20:56:02.080

我无法预见`!important`阻碍性能，无论如何都不是。但是，如果您的 CSS 中充满了`!important`，则表明您已经过度限定选择器并且过于具体，并且您已经用完了父母或限定符来增加特异性。因此，您的 CSS 将变得臃肿（这*将*影响性能）并且难以维护。

![重要的 CSS 规则模因](../Images/7dc2c9792954285d1c8f491de4b7eab0.png)

如果您想编写高效的 CSS，那么您只想*尽可能*具体并编写[模块化 CSS](http://thesassway.com/advanced/modular-css-an-example)。建议不要使用 ID（带有哈希）、链接选择器或限定选择器。

在 CSS 中以前缀为前缀的 ID`#`非常具体，以至于[255 个类不会覆盖一个 id](http://jsfiddle.net/RKEJE/)（由[@Faust 调整](https://stackoverflow.com/questions/2809024/points-in-css-specificity#answer-11934505)）。ID 也有更深层次的路由问题，它们必须是唯一的，这意味着您不能将它们重复用于重复样式，因此您最终会编写带有重复样式的线性 css。这样做的影响会因项目而异，具体取决于规模，但可维护性将受到极大影响，在极端情况下，性能也会受到影响。

## 如何在没有`!important`、链接、限定或 ID 的情况下添加特异性（即`#`）

**HTML**

```
<div class="eg1-foo">
    <p class="eg1-bar">foobar</p>
</div>
<div id="eg2-foo">
    <p id="eg2-bar">foobar</p>
</div>
<div class="eg3-foo">
    <p class="eg3-foo">foobar</p>
</div> 
```

**CSS**

```
.eg1-foo {
    color: blue;
}
.eg1-bar {
    color: red;
}
[id='eg2-foo'] {
    color: blue;
}
[id='eg2-bar'] {
    color: red;
}
.eg3-foo {
    color: blue;
}
.eg3-foo.eg3-foo {
    color: red;
} 
```

`**[JSFiddle](http://jsfiddle.net/gJ8gW/)**`

# 好的，那它是如何工作的？

第一个和第二个示例的工作方式相同，第一个实际上是一个类，第二个是属性选择器。类和属性选择器具有相同的特性。`.eg1/2-bar`不会继承其颜色，`.eg1/2-foo`因为它有自己的规则。

第三个示例看起来像限定或链接选择器，但两者都不是。链接是当您在选择器前面加上父母、祖先等时；这增加了特异性。限定是类似的，但你定义了选择器应用到的元素。排位赛：`ul.class`和链接：`ul .class`

我不确定你会如何称呼这种技术，但这种行为是故意的，并且[由 W3C 记录](http://www.w3.org/TR/css3-selectors/#specificity)

> 允许重复出现相同的简单选择器并且确实增加了特异性。

## 当两个规则之间的特异性相同时会发生什么？

正如[@BoltClock 指出的那样](https://stackoverflow.com/questions/13743671/is-important-bad-for-performance/24943801#comment-18887438)，如果有多个 !important 声明，那么规范规定*最具体*的声明应该优先。

在下面的示例中，两者`.foo`和`.bar`具有相同的特性，因此行为回退到 CSS 的级联性质，其中 CSS 中声明的最后一条规则声明优先级，即`.foo`.

**HTML**

```
<div>
    <p class="foo bar">foobar</p>
</div> 
```

**CSS**

```
.bar {
    color: blue !important;
}
.foo {
    color: red !important;
} 
```

`**[JSFiddle](http://jsfiddle.net/Cd5x6/)**`

# asp.net - 当我尝试启动我的 Windows 服务时，我收到错误号 1053

> ID：13743672
> 
> 赞同：1
> 
> 时间：2012-12-06T12:29:30.283
> 
> 标签：asp.net, windows-services

我正在尝试将参数传递给 Windows 服务，当我以给定方式使用命令提示符安装服务时，如下所示

**d:\mypath>installutil -i service.exe -参数**

在 program.cs 文件中安装之前，我已按以下方式编写

```
static void Main(string[] args)
        {
            **string path = args[0];**              
            ServiceBase[] ServicesToRun;
            ServicesToRun = new ServiceBase[] 
            { 
                **new VibrantEmail(path)** 
            };
            ServiceBase.Run(ServicesToRun);
        } 
```

在 service.cs 页面中我写了这个

```
**public VibrantEmail(string path)**
        {
            **data = path**
            InitializeComponent();
        } 
```

事情就像我在 program.cs 页面中使用**static void Main(string[] args)** 时只有我得到这个错误，编号 1053。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:41:44.130

您不能在安装步骤提供参数。`Installutil`只期望执行哪个安装程序组件的程序集。您必须使用[Environment.GetCommandLineArgs](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)来检索代码中的参数，然后在不提供参数的情况下安装服务并根据[此说明](https://stackoverflow.com/questions/1124546/c-sharp-windows-service-default-arguments-on-install)修改其执行路径。

# html - 正确的中文文档类型、属性、编码

> ID：13743674
> 
> 赞同：1
> 
> 时间：2012-12-06T12:29:40.163
> 
> 标签：html, character-encoding

我应该如何修改它以显示汉字？

那些问号实际上是中国文字。

谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head> 

<body> 

?????????????????????????????

????????????????

?????????????????????,?????????????,???!

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:42:45.020

我会确保您的编辑器的字符编码设置匹配。（即将设置更改为 UTF-8 并尝试重新输入/重新粘贴）。例如，在 Eclipse、IIRC 中，大多数文件的默认编码取决于您的区域设置（它通常会在我的机器上选择非 UTF 变体，例如 ISO-8859-1 (Latin-1)）。你用的是哪个编辑器？

# asp.net-mvc-4 - 获取控制器 webapi

> ID：13743677
> 
> 赞同：0
> 
> 时间：2012-12-06T12:29:47.350
> 
> 标签：asp.net-mvc-4, asp.net-web-api

在我的项目中，有多个控制器。我的“书”控制器有多种方法，没有任何参数。

所以我更改了默认映射：

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

到：

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional, action = "get" }
        ); 
```

现在实际上这只是书籍控制器的情况......其他控制器应该像第一个映射一样处理......

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:07:05.843

我不是你所要求的 100%，但这可能有效，

```
config.Routes.MapHttpRoute(
            name: "BooksApi",
            routeTemplate: "api/books/{action}/{id}",
            defaults: new { controller="books", id = RouteParameter.Optional, action = "get" }
        ); 
```

# c# - 附加到 Visual Studio 上的进程

> ID：13743682
> 
> 赞同：1
> 
> 时间：2012-12-06T12:29:59.123
> 
> 标签：c#, visual-studio

我试图在这里做一些非常简单的事情。我使用 Visual Studio 2012。我创建了名为 BLA 的简单 Visual Studio 类。整个代码如下。

```
using System;
using System.Collections.Generic;
using System.Text;

namespace BLA
{
    public class Class1
    {
        public void hit() {
            Console.Write("sdf");
        }
    }
} 
```

我构建它没有错误。我在“Console.Write("sdf")”中放置了一个断点，然后尝试将进程附加到 iexplore.exe。它附加的过程，但我收到错误断点当前不会被命中。没有为文档加载任何符号。

我尝试在 google 和 stackoverflow 中搜索我得到了很多答案，但没有一个能解决我的问题。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:35:18.453

你正在构建什么样的应用程序，你提到你附加到 iexplore.exe 它是一个 web 应用程序吗？

你总是可以尝试`System.Diagnostics.Debugger.Break()`给你一个调试选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:53:04.813

您必须创建类的对象`Class1`并从该对象调用方法`hit()`。

# iphone - 我应该如何将不可编辑的文本加载到视图中？

> ID：13743683
> 
> 赞同：-4
> 
> 时间：2012-12-06T12:29:58.503
> 
> 标签：iphone, ios, text, uiview, uiscrollview

我有个问题：

我想 1) 将任意数量的文本加载到视图中，并且当它显示时，文本必须是不可编辑的。仅当有大量文本时，视图才应显示滚动条。我还希望能够突出显示文本中的任何特定字母，方法是使字母加粗或着色*。*这是可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:31:59.110

当然，使用 UIWebView 并使用 HTML 进行突出显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:43:14.567

要么，您可以使用 UIWebView 或我在下面描述的机智：

只需在您的视图中添加 UITextView 并将其边框设置为 none 或任何您认为好的，并标记他的属性不可编辑和您认为的高度。所以，文本视图是不可编辑的，以及当文本长度足够时会发生什么到它的高度，它是自己的卷轴。

对于不可编辑，您可以通过编程方式或使用 IB 进行。在 IB 中，只需检查 XCode 右侧视图部分中的“行为”选项，而对于编程方法：

```
 UITextView* myRequiredTextView = [UITextView new];
    myRequiredTextView.editable = NO;//Don't forget to apply values to other properties like setFrame, etc.
 [self.myView addSubView:myRequiredTextView]; 
```

而且，为了突出显示的目的，您可以使用 NSAttributedString。

如果您选择 webView 选项，那么它需要 HTML，因此您需要一个 HTML 设计器来实现此目的。

如有任何疑问，请告诉我:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:43:18.580

如果你使用 UIWebView 它使用 html 代码，为了避免这个问题在 CATextLayer 中[使用](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATextLayer_class/Introduction/Introduction.html)[nsattributedstring](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsattributedstring_Class/Reference/Reference.html)

# iphone - SearchDisplayControler、UILabel 选择后堆叠

> ID：13743685
> 
> 赞同：0
> 
> 时间：2012-12-06T12:30:10.480
> 
> 标签：iphone, objective-c, ios

我正在尝试实现 searchDisplayController 但我遇到了问题。一旦我过滤了单元格，当我选择剩余的单元格时，我会得到一堆奇怪的文本：

[http://postimage.org/image/4fswe8t8n/](http://postimage.org/image/4fswe8t8n/)

这就像把我所有的牢房合二为一。

所以有我的 cellForRowAtIndexPath 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"MFriendCell";

UITableViewCell *cell = [tableView
                         dequeueReusableCellWithIdentifier:CellIdentifier];

if(cell == nil)  {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

if(tableView == self.tableView) {
    UILabel *nameLabel = (UILabel *)[cell viewWithTag:201];
    nameLabel.text = [self.allItems objectAtIndex:indexPath.row];
}
else if(tableView == self.searchDisplayController.searchResultsTableView) {
    UILabel *labelName = [ [UILabel alloc ] initWithFrame:CGRectMake(50, 0.0, 150.0, 43.0) ];
    labelName.text = [self.searchResults objectAtIndex:indexPath.row];

    [cell addSubview:labelName];
}
return cell;
} 
```

我的过滤器：

```
- (void)filterContentForSearchText:(NSString*)searchText
                         scope:(NSString*)scope
{
NSPredicate *resultPredicate = [NSPredicate
                                predicateWithFormat:@"SELF contains[cd] %@",
                                searchText];

self.searchResults = [self.allItems filteredArrayUsingPredicate:resultPredicate];
} 
```

如果您需要其他任何东西，请询问:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:23:07.037

您可以像这样在 tableView 中制作标签

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MFriendCell";

    UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    UILabel *nameLabel = (UILabel *)[cell viewWithTag:201];

    if(tableView == self.tableView)
    {
       nameLabel.text = [self.allItems objectAtIndex:indexPath.row]; 
    }

    else if(tableView == self.searchDisplayController.searchResultsTableView)
    {
        labelName.text = [self.searchResults objectAtIndex:indexPath.row];
    }
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:33:36.467

`nameLabel`只需像下面的代码一样添加单元格`labelName`..

```
if(tableView == self.tableView) {
    UILabel *nameLabel = (UILabel *)[cell viewWithTag:201];
    nameLabel.text = [self.allItems objectAtIndex:indexPath.row];
    [cell addSubview:nameLabel]; ///YOU ARE Not add This Lable so Add this lable also
}
else if(tableView == self.searchDisplayController.searchResultsTableView) {
    UILabel *labelName = [ [UILabel alloc ] initWithFrame:CGRectMake(50, 0.0, 150.0, 43.0) ];
    labelName.text = [self.searchResults objectAtIndex:indexPath.row];

    [cell addSubview:labelName];
} 
```

在你的方法中，当你在时，你`didSelectRowAtIndexPath`只取数组的值`self.allItems`而不是数组`self.searchResults``searchResultTableView`

试试这个代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;{
     if(tableView == self.tableView) {
         NSLog("\n Normal Table View Selected cell ==> %@",[self.allItems objectAtIndex:indexPath.row]);

    }
    else if(tableView == self.searchDisplayController.searchResultsTableView) {
           NSLog("\n Search TableView Selected cell ==> %@",[self.searchResults objectAtIndex:indexPath.row];);

    }
} 
```

并且也在`numberOfRowsInSection`方法设置行中，如下所示......

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    if(tableView == self.tableView) {
             return [self.allItems count];

        }
        else{
               return [self.searchResults count];    
        }
} 
```

我希望这可以帮助你...

# node.js - Nodejs服务器运行错误：TypeError：对象＃的属性“引擎”不是函数

> ID：13743688
> 
> 赞同：0
> 
> 时间：2012-12-06T12:30:16.650
> 
> 标签：node.js, typeerror, express, jst

我正在尝试启动此 NodeJS 服务器，但收到 TypeError 消息，我已将我的 Express 更新到最新版本。我认为 JST 还不能与 express 3 一起使用，但我找不到是这种情况还是我的代码有问题。我的代码如下：

```
**Express 500 
TypeError: Property 'engine' of object #<View> is not a function**

at View.render (C:\wip\node_modules\express\lib\view.js:75:8)
at Function.app.render (C:\wip\node_modules\express\lib\application.js:501:10)
at ServerResponse.res.render (C:\wip\node_modules\express\lib\response.js:719:7)
at C:\wip\server.js:40:7
at callbacks (C:\wip\node_modules\express\lib\router\index.js:160:37)
at param (C:\wip\node_modules\express\lib\router\index.js:134:11)
at pass (C:\wip\node_modules\express\lib\router\index.js:141:5)
at Router._dispatch (C:\wip\node_modules\express\lib\router\index.js:169:5)
at Object.router (C:\wip\node_modules\express\lib\router\index.js:32:10)
at next (C:\wip\node_modules\express\node_modules\connect\lib\proto.js:190:15)

var express = require('express'),
jst = require('jst'),
locales = require('locales');

var app = express();

// Configuration
locales.configure({ locales: __dirname + '/locales' });

app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jst');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(function(req, res, next) { req.lang = 'en'; next(); });
    app.use(locales.detector); // for i18n
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true })); 
});

app.configure('production', function(){
    app.use(express.errorHandler()); 
});

// Routes
app.get('/', function(req, res){
    res.render('index', {
    title: 'Express'
    });
});

if (!module.parent) { app.listen(3000); console.log("Express server running"); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:27:00.597

I figured out that JST does not support Express 3x. So I'm changing to another templating engine like HBS.

# c# - 使用 moq 属性的测试方法

> ID：13743690
> 
> 赞同：1
> 
> 时间：2012-12-06T12:30:25.070
> 
> 标签：c#, unit-testing, moq

这是我的简单代码。

```
public class Permission
  {
    public string Name { get; set; }
    public bool IsEnable { get; set; }
  }

  public class User
  {
    public virtual List<Permission> Permissions { get; set; }

    public bool ContainPermission(string permissionName)
    {      
      var result = Permissions.Where(p => p.Name == permissionName && p.IsEnable).FirstOrDefault();
      return result != null;
    }
  } 
```

我想测试方法 ContainPermission。我正在使用 Moq 并编写以下代码：

```
[TestClass]
  public class UserPermissionTest
  {
    [TestMethod]
    public void UserContainPermission_WhenPermissionEnable_ReturnTrue()
    {
      var mockUser = new Mock<User>();

      mockUser.SetupGet(p => p.Permissions).Returns(
        () => new List<Permission>
                {
                  new Permission {Name = "Name", IsEnable = true}
                });

      var user = mockUser.Object;
      var isContainPermission = user.ContainPermission("Name");

      Assert.IsTrue(isContainPermission);
    }
  } 
```

有用！测试方法通过。但我决定再检查一次。我更改了方法 ContainPermission：

```
public bool ContainPermission(string permissionName)
{
  Permissions.Clear();

  var result = Permissions.Where(p => p.Name == permissionName && p.IsEnable).FirstOrDefault();
  return result != null;
} 
```

我的测试方法也通过了！我不明白为什么？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:38:58.337

因为下面这行，任何时候你请求权限，你总会得到一个结果：

```
mockUser.SetupGet(p => p.Permissions) 
```

当集合为空时，您可以通过编写另一个测试来测试您是否获得了所需的结果，如下所示：

```
[TestMethod]
public void UserContainPermission_WhenNoPermissions_ReturnFalse()
{
  var mockUser = new Mock<User>();

  mockUser.SetupGet(p => p.Permissions).Returns(
    () => new List<Permission>());

  var user = mockUser.Object;
  var isContainPermission = user.ContainPermission("Name");

  Assert.IsFalse(isContainPermission);
} 
```

# xml - 使用自定义工具将 XML 文档转换为 XSD

> ID：13743693
> 
> 赞同：0
> 
> 时间：2012-12-06T12:30:32.220
> 
> 标签：xml, xsd, custom-tools

有谁知道是否可以使用 Visual Studio 中的自定义工具选项从 xml 文档创建 xsd 文件。

简单地说，我想在我的项目中放置一个 xml 文档。为其分配一个自定义工具。此自定义工具将生成 xsd 文件，该文件又利用 Xsd2CodeGenerator 从中生成类。

我想这样做是因为如果有一天我有一个看起来像这样的 xml 文档：

```
<Root>
  <Classes>
    <Class>
      <Property>Some Value</Property>
    </Class>
  <Classes>
</Root> 
```

但是第二天：

```
<Root>
  <Classes>
    <Class>
      <Property>Some Value</Property>
      <Property2>Some Value</Property2>
    </Class>
  <Classes>
</Root> 
```

我意识到这可能看起来很愚蠢，但请耐心等待。我们有 xml 文件，我们经常这样做，出于某种原因！？

我希望它能够自动更新 xml 文件，然后让 xml 文件创建一个 xsd 文件，然后让 xsd 文件创建更新的类...

我看过 xsd 但我想我需要为自定义工具分配某种参数来实现这一点，我认为我做不到。

你在stackoverflow上有什么很棒的想法吗？

# c# - 矩阵与列表 > 索引

> ID：13743700
> 
> 赞同：0
> 
> 时间：2012-12-06T12:30:51.090
> 
> 标签：c#, list

我需要模拟一个数据矩阵，我需要使用`List<List <string >>`. 我使用`IndexOf`来搜索列表列表中的元素。

```
Matrix[0].IndexOf('Search'); 
```

但是有可能制作一种`IndexOf`in`Matrix`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:37:47.817

你可以使用[`FindIndex`](http://msdn.microsoft.com/en-us/library/0k601hd9.aspx)方法：

```
int index = Matrix.FindIndex(x => x[colIndex] == "Search"); 
```

如果您想通过知道要搜索的列来搜索行索引，此方法显然很有用。

如果要在整个矩阵中搜索，可以编写一个简单的方法：

```
public static Tuple<int,int> PositionOf<T>(this List<List<T>> matrix, T toSearch)
{
    for (int i = 0; i < matrix.Count; i++)
    {
        int colIndex = matrix[i].IndexOf(toSearch);
        if (colIndex >= 0 && colIndex < matrix[i].Count)
            return Tuple.Create(i, colIndex);
    }
    return Tuple.Create(-1, -1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:37:41.280

您必须创建自己的课程才能实现它。

```
public class Matrix<T>
{
    public void IndexOf<T>(T value, out int x, out int y){...}
} 
```

或在您的类型上使用扩展名

```
public static void IndexOf<T>(this List<List<T>> list, out int x, out int y){...} 
```

就个人而言，我会在二维数组上进行扩展，而不是`List<List<T>>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:36:26.400

```
for(int i = 0; i<Matrix.Length; i++)
    for(int j = 0; j<Matrix.Length; j++)
        if(Matrix[i][j] == "Search")
        {
            //OUT i,j;
            return;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:40:11.350

您*可能会*要求类似：

*例子*

```
public void MatrixIndexOf(string content) {
      var result = matrix.Select((value, index)=> new {
        _i = index,
       _str = value
      }).Where(x=>x._str.Contains(content));
} 
```

在此之后`result`是匿名类型，`_i`索引在哪里。

# python - ctrl+B 不适用于 sublimetext2 中的 python

> ID：13743701
> 
> 赞同：3
> 
> 时间：2012-12-06T12:30:52.890
> 
> 标签：python, sublimetext2

我想在 sublimetext2 中运行 python 所以我选择构建系统为 python 然后我通过[这个站点](http://wbond.net/sublime_packages/package_control/installation)安装包控制我使用手动安装包的说明我不知道如何重新启动 sublime text2 并按 ctrl+ B 没有显示我尝试打印“hello world”的任何内容，但它什么也没显示。我该怎么做才能让它工作？我在[这样](https://stackoverflow.com/questions/8551735/how-do-i-run-python-code-from-sublime-text-2)的stackoverflow问题中搜索了很多，但我仍然有问题谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:12:14.667

我会尽力帮助你，但根据评论似乎没有希望。按着这些次序：

1.  打开 sublime，转到`Preferences`-> `Browse Packages...`，打开命名的目录`Python`并打开文件`Python.sublime-build`（将其拖到 sublime 中）

2.  它应该如下所示：

    ```
    "cmd": ["python", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python" 
    ```

3.  打开命令行（或任何控制台，以防您不在 Windows 中工作）并键入“cmd”列表中的第一个值，即：`python`然后按 Enter。

4.  如果出现错误，则必须确保 python 在您的环境路径中，如有必要，请重新安装 python。

5.  在确保 python 在您的系统路径中之后，重新启动 sublime（甚至重新启动计算机以确保加载了新环境变量）

6.  在 sublime 中按`ctrl+n`打开新选项卡，输入以下字符串：`print "hello sublime!"`按 enter，现在按`ctrl+s`并将文件保存在某处。

7.  仍然在崇高的按下`ctrl+shift+p`并输入`python`选择`Set Syntax: Python`

8.  转到`Tools`->`Build System`并确保`Automatic`已选中。

9.  按`ctrl+b`，你应该看到类似的东西![那](../Images/10ddeff844bc906a23e7dc4158be2569.png)

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-13T12:23:11.077

我刚遇到同样的问题，不明白为什么它不起作用。然后我查看了控制台日志（**View->Show Console**），发现 Sublime Text 无法正确编码“元音变音”（Unicode 字符 U+0308）。这个问题是因为我有一个名为“Übung”的文件夹，而 ST 无法处理“Ü”。所以我做了以下事情：

1.  关闭文件并退出 Sublime Text
2.  检查了我要执行的文件路径中的每个文件夹名称。
3.  更改了包含非 ASCII 字符的文件夹的名称
4.  再次打开 Sublime Text 和文件
5.  **工具->构建**

它对我有用。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-21T15:55:44.197

在我的情况下，问题是由于**SublimeText\Data\Packages\Default\exec.py**（首先我检查了我的系统控制台中是否识别了**python**）。

然后，我根据[ByScripts 解决方案](https://stackoverflow.com/questions/14715918/sublime-text-2-build-tools-nothing-happens/14716567#14716567)修改了这个文件（**exec.py** ）中的 1 行，问题就解决了。

# android - 如何使用图形 api 将 sdcard 图像发布到 facebook 墙上

> ID：13743702
> 
> 赞同：1
> 
> 时间：2012-12-06T12:31:01.780
> 
> 标签：android

> **可能重复：**
> [如何使用图形 api 将图像发布到 facebook 墙上](https://stackoverflow.com/questions/13740692/how-to-post-image-to-facebook-wall-using-graph-api)

我正在使用 Graph API 在 Facebook 墙上发帖。

```
strpostimageurl=/mnt/sdcard/DCIM/mnt/sdcard/DCIM/Camera1354795516555.jpg

String res = UrltoValue.getValuefromUrl("https://graph.facebook.com/"+Login.facebookid+"/feed?access_token="+accesstoken+"&method="+"post"+"&message="+"hi"+"&link="+strpostimageurl); 
```

我收到错误请求作为回应。

是否可以为发布图像提供 SD 卡路径？我只有对象的位图，所以我用那个位图创建了文件，我正在使用它。

而且我需要在多个朋友墙上发帖，所以我更喜欢使用 Graph API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:55:04.517

您收到*错误请求*错误是因为您将错误的值传递给 Facebook API。

首先，如果您通过链接或 URL 上传图片/照片，则必须使用*“源”*标签，而**不是**代码中的*“链接”*标签。

其次，如果您要解决上述问题，我怀疑代码是否可以正常工作，因为您`strpostimageurl`实际上没有有效的 URL。

第三，因为它不是一个有效的 URL，所以不能使用`"source"`标签。您将需要使用这样的东西：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bmpImageGallery.compress(CompressFormat.JPEG, 100, baos);

Bundle postImgGallery = new Bundle();

// ADD THE PHOTO DATA TO THE BUNDLE
postImgGallery.putByteArray("photo", baos.toByteArray());

// ADD THE CAPTION FROM THE STRING finalStatusMessage TO THE BUNDLE
if (finalStatusMessage.equals(""))  {
    /*****  DO NOTHING HERE     *****/
} else {
    postImgGallery.putString("caption", finalStatusMessage);
}

mAsyncRunner.request("me/photos", postImgGallery, "POST", new PhotoUploadListener(), null); 
```

这里，

1.  `mAsyncRunner``AsyncFacebookRunner Class`是Facebook SDK 的一部分的一个实例。
2.  `bmpImageGallery`是一个实例，`Bitmap`其中存储了用户选择的图像。它使用以下方法从图库中获取用户选择的图像：

这是在打开画廊并让用户从中选择照片/图像的`OnClick`事件上运行的代码：`Button`

```
Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(intent, reqcdGalleryImage); 
```

然后，使用该`onActivityResult()`方法，将所选图像传递给前面代码中使用的`Bitmap`实例：`bmpImageGallery`

```
bmpImageGallery = MediaStore.Images.Media.getBitmap(this.getContentResolver(), targetURI); 
```

**编辑：**

然后试试这个（OnClick）：

```
Intent getCameraImage = new Intent("android.media.action.IMAGE_CAPTURE");

File cameraFolder;

if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
    cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),"give_a_folder_name/camera");
else
    cameraFolder= StatusUpdate.this.getCacheDir();
if(!cameraFolder.exists())
    cameraFolder.mkdirs();

File photo = new File(Environment.getExternalStorageDirectory(), "give_a_folder_name/camera/camera_snap.jpg");
getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
initialURI = Uri.fromFile(photo);

startActivityForResult(getCameraImage, 2); 
```

在这个`onActivityResult()`：

```
targetURI = initialURI;
getContentResolver().notifyChange(targetURI, null);

ContentResolver cr = getContentResolver();

try {

    // SET THE IMAGE FROM THE CAMERA TO THE IMAGEVIEW
    bmpImageCamera = android.provider.MediaStore.Images.Media.getBitmap(cr, targetURI);

    // SET THE IMAGE FROM THE GALLERY TO THE IMAGEVIEW
    imgvwSelectedImage.setImageBitmap(bmpImageCamera);

} catch (Exception e) {
    e.printStackTrace();
} 
```

targetURI 和 initialURI 是全局声明的 Uri 实例

# html - 使用 MVC4 捆绑和 HTML5 异步属性异步加载 javascript 文件

> ID：13743703
> 
> 赞同：39
> 
> 时间：2012-12-06T12:31:08.830
> 
> 标签：html, asp.net-mvc-4, asp.net-optimization, bundling-and-minification

HTML5 具有用于脚本文件的 async 属性，以启用异步加载。

```
<script type="text/javascript" src="myScript.js" async></script> 
```

我可以通过像这样引用捆绑包来利用我的 MVC4 捆绑包。

```
<script type="text/javascript" src='@Scripts.Url("~/bundles/jquery")' async></script> 
```

但这确实意味着我的脚本即使在调试模式下也是捆绑在一起的。

那么如何在调试时利用捆绑和异步属性而不丢失非缩小。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-06T19:51:07.747

如果您升级到 1.1-alpha1 版本，您可以通过以下方式将 async 属性添加到标签格式：

```
Scripts.DefaultTagFormat = @"<script src=""{0}"" async></script>" 
```

或将其传递到您想要异步标记的位置

使用以下而不是 Scripts.Render("~/bundles/jquery")

```
Scripts.RenderFormat(@"<script src=""{0}"" async></script>", "~/bundles/jquery") 
```

# windows-runtime - 在 WinRT 中更改 UI 文化

> ID：13743704
> 
> 赞同：8
> 
> 时间：2012-12-06T12:31:19.647
> 
> 标签：windows-runtime, culture, currentuiculture, uiculture

是否可以即时更改 WinRT 中的 UI 文化？我找到了`ApplicationLanguages.PrimaryLanguageOverride = "en";`，但这仅在显示应用程序 UI 之前有效，之后无效（例如，我想通过设置更改 UI 语言）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:45:28.400

有可能的。[SDK 资源中有一个示例。](http://code.msdn.microsoft.com/windowsapps/Application-resources-and-cd0c6eaa) 有不同的场景。场景 8 展示了如何动态更改语言。

# c# - 从集合中删除冗余数据

> ID：13743705
> 
> 赞同：-1
> 
> 时间：2012-12-06T12:31:18.017
> 
> 标签：c#, entity-framework, collections

从数据库中，我得到一个集合列表，其中包含重复数据，例如 - 列表的总长度为 4，其中包含如下元素

```
Item[0].Id  9
Item[1].Id  10
Item[2].id  9
Item[3].id  10 
```

我希望集合的长度为 2，同时 ID 为

```
Item[0].Id  9, 10
Item[1].Id  9,10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:05:37.247

您的问题有点不清楚，因此我将您的评论作为问题，即您不希望在您的项目集合中出现重复项。如果这确实准确，那么我可以想到两种可能的解决方案：一种是在您从数据库中获取数据时过滤重复项，另一种是在您的 c# 代码中强制执行此操作。

它不会将输出更改为您在示例中放置的两个整数逗号分隔，但从您后来的评论来看，这不是您想要做的。

**SQL 解决方案** 如果您使用 sql 检索数据，您可以使用 distinct，例如：

```
select id from aTable 
```

变成：

```
select distinct id from aTable 
```

**C# 集合解决方案** 您可以使用 arraylist 的内置函数，例如，防止重复：

```
var data = new int[4];
data[0] = 9;
data[1] = 9;
data[2] = 10;
data[3] = 10;

var item = new ArrayList();

foreach (int i in data)
    if (!item.Contains(i)) item.Add(i); 
```

我希望其中之一可以解决您的问题！祝你好运！

# unit-testing - Angular：建模和测试静态家具数据

> ID：13743711
> 
> 赞同：0
> 
> 时间：2012-12-06T12:31:26.913
> 
> 标签：unit-testing, angularjs

这个应用程序有许多下拉菜单和单选集，它们的选项是完全静态的，例如，可以在 HTML 中硬编码。这样做是否被认为是 Angular 的最佳实践，或者在适当的控制器中定义描述它们的数据，然后渲染出来？

对浏览器来说，硬编码显然减少了工作量，但可能并不显着。渲染数据在 HTML 中的代码更少，但在控制器中更多。

你会单元测试这些选项是否符合预期？如果您将单元测试视为要构建的规范，而不仅仅是对预期功能的验证，那么您可能会这样做。据我所知，您希望将它们定义为模型数据来做到这一点。

这方面的典型做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:51:10.603

If you can hard code it, go ahead. It's not going to break anything. You wouldn't have to test a hard-coded select, you could just trust that it was working. Likewise, if you just had an array that was only used to create the select, you wouldn't really have to test that either; because you could just trust that JavaScript works the way it's intended.

I guess you could just weigh the pros and cons:

*   Hard-coded
    *   Pros
        *   faster to render.
        *   less overhead.
        *   easy to understand
    *   Cons
        *   more typing.
        *   data not as reusable.
*   From an Array
    *   Pros
        *   less typing.
        *   *slightly more* reusable by other code.
        *   easier to add new items (if you're lazy, haha)
    *   Cons
        *   more overhead
        *   select takes longer to render out.

"Best practice" is whatever is easiest to maintain, testable, and works.

# windows-phone-8 - Windows Phone 8 中的 Google 地图 API

> ID：13743713
> 
> 赞同：5
> 
> 时间：2012-12-06T12:31:30.060
> 
> 标签：windows-phone-8

只是想知道我们是否可以在 Windows Phone 8 中使用谷歌地图而不是默认的诺基亚地图。有没有人试过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:57:58.870

因此，当您搜索属性只是为了将诺基亚地图数据与谷歌数据交换时，不，这是不可能的。诺基亚地图是矢量格式的地图。并且引擎被集成到操作系统中。

当然，有一些方法可以显示 Google 地图或使用 Google 数据构建地图应用程序。

1）地图/瓷砖混合：使用地图控件并使用顶部的瓷砖源/地图瓷砖层将地图控件与来自谷歌地图REST API的瓷砖重叠。WP7 的示例（在 WP8 中类似）在这里： http: [//pietschsoft.com/post/2010/06/14/Display_Google_Maps_Imagery_using_Bing_Maps_Silverlight_Control.aspx](http://pietschsoft.com/post/2010/06/14/Display_Google_Maps_Imagery_using_Bing_Maps_Silverlight_Control.aspx)

2）独立地图应用程序：在这里您需要完全自己完成。您应该创建一个 DeepZom/MultiScale 类，该类通过 deepzoom 机制从 Google REST API 自动加载切片。在此处查看有关该技术的详细信息：http: [//msdn.microsoft.com/en-us/library/cc645050%28v=vs.95%29.aspx#loading_a_deep_zoom_image](http://msdn.microsoft.com/en-us/library/cc645050%28v=vs.95%29.aspx#loading_a_deep_zoom_image)

# c# - LINQ 检查列表中包含的方法（不考虑空格）

> ID：13743715
> 
> 赞同：1
> 
> 时间：2012-12-06T12:31:32.033
> 
> 标签：c#, linq

我有以下代码检查 userRoles 集合是否具有authorizedRolesList 中的任何值。如果 userRoleName 有空格，则它不起作用。

处理此问题的最有效`LINQ`方法是什么？

代码

```
 List<string> authorizedRolesList = null;
        string AuthorizedRolesValues = "A, B ,C,D";
        if (!String.IsNullOrEmpty(AuthorizedRolesValues))
        {
            authorizedRolesList = new List<string>((AuthorizedRolesValues).Split(','));
        }

        string userRoleName = String.Empty;

        Collection<string> userRoles = new Collection<string>();
        userRoles.Add("B   ");

        bool isAuthorizedRole = false;
        if (userRoles != null)
        {
            foreach (string roleName in userRoles)
            {
                userRoleName = roleName.Trim();
                if (authorizedRolesList != null)
                {
                    //Contains Check
                    if (authorizedRolesList.Contains(userRoleName))
                    {
                        isAuthorizedRole = true;
                    }
                }

            }
        } 
```

参考：

1.  [何时使用 .First 以及何时将 .FirstOrDefault 与 LINQ 一起使用？](https://stackoverflow.com/questions/1024559/when-to-use-first-and-when-to-use-firstordefault-with-linq)
2.  [使用 Linq 与自定义 IEqualityComparer 相交](https://stackoverflow.com/questions/4340273/intersect-with-a-custom-iequalitycomparer-using-linq)
3.  [忽略不区分大小写的字典键中的连字符](https://stackoverflow.com/questions/10829534/ignoring-hyphen-in-case-insensitive-dictionary-keys)
4.  [C#：拆分字符串而不返回空字符串](https://stackoverflow.com/questions/7393119/c-sharp-splitting-a-string-and-not-returning-empty-string)
5.  [IEnumerable.Any(Func) 什么时候返回值？](https://stackoverflow.com/questions/12100393/when-does-ienumerable-anyfunc-return-a-value)
6.  [IEnumerable.Any 是否比带中断的 for 循环快？](https://stackoverflow.com/questions/6359092/is-ienumerable-any-faster-than-a-for-loop-with-a-break)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:39:41.130

我想*最有效的 LINQ 方式* 在这里意味着最易读。

显而易见的方法是[`StringSplitOptions.RemoveEmptyEntries`](http://msdn.microsoft.com/en-us/library/system.stringsplitoptions.aspx)在调用时使用`Split()`而不是首先存储空格。

```
authorizedRolesList = AuthorizedRolesValues.Split(new []{','}, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

但是，如果由于某种原因您想保留额外的空格或无法更改 中的条目`authorizedRolesList`，您可以轻松地将您的`if`子句从

```
if (authorizedRolesList.Contains(userRoleName)) 
```

到

```
if (authorizedRolesList.Any(x => x.Trim() == userRoleName)) 
```

* * *

顺便说一句，谈论 LINQ：

您可以将代码替换为

```
bool isAuthorizedRole = userRoles.Any(ur => authorizedRolesList.Any(ar => ar.Trim() == ur.Trim())) 
```

如果您确保`userRoles`并且`authorizedRolesList`不是`null`（使用空集合代替）。

恕我直言，更具可读性的是

```
bool isAuthorizedRole = userRoles.Intersect(authorizedRolesList, new IgnoreWhitespaceStringComparer()).Any(); 
```

`IgnoreWhitespaceStringComparer`看起来像哪里

```
class IgnoreWhitespaceStringComparer : IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return x.Trim().Equals(y.Trim());
    }

    public int GetHashCode(string obj)
    {
        return obj.Trim().GetHashCode();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:34:35.350

尝试像这样在拆分字符串时删除空格并使用 Trim()

```
 List<string> authorizedRolesList = null;
    string AuthorizedRolesValues = "A, B ,C,D";
    if (!String.IsNullOrEmpty(AuthorizedRolesValues))
    {
        string[] separators = {","};
        authorizedRolesList = new List<string>(
           ((AuthorizedRolesValues)
                  .Split(separators , StringSplitOptions.RemoveEmptyEntries))
                  .Select(x => x.Trim());
    } 
```

然后在下面的代码中使用这样的 Trim()

```
 //Contains Check
                if (authorizedRolesList.Contains(userRoleName.Trim()))
                {
                    isAuthorizedRole = true;
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:35:13.453

只需像这样修剪列表中的每个条目：

```
authorizedRolesList.ForEach(a => a = a.Trim()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T12:51:59.387

```
 string authorizedRolesValues = "A, B ,C,D";

        var authorizedRolesList = authorizedRolesValues
            .Split(new[] {','}, StringSplitOptions.RemoveEmptyEntries)
            .Select(role => role.Trim());

        var userRoles = new Collection<string> {"B   "};

        bool isAuthorizedRole = userRoles
            .Select(roleName => roleName.Trim())
            .Any(authorizedRolesList.Contains); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T12:35:03.700

如何修剪原始列表呢？

`authorizedRolesList = new List<string>((AuthorizedRolesValues).Split(',').Select(x => x.Trim()));`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T12:40:05.193

试试这个

```
bool ifExists = userRoles.Any(AuthorizedRolesValues.Split(',').Select(val => val = val.trim()); 
```

# javascript - 文本框上的换行验证

> ID：13743726
> 
> 赞同：0
> 
> 时间：2012-12-06T12:32:18.907
> 
> 标签：javascript

是否有向 TextArea 添加验证以阻止用户输入换行符（基本上阻止他们按“Enter”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:49:21.390

猜猜这有帮助：

```
<textarea onkeydown="if(event.keyCode == 13) return false;"></textarea> 
```

# c++ - 继承存储持续时间的成员子对象是否有任何不直观的副作用？

> ID：13743727
> 
> 赞同：7
> 
> 时间：2012-12-06T12:32:21.847
> 
> 标签：c++, c++11, language-lawyer

我以前不知道这一点，但[事实证明](https://stackoverflow.com/questions/13743357/location-of-members-of-an-object/13743395#comment18884848_13743395)：

> `[C++11: 3.7.5]:`成员子对象、基类子对象和数组元素的存储时间是它们完整对象的存储时间（1.8）。

这意味着`x->a`在下面的示例中具有动态存储持续时间。

我想知道是否有任何其他地方定义的语义引用存储持续时间，使成员在 object和?`a`之间具有不同的行为？一个例子是管理对象生命周期的规则。`*x``y`

```
struct T
{
   int a;
};

int main()
{
   std::unique_ptr<T> x(new T);
   T y;
} 
```

如果`T`是非 POD（和其他类型的 UDT）呢？

简而言之，我的蜥蜴大脑期望任何看起来`int a;`具有自动（或静态）存储持续时间的声明，我想知道是否有任何标准措辞意外地期望这一点。

* * *

**更新：**

这是一个例子：

> `[C++11: 3.7.4.3/4]:`[..] 或者，实现可能具有严格的指针安全性，在这种情况下，不是安全派生的指针值的指针值是无效的指针值**，除非引用的完整对象具有动态存储持续时间**[..]

从表面上看，我不希望 my`x->a`和 my之间的语义有所不同`y.a`，但很明显，存在与对象生命周期没有明显关系的区域。

我还担心 lambda 捕获规则，它在许多地方明确声明“具有自动存储持续时间”，例如：

> `[C++11: 5.1.2/11]:`如果*lambda 表达式*具有关联的*捕获默认值*及其*复合语句*odr-uses (3.2)`this`或**具有自动存储持续时间的变量**[..]
> 
> `[C++11: 5.1.2/18]:`每次出现`decltype((x))`where`x`是一个可能带括号*的 id 表达式*，它命名**一个自动存储持续时间的实体，**都被视为`x`转换为对闭包类型的相应数据成员的访问，如果`x`是表示实体。

和别的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:44:58.943

不。这种存储持续时间继承是使子对象工作的原因。做其他任何事情都是完全不可能的。否则，您无法设计任何可以静态和动态分配的类型。

简而言之，任何违反此规则的行为都会破坏一切。

# servicestack - 为什么 ServiceStack v3.9.28 nuget 不包含 MiniProfiler 的 SqlServerStorage 类

> ID：13743733
> 
> 赞同：1
> 
> 时间：2012-12-06T12:32:51.490
> 
> 标签：servicestack, mvc-mini-profiler

我使用 nuget 命令获取 ServiceStack dll。我拥有的 3.9.28 不包含 MiniProfiler 命名空间中的 SqlServerStorage 类。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:05:58.017

ServiceStack 包含一个 MiniProfiler 端口，它与 ServiceStack 集成在一起。为了消除冲突，ServiceStack 的端口保存在`ServiceStack.MiniProfiler`命名空间下，您可以在该命名空间中找到[SqlServerStorage.cs](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/MiniProfiler/Storage/SqlServerStorage.cs)类。

# sprite - 在 touch-Andengine 上单独缩放多个精灵

> ID：13743737
> 
> 赞同：1
> 
> 时间：2012-12-06T12:33:26.187
> 
> 标签：sprite, andengine, pinchzoom

我对 andEngine 很陌生，我想在屏幕上添加精灵，让它们在手指触摸时移动和缩放。现在我可以在场景中添加多个精灵，并且可以在触摸时拖动它们。

这是我的代码：

```
public class Main extends SimpleBaseGameActivity {

    @Override

    private Camera camera;
    private BitmapTextureAtlas mBitmapTextureAtlas;
    private ITextureRegion mFaceTextureRegion;
    private ITextureRegion mFaceTextureRegion2;

    private static final int CAMERA_WIDTH = 800;
    private static final int CAMERA_HEIGHT = 480;

    @Override
    public EngineOptions onCreateEngineOptions() {
            camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
            EngineOptions engineOptions = new EngineOptions(true,
                            ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(
                                            CAMERA_WIDTH, CAMERA_HEIGHT), camera);
            return engineOptions;
    }

    @Override
    protected void onCreateResources() {
            BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

            this.mBitmapTextureAtlas = new BitmapTextureAtlas(
                            this.getTextureManager(), 1024, 1600, TextureOptions.NEAREST);

            // background
            // this.background = new Sprite(0, 0,
            // BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mBitmapTextureAtlas,
            // this, "ui_ball_1.png", 0, 0, 1, 1),
            // this.getVertexBufferObjectManager());
            this.mFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory
                            .createFromAsset(this.mBitmapTextureAtlas, this,
                                            "ui_ball_1.png", 0, 0);
            this.mFaceTextureRegion2 = BitmapTextureAtlasTextureRegionFactory
                            .createFromAsset(this.mBitmapTextureAtlas, this,
                                            "ui_ball_1.png", 0, 0);
            this.mBitmapTextureAtlas.load();
            // this.mEngine.getTextureManager().loadTexture(this.mBitmapTextureAtlas);
            /*
             * this.mBitmapTextureAtlas = new
             * BitmapTextureAtlas(this.getTextureManager(), 32, 32,
             * TextureOptions.BILINEAR); this.mFaceTextureRegion =
             * BitmapTextureAtlasTextureRegionFactory
             * .createFromAsset(this.mBitmapTextureAtlas, this, "ui_ball_1.png", 0,
             * 0); this.mBitmapTextureAtlas.load();
             */
    }

    @Override
    protected Scene onCreateScene() {

            /*
             * this.scene = new Scene(); this.scene.attachChild(this.background);
             * this.scene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));
             * return this.scene;
             */
            this.mEngine.registerUpdateHandler(new FPSLogger());

            final Scene scene = new Scene();
            scene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));

            final float centerX = (CAMERA_WIDTH - this.mFaceTextureRegion
                            .getWidth()) / 2;
            final float centerY = (CAMERA_HEIGHT - this.mFaceTextureRegion
                            .getHeight()) / 2;

            final Sprite face = new Sprite(centerX, centerY,
                            this.mFaceTextureRegion, this.getVertexBufferObjectManager()) {
                    @Override
                    public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                                    final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
                            this.setPosition(pSceneTouchEvent.getX() - this.getWidth() / 2,
                                            pSceneTouchEvent.getY() - this.getHeight() / 2);
                            return true;
                    }
            };
            face.setScale(2);
            scene.attachChild(face);
            scene.registerTouchArea(face);

            final Sprite face2 = new Sprite(0, 0, this.mFaceTextureRegion2,
                            this.getVertexBufferObjectManager()) {
                    @Override
                    public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                                    final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
                            this.setPosition(pSceneTouchEvent.getX() - this.getWidth() / 2,
                                            pSceneTouchEvent.getY() - this.getHeight() / 2);
                            return true;
                    }
            };

            face2.setScale(2);
            scene.attachChild(face2);
            scene.registerTouchArea(face2);

            scene.setTouchAreaBindingOnActionDownEnabled(true);
            return scene;

    } 
```

}

现在我想在触摸时缩放每个精灵，但找不到像 setPosition 这样的方法可用于将精灵移动到特定位置。任何人都可以在不影响当前功能的情况下帮助我实现这一目标。任何帮助将不胜感激，可能是代码形式或一些方向/方法来做到这一点。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:44:58.973

您可以使用 EntityModifier 来制作效果：

```
 @Override
      public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                        final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

                this.setPosition(pSceneTouchEvent.getX() - this.getWidth() / 2,
                                pSceneTouchEvent.getY() - this.getHeight() / 2);
                this.clearEntityModifiers();
                this.RegisterEntityModifier(new ScaleModifier(1f,2f,4f));
                 //1f = time to convert the scale of sprite of 2f to 4f
                 //2f = initial scale
                 //4f = finish scale

                 //when you dont touch the sprite back to normal scale
                if(event.getAction()== MotionEvent.ACTION_UP) {
                  this.clearEntityModifiers();
                  this.RegisterEntityModifier(new ScaleModifier(1f,4f,2f));
                  }
                 //you also can work with "MotionEvent.ACTION_DOWN" and
                 //MotionEvent.ACTION_MOVE
                return true;
        } 
```

# java - 操作系统之间的不同java打印实现？

> ID：13743738
> 
> 赞同：0
> 
> 时间：2012-12-06T12:33:28.037
> 
> 标签：java, linux, printing, cups

我正在使用以下代码将 RAW 数据（转义码）发送到打印机：

```
PrintService pservice = this.getPrintService();
DocPrintJob job = pservice.createPrintJob();
DocFlavor flavor = DocFlavor.BYTE_ARRAY.AUTOSENSE;
Doc doc = new SimpleDoc(printdata, flavor, null);
job.addPrintJobListener(this);
    try {
        job.print(doc, null);
... 
```

这在 Windows 中正常工作，打印机解释转义码并按我的预期打印。

在 Linux 中（我安装了驱动程序的 CUPS 版本），当我发送原始数据时，它只是打印一个空白页面并报告打印错误。奇怪的是，如果我使用系统**lpr**命令发送数据，一切正常。

关于可能出错的任何线索？

[注意]随意编辑我的标题，我想不出更好的

[编辑] 这是我得到的错误日志：[LOGS](http://s000.tinyupload.com/index.php?file_id=29789647974116567485)

[edit2]我不太喜欢的解决方案的类似线程：[Java 中的 Linux 打印](https://stackoverflow.com/questions/6228055/linux-printing-in-java)

[edit3] 尝试不同的 DocFlavors 我想出了新的错误：

```
E [07/Dec/2012:17:45:44 +0100] Unknown directive SystemGroup on line 4 of /etc/cups/cupsd.conf.
E [07/Dec/2012:17:45:44 +0100] Unknown directive JobPrivateAccess on line 85 of /etc/cups/cupsd.conf.
E [07/Dec/2012:17:45:44 +0100] Unknown directive JobPrivateValues on line 86 of /etc/cups/cupsd.conf.
E [07/Dec/2012:17:45:44 +0100] Unknown directive SubscriptionPrivateAccess on line 87 of /etc/cups/cupsd.conf.
E [07/Dec/2012:17:45:44 +0100] Unknown directive SubscriptionPrivateValues on line 88 of /etc/cups/cupsd.conf.
W [07/Dec/2012:17:45:44 +0100] CreateProfile failed: org.freedesktop.ColorManager.AlreadyExists:profile id 'LabelWriter-400-Gray..' already exists
W [07/Dec/2012:17:45:44 +0100] CreateDevice failed: org.freedesktop.ColorManager.AlreadyExists:device id 'cups-LabelWriter-400' already exists 
```

这可能指向 CUPS 配置错误吗？

# xslt - 找不到外部方法“...”（必须是公共的）XSLT

> ID：13743742
> 
> 赞同：0
> 
> 时间：2012-12-06T12:33:39.090
> 
> 标签：xslt

我正在尝试使用 XSL 对日期进行一些操作。我在 IBM [developerWorks](http://www.ibm.com/developerworks/library/x-exslt/index.html)上找到了使用此脚本的教程。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:transform
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:date="http://exslt.org/dates-and-times"
        version="1.0"
        >
    <xsl:output method="html"/>

    <!-- B -->
    <xsl:variable name="now" select="date:date-time()"/>

    <xsl:template match="/">
        <!-- The rest of the Web site HTML material would go here -->
        <xsl:call-template name="date-section"/>
    </xsl:template>

    <xsl:template name="date-section">
        <p>This page was loaded at <xsl:text/>
            <!-- C -->
            <xsl:value-of select="concat(date:hour-in-day($now), ':',
                                 date:minute-in-hour($now), ':',
                                 date:second-in-minute($now))"/>
            <xsl:text> on </xsl:text>
            <xsl:value-of select="concat(date:day-in-month($now), ' ',
                                 date:month-name($now), ' ',
                                 date:year($now))"/>
        </p>
        <p>
            <!-- D -->
            <xsl:variable name="days-elapsed"
                          select="concat('-P',date:day-in-month($now),'D')"/>
            <xsl:variable name="one-month-hence"
                          select="date:add($now, 'P1M')"/>
            <xsl:variable name="next-month-start"
                          select="date:add($one-month-hence, $days-elapsed)"/>
            <xsl:variable name="seconds"
                          select="date:seconds(
                            date:difference($now, $next-month-start)
                         )"/>
            <xsl:text>The next month starts in </xsl:text>
            <xsl:value-of select="$seconds div (3600*24)"/>
            <xsl:text> days</xsl:text>
        </p>

    </xsl:template> 
```

我收到以下错误：

```
[ERROR]: Cannot find external method 'com.sun.org.apache.xalan.internal.lib.ExsltDatetime.add' (must be public).
[ERROR]: Cannot find external method 'com.sun.org.apache.xalan.internal.lib.ExsltDatetime.difference' (must be public).
[ERROR]: Cannot find external method 'com.sun.org.apache.xalan.internal.lib.ExsltDatetime.seconds' (must be public).
[ERROR]: Cannot convert data-type 'void' to 'real'.
[FATAL]: Could not compile stylesheet 
```

任何想法如何解决它。我正在使用 IntelliJ 运行 xsl。

最终，我希望能够为日期添加天数。出于某种原因，当我尝试使用 xsl 2 日期函数时，它只是告诉我它们不存在（是的，我确实将标题更改为版本 2 :)）。所以我试图让它与第 3 方库一起工作。*http://exslt.org/dates-and-times*命名空间中的*date-time()*函数正在工作，但我无法从该命名空间调用其他函数。

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T08:28:32.960

这个问题有点老了，但答案是，恕我直言，不太正确，我的回答可能会帮助其他一些偶然发现这个线程的人（就像我刚刚做的那样）：

1.  使用的函数是 XSLT 1.0*扩展*函数，有不同的模块（例如日期和时间），每个模块都有强制和可选的函数（和元素）。见[EXSLT](http://exslt.org/ "提供 XSLT 扩展的社区倡议")
2.  这里的问题是 XALAN 确实支持模块日期和时间，但不支持所有可选功能。
3.  正如建议的那样，您当然可以尝试找到一个“更好”的 XSLT 处理器，但它可能需要一些工作来集成。我个人在 Linux 命令行上使用 xsltproc，它支持更多的日期和时间模块（尝试了解一下`xsltproc --dumpextensions | sort`）。
4.  或者，您可以尝试描述[如何在 XSLT 1.0 中获取当前日期和时间](http://www.heber.it/?p=1053 "在 XSLT 1.0 中获取当前日期和时间")的方法。我自己还没有尝试过（如上所述，xsltproc 是一个足够好的解决方法），但是使用类似的方法，您应该能够实现您需要的东西，而无需接触您的工具/java 代码。
5.  为了完整起见，我遇到同样问题的工具是来自 freeplane.org 的 Freeplane，它也使用 XALAN（我猜它是标准 Java 库的一部分）并且在类似的日期和时间函数上失败。

希望这会有所帮助，埃里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:07:24.407

我不了解 Xalan，所以我不知道为什么它找不到这些方法。

但是，如果您想使用 XSLT 2.0 日期/时间函数，则需要调用 XSLT 2.0 处理器，而对于 Java 环境来说显而易见的是 Saxon（当前版本是 9.4）。切换处理器需要的不仅仅是更改版本号：例如，如果您从命令行运行它，那么您将需要使用不同的命令。*

# windows - 如何运行依赖于詹金斯从属操作系统的詹金斯预构建步骤？

> ID：13743746
> 
> 赞同：0
> 
> 时间：2012-12-06T12:33:56.780
> 
> 标签：windows, macos, glassfish, jenkins

在我的公司中，jenkins 配置了一台 Windows 从机和（即将推出）一台 Mac 从机。我们希望 Glassfish 域作为预构建步骤启动，域在构建后停止。

据我了解，我必须在 Windows 上运行“Windows 批处理文件预构建步骤”，在 Mac 上运行“shell 脚本预构建步骤”。

我可以将两者都放在预构建步骤中吗？或者我应该使用其他解决方案（如果是，是哪一个）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:34:24.120

你不能把两者放在同一份工作中。当作业在 Mac slave 上运行时，“windows 批处理”将失败。当作业在 Windows slave 上运行时，“shell”将失败。

你为什么要同时添加两者？我知道您需要相关的预构建步骤，但是您为什么要尝试使该作业通用以在 Mac 或 Windows 上执行？通常运行 Mac slave 服务于特定目的（例如进行无法在 Window 上完成的 Xcode iOS 构建），并且您将该作业限制为仅在 Mac slave 上运行

如果你真的需要能够运行 Windows 或 Mac shell，那么你应该看看 XShell 插件
[https://wiki.jenkins-ci.org/display/JENKINS/XShell+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/XShell+Plugin)

它允许您在 Windows shell 或 Mac shell 上执行“shell”步骤。该插件将负责调用正确的 shell，甚至会为您进行文件分隔符转换（它将`\`用于 Windows 和`/`Linux/Mac shell），但您放置的命令必须在两个 shell 中都可以执行（即它不会为您翻译`rm`）`del`。插件页面提供了一个示例，您可以如何将命令“包装”到批处理和 shell 文件中。

# c# - 在gridview asp.net c#中更新复选框更改数据库

> ID：13743747
> 
> 赞同：4
> 
> 时间：2012-12-06T12:34:03.143
> 
> 标签：c#

我在 GridView 单元格中有一个复选框。我想在 CheckBox 更改时更新数据库，例如当我取消选中它时，表中的“状态”列更新为 false，反之亦然。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T12:47:37.103

你的问题很不完整。但我会试一试，也许它还是有帮助的。

假设您想在`Checked`状态更改后立即更新（用户单击`CheckBox`），您必须先进行设置`AutoPostBack="true"`。

然后你可以处理[`CheckBox.CheckedChanged`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.checkedchanged%28v=vs.80%29.aspx)事件：

```
protected void Check_Clicked(Object sender, EventArgs e)
{
    // get the checkbox reference
    CheckBox chk = (CheckBox)sender;
    // get the GridViewRow reference
    GridViewRow row = (GridViewRow) chk.NamingContainer;
    // assuming the primary key value is stored in a hiddenfield with ID="HiddenID"
    HiddenField hiddenID = (HiddenField) row.FindControl("HiddenID");

    string sql = "UPDATE dbo.Table SET Status=@Status WHERE idColumn=@ID";
    using (var con = new SqlConnection(connectionString))
    using (var updateCommand = new SqlCommand(sql, con))
    {
        updateCommand.Parameters.AddWithValue("@ID", int.Parse(hiddenID.Value));
        // assuming the type of the column is bit(boolean)
        updateCommand.Parameters.AddWithValue("@Status", chk.Checked);
        con.Open();
        int updated = updateCommand.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:53:21.290

网格源

```
<asp:TemplateField HeaderText="View">
<ItemTemplate>
<asp:CheckBox ID="chkview" runat="server" AutoPostBack="true" OnCheckedChanged="chkview_CheckedChanged" />
</ItemTemplate>
</asp:TemplateField> 
```

C# 代码

```
protected void chkview_CheckedChanged(object sender, EventArgs e)
{
     // code here.
} 
```

# android - 限制数据库android中的重复条目

> ID：13743748
> 
> 赞同：2
> 
> 时间：2012-12-06T12:34:08.780
> 
> 标签：android, sqlite

我知道有很多关于限制数据库中重复条目的问题，但我找不到正确的答案。这是我的 sqliteadapter 类

```
 public class SQLiteAdapter {
public static final String MYDATABASE_NAME = "MY_DATABASE";
public static final String MYDATABASE_TABLE = "MY_TABLE";
public static final int MYDATABASE_VERSION = 1;
public static final String KEY_ID = "_id";
public static final String KEY_CONTENT1 = "Content1";
public static final String KEY_CONTENT2 = "Content2";

//create table MY_DATABASE (ID integer primary key, Content text not null);
private static final String SCRIPT_CREATE_DATABASE =
 "create table " + MYDATABASE_TABLE + " ("
 + KEY_ID + " integer primary key autoincrement, "
 + KEY_CONTENT1 + " text not null,UNIQUE (KEY_CONTENT1)"
 + KEY_CONTENT2 + " text not null" +
        ");";

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;

private Context context;

public SQLiteAdapter(Context c){
 context = c;
}

public SQLiteAdapter openToRead() throws android.database.SQLException {
 sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
 sqLiteDatabase = sqLiteHelper.getReadableDatabase();
 return this;
}

public SQLiteAdapter openToWrite() throws android.database.SQLException {
 sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
 sqLiteDatabase = sqLiteHelper.getWritableDatabase();
 return this;
}

public void close(){
 sqLiteHelper.close();
}

public long insert(String content1, String content2){

      ContentValues contentValues = new ContentValues();

      contentValues.put(KEY_CONTENT1, content1);
      contentValues.put(KEY_CONTENT2, content2);
      return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
}

public int deleteAll(){
 return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
}

public void delete_byID(int id){
 sqLiteDatabase.delete(MYDATABASE_TABLE, KEY_ID+"="+id, null);
}

public Cursor queueAll(){
 String[] columns = new String[]{KEY_ID, KEY_CONTENT1, KEY_CONTENT2};
 Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
   null, null, null, null, null);

 return cursor;
}

public class SQLiteHelper extends SQLiteOpenHelper {

 public SQLiteHelper(Context context, String name,
   CursorFactory factory, int version) {
  super(context, name, factory, version);
 }

 @Override
 public void onCreate(SQLiteDatabase db) {
  // TODO Auto-generated method stub
  db.execSQL(SCRIPT_CREATE_DATABASE);
 }

 @Override
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  // TODO Auto-generated method stub

 }

}

} 
```

在插入之前我想检查它是否是重复值（KEY_CONTENT1）那么它不应该插入。我尝试了很多事情，但什么也没发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:36:39.503

使用 UNIQUE 约束。顺便说一句，替换：

```
+ KEY_CONTENT1 + " text not null,UNIQUE (KEY_CONTENT1)" 
```

经过

```
+ KEY_CONTENT1 + " text not null UNIQUE, " 
```

KEY_CONTENT1 是您的班级成员名称，它不是您表中的字段。

# javascript - 如何在 Android 2.3 中的 contenteditable div 中显示插入符号

> ID：13743750
> 
> 赞同：4
> 
> 时间：2012-12-06T12:34:11.440
> 
> 标签：javascript, android, android-2.3-gingerbread

目前，当我在网页中有以下 HTML 代码时：

```
<div contenteditable="true">
Some content
</div> 
```

并通过 Android-2.3 查看它，我没有看到插入符号。

它存在但不可见，因为当我长按菜单按钮（强制软键盘）时，我可以在该 div 中输入字符。

那么，有谁知道如何在该 div 中强制显示插入符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:42:04.333

根据这篇[关于移动 WebKit 中 contenteditable 的博客文章](http://www.symphonious.net/2010/09/13/contenteditable-in-mobile-webkit/)，这是 Android / WebKit 源代码中的一个错误。考虑到[它在 2010 年 7 月被报告为错误报告](http://code.google.com/p/android/issues/detail?id=9512)，它似乎没有高优先级。但是，WebKit 是开源的，您可以随时考虑自己注册并修复错误。

这有效地防止了在移动设备上使用 TinyMCE、CKEditor、YahooUI 等编辑器，或者至少，您将无法看到插入符号。对不起，我没有更好的消息。

PS：我注意到在 ContentEditable 字段中也无法[选择文本](http://code.google.com/p/android/issues/detail?id=9513)，这是一个相关的错误。

PPS：不确定是否可以使用 JavaScript 来获取插入符号的位置。如果可能的话，您可以通过绘制一条垂直线并让它闪烁来模仿插入符号的行为。也许这就是 Google Docs 为使其在 Android 上运行所做的工作？

# objective-c - renderInContext 不捕获旋转的子视图

> ID：13743755
> 
> 赞同：6
> 
> 时间：2012-12-06T12:34:32.233
> 
> 标签：objective-c, ios, uikit, core-animation

A `UIImageVIew`( `imageView`) 被添加到`self.view`，完美地捕捉到相册的视图：

```
 CGSize size = CGSizeMake(self.view.frame.size.height, self.view.frame.size.width);
 UIGraphicsBeginImageContext(size);
 [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
 UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext();
 UIImageWriteToSavedPhotosAlbum(image, self, nil, nil); 
```

但是，如果`imageView`子视图旋转：

```
 [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"]; 
```

再次捕获`self.view`不会反映旋转。子视图`imageView`好像没有旋转。

如何`renderInContext`使用旋转的子视图制作作品`CABasicAnimation`？

更新：

> 警告：CALayer/-renderInContext: 方法没有实现完整的核心动画合成模型。下面提供的代码将能够解决大多数情况，但是 CALayer/-renderInContext: 方法无法正确呈现某些情况，因此您可能希望联系开发人员技术支持以获取解决方法请求。

官方 Apple 技术问答[QA1703](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)建议联系开发人员技术支持以获取解决方法请求。

是否已经存在解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T04:44:23.867

使用`layer.presentationLayer`而不是`layer`when `renderInContext`。

这是一个用于截取*UIView的**类别*，UIView+Screenshot.h：

 *```
 //
 //  UIView+Screenshot.h
 //
 //  Created by Horace Ho on 2012/12/11.
 //  Copyright (c) 2012 Horace Ho. All rights reserved.
 //
 // Permission is hereby granted, free of charge, to any person obtaining a copy
 // of this software and associated documentation files (the "Software"), to deal
 // in the Software without restriction, including without limitation the rights
 // to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 // copies of the Software, and to permit persons to whom the Software is
 // furnished to do so, subject to the following conditions:
 //
 // The above copyright notice and this permission notice shall be included in
 // all copies or substantial portions of the Software.
 //
 // THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 // FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 // AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 // LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 // OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 // THE SOFTWARE.

 @interface UIView (HHScreenShot)
 - (UIImage *)screenshot:(UIDeviceOrientation)orientation isOpaque:(BOOL)isOpaque usePresentationLayer:(BOOL)usePresentationLayer;
 @end

 @implementation UIView (HHScreenShot)

 - (UIImage *)screenshot:(UIDeviceOrientation)orientation isOpaque:(BOOL)isOpaque usePresentationLayer:(BOOL)usePresentationLayer
 {
     CGSize size;

     if (orientation == UIDeviceOrientationPortrait || orientation == UIDeviceOrientationPortraitUpsideDown) {
         size = CGSizeMake(self.frame.size.width, self.frame.size.height);
     } else {
         size = CGSizeMake(self.frame.size.height, self.frame.size.width);
     }

     UIGraphicsBeginImageContextWithOptions(size, isOpaque, 0.0);

     if (usePresentationLayer) {
         [self.layer.presentationLayer renderInContext:UIGraphicsGetCurrentContext()];
     } else {
         [self.layer renderInContext:UIGraphicsGetCurrentContext()];
     }

     UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

     UIGraphicsEndImageContext();

     return image;
 }

 @end 
```

要使用：

```
 UIImage *image = [self.view screenshot:UIDeviceOrientationPortrait
                               isOpaque:YES 
                   usePresentationLayer:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:13:23.730

从文档中：

> 此方法直接从层树渲染，忽略添加到渲染树的任何动画。

您必须从表示层读取旋转并旋转图形上下文。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T09:37:52.410

您应该能够将 renderInContext 与表示层一起使用。尽管这可能不会为您遍历层层次结构。因此，如果您执行以下任何一项操作，这可能是最简单的：

*   将旋转应用于所有受影响的子层并渲染根层
*   编写一个递归方法来自己手动组合表示层

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T02:05:36.083

正如大卫所说，动画不是由 renderInContext 渲染的。动画应用于仅显示的表示层。

最简单的做法是将旋转应用于禁用隐式动画的 CATransaction 内的图层，然后捕获您的图层。

我相信这会奏效。（但是我没有尝试过那个具体的东西，所以我不是很积极。）

或者，您可以设置动画，以便在动画完成后它们不会保持有效，而是在动画开始之前更改基础属性。然后，当您渲染图层时，子图层应绘制在它们的最终位置。

渲染“飞行中”动画会更加棘手。为此，您需要遍历层树，查询每个层的表示层，并将您正在制作动画的设置传输到基础层。但是，一旦动画完成，这会搞砸您的图层，因此您需要以某种方式保存每个属性的值，将其设置为表示层的“飞行中”值，捕获图像，然后设置属性/每个图层的属性，都在禁用动画的 CATransaction 中。*

# jsf - 将 screen 转换为 primefaces 数据表

> ID：13743767
> 
> 赞同：1
> 
> 时间：2012-12-06T12:35:00.997
> 
> 标签：jsf, datatable, primefaces

我需要使用primefaces在jsf中创建一个数据表，其中我需要一行，其中一列包含带有一个按钮的静态数据。当我单击此按钮时，其他列（在同一行内）应显示一些输入文本应从数据库中填充带有标签和数据的字段。这意味着如果有两条记录，则该行中的列应根据记录数跨越到行数中。这意味着一列将是静态的，另一列在该行中应该动态跨越，并且应该在行内的列中添加一些组件。请帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:55:18.420

嗨，我在某处找到了一些用于动态创建行的示例代码，您可以根据需要进一步嵌套它。

```
 <p:column>
         <f:facet name="header">
             <h:outputLabel value="Field 2" />
         </f:facet>
         <h:outputLabel value="#{myTableVar.Field2}" />
     </p:column>

     <f:facet name="footer">
         <p:commandButton value="New" action="#{myBean.prepareForInsert}" update=":myForm:myPanel"/>
     </f:facet>
</p:dataTable>

<h:panelGrid id="myPanel" columns="2" >
    <h:outputLabel value="Field 1"/>
    <p:inputText id="fld1" value="#{myBean.newRec.field1}" />
    <h:outputLabel value="Field 2"/>
    <p:inputText id="fld2" value="#{myBean.newRec.field2}" />
    <p:commandButton action="#{myBean.createAction}" value="Submit" update="myGrowl myTable" />
</h:panelGrid> 
```

当点击 New 按钮时，在 myBean 的 prepareForInsert 例程中创建一个 newRec 的 emty 实例。这样 myPanel 在字段中填充了空白。在提交时，将 newRec 添加到 list_Recs 中，由于 myTable 上的更新，新记录显示在数据表中。希望这可以帮助。

# javascript - 初始化多维数组时给出错误无法将未定义转换为对象

> ID：13743772
> 
> 赞同：0
> 
> 时间：2012-12-06T12:35:12.847
> 
> 标签：javascript, jquery, multidimensional-array, assign

嗨朋友们，当我初始化多维数组时出现错误

**无法将未定义转换为对象**

当我使用 push() 方法为数组元素分配值而不是 ---> test[i][j]='hi'; 然后它返回错误 => **test[i] undefined** 我唯一想要的是用一些虚拟数据初始化数组

```
 $(document).ready(function (){
       // accordian......
            $(function() {
            $( "#accordion1" ).accordion();
        });

        syncMenu(function(group,subgroup,items){
            grp=group;
            sub_groups=subgroup;
            sub_items=items;        
        });
// get data after parsing using ajax
        getPacakage(function(temp){
            sel_pkg_group=temp;
            fillOptionList();
        });
// intailizing array ...        
        for(var i=0;i<10;i++){
            for(var j=0;j<2;j++){
                test[i][j]='hi';
                            test[i][j]='hi';
            }
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:38:51.643

`test`并且`test[]`未定义，因此您需要先定义它们：

```
var test = [];
for (var i = 0; i < 10; i++) {
    test[i] = [];
    for (var j = 0; j < 2; j++) {
        test[i].push('hi');
    }
} 
```

现在您可以使用`push()`将值推送到`test[i]`.

# ios - 显示所有带有滚动选项的标签（屏幕上应该只有 4 个标签）

> ID：13743777
> 
> 赞同：1
> 
> 时间：2012-12-06T12:35:24.367
> 
> 标签：ios, uiscrollview, ios6, uitabbar, uitabbaritem

我是iOS开发的新手。到目前为止我所做的如下。

1.  创建新项目
2.  删除了所有控制器并添加了视图控制器。
3.  拖入`ScrollView`_`ViewController`
4.  拖入`Tab Bar`_`ScrollView`
5.  拖了 7`Tab Bar Item`个`Tab Bar`。

现在，当我执行这个项目时，屏幕上的所有 7 个选项卡都看起来不太好。所以我计划首先只显示 4 个选项卡，如果用户水平滚动它，用户可以滚动并查看其他选项卡。

**所以，我想要实现的是以编程方式设置一些参数，`ScrollView`因为它只会显示前 4 个选项。**

对此有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:21:23.077

编辑 ：

我认为这个可能更适应这种情况。与 KLHorizo​​ntalSelect 相反，它有点旧（一年没有在 master 分支上提交？）而且我没有使用它的经验，但它可能会解决你的问题：[InfiniTabBar](http://www.cocoacontrols.com/controls/infinitabbar)。

描述很简短：

> 带有无限项空间的滚动标签栏

* * *

也许你可以看看这个控件：[KLHorizo​​ntalSelect](http://www.cocoacontrols.com/platforms/ios/controls/klhorizontalselect)。

这是它的样子：

![在此处输入图像描述](../Images/33267cd7a1eab7944dbffce1ed04726e.png)

我不认为它**看起来**完全符合您的要求，但我认为它几乎可以按您的预期**工作。**也许你可以从事设计工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:11:36.787

到目前为止，您还没有使用任何代码，但您绝对必须这样做才能实现这一目标。我会让你开始：

在视图控制器的底部创建一个滚动视图。在其上创建 UIViews 并使它们的宽度为 640（iPhone Retina 屏幕宽度）。您可以在 UIView 上放置图像和标题，并使它们用作按钮。将内容大小设置为 640/4 *7 即可。您可以为滚动视图的背景提供与 UITabBar 相同的图像，但您需要[这个](http://www.teehanlax.com/downloads/ios-6-gui-psd-iphone-5/).

此代码段可能会帮助您：

```
for (int i = 0; i<7; i++){
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0 + 50*i,0, 50,50);
    [scrollView addSubview:view];
} 
```

您必须将 x 原点乘以 UIView 的宽度（加上一些边距），以确保它们不在同一个位置。

# php - PHP通过url上传图片文件

> ID：13743780
> 
> 赞同：0
> 
> 时间：2012-12-06T12:35:29.133
> 
> 标签：php, image-upload

我想通过网址上传图片

```
'C:\wamp\www\reelstubs\app\webroot\img\movies\0bf522bb76777ba43393b9be5552b263.jpg' 
```

但我想要一个像

```
array(
   'name' => '',
   'type' => '',
   'tmp_name' => '',
   'error' => (int) 4,
   'size' => (int) 0
), 
```

请建议我如何得到它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T14:29:54.203

也许你需要[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)和[http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

结合起来可以试试；

```
// Your file
$file = 'C:\wamp\www\reelstubs\app\webroot\img\movies\0bf522bb76777ba43393b9be5552b263.jpg';

// Open the file to get existing content
$data = file_get_contents($file);

// New file
$new = 'C:\wamp\www\reelstubs\app\webroot\img\movies\newimage.jpg';

// Write the contents back to a new file
file_put_contents($new, $data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:47:47.897

```
 The enctype attribute of the <form> tag specifies which content-type to use when 
    submitting the form.
    "multipart/form-data" is used when a form requires binary data, like the contents of a
     file, to be uploaded
     so please use the post method for uploading a file because post method can handle unlimited data. but get method not not handle more than 8mb data . 
        <html>
          <body>
                <form action="upload_file.php" method="post"
                enctype="multipart/form-data">
                <label for="file">Filename:</label>
                <input type="file" name="file" id="file"><br>
                <input type="submit" name="submit" value="Submit">
                </form>

                </body>
                </html>
    you can handle the array on upload_file.php page .
upload_file.php

<?php
if ($_FILES["file"]["error"] > 0)
  {
  echo "Error: " . $_FILES["file"]["error"] . "<br>";
  }
else
  {
  echo "Upload: " . $_FILES["file"]["name"] . "<br>";
  echo "Type: " . $_FILES["file"]["type"] . "<br>";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
  echo "Stored in: " . $_FILES["file"]["tmp_name"];
  }
?> 
```

# javascript - 为什么 jQuery.data 的行为与 jQuery UI 选项事件内部不同？

> ID：13743782
> 
> 赞同：1
> 
> 时间：2012-12-06T12:35:35.590
> 
> 标签：javascript, jquery, jquery-ui, properties, jquery-data

我正在使用 jQuery v1.8.3 和 jQuery UI v1.9.2。我以这种方式实现了[自动完成](http://api.jqueryui.com/autocomplete)小部件：

```
$('#input_id').autocomplete({
  create: function (event, ui) {
    // Initialize data
    $(this).data( 'custom', { property1: 'Hello', property2: { num: 1, funct: function() { ... return value } } );

    alert($(this).data('custom').property1) // Display 'Hello'
  },

  select: function(event, ui) {
    alert($(this).data('custom').property1) // Display 'Hello'
  },

  source: function(request, response) {
    alert($(this).data('custom').property1) // Display 'undefined'
    alert(this.data('custom').property1)    // I get 'TypeError: this.data is not a function'
  }
}); 
```

*为什么*在我获得的[`source`](http://api.jqueryui.com/autocomplete/#option-source)选项和我获得`undefined`的事件中？我应该如何正确访问选项上下文中的属性以便获取？[`create`](http://api.jqueryui.com/autocomplete/#event-create)[`select`](http://api.jqueryui.com/autocomplete/#event-select)`Hello``number``search``Hello`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:59:08.607

你在那里变得未定义，因为显然`this`内部`source`函数是指匿名函数，而不是你在`create`函数中分配数据的 INPUT。

使用其他方式访问`source`函数内部的输入。

```
$('#input_id').autocomplete({
    create: function (event, ui) {
        // when using "this" here, you're refering to #input_id input
    },
    source: function(request, response) {
        // when using "this" here, you're refering to anonymous function
    }
}); 
```

要在源函数中访问您的数据，请使用以下命令：

```
 // ...
 source: function(request, response) {
     // you don't need to wrap this.element in jQuery again since it is already wrapped
     this.element.data('custom').property1
 } 
```

演示供将来快速参考：http: [//jsbin.com/ojesig/1/edit](http://jsbin.com/ojesig/1/edit)

# python - 如何mpf数组？

> ID：13743785
> 
> 赞同：11
> 
> 时间：2012-12-06T12:35:39.427
> 
> 标签：python, arrays, numpy, mpf, mpmath

我有：

```
import numpy as np
from mpmath import *

mpf(np.array(range(0,600))) 
```

但它不会让我这样做：

```
TypeError: cannot create mpf from array 
```

那我该怎么办？

本质上，我将使用这个数组，并根据情况（例如`1.35626567e1084`或`6.2345252e-2732`）将元素乘以令人难以置信的大或令人难以置信的小数，因此需要 mpf。

更具体地说，我将使用 besseli 和 besselk 函数来创建令人难以置信的大值和小值。

如何获得一个 mpf 数组来保存这些数字？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T17:06:54.623

将数组乘以 mpf 数字即可：

```
import numpy as np
import mpmath as mp
small_number = mp.besseli(400, 2)  # This is an mpf number
# Note that creating a list using `range` and then converting it
# to an array is not very efficient. Do this instead:
A = np.arange(600)
result = small_number * A  # Array of dtype object, ie, it contains mpf numbeers 
```

将包含 mpf 数字的两个数组元素相乘也可以：

```
result * result 
```

所以你真正的问题是如何评估一个 numpy 数组中的 mpmath 函数。为此，我会使用[`np.frompyfunc`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.frompyfunc.html)（前一段时间这是唯一的选择）。

```
besseli_vec = np.frompyfunc(mp.besseli, 2, 1)
besseli_vec(0, A) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T13:28:55.783

签出[`mpmath.arange`](http://mpmath.googlecode.com/svn/trunk/doc/build/general.html?highlight=range#mpmath.arange)：

```
import numpy as np
import mpmath as mp

np.array(mp.arange(600)) 
```

# java - java程序的动态分析

> ID：13743787
> 
> 赞同：1
> 
> 时间：2012-12-06T12:35:50.437
> 
> 标签：java, profiling, callstack, call-graph, command-line-tool

我想动态分析一个相当大的java程序。更具体地说，我想为程序的一次运行生成一个动态调用图。是否有命令行分析器来生成这样的图表。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:44:40.170

我认为您应该尝试[btrace](http://kenai.com/projects/btrace)，它是 Java 程序的诊断工具。您可以从 wiki 页面获得足够的信息，以及大量示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:21:45.473

[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)可以生成调用图：

![在此处输入图像描述](../Images/95d59bdce6acb3011140f5ef456af6aa.png)

通过定义触发器或使用`jpcontroller`命令行实用程序，您可以在不使用 JProfiler GUI 的情况下进行分析。之后，您可以在 JProfiler GUI 中打开快照以查看调用图。

免责声明：我公司开发 JProfiler。

# c# - C# SQL 命令参数，将值从表单“传输”到对象再到方法

> ID：13743789
> 
> 赞同：0
> 
> 时间：2012-12-06T12:35:54.337
> 
> 标签：c#, object, between, transport

我对 SQL 命令参数完全陌生（我昨天已经简要解释了这个概念，可能不明白），通常是 OOP，但我喜欢它：D

[这是我昨天的问题的链接；）](https://stackoverflow.com/questions/13732665/insert-numerical-decimal-data-from-textbox-values) 伙计们确实提供了帮助，但是我现在很难在我的应用程序中实现这一点

我实际上已经构建了一个示例：

*   表单“formConnection.cs”包含 2 个用户输入“comboBoxEmployeeId”（selectedvalue 是一个 int）+“txtDuration”（值是一个小数），点击“btnInsert”我会处理这个：`

    ```
    sqlDbOperations sqlDbOp = new sqlDbOperations();`

    public void btnInsert_Click(object sender, EventArgs e)
    {
        //Create new contract
        var contract = new contract{
            employeeId = Convert.ToInt32(this.comboBoxEmployeeName.SelectedValue),
            duration = Convert.ToDecimal(this.txtDuration.Text)
        };

        //Insert command to Db
        sqlDbOp.insertContract();

        MessageBox.Show("Done");
    } 
    ```

*   类“合同.cs”

    `class contract { public int employeeId { get; set; } public decimal duration { get; set; } }`

*   类“sqlDbOperations.cs”

    public class sqlDbOperations { //连接字符串 //SqlConnection myConnection = new SqlConnection("ATLELAG786576\SQLEXPRESS;Initial Catalog=TEST;Integrated Security=False;Connect Timeout=30;User Instance=False;User ID=basicuser;Password=basicpw" ); SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["EngAdminSqlDbConnectionString"].ConnectionString);

    ```
     //Connection open
        //SqlConnection.Open() is a void function and does not return an error but throws an exception so remember to put it in a try/catch brace
        //Rather than having the program explode in front of the user
        public void openConnection()
        {
            //Connection open
            try
            {
                myConnection.Open();
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
                MessageBox.Show(e.ToString());
            }
        }

        //Connection close
        //Try/catch because like SqlConnection.Open() it does not return errors but throws an exception instead
        public void closeConnection()
        {
            try
            {
                myConnection.Close();
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        }

        contract contract = new contract();

        public void insertContract()
        {
            //Open
            openConnection();

            //Command
            SqlCommand myCommand = new SqlCommand("INSERT INTO tblContracts (EmployeeId, Duration) VALUES (@employeeId, @contractDuration)", myConnection);

            //Get values from form
            formConnection formInput = new formConnection();

            //Add parameters
            myCommand.Parameters.AddWithValue("@employeeId", contract.employeeId);
            myCommand.Parameters.AddWithValue("@contractDuration", contract.duration);

            //Execute
            myCommand.ExecuteNonQuery();

            //Close
            closeConnection();

        }
    } 
    ```

这不起作用 - 当我在我的 txtDuration 文本框中输入像 2.7 这样的“十进制”值时，我仍然收到一条消息：

*System.FormatException：Le format de la chaîne d'entrée est 不正确。**= "输入字符串格式不正确"** à System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)à System.Number.ParseDecimal(String value, NumberStyles options, NumberFormatInfo numfmt)à System .Convert.ToDecimal(String value) à SQLStatementParameters.formConnection.btnInsert_Click(Object sender, EventArgs e) dans D:\C#\Projects\SQLStatementParameters\SQLStatementParameters\formConnection.cs:ligne 26à System.Windows.Forms.Control.OnClick(事件参数 e)"......*

*   数据库中没有存储任何内容（好像这些值没有从表单传输到对象“合同”，然后传输到执行 INSERT 的方法），我有一条新记录，但它都是空的

我究竟做错了什么？感谢您的帮助！

布莱斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:58:05.467

您的数据库中的 dataType 是什么`Duration`，请确保它应该是`numeric(19,6)` 接受十进制值的数据类型或数据类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:03:44.153

这些值实际上并未传输到您的 sql 命令中。您在“sqlDbOperations”类中创建的类合同实例与您在 btnInsert_Click 中创建的不同。您需要传输在 btnInsert_Click 中创建的一个`sqlDbOp.insertContract();`以插入数据库。

所以你可以做这样的事情：

```
public void insertContract(contract con)
{
    //Open
    openConnection();

    //Command
    SqlCommand myCommand = new SqlCommand("INSERT INTO tblContracts (EmployeeId,   Duration) VALUES (@employeeId, @contractDuration)", myConnection);

    //Get values from form
    formConnection formInput = new formConnection();

    //Add parameters
    myCommand.Parameters.AddWithValue("@employeeId", con.employeeId);
    myCommand.Parameters.AddWithValue("@contractDuration", con.duration);

    //Execute
    myCommand.ExecuteNonQuery();

    //Close
    closeConnection();
} 
```

对于异常“输入字符串格式不正确”。也许你可以参考这个[链接](https://stackoverflow.com/questions/4741385/input-string-was-not-in-a-correct-format-decimal-to-string)

# core-graphics - Core-Graphics (iPhone) - 我们能知道 CGPath 是否关闭吗？

> ID：13743791
> 
> 赞同：4
> 
> 时间：2012-12-06T12:36:15.073
> 
> 标签：core-graphics

是否有任何解决方法可以知道 a `CGpath`（使用坐标数组创建）在哪里*关闭*。

我无法在标题中找到任何合适的方法`CGPath`。

*我希望跟踪用户跟踪的路径。如果它是一个闭环，那么我希望从上下文中提取该部分。诸如屏蔽或剪辑上下文之类的东西，但它应该是用户跟踪的剪辑。*

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-06T17:07:55.137

实际上，一条路径可以由多个子路径组成。当您移动路径的当前点而不连接两个点时，将创建一个新的子路径。对于要关闭的路径，它的所有子路径实际上必须是关闭的。

```
extension CGPath {

    /// Note that adding a line or curve to the start point of the current
    /// subpath does not close it. This can be visualized by stroking such a
    /// path with a line cap of `.butt`.
    public var isClosed: Bool {
        var completedSubpathsWereClosed = true
        var currentSubpathIsClosed = true

        self.applyWithBlock({ pointer in
            let element = pointer.pointee

            switch element.type {
            case .moveToPoint:
                if !currentSubpathIsClosed {
                    completedSubpathsWereClosed = false
                }

                currentSubpathIsClosed = true
            case .addLineToPoint, .addQuadCurveToPoint, .addCurveToPoint:
                currentSubpathIsClosed = false
            case .closeSubpath:
                currentSubpathIsClosed = true
            }
        })

        return completedSubpathsWereClosed && currentSubpathIsClosed
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-16T04:06:19.740

以防你在过去的 4 1/2 年一直坚持这一点，这里是如何在 Swift 3 中做到这一点。我从[这个答案中](https://stackoverflow.com/a/36374209/1677693)**大量**借鉴。我真的只是添加了这个功能。`isClosed()`

```
extension CGPath {

func isClosed() -> Bool {
    var isClosed = false
    forEach { element in
        if element.type == .closeSubpath { isClosed = true }
    }
    return isClosed
}

func forEach( body: @convention(block) (CGPathElement) -> Void) {
    typealias Body = @convention(block) (CGPathElement) -> Void
    let callback: @convention(c) (UnsafeMutableRawPointer, UnsafePointer<CGPathElement>) -> Void = { (info, element) in
        let body = unsafeBitCast(info, to: Body.self)
        body(element.pointee)
    }
    print(MemoryLayout.size(ofValue: body))
    let unsafeBody = unsafeBitCast(body, to: UnsafeMutableRawPointer.self)
    self.apply(info: unsafeBody, function: unsafeBitCast(callback, to: CGPathApplierFunction.self))
}
} 
```

并假设`path`是`CGPath`or `CGMutablePath`，这是你如何使用它：

```
path.isClosed() 
```

# haskell - 在 Haskell 中建模循环调度程序时的非法数据类型上下文

> ID：13743793
> 
> 赞同：1
> 
> 时间：2012-12-06T12:36:19.283
> 
> 标签：haskell, typeclass, algebraic-data-types

我正在建模 Haskell 中的循环调度程序。

```
class Schedulable s where
  isFinal :: s -> Bool

class Scheduler s where
  add :: (Schedulable a) => a -> s -> s
  next :: (Schedulable a) => s -> (a, s)
  empty :: s -> Bool

data Schedulable a => RoundRobin = RoundRobin [a] [a]

instance Scheduler RoundRobin where
  add p (RoundRobin ps qs) = RoundRobin (ps ++ [p]) qs

  next (RoundRobin []     qs) = next (RoundRobin qs [])
  next (RoundRobin (p:ps) qs) = (p, RoundRobin ps (qs ++ [p]))

  empty (RoundRobin [] _) = True
  empty _                 = False 
```

然而，GHC 抱怨说

```
main.hs:9:6:
    Illegal datatype context (use -XDatatypeContexts): Schedulable a => 
```

我该如何解决这个问题？

我还看到[了关于删除数据类型上下文的建议](http://hackage.haskell.org/trac/haskell-prime/wiki/NoDatatypeContexts)，那么如何在不使用数据类型上下文的情况下对调度程序进行建模呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T14:33:47.530

你的`Scheduler`班级

```
class Scheduler s where
  add :: (Schedulable a) => a -> s -> s
  next :: (Schedulable a) => s -> (a, s)
  empty :: s -> Bool 
```

不会工作。

`add`承诺可以将任何`Schedulable`类型的值添加到调度程序中。这是可能的，但它需要扩展，`ExistentialQuantification`或者`GADTs`允许定义包装*任何* `Schedulable`值的类型。

`next`但是，它承诺提供*任何* `Schedulable`类型的值，无论调用者想要什么，但这是行不通的。如果我只`Int`向调度程序添加值，然后要求 a `String`，它将如何凭空构建一个？

让你的代码工作的一种方法是

```
{-# LANGUAGE GADTs #-}
module Schedules where

class Schedulable s where
  isFinal :: s -> Bool

class Scheduler s where
  add :: (Schedulable a) => a -> s -> s
  next :: s -> (Schedule, s) -- returns a Schedulable item of unknown type, wrapped in a Schedule
  empty :: s -> Bool

-- Wrapper type for any Schedulable
data Schedule where
    Schedule :: Schedulable a => a -> Schedule

-- Equivalent alternative using existential quantification instead of GADT syntax
-- data Schedule = forall a. Schedulable a => Schedule a

-- make Schedules Schedulable, maybe not necessary
instance Schedulable Schedule where
    isFinal (Schedule s) = isFinal s

-- RoundRobin queues schedulable items, wrapped as Schedules, since lists are homogeneous
data RoundRobin = RoundRobin [Schedule] [Schedule]

-- How RoundRobin works
instance Scheduler RoundRobin where
  -- enqueue item after wrapping it
  add p (RoundRobin ps qs) = RoundRobin (ps ++ [Schedule p]) qs

  -- deliver next item to process
  -- the first equation suggests that (Maybe Schedule, s) would be the better return type
  next (RoundRobin []     []) = error "Nothing to schedule"
  next (RoundRobin []     qs) = next (RoundRobin qs [])
  next (RoundRobin (p:ps) qs) = (p, RoundRobin ps (qs ++ [p]))

  empty (RoundRobin [] _) = True
  empty _                 = False 
```

使用`GADT`语法或存在量化使得强加在构造函数上的约束可以通过模式匹配获得，这与旧的相反`DatatypeContexts`，尽管有类型的约束，但需要将上下文放在使用该类型的函数上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T12:57:42.723

不建议将约束定义为`data`定义（请参阅[Learn Haskell...](http://learnyouahaskell.com/making-our-own-types-and-typeclasses)）。

最好将约束设置为函数。

（无论如何，您可以设置 DatatypeContexts 修饰符）

# linux - awk 是否可能仅在 4 个字符长时输出？

> ID：13743794
> 
> 赞同：2
> 
> 时间：2012-12-06T12:36:19.880
> 
> 标签：linux, bash, awk

如果我做

```
awk -F: '{print $1}' /etc/passwd 
```

然后我得到所有的用户名。

**问题**

是否有可能只输出 4 个字符长的 awk？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T12:37:42.250

使用长度函数：

```
awk -F: 'length($1)==4{print $1}' /etc/passwd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:39:33.480

尝试

```
awk -F: '( $1 ~ /^....$/ ){print $1}' /etc/passwd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:29:45.987

```
perl -F -lane 'print $F[0] if(length($F[0])==4)' /etc/passwd 
```

# ios - 如何使用 Apple Maps 在 iOS 6 中的地图上绘制图钉？

> ID：13743798
> 
> 赞同：0
> 
> 时间：2012-12-06T12:36:30.140
> 
> 标签：ios, dictionary

如何在 iOS 6 中的地图上绘制图钉？

我们在 iOS 5 中使用 mapkit 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:33:12.833

它的工作方式（几乎）与 iOS 5 中**完全相同**。在 iOS 6 中，MapKit 当然已经更新，但框架的工作方式相同。主要的变化是地图提供商，从谷歌改为苹果。这根本不会改变您使用`MKMapKit` **框架**的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:01:52.757

它在 iOS 5 和 6 中完全相同。如果您需要示例，Apple 的[MapCallouts](http://developer.apple.com/library/ios/#samplecode/MapCallouts/Introduction/Intro.html)项目将引导您完成。

# iphone - SKProductRequest 在没有连接的情况下不会失败

> ID：13743799
> 
> 赞同：0
> 
> 时间：2012-12-06T12:36:35.133
> 
> 标签：iphone, ios, in-app-purchase, storekit

我想处理在没有互联网连接的情况下请求应用内购买产品的情况。

在模拟器和设备中测试这种情况时（通过关闭 wi-fi），我没有`request:didFailWithError:`收到对 的调用，而是收到一个`productsRequest:didReceiveResponse:`带有空产品数组的调用，然后是对`requestDidFinish:`。

这是预期的行为吗？如果是这样，我如何知道请求是否由于连接问题而失败？如果没有，可能有什么问题？

如果有帮助，这就是我要求产品的方式：

```
- (void) requestProducts:(NSSet*)identifiers
{
    _productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:identifiers];
    _productsRequest.delegate = self;
    [_productsRequest start];
} 
```

我正在使用 iOS 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:47:31.553

我不知道它是否是预期的行为，因为文档在这个主题上有点稀疏。但是我总是自己做检查，所以我可以向用户提供很好的错误消息，因为似乎有一半的时间 StoreKit 错误是非常不起眼的。这是我在最近的一个项目中使用的一些代码。

我有自己的 storeManager 委托来简化调用和继承，但应该很清楚发生了什么。

```
#pragma mark - Purchase Methods

- (void)purchaseProduct:(SKProduct *)product
{
    // Check Internet
    if ([self checkInternetConnectionAndAlertUser:YES]) {

        // Check Restrictions
        if ([self checkRestrictionsAndAlertUser:YES]) {

            // Check Products
            if ([_products containsObject:product]) {

                // Purchase the product
                [[SKPaymentQueue defaultQueue] addPayment:[SKPayment paymentWithProduct:product]];

            } else {
                [[[UIAlertView alloc] initWithTitle:@"Error" message:@"Sorry, we couldn't find that product." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] show];
                [self.delegate purchaseDidFailWithError:[NSError errorWithDomain:@"SDInAppPurchaseManager" code:404 userInfo:@{ NSLocalizedDescriptionKey : @"Product not found." }]];
            }
        } else {
            // Not allowed to make purchase
            [self.delegate requestdidFailWithError:[NSError errorWithDomain:@"SDInAppPurchaseManager" code:500 userInfo:@{ NSLocalizedDescriptionKey : @"Not authorized to make purchases." }]];
        }
    } else {
        // No Internet
        [self.delegate requestdidFailWithError:[NSError errorWithDomain:@"SDInAppPurchaseManager" code:300 userInfo:@{ NSLocalizedDescriptionKey : @"No internet connection." }]];
    }
}
#pragma mark - Checks

- (BOOL)checkInternetConnectionAndAlertUser:(BOOL)alert
{
    if ([[SDDataManager dataManager] internetConnection]) {
        return YES;
    } else {
        // Alert the user if necessary.
        if (alert) {
            [[[UIAlertView alloc] initWithTitle:@"No Connection" message:@"You don't appear to be connected to the internet. Please check your connection and try again." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] show];
        }

        return NO;
    }
}

- (BOOL)checkRestrictionsAndAlertUser:(BOOL)alert
{
    if ([SKPaymentQueue canMakePayments]) {
        return YES;
    } else {
        // Alert the user if necessary.
        if (alert) {
            [[[UIAlertView alloc] initWithTitle:@"Purchases Disabled" message:@"In App Purchasing is disabled for your device or account. Please check your settings and try again." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] show];
        }

        return NO;
    }
} 
```

# android - 适用于 android 和 IOS 的 AIR 本机 c++ 扩展

> ID：13743809
> 
> 赞同：3
> 
> 时间：2012-12-06T12:36:55.943
> 
> 标签：android, ios, air, adobe, native

我想编写一个使用本机 c++ 代码的 Flex 应用程序。该应用程序必须能够在 Android 和 IOS 上运行。根据 adobe，如果我希望它在 Android 上运行，我必须将 c++ 编译为共享库（.so），并编译为 IOS 的静态库（.a）。

是否可以将相同的 c++ 代码编译为共享和静态库？或者有没有更好的方法在 Android 和 IOS 上使用相同的原生 c++ 代码？

# java - 如何从带有附件的java程序打开默认的电子邮件客户端，如Ms Outlook、Lotus、Thunderbird？

> ID：13743810
> 
> 赞同：2
> 
> 时间：2012-12-06T12:37:00.110
> 
> 标签：java, outlook, email-attachments, email-client

虽然这个问题在论坛上被问了很多次。至少对于 Java，我没有找到解决方案。我用谷歌搜索但徒劳无功。

我的要求：我必须在用户机器上打开默认的电子邮件客户端（如 MS Outlook、Lotus、Thunderbird），它应该自动将文件附加到电子邮件客户端。我的问题：我无法附加文件。我尝试了列出的各种方法。但它没有附加文件。我在 Lotus Notes 8.5 中附加文件有点成功。但没有找到适用于 Outlook 和其他电子邮件客户端的解决方案。

我的方法： 1\. 下面的代码在 Lotus Notes 8.5 上运行良好，并且会自动匹配文件。但不能在其他客户端工作

```
Desktop fDesktop = Desktop.getDesktop();
String url = 
"mailTo:you@xyz.com,me@abc.com" (mailTo:you@xyz.com,me@abc.com%27) + 
"?subject=" + getEmailSubject() + 
 "&body=" + getEmailBody()+
 "&Attach=C:/temp/blah.txt";
 URI mailTo = new URI(url);
 fDesktop.mail(mailTo); 
```

2.我们的大部分用户都是outlooks用户。所以我想要一些可以与 Outlook（2007 和 2010）一起使用的解决方案。对于 Outlook，我尝试了以下操作。但徒劳无功。它确实使用 To、Subject 和 Body 打开客户端，但不附加文件。另外我收到“命令行参数无效。请验证开关”。我也尝试使用 swicthes，但不确定我是否以正确的方式进行操作。

```
 <a href='mailto:recip@domain.com?subject=Some subjectl&body=Bodytext.&attachment=""C:\temp\blah.txt""'>Click here 1</a>

       <a href='c:\program files\microsoft office\office12\outlook.exe' /c ipm.note /m   someone@gmail.com /a 'c:\temp\blah.txt'>Click here 2</a>

       <a  onclick="window.close();" href="mailto:?subject= Report&amp;body=Attach Report%0A as an email attachment%0A%0AFor 2008 April.&amp;&quot;&quot;C:\temp\blah.txt">Click here 3</A>

       <a  onclick="window.close();" href="mailto:?subject= Report&amp;body=Attach Report%0Aas%20an%20email%20attachment%0A%0AFor%202008%20April%2E&amp;&quot;&quot;C%3A%5Ctempt%5Cblah%2Etxt">Click here 4</a> 
```

我需要专家对此的建议。我急需这个项目。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T10:05:22.107

在操作系统级别，无论哪个电子邮件客户端设置为默认值，都会弹出一个。如何设置它在链接 [http://answers.microsoft.com/en-us/windows/forum/windows_7-windows_programs/unable-to-use-lotus-notes-as-default-e-mail/中明确给出3be3a8e6-a2e6-42b6-99bb-cd2e29740507](http://answers.microsoft.com/en-us/windows/forum/windows_7-windows_programs/unable-to-use-lotus-notes-as-default-e-mail/3be3a8e6-a2e6-42b6-99bb-cd2e29740507)。

我们是这样做的。

# html - 在移动平台/浏览器上覆盖字体 Verdana

> ID：13743813
> 
> 赞同：0
> 
> 时间：2012-12-06T12:37:35.683
> 
> 标签：html, css, mobile, fonts

为我的主要网站制作移动网站。我所有的代码都应该经过 W3C 验证。我使用 Verdana 作为字体，任何人都知道 MAC/Iphone/Ipad 没有那种字体。所以我想如果我只是覆盖字体怎么办。但是如果： 一：代码是 W3C 的吗？回答：是的。二：它可以在所有移动平台/浏览器上运行吗？答：IDK 你告诉我，这个世界上的新人。

这是我要使用的 CSS 代码：

```
@font-face
{
font-family: jsverdana;
src             :url('fonts/verdana.ttf')
                ,url('fonts/verdana.eot'); /* IE9 */
}

body{
    background-color    :#FFFFFF;
    background-image    :url('/media/common/newbgtest.gif');
    font-family         :jsverdana,helvetica, sans-serif;
    margin              :0;
    padding             :0;
    min-width           :600px;
} 
```

是的，我确实转换了字体“Verdana”这是在 Iphone 4 和 Ipad 1 上测试的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:46:45.870

不同的设备需要不同的字体格式，因此如果您使用可下载字体（网络字体），您应该使用 FontSquirrel 等服务来生成所有字体（以及使用它们的 CSS 代码）。

另一方面，Microsoft 拥有 Verdana 的版权，因此您需要获得他们的许可才能将其用作可下载字体（甚至将其转换为其他格式）。

更现实的方法是尝试找到合适的免费字体，也许是 Google Web Fonts 上相当不错的无衬线字体。或者也许只是让每个没有 Verdana 的设备使用自己的无衬线字体（当你设置时会发生这种情况`font-family: Verdana, sans-serif`）。

# macos - Shellscript循环遍历所有文件并调整符号链接

> ID：13743814
> 
> 赞同：0
> 
> 时间：2012-12-06T12:37:40.547
> 
> 标签：macos, bash, loops, symlink

我试图让[libetpan](https://github.com/dinhviethoa/libetpan)在 iOS 上启动并运行，但是他们的设置 shell 脚本似乎有问题（问题在这里更[详细地](https://github.com/dinhviethoa/libetpan/issues/48#issuecomment-11030688)解释）.. 但基本上我有一个文件夹，其中包含一长串指向无处的符号链接，即

```
mhdriver_types.h -> ../../src/driver/implementation/mh/mhdriver_types.h 
```

事实上它应该是

```
mhdriver_types.h -> ../../../src/driver/implementation/mh/mhdriver_types.h 
```

我想编写一个循环遍历所有符号链接的shell脚本，删除每个符号链接，然后为它重新创建一个符号链接到同一个以前的目的地，只有一个子目录更深..基本上做我在示例中对所有文件所做的事情..

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:33:42.933

受 anishsane 的[回答](https://stackoverflow.com/a/13743979/766570)启发，我得到了这个有效的代码：

```
for name in $(find . -type l); do
    tgt=`readlink "$name"`
    ln -sf ../$tgt
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:48:57.407

尝试：

```
find $DIR_PATH -type l | while read x; do tgt=`readlink "$x"`; ln -sf ../$tgt $x; done 
```

# django - 如何在 Django 中修复此错误 - 未定义变量：etree

> ID：13743819
> 
> 赞同：0
> 
> 时间：2012-12-06T12:37:44.213
> 
> 标签：django, django-forms

我是菜鸟:) 我正在尝试在这篇文章中使用@Rune 的答案之一[在 django 表单中，如何使字段只读（或禁用）以使其无法编辑？](https://stackoverflow.com/questions/324477/in-a-django-form-how-to-make-a-field-readonly-or-disabled-so-that-it-cannot-b)但我有一个标题中所述的错误。

谁能帮我这个。我确实尝试使用

> 从 lxml 导入 etree - 获取错误未解决的导入：etree

还有这个

> from xml.etree import ElementTree as etree - 从 import:formstring 获取错误未定义变量

编码

```
class ReadOnlyWidget(forms.Select):

def __init__(self, initial_widget, *args, **kwargs):
    self.initial_widget = initial_widget
    super(ReadOnlyWidget, self).__init__(*args, **kwargs)

def render(self, *args, **kwargs):
    def guess_readonly_text(original_content):
        root = etree.formstring("<span>%s</span>" % original_content)

        for element in root:
            if element.tag == 'input':
                return element.get('value')

            if element.tag == 'select':
                for option in element:
                    if option.get('selected'):
                        return option.text

            if element.tag == 'textarea':
                return element.text

        return "N/A"

    original_content = self.initial_widget.render(*args, **kwargs)
    try:
        readonly_text = self.initial_widget.render_readonly(*args, **kwargs)
    except AttributeError:
        readonly_text = guess_readonly_text(original_content)

    return mark_safe("""<span class="hidden">%s</span>%s""" %(original_content, readonly_text)) 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:43:12.700

应该是`fromstring`，不是`formstring`。

# svn - Subversion：将分支合并到主干时文件比预期的多

> ID：13743823
> 
> 赞同：2
> 
> 时间：2012-12-06T12:38:07.633
> 
> 标签：svn, merge, intellij-idea

我有一个分支，而不是我想合并到主干。

*   首先，我将主干合并到分支中，以对其进行更新。

*   之后我更新主干（本地）也有它与最后的变化。

*   下一步是将分支合并到主干。

当我在本地主干中看到已更改的文件（提交之前）时，我看到我有来自我的项目的文件，但也有来自我的项目的文件。

这些文件可能来自从主干到分支的错误合并。

现在最好的选择是什么？将所有文件从主干的第一个修订版合并到分支（创建分支时）？我想这样我会遇到很多冲突。从主干创建一个新分支并从我的项目中放入这个分支文件？这意味着再次进行测试。

有任何想法吗？

谢谢你的时间

编辑：只有我的项目的提交文件可能是最好/最快的解决方案？？（90 个文件只提交 45 个文件来自我的项目）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:35:11.263

那些被*修改*的文件，是文件内容被修改了，还是它们的属性值被修改了？

每当我听到有人告诉我合并更改了太多文件时，我发现问题通常出在`svn:mergeinfo`属性上。Subversion 轨道通过设置此属性进行合并。如果你总是在项目的根目录进行合并，那么只有根目录会有这个属性集，所有文件都会共享它。如果您进行单个文件合并，所有这些文件都将具有一个`svn:mergeinfo`属性集，并且每次您进行合并时，这些文件中的每一个都将被*修改*，因为`svn:mergeinfo`所有这些文件上的文件也必须被修改。

无论您做什么，都不要还原这些文件以消除合并。这只会让事情变得更糟。将`svn:mergeinfo`显示这些文件尚未针对这些修订进行合并，下次您进行合并时，Subversion 将重做合并，并`svn:mergeinfo`再次更新。

# javascript - 压缩一个javascript

> ID：13743824
> 
> 赞同：-1
> 
> 时间：2012-12-06T12:38:11.437
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何混淆 JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

我希望我的 js 不被任何人理解。我在这个网站上阅读了一些类似的帖子，但可以获得一个 exe 或完整的桌面应用程序。我得到的都是在线工具。

或者如何在 js 中感知 '\n' 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:40:10.160

[UglifyJS](https://github.com/mishoo/UglifyJS) / [UglifyJS2](https://github.com/mishoo/UglifyJS2)：

JavaScript 解析器/mangler/压缩器/美化工具包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:42:33.963

您可以下载“yui 压缩器”来压缩 javascript。但我并不是说没有人能读懂你的脚本。

它们又是使您的压缩 javascript 文件再次可读的工具 :(

# xcode4.5 - 在xcode中将字符串转换为int

> ID：13743827
> 
> 赞同：1
> 
> 时间：2012-12-06T12:38:26.913
> 
> 标签：xcode4.5

我有两个文本字段。我需要将文本值转换为 int。所以我可以添加两个值并显示在结果文本字段中。有人请帮我将字符串转换为整数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:45:30.657

您没有指定您使用的是 iOS 还是 OSX，这无助于回答问题。

无论如何，如果您使用的是 OSX，则`NSTextField`派生自`NSControl`which 提供了一种`intValue`方法：

```
int number = [myTextField intValue]; 
```

（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/intValue)）。

如果您使用的是 iOS，则通过提供方法的属性 ( )`UITextField`提供其值：`text``NSString``intValue`

```
int number = [[myTextField text] intValue]; 
```

（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/intValue)）。

这些方法的变体也提供了它们的值，如`float`、`double`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T00:58:31.437

```
int *vla = (int)[string number here]; 
```

# javascript - JQuery Mobile 会干扰 Javascript 还是格式问题？

> ID：13743832
> 
> 赞同：3
> 
> 时间：2012-12-06T12:38:51.483
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我知道代码可以工作，因为它在 JSfiddle 中进行了测试，但是将其放入此 HTML 中会导致错误，除非 JQuery Mobile 它干扰？

所以我已经剥离了 CSS 以进行测试，但无论我拿走什么，它都会在向列表中添加新项目时导致错误。

这是工作版本： [DEMO](http://jsfiddle.net/VHe6C/)

```
<title>Checklist</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.0/jquery.mobile-1.1.0.min.js">
    </script>

<script>
$('#add').on('click', function (e) {
var $this = $(this);
var $firstRow=$this.closest('table').find('tr:first');
var $newRow = $firstRow.clone();

var input = $newRow.find(':input').remove();
input.prop('checked', false);
$newRow.empty().append(input).append('&nbsp;'+$('#textinput4').val());

$newRow.insertAfter($firstRow);
});​
</script>
</head>

<body>

<div data-role="page" id="check">
        <div data-theme="a" data-role="header">
            <h3>
                Checklist
            </h3>
            <a data-role="button" data-transition="fade" href="#about" class="ui-btn-left">
                Back
            </a>

        </div>
        <div data-role="content" style="padding: 15px">
            <div data-role="collapsible-set">

            <form name="emailform" enctype="multipart/form-data" action="form-to-email.php" method="get">
              <div data-role="fieldcontain">
                 <label for='name'>Festival name: </label><br>
        <input type="text" name="name">

                    <h3>
                        Before you go
                    </h3>

                        <fieldset data-role="controlgroup" data-type="vertical">
                            <legend>
                            </legend>
                            <input name="checkbox62" id="checkbox62" type="checkbox" />
                            <label for="checkbox62">
                                Charge all batteries. Phones, cameras etc
                            </label>
                            <input name="checkbox63" id="checkbox63" type="checkbox" />
                            <label for="checkbox63">
                                Save your friends numbers
                            </label>
                            <input name="checkbox64" id="checkbox64" type="checkbox" />
                            <label for="checkbox64">
                                Check out festival site rules!
                            </label>
                            <tr><td><input name="checkbox65" id="checkbox65" type="checkbox" /></td>
                            <td><label for="checkbox65">Get directions for where you are going</label></td></tr>
                        </fieldset>

                     <h3>My items</h3>
                    <table id="myTable">
<tr>
    <td>
    <label for="checkbox65">
        <input name="checkbox65" class="checkbox65" type="checkbox" />
        Get directions for where you are going
    </label>
    </td>
</tr> 
<tr>
    <td>
        <fieldset data-role="controlgroup">
            <label for="textinput4">
                Add new item
                <input name="new_item" id="textinput4" placeholder="" value="" type="text" />
            </label>
        </fieldset>
        <button id="add">Add</button>
    </td>
</tr>
</table>​

  </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:13:48.300

这只是您的事件处理程序被绑定到早期的一个例子。当您尝试将单击事件绑定到添加按钮时，添加按钮尚未加载到 DOM 中。您可以做的一件事就是简单地将脚本移动到身体的末端。

例如，更好的解决方案是使用事件委托

```
 $(document).on('click', '#add', function(e) {
          var $this = $(this);
          var $firstRow = $this.closest('table').find('tr:first');
          var $newRow = $firstRow.clone();

          var input = $newRow.find(':input').remove();
          input.prop('checked', false);
          $newRow.empty().append(input).append('&nbsp;' + $('#textinput4').val());

          $newRow.insertAfter($firstRow);
      }); 
```

（出于性能原因，您可能仍希望将脚本移至页面末尾，以免阻止页面加载）。

# jquery - iss7 不允许 POST 请求的 OPTIONS 预检请求 - 如何启用？

> ID：13743839
> 
> 赞同：3
> 
> 时间：2012-12-06T12:39:02.843
> 
> 标签：jquery, iis-7, azure, cors, preflight

我们正在运行托管在 Windows Azure 中的 WCF 服务，并尝试从托管在其他地方的网站执行 POST 请求，但这已被证明非常棘手。显然，在 iis7 端的实际 POST 请求之前允许 OPTIONS 预检请求似乎真的很困难。

即使我们在 web.config`<system.webserver>` 中有定义

```
 <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Origin,X-Requested-With,Content-Type,Accept" />
        <add name="Access-Control-Allow-Methods" value="POST,GET,OPTIONS"/>
      </customHeaders>
    </httpProtocol> 
```

并且为了安全

```
<security>
  <requestFiltering>
    <verbs>
      <add verb="OPTIONS" allowed="true" />
    </verbs>
  </requestFiltering>
</security> 
```

我们不断收到 HTTP 405 Method not Allowed 响应。

我在stackoverflow的不同帖子中尝试了多种技巧，但我开始绝望，因为似乎没有任何效果......网站在Chrome中工作，因为它似乎不关心预检响应，但IE挂在HTTP 405响应上。

有谁知道无论如何都可以通过 web.config（以及如何）允许预检 OPTIONS 请求，或者我们是否需要开始为预检请求实现我们自己的处理程序（如果是这样的话，一个例子会很棒:)）？

谢谢，马蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:22:57.803

看看[这个线程](http://forums.iis.net/t/1166025.aspx)。我认为 WebDAV 安装在 Web 角色上（虽然无法确认）。您必须 RDP 到 Web 角色实例并检查是否是这种情况。如果是，您将需要创建[启动任务](http://blog.smarx.com/posts/introduction-to-windows-azure-startup-tasks)来删除 WebDAV。

您还可以查看[有关](http://www.iis.net/configreference/system.webserver/security/requestfiltering/verbs)如何通过 appcmd 或 vbscript 在 IIS 中配置动词的[文章](http://www.iis.net/configreference/system.webserver/security/requestfiltering/verbs/add)（两者都可以通过启动任务执行）

看来这些东西必须在应用程序主机配置级别配置，不允许在 web.config 级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T15:13:57.087

IIS（至少版本 7.*）肯定有预检请求处理的错误。我正在使用经典的 asp 并将此代码添加到 Web.config 解决了这个问题

```
 <handlers>
        <remove name="OPTIONSVerbHandler" />
        <add name="OPTIONSVerbHandler" path="*" verb="OPTIONS" modules="IsapiModule" scriptProcessor="C:\Windows\System32\inetsrv\asp.dll" resourceType="Unspecified" requireAccess="None" />
    </handlers> 
```

# asp.net-mvc - WebAPI 的授权操作过滤器

> ID：13743842
> 
> 赞同：1
> 
> 时间：2012-12-06T12:39:09.520
> 
> 标签：asp.net-mvc, asp.net-web-api, action-filter

我有一个 MVC 4 解决方案，在允许访问某些控制器之前，我一直在将授权操作过滤器应用于各种控制器以进行一些额外的检查。

```
 public class AuthoriseUserViewAccess : FilterAttribute , IAuthorizationFilter
{

    public void OnAuthorization(AuthorizationContext filterContext)
    {
    }
 } 
```

这在我的控制器和操作中运行良好。

但我也想对我在同一个解决方案中使用的 WEB API 控制器做同样的事情。

我尝试将 AuthoriseUserViewAccess 属性应用于我的 apicontrollers，但似乎从未调用过 onAuthorisation 方法。

这是否也适用于 WebAPI 控制器，或者是否有另一种方法可以使用 WEBAPI 实现相同的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:48:25.590

我使用了这个 aa 测试并调用了 OnAuthorization。该属性应用于我的 webapi。也许尝试从 System.Web.Http.AuthorizeAttribute 继承。

```
 public class CustomAuthorize : System.Web.Http.AuthorizeAttribute
{
    public override void OnAuthorization(
           System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        // Do other checks
        var ok = false;
        if (!ok)
        {
            actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.Forbidden);
            return;
        }

        base.OnAuthorization(actionContext);
    }
} 
```

# javascript - 如何从 ckeditors 表对话框中删除标题字段？

> ID：13743858
> 
> 赞同：0
> 
> 时间：2012-12-06T12:40:15.983
> 
> 标签：javascript, ckeditor

我想从我不希望用户使用的 ckeditors 表对话框中删除标题字段。有人知道如何删除这些字段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:00:22.117

一切都在这里描述（1.问题）[http://docs.ckeditor.com/#!/guide/dev_howtos_dialog_windows-section-1](http://docs.ckeditor.com/#!/guide/dev_howtos_dialog_windows-section-1)

# javascript - 删除对象数组中的重复项

> ID：13743859
> 
> 赞同：1
> 
> 时间：2012-12-06T12:40:17.473
> 
> 标签：javascript

> **可能重复：**
> [从 javascript 中的对象数组中删除重复项](https://stackoverflow.com/questions/2218999/remove-duplicates-from-an-array-of-objects-in-javascript)

```
var arr = [{empID:100,empName:greg},{empID:101,empName:Math},{empID:100,empName:greg}];
var sorted_arr = arr.sort(); // You can define the comparing function here. 
                             // JS by default uses a crappy string compare.
var results = [];
for (var i = 0; i < arr.length - 1; i++) {
    if (sorted_arr[i + 1].empID != sorted_arr[i].empID) {
        results.push(sorted_arr[i]);
    }
}

alert(results); 
```

我有一个对象数组，但是当我尝试删除与 ID 匹配的重复对象时，它不会被删除。代码有什么问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T12:50:20.503

您的代码有两个问题：

1.  排序并没有真正起作用
2.  您忘记将最后一个元素添加到结果中

我建议以下替代方案：

```
var arr = ...;
arr.sort( function( a, b){ return a.empID - b.empID; } );

// delete all duplicates from the array
for( var i=0; i<arr.length-1; i++ ) {
  if ( arr[i].empID == arr[i+1].empID ) {
    delete arr[i];
  }
}

// remove the "undefined entries"
arr = arr.filter( function( el ){ return (typeof el !== "undefined"); } ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T13:05:33.250

如果`empID`保证是字符串或数字，我会跳过排序步骤并使用一个对象作为已经看到的 ID 的哈希：

```
var arr = [
    {empID:100,empName:"greg"},
    {empID:101,empName:Math},
    {empID:100,empName:"greg"}
];

var results = [];
var idsSeen = {}, idSeenValue = {};
for (var i = 0, len = arr.length, id; i < len; ++i) {
    id = arr[i].empID;
    if (idsSeen[id] !== idSeenValue) {
        results.push(arr[i]);
        idsSeen[id] = idSeenValue;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:50:02.217

`sort`如果您要比较项目，您的函数应该真正使用比较器`n and n+1`

```
var sorted_arr = arr.sort(function(a,b) { return a.empID - b.empID; } ); 
```

这样您就可以确保列表中的连续项目可能具有重复的`empID`属性。

# c# - 在一个函数 C# 中返回不同的类型

> ID：13743861
> 
> 赞同：2
> 
> 时间：2012-12-06T12:40:33.093
> 
> 标签：c#, generics, types, return-type

我正在创建一个项目数据管道，我需要从单个类返回不同的类型

在这个类中，我有许多字典来保存和分隔我想要加载的元素/内容，但我需要一种方法用单个字符串返回它们......因为我不熟悉这些类型函数我迷路了关于如何正确返回内容

我需要在一个单独的类中使用它，以便稍后进行 XML 序列化

这是我现在拥有的

```
DataClass contents;
public T ReturnType<T>(string asset)
{
    if(typeof(T) == typeof(int))
    {
        return contents.Integers[Asset];
    }
    if(typeof(T) == typeof(float))
    {
        return contents.Floats[Asset];
    }
    if(typeof(T) == typeof(double))
    {
        return contents.Doubles[Asset];
    }
    return default(T);
} 
```

它将允许我使用基 Object 类来解析内容，但我不希望在传输过程中丢失任何东西，所以我厌倦了使用这种方法

我的问题是如何在我用于序列化的类中返回某种类型的不同对象之一

如果我想使用前面的函数来获取类中的内容，例如

```
public Object someobject;
//button event handler to change the current object
//preferably this would be changed depending on the object i would be calling
//but this should do for showing how it is supposed to work
public void ChangeCurrentObject(event e)
{
    someobject = (Object)ReturnType<Object>("23rdObject");
} 
```

它向名为“ReturnType”的函数发送一个字符串，并在各自的字典中返回一个对象，即（int、float 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T01:30:50.947

您可以使用外部类，根据需要设置属性类型，然后在您的函数中使用它。

```
public class MultipleOpjects
{
    public List<string> ObjectOne { get; set; }

    public List<object> ObjectTwo { get; set; }

    public object ObjectThree { get; set; }

}
public MultipleOpjects GetAnything()
{
    MultipleOpjects Vrble = new MultipleOpjects();
    Vrble.ObjectOne  = SomeThing1;
    Vrble.ObjectTwo = SomeThing2;
    Vrble.ObjectThree = SomeThing3;

    return Vrble;      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:24:54.877

在这种情况下，泛型只会帮助您不要为每种资产类型编写不同的方法。您还可以使用这种方法使其更加模块化。

```
 static  class Assets
    {
        public interface IAssetHandler<out T> 
        {
            T GetAsset(string name);
        }

        private static readonly Dictionary<Type,object> _handlers=new Dictionary<Type, object>();

        public static T GetAsset<T>(string name)
        {

            object assetHandler;

            if(!_handlers.TryGetValue(typeof(T),out assetHandler))
            {
              throw  new Exception("No handler for that type of asset");
            }

            return (assetHandler as IAssetHandler<T>).GetAsset(name);

        }

        public static void RegisterAssetHandler<T>(IAssetHandler<T> handler)
        {
            _handlers[typeof (T)] = handler;
        }

    }

 public class IntAssetsHandler:Assets.IAssetHandler<int>
        {
            #region Implementation of IAssetHandler<out int>

            public int GetAsset(string name)
            {
                return 0;
            }

            #endregion
        }

        static void Main(string[] args)
        {
            Assets.RegisterAssetHandler(new IntAssetsHandler());

            Console.WriteLine(Assets.GetAsset<int>("test"));

        } 
```

# mysql - MySQL查询选择月份错误

> ID：13743862
> 
> 赞同：0
> 
> 时间：2012-12-06T12:40:33.967
> 
> 标签：mysql

我已经构建了这个查询来给我一个列表，其中列出了每个 COD_ZONA 在当月完成了多少 IMPORTE。日期由 FECHA_EMIS 指示，COD_CLIENT 是两个表之间的链接。

```
SELECT GVA12.FECHA_EMIS, GVA12.IMPORTE, GVA14.COD_ZONA
FROM GVA12 INNER JOIN GVA14 ON GVA12.COD_CLIENT = GVA14.COD_CLIENT
GROUP BY GVA12.FECHA_EMIS, GVA12.IMPORTE, GVA14.COD_ZONA
HAVING (((GVA12.FECHA_EMIS)=Month(curDate()))); 
```

它给出了一个空表。

* * *

@bluefeet 这就是我想要的决赛桌

```
COD_ZONA            IMPORTE
1                   1457.56
16                  127.45 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:55:47.133

听起来您需要使用此功能，并将该`Month()`功能应用于 the`GVA12.FECHA_EMIS`和`curDate()`：

```
SELECT GVA12.FECHA_EMIS, GVA12.IMPORTE, GVA14.COD_ZONA
FROM GVA12 INNER JOIN GVA14 
  ON GVA12.COD_CLIENT = GVA14.COD_CLIENT
WHERE Month(GVA12.FECHA_EMIS)=Month(curDate())
GROUP BY GVA12.FECHA_EMIS, GVA12.IMPORTE, GVA14.COD_ZONA 
```

如果你想比较月份和年份，那么我会使用：

```
SELECT GVA12.FECHA_EMIS, GVA12.IMPORTE, GVA14.COD_ZONA
FROM GVA12 INNER JOIN GVA14 
  ON GVA12.COD_CLIENT = GVA14.COD_CLIENT
WHERE Month(GVA12.FECHA_EMIS)=Month(curDate())
  AND Year(GVA12.FECHA_EMIS)=Year(curDate())
GROUP BY GVA12.FECHA_EMIS, GVA12.IMPORTE, GVA14.COD_ZONA 
```

这将确保月份和年份相等。

如果你想要一个`sum()`然后你会使用：

```
SELECT GVA14.COD_ZONA, sum(GVA12.IMPORTE)
FROM GVA12 INNER JOIN GVA14 
  ON GVA12.COD_CLIENT = GVA14.COD_CLIENT
WHERE Month(GVA12.FECHA_EMIS)=Month(curDate())
  AND Year(GVA12.FECHA_EMIS)=Year(curDate())
GROUP BY GVA14.COD_ZONA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:43:36.790

GVA12.FECHA_EMIS 存储月份还是完整日期？您正在与当前月份进行比较。

```
HAVING (((GVA12.FECHA_EMIS)=Month(curDate()))); 
```

# drupal-7 - OpenShift 上的 Drupal 7 中缺少文件

> ID：13743863
> 
> 赞同：1
> 
> 时间：2012-12-06T12:40:48.843
> 
> 标签：drupal-7, openshift

我在 OpenShift 上运行了一个 drupal 安装。我一直在使用 git（命令行）安装所有模块和主题。但是，我尝试直接安装模块并且安装成功。我现在面临的问题是，当我尝试拉取请求时，我得到的只是我使用命令安装的模块和主题，而不是我“直接”安装的模块和主题。

有人对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:09:40.410

OpenShift 运行您的代码，检查您的设备中的 git 存储库`~/app-root/repo`。当您使用 Drupal（而不是 git 存储库）上传文件时，模块和主题将安装在此签出目录中，并且不会在 git 中进行跟踪。如果您使用的是扩展的应用程序，我建议您复制模块/主题并将它们签入 git 而不是 Drupal 安装方法。

现在，要检索所有文件，您可以尝试该`rhc export`命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:48:36.030

感谢上面的@kraman，我知道该怎么做。

我跑过去`rhc snapshot save -a appname`拿了所有文件。至少我知道从哪里开始，因为我可以访问这些文件。

不过，对于使用 openshift 的 drupal 用户，请注意，只需使用 git 或 sftp 来推送文件，就可以省去头疼的问题。

# spring - 使用 Spring Batch 或 Quartz 调度器调度作业

> ID：13743864
> 
> 赞同：4
> 
> 时间：2012-12-06T12:40:49.810
> 
> 标签：spring, queue, quartz-scheduler, scheduling

我正在寻找创建 java web 应用程序以生成 excel/PDf 格式的报告的最佳解决方案。类似于 Google Adwords 的东西，用户可以在其中创建计划报告并在以后生成报告时下载它。

我正在考虑开发和 java 应用程序，其中用户记录，选择预定义的报告并提供输入参数（如报告日期等），此请求将排队或保存为 Quarts 作业（首选持久队列）。作业将监视队列/作业并执行作业，生成报告（输出 excel /pdf）并存储在磁盘中。当用户稍后刷新屏幕或重新登录时，报告应该可供下载。

使用 Spring 批处理和 Quartz 调度程序我可以做到这一点吗？我也期待像 Spring admin 一样，在那里我可以看到队列中的请求数量（排队的作业），并停止队列处理等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-08T02:36:27.177

如果您想同时处理所有报告请求，您可以使用 spring-batch，可能是在晚上，当您的服务器没有占用处理实时用户请求时（或者甚至在白天缓慢期间）。

如果您想每隔几秒/分钟/小时/等检查一次新作业，并在指定的时间间隔处理其中的一个/多个，您将使用石英作业。

所以，quartz 是一个调度器，而批处理是一个过程。您可以使用石英来安排批处理作业在特定时间运行。它们不是相互竞争的技术，它们是互补的。

**关于您的问题：** 鉴于您谈论队列及其持久性，但这听起来很像您的问题适合简单的 jms 模型。您将需要一些消息传递软件。如果你想让自己轻松一点，我建议使用[spring-jms](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jms.html)作为基本 Java EE JMS api 的包装器——spring 包装器比基本 jms 简单。对于消息传递服务，我会查看[RabbitMQ](http://www.rabbitmq.com/)，因为它再次非常简单。

使用 jms 架构，您可以将用户请求发布到您配置为持久的队列。您将在队列上有一个自定义侦听器，在它运行时将请求传递给报告生成器。您可以为侦听器分配一个或多个线程，这意味着您应该会发现调整报告生成器的性能很容易。

有一篇关于通过[spring-integration使用 rabbitmq 的非常有用的](http://www.springsource.org/spring-integration)[DZone 文章](http://java.dzone.com/articles/bridging-between-jms-and)（一组预构建的模式实现，有助于将事物相互连接）。

# maven - maven-pax-plugin：选择开始级别

> ID：13743866
> 
> 赞同：0
> 
> 时间：2012-12-06T12:41:06.233
> 
> 标签：maven, osgi, apache-felix, pax

嘿伙计们，我相信这是一个简单的问题，但我找不到任何东西：

如何使用 maven-pax-plugin 为我的包指定运行级别？

（我从命令行调用 mvn pax:provision ）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:17:42.157

它是[pax-runner 供应设置的一部分](http://team.ops4j.org/wiki/display/paxrunner/Provisioning)

例如

> mvn:com.acme/foo/1.0.0@5

# android - 我们可以创建我们自己的移动应用分发平台（App Store），例如公司专用的 Google Play 吗？

> ID：13743867
> 
> 赞同：-1
> 
> 时间：2012-12-06T12:41:06.747
> 
> 标签：android

我们公司已经开始创建移动应用程序，但他们不想将其放在 Android App Store 上，而是希望创建一个公司特定的 Web Store，其应用程序可以由公司客户和员工下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:43:20.497

是的，您可以为您的组织创建一个[Google Play 私人频道](http://googleenterprise.blogspot.co.uk/2012/12/a-new-way-to-distribute-your-internal.html)。

或者，当然，您可以从头开始创建自己的分销网络。任何文件托管服务都可以托管`.apk`文件。

# java - 暂停方法

> ID：13743868
> 
> 赞同：0
> 
> 时间：2012-12-06T12:41:06.850
> 
> 标签：java, methods

我在学校的一个项目上遇到了问题。问题是我从学校获得了一个代码，我需要对其进行调整以提供所需的标准。问题涉及数据库。程序需要获取执行操作时的当前日期+时间（为了练习，我使用了普通的 JButton ），并且还需要获取在另一个按钮上执行操作时的日期+时间。我需要修改这段代码：

```
 try {
        stmt = conn.createStatement();
        java.sql.Timestamp now = new Timestamp((new Date()).getTime());    
        PreparedStatement ps = conn.prepareStatement(
            "INSERT INTO "Table name" (date_in, name, date_out, passcode)"+
             " VALUES(?,?,?,null)" );
        ps.setTimestamp(1, now);
        ps.setString(2, "JavaTest");
        Timestamp later = new Timestamp((new Date()).getTime());
        ps.setTimestamp(3, later);
        ps.executeUpdate(); 
```

该方法需要在 ps.setString(2, "JavaTest"); 之后暂停。在这部分被执行后，该方法需要在按下另一个按钮时暂停和恢复，因此数据库中将有一个具有不同 date_in 和 date_out 的条目。

我希望有人可以帮助我，因为我现在有点卡住了。

问候，

米奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:52:16.953

如果我基本上正确理解了这个问题，那么您有两个按钮，您希望一个暂停，另一个恢复，在 Java 中运行的每个程序都在一个线程中运行，即使您没有使用多线程，main 方法也在一个名为 main 的线程中运行，您需要暂停该线程并单击另一个按钮将其恢复，因为这是一个学校项目，我不会告诉您如何操作，您可以阅读并自己解决：

[http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)

寻找等待（）和通知（）

# android - maven-android-plugin 是否支持多个源文件夹？

> ID：13743869
> 
> 赞同：1
> 
> 时间：2012-12-06T12:41:08.370
> 
> 标签：android, maven, jenkins, directory

在我当前的 Android 项目中，我们有一些生成的 java 代码，我们想构建一个真正的 CI(Jenkins) 链。此代码应放置在一些额外的文件夹中，例如：

```
src/main/java
src/main/some-generated-code 
```

代码不会使用 maven 生成，它已经在存储库中。是否支持使用 Android-Maven-Plugin 执行此操作？

有什么最佳实践吗？

非常感谢， 风筝冲浪者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:52:19.447

最好的解决方案是让生成的代码作为一个单独的项目独立存在，该项目部署到存储库管理器并声明为当前项目的依赖项。

如果这不是一个选项并且源代码必须位于您引用的位置，您可以尝试[使用 build-helper-maven-plugin 添加更多源文件夹](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html)。

# xquery - 特定属性节点替换

> ID：13743870
> 
> 赞同：0
> 
> 时间：2012-12-06T12:41:12.323
> 
> 标签：xquery, marklogic

如何在 MarkLogic 中为特定属性进行节点替换？例如如下：

```
<chapters>
<title id="primary">first primary content</title>
<title id="primary">second primary content</title>
<title id="secondary">this is amy middle content</title>
<title id="terciary">this is amy last content</title>
</chapters> 
```

我想要像下面这样：

```
<chapters>
<title id="primary">third primary content</title>
<title id="secondary">this is amy middle content</title>
<title id="terciary">this is amy last content</title>
</chapters> 
```

我的意思是假设`A.xml`存储在 MarkLogic 数据库服务器中的文件包含如下数据：

```
<chaptermetadata>
<chapters>
<title id="primary">first content</title>
<title id="primary">second content</title>
<title id="secondary">This is middle content</title>
<title id="terciary">This is last content</title>
</chapters>
<chapters>
<title id="primary">fouth content</title>
<title id="primary">fifth content</title>
<title id="primary">sixth content</title>
<title id="secondary">This is new content</title>
<title id="terciary">This is old content</title>
</chapters>
<chaptermetadata> 
```

现在，我想替换所有章节`title`中包含属性的所有元素中的节点，如下所示：`@id='primary'`

```
<chaptermetadata>
<chapters>
<title id="primary">common content</title>
<title id="secondary">This is middle content</title>
<title id="terciary">This is last content</title>
</chapters>
<chapters>
<title id="primary">common content</title>
<title id="secondary">This is new content</title>
<title id="terciary">This is old content</title>
</chapters>
<chaptermetadata> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:26:31.057

如果您刚刚开始使用 XQuery 和 MarkLogic，[http://developer.marklogic.com/learn/technical-overview](http://developer.marklogic.com/learn/technical-overview)和[http://developer.marklogic.com/learn](http://developer.marklogic.com/learn)可能会有所帮助。

修改元素和属性的最佳方式取决于您未提供的上下文。我想第一个问题是“如何按属性选择节点？” 一个简单的 XPath 就可以做到这一点。对于数据库中的所有章节：

```
/chapters/title[@id eq $id] 
```

...或相对于先前选择的元素序列（章节）*

```
$chapters/title[@id eq $id] 
```

如果这是一个数据库文档，您可以使用[http://docs.marklogic.com/xdmp:node-replace](http://docs.marklogic.com/xdmp:node-replace)和[http://docs.marklogic.com/xdmp:node-delete](http://docs.marklogic.com/xdmp:node-delete)函数从那里获取它。如果节点仅在内存中，请参阅[http://docs.marklogic.com/guide/app-dev/typeswitch](http://docs.marklogic.com/guide/app-dev/typeswitch)以获取有关使用 XQuery typeswitch 或 XSLT 的指导和示例。在[http://developer.marklogic.com/blog/tired-of-typeswitch](http://developer.marklogic.com/blog/tired-of-typeswitch)有更多关于 typeswitch 和 XSLT 的示例和比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-20T00:54:14.197

根据您提供的示例，您似乎想要替换标题为@id='primary'``text()`的第一个`title`元素。`@id='primary', and remove the other``elements with`

下面将实现这一点，使用[`xdmp:node-replace()`](https://docs.marklogic.com/xdmp:node-replace)和[`xdmp:node-delete()`](https://docs.marklogic.com/xdmp:node-delete)方法。

```
for $primary-title in doc("A.xml")/chaptermetadata/chapters/title[@id='primary']
return 
  if ($primary-title/preceding-sibling::title[@id='primary']) 
  then xdmp:node-delete($primary-title)
  else xdmp:node-replace($primary-title/text(), text{"common content"}) 
```

# asp.net - 在 asp.net 中为给予者号码添加括号

> ID：13743873
> 
> 赞同：0
> 
> 时间：2012-12-06T12:41:23.910
> 
> 标签：asp.net

我需要为从列表框中选择的 ListItem 添加 N 个括号`a given number from a variable`。说前。如果`i pass 5 from`是一个变量，它必须`brackets`在我的列表项值的末尾添加 5。有人可以给我一个想法吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:51:53.773

这是一个支架，不是吗？`(`

我不知道您到底在哪里遇到问题，但是您可以使用[构造函数](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)重载创建一个带有重复字符的字符串：

```
int bracketCount = 5;
string brackets = new string('(', bracketCount); 
```

因此，如果您想将这些括号添加到 中的选定项目`ListBox`：

```
listBox1.SelectedItem.Text += brackets; 
```

# java - 获取 arraylist char 项返回到我可以用来打印输出的字符串

> ID：13743875
> 
> 赞同：2
> 
> 时间：2012-12-06T12:41:31.357
> 
> 标签：java, arraylist

我得到了一个包含两个字母和一个数字的数组列表。我需要显示它，例如“ab1”。但每次我得到一个带有一些数组列表代码的打印行：“pp4main.Letter@f7e6a96pp4”

这是我的数组列表：`ArrayList<Letter> letterlijst = new ArrayList<Letter>();`

我的代码试图显示：

```
public Kofferslot(char letter1, char letter2, int cijfer){

    Letter letterlijst1 = new Letter();
    letterlijst1.setLetter(letter1);
    Letter letterlijst2 = new Letter();
    letterlijst1.setLetter(letter2);

    letterlijst.add(letterlijst1);
    letterlijst.add(letterlijst2);

    Cijfer cijfer3 = new Cijfer();
    cijfer3.setCijfer(cijfer);

    String letterstring1 = letterlijst.get(0).toString();
    String letterstring2 = letterlijst.get(1).toString();

    System.out.println(letterstring1 + letterstring2 + cijfer3);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:42:36.703

您必须覆盖and类的`toString()`方法。`Letter``Cijfer`

像这样的东西：

```
@Override
public String toString()
{
    return String.valueOf(mijnLetter);
} 
```

* * *

但更好的方法是使用 getter ( `getLetter()`)，而不是 toString。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:43:07.773

在您的 Letter 类中覆盖`toString()`，默认情况下将调用 Object 的 toString()

```
 @override
 public String toString() {
       return ""+ch1+ch2+number
  } 
```

其中 ch1, ch2 是 Letter 类中的 char 属性，而 number 是 int 属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:56:13.440

您必须覆盖 toString() 来打印字母，或者不要使用：

```
letterlijst.get(0) 
```

使用这样的东西：

```
letterlijst.get(0).getLetter() // return letter1 of setLetter(letter1) 
```

# html - 为什么我的菜单没有对齐？

> ID：13743876
> 
> 赞同：0
> 
> 时间：2012-12-06T12:41:33.607
> 
> 标签：html, css, layout, button

我正在尝试在侧边栏中的 HTML/CSS 中创建以下菜单：

[我的图片 http://img1.firenex.net/9Z0eupHnvV7LIPQd950r.png](http://img1.firenex.net/9Z0eupHnvV7LIPQd950r.png)

每个按钮都有自己对应的按下/未按下图像，当悬停时，它的不透明度通过 CSS 从 0.8 移动到 1.0。

问题是我得到的是：

[myimage2 http://img1.firenex.net/nooUcfe0HvvfMaCmz6N8.png](http://img1.firenex.net/nooUcfe0HvvfMaCmz6N8.png)

不是我预期的结果:)

这是我的 HTML：

```
 <div id="homepageBtn"></div>
    <div id="progressiBtn"></div>
    <div id="interessiBtn"></div>
    <div id="friendzoneBtn"></div>
    <div id="emailBtn"></div> 
```

这是我的 CSS：

```
#homepageBtn {
    background:url(img/buttons/homepage_btn.png) no-repeat;
    opacity: 0.8;
    width: 88px;
    height: 79px;
    margin-left: 30px;
    float: left;
}

#homepageBtn:hover {
    background:url(img/buttons/homepage_btn.png) no-repeat;
    opacity: 1.0;
}

#homepageBtn:active {
    background:url(img/buttons/homepage_btn_pressed.png) bottom right no-repeat;
}

#progressiBtn {
    background:url(img/buttons/progressi_btn.png) no-repeat;
    opacity: 0.8;
    width: 88px;
    height: 79px;
    margin-left: 10px;
    float: left;
}

#progressiBtn:hover {
    background:url(img/buttons/progressi_btn.png) no-repeat;
    opacity: 1.0;
}

#progressiBtn:active {
    background:url(img/buttons/progressi_btn_pressed.png) bottom right no-repeat;
}

#interessiBtn {
    background:url(img/buttons/interessi_btn.png) no-repeat;
    opacity: 0.8;
    width: 88px;
    height: 79px;
    margin-left: 30px;
    margin-top: 10px;
    clear: left;
    float: left;
}

#interessiBtn:hover {
    background:url(img/buttons/interessi_btn.png) no-repeat;
    opacity: 1.0;
}

#interessiBtn:active {
    background:url(img/buttons/interessi_btn_pressed.png) bottom right no-repeat;
}

#friendzoneBtn {
    background:url(img/buttons/friendzone_btn.png) no-repeat;
    opacity: 0.8;
    width: 88px;
    height: 79px;
    margin-left: 10px;
    margin-top: 10px;
    float: left;
}

#friendzoneBtn:hover {
    background:url(img/buttons/friendzone_btn.png) no-repeat;
    opacity: 1.0;
}

#friendzoneBtn:active {
    background:url(img/buttons/friendzone_btn_pressed.png) bottom right no-repeat;
}

#emailBtn {
    background:url(img/buttons/email_btn.png) no-repeat;
    opacity: 0.8;
    width: 188px;
    height: 29px;
    margin-left: 30px;
    margin-top: 10px;
    clear: left;
}

#emailBtn:hover {
    background:url(img/buttons/email_btn.png) no-repeat;
    opacity: 1.0;
}

#emailBtn:active {
    background:url(img/buttons/email_btn_pressed.png) bottom right no-repeat;
} 
```

我真的不知道我是否使用了正确的方法来做到这一点，我将不胜感激此时的任何解决方案......在此先感谢。

PS：Chrome会发生这种情况，例如IE我可以正确显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:18:34.783

您错误地使用了 clear 属性。您可以使用此代码。

```
<div id="homepageBtn"></div>
<div id="progressiBtn"></div>
<div style="clear:both;border:0px"></div>
<div id="interessiBtn"></div>
<div id="friendzoneBtn"></div>
<div style="clear:both;border:0px"></div>
<div id="emailBtn"></div>​ 
```

并从以下 CSS 中删除 Clear:left

```
#interessiBtn {
    background:url(img/buttons/interessi_btn.png) no-repeat;
    opacity: 0.8;
    width: 88px;
    height: 79px;
    margin-left: 30px;
    margin-top: 10px;
    clear: left;            <-- Remove this
    float: left;
} 
```

[演示代码](http://jsfiddle.net/eUG8c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:51:43.663

margin-top:.. 或 padding top 但更好的解决方案是进行以下修改，

添加一个新的并这样做

```
 <div id="upper">//further divide it in two parts 
  <div id="homepageBtn"></div>//here goes homepage button 
  <div id="progressiBtn"></div>
  </div >  //end of  upper 
```

并为底部 Div 做同样的事情

```
 <div id="bottom">//further divide it in two parts 
  <div id="friendzoneBtn"></div>
  <div id="emailBtn"></div>
  </div >  // end of bottom 
```

而不是您为 div 或底部 div 设置的任何尺寸，`upper` 您的内容将在那里轻松调整

# javascript - 这个书签是如何工作的

> ID：13743882
> 
> 赞同：0
> 
> 时间：2012-12-06T12:41:52.777
> 
> 标签：javascript, bookmarklet

```
javascript:
void((function(d)
{

  if(self!=top||d.getElementById('toolbar')&&d.getElementById('toolbar').getAttribute('data-resizer'))
      return%20false;
      d.write('<!DOCTYPE%20HTML><html%20style="opacity:0;">
               <head>
                   <meta%20charset="utf-8"/>
               </head>

               <body>
                   <a%20data-viewport="320x480"%20data-icon="mobile">Mobile%20(e.g.%20Apple%20iPhone)</a>
                   <a%20data-viewport="320x568"%20data-icon="mobile"%20data-version="5">Apple%20iPhone%205</a>
                   <a%20data-viewport="600x800"%20data-icon="small-tablet">Small%20Tablet</a>
                   <a%20data-viewport="768x1024"%20data-icon="tablet">Tablet%20(e.g.%20Apple%20iPad%202-3rd,%20mini)</a>
                   <a%20data-viewport="1280x800"%20data-icon="notebook">Widescreen</a>

                   <script%20src="http://lab.maltewassermann.com/viewport-resizer/resizer.min.js"></script>
               </body>
             </html>')})(document)); 
```

* * *

我正在尝试将 is 放入 href=""，但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:00:48.243

`javascript:void()`首先让我们通过删除和换行来使它更容易阅读

```
(function (d) {
    if (
        self != top ||
        d.getElementById('toolbar') && d.getElementById('toolbar').getAttribute('data-resizer')
        ) return false;
    d.write('<!DOCTYPE HTML><html style="opacity:0;"><head><meta charset="utf-8"/></head><body><a data-viewport="320x480" data-icon="mobile">Mobile (e.g. Apple iPhone)</a><a data-viewport="320x568" data-icon="mobile" data-version="5">Apple iPhone 5</a><a data-viewport="600x800" data-icon="small-tablet">Small Tablet</a><a data-viewport="768x1024" data-icon="tablet">Tablet (e.g. Apple iPad 2-3rd, mini)</a><a data-viewport="1280x800" data-icon="notebook">Widescreen</a><script src="http://lab.maltewassermann.com/viewport-resizer/resizer.min.js"></script></body></html>')
})(document); 
```

记住`self === window`。现在，它是如何工作的？
它是说什么都不做，如果

*   它不是最顶层的框架或
*   存在一个带有属性*data-resizer的元素**#toolbar*

 *否则将文档设置为那里的代码，这是几个`<a>`s 然后导入*http://lab.maltewassermann.com/viewport-resizer/resizer.min.js*。

如何把它变成一个href？
你需要先`encodeURI`上它

```
<a href="javascript:void%20(function%20(d)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20self%20!=%20top%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20d.getElementById('toolbar')%20&&%20d.getElementById('toolbar').getAttribute('data-resizer')%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20return%20false;%0A%20%20%20%20%20%20%20%20d.write('%3C!DOCTYPE%20HTML%3E%3Chtml%20style=%22opacity:0;%22%3E%3Chead%3E%3Cmeta%20charset=%22utf-8%22/%3E%3C/head%3E%3Cbody%3E%3Ca%20data-viewport=%22320x480%22%20data-icon=%22mobile%22%3EMobile%20(e.g.%20Apple%20iPhone)%3C/a%3E%3Ca%20data-viewport=%22320x568%22%20data-icon=%22mobile%22%20data-version=%225%22%3EApple%20iPhone%205%3C/a%3E%3Ca%20data-viewport=%22600x800%22%20data-icon=%22small-tablet%22%3ESmall%20Tablet%3C/a%3E%3Ca%20data-viewport=%22768x1024%22%20data-icon=%22tablet%22%3ETablet%20(e.g.%20Apple%20iPad%202-3rd,%20mini)%3C/a%3E%3Ca%20data-viewport=%221280x800%22%20data-icon=%22notebook%22%3EWidescreen%3C/a%3E%3Cscript%20src=%22http://lab.maltewassermann.com/viewport-resizer/resizer.min.js%22%3E%3C/script%3E%3C/body%3E%3C/html%3E')%0A%20%20%20%20%7D)(document);">Bookmarklet</a> 
```*

# android - 绘制图像android的文本中间

> ID：13743884
> 
> 赞同：3
> 
> 时间：2012-12-06T12:41:57.460
> 
> 标签：android, android-canvas, draw

我必须在地图视图上放置标记并在标记上写一个数字。我已经这样做了，但是文本对齐方式在不同的分辨率下会有所不同。下面是参考代码

```
 float xVal = (float) curScreenCoords.x;  // Point curScreenCoords
        float yVal = (float) curScreenCoords.y-20; // Point curScreenCoords
        Bitmap bitmap = BitmapFactory.decodeResource ( context.getResources() , ( R.drawable.pin_number ) ) ;
        canvas.drawBitmap(bitmap, xVal, yVal, getInnerPaint()); 

        public Paint getInnerPaint() {
         if (innerPaint == null) {
             innerPaint = new Paint();
         }
        innerPaint.setARGB(255, 117, 161, 220); // blue
        innerPaint.setAntiAlias(true);  
        innerPaint.setStyle(Style.FILL);
        return innerPaint;
        }
        canvas.drawText(String.valueOf(10), xVal+20, yVal+22, getCountPaint()); // 10 is just for example, it can vary to one digit to two to three 
        public Paint getCountPaint() {
        if (innerPaint == null) {
        innerPaint = new Paint();
        }
        innerPaint.setARGB(255, 255, 255, 255); 
        innerPaint.setAntiAlias(true);  
        innerPaint.setStyle(Style.FILL);
        innerPaint.setTextSize(12f);
        innerPaint.setTextAlign(Align.CENTER);
        return innerPaint;
       } 
```

一切正常，除了文本对齐，此代码适用于 480*800 分辨率。文本在画布中完全居中对齐。x, y 位置在图像上是完美的，但在 320*480 上看起来并不完美。在此分辨率下，文本的 x 和 y 位置看起来不同。谁能建议我到底发生了什么错误？在不同尺寸的设备上做同样的事情有什么基本原理吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:10:14.573

我认为你可以测量文本曾经写在画布上的宽度和高度，然后用它来居中。就像是：

```
String text = "whatever";
Rect bounds = new Rect();
paint.getTextBounds(text, 0, text.length(), bounds);
canvas.drawText(text, (canvas.getWidth() - bounds.width()) / 2, (canvas.getHeight() - bounds.height()) / 2, paint); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-06T06:48:48.297

嗨，我想上面给出的答案都不够好，所以我发布我的答案试试吧，伙计们可以在所有设备上工作，而且一点也不复杂

```
Canvas canvas = new Canvas(bitmap);

Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
//paint.setTextAlign(Align.CENTER);
paint.setColor(activity.getResources().getColor(R.color.white));
paint.setTextSize(30);

// draw text to the Canvas center
Rect boundsText = new Rect();
paint.getTextBounds(String.valueOf(cluster.getMarkerList().size()), 0, 
    String.valueOf(cluster.getMarkerList().size()).length(), boundsText);
int x = (bitmap.getWidth() - boundsText.width()) / 2;
int y = (bitmap.getHeight() + boundsText.height()) / 2;

canvas.drawText(String.valueOf(cluster.getMarkerList().size()), x, y, paint); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T12:51:44.997

您的值`curScreenCoords.y-20`和`xVal+20, yVal+22`所有分辨率的恒定像素偏移，但它们应该取决于设备的像素密度，如下所示：

```
xOffset = (int) (13.33f * context.getResources().getDisplayMetrics().density + 0.5f);
yOffset = (int) (14.67f * context.getResources().getDisplayMetrics().density + 0.5f);
canvas.drawText(String.valueOf(10), xVal + xOffset, yVal + yOffset, getCountPaint()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-03T16:47:53.223

确保检查硬件加速是否已关闭。在 4.1.2 和其他设备（三星 Galaxy Tag 2.0）上，您会收到致命信号 11 错误。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
{
    setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

这纠正了我在使用此代码时遇到的问题。canvas.drawText 导致错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T12:48:51.487

您可以扩展 Image 类并覆盖它的 onDraw。如下

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.ColorFilter;
import android.graphics.Paint;
import android.widget.ImageView;

/**
 * @author amit
 * 
 */
public class CustomImageView extends ImageView {
    private int notificationCount;
    private Paint paint;

    /**
     * @param context
     */
    public CustomImageView(Context context) {
        super(context);
        notificationCount = 0;
        paint = new Paint();
        paint.setColor(Color.RED);
        ColorFilter cf = new ColorFilter();
        paint.setColorFilter(cf);
        paint.setStyle(Paint.Style.FILL);
        paint.setFakeBoldText(true);
        paint.setTextSize(15);
    }

    public synchronized void incrementNotification() {
        notificationCount--;
        this.invalidate();
    }

    public synchronized void decrementNotification() {
        notificationCount++;
        this.invalidate();
    }

    /**
     * @return the notificationCount
     */
    public synchronized int getNotificationCount() {
        return notificationCount;
    }

    /**
     * @param notificationCount
     *            the notificationCount to set
     */
    public synchronized void setNotificationCount(int notificationCount) {
        this.notificationCount = notificationCount;
        this.invalidate();
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.widget.ImageView#onDraw(android.graphics.Canvas)
     */
    @Override
    protected void onDraw(Canvas canvas) {
        // System.out.println("OnDraw is called");
        super.onDraw(canvas);
        if (notificationCount == 0) {
            return;
        }
        canvas.drawText(String.valueOf(notificationCount), 0, 0, paint);
    }

} 
```

比您可以调用以下任何方法

```
incrementNotification(); 
decrementNotification();
setNotification(int number); 
```

在构造函数中选择您选择的颜色.. 祝你好运！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-12T11:07:36.600

我遇到过同样的问题。我想在位图中绘制文本 - 用于在谷歌地图上进行聚类。实际上它在位图的中心绘制文本。

用 Kotlin 编写的代码

```
fun createCircleBitmapWithTextInside(context: Context, @DrawableRes drawableId: Int, text: String = "POI"): Bitmap{
            val scale = context.resources.displayMetrics.density

            var bitmap = getBitmap(context, drawableId)//BitmapFactory.decodeResource(res, drawableId)
            var bitmapConfig = bitmap.config ?: Bitmap.Config.ARGB_8888
            // resource bitmaps are imutable,
            // so we need to convert it to mutable one
            bitmap = bitmap.copy(bitmapConfig, true)

            val canvas = Canvas(bitmap)
            val paint = Paint(ANTI_ALIAS_FLAG)
            paint.color = ResourceUtils.getColor(context, R.color.white)
            paint.textSize = (18 * scale)
            paint.setShadowLayer(1f, 0f, 1f, Color.WHITE)
            paint.style = Paint.Style.FILL
            paint.textAlign = Paint.Align.CENTER

            val bound = Rect()
            paint.getTextBounds(text, 0, text.length, bound)
            val x = (canvas.width.toFloat() /2)
            // x - point to the center of width
            val y = canvas.height / 2 - (paint.descent() + paint.ascent()) / 2

/*            Timber.d("bitmap.width:${canvas.width} \tbound.width:${bound.width()} \tx:$x")
            Timber.d("bitmap.height:${canvas.height} \tbound.height:${bound.height()} \ty:$y")*/

            canvas.drawText(text, x, y, paint)
            return bitmap
        } 
```

# javascript - ajax成功删除层次结构中最近的li

> ID：13743887
> 
> 赞同：0
> 
> 时间：2012-12-06T12:42:12.930
> 
> 标签：javascript, python, html, django, html-lists

我正在尝试删除最近的 li 元素。问题是有一个循环正在创建`li`具有相同 ID 的元素。到目前为止这很好，但是还有另一个循环正在做同样的工作。在每个`li`元素中，都有一个 js 删除函数，它接受`id`每个 each 的`li`。但是现在，如果我单击`li`第二个循环的元素，它将删除第一个循环中的第一个 li。我的第一个循环的 js 代码是这样的：

```
function del_contact_a(cid){
        $.ajax({
            url: "/del_contact_a/",
            data: {id:cid},
            type: "POST",
        }).success(function(){
            $('#'+cid).closest('li').remove();
        })
} 
```

第二个循环的js代码是这样的：

```
function del_contact_ver(cid){
        $.ajax({
            url: "/del_contact_ver/",
            data: {id:cid},
            type: "POST",
        }).success(function(){
            $('#'+cid).closest('li').remove();
        })
} 
```

我的两个循环都是这些：

```
{% if contact_a %}
{% for ac in contact_a %}
<li id="{{ac.id}}"> <a> {{ac.name}} {{ac.nachname}}</a> <a onclick="del_contact_a({{ac.id}})"> <img src="{{STATIC_URL}}images/erase.png" /> </a>  </li>
{% endfor %}
{% endif %} 
```

..

```
{% if contact_a %}
{% for ac in contact_a %}
<li id="{{ac.id}}"> <a> {{ac.name}} {{ac.nachname}}</a> <a onclick="del_contact_ver({{ac.id}})"> <img src="{{STATIC_URL}}images/erase.png" /> </a>  </li>
{% endfor %}
{% endif %} 
```

有人可以给我线索吗？多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:38:49.910

您的 li 在 2 个循环上具有相同的 id。根据您的循环，您应该在每一个上使用一个前缀。

第一个 ：

```
<li id="a-{{ac.id}}"> 
```

第二个 ：

```
<li id="ver-{{ac.id}}"> 
```

并相应地改变你“”

一个 id，假设它的名称必须是唯一的：P

另外，我不明白您为什么使用最接近的方法？

```
$('#'+cid).remove(); 
```

应该足够了。

# objective-c - 在 .plist 文件中编辑字典字符串值

> ID：13743890
> 
> 赞同：-2
> 
> 时间：2012-12-06T12:42:19.480
> 
> 标签：objective-c, ios, xcode, dictionary, plist

我知道这一定很简单。但我无法弄清楚。我有一个 Help.plist 文件，它有一个键，然后是一个带有字符串值的字典。

这些字典的内容一般在哪里。

当我在 XCODE 中搜索字符串值时，它不会出现。

这让我相信应用程序的 /documents/ 部分。我应该使用文本编辑之类的东西来编辑值吗？

注意：我知道 .plist 文件是 XML 类型的文件。我不想编辑这个。我想编辑字典的内容。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:50:33.710

首先获取字典进行编辑

```
NSMutableDictionary* dict = [[NSDictionary dictionaryWithContentsOfURL:[[NSBundle mainBundle] URLForResource:@"Help" withExtension:@"plist"]] mutableCopy]; 
```

然后您可以使用[`NSMutableDictionary`](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/)...中的功能对其进行编辑

我认为您无法编辑应用资源中文件的内容，因此您可能希望在编辑后将其保存到 Documents 文件夹中...

# javascript - 在 iPad 上模拟各种屏幕尺寸

> ID：13743891
> 
> 赞同：0
> 
> 时间：2012-12-06T12:42:21.080
> 
> 标签：javascript, ipad, meta-tags

我刚刚发现，通过元标签的魔力，我可以在 iPad 上模拟不同的屏幕尺寸......

例如，在横向中，这模拟了 768px 宽的屏幕：

```
<meta name="viewport" content="width=device-width, initial-scale=1.333" /> 
```

1.  有没有办法以像素量写入所需的比例，而不是计算比率？
2.  加载后可以通过javascript更改元标记以重置比例吗？

# date - 在yii中如何查找日期大于当前日期

> ID：13743897
> 
> 赞同：0
> 
> 时间：2012-12-06T12:42:47.207
> 
> 标签：date, yii, datediff

我在 Yii 框架中工作。我的投票表的字段为- -pollId -pollQuestion -Isactive -publishDate -isPublish

创建新民意调查时，该日期将插入到 publishDate 字段中。eg2012-04-04 02:23:45 以这种格式插入条目。现在我想检查这个 publishDate 是否小于今天的日期或当前日期的天气。iepublishDate 不应大于当前日期。那么如何在 yii 中检查呢？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:41:29.597

按照正常的PHP。假设`$model`是提交的表单并且您已分配（在表单提交后）`$model->attributes = $_POST['MyModel']` 您可以使用：

```
if ($model->publishDate < date('Y-m-d H:i:s')){
    // it is smaller
} 
```

你可以看到的另一件事是使用 Yii 的模型验证。您可以存储创建日期（即今天的日期），然后将其与提交表单中的 publishDate 进行比较：

```
$model->created = date("Y-m-d H:i:s");
if ($model->validate){
    ...
} 
```

在您的 Poll 模型中：

```
array('publishDate ','compare','created','operator'=>'<', 'message'=>'Publish Date must be smaller than the current date'), 
```

# java - Nifty 在 Slick 中的集成，有教程

> ID：13743902
> 
> 赞同：0
> 
> 时间：2012-12-06T12:42:59.113
> 
> 标签：java, slick2d

我正在尝试在我的 Slick 游戏中使用 Nifty。但是，我什至不知道如何开始。我找到了这个教程：

[http://sourceforge.net/apps/mediawiki/nifty-gui/index.php?title=Nifty_Slick_Renderer_(Nifty_1.3.1)#Slick2D-Game_Implementations](http://sourceforge.net/apps/mediawiki/nifty-gui/index.php?title=Nifty_Slick_Renderer_(Nifty_1.3.1)#Slick2D-Game_Implementations)

但由于我是 Java 新手，我不知道在教程中将代码行放在哪里。例如，我可能需要这个：

```
// in NiftyGame, NiftyBasicGame, NiftyOverlayGame and NiftyOverlayBasicGame
protected void initGameAndGUI(GameContainer container) throws SlickException; 
```

如何将它添加到我的 Slick 游戏中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:54:17.700

注释的`// in NiftyGame, NiftyBasicGame, NiftyOverlayGame and NiftyOverlayBasicGame`意思是您编写的类应该扩展这些类之一（NiftyGame、NiftyBasicGame、NiftyOverlayGame）。然后您需要实现一些逻辑 - 请参阅您提供的链接以获取有关您要覆盖哪些功能的详细信息。希望这可以帮助您入门。

# mysql - mysql 计算唯一用户列表的时差

> ID：13743903
> 
> 赞同：0
> 
> 时间：2012-12-06T12:43:03.120
> 
> 标签：mysql, sql, database

我有以下情况

1.  用户从谷歌访问该网站，我们将此信息记录在数据库表“visitSearchEngine”中。如果用户注册，那么他的状态是活动的，即 1 ，如果他没有，那么他的状态变为非活动的，即 0 。所以，我需要一个查询。如果用户访问该站点并且没有在 10 分钟内注册，那么列出这些用户。

    我写了一个以下查询，但它不工作

    ```
    select distinct(users) , avisitedDate from visitSearchEngine vs
    WHERE vs.users!=' ' 
    AND vs.status='0' 
    AND hitType='googleIdentified'
    AND avisitedDate>'2012-12-06' 
    AND minute(timediff(now(),avisitedDate))>=10
    AND minute(timediff(now(),avisitedDate))<11

    //avisitedDate is Today's date. 
    ```

我想计算 currentTime 和visitedDate 之间的差异，如果是 10 分钟，则列出这些用户。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:24:34.047

我想你想要的是`time_to_sec`：

```
select distinct(users) , avisitedDate from visitSearchEngine vs
WHERE vs.users!=' ' 
AND vs.status='0' 
AND hitType='googleIdentified'
AND avisitedDate>'2012-12-06' 
AND time_to_sec(timediff(now(),avisitedDate))>=10*60
AND time_to_sec(timediff(now(),avisitedDate))<11*60 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:48:59.317

试试这个 ：：

```
select distinct(users) , avisitedDate from visitSearchEngine vs
WHERE vs.users!=' ' 
AND vs.status='0' 
AND hitType='googleIdentified'
AND DATE(avisitedDate)>'2012-12-06' 
AND minute(timediff(now(),avisitedDate))>=10
AND minute(timediff(now(),avisitedDate))<11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:33:51.980

得到了答案，使用了 time_to_Sec ......它显示了......

```
select distinct(users) , avisitedDate from visitSearchEngine vs
WHERE vs.users!=' ' 
AND vs.status='0' 
AND hitType='googleIdentified'
AND DATE(avisitedDate)>'2012-12-06' 
AND ((time_to_Sec(timediff(now(),avisitedDate)))/60)>=5
AND ((time_to_Sec(timediff(now(),avisitedDate)))/60)<6 
```

# php - 通过页面传递变量

> ID：13743913
> 
> 赞同：1
> 
> 时间：2012-12-06T12:43:35.613
> 
> 标签：php, session, oracle11g

我有一个 index.php 页面。一开始我`session_start();` 在我的 index.php 中包含以下内容

```
 <div id="affinfocol">          
            <?php include ("search.php"); ?>
            <?php include ("affInfo.php"); ?>
            <!-- Right Col -->
            <div id="rightcol"><br>
                <?php include ("adeAff.php"); ?>
            </div>          
        </div>
        <!--Affilaition -->
        <div id="affiliation">              
            <?php include ("affAccess.php"); ?>             
        </div> 
```

Search.php 是用户输入电子邮件地址以查看它是否存在的地方。在搜索中，它会拉回 aff_id 并将其存储在会话变量中

```
sql="SELECT AFF_ID,LNAME, FNAME,EMAIL,ORG FROM AFFILIATE WHERE rtrim(EMAIL) LIKE '$s_email'";
$email_search = oci_parse($conn,$sql);
oci_define_by_name($email_search, 'ORG', $org);
oci_define_by_name($email_search, 'EMAIL', $e);
oci_define_by_name($email_search, 'FNAME', $fname);
oci_define_by_name($email_search, 'LNAME', $lname);
oci_define_by_name($email_search, 'AFF_ID', $affiliate);

$exec=oci_execute($email_search); 
oci_fetch($email_search);
$rows=oci_num_rows($email_search);
//$af=$affiliate;
$_SESSION['affiliate'] = $affiliate; 
```

affAccess.php 还包括一个 addAccess.php。这是在单击更新时使用 affAccess.php 中的其他值更新数据库的地方。这是我的更新代码

```
if ($Update){
    $dept=rtrim($_POST['dept']);
    $campus=rtrim($_POST['campus']);
    $creat=rtrim($_POST['creat']);
    echo $_SESSION['affiliate'];    
    $sdate=isset($_REQUEST["s_date"])?$_REQUEST["s_date"]:"";
    $edate=isset($_REQUEST["e_date"])?$_REQUEST["e_date"]:"";
    echo "updating";    
    echo " dept is " . $dept;
    echo " campus is ". $campus;

    $sql = "BEGIN PassGen(); END;";
    $stmt = oci_parse($conn,$sql);
    $exec =oci_execute($stmt,OCI_DEFAULT);

    if (!$exec) {
        $e = oci_error($stmt);
        trigger_error(htmlentities($e['message']), E_USER_ERROR);
    }

    if ($exec) {

    } 
$sql="INSERT INTO AFFILIATIONS (AFF_ID, START_DATE,END_DATE,DEPT_ID,CAMP_ID, CREAT_ID, CREATED_TSTAMP, PASSWD)
            SELECT :AffID_bv, to_date(:SDate_bv, 'dd-Mm-yyyy'),to_date(:EDate_bv, 'dd-Mm-yyyy'),:DeptID_bv, :CampID_bv,:CreatID_bv, current_timestamp,'Zq'||dbms_random.string('A',4)||'$8' from dual";
    $stid = oci_parse($conn,$sql);

    //oci_bind_by_name($stid, ":AffID_bv", $_SESSION["affID"]);
    oci_bind_by_name($stid, ":AffID_bv", $_SESSION['affiliate']);
    oci_bind_by_name($stid, ":DeptID_bv", $dept);
    oci_bind_by_name($stid, ":CampID_bv", $campus);
    oci_bind_by_name($stid, ":CreatID_bv", $creat);
    oci_bind_by_name($stid, ":SDate_bv", $sdate);
    oci_bind_by_name($stid, ":EDate_bv", $edate);   

    $exec2 =oci_execute($stid,OCI_DEFAULT); 
```

为了调试它，我在其他页面上回显它 echo `$_SESSION['affiliate']`。它正在选择它，但是当我单击更新时，`$_SESSION['affiliate']`它丢失了。

# hibernate - Hibernate Search 索引未完成的文档

> ID：13743915
> 
> 赞同：3
> 
> 时间：2012-12-06T12:43:40.820
> 
> 标签：hibernate, search, batch-file, indexing, hibernate-search

我在批量索引数据时遇到问题。我想索引一个`Article`列表，其中包含一些`@IndexedEmbedded`我需要获取信息的成员。`Article`从另外两个 bean 获取附加信息：`Page`和`Articlefulltext`.

由于 Hibernate Search Annotations，该批次正在**正确更新数据库**并为我的 Lucene 索引添加新内容。`Document`但添加的文档**字段不完整**。似乎 Hibernate Search 没有看到所有的注释。

因此，当我通过 Luke 查看生成的 lucene Index 时，我有一些关于 Article 和 Page 对象的字段，但没有关于 ArticleFulltext 的字段，但我的数据库中有正确的数据，这意味着persist() 操作已正确完成。 ..

我真的需要一些帮助，因为我看不出我的 Page 和 ArticleFullText 之间有什么区别......

奇怪的是，如果我使用 a `MassIndexer`，它会正确地将 Article + Page + Articlefulltext 数据添加到 lucene 索引中。但是我不想每次进行重大更新时都重建数百万个文档索引...

我将 log4j 日志记录级别设置为调试休眠搜索和 lucene。他们没有给我太多信息。

这是我的 bean 代码和批处理代码。

在此先感谢您的帮助，

**文章.java：**

```
@Entity
@Table(name = "article", catalog = "test")
@Indexed(index="articleText")
@Analyzer(impl = FrenchAnalyzer.class)
public class Article implements java.io.Serializable {

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id", unique = true, nullable = false)
    @DocumentId        
    private Integer id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "firstpageid", nullable = false)
    @IndexedEmbedded
    private Page page;

    @Column(name = "heading", length = 300)
    @Field(name= "title", index = Index.YES, store = Store.YES)
    @Boost(2.5f)
    private String heading;

    @Column(name = "subheading", length = 300)
    private String subheading;

    @OneToOne(fetch = FetchType.LAZY, mappedBy = "article") 
    @IndexedEmbedded
    private Articlefulltext articlefulltext;
    [... bean methods etc ...] 
```

**页面.java**

```
@Entity
@Table(name = "page", catalog = "test")
public class Page implements java.io.Serializable {

    private Integer id;
    @IndexedEmbedded
    private Issue issue;
    @ContainedIn
    private Set<Article> articles = new HashSet<Article>(0);
    [... bean method ...] 
```

**文章全文.java**

```
@Entity
@Table(name = "articlefulltext", catalog = "test")
@Analyzer(impl = FrenchAnalyzer.class)
public class Articlefulltext implements java.io.Serializable {

    @GenericGenerator(name = "generator", strategy = "foreign", parameters = @Parameter(name = "property", value = "article"))
    @Id
    @GeneratedValue(generator = "generator")
    @Column(name = "aid", unique = true, nullable = false)
    private int aid;

    @OneToOne(fetch = FetchType.LAZY)
    @PrimaryKeyJoinColumn
    @ContainedIn
    private Article article;

    @Column(name = "fulltextcontents", nullable = false)
    @Field(store=Store.YES, index=Index.YES, analyzer = @Analyzer(impl = FrenchAnalyzer.class), bridge= @FieldBridge(impl = FulltextSplitBridge.class))
    // This Field is not add to the Resulting Document ! I put a log into FulltextSplitBridge, and it's never called during a batch process. But if I use a MassIndexer, i see that FulltextSplitBridge is called for each Articlefulltext ...
    private String fulltextcontents;
    [... bean method ...] 
```

这是用于更新数据库和 Lucene 索引的代码

**批处理源代码：**

```
FullTextEntityManager em = null;

@Override
protected void executeInternal(JobExecutionContext arg0) throws JobExecutionException {
    ApplicationContext ap = null;
    EntityManagerFactory emf = null;
    EntityTransaction tx = null;

    try {
        ap = (ApplicationContext) arg0.getScheduler().getContext().get("applicationContext");
        emf = (EntityManagerFactory) ap.getBean("entityManagerFactory", EntityManagerFactory.class);
        em = Search.getFullTextEntityManager(emf.createEntityManager());
        tx = em.getTransaction();

        tx.begin();
                // [... em.persist() some things which aren't lucene related, so i skip them ....]
        for(File xmlFile : xmlList){
            Reel reel = new Reel(title, reelpath);
            em.persist(reel);
                    Article article = new Article();
                        // [... set Article fields, so i skip them ....]
                    Articlefulltext ft = new Articlefulltext();
                        // [... set Articlefulltext fields, so i skip them ....]
                    ft.setArticle(article);
                    ft.setFulltextcontents(bufferBlock.toString());
                    em.persist(ft); // i persist ft before article because of FK issues
                    em.persist(article); // there, the Annotation update Lucene index, but there's not updating fultextContent (see my first post)
            if ( nbFileDone % 50 == 0 ) {
                //flush a batch of inserts and release memory:
                em.flush();
                em.clear();
            }
        }
            tx.commit();
    }
    catch(Exception e){
        tx.rollback();
    }
    em.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:19:02.483

嗯，你似乎没有设置关系的双方。我可以看到*ft.setArticle(article)*，但看不到*article.setFtArticle(ft)*。关系的双方都需要设置。在您的情况下，*Articlefulltext*是关系的所有者，但这确实意味着您不必设置双方。

# sql-server-2008 - 使用 Visual Studio 2008 在 SQL 中重命名本地数据库表

> ID：13743916
> 
> 赞同：-1
> 
> 时间：2012-12-06T12:43:44.537
> 
> 标签：sql-server-2008, visual-studio-2010, rename, local-database

我`db.mdf`在 VS2010 asp.net 网站上创建了一个本地数据库。里面有几张桌子。

现在我需要重命名这些表。但是查询设计器不允许我这样做。如何重命名这些表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T07:14:43.010

在 Visual Studio 中重命名数据库表：

1.  服务器资源管理器
2.  右键单击表格
3.  单击编辑表架构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:04:58.193

1.  在服务器资源管理器中，右键单击要重命名的表，然后从快捷菜单中选择打开表定义。

该表在表设计器的表定义窗口中打开。2\. 右键单击​​“表定义”窗口中的表，从快捷菜单中选择“属性”。3\. 在“属性”窗口的“名称”值字段中，输入表的新名称。

1.  要取消此操作，请在离开此字段之前按 ESC 键。

2.  从文件菜单中选择保存表名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-07T12:57:47.337

答案在 Visual Studio 2017 中对我不起作用。表格字段由于某种原因被锁定。

对我有用的是以下内容。在`T-SQL`选项卡中更改条目

```
CREATE TABLE [dbo].[Table] ( 
```

至

```
CREATE TABLE [dbo].[NewTableName] ( 
```

然后选择`Update`（左上角）。它对我有用。

# ruby-on-rails-3 - 图像在 ruby on rails 中加载缓慢

> ID：13743917
> 
> 赞同：1
> 
> 时间：2012-12-06T12:43:44.923
> 
> 标签：ruby-on-rails-3

我使用 ruby​​ 1.9.3 开发了一个网站，并通过乘客部署在 aws 服务器上。但是我的网站加载需要时间。

我正在使用乘客：`production mode`

我很担心，因为我将图像的大小减小到 100kb，即使它们在加载时也需要时间，因为动画无法正常发生。

我`assets precompile :true` 在生产环境中。

有什么方法可以快速加载图像。请帮助我是红宝石的新手

感谢和问候拉贾特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:13:42.920

如果您使用资产管道，则需要使用 rake 任务预编译资产并将应用程序部署到生产环境。

```
bundle exec rake assets:precompile 
```

有关更多信息，请参阅以下链接 [http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html) http://stackoverflow.com/questions/8821864/config-assets-compile-true-in-rails-production-why-not

# android - 如何从发送的 JSONStringer 读取响应到 REST/WCF？

> ID：13743918
> 
> 赞同：2
> 
> 时间：2012-12-06T12:43:45.037
> 
> 标签：android

我正在向我的数据库发送信息，但我不知道如何读取从 JSON 获得的响应，只需读取新 Activity 中的“id”。你能给我发一个教程，或者类似的东西。这是我的数据验证。我的 id 为 0，而 Id 是一个字符串。

// 数据验证在这里

```
 if (isValid) {

                    // POST request to <service>/SaveGUID
                    HttpPost request = new HttpPost(url);
                    request.setHeader("Accept", "application/json");
                    request.setHeader("Content-type", "application/json");

                    // Build JSON string
                    JSONStringer via = new JSONStringer().object()
                            .key("id").value(checkId).key("username")
                            .value(usern).key("password").value(pass)
                            .endObject();

                    Log.i("JSON Object", via.toString());

                    StringEntity entity = new StringEntity(
                            via.toString());

                    Log.i("String Entity", entity.toString());
                    request.setEntity(entity);

                    // Send request to WCF service
                    DefaultHttpClient httpClient = new DefaultHttpClient();
                    HttpResponse response = httpClient.execute(request);

                    Log.d("WebInvoke", "Saving : "
                            + response.getStatusLine().getStatusCode());

                    SharedPreferences sharedPreferences = getSharedPreferences(PREFS_NAME, 0);
                    SharedPreferences.Editor editor = sharedPreferences.edit();
                    editor.putString("id", checkId);
                    editor.commit();

                    next();
                } 
```

提前Tnx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:06:18.057

从 as 获取 JSON 字符串`HttpResponse`：

```
 // YOUR CODE HERE ....
          StringEntity entity = new StringEntity(via.toString(),"UTF-8");

          Log.i("String Entity", entity.toString());
          request.setEntity(entity);

          // Send request to WCF service
          DefaultHttpClient httpClient = new DefaultHttpClient();
          HttpResponse response = httpClient.execute(request);

          int statusCode = httpResponse.getStatusLine().getStatusCode();  

          Log.d("WebInvoke", "Saving : " + statusCode); 

            if (statusCode == 200) {  

            result = retrieveInputStream(httpResponse.getEntity());  
            Log.d("result result :: ",result); 
            }  

        SharedPreferences sharedPreferences = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString("id", checkId);
        editor.commit();

       next();
  }

 protected String retrieveInputStream(HttpEntity httpEntity) {  
        int length = (int) httpEntity.getContentLength();  
        if (length < 0)  
            length = 10000;  
        StringBuffer stringBuffer = new StringBuffer(length);  
        try {  
            InputStreamReader inputStreamReader = new InputStreamReader(  
                    httpEntity.getContent(), HTTP.UTF_8);  
            char buffer[] = new char[length];  
            int count;  
            while ((count = inputStreamReader.read(buffer, 0, length - 1)) > 0) {  
                stringBuffer.append(buffer, 0, count);  
            }  
        } catch (UnsupportedEncodingException e) {  
            Log.e(TAG, e.getMessage());  
        } catch (IllegalStateException e) {  
            Log.e(TAG, e.getMessage());  
        } catch (IOException e) {  
            Log.e(TAG, e.getMessage());  
        }  
        return stringBuffer.toString();  
    } 
```

# c++ - 如何设计一个好的平台抽象层？

> ID：13743920
> 
> 赞同：5
> 
> 时间：2012-12-06T12:43:47.867
> 
> 标签：c++, design-patterns

我们在我们的大项目中有中心类和函数来从实际的平台类型中抽象出来，例如互斥体、文件、线程等，而不是在代码中到处都有“fopen”。虽然这很好，但我想更进一步，头文件中不包含任何系统（如`#include <windows.h>`），这将是真正的平台抽象和更快的编译。不利的一面是，您不能只将类型定义为系统类型（例如 Windows HANDLE）。

## 选项1：PImpl-idiom

```
class RwMutex
{
    // .....
private:
   struct Impl;
   Impl*   m_Impl;
} 
```

*   优点：实现和平台类型很好地隐藏在 Cpp 中。
*   缺点：涉及可能失败的两阶段建设（“新”，我们没有例外）。做事费劲。

## 选项 2：命名空间函数

```
class RwMutex {
public:
    bool LockRead() {return RwMutexLockRead( this );}
private:
    char m_AnonymousMember[ 16 ];
}
bool RwMutexLockRead( RwMutex* p ); 
```

*   优点：实现可以只链接到它，非常适合将其单独放入库中。
*   缺点：涉及包含成员的空间的 reinterpret_cast。在调试器中不好。还有很多工作。

也许我很渴望它，但如果大量项目代码将清除任何依赖于平台的包含，那将是很酷的，可能由`-nostdinc`选项强制执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:05:12.677

使用指针的选项 1 是个坏主意。使用其中一个`boost::scoped_ptr`，或者，如果可以，使用[`std::unique_ptr`](http://herbsutter.com/elements-of-modern-c-style/).

选项 2 在您实施时不应使用。请参阅[GotW #28：快速 Pimpl 成语](http://www.gotw.ca/gotw/028.htm)。然而，在 C++11 中，这可以使用`std::aligned_storage<>`. 我曾经写过一个`pimpl_ptr<T, Size, Align=default>`为你执行强制转换、复制、析构函数的调用，并检查你是否选择了正确的`Size`.

一般来说，使用 pimpl 除非您已经分析并表明这是瓶颈。

但一如既往，不要重新发明轮子。Mutex 和 Threads 是新 C++11 标准的一部分，因此要么升级编译器，要么改用 Boost。对于文件，请使用 Boost。原因是，新的 C++11 库的许多部分都取自 Boost。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:30:37.027

为什么还要有一个实现对象？您的代码不仅会在同一个平台上更改，而且您将在您当前使用的平台上使用相同的实现。在标头中定义接口，并为您所针对的每个平台的实现提供各种 *.cpp 文件。使用#ifndef、#else 等。

例如，您的文件系统可能如下所示：

```
include/
    RwMutex.hpp
    // etc...
src/
    RwMutex/
       RwMutexWin32.cpp
       RwMutexUnix.cpp
       // etc... 
```

以下是 RwMutexWin32.cpp 的样子：

```
#ifdef MYLIBPREFIX_PLATFORM_WIN32
#include "RwMutex.hpp"

#include <Windows.h>

// implement the Windows version of the RwMutex class 
```

另一个例子可能是查看 SDL，或其他一些用 C 或 C++ 编写的跨平台库。他们主要使用预处理器系统。您不太可能想要更改 Impl 对象指向的内容（即 Windows 机器上的 Unix 实现没有意义，也不会编译）。

当然，如果您真的想这样做，我建议您使用[CMake](http://www.cmake.org/)。但是正如其他人建议的那样，您应该尝试使用其他库，例如[boost](http://www.boost.org/)或[标准库](http://en.cppreference.com/w/)，它已经为您编写了。

# matlab - 在matlab中读取文件夹中的所有文件

> ID：13743922
> 
> 赞同：0
> 
> 时间：2012-12-06T12:43:53.463
> 
> 标签：matlab

> **可能重复：**
> [遍历matlab文件夹中的文件](https://stackoverflow.com/questions/11621846/loop-through-files-in-a-folder-in-matlab)

我有几个文件夹，每个文件夹大约有 50 个 csv 文件，我必须读取每个文件并将其放在一个与文件名称相同但没有扩展名 .csv 的变量中。文件是 2x15000 矩阵。任何人都可以帮忙吗？我已经搜索了互联网，但没有任何东西适合我。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T13:10:34.147

这是另一个解决方案：

```
dd = dir('*.csv');

fileNames = {dd.name}; 

data = cell(numel(fileNames),2);
data(:,1) = regexprep(fileNames, '.csv','');

for ii = 1:numel(fileNames)    
   data{ii,2} = dlmread(fileNames{ii});
end 
```

这将输出类似

```
data = 
    'test1.csv'    [2x15000 double]
    'test2.csv'    [2x15000 double]
    etc. 
```

使用这种方法，真的不需要飞来飞去的无数变量名。在这样的情况下使用单元阵列通常被认为是更好的方法；不计其数的变量名称方法是“未完成”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T13:12:25.597

我宁愿使用结构而不是变量来读取单个文件：

```
files=dir('*.csv');
for file = files
    varname = regexp(file.name, '^.\w+', 'match');
    varname = genvarname(varname{:});
    data.(varname) = csvread(file.name);
end 
```

如果你想要动态变量，你最终会使用`eval`，这是不推荐且危险的。

# spring-mvc - 手动执行 ModelAttribute 注释在 Spring MVC 中所做的事情

> ID：13743923
> 
> 赞同：0
> 
> 时间：2012-12-06T12:43:56.430
> 
> 标签：spring-mvc, modelattribute

我在 Spring MVC 控制器上有一个操作方法，它有一个用`@ModelAttribute`. 但是，我在编译时不知道这个参数的类型是什么——我知道抽象基类型但不知道派生类型。

在运行时，我将能够决定我期待什么类，并且我将能够获得这个类的新实例。但是，我不知道应该调用什么代码来以相同的方式解析请求数据`@ModelAttribute`。

我环顾四周，似乎如果我能抓住 a`WebRequestDataBinder`我可以用它来填充我的对象，但为此我需要 a`BinderFactory`而这就是我迷路的地方。

任何人都可以在这里给我一些指示 - 或者告诉我我正在以错误的方式看待它并且需要做其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:59:15.343

您可以在控制器方法中注入模型本身并自己访问属性。

```
@RequestMapping(...)
public void doStuff(ModelMap model) {
    Object attr = model.get("nameOfAttribute");
    // ...
} 
```

# javascript - 在 onClick 之前执行 href

> ID：13743925
> 
> 赞同：5
> 
> 时间：2012-12-06T12:44:31.140
> 
> 标签：javascript, jquery, html, hyperlink

我有以下链接：

```
<a href="#HDR" onClick="showGallery()">I</a> 
```

这使用以下javascript：

```
function showGallery(){
    if(window.location.hash) {
      $('#gallery').fadeIn('fast');
      var hash = window.location.hash.substring(1);
      alert(hash);
    } else {

    }

} 
```

因此，它仅在 URL 中是主题标签时才显示图库。但是当我点击链接时，什么也没有发生。当我单击它两次时，画廊淡入。

所以链接首先制作了 javascript，我不工作，因为 URL 中没有标签，然后，它执行 href 并在 URL 中插入标签。我怎样才能做到这一点？

我的目标：

当我点击一个链接时，它会打开一个画廊。要知道我必须打开哪个画廊，我在 URL 中插入一个 Hashtag。在这里，我想显示 HDR 专辑。而且我还想，如果我的网站使用标签打开，它应该显示画廊。！

还有另一种更简单或更清洁的方法吗？希望你明白我想要什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:48:38.313

对于现代浏览器，您可以将 Javascript 代码绑定到[onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)事件。链接将没有 Javascript：

```
<a href="#HDR">I</a> 
```

每当哈希值发生变化时，Javascript 就会运行：

```
function locationHashChanged() {
    if (location.hash === "#HDR") {
        $('#gallery').fadeIn('fast');
    }
}

window.onhashchange = locationHashChanged; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:49:20.543

您可以大大简化这一点，将 href 用于纯导航以外的其他事情并不是一个好习惯。

```
<a onClick="showGallery('HDR')">I</a> 
```

接着：

```
function showGallery(name){
    if(name) {
        $('#gallery').fadeIn('fast');
        alert(name);
    } else {

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T12:48:00.627

您是否尝试过调用 setTimeout 来延迟 onclick 事件？

像这样：

```
<a href="#HDR" onClick="setTimeout(function(){showGallery.call(this)},20)">I</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:52:33.127

如果你想在不点击链接的情况下运行 showGallery()，正确的代码是这样的：

```
<a href="#HDR" onClick="showGallery(); return false;">I</a> 
```

通过让`href`用户仍然可以在状态栏中看到目的地，并且导航仍然适用于没有 Javascript 的客户端（即 Google）。通过在事件处理程序中返回 false，您可以阻止浏览器跟踪该链接。

在 showGallery() 中，您可以显示图库并将“#HDR”添加到 location.hash。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T13:04:00.107

您不需要验证窗口的哈希值，因为在第一次单击时，地址栏中没有任何哈希值。该功能仅适用于第二次点击。

你可以做的是：

`<a href="#HDR" id="g1" onClick="showGallery('g1')">gallery 1</a>`

```
function showGallery(galid){
    var linkhash = $('#' + galid).attr('href').substring(1);

    alert(linkhash);

    $('#gallery' + linkhash).fadeIn('fast');
} 
```

# java - 如何调用另一个类的方法？

> ID：13743926
> 
> 赞同：1
> 
> 时间：2012-12-06T12:44:41.797
> 
> 标签：java, class, methods, java-7

当我尝试从我的主类中调用它时，我在访问单独类中的方法时遇到问题。这是方法

```
class RobotData
{
    private int junctionRecorder(IRobot robot)
    {
        int[] juncX;
        int[] juncY;
        int[] arrived;
        int[] junctions;
        int i = 0;
    i = junctions[0];
    juncX[i] = robot.getLocationX();
    juncY[i] = robot.getLocationY();
    arrived[i] = robot.getHeading();
    junctions[0]++;
    return i;
    }
} 
```

当我尝试在我的主课中调用它时，使用

```
public class Test
{
    public void controlRobot(IRobot robot)
    {
    int recordjunction = junctionRecorder(robot);
        //... 
```

它出现了这个错误

```
Test.java:7: cannot find symbol
symbol  : method junctionRecorder 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:52:15.693

你必须创建一个对象实例来调用它的方法（如果它不是静态的）：

```
public class Test
{
  public void controlRobot(IRobot robot)
  {
    RobotData rd = new RobotData();
    int recordjunction = rd.junctionRecorder(robot);
    //... 
```

或类似的东西（我想你想这样做）：

```
public class Test
{
  public void controlRobot(IRobot robot)
  {
    int recordjunction = robot.junctionRecorder(robot);
    //... 
```

但在这种情况下，类`RobotData`必须实现接口`IRobot`：

```
class RobotData implements IRobot 
```

而且方法`junctionRecorder`是`private`，你必须做到`public`。

无论如何，我认为您应该首先阅读基础知识（如对象、实例、创建它们等）并确保您理解它。

# android - 在 Spinners 之间更改数据

> ID：13743928
> 
> 赞同：1
> 
> 时间：2012-12-06T12:44:44.570
> 
> 标签：android

我的 android 应用程序中有三个微调器。

```
 <Spinner
            android:id="@+id/spinner1"
            android:layout_width="125dp"
            android:layout_height="50dp"
            android:entries="@array/country_arrays"                            
            android:hint="SELECT"
            /> 
```

像这个微调器 1 和 2。这是我的 java 代码：

```
public void addListenerOnSpinnerItemSelection(){    
    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner1.setOnItemSelectedListener(new CustomOnItemSelectedListener());
    spinner2 = (Spinner) findViewById(R.id.spinner2);
}

public void addListenerOnButton() {
    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner2 = (Spinner) findViewById(R.id.spinner2);
    btnSubmit = (Button) findViewById(R.id.btnSubmit);
    btnSubmit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent in = new Intent(getApplicationContext(),LoginActivity.class);

            startActivity(in);

            Toast.makeText(MyAndroidAppActivity.this,
                    "OnClickListener : " + 
                    "\n No.of.Adults : " + String.valueOf(spinner1.getSelectedItem()) +
                    "\n No.of.Children : " + String.valueOf(spinner2.getSelectedItem()) +
                    "\n No.of.Infants : " + 
        }
    });
} 
```

像这样

在这里，我通过 xml 传递了微调器的值，如下所示：

```
<.string-array name="number_arrays">
    <.item>0</item>
    <.item>1</item>
    <.item>2</item>
    <.item>3</item>
    <.item>4</item>
    <.item>5</item>
    <.item>6</item>
    <.item>7</item>
    <.item>8</item>
    <.item>9</item>
<./string-array> 
```

在这里，我只是使用点来显示代码。

现在的问题是……如果 spinner1 中的值为 1，则第二个 spinner 必须仅显示 8 个计数。两个 spinner 的总数必须严格为 9。如果 spinner1=2，则 spinner 必须显示 1 到 7 个计数. 同样......请有人帮助我在没有任何数据库的情况下解决这个问题......只需使用 for 循环。

# c# - 处理异常 .NET MVC 保存表单数据

> ID：13743929
> 
> 赞同：2
> 
> 时间：2012-12-06T12:44:48.850
> 
> 标签：c#, .net, asp.net-mvc, exception

我正在尝试处理我的 c# MVC 应用程序中的所有异常。所有的控制器都继承自 BaseController，所以我想我可以重写 OnException ( `protected override void OnException(ExceptionContext filterContext)`)。但是我不想重定向到错误页面，我想做的是返回到发起请求的页面并保持其状态。因此，如果我有一个由用户填写的表单，在处理异常后，我想用用户填写的信息显示该表单及其输入。

*注意：并非所有视图都是强类型的。*

例子：

**USER: myuser** <-- 在输入标签中输入的文本

处理异常后，我想返回上一个显示异常消息的视图。

**USER: myuser** <-- 在输入标签中输入的文本 **我的异常消息**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:51:08.653

验证不应被视为未处理的异常！请阅读[`Model Validation in ASP.NET MVC`](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)以处理这种情况。

顾名思义，未处理的异常是仅在异常情况下发生的事情。例外情况是当它发生时您的应用程序无法处理请求。因此重定向到已知状态没有意义，因为发生未处理的异常时没有状态。在这种情况下，您可以做的最好的事情是记录异常以进行进一步分析，并将用户重定向到 500 错误页面，通知他出了问题。

结论：

*   使用模型验证处理验证逻辑
*   对未处理的异常使用 OnException。

# objective-c - 您可以从编译时不可用的 objc 中的类继承吗？

> ID：13743930
> 
> 赞同：0
> 
> 时间：2012-12-06T12:44:54.103
> 
> 标签：objective-c, ios, inheritance, weak-linking

我有继承自`UIActivity`iOS 6 中引入的代码，它可以使用 Xcode 4.5 编译罚款，并且在 iOS 6 和以前的版本上运行良好（我在运行时检测到类的可用性）。但是，是否可以使用 Xcode 4.4 编译此代码，它的 SDK**中不**包含该类？`UIActivity`

如果我转发声明 UIActivity 该`dealloc`方法不会编译，因为它调用`super`并且编译器警告我该类已经在继承树的根部。也许有一种方法可以让这个类从我在本地定义的代理类继承，然后在运行时以某种方式调整它并实例化它，就好像它在编译时已经正确定义了一样？这样做的目的是使用 Xcode 4.4 编译代码并使用该*幻像*类在 iOS 6 上运行二进制文件。

我知道我可以使用定义来阻止我的子类使用 Xcode 4.4 及更早版本进行编译，但这意味着该功能在运行 iOS 6 的设备上不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:03:39.550

```
@interface UIActivityDummy : NSObject
//Copy UIActivity methods to avoid compiler warnings
@end

@implementation UIActivityDummy
@end

@interface MyClass : UIActivityDummy
@end

@implementation MyClass

+ (void) initialize {
    Class activityClass = objc_getClass("UIActivity");
    if (activityClass) {
        class_setSuperclass([MyClass class], activityClass);
    }
    NSLog(@"%@", [[MyClass class] superclass]);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:57:52.657

在这里，我只是详细说明我们如何才能在运行时上课。希望它会是您所需要的。请检查一下。

只需使用：

objc_lookUpClass(myClass);// 它检查所需的类。objc_getClass(myClass);//这就是你需要的。

请检查语法，因为我不确定。但是，有一次我使用过它，并且还能够获取 ivar 和方法，并且还能够在运行时添加方法。

如有任何问题，请回复我。:)

# c - 如何通过串行读取在 Arduino LCD 上存储两条单独的行

> ID：13743933
> 
> 赞同：1
> 
> 时间：2012-12-06T12:45:16.007
> 
> 标签：c, embedded, arduino

使用我当前的代码一次读取一个字符，因此将两个单独行的串行读取作为一个大输入读取。这会导致两条线都写在我的 Arduino 上的 LCD 显示屏的同一行上。有没有办法让空字符或换行符让这些输入写在不同的行上？

编辑：对不起，我应该指定输入文本的长度是可变的。

这是我的 Arduino 代码：

```
 #include <LiquidCrystal.h>
     #include <string.h>

    // These are the pins our LCD uses.
    LiquidCrystal lcd(8, 9, 4, 5, 6, 7);
    // initalize the lcd, and button input at zero.
    int lcd_key     = 0;
    int adc_key_in  = 0;

    void setup()
    {
     Serial.begin(9600); //Set the serial monitor.
     lcd.begin(16, 2); //Set the LCD
    }
    char line1;
    void loop()
   {

    if (Serial.available() > 0) { //If the serial monitor is open it will read a value.
    line1 = Serial.read();
    delay(10);
    Serial.print(line1);

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:55:24.657

当 LCD 初始化时，我猜它的默认位置是 0,0（即第一行和第一列）。然后对于从串行输入读取的每个字符，将其打印到 LCD 上，并增加列。如果输入中有换行符，则将 LCD 位置重置为 1,0（即第二行和第一列）。继续阅读和打印。

* * *

示例伪代码：

```
int current_line = 0;
int current_col = 0;

void loop(void)
{
    char ch = read_char_from_serial();

    if (ch == '\n')
    {
        current_line++;
        current_col = 0;
    }
    else
    {
        lcd_goto(current_line, current_col++);
        lcd_put_char(ch);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:58:59.650

LCD 在连续地址处为第一行和第二行提供缓冲区，具体取决于 LCD 型号（通常每行 40 或 64 个字符）您可以为第一行发送固定数量的字符，用空格右填充，然后是第二行. 例子：第一行<30个空格>第二行

您可能还需要设置 LCD (lcd.begin) 不滚动显示）

# c++ - 在字符串的情况下重载 = 运算符在 C++ 中

> ID：13743934
> 
> 赞同：2
> 
> 时间：2012-12-06T12:45:19.100
> 
> 标签：c++, visual-c++, operator-overloading

我想执行以下操作

```
int p = "xyz" 
```

我应该包含3，即=右侧的字符串长度。

我尝试使用 char * 数据成员创建一个类 String，但我在重载 = 运算符时遇到了麻烦，因为我们必须传递至少一个我们为其重载运算符的类的对象。

请帮忙。

我尝试执行以下操作：

```
friend void operator=(int, char*) 
```

但它不起作用，因为没有类类型的参数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T12:49:22.010

这是不可能的，`operator=`对于整数类型是不可重载的。看到[这个答案](https://stackoverflow.com/questions/4049887/c-overloading-assignment-operator-for-default-types)。

如果使用`std::string`，解决方案很简单：

```
std::string p = "abc";
int l = p.size(); // Better than l = p, because self describing 
```

# node.js - 在 Jade 中保留换行符

> ID：13743941
> 
> 赞同：4
> 
> 时间：2012-12-06T12:45:34.933
> 
> 标签：node.js, pug

每当我渲染一个 JADE 模板时，我都会在一行中获得所有 HTML。这使得在查看源代码模式下难以阅读。如何告诉 JADE 创建正确缩进的 HTML？

这是我的模板：

```
#application
  p#docs
    a(href='/docs/index.html') Documentation

  p#user-input
    input#msg(name='msg', size='50')
    input#submit(name='submit', type='submit', value='Send a Message')

  ul#messages 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:30:59.773

在 Jade 的编译选项中设置`pretty`为 true。

这可以通过多种方式完成，具体取决于您如何编译它们

*   从命令行传递`-P`or`--pretty`标志。
*   从快递 3.x 开始：`app.locals.pretty = true;`

*（express 2.x 使用了不同的语法：`app.set('view options', { pretty: true });`，请参阅迁移指南：[https](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x) ://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x ）*

然后您可以执行以下操作

```
#test.     // <-- notice the dot
    Lorem Ipsum is simply dummy text of 
    the printing and typesetting industry. 
    Lorem Ipsum has been the industry's standard dummy 
    text ever since the 1500s ,
    when an unknown printer took a galley of type and scrambled 
```

这将产生

```
<div id="test">
    Lorem Ipsum is simply dummy text of 
    the printing and typesetting industry. 
    Lorem Ipsum has been the industry's standard dummy 
    text ever since the 1500s ,
    when an unknown printer took a galley of type and scrambled 
</div> 
```

# php - 多次显示 foreach 循环中的最后一个元素

> ID：13743942
> 
> 赞同：1
> 
> 时间：2012-12-06T12:45:36.240
> 
> 标签：php, arrays, loops, foreach

嘿那里。我有一个有 7 个房间的单元，但其中只有 5 个有照片。我的目标是将它们中的每一个显示在正确的位置，即 1#room->1img, 2#room->1img, 3#room->3img, 4#room->2img, 5#room->1img, 6 #room->0img, 7#room->0img。这是我的数组：

```
Array
(
    [0] => Array
        (
            [large] =>room_galleries/4/large/XWKgkS_a503fd0054f4c6a04e72d95cef5d8b6a.jpg
            [thumb] =>room_galleries/4/thumb/XWKgkS_a503fd0054f4c6a04e72d95cef5d8b6a.jpg
        )

)
Array
(
    [0] => Array
        (
            [large] => room_galleries/13/large/96Hk2r_6e2507fabb7313d18d9a694eda740337.jpg
            [thumb] => room_galleries/13/thumb/96Hk2r_6e2507fabb7313d18d9a694eda740337.jpg
        )

)
Array
(
    [0] => Array
        (
            [large] => room_galleries/38/large/HXJTWL_98e71e7fbc9bab7096f0387b2ffa9ab9.jpg
            [thumb] => room_galleries/38/thumb/HXJTWL_98e71e7fbc9bab7096f0387b2ffa9ab9.jpg
        )

    [1] => Array
        (
            [large] =>room_galleries/38/large/XCquAP_5ccd9c6af4501a1c81b1e6b532100036.jpg
            [thumb] =>room_galleries/38/thumb/XCquAP_5ccd9c6af4501a1c81b1e6b532100036.jpg
        )

    [2] => Array
        (
            [large] => room_galleries/38/large/iDe0SN_6dcf2e3c9dc2180cbed5c98f0adbb0e9.jpg
            [thumb] => room_galleries/38/thumb/iDe0SN_6dcf2e3c9dc2180cbed5c98f0adbb0e9.jpg
        )

)
Array
(
    [0] => Array
        (
            [large] => room_galleries/39/large/FDM6JV_63243ea8328f4ba74200ea3c2d32aa0c.jpg
            [thumb] => room_galleries/39/thumb/FDM6JV_63243ea8328f4ba74200ea3c2d32aa0c.jpg
        )

    [1] => Array
        (
            [large] => room_galleries/39/large/ccNOdB_a12501222468f3e38f05433c002b8851.jpg
            [thumb] => room_galleries/39/thumb/ccNOdB_a12501222468f3e38f05433c002b8851.jpg
        )

)
Array
(
    [0] => Array
        (
            [large] => room_galleries/41/large/IosSy8_e4d6ff02cc21212c6cf6e616619f11b6.jpg
            [thumb] => room_galleries/41/thumb/IosSy8_e4d6ff02cc21212c6cf6e616619f11b6.jpg
        )

) 
```

这是我的php代码：

```
if( !empty( $r['images'])){
            $images = unserialize( $r['images'] );
            foreach( $images as $img ){
                $galleries[$r['roomID']][] = array(
                    'large' => ROOM_GALLERY_HTTP . $r['roomID'] . '/large/' . $img,
                    'thumb' =>  ROOM_GALLERY_HTTP . $r['roomID'] . '/thumb/' . $img,
                );  
            }
            print_r( $galleries[$r['roomID']] ); // the array above
            $tpl->set( 'galleries', $galleries[$r['roomID']] ); // set a tag named galleries for my template
        } 
```

我的问题是它显示循环中的最后一个元素 7 次：

```
Array
(
    [0] => Array
        (
            [large] => room_galleries/41/large/IosSy8_e4d6ff02cc21212c6cf6e616619f11b6.jpg
            [thumb] => room_galleries/41/thumb/IosSy8_e4d6ff02cc21212c6cf6e616619f11b6.jpg
        )

) 
```

有什么建议么？

# php - PHP中的密码恢复到期时间

> ID：13743945
> 
> 赞同：1
> 
> 时间：2012-12-06T12:45:44.650
> 
> 标签：php, password-recovery

我正在为我正在开发的网站编写一个简单的密码恢复功能，我想知道过期时间。

言归正传，我想为我要发送的重置密码链接添加大约 48 小时的过期时间。我是否必须创建一个新列来存储当前时间并稍后检查它是否仍然有效，还是有更简单的方法？

到目前为止，这是我的代码：

```
public function forgotPass($email) {
    $bd = new Bd();
    $conn = $bd->connect();
    $stt = $conn->prepare("SELECT * FROM Users where email=?");
    $stt-> bind_param("s",$email);
    $stt-> execute();
    $result = $stt->get_result();
    if (mysqli_num_rows($result) == 1) {
        $stt = $conn->prepare("INSERT INTO Users(recovery) VALUES(?)");
        $recovery = $this->randHash(8);

        if (!$recovery)
            return false;

        $stt-> bind_param("s",$recovery);
        $stt-> execute();
    }
} 
```

这是我的`randHash`代码：

```
private static function randHash($lenght) {
    if (!filter_var($lenght, FILTER_VALIDATE_INT)) {
        return false;
    }   
    $allowed = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    $max = strlen($allowed) - 1;
    for ($i=1;$i<=$lenght;$i++) {
        $hash .= $allowed[mt_rand(0, $max)];
    }
    return $hash;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:52:04.443

只需在数据库中使用重置令牌保存到期时间，当时间到期时，不再接受重置令牌。这是迄今为止最简单和最安全的方法。

另一种方法是创建一个重置哈希，附加时间，并使用密钥对其进行加密。检查哈希时解密并检查时间戳。但是，如果密钥泄露，此方法将变得像将其以纯文本形式放在 URL 中一样弱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:41:04.620

*编辑：我今天早上收到一封关于这个答案的电子邮件，询问我答案的散列部分是否只是为了制作一个真正独特的 ID。以下是我的回应：*

我仔细阅读并重新阅读了 Stack Overflow 上的问题。该代码不仅用于制作真正唯一的 ID（尽管没有冲突很重要）。这也使其他人很难编写自己的密码恢复链接来访问用户帐户。

通过使用用户名和电子邮件创建散列（并且不散列整个代码），我们将能够包括对用户身份的额外验证。也就是说，仅仅拥有链接是不够的。重置密码也需要有效的用户名和电子邮件地址组合。

字符串被附加到用户名、当前时间和电子邮件中，以基本尝试击败彩虹表。回想起来，最好分别用 base64_encode($row['username']) 和 base64_encode($email) 替换“”盐。

* * *

我建议创建两列：recovery 和 recovery_expiry。recovery_expiry 在链接过期时保存，recovery 保存必须比较的哈希。它由用户名、当前时间附加的盐和用户的当前电子邮件地址组成。

```
function forgotPass($email)
{
    $currTime = time();
    $expiryTime = 60 * 60 * 24 * 2; // Two days

    $bd = new Bd();
    $conn = $bd->connect();
    $stt = $conn->prepare("SELECT * FROM Users where email=?");
    $stt->bind_param("s", $email);
    $stt->execute();
    $result = $stt->get_result();
    if (mysqli_num_rows($result) == 1)
    {
        $row = mysqli_fetch_array();
        $stt = $conn->prepare("INSERT INTO Users(recovery, recovery_expiry)"
               . " VALUES(?,?)");
        $hash = hash("sha256", " " . $row['username'])
                . hash("sha256", "vivid" . $currTime)
                . hash("sha256", " " . $email);

        $stt->bind_param("s", $hash);
        $stt->bind_param("i", $currTime + $expiryTime);
        $stt->execute();
    }
    else
    {
        // Return that the given email address did not match any records
    }
    // Here would be the logic to send the forgotten password link to the user
}

function checkHash($hash)
{
    $row = null;
    $currTime = time();
    $bd = new Bd();
    $conn = $bd->connect();
    $stt = $conn->prepare("SELECT * FROM Users WHERE recovery=? AND recovery_expiry < $currTime");
    $stt->bind_param("s", $hash);
    $stt->execute();
    $result = $stt->get_result();
    if (mysqli_num_rows($result) == 1)
    {
        $row = mysqli_fetch_array();
    }
    return $row;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:54:43.863

将当前日期存储在数据库中是一种方法。然后你可以很容易地检查它是否少于 48 小时。另一种方法是在电子邮件中包含时间。

```
public function forgotPass($email) {
    $bd = new Bd();
    $conn = $bd->connect();
    $stt = $conn->prepare("SELECT * FROM Users where email=?");
    $stt-> bind_param("s",$email);
    $stt-> execute();
    $result = $stt->get_result();
    if (mysqli_num_rows($result) == 1) {
        $hash1 = md5(microtime().$email.'xx'); //create a unique number for email
        $ctime = time();
        $hash2 = md5($hash1.$ctime); //create a unique hash based on hash1 and time

        $stt = $conn->prepare("INSERT INTO Users(recovery) VALUES(?)");
        $recovery = $hash2;

        if (!$recovery)
            return false;

        $stt-> bind_param("s",$recovery);
        $stt-> execute();

        //send email with link
        // http://www.example.com/resetpass.php?hash=$hash1&time=$ctime
    }
}

//and then in resetpass.php
//NEEDS CHECKS FOR VALID QUERYVALUES

if (time()-$_GET['time'] <= 48 * 60 * 60)  {
  $checkhash = md5($_GET['hash'].$_GET['time']);
  //check database for hash
} 
```

# html - 高度和宽度 % 不做任何事情

> ID：13743951
> 
> 赞同：0
> 
> 时间：2012-12-06T12:46:14.090
> 
> 标签：html

嘿，我被 CSS 代码困住了，我正在尝试将某个 div 设置为页面高度的 100% 和宽度的 25%，并用背景填充它，但它只有在有文本时才有效输入，它会自行调整到文本的高度，而不是页面。

希望有人可以帮助我。

索引.html

```
<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="style.css">
<head>
    <title>Height test</title>
</head>

<body>
    <div id="menu">kaas</div>
</body> 
```

样式.css

```
 body{
    background:#fff;
}

#menu{
    background:#000;
    height:100%;
    width:25%;
} 
```

在此先感谢，雷米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:57:28.173

如果您将 DIV 设置为 100%，它将根据其内容进行调整。在您出现的这个简短示例中，没有内容，因此 100% 的无是无。

如果您希望此 div 基于页面大小，则必须指定它。

```
body{
    width:900px;  //example values 
    height:500px; //example values
}

#menu{
    background:#000;
    height:100%;
    width:25%;
} 
```

我建议您创建另一个 div 来处理页面。

```
<body>
    <div id="page">
        <div id="menu">kaas</div>
    </div
</body> 
```

接着：

```
#page{
    width:900px;  //example values 
    height:500px; //example values
}

#menu{
    background:#000;
    height:100%;
    width:25%;
} 
```

# actionscript-3 - 仅当所有目标都被拖动时，如何转到 prev/nextFrame？

> ID：13743952
> 
> 赞同：1
> 
> 时间：2012-12-06T12:46:29.503
> 
> 标签：actionscript-3, flash

我的问题是如何在“猴子”和“狗”都被拖出滚动窗格之后转到上一帧/下一帧。

文件放在下面： [https ://www.sugarsync.com/pf/D9726155_61875891_24948](https://www.sugarsync.com/pf/D9726155_61875891_24948)

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T14:54:13.097

我能想到的 2 种方法 1-检查猴子的 x 和 y 位置，如果它们低于或高于滚动窗格的 x 和 y，然后转到下一帧 2-设置和不可见的碰撞区域并检查它们是否发生碰撞。

我会在代码方面提供更多帮助，但我没有找到要拖动的对象^_^

# localization - 本地化环境中的动态表达式解析

> ID：13743954
> 
> 赞同：0
> 
> 时间：2012-12-06T12:46:39.407
> 
> 标签：localization, lambda, dynamic-linq, linq-expressions

所以我正在尝试使用 System.Linq.Dynamic 解析一个简单的算术动态表达式。当在 CurrentCulture 为 English-US 的英语环境中执行时，这运行良好（并且小数点分隔符是一个普通的“.”点）。尝试在非英语环境中运行代码（例如，保加利亚语中的 Windows7x64，其中小数点分隔符是“，”逗号），ParseLambda 失败。

如果我在我的表达式中输入“1.0”，ParseLambda 在保加利亚语环境中会失败，并带有一个 PraseExpression，说“无效的真实文字 '1.0'”（但在英语环境中不会失败）。如果我尝试在我的表达式中输入“1,0”，ParseLambda 会失败，ParseExpression 会显示“语法错误”（这在两种环境中都失败）。

有谁知道解决这个问题的方法？
还是我错过了什么？
或者我可以以某种方式设置解析表达式的文化吗？
我需要我的应用程序在两种环境中都能正常运行。
我的代码在 .NET v4.0 上运行，并且我添加了 System.Linq.Dynamic.dll (1.0.0.0) 作为对项目的引用。
这是代码：

```
using System;
using System.Linq;
using System.Linq.Dynamic;

namespace DynamicExpressionTest
{
    class Program
    {
        static void Main(string[] args)
        {
            //FAIL: ParseException: Invalid real literal '1.0' (fails only in non-English environment)
            var expression1 = DynamicExpression.ParseLambda(
                new System.Linq.Expressions.ParameterExpression[] { },
                typeof(double), 
                "1.0 + 1.0");
            var result1 = expression1.Compile().DynamicInvoke();
            double resultD1 = System.Convert.ToDouble(result1);
            Console.WriteLine(resultD1);

            //FAIL: ParseException: Syntax error (fails both in English and non-English environments)
            var expression2 = DynamicExpression.ParseLambda(
                new System.Linq.Expressions.ParameterExpression[] { }, 
                typeof(double), 
                "1,0 + 1,0");
            var result2 = expression2.Compile().DynamicInvoke();
            double resultD2 = System.Convert.ToDouble(result2);
            Console.WriteLine(resultD2);
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:07:23.457

您可以在运行该代码之前设置当前文化。例如，在您的代码之前添加这一行，该代码仅适用于英文风格的小数分隔符：

```
System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US"); 
```

# android - 在android中使用线性布局设计

> ID：13743959
> 
> 赞同：0
> 
> 时间：2012-12-06T12:47:08.173
> 
> 标签：android, android-layout

我想使用线性布局在 android 中设计以下设计 ![在此处输入图像描述](../Images/9e523bf900956a77f57b88cd2189f7b3.png)

我写了以下代码但没有工作

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"  android:layout_weight="1"
        android:layout_height="fill_parent" android:orientation="vertical">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" android:layout_weight="1" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@android:drawable/alert_dark_frame" />           
                    <LinearLayout android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:weightSum="2" >
                            <TextView
                                android:id="@+id/textView1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content" android:layout_alignParentLeft="true"
                                android:text="TextView" android:layout_weight="1" />        
                            <TextView
                                android:id="@+id/textView2" android:layout_weight="1"
                                android:layout_width="wrap_content" 
                                android:layout_height="wrap_content" android:layout_alignParentRight="true"
                                android:text="TextView" />
                    </LinearLayout>                
                <TextView
                    android:id="@+id/textView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="TextView" android:hint="TestData"/>
            </LinearLayout>            
</LinearLayout> 
```

它给了我这样的输出

![在此处输入图像描述](../Images/0f508d15dddfad5db6c025e5b47df103.png)

谁能指出我..哪里有问题？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:14:18.310

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@android:drawable/alert_dark_frame" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:weightSum="2" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="dfasdfasdfasfasf" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="07 DEc" />
        </LinearLayout>

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="dskfhasjkldfhadjklsfhadjklsfhajkldfhadjklsfhajklsfhajklsdfhajklsdfhajklsdfhajkldf" />
    </LinearLayout>

</LinearLayout> 
```

这将工作... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:57:36.660

这应该有效。但是如果你使用它会更好`RelativeLayout`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_weight="1"
android:background="@android:color/white"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@android:drawable/alert_dark_frame" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:weightSum="2" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />
    </LinearLayout>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="TestData"
        android:text="TextView" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:58:12.120

我认为您可以在第一级使用 relativelayout，如下所示：

```
<relativelayout>
     <imageview align to parent top, left, bottom>
     <linearlayout align to parent to, right, right to image view>
          <textview1/>
          <textview2/>
     </linearlayout>
     <textview align to parent bottom, right, righto to image view, below linearlayout>
 </relativelayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T13:08:26.110

这对你有用。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:padding="5dip" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="70px"
        android:layout_height="50px"
        android:layout_marginRight="3dip"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/toptext"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:maxLines="1"
                android:text="dsggsdggfsgf"
                android:textColor="#000000"
                android:textSize="16px"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/datetext"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:maxLines="1"
                android:text="1 dec 2012"
                android:textColor="#cccccc"
                android:textSize="12px"
                android:textStyle="bold" />
        </RelativeLayout>

        <TextView
            android:id="@+id/bottomtext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="dsggsdggfsgfwaffgdgafgggfdgfdgsfgfdgdfsgdfdsggsdggfsgfwaffgdgafgggfdgfdgsfgfdgdfsgdfdsggsdggfsgfwaffgdgafgggfdgfdgsfgfdgdfsgdfdsggsdggfsgfwaffgdgafgggfdgfdgsfgfdgdfsgdf"
            android:textColor="#696969"
            android:textSize="12px" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T13:09:19.817

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"  android:layout_weight="1"
    android:layout_height="fill_parent" android:orientation="vertical">

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" android:weightSum="3" 
            android:orientation="horizontal">

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:src="@android:drawable/alert_dark_frame" 
                android:layout_weight="2"/>           
                <LinearLayout android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical" >
                        <LinearLayout android:layout_width="match_parent"
                             android:layout_height="wrap_content"
                             android:weightSum="3"
                             android:orientation="horizontal" >
                                <TextView
                                    android:id="@+id/textView1"
                                    android:layout_width="fill_parent"
                                    android:layout_height="wrap_content" 
                                    android:text="hfdfhfj" android:layout_weight="2" />        
                                <TextView
                                    android:id="@+id/textView2" android:layout_weight="1"
                                    android:layout_width="wrap_content" 
                                    android:layout_height="wrap_content"
                                    android:text="6 Dec 2012" />

                         </LinearLayout>
                         <LinearLayout android:layout_width="fill_parent"
                             android:layout_height="wrap_content">
                             <TextView
                                    android:id="@+id/textView3"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="fkjfkdsnfdsnfkdsn\nmnfkfknfkdf\nfknf" android:hint="TestData"/>
                         </LinearLayout>
                </LinearLayout>                

        </LinearLayout>            
   </LinearLayout> 
```

试试这个代码。这正是你想要的。

# android - 在动画期间更改 ImageView 图像

> ID：13743963
> 
> 赞同：1
> 
> 时间：2012-12-06T12:47:32.063
> 
> 标签：android, android-animation, android-imageview

我有一个`ImageView`. 我想要：
1 - 缩小视图
2 - 更改图像资源
3 - 缩小视图

我在以下代码部分中尝试了此操作，但这不起作用。它的行为就像第三行不存在。有人可以告诉我我做错了什么吗？

```
Animation anim = AnimationUtils.loadAnimation(this, R.anim.scale);
Animation animo = AnimationUtils.loadAnimation(this, R.anim.scale_out);
i.startAnimation(anim);
i.setImageResource(R.drawable.logoc);
i.startAnimation(animo); 
```

规模.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <scale xmlns:android="http://schemas.android.com/apk/res/android"
android:fromXScale="1.0" 
android:toXScale="0.125"
android:fromYScale="1.0" 
android:toYScale="0.125" 
android:pivotX="50%"
android:pivotY="50%" 
android:startOffset="0" 
android:duration="400"
android:fillBefore="true" /> 
```

scale_out.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<scale xmlns:android="http://schemas.android.com/apk/res/android"
android:fromXScale="1.0" 
android:toXScale="4.0"
android:fromYScale="1" 
android:toYScale="4.0" 
android:startOffset="400" 
android:pivotX="50%"
android:pivotY="50%"
android:duration="800"
 /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:55:10.820

我认为你应该尝试这样做：

```
i.startAnimation(anim);
if (anim.hasEnded())
{
    i.setImageResource(R.drawable.logoc);
    i.startAnimation(animo);
} 
```

编辑：

好的，我错了：这有效：

```
public class MyAnimationListener implements AnimationListener {

        @Override
        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub

            i.setImageResource(R.drawable.bg);
            i.startAnimation(animo);

        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

    } 
```

* * *

```
MyAnimationListener mListener = new MyAnimationListener();
        anim.setAnimationListener(mListener);
        i.startAnimation(anim); 
```

# python - 如何环绕到列表的开头/结尾？

> ID：13743969
> 
> 赞同：0
> 
> 时间：2012-12-06T12:48:01.283
> 
> 标签：python, list

我有一个二维数组，每个数组都有不同的物种。我在数组上选择一个随机元素，我想计算每个物种中有多少在紧邻该元素的八个方格中。

但我希望数组在边缘环绕，所以如果我在顶行选择一个元素，底行将被视为“相邻”。`j in range (x-1,x+1)`在迭代j 和 y时如何做到这一点？

另外，有没有比`if (j!=x or k!=y`直线更优雅的方式来省略我在查看相邻方块时最初选择的元素？

```
numspec = [0] * len(allspec)
for i in range (0,len(allspec)):
    #count up how many of species i there is in the immediate area
    for j in range(x-1,x+1):
        for k in range(y-1,y+1):
            if (j!=x or k!=y):
                numspec[hab[i][j]] = numspec[hab[i][j]]+1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:55:19.867

您可以使用`j%8`它为您提供一个从 0 到 7 的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:16:55.097

至于包装，我建议使用从 -1 到 +1 的相对索引，然后使用模运算符 ( `%`) 计算实际索引。

至于确保你不计算原始元素（x，y），你做得很好（我可能会使用相反的条件并继续，但这没关系）。

我不太了解您对`i, j, k`索引的使用，所以我假设它`i`是物种的索引，是我更改为`j, k`2d 地图的索引，并使其更具可读性。如果我弄错了，请更改代码或让我知道。`hab``x_rel``y_rel``x_idx``y_idx`

我还冒昧地做了一些小修复：

*   引入`N`代表物种数量的常数
*   更改`range`为`xrange`（xrange 更快，使用更少的内存等）
*   无需在范围（或 xrange）中指定 0
*   而不是`X = X + 1`为了增加价值，我使用了`+=`这样的增量运算符：`X += 1`

这是结果代码：

```
N = len(allspec)
numspec = [0] * N
for i in xrange(N):
    for x_rel in xrange(-1, +1):
        for y_rel in xrange(-1, +1):
            x_idx = (x + xrel) % N
            y_idx = (y + yrel) % N
            if x_idx != x or y_idx != y:
                numspec[hab[x_idx][y_idx]] += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:57:08.247

您可以构建相邻元素的列表并从那里开始。例如，如果您的 2d 列表被调用`my_array`并且您想检查紧邻周围的块，`my_array[x][y]`那么您可以执行以下操作：

```
xmax = len(my_array)
ymax = len(my_array[0])  #assuming it's a square...

x_vals = [i%xmax for i in [x-1,x,x+1]]
y_vals = [blah]

surrounding_blocks = [ 
     my_array[x_vals[0]][y_vals[0]],
     my_array[x_vals[0]][y_vals[1]],
     my_array[x_vals[0]][y_vals[2]],
     my_array[x_vals[2]][y_vals[0]],
     my_array[x_vals[2]][y_vals[1]],
     my_array[x_vals[2]][y_vals[2]],
     my_array[x_vals[1]][y_vals[0]],
     my_array[x_vals[1]][y_vals[2]],
        ] 
```

# ios - 如何将自定义社交网络添加到 UIActivityViewController

> ID：13743974
> 
> 赞同：-1
> 
> 时间：2012-12-06T12:48:30.443
> 
> 标签：ios, pinterest, uiactivityviewcontroller

> **可能重复：**
> [将自定义活动添加到 UIActivityController 时出现问题](https://stackoverflow.com/questions/12751891/problems-adding-custom-activity-to-uiactivitycontroller)

我的 iOS 6 应用程序中有一个工作的 UIActivityViewController，用于显示标准社交应用程序（电子邮件、Facebook、Twitter 和 iMessage）。我想知道他们是否可以将您自己的社交网站添加到此控制器？具体来说，我正在查看 Pinterest，但我想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:27:42.000

Take a look at this:

This is a sample code! And you can do it like they do in this sample:

[http://www.cocoacontrols.com/platforms/ios/controls/buffer-uiactivity](http://www.cocoacontrols.com/platforms/ios/controls/buffer-uiactivity)

hope that helped

# css - 带有 JSF 和 Primefaces 的 CSS - styleClass 不会改变字体大小

> ID：13743975
> 
> 赞同：0
> 
> 时间：2012-12-06T12:48:36.743
> 
> 标签：css, jsf, primefaces

有人可以告诉我为什么 selectOneMenu、InputMask、inputText 不能处理我的 css 文件类中定义的字体大小、宽度和高度？仅在使用 style = "font-size: 11px;" 时需要。

xhtml:

```
<h:selectOneMenu value="#{bean.parametro.numTipoAcesso}" styleClass="selectOneMenu">
 <f:selectItem itemLabel="" itemValue="" />                     
 <f:selectItem itemLabel="Acesso Básico" itemValue="1" />
 <f:selectItem itemLabel="Acesso Múltiplo DDR" itemValue="2" />
 <f:selectItem itemLabel="CNG" itemValue="3" />
</h:selectOneMenu>

<h:inputText id="numeroBilhete" styleClass="inputText" value="#{bean.parametro.numBilhetePortabilidade}" disabled="#{bean.parametro.fraude == false}"/>

<p:inputMask id="identidade" styleClass="inputText" value="#{bean.parametro.identidade}" mask="99999999-9" disabled="#{bean.parametro.naoPossuiId == true}" required="true" requiredMessage="Digite o Documento de Identidade." /> 
```

css

```
.selectOneMenu {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 11px;
    color: #000000;
    text-decoration: none;
    width   : 193px; 
    height  : 23px; 
}

.inputText {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 11px;
    color: #000000;
    text-decoration: none;
    width   : 186px; 
    height  : 20px;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:04:32.813

因此，使用 PF 3.5RC1 可以正常工作（属性样式，目的是将 inputMask 中的文本着色为灰色）：

```
<p:inputMask id="iDatum" value="#{referenz.verkehrstagReferenz}" mask="99.99.99" converter="#{verkehrstagBOConverter}" 
                            disabled="#{referenz.referenzTyp.toString() == 'IST'}" style="#{referenz.displayed ? '' : 'color: #808080'}" size="8">
                            <p:ajax event="blur" update="@form" process="@form" />
                        </p:inputMask> 
```

但这不起作用（属性 styleClass）：

```
<p:inputMask id="iDatum" value="#{referenz.verkehrstagReferenz}" mask="99.99.99" converter="#{verkehrstagBOConverter}" 
                            disabled="#{referenz.referenzTyp.toString() == 'IST'}" styleClass="#{referenz.displayed ? '' : 'grey'}" size="8">
                            <p:ajax event="blur" update="@form" process="@form" />
                        </p:inputMask> 
```

# magento - 在 list.phtml 上显示自定义图像

> ID：13743982
> 
> 赞同：1
> 
> 时间：2012-12-06T12:48:59.663
> 
> 标签：magento

我正在尝试在 list.phtml 中包含自定义图像属性。使用 catalog.xml 中的 addAttribute 方法将该属性包含在产品集合中：

```
<action method="addAttribute"><code>hover_image</code></action> 
```

如果我尝试 $_product->getHoverImage，我会得到很好的 url。但是当我尝试使用以下方法调整图像大小时：

```
 $this->helper('catalog/image')->init($_product, 'hover_image')->resize(240,186) 
```

它不起作用，我收到错误“找不到图像文件”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:46:11.813

我设法让它与一个简单的 if 语句一起工作：

```
<?php if($_product->getHoverImage()): ?>
<?php echo $this->helper('catalog/image')->init($_product,'hover_image')->resize(240,186); ?>
<?php endif; ?> 
```

# java - 如何将值插入存储的字符串常量值

> ID：13743991
> 
> 赞同：1
> 
> 时间：2012-12-06T12:49:22.570
> 
> 标签：java

如何将值插入到存储字符串值中。

我的方法之前有一个存储常量，我将用于计数变量

然后在我的`getCount`方法中我传入了`Smith`，但是在调用它时它没有进入常量。

```
public static final String TEST = String.format("SELECT count(first_name) FROM students WHERE last_name = %s",lastName);

    public getCount(String lastName){

        String lastName2 ="";
        lastName2 = lastName;

        count = TEST; 
```

但是当我把它打印到屏幕上时，它说 TEST 常数是`SELECT count(first_name) FROM students WHERE last_name = lastName"` 而不是`Smith`

我怎样才能在这里得到这个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:52:47.557

当您第一次运行程序时，您的常量只初始化一次，（定义为`final`一旦设置就不能更改的变量）。

让它成为一种方法：

```
String getSelectString(String lastName) {
    return String.format("SELECT count(first_name) FROM students WHERE last_name = %s", lastName);
} 
```

然后，只要您想访问“常量”，就调用该方法。（这不是一个真正的常数）

```
public getCount(String lastName) {
    (...)
    count = getSelectString(lastName);
    (...)
} 
```

# html - IE 错误响应

> ID：13743992
> 
> 赞同：2
> 
> 时间：2012-12-06T12:49:24.917
> 
> 标签：html, css, responsive-design, windows-phone, internet-explorer-10

我在 IE（移动分辨率）中的响应式设计有问题。

我刚刚忙于在 Android 和 iOS 手机中正确查看。但现在我已经认识到 windows mobile (8) 上 IE (10) 的移动视图存在错误。

问题是在网站的右侧有一个空白区域。

我怀疑这不是视口的问题。大多数响应式网站在 Windows Mobile 上运行良好。我尝试了一些不同的视口，也来自工作网站，但这并不能解决问题。

可能 HTML 或 CSS 中存在另一个错误，使浏览器认为有更多内容。也许溢出或什么？我试图设置溢出-x：隐藏和溢出-y：滚动，适用于我电脑上的IE（手机大小），但不适用于windows phone

我希望有人可以帮助我找出这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:33:58.430

无法重现您的问题。这个问题还有意义吗？
通常（根据我的经验）这种白色的侧边条纹是由一些未正确包装的块元素和跨越/移动视口的浮动引起的。对于更具体的答案，看看实际问题会很酷。

PS
不是最好的答案，尽管自从我加入了自举潮流后，我就忘记了这种头痛:)
祝你好运
。

# java - JAVA建立连接后如何检查数据库是否存在

> ID：13743993
> 
> 赞同：0
> 
> 时间：2012-12-06T12:49:29.700
> 
> 标签：java, database, exists, database-engine

我有一个大问题...我有一个数据库 java 程序创建。

我想知道数据库是否存在，如果存在只是连接，如果不创建它。

我试过这个：

```
if (dbName.exists() == false) {} 
```

这是所有的代码......

```
Class.forName("com.mysql.jdbc.Driver");
System.out.println("MySQL JDBC driver loaded ok."); 
```

这是它的备份代码，只是现在可以工作.... 部分代码可以工作！

```
conn = DriverManager.getConnection(DBurl + url
+ "?createDatabaseIfNotExist=true&amp; + "
+ "useUnicode=true&amp;characterEncoding=utf-8&user="
+ userName + "&amp;&password=" + password);

System.out.println("Connected to database ");           
System.out.println("Connected to the database " + url); 
```

但我想要这样的东西：

```
FILE dbName = new FILE (url);
Statement stmt = new Statement;

if (dbName.exists() == true)
   System.out.println("Database exists ! Connecting ... ");
else {
   String sql = "CREATE DATABASE "+url;
   stmt.executeUpdate (sql);
} 
```

我不想将带有密码和用户名的 url 放在同一个地方......因为它们是从外部部分提供的，但这已经实现并且可以正常工作。

所以我想打破2个和平，1个连接“jdbc：mysql：// localhost：3306/”；没有作为数据库名称的 URL ...然后如果数据库不存在，则该名称只是创建。

它不工作....没有输入`else`更多，并说 Exeption 数据库已经存在。

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:37:32.357

如果是 MySQL 数据库，下面的代码应该可以工作。其他数据库可能会给出不同的错误代码，但大致的方式应该是清楚的。重要的是您连接到实例，而不是最初连接到特定数据库。要创建表，您需要连接到新创建的数据库。您不能使用我在示例中使用的实例连接来创建表：

```
 Connection connection = null;
    Statement statement = null;
    try {
        Class.forName("com.mysql.jdbc.Driver");
        connection = DriverManager.getConnection("jdbc:mysql://localhost/",
                "root", "admin");
        statement = connection.createStatement();
        String sql = "CREATE DATABASE DBNAME";
        //To delete database: sql = "DROP DATABASE DBNAME";
        statement.executeUpdate(sql);
        System.out.println("Database created!");
    } catch (SQLException sqlException) {
        if (sqlException.getErrorCode() == 1007) {
            // Database already exists error
            System.out.println(sqlException.getMessage());
        } else {
            // Some other problems, e.g. Server down, no permission, etc
            sqlException.printStackTrace();
        }
    } catch (ClassNotFoundException e) {
        // No driver class found!
    }
    // close statement & connection 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:01:35.230

在不了解这里发生的事情的情况下，简单地尝试连接到不存在的数据库应该会引发`TimeoutException`错误或类似的事情。如果您无法连接，只需捕获异常并执行操作。

```
boolean canConnect = false;
Connection conn = null;
try{
    conn = DriverManager.getConnection(...);
    canConnect = true;
}(Exception ex){
   canConnect = false;
}

if (!canConnect){
  makeDatabase(...);
} 
```

祝您愉快！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-26T12:38:51.990

```
try {
        Class.forName("com.mysql.cj.jdbc.Driver");
        Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/", "root", "admin");
        Statement statement = connection.createStatement();
        String sql = "CREATE DATABASE IF NOT EXISTS DBNAME";
        statement.executeUpdate(sql);
    } catch (ClassNotFoundException | SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

请注意两件事

1.  新的驱动程序类是`com.mysql.cj.jdbc.Driver'
2.  查询*CREATE DATABASE IF NOT EXISTS DBNAME*意味着您不必检查数据库是否存在

# python-2.7 - 如何在 Google 驱动 API [python] 中使用 maxResult 或 q search 作为 Files.list 方法的参数？

> ID：13743999
> 
> 赞同：1
> 
> 时间：2012-12-06T12:50:06.007
> 
> 标签：python-2.7, google-drive-api

来自本教程：[https ://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)

在其 python 示例中，如何在代码中使用 maxresult 和 q search？我试图在参数列表中分配这些，但它不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:21:31.300

尝试类似：

result = drive.files().list(q='"me" in owner', maxResults=10).execute()

这将获取您拥有的前 10 个文档。