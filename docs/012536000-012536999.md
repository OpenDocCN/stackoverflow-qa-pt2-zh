# StackOverflow 问答 12536000-12536999

# jquery - jQuery - 切换属性的值？

> ID：12536020
> 
> 赞同：3
> 
> 时间：2012-09-21T18:18:50.637
> 
> 标签：jquery

所以我在 jQuery 和 PHP 中创建了一个成本计算器。我使用以下代码段来切换按钮，因此用户将看到检查的内容。

```
$("[data-button='5']").click(function(){
        $("[data-button='5'] .status").attr("src" , "hintalaskurikuvat/greenstatus.png");
        $("[data-button='5']").toggleClass("selected");

        }); 
```

但是，它不会切换图像，我知道。`hintalaskurikuvat/greenstatus.png`有没有一种简单的方法可以在 src和`hintalaskurikuvat/redstatus.png`src之间切换 `[data-button='5']`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:57:43.017

以下是我将它作为 JQuery 的扩展提供的操作（只需将其添加到您的 *.js 文件中）：

```
(function($) {

$.fn.toggleAttr = function(attribute, value) {
/// <summary>
///     Toggles on/off provided attribute for any tag/element 
/// </summary>
/// <param name="attribute" type="object">
///    Name of attribute to add or remove, eg: checked=""
/// </param> 
/// <param name="value" type="object">
///    Value of the attribute to add or remove, eg: ="checked"
/// </param> 
    if($(this).attr(attribute)){
        $(this).removeAttr(attribute,value);
    }
    else{
        $(this).attr(attribute,value);
    } 
};
})(jQuery); 
```

和简单的使用方法：

```
$('.someclass').toggleAttr('checked', 'checked'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:23:22.210

你可以这样做：

```
var sel = $("[data-button='5']");
sel.find('.status').attr("src", sel.hasClass('selected') ? "greenstatus.png" : "redstatus.png"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:23:18.610

也许这对你有用

```
var image;
if ($("[data-button='5']").hasClass("selected"))
    image = "hintalaskurikuvat/greenstatus.png";   
else
    image = "hintalaskurikuvat/redstatus.png";

$("[data-button='5'] .status").attr("src" , image); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:21:50.933

尝试在你的点击函数中添加这个：

```
$("[data-button='5']").attr("src", ($("[data-button='5']").attr("src")=="hintalaskurikuvat/greenstatus.png") ? "hintalaskurikuvat/redstatus.png":"hintalaskurikuvat/greenstatus.png" ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T18:23:06.937

```
$("[data-button='5']").click(function(){
    var $img = $(".status", this);
    var cur = $img.attr("src");
    var fst = 'hintalaskurikuvat/greenstatus.png';
    var scd = 'hintalaskurikuvat/redstatus.png';
    $img.attr('src', cur == fst ? scd : fst);
    $(this).toggleClass("selected");
}); 
```

# php - PHP 代理对象

> ID：12536021
> 
> 赞同：2
> 
> 时间：2012-09-21T18:18:53.507
> 
> 标签：php, oop, object, proxy

我是否正确地说代理对象就像另一个对象/实体的别名？如何使用代理对象？谁能举个基本的例子？

非常感谢任何答复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T19:00:34.290

来自[GOF - 设计模式](http://en.wikipedia.org/wiki/Design_Patterns)书：

> 代理对象为另一个对象提供代理或占位符以控制对其的访问。

因此类 A(proxy) 可以扩展 B(RealObject) 类或实现其接口。通常代理在调用者和真实对象之间做一些中间步骤，而调用者不知道他们面对的是代理。

代理概念产生了许多更具体的模式：装饰器（添加更多功能），远程代理（隐藏对象之间的通信），保护代理（控制对象之间的通信），延迟实例化（仅在增长对象时才延迟加载）需要）等。所有这些模式都不会为真实对象添加额外的方法，而是为现有方法添加一些功能。

我建议你阅读[Practical php patterns book 中的 Giorgio Sironi 示例](http://www.giorgiosironi.com/2010/02/practical-php-patterns-proxy.html)。

举一个真实的例子 [，Doctrine 使用代理来延迟加载相关对象](https://stackoverflow.com/questions/4923817/can-you-explain-me-what-is-a-proxy-in-doctrine-2)。

# php - 机器字节顺序是否影响解包功能？

> ID：12536031
> 
> 赞同：0
> 
> 时间：2012-09-21T18:19:15.337
> 
> 标签：php, unpack

机器字节顺序是否会影响 php 中的解包功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:23:55.107

机器字节顺序影响解包功能。

[http://php.net/manual/en/function.unpack.php](http://php.net/manual/en/function.unpack.php)

# asp.net-mvc - MVC2 控制器在提交时未从视图接收所有数据

> ID：12536033
> 
> 赞同：0
> 
> 时间：2012-09-21T18:19:15.920
> 
> 标签：asp.net-mvc, asp.net-mvc-2, controller, viewmodel, asp.net-mvc-viewmodel

我有一个应用程序调用 Web 服务以根据用户输入的条件显示导入记录。

每个“导入”可以有 0 到多个 PurchaseOrder、0 到多个 Containers、0 到多个 Products、0 到多个 Invoices。

视图（显示查询）工作正常，当我单击提交按钮时，控制器没有通过视图模型获取“导入”信息。我可以通过“formCollection”访问这些控件。

我错过了什么？？？？

这是我的代码...

模型...

```
namespace LemansCorpIntranet.Models
{    
    public class ImportWebViewModel
    {
        public string button { get; set; }
        public string status_filter { get; set; }
        public string import_id_filter { get; set; }
        public DateTime date_filter { get; set; }
        public string vendor_filter { get; set; }
        public string port_filter { get; set; }
        public string whse_filter { get; set; }
        public Boolean not_released_filter { get; set; }
        public int release_gap { get; set; }
        public List<import_row> import_rows;   /// this is the piece that is not coming
                                               // thru on the POST
    }

    public class import_row
    {
        public string update_switch { get; set; }
        public string id { get; set; }
        public IEnumerable<SelectListItem> ship_via { get; set; }
        public string broker_number { get; set; }
        public string voyage { get; set; }
        public string vessel { get; set; }
        public decimal shipment_value { get; set; }
        public int cartons { get; set; }
        public decimal weight { get; set; }
        public decimal volume { get; set; }
        public string clearance_port { get; set; }
        public string warehouses_in_shipment { get; set; }
        public string payment_type { get; set; }
        public string insurance { get; set; }
        public DateTime ship_date { get; set; }
        public DateTime close_date { get; set; }
        public DateTime customs_date { get; set; }
        public string customs_entry { get; set; }
        public DateTime pl_2_whse_date { get; set; }
        public DateTime estimated_arrival_date { get; set; }
        public DateTime wire_transfer_request_done_date { get; set; }
        public DateTime approved_broker_bill_date { get; set; }
        public DateTime product_released_date { get; set; }
        public List<Invoice> Invoices;
        public List<PurchaseOrder> PurchasOrders;
        public List<Product> Products;
        public List<Container> Containers;
    }

    public class Invoice
    {
        public string invoice_number { get; set; }
    }

    public class PurchaseOrder
    {
        public string id { get; set; }
        public string whse { get; set; }
        public string vendor_code { get; set; }
        public string vendor_name { get; set; }
    }

    public class Product
    {
        public int line_number { get; set; }
        public string description { get; set; }
    }

    public class Container
    {
        public int line_number { get; set; }
        public int size { get; set; }
        public string id { get; set; }
        public string seal { get; set; }
        public DateTime received_date { get; set; }
        public int cartons { get; set; }
    }  
} 
```

这是我的看法（部分）

```
<% using (Html.BeginForm("ImportLog", "ImportWeb")) %>
    <%  { %>
            <table style="position:fixed">
.
.
.
<% if (Model.import_rows != null) %>
<% { %>
<%   var row_number = 0; %>
     <table id="import_web_detail">
<%   foreach (var row in Model.import_rows) %>
<%   { %>
<%     if (row.id != "          ")%>
<%     { %>
<%       row_number++; %>
         <tr style="vertical-align:top">
           <td style="width:.5em" />
           <td align="center">
             <table>
               <tr>
                 <td colspan="4"></td>
                 <td><%=Html.CheckBox("update_switch", row.update_switch)%></td>
                 <td colspan="4"></td>
               </tr>
             </table>
           </td>
           <td />
           <td>
             <table>
               <tr>
                 <td><%=Html.TextBox("import_id", row.id)%></td>
               </tr>
             </table>
           </td> 
```

这是我的控制器...

```
namespace LemansCorpIntranet.Controllers
{
    public class ImportWebController : Controller
    {
        eptest_importweb_svc.Service importweb_svc = new eptest_importweb_svc.Service();

        //
        // Import Web Request

        public ActionResult ImportLog(ImportWebViewModel import_request)
        {// import_request.import_rows is null. should be loaded with view detail
            switch (import_request.button)
            {
                case "Next":
                case "Previous":
                    return RedirectToAction("ImportPage", import_request);
                case "Update":
                    return RedirectToAction("ImportUpdate");
                case "Importlog":
                    return RedirectToAction("ImportReport");
                default:
                    break;
            }
            // ----------------------------------
            // fall thru for initial page display
            // ----------------------------------

            //     load "date filter" with default. 300 days in the past.
            //     ------------------------------------------------------
            import_request.date_filter = new DateTime(DateTime.Now.Year - 1,  
                                  DateTime.Now.Month, DateTime.Now.Day).AddDays(65);

            return View("ImportLog", import_request);
        } 
```

我还没有发布视图/控制器的完整性......

它可以渲染视图....

当我提交视图/表单时，控制器只能访问视图模型主要部分中的项目（“列表”中没有任何内容）。

我可以通过“formcollection”访问这些其他控件。

我想知道为什么视图模型中有空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:43:38.170

您的问题是您没有以 MVC 模型绑定器可以理解它们是嵌套类的一部分的方式命名您的字段。对于每一行，您只需拥有一个具有相同名称的字段。那是行不通的。

这是您不应该使用辅助类的非类型安全版本的原因之一，因为类型安全版本会自动生成正确的名称。您还应该利用 EditorTemplates，因为它们为集合做正确的事情，并自动迭代集合。

阅读[http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)

如果您必须按照您的方式进行操作，那么您需要在名称中包含数组语法。使用 for 语句而不是 foreach，并使用计数器来计算行号。做这样的事情：

```
<% for(int row = 0; row < Model.import_rows.Count; row++) { %>
    ....

    <td><%=Html.CheckBoxFor(x => Model.import_rows[row].update_switch)%></td>

    ....
<% } %> 
```

在此处阅读更多信息：http: [//haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:57:27.020

我认为您缺少的是一些`@HiddenFor`您在模型中没有得到的值的子句。如果我理解正确，你会得到其中的一些，但不是全部。所以那些你没有得到的，`@HiddenFor`为他们定义，看看会发生什么。

**更新**

这就是堆栈溢出关于嵌套视图模型的说法：

[asp.net MVC 中的嵌套 ViewModel 类](https://stackoverflow.com/questions/9372540/nested-viewmodel-classes-in-asp-net-mvc)

**更新 2**

看看这里，似乎与您的问题非常相似：

[ASP.net MVC2。填充模型未返回控制器](https://stackoverflow.com/questions/4035515/asp-net-mvc2-populated-model-is-not-getting-back-to-the-controller)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:43:35.537

我试图在 RedirectToAction 中传递视图模型..

发现这行不通。

感谢大家的帮助。

# android - win7上eclipse和android的问题

> ID：12536034
> 
> 赞同：1
> 
> 时间：2012-09-21T18:19:18.827
> 
> 标签：android, eclipse, ubuntu, windows-7

我已经搜索了整个stackoverflow，但找不到适合我的答案。这是场景。我在 Win7 计算机上安装了 Eclipse Juno。Eclipse 从我拥有的 SD 卡启动。此 SD 卡还包含 Android SDK 和我的所有项目的工作区。

我有一个特定的项目，它是一个 Android 应用程序。我可以将手机连接到我的 Win7 计算机，并通过 Eclipse 中的“运行”按钮在手机上运行该应用程序。一切正常。调试，它做出改变，仍然一切都很好。

现在我尝试签署包裹并准备好在市场上发布......我去出口，做一切必要的事情来签署它并点击完成按钮（或确定或其他任何名称）以完成出口过程。成品应该是 .apk 文件。相反，我得到的是一个 Java IO 异常，它说它找不到某些文件。文件名有一堆数字，扩展名类似于

```
 ._pk or .ap_, 
```

类似的东西。

如果我采用相同的项目，请将其导入我在 Ubuntu 机器上的工作区，同时运行 Eclipse Juno。执行相同的过程来签署我的包裹，一切正常。

是什么赋予了？

我已经阅读了其他文章，告诉您以管理员模式运行 Eclipse，以管理员模式运行 Android SDK，不要将 sdk 安装到 Program Files 目录或其他需要管理员权限的目录...

这些都不适用于我。另外，我需要提一下，除了 Win7 之外的所有内容都是全新的副本。Eclipse直接从官网下载，新下载的Android SDK副本下载安装，所有android类都是通过SDK和eclipse插件新下载的。

我能想到的 Linux 上的 Eclipse 和 Win7 上的唯一区别是它在 Linux 机器上是 Eclipse Classic，而在 Win 7 机器上它是带有 Java EE 的 Eclipse。谁能告诉我为什么会发生这种情况，因为我大部分时间都花在 Win7 机器上，并且不想继续切换到我的 Ubuntu 机器只是为了签署一个 Android 包......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:58:01.903

经过一番反复后，答案原来是删除用户目录中的 .eclipse 和 .android 文件夹。

# xml - 如何让 Axis2/Axiom 逃避回车？

> ID：12536036
> 
> 赞同：0
> 
> 时间：2012-09-21T18:19:55.173
> 
> 标签：xml, escaping, axis2

使用 Axis2/Axiom 创建 SOAP 消息时，我需要在 body 元素中保留回车。如果我将 CR 转义到`&#xD;`（这是应该做的）Axis2/Axiom 将“&”转义到`&amp;`. 如果我什么都不做，Axis2/Axiom 会将 CR 转换为 LF。

如何让 Axis2/Axiom 正确转义 CR？

如果这是不可能的，我如何让 Axis2/Axiom 忽略已经转义的序列，或者更简单地说，不理会特定的“&”？

我希望能够让 Axis2/Axiom 正确地转义 CR 以`&#xD;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:18:48.087

保留回车（通过用字符引用替换它们）实际上应该是 Axiom 中的默认设置：

[http://ws.apache.org/axiom/userguide/ch04.html#factory.properties](http://ws.apache.org/axiom/userguide/ch04.html#factory.properties)

也许您没有使用 Woodstox 作为 StAX 实现，或者版本 3（这是 Axiom 在编写文档时使用的版本）和 Woodstox 4（这是当前 Axiom 版本使用的版本）之间发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:22:10.403

您提供给 Axis2 的字符串不应该被转义。Axis2（或 XML 层）为您处理。XML 应该规范化文本数据中的行尾字符；请参阅[XML 回车编码](https://stackoverflow.com/questions/2265966/xml-carriage-return-encoding)。

真正的问题可能是您使用的是用于文本数据的数据类型，而您确实想通过它传递二进制数据。您能否将 WSDL 的相关元素重新定义为 base64binary 或其他二进制保留类型？

# python - Python CSV 编码

> ID：12536038
> 
> 赞同：3
> 
> 时间：2012-09-21T18:20:01.007
> 
> 标签：python, unicode, encoding

我正在编写一个小脚本，允许我将 Facebook 联系人的电子邮件地址导入 GMail/Android。我的输入文件包含 unicode 字符，例如：Jasmin L\u00f3pez。生成的 CSV 输出文件如下所示：

> Andr\u00e9 Zzz,,,,,,,,,,,,,,,,,,,,,,,,,,fbcontacts ::: * 我的联系人,* 主页,zzz@yahoo.com
> Andr\u00e9ia Ggg ,,,,,,,,,,,,,,,,,,,,,,,,,,fbcontacts ::: * 我的联系人,* 主页,ggg@hotmail.com
> Andr\u00e9s Bbb,,,, ,,,,,,,,,,,,,,,,,,,,,,fbcontacts ::: * 我的联系人,* 主页,bbb@gmail.com

如您所见，我的编码有问题。我正在创建一个 Google 联系人 CSV 文件，但我需要正确显示姓名。我正在使用这个函数来编写 CSV：

```
def writecsv(self):
    if self.outfile is not '':
        #fh = open(self.outfile, 'wb')
        #fh = codecs.open(self.outfile, "wb", "utf-8")
        fh = codecs.open(self.outfile, 'wb', encoding="latin-1")
    else:
        fh = sys.stdout

    csvhdlr = csv.writer(fh, quotechar='"', quoting=csv.QUOTE_MINIMAL)
    csvhdlr.writerow("Name,Given Name,Additional Name,Family Name,Yomi Name,Given Name Yomi,Additional Name Yomi,Family Name Yomi,Name Prefix,Name Suffix,Initials,Nickname,Short Name,Maiden Name,Birthday,Gender,Location,Billing Information,Directory Server,Mileage,Occupation,Hobby,Sensitivity,Priority,Subject,Notes,Group Membership,E-mail 1 - Type,E-mail 1 - Value".split(','))        
    for contact in self.clist:
        #csvhdlr.writerow(dict((vname, vtype, vnotes, vstereotype, vauthor, valias, vgenfile.encode('utf-8')) for vname, vtype, vnotes, vstereotype, vauthor, valias, vgenfile in row.iteritems()))
        row = contact.fullname + ',,,,,,,,,,,,,,,,,,,,,,,,,,fbcontacts ::: * My Contacts,* Home,' + contact.email
        csvhdlr.writerow(row.split(',')) 
```

请问有什么想法吗？我对python很陌生，每次我必须使用编码时，它都不能像我想的那样工作=(

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:25:40.277

如果我理解正确，您的文件不包含高 unicode 字符；它只包含 unicode 转义序列，例如表示高 unicode 字符的“\u00f3”。如果您的文件实际上包含字符串“Jasmin L\u00f3pez”（带有文字反斜杠和 u），那么您需要在写入之前将其解码为实际的 unicode 字符。看一下`unicode_escape`编解码器。

```
>>> x = b"\u00f3"
>>> print x
\u00f3
>>> print x.decode('unicode_escape')
ó 
```

# ember.js - 如何修改 Emberjs 控制器中的对象，以便更新视图？

> ID：12536039
> 
> 赞同：0
> 
> 时间：2012-09-21T18:19:59.977
> 
> 标签：ember.js

在我的路由器中，我这样做：

```
connectOutlets: function(router) {
    router.get('applicationController').connectOutlet(
       'acquisitions', router.get('acquisitionsController').find());
} 
```

`AcquisitionsController`看起来像这样：

```
(function(app) {
  'use strict'

  var AcquisitionsController = Ember.Controller.extend({
    all: [],

    find: function() {
      var self = this,
          pk = $('#object-pk').attr('data-value');

      var imageResource = App.Image.create({id: pk});
      imageResource.fetch().done(function(data) {
        _.each(data.acquisition_pks, function(value, index) {
          var acquisitionResource = App.Acquisition.create({id: value});
          acquisitionResource.fetch().done(function(data) {
            self.all.addObject(data);
          });
        });
      });

      return self.all;
    },

    remove: function(acquisition) {
      var self = this;
      var acquisitionResource = App.Acquisition.create(acquisition);
      acquisitionResource.destroy().done(function() {
        self.all.removeObject(acquisition);
      });
    },

    addDuration: function(acquisition) {
      var self = this;
      if(acquisition.duration === null) {
        acquisition.duration = 1;
        var acquisitionResource = App.Acquisition.create(acquisition);
        var obj = self.all.findProperty('id', acquisitionResource.data.id);
        if (obj !== undefined)
          obj.duration = 1;
        acquisitionResource.save();
      }
    }
  });

  app.AcquisitionsController = AcquisitionsController;
  app.acquisitionsController = AcquisitionsController.create();
})(window.App); 
```

和函数工作得很好，我的观点得到了更新`find()`。`remove()`

但是，当我从模板调用时`addDuration`，`{{action}}`虽然函数执行并保存了对象，但视图没有更新。

我认为该视图以某种方式*观察*了`all`我的控制器的属性，因为我设置的是`content`我的插座，并且看起来当我添加和删除项目时正在观察它，但当其中的项目发生变化时却没有。

我该如何解决这个问题？

# 编辑

这里有一些关于`addDuration`应该做什么的解释。

我正在使用[ember-resource](https://github.com/staugaard/ember-resource)，所以`model`我没有 a ，而是 a `resource`，如下所示：

```
var Acquisition = Ember.Resource.define({
  url: '/images/api/acquisition',
  schema: {
    id: String,
    date: Date,
    number: Number,
    duration: Number
  }
}); 
```

这允许与我的 CRUD API 无缝集成`fetch()`，`save()`使用`ember-resource`.

最初，`duration`属性是`null`，在我的模板中，我这样做：

```
{{#if acquisition.duration}}
  <tr>
    <th>{% trans "Duration" %}</th>
    <td>{{view Ember.TextField valueBinding="acquisition.duration"}}</td>
  </tr>
{{/if}} 
```

然后我有一个按钮来添加`duration`属性，如下所示：

```
{{#unless acquisition.duration}}
  <li><a href="#" {{action addDuration acquisition}}>{% trans "Add duration" %}</a></li>
{{/unless}} 
```

因为我正在检查`null`, 在上面的`{{#if acquisition.duration}}`块中，最初，`duration` `TextField`不会出现。所以我希望用户点击`Add duration`按钮，这将产生创建一个`TextField`.

理想情况下，该字段将为空，但现在我对初始值感到满意`1`，只是因为我认为这会更容易。所以在我的 中`action`，我正在尝试更新当前`acquisition`对象，以便将`duration`属性设置为`1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:16:28.840

我对你的`addDuration`功能有点困惑。但看起来你需要调用`obj.set('duration', 1);`而不是 obj.duration = 1。

# java - 为什么javascript函数评估onload

> ID：12536040
> 
> 赞同：0
> 
> 时间：2012-09-21T18:20:02.070
> 
> 标签：java, javascript, html, jsp

**问题：任何想法如何`confirmOption`在页面加载时不触发该功能，并且*仅*在单击按钮时触发它？**

所以在我的html正文中，我有：

```
<Body>
<a href="#" id="btn_YES" onclick="<%="send('YES','" + rm.getAction ("YES") + "'); return (false);"%>" class="actionBtn"><span><span>Yes</span></span></a>&#160;
            <a href="#" id="btn_NO" onclick="<%="send('NO','" + rm.getAction ("NO") + "'); return (false);"%>" class="actionBtn"><span><span>No</span></span></a>&#160;
</Body> 
```

一直运行良好的 Javascript 函数：

```
function send(button, url) {
    if (opener.document && opener.document.forms[0] && (opener.document.forms[0].elements['sessionToken'] || opener.document.forms[0].elements['screenID']))
         {
                                opener.answer(button, url);
                                window.close();
                            } else { 
                                return false;
                            }
                        } 
```

`getAction`并`confirmOption(String option)`在java中声明。如果`confirmOption`被评估，它将在控制台中输出`YES`或`NO`

```
function setConfirm(userSelection){
        if(userSelection="YES") result = "<%=mb.confirmOption("YES")%>"; 
        if(userSelection="NO") result = "<%=mb.confirmOption("NO")%>";
} 
```

当我加载页面时，为什么它会在我的控制台中打印：

```
YES
NO 
```

，甚至在我点击按钮之前？我在 java 上的断点被触发，所以我可以看到该方法正在页面加载时被评估 - 当它不应该因为它应该在单击按钮时被触发。

当我点击按钮时，我的断点没有被触发，我被发送到相关页面。

任何想法如何`confirmOption`在页面加载时不触发该功能，并且*仅*在单击按钮时触发它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:23:00.230

他们不会在加载时进行评估。一旦浏览器在加载过程中找到它们，它们就会被评估，尽管您可以推迟评估，并且在上面您实际上可以调用函数删除引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:59:47.353

confirmOption 函数是你的服务器端函数，它必须在你的浏览器端代码之前执行并转换为一个值，所以，也许你可以使用 ajax post 到 servlet 来触发它，而不是这样使用它。

# javascript - 访问具有相同名称的 javascript 对象

> ID：12536041
> 
> 赞同：-1
> 
> 时间：2012-09-21T18:20:05.327
> 
> 标签：javascript, asp.net

我有一个组用户控件，并且在控件中定义了 javascript。在一个页面中，我有两个这样的控件，它们独立工作。呈现的 javascript 类似于以下内容：

```
//control 1
var Groups = (function () {
var obj = {};
obj.selectedid = 2;
return obj;
}());

//control 2
var Groups = (function () {
var obj = {};
obj.selectedid = 2; //it is different here, to keep it simple i just hardcoded as '2'
return obj;
}()); 
```

谁能告诉我如何访问页面上的第一组变量（控件）。我认为像 Groups[0] 这样的东西会给我结果，但事实并非如此。

* * *

感谢您的回复。非常感激。我正在添加更多信息以明确。用户控件包含双列表框，用户可以从 list1 到 list2 添加/删除值。因此，我将所有这些逻辑封装如下。

```
 var Groups = (function () {
    var obj = {};
    obj.selectedid = 2;

    //some local functions for internal operations such as
    function moveGroups(source, target){        
    }

     //there are public functions to initialize this control or to add groups as below 
    // Groups can be added from external page by calling  Groups.AddGroups(data);
    obj.AddGroups = function(data) {
           //refers to local variables and functions and adds data to listboxes
      };

    return obj;
    }()); 
```

问题是我在页面上有两个这样的组控件。Group1 包含自己的对偶列表，Group2 也是如此。现在，我需要从页面访问两个对象的 AddGroups 函数，例如 Groups1.AddGroups(data) 或 Groups2.AddGroups(data) 独立工作。

* * *

我已经解决了以下解决方案。

```
var Groups = Groups || []; //Check object already exists
Groups.push( 
//kept all the existing code here...
(function () {
    var obj = {};
    obj.selectedid = 2;

    //some local functions for internal operations such as
    function moveGroups(source, target){        
    }

     //there are public functions to initialize this control or to add groups as below 
    // Groups can be added from external page by calling  Groups.AddGroups(data);
    obj.AddGroups = function(data) {
           //refers to local variables and functions and adds data to listboxes
      };

    return obj;
    }())

); 
```

现在在我的页面中，我指的是使用：

```
Groups[0].AddAvailGroups();
Groups[1].AddAvailGroups(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:25:03.510

通过

```
Groups.selectedid 
```

但是，如果它在相同的代码中，将不起作用，因为您为相同的变量分配了不同的值。你需要分开：

```
var Groups1 = ...
var Groups2 = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:25:27.010

您应该在控件中为应该引用组的 js 变量生成 GUID（这可以是控件的 id 加上一些前缀）。并用它们创建全局数组。在这种情况下，您可以随时访问您的群组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:23:13.237

如果这两个片段都声明了一个全局 ( *EVIL* ) 变量`Groups`，那么一旦调用第二个匿名函数，第一个对象就会永远丢失。就这么简单，恐怕。如果它们不是全局变量，并且是不同范围的一部分，那么访问属性很简单：

```
Groups.selectedid;//will be either 1 or 2 depending on the scope. 
```

groups 的值是对`obj`对象的引用，匿名函数被声明并立即调用（闭包），并返回一个对象，`selectedid`作为属性。因此`Group`具有该属性。`Groups[0]`如果您的代码类似于以下内容，则可以使用：

```
var Groups = (function()//assign return value
{
    return [2];//return this value
})();//call the function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:23:27.263

您需要提供两个不同的名称：

```
var Groups1 = ...

var Groups2 = ... 
```

之后您可以访问`Groups1.selectedid`

但我不清楚这些对象和变量的目的是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T18:28:41.467

两个`var Groups`声明定义了相同的内存位置。

所以你的第二个陈述

```
//control 2
var Groups = (function () { 
```

将覆盖先前存储在 Groups 变量中的值。

如果您想将 Groups 作为一个集合访问，您应该明确地执行此操作：

```
var Groups = []; // array/list;

Groups.push( ... ); // control 1
Groups.push( ... ); // control 2 
```

# xbmc - 远程访问 XBMC Home.xml

> ID：12536049
> 
> 赞同：0
> 
> 时间：2012-09-21T18:20:24.563
> 
> 标签：xbmc

XBMC 是否可以在外部调用其 Home.xml？即不是来自其720p 目录？

或者哪个文件负责保存所有路径？

我问这个是因为我有多个使用 XBMC 的基于 Fedora 的系统。这个系统离我所在的地方很远，所以我不能在物理上靠近系统。

我想知道是否可以将每个 Home.xml 保留在我的服务器上，以便我可以从我的服务器配置它，这样我就不必去我的系统进行更改。

我想更好的问题是，如何远程更改 Home.xml？我没有对系统的 ssh 访问权限，因为系统在内部网络中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:20:43.863

我自己没有测试它，但我认为您可以通过在 advancedsettings.xml 中使用路径替换来实现您的目标。有关详细信息，请参阅[http://wiki.xbmc.org/index.php?title=Path_substitution](http://wiki.xbmc.org/index.php?title=Path_substitution)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:23:46.680

您的选择如下

1.  使用保管箱。编辑您的副本，然后让所有 Fedora 盒子上的 Dropbox 自动获取更改。
2.  在 fedora 盒子上放置一个 cron 作业，它会从预先指定的位置下载 Home.xml：您控制的网站、ftp 服务器、您的主计算机等。
3.  使用端口转发允许 SSH 连接到您的 Fedora 盒子。

# linux-kernel - SMP 系统上的内核初始化

> ID：12536051
> 
> 赞同：0
> 
> 时间：2012-09-21T18:20:30.737
> 
> 标签：linux-kernel, boot, smp

当我们在 SMP 系统上启动内核时，CPU0 启动内核代码，在 CPUx 处于 WFI 状态时，CPU0 的主内存、缓存和 MMU 被初始化。当从 CPU0 发送 cpu_up(x) 时，每个 CPUx 都被初始化并调用 secondary_startup ，其中再次初始化 CPUx 特定的主存储器、高速缓存和 MMU。

现在我知道不同内核的缓存缓存可能不同，但是我们是否也有不同内核的主存和 MMU？我从来没有听说过。这里到底发生了什么，主存和 MMU 的划分是如何在 CPU 之间发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:52:25.250

在 SMP 系统（或像今天的 x86 CPU 之类的 NUMA 系统）中，所有 CPU 都可以访问所有内存。所以CPU0可以初始化所有的内存。

CPU 特定的初始化仍有空间：

1.  每个 CPU 可以为自己分配一个小的内存池，以进行有效分配。
2.  应在每个 CPU 上设置将硬件引导至分页表的控制寄存器。
3.  可能需要设置或刷新 TLB（硬件的地址转换缓存）。

# xcode - 我可以在没有设备的情况下发布应用程序吗？

> ID：12536056
> 
> 赞同：10
> 
> 时间：2012-09-21T18:20:46.033
> 
> 标签：xcode, ipad, release, device, archive

我已经创建了一个 iPad 应用程序，它已准备好去应用程序商店，但我无法访问 .app 文件。我认为这是因为我必须通过一个真正的 iPad 设备（我没有)?

那么，我可以在没有 iPad 的情况下构建用于存档的应用程序，就像模拟器一样使用吗？

/一个菜鸟

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-21T19:49:44.630

是的，您可以在不连接设备的情况下构建存档。

**第 1 步：** 将活动方案设置为“iOS 设备”
![在此处输入图像描述](../Images/88676785a794f0351e89857b04be52cb.png)

**第 2 步：** 产品 > 存档
![在此处输入图像描述](../Images/ce137215ea2517e5538f78cc90615270.png)

**第 3 步：** 组织者 > 档案
![在此处输入图像描述](../Images/f10018aa468b645efb1d9b9688347a9e.png)

**注意：**截图是在**没有**连接设备的情况下拍摄的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-21T23:34:24.040

> 截至目前，在 Xcode 版本 11.3.1 (11C504) 上，没有像**“IOS 设备”**这样的东西，因为您正在寻找它却找不到它。

> 现在是**“通用 IOS 设备”**

我很确定，但他们是关于这种方法的，它为我生成了一个非常荒谬的存档大小，我说的是 600MB 的文件，可能只是因为我是从跨平台的角度构建的。

享受。

# ruby - 有没有办法使用 ruby 库 net:scp 来限制带宽？

> ID：12536062
> 
> 赞同：1
> 
> 时间：2012-09-21T18:21:46.147
> 
> 标签：ruby

我在任何地方都找不到有关此的任何文档。我也做了很多谷歌搜索。我真的希望有一种方法可以像在 Linux 中使用 scp 一样来限制带宽。

任何帮助将不胜感激。

# multithreading - Perl 的线程系统是如何工作的？

> ID：12536064
> 
> 赞同：8
> 
> 时间：2012-09-21T18:21:50.407
> 
> 标签：multithreading, perl, multicore

[Perl 的文档](http://perldoc.perl.org/threads.html)说： *从 Perl 5.8 开始，线程编程已经可以使用一种称为解释器线程的模型，它为每个线程提供一个新的 Perl 解释器*

使用`ps -Lm <pid>`下面的程序，我可以看到线程并行运行，即它们同时在不同的内核中运行。但即使有 4 个线程（3 个和主线程）也`ps aux`只显示一个 Perl 进程。

1.  **这是否意味着每个线程上都有一个完整的*Perl 解释器？***
2.  ***Perl 线程*是否映射到*系统线程*？**
3.  **如果 2 为真，那么如何在单个进程中拥有多个 Perl 解释器？**

```
use threads;

$thr = threads->new(\&sub1);
$thr2 = threads->new(\&sub1);
$thr3 = threads->new(\&sub1);

sub sub1 { 
      $i = 0;
      while(true){
        $i = int(rand(10)) + $i;
      }
}

$thr->join; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T18:58:03.687

“Perl 解释器”是指 Perl 代码执行的环境。从用户的角度来看，这主要是符号表和其中的全局变量，但它也包括大量内部变量（例如，在解析期间使用的变量、当前操作等）。

1.  是的，每个线程都有一个 Perl 解释器。

2.  是的，Perl 线程是系统线程。

3.  将“Perl 解释器”视为可以创建任意数量实例的类。* Perl 将其称为[Multiplicity](http://www.perlmonks.org/?node_id=850886)。请参阅[perlembed](http://perldoc.perl.org/perlembed.html)了解如何在您的应用程序中嵌入 Perl 解释器。

* * *

* —`-Dusemulitplicity`在构建 Perl 时需要使用 ，这是由 暗示的`-Dusethreads`，这就是将线程支持添加到 Perl 的方式。否则，将使用一大堆全局变量而不是“类”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T20:52:20.400

为了扩大 ikegami 对您的第三个问题的回答，Perl 为每个操作系统线程创建了一个完整的解释器状态的完整副本。这意味着所有数据和代码都被复制。不利的一面是，这会导致创建线程变慢并且 Perl 线程需要大量内存。

从好的方面来说，线程彼此隔离，这使得编写线程安全代码变得更加容易。例如，大多数模块本质上都是线程安全的，而作者无需做任何特别的事情或完全考虑线程。

这是 Perl 的第二个线程实现。第一个是 5.005 个线程，是一种更传统的线程模型，其中线程共享代码和全局变量。它没有很好地工作。更糟糕的是，它使大多数 CPAN 模块变得无用，因为它们不协调的全局变量在各个线程之间相互冲突。

这怎么可能是池上提到并解释的一种叫做“多重性”的东西。这最初是出于在另一个 C 或 C++ 程序中嵌入 Perl 解释器的愿望。它需要改变 Perl 的工作方式，以便它隔离每个解释器对象的所有全局数据（全局变量和编译代码），而不是假设它是进程中运行的唯一 Perl 解释器。从那里开始，一个 Perl 解释器中的多个 Perl 解释器被用于`fork`在 Windows 上进行模拟。最后 5.6 线程建立在广泛的工作之上。

# mysql - 在 MySQL 中更新/重建表的最佳方法

> ID：12536068
> 
> 赞同：0
> 
> 时间：2012-09-21T18:22:00.840
> 
> 标签：mysql, database, web-services

我正在开发一个大型 web 应用程序，它（除其他外）有一个表，该表是从现有的在线数据集构建的。该数据集可能会更改（尽管可能不会经常发生），因此我们的总体计划是每 1-2 个月更新/重建一次。这一切都将通过 Python 和 SQLAlchemy 发生

由于在处理 webapps 和大型数据库方面经验不足，最好的方法是什么？从头开始构建数据库需要 5-6 个小时，老实说，这是可以接受的停机时间（它是一个科学分析服务器）。当然，另一种选择是并行创建第二张表，然后删除原始表并重命名新表，但这是否存在一致性问题？有没有办法“实时更新”一个表，或者这里发生崩溃的风险不值得（即如果你崩溃使表处于相对于真实数据不一致的状态）？

显然，在简单性、安全性和无停机时间之间需要权衡取舍，但我只对我的选择感兴趣（排除那些“未知的未知数”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:29:55.797

这是我的建议：

1.  使用mysqldump备份原表

2.  以不同的名称构建新表

3.  使用 mysqldump 备份新表

4.  关闭您的应用程序

5.  丢弃旧表

6.  将新表重命名为原表名

7.  重新启动您的应用程序

这应该会产生最少的停机时间，只是删除旧表并重命名旧表所需的时间。备份可以为您提供安全保障，以防万一您搞砸了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:12:32.837

这个怎么样

将表 old_table 重命名为 tmp_table，将 new_table 重命名为 old_table；

new_table 之前创建的位置。RENAME 是原子的

# c++ - osX上的c ++未捕获的异常

> ID：12536072
> 
> 赞同：0
> 
> 时间：2012-09-21T18:22:19.170
> 
> 标签：c++, macos, exception-handling

我开发的 C++ 库有一个问题：我定义了自己的异常类（基本上只包含一个要为 what() 调用返回的字符串），当没有捕获到异常时，目标是操作系统会从 what() 打印消息并终止。这在 Linux 上运行良好，但在 osX 上，不显示异常消息（即它直接终止而不打印任何内容）。

那么，我是否正确地假设未捕获的异常会导致 what() 然后终止？我应该在 osX 上做什么才能显示消息？（知道我不喜欢设置异常处理程序的想法，因为这会迫使库的用户这样做）

谢谢！马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:26:26.903

> 那么，我是否正确地假设未捕获的异常会导致 what() 然后终止？

不，标准不要求打印出未捕获的异常`what()`。事实上，它们使得编写一个始终如此的一致实现变得非常困难（但并非不可能）。

确实没有什么好方法可以*准确地*`what()`执行您想做的事情（仅当在这种情况下实现不会执行此操作时才打印出，然后继续进行，就`terminate()`好像从未捕获到异常一样）。但这可能不是你真正想要的。

这可能是你想要的：

```
#import <exception>
#import <iostream>

int real_main(int argc, char *argv[]);

int main(int argc, char *argv[]) {
  try {
    return real_main(argc, argv);
  } catch (std::exception &e) {
    std::cerr << "exception: e.what()" << "\n";
    exit(1);
  } catch (...) {
    std::cerr << "exception not derived from std::exception\n";
    exit(1);
  }
}

int real_main(int argc, char *argv[])
{
    // real main code goes here
} 
```

如果你真的想，说，`_exit`或者`abort`（甚至`terminate`）而不是`exit`ing，你当然可以这样做。但如果你不知道，你可能想要`exit`.

同时：

> …知道我不喜欢设置异常处理程序的想法，因为这会迫使库的用户这样做

你在写一个库？并且您希望您的库能够终止应用程序背后的进程？

这可能是一个非常糟糕的主意。

但是如果你真的想这样做，上面的相同代码也可以工作，你只需要将它包装在你的库的入口点而不是`main`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:10:51.993

在所有操作系统上：捕获异常`main()`并打印出任何适当的消息。如果你没有抓住它，则未指定析构函数是否在出路时运行。你真的想要那个吗？

# javascript - 按参数排序

> ID：12536073
> 
> 赞同：1
> 
> 时间：2012-09-21T18:22:24.373
> 
> 标签：javascript, sorting

这应该是一件超级简单的事情，但我在解决这个问题时遇到了问题。我正在尝试实现一种将所有一种类型的对象移动到列表顶部的排序。例如，一个任务列表，我想对其进行排序，以便特定所有者的所有任务都显示在列表的顶部。这就是我现在所拥有的：

```
 this.sortByOwner = function(owner) {
        return tasks.sort(function(a, b) {

            var nameA = a.ownerUser.displayName.toLowerCase();     
            var nameB = b.ownerUser.displayName.toLowerCase();

            var displayName = owner.displayName.toLowerCase();

             if (nameA == displayName) //sort string descending
                 return -1; 
             else if (nameA == "")
                 return 1;
             return 0; //default return value (no sorting)
        });
    }; 
```

但这并不完全正确。他们似乎确实对任务进行了分组，但不幸的是，用户任务没有出现在顶部。我希望看到的是特定人员拥有的任务将出现在顶部。我在这里做错了什么？

包括一个基本的 JSFiddle 示例：http: [//jsfiddle.net/zJwUn/5/](http://jsfiddle.net/zJwUn/5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:46:49.680

您没有`nameB`处理`displayName`. 这对我有用：

```
function sortByOwner(owner) {
    return tasks.sort(function(a, b){
        var nameA=a.displayName.toLowerCase(), nameB=b.displayName.toLowerCase();
        var displayName = owner.displayName.toLowerCase();
        if (nameA == displayName) //sort string descending
            return -1;
        if (nameA == "")
            return 1;
        if (nameB == displayName) //sort string descending
            return 1;
        if (nameB == "")
            return -1;
        return 0; //default return value (no sorting)
    })
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:48:08.607

您至少遗漏了一张支票，即 nameB 是所有者的情况。

这是您小提琴中的固定版本

```
function sortByOwner(owner) {
    return tasks.sort(function (a, b) {
        var nameA = a.displayName.toLowerCase(),
            nameB = b.displayName.toLowerCase();
        var displayName = owner.displayName.toLowerCase();

        if (nameA === nameB) return 0;

        if (nameA == displayName) //sort string descending
            return -1;
        if (nameB == displayName) 
            return 1;

        // at this point neither A or B are the owner
        if (nameA == "") return 1;
        if (nameB == "") return -1;

        return 0 //default return value (no sorting)
    })
} 
```

# php - 安装 moodle 时出现 Uni 代码错误

> ID：12536077
> 
> 赞同：0
> 
> 时间：2012-09-21T18:22:35.657
> 
> 标签：php, moodle

这是我第一次安装moodle。在服务器检查页面上，它说我要使用此消息安装 uni 代码

**要求您以 Unicode 格式 (UTF-8) 存储所有数据。必须在默认字符集为 Unicode 的数据库中执行新安装。如果您正在升级，您应该执行 UTF-8 迁移过程（请参阅管理页面）。**

我正在使用 xampp。我怎样才能安装unicode？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:51:13.627

你最好下载已经为 Moodle 设置的 XAMP 版本：http: [//download.moodle.org/windows/](http://download.moodle.org/windows/)

但如果你想使用现有的 XAMP，问题在于你的数据库排序规则应该是“utf8_unicode_ci”：[http ://docs.moodle.org/23/en/Windows_installation_using_XAMPP#Create_the_MySQL_database](http://docs.moodle.org/23/en/Windows_installation_using_XAMPP#Create_the_MySQL_database)

# maven - Maven在存储库中复制了jar

> ID：12536078
> 
> 赞同：1
> 
> 时间：2012-09-21T18:22:40.287
> 
> 标签：maven, james

由于我的存储库中有重复的 jar，我收到了重复的类错误。Jars 带有一个开源 Apache 项目的子模块 pom, project is `James`, sub module is `container-spring`。

这是 James 根目录中的 pom.xml：

[http://svn.apache.org/repos/asf/james/server/tags/james-server-3.0-beta4/pom.xml](http://svn.apache.org/repos/asf/james/server/tags/james-server-3.0-beta4/pom.xml)

这是子模块container-spring的pom.xml：

[http://svn.apache.org/repos/asf/james/server/tags/james-server-3.0-beta4/container-spring/pom.xml](http://svn.apache.org/repos/asf/james/server/tags/james-server-3.0-beta4/container-spring/pom.xml)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:49:28.873

为了回答您的问题，我使用以下 pom.xml 配置了一个简单的 maven 项目：

```
<project>
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.stackoverflow.tuxi</groupId>
  <artifactId>duplicatedjar</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <dependencies>
    <dependency>
      <groupId>org.apache.james</groupId>
      <artifactId>james-server</artifactId>
      <version>3.0-beta4</version>
      <type>pom</type>
    </dependency>
    <dependency>
      <groupId>org.apache.james</groupId>
      <artifactId>james-server-container-spring</artifactId>
      <version>3.0-beta4</version>
    </dependency>
  </dependencies>
</project> 
```

然后执行**maven依赖树**命令分析依赖关系：

```
% mvn dependency:tree                                                                                                                                                                                              
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building duplicatedjar 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ duplicatedjar ---
[INFO] com.stackoverflow.tuxi:duplicatedjar:jar:1.0-SNAPSHOT
[INFO] +- org.apache.james:james-server:pom:3.0-beta4:compile
[INFO] \- org.apache.james:james-server-container-spring:jar:3.0-beta4:compile
[INFO]    +- org.apache.james:james-server-lifecycle-spring:jar:3.0-beta4:compile
[INFO]    |  +- org.apache.geronimo.specs:geronimo-annotation_1.1_spec:jar:1.0.1:compile
[INFO]    |  \- org.apache.geronimo.specs:geronimo-jpa_2.0_spec:jar:1.0:compile
[INFO]    +- org.apache.james:james-server-lifecycle-api:jar:3.0-beta4:compile
[INFO]    +- org.apache.james:james-server-filesystem-api:jar:3.0-beta4:compile
[INFO]    |  +- org.apache.james:apache-jsieve-manager-api:jar:0.5:compile
[INFO]    |  \- commons-io:commons-io:jar:2.0.1:compile
[INFO]    +- org.apache.james:james-server-mailetcontainer-api:jar:3.0-beta4:compile
[INFO]    +- org.apache.james:james-server-protocols-library:jar:3.0-beta4:compile
[INFO]    |  +- org.apache.james:james-server-util:jar:3.0-beta4:compile
[INFO]    |  +- org.apache.james.protocols:protocols-netty:jar:1.6.2:compile
[INFO]    |  \- io.netty:netty:jar:3.3.1.Final:compile
[INFO]    +- org.apache.james:james-server-data-api:jar:3.0-beta4:compile
[INFO]    +- org.apache.james:james-server-core:jar:3.0-beta4:compile
[INFO]    |  \- org.apache.james:apache-mailet-base:jar:1.1:compile
[INFO]    +- org.apache.james:apache-james-mailbox-api:jar:0.4:compile
[INFO]    +- org.apache.james:apache-james-mailbox-tool:jar:0.4:compile
[INFO]    |  +- org.apache.james:apache-james-mailbox-store:jar:0.4:compile
[INFO]    |  |  +- org.apache.james:apache-mime4j-core:jar:0.7.2:compile
[INFO]    |  |  \- org.apache.james:apache-mime4j-dom:jar:0.7.2:compile
[INFO]    |  +- org.apache.james:apache-james-mailbox-memory:jar:0.4:compile
[INFO]    |  +- org.apache.geronimo.specs:geronimo-annotation_1.0_spec:jar:1.1.1:compile
[INFO]    |  \- org.apache.openjpa:openjpa:jar:2.1.0:compile
[INFO]    |     +- net.sourceforge.serp:serp:jar:1.13.1:compile
[INFO]    |     |  \- junit:junit:jar:3.8.1:compile
[INFO]    |     +- org.apache.geronimo.specs:geronimo-jms_1.1_spec:jar:1.1.1:compile
[INFO]    |     +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile
[INFO]    |     \- commons-pool:commons-pool:jar:1.5.4:compile
[INFO]    +- org.apache.james.protocols:protocols-api:jar:1.6.2:compile
[INFO]    +- org.apache.james:apache-mailet:jar:2.4:compile
[INFO]    +- org.springframework:spring-core:jar:3.1.0.RELEASE:compile
[INFO]    |  +- org.springframework:spring-asm:jar:3.1.0.RELEASE:compile
[INFO]    |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO]    +- org.springframework:spring-beans:jar:3.1.0.RELEASE:compile
[INFO]    +- org.springframework:spring-context:jar:3.1.0.RELEASE:compile
[INFO]    |  +- org.springframework:spring-aop:jar:3.1.0.RELEASE:compile
[INFO]    |  \- org.springframework:spring-expression:jar:3.1.0.RELEASE:compile
[INFO]    +- org.springframework:spring-web:jar:3.1.0.RELEASE:compile
[INFO]    |  \- aopalliance:aopalliance:jar:1.0:compile
[INFO]    +- org.springframework.osgi:spring-osgi-extender:jar:1.2.1:compile
[INFO]    |  +- org.springframework.osgi:spring-osgi-core:jar:1.2.1:compile
[INFO]    |  |  +- org.springframework:org.springframework.aop:jar:2.5.6.SEC01:compile
[INFO]    |  |  |  \- org.aopalliance:com.springsource.org.aopalliance:jar:1.0.0:compile
[INFO]    |  |  +- org.springframework:org.springframework.beans:jar:2.5.6.SEC01:compile
[INFO]    |  |  +- org.springframework:org.springframework.context:jar:2.5.6.SEC01:compile
[INFO]    |  |  \- org.springframework:org.springframework.core:jar:2.5.6.SEC01:compile
[INFO]    |  \- org.springframework.osgi:spring-osgi-io:jar:1.2.1:compile
[INFO]    +- org.osgi:org.osgi.core:jar:4.2.0:compile
[INFO]    +- commons-configuration:commons-configuration:jar:1.6:compile
[INFO]    |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO]    |  \- commons-lang:commons-lang:jar:2.4:compile
[INFO]    +- org.slf4j:slf4j-api:jar:1.6.1:compile
[INFO]    +- javax.mail:mail:jar:1.4.4:compile
[INFO]    \- log4j:log4j:jar:1.2.16:compile
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.140s
[INFO] Finished at: Sun Sep 30 12:30:30 BRT 2012
[INFO] Final Memory: 12M/169M
[INFO] ------------------------------------------------------------------------ 
```

我不知道您项目中的哪些 jar 与上面的 jar 冲突，但我注意到 spring 依赖项取决于**apache commons 套件**（commons-xxx deps）。很多项目都使用它们（IMO 的很多东西都应该包含在 JDK 本身中，但那是另一个线程）但是一些公共库有一些问题：

*   向后兼容性问题
*   groupid 和 artifactid 多年来一直在变化，因此您最终可以得到具有不同名称的相同 jar（commons-xxx 和 org.apache.commons.xxx）

实际上，与 apache commons 套件有冲突的依赖关系是很正常的，所以我在这里猜测这是你的实际问题。

通常，解决方案是直接在依赖项中声明项目中需要的 apache 公共库，并在依赖项部分中排除冲突的库，就像@Vikdor 说的那样

您最终会得到类似这样的结果（重要的是**只删除冲突的**，而不是像下面的示例中那样全部删除，否则您的软件将无法正常工作）：

```
<project>
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.stackoverflow.tuxi</groupId>
  <artifactId>duplicatedjar</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <dependencies>
    <dependency>
      <groupId>org.apache.james</groupId>
      <artifactId>james-server</artifactId>
      <version>3.0-beta4</version>
      <type>pom</type>
    </dependency>
    <dependency>
      <groupId>org.apache.james</groupId>
      <artifactId>james-server-container-spring</artifactId>
      <version>3.0-beta4</version>
      <!-- DO NOT exclude all of them, only the conflicting ones -->
      <exclusions>
        <exclusion>
          <groupId>commons-io</groupId>
          <artifactId>commons-io</artifactId>
        </exclusion>
        <exclusion>
          <groupId>commons-pool</groupId>
          <artifactId>commons-pool</artifactId>
        </exclusion>
        <exclusion>
          <groupId>commons-logging</groupId>
          <artifactId>commons-logging</artifactId>
        </exclusion>
        <exclusion>
          <groupId>commons-collections</groupId>
          <artifactId>commons-collections</artifactId>
        </exclusion>
        <exclusion>
          <groupId>commons-lang</groupId>
          <artifactId>commons-lang</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T18:36:34.097

您应该在主 jar 的依赖项声明中指定与要排除的子项目对应的 jar。

有关如何定义依赖项排除的更多详细信息，请参阅[maven 文档。](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)

# ruby - Ruby：按字节长度限制 UTF-8 字符串

> ID：12536080
> 
> 赞同：15
> 
> 时间：2012-09-21T18:22:43.023
> 
> 标签：ruby, string, utf-8, byte, rabbitmq

[这个 RabbitMQ 页面](http://www.rabbitmq.com/tutorials/amqp-concepts.html)状态：

> 队列名称最多可以是 255 个字节的 UTF-8 字符。

在 ruby​​ (1.9.3) 中，如何在不中断字符中间的情况下按字节数截断 UTF-8 字符串？结果字符串应该是符合字节限制的最长的有效 UTF-8 字符串。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-09-22T12:37:56.923

对于 Rails >= 3.0，您有 ActiveSupport::Multibyte::Chars 限制方法。

来自 API 文档：

```
- (Object) limit(limit) 
```

将字符串的字节大小限制为不中断字符的字节数。当字符串的存储由于某种原因受到限制时可用。

例子：

```
'こんにちは'.mb_chars.limit(7).to_s # => "こん" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-21T18:50:53.707

`bytesize`将为您提供以字节为单位的字符串长度，而（只要字符串的编码设置正确）诸如 slice 之类的操作不会破坏字符串。

一个简单的过程就是遍历字符串

```
s.each_char.each_with_object('') do|char, result| 
  if result.bytesize + char.bytesize > 255
    break result
  else
    result << char
  end
end 
```

如果你很狡猾，你会直接复制前 63 个字符，因为任何 unicode 字符在 utf-8 中最多为 4 个字节。

请注意，这仍然不完美。例如，假设字符串的最后 4 个字节是字符 'e' 并结合了重音符号。切片最后 2 个字节会产生一个仍然是 utf8 的字符串，但就用户看到的内容而言，会将输出从“é”更改为“e”，这可能会改变文本的含义。当您只是命名 RabbitMQ 队列时，这可能不是什么大问题，但在其他情况下可能很重要。例如，在法语中，时事通讯标题“Unpolicier tué”的意思是“一名警察被杀”，而“Unpolicier tue”的意思是“一名警察杀人”。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T18:42:16.773

我想我找到了一些有用的东西。

```
def limit_bytesize(str, size)
  str.encoding.name == 'UTF-8' or raise ArgumentError, "str must have UTF-8 encoding"

  # Change to canonical unicode form (compose any decomposed characters).
  # Works only if you're using active_support
  str = str.mb_chars.compose.to_s if str.respond_to?(:mb_chars)

  # Start with a string of the correct byte size, but
  # with a possibly incomplete char at the end.
  new_str = str.byteslice(0, size)

  # We need to force_encoding from utf-8 to utf-8 so ruby will re-validate
  # (idea from halfelf).
  until new_str[-1].force_encoding('utf-8').valid_encoding?
    # remove the invalid char
    new_str = new_str.slice(0..-2)
  end
  new_str
end 
```

用法：

```
>> limit_bytesize("abc\u2014d", 4)
=> "abc"
>> limit_bytesize("abc\u2014d", 5)
=> "abc"
>> limit_bytesize("abc\u2014d", 6)
=> "abc—"
>> limit_bytesize("abc\u2014d", 7)
=> "abc—d" 
```

**更新...**

没有 active_support 的分解行为：

```
>> limit_bytesize("abc\u0065\u0301d", 4)
=> "abce"
>> limit_bytesize("abc\u0065\u0301d", 5)
=> "abce"
>> limit_bytesize("abc\u0065\u0301d", 6)
=> "abcé"
>> limit_bytesize("abc\u0065\u0301d", 7)
=> "abcéd" 
```

使用 active_support 分解的行为：

```
>> limit_bytesize("abc\u0065\u0301d", 4)
=> "abc"
>> limit_bytesize("abc\u0065\u0301d", 5)
=> "abcé"
>> limit_bytesize("abc\u0065\u0301d", 6)
=> "abcéd" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T18:34:31.020

这个怎么样：

```
s = "δogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδogδog"
count = 0
while true
  more_truncate = "a" + (255-count).to_s
  s2 = s.unpack(more_truncate)[0]
  s2.force_encoding 'utf-8'

  if s2[-1].valid_encoding?
    break
  else
    count += 1
  end
end

s2.force_encoding 'utf-8'
puts s2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-17T07:29:56.240

Rails 6 将提供一个[String#truncate_bytes](https://github.com/rails/rails/commit/4940cc49ddb361d584d51bc3eb4675ff8ece4a2b "字符串#truncate_bytes")，其行为类似于`truncate`，但采用字节计数而不是字符计数。而且，当然，它返回一个有效的字符串（它不会在多字节字符的中间盲目切割）。

取自文档：

```
>> "".size
=> 20
>> "".bytesize
=> 80
>> "".truncate_bytes(20)
=> "…" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-28T19:38:49.877

Ruby 的 String#byteslice 可以与范围一起使用。我建议尝试以下方法：

`string.bytslice(0...max_bytesize)`

这三个点将允许 max_bytesize 值包含在内。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-03T16:08:34.687

### 没有导轨

[Fredrick Cheung 的回答](https://stackoverflow.com/a/12536491/2063546)是启发此解决方案的绝佳`O(n)`起点`O(log n)`：

```
def limit_bytesize(str, max_bytesize)
  return str unless str.bytesize > max_bytesize

  # find the minimum index that exceeds the bytesize, then subtract 1
  just_over = (0...str.size).bsearch { |l| str[0..l].bytesize > max_bytesize }
  str[0..(just_over - 1)]
end 
```

我相信这也实现了`max_bytesize / 4`该答案中提到的自动加速，因为`bsearch`从中间开始。

# html - 将超链接添加到 getElementsByTagName

> ID：12536081
> 
> 赞同：0
> 
> 时间：2012-09-21T18:22:44.677
> 
> 标签：html, getelementsbytagname

我正在将 XML 节点值检索到我的 HTML 页面中。我的一个节点中有一条路径，我想在它周围放置一个链接。TagName 是 ("link") 我需要将 TagName "link" 的值添加为超链接。我尝试使用

这是怎么做到的？

```
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari

                            xmlhttp = new XMLHttpRequest();
                        }
                        else {// code for IE6, IE5
                            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                        }
                        xmlhttp.open("GET", "reports.xml", false);
                        xmlhttp.send();
                        xmlDoc = xmlhttp.responseXML;

                        //document.write("<tr><th width='18%' align='left'>Report</th>");
                        //document.write("<th width='18%' align='left'>Audit Subject</th>");
                        //document.write("<th width='18%' align='left'>Report</th></tr>");

                        var x = xmlDoc.getElementsByTagName("item");
                        for (i = 0; i < x.length; i++) {
                            document.write("<tr><td>");
                            document.write(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
                            document.write("</td><td>");
                            document.write(x[i].getElementsByTagName("description")[0].childNodes[0].nodeValue);
                            document.write("<br>");
                            document.write("<a href='' target='_blank'>");
                            document.write(x[i].getElementsByTagName("link")[0].childNodes[0].nodeValue);
                            document.write("</a></td><td>");
                            document.write(x[i].getElementsByTagName("pubdate")[0].childNodes[0].nodeValue);
                            document.write("</td></tr>");

                        } 
```

XML 文件：

```
`<audits>
  <reports>
    <title>Audit Reports</title>
    <rsslink>http://www.somesite.com/</rsslink>
    <item>
      <title>test1</title>
      <description>test for hyperlink path</description>
      <link>../pdf/audits/DeonGeeCert.pdf</link>
      <pubdate>Friday, September 21, 2012</pubdate>
    </item>
    <item>
      <title>test2</title>
      <description>test2</description>
      <link>../pdf/audits/2012-09-10audit-12-14.pdf</link>
      <pubdate>Monday, September 10, 2012</pubdate>
    </item>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:46:28.077

不确定你想要什么，你的问题太模糊了，但我猜这可能是你想要做的

```
for (i = 0; i < x.length; i++) {
                            document.write("<tr><td>");
                            document.write(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
                            document.write("</td><td>");
                            document.write(x[i].getElementsByTagName("description")[0].childNodes[0].nodeValue);
                            document.write("<br>");
                            var linkValue=x[i].getElementsByTagName("link")[0].childNodes[0].nodeValue;
                            document.write("<a href='"+linkValue+"' target='_blank'>");
                            document.write(linkValue);  //or some meaningful text, just keeping the last string in the link
                            document.write("</a></td><td>");
                            document.write(x[i].getElementsByTagName("pubdate")[0].childNodes[0].nodeValue);
                            document.write("</td></tr>");

                    } 
```

# asp.net - 使用自定义加密方法加密连接字符串

> ID：12536086
> 
> 赞同：0
> 
> 时间：2012-09-21T18:23:04.163
> 
> 标签：asp.net, encryption, web-config, connection-string

使用 .net 标准方法加密 web.config connectionStrings 部分，在共享主机中是不可能的。我在博客中读到，另一种方法是创建自定义类或方法来加密和解密 web.config connectionStrings 部分。这适用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:28:36.287

你可以使用这篇文章——基于crypt和decrypt

链接： http: [//www.codeproject.com/Articles/5719/Simple-encrypting-and-decrypting-data-in-C](http://www.codeproject.com/Articles/5719/Simple-encrypting-and-decrypting-data-in-C)

注意：如果您不想让用户访问，您可以使用 EnbededRessource 来保存您的 stringConnection

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:35:53.100

你能澄清为什么在共享主机中不可能吗？它“应该”拥有自己的机器密钥（加密过程必须在机器本身完成）。

您可以创建一个“一次性”aspx 页面（也就是一次性使用），其唯一目的是运行加密方法（一次）。然后，您可以从主机中删除该页面。当然假设运行 Asp.net 的用户实例对您的应用程序文件夹具有 R/W 访问权限（以修改 web.config）。

嗯...

# c++ - 如何缓存从 MySQL 数据库创建的对象

> ID：12536091
> 
> 赞同：2
> 
> 时间：2012-09-21T18:23:16.357
> 
> 标签：c++, mysql, caching

我正在编写一个服务器应用程序，它必须每秒执行大量由连接的客户端触发的 MySQL 查询，我想知道除了良好的结构化数据库之外，提高性能的最佳方法是什么。

我的想法是缓存一些数据并只发送缓存的数据而不是执行新的查询。就像数据库有不同的表一样，缓存必须处理这些不同的“结构”（对象）。由于连接到服务器的客户端能够间接更改数据，因此我必须能够编辑缓存的数据（并且在某些时候能够更新我的数据库，但这应该不会太难）。这是我需要做的简短列表：

*   编辑缓存的数据/对象
*   删除旧数据/对象并添加新数据/对象
*   按某种优先级排序数据（最后使用）
*   通过某种 id 识别数据

我认为向量或队列/priority_queue 都是一个好主意。这样，我可以为我想要缓存的每个表/对象创建一个队列或向量（没有执行任何测试，因为我想在浪费时间之前获得更多意见）。存储在这些缓存结构中的最大对象大约为 1 KB（很可能更小），最小的可能为 96 字节。

每个缓存结构我不必存储超过 50.000 个对象，我认为我可以使用 10 种不同的结构（每个人都使用不同的对象类型）。

最重要的部分是速度，否则我只能执行查询。这不仅是我必须进行查询，而且之后还要创建一个新对象，而不是仅仅重用或重新发送旧对象。

所以这是我的问题：

*   根据提供的信息缓存数据/对象的最佳方法是什么？为什么？

**编辑：**哦，当我指的是结构时，我不是指结构，我只是不知道我应该如何引用向量队列映射等，同时容器可能会更好:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:20:25.763

有很多事情需要考虑，但总的来说，我会在您的情况下将关系映射基于[行数据网关](http://martinfowler.com/eaaCatalog/rowDataGateway.html)模式 (RDG)。如果您没有太多不同的对象类型，那么这种架构方法应该可以很好地扩展。如果您将缓存簿记约束到 Finder 类，RDG 应该有助于您的缓存实现。

如果您有时间并且愿意，请查看[Martin Fowler 的企业应用程序架构模式](http://books.google.hr/books?id=vqTfNFDzzdIC&source=gbs_book_other_versions)。这是一个很好的信息。

现在到具体...

*   通过某种 id 识别数据

通常，您会为此在数据库中使用一些自动递增的整数列。您可以使用 unordered_map 快速从缓存中提取这些对象。由于您的缓存中有所有对象，为了优化，您还可以实现一些`find*`函数来首先搜索缓存。您可以使用 unordered_map/unordered_multimap 来“索引”一些数据，如果您的搜索时间受到高度限制，或者只是坚持使用良好的旧地图/多地图。但是，这会使工作加倍，并且您已经在数据库中免费获得了这些类型的查询。

*   编辑缓存的数据/对象

在您实际将脏数据写入数据库之前，系统的其余部分不应该看到脏数据。启动更新后，如果一切按预期进行，您可以将缓存中的对象替换为您用于更新的对象，或者简单地删除缓存中的对象并让其他读者从数据库中获取它（这将导致再次缓存对象）。您可以通过克隆原始网关对象来实现这一点，但底线是您应该实现一些锁定策略。

*   删除旧数据/对象并添加新数据/对象

在这里，您只需从缓存中删除对象，然后尝试从数据库中删除。如果在数据库中删除失败，其他读者将缓存它。只要确保您在删除过程中没有客户端可以访问相同的记录。添加新记录时，您只需实例化网关对象，将其传递给域级别对象，完成更改后，在网关对象上调用 insert。您可以将新的 Gateway 对象放入缓存中，也可以让第一个读者将其放入缓存中。

*   按某种优先级排序数据（最后使用）
*   根据提供的信息缓存数据/对象的最佳方法是什么？为什么？

[这是选择最佳缓存算法的问题。](http://en.wikipedia.org/wiki/Cache_algorithms)这不是一个容易回答的问题，但 LRU 应该可以正常工作。没有实际的指标，就没有正确的答案，但是 LRU 很容易实现，如果它不符合您的要求，只需执行指标并决定新算法。确保您可以通过良好的缓存接口无缝地做到这一点。要记住的另一件事是您的域级别对象永远不应该依赖于缓存的限制。如果您需要 100k 个对象，但只有 50k 个缓存，那么您仍然在内存中拥有所有 100k 个对象，但其中有 50k 个对象在缓存中。换句话说，你的对象不应该依赖于你的缓存状态，也不应该关心你是否有缓存。

接下来，如果您仍然坚持使用 RDG 的想法，那么您只是在缓存中缓存网关对象。您可以通过 shared_ptr 将网关对象的实例保存在缓存中，但如果您想避免脏写，还应该考虑锁定策略（乐观与悲观）。此外，您的所有网关（每个表一个）都可以继承相同的接口，因此您可以概括您的保存/加载策略，并且您可以在保持简单的同时使用单个池。（[查看 boost::pool。](http://www.boost.org/doc/libs/1_49_0/libs/pool/doc/html/boost_pool/pool/interfaces.html#boost_pool.pool.interfaces.interfaces.object_pool)也许它可以帮助您实现缓存。）

最后一点：

蛋糕是一个谎言！:D 无论您决定做什么，请确保它基于大量的性能指标。如果您将性能提高了 20%，并且您花了 2 个月的时间来做这件事，那么考虑在您的硬件上增加几 GB 的 RAM 可能是值得的。做一些简单的可验证的概念证明，这将为您提供足够的信息，是否实现您的缓存支付，如果没有，请尝试一些经过测试且可靠的现成解决方案（memcached 等，正如@Layne 已经评论的那样）。

# python - 如何在 Python 项目中从 Sphinx 的搜索索引中隐藏 _static 目录？

> ID：12536094
> 
> 赞同：2
> 
> 时间：2012-09-21T18:23:19.773
> 
> 标签：python, python-sphinx

在 Sphinx 项目中，如何防止项目的 _static 目录中的文档出现在项目搜索结果中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:07:44.390

没有用于从搜索索引中排除特定目录中的文件的配置选项。

但是，您可以通过修改[`IndexBuilder.feed()`](https://bitbucket.org/birkenfeld/sphinx/src/tip/sphinx/search/__init__.py)方法来做到这一点。此方法的参数之一是`doctree`（Docutils 类的一个实例`document`）。正在处理的 .rst 文档的路径是 的值`doctree.attributes['source']`。

将以下猴子补丁添加到**conf.py**：

```
from sphinx.search import IndexBuilder, WordCollector

def feed(self, filename, title, doctree):
    """Feed a doctree to the index."""

    # Patch: if '_static' is in the path, don't use the file to 
    # populate the search index
    source = doctree.attributes["source"]
    if "_static" in source:
        return

    self._titles[filename] = title

    visitor = WordCollector(doctree, self.lang)
    doctree.walk(visitor)

    def add_term(word, stem=self.lang.stem):
        word = stem(word)
        if self.lang.word_filter(word):
            self._mapping.setdefault(word, set()).add(filename)

    for word in self.lang.split(title):
        add_term(word)

    for word in visitor.found_words:
        add_term(word)

IndexBuilder.feed = feed 
```

使用 Sphinx 1.1.3 测试。

# sql - 如何将军事时间转换为 SQL 服务器中的 mm/dd/yyyy 和时间？

> ID：12536097
> 
> 赞同：1
> 
> 时间：2012-09-21T18:23:31.570
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有一个简单的数据集，如下表 1 所示。我想使用表 1 中的列生成两个新列 (`START_SHIFT_DT_TIME`和`END_SHIFT_DT_TIME`)。所需的输出如表 2 所示。

要求是：

1.  如果`START_SHIFT`时间从 22:00:00 或之后开始，则实际开始日期为前一天。
2.  如果`START_SHIFT`营业时间在 22:00:00 之前开始，则实际开始日期为次日。

我正在使用 SQL 服务器。

**表 1**：

```
START_SHIFT END_SHIFT       DATE    
22:00:00    06:00:00        1/13/2012 12:00:00 AM
07:00:00    15:00:00        1/13/2012 12:00:00 AM
23:30:00    07:30:00        2/27/2012 12:00:00 AM
00:00:00    08:00:00        2/17/2012 12:00:00 AM
17:00:00    01:00:00        1/1/2012 12:00:00 AM 
```

**表 2**：

```
START_SHIFT END_SHIFT     DATE                  START_SHIFT_DT_TIME     END_SHIFT_DT_TIME
22:00:00    06:00:00      1/13/2012 12:00:00 AM  1/12/2012 10:00:00 PM  1/13/2012 6:00:00 AM
07:00:00    15:00:00      1/13/2012 12:00:00 AM  1/13/2012 7:00:00 AM   1/13/2012 3:00:00 PM
23:30:00    07:30:00      2/27/2012 12:00:00 AM  2/26/2012 11:30:00 PM  2/27/2012 7:30:00 AM
00:00:00    08:00:00      2/17/2012 12:00:00 AM  2/17/2012 12:00:00 AM  2/17/2012 8:00:00 AM
17:00:00    01:00:00      1/1/2012 12:00:00 AM   1/1/2012 5:00:00 PM    1/2/2012 1:00:00 AM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:48:53.420

```
SELECT
  START_SHIFT,
  END_SHIFT,
  DATE,
  DATEADD(SS,
          DATEDIFF(SS,0,START_SHIFT),
          DATEADD(D,
                  CASE WHEN START_SHIFT >= '22:00' THEN -1 ELSE 0 END,
                  DATE)) START_SHIFT_DT_TIME,
  DATEADD(SS,
          DATEDIFF(SS,0,END_SHIFT),
          DATE) END_SHIFT_DT_TIME
FROM TBL 
```

The pattern used in the last column is that the time component in `END_SHIFT` is converted to seconds and then added to the `DATE`. In the 4th column, the same pattern is used and it goes through an additional step of adding -1 day (previous) when `START_SHIFT` is 22:00 or later.

# amazon-ec2 - Amazon EC2 Windows Server 2008 +“实例状态检查失败”

> ID：12536100
> 
> 赞同：0
> 
> 时间：2012-09-21T18:23:50.943
> 
> 标签：amazon-ec2, ip, windows-server-2008, cloud, amazon-ebs

我在 Amazon EC2 实例上启动了 Windows Server 2008。

在进行一些配置时，我将 IP 地址更改为 Amazon EC2 实例的私有 IP 地址。

一旦我更改了 IP 地址，与实例的远程连接就会断开，然后当我尝试重新连接时，我收到“实例状态检查失败”错误。

任何人都可以帮助我，我怎样才能进入实例？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:26:09.137

终止并重新启动实例。或者只是重新启动实例。

# database - PostgreSQL 数据库模式：将共享对象映射到多个更高级别的对象

> ID：12536105
> 
> 赞同：0
> 
> 时间：2012-09-21T18:24:10.200
> 
> 标签：database, postgresql, schema

**背景**：我正在创建一个允许用户评论不同对象类型的应用程序。为简单起见，假设我有*Object A*和*Object B*，两者都可以评论。我想将这些评论存储在数据库表中。两个对象的评论数据结构完全相同，最常见的数据库查询将是“获取特定*对象 A*的所有评论”。

**问题**：以下哪种模式最有效：

1.  一个表，评论，带有“类型”列
2.  用于每种对象类型的多个表 Comments_ObjectA 和 Comments_ObjectB
3.  其他我没有考虑过的东西

**示例用法**

1.  单表："SELECT * FROM comment WHERE type="ObjectA" and id_object=123
2.  多个表：“SELECT * FROM comment_objecta WHERE id_objecta=123”

谢谢您的帮助！

# c++ - LNK2019 错误未解决的外部符号

> ID：12536106
> 
> 赞同：1
> 
> 时间：2012-09-21T18:24:15.130
> 
> 标签：c++, templates, lnk2019, lnk

我决定创建一个列表（出于练习的原因，所以请不要忘记重新发明轮子谢谢..）

我得到了这个 LNK2019 错误，我相信它的代码是特定的，因为我似乎找不到修复它的方法（是的，我在这里搜索）

我发现问题是因为编译器不承认方法的定义，但我似乎无法找出原因。我正在使用 MVS 2010，因此链接参数是自动完成的。这是我的代码。

清单 H：

```
#ifndef _DLIST
#define _DLIST

#include "Node.h"

template<class DataO>
class Dlist
{
private:
    /* Data Members */
             Node<DataO>* _ndHead;
             Node<DataO>* _ndTail;
    unsigned int   _nLength;

    /* Methods */
    void Delete();

public:
    /* Ctors && Dtors */
    Dlist();
    ~Dlist();

    /* Getters && Setters */
    int Length();

    /* Methods */
    void Add(DataO doData);
    void Clear();
    void RemoveAt(unsigned int nIndex);
    void Remove();
};

#endif 
```

列出 Cpp：

```
// Dlist.cpp

#include "Dlist.h"

/* ------------------ Dlist Section ------------------ */
/* --- Constracturs && Destractur --- */
template<class DataO> 
Dlist<DataO> :: Dlist()
{
    // Init data
    this->_ndHead = NULL;
    this->_ndTail = NULL;
    this->_nLength = 0;
}

template<class DataO> 
Dlist<DataO> :: ~Dlist()
{
    // Check if we have nodes to delete
    if (this->_nLength > 0);
    {
        this->Clear();
    }
}

/* --- Methods -- */
template<class DataO> 
int Dlist<DataO> :: Length()
{
    // Return the length
    return (this->Length);
}
template<class DataO> 
void Dlist<DataO> :: Add(DataO doData)
{
// Check if head is null
if (this->_ndHead == NULL)
{
    // Create head
    this->_ndHead = new Node<DataO>(doData, NULL, NULL);
}
// Check if tail is null
else if (this->_ndTail == NULL)
{
    // Create tail
    this->_ndTail = new Node<DataO>(doData, NULL, this->_ndHead);

    // Set head's next
    this->_ndHead->SetNext(this->_ndTail);
}
// Create a new Node and replace the tail.
else
{
    // Create a new node.
    this->_ndTail->_ndNext = new Node<DataO>(doData, NULL, this->_ndTail);

    // Make the new node the tail
    this->_ndTail = this->_ndTail->_ndNext;
}
} 
```

节点 H：

```
 template<class DataO> 
class Node
{
private:
    /* Data Members */
    DataO  _doData;
    Node<DataO>*  _ndPrev;
    Node<DataO>*  _ndNext;

    /* Methods */
    void Delete();

public:
    /* Ctors && Dtors */
    Node<DataO>(DataO doData);
    Node<DataO>(DataO doData, const Node& ndNext, const Node& ndPrev);
    ~Node();

    /* Getters && Setters */
    DataO&  GetData();
    void    SetData(DataO doData);

    const Node& GetNext();
          void  SetNext(const Node* ndNextNode);
    const Node& GetPrev();
          void  SetPrev(const Node* ndPrevNode);
}; 
```

节点 Cpp：

```
// Node.cpp

#include "Node.h"

/* ------------------ Node Section ------------------ */
/* --- Constracturs --- */
template<class DataO> 
Node<DataO> :: Node(DataO doData)
{
    // Init data
    this->SetData(doData);
    this->SetNext(NULL);
    this->SetPrev(NULL);
}

template<class DataO> 
Node<DataO> :: Node(DataO doData, const Node& ndNext, const Node& ndPrev) 
{
    // Init data
    this->SetData(doData);
    this->SetNext(ndNext);
    this->SetPrev(ndPrev);
}

/*
    -   Node destructor -
    -   Maneges the change of nodes.
    -   Changes the Previous node next node, 
    -   to the current node next node.
*/
template<class DataO> 
Node<DataO> :: ~Node()
{
    // Check that prev is not null
    if (this->GetPrev != NULL)
    {
        // Set prevs Next to current next
        this->GetPrev().SetNext(this->GetNext());
    }
}

/*
    -   GetData -
    -   Returns the data stored in the Node.
*/
template<class DataO> 
DataO& Node<DataO> :: GetData()
{
    // Return the data
    return (this->_doData&);
}

/*
    -   SetData -
    -   Sets the data stored in the Node.
*/
template<class DataO> 
void Node<DataO> :: SetData(DataO doData)
{
    // Sets data
    this->_doData = doData;
}

/*
    -   GetNext -
    -   Returns the next node in the list.
*/
template<class DataO> 
const Node<DataO>& Node<DataO> :: GetNext()
{
    // Returns the next node in the list.
    return (this->_ndNext&);
}

/*
    -   SetNext -
    -   Set the next node in the list.
*/
template<class DataO> 
void Node<DataO> :: SetNext(const Node* ndNextNode)
{
    // Set next node as given node
    this->_ndNext = ndNextNode;
}

/*
    -   GetPrev -
    -   Returns the previous node in the list.
*/
template<class DataO> 
const Node<DataO>& Node<DataO> :: GetPrev()
{
    // Returns the next node in the list.
    return (this->_ndPrev&);
}

/*
    -   SetPrev -
    -   Set the previous node in the list.
*/
template<class DataO> 
void Node<DataO> :: SetPrev(const Node* ndPrevNode)
{
    // Set next node as given node
    this->GetPrev = ndPrevNode;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:32:42.393

发生这种情况是因为 MSVC 编译器不支持外部模板。我明白你的想法，这将是正确的方法，但它不适用于大多数编译器。这是因为编译器需要访问整个模板定义（而不仅仅是签名），以便为模板的每个实例化生成代码。您有 2 个选项可以使其工作：

1.  在头文件中定义所有方法（就像大多数 Boost 库一样）

2.  为预定义类型显式实例化您的模板类（这样您的类将不是通用的）

[在此处](http://www.parashift.com/c++-faq-lite/templates-defn-vs-decl.html)查看详细说明

# objective-c - iOS6 Facebook：如果用户没有配置Facebook怎么办？

> ID：12536108
> 
> 赞同：15
> 
> 时间：2012-09-21T18:24:21.417
> 
> 标签：objective-c, ios, facebook, cocoa-touch, ios6

我正在使用新的 Facebook 集成，`iOS6`如下所示：

```
SLComposeViewController *fbController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
    SLComposeViewControllerCompletionHandler __block completionHandler=^(SLComposeViewControllerResult result){

        [fbController dismissViewControllerAnimated:YES completion:nil];

        switch(result){
            case SLComposeViewControllerResultCancelled:
            default:
            {
                NSLog(@"Cancelled.....");

            }
                break;
            case SLComposeViewControllerResultDone:
            {
                NSLog(@"Posted....");
            }
                break;
        }};

    //[fbController addImage:[UIImage imageNamed:@"1.jpg"]];
    [fbController setInitialText:@"Test message"];
    [fbController addURL:[NSURL URLWithString:self.asset.url]];
    [fbController setCompletionHandler:completionHandler];
    [self presentViewController:fbController animated:YES completion:nil];
} else {
    NSLog(@"no facebook setup");
} 
```

这里的问题是，我在没有登录的情况下测试它，`Facebook`我得到的只是日志消息。

** 奇怪的是，我在模拟器中得到了对话框，但不是设备！**

**如何向用户显示提醒他们需要登录 Facebook？我看过系统警报的屏幕截图，但由于某种原因我没有收到。我做错了什么？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-21T18:55:14.153

删除检查以`[SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]`解决我的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T19:50:40.593

似乎`[SLComposeViewController isAvailableForServiceType:]`在模拟器中返回 true，即使您还没有在那里设置帐户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:36:25.997

我认为您不会收到任何系统警报（我不确定，但基于 Twitter 的经验）。尽管我在最近的一些博客/网络帖子中看到了它，但它对我也不起作用。我建议在这种情况下，您应该询问用户的 FB 凭据（自定义对话框或 FBDialog）并在 iPad 中添加 FB 帐户。以下代码未经测试，但您可以了解一下。我正在为 Twitter 做类似的事情，并且在我的应用程序中运行良好。

```
ACAccountStore *store = [[ACAccountStore alloc] init] ;
    ACAccountType *fbType = [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    [store requestAccessToAccountsWithType:fbType options:[NSDictionary dictionaryWithObjectsAndKeys:kAppID,ACFacebookAppIdKey, nil] completion:^(BOOL granted, NSError *error) {
        if(YES) {
            ACAccount *fbAccount = [[ACAccount alloc] initWithAccountType:[store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook]];

            ACAccountCredential *outhCredential = [[ACAccountCredential alloc] initWithOAuth2Token:[appDelegate.facebook accessToken] refreshToken:refesrhToken expiryDate:[appDelegate.facebook expirationDate]];

            fbAccount.credential = outhCredential;

            [store saveAccount:fbAccount withCompletionHandler:^(BOOL success, NSError *error) {
                if(success)
                {
                    [self performSelectorOnMainThread:@selector(showFBPostSheet) withObject:nil waitUntilDone:NO];
                }
            }];

            [outhCredential release];
            [fbAccount release];
            [store release];
        }
        // Handle any error state here as you wish
    }]; 
```

# php - PHPUnit 测试一个返回对象属性的方法

> ID：12536111
> 
> 赞同：1
> 
> 时间：2012-09-21T18:24:29.477
> 
> 标签：php, zend-framework, phpunit

```
public function thisMethod {
    $example = $this->methodReturnsObject()->this1->that2->there3->id;
    return $example;
} 
```

你将如何在 PHPUnit 中测试 thisMethod？

显然我可以写一个methodReturnsObject() 将返回一些东西的期望......但是什么？该对象具有与之关联的属性，但是您将如何模拟该值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T19:48:10.700

答案是“你没有”。单元测试应该单独测试每个类，你想要做的不是单元测试。正如我在评论中所说，你违反[了得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)，简单地说

*   每个单元应该只对其他单元有有限的了解：只有与当前单元“密切”相关的单元。
*   每个单位只应与其朋友交谈；不要和陌生人说话。
*   只与您的直系朋友交谈。

您在那里有需要重构的紧密耦合的类。我在这里先写了类来说明这一点，但我通常先写测试。

让我们从链的末端开始：-

```
class there3
{
    private $id

    public function setId($id)
    {
        $this->id = $id;
    }

    public function getId()
    {
        return $this->id;
    }

} 
```

现在让我们为其设置一个单元测试：-

```
class there3Test extends PHPUnit_Framework_TestCase
{
    public function testCanGetId()
    {
        $there3 = new there3();
        $there3->setId(3);
        $this->assertTrue($there3->getId() === 3);
    }
} 
```

该类现在已经过测试，所以我们不需要再次测试它。现在让我们看下一个：-

```
class this2
{
    public $there3;

    //To facilitate unit testing we inject the dependency so we can mock it
    public function __construct(there3 $there3)
    {
        $this->there3 = $there3;
    }

    public function getId()
    {
        return $this->there3->getId();
    }

} 
```

现在进行单元测试：-

```
class this2Test extends PHPUnit_Framework_TestCase
{
    public function testCanGetId()
    {
        $mockThere3 = $this->getMock('there3');
        $mockThere3->method('getId')
                   ->will($this->returnValue(3);

        $this2 = new this2($mockThere3);//We pass in the mock object instead of the real one
        $this->assertTrue($this2->getId() === 3);
    }
} 
```

我们将做最后一个例子来进一步说明我的观点：-

```
class this1
{
    private $this2;

    public function __construct(this2 $this2)//injecting again
    {
         $this->$this2 = $this2;
    }

    public function getId()
    {
        return $this->$this2->getId();
    }
} 
```

而且，再次，单元测试： -

```
class this1Test extends PHPUnit_Framework_TestCase
{
    public function testCanGetId()
    {
        $mockThis2 = $this->getMock('this2');
        $mockThis2->method('getId')
                  ->will($this->returnValue(3);

        $this1 = new this1($mockThis2);//We pass in the mock object instead of the real one
        $this->assertTrue($this1->getId() === 3);
    }
} 
```

希望您无需我浏览您示例中的所有对象即可了解这个想法。

我所做的是将这些类彼此分离。他们只知道他们所依赖的对象，他们不关心该对象如何获取请求的信息。

现在对 id 的调用看起来像：-

```
public function getId()
{
    return $this->this1->getId();
} 
```

在返回的 id 是 there2::id 之前，它会沿着链向上。你永远不必写像 $this->$this1->$this2->there3->id 这样的东西，你可以正确地对你的类进行单元测试。

有关单元测试的更多信息，请参阅[PHPUnit 手册](http://www.phpunit.de/manual/3.7/en/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:39:39.513

你将如何在 PHPUnit 中测试 thisMethod，我要么：

1.  尽量避免达到单元测试模拟 3+ 嵌套部分的地步
2.  创建对象的随机版本，并验证随机是否相同

如：

```
<?php

// an opaque known
$random = rand();

// the results
$value = new stdClass();
$value->this1 = new stdClass();
$value->this1->this2 = new stdClass();
$value->this1->this2->there3 = new stdClass();
$value->this1->this2->there3->id = $random;

// somehow get the known value into the fixture
// not enough detail shown about $this->methodReturnsObject()
// to make a reasonable suggestion about it.

$this->assertEquals(
   $random, $this->fixture->thisMethod(),
   "Got a value from somewhere else"
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T19:35:57.043

使用 rrehbein 的方法从 mock 方法构建返回值，并创建包含任何类的部分 mock`thisMethod`和`methodReturnsObject`-- 被测类。模拟`methodReturnsObject`返回`$value`创建的对象。

假设该类被命名`Foo`为

```
function testThisMethod() {
    $foo = $this->getMock('Foo', array('methodReturnsObject'));
    $value = // create as rrehbein demonstrated
    $foo->expects($this->once())
        ->method('methodReturnsObject')
        ->will($this->returnValue($value));
    self::assertSame($value, $foo->thisMethod());
} 
```

# c++ - 具有返回类型的函数模板，不能从参数推导出

> ID：12536112
> 
> 赞同：2
> 
> 时间：2012-09-21T18:24:41.107
> 
> 标签：c++, templates

显式模板参数规范的总结

```
template<class T>
T max(T t1, T t2)
{
   if (t1 > t2)
      return t1;
   return t2;
}
max<double>(120, 14.55);   we explicitly determine the type of T as double 
```

## 我理解上面的部分。

下面，有点不一样

```
 template<class T>
T SumOfNumbers(int a, int b)
{
   T t = T(); // ???

   t = T(a)+b;  //??? 

   return t;
} 
```

这需要两个整数，并将它们相加。尽管在 int 本身中对它们求和是合适的，但此函数模板提供了根据调用者要求以任何类型计算总和（使用 operator+）的机会。例如，以 double 形式获取结果，您可以将其称为：

```
double nSum;
nSum = SumOfNumbers<double>(120,200);    //  ??? 
```

我了解“显式模板参数规范”主题。但是，这里的条件不同，bcs 函数模板的参数类型已经是确定的。

我无法理解符号“？？？”之前的行 ?

你能逐步向我解释一下吗？这条线会发生什么

```
nSum = SumOfNumbers<double>(120,200); 
```

120 是否将 120.0 即从 int 转换为 double ？

什么 T(a) ？这是什么意思？

参考： http: [//www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part-1](http://www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part-1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:29:24.227

```
T t = T(); 
```

`t`通过值初始化进行初始化。对于内置算术类型，它的值为零；对于用户定义的类型，它使用默认构造函数进行初始化。

（学究式地，它是通过复制或移动一个值初始化的临时值来初始化的，因此如果没有可用的复制或移动构造函数，这将失败；实际上复制或移动将被省略）。

```
t = T(a)+b; 
```

转换`a`为 type `T`，添加`b`到转换后的值，并将结果分配给`t`。如果`T`是内置类型，`T(a)`则将使用标准转换或强制转换；如果它是用户定义的，那么它将使用 form 的构造函数`T(int)`。

第一行没有意义，因为`t`将立即重新分配。该函数可以更清楚地写为`return T(a)+b;`

```
nSum = SumOfNumbers<double>(120,200); 
```

这将使用返回类型实例化函数模板`double`，并调用。整体效果与`nSum = double(120) + 200;`or相同`nSum = 220.0`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T18:30:55.213

```
T t = T(); // This creates a new object of type T inefficiently though, I think it actually creates a temporary one and then calls the copy-constructor.

nSum = SumOfNumbers<double>(120,200); // This calls your function with type parameter double with parameter 120 and 200\. This means it will compile a version of SumOfNumbers where T is "substituted" by double 
```

`T(a)`调用`T`以 a`int`作为参数的构造函数。

# arrays - as3 for 循环无法有效加载代码 - 创建随机 mp3 播放列表

> ID：12536114
> 
> 赞同：0
> 
> 时间：2012-09-21T18:24:45.330
> 
> 标签：arrays, actionscript-3, flash, for-loop, loading

我有这个功能，我把它放在一个应用程序中，可以在 Droid 和 IOS 设备上运行。

**目的：它通过 10 个文件夹，每个文件夹都包含 mp3。它获取内容并从文件夹中随机选择，然后将该随机 mp3 与其他随机选择的 mp3 一起放入另一个数组中。这个最终数组是随机播放列表。**

大多数情况下它都有效，但有时第一个 Var 留空。我想知道第二个数组是否正在尝试获取第一个数组的内容并且 cpu 运行缓慢，所以它有时可能不起作用。

有没有办法让这个代码遵循特定的顺序以确保正常运行？

```
function loadRandomMeditations(Language:String,CurrentMystery:String,CurrentDecade:String)
    {

    RandomSounds = [];
    TempArray = [];

    sounds = [];
    for(var a:int = 1; 11>a;a++)
        {
            var folder:String = "Languages/" + Language + "/Meditations/" + CurrentMystery + "/"+CurrentDecade+"/"+a+"/";
            var desktop:File = File.applicationDirectory.resolvePath(folder);
            var medSound:Array = desktop.getDirectoryListing();

            /// Looping thru to get all sounds in this directory
            for (var i:uint = 0; i < medSound.length; i++)
                {
                            // puts all sounds of folder into a temporary array
                TempArray.push(medSound[i].url);
                }

                    /// This counts the array and chooses a random number.
            var num = 1 + Math.round(Math.random()*(medSound.length-1));

                    //Adds Zero to make counting even
            TempArray.unshift("Zero");

            /// Puts the randomly selected array item into another array.
            RandomSounds.push(TempArray[num]);

            sounds[a] = new Sound(new URLRequest(TempArray[num]));
            TempArray = [];
        }
    trace(RandomSounds);

} 
```

**输出：有时第一个 mp3 没有加载到最终的播放列表数组中。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:59:58.947

你过于复杂了你的功能

```
function loadRandomMeditations(Language:String,CurrentMystery:String,CurrentDecade:String)
  {
  var medSound:Array = []
  var RandomSounds:Array = [];
  var sounds:Array = [];
  var folder:String = "Languages/" + Language + "/Meditations/" + CurrentMystery + "/"+CurrentDecade+"/";
  var desktop:File;
  var i:int;
  var num:int;
  // stay with the standard and use Lower Case I in a for loop
  for(i = 1; 11>i;i++)
    {
    desktop = File.applicationDirectory.resolvePath(folder+i+"/");
    medSound= desktop.getDirectoryListing();

    // This counts the array and chooses a random number.
    // not sure why you have a 1 + on this but it needs to go
    num = Math.round(Math.random()*(medSound.length-1));

    // why create a second "temp" array when you can just pick one off the medSound array
    // Puts the randomly selected array item into another array.
    RandomSounds.push(medSound[num].url);

    sounds[a] = new Sound(new URLRequest(medSound[num].url));
  }
  trace(RandomSounds);
} 
```

# symfony - 在选择字段类型中自定义值的正确方法？

> ID：12536116
> 
> 赞同：-1
> 
> 时间：2012-09-21T18:24:54.597
> 
> 标签：symfony, symfony-forms

我正在尝试输出一个选择（选择）列表，其值来自相关实体。在 Flight 实体中，与 Airport 实体存在多对一的关系。Airport 实体具有多个属性，例如城市、国家/地区、codeIata。现在，这是创建类型的方式：

```
$builder->add('origin', 'entity', array('label' => 'Origin Airport', 'class' => 'FlightcaseBookingBundle:Airport', 'property' => 'codeIata')); 
```

这很好用，它会输出一个带有*Airport->codeIata*作为选项标签和*Airport->id*作为值的元素，如下所示：

```
<option value="1234">CDG</option> 
```

但我真正想要的是显示 2 个字段串联的选项列表选项，即 IATA 代码，然后是机场名称，例如

```
<option value="1234">CDG - Paris Charles de Gaulle</option> 
```

因此，我在我的 Airport 实体中创建了一个名为 getLongName() 的新方法，它为我完成了这项工作。然后我用 longName 替换了codeIata*的**属性*值。

这基本上就是我想要的。但对我来说，这似乎很老套，而且不可取，因为实体类严格意味着定义对象本身。最重要的是，我也不能以这种方式向 getLongName 方法发送任何参数（比如 $maxlength 左右）。那么操作元素中显示的内容的正确方法是什么？我需要创建一个 Transformer 类来执行此操作，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:34:49.633

假设您使用的是 Symfony 2.0.x，AFAIK 唯一的解决方案是实现一种新方法：

```
class Airport
{
    public function getChoiceLabel()
    {
        return sprintf('%s - %s', $this->codeIata, $this->name);
    }
} 
```

然后使用实体表单类型：

```
$builder->add('origin', 'entity', array(
    'label' => 'Origin Airport',
    'class' => 'FlightcaseBookingBundle:Airport',
    'property' => 'choice_label'
)); 
```

另一种方法是实现`__toString()`，但我不喜欢在全球范围内说它是`Airport`IATA 加上它的名称的对象的表示。

如果您使用的是 Symfony 2.1，也许有更好的解决方案（阅读：闭包）来实现这一点。

**编辑**：我检查了 Symfony 2.1 的文档，似乎还不可能：

> 这是应该用于在 HTML 元素中将实体显示为文本的属性。如果留空，实体对象将被转换为字符串，因此必须具有 __toString() 方法。

# javascript - Rails：Asset Pipeline 在视图脚本中创建 JavaScript 错误

> ID：12536118
> 
> 赞同：0
> 
> 时间：2012-09-21T18:25:17.213
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, asset-pipeline

我对 a`resource`和一些特定于它的 javascript 有一个看法。所以，我尽职尽责地将 Javascript 放入`app/assets/javascripts/resource.js.coffee`.

问题是，当我转到应用程序中的其他视图时，会出现各种 Javascript 错误，例如：

```
Type issue: 'null' is not an object...

page_url = page_image.getAttribute('src'); 
```

应用程序工作正常，但这些脚本实际上不应该*尝试*在它们不打算用于的视图中运行。

显然我错过了一些东西......嗯......很明显！它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:29:44.253

默认情况下，`application.js`包括 中的所有脚本`app/assets/javascripts`，并且默认情况下，您的布局包括所有这些脚本。这样做的好处是浏览器只需对 Javascript 文件发出一次请求，然后可以缓存这些文件——但缺点是所有 Javascript 都在每个页面上运行。

有两个基本的解决方案：

1.  编写 Javascript，在需要时执行它应该执行的操作，而在不需要时不执行任何操作。
2.  更改`application.js`为不包含所有内容，在需要时包含单个 Javascript 文件，并更改`config.assets.precompile`为包含所有新的顶级文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:16:26.350

只有在某些页面上运行一些 javascript，rails 中没有任何内容。我采取的方法是基于这篇[文章](http://viget.com/inspire/extending-paul-irishs-comprehensive-dom-ready-execution)

我的每个页面特定的咖啡脚本文件看起来像

```
window.App.controller_name = 
  init: ->
    #stuff that happens for all actions
  edit: ->
    #Stuff that happens only for the edit action 
```

body 元素装饰有 data-controller 和 data-action 属性。application.js 中的一些 javascript 然后运行适当的 javascript：

```
execute_hook = (controller, action='init') ->
  ns = window.App
  if controller?
    if ns[controller] && typeof(ns[controller][action]) == "function"
      ns[toplevel][controller][action]()

jQuery ->
  body = document.body
  controller = body.getAttribute("data-controller")
  action = body.getAttribute("data-action")
  execute_hook(controller)
  execute_hook(controller, action) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T03:30:43.753

两个建议，第一个是hacky，第二个很棒。

# 1.清单+布局

为需要不同 JS 组合的视图创建一个新的 JS 清单文件，从新布局调用该清单文件，并从呈现这些视图的控制器操作调用新布局。

在您的示例中：

应用程序/资产/javascripts/resource.js.coffee

```
// Requires
//= require_whatever_js_files_your_resource_page_needs_here

// Custom JS below
... 
```

应用程序/视图/布局/resource.html.erb

```
...
<%# Within your <head> tag %>
<%= javascript_include_tag "resource" %>
... 
```

应用程序/控制器/resources_controller.rb

```
class ResourceController < ApplicationController
# filters, default layout, other actions, etc.
...

# Your action that needs only the resource JS,
# and therefore the resource layout
def action_that_only_uses_resource_js
  @some_objects = SomeObjects.all
  render layout: 'resource' # <- This is the important part
end 
```

显然，这种方法不能很好地扩展，因为它不够灵活，也就是说，你不能随意组合你的 JS，而且毫无疑问会需要。这使我们将您的 JS 分解为...

# 2\. RequireJs 模块

[使用这个 gem将](https://github.com/jwhitley/requirejs-rails)[RequireJs](http://requirejs.org/)集成到 Rails 中。您将获得所需的模块化并防止发生冲突。RequireJs 采用了[AMD 模式](https://github.com/amdjs/amdjs-api/wiki/AMD)，我相信这正是您正在寻找的。

# firefox - 代理上的 WebSocket

> ID：12536121
> 
> 赞同：1
> 
> 时间：2012-09-21T18:25:29.537
> 
> 标签：firefox, proxy, websocket

这就是问题所在，在 Firefox 15 WebSocket 上，像[echo 测试](http://www.websocket.org/echo.html)一样可以在我家的计算机上运行，​​但不能在工作中运行。我的印象是 WebSocket 旨在与现有的代理设置一起使用。

另外值得注意的是，在工作中，回声测试在 Chrome 而不是 Firefox 上成功，并且两个浏览器都配置为使用系统设置。

Firebug 给了我以下错误：

> Firefox 无法在 wss://echo.websocket.org/?encoding=text 建立与服务器的连接。

可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:32:23.450

这种情况下的原因（标准端口 443 上的安全 WS）可能是：

*   需要代理身份验证
*   无效（即自签名）TLS 证书

# javascript - 为什么我的地图可以在一个页面上工作，但不能在另一个页面上工作

> ID：12536122
> 
> 赞同：0
> 
> 时间：2012-09-21T18:25:30.810
> 
> 标签：javascript, google-maps

所以我在 CodeIgniter 框架中设置了一个谷歌地图。我有一个“地图视图”按钮，可以将我带到地图，并且该地图可以正常加载，带有所有标记和所有内容。我想要完成的是从该页面获取基本地图并将其带到另一个页面并使其更小。听起来很简单吧！！好吧，当我将代码粘贴到新页面时，我会从 firebug 收到所有这些错误消息。我猜测页面上运行的其他 JavaScript 会导致这些错误，但我不确定。我已经粘贴了下面的代码...

<---------此代码在第一页上运行良好，所以我只想复制并粘贴到新页面中----------->

```
<div class="domtab">
        <?php
        echo '<div class="large-box"; style="float:left; margin: 0.5cm 1cm 0.5cm 1cm; padding: 1em";>';
        ?>
        <div class="domtab">
        <link href="/intelligencegraph/resources/css/style.css" rel="stylesheet" type="text/css" />  
        <link href="/intelligencegraph/resources/css/developer.css" rel="stylesheet" type="text/css" />  
        <link href="/intelligencegraph/resources/css/thickbox.css" rel="stylesheet" type="text/css" />  
        <link href="/intelligencegraph/resources/css/jquery-ui.css" rel="stylesheet" type="text/css" />  
        <script type="text/javascript" src="/intelligencegraph/resources/uploads/entity_icons" ></script>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCy38HO--LhhK-BS1WqIDrHXyFU9ljaRT4&sensor=false"></script>
<script type="text/javascript">
        <script type="text/javascript">                   
  // This loads the map, 
  function initialize() {
    var myLatlng = new google.maps.LatLng(<?php echo $node_address?>);
    var myOptions = {
      zoom: 10,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    // Adding a marker, to map
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var marker = new google.maps.Marker({
      position: myLatlng, 
      map: map
      });        
  }

</script>
<body onload="initialize()">
<!-- Size Of map-->
<div id="map_canvas" style="height: 500px; width: 100%;"></div> 
        </div>  

        </div>
    </div> 
```

<---------这是我认为干扰它的代码--------->

```
<br style="clear: both;" /> 
<a onclick="document.getElementById('graphdb-viz').style.display = 'block'">View Visualization</a>

<div style="display: none" id="graphdb-viz">
    <iframe src="/intelligencegraph/viz/graph.jsp?nodeid=<?php echo $node_id ?>&database=<?php echo $database ?>" height="650" width="950"></iframe>
</div>

<a onclick="document.getElementById('graphdb-viz2').style.display = 'block'">View Alternative Visualization</a>

<div id="graphdb-viz2" style="height: 650px; width:950px; display: none" >
<script type="text/javascript" src="/intelligencegraph/resources/flash/swfobject.js"></script>
        <script type="text/javascript">
            // For version detection, set to min. required Flash Player version, or 0 (or 0.0.0), for no version detection. 
            var swfVersionStr = "10.2.0";
            // To use express install, set to playerProductInstall.swf, otherwise the empty string. 
            var xiSwfUrlStr = "playerProductInstall.swf";
            var flashvars = {nodeid:<?php echo $node_id; ?>,database:'<?php echo $database; ?>'};
            var params = {};
            params.quality = "high";
            params.bgcolor = "#ffffff";
            params.allowscriptaccess = "sameDomain";
            params.allowfullscreen = "true";
            var attributes = {};
            attributes.id = "GraphDBVis";
            attributes.name = "GraphDBVis";
            attributes.align = "middle";
            swfobject.embedSWF(
                "/intelligencegraph/resources/flash/GraphDBVis.swf", "flashContent", 
                "100%", "100%", 
                swfVersionStr, xiSwfUrlStr, 
                flashvars, params, attributes);
            // JavaScript enabled so display the flashContent div in case it is not replaced with a swf object.
            swfobject.createCSS("#flashContent", "display:block;text-align:left;");
        </script>
        <!-- SWFObject's dynamic embed method replaces this alternative HTML content with Flash content when enough 
             JavaScript and Flash plug-in support is available. The div is initially hidden so that it doesn't show
             when JavaScript is disabled.
        -->
        <div id="flashContent" style="height: 2000px; width:2000px" >
        </div>

</div> 
```

<---------这里是所有的错误信息--------->

```
//"NetworkError: 404 Not Found - http://localhost:8091/resources/js/ckeditor/ckeditor_basic.js"

ckeditor_basic.js

"NetworkError: 404 Not Found - http://localhost:8091/resources/js/jquery.js"

jquery.js

"NetworkError: 404 Not Found - http://localhost:8091/resources/js/jquery-ui.js"

jquery-ui.js

"NetworkError: 404 Not Found - http://localhost:8091/resources/js/thickbox.js"

thickbox.js

"NetworkError: 404 Not Found - http://localhost:8091/intelligencegraph/resources/uploads/entity_icons/"

/intel..._icons/

"NetworkError: 404 Not Found - http://localhost:8091/resources/js/jquery-ui.js"

jquery-ui.js

"NetworkError: 404 Not Found - http://localhost:8091/resources/js/thickbox.js"

thickbox.js

"NetworkError: 404 Not Found - http://localhost:8091/intelligencegraph/resources/uploads/entity_icons/"

"NetworkError: 404 Not Found - http://mbostock.github.com/d3/d3.layout.js?2.6.0"

d3.lay...s?2.6.0

"NetworkError: 404 Not Found - http://mbostock.github.com/d3/d3.geom.js?2.6.0" 
```

如果一切都一样，为什么我在这个页面上得到它们而不是在另一个页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:18:35.783

这不适用于任何页面，您在这里有一个双脚本标签：

```
<script type="text/javascript">
        <script type="text/javascript">//<--causes a syntax-error, remove this line                
  // This loads the map, 
```

# android - 片段中的 findViewById

> ID：12536125
> 
> 赞同：25
> 
> 时间：2012-09-21T18:25:42.110
> 
> 标签：android, android-fragments, findviewbyid

有没有办法在片段范围内通过 id 查找视图？我正在使用一系列片段来呈现一个专门的列表。片段是从布局加载的，因此它们的小部件都具有相同的 id。

我想我可以找到一种在创建期间（或之后）为每个小部件提供自定义 ID 的方法。但是，如果我能以某种方式将 findViewById 限制在片段的范围内，那就更好了。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-21T18:31:23.387

```
private View myFragmentView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    myFragmentView = inflater.inflate(R.layout.myLayoutId, container, false);
    myView = myFragmentView.findViewById(R.id.myIdTag)

    return myFragmentView;
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-21T18:31:10.063

从片段内部：

```
getView().findViewById(R.id.your_view); 
```

从封闭的活动：

```
getFragmentManager().findFragmentByTag("YourFragmentTag").getView().findViewById(R.id.your_view); 
```

或者

```
getFragmentManager().findFragmentById(R.id.your_fragment).getView().findViewById(R.id.your_view); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-21T18:29:58.490

你可以这样做`getView().findViewById()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T18:28:47.130

是的，有办法，可以通过rootView找到。首先找到你的片段的rootView，`rootView=getView();`然后使用`rootView.findViewById(...);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-24T06:53:30.780

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View rootview=null;

             rootview=inflater.inflate(R.layout.fragment_web_view, container, false);
           ListView lv = (ListView)rootview.findViewById(android.R.id.list);

return rootview;
        // Inflate the layout for this fragment
        //return inflater.inflate(R.layout.fragment_web_view, container, false);
    } 
```

# tfs - 如何将错误添加到 TFS 2012 任务板

> ID：12536132
> 
> 赞同：5
> 
> 时间：2012-09-21T18:26:08.477
> 
> 标签：tfs, tfs-workitem

我正在尝试按照[http://msdn.microsoft.com/en-us/library/hh739066(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh739066(v=vs.110).aspx)中关于“显示在任务板页面上的工作项类型”的说明进行操作。我添加`<WORKITEMTYPE name="Bug" />`到任务类别。但是，当我导入类别时，我收到一条错误消息，说`TF400917: The current configuration is not valid for this feature.` 有人知道什么是错的吗？这是我更改的唯一配置。如果我从配置中删除新行并重新导入，一切正常。

值得注意的是，我使用的是 Scrum 2.0 流程模板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:58:33.747

[我在 MSDN 论坛上](http://social.msdn.microsoft.com/Forums/en-US/TFSvnext/thread/dc6103da-4b6d-4504-bf39-9a110b731c62/)找到了解决此问题的方法。不过，我使用的是 Agile 6.1 流程模板，而不是 scrum 2.0。本质上，我只需将 RemainingWork 和 Activity 字段添加到我的 Bug 工作项类型（除了将 Bug 工作项类型添加到 Categories.xml 中的任务类别之外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T22:24:28.647

您是否将必填字段添加到错误工作项类型？您可能希望将 scrum 模板下载到您的机器上并签出以下文件“workitem tracking\process\commonConfiguration.xml”

它建议您需要任务类别中的项目的以下状态

*   去做
*   进行中
*   完全的

您可能还需要定义的字段

*   剩下的工作
*   活动
*   努力

# javascript - 表单中的多个 ID 用作数组

> ID：12536133
> 
> 赞同：0
> 
> 时间：2012-09-21T18:26:09.830
> 
> 标签：javascript, html, dom

我偶然发现了这个，它在 Chrome 和 IE9 中工作，如果我没有使用任何其他可能需要唯一 ID 的 javascript 库，是否有任何具体原因我不应该使用它？

```
<form id=form_id>
    <table id=table_id>
            <th><th>Column1</th><th>Column2</th><th>Column3</th></tr>
            <tr><td><input id="c1" type="text" value="11" /></td>
                <td><input id="c2" type="text" value="12" /></td>
                <td><input id="c3" type="text" value="13" /></td>
            </tr>
            <tr><td><input id="c1" type="text" value="21" /></td>
                <td><input id="c2" type="text" value="22" /></td>
                <td><input id="c3" type="text" value="23" /></td>
            </tr>
            <tr><td><input id="c1" type="text" value="31" /></td>
                <td><input id="c2" type="text" value="32" /></td>
                <td><input id="c3" type="text" value="33" /></td>
            </tr>
    </table>
</form> 
```

使用以下命令访问 column1 row3 项：`form_id.elements.c1[2].value`或`document.getElementByID("form_id").elements.c1[2].value`

在我看来，在这种方法中，一个 id 的多次出现可以被视为一个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:27:06.647

不要这样做。（大多数开发人员和 JavaScript 库）要求 ID 在页面中是唯一的。

相反，您可以通过赋予它们相同的 CSS 类来识别常见元素。此外，您的输入应该具有`name`属性。

# jquery - asp.net mvc 发布模型并指定小时

> ID：12536147
> 
> 赞同：0
> 
> 时间：2012-09-21T18:27:30.753
> 
> 标签：jquery, asp.net, asp.net-mvc, datetime

嗨，我有一个模型，它具有 Datetime 类型的属性。当我发布表格时，日期属性小时的时间应该是 23:59。哪种方式有意义。

*   创建自定义模型绑定器
*   在操作方法中更新日期
*   我正在使用 jQuery datetimepicker，它的格式是 mm.dd.yy，它不包括小时。

    ```
    [Authorize, HttpPost]
    public ActionResult Edit(int? id, OrderFormViewModel formModel)
    {
        var model = repository.GetShippingsById(id.Value);

        if (TryUpdateModel(model, "Order"))
        {
            model.Date = new DateTime(formModel.Order.Date.Year, formModel.Order.Date.Month, formModel.Order.Date.Day, 23, 59, 59);

            repository.Save();
            return RedirectToAction("Details", new { @id = model.Id });
        }

        return View(formModel);
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:33:56.973

如果问题只是您想添加小时（并且小时是常量值），您可以使用 ActionFilterAttribute，并在绑定设置小时的步骤中，因此在这种情况下，在您的肌动蛋白中，您将获得正确的日期值。

如果您使用自定义表单提交，您可以通过 JS 更新值，但在这种情况下，您应该注意本地化（如果它很重要，原因是）。

所以在我看来 ActionFilterAttribute 是更好的方法。

但是，如果您可以更新模型，则可以创建如下属性：

```
private DateTime _date 
public DateTime Date{
  set{
   this._date = value; 
    //ADD CODE TO ADD HOURS
   }
  get{return _date ;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:40:47.753

我会使用你的第二个选项 - 更新在行动。原因：

*   它在逻辑上属于控制器（视图不应该有与视图相关的计算）
*   在 C# 中做起来要简单得多
*   它更直接且更易于维护

但像往常一样，您的问题没有正确答案。可用性，可维护性，易于理解......你知道其余的......

希望这可以帮助。

# google-apps-script - 超出限制：每封邮件的电子邮件收件人。但只有 67 个收件人？

> ID：12536148
> 
> 赞同：0
> 
> 时间：2012-09-21T18:27:33.520
> 
> 标签：google-apps-script, gmail, quota

我不断收到超出限制：每封邮件的电子邮件收件人。尝试在我的谷歌脚本中使用 forward 命令时。我正在转发一条包含 67 个人密件抄送和一个人抄送的消息，字段为空。为什么会出现这种情况？这是我白天发送的第一封电子邮件，从我读到的关于限制的所有内容来看，这应该是有效的。谢谢！

（密件抄送字段是从带有逗号分隔的密件抄送转发列表的谷歌驱动器电子表格中导入的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-27T23:05:17.247

在 Apps 脚本中，有[一组配额](https://developers.google.com/apps-script/guides/services/quotas)用于防止滥用服务。您遇到了其中一种情况，即通过 Apps 脚本发送的任何电子邮件最多可以有 50 个收件人。

您仍然可以通过以下任一方式完成您正在尝试做的事情：

1.  将收件人列表分成一组以上并发送多封电子邮件（注意不要超过每天的电子邮件收件人配额），或者
2.  将您的收件人添加到邮件列表中，然后将一封电子邮件发送到列表中。

如果您经常需要更新同一组个人，#2 可能是您的最佳选择。否则只是分工。

# apache-flex - ResourceManager getString 不通过捆绑

> ID：12536149
> 
> 赞同：0
> 
> 时间：2012-09-21T18:27:43.510
> 
> 标签：apache-flex

在 Flex 中，有没有办法使用 ResourceManager 而无需通过捆绑包？

我们有许多我们加载和保存的包，但我们总是必须参考

```
bundleName = 'Bundle1';
token = 'token_test1'
parameters = null
locale = null
ResourceManager.getInstance().getString(bundleName,token,parameters,locale) 
```

我很想达到我们不需要传递捆绑包的地步。我知道我们已经加载了三个包，但我只想要令牌'x'。最后一个赢得类型的东西。除了将所有内容加载到同一个包中之外，还有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:29:03.923

我怀疑这是可能的，您总是必须传递捆绑包（我们更愿意将它们全部保存在一个文件中）。

仅供参考：[Lupo Manager](https://github.com/davidderaedt/lupo-studio/tree/master/LupoMgr)是管理资源文件的出色 (AIR) 工具。

# html - HTML 优化

> ID：12536152
> 
> 赞同：2
> 
> 时间：2012-09-21T18:27:56.037
> 
> 标签：html, css, optimization

我读了这个：

`<head>`浏览器在开始渲染之前检索 HTML 部分中请求的所有资源`<body>`。如果您将请求放在该`<body>`部分中，则页面呈现和下载资源可以并行发生。您应该将尽可能多的资源请求从该`<head>`部分移动到`<body>`

HTML 规范要求`<link>`并`<style>`标记 be in `<head>`，但浏览器不强制执行此操作

在我继续接受本书作者的建议之前——我很好奇这是否是真的所有现代常用的浏览器都不会强制链接在哪里，而且这样做是否会导致我遇到的任何其他问题不知道

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T18:31:08.367

**取自（阅读！）：**

[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

**将样式表放在顶部**

在 Yahoo! 研究性能时，我们发现将样式表移动到文档 HEAD 会使页面加载速度更快。这是因为将样式表放在 HEAD 中可以让页面逐步呈现。

**将脚本放在底部**

脚本引起的问题是它们会阻止并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:30:37.467

这在某种程度上是正确的。在您的页面上运行[YSlow](http://developer.yahoo.com/yslow/)，它会告诉您许多适用于您的页面的优化技术。

[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:42:11.713

我会遵循规范。无效文档将以不可预知的方式呈现。一定要把你的脚本放在正文中，就在结束正文标记之前。但将[链接](http://www.w3.org/TR/html4/struct/links.html#edef-LINK)和[样式](http://www.w3.org/TR/html4/present/styles.html#h-14.2.3)保留在头脑中。

如有疑问，请遵循规范。

# javascript - 获取我点击的元素相对于 jquery 集合的索引

> ID：12536154
> 
> 赞同：2
> 
> 时间：2012-09-21T18:28:02.523
> 
> 标签：javascript, jquery, click

我这里有一个小提琴，非常简单。

[http://jsfiddle.net/tnQne/](http://jsfiddle.net/tnQne/)

我的js在这里

```
$('section a').on('click', function() {
    alert($(this).index());
}); 
```

它总是返回 0，因为在节内只有 1 个锚标记。我想要的是它返回单击元素在 jquery 集合中的位置。因此，如果我单击最后一节锚点，它将返回 2（基于 0）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T18:30:34.853

您需要存储原始集合并调用[`index`](http://api.jquery.com/index)该集合。

```
var links = $('section a').on('click', function() {
    alert(links.index(this));
}); 
```

[jsFiddle](http://jsfiddle.net/tnQne/1/)

* * *

您的代码的问题在于，`$(this).index()`它将获取元素相对于其兄弟元素的索引。由于`a`元素没有任何兄弟姐妹，因此索引始终为`0`. 我链接的 API 页面解释了`index`如果 DOM 元素是参数，函数是如何工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:36:31.857

lonesomeday 有一个很好的方法，但另一种方法是：

```
$('section a').on('click', function(e) {
    alert( $.inArray(e.target, $('section a')) );
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/tnQne/2/)**

# java - 检查一个字符串是否在长度为 100,000 的更大字符串中可用

> ID：12536157
> 
> 赞同：-1
> 
> 时间：2012-09-21T18:28:08.347
> 
> 标签：java, c++, string

> **可能重复：**
> [最快的子字符串搜索算法是什么？](https://stackoverflow.com/questions/3183582/what-is-the-fastest-substring-search-algorithm)

如何检查字符串是否存在于 C++ 或 Java 中长度为 100,000 个字符的更大字符串中？

我知道一种方法`str.find("sub_string");`，但它无法处理这么大的字符串。最大执行时间为 1 秒。

我需要查找的子字符串也可以是 50,000！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T18:35:48.430

在 C 或 C++ 中，您可以只使用`malloc`来获取 100,000 个字节的块。用你的数据填充它。要大海捞针，可以使用以下代码：

```
void *mem_mem(void *haystack, int haystack_len, void *needle, int needle_len)
{
  const char *begin;
  const char *const last_possible
    = (const char *) haystack + haystack_len - needle_len;

  if (needle_len == 0)
    return (void *) &((const char *) haystack)[needle_len - 1];

  for (begin = (const char *) haystack; begin <= last_possible; ++begin)
    if (begin[0] == ((const char *) needle)[0] &&
    !memcmp ((const void *) &begin[1],
         (const void *) ((const char *) needle + 1),
         needle_len - 1))
      return (void *) begin;

  return NULL;
} 
```

在任何相当现代的平台上，这将在几分之一秒内找到 100,000 个字节中的任何子字符串。您可以修改它以简单地使用`char *`类型。如果您在同一个 haystack 中进行多次搜索，请尝试仅计算一次 haystack 长度。`strlen`不需要的时候不要打电话。

如果您的干草堆包含许多重复的第一个字符或针的字符，这将是非常不理想的。例如，在“aaaaaaaaaaaaaaaaaaaaaaaaaaaqaaaa..”中搜索“ab”（或者更糟的是，在“abababababababab...abc...”中搜索“abc”）会很慢。但是您没有为我们提供足够的细节来确定最佳实施方式。

问题的重点完全有可能是编写具有最佳最坏情况性能的算法。如果是这样，这可能不是“正确”的答案。可以想象一个所有 a 后面跟着一个 b 的大海捞针，以及一个由所有 a 后面跟着一个 b 组成的针。在那种情况下，这个算法可能需要很长时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T18:33:42.300

这在我适中的第一代英特尔 iMac 上几乎立即完成（4 毫秒）。我将搜索字符串放在两个 100,000 个字符的块之间，以防 java 向后搜索。

```
StringBuilder builder = new StringBuilder();
for (int i = 0; i < 100000; i++) {
    builder.append((char) i);
}
builder.append("sub_string");
for (int i = 0; i < 100000; i++) {
    builder.append((char) i);
}
String maxString = builder.toString();
long t1 = System.currentTimeMillis();
System.out.println(maxString.contains("sub_string"));
long t2 = System.currentTimeMillis();
System.out.println(t2 - t1); 
```

输出

```
true
4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:29:30.157

假设java：

```
String.contains("stringtofind"); 
```

是一种查找字符串是否存在于另一个字符串[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)中的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T18:31:51.650

在java中查找String内容的三种方式。

```
String.contains("charSequence");
String.contentEquals("charSequence");
String.contentEquals("StringBuffer"); 
```

并且您可以通过 Java 规范获得最大长度的字符串`Integer.MAX_VALUE`（总是）。`2147483647 (2^31 - 1)`

# ios-simulator - Xcode 4.5 4 英寸模拟器不允许“移动和缩放”控件工作

> ID：12536160
> 
> 赞同：1
> 
> 时间：2012-09-21T18:28:30.700
> 
> 标签：ios-simulator, uiimagepickercontroller, ios6, iphone-5

我正在尝试更新我的应用程序以使用新的 iPhone 5。它使用允许您移动和缩放图像的图像选择器 (allowsEditing = TRUE;)。然而，当我在 4 英寸模拟器上运行应用程序并使用选取器时，我可以移动图像并对其进行缩放，但选取器底部的默认“取消”和“选择”按钮没有响应。

任何想法为什么会这样？应用程序在运行 iOS 6 的 iPhone 4 上运行良好

****已解决** - 请参阅下面的链接

[https://stackoverflow.com/a/12418714/1618071](https://stackoverflow.com/a/12418714/1618071)

# maven - Maven 可以知道何时安装父 pom 或告诉我何时需要它吗？

> ID：12536165
> 
> 赞同：1
> 
> 时间：2012-09-21T18:28:50.233
> 
> 标签：maven

允许构建单个模块并确保将对父 pom 的更改上传到本地存储库的 maven 方式是什么？

假设我有三个模块：一个父母，两个孩子（dbmod，appmod）

*   父级：dependencyManagement 定义 jdbc-foo 1.5
*   dbmod: dependencies 定义 jdbc-foo 从父级获取版本
*   appmod：依赖于 dbmod

**情况**

1.  我从使用 jdbc-foo 1.5 的父级获取 parent-pom，使用 jdbc-foo 1.5 和 appmod 的 dbmod 构建。
2.  我将源代码控制和父 pom 更改更新为 jdbc-foo 1.6
3.  我在 dbmod 目录中构建
4.  我在 appmod 目录中构建

    appmod 从本地存储库获取 dbmod 并使用父 pom maven 问题的本地 repo 版本：“[警告] ...dbmod:jar:3.5.0-SNAPSHOT 的 POM 无效，传递依赖项（如果有）将不可用：为 dbmod:3.5.0-SNAPSHOT 构建有效模型时遇到了 1 个问题"

    编译失败，因为我的代码依赖于对 jdbc-foo 1.6 更改的访问

**选项**

我可以通过以下方式解决问题：

*   手动安装父pom文件的问题，（mvn install-file ...）
*   从父**级不必要的建筑物构建：我一直在构建所有模块**
*   从父级构建选择所需的项目并使用also-make (mvn -am -pl :appmod ...) **不必要的构建：我必须一直构建所有的部门**

第一个选项是个问题，因为我需要知道我需要这样做。第二个和第三个选项还要求我弄清楚我需要这样做，或者一直构建所有的 deps / all mods，这在大型系统中可能是一个问题。

如果有一个配置设置会强制父安装而不是“-am -pl :mod”，或者这是处理这种情况的“maven 方式”？

谢谢

彼得

（如果 maven 不能这样做，那么我可以纠正一个包装脚本，该脚本检查父级与本地 repo 父级并强制安装差异）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:44:28.443

从父 pom 构建就可以了。这是与您提到的反应器选项一起推荐的方式。如果你不运行 clean 它不会重复不必要的努力。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T01:11:07.433

Maven 方式是始终从父级构建。构建所有模块的问题到底是什么？如果代码没有变化，我很确定 maven 不会**真正重建子模块，所以它非常快。**但即使是这样，为什么这对你来说是个问题？

要尝试的另一件事是`<relativePath>`在模块的父声明中使用。这样 maven 将从文件系统而不是从已安装的父工件中获取父 pom

```
<parent>
  <groupId>com.mycompany.app</groupId>
  <artifactId>myapp</artifactId>
  <version>${app.version}</version>
  <relativePath>.../parent/pom.xml</relativePath>
</parent> 
```

# opengl - 实现每个顶点的漫反射着色器，不起作用

> ID：12536166
> 
> 赞同：0
> 
> 时间：2012-09-21T18:28:51.120
> 
> 标签：opengl, glsl

我正在实现 OpenGL 4.0 Shading Language Cookbook 中的每个顶点的漫反射着色器，但为了适合我的项目进行了轻微修改。

这是我的顶点着色器代码：

```
layout(location = 0) in vec4 vertexCoord;
layout(location = 1) in vec3 vertexNormal;

uniform vec4 position; // Light position, initalized to vec4(100, 100, 100, 1)
uniform vec3 diffuseReflectivity; // Initialized to vec3(0.8, 0.2, 0.7)
uniform vec3 sourceIntensity; // Initialized to vec3(0.9, 1, 0.3)

uniform mat4 projection;
uniform mat4 view;
uniform mat4 model;

out vec3 LightIntensity;

void main(void) {
    // model should be the normalMatrix here in case that
    // non-uniform scaling has been applied.
    vec3 tnorm = normalize(vec3(model * vec4(vertexNormal, 0.0)));

    // Convert to eye/camera space
    vec4 eyeCoordsLightPos = view * model * position;
    vec4 eyeCoords = view * model * vertexCoord;
    vec3 s = normalize(vec3(eyeCoordsLightPos - eyeCoords));

    // Diffuse shading equation
    LightIntensity = sourceIntensity * diffuseReflectivity * max(dot(s,tnorm), 0.0);

    gl_Position = projection * view * model * vertexCoord;
} 
```

这是我的片段着色器：

```
in vec3 LightIntensity;

layout(location = 0) out vec4 FragColor;

void main(){
    FragColor = vec4(LightIntensity, 1.0);
} 
```

我正在渲染一个盒子，我有所有法线的值。然而，盒子只是黑色的。假设我的制服在渲染时设置正确，我的着色器代码有什么明显错误吗？

*与书中的代码相比，我所做的更改是我将模型矩阵用作普通矩阵，并且我在模型空间中传递了我的光照位置，但在着色器中将其转换为相机空间。*

渲染图像，不要被作为纹理的阴影背景混淆： ![渲染图像，不要被作为纹理的阴影背景混淆。](../Images/dc248d850021064f704c02c4e663c558.png)

`FragColor = vec4(f_vertexNormal, 1.0);`使用片段着色器 渲染时的图片：![在此处输入图像描述](../Images/8bcc94275aa18bdb439bfe590a8d3ceb.png)

在眼睛空间建议中使用 tnorm 更新代码：

```
void main(void) {
    // model should be the normalMatrix here in case that
    // non-uniform scaling has been applied.
    vec3 tnorm = normalize(vec3(model * vec4(vertexNormal, 0.0)));

    // Convert to eye/camera space
    vec3 eyeTnorm = vec3(view * vec4(tnorm, 0.0));
    vec4 eyeCoordsLightPos = view * position;
    vec4 eyeCoords = view * model * vertexCoord;
    vec3 s = normalize(vec3(eyeCoordsLightPos - eyeCoords));

    // Diffuse shading equation
    LightIntensity = sourceIntensity * diffuseReflectivity * max(dot(s,eyeTnorm), 0.0);

    gl_Position = projection * view * model * vertexCoord;
    f_vertexNormal = vertexNormal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:37:41.953

除了我上面的评论之外，您正在使用一个带有眼睛空间向量`dot`的世界空间向量。您应该只在同一空间中点向量。因此，您可能还需要考虑转换为眼睛空间。`tnorm``s``tnorm`

# regex - 正则表达式适用于 Splunk rex 中除 1.00 之外的所有版本

> ID：12536171
> 
> 赞同：0
> 
> 时间：2012-09-21T18:29:10.693
> 
> 标签：regex, currency, splunk, money-format

我在 splunk 中使用 rex 从包含金额加上 3 位货币代码的字段中提取十进制金额。两个值由空格分隔。

例子：

```
200.00 INR
2390.11 INR
1.00 INR
1789.00 INR 
```

我正在使用 rex 命令内联：

```
rex field=TxnAmt "(?<TxnAmt>[^\s]\d+.\d+) 
```

使用这个命令大部分是成功的，但是我的错误是在 1.00 INR 上起作用的。

结果：

```
200.00
2390.11
1.00 INR
1789.00 
```

任何想法都会有所帮助。完全免责声明：我不是一个完整的程序员，我也不渴望成为，但我确实喜欢在 Splunk 上编写正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:36:19.737

您当前的正则表达式存在一些问题，请尝试更改`[^\s]\d+.\d+`为以下内容：

```
\d+\.\d+ 
```

您当前的正则表达式不会转义`.`，因此`.`您的正则表达式中的实际将匹配任何字符。我不太确定你要做什么`[^\s]`，因为这将匹配一个非空白字符，而且看起来你只对数字感兴趣。

您当前的正则表达式在“1.00 INR”上失败，因为 与`1`匹配`[^\s]`，然后您的正则表达式查找一个或多个数字，但下一个字符是`.`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:36:46.480

好吧，我不了解 rex，但如果它只是您需要的普通 ole 正则表达式，这将起作用：

```
\d+\.\d+(?= [a-zA-Z]{3}) 
```

1 个或多个数字，后跟一个小数，后跟 1 个或多个数字，并确保它后面有一个空格和 3 个字母。

# python - 尝试运行 celeryd_multi 时出现属性错误

> ID：12536174
> 
> 赞同：2
> 
> 时间：2012-09-21T18:29:24.117
> 
> 标签：python, django, celery, django-celery

我`AttributeError: 'module' object has no attribute 'getrlimit'`在尝试手动启动 celeryd_multi 时遇到了问题，无论是手动（`python manage.py celeryd_multi...`）还是通过 init.d 作为守护进程。

*   我可以手动启动 celeryd`python manage.py celeryd`
*   退出 /etc/default/ celeryd`CELERYD_MULTI`会导致它崩溃并出现以下错误：`usr/bin/python: No module named celery.__main__; 'celery' is a package and cannot be directly executed`
*   手动启动 celeryd_multi 也会导致 'getrlimit' 属性错误

这是我的 /etc/default/celeryd 文件的样子：

```
CELERYD_NODES="w1"
CELERYD_CHDIR="/code/project"

CELERYD_MULTI="python $CELERYD_CHDIR/manage.py celeryd_multi"

CELERYCTL="$CELERYD_CHDIR/manage.py celeryctl"

CELERYD_OPTS="--time-limit=300 --concurrency=8"

CELERY_CONFIG_MODULE="celeryconfig"

CELERYD_LOG_FILE="/var/log/celery/celeryd.log"
CELERYD_PID_FILE="/var/run/celery/celeryd.pid"

CELERYD_USER="celery"
CELERYD_GROUP="celery"

export DJANGO_SETTINGS_MODULE="project.settings" 
```

下面是堆栈跟踪：

```
> 启动节点...
    > w1.ip-10-28-232-109：好的
ubuntu@ip-10-28-232-109:~$ Traceback（最近一次通话最后一次）：
  文件“/code/project/manage.py”，第 14 行，在
    执行管理器（设置）
  文件“/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py”，第 438 行，在 execute_manager
    实用程序.execute()
  文件“/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py”，第 379 行，在执行
    self.fetch_command(子命令).run_from_argv(self.argv)
  文件“/usr/local/lib/python2.7/dist-packages/djcelery/management/commands/celeryd_detach.py​​”，第 26 行，在 run_from_argv
    detached().execute_from_commandline(argv)
  文件“/usr/local/lib/python2.7/dist-packages/celery/bin/celeryd_detach.py​​”，第 146 行，在 execute_from_commandline
    **vars(选项)))
  分离中的文件“/usr/local/lib/python2.7/dist-packages/celery/bin/celeryd_detach.py​​”，第 37 行
    分离（日志文件、pidfile、uid、gid、umask、working_directory、fake）：
  文件“/usr/local/lib/python2.7/dist-packages/celery/platforms.py”，第 248 行，打开
    对于 fd 反向（范围（get_fdmax（默认 = 2048）））：
  文件“/usr/local/lib/python2.7/dist-packages/celery/platforms.py”，第 83 行，在 get_fdmax
    fdmax = resource.getrlimit(resource.RLIMIT_NOFILE)[1]
AttributeError：“模块”对象没有属性“getrlimit”

```

# .net - Clickonce 仅使用 ftp

> ID：12536179
> 
> 赞同：1
> 
> 时间：2012-09-21T18:29:59.800
> 
> 标签：.net, clickonce

当我尝试发布时，更新要求我输入 http url。无论如何要通过 Clickonce 发布更新，但只指定 FTP 而不是 HTTP 链接？另外，我只有 FTP 的读取权限。

这是可能的还是我需要更多数据？

# oracle - 这个 Oracle CTL 文件或数据有什么问题？

> ID：12536182
> 
> 赞同：1
> 
> 时间：2012-09-21T18:30:05.930
> 
> 标签：oracle, oracle10g, oracle11g, sql-loader

我的数据是这样的：

```
ID,SCORE_DATE,TYPE,SCORE,RAW_SCORE,RANK
A1234,2012-09-05 23:59:59,FOOTBALL_TEAM_MIDDLE_AND_OLD_1234,10,0.123,1
A5678,2012-09-05 23:59:59,FOOTBALL_TEAM_MIDDLE_AND_OLD_1234,20,0.456,2 
```

CTL 文件：

```
load data           
infile 'E:\Data\Sample.csv'
badfile 'E:\Data\Sample.bad'
APPEND into table TABLE1    
fields terminated by "," optionally enclosed by '"'
TRAILING NULLCOLS               
(   
 DRIVER,
 STARTDTE "to_date(SUBSTR(:STARTDTE,1,10),'YYYY-MM-DD') - 27",
 TYPE  CONSTANT 'FOOTBALL',
 SCORE   ,
 RANKSCORE ":SCORE",
 RANK    ,
 ENDDTE "to_date(SUBSTR(:STARTDTE,1,10),'YYYY-MM-DD')",
 LOADDT     "sysdate"
) 
```

这是我的表结构：

```
CREATE TABLE "TABLE1"
  (
    "DRIVER" VARCHAR2(50 BYTE),
    "STARTDTE" DATE,
    "SCORE"           NUMBER,
    "ENDDTE" DATE,
    "TYPE" VARCHAR2(20 BYTE),
    "RANK"       NUMBER,
    "RANKSCORE"  NUMBER,
    "LOADDT"     VARCHAR2(20 BYTE)
  ); 
```

对于加载的每一行，我都会收到一条错误消息：记录 3：拒绝 - 表 TABLE1 列 SCORE 上的错误。ORA-01722: 无效号码

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:03:40.567

1.  TYPE 是一个 oracle 关键字，最好不要使用这样的列名。

2.  表定义中没有 TYPE 列。如果该列存在，则在读取所有字段后，将常量赋值移动到控制文件的末尾。

    STARTDTE "to_date(SUBSTR(:STARTDTE,1,10),'YYYY-MM-DD') - 27", **TYPE CONSTANT 'FOOTBALL',** SCORE ,

如果您试图忽略具有“FOOTBALL_TEAM_MIDDLE_AND_OLD_1234”作为数据的字段，则需要添加

```
THIRD_COLUMN FILLER, 
```

到您的控制文件以忽略该数据。就像是..

```
load data           
infile 'E:\Data\Sample.csv'
badfile 'E:\Data\Sample.bad'
APPEND into table TABLE1    
fields terminated by "," optionally enclosed by '"'
TRAILING NULLCOLS               
(   
 DRIVER,
 STARTDTE "to_date(SUBSTR(:STARTDTE,1,10),'YYYY-MM-DD') - 27",
 THIRD_COLUMN FILLER,
 SCORE   ,
 RANKSCORE ":SCORE",
 RANK    ,
 ENDDTE "to_date(SUBSTR(:STARTDTE,1,10),'YYYY-MM-DD')",
 LOADDT     "sysdate"
 TYPE  CONSTANT 'FOOTBALL',
) 
```

应该解决您遇到的错误。

# javascript - 加载前 20 张图片，然后显示页面

> ID：12536183
> 
> 赞同：1
> 
> 时间：2012-09-21T18:30:06.873
> 
> 标签：javascript, jquery

我正在使用 jQuery Booklet Plugin 并且有一本很好用的小册子。但是我有一个挂断。这本小册子相当大，有很多图片（大约 50 张），第一次访问页面时加载速度很慢。我想做的是获取我目前拥有的脚本并加载前 20 张图像（大致）然后显示小册子，而其余图像在后台加载。这是我正在使用并想修改它的脚本：

***JS***

```
$(function() {
  var $mybook       = $('#mybook');
  var $bttn_next        = $('#next_page_button');
  var $bttn_prev        = $('#prev_page_button');
  var $loading      = $('#loading');
  var $mybook_images    = $mybook.find('img');
  var cnt_images        = $mybook_images.length;
  var loaded            = 0;
  //preload all the images in the book,
  //and then call the booklet plugin

  $mybook_images.each(function(){
    var $img    = $(this);
    var source  = $img.attr('src');
    $('<img/>').load(function(){
      ++loaded;
      if(loaded == cnt_images){
        $loading.hide();
        $bttn_next.show();
        $bttn_prev.show();
        $mybook.show().booklet({
         //Booklet Options
        });
      }
    }).attr('src',source);
  });

}); 
```

我将如何修改此代码以加载前 20 张图像，然后显示小册子？请提供例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:34:21.047

查看您发布的逻辑，您可以更改`cnt_images = 20`. 如果有其他依赖于此的逻辑，那么当您检查该`loaded`值时，不要检查它，而是检查`cnt_images`它`20`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:33:53.917

我需要查看 HTML 才能确定，但​​更改定义的行`cnt_images`应该可以解决问题。更改此行：

var cnt_images = $mybook_images.length;

这么说：

var cnt_images = 20;

# php - 从 Python 1:1 调用 PHP

> ID：12536190
> 
> 赞同：0
> 
> 时间：2012-09-21T18:30:30.347
> 
> 标签：php, python, command-line-interface, splunk, passthru

我们正在使用 Splunk（一种分析机器数据（如日志文件）的工具）并在 PHP 中有一个应用程序。对于某些数据，我们需要在 php（基于 CLI）中调用我们的应用程序。不幸的是，Splunk 只支持 Python 调用。
有没有一种简单的方法可以使用相同的参数对 1:1“转发/调用”php 并返回输出，如“passthru”。我只找到了所谓的子进程模块的部分解决方案，但我的 python 经验为零，所以无法让它工作。

例如，splunk 调用：
`python external_lookup.py argument1 argument2 argument3`
- 然后 python 脚本应该调用（使用给 python 的 CLI 参数）：
`php external_lookup.php argument1 argument2 argument3`
- 然后 php 写入它的输出
- Python 捕获该输出并自己输出

非常感谢任何帮助，或者更好的工作示例脚本。

在此先感谢，
文斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:43:32.313

`Popen`从子流程模块使用：

```
import sys
from subprocess import Popen
output = subprocess.Popen(['php', 'path/to/script.php'] + sys.argv[1:], stdout=subprocess.PIPE).communicate()[0] 
```

`sys.argv[1:]`包含除了 python 脚本本身的名称之外的所有命令行参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:58:36.793

使用`subprocess.call`：

```
import sys, subprocess
sys.exit(subprocess.call(['php', sys.argv[0].replace('.py', '.php')] + sys.argv[1:])) 
```

编辑：使 Python 脚本返回 PHP 脚本返回的值。

# c# - 页面回发后加载用户控件数据？

> ID：12536193
> 
> 赞同：2
> 
> 时间：2012-09-21T18:30:38.897
> 
> 标签：c#, asp.net

我有一个页面，用户可以在其中更新他们的用户信息（比如他们的名字）。我在这个页面上还有一个用户控件，它显示了很多信息，包括用户的名字。

我遇到的问题是，当我更改此页面上的名字时，保存数据后用户控件没有更新。

这是我的前端：

```
<UC:LeftNav ID="leftNav" runat="server" />

<asp:TextBox ID="txtFirstName" runat="server"></asp:TextBox>

<asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" /> 
```

我的按钮单击事件以保存用户信息：

```
protected void btnSave_Click(object sender, EventArgs e)
{
    ...
    user.FirstName = txtFirstName.Text();
    user.Save();
    ...
} 
```

我的显示用户信息的用户控件：

```
protected void Page_Load(object sender, EventArgs e)
{
    ...
    lblFirstName.Text = user.Firstname;
    ...
} 
```

我通过调试器，发现`btnSave_Click`我页面上的事件发生*在*`Page_Load`我的用户控件事件之后。

在我将用户数据加载到用户控件中*之前*，有没有办法让`btnSave_Click`事件发生？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:32:10.027

不，在引发事件时无法更改。但是您可以将您的用户加载代码放入一个`Bind`方法中并从您的方法中调用它`btnSave_Click`。

在`leftNav`用户控制中：

```
public void Page_Load(object sender, EventArgs e)
{
    if(!IsPostback)
    {
        BindUserInfo();
    }
}

public void BindUserInfo()
{
    //Binding code here
} 
```

在页面上：

```
public void btnSave_Click(object sender, EventArgs e)
{
    //Do save work
    leftNav.BindUserInfo();
} 
```*

# ruby-on-rails - Ruby on rails：建模外键关系。

> ID：12536194
> 
> 赞同：0
> 
> 时间：2012-09-21T18:30:41.773
> 
> 标签：ruby-on-rails, model, foreign-key-relationship

在我的应用程序中，我有以下模型`List`：`Item`和`Category`.

每个项目`belong_to`一个列表。每个项目`belongs_to`一个类别。

每个项目列表还需要以某种方式与多个类别相关联。这意味着如果用户创建一个类别，它将有一个`list_id`分配给它，该分配等于`id`创建该类别时用户正在处理的列表。这样，当用户决定摆脱列表时，我也可以摆脱为该列表创建的所有自定义类别。问题是我还希望有一些“默认”类别：可用于所有列表的类别。我不确定如何建模`lists`和之间的关系`categories`。`belongs_to`对我不起作用，因为“默认”类别并不真正属于任何特定列表，它们属于所有列表。

对于如何处理这种关系的任何建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:07:14.410

你肯定需要`has_many`关系双方的`Category`关系`List`。

您可以将作为“默认值”的类别名称保留在类别模型内的常量中，或者类别可以具有布尔属性，以便您知道是否删除它。

要在删除列表时删除类别，您可能需要编写一个自定义方法，该方法可以作为`after_destroy`List 模型上的回调运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:57:00.727

您想为 Category 和 List 模型设置多对多关系。要做到这一点，这就是你要做的

```
class List < ActiveRecord::Base
  has_many :categorizations, dependent: :destroy
  has_many :categories, :through => :categorize
end

class Categorization < ActiveRecord::Base
  belongs_to :category
  belongs_to :list
end 

class Category < ActiveRecord::Base
  has_many :categorizations, dependent: :destroy
  has_many :lists, :through => :categorizations
end 

class Item < ActiveRecord::Base
  belongs_to :category
  belongs_to :list
end 
```

这将创建第三个表来跟踪所有模型之间的关系。Ryan Bates 在这个主题上有一个很棒的[railscast](http://railscasts.com/episodes/47-two-many-to-many)，你应该去看看。

然后`dependent: :destroy`将确保如果一个被删除，那么关系也会被删除，然后为了确保从该列表中删除其他类别，您可以使用 before_destroy 或 after_destroy 方法。

# html - 如何使除文本区域和输入之外的 html 元素不可选择？

> ID：12536197
> 
> 赞同：2
> 
> 时间：2012-09-21T18:30:46.117
> 
> 标签：html, css

如何使元素不可选择但允许选择文本和输入？

我尝试使用 -moz-user-select 之类的 css，但没有获得令人满意的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:33:00.210

正如这里所说：[http://htmlcss.wikia.com/wiki/-moz-user-select](http://htmlcss.wikia.com/wiki/-moz-user-select)，`-moz-user-select: none`应该可以完成这项工作。

# jenkins - 每天或每周只启动一次 Sonar 就足够了吗？

> ID：12536199
> 
> 赞同：3
> 
> 时间：2012-09-21T18:31:01.293
> 
> 标签：jenkins, sonarqube

我一直在深入研究 Sonar 的最佳实践。共识似乎是声纳每天或每周只发射一次，例如在夜间。但是，如果使用 Jenkins 之类的 CI 服务器会怎样？Jenkins 构建在每个 SVN 提交上，运行单元测试，部署到登台环境，运行 Selenium 测试等。按照我的理解，如果 Sonar 每天/每周只启动一次，所有这些附加信息都会丢失。很可能所有团队的代码问题和失败的测试都在下午或周末得到解决。声纳可能在周日晚上或每晚运行。该应用程序是预先构建和测试的，然后基于该信息执行声纳分析。很可能所有测试都通过了，存储库中没有留下任何主要的代码问题，并且 QA 团队错误地认为没有问题，因为所有 Sonar 报告都显示为绿色。但是，在白天/一周内，该项目可能会因构建损坏等而一团糟，但从未在声纳报告中显示:)

我在这里遗漏了什么，还是应该在每次提交时实际执行 Sonar，或者至少每小时执行一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:45:17.230

这完全取决于您的需求和团队开发新代码、测试新功能并将新功能集成到项目中的速度。

如果你有一个带有时间盒的网络冲刺，可能是在周末，周一开始的版本是稳定的，因此没有错误，或者只有几个错误。如果您的 sprint 时间框是一周，我强烈建议您每天至少一次，这样您就可以在运行单元测试等时发现缺陷，从而为您的项目质量提供良好的现实。

我会推荐这些做法：

1.  使用 Cobertura 之类的代码覆盖率，每天至少运行一次单元测试；
2.  使用 PMD、checkstyle 等代码分析。如果可能，创建适用于您的架构的您自己的规则，从而在质量方面为您的项目创造更多价值。
3.  考虑您的 Sprint 时间框，为您在声纳中的构建选择一个频率，并安排一个仅在您真正需要时运行它的 cron 作业（因为它很耗时）。

这些是我在项目中使用的实践，但您必须密切关注您的需求，因为该工具 (Sonar) 旨在帮助您了解有关项目质量的信息，从而了解您的架构、团队和工程实践.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:43:06.877

Sonar 收集的大部分数据是静态分析信息（复杂性、代码风格违规等），除非代码被重构，否则在构建之间不会有太大变化，因此每天运行一次就足够了。还要考虑 Sonar 分析会增加您的构建执行时间 - 在我的工作中，它可以为构建增加 2 或 3 分钟，而首先编译和测试只需要很长时间。

如果您想为每个 CI 构建收集代码覆盖率和测试结果，您可以在 Jenkins 中执行此操作，并将 Jenkins 用作构建健康状况的早期预警系统，让 Sonar 对整体代码质量和可维护性进行更长期的分析。

正如您在问题中提到的那样，您仍然可以在 Sonar 中对代码覆盖率和测试结果进行趋势分析，只是不会为每个 CI 构建提供它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T10:11:46.783

每天/每周运行一次声纳不应被视为“最佳实践”。考虑到可用的硬件和质量测量的质量，这可能是目前最好的，但正如你所说，在 CI 环境中，每次提交都需要反馈（实际上也应该在提交中包含它，就像使用 Smalltalk 和 MOOSE 一样在每个方法保存）。我目前正在处理的部分的代码复杂性和测试覆盖率变化是我喜欢的一些可视化/测量，其粒度比每天一次要小得多。

Sonar 为您的构建增加了很多时间是一个实现问题，而不是基本问题，并且可以通过多种不同的方式来解决：缓存信息、在慢速和快速测量之间分割、在模块中分割、异步运行等。

# c# - 线程在哪里结束？

> ID：12536202
> 
> 赞同：1
> 
> 时间：2012-09-21T18:31:08.693
> 
> 标签：c#, multithreading

我目前正在学习 c# 并想知道它在哪里结束，是在`t.Start`还是从那里继续，或者我应该从 threadMethod 调用其他方法？提前致谢。

```
private void startThread()
{
    Thread t = new Thread(new ThreadStart(threadMethod));
    t.Start();
}

private void threadMethod()
{
    //do stuff
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:33:35.220

线程在其方法完成或失败时停止，在您的情况下是 threadMethod()。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:33:57.723

线程*通常*`threadMethod`在停止执行时结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:34:19.897

当 threadMethod 结束时，线程结束。请注意，通过异步执行 threadMethod，startThread() 将在 threadMethod() 之前完成。

在继续使用 c# 之前先研究多线程概念可能是一个好主意（或者至少两者一起做）它会让你学习起来更容易和更快

祝你好运

# php - 具有 rowGrouping 插件 aoColumns 定义的数据表失败

> ID：12536208
> 
> 赞同：0
> 
> 时间：2012-09-21T18:31:32.893
> 
> 标签：php, jquery, html, css, datatable

好的，所以我在桌子上工作。我在这个特定的表上使用 rowGrouping。到目前为止，我在数据表方面没有遇到过严重的问题。

我正在通过 php 渲染我的表，然后在加载 DOM 时我在其上调用数据表。所以它创造了所有花哨的桌子。哪个花哨的部分效果很棒，而且大部分都符合预期。然而。我想通过`aoColumns`对象隐藏列，我想禁用对其他人的排序，以及所有其他。其中我似乎做不到。所以我不确定在这种情况下该怎么做

这是我对行分组使用的 JavaScript/数据表调用。

```
 var oTable = $('#orgListings').dataTable({
                            "bAutoWidth": true,
                            "bRetrieve": true,
                            "bPaginate": false,
                            "aoColumns":
                            [
                                { "bSortable": false },
                                { "bSortable": false },
                                { "bSortable": false },
                                { "bSortable": false },
                                { "bSortable": false },
                                { "bSortable": false },
                                { "bSortable": false },
                                { "bSortable": false },
                                { "bSortable": false }
                            ]
        }).rowGrouping({
                iGroupingColumnIndex: 1,
                sGroupingColumnSortDirection: "asc",
                iGroupingOrderByColumnIndex: 0,
                bExpandableGrouping: true, 
                bExpandSingleGroup: true,
                iExpandGroupOffset: -1
        });
        $('#orgListings_length, #orgListings_filter').hide()
        $(window).bind('resize', function(){oTable.fnDraw();}); 
```

我的桌子很相似，但不完全是

```
<table>
  <thead>
     <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
     </tr>
  </thead>
  <tbody>
     <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
     <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
     <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
  </tbody>
</table> 
```

再次，行分组似乎工作正常。但是里面的任何东西`dataTable({...})`似乎都没有粘住。尽管是错误的分页仍然显示，自动宽度，尽管是真的不会坚持将所有列变成不可排序的列不起作用。

所以我想知道我做错了什么？我该如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:36:34.727

你可能想做这样的事情：

```
var nonSortableColumns = new Array(0, 1, 2, 3); 
```

然后

```
 "aoColumnDefs": [ 
            { "bSortable": false, "aTargets": nonSortableColumns }
        ], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:15:45.233

终于发现了我的问题。显然我从themeforest.net 购买的“白标”模板的作者 `$content.datatable({sPagination:"full_numbers"});` 在全球化的script.js 中使用了一些代码。这是在我的桌子上运行的，然后其他任何东西都让我在`$.datatable`电话中自定义的任何东西在任何桌子上都毫无用处。我在找到它后评论了这一点，并且一切都按数据表的预期工作。

谢谢 Todd Gibson，您的建议非常有助于为我的整体代码库添加一点优化，不幸的是，这并不能解决我最初的问题，但您确实在其他方面帮助了我。

# php - 在 POST 之后处理丢失跟踪哪个用户 ID 请求密码重置的方法

> ID：12536210
> 
> 赞同：0
> 
> 时间：2012-09-21T18:31:46.077
> 
> 标签：php, security, passwords

我正在写一个密码重置页面。

逻辑：

1.  用户请求密码
2.  它通过附加到 /reset/ 的唯一字符串（过期）发送到他们的电子邮件`$string`
3.  在我的控制器中的页面上，我检查字符串是否与数据库中的一个匹配，如果是，那么我将其与 userId 匹配
4.  如果是这样，我允许他们输入新的通行证
5.  如果他们 POST 到同一个控制器并搞砸并输入 2 个不正确的密码，我会丢失带有重置字符串的原始 URL，所以现在我不知道要在数据库中更新哪个用户

我的选择（我能想到的）：

1.  在会话中设置字符串和用户 ID 并在控制器中查找（并确保在成功重置通行证后将其清除）
2.  在上面的第 4 步中，我将在表单的隐藏输入字段中添加用户 ID，并使用该 ID 进行 POST 以检查它是哪个用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:50:16.853

我会这样做：

1.  用户以表格形式提供他的电子邮件并请求重置密码。
2.  您检查数据库中与电子邮件匹配的 uid（用户 id）。
3.  如果用户存在，您创建一个这样的网址： [http ://domain.com/password_reset.php?uid=xxxx&key=fdhgf5115d4f15dfdb5fdf5](http://domain.com/password_reset.php?uid=xxxx&key=fdhgf5115d4f15dfdb5fdf5)
4.  密钥由 this 生成：$key = md5(uniqid())
5.  您将密钥存储到具有 uid 的会话中： $_SESSION['pass_res']['key'] = $key; $_SESSION['pass_res']['uid'] = $uid;
6.  当用户单击 URL 时，您检查是否： $_SESSION['pass_res']['uid'] == $_GET['uid'] 并且如果 $_SESSION['pass_res']['key'] == $_GET[ '钥匙']
7.  如果它们匹配，您允许用户更改他的密码
8.  在此之后 unset($_SESSION['pass_res'])
9.  此外，如果用户关闭他的浏览器会话过期

通过这种方式，只有具有请求重置密码的会话 ID 的用户才能更改其密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:41:30.987

您在选项 2 中的解决方案（将令牌添加到隐藏的输入）是有道理的，或者您可以将表单发布到相同的 URL（其中包含令牌的那个，这样您就不会丢失它）并构建您的逻辑以根据表格是否已张贴。

逻辑可能如下所示：

*   用户点击 site.com/password/reset/token_here 作为 GET 或 POST
*   从数据库中的 URL 检查令牌以查看其是否有效和当前
*   如果请求方法是 POST，请检查匹配的安全密码
    *   如果密码不匹配，则将错误消息分配给 HTML 视图
    *   如果密码匹配，更改密码，删除令牌，重定向到成功页面
*   向用户显示表单 - 表单发回带有令牌的相同 URL

# django - Django 在管理站点中添加自定义视图

> ID：12536212
> 
> 赞同：1
> 
> 时间：2012-09-21T18:31:50.337
> 
> 标签：django, django-admin

我正在使用 Django 1.4。我想在管理页面中添加一个队列，它应该看起来像管理 change_list 页面。我尝试了很多博客和其他论坛，但没有得到我想要的。如何在具有以下功能的管理页面中添加自定义视图，

*   我自己的查询集
*   应该看起来像管理员更改列表页面，其中包含所有可用功能。

模型.py

```
class Broker(models.Model):
    user = models.OneToOneField(User)
    agency = models.CharField(max_length=100) 
```

网址.py

```
 url(r'^admin/broker_list/$', 'room.admin_views.broker_list'),
    url(r'^admin/', include(admin.site.urls)), 
```

admin_views.py

```
def broker_list(request):
    return render_to_response(
        "admin/broker_list.html",
        {'broker_list' : Broker.objects.filter(user__is_active=False)},
        RequestContext(request, {}),
    )
broker_list = staff_member_required(broker_list) 
```

broker_list.html

```
{% extends "admin/base_site.html" %}
{% load admin_urls %}

{% block title %}List of pending agent{% endblock %}

{% block content %}
    {{broker_list}}
{% endblock %} 
```

使用上述代码，我可以访问链接 /admin/broker_list/ ，在那里我可以看到查询集。但我不知道如何生成或扩展类似 admin chagelist 页面。

即使我厌倦了 Django ModelAdmin get_urls 方法，但[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls)指出 my_view 应该返回 HttpResponse，因此它只呈现原始对象。作为参考，我在下面分享了我的代码，

管理员.py

```
class ItemAdmin(admin.ModelAdmin):
    model = Broker
    def admin_list_broker(self, request):
        print "yes iam here"
        return HttpResponse("Hello!")
        #return HttpResponseRedirect(
        #        reverse("admin:account_agent_changelist",)
        #)
    def get_urls(self):
        from django.conf.urls.defaults import *
        urls = super(ItemAdmin, self).get_urls()
        my_urls = patterns('',
            url(
                r'broker_list',
                self.admin_site.admin_view(self.admin_list_broker),
                name='admin_list_broker',
            ),
        )
        print my_urls + urls
        return my_urls + urls

admin.site.register(Broker, ItemAdmin) 
```

请帮助我在上述方法中的任何人中实现要求。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:49:46.697

与其创建自定义管理员更改视图，不如通过扩展内置视图来解决此问题，django 管理员提供了许多挂钩来促进这一点，这是我的想法：

1.  修改[默认查询集](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.queryset)，但我建议您不要这样做，因为您失去了编辑查询集未返回的对象的能力。
2.  创建一个[自定义过滤器](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)来显示您的“代理列表”查询集 - 我推荐这个，因为它会进一步为您提供 GET url 查询，您可以直接链接到以激活此过滤器。
3.  您甚至可以完全[删除更改视图](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#other-methods)并使用您自己的 - 这个选项我经验最少，无法评论。

您可能还希望查看更改[更改列表模板](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.change_list_template)和[管理自定义操作](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.actions)以进一步自定义外观并提供自定义“操作”；我过去曾成功使用这两种方法来提供项目特定的功能。

非常令人兴奋的是[has_add_premission](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.has_add_permission)、`had_change_permission`和`has_delete_permission`钩子，将它们与 django-guradian 和自定义管理基本模板相结合，可以让您将后端管理员用作完整的前端管理。

一定要花时间通读整个模型管理页面——我越了解它，我发现自己编写自定义前端管理的代码就越少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T19:51:19.583

如果您希望在管理站点上显示自定义视图，您可以使用“django admin plus”它是一个允许您将自定义视图绑定到管理站点的库。您可以在该视图中使用您选择的查询和模型，并继续前进，因为它不是管理站点。

试试[这个 django 库](https://pypi.python.org/pypi/django-adminplus)并与我们分享您的反馈。

在将其注册到 admin.py 后，您的视图应如下所示

```
@admin.site.register_view('pathname')
def my_view(request):
    do_something 
```

请分享您对这个库的体验。

祝你有个好的一天

# c++ - C++明确库拥有指针

> ID：12536215
> 
> 赞同：3
> 
> 时间：2012-09-21T18:31:54.060
> 
> 标签：c++, smart-pointers, ownership

通过或不使用智能指针。我想向库的用户明确说明，他们传递到库中的所有指针现在都应该归库所有（即，不由用户发布）。

许多开源库只是在其文档中声明该库拥有或不拥有一切。他们讨论了传入指针的预期寿命。当然，有一种更严格的方法可以将此信息传达给用户。

一个例子会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:44:55.957

如果你真的想要，那么你应该在库中提供方法来创建这些对象，而不是让用户分配它们。库释放它没有创建的对象是没有意义的，因为它不能保证它们都使用相同的分配工具。

有一个选项是库创建这些对象，包装在自定义智能指针中，该指针隐藏指针并且不允许外部客户端释放包装的对象，但总是可以绕过守卫。根据我的经验，试图变得太聪明总是适得其反：事情变得更加复杂，但使用该库的开发人员总是可以胜过它。

IMO，最安全的方法是简单的生命周期管理 API（例如 CreateObject、DestroyObject）和清晰简洁的文档。然后用户可以自由选择如何处理生命周期（例如/`shared_ptr`作为自定义删除器，或完全不同的东西）。`unique_ptr``DestroyObject`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:45:25.030

在所有类中使用拥有的智能指针，这将获得所有权（即，一旦使用它就会销毁对象），并且从用户传递的任何指针都将被这个拥有的智能指针接管。

一个很好的例子是`std::unique_ptr`，一旦事情完成，就会破坏它的对象。

如果您需要自定义销毁，您可以将其传递给自定义删除器。

当然更好的是`make_unique`在你的类中同时创建（即通过），因为你将拥有 RAII，这将避免所有泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:49:54.623

如果您编写库函数、方法和构造函数以`std::unique_ptr<T>`按值获取，那么用户将无法自己释放指针，因为它们的`unique_ptr`实例将在参数的移动复制时被清除。

```
class C;
void library_function(std::unique_ptr<C> by_value);

void user_code() {
    std::unique_ptr<C> user_c{std::make_unique<C>("param", 5)};
    library_function(user_c);
    assert(user_c.get() == nullptr);
} 
```

如果用户应该能够继续观察对象，那么您可以`shared_ptr`在接口上接受，或者您可以提供返回原始（非拥有）指针或（更好）引用的观察者方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:55:40.070

一种方法是[重载 new/delete](http://www.cprogramming.com/tutorial/operator_new.html)运算符，并使用这些函数来过滤访问。例如，new 可能会创建对象，然后将地址存储到一些私有静态数据结构中。可以设计删除以阻止任何使用该`delete object`习语的尝试，除非满足某些条件。

# python - 在 Python 的命令行中使用带有两个变量的 argparse 的 OR 函数

> ID：12536217
> 
> 赞同：5
> 
> 时间：2012-09-21T18:32:01.820
> 
> 标签：python, argparse

我有一个接受文件作为输入的程序，对文件的内容进行一些处理并将其推送到服务器。我想添加一个可选的命令行开关来指定程序的“空运行”，它会执行所有文件处理，但会跳过写入服务器的操作。我正在使用 argparse 引入命令行参数，但我看不到在参数之间执行“OR”函数的方法。这就是我或多或少在寻找的东西......

**允许的选项：**

1) prog.py 输入文件服务器名

2) prog.py 输入文件 -d

3) prog.py 输入文件 -d 服务器名

**不允许：**

1) prog.py 输入文件

我想确保服务器名称**“或”**试运行标志在命令行上。而且，如果两者都在那里……那也没关系。（因此是 OR 而不是 XOR）。如果我用 required=true 互斥，我可以得到 XOR；但是，我似乎无法弄清楚如何将其作为“或”来执行，其中两者都可以存在。更复杂的是，服务器名称是一个位置参数，而试运行标志是一个可选参数，可以在命令行的任何位置。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T18:48:29.553

这是我要做的：

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('-d', '--dry-run', action='store_true')
parser.add_argument('input_file', type=argparse.FileType('r'))
parser.add_argument('servername', nargs='?')

args = parser.parse_args()
if args.servername is None and not args.dry_run:
    parser.error("Option 'servername' is required when not in dry-run mode.")

print args 
```

例子：

```
$ ./prog.py inputfile servername
Namespace(dry_run=False, input_file=<open file 'inputfile', mode 'r' at 0x283440>, servername='servername')
$ ./prog.py inputfile -d
Namespace(dry_run=True, input_file=<open file 'inputfile', mode 'r' at 0x2cf440>, servername=None)
$ ./prog.py -d inputfile servername
Namespace(dry_run=True, input_file=<open file 'inputfile', mode 'r' at 0x1f4440>, servername='servername')
$ ./prog.py inputfile
usage: prog.py [-h] [-d] input_file [servername]
prog.py: error: Option 'servername' is required when not in dry-run mode. 
```

您也可以使用自定义操作来执行此操作，它具有相同的效果：

```
class ServernameAction(argparse.Action):
    def __call__(self, parser, namespace, values, option_string=None):
        if values is None and not namespace.dry_run:
            parser.error("Option 'servername' is required when not in dry-run mode.")
        setattr(namespace, self.dest, values)

...
parser.add_argument('servername', nargs='?', action=ServernameAction)
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:46:11.600

`argparse`无法完成所有可能的验证组合，因此值得学习如何在事后添加自己的验证。例如：

```
parser = argparse.ArgumentParser(epilog='Either foo or bar (or both) must be specified.')
parser.add_argument('--foo', help='do something.')
parser.add_argument('--bar', help='do something else.')
args = vars(parser.parse_args())
if not args['foo'] and not args['bar']:
  parser.error('Either foo or bar (or both) must be specified.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:46:50.930

由于如果`-d`使用服务器名称将被忽略，因此给它一个默认值，如果您尝试使用它肯定会导致错误（无论如何您都需要验证它，对吗？）：

```
p.add_argument("server", default=None) 
```

如果`-d`给出，您可能永远不会同时验证或使用服务器名称，并且一切都很好。否则，您的代码将在尝试验证错误的服务器名称时捕获它。

# iphone - UIButton：根据titleLabel Text计算UIButton的高度

> ID：12536223
> 
> 赞同：1
> 
> 时间：2012-09-21T18:32:29.237
> 
> 标签：iphone, ios, uitableview, uibutton, uilabel

我在自定义 UITableViewCell 中有一个自定义 UIButton。我想根据按钮 titleLabel 的可变文本内容在自定义表格单元格中设置 UIButton 的高度。

我尝试了以下方法来计算高度

```
[NSString sizeWithFont:constrainedToSize:lineBreakMode:]; 
```

但我无法根据 titleLabel 成功更改按钮高度。

此外，由于此按钮是自定义 UITableViewCell 的一部分，因此我还需要根据自定义 UIButton 的高度更改单元格的高度。

在实现 UITableView 的委托和数据源方法的 ViewController 中，我尝试在以下方法中确定高度

```
- (CGFloat) tableView: (UITableView *) tableView 
heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

但没有成功。

解决此问题的最佳解决方案或方法可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:56:46.207

假设您的按钮宽度为 145.0f：

```
CGSize constraintSize;

constraintSize.width = 145.0f;

constraintSize.height = MAXFLOAT;

CGSize size = [Label.text sizeWithFont:Label.font constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap]; 
```

然后你可以设置框架：

```
frame = CGRectMake(0, 0, 145, size.height); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:40:49.940

看起来你做对了，但请记住：

`heightForRowAtIndexPath`must return`CGFloat` `sizeWithFont`给你文本的高度，你需要添加按钮的填充，和单元格

使用`constrainedToSize:CGSizeMake(###,MAXFLOAT)`### 是您的文本宽度

`lineBreakMode:UILineBreakModeWordWrap`当然

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T16:23:11.447

您也可以使用`[buttonInstance sizeToFit]`.

```
 UIButton *lineButton = [[UIButton alloc] initWithFrame:CGRectZero];
 // If padding equals "yes, please"
 [lineButton setContentEdgeInsets:UIEdgeInsetsMake(0.0f, 5.0f, 0.0f, 3.0f)];
 [lineButton setTitle:@"Title" forState:UIControlStateNormal];
 [lineButton sizeToFit]; 
```

# perl - 直接访问@_ 会避免大标量的内存副本吗？

> ID：12536224
> 
> 赞同：1
> 
> 时间：2012-09-21T18:32:29.273
> 
> 标签：perl

因此，最近在尝试修补错误时，一位黑客同事告诉我，由于传递给子例程（方法）的字符串的值可能非常大，因此通过访问它`$_[1]`可以避免内存复制。但是，我认为传递给子例程的任何值`@_`首先被复制到？那么在下面的示例中，内存是否被复制了两次？还是我对传递给该方法时所做的副本有误？

```
sub foo {
    my $self = shift

    $_[0]    # access $str in @_ directly
    my ( $str ) = @_; # makes another copy of @_
}

sub bar {
    my $self = shift;
    my $str = 'something very large'; 

    $self->foo( $str ); #copies $str to the @_ of foo
} 
```

这就是为什么我向作者建议允许通过标量 ref 传递，这将在传递给方法本身时避免复制（除了引用本身）。重申一下：将值传递给子例程是否意味着该值被复制到`@_`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T18:44:19.660

根据[http://perldoc.perl.org/perlsub.html](http://perldoc.perl.org/perlsub.html)（重点是我的）：

> 传入的任何参数都显示在数组中`@_`。因此，如果您调用带有两个参数的函数，它们将存储在`$_[0]`and中`$_[1]`。**该数组`@_`是一个本地数组，但它的元素是实际标量参数的别名。**特别是，如果一个元素`$_[0]`被更新，相应的参数也会被更新（或者如果它不可更新，则会发生错误）。如果参数是调用函数时不存在的数组或散列元素，则该元素仅在（并且如果）它被修改或引用它时创建。（一些早期版本的 Perl 创建了该元素，无论该元素是否被分配。）分配给整个数组`@_`会删除该别名，并且不会更新任何参数。

根据我的阅读，这似乎表明，默认情况下，没有复制到`@_`.

虽然我承认使用的语言有点迟钝。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T22:51:49.217

是的，其中的元素`@_`有别名。将参数传递到子例程中不会发生复制。

这意味着您可以做一些有用但令人惊讶的事情，例如：

```
sub strip {
    $_[0] =~ s{^\s+}{};
    $_[0] =~ s{\s+$}{};
}

my $var = "   foo   ";
strip($var);
print $var;    # "foo" 
```

这种远距离的行动通常是令人惊讶和危险的。没有迹象表明用户`strip`将修改其参数。更安全和更明显的做法是将值作为参考传递。

```
sub strip {
    my $ref = shift;
    $$ref =~ s{^\s+}{};
    $$ref =~ s{\s+$}{};
}

my $var = "   foo   ";
strip(\$var);
print $var;    # "foo" 
```

这既可以节省内存（仅复制引用），也可以让您在子例程中命名参数，并且由于它们必须传递引用，因此可以让调用者知道他们的变量可能被修改。

另一种方法是使用*只读别名*。这为您提供了不复制变量的内存优化，允许您命名变量，但防止您意外更改它。

有几种方法可以实现这一点，但是[Method::Signatures](https://metacpan.org/module/Method::Signatures)使它很方便。

```
use Method::Signatures;

func no_copy($string is alias is ro) {
    # $string is an alias to $var
    print "$string\n";

    # But it cannot be altered because $string is read-only.
    # This will throw an error.
    $string .= "bar";
}

my $var = "foo";
no_copy($var); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T18:52:08.963

不会发生复制`$_[0]`，`$str`因为它们是同一变量的两个不同名称。

```
$ perl -E'my $str; sub { say \$str == \$_[0] ?1:0 }->( $str );'
1 
```

是在 中制作副本的作业`my ( $str ) = @_;`。

# android - Android 浏览器（不是 Chrome，不是所有版本）在 z-index、绝对定位方面存在奇怪的问题

> ID：12536225
> 
> 赞同：0
> 
> 时间：2012-09-21T18:32:32.153
> 
> 标签：android, css, z-index, css-position

我见过一些关于 Android 浏览器的错误记录，以及它如何处理通常用于模态对话框的绝对定位的“shroud”元素。[这是一个**jsbin**示例。](http://jsbin.com/ofigat/3). 在合理的浏览器上单击“显示”按钮应该会显示一个带有“确定”按钮的小框。的HTML：

```
 <div id=content>
    <button type=button>Show</button>
    <p>
    This is the contents of the page.
    <p>
    This is the contents of the page.
    <p>
    This is the contents of the page.
    <p>
    This is the contents of the page.
    <p>
    This is the contents of the page.
    <p>
    This is the contents of the page.
    <p>
    This is the contents of the page.
</div>

<div id=shroud>
</div>
<div id=frame>
    This is a frame.
    <button type=button>Ok</button>
</div> 
```

JavaScript 只是隐藏和显示“框架” `<div>`：

```
$(function() {
  $('body')
    .on('click', '#content button', function(ev) {
      ev.preventDefault();
      $('#frame, #shroud').show();
    })
      .on('click', '#frame button', function(ev) {
        ev.preventDefault();
        $('#frame, #shroud').hide();
      });
}); 
```

而CSS只是一些简单的定位。主要内容、裹尸布和框架都有“z-index”值来显式堆叠它们。

```
* {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

button {
  font-size: 18px;
  font-weight: bold;
  color: rgb(20,24,42);
  background-color: yellow;
  border-radius: 5px;
  box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

#frame {
  background-color: #e2f0fa;
  height: 100%;
  z-index: 0;
}

#shroud {
  display: none;
  position: absolute;
  top: 0; bottom: 0; left: 0; right: 0;
  z-index: 10;
  background-color: rgba(0,0,0,0.4);
}

#frame {
  display: none;
  position: absolute;
  top: 50px; left: 20px;
  width: 200px; height: 200px;
  border: 2px solid #336699;
  border-radius: 10px;
  background-color: #f0f2f9;
  padding: 20px;
  z-index: 20;
} 
```

所以我在 Android 4.0.3 和 4.1 上注意到的问题是小“框架”框根本没有出现。shoud`<div>`确实如此，*有时*我可以用手指“摆动”页面，有时会部分显示框架框，并且（我认为）总是*在*裹尸布下，即使它的“z-index”更大。

现在我不确定为什么有人会在 Chrome 支持的新设备上使用 Android 浏览器，但我可能会猜到有人。有没有其他人看到这个？我什至没有找到类似的错误报告；我已经看到有关旧版本的东西在输入元素“渗入”覆盖元素方面存在愚蠢的问题，但没有这样的事情。

我已经用一些较旧的 2.2 和 2.3 手机尝试了该测试页，它运行良好。但是我的 HTC One X 和我的 Nexus 7 都失败了。

# javascript - javascript - 浅拷贝问题

> ID：12536228
> 
> 赞同：0
> 
> 时间：2012-09-21T18:32:42.163
> 
> 标签：javascript

我只是在javascript中尝试了一些简单的东西

```
name = 'velu' 
fname = name
name = 'valu'
console.log(fname) // would still print as velu... 
```

您如何处理生成的对象原型被更改并且生成的对象仍然具有旧对象的副本的情况。

这是情况...

```
function Cat(name){  
this.name = name  
}
var garfield = new Cat('Garfield')
Cat.prototype.greet = function(){
console.log('Meow, I am ' + this.name)
}
function Animal(){}
Cat.prototype = new Animal
Cat.prototype.constructor = Cat 
Animal.prototype.breed = function(){
console.log('Making a new animal!')
return new this.constructor()
}
 var kitty = garfield.breed() // this will not work as it garfield still is pointing to the old prototype object of Cat ... 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:35:24.467

您必须创建一个对象，该对象通过引用传递：

```
var name = { Value: 'velu' };
var fname = name;
name.Value = 'valu';
console.log(fname.Value); 
```

# jsf-2 - 不能使用 primefaces 推送

> ID：12536230
> 
> 赞同：0
> 
> 时间：2012-09-21T18:32:54.853
> 
> 标签：jsf-2, primefaces, myfaces

我正在尝试在对话框中使用 p:push 并且在 chrome 中出现此错误：

```
Uncaught Error: INVALID_STATE_ERR: DOM Exception 11 primefaces.js.xhtml:1
    PrimeFaces.widget.PrimeWebSocket.send primefaces.js.xhtml:1
    PrimeFaces.ajax.AjaxUtils.handleResponse primefaces.js.xhtml:1
    PrimeFaces.ajax.AjaxResponse primefaces.js.xhtml:1
    k.success primefaces.js.xhtml:1
    b.Callbacks.bv jquery.js.xhtml:16
    b.Callbacks.bE.fireWith jquery.js.xhtml:16
    bF jquery.js.xhtml:23
    b.ajaxTransport.send.bv 
```

推送服务器在码头 8.1.5.v20120716 的 9090 端口上运行 这是我的应用程序 web.xml 的一部分：

```
<context-param>
       <param-name>primefaces.PUSH_SERVER_URL</param-name>
       <param-value>ws://localhost:9090/push/</param-value>
</context-param> 
```

这是推送服务器的 web.xml 的内容：

```
<display-name>PUSH SERVER</display-name>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
    <init-param>
        <param-name>channels</param-name>
        <param-value>importador</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/push/*</url-pattern>
</servlet-mapping> 
```

对话内容：

```
...
<h:panelGroup layout="block" styleClass="hrgi-div-form clearfix">
       <h:panelGroup id="painel" layout="block">
                <p:progressBar widgetVar="barraProgressoImportador" ajax="true"
                               value="#{modeloPopupImportadorImediatoNFe.porcentagem}"/>
                <h:outputText value="#{modeloPopupImportadorImediatoNFe.mensagem}"/>
       </h:panelGroup>
       <p:push channel="importador" onmessage="atualizarPorcentagemImportacao"/>
</h:panelGroup>
... 
```

调用的 javascript 代码（仅显示警报）：

```
function atualizarPorcentagemImportacao(evt, data){
    alert("importado "+data);
} 
```

最后是尝试推送的代码：

```
public void abrir() {
        ...
        modeloPopup.setContext(RequestContext.getCurrentInstance());
        modeloPopup.getContext().push("importador", 0);
} 
```

难道我做错了什么？？

**添加** 如果它可能有用，这是我的推送服务器的 pom.xml

```
<parent>
    <artifactId>modulos-web</artifactId>
    <groupId>com.hrgi.web</groupId>
    <version>0.1.0</version>
</parent>
<modelVersion>4.0.0</modelVersion>
<artifactId>push-server</artifactId>
<packaging>war</packaging>
<name>push-server</name>
<dependencies>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-websocket</artifactId>
        <version>8.1.5.v20120716</version>
    </dependency>
    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-runtime</artifactId>
        <version>1.0.1</version>
    </dependency>
</dependencies>
<build>
    <finalName>push-server</finalName>
    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.5.v20120716</version>
            <configuration>
                <connectors>
                    <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                        <port>9090</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                </connectors>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:38:54.883

您需要以下设置才能使推送工作。

在 pom.xml 中：

```
 <dependency>
      <groupId>org.atmosphere</groupId>
      <artifactId>atmosphere-runtime</artifactId>
      <version>1.0.0.RC1</version> 
    </dependency> 
```

在 web.xml 中推送 servlet 设置：

```
 <servlet>
      <servlet-name>Push Servlet</servlet-name>
      <servlet-class>org.primefaces.push.PushServlet</servlet-class>
   </servlet>
   <servlet-mapping>
      <servlet-name>Push Servlet</servlet-name>
      <url-pattern>/primepush/*</url-pattern>
   </servlet-mapping> 
```

在这些之后，推动必须起作用。

您可以查看 primefaces_user_quide 文档以获取更多完整信息

# sql-server - 使用 T-SQL 将 Table 转换为 HTML，处理 NULL 问题

> ID：12536232
> 
> 赞同：1
> 
> 时间：2012-09-21T18:33:05.467
> 
> 标签：sql-server, tsql

```
DECLARE @tableHTML  NVARCHAR(MAX) ;

SET @tableHTML =
    N'<H1>Report Heading</H1>' +
    N'<table border="1">' +
    N'<th>Check Number</th>' +
    N'<th>Last Operator Date</th>' +
    N'<th>Last Timestamp</th>' +
    N'<th>Run Date</th>' +
    N'<th>Issued Check Number</th>' +
    N'<th>Error Description</th>' +
    '<tr>' +
    CAST ( ( SELECT td = S.CHK_NUM,       '',
                    td = S.LAST_OPER_ID, '',
                    td = S.LAST_TIMESTMP, '',
                    td = S.RUN_DT, '',
                    td = ISNULL(S.RE_ISSUE_CHK_NUM,-1), '',
                    td = ISNULL(S.ERR_DESC,'<null>'), ''
              FROM STAGNG_CDDP_ERR_RCD S
              FOR XML PATH('tr'), TYPE 
    ) AS NVARCHAR(MAX) ) +
    N'</table>' ;

PRINT @tableHTML 
```

如果我尝试用 varchar 文字“（Null）”替换 -1，则会收到错误消息

```
Msg 245, Level 16, State 1, Line 3
Conversion failed when converting the varchar value 'Null' to data type int. 
```

如果 RE_ISSUE_CHK_NUM 为空，我更愿意显示，但该字段是 int，我相信“TYPE”参数会强制返回值与原始列的类型匹配。

如何修改输出，使所有列都是文本，因此是可格式化的？

**编辑**

当我尝试这个...

```
DECLARE @tableHTML  NVARCHAR(MAX) ;

SET @tableHTML =
    N'<H1>Report Heading</H1>' +
    N'<table border="1">' +
    N'<th>Check Number</th>' +
    N'<th>Last Operator Date</th>' +
    N'<th>Last Timestamp</th>' +
    N'<th>Run Date</th>' +
    N'<th>Issued Check Number</th>' +
    N'<th>Error Description</th>' +
    '<tr>' +
    CAST ( ( SELECT td = S.CHK_NUM,       '',
                    td = S.LAST_OPER_ID, '',
                    td = S.LAST_TIMESTMP, '',
                    td = S.RUN_DT, '',
                    --td = ISNULL(S.RE_ISSUE_CHK_NUM,-1), '',
                    td = CONVERT(NVARCHAR(16), ISNULL(S.RE_ISSUE_CHK_NUM,'(Null)')), '',
                    td = ISNULL(S.ERR_DESC,'<null>'), ''
              FROM STAGNG_CDDP_ERR_RCD S
              FOR XML PATH('tr'), TYPE 
    ) AS NVARCHAR(MAX) ) +
    N'</table>' ;

PRINT @tableHTML 
```

我明白了：

```
Msg 245, Level 16, State 1, Line 3
Conversion failed when converting the varchar value '(Null)' to data type int. 
```

这是我想在 HTML 中显示字符串“Null”的 Null 的 Check Number 字段。

这是`TYPE`问题的参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:12:39.917

更改此行

```
td = CONVERT(NVARCHAR(16), ISNULL(S.RE_ISSUE_CHK_NUM,'(Null)')), '', 
```

至

```
td = CASE WHEN S.RE_ISSUE_CHK_NUM IS NULL THEN '<NULL>' ELSE  CONVERT(NVARCHAR(16), S.RE_ISSUE_CHK_NUM) END , '', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:46:42.203

> 如果我尝试用 varchar 文字“（Null）”替换 -1，则会在将 varchar 值“Null”转换为数据类型 int 时收到错误 Conversion failed。

我怀疑以下行正在发生此错误：

```
td = ISNULL(S.ERR_DESC,'<null>'), 
```

如果要显示`-1`when`S.ERR_DESC`为null，则可以将其放在引号中，如下所示：

```
td = ISNULL(S.ERR_DESC,'-1'), 
```

> 如何修改输出，使所有列都是文本，因此是可格式化的？

您可以将`CONVERT`非文本列添加到`NVARCHAR`.

例如

```
td = CONVERT(NVARCHAR(16), ISNULL(S.RE_ISSUE_CHK_NUM,-1)), '', 
```

# php - $this->input->post('submit') 提交时返回什么？

> ID：12536234
> 
> 赞同：0
> 
> 时间：2012-09-21T18:33:09.197
> 
> 标签：php, codeigniter, post

我正在检查我的表格，想知道这是否正确。我有相同的功能处理两个表单，基于单击哪个提交按钮，我的问题基本上是以下工作是否正常......

```
public function register()
{
    $user = $this->input->post('user_register');
    $store = $this->input->post('store_regiser');

    if($user === FALSE AND $store === FALSE)
    {
        $this->load->view('tmp', array('tmp' => 'main/register'));
    }

    if($user != FALSE)
    {
        //User register
    }

    if($store != FALSE)
    {
        //Store register
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T08:42:42.190

`$this->input->post('submit')`

将返回按钮的值，以便在下面使用它：

`<input type="submit" value="Send" name="submit" />`

将返回“发送”

请注意此处区分大小写。如果是我，我会在提交按钮上给每个表单一个不同的 name=""。

所以：

`<input type="submit" value="Send" name="user" />`

`<input type="submit" value="Send" name="client" />`

然后只是：

`if ($this->input->post('user')) // code goes here`

`if ($this->input->post('client')) // code goes here`

我这样做的原因是提交按钮上的 value="" 属性的内容是为最终用户提供的，而 name="" 是用于测试的，因此更适合您。

干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:45:59.837

为什么不直接回显有问题的输入？

```
echo var_dump($this->input->post());
die; 
```

它应该返回它在 HTML 表单中给出的任何值，

```
<input type="submit" value="Save" /> 
```

上面会输出

```
[submit] => Save 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:39:01.807

尝试这个

```
 $value = $this->input->post('submit'); //This should match the name of your button

if( $value == "user_register" )
{

//Do what you have to do

}
else if( $value == "store_register" )
{
//Do the other logic
} 
```

# scala - Akka Actor系统控制

> ID：12536243
> 
> 赞同：1
> 
> 时间：2012-09-21T18:33:53.580
> 
> 标签：scala, network-programming, playframework-2.0, akka, actor

我的环境是 scala akka 和游戏！框架。我想知道是否有任何方法可以控制演员系统的创建或任何其他可以控制的想法。

我的想法是创建远程参与者，在用户点击购买时处理授权。因此，当用户发帖时，我在操作方法中创建了远程参与者系统和参与者：

```
def payment = Action { implicit request =>
  var actorObject: Array[String] = new Array[String](23)

  val system = ActorSystem("RemoteSystem", ConfigFactory.load.getConfig("remotecreation")

  val worker = system.actorOf(Props[authNetActor.AuthNetActorMain].withRouter(FromConfig()), name = "remoteActor")
  ...
  system.shutdown()
} 
```

这是application.conf中remotecreation的定义

```
remotecreation {        #user defined name for the configuration
    include "common"
    akka {
            actor {
                    serialize-messages = on
                    serialize-creators = on

                    serializers {
                            proto = "akka.serialization.ProtobufSerializer"
                            java = "akka.serialization.JavaSerializer"
                            arr = "models.ArraySerializer"
                    }

                    serialization-bindings {
                            "com.google.protobuf.Message" = proto
                            "java.lang.String" = java
                            "java.util.Arrays" = java
                            "scala.Array" = arr
                            "akka.actor.ActorRef" = java
                    }

                    deployment {
                            /remoteActor {  #Specifically has to be the name of the remote actor
                                    remote = "akka://ActorApplication@172.17.100.232:2552"
                                    router = "round-robin"
                                    nr-of-instances = 1
                            }
                    }
            }
            remote.netty.port = 2554
    }
} 
```

我遇到的问题是，当我连续提交两次时，我得到一个错误，因为我试图在一个已经有一个演员系统的 IP 地址上创建一个演员系统。

我绝对认为我需要移动它，但我不确定在哪里，因为这将是一个广泛的多用户游戏！应用程序，当数百名用户使用该应用程序时，我不确定我可以将actor系统的创建放在哪里而不会发生冲突。

任何想法、建议或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T06:36:02.547

不要在每次调用时启动（远程）ActorSystem。相反，启动一个应用程序范围的演员系统（或使用默认的，请参阅[集成 Play 与 Akka](http://www.playframework.org/documentation/2.0/ScalaAkka)）。

添加到您的`application.conf`：

```
akka {

  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }

  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      port = 0 # 2552 seems to be bound with play 2.0.2 ?
    }
  }
} 
```

然后使用默认的 Play actorsystem 例如在您的控制器中获取对远程 actor 的引用：

```
private val interpreters = Akka.system.actorFor(
  "akka://interpreter_system@127.0.0.1:2552/user/interpreters") 
```

如果你想渲染 Actor 响应，你甚至可以将 Akka Future 转换为 Scala Promise。我建议继续使用 Akka Futures 来实现可组合性，然后在最后一个词干将其转换`Future[Result]`为 Promise。

```
new AkkaPromise(
  interpreters.ask(InterpretersComm.Request(sid, line)).mapTo[String]) map (Ok(_)) 
```

# javascript - 按类选择标题元素

> ID：12536247
> 
> 赞同：2
> 
> 时间：2012-09-21T18:34:05.010
> 
> 标签：javascript, jquery, html, dom

我想按其类选择一个元素，并将其分配给一个变量，但我希望该元素成为标题元素。让我解释一下：在任何给定时间，我的页面上都会有这个特定类的 3 个元素：an `<a>`、 a`<p>`和一个未知类型的标题元素，例如`<h1>`、`<h2>`等。

选择`<a>`and`<p>`很容易，即`$("a.myclass")`，但我不能用我的标题元素做到这一点。我需要这样的东西：

```
var a = $("a.myclass");
var p = $("p.myclass");
var heading = $(some selector to get the heading); 
```

请帮忙！

另外，我知道这个问题的标题不是一个好问题。如果您愿意，请对其进行编辑并改写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:36:35.697

您可以使用 :header 选择器 - [http://api.jquery.com/header-selector/](http://api.jquery.com/header-selector/)

```
var header = $(":header"); 
```

它将选择所有标题元素，例如 h1、h2、h3...

如果您只想要具有特定类的标题标签，您也可以将其用作过滤器，例如：

```
var header = $(".myClass").filter(":header"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:35:58.393

此行将抓取任何`h1`,`h2`或`h3`类`myclass`：

```
var h = $('h1.myclass, h2.myclass, h3.myclass'); 
```

如果您不确定您可以使用哪种元素来替换所有 3 个调用：

```
var myclass = $('.myclass'); 
```

您还可以遍历所有这些并根据标签名称存储它，如下所示：

```
var data = [];

$('.myclass').each(function(){
    data[this.tagName] = this;
});
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:39:08.053

使用[:header](http://api.jquery.com/header-selector/)选择器：

```
var heading = $(":header.myclass"); 
```

[http://jsfiddle.net/johnkoer/XJrwH/1/](http://jsfiddle.net/johnkoer/XJrwH/1/)

# c# - Web 应用程序页面加载

> ID：12536250
> 
> 赞同：0
> 
> 时间：2012-09-21T18:34:07.880
> 
> 标签：c#, asp.net, asp.net-2.0

我有一个列表框和两个按钮来更改该列表框中的列表项。它们在向导中，当我单击按钮时，我不想加载页面。我想留在同一页面而不加载新页面并更改列表项。

列表框从 sql 数据库中检索其项目（有数千行）

我知道这可以在 AJAX 中完成，但是对于 asp.net 2.0，这是一项艰巨的任务。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:38:23.980

您可以使用`UpdatePanel`控制`Triggers`和`UpdateMode="Conditional"`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.aspx)

```
 <asp:ScriptManager ID="ScriptManager1"  runat="server" />
            <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" >

              <Triggers>
                <asp:AsyncPostBackTrigger ControlID="ButtonId" />
              </Triggers> 

             <ContentTemplate>

                        <asp:ListView ID=".." runat="server"/>
                        ....
             </ContentTemplate>

            </asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:40:18.673

如果可以的话，我肯定会使用一些 jsavascript 框架来处理 Ajax（例如 JQuery/Dojo）

# ruby - 回退到 rspec-mocks 中的原始方法

> ID：12536256
> 
> 赞同：1
> 
> 时间：2012-09-21T18:34:25.057
> 
> 标签：ruby, rspec, mocking, stub

是否可以告诉 RSpec::Mocks 为一组值存根方法，*否则回退到原始方法*？例如：

```
File.stub(:exist?).with(/txt/).and_return(true)
File.exist? 'log.txt'    # returns true
File.exist? 'dev.log'    # <<< need to fallback to original File.exist? here 
```

目前，上例中的最后一次调用会引发 a `MockExpectationError`，要求提供默认值。是否可以指示 rspec-mocks 回退到原始方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T18:55:54.483

可以缓存原始方法，并显式调用它：

```
original_method = File.method(:exist?)
File.stub(:exist?).with(anything()) { |*args| original_method.call(*args) }
File.stub(:exist?).with(/txt/).and_return(true) 
```

但是，这太麻烦了。我希望看到更好的答案。

为了完整起见，这里是上面代码的概括：

```
def stub_with_fallback(obj, method)
  original_method = obj.method(method)
  obj.stub(method).with(anything()) { |*args| original_method.call(*args) }
  return obj.stub(method)
end

# usage example:
stub_with_fallback(File, :exist?).with(/txt/).and_return(true) 
```

# javascript - 正则表达式在 javascript 中显示意外的类型错误

> ID：12536259
> 
> 赞同：6
> 
> 时间：2012-09-21T18:34:29.183
> 
> 标签：javascript, regex, typeerror

这很奇怪，不知道为什么会发生，但就是这样。当我这样做时：

```
/^\d+$/.test('16') 
```

它工作正常。但是当我执行以下操作时，出现错误

```
var t = /^\d+$/.test;
t('16'); 
```

我得到的错误是这样的：

**TypeError：在不兼容的接收器 [object Window] 上调用了方法 RegExp.prototype.test**

我不知道它与这里的 Window 有什么关系……知道吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-21T10:48:48.687

或者，您可以使用[bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)创建一个使用正则表达式的新函数`this`：

```
var r = /^\d+$/;
var t = r.test.bind(r)
t(16) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-21T18:38:00.807

当您这样做时，`/^\d+$/.test('16')`您正在`test`使用您的正则表达式作为`this`对象调用函数（即作为对象上的方法调用）。

运行时，`t(16)`您没有指定对象，因此`this`默认为顶部对象，即`window`.

要复制第一个行为，您必须这样做：

```
var r = /^\d+$/;
var t = r.test;
t.call(r, 16); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-15T15:19:40.507

当我想通过匹配正则表达式的东西过滤数组时，我看到了这个问题，并使用以下方法修复它`bind`：

```
var items = ['a', 'b', 'c', 'A'];
var pattern = new RegExp('^a$', 'i');
var matches = items.filter(pattern.test.bind(pattern));
console.log(matches); 
```

结果如下：

```
['a', 'A'] 
```

# powershell - 添加内容或子字符串正在向变量添加回车符

> ID：12536261
> 
> 赞同：1
> 
> 时间：2012-09-21T18:34:35.997
> 
> 标签：powershell, substring, carriage-return

我正在输出一些从文件中提取的文本行，并且当我在 $strAcct 之后输出此部分时，正在添加回车：

```
Add-Content "C:\TestFile-Output.txt" ($strAcct+$strPart2) 
```

所以基本上文件中打印的是 $strAcct*回车/换行*$strPart2

这是我的所有代码：

```
#Setting Variables
$data = get-content "C:\TestFile.txt"
$strAcct= @()
$strPart1= @()
$strPart2= @()
$strLength= @()

#For each line of text in variable $data, do the following
foreach($line in $data)
{
  #reseting variables for each time the FOR loop repeats
  $strAcct= @()
  $strPart1= @()
  $strPart2= @()
  $strLength= @()

   #We're saying that if the line of text is over 180 characters, were going to split it up into two different lines so MEDITECH can accept this note files
   if ( $line.length -gt 180)
   { $strLength = $line.length
     $strAcct += $line.substring(0,22) 
     $strPart1 += $line.substring(0,180)
     $strPart2 += $line.substring(181)

     #Create first and second line in text file for the string of text that was over 180 characters
     Add-Content "C:\TestFile-Output.txt" $strPart1
     Add-Content "C:\TestFile-Output.txt" ($strAcct+$strPart2)

   } 
   #If our line of text wasn't over 180 characters, just print it as is
   Else {
   Add-Content "C:\TestFile-Output.txt" $line

   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:22:34.707

`$strAcct $strPart1 $strPart2`都是您代码中的**数组**，我认为这不是您的意图。默认情况下，将字符串数组发送到文件中会将每个项目放在一个新行上（即由 CR-NL 分隔）。

如果您尝试根据代码中的启发式将长行拆分为 2 行，那么下面应该可以工作：

```
$data = get-content "C:\TestFile.txt"    

#For each line of text in variable $data, do the following
foreach($line in $data)
{   
   $newContent = 
     if ($line.length -gt 180)
     {
       $part1 = $line.substring(0,180)         
       $part2 = $line.substring(181)
       $acct = $line.substring(0,22)

       $part1
       $acct + $part2
     } 
     else
     {
       $line
     }

   Add-Content "C:\TestFile-Output.txt" $newContent
} 
```

# collections - ConcurrentNavigableMap 和 NavigableMap 的区别

> ID：12536269
> 
> 赞同：2
> 
> 时间：2012-09-21T18:35:29.943
> 
> 标签：collections, java-6

Java Collection Framework 有一些补充，我试图找出但无法深入了解“NavigableMap”和“ConcurrentNavigableMap”之间的实际区别。

ConcurrentNavigableMap 是否只能由不同的线程修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:29:41.573

关键区别在于它`ConcurrentNavigableMap`提供了额外的`ConcurrentMap`方法`NavigableMap`以及额外的并发使用语义`ConcurrentMap`。

# c++ - 避免输出负零的最佳方法是什么？

> ID：12536270
> 
> 赞同：12
> 
> 时间：2012-09-21T18:35:34.570
> 
> 标签：c++, floating-point, cout

正如在[这个](https://stackoverflow.com/questions/7946913/uses-for-negative-zero-floating-point-value)问题中所说，浮点数的负零和正零之间存在一些差异。我知道这是因为一些重要的原因。我想知道的是避免输出负零的短代码。

例如在以下代码中：

```
cout << fixed << setprecision(3);
cout << (-0.0001) << endl; 
```

打印“-0.000”。但我想要“0.000”。

请注意，所有其他负数（例如 -0.001）仍应在其前面打印减号，因此根本`* -1`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:51:39.647

试试看你的精度。

`cout << ((abs(ans) < 0.0005)? 0.000: ans) << endl;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T19:18:32.510

怎么样：

```
cout << (value == 0.0 ? abs(value) : value)  << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:32:41.883

如果您关心任意精度，而不是只关心 3 的固定精度，那么您需要做一些工作。基本上，您必须在 cout 之前进行预检查，以查看数字是否会以您不喜欢的方式格式化。

您需要找到数字的数量级，看看是否会丢失不精确的数字，只留下符号位。

您可以使用数字绝对值的以 10 为底的对数来执行此操作。如果结果的负数大于您设置的精度，则该数字将以您不想要的方式显示。

0.0001 的 log10 为 -4。

(-4) 的负数是 4。

4 > 3（任意精度）因此该值将不愉快地显示。

在非常糟糕的伪代码中：

```
float iHateNegativeZeros(float theFloat, int precision)
{
   if((theFloat < 0.0f) &&
      (-log10(abs(theFloat)) > precision))
   {
     return -theFloat;
   }
   else
   {  
     return theFloat;
   }
} 
```

# hibernate - 用于集群的独立/复制 Ehcache

> ID：12536272
> 
> 赞同：3
> 
> 时间：2012-09-21T18:35:37.990
> 
> 标签：hibernate, ehcache

在我们的项目中，我们决定在我们的应用程序中使用 Ehcache 作为 Hibernate 和查询缓存的二级缓存。它似乎运作良好。

然后突然我们意识到我们的生产环境是集群的。查看 ehcache 文档，我发现最好的办法是进行分布式缓存，但是这涉及到 Terracotta Server，在这个阶段客户端不会准备支付。

根据文档，对于独立拓扑：

> 如果在有多个应用程序节点运行同一应用程序的情况下使用独立缓存，则它们之间存在弱一致性。

我的两个问题是：

1.  在“只读”模式下使用 ehcache 并继续在集群环境中独立使用它，我们会受到什么影响？因为如果只是这样说，对于它会命中其他节点的情况，它会从数据库中获取数据，因为缓存不会在那里复制/配置，我想我们会接受它。唯一的问题是，它不应该导致异常。我想知道在我的场景中使用独立拓扑的后果。

2.  我们可以将第三种拓扑，即复制缓存作为解决方案吗？

我是 ehcache 的新手，因此有这些基本问题。非常感谢回复！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:24:34.420

如果您的应用程序是集群的，并且您需要缓存可能更改的数据，您将需要使用支持此功能的缓存解决方案。正如您所说，如果您希望在集群中使用 EhCache，您将需要使用 Terracotta。

[Hibernate 文档在此处](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-cache)列出了支持的缓存提供程序。

我已经使用 Infinispan（分布式缓存的开源 JBoss 解决方案）成功实现了这一点。[这里](https://docs.jboss.org/author/display/ISPN/Using+Infinispan+as+JPA-Hibernate+Second+Level+Cache+Provider)有一个综合指南，它将为您提供启动和运行所需的一切。

Infinispan 支持多种操作模式，包括失效、复制和分布式。2LC 的默认设置是同步失效。在这种模式下，当一个实体在集群中的一个节点上更新时，它将使缓存区域无效，并且所有其他节点将被通知并执行相同的操作。

# android - 来自 Android 上的 Google 地图的搜索列表结果

> ID：12536276
> 
> 赞同：0
> 
> 时间：2012-09-21T18:35:51.233
> 
> 标签：android, google-maps, app-inventor

我正在尝试学习和使用[MIT App Inventor](http://appinventor.mit.edu/)与地图应用程序进行交互。我已经成功创建了一个按钮来更改`DataUri`，然后通过`StartActivity`.

我感兴趣的只是地图的搜索功能，没有启动应用程序本身。我想提交某种查询，并收到一个列表作为回报。这可以用于常规搜索和方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:59:33.387

如果有 RESTful Google Maps API 接口，您可以使用 App Inventor 和 Web 组件来做到这一点，您是否已经在其中一个 Google Map API 中找到了可以提供您想要的东西的东西？

我有一个静态地图 API 2.0 和 App Inventor 的示例，但没有 Web 组件，请参见此处[http://puravidaapps.com/snippets.php#maps2button](http://puravidaapps.com/snippets.php#maps2button)

您可能希望在问题中添加“google-maps”作为标签...

# javascript - 使用各种标签用javascript替换字符

> ID：12536278
> 
> 赞同：2
> 
> 时间：2012-09-21T18:35:55.383
> 
> 标签：javascript, replace

我正在尝试使用 javascript 用样式字符替换段落中的字符。如果我用一种样式替换一个字符，效果很好，但是当我尝试用 3 种不同的样式替换 3 个不同的字符时，该段落会打印 3 次，每次只有 1 次样式更改。我希望 3 种样式在 1 段中生效。下面是我正在使用的代码。谢谢你。

```
<!DOCTYPE html>
<html>
<head>
<script>
function myFunction (){
var pText=document.getElementById("alteredText").innerHTML; 
var eSpan=pText.replace(/e/g,"<span style='position:relative;color:red;top:.05em;'>e</span>"); 
var tSpan=pText.replace(/t/g,"<span style='position:relative;color:blue;top:-.05em;'>t</span>"); 
var sSpan=pText.replace(/s/g,"<span style='color:green;'>s</span>"); 
var n = eSpan.concat(tSpan,sSpan); 
document.getElementById("alteredText").innerHTML=n; 
}
</script>
</head>
<body onLoad="myFunction()">
<p id="alteredText">
The quick brown fox jumped over the lazy sleeping dog.
The slow shiny robot chased the quick brown fox.
The lazy sleeping dog awoke and barked at the slow shiny robot.
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:54:30.583

```
var pText=document.getElementById("alteredText").innerHTML;  
var t = pText.replace(/e/g,"@e@");     
t = t.replace(/t/g,"@t@");        
t = t.replace(/s/g,"@s@");        
t = t.replace(/@e@/g,"<span style='position:relative;color:red;top:.05em;'>e</span>");  
t = t.replace(/@t@/g,"<span style='position:relative;color:blue;top:-.05em;'>t</span>");  
t = t.replace(/@s@/g,"<span style='color:green;'>s</span>");  
document.getElementById("alteredText").innerHTML=t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:50:27.833

尝试这个：

```
var first = pText.replace(/e/g,"<span style='position:relative;color:red;top:.05em;'>e</span>"); 
var second = first.replace(/t/g,"<span style='position:relative;color:blue;top:-.05em;'>t</span>"); 
var final = second.replace(/s/g,"<span style='color:green;'>s</span>"); 
document.getElementById("alteredText").innerHTML=final; 
```

看看我做了什么？您正在创建三个字符串，每个字符串都有一个替换。在这里，我正在对已经包含第一个的字符串进行第二次替换。最后一次替换后，我把它放在了元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:58:27.967

一种快速而肮脏的解决方案：

```
function myFunction (){
    var pText=document.getElementById("alteredText").innerHTML;
    var eSpan=pText.replace(/e/g,"<SPAN STYLE='POSITION:RELATIVE;COLOR:RED;TOP:.05EM;'>e</SPAN>");  // CAPS are needed so no match is found in the next replace
    var tSpan=eSpan.replace(/t/g,"<SPAN STYLE='POSITION:RELATIVE;COLOR:BLUE;TOP:-.05EM;'>t</SPAN>");
    var sSpan=tSpan.replace(/s/g,"<SPAN STYLE='COLOR:GREEN;'>s</SPAN>");
    // var n = eSpan.concat(tSpan,sSpan);   //<-- this creates the three copies of the paragraph. you don't need this.
    document.getElementById("alteredText").innerHTML=sSpan;
} 
```

见[http://jsfiddle.net/DUN4C/](http://jsfiddle.net/DUN4C/)

# c++ - 私人运营商删除

> ID：12536280
> 
> 赞同：2
> 
> 时间：2012-09-21T18:35:59.923
> 
> 标签：c++

> **可能重复：**
> [公共运算符 new，私有运算符删除：使用 new 时获取 C2248“无法访问私有成员”](https://stackoverflow.com/questions/1820069/public-operator-new-private-operator-delete-getting-c2248-can-not-access-priv)

[http://efesx.com/2009/12/01/public-operator-new-and-private-operator-delete/](http://efesx.com/2009/12/01/public-operator-new-and-private-operator-delete/)

在这篇文章中，我读到这段代码应该给出一个错误：

```
#include <cstdlib>

struct Try {
        Try () { /* o/ */ }

        void *operator new (size_t size) {
            return malloc(size);
        }

    private:
        void operator delete (void *obj) {
            free(obj);
        }
};

int main () {
    Try *t = new Try();

    return 0;
} 
```

我用 gcc 4.7.1 试过了：

```
Compilation finished with errors: source.cpp: In function 'int
main()': source.cpp:11:14: error: 'static void Try::operator
delete(void*)' is private source.cpp:17:22: error: within this context
source.cpp:11:14: error: 'static void Try::operator delete(void*)' is
private source.cpp:17:22: error: within this context source.cpp:17:10:
warning: unused variable 't' [-Wunused-variable] 
```

在这篇文章的评论中，我看到了这个链接 - [Public operator new, private operator delete: getting C2248 "can not access private member" when using new](https://stackoverflow.com/questions/1820069/public-operator-new-private-operator-delete-getting-c2248-can-not-access-priv)

如果我理解它是正确的，它不会编译，因为编译器应该通过调用适当的操作符删除在构造函数抛出异常的情况下避免任何内存泄漏。但是为什么这段代码可以编译和工作？

```
#include <cstdlib>

struct Try {
        void *operator new (size_t size) {
            return malloc(size);
        }

    private:
        void operator delete (void *obj) {
            free(obj);
        }
};

int main () {
    Try *t = new Try;

    return 0;
} 
```

标准是否正确？

那么这段代码呢？

```
#include <cstdlib>

struct Try {
        void *operator new (size_t size) {
            return malloc(size);
        }

    private:
        void operator delete (void *obj) {
            free(obj);
        }
};

int main () {
    Try *t = new Try();

    return 0;
} 
```

它不能与 gcc 4.7.1 一起编译。

以及如何在标准库中实现这样的事情？

Comeau 并未编译所有这些示例：

```
"ComeauTest.c", line 15: error: function "Try::operator delete"
(declared at line 9) is inaccessible Try *t = new Try; ^ 
```

谁能给我详细解释一下，好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:49:49.020

*   看来，您对第一个示例是正确的。

第二个和第三个示例处理 POD 类型。并且有[初始化差异](https://stackoverflow.com/questions/620137/do-the-parentheses-after-the-type-name-make-a-difference-with-new)起作用。

*   在第二个示例中，您的结构*未初始化*。没有问题出现。

*   相反，在第三个示例结构*中确实*初始化，所以你得到第一种情况。

**编辑：**

然后，`operator new`它本身可以抛出异常。标准（c++11 darft 说）：

> 如果`new`表达式因抛出异常而终止，它可以通过调用释放函数 (3.7.4.2) 来释放存储空间。如果分配的类型是非数组类型，则分配函数的名称是 `operator new`，释放函数的名称是`operator delete`。

有点不清楚，作者想表达什么说它*可能会*释放存储。*如果它被*释放，它似乎是实现定义的。

无论如何，您可以尝试使用不抛出的`new`版本：

```
void *operator new (size_t size, std::nothrow_t) throw() {
    return malloc(size);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:55:25.407

如果您的构造函数代码抛出异常，编译器创建的构造函数代码也涉及操作符**new**和**delete 。**因此，使用**new**会自动创建**delete**的用法。

在第二个示例中，编译器知道您使用从不抛出的默认构造函数（我的猜测）..

不同的编译器以不同的方式工作，因为它们不同（队长）并且具有不同的优化能力和创建代码的技巧

# c++ - C++计算两个圆之间的距离

> ID：12536291
> 
> 赞同：0
> 
> 时间：2012-09-21T18:36:37.320
> 
> 标签：c++, math

有人可以解释一下吗？

```
double distance( int x1, int y1, int x2, int y2 )
{
    //Return the distance between the two points
    return sqrt( pow( x2 - x1, 2 ) + pow( y2 - y1, 2 ) );
}
bool check_collision( Circle &A, Circle &B )
{
    //If the distance between the centers of the circles is less than the sum of their radii
    if( distance( A.x, A.y, B.x, B.y ) < ( A.r + B.r ) )
    {
        //The circles have collided
        return true;
    }

    //If not
    return false;
} 
```

我不明白这段代码是怎么回事

```
//Return the distance between the two points
return sqrt( pow( x2 - x1, 2 ) + pow( y2 - y1, 2 ) ); 
```

返回两个圆之间的距离。代码来自[http://lazyfoo.net/SDL_tutorials/lesson19/index.php](http://lazyfoo.net/SDL_tutorials/lesson19/index.php)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T18:41:43.757

这

```
sqrt( pow( x2 - x1, 2 ) + pow( y2 - y1, 2 ) ) 
```

返回圆心之间的欧几里得距离。作为一个公式，这个距离很简单

```
sqrt((a1-b1)^2 + (a2-b2)^2) 
```

其中 (a1,a2) 和 (b1,b2) 是 2 个圆的中心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:39:53.683

它不会返回圆之间的距离，而是使用普通的旧笛卡尔距离计算来执行*“返回两点之间的距离”的操作。*然后程序员通过两个圆的*中心*。

然后程序员减去两个半径以获得圆之间的距离。只是他并没有真正费心减去（s）他只是比较，因为（s）他只对碰撞与无碰撞决定感兴趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T18:39:36.943

原点和点 (x, y) 之间的[欧几里得距离定义为：](http://en.wikipedia.org/wiki/Euclidean_distance)

```
d = (x² + y²)^((1/2))
```

所以两个圆的中心点 p [1] = (x [1] , y [1] ) 和 p [2] = (x [2] , y [2] ) 之间的距离是通过平移整个系统得到的，因此一个中心点位于原点，并且计算到另一个的距离。我们通过以下方式做到这一点：

```
d = |p[2] - p[1]|[2]
  = ((x[2]-x[1])² + (y[2]-y[1])²)^((1/2)) 
```

在 C++ 中，这通常看起来像

```
return sqrt( (x2-x1)*(x2-x1) + (y2-y1)*(y2-y1) );
```

然而，在这种情况下，作者似乎正在使用一个`pow(b, e)`函数，该函数接受第一个参数 ，`b`并将其提升到第二个参数的幂，`e`以获得。`b^e`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T18:40:17.147

它返回圆心之间的距离。假设`Circle.x`，`Circle.y`代表中心。这用于计算的其余部分以检查碰撞。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T18:48:47.447

两点的距离可以通过使用 Pithagroas 关于直角三角形的定理来推断。在笛卡尔坐标系中，如果定义两个点：P1(x1, y1) 和 P2(x2, y2)，那么它们之间将有一个直角三角形：

```
^ y
|
|
|
|
+ ---------x P1(x1, y1) = (12, 8)
|          |
|          | 
|          | 
+----------x-I-------x P2(x2, y2) = (24, 4)
|          |         |
|          |         |
|          |         |
+------------------------------------------------> x 
```

现在`P1, P2, I`三角形在它的点有一个直角`I`。因此 Pithagoras 定理适用于：

```
c ^ 2 = a ^ 2 + b ^ 2
distance ^ 2 = (x1 - x2) ^ + (y2 - y1) ^ 2
since n ^ 2 equals (-n) ^ 2 we can finally write:
distance = sqrt((x1 - x2) ^ 2 + (y1 - y2) ^ 2) 
```

这就是为什么。

# jsf - 无法禁用 通过 ajax

> ID：12536294
> 
> 赞同：1
> 
> 时间：2012-09-21T18:36:47.097
> 
> 标签：jsf, jsf-2, primefaces

如果输入文本中没有类似这样的值，我想禁用该按钮：

```
<p:autoComplete  id="ac" value="#{bean.selectedNet}"
    completeMethod="#{bean.complete}"
    minQueryLength="0" size="3">
    <p:ajax event="itemSelect" update="genButton" listener="#{bean.handleNetChange}"/>
    <p:ajax process="@this" update="genButton" />
</p:autoComplete> 

<p:selectManyCheckbox id="en" layout="pageDirection" value="#{bean.selectedEntity}"> 
    <f:selectItems value="#{bean.entityList}"/>
    <p:ajax update="genButton" listener="#{bean.handleNetChange}"/>
</p:selectManyCheckbox>

<p:commandButton id="genButton" value="Generate Files"
    widgetVar="startButton1"
    disabled="#{bean.disableButton}"
    actionListener="#{bean.generate}"
    onclick="PrimeFaces.monitorDownload(showStatus, hideStatus)"
    ajax="false">
    <p:fileDownload value="#{bean.streamedContent}"/>
</p:commandButton> 
```

方法：

```
public void handleNetChange() {
    if (!StringUtils.isBlank(selectedNet) && !selectedEntity.isEmpty()) {
        disableButton = false;
    } else {
        disableButton = true;
    }
}

public List<String> complete(String query) {
    List<String> results = new ArrayList<String>();
    if (StringUtils.isBlank(query)) {
        selectedNet = query;
        disableButton = true;
    } else {
        ....
    }
    return results;
} 
```

虽然 itemSelect 事件运行良好，但第二个事件却没有。我可以在 bean 中看到对完整方法的调用，但按钮未更新

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:37:01.737

似乎您不能仅使用`<p:ajax process="@this" update="genButton" />`. 我会尝试`button`直接从`bean`.

由于您使用的是 primefaces，您可以使用`RequestContext`; 尝试将此行添加到您的`complete`方法中：

```
RequestContext.getCurrentInstance().addPartialUpdateTarget("genButton"); 
```

如果您不使用`prependId="false"`wrapping `form`，则可能需要指定完整路径，`button`例如：

```
RequestContext.getCurrentInstance().addPartialUpdateTarget("fooForm:genButton"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:16:07.563

如果要使用禁用，请不要在命令按钮上使用渲染属性。

```
<p:commandButton id="buttonId"  
actionListener="#{controller.function}"
value="#{controller.label}" 
disabled="#{controller.disableButton}" rendered="#{controller.renderButton}"  /> 
```

删除渲染后，按钮被禁用，没有任何问题。

# java - 按自然顺序对字符串数组进行排序并忽略空格

> ID：12536296
> 
> 赞同：1
> 
> 时间：2012-09-21T18:37:15.670
> 
> 标签：java, android

我发现这个由[Yishai](https://stackoverflow.com/questions/1262239/natural-sort-order-string-comparison-in-java-is-one-built-in/1262345#comment16877348_1262345)在这个论坛上发布的示例代码，效果非常好。它可以帮助我以“自然顺序”对磁盘上找到的文件名进行排序，即人类喜欢看到的方式：

*   文件 1

    文件2

    文件 3

    文件 11

如果只是正常的（ascii）排序，那么**file11**将在**file1**之后和**file2之前**

问题是如何改进此代码并设置可以忽略空格的选项，这在读取长列表中的文件名时可能是非常有用的排序类型，例如：

*   文件 1

    文件 1

    文件2

    文件 3

这是代码

```
Collections.sort(myStringArrayList, 
                 new AlphanumComparator(String.CASE_INSENSITIVE_ORDER));

 /*
 * The Alphanum Algorithm is an improved sorting algorithm for strings 
 * containing numbers.  Instead of sorting numbers in ASCII order like 
 * a standard sort, this algorithm sorts numbers in numeric order. 
 * 
 * The Alphanum Algorithm is discussed at http://www.DaveKoelle.com 
 * 
 * 
 * This library is free software; you can redistribute it and/or 
 * modify it under the terms of the GNU Lesser General Public 
 * License as published by the Free Software Foundation; either 
 * version 2.1 of the License, or any later version. 
 * 
 * This library is distributed in the hope that it will be useful, 
 * but WITHOUT ANY WARRANTY; without even the implied warranty of 
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU 
 * Lesser General Public License for more details. 
 * 
 * You should have received a copy of the GNU Lesser General Public 
 * License along with this library; if not, write to the Free Software 
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA 
 * 
 */ 

import java.util.Comparator; 

/** 
 * This is an updated version with enhancements made by Daniel Migowski, 
 * Andre Bogus, and David Koelle 
 * 
 * To convert to use Templates (Java 1.5+): 
 *   - Change "implements Comparator" to "implements Comparator<String>" 
 *   - Change "compare(Object o1, Object o2)" to "compare(String s1, String s2)" 
 *   - Remove the type checking and casting in compare(). 
 * 
 * To use this class: 
 *   Use the static "sort" method from the java.util.Collections class: 
 *   Collections.sort(your list, new AlphanumComparator()); 
 */ 
public class AlphanumComparator implements Comparator<String> 
{ 
    private Comparator<String> comparator = new NaturalComparator(); 

    public AlphanumComparator(Comparator<String> comparator) { 
        this.comparator = comparator; 
    } 

    public AlphanumComparator() { 

    } 

    private final boolean isDigit(char ch) 
    { 
        return ch >= 48 && ch <= 57; 
    } 

    /** Length of string is passed in for improved efficiency (only need to calculate it once) **/ 
    private final String getChunk(String s, int slength, int marker) 
    { 
        StringBuilder chunk = new StringBuilder(); 
        char c = s.charAt(marker); 
        chunk.append(c); 
        marker++; 
        if (isDigit(c)) 
        { 
            while (marker < slength) 
            { 
                c = s.charAt(marker); 
                if (!isDigit(c)) 
                    break; 
                chunk.append(c); 
                marker++; 
            } 
        } else 
        { 
            while (marker < slength) 
            { 
                c = s.charAt(marker); 
                if (isDigit(c)) 
                    break; 
                chunk.append(c); 
                marker++; 
            } 
        } 
        return chunk.toString(); 
    } 

    public int compare(String s1, String s2) 
    { 

        int thisMarker = 0; 
        int thatMarker = 0; 
        int s1Length = s1.length(); 
        int s2Length = s2.length(); 

        while (thisMarker < s1Length && thatMarker < s2Length) 
        { 
            String thisChunk = getChunk(s1, s1Length, thisMarker); 
            thisMarker += thisChunk.length(); 

            String thatChunk = getChunk(s2, s2Length, thatMarker); 
            thatMarker += thatChunk.length(); 

            // If both chunks contain numeric characters, sort them numerically 
            int result = 0; 
            if (isDigit(thisChunk.charAt(0)) && isDigit(thatChunk.charAt(0))) 
            { 
                // Simple chunk comparison by length. 
                int thisChunkLength = thisChunk.length(); 
                result = thisChunkLength - thatChunk.length(); 
                // If equal, the first different number counts 
                if (result == 0) 
                { 
                    for (int i = 0; i < thisChunkLength; i++) 
                    { 
                        result = thisChunk.charAt(i) - thatChunk.charAt(i); 
                        if (result != 0) 
                        { 
                            return result; 
                        } 
                    } 
                } 
            } else 
            { 
                result = comparator.compare(thisChunk, thatChunk); 
            } 

            if (result != 0) 
                return result; 
        } 

        return s1Length - s2Length; 
    } 

    private static class NaturalComparator implements Comparator<String> { 
        public int compare(String o1, String o2) { 
            return o1.compareTo(o2); 
        } 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:57:36.043

```
Collections.sort(myStringArrayList, new Comparator<String>() {

@Override
        public int compare(String o1, String o2) {
            int temp = o1.length() - o2.length();
            o1 = o1.replaceAll(" ", "");
            o2 = o2.replaceAll(" ", "");
            int compareTo = o1.compareTo(o2);
            if(compareTo == 0){
                return temp;
            }
            else{
                return compareTo;
            }
        }
    }); 
```

比较器还可用于控制某些数据结构（例如排序集或排序图）的顺序，或为不具有自然排序的对象集合提供排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T02:38:40.857

一个简单的解决方案应该通过您提出的四种情况的测试，即向相同代码的构造函数传递一个自定义比较器，如下所示：

```
 public class SpaceInsensitiveComparator implements Comparator<String> {   
    public int compare(String o1, String o2) {   
        return o1.trim().compareTo(o2.trim());   
    }   
 } 
```

或不区分大小写：

```
 public class SpaceInsensitiveComparator implements Comparator<String> {   
    public int compare(String o1, String o2) {   
        return String.CASE_INSENSITIVE_ORDER.compare(o1.trim(), o2.trim());   
    }   
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:42:48.383

可以通过在 getChunck() 方法中添加 if c != ''

```
if (c != ' ')
{
        chunk.append(c);
} 
```

上面的代码不会为块添加空间。

# ios6 - 有人可以解释或举例说明 Facebook 新 SDK 支持 iOS 6 的哪些功能吗？

> ID：12536298
> 
> 赞同：1
> 
> 时间：2012-09-21T18:37:35.287
> 
> 标签：ios6, single-sign-on, facebook-ios-sdk

在 Facebook 开发者博客上，它说“更新 Facebook SDK 以支持 iOS 6.0”。

但是当我通过[https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)设置登录时，我仍然需要再次输入帐户/密码，即使我已经登录 Facebook通过 iOS6 上的设置。

我是一名新开发人员，所以我对“支持 iOS 6.0”感到困惑

有人可以解释或举例说明 Facebook 新 SDK 支持 iOS 6 的哪些功能吗？

# asp.net - 如何通过重命名css文件来避免浏览器缓存问题

> ID：12536300
> 
> 赞同：0
> 
> 时间：2012-09-21T18:37:41.237
> 
> 标签：asp.net, caching, web

如果我在 site.css 文件中有一些错误的 css 并且已经从用户的浏览器缓存，那么是否可以简单地用固定的 css 重命名文件，以便让用户的浏览器重新加载以前缓存的数据？

如果没有，有没有办法模仿清除浏览器缓存？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:38:34.637

如果您只是向 css 引用添加一个虚拟查询字符串值，浏览器将获得文件的新副本，因为不同的 url 意味着不同的资源。例如

```
styles.css?anything=1 
```

重命名文件也可以，但这不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:49:35.940

是的，您可以用新名称保存新的 css 文件并编辑所有使用 css 文件的文件以使用新版本。

一个假的查询字符串，如

> 样式.css?revision=2

或者

> 样式.css?lastchange=2012-09-21

在所有使用 css 文件的文件中，还强制所有缓存获取更新的文件。

优点是文件名不必更改。

缺点是您不会轻易注意到旧版本是否仍在某处使用（可能是因为您忘记更新文件）。如果您改为更改文件名，则可以将旧文件保留一段时间并检查日志是否仍然可以访问以提供此信息。

# scala - 使用 Scala 的全屏 Web 应用程序？或为此的GUI框架？

> ID：12536302
> 
> 赞同：0
> 
> 时间：2012-09-21T18:37:43.637
> 
> 标签：scala, playframework, playframework-2.0

我需要做一个有这个要求的应用程序：

- 远程数据库连接
- 全屏 -
一些小部件必须实时更新

我认为它不能与 Web 框架一起使用，因为我需要一个全屏专用应用程序，也许我错了......

有人知道哪个 GUI 框架最适合 Scala（有据可查，示例）？

和

有没有办法用 Play 2/Scala 做一个全屏应用程序？

提前致谢。克里斯。

编辑：该应用程序必须是类似信息亭的应用程序（带触摸屏）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:49:46.933

全屏肯定会在客户端处理。[这个答案演示了如何使窗口全屏](https://stackoverflow.com/a/7525760/1214194)。使用它，您绝对可以使用 Play！（或任何其他 Web 框架，或根本没有框架）。如果您最熟悉网络编程，那么这可能是您的最佳选择。

既然你提到了一个 GUI 应用程序，我想你不仅仅是在制作一个想要全屏显示的普通网站——这被认为是糟糕的设计实践。但是，对于某种终端，这对您来说很有效。

如果您希望部署应用程序供客户端运行，请查看[Scala 的 Swing 库](http://www.scala-lang.org/sites/default/files/sids/imaier/Mon,%202009-11-02,%2008:55/scala-swing-design.pdf)。在线和 Martin Odersky 的 Programming Scala 书中有大量示例。

# jquery - 用点击 ondivision 倾斜 div

> ID：12536303
> 
> 赞同：0
> 
> 时间：2012-09-21T18:37:49.360
> 
> 标签：jquery, jquery-ui, css

我有一个具有图像内容的 div，当用户单击 div 或延迟图像时，我想倾斜它。我使用跟随代码，但它不起作用。什么是解决方案？谢谢

```
 $(function () {
        $('#hd').bind('mousedown', function () {
            var $elem = $(this);

              $elem.animate({  " -webkit-transform": "skewX(40deg)" }, 250)
        })
    }) 
```

它也不起作用

```
 $(function () {
        $('#hd').bind('mousedown', function () {
            var $elem = $(this);
            $elem.css({ " -webkit-transform": "skewX(40deg)"

            })

        })
    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:41:32.993

删除多余的空格：

```
$elem.css({"-webkit-transform": "skewX(40deg)" }); 
```

之前的空间`-webkit-transform`是导致它不起作用的原因。

# algorithm - 是否有任何算法可以解决有限数量面额的计数变化？

> ID：12536306
> 
> 赞同：0
> 
> 时间：2012-09-21T18:38:03.093
> 
> 标签：algorithm, dynamic-programming

我知道解决无限数量面额硬币找零问题的算法，但是有没有使用 DP 来解决有限数量面额的算法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T18:49:18.383

是的。修改初始算法，以便当它要添加的硬币超过该面额的可用硬币数量时，它不会代替。然后它只会打印有效的组合。

另一种更简单的方法是：无限制地运行算法，然后根据哪些组合无效来过滤输出。这样一想，就很明显这个问题确实是可以解决的。

# c# - 列表框未分配变量

> ID：12536309
> 
> 赞同：5
> 
> 时间：2012-09-21T18:38:31.547
> 
> 标签：c#, listbox

在这里充分披露，我是一名正在做作业的学生。我有 2 个列表框，其中包含可以选择的项目。其中所说的不需要提取。我写出了代码，一切正常，除了在代码末尾的 3 个变量上出现“使用未分配变量”的错误消息。它们是 locFees、days 和 registration。谁能告诉我我做错了什么导致变量没有值？

```
 private void btnCalc_Click(object sender, EventArgs e)
    {
        double registration, lodging, total, days, locFees;
        int workshopIndex, locationIndex;
        if (lbWorkshop.SelectedIndex != -1)
        {
            workshopIndex = lbWorkshop.SelectedIndex;
            switch (workshopIndex)
            {
                case 0:
                    days = 3;
                    registration = 1000;
                    break;
                case 1:
                    days = 3;
                    registration = 800;
                    break;
                case 2:
                    days = 3;
                    registration = 1500;
                    break;
                case 3:
                    days = 5;
                    registration = 1300;
                    break;
                case 4:
                    days = 1;
                    registration = 500;
                    break;
            }
        }
        else
        {
            MessageBox.Show("You didn't select a workshop.");
        }
        if (lbLocation.SelectedIndex != -1)
        {
            locationIndex = lbLocation.SelectedIndex;
            switch (locationIndex)
            {
                case 0:
                    locFees = 150;
                    break;
                case 1:
                    locFees = 225;
                    break;
                case 2:
                    locFees = 175;
                    break;
                case 3:
                    locFees = 300;
                    break;
                case 4:
                    locFees = 175;
                    break;
                case 5:
                    locFees = 150;
                    break;
            }
        }
        else
        {
            MessageBox.Show("You didn't select a city.");
        }
        lodging = locFees * days;
        total = registration + lodging;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T18:39:23.230

> 谁能告诉我我做错了什么导致变量没有值？

当然——你忽略了`workshopIndex`不是 0、1、2、3 或 4 的可能性。

如果您认为这永远不会发生，只需添加：

```
default:
    throw new InvalidOperationException("Invalid selected index " + workshopIndex); 
```

或者，如果您只想使用一些默认值，请执行以下操作：

```
default:
    days = 1;
    registration = 100;
    break; 
```

这是您最终可以得到和未分配的*第*一种方式。`days``registration`

接下来，你只需要进入 switch 块 if `lbWorkshop.SelectedIndex != -1`。你的`else`块只是：

```
 else
 {
     MessageBox.Show("You didn't select a workshop.");
 } 
```

...所以在那个`else`块之后，你要继续。你可能想要：

```
 else
 {
     MessageBox.Show("You didn't select a workshop.");
     return;
 } 
```

`locFees`然后，就 switch 语句和`else`块而言，您遇到了同样的问题。

从中学到一件事：感谢编译器为您发现了这些。它阻止了你运行肯定有错误的代码。这总是一件好事。

# ruby-on-rails - 如何从另一个不同的模型构建一个 ActiveRecord 模型？

> ID：12536312
> 
> 赞同：0
> 
> 时间：2012-09-21T18:38:41.750
> 
> 标签：ruby-on-rails, activerecord, constructor

我有两个 ActiveRecord 模型，CartItem 和 OrderItem。虽然 CartItem 是动态的并且包含与各种其他模型的关联，但 OrderItem 是静态的并且表示过去的状态。两者有一些共同的属性，一些不同的属性，还有一些是对方的功能。OrderItems 总是只从 CartItems 创建，所以从逻辑上讲，我似乎应该通过将 CartItem 传递给构造函数来构造一个 OrderItem。我知道我可以构造一个空的 OrderItem，然后使用单独的方法从 CartItem 设置其属性，但这似乎与概念不一致。这样做的适当方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:01:16.263

[您可以按照重载初始化构造函数](https://stackoverflow.com/questions/3958735/in-ruby-is-there-a-way-to-overload-the-initialize-constructor)中的建议，使用哈希作为参数定义 OrderItem 初始化方法，然后在哈希中传递所需的 CartItems 属性以创建 OrderItem。

# curl - 自然语言处理信息

> ID：12536314
> 
> 赞同：-4
> 
> 时间：2012-09-21T18:38:43.667
> 
> 标签：curl, nlp, domparser

我需要一些关于 NLP 的解释。是否可以使用PHP cURL 和DOM Parser 从非结构化的html 内容中提取数据，形成结构化的内容，然后将内容保存到数据库中，这算是NLP 的一种形式吗？任何解释将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:41:10.893

不是。NLP 是一个描述试图分析和理解自然语言的技术的术语。换句话说，NLP 只适用于你真正试图*理解*所说的话。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T06:22:55.080

不是——NLP的意思是Natural Language Processing。你说的任务是纯编程任务，与NLP无关。XML 是一种已知格式，您需要编写一个 XML 解析器才能从 XML 中读取数据并将其格式化为用户所需的数据库数据类型。

从高层次的角度来看，NLP 是关于编写一个可以理解任何人类语言（如英语或法语）并以所需格式存储数据的解析器，然后进一步将这些数据用于任何目的。

假设有一条消息“打开画廊”。您的 NLP 解析器可以解析该语句并且可以发现*open*是一个动词，而那是一个名词。NLP 的这种 NLP 任务称为词性 (POS) 标记。

任何可以以编程方式使用自然语言的任务都称为 NLP。

# php - $facebook->getUser() 在 facebook 登录重定向后继续返回 null

> ID：12536317
> 
> 赞同：0
> 
> 时间：2012-09-21T18:39:00.627
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我在尝试使用官方 php sdk 通过图形 API 对用户进行身份验证时遇到问题。

看起来很简单，但我无法让它工作并且 getUser() 一直返回 null。

这是我以最简单的形式简化的代码：

```
$facebook = new Facebook(array(
      'appId'  => 'ID',
      'secret' => 'SECRET',
      'cookie' => true
    ));

    $user = $facebook->getUser();

    if (!$user):
       $params = array('scope' => 'email','redirect_uri' => 'http://myredirecturi.com');
     ?>
        <a href=" <? echo $facebook->getLoginUrl($params); ?>">Login</a>
    <? endif; ?> 
```

因此，当我单击登录按钮时，我会转到 facebook，然后他们就到达了应有的重定向 url。

我也有 GET 数据：“code”和“state”，所以看起来不错，但是我没有“signed_request”值。

最后，$facebook->getUser() 继续返回 null。

这里有什么问题？

- facebook 对象是否初始化良好？（是否应该将“cookie”设置设置为 true ？）

-redirect_uri 也不是 https uri。有关系吗 ？

- 我应该在 facebook 应用程序设置中寻找一些东西吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:24:26.890

这里的好答案不确定这对你来说是否是同样的问题，但对我有用。基本上在用户授权应用程序之前，您无法获得他们的 Uid。因此，即使他们已登录应用程序，在他们接受之前仍然无法访问。然后将返回 UID。[facebook->getUser() 返回 0](https://stackoverflow.com/questions/8184199/facebook-getuser-returns-0?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T14:52:22.267

如果其他人仍然有此问题，请确保您的应用程序仍未处于沙盒模式 :)

# android - 警报广播器，传递对象或传递ID并从sqlite中提取对象？

> ID：12536320
> 
> 赞同：0
> 
> 时间：2012-09-21T18:39:08.987
> 
> 标签：android, broadcastreceiver, android-sqlite

我需要你的建议。简而言之，我正在设置一个警报（任务提醒类型的应用程序），在该警报到期时，广播公司会在通知栏中放置带有任务信息的通知。任务信息存储在 2 个对象中。

我应该：1）将任务信息放在一个意图（序列化）中，我会在传入的意图警报到期时将其拉起并显示相关信息？

2）不要在意图中传递这两个对象，只需传递一个ID，到期后我会从我的SQL lite db中拉出这两个对象来显示它们吗？

哪一种更有效，更好的方法呢？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:48:19.947

我只是通过身份证。这将为您省去很多序列化和反序列化的麻烦。

# c# - 如何在 HTML 中嵌入图像（不使用 LinkedResource 或 CDO）

> ID：12536326
> 
> 赞同：0
> 
> 时间：2012-09-21T18:39:42.963
> 
> 标签：c#, html

这是情况：我想创建带有嵌入图像的 HTML 文档，如下所示：

```
<html>
 <head>
 </head>
 <body>
  <img src="?" />
 </body>
</html> 
```

在哪里 ”？” 可以以某种方式指向嵌入的图像数据。也许如果 javascript 可以解码 .net 生成的 base64 字符串，它可以让我更接近我的目标......这个文档是动态生成的并提交到文档系统。所以我不能使用 LinkedResource 使用任何外部链接到图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:42:33.850

您应该检查 MHTML 格式。它用于将 HTML 与嵌入式资源相结合。

[http://en.wikipedia.org/wiki/MHTML](http://en.wikipedia.org/wiki/MHTML)

请务必查看支持该格式的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T20:48:15.843

这是生成 mhtlm 的一些很好的链接：

[http://www.codeproject.com/Articles/8268/Convert-any-URL-to-a-MHTML-archive-using-native-NE](http://www.codeproject.com/Articles/8268/Convert-any-URL-to-a-MHTML-archive-using-native-NE)

# java - Wicket TreeTable 删除节点图标

> ID：12536328
> 
> 赞同：0
> 
> 时间：2012-09-21T18:39:45.587
> 
> 标签：java, tree, treeview, wicket

有没有办法从 TreeTable 组件中删除注释图标？我在很多地方搜索过，但我找不到删除它的方法。

文档说 getNodeIcon 和 newNodeIcon 是从 DefaultAbstractTree 继承的，但我不能调用它们或覆盖它们。而且我不太确定它们是否可以解决我的问题。有没有办法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T07:28:02.847

我没有尝试它是否有效，但我认为你可以重写这样的方法来实现你想要的：

```
new TreeTable("treetable", columns) {
    @Override
    protected Component newNodeIcon(MarkupContainer parent, String id, TreeNode node) {
        Component icon = new Label(id, "");
        icon.setVisible(false);
        return icon;
    }
}; 
```

# c# - 检测移动浏览器并重定向到移动站点的更好位置

> ID：12536329
> 
> 赞同：3
> 
> 时间：2012-09-21T18:39:49.733
> 
> 标签：c#, asp.net

任何人都可以建议我哪个是验证移动浏览器并重定向到移动网站的更好地方。

我正在考虑使用[`DetectMobileBrowsers`](http://detectmobilebrowsers.com/)来验证移动浏览器。

我正在考虑在`Application_Start`or中执行此操作`Session_Start`。请建议我哪个是做同样事情的更好的地方。

这是我的 Session_Start 块

```
Protected Sub Session_Start(ByVal sender As Object, ByVal e As EventArgs)
    ' Fires when the session is started
    'Dim request As HttpRequest = HttpContext.Current.Request
    'If request.Browser.IsMobileDevice Then
    '    Response.Redirect("http://localhost:26270/Default.aspx")
    'End If
    Response.Redirect("http://google.com")
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T17:59:01.207

与其使用`Response.Redirect("http://m.yoursite.com")`它，不如使用 2 行，它会暂时将您重定向到移动版本。最好使用：

```
Response.Status="302 Moved Temporarily"
Response.AddHeader "Location","http://m.yoursite.com" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:45:15.003

你可能应该把它放进去`Session_Start`因为一旦建立会话，设备将保持不变，当用户第一次访问该站点时，该会话将被称为触发。

只是谷歌并阅读它..

仅供参考，`Application_Start`在应用程序域的生命周期内调用一次，并且`Session_Start`每次创建新会话时都会引发事件。

阅读应用程序生命周期将帮助您更好地理解所有这些事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T19:38:00.400

考虑 Application_BeginRequest。请务必检查请求 Url 是您请求的页面，这样您就不会对请求的每个静态文件进行检查。

```
void Application_BeginRequest(object sender, EventArgs e)
{
   var u = Request.ServerVariables("HTTP_USER_AGENT");
   var uri =  Request.Url.AbsoluteUri.ToLower();
   if (url.Contains(".aspx"))
   {
      //put DetectMobileBrowsersCode Here

      if (b.IsMatch(u) || v.IsMatch(Left(u, 4)))
      {
          Response.Redirect("http://m.yoursite.com");
      } 
   }   
} 
```

# haskell - 类构造函数的语法

> ID：12536333
> 
> 赞同：1
> 
> 时间：2012-09-21T18:39:58.877
> 
> 标签：haskell

我有这个代码：

```
data SafeValue a = SafeValue a a a deriving Eq

class Safe a where
  check::a->Bool
  (+++)::a->a->a

instance (Num a, Eq a) => Safe (SafeValue a) where
  check (SafeValue x y z) | x == y = True
                          | x == z = True
                          | y == z = True
                          | otherwise = False
  (SafeValue a b c)+++(SafeValue x y z) = let new_val = SafeValue (a+x) (b+y) (c+z)
                                          in if check new_val then new_val
                                                              else error "Error" 
```

我想添加`class Safe`一个功能，例如：

```
make_new 3 --> SafeValue 3 3 3 
```

我不知道如何添加它，因为小费应该是这样的：

```
make_new::b->a 
```

但在`istance`声明中`ghci`声称它不确定是什么`b`。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T18:47:24.673

核心问题是您承诺`make_new`适用于*所有*类型`b`以产生`a`. 然而，考虑到它是如何工作的，这没有任何意义`SafeValue a`：给定一些 type `a`，你会`SafeValue a`出局。所以你真正想要的是获取`make_new`某种类型的值，`a`但给你一个`SafeValue a`. 更一般地说，您希望结果是某种类型`s a`，其中`s`您正在为其编写实例的实际类型并且`a`可以是*任何*类型。

您需要做的是让该类接受“高级”类型的值。（这意味着该类应该期望这样的类型`SafeValue`需要一个进一步的参数。您可以这样做：

```
class Safe s where
  check :: s a -> Bool
  (+++) :: s a -> s a -> s a
  make_new :: a ->  s a 
```

然后您的实例将如下所示：

```
instance Safe SafeValue where ... 
```

请注意重要的区别：`SafeValue a`您在 for`SafeValue` *没有*类型参数的情况下创建实例，而不是创建实例。

但是，这还有另一个问题：现在您不能限制`a`成为`Num`and的一部分`Eq`！

您可以使用称为多参数类型类的扩展来解决此问题。所以你的最终版本是：

```
class Safe s a where
  check :: s a -> Bool
  (+++) :: s a -> s a -> s a
  make_new :: a -> s a 
```

你的实例是：

```
instance (Num a, Eq a) => Safe SafeValue a where ... 
```

为了使所有这些工作，您需要启用两个扩展：

```
{-# LANGUAGE FlexibleInstances     #-}
{-# LANGUAGE MultiParamTypeClasses #-} 
```

第一个允许您以更多方式编写实例。通常，您只能为看起来像`T a b c`where`T`是类型并且`a b c`是类型变量的类型编写实例；有了这个扩展，限制就解除了，你可以像我展示的那样编写实例。

多参数类型类扩展允许作用于一种以上类型的类型类。这允许您创建一个依赖于`s` *和* `a`的类。

最后一点：使用类型类可能根本不是您的示例的正确选择。您打算为该`Safe`课程编写更多类型吗？如果你不是，那么你根本不应该使用类型类。但是，学习一点关于多参数类型类的知识仍然很有用，因此您应该考虑在某个时候使用它们。

# svn - 一次转储 Subversion 存储库一个修订版

> ID：12536343
> 
> 赞同：2
> 
> 时间：2012-09-21T18:40:39.877
> 
> 标签：svn, svnadmin, svndump, svn-administraton

我们有一个庞大而草率的 Subversion 存储库，其中包含 60 多个项目。、`trunk`和目录位于存储库的根目录中`branches`。`tags`一些分支已经完成`branches/project/branchName`。别人都做完了`branches/BranchName/project`。有很多杂物。

有近 200,000 个修订版、22Gb 和 60 多个项目。

我想重组存储库，所以每个项目都有自己的存储库，并制定标准的分支策略。转储整个存储库大约需要 7 到 8 个小时，然后过滤掉我想要的内容是一个非常漫长的过程，因为我必须运行`svndumpfilter`多次。

我正在考虑一个新的策略。如果我查看单个项目中涉及的修订，我们可能会谈论 400 个修订。我知道我可以进行`svnadmin dump`一系列修订。如果我只转储我感兴趣的项目的修订版怎么办？我可以`svnadmin dump`为每个修订版运行。我认为这实际上可能会更快。但是，这将如何影响加载到新存储库中？

是否存在仅转储我想要的修订的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-09T16:46:25.380

我想到的第一个问题是您无法将新转储直接加载到新存储库中，因为这些转储将缺少创建父文件夹（*trunk/branches/tags*等）的节点，并且`svnadmin load`命令将因`File not found`错误而失败。因此，您必须事先创建它们，如下所示：`svn mkdir http://server/svn/ProjectX/Trunk -m "Created Trunk"`

再想一想，如果对您的项目的提交具有交叉引用，则可能存在各种其他问题。例如，您将 1000 到 1500 的修订版本转储为`/branches/ProjectX/branch`，但转储中的某些节点将包含`Node-copyfrom-rev: 800`和`Node-copyfrom-path: /branches/ProjectY/branch`标头，因为开发人员只是想要该项目中的一些共享文件并使用该`svn copy`命令。这里将开始疯狂的过滤。为了缓解这种情况，您可以尝试使用[svndumpfilterIN](https://github.com/jasperlee108/svndumpfilterIN)脚本处理这些转储，该脚本将为您从实时 repo 中提取丢失的文件`svnlook`。但请注意，它有自己的错误（请参阅我对这个问题的回答：[SVNDumpFilter changed paths before adding them?](https://stackoverflow.com/questions/24889480/svndumpfilter-changing-paths-before-adding-them)）。

第三个想法是，如果您想为每个项目单独存储库，您可能还希望将转储的项目重新定位到根文件夹，这就是事情变得非常混乱的地方。例如，我所知道的几乎没有一个工具能够在转储中重新定位路径，例如[Svn-DumpReloc](http://search.cpan.org/~salva/SVN-DumpReloc-0.02/bin/svn-dump-reloc)、[svndumpsanitizer](https://github.com/dsuni/svndumpsanitizer)（不确定[svndumptool](https://github.com/jwiegley/svndumptool)与合并黑客）进程`svn:mergeinfo`属性，这**将**导致您的转储导入失败。

因此，鉴于您的限制，我看不到使用部分转储的解决方案，这不需要事后对存储库和转储文件进行一些手动修改。

# java - 谁能帮我找到这个页面？

> ID：12536344
> 
> 赞同：-5
> 
> 时间：2012-09-21T18:40:41.167
> 
> 标签：java, oracle, reference, sun

由于 Sun 被 Oracle 收购，因此以下链接已断开。有谁知道这个页面是关于什么的，我在哪里可以找到它？谢谢！

[http://developer.java.sun.com/developer/technicalArticles/ALT/RefObj/](http://developer.java.sun.com/developer/technicalArticles/ALT/RefObj/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:44:21.493

这是 Monica Pawlan 1998 年 8 月的文章“参考对象和垃圾收集”，目前在[http://pawlan.com/monica/articles/refobjs/](http://pawlan.com/monica/articles/refobjs/)上在线。

# php - Kohana 路由问题

> ID：12536350
> 
> 赞同：0
> 
> 时间：2012-09-21T18:40:51.947
> 
> 标签：php, routes, kohana, kohana-3

我知道有无数关于这方面的线索，但我希望能有一个快速指针来解释我在这里缺少什么。我有一个名为的控制器`Controller_Index_Orders`，它位于`/conroller/orders/index.php`. 它有一种方法`action_index()`。然后我有以下路线代码：

```
Route::set('orders', 'orders(/<action>)')
    ->defaults(array(
        'controller' => 'orders',
        'action'     => 'index',
    )); 
```

当我去`baseUrl/orders/`或`baseUrl/orders`我得到一个 404 时。我在这里错过了什么？

编辑：

Controller_Orders 现在在 /controllers/orders.php 路由如下：

```
Route::set('orders', 'orders(/<action>)')
    ->defaults(array(
        'controller' => 'orders',
        'action'     => 'index',
    )); 
```

转到 baseUrl/orders 或 baseUrl/orders/ 仍然无法正常工作。

编辑2：

默认路由。

Route::set('default', '((/(/)))') ->defaults(array( 'controller' => 'index', 'action' => 'index', ));

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:50:47.960

你的名字全是乱七八糟的。如果你有一个控制器`Controller_Index_Orders`，它应该驻留在`classes/controller/index/orders.php`. 您还需要在您的路线中指定正确的控制器：`'controller' => 'index_orders'`. 你可能还得把`directory`钥匙扔进去。

# jquery - 检测单选/复选框的变化

> ID：12536351
> 
> 赞同：0
> 
> 时间：2012-09-21T18:40:58.687
> 
> 标签：jquery, checkbox, radio-button

我正在重写我的一个插件，我想尝试解决我们过去遇到的问题。

[jsFiddle 演示](http://jsfiddle.net/Mattio2187/HruGP/)

当您通过单击选中复选框时，将触发更改事件。它正在控制台中记录。

但是，如果您使用它左侧的按钮，则不会触发“更改”。

使用该插件，如果用户使用他们已有的代码动态检查复选框或单选按钮，我希望能够检测到此更改。

有什么想法吗？

HTML：

```
<input type="button" name="check" value="Checkbox" />
<input type="checkbox" name="newsletter" value="true" />​ 
```

jQuery：

```
$(function() {

    // This toggle checks and unckecks the box
    $('input:button').toggle(function() {
        $('input:checkbox').prop("checked", true);
    }, function() {
        $('input:checkbox').prop("checked", false);
    });

    // Detects change of checkbox           
    $('input:checkbox').on("change", function() {
        console.log('checked!');
    });

});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:44:47.713

最简单的解决方法是手动触发更改事件：

```
$('input:checkbox').prop("checked", true).change(); 
```

[http://jsfiddle.net/HruGP/1/](http://jsfiddle.net/HruGP/1/)

**编辑：**您还可以简化按钮代码而不是使用`toggle`，只需使用 a`click`并将`checked`属性分配给其当前值的反面：

```
$('input:button').on('click',function() {
    var $checkbox = $('input:checkbox');
    $checkbox.prop('checked', !$checkbox.is(':checked')).change();
}); 
```

[http://jsfiddle.net/HruGP/3/](http://jsfiddle.net/HruGP/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:46:49.553

您可以只触发复选框上的单击事件，而不是手动更改属性：

```
$('input:checkbox').click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:52:23.730

```
$('input:button').click(function(){
    $('input:checkbox').trigger("change");
}); 
```

这允许在您单击按钮时触发“更改”事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:53:02.707

是的，触发复选框，我会这样做（替换小提琴中代码的第一部分）：

```
// This toggle checks and unckecks the box
$('input:button').on('click', function(event){
    $('input:checkbox').trigger('click');             
}); 
```

当然，假设您的目标是使按钮成为您选中或取消选中框的方式。

# twitter-bootstrap - 具有流畅布局的 Bootstrap Affix 插件

> ID：12536354
> 
> 赞同：17
> 
> 时间：2012-09-21T18:41:15.583
> 
> 标签：twitter-bootstrap, fluid-layout

如果我想在流畅的布局中使用侧边栏的附加插件，但侧边栏的宽度总是在附加时发生变化，并且响应式设计也不起作用。

在 Bootstrap 文档中，词缀插件不与流体布局一起使用。也许是因为他们有同样的问题。

有人知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-06-21T20:25:23.147

为使 affix 与流体`span3`侧边栏一起使用，您需要添加一些 javascript 来限制宽度并管理调整大小。

我只是写了一个小 javascript 函数来完成这项工作。

从引导程序中查看[此错误。](https://github.com/twitter/bootstrap/issues/6350#issuecomment-19838255)

```
/*
* Clamped-width. 
* Usage:
*  <div data-clampedwidth=".myParent">This long content will force clamped width</div>
*
* Author: LV
*/
$('[data-clampedwidth]').each(function () {
    var elem = $(this);
    var parentPanel = elem.data('clampedwidth');
    var resizeFn = function () {
        var sideBarNavWidth = $(parentPanel).width() - parseInt(elem.css('paddingLeft')) - parseInt(elem.css('paddingRight')) - parseInt(elem.css('marginLeft')) - parseInt(elem.css('marginRight')) - parseInt(elem.css('borderLeftWidth')) - parseInt(elem.css('borderRightWidth'));
        elem.css('width', sideBarNavWidth);
    };

    resizeFn();
    $(window).resize(resizeFn);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T20:02:34.267

他们网站上的附加演示是响应式的，它按预期将自己定位在页面顶部。移动设备和较小屏幕上的`position:fixed`CSS 属性不是一个可行的选项，因此功能被删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T02:53:48.340

您必须为侧边栏显式设置宽度属性（或最小宽度）。如果您查看 Andres 指向的页面，“bs-docs-sidenav”类的显式宽度为 228px。

这会覆盖“.span3”类并防止侧边栏在滚动时调整大小。

如果您删除该显式宽度声明并滚动页面，则侧边栏会调整大小，就像您在自己的页面中看到的问题一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-08T14:00:37.523

```
$(document).ready(function () {
  setTimeout(function () {
    $('.sidebar > *').affix({
      offset: {
        top: function () { return $window.width() <= 980 ? 290 : 210 }
        , bottom: 270
      }
    })
  }, 100)
}); 
```

您的页面在哪里：

```
<div class="span2 navper">
  <ul class="nav nav-tabs nav-stacked" data-spy="affix">
    <li><a href="#">Homepage</a></li>
    <li><a href="#">Homepage</a></li>
    <li><a href="#">Homepage</a></li>
    <li><a href="#">Homepage</a></li>
    <li><a href="#">Homepage</a></li>
  </ul>
</div> 
```

# c# - 按 id 在视图中显示记录

> ID：12536355
> 
> 赞同：1
> 
> 时间：2012-09-21T18:41:16.727
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework

我有一个包含问题的表格，我还有一个表格，其中包含在答案表中列出的问题 ID。为了重复数据，我只使用 id。

我的问题是如何根据当前表中的 ID “在视图中”填充问题。MainQuestionID 已经加入了它们。我首先使用 DBEntities 代码。

这是我的页面视图模型。

```
 public class AuditFormEdit
    {
    public Models.MainQuestion MainQuestionID { get; set; }

    public ICollection<MainQuestion> mainQuestion { get; set; }

    public List<SubcategoryHelper> SubcategoryHelperGet { get; set; }

    public class SubcategoryHelper : Models.SubCategory
    {
        public SubcategoryHelper(Models.SubCategory subCat)
        {
            this.SubCategoryID = subCat.SubCategoryID;
            this.SubcategoryName = subCat.SubcategoryName;
        }

    }

    public Models.MainAnswer MainAnswerInstance { get; set; }

    public List<ScoreCardCheckBoxHelper> ScoreCardCheckBoxHelperList { get; set; }

    public void InitializeScoreCheckBoxHelperList(List<Models.Score> ScoreList)
    {
        if (this.ScoreCardCheckBoxHelperList == null)
            this.ScoreCardCheckBoxHelperList = new List<ScoreCardCheckBoxHelper>();

        if (ScoreList != null
            && this.MainAnswerInstance != null)
        {
            this.ScoreCardCheckBoxHelperList.Clear();
            ScoreCardCheckBoxHelper scoreCardCheckBoxHelper;
            string scoreTypes =
                string.IsNullOrEmpty(this.MainAnswerInstance.Score) ?
                string.Empty : this.MainAnswerInstance.Score;
            foreach (Models.Score scoreType in ScoreList)
            {
                scoreCardCheckBoxHelper = new ScoreCardCheckBoxHelper(scoreType);
                if (scoreTypes.Contains(scoreType.ScoreName))
                    scoreCardCheckBoxHelper.Checked = true;
                this.ScoreCardCheckBoxHelperList.Add(scoreCardCheckBoxHelper);
            }
        }
    }

    public void PopulateCheckBoxsToScores()
    {
        this.MainAnswerInstance.Score = string.Empty;
        var scoreType = this.ScoreCardCheckBoxHelperList.Where(x => x.Checked)
                              .Select<ScoreCardCheckBoxHelper, string>(x => x.ScoreName)
                              .AsEnumerable();
        this.MainAnswerInstance.Score = string.Join(", ", scoreType);
    }

    public class ScoreCardCheckBoxHelper : Models.Score
    {
        public bool Checked { get; set; }

        public ScoreCardCheckBoxHelper() : base() { }

        public ScoreCardCheckBoxHelper(Models.Score score)
        {
            this.ScoreID = score.ScoreID;
            this.ScoreName = score.ScoreName;
        }
    }

} 
```

如您所见，我正在为 MainQuestions 调用 ICollection，但我不确定如何填充问题。它们还必须基于 sectionID 进行填充。

2012 年 9 月 21 日 2:51 修订

或者，如果我显示问题列表然后在回答时将更新答案表而不是当前显示的表，我将如何将两者联系起来。

# macos - 如何检测 OS X 中大写锁定键的键向上或键释放？

> ID：12536356
> 
> 赞同：5
> 
> 时间：2012-09-21T18:41:18.350
> 
> 标签：macos, cocoa, keyboard, appkit, nsevent

我在 OS X 检测击键时遇到问题。每当按下键盘键时，我都需要检测按键按下和按键释放或按键向上。当使用`[ NSEvent addLocalMonitorForEventsMatchingMask: handler: ]`. 这使您可以拦截和修改`NSEvent`各种事件类型的 s，包括常规打印键，以及`NSKeyUp`可用于检测 shift、ctrl、alt 和 cmd 键的 s。事实上，由于 shift、ctrl、alt 和 cmd 键的上键和下键的修饰符标志都发生了变化，因此可以通过检查.`NSKeyDown``NSFlagsChanged``NSFlagsChanged``[NSEvent modifierFlags]``[NSEvent keyCode]`

但是，Capslock 是不同的。因为 capslock 修饰符实际上只对按下的键起作用，所以当你按下 capslock 时，你只会得到一个`NSFlagsChanged`with capslock 被按下，而不是在它被释放时。并且不会使用修饰键（如 capslock 和 shift 和 ctrl 等）发出`NSKeyUp`。`NSKeyDown`

任何人都可以提出一种方法，甚至是较低级别的界面，来获取大写锁定键事件吗？我将不得不求助于使用 kqueues 或其他东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-09T19:18:18.683

IOHIDLib 似乎是这样做的唯一方法。我（或实际上是一个队友）使用 IOHIDManager 设置了一个事件回调，该回调成功拦截了 capslock key-up 和 key-down 事件。

可怕的是，这完全在 Cocoa/CoreFoundation 事件分派机制之外，这意味着即使您的应用程序失去焦点，您也会收到事件。你最终不得不自己做很多窗口管理和焦点检测。

但它确实有效。

# c# - FormView FindControl 无法转换 ToInt32

> ID：12536357
> 
> 赞同：1
> 
> 时间：2012-09-21T18:41:20.950
> 
> 标签：c#

我有一个接受整数参数的类 Cust_Result。

所以在我的主页上，当它加载时，我绑定了一个表单视图来显示我检索到的数据。现在我想提取我的“id”标签的值并将其分配给我可以传递给我的 Cust_Result 类的变量，但我一直收到这个错误

> “无法将‘System.Web.UI.WebControls.Label’类型的对象转换为‘System.IConvertible’类型。”

我假设这是因为我试图将字符串值发送到需要整数值的参数，但我不确定如何进行转换。

我的代码

```
 int cust;

       cust = (Convert.ToInt32(FormView1.Row.FindControl("ID"))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:43:37.807

您需要一个字符串来转换，这就是`Label.Text`属性（不仅仅是标签）。

我将它分为两​​个步骤：

```
Label lbl = FormView1.Row.FindControl("ID") as Label;
// option to bail out when lbl == null 
cust = Convert.ToInt32(lbl.Text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:43:59.253

首先将控件转换为Label

```
var label = (Label)FormView1.Row.FindControl("ID"); 
```

然后就可以得到标签中的值了：

```
var cust = int.Parse(label.Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:45:43.567

仔细查看编译器错误 - 它没有说任何`string`和`int`- 它正在谈论`IConvertible`和`Label`- 尽管它提到`Label`而不是`Control`暗示这不是您实际发布的代码的事实。`Convert.ToInt32`不知道如何处理 a`Control`或 a `Label`- 在这种情况下，我相信您想要标签的*文本*，所以我会这样写：

```
 Label label = (Label) FormView1.Row.FindControl("ID");
 // Potentially check for "label" being null here, i.e. the control wasn't found
 int cust = Convert.ToInt32(label.Text); 
```

尚不完全清楚此值的来源，但您可能也需要考虑使用`int.TryParse`而不是`Convert.ToInt32`。

我还注意到这`Cust_Result`是一个非常规的名称 - 尝试：

*   避免缩写（Cust 意味着客户，我猜？）
*   不要使用下划线
*   尝试给出更有*意义的*名称——甚至`CustomerResult`没有真正解释它的结果*是*什么。

# java - 全局 MySQL 连接还是每个请求一个连接？

> ID：12536360
> 
> 赞同：1
> 
> 时间：2012-09-21T18:41:34.867
> 
> 标签：java, mysql, jakarta-ee, servlets

我有几个 servlet 在 Tomcat 服务器上工作。现在我让他们为每个请求创建数据库连接并在使用后关闭它们。这可能会导致建立/关闭连接的巨大开销。使用单个连接管理器 servlet 在所有 servlet 之间共享一个全局连接怎么样（即所有 servlet 使用相同的连接）。这是一个好的做法还是并发操作可能存在问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:46:11.973

我认为您需要尽可能考虑使用连接池。

这样您就不必担心创建连接/关闭开销。

当你想要连接时，你可以从池中获取它，当你完成连接时，调用 close() 它将连接返回到池。

请参阅此[讨论](http://onjava.com/onjava/2006/04/19/database-connection-pooling-with-tomcat.html)以了解连接池的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:46:33.437

您应该阅读有关连接池的信息：

C3PO、BoneCP、DBCP

这是可用的最好和流行的连接池，我在我的生产项目中使用 BoneCP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:56:13.003

> 这可能会导致建立/关闭连接的巨大开销。

你是对的，如果过于频繁，连接建立和关闭它被证明是昂贵的操作。

> 使用单个连接管理器 servlet 在所有 servlet 之间共享全局连接怎么样（即所有 servlet 使用相同的连接）

尽管 JDBC 规范并没有阻止连接被多个线程共享，但这被认为是一种不好的做法，因为它可能依赖于驱动程序的实现。因此，每个数据库会话一个连接会产生更多可移植和可维护的代码。

JDBC 规范建议使用`DataSource`对象来池连接以避免上面提到的开销。

> 要获得连接，应用程序可以与以下任一交互：
> 
> *   使用一个或多个 Driver 实现的 DriverManager 类
> 
> 或者
> 
> *   数据源实现
> 
> 使用 DataSource 对象是首选方法，因为它增强了应用程序的可移植性，使代码维护更容易，并且使应用程序可以透明地使用连接池和分布式事务。所有与数据源建立连接的 J2EE 组件都使用 DataSource 对象来获得连接。

# php - 如何重写数组值？

> ID：12536362
> 
> 赞同：0
> 
> 时间：2012-09-21T18:41:53.977
> 
> 标签：php, arrays, replace

我在另一个数组中有一个数组，我想更改键中的值。

```
 //Obtenemos el numero de arrays
        $count = array();
        for($i = 0; $i < count($passer); $i++)
        {   
              if(array_key_exists($passer[1],$passer[$i])) {
              $passer[1] = "hola";
              }
             $count[] = $passer[$i];  
        }
        //return....
        return $count; 
```

我需要更改键为 1 的条目并替换值。我有这个数组输出：

```
array
(
     [0]=>array
          (
          [0]=>81278
          [1]=>87364
          [2]=>34923
          )
     [1]=>array
          (
          [0]=>81278
          [1]=>87364
          [2]=>34923
          )
) 
```

但我收到一个错误：

```
Warning: array_key_exists() [function.array-key-exists]: 
```

知道这意味着什么以及该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:46:24.367

你应该改变几件事。首先，您编写`for`语句的方式不是最佳的，它会`count()`在每次迭代时执行该函数，让它像这样

```
for($i = 0, $c = count($passer); $i < $c; $i++) 
```

第二，你的问题。您需要检查数组中的`key`（在您的情况下是静态的） ，因此您的函数应如下所示`1``$passer[$i]``array_key_exists()`

```
array_key_exists(1,$passer[$i]) 
```

`array_key_exists`期望第一个参数是您希望检查的`key`第二个参数`array`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:43:59.273

我想你的意思是把`array_key_exists($passer[1], $passer)`

第二个参数必须是一个数组，但在您的示例中，您将数组的元素传递给它（这不是数组，因此是 php 警告）。

[http://php.net/manual/en/function.array-key-exists.php](http://php.net/manual/en/function.array-key-exists.php)

# iphone - 在iOS6上从后台返回后应用程序崩溃

> ID：12536364
> 
> 赞同：3
> 
> 时间：2012-09-21T18:42:02.710
> 
> 标签：iphone, xamarin.ios, monodevelop, ios6

我有一个在 iOS 5 上运行良好的应用程序，但在 iOS 6 上进行了一些测试后，它运行良好，除了在运行后返回应用程序时。一旦它从后台返回，它就没有响应，然后在大约 10 秒后崩溃。

WillEnterForeground() 执行得很好，里面只有一些简单的代码。

检查电话上的控制台，我看到以下内容：

```
Sep 20 16:41:07 Seans-iPhone-4 kernel[0] <Debug>: launchd[985] Builtin profile: container (sandbox)
Sep 20 16:41:07 Seans-iPhone-4 kernel[0] <Debug>: launchd[985] Container: /private/var/mobile/Applications/F73BBA70-90D1-4CB6-B7F3-FF10289396A9 (sandbox)
Sep 20 16:41:29 Seans-iPhone-4 backboardd[52] <Warning>: TrekkTrakker failed to resume in time
Sep 20 16:41:29 Seans-iPhone-4 backboardd[52] <Warning>: Forcing crash report of TrekTrakkerSimp[985]...
Sep 20 16:41:30 Seans-iPhone-4 backboardd[52] <Warning>: Finished crash reporting.
Sep 20 16:41:30 Seans-iPhone-4 com.apple.launchd[1] (UIKitApplication:TrekkTrakker[0x28c2][985]) <Notice>: (UIKitApplication:TrekkTrakker[0x28c2]) Exited: Killed: 9
Sep 20 16:41:30 Seans-iPhone-4 backboardd[52] <Warning>: Application 'UIKitApplication:TrekkTrakker[0x28c2]' exited abnormally with signal 9: Killed: 9
Sep 20 16:41:30 Seans-iPhone-4 ReportCrash[987] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Sep 20 16:41:31 Seans-iPhone-4 ReportCrash[987] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/TrekTrakkerSimple_2012-09-20-164129_Seans-iPhone-4.plist using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

任何人都遇到过类似的问题，或者有任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:50:58.863

如果您不使用 ARC，则很可能是您向其发送消息的发布内容存在问题。几乎所有发布的 iOS 版本都暴露了一些一直存在的错误，但无论出于何种原因，直到新版本才出现。

在调试器中运行并查看崩溃附近级别中的所有代码，以寻找一些愚蠢的东西，例如未保留的对象或您虽然是但不是的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T15:45:01.303

由于应用程序在 10 秒的窗口中没有响应，您的应用程序正在崩溃或者被 WatchDog 强制退出。这意味着您的应用程序启动时间过长，这可能是由于调用在 iOS 6 上卡住了，或者更可能是由于某种原因 iOS 6 设备运行速度稍慢。使用 Time Profiler 工具查看启动时间的去向并确保 applicationDidFinishLaunching: 尽快返回，WatchDog 崩溃的大多数情况是由于该方法中的挂起。

# jquery - 将 jstree 窗格设置为苹果主题不起作用

> ID：12536373
> 
> 赞同：0
> 
> 时间：2012-09-21T18:42:47.657
> 
> 标签：jquery, jstree

我正在使用 jstree 插件，如下所示，它作为默认视图工作：

```
$("#div1").jstree({
    "xml_data": {
        "ajax": {
            "url": "data.xml"
        },
        "xsl": "nest"
    },
    "plugins": ["themes", "xml_data", "ui", "types"]
}).bind("select_node.jstree", function(event, data) {
    $("#div1").jstree("set_theme", "apple"); 
```

当我使用它`($("#div1").jstree("set_theme", "apple");)`时，所有文件夹图像和点都会消失。我真的很喜欢苹果视图，并希望让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:02:46.937

我的苹果文件夹中缺少 style.css 文件。一旦我把文件放在那里，我就是金子。

# matlab - 在matlab的GUI上用鼠标绘图

> ID：12536376
> 
> 赞同：6
> 
> 时间：2012-09-21T18:42:59.437
> 
> 标签：matlab, matlab-guide

我想在matlab中有一个带有GUI的程序，在运行程序时，用户可以用鼠标在GUI的轴上绘制任何东西，我想将创建的图像保存在矩阵中。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T08:21:55.237

最后我找到了一个很好的代码，并且我已经更改了一些为我定制的部分。通过这种方式，用户可以用鼠标在轴上绘制任何东西：

```
function userDraw(handles)
%F=figure;
%setptr(F,'eraser'); %a custom cursor just for fun

A=handles.axesUserDraw; % axesUserDraw is tag of my axes
set(A,'buttondownfcn',@start_pencil)

function start_pencil(src,eventdata)
coords=get(src,'currentpoint'); %since this is the axes callback, src=gca
x=coords(1,1,1);
y=coords(1,2,1);

r=line(x, y, 'color', [0 .5 1], 'LineWidth', 2, 'hittest', 'off'); %turning     hittset off allows you to draw new lines that start on top of an existing line.
set(gcf,'windowbuttonmotionfcn',{@continue_pencil,r})
set(gcf,'windowbuttonupfcn',@done_pencil)

function continue_pencil(src,eventdata,r)
%Note: src is now the figure handle, not the axes, so we need to use gca.
coords=get(gca,'currentpoint'); %this updates every time i move the mouse
x=coords(1,1,1);
y=coords(1,2,1);
%get the line's existing coordinates and append the new ones.
lastx=get(r,'xdata');  
lasty=get(r,'ydata');
newx=[lastx x];
newy=[lasty y];
set(r,'xdata',newx,'ydata',newy);

function done_pencil(src,evendata)
%all this funciton does is turn the motion function off 
set(gcf,'windowbuttonmotionfcn','')
set(gcf,'windowbuttonupfcn','') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:53:38.557

该`ginput`函数获取图形中鼠标点击的坐标。您可以将它们用作线、多边形等的点。

如果这不符合您的需求，您需要描述您希望用户绘制的确切内容。

对于徒手绘图，这可能会有所帮助：

[http://www.mathworks.com/matlabcentral/fileexchange/7347-freehanddraw](http://www.mathworks.com/matlabcentral/fileexchange/7347-freehanddraw)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T18:55:22.430

我知道使用鼠标与 matlab 窗口交互的唯一方法是 ginput，但这现在可以让你流畅地绘制任何东西。

有一些方法可以在 matlab 中使用 Java Swing 组件，请查看[http://undocumentedmatlab.com/](http://undocumentedmatlab.com/)了解更多信息。

编辑：您可能也想检查一下。

[http://blogs.mathworks.com/videos/2008/05/27/advanced-matlab-capture-mouse-movement/](http://blogs.mathworks.com/videos/2008/05/27/advanced-matlab-capture-mouse-movement/)

# mysql - MySQL Count If DateDiff

> ID：12536388
> 
> 赞同：2
> 
> 时间：2012-09-21T18:43:53.377
> 
> 标签：mysql, count

我想在一张表中计算不同的条件：

```
SELECT gt.smechanic as 'Mech ID', 
       gm.mechanic_name as 'Mech Name', 
       count(gt.smechanic) as 'Total Invoices Not Received',
       count(if(datediff(gt.dispatch_date, curdate()) < 10,1,0)) as 'Within 10 days' 
from gt 
straight_join gm on gt.smechanic = gm.mechanic_id 
where gt.status = 3 or gt.status = 5 
group by gt.scheduled_mechanic 
```

我不确定我是否用这个语句取消了自己，因为在我计算的两列中返回了相同的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:52:30.007

您需要`SUM()`在第二列中使用，而不是`COUNT()`： COUNT 仅计算记录，它不关心其中的值是 0 还是 1。但是，SUM 将返回符合您条件的所有记录的总数。

```
SUM(IF(DATEDIFF(gt.dispatch_date, CURDATE()) < 10, 1, 0)) 
```

我还要指出，选择未分组的非聚合列会使您容易受到不可预测的结果的影响。我会将 GROUP BY 子句更改为

```
GROUP BY gt.smechanic, gm.mechanic_name 
```

# mysql - 在 WHERE 语句中添加和比较列

> ID：12536394
> 
> 赞同：1
> 
> 时间：2012-09-21T18:44:23.693
> 
> 标签：mysql, database

所以我正在尝试运行一个在`WHERE`语句中进行一些数学运算的查询。我写的似乎是正确的，但它似乎不起作用。

```
SELECT *
FROM table
WHERE col_a + col_b != col_d 
```

基本上我想查看`col_a`添加到的所有记录`col_b`不加起来`col_d`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:49:29.883

我可以想到这似乎不起作用的三个原因。

第一个是最有可能的：一个或多个值是 NULL。要解决此问题，请使用 COALESCE：

```
where coalesce(col_a, 0) + coalesce(col_b, 0) <> coalesce(col_d, 0) 
```

另一个原因是结果在您看来是相同的，但在浮点表示中，它们确实不同。因此，0.999999999 + 5.0 可能看起来像“6.0”，但它不等于“6.0”，因为差异在一个遥远的小数点。

第三个原因是算术溢出或打字问题（将小整数与浮点数等混合）。

# php - FOSOAuthServerBundle - 授权码已过期

> ID：12536395
> 
> 赞同：0
> 
> 时间：2012-09-21T18:44:27.403
> 
> 标签：php, api, symfony

使用 Symfony 2.0 和 FOSOAuthServerBundle 来实现 API Rest，我遇到了一些麻烦。

我都配置好了。我有一个正确创建的客户端，我正在尝试通过网络浏览器测试这个东西（尽管最后一件事是使用 iOS APP 的 API）。

这些是步骤：

1.  获取授权码：一切正常，我将授权码插入数据库并由引擎返回。完美的
2.  获取令牌：这就是问题所在。生成代码时（上一步），它被分配了一个`expiresAt`字段。当我到了这一点

    `public function hasExpired() { if ($this->expiresAt) { return time() > $this->expiresAt; } }`

它比较并返回true，即代码关闭（过期）。因此，我在浏览器中得到以下信息：

```
{"error":"invalid_grant","error_description":"The authorization code has expired"} 
```

在我开始把这一切搞砸之前，有什么线索吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:10:09.017

好吧，算了。

问题只是在生成授权码（第一步）和生成安全令牌（第二步）之间花费了 30 多秒。这是因为我正在调试它以查看发生了什么。

对于那个很抱歉。我希望这对任何人都有帮助。

# validation - 尽管有验证错误，仍会触发 CommandButton 操作

> ID：12536399
> 
> 赞同：1
> 
> 时间：2012-09-21T18:44:49.367
> 
> 标签：validation, jsf-2, richfaces

我有一个页面，其中包含`<input type="text">`具有`required="true"`属性集的字段。我还有一个提交表单的保存按钮。

不幸的是，即使该`required="true"`字段为空，表单也会提交。

这是我当前的代码：

```
<s:decorate template="layout/edit.xhtml" id="decAQty">
    <ui:define name="label">Actual Qty Received</ui:define>
    <h:inputText
        value="#{tktReceivingInfoHome.instance.actualReceivedQty}"
        required="true" id="txtAQty"
        converterMessage="Not a valid Quantity">
        <a:ajax event="blur" render="txtAcTotal,decAQty"
            listener="#{returnsReceivingManager.setActualTotal}" />

    <h:messages id="error" style="display:none" />
    </h:inputText>

<a:commandButton id="btnSave"
    action="#{returnsReceivingManager.checkQtyDiff}" value="Save"
    render="decSQty,decScQty,decRtvQty,addForm,decAQty,decRecdDate,decRecWH,decErrorRMA,decErrorRTV,decReason,decStatusRMA,decStatusRTV,decPriority,decResolution"
    oncomplete="#{returnsReceivingManager.rmaInfo.qtyDiff!=0 ? '#{rich:component(\'addPanel\').show();' : 'callSave();'}"
    onclick="showProgressBar()" />
<a:jsFunction action="#{returnsReceivingManager.save}"
    oncomplete="hideProgressBar()" name="callSave" /> 
```

当我单击保存按钮时，我可以看到消息弹出，指示该值是必需的，但它随后消失并给我一条消息，指出事务失败。

换句话说，页面似乎被提交了两次。我希望社区可以提供有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:00:55.050

目前验证仅在离开`txtAQty`现场时触发（模糊事件）。这就是您看到错误消息的原因。接下来发生的是单击保存按钮，该按钮执行某些字段的重新呈现，但不对任何字段进行处理（包括验证）。这就是错误消失的原因。

您应该将`process`属性添加到 commandButton，其值至少列出该`txtAQty`字段（但更好的是您正在重新呈现的所有其他字段）

# android - android listfragment 创建了两次

> ID：12536400
> 
> 赞同：0
> 
> 时间：2012-09-21T18:44:50.170
> 
> 标签：android, android-fragments

这是创建我的片段的代码：

```
if (savedInstanceState == null) {
            // During initial setup, plug in the details fragment.
            FlightListFragment listFragment = 
                     FlightListFragment.newInstance(mSearchParams);
            getSupportFragmentManager().beginTransaction().add(
                    android.R.id.content, listFragment).commit();
 } 
```

但是所有片段方法都调用了两次！OnCreateView、OnActivityCreated、OnStart。

为什么？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:49:22.130

您的片段是否设置为保留实例？您可能正在生成片段的 2 个实例

也许尝试添加一个电话来检查类似的东西

```
if (getSupportFragmentManager.findFragmentByTag("myFragment") != null)
{
        FlightListFragment listFragment = 
                 FlightListFragment.newInstance(mSearchParams);
        getSupportFragmentManager().beginTransaction().add(
                android.R.id.content, listFragment).commit();
} 
```

# ruby - 路由错误 - 没有路由匹配

> ID：12536403
> 
> 赞同：0
> 
> 时间：2012-09-21T18:44:56.627
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

这是访问 requests/index.html.erb 时的问题：

> 路由错误
> 
> 没有路由匹配 {:action=>"cancel", :controller=>"requests"}

index.html.erb：

```
<%= link_to "Cancel", cancel_request_path %> 
```

路线.rb：

```
 resources :requests do
   get 'cancel', on: :member
 end 
```

requests_controller.rb：

```
 def cancel
   request = Request.find(params[:id])
   request.update_attributes(stage: "Cancelled")
   redirect_to root_path
 end 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:55:52.897

固定的。我只需要在我的 index.html.erb 中更改为这个：

```
<%= link_to "Cancel", cancel_request_path(request.id) %> 
```

我认为对象的所有属性都会在参数中传递给动作，但我想我必须指定要传递给动作的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:50:50.813

`get 'cancel', :on => :member`

在成员方面，您的路径将是：

```
cancel_requests_path(:id=>request_id) 
```

或者只是参数中的请求对象...

# symfony - Symfony2 Twig 在共享服务器上加载模板

> ID：12536408
> 
> 赞同：0
> 
> 时间：2012-09-21T18:45:17.717
> 
> 标签：symfony

Symfony2 Twig 在共享服务器上加载模板。

我在告诉树枝要加载哪个模板时遇到了一些麻烦。当我声明：返回时`FrontendHomeBundle:Page:index.html.twig`，我收到以下错误：

```
Unable to find template "FrontendHomeBundle:Page:index.html.twig".
500 Internal Server Error - InvalidArgumentException
3 linked Exceptions:Twig_Error_Loader » InvalidArgumentException » InvalidArgumentException » 
```

# php - 致命错误：PHP 中使用 PDO for MySQL 的非静态方法

> ID：12536410
> 
> 赞同：8
> 
> 时间：2012-09-21T18:45:22.210
> 
> 标签：php

我正在使用 PDO 在表中插入一行，并且我需要新行的 id，以便我可以根据该行重定向到新页面。

当我使用

`$id = PDO::lastInsertId();`

我明白了

```
Fatal error: Non-static method PDO::lastInsertId() cannot be called statically in C:\xampp\htdocs\createimage.php on line 16 
```

这是导致错误的php：

```
<?php 

$title = $_POST['title'];
$caption = $_POST['caption'];

$conn = new PDO('mysql:host=localhost;dbname=imagesite', 'root', '');

$stmt = $conn->prepare('INSERT INTO images (id,link,title,caption) VALUES (NULL,:link,:title,:caption)');

$stmt->execute(array(
    'link' => 'fake',
    'title' => $title,
    'caption' => $caption
    ));

$id = PDO::lastInsertId();

header("Location: localhost/image?id=$id"); 
```

谁能告诉我出了什么问题？或者另一种方式来实现我想要做的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T18:47:17.157

您正在寻找：

```
$conn->lastInsertId() 
```

在 PHP 文档中，他们向您展示了 PDO::lastInsertId() 但这是为了了解此方法在 PDO 类中。但是您需要使用您的对象来调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:49:15.327

您不应该直接从课堂上调用它。我建议您再次查看 OOP ..

您已经在变量中创建了 PDO 类的实例，`$conn`并且应该从您创建的对象中调用该函数。

`$conn->lastInsertId()`

# emacs - 用于自动完成的 Emacs Helm (anything) 颜色

> ID：12536413
> 
> 赞同：1
> 
> 时间：2012-09-21T18:45:30.943
> 
> 标签：emacs

在 Emacs 的掌舵模式下，无论何时`helm`尝试自动完成我正在输入的内容（例如使用`C-x C-f`for `Find file`）时，我都会看到自动完成选项（在这种情况下为文件）的颜色不同（有些是绿色，有些是白色背景）等。

这些颜色是什么意思？我如何查找它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:54:44.910

就像任何其他 Emacs 缓冲区一样，您可以找到有关掌舵面的更多信息。

使用 的鼠标将点放入完成缓冲区`C-x o`。

然后`C-u C-x =`。将显示点处的面。他们的名字应该清楚地表明他们的意思，你可以按照面包屑来定制他们。

# sql-server - 正确关闭数据库连接 - VBScript + MS SQL

> ID：12536414
> 
> 赞同：2
> 
> 时间：2012-09-21T18:45:41.520
> 
> 标签：sql-server, asp-classic, vbscript

我有一个连接到 SQL 服务器的经典 ASP (vbscript) Web 应用程序。在某些页面上，我打开多个数据库连接以提取数据。

我的问题是：

在每个页面底部添加关闭连接功能还是在使用后立即显式关闭连接更好？请记住，在这些特定页面上，我每次获取数据时都会重新打开数据库连接；我不重用连接。IE：

```
Set DBread = Server.CreateObject("ADODB.Connection")
DBread.Mode = adModeRead
DBread.Open (SQL_DB_CONN) 
```

当我关闭连接时，我使用：

```
DBread.Close
Set DBread = Nothing 
```

那么，我应该不断打开然后关闭连接还是不断打开连接，然后在页面末尾关闭它们一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:47:23.267

尽可能短地保持连接打开。[连接池](http://support.microsoft.com/kb/191572)将为您担心效率。

但是，如果您有连续的数据库操作，它们可以共享相同的连接。这也将允许您使用事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:47:07.340

您应该打开一个连接并在页面顶部进行所有查询，然后在执行最后一个查询后立即关闭连接

例子：

```
Dim DBread
Set DBread = Server.CreateObject("ADODB.Connection")
DBread.Mode = adModeRead
DBread.Open (SQL_DB_CONN)

'Make SQL Calls Here and Save rows of data by using the getrows function

DBread.Close
Set DBread = Nothing

'Process rows of data here 
```

# qt - QML 文本元素超链接

> ID：12536416
> 
> 赞同：31
> 
> 时间：2012-09-21T18:45:47.877
> 
> 标签：qt, text, hyperlink, symbian, qml

在我的 QML Text 元素中，我希望有一个指向网站的超链接，并设法让它看起来像一个等等。但是当我单击或触摸它时，什么也没有发生，该链接应该在默认浏览器中打开。

```
Text {
    id: link_Text
    text: '<html><style type="text/css"></style><a href="http://google.com">google</a></html>'
} 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-21T18:57:22.663

好的，我刚刚发现我必须添加这个：

```
onLinkActivated: Qt.openUrlExternally(link) 
```

我最初没有考虑过这样的事情，因为我认为如果字符串格式正确，它会自行打开链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-22T10:32:16.443

我面临一个模仿超链接的任务：当用户将鼠标悬停在它上面时，文本应该看起来像一个超链接。但是当用户点击链接时，应该调用客户处理程序而不是打开 URL。也许这对某人有用。

```
Text{
    id: hyperlinkButtonText
    text: "Hyperlink button"
    color: application.primaryColor
    font.pixelSize: 12
    font.bold:true 

    MouseArea{
        id: mouseHyperlinkArea
        anchors.fill: parent
        hoverEnabled: true
        cursorShape: Qt.PointingHandCursor
        onClicked: {
            // to do something on clicking the link
        }
    }            
}
Rectangle{ /*Here is an underline item for the text above*/
    visible: mouseHyperlinkArea.containsMouse
    anchors.top:hyperlinkButtonText.bottom
    anchors.topMargin: -1
    width:hyperlinkButtonText.width
    height: 0.5
    color: application.primaryColor
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-19T23:07:23.917

如果您还想更改 Hover 上的光标，可以执行以下组合：

```
 Text {
        id: link_Text
        text: '<html><style type="text/css"></style><a href="http://google.com">google</a></html>'
        onLinkActivated: Qt.openUrlExternally(link)
        MouseArea {
            id: mouseArea
            anchors.fill: parent
            cursorShape: Qt.PointingHandCursor
        }
    } 
```

# php - 如何使用 php 导入 facebook 相册

> ID：12536417
> 
> 赞同：0
> 
> 时间：2012-09-21T18:45:56.233
> 
> 标签：php, facebook, facebook-graph-api

在使用 oAuth2 进行身份验证后，我试图导入用户的相册。获取用户信息后，我正在使用他们的 id 来获取他们的相册。

```
$fqlResult=$facebook->api($user_profile['id']."/albums"); 
```

但这会返回一个空数组。我也试过

```
$fqlResult=$facebook->api("/me/albums"); 
```

但它给出了相同的结果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:37:40.383

Callum 之前的回答提到了 Authenticated Referrals - 只有当用户从 Facebook* 中点击任何指向您的应用程序的链接时才会调用该功能。

但由于您自己处理应用程序的登录，因此您必须在登录时在参数中包含`user_photos`权限，请参阅[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)`scope`

* * *

`*`我真的不知道为什么这么多人总是混淆这两个场景，或者似乎不知道经过身份验证的推荐实际上是如何工作的，以及应用仪表板中的相应设置做什么以及他们*不做*什么......</p>

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T19:31:43.047

当用户对您的应用进行身份验证时，您需要他们授予`user_photos`权限。

为此，请转到您的[应用仪表板](http://developers.facebook.com/apps)并单击“编辑应用”。在“权限”部分，添加`user_photos`到“用户和朋友权限”框。

# android - android入门：使用主弹出菜单

> ID：12536420
> 
> 赞同：0
> 
> 时间：2012-09-21T18:46:10.837
> 
> 标签：android, menu, popup, main

抱歉，我确信这是一个常见问题，但在谷歌搜索了一段时间后，我似乎不知道我想要什么的正确 Android 术语，所以被卡住了。

我想知道如何使用与视图关联的主弹出菜单......也就是说，如果你正坐在一些活动中什么都不做并按下手机上的菜单键，如何使用那个菜单通常在包含“设置”、“退出”等的许多应用程序上打开。

我不确定这叫什么，但如果有人能指出 SDK 的适当部分，那将不胜感激。此外，如果有人知道如何在 Eclipse ADT 插件的上下文中使用此菜单，那也太好了。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:00:21.877

正如 CaseyB 所说，它只是称为菜单。

为了快速开始使用它，您可以在 Eclipse 项目的 res 文件夹中创建一个子文件夹，并将其命名为“menu”，为视图添加一些 xml，然后从 onCreateOptionsMenu 函数调用 MenuInflator。

好的，这可能有点令人困惑，所以我提供了一些示例代码，可以帮助您入门。这段代码应该可以做到，所以当您按下菜单按钮时，您可以选择两个新活动之一来加载。

在主活动中添加：

```
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }
// Define whatever other activities you can to load in here or whatever. 
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.info:
            startActivity(new Intent(this, Info.class));
            break;
        case R.id.logs:
            startActivity(new Intent(this, Logs.class));
            break;
        }
        return true;
    } 
```

menu.xml 文件：链接到您想要的任何图标图像。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- -->
<!--  Copyright © 2012 Tutela Technologies Ltd. -->
<!--  All Rights Reserved. -->
<!-- -->
<menu
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
        android:id="@+id/info" 
        android:icon="@drawable/ic_menu_info_details"
        android:title="Info"></item>
    <item 
        android:id="@+id/logs" 
        android:icon="@drawable/ic_menu_report_image"
        android:title="Logs"></item>

</menu> 
```

然后在您的 AndroidManifest.xml 中确保您记得添加新活动。

```
 <activity 
        android:name="com.whatever.Gui.Info" 
        android:label="@string/appTitle">
    </activity>
    <activity 
        android:name="com.whatever.Gui.Logs" 
        android:label="@string/appTitle">
    </activity> 
```

注意：在此示例中，标签在 strings.xml 中定义

```
<string name="appTitle">Your App name</string> 
```

希望这对你有帮助！

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:50:42.003

它只是称为菜单。 这是一个帮助您入门[的教程。](http://www.itcsolutions.eu/2011/09/26/android-tutorial-how-to-add-a-menu-programmatic-vs-declarative-solution/)在 3.0+ 中事情变得有点奇怪，但是一旦你掌握了基础知识，它应该不会太难学会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:50:43.680

在 3.0 之前的版本中，这些是菜单。在最新版本的 Android 中，菜单正在被 ActionBar 取代。

关于菜单：http: [//developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

关于菜单的教程：[http ://www.androidhive.info/2011/09/how-to-create-android-menus/](http://www.androidhive.info/2011/09/how-to-create-android-menus/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T18:53:49.037

看例子：

活动：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.SettingsMenuItem:
        startActivity(new Intent(this, SettingsActivity.class));
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

在 xml 中：（在 /res/menu/menu.xml 中）

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/SettingsMenuItem"
        android:icon="@drawable/settings"
        android:title="@string/settings"/>
</menu> 
```

# py2app - 如何获取有关 py2app 错误的更多信息？

> ID：12536423
> 
> 赞同：5
> 
> 时间：2012-09-21T18:46:11.353
> 
> 标签：py2app

我正在尝试使用 py2app 打包一个混合的 Python/C++ 应用程序。我的 setup.py 是

```
from setuptools import setup
setup(app=['voxpopuli.py'],data_files=[],options=
  {'py2app'{'argv_emulation':True}},setup_requires=['py2app']) 
```

我通过调用 py2app

```
python setup.py py2app --no-strip --iconfile /Users/irving/otherlab/other/bin/OLicon.icns --resources /opt/local/lib/Resources/qt_menu.nib 
```

这在没有警告或错误的情况下完成，但是当我尝试运行结果应用程序时，会弹出一个窗口，上面只显示“voxpopuli Error”。它有一个“打开控制台”按钮，但唯一的控制台消息是

```
9/21/12 11:43:14.691 AM voxpopuli[52765]: voxpopuli Error
9/21/12 11:43:15.926 AM com.apple.launchd.peruser.501[158]: ([0x0-0x177d77c].org.pythonmac.unspecified.voxpopuli[52765]) Exited with code: 255 
```

是否有从 py2app 获取更多信息以帮助诊断此错误的标准方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:06:19.703

我相信这是应用程序的问题，而不是`py2app`.

如果应用程序遇到未处理的异常，它将像这样退出。您使用的是哪个版本的 osx？在 10.8 中，它们停止自动转发`stderr`到控制台，因此将应用程序管道传输到文件以查看是否有堆栈跟踪可能是一个`stdout`想法`stderr`。

虽然如果它是 C++ 部分的错误，我猜你不会看到堆栈跟踪，但错误可能在应用程序的那部分。

如果您真的找不到问题，请尝试从应用程序中剥离大部分内容，直到它运行，然后重新添加位直到它不运行，然后剥离等（如二进制搜索）以尝试找到有问题的部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T13:56:55.470

构建包后，您仍然可以从命令行运行“应用程序”。

例如，对于`~/Projects/MyApp`内置文件夹中的项目，`~/Projects/MyApp/dist`您应该发现可以从命令行运行以下命令：`~/Projects/MyApp/dist/MyApp.app/Contents/MacOS/MyApp`

这会将所有正常的 stderr 消息输出到控制台，以便您查看出了什么问题。

# php - 只需一个动作即可获得多个 Facebook 点赞？

> ID：12536430
> 
> 赞同：-2
> 
> 时间：2012-09-21T18:46:38.060
> 
> 标签：php, facebook, button, facebook-like

是否可以使用同一个按钮同时显示多个页面？你会如何在 php 中做到这一点？

我想要的是当用户点击按钮时，他们会提示我们同时喜欢几个页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:51:29.330

不，API 不支持以编程方式点赞页面，而 Facebook 提供的嵌入您网站的点赞按钮只能点赞一个页面。如果 Facebook 允许这样做，它将立即被滥用于各种与垃圾邮件相关的活动。

[来自 Facebook OpenGraph 的详细信息](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)

# f# - gZipBuffer DECompression 从 C# 转换为 F#

> ID：12536434
> 
> 赞同：0
> 
> 时间：2012-09-21T18:46:48.717
> 
> 标签：f#

Hy Guys，所以在您帮助我正确转换“压缩”功能后，我也尝试转换解压缩功能

现在我在这里（我的解压功能）

```
let DecompressString (detext : string) =
    let buffer = Convert.FromBase64String detext
    using (new MemoryStream ()) <| fun memoryStream ->
            using (new GZipStream(memoryStream, CompressionMode.Decompress, true)) <| fun gzipStream ->
            memoryStream.Position <- 0L
            memoryStream.Read(buffer, 0, Array.length buffer)
            Encoding.UTF8.GetString(buffer) 
```

原来的压缩函数是

```
let compressString (text : string) =
let buffer = Encoding.UTF8.GetBytes text
using (new MemoryStream ()) <| fun memoryStream ->
    using (new GZipStream(memoryStream, CompressionMode.Compress, true)) <| fun gzipStream ->
        gzipStream.Write (buffer, 0, Array.length buffer)
    memoryStream.Position <- 0L
    let compressedData = Array.zeroCreate (int memoryStream.Length)
    memoryStream.Read (compressedData, 0, compressedData.Length)
    let gzipBuffer = Array.zeroCreate (compressedData.Length + 4)
    Buffer.BlockCopy (compressedData, 0, gzipBuffer, 4, compressedData.Length)
    Buffer.BlockCopy (BitConverter.GetBytes buffer.Length, 0, gzipBuffer, 0, 4)
    Convert.ToBase64String gzipBuffer 
```

如果我压缩这样的字符串

```
File.WriteAllText("test",compressString("bla")) 
```

（我在这个文件中保存的名为“test”的文件是来自“bla”的压缩字符串）

” `AwAAAB+LCAAAAAAABADtvQdgHEmWJSYvbcp7f0r1StfgdKEIgGATJNiQQBDswYjN5pLsHWlHIymrKoHKZVZlXWYWQMztnbz33nvvvffee++997o7nU4n99//P1xmZAFs9s5K2smeIYCqyB8/fnwfPyImZfb/ADmz70cDAAAA`“<对我来说似乎比以前更大？:D

好的，现在我尝试再次解压缩它，例如：

```
File.WriteAllText("test2",DecompressString(File.ReadAllText("test"))) 
```

但在新的“test2”文件中只有不可读的文本，如：

" `?"&eï¿½ï¿`"

所以我认为我的 dcompress 功能不能正常工作。

也许你的英雄可以帮助我第二次也是最后一次？:) 无论如何提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:43:04.250

首先，您正在读取的内存流是空的，因此不会将任何内容写入目标缓冲区。

其次，您正在重用`buffer`，它包含 base 64 字符串参数的字节。

您无法获得 a 的长度，`GZipStream`因此您必须将其复制到另一个内存流：

```
let DecompressString (detext : string) =
    let buffer = Convert.FromBase64String detext
    using (new MemoryStream ()) <| fun memoryStream ->
        memoryStream.Write(buffer, 0, Array.length buffer)
        memoryStream.Seek(0L, SeekOrigin.Begin) |> ignore
        using (new GZipStream(memoryStream, CompressionMode.Decompress, true)) <| fun gzipStream ->
            using(new MemoryStream()) <| outStream ->
                gzipStream.CopyTo(outStream)
                Encoding.UTF8.GetString(outStream.ToArray()) 
```

# java - Java 线程化 TCP 服务器套接字

> ID：12536437
> 
> 赞同：-2
> 
> 时间：2012-09-21T18:47:07.747
> 
> 标签：java, multithreading, sockets, tcp

我有一个 android 客户端和一个多线程 Java 服务器。该服务器最初是用 Python 编写的，运行良好，但现在我用 Java 重新编写了它，它似乎无法正常工作。下面是我的服务器代码。值得注意的是，Python 实现不是多线程的，但我认为无论如何我都不需要为此更改客户端。

```
import java.net.*;
import java.io.*;
import org.apache.commons.io.FileUtils;

public class MultiServerThread extends Thread {
    private Socket socket = null;

    public MultiServerThread(Socket socket) {
        super("MultiServerThread");
        this.socket = socket;
    }

    @Override
    public void run() {

        try {
            String path = "C:/Users/LandClan/Desktop/cubikal";
            int count = 0;
            DataOutputStream dos = new DataOutputStream(
                    new BufferedOutputStream(socket.getOutputStream()));
            DataInputStream dis = new DataInputStream(new BufferedInputStream(
                    socket.getInputStream()));

            File[] files = new File(path).listFiles();
            for (File file : files) {
                String filename = file.getName();
                String extension = filename.substring(
                        filename.lastIndexOf(".") + 1, filename.length());
                if ("png".equals(extension)) {
                    count += 1;
                }

            }
            System.out.println("Sending " + count + " files");
            dos.writeInt(count);
            byte[] temp = new byte[1024];
            int n = 0;
            for (File file : files) {
                String filename = file.getName();
                String extension = filename.substring(
                        filename.lastIndexOf(".") + 1, filename.length());
                if ("png".equals(extension)) {
                    FileInputStream fis = new FileInputStream(file);
                    BufferedInputStream bis = new BufferedInputStream(fis);
                    byte fileContent[] = new byte[(int) file.length()];
                    bis.read(fileContent);
                    int dataLength = fileContent.length;
                    dos.writeInt(dataLength);
                    System.out.println(filename + " is " + dataLength
                            + " bytes long");
                    while ((dataLength > 0)
                            && (n = bis.read(temp, 0,
                                    (int) Math.min(temp.length, dataLength))) != -1) {
                        dos.write(temp, 0, n);
                        dos.flush();
                        dataLength -= n;
                    }
                    // System.out.println("Sent file "+filename);
                    fis.close();
                }
            }
            for (File file1 : files) {
                String filename = file1.getName();
                String extension = filename.substring(
                        filename.lastIndexOf(".") + 1, filename.length());
                if ("txt".equals(extension)) {
                    FileInputStream fis = new FileInputStream(file1);
                    BufferedInputStream bis = new BufferedInputStream(fis);
                    byte fileContent[] = new byte[(int) file1.length()];
                    bis.read(fileContent);
                    int dataLength = fileContent.length;
                    dos.writeInt(dataLength);
                    System.out.println("file is " + dataLength + "long");
                    while ((dataLength > 0)
                            && (n = bis.read(temp, 0,
                                    (int) Math.min(temp.length, dataLength))) != -1) {
                        dos.write(temp, 0, n);
                        dos.flush();
                        dataLength -= n;
                    }
                    // System.out.println("Sent file");
                    fis.close();
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

这是服务器的第一部分

```
package server;

import java.net.*;
import java.io.*;

public class Server {
    /**
     * @param args
     *            the command line arguments
     */
    public static void main(String[] args) throws IOException {
        ServerSocket serverSocket = null;
        boolean listening = true;

        try {
            serverSocket = new ServerSocket(4447);
        } catch (IOException e) {
            System.err.println("Could not liten on port: 4447.");
            System.exit(-1);
        }

        while (listening) {
            new MultiServerThread(serverSocket.accept()).start();
        }
        serverSocket.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:13:33.267

DataOutputStream 似乎永远不会关闭，并且 DataInputStream 根本不会使用。

摆脱 DataInputStream ，并确保在完成后关闭 DataOutputStream 。

一个好方法是向`finally{}`您`try-catch`的.`try-catch``finally`

```
DataOutputStream dos = null;
try
{
    DataOutputStream dos = new DataOutputStream(
                new BufferedOutputStream(socket.getOutputStream()));
    // do stuff
}
catch(IOException e)
{
    //stacktrace etc
}
finally
{
    if (dos != null) dos.close();
} 
```

这种东西在 Java 中总是有点难看，尽管即将推出的版本可能会变得更好......

# java - JAVA：json字符串映射 （或一个物体）

> ID：12536445
> 
> 赞同：-1
> 
> 时间：2012-09-21T18:48:03.380
> 
> 标签：java, json

我正在寻找一个简单的 json 库来将 json-string 转换为 Map 或 POJO 对象。我知道这是重复的，但我仍然有特定的要求：

1.  **没有像[json-lib这样的](http://json-lib.sourceforge.net/)**奇怪依赖**项（为什么你需要所有这些来完成一个简单的任务？）**
***   使用几行代码来完成它（KISS 原则）。*   我更喜欢转换为 Map，但 POJO 也差不多。**

 **就是这样。
你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:07:35.313

Jackson不错，不过我觉得你也可以试试[GSON](http://code.google.com/p/google-gson/)。它简单易用。并且有一个将 json 字符串转换为 Map 的单元测试，反之亦然。检查这个：[MapTest.java](http://code.google.com/p/google-gson/source/search?q=MapTest&origq=MapTest&btnG=Search%20Trunk)

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:49:15.403

[在这种情况下，杰克逊](http://www.jackson.codehaus.org)将是最好的。**

# asp.net - 基类和驱动页面加载事件

> ID：12536450
> 
> 赞同：1
> 
> 时间：2012-09-21T18:48:24.763
> 
> 标签：asp.net

我的 aspx 页面页面是从基类驱动的，我的基类创建了我网站的动态标题。我有一个名为“genMenu”的方法，我在基类的 pageLoad 事件中调用以创建菜单。在某些页面中，我需要覆盖此方法，但是我们知道基类的页面加载在驱动页面的 pageLoad 之前触发。所以我真的不能那样做。

那么我如何在 aspx 页面中覆盖 genMenu 并且不要在基类中触发它。我知道我可以在所有驱动页面中手动调用 genMenu 函数，而不是在基类的 pageLoad 中调用它，但必须有更好的处理方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:52:57.157

创建一个名为`GenerateMenu`或类似的虚拟方法，并始终从基本页面调用它。在那里做实际的工作。然后，您需要拦截它的派生页面可以覆盖它。

例如，像这样：

```
// Base page

protected SomeType MenuVariable;

protected void Page_Load(object sender, EventArgs e)
{
    this.GenerateMenu();
}

protected override void OnInit(EventArgs e) {
    this.GetMenuVariable();
}

private void GetMenuVariable() {
    // Some stuff with query string or the database
    this.MenuVariable = FooBar();
}

protected virtual void GenerateMenu() {
    // Generate the menu here 
} 
```

和：

```
// Derived page

protected override void GenerateMenu() {
    // Calls from the base page Load event
    // will be intercepted by this override
    // Do the alternate work for this page
    // here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:52:59.243

根据澄清更新：

在您的基类中，定义一个`virtual`名为 的方法`AutoCallGenMenu()`，该方法默认返回 true。在基类中的页面加载中，检查该方法的结果，如果返回 true，则调用`genMenu()`.

在要手动调用的页面中`genMenu()`，覆盖`AutoCallGenMenu()`返回false。然后，只需在需要的地方手动调用方法即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:52:05.950

而不是`pageLoad`，你为什么不使用`pageInit`或`page_init`调用你的方法，以便它发生在之前`page_load`？

请参阅。执行顺序的网页生命周期，然后您可以决定最好使用哪种方法

[http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

我可能误解了你的问题，但你也可以覆盖你的 genmenu 并忽略 thr 调用`.base()`

# wix - Wix 中 SetDirectory 的条件

> ID：12536453
> 
> 赞同：0
> 
> 时间：2012-09-21T18:48:33.740
> 
> 标签：wix, conditional, computer-name

我一直在试图弄清楚为什么我的状况不适用于我的 SetDirectory。根据 WiX 文档，我还没有找到任何人实际这样做的例子，只是有可能这样做。

我尝试了以下方法：

```
<SetDirectory Id="INSTALLLOCATION" Value="TEST">ComputerName=LJPRESCOTT1</SetDirectory> 
```

这会编译，但在运行时会被忽略。这些文件最终直接安装在 C:\ 驱动器上，而不是像我想要的那样安装在 C:\TEST 中。

* * *

和

```
<SetDirectory Id="INSTALLLOCATION" Value="TEST">[ComputerName]=LJPRESCOTT1</SetDirectory> 
```

这不会编译并引发“错误的条件字符串”错误。

* * *

如果我这样做，它会按预期创建一个名为 LJPRESCOTT1 的目录：

```
<SetDirectory Id="INSTALLLOCATION" Value="[ComputerName]" /> 
```

所以我知道 Comp Name 是正确的。

我在这里做错了什么，还是这不可能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:01:37.970

`[ComputerName]`仅在进行格式化或使用 type 的值时才使用语法`Formatted`，因此第二个示例中的语法错误。

但是在第一个示例中，您正在做的是将`ComputerName`属性的值与`LJPRESCOTT1`（公共）属性的值进行比较，我想它总是评估为假。如果要与`ComputerName`硬字符串值进行比较，则需要一些引号：

```
ComputerName="LJPRESCOTT1" 
```

# c++ - 通过 Visual C++ Express 2010 链接并使用 libpq

> ID：12536461
> 
> 赞同：4
> 
> 时间：2012-09-21T18:49:12.650
> 
> 标签：c++, postgresql, visual-c++

我正在尝试从 Visual C++ 2010 Express 访问 Postgres 数据库。我的机器上都有，但 SQL 调用根本不起作用。我搜索了很多网站。我认为这个版本的 Express 没有像 non-express 版本（尤其是 Visual C++ 2008）那样的任何默认数据库连接。

我唯一能找到的是以下链接，并且我对 Visual C++ Express 的项目属性区域进行了修改。

[http://www.askyb.com/cpp/c-postgresql-example/](http://www.askyb.com/cpp/c-postgresql-example/)

当我尝试在该网站上运行 C++ 代码时，我收到错误消息，表明它找不到函数。

你对我做错了什么有任何想法吗？使用 Visual C++ Express 2010 以外的其他东西连接到 postgres 数据库对我来说会更好吗？其他 Express 版本之一？常规（非表达）Visual C++？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:05:12.220

如果您正在使用 PostgreSQL 和 libpq，您可能还对[libpqtypes](http://libpqtypes.esilo.com/)和[libpqxx感兴趣。](http://pqxx.org/development/libpqxx/)第一个提供了从 libpq 访问数据值的极大简化，而后者提供了一个对 C++ 更友好的接口。

至于错误，很可能是：

*   如果在编译时或链接时失败，则您的包含路径或链接库路径是错误的；或者
*   如果它在运行时失败，您的 PATH 不包括 libpq。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:19:11.657

很可能（您没有提供任何实际的错误消息）问题出在您的设置上。您需要添加正确的头文件（“include”）目录和库目录；如果您只是从一些教程中复制它们，请确保它们实际上指向这些文件（分别为 .h 和 .lib 文件）所在的真实位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-18T19:59:26.973

您需要使用 MSVC (nmake /f win32.mak all) 重新编译 libpq，之后，您需要将项目设置为使用该库，并将公共语言运行时支持更改为 (/clr) 而不是 clr/pure .

# sql - SQL Server 2008 数据透视表聚合函数问题

> ID：12536470
> 
> 赞同：0
> 
> 时间：2012-09-21T18:49:32.080
> 
> 标签：sql, sql-server-2008, pivot

我有这个查询，我正在尝试按调查名称分组，但我收到了这个错误：

> 消息 8120，级别 16，状态 1，第 1
> 行列“pvt.Follow Up”在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

这是查询：

```
SELECT 
   surveyname, [Follow Up] AS Follow_Up, [Ambiance] AS Ambiance, 
   [Consultation] AS Consultation, [Procedure/Service] AS Procedure_Service
FROM 
   (SELECT
       s.name surveyname, q.question, subq.answer subquestion,aw.answerweight, 
       aw.score, rc.categoryname, sc.cweight
    FROM survey.dbo.results r
    JOIN survey.dbo.questions q ON r.questionidfk = q.id
    LEFT JOIN survey.dbo.answers subq ON r.itemidfk = subq.id
    LEFT JOIN survey.dbo.answers a ON r.answeridfk = a.id
    JOIN survey.dbo.surveys s ON q.surveyidfk = s.id
    join sigweb.dbo.survey_types_main stm on s.id = stm.surveyidfk
    join survey.dbo.survey_results sr on r.owneridfk = sr.ownerid
    join sigweb.dbo.BosleySurvey bs on bs.contactid = sr.contactid and stm.clientsurveytypeid = bs.surveytype
    join sigweb.dbo.contact c on sr.contactid = c.contactid
    join sigweb.dbo.patient p on p.contactid = c.contactid
    join sigweb.dbo.doctor d on p.doctorid = d.doctorid
    join sigweb.dbo.survey_tracking st on st.contactid = c.contactID and st.surveytypeid = stm.surveytypeid
    left join survey.dbo.answerweighting aw on isnull(r.itemidfk, r.questionidfk) = aw.questionitemidfk and r.answeridfk = aw.answeridfk
    left join survey.dbo.rating_categories rc on aw.categoryidfk = rc.id
    left join survey.dbo.survey_categories sc on aw.categoryidfk = sc.categoryidfk and s.id = sc.surveyidfk
    where 
       aw.answerWeight is not null) ps
PIVOT
(
   AVG(score)
   FOR categoryname IN
    ( [Follow Up], [Ambiance], [Consultation], [Procedure/Service])
) AS pvt 
```

按调查名称分组

这是我得到的结果的一个例子

```
SURVEYNAME      FOLLOW_UP   Ambiance   Consultation   Procedure_Service
Review             NULL     NULL    NULL          9.81
Review             9.54     NULL    NULL          NULL
Consultation       5        NULL    NULL          NULL
Consultation       NULL     5           NULL          NULL
Consultation       NULL     5           NULL          NULL
Consultation       NULL     5           NULL          NULL
Consultation       NULL     5           NULL          NULL
Consultation       NULL     5           NULL          NULL
Consultation       NULL     NULL    5         NULL
Consultation       5        NULL    NULL          NULL
Consultation       NULL     NULL    5         NULL 
```

这是数据透视之前的数据示例：

```
Review          6   Follow Up
Review          9   Procedure/Service
Consultation    5   Ambiance
Consultation    5   Ambiance
Consultation    5   Ambiance
Consultation    5   Ambiance
Consultation    5   Ambiance
Consultation    5   Ambiance
Consultation    5   Consultation
Consultation    5   Consultation 
```

这个想法是按 分组，最后`surveyname`只有两个结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:57:17.797

我不确定您发布的内容中的错误来自哪里（我假设是当您尝试添加`GROUP BY SurveyName`到您发布的查询的末尾时），但是您需要从子查询中删除冗余列，所以您只选择您需要的 3 列`surveyname`，`score`、 和`categoryname`：

```
SELECT 
   surveyname, [Follow Up] AS Follow_Up, [Ambiance] AS Ambiance, 
   [Consultation] AS Consultation, [Procedure/Service] AS Procedure_Service
FROM 
   (SELECT
       s.name surveyname, aw.score, rc.categoryname
    FROM survey.dbo.results r
    JOIN survey.dbo.questions q ON r.questionidfk = q.id
    LEFT JOIN survey.dbo.answers subq ON r.itemidfk = subq.id
    LEFT JOIN survey.dbo.answers a ON r.answeridfk = a.id
    JOIN survey.dbo.surveys s ON q.surveyidfk = s.id
    join sigweb.dbo.survey_types_main stm on s.id = stm.surveyidfk
    join survey.dbo.survey_results sr on r.owneridfk = sr.ownerid
    join sigweb.dbo.BosleySurvey bs on bs.contactid = sr.contactid and stm.clientsurveytypeid = bs.surveytype
    join sigweb.dbo.contact c on sr.contactid = c.contactid
    join sigweb.dbo.patient p on p.contactid = c.contactid
    join sigweb.dbo.doctor d on p.doctorid = d.doctorid
    join sigweb.dbo.survey_tracking st on st.contactid = c.contactID and st.surveytypeid = stm.surveytypeid
    left join survey.dbo.answerweighting aw on isnull(r.itemidfk, r.questionidfk) = aw.questionitemidfk and r.answeridfk = aw.answeridfk
    left join survey.dbo.rating_categories rc on aw.categoryidfk = rc.id
    left join survey.dbo.survey_categories sc on aw.categoryidfk = sc.categoryidfk and s.id = sc.surveyidfk
    where 
       aw.answerWeight is not null) ps
PIVOT
(
   AVG(score)
   FOR categoryname IN
    ( [Follow Up], [Ambiance], [Consultation], [Procedure/Service])
) AS pvt 
```

在后台，您还将最终结果分组，`q.question, subq.answer subquestion,aw.answerweight, sc.cweight`因为它们包含在子查询中，但由于不在选择列表中，您不会立即看到这样做的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:09:54.140

It appears that you are including too many columns in the inner `SELECT`, try to remove the columns:

```
q.question, subq.answer subquestion, aw.answerweight, sc.cweight 
```

They are most likely making the rows `DISTINCT` so the `GROUP BY` does not work properly. So your query will be:

```
SELECT surveyname, 
    [Follow Up] AS Follow_Up, 
    [Ambiance] AS Ambiance, 
    [Consultation] AS Consultation, 
    [Procedure/Service] AS Procedure_Service
FROM 
(
    SELECT s.name surveyname, 
        aw.score, 
        rc.categoryname, 
    FROM survey.dbo.results r
    JOIN survey.dbo.questions q 
        ON r.questionidfk = q.id
    LEFT JOIN survey.dbo.answers subq 
        ON r.itemidfk = subq.id
    LEFT JOIN survey.dbo.answers a 
        ON r.answeridfk = a.id
    JOIN survey.dbo.surveys s 
        ON q.surveyidfk = s.id
    join sigweb.dbo.survey_types_main stm 
        on s.id = stm.surveyidfk
    join survey.dbo.survey_results sr 
        on r.owneridfk = sr.ownerid
    join sigweb.dbo.BosleySurvey bs 
        on bs.contactid = sr.contactid 
            and stm.clientsurveytypeid = bs.surveytype
    join sigweb.dbo.contact c 
        on sr.contactid = c.contactid
    join sigweb.dbo.patient p 
        on p.contactid = c.contactid
    join sigweb.dbo.doctor d on p.doctorid = d.doctorid
    join sigweb.dbo.survey_tracking st 
        on st.contactid = c.contactID 
            and st.surveytypeid = stm.surveytypeid
    left join survey.dbo.answerweighting aw 
        on isnull(r.itemidfk, r.questionidfk) = aw.questionitemidfk 
            and r.answeridfk = aw.answeridfk
    left join survey.dbo.rating_categories rc 
        on aw.categoryidfk = rc.id
    left join survey.dbo.survey_categories sc 
        on aw.categoryidfk = sc.categoryidfk and s.id = sc.surveyidfk
    where aw.answerWeight is not null
) ps
PIVOT
(
   AVG(score)
   FOR categoryname IN
    ( [Follow Up], [Ambiance], [Consultation], [Procedure/Service])
) AS pvt 
```

# c# - 如何将文件从另一种语言（如钛 ios 应用程序和 Java 应用程序）上传到 ac# webservice

> ID：12536481
> 
> 赞同：2
> 
> 时间：2012-09-21T18:50:21.723
> 
> 标签：c#, web-services, file-upload, titanium, bytearray

它现在对我来说是一个 grt 难题。我开发了一个产品，它使用多种语言实现，例如 C# Windows 应用程序、Titanium iOS 应用程序和一个 Java 应用程序和一个朋友团队。

我正在使用 ac# web 服务，它采用 datatype 参数`byte[]`。通过将其添加到服务参考中，我已经完成了我在 Windows 应用程序上的工作。

我的 Titanium 队友要求我为这个 Web 服务创建一些示例代码，而不是直接通过 url 使用服务引用，而是：

*   使用soap 或http post 方法调用它。
*   创建一个网络服务，他们将以简单的方式与钛一起使用
*   关于如何将相同的 web 服务与钛一起使用的任何其他有用的想法

由于钛男孩现在对钛更新鲜，所以我必须做点什么，但我也被困住了，不知道如何向他推荐一些东西，所以我需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:06:50.287

我建议您将二进制数据编码为 Base64 字符串并将其发送到您的 C# 服务。由于您使用的是 SOAP，这将是一个非常简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:51:59.677

只需使用内置的 Titanium 实用程序将您的数据编码为 base64：

```
// Encode your data
var data = Titanium.Utils.base64encode(dataToSendToWebService); 
```

现在使用 HTTPClient 发送它：

```
var postDataTOServer = Ti.Network.createHTTPClient({
    onload : function(e) {
         // If the service returns successfully : true, or false
         var isUserAllowed = this.responseText; 
    },
    onerror : function(e) {
        // Web service failed for some reason
        Ti.API.info(this.responseText);
        Ti.API.info('webservice failed with message : ' + e.error);
    }
});

// POST
postDataTOServer.open('POST', 'http://yoursite.com/aspwebservice');

// you may have to change the content type depending on your service
// but this is the correct type for binary data
postDataTOServer.setRequestHeader("Content-Type", "application/octet-stream");

// This does a POST to server
postDataTOServer.send(data); 
```

# java - 在类路径中查找重复的类

> ID：12536482
> 
> 赞同：32
> 
> 时间：2012-09-21T18:50:23.690
> 
> 标签：java, maven

我有一个用 Maven 构建的 Java 应用程序，它有很多依赖项。在执行我的测试用例时，它们有时会通过，有时会因为一些不兼容的类组合而失败。因此，在类路径中似乎必须有一些类是随机抽取的。一个很好，另一个不行。

*   如何找出我的类路径中哪些类/jar 不兼容？
*   使用 Maven 不落入兼容性陷阱的正确方法是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-22T17:55:24.977

我认为更好的解决方案是使用[maven-duplicate-finder-plugin](https://github.com/ning/maven-duplicate-finder-plugin)。

注意：新版本是[duplicate-finder-maven-plugin](https://github.com/basepom/duplicate-finder-maven-plugin)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-21T18:54:49.197

您可以尝试使用此工具[Tattletale](http://www.jboss.org/tattletale)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-04T04:35:34.733

[您可以使用ClassGraph](https://github.com/classgraph/classgraph/)检测类路径或模块路径中的重复类文件定义（免责声明，我是 ClassGraph 的作者）：

```
for (Entry<String, ResourceList> dup :
        new ClassGraph().scan().getAllResources().classFilesOnly().findDuplicatePaths()) {
    System.out.println(dup.getKey());              // Classfile path
    for (Resource res : dup.getValue()) {
        System.out.println(" -> " + res.getURI()); // Resource URI, showing classpath element
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-29T11:10:29.293

eclipse中有一个插件可以检查构建路径中的重复类（ClasspathChecker [http://classpathchecker.free.fr/](http://classpathchecker.free.fr/)）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-04T01:49:25.463

这个问题基本上是更一般的问题的应用程序“以某种方式扫描类路径（CP）并收集所有类文件和其他资源”，然后在其中找到重复项......

有[许多用于 CP 扫描的现有库](https://github.com/classgraph/classgraph#alternatives)（在所有环境中正确执行此操作并非易事，特别是因为 Java 9 中的应用程序类加载器不再是 URLClassLoader），尤其是[Classgraph，使用它执行此操作相对简单](https://github.com//classgraph/issues/256).

PS：对于 <9 的 Java 版本，[JHades](https://github.com/jhades/jhades/) ( [jhades.github.io](http://jhades.github.io) ) 很好（但[在 Java 9/10/11 上没有问题](https://github.com/jhades/jhades/issues/9)）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-26T20:42:22.900

这是另一个简单的开源 Duplicate Classpath Finder 工具 - [Classpath Inspector](http://alumnus.caltech.edu/~leif/opensource/cpcheck/index.html)

这给出了类路径中重复类的相当不错的报告。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-09-21T19:12:03.477

您可以使用 maven dependency:tree 查看项目的 maven 层次结构，并使用 [maven](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html) exclude 排除您不想要的 jar

# iphone - 添加 Default-568h@2x.png 后撤消 iPhone 5 屏幕的自动调整大小

> ID：12536486
> 
> 赞同：9
> 
> 时间：2012-09-21T18:50:39.573
> 
> 标签：iphone, size, screen, resolution, iphone-5

我按照这个答案中的说明：[https](https://stackoverflow.com/a/12397309/1084932) ://stackoverflow.com/a/12397309/1084932更新我的应用程序以适应新的 iPhone 5 屏幕尺寸。太好了，完美运行！

但是，我还没有准备好进行此更新，并希望暂时回滚到信箱设置。我尝试删除 Default-568h@2x.png 以查看是否可行，但即使没有 Default-568h@2x.png 文件，我的应用程序仍会填满整个 iPhone 5 屏幕。

任何人都知道如何在添加 Default-568h@2x.png 后撤消 iPhone 5 的自动调整大小？

[编辑] 我对 iPhone 5 设备并不厌倦，但我的问题是专门针对模拟器的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T18:59:09.203

尝试`Product --> Clean`在 Xcode 中做

并从手机中删除应用程序并重新构建。

有时 Default.png 图像会被缓存

# javascript - 如何通过 jQuery 向我的 Ajax 表单提交添加自定义哈希？

> ID：12536492
> 
> 赞同：2
> 
> 时间：2012-09-21T18:50:57.343
> 
> 标签：javascript, coffeescript

我正在提交这样的表格：

```
formdata = $("#app_form").serialize()
formdata['apps'] = apps
hash = { type: "POST", url: "create_all", data: formdata }
$.ajax(hash) 
```

formdata**发布**，但行：

```
formdata['apps'] = apps 
```

完全**无视**。我无法理解 Coffeescript 和 Javascript 是如何完全忽略一行的。很有意思。

*应用程序*哈希具有以下结构：

```
{ "a" => { "1", "2", "3" },
  "b" => { "4", "5", "6" },
  ...
  "n" => { "x", "y", "z" } } 
```

如果：

```
formdata['apps'] = apps 
```

执行后不起作用：

```
formdata = $("#app_form").serialize() 
```

那么如何在提交之前将**应用程序**哈希添加到**formdata**哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:54:39.327

[`.serialize()`](http://api.jquery.com/serialize/)返回查询字符串而不是对象，因此要向查询字符串添加参数，请使用字符串连接

```
formdata += '&apps=' + encodeURIComponent(apps); 
```

假设应用程序是一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:46:51.603

该[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)例程需要一个对象（哈希），因此您根本不想序列化为字符串，只需拉入所有表单数据。

幸运的是，在表单数据版本之前，jQuery 中有一个版本的命令[`.serializeArray()`](http://api.jquery.com/serializeArray/)- 但是，这会产生一个表单数组：

`[ {'name': ..., 'value': ... }, ...]`- 不是你想要的。

因此，您可以复制它检索所有表单元素的方式，这是一个相当复杂的过滤器。或者您可以将输出重新排列为您需要的输出。

您的`apps`变量不会通过 AJAX 轻松传递，我认为它需要首先转换为 JSON（或其他形式的序列化），使用`JSON.stringify()`. 这是现在大多数浏览器内置的，但建议[`json2.js`](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)使用 jQuery 作为备份加载（它仅在本机例程不可用时才使用）。`apps`您可以使用本机 JSON 解码例程以您使用的任何后端语言从 JSON恢复，现在几乎所有语言都有。

```
var formdata = { 'apps': JSON.stringify(apps) };
$.each($("#app_form").serializeArray(), function(cIndex, cEntry) {
    formdata[cEntry.name] = cEntry.value;
});

$.ajax({ type: "post",
         url: "create_all",
         data: formdata }}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T18:56:32.563

从你所说的看起来不像有效的json和jquery数据参数需要有效的json ..

你为什么不使用类似的东西`JSON.parse($("#app_form").serialize())`

# ios - 获取当前的 webview URL 并将其传递给另一个视图

> ID：12536499
> 
> 赞同：0
> 
> 时间：2012-09-21T18:51:30.133
> 
> 标签：ios, variables, nsurl

好的，所以我正在尝试获取 webView 的当前 URL，以便我可以解析它并隔离一个数字。但是，变量 _webURL 没有使用 URL 设置。URL 未使用以下命令打印到日志，为什么？：

初始显示的实现：

```
@synthesize adWebView1;
@synthesize webURL = _webURL;

...

- (void)viewDidLoad
{
    [adWebView1 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://m.web.org/bannercontroller.php"]]];

    _webURL = adWebView1.request.URL.absoluteString;
    NSLog(@"The Current URL is", _webURL);

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    adWebView1 = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
} 
```

我将其修改为：

```
- (void)viewDidLoad
{
    [adWebView1 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://m.web.org/bannercontroller.php"]]];

    NSString *rawURL = [adWebView1 stringByEvaluatingJavaScriptFromString:@"location.href;"];

    NSLog(@"Das URL ist", *rawURL);
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
} 
```

正在产生以下错误：

无法通过 veriadic 函数按值传递接口类型为“NSString”的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:49:57.303

您使用请求来创建 webview，但从那里它将不再使用该请求，因此它可能不会更新请求对象。

该请求将在您创建 web 视图时启动。它不会等到请求完成，因此您可能需要检查请求是否仍在运行。

要稍后获取 url，您可以使用：

```
NSString *rawLocationString = [adWebView1 stringByEvaluatingJavaScriptFromString:@"location.href;"]; 
```

我不确定它是否已经在`viewDidLoad`.

顺便说一句：你不应该打电话给`URL.absoluteString`. 虽然它在技术上可能有效，但它是不正确的。absoluteString 是一种方法而不是属性，因此您不应像访问它那样访问它。

# casting - VHDL 转换错误

> ID：12536502
> 
> 赞同：2
> 
> 时间：2012-09-21T18:51:57.027
> 
> 标签：casting, vhdl, typesetting

在过去的几天里，我一直在尝试解决**VHDL**中的转换错误，这让我感到很困惑。我的代码附在下面。

它将正确评估 if 语句，但不会将新值分配给 min 或 max 变量。我知道这一点，因为我注释掉并测试了函数的不同方面。

**仅供参考**。type`t_battery_data`包含一个数组，`std_logic_vectors(15 downto 0)`即我在下面的函数中比较的电压。

我不确定它为什么会这样。我在网上搜索中所能找到的几乎所有内容都包括`ieee.numeric_std`我已经完成的图书馆。

还是一头雾水。任何建议将不胜感激。谢谢！

```
function cell_delta_voltage_counts(
    bat_data: t_battery_data
) return integer is

    constant POS_INFINITY: integer:= 2 ** 16 - 1;
    constant NEG_INFINITY: integer:= 0;

    variable min: integer range 0 to 2 ** 16 - 1:= POS_INFINITY-5;
    variable max: integer range 0 to 2 ** 16 - 1:= NEG_INFINITY;

begin

    for i in 0 to NUM_CELLS-1 loop

        if (to_integer(unsigned(bat_data.cell_readings(i).voltage)) < min) then
            min := to_integer(unsigned(bat_data.cell_readings(i).voltage));
        end if;

        if (to_integer(unsigned(bat_data.cell_readings(i).voltage)) > max) then
            max := to_integer(unsigned(bat_data.cell_readings(i).voltage));
        end if;

    end loop;

    return max - min;

end function cell_delta_voltage_counts; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:57:33.277

我在这里看不出有什么问题。我试过你的代码，它在 Modelsim DE 10.1c 中对我有用。你用的是什么模拟器？

这是我在尝试您的功能时使用的代码：

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity test is
end entity;

architecture sim of test is

   constant NUM_CELLS : integer := 2;

   type t_reading is record
      voltage : std_logic_vector(15 downto 0);
   end record t_reading;

   type t_readings is array(natural range <>) of t_reading;

   type t_battery_data is record
      cell_readings : t_readings(0 to NUM_CELLS-1);
   end record t_battery_data;

   function cell_delta_voltage_counts(
     (...)
   end function cell_delta_voltage_counts;
begin

   process
      variable v_battery_data : t_battery_data;
      variable v_result : integer := 0;
   begin
      v_battery_data.cell_readings(0).voltage := x"000a";
      v_battery_data.cell_readings(1).voltage := x"001a";

      v_result := cell_delta_voltage_counts(v_battery_data);
      report "result: " & integer'image(v_result);

      wait;
   end process;

end architecture; 
```

我完全按照您发布的功能使用了您的功能。正如预期的那样，模拟的输出是“结果：16”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:11:58.253

我没有使用很多函数，但是 IIRC 如果您希望 min 和 max 在调用之间“记住”它们的状态，则需要在函数外部声明它们并将函数声明为不纯：

```
variable min: integer range 0 to 2 ** 16 - 1:= POS_INFINITY-5;
variable max: integer range 0 to 2 ** 16 - 1:= NEG_INFINITY;

impure function cell_delta_voltage_counts(
... 
```

# java - 如何在 Java 中修改或添加 JComboBox 中的项

> ID：12536503
> 
> 赞同：0
> 
> 时间：2012-09-21T18:51:57.123
> 
> 标签：java, swing, netbeans

我是 java 的初学者，我必须在一个小程序的 JComboBox 中添加项目。所以我用 Netbeans 7.1 打开源代码，在设计部分我右键单击 JComboBox，然后单击属性。

在“属性”窗口中，我看到了几行：模型 = 用户代码

```
SelectedIndex = -1

SelectedItem = null

ToolTipText = null 
```

问题：为什么我没有看到所有项目名称或我在哪里可以看到它们？我在源代码中尝试过，没有关于项目名称的内容。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:22:19.977

在网豆中：

打开 JComboBox 的属性后，您应该会看到如下所示的窗口，只需在模型旁边的框中键入所有项目，并用逗号分隔它们“，”，如下所示： ![在此处输入图像描述](../Images/b929c48733d59dca8f1160f809ece5ba.png)

# sql - SQLite3 - 选择查询因 Unicode 字符而失败？

> ID：12536506
> 
> 赞同：1
> 
> 时间：2012-09-21T18:52:05.343
> 
> 标签：sql, visual-c++, unicode, sqlite

如果查询包含任何 Unicode 字符，我的 sqlite3 SELECT 查询将失败。即，下面的查询返回`0`而不是实际计数。我正在使用 C++/Visual Studio 2010 生成选择查询。

```
SELECT COUNT() FROM mytable  where   path = "C:\\sølvgut.txt"; 
```

当我使用 SQLite Expert 编辑器执行上述查询时，它按预期工作。但在我的代码中，我使用包装类 CppSQLite3.cpp 来执行导致问题的查询。在下面的代码中，它进入了代码 else if (nRet == SQLITE_ROW)

```
 CppSQLite3Query CppSQLite3DB::execQuery(const char* szSQL)
    {
       checkDB();

       sqlite3_stmt* pVM = compile(szSQL);

       int nRet = sqlite3_step(pVM);

       if (nRet == SQLITE_DONE)
       {
         // no rows
         return CppSQLite3Query(mpDB, pVM, true/*eof*/);
       }
      else if (nRet == SQLITE_ROW)
      {
        // at least 1 row
          return CppSQLite3Query(mpDB, pVM, false/*eof*/);
      }
      else
      {
            nRet = sqlite3_finalize(pVM);
            const char* szError= sqlite3_errmsg(mpDB);
            throw CppSQLite3Exception(nRet, (char*)szError, DONT_DELETE_MSG);
      }
  } 
```

# vb.net - vb.net 中的电子邮件地址加密

> ID：12536509
> 
> 赞同：0
> 
> 时间：2012-09-21T18:52:13.673
> 
> 标签：vb.net, visual-studio-2010, encryption

我想知道如何通过 vb.net 代码加密电子邮件地址。

我发现一个样本不能很好地处理特殊字符，我收到了这个错误：

`The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or a non-white space character among the padding characters.`

这是我正在尝试的代码：

```
 'The function used to encrypt the text
    Private Function Encrypt(ByVal strText As String, ByVal strEncrKey _
             As String) As String
        Dim byKey() As Byte = {}
        Dim IV() As Byte = {&H12, &H34, &H56, &H78, &H90, &HAB, &HCD, &HEF}

        Try
            byKey = System.Text.Encoding.UTF8.GetBytes(Left(strEncrKey, 8))

            Dim des As New DESCryptoServiceProvider()
            Dim inputByteArray() As Byte = Encoding.UTF8.GetBytes(strText)
            Dim ms As New MemoryStream()
            Dim cs As New CryptoStream(ms, des.CreateEncryptor(byKey, IV), CryptoStreamMode.Write)
            cs.Write(inputByteArray, 0, inputByteArray.Length)
            cs.FlushFinalBlock()
            Return Convert.ToBase64String(ms.ToArray())

        Catch ex As Exception
            Return ex.Message
        End Try

    End Function 
```

你们有什么感想？我究竟做错了什么？谢谢，拉齐尔

更新：全栈跟踪：

System.FormatException 被捕获 Message=输入不是有效的 Base-64 字符串，因为它包含非 base 64 字符、两个以上的填充字符或填充字符中的非空白字符。Source=mscorlib StackTrace：在 D:\Website\Account\Login.aspx.vb:line 213 InnerException 中的 WEbsite.Login.Decrypt(String strText, String sDecrKey) 处的 System.Convert.FromBase64String(String s)：

更新 2：

加密方式增加：

'用于解密文本的函数

```
 Private Function Decrypt(ByVal strText As String, ByVal sDecrKey _
               As String) As String
        Dim byKey() As Byte = {}
        Dim IV() As Byte = {&H12, &H34, &H56, &H78, &H90, &HAB, &HCD, &HEF}
        Dim inputByteArray(strText.Length) As Byte

        Try
            byKey = System.Text.Encoding.UTF8.GetBytes(Left(sDecrKey, 8))
            Dim des As New DESCryptoServiceProvider()
            inputByteArray = Convert.FromBase64String(strText)
            Dim ms As New MemoryStream()
            Dim cs As New CryptoStream(ms, des.CreateDecryptor(byKey, IV), CryptoStreamMode.Write)

            cs.Write(inputByteArray, 0, inputByteArray.Length)
            cs.FlushFinalBlock()
            Dim encoding As System.Text.Encoding = System.Text.Encoding.UTF8

            Return encoding.GetString(ms.ToArray())

        Catch ex As Exception
            Return ex.Message
        End Try

    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:40:47.250

我已经尝试使用加密文本和相同的密钥作为输入进行**解密。**
它按预期工作。我对您的代码所做的唯一更改是使用 Substring 方法而不是 Left ，如

```
byKey = System.Text.Encoding.UTF8.GetBytes(strDecrKey.Substring(0, 8)) 
```

我以这种方式调用这两种方法：

```
Dim result as String = Encrypt("test@gmail.com", "ABCD9876") 
Dim decrypted = Decrypt(result, "ABCD9876") 
```

我回来了“test@gmail.com”。
-Buon Weekend anche a te-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:33:47.880

使用字符串生成器而不是字符串作为带有特殊字符的参数。

最好的祝福。

# javascript - 查看 Node.js String.prototype 的方法？

> ID：12536510
> 
> 赞同：2
> 
> 时间：2012-09-21T18:52:17.730
> 
> 标签：javascript, string, node.js

在 Node.js REPL 中，如果您键入`String.prototype`，将返回一个空对象：`{}`。但是，如果您在 Chrome JavaScript 控制台中键入它，则会返回一个带有预期函数名称和函数的对象。

为什么 Node.js 没有表现出这种行为？如何访问 Node.js 中的原生字符串函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:10:59.047

根据 FreeNode/#node.js 上的 IRC 用户

> BennyLava: Object.getOwnPropertyNames(String.prototype)
> 
> jmar777：因为在 REPL 中你基本上得到了调用`toString()`结果的结果，而 chrome 控制台有一些花哨的对象交互显示
> 
> BennyLava：它们只是不可枚举

所以答案是`Object.getOwnPropertyNames(String.prototype)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:21:40.930

您可以使用[node-inspector](https://github.com/dannycoates/node-inspector)来获得 Node 的 Inspector 体验。

![节点检查器](../Images/188094db43f9620ea215da30d9c35c10.png)

# android - 设置 Thread.setDefaultUncaughtExceptionHandler 是否会阻止 Google 的错误报告工作？

> ID：12536520
> 
> 赞同：4
> 
> 时间：2012-09-21T18:53:05.113
> 
> 标签：android, exception-handling

在我的 Android 应用程序中，我利用`setDefaultUncaughtExceptionHandler`在用户设备上本地存储有关未处理异常的信息。经过一些反馈后，我怀疑此代码阻止了内置的 Google 错误报告功能，因为我在开发者控制台中看不到错误报告，而用户​​报告了异常。他们的设备远远超过了 2.2，其中引入了错误报告。可能是具有 4.0.3 的特定设备不支持此功能吗？如果是，我如何以编程方式检测到这一点？

我在 Android 文档中找不到与此相关的信息。我希望标准错误报告和我的自定义处理一起工作。在我的自定义异常处理程序中，我调用`Thread.getDefaultUncaughtExceptionHandler()`以获取默认处理程序，并且在我的实现中，`uncaughtException`我也将异常传播到此默认处理程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-11T22:39:49.580

我首先尝试[按此 S​​O answer](https://stackoverflow.com/a/11281388/465942 "setDefaultUncaughtExceptionHandler makes app crash silently")`System.exit(1);`中所述进行呼叫，但这没有用。

`uncaughtException(Thread thread, Throwable ex)`最后通过在 Androids default 上调用再次解决它`UncaughtExceptionHandler`（通过检查[ACRA 源代码](https://github.com/ACRA/acra/blob/2d2833284c3466097aa7efcf4e575bae7ca2326d/src/main/java/org/acra/ErrorReporter.java "ACRA 记者.java")找到它。

**示例活动**

```
public class MainActivity extends Activity implements Thread.UncaughtExceptionHandler {
    private Thread.UncaughtExceptionHandler _androidUncaughtExceptionHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        _androidUncaughtExceptionHandler = Thread.getDefaultUncaughtExceptionHandler();
        Thread.setDefaultUncaughtExceptionHandler(this);

        // Rest onCreate
        setContentView(R.layout.main_activity);
    }

    //@Override
    public void uncaughtException(Thread thread, Throwable ex) {
        try {
            // Do your stuff with the exception
        } catch (Exception e) {
            /* Ignore */
        } finally {
            // Let Android show the default error dialog
            _androidUncaughtExceptionHandler.uncaughtException(thread, ex);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:59:05.450

是的，这将停止内置的错误报告。当您的应用崩溃时，用户会看到一个对话框，其中包含通过 Google Play 报告错误的选项。但是，如果您使用`setDefaultUncaughtExceptionHandler()`该异常，则会在您的应用程序中处理该异常，并且不会给出报告它的选项。

我建议您将[ACRA](http://code.google.com/p/acra)集成到您的项目中，因为它可以让您在崩溃时轻松接收错误报告。

# php - PHP 表单不工作。在 IE/FF 中显示正常，而不是在 chrome 中。

> ID：12536522
> 
> 赞同：0
> 
> 时间：2012-09-21T18:53:07.743
> 
> 标签：php, html, css, forms

我是一名学生助理，我的工作是帮助维护和更新我工作的部分校园的网站和数据库。大多数网站都不是我开发的，而且我对我工作中的很多 PHP、CSS 和 HTML 组件几乎还是个新手。

我们有一个 PHP 网页，上面有一个导师申请表（[链接](https://saswebts.sas.calpoly.edu/sss/tutor_request.php?)——不是这个校园的学生，你将无法登录该页面......）。我们在夏天把表格拿下来，现在想在秋天重新打开它。*自从我们取消表格以来，所有代码都没有改变。*当我们试图恢复它时，页面在 IE 和 FF 中加载良好，但在 chrome 中所有内容都会出现，但没有任何样式——它只是白色背景上的文本。

然后，当我们尝试在 IE 或 FF 中使用该表单时，它就不起作用了。提交导师请求后，用户应该被传送到确认页面，但是用户只是返回到表单，没有任何表单数据发送到我们的数据库。

我相信问题出在 PHP 的某个地方，但我对此知之甚少，无法看到问题所在。

这是网页的代码：

```
<?php
require_once("../application_processing/config.php");
session_start();

$dbinfo = new DbInfo();
$db = "sss";
$qtr = checkOpen($dbinfo, $db);

if (fetchTicket("sss/tutor_request")) {
    $username = $_SESSION['username'];
    $fname = $_SESSION['fname'];
    $lname = $_SESSION['lname'];

    if ($fname == "" || $fname == NULL) {
        $fname = "SAS";
        $lname = "Admin";
    }

    $result = getPreviousSubmission($_SESSION['username'], $dbinfo, $db, "tutor_request", $qtr);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us"><!-- InstanceBegin template="/Templates/sas_sss.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!--
Cal Poly Web Template v3.4

Code developed by
Information Technology Services
California Polytechnic State University
San Luis Obispo, CA 93407
-->
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Tutor Request Form - Student Support Services - Cal Poly</title>
<?php require_once("../application_processing/restore.php"); ?>
<script type="text/javascript" language="javascript" src="http://sas.calpoly.edu/javascript/jquery.js"></script>
<script type="text/javascript" language="javascript" src="http://sas.calpoly.edu/javascript/form_validation_new.js"></script>
<script type="text/javascript" language="javascript" src="javascript/tut_req_app_form.js"></script>
<!-- InstanceEndEditable -->
<meta name="codebase" content="3.4" />
<meta name="layout" content="cp template" />
<meta name="author" content="Therin Irwin" />
<meta name="keywords" content="Student Academic Services" />
<meta name="description" content="Assisting in the development of academic and personal skills" />
<!--Externally linked stylesheet that stylizes the template-->
<link href="http://sas.calpoly.edu/common/css/cp_screen_3.4.css" rel="stylesheet" type="text/css" media="screen" />
<link href="http://sas.calpoly.edu/common/css/cp_print_3.4.css" rel="stylesheet" type="text/css" media="print" />
<link href="http://sas.calpoly.edu/css/screen.css" rel="stylesheet" type="text/css" media="screen" />
<link href="http://sas.calpoly.edu/css/print.css" rel="stylesheet" type="text/css" media="print" />
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
<!--Favicon-->
<link rel="shortcut icon" href="http://sas.calpoly.edu/common/images/favicon.ico" />
</head>
<body>
<!--Container div that encloses the whole template-->
<div id="container">
  <!--This skiplink provides easier accessibility-->
  <div id="skiplink"><a href="#content">Skip to Content</a></div>
  <!--Header-->
  <div id="header">
    <!--Cal Poly Logo-->
    <div id="cplogo"><a href="http://www.calpoly.edu/"><img src="http://sas.calpoly.edu/common/images/header/cp_logo.gif" alt="Cal Poly" title="Go to Cal Poly Home" width="166" height="60" /></a></div>
    <!--The Content Area of the Header-->
    <div id="headercontent">
      <!--Dept Logo-->
      <a href="http://sas.calpoly.edu/sss/index.html"><img src="http://sas.calpoly.edu/images/sas_logo.png" alt="dept logo" name="headerimage" width="53" height="50" id="headerimage" title="Go to department home page" /></a>
      <!--Dept Name-->
      <div id="deptname">
        <p id="department_name"><a href="http://sas.calpoly.edu/index.html">Student Academic Services</a></p>
        <!--Dept Info-->
        <p id="optional_deptinfo">Student Support Services(<acronym>SSS</acronym>)</p>
      </div>
    </div>
    <!--Search Box-->
    <div id="search">
      <form id="gs" method="get" title="Search Form" action="http://search.calstate.edu/search">
        <div>
          <input type="hidden" name="site" value="slo-CalPoly" />
          <input type="hidden" name="output" value="xml_no_dtd" />
          <input type="hidden" name="client" value="slo-CalPoly" />
          <input type="hidden" name="proxystylesheet" value="slo-CalPoly" />
          <input type="hidden" name="sitesearch" value="sas.calpoly.edu" />
          <label for="q">Search SAS</label>
          <br />
          <input type="text" name="q" id="q" title="Search Text" size="12" maxlength="256" alt="Search Text" />
          <input type="image" name="submit" id="submit" src="http://sas.calpoly.edu/common/images/utli_search/search.png" alt="Go" title="Submit Search Query" />
        </div>
      </form>
    </div>
    <!--California Polytechnic State University-->
    <div id="cp">
      <p>California Polytechnic State University</p>
    </div>
  </div>
  <!--End Header-->
  <!--Main Image-->
  <div id="main-image"></div>

  <!--Left Navigation-->
  <div id="leftnav">
    <!--For accessibility reasons, this "Navigation" text has been added for readability for screen readers-->
    <h1>Navigation</h1>
<h2>SSS</h2>
<ul>
    <li><a href="http://sas.calpoly.edu/sss/index.html">What is <acronym>SSS</acronym>?</a></li>
    <li><a href="http://sas.calpoly.edu/sss/aa.html">Services</a></li>
    <li><a href="http://sas.calpoly.edu/sss/eligibility.html">Eligibility</a></li>
    <li><a href="http://sas.calpoly.edu/sss/enhancement.html">Academic Enhancement</a></li>
    <li><a href="http://sas.calpoly.edu/sss/enhancement.html#gpsa">Graduate and Professional School Advising</a></li>
    <li><a href="http://sas.calpoly.edu/main/newsletter.html">Newsletter</a></li>
  <li><a href="http://sas.calpoly.edu/sss/staff.html">SSS Staff</a></li>
    <li><a href="http://sas.calpoly.edu/sss/grantaward.html">SSS Grant Award</a></li>
</ul><!--Nav Content Area 1-->
    <div id="navcontent1"> <!-- InstanceBeginEditable name="navcontent1" --><!-- InstanceEndEditable --> </div>
  </div>
  <!--Defines 2-Column Layout-->
  <div id="content-2col">
    <!--Breadrumb-->
    <div id="breadcrumb"><a href="http://sas.calpoly.edu/index.html">Student Academic Services</a>&nbsp;<!-- InstanceBeginEditable name="breadcrumb" -->&gt; <abbr><a href="http://sas.calpoly.edu/sss/index.html">SSS</a></abbr> &gt; Tutor Request<!-- InstanceEndEditable --></div>
    <!--Begin Main Body Content-->
    <div id="content"> <!-- InstanceBeginEditable name="content" -->
    <h1>SSS Individual Tutor Request</h1>
    <?php
    if ($qtr != NULL) {
    ?>
    <h4><?php print($qtr[1]); ?></h4><br />
    <h3 class="red"><?php require_once("../application_processing/error_report.php"); ?></h3>
    <?php
    if (mysql_num_rows($result) > 0) {
    ?>
        <h3>Tutor Requests:</h3><p>
        <?php
        $first = true;

        while ($row = mysql_fetch_array($result)) {
            if (!$first)
                print(", ");

            $subj = $row[0];
            $num = $row[1];
            $times = $row[2];

            print($subj . " " . $num);
            $first = false;
        }
        ?></p>

        <?php
        if (mysql_num_rows($result) >= 6) {
        ?>
        <h3 class="red">The maximum number of tutor requests has been reached for this quarter (6).</h3>
        <?php }
    } ?>
    <span id="error"></span>
    <form action="process_tutor.php" method="post" id="TutReqApplication" name="TutReqApplication">
        <fieldset>
            <legend>Student Information</legend>
            <div class="inputBox">
                <label for="fname">Name: <?php echo($fname." ".$lname); ?></label><br />&nbsp;<br />
                <label for="username">Cal Poly E-mail: <?php echo($username);?>@calpoly.edu</label>
            </div>

            <input id="username" name="username" type="hidden" value="&lt;?php print($username);?>" />
            <input id="fname" name="fname" type="hidden" value="&lt;?php echo($fname);?>" />
            <input id="lname" name="lname" type="hidden" value="&lt;?php echo($lname);?>" />

            <div class="inputBox">
                <label for="phone">Primary Number: </label><input class="phoneInput" name="phone" id="phone" type="text" maxlength="14" />
                <em class="annot">e.g. 555-444-3210</em>
            </div>
        </fieldset>

        <fieldset>
            <legend>Course and Tutor Information</legend>
            <div class="inputBox">
                <label for="dept">Course Requested: </label>
                <select id="dept" name="dept">
                    <option value="">Select</option>
                    <option value="AERO">AERO</option>
                    <option value="AG">AG</option>
                    <option value="AGB">AGB</option>
                    <option value="AGC">AGC</option>
                    <option value="AGED">AGED</option>
                    <option value="ANT">ANT</option>
                    <option value="ARCE">ARCE</option>
                    <option value="ARCH">ARCH</option>
                    <option value="ART">ART</option>
                    <option value="ASCI">ASCI</option>
                    <option value="ASTR">ASTR</option>
                    <option value="BIO">BIO</option>
                    <option value="BOT">BOT</option>
                    <option value="BRAE">BRAE</option>
                    <option value="BUS">BUS</option>
                    <option value="CD">CD</option>
                    <option value="CE">CE</option>
                    <option value="CHEM">CHEM</option>
                    <option value="CM">CM</option>
                    <option value="CPE">CPE</option>
                    <option value="CRP">CRP</option>
                    <option value="CRSC">CRSC</option>
                    <option value="CSC">CSC</option>
                    <option value="DANC">DANC</option>
                    <option value="DSCI">DSCI</option>
                    <option value="ECON">ECON</option>
                    <option value="EDES">EDES</option>
                    <option value="EDUC">EDUC</option>
                    <option value="EE">EE</option>
                    <option value="EHS">EHS</option>
                    <option value="ENGL">ENGL</option>
                    <option value="ENGR">ENGR</option>
                    <option value="ENVE">ENVE</option>
                    <option value="ES">ES</option>
                    <option value="FNR">FNR</option>
                    <option value="FORL">FORL</option>
                    <option value="FR">FR</option>
                    <option value="FRSC">FRSC</option>
                    <option value="FSN">FSN</option>
                    <option value="GEOG">GEOG</option>
                    <option value="GEOL">GEOL</option>
                    <option value="GER">GER</option>
                    <option value="GRC">GRC</option>
                    <option value="GSA">GSA</option>
                    <option value="GSB">GSB</option>
                    <option value="HIST">HIST</option>
                    <option value="HNRS">HNRS</option>
                    <option value="HUM">HUM</option>
                    <option value="IME">IME</option>
                    <option value="IT">IT</option>
                    <option value="ITAL">ITAL</option>
                    <option value="JOUR">JOUR</option>
                    <option value="JPNS">JPNS</option>
                    <option value="KINE">KINE</option>
                    <option value="LA">LA</option>
                    <option value="LIB">LIB</option>
                    <option value="LS">LS</option>
                    <option value="MATE">MATE</option>
                    <option value="MATH">MATH</option>
                    <option value="MCRO">MCRO</option>
                    <option value="ME">ME</option>
                    <option value="MSC">MSC</option>
                    <option value="MU">MU</option>
                    <option value="PE">PE</option>
                    <option value="PEM">PEM</option>
                    <option value="PEW">PEW</option>
                    <option value="PHIL">PHIL</option>
                    <option value="PHYS">PHYS</option>
                    <option value="PM">PM</option>
                    <option value="POLS">POLS</option>
                    <option value="PSC">PSC</option>
                    <option value="PSY">PSY</option>
                    <option value="REC">REC</option>
                    <option value="RELS">RELS</option>
                    <option value="SCM">SCM</option>
                    <option value="SOC">SOC</option>
                    <option value="SOCS">SOCS</option>
                    <option value="SPAN">SPAN</option>
                    <option value="SPC">SPC</option>
                    <option value="SS">SS</option>
                    <option value="STAT">STAT</option>
                    <option value="TH">TH</option>
                    <option value="VGSC">VGSC</option>
                    <option value="VS">VS</option>
                    <option value="WS">WS</option>
                    <option value="ZOO">ZOO</option>
                </select>
                <input type="text" class="medInput" name="coursenum" id="coursenum" maxlength="3" /><br />
            </div>

            <div class="inputBox">
                <label for="instructor">Instructor: </label><input name="instructor" id="instructor" type="text" maxlength="30" />
                <em class="annot">e.g. Staley, Clinton (Last, First).</em>
            </div>
            <div class="inputBox">
                <textarea id="comments" name="comments" class="dim" cols="40" rows="5">Enter any other things you would like us to know here (available time, preferred tutor, etc.)</textarea>
            </div>
        </fieldset>

        <fieldset>
            <legend>Terms of Agreement</legend>
            <p><em>I understand that by signing this contract I agree to meet with my tutor a minimum of two hours per week, a maximum of ten hours per week, for the duration of the quarter. <strong>Missing more than two (2) tutorial sessions, without prior clearance from SSS staff, including my tutor, will result in a suspension of individual tutoring services for the following quarter.</strong> I also understand that in the event that I drop my course, it is my responsibility to contact SSS to cancel this request. Failure to do so may also result in my tutor services being suspended.</em></p>

            <p>By typing your full name below, you agree to adhere to the statements above and are providing an electronic signature.</p>          
            <div class="inputBox">
                <label for="signature">Student Signature: </label><input type="text" name="signature" id="signature" maxlength="30" /><br />&nbsp;<br />
            <p id="errorMessage">&nbsp;</p>
                <input type="submit" value="Submit Tutor Request" />
            </div>
        </fieldset>
    </form>
    <?php }
    else {
    ?>
    <h3>Sorry - The application is closed for the remainder of the quarter. Try again next quarter.</h3>
    <?php
    }
    ?>
      <!-- InstanceEndEditable --> </div>
    <!--End Main Body Content-->
  </div>

  <!--Footer-->
  <div id="footer">
    <!--Footer Gold Bar Links-->
    <div id="footer_links">
      <p> <a href="http://www.calpoly.edu/" title="Cal Poly Home">CP Home</a> <span class="textBullet">&bull;</span> <a href="http://www.calpoly.edu/cpfindit.html" title="Cal Poly Find-It, Directories and Search">CP Find It</a> </p>
      <p> <a href="http://get.adobe.com/reader/" title="Download Adobe Reader for viewing PDFs">Get Adobe Reader</a> <span class="textBullet">&bull;</span> <a href="http://office.microsoft.com/en-us/downloads/default.aspx" title="Microsoft Office Converters &amp; Viewers">Microsoft Viewers</a> </p>
    </div>
    <!--Footer Dept Links-->
    <div id="footer_deptlinks">
      <p><a href="http://sas.calpoly.edu/main/staff.html" title="Student Academic Services Staff">Staff</a> <span class="textBullet">&bull;</span> <a href="http://sas.calpoly.edu/main/sitemap.html">Site Map</a> <span class="textBullet">&bull;</span> <a href="http://sas.calpoly.edu/employment/index.html">Student Employment</a></p>
      <p>Last Update: <!-- InstanceBeginEditable name="lastupdate" --><!-- #BeginDate format:Am2 -->9/20/12<!-- #EndDate --><!-- InstanceEndEditable --></p>
    </div>
    <!--Footer Dept Info-->
    <div id="footer_deptinfo">
      <p>Student Support Services<br />
        Student Services, Bldg 124, Rm 119<br />
        California Polytechnic State University<br />
        San Luis Obispo, Ca 93407-0203<br />
        805.756.1395<br />
      <a href="mailto:cmargari@calpoly.edu">cmargari@calpoly.edu</a></p>
    </div>
  </div>
  <!--End Footer-->
</div>
</body>
<!-- InstanceEnd --></html>
<?php } ?> 
```

我会在 IE、FF 和 Chrome 中发布页面外观的图像，“但作为一种垃圾邮件预防机制，不允许新用户发布图像。”

我知道这不是很多，但任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:57:07.150

尝试使用验证器网站 - [http://validator.w3.org](http://validator.w3.org)

它会为你发现问题。

**编辑**

CSS 也有一个。[http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:59:12.753

使用[W3C Validator](http://validator.w3c.org)并清除缓存。它对我来说很好。

# grails - 如何序列化域类 grails

> ID：12536534
> 
> 赞同：1
> 
> 时间：2012-09-21T18:53:39.217
> 
> 标签：grails, memcached, grails-domain-class

我尝试将 grails 域类序列化为 Maps 或类似的，以便能够将其存储在 memcached 中。

我只想能够读取对象，我不需要 gorm crud。只在不破坏它们所拥有的接口的情况下阅读它们。

例如：我可以将域转换为地图，因为它不会破坏访问类似`.<property>`或`.findall`类似的界面

首先，我尝试进行手动序列化，但很容易出错。所以我需要更通用的东西。

然后我尝试使用 grails 编解码器将其序列化为地图。

[这是测试仓库。](https://github.com/dnoseda/domain-to-map-serializer-problem)

[这是片段。](https://gist.github.com/3763113)

但我得到了 StackOverFlowException。

我还尝试将所有域标记为可序列化，但是当我将它们从 memcached 中取回时，我需要重新附加每个域，以避免像 org.hibernate.LazyInitializationException 这样的休眠错误：无法初始化代理 - 没有会话

你知道实现这一目标的方法吗？

谷歌搜索类似“在 memcached 中存储域类”这样的东西非常令人沮丧，发现这不是一个常见的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T21:21:27.320

我还没有看到一个开箱即用的解决方案，但是如果你想保持它的通用性，你可以手动（并且始终如一地）这样做：

```
def yourDomainInst = DefaultGrailsDomainClass(YourDomainClazz)
List listOfOnlyPersistantProperties = yourDomainInst.persistantProperties

def yourNewMap

yourObjects.each { obj ->
   listOfOnlyPersistantProperties.each { prop ->
      def propName = prop.name
      yourNewMap.put(propName, obj."$propName")
   }
} 
```

像这样的东西应该工作。请注意，可能有一百个错误，因为我现在无法尝试，但这是一般的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:12:04.310

看看：[检索域的 GORM 持久属性列表](https://stackoverflow.com/questions/4555150/retrieving-a-list-of-gorm-persistent-properties-for-a-domain)

# android - 为什么此安装失败？（下载完成时大小错误 - eclipse 和 android SDK 管理器）

> ID：12536536
> 
> 赞同：4
> 
> 时间：2012-09-21T18:53:50.740
> 
> 标签：android, eclipse, windows, sdk

我得到了这三个错误。没有网络断开。

(Eclipse classic 4.2 win 7 Ultimate x64)

查看这些错误，您是否能够知道安装失败的原因？

```
Downloading ICS_R1, Android API 15, revision 3
Download finished with wrong size. Expected 117308250 bytes, got 779 bytes.

Downloading XOOM2ME, Android API 13, revision 2
Download finished with wrong size. Expected 122780710 bytes, got 779 bytes.

Downloading XOOM2, Android API 13, revision 2
Download finished with wrong size. Expected 123990783 bytes, got 779 bytes.

Downloading XOOM, Android API 11, revision 2
Download finished with wrong size. Expected 1785905 bytes, got 779 bytes.

Downloading ADMIRAL, Android API 10, revision 5
Download finished with wrong size. Expected 68883101 bytes, got 779 bytes.

Downloading ATRIX2, Android API 10, revision 2
Download finished with wrong size. Expected 73777114 bytes, got 779 bytes.

Downloading Bionic, Android API 10, revision 2
Download finished with wrong size. Expected 69035909 bytes, got 779 bytes.

Downloading defy+, Android API 10, revision 1
Download finished with wrong size. Expected 67177102 bytes, got 779 bytes.

Downloading Droid4, Android API 10, revision 2
Download finished with wrong size. Expected 81222260 bytes, got 779 bytes.

Downloading DroidRAZR, Android API 10, revision 5
Download finished with wrong size. Expected 80043807 bytes, got 779 bytes.

Downloading MotorolaPro+, Android API 10, revision 2
Download finished with wrong size. Expected 67795870 bytes, got 779 bytes.
Downloading MT870, Android API 10, revision 2
Download finished with wrong size. Expected 83816454 bytes, got 779 bytes.

Downloading MT917, Android API 10, revision 1
Download finished with wrong size. Expected 91311316 bytes, got 779 bytes.

Downloading PHOTON, Android API 10, revision 1
Download finished with wrong size. Expected 116663320 bytes, got 779 bytes.

Downloading XT882, Android API 10, revision 2
Download finished with wrong size. Expected 84944911 bytes, got 779 bytes.

Downloading XT928, Android API 10, revision 3
Download finished with wrong size. Expected 86664035 bytes, got 779 bytes. 
```

完毕。什么都没有安装。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T22:35:21.860

这意味着您的互联网连接速度不快或数据丢失。

尝试使用下载管理器直接下载。

1.  下载来自谷歌的平台和api。

打开 SDK 管理器

将第一个状态栏地址复制到浏览器（https://dl-ssl.google.com/android/repository/repository-7.xml 或 http）

1.  下载其他厂家的api

SDK 管理器 > 工具 > 管理附加站点

将需要的地址复制到浏览器

并找到您的软件包下载地址。像这样

```
 <sdk:archives>
     <sdk:archive os="any">
       <sdk:size>27230698</sdk:size>
       <sdk:checksum type="sha1">2d9ca1f0034d431b7f5096d3b4dd3574ac848d46</sdk:checksum>
       <sdk:url>
         http://dl.htcdev.com/sdk/download/htc_opensense_sdk.zip ==> this is address
       </sdk:url>
     </sdk:archive>
   </sdk:archives> 
```

1.  **如果地址只是一个文件名 Like(android-3.0-windows.zip) 将文件名替换为地址栏中 apis 的 xml 文件 Like(http://dl-ssl.google.com/android/repository/repository-7\. xml) 到 (http://dl-ssl.google.com/android/repository/android-3.0-windows.zip)**

2.  **确保协议不是 https**

下载文件。

接下来在 android 安装目录 (C:\Program Files (x86)\Android\android-sdk) 中创建一个文件夹并将其重命名为“temp”。将下载的 zip 文件放入 temp 文件夹并尝试使用 SDK Manager 安装。

# sql - 如何进行 sql join 以达到预期的效果？

> ID：12536538
> 
> 赞同：1
> 
> 时间：2012-09-21T18:53:56.370
> 
> 标签：sql, tsql, join

我有 2 个正在返回的选择：

```
SELECT_A (COLUMN_A,COLUMN_B, SELECT_A_JOIN_COLUMN)

SELECT_B (COLUMN_A,COLUMN_B, SELECT_B_JOIN_COLUMN) 
```

期望的结果：

```
Result  (COLUMN_A,COLUMN_B,SELECT_A_JOIN_COLUMN,SELECT_B_JOIN_COLUMN) 
```

例子：

`SELECT_A`结果：

```
A B zxc
A B rty 
```

`SELECT_B`结果：

```
A B yui
A B hjk 
```

期望的结果：

```
A B zxc null
A B rty null
A B null yui
A B null hjk 
```

如何做到这一点？

这几乎就像联合，但我可以通过加入来做到这一点吗？

**编辑**：

好的。所以让我陈述我的目标。我想让查询返回一个分层树。这是因为 LINQ2Entities 正在为查询生成额外缓慢且效率低下的 sql，其中包含许多导航属性。

所以我首先要实现的是得到树……不知何故。

例子：

我想达到以下结果：

```
ObjectId | ChildType1Id | ChildType1Field | ChildType2Id | ChildType2Field

    1          34          asd          null        null
    1          12          xcv          null        null
    1          5           klk          null        null
    1          null        null         6           vbn
    1          null        null         7           jkh 
```

到目前为止，我得到了 2 个带有左连接的简单选择，这些选择返回了我：

```
ObjectId  | ChildType1Id | ChildType1Field
    1          34             asd
    1          12             zcv
    1          5              klk 
```

和

```
ObjectId  | ChildType2Id | ChildType2Field
   1             6           vbn 
   1             7           jkh 
```

如果我将有更多的儿童类型怎么办？对于每个 childType，我似乎确实需要使用联合。如果我将有 50 列，我需要在 UNION 中说明所有这些列（因为它需要相同数量的列）。我可以避免使用诸如加入之类的所有这些联合来添加我需要的列（下一个子类型列）吗？

3 种不同 childrenTypes 的期望结果：

```
ObjectId|ChildType1Id|ChildType1Field|ChildType2Id|ChildType2Field|ChildType3Id|ChildType3Field

    1          34          asd          null        null       null         null 
    1          12          xcv          null        null       null         null
    1          5           klk          null        null       null         null
    1          null        null         6           vbn        null         null
    1          null        null         7           jkh        null         null
    1          null        null         null        null        5           iop
    1          null        null         null        null        9           klp 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T19:03:05.143

这样做比 a ( [SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/4590) )`JOIN`更复杂`UNION`

```
SELECT COALESCE(A.COLUMN_A, B.COLUMN_A) AS COLUMN_A,
       COALESCE(A.COLUMN_B, B.COLUMN_B) AS COLUMN_B,
       SELECT_A_JOIN_COLUMN,
       SELECT_B_JOIN_COLUMN
FROM   SELECT_A A
       FULL OUTER JOIN SELECT_B B
         ON SELECT_A_JOIN_COLUMN = SELECT_B_JOIN_COLUMN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:57:48.227

它是一个联盟。

```
SELECT COLUMN_A, COLUMN_B, SELECT_A_JOIN_COLUMN, NULL
    FROM SELECT_A
UNION ALL
SELECT COLUMN_A, COLUMN_B, NULL, SELECT_B_JOIN_COLUMN
    FROM SELECT_B; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:57:13.873

```
select COLUMN_A, COLUMN_B, SELECT_A_JOIN_COLUMN, null
from SELECT_A
union all
select COLUMN_A, COLUMN_B, null, SELECT_B_JOIN_COLUMN
from SELECT_B 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:58:49.897

我不明白你想要什么是加入。这个工会这样做：

```
select *
from ((select COLUMN_A,COLUMN_B, SELECT_A_JOIN_COLUMN, NULL as SELECT_B_JOIN_COLUMN
       from SELECT_A
      ) union all
      (select COLUMN_A,COLUMN_B, NULL as SELECT_A_JOIN_COLUMN, SELECT_B_JOIN_COLUMN
       from SELECT_B
      )
     ) t
order by 1, 2, 3, 4 
```

# mule - 如何在 Mule JDBC 查询中引用 JSON 参数？

> ID：12536540
> 
> 赞同：2
> 
> 时间：2012-09-21T18:54:00.397
> 
> 标签：mule

我正在将 JSON 数据传递给 Mule，如果我回显有效负载，我会得到：

```
{"AddJob":{"JobNumber":12345,"Version":1}} 
```

我想使用 JDBC 查询将这些值插入到表中。我用什么代替“？？？” 在下面引用那些 JSON 参数？我需要先将其转换为对象吗？

```
<jdbc:query key="insertQuery" value="INSERT INTO [dbo].[Jobs] ([[JOB_NUMBER], [VERSION]) VALUES (???? , ????)"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:17:53.433

在 3.3.0 中引入 MEL 后，推荐的方法是将 JSON 有效负载转换为 Map：

```
<json:json-to-object-transformer returnClass="java.util.HashMap"/> 
```

然后在查询中使用 MEL 表达式：

```
<jdbc:query key="insertQuery"
            value="INSERT INTO [dbo].[Jobs] ([[JOB_NUMBER], [VERSION]) VALUES (#[message.payload.AddJob.JobNumber], #[message.payload.AddJob.Version])"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:11:27.520

对于这个用例，您应该考虑使用mule 提供的[Json 表达式评估器。](http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/module/json/JsonExpressionEvaluator.html)

您的 jdbc 查询如下所示

```
<jdbc:query key="insertQuery" value="INSERT INTO [dbo].[Jobs] ([[JOB_NUMBER], [VERSION]) VALUES (#[json: AddJob/JobNumber] , #[json: AddJob/Version])"/> 
```

# php - 通过 php facebook sdk API 检索用户电子邮件

> ID：12536547
> 
> 赞同：1
> 
> 时间：2012-09-21T18:54:53.420
> 
> 标签：php, facebook, api, email

我按照这个项目的例子（example.php）：[https ://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

它运行得很好，我可以从 Facebook 帐户中检索很多信息（姓名、身份证、名字、姓氏、城市......）但我看不到用户电子邮件，这是我唯一需要的......

如何修改该页面以仅检索用户电子邮件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:43:06.167

> 但我看不到用户电子邮件，这是我唯一需要的......

当用户登录您的应用程序时，您必须先请求`email`许可 - 请参阅[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

> 如何修改该页面以仅检索用户电子邮件？

After getting the permission, if you don’t want all the additional fields, use the `fields` parameter in your Graph API call, as in [/me?fields=email](https://developers.facebook.com/tools/explorer?method=GET&path=me?fields%3Demail) (it’ll still give you the user id as well, but not any other info you might not need).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T19:06:27.580

您可以使用此代码获取电子邮件

```
function fqlQuerynew() {
           FB.api('/me', function (response) {
                var query = FB.Data.query('select name,email,hometown_location, sex, pic_square from user where uid={0}', response.id);
                query.wait(function (rows) {
                    alert(rows[0].name);
                     alert(rows[0].email);
                     alert(rows[0].sex);
                     alert(rows[0].pic_square);
                });
            });
        } 
```

# javascript - GXT / GWT / Javascript - 将数据复制到剪贴板

> ID：12536548
> 
> 赞同：0
> 
> 时间：2012-09-21T18:55:00.723
> 
> 标签：javascript, jquery, gwt, gxt

> **可能重复：**
> [如何在 JavaScript 中复制到剪贴板？](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)

我有一个文本，我想将数据复制到计算机的剪贴板。在 GXT 中是否有一个小部件可以这样做，如果没有，在 GWT 中是否有，如果没有，这是低级 Javascript 方式？

所有浏览器都支持吗？

# iphone - xcode 4.5 中的 dictionaryHasDefinitionForTerm 问题

> ID：12536550
> 
> 赞同：4
> 
> 时间：2012-09-21T18:55:14.797
> 
> 标签：iphone, objective-c, ios6, xcode4.5

```
 fourLetterWord = @"isdjfiodjof";
   if ([UIReferenceLibraryViewController dictionaryHasDefinitionForTerm:fourLetterWord]) {
        self.display.text = fourLetterWord;
        return;
    }
    else
        fourLetterWord = @""; 
```

该字符串正在被接受。我不知道我在这里做错了什么，但在 4.5 之前它工作得很好。这是 xcode 4.5 的问题，还是我的代码有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:22:19.833

我刚刚遇到了同样的问题并开始解决它。[UIReferenceLibraryViewController dictionaryHasDefinitionForTerm:fourLetterWord]) 方法由于某些原因在模拟器中不起作用，Apple 需要修复它。

但是，如果您在设备中测试您的应用程序 [UIReferenceLibraryViewController dictionaryHasDefinitionForTerm:fourLetterWord]) 方法运行并为您提供正确的结果。

虽然它有点慢。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-26T17:37:47.947

`dictionaryHasDefinitionForTerm:`如果还没有下载字典，则总是返回`YES`（因为如果没有字典，它无法知道该单词是否在其中）。

当您在任何应用程序中实际显示字典弹出框时，会自动提供下载。我认为按需下载功能是在 iOS 6 中引入的，以及英语以外的其他语言的词典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T16:49:52.397

我的经验是，这在运行 iOS 5.1.1 的 iPad 上运行良好，但在运行 iOS 6.1.3 的 iPod 上每次都返回 TRUE。我已将其记录为 Apple 的错误。

更新：omz 是对的。一旦我将 Apple 的词典下载到我的 iOS6 iPod 上，它就会正确验证单词。很久以前我在我的 iPad 上安装了 iOS5，我不记得我是手动安装还是为我完成的。无论如何，它需要在 iOS6 上手动安装才能使用此方法。

# wpf - Wpf 内容控制

> ID：12536557
> 
> 赞同：1
> 
> 时间：2012-09-21T18:55:24.660
> 
> 标签：wpf, mvvm, binding, contentcontrol

新程序员问题：

我正在尝试创建一个简单的导航欢迎页面，类似于您在 ipad 上看到的内容。

我的 MainWindow 有一个标题栏（不会改变），其余的将是一个容器，可以根据事件显示不同的内容。

所以这是我的问题，如何绑定容器（内容控件）以显示其他视图，即最初显示欢迎视图，然后如果用户从欢迎视图单击按钮，内容控件将显示他们选择的视图。

我目前的欢迎页面为：

```
<UserControl x:Class="ContentControl.Views.WelcomeView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:vm="clr-namespace:ContentControl.ViewModels"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<UserControl.DataContext>
    <vm:WelcomeViewModel />
</UserControl.DataContext>
<Grid Background="red">
    <Grid.RowDefinitions >
        <RowDefinition Height="25*" />
        <RowDefinition Height="50*"/>
        <RowDefinition Height="25*"/>
    </Grid.RowDefinitions>

    <Rectangle Grid.Row="0" Fill="Green"/>
    <DockPanel Grid.Row="1" HorizontalAlignment="Center" Background="White">
        <Button Height="50" Width="50" Margin="5" Content="DASH" Command="{Binding ViewChangedCommand}" CommandParameter="Dashboard"/>
        <Button Height="50" Width="50" Margin="5" Content="ROOM" Command="{Binding ViewChangedCommand}" CommandParameter="MeetingRoom"/>
        <Button Height="50" Width="50" Margin="5" Content="SCREEN" Command="{Binding ViewChangedCommand}" CommandParameter="Screen" />
    </DockPanel>
    <Rectangle Grid.Row="2" Fill="Blue"/>
</Grid>
</UserControl> 
```

视图模型如下：

```
class WelcomeViewModel : BaseViewModel
{
    private MainWindowViewModel _mainWindowVm;
    private RelayCommand<string> _viewChangedCommand;

    public ICommand ViewChangedCommand
    {
        get { return _viewChangedCommand ?? (_viewChangedCommand = new RelayCommand<string>(OnViewChanged)); }
    }

    public event EventHandler ViewChanged;

    private void OnViewChanged(string view)
    {
        EventHandler handler = ViewChanged;
        if (handler != null) handler(view, EventArgs.Empty);
    }

    public MainWindowViewModel MainWindowVm
    {
        get { return _mainWindowVm; }
        set
        {
            _mainWindowVm = value;
            OnPropertyChanged("MainViewModel");
        }
    }

    public WelcomeViewModel()
    {
        MainWindowVm = new MainWindowViewModel();
        ViewChanged += MainWindowVm.ViewChanged;
    }
}
} 
```

我的主窗口如下：

```
<Window x:Class="ContentControl.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:ContentControl.ViewModels"
    xmlns:views="clr-namespace:ContentControl.Views"
    Title="MainWindow" Height="350" Width="525">
<Window.DataContext>
    <vm:MainWindowViewModel />
</Window.DataContext>
<Window.Resources>
    <DataTemplate DataType="{x:Type vm:ScreenViewModel}">
        <views:ScreenView />
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:WelcomeViewModel}">
        <views:WelcomeView />
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:MeetingRoomViewModel}">
        <views:MeetingRoomView />
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:DashboardViewModel}">
        <views:DashboardView />
    </DataTemplate>
</Window.Resources>

<Grid>
    <StackPanel>
        <Label>This Is My Label</Label>
        <ContentControl x:Name="MainPanel" Content="{Binding Content, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
            MinHeight="200"
            MinWidth="200"
            HorizontalContentAlignment="Left" 
            VerticalContentAlignment="Center" 
            Focusable="False">
        </ContentControl>
    </StackPanel>
</Grid>
</Window> 
```

主窗口视图模型：

```
class MainWindowViewModel : BaseViewModel
{
    private UserControl _content;

    public UserControl Content
    {
        get { return _content; }
        set
        {
            _content = value;
            OnPropertyChanged("Content");
        }
    }

    public void ViewChanged(object o, EventArgs e)
    {
        switch (o.ToString())
        {
            case "Welcome":
                {
                    var welcome = new WelcomeView();
                   Content = welcome;
                    break;
                }
            case "MeetingRoom":
                {
                    var meetingRoom = new MeetingRoomView();
                    Content= meetingRoom;
                    break;
                }
            case "Dashboard":
                {
                    var dashboard = new DashboardView();
                    Content = dashboard;
                    break;
                }
            case "Screen":
                {
                    var screen = new ScreenView();
                    Content = screen;
                    break;
                }
        }

        MessageBox.Show(o.ToString());
    }

    public MainWindowViewModel()

    {

    }

}
} 
```

我如何将这些连接起来以相互协作所以我可以将 WelcomeView 显示为 contentcontrol 的内容，然后当我按下按钮时，将 ContentControl 更改为所选内容。

再次抱歉，我是 MVVM 和 WPF 的新手，这些绑定让我很头疼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:20:53.410

DASH、ROOM、SCREEN 按钮应位于 MainWindow 上。ViewChangedCommand 应该在 MainWindowViewModel 上。内容将通过动态模板显示。

如果您想要控件上的按钮：好的，那么让我们将按钮放在控件上，但更改内容命令应该在 MainWindowViewModel 中。要进行这样的绑定，您应该执行以下操作：

```
Command="{Binding Path=DataContext.ChangeContentCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" 
```

在您的按钮中

# java - 带有 += / -= 运算符的 Java switch 语句

> ID：12536559
> 
> 赞同：6
> 
> 时间：2012-09-21T18:55:37.900
> 
> 标签：java

非常简单的问题，但无法弄清楚。为什么 y 在下面的（Java）代码中计算为 2？

```
int x = 2;
int y = 2;
switch (x * 2) {
    case 4: y += 1;
    case 6: y -= 2;
    default: y += 1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T18:56:35.743

它从案例 4 下降到案例 6 到默认值，因此它递增（新值：3），递减 2（新值：1）然后递增（新值：2）。

编译器应该已经警告过你失败了，至少如果你使用`-Xlint`. 永远不要忽视编译器警告，并且总是编译`-Xlint`:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:57:52.407

您忘记添加`break`：

```
int x = 2;
int y = 2;
switch (x * 2) {
    case 4: 
        y += 1;
        break;
    case 6:
        y -= 2;
        break;
    default: y += 1;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T18:57:09.840

您没有在案例后添加中断。所以它执行所有语句。y=y+1-2+1；2

Switch 语句应该是 -

```
int x = 2;
int y = 2;
switch (x * 2) {
    case 4: y += 1;break;
    case 6: y -= 2;break;
    default: y += 1;
} 
```

那么 y 将是 3

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T19:01:07.743

`break;`在 switch 语句中，除非您添加语句，否则将执行第一个匹配案例以下的所有案例。

如果您希望 y 成为`1`您需要执行的操作：

```
int x = 2; 
int y = 2;  
switch (x * 2){  
case 4: y += 1; 
break;
case 6: y -= 2; 
break;
default: y += 1; 
} 
```

# javascript - 检测窗口是否可见

> ID：12536562
> 
> 赞同：3
> 
> 时间：2012-09-21T18:55:47.980
> 
> 标签：javascript, analytics

> **可能重复：**
> [Javascript：有什么方法可以检测到该窗口当前处于活动状态吗？（即显示在活动选项卡/窗口上）](https://stackoverflow.com/questions/9632741/javascript-is-there-any-way-to-detect-that-window-is-currently-active-i-e-is)

我有一个基于网络的仪表板，它向医院楼层的护士等显示关键的时间敏感信息。挑战在于，如果仪表板未打开或最小化，他们将看不到消息并能够做出响应。我目前跟踪应用程序运行的时间百分比（它每 10 秒通过 AJAX 轮询新消息，因此我可以轻松查看每小时执行多少请求或其他），但这并不能告诉我应用程序是否已最小化.

一种方法是使用`onfocus`/ `onblur`，但效果有限，因为部署它的大多数计算机都是双显示器机器，并且它们通常会在一个屏幕上保持仪表板打开，同时在另一个屏幕上使用临床信息系统。使用 focus/blur 方法，这种状态将被视为“未聚焦”，但我希望它对我的统计数据而言算作“开放”。

检测窗口可见性的任何想法？我在想可能包括一个微小的 Flash“像素”并检测它是否可见 - 还有其他想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T19:51:07.947

您可以在支持它的浏览器中使用[Page Visibility API](http://www.w3.org/TR/2011/WD-page-visibility-20110602/)。否则，正如您所说，您将需要使用带有 onfocus/onblur 的 hack。

[visibility.js](https://github.com/ai/visibility.js)是一个在所有浏览器中抽象出来的库。如果浏览器不支持 Page Visibility API，它将使用 onblur/onfocus hack。

```
function isPageHidden(){
     return document.hidden || document.msHidden || document.webkitHidden || document.mozHidden;
 } 
```

来源：[http ://www.nczonline.net/blog/2011/08/09/introduction-to-the-page-visibility-api/](http://www.nczonline.net/blog/2011/08/09/introduction-to-the-page-visibility-api/)

阅读：[https ://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API](https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API)

# javascript - 如何使您的 Javascript 有条件地运行，具体取决于浏览器？

> ID：12536565
> 
> 赞同：5
> 
> 时间：2012-09-21T18:55:54.567
> 
> 标签：javascript, html, internet-explorer

如果浏览器不是 IE 或 IE 9+，我希望运行一段 Javascript。如果浏览器是 IE8 或更低版本，则应该运行另一段 Javascript。

我尝试使用[条件评论](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)：

```
<!--[if (!IE)|(gte IE 9)]>
    <script type="text/javascript"> /* code 1 */ </script>
<![endif]-->

<!--[if (lt IE 9)]>
    <script type="text/javascript"> /* code 2 */ </script>
<![endif]--> 
```

但是 IE6 和 IE7 仍然在执行**code 1**。Firefox 正在执行**代码 2** ...

请不要使用 jQuery。

**编辑：**实际上，我的条件表达式是错误的。但仍然使用所选答案中提出的特征检测。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T21:11:34.333

从您的评论来看，听起来您只是想决定是否可以使用`document.getElementsByClassName()`. 如果是这种情况，您可以像这样使用特征检测：

```
if (document.getElementsByClassName) {
    // code here that uses getElementsByClassName
} else {
    // code here that doesn't use getElementsByClassName
} 
```

* * *

只安装一个 polyfill 可能会更干净，这样您就可以在旧版本的 IE 中使用它，而无需先检查。您可以通过 Google 搜索找到其中的一些。这是[一个](https://gist.github.com/2299607)：

```
// Add a getElementsByClassName function if the browser doesn't have one
// Limitation: only works with one class name
// Copyright: Eike Send http://eike.se/nd
// License: MIT License

if (!document.getElementsByClassName) {
  document.getElementsByClassName = function(search) {
    var d = document, elements, pattern, i, results = [];
    if (d.querySelectorAll) { // IE8
      return d.querySelectorAll("." + search);
    }
    if (d.evaluate) { // IE6, IE7
      pattern = ".//*[contains(concat(' ', @class, ' '), ' " + search + " ')]";
      elements = d.evaluate(pattern, d, null, 0, null);
      while ((i = elements.iterateNext())) {
        results.push(i);
      }
    } else {
      elements = d.getElementsByTagName("*");
      pattern = new RegExp("(^|\\s)" + search + "(\\s|$)");
      for (i = 0; i < elements.length; i++) {
        if ( pattern.test(elements[i].className) ) {
          results.push(elements[i]);
        }
      }
    }
    return results;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:12:07.523

您可以通过在 javascript 中检查而不是在 HTML 中进行检查来做到这一点。在 JS 中，您有一个属性`navigator.userAgent`，它为每个浏览器（甚至 IE 在其不同的兼容版本中）返回一个唯一的字符串。所以我建议在所有浏览器中执行整个 JS 块并简单地添加类似这样的内容添加它的顶部：

```
if(navigator.userAgent.indexOf('MSIE 9.0') !== -1)
{
  // call IE9 specific method
}
else
{
  // call method for other browsers
} 
```

有关更复杂的方法，请参阅这篇文章[navigator.userAgent](https://stackoverflow.com/questions/4986993/navigator-useragent)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:46:02.983

正如 jfriend00 所说，特征检测可能是更好的解决方案，但这里是满足您要求的条件注释。

```
<!--[if gte IE 9]> -->
    <script type="text/javascript"> alert('ie9+ and not ie') </script>
<!-- <![endif]-->
<!--[if lt IE 9]>
    <script type="text/javascript"> alert(' < ie9') </script>
<![endif]--> 
```

[http://jsfiddle.net/szF4J/1/](http://jsfiddle.net/szF4J/1/)

# c# - 通过 COM Interop 编组托管结构的 SAFEARRAY

> ID：12536566
> 
> 赞同：0
> 
> 时间：2012-09-21T18:55:56.153
> 
> 标签：c#, c++, com, safearray

我正在尝试将从 ac# 库导出的结构数组传递给 c++ 代码。目标是将结构的 SAFEARRAY 从 c++ 传递到 c#。

我已按照指示

[http://limbioliong.wordpress.com/2011/07/16/marshaling-a-safearray-of-managed-structures-by-com-interop-part-2/](http://limbioliong.wordpress.com/2011/07/16/marshaling-a-safearray-of-managed-structures-by-com-interop-part-2/)

但是通过调用 GetRecordInfoFromTypeInfo 得到这个错误

0x80028019 旧格式或无效类型库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:01:09.057

如果您不需要调度接口，以下应该可以工作：

```
void MyMethod([MarshalAs(UnmanagedType.LPArray, SizeParamIndex=1)] MyStruct[] data, long size); 
```

如果您需要使用 SAFEARRAY，我希望以下工作（但我不是 100% 确定，因为我目前没有可用的 Windows 机器）：

```
void MyMethod([MarshalAs(UnmanagedType.SafeArray, SafeArraySubType=VarEnum.VT_USERDEFINED)] MyStruct[] data); 
```

如果您负担得起更改您的费用`struct`，`class`那么这也将起作用，并让您免于 UDT 的麻烦：

```
void MyMethod([MarshalAs(UnmanagedType.SafeArray, SafeArraySubType=VarEnum.VT_UNKNOWN)] MyStruct[] data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:09:00.263

结构是否包含字符串？如果是这样，请确保标记它们 [MarshalAs(UnmanagedType.BStr)]。COM 中有一个限制：结构数组中的字符串必须是 BSTR。TLBExp 默认为 LPWSTR，然后调用终止。见这里： http: [//msdn.microsoft.com/en-us/library/z6cfh6e6 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/z6cfh6e6(v=vs.100).aspx)

# performance - 使用 curl 进行性能测试 - 延迟

> ID：12536567
> 
> 赞同：0
> 
> 时间：2012-09-21T18:55:59.880
> 
> 标签：performance, curl, web, delay

有人可以帮助分析在测试某些网站的性能时收到的以下输出吗？尤其是那些代表进度表的线

在我看来`curl`，几次重新尝试下载页面的内容..我是对的吗？

可能的原因是什么 - 是格式错误的 Content-Lenght 响应标头吗？

* * *

```
About to connect() to xx.example.com port 80 (#0)
Trying 12.12.12.12... connected
Connected to xx.example.com (12.12.12.12) port 80 (#0)
GET /testing/page HTTP/1.1
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1)
            Gecko/20100101 Firefox/4.0.1
Host: mp.example.com
Accept-Encoding: deflate, gzip
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8

  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed

  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  HTTP/1.1 200 OK

 Age: 26        
 Date: Thu, 21 Sept 2012 15:19:48 GMT
 Cache-Control: max-age=60        
 Xontent-Length:           
 Connection: Close     
 Via: proxy
 ETag: "KNANXUSNFMBN"
 Content-Type: application/json;charset=UTF-8
 Vary: Accept-Encoding

[data not shown] 
```

 ****```
100 32074    0 32074    0     0  54987      0 --:--:-- --:--:-- --:--:-- 55300
100 49400    0 49400    0     0  28372      0 --:--:--  0:00:01 --:--:-- 28423
100 52121    0 52121    0     0  20174      0 --:--:--  0:00:02 --:--:-- 20201
100 58912    0 58912    0     0  16923      0 --:--:--  0:00:03 --:--:-- 16938 
```**  **```
100 58912    0 58912    0     0  13142      0 --:--:--  0:00:04 --:--:-- 13152
100 58912    0 58912    0     0  10742      0 --:--:--  0:00:05 --:--:--  5476
100 58912    0 58912    0     0   9083      0 --:--:--  0:00:06 --:--:--  2004
100 58912    0 58912    0     0   7868      0 --:--:--  0:00:07 --:--:--  1384
100 58912    0 58912    0     0   6940      0 --:--:--  0:00:08 --:--:--     0
100 58912    0 58912    0     0   6207      0 --:--:--  0:00:09 --:--:--     0
100 58912    0 58912    0     0   5615      0 --:--:--  0:00:10 --:--:--     0
100 58912    0 58912    0     0   5125      0 --:--:--  0:00:11 --:--:--     0
100 58912    0 58912    0     0   4715      0 --:--:--  0:00:12 --:--:--     0
100 58912    0 58912    0     0   4365      0 --:--:--  0:00:13 --:--:--     0
100 58912    0 58912    0     0   4063      0 --:--:--  0:00:14 --:--:--     0
100 58912    0 58912    0     0   3801      0 --:--:--  0:00:15 --:--:--     0
100 58912    0 58912    0     0   3570      0 --:--:--  0:00:16 --:--:--     0
100 58912    0 58912    0     0   3366      0 --:--:--  0:00:17 --:--:--     0
100 58913    0 58913    0     0   3226      0 --:--:--  0:00:18 --:--:--     0
100  113k    0  113k    0     0   6067      0 --:--:--  0:00:19 --:--:-- 12387*
Closing connection #0

END - total_time: 19.094
(cumul_times - dns: 0.002 connect: 0.004 pretrans: 0.004 firstbyte: 0.006)
status: 200 size: 115856 hsize: 269 date: 16.08.2012-18:20:33 1345130433 
```

* * *

我将不胜感激对此的所有意见。

我正在对特定网页的延迟进行故障排除，我正在寻找有关如何解释这些 curl 进度条的建议。在工作场景中 - 没有延迟 - 有 1 条进度表线：

```
Age: 28        
Date: Thu, 21 Sep Aug 2012 15:20:46 GMT
Cache-Control: max-age=60        
Content-Length: 115856    
Connection: Keep-Alive
Via: proxy
ETag: "KXNFGAHSKCUY"
Content-Type: application/json;charset=UTF-8
Vary: Accept-Encoding
[data not shown]

100  113k  100  113k    0     0  6402k      0 --:--:-- --:--:-- --:--:-- 8703k*
Connection #0 to host xx.example.com left intact

Closing connection #0
END - **total_time: 0.018**
(cumul_times - dns: 0.002 connect: 0.004 pretrans: 0.004 firstbyte: 0.006)
status: 200 size: 115856 hsize: 269 date: 16.08.2012-18:21:14 1345130474 
```

我的问题是各个行是什么意思？那卷曲只拿到了部分内容，一直在重试重试。可能是什么原因？服务器慢？WAN 连接中断.....？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:04:51.197

你可以发布你执行的 curl 请求吗？不过，您可能希望使用`ab`或`apib`（可在 google 代码上获得）进行基准测试。****

# php - 滑动表单内容

> ID：12536570
> 
> 赞同：0
> 
> 时间：2012-09-21T18:56:17.437
> 
> 标签：php, jquery, forms, jquery-plugins, slider

所以我有一个 3 页（Page1.php、Page2.php、Page3.php）的注册页面，在 20 多个小时的编码后全部完成。但现在我正在从事设计工作。我的想法是将所有表单放在一个页面上，而不是三个不同的页面（Page1.php、Page2.php、Page3.php）。

这是首页的样子： ![形式](../Images/d9d0dbba192f252f2473e89a313aecda.png)

因此，当用户单击注册链接时，我希望表单出现在该区域中： ![表格注册](../Images/05065be61815c748bea17a5044bf0298.png)

我有表格的所有代码，所以这只是一个简单的复制粘贴问题。但我需要做的是为表单实现某种滑块。所以用户点击注册，表格出现在右边，他们填写第一页，然后在右下角点击继续，然后滑到下一页。请注意，当他们单击继续时，我不想转到一个全新的页面，我想留在同一页面上，我只想显示不同的内容。

我知道如何在 jquery 中执行所有 onclick（显示/隐藏）操作，但我想知道是否有一个好的插件可以用来提供更平滑的过渡和更好的体验。或者如果有更好的方法（纯 CSS 或其他东西）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:05:02.713

只需将所有内容设置为并且`.hide()`具有唯一标识符。`.show()``div`

所以你有了：

```
<a href="javascript:void();" data-tab="page1" class="tab">Page 1</a>
<a href="javascript:void();" data-tab="page2" class="tab">Page 2</a>
<a href="javascript:void();" data-tab="page3" class="tab">Page 3</a>
<div class="tab" data-tab="page1">Content for page 1</div>
<div class="tab" data-tab="page1">Content for page 1</div>
<div class="tab" data-tab="page1">Content for page 1</div> 
```

使用 jquery 代码：

```
$('a.tab').click(function(){
    $('div.tab').hide();
    $('div.tab[data-tab=' + $(this).attr('data-tab') + ']').show();
}); 
```

嗯，基本上就是这样。你可以做剩下的，但这应该让你朝着正确的方向开始:)

你可以让它变得像你想要的那样复杂。我有一些编码，他们使用 CakePhp 中的 TabHelper 执行此操作，并且使用一点 javascript 我构建了相同的代码。因为我不喜欢`jQueryUi tab plugin`（提示）

另外，看一下`Php Frameworks`，你说你花了 20 个小时为你的注册和登录编码。好吧，我也做了同样的事情`CakePhp`，但现在我的网站已经完成并且完全可维护，并且在正确的时间发送电子邮件并且有很多的功能。

# ios5 - Monotouch中的BeginBackgroundTask

> ID：12536573
> 
> 赞同：1
> 
> 时间：2012-09-21T18:56:24.323
> 
> 标签：ios5, xamarin.ios

在应用程序进入后台后我需要做一些处理，所以我将此代码添加到我的应用程序中：

```
public override void DidEnterBackground (UIApplication application)
{
    int taskid = 0;
    taskid = application.BeginBackgroundTask(() => {
        if(taskid != 0)
        {
            System.IO.File.WriteAllText(System.IO.Path.Combine(AppState.Current.User.Path, "blah"), "test");
            application.EndBackgroundTask(taskid);
            taskid = 0;
        }
    });
} 
```

然后我监控了文件系统（模拟器应用程序）并且文件从未被写入目的地。发生这种情况有什么原因吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:41:35.550

BeginBackgroundTask 方法的参数是过期处理程序。它将在您的后台时间到期之前执行。那是你应该只结束任务而不是其他的地方。

在您的后台时间开始的 BeginBackgroundTask 调用之后。

[苹果文档。](https://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

[使用 MonoTouch 在 iOS 上进行多任务处理。](http://software.tavlikos.com/2010/12/08/multitasking-in-ios-the-monotouch-way-part-i/)

# inheritance - Go 结构可以继承一组值吗？

> ID：12536574
> 
> 赞同：3
> 
> 时间：2012-09-21T18:56:26.073
> 
> 标签：inheritance, go

Go 结构可以从另一个结构的类型继承一组值吗？

像这样的东西。

```
type Foo struct {
    Val1, Val2, Val3 int
}

var f *Foo = &Foo{123, 234, 354}

type Bar struct {
    // somehow add the f here so that it will be used in "Bar" inheritance
    OtherVal string
} 
```

这会让我这样做。

```
b := Bar{"test"}
fmt.Println(b.Val2) // 234 
```

如果不是，可以使用什么技术来实现类似的效果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T19:03:26.570

以下是在 Bar one 中嵌入 Foo 结构的方法：

```
type Foo struct {
    Val1, Val2, Val3 int
}
type Bar struct {
    Foo
    OtherVal string
}
func main() {
    f := &Foo{123, 234, 354}
    b := &Bar{*f, "test"}
    fmt.Println(b.Val2) // prints 234
    f.Val2 = 567
    fmt.Println(b.Val2) // still 234
} 
```

现在假设您不希望复制这些值并且希望`b`在更改时进行`f`更改。然后你不想嵌入而是用指针组合：

```
type Foo struct {
    Val1, Val2, Val3 int
}
type Bar struct {
    *Foo
    OtherVal string
}
func main() {
    f := &Foo{123, 234, 354}
    b := &Bar{f, "test"}
    fmt.Println(b.Val2) // 234
    f.Val2 = 567
    fmt.Println(b.Val2) // 567
} 
```

两种不同的构图，具有不同的能力。

# assembly - 在程序集中检查 sge 是真还是假

> ID：12536583
> 
> 赞同：0
> 
> 时间：2012-09-21T18:57:04.967
> 
> 标签：assembly, mips

我是 MIPS 程序集的新手，我正在尝试检查我的 'sge' 操作是否返回真或假，这是否是检查此问题的有效方法（使用 1 表示真，零表示假）？

```
sge $t1, $c, $a
beq $t1, 1, TRUE
beq $t1, 0, FALSE
TRUE: add $s0, $s1, 1
FALSE: sub $s0, $s1, 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:31:34.803

`beq <register>,<immediate value>, label`不是合法的 MIPS 指令**。**真正的 MIPS 指令只有一个字段用于立即数，例如常量或分支偏移量。（一些 MIPS 汇编器可能将其实现为[伪指令](http://en.wikipedia.org/wiki/MIPS_architecture#Pseudo_instructions "伪指令")）。

一种更惯用的写法是：

```
 sge    $t1, $t2, $t3    # $t2 contains c, $t3 contains a
         # sge sets $t1 to 1 if $t2>=$t3 otherwise $t1 gets set to 0
  bnez   $t1, $zero, TRUE # goto TRUE if $t1 != 0
         # at this point we know that $t1==0, so we don't need a conditional branch
  b      FALSE 
```

# c++ - 在 Visual Studio 中使用 Boost C++ 单元测试，在其他项目中找不到 .cpp 文件

> ID：12536590
> 
> 赞同：0
> 
> 时间：2012-09-21T18:57:29.210
> 
> 标签：c++, unit-testing, boost

我有一个解决方案，我在其中添加并设置了 boost 单元测试。问题是我有另一个我想测试的项目，其中有一些类。事实上，那个项目是我添加 boost 的主要原因。

我需要测试的项目设置为输出为 .dll。问题是，每当我的测试项目需要访问其他项目的代码时，它都可以很好地访问标头。但是，如果标头中包含未解析的代码，而这些代码在包含对象的项目的 .cpp 文件中已解析，则会收到链接错误。有没有解决的办法？理想情况下，我希望将我的对象保存在我的其他 dll 中，然后在我的测试项目中测试它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:33:47.420

您可能没有告诉您的测试项目在哪里可以找到符号。手动链接到您的生产代码的 .lib，或者您可以添加项目作为参考，VS 将自动链接您的项目。

转到项目的属性，在 Common Properties 下选择 Framework 和 References。单击 Add New References... 按钮，然后选择您的其他项目。由于它是一个 .dll，因此您需要将 Link Library Dependencies 设置为 False（保存并重新打开对话框，该设置似乎有问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:26:38.987

问题是 Visual Studio 编译器无法链接到其他文件中的 CPP。我还必须使用现有文件选项将 CPP 文件添加到 boost 项目中。

# android - 调用 DatePickerDialog 不会更改数据

> ID：12536591
> 
> 赞同：1
> 
> 时间：2012-09-21T18:57:31.877
> 
> 标签：android, datepicker

我正在尝试制作以下项目：开始活动有 4 个按钮。1\. 第一个按钮只打开一个信息对话框 (onClick0) 2\. 第二个按钮打开一个 DatePickerDialog 并允许我设置日期。(onClick1) 3\. 第三个按钮打开一个对话框，显示我输入的日期 (onClick2)。4.第四个按钮只是打开一个关于对话框。(onClick3)

问题是在第一个日期设置之后，我打开的对话框按第三个按钮总是显示我设置的第一个日期。

我究竟做错了什么？请帮我 ：）

## 主要活动代码：

```
package boy.girl;

import java.text.DateFormat;
import java.util.Calendar;
import android.os.Bundle;
import android.app.Activity;
import android.app.Dialog;
import android.view.View;
import android.widget.DatePicker;
import android.widget.Toast;
import android.content.DialogInterface;
import android.app.DatePickerDialog;
import android.app.AlertDialog;

public class MainActivity extends Activity {

DateFormat fmtDateAndTime=DateFormat.getDateTimeInstance();
Calendar dateAndTime=Calendar.getInstance();

int mYear,mMonth,mDay;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void onClick0(View v) 
{ 
    showDialog(0); 
}

public void onClick1(View v)
{ 
     new DatePickerDialog(this, d,
             dateAndTime.get(Calendar.YEAR),
             dateAndTime.get(Calendar.MONTH),
             dateAndTime.get(Calendar.DAY_OF_MONTH))
     .show();
}

DatePickerDialog.OnDateSetListener d=new DatePickerDialog.OnDateSetListener() 
{
    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {

        Toast.makeText(getBaseContext(), "Set", Toast.LENGTH_SHORT).show();

        mYear = year;
        mMonth = monthOfYear;
        mDay = dayOfMonth;
        dateAndTime.set(Calendar.YEAR, year);
        dateAndTime.set(Calendar.MONTH, monthOfYear);
        dateAndTime.set(Calendar.DAY_OF_MONTH, dayOfMonth);

        Toast.makeText(getBaseContext(), 
Integer.toString(mDay)+" "+Integer.toString(mMonth)+" "+Integer.toString(mYear),
Toast.LENGTH_SHORT).show();
    }   
};

public void onClick2(View v) 
{ 
    showDialog(2); 
}

public void onClick3(View v) { showDialog(3); }

@Override
protected Dialog onCreateDialog(int id)
{
    switch(id)
    {
    case 0:
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setIcon(R.drawable.infobox);
        builder.setTitle("Title Information");
        builder.setMessage("Information text...");
        builder.setPositiveButton("OK",
            new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog,    int which) {
        Toast.makeText(getBaseContext(), "Ok clicked", Toast.LENGTH_SHORT)
                        .show();
                    }
                });
    return builder.create();

            case 2: 

        return new AlertDialog.Builder(this)
    .setTitle("Results")
    .setMessage(Integer.toString(mDay)+" "+Integer.toString(mMonth)+
" "+Integer.toString(mYear))
        .setPositiveButton("OK",
        new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
        Toast.makeText(getBaseContext(), "Ok clicked", Toast.LENGTH_SHORT)
                .show();
            }
        }
    ).create();

    case 3: 
        return new AlertDialog.Builder(this)
        .setTitle("About")
        .setMessage("About this company and App version")
        .setPositiveButton("OK",
                new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
        Toast.makeText(getBaseContext(), "Ok clicked", Toast.LENGTH_SHORT)
                .show();
            }
        }
    ).create();
    }
    return null;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:06:17.347

`onCreateDialog`只调用一次。因此，它始终显示您第一次打开它时的数据。

您需要更新中的消息`onPrepareDialog`。那应该让它为你工作。

PS：onCreateDialog 和 onPrepareDialog 在 ICS 中已被弃用，并且在 ICS 中也存在一些问题。如果可能，请尝试使用新的 API。

编辑：

保持您的代码不变，只需添加以下内容 -

```
 @Override
  protected void onPrepareDialog(int dialogId, Dialog dialog, Bundle args) {
    if(dialogId==2){
      ((AlertDialog)dialog).setMessage(Integer.toString(mDay)+" "+Integer.toString(mMonth)+
        " "+Integer.toString(mYear));
    }
  } 
```

# mongodb - MongoDB：按键迭代集合？

> ID：12536592
> 
> 赞同：2
> 
> 时间：2012-09-21T18:57:33.200
> 
> 标签：mongodb, indexing, key

如何遍历与 MongoDB 集合中指定键的每个值匹配的所有文档？

例如，对于包含以下内容的集合：

```
{ _id: ObjectId, keyA: 1 },
{ _id: ObjectId, keyA: 2 },
{ _id: ObjectId, keyA: 2 }, 
```

...索引为`{ keyA: 1 }`，我如何对所有文档在哪里`keyA:1`，然后`keyA:2`，等等上运行操作？

具体来说，我想为每个`keyA`值运行一个 count() 文档。所以对于这个集合，等价于`find({keyA:1}).count()`,`find({keyA:2}).count()`等。

**更新**：键是否被索引与它们的迭代方式无关，因此编辑标题和描述以使 Q/A 在未来更容易参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:18:33.850

我不确定我会把你带到这里，但这就是你要找的东西：

```
db.mycollection.find({ keyA: 1 }).count() 
```

将计数`keyA`为 1 的所有键。

如果那不能回答这个问题，你认为你可以更具体一点吗？

您的意思是对所有唯一键值进行聚合`keyA`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:21:19.557

它可以通过多个查询来实现：

```
var i=0;
var f=[];
while(i!=db.col.count()){
  var k=db.col.findOne({keyA:{$not:{$in:f}}}).keyA;
  i+=db.col.find({keyA:k}).count();
  f.push(k);
} 
```

这段代码的意义是在数组f中收集*col集合对象的**KeyA*字段的唯一值，这将是操作的结果。不幸的是，在执行此操作的一段时间内，您应该阻止任何操作，这将更改*col*集合。

 ****更新：**

[使用distinct](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)可以更轻松地完成所有工作：

```
db.col.distinct("KeyA") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T19:47:22.687

感谢@Aleksey 指点我[`db.collection.distinct`](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)。

看起来这样做：

```
db.ships.distinct("keyA").forEach(function(v){
    db.ships.find({keyA:v}).count();
}); 
```

当然，在循环中调用 count() 并没有多大作用。就我而言，我正在寻找具有多个文档的键值，所以我这样做了：

```
db.ships.distinct("keyA").forEach(function(v){
    print(db.ships.find({keyA:v}).count() > 1);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T22:03:45.480

获取 keyA 唯一值的分组计数的更简单方法是使用MongoDB 2.2 中的新[聚合框架：](http://docs.mongodb.org/manual/applications/aggregation/)

例如：

```
db.coll.aggregate(
  { $group : {
     _id: "$keyA",
     count: { $sum : 1 }
  }}
) 
```

... 返回一个结果集，其中每个 _id 都是 keyA 的唯一值，并计算该值出现的次数：

```
{
    "result" : [
        {
            "_id" : 2,
            "count" : 2
        },
        {
            "_id" : 1,
            "count" : 1
        }
    ],
    "ok" : 1
} 
```**

# ajax - 使用 AJAX 检查数据库更新并通知

> ID：12536593
> 
> 赞同：2
> 
> 时间：2012-09-21T18:57:33.907
> 
> 标签：ajax, database, notifications

我需要一个**ajax**脚本来检查数据库中是否有数据*条目，并在页面上为每个条目显示**通知*。我希望向查看该页面的每个用户显示通知。

我尝试了以下方法，但没有提供所需的输出：

**main.html**

```
<html>
<head>
  <script type='text/javascript' src='ajx.js'></script>
</head>
</html> 
```

**流行音乐**

```
<?php
try{
    $con=mysql_connect("localhost:3306", "root", "") or die(mysql_error()) ;  
    $q = mysql_query("SELECT `user`.`name`,`user`.`page` FROM `people`.`user` ORDER BY `user`.`index` DESC",$con);

    if(!$q)
    {
    throw new Exception('Uncaught Exception occurred');
     }
}
catch(Exception $e)
{
Echo "";
}

$results = mysql_fetch_assoc($q);

echo json_encode($results);
?> 
```

**ajx.js**

```
$.ajax({
url: "pop.php",
dataType: "json",
success: function(json){
    var dataArray = JSON.decode(json);
    dataArray.each(function(entry){
        alert(entry.name);
    }
}
}); 
```

***当我加载 main.html 时我没有得到结果***。我认为需要一些语句来打印结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:35:51.990

我查看了您的代码并进行了一些修改。这是我使用的在我的系统上使用的测试数据库的确切代码：（您需要根据您的系统环境对其进行调整）

**主.html：**

```
<html>
<head>
<script type="text/javascript" src="js/jquery.js"></script>
<script type='text/javascript' src='ajx.js'></script>
</head>
<body>
    Your body content in here...
</body>
</html> 
```

**流行音乐：**

```
<?php
include __DIR__.'/include/Configurations.php';
include __DIR__.'/include/DatabaseConnect.php';

global $databaseConnection;

try{
    $q = mysql_query("SELECT name, page FROM users", $databaseConnection);

    if(!$q)
    {
    throw new Exception('Uncaught Exception occurred');
    }
}
catch(Exception $e)
{
Echo "";
}

$results = Array();
$i = 0;

while ($row = mysql_fetch_assoc($q))
{
    $results[$i] = $row;
    $i++;
}

echo json_encode($results);
?> 
```

**ajx.js：**

```
$(document).ready(function(){
    $.ajax({
        url: "pop.php",
        dataType: "json",
        success: function(json){
            var i;
            for(i=0; i<json.length; i++)
            {
                alert(json[i].name);
            }
        }
    });
}); 
```

当您将它集成到您​​的实际项目中时，您只需将 alert() 函数替换为您想要的任何逻辑和输出方法，以便在页面上正确获取内容。让我知道这对你有什么好处，或者我还有什么可以帮助的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:05:53.900

您想澄清该脚本的哪个特定方面的写作？您是否有关于您可能遇到问题的具体问题？

**你可以使用这样的东西：**

PHP 文件：（get_notifications.php）

```
$q = /*your query to database*/
$query = mysql_query($q, $dbConnect);
$results = mysql_fetch_assoc($query);
echo json_encode($results); 
```

Javascript 文件：

```
$.ajax({
    url: "get_notifications.php",
    dataType: "json",
    success: function(json){
        var dataArray = JSON.decode(json);
        dataArray.each(function(entry){
            alert(entry.valueName);
        }
    }
}); 
```

在 javascript 文件中，“valueName”指的是您要输出的数据键。例如，如果您“从人员中选择姓名”，并且您想输出他们的姓名，则应为 entry.name。您还可以将警报替换为附加或其他内容，以将数据放入 div 或页面上。

如果您需要对这些部分中的任何部分进行进一步说明，请告诉我。这应该能给你一个很好的开始。希望能帮助到你。

**澄清：** 您的页面加载的文件应该只包含您的布局和 HTML 以及包含您的 js 的脚本标记。

然后你的 ajax 调用的 php 应该在一个由 Ajax 调用的单独文件中，而不是包含在正在加载的页面中。希望这是有道理的。

# asp.net-mvc - 如何通过 WCF 反序列化内存流中的对象列表

> ID：12536595
> 
> 赞同：2
> 
> 时间：2012-09-21T18:57:36.510
> 
> 标签：asp.net-mvc, wcf

MVC 4.0

我在服务上运行以下内容：

```
[OperationContract(Name = "GetHierarchyReportContents")]
[FaultContract(typeof(InvalidHierarchyNameException))]
[ServiceKnownType(typeof(Node))]
MemoryStream GetContents(); 
```

该函数提供了一个内存流，其中包含一个节点列表（APINode 因为别名）。本质上，它所做的一切如下：

```
BinaryFormatter formatter = new BinaryFormatter();
MemoryStream stream = new MemoryStream();

formatter.Serialize(stream, data.ToList<APINode>());

stream.Seek(0, SeekOrigin.Begin);

return stream; 
```

下面是Node的定义，它定义在一个命名空间中，防止与另一个节点发生冲突。

```
[DataContract (Name="Node",Namespace="API")]
[Serializable]
public class Node
{
    public Node()
    {
    }

    [DataMember]
    public string Name { get; private set; }

} 
```

在我的客户端应用程序上，我执行以下操作：

```
BinaryFormatter bf = new BinaryFormatter();
List<Node> nodes = (List<Node>) bf.Deserialize(client.GetContents()); 
```

我收到错误消息：

> 找不到程序集“API，版本=1.0.0.0，文化=中性，PublicKeyToken=null”。

我正在使用`wsHttpBinding`客户端连接。我一定遗漏了一些东西，也许命名空间搞砸了。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:16:27.160

如果客户端上的 .NET 运行时版本与服务器上的版本不同，则二进制序列化可能会失败。我建议使用`DataContractSerializer`和编写二进制文件`XmlDictionaryWriter`：

```
 var stream = new MemoryStream();
        var writer = XmlDictionaryWriter.CreateBinaryWriter(stream);
        var serializer = new DataContractSerializer(List<APINode>);

        serializer.WriteObject(writer, data.ToList<APINode>());
        writer.Flush();
        stream.Position = 0;
        return stream; 
```

在客户端：

```
 using (var reader = XmlDictionaryReader.CreateBinaryReader(client.GetContents(), XmlDictionaryReaderQuotas.Max))
        {
            var serializer = new DataContractSerializer(List<Node>);

            return (List<Node>)serializer.ReadObject(reader, true);
        } 
```

# sql-server - SQL Server 日志传送和主密钥

> ID：12536598
> 
> 赞同：1
> 
> 时间：2012-09-21T18:57:56.843
> 
> 标签：sql-server, encryption

我们有一个使用加密的 SQL Server 2008r2 数据库。我们正在将数据库日志传送到辅助备份。辅助服务器上的解密失败。辅助备份似乎没有主密钥。

在辅助服务器上设置加密的操作顺序是什么？

我是否需要在主服务器上备份密钥，然后使用该文件将其还原到辅助服务器，还是只需要在辅助服务器上创建相同的密钥？

我们在辅助服务器上尝试了以下命令并收到错误消息：

```
OPEN MASTER KEY DECRYPTION BY PASSWORD = 'password'
ALTER MASTER KEY ADD ENCRYPTION BY SERVICE MASTER KEY 
```

> 消息 15151，第 16 级，状态 1，第 1 行
> 
> 找不到对称密钥“主密钥”，因为它不存在或您没有权限。
> 
> 消息 15151，第 16 层，状态 1，第 2 行
> 
> 找不到对称密钥“主密钥”，因为它不存在或您没有权限。

运行脚本的用户是盒子上的 dbo 管理员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:38:11.533

复制自 MSDN....

在主服务器上备份服务主密钥。此密钥将在辅助服务器上恢复

文件备份服务主密钥 = 'path_to_file' 密码加密 = 'password'

从文件恢复服务主密钥 = 'path_to_file' 密码解密 = '密码' [强制]

[http://technet.microsoft.com/en-us/library/ms151224.aspx](http://technet.microsoft.com/en-us/library/ms151224.aspx)

[http://technet.microsoft.com/en-us/library/ms190337.aspx](http://technet.microsoft.com/en-us/library/ms190337.aspx)

[http://technet.microsoft.com/en-us/library/ms187972.aspx](http://technet.microsoft.com/en-us/library/ms187972.aspx)

# java - 在java中按顺序运行线程

> ID：12536606
> 
> 赞同：0
> 
> 时间：2012-09-21T18:58:29.127
> 
> 标签：java, multithreading

假设我有线程 T1、T2 和 T3，我将如何确保线程 T2 在 T1 之后运行，线程 T3 在 T2 之后运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:02:02.817

您的问题的解决方案可能是“不要使用多个线程”。如果要确保动作 2 在动作 1 之后执行，动作 3 在动作 2 之后执行，没有交错，那么解决方案是执行动作 1，然后执行动作 2，然后执行动作 3。线程作为一种机制很有用对于并行性，并通过尝试确保操作以特定顺序运行，您明确禁止并行性。不要试图使用一种机制来做与其设计目的*完全相反*的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T19:03:04.130

在 T1 死亡后，您将不得不开始 T2。

```
t1.start();
t1.join();
t2.start(); 
```

实际上，如果您需要按顺序运行它们，您可能不需要/不应该将它们放在单独的线程中。只需将 t1 和 t2 代码依次放在一个线程中即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:02:19.417

看看[`Thread#join()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)：

> 等待这个线程死掉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T19:05:38.067

你可以设计这个

1.  倒计时锁存器
2.  等待通知全部
3.  观察者可观察的模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T19:49:02.160

在 T1 代码的末尾开始 T2。在 T2 代码的末尾开始 T3。

或者只是按照其他海报的建议在一个线程中按顺序运行这些函数，因为这个练习基本上没有意义。

# c# - .net 中的高性能画布

> ID：12536607
> 
> 赞同：0
> 
> 时间：2012-09-21T18:58:34.487
> 
> 标签：c#, .net, canvas

我很惊讶你现在可以在由 javascript 驱动的 html5 canvas/svg 中做些什么，我想知道是否有任何用于 .NET 的绘图库具有类似的性能和易用性。我在想，如果有的话，那么我可以构建某种工具，例如 d3.js for .net。

我正在寻找一个可以让我实时绘制类 svg 元素的库。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:11:54.733

[使用 WPF 和画布控件](http://wpftutorial.net/Canvas.html)，您可以非常轻松地进行 SVG 之类的“绘图”，并且 HTML5 画布通常是硬件加速的。

其他选项是使用 DirectX api，无论是封装的还是原生的，XNA 用于纯游戏开发或 GDI(+) 库。

# r - 如何构建零分布

> ID：12536614
> 
> 赞同：-2
> 
> 时间：2012-09-21T18:59:01.347
> 
> 标签：r, statistics, sas, spss

> 1：我想创建一个包含 14.000 个基因（行）和 250 个样本（矩阵列）的合成数据集。如何做到这一点？
> 2：在此之后，我想用互信息的ex算法来推断基因调控。我知道如何并且事实上我有一个网络。
> 3：我想知道我得到的网是不是偶然的。为此，一种常见的方法是将样本或基因混洗 1000 次，以创建 1000 个网络并绘制一个空分布以验证您之前获得的网络（第 2 点）。这称为引导程序。还有其他方法吗？

最好的，

E.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:19:42.480

R中的`sample`函数是构造现有数据的随机排列的基本方法。不清楚你想要什么，另外一个想法是你可能只需要指向`runif`生成随机统一序列的函数。如果在一个对象向量中有 1000 个特定类型的对象，obj：

```
 sample( obj )   # returns a permuted sequence
 # Same as ...
 obj[ sample(length(obj)) ] 
```

这是否是“零分布”由您决定。（并且要求“所有”方法来完成 R 中的任何特定任务将被视为要求过高。通常有大量方法，即使要求“最好”也会增加你获得你的问题已结束。）

# scala - Scala 支持向量机库

> ID：12536619
> 
> 赞同：6
> 
> 时间：2012-09-21T18:59:16.253
> 
> 标签：scala, machine-learning

我需要 Scala 的支持向量机库。

我想我应该看看 Scala 和 Java 的实现，你是否建议我特别使用它们中的任何一个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T21:41:02.450

[SVMlight](http://svmlight.joachims.org/)具有 Java 的 JNI 绑定，可在[此处](http://www.mpi-inf.mpg.de/~mtb/#projects)下载。从 Scala 代码调用它应该没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-09T10:55:23.747

这里有两种选择：

*   [https://github.com/zsxwing/scala-svm](https://github.com/zsxwing/scala-svm)
*   [https://github.com/cjlin1/libsvm](https://github.com/cjlin1/libsvm)（有 Java 和 C 版本）。替代链接：[https ://www.csie.ntu.edu.tw/~cjlin/libsvm/](https://www.csie.ntu.edu.tw/~cjlin/libsvm/)

我最终毫无问题地使用了 Scala 的第二个。它发布到[Maven Central](http://search.maven.org/#artifactdetails|tw.edu.ntu.csie|libsvm|3.17|jar)，尽管不是最新的源版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T22:44:41.630

[这个](https://github.com/apache/spark/blob/master/mllib/src/main/scala/org/apache/spark/mllib/classification/SVM.scala)看起来很有希望。好像一直在更新

# ruby-on-rails - Rails：模型创建期间的未知属性

> ID：12536620
> 
> 赞同：8
> 
> 时间：2012-09-21T18:59:25.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有一条错误消息 - “未知属性：news_id”，但我不明白问题出在哪里。我有新闻控制器，我想为每条新闻创建评论。我希望有人能帮助我。提前致谢。

架构.rb

```
create_table "comments", :primary_key => "ID", :force => true do |t| 
  t.integer "Author_ID" 
  t.integer "News_ID", :null => false 
  t.string "Content", :limit => 500, :null => false 
  t.datetime "Date", :null => false 
end 
```

评论型号：

```
belongs_to :news 
```

新闻模型：

```
has_many :comments 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T19:14:04.487

这是因为您还没有添加`:news_id`到您`Comment`的模型中。

编写迁移以将 news_id 添加到 Comment 中，您的问题将得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:06:49.327

`puts params`您可以在开始操作时打印出参数，`create`以检查它发送的实际属性。

或者您可以查看您有评论创建操作以获取参数的路线..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-14T13:17:31.730

在生产环境中使用 PostgreSQL 数据库处理 Ruby on Rails 应用程序时，我遇到了同样的问题。

**这是我解决它的方法**：

问题是我使用生成的新迁移文件在**开发环境中的表中添加了一些新列，但是当我推送到****生产环境**时，我也没有通过迁移创建这些新列。

我所要做的就是在**生产环境中简单地运行数据库迁移，以使用在****开发环境**中生成的迁移文件创建这些新列。

```
rails db:migrate 
```

就这样。

**我希望这有帮助**

# jquery - Jquery - 可折叠滑块

> ID：12536621
> 
> 赞同：1
> 
> 时间：2012-09-21T18:59:29.350
> 
> 标签：jquery, background, slider, slideshow, collapse

我正在尝试将以下小提琴[http://jsfiddle.net/SQHQ2/1/](http://jsfiddle.net/SQHQ2/1/)中的脚本与 jquery 背景滑块结合起来。我的目标是你可以看到部分图像处于折叠状态，当你激活它时，图像的其余部分变得可见。

到目前为止，我尝试过的所有脚本都否定了折叠功能。

我真的希望有人可以帮助我。

谢谢！

# sql - 优化动态 SQL 查询

> ID：12536624
> 
> 赞同：1
> 
> 时间：2012-09-21T18:59:48.447
> 
> 标签：sql, hibernate

我正在寻找一个 SQL 查询构建器，它可以根据我想从数据库中检索的一组数据优化 SQL 查询。数据集是一个“给我表 B 中列 C 等于 D 的列 A 的值”的数组。A、B、C、D的值在数组中可以是任意的，但是很多记录会共享相同的B、C、D。

连接 Hibernate 查询的最佳方法是什么？有什么理由使用另一个框架进行这样的查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:24:34.813

标准适合您：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)

```
List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.like("name", "Fritz%") )
    .add( Restrictions.or(
        Restrictions.eq( "age", new Integer(0) ),
        Restrictions.isNull("age")
    ) )
    .list(); 
```

# php - 当窗口不在焦点时停止的Javascript倒数计时器

> ID：12536627
> 
> 赞同：1
> 
> 时间：2012-09-21T18:59:56.783
> 
> 标签：php, javascript, countdown

好的，我无法解决这个问题，我是一名 php / C# Web 开发人员，并且没有 Javascript 方面的经验或知识，我只需要做一件需要 Javascript 的事情：

当某个页面加载时，计数器启动。客户必须在此页面上停留 20 秒。之后，我想执行 php 代码。

所以有两个关于我的问题，首先：如果客户离开页面（意味着页面不在焦点上），我如何停止计数器。

2) 如何在 javascript 中执行 php？，或从 Javascript 调用 php 函数。

我到目前为止的代码是这样的：

```
<html>
<head>
</head>

<body>
<div id='timer'>
<script type="text/javascript">

COUNTER_START = 20

function tick () {
    if (document.getElementById ('counter').firstChild.data > 0) {
        document.getElementById ('counter').firstChild.data = document.getElementById ('counter').firstChild.data - 1
        setTimeout ('tick()', 1000)
    } else {
        document.getElementById ('counter').firstChild.data = 'done'
    }
}

if (document.getElementById) onload = function () {
    var t = document.createTextNode (COUNTER_START)
    var p = document.createElement ('P')
    p.appendChild (t)
    p.setAttribute ('id', 'counter')

    var body = document.getElementsByTagName ('BODY')[0]
    var firstChild = body.getElementsByTagName ('*')[0]

    body.insertBefore (p, firstChild)
    tick()
}

</script>
</div>
</body>
</html> 
```

我还希望计时器在客户端返回页面时开始计时

非常感谢您提前提供的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:07:59.510

你可以使用 jQuery 来做到这一点。
回收旧的 Stackoverflow 帖子，试试这个：

```
var window_focus;
var counter = 1000;

// on focus, set window_focus = true.
$(window).focus(function() {
    window_focus = true;
});

// when the window loses focus, set window_focus to false
$(window).focusout(function() {
    window_focus = false;
});

// this is set to the ('click' function, but you could start the interval/timer in a jQuery.ready function: http://api.jquery.com/ready/
$(document).one('click',function() {
    // Run this function every second. Decrement counter if window_focus is true.
    setInterval(function() {
        $('body').append('Count: ' + counter + '<br>');
        if(window_focus) { counter = counter-1; }
    }, 1000);
}); 
```

**Demo 和**
[旧帖 DEMO](http://jsfiddle.net/JWxS6/) | [老所以帖子](https://stackoverflow.com/questions/3479734/test-if-window-has-focus)

**更新**
可能是因为演示在 4 个 iframe 中运行，$(window).focus 位仅适用于实际运行代码的 iframe（右下角窗口）。

**jQuery**
[jQuery.com（jQuery 的工作原理）](http://docs.jquery.com/How_jQuery_Works) | [示例（在页面中途返回基础知识）](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/) | **[如果您使用第二个链接，还请阅读此](http://encosia.com/6953-reasons-why-i-still-let-google-host-jquery-for-me/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:09:22.197

关于您关于检测窗口是否失焦的第一个问题，请参阅以下答案：[有没有办法检测浏览器窗口当前是否处于活动状态？](https://stackoverflow.com/questions/1060008/is-there-a-way-to-detect-if-a-browser-window-is-not-currently-active)

这是可能的，但只有非常新的浏览器支持此功能，因此基于当前浏览器支持它可能没有用。

要从 Javascript 触发 PHP 代码，您必须对服务器端 PHP 脚本进行 AJAX 调用以调用 PHP，因为 JS 是客户端，而 PHP 是服务器端。

# html - 如果没有未跨越的单元格，IE 会忽略一个列的宽度

> ID：12536630
> 
> 赞同：1
> 
> 时间：2012-09-21T19:00:08.290
> 
> 标签：html, html-table, internet-explorer-9, colgroup

我的问题很容易证明：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<body>
<table border="1">
    <colgroup>
        <col width="75">
        <col width="75">
        <col width="75">
        <col width="75">
    </colgroup>
    <tr>
        <td colspan="2">Cells 1 + 2</td>
        <td colspan="2">Cells 3 + 4</td>
    </tr>
</table>
</body>
</html> 
```

虽然 Firefox (15.0.1) 创建了一个包含两个单元格的表格，每个单元格为 150 像素...

![在 Firefix 中的结果](../Images/28d8a26b41749a9dba6bec2764c2d3bc.png)

... Internet Explorer (9.0.8112.16421) 仅使用第三列作为宽度：

![结果在 IE](../Images/0fca9f938a806bf24b38becda1e25c7e.png)

只要表格包含一行，其中第四列中的单元格不跨越另一列，宽度定义就会按预期工作。

我猜 IE 本身就是“哦，好吧，第三个后面没有其他列 - 让我们忽略 col 定义”。但我不知道如何避免这个问题。有什么建议么？而且，当然，也欢迎超越远程自省的解释:)

为了避免讨论这个例子的意义：列是由一个函数自动定义的，该函数不知道后面的单元格是否会单独使用（至少一次）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:18:36.983

为 TABLE 本身设置一个宽度。

```
<table border="1" width="300"> 
```

# javascript - 如何在自动包装html中找到第一行

> ID：12536631
> 
> 赞同：1
> 
> 时间：2012-09-21T19:00:08.523
> 
> 标签：javascript, line-breaks

假设我有`div`一个固定宽度和一些自动换行的文本。现在我想`span`在第一行的末尾插入一个元素。因为文本不是以特定结构编写的，所以第一行可以包含五个单词以及三个或一个单词。所以我需要找到自动换行发生的位置。这是可能的还是我需要插入手册`br`或一些标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:04:10.597

您需要添加或一些标记。不同的浏览器计算应该在第一行放置多少单词。如果用户改变浏览器的设置，例如增加字体大小，第一行将改变字数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:04:34.197

这是痛苦的可能。问题是你为什么要这样做？可能有一种更简单的方法来完成您的需要。

如果您决定仍然需要这样做，您需要做的是创建一个无法看到的 div 的克隆。您可以将此克隆的 div 的高度设置为 1px 或类似的值。然后，您可以逐字用相同的文本填充此克隆。一旦 div 的 scrollHeight 跳跃，您就知道发生了第一个自动换行。然后，您可以使用此数据来确定原始段落的第一行在何处进行了换行。

# android - 确定android设备锁定状态？

> ID：12536632
> 
> 赞同：3
> 
> 时间：2012-09-21T19:00:11.857
> 
> 标签：android

有没有办法获取安卓设备的设备锁定状态（启用/禁用）？我一直在查看 android/app/admin/DevicePolicyManager，但该类中似乎没有任何可用的东西。

注意：我已经知道如何以编程方式锁定设备，我上面的问题是获取设备锁定状态，无论它是否启用。

# dynamic - 在 ASP.NET 中创建动态 Web 表单

> ID：12536634
> 
> 赞同：2
> 
> 时间：2012-09-21T19:00:15.740
> 
> 标签：dynamic, reflection, webforms, system.reflection

我的项目旨在为最终用户提供在运行时动态设计表单的能力。这就像一个简单的基于 Web 的 IDE 来设计 Web 表单。

最终用户应该能够在运行时输入 Web 表单的所有组件及其各自的属性。

应根据用户定义的组件和属性生成 Web 表单，并显示最终表单。

反射是最好的方法吗？如果是这样，您能否给我指出一个适当的页面，说明我将如何做到这一点？

除了反射还有其他方法可以实现吗？

我尝试研究 web 部件，但是，我开始意识到 web 部件不是我打算对项目做的，因为在编译期间我不会提前知道组件的任何属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:08:34.577

它必须是从服务器（来自 System.Web.UI ）运行的网络表单及其控件吗？

只是为了分享一些经验，我们有一个巨大的代码生成类应用程序，它给定参数（可以像输入一样输入或根据情况输入整个数据库）可以使用 jquery 和/或 dojo ajax 功能生成 html 提交表单到服务器端。 ..

因为我们想要简单，我们决定不动态生成服务器端控件

底线是，我不知道您的要求，但也许您想做类似的事情。

# bash - 在bash中克隆一个变量？

> ID：12536636
> 
> 赞同：1
> 
> 时间：2012-09-21T19:00:26.667
> 
> 标签：bash, shell

在解释我的 bash 问题之前，让我给你一些背景信息：

我正在使用我们在当前工作中使用的 bash“框架”编写一些脚本。该框架的一个特点是初始化一组环境变量，这些变量对在我们的集群基础设施上运行作业很有用。

这些变量取决于由 指定的日期`$YY`，它们也是环境变量（是的，这是连线的）`$mm`。`$dd`要使用该框架，您首先定义日期，然后调用一个函数来初始化其他变量。当您编写仅需要特定日期变量的脚本时，这可以正常工作。今天我正在写一些需要变量 2 天的东西。写这篇我面临一个奇怪的问题。为了让您更好地理解问题，我编写了这段代码来模拟它：

```
#!/bin/bash

function assign(){
    date=$1
    date[1]=$YY
    date[2]=$mm
    date[3]=$dd
}

function display() {
    date=$1
    echo "${date[1]}/${date[2]}/${date[3]}"
}

export YY=2012
export mm=09
export dd=20
declare -a my_date1=()
assign $my_date1

export YY=2012
export mm=08
export dd=20
declare -a my_date2=()
assign $my_date2

display $my_date1
display $my_date2 
```

预期的输出是：

```
2012/09/20
2012/08/20 
```

但输出是：

```
2012/08/20
2012/08/20 
```

起初我认为 assign 函数使用引用填充数组`$YY`，`$mm`而`$dd`不是它们的值。但后来我尝试使用以下代码，它不会改变结果。

```
date[1]=$(echo $YY)
date[2]=$(echo $mm)
date[3]=$(echo $dd) 
```

有人可以解释一下附加什么吗？也许有些东西与`date=$1`......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:22:34.873

在 bash 中，数组不是通过值或引用传递的。相反，数组的扩展值是按值传递的。当你写

```
assign $my_date1 
```

里面的`date`变量`assign`是空的，因为`$my_date1`在调用函数之前扩展为空字符串并在分词后消失。结果，`$1`未设置。

但是，作为一个全局变量，因为它没有被声明为本地，所以使用et al`date`正确设置*，*然后在第二次调用.`YY`*`assign`*

 *另外，请注意，函数的第一行没有`date`引用参数；它实际上只是将成为全局`date`数组的第 0 个元素设置为`$1`.

* * *

话虽如此，我将向您展示一种使用`declare`内置和间接参数扩展来伪造它的方法。

```
function assign () {
    ref=$1
    # Without the -g, we'd declare function-local parameters. The argument is a
    # string to evaluate as a variable assignment. If $ref=my_date1, then we do
    # 'my_date1[1]=$YY', 'my_date1[2]=$mm', etc.
    declare -g "$ref[1]=$YY"
    declare -g "$ref[2]=$mm"
    declare -g "$ref[3]=$dd"
}

function display () {
    ref=$1
    # If $ref=my_date1, then idx
    # iterates over my_date[1], my_date[2], my_date[3].
    # E.g. ${!idx} in the first iteration is ${my_date[1]}.
    arr=()
    for idx in $ref[{1,2,3}]; do
        arr+=( ${!idx} )
    done
    local IFS="/"
    echo "${arr[*]}"
}

export YY=2012 mm=09 dd=20
assign my_date1    # The *name* of the array; no need to predeclare

export YY=2012 mm=08 dd=20
assign my_date2    # The *name* of the array; no need to predeclare

# Again, just the *names* of the arrays
display my_date1
display my_date2 
```*

# php - 如何根据在php中上一个输入的值限制在文本框中输入的值

> ID：12536638
> 
> 赞同：0
> 
> 时间：2012-09-21T19:00:44.653
> 
> 标签：php, html

我有 2 个文本框，一个用于最大分数，另一个用于获得的分数。在第二个框中输入的值必须限制为小于或等于最大分数。只有数字必须被输入到那些框中..

```
Maximum Marks<input type=text name=maxmarks maxlength='2' >
Obtained marks<input type='text' maxlength='2' name='obtmarks'> 
```

请帮帮我..提前谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:02:31.767

好吧，如果您想在客户端执行此操作，则必须使用 Javascript。如果您想在服务器端执行此操作，如果第二个数字超过第一个，为什么不将错误消息发送回页面。如果您可以使用 HTML5 输入选项，您可能还想查看它。这些将自动进行号码验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:14:41.780

你可以试试这样的...

```
 $response_array = array();

   if($obtained > $max){
       $response_array['status'] = 'error';
       $response_array['message'] = '<div class="alert alert-error">Obtained to big</div>';

   }
   if(!is_numeric($obtained){
       $response_array['status'] = 'error';
       $response_array['message'] = '<div class="alert alert-error">Obtained not a number</div>';
   }
   echo json_encode($response_array); 
```

这是伪代码，显然您需要根据您的目的对其进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:19:06.067

首先，您必须在提交表单的 php 脚本中进行检查，之后您可以使用 javascript 以使其更加用户友好，但如果有人更改源代码或只是关闭 javascript，他将能够提交任何内容。在您的 process_form.php 中：

```
 session_start();
    $errors = array();
    if (!isset($_POST['maxmarks']) || empty($_POST['maxmarks'])) {
         $errors[] = 'The Maximum Marks field is required.';
    }
    else {
        if (!is_int($_POST['maxmarks'])) {
            $errors[] = 'The Maximum Marks field must be an integer.';
        }
        else {
           $maxmarks= (int) trim($_POST['maxmarks']);
        }
    }

    if (!isset($_POST['obtmarks']) || empty($_POST['obtmarks'])) {
         $errors[] = 'The Obtained Marks field is required.';
    }
    else {
        if (!is_int($_POST['obtmarks'])) {
            $errors[] = 'The Obtained Marks field must be an integer.';
        }
        else {
           $obtmarks= (int) trim($_POST['obtmarks']);
        }
    }

    if (!empty($errors)) {
        $_SESSION['form_errors'] = $errors;
        header('Location: your_form.php');
        die();
    }
    else if ($obtmarks > $maxmarks){
        $errors[] = 'The Obtained Marks must be less or equal to Maximum Marks.';
        $_SESSION['form_errors'] = $errors;
        header('Location: your_form.php');
        die();
    }
    else {
        //process data
    } 
```

现在在 your_form.php 中：

```
 session_start();
   if (isset($_SESSION['form_errors']) && !empty($_SESSION['form_errors'])) {
       $errors = $_SESSION['form_errors'];
       unset($_SESSION['form_errors']);
   }

   echo '<ul>';
   if (isset($errors)) {
       foreach($errors as $error) {
           echo '<li>' . $error . '</li>';
       }
   }
   echo '</ul>';
   //your form here 
```

# grails - 执行时grails框架的起点是什么？

> ID：12536639
> 
> 赞同：2
> 
> 时间：2012-09-21T19:00:45.697
> 
> 标签：grails

首先，我是 grails 以及网站开发的新手。我开始了 grails 项目和学习。我很清楚像这样的域类、控制器、视图、敏捷开发等 grails 概念。

执行`grails run-app`命令时，grails 何时开始在框架中执行并运行（类似于`main()`Java 中的方法）？

哪个是我的项目中来自 grails 框架的第一个入口域或控制器或视图或 main.gsp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:55:35.250

1.  当服务器启动时，`Bootstrap.groovy`执行。
2.  要收听每个请求，您可能需要定义自己的[过滤器](http://grails.org/doc/latest/guide/theWebLayer.html#filters)。
3.  然而，每个请求的最开始都是`org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:16:54.953

当请求进入时，grails 确定控制器和操作（基于 URL 和您指定的任何 UrlMappings）并调用它。因此，从您的应用程序代码的角度来看，起点是您的操作之一。

例如：

如果用户请求`http://abc.com/book/list`，其中 abc.com 是您的站点，则您的方法`def list()`是`BookController.groovy`起点。

在内部，grails 在调用控制器的操作之前调用每个闭包`AppFilters.groovy`（以及由您或您正在使用的插件定义的其他过滤器）（如果有）。如果您正在开发一个非常简单的应用程序，那么这些都无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-09T14:44:37.853

Grails 包含强大的构建系统 Gant，它是一个围绕 Apache Ant 的 Groovy 包装器。

当您运行命令时：Grails [commad-name]，

Grails 在以下目录中搜索要执行的 Gant 脚本：

USER_HOME/.grails/scripts
PROJECT_HOME/src/main/scripts/
PROJECT_HOME/plugins/*/scripts
GRAILS_HOME/scripts

当您执行**Grails run-app**命令时，它将从上述路径执行文件 RunApp.groovy 文件。这些是 groovy 文件，一旦你查看文件，你就会明白其中的代码。

# assembly - 转换十六进制/十进制数 (Assemly-TASM)

> ID：12536640
> 
> 赞同：3
> 
> 时间：2012-09-21T19:00:47.337
> 
> 标签：assembly, x86, tasm

我试图简单地按顺序打印数字，即

1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20

使用循环，首先我将每个数字转换为 Hexa 打印，将其重置为十进制增量 1，然后打印下一个直到数字等于 9，当数字等于 9 时，我使用 DAA 来简化数字并旋转后并移动我最终将结果存储在字符串中的数字。

直到 16 点之前的输出都很好，但是在 16 点之后，序列会重复，

**期望的输出：**

1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20

**电流输出** 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,11,12,13,14,15

为什么会这样？？？

这是我的代码，

```
MOV CX,20 ;Number of Iterations

MOV DX,1

L1:
    PUSH DX
    ADD DX,30H  
    MOV AH,02H        ;PRINT Content of DX
    INT 21H
    POP DX
    ADD DX,1
    CMP DX,09d        ;If number is Greater than 9 jump to L2   
    JA L2
LOOP L1

    L2: 
        PUSH DX
        MOV AX,DX
        DAA           ;Convert to the Decimal
        XOR AH,AH         ;SET AH to 0000

        ROR AX,1    
        ROR AX,1    
        ROR AX,1    
        ROR AX,1    

        SHR AH,1
        SHR AH,1
        SHR AH,1
        SHR AH,1

        ADC AX,3030h
        MOV BX,OFFSET Result
        MOV byte ptr[BX],5           ; Length of the String
        MOV byte ptr[BX+4],'$'       ;5th position of string , $=Terminator
        MOV byte ptr[BX+3],AH        ;2nd Number onto 4th position
        MOV byte ptr[BX+2],AL        ;3rd number onto 3rd Position 

        MOV DX,BX
        ADD DX,02     ;1st 2 positions of String are type of string and    
                                  length respectively 
        MOV AH,09H ;to print the string
        INT 21H         

        POP DX      
        ADD DX,1

    LOOP L2

MOV AH,4CH  ;Return control to the DOS
INT 21H 
```

PS：我从这张图表中得到了帮助来理解这些数字。

[http://www.cheat-sheets.org/saved-copy/ascii.png](http://www.cheat-sheets.org/saved-copy/ascii.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T08:26:22.553

8086 代码仅允许立即数为 1（或 cl）以计算移位和旋转。要启用 286 代码，请在文件顶部告诉 Tasm“.286”。这是一个猜测。

我记得我曾经在 al 中打印两位数的方式：

```
aam
add ax, 3030h
xchg al, ah
int 29h
mov al, ah
int 29h 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T21:29:08.447

只是试一试，虽然我不确定，我不能快速测试这个。

但我建议不要使用两个循环，而是对整个数字使用一个循环。

此外，我觉得问题与`DAA`我不习惯的指令有关，因为它在 64 位模式下不受支持。

无论如何，这就是我要做的：

```
 mov  cx,20
      mov   al,1
      mov   bl,10      ; divisor
      mov   bp,offset Result ; no need to load this in the loop!!!

L1:   mov   dx,ax      ; save to register, not to stack
      cmp   ax,09d
      ja    L2         ; number has two digits
      add   al,30h     ; ASCII addend

      ; insert your output code here

      jmp   L3         ; jump over the two digit code
L2:   xor   ah,ah
      div   bl         ; divides AX by ten (no rotate or shift needed)
                       ; quotient in AL, remainder in AH (correct order for little endian)
      add   ax,3030h

      ; insert your output code here (note that the buffer/string address is loaded to BP)

L3:   mov   ax,dx
      inc   ax
      loop  L1

      ; done 
```

如果您不介意一位数字是否有前导零，那就更容易了。

该`div`指令可能比`daa`plus `ror`plus更昂贵`shr`，但您的四轮旋转/移位会更糟：-/

（正如我所说，我无法尝试......把这个留给你......如果它不起作用，只是问回来。）

—

[更新：

另一种方法，尤其是`div`在这种简单的数字分隔情况下，将 6 添加到大于 9 的数字（即 10d = 0ah --(+6)--> 16d = 10h；这`daa`也是这样做的），然后您可以使用之前使用的旋转/移位组合。

更好的是添加 246，然后添加到`AX`，之后您可以简单地使用`ror ax,8`（或`rol`- 在这种情况下无关紧要），即 10d = 0ah --(+246)--> 256d = 100h，以及 15d = 0fh --(+246)--> 261 = 105h。分别旋转为0001h或0501h，加上3030h，就大功告成了。

/更新]

[更新级别=“2”

多么有趣...我实际上打算在第一级更新中编写它，但不知何故忘记了：而不是`rol`ling by 8，或者 - 如果你的 TASM 真的不支持`rol`ling by immediate - 八倍滚动一个，你当然也可以使用`xchg`在寄存器之间交换值的指令，在这种情况下

```
 xchg al,ah 
```

将完成交换这两个寄存器的内容的工作。

还有一条`bswap`指令用于反转寄存器中的字节顺序，但显然它仅适用于 32 位以上宽度的寄存器。

/更新]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T20:31:18.120

```
.model small  
 .stack 100  
 .code  
      mov ax, 0ffffh            ; hex number to find it's bcd  
      mov      bx, 0000  
      mov      dh, 0  
 l9 :     cmp     ax, 10000     ; if ax>10000  
      jb      l2  
      sub      ax, 10000        ; subtract 10000  
      inc      dh               ; add 1 to dh  
      jmp      l9  
 l2 :     cmp      ax, 1000     ; if ax>1000  
      jb      l4  
      sub      ax, 1000  
      add      bx, 1000h        ; add 1000h to result  
      jmp      l2  
 l4 :     cmp      ax, 100      ; if ax>100  
      jb      l6  
      sub      ax, 100  
      add      bx, 100h         ; add 100h to result  
      jmp      l4  
 l6 :     cmp      ax, 10       ; if ax>10  
      jb      l8  
      sub      ax, 10  
      add      bx, 10h          ; add 10h to result  
      jmp      l6  
 l8 :     add      bx, ax       ; add remainder   
                                ; to result  
      mov      ah, 02            
      mov      cx, 0204h        ; Count to display   
                                ; 2 digits  
      go:      rol dh, cl  
      mov      dl, dh  
      and      dl, 0fh  
      add      dl, 30h          ; display 2 msb digits       
      int      21h  
      dec      ch  
      jnz      go  
      mov      ch, 04h          ; Count of digits to be   
                                ; displayed  
      mov      cl, 04h          ; Count to roll by 4 bits  
 l12:     rol      bx, cl       ; roll bl so that msb   
                                ; comes to lsb                  
      mov      dl, bl           ; load dl with data to be   
                                ; displayed  
      and      dl, 0fH          ; get only lsb  
      cmp      dl, 09           ; check if digit is 0-9 or letter A-F      
      jbe      l14  
      add      dl, 07           ; if letter add 37H else only add 30H  
 l14:     add      dl, 30H  
      mov      ah, 02           ; Function 2 under INT 21H      (Display character)  
      int      21H  
      dec      ch               ; Decrement Count  
      jnz      l12  
      mov      ah, 4cH          ;  Terminate Program  
      int      21H  
 end 
```

# python - Python——如何从文件中读取和更改特定字段？（特别是数字）

> ID：12536642
> 
> 赞同：0
> 
> 时间：2012-09-21T19:01:11.557
> 
> 标签：python, scripting

我昨天刚开始学习 python 脚本，我已经被卡住了。:(

所以我有一个数据文件，其中包含各个领域的许多不同信息。

格式基本上像...

Name (tab) **Start#** (tab) **End#** (tab) 我需要的一堆字段，但对重复没有任何作用

我需要编写一个带有开始和结束数字的脚本，并根据另一个字段是+还是-来相应地添加/减去一个数字。

我知道我可以用这样的东西替换单词：

```
x = open("infile")
y = open("outfile","a")
while 1:
  line = f.readline()
  if not line: break
  line = line.replace("blah","blahblahblah")
  y.write(line + "\n")
y.close() 
```

但是我查看了各种不同的地方，我无法弄清楚如何从每一行中提取特定字段、读取一个字段并更改其他字段。我读到您可以将这些行读入数组，但似乎不知道该怎么做。

任何帮助都会很棒！

**编辑：**

此处数据中的一行示例：（每个`|`代表一个制表符）

```
 |          |
            V          V
chr21 | 33025905 | 33031813 | ENST00000449339.1 | 0 | **-** | 33031813 | 33031813 | 0 | 3 | 1835,294,104, | 0,4341,5804,
chr21 | 33036618 | 33036795 | ENST00000458922.1 | 0 | **+** | 33036795 | 33036795 | 0 | 1 | 177,          | 0, 
```

第二列和第三列（用箭头表示）将是我需要阅读/更改的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:05:08.183

您可以使用`csv`进行拆分，尽管对于此类问题，我通常只使用`str.split`：

```
with open(infile) as fin,open('outfile','w') as fout:
   for line in fin:
       #use line.split('\t'3) if the name of the field can contain spaces
       name,start,end,rest = line.split(None,3)  
       #do something to change start and end here.
       #Note that `start` and `end` are strings, but they can easily be changed
       #using `int` or `float` builtins.
       fout.write('\t'.join((name,start,end,rest))) 
```

* * *

`csv`如果你想像这样分割线很好：

```
this is a "single argument" 
```

进入：

```
['this','is','a','single argument'] 
```

但这里似乎不需要。

# javascript - 结构化 js/ajax web 应用程序：以动态 web 形式分离结构和内容

> ID：12536643
> 
> 赞同：2
> 
> 时间：2012-09-21T19:01:15.353
> 
> 标签：javascript, jquery, ajax, web-applications

我的问题与我正在处理的任何特定代码无关，但更普遍地与构建 Web 应用程序的最佳实践有关，或者更具体地说，与构建特定类型的 Web 应用程序的建议有关我正在努力。在这种情况下，应用程序当前不是根据任何范例（如 mvc）构建的，鉴于它的具体功能，我不知道这是好事还是坏事。

该应用程序允许用户填写动态生成的 Web 表单。在构建这些表单（主要使用 jQuery/AJAX）时，我必须从数据库中提取管理员生成的信息，这些信息指示表单的结构，同时还从数据库中提取用户生成的信息，该数据库使用内容填充表单的输入。我试图在整个代码中保持这两者（结构和内容）在概念上分开（或至少彼此不同），但我意识到要按照我的意愿生成表单，它们必须是混合在一起。

例如，表单本身相对复杂，管理员可以在表单中创建不同的部分，从而允许用户为每个部分填写多个条目（因此，管理员可能会创建一个名为“过去工作”的部分，允许用户使用相同的输入集合添加多个条目）。因此，为了创建表单，我从顶部开始向下处理层次结构：

1.  使用管理员生成的结构创建表单；
2.  使用管理员生成的结构创建部分；
3.  （在多条目部分的情况下）使用用户生成的内容创建条目；
4.  使用管理员生成的结构创建输入；
5.  使用用户生成的内容填充输入。

这是循环结构和循环内容之间的来回切换，我认为这有点草率，如果不是在概念上，至少在我实现它的方式上。在我看来，切换是必要的，但当谈到如何优雅地进行切换时，我感到很困惑。在这里，我认为学习一两件事关于程序员通常如何构建这些类型的东西会有所帮助（我没有受过专业培训......）是否有一些现有的范式或一些普遍接受的方法可以帮助我保持所有的表单结构的组件与填充它们的用户生成内容分开，同时还促进表单的层次结构？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:13:56.130

有很多 javascript 框架旨在解决您的问题。签出backbone.js 或knockout.js。两者都很棒。

# java - 在 MongoDB 的子文档中更新（递增）值

> ID：12536644
> 
> 赞同：4
> 
> 时间：2012-09-21T19:01:19.707
> 
> 标签：java, mongodb, nosql

如果我有一个包含文档和子文档的 MongoDB 集合，如图所示：

![在此处输入图像描述](../Images/0e4acd36df4cab1640a1f836f8f4fc4b.png)

而且，如果我想在每次调用该方法时将“损坏”增加 1：

```
private final static void incrementCount(String docID, String subDocID) {
    BasicDBObject query = new BasicDBObject();
    query.put("_id", docID);
    query.put("items.id", subDocID);
    BasicDBObject incValue = new BasicDBObject("damage", 1); // or "items.damage" ???
    BasicDBObject intModifier = new BasicDBObject("$inc", incValue);
    badgesCollection.update(query, intModifier, false, false, WriteConcern.SAFE);
} 
```

问题：我指的是“损坏”还是“items.damage”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T19:17:54.837

两者都不。如果您只想增加匹配的数组元素的`damage`值，则需要使用[位置运算符](http://docs.mongodb.org/manual/reference/operator/positional/#op._S_)将该元素标识给运算符。所以是：`items``subDocID``$` `$inc`

```
"items.$.damage" 
```

# ios - 旋转在 iOS6 上表现不同

> ID：12536645
> 
> 赞同：14
> 
> 时间：2012-09-21T19:01:20.260
> 
> 标签：ios, xcode, autorotate, autolayout

我做了一个基于标签的应用程序。什么都不需要在横向模式下，只需要几个视图。它在 iOS5 上运行良好，我对结果非常满意。然而，使用 iOS6 并且没有弄乱任何东西，它现在会旋转所有视图，结果并不好。

因为它是一个基于选项卡的应用程序，所以我在横向中需要的几个视图是 modalViews。这样我就不会弄乱标签栏，我只需要在构建选项的“支持的方向”设置中选择肖像并设置：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

关于我想要的风景。

现在有了 iOS6，这个视图也处于纵向模式，无论如何，即使我旋转设备，它们也不会显示横向模式。同样，如果我允许“支持的方向”上的所有方向，它们都会旋转，无论我在上面的方法中使用什么。

在所有视图中，我都没有选中情节提要上的“使用自动布局”框。

这里有什么帮助吗？

****编辑***** 现在我看到了，我在设备上的应用程序运行良好。我已经安装了促销代码，而不是来自 Xcode，只是为了查看我的客户是否有问题。幸运的是，他们不是。但问题仍然存在。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-22T03:11:54.053

我为这个问题找到的文档中最重要的部分是：

> 当用户更改设备方向时，系统会在根视图控制器或填充窗口的最顶部呈现的视图控制器上调用此方法

为了使我的应用程序在 iOS 6 中完全可以自动旋转，我必须执行以下操作：

1）我创建了一个新的UINavigationController子类，并添加了shouldAutorotate和supportedInterfaceOrientation方法：

```
// MyNavigationController.h:
#import <UIKit/UIKit.h>

@interface MyNavigationController : UINavigationController

@end

// MyNavigationController.m:
#import "MyNavigationController.h"
@implementation MyNavigationController
...
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}
...
@end 
```

2）在 AppDelegate 中，我确实使用了我的新子类来显示我的根 ViewController（它是 introScreenViewController，一个 UIViewController 子类）并且确实设置了 self.window.rootViewController，所以看起来：

```
 nvc = [[MyNavigationController alloc] initWithRootViewController:introScreenViewController];
    nvc.navigationBarHidden = YES;
    self.window.rootViewController = nvc;
    [window addSubview:nvc.view];
    [window makeKeyAndVisible]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-24T10:57:34.130

如果您使用标签栏控制器，这是**iOS6**的替代解决方案。它还表明不需要覆盖 UINavigationController 甚至 UITabBarController。

在你的**xyzAppDelegate.h**添加这个接口：

```
@interface UITabBarController (MyApp)
@end 
```

并在**xyzAppDelegate.m**添加这些方法：

```
@implementation UITabBarController (MyApp) 

-(BOOL)shouldAutorotate
{
  return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
  // your custom logic for rotation of selected tab
  if (self.selectedIndex==...) {
    return UIInterfaceOrientationMaskAll;
  } 
  else {
    return UIInterfaceOrientationMaskPortrait|UIInterfaceOrientationMaskPortraitUpsideDown;
  }
}

@end 
```

此外，为应用程序窗口设置根视图控制器：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  ...
  [self.window setRootViewController:tabBarController]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-21T19:17:11.960

您是否在委托中设置了 rootViewController？例如，

```
 self.window.rootViewController = self.navigationController; 
```

当我进行一些 iOS6 测试时，它无法正常工作，直到我这样做......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-04T05:08:47.530

对于跨 5.0 到 6.0 的工作，我有一个很好的解决方案 - 以上所有内容

```
-(BOOL)shouldAutorotate{return [self shouldIRotateAnyiOS];}//iOS6

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{return [self shouldIRotateAnyiOS];}//pre iOS6

-(BOOL)shouldIRotateAnyiOS{
UIInterfaceOrientation interfaceOrientation = [[UIDevice currentDevice] orientation];
//do the rotation stuff
return YES
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T09:22:37.767

您可能会仔细检查**支持接口方向**

![在此处输入图像描述](../Images/fcfb864a6f5b99ee9afc5a118f8a5054.png)

在以前的版本中，它没有任何意义，但现在会影响整个应用程序。

注意：即使在 iOS 6 上启用或禁用，“倒置”选项也不起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-07T10:08:38.667

这对我有用。

我创建了一个新的 UINavigationController 子类，并添加了 shouldAutorotate 和 supportedInterfaceOrientation 方法：

```
#import "MyNavigationController.h"

@interface MyNavigationController ()

@end

@implementation MyNavigationController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (BOOL)shouldAutorotate {
    return [self.visibleViewController shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations {
    return [self.visibleViewController supportedInterfaceOrientations];
}

@end 
```

然后将此添加到您的委托

```
UINavigationController *nvc = [[MyNavigationController alloc] initWithRootViewController:_viewController];
nvc.navigationBarHidden = NO; // YES if you want to hide the navigationBar
self.window.rootViewController = nvc;
[_window addSubview:nvc.view];
[_window makeKeyAndVisible]; 
```

现在您可以将其添加到要在所有方向上旋转的视图中

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

-(BOOL)shouldAutorotate
{
    return YES;
} 
```

或者将此添加到您只想进行纵向和纵向颠倒的视图中

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return
    (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown ;
}

- (BOOL)shouldAutorotate
{
    return YES;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T08:34:36.463

此代码适用于 ios5 和 ios6

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration {
    if (UIInterfaceOrientationIsLandscape(interfaceOrientation)) {
        [self performSelector:@selector(setframeLandscap) withObject:nil afterDelay:0.2];
    }
    else {
        [self performSelector:@selector(setframePortrait) withObject:nil afterDelay:0.2];
    }
}

-(BOOL)shouldAutorotate {    
    return YES;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-07T19:25:38.670

做了一些实验：获取一个现有的应用程序（在 iOS-6 中不会旋转，但以前会旋转）并将一行添加`self.window.rootViewController = navCtlr;`到 AppDelegate。这导致应用程序看起来（至少乍一看）旋转得很好。

然后，出于好奇，我创建了 RotationCanary 类并将其实例插入 self.window.rootViewController。我会启动应用程序并等待不可避免的“无法识别的选择器”，在 RotationCanary 中创建该名称的新方法，然后重新运行。新方法将调用*真正的*nav ctlr 并在返回之前记录其响应。这产生了（比我预期的要早）以下日志：

```
2012-12-07 13:08:47.689 MyTestApp[53328:c07] System Version is 6.0;    Supported versions are 5.0.x to 6.0.x
2012-12-07 13:08:47.691 MyTestApp[53328:c07] Host memory (in bytes) used: 3489513472 free: 803893248 total: 4293406720
2012-12-07 13:08:47.692 MyTestApp[53328:c07] Memory in use by task (in bytes): 23719936
2012-12-07 13:08:47.695 MyTestApp[53328:c07] Creating database
2012-12-07 13:08:47.699 MyTestApp[53328:c07] Item Selected: (null)  (null)
2012-12-07 13:08:47.700 MyTestApp[53328:c07] <DetailViewController.m:(27)> Entering Method -[DetailViewController viewDidLoad]
2012-12-07 13:08:47.706 MyTestApp[53328:c07] <SplitContentViewController.m:(57)> Entering Method -[SplitContentViewController viewDidLoad]
2012-12-07 13:08:47.708 MyTestApp[53328:c07] <FamilyMasterViewController.m:(32)> Entering Method -[FamilyMasterViewController viewDidLoad]
2012-12-07 13:08:47.709 MyTestApp[53328:c07] <MasterViewController.m:(41)> Entering Method -[MasterViewController viewDidLoad]
2012-12-07 13:08:47.718 MyTestApp[53328:c07] <FamilyHomeDetailViewController.m:(51)> Entering Method -[FamilyHomeDetailViewController viewDidLoad]
2012-12-07 13:08:47.820 MyTestApp[53328:c07] -[RotationCanary _preferredInterfaceOrientationGivenCurrentOrientation:] - current = 2, result = 2
2012-12-07 13:08:47.821 MyTestApp[53328:c07] -[RotationCanary _existingView] - view = (null)
2012-12-07 13:08:47.824 MyTestApp[53328:c07] -[RotationCanary view] - view = <UILayoutContainerView: 0x9c987f0; frame = (0 0; 768 1024); autoresize = W+H; layer = <CALayer: 0x9c8fa00>>
2012-12-07 13:08:47.825 MyTestApp[53328:c07] -[RotationCanary view] - view = <UILayoutContainerView: 0x9c987f0; frame = (0 0; 768 1024); autoresize = W+H; layer = <CALayer: 0x9c8fa00>>
2012-12-07 13:08:47.826 MyTestApp[53328:c07] -[RotationCanary view] - view = <UILayoutContainerView: 0x9c987f0; frame = (0 0; 768 1024); autoresize = W+H; layer = <CALayer: 0x9c8fa00>>
2012-12-07 13:08:47.827 MyTestApp[53328:c07] -[RotationCanary wantsFullScreenLayout] - result = YES
2012-12-07 13:08:47.827 MyTestApp[53328:c07] -[RotationCanary view] - view = <UILayoutContainerView: 0x9c987f0; frame = (0 0; 768 1024); autoresize = W+H; layer = <CALayer: 0x9c8fa00>>
2012-12-07 13:08:47.830 MyTestApp[53328:c07] -[RotationCanary _tryBecomeRootViewControllerInWindow:] - window = <UIWindow: 0x9c76320; frame = (0 0; 768 1024); opaque = NO; autoresize = RM+BM; layer = <UIWindowLayer: 0x9c76450>>, result = YES
2012-12-07 13:08:47.916 MyTestApp[53328:c07] -[RotationCanary _deepestDefaultFirstResponder] - result = <SignOnViewController: 0x9c942a0>
2012-12-07 13:08:47.916 MyTestApp[53328:c07] Device model: x86_64 
```

奇怪的是，该类实际上从未被调用来执行旋转——仅在设置期间。

**我怀疑**Apple 使用 rootViewController 的设置纯粹是为了表明该应用程序已针对 iOS 6 旋转进行了修改——否则它没有真正的功能。

**FWIW：**我突然想到调用者可能正在使用`respondsToSelector`和跳过一些调用，所以我添加了`resolveInstanceMethod:`RotationCanary 的实现，以捕获任何此类尝试。没有发生。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-21T20:58:41.500

您可能需要处理一些事情才能使其正常工作，因为在 iOS6 中，自动旋转的结构发生了变化。现在反转了如何确定自转的结构。过去，单个视图控制器可以通过其决定控制自动旋转，但现在“shouldAutorotate”由导航中的最高父级确定，在您的情况下是 tabBar。

1.  您需要确保您的窗口设置了 rootViewController 而不仅仅是作为子视图添加。
2.  您可能需要将 tabBarController 子类化以实现“supportedInterfaceOrientations”和“shouldAutorotate”。
3.  如果有任何 viewController 需要采取不同的行为，那么您需要让 tabBarController 与他们协商以了解它们是否应该自动旋转的答案。

例如：

```
- (BOOL)shouldAutorotate
{
    return self.selectedViewController.shouldAutorotate;
} 
```

在您的视图控制器中，您将实现 shouldAutorotate 并在那里做出决定。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-01T10:05:14.003

对于 iOS6 上的应用程序“相同图片”，我需要更改方向，我的 UIViewController 永远不会被告知方向，它是一个照片叠加层，可能效果很好：

```
- (void)didRotate: ( NSNotification* )note
{
    [self performSelector:@selector(rotateRecalculDiffere) withObject:nil afterDelay:0.3 ];
} 
```

我通过延迟通话进行了精细的尺寸调整。从通知很容易知道最终方向

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-13T09:16:49.120

来自 Apple 的 shouldAutorotateToInterfaceOrientation 文档：

改写supportedInterfaceOrientations 和preferredInterfaceOrientationForPresentation 方法。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation)：

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-09-21T19:11:50.617

iOS 6.0 中的自动旋转发生了变化。检查此[链接](http://9to5mac.com/2012/06/25/apple-pushes-ios-6-0-update-to-devs/)以获取更多信息。

> iOS 6 中的自动旋转正在发生变化。在 iOS 6 中，不推荐使用 UIViewController 的 shouldAutorotateToInterfaceOrientation: 方法。取而代之的是，您应该使用 supportedInterfaceOrientations 和 shouldAutorotate 方法。

# php - 在 PHP 中结合 isset 和变量赋值的方法？

> ID：12536646
> 
> 赞同：3
> 
> 时间：2012-09-21T19:01:20.070
> 
> 标签：php

是否有更清洁的方法来执行以下操作：

```
if (isset($foo)) {
    $bar = $foo;
} 
```

检查一个值然后分配它似乎是多余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:04:57.670

也许你可以使用

```
$var or $var = 'default value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T12:18:00.963

使用运算符有点脏，`@`但是：

```
if ($bar = @$foo) { //do something } 
```

# export-to-excel - SSIS导出到excel

> ID：12536647
> 
> 赞同：3
> 
> 时间：2012-09-21T19:01:28.233
> 
> 标签：export-to-excel, ssis

使用 SSMS 我创建了一个导出到 Excel 的查询并将其保存为 DTSX 包。将此 DTSX 包导入到 BIDS 项目中，使其每小时运行一次，并导出一个附加时间戳的 excel 文件，使用表达式的动态名称。当我从 BIDS 运行时，包成功执行并毫无问题地创建了 excel 文件。我启用了 DelayedValidation 标志。我可以双击 DTSX 文件，运行包，它会毫无问题地创建 excel 文件。当我配置为 SQL 作业时，它失败并出现以下错误

非常感谢任何指导

```
Microsoft (R) SQL Server Execute Package Utility  Version 10.50.2500.0 for 32-bit  Copyright (C) Microsoft Corporation 2010\. All rights reserved.    
    Started:  2:53:03 PM  
    Error: 2012-09-21 14:53:05.54     
    Code: 0xC0202009     
    Source: Export MyExportQuery to Excel Destination - Query [73]     
    Description: SSIS Error Code DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code: 0x80040E37\.  End Error  
    Error: 2012-09-21 14:53:05.54     
    Code: 0xC02020E8     
    Source: Export MyExportQuery to Excel Destination - Query [73]     
    Description: Opening a rowset for "Query" failed. Check that the object exists in the database.  End Error  
    Error: 2012-09-21 14:53:05.54     
    Code: 0xC004701A     
    Source: Export MyExportQuery to Excel SSIS.Pipeline     
    Description: component "Destination - Query" (73) failed the pre-execute phase and returned error code 0xC02020E8\.  End Error  
    DTExec: The package execution returned DTSER_FAILURE (1).  
    Started:  2:53:03 PM  
    Finished: 2:53:05 PM  
    Elapsed:  2.282 seconds.  The package execution failed.  The step failed. 
```

编辑：SSIS 配置为在 32 位模式下运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:58:01.733

大多数问题是由以下情况引起的：

*   数据源连接或文件访问问题（当运行 sql 代理的用户没有对 db 或目标文件的正确权限时）。

*   包保护级别（pwd 是敏感数据，有时根据保护级别不复制）。

*   64 位问题（这是 XL 导出的常见问题。由于没有适用于 64 位系统的 Jet 驱动程序，因此在 64 位操作系统上运行时，您需要在 sql 作业中使用 32 位 DTEXEC 或设置“使用 32 位运行时”选项，它处于开启状态创建 SSIS 作业步骤时的“执行选项”选项卡，请查看下面链接上的图像以查看它）。

[32 位运行时选项图像](http://1.bp.blogspot.com/-WHsiqaOI8gA/T8_GuvdMMZI/AAAAAAAAAPE/SoqxcClaSvI/s1600/ssis.jpg)

有关此主题的信息，请查看本文，它详细介绍了 ssis 包在 BIDS 上运行但不在 SQL 作业上运行的情况。

[如何对 SQL 代理作业中的 SSIS 包执行失败进行故障排除？](http://social.technet.microsoft.com/Forums/en-US/sqlintegrationservices/thread/e13c137c-1535-4475-8c2f-c7e6e7d125fc)

希望这可以帮助你..

亲切的问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-18T16:58:19.750

当您使用 SQL Server Integration Services 包的作业步骤类型配置 SQL Server 代理作业时，该作业将调用**dtexec**实用程序。但是，作业调用的 dtexec 实用程序的版本取决于已安装并在 64 位计算机上运行的 SQL Server 和 SQL Server 代理的版本。[[MSDN]](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008-r2/ms141766(v=sql.105)?redirectedfrom=MSDN)

要从64 位版本的 SQL Server 代理以*32 位*模式运行包，请在“新建作业步骤”对话框的“执行选项”选项卡上选择“**使用 32 位运行时”。**

[![在此处输入图像描述](../Images/a50102fdbc57243900b6f0574f861b7e.png)](https://i.stack.imgur.com/XzDHb.png)

# c - Pthread 创建后立即运行线程

> ID：12536649
> 
> 赞同：1
> 
> 时间：2012-09-21T19:02:09.780
> 
> 标签：c, linux, multithreading, pthreads

我有一个使用 pthread 的 C 程序。

我希望新创建的线程在创建后立即运行。

这背后的原因是我的线程有初始化代码来设置信号处理程序，在我的主线程发送一些信号之前，我必须确保处理程序已经准备好。

我试过`pthread_yield`在我之后做`pthread_create`，但没有成功。

我怀疑这会有所不同，但我在 x86_64 上运行 Linux 3.6。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T19:35:29.853

如果您的目标是让主线程在继续前进之前等待所有线程到达同一点，我建议使用[`pthread_barrier_wait`](http://docs.oracle.com/cd/E19963-01/html/821-1601/gfwek.html)：

```
void worker(void*);

int main(int argc, char **argv)
{
    pthread_barrier_t b;
    pthread_t children[TCOUNT];
    int child;

    /* +1 for our main thread */
    pthread_barrier_init(&b, NULL, TCOUNT+1);

    for (child = 0; child < TCOUNT; ++child)
    {
        pthread_create(&children[child], NULL, worker, &b);
    }

    printf("main: children created\n");

    /* everybody who calls barrier_wait will wait 
     * until TCOUNT+1 have called it
     */
    pthread_barrier_wait(&b);

    printf("main: children finished\n");

    /* wait for children to finish */
    for (child = 0; child < TCOUNT; ++child)
    {
        pthread_join(&children[child], NULL);
    }

    /* clean-up */
    pthread_barrier_destroy(&b);

    return 0;
}

void worker(void *_b)
{
    pthread_barrier_t *b = (pthread_barrier_t*)_b;
    printf("child: before\n");
    pthread_barrier_wait(b);
    printf("child: after\n");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T19:32:30.767

或者您可以使用屏障，即调用[pthread_barrier_wait](http://pubs.opengroup.org/onlinepubs/009695299/functions/pthread_barrier_wait.html)（在每个线程的例程早期，或在主线程初始化时），以确保每个相关线程都已到达屏障（之后您的一些线程可以发出您的顽皮信号技巧）。看到[这个问题](https://stackoverflow.com/q/7032728/841108)。

# javascript - 如何使用 DropDownList 值分配 javascript 变量（selection_changed）

> ID：12536655
> 
> 赞同：0
> 
> 时间：2012-09-21T19:02:36.263
> 
> 标签：javascript, asp.net

我有一个`DropDownList`会被多次使用的，所以我有一个`selection_change`属性。现在，我试图让用户在列表中选择一个文件 ID。然后我使用他选择的 id 并运行一个存储过程。我第一次移动文件时它可以工作，但第二次（当他选择另一个文件时）它失败了。我的问题是如何用值重新分配 javascript`selection_change`值？

这是我的功能：

```
function getCaseFiles(canMoveExpenses) {
        //create Popup with content from div
        $('#ddlFiles').dialog({
            autoOpen: true,
            height: 'auto',
            width: 'auto',
            modal: true,
            buttons: {
                "Ok": function () {
                    //                        var newCaseDdl = document.getElementById("ddlCaseFilesNew");
                    //                        var newCaseDdlInt = newCaseDdl.options[newCaseDdl.selectedIndex].value;
                    var newCaseDdl = ddlCaseFilesNew.options[ddlCaseFilesNew.selectedIndex].value;
                    alert("newCaseDdl = " + newCaseDdl);

                    var oldCaseFile = $("#hidCaseFile").val();
                    alert(oldCaseFile);

                    if (newCaseDdl != -1) {
                        moveCasefile(canMoveExpenses, newCaseDdl, oldCaseFile);
                        $(this).dialog('close');
                    }
                    else {
                        showMessage("Error. Please Select a Value From The Lists.");
                    }
                },
                Cancel: function () {
                    newCaseDdl = null;
                    oldCaseDdl = null;
                    $(this).dialog('close');
                }
            }
        });
    } 
```

我的下拉列表 div：

```
<div id="ddlFiles">
    <label>
        Select new CaseFile:</label>
    <asp:DropDownList runat="server" ID="ddlCaseFilesNew" DataSourceID="dsCaseFiles"
        DataTextField="Display" DataValueField="FileID" 
        OnPreRender="ddl_PreRender"  
        Width="300px" />
</div> 
```

下拉列表背后的代码：

```
if (Request.QueryString["ExpenseID"] != null)
    {
        if (!IsPostBack)
        {
            ddlCaseFilesNew.DataSourceID = "dsCaseFiles";
            ddlCaseFilesNew.SelectedIndex = -1;
            ddlCaseFilesNew.DataTextField = "Display";
            ddlCaseFilesNew.DataValueField = "FileID";
            ddlCaseFilesNew.DataBind();
            ddlCaseFilesNew.Attributes.Add("onchange", "getValue();");
        }
    } 
```

# javascript - 在链接的 javascript 函数中将数组作为参数导入

> ID：12536664
> 
> 赞同：0
> 
> 时间：2012-09-21T19:03:40.610
> 
> 标签：javascript, chaining

我知道javascript`call`并且`apply`能够将它们应用于简单的函数，但是在将它们应用于链式方法调用时我完全感到困惑，如下所示：

```
db.collection("posts").find({}, {limit:10, sort:[['views', -1]]}).toArray(function(err, posts) {
   console.log(posts)
}); 
```

是否可以将数组中的参数传递给使用or`[{}, {limit:10, sort:[['views', -1]]} ]`的上述方法？`call``apply`

我想使用它来轻松访问和修改参数，方法是将它们保存在外部数组中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:15:31.837

我认为没有任何方法可以保持链接。您需要存储中间结果。

```
var posts = db.collection("posts");
posts
    .find.apply(posts, argsarray)
    .toArray(function(err, posts) {
        console.log(posts)
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:15:33.807

您可能知道，它们在功能上是相同的：

```
obj.func(1, 2, 3);
obj.func.apply(obj, [1, 2, 3]); 
```

考虑到这一点，您可以执行以下操作：

```
db.collection("posts").find.apply(
  db.collection("posts")
  [ {}, {limit:10, sort:[['views', -1]]} ]
).toArray(...); 
```

当然，这是非常低效的，因为您将调用该集合两次。所以你可以这样做：

```
var collection = db.collection("posts");
collection.find.apply(
  collection
  [ {}, {limit:10, sort:[['views', -1]]} ]
).toArray(...); 
```

# php - 如何使用 PEAR 正确安装 PHPUnit？

> ID：12536668
> 
> 赞同：40
> 
> 时间：2012-09-21T19:04:01.697
> 
> 标签：php, symfony1, phpunit, yaml, pear

我不得不按照[这些](https://stackoverflow.com/questions/9186000/call-to-undefined-method-php-codecoverage-filtergetinstance/9407628#9407628)说明卸载并重新安装较新版本的 PHPUnit 。现在当我启动这条线时

```
sudo pear install --alldeps phpunit/PHPUnit 
```

我看到一条错误消息，看起来像这样。

```
Unknown remote channel: pear.symfony.com
phpunit/PHPUnit requires package "channel://pear.symfony.com/Yaml" (version >= 2.1.0)
No valid packages found 
```

如果我通过启动只安装 Yaml

```
sudo pear install symfony/YAML 
```

将安装不符合 PHPUnit 依赖关系的旧版本 (1.0.6)。我怎么可能解决这个问题？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-09-22T16:41:48.257

我在升级我的 phpunit 时遇到了同样的问题。

这解决了问题：

```
pear channel-discover pear.symfony.com
pear install pear.symfony.com/Yaml 
```

然后运行：

```
pear install --alldeps pear.phpunit.de/PHPUnit 
```

OBS：我认为`pear install pear.symfony.com/Yaml`没有必要。我只是发布它，因为这正是我解决问题的方式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-22T08:59:04.530

使用它，如[PHPUnit 文档中所述](http://www.phpunit.de/manual/current/en/installation.html#installation.pear)：（我不是 sudo 的意思，这是我在 Windows PC 上的操作方式）：

```
pear config-set auto_discover 1
pear install pear.phpunit.de/PHPUnit 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-20T18:23:35.713

我也有这个错误信息：

> 未知远程通道：pear.symfony.com

解决了创建别名：

```
pear channel-alias pear.symfony-project.com pear.symfony.com 
```

进而

```
channel-discover pear.symfony-project.com

sudo pear channel-discover components.ez.no

sudo pear update-channels

sudo pear upgrade-all

sudo pear install --force --alldeps phpunit/PHPUnit 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T19:36:25.330

首先：`locate pear`您可能安装了多个版本，这可能会很痛苦。

在工作中，我们的 Intranet 中有这样的内容：

```
sudo [your pear install] channel-update pear.php.net  
sudo [your pear install] upgrade pear  
sudo [your pear install] channel-discover pear.phpunit.de  
sudo [your pear install] install --alldeps phpunit/PHPUnit 
```

我知道有一种更自动化的安装方式：go-pear ( [http://pear.php.net/manual/en/installation.getting.php](http://pear.php.net/manual/en/installation.getting.php) )

但是，如果您已经安装了其他梨，它将完全破坏一切，您将花费相当长的时间尝试修复它。我认为最大的障碍是能够告诉所有图书馆彼此在哪里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T18:27:22.540

```
sudo pear install -a phpunit
sudo pear channel-discover pear.phpunit.de 
```

我在抱怨“未知的远程频道：pear.symfony.com”时遇到了类似的问题。不得不做（没有 sudo，我收到了关于无法打开某些文件的奇怪错误）

```
sudo pear channel-discover pear.symfony.com 
```

然后

```
sudo pear install phpunit/PHPUnit 
```

现在我可以在我的 /usr/bin 中看到 phpunit

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T06:37:43.687

PutzKipa 提到的过程有效，但是您可能需要超级用户权限。对于 ubuntu，在每个命令之前添加 sudo。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-16T03:04:22.413

在 Plínio César 之后，我终于解决了它，但略有不同：

首先我做了一个“sudo apt-get remove phpunit”来删除错误的安装。然后使用 pear 进行 phpunit 安装：

sudo pear install pear.symfony.com/Yaml

sudo pear channel-discover pear.phpunit.de

sudo pear config-set auto_discover 1

sudo pear install --alldeps pear.phpunit.de/PHPUnit

谢谢普林尼奥塞萨尔！！！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-02T08:50:03.490

在 Ubuntu、Debian、Fedora 或 OpenSUSE 中获取 PHPUnit 的最简单方法是下载一个 PHP 存档 (PHAR)，该文件将 PHPUnit 的所有必需（以及一些可选）依赖项捆绑在一个文件中。

打开终端并输入：

```
wget https://phar.phpunit.de/phpunit.phar  # download the PHP Archive (PHAR) file  
chmod +x phpunit.phar   
sudo mv phpunit.phar /usr/local/bin/phpunit 
```

[https://phar.phpunit.de/](https://phar.phpunit.de/)上有许多不同版本的 phpunit.phar 。如果您使用第一个命令，它将选择并下载最新版本。

注意：`/usr/local/bin/`最后一个命令中的路径对于 Ubuntu、Debian、Fedora 和 OpenSUSE 发行版以及其他具有`/usr/local/bin/`目录的 Linux 发行版都是正确的。

[参考：[什么是/usr/local/bin？在 Applescript 的脚本安装中遇到它，但想了解更多](https://unix.stackexchange.com/questions/4186/what-is-usr-local-bin-came-across-it-in-an-script-installation-for-applescript)]

# asp.net-mvc - 如何在 ASP.NET MVC 中创建一个属性来检查会话变量是否可用？

> ID：12536672
> 
> 赞同：0
> 
> 时间：2012-09-21T19:04:25.447
> 
> 标签：asp.net-mvc, session-variables

我需要在 asp.net 中创建一个自定义控制器属性，以检查是否设置了特定的会话变量。这不是用于身份验证。如果没有设置 var，那么我需要重定向到不同的视图。

```
public class CheckPatientSetAttribute : Attribute
{
    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
        throw new NotImplementedException();
    }

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.HttpContext.Session["Patient"] == null)
        {
            filterContext.HttpContext.Response.Redirect("/");
        }
    }
} 
```

在这种情况下应该使用属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:10:39.737

我认为在这种情况下使用属性是一种矫枉过正的做法。它会起作用，不要误会我的意思，它只是不是真正的装饰，也不是某些模型的某些属性的属性，而是属于业务逻辑层的业务逻辑。如果这部分重复了几次，则将其外部化为单独的方法或类，基于实用性和便于他人理解。我认为`Attribute`这并不容易理解，但实际上比有用更具误导性。恕我直言。

像往常一样，您的问题没有正确的答案，所有这些都基于实用性、可用性和以后易于理解（维护）。

# sql-server - 从多个表中填充 DataGridView

> ID：12536676
> 
> 赞同：0
> 
> 时间：2012-09-21T19:04:33.620
> 
> 标签：sql-server, datagridview

我想从主表和 suntables 中填充 datagridview！[在此处输入图像描述][1]

我的代码：

```
SqlConnection conn = new SqlConnection(@"Data Source=SHARKAWY;Initial Catalog=Booking;Persist Security Info=True;User ID=sa;Password=123456");
conn.Open();

txtDate.Text = DateTime.Now.ToShortDateString();

DataSet Booking_ds = new DataSet();
DataSet Trip_ds = new DataSet();
DataSet Fleet_ds = new DataSet();
DataSet Partner_ds = new DataSet();
DataSet Guide_ds = new DataSet();

SqlDataAdapter Booking_da;

string Bookingsql = "SELECT dbo.Booking.BookingID, dbo.TripTypes.TripName, dbo.Partners.PartnerName, dbo.Booking.DelegateName, dbo.Fleets.FleetName, dbo.Guides.GuideName, dbo.Booking.AdultNum, dbo.Booking.AdultPrice, dbo.Booking.BookingDate, dbo.Booking.ChildNum, dbo.Booking.ChildPrice, dbo.UserInfo.UserName, dbo.Booking.TripID, dbo.Booking.PartnerID"
                  +"FROM  dbo.Booking INNER JOIN"
                  +"dbo.Partners ON dbo.Booking.PartnerID = dbo.Partners.PartnerID INNER JOIN"
                  +"dbo.TripTypes ON dbo.Booking.TripID = dbo.TripTypes.TripID INNER JOIN"
                  +"dbo.Fleets ON dbo.Booking.FleetID = dbo.Fleets.FleetID INNER JOIN"
                  + "dbo.Guides ON dbo.Booking.GuideName = dbo.Guides.GuideID INNER JOIN"
                  +"dbo.UserInfo ON dbo.Booking.UserName = dbo.UserInfo.UserID BookingDate = '"+txtDate.Text+"'";

Booking_da = new SqlDataAdapter(Bookingsql, conn);
Booking_da.Fill(Booking_ds, "Booking");

DGViewBooking.DataSource = Booking_ds.Tables["Booking"];

conn.Close(); 
```

我找不到错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:28:08.910

一个问题是，在您的字符串连接中，您不包括空格。

```
dbo.Booking.PartnerID"                   +"FROM  dbo.Booking INNER JOIN" 
```

会导致`"dbo.Booking.PartnerIDFROM dbo.Booking INNER JOIN"`

注意 FROM 之前没有空格。在下文中，我在 .PartnerID 中的 D 之后放置了一个空格。无论您在示例中使用“+”连接两个字符串的任何位置，都需要执行此操作。

```
dbo.Booking.PartnerID "                   +"FROM  dbo.Booking INNER JOIN" 
```

在这些情况下，输出您的 sql 字符串变量的值并将其粘贴到查询窗口中通常是一个很好的理想选择。一旦您运行 SQL，您可以将更改传输回您的代码。并且绝对 SQL 参数是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T20:06:45.930

除了@PatFromCanada 的回答，您还忘记了`WHERE`关键字。考虑使用别名，它将使您的代码更短且更易于调试。

```
string Bookingsql = "SELECT b.BookingID, t.TripName, p.PartnerName, b.DelegateName, 
f.FleetName, g.GuideName, b.AdultNum, b.AdultPrice, b.BookingDate, 
    b.ChildNum, b.ChildPrice, u.UserName, b.TripID, b.PartnerID"
                      + " FROM  Booking b INNER JOIN"
                      + " Partners p ON b.PartnerID = p.PartnerID INNER JOIN"
                      + " TripTypes t ON b.TripID = t.TripID INNER JOIN"
                      + " Fleets f ON b.FleetID = f.FleetID INNER JOIN"
                      + " Guides g ON b.GuideName = g.GuideID INNER JOIN"
                      + " UserInfo u ON b.UserName = u.UserID 
                      + " WHERE BookingDate = '" + txtDate.TEXT+ "'"; 
```

# javascript - 选择某种类型的最近元素 - JQuery

> ID：12536678
> 
> 赞同：0
> 
> 时间：2012-09-21T19:04:42.140
> 
> 标签：javascript, jquery, html, dom

我想用一些选择器选择一个元素，并选择最接近`<p>`它的元素（注意 p 不与前一个元素嵌套）。我该怎么做？我试过`closest()`了，但这只有在元素嵌套时才有效。

编辑：最接近的定义：

```
<a id="myelement"></a>
<p id="1"></p>
<p id="2"></p> 
```

在这种情况下，`p#1`将被选中，假设`#myelement`是有问题的元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:15:23.227

鉴于您的 HTML 是：

```
<a id="myelement"></a>
<p id="1"></p>
<p id="2"></p> 
```

[**最接近（）**](http://api.jquery.com/closest/)不起作用的原因是：

> 获取与选择器匹配的第一个元素，从当前元素开始，**向上**遍历 DOM 树。

如果 'p' 标记始终是下一个元素，则使用[**next()代替：**](http://api.jquery.com/next/)

```
$('#myelement').next(); 
```

但是，如果您最终可以在第一个标签`a`和第一个`p`标签之间添加任何其他元素，那么获得它的一种方法是使用[**nextAll()**](http://api.jquery.com/nextall/)

```
$('#myelement').nextAll('p').eq(0); 
```

还有许多其他方法可以`<p>`为您获取该元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:24:18.143

您可以使用其中一个[`.siblings()`](http://api.jquery.com/siblings/)或[`.next()`](http://api.jquery.com/next/)在您的情况下使用，但我相信`.next`如果您的数据始终采用您发布的形式，那将是更好的选择。

这是一个例子：

**HTML**

```
<a id="myelement">a</a>
<p id="1">1</p>
<p id="2">2</p> 
```

**jQuery**

```
$("#myelement").click(function(){
    console.log($(this).next("p").attr("id"));
    console.log($(this).siblings("p")[0].id);
});​ 
```

您将看到上述控制台日志报告和`1`.

**[例子](http://jsfiddle.net/tupdE/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T19:31:10.633

[http://jsfiddle.net/gpinto/PTFgG/1/](http://jsfiddle.net/gpinto/PTFgG/1/)

```
function findFirstParagraph() {

   var siblings = $('#myElement').siblings();

    siblings.each(function(index) {
        if ( $(this).attr('id') == 1) {
            $(this).css('background-color', 'red');
        }
    });

}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T19:09:32.573

try using `next()` [http://api.jquery.com/next/](http://api.jquery.com/next/)

as per the latest OP edit: jsfiddle.net/KXPwx/9

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T19:10:29.090

You tried .next() or .prev().. Maybe use .eq(0)??

You can also use .parent() or .parents('.selector')

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T22:40:16.080

尝试`.find()`

有许多功能可以做类似的事情，但对我来说，使用类似的东西`$(this).find( 'selector here' )`或创造`$(' id or class selector here').find('id/class here')`奇迹大声笑。

祝你好运

# linux - UTC/GMT：获取偏移量

> ID：12536680
> 
> 赞同：0
> 
> 时间：2012-09-21T19:04:50.063
> 
> 标签：linux, windows, cmd

我目前在美国东部时间。在我的 Windows 机器上，运行此命令

```
systeminfo | find "Time Zone" 
```

产生“时区：（UTC-05:00）东部时间（美国和加拿大）”

因此，我们似乎比 UTC/GMT 晚了 5 个小时。

但在 Linux 中我运行：

```
date +%z 
```

我得到：“-0400”

在 Linux 中，当我运行 date 命令时，我得到：“Fri Sep 21 15:00:45 EDT 2012”

所以我不确定我们是比 UTC/GMT 晚 4 小时还是 5 小时。我发现这个问题是因为我使用 Firefox 和 IE 打开了一个 Atom 提要。

Feed 上的“更新”日期为“2011-11-09T15:28:23Z”，即 UTC 时间。

IE 在浏览器中显示本地时间为：“11:28:23 AM”，而 Firefox 显示“10:28 AM”。谁能解释这种差异？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T16:39:06.733

Windows 和 Linux 是否都同意时间？如果不是，哪一个与您的（非计算机）时钟一致？

您的链接表明您住在纽约市，即 GMT -5（格林威治时间 - 5 小时），您所在的地区使用夏令时 (DST)（+1 小时）。这使您处于 EDT 或东部夏令时间。

您可以在 Windows 7 中进行设置：

**左键单击**屏幕右下角的时钟
单击 ==>“**更改日期和时间设置...** ” [（来源：][[mediafire.com](http://www.mediafire.com/conv/c3bd60bd1d38365337467f4acd8910503a47cd7accde79665d24bce65c7e037f6g.jpg)][）]
[![日历：](../Images/73ba3d817e9016896dcd0c71b351b443.png)](https://i.stack.imgur.com/8mJPU.png)

单击 ==>“**更改时区...** ” [（来源：][[mediafire.com](http://www.mediafire.com/conv/5f51d709fff7b1bbc503482653aef56f89e29dff6523c837cfbf77f732b419016g.jpg)][）]
[![时间和日期](../Images/f089e9cd39cc768acd8724bbce3ffc26.png)](https://i.stack.imgur.com/ewVsH.png)

==> 选择“ **（UTC -5:00）东部时间（美国和加拿大）** ”
==> 勾选“**自动调整夏令时时钟**” [（来源：][[mediafire.com](http://www.mediafire.com/conv/8c90c2525dfe390f788c9f7fc21f2be99e5d4859c6121e422a8a1cc8e2697d0f6g.jpg)][）]
[![时区](../Images/619e0b8b41ba1a9ca53e9e34ef7da010.png)](https://i.stack.imgur.com/qCS0Q.png)

单击 ==>**确定**==>**确定**

请记住，这`systeminfo`不会显示您的**DST**设置。我不知道从命令提示符检查或设置它的方法。

我不知道为什么 Firefox 和 IE 会显示不同的时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-23T19:58:52.307

不同之处在于 Linux date 命令将包括夏令时，具体取决于您运行命令的一年中的时间，而在 Windows 上，它会打印没有 DST 的偏移量。

# java - Java中HashMap中键的多个值

> ID：12536683
> 
> 赞同：2
> 
> 时间：2012-09-21T19:04:53.223
> 
> 标签：java, hashmap

是否可以保留与 HashMap 中的键对应的多个值？如果是，如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T19:13:05.913

是的，这称为链接。您将希望尽可能避免链接，尤其是当链的大小开始增加时。更长的链大小将违背使用散列结构的全部目的，因为目标是尽可能接近 O(1)。

```
Map<String, List<String>> hm = new HashMap<String, List<String>>();
List<String> values = new ArrayList<String>();
values.add("Value 1");
values.add("Value 2");
hm.put("Key1", values); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-21T19:14:40.563

您可以在[Guava 库](http://github.com/google/guava/)（以前的 Google 收藏）中试一试。它具有 Multimaps 的实现，可以为单个键存储多个值。

例如[ListMultimap](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/ListMultimap)实现允许以插入顺序保存的重复键/值对。

下面是你如何使用它：

```
ListMultimap<String, Integer> numberClasses = ArrayListMultimap.create();
numberClasses.put("odd", 1);
numberClasses.put("odd", 3);
numberClasses.put("odd", 5);

numberClasses.put("even", 2);
numberClasses.put("even", 4);
numberClasses.put("even", 6);

assertEquals(Arrays.asList(1,3,5), numberClasses.get("odd"));
assertEquals(Arrays.asList(2,4,6), numberClasses.get("even")); 
```

另一个很酷的例子是[SetMultimap](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/SetMultimap)，它与 ListMultimap 非常相似，只是键的值保存在一个集合中。（从用户的角度来看，我不知道它是如何实现的。）

```
SetMultimap<String, Integer> setMultimap= HashMultimap.create();
setMultimap.put("key1", 1);
setMultimap.put("key1", 1);
setMultimap.put("key1", 1);
setMultimap.put("key1", 2);

setMultimap.put("key2", 1);
setMultimap.put("key2", 3);

assertEquals(ImmutableSet.of(1,2), setMultimap.get("key1"));
assertEquals(ImmutableSet.of(1,3), setMultimap.get("key2")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T19:06:51.460

使用`Map<String, List<String>>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T19:07:11.653

严格来说，没有。

但！您可以将某种值作为您的值，`Collection`并使用它来存储任意数量的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T19:08:56.297

是的，但前提是存储在您的值类型`Map`是数组或列表：

`Map<String, List<String>> myMap`

或者

`Map<String, String[]> myMap`

但是在通用数据结构中构建通用数据结构通常是不好的做法。

为什么不编写一个特定于域的类来包装`HashMap`，并使您更容易检查值的存在、每个键的项目数等？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-20T20:33:34.427

在不使用任何其他库的情况下，以 Key 作为 String 和 value 作为 HashSet 的值创建一个映射，将不会重复字符串。

```
 multivaleMap.computeIfAbsent("key", k -> new HashSet<String>()).add("value1");
multivaleMap.computeIfAbsent("key", k -> new HashSet<String>()).add("value2");

System.out.println(multivaleMap);``` will print {key=[value2, value1]} 
```

# ios - 与 iPhone 5 兼容的通用应用的 UIElements 放置

> ID：12536684
> 
> 赞同：0
> 
> 时间：2012-09-21T19:04:56.617
> 
> 标签：ios, ios6, iphone-5, uielement

我的 UIView 上有很多 UiImageViews，我根据 Ipad 或 iPhone 坐标以不同的方式创建/放置它们。这是我当前为这些 UIImageViews 创建框架的逻辑

```
- (void)setAnimationFrame:(NSString *)imageName iPadFrameX:(int)iPadX iPadFrameY:(int)iPadY iPhoneFrameX:(int)iPhoneX iPhoneFrameY:(int)iPhoneY imageSizePercentForiPad:(CGFloat)imageSizePercentForiPad imageSizePercentForiPhone:(CGFloat)imageSizePercentForiPhone  animationNumber:(int)animationNumber imageAnimationView:(UIImageView *)imageAnimationView{

    int tagNumber;
    tagNumber = [self getTagNumber:animationNumber];
    UIImage *image = [UIImage imageNamed:imageName];
    CGRect frame;
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        frame = CGRectMake(iPadX, iPadY, image.size.width*imageSizePercentForiPad, image.size.height*imageSizePercentForiPad);
    }
    else
    {
        frame = CGRectMake(iPhoneX, iPhoneY, image.size.width*imageSizePercentForiPhone, image.size.height*imageSizePercentForiPhone);
    }

    imageAnimationView.frame = frame;
    imageAnimationView.image = image;
    imageAnimationView.tag = tagNumber;

} 
```

我通过我的应用程序将一组图像传递给 UIImageView.animationImages 来制作很多 UIImageView 动画。现在，在兼容 iPhone 5 的情况下处理此类情况的最佳方法是什么？

我是否在内部添加了一个其他条件`if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)`来通过计算其坐标来处理 iPhone 5，或者有更好的方法。我将非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:01:57.980

您在这里有 2 个选项：

**选项1：**

在 else 语句中为 iPhone 5 添加条件语句

```
else {
    if ([[UIScreen mainScreen] bounds].size.height == 568) {
        // set the frame specific for iPhone 5
    } else {
        frame = CGRectMake(iPhoneX, iPhoneY, image.size.width*imageSizePercentForiPhone, image.size.height*imageSizePercentForiPhone);
    }
} 
```

**选项 2：**

使用自动布局。您可以在此处开始使用自动布局：http:
[//www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)
[http://www.raywenderlich.com/20897/beginning-auto -layout-part-2-of-2](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)

# java - class.getResource 定义

> ID：12536687
> 
> 赞同：0
> 
> 时间：2012-09-21T19:05:02.310
> 
> 标签：java

我在我的 splash java 类上使用 getResources()，如下所示：

```
splashImage = 
   (new ImageIcon(Splash.class.getResource("/resources/splash.png"))).getImage(); 
```

查看 docs.oracle 上的 API，我发现 getResources 返回的是一个 URL。为什么我需要它，它究竟返回了什么？

# xcode - xcode 4.5 如何在启动时选择故事板

> ID：12536689
> 
> 赞同：42
> 
> 时间：2012-09-21T19:05:05.163
> 
> 标签：xcode, storyboard, uistoryboard, xcode4.5

试图让我的应用程序同时适用于 iPhone 5 和 iPhone 4/4s。我尝试了“自动布局”，但似乎不适用于我的应用程序，还读到它在 iOS 5 中不受支持。自动布局在具有 UIScrollview 和在代码中调整大小的 UIPicker 的视图控制器上特别失败。拥有两个故事板一个 4 英寸和一个 3.5 英寸似乎是要走的路。

两个 Storyboard aproch 似乎是我的解决方案。所以这给我留下了两个问题；

1.  如果是 4/4s/5，那么代码应该在哪里检测？我会假设在didFinishLaunchingWithOptions 方法中的appDelegate.m

2.  如何更改“主情节提要”？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-21T19:43:35.413

***这是一个很好的问题。***

你需要做的是，

1.  选择您当前的 4/4 故事板，转到文件，复制，然后给它一个 iPhone 5 特定的名称。 **确保选中 Target 和您的应用名称。**

2.  接下来，您必须在情节提要中选择场景，并在 Attributes Inspector 中将大小更改为 Retina 4 Full Screen。这使您可以重新排列此显示的所有内容。

3.  最后在应用程序 didFinishLaunchingWithOptions 中粘贴以下代码以及您为 4 英寸故事板提供的故事板名称。

    ```
    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
        UIStoryboard *storyBoard;

        CGSize result = [[UIScreen mainScreen] bounds].size;
        CGFloat scale = [UIScreen mainScreen].scale;
        result = CGSizeMake(result.width * scale, result.height * scale);

        if(result.height == 1136){
            storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone_5" bundle:nil];
            UIViewController *initViewController = [storyBoard instantiateInitialViewController];
            [self.window setRootViewController:initViewController];
        }
    }

    return YES;
    } 
    ```

* * *

**如果有人不知道如何执行第 1 步，请执行以下操作。**

1.  转到项目目录并复制粘贴`MainStoryboard.storyboard`并将新故事板重命名为`MainStoryboard5.storyboard`.

2.  通过右键单击 Project 并单击在项目中添加这个新的故事板`MainStoryboard5.storyboard`（在 Xcode 中）`Add Files to ....`

3.  现在我们在 xcode 中有两个故事板。

**小费**

完成上述所有操作后，您可能必须使用“产品 > 清洁”才能正常工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T19:35:00.983

目前唯一的方法是检查你是否使用 iPhone 5 是`[UIScreen mainScreen] bounds]`和`[[UIScreen mainScreen] scale]`.

```
BOOL isIphone5 = (([[UIDevice currentDevice] userInterfaceIdiom] 
== UIUserInterfaceIdiomPhone) && (([UIScreen mainScreen].bounds.size.height * 
[[UIScreen mainScreen] scale]) >= 1136)); 
```

这仅在您至少向`Default-568h@2x.png`应用程序中添加了启动图像时才有效。否则，这将始终返回 false。（因为如果您没有启动图像，屏幕将被黑框化）

要将情节提要设置为您的 iPhone 5 版本，您可能想看看[这个问题](https://stackoverflow.com/questions/7889510/ios-5-storyboard-programmatically-determine-path)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T17:23:28.170

我从 fields.cage 答案中汲取灵感并将其改编为我的代码，效果很好。谢谢 ！！

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
        UIStoryboard *storyBoard;

        CGSize result = [[UIScreen mainScreen] bounds].size;
        CGFloat scale = [UIScreen mainScreen].scale;
        result = CGSizeMake(result.width * scale, result.height * scale);

        if(result.height == 1136){

             self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone5" bundle:nil] autorelease];

        }
        else
        {
             self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T19:04:42.450

我最近一直在做的是在我需要检查设备的任何类中添加一个定义语句。这也可以在任何全局头文件中完成。

```
#define IS_IPHONE (!IS_IPAD)
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPhone) 
```

布尔测试来自[Detect iphone 5 4" screen](https://stackoverflow.com/questions/12535471/detect-iphone-5-4-screen)。

```
bool isiPhone5 = CGSizeEqualToSize([[UIScreen mainScreen] preferredMode].size,CGSizeMake(640, 1136));
if (isiPhone5) {
        // Setup For iPhone 5 Screen Size
    UIStoryboard *storyBoard;

    storyBoard = [UIStoryboard storyboardWithName:@"MyiPhone5StoryboardName" bundle:nil];
    UIViewController *initViewController = [storyBoard instantiateInitialViewController];
    [self.window setRootViewController:initViewController];
} 
```

**如果您已经在使用 storyboards**并且只想从您的项目开始时为 iPhone 5 设备使用的默认值更改故事板，这将非常有效。如果您从头开始使用现有的非故事板项目，您可以这样做。

```
#define IS_IPHONE (!IS_IPAD)
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPhone)

bool isiPhone5 = CGSizeEqualToSize([[UIScreen mainScreen] preferredMode].size,CGSizeMake(640, 1136));
if (isiPhone5) {
        // Load iPhone 5 Storyboard
    UIStoryboard *storyBoard;

    storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone5" bundle:nil];
    UIViewController *initViewController = [storyBoard instantiateInitialViewController];
    [self.window setRootViewController:initViewController]; 
}

else if (IS_IPAD) {
        // Load IPAD StoryBoard
    UIStoryboard *storyBoard;

    storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
    UIViewController *initViewController = [storyBoard instantiateInitialViewController];
    [self.window setRootViewController:initViewController]; 
}

else {
        // Load the iPhone 3.5" storyboard
    UIStoryboard *storyBoard;

    storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    UIViewController *initViewController = [storyBoard instantiateInitialViewController];
    [self.window setRootViewController:initViewController]; 
} 
```

当我现在开始一个项目时，我在故事板中设计 iPhone 3.5" 版本（如果我正在使用故事板），然后当我完成该设计时，我进入我的项目文件并找到故事板文件。因为故事板文件只是一个XML 布局文件，我可以将该文件加载到我最喜欢的文本编辑器中并更改两个标签。

将 iPhone 转换为 iPad

1.  在文件顶部找到 **`targetRuntime="iOS.CocoaTouch`“**
2.  改成 **`targetRuntime="iOS.CocoaTouch.iPad"`**
3.  在文件底部添加您可能会发现这个 **`<simulatedScreenMetrics key="destination" type="retina4"/>`**
4.  将此更改为`<simulatedScreenMetrics key="destination"/>`

**最后一项只有在您的主情节提要文件设置为 4" iPhone 屏幕时才会出现。**

这里重要的是，如果您只将 iPhone 5 添加到现有项目中，您只需要第一次检查以覆盖默认值，并加载您的特殊故事板文件。这实际上使我不必在 iPhone 5 的代码中手动布局所有对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T16:29:15.673

第一个工作非常好，简单明了，但如果你想集成多个设备，请看这里：

1.  使用名为 iPhone5_Storyboard 的 Storyboard 为 iPhone5 创建一个项目。

2.  关闭应用程序并在文件夹中克隆名为 iPhone5_Storyboard 的 Main Story 并重命名为 iPhone4_Storyboard 不要忘记更改大小并重新排序 xcode 界面构建器中的所有对象。

3.  如果您想要通用版本，则可选，在 xcode 内部使用 Add File 并为 iPad 添加新的 Storyboard EMPTY 目标，打开 iphone5_storyboard 使用 CMD+A 并复制所有内容并粘贴到 iPad 的 Empty Story 中（需要重新排序对象，但全部链接和工作）。

4.  在 Xcode 中，在 TARGET 下设置 Universal App 并在 MainStoryboard 下设置 iPhone5_Storyboard，在 iPad Main Story 下设置 iPad_Storyboard。

5.  现在**感谢这篇文章的第一个答案，我们必须在****AppDelegate.m**中使用此代码实现所有不同的故事：

`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {`

 ````
 if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
        UIStoryboard *storyBoard;

        CGSize result = [[UIScreen mainScreen] bounds].size;
        CGFloat scale = [UIScreen mainScreen].scale;
        result = CGSizeMake(result.width *scale, result.height *scale);

//----------------HERE WE SETUP FOR IPHONE4/4s/iPod----------------------

        if(result.height == 960){
            storyBoard = [UIStoryboard storyboardWithName:@"iPhone4_Storyboard" bundle:nil];
            UIViewController *initViewController = [storyBoard instantiateInitialViewController];
            [self.window setRootViewController:initViewController];
        }

//----------------HERE WE SETUP FOR IPHONE3/3s/iPod----------------------

        if(result.height == 480){
            storyBoard = [UIStoryboard storyboardWithName:@"iPhone4_Storyboard" bundle:nil];
            UIViewController *initViewController = [storyBoard instantiateInitialViewController];
            [self.window setRootViewController:initViewController];
        }
    }

        return YES;
 } 
````  `**就是这样，我们有一个适用于 iPhone 3/3Gs/4/4s/5 iPod (AllGen) iPad 1/2/3/4 Mini 和 Retina 的通用应用程序**

多谢你们`

# asp.net - 将数据显示到 EXTJS 网格面板中

> ID：12536694
> 
> 赞同：0
> 
> 时间：2012-09-21T19:05:32.170
> 
> 标签：asp.net, sql, json, gridview, extjs

我正在尝试制作一个gridview，并且我能够使用硬编码数据成功地做到这一点。

```
var store = Ext.create('Ext.data.Store', {
        storeId: 'myData',
        //url: 'GridViewController',
        fields: [
            { name: 'Q1', type: 'int' },
            { name: 'Q2', type: 'int' },
            { name: 'Q3', type: 'int' },
            { name: 'Q4', type: 'int' },
            { name: 'Q5', type: 'int' },
            { name: 'Improvements', type: 'string' },
            { name: 'Comments', type: 'string'}],
        data: { 'items': [
        { "Q1": "1", "Q2": "2", "Q3": "4", "Q4": "4", "Q5": "5", "Improvements": "Wut Is Up", "Comments": "Nothing" },
        { "Q1": "1", "Q2": "1", "Q3": "3", "Q4": "4", "Q5": "5", "Improvements": "Wut Is Up1", "Comments": "Nothing13"}]
        },
        proxy: {
            type: 'memory',
            //url: 'GridViewController'
            reader: {
                type: 'json',
                root: 'items'
            }
        }
    });

    //store.load();   
    this.grid = Ext.create('Ext.grid.Panel', {
        title: 'GridView App',
        store: Ext.data.StoreManager.lookup('myData'),
        columns: [
        //{ id: 'id', header: 'ID', width: 30,
        //    sortable: true, dataIndex: 'id'
        //},
        {header: 'Q1', width: 100, sortable: true, dataIndex: 'Q1' },
        { header: 'Q2', width: 100, sortable: true, dataIndex: 'Q2' },
        { header: 'Q3', width: 100, sortable: true, dataIndex: 'Q3' },
        { header: 'Q4', width: 100, sortable: true, dataIndex: 'Q4' },
        { header: 'Improvements', width: 200, sortable: true, dataIndex: 'Improvements' },
        { header: 'Comments', width: 200, sortable: true, dataIndex: 'Comments' }
    ],
        stripeRows: true,
        //height:250,
        width: 800,
        renderTo: Ext.getBody()
    }); 
```

这很好用......但现在我想从 sql db 获取数据并使用 URL......比如 url:GridViewController （就像在代码中一样）......这是我的控制器

```
public void GridViewController()
    {

        Response.Write("Survey Completed!");
        SqlConnection conn = DBTools.GetDBConnection("ApplicationServices2");
        string sqlquery = "Select Q1, Q2, Q3, Q4, Improvements, Comments FROM MyTable";
        SqlCommand cmd = new SqlCommand(sqlquery, conn);

        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read())
                //json.Add(reader.GetInt32(0), reader.GetString(1));
            reader.Close();
        }

        //cmd.Connection = conn;
        conn.Open();
        //cmd.ExecuteNonQuery();
        conn.Close();

    } 
```

我不知道如何实现这一点。请帮忙。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T06:46:34.260

```
window.App.myData = Ext.create("Ext.data.Store", {
    "model": Ext.define(Ext.id(), {
        extend: "Ext.data.Model",
        "fields": [{ name: 'Q1', type: 'int' },
        { name: 'Q2', type: 'int' },
        { name: 'Q3', type: 'int' },
        { name: 'Q4', type: 'int' },
        { name: 'Q5', type: 'int' },
        { name: 'Improvements', type: 'string' },
        { name: 'Comments', type: 'string'}
        ]
    }),
    "storeId": "myData ",
    "useIdConfirmation": true,
    "autoLoad": true,
    "proxy": {
        "type": "ajax",
        "reader": {
            "type": "json",
            "idProperty": "Q1",
            "root": "data",
            "totalProperty": "total"
        },
        "url": "/<here you have to give controller>/<here you have to give method where u get the data>"
    }
}); 
```

//现在像这样创建你的网格

```
Ext.create("Ext.grid.Panel", {
    "id": "grid1",
    "border": false,
    "cls": "x-grid-custom",
    "renderTo": Ext.getBody(),
    "width": 218,
    "bodyStyle": "padding:0 0 0 0;",
    "header": false,
    "columns": {
        "id": "ColumnModel5",
        "items": [{
            "id": "Q1",
            "header": "Q1 data",
            "width": 130,
            "dataIndex": "Q1",
            "hideable": false,
            "sortable": true,
            "wrap": true
        }, {
            "id": "Q2",
            "header": "Q2 data",
            "width": 130,
            "dataIndex": "Q2",
            "hideable": false,
            "sortable": true,
            "wrap": true
        },{
            "id": "Q3",
            "header": "Q3 data",
            "width": 130,
            "dataIndex": "Q3",
            "hideable": false,
            "sortable": true,
            "wrap": true
        },{
            "id": "Q4",
            "header": "Q4 data",
            "width": 130,
            "dataIndex": "Q4",
            "hideable": false,
            "sortable": true,
            "wrap": true
        }
         .
         .
         . //do the same thing for other columns
        ]
    },
    "enableColumnMove": false,
    "enableColumnResize": false,        
    "store": "myData"
}); 
```

# javascript - 冲突的 JavaScript 函数？

> ID：12536696
> 
> 赞同：0
> 
> 时间：2012-09-21T19:05:47.317
> 
> 标签：javascript, jquery

我有一个 javascript 函数，它会在选择标签时从选择标签中删除一个选项。

现在的问题是我有 2 个使用这些功能中的 2 个的选择标签，现在有时选择标签可能包含相同的数据，因此当在第一个标签上选择它时，它也会从第二个标签中删除。

代码是：

```
function connect()
{
    $("option").show();
    $(".selectbox").each(function(i) { 
        var obj = $("option[value='" + $(this).val() + "']");
        if($(this).val() != "") obj.hide();     
    }); 
}
function to()
{
    $("option").show();
    $(".selectboxes").each(function(j) { 
        var objs = $("option[value='" + $(this).val() + "']");      
        if($(this).val() != "") objs.hide();        
    }); 
} 
```

选择部分：

```
for($z=0;$z<$rows_updatedrow;$z++)
{
?>
<select id = "sc" name = "connect_array[]" class="input-select selectbox" onchange = "connect()">
<option value = "">--Select--</option>
<?php
for($zz=0;$zz<$rows_getconnect;$zz++)
{
    $data_getconnect = mysql_fetch_assoc($query_getconnect);
    $field_name_getconnect[] = $data_getconnect['field_name'];
    $field_display_getconnect[] = $data_getconnect['field_display'];
    $field_type_getconnect[] = $data_getconnect['field_type'];
    if((($field_name_getconnect[$zz] == "friends_name" && $connect == 2) || $field_type_getconnect[$zz] == "email") && $z == 0){
    $selected = "selected=selected";
    }else{
    $selected = "";
    }
?>
<option value = "<?php echo $field_name_getconnect[$zz]; ?>" <?php echo $selected; ?>><?php echo $field_display_getconnect[$zz]; ?></option>
<?php
}
?>
</select>
 connect to 
<br/>
<?php
}
?>
</div>
<div class = "right">
<?php
for($a=0;$a<$rows_updatedrow;$a++)
{
?> 
<select name = "to_array[]" class="input-select selectboxes" onchange = "to()">
<option class = "option" value = "">--Select--</option>
<?php
for($aa=0;$aa<$rows_getto;$aa++)
{
    $data_getto = mysql_fetch_assoc($query_getto);
    $field_name_getto[] = $data_getto['field_name'];
    $field_display_getto[] = $data_getto['field_display'];
    $field_type_getto[] = $data_getto['field_type'];
    if((($field_name_getto[$aa] == "friends_name" && $to == 2) || $field_type_getto[$aa] == "email") && $a == 0){
    $selected = "selected=selected";
    }else{
    $selected = "";
    }
?>
<option class = "option" value = "<?php echo $field_name_getto[$aa]; ?>" <?php echo $selected; ?>><?php echo $field_display_getto[$aa]; ?></option>
<?php
} 
```

尝试为两个选择标签使用不同的类，但仍然没有帮助。

选择标签的选项是动态创建的，因此有时它们都包含相似的数据。这是无法避免的。

无论如何我可以解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:31:02.873

当这个函数被调用`onChange`时，`this`是`select`哪个发生了变化。然后，您可以使用`find`来获取该选择中的元素。

```
function connect()
{
    var $this = $(this);

    $this.find("option").show();

    if($this.val() != ""){ 
        $this.find("option[value='" + $this.val() + "']").hide();
    }    
} 
```

# php - 防止在php表单提交上刷新页面？

> ID：12536699
> 
> 赞同：0
> 
> 时间：2012-09-21T19:06:05.070
> 
> 标签：php, javascript, forms, refresh, submit

我有一个页面 (http://qccr.dyndns.org:82/on-air-schedule)，访问者可以在其中单击一周中的某一天并显示我们的广播电台当天的时间表。唯一的问题是发生这种情况时页面会完全刷新；如果只更改页面中心的时间表，而不是整个页面，那就更好了。我对javascript不太了解...有没有简单的方法可以做到这一点？

相关的代码在这里（我认为）：

```
 <?php

    <div class="date-input-form">
        <form action="" method="post" id="ddateform" >
            <input type="hidden" name="ddate" id="ddate" size="11" maxlength="10" value="" />
            <?php echo JHTML::_( 'form.token' ); ?>
        </form>
    </div>

    <div id="navcontainer">

    <ul id="navlist">
    <?php if($currentday=="Monday") : ; ?>
    <li class="currentday"><?php echo $currentday; ?></li>
    <?php else : ?>
    <li><a href="#" onclick="document.getElementById('ddate').value = '<?php echo date('Y-m-d', strtotime('monday')); ?>'; document.getElementById('ddateform').submit();">Monday</a></li>
    <?php endif; ?>

    <?php if($currentday=="Tuesday") : ; ?>
    <li class="currentday"><?php echo $currentday; ?></li>
    <?php else : ?>
    <li><a href="#" onclick="document.getElementById('ddate').value = '<?php echo date('Y-m-d', strtotime('tuesday')); ?>'; document.getElementById('ddateform').submit();">Tuesday</a></li>
    <?php endif; ?>

    <?php if($currentday=="Wednesday") : ; ?>
    <li class="currentday"><?php echo $currentday; ?></li>
    <?php else : ?>
    <li><a href="#" onclick="document.getElementById('ddate').value = '<?php echo date('Y-m-d', strtotime('wednesday')); ?>'; document.getElementById('ddateform').submit();">Wednesday</a></li>
    <?php endif; ?>

    <?php if($currentday=="Thursday") : ; ?>
    <li class="currentday"><?php echo $currentday; ?></li>
    <?php else : ?>
    <li><a href="#" onclick="document.getElementById('ddate').value = '<?php echo date('Y-m-d', strtotime('thursday')); ?>'; document.getElementById('ddateform').submit();">Thursday</a></li>
    <?php endif; ?>

    <?php if($currentday=="Friday") : ; ?>
    <li class="currentday"><?php echo $currentday; ?></li>
    <?php else : ?>
    <li><a href="#" onclick="document.getElementById('ddate').value = '<?php echo date('Y-m-d', strtotime('friday')); ?>'; document.getElementById('ddateform').submit();">Friday</a></li>
    <?php endif; ?>

    <?php if($currentday=="Saturday") : ; ?>
    <li class="currentday"><?php echo $currentday; ?></li>
    <?php else : ?>
    <li><a href="#" onclick="document.getElementById('ddate').value = '<?php echo date('Y-m-d', strtotime('saturday')); ?>'; document.getElementById('ddateform').submit();">Saturday</a></li>
    <?php endif; ?>

    <?php if($currentday=="Sunday") : ; ?>
    <li class="currentday"><?php echo $currentday; ?></li>
    <?php else : ?>
    <li><a href="#" onclick="document.getElementById('ddate').value = '<?php echo date('Y-m-d', strtotime('sunday')); ?>'; document.getElementById('ddateform').submit();">Sunday</a></li>
    <?php endif; ?>

    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:30:11.460

我对 PHP 不太了解，所以对此持保留态度。

默认情况下，HTML 表单在提交时不会刷新页面。某些东西（我猜是 PHP）导致生成 HTML 表单，导致表单提交时页面刷新。

我不确定 Barry 的回答是否有效，但如果您想尝试一下，请将 Monday li 的代码替换为：

**使用您的格式**

```
<?php if($currentday=="Monday") : ; ?>
    <li class="currentday"><?php echo $currentday; ?></li>
    <?php else : ?>
    <li><a href="#" onclick="document.getElementById('ddate').value = '<?php echo date('Y-m-d', strtotime('monday')); ?>'; document.getElementById('ddateform').submit(); return false;">Monday</a></li>
<?php endif; ?> 
```

**使用健全的格式**

```
<script type="text/javascript">
    function onMondayClick(event) {
        document.getElementById('ddate').value = '<?php echo date('Y-m-d', strtotime('monday')); ?>';
        document.getElementById('ddateform').submit();
        return false;
    }
</script>

<?php if($currentday=="Monday") : ; ?>
    <li class="currentday"><?php echo $currentday; ?></li>
    <?php else : ?>
    <li><a href="#" onclick=onMondayClick>Monday</a></li>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:11:31.993

在您调用的任何 javascript 函数中，执行 a`return false;`以防止默认行为。

```
<a onclick="dothis(); return false;" href="#">Click Me</a> 
```

-或者-

```
<a onclick="dothis();" href="#">Click Me</a>
<script type="text/javascript">
  function dothis() { /* stuff here */ return false; }
</script> 
```

学习一些javascript基础知识，你会得到很好的服务:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:41:14.487

您可以使用 jquery post 函数和/或使用 ajax 调用来发布表单数据

# android - 如何从 ExpandableListView 中的视图获取默认侦听器？

> ID：12536700
> 
> 赞同：0
> 
> 时间：2012-09-21T19:06:04.817
> 
> 标签：android, expandablelistview, onclicklistener

我想修改我的`ExpandableListView`，以便在正常单击时展开单击的组并折叠所有其他组，长按时仅展开单击的组。如果有，这将是非常微不足道的`getOnClickListener()`：

```
OnClickListener oldListener = view.getOnClickListener(); // DOESN"T EXIST
view.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        collapseAll();
        oldListener.onClick(v);
    }
}
view.setOnLongClickListener(new OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
        oldListener.onClick(v);
        return true;
    }
} 
```

但是没有这样的方法。我可以通过 来做到这一点`ExpandableListView.expandGroup(int position)`，但我需要从视图中找到位置，这使得它应该变得更加复杂。有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:09:50.243

You can cache the view position in the view itself by setting its position to its tag..

```
view.setTag(position); 
```

You have to do this while adding the child views, probably in the adapter class..

Then when you need the position get it from the view itself by calling `view.getTag();`

# java - 有没有办法从 windows 或 linux 机器远程安装以编程到 windows 机器？最好是一些容易在java中编码的东西

> ID：12536701
> 
> 赞同：1
> 
> 时间：2012-09-21T19:06:07.783
> 
> 标签：java, windows, linux, installation, windows-installer

我有一个将在 Windows 或 linux 机器上运行的 Java 应用程序，并且需要能够将应用程序远程安装到 Windows 机器上。我喜欢在 java 中执行此操作的单一方法，该方法对于 windows/linux 机器的编码与安装程序相同，但这可能是不可能的，所以我愿意接受其他建议。

如果不可能有一种方法，您能否推荐简单的 linux -> windows 和 windows -> windows install 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:17:54.440

想到了两个支持“无人值守”安装的商业解决方案，应该允许远程安装：

*   [安装4j](http://www.ej-technologies.com/products/install4j/features.html)
*   [BitRock 安装构建器](http://installbuilder.bitrock.com/)

[此问题的答案中](https://stackoverflow.com/questions/759855/what-are-good-installanywhere-replacements-for-installing-a-java-ee-application)有更全面的跨平台 Java 安装程序列表。

# c# - 将默认 where 子句添加到 linq-to-sql 表

> ID：12536705
> 
> 赞同：4
> 
> 时间：2012-09-21T19:06:19.760
> 
> 标签：c#, linq, linq-to-sql

是否可以为 Linq-to-SQL 类生成的每个 SQL 语句添加默认 where 子句？

我有一个带有 Customer 类的自定义 DataContext。`NULL`Customer 类有一个 Deleted 属性，这是我在查询表时希望始终保持的属性。

例如，我可以写：

```
List<Customer> customers = db.Customers.ToList<Customer>(); 
```

但真正得到：

```
List<Customer> customers = db.Customers.Where(o => o.Deleted == null).ToList<Customer>(); 
```

我想在我的数据库中维护“已删除”的数据，但永远不需要在我的 .NET 代码中看到它。这种默认设置会很方便，因此我不必记住将过滤器添加到每个查询中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:11:18.803

您可以添加一个名为`ActiveCustomers`返回此的新属性：

```
public IQueryable<Customer> ActiveCustomers {
    get { return db.Customers.Where(e => e.Deleted == null); }
} 
```

针对该属性的任何查询都可以指定其他`Where`条件并以其他方式修改结果，但它们将始终*从*尚未删除的客户开始。并且由于 LINQ 的延迟执行，此语句不会导致执行任何其他查询。

如果您需要确保没有人可以访问`db.Customers`，您可以尝试通过执行以下操作来隐藏它（可能不起作用，我需要查看您的实现）：

```
public new IQueryable<Customer> Customers {
    get {
      throw new InvalidOperationException("Use property ActiveCustomers instead.");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:15:02.800

不要将表添加到您的 dbml 设计器中，而是添加一个包含默认 where 子句的视图，然后在您的 dbml 中将视图命名为 Customer。

要允许更新、插入和删除，请确保在 DBML 设计器中选择主键列，并将它们的`Primary Key`属性标记为 true。

# python - Django下一页在登录页面中不起作用

> ID：12536709
> 
> 赞同：3
> 
> 时间：2012-09-21T19:06:32.790
> 
> 标签：python, django, login

我打开浏览器，尝试访问我的 Django 站点。我退出了我的帐户，所以我被重定向到我的登录页面，我将要访问的页面作为 GET 参数。

```
http://website.com/login/?next=/customer/7/54 
```

但是，当我输入登录信息时，我会被重定向到：

```
http://website.com/ 
```

即使，我试图达到：

```
http://website.com/customer/7/54 
```

/customer/7/54 指向确实具有 @login_required 装饰器的视图，但我假设在我登录后它仍会指向该视图。这是怎么回事？

编辑：所以我意识到，我有一个隐藏的输入标签：

```
 <input type="hidden" name="next" value='/'> 
```

但是，如何将 GET 参数 '/customer/7/54/ 传入登录模板？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T20:31:53.997

根据您编辑的问题，您可以在登录页面获取下一个参数，如下所示：

```
<input type="hidden" name="next" value="{{ next }}"> 
```

标准 django`django.contrib.auth.views.login`将`next`变量直接传递给模板上下文。另外，阅读有关[用户身份验证](https://docs.djangoproject.com/en/dev/topics/auth/)的文档：

> 您还可以通过将 redirect_field_name 传递给视图来指定包含登录后重定向到的 URL 的 GET 字段的名称。默认情况下，该字段被调用 next。

但你可能不需要改变这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T17:58:30.900

对于使用自己视图的人。您必须将“下一个”发送到您的模板

```
def login_view(request):
    '''..your logic..'''
    ctx = {'form':form,'next':next}
    return render_to_response('login.html',ctx,context_instance=RequestContext(request)) 
```

# objective-c - iOS 6 弃用 viewWillUnload 并移至 didReceiveMemoryWarning

> ID：12536715
> 
> 赞同：16
> 
> 时间：2012-09-21T19:06:55.517
> 
> 标签：objective-c, cocoa-touch, ios6, didreceivememorywarning, viewdidunload

我是即将推出我的第一个应用程序的新开发人员。我对`viewDidUnload`以下 Apple 的 iOS 6 发行说明中所述的弃用感到困惑：

> 在 iOS 6 中，UIViewController 的 viewWillUnload 和 viewDidUnload 方法现已弃用。如果您使用这些方法来释放数据，请改用 didReceiveMemoryWarning 方法。如果不使用视图控制器的视图，您也可以使用此方法释放对视图控制器的视图的引用。在执行此操作之前，您需要测试视图是否不在窗口中。

为什么会这样？我应该遵循哪些准则来确保此更改不会导致我的应用出现任何性能问题？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T21:18:17.177

根据 Apple 的说法，他们已经改进了视图的内部内存管理，足以使通过破坏其中的内容获得的收益`viewWill/DidUnload`微乎其微。此外，他们有数据表明许多应用程序崩溃是因为应用程序没有正确处理这些通知，并且执行与视图卸载无关的“其他”事情。

最后，内存警告现在被验证为在您的应用程序因内存不足而终止之前您将收到的第一个也是唯一的警告，因此它确实是处理内存问题的地方。

所以，基本上，只需删除你的`viewWillUnload`and`viewDidUnload`方法。在适当的位置处理内存问题`didReceiveMemoryWarning`和任何其他视图控制器管理。

**编辑**

> 请问：那些“合适的地方”是什么？我曾经在 view[Will/Did]Disappear 不完全足够的某些情况下使用 ViewdidUnload。就像在导航控制器堆栈上走得更远。您介意进一步详细说明吗？– Dan1one

那要看。我知道这不是你想听到的，但这是事实:-)

一般来说，你应该避免不对称。因此，您应该使用您“执行”原始操作的对称方法“撤消”操作。一般来说，你应该能够完成所有`viewDidUnload`类型的工作`didReceiveMemoryWarning`和`dealloc`。

这实际上不应该引起更改，因为无论如何您都必须在这两个地方复制大部分代码。

我不知道您所说的“在导航控制器堆栈上走得更远”是什么意思，因此您需要澄清该示例，以便我提供有用的响应。

使用`viewDidDisappear`and的问题之一`viewDidAppear`是很难知道视图何时出现，因为它实际上正在出现，或者因为它上面的视图正在消失......导致它出现。

这些 API 应该可以帮助您解决这些问题：

```
- (BOOL)isMovingFromParentViewController
- (BOOL)isMovingToParentViewController
- (BOOL)isBeingDismissed
- (BOOL)isBeingPresented 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T21:42:55.163

在 iOS 6 中，视图永远不会被卸载。

这意味着`loadView`and`viewDidLoad`只会被调用一次，并且`viewDidUnload`永远不会被调用。因此，如果您的视图控制器用于`viewDidUnload`处理内存不足的情况，那么它将需要更改。

如果您想响应内存不足的情况，`didReceiveMemoryWarning`请在此方法中实现和释放您的临时数据和对象。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-01T06:17:07.770

在 iOS 6 中，我们应该自己发布视图，做这样的事情

```
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

    if([self isViewLoaded] && self.view.window == nil)
    {
        self.view = nil;
    }
} 
```

# mysql - 压缩大量文本数据以便与 PHP 应用程序一起使用

> ID：12536716
> 
> 赞同：0
> 
> 时间：2012-09-21T19:06:57.297
> 
> 标签：mysql, sql

***信息***：我正在为学校图书馆开发一个 PHP 脚本。PHP 脚本将在 localhost (XAMPP) 上运行，它不会对 Internet 开放。

***我试过什么？***

```
 CREATE TABLE IF NOT EXISTS `books` (
  `Id` int(11) DEFAULT NULL,
  `url` varchar(255) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `description` varchar(255) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8; 
```

数据库的总大小为 100 GB。100 GB 是这个项目的大数据量。*事实上，10 GB - 20 GB 会很棒。*

***a-) 有没有办法在将文本数据存储到 mysql 之前对其进行压缩？我想让它变成 20 GB*** ***b-) 我愿意将数据存储到一个文件中。如果文件存储使我的数据大小达到 20 GB，那对我来说会很棒。有没有办法实现它？***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T19:18:51.777

您可以使用 MySQL [COMPRESS()](http://dev.mysql.com/doc/refman/5.5/en//encryption-functions.html#function_compress)函数来压缩数据以进行存储，并在检索结果时使用[UNCOMPRESS() 。](http://dev.mysql.com/doc/refman/5.5/en//encryption-functions.html#function_uncompress)这会导致插入该列的数据被压缩。

或者，您可以在插入 MySQL 之前在 PHP 端压缩数据。为此，使用压缩的函数 / 或[`gzdeflate`](http://php.net/manual/en/function.gzdeflate.php)用于压缩的函数/ （与 MySQL 函数使用的相同）。使用这些要求 PHP 构建时带有 zlib 支持 ( )。[`gzinflate`](http://php.net/manual/en/function.gzinflate.php)`gzip`[`gzcompress`](http://php.net/manual/en/function.gzcompress.php)[`gzuncompress`](http://php.net/manual/en/function.gzuncompress.php)`zlib``--with-zlib`

这些有多大用处取决于数据库为何如此之大。如果是因为您有数亿条记录，而具有大列的记录较少，那么压缩某些值不太可能产生太大影响。如果您有大量数据，您只会看到数据库大小的减少。从表结构的外观来看，没有需要大量存储的列。

有关`ROW_FORMAT=COMPRESSED`其作用及其含义的更多信息，请参阅[InnoDB Compression Usage](http://dev.mysql.com/doc/refman/5.5/en/innodb-compression-usage.html)。

# javascript - Javascript 揭示模块模式 - 参考

> ID：12536717
> 
> 赞同：0
> 
> 时间：2012-09-21T19:07:00.403
> 
> 标签：javascript, reference, design-patterns

这就是我遇到的……我设计我的对象：

```
var Tab = function () {
    var _data = [], _owners = [], _supportWorkers = [], _watchers = [];
        var _dataLength = function () { return _data.length; };
    return {
        Data: _data,
        Owners: _owners,
        SupportWorkers: _supportWorkers,
        Watchers: _watchers,
            Length: _dataLength
    };
};

var newObject = new Tab();
newObject.Data = [{"my":"data"}];
alert(newObject.Length()); // Length == 0
alert(newObject.Data.length);​ // Length == 1 
```

这显然会更改引用，但不会更改对象内部的引用。创建 Getter/Setter 函数是避免这种情况发生的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:09:27.670

```
var _dataLength = function () { return this.Data.length; }; 
```

Will work from the outside, since `this` will refer to the instance. It will not work from within the module itself.

* * *

Here's how I would do it - the revealing module pattern is pointless if all your data is revealed:

```
var Tab = function () { 
    this.data = [];
    this.owners = [];
    this.supportWorkers = [];
    this.watchers = [];
}
Tab.prototype.dataLength = function () { return this.data.length; }; 
```

# java - 通配符、基类和子类的 Java 泛型问题

> ID：12536723
> 
> 赞同：2
> 
> 时间：2012-09-21T19:07:24.037
> 
> 标签：java, oop, generics

我有类似的东西：

```
List<? extends BaseClass> a = getMyList(); 
```

以下两条指令中的任何一条都是无效的，编译器说它需要一个“? extends BaseClass”作为参数。

```
a.add(new BaseClass());
a.add(new SubClass()); 
```

我想问题是

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:17:03.677

应该是`List<? super BaseClass> a`往里面加东西。你只能从`List<? extends BaseClass> a`.

看看这个[什么是PECS（Producer Extends Consumer Super）？](https://stackoverflow.com/q/2723397/738746).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:17:37.160

问题是编译器无法确定列表的实际类型。

可能类型是`SubClass`，在这种情况下，您将不允许添加`BaseClass`.
甚至可以是`SubSubClass`，这意味着您不能添加`BaseClass`或`SubClass`。

但是，这将编译：

```
List<BaseClass> a = getMyList();
a.add(new BaseClass());
a.add(new SubClass()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T13:45:36.833

通常 Java 教程说您不能向 a 添加任何内容，`List<? extends Something>`因为编译器无法知道列表中的有效类型。

我发现这个解释不直观，也不是完全正确的，因为它假装编译器是一个聪明的存在，它理解 a`List`是一个*有序的元素容器，*并防止你做潜在的不安全的事情。实际上，编译器只是一个程序，它只是遵循一些规则。

所以，最好做一些角色扮演，像编译器一样思考。你有

```
interface List<E> {
  void add(E element);
} 
```

请注意，`<E>`它不会为编译器提供任何额外的语义，因为它不知道您正在定义*容器*类型。您可以定义 a `Asdf<Q>`，并且对于编译器来说没关系，或者 an`Elephant<W>`并且仍然适用相同的规则（显然`Elephant`不是容器类型，即您不向大象添加任何东西 - 我希望......）

所以你声明了一个 type 的引用`List<? extends Shape>`。编译器理解类似的东西

```
abstract class Unknown extends Shape {}

class ListOfUnknown {
  void add(Unknown element) {}
  Unknown get(int index) {}
} 
```

您能明白为什么不能将 a 添加`Rectangle`到这样的列表中吗？根据*正常*的Java 规则，您可以`Rectangle`为方法提供 a，例如`add(Shape)`因为子类型关系确保它们的接口兼容。

允许`add(Unknown)`使用 type 的参数进行调用`Rectangle`，`Rectangle`应该是 的子级`Unknown`，但`Rectangle`只能是 extends `Shape`，因此这里的泛型没有什么特别之处，这是用于类型兼容性的普通 Java 规则。为了能够调用`add(Unknown)`，您需要对类型`Unknown`或等效对象（某些扩展的类`Unknown`）的引用，但正如您所见，在任何地方都没有定义此类类型，因此这最终会禁止`add()`此列表中的任何内容。

学习泛型时，总是问自己*“为什么？”* 并且永远不要停留在`List`示例上，因为即使泛型是为集合添加的主要内容，它们也是一种*语言*特性，因此您必须了解它们的语义，而不是专注于容器类型的具体实现。

# windows - 八进制转储（OD）的Windows等效命令？

> ID：12536725
> 
> 赞同：4
> 
> 时间：2012-09-21T19:07:36.163
> 
> 标签：windows, linux

什么是 od 的 windows 等效命令

在 Linux 中 - echo xxxxx | 发布网址 | od -xv

那么windows中的等效命令是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:41:30.960

`od`是[CoreUtils](http://gnuwin32.sourceforge.net/packages/coreutils.htm)的一部分，可通过 GnuWin32 获得。

# objective-c - 'ID '来自不兼容的类型'ViewController *const_strong'

> ID：12536726
> 
> 赞同：4
> 
> 时间：2012-09-21T19:07:50.507
> 
> 标签：objective-c, xcode, mfmailcomposeviewcontroller

在我的应用程序中，我有一个按钮，按下该按钮会打开一封填写“收件人”和“主题”的电子邮件，但我在这行代码中收到此警告：

```
mc.mailComposeDelegate = self; 
```

警告说：

`Assigning to 'id<MFMailComposeViewControllerDelegate>'from incompatible type 'ViewController *const_strong'`

我该怎么办？请非常清楚，我对xCode不太熟练。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T22:06:06.147

这个警告表明你没有告诉编译器你的类`ViewController`实现了[`MFMailComposeViewControllerDelegate`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intf/MFMailComposeViewControllerDelegate)协议。

如果您还没有这样做，请从该协议中实现所有必需的方法。在您的情况下，它只有一个 ( `– mailComposeController:didFinishWithResult:error:`)。

之后你必须告诉编译器你的类实现了这个协议。您可以通过添加`<MFMailComposeViewControllerDelegate>`到`@interface`ViewController 来做到这一点。（接口在您的头文件 ViewController.h 中）。

您的界面现在应该类似于以下内容：

```
@interface ViewController : UIViewController <MFMailComposeViewControllerDelegate>

@property ...

@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T09:38:11.933

我遇到过同样的问题。问题是我实施了错误的协议，我怀疑你可能也在做同样的事情。

在您的视图控制器头文件中不要写： `@interface ViewController : UIViewController <MFMessageComposeViewControllerDelegate>`

相反，使用： `@interface ViewController : UIViewController <MFMailComposeViewControllerDelegate>.`

# jquery - 谷歌浏览器中的代码运行缓慢

> ID：12536732
> 
> 赞同：0
> 
> 时间：2012-09-21T19:08:19.917
> 
> 标签：jquery, google-chrome

嗨，我正在尝试制作 Google+ 风格的相册。我相当成功。但奇怪的事实是，代码在 Chrome 中运行缓慢，但在 Firefox 中运行良好。在 Chrome 中，图片加载速度很慢，相册图像（jquery 部分）的旋转速度很慢。这是我的代码...

```
<?php
 $number_of_image_per_album=array(); 
 $query="SELECT album_id,album_name from albums WHERE user_id='18'";//user id
 $result=mysql_query($query);
 $num_of_album=mysql_num_rows($result);
 for($i=1,$k=0;$k<=800,$i<=$num_of_album;$k=$k+300,$i++)
   {
$array=mysql_fetch_assoc($result);
$album_id=$array['album_id'];
$album_name=$array['album_name'];
$query2="SELECT image_id,ext from images WHERE album_id='$album_id'";
$result2=mysql_query($query2);
$num_of_images=mysql_num_rows($result2);
$num_of_image_per_album[]=$num_of_images;
echo "<div class='image_stack' style='margin-left:",$k,"px'>";//create a album of images
$left=108;
$top=8;
for($j=1;$j<=$num_of_images;$j++)
{
    $array2=mysql_fetch_assoc($result2);
    $image_id=$array2['image_id'];
    $image_ext=$array2['ext'];
    $image_name=$array2['image_name'];
    //$str="<img id='photo.$j' class='stackphotos' src='uploads/.$album_id./.$image_id.$image_ext' />";

    echo "<img id='photo$j' class='stackphotos' style='left: $left; top:$top ;' src='uploads/$album_id/$image_id.$image_ext' />";   

    $left=108-4;
    $top=8-2;
}   
 echo "</div>";
}
?> 
```

这是我的 jquery 部分...

```
<script>
$(document).ready(function() {
$('.image_stack').delegate('img', 'mouseenter', function() {//when user hover mouse on image with div id=stackphotos
        //if ($(this).hasClass('stackphotos')) {//
        // the class stackphotos is not really defined in css , it is only assigned to each images in the photo stack to trigger the mouseover effect on  these photos only
        var parent = $(this).parent();
        var index=parent.index()-1;
        var num_of_image_per_album=<?php echo json_encode($num_of_image_per_album);?>;
        var num_of_image_for_specific_album=num_of_image_per_album[index];
      //  alert( num_of_image_for_specific_album);
        var i=0;
        var degree=0;
        for(i=1;i<=num_of_image_for_specific_album;i++)
        {

            parent.find('img#photo'+i).css({'-webkit-transform': 'rotate(' + degree + 'deg)'});
            parent.find('img#photo'+i).css({ '-moz-transform': 'rotate(' + degree + 'deg)'});
             degree=degree+10

            }

})
.delegate('img', 'mouseleave', function() {// when user removes cursor from the image stack
var parent = $(this).parent();
var index=parent.index()-1;
var num_of_image_per_album=<?php echo json_encode($num_of_image_per_album);?>;
var num_of_image_for_specific_album=num_of_image_per_album[index];

 for(i=1;i<=num_of_image_for_specific_album;i++)
    {

     parent.find('img#photo'+i).css( {'-webkit-transform':''});
        parent.find('img#photo'+i).css({ '-moz-transform': ''});

        }

});;
});
</script> 
```

我正在使用 16.0.912.77 版本的 Crome。这在 safari 中也很慢。这是什么问题。请告诉我。提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:18:12.647

你检查过 chrome 的超酷分析器吗？

```
Right click page -> Inspect Element (or F12)
 -> Profiles 
 -> collect JavaScript CPU Profile
 -> Start
 -> Stop
 -> Read
 -> Fix Problems
 -> Repeat 
```

# javascript - 在 IE 9 中自动化 Internet 选项以通过 asp 编码页面中的代码 asp 或 Jscript 在新窗口中打开弹出窗口

> ID：12536734
> 
> 赞同：0
> 
> 时间：2012-09-21T19:08:29.963
> 
> 标签：javascript, asp-classic, internet-explorer-9

如果 ie9 设置为默认设置，请告诉我是否可以在新浏览器中打开弹出窗口而不是新选项卡。我的代码在 ASP 中。

这已经存在于代码中，但它不起作用。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:31:24.600

这是一个示例代码，可能会对您有所帮助

```
<script type="text/javascript">
window.open('YourPageName.asp','','menubar=1, toolbar=0, scrollbars=1, status=1,resizable=1,width=650, height=500, top=10,left=100');
</script> 
```

将此代码复制并粘贴到您要打开弹出窗口的位置。将“YourPageName”参数替换为您要在弹出窗口中打开的页面的名称

# vb.net - 使用 VB.net 如何在 spredsheets 中使用第二行作为标题

> ID：12536736
> 
> 赞同：0
> 
> 时间：2012-09-21T19:08:34.143
> 
> 标签：vb.net, excel, spreadsheet

在使用 vb.net 编写数据时，我想使用我在电子表格中创建的标题作为键。

我可以使用`xlSheet.Cells(2, 2)`但想使用我创建的标题，例如：

```
ClientName   ClientNumber 
```

所以代码可以这样写：

```
xlSheet.Cells(2, "ClientName") 
```

但我不确定如何编写代码以使用第二行作为键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:13:57.720

你不能只确定列序号，然后设置一个变量指向那里吗？

例如：

```
Dim ClientName as integer
ClientName = 2 
```

现在你可以使用你的变量

```
xlSheet.Cells(2,ClientName) 
```

如果我误解了你的问题，请告诉我！

# sql - 是什么导致我的 WPF UI 变得无响应？

> ID：12536737
> 
> 赞同：0
> 
> 时间：2012-09-21T19:08:37.177
> 
> 标签：sql, wpf, multithreading, user-interface

我是wpf新手，所以请原谅任何听起来不对的东西...

我有一个 WPF 应用程序，它在启动时会从我的 SQL 数据库中加载许多（20000+）项，并将它们存储到在 xaml.cs 后台文件中创建的 ObservableCollection 中。

我创建了一个类，它的构造函数创建一个线程并启动线程，线程无限循环。

```
public StatusChanged()
    {
        Thread thread = new Thread(new ThreadStart(ThreadProc));
        thread.Start();
    } 
```

这个线程开始的方式是在我的代码后面的主窗口中创建这个线程类的一个实例（xaml.cs）

在这个线程中，我有一个 while 循环，它做了一些可能导致我的 UI 窗口变得无响应的事情：

1.  运行 sql 命令检查以查看数据库中任何项目的位标志是否已更改的无限 while 循环。如果没有找到，线程休眠 3 秒，循环继续

2.  当从数据库返回行时，我遍历每一行并找到更改的属性并修改我的 ObservableCollection 以及通过为每个行运行 SQL 更新命令来修改数据库中的位标志。然后线程再次休眠 3 秒，循环继续。

这是对正在发生的事情的概述。当从数据库返回行并从第 2 点开始完成工作时，UI 可能会变得无响应。当我尝试单击一个按钮时，它通常会在 75% 以上的情况下正常工作，但有 25% 的时间 UI 没有响应并且没有任何反应。这对我的应用程序非常不利。

根据我的示例，您认为是什么导致 UI 无响应？难道是……

1.  循环通过数据库返回的每一行的while循环？

2.  更新该 while 循环 ^^ 内的可观察集合，并为每个项目进行 sql 更新调用。

3.  我的线程是由 xaml.cs 代码中的实例启动、休眠和创建的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:35:59.923

如果 20000 多个项目的 Observable 集合绑定到 UI，则在修改项目时可能需要更新 UI。这对于 UI 线程来说可能是非常昂贵的，从而导致 UI 变得无响应。

有几个建议可以尝试：

1.  减少商品数量
2.  使用 VirtualizingStackPanels 防止 UI 更新看不见的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:49:54.470

您还可以使用分页器来加载项目。这对于管理大量信息的应用程序很有用。

# php - 数组插入数据库

> ID：12536740
> 
> 赞同：0
> 
> 时间：2012-09-21T19:08:48.953
> 
> 标签：php

伙计们我试图在 php 中创建一个学生列表并获取其每个值并将其插入数据库中。

```
$b_lname = $_POST['bstudnt_lname'];
$b_fname = $_POST['bstudnt_fname'];
$b_mname = $_POST['bstudnt_mname'];

$department = $_POST['class_department'];
$section = $_POST['section_name'];
$year_grade = $_POST['faclty_advse_year'];

$school_id ="a3arew542q3dq";

$counter2 = 0;

$button = $_POST['add_students'];

if(isset($button)){

    foreach($b_lname as $blast => $x){ 
        $arraylname[] ="".$x;
        }  
    foreach($b_fname as $bfirst => $y){
            $arrayfname[] ="".$y;
            $counter2+=1;
        }
    foreach($b_mname as $bmid => $z){
            $arraymname[] ="".$z;
            $counter2+=1;
        }   

        for($v=0;$v<=$counter2-1;$v++){

            if($arrayfname[$v]!="" && $arraymname[$v]="" &&   $arraylname[$v]=""){

            $insert = "INSERT INTO  students(school_id,firstname,middlename,lastname,gender,department,section,year_grade) 
           VALUES('$school_id','$arrayfname[$v]','$arraymname[$v]','$arraylname[$v]','male','$department','$section','$year_grade')";

                  if(@!mysql_query($insert)){
                    die('error insert'.mysql_error());

                    }
            }

        } 
```

}

但是如果数组没有值它不会插入数据库，我会遇到麻烦。我做了一个 if 声明，但我想它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:11:29.857

```
if (count($array)) {
  //insert into db
} else {
  // array is emtpy
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:13:18.630

问题在这里：

```
if($arrayfname[$v]!="" && $arraymname[$v]="" &&   $arraylname[$v]=""){ 
```

您将单个`=`用于后两个条件。将它们更改为`==`或`===`。

# jquery - jQuery 组合框和 ASP.NET 更新面板

> ID：12536743
> 
> 赞同：0
> 
> 时间：2012-09-21T19:09:03.573
> 
> 标签：jquery, ajax, combobox, updatepanel

[我在这里找到了一个组合框](http://jqueryui.com/demos/autocomplete/#combobox)，现在当我尝试将 jQuery 与我的更新面板一起使用时遇到了问题。当我第一次打开页面直到发生部分回发时，组合框效果很好。因此，例如，如果我要更改 DropdownList ddlTagLevel3_1，那么下拉列表 ddlTagname1 将不再显示 jQuery 组合框。有什么想法我需要做什么吗？这是我的代码，为简单起见省略了一些行（谢谢）：

TagFilter.master：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
<ContentTemplate>
        <div id="div1" class="GridFilter" runat="server">
                <asp:Panel ID="Panel3" CssClass="PanelGridContents" runat="server">
            <div id="divTagFilterTable" runat="server">
                <asp:table ID="Table2" BorderWidth="0" CellPadding="4" runat="server">
                    <asp:TableRow>
                        <asp:TableCell>
                        <asp:Table ID="tblTagGridFilter" CellPadding="4" runat="server" CellSpacing="0" BackColor="White" CssClass="TagGridFilter" BorderStyle="Solid" BorderWidth="1">
                                                        <asp:TableRow ID="tr1" runat="server">
                                                            <asp:TableCell CssClass="TagGridFilter2" Wrap="false">
                                                                <asp:ImageButton runat="server" ID="ibAdd" OnClick="ibAdd_Click" ImageUrl="~/Images/add.gif" Visible="true"></asp:ImageButton>
                                                                <asp:Image runat="server" ID="ImageButton2" ImageUrl="~/Images/noImage.gif" Width="5px" Visible="true"></asp:Image>
                                                                <asp:ImageButton runat="server" ID="ibRemove" OnClick="ibRemove_Click" ImageUrl="~/Images/remove.gif" Visible="true"></asp:ImageButton>
                                                            </asp:TableCell>
                                                            <asp:TableCell BorderWidth="1" CssClass="TagGridFilter2" Wrap="false">
                                                                <asp:Button ID="btnGridSwap_1" runat="server" Text="M" OnClick="bntGridSwap_1Click" />
                                                            </asp:TableCell>
                                                            <asp:TableCell ID="tcDisplayLevel_1" ColumnSpan="3" BorderWidth="1" CssClass="TagGridFilter" Visible="false" Wrap="false">
                                                                <asp:DropDownList ID="ddlDisplay1" AutoPostBack="True" OnSelectedIndexChanged="ddlDisplay1Changed" runat="server" />
                                                            </asp:TableCell>
                                                            <asp:TableCell ID="tcTagLevel1_1" BorderWidth="1" CssClass="TagGridFilter" Wrap="false">
                                                                <asp:DropDownList ID="ddlTagLevel1_1" AutoPostBack="True" OnSelectedIndexChanged="ddlTagLevel1_1Changed" runat="server" />
                                                            </asp:TableCell>
                                                            <asp:TableCell ID="tcTagLevel2_1" BorderWidth="1" CssClass="TagGridFilter" Wrap="false">
                                                                <asp:DropDownList ID="ddlTagLevel2_1" AutoPostBack="True" OnSelectedIndexChanged="ddlTagLevel2_1Changed" runat="server" />
                                                            </asp:TableCell>
                                                            <asp:TableCell ID="tcTagLevel3_1" BorderWidth="1" CssClass="TagGridFilter" Wrap="false">
                                                                <asp:DropDownList ID="ddlTagLevel3_1" AutoPostBack="True" OnSelectedIndexChanged="ddlTagLevel3_1Changed" runat="server" />
                                                            </asp:TableCell>
                                                            <asp:TableCell BorderWidth="1" CssClass="TagGridFilter1" Wrap="false">
                                                                <asp:Label id="lblDevice1" runat="server" />
                                                            </asp:TableCell>
                                                            <asp:TableCell BorderWidth="1" CssClass="TagGridFilter" Wrap="false">
                                                                <asp:DropDownList ID="ddlTagname1" AutoPostBack="True" OnSelectedIndexChanged="ddlTagname_1Changed" runat="server" />
                                                            </asp:TableCell>
                                                            <asp:TableCell BorderWidth="1" CssClass="TagGridFilter1" Wrap="false">
                                                                <asp:Label id="lblDescription1" runat="server" />
                                                            </asp:TableCell>
                                                            <asp:TableCell BorderWidth="1" CssClass="TagGridFilter1" Wrap="false">
                                                                <asp:Label id="lblType1" runat="server" />
                                                            </asp:TableCell>
                                                            <asp:TableCell BorderWidth="1" CssClass="TagGridFilter1" Wrap="false">
                                                                <asp:Label id="lblUOM1" runat="server" />
                                                            </asp:TableCell>
                                                            <asp:TableCell ID="tcNew1" Visible="false" BorderWidth="1" CssClass="TagGridFilter" Wrap="false" HorizontalAlign="Center">
                                                                <asp:ImageButton runat="server" ID="ibNewRecord1" OnClick="ibNewRecord1_Click" ImageUrl="~/Images/new_tiny.gif" Visible="false"></asp:ImageButton>
                                                            </asp:TableCell>
                                    </asp:TableRow>
                    </asp:Table>
                    </asp:TableCell>
                                </asp:table>
                        </div>
                </asp:Panel>
        </div>
</ContentTemplate> 
```

TagSummaryDetail.aspx.cs：

```
 protected new void Page_PreRender(object sender, EventArgs e)
{
    base.Page_PreRender(sender, e);

    if (GridView_Summary.SelectedIndex < 0 && GridView_Summary.Rows.Count == 0)
        ProcessSelection();

    string style = @"
        <style>
            .ui-combobox {
                position: relative;
                display: inline-block;
                background: #ffffff;
            }
            .ui-combobox-toggle {
                position: absolute;
                top: 0;
                bottom: 0;
                margin-left: -1px;
                padding: 0;
                background: #ffffff
                /* adjust styles for IE 6/7 */
                *height: 1.7em;
                *top: 0.1em;
            }
            .ui-combobox-input {
                margin: 0;
                padding: 0.2em;
                background: #ffffff;
                width: 20em;
            }
            .ui-button-icon-only .ui-button-text { background: #e6e6e6; } 
        </style>";
    this.Page.ClientScript.RegisterStartupScript(this.GetType(), "style", style);

    string script = @"
            <script>
                (function ($) {
                    $.widget(""ui.combobox"", {
                        _create: function () {
                            var input,
                        self = this,
                        select = this.element.hide(),
                        selected = select.children("":selected""),
                        value = selected.val() ? selected.text() : """",
                        wrapper = this.wrapper = $(""<span>"")
                            .addClass(""ui-combobox"")
                            .insertAfter(select);

                            input = $(""<input>"")
                        .appendTo(wrapper)
                        .val(value)
                        .addClass(""ui-state-default ui-combobox-input"")
                        .autocomplete({
                            delay: 0,
                            minLength: 0,
                            source: function (request, response) {
                                var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), ""i"");
                                response(select.children(""option"").map(function () {
                                    var text = $(this).text();
                                    if (this.value && (!request.term || matcher.test(text)))
                                        return {
                                            label: text.replace(
                                                new RegExp(
                                                    ""(?![^&;]+;)(?!<[^<>]*)("" +
                                                    $.ui.autocomplete.escapeRegex(request.term) +
                                                    "")(?![^<>]*>)(?![^&;]+;)"", ""gi""
                                                ), ""<strong>$1</strong>""),
                                            value: text,
                                            option: this
                                        };
                                }));
                            },
                            select: function (event, ui) {
                                ui.item.option.selected = true;
                                self._trigger(""selected"", event, {
                                    item: ui.item.option
                                });
                            },
                            change: function (event, ui) {
                                if (!ui.item) {
                                    var matcher = new RegExp(""^"" + $.ui.autocomplete.escapeRegex($(this).val()) + ""$"", ""i""),
                                        valid = false;
                                    select.children(""option"").each(function () {
                                        if ($(this).text().match(matcher)) {
                                            this.selected = valid = true;
                                            return false;
                                        }
                                    });
                                    if (!valid) {
                                        // remove invalid value, as it didn't match anything
                                        $(this).val("""");
                                        select.val("""");
                                        input.data(""autocomplete"").term = """";
                                        return false;
                                    }
                                }
                            }
                        })
                        .addClass(""ui-widget ui-widget-content ui-corner-left"");

                            input.data(""autocomplete"")._renderItem = function (ul, item) {
                                return $(""<li></li>"")
                            .data(""item.autocomplete"", item)
                            .append(""<a>"" + item.label + ""</a>"")
                            .appendTo(ul);
                            };

                            $(""<a>"")
                        .attr(""tabIndex"", -1)
                        .attr(""title"", ""Show All Items"")
                        .appendTo(wrapper)
                        .button({
                            icons: {
                                primary: ""ui-icon-triangle-1-s""
                            },
                            text: false
                        })
                        .removeClass(""ui-corner-all"")
                        .addClass(""ui-corner-right ui-combobox-toggle"")
                        .click(function () {
                            // close if already visible
                            if (input.autocomplete(""widget"").is("":visible"")) {
                                input.autocomplete(""close"");
                                return;
                            }

                            // work around a bug (likely same cause as #5265)
                            $(this).blur();

                            // pass empty string as value to search for, displaying all results
                            input.autocomplete(""search"", """");
                            input.focus();
                        });
                        },

                        destroy: function () {
                            this.wrapper.remove();
                            this.element.show();
                            $.Widget.prototype.destroy.call(this);
                        }
                    });
                })(jQuery);

                $(function () {
                    $(""#" + Master.Tagname1.ClientID + @""").combobox();  //Tagname1 is ddlTagname1
                    $(""#toggle"").click(function () {
                        $(""#" + Master.Tagname1.ClientID + @""").toggle();
                    });
                });
            </script>";

    this.Page.ClientScript.RegisterStartupScript(this.GetType(), "jQuery", script); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:20:46.143

您需要在从服务器返回的部分中添加初始化组合框的代码

```
@if(IsAjax)
{
<script>
   $(function() {
       // INIT AUTOCOMPLITE
    });
   </script>
} 
```

根据您的描述，我了解到此代码仅在第一个加载页面上调用一次。但是每次更新html时都需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:31:09.033

第一次打开页面时，它是一个 HTTP GET 请求。

但是任何其他请求都是 HTTP POST 请求，因此您的脚本在此请求中不可用。

您需要在请求之前在 UpdatePanel 中注册脚本以使用它。

更多信息：http: [//helpondesk.blogspot.cz/2008/11/how-to-register-client-script-inside.html](http://helpondesk.blogspot.cz/2008/11/how-to-register-client-script-inside.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:42:44.300

在页面上添加一个`endRequest`处理程序并再次分配组合框小部件。像这样的东西：

```
$(document).ready(function() {
  Sys.WebForms.PageRequestManager.getInstance().add_endRequest(updateCombobox);
}

function updateCombobox() {
  $('#comobox').combobox();
}); 
```

# objective-c - IOS6中UITableviewContrller异常的子类

> ID：12536746
> 
> 赞同：0
> 
> 时间：2012-09-21T19:09:18.170
> 
> 标签：objective-c, ios, xcode, ios6

这段代码在 iOS5.1 中工作得很好，但我在赢得 iOS6 时遇到了问题。

```
rightNav = [[UINavigationController alloc] initWithRootViewController:parkViewController];
[rightNav.view setFrame:[detailView bounds]];
[rightNav.navigationBar setBarStyle:UIBarStyleBlackOpaque];

[detailView addSubview:rightNav.view]; 
```

*应用程序因以下异常而崩溃：[UITableViewController loadView] 加载了“ParkViewController”笔尖，但没有获得 UITableView。*

**parkViewController**是 UITableviewController 的子类。

**detailView**是一个 UIView。

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:14:51.057

你说`parkViewController`的是一个子类`UITableView`。

你应该把它变成一个子`UITableViewController`类

在这种情况下，请确保控制器的 tableView 插座在笔尖中正确连接。

# ruby-on-rails-3 - Rails 3 + 声明式授权：嵌套权限

> ID：12536748
> 
> 赞同：1
> 
> 时间：2012-09-21T19:09:22.503
> 
> 标签：ruby-on-rails-3, declarative-authorization

我正在使用声明性授权。假设我有两个名为`batch`和的模型/控制器`timetable_entry`。我希望有权访问的用户`/batches/:batch_id (batches#show)`能够访问`/batches/:batch_id/timetable_entries (timetable_entries#index)`.

到目前为止，我想出了这个：

```
has_permission_on :batches do
  to :show
    if_attribute :some_condition do
      has_permission_on :timetable_entries do
        to :index
      end
    end
  end
end 
```

这没有达到我想要的，因为用户无法访问`timetable_entries#index`. 我能做些什么？谢谢！

# crystal-reports - Crystal Report - 具有不同记录选择标准的多个交叉表

> ID：12536749
> 
> 赞同：4
> 
> 时间：2012-09-21T19:09:26.423
> 
> 标签：crystal-reports, report, crosstab

我正在使用 Crystal Report 2011，我想知道是否可以在同一个报表中生成两个具有不同记录选择的交叉表？

例如，我有以下数据集：

```
SchoolID      QuestionID        AnswerValue

++++++++           ++++++++++       ++++++++++++

1                    Q2             3

1                    Q2             4

3                    Q2             7

3                    Q3             5

1                    Q5             6 
```

我想创建两个交叉表，第一个将显示问题 2 和 3，第二个交叉表将仅显示问题 5。你能帮忙吗？

谢谢

阿斯玛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:20:18.220

创建公式字段：

```
// {@question}
// dummy grouping; formula results are irrelevant
SELECT {Table.QuestionID}
CASE "Q2" OR "Q3": "A"
CASE "Q5": "B" 
```

根据该字段创建组。

将交叉表移动到组标题部分。

# objective-c - iOS6 forms not navegable anymore, pressing next doesn't change to next textfield in forms

> ID：12536755
> 
> 赞同：0
> 
> 时间：2012-09-21T19:09:45.407
> 
> 标签：objective-c, xcode, forms, ios6, first-responder

I have an issue with the new Xcode 4.5 and iOS6. I have a form in my app with various textfields and pickers. I usually navigate through them with the Next key on the onscreen keyboard or pressing tab on my Mac, it seems something new affected the first responder because it doesn't work anymore:

```
-(UIResponder *)ValidarTextFieldwithCell:(UICellRegister *)Cell{
UIResponder* nextResponder;
UICellRegister *cell2;
NSIndexPath *nextIndexPath = [self nextIndexPath:Cell.MyIndexpath];
cell2= (UICellRegister *)[self.tableView cellForRowAtIndexPath:nextIndexPath];
nextResponder = cell2.Valor;
return nextResponder;
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField   {

UICellRegister *myCell=(UICellRegister *)[[textField superview]superview];

UIResponder* nextResponder;

nextResponder = [self ValidarTextFieldwithCell:myCell];
if (nextResponder) {
    [nextResponder becomeFirstResponder];
} else {
    [textField resignFirstResponder];
    if ([self.parentViewController respondsToSelector:@selector(next:)]) {
        [((RegistroViewController *)self.parentViewController) next:nil];
    }
    if (![self.parentViewController isKindOfClass:[RegistroViewController class]]) {
        [self doneButtonPressed:nil];
    }
    [self animateView:NO withTextfield:nil];
    //        [self doneButtonPressed];
}
    return NO; // We do not want UITextField to insert line-breaks.
} 
```

I'll appreciate any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:16:35.270

我设法解决了这个问题。我已经覆盖了在最后重新加载 tableview 的 textFieldEndEditing 方法（因为对当前单元格进行了验证），问题在于重新加载 tableview 是下一个字段没有成为第一响应者的原因。解决方案是仅重新加载我正在验证的单元格。

# iis - 如何使用 NSIS 安装脚本中的脚本在 IIS 5.1、6.0、7.0 和 7.5 中创建虚拟目录？

> ID：12536760
> 
> 赞同：2
> 
> 时间：2012-09-21T19:09:59.553
> 
> 标签：iis, nsis

我正在尝试在多个版本的 Windows 操作系统和 IIS（IIS 版本 5.1、6.0、7.0 和 7.5）上安装 Web 应用程序和虚拟目录。不同版本的 Windows 似乎有不同的脚本（mkwebdir.vbs、AppCmd）。

目前，我执行以下操作来为 IIS 5.1 (Windows XP) 创建一个虚拟目录：

```
ExecWait "Cscript c:\InetPub\AdminScripts\mkwebdir.vbs -c localhost -w $\"Default Web Site$\" -v myApp,$INSTDIR" 
```

我对 IIS 7.0 及更高版本执行以下操作：

```
ExecWait "c:\Windows\System32\inetsrv\AppCmd add app /site.name:$\"Default Web Site$\" /path:/myApp /physicalPath:$INSTDIR" 
```

这些是各个版本的 IIS 的最佳命令吗？对于 IIS 6.0，我应该使用什么命令？是否有用于创建可用于我列出的所有 IIS 版本的虚拟目录的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:07:04.693

您可以通过[NsisIIS 插件](http://nsis.sourceforge.net/NsisIIS_plug-in)连接到 IIS 。

从 NSIS 创建虚拟目录非常简单

```
NsisIIS::CreateVDir "VDir Name" "Physical Path" 
```

# c# - AES Decryption Exception change

> ID：12536764
> 
> 赞同：4
> 
> 时间：2012-09-21T19:10:16.017
> 
> 标签：c#, .net, c#-4.0, cryptography, streamreader

I have an AES Cryptography wrapper and unit tests that has been working for over a year. Now after installing VS 2012 (or maybe an update to .net Framework 4) the unit tests do not pass. The streamreader block was throwing a CryptographicException when I passed in a bad pass but is not throwing a ArgumentNullException.

The code is up at. [https://github.com/jnaus/Cryptography](https://github.com/jnaus/Cryptography)

Here is the unit test that now does not work. (BadSaltTest has the same problem)

```
[TestMethod]
[ExpectedException(typeof(CryptographicException),
  "Bad password was inappropriately allowed")]
public void BadPasswordTest()
{
    var cipherText = EncryptString();
    var decryptedText = AESCryptography.DecryptStringAES
        (cipherText,"A bad password", salt);
} 
```

Test Result: Test method CryptographyTest.AESTest.BadPasswordTest threw exception System.ArgumentNullException, but exception System.Security.Cryptography.CryptographicException was expected. Exception message: System.ArgumentNullException: Value cannot be null. Parameter name: inputBuffer

Decrypt code.

```
public static string DecryptStringAES(string cipherText, 
    string password, byte[] salt)
{   
    RijndaelManaged aesAlg = null;
    string plaintext = null;

    try 
    {
        // generate the key from the shared secret and the salt
        Rfc2898DeriveBytes key = new Rfc2898DeriveBytes(password, salt);

        // Create a RijndaelManaged object
        // with the specified key and IV.
        aesAlg = new RijndaelManaged();
        aesAlg.Key = key.GetBytes(aesAlg.KeySize/8);
        aesAlg.IV = key.GetBytes(aesAlg.BlockSize/8);

        // Create a decrytor to perform the stream transform.
        ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, 
            aesAlg.IV);
        // Create the streams used for decryption.                
        byte[] bytes = Convert.FromBase64String(cipherText);

        using (MemoryStream msDecrypt = new MemoryStream(bytes)) 
        {
            using (CryptoStream csDecrypt = 
                new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read)) 
            {
                //StreamReader now gives ArgumentNullException
                using (StreamReader srDecrypt = new StreamReader(csDecrypt)) 
                {
                    // Read the decrypted bytes from the decrypting stream
                    // and place them in a string.
                    plaintext = srDecrypt.ReadToEnd();
                }
            }
        }
    }
    finally 
    {
        // Clear the RijndaelManaged object.
        if (aesAlg != null)
        {
            aesAlg.Clear();
        }
    }
    return plaintext;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:51:47.780

在搜索了更多之后，这确实似乎是 Microsoft 确认的错误（请参阅[Microsoft Connect](http://connect.microsoft.com/visualstudio/feedback/details/759833/cryptostream#details)）。个人不是建议的解决方法的忠实粉丝，因为它确实不需要，但我想它会在同一时间做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:02:08.900

您在上面发布的代码对我有用（我必须编写一些代码来创建要传递的加密字符串）。使用 .Net Framework 4 在 VS2012 中编译和运行。

我使用的加密代码是：

```
 private static string EncryptStringAES(string plainText, string password, byte[] salt)
    {
        RijndaelManaged aesAlg = null;
        string cypherText = null;

        try
        {
            // generate the key from the shared secret and the salt
            Rfc2898DeriveBytes key = new Rfc2898DeriveBytes(password, salt);

            // Create a RijndaelManaged object
            // with the specified key and IV.
            aesAlg = new RijndaelManaged();
            aesAlg.Key = key.GetBytes(aesAlg.KeySize / 8);
            aesAlg.IV = key.GetBytes(aesAlg.BlockSize / 8);

            // Create an encryptor to perform the stream transform.
            ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);
            // Create the streams used for encryption.                
            byte[] bytes = new UTF8Encoding().GetBytes(plainText);

            using (MemoryStream msEncrypt = new MemoryStream())
            {
                using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                {
                    csEncrypt.Write(bytes, 0, bytes.Length);
                    csEncrypt.FlushFinalBlock();
                    cypherText = Convert.ToBase64String(msEncrypt.ToArray());
                }
            }
        }
        finally
        {
            // Clear the RijndaelManaged object.
            if (aesAlg != null)
            {
                aesAlg.Clear();
            }
        }
        return cypherText;
    } 
```

使用以下内容进行方法调用：

```
 byte[] salt =  new byte[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20 };
        string test = DecryptStringAES(EncryptStringAES("This is a test", "Test", salt), "Test", salt); 
```

结果字符串（测试）包含“这是一个测试”。

# android - 如何在android应用程序中读取doc文件

> ID：12536765
> 
> 赞同：1
> 
> 时间：2012-09-21T19:10:22.680
> 
> 标签：android

我有一个应用程序，并且需要在不使用任何第三方工具（如 apache poi 或任何其他工具）的情况下读取 doc/dox 文件。你能告诉我这怎么可能。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:20:02.143

我认为没有原生支持以编程方式从 android 读取 doc/docx 文件。您可以使用专门为此目的制作的开源库，例如 jOpenDocument。

[http://www.jopendocument.org/](http://www.jopendocument.org/)

# javascript - 填充屏幕和滚动时图像的纵横比

> ID：12536767
> 
> 赞同：0
> 
> 时间：2012-09-21T19:10:38.373
> 
> 标签：javascript, css, resize, aspect-ratio

我正在一个网站上工作，该网站可以在 www.musidoraland.co.uk 上找到。我有四张图片，无论屏幕尺寸如何，我都需要填充背景，并且在它们被拉伸或挤压时仍保持它们的纵横比。但是，我也在使用 javascript 来滚动图像，并发现我试图保持纵横比的任何东西都会停止滚动或者只是不起作用。我真的很感激任何人可能有的任何帮助、建议或建议，并提前感谢您。我的代码是（包含我认为可能有效但无效的javascript）：

html:

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="description" content="Beauchamp&#39;s Corporate offers a unique service for clients wishing to design a special product for their business.">
<title>Beauchamp&#39;s Corporate</title>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript" src="transify.js"></script> 
<script type="text/javascript">
$(document).ready(function() {
    $('#maximage').cycle({
        fx: 'scrollHorz', // choose your transition type, ex: fade, scrollUp, shuffle, etc...
        speed: 1000,
        timeout: 7000,
        prev: '#arrow_left',
        next: '#arrow_right'
    });
$('#content').transify({opacityOrig:.7});
$('#menu li').transify({opacityOrig:.7});
    });

    var theWindow        = $(window),
        $bg              = $("#maximage"),
        aspectRatio      = $bg.width() / $bg.height();

    function resizeBg() {

        if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
            $bg
                .removeClass()
                .addClass('bgheight');
        } else {
            $bg
                .removeClass()
                .addClass('bgwidth');
        }

    }

    theWindow.resize(function() {
        resizeBg();
    }).trigger("resize");

</script>
<body>

<div id="logo" style="position:relative;">
<img src="images/logo8.png" alt="Beauchamp's Corporate" width="300px" style="position:absolute;">
</div>

        <div id="cycle-loader">
         </div>   

        <div id="maximage">
            <img src="images/luggagelabel5.jpg" alt="" />
            <img src="images/wallet2.jpg" alt="" />
            <img src="images/luggagelabel4.jpg" alt="" />
            <img src="images/coasters2.jpg" alt="" />        
        </div>

        <a href="" id="arrow_left" class="button trans" title="Previous Photo"></a>

        <a href="" id="arrow_right" class="button trans" title="Next Photo"></a>  

<div id="pages">

            <div id="nav">

                <ul id="menu">
                    <li id="product">Our Product</li>
                    <li id="contact">Contact Us</li>
                </ul>

            </div>

            <div id="content">

                <div id="copy">

                    <div class="page product">

                        <p>We offer a consultation meeting in which we discuss client requirements, design ideas, 
packaging options, budgets, lead times and more...
                            <br />
                        We have a number of designs already in production which we can edit & brand with the client logo or...
                            <br />
                        Following this initial meeting, we produce product drawings, quotes, source leather samples and materials 
specific to this product. Samples can be produced once drawings have been approved by the client.
                            <br />
                        Lead times, delivery schedules and product prices are unique to the client and indervidually calculated 
according to the specific client reqirements.
                            <br />
                        Where possible Beauchamp&#39;s aims to produce products in one of our UK factories however should it be required we will use factories further afield. </p>

                    </div>

                    <div class="page contact">

                        <p>For further information:
                            <br />
                        <em>Email:</em> <a href="info@beauchampsoflondon.com">info@beauchampsoflondon.com</a>
                            <br />
                        <em>Address:</em> 35 Bruton Street, London, W1J 6QY 
                            <br />
                        <em>Website:</em> <a href="www.beauchampscorporate.com">www.beauchampscorporate.com</a>
                            <br />
                        <em>Fashion Accessories Website:</em> <a href="www.beauchampsoflondon.com">www.beauchampsoflondon.com</a></p>

                    </div>

                </div>

            </div>

        </div>      
<script type="text/javascript">
    $.extend(jQuery.easing,
    {
        easeInOutQuart: function(x, t, b, c, d) {
            if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
            return - c / 2 * ((t -= 2) * t * t * t - 2) + b;
        }
    });
$(function() {
        $('.page').hide();
        $('#menu li').click(
            function() {  
                var content_id = $(this).attr('id');

                $('#menu li').addClass('off');
                $(this).removeClass('off');

                if ($('.page').is(':visible')) 
                {
                    $('.page').hide();
                    $('.'+content_id).show();
                }
                else
                {
                    $('#pages').animate({ height: '300px', easing: 'easeInOutQuart' });

                        console.log($(this).attr('id'));
                    $('.'+content_id).show();
                }  
            });
    });

    $(function() {
        var open = false;
        $('#maximage').click(
            function() {
                $('#pages').animate({ 
                    height: '40px', 
                    easing: 'easeInOutQuart'
                },
                function(){
                    $('.page').hide();
                    $('#menu li').removeClass('off');
                });

            });
            });
            </script>
</body>
</html> 
```

CSS：

```
 body {
margin:0;
padding:0;
background: #FFFFFF;
}

#logo{
width:300px;
height:149px;
margin-left:auto;
margin-right:auto;
margin-top:0px;
}

a.button {
display:block;
width:50px;
height:50px;
margin-top:200px;
opacity: 0.6%;
}

a#arrow_left{
float:left;
background: url('../images/arrowleft1.jpg') no-repeat;
position: relative;
z-index: 100;
}

a#arrow_right{
float:right;
background: url('../images/arrowright1.jpg') no-repeat;
position: relative;
z-index: 100;
}

.trans {
zoom: 1;
filter: alpha(opacity=50);
opacity: 0.5;
}

#maximage { 
height: 100%; 
width: 100%;
position: absolute;
top: 0;
left: 0;
z-index: -5000; 
 }

#maximage img {
width: 100%;
height: 100%;
position: absolute;
top: 0;
left: 0;
z-index: -5000; 
}

#pages {
margin:0px;
width:100%;
padding:0px;
bottom:0;
position:fixed;
text-align:center;
height:40px;
}

#pages #content {
margin:0;
font-size: 18px;
}

#content {
width:100%;
padding:0px;
background: url('../images/transparent.jpg') repeat;
overflow:hidden;
}

.product {
padding:0px 0px 0px 0px;
}

.contact {
padding:40px 0px 120px 0px;
}

#nav {
margin:0px auto 0px auto;
width:912px;
padding:0px;
text-align:center;
overflow:hidden;
}

#menu {
clear:both;
width:369px;
margin:0 auto;  
}

#menu li {
font-family: Palatino, "Palatino Linotype", "Palatino LT STD", "Book Antiqua", Georgia, serif;
float:left;
width:auto;
background: #A68538 repeat;
margin-right:0px;
cursor:pointer;
}

#menu li#contact {
margin:0;
border-left: none;
}

li {
background: #A68538;
list-style: none;
border: 1px solid #000000 ;
width:150px;
text-align:center;
padding:10px;
display:inline;
}

#copy {
width:700px;
margin: 0 auto 0 auto;
}

em {
font-style: normal;
font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:40:36.263

试试这个[http://jsfiddle.net/AxjND/](http://jsfiddle.net/AxjND/) 它应该也可以调整大小，但它会在调整大小时重新启动幻灯片。

这是主要的变化

```
$(document).ready(function() {
    if ($(window).width() * .66625 < $(window).height()) {
    $('#maximage').cycle({
        fx: 'scrollHorz', 
        speed: 1000,
        timeout: 7000,
        width: $('#maximage').width(),
        height: $('#maximage').width() * .66625,
        fit: 1,                
        prev: '#arrow_left',
        next: '#arrow_right'
    });
    } else {
    $('#maximage').cycle({
        fx: 'scrollHorz',
        speed: 1000,
        timeout: 7000,
        width: $('#maximage').height() / .66625,
        height: $('#maximage').height(),
        fit: 1,                
        prev: '#arrow_left',
        next: '#arrow_right'
    });
    }
    if ($(window).width() > $('#maximage').width()) {
        $('#maximage').css({'left': (($(window).width() - $('#maximage').width()) / 2) + 'px'});
    } 
```

和

```
function resizeBg() {
        $('#maximage').cycle('destroy');
        if ($(window).width() * .66625 < $(window).height()) {
    $('#maximage').cycle({
        fx: 'scrollHorz',
        speed: 1000,
        timeout: 7000,
        width: $(window).width(),
        height: $(window).width() * .66625,
        fit: 1,                
        prev: '#arrow_left',
        next: '#arrow_right'
    });
    } else {
    $('#maximage').cycle({
        fx: 'scrollHorz',
        speed: 1000,
        timeout: 7000,
        width: $(window).height() / .66625,
        height: $(window).height(),
        fit: 1,                
        prev: '#arrow_left',
        next: '#arrow_right'
    });
    }
    if ($(window).width() > $('#maximage').width()) {
        $('#maximage').css({'left': (($(window).width() - $('#maximage').width()) / 2) + 'px'});
    }

    }

    $(window).resize(function() {
        resizeBg();
    }).trigger("resize"); 
```

# python - How do I convert a array into a string using str(a[i]) in python

> ID：12536768
> 
> 赞同：-1
> 
> 时间：2012-09-21T19:10:40.493
> 
> 标签：python

I can convert an array into a string using `str.join` but my assignment asks me too convert each element of the array using `str(a[i])` and then append them together.

I am completely lost on how to do this. Any help would be awesome!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T19:12:32.657

你正在尝试做：

```
>>> str(lis)
'[1, 2, 3, 4, 5]' 
```

这是错误的，因为您需要应用于`str()`单个元素而不是数据结构本身（相当于`lis.__str__()`），因此循环遍历元素并应用于`str()`单个元素。

**解决方案：**

可读版本：

```
>>> lis1=[]
>>> for item in lis:
    lis1.append(str(item))         #append the `str()` version of each item to lis1

>>> lis1
['1', '2', '3', '4', '5']       

>>> ''.join(lis1)
'12345' 
```

使用生成器：

```
>>> ''.join(str(x) for x in lis)
'12345' 
```

使用`map()`：

```
>>> lis=[1,2,3,4,5]
>>> ''.join(map(str,lis))
'12345' 
```

`map()`将作为第一个参数传递的函数应用于作为第二个参数传递的迭代的每个项目，并返回一个列表（在 python 3.x 中返回一个地图对象）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:13:04.067

假设您从 list 开始`a`，请创建一个新的（空） list `b`。在每次迭代中循环`a`附加`str(element)`到的元素。在 b 上`b`使用。`str.join`微笑。

# php - MOD_Rewrite 指令用于实现包罗万象的重定向

> ID：12536769
> 
> 赞同：1
> 
> 时间：2012-09-21T19:10:43.600
> 
> 标签：php, apache, mod-rewrite

在我的网站中，有三到四种类型的 URL（每种可以有不同的参数来表示不同的页面）。它们就像`http://foo.com/users/username`, `http://foo.com/questions/question_text`,`http://foo.com/new_question`等。

我`mod_rewrite`用来重写来自客户端的 URL，即`http://foo.com/users/username`变成`http://foo.com/users?username=username`，然后这个请求转到`http://foo.com/users`，剩下的就交给它了。

现在我想要这样，除了这 3-4 个预定义模板，如果有任何其他请求，比如`http://foo.com/abracadabra`，用户应该被重定向到主页`http://foo.com/`。有没有这样的指令可以实现这个包罗万象的重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:30:41.437

很长的路要走：

```
RewriteEngine On
# If the request isn't actually a file
RewriteCond %{REQUEST_FILENAME} !-f
# If the request isn't actually a directory
RewriteCond %{REQUEST_FILENAME} !-d
# If the request isn't specifically for favicon.ico (though the first 
# RewriteCond should take care of this, it's in the first .htaccess file
# I grabbed to verify)
RewriteCond %{REQUEST_URI} !=/favicon.ico
# Change the request from whatever the user entered to "/"
RewriteRule ^(.*)$ / 
```

但你真的不应该这样做。如果您实际提供 404 错误，并且如果请求的页面不存在，则提供自定义错误页面会更友好。此外，如果您这样做并且您的网站必须通过第三方安全扫描，您将为报告生成大量误报安全漏洞。

# assembly - 查找指令的跳转地址

> ID：12536770
> 
> 赞同：0
> 
> 时间：2012-09-21T19:10:45.663
> 
> 标签：assembly, mips

我正在尝试查找以下指令的跳转地址：

指令“j”位于地址：PC = 11000000 01010101 11111111 00001100

我将如何找到跳转地址？

# emacs - Emacs Helm（任何东西）：自动完成排除了所需的候选人。为什么？

> ID：12536774
> 
> 赞同：2
> 
> 时间：2012-09-21T19:11:05.037
> 
> 标签：emacs

我的主目录中有一个名为`.gitconfig`. 当我尝试用`helm-mode`激活的 Emacs 打开这个文件时，这个文件最终是不匹配的，因为我键入它。

在 minibuffer 中，我开始输入路径 ( `C-x C-f`)

```
Find file: /home/.g 
```

它告诉我：

```
.gconf
.gitconfig
.gnome2-private 
```

等等

但是，只要我键入`i`（即键入`/home/.gi`最终键入`.gitconfig`），Helm`.gitconfig`就会从自动完成列表中删除并给我留下`.gnome2-private`.

为什么会这样？如何让 Helm 从不从我希望打开文件的当前目录中排除文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:47:41.953

重新创建您指定的目录结构后，我无法重现此问题。

如果你克隆在[这里](https://github.com/emacs-helm/helm)找到的 helm github repo ，然后执行 `./emacs-helm.sh`，它仍然是 repro 吗？如果没有，您可以添加回您的配置，直到它添加？这将是一个错误。

此外，最好提交一个 helm issue 并在那里进行讨论。

# entity-framework - EF Code First - 指向另一个表的多个属性

> ID：12536775
> 
> 赞同：2
> 
> 时间：2012-09-21T19:11:10.837
> 
> 标签：entity-framework, foreign-keys, code-first, navigation-properties

我有一对简单的类在 EF 4.1 的 Code First 中生成数据库：

```
public class User
{
    public int UserId { get; set; }
    public string UserName { get; set; }
}

public class Purchase
{
    public int PurchaseId { get; set; }
    public int UserId { get; set; }
    public int? SalespersonUserId { get; set; }

    public User User { get; set; }
    public User SalespersonUser { get; set; }
}

public class NewItemsDataContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Purchase> Purchases { get; set; }
} 
```

在我的程序中，我创建并向其写入一些数据。

```
class Program
{
    static void Main(string[] args)
    {
        Database.SetInitializer<NewItemsDataContext>(new DropCreateDatabaseIfModelChanges<NewItemsDataContext>());

        using (NewItemsDataContext sadc = new NewItemsDataContext())
        {
            sadc.Users.Add(new User());

            sadc.SaveChanges();
        }
        using (NewItemsDataContext sadc = new NewItemsDataContext())
        {
            sadc.Purchases.Add(new Purchase() { UserId = 1 });
            sadc.SaveChanges();
        }
        using (NewItemsDataContext sadc = new NewItemsDataContext())
        {
            var sql = sadc.Purchases.Include(p => p.User);
            foreach (Purchase purchase in sql)
                Console.WriteLine(purchase.User.UserId.ToString());
        }
    }
} 
```

请注意，当我读回购买记录时，我得到了 purchase.User 为空的异常——也就是说，.Include 没有为用户提取任何内容。现在，如果我忽略我的 OnModelCreating 中的 salespersonUser 导航属性（或者只是将其注释掉）：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Purchase>().Ignore(p => p.SalespersonUser);

    base.OnModelCreating(modelBuilder);
} 
```

该代码有效，并且用户加载到 .Include 中。

当 SalespersonUser nav 属性被忽略时，创建的数据库看起来与您期望的一样。Purchase 表有PurchaseId、UserId 和SalespersonId。但是，一旦您重新添加 SalespersonUser nav 属性（停止忽略它），您最终会在表中得到另外两个键：User_UserId 和 SalespersonUser_UserId（以及原始的 UserId 和 SalespersonUserId）。

此外，生成的 SQL 明确显示了问题所在。

没有导航属性：

```
{SELECT 
[Extent1].[PurchaseId] AS [PurchaseId], 
[Extent1].[UserId] AS [UserId], 
[Extent1].[SalespersonUserId] AS [SalespersonUserId], 
[Extent2].[UserId] AS [UserId1], 
[Extent2].[UserName] AS [UserName]
FROM  [Purchases] AS [Extent1]
INNER JOIN [Users] AS [Extent2] ON [Extent1].[UserId] = [Extent2].[UserId]} 
```

并使用 nav 属性：

```
{SELECT 
[Extent1].[PurchaseId] AS [PurchaseId], 
[Extent1].[UserId] AS [UserId], 
[Extent1].[SalespersonUserId] AS [SalespersonUserId], 
[Extent2].[UserId] AS [UserId1], 
[Extent2].[UserName] AS [UserName], 
[Extent1].[SalespersonUser_UserId] AS [SalespersonUser_UserId]
FROM  [Purchases] AS [Extent1]
LEFT OUTER JOIN [Users] AS [Extent2] ON [Extent1].[User_UserId] = [Extent2].[UserId]} 
```

请注意它是如何提取 UserId，但与 User_UserId 连接的，以及左连接。SalespersonUserId 甚至没有在联接中引用。写入记录后在数据库内部设置了UserId，但User_UserID为空。因此，没有什么可加入的，我们为包含的用户获得 null。

在我看来，这是 EF 中的一个错误，但它可能有设计原因。如果是这样，有人可以为我清理一下，也许可以描述一些可以解决它的流畅的 API 吗？我有点偏爱我的导航属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:20:21.040

EF 在您的导航属性方面遇到问题 - 这就是它生成额外 FK 的原因。

尝试添加这个流畅的映射，这样你就可以明确地将 FK 映射到 nav 属性关系：

```
 modelBuilder.Entity<Purchase>()
            .HasOptional(p => p.SalespersonUser)
            .WithMany()
            .HasForeignKey(p => p.SalespersonUserId);

        modelBuilder.Entity<Purchase>()
            .HasRequired(p => p.User)
            .WithMany()
            .HasForeignKey(p => p.UserId); 
```

# mysql - MySql 复杂查询按日期过滤

> ID：12536778
> 
> 赞同：0
> 
> 时间：2012-09-21T19:11:22.363
> 
> 标签：mysql, sql

我正在尝试查看是否可以在 mysql 中执行特定查询，而不必求助于基于应用程序的过滤和多个查询。

基本上，我有一个客户表，我有一个每个人的证书表（包括那些不是我的客户）

每个客户可以有多个证书，我在每个证书上都有到期日期。

我希望能够选择那些证书即将到期（在 2 周或更短时间内）并且没有另一个到期日期更长的证书的客户。

第一部分很简单，我在两个表之间执行基于 ssn 的内部连接，其中 where 子句指定从现在到现在 + 2 周的日期终止日期，如下所示：

```
 select certs.ssn, certs.cert_num, certs.cert_start, certs.cert_finish 
   from certs 
  INNER JOIN customers  ON certs.ssn = customers.ssn 
  where certs.cert_finish < Date_ADD(now(), INTERVAL 14 DAY) 
   and certs.cert_finish > now() 
```

但是，我找不到排除那些拥有其他证书有效期较长的客户的方法。

你们有什么想法吗？我正在考虑基于 max(cert_finish) 的子查询，仅针对上一个查询返回的那些 ssns。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:17:15.363

您可以使用 GROUP BY 和 HAVING 子句来做到这一点：

```
select customers.ssn, certs.cert_num, certs.cert_start, certs.cert_finish
from customers INNER JOIN
     certs
     ON certs.ssn = customers.ssn
group by customers.ssn
having sum(case when certs.cert_finish < Date_ADD(now(), INTERVAL 14 DAY) and 
                     certs.cert_finish > now()
                then 1 else 0
           end) > 0 and  -- has soon to expire certicate
       sum(case when certs.cert_finish > Date_ADD(now(), INTERVAL 14 DAY)
                then 1 else 0
           end) = 0      -- has no certificate that will expire later 
```

如果您需要其他客户信息，请将其用作子查询并连接回客户表。

# asp.net-mvc-4 - 配置文件提供程序在 MVC4 ASP.net 中不起作用

> ID：12536782
> 
> 赞同：1
> 
> 时间：2012-09-21T19:11:37.457
> 
> 标签：asp.net-mvc-4, asp.net-profiles

我的 web.conf 文件如下：

```
 <connectionStrings>
    <add name="PaDBCon" connectionString="Data Source=(LocalDb)\v11.0;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|Pa.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings>
...
<profile>
      <providers>
        <clear />
        <add name="ProfilesProvider"
             type="System.Web.Profile.SqlProfileProvider"
             connectionStringName="PaDBCon"
             applicationName="PaWeb" />
      </providers>
      <properties>
        <add name="FirstName" type="String"/>
        <add name="LastName" type="String"/>
        <add name="Site" type="String"/>
      </properties>
    </profile> 
```

但是我收到一个错误“未找到配置文件默认提供程序”。如果我取出提供程序部分，它会创建一个 aspnetdb.mdf，它不会在 Visual Studio 中打开，但我希望提供程序与我的用户和角色一起存储在我的 Pa.mdf 数据库中。关于如何将配置文件保存在与用户帐户和角色相同的数据库中的任何想法？

编辑：使用时

```
<providers>
<clear />
<add name="ProfilesProvider"
             type="System.Web.Providers.DefaultProfileProvider"
             connectionStringName="PamperDBCon"
             applicationName="PamperWeb" />
      </providers> 
```

我收到错误消息 - 无法加载类型“System.Web.Providers.DefaultProfileProvider”。

编辑：作为下面优秀答案的附录。此[链接](http://blog.osbornm.com/archive/2010/07/21/using-simplemembership-with-asp.net-webpages.aspx)有助于添加更多解释。帮助解决了我剩下的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T15:46:38.793

ASP.NET MVC 4 使用新的`SimpleMembershipProvider`. 以下是如何将自定义字段添加到自动生成的模板和用户配置文件。

1.  使用 Internet 模板创建新的 ASp.NET MVC 4 应用程序
2.  导航到`~/Models/AccountModel.cs`文件并将字段添加到`UserProfile`类中：

    ```
    [Table("UserProfile")]
    public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }

        // New fields added to store profile information
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Site { get; set; }
    } 
    ```

3.  将新字段添加到`RegisterModel`视图模型：

    ```
    public class RegisterModel
    {
        [Required]
        [Display(Name = "User name")]
        public string UserName { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string Password { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = "Confirm password")]
        [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
        public string ConfirmPassword { get; set; }

        // New fields added to store profile information
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Site { get; set; }
    } 
    ```

4.  修改`~/Views/Account/Register.cshtml`视图以允许用户在注册时输入这些附加字段：

    ```
    @model MvcApplication1.Models.RegisterModel
    @{
        ViewBag.Title = "Register";
    }

    <hgroup class="title">
        <h1>@ViewBag.Title.</h1>
        <h2>Create a new account.</h2>
    </hgroup>

    @using (Html.BeginForm()) {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary()

        <fieldset>
            <legend>Registration Form</legend>
            <ol>
                <li>
                    @Html.LabelFor(m => m.UserName)
                    @Html.TextBoxFor(m => m.UserName)
                </li>
                <li>
                    @Html.LabelFor(m => m.FirstName)
                    @Html.TextBoxFor(m => m.FirstName)
                </li>
                <li>
                    @Html.LabelFor(m => m.LastName)
                    @Html.TextBoxFor(m => m.LastName)
                </li>
                <li>
                    @Html.LabelFor(m => m.Site)
                    @Html.TextBoxFor(m => m.Site)
                </li>
                <li>
                    @Html.LabelFor(m => m.Password)
                    @Html.PasswordFor(m => m.Password)
                </li>
                <li>
                    @Html.LabelFor(m => m.ConfirmPassword)
                    @Html.PasswordFor(m => m.ConfirmPassword)
                </li>
            </ol>
            <input type="submit" value="Register" />
        </fieldset>
    }

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    } 
    ```

5.  更新 AccountController 中的 Register 操作，以便在创建新用户时存储这些附加信息：

    ```
    [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { FirstName = model.FirstName, LastName = model.LastName, Site = model.Site });
                WebSecurity.Login(model.UserName, model.Password);
                return RedirectToAction("Index", "Home");
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
    ```

6.  点击`Ctrl+F5`启动应用程序并创建一个新用户

7.  数据库中的`UserProfile`表将填充其他字段。

8.  最后，当您需要访问某些用户（例如当前经过身份验证的用户）的这些属性时：

    ```
    using (var context = new UsersContext())
    {
        UserProfile profile = context.UserProfiles.First(x => x.UserName == User.Identity.Name);
        // TODO: do something with the user profile
    } 
    ```

# php - Javascript 取得 PHP 脚本的进展

> ID：12536783
> 
> 赞同：6
> 
> 时间：2012-09-21T19:11:45.053
> 
> 标签：php, javascript, ajax

我需要在 html-page 和 php-script 上提供 js 之间的交互。
- 使用 AJAX。
好的。但问题是 php-script 执行了很长时间，我需要知道这个脚本处理的状态（例如 60% 完成）
我该怎么办？创建 2 个 php 脚本（客户端和服务器）并对 client.php 执行 ajax-request，这将通过套接字或其他方式向 server.php 发出请求？有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:14:59.637

1.  Ajax 调用 php 脚本并返回该脚本正在运行的信息。
2.  主脚本创建 lock.file。
3.  从 cron 调用的脚本正在检查 lock.file 是否存在并运行正确的脚本。
4.  正确的脚本将当前进度保存到 progress.txt 中。
5.  Ajax 正在读取 progress.txt，当进度为 100% 时返回脚本处理完成的信息。

编辑：感谢贾斯汀指出超时问题；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:13:16.873

如果您让执行处理的脚本偶尔将其状态写入文件会怎样。制作第二个脚本，它将读取文件并返回原始文件的状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T19:24:36.563

您永远不应该在 HTTP 会话中完全执行长时间运行的进程。

解决这个问题的一个简单而常见的方法是消息队列。基本上，您让您的 UI 将请求排队到数据库表中，然后让外部守护进程处理该队列。

要提供反馈，请让守护程序定期用它当前正在处理的行的状态更新表。然后，您的 javascript 代码可以向脚本发出 AJAX 请求，该脚本从数据库中检索该工作项的状态并将其显示给用户。

请参阅：[使用 ajax 处理较长的服务器端操作？](https://stackoverflow.com/questions/1189350/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T19:21:59.213

如果您想真正花哨，请将 php 脚本的输出写入标准输出，并通过管道捕获它。这将需要使用 exec() 或 proc_open() (http://php.net/manual/en/function.proc-open.php) 运行 php 脚本并将输出通过管道传输到文件中（或者如果你想额外花哨，使用 node.JS 来监听该数据）

有很多方法可以做到这一点：

*   节点.JS
*   每 x 秒执行一次 Ajax 查询
*   META/Javascript 页面重新加载
*   一个定期重新加载其中状态的 iframe。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T19:46:46.887

在你的`process.php`：

```
// 1st task
$_SESSION['progress'] = 0;

// your code for the first task here ...

// 2nd task
$_SESSION['progress'] = 10;

// you code for 2nd task ...

// 3rd task
$_SESSION['progress'] = 17;

// continue ...

// everything finished?
$_SESSION['progress'] = 100; 
```

在你的`progress.php`：

```
// simply output
echo $_SESSION['progress']; 
```

现在从您的客户端，只需向您的 发出请求`progress.php`，接收号码并将其提供给您的进度条...

没有自己检查，但希望它有效！:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T19:25:23.810

您可以使用 PHP 的输出缓冲（请参阅[ob_flush](http://php.net/manual/en/function.ob-flush.php)）来刷新脚本中某些点的内容并调整您的 JavaScript 以便它使用刷新的内容。我相信您的 AJAX 调用中的 readyState 在刷新时不会设置为 4，因此您必须自己处理（请参阅[本文](https://stackoverflow.com/questions/2164330/if-you-flush-the-content-ob-flush-of-an-ajax-request-the-content-will-get-loa)）。我认为它比写入文件并检查其内容要好得多。

# javascript - 在 iframe 中加载脚本

> ID：12536785
> 
> 赞同：2
> 
> 时间：2012-09-21T19:11:47.583
> 
> 标签：javascript, jquery, iframe

我有一个脚本，例如：

```
<script> document.body....make something and draw many things in the browser </script> 
```

我想在 iframe 中执行沙盒。如何在 iframe 中加载这段 javascript？

我正在尝试不起作用的方法：

```
document.getElementById('previewFrame').contentWindow.document.body.innerHTML = "<script language='javascript'></script>"; 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:19:25.783

命名框架并执行

```
window.frames["framename"].document.write('<script>...<\/script>');
window.frames["framename"].document.close(); 
```

# javascript - Youtube API - 如何删除事件监听器？

> ID：12536793
> 
> 赞同：1
> 
> 时间：2012-09-21T19:12:21.770
> 
> 标签：javascript, youtube-api, youtube-javascript-api

我阅读了[Youtube JS API](https://developers.google.com/youtube/js_api_reference)，尤其是关于**事件的部分**

您可以使用 player 方法添加事件侦听器`addEventListener`

例如 ：

```
function onPlayerStateChange(event) {
    alert('YT player is now on state code ' + event.data);
}

player.addEventListener("onStateChange", "onPlayerStateChange"); 
```

我的问题是：

*   有人知道从播放器中**删除**其中一个事件侦听器的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:30:55.073

我不相信有通过 ActionScript 3 嵌入式播放器公开的 removeEventListener() 方法。您总是可以将注册的回调变成无操作，如下所示：

```
window.onPlayerStateChange = function() {}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:56:26.497

最后，我添加事件处理程序如下：

```
player.addEventListener("onStateChange", function(evt) {
    onPlayerStateChange(evt);
}); 
```

然后声明一些函数：

```
function state_handler1(evt) {
   /* do something */
}   

function state_handler2(evt) {
   /* do something else */
}

// Assign onPlayerStateChange to one of the functions
// (can be switched over later)
var onPlayerStateChange = state_handler1; 
```

# javascript - 在手机中设置默认主页

> ID：12536799
> 
> 赞同：1
> 
> 时间：2012-09-21T19:12:45.007
> 
> 标签：javascript, mobile

我环顾四周，找不到任何最近的答案：是否可以使用代码（JS、PHP 等）设置移动浏览器的主页（在 iphone/android 上：safari/chrome/browser/etc） ) ?

谢谢

# java - 通过java中的方法查找时间执行

> ID：12536806
> 
> 赞同：0
> 
> 时间：2012-09-21T19:13:14.277
> 
> 标签：java, timing

我在一个 Java 项目中工作，我们没有使用任何分析工具。

有没有办法在不使用任何分析工具的情况下找出方法执行所需的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:15:04.673

你为什么不使用类似的东西：

```
int startTime = System.currentTimeMillis();
methodCall();
int endTime = System.currentTimeMillis();
int totalTime = endTime - startTime;
System.out.println("Time to complete: " + totalTime); 
```

然后您可以添加 /1000 或其他任何内容来根据需要格式化时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:16:12.493

在开始之前和结束时捕获 System.currentTimeMillis() 减去 System.currentTimeMillis()。您将能够知道您的方法执行需要多少时间。

```
void fun(){
  long sTime=System.currentTimeMillis();
  ...
  System.out.println("Time Taken to execute-"+System.currentTimeMillis()-sTime+" milis");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:11:58.333

这是一个捕获时间的示例程序：

```
package com.quicklyjava;

public class Main {

/**
 * @param args
 * @throws InterruptedException
 */
public static void main(String[] args) throws InterruptedException {
    // start time
    long time = System.nanoTime();
    for (int i = 0; i < 5; i++) {
        System.out.println("Sleeping Zzzz... " + i);
        Thread.sleep(1000);
    }

    long difference = System.nanoTime() - time;
    System.out.println("It took " + difference + " nano seconds to finish");

 }

} 
```

这是输出：

```
Sleeping Zzzz... 0
Sleeping Zzzz... 1
Sleeping Zzzz... 2
Sleeping Zzzz... 3
Sleeping Zzzz... 4
It took 5007507169 nano seconds to finish 
```

# mongodb - MongoDB GridFS 是存储大量文件（pdf、xls、doc、dwg 等）的好解决方案吗？

> ID：12536815
> 
> 赞同：1
> 
> 时间：2012-09-21T19:14:16.377
> 
> 标签：mongodb, gridfs, nosql

目前，我们在文件系统中为我们的 ERP 系统存储了一些文件，但是构建文件夹结构并查询它们很麻烦。1000 个文件中有 10 个。所有 ERP 模块都使用 mysql。

我希望带有一些元数据（例如 GridFs）的“桶”类型的存储能让事情变得更容易。例如：

```
 {"module" : "quotation", "id" : 57894, "file" : "acme_inc_rfq.pdf"}
    {"module" : "quotation", "id" : 57894, "file" : "machine_dwg.dwg"}
    {"module" : "quotation", "id" : 57894, "file" : "data_sheet.xls"}
    {"module" : "po", "id" : 74896, "file" : "our_rfq.xls"} 
```

所以我可以查询module=quotation where id=57894 并获取这3个文件的列表，并在它们上显示链接和其他操作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:35:09.697

GridFS 非常适合存储大文件。本质上，MongoDB 甚至会自动`ObjectId`为新文档生成字段，包括 GridFS 文件。您必须在单独的集合中处理任何类型的虚拟文件夹结构，该结构显示在您的应用程序中。

有关更多信息，请参阅[MongoDB GridFS](http://www.mongodb.org/display/DOCS/GridFS)。

# php - 如何使用 PHP 和 MYSQL 从嵌套模型集中删除节点

> ID：12536820
> 
> 赞同：2
> 
> 时间：2012-09-21T19:14:39.293
> 
> 标签：php, mysql

我的问题是使用 PHP 和 MYSQL 在嵌套模型集中删除节点的正确方法是什么。就我而言，我必须将所有大于节点的左值递减 2 以删除的左值。但是我对接下来的步骤很困惑。您的回答将不胜感激。

这是我的功能：

```
public function deleteNode($id,$left,$right)
{
    //?

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:05:29.273

我刚刚从 Mike Hillyers 那里找到了解决方案

```
public function delete_node($id)
{

    $query = $this->db->query("
        SELECT node.label
        FROM menus AS node,menus AS parent
        WHERE node.lft BETWEEN parent.lft AND parent.rft AND parent.id = $id
        GROUP BY node.label
        ORDER BY node.lft
    ");

    if($query->num_rows() > 1)
    {
        $this->db->trans_start();
        $this->db->query("LOCK TABLE $this->table WRITE");
        $this->db->query("SELECT @myLeft := lft, @myRight := rft, @myWidth := rft - lft + 1 FROM $this->table WHERE id = $id");
        $this->db->query("DELETE FROM $this->table WHERE lft = @myLeft");
        $this->db->query("UPDATE $this->table SET rft = rft - 1, lft = lft - 1 WHERE lft BETWEEN @myLeft AND @myRight");
        $this->db->query("UPDATE $this->table SET rft = rft - 2 WHERE rft > @myRight");
        $this->db->query("UPDATE $this->table SET lft = lft - 2 WHERE lft > @myRight");
        $this->db->query("UNLOCK TABLES");
        $this->db->trans_complete();

        if ($this->db->trans_status() === FALSE)
        {
            return false;
        }
        else
        {
            return true;
        } 
    }
    else
    {
        $this->db->trans_start();
        $this->db->query("LOCK TABLE $this->table WRITE");
        $this->db->query("SELECT @myLeft := lft, @myRight := rft, @myWidth := rft - lft + 1 FROM $this->table WHERE id = $id");
        $this->db->query("DELETE FROM $this->table WHERE lft BETWEEN @myLeft AND @myRight");
        $this->db->query("UPDATE $this->table SET rft = rft - @myWidth WHERE rft > @myRight");
        $this->db->query("UPDATE $this->table SET lft = lft - @myWidth WHERE lft > @myRight");
        $this->db->query("UNLOCK TABLES");
        $this->db->trans_complete();

        if ($this->db->trans_status() === FALSE)
        {
            return false;
        }
        else
        {
            return true;
        }    
    }

} 
```

# excel - 以编程方式计算 Excel 数组公式时遇到问题

> ID：12536822
> 
> 赞同：4
> 
> 时间：2012-09-21T19:14:42.493
> 
> 标签：excel, excel-formula, array-formulas

我正在使用 MATLAB 程序在 excel 表中写入值。我还在使用公式在单元格中写入值（例如，MATLAB 程序写入`=AVERAGE(A1:A10)`一个单元格并将其转换为适当的值（即，当我打开工作表时，我看不到上面的公式文本，而是值）。

但是，我在编写数组公式（带有大括号的公式）时遇到了麻烦。通常用户通过按`Ctrl`++组合`Shift`输入它们`Enter`，出现花括号并计算出适当的值。但是，当我从 MATLAB 程序中编写用大括号括起来的这些公式时，不会计算值，我只看到公式文本（周围有大括号）。
看来我无法通过简单地将数组公式写入单元格来模拟`Ctrl`++`Shift`效果。`Enter`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T19:27:49.260

Excel 会将以 开头的值自动转换`=`为`.formulas`. 要保存数组公式，您需要直接写入`FormulaArray`范围的属性。

**更多细节：**

如果您使用的是普通公式，那么您在 VBA 中有两个选项。您可以像这样设置单元格的值或公式属性：

```
Range("A3").value = "=Sum(A1:A2)"
Range("A3").Formula= "=Sum(A1:A2)" 
```

使用数组公式时，您不能使用这些方法中的任何一种，您需要将其存储到单元格的不同区域中：

```
Range("A3").FormulaArray = "=Sum(A1:A2)" 
```

当用户按下`Ctrl`++`Shift`时，`Enter`他们告诉 excel 将`.value`单元格发送到 . `FormulaArray`单元格的部分。

否则默认情况下，当 excel 看到`=`我分配的符号`.value`时`.formula`

无论如何，这都是相对于 excel 对象模型的，即使它是在 VBA 中。

既然我已经进入了那个细节，我相信matlab的`xlswrite`函数只写入单元格的值，而不能写入这个子属性，我可能错了。

这可能在 MATLAB 中有效（未经测试）

```
mlrange='A3'; % or similar

Excel = actxserver ('Excel.Application');
Excel.Workbooks.Open(filename);
TargetSheet = get(Excel.sheets,'item','A');
TargetSheet.Activate
ran = Excel.Activesheet.get('Range',mlrange);
ran.FormulaArray = '=Sum(A1:A2)' 
```

# joomla - 带有 azuresql 数据库的用于 Azure 网站的 Joomla 似乎已损坏

> ID：12536827
> 
> 赞同：0
> 
> 时间：2012-09-21T19:15:01.103
> 
> 标签：joomla, azure, azure-web-app-service

我一直在尝试使用应用程序库中的安装在 Azure 网站上创建一个 joomla 网站。

我遇到的第一个问题是 /tmp 文件夹和 /var/logs 必须更改。在那之后很好，我尝试安装一个模板，但我必须制作一个 .user.ini 文件来设置更高的上传限制。

当尝试安装主题时，它会让我退出 joomla 并登录返回到扩展安装程序页面，其中只有 joomla 横幅。我必须退出并登录才能回到管理页面。

一切似乎都破碎了。我是不是配置错了，还是适用于 Windows Azure 的 Joomla 对每个人都坏了？

# php - 如何获取控制器操作的 URL？

> ID：12536832
> 
> 赞同：0
> 
> 时间：2012-09-21T19:15:25.160
> 
> 标签：php, url, controller, action, cakephp-2.2

我有一个看起来像这样的链接：

```
<a class="btn btn-primary edit" 
   href="Personas/details/<?php echo $persona['Persona']['id']; ?>" 
   data-original-title="Editar">

    <i class="icon-pencil icon-white"></i>
</a> 
```

如您所见，我正在手动编写链接的控制器和操作。有什么办法可以让它不那么脆弱吗？

就像是：

```
<a href="Url.Action("Personas", "Details", array('id', 1);" >Asdf</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:18:28.407

使用：[Html->url](http://book.cakephp.org/1.3/en/view/1448/url)，完全符合您的要求。

# vba - goto块不工作VBA

> ID：12536836
> 
> 赞同：1
> 
> 时间：2012-09-21T19:15:40.343
> 
> 标签：vba, excel, error-handling

**摘要**：我想做一些基本的错误处理

**问题**：当我单步执行代码时，即使没有错误，我的“错误”块数据也会运行

- 我对 VBA 中的错误处理非常陌生，不明白为什么除了我指示代码进入块之外运行错误块中的代码。提前致谢！

**代码**：

```
Function getReports()

    startJournal = Sheets("Runsheet").Range("B5")
    endJournal = Sheets("Runsheet").Range("E5")

    If startJournal = 0 Or endJournal = 0 Then

        GoTo Error

    End If

    'bunch of code

Error:
    MsgBox ("Error Statement")

End Function 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T19:17:01.030

您需要`Exit Function`在错误标签之前。
即代码应该只在出现错误的情况下点击标签（eh），否则退出。

```
Function getReports() 
on error goto eh
    startJournal = Sheets("Runsheet").Range("B5")
    endJournal = Sheets("Runsheet").Range("E5")

    If startJournal = 0 Or endJournal = 0 Then

        GoTo Error

    End If

    'bunch of code

Exit Function

eh:
    MsgBox ("Error Statement")

End Function 
```

查看您的代码，您可以将其编写为

```
Function getReports(startJournal as integer, endJournal as integer) as Boolean
    If startJournal = 0 Or endJournal = 0 Then
        msgbox "startJoural or endJournal should not be 0."
        exit function  '** exiting will return default value False to the caller
    End If

    'bunch of code
getReports = True
End Function 
```

在呼叫方

```
if getReports(Sheets("Runsheet").Range("B5"), Sheets("Runsheet").Range("E5")) then
   call faxTheReport   '** This function will be called only if getReports returns true.
end if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:38:23.100

以下是我通常如何处理 VBA 代码中的错误。这取自一个自动化 Internet Explorer 实例（`IE`变量）的类中的代码。`Log`用于通知用户正在发生的事情。该变量`DebugUser`是一个布尔值，当我运行代码时我将其设置为 true。

```
Public Sub MyWorkSub()

    On Error GoTo e

    Nav "http://www.somesite.com"

    DoSomeSpecialWork

    Exit Sub
e:
    If Err.Number = -2147012894 Then
        'timeout error
        Err.Clear
        Log.Add "Timed Out... Retrying"
        MyWorkSub
        Exit Sub
    ElseIf Err.Number = -2147023170 Or Err.Number = 462 Or Err.Number = 442 Then
        RecoverIE
        Log.Add "Recovered from Internet Explorer Crash."
        Resume
    ElseIf Err.Number = 91 Then
        'Page needs reloading
        Nav "http://www.somesite.com"
        Resume 'now with this error fixed, try command again
    End If

    If DebugUser Then
        Stop 'causes break so I can debug
        Resume 'go right to the error
    End If

    Err.Raise Err.Number

End Sub 
```

# magento - 安装我们的 Magento 扩展时，有没有办法接收触发器？

> ID：12536841
> 
> 赞同：0
> 
> 时间：2012-09-21T19:16:04.177
> 
> 标签：magento

我们想知道我们的扩展是否安装在 Magento 服务器上，或者至少是从 Magento Connect 下载的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:36:24.347

Magento 安装脚本只是普通的 PHP 代码。您可以轻松地将呼叫添加[`curl`](http://php.net/manual/en/curl.examples-basic.php)到[`file_get_contents(...)`](http://php.net/manual/en/function.file-get-contents.php)您自己的服务器。

Magento 甚至[将 curl 包装在自己的界面](http://docs.magentocommerce.com/Varien/Varien_Http/Varien_Http_Adapter_Curl.html)中，因此这是非常可行的。

我认为，没有真正的技术原因向您自己的服务器发出请求是相当不礼貌的，所以我建议在您的配置中添加一个选项，就像其他应用程序提供一个选项以发送匿名使用统计信息时一样它们已安装。

# facebook - Facebook 用随机 URL 邀请好友

> ID：12536842
> 
> 赞同：-1
> 
> 时间：2012-09-21T19:16:05.503
> 
> 标签：facebook, facebook-javascript-sdk

我需要跟踪将其他用户推荐到我的网站的用户。所以我希望每当用户从 facebook 邀请他的朋友时，邀请链接都包含他的`userid`. **是否可以使用随机url**发送邀请。

例如：现在用户获得了**http://example.com**的邀请链接，因为这是我在我的应用程序站点 url 中指定的。

我希望邀请链接为**http://example.com?referrer=joe**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:04:46.917

> 我希望邀请链接为[http://example.com?referrer=joe](http://example.com?referrer=joe)

而“乔”将是这里的谁或什么？如果是用户发送请求——你已经有了他的 id，它在请求对象的详细信息中`from`。

如果您想传递任何其他参考数据 - Requests 对话框具有该`data`参数。您可以在其中放置任何文本数据，最长可达 255 个字符。当用户遵循请求时，您将获得他们正在执行的请求 id[s]——然后您可以从 API 读取请求详细信息，您也会`data`从那里获得您输入的值。

请参阅文档：[https](https://developers.facebook.com/docs/reference/dialogs/requests/) ://developers.facebook.com/docs/reference/dialogs/requests/和[https://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-21T19:42:28.587

想象一下，你有 JS 函数：

```
function invite(){

//number from 0 to 9
var i = Math.floor((Math.random()*10)); 

//get random param
var param = arrayOfDefinedParams[i]; 

//define request URL
var requestUrl = "https://www.facebook.com/dialog/apprequests?app_id=<APP_ID>&message=<YOUR_MESSAGE>&redirect_uri=<URL_SET_IN_APP_DASHBOARD>/?param="+param;

//show modal window with request URL and random param
myWindow=window.open(requestUrl,'','width=400,height=300');

myWindow.focus();

} 
```

您现在要做的就是绑定`invite()`到`onclick`任何元素上的事件；）

# python - 尽管有明确的颜色参数，游戏循环的一次迭代中的所有矩形都绘制相同的颜色

> ID：12536843
> 
> 赞同：0
> 
> 时间：2012-09-21T19:16:05.337
> 
> 标签：python, sdl, pygame

我正在用 Pygame 写一个简单的玩具。当您按下主行上的一个键时，它会发出一点粒子。

```
class Particle():
    x = 0
    y = 0
    size = 0
    colour = (255, 255, 255)
    rect = None
    def __init__(self, x, y, size, colour):
        self.x = x
        self.y = y
        self.size = size
        self.colour = colour # Particle has its own colour 
        self.rect = pygame.Rect(self.x, self.y, self.size, self.size)

class Burst():
    x = 0
    y = 0
    colour = (255, 255, 255)
    count = 0
    sound = None
    particles = []

    def __init__(self, x, y, colour, count, sound):
        self.x = x
        self.y = y
        self.colour = colour # Burst has its own colour, too - all its particles should have the same colour as it
        self.count = count
        self.sound = sound
        self.particles.append(Particle(self.x, self.y, 5, self.colour))

    def update(self):
        self.particles.append(Particle(random.randint(1, 30) + self.x, random.randint(1, 30) + self.y, 5, self.colour))
    def draw(self):
        global screen
        for p in self.particles:
            pygame.draw.rect(screen, p.colour, p.rect) # This draws the particles with the correct colours
            #pygame.draw.rect(screen, self.colour, (60, 60, 120, 120), 4) # This draws the particles all the same colour
            #screen.fill(p.colour, p.rect) # This draws the particles all the same colour 
```

您要查找的线在 Burst.draw 中。出于某种原因，只有未注释的才能正常工作。另外两条线，据我所知应该是一样的，只是正确地绘制了第一个爆发的粒子。任何后续的爆发都会改变屏幕上的所有粒子以匹配它们的颜色。

我可以提供更多代码，但没有更多的。基本上按键将 Bursts 添加到一个数组中，并且我每一步通过该数组调用 update() 和 draw()。

有谁知道我做错了什么，然后不小心修复了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:48:27.900

因为屏幕中的所有粒子都属于同一个集合 Burst.particles。每次处理 Burst 时，您都在处理**所有**粒子，所有粒子都被涂上最后一种颜色。

只需将初始化`particles = []`移至`init`方法即可。

```
def __init__(self, x, y, colour, count, sound):
    ...
    self.particles = []
    self.particles.append(Particle(self.x, self.y, 5, self.colour)) 
```

**更新**

您正在使用 Java/C# 样式的编码类。您不应该将任何初始化放在类级别，除非它们是常量或类属性。

IE：

```
class Burst():

    class_attribute = 0       # declaration of class (static) attribute

    def __init__(self, ...):
        self.attribute = 0    # declaration of object (regular) attribute 
```

您不应该对将使用对象属性的属性进行类声明。只需删除两个类中 init 方法之前的所有声明。

# ruby - 如何正确销毁一个类

> ID：12536845
> 
> 赞同：4
> 
> 时间：2012-09-21T19:16:17.607
> 
> 标签：ruby, finalizer, resource-cleanup

在 Ruby 中，我有一个 DAO 类，该类由一个使管理连接更容易的类扩展，该类由一个表示和操作数据库中数据的类扩展，该类由另一个类进一步扩展。要使用动物比喻，它看起来像这样：

```
class Animal
 ...
end

class Mammal < Animal
 ...
end

class Feline < Mammal
 ...
end

class Cat < Feline
 ...
end

class Lion < Cat
 ...
end

... 
```

在 PHP 中，`__destruct`当您销毁/删除一个类时会运行一个方法。如果该类扩展另一个类，您只需像这样添加`parent::__destruct()`到该类的`__destruct`方法中：

```
public function __destruct() {
  // Clean up code for this class here
  ...

  // Execute clean up code for Parent class
  parent::__destruct();
} 
```

我可以对除`Animal`. 由于它没有扩展任何内容，因此该`parent::__destruct();`行不再有效。

但是，据我了解，Ruby 的对象没有这样的方法。可以设置终结器，但我决定只放入一个`cleanup`我可以在想要销毁/删除类时调用的方法。在我将课程设置为`nil`.

然而，这提出了一个新问题。如果方法总是被命名`cleanup`并且我调用`lion_instance.cleanup`了 ，我假设它调用了`Lion#cleanup`. 那么如何让它`cleanup`在课堂上调用`Cat`，然后`Feline`在链上调用呢？

或者这是一个错误的方法，你有一个更好的主意？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T19:49:20.090

Ruby 的习惯用法是让出一个可以工作的块，当块返回时，进行清理。Ruby 内置的 "File.open" 这样做：

```
File.open("/tmp/foo") do |file|
  file.puts "foo"
end 
```

当块结束时，文件会为您关闭，您无需执行任何操作。这是一个绝妙的成语。以下是你可以如何实现类似的东西：

```
class Foo

  def self.open(*args)
     foo = new(*args)
     yield foo
     foo.close
  end

  def initialize
    # do setup here
  end

  def close
    # do teardown here
  end

end 
```

并使用它：

```
Foo.open do |foo|
  # use foo
end 
```

`Foo#close`之后会自动引起`end`

* * *

这也适用于子类化。那是因为类方法和实例方法一样被继承。这是超类：

```
class Superclass

  def self.open(*args)
    o = new(*args)
    yield o
    o.close
  end

  def initialize
    # common setup behavior
  end

  def close
    # common cleanup behavior
  end

end 
```

和两个派生类：

```
class Foo < Superclass

  def initialize
    super
    # do subclass specific setup here
  end

  def close
    super
    # do subclass specific teardown here
  end

end

class Bar < Superclass

  def initialize
    super
    # do subclass specific setup here
  end

  def close
    super
    # do subclass specific teardown here
  end

end 
```

使用：

```
Foo.open do |foo|
  # use foo
end

Bar.open do |bar|
  # use bar
end 
```

* * *

如果您*确实*需要确保无论如何都会进行清理，请在类方法中使用*ensure子句：*

```
 def self.open(*args)
     foo = new(*args)
     begin
       yield foo
     ensure
       foo.close
     end
  end 
```

这样，即使块中存在异常，也会进行清理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T19:35:59.387

您可以使用[ObjectSpace.define_finalizer](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html#M001527)

就像是：

```
class Animal
  def initialize
    ObjectSpace.define_finalizer(self, proc { # your code })
   end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T23:23:22.597

好吧，因为没有人回答您关于该方法沿继承链向上移动的问题...

```
class Cat
  def rawr
    puts "rawr"
  end
end

class Kitty < Cat
  def rawr
    puts "meow"
    super
  end
end

Cat.new.rawr
"Rawr"

Kitty.new.rawr
"rawr"
"meow" 
```

在一个方法中，你可以通过调用 super 来访问超类的同名方法。

# vb.net - LINQ GroupBy 用法

> ID：12536850
> 
> 赞同：0
> 
> 时间：2012-09-21T19:16:28.560
> 
> 标签：vb.net, linq, lambda

我正在使用它来获取按日期排序的所有记录：

```
Dim myData = db.Tbl_Exercises.Where(Function(x) x.Exercise_Employee_ID).OrderBy(Function(x) x.Exercise_Create_Date) 
```

我用这个循环：

```
 For Each i As Tbl_Exercise In myData

        data.Add(New Object() {i.Tbl_Exercise_Type.ExType_Desc, i.Exercise_Duration})

    Next 
```

我怎样才能分组`i.Tbl_Exercise_Type.ExType_Desc`所以我没有重复？

我试过这个：

```
Dim myData = db.Tbl_Exercises.Where(Function(x) x.Exercise_Employee_ID).GroupBy(Function(x) x.Exercise_Type_ID) 
```

但是，我不知道如何访问循环中的变量。

谢谢你。

**编辑：**

```
<EmployeeAuthorize()>
Function ExercisePieChartData() As JsonResult

    ' get current employee's id
    Dim db1 As EmployeeDbContext = New EmployeeDbContext
    Dim user1 = db1.Tbl_Employees.Where(Function(e) e.Employee_EmailAddress = User.Identity.Name).Single()
    Dim empId = user1.Employee_ID

    Dim activityGroups = db.Tbl_Exercises.Where(Function(x) x.Exercise_Employee_ID = empId).GroupBy(Function(x) x.Exercise_Type_ID)

    Dim data = New List(Of Object)

    ' columns (headers)
    data.Add(New Object() {"Type", "Duration"})

    ' Iterate through each collection of activities, grouped by activity types
    For Each group In activityGroups

        ' Iterate through each Tbl_Exercise in the group
        For Each activity In group

            ' Do something with an individual element
            data.Add(New Object() {activity.Tbl_Exercise_Type.ExType_Desc, activity.Exercise_Duration})

        Next

    Next

    Return Json(data, JsonRequestBehavior.AllowGet)

End Function 
```

**编辑：**

```
 ' Iterate through each collection of activities, grouped by activity types
    For Each group In activityGroups

        Dim type = ""
        Dim duration = 0

        ' Iterate through each Tbl_Exercise in the group
        For Each activity In group

            ' Do something with an individual element
            type = activity.Tbl_Exercise_Type.ExType_Desc
            duration += activity.Exercise_Duration

        Next

        data.Add(New Object() {type, duration})

    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:13:29.990

**注意：**您的示例并不完全清楚，因此我将对您尝试使用我的解决方案做什么做一些假设。随着更多详细信息的提供，我将根据需要对其进行修改。

从外观上看，对于每个员工，您都在尝试获取他们执行的锻炼类型的集合，并且对于每种类型的锻炼，您还希望获得他们执行这些活动所花费的时间长度的集合。

我将假设一行`Tbl_Exercises`看起来像这样：

```
Public Class Tbl_Exercise

    Public Property Exercise_Employee_ID As Integer
    Public Property Exercise_Type_ID As Integer
    Public Property Exercise_Type_Desc As String
    Public Property Exercise_Duration As Integer

End Class 
```

您最后所做的尝试非常接近，您只需要在创建分组后实际使用它。

该`GroupBy`方法在这里返回给您的内容实际上是`IGrouping(Of Integer, Tbl_Exercise)`键是`Exercise_Type_ID`，值是按键分组的行的集合。要访问它们非常简单，您只需将分组视为一种嵌套集合：

```
 Dim activityGroups = db.Tbl_Exercises.Where(Function(x) x.Exercise_Employee_ID = employeeId).GroupBy(Function(x) x.Exercise_Type_ID)

    ' Iterate through each collection of activities, grouped by activity types
    For Each group In activityGroups

        ' Iterate through each Tbl_Exercise in the group
        For Each activity In group

            ' Do something with an individual element
            Console.WriteLine(activity.Exercise_Duration)

        Next

    Next 
```

显然，您可能想做一些不同于打印单个集合的事情，您可能希望将每个分组数据绑定到它们自己的分组，`DataGrid`以便您可以单独显示它们。您可能希望按日期对每个分组进行排序，或者您可能只需要每个组中的第一个元素。一旦您了解了分组的结构，就应该很容易准确地完成您正在寻找的内容。

**编辑：**

如果您只是想聚合分组中的某些字段，这很容易完成，无需求助于循环结果。只需在您的遗嘱上添加一个调用`Select`，您`GroupBy`就可以将结果投影到您想要的聚合形式中：

```
Dim data = db.Tbl_Exercises _
                .Where(Function(x) x.Exercise_Employee_ID = empId) _
                .GroupBy(Function(x) x.Exercise_Type_Desc) _
                .Select(Function(x)
                            Return New With {
                                ' x.Key will give you access to the value that the grouping is grouped by
                                .Exercise_Type_Desc = x.Key,
                                .TotalDuration = x.Sum(Function(y) y.Exercise_Duration)
                            }
                        End Function) 
```

# objective-c - 为什么在针对 ios 5 应用程序时使用特定于 ios 6 的选项仍然可以编译或不会崩溃？

> ID：12536851
> 
> 赞同：2
> 
> 时间：2012-09-21T19:16:52.113
> 
> 标签：objective-c, ios, xcode4, compilation, ios-simulator

我有一个 iOS 5 应用程序，现在使用 Xcode 4.5 构建，我在 iphone 5.0 模拟器上运行它。Xcode 目标正确设置为 iOS 5，而基本 sdk 是 iOS 6，在 Xcode 中无法更改。有一段代码使用了枚举。

> UIInterfaceOrientationMaskAll

我并没有真正在我的代码中使用那个枚举，这是我犯的一个错误，这导致我问了一些问题：

1.  我希望编译器停止构建，因为它从 iOS 6 开始可用，并告诉我找不到枚举。

2.  然后，通过在模拟器（iphone 5.0 模拟器）中运行应用程序，我还希望应用程序在处理该枚举时在运行时崩溃。

什么都没有发生，应用程序编译和运行都很好，你能解释一下我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:28:52.123

这是我的解释。

查看文档，所有`UIInterfaceOrientation`值都可从 iOS 6.0 获得。您应该从`UIApplication`'s中返回它们`supportedInterfaceOrientationsForWindow:`，这在 iOS 6.0 中也可用。

`UIApplication.h`由于您的基础 SDK 是 6.0，因此您拥有定义值的新版本的头文件 ( ) `enum`。这就是您的应用程序编译的原因。

当您在 iPhone 5.0 模拟器上运行应用程序时，没有人调用上述方法，因为它在 5.0 中不存在。即使您已经 subclassed`UIApplication`并且已经实现了该方法，它也不会被调用，因此您的应用程序不会因未知选择器而崩溃。它也可以由您的应用委托来实现。

此外，`enum`无论如何，该值只是编译后的一个数字，因此没有会​​导致问题的“处理”，这与缺少接口不同。

但如果我完全偏离了基地，我相信有人会纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:34:20.990

`UIInterfaceOrientationMaskAll`是`UIInterfaceOrientationMask`枚举定义的一部分

```
 typedef enum {
       UIInterfaceOrientationMaskPortrait = (1 << UIInterfaceOrientationPortrait),
       UIInterfaceOrientationMaskLandscapeLeft = (1 << UIInterfaceOrientationLandscapeLeft),
       UIInterfaceOrientationMaskLandscapeRight = (1 << UIInterfaceOrientationLandscapeRight),
       UIInterfaceOrientationMaskPortraitUpsideDown = (1 << UIInterfaceOrientationPortraitUpsideDown),
       UIInterfaceOrientationMaskLandscape =
       (UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight),
       UIInterfaceOrientationMaskAll =
       (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
       UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown),
       UIInterfaceOrientationMaskAllButUpsideDown =
       (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
       UIInterfaceOrientationMaskLandscapeRight),
    } UIInterfaceOrientationMask; 
```

它`UIApplication.h`在 new 的 the 和 now 部分中定义`ios 6 SDK`。由于它只是一个整数值，因此您的代码没有理由不应该编译或崩溃。

# spring - 如何使用 Spring JmsTemplate 延迟 JMS 消息到达队列

> ID：12536852
> 
> 赞同：1
> 
> 时间：2012-09-21T19:16:52.057
> 
> 标签：spring, jms, spring-jms, jmstemplate, jboss-messaging

我不想用接收器超时来阻止消息使用者，因为据我了解，这“绑定”了队列服务器池中的一个线程（并且我们配置了多个队列）。那么如何在没有自定义线程的情况下延迟发送消息（工作由 EJB 2 会话 bean 执行）？如果有帮助，JBoss Messaging 1.x 就是提供者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T12:49:57.820

[预定交付是 JBoss Messaging 的一项功能......](http://docs.jboss.org/jbossmessaging/docs/userguide-1.3.0.GA/html/configuration.html#conf.destination.queue.attributes.scheduledmessagecount)

```
long now = System.currentTimeMillis(); 
Message msg =
sess.createMessage();  
msg.setLongProperty(JBossMessage.JMS_JBOSS_SCHEDULED_DELIVERY_PROP_NAME, now + 1000 * 60 * 60 * 2); 
prod.send(msg); 
```

# perl - Perl - 在 Windows 中解析巨大的 *.gz 文件

> ID：12536859
> 
> 赞同：0
> 
> 时间：2012-09-21T19:17:16.003
> 
> 标签：perl, parsing, gzip

我正在尝试在 Windows 中使用 Perl 解析大 *.gz 文件。

在 Solaris 中，我可以使用以下构造：

```
my $cmd = "zcat $dir/$file|";
open FILE, $cmd or die "$cmd:$!";

while (<FILE>) {
.
.
.
} 
```

它工作正常。在 Windows 中，我尝试使用[IO::Zlib](http://search.cpan.org/perldoc?IO%3a%3aZlib)模块，例如

```
my $fh = IO::Zlib->new("$file", "rb");
while (my $line = $fh->getline()) {
.
.
} 
```

但我的内存不足了。（我的系统上有 4GB RAM）。有没有其他方法来解析大 *.gz 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:47:58.930

为什么不只安装[Gzip for Windows](http://gnuwin32.sourceforge.net/packages/gzip.htm)（包括`zcat`）？除了您遇到的内存问题之外，我发现管道`gzip`传输比使用`IO::Zlib`. （有几个原因。 `$fh->getline`是方法调用，而 Perl 的方法调用不是最快的。此外，在`gzip`外部运行利用了多任务处理，现在多核机器很常见，这一点很明显。）

出于某种原因，GnuWin 提供`zcat`了一个 shell 脚本，它在 Windows 下并不真正工作。但是您可以使用`gzip -cd`代替`zcat`（这也应该在 Unix 平台上工作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:41:47.453

`IO::Zlib->getline`将在“行”中读取。行定义为以行尾结尾的一堆数据。Perl 的“\n”会根据操作系统而变化。在 Unix（包括 Solaris 和 OS X）上，这是 012（换行符）。在 Windows 上，这是 015 012（回车 + 换行）。

如果你的文件有 Unix 换行符，`IO::Zlib->getline`当你在 Windows 上运行它时会寻找 Windows 换行符。它将尝试将整个文件读入内存。通常，您可以通过设置`$/`“输入记录分隔符”又名“行尾是什么”来解决此问题，`\015\012`但 IO::Zlib （通过[Compress::Zlib](https://metacpan.org/module/Compress%3a%3aZlib#GZIP-INTERFACE)）不支持`$/`向后兼容的原因。

幸运的是，所有这些混乱都被重写为 IO::Compress 和 IO::Uncompress。使用[IO::Uncompress::Gunzip](https://metacpan.org/module/IO%3a%3aUncompress%3a%3aGunzip)，你应该已经安装它作为它提供 Compress::Zlib ...

```
use IO::Uncompress::Gunzip;

# A block to isolate the local $/
{
    my $fh = IO::Uncompress::Gunzip->new($file);

    # the file being read has Unix newlines
    local $/ = "\012";

    # As an added bonus, the object works as a filehandle.
    while(my $line = <$fh>) {
        ...
    }
} 
```

# php - 如何在分类站点管理多个城市？

> ID：12536860
> 
> 赞同：1
> 
> 时间：2012-09-21T19:17:15.393
> 
> 标签：php, mysql, url-rewriting, web, subdomain

我在机密网站上工作。我为此使用 PHP 和 MySql。

在我的网站上，当用户选择他们的城市时，我想像子域样式一样更改网站网址。例如：-

`http://cityname.mywebsitename.com`

在我看来，实现这一点的唯一一件事就是为所有城市创建子域。但是，当您的城市超过 50 个时，管理起来会更加困难。您不能一次又一次地为多个域上传相同的脚本。我认为这样做不是一个好主意。我想为此使用一个脚本，以便我可以以简单的方式管理它。

如果您有任何想法，请分享..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:21:46.430

> 您不能一次又一次地为多个域上传相同的脚本。

你不需要。单个 Web 服务器可以支持多个域，并且可以在它们之间共享文件。例如，参见[Apache 设置“虚拟主机”的示例](http://httpd.apache.org/docs/2.4/vhosts/examples.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:25:01.913

只需设置一个 DNS 通配符，以便它们都转到同一个站点。然后使用 PHP，您可以找出当前正在使用的子域。如果您希望信息在所有人之间都可以访问，请确保他们都使用基于域而不是子域的 SESSION 或 COOKIE。

您还需要设置 apache 以接受通配符。这样所有子域都被定向到相同的代码。

```
$urlParts = explode('.', $_SERVER['HTTP_HOST']);
$subdomain = $urlParts[0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T19:32:18.740

我告诉你我是怎么做到的：

1.  在 DNS 中添加通配符子域记录

    *.domain.tld。在 1.2.3.4 中

2.  添加通配符虚拟主机

    ```
    <VirtualHost 1.2.3.4>
    DocumentRoot /var/www/vhosts/wildcard
    ServerAlias *.domain.tld.
    ServerName domain.tld
    ...
    </VirtualHost > 
    ```

3.  创建一个 .htaccess 将所有请求重定向到 FrontController（通常是 index.php）

    ```
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L] 
    ```

4.  从 php解析`$_SERVER['HTTP_HOST']`以获取城市名称并使用新的 FrontController（通常是 index.php）

我已经在带有 linux 和 plesk 的专用服务器或 VPS 上完成了它。通过对之前的基点进行一些修改，到处都是可能的；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T19:25:57.680

不要走使用 Apache Virtual Hosts 的路径......虽然您可以将脚本存储在一个公共文件夹中并通过 PHP 访问它们（`include('../common_scripts/file.php')`您仍然必须管理 vhost 配置。最好设置一个 DNS 通配符，然后有一个在运行查询时考虑当前 URL 的单个站点。

# google-apps-script - 如何使用工作表 URL 找到 DocsList 工作表 ID

> ID：12536862
> 
> 赞同：0
> 
> 时间：2012-09-21T19:17:21.827
> 
> 标签：google-apps-script

我希望能够从活动工作表中的单元格中获取电子表格 URL 值，并能够将该文件添加到特定文件夹中。我认为我唯一缺少的是一种通过 URL 将文件添加到文件夹或使用 URL 提取 DocsList 工作表 ID 的方法。

这是我正在使用的代码示例：

```
var rowNum = 1
var colLet = A
var findFolder = DocsList.getFolder(folderName);
var ssURL = SpreadsheetApp.getActiveSheet().getRange(colLet+rowNum).getValue();
var ssFileFindID = ?
ssFileFindID.addToFolder( findFolder ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:27:53.840

您将不得不使用字符串操作函数从 URL 获取电子表格的 id，例如假设电子表格 url 类似于下面给出的示例

```
https://docs.google.com/spreadsheet/ccc?key=xxxxxxxxxxxxxxxxxxxxxx&pli=1#gid=1

var ssURL = SpreadsheetApp.getActiveSheet().getRange(colLet+rowNum).getValue();
var ssFileFindID = ssURL.split('key=')[1].split('&')[0]; //this is ID of file 
```

希望以上提示对您有所帮助

# java - 在 Java 中杀死一个不合作的线程

> ID：12536865
> 
> 赞同：3
> 
> 时间：2012-09-21T19:17:43.730
> 
> 标签：java, multithreading, kill, interrupt

以下部分来自一个 JUnit 测试用例，它测试了`Sorter`. 它调用的唯一方法`Sorter`有 viz `sort()`。

如果排序过程花费的时间超过 2 秒，我想终止排序过程（因为我不关心任何花费超过 2 秒才能`sort()`说 500000的实现`Integers`）。

我是 Java 多线程的新手，在查看了 SO 上的所有其他线程（[如何杀死 java 线程？](https://stackoverflow.com/questions/4121470/how-to-kill-a-java-thread)和其他一些线程）之后，我认为以下是我问题的解决方案。**问题是，它会始终如一地工作，还是会出现任何问题？**我不在乎数组或它的内容，因为`reset()`它会重置它的内容。

我称之为不合作的原因是因为`s.sort()`我无法控制。

```
protected E[] arr;
@Test
public void testSortTArray() {
    boolean allOk = true;
    for (Sorter s : TestParams.getSorters()) {
        System.out.println("Testing: " + s.getName() + " with " + arrayLenToTestWith + " elems of type "
                + classOfElemType.getName());
        reset();
        long startTime = System.nanoTime();
        MyThread test = new MyThread(s, arr);
        test.start();
        try {
            test.join(TestParams.getTimeThreshold());
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        if (test.isAlive())
            test.interrupt();

        if (!test.isInterrupted()) {
            System.out.println("Time taken: " + ((System.nanoTime() - startTime) / (1000000)) + "ms");
            if (!isSorted(arr)) {
                allOk = false;
                System.err.println(s.getName() + " didn't sort array.");
            }
        } else {
            allOk = false;
            System.err.println(s.getName() + " took longer than .");
        }
    }
    assertTrue("At least one algo didn't sort the array.", allOk);
}

public class MyThread extends Thread {

    private Sorter s;
    private E[] arr;

    public MyThread(Sorter s, E[] arr) {
        this.s = s;
        this.arr = arr;
    }

    @Override
    public void run() {
        s.sort(arr);
    }
} 
```

**---编辑：答案---**

根据大家的评论：

*   不，我正在做的事情是不安全`Thread.interrupt()`的，因为它不会挂起线程，它只会设置它的中断状态，如果线程的`run()`实现没有检查，那是没用的。
    *   在这种情况下，下一个排序器的 sort() 将在同一个数组上调用（仍然由旧的“中断”线程排序），从而使事情变得不安全。
*   一种选择是创建一个单独`Process`的而不是`Thread`. A`Process`可以被杀死。
    *   显然，在这种情况下传递参数并不容易，因为它涉及一些 IPC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:26:03.670

正如您可能从您提到的其他问题中看到的那样，如果没有 Java 线程的合作，就不可能可靠地停止它，因为`interrupt()`只有在线程对其进行测试时（有意或无意地）才有效。

但是，可以杀死一个[进程](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)。如果您在单独的进程中生成每个排序算法，那么您可以强行杀死它。

缺点是与进程交互比与线程交互要困难得多，因为您没有共享变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T19:28:16.700

没有线程的合作，就没有可靠和安全的方法来阻止它。通过线程的协作，您可以使用线程支持的机制来中断或停止线程。线程只是不提供这种隔离......你必须使用多个进程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T19:40:13.687

这可能是 Thread.stop() 的情况。不过，请阅读 javadoc 中的免责声明，尤其是：

> **已弃用**. 这种方法本质上是不安全的。使用 Thread.stop 停止线程会导致它解锁所有已锁定的监视器（这是未经检查的 ThreadDeath 异常沿堆栈传播的自然结果）。如果以前受这些监视器保护的任何对象处于不一致状态，则损坏的对象将对其他线程可见，从而可能导致任意行为。停止的许多用法应该由简单地修改一些变量以指示目标线程应该停止运行的代码替换。目标线程应该定期检查这个变量，如果变量指示它要停止运行，则以有序的方式从它的run方法返回。如果目标线程等待很长时间（例如在条件变量上），则应使用中断方法来中断等待。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T19:21:54.893

> 它会始终如一地工作，还是会出现任何问题？

除了您需要正确处理线程中断外，它会起作用。 `thread.interrupt()`仅当该`sort`方法支持时才有效。我怀疑该方法不会调用`Thread.sleep()`,`wait()`或其他此类方法。因此它需要测试它是否在处理过程中被中断：

```
 while (!Thread.currentThread().isInterrupted()) {
     // do sort stuff
 } 
```

如果它不这样做，那么中断线程将不会停止处理。我肯定会`test.join();`在中断之后添加另一个，以确保线程在您开始另一个排序操作之前完成。

# jquery - 更改内部 HTML 后样式导航栏列表项

> ID：12536870
> 
> 赞同：0
> 
> 时间：2012-09-21T19:18:03.367
> 
> 标签：jquery, jquery-mobile

我在标题栏中有一个导航栏，它被正确初始化和设置样式。我遇到的问题是，当我更改 innerHtml 并调用 elem.navbar() 时，列表项没有设置样式。

这是附加到导航栏 html 的代码

```
var navbar = this.$(':jqmData(role="navbar")');
navbar.empty().append(this.templateNav(building.toJSON()));
navbar.navbar(); 
```

这是我正在使用的模板

```
<ul>
  <li><a href="#buildings/1/floors/1">1</a></li>
</ul> 
```

我的问题是如何让 jqm 在追加新的 html 后重新计算网格布局并重新设置列表项的样式？

前

![附加到 innerHTML 之前的导航栏](../Images/d24f220454732e2e640e7596db15cc97.png)

后

![附加到 innerHTML 后的导航栏](../Images/c84fb1dbbf170129777f90bd5ab9ecc6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:53:33.760

在不了解`templateNav`or的情况下`building`，这似乎对我有用：

*`building`JSON对象的样机和`templateNav`：*

```
buildingJson = [
  {"href":"foo.html",
   "title":"One"},
  {"href":"bar.html",
   "title":"Two"}          
]

function templateNav( json ){
  str = "";
  for( i = 0; i < json.length; i++){
    str += '<li><a href="'+json[i].href+'">'+json[i].title+'</a></li>';
  }
  return str;
} 
```

*更新`navbar`*

```
var navbar = this.$(':jqmData(role="navbar") ul');
navbar.empty().append(templateNav(buildingJson)); 
```

*HTML*

```
<div data-role="navbar">
  <ul>
    <li><a href="a.html">One</a></li>
  </ul>
</div><!-- /navbar --> 
```

我不确定您的代码是什么样的；如果您`ul`被 a 包裹`div`，`data-role=navbar`那么在您使用`empty`它之后，您需要确保`templateNav`将结果包裹在 a 中`ul`，或者更新选择器`navbar`以包含`ul`. `templateNav`在附加之前尝试记录以查看实际附加的内容。

无论如何，`navbar.navbar()`即使在动态更改 innerHTML 之后，似乎也没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:33:41.033

从 DOM 中删除导航栏元素。然后重新创建它并**触发****create**事件来处理新 HTML 标记中包含的所有插件的自动初始化。

以下脚本已成功测试：

```
var navbarparent = $('#navbar').parent();
$('#navbar').remove();
navbarparent.html("<div data-role=\"navbar\"><ul><li><a class=\"nav-li\" href=\"a.html\">Two</a></li><li><a class=\"nav-li\" href=\"a.html\">Three</a></li></ul></div>").trigger('create'); 
```

您可以在下面找到一个工作示例：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Navbar Test</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript">
            $(document).on('click', '.nav-li', function(e){
                var navbarparent = $('#navbar').parent();
                $('#navbar').remove();
                navbarparent.html("<div data-role=\"navbar\"><ul><li><a class=\"nav-li\" href=\"a.html\">Two</a></li><li><a class=\"nav-li\" href=\"a.html\">Three</a></li></ul></div>").trigger('create');
                return false;
            });
        </script>
    </head> 

    <body>
        <!-- /page -->
        <div data-role="page">
            <!-- /header -->
            <div data-role="header" data-theme="b">
                <h1>Dynamic Navbar</h1>
            </div>
            <!-- /content -->
            <div data-role="content">
                <div id="navbar" data-role="navbar">
                    <ul>
                        <li><a class="nav-li" href="test.html">One</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html> 
```

前： ![在此处输入图像描述](../Images/c8fd3a38ecfb315d2676ea9cb081ef4f.png)

后： ![在此处输入图像描述](../Images/0cdb1efc4881eb0a60b82ee56ca78e40.png)

我希望这有帮助。

# perl - 使用管道时 Perl 反引号

> ID：12536871
> 
> 赞同：0
> 
> 时间：2012-09-21T19:18:07.717
> 
> 标签：perl, sh, backticks

我在尝试捕获简单命令的输出时遇到了一些问题：

```
$timeTotal = `echo $timeTotal + $time | bc -l`; 
```

但我收到以下错误：

```
sh: +: not found
sh: Syntax error: "|" unexpected 
```

此命令在 bash 中完美运行，但似乎 sh 正在实际使用。一开始我认为问题在于管道的使用（尽管总和也没有得到很好的解释）。让我感到困惑的是，同一脚本中的以下命令不会导致错误并且可以正常工作：

```
my $time = `cat $out.$step | bc -l`; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T19:20:48.967

`$timeTotal`包含不应该的尾随换行符，因此您正在执行

```
echo XXX 
```

和

```
+ YYY | bc -l 
```

代替

```
echo XXX + YYY | bc -l 
```

你肯定错过了`chomp`某个地方。

您的命令中还有一个不合适的双引号。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-21T20:27:41.093

反引号已弃用。请改用`qx(..)`语法。

```
$timeTotal = qx(echo $timeTotal + $time | bc -l"); 
```

# php - How do i pass a mysql query result as a variable to be used in another query search?

> ID：12536875
> 
> 赞同：0
> 
> 时间：2012-09-21T19:18:20.437
> 
> 标签：php, mysql, html, ajax, database

Ok so basically I've got a product database. members search the database by clicking on categories of their choice.

These categories are spans which all trigger a javascript (ajax) function which calls a php query to find all of the subcategories of the span just clicked.

Those subcategories are outputted in a while loop which creates more spans which also trigger the same js function which will link back to the query.

The code below shows the output of the categories displayed based on the output of the database query.

```
 "<div id=\"div1\">";
while($row = mysql_fetch_array($result))
{
$spans++;

echo " <span id=\"$spans\"         
onclick='serverconnect(\"http://localhost/dreamweaver/Website/webdev/Code structure.php\", 
\"nya\")'> $row[1] </span>";    
 echo "<br />";
}

"</div>"; 
```

So let's say the output of this is:

HEALTH FITNESS EDUCATION LEISURE

How could i pass the span names as values for the next query so that whatever span is clicked on gets its appropriate value passed to the database search?

Would i have to somehow assign the contents of each span to a variable and then pass the variable to the javascript function which would then pass it to the query?

Im out of ideas as to how to do that, or if i should do it another way.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:26:59.093

Try replacing:

```
echo " <span id=\"$spans\"
   onclick='serverconnect(\"http://localhost/dreamweaver/Website/webdev/Code structure.php
   \", \"nya\")'> $row[1] </span>"; 
```

With:

```
echo " <span id=\"$spans\"
   onclick='serverconnect(\"http://localhost/dreamweaver/Website/webdev/Code
   structure.php?value=" . urlencode($row[1]) . "\", \"nya\")'> $row[1] </span>"; 
```

You may then retrieve the value in `$_GET['value']` after clicking the SPAN.

Note: I added some line breaks in the text for ease of reading, don't forget to remove them.

# java - 类实现接口应该只能添加同一个类的对象

> ID：12536884
> 
> 赞同：6
> 
> 时间：2012-09-21T19:19:02.583
> 
> 标签：java, generics

假设我有一个 Java 接口：

```
interface I {
    void add(I foo);
} 
```

，以及实现此接口的两个类 C 和 D。

有什么办法可以修改**界面**，我只能这样做：

```
C c = new C();
c.add(new C()); 
```

， 但不是

```
c.add(new D()); 
```

?

我在考试中有这个问题，但我唯一的想法是在方法的定义中使用*instanceof运算符：*

```
class C implements I {
    public void add(I foo) {
        if (foo instanceof C) {
            System.out.println("instance of C");
        } else {
            System.out.println("another instance");
        }
    }
} 
```

但是，我不知道如何修改界面以产生相同的效果。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T19:23:56.693

是的 - 你需要泛型：

```
interface I <T extends I<T>> {
    void add(T foo);
} 
```

要定义一个类来使用它，编码如下：

```
class C implements I<C> {
    @Override
    public void add(C foo) {
        //
    }
} 
```

请注意，没有办法阻止实现者对此进行编码（假设`D`也实现了`I`）：

```
class C implements I<D> {
    @Override
    public void add(D foo) {
        //
    }
} 
```

但是，只有当 class 的 coder`C`知道 class 的存在`D`并选择使用它时，这才是一个问题，如果他们专注于编码 class ，这不太可能`C`。

即使有这个警告，如果我设置这个考试问题，我希望以上是答案。

# mysql - 如何检查与 MySQL db 的连接没有死，并避免不必要地（关闭和）重新创建连接？

> ID：12536888
> 
> 赞同：0
> 
> 时间：2012-09-21T19:19:16.630
> 
> 标签：mysql, connection, monitoring

如何检查与 MySQL db 的连接没有死，并避免不必要地（关闭和）重新创建连接？说，我正在 Bash 脚本中创建和使用连接。

### 编辑

我所说的“死”是指，也许最后一次使用创建的连接是在 1 小时前，在服务器端，它可能会以某种方式杀死非活动连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:42:32.593

检查的唯一方法是尝试使用它。

`SELECT 1`您可以在执行实际命令之前先发制人地执行基本命令。

# mongodb - Mongodb $and 不返回任何结果

> ID：12536889
> 
> 赞同：0
> 
> 时间：2012-09-21T19:19:24.083
> 
> 标签：mongodb, mongodb-query

这是一个与[$and query 返回 no result](https://stackoverflow.com/questions/8767484/and-query-returns-no-result)类似的问题，但是那里的答案在这种情况下并不适用。

我有以下查询：

```
{
  $and: [
    {
      ownerId: "505b832c975a5c3ca6e9523b"
    },
    {
      privacyLevel: "Public"
    }
  ]
} 
```

我的收藏有 16 个文档，所有这些文档都是“Public”，其中 7 个具有上面的 ownerId。子查询行为正确并返回正确的文档，因此我希望该查询有 7 个结果。

$and 查询什么也不返回，我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:31:34.893

如果您只是查询两个字段，则不需要 $and 运算符。您的查询将只是：

```
.find({ownerId: "505b832c975a5c3ca6e9523b", privacyLevel: "Public"}) 
```

# c++ - 替换数组C++中文本的函数

> ID：12536891
> 
> 赞同：-1
> 
> 时间：2012-09-21T19:19:32.250
> 
> 标签：c++, string, function, variable-assignment

我有问题。我需要创建一个名为 replaceText 的函数，用新文本替换目标文本。不包括空字符，如果没有找到 targetText，则没有文本替换。

参数是两个数组targetText[]和replacementText[]。这是一个作业，我不能使用 str。到目前为止，这是我的代码。

```
void SimpleString::replaceText(char targetText[], char replacementText[])
    {
        for ( int i = 0; i < MAX_LIST; i++)
        {
            if( replacementText[i] > MAX_LIST)
            {
                throw SimpleStringOverflowException("SimpleStringOverflowException: Resulting SImpleString too large.");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:04:18.710

干得好：

```
 void replace_text(char targetText[], char replacementText[])

{

    int i;
        if(strlen(replacementText) > 0 )
    {

        for(i=0;i<strlen(replacementText);i++)
        {           
            targetText[i] = replacementText[i];
        }
        for(i = strlen(replacementText) ; i < strlen (targetText) ; i++)
            targetText[i] = '\0';
    }

} 
```

我假设您可以使用 strlen ....对吗？如果不让我知道...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:40:52.770

亲爱的，就是这么简单，一个一个地分配字符。即targetText[i]=replacementText[i]
现在只迭代i 直到它结束replacementtext 或targettext。

# android - 加快 android 的动态视图创建

> ID：12536892
> 
> 赞同：2
> 
> 时间：2012-09-21T19:19:40.340
> 
> 标签：android, performance, view

我创建了一个按设计工作的 android 应用程序。但是，onCreate() 使用动态（不是 xml）来创建我 80% 的布局，这些布局由按钮组成。构建整个布局大约需要 3-4 秒，太慢了。有什么建议可以加快这个过程吗？

我尝试过的事情：1\. 使用更少的视图对象，它并没有提高速度，并且使用 listview 和 linearview 的收益非常小 2\. 我尝试将我的一些移动到 onResume()，没有收益 3\. 使用序列化程序来保持我的视图共享偏好不起作用

有什么方法可以加快动态视图的创建速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:31:18.813

尝试将布局中的所有代码放入 Activity 的 runOnUiThread() 方法中。您可以在 onCrete() 或 onResume() 中使用它（onResume 总是在 Activity 出现时调用）。试试这样：

```
runOnUiThread(new Runnable() {          
        @Override
        public void run() {
            // Do stuff from layout
        }
    }); 
```

这样，代码将在线程中运行，它将释放 Activity 以显示自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:25:59.117

您是否考虑过使用列表视图并将自定义视图从 xml 膨胀到可回收的转换视图中？

我不知道这是否适用于您的情况，因为我不知道您的代码做了什么，但这似乎是使用适配器和某种 List 元素的正确位置

# jquery - 使用 css3 转换时重叠，任何防止这种情况的方法

> ID：12536895
> 
> 赞同：3
> 
> 时间：2012-09-21T19:19:44.320
> 
> 标签：jquery, css, z-index, transform

这是我的jsfiddle

[http://jsfiddle.net/WLJUC/](http://jsfiddle.net/WLJUC/)

请注意当您单击旋转较大的容器时如何与较小的容器重叠。

这是有问题的，因为我试图创建一个图片库，您可以在其中单击以旋转和放大图像。这不会是一个问题，但有些图像很长很瘦。我希望旋转的 div 将其下方的 div 向下推，而不是重叠。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:33:46.003

好的，所以蓝色不应该碰到红色。这是一个使用边距丢弃蓝人的示例：http: [//jsfiddle.net/WLJUC/27/](http://jsfiddle.net/WLJUC/27/)

我不知道你的照片细节以获得完美的例子，但一般你可以通过JS检查旋转，然后使用蓝色div上的边距将其降低一定量。（加入一些过渡只是为了更好地可视化它）

*（旧的，无用的答案）你有一个 z-index 的标签，但你没有在你的例子中使用它。应用相对于两者的位置，z-index: 0 到红色，z-index: 1 到蓝色将停止我快速测试的重叠：http: [//jsfiddle.net/WLJUC/10/](http://jsfiddle.net/WLJUC/10/)*

# objective-c - Cocoa webview - html5视频全屏不起作用

> ID：12536897
> 
> 赞同：5
> 
> 时间：2012-09-21T19:20:00.823
> 
> 标签：objective-c, cocoa, webview, webkit, html5-video

我正在尝试使用集成的 webkit webview 构建一个 osx cocoa 应用程序来显示网页。

网页上有 html5 视频元素，用户应该能够全屏播放。但是全屏只是在山狮（10.8.2）上显示黑屏音频仍在播放，但在osx lion上它可以工作，这是一个错误还是我错过了什么。

最小样本：

脚步：

创建一个可可应用程序添加一个 webview 连接属性“web”并添加 webkit 框架

代码：

**`#AppDelegate.h`**

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>
@property (assign) IBOutlet NSWindow *window;
@property (weak) IBOutlet WebView *web;
@end 
```

**`#AppDelegate.m`**

```
#import "AppDelegate.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
  NSString *html = @"<html><body><video src=\"http://video-js.zencoder.com/oceans-clip.mp4\" controls></body></html>";
  [[self.web mainFrame] loadHTMLString:html baseURL:nil];
}
@end 
```

# **在 OSX 10.8.3 中修复：**

**问题似乎已在 OSX 10.8.3 中得到修复 全屏现在可以正常工作，即使没有像 OSX 10.8.2 之前那样的沙盒**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:31:55.493

我使用您发布的确切代码设置了一个项目。这对我来说确实失败了，只在全屏模式下显示黑屏。

然而，这似乎是 WebKit 的沙盒问题。沙盒化后，应用程序全屏按预期工作。（使用 10.8.2）

该应用程序是沙盒，不需要任何额外的权限来完成这项工作：

![在此处输入图像描述](../Images/d17a2332e674f3e187fb4721d4b85344.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-21T15:52:59.173

你能试试这个代码吗，希望它能和你一起工作..这适用于iphone，我想它适用于osx

头文件

```
UIWebView *webView; 
```

实施文件

```
NSString *html = @"<html><body><video src=\"http://video-js.zencoder.com/oceans-clip.mp4\" controls></body></html>";

webView =[[UIWebView alloc] initWithFrame:CGRectMake(14, 57, 670, 675)];
        [webView loadHTMLString:html baseURL:nil];
[self.view addSubview:webView]; 
```

# javascript - 如何从facebook的like按钮隐藏发送按钮但不隐藏添加评论并发送到facebook框架

> ID：12536900
> 
> 赞同：0
> 
> 时间：2012-09-21T19:20:23.643
> 
> 标签：javascript, css, facebook, facebook-graph-api, facebook-like

我正在开发一个添加了类似按钮的页面：

```
<html xmlns:fb="http://ogp.me/ns/fb#">
  ...

<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/it_IT/all.js#xfbml=1&appId=my_app_id";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

...

<div id="facebook" style="float:right;">
    <fb:like href="my_link_to_share" send="true" width="20" show_faces="true" font="verdana">
    </fb:like>
</div> 
```

通常它将是：

![在此处输入图像描述](../Images/67e4d7aa0dcb1ae6429b843cca1930c1.png)

我以这种方式正确隐藏了文本和发送按钮：

```
div#facebook{
    margin-top: 0;
    padding-top: 5px;
    width: 80px;
    overflow:hidden;
} 
```

但是当我点击喜欢按钮时，它应该出现：

![在此处输入图像描述](../Images/38762dd3481d0cb0567539603713f394.png)

但自从我放了`width:80px`，评论和分享框将采用该宽度。是否可以隐藏发送按钮和文本但保持框的大小？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:24:08.073

如果您真的只是希望隐藏发送按钮（而不是喜欢计数），那么只需在喜欢按钮创建页面上取消选中“发送按钮”并将布局更改为“按钮计数”：[https ://developers.facebook.com/文档/参考/插件/喜欢/](https://developers.facebook.com/docs/reference/plugins/like/)

# javascript - 网站的 3D 地图

> ID：12536915
> 
> 赞同：4
> 
> 时间：2012-09-21T19:21:31.320
> 
> 标签：javascript, html, google-maps

我正在尝试在网页上创建 3D 地图。Google Maps 和 Open Street Maps 提供了使用 2D 地图的 API。是否有可用于 3D 地图的 API？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T19:33:39.450

您可能想看看[WebGL Earth](https://sites.google.com/site/webglearth/)，一个基于 WebGL 的开源项目。[这是一个演示](http://data.webglearth.com/examples/custommap.html)。

以下是您可能感兴趣的其他链接：

*   [Mapbox GL JS](https://www.mapbox.com/mapbox-gl-js/example/3d-buildings/)
*   [七巧板](https://mapzen.com/products/tangram/),开源OpenGL地图
*   ArcGIS Web API 支持[3D 地图](https://developers.arcgis.com/javascript/latest/sample-code/get-started-sceneview/index.html)。
*   [wrld.js](https://www.wrld3d.com/wrld.js/latest/docs/api/)，也可以在[GitHub 上](https://github.com/wrld3d/wrld.js/tree/master)查看。
*   [cesium.js](https://cesiumjs.org)，也在[GitHub 上](https://github.com/AnalyticalGraphicsInc/cesium)。
*   [请参阅此问题](https://gis.stackexchange.com/questions/12859/what-are-my-options-for-3d-web-maps)以及其他建议！

**编辑**（08/2017）：删除了死链接（感谢@Pang！），添加了更新的链接。

# windows-8 - 有没有办法在调试器中查看 Windows 8 Store 应用程序的本地存储？

> ID：12536916
> 
> 赞同：5
> 
> 时间：2012-09-21T19:21:37.067
> 
> 标签：windows-8, local-storage, visual-studio-2012

在我的 Windows 8 商店应用程序中，我将所有数据保存在本地存储中，并且我需要调试数据更新。有什么方法可以从 Visual Studio 2012 调试器访问存储以查看应用程序当前使用的数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T19:34:33.280

为什么要查看调试器？您可以获取位置，然后使用 Windows 资源管理器查看文件。使用调试器获取位置

`Windows.Storage.ApplicationData.Current.LocalFolder;`

然后在 Windows 资源管理器中打开该位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T15:43:46.713

另一种方法是运行：

```
System.Diagnostics.Debug.WriteLine(Windows.Storage.ApplicationData.Current.LocalFolder.Path); 
```

它在输出窗口中显示了确切的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-09T16:12:27.980

如果您正在寻找不是您编写的应用程序安装的内容，您可以在 C:\Users[user-name]\AppData\Local\Packages[app-guid] 中查找。

# javascript - jQuery：用于ajax数据的对象文字中的数组

> ID：12536921
> 
> 赞同：1
> 
> 时间：2012-09-21T19:21:51.137
> 
> 标签：javascript, jquery, ajax

我有一个带有输入的表单，使用数组作为这样的名称：

```
<input type="text" name="answer[0]" /> 
```

当我做一个 ajax 发布并序列化数据的表单时，这些工作正常。现在我试图将一个动态对象传递给 jQuery ajax 数据，如果它要序列化表单，它将模仿它所获得的结构。这是我正在尝试的代码：

```
function sliderCalc(){
        var step = jQuery('[name="step"]').val();
        var max = jQuery('[name="max"]').val();
        var min = jQuery('[name="min"]').val();
        var count = (max - min) / step;
        var sliderData = {};
        for(i=0; i<=count; i++){
            var value = min + (step * i);
            sliderData.answers[i] = value; // key => value created here
        }
        return sliderData;
    } 
```

我收到此错误：

未捕获的类型错误：无法设置未定义的属性“0”

有没有人对此有很好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:25:43.120

您需要先创建 answers 属性，然后再分配数组元素：

```
sliderData.answers = new Array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:32:14.563

这将是创建的正确方法`sliderData`

```
 var sliderData = { answers: [] };
    for(i = 0; i <= count; i++) {
        var value = min + (step * i);
        sliderData.answers[i] = value; 
    } 
```

完整代码：

```
function sliderCalc() {
    var
        step = jQuery('[name="step"]').val(),
        max = jQuery('[name="max"]').val(),
        min = jQuery('[name="min"]').val(),
        count = (max - min) / step,
        sliderData = {
            answers: []
        },
        value = 0;

    for (i = 0; i <= count; i++) {
        value = min + (step * i);
        sliderData.answers[i] = value; // key => value created here
    }
    return sliderData;
}​ 
```

# symfony - symfony2：无法找到包含在 AppKernel 中的类

> ID：12536923
> 
> 赞同：4
> 
> 时间：2012-09-21T19:21:56.237
> 
> 标签：symfony

我有这个`app/AppKernel`：

```
<?php

use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new JMS\AopBundle\JMSAopBundle(),
            new JMS\DiExtraBundle\JMSDiExtraBundle($this),
            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
            new JMS\I18nRoutingBundle\JMSI18nRoutingBundle(),
            new FOS\UserBundle\FOSUserBundle(),
            new Sports\FrontendBundle\SportsFrontendBundle(),   // line 25             
            new Sports\UserBundle\SportsUserBundle(),
            new Sonata\DefaultBundle\SonataDefaultBundle(),
            new Sonata\DoctrineORMAdminBundle\SonataDoctrineORMAdminBundle(),
            new Sonata\AdminBundle\SonataAdminBundle(),
            new Sonata\BlockBundle\SonataBlockBundle(),
            new Sonata\CacheBundle\SonataCacheBundle(),
            new Knp\Bundle\MenuBundle\KnpMenuBundle(),
            new Stof\DoctrineExtensionsBundle\StofDoctrineExtensionsBundle()
        );

        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
#$bundles[] = new Acme\DemoBundle\AcmeDemoBundle();
            $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
            $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
            $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        }

        return $bundles;
    }

    public function registerContainerConfiguration(LoaderInterface $loader)
    {
        $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
    } 
```

而这堂课`src/Sports/FrontendBundle/SportsFrontendBundle.php`：

```
namespace Sports\FrontendBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class SportsFrontendBundle extends Bundle
{
} 
```

我得到这个错误：

> 致命错误：在第 25 行的 /home/tirengarfio/programacion/sports/app/AppKernel.php 中找不到类“Sports\FrontendBundle\SportsFrontendBundle”

这是我的`app/autoload.php`：

```
<?php

use Doctrine\Common\Annotations\AnnotationRegistry;

if (!$loader = @include __DIR__.'/../vendor/autoload.php') {

    $message = <<< EOF
<p>You must set up the project dependencies by running the following commands:</p>
<pre>
    curl -s http://getcomposer.org/installer | php
    php composer.phar install
</pre>

EOF;

    if (PHP_SAPI === 'cli') {
        $message = strip_tags($message);
    }

    die($message);
}

// intl
if (!function_exists('intl_get_error_code')) {
    require_once __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';

    $loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs');
    $loader->add('Sports',   __DIR__ . '/../src');
}

AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

return $loader; 
```

我的`composer.json`：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.1",
        "doctrine/orm": "2.2.*",
        "doctrine/doctrine-bundle": "dev-master",
        "twig/extensions": "dev-master",
        "symfony/assetic-bundle": "dev-master",
        "symfony/swiftmailer-bundle": "dev-master",
        "symfony/monolog-bundle": "dev-master",
        "sensio/framework-extra-bundle": "*",
        "sensio/distribution-bundle": "*",
        "sensio/generator-bundle": "*",
        "friendsofsymfony/user-bundle": "*",
        "jms/security-extra-bundle": "1.1.*",
        "jms/di-extra-bundle": "1.0.*",
        "jms/i18n-routing-bundle" : "1.0.*",
        "sonata-project/exporter" : "dev-master",
        "sonata-project/jquery-bundle" : "dev-master",
        "sonata-project/block-bundle" : "dev-master",
        "sonata-project/cache-bundle" : "dev-master",
        "sonata-project/admin-bundle" : "dev-master",
        "sonata-project/user-bundle" : "dev-master",
        "sonata-project/doctrine-orm-admin-bundle" : "dev-master",
        "stof/doctrine-extensions-bundle": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

任何想法？

科幻小说 2.1.1

哈维

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-24T16:23:33.483

对于将来的参考，如果您签出代码并直接复制供应商文件夹而不运行 Composer，可能会发生类似问题。

要排除自动加载问题，您可以简单地`install`在 symfony2 文件夹中运行（假设您`composer.phar`有）：

```
php composer.phar install 
```

这将从 composer.lock 文件（如果存在）安装项目依赖项，或者回退到 composer.json。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T10:09:46.747

这只是一个权限问题。我的捆绑文件夹不知何故获得了错误的权限。我将它们设置为 755，它解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T19:58:05.480

在您的 autoload.php 中，您需要以下内容：

```
$loader->add('Sports',   __DIR__ . '/../src'); 
```

除非您有 Sports 进入供应商？

============================================

所以只是为了确认你有：

运动的

运动/应用

运动/应用程序/控制台

体育/src

运动/src/Sports/FrontendBundle/SportsFrontendBundle.php

运动/供应商

Windows 还是 unix？运行控制台命令时出现错误？

# linux - Bash：如何在文件中保留与另一个文件中的行匹配的字段？

> ID：12536927
> 
> 赞同：3
> 
> 时间：2012-09-21T19:22:07.717
> 
> 标签：linux, bash, unix, terminal, grep

我有两个包含大量文本的大文件，我要做的是保留文件 A 中的所有行，这些行的字段与文件 B 中的字段匹配。

文件 A 类似于：

```
Name (tab)  #  (tab)  #  (tab)  KEYFIELD  (tab)  Other fields 
```

file BI 设法使用 cut 和 sed 以及其他东西基本上将其归结为一个列表字段。

所以目标是将文件 A 中的所有行保留在第 4 个字段中（它说 KEYFIELD），如果该行的字段与文件 B 中的行之一匹配。（不必完全匹配，所以如果文件 B 有Blah和文件A说Blah_blah，没关系）

我试着做：

```
grep -f fileBcutdown fileA > outputfile 
```

编辑：好的，我放弃了。我只是强行杀死了它。

有一个更好的方法吗？对于任何关心的人来说，文件 A 为 13.7MB，文件 B 缩减后为 32.6MB。

编辑：这是文件 A 中的示例行：

```
chr21 33025905 33031813 ENST00000449339.1 0 - 33031813 33031813 0 3 1835,294,104, 0,4341,5804, 
```

文件 B 中的示例行被删减：

```
ENST00000111111 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:09:21.220

您正在达到使用基本 shell 工具的极限。假设每行大约 40 个字符，文件 A 有 400,000 行，文件 B 有大约 1,200,000 行。您基本上是为文件 A 中的每一行运行 grep，并且每次执行都让 grep 遍历 1,200,000 行。这是您正在解析的 4800***亿***行。Unix 工具速度惊人，但即使是快速完成 4800 亿次的事情也会加起来。

最好使用 Perl 或 Python 等完整的编程脚本语言。*您将文件 B*中的所有行放在哈希中。您获取文件 A 中的每一行，检查第四个字段是否与散列中的某些内容匹配。

读几十万行？创建一个 10,000,000 条目哈希？Perl 可以在几分钟内解析这两者。

某事——在我的脑海中。你没有给我们太多的spects，所以我没有做任何测试：

```
#! /usr/bin/env perl

use strict;
use warnings;
use autodie;
use feature qw(say);

# Create your index
open my $file_b, "<", "file_b.txt";
my %index;

while (my $line = <$file_b>) {
    chomp $line;
    $index{$line} = $line;    #Or however you do it...
}
close $file_b;

#
# Now check against file_a.txt
#

open my $file_a, "<", "file_a.txt";
while (my $line = <$file_a>) {
    chomp $line;
    my @fields = split /\s+/, $line;
    if (exists $index{$field[3]}) {
         say "Line: $line";
    }
}
close $file_a; 
```

哈希意味着您只需读取一次 file_b 而不是 400,000 次。启动程序，去办公室厨房拿杯咖啡。（嗯！非乳制奶精！）当你回到办公桌时，它就会完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T06:42:09.610

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk fileB.txt fileA.txt 
```

内容`script.awk`：

```
FNR==NR {
    array[$0]++
    next
}

{
    line = $4
    sub(/\.[0-9]+$/, "", line)
    if (line in array) {
        print
    }
} 
```

或者，这是单线：

```
awk 'FNR==NR { array[$0]++; next } { line = $4; sub(/\.[0-9]+$/, "", line); if (line in array) print }' fileB.txt fileA.txt 
```

`GNU awk`还可以使用和执行`fileB.txt`您描述的预处理。如果您希望我将其构建到上述脚本中，您将需要提供此行的示例。`cut``sed`

* * *

**更新使用文件`HumanGenCodeV12`和`GenBasicV12`：**

像这样运行：

```
awk -f script.awk HumanGenCodeV12 GenBasicV12 > output.txt 
```

内容`script.awk`：

```
FNR==NR {
    gsub(/[^[:alnum:]]/,"",$12)
    array[$12]++
    next
}

{
    line = $4
    sub(/\.[0-9]+$/, "", line)
    if (line in array) {
        print
    }
} 
```

这成功打印`GenBasicV12`了可以在`HumanGenCodeV12`. 输出文件 ( `output.txt`) 包含 65340 行。该脚本只需不到 10 秒即可完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:39:57.070

`grep -f`即使对于中等大小的模式文件（< 1MB）似乎也很慢。我猜它会尝试输入流中每一行的每个模式。

一个对我来说更快的解决方案是使用 while 循环。这假设它`fileA`相当小（在您的示例中它是较小的），因此多次迭代较小的文件比多次迭代较大的文件更可取。

```
while read line; do
  grep -F "$line" fileA
done < fileBcutdown > outputfile 
```

请注意，如果匹配多个模式，此循环将多次输出一行。要解决此限制，请使用`sort -u`，但这可能会慢很多。你得试试。

```
while read line; do
  grep -F "$line" fileA
done < fileBcutdown | sort -u | outputfile 
```

如果您依赖于行的顺序，那么我认为您除了使用`grep -f`. 但基本上它归结为尝试 m*n 模式匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T02:31:02.990

使用以下命令：

```
awk 'FNR==NR{a[$0];next}($4 in a)' <your filtered fileB with single field> fileA 
```

# java - 无法在 2.3.4 上创建具有多行且没有拼写建议的 EditText

> ID：12536932
> 
> 赞同：4
> 
> 时间：2012-09-21T19:22:34.300
> 
> 标签：java, android, xml, android-edittext

我已经尝试了几个星期，但我无法让 EditText 使用多行**并且**没有拼写建议。

我需要输入不同的语言，所以自动更正肯定无法打开，但它似乎会干扰让它运行多行。

我可以让其中任何一个工作，但不能同时工作。

我试过了：

```
android:inputType="textFilter|textMultiLine|textNoSuggestions" 
```

和

```
.setInputType(InputType.TYPE_TEXT_VARIATION_NORMAL | InputType.TYPE_TEXT_VARIATION_FILTER | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

以及我在谷歌和这里找到的许多其他方法都没有奏效。也许它特定于我的操作系统版本？这是一个已知错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:34:27.037

我刚刚在 2.3.4 设备上亲自尝试过，对我来说，您的代码没有显示任何建议：

```
EditText testView = new EditText(context);
testView.setInputType(InputType.TYPE_TEXT_VARIATION_NORMAL | InputType.TYPE_TEXT_VARIATION_FILTER | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS);
mainLayout.addView(testView); 
```

因此，此问题可能特定于您正在测试的设备。

但是，您可以尝试使用 setRawInputType() 而不是 setInputType()。

您也可以尝试使用不应该显示任何建议的标志 InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD：

```
testView.setRawInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

# php - PHP 在本地工作，而不是在服务器上

> ID：12536934
> 
> 赞同：0
> 
> 时间：2012-09-21T19:23:21.073
> 
> 标签：php, codeigniter

我一直在本地使用 Codeigniter 开发自定义 CMS，我刚刚到了需要将其上传到登台服务器以进行更多测试的地步。

除了使用小部件系统的站点的侧边栏部分外，一切正常。我最初认为这只是 PHP 版本之间的差异，因为我在本地运行 5.4.4 而服务器是 5.3。将服务器升级到 5.4.7 后，侧边栏仍然没有出现。我没有收到任何错误，只是没有显示。

这是小部件库代码：

```
<?php
if (!defined('BASEPATH')) exit('No direct script access allowed');

class Widgets {

    private $_ci;
    protected $parser_enable = FALSE;

    public function __construct() {
        $this->widgets();
    }

    public function widgets(){
        $this->_ci =& get_instance();
    }

    public function build($view,$data=array()){
        $view = get_class($this).'/'.$view;
        $subdir = '';
        if (strpos($view, '/') !== FALSE)
        {
                // explode the path so we can separate the filename from the path
                $x = explode('/', $view);

                // Reset the $class variable now that we know the actual filename
                $view = end($x);

                // Kill the filename from the array
                unset($x[count($x)-1]);

                // Glue the path back together, sans filename
                $subdir = implode($x, '/').'/';
        }

        $widget_view = APPPATH.'widgets/'.$subdir.'views/'.$view.EXT;

        if(file_exists($widget_view)){
            $widget_view = '../widgets/'.$subdir.'views/'.$view.EXT;
            if($this->parser_enable){
                $this->_ci->load->library('parser');
               return $this->_ci->parser->parse($widget_view,$data,TRUE);
            }
            else{
                return $this->_ci->load->view($widget_view,$data,TRUE);
            }
        }

        return FALSE;
    }

    public function __get($var) {
        static $ci;
        isset($ci) OR $ci = get_instance();
        return $ci->$var;
    }
} 
```

有什么东西跳出来可能导致它不显示吗？

有什么我应该考虑使其兼容的，例如服务器模块吗？服务器上的什么可能会影响这一点？

编辑：

我的小部件位于以下路径中：

```
/public_html/application/widgets/recent_news/views/view.php 
```

`$widget_view = 'widgets/'.$subdir.'views/'.$view.EXT;`变量正在返回，`widgets/Recent_news/views/view.php`它被传递给：

```
if(file_exists($widget_view)){
    return $this->_ci->load->view($widget_view,$data,TRUE);
} 
```

$widget_view 中的应用程序路径在登台服务器上似乎不正确，因此 file_exists() 返回 false 并且不加载视图（无论如何都会有不正确的路径）。

我似乎无法让它读取正确的路径，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:50:24.450

如果是登台服务器，进入 php.ini 文件并设置

```
error_reporting = E_ALL | E_STRICT
display_errors = On 
```

这将输出它发现的任何错误，以便您对其进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:03:51.283

最终只需要`subdir = strtolower($subdir);`

感谢大家的帮助

# ruby-on-rails - Rails 初学者配置/routes.rb 问题

> ID：12536938
> 
> 赞同：0
> 
> 时间：2012-09-21T19:24:01.293
> 
> 标签：ruby-on-rails, ruby

我在理解实际路由到的配置/路由时遇到了一些麻烦。例如，假设我开始了一个全新的项目并生成了一个用户控制器并编辑了我的 config/routes.rb 看起来像这样：

* * *

```
config/routes.rb

SampleApp::Application.routes.draw do

match '/signup', to: 'users#new'

end 
```

* * *

我启动服务器，正如预期的那样，它说我的用户控制器中没有“新”操作。我创建一个：

* * *

```
 users_controller.rb

 class UsersController < ApplicationController

 def new
 end 
```

* * *

我刷新页面，正如预期的那样，它告诉我我需要一个用户/新模板。所以我的问题是：我的视图模板是否总是必须与“（控制器名称）/（动作名称）”格式的控制器和动作名称相同（在本例中为 users/new.html.erb）？如果控制器操作链接到站点的功能之一，是否不能将我的模板随机命名（例如 users/rubyonrailsmeetup.html.erb 而不是 users/new.html.erb）？

此外，默认情况下将“资源：用户”添加到 config/routes.rb 是否将视图模板文件名与我上面提到的行为相匹配，以便视图必须以其“控制器/操作”名称命名？

抱歉打扰了，我只是想弄清楚 Rails 的魔力是什么，什么不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:32:44.740

默认情况下，Rails 尝试使用与操作相同的名称来呈现模板，如果没有其他`render`或`redirect`在控制器操作中调用。`render :action`基本上，每个控制器操作的末尾都有一个隐式。

但是您可以通过添加显式渲染来轻松地覆盖它，例如，

```
render :rubyonrailsmeetup 
```

为清楚起见进行编辑：此调用`render`进入控制器代码，而不是 config/routes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:37:06.403

> 我的视图模板是否总是必须与“（控制器名称）/（动作名称）”格式的控制器和动作名称相同

这些是**默认值**`render :view_file_rel_path`，您可以通过在操作结束时给出来呈现操作中的任何**视图**

> 默认情况下将“资源：用户”添加到 config/routes.rb 是否与视图模板文件名匹配

**在routes.rb**中添加的任何内容都只与控制器直接相关，即它匹配请求并将其映射到控制器/动作。视图的逻辑只出现在动作代码中

# emacs - 如何在 Emacs 的多个缓冲区中镜像编辑操作？

> ID：12536942
> 
> 赞同：5
> 
> 时间：2012-09-21T19:24:20.260
> 
> 标签：emacs

我在 Emacs 中有两个并排打开的缓冲区。当我删除（或修改）第一个文件中的行时，我希望第二个文件接收相同的命令/光标位置。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:58:54.827

我所知道的与您所描述的最接近的是[多游标](https://github.com/emacsmirror/multiple-cursors)包，它非常酷，但它仅在单个缓冲区中实现多个游标。所以我想你可以：

1.  将其中一个缓冲区内容附加到另一个；
2.  使用我提到的包生成多个游标；
3.  拆分窗户；
4.  编辑掉；
5.  将附加的缓冲区内容移回其原始位置。

我怀疑会有相当多的黑客攻击，一个人可能能够扩展`multiple-cursors`到处理多个缓冲区，但我认为这会打开一大堆蠕虫。如果两个缓冲区处于不同的模式，并且您输入的键序列绑定到执行不同操作的不同命令怎么办？

# actionscript-3 - 库符号的自定义类中的 AS3 引用自定义属性

> ID：12536953
> 
> 赞同：1
> 
> 时间：2012-09-21T19:25:08.497
> 
> 标签：actionscript-3, oop

所以我已经通过 SO 进行了大量搜索，但无法找到这个问题的答案。我的符号库中有一个为动作脚本导出的影片剪辑，并且我已经为它编写了一个自定义类。除了在我将影片剪辑添加到舞台后尝试访问自定义私有属性时，它大部分都很好用。下面是一个例子：

```
package {

    public class MyMovieClip extends MovieClip {

        private var _isEnabled:Boolean = false;

        public function MyMovieClip():void {

            trace(this);
        }

        public function set isEnabled( b:Boolean ):void {

            _isEnabled = b;
        }

        public function get isEnabled():Boolean {

            return _isEnabled;
        }
    }
} 
```

然后我有另一个类，我在循环中将movieclip的实例添加到舞台：

```
package {

    public class MyOtherClass extends MovieClip {

        public var myMC:MyMovieClip;
        public var docClass:*;

        public function MyOtherClass( docRef:* ):void { // passing in a reference to the DocumentClass so I can access the stage
            docClass = docRef;
            init();
        }

        public function init():void {

            for(var i:int=0; i<6; i++) {

                var myMC:MyMovieClip = new MyMovieClip; // instantiate the movieclip which is exported for actionscript and has a custom class 
                //set a few native properties
                myMC.name = "myMC" + i; //setting the name so I can reference this movieclip after it's been added to stage
                myMC.y = myMC.height * i + 20;
                myMC.x = 20;
                myMC.alpha = .7;
            }

            dispatchEvent(new Event(MyOtherClass.MOVIECLIPS_ADDED)); // just to be safe, let's dispatch a custom event when all movieclips have been added
        }

        public function traceEnabled():void {

            trace(docClass.stage.getChildByName("myMC1").isEnabled); // this throws: 1119: Access of possibly undefined property isEnabled through a reference with static type flash.display:DisplayObject

        }
    }
} 
```

最后我在我的文档类中实例化 MyOtherClass：

```
package {

    public class DocumentClass extends MovieClip {

        public var myOtherClass:MyOtherClass;

        public function DocumentClass():void {

            addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        }

        public function onAddedToStage(e:Event):void {

            myOtherClass = new MyOtherClass(); // upon instantiation, init is called in MyOtherClass and all of my movieclips are added to the sage
        }
    }
} 
```

是什么赋予了？为什么 MyMovieClip 属性 isEnabled 在添加到舞台后无法访问？还有其他方法吗？（提前感谢您的帮助）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:00:33.253

在内部，a 的所有子项`DisplayObjectContainer`都被引用为`DisplayObject`，因此当您使用 时`getChildByName`，它会返回一个 DisplayObject。

为了在不导致编译时错误的情况下访问您的自定义属性，您需要将结果转换`getChildByName`为自定义属性的类。请参阅下面的代码。

然而，这不是您唯一的问题（尽管这是错误的原因，一旦您更正，您也会遇到运行时错误）。

在您的创建循环中，您没有添加`myMC`到显示列表中，因此调用 stage.getChildByName() 将返回 null，因为您的剪辑不在舞台上。

您也没有将 myOtherClass 添加到已发布代码的显示列表中。

此外，实际上并不需要存储对文档类的引用。只需添加 addedToStage 侦听器`MyOtherClass`并初始化处理程序。

这是一些更新的代码，适用于您`MyOtherClass`：

```
 public function MyOtherClass():void { 
        if(stage){
            init(); //if stage is ready, call init, if not wait for the added to stage event
        }else{
            addEventListener(Event.ADDED_TO_STAGE,init);
        }
    }

    public function init(e:Event = null):void {
        removeEventListener(Event.ADDED_TO_STAGE,init);

        for(var i:int=0; i<6; i++) {

            var myMC:MyMovieClip = new MyMovieClip;
            myMC.name = "myMC" + i; //setting the name so I can reference this movieclip after it's been added to stage
            myMC.y = myMC.height * i + 20;
            myMC.x = 20;
            myMC.alpha = .7;

            addChild(myMC); //!!!! add to the displayList
        }

        dispatchEvent(new Event(MyOtherClass.MOVIECLIPS_ADDED)); // just to be safe, let's dispatch a custom event when all movieclips have been added
    }

    public function traceEnabled():void {
        var myMC:MyMovieClip = this.getChildByName("myMC1") as MyMovieClip; //!!! cast it as MyMovieClip so you have access to all the properties/methods in that class
        if(myMC){  //myMC will be null if the cast failed
            trace(myMC.isEnabled); 
        }
    }

    /*
       getChildByName is slow and cumbersome. Most people generally only use it for accessing things put on the timeline in the Flash IDE.  Using events is a much better way of accessing your items. If traceEnabled was caused by a mouse event attached to myMC, then this would be a much better implementation:
    */
    public function betterTraceEnabled(e:Event):void {
        var myMC:MyMovieClip = e.currentTarget as MyMovieClip;
        if(myMC){
            trace(myMC.isEnabled);
        }
    } 
```

和您的文档类别：

```
public class DocumentClass extends MovieClip {

    public var myOtherClass:MyOtherClass;

    public function DocumentClass():void {

        if(stage){
            onAddedToStage(null); //most of the time stage is already populated in the constructor of your document class
        }else{
            addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        }
    }

    public function onAddedToStage(e:Event):void {

        myOtherClass = new MyOtherClass(); // upon instantiation, init is called in MyOtherClass and all of my movieclips are added to the sage
        addChild(myOtherClass); //add it to the displayList
    }
} 
```

# ruby - RoR：我怎样才能让我所有的用户微博都出现在一个地方？

> ID：12536954
> 
> 赞同：0
> 
> 时间：2012-09-21T19:25:18.207
> 
> 标签：ruby, ruby-on-rails-3

我希望他们出现在主页上。我想我可能遇到了麻烦，因为有一个belong_to has_many 关系。每个微博都属于_一个用户，每个用户都有_许多微博。我让他们出现在用户页面上（但这只是用户微博的列表，而不是我想要在主页上的所有人）。如果从视图中看不清楚。我想要两个单独的列表。每个人的微博列表都有“购买”和所有“销售”微博的另一个列表。Kind是微博数据库中的一列。现在什么都没有出现，也没有错误......

这是 app/views/static_pages/home.html.erb

```
<div id="purchases list">
  <ol class="microposts">
    <%= render @purchases unless @purchases.nil? %>
  </ol>
</div>

<div id="sales list">
  <ol class="microposts">
    <%= render @sales unless @sales.nil? %>
  </ol>
</div> 
```

这是 app/views/microposts/_micropost.html.erb （我不确定这是否重要）

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
  <% end %>
</li> 
```

我在模型文件（micropost.rb）中定义微帖子时使用范围可能很重要

```
scope :purchases, where(:kind => "purchase")
  scope :sales, where(:kind => "sale") 
```

这是 microposts_controller.rb

```
class MicropostsController < ApplicationController
  before_filter :signed_in_user
  before_filter :correct_user,   only: :destroy

  def home
    @microposts=Micropost.all
    @purchases=@microposts.collect{ |m| m if m.kind == "purchase"}.compact
    @sales=@microposts.collect{ |m| m if m.kind == "sale"}.compact
  def show

    @micropost = Micropost.find(params[:id])
    @microposts = @user.microposts
    @purchases= @microposts.purchases
    @sales = @microposts.sales

  end 
```

这是 users_controller.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user, 
                only: [:index, :edit, :update, :destroy, :following, :followers]
  before_filter :correct_user,   only: [:edit, :update]
  before_filter :admin_user,     only: :destroy

  def index
    @users = User.paginate(page: params[:page])
  end

  def show
    @user = User.find(params[:id])
    @micropost=Micropost.new
    @microposts = @user.microposts
    @purchases= @microposts.purchases
    @sales = @microposts.sales
  end

  def home

    @microposts = Micropost.all
    @purchases = @microposts.collect{ |m| m if m.kind == "purchase"}.compact
    @sales = @microposts.collect{ |m| m if m.kind == "sale"}.compact
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:49:04.127

您`XController`将在 中查找视图模板`app/views/X`，因此您需要将您的视图模板`home.html.erb`移出`app/views/static_pages`和移入`app/views/users`或`app/views/microposts`。另外，为什么`home`在两个控制器中都有相同的方法？

如果这对您不起作用，我想知道（a）您正在浏览的 URL，以及（b）您的`routes.rb`文件中有什么。

# c# - 如何在 xml 元素中存储一串加密数据？

> ID：12536956
> 
> 赞同：1
> 
> 时间：2012-09-21T19:25:28.433
> 
> 标签：c#, entity-framework, encryption, xml-serialization

所以我有 EntityFramework 解决方案。我已经自定义了上下文以插入审计跟踪，并将跟踪存储在 xml 字段中。上下文序列化一个实体，这就是存储的内容。在将它们写入数据库之前，我有一些要加密的字段。我有一个使用 AESManaged 来执行加密的助手类。最终存储的值包含 ascii 特殊字符，这会在序列化过程中导致异常。

我的问题是，我应该如何处理这些加密字段以便它们可以被序列化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:28:01.657

您可以使用[Convert.ToBase64String](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)。只是不要存储以解密它。

```
byte[] encryptedBytes = ...;
var asBase64 = Convert.ToBase64String(encryptedBytes);
var asBytes = Convert.FromBase64String(asBase64); 
```

# google-app-engine - App Engine 中的实体种类配额限制？

> ID：12536958
> 
> 赞同：0
> 
> 时间：2012-09-21T19:25:33.343
> 
> 标签：google-app-engine, google-cloud-datastore

您在 App Engine 中可以拥有的实体**种类**的数量是否有任何限制？

低级数据存储[ShardedCounter.java 示例](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/sharded-counters-java/src/com/google/appengine/demos/shardedcounter/java/v2/ShardedCounter.java)为每个计数器名称创建一个新的实体**种类，而 JDO 示例将每个计数器存储在相同的实体种类中。**我喜欢前者的优势，但不知道它是否可以扩展到数百万个柜台名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:15:41.977

数据存储基本上可以像`HashMap<Key-Entity>`HashMap 一样工作，您可以放置​​无限数量的键，因为一个键是您的 appId、***Kind***和实体 Id 或名称的混合，您也可以使用无限数量的种类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:50:18.123

GAE 没有理由施加这样的限制，拥有一种新的不会影响特殊的东西。
所以没有这个限制。如果它存在，我们应该能够在 Google 上找到它。

# java - 关于 log4j.xml NullAppender

> ID：12536960
> 
> 赞同：2
> 
> 时间：2012-09-21T19:25:37.277
> 
> 标签：java, logging, log4j

我已经围绕它进行了一些谷歌搜索，但找不到任何相关信息。`log4j`支持一堆日志`appenders`，网上到处都是关于`ConsoleAppender`and的文档，但是关于 appender等`FileAppender`的信息很少或没有。我特别感兴趣。`NullAppender``JDBCAppender``NullAppender`

```
<appender name="???" class="org.apache.log4j.varia.NullAppender">
<appender name="???" class="org.apache.log4j.jdbc.JDBCAppender"> 
```

有没有人有关于这些的任何具体信息？特别是在`NullAppender`？

我开始寻找[这里](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T20:10:50.220

对于`NullAppender`，没有很多文档，主要是因为没有什么可配置的：您可以定义一个，`<appender name="foo" class="org.apache.log4j.varia.NullAppender"/>`仅此而已。来自 Javadoc：

> NullAppender 仅存在，它从不向任何设备输出消息。

没有很多不同的方法可以什么都不做。（它的存在是为了让您可以在不修改太多配置的情况下丢弃输出。）

对于`JDBCAppender`，Javadoc 在这里：[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/jdbc/JDBCAppender.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/jdbc/JDBCAppender.html)
XML 配置中 的`param`标签对应于 Java 类中的设置器，但是请注意 Javadoc 顶部的大红色警告：

> 警告：这个版本的 JDBCAppender 将来很可能会被完全替换。此外，它不会记录异常。

因此，鉴于 log4j v2.0 目前处于测试阶段，并且粗略查看[alpha 版本](http://search.maven.org/remotecontent?filepath=org/apache/logging/log4j/log4j/2.0-alpha2/log4j-2.0-alpha2.pom)似乎表明它在 v2 中不存在，因此可能不是最值得依赖的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:43:32.870

一个简单的谷歌这门课会让你

[Nullappender](http://publib.boulder.ibm.com/infocenter/p8docs/v4r5m1/index.jsp?topic=/com.ibm.p8.doc/developer_help/content_engine_api/guide/logging_procedures.htm)

所以本质上，如果你使用 NullAppender，你的日志消息就不会写在任何地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:54:09.373

NullAppender基本上什么都不做，就像其他人已经指出的那样**。**我只是想布置一些细节。

```
        AppenderSkeleton 实现 Appender {
          ...
          @覆盖
          公共同步无效doAppend（LoggingEvent事件）{
            ...
          }
          ...
          抽象受保护的无效附加（LoggingEvent 事件）；
        }

        公共类 NullAppender 扩展 AppenderSkeleton {
          公共静态字符串；
          公共字符串 t;
          ...
          @覆盖
          公共无效doAppend（LoggingEvent事件）{
            如果（布局！= null）{
              t = layout.format(event);
              s = t;
            }
          }
          @覆盖
          公共无效附加（LoggingEvent 事件）{
          }

```

参见：[Source-NullAppender](http://javasourcecode.org/html/open-source/log4j/log4j-1.2.8/org/apache/log4j/performance/NullAppender.java.html#line.48) & [Source-AppenderSkeleton](http://javasourcecode.org/html/open-source/log4j/log4j-1.2.8/org/apache/log4j/AppenderSkeleton.java.html)

每个 log.trace/debug/... 调用会发生什么

```
-> org.apache.log4j.Category.forcedLog(String fqcn, Priority level, Object message, Throwable t)
 -> org.apache.log4j.Category.callAppenders（LoggingEvent 事件）
 -> org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(LoggingEvent event) 在该 Logger 中的每个 Appender 上调用
 -> org.apache.log4j.Appender.doAppend（LoggingEvent 事件）
 在这种情况下，这是 doAppend 的 NullPointers 实现。

```

如你所见，NullAppender 带走了同步，NullAppender.doAppend 产生了一些开销，但在大多数情况下很少。

至于**JDBCAppender**它不应该被使用。

```
       警告：此版本的 JDBCAppender
       未来很可能会被完全取代。此外，
       它不记录异常。

```

请参阅：[JDBC-Appender-Source](http://www.docjar.com/html/api/org/apache/log4j/jdbc/JDBCAppender.java.html)第 34-36 行

作为**替代方案**，您可能需要查看[clusterlog](http://www.clusterlog.net)

# c - 为什么编译器会警告并忽略对我的函数 strlen 的调用？

> ID：12536965
> 
> 赞同：1
> 
> 时间：2012-09-21T19:25:58.337
> 
> 标签：c, function, gcc, call

我试图调用一个自写的函数而不处理它的返回值。gcc 在函数调用的那一行告诉我，这将是一个**无效的语句**。为了检查我的函数是否被调用，我添加了一些 printf 语句，但没有从程序中得到任何输出。

gcc 是否有可能只是**忽略函数调用**？据我所知，我对这样的陈述从来没有任何问题。

*所以这里是代码：*

```
unsigned strlen(char *string)
{
  printf("ignored by gcc");
  unsigned count = 0;
  for(; *string++; count++);
  return count;
}

int main()
{
  char string[] = "something";
  strlen(string);

  return 0;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T19:57:23.613

忽略函数的返回值是完全合法的。您调用的次数可能超过 99% `printf()`（返回一个`int`）。

但是，正如一些人在评论中所说，您`strlen()`在标准库函数之后调用了您的函数。根据 C99 的 7.1.3:2，这是非法的：

> 如果程序在保留标识符的上下文中声明或定义标识符（7.1.4 允许的除外），或将保留标识符定义为宏名称，则行为未定义。

在这里，编译器出乎意料地发出警告，要么调用标准函数而不是你的函数，要么根本不调用函数（因为它知道**它** `strlen()`应该没有副作用）。这是未定义行为可以做的事情之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:46:33.807

You get the message because gcc's `strlen` is declared with `__attribute__((pure))`, which tells the compiler that it has no side effects, so there's no point in calling it *other* than to use its return value.

# c - strtod 定义和传递指针的类型

> ID：12536967
> 
> 赞同：0
> 
> 时间：2012-09-21T19:26:02.207
> 
> 标签：c, strtod

从定义`double strtod ( const char * str, char ** endptr );`

C 参考站点为这个强大的功能提供了一个示例：

```
char szOrbits[] = "365.24 29.53";
char * pEnd;
double d1, d2;
d1 = strtod (szOrbits,&pEnd);
d2 = strtod (pEnd,NULL); 
```

如果`endptr`应该是类型`char **`，为什么`char *pEnd`在这里使用？而不是`char **pEnd`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T19:29:12.813

的类型`pEnd`是`char *`。的类型`&pEnd`是`char **`。

C 通过值将参数传递给函数，因此要修改指针，您需要将指针传递给指针。

您可以直接定义 a`char **`但您需要将其初始化为 a`char *`因为想法是`strtod`修改 a `char *`。

像：

```
char *q;
char **p = &q;

d1 = strtod (szOrbits, p); 
```

显然中间`p`指针不是必须的，可以`&q`直接使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:28:55.767

`pEnd`是 a `char*`，正如您所观察到的。第一个示例调用作为第二个参数`strtod()`传递。是 的地址，因此属于 类型。`&pEnd``&pEnd``pEnd``char**`

# jquery - 使用 jquery 访问 Joomla 视图变量

> ID：12536968
> 
> 赞同：4
> 
> 时间：2012-09-21T19:26:01.857
> 
> 标签：jquery, joomla

我需要根据用户输入设置视图过滤器（选中/取消选中一个框）。无法保证用户会在过滤器需要此信息之前切换页面或提交任何内容，因此需要在输入时完成。有没有办法访问和更改 jquery 中的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:04:32.907

如果您想在客户端使用 jQuery 更改服务器端变量，AJAX(AJAX = Asynchronous JavaScript and XML) 是您的生存之道。

AJAX 不是一种新的编程语言，而是一种使用现有标准的新方法。AJAX 是与服务器交换数据并更新网页部分的艺术——无需重新加载整个页面。

参考[**jQuery API**](http://api.jquery.com/category/ajax/)

[**阅读更多**](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)示例 AJAX 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T01:41:26.583

这个类似的问题或只是可能有助于您的问题显示如何获取页面的 GET 和/或 POST 数据。

[如何使用 JQuery 获取 GET 和 POST 变量？](https://stackoverflow.com/questions/439463/how-to-get-get-and-post-variables-with-jquery)

否则，可以在没有提交或页面加载的情况下向服务器发送数据`jQuery.ajax()`

因此，您拨打以下电话： `jQuery.ajax('somewebpage.php?someVariable=someValue&someOtherVariable=someOtherValue');`

并在 PHP 文件中将该数据保存到会话或数据库中。并且在下一页加载时可以使用该数据。

# java - 添加监听器会导致崩溃？

> ID：12536969
> 
> 赞同：0
> 
> 时间：2012-09-21T19:26:02.480
> 
> 标签：java, android

我有一个监听器接口：

```
public interface AnimationListener 
{
    public void onAnimationStarted(Animation animation);
    public void onAnimationFinished(Animation animation);
    public void onAnimationCanceled(Animation animation);
} 
```

此类保留一个列表：

```
public class AnimationManager 
{
    private List<Animation> animations;
    private List<AnimationListener> animationListeners;
    private List<Animation> animationsToRemove;
    private float rate;

    public AnimationManager(float rate)
    {
        setRate(rate);
    }

    public void addAnimationListener(AnimationListener listener)
    {
        animationListeners.add(listener);
    }

    public void removeAnimationListener(AnimationListener listener)
    {
        animationListeners.remove(listener);
    }
... 
```

这个类实现了接口：

public class PuzzleView extends SurfaceView implements Runnable, AnimationListener { ... private AnimationManager animationManager = null;

```
...

public PuzzleView(Context context) 
{
            ...
    animationManager = new AnimationManager(FRAME_RATE);
    //animationManager.addAnimationListener(this); THIS CRASHES
} 
```

当我添加动画侦听器时，它崩溃了。有什么问题？

谢谢

> 在 dalvik.system.NativeStart.main(Native Method) 09-21 19:15:51.453: E/AndroidRuntime(278): 引起：java.lang.NullPointerException 09-21 19:15:51.453: E/AndroidRuntime(278) ): 在 com.joshl.drop7.AnimationManager.addAnimationListener(AnimationManager.java:19) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.PuzzleView.(PuzzleView.java:82 ) 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.Game.onCreate(Game.java:18) 09-21 19:15:51.453: E/AndroidRuntime(278):在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19 :15:51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19:15:53.333: I/Process(278): 发送信号。PID：278 SIG：9 system.NativeStart.main(Native Method) 09-21 19:15:51.453: E/AndroidRuntime(278): 由: java.lang.NullPointerException 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.AnimationManager.addAnimationListener(AnimationManager.java:19) 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.PuzzleView.(PuzzleView.java:82) 09- 21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.Game.onCreate(Game.java:18) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android。 app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15: 51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19:15:53.333: I/Process(278): 发送信号。PID：278 SIG：9 system.NativeStart.main(Native Method) 09-21 19:15:51.453: E/AndroidRuntime(278): 由: java.lang.NullPointerException 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.AnimationManager.addAnimationListener(AnimationManager.java:19) 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.PuzzleView.(PuzzleView.java:82) 09- 21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.Game.onCreate(Game.java:18) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android。 app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15: 51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19:15:53.333: I/Process(278): 发送信号。PID：278 SIG：9 主要（本机方法）09-21 19:15:51.453：E/AndroidRuntime(278)：由：java.lang.NullPointerException 09-21 19:15:51.453：E/AndroidRuntime(278)：在 com.joshl。 drop7.AnimationManager.addAnimationListener(AnimationManager.java:19) 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.PuzzleView.(PuzzleView.java:82) 09-21 19:15 :51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.Game.onCreate(Game.java:18) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.Instrumentation。 callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15:51.453: E/ AndroidRuntime(278): ... 11 更多 09-21 19:15:53.333: I/Process(278): 发送信号。PID：278 SIG：9 主要（本机方法）09-21 19:15:51.453：E/AndroidRuntime(278)：由：java.lang.NullPointerException 09-21 19:15:51.453：E/AndroidRuntime(278)：在 com.joshl。 drop7.AnimationManager.addAnimationListener(AnimationManager.java:19) 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.PuzzleView.(PuzzleView.java:82) 09-21 19:15 :51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.Game.onCreate(Game.java:18) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.Instrumentation。 callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15:51.453: E/ AndroidRuntime(278): ... 11 更多 09-21 19:15:53.333: I/Process(278): 发送信号。PID：278 SIG：9 E/AndroidRuntime(278): 引起: java.lang.NullPointerException 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.AnimationManager.addAnimationListener(AnimationManager.java:19) 09- 21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.PuzzleView.(PuzzleView.java:82) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl .drop7.Game.onCreate(Game.java:18) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15 :51.453: E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15:51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19 :15:53.333: I/Process(278): 发送信号。PID：278 SIG：9 E/AndroidRuntime(278): 引起: java.lang.NullPointerException 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.AnimationManager.addAnimationListener(AnimationManager.java:19) 09- 21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.PuzzleView.(PuzzleView.java:82) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl .drop7.Game.onCreate(Game.java:18) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15 :51.453: E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15:51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19 :15:53.333: I/Process(278): 发送信号。PID：278 SIG：9 51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.AnimationManager.addAnimationListener(AnimationManager.java:19) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.PuzzleView .(PuzzleView.java:82) 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.Game.onCreate(Game.java:18) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java :2627) 09-21 19:15:51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19:15:53.333: I/Process(278): 发送信号。PID：278 SIG：9 51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.AnimationManager.addAnimationListener(AnimationManager.java:19) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.PuzzleView .(PuzzleView.java:82) 09-21 19:15:51.453: E/AndroidRuntime(278): at com.joshl.drop7.Game.onCreate(Game.java:18) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java :2627) 09-21 19:15:51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19:15:53.333: I/Process(278): 发送信号。PID：278 SIG：9 在 com.joshl.drop7.PuzzleView.(PuzzleView.java:82) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.Game.onCreate(Game.java:18) 09 -21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app .ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15:51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19:15:53.333: I/Process(278): 发送信号. PID：278 SIG：9 在 com.joshl.drop7.PuzzleView.(PuzzleView.java:82) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 com.joshl.drop7.Game.onCreate(Game.java:18) 09 -21 19:15:51.453: E/AndroidRuntime(278): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 19:15:51.453: E/AndroidRuntime(278): 在 android.app .ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15:51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19:15:53.333: I/Process(278): 发送信号. PID：278 SIG：9 E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15:51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19:15: 53.333：I/Process(278)：发送信号。PID：278 SIG：9 E/AndroidRuntime(278): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-21 19:15:51.453: E/AndroidRuntime(278): ... 11 更多 09-21 19:15: 53.333：I/Process(278)：发送信号。PID：278 SIG：9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:30:31.233

看起来您从未在 AnimationManager 类中初始化任何列表。您应该在 AnimationManager 构造函数中为每个列表添加类似的内容：

```
animationListeners = new ArrayList<AnimationListener>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:28:57.197

尝试使用：

```
public class PuzzleView implements AnimationListener {
....
public PuzzleView(Context context) 
{
            ...
    animationManager = new AnimationManager(FRAME_RATE);
    animationManager.addAnimationListener(this); 
}
..... 
```

或者

```
public PuzzleView(Context context) 
{
            ...
    animationManager = new AnimationManager(FRAME_RATE);
    animationManager.addAnimationListener(new AnimationListener() {

    }); 
} 
```

# jquery - jQuery .addclass()

> ID：12536970
> 
> 赞同：1
> 
> 时间：2012-09-21T19:26:03.300
> 
> 标签：jquery, addclass

我在下面有一些代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){

   var index=5;  
   $("ul li:last").addClass(function(index) {
    console.log(index);  
    return "item-" + index;
   });

});
</script>
</head>
<body>

<ul>
<li>11</li>
<li>12</li>
<li>13</li>
<li>14</li> 
</ul>

</body>
</html> 
```

我很清楚地看到了函数（索引）。但是我无法弄清楚它在做什么。我确实看到新列表何时构建，最后一个 li 具有 item-0 类。我也尝试设置一个变量 index=5 但我无法将其传递（希望使 item-5 不是 item-0 ） 那么 function(index) 中的索引是什么，它是一个 getter 还是一个 setter？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:29:53.250

是 jQuery 集合中选定元素的`index`索引，因为您的选择器选择 :last li 并且只有一个元素被选中，索引为`0`.

```
.addClass( function(index, currentClass) ) 
```

如果要根据索引修改类，可以删除 :last 选择器：

```
 $("ul li").addClass(function(index) {
    console.log(index);  
    return "item-" + index;
 }); 
```

或者，如果您想选择最后一个元素并根据它的*索引*添加类，您可以尝试：

```
var $lst = $("ul li:last");
var ind = $lst.index();
$lst.addClass('item-'+ind) 
```

请注意，索引是从零开始的，并且第一个选定元素的索引是 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:32:24.247

index 在您的情况下是一个参数，您不能将其传递给函数。:last 仅限于最后一个 LI。这是一个没有 :last 的示例，它将为每个 li 提供一个索引`item-n`where的类。`n`

```
$(document).ready(function(){

   $("ul li").addClass(function(index) {
    console.log(index);  
    return "item-" + index;
   });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:35:38.537

我*认为*您要做的是选择列表中的最后一个元素，并根据有多少先前的元素给它一个类。所以，试试这个：

```
$(document).ready(function(){
   var lis = $("ul li");
   $(lis[lis.length-1]).addClass("item-" + (lis.length + 1));
}); 
```

[http://jsfiddle.net/P7gRP/](http://jsfiddle.net/P7gRP/)

您的示例不起作用的原因是因为只有*一个*元素与 li:last 匹配（当然）。因此，在您的情况下当前匹配的元素的索引为零。如果您想将*所有*元素设置为具有 item-# 类，那么您就在正确的轨道上。像这样：

```
$("ul li").addClass(function(index) {
    return "item-" + index;
   }); 
```

请注意，我删除了 :last 部分。

# java - adRequest.addTestDevice() 参数要求让我感到困惑

> ID：12536972
> 
> 赞同：1
> 
> 时间：2012-09-21T19:26:04.790
> 
> 标签：java, android, admob

当我做一个

```
adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
adView.loadAd(adRequest); 
```

logcat 似乎报告说我正在请求广告，但随后说

```
09-21 11:48:13.720: W/Ads(712): Invalid unknown request error: Cannot determine request type. 
```

您的广告单元 ID 是否正确？然而，我使用的 id 是从 AdMod API 代码请求/响应屏幕正确粘贴的。我究竟做错了什么？

当我尝试使用真实设备（运行 Android 2.2.1 的 HTC Inspire）时，我更加困惑。Logcat 保持沉默，但我没有收到任何测试广告。有人能告诉我在下面用什么代替“xxxxxxxx”：

```
adRequest.addTestDevice("xxxxxxxx"); 
```

我已经尝试过文本字符串“TEST_DEVICE_ID”，我的设备的序列号，甚至更愚蠢的东西。没有喜悦。我需要对序列号进行哈希处理吗？我正在使用 JDK 1.7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T23:40:30.813

检查您的广告单元 ID。是您从 AdMob 获得的广告单元 ID 吗？您的广告单元中有空格吗？您收到该错误是因为 AdMob 无法识别该 ID。

至于设置测试设备，您可以通过以下方式为模拟器设置测试模式：

```
adRequest.addTestDevice(AdRequest.TEST_EMULATOR); 
```

要在设备上设置测试模式，请在设备上发出 AdRequest，并检查 LogCat。SDK 会这样说：

```
To get test ads on this device, call adRequest.addTestDevice("0123456789ABCDEF0123456789ABCDEF"); 
```

这个数字是你的设备 ID 的哈希值，它是最容易从 LogCat 获得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:25:49.967

首先，我不知道您是否在代码中解决了在模拟器中与在真实设备上的差异问题。您需要区分您的应用程序是在模拟器还是真实设备上运行，这可以通过以下方式完成

```
 boolean inEmulator = "generic".equals(Build.BRAND.toLowerCase()); 
```

如果您在模拟器中，这将返回 true，如果不在模拟器中，则返回 false。接下来，您需要根据 inEmulotor 的值构建一种处理广告的方法

```
 if (inEmulator) 
    {
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
    } 
    else 
    {
        adRequest.addTestDevice("11111111101111111110111111111011");
    } 
```

在这里我们要么必须添加一个仿真器测试设备，要么你需要一个真实设备的 32char 设备 ID。（这个 ID 是字母数字的）这个真实设备的 ID 可以通过在真实设备上运行 admob 来找到，并会出现在 logcat 中。

最后，您需要设置 testing = true 并开始加载广告。

```
 adRequest.setTesting(true);
    adView.loadAd(adRequest); 
```

总而言之，此代码的工作集可能如下所示：

```
 boolean isTestingAds = true; //this is a switch, to make it easy on changing modes

    boolean inEmulator = "generic".equals(Build.BRAND.toLowerCase());
    AdView adView = new AdView(this, AdSize.BANNER, MY_AD_UNIT_ID);

    AdRequest adRequest = new AdRequest();

    if (isTestingAds) 
    {
        if (inEmulator) 
        {
            adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
        } 
        else 
        {
            adRequest.addTestDevice("11111111101111111110111111111011");
        }
        adRequest.setTesting(true);
    }

    adView.loadAd(adRequest); 
```

不要忘记将广告视图添加到您的内容视图，以及更新清单文件。MY_AD_UNIT_ID 是您从 admob 获得的用于此特定应用的代码。

所以最后找到你的ID，设置

```
 isTestingAds = false; 
```

然后您需要将设备设置为测试的 # 将出现在 LogCat 中。

如果您没有从您的真实设备获取和记录数据，那么这完全是另一个问题。

# c# - 组件配置一致性

> ID：12536974
> 
> 赞同：0
> 
> 时间：2012-09-21T19:26:12.347
> 
> 标签：c#, winforms, multithreading, controls

我有一个继承 System.ComponentModel.Component 的类。该组件生成一个免费线程，该线程进行长时间的阻塞调用以等待外部事件。在我的 Dispose 中，线程被通知完成其调用并返回。我可以确定该应用程序将始终调用我的 Dispose 吗？如何确保我的线程不会逗留并阻止客户端应用程序终止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:28:18.010

> 如何确保我的线程不会逗留并阻止客户端应用程序终止？

通过使线程成为[后台线程`Thread.IsBackground`](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)。这将阻止线程保持进程处于活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:33:49.637

无法保证`IDisposable.Dispose`将在您的对象上调用它。您可以期望在所有正常情况下都会调用终结器。

由于 Dispose 只是约定，而不是要求您必须通过良好的编码实践和可能的终结器中的运行时检查来强制执行它（如果您愿意）。

不阻塞应用程序的好方法是不要进行长时间的同步调用。大多数 API 都有异步版本，更容易取消/忽略完成部分。如果你不能 - 按照 Reed Copsey 的建议使用 Thread.IsBackground。

# python - Python：根据概率从对象列表中选择项目

> ID：12536975
> 
> 赞同：0
> 
> 时间：2012-09-21T19:26:12.440
> 
> 标签：python, list, class, probability

> **可能重复：**
> [带和不带放回的加权随机选择](https://stackoverflow.com/questions/352670/weighted-random-selection-with-and-without-replacement)

我有一个很长的项目对象列表。我想根据概率从列表中随机选择一个项目。该列表如下所示：

```
class Item:
  def __init__(self, pid, hits, qtyPerOrder):
    self.pid = pid
    self.bay = hits
    self.qtyPerOrder = int(qtyPerOrder)

itemList = [('RGSCAF', 181  ,6), ('WAR10227', 54    ,3), ('AD2020WOC', 31   ,4)] 
```

基本上，我想要一个函数来遍历列表，根据命中分配概率权重，然后根据概率随机选择 n 个对象。因此，在此示例中，返回对象 ('RGSCAF', 181 ,6) 的概率更高，因为它具有最高的命中值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:40:54.953

不是最快的解决方案，但它明白了这一点：

```
def getNWeightedRandoms(n):
    retval = []
    for x in xrange(0,n):
        retval.append(weightedRandom())
    return retval

def weightedRandom():
    sum = 0
    for item in itemList:
        sum += item.bay
    i = random.randint(0,sum-1)
    for item in itemList:
        i -= item.bay
        if i<0:
            return item 
```

# scala - 函数文字 - 在理解代码片段方面需要帮助

> ID：12536976
> 
> 赞同：1
> 
> 时间：2012-09-21T19:26:13.730
> 
> 标签：scala

我基本上是函数式编程和 scala 的新手，下面的问题可能看起来很愚蠢。

```
val f = (a:Int) => a+1 
```

在上面的代码片段中，我应该将其视为`f`函数还是变量？来自 C/C++ 背景，第一个想法是它`f`是一个存储匿名函数返回值的变量，但我认为这不是解释它的正确方法任何解释都会非常有帮助。

（我上面使用的一些术语在 scala/函数式编程方面可能是错误的，请多多包涵）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T19:27:55.257

这里，`f`是一个存储函数的变量。这实际上与说以下任何内容没有什么不同：

```
val a = 4               // `a` is a variable storing an Int
val b = "hi"            // `b` is a variable storing a String
val f = (a:Int) => a+1  // `f` is a variable storing a function 
```

您也可以通过 REPL 确认这一点：

```
scala> val f = (a:Int) => a+1
f: Int => Int = <function1> 
```

所以这告诉你`f`有 type `Int => Int`。或者换句话说，`f`是一个接受一个参数 an`Int`并返回 an的函数`Int`。

由于`f`是一个变量，因此您可以在其上调用方法或将其作为参数传递给期望其类型的函数：

```
a + 3  // here I'm calling the `+` method on `a`, which is an Int
f(3)   // here I'm calling the `apply` method on `f`, which is a function `Int => Int`
f(a)   // the function `f` expects an `Int`, which `a` is
(1 to 3).map(f)  // the `map` method expects a function from Int to Int, like `f` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:33:05.417

是的，就像 dhg 所说，`f`是一个存储函数的变量（不能更改）。

然而，这里有一个微妙之处：

> ...出现的第一个想法是f是一个存储匿名函数返回值的变量

`f`实际上存储*的是函数*，而不是结果。所以你可以给它不同的输入，得到不同的输出。所以，你可以像`f(7)`then一样使用它`f(5)`。Scala 中的函数是对象，因此可以分配给变量、作为参数传递等。

[我最近发布了有关 function literals](https://stackoverflow.com/a/12530324/1214194)的帖子，这可能对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:20:26.683

`f`是一个*表示*函数字面量的值。

在语句中，右边是一个函数字面量。左侧将其绑定到一个名称，然后称为**value**（`val`关键字类似于`let`LISP 中的关键字）。现在函数与符号相关联`f`，因此您可以使用此符号引用该函数`f`。

我不同意其他建议将`f`其称为变量的答案。**是一个值，因为它被固定为仅确定一次**且**不能更改**`f`的右侧项。相反，用 引入的变量允许您将值重新分配给符号：****`var`****

 ****```
var f = (i: Int) => i + 1 
```

变量定义在哪里`var`开始，`f`是变量的名称或符号，可能有一个可选`: ...`的变量定义类型（如果你不考虑，类型会自动从赋值中推断出来），并`= ...`定义*最初*分配给多变的。

因此，当人们说*value*时，不要将其与数字常量混淆，它只是一个不变的**实体**。一个函数也可以是一个值，因为`f`then 总是表示同一个相同的函数，即使你可以为该函数提供不同的参数，从而产生不同的结果。

现在，`var`您可以重新分配其右侧：

```
f(2) // --> 3
f = (i: Int) => i * 2 // assign a new function to the variable f.
f(2) // --> 4 
```

函数式编程就是要避免变量（重新分配）。

* * *

也可以定义一个函数而不分配它（给一个值或变量）。下面定义了这样一个函数并立即使用参数调用它`4`：

```
{ i: Int => i + 1 } apply 4 // --> 5 
```

尽管作为语句本身很少有用，但是在调用需要函数参数的方法时，您会经常看到“普通”函数。例如

```
val s = List(1, 2, 3)
s.map { (i: Int) => i + 1 } // --> List(2, 3, 4)
s.map { _ + 1 }             // equivalent
s.map( _ + 1 )              // equivalent 
```****

# c++ - 如何将有限状态机集成到我的应用程序中？

> ID：12536977
> 
> 赞同：1
> 
> 时间：2012-09-21T19:26:18.160
> 
> 标签：c++, model-view-controller, fsm

嗨，对不起，如果这已经被覆盖了。

我主要专注于编写数字软件，但在应用程序设计方面我有点菜鸟。

我编写了一个库，它基本上从不同的数据流或静态文件中获取输入，执行一些数据分析并将数据输出到屏幕或文件等，我决定编写一个 gui 应用程序以使其更加用户友好。

必须进行库调用的顺序相当简单，但是根据应用程序所处的状态，应该处理哪些事件有一些限制。即我不希望用户在数据源中开始抓取它们已经从另一个处理。

所以我决定使用有限状态机。但是，我想知道将有限状态机集成到您的应用程序中的最佳实践是什么。我应该将它作为我的库的公共接口，还是应该将它本质上用作 MVC 框架中的控制器，其中库是模型，GUI 是视图？还是有更好的方法来控制应用程序的流程？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:29:41.207

你答对了。Gui = 视图，FSM = 控制器，库 + 静态数据 + 数据库 + 模型。

话虽如此，看看你是否可以进一步将 FSM 分成两部分。状态转换定义本身应该是声明性的，以便您可以轻松更改状态规则。FSM 应该是一个简单的状态传输器，它使用状态规则库中的规则。

您可以使用 PMML（XML 的一种变体）以声明方式存储规则。

看看这个，它会更雄辩地解释我想说的话： [http ://en.wikipedia.org/wiki/ADAPA](http://en.wikipedia.org/wiki/ADAPA)

（与 ADAPA 无关）

# android - 动画可绘制错误 - 应用程序已停止

> ID：12536978
> 
> 赞同：1
> 
> 时间：2012-09-21T19:26:23.010
> 
> 标签：android, animation, android-animation

我正在尝试使用[developers.android.com的本教程制作旋转动画](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)

我很确定，一切正常，但似乎“应用程序已停止”。

那是我的主要活动：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView txt = (TextView) findViewById(R.id.diavlo_book);  
    Typeface font = Typeface.createFromAsset(getAssets(), "DiavloBook-Regular.ttf");  
    txt.setTypeface(font);  

    TextView txt2 = (TextView) findViewById(R.id.diavlo_book_name);  
    Typeface font2 = Typeface.createFromAsset(getAssets(), "DiavloBook-Regular.ttf");  
    txt2.setTypeface(font2);

 // Load the ImageView that will host the animation and
    // set its background to our AnimationDrawable XML resource.
    ImageView img = (ImageView)findViewById(R.id.spinning_wheel_image);
    img.setBackgroundResource(R.drawable.spin_animation);

    // Get the background, which has been compiled to an AnimationDrawable object.
    AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();

    // Start the animation (looped playback by default).
    frameAnimation.start();

    final Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
      public void run() {
        //Do something after 100ms
          Intent intent = new Intent(MainActivity.this, SecondActivity.class);

        startActivity(intent);
       finish(); 
      }
    }, 5000);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

还有 spin_animation.xml：

```
<animation_list android:id="@+id/spinning_wheel_image" xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false">
<item android:drawable="@drawable/logo_animation01" android:duration="50" />
<item android:drawable="@drawable/logo_animation02" android:duration="50" />
<item android:drawable="@drawable/logo_animation03" android:duration="50" />
<item android:drawable="@drawable/logo_animation04" android:duration="50" />
<item android:drawable="@drawable/logo_animation05" android:duration="50" />
<item android:drawable="@drawable/logo_animation06" android:duration="50" />
<item android:drawable="@drawable/logo_animation07" android:duration="50" />
<item android:drawable="@drawable/logo_animation08" android:duration="50" />
<item android:drawable="@drawable/logo_animation09" android:duration="50" />
<item android:drawable="@drawable/logo_animation10" android:duration="50" />
<item android:drawable="@drawable/logo_animation11" android:duration="50" />
<item android:drawable="@drawable/logo_animation12" android:duration="50" />
<item android:drawable="@drawable/logo_animation13" android:duration="50" />
<item android:drawable="@drawable/logo_animation14" android:duration="50" />
<item android:drawable="@drawable/logo_animation15" android:duration="50" />
<item android:drawable="@drawable/logo_animation16" android:duration="50" />
<item android:drawable="@drawable/logo_animation17" android:duration="50" />
<item android:drawable="@drawable/logo_animation18" android:duration="50" />
<item android:drawable="@drawable/logo_animation19" android:duration="50" />
<item android:drawable="@drawable/logo_animation20" android:duration="50" />
<item android:drawable="@drawable/logo_animation21" android:duration="50" />
<item android:drawable="@drawable/logo_animation22" android:duration="50" />
<item android:drawable="@drawable/logo_animation23" android:duration="50" />
<item android:drawable="@drawable/logo_animation24" android:duration="50" />
<item android:drawable="@drawable/logo_animation25" android:duration="50" /> 
```

日志：

```
09-21 19:10:42.244: E/Trace(662): error opening trace file: No such file or directory (2)
09-21 19:10:42.764: D/dalvikvm(662): GC_FOR_ALLOC freed 35K, 4% free 8006K/8259K, paused 52ms, total 54ms
09-21 19:10:42.774: I/dalvikvm-heap(662): Grow heap (frag case) to 8.821MB for 1000016-byte allocation
09-21 19:10:42.874: D/dalvikvm(662): GC_CONCURRENT freed <1K, 4% free 8982K/9287K, paused 31ms+17ms, total 93ms
09-21 19:10:42.965: D/dalvikvm(662): GC_FOR_ALLOC freed 0K, 4% free 8982K/9287K, paused 46ms, total 46ms
09-21 19:10:42.994: I/dalvikvm-heap(662): Grow heap (frag case) to 10.966MB for 2250016-byte allocation
09-21 19:10:43.104: D/dalvikvm(662): GC_CONCURRENT freed 0K, 4% free 11179K/11527K, paused 39ms+15ms, total 112ms
09-21 19:10:43.174: D/AndroidRuntime(662): Shutting down VM
09-21 19:10:43.174: W/dalvikvm(662): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-21 19:10:43.194: E/AndroidRuntime(662): FATAL EXCEPTION: main
09-21 19:10:43.194: E/AndroidRuntime(662): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.czolgi.ii.ws/com.example.czolgi.ii.ws.MainActivity}: java.lang.NullPointerException
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.os.Looper.loop(Looper.java:137)
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-21 19:10:43.194: E/AndroidRuntime(662):  at java.lang.reflect.Method.invokeNative(Native Method)
09-21 19:10:43.194: E/AndroidRuntime(662):  at java.lang.reflect.Method.invoke(Method.java:511)
09-21 19:10:43.194: E/AndroidRuntime(662):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-21 19:10:43.194: E/AndroidRuntime(662):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-21 19:10:43.194: E/AndroidRuntime(662):  at dalvik.system.NativeStart.main(Native Method)
09-21 19:10:43.194: E/AndroidRuntime(662): Caused by: java.lang.NullPointerException
09-21 19:10:43.194: E/AndroidRuntime(662):  at com.example.czolgi.ii.ws.MainActivity.onCreate(MainActivity.java:35)
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.app.Activity.performCreate(Activity.java:5008)
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-21 19:10:43.194: E/AndroidRuntime(662):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-21 19:10:43.194: E/AndroidRuntime(662):  ... 11 more 
```

它出什么问题了？我无法解决它:(我的所有图像“logo_animation**”也在drawable和spin_animation.xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:35:30.420

它在 MainActivity.java 的第 35 行收到 NullPointerException。所以我猜下面的事情之一正在发生。

1.  它没有找到`ImageView`所以`img.setBackgroundResource(R.drawable.spin_animation);`失败了

2.  或者它没有设置背景，所以当你打电话时它崩溃了`AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();`

3.  或者动画铸造失败导致 null 所以当你打电话时它会崩溃`frameAnimation.start();`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-18T11:55:00.260

代替

```
AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground(); 
```

和

```
AnimationDrawable frameAnimation = (AnimationDrawable) img.getDrawable(); 
```

# html - min-height:100% 不适用于嵌套 div

> ID：12536979
> 
> 赞同：0
> 
> 时间：2012-09-21T19:26:23.557
> 
> 标签：html, height, css

我有一个容器 div，包含 3 个 div、一个侧边栏、一个内容和一个标题，而里面的所有元素都按应有的方式呈现（如果这可能会影响我的问题，它们被定位为“相对”）、侧边栏和内容*`min-height: 100%;`*无论如何都不会渲染...

我的 div 不会像它应该的那样以最小高度拉伸......

这是代码：http: [//jsfiddle.net/vhZV6/4/](http://jsfiddle.net/vhZV6/4/)

如您所见（我放了一个白色背景以最好地识别它）应该拉伸的div根本不会...

编辑：这是一个临时站点，我试图在其中实施解决方案... [http://www.wabisuke-team.org/Temp/home.html](http://www.wabisuke-team.org/Temp/home.html)如您所见，除了最后两页（strees 和“contattateci “）按应有的方式渲染，但是那些 2 虽然从 div 中有一个混乱的背景图像，但没有按应有的方式调整大小......

编辑：我通过将最小高度以像素而不是百分比来解决这个问题，它现在可以按我的意愿工作，感谢大家的努力和耐心^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:30:46.680

使用高度：100%，不需要最小高度见这里[http://jsfiddle.net/vhZV6/5/](http://jsfiddle.net/vhZV6/5/)

```
html{
    height:100%;
}
body {
    display:block;
    height:100%;
    margin: 0;
    padding: 0;
    overflow:auto;
    /* just some back ground and graphical tweeks*/

    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    color:#000000;
    background: #86acef; /* Old browsers */
    background: -moz-linear-gradient(top,  #86acef 0%, #baceef 35%, #86acef 70%, #baceef 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#86acef), color-stop(35%,#baceef), color-stop(70%,#86acef), color-stop(100%,#baceef)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #86acef 0%,#baceef 35%,#86acef 70%,#baceef 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #86acef 0%,#baceef 35%,#86acef 70%,#baceef 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #86acef 0%,#baceef 35%,#86acef 70%,#baceef 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #86acef 0%,#baceef 35%,#86acef 70%,#baceef 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#86acef', endColorstr='#baceef',GradientType=0 ); /* IE6-9 */

}
/* ~~this fixed width container surrounds the other divs~~ */
.container {
    height: 100%;
    container:overflow;
    display:block;
    position:relative;
    width: 1000px;
    background: #FFF url(../img/Graphic/bg.jpg) no-repeat  fixed center;
    background-size:100% 100%;
    background-position:center;
    margin: 0 auto; /* the auto value on the sides, coupled with the width, centers the layout */
}
.header {
    position:relative;
    /* header graphical tweeks */

    background: #2945c4; /* Old browsers */
    background: -moz-linear-gradient(top,  #2945c4 0%, #7db9e8 35%, #2945c4 70%, #7db9e8 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#2945c4), color-stop(35%,#7db9e8), color-stop(70%,#2945c4), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #2945c4 0%,#7db9e8 35%,#2945c4 70%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #2945c4 0%,#7db9e8 35%,#2945c4 70%,#7db9e8 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #2945c4 0%,#7db9e8 35%,#2945c4 70%,#7db9e8 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #2945c4 0%,#7db9e8 35%,#2945c4 70%,#7db9e8 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2945c4', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */
}
.sidebar1 {
    position:relative;
    float: left;
    width: 180px;
    height:100%;
}
.content {
    position:relative;
    padding: 10px 0;
    width: 780px;
    float: left;
    height:100%;
    background: #FFF;
    background-size:100% 100%;
    background-position:center;
}
​ 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-21T19:56:34.910

这是内容长的小提琴[http://jsfiddle.net/xM4NC/](http://jsfiddle.net/xM4NC/)

这是简短的[http://jsfiddle.net/xM4NC/1/](http://jsfiddle.net/xM4NC/1/)

我将 body 设置为 height 100%，但内容 div 设置为 min-height 100%。这样它的父级就有了一个定义的高度，这样 div 将至少和身体一样高，但如果有必要，它会超出它。然后添加一个左边距并将侧边栏浮动在该空间中

```
body {
    margin: 0;
    padding: 0;
    height: 100%;
}
#content {
    background: #EEE;
    border-left: 1px solid #000;
    border-right: 1px solid #000;
    padding: 0 20px 0 20px;
    margin: auto;
    margin-left: 180px;
    font: 1.5em arial, verdana, sans-serif;
    width: 960px;
    min-height: 100%;
} 
```

和html

```
<div class="header">header</div>
<div class="sidebar1">sidebar</div>
<div id="content">
    text
</div>​ 
```

# c# - 从 ConcurrentDictionary 中获取值

> ID：12536982
> 
> 赞同：3
> 
> 时间：2012-09-21T19:26:35.283
> 
> 标签：c#, concurrentdictionary

如果我有这个 ConcurrentDictionary：

```
public class User
{
    public string Context { get; set; }
    public bool Owner { get; set; }
}

protected static ConcurrentDictionary<User, string> OnlineUsers = new ConcurrentDictionary<User, string>(); 
```

有谁知道`Owner`如果我已经拥有的价值，我将如何获得价值`Context`？基本上我想使用`Context`. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:30:10.597

有什么会阻止您使用标准的 Linq`FirstOrDefault()`方法，如下所示：

```
var item = OnlineUsers.FirstOrDefault(kvp => kvp.Key.Context == myContext); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:35:04.330

怎么样

```
var ou = OnlineUsers.First(x => x.Key.Context == "TADA"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:41:13.503

干得好：

```
ConcurrentDictionary<User, string> dict = new ConcurrentDictionary<User, string>();

dict.TryAdd(new User() { Context = "a", Ownder = false }, "aa");
dict.TryAdd(new User() { Context = "b", Ownder = false }, "bb");
dict.TryAdd(new User() { Context = "c", Ownder = true }, "cc");
dict.TryAdd(new User() { Context = "d", Ownder = false }, "dd");

IEnumerable<User> list = dict.Keys.Where(p => p.Context == "a"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T19:36:08.457

听起来你需要一个`Dictionary<string, User>`which，当给定上下文时，a`string`会告诉你`User`它对应于哪个。如果您需要多次执行此查找，并且使用额外的内存没有问题，则可能值得创建这样的字典。

如果您只进行一次或两次搜索，或者映射会经常更改以至于您无法使字典保持最新，那么您可以简单地使用`foreach`循环对字典进行线性搜索，或者使用 LINQ 方法，例如`First`or `Where`，如其他答案所示。

# python - Tkinter.Entry() 传递向上/向下键来跟踪......有没有办法用 ttk.Entry() 做到这一点？

> ID：12536992
> 
> 赞同：0
> 
> 时间：2012-09-21T19:27:53.433
> 
> 标签：python, tkinter, ttk

使用此代码片段，向上和向下键 (u"uf700", u"uf701") 传递到跟踪：

```
import Tkinter as tk
import ttk

def tracesv(var):
    print var

class foo()
    def __init__(self, parent=None):
        self.win = tk.Toplevel()
        self.svFrame = ttk.Frame(self.win)
        self.svFrame.grid()

        self.sv = tk.StringVar()
        self.sv.trace('w', lambda nm, idx, mode, var=self.sv: tracesv(var))
        self.svEntry = tk.Entry(self.svFrame, textvariable=self.sv)
        self.svEntry.grid()
..... etc. 
```

如果我用 ttk.Entry() 替换 tk.Entry()，向上和向下键不会传递到跟踪。有没有办法使用 ttk.Entry() 来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:52:52.373

听起来您在 Mac 上的 Tkinter 中发现了一个错误，因为不应将箭头键*传递*给变量跟踪。变量跟踪设计为在修改变量时调用。除非向上和向下箭头修改该值，否则它们不应导致跟踪触发。

由于这是一个错误，因此没有很好的方法将错误强加于其他小部件，例如 ttk.Entry 小部件。

如果您正在寻找一种在用户按下向上或向下键时调用函数的方法，那么正确的方法是为这些键添加绑定到小部件。

# jquery - 来自帖子的 Jquery 响应

> ID：12536996
> 
> 赞同：3
> 
> 时间：2012-09-21T19:28:04.383
> 
> 标签：jquery, response, jquery-post

我有问题....我在 php 中有一个监听器脚本，它可以做到这一点：

```
 if ($count != 1) {echo 'no';} else { echo "yes";} 
```

所以它会根据任务是否成功而回显“是”或“否”，并且在我的页面上我有这个：

```
 jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher', function (r) {
    if (r) $.post('includes/publishers/delete-publisher.php?publisherid=' + publisherid, 
    function(data) {
            if (data == 'no') {
            $.jGrowl('Error - PUBLISHER WAS ALREDY DELETED !');
            alert("Data Loaded: " + data);
            } else {
            $(element).parents('tr').remove();
            $.jGrowl('Publisher deleted');       
            alert("Data Loaded: " + data);
            }
        });
}); 
```

问题是尽管 delete-publisher.php 回显“否”（我看到它在警报框中回显） - JQuery 总是处理这个好像响应是“是”！？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:40:41.263

为自己省去很多麻烦，并使用 JSON 将响应发送回您的 javascript。做这样的事情（未经测试）：

PHP端：

```
header('Content-type: application/json');
if ($count != 1) {
    echo json_encode(array('success'=>false));
} else { 
    echo json_encode(array('success'=>true))
} 
```

JS端：

```
jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher', function (r) {
if (r) $.post('includes/publishers/delete-publisher.php?publisherid=' + publisherid, 
function(data) {
        if (data.success == false) {
            $.jGrowl('Error - PUBLISHER WAS ALREDY DELETED !');
            alert("Data Loaded: " + data);
        } else {
            $(element).parents('tr').remove();
            $.jGrowl('Publisher deleted');       
            alert("Data Loaded: " + data);
        }
    }, 'json'); 
```

});

这样，您也可以将错误消息传递回 JS。

您还应该习惯使用类似 Firebug for Firefox 之类的东西，这样您就可以查看网络流量的详细信息，并发布参数、响应标头等，设置 JS 断点以帮助调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:33:07.223

您的回复中可能有一些空格。尝试改用这个：

```
if ($.trim(data) == 'no') { 
```