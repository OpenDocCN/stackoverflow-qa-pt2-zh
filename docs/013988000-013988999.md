# StackOverflow 问答 13988000-13988999

# eclipse - 如何从 EObject 中获取属性，类似于属性视图

> ID：13988002
> 
> 赞同：0
> 
> 时间：2012-12-21T10:03:56.773
> 
> 标签：eclipse, properties, eclipse-rcp, ecore

我有一个 EObject 并想从中获取所有属性。我试图获得所有结构特征：

```
myEObject.eClass().getEAllStructuralFeatures() 
```

但我得到了太多我不想要的属性，比如对象 ID。

和

```
myEObject.eClass().getEStructuralFeatures() 
```

缺少一些显示在属性视图中的内容。

那么我怎样才能像属性视图一样从 EObject 中获得相同的属性列表呢？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:19:50.197

只需使用第一个选项并过滤掉您不希望显示的那些（如对象 ID）。这可能是最简单的方法。

如果它必须与属性视图中显示的列表绝对相同，最安全的选择是找到用于填充属性视图的代码并重用它。

# c# - 在项目列表中使用 lambda 表达式 [ENVDTE]

> ID：13988004
> 
> 赞同：-1
> 
> 时间：2012-12-21T10:04:00.410
> 
> 标签：c#, linq

目前，我正在通过运行一个循环来获得一个项目：

```
IList<Project> prjs = SolutionProjects.Projects();
Project p = null;
for (int i = 0; i < prjs.Count; i++)
{
    if (prjs[i].Name == "prj5")
    {
        p = prjs[i];
    }
} 
```

有没有办法使用 lambda 表达式来完成同样的事情？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:07:30.400

从您的循环中，您似乎获得了符合条件的 Last 项目，您可以尝试[Enumerable.LastOrDefault](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.lastordefault.aspx)，如果没有找到，它将返回最后一个项目或 null。

```
Project p  = prjs.LastOrDefault(r=> r.Name == "prj5"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:07:25.587

```
SolutionProjects.Projects().LastOrDefault(x => x.Name == "prj5") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:06:33.137

可以使用[Enumerable.LastOrDefault](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.lastordefault.aspx) ()，

```
var project = prjs.Where(c=>c.Name == "prj5").LastOrDefault(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:06:06.213

```
Project p = SolutionProjects.Projects()
                .Where(p=>p.Name = "prj5")
                .LastOrDefault(); 
```

# android - 如何根据屏幕分辨率更改点的位置？

> ID：13988010
> 
> 赞同：1
> 
> 时间：2012-12-21T10:04:35.323
> 
> 标签：android

假设我将一些点设为 (x1,y1) = (133,123)、(x2,y2) = (149,136)、(x3,y3) = (182,136) 等等，这样就形成了这样的形状： ![在此处输入图像描述](../Images/d7fa83318072550a26cdd7f78bd2ad4d.png) ![在此处输入图像描述](../Images/5def0ea292997cea516acde02245f3ee.png)

现在我想根据屏幕分辨率更改这些点的位置，以便形状调整大小并居中，并且形状不会受到损坏。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:10:26.573

[您可以从Android - Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html#dips-pels)文档`DisplayMetrics`中获取比例因子：

```
final float scale = getResources().getDisplayMetrics().density; 
```

将所有 x 和 y 坐标相乘，`scale`并且您的点与屏幕密度无关。

为了使图像适合屏幕（或`View`可能），您可以获取视图的[宽度](http://developer.android.com/reference/android/view/View.html#getWidth%28%29)和[高度](http://developer.android.com/reference/android/view/View.html#getHeight%28%29)。检查图像的宽度和高度并计算最大比例因子。

结合（乘以）两个比例因子，您的图像应该适合您的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:53:36.107

您可以使用 onMeasure 方法获取测量值，然后您可以从该位置开始绘画。我不知道下面的代码是否真正起作用，也许它需要优化。

```
protected void onDraw(Canvas canvas) {
        int height = getMeasuredHeight();
        int width = getMeasuredWidth();

        // Find the center
        px = width / 2;
        py = height / 2;

        canvas.drawColor(BACKGROUND);
        canvas.drawBitmap(mBitmap, 0, 0, null);
        canvas.drawPath(mPath, mPaint);

        // TODO remove if you dont want points to be drawn
        for (Point point : mPoints) {
            canvas.drawPoint(point.x + px, point.y + py, mPaint);
        }
    }

@Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int measuredHeight = measureHeight(heightMeasureSpec);
        int measuredWidth = measureWidth(widthMeasureSpec);

        setMeasuredDimension(measuredHeight, measuredWidth);
    }

    private int measureHeight(int measureSpec) {
        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        // Default size if no limits are specified.
        int result = 500;

        if (specMode == MeasureSpec.AT_MOST) {
            // Calculate the ideal size of your
            // control within this maximum size.
            // If your control fills the available
            // space return the outer bound.
            result = specSize;
        } else if (specMode == MeasureSpec.EXACTLY) {
            // If your control can fit within these bounds return that value.
            result = specSize;
        }
        return result;
    }

    private int measureWidth(int measureSpec) {
        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        // Default size if no limits are specified.
        int result = 500;

        if (specMode == MeasureSpec.AT_MOST) {
            // Calculate the ideal size of your control
            // within this maximum size.
            // If your control fills the available space
            // return the outer bound.
            result = specSize;
        } else if (specMode == MeasureSpec.EXACTLY) {
            // If your control can fit within these bounds return that value.
            result = specSize;
        }

        return result;
    } 
```

# php - 在计算其他表中的行时更新行

> ID：13988012
> 
> 赞同：0
> 
> 时间：2012-12-21T10:04:40.313
> 
> 标签：php, mysql, sql

我想知道是否有可能只用一个 SQL 语句来解决以下操作：

**表 A**：用户表

**表 B**：用户的外键条目

**表A**和**表B**之间的关系是`1 -> *`

因为我不想每次都为特定用户计算**表 B中的条目，所以我想在用户表中为该计数保留一列。**为此，我需要一个为每个用户更新此列的查询。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:42:47.677

你可以试试这个：`UPDATE USERS U SET COUNT_ENTRIES=(SELECT COUNT(*) FROM ENTRIES WHERE USERID=U.ID)`

# android - ContentValues 对表的字段排序错误，为什么？以及如何解决？

> ID：13988013
> 
> 赞同：2
> 
> 时间：2012-12-21T10:04:41.763
> 
> 标签：android, database, insert, android-sqlite

大家早上好;

我正在尝试在android中创建一个数据库类，它已经完成，我也成功创建了一个表。当我想使用 向表中插入行时，问题就来了`ContentValues`，它尝试以与表字段不同的顺序插入行，这会导致 logcat 中出现错误：没有这样的表，如下所示：

这些是我的变量：

```
 private static final String row_ID="RID";
    private static final String row_NAME="NAME";
    private static final String row_EMAIL="EMAIL";
    private static final String row_WEBSITE="WEBSITE";
    private static final String row_TELEPHONE1="PHONE_NUMBER1";
    private static final String row_TELEPHONE2="PHONE_NUMBER2";
    private static final String row_TELEPHONE3="PHONE_NUMBER3";
    private static final String row_TELEPHONE4="PHONE_NUMBER4";
    private static final String row_TELEPHONE5="PHONE_NUMBER5";
    private static final String db_NAME="ContactsDb";
    private static final String tab_NAME="ContactsTab";
    private static final int db_VERSION=2;
    private dbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase; 
```

我的桌子：

```
 String CREATE_TABLE="CREATE TABLE " + db_NAME + " ("
                            + row_ID + " INT PRIMARY KEY AUTOINCREMENT,"
                            + row_NAME + " TEXT, "
                            + row_EMAIL + " TEXT, "
                            + row_WEBSITE + " TEXT, "
                            + row_TELEPHONE1 + " TEXT, "
                            + row_TELEPHONE2 + " TEXT, "
                            + row_TELEPHONE3 + " TEXT, "
                            + row_TELEPHONE4 + " TEXT, "
                            + row_TELEPHONE5 + " TEXT);";
        db_name.execSQL(CREATE_TABLE); 
```

使用插入行`ContentValues`：

```
 public long createEntry(String name, String email, String website, String telephone1, String telephone2, String telephone3, String telephone4, String telephone5)
{
    ContentValues cv = new ContentValues ();

    Log.v("STATUS", "getting input data..");

    cv.put(row_NAME, name);
    cv.put(row_EMAIL, email);
    cv.put(row_WEBSITE, website);       
    cv.put(row_TELEPHONE1, telephone1);
    cv.put(row_TELEPHONE2, telephone2);
    cv.put(row_TELEPHONE3, telephone3);
    cv.put(row_TELEPHONE4, telephone4);
    cv.put(row_TELEPHONE5, telephone5);
    Log.v("STATUS", "got input data, inserting data....");

    return ourDatabase.insert(tab_NAME, null, cv);
} 
```

因此，当我运行此应用程序时，它会成功完成所有这些操作，直到它到达`ourDatabase.insert(tab_NAME, null, cv);`它显示错误：

```
 SQLiteLog            (1) no such table: ContactsTab
    SQLiteDatabase       Error inserting Name=Ahlam M. Hussain   PHONE_NUMBER5=
                         PHONE_NUMBER4=   PHONE_NUMBER3=    PHONE_NUMBER2=059999999
                         PHONE_NUMBER1= 09299999    EMAIL=ahlam@ahlam.com    EWEBSITE=
    SQLiteDatabase       android.database.sqlite.SQLiteException: no such table:
                         ContactsTab (code 1): ,while compiling: INSERT INTO
                         ContactsTab(NAME, PHONE_NUMBER5 PHONE_NUMBER4 PHONE_NUMBER3
                         PHONE_NUMBER2 PHONE_NUMBER1, EMAIL, WEBSITE) VALUES
                         (?,?,?,?,?,?,?,?) 
```

您会注意到它正在尝试在不同的字段 orderm 中插入行，因此它无法识别表。

那么该怎么办 ？？？我真的很讨厌那个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:56:12.483

你忘记戴上支架

*   row_TELEPHONE5 + "文本；";

它一定要是

*   row_TELEPHONE5 + " TEXT);";

## 编辑

用“CREATE TABLE IF NOT EXISTS”和“INTEGER PRIMARY KEY AUTOINCREMENT”而不是“INT PRIMARY KEY AUTOINCREMENT”试试。此外，您在 CREATE-TABLE 字符串中设置了 db_name 而不是 table_name。将其更改为您的 table_name：

```
 String CREATE_TABLE="CREATE TABLE IF NOT EXISTS " + tab_NAME + " ("
                        + row_ID + " INTEGER PRIMARY KEY AUTOINCREMENT,"
                        + row_NAME + " TEXT, "
                        + row_EMAIL + " TEXT, "
                        + row_WEBSITE + " TEXT, "
                        + row_TELEPHONE1 + " TEXT, "
                        + row_TELEPHONE2 + " TEXT, "
                        + row_TELEPHONE3 + " TEXT, "
                        + row_TELEPHONE4 + " TEXT, "
                        + row_TELEPHONE5 + " TEXT);";
    db_name.execSQL(CREATE_TABLE); 
```

# c# - .NET 正则表达式来检测和拆分字符串

> ID：13988014
> 
> 赞同：0
> 
> 时间：2012-12-21T10:04:46.927
> 
> 标签：c#, regex

我正在尝试编写一个正则表达式来将以下字符串拆分为段。

```
#if [Customer.OrderQuantity] > 5 #then 1000 #if [Customer.OrderQuantity] < 5 #then 500 #else 100

 1st Segment: #if [Customer.OrderQuantity] > 5 #then 1000
 2nd Segment: #if [Customer.OrderQuantity] < 5 #then 500
 3rd Segment: #else 100 
```

非常感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:39:50.177

这是产生你想要的输出

```
string source = "#if [Customer.OrderQuantity] > 5 #then 1000 #if [Customer.OrderQuantity] < 5 #then 500 #else 100";

string[] result = Regex.Split(source, @"\s*(?=#(?:if|else))");

foreach (string a in result) {
    Console.WriteLine(a);
} 
```

但我在某些时候猜测，我不知道这是否在其他情况下做你想要的。

# javascript - 表单在fancybox中不起作用

> ID：13988015
> 
> 赞同：1
> 
> 时间：2012-12-21T10:04:47.457
> 
> 标签：javascript, jquery, forms, fancybox, prestashop

我有一个表格，当我[试用](http://jsfiddle.net/Trufa/hQENa/1/)时效果很好（当然地址正确）。

当我在我的网站中使用它时，在花式框中它不起作用。什么也没有发生（控制台中也没有错误）。

相关代码为：

```
<a class="fancybox" href="#inline1" id="link_consultar">
  Consultar
</a>
<div style="display: none">
  <div id="inline1">
    Producto: {$product->
    name|escape:'htmlall':'UTF-8'}
    <br>
    <br>
    <form id="myForm" action="http://danielvi.com/send_mail.php" method="post">
      Nombre: 
      <input type="text" name="firstname">
      <br>
      <br>
      Consulta:
      <br>
      <textarea rows="4" cols="50">
      </textarea>
      <br>
      <br>
      <input type="submit" value="Enviar Consulta" />

    </form>
  </div>
</div> 
```

JS：

```
$(document).ready(function() {
    $('#myForm').submit(function(){
        alert("submitted");
    });
}); 
```

我也试过：

```
$(document).ready(function() {
    $("#myForm").on("submit", function(event){
        alert("submitted");
    });        
}); 
```

我已经包含了这样的表单插件：

```
<script src="http://malsup.github.com/jquery.form.js"></script> 
```

没有成功，最终目标是通过 AJAX 发送表单，这是一个简化的调试示例。

我也不明白的是，即使我删除了所有 js，它也不会将我引导到操作页面。

[你可以在这里](http://danielvi.com/index.php?id_product=1&controller=product&id_lang=4)看到一个活生生的例子（当你点击咨询时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:18:21.527

问题显示在您的实时站点上。检查源代码后，您可以看到您正在另一个表单中添加一个表单

```
<form id="buy_block"  action="http://danielvi.com/index.php?controller=cart" method="post">
    [...]
    <form id="myForm" action="http://danielvi.com/send_mail.php" method="post">
         [...]
    </form>
</form> 
```

这会使您正在使用的第二种形式无效。这就是为什么它什么也没做。除此之外，代码是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:14:09.237

在[实时站点上](http://danielvi.com/index.php?id_product=1&controller=product&id_lang=4)，您似乎`<form>`缺少`#fancybox-content`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:16:46.593

您在 form#buy_block 中有无效的联系表。尝试将整个`<div id="inline1">`移出`<form id="buy_block`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:19:34.433

```
$("input[type='submit']").click(function(){
    $.ajax: {
        type     : "POST",
        cache    : false,
        url      : "http://danielvi.com/send_mail.php",
        success: function(data) {
            $.fancybox({
                'width': 400,
                'height': 400,
                'enableEscapeButton' : false,
                'overlayShow' : true,
                'overlayOpacity' : 0,
                'hideOnOverlayClick' : false,
                'content' : data
            });
        }
    }
}); 
```

# php - PHP 上传图片 URL 无扩展名

> ID：13988018
> 
> 赞同：-1
> 
> 时间：2012-12-21T10:04:59.390
> 
> 标签：php

我需要一些关于如何做到这一点的帮助，我有这个 URL [http://mtv.mtvnimages.com/uri/mgid:uma:content:mtv.com:1698905?width=281&height=211](http://mtv.mtvnimages.com/uri/mgid:uma:content:mtv.com:1698905?width=281&height=211)，我需要上传它通过 PHP，但没有 URL 的扩展名所有像这样来自 MTV 的图像都是 .jpg，我知道这一点是因为我通过 imageshack.us 通过 URL 进行了上传，它生成/保存了扩展名为 .jpg 的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:09:57.837

我想象一些组合

```
$url = 'http://mtv.mtvnimages.com/uri/mgid:uma:content:mtv.com:1698905?width=281&height=211';
$image = file_get_contents($url);
file_put_contents('newimage.jpg', $image); 
```

应该有帮助

您也可以从 url 中提取 ID（我假设它是 ID）：

```
$url = 'http://mtv.mtvnimages.com/uri/mgid:uma:content:mtv.com:1698905?width=281&height=211';
preg_match('!(\d+)\?!', $url, $matches);
$image = file_get_contents($url);
file_put_contents($matches[1] . '.jpg', $image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:07:30.947

它很简单，我猜 `$uploadurl=" http://mtv.mtvnimages.com/uri/mgid:uma:content:mtv.com:1698905?width=281&height=211".".jpg"` 最后只是连接“.jpg”

# vb.net - VB.NET 后台工作者 60 秒超时

> ID：13988028
> 
> 赞同：0
> 
> 时间：2012-12-21T10:05:25.823
> 
> 标签：vb.net, backgroundworker

在我的应用程序启动期间，我正在进行长时间的数据库升级。在此开始之前，我展示了一个带有进度条的表单，以便用户知道正在发生某些事情并且他应该等待。

为了不阻止重绘进度条，我在后台工作人员中进行数据库升级。

代码如下所示：

```
 frmMain_Load(...)

            Dim wait As New frmWait
            wait.Show()

            Dim bw As New frmBWRebuildUserData
            bw.Start()
            Do While Not bw.Done
                System.Threading.Thread.Sleep(100)
            Loop

            'Okay, db update was done, now continue and show the main app window 
```

我的 frmBWRebuildUserData 看起来像这样：

```
Public Class frmBWRebuildUserData

Private m_bDone As Boolean

Public ReadOnly Property Done() As Boolean

    Get
        Return m_bDone
    End Get

End Property

Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork

    modAppDB.RebuildUserDB()

End Sub
Public Sub Start()

    Me.BackgroundWorker1.RunWorkerAsync()

End Sub

Private Sub BackgroundWorker1_RunWorkerCompleted(ByVal sender As Object, ByVal e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted

    m_bDone = True

End Sub
End Class 
```

但是 60 秒后，VB.NET 告诉我自 60 秒以来没有消息（我猜你知道这个错误）。

但是由于后台工作人员是为此目的而设计的，所以我认为我在这里做错了什么，但我不知道是什么。

另外，我的进度条没有重绘。

有人可以帮忙吗？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:19:14.990

有几件事。

后台工作程序中没有内置的 60 秒超时。所以它应该在你的代码中。

为什么要使用 backgroundWorker，然后在代码中引入睡眠周期？应该使用后台工作程序来使用户界面免于等待长时间操作的结束。

当被要求向用户界面元素报告其进度时，后台工作人员需要这样的东西（抱歉是 C#，但我认为你可以明白这一点）

```
 backgroundworker.ProgressChanged += backgroundworker_ProgressChanged;
 backgroundworker.WorkerReportsProgress = true; 
```

在这种情况下，您`modAppDB.RebuildUserDB()`需要致电

```
 backgroundworker.ReportProgress(percentComplete); 
```

对于您想要与进度条进行通信的每个步骤，当然，您需要在显示进度条的表单中拦截由 ReportProgress 调用触发的事件

```
private void backgroundworker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar.Value = (e.ProgressPercentage.ToString() + "%");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:38:11.477

Backgroundworker 主要适用于在 DoWork 中有循环的任务，它允许您在循环中执行一些 UI 反馈。如果你的 DoWork 只是调用另一个命令，它会等待这个命令完成并且在这段时间内不做任何事情。除此之外，使用 BGW 仍然允许主线程处理其消息而不会被阻塞，所以我认为在这里使用它仍然是完全正确的。
除此之外，您`backgroundworker1`的未声明，正如史蒂夫指出的那样，您的 Start()-Method 至少需要这第一行：
`Addhandler Backgroundworker1.DoWork, AddressOf BackgroundWorker1_DoWork`. 这会在调用时触发该函数`RunworkerAsync`。
有关线程通信的基本示例（以及与之相关的基本问题），请查看以下问题和答案：
[进度条和代码位置的多线程（vb.net）？](https://stackoverflow.com/questions/12533412/multithreading-for-a-progressbar-and-code-locations-vb-net)
我也不知道60秒的问题。

# css - 隐藏表格的空行

> ID：13988029
> 
> 赞同：0
> 
> 时间：2012-12-21T10:05:27.923
> 
> 标签：css, html, html-table

我想知道如何在 HTML 中隐藏一行。使用 CSS 方法`style="empty-cells : hide;"`似乎可行，但如果`<h4>`标签包含在空表中，则不会隐藏该行。

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
</head>
<body>

<form name="form_simple" action=" " method="get">
<table border="1px" style="empty-cells : hide;">
<tr><td><h4>Empty cells should not have any borders around them</h4></td></tr>
<tr><td></td></tr>
<tr><td><h4>Empty cells should not have any borders around them.</h4></td></tr>
<tr><td><h4>Empty cells should not have any borders around them.</h4></td></tr>
</table>
</form>
</body>
</html> 
```

`style="empty-cells : hide;"`适用于`<tr><td></td></tr>`，但不适用于`<tr><td><h4></h4></td></tr>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:23:31.560

您可以使用 javascript 做到这一点：

```
var rows = ​document.get​ElementsByTagName('tr');
​​​​for (var i=0;i<rows.length;i++) {
    var t = rows[i].innerText || rows[i].textContent;
    if (t.trim().length==0) rows[i].style.display='none';
}​ 
```

[示范](http://jsfiddle.net/WHGGz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:23:59.547

这是一个解决方法：

```
table td {
    background-color:olive;
    empty-cells:hide;
}
table td > *:empty {
    display:none;
} 
```

[jsfiddle](http://jsfiddle.net/qHGV5/1/)

如果您只想定位，请更改`*`为.`h4``h4`

请注意，根据[MDN](https://developer.mozilla.org/en-US/docs/CSS/empty-cells)，`empty-cells`应该适用于*表格单元格*元素，而不是*表格*（尽管浏览器似乎无论如何都接受它）。

# html - 在不使用 CSS 的打印模式下，将 HTML 文档设置为每个表格之间的分页符

> ID：13988031
> 
> 赞同：0
> 
> 时间：2012-12-21T10:05:34.773
> 
> 标签：html, css, google-chrome, firefox

我有一个包含 10 个表格的 HTML 文档，我希望每个表格在打印时出现在单独的页面上。

我没有使用 CSS 文件，因此需要在文档的实际 HTML 中包含该命令。

我在文档顶部添加了这个：

```
<head>
  <style>
    @media print
    {
      table {page-break-after:always}
    }
  </style>
</head> 
```

这在 Firefox 中似乎可以正常工作，但在 Chrome 中，整个`<style>`标签从`<head>`.

如果有更好的方法让它在 Chrome 中也能正常工作，我非常感谢你的建议。

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:16:53.023

您是否尝试设置`<style>`打印媒体？

```
<style type="text/css" media="print">
    ...
</style> 
```

# android - 图像识别后如何在 vuforia sdk ImageTarget 中显示布局而不是茶壶模型

> ID：13988035
> 
> 赞同：2
> 
> 时间：2012-12-21T10:05:46.713
> 
> 标签：android, augmented-reality

如果图像在 qualcomm vuforia sdk 中被识别，我们如何在布局中显示简单的文本，即“Hello”。我正在使用 ImageTarget 的 qualcomm vuforia sdk 示例，现在它在图像被识别后显示一个茶壶。我是增强现实的新手。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:19:55.833

在 JNI 文件夹中转到 imagetarget.cpp 文件注释以下内容

```
#include "Teapot.h" 
```

这是之后加载 3d 纹理的文件

```
 // Draw object:
    glBindTexture(GL_TEXTURE_2D, thisTexture->mTextureID);
    glTexCoordPointer(2, GL_FLOAT, 0, (const GLvoid*) &teapotTexCoords[0]);
    glVertexPointer(3, GL_FLOAT, 0, (const GLvoid*) &teapotVertices[0]);
    glNormalPointer(GL_FLOAT, 0,  (const GLvoid*) &teapotNormals[0]);
    glDrawElements(GL_TRIANGLES, NUM_TEAPOT_OBJECT_INDEX, GL_UNSIGNED_SHORT,
                   (const GLvoid*) &teapotIndices[0]); 
```

对于顶点注释以下行

```
 glUseProgram(shaderProgramID);

    glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0,
                          (const GLvoid*) &teapotVertices[0]);
    glVertexAttribPointer(normalHandle, 3, GL_FLOAT, GL_FALSE, 0,
                          (const GLvoid*) &teapotNormals[0]);
    glVertexAttribPointer(textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0,
                          (const GLvoid*) &teapotTexCoords[0]); 
```

和这个

`glDrawElements(GL_TRIANGLES, NUM_TEAPOT_OBJECT_INDEX, GL_UNSIGNED_SHORT, (const GLvoid*) &teapotIndices[0]);`

即在标记上显示纹理编译代码使用

```
ndk-build in Cmd 
```

并运行茶壶将不会显示并在创建时以android的正常方式显示您自己的文本按钮

# ios - 未知的崩溃原因（附有 CrashReport）SIGTRAP。AF网络？

> ID：13988037
> 
> 赞同：15
> 
> 时间：2012-12-21T10:05:52.187
> 
> 标签：ios, ios5, ios6, crash-reports, plcrashreporter

我在 AppStore 中的应用程序中不断遇到这些崩溃。CrashReport 总是如下所示：

```
Incident Identifier: 986486D7-F013-4102-B9E3-84F923223914
CrashReporter Key:   [TODO]
Hardware Model:      iPhone4,1
Process:         MyApp [57885]
Path:            /Users/USER/MyApp.app/MyApp
Identifier:      de.myapp.iphone
Version:         12475
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2012-12-20 15:48:53 +0000
OS Version:      iPhone OS 6.0.1 (10A523)
Report Version:  104

Exception Type:  SIGTRAP
Exception Codes: #0 at 0x3abd62be
Crashed Thread:  0

Thread 0 Crashed:
0   CoreFoundation                      0x363582be CFRelease + 18
1   WebCore                             0x383de395 WebCore::stopSharedTimer() + 33
2   WebCore                             0x38433515 WebCore::TimerBase::~TimerBase() + 45
3   WebCore                             0x3846003b WebCore::Document::~Document() + 2751
4   WebCore                             0x3845f56d WebCore::HTMLDocument::~HTMLDocument() + 81
5   WebCore                             0x384e9473 WebCore::JSNodeOwner::finalize(JSC::Handle<JSC::Unknown>, void*) + 79
6   JavaScriptCore                      0x321e2067 JSC::WeakBlock::sweep() + 87
7   JavaScriptCore                      0x321e22ad JSC::WeakSet::sweep() + 53
8   JavaScriptCore                      0x3213d877 JSC::Heap::collect(JSC::Heap::SweepToggle) + 175
9   JavaScriptCore                      0x3213cad9 JSC::DefaultGCActivityCallbackPlatformData::timerDidFire(__CFRunLoopTimer*, void*) + 145
10  CoreFoundation                      0x363ec5df __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 15
11  CoreFoundation                      0x363ec291 __CFRunLoopDoTimer + 273
12  CoreFoundation                      0x363eaf01 __CFRunLoopRun + 1233
13  CoreFoundation                      0x3635debd CFRunLoopRunSpecific + 357
14  CoreFoundation                      0x3635dd49 CFRunLoopRunInMode + 105
15  GraphicsServices                    0x3490e2eb GSEventRunModal + 75
16  UIKit                               0x37b2b2f9 UIApplicationMain + 1121
17  MyApp                               0x00003927 main (main.m:20)

Thread 5:
0   libsystem_kernel.dylib              0x3681feb4 mach_msg_trap + 20
1   CoreFoundation                      0x363ec045 __CFRunLoopServiceMachPort + 129
2   CoreFoundation                      0x363eada3 __CFRunLoopRun + 883
3   CoreFoundation                      0x3635debd CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3635dd49 CFRunLoopRunInMode + 105
5   Foundation                          0x307f978f -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 255
6   Foundation                          0x3089d05d -[NSRunLoop(NSRunLoop) run] + 81
7   MyApp                               0x000c3225 +[AFURLConnectionOperation networkRequestThreadEntryPoint:] (AFURLConnectionOperation.m:157)
8   Foundation                          0x308a667d __NSThread__main__ + 973
9   libsystem_c.dylib                   0x33ab5311 _pthread_start + 309

Thread 6:
0   libsystem_kernel.dylib              0x3681feb4 mach_msg_trap + 20
1   CoreFoundation                      0x363ec045 __CFRunLoopServiceMachPort + 129
2   CoreFoundation                      0x363eada3 __CFRunLoopRun + 883
3   CoreFoundation                      0x3635debd CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3635dd49 CFRunLoopRunInMode + 105
5   Foundation                          0x30822bcd +[NSURLConnection(Loader) _resourceLoadLoop:] + 309
6   Foundation                          0x308a667d __NSThread__main__ + 973
7   libsystem_c.dylib                   0x33ab5311 _pthread_start + 309

Thread 7:
0   libsystem_kernel.dylib              0x368300fc __psynch_mutexwait + 24
1   CFNetwork                           0x3137647f __CFURLCache::ExecuteSQLSelectAndCreateResponse(__CFString const*, bool) + 179
2   CFNetwork                           0x313763b1 __CFURLCache::LookupCachedURLResponse(__CFURLCacheNode*, bool) + 13
3   CFNetwork                           0x31387893 __CFURLCache::CopyResponseForRequest(_CFURLRequest const*, bool) + 231
4   CFNetwork                           0x313c2ee1 __CFURLCacheCopyResponseForRequestInternal(_CFURLCache const*, _CFURLRequest const*, unsigned char) + 33
5   CFNetwork                           0x313fe8bd ___loaderEvent_StartLoad_block_invoke_0 + 45
6   CFNetwork                           0x3141e657 ConnectionSession::withStorageSession(void ( block_pointer)(StorageSession const*)) const + 83
7   CFNetwork                           0x313ff9d5 __withStorageSessionAsync_block_invoke_0 + 17
8   CFNetwork                           0x313d3639 __withConnectionSessionAsync_block_invoke_0 + 17
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 8:
0   libsystem_kernel.dylib              0x368300fc __psynch_mutexwait + 24
1   CFNetwork                           0x3137647f __CFURLCache::ExecuteSQLSelectAndCreateResponse(__CFString const*, bool) + 179
2   CFNetwork                           0x313763b1 __CFURLCache::LookupCachedURLResponse(__CFURLCacheNode*, bool) + 13
3   CFNetwork                           0x31387893 __CFURLCache::CopyResponseForRequest(_CFURLRequest const*, bool) + 231
4   CFNetwork                           0x313c2ee1 __CFURLCacheCopyResponseForRequestInternal(_CFURLCache const*, _CFURLRequest const*, unsigned char) + 33
5   CFNetwork                           0x313fe8bd ___loaderEvent_StartLoad_block_invoke_0 + 45
6   CFNetwork                           0x3141e657 ConnectionSession::withStorageSession(void ( block_pointer)(StorageSession const*)) const + 83
7   CFNetwork                           0x313ff9d5 __withStorageSessionAsync_block_invoke_0 + 17
8   CFNetwork                           0x313d3639 __withConnectionSessionAsync_block_invoke_0 + 17
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 10:
0   libsystem_kernel.dylib              0x368300fc __psynch_mutexwait + 24
1   CFNetwork                           0x3137647f __CFURLCache::ExecuteSQLSelectAndCreateResponse(__CFString const*, bool) + 179
2   CFNetwork                           0x313763b1 __CFURLCache::LookupCachedURLResponse(__CFURLCacheNode*, bool) + 13
3   CFNetwork                           0x31387893 __CFURLCache::CopyResponseForRequest(_CFURLRequest const*, bool) + 231
4   CFNetwork                           0x313c2ee1 __CFURLCacheCopyResponseForRequestInternal(_CFURLCache const*, _CFURLRequest const*, unsigned char) + 33
5   CFNetwork                           0x313fe8bd ___loaderEvent_StartLoad_block_invoke_0 + 45
6   CFNetwork                           0x3141e657 ConnectionSession::withStorageSession(void ( block_pointer)(StorageSession const*)) const + 83
7   CFNetwork                           0x313ff9d5 __withStorageSessionAsync_block_invoke_0 + 17
8   CFNetwork                           0x313d3639 __withConnectionSessionAsync_block_invoke_0 + 17
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 13:
0   libsystem_kernel.dylib              0x3682239c pread + 20
1   libsqlite3.dylib                    0x33978109 sqlite3_get_table + 125
2   libsqlite3.dylib                    0x339772a7 sqlite3_get_table + 125
3   libsqlite3.dylib                    0x33d25fb1 0x33cde000 + 294833
4   libsqlite3.dylib                    0x33d13807 0x33cde000 + 219143
5   libsqlite3.dylib                    0x33d0d49d 0x33cde000 + 193693
6   libsqlite3.dylib                    0x3398648f sqlite3_step + 2143
7   CFNetwork                           0x3138276b __CFURLCache::DoBulkLookupAndStoreBasedOnTime(__CFString const*) + 459
8   CFNetwork                           0x313c4667 __ExecuteSQLSelectAndCreateResponse_block_invoke_0 + 35
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 17:
0   libsystem_kernel.dylib              0x3683008c __psynch_cvwait + 24
1   libsystem_c.dylib                   0x33aadaa5 pthread_cond_timedwait + 45
2   JavaScriptCore                      0x320d6c75 WTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 109
3   JavaScriptCore                      0x321e8557 JSC::BlockAllocator::blockFreeingThreadMain() + 83
4   JavaScriptCore                      0x321fafab _ZN3WTFL19wtfThreadEntryPointEPv + 15
5   libsystem_c.dylib                   0x33ab5311 _pthread_start + 309

Thread 18:
0   libsystem_kernel.dylib              0x3683008c __psynch_cvwait + 24
1   libsystem_c.dylib                   0x33ab7f19 pthread_cond_wait + 41
2   JavaScriptCore                      0x3217bf41 JSC::SlotVisitor::drainFromShared(JSC::SlotVisitor::SharedDrainMode) + 149
3   JavaScriptCore                      0x3217be81 JSC::MarkStackThreadSharedData::markingThreadMain() + 145
4   JavaScriptCore                      0x321fafab _ZN3WTFL19wtfThreadEntryPointEPv + 15
5   libsystem_c.dylib                   0x33ab5311 _pthread_start + 309

Thread 22:
0   libsystem_kernel.dylib              0x368300fc __psynch_mutexwait + 24
1   CFNetwork                           0x3137647f __CFURLCache::ExecuteSQLSelectAndCreateResponse(__CFString const*, bool) + 179
2   CFNetwork                           0x313763b1 __CFURLCache::LookupCachedURLResponse(__CFURLCacheNode*, bool) + 13
3   CFNetwork                           0x31387893 __CFURLCache::CopyResponseForRequest(_CFURLRequest const*, bool) + 231
4   CFNetwork                           0x313c2ee1 __CFURLCacheCopyResponseForRequestInternal(_CFURLCache const*, _CFURLRequest const*, unsigned char) + 33
5   CFNetwork                           0x313fe8bd ___loaderEvent_StartLoad_block_invoke_0 + 45
6   CFNetwork                           0x3141e657 ConnectionSession::withStorageSession(void ( block_pointer)(StorageSession const*)) const + 83
7   CFNetwork                           0x313ff9d5 __withStorageSessionAsync_block_invoke_0 + 17
8   CFNetwork                           0x313d3639 __withConnectionSessionAsync_block_invoke_0 + 17
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 25:
0   libsystem_kernel.dylib              0x368300fc __psynch_mutexwait + 24
1   CFNetwork                           0x3137647f __CFURLCache::ExecuteSQLSelectAndCreateResponse(__CFString const*, bool) + 179
2   CFNetwork                           0x313763b1 __CFURLCache::LookupCachedURLResponse(__CFURLCacheNode*, bool) + 13
3   CFNetwork                           0x31387893 __CFURLCache::CopyResponseForRequest(_CFURLRequest const*, bool) + 231
4   CFNetwork                           0x313c2ee1 __CFURLCacheCopyResponseForRequestInternal(_CFURLCache const*, _CFURLRequest const*, unsigned char) + 33
5   CFNetwork                           0x313fe8bd ___loaderEvent_StartLoad_block_invoke_0 + 45
6   CFNetwork                           0x3141e657 ConnectionSession::withStorageSession(void ( block_pointer)(StorageSession const*)) const + 83
7   CFNetwork                           0x313ff9d5 __withStorageSessionAsync_block_invoke_0 + 17
8   CFNetwork                           0x313d3639 __withConnectionSessionAsync_block_invoke_0 + 17
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 43:
0   libsystem_kernel.dylib              0x3682239c pread + 20
1   libsqlite3.dylib                    0x33978109 sqlite3_get_table + 125
2   libsqlite3.dylib                    0x339772a7 sqlite3_get_table + 125
3   libsqlite3.dylib                    0x33d25fb1 0x33cde000 + 294833
4   libsqlite3.dylib                    0x33d13807 0x33cde000 + 219143
5   libsqlite3.dylib                    0x33d0d49d 0x33cde000 + 193693
6   libsqlite3.dylib                    0x3398648f sqlite3_step + 2143
7   CFNetwork                           0x3138276b __CFURLCache::DoBulkLookupAndStoreBasedOnTime(__CFString const*) + 459
8   CFNetwork                           0x313c4667 __ExecuteSQLSelectAndCreateResponse_block_invoke_0 + 35
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 44:
0   libsystem_kernel.dylib              0x368300fc __psynch_mutexwait + 24
1   CFNetwork                           0x31382619 __CFURLCache::DoBulkLookupAndStoreBasedOnTime(__CFString const*) + 121
2   CFNetwork                           0x313c4667 __ExecuteSQLSelectAndCreateResponse_block_invoke_0 + 35
3   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
4   libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
5   libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
6   libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 47:
0   libsystem_kernel.dylib              0x368300fc __psynch_mutexwait + 24
1   CFNetwork                           0x3137647f __CFURLCache::ExecuteSQLSelectAndCreateResponse(__CFString const*, bool) + 179
2   CFNetwork                           0x313763b1 __CFURLCache::LookupCachedURLResponse(__CFURLCacheNode*, bool) + 13
3   CFNetwork                           0x31387893 __CFURLCache::CopyResponseForRequest(_CFURLRequest const*, bool) + 231
4   CFNetwork                           0x313c2ee1 __CFURLCacheCopyResponseForRequestInternal(_CFURLCache const*, _CFURLRequest const*, unsigned char) + 33
5   CFNetwork                           0x313fe8bd ___loaderEvent_StartLoad_block_invoke_0 + 45
6   CFNetwork                           0x3141e657 ConnectionSession::withStorageSession(void ( block_pointer)(StorageSession const*)) const + 83
7   CFNetwork                           0x313ff9d5 __withStorageSessionAsync_block_invoke_0 + 17
8   CFNetwork                           0x313d3639 __withConnectionSessionAsync_block_invoke_0 + 17
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 49:
0   libsystem_kernel.dylib              0x368300fc __psynch_mutexwait + 24
1   CFNetwork                           0x3137647f __CFURLCache::ExecuteSQLSelectAndCreateResponse(__CFString const*, bool) + 179
2   CFNetwork                           0x313763b1 __CFURLCache::LookupCachedURLResponse(__CFURLCacheNode*, bool) + 13
3   CFNetwork                           0x31387893 __CFURLCache::CopyResponseForRequest(_CFURLRequest const*, bool) + 231
4   CFNetwork                           0x313c2ee1 __CFURLCacheCopyResponseForRequestInternal(_CFURLCache const*, _CFURLRequest const*, unsigned char) + 33
5   CFNetwork                           0x313fe8bd ___loaderEvent_StartLoad_block_invoke_0 + 45
6   CFNetwork                           0x3141e657 ConnectionSession::withStorageSession(void ( block_pointer)(StorageSession const*)) const + 83
7   CFNetwork                           0x313ff9d5 __withStorageSessionAsync_block_invoke_0 + 17
8   CFNetwork                           0x313d3639 __withConnectionSessionAsync_block_invoke_0 + 17
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 50:
0   libsystem_kernel.dylib              0x368300fc __psynch_mutexwait + 24
1   CFNetwork                           0x3137647f __CFURLCache::ExecuteSQLSelectAndCreateResponse(__CFString const*, bool) + 179
2   CFNetwork                           0x313763b1 __CFURLCache::LookupCachedURLResponse(__CFURLCacheNode*, bool) + 13
3   CFNetwork                           0x31387893 __CFURLCache::CopyResponseForRequest(_CFURLRequest const*, bool) + 231
4   CFNetwork                           0x313c2ee1 __CFURLCacheCopyResponseForRequestInternal(_CFURLCache const*, _CFURLRequest const*, unsigned char) + 33
5   CFNetwork                           0x313fe8bd ___loaderEvent_StartLoad_block_invoke_0 + 45
6   CFNetwork                           0x3141e657 ConnectionSession::withStorageSession(void ( block_pointer)(StorageSession const*)) const + 83
7   CFNetwork                           0x313ff9d5 __withStorageSessionAsync_block_invoke_0 + 17
8   CFNetwork                           0x313d3639 __withConnectionSessionAsync_block_invoke_0 + 17
9   libdispatch.dylib                   0x3807711f _dispatch_call_block_and_release + 11
10  libdispatch.dylib                   0x3807b961 _dispatch_root_queue_drain + 253
11  libdispatch.dylib                   0x3807bac1 _dispatch_worker_thread2 + 85
12  libsystem_c.dylib                   0x33aaaa11 _pthread_wqthread + 361

Thread 51:
0   libsystem_kernel.dylib              0x36830d98 __workq_kernreturn + 8
1   libsystem_c.dylib                   0x33aaaa16 _pthread_wqthread + 366

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000     r1: 0x5df80157     r2: 0x1ddd4000     r3: 0x38596026 
    r4: 0x3be2c86c     r5: 0x00000000     r6: 0x00000000     r7: 0x2fd1be1c 
    r8: 0x00000000     r9: 0x00293498    r10: 0x00388800    r11: 0x04432d90 
    ip: 0x3bd68a50     sp: 0x2fd1bde8     lr: 0x368ba395     pc: 0x3abd62be 
  cpsr: 0x60000030 
```

我基本上在 UIViewController 中使用 AFJSONRequestOperation，它已被推送到 NavigationController 以获取显示其内容的 JSON。是 AFNetworking 导致了崩溃吗（在线程 5 中）？或者它可能是我的代码中的一个缺陷？我真的被卡住了，而且经常发生。非常感谢任何帮助或问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-02T22:54:56.420

根据崩溃，它不是线程 5 的问题；这是线程 0 中的问题。

Brian 在他的博客文章中添加了一些关于计时器如何在 webkit 中运行的背景信息。

[http://brrian.tumblr.com/post/13951629341/how-webkits-event-model-works](http://brrian.tumblr.com/post/13951629341/how-webkits-event-model-works)

有趣的是，问题操作系统是 6.0.1，而不是较新的版本 6.1，也不是 7.x（截至撰写本文时）。

崩溃发生在 CFRelease 期间，这往往发生在已经释放的资源被释放时。我的建议是看看问题是否发生在任何较新的操作系统上，因为这听起来像是一个 WebKit 错误。Webkit 是负责定时器的代码。

无论如何，计时器代码已被重新​​设计： [https ://trac.webkit.org/changeset/143210](https://trac.webkit.org/changeset/143210)

所以我认为最好的选择是看看最新的 iOS 是否有过这种崩溃，或者最新的 6.x (6.1)。

如果不这样做，并假设您无法重现该问题，因为您正在进行网络查询（和 DB 查询），计时器出现的经典方式是当您的网络连接速度较慢/不可靠时。使用 Apple 的 Network Link Conditioner 来模拟这种情况。这可能会显示 WebKit 中的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T14:28:28.897

检查是否有广告打开了 iTunes。也许您在应用程序的初始化中打开了太多线程。您可以尝试将这些请求排入队列。只是随意的想法。。

# c# - 重新锐化。为什么要转换为自动属性？

> ID：13988043
> 
> 赞同：7
> 
> 时间：2012-12-21T10:06:15.240
> 
> 标签：c#, resharper

Resharper 建议我将以下代码更改为自动属性。谁能解释为什么这会更好？

```
private List<Configuration> _configurations;
public List<Configuration> Configurations
{
    get { return _configurations; }
    set { _configurations = value; }
} 
```

到：

```
public List<Configuration> Configurations { get; set; } 
```

为什么可以对原始类型执行此操作，但建议对对象类型执行此操作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T10:17:36.953

考虑两段等效的代码：

```
private List<Configuration> _configurations;
public List<Configuration> Configurations
{
    get { return _configurations; }
    set { _configurations = value; }
} 
```

和

```
public List<Configuration> Configurations { get; set; } 
```

对于读者来说，假设她了解 C#，那么第二段代码读起来很快。第一个需要更长的时间并且不添加任何信息。事实上，它添加了无用的信息：我有一个 property `Configurations`，但我也有一个等价的 field `_configurations`，并且类的其余部分中的代码可能会使用它们中的任何一个，因此我必须将它们都考虑在内。现在想象你的类有 15 个像这样的属性，例如。使用自动属性可以大大降低阅读代码的人的复杂性。

此外，如果您一直使用自动属性，那么每当您编写非自动属性时，都会立即警告读者那里发生了一些事情。如果您不使用自动属性，这些有用的信息将被隐藏。

总之，一致使用自动属性：

*   减少代码长度
*   减少阅读和理解课程所需的时间
*   隐藏无用信息
*   使有用的信息更容易找到

有什么不喜欢的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:09:49.680

两个代码之间的行为是相同的，自动属性只是语法糖，使没有逻辑的属性更易于阅读。

有关更多说明，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/bb384054.aspx)：

> 在 C# 3.0 及更高版本中，当属性访问器中不需要额外的逻辑时，自动实现的属性使属性声明更加简洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:14:37.700

我猜 re-sharper 已经确定自动属性在这里会更好，因为您的代码只是获取和设置支持变量，就像自动属性一样。

如果 re-sharper 检测到您的 getter 和 setter 不仅仅是分配和读取支持变量，我的假设是这不会成为问题。

由于各种原因，我不喜欢重新锐化。我更喜欢使用 StyleCop 和代码分析 (FXCop)，但它的好处在于它可以帮助您的代码更具可读性和可维护性。这就是它在这里所做的一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:10:06.780

如果您没有在属性中做任何聪明的事情，那么它只会减少代码，并增强代码的可读性 - 在幕后它会生成相同的代码。

你不想这样做的唯一一次是如果你想做这样的事情：

```
private readonly List<Configuration> _configurations = new List<Configuration>();
public List<Configuration> Configurations
{
    get { return _configurations; }        
} 
```

我可能会推荐它，因为该属性将永远不会为空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T10:48:19.957

使用旧符号的唯一（暂时？）优点是您可以在遇到`set`and`get`方法时中断它们。

# objective-c - 表格视图单元格按钮不响应它的索引位置

> ID：13988045
> 
> 赞同：0
> 
> 时间：2012-12-21T10:06:33.090
> 
> 标签：objective-c, ios5, uitableview

我有自定义表格视图单元格，其中有两个 UIButton 和一个名为 edit 和 cancel 的文本字段以及一个 textField。当我同时单击编辑时，TextFeild 交互已启用并且取消按钮图像应该更改。它对我来说很好用！！

但是当我单击编辑按钮时，另一个单元格取消 bitton 图像 id 自动更改！我知道发生这种情况是因为我正在重复使用电池！但我无法找到解决方案......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    simpleTableIdentifier = @"MenuNameCell";
    cell = (MenuNameCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (!cell) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MenuNameCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
        NSLog(@"---------new cell agin");          
    }
    else
    {
        for (UIView *view in [cell.contentView subviews])
                [view removeFromSuperview];
        NSLog(@"---------older use");
       // _checkButton = (UIButton *)[cell.contentView viewWithTag:indexPath.row];
       // _cancelButton = (UIButton *)[cell.contentView viewWithTag:indexPath.row];
    }

    // Creating Label Menu Name
    _nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(8, 11, 82, 21)];
    _nameLabel.backgroundColor = [UIColor clearColor];
    _nameLabel.text =  [_hotel._orderedMenus objectAtIndex:indexPath.row];

    // Creating Label Menu Cost
    _amountMenu   = [[UILabel alloc] initWithFrame:CGRectMake(167, 13, 44, 21)];
    _amountMenu.backgroundColor = [UIColor clearColor];
    _amountMenu.text  = [[_hotel._menuPrices objectAtIndex:indexPath.row] stringValue];

    // Creating Text Field For Order Quantity
    _textFieldQuantity = [[UITextField alloc] initWithFrame:CGRectMake(125,14,42,21)];
    _textFieldQuantity.userInteractionEnabled = NO;
    _textFieldQuantity.text = [[_hotel._selectedQuantity objectAtIndex:indexPath.row] stringValue];

    // Creating Button For Check Order
    _checkButton  = [UIButton buttonWithType:UIButtonTypeCustom];
    [_checkButton setFrame:CGRectMake(232, 13, 25, 28)];
    [_checkButton setBackgroundImage:[UIImage imageNamed:@"edit.png"]forState:UIControlStateNormal];
    [_checkButton addTarget:self action:@selector(editQuantity:) forControlEvents:UIControlEventTouchUpInside];
    [_checkButton setTag:indexPath.row];

    // Creating Button For CANCEL Order
    _cancelButton  = [UIButton buttonWithType:UIButtonTypeCustom];
    [_cancelButton setFrame:CGRectMake(265, 13, 25, 28)];
    [_cancelButton setBackgroundImage:[UIImage imageNamed:@"cancel.png"] forState:UIControlStateNormal];
    [_cancelButton addTarget:self  action:@selector(cancelOreder:) forControlEvents:UIControlEventTouchUpInside];
    [_cancelButton setTag:indexPath.row];

    // Adding All To Call Content View
    [cell.contentView addSubview:_nameLabel];
    [cell.contentView addSubview:_amountMenu];
    [cell.contentView addSubview:_textFieldQuantity];
    [cell.contentView addSubview:_checkButton];
    [cell.contentView addSubview:_cancelButton];

    return cell;
} 
```

编辑：

```
-(void)editQuantity:(id)sender 
{ 
    _textFieldQuantity.userInteractionEnabled = YES; 
    button = (UIButton *)sender; 
    row = button.tag; 
    NSLog(@"Check Button index is %d",row); 
    UIImage *buttonImage = [UIImage imageNamed:@"edit_over.png"]; 
    [_checkButton setBackgroundImage:buttonImage forState:UIControlStateNormal]; 
    UIImage *buttonImageCancel = [UIImage imageNamed:@"check.png"]; 
    [_cancelButton setBackgroundImage:buttonImageCancel forState:UIControlStateNormal]; 
    _cancelButton.tag = 0; 
}

-(void)cancelOreder:(id)sender{

button = (UIButton *)sender;
row = button.tag;
NSLog(@"The Row Selected iS At Cancel Order ISSSS----%d", row);
if (_cancelButton.tag ==  0){
    _textFieldQuantity.userInteractionEnabled = NO;
    UIImage *buttonImageCancel = [UIImage imageNamed:@"check_over.png"];
    [_cancelButton setBackgroundImage:buttonImageCancel  forState:UIControlStateNormal];
    UIImage *buttonImageCancel1 = [UIImage imageNamed:@"cancel.png"];
    [_cancelButton setBackgroundImage:buttonImageCancel1 forState:UIControlStateNormal];
    UIImage *buttonImage = [UIImage imageNamed:@"edit.png"];
    [_checkButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    _cancelButton.tag = 1;
}
else
{
    UIAlertView *alert =  [[UIAlertView alloc] initWithTitle:@"iHomeDelivery" message:@"Do You Want To Cancel the Order" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:47:07.167

您的问题是 _textFieldQuantity （和其他）是一个实例变量。当 editQuantity: 和 cancelOreder: 被调用时，实例变量仍然具有上次在 cellForRowAtIndexPath: 中添加单元格时设置的值。

你能做些什么来修复它？第一个：您可以在按钮的标签中设置行。然后，当点击按钮并调用操作时，获取标签并获取单元格（您可以调用表格的 cellForRowAtIndexPath 方法来获取它。这与您实现的委托方法不同），然后找到适当的文本字段。

第二：更多的工作，但可能更聪明的是实现表格单元格的子类。将操作方法​​移动到那个单元类。这样做每个按钮的动作都指向一个单独的对象，然后是单元类而不是视图控制器。单元类可以有自己的 textField 实例变量。它甚至应该为 textField 和其他 UIItems 提供属性，以便您可以在 cellForRowAtIndexPath 中设置它们的值。

我建议将第一个解决方案作为快速入门。但为了将来的使用，我强烈建议采用第二种方式。这种方式将在未来的类似情况下帮助您。

# javascript - 检查某人的带宽并根据它加载内容

> ID：13988051
> 
> 赞同：10
> 
> 时间：2012-12-21T10:06:53.827
> 
> 标签：javascript, bandwidth, content-delivery-network

我已经看到了许多没有回答这个问题的问题，是否可以使用 java 脚本检查某人的带宽并根据它加载特定的内容？

在使用我的手机和在不知名的地方时，BBC 似乎给了我低质量的图像。

从外观上看，这个很酷的服务就是这样做的，而且它是一个 CDN，所以它可以是服务器端的。

[http://www.resrc.it/docs/](http://www.resrc.it/docs/)

有谁知道他们是怎么做到的？或者我如何使用 asp.net 或 javascript 或社区开源插件来做到这一点。

[我认为https://github.com/yahoo/boomerang/](https://github.com/yahoo/boomerang/)可能有可能，但不确定这是它的真正目的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T10:47:34.117

基本上你这样做：

*   启动计时器
*   通过 ajax 调用加载固定大小的文件，例如图像
*   停止计时器
*   取一些样本并计算平均 badwidth

像这样的东西可以工作：

```
//http://upload.wikimedia.org/wikipedia/commons/5/51/Google.png
//Size = 238 KB
function measureBW(cnt, cb) {
    var start = new Date().getTime();
    var bandwidth;
    var i = 0;
    (function rec() {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open('GET', 'http://upload.wikimedia.org/wikipedia/commons/5/51/Google.png', true);

        xmlHttp.onreadystatechange = function () {
            if (xmlHttp.readyState == 4) {
                var x = new Date().getTime() - start;
                bw = Number(((238 / (x / 1000))));
                bandwidth = ((bandwidth || bw) + bw) / 2;
                i++;
              if (i < cnt) {
                start = new Date().getTime();rec();
              }
                else cb(bandwidth.toFixed(0));
            }
        };
        xmlHttp.send(null);
    })();

}

measureBW(10, function (e) {
    console.log(e);
}); 
```

*并非这不适`var xmlHttp = new XMLHttpRequest();`用于所有浏览器，您应该检查 UserAgent 并使用正确的*

当然，它只是一个估计值。

这是一个[JSBin](http://jsbin.com/oyekim/1/edit)示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:13:04.000

1.  启动计时器。
2.  向您的服务器发送一个 AJAX 请求，请求一个已知大小的文件。
3.  当 AJAX 请求完成加载后，停止计时器，并根据经过的时间和文件大小计算带宽。

JavaScript 的问题是用户可以禁用它。（这在手机上更常见，较小的图像恰好更好）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T10:51:31.580

我已经根据时间图像下载来解决[这个问题（参考：](https://s3.amazonaws.com/template500/bandwidth.html) [http](http://www.ehow.com/how_5804819_detect-connection-speed-javascript.html) ://www.ehow.com/how_5804819_detect-connection-speed-javascript.html ）

*警告的话*：

它说我的速度是**1.81Mbps** ,

但根据 SpeedTest.Net 我的速度是这样的：

![在此处输入图像描述](../Images/b30c06fef45318bae5b713553ae63e07.png)

下载时间的逻辑似乎是正确的，但不确定它是否准确？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T11:11:35.363

好吧，就像我在评论中所说的那样，您可以选择两种方法：

1）您在移动应用程序的上下文中，然后您可以直接查询设备使用的技术，以便您可以直接通知服务器您可以呈现的内容类型（和大小）。我认为 phone gap 可以帮助您使用 JavaScript 访问一些本机移动 API。

2）服务器定时器的事情。您可以自己“提供”一些文件，假设您的登录页面中有一个魔术文件，一旦客户端请求该文件，您就可以使用自定义处理程序获取此 HTTP 请求。您通过写入输出流来“手动”提供文件，并测量发送的字节数和到达 EOF 所需的时间，然后您可以以某种方式测量带宽。将此与会话 cookie 结合起来，您就可以在每个连接的浏览器中获得此信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-04T15:10:58.003

虽然这不是一个答案，但重要的是要注意测量带宽并不总是可靠的。

[http://www.smashingmagazine.com/2013/01/09/bandwidth-media-queries-we-dont-need-em/](http://www.smashingmagazine.com/2013/01/09/bandwidth-media-queries-we-dont-need-em/)

套用上面的话：

> ...下载的位数除以下载它们所花费的时间...当您通过单个预热的 TCP 连接下载大文件时，这是正确的。这种情况很少见。典型的页面加载场景：
> 
> 1.  初始 HTML 页面是使用慢启动机制下载的，因此测量会大大低估可用带宽
> 2.  加载 CSS 和 JavaScript 外部资源——新 TCP 连接的集合，都处于慢启动阶段，它们不一定都指向同一个目标服务器
> 3.  加载图像——多个连接，每个连接下载一个资源。问题是这些连接并不总是处于其生命周期的同一阶段。有些可能处于缓慢启动阶段；有些人可能已经丢包，因此减少了他们的窗口和他们试图填充的带宽；有些可能是热身的 TCP 连接，准备填满带宽。这些 TCP 连接不一定都到同一个目标服务器，并且到各个目标服务器的带宽可能彼此不同。
> 
> 因此，估计带宽是可能的，但它远非简单，而且它仅适用于页面加载过程的某些阶段。而且因为有多个 TCP 连接到不同的目标服务器是很常见的（例如，一个 CDN 可以托管一个网页的图像资源），我们无法真正确定我们想要测量的带宽是多少。

由于这是一个较老的问题，文章末尾的替代建议是考虑响应式图像的更新[`srcset`属性](http://www.w3.org/html/wg/drafts/html/master/embedded-content.html#the-picture-element)，它让浏览器根据它所知道的（应该比我们更多）来决定加载哪个资产。听起来[它更倾向于确定分辨率](http://css-tricks.com/responsive-images-youre-just-changing-resolutions-use-srcset/)，但随着支持的增加，它可能会变得更聪明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-07T11:04:26.523

我发布了[BwCh](https://github.com/radiantmediaplayer/bwch)，它是一个开源 JavaScript API，用于检测基于 Web 的环境的带宽

它是用 ES2015 构建的。它使用了一些最新的 JavaScript 创新（截至 2016 年 4 月，Chrome 48+ for Android 目前支持window.navigator.connection），以便提供一种灵活的方法来检测移动和桌面设备的带宽。它回退/补充图像预加载以检测那些最新 API 不可用的带宽。

# xml - 如何使用 PostgreSQL 将一对多关系呈现到 XML

> ID：13988052
> 
> 赞同：6
> 
> 时间：2012-12-21T10:06:58.910
> 
> 标签：xml, postgresql, select, one-to-many

我的架构中有几个多对多关系。例如，一个包有许多任务组，而任务组又具有许多任务。所有表通过多对多表链接在一起，例如包含包的主键和任务组的主键。（我知道这不是严格需要的，因为 XML 是一对多的，但我想不出更好的结构）。

是否可以将查询结果作为 XML 获取，反映一对多的结构？所以，结果应该是这样的：

```
<package id=1>
  <taskgroup id=1>
    <task id=1>
    <task id=2>
  </taskgroup>
  <taskgroup id=2>
    <task id=3>
  </taskgroup>
</package> 
```

`XMLELEMENT()`通过使用and`XMLATTRIBUTE()`函数来完成所有任务，我已经设法获得了我想要的部分内容。像这样：

```
 SELECT XMLELEMENT(name task,
      XMLATTRIBUTES(p.name as packageName),
        XMLELEMENT(name description, t.description),
        XMLELEMENT(name tutorial,
          XMLELEMENT(name someTaskChild1, t.data1)),
        XMLELEMENT(name objectives,
          XMLELEMENT(name someTaskChild2, t.data2)),
    ) 
    FROM packages p
    INNER JOIN package_taskgroup pt ON p.id = pt.package_id
    INNER JOIN taskgroups tg on pt.taskgroup_id = tg.id
    INNER JOIN taskgroup_task tt on tg.id = tt.taskgroup_id
    INNER JOIN tasks t on tt.task_id = t.id
    WHERE p.id = somePackageId AND tg.id = someTaskGroupId 
```

问题是如何将这些任务分组到它们的父表元素中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T10:29:49.907

尝试：

```
SELECT p.id as pack_id,
       XMLELEMENT(name taskgroup,
                  XMLATTRIBUTES(tg.id as id),
                  XMLAGG(XMLELEMENT(name task,
                         XMLATTRIBUTES(t.id as id)) as xml_task_group
FROM packages p
JOIN package_taskgroup pt ON p.id = pt.package_id
JOIN taskgroups tg on pt.taskgroup_id = tg.id
JOIN taskgroup_task tt on tg.id = tt.taskgroup_id
JOIN tasks t on tt.task_id = t.id
WHERE p.id = somePackageId 
GROUP BY p.id, tg.id 
```

这将为您提供`p.id`您指定的所有任务组。

然后：

```
SELECT XMLELEMENT(name package, 
                  XMLATTRIBUTES(pack_id as id),
                  XMLAGG(xml_task_group))
FROM (previous SELECT here) 
```

这将为您提供您指定的结构。

详细信息：[XMLAGG](http://www.postgresql.org/docs/current/static/functions-aggregate.html) , [XML 函数](http://www.postgresql.org/docs/current/static/functions-xml.html)

加入的选择将如下所示：

```
SELECT XMLELEMENT(name package, 
                  XMLATTRIBUTES(pack_id as id),
                  XMLAGG(xml_task_group))
FROM (SELECT p.id as pack_id,
             XMLELEMENT(name taskgroup,
                        XMLATTRIBUTES(tg.id as id),
                        XMLAGG(XMLELEMENT(name task,
                                          XMLATTRIBUTES(t.id as id)
                       ))) as xml_task_group
      FROM packages p
      JOIN package_taskgroup pt ON p.id = pt.package_id
      JOIN taskgroups tg on pt.taskgroup_id = tg.id
      JOIN taskgroup_task tt on tg.id = tt.taskgroup_id
      JOIN tasks t on tt.task_id = t.id
      WHERE p.id = somePackageId 
      GROUP BY p.id, tg.id) t
GROUP BY pack_id 
```

我只是将第一个选择复制到`FROM`第二个的子句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T09:18:04.690

你可以这样尝试：

```
SELECT 
     T0."Mail",
     T0."UserName", 
     (SELECT xmlagg(xmlelement(name Screens, 
                               XMLELEMENT(name "IN1_ID","IN1."ID"),
                               XMLELEMENT(name "IN1_Name", IN1."Name")
                              )
                    ) 
             FROM "Advertisement"."Screen" IN1 
             WHERE T0."ID" = IN1."PlatformID"
    ) AS Screens 
    FROM "Sales"."Platform" T0 
```

XNL 输出将如下所示：

```
<screens>
   <IN1_PlatformID>14</IN1_PlatformID>
   <IN1_Name>My Name</IN1_Name>
</screens>
<screens>
   <IN1_PlatformID>15</IN1_PlatformID>
   <IN1_Name>My Name 2</IN1_Name>
</screens> 
```

在 c# 端，您需要插入一个根节点来读取它。

```
var doc = new System.Xml.XmlDocument();
doc.LoadXml("<rows>" + row["Screens"].ToString() + "</rows>"); 
```

之后，您可以转换为数据集以轻松读取屏幕数据：

```
var xmlReader = new System.Xml.XmlNodeReader(doc);
var dataSet = new System.Data.DataSet();
dataSet.ReadXml(xmlReader);
foreach (System.Data.DataRow item in dataSet.Tables[0].Rows){
    ...
} 
```

# php - 根据输入的数字自动增加文件中的值php

> ID：13988054
> 
> 赞同：0
> 
> 时间：2012-12-21T10:07:02.170
> 
> 标签：php, formula

我需要计算 5 个不同的变量。现在这些工作，但我想做的是每增加 50 重新计算价格。现在，我可以在表格中编码，一次最多只能购买 50 个，但我想允许每个人有钱买多少（这就是数字）。所以我认为我需要的是一个抛物线式公式，每 50 次自动增加一次，但我不知道我在寻找什么或如何实现它。

```
$resprice = 20000+($cityFetch['residential']*502)+($cityNum*1000);
$comprice = 18000+($cityFetch['commercial']*506)+($cityNum*1000);
$indprice = 23000+($cityFetch['industrial']*508)+($cityNum*1000);
$landprice = 600+($cityFetch['land']*.008);
$milprice = 25000+($cityFetch['military']*512)+($cityNum*1000); 
```

编辑：有人指出循环将为此工作。

EDIT3：终于找到了，Havvy 在 IRC 上帮助了我

```
$cityCheck = mysql_query("SELECT * FROM cities WHERE nation='$nation'");
$cityNum = mysql_num_rows($cityCheck);

function determinePrice($baseCost, $scalar, $current, $bought) {
    $min = $baseCost + $scalar * ($current + 1) + ($cityNum * 1000);
    $max = $baseCost + $scalar * ($current + $bought) + ($cityNum * 1000);
    $average = ($min + $max) / 2;

   return $average * $bought;
}

$resprice = determinePrice(20000, 502, $cityFetch['residential'], $cityFetch['residential']);
$comprice = determinePrice(18000, 506, $cityFetch['commercial'], $cityFetch['commercial']);
$indprice = determinePrice(23000, 508, $cityFetch['industrial'], $cityFetch['industrial']);
$milprice = determinePrice(25000, 502, $cityFetch['residential'], $cityFetch['military']);
$landprice = 600+($cityFetch['land']*.008); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:41:53.637

我使用 1 而不是 50 的步长。不根据您一次购买的数量给予折扣更合乎逻辑（少一个幻数），并且对于具有逐步线性函数的新玩家来说会感到困惑。

这个函数背后的原因可以在[http://betterexplained.com/articles/techniques-for-adding-the-numbers-1-to-100/](http://betterexplained.com/articles/techniques-for-adding-the-numbers-1-to-100/)找到。

```
function determinePrice($baseCost, $scalar, $current, $bought) {
    $min = $scalar * ($current + 1) + ($cityNum * 1000);
    $max = $scalar * ($current + $bought) + ($cityNum * 1000);
    $average = ($min + $max) / 2;

   return $average * $bought;
} 
```

使用它看起来像这样：

$resprice = determinePrice(20000, 502, $cityFetch['residential'], $resBought);

但它不适用于土地，因为土地不包括城市价格。对于土地，您可以复制该函数并删除 $cityNum * 1000 部分。您还可以在签名中添加 $isLand 参数，并使用三元运算符添加 0。

如果你不喜欢在声明这个函数之前已经用正确的值声明了 $cityNum，你可以随时将它添加到函数签名中，使其成为一个纯函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:54:23.407

`$count=1`

`if($count==50)`

`{`

然后你提高价格

`$count=1;` `}`

`$resprice = 20000+($cityFetch['residential']*502)+($cityNum*1000);`

`$comprice = 18000+($cityFetch['commercial']*506)+($cityNum*1000);`

`$indprice = 23000+($cityFetch['industrial']*508)+($cityNum*1000);`

`$landprice = 600+($cityFetch['land']*.008);`

`$milprice = 25000+($cityFetch['military']*512)+($cityNum*1000);`

`$count++;`

# couchdb - 如何在couchdb中按日期排序获取多个键

> ID：13988056
> 
> 赞同：0
> 
> 时间：2012-12-21T10:07:14.503
> 
> 标签：couchdb

我有一个视图，它发出的值是

```
function(doc) {
 var d = new Date(doc.created_date);
 emit([d,doc.unique_id],doc);
} 
```

在这里，我必须在一个查询中获取多个 unique_id。所以我使用 Keys=["unique_id1","unique_id1"] 来获取 id's .. 但我需要它们按日期排序并获得 unique_id's。如果我如上所述查询，我​​没有从 db 获得任何结果。但如果我更改如下视​​图并查询它，我得到正确的结果，但没有按日期排序。

```
function(doc) {
 emit(doc.unique_id,doc);
} 
```

任何人都可以建议我如何在一个查询中获得两者？？？？

```
Select * from db where unique_id in {"1","3"} order by date 
```

这就是我在 couchdb 中需要的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:47:18.753

你不能那样做。在 CouchDB 中，您可以通过唯一键或键集进行查询，也可以查询范围。因此，如果您想通过一组唯一 ID 进行查询，而不必在查询中指定它们的创建日期，则不能在键中包含创建日期，因此 CouchDB 无法为您按创建日期排序。在这种情况下，您可以使用唯一 ID 键并在客户端（即查询后）按 created_date 对结果进行排序。

另一种方法是您指定一个包含 [unique_id, created_date] 的键，但在这种情况下，您不能在不包含 [2, *] 的情况下查询 [1, *] 和 [3, *]（您可以再次过滤在客户端查询后退出）。

# php - Magento 是框架还是平台？

> ID：13988057
> 
> 赞同：7
> 
> 时间：2012-12-21T10:07:15.317
> 
> 标签：php, zend-framework, magento

什么是magento ..是框架还是平台。因为 magento 本身使用 Zend Framework，但在任何地方都将它称为框架。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T10:11:50.390

Magento 是一个在 Zend 框架之上用 PHP 编写的电子商务平台。

编辑：

[https://stackoverflow.com/tags/magento/info](https://stackoverflow.com/tags/magento/info)

[http://www.magentocommerce.com/company/](http://www.magentocommerce.com/company/)

[http://en.wikipedia.org/wiki/Magento](http://en.wikipedia.org/wiki/Magento)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T10:12:21.230

根据标签说明，

> Magento 是一个在 Zend 框架之上用 PHP 编写的电子商务**平台**，可在开源和商业许可下使用。它是用一种高级的面向对象的习惯用法编写的，它使用 MVC 模式和 XML 配置文件，旨在实现灵活性和可扩展性。

根据维基百科，

> Magento 是一个开源电子商务**网络应用程序**，于 2008 年 3 月 31 日推出。它由 Varien（现为 Magento Inc）在开源社区内的程序员的帮助下开发，但归 Magento Inc. 所有。Magento 是使用 Zend 框架构建的。它使用实体-属性-值 (EAV) 数据库模型来存储数据。

[Magento Inc.](http://www.magentocommerce.com/)本身声称它是一个**平台**。

在[google Fight](http://www.googlefight.com/index.php?lang=en_GB&word1=%22Magento+framework%22&word2=%22Magento+platform%22)中，“magento**平台**”以 10:1 战胜“magento 框架”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:17:47.897

Magento 是一个开源电子商务网络应用程序。Magento 是使用 Zend 框架构建的。

链接在这里

[http://en.wikipedia.org/wiki/Magento](http://en.wikipedia.org/wiki/Magento)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:51:13.263

Magento 是一个开源的电子商务 CMS。

# iphone - Apple 推送通知：Payload 中的两次消息

> ID：13988072
> 
> 赞同：1
> 
> 时间：2012-12-21T10:07:55.763
> 
> 标签：iphone, apple-push-notifications, apns-php

我编写了一个将通知发送到 APNS 的服务器。这是我第一次使用APNS。当我发送消息时，iPhone 上显示的有效负载是这样的：

`{aps: {alert: "Hello"}, alert:"Hello"}`

警报出现两次是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:13:45.500

警报不应放置在`aps`标签之外：

```
{
    "aps" : { "alert" : "Message received from Bob" }
} 
```

外部的所有密钥`aps`都将是私有/自定义有效负载项。另请注意，推送通知不能超过 256 个字节：[Local and Push Notification Programming Guide](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

# android - 如何从联系人快捷菜单中为我的应用程序添加链接

> ID：13988073
> 
> 赞同：6
> 
> 时间：2012-12-21T10:08:00.220
> 
> 标签：android, dialog, android-manifest, android-contacts, android-contentresolver

我想编写与联系人连接的应用程序。

设想 ：

1.  输入电话联系人
2.  我们选择联系项目

![在此处输入图像描述](../Images/07f964a7a8bfbba4ce4ca47f21572e4f.png)

3.  单击 MyApp（该图标应仅适用于有号码的联系人）
4.  查看联系电话，以便用户可以单击其中任何一个

5.  我的应用程序将打开。

这是我到目前为止的地方：我在清单文件中添加了以下内容 -

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="vnd.android.cursor.item/name" />
        </intent-filter> 
```

结果是我可以看到所有联系人的 MyApp 图标，而不仅仅是这些带有电话号码的图标，当我选择它时，我可以看到联系人姓名而不是其可用号码。

![在此处输入图像描述](../Images/504ab6b6e73cd228fa8e8f630060e13e.png)

为了查看联系人电话号码或在其中放置自定义文本，我必须添加到 AndroidManifest 什么？

*   用新的 MIMETYPE 添加我自己的联系人对我来说不是一个选项......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T03:28:35.620

检查我可能对您有帮助的问题/答案，对我有用。

[将我的应用与联系人集成](https://stackoverflow.com/questions/4479352/integrate-my-app-with-contact)

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:31:13.800

Try using this mime type "vnd.android.cursor.item/phone_v2" instead of "vnd.android.cursor.item/name"

# python-2.7 - 如何使用 Python Google Drive API 将本地文件上传到我的 Google Drive？

> ID：13988084
> 
> 赞同：1
> 
> 时间：2012-12-21T10:08:22.297
> 
> 标签：python-2.7, google-drive-api

我的计算机中有一个文件，我想使用 Python google drive api 上传它，

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:41:35.287

查看 Google Drive SDK 文档中的 Python 快速入门，它展示了如何编写一个简单的应用程序将文件上传到 Drive：

[https://developers.google.com/drive/quickstart-python](https://developers.google.com/drive/quickstart-python)

# php - 如何登录 YouTube 并获取此页面的内容？

> ID：13988090
> 
> 赞同：-5
> 
> 时间：2012-12-21T10:08:48.247
> 
> 标签：php, youtube-api

请帮我获取页面的内容，例如：

```
http://www.youtube.com/my_videos_annotate?feature=vm&v=someVideoId 
```

使用 PHP/Curl。

我想我需要先登录 YouTube 的服务，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:17:17.290

使用 youtube-api
**示例**

```
$feedURL = 'http://gdata.youtube.com/feeds/api/users/**ACCOUNTNAME**/uploads?max-results=50';
$sxml = simplexml_load_file($feedURL);
$i=0;
foreach ($sxml->entry as $entry) {
      $media = $entry->children('media', true);
      $watch = (string)$media->group->player->attributes()->url;
      $thumbnail = (string)$media->group->thumbnail[0]->attributes()->url;
        $input = array('http://www.youtube.com/watch?v=','&feature=youtube_gdata_player');
        $change = array('','') ;
        $link = @str_replace ($input ,$change, $watch);

      echo $link.'</br>';
      echo $thumbnail.'</br>'; //**thumbnail
      echo $media->group->title.'</br>'; //**title
      echo $media->group->description.'</br>'; //**description
} 
```

希望这会有所帮助

# sql - 将不同的时间段分组应用于一组数据

> ID：13988094
> 
> 赞同：8
> 
> 时间：2012-12-21T10:09:01.237
> 
> 标签：sql, sql-server, design-patterns, sql-server-2008-r2

以下是我两年前开始使用的模式，它在我的遗留代码中一遍又一遍地重复。

它使用不同的时间段有效地对相同的数据进行分组。

有没有我应该接近这个的标准方法，或者这种冗长的方法和我能得到的一样好？

提出这个问题的另一种方式是如何使以下内容更简洁？
所有 4 个查询都来自同一个数据源，并且所有四个查询都进入同一个输出表，这 4 个查询可以合并为 1 个较短的脚本吗？

```
DECLARE @myDate DATETIME = CONVERT(DATETIME,CONVERT(VARCHAR(11),GETDATE(),106)); 
DECLARE @myFirstDateLastMth CHAR(8) =CONVERT(CHAR(6),DATEADD(mm,-1,@myDate-1),112) + '01';
DECLARE @myFirstDateCurrentMth CHAR(8) =CONVERT(CHAR(6),DATEADD(mm,0,@myDate-1),112) + '01'; 

DELETE FROM WH.dbo.tb_myTable

--day on day==========
INSERT INTO WH.dbo.tb_myTable
SELECT 
  TimePeriod =
    CASE 
        WHEN x.DateKey = CONVERT(VARCHAR(11),@myDate - 1,112) THEN 'Day'                    
        WHEN x.DateKey = CONVERT(VARCHAR(11),@myDate - 2,112) THEN 'Day-1'  
    END,
  Game              = x.Name,
  Score             = SUM(x.Score),
  Ticks             = SUM(x.Ticks),
  ScorePerTick = SUM(x.Score)/SUM(x.Ticks)
FROM #LimitedBetinfo x
WHEREx.DateKey >= CONVERT(VARCHAR(11),@myDate - 2,112)
GROUP BY
  CASE 
    WHEN x.DateKey = CONVERT(VARCHAR(11),@myDate - 1,112) THEN 'Day'                    
    WHEN x.DateKey = CONVERT(VARCHAR(11),@myDate - 2,112) THEN 'Day-1'  
  END,
  x.Name;

--wk on wk==========
INSERT INTO WH.dbo.tb_myTable
SELECT 
  TimePeriod =
        CASE 
        WHEN x.DateKey >= CONVERT(VARCHAR(11),@myDate - 7,112) THEN 'Week'                  
        WHEN x.DateKey < CONVERT(VARCHAR(11),@myDate - 7,112) 
                    AND x.DateKey >= CONVERT(VARCHAR(11),@myDate - 14,112)  
                            THEN 'Week-1'
    END,
  Game               = x.Name,
  Score              = SUM(x.Score),
  Ticks              = SUM(x.Ticks),
  ScorePerTick = SUM(x.Score)/SUM(x.Ticks)
FROM #LimitedBetinfo x
WHERE   x.DateKey >= CONVERT(VARCHAR(11),@myDate - 14,112)
GROUP BY
  CASE 
    WHEN x.DateKey >= CONVERT(VARCHAR(11),@myDate - 7,112) THEN 'Week'                  
    WHEN x.DateKey < CONVERT(VARCHAR(11),@myDate - 7,112) 
                AND x.DateKey >= CONVERT(VARCHAR(11),@myDate - 14,112)  
                        THEN 'Week-1'
    END,
  g.Name;                   

--mth on mth==========
INSERT INTO WH.dbo.tb_myTable
SELECT 
  TimePeriod =
    CASE 
        WHEN x.DateKey >= CONVERT(VARCHAR(11),@myDate - 28,112) THEN 'Month'                    
        WHEN x.DateKey < CONVERT(VARCHAR(11),@myDate - 28,112) 
                        AND x.DateKey >= CONVERT(VARCHAR(11),@myDate - 56,112)  
                                THEN 'Month-1'
    END,
  Game               = x.Name,
  Score              = SUM(x.Score),
  Ticks              = SUM(x.Ticks),
  ScorePerTick = SUM(x.Score)/SUM(x.Ticks)
FROM #LimitedBetinfo x
WHERE   x.DateKey >=  CONVERT(VARCHAR(11),@myDate - 56,112)
GROUP BY
  CASE 
    WHEN x.DateKey >= CONVERT(VARCHAR(11),@myDate - 28,112) THEN 'Month'                    
    WHEN x.DateKey < CONVERT(VARCHAR(11),@myDate - 28,112) 
                AND x.DateKey >= CONVERT(VARCHAR(11),@myDate - 56,112)  
                        THEN 'Month-1'
  END,
  g.Name;                   

--MTD and PrevCalMonth==========
INSERT INTO WH.dbo.tb_myTable
SELECT 
  TimePeriod
  = CASE 
        WHEN  x.DateKey >= @myFirstDateCurrentMth   THEN 'MTD'
        WHEN  x.DateKey < @myFirstDateCurrentMth  
                AND  x.DateKey >=@myFirstDateLastMth THEN 'PrevCalMonth'                                      
  END,
  Game              = x.Name,
  Score             = SUM(x.Score),
  Ticks             = SUM(x.Ticks),
  ScorePerTick = SUM(x.Score)/SUM(x.Ticks)
FROM #LimitedBetinfo x
WHERE   x.DateKey >=  CONVERT(CHAR(6),DATEADD(mm,-1,@myDate-1),112) + '01'
GROUP BY
  CASE 
    WHEN  x.DateKey >= @myFirstDateCurrentMth   THEN 'MTD'
    WHEN  x.DateKey < @myFirstDateCurrentMth  
            AND  x.DateKey >=@myFirstDateLastMth THEN 'PrevCalMonth'            
  END,
  g.Name; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T14:20:52.460

我会将其设为单个插入语句。

现在宁愿不要通过对集合、多维数据集或汇总进行分组来使用该组，因为我不知道如何限制在单个日期组上计算的行数少于在较大时间段组上计算的行数。

因此，为了防止这种情况发生，您可以创建一个包含时间段的公共表表达式 (;WITH mycte AS (...subquery...))、临时表、表变量或 XML 格式的文本对象，每个行/元素。

此脚本也可以在定义更多或更少的时间段的情况下运行，以便从应用程序到服务器只需一次行程即可获得所有结果。

这是一个临时表的例子，也可以很容易地做成一个表变量：

```
--Define time periods
CREATE TABLE #TempTimePeriods (
    TimePeriod VARCHAR(20) PRIMARY KEY,
    TPBegin VARCHAR(11) NOT NULL,
    TPEnd VARCHAR(11) NULL
);

DECLARE @myDate DATETIME = '2012-10-10';
DECLARE @myDateMinusOne DATETIME = DATEADD(dd, -1, @myDate);
INSERT INTO #TempTimePeriods ( TimePeriod, TPBegin, TPEnd )
SELECT [TimePeriod], CONVERT(VARCHAR(11), TPBegin, 112) TPBegin, CONVERT(VARCHAR(11), TPEnd, 112) TPEnd
FROM (
    SELECT 'Day'          [TimePeriod], @myDate - 1 TPBegin, @myDate -  1 TPEnd UNION ALL
    SELECT 'Day-1'        [TimePeriod], @myDate - 2 TPBegin, @myDate -  2 TPEnd UNION ALL
    SELECT 'Week'         [TimePeriod], @myDate - 7 TPBegin,                                  NULL TPEnd UNION ALL
    SELECT 'Week-1'       [TimePeriod], @myDate - 14 TPBegin, @myDate -  8 TPEnd UNION ALL
    SELECT 'Month'        [TimePeriod], @myDate - 28 TPBegin,                                  NULL TPEnd UNION ALL
    SELECT 'Month-1'      [TimePeriod], @myDate - 56 TPBegin, @myDate - 29 TPEnd UNION ALL
    SELECT 'MTD'          [TimePeriod], DATEADD(dd, -1 * DAY(@myDateMinusOne) + 1, @myDateMinusOne) TPBegin, NULL TPEnd UNION ALL
    SELECT 'PrevCalMonth' [TimePeriod], DATEADD(mm,-1,DATEADD(dd, -1 * DAY(@myDateMinusOne) + 1, @myDateMinusOne)) TPBegin, DATEADD(dd, -1 * DAY(@myDateMinusOne), @myDateMinusOne) TPEnd
) TT; 
```

这是主要查询...

```
--compute/insert results
INSERT INTO WH.dbo.tb_myTable
SELECT TimePeriods.TimePeriod,
x.Name Game,
SUM(x.Score) Score,
SUM(x.Ticks) Ticks,
CASE WHEN SUM(x.Ticks) != 0 THEN SUM(x.Score)/SUM(x.Ticks) END ScorePerTick
FROM #TempTimePeriods TimePeriods
--for periods with no data use left outer join to return 0-value results, otherwise inner join
LEFT OUTER JOIN #LimitedBetInfo x 
ON x.DateKey >= [TimePeriods].TPBegin
AND (
    [TimePeriods].TPEnd IS NULL
    OR x.DateKey <= [TimePeriods].TPEnd
)
GROUP BY TimePeriods.TimePeriod, x.Name 
```

您还可以使用下面的 Common-Table-Expression 消除 #TempTimePeriods 表：

```
DECLARE @myDate DATETIME = '2012-10-10';
DECLARE @myDateMinusOne DATETIME = DATEADD(dd, -1, @myDate);
;WITH TimePeriods AS (
    SELECT [TimePeriod], CONVERT(VARCHAR(11), TPBegin, 112) TPBegin, CONVERT(VARCHAR(11), TPEnd, 112) TPEnd
    FROM (
        SELECT 'Day'          [TimePeriod], @myDate - 1 TPBegin, @myDate -  1 TPEnd UNION ALL
        SELECT 'Day-1'        [TimePeriod], @myDate - 2 TPBegin, @myDate -  2 TPEnd UNION ALL
        SELECT 'Week'         [TimePeriod], @myDate - 7 TPBegin,                                  NULL TPEnd UNION ALL
        SELECT 'Week-1'       [TimePeriod], @myDate - 14 TPBegin, @myDate -  8 TPEnd UNION ALL
        SELECT 'Month'        [TimePeriod], @myDate - 28 TPBegin,                                  NULL TPEnd UNION ALL
        SELECT 'Month-1'      [TimePeriod], @myDate - 56 TPBegin, @myDate - 29 TPEnd UNION ALL
        SELECT 'MTD'          [TimePeriod], DATEADD(dd, -1 * DAY(@myDateMinusOne) + 1, @myDateMinusOne) TPBegin, NULL TPEnd UNION ALL
        SELECT 'PrevCalMonth' [TimePeriod], DATEADD(mm,-1,DATEADD(dd, -1 * DAY(@myDateMinusOne) + 1, @myDateMinusOne)) TPBegin, DATEADD(dd, -1 * DAY(@myDateMinusOne), @myDateMinusOne) TPEnd
    ) TT
)
INSERT INTO WH.dbo.tb_myTable
SELECT TimePeriods.TimePeriod,
x.Name Game,
SUM(x.Score) Score,
SUM(x.Ticks) Ticks,
CASE WHEN SUM(x.Ticks) != 0 THEN SUM(x.Score)/SUM(x.Ticks) END ScorePerTick
FROM [TimePeriods]
--for periods with no data use left outer join to return 0-value results, otherwise inner join
LEFT OUTER JOIN #LimitedBetInfo x
ON x.DateKey >= [TimePeriods].TPBegin
AND (
     [TimePeriods].TPEnd IS NULL
     OR x.DateKey <= [TimePeriods].TPEnd
)
GROUP BY [TimePeriods].TimePeriod, x.Name 
```

最后，您可以在 XML 字符串中定义时间段，以便传递给存储过程（如果这是您的偏好），然后按以下步骤操作：

```
--example XML string with time period definitions
DECLARE @TimePeriodsXml NVARCHAR(MAX) = '
<TimePeriod name="Day" tpbegin="20121010" tpend="20121010" />
<TimePeriod name="Day-1" tpbegin="20121009" tpend="20121009" />
<TimePeriod name="Week" tpbegin="20121004"/>
<TimePeriod name="Week-1" tpbegin="20120927" tpend="20121004" />
<TimePeriod name="Month" tpbegin="20120913" />
<TimePeriod name="Month-1" tpbegin="20120815" tpend="20120912" />
<TimePeriod name="MTD" tpbegin="20121001" />
<TimePeriod name="PrevCalMonth" tpbegin="20120901" tpend="20120930" />
'; 
```

并将主查询修改为读取 XML：

```
SELECT TimePeriods.TimePeriod,
x.Name Game,
SUM(x.Score) Score,
SUM(x.Ticks) Ticks,
CASE WHEN SUM(x.Ticks) != 0 THEN SUM(x.Score)/SUM(x.Ticks) END ScorePerTick
FROM (
    SELECT
    E.TimePeriod.value('./@name', 'VARCHAR(20)') TimePeriod,
    E.TimePeriod.value('./@tpbegin', 'VARCHAR(20)') TPBegin,
    E.TimePeriod.value('./@tpend', 'VARCHAR(20)') TPEnd
    FROM (
        SELECT CAST(@TimePeriodsXml AS XML) tpxml
    ) TT
    CROSS APPLY tpxml.nodes('/TimePeriod') AS E(TimePeriod)
) TimePeriods
--for periods with no data use left outer join to return 0-value results, otherwise inner join
LEFT OUTER JOIN #LimitedBetInfo x
ON x.DateKey >= [TimePeriods].TPBegin
AND (
     [TimePeriods].TPEnd IS NULL
     OR x.DateKey <= [TimePeriods].TPEnd
)
GROUP BY TimePeriods.TimePeriod, x.Name 
```

有关如何将 XML 字符串查询转换为过程以支持 1 个或多个时间段的单个参数的示例：

```
CREATE PROCEDURE dbo.GetTimePeriodAggregates
@TimePeriodsXmlString NVARCHAR(MAX)
AS
BEGIN
SET NOCOUNT ON;
SELECT TimePeriods.TimePeriod,
x.Name Game,
SUM(x.Score) Score,
SUM(x.Ticks) Ticks,
CASE WHEN SUM(x.Ticks) != 0 THEN SUM(x.Score)/SUM(x.Ticks) END ScorePerTick
FROM (
    SELECT
    E.TimePeriod.value('./@name', 'VARCHAR(20)') TimePeriod,
    E.TimePeriod.value('./@tpbegin', 'VARCHAR(20)') TPBegin,
    E.TimePeriod.value('./@tpend', 'VARCHAR(20)') TPEnd
    FROM (
        SELECT CAST(@TimePeriodsXml AS XML) tpxml
    ) TT
    CROSS APPLY tpxml.nodes('/TimePeriod') AS E(TimePeriod)
) TimePeriods
LEFT OUTER JOIN #LimitedBetInfo x
ON x.DateKey BETWEEN TimePeriods.TPBegin AND TimePeriods.TPEnd
GROUP BY TimePeriods.TimePeriod, x.Name
END 
```

可以运行为：

```
--This declare is just an example, it could be instead a parameter passed from an application
DECLARE @ThisExecutionsXmlString NVARCHAR(MAX) = N'
<TimePeriod name="Day" tpbegin="20121010" tpend="20121010" />
<TimePeriod name="Day-1" tpbegin="20121009" tpend="20121009" />
<TimePeriod name="Week" tpbegin="20121004"/>
<TimePeriod name="Week-1" tpbegin="20120927" tpend="20121004" />
<TimePeriod name="Month" tpbegin="20120913" />
<TimePeriod name="Month-1" tpbegin="20120815" tpend="20120912" />
<TimePeriod name="MTD" tpbegin="20121001" />
<TimePeriod name="PrevCalMonth" tpbegin="20120901" tpend="20120930" />
';

INSERT INTO WH.dbo.tb_myTable
EXEC dbo.GetTimePeriodAggregates @TimePeriodsXmlString=@ThisExecutionsXmlString 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-30T22:40:34.447

您可以创建此存储过程

```
CREATE PROCEDURE InsertData
    @minLimit date,
    @maxLimit date,
    @minTerm nvarchar(50),
    @maxTerm nvarchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO tb_myTable
    SELECT 
        [TimePeriod]        = CASE WHEN x.DateKey >= @maxLimit THEN @maxTerm ELSE @minTerm END,
        [Game]              = x.Name,
        [Score]             = SUM(x.[Score]),
        [Ticks]             = SUM(x.[Ticks]),
        [ScorePerTick]      = SUM(x.[Score])/SUM(x.[Ticks])

    FROM #LimitedBetinfo x
    WHERE x.DateKey >= @minLimit
    GROUP BY 
        CASE WHEN x.DateKey >= @maxLimit THEN @maxTerm ELSE @minTerm END,
        x.Name

END
GO 
```

并像这样使用

```
TRUNCATE TABLE tb_myTable

DECLARE @today date = cast(getdate() as date)
DECLARE @yesterday date = dateadd(day, -1, @today)
EXECUTE dbo.InsertData @yesterday, @today, N'Day-1', N'Day' 

DECLARE @thisweek date = DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 0)
DECLARE @lastweek date = DATEADD(ww, -1, @thisweek)
EXECUTE dbo.InsertData @lastweek, @thisweek, N'Week-1', N'Week' 

DECLARE @prev28 date = dateadd(day, -28, @today)
DECLARE @prev56 date = dateadd(day, -56, @today)
EXECUTE dbo.InsertData @prev56, @prev28, N'Month-1', N'Month' 

DECLARE @thismonth date = DATEADD(mm, DATEDIFF(mm,0,GETDATE()), 0)
DECLARE @lastmonth date = DATEADD(mm, -1, @thismonth)
EXECUTE dbo.InsertData @lastmonth, @thismonth, N'PrevCalMonth', N'MTD' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T12:32:00.600

使用参数 - VALUES 作为表源并将它们作为参数应用到 CROSS APPLY 与派生表

```
DECLARE @myDate datetime = CAST(GETDATE() AS date);
IF OBJECT_ID('WH.dbo.tb_myTable') IS NOT NULL DROP TABLE WH.dbo.tb_myTable
SELECT TimePeriod, Game, Score, Ticks, ScorePerTicks
INTO WH.dbo.tb_myTable
FROM (VALUES('Day', DATEADD(day, -1, @myDate), @myDate),
            ('Day-1', DATEADD(day, -2, @myDate), DATEADD(day, -2, @myDate)),
            ('Week', DATEADD(day, -7, @myDate), @myDate),
            ('Week-1', DATEADD(day, -14, @myDate), DATEADD(day, -8, @myDate)),
            ('Month', DATEADD(day, -28, @myDate), @myDate),
            ('Month-1', DATEADD(day, -56, @myDate), DATEADD(day, -29, @myDate)),
            ('MTD', DATEADD(DAY, 1 - DAY(@myDate), @myDate), @myDate), 
            ('PrevCalMonth', DATEADD(DAY, 1 - DAY(@myDate), DATEADD(MONTH, -1, @myDate)), DATEADD(DAY,  - DAY(@myDate), @myDate)))
RParameters(TimePeriod, BDate, EDate)
  CROSS APPLY (SELECT x.Name AS Game,
                      SUM(x.Score) AS Score,
                      SUM(x.Ticks) AS Ticks,
                      SUM(x.Score) / SUM(x.Ticks) AS ScorePerTicks
               FROM #LimitedBetinfo x
               WHERE DateKey BETWEEN RParameters.BDate AND RParameters.EDate
               GROUP BY Name) AS o 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d0a97/2/0)上的演示[](http://sqlfiddle.com/#!3/d0a97/2/0)

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T09:57:35.367

弗雷德的答案可能会有所改进。不是在速度方面，只是通过删除额外的`CASE`. 作为一个建议，我还用一个字符串替换了两个字符串（例如`DAY`和`DAY-1`）的传递，并让另一个只是一个连接；然而，这将导致`PrevCalMonth`显示为`MTD-1`（尽管有一些解决方法）。

```
CREATE PROCEDURE InsertData
  @minLimit date, @maxLimit date, @string nvarchar(50)
AS
  INSERT INTO tb_myTable
  SELECT TimePeriod, Name, SUM(Score) Score, SUM(Ticks) Ticks, 
    SUM(Score)/SUM(Ticks) ScorePerTick 
  FROM
  (
    SELECT *, /* or 'Name, Score, Ticks,' */
      TimePeriod = CASE WHEN x.DateKey >= @maxLimit THEN @string ELSE @string+'-1' END
    FROM #LimitedBetinfo x
    WHERE x.DateKey >= @minLimit
  ) A
  GROUP BY TimePeriod, Name
GO 
```

并像这样使用：

```
TRUNCATE TABLE tb_myTable

DECLARE @today date = cast(getdate() as date)
DECLARE @yesterday date = dateadd(day, -1, @today)
EXECUTE dbo.InsertData @yesterday, @today, N'Day' 

DECLARE @thisweek date = DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 0)
DECLARE @lastweek date = DATEADD(ww, -1, @thisweek)
EXECUTE dbo.InsertData @lastweek, @thisweek, N'Week' 

DECLARE @prev28 date = dateadd(day, -28, @today)
DECLARE @prev56 date = dateadd(day, -56, @today)
EXECUTE dbo.InsertData @prev56, @prev28, N'Month' 

DECLARE @thismonth date = DATEADD(mm, DATEDIFF(mm,0,GETDATE()), 0)
DECLARE @lastmonth date = DATEADD(mm, -1, @thismonth)
EXECUTE dbo.InsertData @lastmonth, @thismonth, N'MTD' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-04T13:25:27.053

看来这可能是[CUBE 分组](http://msdn.microsoft.com/en-us/library/bb522495%28v=sql.105%29.aspx)的工作。

抱歉，我不会为你的问题提供确切的解决方案，但是 select 的**MOCKUP**形式应该是这样的：

```
select * from
(
    select *,count(*) amount from
    (
        select datepart(HOUR, login_time) as hour, 
               datepart(MINUTE, login_time) as minute, 
               cmd as name
        from sys.sysprocesses
    ) tmp
    group by cube(tmp.hour, tmp.minute, tmp.name)
) tmp2
where tmp2.name is not null and
      (
      (tmp2.hour is not null and tmp2.minute is null) or
      (tmp2.hour is null and tmp2.minute is not null)
      ) 
```

减一 -`cube`在这里为您的问题生成太多数据。所以需要过滤掉。一个很大的优点是您只需要一个选择到临时表中。**

# c# - C# alpha-beta 修剪参考

> ID：13988097
> 
> 赞同：2
> 
> 时间：2012-12-21T10:09:08.253
> 
> 标签：c#, list, reference, alpha-beta-pruning

所以这就是问题所在。我正在为基于 AI 的游戏开发战斗模拟器。当敌人对每一个动作都做出最佳动作时，人工智能应该为他计算出最佳动作。

我的团队有 X 个单位，有 5 个可能的移动，我的对手有 Y 个单位，有 5 个可能的移动。X 和 Y > 0 使用 alpha-beta 剪枝，我们希望生成每个可能的结果并最终取出最好的结果。问题是我们将每个结果保存到一个情境中，这种情境存储列表，但列表包含对所存储对象的引用，这使得它们将它们的移动保存到相同的情境中（1 个单元的所有 5 个移动）

想象一下我们的 2 个单位和他们的一个单位。我们创建一个情境并添加一个具有 5 个方向中的 1 个的单元。然后为我们的第二个单位添加一个方向，然后为敌方单位添加一个方向。现在我们得到了我们想要保存的最终情况。然后根据我们第二个单位的情况（所以没有敌方单位），我们想为敌人添加一个不同的动作到情况中，如果它更好的话，保存新的情况。但是由于 C# 使用列表的引用，这种情况也包括其他敌人移动的情况。

代码有点大，但我真的被困在这里，所以我希望如果有人有空闲时间来帮助我解决这个问题。

```
 public Situation RecursiveMaxTree(List<SimAnt> undone, int index, bool[,] positions, Situation situation)
    {
        SimAnt front = undone[index];
        int max = situation.Max;
        List<SimAnt> bestmoves = new List<SimAnt>();

        int frontY = front.position.Y;
        int frontX = front.position.X;

        if (!front.isEnemy() && undone[index + 1].isEnemy())//cutoff activated----------------------------------------------------------------------------
        {
            foreach (Direction direction in directions)
            {
                int newX = GameState.WrapHorizonal(frontX + direction.toVector().X);
                int newY = GameState.WrapVertical(frontY + direction.toVector().Y);
                if (!positions[newX, newY] && map.isNotWater(newX, newY))
                {
                    //add the updated ant to the new allAnts list
                    positions[newX, newY] = true;
                    List<SimAnt> newallAnts = situation.GetList;
                    Friend newant = new Friend(newX, newY);
                    newant.direction = direction;
                    newallAnts.Add(newant);

                    Situation current = RecursiveMinTree(undone, index + 1, positions, new Situation(newallAnts, max));//geeft min van alle enemy options
                    positions[newX, newY] = false;
                    if (current.Max > max)
                    {
                        max = current.Max;
                        bestmoves = current.GetList;
                    }
                }
            }
        }
        else //max-------------------------------------------------------------------------------------------------------------------------------------
        {
            foreach (Direction direction in directions)
            {
                int newX = GameState.WrapHorizonal(frontX + direction.toVector().X);
                int newY = GameState.WrapVertical(frontY + direction.toVector().Y);
                if (!positions[newX, newY] && map.isNotWater(newX, newY))
                {
                    //add the updated ant to the new allAnts list
                    positions[newX, newY] = true;
                    List<SimAnt> newallAnts = situation.GetList.Clone();
                    Friend newant = new Friend(newX, newY);
                    newant.direction = direction;
                    newallAnts.Add(newant);

                    Situation current = RecursiveMaxTree(undone, index + 1, positions, new Situation(newallAnts, max));//geeft min van alle enemy options
                    positions[newX, newY] = false;
                    if (current.Max > max)
                    {
                        max = current.Max;
                        bestmoves = current.GetList;
                    }
                }
            }
        }
        return new Situation(bestmoves, max);
    }

    Situation RecursiveMinTree(List<SimAnt> undone, int index, bool[,] positions, Situation situation)
    {
        SimAnt front = undone[index];
        int max = situation.Max;

        int frontY = front.position.Y;
        int frontX = front.position.X;

        int currentmin = 100;

        foreach (Direction direction in directions)
        {
            int newX = GameState.WrapHorizonal(frontX + direction.toVector().X);
            int newY = GameState.WrapVertical(frontY + direction.toVector().Y);
            if (!positions[newX, newY] && map.isNotWater(newX, newY))
            {
                //add the updated ant to the new allAnts list                    
                List<SimAnt> newallAnts = situation.GetList;
                Foe newant = new Foe(newX, newY);
                newallAnts.Add(newant);
                if (index >= undone.Count - 1)
                {
                    return new Situation(situation.GetList, CalculateBattleValue(situation.GetList));
                }
                else
                {
                    positions[newX, newY] = true;
                    Situation current = RecursiveMinTree(undone, index + 1, positions, new Situation(newallAnts, max));//geeft min van alle enemy options
                    positions[newX, newY] = false;
                    if (current.Max < max)
                        return current;
                    else if (current.Max < currentmin)
                    {
                        currentmin = current.Max;
                    }
                }
            }
        }
        return new Situation(situation.GetList, currentmin);
    }

class Situation
{
    public Situation(List<SimAnt> ants, int max)
    {
        this.max = max;
        this.ants = ants;
    }
    List<SimAnt> ants;
    int max;

    public List<SimAnt> GetList
    { get { return ants; } }

    public int Max
    { get { return max; } }
} 
```

亲切的问候，我

# c# - 从插件加载视图而不将其作为资源嵌入 nopCommerce

> ID：13988099
> 
> 赞同：3
> 
> 时间：2012-12-21T10:09:16.460
> 
> 标签：c#, asp.net-mvc-3, nopcommerce

我们正在开发插件，我们需要从插件中覆盖主题视图文件。例如，考虑一个类别产品列表页面，我们需要从插件视图文件中提供其视图，而不是主题视图文件。

但是，这是非常有限的，因为它仅在我们在构建插件时嵌入资源时才有效。这样的话，无法自定义View File，但是我们不能在Plugin中嵌入View文件，因为我们需要View文件可以根据项目的自定义需求进行自定义..但是核心插件功能保持不变。

所以基本上需要在不嵌入的情况下调用Plugin中的View文件。

我已经查看了几个这样做的插件，但我无法弄清楚如何在我的插件中做到这一点。知道如何以这种方式构建插件以允许更改视图文件中的修改。

请注意，我们正在开发 nopCommerce 2.65 版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T11:45:31.910

看看这个链接：[http](http://coding-in.net/mvc-3-organize-your-partial-views/) ://coding-in.net/mvc-3-organize-your-partial-views/ 。基本上，您只需要创建一个自定义视图引擎并告诉 ASP.Net 在特殊路径中查找视图。:)

# iphone - 具有最佳实践和故事板和 XIB 使用的大型应用程序的模块化架构

> ID：13988101
> 
> 赞同：0
> 
> 时间：2012-12-21T10:09:26.140
> 
> 标签：iphone, cocoa-touch, cocoa, model-view-controller

我们是一个团队，为 iPad 创建一个非常大的应用程序，为弱势儿童提供电子阅读器。该应用程序构建到一半，我认为我们应该退后一步，审查应用程序的整个设计。我们正在构建的应用程序应该非常非常符合 iOS 的当前软件开发架构实践。我有解释以及以下问题：

该应用程序现在有大约 50 个视图（并且还在增加），大多数顶级视图在情节提要中（即单个情节提要），其他视图在 XIB 中（用于子视图、可重用的项目渲染器等）。

这种方法好吗？

现代 iOS 应用程序是否应该完全省略 XIB？

故事板应该是正确的，还是应该分解成子故事板？如果应该是，分解故事板的确切过程应该如何完成？如何确定模块？

如果您有一些以正确方式管理应用程序的技巧或一些经验法则来帮助简化和模块化应用程序，请在您的评论中提及。

很抱歉上面的文字很长，感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:16:38.073

这有点主观，但在我看来，将 Xibs 与情节提要一起使用仍然是有效且可取的。故事板的想法很好，但是在当前的实现中它们肯定缺少一些功能，其中最明显的是视图重用。我最近参与了一些大型项目，故事板一开始总是很好，但迟早你会发现自己复制和粘贴表格单元格，然后是控制器，然后你必须在每次更新时在多个地方更改内容，这是完全无法维护。所以，是的，绝对坚持使用 Xib 文件以获得可重用的视图。

然而，我不太热衷于多个故事板的想法。虽然这在技术上很容易实现，但对我来说，它完全使故事板的目的无效。它们的唯一用途是（相对）清晰地概述控制器通过应用程序的流程。它们增加了一些小便利，但总的来说，我发现它们创建的代码通常比节省的代码多，并创建一些奇怪的代码模式（例如`prepareForSegue:`，当您想在需要属性设置的代码中使用控制器时，必须临时存储 ivars）。正如您所说，您如何将情节提要分成子情节提要？我只能认为您选择的任何分区方案都会有些武断，并且可能会在以后应用程序结构发生变化时发生变化，这根本没有乐趣。也许如果您的应用程序具有不同的操作模式，那么拆分情节提要是有意义的，但我认为这不适用于大多数应用程序。

所以，IMO，单一故事板，但使用 Xibs 来实现可重用的视图。

# android - ActionBar 上的自定义主页按钮

> ID：13988106
> 
> 赞同：10
> 
> 时间：2012-12-21T10:09:41.953
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBar Sherlock 库。所以，要更改默认的主页按钮。我这样做了：

```
<style name="Theme.mTheme" parent="android:Theme.Sherlock.Light.DarkActionBar">
    <item name="android:homeAsUpIndicator">@drawable/custom_home</item>
</style> 
```

这没有用

所以，我也添加了这个：

```
<item name="homeAsUpIndicator">@drawable/custom_home</item> 
```

现在它的工作。我在每个 ActionBar 上都有这个自定义主页图标/按钮。但是在我的一项活动中，我在代码中有这个：

```
actionBar.setIcon(R.drawable.options_holo_dark); 
```

当我在那个活动中时，我可以看到我以编程方式设置的图标，即**options_holo_dark**。我在 Theme 中设置的 1 即**custom_home**不可见。但是图标已经向右移动，就好像它在左侧给我在主题中设置的图标留出了空间（虽然不可见）。

这就是我现在得到的：

![在此处输入图像描述](../Images/b4693867f932824ae6dbd3030725ede4.png)

那么，如何避免主页图标左侧的空白区域？

谢谢你

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-03T14:30:19.527

主题项`android:homeAsUpIndicator`（和`homeAsUpIndicator`for ）为向上图标设置可绘制 - 这是当您在操作栏上`ActionBarSherlock`调用时显示在应用程序图标旁边的指向左侧的小箭头。`setDisplayHomeAsUpEnabled(true)`

up drawable 的大小定义了应用程序图标（徽标）的左边距。默认情况下，其尺寸为 16dp x 16dp。如果你放得更宽，屏幕边缘和应用程序图标之间的间隙会更宽，即使此时没有显示向上图标。

如果要更改应用程序图标（徽标）。的使用`setLogo(int)`或`setLogo(Drawable)`方法`ActionBar`。不要忘记也调用`setDisplayUseLogoEnabled(true)`​​- 此方法在显示应用程序图标和自定义徽标之间切换。您还可以在清单的属性和标签中定义徽标`android:logo`，并在主题中设置要使用徽标而不是操作栏中的应用程序图标。`<application>``<activity>`

# python - 在 python 中导入 pandas 会改变 matplotlib 处理日期时间对象的方式？

> ID：13988111
> 
> 赞同：4
> 
> 时间：2012-12-21T10:10:00.317
> 
> 标签：python, datetime, matplotlib, pandas

在我的 debian 挤压系统上，我遇到了一个 python 问题，可以提炼为以下内容：

```
import numpy
import datetime
from matplotlib import pyplot
x = [datetime.datetime.utcfromtimestamp(i) for i in numpy.arange(100000,200000,3600)]
y = range(len(x))

# See matplotlib handle a series of datetimes just fine..
pyplot.plot(x, y)
# [<matplotlib.lines.Line2D object at 0xad10f4c>]

import pandas

# Now we try exactly what we did before..
pyplot.plot(x, y)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/pymodules/python2.6/matplotlib/pyplot.py", line 2141, in plot
    ret = ax.plot(*args, **kwargs)
  File "/usr/lib/pymodules/python2.6/matplotlib/axes.py", line 3432, in plot
    for line in self._get_lines(*args, **kwargs):
  File "/usr/lib/pymodules/python2.6/matplotlib/axes.py", line 311, in _grab_next_args
    for seg in self._plot_args(remaining, kwargs):
  File "/usr/lib/pymodules/python2.6/matplotlib/axes.py", line 288, in _plot_args
    x, y = self._xy_from_xy(x, y)
  File "/usr/lib/pymodules/python2.6/matplotlib/axes.py", line 204, in _xy_from_xy
    bx = self.axes.xaxis.update_units(x)
  File "/usr/lib/pymodules/python2.6/matplotlib/axis.py", line 982, in update_units
    self._update_axisinfo()
  File "/usr/lib/pymodules/python2.6/matplotlib/axis.py", line 994, in _update_axisinfo
    info = self.converter.axisinfo(self.units, self)
  File "/usr/local/lib/python2.6/dist-packages/pandas/tseries/converter.py", line 184, in axisinfo
    majfmt = PandasAutoDateFormatter(majloc, tz=tz)
  File "/usr/local/lib/python2.6/dist-packages/pandas/tseries/converter.py", line 195, in __init__
    dates.AutoDateFormatter.__init__(self, locator, tz, defaultfmt)
TypeError: __init__() takes at most 3 arguments (4 given) 
```

我对所显示的特定错误的原因不感兴趣，很明显，pandas 期望使用不同版本的 matplotlib——这是从标准 debian 存储库获取一个包并通过 pip 获取另一个包的相当大的风险，而且我已经'通过允许 pip 升级 matplotlib 解决了这部分问题。

真正的问题是——现在出现了一个三重问题：为什么仅仅*导入*pandas 就破坏了 matplotlib 处理日期时间对象的能力，而前两行的 pandas 显然甚至没有参与相同的操作？导入时 pandas 是否会默默地更改顶级命名空间中的其他模块以强制它们使用 pandas 方法？对于 python 模块，这是可以接受的行为吗？因为我需要能够依赖它导入，比如说，一个随机数模块，不会默默地改变，比如说，pickle 模块将随机盐应用于它写的所有内容。

**更新更多信息**

python 是 2.6.6（当前 debian stable 来自包 2.6.6-3+squeeze7）

matplotlib 版本是 debian 的 0.99.3-1（当前 debian stable 来自包 python-matplotlib）

pandas 版本是 0.9.0（不久前安装了“pip install pandas”——不是今天）

平台是运行 debian Squeeze 的 i386

**复制步骤**

1.  （很明显）引导一个干净的 debian 挤压 i386 安装并 chroot 进入它。
2.  apt-get 更新
3.  apt-get 安装 python python-matplotlib
4.  apt-get install python-pip build-essential python-dev
5.  pip install --upgrade numpy
6.  点安装熊猫

*现在开始一个交互式 python 会话*

```
import numpy
import datetime
# Next two lines added to original example to avoid hassle with DISPLAY in chroot
import matplotlib
matplotlib.use('agg')
from matplotlib import pyplot

x = [datetime.datetime.utcfromtimestamp(i) for i in numpy.arange(100000,200000,3600)]
y = range(len(x))

pyplot.plot(x, y)

import pandas

pyplot.plot(x, y) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:12:26.893

当您导入`pandas`时，它会使用`matplotlib`. 这是来自两个库的更新版本，但我认为整体行为是相同的。

```
In [4]: import matplotlib.units as muints

In [5]: muints.registry
Out[5]: 
  {datetime.date: <matplotlib.dates.DateConverter instance at 0x2ab8908>,
   datetime.datetime: <matplotlib.dates.DateConverter instance at 0x2ab8ab8>}

In [6]: import pandas

In [7]: muints.registry
Out[7]: 
{pandas.tseries.period.Period: <pandas.tseries.converter.PeriodConverter instance at 0x2627e60>,
 pandas.tslib.Timestamp: <pandas.tseries.converter.DatetimeConverter instance at 0x264ea28>,
 datetime.date: <pandas.tseries.converter.DatetimeConverter instance at 0x2532fc8>,
 datetime.datetime: <pandas.tseries.converter.DatetimeConverter instance at 0x2627ab8>,
 datetime.time: <pandas.tseries.converter.TimeConverter instance at 0x2532f38>} 
```

此注册表由`axis`（具有几层重定向）用于确定如何格式化不是数字的信息，并且它与它试图标记的事物的类别相匹配（因此，字典中的条目键入`datetime.*`）。

我怀疑你可以通过替换有问题的条目来解决这个问题`dict`

# java - java gwt richtextarea更改字体系列

> ID：13988118
> 
> 赞同：5
> 
> 时间：2012-12-21T10:10:16.540
> 
> 标签：java, gwt, fonts

java gwt的对象richtextarea默认字体系列'times new roman'是否有可能将系列更改为'Arial'？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:46:08.970

你有几个选择。您可以创建一个 CSS 类并将其设置在 RichTextArea 内部文档的 body 元素上，也可以直接在其上设置 style 属性。如果您希望此更改在整个应用程序中保持一致，我建议创建一个新类并向其添加 InitializeHandler。

```
public class MyRichTextArea extends RichTextArea {

    public MyRichTextArea() {

        addInitializeHandler(new InitializeHandler() {

            @Override
            public void onInitialize(InitializeEvent ie) {

                Document document = IFrameElement.as(getElement()).getContentDocument();
                BodyElement body = document.getBody();
                body.setAttribute("style", "font-family: Arial Unicode MS,Arial,sans-serif;");
            });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:35:44.370

最好使用提供的功能。如果您想在创建时更改它，您将需要答案 1 中提到的 initializeHandler：

```
RichTextArea rta = new RichTextArea();
rta.addInitializeHandler(new InitializeHandler() {
    public void onInitialize(InitializeEvent event) {
            rta.getFormatter().setFontName("\"Trebuchet MS\",Trebuchet,Arial");
            rta.getFormatter().setFontSize(FontSize.SMALL);
            rta.getFormatter().setForeColor("#FF0000");
        }
    }); 
```

PS：您需要在向文本区域添加任何内容之前执行此操作，否则它将仅应用于新输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T09:39:43.400

我找到了更常见的解决方案：

```
addInitializeHandler(new InitializeHandler() {
        public void onInitialize(InitializeEvent ie) {
            Document document = IFrameElement.as(getElement()).getContentDocument(); 
            BodyElement body = document.getBody(); 
            HeadElement head = HeadElement.as(Element.as(body.getPreviousSibling())); 
            LinkElement styleLink = document.createLinkElement(); 
            styleLink.setType("text/css"); 
            styleLink.setRel("stylesheet"); 
            styleLink.setHref("richtextarea.css"); 
            head.appendChild(styleLink);
        } 
    }); 
```

添加初始化处理程序后，可以轻松更改`richtextarea.css`文件中的样式

# php - iterator_to_array 截断输出

> ID：13988123
> 
> 赞同：4
> 
> 时间：2012-12-21T10:10:31.160
> 
> 标签：php, iterator, spl

[来自 PHP 文档](http://php.net/manual/en/function.iterator-to-array.php)

> iterator_to_array — 将迭代器复制到数组
> 数组 iterator_to_array ( Traversable $iterator [, bool $use_keys = true ] )

它适用于所有可 [遍历](http://php.net/manual/en/class.traversable.php)接口，但为什么我在以下代码中输入错误：

```
$data = array(
  0 => array(
    0 => 1,
  ),
  1 => array(
    0 => 2,
  ),
  2 => array(
    0 => 3,
    1 => 4,
    2 => 5,
  ),
  3 => array(
    0 => 6,
  ),
  4 => array(
    0 => 7,
  ),
);

$it =  new RecursiveIteratorIterator(new RecursiveArrayIterator($data));

echo PHP_EOL, iterator_count($it); // 7  total correct
echo PHP_EOL, implode(iterator_to_array($it));  //745  instead of 1234567 
echo PHP_EOL, implode(iterator_to_array($it, true)); //745  instead of 1234567 
```

但

```
foreach($it as $v)
{
    echo $v ;
} 
```

输出

```
1234567 
```

[见在线演示](http://3v4l.org/fYPvo)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:40:52.140

这是因为`$use_keys`默认情况下是真的（从 5.1 开始），当它被展平时会破坏你的数组键。您需要禁用这样的设置：

```
print_r(iterator_to_array($it, false));
//                             ^^^^^ 
```

如果您运行的是 PHP < 5.2.1，那么您基本上就完蛋了 ;-)

# apache-flex - 这些面板有什么用？

> ID：13988124
> 
> 赞同：0
> 
> 时间：2012-12-21T10:10:46.977
> 
> 标签：apache-flex, flash-builder

前往菜单`Window > Show View > Other... > Debug > Display (and Registers)`

这些面板`Display`，`Registers`它们的用途和使用方法是什么？

![在此处输入图像描述](../Images/4a056374d73d7fcc16fb4b20323b50a5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:33:55.050

flex 不支持这些日食视图。

寄存器视图适用于 C++，它显示处理器的寄存器（这对 flex 绝对没有意义）。

显示视图用于 Java 调试，在 flex 调试期间不激活。

以下是他们描述的链接：

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fdisplay%2Fref-display_view.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fdisplay%2Fref-display_view.htm)

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fdisplay%2Fref-display_view.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fdisplay%2Fref-display_view.htm)

# cucumber - 如何跳过 Cucumber 步骤？

> ID：13988125
> 
> 赞同：9
> 
> 时间：2012-12-21T10:10:57.287
> 
> 标签：cucumber

我有这样的场景：

1.  鉴于我去这个页面
2.  当我输入黄瓜时
3.  我点击
4.  然后我应该看到文字
5.  我不应该看到这条线

如果我运行这个场景，它将执行所有 5 个步骤。但我想跳过第 4 步（然后我应该看到文本）并执行第 5 步。

请给我你的建议。提前致谢。:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T10:29:48.237

TL; DR - 不要这样做 - 你（可能）弄错了。而且你不能（容易）做到这一点。正如 Aslak 所写（Cucumber 的主要创造者之一）：

> 一个步骤可以产生以下结果：
> 
> *   未定义（没有匹配的 stepdef）
> *   待处理（抛出 PendingException 的匹配 stepdef）
> *   通过（不抛出任何东西的匹配 stepdef）
> *   失败（一个匹配的 stepdef 抛出一个不是 PendingException 的异常）
> *   已跳过（引发任何异常（未定义、待处理或失败）的步骤之后的步骤）
> 
> 您要求的是一种新的结果-被忽略。它可以通过抛出 IgnoredException 来实现。这意味着 skipped 必须更改为：（引发任何异常（未定义、未决或失败）的步骤之后的步骤 - 除非异常是 IgnoredException）
> 
> 我不确定我喜欢这个。这听起来比它需要的更复杂。您已经掌握了某些问题的必要信息 - 您的步骤将失败或待处理。我看不到继续执行以下步骤的价值。您仍然必须实施失败/待定步骤。
> 
> 只要提醒你“这里有工作要做”，我认为让 Cucumber 告诉你需要做什么样的工作并不容易......
> 
> 阿斯拉克

整个讨论在这里：[http ://comments.gmane.org/gmane.comp.programming.tools.cucumber/10146](http://comments.gmane.org/gmane.comp.programming.tools.cucumber/10146)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-12T18:27:33.730

I have had to skip steps conditionally based on environments. I used `next` to skip steps. Here is an example on how to do what you wanted.

```
Then /^I should see the text/$ do
    next if @environment == 'no text'

    ...
       <The actual step definition>
    ...
end 
```

# java - 将日期转换为时间

> ID：13988132
> 
> 赞同：0
> 
> 时间：2012-12-21T10:11:22.313
> 
> 标签：java, mysql, date, time, phpmyadmin

我在使用预制的 Java 主表时遇到了一些问题。

问题是它需要以 dd-mm-yyyy-hh-mm-ss 的形式显示我的 PHPMyAdmin 中的插入日期，但它只显示 dd-mm-yyyy。只有当我在应用程序本身中对其进行编辑时，它才会向我显示正确的表单。

我知道一些格式化它的方法，但我不知道如何在预制的主表中使用这些方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:41:03.447

在 Java 中使用 DateAndTime，在您的 PhpMyAdmin 中您声明了日期和时间还是仅声明了日期？

# .net - VB.NET 中的按位移位

> ID：13988134
> 
> 赞同：0
> 
> 时间：2012-12-21T10:11:45.013
> 
> 标签：.net, vb.net, visual-studio-2012, bit-manipulation, bit-shift

有一个端口号存储在两个字节中，我想将它作为整数返回。这里的代码：

```
Dim PORT As Integer
PORT = (req.Skip(req.Skip(4).Take(1).ToArray()(0) + 5).Take(1).ToArray()(0) << 8) + req.Skip(req.Skip(4).Take(1).ToArray()(0) + 6).Take(1).ToArray()(0) 
```

但这不起作用。我该如何解决？

结果应该是这样的：25 << 8 => 6400 + 145 => 6545

但这就是我得到的：25 + 145 => 145

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:52:33.203

您需要将（至少一个）您的操作数转换为移位操作到更大的数据类型。

来自[`<<`](http://msdn.microsoft.com/en-US/library/7haw1dex%28v=vs.80%29.aspx)：

> 算术移位不是循环的，这意味着从结果的一端移出的位不会在另一端重新引入。在算术左移中，超出结果数据类型范围的位移位将被丢弃，并且右侧空出的位位置设置为零。

所以它需要是这样的：

```
CInt(25) << 8 + 145 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:46:15.263

我不确定您的代码是做什么的，而不是它应该做什么，而是基于您的示例：

```
Dim result = CInt(req(0)) << 8 Or req(1) 
```

（您也可以使用`+`而不是`Or`，它不会改变任何事情，但使用按位或在这里感觉更正确。）

更简单的是，使用[框架的内置方法](http://msdn.microsoft.com/en-us/library/system.bitconverter.toint16.aspx)：

```
Dim result = CInt(BitConverter.ToInt16(req, 0)) 
```

# maven - maven pluginManagement plugin.version 缺失

> ID：13988139
> 
> 赞同：2
> 
> 时间：2012-12-21T10:12:01.527
> 
> 标签：maven

在我的项目中，我有一个带有以下 pluginManagement 配置的父 pom：

```
<build>
  <pluginManagement>
    <plugins>
      ...
      <plugin>
        <groupId>org.apache.maven.plugin</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
          <encoding>utf-8</encoding>
        </configuration>
      </plugin>
      ...
    </plugins>
  </pluginManagement>
</build> 
```

现在，当我尝试激活子模块中的插件时。我收到此错误：

> `'build.plugins.plugin.version' for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 42, column 12`

在我的子模块中，我有这个插件配置：

```
<build>
  <plugins>
    <plugin>
      <artifactId>maven-compiler-plugin</artifactId>
    </plugin>
  </plugins>
</build> 
```

为什么模块没有找到其父 pom 中指定的版本属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:35:35.470

首先是因为您使用了错误的 groupId。正确的是**org.apache.maven.plugins**而不是*org.apache.maven.plugin*。此外，您已经定义了 maven-compiler-plugin 的旧版本（2.5.1 而不是 3.0）

# php - 获取存档类型

> ID：13988142
> 
> 赞同：-1
> 
> 时间：2012-12-21T10:12:07.463
> 
> 标签：php, file, mime, substr, strpos

我正在尝试使用 和 获取 php 中的存档`strops`类型`substr`。

如何从文件名的末尾找到第一个点的位置？

```
$archive_name=$_FILES['uploaded_file']['name'];

$type=substr($archive_name, strpos(".") )  ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:13:19.447

您可以为此使用[pathinfo](http://docs.php.net/pathinfo)。
但我宁愿建议使用[fileinfo而不是依赖文件名](http://docs.php.net/fileinfo)

> 该模块中的函数尝试通过在文件中的特定位置查找某些魔术字节序列来猜测文件的内容类型和编码。虽然这不是万无一失的方法，但使用的启发式方法做得很好。

# css - 如何取消设置最大高度？

> ID：13988145
> 
> 赞同：194
> 
> 时间：2012-12-21T10:12:21.410
> 
> 标签：css

`max-height`如果之前在某些 CSS 规则中设置了该属性，如何将其重置为默认值？这不起作用：

```
pre {
  max-height: 250px;
}

pre.doNotLimitHeight {
  max-height: auto; // Doesn't work at least in Chrome
} 
```

* * *

## 回答 #1

> 赞同：358
> 
> 时间：2012-12-21T10:14:33.333

将其重置为`none`：

```
pre {
  max-height: 250px;
}

pre.doNotLimitHeight {
  max-height: none;
} 
```

**[参考](https://developer.mozilla.org/en-US/docs/CSS/max-height)**

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-21T10:15:04.817

您可以使用以下 css 清除 max-height 属性：

```
max-height:none; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-11-06T14:29:48.787

您可以使用

```
max-height: unset; 
```

如果您从其父级继承（将作为关键字继承），它将重置为其继承值，如果您不继承，它将重置为其初始值（将作为关键字初始）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-08T03:45:39.160

请注意，如果您使用 JavaScript 来设置元素的样式，例如`$el.style.maxHeight = '50px';`using`$el.style.maxHeight = 'none';`不会“重置”或“删除” `50px`，它只会覆盖它。这意味着，如果您尝试“重置”使用`$el.style.maxHeight = 'none';`它的元素的最大高度，则会将该`none`值应用于`max-height`元素的属性，覆盖`max-height`CSS 选择规则中与该元素匹配的任何其他有效属性。

一个例子：

样式.css

```
.set-max-height { max-height: 50px; } 
```

main.js

```
document.querySelectorAll('.set-max-height').forEach($el => {
  if($el.hasAttribute('data-hidden')){
    $el.style.maxHeight = '0px'; // Set max-height to 0px.
  } else {
    $el.style.maxHeight = 'none'; // 'Unset' max-height according to accepted answer.
}); 
```

要真正“取消设置”内联样式，您应该使用`$el.style.removeProperty('max-height');`.

要为整个样式规则而不仅仅是单个元素完成此操作，您应该首先找到要修改的规则，然后`removeProperty`在该规则上调用函数：

```
for(let i = 0; i < document.styleSheets[0].cssRules.length; ++i){
  if(document.styleSheets[0].cssRules[i].selectorText == '.set-max-height'){
    document.styleSheets[0].cssRules[i].style.removeProperty('max-height');
    break;
  }
} 
```

您可以随心所欲地找到`StyleSheet`和`CssRule`对象，但对于一个简单的应用程序，我相信以上就足够了。

很抱歉将此作为答案，但我没有 50 个代表，所以我无法发表评论。

干杯。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-19T18:22:16.760

使用任一

```
max-height: none; 
```

或者

```
max-height: 100%; 
```

**注意**：第二个是相对于包含块的高度。

# iphone - 更改从超级视图中删除的 UIView 的方向

> ID：13988146
> 
> 赞同：0
> 
> 时间：2012-12-21T10:12:21.437
> 
> 标签：iphone, objective-c, xcode, ipad

在我的应用程序中，我有一个按钮和两个视图，当我点击按钮时，我从超级视图中删除了第一个视图，并将超级视图上的第二个视图添加为子视图。但问题是，当我将设备方向从纵向更改为横向，然后点击按钮时，它将以纵向视图而不是横向模式显示视图，反之亦然。这是我正在使用的代码。

```
 - (void)showFiles {
[UIView beginAnimations:nil context:NULL];

[UIView setAnimationDuration:1.25];

[UIView setAnimationTransition:([songTableView superview] ?
                                UIViewAnimationTransitionFlipFromLeft : UIViewAnimationTransitionFlipFromRight)
                       forView:toggleButton cache:YES];

UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];

if ((orientation == UIInterfaceOrientationLandscapeLeft) || (orientation == UIInterfaceOrientationLandscapeRight)) {
    [songTableView setFrame:CGRectMake(0.0f, 44.0f, 480.0f, 256.0f)];
}
else {
    [songTableView setFrame:CGRectMake(0.0f, 44.0f, 320.0f, 416.0f)];
}

if ([songTableView superview]) {
    [toggleButton setImage:[UIImage imageNamed:@"AudioPlayerAlbumInfo.png"] forState:UIControlStateNormal];
}
else {
    [toggleButton setImage:albumArtImageView.image forState:UIControlStateNormal];
}

[UIView commitAnimations];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];

[UIView setAnimationTransition:([songTableView superview] ?
                                UIViewAnimationTransitionFlipFromLeft : UIViewAnimationTransitionFlipFromRight)
                       forView:self.view cache:YES];
if ([songTableView superview])
{
    albumArtImageView.image = albumArtImage;
    albumArtImageView.contentMode = UIViewContentModeScaleAspectFit; 
    albumArtImageView.clipsToBounds = YES;

    [songTableView removeFromSuperview];
    [gradientLayer removeFromSuperlayer];

    [self.view addSubview:uppercontrollsView];
    [self.view addSubview:lowercontrollsView];
}
else
{
    [albumArtImageView setImage:[UIImage imageNamed:@"AudioPlayerTableBackground.png"]];
    albumArtImageView.contentMode = UIViewContentModeScaleAspectFill; 
    albumArtImageView.clipsToBounds = YES;

    [uppercontrollsView removeFromSuperview];
    [lowercontrollsView removeFromSuperview];
    [self.view addSubview:songTableView];

    [songTableView reloadData];
}

[UIView commitAnimations]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:16:36.897

如果你想处理 iOS 6，你可以做的是：

如果您在视图 A 上，则存储其 InterfaceOrientation，然后

```
-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return lastInterfaceOrientation;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:17:14.240

您可以使用 willRotateToInterfaceOrientation 方法。当您更改设备方向时，它会调用..

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 

 {

 return YES;

 }

  -(void)willRotateToInterfaceOrientation: (UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration

   {

    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) 

  {

  [btn setFrame:CGRectMake(20, 52, 728, 617)];

  }
 else

{

[btn setFrame:CGRectMake(20, 52, 728, 617)];

}

    } 
```

# javascript - highcharts图形中的输入字段

> ID：13988149
> 
> 赞同：1
> 
> 时间：2012-12-21T10:12:28.540
> 
> 标签：javascript, highcharts, data-visualization

我有一个 Highcharts 图形[http://jsfiddle.net/jerryvermanen/XRjyc/](http://jsfiddle.net/jerryvermanen/XRjyc/)，但我想添加一个输入字段。输入字段要求一年。输入后：

*   图形应在输入年份的基础上增加一年（因此 1992 变为 1993）。
*   该图形应在输入年份 + 1 上显示一条垂直绘图线（因此为 1993 年的一条线）。
*   它还应该在五年后（1998 年）和五年后（2003 年）添加一行，依此类推。
*   它还应该取这些年份（1993、1998、2003、2008、2013）的百分比并将它们添加到文本中。比如，“你支付 X%、Y%、Z% 等等。”
*   让事情变得更复杂一点，对于输入年份 1992 (4,94%)、1993 (3,74%)、1994 (4,77%)、1996 (4,52%)、1997 (4,94% )、1998 (3,74%) 和 1999 (4,77%)，应在 2001 年 3 月 1 日添加 () 之间的百分比。

    ```
    chart = new Highcharts.Chart({
        exporting: {
        enabled: false
        },
        chart: {
            renderTo: 'container',
            type: 'spline',
            marginRight: 20
        },
        title: {
            text: 'Rente DUO'
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: { // don't display the dummy year
                month: '%Y',
                year: '%Y'
            }
        },
        yAxis: {
    min:0,
            title: {
                text: 'Werkloosheid (%)'
            },

                         plotLines: [{
                value: 0,
                width: 2,
                color: '#000000',
                zIndex: 5
            },            {
                label: {
        text: 'Rente DUO',
        align: 'right'
        },
        value: 5,
                width: 0.5,
                color: '#ffffff',
                zIndex: 1
            }]
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'<br/>'+
                    Highcharts.dateFormat('%b %Y', this.x) +':</b> '+ this.y +'%';
            }
        },

         plotOptions: {
        spline: {
            lineWidth: 3,
            states: {
                hover: {
                    lineWidth: 4
                }
            },
            marker: {
                enabled: false,
                states: {
                    hover: {
                        enabled: true,
                        symbol: 'circle',
                        radius: 4,
                        lineWidth: 1
                    }
                }
            }
        }
    },
               legend: {
    enabled: false
    }, 
    ```

​</p>

如果这很复杂，也可以通过在进入一年后绘制一个新的图表来完成。该图将是具有相同数据的阶梯线图。

这怎么能做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:32:28.327

有趣的要求，我想除了第五个之外我都有。做到这一点相当容易。您需要[`plotLines`](http://api.highcharts.com/highcharts#xAxis.plotLines), 输入表单和另一个`<div>`元素。

首先，您需要从输入表单中提取您的年份并在其中添加 1 年（不知道为什么 +1，但在这里）：

```
passedYear = parseInt($('input:text').val(), 10) + 1; 
```

然后您需要将这个人类可读的年份转换为 javascript 时间戳：

```
showYear = Date.UTC(passedYear, 0, 1); 
```

从这里您还需要考虑用户输入的值是否高于数据的最大年份（也低于最小值）。以下是如何测试大于场景的方法：

```
var extremes = chart.xAxis[0].getExtremes();
var maxYear;
maxYear = extremes.dataMax;
if (maxYear > showYear) {
     do stuff
} 
```

然后你创建你的初始`plotLine`：

```
 chart.xAxis[0].addPlotLine({
        value: showYear,
        color: 'red',
        width: 2,
        id: 'plotLine'
    }); 
```

接下来，您希望以`plotLine`5 年为增量显示其他项目：

```
var plInterval;
plInterval = 5;
    while (nextPL < maxYear) {
        chart.xAxis[0].addPlotLine({
            value: nextPL,
            color: 'red',
            width: 2,
            id: 'plotLine'
        });
        nextYear = nextYear + plInterval;
        nextPL = Date.UTC(nextYear, 0, 1);
    } 
```

这是为了确保我们不会将不必要`plotLine`的项目添加到永远不会显示的无穷大。

附加要求是在页面上显示“您支付 xxxx”文本。为此，您需要一个`<div>`要写入的元素（或其他任何内容，取决于您）。为了获得这些值，我从[这里](https://stackoverflow.com/questions/12014412/highcharts-getting-y-value-in-one-series-based-on-x-value-from-another-series)提取了一个很棒的函数：

```
function getYValue(chartObj, seriesIndex, xValue) {
    var yValue = null;
    var points = chartObj.series[seriesIndex].points;
    for (var i = 0; i < points.length; i++) {
        if (points[i].x >= xValue) break;
        yValue = points[i].y;
    }
    return yValue;
} 
```

我像这样使用它：

```
var yVal1;
yVal1 = getYValue(chart, 0, maxYear);
strInterestPay = strInterestPay + yVal1 + '%, '; 
```

然后我把它`strInterestPay`写到`<div>`：

```
$("div:interest").html(strInterestPay); 
```

现在，我们需要写出附加`plotLine`项目的百分比：

```
yVal1 = getYValue(chart, 0, nextPL);
strInterestPay = ', ' + yVal1 + '%';
$('.content').append(strInterestPay); 
```

[演示](http://jsfiddle.net/wergeld/aHja5/)

# java - 带有空字段的 Parcelable 对象

> ID：13988151
> 
> 赞同：1
> 
> 时间：2012-12-21T10:12:59.720
> 
> 标签：java, android, parcelable

我正在使用一个可打包的对象来传递一个意图。传递方使用此代码：

```
 Parcelable product = new Product(res.getData(), alcohol.toLowerCase(Locale.ENGLISH).trim(), selectedSize, location);

    Intent intent = new Intent(Search.this, ProductPage.class);
    intent.putExtra("Product", product);
    startActivity(intent); 
```

要取出我正在使用的对象：

```
 Intent parentIntent = getIntent();
    Product newProduct = (Product)parentIntent.getParcelableExtra("Product"); 
```

我遇到的问题是 newProduct 的数据成员都是空的。通过签入调试器，我知道该产品在其字段中具有真实数据。这是我的产品类：

```
public class Product implements Parcelable {
    private int mData;
    private Location location;
    /** Product name of this alcohol. */
    private String productName;
    /** Size of this alcohol. */
    private String size;
    /** The list of ProductInfo's for the given product. */
    private ArrayList<ProductInfo> productInfos;
    // Test string
    String jsonStr = "{\"result\":{\"status\":200,\"message\":\"OK\"},\"data\":[{\"storeID\":2,\"store_name\":\"safeway\",\"store_gps\":\"still dont know\",\"price\":3.99},{\"storeID\":1,\"store_name\":\"Hammy\",\"store_gps\":\"don't know\",\"price\":4.99}]}";

    /**
     * Takes a JSON string and parses its data field turning it into an array
     * of ProducInfo's. Note any exception thrown here is caught and not 
     * thrown again. It's assumed that the JSON string is correctly formated.
     * 
     * @param jsonStr
     *          The JSON string being parsed for it's data field.
     */
    public Product(JSONArray productInfo, String productName, String size, Location location) {
        this.location = location;
        productInfos = new ArrayList<ProductInfo>();
        this.productName = productName;
        this.size = size;

        try {
            parseData(productInfo);
        } catch (JSONException e) {
            // Response now handles the parse error
            // TODO: if data is in incorrect format it can throw an error...
        }
    }

    /**
     * Parses the data field of a JSONObject. If this field is not found or any
     * of the fields assumed to be contained in this field, {storeID, store_name,
     * price, store_gps} a JSONException is thrown.
     * 
     * @param dataObj
     *          The JSONObject containing a data field.
     * @throws JSONException
     *          If it can't find the data field, or any of data's fields.
     */
    private void parseData(JSONArray dataObj) throws JSONException {
        for (int i = 0; i < dataObj.length(); i++) {
            JSONObject dataField = dataObj.getJSONObject(i);
            int storeID = Integer.parseInt(dataField.getString("storeID"));
            String storeName = dataField.getString("store_name");
            double price = Double.parseDouble(dataField.getString("price"));
            double dist = calculateGPSDistance(dataField.getString("store_gps"));

            productInfos.add(new ProductInfo(storeID, storeName, price, dist));
        }
    }

    /**
     * Calculates the distance between GPSCoord and the users current GPS
     * coordinates.
     * 
     * @param GPSCoord
     *          GPS coordinates. Assumes that GPSCoord follows the following
     * format "latitude, longitude"
     * @return the distance between GPSCoord and the users current GPS coordinates.
     */
    private double calculateGPSDistance(String GPSCoord) {
        double lat1 = location.getLatitude();
        double long1 = location.getLongitude();
        String[] coordinates = GPSCoord.split(",");
        double lat2 = Double.parseDouble(coordinates[0]);
        double long2 = Double.parseDouble(coordinates[1]);

        // Check http://www.smokycogs.com/blog/finding-the-distance-between-two-gps-coordinates/
        // for details.
        lat1 = degToRad(lat1);
        long1 = degToRad(long1);
        lat2 = degToRad(lat2);
        long2 = degToRad(long2);

        double earthRadius = 6371; // km
        double deltaLat = lat2 - lat1;
        double deltaLong = long2 - long1;
        double a = Math.sin(deltaLat / 2.0) * Math.sin(deltaLat / 2.0) + 
                Math.cos(lat1) * Math.cos(lat2) *
                Math.sin(deltaLong / 2.0) * Math.sin(deltaLong / 2.0);
        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        double distance = earthRadius * c;
        return distance;
    }

    private double radToDeg(double radians) {
        return radians * (180 / Math.PI);
    }

    private double degToRad(double degrees) {
        return degrees * (Math.PI / 180);
    }

    /*
     * GETTER METHODS
     */

    public String getProductName() {
        return productName;
    }

    public String getSize() {
        return size;
    }

    /*
     * Check http://developer.android.com/reference/android/os/Parcelable.html
     * for details. These are all methods for Parcelable.
     */

    public int describeContents() {
        return 0;
    }

    public void writeToParcel(Parcel out, int flags) {
        out.writeInt(mData);
    }

    public static final Parcelable.Creator<Product> CREATOR = new Parcelable.Creator<Product>() {
        public Product createFromParcel(Parcel in) {
            return new Product(in);
        }

        public Product[] newArray(int size) {
            return new Product[size];
        }

    };

    private Product(Parcel in) {
        mData = in.readInt();
    }

    /**
     *  productInfos getter 
     */
    public ArrayList<ProductInfo> getProductInfos() {
        return productInfos;
    }
} 
```

Parcelables 已经让我感到困惑了，所以我不太确定这里发生了什么......谢谢

另请注意，因此，我的代码中出现空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:20:52.247

```
 Product product = new Product(res.getData(), alcohol.toLowerCase(Locale.ENGLISH).trim(), selectedSize, location);

    Intent intent = new Intent(Search.this, ProductPage.class);
    intent.putExtra("Product", product);
    startActivity(intent);

    Bundle bundle = getIntent().getExtras();

Product newProduct = bundle.getParcelable("Product"); 
```

# java - 哪种字符串连接技术在 Java 中更好？

> ID：13988153
> 
> 赞同：-2
> 
> 时间：2012-12-21T10:13:04.697
> 
> 标签：java, string, performance

> **可能重复：**
> [Java 中 toString() 中的 StringBuilder 与字符串连接](https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java)

在我的代码中，我使用如下所示的字符串连接。我正在做代码审查，所以我需要做性能检查。请任何人建议使用哪个更好。

```
quoteTreeMap.put(index + CommonUtil.QUOTE_TREE_DOT + fundIndex + CommonUtil.QUOTE_TREE_DOT + lastIndex,buffer.toString()); 
```

所以我们反复使用它

```
index + CommonUtil.QUOTE_TREE_DOT + fundIndex + CommonUtil.QUOTE_TREE_DOT + lastIndex 
```

只有`lastIndex`这个值会改变，其余的都是一样的。

如何编写代码以提供更好的性能？我可以申报吗

```
index + CommonUtil.QUOTE_TREE_DOT + fundIndex + CommonUtil.QUOTE_TREE_DOT 
```

这就像顶部一样

```
String one=""index + CommonUtil.QUOTE_TREE_DOT + fundIndex + CommonUtil.QUOTE_TREE_DOT" 
```

我可以用它`one+lastIndex`吗？
参考：

```
StringBuffer buffer = new StringBuffer();
buffer.append(CommonUtil.QUOTE_TREE_GROSS_PREM);
buffer.append(CommonUtil.QUOTE_TREE_SPACE);
buffer.append(CommonUtil.QUOTE_TREE_EQUALS);
buffer.append(CommonUtil.QUOTE_TREE_SPACE);
buffer.append(chcCalBreakDownObj.getPremium().getGrossPrem());
quoteTreeMap.put(index + CommonUtil.QUOTE_TREE_DOT + fundIndex + CommonUtil.QUOTE_TREE_DOT + lastIndex, buffer.toString());
lastIndex++;
clearBuffer(buffer); 
```

我正在做代码审查，所以我需要做性能检查。请任何人建议使用哪个更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T10:15:28.357

您应该使用，`StringBuilder`因为它不涉及`String`每次向其附加内容时都创建一个新的。

使用`+`运算符连接两个`String`s 创建一个新`String`对象。

请记住，`StringBuilder`和之间的主要区别在于`StringBuffer`后者是同步的，因此通常比前者慢。

有兴趣的可以查看[官方文档。](http://docs.oracle.com/javase/tutorial/java/data/buffers.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T10:20:35.460

对我来说，这听起来像你过早地优化。

专注于编写易于理解和维护的代码。然后对其进行分析以发现瓶颈所在，然后才进行优化。

您发布的两个版本之间的性能差异可能无关紧要。

PS 无论如何，了解 和 之间的区别是值得`StringBuffer`的`StringBuilder`。请参阅[StringBuffer 和 StringBuilder 类之间的区别](https://stackoverflow.com/questions/4793380/difference-between-stringbuffer-and-stringbuilder-class)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T10:45:57.143

您可以使用`StringBuilder`或`StringBuffer`。`StringBuilder`对于多线程是线程安全的，对于单线程`StringBuffer`很有用 t 提高了单线程的执行速度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T10:51:58.900

如果`one`每次迭代的结果都相同，请在循环之外预先生成它。然后你可以说`one + lastIndex`不用太担心效率低下；它至少与显式使用缓冲区一样高效（CPU 方面）。可能更是如此，因为您不是每次都从头开始重建字符串。它确实创建了一个半额外的字符串，但它要么是那个，要么是一个 StringBuilder，所以。

如果`index`、`fundIndex`或`CommonUtil.QUOTE_TREE_DOT`将不断变化，您有两种选择：

*   使用 StringBuilder 生成多行结果，或
*   在一行中完成所有连接。即：没有`String one = ...`。

几乎任何其他解决方案都会产生额外的字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T10:18:50.780

您可以使用[StringBuffer](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)或[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)。不同之处在于 StringBuffer 是线程安全的。如果您仅在方法中使用它，您将选择 StringBuilder。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T10:21:49.537

您应该首先分析代码并找到真正的性能猪。在显示的代码部分中使用 StringBuilder 可能会更快 - 但总体而言您获得了多少？

# php - URL 重写不起作用

> ID：13988154
> 
> 赞同：-1
> 
> 时间：2012-12-21T10:13:05.297
> 
> 标签：php, seo

我正在尝试使用这样的 URL 优化一个站点`/category.php?show=numberID`

我想要这样的东西：`/category/numberID/`

例如我想：`http://example.com/category.php?show=8`成为`http://example.com/category/8/`

我用谷歌搜索并遇到了这个`.htaccess`：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteRule ^category/([^/]*)/$ /category.php?show=$1 [L] 
```

这段代码有什么问题，请不要给我发一些教程链接，因为我看了很多，我只是想要你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:25:54.507

正如评论中所讨论的，您的重写规则似乎工作得很好，而您的问题是页面样式不再起作用。

这背后的问题是，就您的浏览器而言，您现在位于目录`/category/8/`中。这意味着任何指向样式或图像等的相关链接都将被解析为`/category/8/`而不是您的站点根目录。例如：

```
<img src="images/test.jpg" alt="Test" />
<script src="scripts/site.js" type="text/javascript"></script> 
```

将解决：

```
<img src="/category/8/images/test.jpg" alt="Test" />
<script src="/category/8/scripts/site.js" type="text/javascript"></script> 
```

而不是它们应该在的位置，在站点根目录中。解决此问题的最简单方法是使所有资源链接成为绝对链接，如下所示（通过添加 a `/`）：

```
<img src="/images/test.jpg" alt="Test" />
<script src="/scripts/site.js" type="text/javascript"></script> 
```

* * *

另一个权宜之计的解决方案（*远*不如上述首选）是使用`<base .. />`标签，如下所示：

```
<base href="http://example.com/" /> 
```

这将告诉您的浏览器所有相关链接都应该针对它进行解析`base`。

# android - Android：文本视图 Linkify.add 链接使文本视图中的完整行可点击

> ID：13988158
> 
> 赞同：1
> 
> 时间：2012-12-21T10:13:25.733
> 
> 标签：android, hyperlink, linkify

我在文本视图中显示一些文本，这是列表视图中的一个元素。我正在使用 Linkify.addLinks 在文本视图中添加链接。但问题是包含链接的完整行变得可点击，而不仅仅是我打算链接的文本（单词）。

我的功能：

```
private static void linkifyPattern(TextView view, String text, String url) {

    Linkify.TransformFilter filter = new Linkify.TransformFilter() {
        @Override
        public String transformUrl(Matcher match, String url) {
            return url;
        }
    };
    Pattern pattern = Pattern.compile(text);
    Linkify.addLinks(view, pattern, null, null, filter);
} 
```

我正在使用的自定义文本视图包含：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    TextView widget = (TextView) this;
    Object text = widget.getText();
    if (text instanceof Spanned) {
        Spannable buffer = (Spannable) text;

        int action = event.getAction();

        if (action == MotionEvent.ACTION_UP
                || action == MotionEvent.ACTION_DOWN) {
            int x = (int) event.getX();
            int y = (int) event.getY();

            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();

            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);

            ClickableSpan[] link = buffer.getSpans(off, off,
                    ClickableSpan.class);

            if (link.length != 0) {
                for (int i = 0; i < link.length;) {
                    System.out.println("Link:: " + link[i].toString());
                    if (action == MotionEvent.ACTION_UP) {
                        link[i].onClick(widget);
                    } else if (action == MotionEvent.ACTION_DOWN) {
                        Selection.setSelection(buffer,
                                buffer.getSpanStart(link[i]),
                                buffer.getSpanEnd(link[i]));
                    }
                    return true;
                }
            }
        }

    }
    return false;
} 
```

文本视图的 xml 代码是：

```
 <com.presenter.custom.CustomTextView
            android:id="@+id/news_message_collapsed"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:paddingRight="@dimen/news_view_text_right_padding"
            android:textColor="@color/black"
            android:textColorLink="@color/red"
            android:textSize="@dimen/news_view_text_size" /> 
```

谢谢

# ssl - 使用 CURL 的 SSL 登录问题

> ID：13988159
> 
> 赞同：1
> 
> 时间：2012-12-21T10:13:33.080
> 
> 标签：ssl, curl, verify

我正在使用本地机器（win7X64）并从实际网站下载 SSL 证书并将其本地存储在同一文件夹中。它工作了几天，但随后又开始返回相同的登录页面。

如果我使用“X.509 证书（*.crt;* .pem）”导出 SSL 证书，它会生成“[ssl_verify_result] => 20”，但是如果我使用“X.509 带链证书（PEM）（*.crt;* .pem)”它显示“[ssl_verify_result] => 0”，并在 Apace 错误日志中显示“SSL 证书验证结果：无法获得本地颁发者证书 (20)，仍然继续”。

谁能解释什么问题？或者目标服务器可以阻止从“localhost”生成的 curl 请求？

任何帮助表示赞赏！

# iphone - 如何使用故事板通过自定义图像设置 iphone 标签栏图标

> ID：13988162
> 
> 赞同：15
> 
> 时间：2012-12-21T10:13:39.103
> 
> 标签：iphone, ios, uitabbarcontroller, xcode4.5, uitabbar

我是 iphone 开发的新手，我需要在标签栏中放置一个自定义图像图标。但它只显示默认颜色（黑色和蓝色）。帮助我克服这个错误朋友......？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-21T13:40:00.823

在应用程序中添加图像，

并参见附图

![在此处输入图像描述](../Images/a5dc4bed1d2325b0d1ca2363a5dd3533.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T10:17:25.627

在 viewDidLoad 中使用此代码

```
UIImage *selectedImage0 = [UIImage imageNamed:@"selected.png"];
UIImage *unselectedImage0 = [UIImage imageNamed:@"unselected.png"];

UITabBarItem *item0 = [tabBar.items objectAtIndex:0];

[item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T11:13:19.227

**在 AppDelegate 中使用以下代码**

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary  *)launchOptions
{

UIViewController *viewController1 = [[ViewFirstViewController alloc] init];

UIViewController *viewController2 = [[ViewSecondViewController alloc] init];
UIViewController *viewController3 = [[ViewThirdViewController alloc] init];
UIViewController *viewController4 = [[ViewFourthViewController alloc] init];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2,viewController3,viewController4, nil];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];

imgTab = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,320.0,50)];
self.tabBarController.tabBar.tag=10;
[self.tabBarController.tabBar addSubview:imgTab];
self.tabBarController.delegate = self;

imghome=[[UIImageView alloc]initWithFrame:CGRectMake(0.0,00.0,80.0,50.0)];
imghome.image=[UIImage imageNamed:@"dressup_active.png"];
[imgTab addSubview:imghome];

imgQuiz=[[UIImageView alloc]initWithFrame:CGRectMake(80.0,00.0,81.0,50.0)];
imgQuiz.image=[UIImage imageNamed:@"x-mas_tree.png"];
[imgTab addSubview:imgQuiz];

imgtTW=[[UIImageView alloc]initWithFrame:CGRectMake(161.0,00.0,80.0,50.0)];
imgtTW.image=[UIImage imageNamed:@"greetings.png"];
[imgTab addSubview:imgtTW];

imgGuest=[[UIImageView alloc]initWithFrame:CGRectMake(241.0,00.0,80.0,50.0)];
imgGuest.image=[UIImage imageNamed:@"quotes_tab.png"];
[imgTab addSubview:imgGuest];

} 
```

**标签栏控制器委托方法**

```
- (void)tabBarController:(UITabBarController *)tabBarControllers didSelectViewController:(UIViewController *)viewController
{

NSLog(@"%i",tabBarControllers.selectedIndex);
if (tabBarControllers.selectedIndex == 0)
{

    imghome.image=[UIImage imageNamed:@"dressup_active.png"];
    imgQuiz.image=[UIImage imageNamed:@"x-mas_tree.png"];
    imgtTW.image=[UIImage imageNamed:@"greetings.png"];
    imgGuest.image=[UIImage imageNamed:@"quotes_tab.png"];

}
else if (tabBarControllers.selectedIndex == 1)
{

    imghome.image=[UIImage imageNamed:@"dressup.png"];
    imgQuiz.image=[UIImage imageNamed:@"x-mas_tree_active.png"];
    imgtTW.image=[UIImage imageNamed:@"greetings.png"];
    imgGuest.image=[UIImage imageNamed:@"quotes_tab.png"];

}
else if (tabBarControllers.selectedIndex == 2)
{

    imghome.image=[UIImage imageNamed:@"dressup.png"];
    imgQuiz.image=[UIImage imageNamed:@"x-mas_tree.png"];
    imgtTW.image=[UIImage imageNamed:@"greetings_active.png"];
    imgGuest.image=[UIImage imageNamed:@"quotes_tab.png"];

}
else if (tabBarControllers.selectedIndex == 3)
{

    imghome.image=[UIImage imageNamed:@"dressup.png"];
    imgQuiz.image=[UIImage imageNamed:@"x-mas_tree.png"];
    imgtTW.image=[UIImage imageNamed:@"greetings.png"];
    imgGuest.image=[UIImage imageNamed:@"quotes_active.png"];

}

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-15T17:04:42.587

您可以将此代码片段用于 ios7：

```
UIImage *iconBoxOffice = [UIImage imageNamed:@"box-office.png"];
UIImage *selectedIconBoxOffice = [UIImage imageNamed:@"selected-box-office.png"];
UIImage *iconDvds = [UIImage imageNamed:@"dvds.png"];
UIImage *selectedIconDvds = [UIImage imageNamed:@"dvds.png"];

UITabBar *tabBar = self.tabBarController.tabBar;
UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
UITabBarItem *item1 = [tabBar.items objectAtIndex:1];

[item0 initWithTitle:@"Box Office" image:iconBoxOffice selectedImage:selectedIconBoxOffice];
[item1 initWithTitle:@"Dvds" image:iconDvds selectedImage:selectedIconDvds]; 
```

如果您有更多选项卡，您可以继续添加更多项目。*不要忘记将图像添加到您的项目中 *这是以编程方式完成的，而不是使用情节提要

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-21T10:54:47.020

如果您想向标签栏添加自定义图像（图标和背景），而不仅仅是更改蓝色图标：

将以下代码添加到您的第一个 UIView .m 文件中。如果您从名为 FirstViewController.m 的“选项卡式应用程序”项目重新开始，请不要忘记将图像添加（并设置复选标记“将项目复制到目标组的文件夹”）到您的项目并为图像选择更好的名称。

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  UIImage *selectedImage0 = [UIImage imageNamed:@"customIcon0_unpressed.png"];
  UIImage *unselectedImage0 = [UIImage imageNamed:@"customIcon0_unpressed.png"];

  UIImage *selectedImage1 = [UIImage imageNamed:@"customIcon1_unpressed.png"];
  UIImage *unselectedImage1 = [UIImage imageNamed:@"customIcon1_unpressed.png"];

  UITabBar *tabBar = self.tabBarController.tabBar;
  UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
  UITabBarItem *item1 = [tabBar.items objectAtIndex:1];

  [item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
  [item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
} 
```

[您可以在Ray Wenderlichs](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)页面上找到有关此解决方案的更多信息以及大量其他优秀教程。

# air - 用于访问 IOS 上的本机 UI 控件的 AIR Native Extension

> ID：13988166
> 
> 赞同：0
> 
> 时间：2012-12-21T10:13:46.077
> 
> 标签：air, static-libraries, adt, air-native-extension

有没有人对帮助我使用苹果触摸设备的警报视图的空气原生扩展有一个清晰的想法或示例。我尝试了很多相同的方法，但最终没有成功。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:34:24.463

无论如何，我没有尝试过这个库，请尝试使用[NativeAlert](http://www.as3gamegears.com/air-native-extension/nativealert/)。

（或者）

这是访问本机 UI 的替代方法。

您可以尝试使用[ios-theme-for-flex-mobile-projects](http://blogs.adobe.com/jasonsj/2011/06/ios-theme-for-flex-mobile-projects-proof-of-concept.html)链接。

此链接显示为 iOS 警报视图。

请找到`mobiletheme_ios_usage.fxp`您可以下载该项目然后锻炼的链接。您可以看到 iOS 警报视图（不是本机 UI）。

# python - Python/Django：如何使用文件对象在 xlrd 中打开文件。

> ID：13988175
> 
> 赞同：0
> 
> 时间：2012-12-21T10:14:21.313
> 
> 标签：python, xlrd, django-file-upload

**背景：**

我已经使用 FileField 上传了一个 xls 文件。现在我想使用 xlrd 工具解析这个文件。

这样做时，我正在视图中执行以下操作。

```
if form.is_valid():
            user_file = form.save()
            user_file.save()             
            workbook = xlrd.open_workbook(user_file.file.name)//( user_file.file.name returns relative path to the media_root folder. )
            sheet = workbook.sheet_by_index(0) 
```

这给出了一个错误，因为 xlrd 无法找到该文件。（因为路径不是绝对的）。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:17:14.693

```
os.path.join(settings.MEDIA_ROOT, user_file.file.name) 
```

应该给出正确的路径。

# itext - 在 iText 中应用数字签名的公钥

> ID：13988179
> 
> 赞同：0
> 
> 时间：2012-12-21T10:14:36.060
> 
> 标签：itext, digital-signature

是否可以使用公钥应用数字签名并使用 iText 通过 PDF 中的私钥验证签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:37:01.513

使用私钥完成签名，使用公钥完成验证。相反的方案通常构成加密（您使用公钥加密数据并使用私钥解密）。

# ios - 在 SLComposeViewController 顶部显示附加图像

> ID：13988183
> 
> 赞同：3
> 
> 时间：2012-12-21T10:14:44.953
> 
> 标签：ios

将图像添加到 SLComposeViewController 时，图像会显示在 SLComposeViewController 视图的右侧。然而，它显示在下面（如下层）另一个看起来像指南针的默认图像。最重要的是一个剪辑。这个指南针图像是什么？我想在顶部显示附加的图像。会很好，而不是那个灰色的东西。

![在此处输入图像描述](../Images/b897172cb15af02e95cda1ee4a5a02a4.png)

附图是指南针下方的白色图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:36:55.133

我想我明白了。

指南针意味着您还将 URL 附加到社交帖子。

图像和指南针的顺序取决于您将这些内容添加到 SLComposeViewController 本身的方式。我先添加 URL，然后添加图像。只需更改顺序，剪辑到帖子的内容也会更改顺序。第一个添加的项目将显示在顶部。

这对于 iOS 5 中的 TWTweetComposeViewController 也是如此。

以上似乎适用于 Twitter。Facebook 从不显示任何附加图片...？

编辑：至于 Facebook - 由于 Safari 图标表示“URL”，我可以通过删除 addURL: alltogether 来显示附加图像的缩略图。有点奇怪。如果您不添加 URL，您将拥有图像的缩略图。您甚至可以更改将在其中发布图像的相册@Facebook。如果你添加一个 URL，你只会得到那个 Safari 图标。奇怪的。

# vb.net - 访问用户控件内部的控件

> ID：13988186
> 
> 赞同：0
> 
> 时间：2012-12-21T10:15:02.630
> 
> 标签：vb.net

我正在制作一个只有一个文本框的用户控件，所以基本上我希望文本框的属性必须应用于整个用户控件。
这意味着（例如）我想从用户控件外部（在包含这些用户控件的主程序中）获取那些（实习生）文本框的 selectionstart 属性的值。

但除了创建我的 UC 的新公共财产外，我找不到这样做的方法。
我想这应该是一些更好的方法，因为文本框有许多可能需要从主程序读取（或可能写入）的属性，并且在 UC 中为文本框的**每个**内部属性创建另一个公共属性似乎不是“要走的路” “ 为了我。

关于如何从主程序中获取 UC 内部控制属性的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:19:28.783

常规的 FindControl 检查不能解决这个问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:21:55.383

您可以从文本框控件继承您的用户控件，例如：

```
Class MyTextbox
      inherits TextBox
End class 
```

然后尝试覆盖、重载和访问您想要的事件和属性。

* * *

您可以检查以下链接，
1-对于[文本框继承示例](http://spac3crow.webs.com/apps/blog/show/3103662-extending-a-textbox-control-to-add-custom-properties-vb-net-2008)
2-在[Satckoverflow中回答的问题](https://stackoverflow.com/questions/3564273/vb-net-custom-control-inheriting-from-textbox-doesnt-fire-paint-event)

# php - 如何为从 php 脚本调用的 ac 程序设置计时器？

> ID：13988190
> 
> 赞同：0
> 
> 时间：2012-12-21T10:15:11.180
> 
> 标签：php, c, loops, timeout

我的网页中有一个文本区域，用户将在其中粘贴 ac 程序。在服务器端，我将这段代码适当地保存在一个文件中。我使用shell_exec() 函数调用gcc 来执行c 程序。这工作正常。执行部分也是如此。

但是如果用户（非）故意给出一个无限循环怎么办？当我使用该功能时 -

```
 shell_exec("./a.out") 
```

程序进入无限循环。如何从 php 脚本本身中跳出这样的循环？有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:25:40.623

使用[ulimit](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.cmds/doc/aixcmds5/ulimit.htm)来限制 CPU 使用率？请注意，这是针对每个进程的，因此如果用户不断地“分叉”该进程，您可能会遇到麻烦。

另一种方法是有一个包装进程来监视并杀死它的所有子进程，然后让它启动 a.out。这取决于您是否可以信任您的“客户”（例如，他们是您的好朋友，或者这是一个学校项目还是一个公共网站）——您的偏执程度应该随着威胁程度的增加而增加。

如果您想要更精细的安全性，请在虚拟机中通过 ssh 运行该过程。然后在 X 秒后杀死虚拟机，然后从保存的快照中启动一个新的虚拟机。（您可以准备好运行 VM 池，因此用户不必等待 VM 加载）

# algorithm - 如何有效地迭代具有常数和的数组组合？

> ID：13988197
> 
> 赞同：5
> 
> 时间：2012-12-21T10:16:05.690
> 
> 标签：algorithm

我有一个数组，它的长度是`X`. 数组的每个元素都有 range `1 .. L`。我想有效地遍历所有具有 sum 的数组组合`L`。

正确解：L = 4 和 X = 2

```
1 3
3 1
2 2 
```

正确解：L = 5 和 X = 3

```
1 1 3
1 3 1
3 1 1
1 2 2
2 1 2
2 2 1 
```

天真的实现（难怪）对于我的问题来说太慢了（在我的情况下，X 最高为 8，L 最高为 128）。

谁能告诉我这个问题是怎么命名的，或者在哪里可以找到解决这个问题的快速算法？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T13:11:54.713

如果我理解正确，您将得到两个数字 1 ≤ *X* ≤ *L*并且您想要生成所有长度为*X*且总和为*L*的正整数序列。

（注意：这类似于[整数分区问题](http://en.wikipedia.org/wiki/Partition_%28number_theory%29)，但不一样，因为您认为 1,2,2 与 2,1,2 是不同的序列，而在整数分区问题中我们忽略了顺序，因此这些被认为是同一个分区。）

您正在寻找的序列对应于*L* - 1中*X*  - 1 个项目的[组合](http://en.wikipedia.org/wiki/Combination) 。因为，如果我们将数字 1 到*L*  - 1 按顺序排列，并从中选择*X*  - 1 个，则区间的长度所选数字之间是总和为*L*的正整数。

 ***例如，假设*L*为 16，*X*为 5。然后从 1 到 15（含）中选择 4 个数字：

![从 1 到 15 中选择 3、7、8 和 14 四个数字](../Images/239fced684af2cc4dfa8a0b37f59f252.png)

开头加0，结尾加16，区间为：

![间隔 0-3、3-7、7-8、8-14 和 14-16](../Images/74141f84538f0dd794f476848eb0947b.png)

和 3 + 4 + 1 + 6 + 2 = 16 根据需要。

因此，从*L -1 中生成**X*  -1 项[的组合](https://stackoverflow.com/a/127856/68063)， 并且对于每一项，通过查找区间将其转换为分区。例如，在 Python 中，您可以编写：

 **```
from itertools import combinations

def partitions(n, t):
    """
    Generate the sequences of `n` positive integers that sum to `t`.
    """
    assert(1 <= n <= t)
    def intervals(c):
        last = 0
        for i in c:
            yield i - last
            last = i
        yield t - last
    for c in combinations(range(1, t), n - 1):
        yield tuple(intervals(c))

>>> list(partitions(2, 4))
[(1, 3), (2, 2), (3, 1)]
>>> list(partitions(3, 5))
[(1, 1, 3), (1, 2, 2), (1, 3, 1), (2, 1, 2), (2, 2, 1), (3, 1, 1)] 
```

有（*L*  -1）！/ ( *X*  − 1)!( *L*  − <em>X)! *L - 1 中**X*  - 1 个项目的组合 ，因此该算法的运行时间（及其输出的大小）在*L*中是指数的。但是，如果不计算输出，它只需要 O( *L* ) 空间。

 ***在*L*  = 128 和*X*  = 8 的情况下，有 89,356,415,775 个分区，因此需要一段时间才能将它们全部输出！

（也许如果您解释为什么要计算这些分区，我们可能会提出一些满足您要求的方法，而不必实际生成所有分区。）********

# sql - 为什么要在创建临时表后使用 EXEC？

> ID：13988198
> 
> 赞同：0
> 
> 时间：2012-12-21T10:16:08.387
> 
> 标签：sql, sql-server, sql-server-2008, tsql, stored-procedures

我创建了 2 个临时表`#ClientsCountForDoctor`和`#DeathCount`：

```
CREATE TABLE #ClientsCountForDoctor (DoctorCode int, Clients int)   

SELECT 
   Personal.[DoctorCode], Count(Clients.[ClientCode]) AS [Count-Код клиента]
FROM 
   Personal 
INNER JOIN 
   (Clients INNER JOIN MedicalCard ON Clients.[ClientCode] = MedicalCard.[ClientCode]) ON Personal.[DoctorCode] = MedicalCard.[DoctorCode]
GROUP BY 
   Personal.[DoctorCode];

INSERT INTO #ClientsCountForDoctor
EXEC nothing

CREATE TABLE #DeathCount (DoctorCode int, Deaths int)   

SELECT 
    Personal.[DoctorCode], Count(Clients.[ClientCode]) AS [Count-Код клиента]
FROM 
    Personal 
INNER JOIN 
    (Clients INNER JOIN MedicalCard ON Clients.[ClientCode] = MedicalCard.[ClientCode]) ON Personal.[DoctorCode] = MedicalCard.[DoctorCode]
GROUP BY 
    Personal.[DoctorCode], MedicalCard.[TreatmentResult]
HAVING 
    (((MedicalCard.[TreatmentResult])='Смерть'));

INSERT INTO #DeathCount
EXEC nothing 
```

然后我想使用结果。我应该执行什么？

```
SELECT 
   Personal.[DoctorName], 
   #DeathCount.Deaths/#ClientsCountForDoctor.Clients AS [DeathPercent]
FROM 
   (#ClientsCountForDoctor INNER JOIN Personal ON #ClientsCountForDoctor.[DoctorCode] = Personal.[DoctorCode]) 
INNER JOIN 
   #DeathCount ON Personal.[DoctorCode] = #DeathCount.[DoctorCode]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:50:35.797

我认为你需要的是`Select Into`语法。`It will create the table for you with the selected data inserted at the same time`. 然后从最后一个查询中使用创建的表进行正常选择

**前任：**

```
SELECT col1,col2,..
INTO #temp          --Note: this temporary table will be created in the db
FROM yourTable 
```

**您的疑问：**

```
SELECT Personal.[DoctorCode], 
       Count(Clients.[ClientCode]) AS [Count-Код клиента]
INTO #ClientsCountForDoctor --NOTE

FROM Personal INNER JOIN 
 (Clients INNER JOIN MedicalCard ON Clients.[ClientCode] = MedicalCard.[ClientCode]) 
           ON  Personal.[DoctorCode] = MedicalCard.[DoctorCode]
GROUP BY Personal.[DoctorCode];

SELECT Personal.[DoctorCode], 
       Count(Clients.[ClientCode]) AS [Count-Код клиента]
#DeathCount  --NOTE

FROM Personal INNER JOIN 
  (Clients INNER JOIN MedicalCard ON Clients.[ClientCode] = MedicalCard.[ClientCode]) 
          ON Personal.[DoctorCode] = MedicalCard.[DoctorCode]
GROUP BY Personal.[DoctorCode], MedicalCard.[TreatmentResult]
HAVING (((MedicalCard.[TreatmentResult])='Смерть'));

SELECT p.[DoctorName], d.Deaths/c.Clients AS [DeathPercent]
FROM #ClientsCountForDoctor c INNER JOIN Personal p
     ON c.[DoctorCode] = p.[DoctorCode]
           INNER JOIN #DeathCount d 
     ON p.[DoctorCode] = d.[DoctorCode]; 
```

# c++ - 如何在 boost.python 中转换 std::string*？

> ID：13988200
> 
> 赞同：0
> 
> 时间：2012-12-21T10:16:38.520
> 
> 标签：c++, python, c, boost-python

如何在boost.python中转换std::string*？我必须在python中处理一些c++的数据。数据可能很大。所以我返回一个指向python的指针。但是有一些错误。

# C++

```
#include <boost/python.hpp>
#include <string>

class A {
public:
    A() {
        data="342342fgsf";
        ss=&data;
    }
    std::string *ss;
    std::string data;
};

BOOST_PYTHON_MODULE(ctopy)
{
    using namespace boost::python;
    class_<A> ("A",init<>())
        .add_property(ss,&A::ss)
    ;
} 
```

# Python

```
import ctopy
t1=ctopy.A()
print t1.ss     #error.TypeError:No to_python (by-value) converter found for c++ type:std::string* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T10:34:48.527

你不能只传递指针。使用`pointer_wrapper`： http: [//www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/ptr.html](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/ptr.html)

# javascript - jQuery 元素附加到 DOM 时触发 OnAppend 事件

> ID：13988202
> 
> 赞同：2
> 
> 时间：2012-12-21T10:16:44.240
> 
> 标签：javascript, jquery, html

我写了一些代码来生成自定义控件。代码返回一个 jQuery 元素，调用者将此 jQuery 元素附加到 DOM。我将自定义滚动条应用于生成器代码中的控件，但由于元素尚未附加到 DOM，因此它没有被应用。

我的问题：是否有任何 onAppend 事件或类似的事件，以便我在将元素附加到 DOM 时应用自定义滚动条？

生成器的示例代码：

```
function getControl(controlParams){
    var $control = $('<div/>');
    $control.applyCustomScrollBar(); //Not appended to DOM yet, so doesnt work
    return $control;
} 
```

消费者示例代码：

```
var $control = getControl(controlParams);
$("body").append($control); //Appending to DOM now 
```

想做类似的事情：

```
function getControl(controlParams){
    var $control = $('<div/>');
    $control.onAppend(function(){
        $(this).applyCustomScrollBar();
    });

    return $control;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:20:15.410

要检测元素是否已添加到 DOM，您需要触发自定义事件，请尝试以下操作：

```
$("body").on("appened", "div", function(event){
    //event after append the element into DOM, do anything
    $(this).css("background", "blue");
});

$("<div/>", {
    id: "some-control",
    text: 'Example Control'
}).appendTo("body").trigger("appened");​ 
```

小提琴示例：http: [//jsfiddle.net/uudDj/1/](http://jsfiddle.net/uudDj/1/)

希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-01T21:17:27.323

你可以在没有 jquery 的情况下做到这一点`MutationObserver`

> `MutationObserver`为开发人员提供了一种对 DOM 中的更改做出反应的方法。它旨在替代 DOM3 事件规范中定义的突变事件。

```
// select the target node
var target = document.getElementById('some-id');

// create an observer instance
var observer = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    console.log(mutation.type);
  });    
});

// configuration of the observer:
var config = { attributes: true, childList: true, characterData: true };

// pass in the target node, as well as the observer options
observer.observe(target, config);

// later, you can stop observing
observer.disconnect(); 
```

来源： [devdocs.io](http://devdocs.io/dom/mutationobserver)，取自[这篇博文](http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)

# multithreading - 我正在从 servlet 向 jsp 发送请求，它们是否在同一个线程中运行？

> ID：13988204
> 
> 赞同：1
> 
> 时间：2012-12-21T10:16:48.860
> 
> 标签：multithreading, jsp, servlets

1.  我从 servlet 向 jsp 发送请求。
2.  现在 jsp 由容器（如 Tomcat）转换为 servlet。
3.  然后生成 HTML 文件并在浏览器中呈现。

我的问题是：步骤 1 和 2 是否在同一个线程中执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:45:33.057

Servlets 2.5 规范没有从并发处理的角度定义这种情况。因此答案取决于容器的实现。

Servlets 3.0 规范定义了异步 servlet。这些 servlet 可以执行异步调度，从而产生多个并行工作的线程。因此，对于执行异步分派的具有异步支持的 servlet，答案肯定是否定的。

# c# - 在单选按钮列表中动态添加子列表视图项

> ID：13988205
> 
> 赞同：1
> 
> 时间：2012-12-21T10:16:50.123
> 
> 标签：c#, jquery, asp.net

有这个 asp.net 单选按钮列表，它有三个列表视图项。

```
 <asp:RadioButtonList ID="rdbFolderOptions" runat="server" RepeatDirection="Vertical"
                        RepeatLayout="Flow" Font-Size="Medium" AutoPostBack="true" OnSelectedIndexChanged="rdbFolderOptions_SelectedIndexChanged">
                        <asp:ListItem Text="Calendar" Value="0" />
                        <asp:ListItem Text="Tasks" Value="1" />
                        <asp:ListItem Text="Contacts" Value="2" />
                    </asp:RadioButtonList> 
```

单击任何选项时，应该有一个包含修复选项的子列表。

```
<asp:RadioButtonList ID="rdbSubFolder" runat="server" RepeatDirection="Vertical"
                        RepeatLayout="Flow" Font-Size="Medium" AutoPostBack="true" OnSelectedIndexChanged="rdbSubFolder_SelectedIndexChanged">
                        <asp:ListItem Text="Editor" Value="0" />
                        <asp:ListItem Text="Reviewer" Value="1" />
                    </asp:RadioButtonList> 
```

例如 ：

如果您选择了“日历”，则子列表应位于“日历”下方，如下所示。

*   日历

    *   编辑
    *   审稿人
*   任务

*   联系人

我对使用 javascript/jquery/c# 感到很舒服，但无法弄清楚如何识别它。工作代码会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:28:05.343

更新 ：

检查这个：

[**如何在 [grand] 子节点中创建带有单选按钮的树视图？**](https://stackoverflow.com/questions/3863651/how-to-create-a-treeview-with-radio-buttons-in-the-grandchild-nodes)

* * *

我认为您正在寻找[**TreeView 控件**](http://msdn.microsoft.com/en-us/library/d4fz6xk2%28v=vs.80%29.aspx)

TreeView Web 服务器控件用于以树状结构显示分层数据，例如目录或文件目录。它支持以下功能：

*   自动数据绑定，它允许控件的节点绑定到分层数据，例如 XML 文档。

*   通过与 SiteMapDataSource 控件集成来支持站点导航。

*   可以显示为可选文本或超链接的节点文本。

*   通过主题、用户定义的图像和样式可自定义外观。

*   以编程方式访问 TreeView 对象模型，它允许您动态创建树、填充节点、设置属性等。

*   通过客户端回调到服务器（在支持的浏览器上）来填充节点。

*   能够在每个节点旁边显示一个复选框。

# sql-server - 如何将数据库中的所有表复制到Excel

> ID：13988213
> 
> 赞同：0
> 
> 时间：2012-12-21T10:17:20.183
> 
> 标签：sql-server

我有一个 SQL Server 2008 数据库，我想快速将数据库中的所有数据复制到单独的 Excel 电子表格或单独选项卡中的单个电子表格中。将数据放入单独的 CSV 文件中也可以。我如何做到这一点，而不必`select * from`为每个表做一个然后将数据复制到 Excel 中？有很多桌子。

**编辑**

运行向导以导出数据我在预执行时收到此错误

*   预执行（错误）

    消息错误 0xc0202009：数据流任务 1：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E21。（SQL Server 导入和导出向导）

    错误 0xc0202025：数据流任务 1：无法创建 OLE DB 访问器。验证列元数据是否有效。（SQL Server 导入和导出向导）

    错误 0xc004701a：数据流任务 1：组件“目标 - ApprovalStatuses”(25) 未能通过预执行阶段并返回错误代码 0xC0202025。（SQL Server 导入和导出向导）

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:23:58.367

使用服务器管理工​​作室：

```
Server Management Studio (right click on db) > 
  Tasks > 
      Export > 
         Login > 
            Destination box select Microsoft Excel > ... 
```

如果你在一个`64-bit server`那么;

```
Windows > Start Button > 
     All Programs >
         MS Sql Server [your version] > 
             USE Import and Export Data (32-bit) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:29:48.677

请参阅此链接[http://www.66pacific.com/sql_server_export_to_excel.aspx](http://www.66pacific.com/sql_server_export_to_excel.aspx)

使用 SQL Server 导入和导出向导，您可以轻松地将表从数据库复制到电子表格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:44:48.737

您可以`excel`使用`sql-server Import and Export Wizard`.

看看这篇关于[将 SQL Server 数据导出到 Excel](http://msdn.microsoft.com/en-us/library/cc952922%28v=sql.100%29.aspx)的文章。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-21T10:45:20.420

好的，请参阅此链接[http://www.hotscripts.com/forums/windows-net-programming/59962-export-data-database-excel-via-sql-command-customize-style-vb-net-without-auto .html](http://www.hotscripts.com/forums/windows-net-programming/59962-export-data-database-excel-via-sql-command-customize-style-vb-net-without-auto.html)的快速方法。

理想情况下，如果您有时间对其进行编程，我会使用 RDLC 构建自定义报告，您可以使用 DataTables 将其导出为 Excel。

有关如何将数据[导出](https://mashupweb.wordpress.com/2012/02/08/creating-an-online-list-of-users-in-a-database-using-report-wizard/)到使用 RDLC 的 Excel。

# c# - 使用 Code First Entity Framework 5 进行多个项目的可能性？

> ID：13988218
> 
> 赞同：0
> 
> 时间：2012-12-21T10:17:37.033
> 
> 标签：c#, entity-framework

我想知道是否可以使用相同的实体框架 5（此处为 Code First）创建多个项目，如果您有完整的示例？

我也想在我的解决方案中使用 MVP 模式。

我看到了一个问题：数据库是在第一次运行时创建的，但只是针对一个项目而不是全部。

我知道这不是很准确......但我只想知道这是否可能......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:25:34.310

在我的上一个项目中，我们开发了一个捕获业务领域的数据库，并且我们还将与安全相关的表存储在同一个数据库中但在不同的模式中。Visual Studio 中的域模型包括所有表，但数据访问分为两个项目。第一个是处理基本业务表的数据访问层，另一个是具有与安全表相关的映射的自定义安全身份验证。

除此之外，为了增加复杂性:-)，我们还添加了许多 DbContext 继承的类（在我们的 DAL 中），这些类捕获了用户正在使用的域的本质。例如，人力资源上下文处理与人力资源相关的表，物流上下文处理后勤表等。

# php - 删除用户无效

> ID：13988221
> 
> 赞同：0
> 
> 时间：2012-12-21T10:17:52.873
> 
> 标签：php, sql, cakephp

我希望能够删除一个用户，但是当我尝试它时会引发以下错误。“错误：在此服务器上找不到请求的地址 '/cakephp/users/delete/8?url=users%2Fdelete%2F8'。”

我的删除功能的代码是

```
public function delete($id = null)
{
        debug($this->User->delete());
        if (!$this->request->is('get')) 
        {
             throw new MethodNotAllowedException();
        }
        if ($this->User->delete($id)) 
        {
            $this->Session->setFlash('The user with id: ' . $id . ' has been deleted.');
            $this->redirect(array('action' => 'usermanage'));
        }
  } 
```

**[新]** 我摆脱了用户管理代码和索引代码，为我的用户模型代码腾出空间..

```
<?php
App::uses('AuthComponent', 'Controller/Component');
class User extends AppModel {

    public $primary_key = 'userID';
    public $validate = array(
        'username' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'A username is required'
            )
        ),

        'password' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'A password is required'
            )
        ),
        'name' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Your name is required'
            )
        ),
        'surname' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Your surname is required'
            )
        ),
        'memberType' => array(
            'valid' => array(
                'rule' => array('inList', array('admin', 'responder', 'volunteer')),
                'message' => 'Please enter a valid role',
                'allowEmpty' => false
            )
        ),
        'address1' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Please enter your first line of address'
            )
        ),
        'address2' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'please enter your second line of address'
            )
        ),
        'town' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Please enter your town'
            )
        ),
        'postCode' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'please enter your postcode'
            )
        ),
        'dob' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'please enter your date of birth'
            )
        ),
        'emailAddress' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'please enter your email address'
            )
        ),
        'phoneNumber' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'please enter your phone number'
            )
        ),
        'mobileNumber' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'please enter your mobile number'
            )
        )
    );

    public function beforeSave($options = array()) {
        if (isset($this->data[$this->alias]['password'])) {
            $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
        }
    }
}
?> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:57:03.513

可以通过两种方式纠正此错误（选择一种）：

1 - 将您的操作删除更改为：

```
if (!$this->request->is('post') && !$this->request->is('put')) {
    throw new MethodNotAllowedException();
} 
```

2 - 不使用 postLink，并更改删除操作：

```
<?php echo $this->Html->link('Delete', array('controller' => 'users', 'action' => 'delete', $user['User']['userID'])); ?>

public function delete($id = null) {
        $this->User->id = $id;

        if(!$this->User->exists()) {
            throw new NotFoundException(__('Invalid user'));
        }

        if ($this->User->delete($id)) {
            $this->Session->setFlash('The user with id: ' . $id . ' has been deleted.');
            $this->redirect(array('action' => 'usermanage'));
        }
} 
```

**[编辑]**
*对于您的 primaryKey 问题：*
在用户模型中：

```
public $primary_key = 'userID'; 
```

在其他模型中（belongsTo、hasMany、hasBelongsToMany）：

```
public $belongsTo = array(
    'User' => array(
        'className'    => 'User',
        'foreignKey'   => 'userID'
    )
); 
```

对不起我的英语，我是巴西人。

# git - PHPUnit、Zend Framework 2 入门教程、WAMP 和 git

> ID：13988222
> 
> 赞同：2
> 
> 时间：2012-12-21T10:17:56.050
> 
> 标签：git, windows-7, phpunit, wamp, zend-framework2

我正在关注[“入门”教程](http://framework.zend.com/manual/2.0/en/user-guide/overview.html)，但我被困在单元测试部分。我使用 git 打开 Git Bash 命令提示符并输入以下命令来安装 phpunit：

```
cd C:/wamp/bin/php/php5.4.3
git clone git://github.com/sebastianbergmann/phpunit.git 
```

我在目录中看到文件在那里。`C:\wamp\bin\php\php5.4.3`在我的 Path 环境变量中。我按照教程的要求创建了目录和文件。当我打开 Git Bash 命令提示符并输入：

```
cd C:/wamp/www/ZendSkeletonApplication/module/Application\test
phpunit 
```

我得到错误`sh.exe": phpunit: command not found`。

我究竟做错了什么？

**更新：**我在 php.ini 中添加`C:\wamp\bin\php\php5.4.3\phpunit`了我的 include_path，但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T22:23:36.400

你试图在 git shell 中运行这些东西——这是错误的。除非你明白发生了什么，否则只能在 git shell 中运行 git stuff。按`Windows Key`+`R`并输入`cmd`。在那里再试一次。

# python - Twisted - SleekXMPP 兼容性

> ID：13988224
> 
> 赞同：3
> 
> 时间：2012-12-21T10:18:15.037
> 
> 标签：python, xmpp, twisted

我正在 python 中制作一个 XMPP 中间件，它侦听地址（主机，端口），当它在该端口上接收到一些连接时，它会向服务器上的 jid（XMPP 用户）发送一条 XMPP 消息。快速回顾我的设置 对于网络部分，我正在使用 twisted For XMPP - SleekXMPP XMPP 服务器 - Openfire

现在，当我尝试使用 slimXMPP 而不从 twistedm 导入任何内容时，它工作正常。但是，我尝试在一个程序中混合使用 slimXMPP 和扭曲（通过导入它们），我得到了以下错误。

```
Traceback (most recent call last):
File "sleekXMPP/prog_3.py", line 124, in <module>
  main()
 File "sleekXMPP/prog_3.py", line 111, in main
  xmppThread = ClientThread(dir_q)
File "sleekXMPP/prog_3.py", line 41, in __init__
  self.xmpp = xmppClient(self.jid, self.password)
File "sleekXMPP/prog_3.py", line 17, in __init__
  sleekxmpp.ClientXMPP.__init__(self, jid, password)
File "build\bdist.win32\egg\sleekxmpp\clientxmpp.py", line 65, in __init__
File "build\bdist.win32\egg\sleekxmpp\basexmpp.py", line 72, in __init__
File "build\bdist.win32\egg\sleekxmpp\jid.py", line 461, in __init__
File "build\bdist.win32\egg\sleekxmpp\jid.py", line 150, in _parse_jid
File "build\bdist.win32\egg\sleekxmpp\jid.py", line 202, in _validate_domain
File "C:\Python27\lib\site-packages\twisted-12.2.0-py2.7-win32.egg\twisted\python \compat.py", line 22, in inet_pton
  raise ValueError("Illegal characters: %r" % (''.join(x),))
ValueError: Illegal characters: u't' 
```

代码如下：

```
import sleekxmpp
import ssl
import Queue
import threading
import time
import logging
import traceback
import sys
from twisted.internet import reactor, protocol , endpoints
class xmppClient(sleekxmpp.ClientXMPP):
    """
This class defines the xmppClient object used to interact with the XMPP server 
"""
    def __init__(self, jid, password):
        # the constructor 
        sleekxmpp.ClientXMPP.__init__(self, jid, password)
        self.add_event_handler('session_start', self.start)
    def start(self, event):
        self.send_presence()
       self.get_roster()

    def send_note(self):
        self.mssg = r"Hello from XMPP Service"
        self.recipient = r"testuser2@ghost"
        self.send_message(mto=self.recipient,
                     mbody=self.mssg,
                      mtype='chat')
        print "Message sent"

class ClientThread(threading.Thread):
    def __init__(self, dir_q):
        super(ClientThread, self).__init__()
        self.dir_q = dir_q
        self.stoprequest = threading.Event()
        self.jid = 'testuser1@ghost'
        self.password = 'password'
        self.xmpp = xmppClient(self.jid, self.password)
        self.xmpp.register_plugin('xep_0030') # Service Discovery
        self.xmpp.register_plugin('xep_0004') # Data Forms
        self.xmpp.register_plugin('xep_0060') # PubSub
        self.xmpp.register_plugin('xep_0199') # XMPP Ping

        self.xmpp.ssl_version = ssl.PROTOCOL_SSLv3

        if self.xmpp.connect():
            print("Connected")
            self.xmpp.process(block=False)
        else:
            print("Unable to connect.")

    def run(self):
        while not self.stoprequest.isSet():
            try:
                req = self.dir_q.get(True, 0.05)
                if req == 1:
                    self.xmpp.send_note()
            except Queue.Empty:
                continue

    def join(self, timeout=None):
        self.stoprequest.set()
        super(ClientThread, self).join(timeout)

class reqSimulator(threading.Thread):
    def __init__(self, dir_q):
        super(reqSimulator, self).__init__()
        self.dir_q = dir_q
    def run(self):
            while(1):
                self.dir_q.put(1)
                time.sleep(0.5)
"""class sendProtocol(protocol.Protocol):
      def connectionMade(self):
          r = reqSimulator(self.factory.dir_q)
          r.run()
      def connectionLost(self, reason):
         pass

     def dataReceived(self, data):
         self.transport.loseConnection()"""

def main():
    logging.basicConfig()
    dir_q = Queue.Queue()
    xmppThread = ClientThread(dir_q)
    xmppThread.start()
    sim = reqSimulator(dir_q)
    """factory = protocol.ServerFactory()
    factory.dir_q = dir_q
    factory.protocol = sendProtocol
    endpoints.serverFromString(reactor, "tcp:8001").listen(factory) 
   reactor.run()
   """
  sim.start()

if __name__ == "__main__":
    main() 
```

请注意，在此代码中，实际的网络代码已被注释，并且我正在使用 reqSimulator 类来模拟即将到来的请求。我试图用谷歌搜索任何已发布但没有结果。有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:48:43.290

这是因为 Twisted 为 Windows 实现了 inet_pton，但使用与 stdlib 版本不同的失败异常。

为此，我已经在 github 上修复了 Sleek（主分支和开发分支），很快就会有一个新的点发布。

# php - PHP 星期几数字到星期几文本不是英文

> ID：13988225
> 
> 赞同：1
> 
> 时间：2012-12-21T10:18:15.787
> 
> 标签：php, codeigniter, date, setlocale

我尝试使用`setlocale()`Windows 上的函数将日期名称转换为其他语言，但没有成功。

```
<?php setlocale(LC_ALL, 'nl_NL'); 
echo date("l", strtotime($variable); ?> 
```

有人可以替代`setlocale()`吗？我使用 Codeigniter 框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:25:16.620

您应该考虑使用`intl`具有`IntlDateFormatter`.

从[文档](http://php.net/manual/en/intldateformatter.format.php)中：

```
$fmt = new IntlDateFormatter( "en_US" ,IntlDateFormatter::FULL,IntlDateFormatter::FULL,'America/Los_Angeles',IntlDateFormatter::GREGORIAN  );
echo "First Formatted output is ".$fmt->format(0);
$fmt = new IntlDateFormatter( "de-DE" ,IntlDateFormatter::FULL,IntlDateFormatter::FULL,'America/Los_Angeles',IntlDateFormatter::GREGORIAN  );
echo "Second Formatted output is ".$fmt->format(0); 
```

哪个输出

```
First Formatted output is Wednesday, December 31, 1969 4:00:00 PM PT
Second Formatted output is Mittwoch, 31\. Dezember 1969 16:00 Uhr GMT-08:00 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T10:23:45.137

`nl_NL`是典型的 Unix 风格的语言环境名称。在 Windows 上，语言环境遵循[不同的格式](http://es1.php.net/manual/en/function.setlocale.php#refsect1-function.setlocale-notes)。你想要["nld"、"holland" 或 "netherlands"](http://msdn.microsoft.com/en-us/library/cdax410z%28v=vs.90%29.aspx)。

此外，`date()`不支持区域设置。你可能想要`strftime()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T10:23:42.420

`date`不根据语言环境格式化日期。[`strftime`](http://php.net/strftime)做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:30:17.093

```
setlocale(LC_ALL, 'german');
echo (iconv('ISO-8859-2', 'UTF-8', strftime('%Y. %B %d. (%A)', mktime('0', '0', '0', '6', '18', '2010'))));

setlocale(LC_ALL, 'hungarian');
echo (iconv('ISO-8859-2', 'UTF-8', strftime('%Y. %B %d. (%A)', mktime('0', '0', '0', '6', '18', '2010')))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T17:01:25.977

您可以[`strftime`](http://php.net/strftime)用于本地日期：

```
setlocale(LC_TIME, 'it_IT');
$timestamp = strtotime("31-12-2012");
echo strftime("%A", $timestamp); 
```

# c# - c# asp.net发送邮件问题

> ID：13988226
> 
> 赞同：1
> 
> 时间：2012-12-21T10:18:17.850
> 
> 标签：c#, asp.net, popup

我创建了一个 Web 应用程序，用户可以在其中发送好友请求。如果有两个用户**A**和**B**。如果**A用户向****B**发送好友请求，则**B**用户仪表板上会弹出一个显示。在那个弹出框中有两个按钮，**确认**或**忽略**。

如果用户单击**确认**按钮，则关闭该弹出框需要一些时间。因为在后台它执行发送电子邮件的代码。发送电子邮件后，该弹出框将关闭。因此，我想在单击**确认**按钮后立即关闭该弹出框，然后向该用户发送邮件。

这是我**接受请求和发送邮件的代码**

```
#region dlUserFriendRequests_ItemCommand
    protected void dlUserFriendRequests_ItemCommand(object source, DataListCommandEventArgs e)
    {
        HtmlTable objDataTable;
        //Panel objDataTable;
        switch (e.CommandName)
        {
            case "confirm":
                RadioButtonList objRadioButtonList;
                int intFriendRelationID = -1;
                objRadioButtonList = (RadioButtonList)e.Item.FindControl("rblstFriends");

                if (objRadioButtonList != null)
                {
                    intFriendRelationID = UserManagementBL.AcceptUserFriendRequest(Convert.ToInt32(e.CommandArgument), this.LoginSessionDO.UserID, objRadioButtonList.SelectedItem.Text);

                    if (intFriendRelationID > 0)
                    {
                        int SentByUserID = Convert.ToInt32(e.CommandArgument);
                        DataTable dtbSenderdetails = null;
                        string SenderEmail = "";

                        dtbSenderdetails = UserManagementBL.GetUserDetails(SentByUserID);
                        if (dtbSenderdetails != null)
                        {
                            SenderEmail = dtbSenderdetails.Rows[0]["UserName"].ToString();
                            SendConfirmationMail(SenderEmail);
                            Response.Redirect("~/Dashboard/Dashboard.aspx",false);                                
                            //GetUserFriendRequests();
                        }
                    }
                }
              break;    

              case "Ignore":
                int intFriendRequestID = -1;
                intFriendRequestID = UserManagementBL.IgnoreUserFriendRequest(Convert.ToInt32(e.CommandArgument), this.LoginSessionDO.UserID);
                GetUserFriendRequests();
                break;
        }
   }
        #endregion

 #region Send confirmation mail
    public void SendConfirmationMail(string email)
    {
        //DataTable dtblUserDetails = UserManagementBL.GetUserByUserName(email);
        //if (dtblUserDetails != null)
        //{
            //int UserID = Convert.ToInt32(dtblUserDetails.Rows[0]["UserID"]);

            //string FirstName = Convert.ToString(dtblUserDetails.Rows[0]["FirstName"]);
            //string LastName = Convert.ToString(dtblUserDetails.Rows[0]["LastName"]);
            string FirstName = this.LoginSessionDO.FirstName;
            string LastName = this.LoginSessionDO.LastName;

            var parameters = new System.Collections.Generic.Dictionary<string, string>();
            parameters.Add("USER_NAME", string.Format("{0} {1}", FirstName, LastName));

            parameters.Add("USER_IMAGE_URL", string.Format(SystemConfiguration.GetSiteURL() + "UserControls/UserPhoto.ashx?UserID={0}", this.LoginSessionDO.UserID));

            string ToAddress = email;
            string subject = FirstName + "  " + LastName + " confirmed you as a friend on Lifetrons.";

            CommonFunctions.CommonFunctions.SendEmail(SystemConfiguration.GetEmailSenderAddress(), ToAddress, subject, CommonFunctions.EmailTemplates.AcceptFriendRequest, parameters);
        //}
    }
    #endregion 
```

这是我的弹出框图片 ![警报](../Images/5c6531effe64b1cc9a6e6b219ec4a769.png)

那么如何在单击**确认**按钮后立即关闭该弹出框？我的代码有什么变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:20:09.727

您可以在 JavaScript 中执行此操作。~~我假设您已经在使用 AJAX 来执行该`Confirm`操作，否则它只会重新加载页面并且您的弹出窗口不应该在那里（因为它们已经被确认？）。~~

如果你在前端有 jQuery，你可以使用：

```
$('#confirm-box-id').hide(); 
```

如果没有 jQuery，您可以使用：

```
document.getElementById('confirm-box-id').style.display = 'none'; 
```

* * *

重新阅读您的信息，看来这只是一个长期的行动。您应该注意，如果您使用上面的代码隐藏它并且不显示任何进度指示，例如，您的用户可能会离开或关闭浏览器，这*可能会*导致操作停止处理或被服务器强制终止 -所以确认永远不会发生。

# opencl - 关于性能计数器的困惑

> ID：13988228
> 
> 赞同：2
> 
> 时间：2012-12-21T10:18:18.613
> 
> 标签：opencl, code-analyst

我正在开发一个用 OpenCL 编写并在 Fusion APU 上运行的程序（一个芯片上的 CPU+GPU）。我想获得一些性能计数器，例如指令编号、分支编号等。我手头有两个工具：AMD APP Profiler 和 CodeAnalyst。当我使用APP Profiler时，我发现它似乎只能为GPU提供指令计数器，不能为CPU提供指令计数器。然后我使用 CodeAnalyst，但随后出现了三个混淆。在 App Profiler 上，它可以给出 ALUInsts 的数量（即每个工作项执行的 ALU 指令的数量）大约是 70000。GPU 上的整个线程空间有 8192 个线程，所以我直观地认为有 70000 * 8192 条指令执行显卡。那正确吗？当我使用 CodeAnalyst 在 CPU 部分测量同一程序的指令时，它只是给出了“Ret inst”、“Ret branch”这样的计数器，但我不确定一件事：这个程序同时在 CPU 和 GPU 上运行，这些计数器有什么用？仅适用于 CPU，仅适用于 GPU？还是总和？不管这些计数器是做什么用的，我发现Ret Inst（即退役指令）的值大约是40000，对于整个程序来说似乎太小了，我猜一个程序的指令应该在数十亿的数量级，它怎么可能只有4w？附图显示了结果。怎么可能只有4w？附图显示了结果。怎么可能只有4w？附图显示了结果。![在此处输入图像描述](../Images/84e5421ce03db817cd0a29a53c2e0387.png) 有没有人可以帮助我解决这些困惑，我在这里只是一个tyro，希望得到大家的帮助。谢谢！

# foreach - Knockout JS foreach 嵌套，所有字段的值更新

> ID：13988233
> 
> 赞同：2
> 
> 时间：2012-12-21T10:18:45.767
> 
> 标签：foreach, knockout.js

我正在使用淘汰赛 js 来完成任务。我的模型是这样的：

```
var ServiceLevelRates = function(data, availableClasses) {
return {
    TaxTypeID: ko.observable(data.Key),
    TaxTypeName: ko.observable(data.Name),
    ExtendedTaxTypeName: data.Name.replace(/\s+/g, ''),
    ApplyAfter: ko.observable(-1),
    TaxClasses: ko.observableArray(availableClasses)
};
};

var TaxClass = function(data, availableServices) {
return {
    ServiceClassID: data.ServiceClassID,
    ServiceClassName: ko.observable(data.ServiceClassName),
    TaxServices: ko.observableArray(availableServices)
};
};

var TaxService = function(data) {
return {
    ServiceID: ko.observable(data.ServiceID),
    ServiceName: ko.observable(data.ServiceName),
    ServiceRate: ko.observable(data.ServiceRate > 0 ? data.ServiceRate : "").extend({ numeric: 2 })
};
}; 
```

我的html就像：

```
<tbody  data-bind="foreach: ServiceLevelRates">
                    <tr>
                        <td style="width:100%;">
                            <table width="100%">
                                <tr>
                                    <td style="width:2%;">
                                        <img src="../../Images/del_up.gif" onclick="HideMyChilds(this);" />
                                    </td>
                                    <td data-bind="text: TaxTypeName">

                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>
                                        <table width="100%">
                                            <tr>
                                                <td style="width:20%;">
                                                    <label id="lblApplyAfter"  myId="lblApplyAfter" runat="server">Apply After</label>
                                                </td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <select id="sltApplyAfter" SkinID="drpFields" name="sltApplyAfter" runat="server" myId="sltApplyAfter">
                                                        <option value="-1">Charge</option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <input type="checkbox" />Apply for All Services<input type="text" onkeypress="ValidateDecimalValue(event,this)"; onblur="ApplyForAllServices(this);" data-bind="attr: { 'class': ExtendedTaxTypeName }"  /> %
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">
                                                    <table width="100%">
                                                        <tbody  data-bind="foreach: TaxClasses">
                                                            <tr>
                                                                <td style="width:2%;">
                                                                    <img src="../../Images/del_up.gif" onclick="HideMyChilds(this);" />
                                                                </td>
                                                                <td style="width:100%;" class="tdRepeaterHeaderBG" data-bind="text: ServiceClassName">

                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td></td>
                                                                <td>
                                                                    <table width="100%">
                                                                        <thead>
                                                                            <tr>
                                                                                <td style="width:1%;">
                                                                                <td style="width:24%;" class="tdRepeaterHeaderBG">Service Name</td>
                                                                                <td style="width:75%;" class="tdRepeaterHeaderBG">Amount</td>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody  data-bind="foreach: TaxServices">
                                                                            <tr>
                                                                                <td style="width:1%;">
                                                                                <td style="width:24%;" data-bind="text: ServiceName"></td>
                                                                                <td style="width:75%;">
                                                                                    <input type="text" data-bind="value: ServiceRate, attr: { 'class': $parents[1].ExtendedTaxTypeName, 'id': $parents[1].ExtendedTaxTypeName + ServiceID }"  />%
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td></td>
                                                                                <td colspan="2">
                                                                                    <div style="font-size: 11px; width:98%;height:5px; border-top: 1px dotted gray;"> </div>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </tbody> 
```

问题是当我为一个类中的税收服务提供 ServiceRate 时，它​​会更新为所有其他类中相同服务的文本字段。对它的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T01:52:57.167

您的代码有几个问题。

1.  首先，主要是化妆品。您正在使用表格进行布局。仅当您真正需要表格数据时才应使用它们。在大多数情况下，div 或列表要好得多，如果你需要布局某些东西，你可以使用 css 边距。

2.  您正在混合和混合不同的对象方案。

    *   一种是返回一个对象字面量：

        ```
        function Foo() {
            return {
                Property: ko.observable(),
            }
        } 
        ```

        可以但不应该使用`new`运算符调用此模式。

    *   另一种是基于原型的：

        ```
        function Foo() {
            var self = this;

            self.Property = ko.observable();
        } 
        ```

        必须使用`new`运算符调用此模式。

    坚持一种模式是最容易的。通过淘汰赛，后者在某些情况下更容易使用。

3.  您没有对所有属性使用可观察对象。将 observables 用于某些属性而不是其他属性有点令人困惑。您必须返回源代码以确认每个属性。

4.  您的对象模型没有考虑对象重用。您将相同的对象传递给 each `ServiceLevelRate`，因此当您更新 one 时`TaxService`，`TaxService`所有其他的相同对象`TaxClass`也将被更新。

    一个简单的解决方案是将需要更新的字段分解为映射对象。

    ```
    // This part is constructed once, based on server data.
    function TaxService(data) {
        var self = this;

        self.ServiceID = ko.observable(data.ServiceID);
        self.ServiceName = ko.observable(data.ServiceName);
    }

    // This part is constructed for each TaxClassMapping
    function TaxServiceMapping(svc) {
        var self = this;

        self.TaxService = ko.observable(svc);
        self.ServiceRate = ko.observable("");
    } 
    ```

5.  最后; 要根据复选框有条件地更新费率，您可以将其与`checked`-binding 绑定。在订阅`ServiceLevelRate`-wide 费率时，您只需检查复选框是否已选中，然后再继续更新其他字段。

    ```
    self.ApplyForAll.subscribe(function (newValue) {
        if (self.ApplyForAllCheckBox()) {
            ko.utils.arrayForEach(self.Classes(), function (clsMapping) {
                ko.utils.arrayForEach(clsMapping.ClassServices(), function (svcMapping) {
                    svcMapping.ServiceRate(newValue);
                });
            });
        }
    }); 
    ```

这是一个更新的小提琴：

[http://jsfiddle.net/MizardX/V8DTj/](http://jsfiddle.net/MizardX/V8DTj/)

我将模型缩小到基本部分，以使它们更易于使用。

* * *

为了`TaxServices`只显示某些`TaxClasses`内容，您可以过滤`TaxService`要为每个对象包含哪些对象`TaxClass`。

```
function TaxClassMapping(taxClass, availableServices) {
    var self = this;

    self.TaxClass = ko.observable(taxClass);

    var classID = taxClass.ServiceClassID();
    var filtered = ko.utils.arrayFilter(availableServices, function (svc) {
        // svc.ServiceClassID is a new property in TaxService
        return svc.ServiceClassID() === classID;
    });
    var mapped = ko.utils.arrayMap(filtered, function (svc) {
        return new TaxServiceMapping(svc);
    });
    self.ClassServices = ko.observableArray(mapped);
} 
```

# css - CSS 过渡.. 使文本从底部向上移动

> ID：13988234
> 
> 赞同：2
> 
> 时间：2012-12-21T10:18:46.503
> 
> 标签：css, mobile, responsive-design, css-transitions

```
<style type="text/css">
   .button2 {
       font-family: "Georgia Pro", Georgia;
       background: #000;
       color: #fff;
       text-decoration: none;
       padding: 5px 15px;
       border: 3px solid #000;
       font-size: 14px;
   }

   .button2:hover {
       border: 3px solid #000;
       background: #fff;
       color:#000;
   }
</style>

<a href="#link" class="button2" title="ADD TO SHOPPING BAG"><span>ADD TO SHOPPING BAG</span></a> 
```

这是我的代码。我想这样当用户移动到链接上时，悬停框从底部或顶部移动并进入？我对 CSS3 过渡非常陌生，不了解整体`s`和`width`事物还是`height`？唯一的事情是我希望它或多或少地流动并且更好地处理响应式设计..思考`em`和`auto`高度？

jsFiddle：http: [//jsfiddle.net/Ysr7W/2/](http://jsfiddle.net/Ysr7W/2/)

悬停示例：

![在此处输入图像描述](../Images/6d5107e744056b0ba55f631dcc29e280.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T10:43:31.147

尽管我认为 CSS 不是这种效果的正确语言，但我确实尝试为您创建一些东西。该代码并不完美，但它可以满足您的要求：http: [//jsfiddle.net/Ysr7W/9/](http://jsfiddle.net/Ysr7W/9/)

我使用的 HTML 结构：

```
<a href="#" class="button">
    <span class="white">ADD TO SHOPPING BAG</span>
    <span class="black">ADD TO SHOPPING BAG</span>
</a>​ 
```

# telerik-mvc - 具有一个主网格和两个细节网格的 Telerik mvc 网格

> ID：13988235
> 
> 赞同：1
> 
> 时间：2012-12-21T10:18:48.233
> 
> 标签：telerik-mvc, master-detail

我有一个主网格，但有两个细节网格（同一级别的细节网格）。但是 Telerik mvc 网格无法呈现相同的内容。

所以我只是尝试了详细的主网格作为简单的模板，如下所示。

```
@(Html.Telerik().Grid<VIDEO_MASTER>()
.Name("Videos")
.Columns(col =>
{
    col.Bound(t => t.VIDEO_ID).Hidden(true);
    col.Bound(t => t.VIDEO_NAME).Width(200).Title("Video Name");
    col.Bound(t => t.VIDEO_SHORT_NAME).Width(150).Title("Video Short Name");
    col.Bound(t => t.VIDEO_ALTERNATE_NAME).Width(200).Title("Video Alternate Name");

    col.Bound(t => t.PART_NUMBER).Width(60).Title("Part No");
    col.Bound(t => t.DURATION).Width(80).Title("Duration");

    col.Command(cmd =>
    {
        cmd.Edit().ButtonType(GridButtonType.Image);
        cmd.Delete().ButtonType(GridButtonType.Image);
    }).Width(100).Title("Cmd");
})

.ToolBar(commands =>
{
commands.Insert().ButtonType(GridButtonType.ImageAndText).HtmlAttributes(new { id = "masterAddBtn" });
commands.Custom().HtmlAttributes(new { id = "export" }).Text("Export").Action("Video_Export", "Video");
commands.Custom().HtmlAttributes(new { id = "exportdet" }).Text("Export Detail").Action("Video_ExportDet", "Video");

})
.DataKeys(keys => keys.Add(tkey => tkey.VIDEO_ID).RouteKey("id"))
.DataBinding(dataBinding => dataBinding.Ajax()
        .Select("Select_Videos", "Video")
        .Insert("Insert_Videos", "Video")
        .Update("Update_Videos", "Video")
        .Delete("Delete_Videos", "Video")
        )
.ClientEvents(events => events.OnDataBound("onDataBound").OnEdit("onEdit"))
.Pageable(pagezie => pagezie.PageSize(5))
.Filterable()
.Scrollable(s => s.Height(440))
.DetailView(details => { details.ClientTemplate("<p>Hello</p>");
 details.ClientTemplate("<p>Hi</p>");

})
) 
```

出了什么问题？MVC telrik 网格不支持两个详细信息行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:14:52.863

第二次调用 ClientTemplate 会覆盖第一次。只需将元素附加到单个字符串中。

```
.DetailView(details => { details.ClientTemplate("<p>Hello</p><p>Hi</p>"); 
```

# security - Salesforce对详细信息对象的“查看全部”权限，由于主从关系，它会在主对象上查看所有内容吗？

> ID：13988239
> 
> 赞同：2
> 
> 时间：2012-12-21T10:18:53.447
> 
> 标签：security, permissions, salesforce, master-detail, force.com

我已经研究/阅读了有关 Salesforce 中主从关系的内容，但仍有关于权限的查询：

如果我授予“**查看全部**”对主从关系中的**详细信息对象**的访问权限（以便具有权限集的每个人都可以查看此自定义对象类型的所有记录），这是否意味着用户将具有“查看全部”访问权限**主对象**中的记录？

我做过的研究：

*   [http://login.salesforce.com/help/doc/en/relationships_considerations.htm](http://login.salesforce.com/help/doc/en/relationships_considerations.htm)
*   [http://isv.platformatyourservice.com/wiki/Master-Detail_relationship](http://isv.platformatyourservice.com/wiki/Master-Detail_relationship)
*   [https://login.salesforce.com/help/doc/en/dev_security.htm](https://login.salesforce.com/help/doc/en/dev_security.htm)

我已经在谷歌中输入了这个问题的*几个变体*，但没有任何运气，所以如果有 SF 专业知识的人可以提供帮助，将*不胜感激*！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:15:25.873

是的。

而且，不需要相信我，因为它很容易测试。

# c - rpm 减小共享库的大小

> ID：13988240
> 
> 赞同：2
> 
> 时间：2012-12-21T10:19:02.807
> 
> 标签：c, linux, shared-libraries, rpm, rpmbuild

我正在制作我的共享库的 rpm。在 .spec 文件中，我在 %install 部分编写正常的安装命令，制作一些软链接，在 %post 和 %postun 上运行 ldconfig。我没有在 rpm 中构建库，因为我已经编译并剥离了库。但是碰巧当我在使用 rpm 安装共享库之前看到库的文件大小（在我的开发文件夹中）时，它的大小为 24k，并且当我在 /usr/lib64/ 上看到共享库的部署文件时，大小是大约 23.8k 由于部署前和部署后库的哈希值不匹配（我现在需要匹配）。有什么问题？

任何帮助，将不胜感激。

**编辑：**我有两个库文件。部署前的共享库文件比通过 rpm 部署后的文件多 8 个块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:37:34.027

关于导致变化的原因有多种可能性......

首先是 RPM 可能会剥离一些符号 - 如果存在未导出的内部函数符号，那么它可能会选择剥离它们。

它也可能会从文件中删除各种 ELF 部分，因为 RPM 通常会尝试将任何调试信息提取到单独的文件中，然后将这些文件放在单独的 debuginfo 包中。即使您在库中没有任何实际的调试信息，它也可能仍然有空的调试部分，这些部分正在被此进程删除。

弄清楚发生了什么变化的最好方法是探索库的两个版本，`readelf`看看节列表（由 报告`readelf -S`）或符号（由 报告`readelf -s`）是否发生了变化。

# java - Android：如何在最初没有任何图像的情况下显示gridview，并且每当用户单击空的grid-view单元格时，就必须显示图像？

> ID：13988245
> 
> 赞同：2
> 
> 时间：2012-12-21T10:19:12.197
> 
> 标签：java, android, gridview

是否可以显示空的网格视图（它不像填充的那样显示，而是像单个粗体条线一样显示）。

所以我尝试用黑色可绘制图像填充它，然后它就像一个填充的图像一样显示出来。

我的应用程序包含两个网格视图，一个带有图像，一个看起来像空的。

用户可以从网格视图 1 中选择图像并将其放置在网格视图 2 上，

现在我想获取放置在网格视图 2 中的图像的标签。但我得到 Null 我是对还是错，请回复

```
 public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_main);
    GridView g=(GridView) findViewById(R.id.gridView1);
    g.setAdapter(new ImageAdapter(getApplicationContext()));
    GridView g2=(GridView) findViewById(R.id.gridView2);
    g2.setAdapter(new ImageAdapter2(getApplicationContext()));

    g.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) 
        {  

             System.out.println("pressent G1 child Tag is,,,,"+(Integer)g.getChildAt(tt).getTag());

        }  
     });

   g2.setOnItemClickListener(new OnItemClickListener() 
    {
         public void onItemClick(AdapterView<?> parent, View v,
             int position, long id) 
         {  ImageAdapter ia=new ImageAdapter(getApplicationContext());

             /* ImageView imv;      

             if(v!=null)
            {
                imv=(ImageView)v;
            }
            else
            {
                imv=new ImageView(getApplicationContext());
                imv.setLayoutParams(new GridView.LayoutParams(40,40));
                imv.setScaleType(ScaleType.CENTER_CROP);
                imv.setPadding(0,0,0,0);
                imv.setBackgroundColor(5555);

            } */
            imv.setImageResource(ia.imageid[tt]);
            System.out.println("tag of placed image is"+(Integer)g2.getChildAt(position).getTag());
 // IN THIS GRIDVIEW2 PLEASE HELP ME HOW I CAN GET THE PLACED IMAGE TAG(the images which are in gridview1 and image placed in gridview2 are same but iam not able to get the tag it return null)

             }        
         }
    }); 
```

ImageAdapter.java

```
if(arg1!=null)
    {
        imv=(ImageView)arg1;
    }
    else
    {
        imv=new ImageView(cont);
        imv.setLayoutParams(new GridView.LayoutParams(40,40));
        imv.setScaleType(ScaleType.CENTER_CROP);
        imv.setPadding(0,0,0,0);

    }
    imv.setTag(arg0);
    imv.setImageResource(imageid[arg0]);
    return imv; 
```

ImageAdapter2.java

```
if(arg1!=null)
    {
        imv=(ImageView)arg1;
    }
    else
    {
        imv=new ImageView(cont);
        imv.setLayoutParams(new GridView.LayoutParams(40,40));
        imv.setScaleType(ScaleType.CENTER_CROP);
        imv.setPadding(0,0,0,0);

    }
    imv.setImageResource(imageid[0]);  //---> this is to set Black images in gridview so that it will      look like a box
    return imv; 
```

# c# - 我可以并行化小于 10 毫秒的微小任务吗？（例如矩阵求逆）

> ID：13988247
> 
> 赞同：1
> 
> 时间：2012-12-21T10:19:16.353
> 
> 标签：c#, java, multithreading, thread-priority

我有一个关于 Windows 和 Linux 上的线程（或纤程）的一般性问题，使用任何编程语言：

是否有可能让“第二个线程待命”并让它迅速投入行动并在几毫秒内帮助完成一项小任务，而不会被抢先？我应该补充一点，我希望没有互斥锁和自旋锁的清晰代码。

为了证明传统的线程池不适用于小型任务，请考虑 C# 中的矩阵求逆问题。我正在使用 Ivan Kuckir 的[矩阵类](http://www.ivank.net/blogspot/matrix_cs/Matrix.cs)。我复制他的 Invert 函数并将其称为 InvertParallel，如下所示：

```
public Matrix InvertParallel()   // modified from Ivan's Invert(), see link above
{
    if (L == null) MakeLU();
    Matrix inv = new Matrix(rows, cols);
    Parallel.ForEach<int>(Enumerable.Range(0, rows), rowID =>
    {
        Matrix Ei = Matrix.ZeroMatrix(rows, 1);
        Ei[rowID, 0] = 1;
        Matrix col = SolveWith(Ei);
        inv.SetCol(col, rowID);
    });
    return inv;
} 
```

然后我调用 Invert 和 Invert_Parallel 函数并测量它所花费的时间：

```
static void Main()
{
    Stopwatch sw = new Stopwatch(); sw.Start();
    Matrix A = Matrix.IdentityMatrix(50, 50);
    Matrix I1 = A.Invert();
    long elapsed1 = sw.ElapsedMilliseconds;
    Matrix I2 = A.InvertParallel();
    long elapsed2 = sw.ElapsedMilliseconds - elapsed1;
    Console.WriteLine("Matrix size=" + A.rows + ", Invert=" + elapsed1 + "ms, Invert_Parallel=" + elapsed2 + "ms");
} 
```

相当明显的结果表明，对于小型任务（矩阵大小 50），从线程池启动任务比运行单线程慢：

```
Matrix size=50,  Invert=  5ms,  InvertParallel=21ms
Matrix size=100, Invert= 19ms,  InvertParallel=24ms
Matrix size=200, Invert=137ms,  InvertParallel=44ms 
```

（道歉 - 我必须从下面的注释中删除所有链接，因为我是新海报）

PS 可能相关的 S/O 文章：《如何同时启动两个线程》、《Linux - 线程和进程调度优先级》

PS 是的，我知道有一个更聪明的算法来计算逆，它的比例为 O(N^2.376)。

PPS 我不熟悉用户模式调度（Windows 上的 UMS）[用户模式调度（Windows 上的“UMS”）](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd627187%28v=vs.85%29.aspx)，有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:48:20.017

在线程之间传递任务，尤其是那些与它们相关联的大量数据的任务具有不小的开销，这可能会导致小型任务的性能变慢，如您所见。您需要找到使用多个内核更快的最佳位置。

顺便说一句，您可以通过创建一个工作线程来获得一个小的改进，当前线程保存一个上下文切换和缓存之间的副本。例如，如果您有 8 个内核，则将 1/7 传递给 7 个其他线程并在当前线程中执行 1/8。

# javascript - 如何使用 AJAX 打开 PDF 文件

> ID：13988249
> 
> 赞同：3
> 
> 时间：2012-12-21T10:19:27.147
> 
> 标签：javascript, ajax, jquery

如何使用 AJAX 打开 PDF 文件我试过这个

```
$.ajax({

          type : 'GET',
          url : ApplicationParameters.getWebRoot() + 'E_Books/pdf/previews/' + jsonRecord[0].previewUrl,
          data : strJsonParam,
          dataType : 'text',
          contentType : 'application/pdf',

          success: function(data){
          var opn = open("/E_Books/pdf/previews/"+jsonRecord[0].previewUrl);
          displayBook(opn);
          ebookStore.add(opn);
          ebookStore.sync();
    }
    ... 
```

它打开pdf文件，但我想在同一个窗口中打开它。它在另一个窗口中打开。请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T10:25:07.617

用这个替换你的代码：

```
 type : 'GET',
            url : ApplicationParameters.getWebRoot() + 'E_Books/pdf/previews/' + jsonRecord[0].previewUrl,
            data : strJsonParam,
            dataType : 'text',
            contentType : 'application/pdf',

            success: function(data){
            var opn = open("/E_Books/pdf/previews/"+jsonRecord[0].previewUrl, "_self");
                    displayBook(opn);
                    ebookStore.add(opn);
                    ebookStore.sync();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:24:18.273

为此，您不需要 ajax。`opn = open("/E_Books/pdf/previews/"+jsonRecord[0].previewUrl);`在上面的代码中，它是在新窗口中打开 pdf的行 var 。不是ajax调用。

只需设置`document.location = "/E_Books/pdf/previews/"+jsonRecord[0].previewUrl`用您的pdf替换浏览器中显示的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:25:54.657

你可以试试用这个..

```
window.location.href="/E_Books/pdf/previews/"+jsonRecord[0].previewUrl"; 
```

或者

```
window.location="/E_Books/pdf/previews/"+jsonRecord[0].previewUrl"; 
```

# windows - 自动执行脚本

> ID：13988260
> 
> 赞同：0
> 
> 时间：2012-12-21T10:20:24.413
> 
> 标签：windows, powershell

我想在没有任何软件的情况下拔出或插入 USB 设备时在 Windows 中执行脚本。我需要一个可以做到这一点的脚本。我在互联网上搜索，但没有找到有用的东西。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:43:08.377

您可以订阅 WMI 事件：

```
$query = "SELECT * FROM __InstanceOperationEvent WITHIN 5 WHERE TargetInstance ISA 'Win32_LogicalDisk' AND TargetInstance.DriveType=2"

Register-WmiEvent -Query $query -SourceIdentifier RemovableDiskDetection -Action {

    $class = $eventArgs.NewEvent.__CLASS
    $device = $eventArgs.NewEvent.TargetInstance.DeviceID

    switch($class)
    {
        __InstanceCreationEvent {
            Write-Host "Inserted, device id: $device"
        }

        __InstanceDeletionEvent {
            Write-Host "Removed, device id: $device"
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T10:30:03.260

您正在寻找[autorun.inf](http://msdn.microsoft.com/en-gb/library/windows/desktop/cc144200%28v=vs.85%29.aspx)。

但是，自动运行脚本的功能在 Windows Vista 及更高版本中被禁用以阻止病毒传播。

# c# - dataGridView1 中的选定单元格

> ID：13988263
> 
> 赞同：0
> 
> 时间：2012-12-21T10:20:36.863
> 
> 标签：c#, datagridview

嘿伙计们，所以我正在尝试接收最后编辑的单元格的列/行但是当我使用以下代码时，我收到的是我接下来选择的单元格（通过单击），因为它是被选中的单元格.

有什么办法吗？也许我只是没有适合 dataGridView 的属性

```
private void dataGridView1_CellEndEdit_1(object sender, DataGridViewCellEventArgs e)
{
         int column = dataGridView1.SelectedCells[0].ColumnIndex;
         int row = dataGridView1.SelectedCells[0].RowIndex;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:29:40.453

```
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        int column = e.ColumnIndex;
        int row = e.RowIndex;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:29:48.580

`DataGridViewCellEventArgs`为与单元格和行操作相关的 DataGridView 事件提供数据。它公开了两个属性`ColumnIndex`和`RowIndex`

```
int column = e.ColumnIndex;
int row = e.RowIndex; 
```

**更多：**正如@Mr_Green 所指出的，*`e.ColumnIndex`*并且*`e.RowIndex`*将*`-1`*用于*`ColumnHeader & RowHeader`*.

# c# - 数据库中的 Asp.net MVC 页面标题

> ID：13988264
> 
> 赞同：2
> 
> 时间：2012-12-21T10:20:38.690
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

这里有没有人以从数据库设置页面标题的方式构建您的视图、控制器和操作。你如何从另一种观点中识别一种观点？您在生命周期的哪个阶段检索页面标题并将其设置为视图/操作方法很多帖子分散在 asp.net、php 中，但对于 mvc 来说，我还没有找到一种有效的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:40:44.553

您可以使用操作过滤器：

```
public class ControllerAndActionNameAttribute : ActionFilterAttribute
{        
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.Controller.ViewBag.ControllerName = filterContext.RequestContext.RouteData.Values["controller"].ToString();
        filterContext.Controller.ViewBag.ActionName = filterContext.RequestContext.RouteData.Values["action"].ToString();
        base.OnActionExecuting(filterContext);
    } 
} 
```

但是，您可以根据操作和/或控制器从数据库中加载内容，而不是将操作或控制器名称放入视图包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:30:40.293

如果您有服务或帮助方法从数据库中检索所有标题并将它们存储到某种缓存或静态变量 think `Dictionary`。根据您计划如何在站点运行时进行更新，确定何时或如何进行更新。

然后公开一个静态辅助方法，视图可以调用该方法来检索它们的标题。

您甚至可以合并一个 T4 模板来为每个视图设置一个属性，以使用正确的检索键调用该方法

# javascript - Android：如何在加载资源时显示动画启动画面

> ID：13988266
> 
> 赞同：2
> 
> 时间：2012-12-21T10:20:42.450
> 
> 标签：javascript, android, html, cordova

我想在加载资源时将动画图像（当前使用一组 PNG）显示为启动画面。

我已经能够使用[这个](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)来显示启动画面。但问题是：启动画面显示指定时间然后黑屏 2-3 秒然后`index.html`被加载。

理想情况下，我想要的是在加载资源时显示启动画面。加载资源后，拉动闪屏并立即加载`index.html`文件。

下面是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Splash screen view
    setContentView(R.layout.splash);

    // Start animating the image
    final ImageView splashImageView = (ImageView) findViewById(R.id.SplashImageView);
    splashImageView.setBackgroundResource(R.drawable.flag);
    final AnimationDrawable frameAnimation = (AnimationDrawable)splashImageView.getBackground();
    splashImageView.post(new Runnable(){
        @Override
        public void run() {
            frameAnimation.start();             
        }           
    });

    final SplashScreen sPlashScreen = this;   

    // The thread to wait for splash screen events
    mSplashThread =  new Thread(){
        @Override
        public void run(){
            try {
                synchronized(this){
                    // Wait given period of time or exit on touch
                    wait(10000);
                }
            } 
            catch(InterruptedException ex){                 
            }

            finish();

            // Run next activity
            Intent intent = new Intent();
            intent.setClass(sPlashScreen, SomeActivity.class);
            startActivity(intent);
            //stop();               
        }
    };      
    mSplashThread.start();      
} 

public class SomeActivity extends DroidGap {                
    @Override
    public void onCreate(Bundle savedInstanceState) {    
     //some code to copy database files.
    }
} 
```

请注意我的开发环境。android-sdk：API 级别 17，Phonegap：2.1.0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T20:31:12.020

这可以通过 Phonegap/Cordova 1.7 版本解决。当您使用 2.1 时，该解决方案也可供您使用。

在您的 Phonegap 主活动类中，初始化启动画面和 loadURL 方法：

```
super.setIntegerProperty("splashscreen", R.drawable.splash);
super.loadUrl("file:///android_asset/www/index.html", 10000); 
```

10000 是以毫秒为单位的时间，因此在接下来的 10 秒内可以看到启动画面。您甚至可以使用 30-60。稍后我会解释原因。

为了在 PhoneGap Android 应用程序中有一个启动屏幕，您需要将您的 splash.png 文件放入：

```
res/drawable-ldpi (small: at least 426 x 320)
res/drawable-mdpi (medium: at least 470 x 320)
res/drawable-hdpi (large: at least 640 x 480) 
res/drawable-xdpi (xlarge: at least 960 x 720) 
```

现在主要的是：在您的 Javascript 中添加这样的`deviceready`事件：

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    // Version 1.7 use this method
    cordova.exec(null, null, "SplashScreen", "hide", []);
    // Version 1.8+ use this mehod
    navigator.splashscreen.hide(); 
```

因此，即使启动画面仍然可见，`navigator.splashscreen.hide();`也会将其隐藏并显示加载的 html。

希望这对您有所帮助。

# android - ActionOverflow 和 HoloEverywhere/ActionBarSherlock 的问题

> ID：13988267
> 
> 赞同：2
> 
> 时间：2012-12-21T10:20:45.117
> 
> 标签：android, actionbarsherlock, android-menu, android-holo-everywhere

**我可能会因此而被激怒，但我有我的理由。

我正在制作应用程序，可以选择在 3 个主题（Holo Dark、Holo Light 和 Holo Light with Dark ActionBar）之间切换。由于某些原因，我使用[>>this<<](https://stackoverflow.com/a/13568024/1625043) hack 使 ActionOverflow 与使用 ActionBarSherlock 4.2 的硬菜单键的设备一起工作。问题是当我将主题设置为 Holo Dark 或 Holo Light 时，菜单项的高度相当大（大约 48dp），但是每当我将其设置为 Holo Light with Dark Actionbar 时，菜单的高度物品是正常的（无论正常是什么）。有人知道是什么让菜单项表现得很奇怪吗？我试过检查 Styles，但我不确定问题出在哪里。如果您需要更多信息，请询问：D

![全息黑暗](../Images/e6d15e00777d24360fc479defa62bf47.png) ![带有深色操作栏的全息灯](../Images/06e7522e2c08c3018298dce6ddfb667c.png) ![全息灯](../Images/4900b3d4b451525ca3e73cdd2135d8e7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:29:38.253

知道了！我发布这个问题后不久就放弃了，但我又回来了，玩弄了 ABS 库，找到了答案！我所做的是添加：

```
<item name="dropdownListPreferredItemHeight">48dp</item> 
```

到我的styles.xml中：

```
<style name="ThemeDark" parent="Holo.Theme"></style> 
```

我对深色和浅色主题都这样做了，效果很好！:D

# jquery - 用 AJAX 调用的结果替换视图的内容

> ID：13988268
> 
> 赞同：0
> 
> 时间：2012-12-21T10:20:46.647
> 
> 标签：jquery, ajax, asp.net-mvc-3

我正在开发一个在 MVC3 应用程序中使用 Asp.NET 和 kendo 控件的辅导员门户。我有一个名为`AddStudents`. `onClick`此按钮的部分视图呈现并放置具有此按钮的该视图的内容。

学生表单出现在此视图上，但它自己的内容也出现在同一页面上，我使用 jQuery 的 AJAX 调用来完成所有这些工作。我想用部分视图的传入内容替换视图的当前内容。

```
$("#render").click(function () {
    alert("chawaaaaaa!");
    $.ajax({
        url: "AddStudentsPartial",
        type: 'GET',
        cache: false,
        success: function (result) {
            alert(result);
            $('#partial').html(result);
        }
    });
}); 
```

这就是我点击按钮时的 AJAX 功能。谁能帮我解决这个小问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:35:23.957

您可以将视图内容替换为结果内容：

```
 success: function (result) {
        alert(result);
        $('#partial').html($(result).html());
    } 
```

或者您用孔结果替换孔视图：

```
 success: function (result) {
        alert(result);
        $('#partial').replaceWith(result);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:35:45.133

您可以使用 jquery 的[load](http://api.jquery.com/jQuery.get/)方法来执行此操作。

```
<script type="text/javascript">
$(function(){
    $("#render").click(function(){
        $("#partial").load("AddStudentsPartial")
    })
});
</script> 
```

# c# - 如何从服务器文件夹中的图像生成缩略图？

> ID：13988269
> 
> 赞同：0
> 
> 时间：2012-12-21T10:20:50.287
> 
> 标签：c#, asp.net, thumbnails, image-resizing, generic-handler

我一直试图弄清楚这一点，但我没有得到任何地方。我要做的是：我有一个 aspx 页面，您可以在其中上传图像（它们存储在服务器上的文件夹中），在一个页面上您可以看到所有上传的图像并生成链接（标签）参考了这些图像，但直到现在它将完整图像加载为“缩略图”并且它们的尺寸太大（1920x1200px），所以我用通用处理程序替换了图像 src，它应该从文件夹，然后将其返回，调整大小为 209x133 像素。

但我不知道从哪里开始，我会很感激任何人，也许有人曾经做过类似的事情。

无论如何，提前谢谢

**这就是我使用转发器创建链接和图像的方式：**

```
protected void repImages_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.AlternatingItem ||
        e.Item.ItemType == ListItemType.Item)
    {
        string sFile = e.Item.DataItem as string;

        //Create the thumblink
        HyperLink hlWhat = e.Item.FindControl("hlWhat") as HyperLink;
        hlWhat.NavigateUrl = ResolveUrl("~/_img/_upload/" + sFile);
        hlWhat.ToolTip = System.IO.Path.GetFileNameWithoutExtension(sFile);
        hlWhat.Attributes["rel"] = "imagebox-bw";
        hlWhat.Attributes["target"] = "_blank";

        Image oImg = e.Item.FindControl("imgTheImage") as Image;
        oImg.ImageUrl = ResolveUrl("Thumbnail.ashx?img=" + sFile);
        oImg.Width = 203;
        oImg.CssClass = "galleryImgs";

    }

} 
```

**现在，我的处理程序看起来像这样：**

```
<%@ WebHandler Language="C#" Class="Thumbnail" %>

using System;
using System.Web;

public class Thumbnail : IHttpHandler {

    public void ProcessRequest (HttpContext context) {
        if (!string.IsNullOrEmpty(context.Request.QueryString["img"]))
        {
            string fileName = context.Request.QueryString["img"];

        }

        else
        {

        }

    }

    public bool IsReusable {
        get {
            return false;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:34:17.687

这里有一些代码可能需要一些调整，但可以帮助您继续前进。

```
// 1x1 transparent GIF
private readonly byte[] GifData = {
    0x47, 0x49, 0x46, 0x38, 0x39, 0x61,
    0x01, 0x00, 0x01, 0x00, 0x80, 0xff,
    0x00, 0xff, 0xff, 0xff, 0x00, 0x00,
    0x00, 0x2c, 0x00, 0x00, 0x00, 0x00,
    0x01, 0x00, 0x01, 0x00, 0x00, 0x02,
    0x02, 0x44, 0x01, 0x00, 0x3b
};

public void ProcessRequest(HttpContext context)
{
    // render direct
    context.Response.BufferOutput = false;

    bool fFail = true;

    try
    {
      if (!string.IsNullOrEmpty(context.Request.QueryString["img"]))
      {
        string fileName = context.Request.QueryString["img"];         

        using( var inputImage = new Bitmap(fileName))
        {   
            // create the thubnail
            FinalImage = CreateThubNain();          

            // send it to browser
            FinalImage.Save(context.Response.OutputStream, ImageFormat.Jpeg);           
            // flag tha all ends up well
            fFail = false;
        }          
      }
    }
    catch(Exception x)
    {
        // log the error
        Debug.Fail("Check why is fail - error:" + x.ToString());
    }

    if(fFail)
    {
        // send something anyway
        context.Response.ContentType = "image/gif";
        context.Response.OutputStream.Write(GifData, 0, GifData.Length);
    }
    else
    {
        // this is a header that you can get when you read the image
        context.Response.ContentType = "image/jpeg";

        // the size of the image, saves from load the image, and send it here
        // context.Response.AddHeader("Content-Length", imageData.Length.ToString());

        // cache the image - 24h example
        context.Response.Cache.SetExpires(DateTime.Now.AddHours(24));
        context.Response.Cache.SetMaxAge(new TimeSpan(24, 0, 0));   
    }
} 
```

还有一个关于如何[制作缩略图的问题：从数据库图像制作缩略图，同时保持纵横比](https://stackoverflow.com/questions/13977369/make-thumbnail-from-database-image-while-keeping-aspect-ratio)

一些评论。如果您使用处理程序制作缩略图，您将花费大量的处理时间来制作相同的和相同的。我建议跟踪缩略图并将它们保存在磁盘上，然后直接使用磁盘中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:35:45.650

我们使用这样的方法：

```
private Image ScaleFreeHeight(string imagePath, int newWidth)
{
    var byteArray = new StreamReader(imagePath).BaseStream;        
    var image = Image.FromStream(byteArray);
    var newHeight2 = Convert.ToInt32(newWidth * (1.0000000 * image.Height / image.Width));
    var thumbnail = new Bitmap(newWidth, newHeight2);
    var graphic = Graphics.FromImage(thumbnail);
    graphic.InterpolationMode = InterpolationMode.HighQualityBicubic;
    graphic.SmoothingMode = SmoothingMode.HighQuality;
    graphic.PixelOffsetMode = PixelOffsetMode.HighQuality;
    graphic.CompositingQuality = CompositingQuality.HighQuality

    graphic.DrawImage(image, 0, 0, newWidth, newHeight2);

    return thumbnail;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:40:43.170

添加**System.Drawing**和**System.Drawing.Drawing2D**命名空间，您可以调整图像的大小 **CodeBehind**：

```
public static System.Drawing.Image ScaleImage(System.Drawing.Image image, int maxHeight)
  {
      var ratio = (double)maxHeight / image.Height;
      var newWidth = (int)(image.Width * ratio);
      var newHeight = (int)(image.Height * ratio);
      var newImage = new Bitmap(newWidth, newHeight);
      using (var g = Graphics.FromImage(newImage))
      {
          g.DrawImage(image, 0, 0, newWidth, newHeight);
      }
      return newImage;
  } 
```

# android - 需要获取图像当前方向

> ID：13988273
> 
> 赞同：3
> 
> 时间：2012-12-21T10:21:38.627
> 
> 标签：android, cordova

嗨，在我的 android phonegap 应用程序中，当我以纵向模式拍摄图像时，在检索图像时图像会旋转。

这是我捕获图像的代码：

```
navigator.device.capture.captureImage(captureSuccess, captureError, {limit: 1}); 
```

如果我将 correctOrientation 设置为 true 没什么区别。

如果我使用以下代码，则图像以正确的方向存储但保存在缓存中。是否有任何解决方案可以保存在 DCIM\Camera 路径中？

```
navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50,
            destinationType: navigator.camera.DestinationType.FILE_URI, 
            correctOrientation: true }); 
```

请帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:52:22.927

要拍摄照片，您需要使用 getPicture 方法并将照片存储在 DCIM\Camera 路径上，您需要将参数设为 true saveToPhotoAlbum。

```
navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50,
        destinationType: navigator.camera.DestinationType.FILE_URI, 
        saveToPhotoAlbum: true,
        correctOrientation: true }); 
```

# php - Google API Query to get range of visits?

> ID：13988274
> 
> 赞同：2
> 
> 时间：2012-12-21T10:21:45.960
> 
> 标签：php, google-api, google-analytics-api

I use the Yii framework with the JGoogleAPI extension as follows:

```
$service = Yii::app()->JGoogleAPI->getService('Analytics');
$optParams = array(
 'metrics' => 'ga:visits',
 'max-results' => '1'
);

$gaData = 
  $service->data_ga->get( 
    'ga:XXXXXXX',
    '2012-12-19',
    '2012-12-21',
    'ga:visits',
    $optParams
  ); 
```

If I had 10 hits on the 19th, 20 hits on the 20th, and 30 hits on the 21st, this query gives me: 30 + 20 + 10 = 60\. However, I want ONE query that returns rows for each day.

Ie, not this:

```
array[0] = 60 
```

But rather this:

```
array[0] = 10
array[1] = 20
array[2] = 30 
```

Any idea how to do that?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T18:13:14.127

See [Accessing Google Analytics with Google Client API and PHP tutorial](http://enarion.net/programming/php/google-client-api/google-client-api-analytics-tutorial/)

Looks like you need to add some dimensions:

```
$dimensions = 'ga:date,ga:year,ga:month,ga:day';

$gaData = 
  $service->data_ga->get( 
    'ga:XXXXXXX',
    '2012-12-19',
    '2012-12-21',
    'ga:visits',
    array('dimensions' => $dimensions)
  ); 
```

And, if you run it in the [Query Explorer](http://ga-dev-tools.appspot.com/explorer/), you'll see a result for each day.

![enter image description here](../Images/c0e01b04809f5114d5911750f57e4f43.png)

Of course you could leave in just the date:

![enter image description here](../Images/485eaaa893bc4ff7f2ccbaca5707215e.png)

Not sure why the metric of `ga:visits` and `max-results` is set to one in your example and included in the `optParams`. There is already a place for metrics and you can include multiple metrics there if you want.

# cuda - 从 CUDA 矩阵乘法内核得到错误的结果

> ID：13988277
> 
> 赞同：0
> 
> 时间：2012-12-21T10:21:53.497
> 
> 标签：cuda

我是 CUDA 的新手。我有一个内核来做矩阵乘法。这对我来说似乎没问题，但在某些情况下它失败了。请帮我解决问题所在。

```
__global__ void matrixMultiply(float * A, float * B, float * C,
        int numARows, int numAColumns,
        int numBRows, int numBColumns,
        int numCRows, int numCColumns) 
{
    //@@ Insert code to implement matrix multiplication here

    int Row = blockIdx.y * blockDim.y + threadIdx.y;
    int Col = blockIdx.x * blockDim.x + threadIdx.x;
    if (numAColumns != numBRows) return;

    if ((Row < numARows) && (Col < numBColumns)){
        float Cvalue = 0;

        for (int k = 0 ; k < numAColumns ; ++k )
            Cvalue += A[Row*numAColumns + k] * B[k * numBColumns + Col];

        C[Row*numCColumns + Col] = Cvalue;
        __syncthreads();
    }
} 
```

我正在按如下方式调用内核。

```
int BLOCKX = (int)(ceil((numCRows / 8.0)));
int BLOCKY = (int)(ceil((numCColumns / 8.0)));
printf("Number of blocks: %d\t%d\n", BLOCKX, BLOCKY);
dim3 DimGrid(BLOCKX, BLOCKY);
dim3 DimBlock(8 , 8, 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:27:27.550

您的代码将在下面死锁：

```
 if ((Row < numARows) && (Col < numBColumns)){
            float Cvalue = 0;

            for (int k = 0 ; k < numAColumns ; ++k )
                Cvalue += A[Row*numAColumns + k] * B[k * numBColumns + Col];

            C[Row*numCColumns + Col] = Cvalue;
            __syncthreads();
        } 
```

考虑一个块，对于某些线程，条件满足，而对于某些线程不满足。在这种情况下，这将陷入僵局。置于条件`__syncthreads()`之外`if`

也替换`dim3 DimGrid(BLOCKX, BLOCKY);`为`dim3 DimGrid(BLOCKY, BLOCKX);`. 那应该解决它

# python - 在python上找到所有可能的组合

> ID：13988279
> 
> 赞同：2
> 
> 时间：2012-12-21T10:21:56.053
> 
> 标签：python

我正在尝试在 python 2.7 上给出特定数字的列表中找到所有数字组合。尝试了 itertool 的组合，但无法完全弄清楚，所以就在这里。

```
mylist=[1,2,3,4,5,6,7,8,9,10]
number=60 # for 3 elements

results=[[3,4,5],[2,3,10],[2,5,6],[1,6,10]...] 
```

我试过了

```
import itertools

num = [1, 2, 3, 4, 5,6,7,8,9,10]
combinations = []

for combination in itertools.combinations(num, 3):
    combinations.append(int("".join(str(i) for i in combination)))
    print combinations

# ...
combination=[123,124,125....] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:27:47.957

```
import itertools

num = [1, 2, 3, 4, 5,6,7,8,9,10]
combinations = itertools.combinations(num, 3)
matching = [c for c in combinations if reduce(lambda x, y: x * y, c, 1) == 60]

print(matching) 
```

魔法线是`matching = [c for c in combinations if reduce(lambda x, y: x * y, c, 1) == 60]`. 这是一个列表推导，相当于：

```
matching = []
for c in combinations:
  if reduce(lambda x, y: x * y, c, 1) == 60:
    matching.append(c) 
```

[您可以在此处](http://docs.python.org/2/library/functions.html#reduce)找到有关该`reduce`功能的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:17:20.830

Though it has been answered, here's a recursive algorithm to find combinations:

```
def findCombination(product, numList, length, minimum):
    if length == 0 and product == 1:
        return [[]]
    if length == 1 and product in numList and product > minimum:
        return [[product]]

    ret = []
    subList = [item for item in numList if item > minimum]
    for n in subList:
        if product % n == 0:
            temp = findCombination(product / n, subList, length - 1, n)
            for x in temp:
                ret += [[n] + x]
    return ret 
```

To make it work correctly, `mylist` has to be sorted, because the combinations are made in ascending order.

```
>>> mylist=[1,2,3,4,5,6,7,8,9,10]
>>> mylist = sorted(mylist)
>>> number = 60
>>> print findCombination(number, mylist, 3, mylist[0])
[[1, 6, 10], [2, 3, 10], [2, 5, 6], [3, 4, 5]] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T10:24:06.930

```
>>> import itertools
>>> numbers = 1,2,3,4,5,6,7,8,9

>>> combinations =  itertools.combinations(numbers,3)

>>> ["".join([str(a),str(b), str(c)]) for a, b, c in combinations if a*b*c == 60]
['256', '345'] 
```

这将适用于所需的 N 个组合

```
>>> import itertools, operator
>>> numbers = 1,2,3,4,5,6,7,8,9,10
>>> multiply_must_be = 60

>>> combinations = itertools.combinations(numbers, 3)

>>> combine = lambda arr: "".join([str(item) for item in arr])
>>> multiply = lambda arr: reduce(operator.mul, arr, 1)

>>> [combine(combo) for combo in combinations if multiply(combo) == multiply_must_be]
['1610', '2310', '256', '345'] 
```

# ios - Titanium Mobile 可编辑行移动内行元素

> ID：13988280
> 
> 赞同：1
> 
> 时间：2012-12-21T10:22:00.923
> 
> 标签：ios, titanium, tableview

我有一个带有多个 TableViewRow 对象的 tableView，总是 4 个。当单击编辑按钮时，可以重新排序行，这是有效的。

但是，当单击编辑按钮时，行内的元素似乎会从左右移动边距。

不应移动一行中的项目，所以我希望有人能告诉我如何确保行元素内的标签在编辑时不会被移动。

我已经包含了一些图片，希望能澄清我的问题：

![未编辑时的行](../Images/eee99e67e2ee8a86c5cb8c0d7cb47af1.png) **未编辑时的行**

![编辑时的行](../Images/a0d0831762e5bd44dfe8c636294de6dd.png) **编辑时的行**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:10:50.750

解决方案很简单，但我不知道。

实现这一目标的方法；为每一行添加一个视图，不要设置 left 或 right 属性。这样，删除按钮和移动图标不会将内部视图推开。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T11:37:20.703

它是一种默认行为。我认为 Titanium API 中没有定义任何方法来覆盖内部元素的移动。因此，您无法更改此默认行为。

# java - 在Java中如何将字符串解析为浮点数并比较值？

> ID：13988282
> 
> 赞同：2
> 
> 时间：2012-12-21T10:22:00.847
> 
> 标签：java, string-parsing

我有一个如下所示的小代码片段，如您所见，它有一个用于检查服务器版本的硬编码值。现在我的意图是，如果服务器版本是 11.3.0 或更高版本，那么应该输入 if，但我无法想出办法，`Integer.parseInt`我猜我不会工作，因为我解析 int 而不是 float。

```
String serverVersion = DatamodelVersion.getInstance().getVersion();
if(serverVersion.equalsIgnoreCase("11.3.0"))
{
    outstr = new FileOutputStream(confFile);
    prop.setProperty("NTFSDriver", "11.3.0/x86/tntfs.ko");
    prop.setProperty("NTFSDriver_x64", "11.3.0/x86_64/tntfs.ko");

    prop.store(outstr, "");

    update = true;
    System.out.println("Updated the tuxera conf file successfully");
    logger.logDebugAlways("Updated the tuxera conf file successfully");

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:30:18.393

尝试这个

```
String serverVersion = DatamodelVersion.getInstance().getVersion();
String[] version = serverVersion.split("\\.");
if (Integer.parseInt(version[0]) > 11 || (Integer.parseInt(version[0]) == 11 && Integer.parseInt(version[1]) >= 3))
{
    outstr = new FileOutputStream(confFile);
    prop.setProperty("NTFSDriver", "11.3.0/x86/tntfs.ko");
    prop.setProperty("NTFSDriver_x64", "11.3.0/x86_64/tntfs.ko");

    prop.store(outstr, "");

    update = true;
    System.out.println("Updated the tuxera conf file successfully");
    logger.logDebugAlways("Updated the tuxera conf file successfully");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:30:08.277

您可以尝试将数字分成 3 部分，如下所示：

```
String[] bits = serverVersion.split("."); 
```

然后，使用 for 循环并`Integer.parseInt`解析数字的每个部分，并进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:25:26.353

Java 中没有内置函数可以转换`11.3.0`为浮点数，因为`11.3.0`它不是有效的浮点数。

对于包含有效浮点数的字符串，您可以[`Float.valueOf`](http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#valueOf%28java.lang.String%29)在 Java 中使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T10:28:40.137

用“.”分割版本号

然后与您的参考数据一一比较。

```
String serverVersion = DatamodelVersion.getInstance().getVersion();
serverVersion.split('.')[0] // and so on.. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T10:29:32.680

版本号既不是整数也不是浮点数。您最好的选择是使用专门的课程：

```
public class Version implements Comparable<Version> {

  public Version(int major, int minor, int revision) {
    // set fields
  }

  public int compareTo(Version other) {
    // compare major minor and revision
  }

  public boolean equals(Object other) {
    // code here
  }      

  // parse a version in X.Y.Z form
  static Version parse(String version) {
    return new Version(//...);
  }
} 
```

使用它，您可能会决定稍后添加对 1.3.4-ALPHA 或 -RC1 等版本的支持。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T10:32:03.210

11.3.0 不是浮点数。如何改用以下代码：

```
int Compare(String ver1, String ver2)
{
String[] ver1s = ver1.Split("\.");
String[] ver2s = ver2.Split("\.");
if(ver1s.length > ver2.length) return 1;
if(ver2s.length > ver1.length) return -1;
for(int i = 0;i < ver1s.length;i++)
{
   if(Integer.valueOf(ver1s[i]) > Integer.valueOf(ver2s[i])) return 1;
   if(Integer.valueOf(ver2s[i]) > Integer.valueOf(ver1s[i])) return -1;
}
return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T10:28:11.600

您需要根据这些数字在您的域中必须遵循的规则定义自己的检查版本号的方法。

根据您提供的信息，我会分别对每个值（作为整数）进行字符串拆分`.`和比较。`11``3``0`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T10:29:55.820

你在这里有一`Version`堂课：http: [//nvn.svn.sourceforge.net](http://nvn.svn.sourceforge.net/viewvc/nvn/trunk/nvn-commons/src/main/java/net/sf/nvn/commons/Version.java?revision=225&view=markup)

应该这样使用

```
Version v = Version.parse(DatamodelVersion.getInstance().getVersion()); 
```

并以标准格式 MAJOR.MINOR.BUILD.REVISION 存储数字

# autofac - Autofac无参数构造函数选择

> ID：13988285
> 
> 赞同：9
> 
> 时间：2012-12-21T10:22:07.863
> 
> 标签：autofac

“Autofac 会自动选择能够从容器中获取的参数最多的构造函数。” 我希望它不这样做，而是选择默认构造函数。[http://code.google.com/p/autofac/wiki/Autowiring](http://code.google.com/p/autofac/wiki/Autowiring)

```
internal class ParameterlessConstructorSelector : IConstructorSelector
{
    #region Implementation of IConstructorSelector

    /// <summary>
    /// Selects the best constructor from the available constructors.
    /// </summary>
    /// <param name="constructorBindings">Available constructors.</param>
    /// <returns>
    /// The best constructor.
    /// </returns>
    public ConstructorParameterBinding SelectConstructorBinding(ConstructorParameterBinding[] constructorBindings)
    {
        return constructorBindings.First();
    }

    #endregion
} 
```

当我连接课程时，我这样做了：

```
builder.RegisterType<EmployeeFactory>()
       .As<IEmployeeFactory>().UsingConstructor(new ParameterlessConstructorSelector())
       .SingleInstance(); 
```

constructorBindings 列表中的第一个绑定始终是具有无参数构造函数的绑定。不确定它是先定义还是 autofac 扫描构造函数的方式，但这是为无参数构造函数连接的正确方法吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T14:42:57.970

Autofac 在内部使用该`Type.GetConstructors`方法来发现构造函数。

从方法[文档](http://msdn.microsoft.com/en-us/library/h70wxday.aspx)：

> GetConstructors 方法**不以特定顺序**（例如声明顺序）返回构造函数。您的代码不能依赖于构造函数的返回顺序，因为该顺序会有所不同。

因此，在您的情况下，它与您一起工作只是运气`First()`。在正确的实现中，您需要显式搜索具有 0 个参数的构造函数：

```
public class DefaultConstructorSelector : IConstructorSelector
{
    public ConstructorParameterBinding SelectConstructorBinding(
        ConstructorParameterBinding[] constructorBindings)
    {
        var defaultConstructor = constructorBindings
          .SingleOrDefault(c => c.TargetConstructor.GetParameters().Length == 0);
        if (defaultConstructor == null)
            //handle the case when there is no default constructor
            throw new InvalidOperationException();                
        return defaultConstructor;
    }
} 
```

你可以用这个非常简单的类来测试这个理论：

```
public class MyClass
{
    public readonly int i;

    public MyClass(int i)
    {
        this.i = i;
    }

    public MyClass()
    {
        i = 1;
    }
} 
```

随着您的实施：

```
var builder = new ContainerBuilder();
// register 22 for each integer constructor argument
builder.Register<int>(v => 22); 

builder.RegisterType<MyClass>().AsSelf()
    .UsingConstructor(new ParameterlessConstructorSelector());
var c = builder.Build();
var myClass = c.Resolve<MyClass>();
Console.WriteLine(myClass.i); 
```

它输出`22`例如带有`int`参数的构造函数被调用：

通过我的实现：

```
//...
builder.RegisterType<MyClass>().AsSelf()
    .UsingConstructor(new DefaultConstructorSelector());
//...
var myClass = c.Resolve<MyClass>();
Console.WriteLine(myClass.i); 
```

它输出`1`例如调用默认构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:16:51.100

显式注册默认构造函数不是更简单吗？

```
builder.Register<EmployeeFactory>(c => new EmployeeFactory())
   .As<IEmployeeFactory>()
   .SingleInstance(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-29T10:14:57.513

使用最新版本的 Autofac，这非常简单：

```
builder.RegisterType<EmployeeFactory>()
        .As<IEmployeeFactory>().UsingConstructor()
        .SingleInstance(); 
```

不带参数调用“UsingConstructor”意味着“使用无参数构造函数”。请参阅[https://autofac.org/apidoc/html/EB67DEC4.htm](https://autofac.org/apidoc/html/EB67DEC4.htm)和相关页面。

# objective-c - 应用程序在设备上显示 facebook SDK 的链接器错误

> ID：13988295
> 
> 赞同：0
> 
> 时间：2012-12-21T10:22:55.837
> 
> 标签：objective-c, ios, xcode, facebook-graph-api

我的应用程序在模拟器上运行良好，没有任何错误。我在我的应用程序中使用 facebook SDK。当我尝试在设备上运行它时，它会显示链接器错误。我经历了一些类似的问题并尝试了他们的解决方案，如以下链接

[试过这个解决方案](https://stackoverflow.com/questions/9900813/facebook-ios-sdk-build-fails-on-device-works-on-simulator)

还有一个解决方案，说取消选中 Enable OpenMP Support 对他们有用，但我在我的 xcode4.5 中找不到这个选项。

```
Ld "/Users/devusa/Library/Developer/Xcode/DerivedData/Virtual_Mirrorr-bsbznuqiwhaypbbjiftsqpwpmkdo/Build/Intermediates/Virtual Mirrorr.build/Debug-iphoneos/Virtual Mirror.build/Objects-normal/armv7s/Virtual Mirror" normal armv7s
cd "/Users/devusa/Documents/Start/Virtual Mirrorr"
setenv IPHONEOS_DEPLOYMENT_TARGET 4.3
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/devusa/Library/Developer/Xcode/DerivedData/Virtual_Mirrorr-bsbznuqiwhaypbbjiftsqpwpmkdo/Build/Products/Debug-iphoneos -F/Users/devusa/Library/Developer/Xcode/DerivedData/Virtual_Mirrorr-bsbznuqiwhaypbbjiftsqpwpmkdo/Build/Products/Debug-iphoneos "-F/Users/devusa/Documents/Start/Virtual Mirrorr" -filelist "/Users/devusa/Library/Developer/Xcode/DerivedData/Virtual_Mirrorr-bsbznuqiwhaypbbjiftsqpwpmkdo/Build/Intermediates/Virtual Mirrorr.build/Debug-iphoneos/Virtual Mirror.build/Objects-normal/armv7s/Virtual Mirror.LinkFileList" -dead_strip -lsqlite3.0 -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=4.3 -framework MessageUI -framework QuartzCore -framework SystemConfiguration -framework UIKit -framework Foundation -framework CoreGraphics -framework FacebookSDK -o "/Users/devusa/Library/Developer/Xcode/DerivedData/Virtual_Mirrorr-bsbznuqiwhaypbbjiftsqpwpmkdo/Build/Intermediates/Virtual Mirrorr.build/Debug-iphoneos/Virtual Mirror.build/Objects-normal/armv7s/Virtual Mirror" 
```

ld：文件是通用的（3 个切片）但不包含一个（n）armv7s 切片：/Users/devusa/Documents/Start/Virtual Mirrorr/FacebookSDK.framework/FacebookSDK for architecture armv7s clang：错误：链接器命令失败，退出代码1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:28:53.533

三个选项：

1.  更新到较新版本的 Facebook API
2.  将`armv7s`架构添加到 Facebook 框架的构建设置中
3.  `armv7s`从应用的构建设置中删除架构

基本上，`armv7s`是 iPhone 5 和 iPad 4 上使用的架构。您的应用程序支持它，但您使用的 Facebook 框架不支持。

# jquery - 锁定横向设备方向

> ID：13988296
> 
> 赞同：4
> 
> 时间：2012-12-21T10:23:00.550
> 
> 标签：jquery, cordova, jquery-mobile

我正在开发一个 phonegap 应用程序，但设备方向有问题。

基本上我希望用户可以随意使用设备，无论是纵向还是横向。但是，我只希望屏幕变成纵向或横向。目前画面也在反转横向。

是否可以将方向更改限制为仅纵向和横向？（所以你总共有 2 个方向改变的可能性，而不是 3 个）。

**编辑**

我使用了一个插件（建议如下）并提出了以下有效的代码。一旦屏幕旋转到 reverseLandscape，它就会以横向模式显示（正是我想要的）。但是问题是，如果用户将手机转为纵向模式，则方向被锁定并且不会转回纵向。

```
 $(window).bind('orientationchange', function(event){

    if (event.orientation == 'landscape') {
     navigator.screenOrientation.set('landscape');
    } 
    if (event.orientation == 'portrait') {
     navigator.screenOrientation.set('portrait');
    }

   }); 
```

任何人都知道我应该在哪里放置以下行以便解锁方向？

```
navigator.screenOrientation.set('fullSensor'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:10:29.983

您将需要更改主要的 Phonegap Activity 类。首先从 AndroidManifest 文件中删除这一行：

```
android:screenOrientation="portrait" 
```

我们还需要：

```
android:configChanges="orientation|keyboardHidden" 
```

不幸的是，我们不能在 screenOrientation 中配置一个以上的方向模式。因此，我们将通过 java 代码对其进行更改。

这是一个工作代码示例：

```
package com.roadrunner.mobile21;

import android.content.pm.ActivityInfo;
import android.content.res.Configuration;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.view.Display;
import android.view.OrientationEventListener;
import android.view.Surface;

import com.phonegap.*;

public class RoadRunnerActivity extends DroidGap {
    OrientationEventListener myOrientationEventListener;    

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");

        myOrientationEventListener = new OrientationEventListener(this, SensorManager.SENSOR_DELAY_NORMAL){

            @Override
            public void onOrientationChanged(int arg0) {

                Display display;         
                display = getWindow().getWindowManager().getDefaultDisplay();
                int rotation = display.getRotation();   
                if(rotation == Surface.ROTATION_0 || rotation == Surface.ROTATION_90) {
                    unlockScreenOrientation();                      
                }        
            }                
        };  
        if (myOrientationEventListener.canDetectOrientation()){
            myOrientationEventListener.enable();
        } else{
            finish();
        }         
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        Display display;         
        display = getWindow().getWindowManager().getDefaultDisplay();
        int rotation = display.getRotation();   
        if(rotation == Surface.ROTATION_180 || rotation == Surface.ROTATION_270) {
            lockCurrentScreenOrientation();                     
        } 
    }  

    private void lockCurrentScreenOrientation() {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }

    private void unlockScreenOrientation() {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_USER);
    }    

} 
```

*   也有可能通过 css 改变屏幕方向。我不喜欢它，因为它有点马车，但[在这里](https://stackoverflow.com/a/7010010/1848600)你可以找到更多关于它的信息。这是一种最简单的方法，但您需要玩一点才能使其发挥作用。

这很容易做到：

```
$(window).bind("orientationchange", function(){
    var orientation = window.orientation;
    var new_orientation = (orientation) ? 0 : 180 + orientation;
    $('body').css({
        "-webkit-transform": "rotate(" + new_orientation + "deg)"
    });
}); 
```

您将需要更改公式以仅适应 0 度和 90 度方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:45:48.890

我认为你只需要使用：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

限制 3 次方向更改。

**编辑：**

[使用screen-orientation Plugin](https://github.com/champierre/pg-plugin-screen-orientation)试试这个：

```
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
    document.addEventListener("orientationChanged", updateOrientation);
}

function updateOrientation(e) {
    switch (e.orientation) {
        case 90:
            navigator.screenOrientation.set('landscape');
            break;
        case -90:
            navigator.screenOrientation.set('landscape');
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:57:33.260

看看这个，我曾经用它来解决你所说的问题。

[http://www.devinrolsen.com/javascript-mobile-orientation-detection/](http://www.devinrolsen.com/javascript-mobile-orientation-detection/)

或者

[http://www.williammalone.com/articles/html5-javascript-ios-orientation/](http://www.williammalone.com/articles/html5-javascript-ios-orientation/)

希望你让它工作:)

# llvm - LLVM getBasicBlockIndex() 或等效

> ID：13988298
> 
> 赞同：3
> 
> 时间：2012-12-21T10:23:03.357
> 
> 标签：llvm

我在获取基本块的索引时遇到了一些问题。

```
for (Function::iterator II = F.begin(), EE = F.end(); II != EE; ++II, ++ii) 
{  BasicBlock* BB=II; 
```

我有段错误或无法使用我在 LLVM 中找到的几种方法的复杂结构。您是否知道如何尽可能简单地使用以下位置的方法：

[http://llvm.org/doxygen/Instructions_8h_source.html#l02136](http://llvm.org/doxygen/Instructions_8h_source.html#l02136)

[http://llvm.org/doxygen/EdgeBundles_8cpp_source.html#l00078](http://llvm.org/doxygen/EdgeBundles_8cpp_source.html#l00078)

或者等价的东西？我只想获取基本块的 ID。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T04:17:58.050

正如 Eli Bendersky 在上面的评论中指出的那样，这取决于您对索引的解释。如果您只对基本块的唯一标识符感兴趣，那么基本块的名称在函数中是唯一的。你可以使用

```
BB->getName() 
```

还有其他类型的 ID 与基本块相关联，这取决于算法的性质。例如，如果您正在使用 Keith Cooper 的迭代手指算法编写支配树构造算法，您将把每个基本块与一个反向深度第一顺序的增量 ID 相关联。此 ID 不是 BasicBlock 结构的一部分，应由您维护。

# ruby - 主键和 CouchDB

> ID：13988301
> 
> 赞同：0
> 
> 时间：2012-12-21T10:23:19.067
> 
> 标签：ruby, couchdb, couchrest

CouchDB 的版本控制对我正在编写的应用程序来说绝对是一个福音，但是我想在数据库中表示的每个对象都有它自己的唯一标识符（我们称之为`my_id`），所以我真的不需要这个`_id`字段。

有没有办法让我告诉 CouchDB 我想让我的字段成为主要的嘿（不是`_id`）？

我正在使用 ruby​​ 的 couchrest_model，所以我知道`Model.find_by_my_id(params[:my_id])`如果我`view_by :my_id`上课了，我可以做到，但这感觉就像我无缘无故地存储一个`_id`。我应该关心吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:33:18.363

当您创建文档时，是否不可能提供您自己的 ID 而不是 coouchb 分配的默认 ID？我不知道 ruby​​ 的 couchrest 是否可以做到，但它在 CouchDB API 中可用

见这里：[http ://wiki.apache.org/couchdb/HTTP_Document_API#PUT](http://wiki.apache.org/couchdb/HTTP_Document_API#PUT)

文档 ID 被传递到 url。

# python - 一个切换按钮，一旦点击就会启动全屏窗口，如果再次点击就会回到正常状态

> ID：13988303
> 
> 赞同：0
> 
> 时间：2012-12-21T10:23:24.030
> 
> 标签：python, qt, pyqt, pyqt4

我在 pyqt 中的代码很简单：

```
QtCore.QObject.connect(self.pushButton, QtCore.SIGNAL("clicked()"), self.add_entry)

def add_entry(self):

            if QtCore.Qt.WindowFullScreen:
               MainWindow.showNormal()
            else :
                   MainWindow.showMaximized() 
```

单击切换按钮时，它会显示全屏，但再次单击时不会恢复到正常屏幕模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:37:19.473

你把事情混在一起了。QtCore.Qt.WindowFullScreen 是常量值 - 因此您的条件始终为真。而在第二个 - .showMaximized 窗口方法将窗口对象切换到 Qt.WindowMaximized 状态。

以下是您应该如何更改它：

```
类示例（QtGui.QMainWindow）：

    def __init__(self):
        超级（例如，自我）.__init__()
        self.initUI()

    定义 initUI（自我）：      

        cb = QtGui.QPushButton('Switch', self)
        cb.move(20, 20)
        cb.clicked.connect(self.add_entry)
        self.setGeometry(300, 300, 250, 150)
        自我展示（）

    def add_entry(self):
        如果 self.windowState() & QtCore.Qt.WindowFullScreen:
            self.showNormal()
        别的：
            self.showFullScreen()

```

# javascript - 浏览器 Flash 中的 JavaScript 屏幕截图（仅限客户端）

> ID：13988305
> 
> 赞同：1
> 
> 时间：2012-12-21T10:23:25.417
> 
> 标签：javascript, flash, screen-capture

您好我需要使用 JavaScript 捕获 Flash 游戏的图像。到目前为止，我发现您可以通过编辑 Flash 游戏本身以及使用客户端代码来实现。

有谁知道如何使用仅适用于所有 Flash 游戏的客户端代码截取 Flash 游戏的屏幕截图（因此脚本不依赖于要配置的游戏代码）。

如果这不能在 JavaScript 中完成，那么任何人都可以指出我正确的方向吗？

感谢任何人的任何输入:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:27:57.357

我很确定这在 javascript 中是不可能的，因为没有任何用于 flash 的屏幕截图 api。

# google-chrome-extension - 在 chrome 扩展中将数据从本地存储上传到谷歌驱动器

> ID：13988308
> 
> 赞同：0
> 
> 时间：2012-12-21T10:23:36.947
> 
> 标签：google-chrome-extension, google-drive-api

如果我是正确的，将 chrome 扩展（非托管）与谷歌驱动器集成似乎是不可能的。有没有办法在 chrome 扩展中将内容从“localstorage”上传到谷歌驱动器？

可以使用折旧文档列表api来做到这一点吗？如果是，如何？

例如，用户在扩展的 popup.html 页面的 localstorage 中有一些数据。用户希望在他的谷歌驱动器中备份该数据。如何通过没有托管页面的 chrome 扩展来完成。

提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-21T17:40:45.020

您可以使用 JavaScript 将文件上传到云端硬盘。查看 JavaScript 的分步快速入门[指南](https://developers.google.com/drive/quickstart-js)以了解它，您必须更改代码才能从本地存储而不是文件系统读取：

# php - 在 var name[value1,value2,value2] 中使用 php 和 mysql 获取值

> ID：13988316
> 
> 赞同：0
> 
> 时间：2012-12-21T10:24:34.260
> 
> 标签：php, jquery, jqplot

如何从变量 Var s1、s2、s3 在 php 和 mysql 中插入数组值：

```
$(function () {

    var s1 = [100, 200, 300]; //How to Get Value from mysql database
    var s2 = [30, 80, 90]; //How to Get Value from mysql database
    var s3 = [120, 90, 80]; //How to Get Value from mysql database

    // Can specify a custom tick Array.
    // Ticks should match up one for each y value (category) in the series.

    var ticks = ['2010', '2011', '2012'];
    var plot1 = $.jqplot('chart3', [s1, s2, s3], {

        // The "seriesDefaults" option is an options object that will
        // be applied to all series in the chart.

        seriesDefaults: {
            shadow: true, // show shadow or not.
            renderer: $.jqplot.BarRenderer,
            rendererOptions: {
                fillToZero: true
            }
        },

        // Custom labels for the series are specified with the "label"
        // option on the series option.  Here a series option object
        // is specified for each series.

        series: [
            {label: 'Hotel'},
            {label: 'Event Regristration'},
            {label: 'Airfare'}
        ],

        // Show the legend and put it outside the grid, but inside the
        // plot container, shrinking the grid to accomodate the legend.
        // A value of "outside" would not shrink the grid and allow
        // the legend to overflow the container.

        legend: {
            show: true,
            placement: 'outsideGrid'
        },
        axes: {
            // Use a category axis on the x axis and use our custom ticks.
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: ticks
            },
            // Pad the y axis just a little so bars can get close to, but
            // not touch, the grid boundaries.  1.2 is the default padding.
            yaxis: {
                pad: 1.05,
                tickOptions: {
                    formatString: '$%d'
                }
            }
        },
        grid: {
            borderColor: '#000', // CSS color spec for border around grid.
            borderWidth: 2.0, // pixel width of border around grid.
            shadow: true // draw a shadow for grid.
        }
    });
    // Bind a listener to the "jqplotDataClick" event.  Here, simply change
    // the text of the info3 element to show what series and ponit were
    // clicked along with the data for that point.
    $('#chart3').bind('jqplotDataClick',

    function (ev, seriesIndex, pointIndex, data) {
        $('#info3').html('series: ' + seriesIndex + ', point: ' + pointIndex + ', data: ' + data);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:44:04.413

2种方式：

# 阿贾克斯

使用：$.getJSON ( [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/) )

```
var ses = {};

$.getJSON('page_adress.php', {variable_you_want_to_pass1: 'its value', variable_you_want_to_pass2: 'var 2 value'}, function(data) {
    ses = data;
}); 
```

在您的 PHP 中：

```
<?php
$passed_var_1 = $_REQUEST['variable_you_want_to_pass1'];
//.... etc

//Here you get your data from mysql, cast it into array

header('Content-type: application/json');
echo json_encode($dbdata);
?> 
```

所以基本上在请求完成后，您将在 JavaScript 中传输您在 PHP 中的确切数组。请记住，此技术使用 AJAX。如果你想避免这种情况，你将不得不使用第二种技术。

# 动态创建 JS

让 PHP 生成你的 javascript。在这种情况下，您将在您的主页

```
<script src="js_data.js.php" type="text/javascript"></script> 
```

在您的`js_data.js.php`文件中：

```
<?php
header("content-type: application/x-javascript");

$s1 = array(100,200,300);
//....

var s1 = [<?=implode(', ', $s1)?>],
    s2 = [<?=implode(', ', $s2)?>],
    s3 = [<?=implode(', ', $s3)?>];

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:53:41.260

### 第一种方法（w/o ajax & json）（untidy-way）

首先从数据库中获取值并将其保存在 PHP 变量中。
然后将 html 元素放入页面并为其分配值。
然后使用 document.getElement 方法在 javascript 中使用它。

// 假设您从 $valueFrmDB 中的数据库中获取了值。

```
$valueFrmDB; 
```

现在，取 html 元素（您可能需要取多个）

```
<input type="hidden" id="something" name="something" value="echo value of $valueFrmDB here" />; 
```

然后，在 javascript

```
var vfd = document.getElementById('something').value; 
```

将字符串转换为数组

### 第二种方法（使用ajax和json）（简单正确但必须知道ajax和json）

使用 ajax 从数据库中获取值
然后使用 json 将该值传递给 javascript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:55:55.990

只需您可以通过以下方式执行此操作：

```
<?php
   $query = mysql_query("SELECT * FROM attendence");
   $results = array(array());

   while($line = mysql_fetch_array($query)){
    $results[] = $line;
   }
?> 
```

Javascript

```
 <script type="text/javascript">
     $(document).ready(function(){
     var data = <?php echo json_encode($results); ?>; //array uses here
     var plot1 = jQuery.jqplot ('chart1', [data], 
       { 
       seriesDefaults: {
       renderer: jQuery.jqplot.PieRenderer, 
        rendererOptions: {
        showDataLabels: true}
       }, 
      legend: { show:true, location: 'e' }
      });
     });
  </script> 
```

# iphone - 如何命名和处理返回 CFType 的函数的内存管理

> ID：13988322
> 
> 赞同：0
> 
> 时间：2012-12-21T10:25:24.000
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting, core-foundation

我有一个在 ARC (DTCoreText) 上运行的项目，我想在 UIFont 上实现一个返回匹配 CTFontRef 的类别方法。这是我到目前为止所拥有的：

```
@implementation UIFont (DTCoreText)

+ (UIFont *)fontWithCTFont:(CTFontRef)ctFont
{
    NSString *fontName = (__bridge_transfer NSString *)CTFontCopyName(ctFont, kCTFontPostScriptNameKey);
    CGFloat fontSize = CTFontGetSize(ctFont);
    return [UIFont fontWithName:fontName size:fontSize];
}

- (CTFontRef)CTFont
{
    CTFontRef newFont = CTFontCreateWithName((__bridge CFStringRef)self.fontName, self.pointSize, NULL);

    return newFont;
}

@end 
```

从技术上讲，这会返回 +1 引用，因为没有自动释放 CF 对象。

在我的代码中，我这样称呼它：

```
- (void)replaceFont:(UIFont *)font inRange:(NSRange)range
{
    [self beginEditing];

    [self removeAttribute:(id)kCTFontAttributeName range:range];

    CTFontRef ctFont = [font CTFont];
    [self addAttribute:(id)kCTFontAttributeName value:CFBridgingRelease(ctFont) range:range];

    [self endEditing];
} 
```

由于 CFBridgingRelease，这没有分析警告，但我担心有人从类别方法的名称中不清楚这一点。

一个不同的建议是使用 C 函数进行创建：

```
static CTFontRef CTFontCreateFromUIFont(UIFont *font) 
```

这会更明显，因为名称中的*Create*告诉开发人员他正在获得 +1 参考。

那么您认为“正确”的方式是什么？还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:45:18.210

另一种选择是将方法命名为`createCTFont`. 我不知道分析器是否会认为这意味着 CF 对方法的创建规则；如果没有，您可以添加注释以显式声明该方法返回所有权：

```
- (CTFontRef) createCTFont CF_RETURNS_RETAINED; 
```

以这种方式命名该方法应该会让读者怀疑，如果在创建消息之后没有发布，那么注释肯定会使分析器在相同情况下产生怀疑。

# mysql - #1062 - 键 'PRIMARY' 的重复条目 '111'

> ID：13988325
> 
> 赞同：3
> 
> 时间：2012-12-21T10:25:31.253
> 
> 标签：mysql, phpmyadmin

我正在尝试通过 phpMyAdmin 导入数据库，即使我找不到重复条目的位置，我也遇到了重复此特定错误的问题。

我更改了 PK 的一些值以查看会发生什么，即我将 13 更改为 111，将 12 更改为 112。所以即使我更改了 vlaue，它仍然认为它是重复的。

```
 SQL query:

--
-- Dumping data for table `gno_affiliates`
--
INSERT INTO  `gno_affiliates` (  `id` ,  `affiliate_name` ,  `affiliate_url` ) 
VALUES ( 111,  'Blackberry',  'http://www.blackberry.com' ) , ( 112,  'Android',      'http://www.android.com' ) , ( 12,  'I-Pod',  'http://www.I-Pod.com' ) , ( 14,  'Windows     Mobile',  'http://www.windowsmobile.com' ) , ( 15, 'Meego',  'http://www.meego.com' ) , (     16,  'Zombie Farm',  'http://itunes.apple.com/au/app/zombie-farm-2/id494655448?mt=8' ) ;

MySQL said: 

#1062 - Duplicate entry '111' for key 'PRIMARY' 
```

这是表格代码：

```
CREATE TABLE IF NOT EXISTS `gno_affiliates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `affiliate_name` varchar(255) NOT NULL,
  `affiliate_url` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=17 ; 
```

谢谢。

编辑：

以下是建议的查询 cowls 的结果： ![phpMyAdmin 截图](../Images/5263133461f44f4e7aa9c157ccd8e6a7.png)

如您所见，该 ID 只有一个条目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:26:49.500

表中必须已经有该键的条目。

在运行插入检查之前运行此查询：

```
SELECT * FROM gno_affiliates WHERE id = 111 
```

可以在命令行上运行它，但是我建议下载 SQL 客户端，因为这将使您的生活更轻松。我推荐 SQLYog：

[http://code.google.com/p/sqlyog/downloads/list](http://code.google.com/p/sqlyog/downloads/list)

下载社区版 (.exe) 文件。

下载后，安装程序并使用连接详细信息连接到您的数据库。然后您将拥有一个查询编辑器，您可以在其中执行此查询。

# java - Java 内存：Runtime.getRuntime().maxMemory()

> ID：13988328
> 
> 赞同：2
> 
> 时间：2012-12-21T10:25:36.130
> 
> 标签：java, jakarta-ee, memory, memory-management

```
Runtime.getRuntime().maxMemory() 
```

显示哪个内存？它是幸存者，伊甸园，旧的，永久的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:51:52.017

它是堆的最大大小。它松散地基于`-mx`or`-Xmx`命令行参数，但由于我不明白的原因可以减少 1-5%（它似乎并不完全相同）

这不包括永久代、直接内存、内存映射文件、堆栈空间或共享库。

虽然它不包括所有内容，但它通常占大多数应用程序可用总内存的 80-90%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:29:14.653

根据 API，返回 Java 虚拟机将尝试使用的最大内存量。如果没有固有限制，则返回 Long.MAX_VALUE 值。

# uitableview - UITableView 通知 UITableViewCell 重新加载

> ID：13988330
> 
> 赞同：0
> 
> 时间：2012-12-21T10:25:37.820
> 
> 标签：uitableview, reloaddata

以下是情况的简短摘要：

我有一个带有多个单元格的 TableViewController。在其中一个单元格中，我有一个 UITextField。此单元格属于自定义 UITableViewCell 类。这个类实现了 UITextFieldDelegate 协议和方法`textFieldDidEndEditing:` 在方法中`textFieldDidEndEditing:`我将 TextField 的值存储到 CoreData 中。

这一切都很好。

我的问题与重新加载 TableView 有关：

在用户的某些操作后，我通过调用`[self.tableView reloadData]` If 重新加载 UITableView 的数据，当我调用此方法时，上面提到的 TextField 是第一响应者，该`textFieldDidEndEditing:`方法将被调用，导致我的 CoreData 相关代码执行。

当 TableView 被重新加载时，我不希望自定义 TabelViewCell 做任何事情。有没有办法， TableViewCell 可以知道 TableView 正在重新加载？所以我可以在方法中检查这个`textFieldDidEndEditing:`？

与此同时，我已经通过以下方式解决了它：

创建这个 TableViewCell 时，我让 ViewController 存储对它的引用。在调用之前，`[self.tableView reloadData]`我首先通过设置自定义属性来通知 Cell，`_cell.tableWillReload = YES` 我将在方法中检查此属性`textFieldDidEndEditing:`。

我在想也许有一种不同的、更默认的方式，让 TableViewCells 知道它们周围的TableView 正在重新加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:46:40.807

尝试这个 ：-

```
[yourTextFieldOfCell resignFirstResponder]; 
```

打电话之前`[self.tableView reloadData];`

# c# - 加密异常 指定的标志无效

> ID：13988333
> 
> 赞同：3
> 
> 时间：2012-12-21T10:25:45.787
> 
> 标签：c#, rsa, rsacryptoserviceprovider

这是我的代码：

```
 RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(128);

        try
        {              
            string publicKeyXML = rsa.ToXmlString(false);
            string privateKeyXML = rsa.ToXmlString(true);
            int size = rsa.KeySize;
        }
        finally 
        {
            rsa.PersistKeyInCsp = false;
        } 
```

我只是不断收到相同的错误“指定的标志无效”。如果我使用无参数构造函数，则不会引发异常并且密钥大小为 1024。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T10:32:34.707

`RSACryptoServiceProvider`不支持 128 位密钥：

> 支持从 384 位到 16384 位的`RSACryptoServiceProvider`密钥长度，以 8 位为增量

引自[MSDN -`RSACryptoServiceProvider.KeySize`财产](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.keysize.aspx)

# c# - 析构函数、dispose 和 finalize 方法的区别

> ID：13988334
> 
> 赞同：82
> 
> 时间：2012-12-21T10:25:46.207
> 
> 标签：c#, .net, destructor, dispose, finalize

我正在研究垃圾收集器如何在 c# 中工作。`Destructor`我对,`Dispose`和`Finalize`方法的使用感到困惑。

根据我的研究和理解，在我的类中有一个 Destructor 方法将告诉垃圾收集器以析构方法中提到的方式执行垃圾收集，而不能在类的实例上显式调用。

该`Dispose`方法旨在为用户提供对垃圾收集的控制。该`Finalize`方法释放了类使用的资源，但不释放对象本身。

我不确定我是否以正确的方式理解它。请澄清疑惑。欢迎任何进一步的链接或指南。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-21T10:27:01.697

析构函数隐式调用 Finalize 方法，它们在技术上是相同的。Dispose 可用于实现 IDisposable 接口的对象。

您可能会看到：[析构函数 C# - MSDN](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/destructors)

> 析构函数隐式调用对象基类的 Finalize。

来自同一链接的示例：

```
class Car
{
    ~Car()  // destructor
    {
        // cleanup statements...
    }
} 
```

析构函数的代码被隐式翻译为以下代码：

```
protected override void Finalize()
{
    try
    {
        // Cleanup statements...
    }
    finally
    {
        base.Finalize();
    }
} 
```

您对析构函数的理解是正确的：

来自[MSDN](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/destructors)

> 程序员无法控制何时调用析构函数，**因为这是由垃圾收集器决定的**。垃圾收集器检查应用程序不再使用的对象。如果它认为一个对象符合销毁条件，它会调用析构函数（如果有）并回收用于存储该对象的内存。程序退出时也会调用析构函数。可以通过调用 Collect 来强制进行垃圾回收，但大多数情况下应该避免这样做，因为它可能会产生性能问题。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-12-21T10:31:18.060

在 C# 术语中，析构函数和终结器基本上是可互换的概念，应该用于在收集类型时释放**非托管**资源，例如外部句柄。很少需要编写终结器***。***

问题在于 GC 是非确定性的，因此`Dispose()`方法 (via `IDisposable`) 可以支持*确定性*清理。这与垃圾回收无关，并允许调用者*更快*地释放任何资源。它也适用于*托管*资源（除了非托管资源），例如，如果您有一个*封装*（例如）数据库连接的类型，您可能也希望处理该类型以释放连接。

# json - 如何在 MVC Web Api 中将多嵌套列表 LINQ 到 JSON？

> ID：13988335
> 
> 赞同：1
> 
> 时间：2012-12-21T10:25:47.533
> 
> 标签：json, linq, asp.net-mvc-4, asp.net-web-api

我想学习这样做，因为它让我头疼：S

**目标：**

进行尽可能少的数据库查询以获取我的应用程序的逻辑 JSON 对象。

**设想**

家长可以为孩子支付活动费用的学校应用程序。一个家长有很多学生，一个学生有很多行项目（订单），一个行项目作为学生和产品之间的连接表。

**楷模：**

```
public class Parent
 {
    public int ParentId { get; set; }
    public string FullName { get; set; }

    public virtual ICollection<Student> Students { get; set; }

}

public class Student
{
    public int StudentId { get; set; }
    public string FullName { get; set; }

    public int ParentId { get; set; }
    public virtual Parent Parent { get; set; }

    public virtual ICollection<LineItem> LineItems { get; set; }
} 

public class Product
{
    public int ProductId { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }

    public virtual ICollection<LineItem> LineItems { get; set; } 
} 

public class LineItem
{
    public int Id { get; set; }
    public int ProductId { get; set; }
    public int StudentId { get; set; }
    public int Discount {get; set;}
    // ...

    public virtual Product Product { get; set; }
    public virtual Student Student { get; set; }
} 
```

**我想生成的 JSON：**

```
{
    "Parent": {
        "ParentId": 10, 
        "FullName": "John Doe", 
        "Students": [
            {
                "StudentId": 12, 
                "FullName": "William Doe", 
                "ParentId": 10, 
                "LineItems": [
                    {
                        "Discount": 10, 
                        "Price": 150, 
                        "Name": "Student trip to Washington"
                    }, 
                    {
                        "Discount": 10, 
                        "Price": 20, 
                        "Name": "Halloween party"
                    }
                ]
            }, 
            {
                "StudentId": 15, 
                "FullName": "Kate Mary-Jane Doe", 
                "ParentId": 10, 
                "LineItems": [
                    {
                        "Discount": 10, 
                        "Price": 110, 
                        "Name": "Spring Break to Mexico"
                    }
                ]
            }
        ]
    }
} 
```

**笔记：**

我已经尝试过 View Models 和 AutoMapper，但我无法获得所有内容的嵌套输出。我能做的最好的事情是获得一个嵌套的 Parent -> Students[] 输出，但无法弄清楚如何到达 LineItems 和 Products。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:23:48.577

以下解决方案可能对您有所帮助

我正在使用 Nortwnd 示例数据库，有 3 个表，Customers,Orders,OrdersDetails，如您所知，这些表之间的关系客户有很多订单有很多产品

以下是使用 System.Web.Script.Serialization 的工作示例；var json = 新列表（）；

```
 foreach (var c in customers)
       {
           json.Add(new
           {
               c.CustomerID,         
               custname =c.CompanyName, 
               Orders = c.Orders.Select(o => new 
               {
                   o.OrderID,
                   o.OrderDate,
                   OrderDetails=o.Order_Details.Select(d=> new{
                  d.OrderID,
                  d.ProductID
                   })
               })
           });
       }

       var serializer = new JavaScriptSerializer();

       var jsonString = serializer.Serialize(json);

        Response.Write(jsonString.ToString()); 
```

输出

```
[
    {
        "CustomerID": "WOLZA",
        "custname": "Wolski Zajazd",
        "Orders": [
            {
                "OrderID": 10374,
                "OrderDate": "/Date(849724200000)/",
                "OrderDetails": [
                    {
                        "OrderID": 10374,
                        "ProductID": 31
                    },
                    {
                        "OrderID": 10374,
                        "ProductID": 58
                    }
                ]
            },
            {
                "OrderID": 10611,
                "OrderDate": "/Date(869769000000)/",
                "OrderDetails": [
                    {
                        "OrderID": 10611,
                        "ProductID": 1
                    },
                    {
                        "OrderID": 10611,
                        "ProductID": 2
                    },
                    {
                        "OrderID": 10611,
                        "ProductID": 60
                    }
                ]
            },
            {
                "OrderID": 10792,
                "OrderDate": "/Date(882815400000)/",
                "OrderDetails": [
                    {
                        "OrderID": 10792,
                        "ProductID": 2
                    },
                    {
                        "OrderID": 10792,
                        "ProductID": 54
                    },
                    {
                        "OrderID": 10792,
                        "ProductID": 68
                    }
                ]
            },
            {
                "OrderID": 10870,
                "OrderDate": "/Date(886530600000)/",
                "OrderDetails": [
                    {
                        "OrderID": 10870,
                        "ProductID": 35
                    },
                    {
                        "OrderID": 10870,
                        "ProductID": 51
                    }
                ]
            },
            {
                "OrderID": 10906,
                "OrderDate": "/Date(888345000000)/",
                "OrderDetails": [
                    {
                        "OrderID": 10906,
                        "ProductID": 61
                    }
                ]
            },
            {
                "OrderID": 10998,
                "OrderDate": "/Date(891541800000)/",
                "OrderDetails": [
                    {
                        "OrderID": 10998,
                        "ProductID": 24
                    },
                    {
                        "OrderID": 10998,
                        "ProductID": 61
                    },
                    {
                        "OrderID": 10998,
                        "ProductID": 74
                    },
                    {
                        "OrderID": 10998,
                        "ProductID": 75
                    }
                ]
            },
            {
                "OrderID": 11044,
                "OrderDate": "/Date(893269800000)/",
                "OrderDetails": [
                    {
                        "OrderID": 11044,
                        "ProductID": 62
                    }
                ]
            }
        ]
    }
] 
```

# windows-phone-7 - ListBox的ControlTemplate样式时如何保持虚拟化？

> ID：13988347
> 
> 赞同：2
> 
> 时间：2012-12-21T10:27:07.420
> 
> 标签：windows-phone-7, listbox, scrollviewer, virtualizingstackpanel, itemspresenter

我读到，当样式不正确时，`ListBox`将失去其虚拟化。作为[notacat 在这个问题中的回答](https://stackoverflow.com/questions/8840383/windows-phone-style-make-listbox-s-virtualizing-disabled-how-to-recover-virt)，他的解决方案是可以的。

我意识到**每当我将 ItemsPresenter 放入另一个容器中**时，例如`Grid`, `Border`, ...

```
<ControlTemplate TargetType="ListBox">
                    <ScrollViewer x:Name="ScrollViewer" 
                                  BorderBrush="{TemplateBinding BorderBrush}" 
                                  BorderThickness="{TemplateBinding BorderThickness}" 
                                  Background="{TemplateBinding Background}" 
                                  Foreground="{TemplateBinding Foreground}" 
                                  Padding="{TemplateBinding Padding}">
                        <StackPanel>
                            <TextBlock Text="{TemplateBinding MyText}" />
                            <ItemsPresenter/>
                        </StackPanel>
                    </ScrollViewer>
</ControlTemplate> 
```

`ListBox`将立即失去其虚拟化。但我确实想放置一个`TextBlock`before `ItemsPresenter`，而**ScrollViewer**只接受 1 个子元素。

如何处理？

**更新**：我看到这篇[文章](https://stackoverflow.com/questions/4770892/adding-a-header-to-a-listboxs-scrollviewer-and-keeping-the-virtualizingstackpan?rq=1)，*Derek Lakin*所做的是将其放置`TextBlock`到`ScrollViewer`模板中，但如何将其`TextBlock`放入`ScrollContentPresenter`？

**P/S**：我确实设置`VirtualizingStackPanel`了`ItemsPanel`我的`ListBox`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:52:19.950

您正在为列表框创建项目模板，但重要的是 ItemPresenter 是滚动查看器的直接子项。查看[http://msdn.microsoft.com/en-us/library/ms754242.aspx](http://msdn.microsoft.com/en-us/library/ms754242.aspx)了解有关如何模板化列表框的更多信息。我也发现[这篇文章](http://msdn.microsoft.com/en-us/library/ee230084.aspx)真的很有帮助。

如果 itempresenter 不能是直接子级，则必须给 ItemsPresenter 命名，ItemsPresenter。

# ckeditor - CKEditor 4 格式标签

> ID：13988348
> 
> 赞同：3
> 
> 时间：2012-12-21T10:27:10.267
> 
> 标签：ckeditor

我正在尝试在 ckeditor 中更改我的 format_tags 列表，以便它在列表中没有预格式化和地址，但是如果我尝试输入：

```
CKEDITOR.config.format_tags = 'p;h1;h2;h3;h4;h5;h6;'; 
```

进入我的 config.js，没有任何反应——列表保持不变。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T11:22:18.833

事实证明，您需要将其添加到 editorConfig：

```
CKEDITOR.editorConfig = function( config ) {
    config.format_tags = 'p;h1;h2;h3;h4;h5;h6;div';
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T10:40:22.807

如果您不想使用该文件`config.js`（无论出于何种原因），您也可以这样做：

```
 CKEDITOR.replace( 'idofyourtextarea', {
    language: 'your_language', //for example 'es'
    height: 200,
    width: 300,
    format_tags: 'h1;h2;h3;h4;div' // <---here set the format tag
}); 
```

# sql - Linux 平台中的日期比较失败（适用于 Windows）-Oracle 11g 查询

> ID：13988351
> 
> 赞同：1
> 
> 时间：2012-12-21T10:27:14.007
> 
> 标签：sql, linux, oracle, oracle11g

我在linux中有一个奇怪的问题。

我有一个查询分数

```
end_time > SYSTIMESTAMP 
```

当我从 linux 运行时会引发错误：

```
2012-12-20 05:03:05,443 WARN  [org.hibernate.util.JDBCExceptionReporter] (ajp-8109-8) SQL Error: 1878, SQLState: 22008
2012-12-20 05:03:05,443 ERROR [org.hibernate.util.JDBCExceptionReporter] (ajp-8109-8) ORA-01878: specified field not found in datetime or interval 
```

这在 Windows 中运行良好。

我特别想要 SYSTIMESTAMP，因为我需要获取正在运行数据库的机器的当前时间戳。

是`end_time`类型`TIMESTAMP(6)`。我的要求是过滤 end_time 字段值大于当前时间的记录。我应该使用哪个功能？

# macos - 您无权访问此服务器上的 /project

> ID：13988352
> 
> 赞同：1
> 
> 时间：2012-12-21T10:27:17.863
> 
> 标签：macos, apache, permissions

我有这个问题：“您无权访问此服务器上的 /project。” 而且，让我感到麻烦的是，在终端：

```
sol@Sol-MacMini /Library/WebServer/Documents>sudo ln -s /User/sol/Documents/project/ ./project
sol@Sol-MacMini /Library/WebServer/Documents>sudo ln -s /Applications/web/ci/ ./ci
sol@Sol-MacMini /Library/WebServer/Documents>ls
CodeIgniter         ci
PoweredByMacOSX.gif     m-plan
PoweredByMacOSXLarge.gif    project 
```

但是在我的浏览器中，输入“localhost”时看不到“项目”。如果输入“localhost/ci”，它可以工作，当“localhost/project”时它不工作。我认为我的 apache 设置可能有问题。

我能做些什么来解决这个问题？

更多说明：

我在 apache 的 htdocs 目录下创建了一个符号链接“project”，它指向我家下的一个“project”目录。符号链接和目录的权限都应该没问题，如下图：

/图书馆/Web服务器/文档>ls -l

lrwxr-xr-x 1 根轮 35 12 21 17:59 项目-> /Users/sol/Documents/htdocs/project

sol@Sol-MacMini ~/Documents/htdocs>ls -l

drwxr-xr-x@ 15 sol admin 510 12 21 17:59 项目

如您所见，鉴于上述文件权限集，我收到“权限被拒绝”错误是很奇怪的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:50:54.293

highlight the project folder in the apache directory. Press command + i and make sure in permissions that everyone can read.

# python - 将 PyCharm 定向到 Python 3.3 解释器？

> ID：13988363
> 
> 赞同：19
> 
> 时间：2012-12-21T10:28:19.390
> 
> 标签：python, macos, pycharm

我不知道为什么我在这方面遇到这么多麻烦。我在 OS X 10.7 上，我使用默认设置安装了 Python，并运行了包含的 .command 文件。

我只想让 PyC​​harm 与 Python 3.3 一起工作，但我似乎找不到工作的解释器。唯一一个我可以立即找到负载（提供“分发”和“设置工具”包）并给我“一些骨架未能生成”错误。如果我选择其中一个 2.7 解释器，它会加载一段时间，但我仍然会收到类似的错误。我也遇到了一些找不到 Python 打包工具的问题（通常是“pip”）。

我已经搜索了很长时间，但找不到解决方案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-24T09:00:54.747

[PyCharm 自动检测从http://python.org](http://python.org) 安装程序安装的 Python 的 Python 3.3 路径`mpkg`：

![小路](../Images/b2205cdd90830556ebbb2849e0d3f917.png)

```
/Library/Frameworks/Python.framework/Versions/3.3/bin/python3 
```

将此解释器添加到 PyCharm 后，安装包管理工具（单击**Install 'distribute'**，然后单击**Install 'pip'**）：

![点子](../Images/82daa55fc2f63b94b629a89c86d05aa6.png)

使用按钮将 pip 升级到最新版本`Upgrade`（分发升级将失败）。

现在您可以使用按钮安装包`Install`，例如`Django`可以从 PyCharm 中的解释器对话框安装：

![姜戈](../Images/16e38041cb9af960479e8989f737632a.png)

如果您在代码完成方面遇到问题，请尝试`File`| `Invalidate Caches`，重新启动 PyCharm 并等待索引完成。对我来说，它开箱即用，效果很好：

![代码完成工作](../Images/626b898954fee00a9b6c4e99069204c1.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-25T09:30:11.057

Python 3.3 现在使用一种称为 venv 的新 virtualenv 机制。

您可以使用以下方法创建以下环境之一：

```
pyvenv myprojectname 
```

PyCharm 3.0 不能正确处理这些。旧的 virtualenv 系统将 python 二进制文件复制到环境中，而 venv 则创建指向`python3.3`二进制文件的符号链接。PyCharm 尝试解析所有这些符号链接，直到找到一个真实文件。这导致它忽略您的虚拟环境并使用全局环境。

要解决此错误，您可以将`python3.3`二进制文件复制到环境的`bin`文件夹中，然后将其添加为 PyCharm 中的项目解释器。

# cloud-foundry - 如何在公共 Cloud Foundry 上托管 SSL 应用程序？

> ID：13988364
> 
> 赞同：0
> 
> 时间：2012-12-21T10:28:21.270
> 
> 标签：cloud-foundry

我已经阅读了很多关于修改 nginx 配置以获得对应用程序的 SSL 访问的博客和支持论坛，但是我们如何在公共 CF 上做同样的事情呢？我希望能够在 CF 的公共云空间而不是在微云代工厂上做到这一点。

问候，

金贾尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:49:15.593

您可以通过 http 和 https 访问 cloudfoundry.com 上托管的任何应用程序。

# php - HTTPS 站点上出现 cURL 错误 60 的可能原因是什么？

> ID：13988365
> 
> 赞同：1
> 
> 时间：2012-12-21T10:28:22.560
> 
> 标签：php, curl, https

在网上搜索之后，我真的无能为力。我知道这个问题已经被问过好几次了，但没有一个解决方案能解决我的问题。我想知道 curl 错误 60 是否还有其他已知原因：“SSL 证书问题，验证 CA 证书是否正常”。

我已将 CURLOPT_CAINFO 设置为 pem 文件（也尝试过 crt），并且在尝试访问 pem 文件时检查了权限不足。

顺便说一下，这是代码：

```
$url = 'https://example.com/';

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true); 
curl_setopt($ch, CURLOPT_CAINFO, "/usr/local/apache2/htdocs/server/html/cacert.pem");

$response = curl_exec($ch);

...do something

curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T10:33:36.920

你可以试试这个： -

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, **'https://example.com/'**);
// Set so curl_exec returns the result instead of outputting it.
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
// Get the response and close the channel.
$response = curl_exec($ch); 
```

# javascript - 修复网站加载时间？

> ID：13988371
> 
> 赞同：35
> 
> 时间：2012-12-21T10:28:50.647
> 
> 标签：javascript, jquery, html, css

目前我的网站需要几千年才能加载，即使它几乎没有任何内容。我的假设是，这是因为页面上有很多图像和 JavaScript。

有没有办法测试导致加载时间长的原因？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-21T10:31:38.227

在此处测试您的页面[PageSpeed Insights - Google Developers](https://developers.google.com/speed/pagespeed/insights)，您将看到所有让您的网站更快的建议。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-31T03:57:22.780

您可以遵循以下一些基本事项来提高网站速度：

1.  **加载后内容**：首先不要加载所有内容，例如 JavaScript 文件、图像、数据。列出您的用户应该首先看到的内容并按该顺序加载。这将减少用户的感知等待时间，因为他们将能够在加载其他内容的同时查看站点的加载部分。
2.  **预加载内容**：受益于用户的空闲时间。使用 Ajax 或图像缓存技巧在背景中加载内容，因此用户不会注意到页面仍在“工作”。因为文件已经预加载到浏览器的缓存中，所以当用户加载下一页或视图时，看起来会非常快，因为数据已经存储在本地。（简而言之，发布和预加载内容背后的主要思想是首先向用户展示他们想要的内容，然后在他们需要查看该内容之前在后台加载其他内容。使用 JavaScript 或 jQuery Ajax 加载您的内容并缓存它们。
3.  **优化图像**：
    1.  将图像质量降低到人眼无法分辨的程度。您可以牺牲一点图像质量来大大减小文件大小，从而提高下载/加载速度。
    2.  不要使用浏览器缩小图像：不要发送巨大的图像并让浏览器使用 CSS 宽度和高度缩放到明显更小的尺寸。即使您确实想使用一些缩放（例如完全拉伸的背景图像），也可以手动将图像调整为大致正确的大小。
    3.  使用 CSS 替换图像。
    4.  使用 CSS 精灵：将您的小图像组合成一张图像，并使用 CSS 显示正确的部分。
    5.  使图像可缓存。
4.  **将 CSS 放在首位**：将 CSS 放在首位让您感觉页面加载速度更快。由于 CSS 被应用为内容的一部分被加载。
5.  **将 JavaScript 放在底部**：JavaScript 用于操作 DOM 元素，因此请先加载 DOM 元素，以便首先呈现页面，然后再加载您的脚本。JavaScript 还阻止并行下载。
6.  **缩小JavaScript 和 CSS**：缩小 CSS 和 JavaScript 可以将其大小减少到原始副本的 50% 到 30%。
7.  **使用外部 CSS 和 JavaScript**：.css 和 .js 文件是可缓存的，因此请使用外部 CSS 和 JavaScript 文件。
8.  **跨域拆分组件**：将您的组件拆分为两个或三个域，例如`example.com`to`com1.example.com`和`com2.example.com`. 这允许您最大化并行下载。不要保留超过 2 到 4 个域，否则会给您造成 DNS 查找损失。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-12-30T21:28:29.283

以下是您可以测试网页的列表：

1.  [PageSpeed Insights - 谷歌开发者](https://developers.google.com/speed/pagespeed/insights)
2.  [慢](https://addons.mozilla.org/en-US/firefox/addon/yslow/)
3.  [网页测试](http://www.webpagetest.org)
4.  [Pingdom 工具](http://tools.pingdom.com)
5.  [GTmetrix](http://gtmetrix.com/)
6.  [iWebTool](http://www.iwebtool.com/speed_test)
7.  [APM 云监控](http://cloudmonitor.ca.com/en/checkit.php)

此外，为了加快您的页面，您可以使用：

1.  [亚马逊云前](http://aws.amazon.com/cloudfront/)
2.  [CloudFlare](https://www.cloudflare.com) - 有免费计划

* * *

**1.优化您的图像**

知道何时为您的图像使用适当的文件格式。更改为不同的文件格式可以显着减小图像的文件大小。

*   **GIF** - 适用于徽标等颜色较少的图像。
*   **JPEG** - 非常适合具有大量颜色和细节的图像，例如照片。
*   **PNG** - 是您需要高质量透明图像时的选择。

查看这些资源以了解有关优化图像的更多信息：

*   [为 Web 保存图像的综合指南](http://sixrevisions.com/web_design/comprehensive-guide-saving-images-for-web/)
*   [JPEG 101：JPEG 速成课程指南](http://sixrevisions.com/graphics-design/jpeg-101-a-crash-course-guide-on-jpeg/)
*   [网页设计师的 PNG 图像格式指南](http://sixrevisions.com/web_design/web-designers-guide-to-png-image-format/)
*   [8 个用于优化图像的优秀工具](http://sixrevisions.com/tools/8-excellent-tools-for-optimizing-your-images/)

为了减小图像大小，我推荐[TinyPNG](http://www.tinypng.org)

* * *

**2.不要缩小图像**

避免使用比您需要的更大的图像，因为您可以在 HTML 中设置元素的`width`和`height`属性。`<img>`

[* 如果您需要 100x100 像素的图像并且您有 700x700 像素的图像，请使用 Photoshop 之类的图像编辑器或这些基于 Web 的图像编辑器之一将图像调整为所需的尺寸。这降低了图像的文件大小，从而有助于减少页面加载时间。]

* * *

**3.压缩和优化您的内容**

压缩网站内容的任务可能会对减少加载时间产生巨大影响。使用 HTTP 压缩时，您的所有网页数据都在一个较小的文件中发送，而不是一个包含许多不同文件的请求。有关更多信息，请参阅有关[HTTP 压缩的 Wikipedia 文章](http://en.wikipedia.org/wiki/HTTP_compression)的 Wikipedia 文章。

您还可以通过组合它们并缩小源代码来优化和压缩您的 JavaScript 和 CSS 文件。

* * *

**4\. 将样式表引用放在顶部**

将样式表引用移动到`<head>`HTML 文档的 有助于您的页面感觉加载速度更快，因为这样做可以让您的页面逐步呈现样式。此外，它是 W3C 标准并没有什么坏处。

* * *

**5\. 将脚本引用放在底部**

浏览器只能同时下载每个主机名的两个组件。如果您将脚本添加到顶部，它将在页面初始加载时阻止其下方的任何其他内容。这让人感觉页面加载速度较慢。

为避免这种情况，请将脚本引用尽可能放在 HTML 文档的下方，最好是在结束`<body>`标记之前。

* * *

**6\. 将 JavaScript 和 CSS 放在外部文件中**

如果您的 JavaScript 和 CSS 直接在 HTML 文档中，则每次请求 HTML 文档时都会下载它们。因此，这并没有利用浏览器缓存并增加了 HTML 文档的大小。

始终将 CSS 和 JavaScript 放在外部文件中；这是一种最佳做法，使您的网站更易于维护和更新。

* * *

**7\. 最小化 HTTP 请求**

当访问一个新网页时，大部分页面加载时间都花在下载该页面的组件（例如图像、样式表和脚本）上。

通过最大限度地减少网页需要发出的请求数量，它将加载得更快。为了减少对图像的 HTTP 请求，您可以做的一件事是使用[CSS sprite](http://sixrevisions.com/css/css-sprites-site-speed/)组合多个图像。

如果您有多个样式表和 JavaScript 库，请考虑将它们组合起来以减少 HTTP 请求的数量。

* * *

**8\. 缓存你的网页**

如果您使用动态生成网页的[内容管理系统](http://sixrevisions.com/web-development/how-to-evaluate-what-cms-to-use/)，您应该静态缓存您的网页和数据库查询，以便减少服务器的压力并加快页面呈现时间。

* * *

**9\. 减少 301 重定向**

每次使用 301 重定向时，都会强制浏览器访问新 URL，从而增加页面加载时间。如果可能，请避免使用 301 重定向。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-31T12:19:50.860

这里的其他答案很好地详细说明了性能调试工具和提高加载时间的技巧，所以我不会重复它们。

**您的主要问题是，在向访问者显示您的主页之前，您完全加载了网站中的所有内容**。这是不必要的，并且是导致您的网站加载缓慢的主要因素。

我可以理解您希望尽可能多地预加载，以便当访问者浏览您的网站时，所有内容似乎都会立即加载。但是，您所做的只是将每个部分的小加载时间转移到一个巨大的前期加载时间。如果访问者可能只浏览您网站的一个区域，他们仍然需要为整个网站的加载时间付费，而不仅仅是他们访问的部分。

实现小加载时间的最简单方法是将每个部分拆分为自己的页面，然后仅加载您在该页面上显示的内容。Javascript 和 CSS 等资源通常可以很好地缓存，因此您通常无需担心它们的加载时间会影响主页以外的任何内容。

或者，假设您希望将整个网站保留在一个页面上，您需要使用 Javascript 将各个子部分动态添加到页面，一旦您的主页所需的所有内容都完成加载并且进度条已隐藏。是的，如果访问者快速点击一个子部分，他们会看到其内容正在加载，但如果他们只对您的“联系我”部分感兴趣，他们将能够更快地获得他们需要的信息甚至没有注意到其他部分尚未完全加载。

那，并且不要使用巨大的背景图像。可以将较低分辨率的图像放大以填满屏幕，并提高 JPEG 压缩级别以减小文件大小。它是背景图像，不应成为焦点 - 将高分辨率图像留给您的作品集。:)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-21T10:30:21.243

Chrome 有[一个控制台](https://developers.google.com/chrome-developer-tools/docs/network?hl=us)，您可以在其中查看网站的加载时间以及所有需要下载的内容。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-12-21T10:31:45.913

将 FireBug 插件安装到 FireFox，然后在 FireBug 中打开 NET 选项卡加载您的站点。您可以查看每个资源加载所需的时间。

看起来有两个背景图像需要 20 多秒才能加载。

**更新**

自从我发布这篇文章以来，世界已经发生了很大变化。Chrome 现在提供了一个审核选项卡，使您能够模拟一系列设备和网络速度等，以及网络、性能和内存分析器。灯塔插件[https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=en](https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=en)也不错。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-01-01T00:50:27.527

It a long reply ... but I feel it provides enough details to some basic approaches to improve a site's performance. The following answer will also be applicable to almost any site. Any specific examples provided below might be for current version of [http://www.jj-triggs.com/](http://www.jj-triggs.com/)

In the points below, I'm referring to the usage of Net Panel of Firebug add-on in Firefox but other browsers also have similar tools with almost the same approach as I have mentioned.

Install Firebug on Firefox and open your website. Enable Firebug for your site (F12). Enable Firebug's Net panel if it is not enabled already.

Your site: [http://www.jj-triggs.com/](http://www.jj-triggs.com/) - takes 5-6 seconds on my system for repeat visits (For this answer, I have not mentioned approaches to improve on this) - but the first visit took around 60 seconds. (The points below focus on how to improve on that) Most of the points mentioned below would improve your site for the first load (or fresh reloads)

After having loaded the page already, to test fresh loads, you can use Ctrl+F5, Ctrl+R, Ctrl+Shift+R (depending on the browser). Monitor the Net Panel of Firebug when the page is loading.

# How much time a site takes depends on:

```
- The speed of the site host server (seems OK, nothing much to do for now)

- Visitor's connection speed (cannot do anything for it)

- Everything else (where you need to fix many things).
  The important approaches to resolve them are listed below:
    - Serve the user files with less size but same content:
        - Approach:
            Enable gzip on files which contain text contents (*.js, *.css, *.html etc) (currently your site does not use gzip)
        - How to identify:
            In Net panel, expand the HTTP request details for a file, in the Headers tab of the expanded details, Content-Encoding field should show the value gzip.
        - Solution:
            It might need you to modify .htaccess file (or some other approach based on the server)
            Search on Google or StackOverflow to see how to enable it.

        - Approach:
            Use minified JS and CSS files
        - How to identify:
            In Net panel, expand the HTTP request details for a JS/CSS file, in the Response tab of the expanded details, the code should be a minified version (no whitespace characters) of the file.
        - Solution:
            Use either the minified JS/CSS files as provided by the library.
            Or you can minify them yourself by using tools like "JSMin" or "YUI (CSS and JS) Compressor"

    - Approach:
        - Serve the user optimum images, i.e., less size with good enough quality
    - How to identify:
        - In Net Panel, go to Images tab > Sort by size
        - Generally the size of the images should be ... 1kb to 30kb for simple icons and logos and 20kb to 250kb for photos and large backgrounds.
    - Solution:
        - Compress the large images with softwares like GIMP (free) or Photoshop.

    - Approach:
        - Load the files from a CDN if possible
        - eg: Load jQuery, jQuery UI etc from popular but still free CDN
        - Advantage even for first visit: If the user has visited any other site which refers to the same path, it would be fetched from the cache itself
    - How to identify:
        - Check the Net panel's "Domain" column for popular libraries like jQuery, jQuery UI etc.
          They should be getting loaded from a popular CDN such as Google.
    - Solution:
        - Include JS and CSS from (Google) CDN if available.

    - Approach:
        - Load CSS before JS
        - It may not necessarily help much with faster loading completion,
          but it usually gives a faster feeling of load because your CSS gets applied as soon as possible.
    - How to identify:
        - Check the Timeline column in Net panel. Usually CSS files should be the getting loaded before JS.
    - Solution:
        - Move the <script> tags towards the bottom of the page.

    - Approach:
        - Wherever possible, load third-party components like Google Maps dynamically after the page load has completed
    - How to identify:
        - Check the Timeline column in Net panel. The 3rd-party components should usually begin loading after almost all the other code for the site has loaded.
    - Solution:
        - The solution would depend on the third-party component and might be a bit tricky.
          Generally, loading the 3rd-party JavaScript after a small delay (using window.setTimeout and code to dynamically add script tags) would provide you better performance compared to loading the 3rd-party JS using plain HTML. 
```

I believe fixing these mentioned issues might reduce your (http://www.jj-triggs.com/) first load time to 10-30% of the time it takes currently.

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-01-01T00:05:23.287

所以：是的，您确实需要修复您的网站。人们不会等待加载网站，尤其是个人/专业网站。我在您的网站上看到的最重要的事情是几乎不存在图像压缩/优化。以下是一些指导方针：

**将 JPEG 用于照片和渐变。对线条艺术或文本使用 PNG（或 GIF）**。这与用于每种类型图像的压缩算法有关。

通常**80% 的 JPEG 压缩率**对于网络上的大多数图像来说是相当不错的，包括你所有的缩略图/画廊照片。例如，这里的 JPEG：[http](http://www.jj-triggs.com/images/page4_img3.jpg) ://www.jj-triggs.com/images/page4_img3.jpg 是 25k。25k！！！那是巨大的，页面上有 15 个！在 80% 的压缩率（7k 的图像大小）下，我可以检测到一些[压缩伪影](https://en.wikipedia.org/wiki/Compression_artifact)，但我也是一名专业设计师并且正在寻找它。即使在 85% 时，图像大小也会下降到大约 8k。

同上您的背景图像。bg_img1.jpg 的时钟频率约为 900k；bg_img2.jpg 为 1.5 mb。这太疯狂了！特别是因为城市景观已经部分模糊 - 没有细节可以保留，这保证完全缺乏 JPEG 压缩。我将 bg_img2.jpg 的压缩率降低到 60%，文件大小为 <200k，质量几乎没有可检测到的差异：[https ://d3vv6lp55qjaqc.cloudfront.net/items/1y3V2B2r0S1W0T1i081n/cityscape-compressed.jpg?X- CloudApp-Visitor-Id=695722fcc5cecec10f09e16181dbdf5f&v=3cf18008](https://d3vv6lp55qjaqc.cloudfront.net/items/1y3V2B2r0S1W0T1i081n/cityscape-compressed.jpg?X-CloudApp-Visitor-Id=695722fcc5cecec10f09e16181dbdf5f&v=3cf18008)。

有时，当图像是内容/网站的焦点时，它可以大一点压缩少。但是您的背景和画廊中的这些图像并不重要：它们是背景图像。它们不是用来研究的。画廊图像同上；他们只是让用户了解他们在下次点击时会得到什么。

**使用选择性 JPEG 压缩。**Adobe Fireworks 提供了这一功能 - 如果您有一张大图像，其中一部分清晰且清晰，但其余部分模糊或将被内容覆盖，您可以选择一个您想要更高 JPEG 压缩率的区域（例如 85% ) 并将图像的其余部分降低到 50% 或其他。例如，这里是具有选择性 JPEG 选择的 Cityscape [https://d3vv6lp55qjaqc.cloudfront.net/items/2V1I1o0B1H0v2O141w1R/cityscape-compressed-selective.jpg?X-CloudApp-Visitor-Id=695722fcc5cecec10f09e16181dbdf5f&v=375e11ed](https://d3vv6lp55qjaqc.cloudfront.net/items/2V1I1o0B1H0v2O141w1R/cityscape-compressed-selective.jpg?X-CloudApp-Visitor-Id=695722fcc5cecec10f09e16181dbdf5f&v=375e11ed)。对焦部分为 75%；其余为 50%，开启平滑。

**不要将图形用于文本。**在 TypeKit、Google Webfonts 和通过 CSS 进行合理的排版控制的今天，几乎没有必要这样做。

**减少需要传输的文件数量。**除了下载时间之外，每个图像、JavaScript 文件、CSS 文件等都需要自己的 HTTP 请求。

这里有几篇关于图像压缩和下载时间的文章：

*   [http://www.noupe.com/design/everything-you-need-to-know-about-image-compression.html](http://www.noupe.com/design/everything-you-need-to-know-about-image-compression.html)
*   [http://www.uxbooth.com/articles/speed-up-your-website-with-better-image-optimization-in-photoshop/](http://www.uxbooth.com/articles/speed-up-your-website-with-better-image-optimization-in-photoshop/)
*   [http://www.uxbooth.com/articles/how-to-minimize-load-time-for-fast-user-experiences/](http://www.uxbooth.com/articles/how-to-minimize-load-time-for-fast-user-experiences/)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-12-21T10:39:06.817

我对改善加载时间的建议很少：

1.  您正在使用三个背景图像，而只显示了一个。删除其他两个或稍后加载它们。
2.  将 PNG 图像转换为 JPEG，看看是否可以节省大小。
3.  从 cdn 存储库加载标准 JavaScript 文件，而不是从您的服务器加载它们。该文件很有可能在其缓存中找到。
4.  如果您还没有这样做，请在连接它们之后缩小您的 JavaScript 文件。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-12-21T10:47:12.213

使用Firefox`YSlow` [插件](https://addons.mozilla.org/en-US/firefox/addon/yslow/)。它将为您提供有关各种性能桶的详细分析。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-01-04T13:27:59.623

你可以试试这个[网站](http://www.gomez.com/Instant-Test)和[pingdom](http://tools.pingdom.com/fpt/)，在那里你可以检查你网站的每日性能

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-12-21T10:45:13.567

你也可以在这里检查一下： [测试站点](http://www.monitoring-transactionnel.com/outils-gratuits/ee70a1b51b5ba741a2fc95dba07e7d2d2441073a)

该测试表明您的图像是加载时间的重要贡献者。特别是似乎未优化且重量为 1.4 MB 的背景图像

研究这个，减少你的请求数量，缩小你的图像，推迟加载，你应该开始减少你的加载时间

免责声明：我是上述免费工具中涉及的开发人员之一

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-01-05T14:58:24.870

此页面上的主要问题是大图像 bg_img1.jpg、bg_img2.jpg 和 bg_img3.jpg。它们的大小在 0.91MB 和 1.45MB 之间。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-08-02T14:00:51.793

Firefox/Chrome/IE - 按 F12，打开开发者面板，您应该可以在其中找到网络面板。

或尝试：[http ://tools.pingdom.com/fpt/](http://tools.pingdom.com/fpt/)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-08-02T17:54:28.707

在这种情况下，我会使用 Chrome 和开发工具栏（网络选项卡）来查看重元素是什么。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-07-30T03:38:43.210

每个人都在提到与网络流量相关的问题，但页面加载也可能是由于 JavaScript。这是我在该主题上学到的一些技巧...

Chrome 开发者工具在浏览器中内置了一个分析器。您可以通过打开开发人员工具、单击配置文件、单击开始并执行您想要的任何任务来启动它。

此分析器将告诉您应用程序时间花费在哪里以及哪些功能占用了您的大部分时间。

由于 JavaScript 是单线程的，如果您在应用程序“init”上执行大量操作，那么您的页面将在短时间内无响应。你怎么知道是否有一些 JS 阻塞了？好吧，主要症状是当您滚动鼠标滚轮或单击某些东西时，在页面加载的一段时间内没有任何反应。

在此期间，您的滚动事件和点击会发生什么？好吧，他们被放置在事件队列中。只要其他 JavaScript 没有执行，就会调用事件队列。通常，这些问题的原因可以通过在 JS 调试器中单击“暂停”按钮并探索堆栈跟踪来由根追溯……是的，这就是执行速度有多慢！

以下是一些问题/解决方案

## 问题：页面无响应，页面加载

通常有 2 种方法可以解决这些问题： - 首先（不太好，但通常是合理的方法）您可以在页面加载时执行可能在 for 循环中运行的昂贵操作，然后将它们放入`setTimeout(fn, 0)`. 注意：0 实际上是 4 毫秒或 5 毫秒，您的操作会被扔到事件队列中。这可以让您的应用程序的更多部分在需要进行大量繁重工作之前加载。- 其次，以这样一种方式构建您的应用程序，即这些操作仅在需要时运行，而不是将所有内容都放在“就绪”或“加载”页面中。这在很大程度上是一种预防措施或重构。通常很难解开这些类型的问题。

## 问题：点击/交互很慢（页面加载后）

您通常可以通过更好地委派活动来解决此问题。事件冒泡是 JS 中每个人都应该知道的。简而言之，想想 1 个对象上的点击事件实际上是如何在包含该对象的每个父级上发生的点击。委托使用这一事实允许您为许多执行类似/相同操作的 DOM 元素创建 1 个处理程序。阅读 jQuery`on`方法的文档，真正关注如何使用`filter`参数，以及`e.currentTarget`vs `e.target`vs`this`是什么。

## 问题：等待初始 AJAX 调用的时间过长

解决此问题的一种方法是更快地发出 AJAX 请求。您可以将请求放在页面加载但在页面准备好之前。然后，您的请求将与正在加载的其余页面资产并行化。

## 问题：JS文件太多

现在人们使用模块系统（查看 AMD 和 CommonJS），但解决网络流量过多导致页面加载延迟的最基本方法是对所有 JS 文件进行分类。现在，如果你有 100k 行 JS，那么你将遇到相反的问题（编译 JS 耗时太长，你需要拆分文件）。通常，将所有内容捆绑在一起是一种快速解决方案。您还可以将网络流量划分到多个子域。这将允许您并行化更多下载。我相信浏览器现在每个域的下载上限为 6 次。CDN 也会对此有所帮助。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-01-22T22:30:18.183

虽然这是一个较老的问题，但我想再推出一款出色的免费工具，可用于查找网站的性能问题。

Compuware 的 (dnyaTrace) AJAX 免费版工具帮助我解决了过去在我的几个网站上遗漏的一些问题……我记得我在使用该工具时发现了一个缓存问题（与 htaccess 相关），以及其他一些很棒的技巧。

无论如何，它目前可以在这里下载：http: [//www.compuware.com/en_us/application-performance-management/products/ajax-free-edition/overview.html](http://www.compuware.com/en_us/application-performance-management/products/ajax-free-edition/overview.html)

# c# - 使用紧凑框架 3.5 从数据网格中检索数据

> ID：13988372
> 
> 赞同：4
> 
> 时间：2012-12-21T10:28:50.000
> 
> 标签：c#, datagrid, compact-framework, smart-device

我正在构建一个移动应用程序，它允许操作员在现场管理他们的工作。我正在使用数据网格来显示用户作业列表。用户将能够通过选择 gridview 行并通过组合框为其分配状态来接受或拒绝工作。

为此，我需要为数据网格的选定行获取单元格 9 (JobID) 的值。因为我使用的是 .NET Compact 框架，所以我无法访问某些属性，例如 SelectedRow。我整个上午都在网上搜寻指针，但我发现的大多数示例都是针对 .NET 框架，而不是 .NET Compact Framework。这对我一点帮助都没有，因为所有示例似乎都引用了 System.Web.UI，我被认为不适用于 .NET CF

谁能给我任何建议以实现智能设备应用程序。所有帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T10:37:43.697

我将使用`CurrentCell`数据网格上的属性来确定具有焦点的行，然后从该行中选择所需的值。

```
int row = dgJobList.CurrentCell.RowNumber;
int column = 9;
string cellValue = dgJobList[row,column].toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T15:07:40.850

thank you @mattias. As a VB .net user I will give my own code to do the same thing.

```
dim rom as integer

dim column as integer

dim cellvalue as string

row = dgJobList.CurrentCell.RowNumber

column = 9

cellValue = dgJobList(row,column).toString() 
```

You can use `ctype()` to get the content of the cell with a specific type.

# html - 为什么我的文本会淡入，但我的 html 画布对象不会？

> ID：13988379
> 
> 赞同：1
> 
> 时间：2012-12-21T10:29:35.053
> 
> 标签：html, css, html5-canvas, fadein

这是我的代码：http: [//jsfiddle.net/7y9Gp/2/](http://jsfiddle.net/7y9Gp/2/)

我仍然不确定出了什么问题。我可以淡入文本或图像（包括淡出），但无论我尝试什么，我的画布对象都不会这样做。任何帮助，将不胜感激！我什至用文本（在代码中）切换了画布位置，但没有。有没有一种特殊的方法可以淡入画布对象？

## HTML：

```
<head>
    <script src="http://code.jquery.com/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function() {
    $('#picOne').delay(1000).fadeIn(2000).delay(2500);
    $('#picTwo').delay(500).fadeIn(2500).delay(2000);
    $('#picThree').delay(4000).fadeIn(2500).delay(2000);

});
</script>
</head>
<body>

<div id="pics" align="center">
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr>

<td valign="middle" align="center">
<table cellpadding="0" cellspacing="0" border="0">

        <tr>
        <td align="center" valign="middle"><font size="200" id="picOne" color="black">SOME TEXT</font></td>
        </tr>

        <tr><td align="center" valign="middle">        

            <script type="text/javascript" src="http://hakim.se/experiments/html5/trail/01/js/three.js"></script>
<script type="text/javascript" src="http://hakim.se/experiments/html5/trail/01/js/trail.js"></script>

<div id="picTwo">
<canvas width="640" height="480" id="my-image"></canvas>
</div>
</td>
        </tr>

</table>
</td>
</tr>
</table>

</div> 
```

​</p>

## CSS：

```
#picOne, #picTwo {
position:relative;
display: none;
float:center;
    top: 280px;
    left: 0px;
    z-index: 1;
}

#pics {
}

#my-image {
  position: absolute;
    top: 0px;
    left: 0px;
    z-index: 3;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:09:17.687

演示：http: [//jsfiddle.net/7y9Gp/11/](http://jsfiddle.net/7y9Gp/11/)

您希望在 中找到画布`div#picTwo`，但`trail.js`或`three.js`创建自己的画布（或类似的东西 - 我没有看更深）。所以，如果你要更换：

```
$('#picTwo').delay(500).fadeIn(2500).delay(2000); 
```

和

```
$('canvas').delay(500).fadeOut(2500).delay(2000); 
```

它可以正常工作（`fadeIn`替换为`fadeOut`只是为了表明它可以工作，因为默认情况下它是可见的并且淡入淡出将没有效果）

所以，基本上唯一的问题是你试图`fadeIn`/`fadeOut`错误的对象。

# c++ - 在 C++ 中通过引用传递数组

> ID：13988383
> 
> 赞同：1
> 
> 时间：2012-12-21T10:29:42.700
> 
> 标签：c++, arrays, reference, pass-by-reference

> **可能重复：**
> [对数组的引用参数有什么用处？](https://stackoverflow.com/questions/2188991/what-is-useful-about-a-reference-to-array-parameter)
> [如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

我正在尝试通过引用传递数组。问题是我在传递这些数组时遇到错误。

> 错误 C2664：“InitializeArrays”：无法将参数 1 从“int [64]”转换为“int (&)[]”

这是代码：

```
void InitializeS(int (&s)[], int (&BeforeDecimal1)[]);

int main()
{
   int BeforeDecimal[128],s[128];

   InitializeS(s,BeforeDecimal);

   return 0;
}

void InitializeS(int (&s)[], int (&BeforeDecimal1)[])
{
    for(int i=0;i<128;i++)
    {
        s[i]=0;
        BeforeDecimal1[i]=0;
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:32:30.800

在 C++ 中，与在 C 中不同的是，没有兼容类型的概念，并且类型 T[] 与 T[N] 无关。您需要使引用具有大小，并且大小必须等于您传递的数组之一。

C++ 还禁止将无边界数组的引用作为函数参数类型（可能是因为这个原因）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T10:41:52.760

### 为什么你的不起作用

“数组”函数参数语法`void foo(int array[])`具有误导性，因为它与数组无关。对于. *_* _`void foo(int* array)`

因此，`void foo(int (&array)[])`不做你认为它做的事。它甚至不等于`void foo(int*& array)`. 事实上，语法根本不存在。

* * *

### 通过引用传递数组

*真正的数组有维度，而这些维度*是静态类型的一部分（你看到`int[]`的任何“类型”要么将其用作*不完整的类型*，要么只是其他东西的语法糖），所以你需要声明具有以下类型的维度：

```
void foo(int (&array)[5]) 
```

或使用模板：

```
template <size_t N>
void foo(int (&array)[N]) 
```

* * *

### 如果我做不到怎么办？

如果您在编译时不知道维度，那么您就是 SOL，必须使用 a`std::vector`代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:43:12.500

正如 FredOverflow 所建议的，您需要使用模板来实现此功能。

这是实现它的一种方法：

```
template<int S1, int S2> void InitializeS(int(&)[S1], int(&)[S2]);

int main()
{
   int BeforeDecimal[100],s[50];

   InitializeS(s,BeforeDecimal);

   return 0;
}

template<int S1, int S2> void InitializeS(int (&s)[S1], int (&BeforeDecimal1)[S2])
{
    for(int i=0;i<128;i++)
    {
        s[i]=0;
        BeforeDecimal1[i]=0;
    }
} 
```

请注意，这仅在数组的大小在编译时已知的情况下才有效。

# javascript - 需要更换方法的帮助

> ID：13988398
> 
> 赞同：0
> 
> 时间：2012-12-21T10:30:19.713
> 
> 标签：javascript, regex

下面的代码是做什么的？请逐行解释。

```
 x="c_name";
 y=x.replace(/^\s+|\s+$/g,""); 
```

如果只给出 x.replace(/^\s/) ，则替换方法将替换字符串开头的空格字符。但是那些添加参数的含义/是什么？是否“|” 在替换方法中的意思是“或”？请逐行解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:32:39.210

```
 y=x.replace(/^\s+|\s+$/g,""); 
```

意思如下：

*   [要么 ( `|`)](http://www.regular-expressions.info/alternation.html)：
    *   匹配字符串开头的[一个或多个 ( `+`)](http://www.regular-expressions.info/repeat.html)`^\s+`空格 ( )
    *   或字符串末尾的一个或多个空白字符 ( `\s+$`)

并用任何东西代替它们。

该`g`标志意味着它会替换所有匹配项，而不仅仅是第一个匹配项。

也就是说，它会修剪字符串开头和结尾的空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:32:43.227

它在字符串的开头或结尾删除任意数量的空格。

它可以读作

*   `^\s+`: 开头的一些空格
*   `|`： 或者
*   `\s+$`: 最后一些空格
*   `g`： 他们全部

请参阅[MDN 文档中的正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

它可能在您的代码中，因为一些旧浏览器（IE8-）没有[修剪](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:35:53.060

从[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)：

> `^`- 匹配输入的开头。
> `\s`- 匹配单个空白字符，包括空格、制表符、换页符、换行符和其他 unicode 空格。
> `x|y`- 匹配 x 或 y。
> `+`- 匹配前一项 1 次或多次。
> `$`- 匹配输入的结尾。

所以它基本上是旧浏览器的[trim()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)函数。

# grails - 如何使用grails导出插件放置pdf的标题中心？

> ID：13988400
> 
> 赞同：0
> 
> 时间：2012-12-21T10:30:25.427
> 
> 标签：grails, grails-plugin, grails-controller

我在 grails 中使用 export-plugin 导出了 pdf。现在我的问题是将标题放在pdf的中心。我需要在控制器中编写什么代码来对齐这个标题中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T09:03:44.613

```
def export={
def data = userService.list(params)
if(params?.format && params.format != "html")
{
response.contentType = grailsApplication.config.grails.mime.types[params.format]
response.setHeader("Content-disposition", "attachment; filename=${params.controller}.${params.extension}")
List fields = ["username","email","clientName","role","status","timeZone"]
Map labels = ["username": "User Name","email":"Email ID","clientName":"Client Name","role":"Role","status":"Status","timeZone":"Time Zone"]
// Formatter closure
def upperCase = { domain, value -> return value.toUpperCase() }
Map formatters = [name: upperCase]
Map parameters = ["column.widths": [0.3, 0.4,0.2,0.3,0.3,0.3]]
exportService.export(params.format, response.outputStream, data.exportData, fields, labels,   formatters,parameters)
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T08:57:39.637

您可以通过不使用 grails 导出标签来自定义图标，但您可以简单地创建自己的导出控制器，然后您可以调用 grails 导出的导出服务以使用以下参数实现您的目标

# jquery - Bootstrap Typeahead 仅显示 1 个字符

> ID：13988404
> 
> 赞同：1
> 
> 时间：2012-12-21T10:30:51.093
> 
> 标签：jquery, twitter-bootstrap, bootstrap-typeahead

好的，我已经阅读了有关此问题的所有其他帖子，并尝试了大约 30 种不同的已发布解决方案，据称这些解决方案对我有用，但它们都不适合我:(

首先关闭一些版本：

引导程序 - 2.2.2，jQuery - 1.8.3，jQuery UI - 1.9.2

输入小写或大写 O 时，我的 XHR 请求返回以下 JSON 对象：

```
[
   {"member_id":"6","name":"Jon Jones","member_group":"Default Group"},
   {"member_id":"2","name":"Vince Kronlein","member_group":"Default Group"}
] 
```

我的 typeahead 块如下所示：

```
$('.ajax-typeahead').typeahead({
   source : function(query, process) {
      return $.get('community/member/autocomplete', {
         filter_name : query
      }, function(data) {
         return process(JSON.stringify(data));
      });
   },
   property : 'name'
}); 
```

因此，当我开始输入时，在本例中为字母“O”，我得到一个如下所示的下拉列表：

```
o
o
o
o
o
o
o 
```

七个 O 对应于字母 O 在整个对象中出现的总次数，但很明显，这不是我想要的。

我不明白的另一件事是我只能输入一个字母并且下拉菜单消失了。该请求在每次按键时发送并返回每个请求的对象，但自动完成功能停止工作。

需要有人让我了解这里到底出了什么问题。

非常感谢。

-V

# android - 如何打开android日历应用程序并跳转到指定日期？

> ID：13988405
> 
> 赞同：5
> 
> 时间：2012-12-21T10:31:04.537
> 
> 标签：android, calendar

我想从我的应用程序中打开日历并将参数“日期”传递给这个日历。

这个日历将显示日期的相应日期页面。

我调查了 calendar 的源代码，但没有找到使用方法。

```
public static void openCalendarApp(Context context)
{   
    Intent intent = context.getPackageManager().getLaunchIntentForPackage("com.android.calendar");
    context.startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:38:03.573

您可以使用[日历视图](http://developer.android.com/reference/android/widget/CalendarView.html)来执行此操作...使用该`setDate(long date)`方法将日历上的日期设置为您想要的日期

您也可以通过像这样将事件添加到日历来做到这一点

创建日历的意图

```
Intent calIntent = new Intent(Intent.ACTION_INSERT);
calIntent.setData(CalendarContract.Events.CONTENT_URI);
startActivity(calIntent) 
```

播种日历日期和时间

```
Intent calIntent = new Intent(Intent.ACTION_INSERT);
calIntent.setType("vnd.android.cursor.item/event");
calIntent.putExtra(Events.TITLE, "Title here");
calIntent.putExtra(Events.EVENT_LOCATION, "Location here");
calIntent.putExtra(Events.DESCRIPTION, "Description here");
GregorianCalendar calDate = new GregorianCalendar(2012, 7, 15);
calIntent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, true);
calIntent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME,
     calDate.getTimeInMillis());
calIntent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME,
     calDate.getTimeInMillis());
startActivity(calIntent); 
```

可以在[这里看到一个例子](http://mobile.tutsplus.com/tutorials/android/android-essentials-adding-events-to-the-user%E2%80%99s-calendar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T10:51:31.043

以下是同时支持新旧版本 Android 的方法：

```
@SuppressWarnings("deprecation")
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
public static Intent prepareIntentForCalendar(final Context context, final Date date) {
    Intent intent = null;
    if (VERSION.SDK_INT >= VERSION_CODES.ICE_CREAM_SANDWICH) {
        // go to date of the calendar app, as shown here:
        // http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-view
        final Uri.Builder builder = CalendarContract.CONTENT_URI.buildUpon();
        builder.appendPath("time");
        ContentUris.appendId(builder, date.getTime());
        intent = new Intent(Intent.ACTION_VIEW).setData(builder.build());
        final PackageManager pm = context.getPackageManager();
        final ResolveInfo resolveActivity = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY
                | PackageManager.GET_RESOLVED_FILTER);
        if (resolveActivity == null)
            return null;
    } else {
        intent = new Intent(Intent.ACTION_EDIT);
        intent.setClassName("com.android.calendar", "com.android.calendar.AgendaActivity");
        intent.putExtra("beginTime", date.getTime());
        final PackageManager pm = context.getPackageManager();
        final ResolveInfo resolveActivity = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY
                | PackageManager.GET_RESOLVED_FILTER);
        if (resolveActivity == null)
            intent = null;
    }
    if (intent != null)
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_NO_HISTORY
                | Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET | Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
    return intent;
} 
```

# jsf - h:selectBooleanCheckbox 第一次不起作用

> ID：13988407
> 
> 赞同：0
> 
> 时间：2012-12-21T10:31:24.287
> 
> 标签：jsf, primefaces

我想根据复选框的值制作一个输出文本；这是我的代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">

<body>
    <ui:composition template="../WEB-INF/templates/template.xhtml">
        <ui:define name="content">
            <h:form id="formModifClt">
            <h:outputText value="voulez-vous modifier cette image ?"/>
            <h:selectBooleanCheckbox value="#{clientController.modifierImage}" >
            <f:ajax event="click" listener="#{clientController.onChangeCheckBox()}" render="textPanel" />
            </h:selectBooleanCheckbox>
            <p:outputPanel id="textPanel" autoUpdate="true" >
            <h:outputText value="Oui" rendered="#{clientController.modifierImage}" />
            <h:outputText value="Non" rendered="#{!clientController.modifierImage}" />
            </p:outputPanel>
        <p:outputPanel autoUpdate="true" >
        <h:outputText value="Logo" rendered="#{clientController.modifierImage}" id="logo" />
        <p:fileUpload id="up" fileUploadListener="#{fileUploadController.handleFileUpload}"  
                  mode="advanced" 
                  sizeLimit="100000" 
                  required="true"
                  allowTypes="/(\.|\/)(gif|jpe?g|png)$/" rendered="#{clientController.modifierImage}"/>
        </p:outputPanel>
        <p:commandButton action="#{clientController.modifClient()}" value="Modifier" ajax="false"/>
            </h:form>
        </ui:define>

    </ui:composition>
</body> 
```

我的问题是用户第一次单击复选框时，值没有改变，并且 onChangeCheckBox() 没有工作。从第二次开始，它工作正常。注意：我不想在 javascript 中执行此操作，因为我根据布尔复选框完成了其他处理。

这是我的控制器：

```
public void onChangeCheckBox () {
    System.out.println("modifierImage="+modifierImage);
}

 /**
 * @return the modifierImage
 */
public boolean isModifierImage() {
   return modifierImage;
}

/**
 * @param modifierImage the modifierImage to set
 */
public void setModifierImage(boolean modifierImage) {
    this.modifierImage = modifierImage;
} 
```

使用balusC的解决方案更好（第一次点击时它不会给出一个检查过的checkButton）但问题仍然存在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:45:04.117

乍一看，我看不到任何特定的事件和任何要重新渲染的组件，那么作为 10 的启动器如何？

```
<h:form>
<h:selectBooleanCheckbox value="#{clientController.modifierImage}" >
                 <f:ajax event="click" listener="#{clientController.onChangeCheckBox()}" render="textPanel" />
            </h:selectBooleanCheckbox>
            <p:outputPanel id="textPanel" autoUpdate="true">
                <h:outputText value="Yes" rendered="#{clientController.modifierImage}" />
                <h:outputText value="No" rendered="#{!clientController.modifierImage}" />
            </p:outputPanel>
</h:form> 
```

如果需要进一步的帮助，请发布您的控制器类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T07:18:00.560

我发现，有时，它取决于当前页面之前调用的页面！我在 ajax="false" 中制作它们并且效果很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T08:27:34.530

我有同样的问题。在我看来，这是`<h:form>`阻止更新第一次点击的元素。这里的样子：

```
<f:facet name="body">
    <h:form>
      <h:panelGroup id="bodyContainer">
        <h:selectBooleanCheckbox title="#{bundle['some.good.text']}" value="#{bean.checkMe}">
          <f:ajax render="bodyContainer"  />
        </h:selectBooleanCheckbox>
        #{bundle['some.realy.good.text']}  
        <br />
      </h:panelGroup>
    </h:form>
</f:facet> 
```

但是一旦`<h:form>`被删除，一切都恢复了正常。

# android - 膨胀包含片段的布局时出现异常

> ID：13988412
> 
> 赞同：3
> 
> 时间：2012-12-21T10:31:56.540
> 
> 标签：android, android-fragments, layout-inflater

我正在开发一个有趣的[色轮应用程序。](https://play.google.com/store/apps/details?id=org.dobbo.colour)0.5 版有一个由四个片段组成的调色板，一个片段用于色轮上的每个可能的颜色目标。然后根据色轮的模式隐藏或显示片段的 UI 元素。“单色”模式只需要其中一个片段，而“Accented Anaogic”则需要全部四个。当片段作为`onCreate()`方法的一部分被构建和显示时，这项工作会被发现，此后再也不会被触及。

为了下一个版本改进布局，我设计了四个“包含”XML 布局文件，一个只使用片段的一个实例，一个使用两个，依此类推。主 XML 布局文件现在有一个`FrameLayout`点，当模式更改时，我会替换相应的“包含”XML 布局文件。

这是执行更改的代码片段：

```
private void changeLayout(int layoutID) {
    FragmentManager fMgr = getFragmentManager();
    FragmentTransaction transaction = fMgr.beginTransaction();

    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    FrameLayout frame = (FrameLayout) findViewById(R.id.paletteContainer);
    frame.removeAllViews();

    View view = inflater.inflate(layoutID, frame, false);
    frame.addView(view);
    transaction.commit();

    pFrag = (SwatchFragment.Primary) fMgr.findFragmentById(R.id.base);
    a1Frag = (SwatchFragment.FirstAlternate) fMgr.findFragmentById(R.id.alternate1);
    a2Frag = (SwatchFragment.SecondAlternate) fMgr.findFragmentById(R.id.alternate2);
    cFrag = (SwatchFragment.Complementary) fMgr.findFragmentById(R.id.complementary);    
} 
```

它例外如下，因为一个或多个片段正在被重用。那么替换包含片段的部分 UI 的正确方法是什么？

```
E/WheelActivityandroid.view.InflateException: Binary XML file line #11: Error inflating class Navigation item selected: pos=1, id=0x00000001
android.view.InflateException: Binary XML file line #11: Error inflating class fragment
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704) ~[na:0.0]
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:746) ~[na:0.0]
        at android.view.LayoutInflater.inflate(LayoutInflater.java:489) ~[na:0.0]
        at android.view.LayoutInflater.inflate(LayoutInflater.java:396) ~[na:0.0]
        at org.dobbo.colour.activity.WheelActivity.changeLayout(WheelActivity.java:321) ~[na:0.0]
        at org.dobbo.colour.activity.WheelActivity.setMode(WheelActivity.java:307) ~[na:0.0]
        at org.dobbo.colour.activity.WheelActivity.onNavigationItemSelected(WheelActivity.java:181) ~[na:0.0]
        at com.android.internal.widget.ActionBarView$1.onItemSelected(ActionBarView.java:148) ~[na:0.0]
        at android.widget.AdapterView.fireOnSelected(AdapterView.java:892) ~[na:0.0]
        at android.widget.AdapterView.access$200(AdapterView.java:49) ~[na:0.0]
        at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:860) ~[na:0.0]
        at android.os.Handler.handleCallback(Handler.java:725) ~[na:0.0]
        at android.os.Handler.dispatchMessage(Handler.java:92) ~[na:0.0]
        at android.os.Looper.loop(Looper.java:137) ~[na:0.0]
        at android.app.ActivityThread.main(ActivityThread.java:5039) ~[na:0.0]
        at java.lang.reflect.Method.invokeNative(Native Method) ~[na:0.0]
        at java.lang.reflect.Method.invoke(Method.java:511) ~[na:0.0]
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) ~[na:0.0]
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) ~[na:0.0]
        at dalvik.system.NativeStart.main(Native Method) ~[na:0.0]
Caused by: java.lang.IllegalArgumentException: Binary XML file line #11: Duplicate id 0x7f0a000b, tag null, or parent id 0x7f0a0010 with anoth
er fragment for org.dobbo.colour.fragment.SwatchFragment$Primary
        at android.app.Activity.onCreateView(Activity.java:4722) ~[na:0.0]
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680) ~[na:0.0]
        ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:20:41.097

> 它例外如下，因为一个或多个片段正在被重用

是的，例外来自膨胀新布局，该布局具有与布局中已经存在的片段相同的 id（最有可能）的片段。为避免这种情况，您有多种选择，例如：

您可以使用`FragmentManager`来查找当前存在的片段并将它们从布局中删除，然后再用片段填充新布局。例如，如果您当前只有一个片段的布局，并且您想用两个片段膨胀布局，那么您将首先删除两个布局中存在的片段：

```
getSupportFragmentManager().beginTransaction().remove(getSupportFragmentManager().findFragmentById(R.id.fragment1)).commit();
getSupportFragmentManager().executePendingTransactions();
mContainer.removeAllViews();
// inflate thew new layout 
```

但如果我处于你的情况，我不会使用它（主要是因为你在搞乱静态片段，你不应该这样做）。现在，我不知道您将如何放置这些片段，但拥有一个包含占位符容器的主布局（简单）会更有意义（并且可以让您在未来避免其他与片段相关的问题`FrameLayouts`）对于每个片段（所有片段都将在`onCreate`方法，这样您就可以避免在每次用户更改布局时恢复它们）。这样，您在运行时所要做的就是隐藏所需的片段，并在必要时修改包装容器的参数。如果活动将面临配置破坏（如旋转手机时），您还将获得免费的片段管理（维护片段状态也将非常容易）。

# symfony - Symfony2 验证在树枝模板中选中了一个表单复选框

> ID：13988413
> 
> 赞同：4
> 
> 时间：2012-12-21T10:31:59.877
> 
> 标签：symfony

我在验证树枝模板中的复选框时遇到问题。在树枝中，我想这样做：

```
{% for activity in form.activity %}
    {% if (activity.isChecked) %}
    <div>
        {{ form_widget(activity) }}
        {{ form_label(activity) }}
    </div>
    {% endif  %}
{% endfor %} 
```

活动是表单构建器中的实体字段：

```
->add('activity', 'entity', array(
            'class'         => 'AcmeProspectionBundle:Activity',        
            'expanded'      => true,
            'multiple'      => true,
            'property'      => 'name',
/*
            'query_builder' => function(EntityRepository $er) use($options) {
                return $er->createQueryBuilder('ac')
                ->leftJoin('ac.company','c')
                ->where('c = :id')
                ->orderBy('ac.name', 'ASC')
                ->setParameter('id', $options['company_id']);
            }
*/
)) 
```

事实上，如果我不注释*query_builder*部分，它只会生成选中的部分，但如果我这样做，Symfony 会检查原始数组和提交数组的完整性。我无法添加任何新活动。事实上，我通过 javascript 生成选择，如下所示：

```
 <div class="activity_checkbox" data-prototype='<div>
 <input type="checkbox" checked="checked" value="100" placeholder="" name="acme_prospection_company[activity][]">
 <label></label></div>'> 
```

因为我有超过 3000 个选择，我不能使用原始复选框或选择让用户这样做。所以现在所有的工作都完成了，只需要渲染选中的活动。我不知道怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-14T13:02:21.477

对于复选框，您应该使用：

```
{% if form.activity.vars.data %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:51:42.433

要访问表单对象中的值，一般解决方案是：

```
{{ form.vars.value.NAME }} 
```

使用 dump 方法，您可以输出所有可用的表单对象：

```
{{ dump(form.vars.value) }} 
```

它也记录在书中：[http ://symfony.com/doc/current/book/forms.html](http://symfony.com/doc/current/book/forms.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-11T02:14:17.027

这是一个非常晚的响应，但其他人可能会遇到这个问题，这是我看到的与集合中表单中的布尔数据相关的唯一条目。这在 Symfony 4 中对我有用，它使用一个名为“组织”的布尔属性“isRole”，它是集合的一个元素。使用的表单类型是 CollectionType（不是 EntityType）。但是，我认为它应该在两种情况下都有效：

```
{% for organization in form.organizations %}
   {% if (organization.isRole.vars.data) %}
       ...
   {% endif %}
{% endfor %} 
```

无需使用 ==，因为数据结果已经是布尔结果。

# python - 向用户读取文档行（python）

> ID：13988421
> 
> 赞同：2
> 
> 时间：2012-12-21T10:32:20.847
> 
> 标签：python

我正在尝试编写一个程序来向用户读取 5 行文本文档，但我无法让它工作。它当前打印第 4 行和第 5 行以及它们每个人的“\n”（新行）。这是代码：

```
filename = 'text_file_example.txt'
myfile = open(filename,'r')
myfile.readlines(5)
print(myfile.readlines(5))
myfile.close() 
```

在 for(range 5) 循环中读取一行会更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:36:57.630

您正在使用的内置函数`readlines()`执行以下操作（[来自官方文档](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects)）：

> `f.readlines()`返回一个包含文件中所有数据行的列表。如果给定一个可选参数`sizehint`，它会从文件中读取那么多字节以及足够多的字节来完成一行，并从中返回这些行。

也许您可能想这样做：

```
filename = 'text_file_example.txt'
myfile = open(filename,'r')
file_lines = myfile.readlines()
for line in file_lines[:5]: 
    print(line)
myfile.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:35:39.247

`readlines()`返回**所有**行的列表，因此您可能应该这样做：

```
lines=myfile.readlines()[:5] 
```

但由于它加载所有行，因此内存效率不高。

因此，这里更好的解决方案是使用`itertools.islice`：

```
list(islice(myfile,5)) # it'll return a list of first five lines,
                       # no need of reading all lines 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:35:55.943

根据[文档](http://docs.python.org/2/tutorial/inputoutput.html)：

```
If given an optional parameter sizehint, 
it reads that many bytes from the file and 
enough more to complete a line, and returns the lines from that 
```

所以你最好的选择是使用 for 循环：

```
for line in myfile.readlines()[:5]:
    print line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:40:11.717

如果要限制读取的行数，请将文件对象用作可迭代对象，然后使用以下命令对行进行*切片*`itertools.islice`：

```
import itertools

filename = 'text_file_example.txt'
with open(filename,'r') as myfile:
    # skip five
    list(itertools.islice(myfile, 5))
    print(*itertools.islice(myfile, 5), sep='', end='')  # print 5, use newlines from file 
```

请注意，我们`print()`使用语法将 5 个读取行作为一系列参数而不是一个对象传递给函数`*`，然后禁用自动空格和换行符；这些行不需要用空格分隔，并且已经包含换行符。

The above code will only *ever* read 10 lines of your file, regardless of how large it is. Calling `.readlines()` will (try to) read the whole file into memory, regardless of size and available memory.

# facebook-graph-api - Feed 对话框 - 'description' 参数的最大长度是多少？

> ID：13988422
> 
> 赞同：0
> 
> 时间：2012-12-21T10:32:29.023
> 
> 标签：facebook-graph-api, dialog, facebook-javascript-sdk

我在文档中找不到描述的最大长度。 [https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

有谁知道？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:57:09.350

描述限制为 1000 个字符，但只会显示 300 个左右（以单词结尾）。`See more...`如果超过 300 个字符，用户必须按下按钮才能查看完整描述。

资料来源：[Facebook 开发者](https://developers.facebook.com/docs/guides/attachments/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:41:03.623

链接的描述（出现在链接标题下方）。如果未指定，此字段将自动填充从链接中抓取的信息，通常是页面的标题。

所以在描述上没有限制。

# javascript - 向其父级禁用事件的子级添加事件侦听器

> ID：13988427
> 
> 赞同：1
> 
> 时间：2012-12-21T10:32:40.620
> 
> 标签：javascript, events, default, parent, children

这里很奇怪。早些时候，我一直在搞乱`touchmove`我正在构建的 iOS webapp 中的默认行为。添加事件侦听器并防止传播很容易，但我需要将默认行为添加回它的其中一个孩子。据我了解，由于父母被禁用，孩子永远不会注册该事件。

所以我需要一个解决方案。

本质上，有很多滑动正在进行，所以默认的身体滚动行为需要被淘汰。滑动时左右滑动的页面令人愤怒。自然，我必须将事件侦听器添加到外部容器中。无法避免。

如何将默认的浏览器控制行为添加回其中一个孩子？我不想用我自己的物理和所有东西来伪造它。

谢谢你的帮助。

HTML：

```
<div id="mainPanel"> <!-- add event listener and preventDefault(); -->
    <div id="nonScrollingPanel></div>
    <div id="scrollingPanel></div> <!-- add event listener and re-enable default -->
</div> 
```

JavaScript：

```
$bod.on('touchmove', '#mainPanel', function(event){

    event.preventDefault();
});

$('#mainPanel').on('touchmove', '#scrollingPanel', function(){

    return true;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:49:35.117

简单地说，最简单的方法是在`preventDefault()`它不是孩子之前检查。

纯 JS 中的一个示例：

HTML：

```
<div id="parent">
    parent
    <div id="child">
        child
    </div>
</div>​ 
```

JS：

```
var parent = document.getElementById('parent');

parent.addEventListener('click', function(e) {
    // Gets closest div
    var div = function closest(el) {
        if (el.tagName === 'DIV') {
            return el;
        }
        else {
            return closest(el.parentNode);
        }
    }(e.target);

    if (div.id !== 'child') {
        e.preventDefault();
    }
}); 
```

Jsfiddle 示例：http: [//jsfiddle.net/Ralt/yxxmx/](http://jsfiddle.net/Ralt/yxxmx/)

按照你的例子，它会是这样的：

```
$bod.on('touchmove', '#mainPanel', function(event){
    if ($(event.target).closest('div')[0].id !== 'scrollingPanel') {
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:10:34.600

这不能按预期工作的原因是 jQuery 运行所有事件处理程序，除非您停止其中一个事件处理程序的传播。在您的示例中，两个事件处理程序都将运行。

这是一个我不喜欢的解决方案，因为您实际上可能希望事件传播用于其他目的。

```
$('#main-panel').on('touchmove', function(e) {
    e.preventDefault();
});

$('#scrolling-panel').on('touchmove', function(e) {
    e.stopPropagation();
});​ 
```

所以这就是我要做的，除非 iOS 有一些特殊的元标记来禁用页面滑动：

```
$('#main-panel').on('touchmove', function(e) {
    if (!$('#scrolling-panel')[0].contains(e.target)) {
        e.preventDefault();
    }
}); 
```

# android - 是否可以在 Android 3.2 / 4.0.4 上更改输入 z-index？

> ID：13988429
> 
> 赞同：1
> 
> 时间：2012-12-21T10:32:54.380
> 
> 标签：android, html, css, android-layout, android-3.2-honeycomb

在 Android 3.2 中，当它获得焦点时，我的所有输入字段都会在点击后与所有内容重叠。我在页面底部有一个粘性页脚，它应该在输入字段上方。更新到 Android 4.0.4 后，我遇到了同样的问题。这是在三星 Galaxy Tab 10.1n 上。我在其他 Android 4.1.2 的 Android 智能手机上尝试这个页面，没有这个问题。

尝试更改输入字段或页脚的 z-index 不起作用。我有输入样式：焦点，但看起来 Android 有他自己的操作系统样式。

每个人都有同样的问题，或者每个人都知道如何修复这个错误 - 请不要使用脚本？

[这里是测试页面的链接](http://wp1033656.wp056.webpack.hosteurope.de/www/test.html)

[这是带有 Android 3.2 的三星 Galaxy Tab 10.1n 的屏幕截图](http://i.stack.imgur.com/NjHSN.jpg)

# java - 在测试中重现 SimpleDateFormat 非线程安全

> ID：13988430
> 
> 赞同：3
> 
> 时间：2012-12-21T10:32:59.553
> 
> 标签：java, multithreading, junit

我有一个应用程序不时在日志中有这个堆栈跟踪：

```
java.lang.ArrayIndexOutOfBoundsException: 514
        at sun.util.calendar.BaseCalendar.getCalendarDateFromFixedDate(BaseCalendar.java:436)
        at java.util.GregorianCalendar.computeFields(GregorianCalendar.java:2081)
        at java.util.GregorianCalendar.computeFields(GregorianCalendar.java:1996)
        at java.util.Calendar.complete(Calendar.java:1312)
        at java.util.Calendar.get(Calendar.java:1093)
        at java.text.SimpleDateFormat.subFormat(SimpleDateFormat.java:917)
        at java.text.SimpleDateFormat.format(SimpleDateFormat.java:824)
        at java.text.SimpleDateFormat.format(SimpleDateFormat.java:796)
        at java.text.DateFormat.format(DateFormat.java:314)
        at me.myself.i.Message.toString(Message.java:203)
        at java.lang.String.valueOf(String.java:2615)
        at java.lang.StringBuilder.append(StringBuilder.java:116) 
```

我认为问题可能出在这些方面：

```
public class Message{
private transient DateFormat logDateFormat;
    @Override
    public String toString() {
        final StringBuilder result = new StringBuilder(getClass().getSimpleName());
        result.append("Time=").append(logDateFormat.format(new Date(getExpireTime())));     
        return result.toString();
    }
} 
```

我认为多个线程同时调用 toString() ，但我在本地机器上复制它时遇到了麻烦：

```
 @Before
  public void setUp() {
    message = new Message();
    pool = Executors.newFixedThreadPool(numOfThreads);
 }

  @Test
  public void multiThreadTest() {
        for (int i=0; i<numOfThreads; i++) {
            TestJob j = new TestJob(message);
            pool.submit(j);
        }
        pool.shutdown();
        while(!pool.isTerminated()){            
        }
    }

    class TestJob implements Runnable{

        private Message message;
        private int n=100;

        public TestJob(Message message) {
            this.message= message;
        }

        public void run() {
            for (int i=0; i<n; i++) {
                try{
                    System.out.println(message.toString());
                } catch(Exception e){
                    e.printStackTrace();
                }
            }
        }
    } 
```

我如何编写正确的junit测试来重现这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T11:12:22.760

由于我的第一次测试没有重现你的问题，试试这个

```
final SimpleDateFormat f = new SimpleDateFormat("yyyy-MM-dd");
ExecutorService ex = Executors.newFixedThreadPool(1000);
for (;;) {
    ex.execute(new Runnable() {
        public void run() {
            try {
                f.format(new Date(new Random().nextLong()));
            } catch (Exception e) {
                e.printStackTrace();
                System.exit(1);
            }
        };
    });
} 
```

花了一些时间，但最后我得到了

```
java.lang.ArrayIndexOutOfBoundsException: 3144942
    at sun.util.calendar.BaseCalendar.getCalendarDateFromFixedDate(BaseCalendar.java:454)
    at java.util.GregorianCalendar.computeFields(GregorianCalendar.java:2333)
    at java.util.GregorianCalendar.computeFields(GregorianCalendar.java:2248)
    at java.util.Calendar.complete(Calendar.java:1560)
    at java.util.Calendar.get(Calendar.java:1162)
    at java.text.SimpleDateFormat.subFormat(SimpleDateFormat.java:1093)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:978)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:948)
    at java.text.DateFormat.format(DateFormat.java:336)
    at Test1$1.run(Test1.java:17)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T10:46:10.153

您的测试有几个问题：

*   每个线程只执行测试方法 100 次，应该增加线程交织场景的数量
*   您调用`System.out.println`which is synchronized => 您正在重新同步您的代码，这可能会消除问题

另请注意，SimpleDateFormat 在内部使用同步的 StringBuffer，因此遇到并发问题并不容易。

你可以：

*   使用 CountDownLatch 同时启动所有线程并增加交错
*   删除打印语句
*   让每个作业多次运行测试方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T10:39:12.810

测试线程安全（和性能）的一般方法是多次尝试。这与单元测试应该是可重现的（意味着每次运行都有相同的结果）的感觉相冲突。这样做的原因是涉及机会，在线程安全的情况下很多。

为了使测试用例在异常上失败，调用的每个线程都`toString()`应该捕获异常并在抛出异常时失败（一个 junit 函数）。

```
try{
    //do stuff
catch(RuntimeException exception){
    fail();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T10:42:07.330

100 次是不太可能足够的。我建议至少 10,00 并且使用比 cpus 更多的线程来使机器过载。例如，具有 8 个 CPU 的机器上有 32 个线程。

无论您运行多长时间，您都无法通过测试确定代码是线程安全的，因为您只能确定您没有看到它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-21T10:47:04.123

试试我的测试，

```
public class Test1 {

    public static void main(String[] args) throws Exception {
        final SimpleDateFormat f = new SimpleDateFormat("yyyy-MM-dd");
        final Date d1 = f.parse("2001-01-01");
        final Date d2 = f.parse("2012-12-12");
        for (int i = 0; i < 100; i++) {
            System.out.print(i + " ");
            final int j = i;
            new Thread() {

                void test(String s, Date expected) throws ParseException {
                    //synchronized (Test1.class) {
                        Date d = f.parse(s);
                        if (!d.equals(expected)) {
                            System.out.println(d + " != " + expected);
                            System.exit(1);
                        }
                    //}
                }

                public void run() {
                    try {
                        if (j % 2 == 0) {
                            test("2001-01-01", d1);
                        } else {
                            test("2012-12-12", d2);
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                        System.exit(1);
                    }
                };
            }.start();
            System.out.println("OK");
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T10:39:04.790

将`for`循环替换为`while(true)`并等待一段时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-21T11:00:29.310

不是正确同步以防止可能的错误发生，而是可能会同步以*产生**错误*，例如：

创建多个线程：

```
while(...)
    synchronized(sync) {
        sync.wait();
    }
    toString();
} 
```

然后打电话`sync.notifyAll()`。这*可能会*增加看到问题的机会。

# paypal - Paypal退货链接

> ID：13988431
> 
> 赞同：1
> 
> 时间：2012-12-21T10:33:03.443
> 
> 标签：paypal, paypal-ipn

我有使用贝宝付款的网站。我使用 IPN 处理付款

我希望访问者在支付宝付款后返回特定页面

我放入篮子形式

```
<input type="hidden" name="return" value="http://site.com/basket/thank-you?param=value"> 
```

在某些情况下，对 param=value 可能是特定的

但是付款后访客只能看到贝宝“感谢您的订单”页面:(访客可以使用此页面上的返回链接，但他们不会这样做:)

我知道可以在 PayPal 商家账户中设置自动退货-->个人资料-->销售偏好-->网站支付偏好-->网站支付的自动退货

但是我应该只设置一个网址。所以我必须使用 cookie 或 session 来捕捉用户的语言。为什么会这样？为什么返回链接隐藏字段不起作用？是否有可能在没有 PDT 的情况下获得退货功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:20:13.137

像您一样使用 Payments Standard 时，即使启用了自动退货，也无法保证用户能够退回您的退货。例如，他们可以在自动返回发生之前简单地关闭浏览器。这根本不是很可靠。

如果您想确保用户回到您的应用流程，那么您可以使用[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)。这涉及 3 个 API 调用，SetExpressCheckout [、](https://www.x.com/developers/paypal/documentation-tools/api/getexpresscheckoutdetails-api-operation-nvp)[GetExpressCheckoutDetails](https://www.x.com/developers/paypal/documentation-tools/api/setexpresscheckout-api-operation-nvp)和[DoExpressCheckoutPayment](https://www.x.com/developers/paypal/documentation-tools/api/doexpresscheckoutpayment-api-operation-nvp)。

登录、查看并同意付款后，用户将被发送回您在 SetExpressCheckout 中指定的 ReturnURL。此时，您可以调用 GetExpressCheckoutDetails 以获取付款人详细信息（可选），然后使用 DoExpressCheckoutPayment 完成所有操作。

我还建议将数据保存到您的数据库或使用会话变量而不是 URL 参数，因为 Express Checkout 发生在您自己的服务器而不是 PayPal 的服务器上，因此很容易访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:44:00.997

将`Auto Return for Website Payments`on your设置`Website Payment Preferences`为**ON**并不意味着您的应用程序将始终使用 Return URL。您仍然可以通过`return`像上面所做的那样指定字段来覆盖它：

```
<input type="hidden" name="return" value="http://site.com/basket/thank-you?param=value"> 
```

不同之处只是访问者将被直接重定向到返回 URL（通常等待大约 10 秒），而不会将他们带入“感谢您的订单”页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T20:04:10.253

最有趣的是，我只在 Sandbox 中提交了退货问题。在真实的贝宝帐户上，即使关闭了自动返回选项，我也会在感谢页面上返回访问者。

# python - 如何在 Django 1.4 中使用数据库路由器

> ID：13988432
> 
> 赞同：4
> 
> 时间：2012-12-21T10:33:08.587
> 
> 标签：python, django, multiple-databases

我一直在尝试将 Django 1.4.3 设置为使用多个数据库，但对于我的生活，我无法让它工作。我阅读了关于 SO 的文档和帖子，并执行了以下操作：

**1)**在 中添加第二个 DB 配置`settings.py`，如下：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': '/tmp/django.db',
        'USER': '',
        'PASSWORD': '',
        'HOST': '',
        'PORT': '',
    },
    'db1' : {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'db1',
        'USER': 'fake',
        'PASSWORD': 'fake',
        'HOST': 'fake.host.com',
        'PORT': '3306',
    },
} 
```

**2）**创建一个`routers.py`并定义一个DB路由器如下
（注意：根据SO帖子，如果您在中定义一个DB路由器`models.py`，路由器将不起作用）

```
class DBRouter(object):
    def db_for_read(self, model, **hints):
        return 'db1'

    def db_for_write(self, model, **hints):
        return 'db1'

    def allow_syncdb(self, db, model):
        return 'db1' 
```

**3）**将以下行添加到`settings.py`
（注意：根据SO帖子，这些行必须在`DATABASES`配置之后

```
from django.db import connections
DATABASE_ROUTERS = ['fakeproject.routers.DBRouter',] 
```

**这是错误的。不要放在`from django.db import connections`这里，因为它会阻止路由器注册**

**我的症状：**
显然，我所有的呼叫都是通过默认数据库路由的。详情如下：

*   两种数据库设置都有效（我可以`manage.py indpectdb --database db1`成功 执行

*   `DATABASE_ROUTERS`设置不会产生任何抱怨（即使我将错误的路径放入 DB 路由器，甚至是非字符串对象）

*   当我尝试通过 访问我的对象时`manage.py shell`，我可以这样做，`MyModel.objects.all()`但是当我实际尝试迭代它时，我被告知`no such table`. 默认数据库没有那个表，但是当我使用它生成模型时，'db1' 显然有`inspectdb`它。作为证明，如果我在`db1`和之间交换数据库配置`default`，我可以毫无问题地访问该对象。

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T22:59:45.783

I found out that the statement in step 3 "`from django.db import connections` " was preventing the DB router to be registered. When I removed this statement, the router was registered and stuff started to work as expected.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:43:24.923

我认为问题可能出现了，因为你`routers.py`只返回一个引用，`'db1'`但正如你所说，你只是被路由到`'default'`我不确定（我希望它是唯一路由到`'db1'`.

在`routers.py`创建一个主路由器类，然后为每个 DB 子类化 - 并使用`app_label`字符串初始化，以便您可以将它们分开。

```
class MasterRouter(object):
    def __init__(self, app_label):
        super(MasterRouter, self).__init__()
        self.app_label = app_label

    def db_for_read(self, model, **hints):
        if model._meta.app_label == self.app_label:
            return self.app_label
        return None

    def db_for_write(self, model, **hints):
        if model._meta.app_label == self.app_label:
            return self.app_label
        return None

    def allow_relation(self, obj1, obj2, **hints):
        if obj1._meta.app_label == self.app_label or obj2._meta.app_label == self.app_label:
            return True
        return None

    def allow_syncdb(self, db, model):
        if db == 'default':
            return model._meta.app_label == self.app_label
        elif model._meta.app_label == self.app_label:
            return False
        return None

class DefaultRouter(MasterRouter):
    def __init__(self):
        super(DefaultRouter, self).__init__('default')

class DB1Router(MasterRouter):
    def __init__(self):
        super(DB1Router, self).__init__('db1') 
```

然后在你`settings.py`声明路由器

```
DATABASE_ROUTERS = [ 'routers.DefaultRouter', 'routers.DB1Router' ] 
```

当然，您可能希望以`MasterRouter`不同的方式设置类覆盖。

# javascript - Windows.System.Launcher.launchFileAsync(file) 不工作:(

> ID：13988434
> 
> 赞同：0
> 
> 时间：2012-12-21T10:33:17.163
> 
> 标签：javascript, api, sdk, windows-8, launcher

我正在尝试使用适用于 Windows 8 App Store 应用程序的 JS API。基本上我有两个按钮，一个调用函数 create()，一个调用函数 open()。该文件已正确创建，但我无法想象如何启动外部应用程序来打开它。

鉴于此代码，主要取自 MSDN 网站...我应该写什么来代替：

//如何启动应用程序来读取文件？

该文件存在，我可以通过 var file = Windows.Storage.StorageFile.getFileFromApplicationUriAsync(uri);

但即使是 Windows.System.Launcher.launchFileAsync(file) 也无法正常工作...... :( 有什么帮助吗？

谢谢！！！

```
 function create() {

 {
        localFolder.createFileAsync("dataFile.txt", Windows.Storage.CreationCollisionOption.replaceExisting)
           .then(function (sampleFile) {
               var formatter = new Windows.Globalization.DateTimeFormatting.DateTimeFormatter("longtime");
               var timestamp = formatter.format(new Date());

               return Windows.Storage.FileIO.writeTextAsync(sampleFile, timestamp);
           }).done(function () {

           });
    }

        }

function open() {

    localFolder.getFileAsync("dataFile.txt")
      .then(function (sampleFile) {

          if (sampleFile) { console.log("it does exists") }

          return Windows.Storage.FileIO.readTextAsync(sampleFile);
      }).done(function (timestamp) {
          var uri = new Windows.Foundation.Uri('ms-appx:///dataFile.txt');
          var file = Windows.Storage.StorageFile.getFileFromApplicationUriAsync(uri);
          //how to launch an app to read the file?
      }, function () {
          console.log("timestamp non trovato");
      });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:44:15.927

你有几件事在这里发生：

1.  您将 URI 方案用于属于您的应用程序的文件，而不是用于本地文件夹的文件。改用这个

    ```
    var uri = new Windows.Foundation.Uri('ms-appdata:///local/dataFile.txt'); 
    ```

2.  您需要使用来自[getFileFromApplicationUriAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.getfilefromapplicationuriasync.aspx)的回调，尝试：

    ```
    localFolder.getFileAsync("dataFile.txt")
      .then(function (sampleFile) {

          if (sampleFile) { console.log("it does exists") }

          return Windows.Storage.FileIO.readTextAsync(sampleFile);
      }).done(function (timestamp) {

          var uri = new Windows.Foundation.Uri('ms-appdata:///local/dataFile.txt');
          Windows.Storage.StorageFile.getFileFromApplicationUriAsync(uri).done(function(file)
          {
              Windows.System.Launcher.launchFileAsync(file); 
    ```

3.  您实际上不需要在这里创建 Uri，您可以在第一个“then”中启动（但我不确定您的意图，因为您也在那里阅读了文件）。还要注意，您对现有文件的检查并不完全正确。如果文件不存在，您将触发错误处理程序回调，我在下面添加了它以输出到控制台

    ```
    localFolder.getFileAsync("dataFile.txt")
      .then(function (sampleFile) {
               Windows.System.Launcher.launchFileAsync(sampleFile);
               return Windows.Storage.FileIO.readTextAsync(sampleFile);
           },
           function () { console.log("it does not exist"); })
      .done(function (timestamp) {

          // not sure what you want to do here

      }, function () {
          console.log("timestamp non trovato");
      }
    );}); 
    ```

# zsh - 令人困惑的 ZSH glob

> ID：13988441
> 
> 赞同：3
> 
> 时间：2012-12-21T10:33:35.167
> 
> 标签：zsh, glob

我无法理解以下 glob：

```
${^fpath}/_git-*~(*~|*.zwc)(.N) 
```

`${^fpath}`扩展`fpath`数组，`(.N)`将匹配限制为常规文件并设置`NULL_GLOB`选项。到现在为止还挺好。问题是`_git-*~(*~|*.zwc)`部分。根据我的理解，它首先匹配以 开头的任何内容，`_git-`然后排除所有匹配的内容`(*~|*.zwc)`，但那到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:04:26.010

我想我是在尝试为@lolesque 提供测试环境时才想出来的。

两者`~`有不同的含义。第一个排除与以下模式匹配的所有内容，而第二个与文字匹配`~`。所以该模式将匹配`_git-foo`，但不匹配`_git-foo~`或`_git-foo.zwc`在`fpath`.

# android - 尝试发送消息时收到错误消息

> ID：13988443
> 
> 赞同：3
> 
> 时间：2012-12-21T10:33:41.240
> 
> 标签：android

```
send.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub
    //URI uri=uri.parse("sms://+919500518057");
    sendSms("9500518057","message");
    //startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("sms:"+ "+919500518057")));
    }

    private void sendSms(String phno, String message) {
        // TODO Auto-generated method stub
        Log.v("PhoneNumber",phno);
        Log.v("MEssage", message);
        PendingIntent pi=PendingIntent.getActivity(this, 0, new Intent(this, Object.class), 0);
        SmsManager sms=SmsManager.getDefault();
        sms.sendTextMessage(phno, null, message, pi, null);
    }
}); 
```

在清单文件中：

```
<uses-permission android:name="android.permission.SEND_SMS"/> 
```

我收到如下错误：

PendingIntent 类型中的方法 getActivity(Context, int, Intent, int) 不适用于清单文件中的参数 (new View.OnClickListener(){}, int, Intent, int) 我放了以下代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:42:59.717

从您的 main 调用此方法：

```
private void sendSMS() {
        SMSSend smsSend = new SMSSend();

        smsSend.execCommand();
    } 
```

那么下面的两个类将负责发送短信。

```
public class SMSSend {

    private final String CLASS_NAME = this.getClass().getSimpleName();
    private final static String SEND_SMS_FAILURE = "Send SMS command executed and status is failure";
    private String phoneNumber;
    private String messageText;

    /**
     * constructor is defined.
     * 
     * @param CommandProcessor
     *            cmdProcessor
     */
    public SMSSend() {
        super();
    }

    /**
     * execCommand method
     * 
     * It is an overridden here and declared in CommandHandler (base class)
     */
    public void execCommand() {
        try {
            new Thread() {
                public void run() {
                    sendSMS();
                }
            }.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * sendSMS method
     * 
     * It retrieves the command parameters and sends the sms.
     * 
     * @param Command
     *            command
     * @return Status
     */
    private void sendSMS() {
        try {
            SMSSendHelper smsHelper = new SMSSendHelper();
            phoneNumber = "0123456789";
            messageText = "Message Text smaple";
            if (null == phoneNumber || phoneNumber.length() < 2) {
            } else {
                smsHelper.sendSMS(phoneNumber, messageText);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
        }

    }

}

/**
 * SMSSend class
 * 
 * It is responsible for sending SMSs.
 *  
 */
public class SMSSendHelper {
    private final String CLASS_NAME = this.getClass().getSimpleName();
    private String SENT = "SMS_SENT";
    private String DELIVERED = "SMS_DELIVERED";
    private PendingIntent sentPI;
    private BroadcastReceiver sentReceiver;
    private BroadcastReceiver deliveredReceiver;
    private PendingIntent deliveredPI;
    private static final int SMS_LENGHT = 160;
    private static String status = "";

    /**
     * Constructor is defined
     * 
     * @param Status
     *            smsstatus
     */
    public SMSSendHelper() {
        sentPI = PendingIntent.getBroadcast(ConfigClass.getAppContext(), 0,
                new Intent(SENT), 0);

        deliveredPI = PendingIntent.getBroadcast(ConfigClass.getAppContext(),
                0, new Intent(DELIVERED), 0);
        sentReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {

                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    try {
                        synchronized (lock) {
                            lock.notifyAll();
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    setSendSMSSataus("SMS Sent");
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    try {
                        synchronized (lock) {
                            lock.notifyAll();
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    setSendSMSSataus("Generic failure");
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    try {
                        synchronized (lock) {
                            lock.notifyAll();
                        }
                    } catch (Exception e) {
                    }
                    setSendSMSSataus("No service");
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    try {
                        synchronized (lock) {
                            lock.notifyAll();
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    setSendSMSSataus("Null PDU");
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    try {
                        synchronized (lock) {
                            lock.notifyAll();
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    setSendSMSSataus("Radio off");
                    break;
                default:
                    try {
                        synchronized (lock) {
                            lock.notifyAll();
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    break;

                }
                ConfigClass.getAppContext().unregisterReceiver(sentReceiver);
            }
        };
        // ---when the SMS has been sent---
        ConfigClass.getAppContext().registerReceiver(sentReceiver,
                new IntentFilter(SENT));

        deliveredReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    break;
                case Activity.RESULT_CANCELED:
                    break;
                }
                ConfigClass.getAppContext().unregisterReceiver(
                        deliveredReceiver);
            }
        };

        ConfigClass.getAppContext().registerReceiver(deliveredReceiver,
                new IntentFilter(DELIVERED));
    }

    /**
     * setSendSMSSataus method
     * 
     * @param setSendSMSSataus
     *            currentSataus
     */
    public static void setSendSMSSataus(String currentSataus) {
        status = currentSataus;

    }

    /**
     * getSendSMSSataus method
     * 
     * @return String status
     */
    public String getSendSMSSataus() {
        int i = sentReceiver.getResultCode();
        return status;
    }

    /**
     * sendSMS method
     * 
     * @param String
     *            phoneNumber
     * @param String
     *            message
     * @return Status
     */
    public void sendSMS(String phoneNumber, String message) {
        if (message == null) {
            message = " ";
        }

        SmsManager sms = SmsManager.getDefault();

        if (message.length() > SMS_LENGHT) {
            sendLongSMS(sms, message, phoneNumber);
        } else {
            Log.d("E++++D",phoneNumber+"======>>>>>SOS");

            sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);
        }
        try {
            synchronized (lock) {
                lock.wait();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    private void sendLongSMS(SmsManager sms, String message, String phoneNumber) {
        ArrayList<String> parts = sms.divideMessage(message);
        int numParts = parts.size();
        ArrayList<PendingIntent> sentIntents = new ArrayList<PendingIntent>();
        ArrayList<PendingIntent> deliveryIntents = new ArrayList<PendingIntent>();
        for (int i = 0; i < numParts; i++) {
            sentIntents.add(sentPI);
            deliveryIntents.add(deliveredPI);
        }

        sms.sendMultipartTextMessage(phoneNumber, null, parts, sentIntents,
                deliveryIntents);
    }

    private Object lock = new Object();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:42:19.053

```
private void sendSMS(String phoneNumber, String message)
    {        
        PendingIntent pi = PendingIntent.getActivity(this, 0,
            new Intent(this, SMS.class), 0);                
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, pi, null);        
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:38:08.810

你用错了`this`。交换这个：

```
PendingIntent pi=PendingIntent.getActivity(this, 0, new Intent(this, Object.class), 0); 
```

为了这：

```
PendingIntent pi=PendingIntent.getActivity(YourActivity.this, 0, new Intent(YourActivity.this, Object.class), 0); 
```

现在你正在使用`OnClickListener.this`. :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:38:26.037

尝试使用：

```
PendingIntent pi=PendingIntent.getActivity(mContext, 0, new Intent(mContext, Object.class), 0); 
```

在你的全局变量中添加：

```
private Context mContext; 
```

并在超级调用后使用以下方法在 onCreate() 中对其进行初始化：

```
mContext = this; 
```

通过仅`this`在创建 时使用`PendingIntent`，您并不是指您的当前实例`Activity`。您指的是`OnClickListener`内部类的当前实例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T10:39:25.180

我正在使用它来发送消息：-

```
private void sendSMS(String phoneNumber, String message)
{        

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, null, null);     
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T10:39:38.103

PendingIntent 需要一个 Context 作为第一个参数。在活动内部，您可以使用 将活动上下文传递给方法`PendingIntent.getActivity(this, ..)`。

`setOnClickListener`但是，这在（就像您所做的那样）中不起作用。OnclickListener 内部 `this`引用`setOnClickListener`（不是有效的上下文对象）而不是活动。

如果您想将活动传递给`getActivity`您可以使用`PendingIntent.getActivity(<NameOfYourActivity>.this, ..)`

例如`PendingIntent.getActivity(MyActivity.this, ..)`

# php - 如何使用 Yii 直接从打印机打印？

> ID：13988444
> 
> 赞同：2
> 
> 时间：2012-12-21T10:33:50.680
> 
> 标签：php, printing, yii, network-printers

如何直接从打印机打印？

这是一个 Intranet Web 应用程序。用户将使用此应用程序，他们将从其部门的打印机（不同部门，不同的打印机）打印出报告。我正在谷歌搜索直接从打印机打印出来，但我找不到任何地方。我正在使用 Yii 框架 1.11。

我怎样才能做到这一点？可以直接从打印机打印出来吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:43:16.770

对于 Web 应用程序，所有打印作品都依赖于您的浏览器。您必须为具有特殊 Html 和 css 的打印视图创建一个页面或弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:19:35.720

至少我找到了最好的方法。我从以下站点获得了 js。

[http://www.position-absolute.com/articles/printing-web-pages-a-new-jquery-printing-plugin/](http://www.position-absolute.com/articles/printing-web-pages-a-new-jquery-printing-plugin/)

我的视图（索引或其他东西）

```
 <p align="right">
        <?php 

            echo CHtml::link('New Job',array('create'),array('class'=>'btn btn-info'));
            echo CHtml::link('Print',array('print'),array('class'=>'btnPrint btn btn-info', 'style'=>'margin-left: 10px;'));
        ?>
    </p>
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'job-grid',
    'dataProvider'=>$jobs->search(),
    'filter'=>$jobs,
...)); ?> 
```

我的控制器

```
public function actionPrint() {
        $d = $_SESSION['all'];
        $this->renderPartial('print',array('d'=>$d),false,true);
} 
```

我的模型

```
public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id,true);
        $criteria->compare('name',$this->name,true);
        $criteria->compare('date',$this->date,true);
        $criteria->compare('department_id',$this->department_id);
        $criteria->compare('section_id',$this->section_id);
        $criteria->compare('team_id',$this->team_id);
        $criteria->compare('created_date',$this->created_date,true);
        $criteria->compare('updated_date',$this->updated_date,true);

        $data = new CActiveDataProvider(get_class($this), array(
                'criteria'=>$criteria,
                'pagination'=>false,
        ));
        $_SESSION['all'] = $data;

        $data = new CActiveDataProvider(get_class($this), array(
                'pagination'=>array('pageSize'=> Yii::app()->user->getState('pageSize',
                        Yii::app()->params['defaultPageSize']),),
                'criteria'=>$criteria,
        ));
        $_SESSION['limited'] = $data;

        return $data;
    } 
```

我的观点（print.php）

```
<div id="summary">
<table width="100%" border="1">
    <tr>
        <th>No.</th>
        <th>Job No.</th>
        <th>Date</th>
        <th>Department</th>
        <th>Section</th>
        <th>Team</th>
    </tr>  
    <?php   
    $i=1;
    foreach($d->data as $item)
    {
    ?>
    <tr>
        <td><?php echo $i;?></td>
        <td><?php echo $item->name; ?></td>
        <td><?php echo $item->date; ?></td>
        <td><?php echo $item->departmentsdep->name; ?></td>
        <td><?php echo $item->departmentssec->name; ?></td>
        <td><?php echo $item->departmentstea->name; ?></td>
    </tr>
    <?php 
        $i++;
    }
    ?>
</table>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:42:45.417

你可以试试这个： -

```
$fhandle = fopen("test.php","rb");
$contents = fread($fhandle, filesize("test.php"));
$output = eval($contents);

$handle = printer_open("Dell Laser Printer M5200");
printer_set_option($handle,PRINTER_MODE,"raw");
printer_write($handle,$output);
printer_close($handle); 
```

# client-server - RabbitMQ：尝试再次发送消息

> ID：13988446
> 
> 赞同：1
> 
> 时间：2012-12-21T10:34:14.787
> 
> 标签：client-server, rabbitmq, mq

我有将消息发送到 MQ的*服务器。**工作人员*回答时从队列中删除消息：

```
channel.basic_ack(delivery_tag=method_frame.delivery_tag) 
```

但是当工作人员产生错误时，它不会回答良好的交付情况。是否可以将此消息路由到其他工作人员或将此消息发送到队列末尾并稍后重试。RabbitMQ 是否有设置消息超时的机制。当超时结束消息尝试再次发送给工作人员还是我需要自己实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:43:19.487

如果您的工作人员没有确认该消息，则它不会从队列中删除，但是如果工作人员和 rabbit-mq 之间的连接仍然存在，则 rabbit-mq 无法知道该消息不在工作人员缓冲区中。

有几种方法可以解决这个问题，主要取决于您的应用程序结构。

最简单的方法是将 prefetch 设置为 1，并确保在出现问题时重置 rabbitmq 和 worker 之间的连接。

您也可以考虑[整理您的消息](http://www.rabbitmq.com/nack.html)，但我不知道这是否会使它们重新排队。

你当然也可以照你说的做，然后发送你进入另一个队列或类似的消息。但是请记住，如果您不确认您的消息，您最终将拥有比您真正想象的更大的队列，因为除非它们被确认，否则兔子不会从队列中删除项目（实际上这取决于您的配置队列）。

# java - 如何使用Jni将结构从c代码传递到java

> ID：13988451
> 
> 赞同：2
> 
> 时间：2012-12-21T10:34:36.957
> 
> 标签：java, android-ndk, java-native-interface

我必须通过一个结构

```
 struct Info {
    u_int8_t timestamp[8];
    u_int32_t  a;
    u_int32_t  b;
    u_int32_t  c;
    ActiveInfo activeInfo[MAX_ACTIVE_SET];

   };

 struct ActiveInfo
{
   u_int8_t  is_reference;
   u_int16_t p;
   u_int32_t q;
    u_int8_t  r;
   u_int8_t  s;
  };
  typedef struct ActiveInfo ActiveInfo; 
```

我想将此（信息）结构传递给我的 java 代码。我已经目瞪口呆，但没有得到完整的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:04:23.257

该结构必须在 Java 端定义为具有成员的类。*事实上，JNI 允许 C 访问 Java 对象，但不允许 Java 访问 C 对象（结构）*。因此，如果您想通过 JNI “传递”某些内容并使其在双方都可访问，则它必须是 Java 对象，然后`jobject`在接口中进行限定。从 C 方面来看，您有两个选择：

*   要么直接使用`GetFieldID()`and访问成员`Get/Set<Type>Field`，尽管使用数组更复杂（我看到了一些）
*   或在该类中创建 Java 方法以简化方式填充和读取，并调用它们`Invoke<Retval>Method`

这取决于您的数据存储设计。您可能只希望一侧（C 或 Java）读取而另一侧写入，这可以方便地反映在设计中。

**编辑：**

可以在@asgoth 指出的站点找到示例：[www.steveolyo.com](http://www.steveolyo.com/JNI/JNI.html#CSTRCJ)。有一章名为“将 C 结构从 C 传递到 Java”，但随后它默默地解释了如何在 Java 类中反映所需的 C 结构并通过 JNI 将 Java 对象传递给 C——这正是我的回复所说的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:47:01.747

你需要一个 JNIEXPORT：

```
JNIEXPORT jint JNICALL 
Java_FillCStruct
(
   JNIEnv *env, 
   jclass obj, 
   jobject    info      // EntryInformation object instantiation
)
{
   testInfo entryInfo;
   jclass clazz;
   jfieldID fid;
   jmethodID mid;

   GetInfo(entryInfo);   // fills in the entryInfo

   clazz = (*env)->GetObjectClass(env, info);
   if (0 == clazz)
   {
      printf("GetObjectClass returned 0\n");
      return(-1);
   }
   fid = (*env)->GetFieldID(env,clazz,"index","I");

   // This next line is where the power is hidden. Directly change
   // even private fields within java objects. Nasty!
   (*env)->SetIntField(env,info,fid,testInfo.index); 
... 
```

这是一个带有一些示例的站点：http: [//www.steveolyo.com/JNI/JNI.html](http://www.steveolyo.com/JNI/JNI.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:05:48.243

您已经知道映射仅以一种方式起作用：您可以从 C/C++ 访问 Java 类，反之则不行。

但同样重要的是要记住，这种映射涉及大量开销——无论是在使用的内存中还是在 CPU 中。

因此，放弃完全透明可能是明智之举。例如，如果你只需要读取activeInfo[n].s，你可以写一个native方法getais(int n)。或者 uou 可以将 java 中的整个结构作为 DirectByteBuffer 接收，计算所需的偏移量，并直接操作该值。

# java - 使用 Jsoup 删除所有 HTML 但保留行

> ID：13988452
> 
> 赞同：2
> 
> 时间：2012-12-21T10:34:49.860
> 
> 标签：java, html, regex, jsoup

我有一个`String`包含一些电子邮件内容的电子邮件，我想从中删除所有 HTML 编码`String`。

这是我目前的代码：

```
public static String html2text(String html) {

   Document document = Jsoup.parse(html);
   document = new Cleaner(Whitelist.basic()).clean(document);
   document.outputSettings().escapeMode(EscapeMode.xhtml);
   document.outputSettings().charset("UTF-8");
   html = document.body().html();

   html = html.replaceAll("<br />", "");

   splittedStr = html.split("Geachte heer/mevrouw,");

   html = splittedStr[1];

   html = "Geachte heer/mevrouw,"+html;

   return html;
} 
```

此方法删除所有 HTML，保留行和大部分布局。但它也会返回一些`&amp;`和`nbsp;`标签，这些标签并没有完全删除。请参阅下面的输出，您可以看到在`String`. 我该如何摆脱这些？

```
 Loonheffingen       &amp;n= bsp; Naam
 nr         in administratie         &amp;nbs= p;           meldingen
  nummer

 1          &amp;n= bsp;            = ;     0            &amp;= nbsp;           &amp;nbs= p;           1
           123456789L01 
```

**编辑：**

```
<span style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">De afgekeurde meldingen zijn opgenomen in de bijlage: Afgekeurde meldingen.</span><br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">

<span style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">Wilt u zo spoedig mogelijk zorgdragen dat deze</span><br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">
<span style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">meldingen gecorrigeerd worden aangeleverd?</span><br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">
<span style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">mer</span><br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">
<span style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">Volg &nbsp; &nbsp; Aantal verwerkt &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Aantal afgekeurde</span><br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">
<span style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">&nbsp;Loonheffingen &nbsp; &nbsp; &nbsp; &nbsp; Naam</span><br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">
<span style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">nr &nbsp; &nbsp; &nbsp; &nbsp; in administratie &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; meldingen</span><br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">
<span style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">&nbsp;nummer</span><br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">
<br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif"><span style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif">1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1</span><br style="color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif"> 
```

这是我要解析的 HTML 的一部分。我想删除所有 HTML，但保留原始电子邮件的布局。

任何帮助表示赞赏，

谢谢！

**解决了**

```
 Document xmlDoc = Jsoup.parse(file, "", Parser.xmlParser());
        Elements spans= xmlDoc.select("span");

        for (Element link : spans) {
            String html = textPlus(link);
            System.out.println(html);
        }

 public static String textPlus(Element elem) {
    List<TextNode> textNodes = elem.textNodes();
    if (textNodes.isEmpty()) {
        return "";
    }

    StringBuilder result = new StringBuilder();
    // start at the first text node
    Node currentNode = textNodes.get(0);
    while (currentNode != null) {
        // append deep text of all subsequent nodes
        if (currentNode instanceof TextNode) {
            TextNode currentText = (TextNode) currentNode;
            result.append(currentText.text());
        } else if (currentNode instanceof Element) {
            Element currentElement = (Element) currentNode;
            result.append(currentElement.text());
        }
        currentNode = currentNode.nextSibling();
    }
    return result.toString();
} 
```

提供了代码作为[这个](https://stackoverflow.com/questions/13042367/get-the-text-in-anchors-within-text-nodes)问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:57:01.980

您需要遍历 JSoup 返回的 HTML 结构并整理文本节点，而不是这样做。这样，您就可以让 JSoup 确定什么是真正的文本，并且将为您处理实体编码（例如`&amp;`->`&`等）。

有关更多信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/7164376/how-to-extract-separate-text-nodes-with-jsoup)。

# tfs - 无法将 Teamcity 连接到 Team Foundation Service / TFSPreview.com - 错误“您必须使用前向兼容性更新来更新您的客户端”

> ID：13988453
> 
> 赞同：2
> 
> 时间：2012-12-21T10:34:52.623
> 
> 标签：tfs, teamcity, teamcity-7.0, azure-devops

Windows 7 64 位构建机器上的 Teamcity 7.1.3

该盒子目前正在愉快地构建存储在 TFS2005 服务器中的 VS2008 项目，但我正在尝试存储在 TFSPreview / TF 服务中的 VS2012 项目，我无法通过设置 VCS 根。

单击测试连接时，我得到以下信息。

```
Test connection failed in VS2012 Test against TFSPreview :: VS2012 - Build 
Configuration for Hello World. TFS failed. ExitCode: 1
stdout: TFS Native Verifier v7.1 Copyright (C) 2006-2012 JetBrains s.r.o.
Running under .NET Framework 4.0.30319.17929
INFO  - Use Tfs from JetBrains.TeamCity.Tfs.Tfs8Accessor
TFS Native Accessor v7.1 Copyright (C) 2006-2012 JetBrains s.r.o.
INFO  - Connecting to server https://[our TFS Area].visualstudio.com/DefaultCollection
Connection test:
  Server='https://[our TFS Area].visualstudio.com/DefaultCollection'
  Username='[username email]'
  Root='$/Hello World'
ERROR - The request failed with HTTP status 400: TF253023: You must update your client   
with the Forward Compatibility Update in order to connect to the Team Foundation Server 
that you selected. To obtain this update, go to the Microsoft Web site:   
http://go.microsoft.com/fwlink/?LinkId=166482.
System.Exception: The request failed with HTTP status 400: TF253023: You must update 
your client with the Forward Compatibility Update in order to connect to the Team 
Foundation Server that you selected. To obtain this update, go to the Microsoft Web 
site: http://go.microsoft.com/fwlink/?LinkId=166482\. ---> System.Net.WebException: The 
request failed with HTTP status 400: TF253023: You must update your client with the 
Forward Compatibility Update in order to connect to the Team Foundation Server that you 
selected. To obtain this update, go to the Microsoft Web site: 
http://go.microsoft.com/fwlink/?LinkId=166482. 
```

但是，在运行链接中指定的安装程序时，我收到以下消息：

```
The upgrade patch cannot be installed by the windows installer service because the   
program to be upgraded may be missing, or the upgrade patch may update a different 
version of the program. Verify that the program to be upgraded exists on your computer 
and that you have the correct upgrade patch. 
```

因此，我被困住了。:(

我还从 VS2005 TFS tfc 目录安装了 Team Foundation Explorer，目的是使我能够在错误链接中运行原始安装程序。但仍然是相同的错误。

我怎样才能克服这个错误？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:33:09.410

根据[TeamCity 博客，TeamCity 7.1.4 增加了对 tfsPreview.com 的支持](http://blogs.jetbrains.com/teamcity/2013/02/07/teamcity-7-1-4-build-24331-is-ready/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:30:59.540

好的，基本上这还行不通。当我输入这个时，TeamCity 的最新版本是 7.1.3，JetBrains 已经回复我说..

```
7.1.3 supports local TFS 2012 installations. 
What we do not support is Windows Live authentication that is used for cloud instances of TFS. 
```

使用备用凭据在 7.1.3 中也不起作用，因此基本上在当前版本中它看起来像是一个禁忌。

JetBrains 声明它计划在版本 8 中修复，但根据修复情况，它*可能*会向后移植到 7.x。如果是这样，我会相应地更新它。

# vba - 使用 VBA 将 HTML 文本从 Outlook 复制到 Word

> ID：13988457
> 
> 赞同：1
> 
> 时间：2012-12-21T10:34:57.097
> 
> 标签：vba, outlook

我有一些 Outlook VBA 代码可以创建 Word 文档并粘贴用户之前选择的电子邮件部分，例如（删除了一些不相关的代码部分）

```
Private Sub CreateDoc(M As MailItem)
Dim WApp As Word.Application, WDoc As Word.Document, I As Inspector

    Set I = M.GetInspector

    Set WApp = New Word.Application
    WApp.Visible = True
    Set WDoc = WApp.Documents.Add

    Select Case I.EditorType
    Case olEditorWord
        ' this works like a charm, even if multiple parts selected in MailItem
        I.WordEditor.Application.Selection.Copy
        WApp.Selection.PasteAndFormat wdFormatOriginalFormatting

    Case olEditorHTML
        ' trouble starts here ... I don't get it ... best I came up with is
        WApp.Selection.InsertAfter I.HTMLEditor.Selection.CreateRange.Text

    Case Else
        ' unsupported formats
    End Select

    ' clean up
    Set I = Nothing
    Set WDoc = Nothing
    Set WApp = Nothing
End Sub 
```

适用于 Outlook 2003 和 2010

**问题：**

我的问题在于`olEditorHTML`我无法弄清楚如何获取包括格式在内的选定文本。到目前为止，我能想到的最好的方法是插入纯文本。谁能帮我找到正确的代码，将 HTMLEditor 中的选定文本导入 Word，包括格式（就像您手动执行 select/Ctrl-C/Ctrl-V 一样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:52:26.100

感谢您对这篇文章。你的问题实际上成了我的一个解决方案[解决一个非常棘手的问题]。

下面的行对我有用，也许它也对你有用[如果你还在寻找解决方案:)

Change the I.WordEditor.Application.Selection.Copy to I.WordEditor.Selection.Copy and it may work.

# codeigniter - 如何在 codeigniter 中更新购物车

> ID：13988461
> 
> 赞同：0
> 
> 时间：2012-12-21T10:35:06.817
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url

我正在使用购物车库，并在运输页面中显示数量（在文本框中）、价格、描述、小计、总计。下面是更新链接，按更新应该去控制器购物车->更新

```
<a href="<?php echo BASE_INDEX_URL; ?>/cart/update/<?php echo $items['rowid'];?>">Update </a> 
```

下面是更新动作，如果我将默认数量值设置为 3，则更新购物车类（表示数量、价格、描述）

```
public function update($rowid)
{
    $data=$this->cart->update(array(
        'rowid'=>$rowid,
        'qty'=>3
    ));

    $this->cart->update($data);  

    redirect('cart/shipping');
} 
```

但是我想从特定项目的运输页面中的文本字段中获取数量值并进行更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:22:25.130

You're not passing the textbox value to the new page. You'll either need to `POST` data to the page via a form, or pass the value from the textbox in the url.

add this to your view:

```
<form action="" method="POST">
  <input type="text" name="quantity" value="" />
  <!-- OTHER FORM FIELDS HERE -->
  <input type="submit" name="submit" value="UPDATE" />
</form> 
```

and your controller:

```
public function update($rowid)
{
    $data=$this->cart->update(array(
        'rowid'=>$rowid,
        'qty'=> $this->input->post('quantity');
    ));

    $this->cart->update($data);  

    redirect('cart/shipping');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T07:03:38.007

我知道这已经晚了，但可能对其他人有帮助，你需要做这样的事情，

将此添加到您的视图文件中

```
 <?php echo form_input(array('name' =>'qty[]', 'type'=>'number','class'=>'form-control', 'style'=>'width:75px' ,'value' => $items['qty'], 'maxlength' => '3', 'size' => '5')); ?>
    <?php echo form_input(array('name' =>'rowid1[]', 'type'=>'hidden', 'value' => $items['rowid'], 'maxlength' => '3', 'size' => '5')); ?> 
```

这在你的控制器文件中

```
 public function updateCart()
{
    $i = 0;
    foreach ($this->cart->contents() as $item) {

        $qty1 = count($this->input->post('qty'));
        //    print_r($qty1);
        //$i=1;
        for ($i = 0; $i < $qty1; $i++) {
            echo $_POST['qty'][$i];
            echo $_POST['rowid1'][$i];
            $data = array('rowid' => $_POST['rowid1'][$i], 'qty' => $_POST['qty'][$i]);
            $this->cart->update($data);
        }
       // $this->load->view('cart');

    }
    redirect('Shoppingcart/viewcart');
} 
```

# jenkins - maven 多模块 pom 和 jenkins 工作

> ID：13988469
> 
> 赞同：3
> 
> 时间：2012-12-21T10:35:46.583
> 
> 标签：jenkins, maven-3

我有一个 pom 的层次结构，有一个父 pom，所有其他 pom 都继承自（可能是传递的）。詹金斯应该如何为此设置工作？应该有一个工作 pr project/pom，还是只有一个指向顶级 pom 的工作？我的目标显然是让 jenkins 只构建更改后所需的内容。一个指向顶级 pom 的作业似乎可以重建一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:38:20.547

只需执行主 pom。它会做剩下的事情。只需确保从 svn 或 git 或您使用的任何 scm 签出所需的一切。

编辑：Jenkins 中有一个选项可以构建增量。这就是你需要的。

# web-services - asmx webservice 偶尔返回空字符串

> ID：13988476
> 
> 赞同：1
> 
> 时间：2012-12-21T10:36:30.763
> 
> 标签：web-services, visual-studio-2005, asmx

在 VS2005 VB.Net 应用程序中，我正在使用免费的网络服务将旧的比利时帐号转换为 Iban： [http ://www.ebcs.be/iban/IBANBIC.asmx](http://www.ebcs.be/iban/IBANBIC.asmx)

奇怪的是，该服务有时会返回空字符串，而有时会返回正确的字符串。

我已经用提琴手检查了流量。请求已正确发送。只有一次响应返回一个空字符串，另一次使用相同的请求它返回我需要的字符串。

这是调用服务的代码

```
Public Function convertToIban(ByVal rekeningNummer As String) As String()
            Dim IbanService As IbanConversie.IBANBIC = New IbanConversie.IBANBIC()
            Dim rekeningZonder As String = rekeningNummer.Replace("-", "")
            Dim IbanBic(1) As String
            Try
                Dim Iban As String = IbanService.calculateIBAN1("BE", rekeningZonder)
                IbanBic(0) = Iban.Remove(0, 5)
                Dim Bic As String = IbanService.BBANtoBIC(rekeningZonder)
                IbanBic(1) = Bic
            Catch ex As Exception
                System.Windows.Forms.MessageBox.Show("Kan geen verbinding maken met de webservice. Controleer of uw internetverbinding werkt.")

            End Try

            Return IbanBic
        End Function

 Public Function convertFromIban(ByVal IBANNummer As String) As String()
            Dim IbanService As IbanConversie.IBANBIC = New IbanConversie.IBANBIC()
            Dim Rekening(1) As String
            Try
                Rekening(0) = IbanService.getBelgianBBAN(IBANNummer)
                Rekening(1) = IbanService.BBANtoBIC(Rekening(0))
            Catch ex As Exception
                System.Windows.Forms.MessageBox.Show("Kan geen verbinding maken met de webservice. Controleer of uw internetverbinding werkt.")
            End Try

            Return Rekening
        End Function 
```

有两种情况：

如果我首先运行 convertFromIban，则返回请求的字符串。如果我在此之后运行 convertToIban，也会返回请求的字符串。

如果我首先运行 convertToIban，则返回 Iban 字符串，Bic 字符串返回一个空字符串。如果我接下来运行 convertFromIban，则只返回空字符串。

这在免费网络服务中很常见，还是有其他解释？

我不想把这归咎于 12 月 21 日:-)

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:24:06.750

一个快速点。您似乎没有清理您的服务“IbanService”。如果多次调用此代码，可能会给您带来一些问题。

# blackberry - 如何列出黑莓中 res 文件夹的内容？

> ID：13988478
> 
> 赞同：1
> 
> 时间：2012-12-21T10:36:40.717
> 
> 标签：blackberry, java-me

如何列出黑莓中 res 文件夹的内容？例如，如果 res 文件夹有四个文件，我想在 String 数组中获取这些文件的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:45:13.793

我很想在这方面犯错，但我不确定你能做到这一点。我以前尝试过类似的方法，但从未找到解决方案。

我考虑过尝试获取对我文件夹中的*一个*已知文件的引用`res\`，或者可能是顶级`res`目录本身。从那里，我将枚举目录树的内容。

问题是这样做

```
InputStream input = getClass().getResourceAsStream("/res/img/icon.png"); 
```

会给你一个`InputStream`，它不会让你访问文件系统信息（它只是一个流，它是一个抽象）。

而且，如果您尝试获取文件连接

```
FileConnection conn = (FileConnection) Connector.open("local:///img/icon.png"); 
```

您会被告知 Connector 类不支持该`local:///`协议（我也尝试过使用`cod:///`URL 方案，但没有运气）。

## 解决方法

我唯一建议的是，由于您的资源文件夹是只读文件夹，您应该能够在**构建时**列出它们的内容，而不必**在运行时**在您的应用程序中进行。

我不知道您使用的是哪个构建系统（例如 Eclipse 插件、bb-ant-tools、JDE 等），但您当然可以编写一个桌面 Java 应用程序来解析您的项目`res/`文件夹并将内容写入**xml**文件，该文件也将放置在您的`res/`文件夹中。

然后，在运行时，您可以从 xml 文件中读取目录列表。

就像我说的，我很想知道应用程序中是否有办法做到这一点，但如果没有，某种预构建脚本也应该可以工作。

# python - 使用 pymongo 从磁盘加载和保存 mongoDB 数据库

> ID：13988479
> 
> 赞同：3
> 
> 时间：2012-12-21T10:36:49.610
> 
> 标签：python, mongodb, pymongo

我是 mongoDB 和 pymongo 的新手，试图学习如何从磁盘加载和保存数据库，以便我可以随身携带它，将它发送给人们等。我已经阅读了[http://api.mongodb上的教程.org/python/current/tutorial.html](http://api.mongodb.org/python/current/tutorial.html)但找不到有关保存和加载数据库的有用信息。

假设我们创建一个数据库，如：

```
import pymongo
mongo = pymongo.Connection()
db = mongo['my_db']
col = db['my_col']
col.insert({'name': 'Adam','occupation': 'student'})
col.insert({'name': 'John','occupation': 'officer'})
#how can we save the database to disk after this point 
#and later read it from another program? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T11:26:51.577

MongoDB 文件是可移植的，有几种方法可以实现您正在寻找的内容：

*   将数据目录复制`mongod`到另一台计算机。该目录通常位于`/data/db/mongodb`. 在另一台计算机上，您只需将远程目录替换为您复制的目录并重新启动远程`mongod`，此时您将在其系统上拥有数据。据我所知，MongoDB 没有热交换功能，您可以按需切换目录而无需停机。

*   对您的数据进行热备份，并使用 MongoDB 的导出和导入功能来选择要放置到远程机器上的数据子集。您将通过`mongodump`和进行热备份`mongorestore`。您可以在此处找到通用文档页面：http: [//docs.mongodb.org/manual/administration/backups/#using-binary-database-dumps-for-backups](http://docs.mongodb.org/manual/administration/backups/#using-binary-database-dumps-for-backups)

*   导出数据的 CSV/JSON 格式并将其导入远程计算机。这很像这个特定场景中的二进制备份，除了它们对终端方等更具可读性。我还应该注意，这种方法只插入，它与批量插入客户端迭代相同（在 PHP 之类的东西中） CSV 并在 MongoDB 服务器上调用批量插入。您可以在此处找到有关`mongoexport`和`mongoimport`（执行此操作的程序）的更多信息：http: [//docs.mongodb.org/manual/administration/import-export/](http://docs.mongodb.org/manual/administration/import-export/)

您还可以在此处找到与备份数据、移动数据和在外国机器上恢复数据相关的一般信息：http: [//docs.mongodb.org/manual/administration/backups/](http://docs.mongodb.org/manual/administration/backups/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:14:54.687

*   要使用 pymongo 在 mongodb 中插入新条目，您所做的就足够了。即这样做

    col.insert({'name': 'John','occupation': 'officer'})

将这些条目自动保存在集合中。您还可以像这样使用 pymongo 更改条目：

```
col.update({'name': 'Adam'},{'$set':{'occupation': 'officer'}}) 
```

最后关闭连接也是一个好习惯：

```
mongo.close() 
```

# axapta - 将文档附加到 AX 2012 中的记录

> ID：13988484
> 
> 赞同：0
> 
> 时间：2012-12-21T10:36:59.190
> 
> 标签：axapta, x++, microsoft-dynamics, dynamics-ax-2012, ax

我想为 AX 2012 表格中的特定记录附加一个 pdf 文件。

怎么做？请告诉我一步一步的过程..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:56:22.777

您需要查看文档管理。这里是介绍 [http://technet.microsoft.com/en-us/library/aa549988.aspx](http://technet.microsoft.com/en-us/library/aa549988.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T21:05:24.550

Docuref 指定参考。DocuActionArchive.add(..) 采用文档和路径。

[http://msdn.microsoft.com/en-us/library/docuactionarchive.add.aspx](http://msdn.microsoft.com/en-us/library/docuactionarchive.add.aspx)

[http://msdn.microsoft.com/en-us/library/docuref.aspx](http://msdn.microsoft.com/en-us/library/docuref.aspx)

# macos - Jenkins 无法克隆 GIT 存储库 (MacOS X 10.8.2)

> ID：13988490
> 
> 赞同：2
> 
> 时间：2012-12-21T10:37:31.357
> 
> 标签：macos, git, jenkins

系统：MacOS，标准 Jenkins 安装。我可以从我的用户克隆存储库。但是 Jenkins - 既不能来自 Git，也不能来自 GitHub（我的密钥已添加到 Git 和 GitHub）。我收到：“stderr：主机密钥验证失败。”

我已经将我的密钥复制到 /Users/Shared/Jenkins/.ssh - 但仍然没有运气:( 也许我将它复制到了不正确的位置？从 Jenkins 生成 ssh 密钥对我来说不是一个选项。

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:55:58.133

这通常与权限有关，因为 Jenkins 的进程以用户 'jenkins' 身份运行。

请参阅此处：**[如何以不同的用户身份运行 jenkins](https://stackoverflow.com/questions/6692330/how-to-run-jenkins-as-a-different-user)** -
特别是*[Sagar](https://stackoverflow.com/a/6694060)*和*[Peter Tran](https://stackoverflow.com/a/7936427)*的答案。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:21:40.590

就像错误所说的那样，问题（至少首先）在于主机密钥验证。首次连接 ssh 服务器时，ssh 客户端会提示您检查并接受主机密钥。（当然没有人这样做，所以我不知道为什么它会打扰......）

你可以

```
sudo -u jenkins -i 
```

进而

```
ssh git@github.com 
```

然后回复提示。或者，您可以禁用主机密钥检查。**在man ssh_config**中查找 StrictHostKeyChecking 。

# jquery-ui - jQuery UI 自动完成小部件 - 如何获取对菜单的引用？

> ID：13988492
> 
> 赞同：14
> 
> 时间：2012-12-21T10:37:45.187
> 
> 标签：jquery-ui

我希望能够获得对自动完成构建的菜单对象的引用（因此我可以获得`.attr("id")`例如），但我对 jQuery/javascript 不是很熟悉。在源代码中，我发现了这个：

[https://github.com/jquery/jquery-ui/blob/1-9-stable/ui/jquery.ui.autocomplete.js#L182](https://github.com/jquery/jquery-ui/blob/1-9-stable/ui/jquery.ui.autocomplete.js#L182)

所以有一个物体飞来飞去，我似乎无法找到如何抓住它。

因此，例如，如果我有一个带有自动完成绑定的输入，如下所示：

```
// input = reference to the input text box on the form
input.autocomplete({
  select: function(event, ui) {
    // how to get the reference here?

    // some things I've tried
    // return input.menu
    // return input.data("menu")
    // and a few others but they didn't work either
  }
}); 
```

我尝试查看数据对象本身，但是有很多选项我可以花一整天时间查看它，但仍然找不到我要查找的内容。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T10:42:25.960

您可以通过查看分配给其根元素（输入）的数据集来获取小部件的参考。然后获取菜单属性（及其底层元素）有点简单。)

```
 select: function(event, ui) {
    // that's how get the menu reference:
    var widget = $(this).data('ui-autocomplete'),
        menu   = widget.menu,
        $ul    = menu.element,
        id     = $ul.attr('id'); // or $ul[0].id
  } 
```

... as `this`within `select`function 指的是`<input>`当这个函数作为事件处理程序调用时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-09T13:23:49.420

一种更简单的方法： `$(this).autocomplete('widget');`
它与以下内容相同：

```
select: function(event, ui) {
// that's how get the menu reference:
var widget = $(this).data('ui-autocomplete'),
    menu   = widget.menu,
    $ul    = menu.element,
    id     = $ul.attr('id'); // or $ul[0].id 
```

}

它给出了 ul 列表

`$(this).autocomplete('widget').attr('id');`

# android - 寻找带有“设置”和“取消”按钮的 android DatePicker

> ID：13988499
> 
> 赞同：0
> 
> 时间：2012-12-21T10:38:13.590
> 
> 标签：android, datepicker, datetimepicker, timepicker

我正在为学校的一个项目开发一个 TODO 应用程序，并且可以选择为每个任务设置提醒。如果用户想要设置提醒，则会有一个带有 DatePicker 的弹出对话框。我只有带有“完成”按钮的 DatePicker，我希望用户能够从弹出对话框中取消，而不是按“返回”按钮。

我想这个问题与 API 级别或类似的东西有关吗？

PS：如果有人能在[此处](http://www.google.co.il/imgres?hl=en&sa=X&tbo=d&rlz=1C1CHMO_enIL514IL514&biw=1360&bih=629&tbm=isch&tbnid=40kv2cjQt_SytM%3a&imgrefurl=http://code.google.com/p/datetimepicker/&docid=wuVL23P5vhhF3M&imgurl=http://datetimepicker.googlecode.com/files/datetimepicker.png&w=480&h=800&ei=kjrUUM60I4aSswbJw4CAAw&zoom=1&iact=rc&dur=418&sig=112898430480167732459&page=1&tbnh=153&tbnw=92&start=0&ndsp=27&ved=1t:429,r:0,s:0,i:86&tx=44&ty=67)指出 datetimepicker 的开源代码，那就太好了。在谷歌代码上找到它，但那里只有一个 .PNG 和一个 .apk 下载。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T10:29:54.760

最终，我构建了一个与上面链接中的非常相似的自定义对话框。随意使用它，希望它对某人有所帮助。整个应用程序代码在这个 url 中：git://github.com/danielemesh/Remind.ME.git

# http - Pragma：服务器响应中的 no-cache 正在影响 HTTPS 中浏览器历史记录的行为

> ID：13988500
> 
> 赞同：1
> 
> 时间：2012-12-21T10:38:17.613
> 
> 标签：http, browser, https, http-headers, browser-cache

好的，所以我得到了浏览器不应该混淆历史存储和网络缓存的规则：点击返回不应该向服务器发送请求。我也知道浏览器制造商拥有打破这条规则的诗意许可。

我没有得到以下内容（请留在我这里）......

OK：用 HTTP 浏览我们的网站，历史按钮没有向服务器发送请求。伟大的！行为符合预期。

NOK：在 HTTPS 模式下浏览同一站点上的历史记录时，Chrome 运行良好，但 IE9/10 和 FF 却没有。他们会将 HTML 页面的请求发送到服务器，然后正确地使用存储来存储静态文件。为什么有区别？

因此，经过一番摸索和测试后，我发现`Pragma:no-cache`我们发送的响应中存在标头是造成这种行为的原因。删除标题后，这本来就不应该存在，IE 和 FF 在 HTTPS 中使用历史按钮时表现良好 - 不再发送请求。

现在，现代浏览器应该忽略并仅在请求中使用的标头的存在怎么会导致浏览器历史导航中出现这个奇怪的问题？

# jquery - Chrome 和 Opera 中未添加表单标签

> ID：13988501
> 
> 赞同：1
> 
> 时间：2012-12-21T10:38:17.840
> 
> 标签：jquery, html, jquery-ui-dialog, forms

我的表单上有一个按钮。当我单击该按钮时，我首先将 ajaxpost 发送到服务器上的网页，获取指定 div 的内部 html，最后将该 html 附加到另一个将显示 jqueryui 对话框的 div。这是代码：

```
$('#window').html(content).
dialog({
    title: title,
    show: 'drop',
    hide: 'drop',
    width: 400,
    buttons: buttons,
    position: { my: 'center', at: 'center', of: window }
}
); 
```

这是发布页面上 div 的内部 html：

```
 <div id="cardOrder" class="cardOrder-div">
        <form runat="server" id="frmAjax" >
        <table class="cardOrder-tbl">
        ......
        </form>
  </div> 
```

我对 Chrome 和 Opera 有疑问。当我第一次单击该按钮并显示带有上述 html 内容的 jqueryui 对话框时，缺少“form”标签。但是下次当我呈现对话框时，会添加表单标签。如果没有表单标签，我将无法提交。Firefox 和 IE 没有这个问题。表单标签是从第一个对话框显示中添加的。

编辑：当我调试代码以查看从 ajax 响应返回的 html 内容是否包含表单标记时，我可以在那里看到它。但是当内容被添加到 div 时，它会以某种方式消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:31:42.207

我相信默认情况下 jquery 对话框会添加到`body`标签的末尾，因此，对话框中的任何控件都不是表单的一部分，并且不会发布，您可能需要添加类似这样的内容

```
$('#DIALOGID').dialog({
        open:function(event, ui){
            $(this).parent().appendTo('form');
        }
    });
    $('#DIALOGID').dialog('open'); 
```

这会将对话框 HTML 附加到表单标记的末尾，然后可以在后面的代码中访问对话框中的控件，

另外，我不相信您可以在一个页面中拥有超过 1 个 Form 标签。

**除非这个答案完全没有帮助**

# delphi - 有没有办法将 __history 文件夹移动到另一个目录？

> ID：13988502
> 
> 赞同：1
> 
> 时间：2012-12-21T10:38:19.797
> 
> 标签：delphi, delphi-xe2

`__history`我对所有 Delphi 项目都使用源代码控制，我对这些文件夹有点恼火。可以按照此处所述禁用此功能：

[Delphi 2007 - 如何避免拥有 \history 文件夹？](https://stackoverflow.com/questions/836877/delphi-2007-how-to-avoid-having-a-history-folder)

我发现历史记录功能很有用，但不想`__history`在我的源代码中包含这些文件夹。是否可以让 IDE 在源代码文件夹之外写入历史文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:02:52.290

我确信您不能保留该功能并将`__history`目录存储在其他地方。如果您想要该功能，那么您需要源代码旁边的文件夹。

这些文件夹是隐藏的，只要您正确配置了修订控制系统，您就永远不需要知道它们。

我还建议使用 Andreas Hausladen 的[DDevExtensions](http://andy.jgknet.de/blog/ide-tools/ddevextensions/)，它具有在`__history`文件夹为空时删除文件夹的功能。

![在此处输入图像描述](../Images/0896ca2909342d6dd7dadd675cfd7ff6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:14:15.680

从未使用过[DelphiPRAXiS 线程“Pfad für Sicherungsdateien (__history) ändern”](http://www.delphipraxis.net/161571-pfad-fuer-sicherungsdateien-__history-aendern.html)中的以下内容，但也许有帮助

[历史定位器 SVN 链接](http://theunknownones.googlecode.com/svn/trunk/Delphi/HistoryRelocator/)

# django - 相同的 Django 项目不同的 GIT 存储库

> ID：13988507
> 
> 赞同：7
> 
> 时间：2012-12-21T10:38:38.393
> 
> 标签：django, git, repository, django-apps

在同一个 Django 项目中拥有两个不同存储库的最佳方式是什么？

几个月前我开始开发一个项目，我在存储库中有整个文件夹。我想在项目中重用一些应用程序，并且我想为它们创建一个不同的存储库，因为它们将是衍生项目。但我想保持更新。

实现这一目标的最佳工作流程、方法等是什么？或者这是一个不好的方法？

谢谢！

哈维

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T11:47:35.060

您可以将每个应用程序包装为一个 python 包，它有自己的 GIT 存储库。并将所有包保存在一些私有（或公共？）python 包存储库（如[Gemfury](http://www.gemfury.com/l/pypi-server)）中。

然后，在您的项目中，只需在安装 django 本身时使用该应用程序.. pip install myapp

这样，应用程序就可以重用并与任何项目分离。

（这对我自己很有效..也许有更好的方法）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:49:11.323

您可以使用[子模块](http://git-scm.com/docs/git-submodule)，

```
$git submodule add git://github.com/yourusername/project2.git project2

$cat .gitmodules 
```

.gitmodules 输出：

```
[submodule "project2"]
  path = project2
  url = git://github.com/yourusername/project2.git 
```

如果你想克隆一些 git 项目，比如子模块，

```
git clone git://github.com/yourusername/project2.git
cd project2
git submodule init 
```

# css - 仅文本渐变 Chrome 问题

> ID：13988508
> 
> 赞同：0
> 
> 时间：2012-12-21T10:38:42.263
> 
> 标签：css

CSS

```
 h1 {
      font-size: 72px;
      background: -webkit-linear-gradient(#eee, #333);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    } 
```

HTML

```
<h1>Hello World</h1> 
```

我在 chrome 浏览器中看到带有渐变的“Hello World”文本。即使我添加了其他前缀，例如 -moz,-mo 我在 firefox、opera 或 IE 中看不到它。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-20T17:21:13.033

尝试这个

```
 background: $gradient;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display: inline-block; 
```

为我在所有浏览器上工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:46:41.770

您需要为 -moz 和 -o(simone comment) 添加相同的内容

在这里你可以找到一个线性梯度的例子。
[http://www.the-art-of-web.com/css/linear-gradients/#.UNQ9Ztd2EuM](http://www.the-art-of-web.com/css/linear-gradients/#.UNQ9Ztd2EuM)

**编辑**
不幸的是，以前的海报是正确的
[-moz-background-clip:text 在 Firefox 中不起作用](https://stackoverflow.com/questions/9362639/moz-background-cliptext-does-not-work-in-firefox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:53:03.343

不幸的是，我认为只有基于 WebKit 的浏览器实现了 text-fill-color 属性。据我所知，Mozilla 还没有解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:27:17.330

检查[这个](http://colorzilla.com/gradient-editor/)。这是一个很棒的渐变网站。您可以同时为任何浏览器制作任何渐变，并且它还支持旧版本的ie。

# xcode - 在 Eclipse 中设置不同的构建目标，就像在 Xcode 中一样

> ID：13988510
> 
> 赞同：3
> 
> 时间：2012-12-21T10:38:57.003
> 
> 标签：xcode, eclipse, target

我知道标题可能有点误导，所以如果你找到更好的词来表达我的意思，请随时修改它。我从 Xcode 中获取“目标”的概念。

我是一名 iPhone 开发人员，现在转向 android 开发人员。使用 Xcode，我可以执行以下操作，假设我有一个应用程序列表，用户可以在其中种植不同的植物：

1.  我可以设置不同的目标，例如苹果、熊等。

2.  对于每个目标，我可以选择加载不同的数据库/UI 图像，它们都在项目文件中，同名但在不同的文件夹中，我可以设置哪个目标使用哪个文件。

3.  在构建阶段，我只需选择目标并单击构建，然后我就可以获得我的应用程序列表。

这样做的好处是我不需要更改代码中的任何内容，只需从设计师那里获取资源并更改一点项目设置，就可以完成。

现在有了日食，我不知道我怎么能这么简单。我必须删除旧资源并在那里复制新资源以构建不同的目标。当我必须为 20 个应用程序进行更新时，这会花费太多时间。那么有没有更好的方法来实现我的要求？eclipse 的任何插件还是有一些我还不知道的简单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-30T10:40:46.863

我得到了一个使用 Android Studio 的 Gradle 构建系统的解决方案，即定义我的应用程序的不同风格，然后使用构建变体配置，从相同/共享的代码库、资源等生成不同的应用程序。

根据 Android 开发者文档

> 构建系统使用产品风格来创建应用程序的不同产品版本。您的应用程序的每个产品版本都可以具有不同的功能或设备要求。构建系统还使用构建类型将不同的构建和打包设置应用于每个产品版本。每个产品风味和构建类型组合形成一个构建变体。构建系统会为您应用的每个构建变体生成不同的 APK。现在，一个具有相同代码库的单个项目可以拥有两种或多种产品风格，例如（付费风格、免费/演示风格）等。

有关更多信息，请参阅[构建变体和产品风味文档](https://developer.android.com/tools/building/configuring-gradle.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T16:03:06.177

我开始了一个类似的话题并添加了赏金，所以我什至得到了回应。

[这](https://stackoverflow.com/questions/23603515/modular-android-project-how)是我在网上找到的问题和可能的解决方案的解释主题。这些主要是图书馆项目和广播接收器。也许图书馆项目对你有用？

对于 Android/Eclipse 的解决方案，我也得到了令人满意的[答案。](https://stackoverflow.com/a/23810577/2320456)它建议使用`SharedPreferences`来确定哪些代码/图像/包被调用，哪些不被调用。我看到的问题是整个代码和资源必须在应用程序中，所以如果一个人有很多不同的图像，这会变得非常大。

也许那里会有其他有用的答案，你可以在几天后看看。我已经知道的是，在 Eclipse 中没有像目标这样的东西……在 Android Studio 中，有一些模块看起来很相似，但这并没有真正帮助我们。

# git - 从所有以前的提交中删除一个目录

> ID：13988511
> 
> 赞同：19
> 
> 时间：2012-12-21T10:38:59.780
> 
> 标签：git, version-control

Git Repo，有一个包含三个文件的文件夹，名称中`ABC`都有空格, 和. 我想删除文件夹和文件。我只知道如何通过此命令删除文件`file - 1.ext``file - 2.ext``file - 3.ext`

```
git filter-branch \
  --index-filter 'git rm --cached --ignore-unmatch FILE' \
  --prune-empty --tag-name-filter cat -- --all 
```

那么你`git push origin master --force`。

(1) 但是如何`ABC`从所有以前的提交中删除文件夹及其文件？

此外，这些文件的名称中有空格，并且以下内容未在 repo 提交中检测到它们：

```
git filter-branch \
  --index-filter 'git rm --cached --ignore-unmatch file\ -\ 1.ext' \
  --prune-empty --tag-name-filter cat -- --all 
```

(2) 删除名称中带有空格的文件的语法应该是什么？笔记

*   操作系统
*   github

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-21T14:49:26.053

假设你从一段历史开始

```
$ git lola --name-status
* e709131 (HEAD, master) 酒吧
| 一间酒吧
* 61493ac ABC/文件 - 3.ext
| ABC/文件 - 3.ext
* 34cce9e ABC/文件 - 2.ext
| ABC/文件 - 2.ext
* 115e6d5 ABC/文件 - 1.ext
| ABC/文件 - 1.ext
* 5ea5b42 富
  一个富
```

注意：[git lola](http://blog.kfish.org/2010/04/git-lola.html)是一个非标准但非常有用的别名。

[`git rm`](http://www.kernel.org/pub/software/scm/git/docs/git-rm.html)支持删除子树的选项。

> **`-r`**
> 给定前导目录名称时允许递归删除。

运行后

```
$ git filter-branch --index-filter 'git rm --cached -r --ignore-unmatch ABC' \
  --prune-empty --tag-name-filter cat -- --all
```

你会看到类似的输出

```
重写 115e6d5cd06565ca08f1e5c98c4b91246cf59fa1 (2/5)rm 'ABC/file - 1.ext'
重写 34cce9e90f832460137e620ebacc8a73a99e64ce (3/5)rm 'ABC/file - 1.ext'
rm 'ABC/文件 - 2.ext'
重写 61493ac3211808f34f616dbc33d51d193b3f45a3 (4/5)rm 'ABC/file - 1.ext'
rm 'ABC/文件 - 2.ext'
rm 'ABC/文件 - 3.ext'
重写 e709131f1fe6103adf37616c9fa500994aeb30d0 (5/5)rm 'ABC/file - 1.ext'
rm 'ABC/文件 - 2.ext'
rm 'ABC/文件 - 3.ext'

Ref 'refs/heads/master' 被重写
```

如果您对结果感到满意，请删除旧的主人

```
$ git update-ref -d refs/original/refs/heads/master
```

现在你有一段历史

```
$ git lola --name-status
* 19680d4 (HEAD, master) 酒吧
| 一间酒吧
* 5ea5b42 富
  一个富
```

要回答您的第二个问题，请说您只想删除`ABC/file - 2.ext`。请记住，您将需要两层引用：一层用于整个命令，另一层用于转义该命令的参数中的空格，即要删除的文件的名称。

一种方法是

```
$ git filter-branch --index-filter \
  'git rm --cached --ignore-unmatch "ABC/file - 2.ext"' --prune-empty \
  --tag-name-filter cat -- --all
```

注意单引号内的双引号。

如果您改为运行此命令，您的历史记录将变为

```
$ 混帐萝拉
* a8d1b0d (HEAD, master) 酒吧
* cff0c4e ABC/文件 - 3.ext
* 115e6d5 ABC/文件 - 1.ext
* 5ea5b42 富
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-21T12:54:42.290

而不是使用`--index-filter`，尝试使用`--tree-filter`：

```
--tree-filter <command>
    This is the filter for rewriting the tree and its contents. The argument is
    evaluated in shell with the working directory set to the root of the
    checked out tree. The new tree is then used as-is
    (new files are auto-added, disappeared files are auto-removed -
    neither .gitignore files nor any other ignore rules HAVE ANY EFFECT!). 
```

命令行：

```
git filter-branch --tree-filter 'rm -rf path/to/ABC' \
  --prune-empty --tag-name-filter cat -- --all 
```

# grails - 在 Grails 中进行数据库迁移的良好工作流程是什么？

> ID：13988514
> 
> 赞同：5
> 
> 时间：2012-12-21T10:39:09.157
> 
> 标签：grails, database-migration, grails-domain-class

我想使用[database-migration](http://grails.org/plugin/database-migration) grails 插件进行数据库迁移。当我第一次启动我的 Grails 应用程序时，所有数据库表都会自动创建。我的 DataSource.groovy 中的生产设置是：

```
production {

    dataSource {
        dbCreate = "update"
        url = "jdbc:mysql://localhost/myapp?useUnicode=yes&characterEncoding=UTF-8"
        username = "test"
        password = "test"
        dialect = org.hibernate.dialect.MySQL5InnoDBDialect
        properties {
           validationQuery = "select 1"
           testWhileIdle = true
           timeBetweenEvictionRunsMillis = 60000
        }
    }
} 
```

在我的 config.groovy 中，我设置了：

```
grails.plugin.databasemigration.updateOnStart = true
grails.plugin.databasemigration.updateOnStartFileNames = ['changelog.groovy'] 
```

当我向我的域类添加属性时，我需要调整更改日志文件。在这种情况下进行数据库迁移的最佳方法是什么？添加或删除列时我必须执行哪些步骤？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-03T01:21:13.673

正如您可能知道的那样，[不建议](http://grails.org/doc/latest/guide/conf.html#dataSource)`dbcreate`将该指令用于生产用途：

> 您也可以`dbCreate`完全删除该设置，如果您的架构相对稳定，并且绝对是在您的应用程序和数据库部署在生产中时，建议您这样做。

所以请记住，您将需要删除它（或设置为`'none'`）。

* * *

## 初始基线工作流程

1.  定义当前状态
2.  从更改日志创建数据库或标记为最新
3.  设置配置选项

第一步是让`changelog`反映当前状态。如果你有一个现有的数据库，你想用它来定义基线。否则，使用 GORM 定义表。

这些命令将为您的数据库生成基线。另外我选择使用 groovy DSL 格式而不是 liquibase XML，因为[可读性](http://www.w3.org/People/Bos/DesignGuide/readability.html).

### 现有数据库

如果您已经有一个包含数据的生产数据库，那有点棘手。您将需要从您的 grails 环境中访问该数据库或其副本。如果您操作副本，则需要将更新应用回您的生产（并可能将其作为计划中断进行管理）。

命令是：

```
grails [environment] dbm-generate-changelog changelog.groovy 
```

...其中`environment`可选地指定数据库定义为的 dev/test/prod/custom 环境。

之后，将关于更改日志的数据库标记为“最新”：

```
grails [environment] dbm-changelog-sync 
```

如果需要，然后将数据库重新应用于生产。

### 新数据库

如果您没有现有的数据库（或不在乎）：

```
grails dbm-generate-gorm-changelog changelog.groovy 
```

然后，从更改日志创建数据库：

```
grails [environment] dbm-update 
```

### 配置

您已经正确设置了选项：

```
grails.plugin.databasemigration.updateOnStart = true
grails.plugin.databasemigration.updateOnStartFileNames = ['changelog.groovy'] 
```

这些选项只是意味着插件将在应用程序启动时尝试将更改应用到数据库。

* * *

## 开发工作流程

1.  对域进行更改
2.  生成变更日志识别差异
3.  （备份和）更新数据库

所以现在你已经有了一个最新的数据库，你正在粉碎对域类的更改，添加新的和更改验证属性。

每次你想记录你的更改时，你想将你的 GORM 类与数据库中存在的类进行比较，并创建一个新的更改日志文件来记录差异：

```
grails [environment] dbm-gorm-diff [meaningful name].groovy --add 
```

这`environment`是您正在比较的数据库，并且`meaningful name`应该以某种方式反映正在应用的更改（可能是 JIRA 问题密钥、版本号或描述）。

该`--add`标志将`include`在`changelog.groovy`.

如果你已经配置`updateOnStart`好了，那么你就完成了！否则，要手动处理更新，请重复使用以下命令：

```
grails [environment] dbm-update 
```

* * *

## 实时调频

*   插件文档 -[入门](http://grails-plugins.github.io/grails-database-migration/docs/manual/guide/gettingStarted.html)
*   插件文档 -[一般用法](http://grails-plugins.github.io/grails-database-migration/docs/manual/guide/generalUsage.html)
*   上面的配置文件的答案指向一个很好的[教程](http://wpgreenway.com/posts/grails-db-migration-tutorial/)，该教程详细介绍了手动更改更改日志
*   Liquibase 文档 -[变更](http://www.liquibase.org/documentation/changeset.html)集（使用 XML 格式，但有助于理解概念）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:55:05.703

我找到了一个非常好的教程，它解释了我的问题的解决方案：

[Grails Db 迁移教程](http://wpgreenway.com/posts/grails-db-migration-tutorial/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:15:23.663

我将使用的方法是将每个表迁移到 Grails 域并正确设置**映射（非常重要！） 。**

然后让 Grails 第一次创建数据库，然后用您要迁移的数据库的先前**备份填充它。**

在此之后设置 Grails 配置以在每次启动时**更新数据库。**

我知道这看起来有点乱，但如果我必须这样做，我会这样做。

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T17:08:40.083

工作流程包括以下步骤：

1）使用命令安装插件 `grails install-plugin database-migration`

2）设置插件后运行命令：

```
grails dbm-generate-gorm-changelog changelog.groovy or changelog.xml 
```

默认情况下，它将在 grails-app/migrations/changelog.groovy 或 .xml 位置生成一个文件

3) 设置`dataSource dbcreate='none'`

3）现在，运行

```
grails dbm-changelog-sync 
```

这将创建一个表名 databasechangelog 并将根据您现有的模式插入条目。

而已。

# jsf - JSF rich:tab switchType=ajax 更新第一个选项卡

> ID：13988517
> 
> 赞同：1
> 
> 时间：2012-12-21T10:39:23.750
> 
> 标签：jsf, jsf-2, richfaces, ajax4jsf

我正在使用丰富的面孔。

```
<rich:tabPanel id="feedModifyDetails" switchType="client">
     <rich:tab id="ftpDefaultValuePanel" header="FtpDefaults">
           some code
     </rich:tab>

     <rich:tab id="feedSchedule" header="FeedSchedules" >       
           some code
     </rich:tab>

     <rich:tab id="feedFTPCommunicationParams" header="FeedFTPCommunicationParams">                                                      
           some code
     </rich:tab> 

     <rich:tab id="feedFTPErrorEscalations" header="FeedFTPErrorEscalations"  
             switchType="ajax">
           <ui:include src="ftpErrorEscalations.xhtml" />
     </rich:tab>    

     <rich:tab id="ftpErrorAction" header="FtpErrorActionDefaults"  switchType="ajax">
            <ui:include src="ftpErrorAction.xhtml" />
     </rich:tab>     
 </rich:tabPanel> 
```

如上面代码所示

1.  对于rich:tabPanel，我使用的是switchType="client"。
2.  对于最后 2 个 rich:tab，我使用了 switchType="ajax"。

预期结果：

1.  当用户单击选项卡时，将加载最后两个选项卡。

错误：当用户单击最后一个选项卡（AJAX 请求选项卡）中的任何一个时，将发送 ajax 请求，但响应将更新第一个选项卡，即：`<rich:tab id="ftpDefaultValuePanel" header="FtpDefaults" >`

**我做错了吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:32:09.057

通过放置`immediate=true`ajax 请求选项卡，您可以指示必须立即转换和验证此组件值（即，在应用请求值阶段），而不是等到流程验证阶段。

# jquery - 悬停时带有淡入淡出的简单图像交换

> ID：13988521
> 
> 赞同：2
> 
> 时间：2012-12-21T10:39:36.963
> 
> 标签：jquery, image, hover

我正在寻找一种简单的方法来在悬停时使用交叉淡入淡出交换图像。我见过很多解决方案——但我发现的一切似乎都臃肿而复杂。有没有一种简单的方法可以实现这一目标？

我正在使用的 Img 交换代码：

```
$(function() {
$(".img-swap").hover(
    function() {
        this.src = this.src.replace("_off","_on");
    },
        function() {
            this.src = this.src.replace("_on","_off");
    });
}); 
```

有没有办法在这里添加淡入/淡出？或者这是错误的方法吗？我尝试过的一切似乎都不起作用！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:59:54.427

**[jsBin 演示](http://jsbin.com/asafoq/1/edit)**

```
 $(".img-swap").on('mouseenter mouseleave', function( e ){

    var mE = e.type=='mouseenter';
    var c = ['_on','_off'];
    this.src = this.src.replace( mE?c[1]:c[0] , mE?c[0]:c[1] );
    $(this).hide().stop().fadeTo(1000,1);

  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:38:54.900

要交叉淡入淡出两个图像，两个图像都会在某个时候可见，因此您需要 DOM 中的两个图像。你可以只用一张图像来做，但是你必须淡出图像，交换源，然后淡入，这不是真正的交叉淡入淡出。

```
<img src="image1.png" id="test" />
<img src="image2.png" id="test2" />​ 
```

JS：

```
$('#test').on('mouseenter', function() {
        $(this).fadeOut('slow');
        $('#test2').fadeIn('slow');
});

$('#test2').css({left: $('#test').position().left, top: $('#test').position().top})
           .on('mouseleave', function() {
        $(this).fadeOut('slow');
        $('#test').fadeIn('slow');
});
​ 
```

[**小提琴**](http://jsfiddle.net/adeneo/xTw44/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:01:21.160

使用下面的代码，还包括 jquery。

```
 $("#one").hover(function(){$('#one').fadeOut(1000);$('#two').fadeIn(2000);}
);
 $('#one').fadeIn(2000);

<span id="one"><img serc="image1path"></span>
<span id="two" style="display:none"><img serc="image2path"></span> 
```

# sql-server-2012 - 不同行的总百分比

> ID：13988525
> 
> 赞同：0
> 
> 时间：2012-12-21T10:39:45.227
> 
> 标签：sql-server-2012

使用以下代码，我没有得到总百分比，而是每个不是“U”的值的百分比。

如何更改代码以获得总百分比？

```
SELECT grade, (COUNT(grade)* 100 / (SELECT COUNT(*) FROM studied)) AS Score
FROM studied
WHERE grade !='U'
GROUP BY grade 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:03:00.850

以下代码将返回一个值列表：*grade*和*score*。

*Grade*将显示除 U 之外的所有可用成绩*。Score*值将显示相应成绩（**包括**U）的总百分比。如果您想将*分数*作为**不包括**U 的分数的百分比，则以下 SQL 应该可以使用

```
SELECT grade, (COUNT(grade) * 100 / (SELECT COUNT(*) FROM studied WHERE grade !='U')) AS Score
FROM studied
WHERE grade !='U'
GROUP BY grade 
```

下面的截图显示了测试数据和查询结果

![在此处输入图像描述](../Images/f9834e179111053f11301a4b031b1ecb.png)

**编辑**

从您的最后评论看来，这个 SQL 应该可以完成工作：

```
SELECT (COUNT(grade) * 100 / (SELECT COUNT(*) FROM student)) AS Score
FROM Student
WHERE grade !='U' 
```

它将返回除 U 之外的所有成绩的总百分比。使用屏幕截图中的数据集，它将是 92（即 92%）

# objective-c - 用两根手指捏住 UIScrollView 时禁用平移

> ID：13988532
> 
> 赞同：3
> 
> 时间：2012-12-21T10:40:20.373
> 
> 标签：objective-c, uiscrollview, uigesturerecognizer

我想在检测到第二次触摸后停止滚动并用我自己的捏合手势处理触摸。我在滚动视图中试过这个：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if(event.allTouches.count > 2)self.panGestureRecognizer.enabled = NO;
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if(event.allTouches.count > 2)self.panGestureRecognizer.enabled = YES;
} 
```

但它不起作用。

试试这个：

`scroll.panGestureRecognizer.maximumNumberOfTouches = 1;`

但什么都没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:08:18.020

我找到解决方案。我重新定义了 UIScrollView，并添加：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

并禁用\启用平移手势：

```
if(pinch.state == UIGestureRecognizerStateBegan) scroll.panGestureRecognizer.enabled = NO; 
if(pinch.state == UIGestureRecognizerStateEnded) scroll.panGestureRecognizer.enabled = YES; 
```

现在我的捏手势起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:44:43.337

您可以使用这样的禁用滚动视图：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

       if ([touches count] == 2) {

       //Disable scrollview 
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:20:16.363

将`delayContentTouches`属性设置`UIScrollView`为 NO（而不是默认的 YES）。这将允许触摸立即传播到`subviews`滚动视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-23T01:31:10.023

我发现设置 UIPangestureRecognizer 的 enabled 属性不起作用，至少在我的代码中是这样。但是，设置 UIScrollView 的 scrollEnabled 属性对我有用。

```
scrollView.scrollEnabled = false;
scrollView.scrollEnabled = true; 
```

# google-app-engine - 在我的情况下，迁移 Google App Engine (GAE) 的最佳托管选项？

> ID：13988534
> 
> 赞同：4
> 
> 时间：2012-12-21T10:40:26.553
> 
> 标签：google-app-engine, amazon-ec2, cloud, cloud-foundry, cloud-hosting

我有一个小型的 Google App Engine 网站，似乎已经超出了它的规模，我想迁移到其他地方。

它基于 Java / Stripes Framework / Objectify，仅使用来自 Google 服务的 URLFetch。它目前使用约 60 小时的前端时间和约 4 GB 的数据存储，每天有约 5,000 名访问者进行约 25,000 次页面浏览。

我认为我应该迁移的原因：

*   我早先做了一些假设，这些假设不再有效，并且正在运行 1MB 内存缓存/数据存储限制。虽然我可以对此进行重构，但它可能会增加数据存储操作的数量/整体性能特征会恶化，并涉及数据库转换步骤（我也可以使用它来迁移到其他地方）
*   我想添加一些功能，这些功能将显着增加存储数据（至 100 GB）和前端时间
*   当我使用超过免费配额的资源时，成本的增加似乎上升得很快。虽然它们现在很容易管理，但如果该应用程序变得更流行，恐怕它可能不再负担得起。
*   一些稳定性问题（出现一些 OutOfMemoryErrors 和其他我无法解释的错误，并且无法在我的本地环境中很好地复制）

我正在评估以下选项：

1.  继续使用 GAE，优化应用程序，忍受不断增长的成本（缺点：仍然会有高成本和可靠性问题）

2.  迁移到使用 MongoDB 作为数据存储的 AWS EC2 / EBS（优点：可能是最成熟的解决方案，缺点：似乎难以设置，容易犯架构/设计错误）。

3.  使用 Appscale 希望在很大程度上保持我的应用程序原样，但将其托管在 AWS EC2 上（优点：在纸上看起来很容易，缺点：似乎假设主要是 Unix 开发环境，不知道生产是否准备好或幕后发生了什么）

4.  使用 CloudFoundry.com 和 MongoDB 作为数据存储（缺点：不知道是否准备好生产，测试后成本未知）

5.  通过一些托管服务提供商获得 VPS 或专用服务器，使用 MongoDB 作为数据存储进行部署（缺点：与其他选项相比，我想学习的东西可能更少，需要做大量的系统管理工作）

这是一个爱好网站，所以部分目标是在实践中学习一些新技术，我只想花时间学习正确的技术。

注释 - 我有一些但非常有限的系统管理技能，尤其是在 Linux 上，我不喜欢这样做。我之前在 MongoDB 中做过一个小项目（虽然从未投入生产）。我从未使用过任何 AWS 基础设施。

我的问题：

一种。AppScale 是否足够成熟，可以在没有太多麻烦（错误、缺乏文档等）的情况下运行小型网站？学习曲线是否非常陡峭？在场景 #3 中使用它需要多少系统管理？最重要的是 - 我是否正确理解 Google 1MB 等限制都存在于 AppScale 上？

湾。CloudFoundry 是否足够成熟，可以在没有太多麻烦（错误、缺乏文档等）的情况下运行小型网站？学习曲线是否非常陡峭？在场景 #4 中使用它需要多少系统管理？如果需要，我认为从 CloudFoundry.com 转移到另一个 CloudFoundry 应该相当容易。

C。在 AWS EC2 / EBS 上部署所描述的应用程序涉及多少系统管理？假设我不太关心临时中断，但关心永久数据丢失，我是否需要自己镜像 EBS，或者我可以让 AWS 去做吗？

d。哪些新选项（AppScale、CloudFoundry、EC2/EBS）适用于基于 Windows / Eclipse 的开发方法？哪个有最好的 Eclipse 插件？

我之所以问，是因为在快速查看 AppScale 文档后，他们似乎认为开发 VM 将由 Unix 主机托管，这对我来说是另一个麻烦。

e. 我的哪个选项 1.-5。你会推荐我的情况吗？

我现在在#2和#4之间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:09:37.867

只是一些观察：

一种。AppScale 是对其他技术（[运行时](http://appscale.cs.ucsb.edu/infrastructure.html)、[数据存储](http://appscale.cs.ucsb.edu/datastores.html)）的精简包装，因此总的来说它与那些底层部分一样可靠。对于小型非关键任务网站，IMO 足够可靠。顺便说一句，内存缓存 1MB 限制是每个对象，而不是每个内存缓存。所以我想你可以把它分解成多个更小的对象。

湾。我没有使用 CloudFoundry 的经验，但他们确实说他们是“测试版”并且他们没有 SLA：http: [//support.cloudfoundry.com/entries/20971351-cloud-foundry-sla](http://support.cloudfoundry.com/entries/20971351-cloud-foundry-sla) \

C。我猜一个星期几个小时。ESB 是基于磁盘的服务，因此您不应该使用它丢失数据。但是您仍然可以将 ECB 增量备份到 S3。有很多解决方案可以自动完成，例如： http: [//www.stardothosting.com/blog/2012/05/automated-amazon-ebs-snapshot-backup-script-with-7-day-retention/](http://www.stardothosting.com/blog/2012/05/automated-amazon-ebs-snapshot-backup-script-with-7-day-retention/)

d。IMO EC2 是最成熟的，可用的工具最多。请注意，AppScale 只是一个包装器 - 您可以将其部署到 EC2。开发环境（Eclipse+Windows）与部署环境无关（一般是Linux，也可以是EC2上的Windows）。

e. 我个人建议留在 GAE（= 选项 1）。恕我直言，其他任何事情都会不太可靠且成本更高（由于设置/支持成本，甚至没有比较基本服务成本）。

顺便说一句，如果您遇到 OutOfMemoryErrors，您应该真正检查您的代码。您将大量数据保存在内存中的什么位置？

# java - Java多行正则表达式调试

> ID：13988535
> 
> 赞同：1
> 
> 时间：2012-12-21T10:40:29.280
> 
> 标签：java, regex, multiline

在 Java 中，以下正则表达式

```
To: a@b\.com.*Subject: Please verify your email address 
```

不知何故在此文本中找不到匹配项：

```
Dez 21, 2012 10:29:58 AM com.google.appengine.api.datastore.dev.LocalDatastoreService init
INFO: Local Datastore initialized: 
    Type: High Replication
    Storage: In-memory
Dez 21, 2012 10:29:58 AM com.google.appengine.api.mail.dev.LocalMailService log
INFO: MailService.send
Dez 21, 2012 10:29:58 AM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   From: 
Dez 21, 2012 10:29:58 AM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   To: a@b.com
Dez 21, 2012 10:29:58 AM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   Subject: Please verify your email address
Dez 21, 2012 10:29:58 AM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   Body:
Dez 21, 2012 10:29:58 AM com.google.appengine.api.mail.dev.LocalMailService log
INFO:     Content-type: text/plain
Dez 21, 2012 10:29:58 AM com.google.appengine.api.mail.dev.LocalMailService log
INFO:     Data length: 4 
```

我的 Java 代码如下所示：

```
 Matcher matcher = Pattern.compile(regex, Pattern.MULTILINE).matcher(input);
    if (matcher.find()) {
        ...
    } 
```

这有点奇怪，因为当我使用此工具在线测试时，该模式似乎有效：[http ://regexpal.com](http://regexpal.com)

因此，Java 必须对这种模式进行一些不同的解释。有什么办法可以得到错误信息`Matcher`吗？

**更新**它应该找到：

```
To: a@b.com
Dez 21, 2012 10:29:58 AM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   Subject: Please verify your email address 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T10:46:14.623

您将要使用[`Pattern.DOTALL`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)而不是[`Pattern.MULTILINE`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#MULTILINE).

`DOTALL`使`.`匹配换行符。（这就是你想要的）

`MULTILINE`在每行的基础上制作`^`和工作。`$`

# scala - Scala，类层次结构和构造函数复制/粘贴

> ID：13988536
> 
> 赞同：2
> 
> 时间：2012-12-21T10:40:32.720
> 
> 标签：scala, inheritance, constructor, boilerplate

我一直在为这个烦人的问题苦苦挣扎一段时间，但没有找到一个优雅的解决方案。

假设我有这样一个类层次结构：

```
class StatWithBounds[A](val min: A, val max: A, val currentValue: A)
class StatBetween0And20(initialValue: Int) extends StatWithBounds[Int](0, 20, initialValue)
class PositiveStatOnly(initialValue: Int) extends StatWithBounds[Int](0, Integer.MAX_VALUE, initialValue)
class UncappedPercentage(initialValue: Int) extends StatWithBounds[Int](0, Integer.MAX_VALUE, initialValue) 
```

initialValue 的复制/粘贴过于冗长。此外，如果我想做这样的事情：

```
class Strength(initialValue: Int) extends StatBetween0And20(initialValue)
class Intelligence(initialValue: Int) extends StatBetween0And20(initialValue)
class Piety(initialValue: Int) extends StatBetween0And20(initialValue) 
```

多么糟糕的复制/粘贴（想象我还有 10 个子类）！

有没有一种优雅的方法来解决这个混乱的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T11:52:41.377

如果您不需要原始类，则可以使用特征：

```
trait StatWithBounds[A] {
  def min: A
  def max: A
  def currentValue: A
}

trait StatBetween0And20 extends StatWithBounds[Int] {
  def min = 0
  def max = 20
}

class Strength(val currentValue: Int) extends StatBetween0And20
class Intelligence(val currentValue: Int) extends StatBetween0And20
... 
```

或者，您可以根本不使用这么长的变量名！

```
class Stat[A](val min: A, val max: A, val current: A)
class Stat20(i: Int) extends Stat[Int](0, 20, i)
class Strength(i: Int) extends Stat20(i)
class Intelligence(i: Int) extends Stat20(i)
... 
```

看看噪音少了多少？长变量名是样板文件的一种形式。有时为了清楚起见，您需要它，但通常不是将参数传递给构造函数。

# reportviewer - 如何对来自嵌套列表的计算字段求和

> ID：13988537
> 
> 赞同：0
> 
> 时间：2012-12-21T10:40:37.520
> 
> 标签：reportviewer

在一份报告中，我有 2 个嵌套列表，最后一个里面有一个表格。我可以轻松地对表中的值求和并将它们放在总计字段中。在嵌套列表中，我使用表总值进行特殊计算。我希望能够对外部列表中的所有这些计算值求和。

我需要的是一种让嵌套列表将其结果暴露给外部列表的方法以及一种聚合它们的方法。我不想也可能无法在外部列表中再次进行计算，我想对来自内部列表的结果求和。

这似乎是一项简单的任务，但我整个上午都在寻找解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:40:46.780

有时不是点击这里和那里以更正式的方式为事物添加解决方案，我很多时候发现它也可以以简单的方式完成..

我的意思是你可以像下面一样做

*   右键单击 tablix 行并在下面插入新行
*   现在，在您想要此汇总总和的单元格中，您可以简单地使用您在以前的单元格中使用的现有表达式，在您想要显示结果的新单元格中

    像这样：

    `=Sum(Fields!Total1.Value, "DATASET1") + Sum(Fields!Total2.Value, "DATASET2")`

看看它是否适合你，因为我总是喜欢同样的！

# entity-framework - 实体框架无法将唯一索引导出到数据库

> ID：13988541
> 
> 赞同：1
> 
> 时间：2012-12-21T10:40:45.007
> 
> 标签：entity-framework, visual-studio-2012, mysql-workbench

我使用 MySQL Workbench 对具有主键、外键和唯一索引的数据库进行建模。我将我的模型文件与 MySQL 数据库同步，然后在 Visual Studio 2012 中创建了一个控制台项目。之后，我使用现有数据库添加了一个数据实体模型。没有问题。为了了解实体框架是否成功创建数据库，我删除了数据库。然后我运行控制台程序，数据库创建成功，但唯一索引无法导出到数据库。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:01:48.260

EF 不支持唯一键。模型中不使用唯一键，因此在从模型创建数据库时也不会创建它们。唯一的例外是通过自定义数据库初始化程序或迁移手动创建唯一键（两者都用于代码优先方法）。

# java - 如何获得真正的 Web 服务响应，而不是 403 错误？

> ID：13988542
> 
> 赞同：2
> 
> 时间：2012-12-21T10:40:46.257
> 
> 标签：java, jax-ws, http-status-code-403

我在从 Web 服务获取真实消息时遇到了一些麻烦。

该访问过去可以正常工作，但是当我在一段时间后再次尝试对其进行测试时，AXIS 2 向我返回了 403 HTTP 错误。

```
org.apache.axis2.AxisFault: Transport error: 403 Error: Forbidden 
```

我开始思考它可能是什么，所以我尝试通过 SOAP UI 访问它，它显示我的证书已过期。

这是我使用 SoapUI 收到的信息

```
The page requires a valid SSL client certificate
Your client certificate has expired or is not yet valid. A Secure Sockets Layer (SSL) client certificate is used for identifying you as a valid user of the resource. 
```

消息还有更多内容，我只是将其缩短以使帖子尽可能小。

好的，还没有问题，我只需要找到一种方法来通知用户他的证书可能已经过期（或发生了任何其他错误），而不是只向他显示 403 错误。

我尝试使用 JAX-WS 访问它，我得到了相同的消息，我得到的只是，我尝试查看异常，看看那里是否有任何隐藏信息，但没有运气。我得到的是：

```
com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 403: Forbidden
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.checkStatusCode(Unknown Source)
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(Unknown Source)
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(Unknown Source)
at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(Unknown Source)
at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Unknown Source)
at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Unknown Source)
at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Unknown Source)
at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Unknown Source)
at com.sun.xml.internal.ws.client.Stub.process(Unknown Source)
at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(Unknown Source)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(Unknown Source)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(Unknown Source)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(Unknown Source) 
```

谁能给我一些关于我可以做些什么来获得真实信息的指示？这是我用来访问它的代码

```
 public static void main(String[] args){

    try{
        System.setProperty("java.protocol.handler.pkgs", "com.sun.net.ssl.internal.www.protocol");
        Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());

        System.setProperty("javax.net.ssl.keyStoreType", "PKCS12");

        System.clearProperty("javax.net.ssl.keyStore");
        System.clearProperty("javax.net.ssl.keyStorePassword");
        System.clearProperty("javax.net.ssl.trustStore");

        System.setProperty("javax.net.ssl.keyStore", "myCertificatePath");
        System.setProperty("javax.net.ssl.keyStorePassword", "myCertificatePassword");

        System.setProperty("javax.net.ssl.trustStoreType", "JKS");
        System.setProperty("javax.net.ssl.trustStore", "cacertsFilePath");

        NfeRecepcao2 nfe = new NfeRecepcao2();

        NfeDadosMsg dados = new NfeDadosMsg();
        dados.getContent().add(getFileContent("C:\\teste.xml"));

        NfeCabecMsg cabec = new NfeCabecMsg();
        cabec.setCUF("35");
        cabec.setVersaoDados("2.00");
        Holder<NfeCabecMsg> header = new Holder<NfeCabecMsg>(cabec);
        NfeRecepcao2Soap12 proxy = nfe.getNfeRecepcao2Soap12();
        NfeRecepcaoLote2Result result = proxy.nfeRecepcaoLote2(dados, header);
        for (Object o : result.getContent()){
            System.out.println(o);
        }
    } catch (Exception e){
        e.printStackTrace();
    } 
```

*getFileContent*只打开一个文件并从它的内容生成一个字符串。

这里的任何指示都会有很大帮助。谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-10T22:37:35.863

查看收到的响应的一种方法是记录客户端发送和接收的soap 请求和响应。

如果您使用的是 JAX-WS，那么

```
System.setProperty("Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dump", true); 
```

如果您使用的是 JAX-WS RI 客户端，那么

```
System.setProperty("Dcom.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump", true); 
```

JAX-WS RI 库作为标准包含在 JDK 中（这是 Java 6），然后 Sun 不得不重命名属性名称以包含“内部”。因此，如果您使用 JDK 附带的 JAX-WS RI，那么您必须确保将 internal 添加到属性名称中。

# java - Tomcat更改密码会影响运行应用程序

> ID：13988543
> 
> 赞同：0
> 
> 时间：2012-12-21T10:40:47.957
> 
> 标签：java, tomcat, tomcat6

我已经安装了 tomcat 服务器，但我忘记了我的用户名/密码。我已经`tomcat-user.xml`像这样编辑了我的文件：

```
 <role rolename="manager"/>
  <role rolename="admin"/>
  <user username="admin" password="admin" roles="admin,manager"/> 
```

现在我的 tomcat 管理器工作正常。

两个问题：

1.  如果有人知道我以前的密码，他们能访问我的 tomcat-manager 吗？
2.  一旦我添加了tomcat用户名和密码，它会立即影响还是我必须重新启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:00:13.927

下面回答你的问题。

1）好吧，这取决于您俩所在的域以及您找到tomcat的服务器。（如果你在公共服务器上设置你的 tomcat 并且它的密码被很多人知道，你就有麻烦了）。

最好重置密码以更安全。

2) 您必须停止 tomcat 实例，重置您的密码并且必须重新启动服务器，然后对配置设置的更改才会生效。

# php - 使用 MATCH AGAINST 加速 MySQL 查询搜索多个表

> ID：13988548
> 
> 赞同：1
> 
> 时间：2012-12-21T10:40:56.207
> 
> 标签：php, mysql, sql, codeigniter, search

这是我第一次尝试构建比仅使用 LIKE 功能更复杂的搜索功能。此搜索返回的结果非常完美，但运行速度非常慢。有什么我可以明智地改进代码以加快速度或我应该在数据库上查看的任何内容吗？还是我需要考虑更多的服务器功能？

非常感谢任何和所有的帮助。非常感谢！

```
function new_live_search($q){

    $title_score = 5;
    $tags_score = 10;
    $upvote_score = 1;

    $subdomain = $this->config->item('subdomain_name');

    $query = "SELECT DISTINCT results.*,
                ( 
                    ".$title_score."*(MATCH(title) AGAINST('$q' IN BOOLEAN MODE)) + 
                    ".$tags_score."*(MATCH(tags.name) AGAINST('$q' IN BOOLEAN MODE)) + 
                    ".$upvote_score."*usefulness
                ) AS score
                FROM results
                LEFT JOIN tags ON results.id = tags.result_id
                WHERE (scope = 'all' OR scope = '$subdomain') 
                        AND (published = 1)";

    $query .=  "
        HAVING score - usefulness > 0 
        ORDER BY score DESC, title";

    $query = $this->db->query($query);

    $results = array();

    foreach ($query->result() as $row){
        $results[] = $row;
    }

    return $results;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:12:55.023

### 来自 MySQL 文档

不幸的是，不可能将全文字段和普通（即整数）字段合并到一个索引中。由于每个查询只能使用一个索引，这似乎是一个问题

表布局：

```
id(integer primary key)|content(text fulltext indexed)|status(integer key) 
```

请注意，执行以下查询，MySQL 将只使用一个索引。全文或状态（取决于实习生统计数据）。

查询一：

```
SELECT * FROM table WHERE MATCH(content) AGAINST('searchQuery') AND status = 1 
```

但是，仍然可以在一个查询中使用两个索引。您将需要一个关于 id、status 对的新索引并使用 join。因此 MySQL 将能够为每个表使用一个索引。

查询 2：

```
SELECT t1.* FROM table t1
LEFT JOIN table t2 ON(t1.id=t2.id)
WHERE MATCH(t1.content) AGAINST('searchQuery') AND status=1 
```

至少在我的情况下，查询 2 的运行速度将明显快于查询 1：) 请注意开销：您需要为每一行提供一个 id 和一个跨越以 id 开头的所需字段的键。

请参阅[MySQL 文档上的全文搜索](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)
**希望对您有所帮助**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:20:15.657

如果您查看查询，则查询的全文部分实际上不会限制搜索。使用类似下面的东西应该会提高性能一点。

```
SELECT DISTINCT results.*, (
    $title_score * (MATCH(title) AGAINST('$q' IN BOOLEAN MODE)) + 
    $tags_score * (MATCH(tags.name) AGAINST('$q' IN BOOLEAN MODE)) + 
    $upvote_score * usefulness
) AS score
FROM results
LEFT JOIN tags ON results.id = tags.result_id
WHERE (scope = 'all' OR scope = '$subdomain') 
    AND (published = 1)
    AND (
        (MATCH(title) AGAINST('$q' IN BOOLEAN MODE)) OR
        (MATCH(tags.name) AGAINST('$q' IN BOOLEAN MODE)))
HAVING score - usefulness > 0 
ORDER BY score DESC, title 
```

# asterisk - 星号 1.6 不拨打电话

> ID：13988549
> 
> 赞同：1
> 
> 时间：2012-12-21T10:40:58.163
> 
> 标签：asterisk

我刚刚在 vmware 机器上的 ubuntu 12 上安装了一个星号 1.6。Asterisk 似乎正在工作，但是当我尝试使用我的 voip 提供商拨打电话时，它显示 seqno 102（非关键请求）的最大重试次数已超过。

我的 sip.conf 如下：

```
[vono]
type=peer
username=my_username
secret=my_passwd
domain=provider_domain.name
fromuser=my_user
fromdomain=vono.net.br
host=vono.net.br
insecure=invite,port; (no asterisk > 1.4 utilize "invite,port")
qualify=no
port=5060
nat=no
disallow=all
allow=ulaw
dtmfmode=rfc2833
context=recebe_vono
reinvite=no
canreinvite=no 
```

我已经尝试使用 nat=yes 并将 externip=my_public_ip 放在文件上，但它没有用。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:47:58.913

您已允许 vmware 防火墙端口 5060 udp 并将其转发给您的星号内部 IP。

[https://superuser.com/questions/136948/how-map-forward-port-under-ubuntu-for-other-machine-localhost-555-192-168](https://superuser.com/questions/136948/how-map-forward-port-under-ubuntu-for-other-machine-localhost-555-192-168)

# tfs - 使用 Team Foundation Services (2012) 的 Microsoft Access 2007 / 2012 源代码控制

> ID：13988552
> 
> 赞同：10
> 
> 时间：2012-12-21T10:41:21.527
> 
> 标签：tfs, ms-access-2007, ms-access-2010

我在这个解决方法上苦苦挣扎了几天......

因此，您可能知道，Microsoft 运行其云 ALM 平台：团队基础服务 (https://tfs.visualstudio.com/)。它可以免费用于包含少于 5 个用户的团队......它可以与 MS Access 一起使用！

同时，我的一个客户要求我维护一系列内部开发的 MS Access 应用程序:(。

虽然我们可能会逐步将这些应用程序迁移到 .Net，但第一步将是调试和维护访问应用程序......所以为了尽量减少问题，我决定将其置于源代码管理之下，为什么不使用 ALM。

问题是访问文件（mdb :() 是二进制文件。

没有明确的解释让它与 Team Foundation Services 一起工作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T10:43:29.127

我有解决办法！

1.  安装团队资源管理器 2012

    此软件由 Microsoft 提供，用于访问 TFS 2012，可通过您的 TFS 许可证免费使用：http: [//www.microsoft.com/en-us/download/details.aspx?id= 30656](http://www.microsoft.com/en-us/download/details.aspx?id=30656)

2.  安装 Team Foundation Server MSSCCI Provider 2012

    这由 MS Access 的源代码控制插件使用。 [http://visualstudiogallery.msdn.microsoft.com/b5b5053e-af34-4fa3-9098-aaa3f3f007cd](http://visualstudiogallery.msdn.microsoft.com/b5b5053e-af34-4fa3-9098-aaa3f3f007cd)

3.  下载 Access 2007 的 MS Access 开发人员扩展

    [http://www.microsoft.com/en-us/download/details.aspx?id=24569](http://www.microsoft.com/en-us/download/details.aspx?id=24569)

    或者，对于 Access 2010

    [http://www.microsoft.com/en-us/download/details.aspx?id=6840](http://www.microsoft.com/en-us/download/details.aspx?id=6840)

4.  添加服务器：[https ://xxxxx.visualstudio.com/DefaultCollection/](https://xxxxx.visualstudio.com/DefaultCollection/)

就这样。

# android - 如何让我们的应用程序监听来自android中另一个应用程序的双击事件

> ID：13988553
> 
> 赞同：-2
> 
> 时间：2012-12-21T10:41:23.857
> 
> 标签：android

有谁知道如何让我们的应用程序监听在 android 的另一个应用程序中触发的双击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:43:16.107

这是不可能的。你不能在你的应用程序之外访问这样的事件，除非你想要它们的应用程序`Broadcast`在它们发生时发送 a 或其他东西，然后你可以用`BroadcastReceiver`.

# java - 产品删除按钮反应不佳

> ID：13988555
> 
> 赞同：0
> 
> 时间：2012-12-21T10:41:42.350
> 
> 标签：java, swing, netbeans, jbutton

我在这里制作了一个应用程序并在一个篮子上工作。

![篮子](../Images/f68cd4a31fa08e75c02efa0f3d419694.png)

这是按钮（每次添加产品时都会获得一个 X 删除按钮）：

```
for(int i=0;i < products.size(); i++){
            btnDeleteproduct = new JButton("X");
            btnDeleteproduct.setBounds(380, verticalPosition + i * productOffset, 20, 20);
            btnDeleteproduct.setFont(WinkelApplication.FONT_10_BOLD);
            btnDeleteproduct.setName("" + i);
            btnDeleteproduct.addActionListener(this);
            this.add(btnDeleteproduct);
        } 
```

productamount 是设置产品数量的标签：

```
productamount = (int) WinkelApplication.getBasket().getProductAmount(productdelete);
if (event.getSource() == btnDeleteproduct) {
        productamount--;
        lblamount.setText("" + productamount);
        WinkelApplication.getInstance().showPanel(new view.Payment());
        if (productamount < 1) {
         WinkelApplication.getBasket().deleteProduct(productdelete);
        }
} 
```

现在最后一批是 deleteProduct 方法：

```
 public void deleteProduct(Product product) {
            // check if product is allready added to the basket
           if (products.containsKey(product)) {
               products.remove(product);
               WinkelApplication.getInstance().showPanel(new view.Payment());
           }
           if(products.size() == 0){
               WinkelApplication.getInstance().showPanel(new view.CategoryList());
               }
        } 
```

好的，我有两个问题。1）标签不响应按钮中的setText，所以如果我把它放在另一个按钮中它不会改变它确实改变了。2）如果我添加超过 1 个产品，我只能从下到上删除产品，所以它只会对最后一个按钮做出反应，然后是下面的按钮，依此类推。

希望任何人都可以提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:55:06.767

对于第二点：

```
for(int i=0;i < products.size(); i++){
        btnDeleteproduct = new JButton("X");
        btnDeleteproduct.setBounds(380, verticalPosition + i * productOffset, 20, 20);
        btnDeleteproduct.setFont(WinkelApplication.FONT_10_BOLD);
        btnDeleteproduct.setName("" + i);
        btnDeleteproduct.addActionListener(this);
        this.add(btnDeleteproduct);
    } 
```

创建删除按钮时，您只保留`btnDeleteproduct`引用。当你在每次迭代中覆盖它时，你只保留最后一个

```
if (event.getSource() == btnDeleteproduct) { 
```

检查你的听众。

解决方案：创建一个监听器类，其中包含您要删除的产品的密钥。为每个按钮实例化不同的对象，并将其添加为侦听器，而不是为所有按钮使用单个侦听器。

# ruby-on-rails - 是否可以使用 Ajax 频繁刷新部分？

> ID：13988556
> 
> 赞同：12
> 
> 时间：2012-12-21T10:41:52.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

在后台，我希望它重新加载并显示有多少未读消息。
我想要不刷新页面。我的意思是使用ajax。

如果我在菜单中有这个，我怎么能每 30 秒只刷新这个部分？

```
<li><%= link_to sanitize('<i class="icon-envelope"></i> ') + "received messages" + sanitize(' <span class="badge badge-info">'+current_user.mailbox.inbox(:read => false).count(:id, :distinct => true).to_s+'</span>'), messages_received_path  %></li> 
```

消息控制器.rb

```
 def received
    if params[:search]
     @messages = current_user.mailbox.inbox.search_messages(@search).page(params[:page]).per(10)
    else
     @messages = current_user.mailbox.inbox.page(params[:page]).per(10)
    end 
     add_crumb 'Messages Received', messages_received_path

     @box = 'inbox'
     render :index
  end 
```

更新：***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_***

资产/javascript/refresh_messages_count.js

```
$(document).ready(function () {
    // will call refreshPartial every 3 seconds
    setInterval(refreshPartial, 3000)

});

function refreshPartial() {
  $.ajax({
    url: "messages/refresh_part";
 })
} 
```

消息控制器.rb

```
def refresh_part
    @message_count = current_user.mailbox.inbox(:read => false).count(:id, :distinct => true)

    # get whatever data you need to a variable named @data 
    respond_to do |format| 
        format.js {render :action=>"refresh_part.js"} 
    end

end 
```

视图/布局/_menu.html.erb

```
<span id="message_received_count"><%= render :partial => "layouts/message_received_count" %></span> 
```

视图/布局/_message_received_count.html.erb

```
<% if user_signed_in? && current_user.mailbox.inbox(:read => false).count(:id, :distinct => true) > 0 %>
 <li><%= link_to sanitize('<i class="icon-envelope"></i> ') + "Received" + sanitize(' <span class="badge badge-info">'+@message_count.to_s+'</span>'), messages_received_path  %></li>
<% else %>
 <li><%= link_to sanitize('<i class="icon-envelope"></i> ') + "Received", messages_received_path  %></li>
<% end %> 
```

视图/消息/refresh_part.js.erb

```
$('#message_received_count').html("#{escape_javascript(render 'layouts/messages_received_count', data: @message_count)}"); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-21T11:10:49.203

您将使用 setInterval 发送 ajax 请求：

```
$(document).ready(function () {
    // will call refreshPartial every 3 seconds
    setInterval(refreshPartial, 3000)

});

// calls action refreshing the partial
function refreshPartial() {
  $.ajax({
    url: "whatever_controller/refresh_part"
 })
} 
```

然后您在控制器中执行如下操作：

```
def refresh_part
  # get whatever data you need to a variable named @data
  respond_to do |format|
    format.js
  end
end 
```

然后你将编写一个名为的 js 文件`refresh_part.js.haml`（你可以用 erb 代替 haml）。

refresh_part.js.haml 看起来像这样：

```
$('#part_you_want_to_refresh').html("#{escape_javascript(render 'name_of_partial', data: @data)}"); 
```

确保您在`routes.rb`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-09T09:02:41.653

仅供参考，refresh_part.js.erb 看起来像这样：

```
$("#part").html("<%= escape_javascript(render 'partial', data: @data) %>"); 
```

代替：

```
$('#part').html("#{escape_javascript(render 'partial', data: @data)}"); 
```

此外，我们可以使用“escape_javascript”的别名来简化这一点：

```
$("#part").html("<%= j(render 'partial', data: @data) %>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:43:51.740

是的你可以

```
<html>
<head>
<script type="text/JavaScript">
<!--
function timedRefresh(timeoutPeriod) {
    setTimeout("location.reload(true);",timeoutPeriod);
}
//   -->
</script>
</head>
<body onload="JavaScript:timedRefresh(5000);">
<p>This page will refresh every 5 seconds. This is because we're using the 'onload' event to call our function. We are passing in the value '5000', which equals 5 seconds.</p>
<p>But hey, try not to annoy your users too much with unnecessary page refreshes every few seconds!</p>
</body>
</html> 
```

来源：[http ://www.quackit.com/javascript/javascript_refresh_page.cfm](http://www.quackit.com/javascript/javascript_refresh_page.cfm)

# php - 在 YII 中加密 POST 数据

> ID：13988560
> 
> 赞同：1
> 
> 时间：2012-12-21T10:42:00.327
> 
> 标签：php, encryption, yii, yii-events

如何加密来自`VIEW`in的 post 方法数据`YII`？这也是编写这样一个函数的好方法吗？`VIEW`它应该加密发送到控制器并在其中解密的POST 数据。

```
'buttons' => array(
            'Edit' =>array(
                //'label' => 'Edit',
                'url' => 'Yii::app()->createUrl("Controller/Action",array("doc_id"=>$data->id))',
            ), 
```

当按下按钮时，我想加密`"doc_id"`并发送到控制器以进行进一步的操作，再次解密加密的数据。URL 看起来像这样..

```
projectName/ControllerName/actionName/a2ewe34r44rf454r 
```

但我不知道在哪里写函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:56:43.627

加密需要在传输级别处理。

将您的 Web 服务器配置为使用 SSL (HTTPS)。这将对您的 PHP 完全透明，因此您根本不需要修改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:47:06.693

如果您需要加密 id 或在 url 中说 mobile no，您可以创建自己的加密函数，但如果您使用变量 salts 加密数据，它只会是匿名的。[在此处](https://stackoverflow.com/q/3758819/1687983)查看盐加密帮助。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:45:36.420

这是没用的东西。
如果您要使用客户端 javascript 函数加密数据，请注意此函数及其加密逻辑将可供任何人使用。
所以不会有这种加密的感觉。
加载页面的每个人都可以查看您的页面源代码并了解其`encryptData()`工作原理。
所以我认为**使用 javascript 的客户端加密不会给你带来任何利润**。
一个能拿到网络传输数据的人，也能拿到你的JS函数内容。

# php - 在PHP中将多维数组从z排序到一个on值

> ID：13988562
> 
> 赞同：-2
> 
> 时间：2012-12-21T10:42:01.780
> 
> 标签：php, sorting, multidimensional-array

我想将一个多维数组从 z 排序到 a。我已经可以使用此功能从 a 到 z 对其进行排序：

```
function aasort (&$array, $key) {
                $sorter=array();
                $ret=array();
                reset($array);
                foreach ($array as $ii => $va) {
                    $sorter[$ii]=$va[$key];
                }
                asort($sorter);
                foreach ($sorter as $ii => $va) {
                    $ret[$ii]=$array[$ii];
                }
                $array=$ret;
            } 
```

但是我该如何扭转呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:44:44.693

用于 `rsort`反向排序

```
foreach ($array as $ii => $va) {
    $sorter[$ii]=$va[$key];
}
rsort($sorter);
foreach ($sorter as $ii => $va) {
    $ret[$ii]=$array[$ii];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:53:22.080

如果你不想改变你的排序功能......你可以在最后使用[array_reverse](http://php.net/manual/en/function.array-reverse.php)来反转它。

这是一个如何将它递归地用于多维数组的示例：

```
function Reverse_Array($array) 
{    $index = 0; 
    foreach ($array as $subarray) 
    {    if (is_array($subarray)) 
        {    $subarray = array_reverse($subarray); 
            $arr = Reverse_Array($subarray); 
            $array[$index] = $arr; 
        } 
        else {$array[$index] = $subarray;} 
        $index++; 
    } 
    return $array; 
} 
```

# php - Zend Framework 2 - CSRF 令牌服务器端验证

> ID：13988566
> 
> 赞同：0
> 
> 时间：2012-12-21T10:42:10.563
> 
> 标签：php, forms, zend-form, zend-framework2, csrf-protection

我想到了以下问题：我构建了某种通用字段集，我想在所有标准表单中使用它。它包含一个`CSRF-Token`和一个`Submit-Button`。

它在客户端工作得很好。但我想知道：如果我使用它`Zend\Form\Element\Csrf`，我的逻辑在哪里可以在服务器端证明这个令牌是可以的。或者这是由`Zend`后台某处处理的？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T00:38:00.130

我使用这个令牌并且有同样的问题。简短而甜蜜的答案是它是在后台处理的。

如果令牌不正确或过期，将返回错误消息。很可能表明该表格并非来自正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:52:47.673

您可以使用代理对其进行测试，burpsuite 就是其中之一。提交表单，在代理中拦截，更改令牌，将其传递给服务器。它应该被拒绝。

或者您可以使用 Zend 调试器之类的东西并对其进行跟踪。无论哪种方式，您都应该有把握地知道它得到了正确处理。

# c - 仅使用 stdio 库时，一个简单的“for”命令不起作用

> ID：13988573
> 
> 赞同：-2
> 
> 时间：2012-12-21T10:42:36.963
> 
> 标签：c, arrays, std, stdio, dynamic-arrays

[使用与我的另一个问题中提到的相同的机器和 IDE（代码中的问题或我的 IDE/comp 有问题的](https://stackoverflow.com/questions/13987812/problems-in-code-or-my-ide-comp-is-bugged)第三段？ ）

我尝试运行此代码：

```
#include <stdio.h>
#define n 3
int main()
{
    int i;
    float values[n],sumval,svmean,tmp;
    for(i=0;i<n;++i)
    {
        scanf("%f",&tmp);
        values[i]=tmp;
        sumval = sumval + values[i];
    }
    svmean = sumval/n;
    printf("%f \n",svmean);
    return(0);
} 
```

上面的代码应该运行这个公式

![http://img850.imageshack.us/img850/6894/95871186.jpg](../Images/eaa204327134efe83a846098c46ac3f9.png)

这意味着它必须添加一些值并将结果除以它们的总数。

正如您在上面看到的，我创建了一个包含随机位置的数组，`n`并要求用户为每个位置填写一个值，然后将它们全部相加并除以它们。

问题是它不起作用。无论输入是什么，它都只输出结果 7。

但是，如果我将 stdlib.h 包含到代码中，它就可以正常工作。

所以

*   **问题 A**：为什么只使用 stdio.h 库代码不能正常工作？代码的哪个元素需要 stdlib.h 库？

如您所见，该数组`values[n]`似乎具有随机`n`数量的单元格，但实际上我已经将此数字设置为等于 3（使用`#define`）

*   **问题 B**：有没有办法用相同的 porpuse 运行代码，但让用户定义数组的大小，`values[n]`或者换句话说，让用户输入一个整数来设置`n`in的值`values[n]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:47:53.757

首先，你忘了初始化`sumval`。你希望它`0`在一开始。

如果您希望在运行时确定数组的大小，则必须使用 动态分配它`malloc`，例如：

```
int n;
float *values,sumval=0,svmean,tmp;
scanf("%d", &n);
values = (float *) malloc (n * sizeof(float)); 
```

稍后，您应该释放通过调用分配的内存`free`：

```
free(values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:49:28.370

将 sumVal 初始化为 o。因为对于第一次迭代，它会将垃圾+值 [i] 添加到 sumValue 中。

```
 #include <stdio.h>
 #define n 3
 int main()
 {
 int i;
 float values[n],sumval=0,svmean,tmp;
 for(i=0;i<n;++i){
 scanf("%f",&tmp);
 values[i]=tmp;
 sumval = sumval + values[i];
 }
  sumean = sumval/n;
  printf("%f \n",svmean);
  return(0); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:49:48.950

问题是您没有初始化`sumval`. 您应该在循环`0.0`之前将其设置为。`for`

包含/不包含时发生的变化`stdio.h`可能是由于使用堆栈的一些初始化函数，并在您输入函数之前更改了内存中的值，并且恰好该内存用于您的`sumval`变量。

但是你不应该**依赖**这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:51:23.293

您可以像这样在程序的堆中分配一个可变大小的数组：

```
#include <stdio.h>
int main(int argc, char **argv)
{
   int i;
   //Get the size of the array from input parameter
   int n = atoi(argv[1]);                
   float sumval,svmean,tmp;
   //Allocate the array of values
   float *values = malloc(sizeof(float)*n);
   // Initialize sumval
   for(sumval=0,i=0;i<n;++i){
      scanf("%f",&tmp);
      values[i]=tmp;
      sumval = sumval + values[i];
   }
   svmean = sumval/n;
   printf("%f \n",svmean);
   //Free it
   free( values );               
   return(0);
  } 
```

您还需要将 sumval 初始化为 0。启动程序时会传递数组大小的参数（如果您使用 IDE，您应该检查它是如何做到的）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T10:51:45.787

**问题 A 答案** 在您发布的代码中，不需要 stdlib.h。如果您使用动态分配内存的函数（例如 malloc()），则需要此库。

**问题 B 答案：** 这是一种做你想做的事情的方法：

```
#include <stdio.h>

int main()
{
    int i, choice;
    float *values,sumval,svmean,tmp;
    printf("Please enter the size of the array: ");
    scanf("%d", &choice);
    values = (float*) malloc(choice*sizeof(float));
    for(i=0;i<n;i++){
        scanf("%f",&tmp);
        values[i]=tmp;
        sumval = sumval + values[i];
    }
    svmean = sumval/n;
    printf("%f \n",svmean);
    free(values);
    return 0;
} 
```

另外，我修改了 for 语句中 i 的增量，使其在运行循环后增加。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T02:57:15.627

尝试这个..

```
#include <stdio.h>

int main()
{
    int i = 0;
    int n = 0;
    float sumval = 0;
    float svmean = 0;
    float tmp = 0;

    printf("Enter count : ");
    scanf("%d", &n);

    for (i = 0; i < n; ++i) {
        scanf("%f", &tmp);
        sumval = sumval + tmp;
    }

    svmean = sumval/n;
    printf("%f \n",svmean);

    return(0);
} 
```

在您的代码中，不需要 values[] 数组来计算输出。您是否出于任何原因存储这些值？？

# android - 如何从android连接MySQL数据库？

> ID：13988576
> 
> 赞同：-1
> 
> 时间：2012-12-21T10:42:47.087
> 
> 标签：android, mysql

我从一周开始创建一个 android 应用程序，但我无法成功。

我在谷歌和许多其他论坛中搜索，但我没有得到服务器连接。

如果有人知道如何连接服务器，请用简单的代码解释一下。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:45:59.933

使用网络服务

*   SOAP >[如何在 Android 上调用 SOAP Web 服务](https://stackoverflow.com/questions/297586/how-to-call-soap-web-service-in-android)
*   JSON > [http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:48:34.693

您不直接连接到 ddbb，而是应该使用您首选的服务器语言（c#、php 等）创建一个 web 服务，它将处理 ddbb 连接和业务逻辑，使用 SOAP 或 JSON 将数据传递给 android 应用程序.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:59:35.080

我曾经遇到过同样的问题并找到了以下链接，它对我帮助很大，**但**后来我意识到，你根本不应该这样做，应该使用易于创建的 Web 服务。

如果您想获得自己的体验，请点击此链接： [MySql via Android](http://shariqmobin.wordpress.com/2010/03/06/hello-world/)

# amazon-web-services - 托管在单独的 Amazon EC2 实例上的 WebServer 和数据库服务器

> ID：13988579
> 
> 赞同：3
> 
> 时间：2012-12-21T10:42:58.033
> 
> 标签：amazon-web-services, amazon-ec2

我计划运行一个 Web 应用程序，预计流量约为 100 到 200 个用户。

目前我已经在亚马逊上设置了单个小型实例。该实例由所有内容组成——Web 服务器（Apache）、数据库服务器（MySQL）和 IMAP 服务器（Dovcot）。我正在考虑将我的数据库服务器移出这个实例并为其创建一个单独的实例。现在我的问题是——</p>

*   我的网络服务器和数据库服务器之间的通信是否会出现延迟（两者都托管在亚马逊上的不同实例上）
*   如果是，克服这个问题的标准方法是什么？（或者我需要设置一个虚拟私有云吗？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T23:26:59.383

如果您希望您的架构可扩展，您应该将 Web 服务器与数据库服务器分开。

您将支付的低延迟（即使在多个可用区之间也约为 1-2 毫秒）将为您提供更好的性能，因为您可以单独扩展每个层。

*   您可以添加小型（甚至微型）实例来处理[负载均衡器](http://aws.amazon.com/elasticloadbalancing/)后面的更多 Web 请求，而无需复制必须具有数据库的实例
*   您可以为您的 Web 服务器添加[自动缩放](http://aws.amazon.com/autoscaling/)组，该组将根据使用负载自动缩放您的 Web 服务器层
*   您可以扩展您的数据库实例，以获得更多内存，获得更好的缓存命中率
*   您可以在 Web 服务器和数据库之间添加[弹性缓存](http://aws.amazon.com/elasticache/)
*   您可以将[Amazon RDS](http://aws.amazon.com/rds/)用作托管数据库服务，这完全不需要数据库实例（您只需为 RDS 中数据库的实际使用量付费）

您可以获得的另一个好处是您的数据库具有更好的安全性。如果您的数据库位于单独的实例上，您可以阻止从 Internet 访问它。您可以使用只允许来自您的 Web 服务器的 sql 连接而不是来自 Internet 的 http 连接的[安全组。](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html)

此配置可以在常规 EC2 环境中运行，无需使用 VPC。您当然可以添加 VPC 以获得更好的控制环境，而无需额外成本也不会增加太多复杂性。

简而言之，为了可扩展性和高可用性，您应该分离您的层（Web 和 DB）。您可能还会发现自己也节省了成本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T15:09:09.063

当然，在不同机器之间进行通信时会有延迟。如果它们都在同一个可用区中，它将非常低，通常是您对同一 LAN 上的两台服务器所期望的。

如果它们位于同一区域的不同可用区，预计延迟大约为 2-3 毫秒（根据 2012 年 AWS re:Invent 会议上提供的信息）。那还是很低的。

使用 VPC 不会影响延迟。这不会为您提供实例之间的不同物理连接，只是虚拟隔离。

最后，考虑为您的 MySql 数据库使用 Amazon 的 RDB（关系数据库服务）而不是专用的 EC2 实例。费用差不多，亚马逊负责家务。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T15:07:10.263

> 我的网络服务器和数据库服务器之间的通信是否会出现延迟（两者都托管在亚马逊上的不同实例上）

是的，但与分离角色所获得的好处相比，它是微不足道的。

> 如果是，克服这个问题的标准方法是什么？（或者我需要设置一个虚拟私有云吗？）

VPC 增加了资源的安全性和易于管理，它不会影响性能。对于 SQL 数据库，一两毫秒的延迟通常不是问题。写入是事务性的，因此在 100% 完成并提交之前，其他请求无法访问数据。I/O 吞吐量和可用性更受关注，这就是分离数据库和应用程序很重要的原因。

我强烈建议您查看 RDS，它是 AWS 的托管 MySQL、Oracle 或 MS SQL Server 数据库服务器版本。这将允许您轻松设置和管理数据库，包括跨可用区复制和自动备份。[我昨天](http://www.jamiebegin.com/migrating-to-aws-developers-checklist/)还写了一篇与您的问题相当相关的博客文章。

# python - 合并从 contigs.fa 生成的两行

> ID：13988581
> 
> 赞同：-2
> 
> 时间：2012-12-21T10:42:59.640
> 
> 标签：python, linux, sed, awk, fasta

我有一个由汇编程序生成的文件。它看起来像以下。

```
>NODE_1_length_211_cov_22.379147
CATTTGCTGAAGAAAAATTACGAGAAATGGAGCACAAGGCTGTTTTTGTGAATGTCAAAC
CAAGTGACAACTCTATAGCGTTTGTATAAGACTCTCATACTAATCCCAAGCAAACTCTAT
ACTGACGCATGAACATGGAAGAGAAATGCTGCTCGTGTATGTATTATGGACCAGCTTGGA
ACACCATGTTAGGACTTTATAGATGTCTTACGATTTTTTCGACGTGATGAAGAAGTCTAT
TCAGCATTTGA
>NODE_2_length_85_cov_19.094118
TACTCCTGAGCACTTTGTGCTCTTAGTTCTTACTAGAACTGTTACAGCTCCACGAACTTG
TCGACTCTTTGAGTCAATTTCTGTTAGTTCCTACGAACTAAGAGGCTCTCTGAGCCCAGT
CTTCC 
```

我想使用 python 或 linux sed 命令合并这些行，并希望以这种方式得到结果。

```
>NODE_1_length_211_cov_22.379147
CATTTGCTGAAGAAAAATTACGAGAAATGGAGCACAAGGCTGTTTTTGTGAATGTCAAACCAAGTGACAACTCTATAGCGTTTGTATAAGACTCTCATACTAATCCCAAGCAAACTCTATACTGACGCATGAACATGGAAGAGAAATGCTGCTCGTGTATGTATTATGGACCAGCTTGGAACACCATGTTAGGACTTTATAGATGTCTTACGATTTTTTCGACGTGATGAAGAAGTCTATTCAGCATTTGA
>NODE_2_length_85_cov_19.094118
TACTCCTGAGCACTTTGTGCTCTTAGTTCTTACTAGAACTGTTACAGCTCCACGAACTTGTCGACTCTTTGAGTCAATTTCTGTTAGTTCCTACGAACTAAGAGGCTCTCTGAGCCCAGTCTTCC 
```

像每个序列一样，将其视为单行，将节点名称视为另一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:57:08.780

一个小管道`tr`并且`sed`会这样做：

```
$ tr -d '\n' < contigser.fa | sed 's/\(>[^.]\+\.[0-9]\+\)/\n\1\n/g' > newfile.fa 
```

* * *

在`python`：

```
file = open('contigser.fa','r+')
lines= file.read().splitlines()

file.seek(0)
file.truncate()

for line in lines:
    if line.startswith('>'):
        file.write('\n'+line+'\n')
    else:
        file.write(line) 
```

注意：python 解决方案将更改存储回`contigser.fa`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:34:53.233

你可以`awk`用来做这项工作：

```
awk < input_file '/^>/ {print ""; print; next} {printf "%s", $0} END {print ""}' 
```

这只会启动一个进程 ( `awk`)。唯一的缺点：它添加了一个空的第一行。您可以通过添加状态变量来避免此类事情（代码属于一行，只是为了使其更具可读性）：

```
awk < input_file '/^>/ { if (flag) print ""; print; flag=0; next }
    { printf "%s", $0; flag=1 } END { if (flag) print "" }' 
```

@如何将其存储在新文件中：

```
awk < input_file > output_file '/^>/ { .... }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:40:56.770

```
$ awk '/^>/{printf "%s%s\n",(NR>1?ORS:""),$0; next} {printf "%s",$0} END{print ""}' file
>NODE_1_length_211_cov_22.379147
CATTTGCTGAAGAAAAATTACGAGAAATGGAGCACAAGGCTGTTTTTGTGAATGTCAAACCAAGTGACAACTCTATAGCGTTTGTATAAGACTCTCATACTAATCCCAAGCAAACTCTATACTGACGCATGAACATGGAAGAGAAATGCTGCTCGTGTATGTATTATGGACCAGCTTGGAACACCATGTTAGGACTTTATAGATGTCTTACGATTTTTTCGACGTGATGAAGAAGTCTATTCAGCATTTGA
>NODE_2_length_85_cov_19.094118
TACTCCTGAGCACTTTGTGCTCTTAGTTCTTACTAGAACTGTTACAGCTCCACGAACTTGTCGACTCTTTGAGTCAATTTCTGTTAGTTCCTACGAACTAAGAGGCTCTCTGAGCCCAGTCTTCC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:57:36.937

```
$ awk 'NR==1;ORS="";{sub(/>.*$/,"\n&\n");print (NR>1)?$0:""}END{print"\n"}' file
>NODE_1_length_211_cov_22.379147
CATTTGCTGAAGAAAAATTACGAGAAATGGAGCACAAGGCTGTTTTTGTGAATGTCAAACCAAGTGACAACTCTATAGCGTTTGTATAAGACTCTCATACTAATCCCAAGCAAACTCTATACTGACGCATGAACATGGAAGAGAAATGCTGCTCGTGTATGTATTATGGACCAGCTTGGAACACCATGTTAGGACTTTATAGATGTCTTACGATTTTTTCGACGTGATGAAGAAGTCTATTCAGCATTTGA
>NODE_2_length_85_cov_19.094118
TACTCCTGAGCACTTTGTGCTCTTAGTTCTTACTAGAACTGTTACAGCTCCACGAACTTGTCGACTCTTTGAGTCAATTTCTGTTAGTTCCTACGAACTAAGAGGCTCTCTGAGCCCAGTCTTCC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T08:47:28.830

这可能对您有用（GNU sed）：

```
sed '/^>/n;:a;$!N;s/\n\([^>]\)/\1/;ta;P;D' file 
```

在以 开头的行之后`>`，删除除符号以外的任何字符之前的任何换行符`>`。

# css - CSS悬停和immidiatily先例不起作用

> ID：13988582
> 
> 赞同：1
> 
> 时间：2012-12-21T10:43:04.883
> 
> 标签：css, hover, css-selectors, tooltip

我想做一个可重用的工具提示。图像后面的跨度不显示，当您越过它时，跨度必须出现。但是是行不通的。有人有想法吗？跨度永远不会显示。

html代码

```
<div>
    <div>Sharing</div>
    <img class="info-tooltip" src="system-help.png" alt="Info">
    <span>sdfmhdsjlfhsdljkqhfjkldsqfhljkqdshflsqd</span>
</div> 
```

抄送代码

```
.info-tooltip + span{
    display: none;
}
.info-tooltip:hover + span{
    display:block;
    position:absolute;
    width: 105px;
    line-height:8px;
    top:10px;
    left:15px;
    background-color: #E9F2FF;
    padding:5px;
    font-size:10px;
    color:#444444;
    text-decoration:none;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    z-index:100040000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:59:04.493

您应该尝试用 div 标签包围您的图像：

```
<div class="info-tooltip"><img src="system-help.png" alt="Info"></div> 
```

# jquery - 仅在 IE 9 setSelection 中的错误不会滚动到所选行

> ID：13988590
> 
> 赞同：3
> 
> 时间：2012-12-21T10:43:22.667
> 
> 标签：jquery, jqgrid

此错误仅存在于 IE 9 中。

使用时`setSelection`– 目标行按预期被选中，但视图区域未向上滚动到所选行。它在所选行之前停止一行。

您可以在 trirand 的演示页面上看到它。

> 1.  [trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)
> 2.  点击查看：**3.4 版新功能**
> 3.  Click to :**滚动动态行选择**
> 4.  选择第一行（或任何其他行）。然后单击**编辑链接**，然后一直按**下一步**直到第 7 行。请注意，直到那里它工作正常。但是，之后目标行被按预期选择，但视图区域没有向上滚动到所选行。它在所选行之前停止一行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:02:55.000

我认为这取决于您运行浏览器的模式..转到 IE9 的兼容性视图..它非常适合该模式下的滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T19:38:13.637

确实如此！！我遇到了类似的问题...实际上我选择了我的浏览器文档模式：IE9 标准和浏览器模式：IE9。当我更改文档模式：IE7 时，我发现网格行选择位于我希望它集中的那一行。因此，请尝试更改您的浏览器文档模式并确保您的浏览器模式处于兼容性视图中，这将解决大多数浏览器问题。

# android - 在键盘上方显示 Toast

> ID：13988596
> 
> 赞同：8
> 
> 时间：2012-12-21T10:43:33.323
> 
> 标签：android, keyboard, toast

当键盘在屏幕上时，是否可以在键盘上方而不是在其上显示 Android 中的 Toast 消息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T10:45:08.690

您可以通过以下代码更改吐司位置。

```
Toast toast= Toast.makeText(getApplicationContext(), 
"Your string here", Toast.LENGTH_SHORT);  
toast.setGravity(Gravity.TOP|Gravity.CENTER_HORIZONTAL, 0, 0);
toast.show(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T10:44:37.713

从[文档](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)中，

> **定位你的吐司**
> 
> 标准的 toast 通知出现在屏幕底部附近，水平居中。`setGravity(int, int, int)`您可以使用该方法更改此位置 。它接受三个参数： `Gravity`常量、`x-position`偏移量和`y-position`偏移量。
> 
> 例如，如果你决定 toast 应该出现在左上角，你可以像这样设置重力：
> 
> ```
> toast.setGravity(Gravity.TOP|Gravity.LEFT, 0, 0); 
> ```
> 
> 如果要向右微移位置，请增加第二个参数的值。要向下微调，请增加最后一个参数的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T10:48:34.823

1.) 检查键盘是否可见：

[如何在 Android 中检查软件键盘的可见性？](https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android)

2.) 如果键盘可见，则在不同位置显示 Toast：

[如何在 Android 中更改 Toast 的位置？](https://stackoverflow.com/questions/2506876/how-to-change-position-of-toast-in-android)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-20T07:35:00.950

3 年多过去了……Android 终于有了 API

正如[Chris Banes](https://medium.com/androiddevelopers/animating-your-keyboard-fb776a8fb66d)所详述的，我们现在可以使用`WindowInsets`API

解决 Toast above 软键盘的核心 API 是：

```
val insets = ViewCompat.getRootWindowInsets(view) // get insets
val imeVisible = insets.isVisible(Type.ime()) // is keyboard visible?
val imeHeight = insets.getInsets(Type.ime()).bottom // voila, your offset 
```

所以我为 Toast 构建了一个扩展函数：

```
/**
 * Shows toast above soft keyboard, if exists
 */
 fun Toast.showAboveKeyboard(containerView: View) {

   // get y offset to let toast appear above soft keyboard
   val insets = ViewCompat.getRootWindowInsets(containerView)
   val imeVisible = insets?.isVisible(WindowInsetsCompat.Type.ime()) ?: false
   val imeHeight = insets?.getInsets(WindowInsetsCompat.Type.ime())?.bottom
   val fallbackYOffset = containerView.resources.getDimensionPixelOffset(R.dimen.thirtytwo_grid_unit)
   val noSoftKeyboardYOffset =
    containerView.resources.getDimensionPixelOffset(R.dimen.three_grid_unit)
   setGravity(
        Gravity.CENTER_HORIZONTAL or Gravity.BOTTOM,
        0,
        if (imeVisible) imeHeight ?: fallbackYOffset else noSoftKeyboardYOffset
   )
   show()
} 
```

片段中的用法：

```
Toast.makeText(requireContext(), "Hello Toast", Toast.LENGTH_SHORT)
     .showAboveKeyboard(requireView()) 
```

祝吐司快乐！

# asp.net-web-api - 使用 Autofac 将属性注入到 Web Api 控制器

> ID：13988597
> 
> 赞同：1
> 
> 时间：2012-12-21T10:43:33.453
> 
> 标签：asp.net-web-api, autofac

我正在尝试将 an`System.Web.Http.ApiController`上的属性设置为 resolved 的值`IServerPackageRepository`。控制器在 a 中运行，`HttpSelfHostServer`并且`DependencyResolver`已设置为`AutofacWebApiDependencyResolver`。这是该`Autofac.Module.Load`方法的代码

```
...

builder.RegisterType<ServerPackageRepository>()
    .As<IServerPackageRepository>()
    .SingleInstance()
    .WithParameter("path", this.StoragePath);

builder.RegisterApiControllers(Assembly.GetExecutingAssembly())
    .PropertiesAutowired(); 
```

`ApiController`控制器本身具有类型的属性

```
public IServerPackageRepository Repository { get; set; } 
```

但从未解决。

我正在尝试这样做，因为`ApiController`除了默认构造函数之外什么都不会。有关如何使用 Autofac 以正确方式执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:47:42.840

如果`ApiController`仅使用默认构造函数，则听起来好像没有调用依赖解析器，并且可能未正确向 Web API 注册。这是一个使用构造函数注入的自托管的工作示例。

依赖项（在这种情况下是一个简单的记录器）：

```
public interface ILogger
{
    void Log(string text);
}

public class Logger : ILogger
{
    public void Log(string text)
    {
        Debug.WriteLine(text);
    }
} 
```

一个依赖于记录器的简单控制器：

```
public class ValuesController : ApiController
{
    readonly ILogger _logger;

    public ValuesController(ILogger logger)
    {
        _logger = logger;
    }

    // GET api/values
    public IEnumerable<string> Get()
    {
        _logger.Log("GET api/values");

        return new string[] { "value1", "value2" };
    }
} 
```

控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        var configuration = new HttpSelfHostConfiguration("http://localhost:8080");

        configuration.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
            );

        var builder = new ContainerBuilder();

        // Register API controllers using assembly scanning.
        builder.RegisterApiControllers(Assembly.GetExecutingAssembly());

        // Register API controller dependencies.
        builder.Register<ILogger>(c => new Logger()).SingleInstance();

        var container = builder.Build();

        // Set the dependency resolver implementation.
        var resolver = new AutofacWebApiDependencyResolver(container);
        configuration.DependencyResolver = resolver;

        // Open the HTTP server and listen for requests.
        using (var server = new HttpSelfHostServer(configuration))
        {
            server.OpenAsync().Wait();

            Console.WriteLine("Hosting at http://localhost:8080/{controller}");
            Console.ReadLine();
        }
    }
} 
```

使用以下命令点击控制器操作：

`http://localhost:8080/api/values`

请对此进行测试，如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:37:46.027

不确定这是否是您想要的，但您可以创建自己的基本控制器并将其注入`IServerPackageRepository`其中。

```
public class MyApiController : ApiController { 

    public IServerPackageRepository ServerPackageRepository { get; set; }

    public MyApiController(IServerPackageRepository serverPackageRepository) { 

        ServerPackageRepository = serverPackageRepository;
    }
} 
```

然后，将其用作您的基本控制器：

```
public class ProductsController : MyApiController { 

    public ProductsController(IServerPackageRepository serverPackageRepository) 
        : base(serverPackageRepository) { 
    }

    public IEnumerable<Product> Get() { 

        ServerPackageRepository.DoWork();

        //...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-02T09:37:04.690

另一种方法是将您的依赖项直接连接到属性，如下所示：

```
var repo = new ServerPackageRepository(path: this.StoragePath);

builder.RegisterInstance(repo)
    .SingleInstance();

builder.RegisterApiControllers(Assembly.GetExecutingAssembly())
    .WithProperty("Repository", repo)
    .PropertiesAutowired(); 
```

# machine-learning - 神经网络：为什么感知器规则只适用于线性可分数据？

> ID：13988601
> 
> 赞同：3
> 
> 时间：2012-12-21T10:43:55.147
> 
> 标签：machine-learning, computer-science, neural-network

我之前[要求](https://stackoverflow.com/questions/13976565/neural-networks-what-does-linearly-separable-mean)解释线性可分数据。仍在阅读 Mitchell 的机器学习书，我很难理解为什么感知器规则仅适用于线性可分数据？

Mitchell 定义感知器如下： ![感知器](../Images/23408ca82e416b62419cfb70854a90a4.png)

也就是说，如果加权输入的总和超过某个阈值，则 y 为 1 或 -1。

现在，问题是确定一个权重向量，使感知器为每个给定的训练示例产生正确的输出（1 或 -1）。实现这一点的一种方法是通过感知器规则：

> 学习一个可接受的权重向量的一种方法是从随机权重开始，然后迭代地将感知器应用于每个训练示例，并在它对示例进行错误分类时修改感知器权重。重复此过程，根据需要多次迭代训练示例，直到感知器正确分类所有训练示例。根据感知器训练规则在每一步修改权重，它根据规则修改与输入 xi 关联的权重 wi： ![感知器规则](../Images/383b560e46fac23b20b94f7e0e3141d3.png)

所以，我的问题是：为什么这只适用于线性可分数据？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T10:56:08.520

`w`因为和的点积`x`是 s 的线性组合`x`，而实际上，您使用超平面将数据分成 2 个类`a_1 x_1 + … + a_n x_n > 0`

考虑一个 2D 示例：`X = (x, y)`然后. 如果它的参数大于 0，则返回 1，也就是说，对于类 #1 你有，这相当于（假设 b ！= 0）。这个方程是**线性**的，将一个二维平面分成两部分。`W = (a, b)``X * W = a*x + b*y``sgn``a*x + b*y > 0``y > -a/b x`

# cuda - Applying reduction operation using Thrust subject to a boolean condition

> ID：13988603
> 
> 赞同：1
> 
> 时间：2012-12-21T10:44:02.963
> 
> 标签：cuda, thrust

I want to use `thrust::reduce` to find the max value in an array A. However, `A[i]`should only be chosen as the max if it also satisfies a particular boolean condition in another array B. For example, B[i] should be true. Is their a version of thrust::reduce that does this. I looked at the documentation and found only following API;

```
thrust::reduce(begin,end, default value, operator) 
```

However, i was curious is their a version more suitable to my problem?

EDIT: Compilation fails in last line!

```
 typedef thrust::device_ptr<int> IntIterator;
      typedef thrust::device_ptr<float> FloatIterator;
      typedef thrust::tuple<IntIterator,FloatIterator> IteratorTuple;
      typedef thrust::zip_iterator<IteratorTuple> myZipIterator;
      thrust::device_ptr<int> deviceNBMInt(gpuNBMInt);
    thrust::device_ptr<int> deviceIsActive(gpuIsActive);
    thrust::device_ptr<float> deviceNBMSim(gpuNBMSim);

    myZipIterator iter_begin = thrust::make_zip_iterator(thrust::make_tuple(deviceIsActive,deviceNBMSim));
    myZipIterator iter_end = thrust::make_zip_iterator(thrust::make_tuple(deviceIsActive + numRow,deviceNBMSim + numRow));
    myZipIterator result =  thrust::max_element(iter_begin, iter_end, Predicate()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:13:16.443

Yes, there is. I guess you should take a look at [Extrema](http://thrust.github.com/doc/group__extrema.html#ga15bc459d66e289d99a789b99594f7339) And [Zip iterator](http://thrust.github.com/doc/classthrust_1_1zip__iterator.html)

Something like this should do the trick (not sure if this code works out of the box):

```
typedef thrust::device_ptr<bool>  BoolIterator;
typedef thrust::device_ptr<float>  ValueIterator;

BoolIterator bools_begin, bools_end;
ValueIterator values_begin, values_end; 
// initialize these pointers
// ...

typedef thrust::tuple<BoolIterator, ValueIterator> IteratorTuple;
typedef thrust::tuple<bool, value> DereferencedIteratorTuple;
typedef thrust::zip_iterator<IteratorTuple> ZipIterator;

ZipIterator iter_begin(thrust::make_tuple(bools_begin, values_begin));
ZipIterator iter_end(thrust::make_tuple(bools_end, values_end));

struct Predicate
{
  __host__ __device__ bool operator () 
                      (const DereferencedIteratorTuple& lhs, 
                       const DereferencedIteratorTuple& lhs) 
  {
    using thrust::get;
    if (get<0>(lhs) && get<0>(rhs) ) return get<1>(lhs) < get<1>(rhs); else
    return ! get<0>(lhs) ;
  }
};

ZipIterator result =  thrust::max_element(iter_begin, iter_end, Predicate()); 
```

Or you may consider similar technique with zip iterator with `thrust::reduce`. Or you can try with [inner_product](http://thrust.github.com/doc/group__transformed__reductions.html#ga8fcc4e5a71e784f1f32af89ab5a42e35) Not sure what will work faster.

# objective-c - 如何使用 NSPredicate 仅从字典数组中过滤特定的键值

> ID：13988608
> 
> 赞同：0
> 
> 时间：2012-12-21T10:44:14.487
> 
> 标签：objective-c

```
NSArray *details = [NSArray arrayWithObjects:@"name",@"age",@"gender",nil];
NSArray *ray1  = @[@"ray",@"23",@"male"];
NSArray *steve1  = @[@"steve",@"23",@"male"];
NSDictionary *ray = [NSDictionary dictionaryWithObjects:ray1 forKeys:details];
NSDictionary *steve = [NSDictionary dictionaryWithObjects:steve1 forKeys:details];
NSArray *register = @[ray,steve]; 
```

我只需要使用 NSPredicate 过滤键的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:40:21.797

这将打印所有字典的键“名称”的值

```
NSArray *details = [NSArray arrayWithObjects:@"name",@"age",@"gender",nil];
NSArray *ray1  = @[@"ray",@"23",@"male"];
NSArray *steve1  = @[@"steve",@"23",@"male"];
NSDictionary *ray = [NSDictionary dictionaryWithObjects:ray1 forKeys:details];
NSDictionary *steve = [NSDictionary dictionaryWithObjects:steve1 forKeys:details];
NSArray *reg = @[ray,steve];
NSPredicate *pr = [NSPredicate predicateWithValue:YES];
NSArray *ar = [[reg valueForKey:@"name"] filteredArrayUsingPredicate:pr];
NSLog(@"%@",ar); 
```

# android - 如何在Android中将阿拉伯数字转换为标准数字转换？

> ID：13988614
> 
> 赞同：1
> 
> 时间：2012-12-21T10:44:39.517
> 
> 标签：android, localization

如果我将应用程序运行到与 jellybean 兼容的 avd 中，我正在 Android 中进行本地化，它运行良好，会显示正确的数据，所以如果我将语言环境更改为阿拉伯语，则显示的数字也会转换为阿拉伯语，这会导致一个大问题我从服务器获取数据。所以我的总体问题是

```
int i=٣٠; 
```

现在是阿拉伯语，我希望它应该像标准数字`i=30;`，即使我更改了 avd 的语言环境。

# three.js - WebGLRenderingContext 错误加载纹理贴图

> ID：13988615
> 
> 赞同：3
> 
> 时间：2012-12-21T10:44:42.707
> 
> 标签：three.js

首先，感谢您所做的出色工作，我在使用 three.js 时获得了很多乐趣。

我试图找到关于一个经常性问题的答案， .WebGLRenderingContext: GL ERROR :GL_INVALID_OPERATION : glDrawElements: attempt to access out of range vertices in attribute 2

我在 webgl 中创建一个网站，我花了几周时间了解有关 three.js 的所有信息，但我无法解决这个问题。每次我尝试将画布加载到地图、凹凸贴图和规格图中时，我都会在 Chrome 和 firefox（最新）上收到此消息。我所有的网格都是从 obj 文件加载的，顺便说一下，我重写了 OBJMTLLoader.js 以便能够从 obj 文件加载更多参数等等。这里是用于加载图像的代码。

THREE.MTLLoader.loadTexture = function (url, mapping, onLoad, onError) {

```
var isCompressed = url.toLowerCase().endsWith( ".dds" );
var texture = null;

if ( isCompressed ) {

    texture = THREE.ImageUtils.loadCompressedTexture( url, mapping, onLoad, onError );

} else {

    var image = new Image();

    texture = new THREE.Texture( image, mapping );

        var loader = new THREE.ImageLoader();

        loader.addEventListener( 'load', function ( event ) {

            texture.image = THREE.MTLLoader.ensurePowerOfTwo_( event.content );
            texture.needsUpdate = true;
            if ( onLoad ) 
                onLoad( texture );

        } );

        loader.addEventListener( 'error', function ( event ) {

            if ( onError ) onError( event.message );

        } );

        loader.crossOrigin = this.crossOrigin;
        loader.load( url, image );

}

return texture; 
```

}; 我很确定它来自这个，因为当我禁用此功能时，没有更多警告。

是因为网格在加载数据时有一个带有空图像的纹理吗？对图像的尺寸有任何限制吗？

现在一切正常，但我觉得在控制台中有这些消息很奇怪。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-30T18:18:49.287

此错误成为因为 Three.js 缓冲区已过时。当您向 Mesh 添加一些纹理（地图、bumpMap ...）时，您必须像这样重新组合缓冲区：

```
ob is  THREE.Mesh, mt is a Material, tex is a texture.

tex.needsUpdate = true;
mt.map = tex;
ob.material = mt;
ob.geometry.buffersNeedUpdate = true;
ob.geometry.uvsNeedUpdate = true;
mt.needsUpdate = true; 
```

这就是所有的人！

希望有帮助。

问候。

赛里斯

# git - 对 git 中的相同文件应用多个过滤器

> ID：13988619
> 
> 赞同：6
> 
> 时间：2012-12-21T10:44:54.157
> 
> 标签：git, version-control, filter, gitattributes

我正在使用 Git 对本地文件进行版本控制，最终必须将其签入另一个版本控制系统。现在我遇到了大多数 C 代码文件的一些问题：

1.  他们的标题注释中都有自动版本历史记录
2.  大多数文件都被 EasyCode 或 EasyCase 注释弄得乱七八糟

我现在只是创建了两个 git 过滤器“History”和“EasyTool”来清理代码，然后再签入 Git。如何使用这两个过滤器过滤所有 C 和 H 文件？

多次指定命令不起作用，并且过滤器命令的串联也不起作用（或者我至少没有找到正确的语法）。

这是我的第一次尝试：

```
*.c  filter=History
*.c  filter=EasyTool           # This one wins, "History" is not executed 
```

然后我尝试了这样的事情：

```
*.c  filter=History EasyTool   # The first wins, other separators work neither 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T12:29:05.147

我认为您不能以这种方式链接过滤器。

最简单的方法是编写一个包装器，它会顺序调用两者（至少通过 shell 脚本中的管道）。
（如“[是否可以将一个程序的输出重定向到不同操作系统中其他程序的输入？](https://stackoverflow.com/questions/9047280/is-it-possible-to-redirect-output-of-one-program-to-input-of-other-program-in-di) ”）。

# wordpress - 如何从wordpress的主菜单中删除链接

> ID：13988620
> 
> 赞同：2
> 
> 时间：2012-12-21T10:44:55.273
> 
> 标签：wordpress

我想从特定页面的菜单中删除链接。

```
function wp_list_pages($args = '') {
$defaults = array(
    'depth' => 0, 'show_date' => '',
    'date_format' => get_option('date_format'),
    'child_of' => 0, 'exclude' => '',
    'title_li' => __('Pages'), 'echo' => 1,
    'authors' => '', 'sort_column' => 'menu_order, post_title',
    'link_before' => '', 'link_after' => '', 'walker' => '',
);

$r = wp_parse_args( $args, $defaults );
extract( $r, EXTR_SKIP );

$output = '';
$current_page = 0;

// sanitize, mostly to keep spaces out
$r['exclude'] = preg_replace('/[^0-9,]/', '', $r['exclude']);

// Allow plugins to filter an array of excluded pages (but don't put a nullstring into the array)
$exclude_array = ( $r['exclude'] ) ? explode(',', $r['exclude']) : array();
$r['exclude'] = implode( ',', apply_filters('wp_list_pages_excludes', $exclude_array) );

// Query pages.
$r['hierarchical'] = 0;
$pages = get_pages($r);

if ( !empty($pages) ) {
    if ( $r['title_li'] )
        $output .= '<li class="pagenav">' . $r['title_li'] . '<ul>';

    global $wp_query;
    if ( is_page() || is_attachment() || $wp_query->is_posts_page )
        $current_page = $wp_query->get_queried_object_id();
    $output .= walk_page_tree($pages, $r['depth'], $current_page, $r);

    if ( $r['title_li'] )
        $output .= '</ul></li>';
}

$output = apply_filters('wp_list_pages', $output, $r);

if ( $r['echo'] )
    echo $output;
else
    return $output; 
```

}

请告诉我我能做什么。我已经搜索了所有与此相关的先前问题，但还无法解决问题。提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:47:56.100

只需将其放在主题的 functions.php 文件中即可。

```
function removeParentLinks() {
$pages = wp_list_pages('echo=0&amp;title_li=');
$pages = explode("</li>", $pages);
$count = 0;
foreach($pages as $page) {
    if(strstr($page,"<ul>")) {
        $page = explode('<ul>', $page);
        $page[0] = str_replace('</a>','',$page[0]);
        $page[0] = preg_replace('/\<a(.*)\>/','',$page[0]);
        if(count($page) == 3) {
            $page[1] = str_replace('</a>','',$page[1]);
            $page[1] = preg_replace('/\<a(.*)\>/','',$page[1]);
        }
        $page = implode('<ul>', $page);
    }
    $pages[$count] = $page;
    $count++;
}
$pages = implode('</li>',$pages);
echo $pages; 
```

}

现在只需替换​​您的 wp_list_pages(); 带有 removeParentLinks() 的函数；你走了。

# css - 为什么我的响应式布局损坏了？

> ID：13988621
> 
> 赞同：0
> 
> 时间：2012-12-21T10:44:57.277
> 
> 标签：css, html, css-float

这是页面：[http ://www.thresholds.org.uk/museums-collections-poets/kettles-yard/](http://www.thresholds.org.uk/museums-collections-poets/kettles-yard/)

即使您调整浏览器大小，它在 Chrome 中看起来也很棒，一切看起来都很棒。但是，在 Firefox 中，列相互重叠并且图像不会调整大小。

主要的网格类是 .c-1（宽度较小的列）和 .c-2（两个 .c-1 列的宽度）。我的代码中发生了什么导致此问题？

为了快速参考，我在`box-sizing: border-box`网格中使用 CSS3，这是我的 .c-1 和 .c-2 类的代码：

```
.c-1 {
width: 288px;
float: left;
margin-left: 28px;
display: block;
}

.c-2 {
width: 604px;
float: left;
margin-left: 28px;
display: block;
}

.c-1:first-child, .c-2:first-child, .c-1:nth-child(4n+1) { margin-left: 0; } 
```

我还将以下代码用于响应式图像：

```
img { 
border: 0; 
-ms-interpolation-mode: bicubic; 
vertical-align: middle; 
max-width: 100%;
height: auto;
margin-bottom: 1.875em;
} 
```

**编辑**好吧，我现在似乎已经修复了大多数部分的响应式图像。.active 的类名缺少宽度值，但博客部分仍然存在一个疯狂的问题。即使在该页面上使用了相同的布局（.c-1 和 .c-2 一起内联），这部分似乎彼此重叠......奇怪！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:22:35.873

好吧，当这些元素没有指定宽度时，Firefox 似乎不喜欢计算元素的宽度，这解释了为什么响应式图像不起作用。*设置为 max-width 的图像必须具有设置宽度的容器，否则图像将无法缩放。*

如果 CSS 中没有指定宽度，我认为浏览器默认元素为 100% 宽度？

不管怎样，现在都修好了。把宽度放在你的包装纸上！

# android - Android NDK - 示例问题 (UnsatisfiedLinkError)

> ID：13988624
> 
> 赞同：2
> 
> 时间：2012-12-21T10:45:04.430
> 
> 标签：android, android-ndk

我正在尝试运行并理解这个例子：[http ://answers.oreilly.com/topic/2689-how-to-use-the-android-ndk-to-improve-performance/](http://answers.oreilly.com/topic/2689-how-to-use-the-android-ndk-to-improve-performance/)

这是一个非常简单的示例，包含以下文件：

```
FibActivity.java - main activity file
FibLib - class implementing and calling the native functions
fib.c - the C source file with the native functions and code
FibLib.h - the C header file, automatically created from the FibLib class
Android.mk - the makefile 
```

我已经完全按照描述实现了这个例子。尽管如此，当我运行它时，当应用程序尝试访问本机代码时，我会收到此 (UnsatisfiedLinkError) 错误：

```
12-21 11:31:53.042: D/dalvikvm(1491): Trying to load lib /data/data
/com.frank.android.ndk/lib/libfib.so 0x405143b8
12-21 11:31:53.042: D/dalvikvm(1491): Added shared lib /data/data/com.frank.android.ndk
/lib/libfib.so 0x405143b8
12-21 11:31:53.042: D/dalvikvm(1491): No JNI_OnLoad found in /data/data
/com.frank.android.ndk/lib/libfib.so 0x405143b8, skipping init
12-21 11:31:53.093: W/dalvikvm(1491): No implementation found for native Lcom/frank
/android/ndk/FibLib;.fibN (I)J
12-21 11:31:53.102: D/AndroidRuntime(1491): Shutting down VM
12-21 11:31:53.102: W/dalvikvm(1491): threadid=1: thread exiting with uncaught 
exception (group=0x40015560)
12-21 11:31:53.112: E/AndroidRuntime(1491): FATAL EXCEPTION: main
12-21 11:31:53.112: E/AndroidRuntime(1491): java.lang.UnsatisfiedLinkError: fibN
12-21 11:31:53.112: E/AndroidRuntime(1491): at 
com.frank.android.ndk.FibLib.fibN(Native Method)
12-21 11:31:53.112: E/AndroidRuntime(1491): at 
com.frank.android.ndk.JavaNativeFibonacciAct
ivity.onClick(JavaNativeFibonacciActivity.java:52) 
```

我注意到的唯一奇怪的事情是，根据 logcat，eclipse 尝试从 /lib 文件夹加载库，而自动创建的文件夹称为 /libs。但是，将 /lib 文件夹重命名为 /libs 并重建所有内容并没有什么区别。

有人有什么想法吗？几天来，我一直在尝试让示例工作，包括使用 javah 创建头文件。仅创建主活动和 c 文件，然后从主活动调用本机代码似乎可行，但是一旦我开始使用头文件，我就会得到 UnsatisfiedLinkError。

更新：

来自 FibLib.java：

```
// Native implementation
static {
    System.loadLibrary("fib"); // 
}

// Native implementation - recursive
public static native long fibN (int n);

// Native implementation - iterative
public static native long fibNI (int n); 
```

fib.c 文件：

```
#include "com_frank_android_ndk_FibLib.h" /*  */

/* Recursive Fibonacci Algorithm  */
long fibN(long n) {
    if(n<=0) return 0;
    if(n==1) return 1;
    return fibN(n-1) + fibN(n-2);
}

/* Iterative Fibonacci Algorithm  */
long fibNI(long n) {
    long previous = -1;
    long result = 1;
    long i=0;
    int sum=0;
    for (i = 0; i <= n; i++) {
        sum = result + previous;
        previous = result;
        result = sum;
    }

    return result;
}

/* Signature of the JNI method as generated in header file  */
JNIEXPORT jlong JNICALL Java_com_frank_android__ndk_fibN (JNIEnv *env, jclass obj, jlong  n) {
    return fibN(n);
}

/* Signature of the JNI method as generated in header file  */
JNIEXPORT jlong JNICALL Java_com_frank_android__ndk_fibNI (JNIEnv *env, jclass obj, jlong  n) {
    return fibNI(n);
} 
```

Andoid.mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := fib
LOCAL_SRC_FILES := fib.c

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T03:13:35.643

您的 Java 包名称似乎命名为“com.frank.android.ndk”，您的 Java 类名称似乎命名为“FibLib”，而与 FibN 匹配的 C 函数的名称应为 Java_com_frank_android_ndk_FibLib_fibN。此[页面](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/design.html#wp615)由 Android 文档引用，并详细介绍了 C 函数的 JNI 命名约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:27:30.067

它只是看起来，还是你的 C 函数名称真的在单词 ndk 之前使用双下划线？它应该是单下划线恕我直言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T23:07:56.610

它找不到`Lcom/frank/android/ndk/FibLib;.fibN`。日志表明库已成功加载。

该方法应该被调用`Java_com_frank_android_ndk_FibLib_fibN`；在问题中，您有一个双下划线，并且您缺少类名。如果您有两种不同的方法可以解决相同的问题，您也可以通过对参数进行编码来区分它们，但这在这里似乎没有必要。

你说这是一个 C 程序，但有时人们将 C 和 C++ 混为一谈，所以我还要指出，如果这是一个“.cpp”文件，你需要放入`extern "C"`声明中，否则 C++ 会“破坏”函数姓名。

另请参阅[http://developer.android.com/training/articles/perf-jni.html#faq_ULE](http://developer.android.com/training/articles/perf-jni.html#faq_ULE)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:50:11.183

您是否使用 ndk-build 遵守了 JNi 代码？类名应与 JNI 和 Java 中的描述相同

```
Java_com_qualcomm_QCARSamples_VideoPlayback_VideoPlayback_initApplicationNative 
```

initApplicationNative 是在 Java 和 JNi 上应该相同的方法名称，如果不是，那么您将收到此错误

# iphone - 从 iphone SDK 中的电影播放器 返回时导航栏未正确显示

> ID：13988625
> 
> 赞同：1
> 
> 时间：2012-12-21T10:45:06.513
> 
> 标签：iphone, ios, uinavigationcontroller, mpmovieplayercontroller

在我的应用程序中，我在 Web 视图中加载了一个包含视频的 HTML 页面。至此，导航栏正确显示。

但是，当我在 iphone 中默认使用电影播放器​​播放视频并尝试在全屏横向/纵向模式下查看它时。**从电影播放器​​返回时，导航栏转到顶部，状态栏覆盖一些视图**。![在此处输入图像描述](../Images/65a46de0ff542b88b2a75fab1ca7423b.png)

我的项目中没有使用 mediaPlayer 框架或任何其他类。

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:50:41.180

只需将下面的行粘贴到`viewWillAppear:`发生此问题的视图控制器类上。

**目标 C**

```
[[UIApplication sharedApplication] setStatusBarHidden:NO animated:NO]; 
```

**迅速**

```
UIApplication.shared.setStatusBarHidden(false, with:UIStatusBarAnimation.none) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:52:27.407

在您的电影播放器​​类中替换

```
[[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO]; 
```

和

```
[[UIApplication sharedApplication] setStatusBarHidden:NO animated:NO]; 
```

意味着如果您在从播放器返回时隐藏状态栏，则视图的高度将增加 20 像素。所以你的观点会向上

# jquery - 每个函数和 .text 在 ie 中都不起作用

> ID：13988629
> 
> 赞同：0
> 
> 时间：2012-12-21T10:45:14.187
> 
> 标签：jquery, internet-explorer, function, text, each

我有一个简单的代码，可以找到链接的href，如果它等于窗口位置，它会向它添加类，或者某些div会改变整个文本，无论如何，希望你能从代码中理解一切：

```
$(".menu_link").each(function() {
        if(this.href == window.location) {
            $(this).addClass("selected");
            var text=this.text;
            $('#selected_page').text(text);
        }
    }); 
```

正如你可能从代码中理解的那样，我有一个带有类 menu_link 的多个链接，如果它的 href 与窗口位置相同，它会添加选定的类，但问题出在文本值中，接下来的 2 个句子都可以正常工作IE 以外的浏览器。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:50:07.080

据我所知，`text`您使用的属性不是标准的（它应该是`innerText`或`textContent`取决于浏览器）。

尝试改用 jQuery 的[text()](http://api.jquery.com/text/)方法：

```
$("#selected_page").text($(this).text()); 
```

# c++ - 施放 boost::fusion::vector

> ID：13988631
> 
> 赞同：4
> 
> 时间：2012-12-21T10:45:26.163
> 
> 标签：c++, boost, boost-fusion

boost::fusion::vector 的编号形式看起来像

```
template <class T1>
class vector1; 

template<class T1, class T2>
class vector2; 
```

等等

可变参数形式看起来像

```
template<class T1 = boost::fusion::void_, class T2 = boost::fusion::void_>
class vector; 
```

那么有没有办法在编译时将 boost::fusion::vector 从编号形式转换为可变参数形式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:31:37.720

你真的需要编译时转换吗？两者之间存在运行时转换，所以我看不出需要：

```
vector2<int, char> a(13, 'b');
vector<int, char> b = a; 
```

然而，我试图玩弄。我对我的答案不满意，但也许你可以努力找到更好的东西。

我希望能够使用一些元功能，但这似乎超出了我的能力范围。此外，使用这种方法，您需要根据不同的值多次定义它。

也许更好的解决方案是首先转换为元组......</p>

```
#include <boost/fusion/container/vector.hpp>
#include <boost/fusion/container/vector/vector10.hpp>
#include <boost/fusion/include/at.hpp>
#include <boost/type_traits/remove_reference.hpp>
using namespace boost::fusion;

template<typename NumVec2>
struct cast {
    typedef typename result_of::at_c<NumVec2, 0>::type T1;
    typedef typename result_of::at_c<NumVec2, 1>::type T2;
    typedef vector<typename boost::remove_reference<T1>::type, typename boost::remove_reference<T2>::type > type;
};

int main(int, char**){
    vector2<int, char> a(13, 'b');
    typedef cast< vector2<int,char> >::type casted_t;
    casted_t other(10, 'f');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:35:49.883

所以看来我有一个答案

```
using numbered_vector = fusion::vector3<int, char, float>

   struct as_vvector
    {
        template <class T>
        class result;

        template <class Self, class ... Args>
        struct result <Self(Args...)> {
            using type = fusion::vector<
                typename std::remove_reference<Args>::type...>;
        };
    };

    using variadic_vector =
        typename fusion::result_of::invoke<
                    as_vvector, numbered_vector>::type; 
```

# sql-server - sql server中给定月份的最后一个星期五

> ID：13988633
> 
> 赞同：9
> 
> 时间：2012-12-21T10:45:27.677
> 
> 标签：sql-server, tsql, sql-date-functions

如何在 T-SQL 中获取本月最后一个星期五的日期？

我将传递年份和月份作为参数，例如 201211。如果我传递“201211”作为参数，它应该返回“20121130”作为答案，因为它是 11 月 12 月的最后一个星期五的日期。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T11:17:42.607

1900 年 1 月 5 日是一个星期五。这使用该基准日期并计算任何给定月份的最后一个星期五，尽管您必须在该月内为其指定一个日期，而不仅仅是该月本身。将`2012-12-01`in this 替换为您所在月份的日期

```
SELECT DATEADD(DY,DATEDIFF(DY,'1900-01-05',DATEADD(MM,DATEDIFF(MM,0,'2012-12-01'),30))/7*7,'1900-01-05') 
```

您也可以通过替换`1900-01-05`WITH`1900-01-06`等来使用它来获取最后一个星期六。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:09:23.687

[使用日历表](https://stackoverflow.com/questions/2459260/calendar-table-week-number-of-month)会简单得多；在为您自己的需要创建适当的列之后，您可以这样写：

```
select 
    max([Date])
from 
    dbo.Calendar
where 
    YearAndMonth = 201211 and 
    DayOfWeek = 'Friday' 
```

与使用函数相比，日历表通常是确定日期的更好解决方案，因为代码更具可读性，并且您可以使用自己的定义，例如在国家甚至公司之间差异很大的`WeekNumber`事物`FinancialQuarter`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-31T10:35:27.070

我为此创建了一个标量函数：

```
create function [dbo].[lastDWMonth]
    (
     @y int
    ,@m int
    ,@dw int
    )

returns date

as

begin

declare @d date

;with x as
    (
    select datefromparts(@y,@m,1) d

    union all

    select dateadd(day,1,d) from x where d < eomonth(datefromparts(@y,@m,1))
    )

select
    @d = max(d)
from
    x
where
    datepart(dw,d) = @dw

return @d

end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-23T10:10:56.410

```
Declare @d1 datetime = '2019-12-23'
Declare @searchDay int = 2 -- monday
select DATEADD(DAY, @searchDay-DATEPART(WEEKday, DateADD(day,-1, DATEADD(month, DATEDIFF(MONTH, 0, @d1)+1, 0))),DateADD(day,-1, DATEADD(month, DATEDIFF(MONTH, 0, @d1)+1, 0))) 
```

这将为您提供该月最后一个星期一的日期，您可以通过更改值来更改搜索`@searchDay`

# objective-c - 带部分的 iOS GridView

> ID：13988635
> 
> 赞同：0
> 
> 时间：2012-12-21T10:45:39.947
> 
> 标签：objective-c, ios, gridview

我正在尝试实现我自己的类似于 KKGridView 的 gridview。

我的 gridview 具有额外的复杂性，因为它需要支持多个部分，每个部分中包含不同数量的项目/单元格。（见下文）

![在此处输入图像描述](../Images/d05b1aa72d2872e147e72d346cf25a89.png)

它还需要能够处理将一个单元格从第 1 节移动到第 0 节以及将第 0 节移动到第 1 节。

我已经编写了 UIView 来显示网格，但它不支持将单元格从一个部分移动到另一个部分。问题是是否有人有支持此功能的 gridview 或者可以建议我最好的前进方式，因为这个 gridview 需要在 iOS 5 和 iOS 6 中得到支持

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T11:00:23.777

我会尝试使用 , 的组合以及与`UICollectionView`iOS5的兼容性。`UICollectionViewFlowLayout``PSTCollectionView`

*   查看`UICollectionViewDelegateFlowLayout`文档，我想您会找到根据需要构建每部分自定义布局所需的一切。
*   `PSTCollectionView`是“iOS4.3+ 的 UICollectionView 的开源、100% API 兼容的替代品”。此外，您可以`UICollectionView`在 iOS6 上使用，并且只能`PSTCollectionView`在 iOS5 设备上使用。看看[GitHub 项目页面](https://github.com/steipete/PSTCollectionView)。

我在我正在开发的一个应用程序中使用了这种方法，而且实现起来非常简单。

编辑：你要采取的步骤大致如下：

*   您需要下载包含`PSTCollectionView`在您的项目中。为此，请按照 GitHub 页面上的步骤操作。
*   在您的`.h`文件中，导入`PSTCollectionView.h`并添加以下两个协议：`<PSUICollectionViewDataSource, PSUICollectionViewDelegate>`. 请注意，您将`UICollectionView`在 iOS6 和`PSTCollectionView`iOS5 中使用 Apple。在这里，您还应该为您的集合视图添加一个属性：`@property (nonatomic, strong) PSUICollectionView *collectionView;`
*   在`viewDidLoad:`方法中，你需要有这样的东西：

代码：

```
PSUICollectionViewFlowLayout *flowLayout = [[PSUICollectionViewFlowLayout alloc] init];
[flowLayout setScrollDirection:UICollectionViewScrollDirectionVertical];
[flowLayout setItemSize:CGSizeMake(91, 119)];
[flowLayout setMinimumLineSpacing:0];
self.collectionView.dataSource = self;
self.collectionView.delegate = self; 
```

*   您需要根据自己的喜好实现以下方法：

方法：

```
numberOfSectionsInCollectionView:
collectionView:numberOfItemsInSection:
collectionView:cellForItemAtIndexPath:
collectionView:layout:insetForSectionAtIndex:
collectionView:layout:minimumLineSpacingForSectionAtIndex:
collectionView:layout:minimumInteritemSpacingForSectionAtIndex: 
```

重要提示：不要忘记在每次提到`UICollectionView`类前加上`PS`. 例如`PSUICollectionView`或`PSUICollectionViewLayout`。

编辑 2：对于`UICollectionView`参考[这个优秀教程](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)的一般理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:52:15.387

您可以使用自定义单元格来实现此功能。一个单元格有 10 个子视图，第二个单元格有 6 个子视图。它会为你工作。

您可以通过标签获取单元格中的视图，即 1-6 和 1-10

尝试这个

# ios - 我的 UINavigationitem 的 TitleView 在 ios 6 中得到扩展

> ID：13988642
> 
> 赞同：4
> 
> 时间：2012-12-21T10:46:03.997
> 
> 标签：ios, uinavigationitem, titleview

在我的应用程序中，我在 uinavigation 项目上应用了图像。它在 iOS 5 中运行良好，但在 iOS 6 上得到扩展。我在导航栏中没有左右栏按钮项。我搜索了太多但找不到答案。

这是我的代码：

```
UIImageView *navigationImage=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 98, 34)];
navigationImage.image=[UIImage imageNamed:@"topNav-logo.png"];
self.navigationItem.titleView=navigationImage; 
```

图像显示如下：

[![截屏](../Images/9d46e0e6a83026625228634e128e8d81.png)](https://i.stack.imgur.com/bFM38.png)

它应该像下图一样显示，但在 iOS 6 中显示为展开式，在 iOS 5 中运行良好。

结果是：

[![结果截图](../Images/9d87a0f22433457a729bac08767b11ef.png)](https://i.stack.imgur.com/xGtCz.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:57:26.770

我从 iOS 6 开始遇到同样的问题，并找到了最疯狂的解决方法：

再创建一个相同尺寸的 UIImageView。然后将 navigationImage 作为子视图添加到其中。在我的情况下，这将阻止自动调整大小。

```
UIImageView *workaroundImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 98, 34)];
[workaroundImageView addSubview:navigationImage];
self.navigationItem.titleView=workaroundImageView; 
```

如果有人找到适当的解决方案或解释，请发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:03:05.353

我的项目中有以下代码，在 iOS 5 和 iOS 6 下运行良好。你可以试试这个：

```
self.navigationItem.titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"topNav-logo.png"]]; 
```

此外，请确保同时具有@2x 和常规尺寸的图像。

# c# - 在 C# 中具有字符串键类型的不区分大小写字典

> ID：13988643
> 
> 赞同：194
> 
> 时间：2012-12-21T10:46:07.097
> 
> 标签：c#, collections, generic-collections

如果我有，`Dictionary<String,...>`是否可以制作`ContainsKey`不区分大小写的方法？

这似乎相关，但我没有正确理解：[c# Dictionary: making the Key case-insensitive through declarations](https://stackoverflow.com/questions/6676245/c-sharp-dictionary-making-the-key-case-insensitive-through-declarations)

* * *

## 回答 #1

> 赞同：382
> 
> 时间：2012-12-21T11:04:46.813

> 这似乎相关，但我没有正确理解：c# Dictionary: making the Key case-insensitive through declarations

确实有关系。解决方案是告诉字典实例不要使用标准的字符串比较方法（区分大小写），而是使用不区分大小写的方法。这是使用[适当的构造函数](http://msdn.microsoft.com/en-us/library/ms132072(v=vs.80).aspx)完成的：

```
var dict = new Dictionary<string, YourClass>(
        StringComparer.InvariantCultureIgnoreCase); 
```

构造函数需要一个[`IEqualityComparer`](http://msdn.microsoft.com/en-us/library/ms132151(v=vs.80).aspx)告诉字典如何比较键的值。

[`StringComparer.InvariantCultureIgnoreCase`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.invariantcultureignorecase.aspx)给你一个`IEqualityComparer`实例，它以不区分大小写的方式比较字符串。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-21T11:07:48.857

```
var myDic = new Dictionary<string, string>(StringComparer.InvariantCultureIgnoreCase);
myDic.Add("HeLlo", "hi");

if (myDic.ContainsKey("hello"))
    Console.WriteLine(myDic["hello"]); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-11-17T19:59:16.670

您处理从第 3 方或外部 dll 中提取的字典的机会很少。使用 linq

```
YourDictionary.Any(i => i.KeyName.ToLower().Contains("yourstring"))) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-07-14T22:14:14.027

如果您无法控制实例创建，假设您的对象已从 json 等中去除，您可以创建一个继承自字典类的包装类。

```
public class CaseInSensitiveDictionary<TValue> : Dictionary<string, TValue>
{
    public CaseInSensitiveDictionary() : base(StringComparer.OrdinalIgnoreCase){}
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-22T08:08:28.503

我刚刚遇到了同样的麻烦，我需要在 ASP.NET Core 控制器中使用不区分大小写的字典。

我写了一个可以解决问题的扩展方法。也许这对其他人也有帮助......

```
public static IDictionary<string, TValue> ConvertToCaseInSensitive<TValue>(this IDictionary<string, TValue> dictionary)
{
    var resultDictionary = new Dictionary<string, TValue>(StringComparer.InvariantCultureIgnoreCase);
    foreach (var (key, value) in dictionary)
    {
        resultDictionary.Add(key, value);
    }

    dictionary = resultDictionary;
    return dictionary;
} 
```

要使用扩展方法：

```
myDictionary.ConvertToCaseInSensitive(); 
```

然后从字典中获取一个值：

```
myDictionary.ContainsKey("TheKeyWhichIsNotCaseSensitiveAnymore!"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-11T15:46:38.047

我知道这是一个较老的问题，但我遇到了同样的问题，即字典来自第 3 方工具，该工具未在构造函数中实现忽略大小写 StringComparer。从@Soviut 上面的方法进行了调整，但感觉这更干净，让您可以立即使用该值。

```
var lookup = source.FirstOrDefault(x => x.Key.Equals("...", StringComparison.OrdinalIgnoreCase));
if (lookup.Key != null) 
```

# iphone - iPhone 应用程序在 iOS 4 上运行良好，但在 iOS 6 的启动屏幕上崩溃

> ID：13988650
> 
> 赞同：0
> 
> 时间：2012-12-21T10:46:31.457
> 
> 标签：iphone, ios6, crash

**我的日志报告是。**

```
Dec 21 15:44:26 New-iPod-Accuretech ReportCrash[1652] <Notice>:
   Formulating crash report for process TextBook[1651] Dec 21 15:44:26
   New-iPod-Accuretech kernel[0] <Debug>: launchd[1651] Builtin profile:
   container (sandbox) Dec 21 15:44:26 New-iPod-Accuretech kernel[0]
   <Debug>: launchd[1651] Container:
   /private/var/mobile/Applications/CAD3777B-818F-4020-BCB7-813708315A0B
   (sandbox) Dec 21 15:44:26 New-iPod-Accuretech com.apple.launchd[1]
   (UIKitApplication:com.AccelApp.TextBook[0xfb6c][1651]) <Warning>:
   (UIKitApplication:com.AccelApp.TextBook[0xfb6c]) Job appears to have
   crashed: Trace/BPT trap: 5 Dec 21 15:44:26 New-iPod-Accuretech
   com.apple.launchd[1] (UIKitApplication:com.AccelApp.TextBook[0xfb6c])
   <Notice>: (UIKitApplication:com.AccelApp.TextBook[0xfb6c]) Throttling
   respawn: Will start in 2147483647 seconds Dec 21 15:44:26
   New-iPod-Accuretech backboardd[52] <Warning>: Application
   'UIKitApplication:com.AccelApp.TextBook[0xfb6c]' exited abnormally
   with signal 5: Trace/BPT trap: 5 Dec 21 15:44:26 New-iPod-Accuretech
   ReportCrash[1652] <Error>: libMobileGestalt
   copySystemVersionDictionaryValue: Could not lookup ReleaseType from
   system version dictionary Dec 21 15:44:26 New-iPod-Accuretech
   ReportCrash[1652] <Notice>: Saved crashreport to
   /var/mobile/Library/Logs/CrashReporter/TextBook_2012-12-21-154426_New-iPod-Accuretech.plist
   using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:37:39.260

只需删除您的启动画面图像`Default-568h@2x.png`。然后清理您的代码并删除以前的构建，然后再次运行。

# eclipse - GWT：使用外部 Jar

> ID：13988653
> 
> 赞同：2
> 
> 时间：2012-12-21T10:46:38.157
> 
> 标签：eclipse, gwt, google-plugin-eclipse

我想弄清楚如何在 GWT 项目中使用外部 jar。
我提到了[http://www.vogella.com/articles/GWTModules/article.html](http://www.vogella.com/articles/GWTModules/article.html)，它运行良好。
但是该示例使用 GWT 项目的构建路径中包含的另一个项目来解释，而不是包含该项目的 jar。

我知道这应该没什么区别，但是当我创建外部项目（包括源）的 jar 并在客户端 GWT 中使用它时，给了我以下错误：

```
The import com.person cannot be resolved 
```

会有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:52:55.263

要在 gwt eclipse 项目中使用外部 gwt 库 jar 文件，您必须从 java 构建路径的库选项卡中添加该 jar 文件：

![在此处输入图像描述](../Images/cb3f68c650bfe56f04aac360236cd7a7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:09:40.763

如果您想使用外部 jar 并在客户端使用该 jar 类。您必须继承客户端 gwt module.gwt.xml 中的模块包条目

只是一个例子。`com.test.Module2.xml`所以你有像

```
<inherits name='com.test.Module2'/> 
```

# django - 如何在使用模型表单集时区分模板中已创建的对象和新对象

> ID：13988654
> 
> 赞同：0
> 
> 时间：2012-12-21T10:46:38.467
> 
> 标签：django, forms, django-forms

我不太确定我是否采取了正确的方法来实现这一目标。我想要的是（更改css）/（使用一些jQuery方法）由具有预填充数据的modelformset呈现的表单元素。例如，我有以下模型集。

```
 EduFormSet = modelformset_factory(models.CandidateDegree,
                 form=forms.CandidateDegreeForm)
    edu_formset = EduFormSet(prefix='candidate_degree',
                  queryset=models.CandidateDegree.objects\
                           .filter(candidate=can)) 
```

当我将它传递`formset`给`template`它时，它会为所有现有`CandidateDegree`对象呈现表单，其中包含预填充的数据和一个空白表单。

我想要实现的不是显示预填充的表单，而是显示已经创建的对象的数据，并将编辑按钮附加到元素（使用 jQuery），然后显示表单。并在对象列表的末尾显示由 formset 生成的空白表单。

我知道我可以将`CandidateDegree`与 a 相关的所有对象`Candidate`作为单独的字典传递以显示信息。但在那种情况下，我如何将表单附加到表单集，以便动态生成的表单成为表单集的一部分，并且当用户单击提交按钮时，所有信息都会被保存。

实现这样的目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:18:25.280

您不必显示完整的表单，您可以像这样遍历表单集：

```
 {% for form in edu_formset %}
      form.FIELDNAME#1.value
      form.FIELDNAME#2.value
      etc.
 {% endfor %}

 <!-- Manually render empty form for new entry -->
 <div class='input'>
     <label>Locality: </label> <input id="FIELDNAME#1" disabled=disabled value="">
     <label>Country:  </label> <input id="FIELDNAME#2" disabled=disabled value="">
     etc.
 </div> 
```

因此，您只显示发送到模板的所有对象的数据库值，而不是表单输入。

然后确实使用最少的 jquery（或纯 javascript），您可以显示/隐藏 div.input

# jquery - 是否可以更改 jQuery 中的 URL 列表？

> ID：13988657
> 
> 赞同：0
> 
> 时间：2012-12-21T10:46:39.910
> 
> 标签：jquery

我有一个网站，里面有大约 20 个我想更改的内部链接。

jQuery中是否可以在它们出现时更改它们？

因此，例如，如果站点输出：

```
<a href="http://www.mysite.com/link1">Link</a> or <a href="mysite.com/link2">Another</a> 
```

jQuery 将其更改为：

```
<a href="http://www.othersite.com/link">Link</a> or <a href="www.externalsite.com/link-another">Another</a> 
```

抱歉，如果这是一个愚蠢的问题，我是 JS/jQuery 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:49:51.503

这应该可以解决问题：

```
//Specify what you want to replace with what, here:
var changes = [
    ['http://www.mysite.com/link1', 'http://www.othersite.com/link'],
    ['http://www.mysite.com/somepage.php', 'http://www.othersite.com/anotherpage.php'],
    ['http://www.mysite.com', 'http://www.anothersite.com']
] 
```

```
$(function(){
    $('a').each(function() {
        var href = this.href;
        for(var i = 0; i < changes.length; i++){
            if(href == changes[i][0]){
                href = changes[i][1];
            }
        }
        this.href = href;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:54:18.330

尝试这样的事情。[这是一个现场演示](http://jsfiddle.net/KLH5k/)

```
​$​('a').each(function(){
    var link = $(this).attr('href');
    link = link.replace('www.mysite.com', 'www.othersite.com');
    link = link.replace('mysite.com', 'http://www.externalsite.com');
    $(this).attr('href', link)    
});​​ 
```

由于您似乎有非常特定的链接要替换当前链接，因此您需要对其进行调整以处理所有特定更改。此示例简单处理域文本替换。从您提供的示例中很难收集特定的“规则”。

如果您只有少量链接，那么对替换进行硬编码可能会更好。

```
​$​('a').each(function(){
    var link = $(this).attr('href');
    var newLink = null;
    if (link == 'http://www.mysite.com/link1') 
        newLink ='http://www.othersite.com/link';
    else if (link == 'mysite.com/link2') 
        newLink ='www.externalsite.com/link-another';

    if (newLink) $(this).attr('href', newLink)    
});​​ 
```

# java - 使用自定义注解创建我们自己的切面

> ID：13988659
> 
> 赞同：3
> 
> 时间：2012-12-21T10:46:41.090
> 
> 标签：java, annotations, aspects

我是 Annotations 的新手，也是 StackOverflow 的新手，这是我的第一个问题。我正在尝试编写自定义注释，这将帮助我跟踪和记录方法执行。

例如：

```
class A
{

@Logthis

void methodA();

} 
```

在这里，每当`methodA()`执行该方法时，我想记录到一个文件，告诉“我们正在 A 类中输入方法 A”，当方法 A 结束时“我们正在 A 类中退出方法 A”类似这样的内容。我们 vil 有许多类和方法。

我知道这可以使用 AspectJ 来完成。我通过定义切入点和连接点来做到这一点。但我想使用自定义注释来做到这一点。

如果有人可以指导我如何去做这将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:36:01.940

使用 AspectJ，您可以执行以下操作：-

创建一个用 @Aspect 注释的 Aspect 类

使用 @Around 注释类中的方法，并定义要在已注释的类上执行的值。您还需要启用 AspectJ 对您的类的代理。

```
@Aspect
public class LoggerAspect {

    @Around(value = "execution(@you.custom.Annotation * *(..))")
    public Object logMethod(ProceedingJoinPoint joinPoint) throws Throwable
    {
        // DO LOGGING HERE
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:55:10.090

您可以使用 Log4J。这是它的教程：

[http://javakane.blogspot.fr/2012/07/automate-log4j-logging-with-aop-and.html](http://javakane.blogspot.fr/2012/07/automate-log4j-logging-with-aop-and.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:27:02.177

看来您想*推出自己的*aop 框架。恕我直言，这不是一个好主意，已经进行了大量工作`AspectJ`，您将从使用它中受益匪浅。但我怀疑你已经知道了 :) 很奇怪，你可以使用 NO 外部 jar，即使对于商业软件也是相当严格的。

但是如果你真的需要这样做，你可能可以向别人学习。`AspectJ`是开源的，没有什么能阻止您阅读它并根据您的需要进行调整。

对于有限的要求，它可能也不是很复杂。您需要一个[`java agent`](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html)可以在加载类和方法时查看它们的注释并修改它们的字节码以添​​加日志记录。同样，有一些优秀的库可以帮助实现这一点，但可惜你不能使用它们。

另一种选择可能是使用[jpda](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/)。我没有这方面的经验，但我怀疑它会对性能产生重大影响。

# asp.net-mvc-3 - 在 mvc3 的 Partial 中放入 Inherits 部分的内容

> ID：13988662
> 
> 赞同：0
> 
> 时间：2012-12-21T10:47:06.347
> 
> 标签：asp.net-mvc-3, partial-views

我有我的控制器，我不确定我是否正确

```
[HttpGet]
[NoCache]
public ActionResult ListCommentsOnNews(int newsId, string newsComment) ???
{
  //code here with return
} 
```

在我的 Article.aspx 视图中：

```
<div class="news-comment-content" id="news-comment-content">     
  <% if (Model.Results != null) 
    { %>
   <% foreach (var newsItem in Model.Results.NewsComments)
      {  %>  
      <% Html.RenderPartial("SetCommentOnNews", newsItem); %>
  <%} } %>
</div> 
```

然后是我的部分 ListCommentsOnNews.ascx：

```
 <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<???>" %>

  <div class="news-post-list-item">
    <div class="news-post-user-info-wrapper">
      <div class="avatar">
        <img width="52" height="52" alt="Avatar" src="/ThemeFiles/Base/images/User/user-avatar.png" />
      </div>
      <div class="who-and-when-box">
        <%: newsItem.CommentDate %>  //get error here
        <br />
        <br />
        <%: ViewBag.UserName %>
      </div>
      <div class="news-comment"><%: newsItem.NewsComment %></div> //and get error here
      <div class="clear"></div>
    </div>     
    <div class="clear"></div> 
  </div> 
```

我的控制器：

```
 [HttpGet]
public ActionResult Article(int id, int? page)
{
  var news = ZincService.NewsService.GetNewsForId(id);
  var allNewsComments = ZincService.NewsService.GetAllNewsCommentsForId(id, page.GetValueOrDefault(1), 10);
  var currentUser = ZincService.GetUserForId(CurrentUser.UserId);

  if (news == null || news.PublishingState != PublishingState.Live)
    return RedirectToAction("NotFound");

  if (allNewsComments != null)
  {
    var user = ZincService.GetUserForId(currentUser.UserId);
    if (user == null || user.Customer.CustomerId != CurrentCustomer.CustomerId)
      return DataNotFound();

    ViewBag.Avatar = user.UserImage;
    ViewBag.UserName = user.Firstname + "   " + user.Surname;
    NewsCommentsViewModel model = (NewsCommentsViewModel)SetNewsArticleViewModel(news, new NewsCommentsViewModel());
    foreach (var newsItem in allNewsComments.NewsComments)
    {
      model.Results = allNewsComments;
      model.PageSize = 10;
      model.CurrentPage = page.GetValueOrDefault(1);
    }
    return View(model);
  }
  else
  {
    return View(SetNewsArticleViewModel(news,null));
  }
}

 [NonAction]
private NewsArticleViewModel SetNewsArticleViewModel(Entities.News.News news, NewsArticleViewModel viewModel)
{
  viewModel.News = news;
  viewModel.IsFavourite = ZincService.FavouriteService.IsFavouriteForUser(CurrentUser.UserId, news); 
  viewModel.DownloadAttachments = news.NewsAttachments.Where(x =>
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.Excel ||
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.PDF ||
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.PowerPoint ||
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.Word);

  viewModel.EmbedAttachments = news.NewsAttachments.Where(x =>
    Core.FileFormat.FileFormatHelper.GetFileFormatType(x.FileExtension) == Core.FileFormat.FileFormatType.Video);

  return viewModel;
} 
```

我在 newsItem 部分收到错误，指出它在当前上下文中不存在。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:57:13.857

正如我从您发布的代码中推断的那样，问题在于您对模型的使用。您正在尝试使用模型属性，但您没有正确执行。请尝试以下操作：

```
<%
      Model.CommentDate
     %> 
```

代替

```
<%: newsItem.CommentDate %>  //get error here 
```

# javascript - 'Enter' 的 KeyDown 事件导致不希望的结果

> ID：13988665
> 
> 赞同：2
> 
> 时间：2012-12-21T10:47:13.427
> 
> 标签：javascript, jquery, events, cross-browser, enter

**简介**
我正在创建一个自定义的所见即所得/富文本编辑器 (RTE)，因为我发现的那些在简单性和自定义方面没有满足我的需求。
我看过：
- CKEditor
- TinyMCE
- 等等

**情况**
我有一个 Textarea 和一个 Iframe。Textarea 保存数据库中的信息。在`$(window).load (function () {`Textarea 将隐藏，其内容将被复制到 Iframe 中`designMode = "on";`。

**NewLines**
当你按下“Enter”时，除了换行符之外，一切都很好。在每个浏览器中，结果都不同：
- `<p>`: Opera & IE
- `<div>`: Safari & Chrome
- `<br>`: Firefox

这不是一个可靠的结果，所以我决定当有人点击 Enter a 时`<br>`必须放置到位。因此，当有人想要一个新的段落时，他会按 Enter 两次，然后`<br>`放置两个。

因此，我使用 keyCode 13 (Enter) 构建了一个 KeyDown 事件。
在函数中，我通过以下方式阻止了默认操作：
- `event.preventDefault ();`IE9+、FF、CHROME、SAFARI 和 OPERA
- `event.returnValue = false;`IE8-

然后插入用于添加自定义的代码`<br>`：
- `pasteHTML`IE
- `insertHTML`FF、CHROME、SAFARI 和 OPERA

**JSFiddle**
上面的两个代码都可以在 IE7/8/9、Firefox、Chrome、Opera 和 Safari 中运行，但是会出现一些奇怪的结果。要自己查看错误，我在这里创建了一个 JSFiddle：http: [//jsfiddle.net/RickS/RZ4Re/](http://jsfiddle.net/RickS/RZ4Re/)

**错误** *参见上面的 JSFiddle*
[1：对所有浏览器的影响] 在“Two”之后点击“Enter”，没有任何反应，但在“One”之后点击“Enter”，您会看到代码有效。我发现当光标放在块元素*之前*时，`<ul>` `<ol>`或者不会放置到位。 该错误不会出现在内联元素上。 期望的结果：在块元素之前放置一个。`<p>``<br>`

`<br>`

[2：对 IE7/8/9 的影响] 在“三”（列表项）后按“回车”，“四”消失。输入一些内容并再次按“Enter”。现在“五”消失了。
还有奇怪的部分：点击“一”这个词。“四”和“五”再次出现，从未*被删除*。期望的结果：当您创建另一个列表项时，列表下方的内容仍然可见。

**搜索**
我已经研究这个问题一个多星期了，但似乎无法在任何地方找到解决方案。
在 Stack Overflow 上，我认为这篇文章接近但没有解决我的问题：[通过在 contenteditable 上按 Enter 来制作 <br> 而不是 <div></div>](https://stackoverflow.com/questions/3080529/make-a-br-instead-of-div-div-by-pressing-enter-on-a-contenteditable)

解决方案需要在 IE9（如果可能的话，还有 7 和 8）、Firefox、Chrome、Safari 和 Opera 中跨浏览器工作。

我希望有人可以帮助我解决这个问题。
所以在前面：非常感谢你！

瑞克

# c# - C# 泛型方法作为带有 where 子句的扩展

> ID：13988666
> 
> 赞同：3
> 
> 时间：2012-12-21T10:47:29.780
> 
> 标签：c#, generics, serialization, deserialization, serializableattribute

我想创建一个只能为 Serializable 类运行的扩展。有没有这样的代码：

```
using System;

namespace ConsoleApplication2
{
    [Serializable]
    public class Ser
    {

    }

    public class NonSer
    {

    }

    public static class Extension
    {
        static public T f_DeepClone<T>(this T obj)
                             where T : (SerializableAttribute)
        {

            return (T) obj;
        }
    }

    public class Program
    {
        static void Main(string[] args)
        {
            Ser mc = new Ser();
            mc.f_DeepClone<Ser>();
            NonSer mc1 = new NonSer();
            mc.f_DeepClone<NonSer>();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:50:17.883

如果您想在约束中使用属性，我认为以下链接会有所帮助：

*   [是否可以使用基于属性而不是类型的通用约束？](https://stackoverflow.com/questions/1346485/is-it-possible-to-use-generic-constraints-based-on-attributes-rather-than-types)
*   [您可以使用“where”来要求 c# 中的属性吗？](https://stackoverflow.com/questions/221687/can-you-use-where-to-require-an-attribute-in-c)
*   [为通用约束使用属性](https://stackoverflow.com/questions/4146674/using-attributes-for-generic-constraints)
*   [http://www.techtalkz.com/cc-sharp/172451-generics-how-have-constraint-attribute.html](http://www.techtalkz.com/c-c-sharp/172451-generics-how-have-constraint-attribute.html)（泛型：如何对属性进行约束？）

但是，如果您可以限制您的域使用 ISerializable，您可能会喜欢：

```
public static class Extension<T>
{
    static public T f_DeepClone<T>(this object obj) where T: ISerializable
    {
        // doing some serialization and deserialization
        return (T) obj;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:50:21.350

您不能像建议的那样测试属性，但可以测试接口：

```
public static class Extension
{
    static public ISerializable f_DeepClone(this ISerializable obj)
    {
        // doing some serialization and deserialization
        return (T) obj;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T11:03:07.837

您不能根据属性限制通用类型。

您将成为使用代码的人，然后您将知道对象何时可序列化以及何时不可序列化。编译器不需要保护你。

但是，如果您想在运行时检查，您可以执行以下操作：

```
static public T f_DeepClone<T>(this object obj)
{
    if(typeof(T).IsSerializable == false)
        throw new ArgumentException("Cannot clone non-serializable objects");

    // doing some serialization and deserialization
    return (T) obj;
} 
```

# sql-server - 存储函数返回 NULL

> ID：13988667
> 
> 赞同：0
> 
> 时间：2012-12-21T10:47:31.467
> 
> 标签：sql-server, sql-server-2008

我在 MASTER db 上创建了以下函数，因此您可以毫无问题地复制它

```
ALTER  FUNCTION [dbo].[sf_GetDateAggioGAP]
                   (@name varchar,@type_desc VARCHAR)
RETURNS DATETIME AS

BEGIN
    DECLARE @RESULT DATETIME
    DECLARE @DATA DATETIME
    DECLARE @RIPETI INT 
    SET @DATA = (SELECT DISTINCT create_date as DATINI FROM  sys.all_objects WHERE (name = @name) AND (TYPE_DESC = @type_desc))
    SET @RIPETI = (SELECT DISTINCT OBJECT_ID as RIPETI FROM  sys.all_objects WHERE (name = @name) AND (TYPE_DESC = @type_desc))
    SET @RESULT=@DATA
        WHILE @DATA <= getdate()
        BEGIN
        SET @DATA=dateadd(month,@RIPETI,@DATA)
        IF @DATA > GETDATE()
        BREAK
        ELSE
        CONTINUE
        SET @RESULT=@DATA
        END  
        RETURN @RESULT
    END 
```

当我以这种方式调用我的函数时`"select dbo.sf_getdateaggiogap('sysrscols','system_table') as datanext from sys.all_objects where name ='sysrscols'"`，结果始终为空，代码运行正确，但查询的结果始终为空。我哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:02:06.920

缺少参数的大小 ....

```
Alter  FUNCTION [dbo].[sf_GetDateAggioGAP]
                   (@name varchar(max),@type_desc VARCHAR(max)) 
```

# linux - 发送多个输出到 sed

> ID：13988671
> 
> 赞同：1
> 
> 时间：2012-12-21T10:47:51.340
> 
> 标签：linux, bash

当有一个程序在执行时打印几行时`stout`，我如何将所有这些行重定向到`sed`它们并在它们生成时对其执行一些操作？

例如：

```
7zip a -t7z output_folder input_folder -mx9 > sed 's/.*[ \t][ \t]*\([0-9][0-9]*\)%.*/\1/' 
```

7zip 生成一系列行作为输出，每行都包含一个百分比值，我`sed`只想在生成这些值时显示这些值。不幸的是，上面的脚本不起作用......

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:55:18.787

您应该使用管道`|`而不是重定向`>`，以便`sed`使用第一个命令输出作为其输入。

上面的脚本行必须已经`sed`在当前目录中创建了一个文件。

此外，可能`7zip`会将这些行输出到`stderr`而不是`stdout`. 如果是这种情况，首先在管道之前将标准错误重定向到标准输出：`2>&1 |`

# macos - 在 Mac OSX 中安装 Node.js 和 CoffeeScript 很困难

> ID：13988677
> 
> 赞同：2
> 
> 时间：2012-12-21T10:48:01.090
> 
> 标签：macos, node.js, coffeescript, npm

我在安装 Node 和 Coffeescript 时遇到了一些困难。我已经使用自制软件安装了节点，然后我已经成功安装了 NPM。我试图从 NPM 安装 Coffeescript，它似乎已经工作了，但是我无法运行咖啡

```
localserver:Documents x$ sudo npm -g install coffee-script
Password:
npm http GET https://registry.npmjs.org/coffee-script
npm http 304 https://registry.npmjs.org/coffee-script
/usr/local/share/npm/bin/coffee -> /usr/local/share/npm/lib/node_modules/coffee-script/bin/coffee
/usr/local/share/npm/bin/cake -> /usr/local/share/npm/lib/node_modules/coffee-script/bin/cake
coffee-script@1.4.0 /usr/local/share/npm/lib/node_modules/coffee-script
localserver:Documents x$ coffee
-bash: coffee: command not found
localserver:Documents x$ 
```

我需要为此设置一些路径环境变量吗？即使我导航到`/usr/local/share/npm/lib/node_modules/coffee-script/bin/coffee`我也无法从这里运行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T11:01:07.927

看起来 npm 没有将咖啡的目录添加到 PATH 中。您可以使用以下方法修复它：

```
export PATH=/usr/local/share/npm/lib/node_modules/coffee-script/bin/:$PATH 
```

我很确定一定有更好的方法。但我不知道足够的 OSX 来回答。

如果您希望此更改是永久性的，请将该行添加到您的`~/.profile`文件中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T21:34:05.500

在 Mac OS X 上，`.bashrc`是指定 $PATH ( [bashrc vs bash_profile](http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html) ) 的最佳位置。

您想添加一个适用于所有（全局安装的）Node 模块的路径，即`/usr/local/share/npm/bin`. 为此，您可以在 shell 中键入以下内容（其中 ^D 表示按 Control-D 结束输入）。

```
cat >> ~/.bashrc

export PATH="/usr/local/share/npm/bin:${PATH}"
^D 
```

# php - 转换非拉丁字符

> ID：13988682
> 
> 赞同：-1
> 
> 时间：2012-12-21T10:48:12.030
> 
> 标签：php, utf-8, encode

如何转换带有非拉丁字符的字符串，如下所示：

```
伊藤りな 
```

对此：

```
%E4%BC%8A%E8%97%A4%E3%82%8A%E3%81%AA 
```

在 php.ini 中。谢谢 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:53:55.907

使用[urlencode](http://php.net/urlencode) php 函数：

```
urlencode($string) 
```

# mysql - 按可能为空的字段的休眠顺序

> ID：13988686
> 
> 赞同：2
> 
> 时间：2012-12-21T10:48:26.727
> 
> 标签：mysql, hibernate, jpa, hql

我的猜测是这个问题在某个地方得到了回答，但我似乎找不到合适的关键词来搜索。

我有这些实体：

```
@Entity
Entity1{
    <random fields>

    @OneToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "entity_2")
    Entity2 e2;//might be null.
}

@Entity
Entity2{
    <random fields>
    String name;
} 
```

我想编写一个查询，返回我所有的 Entity1 按其 Entity2 的名称排序的。我试过这个：

```
SELECT e1 from Entity1 e1 ORDER BY e1.e2.name ASC 
```

上述查询的问题（在 mysql 上测试）是它只返回 e2 不为空的实体 1。

我需要的是一种获取所有 Entity1 的方法，即使 e2 为空。

附言。我也试过这些，结果相同：

```
SELECT e1 from Entity1 e1 ORDER BY e1.e2 ASC, e1.e2.name ASC
SELECT e1 from Entity1 e1 ORDER BY e1.e2.name ASC, e1.e2 ASC 
```

提前致谢！
//hql新手

**编辑：**
添加了我使用的 jpa -annotations。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:57:58.677

如果您正在使用 JPA，则使用 Annotations 对您的问题来说非常简单.. 这样我就举了一个使用 Annotaion 的例子

当您在域对象中有关联对象的集合时，您通常希望指定某种默认排序顺序。例如，假设我有域对象 Timeline 和 Event：

```
@Entity
class Event {

    @Required
    Integer startYear

    Integer endYear

    @Required
    String description

    @ManyToOne
    Timeline timeline
} 
```

此排序顺序与使用带有“startYear, endYear”排序顺序的 JPA @OrderBy 相同。但是，由于您在 Hibernate 的 @OrderBy 中编写了实际的 SQL，因此您可以利用数据库具有的任何功能，但可能会牺牲跨数据库的可移植性。例如，Oracle 10g 支持使用类似“order by start_year, end_year nulls first”的语法在非空结束年份之前排序空结束年份。

@org.hibernate.annotations.OrderBy。将 SQL 片段添加到您的域类中不一定是世界上最优雅的事情，但它可能是最实用的事情。

# java - JSON to Java：如何将对象列表建模为通用对象类，其对象名称来自 json 是可变的

> ID：13988691
> 
> 赞同：2
> 
> 时间：2012-12-21T10:48:36.613
> 
> 标签：java, json, jackson

假设我有以下无法更改的 JSON，因为它是由其他人通过网络提要提供的。我想使用 Jackson 将其解析为 Java 对象。

```
{
"2002": [
  {
    "d": "description",
    "t": "title"
  }
],
"2003": [
  {
    "d": "description",
    "t": "title"
  }
]
} 
```

该数据表示，例如，ids=2002、2003 ...等的电视节目列表，每个节目都有描述和标题。我想将此数据解析为通用程序类列表，其中每个程序类都有字段 d 和 t。我不想为 2002、2003 等对象设置单独的类。请记住，2002、2003 等 id 直到运行时才知道，并且可以随着时间的推移而演变，也可能是很长的可能值列表。

是否可以将其建模为 id 字段等于 json 字符串中对象名称的通用程序列表？换句话说，我不希望这样：

```
public class AllProgrammes {
  private List<com.example._2002> _2002;
  private List<com.example._2003> _2003;
  // getters and setters
} 
```

但它应该只包含`List<Programmes>`，并且每个程序对象都应该有一个 id = 2002 或 2003 或任何 id。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:39:08.070

如果你可以使用 Google Gson，你可以这样做：

程序类

```
public class Program {
  private String id;
  private String title;
  private String description;

  public Program(String id, String title, String description) {
    this.id = id;
    this.title = title;
    this.description = description;
  }

  @Override
  public String toString() {
    return String.format("Program[id=%s, title=%s, description=%s]", this.id, this.title, this.description);
  }
} 
```

ProgramsDeserializer.class

```
import com.google.gson.JsonArray;
import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParseException;
import java.lang.reflect.Type;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

class ProgramsDeserializer implements JsonDeserializer<List<Program>> {
  @Override
  public List<Program> deserialize(JsonElement e, Type type, JsonDeserializationContext jdc) throws JsonParseException {
    List<Program> programs = new ArrayList<>(10);
    JsonObject root = e.getAsJsonObject();
    for (Map.Entry<String, JsonElement> entry : root.entrySet()) {
      String id = entry.getKey();
      String title = "";
      String description = "";
      JsonElement arrayElement = entry.getValue();
      if (arrayElement.isJsonArray()) {
        JsonArray array = arrayElement.getAsJsonArray();
        JsonElement objectElement = array.get(0);
        if (objectElement.isJsonObject()) {
          JsonObject object = objectElement.getAsJsonObject();
          title = object.get("t").getAsString();
          description = object.get("d").getAsString();
        }
      }
      programs.add(new Program(id, title, description));
    }
    return programs;
  }
} 
```

GsonExample.class

```
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.reflect.TypeToken;
import java.lang.reflect.Type;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

public class GsonExample {
  private static final Logger logger = Logger.getLogger(GsonExample.class.getName());
  private static final String JSON = 
    "{"
      + "\"2002\": ["
        + "{"
          + "\"d\": \"description\","
          + "\"t\": \"title\""
        + "}"
      + "],"
      + "\"2003\": ["
        + "{"
          + "\"d\": \"description\","
          + "\"t\": \"title\""
        + "}"
      + "]"
    + "}";

  public static void main(String[] args) {
    GsonExample e = new GsonExample();
    e.run();
  }

  private void run() {
    GsonBuilder builder = new GsonBuilder();
    Type type = new TypeToken<List<Program>>(){}.getType();
    builder.registerTypeAdapter(type, new ProgramsDeserializer());
    Gson gson = builder.create();
    List<Program> programs = gson.fromJson(JSON, type);
    logger.log(Level.INFO, "{0}", programs);
  }
} 
```

# grails - 重定向到外部站点不会终止当前的执行流程

> ID：13988692
> 
> 赞同：0
> 
> 时间：2012-12-21T10:48:40.407
> 
> 标签：grails

我正在使用 grails 1.3.7。

我有以下过滤器设置：

```
class MyFilters {
    def userService
    def springSecurityService

    def filters = {
        all(controller: '*', action: '*') {
            before = {
                String userAgent = request.getHeader('User-Agent')

                int buildVersion = 0

                // Match "app-/{version}" where {version} is the build number
                def matcher = userAgent =~ "(?i)app(?:-\\w+)?\\/(\\d+)"

                if (matcher.getCount() > 0)
                {                   
                    buildVersion = Integer.parseInt(matcher[0][1])

                    log.info("User agent is from a mobile with build version = " + buildVersion)
                    log.info("User agent = " + userAgent)

                    String redirectUrl = "https://anotherdomain.com"

                    if (buildVersion > 12)
                    {
                        if (request.queryString != null)
                        {
                            log.info("Redirecting request to anotherdomain with query string")
                            redirect(url:"${redirectUrl}${request.forwardURI}?${request.queryString}",params:params)
                        }

                        return
                    }
                }
            }
            after = { model ->
                if (model) {
                    model['currentUser'] = userService.currentUser
                }
            }
            afterView = {

            }
        }
    }
} 
```

一个问题是重定向不会发生在我想的那一点上。我希望所有执行都停止并重定向到我此时给出的确切 url。

当我调试到“重定向”行时，它会继续通过该行执行其他行并跳转到另一个控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:02:15.897

为了防止正常的处理流程继续进行，您需要`false`从您的`before`过滤器返回：

```
if (buildVersion > 12)
{
    if (request.queryString != null)
    {
        log.info("Redirecting request to anotherdomain with query string")
        redirect(url:"${redirectUrl}${request.forwardURI}?${request.queryString}",params:params)
        return false
    }
} 
```

[这在用户指南第 6.6.2 节的](http://grails.org/doc/1.3.7/guide/6.%20The%20Web%20Layer.html#6.6.2%20Filter%20Types)最后提到，但不是特别突出：

> 请注意返回 false 如何确保操作本身不被执行。

# javascript - 无法从 iframe 访问浏览器平板电脑（Firefox 除外）中的父 javascript

> ID：13988693
> 
> 赞同：1
> 
> 时间：2012-12-21T10:48:42.387
> 
> 标签：javascript, android, tablet

我在页面上有一个 iframe，我想从此 iframe 访问父页面的功能。在 PC 浏览器中使用这个可以很好地工作：

```
parent.function() 
```

问题出在平板电脑浏览器中，当我尝试访问该函数时，它返回“未定义”并且找不到父级，就像不存在一样。但是这个问题在安卓的 Firefox 浏览器中不会发生，它是唯一在平板电脑上运行良好的浏览器。

PD：两个页面（父页面和 iframe）都在同一个域中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:21:07.137

如果浏览器是 html5，请尝试使用 html5 通信方法：postMessage。postMesseage 允许跨域通信。

```
//parent code
window.addEventListener("message",function(msg){
    msg.data;
    //... do something
}, false);

//iframe code
parent.postMessage("hi daddy"); 
```

使用 JSON.parse(...) 和 JSON.stringify(...) 您可以发送如下对象：

```
{
    command: "methodName",
    arguments:[100, 200, "my string"]
} 
```

父窗口应该解释 iframe 发送的命令。因此，您有一个允许 iframe 使用的小型 API 实现。

[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

# javascript - 重定向后希望在地址栏中保留调用应用程序的 url

> ID：13988695
> 
> 赞同：0
> 
> 时间：2012-12-21T10:48:54.313
> 
> 标签：javascript, jsf, servlets, servlet-filters, spring-webflow

我的项目在 Java（Spring/JSF）中，从我们的项目中我们调用 .Net 应用程序。当我们到达 .Net 应用程序时，我们在那里进行了一些有效的搜索，然后他们只是将响应重定向（sendRedirect）到我的应用程序（ Java 应用程序）。

**我们还需要一些来自应用程序中.Net 应用程序响应的参数。**

**我的应用程序本地网址**：http://localhost:8080/US

**DOT NET 应用程序网址**：http://20.12.223.12/excess/

但问题是当它回到我们的应用程序时，我们的应用程序 url 更改为 .NET 应用程序 url “http://20.12.223.12/excess/”。我们只想保留我们的应用程序 localhost url(requestUrl)。

有什么办法可以保留吗？

请给出你的建议！！！

提前致谢！！！

# tabs - 凯特“制表符”删除或关闭

> ID：13988696
> 
> 赞同：6
> 
> 时间：2012-12-21T10:49:00.803
> 
> 标签：tabs, character, indentation, kate

我正在使用适用于 Linux Mint 14 的 Kate Text Editor。我想知道是否有任何方法可以删除制表符间距？

我的意思是，无论哪里有制表符缩进，都有一个字符`>>`在编辑时看起来不太好，甚至很混乱（请参阅屏幕截图）。有删除它的选项吗？

![截屏](../Images/f9057c07256afae1d2e1569e489274d8.png)

我在配置和设置中找不到与此相关的任何选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T11:53:32.597

我在 Kate 版本 3.6.5 中有一个选项：

转到：`Settings`- `Configure Kate`- `Editor component`-`Appearance` 并禁用`Highlight tabulators`

![在此处输入图像描述](../Images/d2077f5281411e64633f1451d200789c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-29T03:50:02.793

我的 Kate 版本在 Configure Kate - Appearance - General - Highlight tabulators 中有它。

# android - 如何在android中使用graph api添加我自己的签到位置

> ID：13988700
> 
> 赞同：0
> 
> 时间：2012-12-21T10:49:13.477
> 
> 标签：android, facebook-graph-api

如何在执行签到时创建自己的签到位置？

我想将“在办公室”添加为我的签到地点。如何将其添加到 Places api 并获取 Placeid，以便我可以使用此地点 ID 发布签到。

过去两天我一直在寻找这个，但没有找到任何解决方案。

我认为有一个名为 FourSquare 的应用程序可以进行这种类型的假签到。

这样做有什么API吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:00:44.443

使用 user_status 权限，然后获取
包含页面 id、名称和位置的对象所在的位置对象；location 包括特定的纬度和经度以及有关邮政地址的信息（如果有）。

[https://developers.facebook.com/docs/reference/api/checkin/](https://developers.facebook.com/docs/reference/api/checkin/)

请检查这个

如果您想推送地点信息，则无法在此处查看详细信息

[通过 Graph API 发布位置感知帖子](https://stackoverflow.com/questions/7435989/publishing-location-aware-post-via-graph-api)

# vbscript - 我可以为 .vbs 文件设置计时器吗？

> ID：13988705
> 
> 赞同：0
> 
> 时间：2012-12-21T10:49:35.910
> 
> 标签：vbscript

我有 6 个 .vbs 文件。我将它们合并到一个名为 Main.vbs 的文件中。说

```
 Main.vbs

   Option Explicit

   A.vbs
   B.vbs
   C.vbs 
```

那么我可以得到计时器计数，它会显示在 main.vbs 执行中花费的总时间吗？

一个弹出窗口将出现在用户面前，只有“确定”按钮，以 mm:ss 格式显示时间。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:54:51.503

```
StartTime = Timer
        //INSERT YOUR CODE HERE
Elapsed = Timer - StartTime
WScript.Echo Elapsed 
```

# javascript - 随机映射 div

> ID：13988711
> 
> 赞同：12
> 
> 时间：2012-12-21T10:49:55.323
> 
> 标签：javascript, jquery, math

我正在创建一个新的“打地鼠”风格的游戏，孩子们必须根据问题打出正确的数字。到目前为止一切都很好，我有一个计时器，计算正确和错误的答案，当游戏开始时，我有一些称为“字符”的 div，它们在设定的时间随机出现在容器中。

我遇到的问题是，因为它是完全随机的，有时“字符”似乎彼此重叠。有没有办法组织它们，使它们出现在容器中的固定位置，并且在出现时不重叠。

在这里，我有将 div 映射到容器的代码。

```
 function randomFromTo(from, to) {
        return Math.floor(Math.random() * (to - from + 1) + from);
}

function scramble() {
    var children = $('#container').children();
    var randomId = randomFromTo(1, children.length);
    moveRandom('char' + randomId);
}

function moveRandom(id) {
    var cPos = $('#container').offset();
    var cHeight = $('#container').height();
    var cWidth = $('#container').width();
    var pad = parseInt($('#container').css('padding-top').replace('px', ''));
    var bHeight = $('#' + id).height();
    var bWidth = $('#' + id).width();
    maxY = cPos.top + cHeight - bHeight - pad;
    maxX = cPos.left + cWidth - bWidth - pad;
    minY = cPos.top + pad;
    minX = cPos.left + pad;
    newY = randomFromTo(minY, maxY);
    newX = randomFromTo(minX, maxX);
    $('#' + id).css({
        top: newY,
        left: newX
    }).fadeIn(100, function () {
        setTimeout(function () {
            $('#' + id).fadeOut(100);
            window.cont++;
        }, 1000);
    }); 
```

如果有帮助，我有一个小提琴.. [http://jsfiddle.net/pUwKb/8/](http://jsfiddle.net/pUwKb/8/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T11:39:12.500

正如@aug 建议的那样，您应该知道在绘制时不能将东西放在哪里，并且只能将它们放在有效位置。最简单的方法是保持当前占用的位置方便，以便根据建议的位置检查它们。

我建议像

```
// locations of current divs; elements like {x: 10, y: 40}
var boxes = [];

// p point; b box top-left corner; w and h width and height
function inside(p, w, h, b) {
     return (p.x >= b.x) && (p.y >= b.y) && (p.x < b.x + w) && (p.y < b.y + h);
}

// a and b box top-left corners; w and h width and height; m is margin
function overlaps(a, b, w, h, m) {
     var corners = [a, {x:a.x+w, y:a.y}, {x:a.x, y:a.y+h}, {x:a.x+w, y:a.y+h}];
     var bWithMargins = {x:b.x-m, y:b.y-m};
     for (var i=0; i<corners.length; i++) {
         if (inside(corners[i], bWithMargins, w+2*m, h+2*m) return true;
     }
     return false;
}

// when placing a new piece
var box;
while (box === undefined) {
   box = createRandomPosition(); // returns something like {x: 15, y: 92}
   for (var i=0; i<boxes.length; i++) {
      if (overlaps(box, boxes[i], boxwidth, boxheight, margin)) {
         box = undefined;
         break;
      }
   }
}
boxes.push(box); 
```

警告：未经测试的代码，请注意拼写错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:09:03.183

The basic idea you will have to implement is that when a random coordinate is chosen, theoretically you SHOULD know the boundaries of what is not permissible and your program should know not to choose those places (whether you find an algorithm or way of simply disregarding those范围或您的程序不断检查以确保选择的数字不在边界内由您决定。后者更容易实现，但只是因为您完全依赖机会，所以这是一种不好的方法）。

例如，假设选择了坐标 50、70。如果图片大小为50x50，允许的范围不仅不包括图片的尺寸，还包括图片各个方向的50px，这样就不会发生重叠。

希望这可以帮助。如果我有时间，我可能会尝试编写一个示例，但如果这是您遇到的问题，我希望这能回答问题的概念方面。

哦，顺便说一句，忘了说这个节目做得很好。它看起来棒极了:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T11:22:53.707

您至少可以通过两种方式解决这个问题（这两种方式在我脑海中浮现）。

1.  如何根据问题的数量、问题面板的大小和保存每个问题坐标位置的数组创建二维网格分割，然后在每个时间范围内将这些面板随机定位在允许的坐标之一上。

注意：阅读本文了解更多信息：[http ://eloquentjavascript.net/chapter8.html](http://eloquentjavascript.net/chapter8.html)

1.  第二种方法遵循相同的原则，但这次是在将面板放置在画布上之前检查面板是否与现有面板重叠。

```
var _grids;
var GRID_SIZE = 20 //a constant holding the panel size; 
function createGrids() {
    _grids = new Array();
    for (var i = 0; i< stage.stageWidth / GRID_SIZE; i++) {
        _grids[i] = new Array();
        for (var j = 0; j< stage.stageHeight / GRID_SIZE; j++) {
            _grids[i][j] = new Array();
        }
    }
} 
```

然后在一个单独的函数上创建碰撞检查。我已经为 Actionscript 中的碰撞检查创建了一个[要点，但您也可以在 Javascript 中使用相同的原理。](https://gist.github.com/4352216)出于鼓舞人心的目的，我创建了这个要点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T09:02:10.000

只需使用基于电路板宽度的随机数，然后与高度取模...

你会得到一个可以放置痣的单元格。

对于位置，x 和 y 永远不应该改变，因为你有 9 个点，让我们说一下痣会在哪里弹出。

```
x x x
x x x 
x x x 
```

每个单元格的大小将基于 % 而不是像素，并允许调整屏幕大小

1%3 = 1 (x) 3%3 = 0 (y)

那么就不可能有重叠。

一旦鼹鼠被定位，如果需要，它可以根据一些扩展逻辑显示、隐藏或移动等。

如果想保持你的方式，你只需要一个快速的重新定位算法......只需将 NE 设置为 SW 如果 X + width >= x 你想通过设置 x = y+height 检查字符重叠的项目。您还可以通过缓存最后一个 x 并确保随机数不 < last + 项目的宽度来在绘图例程中强制执行该逻辑。

`newY = randomFromTo(minY, maxY); newX = randomFromTo(minX, maxX); if(newX > lastX + characterWidth){ /*needful*/}`

然而，仍然可能有重叠......

如果您想完全消除它，您需要跟踪状态，例如每个 x 所在的位置，然后迭代该列表以找到一个新位置或首先定位它们，然后所有它们随机移动而不相交，这将能够从那一点开始只用填充来控制。

总的来说，我认为让 X 从 0 开始然后递增直到 X + 字符宽度 > 大于板的宽度会更容易。然后只需将 Y 增加字符高度并设置 X = 0 或字符宽度或其他偏移量。

`newX = 0; newX += characterWidth; if(newX + chracterWidth > boardWidth) newX=0; newY+= characterHeight;`

这导致没有重叠，也没有什么可以迭代或跟踪您现在所做的事情，唯一的缺点是显示字符的模式是“棋盘样式”或彼此相邻（之间可能有随机间距水平和垂直放置，例如，如果您愿意，也可以随机调整填充）

首先是整个随机的事情增加了复杂性。

我更新了你的小提琴以证明我消除了随机并停止了重叠:)

[http://jsfiddle.net/pUwKb/51/](http://jsfiddle.net/pUwKb/51/)

# android - ANDROID 线性布局使用权重填充剩余空间

> ID：13988715
> 
> 赞同：1
> 
> 时间：2012-12-21T10:50:07.820
> 
> 标签：android, android-layout

我正在尝试获取我的控件，以便显示一个控件，该控件具有一个按钮和一个占用剩余空间的图像。我一直在研究使用权重，我可以让它在宽度上工作，但是一旦我使用高度上的重量，什么都不会显示，我的代码如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:baselineAligned="true" android:weightSum="100">

        <com.example.test.MyImageView
            android:id="@+id/test_img" 
            android:layout_height="0dp"         
            android:layout_width="wrap_content"
            android:layout_weight="75"
            android:scaleType="fitCenter"       
             />

       <Button
        android:id="@+id/RedrawBtn"
        android:layout_height="0dp"     
        android:layout_width="wrap_content"     
        android:layout_weight="25"
        android:text="Button" /> 
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:52:10.787

你还没有给`orientation`LinearLayout

```
<LinearLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:baselineAligned="true" android:weightSum="100"
    android:orientation="vertical">

    <com.example.test.MyImageView
        android:id="@+id/test_img" 
        android:layout_height="0dp"         
        android:layout_width="wrap_content"
        android:layout_weight="75"
        android:scaleType="fitCenter"       
         />

   <Button
    android:id="@+id/RedrawBtn"
    android:layout_height="0dp"     
    android:layout_width="wrap_content"     
    android:layout_weight="25"
    android:text="Button" /> 
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:53:20.880

试试这个代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:baselineAligned="true"
    android:orientation="vertical">

        <com.example.test.MyImageView
            android:id="@+id/test_img" 
            android:layout_height="0dp"         
            android:layout_width="wrap_content"
            android:layout_weight="1"
            android:scaleType="fitCenter"       
             />

       <Button
        android:id="@+id/RedrawBtn"
        android:layout_height="wrap_content"     
        android:layout_width="wrap_content"     
        android:text="Button" /> 
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:42:17.140

写下面的代码而不是你的代码，它会解决你的问题。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.example.test.MyImageView
        android:id="@+id/test_img" 
        android:layout_height="match_parent"         
        android:layout_width="wrap_content"
        android:layout_weight="75"
        android:scaleType="fitCenter" />

    <Button
        android:id="@+id/RedrawBtn"
        android:layout_height="match_parent"     
        android:layout_width="wrap_content"     
        android:layout_weight="25"
        android:text="Button" /> 

</LinearLayout> 
```

# java - spring bean 的生命周期是什么？

> ID：13988720
> 
> 赞同：11
> 
> 时间：2012-12-21T10:50:24.040
> 
> 标签：java, spring, lifecycle

我对 Spring 的生命周期感到困惑。

```
XmlBeanFactory beanFactory 
= new XmlBeanFactory(new ClassPathResource("SpringHelloWorld.xml")); 
```

上面的代码片段是否创建了对象？

如果上面的答案是真的。

a) 然后，对于作用域为“单例”的 bean，获取在上述代码片段中创建的对象。我是对还是错？

b) 对于范围为“原型”的情况，创建的对象是否未被使用。因为，容器总是返回新对象。

```
XmlBeanFactory beanFactory 
= new XmlBeanFactory(new ClassPathResource("SpringHelloWorld.xml")); 
```

上面的代码片段是否创建了对象？

如果答案是假的，

spring 框架如何验证 bean 定义是否正确。

**`From the answer of Henry`**

`Usually, singleton beans are created when the context starts. This can be changed with the lazy-init or default-lazy-init attributes.`

`Prototype beans are only created when needed.`

`Only syntactically, there might still be errors when the bean is instantiated, for example if a required property is not provided.`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T11:00:01.757

`BeanFactory`不会像`ApplicationContext`这样在启动时预先实例化单例。因此，即使您的 bean 是非惰性和单例的，它也不会被创建。

`prototype`bean 是按需创建的，每次您请求原型 bean 时，您都会得到一个新实例。但是一旦在自动装配过程中使用了这样的 bean，同一个实例将永远被使用。

`ApplicationContext`所有的单例都是急切地创建的，原型 bean 仅在需要时才创建。

# 也可以看看

*   [BeanFactory 与 ApplicationContext](https://stackoverflow.com/questions/243385)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:58:12.360

通常，单例 bean 是在上下文启动时创建的。这可以用`lazy-init`or`default-lazy-init`属性来改变。

原型 bean 仅在需要时创建。

# c - 全局静态变量在局部函数中突然变为 0 - 为什么？

> ID：13988726
> 
> 赞同：0
> 
> 时间：2012-12-21T10:50:43.557
> 
> 标签：c

我有一些通用的标题，我在其中声明它（在`std.h`）：

```
static volatile unsigned int timestamp; 
```

我有中断，我增加它（在`main.c`）：

```
void ISR_Pit(void) {
    unsigned int status;
    /// Read the PIT status register
    status = PIT_GetStatus() & AT91C_PITC_PITS;
    if (status != 0) {
        /// 1 = The Periodic Interval timer has reached PIV since the last read of PIT_PIVR.
        /// Read the PIVR to acknowledge interrupt and get number of ticks
        ///Returns the number of occurrences of periodic intervals since the last read of PIT_PIVR.
        timestamp += (PIT_GetPIVR() >> 20);
        //printf(" --> TIMERING :: %u \n\r", timestamp);
        }
    } 
```

在另一个模块中，我有必须使用它的程序（在`meta.c`）：

```
void Wait(unsigned long delay) {
    volatile unsigned int start = timestamp;
    unsigned int elapsed;
    do {
        elapsed = timestamp;
        elapsed -= start;
        //printf(" --> TIMERING :: %u \n\r", timestamp);
        }
    while (elapsed < delay);
    } 
```

首先`printf`显示正确增加`timestamp`，但等待`printf`总是显示`0`。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:57:58.483

您将变量声明为`static`，这意味着它在包含它的文件中是本地的。`timestamp`in与 in`main.c`不同`meta.c`。

你可以通过这样声明来解决这个`timestamp`问题`main.c`：

```
volatile unsigned int timestamp = 0; 
```

`meta.c`就像这样：

```
extern volatile unsigned int timestamp; 
```

# actionscript-3 - 尝试启动补间返回空对象引用

> ID：13988729
> 
> 赞同：1
> 
> 时间：2012-12-21T10:50:46.837
> 
> 标签：actionscript-3

首先，因为这是我的第一篇文章，向这个社区的每个人致敬。我已经找到了大量的信息来帮助我解决迄今为止遇到的问题。现在我遇到了一个我无法解决的问题。我正在制作一个“Pang”类型的游戏，可能你们中的一些人已经看过或玩过某种变体。所以说重点。我目前正在尝试制作一个与课程相关联的对象，在舞台上弹跳。我决定尝试使用 easeIn 和 easeOut 补间。

我在主文档类中声明补间：

```
public static var upTween:Tween;
    public static var downTween:Tween; 
```

并使用 for 循环将它们的值分配给数组的所有对象部分：

```
public function bounce(event:Event):void
    {
        for (var i:uint = 0; i < bubbles1.length; i++)
        {
            upTween = new Tween(bubbles1[i], "y", Strong.easeOut, bubbles1[i].y, 250, 2, true);
            downTween = new Tween(bubbles1[i], "y", Strong.easeIn, bubbles1[i].y, stage.stageHeight - 50 - bubbles1[i].height, 2, true);
        }
    } 
```

现在，当我尝试从 Bubble.as 类内部启动补间时，我得到一个空对象引用。

也许更多信息会有所帮助。我在主类中的公共函数中实例化对象，如下所示：

```
public function makeBubble(size:Number, xCoordinate:Number, yCoordinate:Number, xDir:Number):void
        {
            if (size == 1)
            {
            bubble = new Bubble(stage);
            bubble.x = xCoordinate;
            bubble.y = yCoordinate;
            bubble.xDirection = xDir;
            bubbles1.push(bubble);
            stage.addChild(bubble);

            } 
```

这是完整的 Bubble.as 类：

```
package com.zdravko.pong
{
import flash.display.MovieClip;
import flash.display.Stage;
import flash.events.Event;

public class Bubble extends MovieClip
{
    private var stageRef:Stage;

    var xDirection:Number;
    var yDirection:Number;

    var bubble2:Bubble2;

    public function Bubble(stageRef:Stage) 
    {
        // constructor code
        this.stageRef = stageRef;

        addEventListener(Event.ENTER_FRAME, loop, false, 0, true);

    }

    function loop(event:Event):void
    {
        if(this.x >= stage.stageWidth - this.width)
        {
            this.x = stage.stageWidth - this.width - 5;
            xDirection *= -1;
        }
        if(this.x <= 0)
        {
            this.x = 5;
            xDirection *= -1;
        }
        if(this.y >= stage.stageHeight - 50 - this.height)
        {               
            this.y = stage.stageHeight - 50 - this.height;
            Engine.upTween.start();
        }
        if(this.y <= 250)
        {
            this.y = 250;
            Engine.downTween.start();

        }

        this.x += xDirection;

        if(hitTestObject(Engine.player) && Player.invul == false)
           {
               decreaseEnergy(.4);
               Player.invul = true;
               Player.invulTimer.start();
           }
    }

    public function decreaseEnergy(dmg:Number):void
    {
        Engine.energy.scaleX -= dmg;
    }

    public function takeHit() : void
    {

        makeBubble(2, this.x + 50, this.y + 30, 8, 8);
        makeBubble(2, this.x - 20, this.y - 30, -8, 8);
        removeSelf();
        Engine.playerScore += 500;
        Engine.score.scoreBox.text = Engine.playerScore;
    }

    private function removeSelf() : void
    {
        removeEventListener(Event.ENTER_FRAME, loop);

        if (stageRef.contains(this))
        {
            stageRef.removeChild(this);
        }
    }

    private function makeBubble(size:Number, xCoordinate:Number, yCoordinate:Number, xDir:Number, yDir:Number):void
    {

        bubble2 = new Bubble2(stage);
        bubble2.x = xCoordinate;
        bubble2.y = yCoordinate;
        bubble2.xDirection = xDir;
        bubble2.yDirection = yDir;
        Engine.bubbles2.push(bubble2);
        stageRef.addChild(bubble2);

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:54:29.767

大概气泡数组返回一个空值。您是否尝试过从 bubbles1 数组中找出值。

```
public function bounce(event:Event):void
{
    for (var i:uint = 0; i < bubbles1.length; i++)
    {
       // log out the value from your array
       trace("bubble " + bubbles1[i]);
    }
} 
```

# mysql - REGEXP 匹配另一个组列表中的组字符串，而不管顺序如何 - SQL

> ID：13988732
> 
> 赞同：5
> 
> 时间：2012-12-21T10:50:49.997
> 
> 标签：mysql, sql, regex, group-concat

这是场景。无论两侧的字符串顺序如何，如何利用`REGEXP`模拟`IN`运算符来**匹配**左侧和右侧的所有值。也`ANSI SQL`可以使用左连接和子查询来实现解决方案。

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/8b12f/29)

样品表：

`Parent table, Child table, Parent_Child`. 为了不在这个问题上占用更多空间，我只在这里发布一个`Group_Concat Child query by Parent`.

```
PID     NAME        CHILDREN    
1       dad john    dave,jill,lina
2       mum sandy   maryam,jack 
3       dad frank   henry,jill 
4       mum kate    maryam  
5       mum jean    dave 
```

**预期结果：**选择让所有孩子都参与某事的家长。

```
PID     NAME        CHILDRENREXGEX
3       dad frank   jill,henry
4       mum kate    maryam
5       mum jean    dave 
```

这是 REGEXP SQL 解决方案：现在这里的问题是，如果左侧顺序/顺序与右侧不匹配，它不会返回正确的结果。

询问：

```
select 
    x.pid, x.name, x.children as childrenRexgex
from
    (select 
         p.pid, p.name, group_concat(c.name) as children
     from 
         parent as p
     inner join 
         parent_child as pc on p.pid = pc.pid
     join 
         child as c on pc.cid = c.cid
     group by 
         p.pid
     order by 
         c.name) as x
where 
    'dave,maryam,jill,henry' REGEXP x.children
; 
```

因此，对于这个问题，我会欣赏两个方面：

1.  无论顺序如何，将左侧的所有名称与右侧的用户定义列表匹配的最佳模式是什么？
2.  使用 可以获得什么性能`REGEXP`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:26:35.177

你想使用正则表达式，还是其他解决方案都可以？如果我理解正确，这个查询应该会给你正确的结果：

```
select p.pid, parent.name, group_concat(child.name)
from
  (select pid
   from 
     parent_child inner join child
     on parent_child.cid = child.cid
   group by pid
   having sum(child.name in ('dave','henry','maryam','jill'))=count(*)) p
  inner join parent on p.pid=parent.pid
  inner join parent_child on p.pid=parent_child.pid
  inner join child on parent_child.cid=child.cid
group by p.pid 
```

这给出了：

```
PID     NAME        CHILDRENREXGEX
3       dad frank   jill,henry
4       mum kate    maryam
5       mum jean    dave 
```

无论如何，要使用您的解决方案，我建议您使用`group_concat`订单：

```
select
  x.pid,
  x.name,
  x.children as childrenRexgex
from(
  select
    p.pid,
    p.name, 
    group_concat(c.name order by c.name) as children,
    count(c.name) as counts
  from
    parent as p inner join parent_child as pc
    on p.pid = pc.pid
    join child as c
    on pc.cid = c.cid
  group by p.pid) as x
where 'dave,henry,jill,maryam'
  REGEXP x.children 
```

并尝试匹配已订购的名称。这与您的查询相同，我只添加了一个`order by c.name`内部 group_concat，并且我还在 where 条件下对字符串进行了排序。

**编辑：**如果你真的想使用 REGEXP，因为 MySql 对正则表达式的支持是有限的，我建议你尝试使用[LIB_MYSQLUDF_PREG](http://www.mysqludf.org/lib_mysqludf_preg/)。这是一个不适用于标准 MySql 正则表达式的通用解决方案。

如果您需要匹配这样的字符串：

```
One,Two,Three,Four 
```

例如，这个：

```
Two,Four,Three,One 
```

你必须使用像这样的正则表达式：

```
"One,Two,Three,Four" REGEXP
"^(?=.*\bTwo\b)(?=.*\bFour\b)(?=.*\bThree\b)(?=.*\bOne\b)" 
```

（[检查这个问题](https://stackoverflow.com/questions/210518/regex-multi-word-search)）这就是它的作用：

1.  `\bTwo\b`匹配全词二，可以是：`Two` `Two,` `,Two` `,Two,`
2.  `.*`可以在字符串中的任何位置找到单词二`.*\bTwo\b`
3.  `(?=.*\bTwo\b)`匹配全词二，字符串中的任何位置，但忘记位置并从头开始匹配下一个词
4.  开始匹配其他单词

还是错过了什么？是的，因为如果我们匹配`"One,Two,Three,Four"`,`"One,Two,Three,Four,Five"`也会匹配。也许对此有更好的正则表达式，但我的想法是：如果它们匹配并且具有相同的长度，则它们必须相同，除了顺序。所以我们可以在正则表达式的末尾添加：

5.  `.{length}$`请记住，在所有之前的匹配之后，我们仍然在开头，并且`^.{length}$`匹配给定长度的字符串

所以最终的代码是：

```
field1="One,Two,Three,Four"
field2="Two,Four,Three,One"

field1 REGEXP CONCAT("^(?=.*\b", 
                     REPLACE(field2, ",", "\b)(?=.*\b"),
                     "\b).{", LENGTH(field1), "}$") 
```

请注意，**REGEXP 不支持这个正则表达式**，它应该在 LIB_MYSQLUDF_PREG 上支持，但我还没有测试它。我会让你知道。可能还有其他解决方案，但我认为仅使用 REGEXP 不可能做得更好。

# haskell - Haskell - 定义文件名所需的小数 Int 实例？

> ID：13988733
> 
> 赞同：1
> 
> 时间：2012-12-21T10:50:51.310
> 
> 标签：haskell

我是 Haskell 的业余爱好者，试图遍历“x”平方根的无限近似值列表，其中“acc”代表此步骤所在的世代。但是，当我运行下面的代码时，我得到了潜在的错误。

```
as' x acc = ( last(take (acc-1) (as' x (acc-1)))
+ (acc / last(take (acc-1) (as' x (acc-1)))) ) / 2 : as' x (acc+1) 
```

`ERROR "a5.hs":34 - Instance of Fractional Int required for definition of as'`

此外，当我尝试应用此类型代码时，出现错误：

```
as' :: Float -> Float -> Float 
```

`Type error in application
*** Expression : (last (take (acc - 1) (as' x (acc - 1))) + acc / last (take (acc - 1) (as' x (acc - 1)))) / 2 : as' x (acc + 1)
*** Term : as' x (acc + 1)
*** Type : Float
*** Does not match : [a]`

编辑：为了让您更清楚，我想在列表的上下文中使用此功能。例如 x = [1, as' x 2]。这个想法是这将积累一个无限的列表，因为 as' 将递归地调用自己。因此，为什么我觉得我可以在这里的列表上进行操作。

谁能给我一些澄清？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T11:17:13.127

的类型签名`take`是

```
take :: Int -> [a] -> [a] 
```

这是您的使用方式`take`：

```
take (acc-1) (as' x (acc-1)) 
```

所以我们可以得出结论

```
(acc-1)         :: Int    -- first parameter to `take`
acc             :: Int    -- therefore

(as' x (acc-1)) :: [a]    -- second parameter to `take`, we don't know what `a` is 
```

但是你的代码说

```
as' :: Float -> Float -> Float
as' x acc = ... 
```

我们从中推断

```
x               :: Float  -- first parameter to `as'`
acc             :: Float  -- second parameter to `as'`
(as' x (acc-1)) :: Float  -- result of `as'` 
```

这导致了几个矛盾：

*   `acc`不能同时是 a和`Int`a`Float`
*   `(as' x (acc-1))`不能同时是 an`[a]`和 a `Float`---这是第二条错误消息试图告诉你的

最终，您正在尝试使用`take`不是列表的东西。我不确定您要做什么。

* * *

你可能想要签名

```
as' :: Float -> Int -> [Float] 
```

那应该（我没有测试过）修复了上面的类型错误，但仍然留下了一个更基本的问题：每当你计算列表的第*n*个元素时，你都会重新计算列表的 *n-1* 个元素*两次*（等等，回到列表的开头：重新计算的指数增长），即使这个元素可能已经被计算过了。没有*共享*正在进行。

例如考虑

```
as' x acc = ( prev + (acc / prev) ) / 2 : as' x (acc+1)
  where prev = last(take (acc-1) (as' x (acc-1))) 
```

这仍然是低效的：您仍然重新计算列表的先前元素。但是现在您只在计算下一个元素时重新计算所有先前的元素一次。

（如果我不指出`last(take (acc-1) (as' x (acc-1)))`可以简化为. 也是我的疏忽`(as' x (acc-1)) !! (acc-2)`。）

* * *

生成每个元素仅依赖于前一个元素的无限列表的常用方法是使用[`iterate`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:iterate).

复杂之处在于每个元素都依赖于累加器以及依赖于前一个元素。我们将通过将累加器合并到列表的每个元素中来解决这个问题。完成后，我们将丢弃累加器以生成最终的无限列表。

```
approxRoots :: Float -> [Float]
approxRoots x = map fst $ iterate next (x, 1)
      -- I don't know what your initial approximation should be
      -- I've put `x` but that's probably wrong
  where next (prev, acc) = (prev + acc / prev, acc + 1)
        -- First element of each pair is the approximation,
        -- second element of each pair is the "accumulator" (actually an index)
        -- I've probably transcribed your formula wrongly 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T12:02:45.370

[dave4420 的回答](https://stackoverflow.com/a/13989138/91757)已经很好了，我只是想分享一下如何从编译器给你的错误消息中获得最大的收益。又是这样：

```
*** Expression : (last (take (acc - 1) (as' x (acc - 1))) + acc / last (take (acc - 1) (as' x (acc - 1)))) / 2 : as' x (acc + 1)
*** Term : as' x (acc + 1)
*** Type : Float
*** Does not match : [a] 
```

这意味着`as' x (acc + 1)`长表达式中的部分应该产生一个列表，但它实际上给出了一个`Float`值。

*   为什么编译器希望它是一个列表？好吧，让我们看看该术语在表达式中的使用位置：

    ```
    (last .... ) / 2 : as' x (acc + 1) 
    ```

    即，它被用作函数的第二个参数`(:)`，并且编译器知道该函数的第二个参数必须是一个列表（编译器知道 is 的签名 `(:)`虽然`a -> [a] -> [a]`它没有在错误消息中提及该部分） .

*   为什么它实际上是一个`Float`？由于您没有提供函数签名，因此编译器会为您推导出它并实际打印它：

    ```
    as' :: Float -> Float -> Float 
    ```

    因此，编译器确定`as'`接受两个`Float`值并产生一个`Float`值。我不知道为什么会这样。

我的建议是通过自己明确写下函数签名来开始调试此问题。这样做会导致不同的错误消息，这更接近于您的期望与实际代码不匹配的原因。

# c++ - shared_ptrs 的 unordered_map 破坏了 C++ 程序

> ID：13988735
> 
> 赞同：0
> 
> 时间：2012-12-21T10:50:58.080
> 
> 标签：c++, debugging, boost, c++11

我`unordered_map`在我当前的 C++ 项目中使用了一个并且有以下问题：

当我将一对对象插入 中`unordered_map`时，程序中断，Windows 向我显示它是“[...].exe 已停止工作”，而没有在控制台 (cmd) 上给我任何信息。一些示例代码：

```
#include <unordered_map>

#include <network/server/NetPlayer.h>
#include <gamemodel/Player.h>

int main(int argc, char **argv) {
    NetGame game;
    boost::asio::io_service io_service;

    NetPlayerPtr net(new NetPlayer(io_service, game));
    PlayerPtr player(new Player);

    std::unordered_map<PlayerPtr, NetPlayerPtr> player_map;

    // Here it breaks:
    player_map[player] = net;

    return 0;
} 
```

# 我已经尝试过的：

我尝试用 try-catch 换行，但没有成功。

# 有关代码的详细信息：

NetPlayerPtr 和 PlayerPtr 是`boost::shared_ptr`对象，前者包含一些`boost::asio`对象，如`io_service`和`socket`，后者包含几个自定义对象。

我正在使用在 64 位 Windows 上启用 C++11 的 MinGW gcc 进行编译。

如果需要更多详细信息，请询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:25:07.963

好的，让我们看看您链接到的代码：

```
namespace std
{
    template<>
    class hash<Player>
    {
    public:
        size_t operator()(const Player &p) const
        {
            // Hash using boost::uuids::uuid of Player
            boost::hash<boost::uuids::uuid> hasher;
            return hasher(p.id);
        }
    };

    template<>
    class hash<PlayerPtr>
    {
    public:
        size_t operator()(const PlayerPtr &p) const
        {
            return hash<PlayerPtr>()(p);   // infinite recursion
        }
    };
} 
```

您的`hash<PlayerPtr>::operator()`. 你可能想要的是：

```
return hash<Player>()(*p); 
```

或者：

```
return hash<Player*>()(p->get()); 
```

取决于您是想通过其内部 id 还是其地址来识别播放器。

# c# - 用于在 Html中删除多个标签的正则表达式

> ID：13988736
> 
> 赞同：0
> 
> 时间：2012-12-21T10:50:59.187
> 
> 标签：c#, .net, regex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T11:18:31.993

使用这个正则表达式：

`(<div.*?<a.*?</a>)(?:.*?</a>)*.*?(</div>)`

它将返回 2 个组。第一组将包含从第一行的开头`<div`到`</a>`结尾。第二组将包含结束`</div>`。只需将这两个组连接起来，您就拥有了所需的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:30:58.970

尝试 ：

```
var str = "" ;// Your String goes Here.
var firstPos = str.indexOf("<a");
var lastPos = str.lastIndexOf("</a>");
var regex = new RegExp("\<a.*a\>");
var firstTag = str.match(regex);
var str1 = str.slice(0,firstPos);
var str2 = str.slice(lastPos);
str = str.replace(regex, "");
str = str1 + (firstTag.toString().split(",")[0]).toString() + str2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T10:59:55.217

如果你真的想这样做，如你所见，在 div 中，每个 a 元素用逗号分隔，所以你可以尝试：

```
string result = Regex.Replace(your_html, ",.+</a>", "", RegexOptions.Singleline) 
```

或者：

```
string result = Regex.Replace(html, "(!?,)<a .+a>(?=</div>)", "", RegexOptions.Singleline) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:55:26.537

您不需要使用正则表达式。这是一种非常粗略的方法，但它应该可以工作。

```
string html = "... html goes here";
string cleanedUpHtml = html.Substring(0, html.IndexOf("</a>") + 4) + "</div>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T11:02:43.347

```
string html = ...
string rem = Regex.Match(html, "<a .+?</a>(.+?)</div>", RegexOptions.Singleline).Result("$1");
html = html.Replace(rem, String.Empty); 
```

# android - 如何在android上添加叠加层到地图？

> ID：13988744
> 
> 赞同：1
> 
> 时间：2012-12-21T10:51:33.797
> 
> 标签：android, google-maps, overlay

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:16:50.797

```
 AddItemized Overlay class:

        public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

            private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

            private Context context;

            public AddItemizedOverlay(Drawable defaultMarker) {
                 super(boundCenterBottom(defaultMarker));
            }

            public AddItemizedOverlay(Drawable defaultMarker, Context context) {
                 this(defaultMarker);
                 this.context = context;
            }

            @Override
            protected OverlayItem createItem(int i) {
               return mapOverlays.get(i);
            }

            @Override
            public int size() {
               return mapOverlays.size();
            }

            @Override
            protected boolean onTap(int index) {
               Log.e("Tap", "Tap Performed");
               return true;
            }

            public void addOverlay(OverlayItem overlay) {
               mapOverlays.add(overlay);
                this.populate();
            }

         }

    Use this code in your Activity

      List<Overlay> mapOverlays = mv.getOverlays();
            Drawable drawable = this.getResources().getDrawable(R.drawable.drawable);
            AddItemizedOverlay itemizedOverlay =
            new AddItemizedOverlay(drawable, this);
            OverlayItem overlayitem = new OverlayItem(gp, "Hello", "I am here");
            itemizedOverlay.addOverlay(overlayitem);
            mapOverlays.add(itemizedOverlay);

 public void createMapViewForHaritaFragment(IlanList list)
{
    IlanList gelenListe;
    gelenListe=list;

    if(gelenListe!=null)
    {
        MainActivity parent = getParentActivity();
        mMapViewContainer = parent.getmMapViewContainer();
        mMapView = parent.getmMapView();

        /**/
            mc = mMapView.getController();

            LocationManager lm = (LocationManager) parent.getSystemService(parent.getApplicationContext().LOCATION_SERVICE); 
            Location location = lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            String longitude = String.valueOf(location.getLongitude()).substring(0, 9);
            String latitude = String.valueOf(location.getLatitude()).substring(0, 9);

            String coordinates[] = {latitude,longitude};
            double lat = Double.parseDouble(coordinates[0]);
            double lng = Double.parseDouble(coordinates[1]);

            p = new GeoPoint(
                (int) (lat * 1E6), 
                (int) (lng * 1E6));

        mc = mMapView.getController();
        mc.setCenter(p);
        mc.setZoom(16);

        List<Overlay> mapOverlays = mv.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.pin);
        AddItemizedOverlay itemizedOverlay = new AddItemizedOverlay(drawable,
                this);
        OverlayItem overlayitem = new OverlayItem(p, "Hello", "I AM HERE");
        itemizedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedOverlay);

           /* mc.animateTo(p);
            mMapView.setBuiltInZoomControls(true);      

           mMapView.setSatellite(false);               
           mc.setZoom(16);   */      

            /*Harita
            public View mMapViewContainer;
            public MapView mMapView;
            public MapController mc;
            public GeoPoint p;

            public List<Overlay> mapOverlays;
            public Drawable drawable;
            public MapItemizedOverlay itemizedOverlay;  
            Harita*/

          /*  drawable = this.getResources().getDrawable(R.drawable.map_kirmizi_png);
            itemizedOverlay = new MapItemizedOverlay(drawable, parent.getApplicationContext(), 30);//text size: 30

            GeoPoint gPointMe = new GeoPoint(41099932,29002657);
            OverlayItem overlayItem = new OverlayItem(gPointMe, "Me", "This is my location");
            itemizedOverlay.addOverlay(overlayItem);    

            mapOverlays.add(itemizedOverlay);

            mMapView.setBuiltInZoomControls(true);

            //move map over to my position
            mc.animateTo(gPointMe);  

        mMapView.invalidate(); */
    }

} 
```

# c# - 如何将大量图像添加到列表框

> ID：13988746
> 
> 赞同：0
> 
> 时间：2012-12-21T10:51:44.417
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我正在为 windows phone 7 制作这个应用程序，我所做的是从相机胶卷、保存的图片和其他文件夹中检索所有图像，并将它们显示在包装面板内的列表框中，以便它们并排显示....缩略图的图像实际上是显示的……但是随着图像数量的增加，用户界面变得非常慢并且滚动需要时间……

我阅读了很多帖子和其他问题，我认为数据虚拟化或延迟加载是我需要的，但我不明白如何使用它，我看到了 shawn oster 和 peter torr 的帖子.....

我使用 backgroundworker 加载图像......这是如何......

```
 void backroungWorker1_DoWork(object sender, DoWorkEventArgs e)
    {

        Dispatcher.BeginInvoke(() =>
        {
            foreach (string fileName in fileStorage.GetFileNames("images//*.*"))
            {
                if (fileName == null)
                    break;
                string filepath = System.IO.Path.Combine("images", fileName);
                try
                {
                    using (IsolatedStorageFileStream imageStream = fileStorage.OpenFile(filepath, FileMode.Open))
                    {
                        var imageSource = PictureDecoder.DecodeJpeg(imageStream);
                        BitmapImage bitmapImage = new BitmapImage();
                        bitmapImage.SetSource(imageStream);
                        var item = new ImageToName { bmp = bitmapImage, FileName = fileName };
                        vltBitmapImage.Add(item);
                        imageStream.Dispose();
                        imageStream.Close();
                    }
                }
                catch
                {
                    Exception x = new Exception();
                }
            }
            if (vltBitmapImage.Count() != 0)
            {
                lone.Visibility = Visibility.Collapsed;
                this.vaultbox.ItemsSource = vltBitmapImage;
            }
            else
                lone.Visibility = Visibility.Visible;
        });
    } 
```

任何帮助都非常感谢......对不起作为一个菜鸟......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:25:07.487

If you want to add a Lazy load to a listbox you must setup a listner for your list box and change the way you load data into your data model, so first lest set up at the XAML code for a listbox:

In your page resource add this style, and note the loaded event its include ("ScrollViewer_Loaded"):

```
...
  <phone:PhoneApplicationPage.Resources>
    <Style x:Key="BusinessListBoxStyle"
           TargetType="ListBox">
        <Setter Property="Background"
                Value="Transparent" />
        <Setter Property="Foreground"
                Value="{StaticResource PhoneForegroundBrush}" />
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
                Value="Disabled" />
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility"
                Value="Auto" />
        <Setter Property="BorderThickness"
                Value="0" />
        <Setter Property="BorderBrush"
                Value="Transparent" />
        <Setter Property="Padding"
                Value="0" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBox">
                    <ScrollViewer x:Name="scrollViewer"
                                  BorderBrush="{TemplateBinding BorderBrush}"
                                  BorderThickness="{TemplateBinding BorderThickness}"
                                  Background="{TemplateBinding Background}"
                                  Foreground="{TemplateBinding Foreground}"
                                  Padding="{TemplateBinding Padding}"
                                  Loaded="ScrollViewer_Loaded">
                        <ItemsPresenter />
                    </ScrollViewer>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</phone:PhoneApplicationPage.Resources> 
```

...

The add a reference to your style for the listbox, and bind your itemsSource to a list of items from your viewModel.

```
...
        <ListBox x:Name="myList"
                 ItemsSource="{Binding myDataSource}"
                 Style="{StaticResource BusinessListBoxStyle}"> 
```

...

Next you have to set some code that loads data into the datamodel, when you reach the end of the list element in the list (the datamodel start loading more data into the mode, adds more items) Lazyloading!!

The way i normaly do this is by listing to the vertical offset of the listbox's scrollbar, and if its is about 1/4 from the edge i starts loading more items into the datamodel. In the ScrollViewer loaded handler i set up at VertialOffset listener, by using the DependencyProperty, see code below:

```
 public static readonly DependencyProperty ListVerticalOffsetProperty =
        DependencyProperty.Register(
                                    "ListVerticalOffset",
                                    typeof(double),
                                    typeof(MyPage),
                                    new PropertyMetadata(new PropertyChangedCallback(OnListVerticalOffsetChanged))
                                    );

    private ScrollViewer _listScrollViewer;

    private void ScrollViewer_Loaded(object sender, RoutedEventArgs e)
    {
        _listScrollViewer = sender as ScrollViewer;

        Binding binding = new Binding();
        binding.Source = _listScrollViewer;
        binding.Path = new PropertyPath("VerticalOffset");
        binding.Mode = BindingMode.OneWay;
        this.SetBinding(ListVerticalOffsetProperty, binding);
    }

    public double ListVerticalOffset
    {
        get { return (double)this.GetValue(ListVerticalOffsetProperty); }
        set { this.SetValue(ListVerticalOffsetProperty, value); }
    }

    private double _lastFetch;

    private static void OnListVerticalOffsetChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        MyPage page = obj as MyPage;
        ScrollViewer viewer = page._listScrollViewer;

        if (viewer != null)
        {
            if (page._lastFetch < viewer.ScrollableHeight)
            {
                // Trigger within 1/4 the viewport.
                if (viewer.VerticalOffset >= (viewer.ScrollableHeight - (viewer.ViewportHeight / 4)))
                {
                    page._lastFetch = viewer.ScrollableHeight;
                    MyViewModel _tmpviewmodel = page.DataContext as MyViewModel;

                    if ((_tmpviewmodel != null) && (_tmpviewmodel.HasMoreItems))
                        _tmpviewmodel.GetMoreItems();
                }
            }
        }
    } 
```

Note here i make use of a MyViewModel, that holds all the items the listbox i binded to, and has methods for load items from a database, the isolatedstore, the web or what ever your needs are.

You just have to find your way of only load a part of your data into the viewmodel. I your case i will first load a list of all the files you need to load (that is just to retreive the list from GetFileNames in the IsoLatedStore). Then mayby only loads 20 pics at the time!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:35:09.990

从代码项目中尝试这个示例，它解释了它是如何工作的，并附带了一个完整的示例项目

请参阅：[当用户滚动到列表末尾时加载数据](http://www.codeproject.com/Articles/228873/Loading-Data-when-the-User-Scrolls-to-the-End-of-a)

# fix-protocol - FIX Engine 支持不同版本

> ID：13988749
> 
> 赞同：1
> 
> 时间：2012-12-21T10:51:55.157
> 
> 标签：fix-protocol

我们已经开发了一个 FIX 引擎来支持 4.2 版本。但是我们有一个新的流动性提供者驻留在 FIX 4.4 版本上。关于如何将 FIX 4.2 消息转换为 4.4 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-03T15:00:15.390

Using quickfix you can extract and fill FIX messages using the most abstract type: quickfix.Message. Both quickfix.fix42.NewOrderSingle and quickfix.fix44.NewOrderSingle have the same supertype.

```
private void processNewOrder(quickfix.Message message) {
    String symbol = message.getString(Symbol.FIELD);
    char side = message.getChar(Side.FIELD);
    ...
} 
```

You can extract and fill the common fields for FIX.4.2 and FIX.4.4\. For FIX version specific fields, you can check the BEGIN_STRING field and identify the FIX protocol version.

# c# - 如何在 Windows 应用程序中处理 Ctrl + Break 或 Ctrl + Pause

> ID：13988751
> 
> 赞同：1
> 
> 时间：2012-12-21T10:52:06.527
> 
> 标签：c#, winforms, event-handling

我的要求是当用户在我的 Windows 应用程序中按下 Ctrl+Pause 时，我想向用户显示一些消息。如何使用 Keydown 事件在 Windows 窗体中捕获 Ctrl+Pause。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:02:16.440

事件处理程序看起来像这样：

```
void myForm_KeyDown(object sender, KeyEventArgs e)
{
    if(e.KeyCode == Keys.Pause && ModifierKeys == Keys.Control)
    {
      //Code for showing message goes here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:53:03.130

Ctrl+Pause 生成特殊KeyCode：取消

```
void myForm_KeyDown(object sender, KeyEventArgs e)
{
  if(e.KeyCode == Keys.Cancel) //Control + Pause
  {
    //Code for showing message goes here
  }
} 
```

# android - 如何从 ListView 中获取字符串？

> ID：13988761
> 
> 赞同：1
> 
> 时间：2012-12-21T10:52:36.013
> 
> 标签：android, android-listview

如何获取所选项目数据`onItemLongClick`？

```
 listView.setOnItemLongClickListener(new OnItemLongClickListener() {

                @Override
                public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    //              
                    return false;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T10:54:57.320

```
final ListView lv = (ListView) findViewById(R.id.ListView01);

lv.setOnItemClickListener(new OnItemClickListener() {
  public void onItemClick(AdapterView<?> myAdapter, View myView, int pos, long mylng) {
    String selectedFromList =(lv.getItemAtPosition(pos).toString());
    // this is your selected item
  }                 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:55:48.520

```
 listView.setOnItemLongClickListener(new OnItemLongClickListener() 
 {
    @Override
    public boolean onItemLongClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
    {
         String item = ArryList.get(arg2); 
         Toast.makeText(getBaseContext(), item,
         Toast.LENGTH_LONG).show();          
         return false;
     }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:50:47.147

如果您解析来自 xml、json、数据库等的数据集，最好创建自定义模型，即您的模型：

```
public class YourModel
{
    private int id = -1;
    private String title = "";

    public int getId()
    {
        return id;
    }

    public void setId(int id)
    {
        this.id = id;
    }

    public String getTitle()
    {
        return title;
    }

    public void setTitle(String title)
    {
        this.title = title;
    }
} 
```

活动中：

```
private YourModel yourModel;

@Override
public void onCreate(Bundle savedInstanceState)
{
    lstView.setOnItemClickListener(new OnItemClickListener()
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position,
                    long id)
        {
            detailsModel = ((YourAdapter) lstView.getAdapter()).getItem(position);
            Toast.makeText(getApplicationContext, yourModel.getTitle(),
                Toast.LENGTH_LONG).show();
        }
    }
} 
```

# objective-c - 从 2 个 NSURLRequests 中的 1 个中提取 TableView

> ID：13988765
> 
> 赞同：0
> 
> 时间：2012-12-21T10:52:43.193
> 
> 标签：objective-c, ios, uitableview, nsurlrequest, nsjsonserialization

我无法告诉我的表视图应该定位哪个 NSURLRequest。我可以通过单个查询加载基本表视图，但如果某些分段控件处于活动状态，我试图让它从不同的 URL 中提取 json 字符串。

这前三行代码自己工作

```
NSString *urlA1 = [NSString stringWithFormat:@"http://www.website.com/json_books.php?
item_id=%@",itemId];

NSURL *urlA2 = [NSURL URLWithString:urlA1];

NSURLRequest *requestA = [NSURLRequest requestWithURL:urlA2];
[[NSURLConnection alloc] initWithRequest:requestA delegate:self]; 
```

但是，如果我在前三行之后包含以下三行，tableview 会从第一个 NSURLRequest 加载 json，然后立即闪烁并显示以下字符串中的内容：

```
NSString *urlB1 = [NSString stringWithFormat:@"http://www.website.com/json_movies.php?
item_id=%@",itemId];

NSURL *urlB2 = [NSURL URLWithString:urlB1];

NSURLRequest *requestB = [NSURLRequest requestWithURL:urlB2];
[[NSURLConnection alloc] initWithRequest:requestB delegate:self]; 
```

我使用这些代码行将结果拉到表格视图中：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse 
*)response
{
    data = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    [data appendData:theData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    items = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
    [mainTableView reloadData];
} 
```

有谁知道为什么我无法指定我希望 tableview 定位哪个 NSURLRequest ？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:10:28.720

你想显示来自两个 URL 的数据吗？

如果是，那么您必须在触发请求之前获取`NSMUtableArray`并初始化数组。`ViewDidload`并且您必须从每个 URL 将对象添加到数组中。

例子：

```
[DataArray addObject:@"Yourdata"];

[Yourtable reloadData]; 
```

如果您需要根据分段控制分隔数据，则将数据保存在单独的数组中。

```
MyfirstArray= @"Data from URL 1";

MySecondArray= @"Data from URL 2";

-(IBAction)SegmentChange:(Id)sender
{
if(segmented.selectedSegmentIndex==0)

{
items=MyfirstArray;

[mytable reloadData];

}

else

{
items=MysecondtArray;

[mytable reloadData];
}

} 
```

您也可以使用 Switch 语句。

# mysql - MySQL LINQ to SQL 提供程序 Visual Studio 2012

> ID：13988766
> 
> 赞同：2
> 
> 时间：2012-12-21T10:52:49.583
> 
> 标签：mysql, linq, visual-studio

我想使用 Visual Studio 2012 LINQ to SQL 类功能。我安装了 MySQL 连接器/网络版本 6.6.4。在 VS 中，我能够添加到 MySQL 数据库的连接。然后我添加了一个新项目“Linq to SQL Classes”。它打开了工作区。我将 MySQL 表拖到工作区并收到以下错误：“所选对象使用不受支持的数据提供程序”。在我的连接中，它指出正在使用以下提供程序，“.NET Framework Data Provider for MySQL.

我对 MSSQL 使用相同的过程，并且每次都能完美运行。

Oracle/MySQL 连接器/网络版本 6.6.4（最新）不支持 VS 2012 LINQ to SQL 类是正确的吗？请注意，我不想使用 LINQ to Entity。

谢谢！托德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:35:49.803

Microsoft 不为非 Microsoft RDBMS 提供“Linq to SQL”。但其他人会。查看 [devart](http://www.devart.com/linqconnect/)（乌克兰）和 [Mindspeed](http://www.mindscapehq.com/products/LightSpeed/default.aspx)（新西兰）。两者都不是免费的，但两者都有最多 8 或 10 个实体类型（不是 8 个表！）的免费版本。

# c# - 通用方法问题/错误？

> ID：13988771
> 
> 赞同：5
> 
> 时间：2012-12-21T10:52:58.040
> 
> 标签：c#, generics

谁能解释我这个问题？

使其正常工作的唯一方法是在 CorrectName 中使用 virtual，然后在 Derived 中覆盖，而不是 new 关键字，但是，为什么会发生这种情况？

为什么如果我通过泛型转换它会给我 Base 值，如果我直接转换它会给我 Derived 值？（（输出如下））

谢谢大家，正如我所说的那样，我已经有了“解决方案”，但我想**了解**

```
 class Base
    {
        public string Name { get; set; }
        public string CorrectName { get { return Name; } }
    }
    class Derived : Base
    {
        public new string CorrectName { get { return "NEW" + Name; } }
    }
    static void Main(string[] args)
    {
        List<Derived> container = new List<Derived>();

        var d = new Derived() { Name = "NameDerived2" };

        container.Add(d);

        Search<Derived>(container);
        Console.ReadLine();
    }

    static void Search<T>(List<T> list) where T : Base
    {
        foreach (var el in list)
        {
            Console.WriteLine("No Cast -->" + el.CorrectName);
            Console.WriteLine("Generic Cast -->" + (el as T).CorrectName);
            Console.WriteLine("Direct Cast -->" + (el as Derived).CorrectName);
        }
    } 
```

输出：

```
No Cast -->NameDerived2

Generic Cast -->NameDerived2

Direct Cast -->NEWNameDerived2 
```

真相表：

```
el is Derived == true
el.GetType().Equals(typeof(Derived)) == true
el.GetType().Equals(typeof(T)) == true
el.GetType().Equals(typeof(Base)) == false
typeof(T).Equals(typeof(Base)) == false
typeof(T).Equals(typeof(Derived)) == true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:58:54.070

如果没有`virtual`关键字，基类中的方法不会被覆盖，而是被新实现“隐藏”。您还可以通过使用`new`关键字 in来执行此操作`Derived`。正如您在泛型方法声明中所说，`T`传递给该方法的任何内容都必须是 type `Base`，因此 each`T`被强制转换为`Base`.

现在发生的情况是，当您不使用 时`virtual`，您将失去多态性，这意味着，即使对象实际上是 type `Derived`，但是强制转换为`Base`，也会调用 的`Base`实现`CorrectName`，而不是 - 正如您所期望的那样 - 中的新实现`Derived`.

仅当您将对象显式转换为`Derived`.

这也已在此处讨论和描述：[虚拟关键字 in c#](https://stackoverflow.com/questions/13856879/virtual-keyword-in-c-sharp/13856913#13856913)

另一个可以帮助您了解虚拟和非虚拟方法之间区别的链接可能是：[http ://en.wikipedia.org/wiki/Virtual_method_table](http://en.wikipedia.org/wiki/Virtual_method_table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:38:30.273

非虚拟方法在编译时绑定，而不是在运行时绑定。在编译时，所有可以保证的`T`是 a `Base`，因此编译器将属性访问器绑定到的`Base`版本，`CorrectName`这在运行时不会改变。您正在使用`Derived`作为类型参数调用该方法`T`，但其他人可以使用继承自的另一种类型`Base`，甚至是`Base`其自身来调用它。

然而，虚拟方法将检查实际的运行时类型并调用正确的覆盖方法。

您发布的“真相表”在这里无关紧要，因为所有这些都是在运行时评估的。要证明编译器的计算`T`结果好像是`Base`，请尝试以下操作：

```
T t = default(T);
object o = t; // works
Base b = t; // works
Derived d = t; // doesn't work 
```

# wordpress - 如何使用多个 buddypress 移动主题

> ID：13988772
> 
> 赞同：0
> 
> 时间：2012-12-21T10:53:00.940
> 
> 标签：wordpress, mobile, wordpress-theming, buddypress

如何为 buddypress 手机使用多个主题，我想在这些主题之间快速切换。这是为了创建样式和测试主题。还比较了这些主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T07:54:59.667

创建一个文件`/wp-content/sunrise.php`。在那里你可以这样写：

```
add_filter('option_template', 'filter_get_option');
add_filter('option_stylesheet', 'filter_get_option');
function filter_get_option($value){
    // here you can based on url or any other thing 
    // change the theme on a fly, like this:
    if(true){
        $value = 'theme_1';
    }else{
        $value = 'theme_2';
    }

    return $value;
} 
```

这有点像 hack，但它确实有效。`theme_1`并且`theme_1`是主题文件夹（里面的那些`/wp-content/themes/`

# spring - 在骨干网+基于spring rest组件的应用程序中处理页面刷新

> ID：13988778
> 
> 赞同：0
> 
> 时间：2012-12-21T10:53:27.243
> 
> 标签：spring, backbone.js

我有两个应用程序部署在 2 个不同的 tomcat 服务器上。第一个应用程序完全由使用backbone.js 编写的.js 和.css 代码组成，应用程序2 由一个Spring MVC、Rest 应用程序组成，它处理由主干应用程序进行的其余调用

我在这种情况下面临一个问题，即在登录时向 app-2 发送请求时，发送的响应包含 Json 对象中的所有登录会话相关详细信息。收到响应后，所有收到的详细信息都存储在主干模型对象中，并相应地呈现一个名为 Welcome 的视图。

但是，如果我在欢迎页面上进行页面刷新，模型中的详细信息会持续存在吗？如果是，那么没有问题，但如果不是，那么应该怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:53:53.940

不，JavaScript 模型在页面刷新后不会持续存在。一般来说，我看到它解决的方法是在 app-2 中有两个身份验证调用：一个用于登录，另一个用于检查是否登录。这样，当页面加载时，您可以快速发出请求以检查是否用户已经登录。如果是，则转发到应用程序。如果没有，让用户登录。

# socketexception - 打开的文件太多（ulimit 已更改）

> ID：13988780
> 
> 赞同：16
> 
> 时间：2012-12-21T10:53:32.993
> 
> 标签：socketexception, ulimit

我正在使用 tomcat 7 和 java 1.7 的 debian 服务器。这是一个接收多个 TCP 连接的应用程序，每个 TCP 连接都是 java 进程打开的文件。

看着`/proc/pid of java/fd`我发现，有时打开的文件数超过 1024，当这种情况发生时，我在`catalina.out`日志中找到了堆栈跟踪`_SocketException: Too many open files_`

我发现有关此错误的所有内容，人们都指的是 ulimit，我已经更改了此内容并且错误一直在发生。这是配置：

在`/etc/security/limits.conf`

```
root    soft    nofile  8192
root    hard    nofile  8192 
```

在`/etc/sysctl.conf`

```
fs.file-max = 300000 
```

命令`ulimit -a`返回：

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 16382
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 8192
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) unlimited
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

但是，当我检查 java 进程的限制时，它只有 1024

在`/proc/pid of java/limits`

```
Limit                     Soft Limit           Hard Limit           Units     
Max cpu time              unlimited            unlimited            seconds   
Max file size             unlimited            unlimited            bytes     
Max data size             unlimited            unlimited            bytes     
Max stack size            8388608              unlimited            bytes     
Max core file size        0                    unlimited            bytes     
Max resident set          unlimited            unlimited            bytes     
Max processes             32339                32339                processes 
Max open files            1024                 1024                 files     
Max locked memory         65536                65536                bytes     
Max address space         unlimited            unlimited            bytes     
Max file locks            unlimited            unlimited            locks     
Max pending signals       32339                32339                signals   
Max msgqueue size         819200               819200               bytes     
Max nice priority         0                    0                    
Max realtime priority     0                    0                    
Max realtime timeout      unlimited            unlimited            us 
```

如何增加`Max open files`java进程的数量？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-30T14:56:54.257

我只是将这一行`ulimit -n 8192`放在 catalina.sh 中，所以当我执行 时`catalina start`，java 会以上面指定的限制运行。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-11T06:27:04.970

ulimit 值是在会话启动时分配的，因此更改 /etc/security/limits.conf 不会对已经运行的进程产生任何影响。非登录进程将从其父进程继承 ulimit 值，就像继承环境变量一样。

因此，在更改 /etc/security/limits.conf 后，您需要注销并登录（这样您的会话将具有新的限制），然后重新启动应用程序。只有这样，您的应用程序才能使用新的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-25T20:39:13.157

根据 tomcat/httpd 处理的工作负载/流量，可能完全不需要设置更高的 ulimit。Linux 为每个套接字连接创建一个文件描述符，因此如果将 tomcat 配置为使用 mod_jk/ajp 协议作为连接器，那么您可能想查看最大允许连接是否太高，或者 connectionTimeout 或 keepAliveTimeout 是否太高。这些参数在 OS 文件描述符的消耗中起着巨大的作用。有时，如果 tomcat 前面有反向代理，限制 apache httpd/nginx 连接的数量也是可行的。我曾经减少 httpd 中的 serverLimit 值以在gaterush场景中限制传入的请求。总而言之，调整 ulimit 可能不是一个可行的选择，因为您的系统最终可能会消耗掉很多东西。

# android - 如何模拟 Android 操作系统卸载后台应用程序？

> ID：13988782
> 
> 赞同：6
> 
> 时间：2012-12-21T10:53:36.550
> 
> 标签：android

出于测试目的，我需要轻松地重现 Android 系统决定保存并终止后台应用程序的状态，其方式与通常用于内存优化目的的方式相同。事实上，当用户切换回它时，我还需要测试这样一个已删除进程的恢复过程。

直截了当的方法是打开应用程序，然后打开更多其他任务，尝试分配尽可能多的资源。这太复杂和不可靠。

我[在 SO 上找到了这个问题](https://stackoverflow.com/questions/5075773/how-to-emulate-the-process-of-a-background-activity-is-killed-by-the-system-beca)，但答案意味着简单地杀死进程，这似乎不是等价的，因为当用户决定切换回时，似乎没有办法进一步自动恢复具有保存状态的被杀死进程应用程序。如果我理解正确，在这种显式杀死应用程序之后，如果启动，将从一开始运行，而不是从保存状态运行。请纠正我，如果我错了。

根据 Android 文档，我需要的是由 执行的`ActivityManager.killBackgroundProcesses(packageName)`，但这是做这件事的编程方式。是否有一个实用程序已经从 UI 提供了相同的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:05:37.397

> 如果我理解正确，在这种显式杀死应用程序之后，如果启动，将从一开始运行，而不是从保存状态运行。

这取决于应用程序的启动方式。如果您的意思是从启动器图标，是的。但是，根据具体情况，用户可以通过“后退”按钮或最近的任务列表返回给您，这些会将用户返回到他们离开的位置，而不是“最开始”。

> 是否有一个实用程序已经从 UI 提供了相同的选项？

在 Android 4.0+ 设备上，您的应用程序在后台，打开最近的任务列表（长按 HOME 或按专用的最近功能），然后向右滑动您的应用程序。这似乎基本上调用`killBackgroundProcesses()`了该包名称。

我没有在模拟器中尝试过这个，但它可能做同样的事情。

# excel - Range.ClearContents 清除系统剪贴板 - 解决方法？(VBA/Excel)

> ID：13988783
> 
> 赞同：2
> 
> 时间：2012-12-21T10:53:37.710
> 
> 标签：excel, vba, clipboard

**问题**

我经常处理的数据视图表想要重置视图部分的内容（为空白）。从历史上看，我们遇到过用户说这张表会清除他们的系统剪贴板的问题。

`Range.ClearContents`使用清除这些值似乎存在问题。

```
# Grab some data from cells onto the clipboard

Sub ClearTheClipboardWhenTheUserIsntExpectingIt()
    Cells(1, 1).EntireRow.ClearContents    ' Or something like that
End Sub 
```

这应该足以复制问题。

**解决方法**

我的问题是关于一种可能的解决方法，即：

```
Dim r as Range
...
r.Value2 = Empty 
```

**问题）**

*   是否有一些明显的原因说明这*不是*一个合理的解决方法？
*   是否有一些更规范的方法可以在不清除剪贴板的情况下清除一组单元格的内容？
*   我只是用`ClearContents`错了吗？

我不愿意通过大型代码库并搜索/替换这种行为，如果它稍后会变成我必须回去修复它，因为我已经引入了一些错误。

编辑：我应该提到我正在使用 Excel 2007

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:05:56.657

**更新：**我刚刚在香草 Excel 电子表格中成功尝试了以下代码，在[此处找到：](http://desmondoshiwambo.wordpress.com/2012/02/23/how-to-copy-and-paste-text-tofrom-clipboard-using-vba-microsoft-access/)

```
Sub Button1_Click()

Dim clipboardText As String
clipboardText = GetTextFromClipboard()

Cells(1, 1).EntireRow.ClearContents

CopyTextToClipboard (clipboardText)

End Sub

Sub CopyTextToClipboard(ByVal inText As String)

Dim objClipboard As Object
Set objClipboard = CreateObject("new:{1C3B4210-F441-11CE-B9EA-00AA006B1A69}")
objClipboard.SetText inText
objClipboard.PutInClipboard
Set objClipboard = Nothing

End Sub

Function GetTextFromClipboard() As String

Dim objClipboard As Object
Set objClipboard = CreateObject("new:{1C3B4210-F441-11CE-B9EA-00AA006B1A69}")
objClipboard.GetFromClipboard
GetTextFromClipboard = objClipboard.GetText
Set objClipboard = Nothing

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:36:53.860

我唯一注意到的是它`.ClearContents`清除了 MSO 剪贴板，这与 Windows 的剪贴板不同。这是因为由于`.ClearContents`某种原因设置`CutCopyMode`为`False`。

我会推荐以下任何一种：

```
Sub test()
    Cells(1, 1).EntireRow.Value = vbNullString
End Sub

Sub test3()
    Cells(1, 1).EntireRow.Value = Empty
End Sub 
```

虽然我更喜欢 brettdj 的方法，因为它更干净（`Rows(1).Value = vbNullstring`）。

另外，从帮助文件中：

> **空的**
> 
> 表示没有为 Variant 变量分配起始值。空变量在数字上下文中表示为 0，在字符串上下文中表示为零长度字符串 ("")。

显然，当单元格值设置为 时`Empty`，它被认为是我认为的字符串值，因为当我测试它时，它没有将单元格设置为 0。因此，当将`Empty`或`vbNullString`应用于单元格值时，两者之间几乎没有区别他们。

# c# - MVC3 部署到主机 - 现在工作了 16 天 SQL 错误

> ID：13988789
> 
> 赞同：0
> 
> 时间：2012-12-21T10:54:09.740
> 
> 标签：c#, sql, asp.net-mvc-3

我已经构建了一个 MVC3 应用程序并将其部署到 3rd 方托管。在对连接字符串等进行了一些认真的摆弄之后，我终于设法让它连接到主机上的 SQL DB，并且应用程序运行良好，允许 MVC 的所有花里胡哨工作（添加、更新、删除等）。

我离开网站运行了两个星期左右（没有进行**任何更改**），现在当我浏览它时，我收到以下错误（当自定义错误关闭时）。

```
> Server Error in '/' Application.
> 
> A network-related or instance-specific error occurred while
> establishing a connection to SQL Server. The server was not found or
> was not accessible. Verify that the instance name is correct and that
> SQL Server is configured to allow remote connections. (provider: SQL
> Network Interfaces, error: 26 - Error Locating Server/Instance
> Specified)
> 
> Description: An unhandled exception occurred during the execution of
> the current web request. Please review the stack trace for more
> information about the error and where it originated in the code. 
> 
> Exception Details: System.Data.SqlClient.SqlException: A
> network-related or instance-specific error occurred while establishing
> a connection to SQL Server. The server was not found or was not
> accessible. Verify that the instance name is correct and that SQL
> Server is configured to allow remote connections. (provider: SQL
> Network Interfaces, error: 26 - Error Locating Server/Instance
> Specified)
> 
> Source Error: 
> 
> An unhandled exception was generated during the execution of the
> current web request. Information regarding the origin and location of
> the exception can be identified using the exception stack trace below. 
```

我知道这是连接到 SQL 数据库的问题，但我想知道的是**为什么**在运行两周后会发生这种情况？**如果我修复它，**它会在两周后再次发生吗？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:59:48.857

如果它在过去 2 周内成功部署并运行。您的托管服务提供商端一定有问题。您可以在托管服务提供商的支持系统上开票。

下载副本并在具有某些更改（数据库字符串等）的本地环境中运行它，并检查一切是否正常。

我相信，这是托管服务提供商的问题。

# spring - 使用工具分析在 JBOSS EAP 6 上运行的 spring 应用程序

> ID：13988794
> 
> 赞同：1
> 
> 时间：2012-12-21T10:54:36.230
> 
> 标签：spring, profiling, jboss6.x, spring-insight

我们需要使用类似于 Spring Insight 的一些工具来分析在 JBOSS EAP 6 上运行的基于 Spring 的 Web 应用程序。

Spring Insight 帮助开发人员理解和可视化 Web 应用程序的行为，但它不支持 JBOSS EAP 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:39:42.383

也许 AppDynamics ( [http://www.appdynamics.com/](http://www.appdynamics.com/) ) 可以成为你们的替代方案。

# file-io - 将临时文件连接到 tcl 中的单个文件

> ID：13988795
> 
> 赞同：3
> 
> 时间：2012-12-21T10:54:41.573
> 
> 标签：file-io, tcl, concatenation

我正在尝试将文件夹中的所有临时文件连接到一个文本文件中。但我一直遇到错误：

```
 if { [catch { exec cat /tmp/new_temp/* >> /tmp/full_temp.txt } msg] } 
```

错误信息：

```
-cat: /tmp/new_temp/*: No such file or directory 
```

如果我在 tclsh 上尝试同样的事情（没有 catch 和 exec）它会起作用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T12:53:45.507

为什么要采取如此可怕的做法？使用 Tcl 本身来连接这些文件：

```
set out [open /tmp/full_temp.txt w]
fconfigure $out -translation binary
foreach fname [glob -nocomplain -type f "/tmp/new_temp/*"] {
    set in [open $fname]
    fconfigure $in -translation binary
    fcopy $in $out
    close $in
}
close $out 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:18:32.780

因为 Tcl 不是 shell，它不会自动扩展 glob 模式。尝试

```
if { [catch {exec sh -c {cat /tmp/new_temp/* >> /tmp/full_temp.txt}} msg] } 
```

要让 Tcl 进行文件名扩展，您需要`glob`命令

```
set code [catch [list exec cat {*}[glob /tmp/new_temp/*] >> /tmp/full_temp.txt] msg]
if {$code != 0} {
    # handle error
} 
```

# android - Android ListView performLaunchActivity 错误不显示 xml 布局

> ID：13988797
> 
> 赞同：1
> 
> 时间：2012-12-21T10:54:46.020
> 
> 标签：android, xml, listview, android-arrayadapter

我正在通过 SQLite 从数据库中获取数据。我将数据记录到数据库并使用 Listview 我想在 xml 中显示数据。但无法启动活动。我是第一次使用 Listview。谢谢你的帮助。

```
ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2180    
ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2230 
ActivityThread.access$600(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 141    
ActivityThread$H.handleMessage(Message) line: 1234  
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 137 
ActivityThread.main(String[]) line: 5039    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 511  
ZygoteInit$MethodAndArgsCaller.run() line: 793  
ZygoteInit.main(String[]) line: 560 
NativeStart.main(String[]) line: not available [native method] 
```

这是java代码；

```
public class ButceGetirenListView extends ListActivity {

    Spinner yil,ay;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        yil=(Spinner)findViewById(R.id.spinnerYillar);
        ay=(Spinner)findViewById(R.id.spinnerAylar);

        String[] result=getiren();
        setListAdapter(new ArrayAdapter<String>(this, R.layout.butcegetir,result));

        ListView listV=getListView();
        listV.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                    Toast.makeText(getApplicationContext(),((TextView)arg1).getText(), Toast.LENGTH_SHORT).show();

            }

        });
    }
    protected String[] getiren(){

        int yillar=Integer.valueOf(yil.getSelectedItem().toString());
        String aylar=ay.getSelectedItem().toString();
        TemporaryDatabase tdb=new TemporaryDatabase(this);
        tdb.open();
        String[] result=new String[25];
        result = tdb.getDataHesapla(yillar,aylar);
        tdb.close();
        return result;
    }

} 
```

和xml代码：

```
<TextView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textViewListView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="15dp">
</TextView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:01:27.523

您正在使用：

```
yil=(Spinner)findViewById(R.id.spinnerYillar);
ay=(Spinner)findViewById(R.id.spinnerAylar); 
```

但是，您的 XML 文件中没有两个具有这些 ID 的 Spinner。事实上，您甚至都不会调用`setContentView()`来使用您的 XML 文件。

因此，`yil`and为 null，当您尝试在方法中使用它们时`ay`会导致 a 。`NullPointerException``getiren()`

要解决此问题，请将微调器添加到您的布局中，并`setContentView()`在使用`findViewById()`. 您还需要添加一个具有以下 ID 的 ListView：

```
android:id="@android:id/list" 
```

这样就`ListActivity`可以找到`ListView`具有自定义自定义布局的。

**例子**

```
<YourBaseLayout>
    <ListView
        android:id="@android:id/list" />
    <TextView />
    <firstSpinner />
    <secondSpinner />
</YourBaseLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:34:01.663

出现此问题是因为您忘记写`setContentView();`行。

**解决方案：-**

`setContentView(R.layout.activity_main)`在 onCreate() 方法的这一行之后`super.onCreate(savedInstanceState);`和之前写下这一行`yil=(Spinner)findViewById(R.id.spinnerYillar);`，它会解决你的问题。

# wpf - PerspectiveCamera WPF 向下看

> ID：13988799
> 
> 赞同：2
> 
> 时间：2012-12-21T10:54:47.003
> 
> 标签：wpf, 3d, perspectivecamera

我真的对 WPF 中的透视相机感到沮丧，它会做各种奇怪的事情，而且我在互联网上可以找到的所有解决方案都不适合我。

目前我有这个代码：

```
<Window x:Class="projectv1.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" Name="MainWin">
<Grid HorizontalAlignment="Stretch" >
    <Viewport3D Name="viewport3D1" >
        <Viewport3D.Camera>

            <PerspectiveCamera x:Name="camMain"  Position="-500 -10 300" LookDirection="0 -0.2 -1" UpDirection="0 1 0" FarPlaneDistance="10000" NearPlaneDistance="1" />

        </Viewport3D.Camera>
        <ModelVisual3D>
            <ModelVisual3D.Content>
                <DirectionalLight x:Name="dirLightMain" Direction="-1,-1,-1">
                </DirectionalLight>
            </ModelVisual3D.Content>
        </ModelVisual3D>

        <ModelVisual3D>
            <ModelVisual3D.Content>
                <GeometryModel3D>
                    <GeometryModel3D.Geometry>
                        <MeshGeometry3D x:Name="meshMain"
                            Positions="-800,0,-1000 -200,0,-1000 -500,0,-100"
                            TriangleIndices="0,1,2" >
                        </MeshGeometry3D>
                    </GeometryModel3D.Geometry>
                    <GeometryModel3D.Material>
                        <DiffuseMaterial x:Name="matDiffuseMain">
                            <DiffuseMaterial.Brush>
                                <SolidColorBrush Color="Red"/>
                            </DiffuseMaterial.Brush>
                        </DiffuseMaterial>
                    </GeometryModel3D.Material>
                </GeometryModel3D>
            </ModelVisual3D.Content>
        </ModelVisual3D>
    </Viewport3D>

</Grid> 
```

所以我有一个三角形，我从下面看它......但现在我想从顶部看它所以我将相机的 Y 参数的位置更改为任何大于 0 的值，但突然间我不能看到任何东西。例如 Position ="-500 -1 300" 有效，但 Position="-500 1 300" 不再有效。我用 updirection 变量玩了很多，但我无法解决这个问题....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:00:28.633

您需要更改`LookDirection`位置。

您所做的是将相机从对象的一侧移动到另一侧，但保持它朝同一个方向看：

```
----- <-- object

  ^
  |
  Camera 
```

像这样：

```
 ^
  |
  Camera

----- <-- object 
```

如果你也翻转相机方向，你会得到正确的结果：

```
 Camera
  |
  V

----- <-- object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:34:19.923

您可能需要更改三角形索引的顺序。看看[http://www.codeproject.com/Articles/23332/WPF-3D-Primer](http://www.codeproject.com/Articles/23332/WPF-3D-Primer)，更具体地说是“第 4 步”。

简而言之，定义顶点的顺序也定义了三角形可见的方向。三角形的背面是不可见的。

# sql - Linq to SQL Group by and Sum in Select

> ID：13988800
> 
> 赞同：8
> 
> 时间：2012-12-21T10:54:49.420
> 
> 标签：sql, asp.net-mvc, linq, entity-framework

我需要将该 SQL 查询转换为 Linq：

```
SELECT
    SUM([ArticleAmount]) as amount
    ,[ArticleName]
FROM [DB].[dbo].[OrderedArticle]

group by articlename

order by amount desc 
```

我尝试了以下代码，但在“a.ArticleName”处出现错误，提示“ArticleName”的定义将丢失。

```
var sells = orderedArt
            .GroupBy(a => a.ArticleName)
            .Select(a => new {Amount = a.Sum(b => b.ArticleAmount),Name=a.ArticleName})
            .OrderByDescending(a=>a.Amount)
            .ToList(); 
```

你们中有人知道如何解决这个问题吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T11:08:50.137

您收到此错误是因为 Grouping 没有返回`IEnumerable<OrderedArticle>`但`IEnumerable<IGrouping<string, OrderedArticle>>`

您需要更改代码以使用`a.Key`：

```
var sells = orderedArt
    .GroupBy(a => a.ArticleName)
    .Select(a => new { Amount = a.Sum(b => b.ArticleAmount), Name = a.Key})
    .OrderByDescending(a => a.Amount)
    .ToList(); 
```

# java - 登录 Java 的最快方法是什么？

> ID：13988805
> 
> 赞同：37
> 
> 时间：2012-12-21T10:55:08.733
> 
> 标签：java, optimization, logic, bit-manipulation

我想将`float`值的符号作为`int`-1 或 1 的值。

避免条件始终是降低计算成本的好主意。例如，我能想到的一种方法是使用快速`bit-shift`获取标志：

```
float a = ...;
int sign = a >> 31; //0 for pos, 1 for neg
sign = ~sign; //1 for pos, 0 for neg
sign = sign << 1; //2 for pos, 0 for neg
sign -= 1; //-1 for pos, 1 for neg -- perfect. 
```

或更简洁地说：

```
int sign = (~(a >> 31) << 1) - 1; 
```

1.  这看起来是个好方法吗？
2.  考虑到字节序问题（因为 MSB 持有符号），这是否适用于所有平台？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-12-21T10:56:41.917

您不简单使用的任何原因：

```
int sign = (int) Math.signum(a); //1 cast for floating-points, 2 for Integer types 
```

此外，大多数 Number 实现都有一个 signum 方法，该方法采用该类型的原语并返回一个 int，因此您可以避免强制转换以获得额外的性能。

```
int sign1 = Integer.signum(12); //no casting
int sign2 = Long.signum(-24l); //no casting 
```

它将返回 +1 / 0 / -1 并且已经过优化以提供良好的性能。

作为参考，您可以查看[openJDK 中的实现](http://hg.openjdk.java.net/jdk7/tl/jdk/file/84792500750c/src/share/classes/sun/misc/FpUtils.java)。相关位是：

```
public static float signum(float f) {
    return (f == 0.0f || isNaN(f)) ? f : copySign(1.0f, f);
}

public static boolean isNaN(float f) {
    return (f != f);
}

public static float copySign(float magnitude, float sign) {
    return rawCopySign(magnitude, (isNaN(sign) ? 1.0f : sign));
}

public static float rawCopySign(float magnitude, float sign) {
    return Float.intBitsToFloat((Float.floatToRawIntBits(sign)
            & (FloatConsts.SIGN_BIT_MASK))
            | (Float.floatToRawIntBits(magnitude)
            & (FloatConsts.EXP_BIT_MASK
            | FloatConsts.SIGNIF_BIT_MASK)));
}

static class FloatConsts {
    public static final int SIGN_BIT_MASK = -2147483648;
    public static final int EXP_BIT_MASK = 2139095040;
    public static final int SIGNIF_BIT_MASK = 8388607;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T12:04:51.897

如果您只想要浮点值中的 IEEE 754 符号位，您可以使用：

```
/**
 * Gets the sign bit of a floating point value
 */
public static int signBit(float f) {
    return (Float.floatToIntBits(f)>>>31);
} 
```

这非常快，并且具有没有分支的优点。我认为这是你可以在 JVM 上获得的最快速度。

但请确保它是您想要的！特别要注意特殊情况，例如 NaN 在技术上可以有 0 或 1 符号位。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-21T11:03:56.077

如果绝对必要，您应该只尝试使用难以阅读/理解的优化。

问题与

```
int sign = Math.signum(a); 
```

可能是它返回 0 如果 0.0==a

但是您应该尽可能依赖现有的库函数，以使您的代码易于阅读/理解。

如果你想要 1 代表 0.0==a 这个怎么办：

```
int sign = (0>a)?-1:1; 
```

# c# - 使用来自 AST 的 c# 制作一个真正的解释器

> ID：13988809
> 
> 赞同：4
> 
> 时间：2012-12-21T10:55:12.387
> 
> 标签：c#, interpreter, abstract-syntax-tree

我知道还有其他关于编译器/解释器技术的问题，以及像[IronPython](http://ironpython.codeplex.com/)到[侏罗纪](http://jurassic.codeplex.com/)这样的非常好的代码来学习。对我来说很清楚如何从源代码构建 AST（抽象语法树），编写一个 top-descent 解析器（目前我更喜欢编写而不是使用代码生成工具）。

当用作解释器时，我尝试研究的大多数资源都使用 Reflection.Emit 之类的 API 即时编译程序。现在我想知道构建一个不编译为 .NET VM 源的真正解释器的最佳实践。

获得 AST 后，如何执行代码？我应该使用解释器还是访问者设计模式？或者做一些不同的事情？什么是最好的或规范的方式？

我知道已经有[这样的问题，](https://stackoverflow.com/questions/10554998/ast-interpreter)但如果可能的话，我喜欢更多信息和更具体的 .NET/C# 实现。

问候，贾科莫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T11:15:40.630

> 我应该使用解释器还是访问者设计模式？

我认为这些名称给出了提示；-)

访问者对 AST 的一般操作很有用，但对于执行单一功能（执行/解释），您只需要一种方法，因此需要解释器模式。

这是一个非常简单的示例（但实际上并没有比这更复杂，即使对于复杂的解释器也是如此）：

```
// Holds function scope etc.
class Context {}

abstract class Node {
    public abstract object Execute(Context ctx);
}

class Number : Node {
    private readonly int x;

    public Number(int x) { this.x = x; }

    public override object Execute(Context ctx) { return x; }
}

class Addition : Node {
    private readonly Node left, right;

    public Addition(Node left, Node right) {
        this.left = left;
        this.right = right;
    }

    public override object Execute(Context ctx) {
        // Verification omitted: do the nested expressions evaluate to a number?
        return (int) left.Execute(ctx) + (int) right.Execute(ctx);
    }
} 
```

......你有它。一个知道加法的简单解释器。这是一个使用示例：

```
var ast = new Addition(new Number(23), new Number(42));
Console.WriteLine("Result = {0}", ast.Execute(new Context())); 
```

# c++ - 请解释析构函数调用的顺序

> ID：13988811
> 
> 赞同：2
> 
> 时间：2012-12-21T10:55:19.950
> 
> 标签：c++

```
using namespace std;

class C
{
    int a;
    public:
        C(int aa=0) {a=aa;}
        ~C() {cout << "Destructor C!" << a << endl;}
};

class D: public C
{
    int b;
    public:
        D(int aa=0, int bb=0): C(aa) {b=bb;}
        ~D() {cout << "Destructor D!" << b << endl;}
};

void test()
{
    D x(5);
    D y(6,7);
}

int main()
{
    test();
} 
```

上面是代码，下面是运行结果：

```
Destructor D!7
Destructor C!6
Destructor D!0
Destructor C!5 
```

我不明白为什么“析构函数 C！” 将被调用。以及相关的析构函数的调用顺序。我觉得这似乎是堆栈推送/弹出。

**进一步：** 为什么前面调用了“ **D x(5);** ”，而后面给出了相应的结果呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:09:00.620

派生类的构造函数和析构函数调用顺序如下：

```
Base  Class  Constructor
Derived  Class  Constructor
Derived  Class  Destructor
Base  Class  Destructor 
```

由于派生类建立在基类之上：

*   基类必须在派生类之前构造。
*   派生类必须在基类之前销毁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T11:16:14.170

析构函数调用序列总是从派生到基，就像弹出堆栈一样。这允许派生类清理基类分配的资源。在这种情况下，编译器知道如何构造这个序列，因为它知道对象的确切类型`x`并且是`y`静态的。

然而，在某些情况下，这个顺序会被打破。考虑对您的代码进行以下修改：

```
void test()
{
    C *x = new D(5);
    D *y = new D(6,7);
    delete x;
    delete y;
} 
```

它产生以下输出：

```
Destructor C!5
Destructor D!7
Destructor C!6 
```

运行它不会产生`~D`for `x`; 对于`y`，两个析构函数都被调用。

这是因为您没有`virtual`在基类中声明析构函数。当析构函数不是虚拟的时，编译器不知道它必须在对象被指向基类的指针引用的情况下调用派生类的析构函数。这就是为什么你应该总是在必须继承和动态分配资源的类中创建一个虚拟的析构函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T11:14:42.767

```
 I feel that it seems like the stack push/pop. 
```

D类派生自C，调用D构造函数时，先调用C构造函数，反之调用析构函数。

```
Further: Why it calls "D x(5);" earlier but the corresponding result is given later? 
```

当控制流离开其定义范围时，自动对象（通常称为“局部变量”）将按照其定义的相反顺序被破坏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T10:59:20.350

清理对象时，首先调用派生类的析构函数，然后调用基类的析构函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T10:59:31.017

创建`D`实例时，`C`将调用 的构造函数，因为`D`继承自它。
当你`D`再次销毁时，它会调用`D`s 析构函数，然后调用析`C`构函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T11:02:57.157

当你继承时，你“扩展”了你继承的对象。因此，如果您要构建`D`，则需要`C`. 当您需要销毁时`D`，您将使用销毁`C`，您构建它以便能够扩展它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T11:32:44.237

> **进一步**：为什么它叫“D x(5);” 较早但相应的结果在后面给出？

这些对象在*堆栈*上分配（而`D * d1 = new D();`在*堆上*分配）。

提供输出的不是调用`D x(5)`，而是当实例超出范围时对析构函数的调用`~D`，在这种情况下，是在 exiting 时`main()`。

因为它是堆栈内存，所以解除分配的顺序与分配相反；

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T11:13:42.453

调用析构函数`C`是因为销毁派生类的对象包括销毁其基类子对象。根据 [class.dtor] 第 8 段：

> 在执行析构函数的主体之后……类 X 的析构函数调用……X 的直接基类的析构函数……

当控制流退出一个范围时（例如你的函数`test()`结束），本地对象以 LIFO 方式被销毁：首先创建的对象最后被销毁。根据 [stmt.jump] 第 2 段：

> 从范围退出时（无论如何完成），已在该范围内构建的具有自动存储持续时间 (3.7.3) 的对象将按其构建的相反顺序销毁。

# pydev - pydev 对nose2 的支持

> ID：13988813
> 
> 赞同：3
> 
> 时间：2012-12-21T10:55:34.997
> 
> 标签：pydev, nose

我一直在用 PyDev 成功地进行鼻子测试，并想尝试一下nose2。

所以我安装了它

```
pip install nose2 
```

将示例代码从[http://nose2.info/](http://nose2.info/)复制/粘贴到一个名为“test_script_with_nose2”的新模块中：

```
from nose2.compat import unittest
from nose2.tools import params

def tests_can_be_functions():
    assert True

def tests_can_be_generators():
    def check(val):
        assert val == val, "Identity failure!"
    for i in range(1, 4):
        yield check, i

@params(1, 2, 3)
def tests_can_take_parameters(p):
    assert p < 4, "How'd that get here?"

class TestsCanBeUnittestTestCases(unittest.TestCase):
    def setUp(self):
        self.x = 1
    def test_one(self):
        self.assertEqual(self.x, 1)

class TestsCanBePlainClasses(object):
    def setUp(self):
        self.me_too = 1
    def test(self):
        assert self.me_too == 1, "Not me too?" 
```

但我得到这个错误

```
======================================================================
ERROR: test_script_with_nose2.tests_can_take_parameters
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
TypeError: tests_can_take_parameters() takes exactly 1 argument (0 given)

----------------------------------------------------------------------
Ran 7 tests in 0.014s

FAILED (errors=1) 
```

我在pydev中选择了nose作为单元测试运行器，但也许它需要一个新的nose2运行器？如果是这样，有人知道该怎么做吗？还是我在这里遗漏了一些微不足道的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T15:26:42.800

这个未解决的答案延迟了几年，但我想提供这些信息。

您提供的错误中的这一行表明正在使用nose 而不是nose2，因为nose2 是一个可通过pip 安装的单独包：

```
File "/usr/local/lib/python2.7/dist-packages/nose/case.py", line 197, in runTest 
```

我还尝试`nose2`在 pydev 中使用，从`nose`. 我卸载`nose`并安装`nose2`，然后尝试运行您提供的测试代码，但它在导入时失败，`nose2`而不是您提供的错误。

```
ImportError: No module named nose2.compat 
```

然后，我尝试了一些我已经拥有的单元测试，但收到以下消息：

```
Warning: Could not import the test runner: --nose-params. Running with the default pydev unittest runner instead. 
```

因此，截至目前，pydev 似乎仍然不支持nose2。

# android - 消息不会发送到手机

> ID：13988814
> 
> 赞同：2
> 
> 时间：2012-12-21T10:55:37.163
> 
> 标签：android

```
send.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {

    sendSms("9500518057","message");

}

private void sendSms(String phno, String message) {
    // TODO Auto-generated method stub
    Log.v("PhoneNumber",phno);
    Log.v("MEssage", message);
    PendingIntent pi=PendingIntent.getActivity(mContext, 0, new Intent(mContext, Object.class), 0);
    SmsManager sms=SmsManager.getDefault();
    sms.sendTextMessage(phno, null, message, pi, null);
    }
}); 
```

在这段代码中，当我单击按钮发送消息时，它没有显示任何响应。任何人都可以告诉当单击按钮时，它只会向特定号码发送确认消息。我没有要求发送消息。我要求消息警报。有什么方法吗，请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:08:34.957

```
Use this code    

private static final int SIMPLE_NOTFICATION_ID = 0;
private NotificationManager mNotificationManager;

send.setOnClickListener(new OnClickListener() {

     @Override
     public void onClick(View v) {    

        mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

        final Notification notifyDetails = new Notification(R.drawable.ic_launcher, "New Alert, Click Me!",
        System.currentTimeMillis());

        Context context = getApplicationContext();

        CharSequence contentTitle = "Open App";

        CharSequence contentText = "hi";
        Intent notifyIntent = new Intent(getApplicationContext(), YourActivity.class);

        PendingIntent intent = PendingIntent.getActivity(YourActivity.this,0,notifyIntent,android.content.Intent.FLAG_ACTIVITY_NEW_TASK);
        notifyDetails.setLatestEventInfo(context,contentTitle, contentText, intent);
        mNotificationManager.notify(SIMPLE_NOTFICATION_ID,notifyDetails);

     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:57:49.923

更新

```
SmsManager sm = SmsManager.getDefault();
sm.sendTextMessage(destinationAddress, null, "Hello world", null, null, null); 
```

[https://stackoverflow.com/a/6996255/760489](https://stackoverflow.com/a/6996255/760489)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:26:53.117

我认为您声明了您的应用程序 manifest.xml 文件的权限，

```
<uses-permission android:name="android.permission.SEND_SMS" /> 
```

# .htaccess - url变量的htaccess 301重定向问题

> ID：13988815
> 
> 赞同：6
> 
> 时间：2012-12-21T10:55:40.127
> 
> 标签：.htaccess, http-status-code-301

如果我使用此代码，则成功：

```
Redirect 301 /products.php http://website.com.au/product_123.php 
```

但如果我这样做，它不是：

```
Redirect 301 /products.php?id=123 http://website.com.au/product_123.php 
```

请注意 url 中的变量是导致它失败的原因。

我究竟做错了什么？还有另一种方法可以做到这一点吗？我真的需要 urls 变量。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T11:18:17.717

您不能将查询字符串参数放在`Redirect`指令的源 URI 路径中。为此，您必须使用 mod_rewrite 的`%{QUERY_STRING}`变量：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^id=123$
RewriteRule ^/?product\.php$ http://website.com.au/product_123.php? [L,R=301] 
```

或者让它更通用：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^id=([^&]+)
RewriteRule ^/?product\.php$ http://website.com.au/product_%1.php? [L,R=301] 
```

# javascript - Find Shortest Binary String In Given Interval

> ID：13988821
> 
> 赞同：7
> 
> 时间：2012-12-21T10:56:08.470
> 
> 标签：javascript, algorithm, language-agnostic, binary

Say I have two values `0 <= a < b <= 1`, how can I chose an `x` such that `a <= x`**`<`**`b` with the shortest binary expansion possible?

My approach so far is to take the binary strings of `a` and `b`, with the decimal point removed, and at the first place they differ, take the expansion of `a` up until that point. If there's more of `a` to consume, strip the last bit. Finally, add `1`.

In JavaScript:

```
var binaryInInterval = function(a, b) {
  if (a < 0 || b > 1 || a >= b) return undefined;

  var i, u, v, x = '';

  a = a.toString(2).replace('.', '');
  b = b.toString(2).replace('.', '');

  for (i = 0; i < Math.max(a.length, b.length); i++) {
    u = parseInt(a.substr(i, 1), 10) || 0;
    v = parseInt(b.substr(i, 1), 10) || 0;

    x += u.toString();
    if (u != v) { 
      if (i + 1 < a.length) x = x.slice(0, -1);
      x += '1';
      break;
    }
  }

  return '0.' + x.substr(1);
}; 
```

This works, but I'm not convinced that it's *generally* correct. Any thoughts?...

* * *

**EDIT** I've already found a case that doesn't work correctly :P

```
binaryInInterval(0.25, 0.5) = '0.1'

0.25  0.01
0.5   0.1
        ^ Difference
          but a hasn't been fully consumed
          so we strip 00 to 0 before adding 1 
```

* * *

**EDIT 2** An alternative algorithm would be to iterate through `2^-n` and check if any multiple of this fits within the interval. This would be more expensive, however.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:12:33.030

It will fail for inputs like a = 0.1, b = 0.100001 (in binary -- i.e. a = 0.5, b = 0.515625 in decimal). The correct answer would be 0.1 in this case, but your algorithm will produce 0.11 instead, which is not only not minimal-length, but greater than b :-(

Your digit-checking looks fine to me -- the problem is that when you have made the (right) decision to end the loop, you construct the wrong output if b's digit string is longer. One easy way to fix it would be to output digits one-at-a-time, as you go along: until you see a different character, you know you must include the current character.

One more tip: I don't know Javascript well, but I think both `parseInt()` calls are unnecessary, since nothing you do with `u` or `v` actually requires arithmetic.

**[EDIT]**

Here is some example digit-at-a-time code that incorporates a few other considerations:

```
var binaryInInterval = function(a, b) {
  if (a < 0 || b > 1 || a >= b) return undefined;

  if (a == 0) return '0';  // Special: only number that can end with a 0

  var i, j, u, v, x = '';

  a = a.toString(2).replace('.', '');
  b = b.toString(2).replace('.', '');

  for (i = 0; i < Math.min(a.length, b.length); i++) {
    u = a.substr(i, 1);
    v = b.substr(i, 1);

    if (u != v) {
      // We know that u must be '0' and v must be '1'.
      // We therefore also know that u must have at least 1 more '1' digit,
      // since you cannot have a '0' as the last digit.
      if (i < b.length - 1) {
        // b has more digits, meaning it must
        // have more '1' digits, meaning it must be larger than
        // x if we add a '1' here, so it's safe to do that and stop.
        x += '1';     // This is >= a, because we know u = '0'.
      } else {
        // To ensure x is >= a, we need to look for the first
        // '0' in a from this point on, change it to a '1',
        // and stop.  If a only contains '1's from here on out,
        // it suffices to copy them, and not bother appending a '1'.
        x += '0';
        for (j = i + 1; j < a.length; ++j) {
          if (a.substr(j, 1) == '0') {
            break;
          }
        }
      }
      break;  // We're done.  Fall through to fix the binary point.
    } else {
      x += u;    // Business as usual.
    }
  }

  // If we make it to here, it must be because either (1) we hit a
  // different digit, in which case we have prepared an x that is correct
  // except for the binary point, or (2) a and b agree on all
  // their leftmost min(len(a), len(b)) digits.  For (2), it must therefore be
  // that b has more digits (and thus more '1' digits), because if a
  // had more it would necessarily be larger than b, which is impossible.
  // In this case, x will simply be a.
  // So in both cases (1) and (2), all we need to do is fix the binary point.
  if (x.length > 1) x = '0.' + x.substr(1);
  return x;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T11:29:58.827

```
function bin(a, b) {
 var den = 1;
 while (true) {
  var bint = Math.floor(b);
  if (bint == b) bint--;
  if (a <= bint) {
   return bint / den;
  }
  den *= 2;
  a *= 2;
  b *= 2;
 }
} 
```

The code iterates through larger and larger power-of-two denominators (`den`) until it finds one that supports a value that fits in the range.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T17:02:11.460

I am posting another version of the code. That tries to fix the known issues:

```
 var binaryInIntervalNew = function(inpA, inpB) {

    if (inpA < 0 || inpB > 1 || inpA >= inpB) return undefined;

    var i, u, v, x = '';

    a = inpA.toString(2).split('.');
    b = inpB.toString(2).split('.');

    a = a[a.length - 1];
    b = b[b.length - 1];

    for (i = 0; i < Math.min(a.length, b.length); i++) {

      u = a.substr(i, 1);
      v = b.substr(i, 1);

      if (u !== v) {
        // x cannot become equal to b, let us verify that
        if ((i+1) === b.length) {
          x += '01';
        } else {
          x += '1';
        }
        break;
      } else {
        x += u;
      }
      // console.log("x: " + x + " i:" + i);
    }

    x = '0.' + x;
    return parseFloat(x);
  }; 
```

A short function to test both functions:

```
function bin(a, b) {
  console.log("a:" + a.toString(2));
  console.log("b:" + b.toString(2));
  if (binaryInIntervalNew) console.log("binaryInIntervalNew: " + binaryInIntervalNew(a, b));
  if (binaryInInterval) console.log("binaryInInterval: " + binaryInInterval(a, b));
} 
```

Now few results:

```
bin(1/16, 1/4);
a:0.0001 
b:0.01
binaryInIntervalNew: 0.001
binaryInInterval: 0.01

bin(.1, .2);
a:0.0001100110011001100110011001100110011001100110011001101 
b:0.001100110011001100110011001100110011001100110011001101
binaryInIntervalNew: 0.001
binaryInInterval: 0.001

bin(1/4, 1/2);
a:0.01 b:0.1
b:0.1
binaryInIntervalNew: 0.01
binaryInInterval: 0.1

bin(.2, .5);
a:0.001100110011001100110011001100110011001100110011001101 b:0.1
b:0.1
binaryInIntervalNew: 0.01
binaryInInterval: 0.1

bin(.0011, .1);
a:0.00000000010010000001011011110000000001101000110110111000101111 b:0.0001100110011001100110011001100110011001100110011001101
b:0.0001100110011001100110011001100110011001100110011001101
binaryInIntervalNew: 0.0001
binaryInInterval: 0.0001 
```

# pdf - Imagemagick -adjoin 导致多个文件

> ID：13988824
> 
> 赞同：1
> 
> 时间：2012-12-21T10:56:41.080
> 
> 标签：pdf, imagemagick, png

我在 Windows 上使用 ImageMagick 将 PDF 转换为 PNG。PDF 有三页，我使用这个命令来转换它：

```
convert -density 900x900 -resize 1920x1080 -quality 50 -adjoin EULA.pdf pdfpng.pdf.png 
```

结果是三个png，即三个页面。

[我使用的 PDF](http://www.mediafire.com/view/?gqte1iia0g3o2bi)

关于如何将其转换为一个文件的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:27:10.503

这适用于 Linux。抱歉，但我无法访问 Windows 机器（除了不知道该系统中的 shell 编程之外）。我希望它对您有用：

```
for page in {0..2}; do 
    convert -density 900x900 -resize 1920x1080 -quality 50 "EULA.pdf[$page]" +adjoin miff:-
done | convert - -append eula.png 
```

它为文件中的每一页循环，`pdf`并且所有页面都生成一个时间（仅在内存中）文件，其格式特定于`ImageMagick`. 该数据通过管道传送到一个进程，该进程仅将它们垂直（的减号`append`）连接到输出文件`eula.png`。

# python - 如何将太平洋时区的日期时间转换为 UTC 时间戳？

> ID：13988830
> 
> 赞同：0
> 
> 时间：2012-12-21T10:56:58.413
> 
> 标签：python, date, datetime, time, timestamp

我无法将日期时间转换为 UTC 时间戳。

```
TS_FMT = '%Y-%m-%d %H:%M:%S'
t = time.strptime('2012-11-20 00:00:00', TS_FMT)
dt = datetime.datetime(t.tm_year, t.tm_mon, t.tm_mday, t.tm_hour, t.tm_min,
                       t.tm_sec, tzinfo=pytz.timezone('America/Los_Angeles')) 
```

此时，dt 处于“正确”状态：

```
datetime.datetime(2012, 11, 20, 0, 0, tzinfo=<DstTzInfo 'America/Los_Angeles' PST-1 day, 16:00:00 STD>) 
```

但是这样做：

```
>>> time.mktime(dt.timetuple())
1353369600.0 
```

这是 11/19/12 @ 6:00:00pm EST，这意味着时间戳是在假设 UTC 时区而不是 PST 的情况下构建的。

我该怎么做才能让时间戳尊重日期时间的时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:01:12.243

```
from datetime import datetime
import pytz
import calendar 
calendar.timegm(pytz.timezone('America/Los_Angeles').localize(datetime.strptime('2012-11-20 00:00:00', '%Y-%m-%d %H:%M:%S')).utctimetuple()) 
```

返回

```
1353398400 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:35:36.843

[time.mktime](http://docs.python.org/2/library/time.html#time.mktime)相对于系统本地时间，而不是 UTC。您可以通过将纪元计算为两个时区感知日期时间对象之间的时间差来获得正确的值。来自[http://docs.python.org/2/library/datetime.html](http://docs.python.org/2/library/datetime.html)：

> 有两种日期和时间对象：“naive”和“aware”。
> 
> 感知对象对适用的算法和政治时间调整（例如时区和夏令时信息）有足够的了解，以相对于其他感知对象定位自身。感知对象用于表示不可解释的特定时刻 [1]。
> 
> 一个天真的对象不包含足够的信息来明确地定位自己相对于其他日期/时间对象。一个简单的对象是否表示协调世界时 (UTC)、当地时间或某个其他时区的时间完全取决于程序，就像特定数字是否表示米、英里或质量取决于程序一样。朴素的对象很容易理解和使用，但代价是忽略了现实的某些方面。

这可以通过尝试以下方式来举例说明

```
>>> dt
datetime.datetime(2012, 11, 20, 0, 0, tzinfo=<DstTzInfo 'America/Los_Angeles' PST-1 day, 16:00:00 STD>)
>>> dt - datetime.datetime(1970, 1, 1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can't subtract offset-naive and offset-aware datetimes
>>> (dt - datetime.datetime(1970, 1, 1, tzinfo=pytz.timezone('America/Los_Angeles'))).total_seconds()
1353369600.0
>>> (dt - datetime.datetime(1970, 1, 1, tzinfo=pytz.timezone('UTC'))).total_seconds()
1353398400.0 
```

# delphi - 模拟键盘打字

> ID：13988831
> 
> 赞同：4
> 
> 时间：2012-12-21T10:57:00.313
> 
> 标签：delphi, delphi-xe2, twebbrowser, tchromium

如何在 TWebBrowser 或 TChromium 中模拟真人的打字。它可以是这两者中的任何一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:27:49.633

这应该足以让你开始。

```
procedure EmulateKeyPress();
var
  _Input: TInput;
begin
  _Input.Itype := INPUT_KEYBOARD;
  _Input.ki.wVk := VK_SHIFT; // $31 is the VK_1
  _Input.ki.wScan := 0;
  _Input.ki.dwFlags := 0;
  _Input.ki.time := 0;
  _Input.ki.dwExtraInfo := 0;
  if SendInput(1, _Input, SizeOf(_Input)) = 0 then
  begin
    ShowMessage('Input event was Blocked');
    Exit
  end;
  _Input.ki.dwFlags := KEYEVENTF_KEYUP;
  SendInput(1, _Input, SizeOf(_Input));
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T11:53:44.980

将需要一些适应，可能有助于进一步发展

```
procedure SendKeys(sText: String);

var
 i             : Integer;
 shift         : Boolean;
 vk, scancode   : Word;
 ch            : Char;
 c, s          : Byte;
const
 vk_keys       : Array[0..9] of Byte=(VK_HOME, VK_END, VK_UP, VK_DOWN, VK_LEFT, VK_RIGHT, VK_PRIOR, VK_NEXT, VK_INSERT, VK_DELETE);
 vk_shft       : Array[0..2] of Byte=(VK_SHIFT, VK_CONTROL, VK_MENU);
 flags         : Array[FALSE..TRUE] of Integer = (KEYEVENTF_KEYUP, 0);
 C_ALTGRS = ['\','@','~','²','³','€','{','}','[',']'];

begin
 shift:=FALSE;
 for i:=1 to Length(sText) do begin
   ch:=sText[i];
     if (ch>=#250) then begin
     s:=Ord(ch)-250;
     shift:=NOT Odd(s);
     c:=vk_shft[s shr 1];
     scancode:=MapVirtualKey(c, 0);
     Keybd_Event(c, scancode, flags[shift], 0);
   end else begin
     vk:=0;
     if (ch>=#240) then
       c:=vk_keys[Ord(ch)-240]
     else if (ch>=#228) then
       c:=Ord(ch)-116
     else if (ch<#32) then
       c:=Ord(ch)
     else begin
       vk:=VkKeyScan(ch);
       c:=LoByte(vk);
     end;

     scancode:=MapVirtualKey(c, 0);

     if (sText[i] in C_AltGRS) then Keybd_Event(VK_RMENU, MapVirtualKey(VK_RMENU,0), 0, 0)
     else if (NOT shift AND (Hi(vk)>0)) then Keybd_Event(VK_SHIFT, $2A, 0, 0 );
     Keybd_Event( c, scancode, 0, 0 );
     Keybd_Event( c, scancode, KEYEVENTF_KEYUP, 0 );
     if (sText[i] in C_AltGRS) then Keybd_Event(VK_RMENU,MapVirtualKey(VK_RMENU,0), KEYEVENTF_KEYUP, 0)
     else if (NOT shift AND (Hi(vk)>0)) then Keybd_Event(VK_SHIFT, $2A, KEYEVENTF_KEYUP, 0);

   end;
   Application.ProcessMessages;
 end;
end;

procedure TForm4.FormCreate(Sender: TObject);
begin
   WebBrowser1.Navigate('http://www.google.de');

end;

procedure TForm4.SpeedButton1Click(Sender: TObject);
begin
   SendKeys('test');
   SendKeys(#13);
end; 
```

# asp.net - 如何使用 asp.net mvc 和 jquery 实现带有“添加/删除”按钮的列表框

> ID：13988837
> 
> 赞同：0
> 
> 时间：2012-12-21T10:57:12.670
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

目前，我有以下部分视图，其中列出了所有可用用户以及每个用户旁边的“将用户添加到班级”链接以在班级中注册用户：-

```
@model IEnumerable<Elearning.Models.User>
<tr>
    <th>
        Student ID
    </th>
</tr>

@foreach (var item in Model) {
    <tr >
        <td>
            @Html.DisplayFor(modelItem => item.UserID)
        </td>
        <td id = "userclass">
              @Ajax.ActionLink("Add User to Class", "Register", "User", new { id = item.UserID, classid = ViewBag.id },
                  new AjaxOptions { 
                      InsertionMode = InsertionMode.InsertAfter,
                      HttpMethod = "POST",
                      UpdateTargetId = "incrementadd"
               })
         </td>
    </tr>
} 
```

单击“将用户添加到类”链接时将调用的操作方法是：-

```
[AcceptVerbs(HttpVerbs.Post)]
public PartialViewResult Register(string id, int classid)
{
    try
    {
       //Update code here
       User user = r.FindUser(id);
       Users_Classes uc = new Users_Classes();
       uc.AddedDate = DateTime.Now;
       uc.ClassID = classid;
       user.Users_Classes.Add(uc);
       r.Save();
       ViewBag.classid = classid;
       return PartialView("_usersearch2", uc);
    }
} 
```

上面的代码工作正常，但我发现通过单击链接添加每个用户并不容易。所以我试图添加一个带有添加/删除按钮的列表框，以根据用户选择注册和注销用户，但我不知道如何修改我的代码以使用 Jquery 来实现带有“添加/删除”按钮的列表框使我的系统更加用户友好。任何人都可以向我推荐可以帮助我开发的帮助材料或示例代码吗？此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:30:10.697

对于简单的多选，我正在使用这个 jquery 插件：

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

然后在您的视图中添加类似这样的内容到您的表单中：

```
@Html.ListBoxFor(model => model.YourCollectionProperty, MyRepository.FetchPropertySelectList().ToList()) 
```

非常简单易用。

如果您需要更多关于如何实施的帮助或建议，请告诉我。

# authentication - Windows Azure ACS 和/或 Active Directory (WAAD)

> ID：13988840
> 
> 赞同：1
> 
> 时间：2012-12-21T10:57:31.363
> 
> 标签：authentication, azure, active-directory, acs

我正在开发一个使用 windows azure 作为后端的软件。我正在考虑用户身份验证以及如何去做。Windows Azure ACS 似乎是一种处理用户身份验证的好方法，而且不必担心用户名/密码等问题。但这对我来说能走多远？在什么时候我还应该考虑使用 Windows Azure Active Directory？没有广告有什么明显的缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:09:20.630

ACS 不提供身份验证 - 它仅在不同身份验证提供程序之间进行代理。这是 WAAD 的最大区别——它们实际上存储帐户和凭据，拥有用户管理 UI 并提供身份验证服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:58:50.277

在这方面，你绝对是正确的思路。以下是我在为 Azure 开发应用程序时所做的一些观察。

ACS是要走的路，时期。在这个时代，没有理由推出自己的安全系统。让您的用户使用他们的 Gmail 或 Facebook 帐户登录，他们会因此而爱上您。现在世界上有很多人，如果他们必须创建另一个个人资料，他们根本不会使用您的网站。

ACS 使将任何 OAuth 提供程序集成到 ACS 变得非常简单，并为您提供了开箱即用的多个。ACS 甚至提供了一个自定义登录页面，已经处理了大部分繁重的工作。这个解决方案应该是您 99% 的应用程序所需要的。

就 Active Directory 而言，只有在尝试构建托管在 Azure 中的 Intranet 类型站点时才需要它。根据经验，如果您正在为希望员工使用其现有凭据和安全组访问您的系统的公司构建站点，请使用 Active Directory。如果您没有此要求，则可以放心地忽略它。

# jquery - 如何使用 jQuery 更改我的 HTML，以便每个文本 被一个？

> ID：13988841
> 
> 赞同：1
> 
> 时间：2012-12-21T10:57:38.850
> 
> 标签：jquery

我有以下 HTML：

```
<ul id="breadcrumb">
    <li>abc</li>
    <li><span>xx</span></li>
    <li>xxxxx</li>
</ul> 
```

我如何使用 jQuery 来制作它，以便每个`<li>`内容都用`<span>`. 这是我希望 HTML 的样子：

```
<ul id="breadcrumb">
    <li><span>abc</span></li>
    <li><span>xx</span></li>
    <li><span>xxxxx</span></li>
</ul> 
```

请注意。的某些内容可能`<li>`已经包含在`<span>`. 我不想对那些做任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:00:05.627

利用：

```
$('li').each(function(){
    if($(this).children('span').length == 0){
        $(this).wrapInner('<span/>');
    }
}) 
```

在这里检查小提琴：http: [//jsfiddle.net/9S4tH/](http://jsfiddle.net/9S4tH/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T11:00:41.120

这个怎么样：

```
//iterate through each <li> child of #breadcrumb
$("#breadcrumb > li").each(function() {
   //select only those li who doesn't have span child
   if($(this).children('span').length < 1) {
        //wrap it with span
        $(this).html("<span>" + $(this).html() + "</span>");

   }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T11:01:59.510

尝试这个：

```
$("li").each(function() {
    if (!$('span', this).length) {
        $(this).wrapInner('<span></span>');
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/k4fKX/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:08:56.100

使用 WrapInner() jquery 方法。

```
 $(this).wrapInner('<span></span>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T11:11:55.503

也许更优雅一点，试试这个：

```
$("#breadcrumb li:not(:has(span))").wrapInner("<span>");​​​​​​​ 
```

[http://jsfiddle.net/39HC4/1/](http://jsfiddle.net/39HC4/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T11:18:46.793

```
$('ul li:not(:has(span))').each(function(){
   $(this).html('<span>'+$(this).html()+'</span>');
  }); 
```

[小提琴](http://jsfiddle.net/wpH2U/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T11:00:18.920

像这样的东西怎么样，虽然我承认我没有测试过：

```
$('#breadcrumb li')each(function() {
    $(this).html("<span>" + $(this).html() + "</span>");
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T11:01:05.687

```
$(document).ready(function() {
    $('#breadcrumb li').each(function() {
        $(this).html($('<span />').html($(this).html()));
    });
}); 
```

**这个怎么运作：**

对于面包屑中的每个li，将li的html设置为一个span元素，并将span的html内容设置为li的原始html内容。

**笔记：**

jQuery 建议在创建新元素时，您可以这样做...

```
$('<span />') 
```

而不是像这样附加文字......

```
'<span>' + text + '</span>' 
```

因为后者在某些情况下可能会产生不希望的结果。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-21T11:01:59.363

尝试这样的事情：

```
$("#breadcrumb li").each(function(item) {
    // $(this) - its your <li> element
    $(this).html("<span>" + $(this).text() + "</span>");    
}); 
```

# java - 如何从 InputStremReader 读取整数

> ID：13988846
> 
> 赞同：0
> 
> 时间：2012-12-21T10:58:06.753
> 
> 标签：java, char, int, inputstreamreader

我是初学者...请多多包涵:)

这是一段代码，据说可以读取数组中的 10 个整数。char 中的`InputStreamReader`读取（即 java Docs 所说的）如何将 char 转换为 int 以保存在数组中？

```
int[] array = new int[10];
System.out.println("Please enter 10 integers. ");
for(int x=1; x <11; x++){
    InputStreamReader keyboard = new InputStreamReader(System.in);
    // Change char into int   
    array[x] = keyboard;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:00:00.310

尝试这个 -

```
Scanner sc = new Scanner(System.in);
int[] array = new int[10];
for(int x=0; x <10; x++){
    array[x] = sc.nextInt();
} 
```

`Scanner#nextInt`将输入的下一个标记扫描为`int`. 并抛出

```
InputMismatchException - if the next token does not match the Integer regular expression, or is out of range
NoSuchElementException - if input is exhausted
IllegalStateException - if this scanner is closed 
```

# ruby-on-rails - 在 RoR 数据库中存储自定义历史音频元数据

> ID：13988847
> 
> 赞同：1
> 
> 时间：2012-12-21T10:58:08.643
> 
> 标签：ruby-on-rails, database, activerecord

我的 RoR 3.2 站点是历史 mp3 录音的存档，必须通过表格（由我）输入/上传，然后可以搜索和下载。我需要存储关于 mp3 的元数据*，看起来像这样，在大约 35 个其他类似深奥的表单条目中：

> 在 WesternHistoricalCatalogue 中，该 mp3 可以在第 2,3 和 6 页上找到，在 NorthernHistoricalCatalogue 中的第 1 和 5 页上可以找到。

这似乎需要一些相当复杂的 RoR 模型。例如，我似乎需要创建一个`Page`模型，该模型具有与我的模型具有 HABTM 关联的`Catalogue`模型的 HABTM 关联`MP3`。

结果是各种模型，例如“页面”或“年份”，只是为了处理多个条目。我的表格也将很复杂。

有没有更好的办法？

-- *使用术语“元数据”作为文档图书馆员可能（或 iTunes 使用），而不是数据库开发人员在 SO 上用作有关事务和流程的信息。

# wpf - 具有动态图标的 wpf 扩展器样式

> ID：13988850
> 
> 赞同：1
> 
> 时间：2012-12-21T10:58:16.403
> 
> 标签：wpf, styles, blend, expander

我正在尝试使用混合为扩展器控件创建样式。我需要以应该动态的样式定义一个图标。实际上，我只有一种样式可以附加到多个扩展器上，并且每个扩展器都应该能够定义他的图标（源属性）。有人可以帮我解决这个问题！在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:17:26.040

我找到了解决方案。而不是将 Header 定义为属性：

```
<Expander Header="Expander Title" >
...
</Expander> 
```

我们必须将 Header 定义为一个元素：

```
<Expander>
<Expander.Header>
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="20" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="50" />
      <ColumnDefinition Width="50" />
    </Grid.ColumnDefinitions>

    <Image Grid.Row="0" Grid.Column="0" Width="15" Source="Resources/Images/image.png"/>
    <TextBlock Grid.Row="0" Grid.Column="1"><Run Language="pt-pt" Text="ExpanderTitle"/></TextBlock>
  </Grid>
 </Expander.Header> 
```

...

# c# - XNA - 自动导入多个文件和文件夹并设置它们的属性

> ID：13988853
> 
> 赞同：0
> 
> 时间：2012-12-21T10:58:33.500
> 
> 标签：c#, visual-studio-2010, xna, content-pipeline

我现在正在开发一个游戏项目，其中游戏的每个级别都由一个显示物理布局的文本文件表示（类似于 xna 平台游戏示例），相应的 xml 文件包含有关级别的其余信息。每个文本文件和 xml 文件都放在以关卡 ID 命名的自己的文件夹中。

不幸的是，这意味着我需要手动创建每个文件夹，然后导入这两个文件，然后将这两个文件的构建操作设置为“无”，并将复制到输出目录设置为“如果较新则复制”。

有没有办法为大量文件/文件夹自动执行此操作？还是我应该尝试不同的系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:54:34.537

如果您愿意为您的文件提供自定义扩展名的想法，您总是可以为它们创建自定义内容导入器。当您将适当类型的文件添加到内容项目时，Visual Studio 将自动将它们与其关联的自定义导入器和处理器关联起来。

[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/bb447754%28v=xnagamestudio.20%29.aspx)提供了有关如何编写自定义内容导入器和处理器的详细信息。

# google-app-engine - Estimating google app engine billing for multiple users

> ID：13988854
> 
> 赞同：1
> 
> 时间：2012-12-21T10:58:33.197
> 
> 标签：google-app-engine

I'm the sole user of a my google app engine app. Currently I use approx 25% of my front end instance hours per day. Does this seem excessive ? Reason I'm asking is that if I begin to allow other user to use my app I will quickly exceed the daily quota ?

So if I add 3 more users that use exactly the same functionality I will use 100% of my front end instance hours. Is it this simple to calculate the cost of allowing multiple users to use my app ? If not how can I estimate the frontend Instance hours when app becomes mult-user based on current usage for one user?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:11:41.203

You get enough front end hours to run your application 24/7\. Even if you add 3 more users you'll still only be at 100% which is fine. You can't use "more" then 100% with a single instance plus you in fact get 28 instance hours a day free, not 24\.

If you were to allow more instances to spin up then of course you can go over 100% (i.e. over the free quota).

To know the per user cost you can start [with appstats.](https://developers.google.com/appengine/docs/python/tools/appstats)

The per-request cost can be calculated. Also you can use the header X-AppEngine-Estimated-CPM-US-Dollars as described in this [question](https://stackoverflow.com/questions/10518225/usage-of-x-appengine-estimated-cpm-us-dollars-in-appengine) and the docs are [here.](https://developers.google.com/appengine/docs/python/runtime)

There is no way to answer questions like "does 25% hour usage per day per user seem reasonable" as it depends entirely on what your app does and how efficiently you have created it.

# java - 如何在图像上附加文本时添加高度元素

> ID：13988855
> 
> 赞同：1
> 
> 时间：2012-12-21T10:58:33.487
> 
> 标签：java, image, text, graphics, awt

我正在寻找我们是否可以在给定的[Example](https://stackoverflow.com/questions/400566/full-justification-with-a-java-graphics-drawstring-replacement)中添加 Height 元素。

这样我就可以指定

```
public void drawString(Graphics g, String s, int x, int y, int width,int height) 
```

现在，如果我的文本超过高度，它将与下一个文本重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:18:21.147

我没有对此进行测试，但这可能会帮助您解决问题..

```
public void drawString(Graphics g, String s, int x, int y, int width, int height) {
    // FontMetrics gives us information about the width,
    // height, etc. of the current Graphics object's Font.
    FontMetrics fm = g.getFontMetrics();

    int lineHeight = fm.getHeight();

    int curX = x;
    int curY = y;
    int totalHeight = 0;

    String[] words = s.split(" ");

    String word = "";
    // end of words array wasn't reached and still some space left
    for(int i = 0; i < words.length && totalHeight <= height; i++) {

        // Find out thw width of the word.
        int wordWidth = fm.stringWidth(word + " ");

        // If text exceeds the width, then move to next line.
        if (curX + wordWidth >= x + width) {
            curY += lineHeight;
            totalHeight += lineHeight;
            curX = x;
        }

        g.drawString(word, curX, curY);

        // Move over to the right for next word.
        curX += wordWidth;
    }
} 
```

# database-design - 在云端存储链表（网络连接断断续续时）

> ID：13988856
> 
> 赞同：1
> 
> 时间：2012-12-21T10:58:34.763
> 
> 标签：database-design, data-structures, linked-list, cloud-storage

我有一个看起来像这样的数据结构-

```
------
|List| => Entity1 -> Entity2 -> Entity3 -> Entity4 -> NULL
------ 
```

这个想法是让用户在移动设备上创建一个`List`具有有序集合的`Entity`s 并将其保存在服务器上。

用户可以对 the`List`和`Entity`s 进行的操作是

*   添加实体
*   删除实体
*   删除一个列表（这意味着遍历整个列表并删除一个实体）
*   插入实体
*   移动实体

在那里的服务器上，可以有数百个这样的列表。

问题是这样的链表应该如何存储在云端。我应该按照本地的方式来做吗，那就是

1.  在服务器上创建列表的头部
2.  使用指向列表头部的指针获取响应
3.  在服务器上创建实体
4.  将指向该实体的指针添加到列表的头部作为起始实体

问题是每次创建新列表时，都会引入一些同步问题。基本上，假设步骤 1-3 完成后移动连接丢失，则实体丢失并且无法从链表中检索。

当一个过程不能一次性完成时，有没有更好的方法来防止这种损失？

# android - 相当于 layout_weight 的高度

> ID：13988857
> 
> 赞同：3
> 
> 时间：2012-12-21T10:58:36.553
> 
> 标签：android, android-linearlayout

是否有与上述 Iayout-weight 等效的命令来动态定义 LinearLayout 内多个 View 的高度？我想要一个带有orientation="vertical" 的LinearLayout，然后将该高度拆分为定义的比率，但我找不到任何命令。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T11:00:11.760

您不需要等效于`layout-weight`，只需使用它即可。将您的宽度设置为您想要的值，将高度设置为 0dp，并将重量设置为与您想要的成比例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T11:02:46.250

每当你使用`layout-weight`. 如果你给出宽度，`0dp`那么它的重量适用于宽度。身高也一样

# forms - Play Framework 2.1 - Scala - 在代码中生成表单

> ID：13988867
> 
> 赞同：1
> 
> 时间：2012-12-21T10:59:25.583
> 
> 标签：forms, playframework-2.0, template-engine, playframework-2.1

我想在代码中创建表单，而不是在模板中，这样我就可以只将接口实现传递给模板，然后调用它的方法，如`formHtml`. 但是，当尝试使用`inputText`源代码中的表单构建器时，我收到一个错误，即某些隐式不可用：

> 方法应用的参数不足：（隐式处理程序：views.html.helper.FieldConstructor，隐式语言：play.api.i18n.Lang）对象inputText中的play.api.templates.Html。未指定的值参数处理程序，lang。

我该如何克服呢？

# c# - XAML 的动态编译 - Linq 错误

> ID：13988881
> 
> 赞同：1
> 
> 时间：2012-12-21T11:00:07.127
> 
> 标签：c#, linq, workflow-foundation

我有一个 XAML 作为字符串，我编译然后执行。

```
DynamicActivity workflowActivity = (DynamicActivity)ActivityXamlServices.Load(new StringReader(xaml)); 
```

这个工作流有一个 Person 对象（类型：Namespace Workflow.Model.Person）作为输入，所以我传递参数并执行它。

```
Dictionary<String,Object> parameters = new Dictionary<String,Object>();

Workflow.Model.Person person = new Workflow.Model.Person();
person.FirstName = "John";

parameters["Person"] = person;

WorkflowInvoker.Invoke(workflowActivity, parameters); 
```

我得到以下异常：

[System.ArgumentException] = {“没有为 Workflow.Model.Person 类型定义属性‘System.String FirstName’”}

System.Linq.Expressions.Expression.Property(Expression expression, PropertyInfo property) 引发错误。

我尝试了很多事情都没有成功。如果我在工作流中删除属性 FirstName 的访问权限，它会正确执行。根据建议，我添加了引用的导入，但它不起作用：

```
VisualBasicSettings.Default.ImportReferences.Add(new VisualBasicImportReference()
{
    Assembly = typeof(Person).Assembly.FullName,
    Import = typeof(Person).Namespace
}); 
```

任何输入表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:30:26.127

I found out the problem. The DLL containing the class Person was loaded two times into the AppDomain. So the compiled XAML was referencing a diferent instance of the same type and as such throwing this error.

# perl - Perl解析字符串末尾的空白字符

> ID：13988885
> 
> 赞同：1
> 
> 时间：2012-12-21T11:00:14.083
> 
> 标签：perl, parsing

```
MMAPI_CLOCK_OUTPUTS = 1,        /*clock outputs system*/ 
```

用这个解析上面的内容：

```
$TheLine =~ /\s*(.*)\s*=\s*(.*),\s*\/\*(.*)\*\//) 
```

变量`$1`末尾包含空格，例如 we have`"MMAPI_CLOCK_OUTPUTS "`和 not `"MMAPI_CLOCK_OUTPUTS"`。为什么这些空间也会被捕获？我认为应该使用解析器代码将它们删除

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T11:09:19.690

正则表达式捕获`(.*)`是一个*贪婪*匹配，这意味着它将匹配尽可能多的字符。由于以下内容`\s*`可以是零长度，因此*包含空格*的前面字符串包含在捕获中。

通过添加问号将其更改为非贪婪 `(.*?)`模式，并使用不同的分隔符以避免必须转义模式中的斜杠

```
$TheLine =~ m<\s*(.*?)\s*=\s*(.*),\s*/\*(.*)\*/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:44:41.640

TIMTOWTDI，或“我有一段时间没用过[Regexp::Grammars](http://p3rl.org/Regexp%3a%3aGrammars) ”

```
#!/usr/bin/env perl

use strict;
use warnings;

use Regexp::Grammars;
my $parser = qr{
  <nocontext:>

  <Definitions>

  <rule: Definitions>   <[Definition]>*
  <rule: Definition>    <Variable> = <Value>
  <rule: Variable>  <Word>
  <rule: Value>     <Word>
  <rule: Word>      [\w\d_]+
}xms;

my $str = 'MMAPI_CLOCK_OUTPUTS = 1,        /*clock outputs system*/';

$str =~ $parser;

# see the whole matched structure
use Data::Dumper;
print Dumper \%/; 

# or walk the structure for results
for my $def (@{ $/{Definitions}{Definition} }) {
  print $def->{Variable}{Word} . ' => ' . $def->{Value}{Word} . "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:08:24.367

如果符号前面的单词`=`没有空格，请更改`(.*)`为`(\S+)`

```
$TheLine =~ /\s*(\S+)\s*=\s*(.*),\s*\/\*(.*)\*\//)
           here __^ 
```

# nhibernate - Fluent NHibernate 参考和遗留数据库

> ID：13988890
> 
> 赞同：0
> 
> 时间：2012-12-21T11:00:27.470
> 
> 标签：nhibernate, reference, fluent, legacy

我有一个实体

```
public class classA
{
public virtual classAId id {get;set;}
} 
```

它有一个compositeId

```
public class classAId 
{
public virtual int a {get;set;}
public virtual int b {get;set;}
} 
```

B 类引用 A 类

```
public class classB
{
public virtual classA ref {get;set;}
} 
```

classB 的数据库表只有**一**列用于引用 ref，另一列（用于引用的复合 ID，即 classA）是从程序中检索的，并且没有持久化到数据库中，我也不能将其持久化到数据库中（通常它是 0 例如）。

那么如何在 classB 中实现引用，以便它正确检索和保存 classA 的实例，而无需在数据库中保留附加列？

**编辑：**或者我可以先在有问题的列上过滤classA，以便classA只有一个1列键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:12:21.803

在 xml 中，您可以使用公式

```
<many-to-one>
    <column name="a" />
    <formula text="('foo')" />
</many-to-one> 
```

# css - 为 IE 格式化有序列表

> ID：13988893
> 
> 赞同：0
> 
> 时间：2012-12-21T11:00:36.190
> 
> 标签：css, internet-explorer, list

我有一个在最新版本的 Chrome、Firefox 和 Opera 中正确显示的列表，但在 IE 版本 8、9 和 10 中，数字和`<div>`.

我该如何修复这个？`list-style-position`必须是`inside`，因为我需要数字和文字下的背景图片。绝对定位不是很好的解决方案，因为文本可能很长。

```
<style>
  ol {
    list-style-position: inside;
    background-color: silver;
    font-size: 180%;
    padding: 0px;
  }
  li {
    border: solid 1px;
  }
  div {
    font-size: 50%;
    display: inline-block;
  }
</style>

<ol>
      <li><div>aaa</div></li>
      <li><div>bbb</div></li>
</ol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:45:12.607

把这个写在你的身体标签里

```
 <!--[if IE]>
        <style>
              ol {
                list-style-position: inside;
                background-color: silver;
                font-size: 180%;
               margin-left:-0.5%;
              }
              li {
                border: solid 1px;
               position:relative;
              }
              div {
                font-size: 50%;
                display: inline-block;
                position:absolute;
                padding-top: 8%;
                padding-left: 12%;
              }

        </style>
           <![endif]--> 
```

# javascript - 使用 Flickr API

> ID：13988896
> 
> 赞同：1
> 
> 时间：2012-12-21T11:00:51.683
> 
> 标签：javascript, jsonp

所以我正在使用 Flickr API。我想显示拍摄照片的人的用户名，看起来像nobody@flickr.com (theNameOfTheUser)。

问题是我只想显示实际的用户名并排除电子邮件。我怎样才能做到这一点？

[www.johancarleborn.se](http://www.johancarleborn.se)明白我的意思。

```
newPic.innerHTML = "<div class='pic-container'> <p class='title'>" + result.items[i].title + "</p> <a href="+ result.items[i].link +" >  <img src=\'" + result.items[i].media.m + "\'> </a></div><p class='author'>" + result.items[i].author[19] + "</p><p class='published'>" + result.items[i].published + "</p>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:36:33.183

您可以使用正则表达式，例如：

```
result.items[i].author[19].match(/\(([^)]*)\)/)[1] 
```

# iphone - 如何在 Xcode 中释放链表

> ID：13988897
> 
> 赞同：1
> 
> 时间：2012-12-21T11:01:03.017
> 
> 标签：iphone, xcode, list, linked-list

我有这样的结构

```
struct list
{
    struct list *next;

    int temp;
}; 
```

我用下面的方法来释放

…… …… ……

```
// free linked list
struct list *head_list = NULL;
struct list *current_list = NULL;
struct list *prev_list = NULL;

current_list = head_list;
while (current_file_info_arr != NULL)
{
    prev_list = current_list;
    current_list = current_list->next;
    free(prev_list);
} 
```

我收到警告

```
Memory error
Use of memory after it is freed 
```

有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:04:07.190

我想你只需要更换

```
while (current_file_info_arr != NULL) 
```

和

```
while (current_list != NULL) 
```

但这是假设您实际上有一个列表 - 之前已分配/构建 - 并`head_list`指向它的开头。如果`head_list`是`NULL`，就像在您的代码段中一样：

```
struct list *head_list = NULL; 
```

那么就`Memory error`不足为奇了。您正在尝试 free `NULL`，这确实是一个错误。

# android - 如何在标记（BalloonItemizedOverlay）下显示气球？

> ID：13988908
> 
> 赞同：2
> 
> 时间：2012-12-21T11:01:19.717
> 
> 标签：android, google-maps, balloon

我使用 BalloonItemizedOverlay。如何在标记下显示气球？（默认情况下，它来自标记的中心。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:35:17.883

如果你正在使用[这个，](https://github.com/jgilfelt/android-mapviewballoons)你有方法

```
public void setBalloonBottomOffset(int pixels) 
```

*设置标记与信息气球底部之间的水平距离。默认值为 0，它适用于中心有界标记。如果您的标记是中心底部有界的，请在添加叠加项目之前调用它，以确保气球正好悬停在标记上方。*

因此，如果您有一个底部有通常 V 的标记，定义了它与地图接触的点，您需要在将其添加到叠加层之前将其高度设置为一半的偏移量。

例子：

```
 -----    ^
|     |   |
|     |  20 px  of height, you need to do marker.setBalloonBottomOffset(-10)
 -- --    |
   V      v 
```

# java - 将 SWT 表数据导出到 Excel 电子表格

> ID：13988909
> 
> 赞同：3
> 
> 时间：2012-12-21T11:01:23.803
> 
> 标签：java, eclipse-rcp

我的视图上有一个带有五列的 SWT 表。

我想要做的是将该表中的数据导出为 Excel 电子表格。我想发生以下情况。

1.  表格中的列标题应出现在电子表格中。

2.  所有数据都应该有我选择的字体。

3.  所有电子表格单元格都应具有我选择的宽度。

4.  所有单元格格式都应为“文本”。

有人可以指出我正确的方向吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:12:11.900

我使用 Apache POI 将 TableViewer 内容转储到 Excel 工作簿中，结果很好。

下面是一个创建包含给定 TableViewer 内容的 XSSFWorkbook 的示例方法。它包含样式单元格和自动调整列宽的示例。

请注意，我的列名位于一个名为 tableColumnNames 的字符串数组中，因为它们在我的代码中的其他地方使用，并且仅使用该数组很方便，但您也可以从 TableViewer 中获取它们。

```
private XSSFWorkbook createWorkbookFromTable(TableViewer table) {
    // create a workbook
    XSSFWorkbook wb = new XSSFWorkbook();

    // add a worksheet
    XSSFSheet sheet = wb.createSheet("My Table Data");

    // shade the background of the header row
    XSSFCellStyle headerStyle = wb.createCellStyle();
    headerStyle.setFillForegroundColor(IndexedColors.LEMON_CHIFFON.getIndex());
    headerStyle.setFillPattern(CellStyle.SOLID_FOREGROUND);
    headerStyle.setBorderTop(CellStyle.BORDER_THIN);
    headerStyle.setBorderBottom(CellStyle.BORDER_THIN);
    headerStyle.setBorderLeft(CellStyle.BORDER_THIN);
    headerStyle.setBorderRight(CellStyle.BORDER_THIN);
    headerStyle.setAlignment(HorizontalAlignment.CENTER);

    // add header row
    Table table = table.getTable();
    TableColumn[] columns = table.getColumns();
    int rowIndex = 0;
    int cellIndex = 0;
    XSSFRow header = sheet.createRow((short) rowIndex++);
    for (TableColumn column : columns) {
        String columnName = column.getText();
        XSSFCell cell = header.createCell(cellIndex++);
        cell.setCellValue(column.getText());
        cell.setCellStyle(headerStyle);
    }

    // add data rows
    TableItem[] items = table.getTable().getItems();
    for (TableItem item : items) {
        // create a new row
        XSSFRow row = sheet.createRow((short) rowIndex++);
        cellIndex = 0;

        for (int i = 0; i < columns.length; i++) {
            // create a new cell
            String columnName = tableColumnNames[i];
            XSSFCell cell = row.createCell(cellIndex++);

            // set the horizontal alignment (default to RIGHT)
            XSSFCellStyle cellStyle = wb.createCellStyle();
            ha = HorizontalAlignment.RIGHT;
            cellStyle.setAlignment(ha);
            cell.setCellStyle(cellStyle);

            // set the cell's value
            String text = item.getText(i);
            cell.setCellValue(text);
        }
    }

    // autofit the columns
    for (int i = 0; i < columns.length; i++) {
        sheet.autoSizeColumn((short) i);
    }

    return wb;
} 
```

获得 XSSFWorkbook 后，可以将其转储到如下文件中：

```
public void dumpWorkbookToAFile(XSSFWorkbook wb, String filename) {
    try {
        FileOutputStream fos = new FileOutputStream(filename);
        wb.write(fos);
        fos.close();
        MessageDialog.openInformation(shell,
            "Save Workbook Successful",
            "Workbook saved to the file:\n\n" + filename);
    } catch (IOException ioe) {
        ioe.printStackTrace();
        String msg = ioe.getMessage();
        MessageDialog.openError(shell, 
            "Save Workbook Failed",
            "Could not save workbook to the file:\n\n" + msg);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:11:07.410

我会使用 OpenOffice SDK 以编程方式创建电子表格。但是，它必须安装并且服务必须在用户使用视图时运行。我不知道你的情况是否可以接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:24:51.633

您可以使用这些框架中的任何一个来使用 Java 应用程序创建 Excel 工作表，具体取决于您的要求和应用程序的复杂性。1\. [http://poi.apache.org/spreadsheet/index.html](http://poi.apache.org/spreadsheet/index.html) 2\. [http://extentech.com/estore/product_detail.jsp?product_group_id=1](http://extentech.com/estore/product_detail.jsp?product_group_id=1)

# c++ - 为 qstring 导出结果设置编码

> ID：13988914
> 
> 赞同：0
> 
> 时间：2012-12-21T11:01:57.977
> 
> 标签：c++, qt, dll, dynamic-library

如何从库函数中导出 UTF8 编码字符串？

```
 extern "C" __declspec(dllexport) QString Test()
{
    QString tmp = "日本";
    return tmp;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:25:03.953

```
QTextCodec::setCodecForCStrings( QTextCodec::codecForName("utf8") ); 
```

帮助。

# iphone - 浮点函数返回值

> ID：13988919
> 
> 赞同：0
> 
> 时间：2012-12-21T11:02:14.423
> 
> 标签：iphone, objective-c, ios, c

我正在编写我的对象第一个应用程序，但我不明白为什么编译器会给出我的错误。（使用 int 代码工作......）

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        // 1st var
        NSLog(@"Hi, %f World!", res(1.0f, 2.0f, 3.0f));

    }
    return 0;
}
float res (float a, float b, float c)
{
    float res=a+b+c;
    return res;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:04:10.617

尝试`res`在 main 之前声明，以便编译器在`main`. 如果你不事先声明它，会发生什么：

1.  编译器第一次遇到`res`body `main`；

2.  它构成了一个“隐式声明” `res`，基于它可以从`res`被称为 inside的方式推断出来的内容`main`；`int`根据 C 约定，这意味着返回类型；

3.  当`res`稍后找到真实的时，推断的签名（即返回类型）与真实的不匹配会触发编译错误。

要解决这个问题：

```
float res (float a, float b, float c);

int main(int argc, const char * argv[])
{
  @autoreleasepool {

    // 1st var
    NSLog(@"Hi, %f World!", res(1.0f, 2.0f, 3.0f));
  }
  return 0;
}

float res (float a, float b, float c)
{
  float res=a+b+c;
  return res;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:06:56.850

你只是忘记声明函数，只是把

```
float res (float a, float b, float c); 
```

在你之前`int main`

希望对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:06:34.127

尝试：

```
#import <Foundation/Foundation.h>

float res (float a, float b, float c)
{
    float res=a+b+c;
    return res;
}

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        // 1st var
        NSLog(@"Hi, %f World!", res(1.0f, 2.0f, 3.0f));

    }
    return 0;
} 
```

# python - 从数据包 ISO/OSI 层过滤 PCAP 文件

> ID：13988927
> 
> 赞同：0
> 
> 时间：2012-12-21T11:02:57.280
> 
> 标签：python, pcap, scapy, application-layer

我需要将 PCAP 文件拆分为两个不同的文件：第一个文件应包含所有（且仅）指向 ISO/OSI 模型的应用层的数据包，而第二个文件应包含所有其他文件。

我正在使用 Scapy 应用过滤器：

```
pkts = PcapReader(infile)
applayerpkts = (pkt for pkt in pkts if pkt.haslayer(Raw))
lowlayerspkts = (pkt for pkt in pkts if not pkt.haslayer(Raw))
wrpcap(applayerfilename, applayerpkts)
wrpcap(lowlayersfilename, lowlayerspkts) 
```

using`pkt.haslayer(Raw)`方法，因为该层应仅包含在定向到应用程序层的数据包中。

有什么问题？我注意到`applayerfilename`+的总和`lowlayersfilename`（以文件大小计）与`infile`.

报告的方法在计算上也很昂贵（我有一个大约 1.5GB 的 PCAP 列表），因为`infile`它被解析了两次。

我更喜欢应用不同的过滤器，解析一次输入 PCAP。我可以使用`PcapReader`该类并手动解析 PCAP，但我不知道如何生成 PCAP 以传递给该`wrpcap(...)`方法。

编辑：我也尝试过这个解决方案：

```
pkts = PcapReader(infile)
app_pkts = []
low_pkts = []
for p in pkts:
    if p.haslayer(Raw):
        app_pkts.append(p)
    else:
        low_pkts.append(p)
wrpcap(applayerfilename, app_pkts)
wrpcap(lowlayersfilename, low_pkts) 
```

但它不起作用，因为由于我的输入 PCAP 的大小，它消耗了太多的内存......

是否`append_to_pcap(filename, packet)`存在类似功能（`wrpcap(...)`功能不能作为附加功能）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:48:33.623

我（至少显然）以这种方式解决了：

```
pkts = PcapReader(infile)

app_writer = PcapWriter(applayerfilename, append=True)
low_writer = PcapWriter(lowlayersfilename, append=True)
for p in pkts:
    if p.haslayer(Raw):
        app_writer.write(p)
    else:
        low_writer.write(p)
app_writer.close()
low_writer.close() 
```

# virtual-machine - 使用脚本/应用程序处理 vmstat 日志文件

> ID：13988930
> 
> 赞同：3
> 
> 时间：2012-12-21T11:03:07.790
> 
> 标签：virtual-machine, solaris, sunos

我想监控 solaris 10 服务器的性能指标，例如平均内存和 cpu 使用率。目前我已经设置了一个脚本来每 x 秒运行一次 vmstat 并记录到一个文件中。

```
 vmstat x >> perf.log  

  kthr      memory            page            disk          faults      cpu
  r b w   swap  free  re  mf pi po fr de sr f0 s0 s1 s2   in   sy   cs us sy id
  2 0 104 15060736 1126784 828 3735 43 51 55 0 3991 -0 18 -1 65 6707 24478 14096 14 12 74
  0 0 93 13532024 292920 28 309 0 0 0  0  0  0  0  0 34 4366 4388 4019  4  4 92
  2 0 93 13534872 294296 1 12 0  0  0  0  0  0 19  0 50 2688 3834 3630  4  5 91
  0 0 93 13533704 293100 1 3  0  0  0  0  0  0  0  0 20 2624 3437 3147  3  3 94
  0 0 93 13541768 296136 16 349 0 0 0  0  0  0  1  0 44 2746 2936 3932  6  7 88
  1 0 93 13535512 291116 1 4  0  0  0  0  0  0  0  0 28 2637 3736 3317  4  2 93
  1 0 93 13516860 279432 45 361 0 0 0  0  0  0  0  0 44 3526 7851 5398  7  4 89
  0 0 93 13531864 288964 15 61 0 0  0  0  0  0  0  0 32 2798 3944 3500  3  3 94
  1 0 93 13530516 287520 1 313 0 0  0  0  0  0 12  0 88 3527 7962 5280  7  5 88 
```

现在我需要分析这个日志文件并计算平均内存和 CPU 使用率。有没有可用的工具，甚至有更好的方法来做到这一点。

编辑：找到一个工具[https://github.com/jsargiot/vmstatly](https://github.com/jsargiot/vmstatly)

# javascript - Flexslider 不会在 IE7 中滚动

> ID：13988932
> 
> 赞同：0
> 
> 时间：2012-12-21T11:03:40.933
> 
> 标签：javascript, html, css, fixed, flexslider

我有一个问题，即`flexslider`在 IE7 中保持静态。所有其他浏览器都很好。

```
<div class="flexslider">
   <ul class="slides">
      <li><img src="images/banners/design-227.jpg"></li>
   </ul>
</div> 
```

它似乎`div`是被卡住的 flexviewport。我看不到 CSS 固定的任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:07:14.640

我收到一个 js 错误：

SCRIPT1028：预期标识符、字符串或数字 slider.options.js?m62tl1，第 35 行字符 5

在“slideToStart：0”行中：

```
$('article.flexible-slideshow .flexslider').flexslider({
      animation: "fade",
      slideshowSpeed: 6000,
      slideToStart: 0,
    }); 
```

我删除了最后一个逗号，一切都开始正常工作。

尝试查看 IE 控制台，注意错误。删除之前的每个逗号 `})`；

# java - 通过 jdbc 禁用 postgresql 约束

> ID：13988934
> 
> 赞同：-1
> 
> 时间：2012-12-21T11:03:48.497
> 
> 标签：java, postgresql, jdbc, constraints

我正在尝试使用 JDBC 将数据插入数据库，这样做时我必须禁用约束 - 检查、非空、外键。

```
alter table user_table disable trigger all; 
```

我试过上面的查询它不起作用。

我需要一种在程序启动时禁用所有约束的方法，当事务完成时，我需要重新启用约束。

我正在使用 JDBC4 和 Postgresql 9.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:15:04.673

[PostgreSQL](http://www.postgresql.org/docs/current/interactive/sql-altertable.html)的文档对此部分说`ALL`：

> 禁用或启用属于该表的所有触发器。（如果任何触发器是内部生成的约束触发器，例如用于实现外键约束或可延迟唯一性和排除约束的触发器，则这需要**超级用户权限。）**

所以我**猜**你用来插入数据的用户不是超级用户，因为你在你的问题中列出了外键检查。

但是：除非您的要求**非常**特殊，否则我认为您走错了路：

一起禁用检查/触发器是一把非常大的枪，它很容易破坏您的数据一致性。而且由于您想在交易结束时重新启用检查，因此您似乎不想这样做。

如果你能在一开始就摆脱可延迟的约束，那就更好了。然后您可以使用自动绑定到事务范围的[SET CONSTRAINTS命令。](http://www.postgresql.org/docs/current/interactive/sql-set-constraints.html)您*可以确定*您的一致性没有风险。还查找有关可延迟触发器的[CREATE TABLE文档。](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)

# java - 返回值 Mybatis

> ID：13988935
> 
> 赞同：8
> 
> 时间：2012-12-21T11:03:48.320
> 
> 标签：java, oracle, return, mybatis

我正在尝试从 Oracle 11g 中的存储函数中获取返回值（整数值）。

该函数将输入数字加 10：

```
FUNCTION ADD_TEN(INPUT IN NUMBER) RETURN NUMBER IS 
BEGIN 
    RETURN INPUT + 10; 
END; 
```

在我的映射器界面中，我有一行：

```
Integer add(Integer input); 
```

并在 XML 文件中

```
<select id="add" statementType="CALLABLE" resultType='java.lang.Integer'>
    {#{output,mode=OUT,jdbcType=NUMERIC,javaType=Integer} = call test_pkg.ADD_TEN( 
    #{input,jdbcType=NUMERIC}) } 
</select>` 
```

对该方法的调用如下：

```
Integer sum = mapper.add(45); 
```

但我收到以下错误：

```
Could not set property 'output' of 'class java.lang.Integer' with value '55' Cause: org.apache.ibatis.reflection.ReflectionException: There is no setter for property named 'output' in 'class java.lang.Integer' 
```

我究竟做错了什么？我真的迷失了这个...

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:12:53.073

为什么你没有像这样定义 parameterType 和 resultType ：

```
parameterType="int" resultType="int" 
```

删除特定的输出并尝试使其像这样：

```
<select id="add" parameterType="int" resultType="int" statementType="CALLABLE">
    { CALL ADD_TEN(#{input, mode=IN, jdbcType=INTEGER})}
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:07:36.070

解决方案：MyBatis 返回类型必须为`void`. 我正在寻找的结果参数在函数/过程返回的 ResultMap 中。

问候。

# php - 单击复选框时隐藏表格行

> ID：13988936
> 
> 赞同：0
> 
> 时间：2012-12-21T11:03:49.987
> 
> 标签：php, javascript, jquery, html, css

我有这个表，并使用这个 php 代码获取行，当我单击此复选框时，会显示一条警报消息，如果用户单击该警报的确定按钮，那么我想隐藏该特定行。![复选框如图所示  ](../Images/38749d5c09c998e78f36e5537b1cdc8a.png)

```
<table>
    <tr>
        <th style="height: 25px">NAME</th>
        <th style="height: 25px">EMAIL</th>
        <th style="height: 25px">CELL NO</th>
        <th style="height: 25px">CITY</th>                   
        <th>Hide Candidate</th>
    </tr>
</table>

<?php
while($data_set1 = mysql_fetch_array($result))
{
    echo "<tr>";
    echo "<td>{$data_set1['ename']}</td>";
    echo "<td>{$data_set1['eemail']}</td>";
    echo "<td>{$data_set1['ecell']}</td>";
    echo "<td>{$data_set1['ecity']}</td>";

    echo "<td><input type=\"checkbox\" name=\"hide_cand\" id=\"hide_cand\" onclick=\"return confirm('This action can not be recovered, are you sure you want to HIDE this Candidate? ')\"/></td>";
    echo "</tr>";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:07:58.207

`onclick`相反，调用一个函数，传入复选框元素。在函数中，您可以隐藏它的父`<tr>`（行）元素。

```
echo "<td><input type=\"checkbox\" name=\"hide_cand\" id=\"hide_cand\" onclick=\" return hideRow(this)\"/></td>"; 
```

Javascript：

```
function hideRow(checkbox)
{
    if(confirm('This action can not be recovered, are you sure you want to HIDE this Candidate? '))
    {
        checkbox.parentNode.parentNode.style.display = "none";
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:07:48.393

```
$('#your_chk_id').live('click', function(){
  $(this).parent('tr').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:18:04.813

使用此代码。

```
<!DOCTYPE html>
<html>
<head>
<script>
function hiderow(check)
{
if(confirm('This action can not be recovered, are you sure you want to HIDE this Candidate? '))
    {
        check.parentNode.parentNode.style.display = "none";
        return true;
    }
    return false;
}
</script>
</head>
<body>

<table id="myTable" border="1">
  <tr>
    <td>cell 1</td>
    <td>cell 2</td>
      <td>   <input type="checkbox" name="row_2" onclick="return hiderow(this)" />  </td>
  </tr>
  <tr>
    <td>cell 3</td>
    <td>cell 4</td>
      <td> <input type="checkbox" name="row_2" onclick="return hiderow(this)" />  </td>
  </tr>
</table>
<br>
<button type="button" onclick="displayResult()">Delete first row in the table</button>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:18:56.833

您应该像这样修改输入字段：

```
<input type="checkbox" name="hide_cand" id="hide_cand" onclick="return confirmation(this); return false;"/> 
```

然后将此脚本添加到您的页面中，它应该可以工作:)

```
<script type="text/javascript">
<!--
function confirmation(item) {
  var answer = confirm("This action can not be recovered, are you sure you want to HIDE this Candidate?")
  if (answer){
    alert("confirmed yes!")
            item.parent().parent().hide();
 }
 else{
    alert("confirmed no!")
 }
}
//-->
</script> 
```

# ruby - 从哈希键转移值

> ID：13988939
> 
> 赞同：1
> 
> 时间：2012-12-21T11:04:03.940
> 
> 标签：ruby

我有这个价值 `{:cat=>["cat1", "cat2", "cat3"], :dog=>["dog1", "dog2", "dog3"]}`

我希望从每个键中检索/移位值：

IE：

得到以下内容：

```
[{:cat => "cat1", :dog => "dog1"}, {:cat => "cat2", :dog => "dog2"} ... etc] 
```

我真的不确定解决这个问题的最佳方法，有什么建议吗？

编辑：

到目前为止，我有：

```
a[a.keys.first].dup.map{|c| a.map{|index, vals| vals.shift}}   
# => [["cat1", "dog1"], ["cat2", "dog2"], ["cat3", "dog3"]] 
```

虽然由于缺少钥匙而不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:23:00.260

那这个呢？

```
a = {:cat=>["cat1", "cat2", "cat3"], :dog=>["dog1", "dog2", "dog3"]}

a1 = a.each_with_object({}) do |(k, vals), memo|
  shifted = vals.shift
  memo[k] = shifted
end

a # => {:cat=>["cat2", "cat3"], :dog=>["dog2", "dog3"]}
a1 # => {:cat=>"cat1", :dog=>"dog1"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:41:41.190

不修改原始哈希：

```
h = {:cat=>["cat1", "cat2", "cat3"], :dog=>["dog1", "dog2", "dog3"]}

h.values.first.zip(h.values.last).map do |value_pair| 
  Hash[ h.keys.zip(value_pair) ]
end

# => [{:cat=>"cat1", :dog=>"dog1"}, {:cat=>"cat2", :dog=>"dog2"}, {:cat=>"cat3", :dog=>"dog3"}]

h
# => {:cat=>["cat1", "cat2", "cat3"], :dog=>["dog1", "dog2", "dog3"]} 
```

数组#zip：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-zip](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-zip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T11:59:36.233

```
h = {:cat=>["cat1", "cat2", "cat3"], :dog=>["dog1", "dog2", "dog3"]}

ks = h.keys
h.values.transpose.map{|vs| Hash[[ks, vs].transpose]}
# => [
#   {:cat => "cat1", :dog => "dog1"},
#   {:cat => "cat2", :dog => "dog2"},
#   {:cat => "cat3", :dog => "dog3"}
# ] 
```

或者，强烈推动单线，稍微牺牲速度：

```
h.values.transpose.map{|vs| Hash[[h.keys, vs].transpose]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:23:54.893

```
cats_and_dogs = {:cat=>["cat1", "cat2", "cat3"], :dog=>["dog1", "dog2", "dog3"]}

cats_with_dogs = []
i = 0
cats_and_dogs[:cat].each do |e|
    cats_with_dogs << {cat: cats_and_dogs[:cat][i], dog: cats_and_dogs[:dog][i]}
    i+=1
end

cats_with_dogs # [{:cat=>"cat1", :dog=>"dog1"}, {:cat=>"cat2", :dog=>"dog2"}, {:cat=>"cat3", :dog=>"dog3"}] 
```

# android - 未调用 onDisabled 和 onDeleted 方法

> ID：13988944
> 
> 赞同：1
> 
> 时间：2012-12-21T11:04:14.513
> 
> 标签：android, android-appwidget, appwidgetprovider

出于某种原因，当我从主屏幕删除小部件时，我的小部件的 onDisabled 和 onDeleted 方法没有被调用。我不知道为什么。

这是代码：

```
public class WidgetProvider2x1 extends AppWidgetProvider {

@Override
public void onEnabled(Context context) {

    Log.i("MyTag", "onEnabled");

    super.onEnabled(context);
}

@Override
public void onDeleted(Context context, int[] appWidgetIds) {

    Log.i("MyTag", "onDeleted");
    Toast.makeText(context, "onDeleted", Toast.LENGTH_SHORT).show();

    super.onDeleted(context, appWidgetIds);
    }

@Override
public void onDisabled(Context context) {

     Log.i("MyTag", "onDisabled");
     Toast.makeText(context, "onDisabled", Toast.LENGTH_SHORT).show();

     super.onDisabled(context);
} 
```

LogCat 也不显示任何内容。

# android - 将 Wordpress 网站转换为离线 Android 应用程序

> ID：13988946
> 
> 赞同：1
> 
> 时间：2012-12-21T11:04:30.917
> 
> 标签：android, html, wordpress, web-crawler

最近我开始了我的项目，将在线教育资源转换为与移动设备兼容的 wordpress 网站。我完成了它并且没有任何问题，但是现在我需要将整个 wordpress 网站转换为 Android 应用程序。

我已经研究过 HTTrack 和 WP Cache 插件，但是它们似乎没有捕获菜单，我认为这是因为我正在使用的主题中的 HTML5。

所以基本上，我已经能够捕获大部分网站并将其转换为 HTML，但是 wordpress 中的 /#&ui-page=0-55 等页面不会被抓取或抓取。

菜单非常丰富，一一保存需要很长时间。

在整个过程之后，我计划使用 PhoneGap 将应用程序转换为 APK。

非常感谢您的帮助，如果我不清楚，我很抱歉，如果您无法理解它，请让我回忆一下我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:08:16.683

你看过 wget 来镜像网站吗？使用正确的参数，您可以镜像站点并转换所有依赖项。

```
wget -mk http://www.example.com/ 
```

# ruby-on-rails - 有没有什么好的宝石可以收藏特定型号的记录？

> ID：13988947
> 
> 赞同：0
> 
> 时间：2012-12-21T11:04:35.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem

我有 3 个模型，例如用户模型、书籍模型和作者模型。

我想实现一个功能，用户可以收藏书籍或作者的记录作为他们的最爱。

有什么好的宝石可以轻松做到这一点？？？

我不考虑自己做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T11:17:47.793

您可以使用`acts_as_votable` [gem](https://github.com/ryanto/acts_as_votable)并将喜欢的内容用作书签。

你可以使用

`@user.get_up_voted Book`

这将返回所有`@user`投票的书籍（这些是该用户的书签）

[您将在此处](https://github.com/ryanto/acts_as_votable#the-voter)的选民部分找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:17:35.000

使用 awesome_nested_set gem 或acts_as_votable gem。它可能对你有用。可以解决您的所有要求。

检查以下链接
[awesome_nested_set](https://github.com/collectiveidea/awesome_nested_set)
或[acts_as_votable](https://github.com/ryanto/acts_as_votable)

# android - 展开布局并动态插入一些字段

> ID：13988948
> 
> 赞同：0
> 
> 时间：2012-12-21T11:04:35.527
> 
> 标签：android, android-layout, android-tablelayout

我想开发一个应用程序，其中屏幕上有一个按钮，单击该按钮后，相机将打开，然后拍照，按钮所在的布局展开，照片位于此按钮下方。

我在一个屏幕截图的应用程序中展示了这个东西：

![在此处输入图像描述](../Images/8f1266c357431300f3c7967ba0dda60a.png)

点击照片后，它会捕捉照片，然后此布局展开，照片如下所示：-

![在此处输入图像描述](../Images/0eaf19ac49375d64c5120463305ec3e5.png) ![在此处输入图像描述](../Images/39c911b113e045965b5096149dcdb278.png)

我想在我的应用程序中做同样的事情。

为此，我尝试了一些代码：-

（在 TableLayout 中的 TableRow 中我的应用程序中已经有一些字段）

首先，我创建一个 tableRow1（比如说），然后创建一个 TableLayout，然后为按钮创建一个 TableRow2，为 Image 创建一个 TableRow3。我将按钮插入tableRow2，然后将此tableRow2 插入TableLayout，然后将TableLayout 插入tableRow1。拍摄照片后，我将 Image 插入 TableRow3，然后将此 tableRow3 插入 TableLayout。

但是这段代码不起作用，这段代码也没有给出任何错误。

代码：

```
tableRow1 = new TableRow(this);
tableRow1.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

tableLayout = new TableLayout(this);
tableRow2 = new TableRow(this);

tableLayout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
tableRow2.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

buttonPhoto = new Button(this);
buttonPhoto.setText("Photo");
buttonPhoto.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

tableRow2.addView(buttonPhoto);

tableLayout.addView(tableRow2, new TableLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

tableLayoutMain.addView(tableLayout, new TableLayout.LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

buttonPhoto.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            method1();
        }
    });

public void method1(){

    tableRow3 = new TableRow(this);

    tableRow3.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

    imageViewPhoto = new ImageView(this);
    imageViewPhoto.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 110));
    tableRow3.addView(imageViewTakePhoto);

    tableLayout.addView(tableRow3, new TableLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
} 
```

通过使用此代码，我什至无法在屏幕上看到按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:23:20.130

尝试对`LayoutParams`添加到的视图也使用正确的`TableRows`：

```
tableRow1 = new TableRow(this);
tableRow1.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.WRAP_CONTENT));
tableLayout = new TableLayout(this);
tableRow2 = new TableRow(this);
buttonPhoto = new Button(this);
buttonPhoto.setText("Photo");
buttonPhoto.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));
tableRow2.addView(buttonLocationPhoto);
tableLayout.addView(tableRow2, new TableLayout.LayoutParams(
            TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.WRAP_CONTENT));
buttonPhoto.setOnClickListener //... 
```

和方法：

```
public void method1(){
    tableRow3 = new TableRow(this);
    imageViewPhoto = new ImageView(this);
    imageViewPhoto.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, 110));
    tableRow3.addView(imageViewTakePhoto);
    tableLayout.addView(tableRow3, new TableLayout.LayoutParams(
                TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT));
} 
```

另外，在您的问题中，我看到您谈到将 添加`tabLelayout`到主表`tableRow1`中，然后添加（如果它不在布局中）`tableRow1`到主表中。在这种情况下：

```
tableRow1.addView(tableLayout, new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
//add the tableRow1 to the main table?!? 
```

但是，在你的代码中你没有这个，而是你有这一行：

```
tableLayoutMain.addView(tableLayout, new TableLayout.LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

# android - 在multiple_choice listview（android）中以编程方式检查复选框

> ID：13988955
> 
> 赞同：0
> 
> 时间：2012-12-21T11:05:07.763
> 
> 标签：android, listview, checkbox, multiple-choice

抱歉，如果还有这样的问题，但我找不到我的答案。

我想知道在填充**ListView 时以编程方式设置复选框以说明它已被选中的位置。**该复选框在 Listview 中，我正在使用`android.R.layout.simple_list_item_multiple_choice.`

任何帮助都会很好，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:12:22.777

ListView 上有一个方法，您可以调用它来设置项目“已检查”状态：

```
for (int i = 0; i < getListAdapter().getCount(); i++) {
    getListView().setItemChecked(i, true);
} 
```

# scala - scala：更改 url 的端口

> ID：13988956
> 
> 赞同：2
> 
> 时间：2012-12-21T11:05:11.413
> 
> 标签：scala, url

我有以下网址：

```
ws://chat-jugar.rhcloud.com/room/chat?username=felipe 
```

我只想添加一个非默认端口，像这样

```
ws://chat-jugar.rhcloud.com:8000/room/chat?username=felipe 
```

我首先尝试使用 java.net.URL 开始解析和操作 url，但我得到了

```
scala> val u = new java.net.URL("ws://chat-jugar.rhcloud.com/room/chat?username=felipe")
java.net.MalformedURLException: unknown protocol: ws
at java.net.URL.<init>(URL.java:592)
at java.net.URL.<init>(URL.java:482)
at java.net.URL.<init>(URL.java:431) 
```

我不想乱用正则表达式，以免错过一些奇怪的情况（但如果没有其他选择也没关系，当然......）

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:18:02.020

您可以使用`java.net.URI`提取到部分 uri，然后使用添加的端口构建新的 uri 字符串。例子：

```
val uri = URI.create("ws://chat-jugar.rhcloud.com/room/chat?username=felipe")

val newUriString = "%s://%s:%d%s?%s".format(uri.getScheme, uri.getHost, 8000, uri.getPath, uri.getQuery)

newUriString: String = ws://chat-jugar.rhcloud.com:8000/room/chat?username=felipe 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T16:24:19.727

仅作记录，这是我使用 java.net.URI 提出的小型实用程序助手，正如 drexin 所说

```
package utils.http

case class Uri(
  protocol: String, userInfo: String, 
  host: String, port: Int, 
  path: String, query: String, fragment: String
) {
  lazy val javaURI = {
    new java.net.URI(
      protocol, userInfo, 
      host, port, 
      path, query, fragment
    )
  }

  override def toString = {
    javaURI.toString
  }
}

object Uri {
  def apply(uri: String): Uri = {
    val parsedUri = new java.net.URI(uri)
    Uri(
      parsedUri.getScheme, parsedUri.getUserInfo,
      parsedUri.getHost, parsedUri.getPort,
      parsedUri.getPath, parsedUri.getQuery, parsedUri.getFragment
    )
  }
} 
```

我像这样使用它（来自游戏的控制台）：

```
scala> import utils.http.Uri
import utils.http.Uri

scala> Uri("ws://chat-jugar.rhcloud.com/room/chat?username=felipe").copy(port=8000).toString
res0: java.lang.String = ws://chat-jugar.rhcloud.com:8000/room/chat?username=felipe 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T12:27:23.673

派对迟到了，但你可以这样做`scala-uri`（免责声明：这是我自己的图书馆）：

```
import com.github.theon.uri.Uri._

val uri = "ws://chat-jugar.rhcloud.com/room/chat?username=felipe"
val newUri = uri.copy(port = Some(8000))

newUri.toString //This is: ws://chat-jugar.rhcloud.com:8000/room/chat?username=felipe 
```

它在 Maven Central 中可用。详细信息在这里：[https ://github.com/theon/scala-uri](https://github.com/theon/scala-uri)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T11:18:41.810

你可以`java.net.URI`改用。

```
def changePort(uri: java.net.URI, port: Int) = new java.net.URI(uri.getScheme, uri.getUserInfo, uri.getHost, port, uri.getPath, uri.getQuery, uri.getFragment) 
```

接着

```
scala> changePort(new java.net.URI("ws://chat-jugar.rhcloud.com/room/chat?username=felipe"), 8000).toString
res: java.lang.String = ws://chat-jugar.rhcloud.com:80/room/chat?username=felipe 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T10:39:20.090

您可能想试试我的[Bee Client API](http://www.bigbeeconsultants.co.uk/bee-client)，它包含一个[PartialURL](http://www.bigbeeconsultants.co.uk/docs/bee-client/latest/#uk.co.bigbeeconsultants.http.url.PartialURL)类，用于根据其结构处理 URL（完整或其他）。

一般的想法是从字符串或 URL 构造一个，然后更改您需要的任何部分，例如

```
import uk.co.bigbeeconsultants.http.url._
val url = PartialURL("ws://chat-jugar.rhcloud.com/room/chat?username=felipe")
val url8080 = url.copy(endpoint = Some(url.endpoint.get.copy(port = Some(8080)))) 
```

# php - Zend Framework 2 - Doctrine 2 - Zend 标准模型如何处理

> ID：13988958
> 
> 赞同：1
> 
> 时间：2012-12-21T11:05:27.607
> 
> 标签：php, database, model, doctrine-orm, zend-framework2

我融入`Doctrine 2`了我的`Zend`项目。如果您使用`Doctrine`，则将数据定义放入`Entity\MyEntity.php`而不是（如[教程](http://framework.zend.com/manual/2.0/en/user-guide/database-and-models.html)中所示）放入`Model\MyModel.php`.

本教程使用*MyModelTable.php*作为管理器，您可以在其中定义查询等`fetchAll()`。

我如何用 Doctrine 归档这个？我可以删除我的`model`目录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:10:57.393

你在使用[DoctrineORMModule](http://github.com/doctrine/DoctrineORMModule)吗？这将 Doctrine 正确地集成到 ZF 中作为服务。完成此操作后，对于您自己的每个包含 Doctrine 实体的模块，将其添加到您的 module.config.php 中：

```
<?php

namespace YourModul;

return array(
    // ... your module configuration ...

    'doctrine' => array(
        'driver' => array(
            __NAMESPACE__ . '_driver' => array(
                'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                'cache' => 'array',
                'paths' => array(
                    __DIR__ . '/../src/' . __NAMESPACE__ . '/Entity'
                ),
            ),
            'orm_default' => array(
                'drivers' => array(
                    __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
                ),
            ),
        ),
    ),
); 
```

`modules/YourModule/src/YourModule/Entity/`这将 Doctrine 配置为使用默认的 DBAL 驱动程序在 中查找注解配置的实体。

您还需要按照[DoctrineORMModule 页面](https://github.com/doctrine/DoctrineORMModule#readme)中的描述配置 Doctrine 的 DBAL 组件。

要清理，您可以简单地删除模型目录并使用您定义的实体类。其他一切都照常工作。

# ruby - ruby for循环生成矩阵

> ID：13988959
> 
> 赞同：1
> 
> 时间：2012-12-21T11:05:32.203
> 
> 标签：ruby, matrix

我有这个 for 循环：

```
 for i in 0...4
  for j in 0...4
      puts "#{i}:#{j}"
  end
end 
```

输出：

```
0:0
0:1
0:2
0:3
1:0
1:1
1:2
1:3
2:0
2:1
2:2
2:3
3:0
3:1
3:2
3:3 
```

但我喜欢生成这个结果的矩阵。我需要将所有 0: 放在一行中，将所有 1: 放在一行中以生成以下内容：

```
0:0 0:1 0:2 0:3
1:0 1:1 1:2 1:3
2:0 2:1 2:2 2:3
3:0 3:1 3:2 3:3 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:08:54.117

如文档中所述，[**puts**](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts) “在任何尚未以换行序列结尾的内容之后写入记录分隔符（通常是换行符）”。所以你需要使用[**print**](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-print)代替（但`puts`在每行打印完成后仍然使用移动到新行）

```
for i in 0...4
  for j in 0...4
      print "#{i}:#{j} "
  end
  puts
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:17:07.887

```
matrix = (0..3).to_a.repeated_permutation(2).each_slice(4)
print matrix.map{|row| row.map{|column| column.join(":")}.join(" ")}.join("\n") 
```

# php - 使用 Rest Api 在 wordpress 博客和 PHP 站点之间相互交换数据？

> ID：13988964
> 
> 赞同：0
> 
> 时间：2012-12-21T11:05:57.650
> 
> 标签：php, json, wordpress, rest

我正在使用 wordpress 和其他使用 PHP 开发两个简单的站点，我想在这两个站点之间使用 Rest 交换数据。

我必须能够从基于 PHP 的网站构建中将数据发布到 wordpress 网站或从 wordpress 网站获取数据。

我必须能够从我的 wordpress 网站向基于 PHP 的网站发布数据或从中获取数据

这些都在本地主机上是否有任何插件，文档或资源可以执行。

任何建议都会帮助我提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:58:58.517

可以使用更多信息来获得更多帮助，例如，如果您正在开发这两个网站，为什么不在 Wordpress 中同时进行呢？标准 PHP 站点是您正在接管的现有项目吗？代码是完全从头开始编写的还是使用了框架？

与此同时，我建议研究一个框架，例如我使用 Zend 框架，虽然我没有专门使用它，但它确实有 REST 客户端和服务器类

[http://framework.zend.com/manual/1.12/en/zend.rest.server.html](http://framework.zend.com/manual/1.12/en/zend.rest.server.html)

看起来相当不错

```
/**
* Say Hello
*
* @param string $who
* @param string $when
* @return string
*/
function sayHello($who, $when)
{
    return "Hello $who, Good $when";
}

$server = new Zend_Rest_Server();
$server->addFunction('sayHello');
$server->handle(); 
```

# xcode - cocoa-applescript (Xcode) 中的平滑 UI 更改

> ID：13988965
> 
> 赞同：1
> 
> 时间：2012-12-21T11:06:06.593
> 
> 标签：xcode, cocoa, applescript, applescript-objc

我正在尝试编写一个简单的 Xcode cocoa-applescript 程序，该程序在文件夹的每个子文件夹上执行 bash 脚本，并在执行时显示进度条。

我有一个要链接到的`NSProgressIndicator`设置，`barStatus`并且`NSTextField`要链接到`lblStatus`以显示一些信息性文本：

```
property barStatus : missing value
property lblStatus : missing value 
```

这是主要动作发生的循环：

```
tell application "Finder" to set subfolders to every folder of folder macPath
barStatus's setIndeterminate_(false)
barStatus's setDoubleValue_(0)
barStatus's setMaxValue_(count of subfolders)     

repeat with eachFolder in subfolders
    set posixPath to (POSIX path of (eachFolder as text)) as text
    -- set text of progress indicator text 
    lblStatus's setStringValue_("Resizing '" & ( do shell script "basename \"" & (posixPath) & "\" | sed \"s/^.*_//\"" ) & "'...")
    delay 0.5

    -- do the shell script
    do shell script "bash ~/.uploader/image.sh \"" & posixPath & "\""

    -- step the indicator
    barStatus's incrementBy_(1)
end repeat
lblStatus's setStringValue_("Done!") 
```

一切似乎都正常工作，但用户界面有些小故障。进度条不仅会平滑增加，而且会在每一步消失并显示片刻，然后再次消失。中的文本`lblStatus`确实会顺利更改。

当我从循环中删除时，事情会完全丢失`delay`：在循环完成之前，不会进行 UI 更改（即使脚本运行正常）。因此，当循环完成时，进度条会消失并重新出现。

这是闪烁 UI 的[youtube 视频](http://www.youtube.com/watch?v=9Ll26OWXVC4&feature=youtube_gdata_player)。

我究竟做错了什么？如何让 xcode 顺利绘制进度条？

请注意，这是我第一次编写 Xcode 应用程序，而且我对 Applescript 的了解有些粗略。

## 编辑：

我发现调用处理相同函数的函数在从菜单项（或绑定到该菜单项的组合键）中调用时没有闪烁的 UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:49:30.973

我不确定为什么进度条会隐藏起来。您是否将它的可见属性绑定到可能使其隐藏的东西？

> 当我从循环中删除延迟时，事情完全丢失了：没有进行 UI 更改

一般来说，当“没有进行 UI 更改”时，这是因为应用程序在主线程上太忙而无法实时更新界面项。您的所有代码都在主线程上运行。您需要在后台线程上进行一些操作。因此，我有 2 条建议供您尝试。

首先尝试使用进度条的方法“setUsesThreadedAnimation:”。将其添加到您的重复循环上方...

```
barStatus's setUsesThreadedAnimation_(true) 
```

其次，如果这没有帮助，请尝试将您的重复循环工作移到后台线程（使用 NSThread 的 detachNewThreadSelector :)...但让界面更新发生在主线程上。我不知道 ApplescriptObjC 语言所以下面的代码可能是完全错误的。您必须正确编写它，但它会向您展示这个想法......

```
[NSThread detachNewThreadSelector:@selector(processFolderListOnBacgroundThread_) toTarget:self withObject:subfolders];

    -- this will happen on the main thread
    on updateProgressBarByOne_()
        barStatus's' incrementBy_(1)
    end updateProgressBarByOne_

    -- this will happen on the main thread
    on updateStatusTextWithText_(statusText)
        lblStatus's' setStringValue_(statusText)
    end updateInterfaceItemsOnMainThreadWithObject_

    -- this will happen on a background thread
    on processFolderListOnBacgroundThread_(subFolders)
        repeat with eachFolder in subfolders
            set posixPath to (POSIX path of (eachFolder as text)) as text
            -- set text of progress indicator text
            my updateStatusTextWithText_("Resizing '" & ( do shell script "basename \"" & (posixPath) & "\" | sed \"s/^.*_//\"" ) & "'...")

            -- do the shell script
            do shell script "bash ~/.uploader/image.sh \"" & posixPath & "\""

            -- step the indicator
            my updateProgressBarByOne_()
        end repeat
        my updateStatusTextWithText_("Done!")
    end processFolderListOnBacgroundThread_ 
```

如果您使用后台线程方法，您可能必须在后台线程工作时使界面中的按钮处于非活动状态（因此用户无法按下它们并开始新任务）。因此，只需在调用“detachNewThreadSelector:”之前将其 enabled 属性设置为 false，并在工作完成后再次启用它们。您可以通过另一个启用它们的处理程序并从后台线程代码的末尾调用它来做到这一点。

# android - 如何杀死一个孤儿android模拟器

> ID：13988968
> 
> 赞同：4
> 
> 时间：2012-12-21T11:06:28.403
> 
> 标签：android, android-emulator, adb

我已经尝试了所有方法，但是当我在 cmd 中键入“adb devices”时，模拟器一直显示，即使 AVD 管理器中没有模拟器的痕迹。我已经重新安装了sdk工具，重新启动了我的电脑几次，但不管模拟器仍然存在。我还删除了自动生成的文件夹 .android。我该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:10:35.100

尝试：

亚行USB

确保使用 USB 连接并清除“孤儿”。

# c# - LINQ：获取最新日期的值

> ID：13988969
> 
> 赞同：-1
> 
> 时间：2012-12-21T11:06:32.417
> 
> 标签：c#, linq

我有一个简单的测试表：

```
Code FromDate   Name
---- ---------- -------
001  2012-11-30 bertie
001  2012-12-01 bert
002  2012-12-01 ernie
001  2012-12-02 bert
002  2012-12-02 ernie
001  2012-12-03 ernie
002  2012-12-04 bert 
```

如果我在此表中搜索，那么我想要具有最新“起始日期”的代码。
例如，搜索“ernie”应给出以下结果：“001 / 2012-12-03 / ernie”

搜索 'bert' 应该得到这样的结果：'002 / 2012-12-04 / bert'

如果我搜索“er”，我应该得到 2 条最新记录：“001 / 2012-12-03 / ernie”和“002 / 2012-12-04 / bert”

此查询不起作用：

```
from d in Data
where d.Name.ToUpper().Contains("ERNIE") && d.Code != null     
group d by d.Code into g
select g.OrderByDescending(t => t.FromDate).FirstOrDefault() 
```

这样做的最佳方法是什么？

结果还应该给我每个记录的名称，而不需要 sql 查询。

**更新：**
使问题更容易理解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:57:59.360

这有效：

```
var query = (from d in Data
             group d by d.Code into g
             select g.OrderByDescending(t => t.FromDate).FirstOrDefault());

query = query.Where(d => d.Name.ToUpper().Contains("BERT") && d.Code != null);

query.Dump(); 
```

# python-3.x - 如何在 Python3 中将字符串添加到 tarfile

> ID：13988973
> 
> 赞同：4
> 
> 时间：2012-12-21T11:06:41.120
> 
> 标签：python-3.x, stringio, tarfile

我`str`在 python 中添加到 tar arhive 时遇到问题。在 python 2 中，我使用了这样的方法：

```
fname = "archive_name"
params_src = "some arbitrarty string to be added to the archive"

params_sio = io.StringIO(params_src)
archive = tarfile.open(fname+".tgz", "w:gz")
tarinfo = tarfile.TarInfo(name="params")
tarinfo.size = len(params_src)
archive.addfile(tarinfo, params_sio) 
```

它与[这里](https://stackoverflow.com/questions/740820/python-write-string-directly-to-tarfile)的内容基本相同。它运作良好。但是，转到 python 3 它坏了并导致以下错误：

```
 File "./translate_report.py", line 67, in <module>
    main()
  File "./translate_report.py", line 48, in main
    archive.addfile(tarinfo, params_sio)
  File "/usr/lib/python3.2/tarfile.py", line 2111, in addfile
    copyfileobj(fileobj, self.fileobj, tarinfo.size)
  File "/usr/lib/python3.2/tarfile.py", line 276, in copyfileobj
    dst.write(buf)
  File "/usr/lib/python3.2/gzip.py", line 317, in write
    self.crc = zlib.crc32(data, self.crc) & 0xffffffff
  TypeError: 'str' does not support the buffer interface 
```

老实说，我很难理解它的来源，因为我没有将任何内容反馈`str`给`tarfile`模块回到我构造`StringIO`对象的位置。我知道和的含义`StringIO`，`str`字节等从 python 2 到 3 发生了一些变化，但我没有看到错误，也无法想出更好的逻辑来解决这个任务。

我精确地创建`StringIO`对象以围绕要添加到存档的字符串提供缓冲区方法。然而让我感到震惊的是，有些`str`人没有提供它。最重要的是，围绕似乎负责校验和计算的行引发了异常。

有人可以解释一下我的误解，或者至少举一个例子，如何在`str`不在文件系统上创建中间文件的情况下向 tar 存档添加一个简单的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:10:12.023

写入文件时，您需要将 unicode 数据显式编码为字节；`StringIO`对象不会为您执行此操作，它是一个*文本*内存文件。改为使用`io.BytesIO()`并编码：

```
params_sio = io.BytesIO(params_src.encode('utf8')) 
```

当然，将您的编码调整为您的数据。

# sql-server - sp_prepare 失败并出现 SELECT * INTO #tmpTable 但不是 sp_prepexec

> ID：13988975
> 
> 赞同：1
> 
> 时间：2012-12-21T11:06:50.247
> 
> 标签：sql-server, sql-server-2005, jdbc, prepared-statement, jtds

在切换到 jTDS 驱动程序 (1.3) 而不是使用 Microsoft JDBC 驱动程序 (4.0.2206) 时，我遇到了一个奇怪的问题。

以下是示例代码的 DDL：

```
CREATE TABLE [dbo].[Test] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [Value] varchar(10) NOT NULL
    CONSTRAINT [PK_Test] PRIMARY KEY CLUSTERED([Id])
) ON [PRIMARY]

INSERT INTO Test([Value]) VALUES('1')
INSERT INTO Test([Value]) VALUES('2') 
```

在打开探查器运行代码后，我看到 MS 驱动程序正在执行（工作）：

```
declare @p1 int
set @p1=null
exec sp_prepexec @p1 OUTPUT, NULL, N'SELECT *
INTO #tmpTable
FROM Test
SELECT * FROM #tmpTable
DROP TABLE #tmpTable' 
```

和 jTDS 问题（给出“无效的对象名称 '#tmpTable'”（并且在 java 中没有抛出异常））：

```
declare @p1 int
set @p1=null
exec sp_prepare @p1 OUTPUT, NULL, N'SELECT *
INTO #tmpTable
FROM Test
SELECT * FROM #tmpTable
DROP TABLE #tmpTable'
exec sp_execute @p1 
```

为什么 sp_prepare 和 sp_execute 与 sp_prepexec 不同，根据文档 sp_prepexec 是前一个程序的组合？

为什么做sp_prepare时第二个查询找不到#tmpTable？

# c# - 在“循环”中对具有两个多对多关系的数据库进行 SQL 查询

> ID：13988979
> 
> 赞同：0
> 
> 时间：2012-12-21T11:07:09.683
> 
> 标签：c#, asp.net, sql-server

首先为毛茸茸的主题标题道歉，很难用言语表达。

所以……考虑到这一点，我附上了一个数据库关系图（见下文），希望能更简洁地解释它。

![在此处输入图像描述](../Images/73c77e038c5e01ecda644aed2a0dfaa2.png)

我们继承了一个大型数据库（因此无法更改/合理化它，更遗憾的是！）它有一个麻烦的“循环”，由 4 个表组成，其中有几个不同的多对多关系。

我需要能够得到法院的名称、完整地址和一般说明，所有这些每个法院都只有一个，然后是联系方式，它们分为两组（一般联系点和特定联系点），可以包含一个或多个取决于法院的清单。我需要它以以下格式显示：

**阿伯加文尼地方法院**
阿伯加文尼
NP7 5DL

该法庭仅对听证开放。额外的法庭笔记......

**联系人**
总机：01633 64xxxx
传真：01633 64xxxx
服务 1：01633 64xxxx
服务 2：01633 64xxxx
联系人姓名 1 - 代理法院经理：01633 64xxxx
联系人姓名 2 - 代理办公室经理：01633 64xxxx
联系人姓名 3 - 代理名单官员：01633 64xxxx
联系人姓名 4 - 法官书记员：01633 64xxxx

我昨天在 StackOverflow 上发布了如何为一对多关系正确编写 SQL 查询和 ASP.NET C# 代码。为简单起见，我提供的信息经过大量解释，基本上只包含您在上面看到的循环的一半。但是，此后我尝试将相同的原则应用于整个循环失败了。

SQL 查询（适用于循环的前半部分，即提供法院地址详细信息和特定联系人列表）如下所示：

```
string myQuery = 
"SELECT C.court_id, court_name, court_addr1, court_town_name, court_county_name, " +
"court_country_name, court_addr_pcode, court_addr_dx, court_code, court_note, " +
"court_contacts_name, court_contacts_no, CCT.court_contact_type_desc " +      
"FROM court C " +
"JOIN court_addr CA ON C.court_addr_id = CA.court_addr_id " +
"JOIN court_town CT ON CA.court_town_id = CT.court_town_id " +
"JOIN court_county CC ON CT.court_county_id = CC.court_county_id " +
"JOIN court_country CCO ON CC.court_country_id = CCO.court_country_id " +
"JOIN court_contacts CCON ON C.court_id = CCON.court_id " +
"JOIN court_contact_type CCT ON CCON.court_contact_type_id = CCT.court_contact_type_id " + 
"WHERE C.court_id = '25' " + 
"ORDER BY C.court_id"; 
```

虽然 C# 看起来像这样：

```
if (myDataReader.HasRows)
{

    string last_id = string.Empty;

    while (myDataReader.Read())
    {

        string court_id = myDataReader["court_id"].ToString();
        string court_name = myDataReader["court_name"].ToString();
        string court_addr = myDataReader["court_addr1"].ToString();
        string court_town = myDataReader["court_town_name"].ToString();
        string court_county = myDataReader["court_county_name"].ToString();
        string court_country = myDataReader["court_country_name"].ToString();
        string court_pcode = myDataReader["court_addr_pcode"].ToString();
        string court_dx = myDataReader["court_addr_dx"].ToString();
        string court_code = myDataReader["court_code"].ToString();
        string court_note = myDataReader["court_note"].ToString();
        string court_contact_name = myDataReader["court_contacts_name"].ToString();
        string court_contact_desc = myDataReader["court_contact_type_desc"].ToString();
        string court_contact_no = myDataReader["court_contacts_no"].ToString();

        if (last_id != court_id) {

            Response.Write("<strong>" + court_name + "</strong><br>" + court_addr +
                           "<br>" + court_town + "<br>" + court_county + "<br>" + 
                           court_country + "<br>" + court_pcode + "<br><br>" + 
                           court_dx + "<br><p>Court code " + court_code + "</p><p>" + 
                           court_note + "</p>" + court_contact_name + " - " + 
                           court_contact_desc + ": " + court_contact_no + "<br>");

        } else {

            Response.Write("<br>" + court_contact_name + " - " + court_contact_desc + 
                           ": " + court_contact_no + "<br>");

        }

        last_id = court_id;

    }

} 
```

按照 SQL 查询中的相同逻辑，我尝试添加一个额外的 SELECT 参数**court_contacts_general_no**和几个额外的 JOIN 行以引入**court_contacts_general**表（见下文），但是，这会产生类似于“相关性”的错误在 FROM 子句中多次指定名称 CCG，或者如果删除了第二个相关名称，则完全空白。

```
"JOIN court_contacts_general CCG ON C.court_id = CCG.court_id " +                                  
"JOIN court_contacts_general CCG ON CCT.court_contact_type_id = CCG.court_contact_type_id " + 
```

在 C# 中，我为**court_contact_general_no**添加了一个新字符串，并尝试根据写入从这个新变量收到的响应创建另一个 if/else 循环。

无论哪种方式，我得到的只是一个大的空白页或上面的 SQL 相关错误。

有任何想法吗？

提前感谢所有/任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:34:48.750

您需要使用不同的表名别名才能在单个查询中多次加入同一个表

```
JOIN court_contacts_general CCG1
JOIN court_contacts_general CCG2.. etc 
```

我建议将表命名为与返回的数据更相关的名称，但在这种情况下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:58:48.683

它当然不优雅（毫无疑问，有更好的编写方式！）但我已经设法通过编写第二个 SQL 查询并在第一个 SQL 连接关闭标记后直接打开第二个 Sqlconnection 来解决该问题关于第二批联系人。

SQL查询：

```
string myQuery2 = 
"SELECT C.court_id, court_contacts_name, court_contacts_no, court_contact_type_desc " +
"FROM court C " +
"JOIN court_contacts CCON ON C.court_id = CCON.court_id " +
"JOIN court_contact_type CCT ON CCON.court_contact_type_id = CCT.court_contact_type_id " +
"WHERE C.court_id = '" + court_id_no + "' " +
"ORDER BY C.court_id"; 
```

C#代码：

```
myDataReader.Close();
connection.Close();

SqlConnection connection2 = new SqlConnection(connStr);
SqlCommand myCommand2 = new SqlCommand(myQuery2, connection2);
SqlDataReader myDataReader2;
connection2.Open();

myDataReader2 = myCommand2.ExecuteReader();

if (myDataReader2.HasRows) {

    string last_id = string.Empty;

    while (myDataReader2.Read()) {

        string court_id = myDataReader2["court_id"].ToString();
        string court_contact_desc = myDataReader2["court_contact_type_desc"].ToString();
        string court_contact_name = myDataReader2["court_contacts_name"].ToString();
        string court_contact_no = myDataReader2["court_contacts_no"].ToString();

        if (string.IsNullOrWhiteSpace(court_contact_no)) {
            court_contact_no = generic_contact_no;
        }

        if (last_id != court_id) {

            Response.Write(court_contact_name + " - " + court_contact_desc + ": " + court_contact_no + "<br>");

        } else {

            Response.Write(court_contact_name + " - " + court_contact_desc + ": " + court_contact_no + "<br>");

        }

        last_id = court_id;

    }
} 
```

正如我所说，不漂亮，但重要的是它有效。

# javascript - Javascript/AJAX 需要屏幕阻止代码

> ID：13988980
> 
> 赞同：1
> 
> 时间：2012-12-21T11:07:09.970
> 
> 标签：javascript, ajax

当我希望我的 AJAX 调用是同步的（从而禁止用户在完成之前做任何事情？）时，对屏幕阻止程序有什么好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:18:37.820

当您使用 Synchronous-JAX (SJAX) 时，您将失去 AJAX 的好处，这在大多数（或所有）情况下会导致糟糕的用户体验。

反而：

*   尝试使用[模态窗口](http://jqueryui.com/dialog/#modal)来遮蔽页面的其他部分，同时关注您的 UI，而不是使用 SJAX 锁定 UI。尽管这是最直接的方法并且现在是异步的，但是如果在服务器响应之前阻止用户执行任何操作，您仍然会失去异步的整个概念。

*   更好的方法是暂时删除调用 AJAX 的处理函数，以防止对表单/按钮/其他内容的进一步操作，同时允许在页面的其他部分继续操作。

    例如，您有一个表格。您将事件处理程序绑定到在提交时调用 AJAX 的表单。在提交期间，创建一些逻辑来临时从表单中删除该处理程序或阻止它调用 AJAX，以便进一步提交什么也不做，或者说“仍在处理/加载”。服务器回复后，重新附加该处理程序以使其工作。

# c++ - 如何覆盖在 C++ 函数内部的另一个类中的一个类中定义的虚拟方法

> ID：13988981
> 
> 赞同：0
> 
> 时间：2012-12-21T11:07:14.473
> 
> 标签：c++

我有一个`class A`在单独的文件中（`sayfile1.cpp`）

```
class A{
public:
      virtual int add(){
      int a=5;
      int b=4;
      int c = a+b;
      return c;
      }
}; 
```

现在在一个不同的文件中（比如说`file2.cpp`），我有一个函数（我在这个函数中有很多其他的东西），我想在其中创建一个继承自`class A`并实现在`class A`.

```
void function(Mat param1, Mat param2)
{
  //Some process here..
  ..
  ..
  int c=100;
  class B:public A{
  public:
        virtual int add(){

        return c;
        }
  };

} 
```

现在，如果我要调用该函数`int add()`，我希望结果为`c`100 而不是 9。

有可能在 C++ 中做这样的事情吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:15:48.587

定义成员变量：

```
class B: public A {
    int c_;
public:
    explicit B(int c):c_(c){};
    virtual int add() {
        return c_;
    }
}
B variable((100)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:14:06.260

您需要将您的`file1.cpp`分成`file1.h`：

```
#ifndef FILE1_H
class A {
public:
  virtual int add();
};
#endif 
```

并`file1.cpp`通过它的实现：

```
int A::add { /*your code * } 
```

在另一个文件中，您仅包含头文件：

```
#include "file1.h" 
```

以下在 C++ 中是不合法的：

```
void function(Mat param1, Mat param2)
{
  //Some process here..
  ..
  ..
  int c=100;
  class B:public A {
  public:
    virtual int add(){

    return c;
    }
 }; 
```

}

相反，你需要这样的东西：

```
class B : public A {
public:
    B(int v) : c(v) {}
    virtual int add(){ return c; }
private:
    int c;
};

void function(Mat param1, Mat param2)
{
  //Some process here..
  ..
  ..
  int c=100;
  B o(c); 
```

}

# vb.net - 以秒为单位计算时差

> ID：13988982
> 
> 赞同：3
> 
> 时间：2012-12-21T11:07:18.583
> 
> 标签：vb.net

我正在使用以下代码来计算时差。我想在几秒钟内显示它，而不是 HH:MM:SS 请指教。

```
Dim myTime = DateTime.Parse("15:40:00 PM")
    Dim vrNowTime = DateTime.Parse(TimeOfDay)
    Dim result = vrNowTime - myTime
    Label1.Text = vrNowTime & "   " & myTime
    MsgBox(result.ToString) 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T11:10:50.623

使用`result.TotalSeconds`（如果要显示整数，则将其四舍五入）。

你也可能想简单地写：

```
Dim result as TimeSpan = Now() - myTime 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T12:27:21.140

你也可以使用

```
Dim Result = DateDiff(DateInterval.Second,Time1,Time2) 
```

# button - 调整 Tumblr Like 按钮的大小？

> ID：13988984
> 
> 赞同：0
> 
> 时间：2012-12-21T11:07:28.840
> 
> 标签：button, resize, tumblr

我正在使用 ThinkingStiff 在 like-button.tumblr.com 上提供的类似 Tumblr 的按钮，但遇到了一些问题。

我不知道这是不是问这个问题的正确地方，但我无法通过他的点赞按钮 tumblr 联系 ThinkingStiff，所以这似乎是我最好的选择。首先，我要感谢他提供的关于如何向任何主题添加点赞和转发按钮的代码。我在我的博客上使用它们，它们位于 shieldyou.tumblr.com，它们运行良好。但是，正如您可能知道的那样，like 按钮对于我的主题来说有点太大了。我想知道是否有办法将其缩小到更合适的尺寸？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:42:05.250

他们使用背景图像，因此如果您想要不同的尺寸，您必须在您最喜欢的图像编辑器中更改图像分辨率（或创建新图像）。然后将其上传到 Tumblr（他们只[为主题文件提供上传服务](http://www.tumblr.com/themes/upload_static_file)）或从中制作一个`data`URI。

然后将 URL 更改`background-image: url(…)`为新的（第一个为灰色图像，第二个为红色图像）。

如果您需要当前图像（以便保存它们），请将两个`data`URI（括号内的所有内容）复制/粘贴到浏览器地址栏。

# android - 操作栏 Sherlock 更改标题颜色

> ID：13988985
> 
> 赞同：1
> 
> 时间：2012-12-21T11:07:40.140
> 
> 标签：android, android-actionbar, actionbarsherlock, android-theme

我正在尝试主题夏洛克动作栏。我想将标题的颜色设置为白色。当我尝试执行以下操作时，标题会一起消失。

我还想在按下时更改操作项图标的背景颜色。

我试过什么？

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Variation on the Holo Light theme that styles the Action Bar -->
    <style name="Theme.Nomad" parent="Theme.Sherlock.Light">
        <item name="actionBarStyle">@style/Widget.Nomad.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.Nomad.ActionBar</item>
        <item name="android:actionBarItemBackground">@drawable/actionbar_selectable_background</item>
        <item name="actionBarItemBackground">@drawable/actionbar_selectable_background</item>
        <item name="android:titleTextStyle">@style/TitleText</item>
        <item name="titleTextStyle">@style/TitleText</item>

        <!--
        <item name="android:popupMenuStyle">@style/MyPopupMenu</item>
        <item name="popupMenuStyle">@style/MyPopupMenu</item>

        <item name="android:dropDownListViewStyle">@style/MyDropDownListView</item>
        <item name="dropDownListViewStyle">@style/MyDropDownListView</item>

        <item name="android:actionBarTabStyle">@style/MyActionBarTabStyle</item>
        <item name="actionBarTabStyle">@style/MyActionBarTabStyle</item>

        <item name="android:actionDropDownStyle">@style/MyDropDownNav</item>
        <item name="actionDropDownStyle">@style/MyDropDownNav</item>

        <item name="android:listChoiceIndicatorMultiple">@drawable/ad_btn_check_holo_light</item>
        <item name="android:listChoiceIndicatorSingle">@drawable/ad_btn_radio_holo_light</item>

        <item name="android:actionOverflowButtonStyle">@style/MyOverflowButton</item>

        -->
    </style>

    <style name="Widget.Nomad.ActionBar" parent="Widget.Sherlock.ActionBar">
        <item name="android:background">#E5492A</item>
        <item name="background">#E5492A</item>
    </style>

    <style name="TitleText" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
        <item name="android:textColor">@android:color/white</item>
        <item name="textColor">@android:color/white</item>
        <item name="android:textSize">18dip</item>
        <item name="textSize">18dip</item>
    </style>

</resources> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T11:21:23.750

我不确定项目背景，但对于文本颜色，您可以：

*   在 Widget.Nomad.ActionBar 中添加这些项目（带有父 Widget.Sherlock.ActionBar 的样式）：

    ```
    <item name="android:titleTextStyle">@style/TitleText</item>
    <item name="titleTextStyle">@style/TitleText</item> 
    ```

*   在哪里：

    ```
    <style name="TitleText" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
        <item name="android:textColor">@android:color/white</item>
        <item name="android:textSize">18sp</item>
    </style> 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-08T02:53:24.220

最好的解决方案是这个！

```
actionBar.setTitle(Html.fromHtml("<font color=\"#ffffff\"><b>" + AppName + "</b></font>")); 
```

我保证这会很有帮助！祝你好运！

# wordpress - Wordpress 自定义菜单列表样式类型

> ID：13988987
> 
> 赞同：0
> 
> 时间：2012-12-21T11:07:43.727
> 
> 标签：wordpress

我遇到了 wordpress 的问题，我使用自定义菜单向我显示图像链接。但我就是无法摆脱列表样式类型的圆圈。我搜索了所有的 wordpress 代码并删除了这些圆形表达式中的每一个，但它仍然显示出来。

这是页面的链接，在左侧有菜单。

[http://web318.login-11.hoststar.at/ben/az3wp/](http://web318.login-11.hoststar.at/ben/az3wp/)

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:11:02.213

第 121 行`style.css`导致了这种情况，它使用：

```
ul {
    list-style: disc;
} 
```

添加以下内容以覆盖它：

```
.menu-item {
    list-style: none;
} 
```

或者一起删除规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:14:29.850

这应该工作

```
.menu {
    list-style-type: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:11:18.170

在第 121 行周围更改`list-style`为 none`/wp-content/themes/az31/style.css`

```
ul { list-style: none; } 
```

# sql - 使用 sqlserver 的行总和

> ID：13988988
> 
> 赞同：1
> 
> 时间：2012-12-21T11:07:44.193
> 
> 标签：sql, sql-server

我正在使用具有下表的 sqlserver，

```
id    companyname     credited      used
----------------------------------------
1       ABC             100          0
2       ABC             10           0
3       BBB              0           10
4       BBB              0           10
5       BBB             100           0
6       BBB             10            0 
```

我的预期输出如下

```
id    companyname     credited      used      sum_credited    sum_used
--------------------------------------------------------------------------
1       ABC             100          0         110              0
2       ABC             10           0         110              0
3       BBB              0           10         0               20
4       BBB              0           10         0               20
5       BBB             100           0        110              0
6       BBB             10            0        110              0 
```

我使用了以下查询，其中我没有得到预期的输出

```
SELECT id,companyname,Credited,Used, SUM(credited) 'Sum_Credited'  
FROM tmptichistory1 
GROUP BY id,companyname,Credited,Used 
```

我想找到贷记值和使用值的总和，并将其显示在具有原始值的不同列中，正如我在第一个表中提到的那样。任何帮助都是可观的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:17:27.807

`sum group by companyname`;

`@bluefeet`用这里纠正的错误（谢谢）`CASE` [是小提琴](http://sqlfiddle.com/#!3/fb977/32)：

```
;with cte as
(
  select companyname, sum(credited) sum_credited, sum(used) sum_used
  from tmptichistory1
  group by companyname
)
select t1.id, t1.companyname, t1.credited, t1.used, 
 case t1.credited when 0 then 0 else cte.sum_credited end sum_credited,
 case t1.used when 0 then 0 else cte.sum_used end sum_used
from tmptichistory1 t1 join cte
on t1.companyname = cte.companyname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:15:43.843

```
SELECT t1.id,
       t2.companyname,
       t1.credited,
       t1.used,
       t2.sum_credited,
       t2.sum_used
  FROM yourTable t1
  INNER JOIN
  (
      SELECT companyname, SUM( credited)  sum_credited , SUM(used) sum_used
        FROM yourTable 
       WHERE credited = 0
       GROUP BY companyname
      UNION
      SELECT companyname, SUM( credited)  sum_credited , SUM(used) sum_used
        FROM yourTable 
       WHERE used = 0
       GROUP BY companyname
  ) t2 ON t1.companyname = t2.companyname
  WHERE (t1.used = 0 AND t2.sum_used = 0) OR (t1.credited = 0 AND t2.sum_credited = 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T11:39:00.853

试试这个可能对你有帮助..

```
select e1.Id,e1.CompanyNmae, e1.credited, e1.used,e2.SumCredited,e2.SumUsed  
from Example e1
inner join (select CompanyNmae, sum(credited) as SumCredited, sum(used) as SumUsed 
     from Example group by CompanyNmae) as e2
  on e1.CompanyNmae=e2.CompanyNmae 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T11:41:57.030

如果您使用的是 2008 版或更高版本，则可以使用如下分析函数：

```
select 
id,
companyname,
credited,
used,
sum(credited) over (partition by companyname) sum_credited,
sum(used) over (partition by companyname) sum_used

from
tmptichistory1 
```

但是当我对你的数据运行它时，我得到以下输出：

```
+----+-------------+----------+------+--------------+----------+
| id | companyname | credited | used | sum_credited | sum_used |
+----+-------------+----------+------+--------------+----------+
|  1 | ABC         |      100 |    0 |          110 |        0 |
|  2 | ABC         |       10 |    0 |          110 |        0 |
|  3 | BBB         |        0 |   10 |          110 |       20 |
|  4 | BBB         |        0 |   10 |          110 |       20 |
|  5 | BBB         |      100 |    0 |          110 |       20 |
|  6 | BBB         |       10 |    0 |          110 |       20 |
+----+-------------+----------+------+--------------+----------+ 
```

...所以我认为您的 id = 5 和 id = 6 的行可能应该用于不同的公司名称？如果我们说 companyname CCC，那么我们会得到以下输出：

```
+----+-------------+----------+------+--------------+----------+
| id | companyname | credited | used | sum_credited | sum_used |
+----+-------------+----------+------+--------------+----------+
|  1 | ABC         |      100 |    0 |          110 |        0 |
|  2 | ABC         |       10 |    0 |          110 |        0 |
|  3 | BBB         |        0 |   10 |            0 |       20 |
|  4 | BBB         |        0 |   10 |            0 |       20 |
|  5 | CCC         |      100 |    0 |          110 |        0 |
|  6 | CCC         |       10 |    0 |          110 |        0 |
+----+-------------+----------+------+--------------+----------+ 
```

这看起来更像您在示例中的内容。

# java - XSD 的 XML 验证如何工作？

> ID：13988992
> 
> 赞同：2
> 
> 时间：2012-12-21T11:07:58.577
> 
> 标签：java, xml, xsd

> **可能重复：**
> [针对 XSD 验证 XML](https://stackoverflow.com/questions/6815579/validating-xml-against-xsd)

我正在使用此代码通过 XSD 验证我的 XML

```
 DocumentBuilder parser = factory.newDocumentBuilder();

        // Parse the file. If errors found, they will be printed.
        parser.parse(args[1]); 
```

但我想知道它是如何工作的，它会检查标签还是所有数据？它有多可靠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:32:30.727

您可以执行以下操作，在文档被解析后，根据 XML 模式验证生成的 DOM。您可以设置一个实例，`ErrorHandler`以便您可以选择如何处理验证错误。

```
public class Demo {

    public static void main(String[] args) throws Exception {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        DocumentBuilder parser = factory.newDocumentBuilder();
        Document document = parser.parse(args[1]);
        DOMSouce source = new DOMSource(document);

        SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Schema schema = sf.newSchema(new File("customer.xsd"));

        Validator validator = schema.newValidator();
        validator.setErrorHandler(new MyErrorHandler());
        validator.validate(source);
    }

} 
```

或者，您可以调用`setSchema`，`DocumentBuilderFactory`以便在解析期间进行验证，但并非所有 DOM 解析器都支持：

*   [http://docs.oracle.com/javase/6/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setSchema%28javax.xml.validation.Schema%29](http://docs.oracle.com/javase/6/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setSchema%28javax.xml.validation.Schema%29)

**了解更多信息**

下面是我博客中使用此模式验证方法的示例的链接。在该示例中，使用 a`JAXBSource`而不是 a `DOMSource`，但其他一切都相同。

*   [http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html](http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html)

# ajax - Request.Form() 不工作

> ID：13988993
> 
> 赞同：0
> 
> 时间：2012-12-21T11:08:04.757
> 
> 标签：ajax, json, asp-classic

我有一个打算通过 Ajax 将数据发送到服务器的文件，我尝试了一些库，但我无法让它们工作，所以我正在尝试 ASP 服务器文件中的简单 Request.Form() 方法，但也不起作用。

阿贾克斯帖子：

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("POST", "http://localhost/serv/sync.asp", true);
DataToSend = "id=1";                
xmlhttp.addEventListener("load", function () {
    if(xmlhttp.status === 200){
        //event handler
    };
}, false); 
xmlhttp.send(DataToSend); 
```

ASP文件：

```
<%@language=vbscript%>
<%
    value = Request.Form("id")
    Response.ContentType = "text/xml"
    response.write (value) 
%> 
```

这有什么问题吗？我已经检查了控制台中的 Post 及其工作，但我无法捕获服务器端的值。

最初的想法是发送一个 Json 字符串，在服务器中解析它并插入数据库，但无法让它工作，有没有人有一个工作片段或链接到 Classic ASP 中工作的 Json 解析方法？谢谢。

注意：由于线程问题，我尝试将服务器文件更改为不同的文件夹，并将 URL 更改为“http://127.0.0.1/serv/sync.asp”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:52:28.497

我已经成功地使用了它：

JS：

```
if (window.XMLHttpRequest) {
    httprequest = new XMLHttpRequest();
    httprequest.texto = busca.id;
} else if(window.ActiveXObject) {
    httprequest = new ActiveXObject("Microsoft.XMLHTTP");
    httprequest.texto = busca.id;
} else {
    alert("Seu navegador não suporta Ajax.");
    return false;
}

if (httprequest.readyState == 4 || httprequest.readyState == 0) {
    var busca = escape("texto texto texto");

    httprequest.open("POST", "../busca_ajax.asp", true);
    httprequest.onreadystatechange = retornaValores; 
    httprequest.send("busca=" + busca + "&teste=2");
}

function retornaValores() {
    if (httprequest.readyState == 4) {
        alert(httprequest.responseText);        
    }
} 
```

ASP：

```
 dim busca
 busca = trim(request("busca"))

 response.write busca 
```

**编辑：**

如果可以，我建议您使用 jQuery。它大大简化了这个过程：

```
$.ajax({
    url: "lista.asp",
    data: { 'ajax': 's', 'dados': '{"id": 123, "nome":"teste"}'},
    cache: false,
    dataType: "json",
    success: function(dados) {
        alert(dados);
    },
    error: function() {
        alert("ERRO!");
    }
}); 
```

ASP：

```
dim ajax, id
ajax = request.form("ajax")
dados = request.form("dados") ' this is a JSON string

response.write dados 
```

# objective-c - 如何更改 UIButton 的背景图像？

> ID：13988999
> 
> 赞同：-2
> 
> 时间：2012-12-21T11:08:26.897
> 
> 标签：objective-c, uibutton

我`UIButtons`在我的应用程序中创建了数百个动态。在创建这些时`UIButtons`，我给每个人一个标签。我想要做的是能够更改`UIButton`点击时的背景图像。如果我有一个`UIButton`带有标签的标签，我该如何更改它的背景图像`UIButton`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:14:41.453

您可以按发件人标签更改按钮图像，例如：

```
 -(IBAction)changeImage:(id)sender

    {
  [sender setImage:[UIImage imageNamed:[NSString stringWithFormat:@"%d.png",[sender tag]]] forState:UIControlStateNormal];

    } 
```

如果您将所有图像名称放在一个数组中，那么您可以执行以下操作。

```
-(IBAction)changeImage:(id)sender

    {
  [sender setImage:[UIImage imageNamed:[NSString stringWithFormat:@"%@.png",[MyImagearray ObjectAtindex:[sender tag]]]] forState:UIControlStateNormal];

    } 
```

如果这不是您想要的，请正确指定您的问题。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:40:46.250

当你点击一个按钮时，有很多方法可以做到这一点，但其中两种最好的方法是把它变成`switch statement`这样

```
- (IBAction)shouldChangeImage:(id)sender
  {
       switch([sender tag]) {
             case 1:
                   [sender setBackgroundImage:[UIImage imageNamed:@"myFirstImage.png"] forState:UIControlStateNormal];
                   break;
             case 2:
                   [sender setBackgroundImage:[UIImage imageNamed:@"mySecondImage.png"] forState:UIControlStateNormal];
                   break;

             // And so on for each button tag and then have a default for those that are not listed.

             default:
                   [sender setBackgroundImage:[UIImage imageNamed:@"myDefaultImage.png"] forState:UIControlStateNormal];
                   break;
       }
  } 
```

这对数百个按钮不好，但仍然可以工作。如果您的所有图像的名称完全不同，这也是最好的方法，但是如果您将图像命名为相同并且只是在它们前面加上标签号，这将创建更有效的代码并且更容易阅读。你会这样做。

```
- (IBAction)shouldChangeImage:(id)sender
  {
      [sender setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"myImage-%d.png",[sender tag]]] forState:UIControlStateNormal];
  } 
```

注意整件事是如何在一行上的，这样更容易阅读，效率更高。

你也可以使用一个，`else if statement`但如果你有数百个，我会推荐单行方式。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:14:54.030

您可以使用此方法更改按钮的背景图像：

```
[btn setBackgroundImage:(UIImage *) forState:(UIControlState)] 
```

你也应该通过[这个链接](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:15:10.770

```
-(IBAction)btnclicked:(id)sender

    {

   int tag=sender.tag;

  UIImage * newImage=[UIImage imageNamed:[NSString stringWithFormat:@"%d.png",tag]];
  [sender setBackgroundImage:newImage forState:UIControlStateNormal];

   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T11:15:26.587

```
///This bellow line for Normal Image with button tag just put image with tag and add Normal.
         [yourButton setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"%dNormal.png",btnGo.tag]] forState:UIControlStateNormal];

///This bellow line for UIControlStateHighlighted Image with button tag just put image with tag and add Highlited.
        [yourButton setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"%dHighlited.png",btnGo.tag]] forState:UIControlStateHighlighted];

///This bellow line for UIControlStateSelected Image with button tag just put image with tag and add Selected.

        [yourButton setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"%dSelected.png",btnGo.tag]] forState:UIControlStateSelected]; 
```

并在您的按钮单击方法中将其设置为选定的..

**对于 EX：**

```
-(IBAction)btnClicked:(id)sender{
       UIButton *btn = (UIButton*)sender;
       [btn setSelected:YES];

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-21T11:13:34.430

尝试这个

```
if(photo.tag==TagNum) [photo setBackgroundImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal]; 
```