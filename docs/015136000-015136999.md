# StackOverflow 问答 15136000-15136999

# xaml - Horizontal long list selector xaml

> ID：15136002
> 
> 赞同：1
> 
> 时间：2013-02-28T12:50:13.987
> 
> 标签：xaml, windows-phone-8

I have items coming from server dynamically and I need to create an `ItemTemplate` for those items. I looked for ScrollViewer but I couldn't find ItemTemplate or ItemsSource property.

Is there a way to list items in phone:longListSelector horizontally?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:59:07.417

您可以在 Scrollviewer 中使用这样的列表框；

```
<ScrollViewer>
  <ListBox ItemsSource="your source" ItemTemplate="your template" />
</ScrollViewer> 
```

# xml - 同一实体的不同 REST-ful 表示和内容协商

> ID：15136004
> 
> 赞同：2
> 
> 时间：2013-02-28T12:50:22.363
> 
> 标签：xml, rest, content-negotiation

鉴于 REST-ful Web 服务

```
/product/{product-id} 
```

返回 Content-Type 的 Product XML 文档

```
x-esvc/product+xml 
```

我也需要支持

```
x-esvc/prices+xml 
```

（x-esvc 是自定义 MIME 类型；产品和价格是两个子类型，+xml 暗示它是基于[RFC 3023](http://www.ietf.org/rfc/rfc3023.txt)的基于 XML 的格式）

问题是第二种格式是否应该有自己的网络服务

```
/prices/{product-id} 
```

...或者我是否应该使用内容协商和 Accept HTTP 标头来区分现有产品 Web 服务中的两种格式？

请注意，仅涉及一个真实实体（产品），并且“价格”是 OO 术语中的依赖对象列表。但是，在这两种情况下都可以使用相同的标识符。

表述该问题的另一种方法是“价格”是否可以被视为同一资源的不同表示，或者如果信息不同，是否应该将其视为另一种资源？

我确实知道内容协商通常用于区分同一图像的不同技术格式，例如 JPG 和 PNG。即信息相同但格式不同。在这种情况下，内容协商将用于区分同一实体的不同信息。

这会是 REST-ful Web 服务中对 Content Negotiation 和 Accept HTTP 标头的有效使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:55:49.400

我喜欢不同的网络服务。它简化了任何消费者的使用，因为可以通过单独指定 url 来完全表达请求。这在您项目的当前阶段可能无关紧要，但可能会随着它的发展而改变 - 组装和维护 Web 服务调用更容易，而不必摆弄请求标头。

如果您不需要/想要这种分离服务器端，您仍然可以通过 Web 服务器配置中的指令统一两个 url 位置。

操作 Web 服务也可能变得更容易：想想负载平衡和维护停机时间。

根据您的项目规模，您的里程可能会有所不同。对于一些内部 PoC，你可能最好坚持你所拥有的。

# java - 使用返回的 ArrayList

> ID：15136011
> 
> 赞同：0
> 
> 时间：2013-02-28T12:50:46.017
> 
> 标签：java, arraylist

我目前正在拼命地尝试从函数返回的 ArrayList 到我的主函数中的新 ArrayList 中......

以下是代码片段：

```
public static ArrayList<String> permute(String begin, String end) {
ArrayList<String> al=new ArrayList<String>();
//filling bla
return al;
} 
```

这是我在主函数中调用该函数的地方：

```
ArrayList<String> arr =permute("","abc"); 
```

不幸的是，arr 是空的，我不知道如何让它工作:(

提前致谢

编辑：这是完整的代码：

```
import java.util.*;
class Problem24 {

    public static ArrayList<String> permute(String begin, String end) {
        ArrayList<String> al=new ArrayList<String>();
        if (end.length() <= 1) {
            String s=begin+end;
            al.add(s);
        } else {
            for (int i = 0; i < end.length(); i++) {
                try {
                    String newString = end.substring(0, i) + end.substring(i + 1);
                    permute(begin + end.charAt(i), newString);
                } catch (StringIndexOutOfBoundsException exception) {
                    exception.printStackTrace();
                }
            }
     }
     return al;
  }
    public static void main (String[] args)
    {
        ArrayList<String> arr =permute("","abc");
            System.out.println(arr.get(0));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:10:24.087

您的 ArrayList 为空但不为空，这意味着返回部分有效。为了使用方法中的值，您需要在方法内填充 ArrayList。

ps：您应该使用 List list = new ArrayList() 或 List list = permute("", "abc") 这是依赖注入的简单版本和更好的程序设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:54:40.290

在返回值之前，请确保您正在填写`al`列表

```
 al.add(begin);
     al.add(end);
     al.add("any other string");

     return al; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:57:05.883

显然这`// filling bla`部分有问题。

我会先用替换你的代码`// filling bla`，`al.add("TEST");`看看你是否能得到一些东西。

此外，您的方法是静态的，并且未传入源数组，这表明您的代码应该以某种方式置换这些字符串。您是否可能对静态数组进行操作（即置换开始和结束之间的所有元素），并且源数组为空？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T13:19:13.433

您没有从递归调用中添加项目。

尝试将 al.addAll 添加到您的 permute 调用中：

```
al.addAll(permute(begin + end.charAt(i), newString)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T13:25:27.383

```
import java.util.*;
class Problem24
{

    public static ArrayList<String> permute(String begin, String end)
    {
        ArrayList<String> al=new ArrayList<String>();
        if (endingString.length() <= 1)
        {
            String s=begin+end;
            al.add(s);
        }
        else
        {
            for (int i = 0; i < end.length(); i++)
            {
                try
                {
                    String newString = end.substring(0, i) + end.substring(i + 1);
                    al.add(permute(begin + end.charAt(i), newString));
                }
                catch (StringIndexOutOfBoundsException exception)
                {
                    exception.printStackTrace();
                }
            }
        }
        return al;
    }

    public static void main (String[] args)
    {
            ArrayList<String> arr = permute("","abc");
            System.out.println(arr.get(0));
    }
} 
```

希望我以正确的方式纠正它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T13:41:51.800

您反复调用您的方法 permute --- 但是您没有使用它返回时返回的内容。换句话说，您每次调用 permute 时都会创建一个新数组，但是您在 for 循环中获得的所有内容都会丢失，因为您没有将它传递给下一个 permute() 调用 --- 最终您返回一个空数组，您可以在其中什么都没放。

# mongodb - 如何在 MongoDB 中按 $elemMatch 排序？

> ID：15136016
> 
> 赞同：3
> 
> 时间：2013-02-28T12:50:54.607
> 
> 标签：mongodb, sorting, aggregation-framework

在我的 MongoDB 数据库中，我有一系列产品。每个产品都包含一个数组中的发布信息，例如

```
{
  "name" : "foo",
  "release" : [{
      "region" : "GB",
      "active" : "Y",
      "date" : ISODate("2012-03-01T00:00:00Z")
    }, {
      "region" : "US",
      "active" : "Y",
      "date" : ISODate("2012-09-01T00:00:00Z")
    }, {
      "region" : "FR",
      "active" : "N",
      "date" : ISODate("2010-01-01T00:00:00Z")
    }]
} 
```

我想查找所有在 GB 区域有效发布的产品，并按 GB 发布日期对结果进行排序。

我尝试使用以下方法执行此操作：

```
db.product.find(
  { "release" : { "$elemMatch" : { "region" : "GB", "active" : "Y" } } }
).sort({ "release.date" : 1 }); 
```

这会找到正确的产品，但不会按匹配元素的发布日期排序（而是按数组中的最小发布日期排序）。

从我目前阅读的内容来看，似乎不可能按匹配元素的属性进行排序，这是正确的吗？

可以用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)来完成吗，如果可以的话怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T20:17:06.497

这是您可以运行以获得所需内容的聚合：

```
db.release.aggregate([
         {$unwind:"$release"},
         {$match:{"release.active":"Y", "release.region":"GB"}},
         {$sort:{"release.date":1}}
]) 
```

这将展开发布数组，根据您的条件匹配文档并在发布日期对选定的文档进行排序。

# php - 使用 ubercart 主题（*）TCPDF 将 Ubercart 发票转换为 PDF 文档

> ID：15136025
> 
> 赞同：0
> 
> 时间：2013-02-28T12:51:21.033
> 
> 标签：php, drupal-6, tcpdf, ubercart

我正在开发一个模块上的 drupal 6，当 uc 订单状态更改为 certian 状态时，该模块应该以 pdf 格式向客户发送可打印的发票。我的第一个想法是使用ubercart提供的主题功能，使用tcpdf。使用主题功能的输出 html 提供 tcpdf 效果不佳。知道 tcpdf 不支持所有 html 标签和属性，我决定制作自己的模板。

我的问题是：有没有一个模块或更好的方法来完成这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:57:16.160

建议使用此模块为 Ubercart 订单创建 PDF 发票：http: [//drupal.org/project/uc_pdf_invoice](http://drupal.org/project/uc_pdf_invoice)

# javascript - 如何从 asp.net 按钮单击调用 javascript？

> ID：15136034
> 
> 赞同：3
> 
> 时间：2013-02-28T12:51:47.357
> 
> 标签：javascript, jquery, asp.net, ajax

我正在使用 asp.net 并希望执行以下 javascript 代码。我正在使用VS2010。

```
 <title></title>
<script type="text/javascript">
    function myClosure() {
        var canyousee = "here I'm ";
        return (function theClosure() {
            return { canyouseeIt: canyousee ? "yes" : "no" };
        });
    }
    var closure = myClosure();
    closure().canyouseeIt;
</script>
</head>

<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="myClosure();" />
    </div> 
```

我如何`function myClosure()`在按钮单击时执行，以便它给我即`confirm`弹出窗口`yes`？`no`

1.  我需要输入哪个代码`confirm`？
2.  我该如何执行它`Button Click`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:10:28.567

```
<html>
<head>
<script type="text/javascript">
function myClosure(){
          var r=confirm("Press a button!")
        if (r==true)
        {
             alert("You pressed OK!")
             return true;
        }
        else
        {
              alert("You pressed Cancel!");
              return false;
        }

}
</script>
</head>

<body>
<form id="form1" runat="server">
<div>
    <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="myClosure();" />
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T14:41:54.613

我希望这能有所帮助。我必须承认，我不清楚你想要达到的目标。

```
<title></title>
<script type="text/javascript">
     myClosure=function() {
        var canyousee = "here I'm ";
        return (function () {
            return { canyouseeIt: function(){return confirm (canyousee)}};
        });
    }
</script>
</head>

<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="(myClosure())().canyouseeIt()" />
    </div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-17T05:16:41.720

采用

```
onclientclick="javascript:return YourFunction();"

<script> 
function YourFunction() {
//Do your stuff

return true;
}
</script> 
```

如果您返回 true，则将调用您的 asp.new onclick 事件。如果您返回 false，则不会调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T12:54:32.373

正如你所说的那样，但通过 return false on 来阻止回帖

```
OnClientClick="myClosure();return false;" 
```

我不知道您是否理解其余的逻辑，但这是您现在的问题。

# java - rich:scrollableDataTable 正在生成一个额外的列

> ID：15136035
> 
> 赞同：0
> 
> 时间：2013-02-28T12:51:52.470
> 
> 标签：java, jsf, richfaces, jboss7.x, ajax4jsf

我正在使用以下代码：

```
<rich:scrollableDataTable value="#{allActiveUsers}" 
                                    var="user" 
                                    rows="20"
                                    >
                         <a4j:support event="onRowClick" 
                                      action="#{editUser.prepareSelectionOfUser(user)}"
                                      reRender="editUserForm"
                                      />   

                        <f:facet name="header">
                            <h:outputText value="Active  Users" />
                        </f:facet>
                        <h:column>

                            <f:facet name="header">Username</f:facet>
                            <h:outputText value="#{user.login}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">Full Name</f:facet>
                            <h:outputText value="#{user.name}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">Email address</f:facet>
                            <h:outputText value="#{user.email}" />
                        </h:column>
                    <f:facet name="footer">
                        <rich:datascroller renderIfSinglePage="false" maxPages="5" />
                    </f:facet>

                </rich:scrollableDataTable> 
```

问题是它无缘无故地产生了一个白色的鬼柱。有谁知道我怎样才能摆脱它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:47:42.713

来自richfaces论坛：

> 当列的总宽度不足以覆盖表空间时，该列用于填充表空间。当列被调整大小时，它们会从这个额外的列中占用空间。

根据richfaces 论坛上的这个帖子，这是设计使然[。](https://community.jboss.org/thread/150502)并且它会在滚动期间补偿表/列的大小调整。要修复，请手动设置`width`列上的属性。

另请参阅[此线程](https://community.jboss.org/message/50683)

# ios - 在 Rubymotion 中使用弱框架在 iOS 中支持早期版本

> ID：15136037
> 
> 赞同：1
> 
> 时间：2013-02-28T12:51:54.857
> 
> 标签：ios, rubymotion, social-framework

我已经构建了我的 Rubymotion 应用程序来包括 Facebook 和 Twitter 发布。

为此所需的`SLComposeViewController`类仅适用于 iOS 6.0 及更高版本。

我想让 iOS 5.0 用户也可以使用该应用程序。

我将 Social 和 Twitter 框架移到了我的 rakefile 中的弱框架配置中：

```
app.weak_frameworks += %w{ Social Twitter } 
```

在我的控制器中，我`SLComposeViewController`在尝试加载 Facebook 发布功能之前检查是否已定义（暗示 iOS > 5）。

```
if defined?(SLComposeViewController)
  # add the Facebook stuff
end 
```

我遇到的问题是 Facebook 发布功能（应该只能从 iOS 6 开始使用）正在显示并且正在 iOS 5.0 模拟器中工作。

谁能解释这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:03:45.347

您需要通过打开 Xcode、转到首选项、转到下载并从那里安装来安装 iOS 5.0 模拟器。您还可以在使用时安装 5.1 和 6.0。

要在 5.0 模式下运行 iOS 模拟器，请执行以下操作：

```
rake target=5.0 
```

如果您安装了 5.1 和 6.0，您显然也可以使用它们。

![伊姆古尔](../Images/70785acbb1a7b3d19ef9d40e2f3ba33f.png) ![伊姆古尔](../Images/fa111e693720d5577c6c03efd06f45ad.png)

# asp.net - Json.Net 如何将 null 反序列化为空字符串？

> ID：15136041
> 
> 赞同：4
> 
> 时间：2013-02-28T12:52:08.957
> 
> 标签：asp.net, c#-4.0, json.net

例如，我的 class_ 中有字符串属性

```
 [DataMember]
        [JsonProperty(PropertyName = "email")]
        [StringLength(40, ErrorMessage = "The Mobile value cannot exceed 40 characters. ")]
        public string Email { get; set; } 
```

由于某种原因，在 Convert.Deserialize 过程中，我需要在此属性中使用空字符串，而不是在 null 上，以防此值未在 JSON 对象中设置。怎么做 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T12:58:57.007

您可以使用[DefaultValue](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_DefaultValueHandling.htm)属性。

把它装饰成

```
[DataMember]
[JsonProperty(PropertyName = "email", DefaultValueHandling = DefaultValueHandling.Populate)]
[StringLength(40, ErrorMessage = "The Mobile value cannot exceed 40 characters. ")]
[DefaultValue("")]
public string Email { get; set; } 
```

# javascript - 嵌套在触发器内的jQuery切换不起作用

> ID：15136055
> 
> 赞同：0
> 
> 时间：2013-02-28T12:52:41.593
> 
> 标签：javascript, jquery

出于某种原因，下面的简单脚本不起作用 - 我希望在单击“投资组合”链接时切换子菜单（子菜单正确隐藏）。

如果我更改触发器 div 使其位于页面的其他位置，则它可以正常工作。有人可以解释下面的问题是什么吗？你不允许筑巢什么的吗？

JS：

```
<script>
jQuery(document).ready(function ($) {
  $('.sub-menu').hide();
  $('#menu-item-154 > a').click(function(){
    $('.sub-menu').toggle();
  });
});
</script> 
```

页面 HTML

```
<div class="menu-main-menu-container">
  <ul id="menu-main-menu" class="">
    <li id="menu-item-154" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-154">
      <a href="#">Portfolio</a>
      <ul class="sub-menu">
        <li id="menu-item-26" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a href="/?page_id=20">ITEM 1</a></li>
        <li id="menu-item-55" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-55"><a href="/?page_id=48">ITEM 2</a></li>
      </ul>
    <li id="menu-item-56" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-56"><a href="/?cat=1">NEWS &#038; BLOG</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:58:13.033

您没有关闭`li`投资组合之后：

```
<li id="menu-item-154" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-154">
  <a href="#">Portfolio</a>
</li> 
```

为什么不使用 clickevent `a href`？

```
<a id="opensub1" href="#">Portfolio</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:56:47.483

采用`find()`

```
 $('.sub-menu').hide();
  $('#menu-item-154').find('a').click(function(){
    $('.sub-menu').toggle();
  }); 
```

# scala - Scala 将隐式函数应用于集合

> ID：15136056
> 
> 赞同：4
> 
> 时间：2013-02-28T12:52:42.173
> 
> 标签：scala, collections, implicit

编辑：我正在使用 Scala 2.9.2

在 Scala 中，我定义了一个包含 Double 的自定义类：

```
class DoubleWrap( d : Double ) {
    def double( ) = d * 2
} 
```

以及从 Double 到 DoubleWrap 的隐式转换：

```
implicit def wrapDouble( d : Double ) = new DoubleWrap( d ) 
```

这允许我执行以下操作：

```
scala> 2.5.double
res0: Double = 5.0 
```

但是，由于 Scala 中存在从 Int 到 Double 的隐式转换，我还可以执行以下操作：

```
scala> 2.double
res1: Double = 4.0 
```

该运算符也可以应用于双类型集合的所有元素，使用`map`

```
scala> List( 1.0, 2.0, 3.0 ).map( _.double )
res2: List[Double] = List(2.0, 4.0, 6.0) 
```

但是，如果我尝试将该函数应用于整数集合的所有元素，它将不起作用：

```
scala> List( 1, 2, 3 ).map( _.double )
<console>:10: error: value double is not a member of Int
          List( 1, 2, 3 ).map( _.double ) 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:28:55.170

在 scala 中，隐式转换**不会**自动链接。换句话说，编译器将寻找一个**允许**代码有意义的隐式转换，它永远不会尝试应用两个（或更多）连续的隐式转换。

在您的示例中，您可以做的事实与从到in`2.double`的隐式转换这一事实无关。作为证明，在 REPL 中试试这个：`Double``Int``Predef`

```
scala> val i: Int = 2
i: Int = 2

scala> i.double
<console>:13: error: value double is not a member of Int
              i.double 
```

它不编译。那么为什么要`2.double`编译呢？好问题。我以为我直观地理解了这一点：`2`首先可以解释为`Int`值 2 或`Double`值 2.0，所以我的直觉是，在这种情况下，`2`它已经是 a 。`Double`但是，我认为这是错误的，因为即使以下内容也会编译，令人惊讶的是：（`(2:Int).double`甚至更奇怪：） `((1+1):Int).double`。老实说，我大吃一惊，不知道为什么会编译而`val i: Int = 2; i.double`不会编译。

所以总结一下，scala 不会尝试同时应用两个隐式转换是正常的，但由于某种原因，这个规则似乎不适用于**常量表达式**。

现在有一种方法可以解决您的问题：只需修改您的隐式转换，以便它接受任何本身可以隐式转换为`Double`. 实际上，这允许链接隐式转换：

```
implicit def wrapDouble[T <% Double]( d : T ) = new DoubleWrap( d ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:59:52.143

这是一个应该很快[修复的](https://github.com/scala/scala/pull/2215 "fixed")[错误](https://issues.scala-lang.org/browse/SI-7228 "漏洞")。

# r - r中的Excel OFFSET函数

> ID：15136062
> 
> 赞同：2
> 
> 时间：2013-02-28T12:53:00.467
> 
> 标签：r, excel, offset

我正在尝试从 Excel 模拟 OFFSET 函数。我知道这可以为单个值完成，但我想返回一个范围。我想返回一组偏移量为 1 且组大小为 2 的值。例如，在第 4 行，我想有一个值为 a 列、第 3 行和第 2 行的组。对不起，但我我很难过。

是否可以使用 cbind 或类似方法将此结果作为另一列添加到数据框中？或者，我可以在矢量化函数中使用它，以便我可以求和或表示结果吗？

样机示例：

```
> df <- data.frame(a=1:10)
> df
    a
1   1
2   2
3   3
4   4
5   5
6   6
7   7
8   8
9   9
10 10

> #PROCESS 

> df
    a   b
1   1   NA
2   2   (1)
3   3   (1,2)
4   4   (2,3)
5   5   (3,4)
6   6   (4,5)
7   7   (5,6)
8   8   (6,7)
9   9   (7,8)
10 10   (8,9) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:52:41.190

这应该可以解决问题：

```
df$b1 <- c(rep(NA, 1), head(df$a, -1))
df$b2 <- c(rep(NA, 2), head(df$a, -2)) 
```

请注意，结果必须存在于两列中，因为数据框中的列仅支持简单数据类型。（除非你想求助于复数。）`head`用负参数从尾部切掉参数的否定值，try `head(1:10, -2)`。`rep`是重复，`c`是串联。如果`<-`新列尚不存在，则分配会添加一个新列。

Excel 所称的 OFFSET 有时也称为*lag*。

**编辑**：根据 Greg Snow 的评论，这里有一个更优雅但也更难理解的版本：

```
df <- cbind(df, as.data.frame((embed(c(NA, NA, df$a), 3))[,c(3,2)])) 
```

逐个组件地尝试它，看看它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:02:09.853

你想要这样的东西吗？

```
> df <- data.frame(a=1:10)
> b=t(sapply(1:10, function(i) c(df$a[(i+2)%%10+1], df$a[(i+4)%%10+1])))
> s = sapply(1:10, function(i) sum(b[i,]))
> df = data.frame(df, b, s)
> df
    a X1 X2  s
1   1  4  6 10
2   2  5  7 12
3   3  6  8 14
4   4  7  9 16
5   5  8 10 18
6   6  9  1 10
7   7 10  2 12
8   8  1  3  4
9   9  2  4  6
10 10  3  5  8 
```

# ios - 使用流布局，还是自定义？

> ID：15136063
> 
> 赞同：4
> 
> 时间：2013-02-28T12:53:01.337
> 
> 标签：ios, cocoa-touch, uikit, uicollectionview, uicollectionviewlayout

我想构建一个集合视图布局，如下图所示。

首先，我想将特定部分的所有项目保留在同一行。当用户垂直滚动时，这些部分会滚动到页面之外。当用户水平滚动时，项目左右滚动（向左滚动时在部分标题下“折叠”，从右侧将新项目带到屏幕上）。

![在此处输入图像描述](../Images/942eda494cb9aa2119971078ddb8e0b0.png)

我知道 Apple 说“如果它看起来像一个网格，你可以使用 Flow Layout”，但我想了解这是否只是一个笼统的声明，或者上述内容是否会突破限制。

**上面的布局可以使用 FlowLayout 完成，还是我最好从头开始构建自定义布局？**

*如果您是布局大师，并且这是“儿童游戏”，我很乐意看到如何进行的示例。*

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T05:11:25.717

您需要使用继承 UICollectionViewFlowLayout 的布局类。通过这样做，您可以使用以下方法自定义布局行为。您还可以获得 Flow Layout 的所有钩子。

```
 - (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect; // return an array layout attributes instances for all the views in the given rect

 - (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath;
  - (void)prepareLayout; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T09:12:50.310

无需费心创建自定义 UICollectionViewLayout 子类，您可以通过使用标准表格视图来实现您正在寻找的行为，每行包含一个标题视图的单元格和水平滚动集合查看行项目。

我整理了一个[小例子，你可以在这里下载](http://cocoatricks.com/downloads/ScrollingRows.zip)。

当您垂直滚动表格视图时，需要做一些额外的工作来保持集合视图的滚动位置，因此我将其保存到实例变量中，并在请求表格单元格时恢复它。除此之外，我认为示例项目相当简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-06T12:14:09.407

[这](https://github.com/mayqiyue/MQHorizontalFlowLayout)是我的实现！希望对你有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T05:27:45.513

您不能在这里继承 UICollectionViewFlowLayout，因为它是基于单行的布局。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T18:34:06.607

感谢您的出色回答。这个对我有用。您还可以为每个 tableview 部分指定一行，并为每个 collectionview 添加标题部分。

# jquery - jquery Youtube api 自动提示脚本

> ID：15136068
> 
> 赞同：-2
> 
> 时间：2013-02-28T12:53:15.640
> 
> 标签：jquery, css, ajax, youtube

我试图基本上将我的两个脚本合并在一起，但我遇到了麻烦。

我想要的是用户开始搜索 youtube 视频，并在输入框下弹出搜索建议。然后用户点击其中一个建议，视频就会发布到页面上。

问题是我有一个脚本执行第一部分，另一个脚本执行第二部分。我正在尝试将脚本合并为一个，无论我多么努力，我似乎​​都无法做到。请帮忙！！

这是两个文件（按顺序）：

索引.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Youtube Instant Search Jquery Plugin - by Karthikeyan K</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function() {
$("#y_search").keyup(function() {
var s_text = $.trim($("#y_search").val());
$('#video_loader').YoutubeVideo({
feedurl:'http://gdata.youtube.com/feeds/api/videos?q='+s_text+'&v=2&format=5&alt=jsonc', // your rss feed url here...
count:'5', // total no of videos
height:'0', //video height
width:'0', //video width
loadingtext:'fetching videos from youtube' //loading text...
});
});
});

(function( $ ) {
$.fn.YoutubeVideo = function (pars) {
  var feeddiv = $(this);
  var pubdt;
$(this).html("<center>"+pars.loadingtext+"</center>");
  $.ajax({type:"GET",url:pars.feedurl+"&max-results="+pars.count,dataType:"jsonp",success:function(yt_data){  

  feeddiv.html('');
  $.each(yt_data.data.items,function(i,entry){ 
  var video_id=entry.id;
  var video_frame="<iframe width='"+pars.width+"' height='"+pars.height+"' src='http://www.youtube.com/embed/"+video_id+"' frameborder='0' type='text/html'></iframe>";
  pubdt=new Date(entry.updated);
  feeddiv.append('<div class="frame">');
  feeddiv.append('<div class="ItemTitle">'+entry.title+' - <span class="ItemDate">'+pubdt.toLocaleDateString()+'</span></div>');
  feeddiv.append('<div class="video">'+video_frame+'</div>');
  feeddiv.append('</div>');
  }) }
});
}})( jQuery );// JavaScript Document

function watermark(inputId,text){
var inputBox = document.getElementById(inputId);
if (inputBox.value.length > 0){
  if (inputBox.value == text)
    inputBox.value = '';
}
else
  inputBox.value = text;
}

</script>
<style>
body { background:#336699; height:800px; }
div.frame { margin-bottom:20px; padding-bottom:10px; }
.video { padding:2px; text-align:center;}
span.ItemDate { font-size:11px; color:#ccc; }
.ItemTitle { font-size:18px; font-weight:bold; margin-bottom:4px; border-bottom:1px solid    #ccc; }
#y_search { width:98%; height:40px; padding:1px; font-size:18px; }
</style>

</head>
<body>
<div style="margin:0 auto; width:700px; background:#fafafa; min-height:500px; padding:10px; border:2px solid #f1f1f1;">
<h3>Youtube Search</h3>
<center><input type="text" id="y_search" value="type here" onfocus="watermark('y_search','type here');" onblur="watermark('y_search','type here');"  />
</center>
<div id="video_loader"> </div>

</div>

</body>
</html> 
```

布局.html：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title> Demo by BinaryMuse</title>

<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

<style type='text/css'>
body {
padding: 10px;
font-family: Arial, sans-serif;
font-size: 10pt;
}

.container {
background-color: #F7F7F7;
border: 1px solid rgba(0, 0, 0, .05);
padding: 3px;
}

.preview {
position: relative;
cursor: pointer;
float: left;
padding-right: 5px;
}

.play {
position: absolute;
left: 10px;
bottom: 10px;
}

.info-small {
text-size: 8pt;
color: gray;
}

a {
color: #3B5998;
text-decoration: none;
}

a:hover {
text-decoration: underline;
}

</style>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
var youtube_video_id = "Cgovv8jWETM";
var video_url = "http://youtube.com/watch?v=" + youtube_video_id;
var thumbnail_url = "http://img.youtube.com/vi/" + youtube_video_id + "/1.jpg";
var iframe_url = "http://www.youtube.com/embed/" + youtube_video_id + "?autoplay=1";
var api_url = "https://gdata.youtube.com/feeds/api/videos/" + youtube_video_id + "?v=2&alt=json-in-script&callback=?";

$(function() {
// Get video information and set the title.
$.getJSON(api_url, function(data) {
$(".info").html("<b><a href='" + video_url + "' target='_blank'>" + data.entry.title.$t +  "</a></b>");
});

// Set the thumbnail image for the video.
$(".preview img.thumb").attr("src", thumbnail_url);

// Switch to the iframe when the image is clicked.
$(".preview").click(function() {
$(this).html("<iframe width='400' height='250' src='" + iframe_url + "' frameborder='0'  allowfullscreen></iframe>");
$(this).css("float", "none");
});
});

});//]]>  

</script>

</head>
<body>
<div class="container">
<div class="preview">
<img class="thumb">
<img class="play" src="https://s-static.ak.fbcdn.net/rsrc.php/v2/yG/r/Gj2ad6O09TZ.png">
</div>
<div class="info">

</div>
<div class="info-small">
www.youtube.com
</div>
<div style="clear: both;"></div>
</div>

</body>

</html> 
```

再次感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:32:52.390

我为您合并了这两个文件并将结果放在小提琴上：http: [//jsfiddle.net/K6Wnu/](http://jsfiddle.net/K6Wnu/)

有一些可以优化的东西（我没有改变你的大部分代码，只是将部分放在一些地方以便它们工作）......我希望我把你推向了正确的方向。

我从您的第二个文件中包含了一些 html，以添加到您的第一个脚本中的 dom 元素中。例如：

```
feeddiv.append('<div class="preview" id="'+video_id+'"></div>'); 
```

在第二个脚本中保存到变量中的所有信息......您将获得使用 ajax 返回的 json 对象。所以你只需要提取它。

我希望这是你想要的 =)

# jsp - 如何获取脚本自动完成的回调

> ID：15136075
> 
> 赞同：1
> 
> 时间：2013-02-28T12:53:35.557
> 
> 标签：jsp, prototypejs, scriptaculous

在我的 jsp 文件中，我有一个搜索文本框，我正在尝试使用原型和 scriptaculous 库从我的服务器 jsp 组件中获取自动建议到 div 中。

以下是我的jsp页面中的部分

```
<%
String name = "objectName";
%>

<input autocomplete="off" name="<%=name%>" size="60" type="text" value="" />
<div class="auto_complete" id="object_name_auto_complete"></div>
<script type="text/javascript">new Ajax.Autocompleter('<%=name%>', 'object_name_auto_complete', '<%=request.getContextPath()%>/component/ajax_introdata', {})</script> 
```

请求已成功发送到服务器及其打印结果，然后结果格式为

```
<ul><li>suggestion-1</li></ul> 
```

但建议未显示在客户端 jsp 文本字段中。只是想知道如何检查来自客户端 jsp 的请求状态（通过使用回调）以进行故障排除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:21:06.307

`Ajax.Automcompleter()`正在寻找元素 ID 而不是元素名称 - div 持有者`object_name_auto_complete`是正确的，但您需要更改

```
<input autocomplete="off" name="<%=name%>" size="60" type="text" value="" /> 
```

至

```
<input autocomplete="off" name="<%=name%>" id="<%=name%>" size="60" type="text" value="" /> 
```

# javascript - 如何使用键盘输入来做某事？

> ID：15136080
> 
> 赞同：0
> 
> 时间：2013-02-28T12:53:56.843
> 
> 标签：javascript, html, button, windows-8, keyboard

我在屏幕上有一个按钮。如果用户在他的物理键盘上按下“a”，那么按钮应该将该键盘事件注册为点击。我在 Windows 8 Dev 门户上没有找到任何关于此的文档，但也许我没有进行足够的搜索。但如果有人有同样的运气，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:58:18.903

如果您使用的是 jQuery，您可以注册一个`keydown`// `keyup`-event `keypress`。并使用归一化`event.which`来检测密钥：

```
$(document).on("keydown", function(event) {
    // A = 65
    // Z = 90

    if ( event.which === 65 ) {
        // key pressed is A
        $("button").trigger("click");
    }
}); 
```

您还可以使用[mousetrap.js 之类的库](http://craig.is/killing/mice) [^(（查看全局绑定）)]：

```
Mousetrap.bind('a', function() { 
    $("button").trigger("click");
}); 
```

# jsf - Javascript延迟滚动问题

> ID：15136081
> 
> 赞同：0
> 
> 时间：2013-02-28T12:53:58.260
> 
> 标签：jsf, xhtml, lazy-loading

每当我添加以下代码以延迟滚动到我的 index.xhtml 时，我都会遇到异常

```
<script type="text/javascript">

$(document).ready(function(){
    function lastAddedLiveFunc()
    {
        $('div#lastPostsLoader').html('<img src="bigLoader.gif">');

        $.get("loadmore.php", function(data){
            if (data != "") {
                //console.log('add data..');
                $(".items").append(data);
            }
            $('div#lastPostsLoader').empty();
        });
    };

    //lastAddedLiveFunc();
    $(window).scroll(function(){

        var wintop = $(window).scrollTop(), docheight = $(document).height(), winheight = $(window).height();
        var  scrolltrigger = 0.95;

        if  ((wintop/(docheight-winheight)) > scrolltrigger) {
         //console.log('scroll bottom');
         lastAddedLiveFunc();
        }
    });
}); 
```

1) 索引.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
    <link href="Css/StyleSheet.css" rel="stylesheet" type="text/css"
        media="screen" />

<script type="text/javascript">

$(document).ready(function(){
    function lastAddedLiveFunc()
    {
        $('div#lastPostsLoader').html('<img src="bigLoader.gif">');

        $.get("loadmore.php", function(data){
            if (data != "") {
                //console.log('add data..');
                $(".items").append(data);
            }
            $('div#lastPostsLoader').empty();
        });
    };

    //lastAddedLiveFunc();
    $(window).scroll(function(){

        var wintop = $(window).scrollTop(), docheight = $(document).height(), winheight = $(window).height();
        var  scrolltrigger = 0.95;

        if  ((wintop/(docheight-winheight)) > scrolltrigger) {
         //console.log('scroll bottom');
         lastAddedLiveFunc();
        }
    });
});

</script>

</h:head>

<h:body class="thrColElsHdr">

    <div id="header">
        <div class="header3">
            <div class="header4"></div>

            <div class="header5">
                <h:form>
                    <ul class="menu" rel="sam1">
                        <li class="active"><a href="Home.xhtml">Home</a></li>
                        <li><h:commandLink action="#{statusBean.navigate}">Profile</h:commandLink></li>
                        <li><a href="photos.xhtml">Photos</a></li>
                        <li><a href="#">Account Settings</a></li>
                        <li><a href="logoutServ.do" style="border-right: :none;">Logout</a></li>

                    </ul>
                </h:form>
            </div>
        </div>
    </div>
    <div id="container">

        <div id="sidebar1">
            <img
                src="../images/profilePicture/#{sessionScope['userdet']['image']}"
                width="150px" />
            <div class="tab1">Hello</div>
            <div class="tabs"
                style="border-bottom-style: groove; border-bottom-color: #eeffff; border-bottom-width: 1px;">
                <a
                    style="text-decoration: none; font-size: small; text-align: left; color: #bbbbbb;">Friends
                    and Details</a>
            </div>
            <a href="friends.xhtml"
                style="text-decoration: none; font-size: x-small; color: black;">
                <div class="tabs">

                    <img src="../Image/people.png" height="20px" width="20px" />
                    Friends
                </div>
            </a> <a href="userdetails.xhtml"
                style="text-decoration: none; font-size: x-small; color: black;">
                <div class="tabs">
                    <img src="../Image/Document-Write-icon.png" height="20px"
                        width="20px" /> User Details
                </div>
            </a> <a href="NewFile.xhtml"
                style="text-decoration: none; font-size: x-small; color: black;">
                <div class="tabs">
                    <img src="../Image/Document-Write-icon.png" height="20px"
                        width="20px" /> Chat
                </div>
            </a>
            <div class="tabs"
                style="border-bottom-style: groove; border-bottom-color: #eeffff; border-bottom-width: 1px;">
                <a
                    style="text-decoration: none; font-size: small; text-align: left; color: #bbbbbb;">Apps</a>
            </div>

        </div>

        <div id="sidebar2">

            <div class="tabs"
                style="border-bottom-style: groove; border-bottom-color: #eeffff; border-bottom-width: 1px;">
                <a
                    style="text-decoration: none; font-size: small; text-align: left; color: #bbbbbb;">Birth
                    Days</a>
            </div>

            <div class="tabs"
                style="border-bottom-style: groove; border-bottom-color: #eeffff; border-bottom-width: 1px;">
                <a
                    style="text-decoration: none; font-size: small; text-align: left; color: #bbbbbb;">Sponsors</a>
            </div>
            <a href="http://www.hp.com/"
                style="text-decoration: none; font-size: x-small; color: black;">
                <div class="tabs">
                    <img src="../Image/hp-ad-printer.jpg" width="100px" /><br />
                    <p
                        style="text-decoration: none; font-size: xx-small; text-align: left; color: #bbbbbb;">Hp
                        comes with new edge of Ultra book series.</p>
                </div>
            </a> <a href="http://www.samsung.com/in/"
                style="text-decoration: none; font-size: x-small; color: black;">

                <div class="tabs">
                    <img
                        src="../Image/samsung-wireless-phones-successful-small-86757.jpg"
                        width="100px" /><br />
                    <p
                        style="text-decoration: none; font-size: xx-small; text-align: left; color: #bbbbbb;">Samsung
                        renovating their ideas with new technologies and introduced those
                        intos Mobiles and Laptops.</p>

                </div>

            </a>
            <div class="tabs"
                style="border-bottom-style: groove; border-bottom-color: #eeffff; border-bottom-width: 1px;">
                <a
                    style="text-decoration: none; font-size: small; text-align: left; color: #bbbbbb;">Advertisement</a>
            </div>

            <a href="http://www.myntra.com/"
                style="text-decoration: none; font-size: x-small; color: black;">
                <div class="tabs">
                    <img src="../Image/Myntra-Logo1.png" width="100px" /><br />
                    <p
                        style="text-decoration: none; font-size: xx-small; text-align: left; color: #bbbbbb;">Shops
                        from online and get from home with high % of off .</p>

                </div>
            </a> <a href="http://www.snapdeal.com/"
                style="text-decoration: none; font-size: x-small; color: black;">
                <div class="tabs">
                    <img src="../Image/snapdeal_logo_new.jpg" width="100px" /><br />
                    <p
                        style="text-decoration: none; font-size: xx-small; text-align: left; color: #bbbbbb;">Get
                        greatest deals and offers from snapdeal and order it and get it in
                        a day.</p>

                </div>
            </a>

            <!-- end #sidebar2 -->
        </div>

        <div id="mainContent">
            <div class="det">
                <h:form style="float:right;font-size:small;">&nbsp;&nbsp;&nbsp;
      <h:outputText value="Search your friends here."
                        style="font-size:small;color:#CCCCCC;" />
                    <p:autoComplete id="auto" value="#{searchBean.selectedUser}"
                        completeMethod="#{searchBean.completeUser}" var="p"
                        itemLabel="#{p.userName}" itemValue="#{p}"
                        converter="userConverter" forceSelection="true"
                        style="width:300px;">
                        <p:column>
                            <img src="../images/profilePicture/thumb/#{p.image}"
                                style="height: 40px; width: 40px;" />
                        </p:column>
                        <p:column>  
                    #{p.firstName} #{p.lastName}   
            </p:column>
                    </p:autoComplete> 
         &nbsp;<h:commandButton image="../Image/magnify.png"
                        action="#{searchBean.navigate}" style="height:20px;float:right;" />
                    <br />
                </h:form>
            </div>

            <h2>
                <h:outputText styleClass="outputLabel"
                    value="#{sessionScope['userdet']['firstName']} #{sessionScope['userdet']['lastName']} " />
            </h2>

            <div class="details">

                <h:outputText value="Email: #{sessionScope['userdet']['email']}"
                    styleClass="textstyle3" />
                <h:outputText
                    value="Date of Birth: #{sessionScope['userdet']['birthDate']}"
                    styleClass="textstyle3" />
                <br />
                <h:outputText
                    value="Contact No: #{sessionScope['userdet']['contactNo']}"
                    styleClass="textstyle3" />
                <h:outputText value="About: #{sessionScope['userdet']['quote']}"
                    styleClass="textstyle3" />
                <br />
                <h:outputText value="City: #{sessionScope['userdet']['city']}"
                    styleClass="textstyle3" />
                <h:outputText value="State: #{sessionScope['userdet']['state']}"
                    styleClass="textstyle3" />
                <h:outputText value="Country: #{sessionScope['userdet']['country']}"
                    styleClass="textstyle3" />
                <br />
                <h:graphicImage
                    url="../Image/Mac-App-Updates-CrossOver-Mac-9-0-1-Floola-5-7-2.png"
                    height="15px" width="15px" style="padding-left:80%;" />
                <a href="userdetails.xhtml"
                    style="font-size: small; text-decoration: none; color: red;">Update
                    Details</a>

            </div>
            <div style="width: 100%; background-color: #EEEEEE;">
                <h:panelGrid columns="1">
                    <h:form>
                        <h:outputText value="Speak Out" />
                        <br />
                        <h:outputText value="Share whats in your mind.!"
                            style="color:#aaaaaa;font-size:x-small;" />
                        <p:inputTextarea name="content" id="sharetext" cols="60" rows="2"
                            onclick="this.value='';" value="#{statusBean.status.statusmsg}"
                            style="text-size:small;" />
                        <br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <p:commandButton type="submit" value="Speak Out"
                            action="#{statusBean.save}" ajax="false" styleClass="buttonstyle" />
                        <br />
                    </h:form>

                    <h:form>
                        <h:outputText value="Pic Out" />
                        <br />
                        <p:fileUpload fileUploadListener="#{statusBean.handleFileUpload}" />
                        <h:outputText value="Share whats in your mind through an image.!"
                            style="color:#aaaaaa;font-size:x-small;" />
                        <p:inputTextarea name="content" id="sharetext" cols="60" rows="2"
                            onclick="this.value='';"
                            value="#{statusBean.status.picstatusdesc}"
                            style="text-size:small;" />
                        <br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <p:commandButton type="submit" value="Pic Out"
                            action="#{statusBean.picSave}" ajax="false"
                            styleClass="buttonstyle" />
                        <br />
                    </h:form>
                    <h:form>
                        <h:outputText value="Video Out" />
                        <br />

                        <h:inputText value="#{statusBean.status.videostatus}" style="height: 36px; width: 318px; "/>
                        <p:inputTextarea name="content" id="sharetext" cols="60" rows="2"
                            onclick="this.value='';"
                            value="#{statusBean.status.videostatusdesc}"
                            style="text-size:small;" />
                        <br />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <p:commandButton type="submit" value="Video Out"
                            action="#{statusBean.videoSave}" ajax="false"
                            styleClass="buttonstyle" />
                        <br />
                    </h:form>

                </h:panelGrid>
            </div>

            <!--  -->

<div class="items">
            <c:forEach var="p" items="#{statusBean.statusList}">
                <h:form>
                    <div class="status">
                        <c:if test="${p.statusmsg!=null}">
                            <!--  for text status msg check-->
                            <h:commandLink action="#{friendBean.gotoFriendProfile(p.email)}"
                                styleClass="link">
                                <img src="../images/profilePicture/thumb/#{p.picture}"
                                    style="height: 39px; width: 39px;" />&nbsp; <h:outputText
                                    value="#{p.statusBy}:" />
                            </h:commandLink>
                            <h:outputText value="#{p.statusmsg}" styleClass="textstyle1" />
                            <h:outputText value="#{p.timeMillis}"
                                style="font-size:xx-small;float:right;color:#bbbbbb;font-style: italic;">
                                <f:converter converterId="timeConverter" />
                            </h:outputText>
                            <h:commandLink action="#{statusBean.deleteStatus(p.statusId)}"
                                value="Delete"></h:commandLink>
                            <p:growl />
                            <br />

                            <c:forEach var="q" items="#{statusBean.commentList(p.statusId)}">
                                <div class="barcomment">
                                    <br />
                                    <h:commandLink
                                        action="#{friendBean.gotoFriendProfile(q.email)}"
                                        styleClass="link">
                                        <img src="../images/profilePicture/thumb/#{q.picture}"
                                            style="height: 29px; width: 29px;" />&nbsp; <h:outputText
                                            value="#{q.commentBy}:" />
                                    </h:commandLink>
                                    <h:outputText value=" #{q.comment}" styleClass="textstyle1" />
                                    <h:outputText value="#{q.timeMillis}"
                                        style="font-size:xx-small;float:right;font-style: italic;">
                                        <f:converter converterId="timeConverter" />
                                    </h:outputText>
                                    <h:commandLink
                                        action="#{statusBean.deleteComment(q.commentId)}"
                                        value="Delete"></h:commandLink>
                                </div>
                            </c:forEach>
                            <br />
                            <div class="comment">
                                <p:inputText value="#{statusBean.comment.comment}"
                                    styleClass="box" />
                                <p:commandLink value="Views"
                                    action="#{statusBean.update(p.statusId)}" ajax="false"
                                    styleClass="link" />
                            </div>
                            <br />

                        </c:if>

                        <c:if test="#{p.picstatus!=null}">
                            <!--  for picture status check-->

                            <h:commandLink action="#{friendBean.gotoFriendProfile(p.email)}"
                                styleClass="link">
                                <img src="../images/profilePicture/thumb/#{p.picture}"
                                    style="height: 39px; width: 39px;" />&nbsp; <h:outputText
                                    value="#{p.statusBy}:" />
                            </h:commandLink>
                            <img src="../images/statusPicture/#{p.picstatus}" width="150px"
                                style="height: 247px; width: 396px;" />
                            <h:outputText value="#{p.timeMillis}"
                                style="font-size:xx-small;float:right;color:#bbbbbb;font-style: italic;">
                                <f:converter converterId="timeConverter" />
                            </h:outputText>
                            <h:commandLink action="#{statusBean.deleteStatus(p.statusId)}"
                                value="Delete"></h:commandLink>
                            <br />
                            <h:outputText value="#{p.picstatusdesc}" />
                            <p:growl />
                            <br />

                            <c:forEach var="q" items="#{statusBean.commentList(p.statusId)}">
                                <div class="barcomment">
                                    <br />
                                    <h:commandLink
                                        action="#{friendBean.gotoFriendProfile(q.email)}"
                                        styleClass="link">
                                        <img src="../images/profilePicture/thumb/#{q.picture}"
                                            style="height: 29px; width: 29px;" />&nbsp; <h:outputText
                                            value="#{q.commentBy}:" />
                                    </h:commandLink>
                                    <h:outputText value=" #{q.comment}" styleClass="textstyle1" />
                                    <h:outputText value="#{q.timeMillis}"
                                        style="font-size:xx-small;float:right;font-style: italic;">
                                        <f:converter converterId="timeConverter" />
                                    </h:outputText>
                                    <h:commandLink
                                        action="#{statusBean.deleteComment(q.commentId)}"
                                        value="Delete"></h:commandLink>
                                </div>
                            </c:forEach>
                            <br />
                            <div class="comment">
                                <p:inputText value="#{statusBean.comment.comment}"
                                    styleClass="box" />
                                <p:commandLink value="Views"
                                    action="#{statusBean.update(p.statusId)}" ajax="false"
                                    styleClass="link" />
                            </div>
                        </c:if>

                        <c:if test="#{p.videostatus!=null}">
                            <!--  for video status check-->

                            <h:commandLink action="#{friendBean.gotoFriendProfile(p.email)}"
                                styleClass="link">
                                <img src="../images/profilePicture/thumb/#{p.picture}"
                                    style="height: 39px; width: 39px;" />&nbsp; <h:outputText
                                    value="#{p.statusBy}:" />
                            </h:commandLink>
                            <embed width="420" height="345"
                                src="http://www.youtube.com/v/#{p.videostatus}"
                                type="application/x-shockwave-flash"> </embed>
                            <h:outputText value="#{p.timeMillis}"
                                style="font-size:xx-small;float:right;color:#bbbbbb;font-style: italic;">
                                <f:converter converterId="timeConverter" />
                            </h:outputText>
                            <h:commandLink action="#{statusBean.deleteStatus(p.statusId)}"
                                value="Delete"></h:commandLink>
                            <br />
                            <h:outputText value="#{p.videostatusdesc}" />
                            <p:growl />
                            <br />

                            <c:forEach var="q" items="#{statusBean.commentList(p.statusId)}">
                                <div class="barcomment">
                                    <br />
                                    <h:commandLink
                                        action="#{friendBean.gotoFriendProfile(q.email)}"
                                        styleClass="link">
                                        <img src="../images/profilePicture/thumb/#{q.picture}"
                                            style="height: 29px; width: 29px;" />&nbsp; <h:outputText
                                            value="#{q.commentBy}:" />
                                    </h:commandLink>
                                    <h:outputText value=" #{q.comment}" styleClass="textstyle1" />
                                    <h:outputText value="#{q.timeMillis}"
                                        style="font-size:xx-small;float:right;font-style: italic;">
                                        <f:converter converterId="timeConverter" />
                                    </h:outputText>
                                    <h:commandLink
                                        action="#{statusBean.deleteComment(q.commentId)}"
                                        value="Delete"></h:commandLink>
                                </div>
                            </c:forEach>
                            <br />
                            <div class="comment">
                                <p:inputText value="#{statusBean.comment.comment}"
                                    styleClass="box" />
                                <p:commandLink value="Views"
                                    action="#{statusBean.update(p.statusId)}" ajax="false"
                                    styleClass="link" />
                            </div>
                        </c:if>

                    </div>
                </h:form>
            </c:forEach>
</div>

<div id="lastPostsLoader"></div>

            <!-- end #mainContent -->
        </div>
        <!-- This clearing element should immediately follow the #mainContent div in order to force the #container div to contain all child floats -->
        <br class="clearfloat" />
        <div id="footer">
            <p>Footer</p>
            <!-- end #footer -->
        </div>
    </div>

</h:body>
</html> 
```

3) 例外

```
Feb 28, 2013 6:21:32 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/FreeBird_v.6] threw exception [null source] with root cause
java.lang.IllegalArgumentException: null source
    at java.util.EventObject.<init>(EventObject.java:56)
    at javax.faces.event.SystemEvent.<init>(SystemEvent.java:67)
    at javax.faces.event.ComponentSystemEvent.<init>(ComponentSystemEvent.java:69)
    at javax.faces.event.PostRestoreStateEvent.<init>(PostRestoreStateEvent.java:69)
    at com.sun.faces.lifecycle.RestoreViewPhase.deliverPostRestoreStateEvent(RestoreViewPhase.java:256)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:245)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:107)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

# f# - 如何在 f# 中对行进行排序？

> ID：15136082
> 
> 赞同：0
> 
> 时间：2013-02-28T12:53:59.120
> 
> 标签：f#, sorting

我想对以下形式的一些制表符分隔数据进行排序。

```
Marketing, Advertising, PR  Graduate, Trainees  Oil, Gas, Alternative Energy    
Marketing, Advertising, PR  Graduate, Trainees  Public Sector & Services    
Marketing, Advertising, PR  Graduate, Trainees  Recruitment Sales   
Marketing, Advertising, PR  Graduate, Trainees  Secretarial, PAs, Administration    
Marketing, Advertising, PR  Graduate, Trainees  Senior Appointments 
Marketing, Advertising, PR  Graduate, Trainees  Telecommunications  
Marketing, Advertising, PR  Graduate, Trainees  Transport, Logistics    
Other   Graduate, Trainees  Banking, Insurance, Finance 
Other   Graduate, Trainees  Customer Services   
Other   Graduate, Trainees  Education   
Other   Graduate, Trainees  Health, Nursing 
Other   Graduate, Trainees  Legal   
Other   Graduate, Trainees  Management Consultancy 
```

有单短语词和多词短语的混合。短语的单词之间有逗号。短语是制表符分隔的。

我需要将它与另一组数据进行比较，其中文本单元格已按字母顺序进行了有益的排序。

显然，这使得直接比较变得困难（不可能）。

按照下面 ovastus 的建议，我有以下代码

```
open System;;
open System.IO;;
#load @"BigDataModule.fs";;
open BigDataModule;;

let sample = "TruncatedData.txt";;

let outputFile = "SortedOutput.csv";;

let sortWithinRow (row:string) =
    let columns = row.Split([|'\t'|])
    let sortedColumns = 
        Seq.append
            (columns |> Seq.take (columns.Length) |> Seq.sort)
            [ columns.[columns.Length - 1] ]            
    sortedColumns |> String.concat ",";;

sample |> readLines |>  Seq.map sortWithinRow |> saveTo (outputFile);; 
```

其中 readLines 和 saveTo 是我自己的大数据模块中用于读取文件和保存输出的函数。

当我从这个脚本得到输出时，不幸的是排序没有产生预期的结果，并且行仍然没有按字母顺序排序。

如果有人可以帮助我进一步完善我的脚本，我将不胜感激。

我很抱歉浪费时间，因为最初通过过度简化输入格式而未能确定问题。

编辑 1：澄清我已将数据保存为 csv 文件，并将在 F# 中执行此操作。

编辑 2：我已经摆脱了数据集的所有无关部分，我只需要在这些行中进行排序。我还提供了我尝试过的一些代码的更多细节。

编辑 3：

这是我输入的原始数据框，过于简单化了

```
Alpha   Bravo   Tango   Delta   15.00
Bravo   Delta   Tango       20.30
Delta   Alpha   Tango   6.17   
Charlie Tango   Foxtrot Alpha   19.13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:24:54.730

下面的呢？

```
sample |> 
  Seq.map (fun x -> x.Split('\t')) |> 
  Seq.map (Seq.map (fun x -> x.Trim())) |> 
  Seq.map (Seq.filter (fun x -> not (String.IsNullOrEmpty(x)))) |>
  Seq.map Seq.sort |> 
  Seq.map (String.concat '\t') |> 
  String.concat '\n';; 
```

我无法以粘贴示例的方式键入 \t，因此对于可执行示例，我必须将字段分隔符切换为空格

```
open System

let sample2 = """Alpha  Bravo Tango Delta    15.00
Bravo  Delta Tango          20.30
Delta  Alpha Tango          6.17
Charlie Tango Foxtrot Alpha 19.13""".Split [|'\n'|]

sample2 |> 
  Seq.map (fun x -> x.Split([|"  "|], StringSplitOptions.None)) |> 
  Seq.map (Seq.map (fun x -> x.Trim())) |> 
  Seq.map (Seq.filter (fun x -> not (String.IsNullOrEmpty(x)))) |>
  Seq.map Seq.sort |> 
  Seq.map (String.concat '\t') |> 
  String.concat '\n';; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:52:42.710

我不确定我是否正确理解了您想要的内容，但是如果您想生成此输出：

```
 Alpha Bravo Delta Tango 15.00
 Bravo Delta Tango 20.30
 Alpha Delta Tango 6.17
 Alpha Charlie Foxtrot Tango 19.13 
```

你可以这样做：

```
open System

let sample = """Alpha  Bravo Tango Delta    15.00
Bravo  Delta Tango          20.30
Delta  Alpha Tango          6.17
Charlie Tango Foxtrot Alpha 19.13""".Split [|'\n'|]

let sortWithinRow (row:string) =
    let columns = row.Split([|' '|], StringSplitOptions.RemoveEmptyEntries)
    let sortedColumns = 
        Seq.append
            (columns |> Seq.take (columns.Length - 1) |> Seq.sort)
            [ columns.[columns.Length - 1] ]            
    sortedColumns |> String.concat " "

sample |> Seq.map sortWithinRow |> String.concat "\n" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:31:50.553

尝试使用[F# 数据](http://fsharp.github.com/FSharp.Data/)

```
[<Literal>]
let sample = """Text1,Text2,Text3,Text4,ValueField
Alpha,Bravo,Tango,Delta,15.00
Bravo,Delta,Tango,,20.30
Delta,Alpha,Tango,,6.17
Charlie,Tango,Foxtrot,Alpha,19.13"""

open FSharp.Data

let csv = CsvProvider<sample, Separator = ",">.Load("input.csv")

let sortedData = 
    csv.Data 
    |> Seq.sortBy (fun row -> row.Text1)
    |> Seq.map (fun row -> row.Columns |> String.concat ",")

System.IO.File.WriteAllLines("output.csv", sortedData) 
```

如果你想按多个字段排序，你可以在排序函数中对它们进行元组：

```
|> Seq.sortBy (fun row -> row.Text1, row.Text3) 
```

# wordpress - Wordpress 主题没有影响？

> ID：15136084
> 
> 赞同：0
> 
> 时间：2013-02-28T12:54:04.753
> 
> 标签：wordpress, wordpress-theming

我想对我的 wordpress css 文件进行一些更改。我通过 ftp 下载了 style.css 和其他 css 文件，并对我想要的代码进行了所有更改。我上传了文件并将其替换为其他文件。我等了一段时间才影响它，但什么也没发生，我离开它并在前几天打开了我的网站，但事情还是一样，没有任何变化。我正在使用 WP Minify 缓存插件。我什至删除了它并再次重新上传 css 文件，但仍然没有任何变化。我尝试了很多东西，但没有成功。我通过 ftp 更改了主题主目录的名称，它帮助了我一点，让我高兴了一会儿，所有的变化都出现了。我再次需要对 css 文件进行一些更改，但不幸的是再次遭受相同的过程。请帮忙 ：（

PS 没有主题会影响 css 文件代码中的修改。我尝试了不同的主题，但结果相同。即使我删除 style.css 什么也没发生，但是当我删除该主题的整个目录时，我的网站上会出现空白页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:14:58.390

在 style.css 之后是否有任何其他 css 文件正在加载，可能会改变您尝试更改的内容？

当您升级主题时，直接 b/c 编辑主题 style.css 通常不是一个好主意，您将丢失所有自定义项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:41:25.530

使用任何缓存插件时，您应该在对网站进行任何更改时删除其缓存。你已经这样做了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:39:42.250

你的主题没有自定义 CSS 的地方吗？一些主题在外观>>主题选项或类似的东西中有它。它是什么主题？您有框架或子主题吗？需要更多信息……但每个主题都有自定义 CSS 的位置；如前所述，由于更新等原因，在实际的主题样式表中进行修改不是最佳实践……自定义 CSS 部分中的任何内容都会覆盖默认主题样式表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:21:52.607

听起来您没有从管理面板激活新主题。

[http://codex.wordpress.org/Themes#Selecting_the_Active_Theme](http://codex.wordpress.org/Themes#Selecting_the_Active_Theme)

# python - 将一个文本文件分成两个具有不重叠条目的文件

> ID：15136087
> 
> 赞同：0
> 
> 时间：2013-02-28T12:54:14.560
> 
> 标签：python, duplicates, set

让我详细解释一下这个问题......

我有两个文本文件（池文件）CL-0.txt 和 CL-1.txt 我必须将这两个文件分别分成两个部分。CL-0.txt 分为另外两个部分 xx_0.txt 和 yy_0.txt 和 CL-1.txt 分为 xx_1.txt 和 yy_1.txt 部分。两个文件的内容格式如下。CL-0（苹果、橙子）（芒果、香蕉）（蛋糕、茶）（咖啡、糖）（牛奶、蜂蜜）（蛋糕、饼干） CL-1（橙子、芒果）（葡萄、咖啡）（汽车、冰淇淋) (桌子、椅子) (窗户、牛奶)

清除我所说的条目和实体：一个条目是：（apple，orange），一个实体是：apple 每个条目都有两个元素。逗号是分隔符。不应有重复的条目或条目。如果条目或元素已出现在 xx_0.txt 中，则不能出现在 yy_0.txt 和 yy_1.txt 中 如果条目或元素已出现在 yy_0.txt 中，则不能出现在 xx_0.txt 和 xx_1.txt 中条目或元素已出现在 xx_1.txt 中，不能出现在 yy_0.txt 和 yy_1.txt 中 如果条目或元素已出现在 yy_1.txt 中，则不能出现在 xx_0.txt 和 xx_1.txt 中

每个条目被一个一个地取出，并为两个文件交替选择条目，直到将一个条目写入文件。

预期输出如下

来自 CL-0 的组成文件：

*xx_0 文件应该有：（苹果，橙子）（蛋糕，茶）（牛奶，蜂蜜）

* yy_0 文件应该有：（芒果，香蕉）（咖啡，糖）（蛋糕，饼干）不能添加，因为蛋糕已经出现在 xx_0

来自 CL-1 的连续文件：

* xx_1 文件应该有：（橙色，芒果）***在这种情况下，重复条目是可以的（汽车，冰淇淋）

* yy_1 文件将具有：（葡萄，咖啡）***在这种情况下（桌子，椅子）（窗户，牛奶）不能在此处添加重复条目，因为它将具有已出现在 xx_0 文件中的重复实体牛奶

我尝试了一半的问题，认为如果我可以成功地将 CL-0 文件分成两部分，则只需稍作调整即可轻松实现其余部分。

我的努力如下：

```
xx_0=open('xx_0.txt','wb') #the file that i want to populate
yy_0=open('yy_0.txt','wb') #the file that i want to populate
file=open('CL-0.txt','r')  # the main file
xx0=set()
xx1=set() # un1 a set against which the desired file has to be checked against for matches
yy0=set()
yy1=set() # un2 a set against which the desired file has to be checked against for matches
for line in file:
    s=line.replace('[,]','')

    s=s.replace('\n','')
    s=s.replace('(','')
    s=s.replace(')','')
    s=s.replace("'",'')

    r=re.split(',',s)
    if L==1:
        for n in r:
            if n not in yy0:
                if n not in yy1:
                    xx0.add(n)
        r1= ', '.join(r)
        xx_0.write(r1)
        xx_0.write('\n')

        L+=1
        continue

    if L==2:
        for n in r:
            if n not in xx_1:
                if n not in yy_1:
                    yy0.add(n)                  
        r2=', '.join(r)
        yy_0.write(r2)
        yy_0.write('\n')
        L=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:52:28.013

假设这些行应交替放入两个不同的文件中：

```
inputFile = file('CL-0.txt')
out = [ file(fileName, 'wb') for fileName in [ 'xx_0.txt', 'yy_0.txt' ] ]
done = set()
for line in inputFile:
  elements = re.match(r'\s*\(\s*([^,])*\s*,\s*([^)])*\)\s*', line)
  if elements in done:
      continue
  out[0].write(', '.join(elements) + '\n')
  done.add(elements)
  out = out[1:] + [ out[0] ]  # round robin
for f in out:
  f.close() 
```

但我不明白这些`xx1`和`yy1`集合的目的是什么。你的代码肯定没有解释它（它根本没有写这些），你的文字也没有足够的帮助。也许你想详细说明一下？

# usb - alsa - 管理非阻塞流

> ID：15136089
> 
> 赞同：0
> 
> 时间：2013-02-28T12:54:20.000
> 
> 标签：usb, centos, alsa

使用不断输出数据的 USB 音频设备（它是具有多个通道的 HID）。

我希望实现的是在设备发出信号之前忽略音频。那时我会开始监控提要。来自设备的第二个信号表明我可以重新忽略数据。我已经以非阻塞模式打开了该设备，因此它不会干扰其他 USB 信号进入。

这工作正常，除了当我开始读取数据（通过`snd_pcm_readi`）时，我收到一个 EPIPE 错误，指示缓冲区溢出。这可以通过`snd_pcm_prepare`每次调用来解决，但我希望有一种方法可以让缓冲区清空而我忽略它。

我看过`snd_pcm_drain`，`snd_pcm_drop`但这些停止了 PCM，我宁愿让它保持打开状态。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:22:33.867

要忽略缓冲区溢出，请更改 PCM 设备的软件参数：将停止阈值设置为与边界相同的值。使用该配置，溢出不会导致设备停止，但会让它继续填充缓冲区。（其他错误仍会停止设备；拔下 USB 设备后将很难继续...）

当发生溢出时，缓冲区将包含比实际容量更多的数据，即，`snd_pcm_avail`将报告比缓冲区大小更多的可用帧。

当您想*真正*开始录制时，您应该调用[`snd_pcm_forward`](http://www.alsa-project.org/alsa-doc/alsa-lib/group___p_c_m.html#gad0774fa8991248c6f1c264aaeb0b4207)以丢弃所有这些无效帧。

# wcf - WCF 双工 nettcp 通道没有故障

> ID：15136095
> 
> 赞同：0
> 
> 时间：2013-02-28T12:54:33.787
> 
> 标签：wcf, nettcpbinding, duplex

问题

我有这个奇怪的问题。我在控制台应用程序中托管 WCF 服务器： Console.WriteLine("Press 'q' to quit.");

```
 var serviceHost = new ServiceHost(typeof(MessageService));
            serviceHost.Open();
            while (Console.ReadKey().KeyChar != 'q')
            {
            }
            serviceHost.Close(); 
```

它公开了两个用于发布和订阅的端点（双工绑定）当我停止或退出控制台应用程序时，我从未在客户端收到通道故障。我希望通知客户端服务器已关闭。知道这里出了什么问题吗？

我想要的只是在控制台应用程序关闭时引发以下事件之一：

```
 msgsvc.InnerDuplexChannel.Faulted += InnerDuplexChannelOnFaulted;
    msgsvc.InnerChannel.Faulted += InnerChannelOnFaulted; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:22:42.570

来自 MSDN：双工模型不会自动检测服务或客户端何时关闭其通道。因此，如果服务意外终止，默认情况下不会通知该服务，或者如果客户端意外终止，则不会通知该服务。客户端和服务可以实现他们自己的协议来相互通知，如果他们愿意的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:56:23.870

AFAIK tcp 通道对（持久）连接问题非常敏感，但您可以使用回调在服务器不可用之前通知客户端。从客户端，您可以使用一些虚拟 ping/poke 方法“OnTimer”来获取实际的连接状态/保持通道活动。我想，此时恢复客户端代理（重新连接）是件好事。如果服务提供元数据端点，您也可以调用 svcutil 进行试用连接或以编程方式检索元数据：

```
 Uri mexAddress = new Uri("http://localhost:5000/myservice");
  var mexClient = new MetadataExchangeClient(mexAddress, MetadataExchangeClientMode.HttpGet);
  MetadataSet metadata = mexClient.GetMetadata();
  MetadataImporter importer = new WsdlImporter(metadata);
  ServiceEndpointCollection endpoints = importer.ImportAllEndpoints();

  ContractDescription description =
  ContractDescription.GetContract(typeof(IMyContract));
  bool contractSupported = endpoints.Any(endpoint =>
  endpoint.Contract.Namespace == description.Namespace &&
  endpoint.Contract.Name == description.Name); 
```

或者

```
ServiceEndpointCollection endpoints = MetadataResolver.Resolve(typeof(IMyContract), mexAddress, MetadataExchangeClientMode.HttpGet) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-11T07:29:48.070

如果您是客户，并且订阅了所有 3 个事件，即 IClientChannel 的 Closing、Closed 和 Faulted，那么如果您关闭服务控制台应用程序，您至少应该看到 Closing 和 Closed 事件。我不确定为什么。如果你正确关闭，你会认为你会看到错误。我正在使用 tcp.net 全双工通道，我看到这些事件很好。请记住，现在是 2017 年，所以从那时起事情可能已经发生了变化，但我在我的代码中一直依赖这些事件。对于那些说双工模型没有看到通道关闭的人，我不明白这一点。

# css - 缩略图翻转图像仅出现在屏幕左侧

> ID：15136096
> 
> 赞同：4
> 
> 时间：2013-02-28T12:54:37.593
> 
> 标签：css, html, thumbnails, dreamweaver, rollover

我正在学习如何使用 Dreamweaver CS6 设计网站。我想制作一个在页面上显示缩略图的照片库，但是当您将鼠标滑过它们时，它会在左侧显示完整尺寸的图像和缩略图的小波纹。这是我在网上搜索时发现的（可能是在这里找到的，但我不记得是谁发的，所以如果你发了，所有的功劳都归你所有）。

我在我的 HTML 代码中得到了这个：

```
 <table>   
   <tr> 
   <td>  
        <a class="thumbnail" href="#thumb">
           <img src="productURL" width="100px" height="142px" border="0" />
           <span>
              <img src="productURL" />
              <br />
              <font face="arial">productname
              </span></a>
           </font>
    </td> 
    <td>  
        <a class="thumbnail" href="#thumb"><img src="productURL" width="100px" height="142px" border="0" /><span>
        <img src="productURL" /><br /><font face="arial">
        productname</span></a></font>
    </td> 
    <td>  
        <a class="thumbnail" href="#thumb"><img src="productURL" width="100px" height="142px" border="0" /><span>
        <img src="productURL" /><br /><font face="arial">
        productname</span></a></font>
    </td> 
    <td> 
        <a class="thumbnail" href="#thumb"><img src="productURL" width="100px" height="142px" border="0" /><span>
        <img src="productURL" /><br /><font face="arial">
        productname</span></a></font>
    </td>  
    </tr>  
    <table> 
```

然后在我的 CSS 上：

```
.thumbnail{    
position: relative;    
z-index: 0;    
}

.thumbnail:hover{    
background-color: transparent;    
z-index: 50;    
}

.thumbnail span{     
position: absolute;    
background-color: lightyellow;    
padding: 5px;    
left: 1000px;    
border: 1px dashed gray;    
visibility: hidden;    
color: black;    
text-decoration: none;    
}

.thumbnail span img{     
border-width: 0;    
padding: 2px;    
}

.thumbnail:hover span {    
visibility: visible;    
top: 300px;    
left: 107px;
} 
```

我认为这是一个很好的代码，但是我不知道如何使图像在缩略图旁边弹出。我试图创建一个名为“span_2”的“子类”，但结果不正确，并且弄乱了整个页面。

我认为这是一个大问题，但我需要帮助。这周我开始玩 HTML。

编辑

有什么功能可以让我选择缩略图的位置并将图片设置为显示在它旁边吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:38:04.880

我为您的网站制作了一个有效的新代码：http: [//jsfiddle.net/sMLbP/4/](http://jsfiddle.net/sMLbP/4/)

有 HTML ：

```
<div class="container_image">
    <a class="thumbnail" href="#thumb"><img src="productURL" width="100px" height="142px" border="0" /></a>
    <div class="image">
        <img src="productURL" />
        <span style="font-family:arial"> productname</span>
    </div> 
</div>
<div class="container_image">
    <a class="thumbnail" href="#thumb"><img src="productURL" width="100px" height="142px" border="0" /></a>
    <div class="image">
        <img src="productURL" />
        <span style="font-family:arial"> productname</span>
    </div> 
</div>
<div class="container_image">
    <a class="thumbnail" href="#thumb"><img src="productURL" width="100px" height="142px" border="0" /></a>
    <div class="image">
        <img src="productURL" />
        <span style="font-family:arial"> productname</span>
    </div> 
</div>
<div class="container_image">
    <a class="thumbnail" href="#thumb"><img src="productURL" width="100px" height="142px" border="0" /></a>
    <div class="image">
        <img src="productURL" />
        <span style="font-family:arial"> productname</span>
    </div> 
</div> 
```

[更新]有CSS：

```
.container_image {
    float:left;
    position:relative;
    margin-right:20px;
}

.container_image:hover{
    cursor:pointer;
}

.container_image .image {
    position: absolute !important ;
    background-color: lightyellow;
    border: 1px dashed gray;
    top: -1000px !important ;
    z-index:10 !important ;
}

.container_image:hover .image {
    left: 100px !important ; 
    top:0px !important ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:03:18.923

您正在使用 span 元素朝正确的方向思考。

查看`display:block;`它会使页面的任何元素都表现为块元素（例如 div）

同样在图像的宽度和高度中，您通常不使用单位。

访问这样的在线资源：http: [//www.w3schools.com/html/default.asp](http://www.w3schools.com/html/default.asp)

学习一些html的基础知识。

# android - 使用服务中 AsyncTask 接收的数据更新 UI

> ID：15136101
> 
> 赞同：0
> 
> 时间：2013-02-28T12:54:43.817
> 
> 标签：android, android-asynctask

我有一个启动和绑定服务的活动。该服务使用一些 HttpPost 执行 AsyncTask 并处理接收到的数据以从结果中获取一些变量。服务从 HttpPost 获取数据后，如何使用这些数据更新活动中的 UI？我应该使用 ResultReceiver 还是有更好的方法？

**更新**：

我想我会使用**BroadcastReceiver**或**Observable 对象**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:17:48.437

有一些可能：

您的服务可以发送广播（sendBroadcast），您的活动只需要根据您在服务上实现的注册一个广播接收器。类似的东西：您的服务：

```
Intent intent = new Intent();
intent.setAction("youAction");    
intent.putExtra("url",uri.toString());
sendBroadcast(intent); 
```

在您的应用程序的 AndroidManifest 上：

```
<receiver android:name="MyReceiver" >
     <intent-filter>
          <action android:name="yourAction" />
     </intent-filter>
</receiver> 
```

您的活动：

```
private class Receiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {

         String url = arg1.getExtras().getString("url");
         //Here you can update your UI
   } 
```

这个链接可以帮助你：[http ://www.vogella.com/articles/AndroidBroadcastReceiver/article.html](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

第二种方法是在您的服务上注册一个侦听器并在您的服务上通知该侦听器。

在您的服务中：

```
 void onSomethingHappened()
 {
      activityListener.notifyProgressBar();
 }

 void subscribe(YourInterface listener)
 {
      actibityListener =  listener;
 }
 In you activity, after start you service:

 service.subscribe(this); 
```

但是，要采用更好的解决方案，您应该考虑您的服务实现（类型）。

这个关于[AndroidService](http://developer.android.com/guide/components/services.html)的链接很有用。

但是，另一个重要的一点是，您的选择**取决于您如何实现异步任务**。取决于您对每个方法执行的操作，preExucute、doInBackground、onProgressUpdate 和 postExecute。

**您必须记住，您将从 AndroidUIThread 之外发生的事件更新您的 UI**，因此如果您尝试直接更新您的 UI，您会遇到问题。要解决此问题，您可以使用您的活动的 runOnUiThread 方法[，](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)也可以使用[Handler](http://developer.android.com/reference/android/os/Handler.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:12:06.093

在 doInBackground() 中下载数据。在 onpreExecute() 中显示进度对话框。在 onPostExecute() 中关闭对话框。使用 onPostExecute() 中的数据更新 UI。

# c# - 获取/设置 ultrawingrid 的滚动条位置

> ID：15136104
> 
> 赞同：0
> 
> 时间：2013-02-28T12:54:54.080
> 
> 标签：c#, infragistics

在我的 C# 程序中，我有一个`ultrawingrid`从`SQL CE`数据库中填充的内容。我的 refreshGrid() 函数在用户采取的每个相关操作之后被调用。该函数调用另一个 SQL 查询，将数据保存到数据表并将其设置为网格数据源。

但是我的问题是每次调用刷新函数时垂直滚动条位置都会重置 - 因此网格视图会重置回网格的顶部。

我最初的想法是将滚动条位置保存为变量，然后在刷新后将滚动条设置回该位置。但是我该怎么做呢？或者还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:04:00.707

解决了。获取刷新前的滚动位置，之后设置。

```
var scrollPos = grid.ActiveRowScrollRegion.ScrollPosition;
refresh();
grid.ActiveRowScrollRegion.ScrollPosition = scrollPos; 
```

# php - 一起计算 facebook、twitter 和 g+“分享”并将它们存储在数据库中？

> ID：15136106
> 
> 赞同：5
> 
> 时间：2013-02-28T12:54:58.813
> 
> 标签：php, facebook, wordpress, twitter, google-plus

我在 Word Press 方面工作并得到了这个想法。我不想实现“喜欢/收藏”功能来确定热门文章，而是将收到的文章的 Facebook 分享、推文和 +1 的数量加在一起，一旦将它们全部计算在内，就将它们存储在数据库中（与相应的文章一起） ，因此我可以通过选择分享、推文和 +1 最多的文章来选择热门文章。每次用户点击 facebook、twitter 或 g+ 按钮时，我还需要更新数据库。

这可以在 Word Press 中并通过使用他们的 api 来实现吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T13:40:46.230

**这并不像看起来那么简单。**

GitHub 上有一个很棒的要点，其中包含您想要实现的所有 API：**[Get the share counts from various APIs](https://gist.github.com/jonathanmoore/2640302)。**

您可以使用 jQuery 和 AJAX 连接到这些服务器并获取数据：

```
function how_many_tweets(url, post_id) {
    var api_url = "http://cdn.api.twitter.com/1/urls/count.json";
    var just_url = url || document.location.href;
    $.ajax({
        url: api_url + "?callback=?&url=" + just_url,
        dataType: 'json',
        success: function(data) {
            var tweets_count = data.count;
            // do something with it
        }
    });
}

function how_many_fb_shares(url, post_id) {
    var api_url = "http://api.facebook.com/restserver.php";
    var just_url = url || document.location.href;
    $.ajax({
        url: api_url + "?method=links.getStats&format=json&urls=" + just_url,
        dataType: 'json',
        success: function(data) {
            var shares_count = data[0].total_count;
            // do something with it
        }
    });
};

function how_many_google_pluses(url, api_key, post_id) {
    var api_url = "https://clients6.google.com/rpc?key=" + api_key;
    var just_url = url || document.location.href;
    $.ajax({
        url: api_url,
        dataType: 'json',
        contentType: 'application/json',
        type: 'POST',
        processData: false,
        data: '[{"method":"pos.plusones.get","id":"p","params":{"nolog":true,"id":"' + just_url + '","source":"widget","userId":"@viewer","groupId":"@self"},"jsonrpc":"2.0","key":"p","apiVersion":"v1"}]',
        success: function(data) {
            var google_pluses = data.result.metadata.globalCounts.count;
            // do something with it
        }
    })
} 
```

然后，您可以将`// do something with it`行替换为对您的博客的另一个 AJAX 请求。**您将需要编写一个插件来处理此请求并将数据保存在 $wpdb 中。**插件比较简单：

```
<?php

/*
    Plugin Name: Save Share Count Request Plugin
    Plugin URI: http://yourdomain.com/
    Description: This plugin catches 'save share count' requests and updates the database.
    Version: 1.0

*/

// check if request is a 'save share count' request
// i'm using sscrp_ prefix just not to redefine another function
// sscrp_ means SaveShareCountRequestPlugin_
function sscrp_is_save_share_count_request() {
    if(isset($_GET['_save_share_count_request'])) return true;
    else return false;
}

// save the count in database
function sscrp_save_share_count_in_wpdb($type, $count, $post_id) {

    // $count is your new count for the post with $post_id
    // $type is your social media type (can be e.g.: 'twitter', 'facebook', 'googleplus')
    // $post_id is post's id

    global $wpdb;

    // create a $wpdb query and save $post_id's $count for $type.
    // i will not show how to do it here, you have to work a little bit

    // return true or false, depending on query success.

    return false;
}

// catches the request, saves count and responds
function sscrp_catch_save_share_count_request() {
    if(sscrp_is_save_share_count_request()) {
        if(isset($_GET['type'])) {
            $social_media_type = $_GET['type'];
            $new_count = $_GET['value'];
            $post_id = $_GET['post_id'];
            if(sscrp_save_share_count_in_wpdb($social_media_type, $new_count, $post_id)) {
                header(sprintf('Content-type: %s', 'application/json'));
                die(json_encode(array("sscrp_saved"=>true)));
            } else {
                header(sprintf('Content-type: %s', 'application/json'));
                die(json_encode(array("sscrp_saved"=>false)));
            }
        } else {
            header(sprintf('Content-type: %s', 'application/json'));
            die(json_encode(array("sscrp_saved"=>false)));
        }
    }
}

// catch the save request just after wp is loaded
add_action('wp_loaded', 'sscrp_catch_save_share_count_request');

?> 
```

当您拥有插件后，我们可以编辑`// do something with it`您的 JavaScript 文件中的行：

1.  因为`how_many_tweets()`它将是：

    ```
    $.ajax({
        url: "http://yourdomain.com/path_to_your_wp_installation/?_save_share_count_request=1&type=twitter&value=" + tweets_count + "&post_id=" + post_id,
        dataType: 'json',
        success: function(data) {
            var saved = data.sscrp_saved;
            if(saved) {
                // done!
            } else {
                // oh crap, an error occured
            }
        }
    }); 
    ```

2.  对于`how_many_fb_shares()`复制/粘贴代码`how_many_tweets()`并更改：

    ```
    ...
        url: "... &type=facebook ...
    ... 
    ```

3.  对于`how_many_google_pluses()`与 facebook 相同的操作：

    ```
    ...
        url: "... &type=googleplus ...
    ... 
    ```

然后，您必须以*某种方式*过滤您使用的帖子`$type`以及`$count`您已写入`$wpdb`.

* * *

我该走了。我为您提供的不仅仅是关于连接到 Facebook、Twitter 和 Google 的 API 的简单信息。我希望你能利用它，达到你想要达到的目的。

# magento - Magento 的 system.log 中不打印 Mage::log

> ID：15136113
> 
> 赞同：9
> 
> 时间：2013-02-28T12:55:09.940
> 
> 标签：magento

我的 Mage::log() 永远不会显示在 system.log

*   我在 htaccess 中做了 SetEnv MAGE_IS_DEVELOPER_MODE "true" 并在 Magento/index.php 中检查它是否正常
*   我启用了开发日志设置并签入数据库，它做得很好
*   我的 magento/var/log 文件夹和 system.log 设置为 777

我是不是忘记了什么？

Magento 版本。1.12.0.2

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T13:40:30.270

检查您的网络服务器的临时目录。如果应用程序无法写入*./var/log/*，这就是它结束的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:48:59.843

这确实是一个 chmod 故事，我做了一点 (magento/) chmod -R 777 var/ 并且一切都已修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:40:55.230

确保 system.log 被 webserver 用户使用。我的是 www 数据。它也是 chmod 777。我注意到当您的 /magentoroot/var/log 文件不存在或设置不正确时，magento 会将日志文件/缓存文件写入 /tmp。

另外，不要删除日志文件。使用 sudo truncate -s0 logfilename.log

它清除了它们。

# javascript - 拖放并在放置的坐标处定位

> ID：15136114
> 
> 赞同：0
> 
> 时间：2013-02-28T12:55:13.183
> 
> 标签：javascript, jquery, html, css

我需要将产品列表中的项目拖放到空白容器中。当用户完成拖放后，我必须将位置和使用的项目存储到数据库，以便我可以再次显示此配置。

不幸的是，我的问题从早期开始。我成功地将项目从列表拖放到容器，但不幸的是它们以表格形式显示，而不是在我分配给它们的坐标处

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="ShoppingCart.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="StyleSheet.css" rel="stylesheet" type="text/css" />
    <script src="scripts/jquery-1.4.4.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        var srcElement;

        $(document).ready(function () {

            $("div .product").each(function () {
                this.addEventListener('dragstart', OnDragStart, false);
            });

            $("div .bag").each(function () {
                this.addEventListener('dragenter', OnDragEnter, false);
                this.addEventListener('dragleave', OnDragLeave, false);
                this.addEventListener('dragover', OnDragOver, false);
                this.addEventListener('drop', OnDrop, false);
                this.addEventListener('dragend', OnDragEnd, false);
            });

        })

        function OnDragStart(event) {
            srcElement = this;

        }

        function OnDragOver(e) {
            e.preventDefault();

            return false;
        }

        function OnDragEnter(e) {
            e.preventDefault();
        }

        function OnDragLeave(e) {
            e.preventDefault();
        }

        function OnDrop(e) {
            e.preventDefault();

            var dm = srcElement.cloneNode(true);

            dm.style.Left = e.offsetX;
            dm.style.Top = e.offsetY;
            dm.style.position = "absolute";

            //$(this).append(srcElement);
            e.target.appendChild(dm); 

            e.stopPropagation();
            return false;
        }

        function OnDragEnd(e) {
            e.preventDefault();
        }
    </script>

</head>
<body>
    <form id="form1" runat="server">
        <div>
            <table >
                <tr>
                    <td>
                        <div draggable="true" id="div1" class="product">
                            <header>Rieker Trekkingsandalen braun</header>
                            <img src="images/monitor.jpg" style="height: 150px; width: 150px;" />
                        </div>
                    </td>
                    <td>
                        <div id="div2" class="product" draggable="true">
                            <header>Rieker Trekkingsandalen braun</header>
                            <img src="images/Cart.jpg" style="height: 150px; width: 150px;" />
                        </div>
                    </td>
                    <td>
                        <div id="div3" class="product" draggable="true">
                            <header>Rieker Trekkingsandalen braun</header>
                            <img src="images/mouse.jpg" style="height: 150px; width: 150px;" />
                        </div>
                    </td>
                    <td>
                        <div id="div4" class="product" draggable="true">
                            <header>Rieker Trekkingsandalen braun</header>
                            <img src="images/speaker.jpg" style="height: 150px; width: 150px;" />
                        </div>
                    </td>
                </tr>
            </table>

            <div class="bag">
            </div>
        </div>
    </form>
</body>
</html>

.product {
    height: 300px;
    width: 150px;
    border: 2px solid #666666;
    background-color: white;
    text-align: center;
    cursor: move;
}
.bag {
    background-color: green;
    height: 500px;
    width: 500px;
    position: absolute;
} 
```

谁能指出我这里的问题？

干杯，斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:57:18.800

```
dm.style.position = "absolut"; 
```

应该

```
dm.style.position = "absolute"; 
```

# iphone - 如何将工具栏添加到 UITableViewController

> ID：15136123
> 
> 赞同：1
> 
> 时间：2013-02-28T12:55:59.170
> 
> 标签：iphone, objective-c, uitableview, toolbar

我需要在我的`UITableView`. 我看到很多网站都说使用 a`UINavigationController`是一种方式，但是有没有任何选项可以让我在`UITableViewController`?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T12:58:28.607

是的，`UITableViewController`在您的 Storyboard 中选择您的并转到`Editor-Embed in-Navigation Controller`

然后选择您新创建的`NavigationController`并在其属性检查器中选中“显示工具栏”

![在此处输入图像描述](../Images/069538c02ea037d6091e1da7a1b41b08.png)

# eclipse - Hibernate Eclipse WebProject 配置：如何指定文件配置？

> ID：15136125
> 
> 赞同：0
> 
> 时间：2013-02-28T12:56:06.327
> 
> 标签：eclipse, hibernate

考虑以下语句：

```
SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory(); 
```

在哪里：

```
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration; 
```

如何指定 Hibernate 将从中检索配置数据的文件？解释一下，我有一个带有正确配置数据的 hibernate.cfg.xml，但是在运行时 hibernate 会抛出引用来自其他项目的配置的错误，例如：

```
org.hibernate.MappingNotFoundException: resource: xx/AnotherNonRelatedProject/CertainClass.hbm.xml not found 
```

无论如何，我猜默认配置来自另一个文件。但我已经搜索了我的 hbm.xml 文件、类和引用，似乎没问题。

知道这里会发生什么吗？

Eclipse：靛蓝 SR2；休眠工具：3.5.1

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:30:53.670

如果要设置自己的 Hibernate 配置，则必须使用以下内容：

```
private static final SessionFactory sessionFactory;
    static {
        try {
            // Create your SessionFactory from hibernate.cfg.xml
            sessionFactory = new Configuration().configure(new File("hibernate1.cfg.xml"))
                    .buildSessionFactory();
        } catch (Throwable ex) {
            throw new ExceptionInInitializerError(ex);
        }
    } 
```

最好的祝福 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:00:05.717

我正在回答我自己的问题，因为我发现了我的具体问题，我认为这将是另一个问题的问题：

由于我的应用程序是基于 Web 的，因此 Tomcat 的 lib 文件夹中有一个来自另一个项目的 .jar 文件，该文件存在休眠配置问题。由于 Hibernate 检查与某个项目相关的所有依赖项（包括所有 .jar），其中包括 Tomcat 库中的所有 jar。因此，在运行时出现了异常（当时对我来说完全陌生）。解决 .jar 文件的休眠配置问题或从 Tomcat 的 lib 文件夹中删除它们（如果没有必要）可以解决问题。

# ruby - Ruby - 将字符串转换为浮点数返回 0.0

> ID：15136127
> 
> 赞同：16
> 
> 时间：2013-02-28T12:56:14.973
> 
> 标签：ruby, string, floating-point, type-conversion

在一个变量中存储了这个值：`$10.00` 我需要得到这个`10.00`

我试图将此值转换为浮点数：

```
new_price = '%.2f' % (price.to_f) 
```

但我得到了`0.0`。

那有什么问题？我也试过

```
price = price.strip
price[0]=""
new_price = '%.2f' % (price.to_f) 
```

但即使这样也没有帮助我......哪里有问题？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-28T13:10:02.557

您需要删除第`$`一个。整个事情是这样的：

```
'%.2f' % '$10.00'.delete( "$" ).to_f 
```

或者

```
'%.2f' % '$10.00'[1..-1].to_f 
```

如果你喜欢密度，可能会遇到非美元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T15:46:06.237

要将其设置在变量中：

```
 current_price= '%.2f' % '$10.00'.delete( "$" ).to_f 
```

更常见的错误是字符串中有逗号的数千个值，例如：10,000.00。逗号会导致同样的截断错误，但小数点不会，而且许多程序员甚至都不会捕捉到它（我们甚至不再注意到逗号了）。要解决这个问题：

```
current_price= '%.2f' % '10,000.00'.delete( "," ).to_f 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-19T22:22:20.913

添加到弗罗德里克的回答：

> 您需要先删除 $ 。整个事情是这样的：

```
'%.2f' % '$10.00'.delete( "$" ).to_f 
```

> 或者

```
'%.2f' % '$10.00'[1..-1].to_f 
```

> 如果你喜欢密度，可能会遇到非美元。您需要格式化输出代码以确保获得两位小数 >with

您需要格式化输出字符串以确保获得两位小数。

```
puts "Current amount: #{format("%.2f", amount)}" 
```

# java - 我应该将哪个 bean 保留在哪个范围内

> ID：15136128
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:56:16.847
> 
> 标签：java, jsf, jsf-2, scope, javabeans

我想要的在下面实现，我将有三个页面。

**userList.xhtml**：这将有一个数据表中的用户列表。Onclicking用户，我将在下一页（detailsOfUser.xhtml）中看到各个用户的详细信息

**detailsOfUser.xhtml**：此页面将包含在上述页面中被点击的用户的详细信息。在此页面上，我将有一个`Edit`按钮，单击该按钮后，我将在下一页的文本字段中获得相同的值（editUserDetails.xhtml）

**editUserDetails.xhtml**：带有上一页用户详细信息的文本字段。在此页面上，我将有`Save`按钮，单击该按钮我将被重定向回`detailsOfUser.xhtml`我将看到相应用户更新值的位置。

我应该如何为这些 bean 使用 bean 和范围？

我应该为所有三个页面使用一个 bean 还是使用三个具有不同范围的 bean？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:03:10.840

我将为**userList.xhtml**制作一个 bean（可能是 ViewScope） 。如果你的应用程序很小并且你喜欢简单，你也可以考虑制作这个 SessionScope。

For **detailsOfUser.xhtml** and **editUserDetails.xhtml** I will use another bean, which would have to be ConversationScoped or if you have the option of using [MyFaces CODI](http://myfaces.apache.org/extensions/cdi/) (which I highly recommend), you can give them ViewAccessScope which is like an automatic Conversation scope.

This would allow you to write it in the easy and correct way. I understand that you are sharing information between **detailsOfUser.xhtml** and **editUserDetails.xhtml**.

Extra information- the ViewScope is problematic and you may need to have [Seam](http://www.seamframework.org/) or [MyFaces CODI](http://myfaces.apache.org/extensions/cdi/) anyway to get it working.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:02:27.043

我更喜欢使用 Viewscope 甚至 Requestscope，因为您不需要更长时间的数据。您只需要它来查看并通过单个 xhtml 文件传递​​它。
所以我更喜欢一个带有 Viewscope 的 Bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:03:04.490

`UserListBean`可以是 RequestScoped 或 ViewScoped（CDI 中的 ConversationalScoped），取决于您是否要对表执行一些操作（即排序、过滤……）

`UserDetailBean`将是 RequestScoped，因为您只需要查看详细信息即可。

`EditUserDetailBean`再次是 RequestScoped 因为您不需要在请求期间维护任何数据

或者您也可以制作一个 SessionScoped bean 并将所有内容都放在那里，但我真的不推荐这样做，您不希望 session 太大。

所以更一般地说 - 请求期间不需要维护任何数据的页面的请求范围，当您需要存储有关页面上正在发生的事情的数据时查看范围（例如数据表过滤），用于存储会话范围的会话范围像登录用户或购物车这样的数据，最后是用于存储应用程序范围内容的应用程序范围（如配置，它用作单例 bean）。

另请参阅BalusC 的[这篇](http://balusc.blogspot.cz/2011/09/communication-in-jsf-20.html)文章，他很好地描述了这一切。

# android - 获取支持的颜色效果并使用它们

> ID：15136130
> 
> 赞同：1
> 
> 时间：2013-02-28T12:56:30.933
> 
> 标签：android, android-camera, effects

在我的应用程序中，我想在相机上使用色彩效果。我通过使用`getSupportedColorEffects()`函数获得了它们的列表，但是它只给了我它们的名称。有什么简单的方法可以简单地使用它们吗？我的意思是，我得到的是例如“白炽灯”，但要使用它我必须使用：`camera_parameters.setColorEffect(Camera.Parameters.WHITE_BALANCE_INCANDESCENT)`，那么除了手动将每个单词分配给每个参数之外，还有其他方法吗？如果不同设备上的效果列表可能不同怎么办？感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:03:15.483

这取决于相机硬件。你可以试试这个来找到支持的颜色效果：

```
params = camera.getParameters();
List<String> list=params.getSupportedColorEffects();
camera.setParameters(params);

params = camera.getParameters();
params.setColorEffect(Camera.Parameters.EFFECT_NONE);
camera.setParameters(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T18:42:23.480

setter 方法采用字符串参数。因此，您只需使用要使用的效果的原始字符串。这适用于参数中的大多数设置器。当然你不能在里面放任何你想要的字符串，它必须来自支持列表。

```
Set<String> effects = params.getSupportedColorEffects();
String effect = chooseEffect(effects);
params.setColorEffect(effect);
camera.setParameters(params); 
```

# windows-7 - iis 7 上的经典 asp - 无需将文件夹名称 / 添加到应用程序中的所有包含和路径即可正常工作

> ID：15136131
> 
> 赞同：1
> 
> 时间：2013-02-28T12:56:31.243
> 
> 标签：windows-7, iis-7, asp-classic

我最近得到了这个用经典 asp 编写的巨大应用程序，它以一个名为`ivx`. 我在笔记本电脑上的 Windows 7 64 家庭高级版上运行 IIS 7。

我现在所做的是解压缩`ivx`到`inetpub/wwwroot`. 所以现在`c:/inetpub/wwwroot/ivx/`

问题是，整个应用程序包含包含和其他指向根的东西（我猜这是直接从服务器拉下来的）。

```
<!--#include virtual = "/main/indexfunctions.asp" -->
<!--#include virtual = "/common/adminverify.asp" --> 
```

为了使事情正常进行，我必须添加`/ivx`到应用程序中的每条路径。我知道如果我将所有文件解压缩到根目录，我可以让事情顺利进行，但我不能这样做，因为那里还有其他文件。

我怎样才能使这一切工作而不必将当前文件夹名称添加到应用程序中的所有路径？IIS 或其他地方是否有设置可以让我这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:04:44.220

您在这里需要的是一个虚拟网站，您可以通过自定义主机名（如 ivx.yourmachine.local - 将其添加到您的主机文件）或通过端口号（如 localhost:8080）访问该网站。阅读[了解 IIS 7 上的站点、应用程序和虚拟目录](http://www.iis.net/learn/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis)，然后查看[如何：在 IIS 7.0 中创建和配置虚拟目录](http://msdn.microsoft.com/en-us/library/bb763173%28v=VS.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:15:51.623

如果我没有严重误解，文件夹不只是指向站点根目录吗？这是一个相对路径，因此`<!--#include virtual = "/main/indexfunctions.asp" -->`将在 ivx/main 文件夹中查找 indexfunctions.asp。我完全错了吗？我真的不明白这个问题。

# postgresql - Rails 3.2 设计 Omniauth-facebook 和 koala

> ID：15136132
> 
> 赞同：3
> 
> 时间：2013-02-28T12:56:37.073
> 
> 标签：postgresql, facebook-graph-api, ruby-on-rails-3.2, omniauth, koala-gem

我正在尝试将考拉集成到一个设计omniauth-facebook 应用程序中。出于某种原因，我无法发布到用户的墙上。我创建了第二个应用程序，它不使用设计和所有工作，我意识到唯一的区别是**oauth_expires_at**我在保存 facebook 返回的 oauth_expires_at 时遇到问题。

```
 # Facebook
  def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
    user = User.where(:provider => auth.provider, :uid => auth.uid).first
          unless user
            user = User.create(  name:auth.extra.raw_info.name,
                                 provider:auth.provider,
                                 uid:auth.uid,
                                 email:auth.info.email,
                                 image:auth.info.image,
                                 oauth_token:auth.credentials.token,
                                 password:Devise.friendly_token[0,20]
                                 )
          end
        user
  end 
```

我试过了

```
#oauth_expires_at:auth.credentials.expires_at.to_datetime,
#oauth_expires_at:auth.Time.at(auth['credentials'].expires_at),
#oauth_expires_at:Time.at(@auth[:credentials][:expires_at]).to_datetime, 
```

如何将 facebook 时间响应转换为 PostgreSQL 日期时间格式。请帮忙。还是有关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:57:47.047

看起来`oauth_expires_at`毕竟不是造成问题的原因。我站得更正了。

# c# - C#如何使用带开关的枚举

> ID：15136134
> 
> 赞同：93
> 
> 时间：2013-02-28T12:56:42.420
> 
> 标签：c#, enums, switch-statement, switch-expression

我不知道如何将开关与枚举结合使用。你能告诉我我做错了什么，以及如何解决吗？我必须使用枚举来制作基本的计算器。

```
public enum Operator
{
    PLUS, MINUS, MULTIPLY, DIVIDE
}

public double Calculate(int left, int right, Operator op)
{

    int i = (int) op;

    switch(i)
    {
        case 0:
        {
            return left + right;
        }

        case 1:
        {
            return left - right;
        }

        case 2:
        { 
            return left * right;
        }

        case 3:
        {
            return left / right;
        }

        default:
        {
            return 0.0;
        }
    }
} 
```

最终结果应该是这样的：

```
Console.WriteLine("The sum of 5 and 5 is " + Calculate(5, 5, PLUS))
Output: The sum of 5 and 5 is 10 
```

你们能告诉我我是怎么搞砸的吗？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-02-28T12:58:27.600

你不需要转换它

```
switch(op)
{
     case Operator.PLUS:
     {
        // your code 
        // for plus operator
        break;
     }
     case Operator.MULTIPLY:
     {
        // your code 
        // for MULTIPLY operator
        break;
     }
     default: break;
} 
```

顺便说一句，使用括号

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2019-10-09T05:53:00.960

由于 C# 8.0 为枚举引入了一个新的 switch 表达式，你可以做得更优雅：

```
public double Calculate(int left, int right, Operator op) =>
            op switch 
        {
            Operator.PLUS => left + right,
            Operator.MINUS => left - right,
            Operator.MULTIPLY => left * right,
            Operator.DIVIDE => left / right,
            _    =>  0
        } 
```

参考。[https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-8](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-8)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-28T13:07:45.043

正确答案已经给出，但这里是更好的方法（比 switch）：

```
private Dictionary<Operator, Func<int, int, double>> operators =
    new Dictionary<Operator, Func<int, int, double>>
    {
        { Operator.PLUS, ( a, b ) => a + b },
        { Operator.MINUS, ( a, b ) => a - b },
        { Operator.MULTIPLY, ( a, b ) => a * b },
        { Operator.DIVIDE ( a, b ) => (double)a / b },
    };

public double Calculate( int left, int right, Operator op )
{
    return operators.ContainsKey( op ) ? operators[ op ]( left, right ) : 0.0;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T12:59:41.290

您不应该转换为整数。对于除法，您需要先将 left 转换为 double，否则您将进行整数除法。

```
public enum Operator
{
    PLUS, MINUS, MULTIPLY, DIVIDE
}

public double Calculate(int left, int right, Operator op)
{
    double sum = 0.0;

    switch(op)
    {
       case Operator.PLUS:
       sum = left + right;
       return sum;

       case Operator.MINUS:
       sum = left - right;
       return sum;

       case Operator.MULTIPLY:
       sum = left * right;
       return sum;

       case Operator.DIVIDE:
       sum = (double)left / right;
       return sum;

       default:
       return sum;
   }

   return sum;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-28T12:59:55.450

根本不强制转换为 int

```
 switch(operator)
    {
       case Operator.Plus:
       //todo 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-01-11T04:38:51.080

无需转换。您可以在开关内的枚举上应用条件。像这样，

```
public enum Operator
{ 
    PLUS,
    MINUS,
    MULTIPLY,
    DIVIDE
}

public double Calculate(int left, int right, Operator op)
{
    switch (op)
    {
        case Operator.PLUS: return left + right; 
        case Operator.MINUS: return left - right; 
        case Operator.MULTIPLY: return left * right;
        case Operator.DIVIDE: return left / right;
        default: return 0.0; 
    }
} 
```

然后，这样称呼它：

```
Console.WriteLine("The sum of 5 and 5 is " + Calculate(5, 5, Operator.PLUS)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-28T13:02:35.997

```
 public enum Operator
    {
        PLUS, MINUS, MULTIPLY, DIVIDE
    }

    public class Calc
    {
        public void Calculate(int left, int right, Operator op)
        {

            switch (op)
            {
                case Operator.DIVIDE:
                    //Divide
                    break;
                case Operator.MINUS:
                    //Minus
                    break;
                case Operator.MULTIPLY:
                    //...
                    break;
                case Operator.PLUS:
                    //;;
                    break;
                default:
                    throw new InvalidOperationException("Couldn't process operation: " + op);
            }
        }
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-28T13:02:03.623

所有其他答案都是正确的，但您还需要正确调用您的方法：

```
Calculate(5, 5, Operator.PLUS)) 
```

并且由于您使用`int`for`left`和`right`，结果也将是`int`( `3/2 will result in 1`)。您可以`double`在计算结果之前强制转换或修改参数以接受`double`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-03T09:27:04.803

如果您不想为每种情况使用 return 语句，请尝试以下操作：

```
Calculate(int left, int right, Operator op)
{
   int result = 0;
   switch(op)
   {
        case Operator.PLUS:
        {
            result = left + right;;  
        }
        break;
        ....
   }

   return result;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-28T13:03:51.713

两件事情。首先，您需要在测试中限定枚举引用 - 而不是“PLUS”，它应该是“Operator.PLUS”。其次，如果您在 switch 语句中使用枚举成员名称而不是它们的整数值，则此代码将更具可读性。我已经更新了你的代码：

```
public enum Operator
{
    PLUS, MINUS, MULTIPLY, DIVIDE
}

public static double Calculate(int left, int right, Operator op)
{
    switch (op)
    {
        default:
        case Operator.PLUS:
            return left + right;

        case Operator.MINUS:
            return left - right;

        case Operator.MULTIPLY:
            return left * right;

        case Operator.DIVIDE:
            return left / right;
    }
} 
```

调用它：

```
Console.WriteLine("The sum of 5 and 5 is " + Calculate(5, 5, Operator.PLUS)); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-28T13:16:51.713

你的代码很好。如果您不确定如何使用计算功能，请尝试

```
Calculate(5,5,(Operator)0); //this will add 5,5
Calculate(5,5,Operator.PLUS);// alternate 
```

默认枚举值从 0 开始并为以下元素增加 1，直到您分配不同的值。你也可以这样做：

```
public enum Operator{PLUS=21,MINUS=345,MULTIPLY=98,DIVIDE=100}; 
```

# jakarta-ee - 在复合容器中未正确添加 ID

> ID：15136135
> 
> 赞同：1
> 
> 时间：2013-02-28T12:56:44.137
> 
> 标签：jakarta-ee, jsf-2, composite-component

我遇到的问题是，在初始页面加载时，复合容器内元素的 id 没有正确添加，这会导致“错误的”http-POST。

举个例子

```
<h:form id="select">
    <tb:input id="selectPLZ" value="#{companys.selectedPLZ}">
    </tb:input>
</h:form> 
```

结核病：输入

```
<composite:interface>
    <composite:attribute name="value" required="true"/>
</composite:interface>
<composite:implementation>
    <h:inputText value="#{cc.attrs.value}" id="field">
    </h:inputText>
</composite:implementation> 
```

在初始页面加载时，输入元素只有复合容器的 id 和它自己的 id（例如：“j_idt93:field”），而不是它应该具有的完整 id（“select:j_idt93_field”），表单的 id 未添加。

如果我重新渲染组件或重新加载页面，则 id 再次正确。

任何想法来解决这个问题？

# jquery - jquery 效果移动图像

> ID：15136139
> 
> 赞同：0
> 
> 时间：2013-02-28T12:56:49.273
> 
> 标签：jquery, jquery-ui

大家好我想试试这个效果

我单击图像（pfd 的图像），当我这样做时，用户会看到图像（或其他东西）非常快地移动到项目菜单，并向用户显示某些东西已保存（pfd 已保存）

当我点击这个菜单项时，我会看到所有的 pdf 保存。

存在插件 n jquery 或类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:58:34.180

最后我找到了答案，我把代码放在这里给某人。这是我的链接

```
 <img id="libro" class="pull-right" onclick="<?php $_SESSION['libro'][]=1 ?>" src="<?php echo JURI::root()?>/images/about/booklet.png"/>

var animatepos;
    $("#libro").click(function(){
        var current= $("#libro").clone();
        current.attr('id', 'newLibro');
        current.toggleClass('pull-right librovolatil');
        current.insertBefore("#libro");
        //$('body').append(current);
        current.offset($('#libro').offset());
        var posInicial= current.offset();
        var posDestino= $(".item-122").offset();

        var arriba= posDestino.top - posInicial.top;
        var der= posDestino.left - posInicial.left;
        animatepos = {"marginTop": arriba,
            "marginLeft": der
        };
        current.animate(animatepos
            , "slow", "", function(){
                current.remove();
            }); 
```

# objective-c - 如何使用objective c for iphone创建流程图

> ID：15136142
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:57:08.093
> 
> 标签：objective-c, ios6

我需要创建一个应用程序来为 iPhone 绘制组织结构图。用户可以选择形状、关系等，如何做到这一点？.是否有任何库可以在目标 c 中为 iphone 创建流程图/组织图。
注意：我使用 coreplot 绘制饼图、折线图、条形图、散点图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:25:40.190

看看这个，它看起来像一个高级的核心图，但我相信你可以修改它以满足你的需要

[关联](http://www.shinobicontrols.com/shinobicharts/)

# objective-c - 为什么我要两次声明属性？还是我？

> ID：15136143
> 
> 赞同：0
> 
> 时间：2013-02-28T12:57:15.500
> 
> 标签：objective-c

对不起那种无用的帖子标题，但由于我不确定我在做什么，这是我能想到的最好的。

在我的头文件中，它看起来像这样

```
@interface RootViewController : UITableViewController {
NSMutableArray *eventsArray;    
}

@property (nonatomic, retain) NSMutableArray *eventsArray;

@end 
```

这不是所有属性，但为了简单起见，我删除了所有属性。

我是按照苹果开发者的指南来做的。似乎该指南没有完全更新，因为它告诉我合成属性，我不应该再这样做了，对吧？

无论如何，为什么会这样？对我这个初学者来说，好像我两次声明了财产？还是我在第一排做其他事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:59:00.263

由于历史原因，使用较旧的编译器是这样的。

你现在可以这样做：

```
@interface RootViewController : UITableViewController

@property (nonatomic, retain) NSMutableArray *eventsArray;

@end 
```

你有它的方式，你声明一个实例属性，然后你说你想自动生成getter和setter。

现在，你可以说你有一个属性，编译器会在编译时自动生成实例属性。它消除了明显的冗余。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:11:23.450

> 对我这个初学者来说，好像我两次声明了财产？还是我在第一排做其他事情？

属性和支持它的实例变量（如果有的话）是两个不同的东西。属性实际上只是类提供某些访问器方法的承诺。因此，您必须分别声明属性和 ivar 的事实并不奇怪。然而，事实上，大多数属性都由具有相关名称的 ivar 支持，并且分别编写和维护这两个属性是一件苦差事。因此，Apple 在编译器中添加了 ivar 综合，以便编译器为任何不存在 ivar 的综合属性生成 ivar。此外，因为综合访问器是迄今为止最常见的，并且编译器将使用您提供的任何访问器，即使属性标记为`@synthesize`，这已成为默认值，因此您不再需要编译器指令。

# php - wkhtml2pdf 转换时的粗体文本

> ID：15136147
> 
> 赞同：1
> 
> 时间：2013-02-28T12:57:27.787
> 
> 标签：php, wkhtmltopdf

我正在使用 wkhtml2pdf 将 html 文件转换为 pdf。但是当我将图像添加到页面时出现问题，该页面中的所有文本都以扭曲的粗体显示。如果我删除图像，那么文本就可以了。此问题仅在 Adob​​e 阅读器中查看时出现。在foxit看起来不错。我正在使用 php 生成 html，然后使用 shell 脚本将其转换为 pdf。如果您对此问题有任何想法，请提供帮助。

# javascript - 是否可以覆盖 JavaScript 原始数据类型？

> ID：15136148
> 
> 赞同：4
> 
> 时间：2013-02-28T12:57:30.470
> 
> 标签：javascript

问题是不言自明的。我知道可以扩展原始数据类型，`string`但是可以覆盖它吗？

这是一个在采访中被问到的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:09:57.817

不，你不能覆盖任何东西。EcmaScript[定义了原始类型](http://es5.github.com/#x4.3.2) `Undefined`、`Null`、`Boolean`、`Number`和`String`; 这些是内部的，无论您在做什么（例如覆盖全局`String`构造函数）都将使用它们。[文字的类型转换](http://es5.github.com/#x9)和评估不依赖于任何公共函数，而仅使用这些内部类型和为它们指定的算法。

当然，如果有人使用`String(myval)`而不是`""+myval`分配给全局`String`变量进行字符串强制，则会对该代码产生影响。任何内部使用仍将指向“旧”功能。

* * *

如果您在谈论原始类型的原型对象（当用作[objects](http://es5.github.com/#x9.9)时），它们也不是可覆盖的。您可以扩展这些对象，但是一旦您分配给 eg `Number.prototype`，您就失去了对实际的原始数字原型对象的引用。[Number 构造函数的](http://es5.github.com/#x15.7.2)示例规范：

> 新建对象的 [prototype] 设置为**原始**Number 原型对象，即( [15.7.3.1](http://es5.github.com/#x15.7.3.1) )的**初始值**`Number.prototype`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:09:50.653

是的（*编辑：几乎*）。打开 Javascript 控制台（如果您使用的是 Chrome，请按 F12）并输入

```
String = function(){alert('bang!')}; 
```

您可以覆盖（*编辑：几乎*）Javascript 中的所有内容——甚至是`window`全局上下文！[evil.js](https://github.com/kitcambridge/evil.js)是一个使用此技巧尽可能重写许多本机对象的库。

不用说，这是极其危险的。我执行了`String`上面的重新映射代码，自从写下它以来，我已经导致了 520 多个 Javascript 错误（我已经看到“砰”的警报很多次了）。原生对象无处不在，您不应该修改它们，以防 3rd 方代码以您不知道的方式依赖它们。这是 Prototype.js 失去人气的原因之一——因为它对原生对象的扩展通常会与其他代码的预期背道而驰。

**编辑：正如**[Bergi](https://stackoverflow.com/users/1048572/bergi)的[回答](https://stackoverflow.com/a/15136413/356541)中所指出的那样，绝对所有内容都可以被覆盖的事实不正确的断言。内联编辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:25:46.350

1.  您可以扩展本机类型的原型。

    ```
    String.prototype.moo = function() { 
       console.log( 'Moo!' ) 
    };
    'Cow says'.moo();
    >> "Moo!" 
    ```

2.  但是，除非您覆盖对整个对象的引用，否则您不能直接覆盖内置类型的构造函数：

    ```
    String = function() { 
       console.log( 'Custom function.' ) 
    };

    new String( 'Hello!' );
    >> "Custom function."
    >> String {} // now you've broken your website ;) 
    ```

3.  ...但仍然：

    ```
    'Wat?!'
    >> "Wat?!" // you can still create strings by typing letters in quotes 
    ```

所以......答案是“是但不是”。您可以使用本机类型（`Number`, `Date`, `String`...），但您不能完全从头开始重新定义它们。它们是您正在使用的 JS 引擎的一部分（很可能是本机 C++ 代码），这带来了一些限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:12:41.090

像这样可能，但你必须总是成功而没有副作用。不是好的做法。

```
function Array() {
  var obj = this;
  var ind = 0;
  var getNext = function(x) {
    obj[ind++] setter = getNext;
    if (x) alert("Data stolen from array: " + x.toString());
  };
  this[ind++] setter = getNext;
}
var a = ["private stuff"];
// alert("Data stolen from array: private stuff"); 
```

# hadoop - DataNode 未在任何节点上启动

> ID：15136151
> 
> 赞同：2
> 
> 时间：2013-02-28T12:57:38.773
> 
> 标签：hadoop

当我使用伪节点配置时，所有守护进程都会启动，但是任何时候我创建一个完全分布式模式的集群，DataNode 守护进程都不会在任何节点上启动，包括主节点。

什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:21:04.183

这是一种方法。我希望它有所帮助： [http](http://www.technology-mania.com/2011/03/hadoop-in-distributed-mode.html) ://www.technology-mania.com/2011/03/hadoop-in-distributed-mode.html GL！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T20:27:45.513

确保所有节点中的 都`namespaceID`相同，并且与主节点匹配。`/tmp/hadoop-hduser/dfs/data/current/VERSION``namespaceID``/tmp/hadoop-hduser/dfs/data/current/VERSION``/tmp/hadoop-hduser/dfs/name/current/VERSION`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T01:12:46.130

在启动集群之前删除 /hadoop-2.6.0/dfs/data

# mysql - MYSQL WHEN CASE THEN 什么都不做

> ID：15136152
> 
> 赞同：3
> 
> 时间：2013-02-28T12:57:46.767
> 
> 标签：mysql

我要做的是在一个非常简单的 3 列数据库中设置一些字段，我用它来管理一些复选框。

如果 id 在列表中，我想将 col_2 设置为 1，使 col_3 状态保持不变。但如果 id 不在列表中，则将 col_2 和 col_3 设置为 0。

这是我到目前为止所拥有的，它不起作用，因为它给了我一些警告并改变了 col_3 的值：

```
UPDATE t 
SET col_2 =
 CASE         
    WHEN id IN (list) THEN 1
    WHEN id NOT IN (list) THEN  0
 END,
col_3 = 
 CASE
    WHEN id NOT IN (list) THEN 0
 END
WHERE id IS NOT NULL; 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T12:59:13.533

这是保持 col_3 不变的方法

```
UPDATE t 
SET col_2 =
 CASE         
    WHEN id IN (list) THEN 1
    WHEN id NOT IN (list) THEN  0
 END,
col_3 = 
 CASE
    WHEN id NOT IN (list) THEN 0
    ELSE col_3 --this
 END
WHERE id IS NOT NULL; 
```

至于您的警告，我们没有足够的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-03T01:55:23.780

要处理任何 WHEN 子句都不匹配任何值的情况，请使用包含空 BEGIN ... END 块的 ELSE，如本示例所示。（此处在 ELSE 子句中使用的缩进只是为了清楚起见，并不重要。）

```
DELIMITER |

CREATE PROCEDURE p()
  BEGIN
    DECLARE v INT DEFAULT 1;

    CASE v
      WHEN 2 THEN SELECT v;
      WHEN 3 THEN SELECT 0;
      ELSE
        BEGIN 
           -- simply put this BEGIN and END for the "do nothing" on ELSE
        END;
    END CASE;
  END; 
```

# ms-access - Modal Popup 导致访问崩溃

> ID：15136155
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:58:04.020
> 
> 标签：ms-access, crash, popup, modal-dialog

我正在使用访问模式弹出表单，我有以下问题：

当我偶然在“表单视图”而不是“设计视图”中打开我的表单时，它会导致 VB 脚本错误（这是正常的，因为它试图从另一个未打开的表单中获取信息）。

所以VB告诉我有一个错误，我告诉VB调试器停止执行代码，因此表单没有打开，但是访问没有重新启用。

我无法重新获得任何形式的控制权，而且它不是无限循环或类似的东西，因为根据我的任务管理器，Access 仍在正常运行。

到目前为止，我找到的唯一解决方案是通过任务管理器关闭访问，但这对我来说似乎并不正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:05:36.583

这里有一些建议：

[http://www.pcreview.co.uk/forums/control-location-screen-form-opens-t4041436.html](http://www.pcreview.co.uk/forums/control-location-screen-form-opens-t4041436.html)

您还可以尝试修改一些表单，将其移动到新的/好的位置，然后保存。我过去曾发生过这种情况。

# android - 适用于 Android 的 Google+ 平台 - getCurrentPerson

> ID：15136160
> 
> 赞同：6
> 
> 时间：2013-02-28T12:58:18.967
> 
> 标签：android

我使用适用于 Android 的 Google+ 平台

```
PlusClient plusClient = 
  new PlusClient.Builder(this, this, this).setScopes(Scopes.PLUS_LOGIN).build(); 
```

在 onConnected-Listener 我想读取登录用户的数据

```
@Override
public void onConnected() {
  super.onConnected();    
  Person person = plusClient.getCurrentPerson();
} 
```

方法调用 getCurrentPerson 返回 null。有没有人设法读取用户数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T21:47:32.090

您需要创建一个 OAuth 2 客户端 ID，并将您的 Android 应用程序的开发人员（可能还有生产）签名密钥添加到其中，如[Google+ 入门指南](https://developers.google.com/+/mobile/android/getting-started)中所述。

我做了同样的事情，但不知道创建 OAuth 2 客户端 ID，并且从该方法中得到 null （当然在日志中没有有用的反馈）。创建 ID 并添加我的应用程序的签名密钥后，该方法返回一个实际的 Person 实例。

即使您实际上并没有在应用程序的任何地方使用客户端 ID，但在该界面中添加签名密钥的行为显然会解锁 Google 服务器上的某些内容并允许其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T21:23:00.380

[您是否完成了此处](https://developers.google.com/+/mobile/android/getting-started)列出的设置步骤？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-22T04:06:21.127

*   您需要创建一个 OAuth 2 客户端 ID 并添加您的 Android 应用程序的开发人员（如果您正在发布仅添加发布密钥，否则开发密钥就足够了）签名密钥，如 Google+ 入门指南中所述。
*   如果您将 API 控制台升级到新的，请转到“同意屏幕”并添加产品名称（这是必需的）
*   转到 API 控制台“APIs & auth”->“APIs”并启用“Google+ API”

它会像魅力一样工作！！！

# android - 使用 Inflator 获取 NullPointerException 的自定义适配器

> ID：15136161
> 
> 赞同：0
> 
> 时间：2013-02-28T12:58:22.523
> 
> 标签：android, baseadapter, android-adapter, layout-inflater, android-inflate

我有一个适配器，它从 API 获取项目列表，然后将其放入列表视图中。这是我第一次使用适配器和列表视图，到目前为止我挣扎了很多！

为什么我会收到此错误？我的上下文是错误的还是什么？

```
package com.example.tvrplayer;

import java.io.File;
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class HiddenChannelsListAdapter extends BaseAdapter {
    private Context mContext;
    private ArrayList mItems;
    private LayoutInflater mInflater;

    public HiddenChannelsListAdapter(Context ctx, ArrayList list) {
        mItems = list;
        mContext = ctx;
        mInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        return mItems.size();
    }

    @Override
    public HashMap getItem(int position) {
        return (HashMap) mItems.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        System.out.println("getView " + position + " " + convertView);
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.channel_item, parent, false);
        } else {
            ((TextView) convertView.findViewById(R.id.channel_text)).setText("Testing");
        }
        return convertView;
    }
    public static class ViewHolder {
        public TextView textView;
    }
} 
```

Asyntask 从服务器获取项目：

```
package com.example.tvrplayer;

import java.io.File;
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.Context;
import android.os.AsyncTask;
import android.util.Log;
import android.view.View;
import android.widget.ListView;

class ChannelPair {
     public ListView lv;
     public ArrayList channelList;
     public Context ctx;
}

public class ChannelHandler extends AsyncTask<Object, Integer, ChannelPair> {

    @Override
    protected ChannelPair doInBackground(Object... params) {
        ChannelPair p = new ChannelPair();
        String apiurl = (String) params[0];
        String linkid = (String) params[1];
        String username = (String) params[2];
        String channelID = null;
        View vw = (View) params[3];

        ListView lv = (ListView) vw.findViewById(R.id.list);
        p.lv = lv;  

        JSONArray channels;
        ArrayList< HashMap < String, String > > channelList = new ArrayList < HashMap < String, String > > ();
        try {
            channels = Json.getJson(apiurl + "/rest/channel/"+ username +"/"+ linkid, "GET");
            Log.i("CHANNELS", channels.toString());
            for (int i=0; i < channels.length(); i++) { 
                JSONObject json_data = channels.getJSONObject(i);
                String name = json_data.getString("Name");
                String channelid = json_data.getString("ChannelID");
                HashMap<String, String> channelObject = new HashMap<String, String>();
//              if ( json_data.getString("ParentPath") == "" ) {
                channelObject.put("id", channelid);
                channelObject.put("name", name);
                channelList.add(channelObject);
//              }
            }
            Log.i("ROOT CHANNELS", channelList.toString());
            p.channelList = channelList;
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return p;
    }

    @Override
    protected void onPostExecute(final ChannelPair p) {
        HiddenChannelsListAdapter adapter = new HiddenChannelsListAdapter(p.ctx, p.channelList);
        p.lv.setAdapter(adapter);
    }
} 
```

错误在这一行：

```
HiddenChannelsListAdapter.java:28
mInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

完整的错误代码：

```
java.lang.NullPointerException
   at com.example.tvrplayer.HiddenChannelsListAdapter.<init>(HiddenChannelsListAdapter.java:28)
   at com.example.tvrplayer.ChannelHandler.onPostExecute(ChannelHandler.java:71)
   at com.example.tvrplayer.ChannelHandler.onPostExecute(ChannelHandler.java:1)
   at android.os.AsyncTask.finish(AsyncTask.java:602)
   at android.os.AsyncTask.access$600(AsyncTask.java:156)
   at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
   at android.os.Handler.dispatchMessage(Handler.java:99)
   at android.os.Looper.loop(Looper.java:137)
   at android.app.ActivityThread.main(ActivityThread.java:4514)
   at java.lang.reflect.Method.invokeNative(Native Method)
   at java.lang.reflect.Method.invoke(Method.java:511)
   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
   at dalvik.system.NativeStart.main(Native Method) 
```

# compilation - 编程模式：什么是不规则循环？

> ID：15136167
> 
> 赞同：2
> 
> 时间：2013-02-28T12:58:31.060
> 
> 标签：compilation, cuda

我从 Kepler 架构技术简报中了解到， *CUDA 5.0*中新添加的**动态并行**性支持编程模式中的*递归*和*不规则循环结构*。

 ***但是谁能告诉我什么是*不规则循环结构*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:01:16.593

根据[这本书第 146 页](http://books.google.com/books?id=YbmaKee9c-kC&pg=PA147&lpg=PA147&dq=%22irregular%20loop%20structure%22&source=bl&ots=mDyhLa_JEk&sig=kUb7OTjGIcOzHR-_WvUdJC4X3cU&hl=en&sa=X&ei=EXAvUa2qLZTY9ASVioH4Dw&ved=0CD8Q6AEwAg#v=onepage&q=irregular&f=false)（专门解决实现内核的问题），

> 常规循环具有确定的迭代次数，而不规则循环的迭代次数取决于某些条件。

他们还在这里提供了一些示例：

**常规循环**

```
for (int i=0; i < 10; i++)
{
    //...;
} 
```

**不规则循环**

```
while (i < 0)
{
    if (con) 
       {i--;}
    else
        //...;
        i++;
} 
```

**另一个不规则循环**

```
while (true)
{
    if (cond1) 
        {break;}
    else
    {
        //...;
        if (cond2)
            {break;}
    }
} 
```

需要明确的是，内核中对不规则循环的支持一直存在。相反，他们建议在 CUDA 5.0 中，您现在可以编写 GPU 代码，通过使用动态并行功能更接近地模仿递归或不规则循环**算法。**如果使用得当，此功能可以让您实施通过启动子内核来避免扭曲分歧的解决方案。***

# mongodb - MongoDB 演示分片

> ID：15136168
> 
> 赞同：0
> 
> 时间：2013-02-28T12:58:34.907
> 
> 标签：mongodb, sharding, demo

这不是一个技术问题，尽管我需要帮助。对于一个学校项目，我设置了一个 mongodb 分片集群。现在我要做一个演示分片的视频。我可以运行一个填满第一个分片的程序，然后显示，在需要时，数据在第二个分片上是平衡的。然而，这将需要非常非常长的时间。我考虑过运行一个命令来计算 mongodb 分片集群的可用磁盘空间（一个分片，然后是两个分片），但没有这样的命令。

任何创造性的帮助都会很棒！

**编辑：** 一个好方法是将块大小设置为非常低的值，通过脚本填充数据库，分片将显示得足够快

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:48:44.310

您可能会发现这个开源项目很有帮助：

[MongoDB 分片可视化工具](https://github.com/10gen-labs/shard-viz#mongodb-sharding-visualizer)

来源在这里： [https ://github.com/10gen-labs/shard-viz](https://github.com/10gen-labs/shard-viz)

# push-notification - 在后台应用程序接收 ACS 推送时增加应用程序徽章：Titanium

> ID：15136175
> 
> 赞同：1
> 
> 时间：2013-02-28T12:58:57.310
> 
> 标签：push-notification, titanium, titanium-mobile, acs, badge

我的应用程序使用 ACS 推送通知。我已经在我的应用程序中实现了应用程序徽章。但问题是 appBadge 在接收推送通知时不会自动递增。我在我的应用程序中使用了以下代码

```
var deviceToken;
Titanium.Network.registerForPushNotifications({
        types: [
            Titanium.Network.NOTIFICATION_TYPE_BADGE,
            Titanium.Network.NOTIFICATION_TYPE_ALERT,
            Titanium.Network.NOTIFICATION_TYPE_SOUND
        ],
        success:function(e)
        {
            deviceToken = e.deviceToken;
            SubscribeToPush(channelName, deviceToken, type);
        },
        error:function(e)
        {
            alert("Error: "+ ((e.error && e.message) || JSON.stringify(e.error)));
        },
        callback:function(e)
        {
            var badgeCount = Ti.UI.iPhone.getAppBadge();
            badgeCount = badgeCount + 1;
            Ti.UI.iPhone.setAppBadge(badgeCount);
        }
    }); 
```

[我在这里](http://docs.appcelerator.com/titanium/latest/#!/api/PushNotificationConfig)读到收到新的推送通知时调用的“[回调函数” 。](http://docs.appcelerator.com/titanium/latest/#!/api/PushNotificationConfig-property-callback)所以我将以下代码设置为回调以增加徽章。

```
callback:function(e)
{
     var badgeCount = Ti.UI.iPhone.getAppBadge(); //Will return the app badges
     badgeCount = badgeCount + 1;                 //Incrementing the appbadge
     Ti.UI.iPhone.setAppBadge(badgeCount);        //Setting new appbadge
} 
```

它在应用程序打开时工作，当它收到通知时，回调被触发，当应用程序进入后台时，徽章出现。但是我想在应用程序处于后台或退出时增加徽章编号。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T04:11:26.137

经过大量研究后，我创建了一个示例应用程序，用于在接收服务器推送通知时增加 appBadge。**您可以从[Increment the ios appBadge Titanium](https://github.com/tanand7/TiSampleApps/tree/master/IncrementAppBadge)**下载代码。请在下载资源文件夹后按照步骤操作。

> 1.  在 Titanium 中创建一个新的移动应用程序项目。
> 2.  将资源文件夹替换为您下载的文件夹。
> 3.  登录 www.appcelerator.com，转到您的应用程序，然后转到管理 ACS
> 4.  创建一个新用户为管理员，设置用户为管理员
> 5.  使用管理员用户创建一个新的访问控制列表 (ACS)，并将 ACL 名称指定为**“SampleApp”**
> 6.  上传推送通知的p12证书
> 7.  现在将应用程序安装到您的 iPhone 并运行应用程序...

应用程序的每个用户都应该有一个自定义对象来存储通知的数量。我在发送推送时更新它们，并在恢复/打开应用程序时清除它。我用我的 iPhone 设备对其进行了测试，它运行良好。但是，由于我必须多次调用 ACS，因此需要一些延迟。

**更新：最新的 Titanium SDK 默认支持此功能。**

您需要做的是更改有效负载，如下所示：

```
var payload = {"alert":"Hi, This is a test notification", badge: "+1"};
/*+1 will increment the current appbadge by 1, number of appbadge will be saved in the ACS*/
Cloud.PushNotifications.notify({
    channel: 'friend_request',
    payload: payload
}, function (e) {
    if (e.success) {
       alert('Success');
    } else {
        alert('Error:\n' +
        ((e.error && e.message) || JSON.stringify(e)));
    }
}); 
```

这将使 appbadge 增加一。当您恢复/打开您的应用程序时，您需要重置 appbadge，如下所示

```
Cloud.PushNotifications.resetBadge({
   device_token : myDeviceToken
}, function(e){
       if(e.success){
             Ti.UI.iPhone.setAppBadge(0);
       } else {
             //Error callback
       }
}) 
```

# google-analytics - 在 Google Analytics 中过滤目录和所有子目录

> ID：15136177
> 
> 赞同：10
> 
> 时间：2013-02-28T12:59:00.230
> 
> 标签：google-analytics

我正在尝试设置一个过滤器以仅包含特定目录及其所有子目录的数据。

例如，我想包含`dogs`目录和子目录中的数据

```
http://www.mysite.com/dogs/
http://www.mysite.com/dogs/index.htm
http://www.mysite.com/dogs/breeds.htm
http://www.mysite.com/dogs/puppies/
http://www.mysite.com/dogs/puppies/index.htm
http://www.mysite.com/dogs/puppies/care/
http://www.mysite.com/dogs/puppies/care/feeding.htm 
```

创建新过滤器时，我认为我应该`Pre-defined filter`选择`Include only` `traffic to the subdirectories` `that begin with`子目录`/dogs/`和`not case sensitive`.

我只是对它应该是`that begin with`还是有点困惑`that are equal to`。我`that begin with`在我的情况下使用是否正确，我的子目录值是否正确？

（我问是因为数据更新需要 24 小时，所以弄错会花费很多时间）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T17:19:22.683

事实证明我是对的。要过滤目录和所有子目录，设置应该是

*   预定义过滤器
*   仅包括
*   子目录的流量
*   开始于
*   /小狗/
*   不区分大小写

# ruby-on-rails - 有没有一种 DRY 方法可以用相同的参数调用不同的 Ruby 方法？

> ID：15136179
> 
> 赞同：0
> 
> 时间：2013-02-28T12:59:04.233
> 
> 标签：ruby-on-rails, ruby

我有这样的代码。

```
if star
  href = star_path( :"star[model]" => model.class, :"star[model_id]" => model.id ))
else
  href = unstar_path( :"star[model]" => model.class, :"star[model_id]" => model.id ))
end 
```

如您所见，它调用了 star_path 或 unstar_path 助手，但使用相同的参数。重复这样的参数感觉不好，感觉应该有更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T13:00:29.553

尝试

```
options = { :"star[model]" => model.class, :"star[model_id]" => model.id }

if star
  href = star_path(options)
else
  href = unstar_path(options)
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T13:04:30.543

两种方式：

*   先赋值给一个变量

    ```
    path_options = :"star[model]" => model.class, :"star[model_id]" => model.id
    href = star ? star_path( path_options ) : unstar_path( path_options ) 
    ```

*   使用自定义助手

    ```
    def custom_star_path( options = {} )
      action = options.delete( :action ) || :star
      action == :star ? star_path( options ) : unstar_path( options )
    end 
    ```

    并致电：

    ```
    custom_star_path( :action => (:unstar unless star), :"star[model]" => model.class, :"star[model_id]" => model.id ) 
    ```

    甚至更简单：

    ```
    def custom_star_path( options = {} )
      options.delete( :has_star ) ? star_path( options ) : unstar_path( options )
    end

    custom_star_path( :has_star => star, :"star[model]" => model.class, :"star[model_id]" => model.id ) 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T13:09:26.633

```
href =
send(
  star ? :star_path : :unstar_path,
  "star[model]".to_sym => model.class, "star[model_id]".to_sym => model.id
) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T13:09:31.933

一个 toggle_star_path 助手怎么样

```
def toggle_star_path star, model
  options = { :"star[model]" => model.class, :"star[model_id]" => model.id }
  star ? unstar_path(options) : star_path(options)
end 
```

然后在您看来，您只需调用：

```
toggle_star_path star, model 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T13:06:46.513

如果您想使用变量方法，那么我认为`send`是可行的方法。

根据[文件](http://ruby-doc.org/core-2.0/Object.html#method-i-send)：

```
 send(symbol [, args...]) → obj
 send(string [, args...]) → obj 
```

> 调用由符号/字符串标识的方法，将任何指定的参数传递给它。`__send__`如果名称 send 与 obj 中的现有方法冲突，您可以使用。当方法由字符串标识时，字符串被转换为符号。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-28T13:07:12.687

尝试如下，简单的 2 行

```
options = { :"star[model]" => model.class, :"star[model_id]" => model.id }

href = star ? star_path(options) : unstar_path(options) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T15:36:03.363

使用此处发布的其他解决方案，我确定了这一点：

```
options = {:"star[model]" => model.class, :"star[model_id]" => model.id}
href = send((star ? :unstar_path : :star_path ), options) 
```

# netbeans - 构建项目后在 Netbeans 项目中添加新 jar

> ID：15136180
> 
> 赞同：0
> 
> 时间：2013-02-28T12:59:04.410
> 
> 标签：netbeans, build, jar, project

我正在 Netbeans7.1 中开发一个应用程序。在构建应用程序后，我面临一个从应用程序添加新 jar 文件的问题。

据我所知，当我们在 Netbeans 中构建项目时，它将创建一个“jar”文件和“lib”目录（其中包含应用程序中使用的所有库）到“dist”目录中。

问题是，我必须`/lib/`在构建项目后将应用程序中的新 jar 添加到目录中。这样该 jar 将在应用程序中使用。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:59:27.157

如果你有一个成功的构建，那么这意味着`jar`你想要添加的内容是在运行时而不是在编译时需要的，否则它不会被编译。如果是上述情况，添加 jar 很简单。

1.  将文件添加`jar`到**lib**文件夹。
2.  `jar`现在用`rar`winrar之类的软件打开你的应用程序。
3.  转到`META-INF`文件夹打开**MANIFEST.MF**文件并在类路径后面附加`lib/new_jar_file.jar`.
4.  宾果游戏..你完成了。

这是**MAINIFEST.MF**文件的屏幕截图，红色框显示了添加上述行的位置。

![在此处输入图像描述](../Images/e0157ce1f3a708cd6471cc030c2c8056.png)

# c# - MVC 4 路由/控制器逻辑 - 一些基本的问题

> ID：15136182
> 
> 赞同：0
> 
> 时间：2013-02-28T12:59:21.313
> 
> 标签：c#, asp.net-mvc, view, asp.net-mvc-routing, asp.net-mvc-views

我昨天有这个工作，为什么它停止工作完全超出了我的范围。我有以下基本场景：

我的申请中有两种类型的角色，租户和房东。当租户登录时，他们应该被引导到租户个人资料页面，房东也是如此（目前我只与租户合作）。

这是场景的工作流程：

1.  用户通过 登录`_LoginPartial`，我确定部分中的逻辑是正确的，但由于某种原因，所以不会让我将剃须刀代码正确粘贴到此处...

2.  单击登录按钮将调用`Login` `ActionResult`. `AccountController`该方法验证用户并检查他们的角色。如果用户是租户角色，他们应该被重定向`MyProfile` `ActionResult`到`TenantsController`. 代码`Login`：

    ```
    public ActionResult Login(LoginModel model)
    {
        if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
        {
            if (Roles.IsUserInRole("Tenant"))
            {
                return RedirectToAction("MyProfile", "Tenants");
            }
        }

        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
        return View(model);
    } 
    ```

3.  被调用后`MyProfile`应显示用户的个人资料。代码`MyProfile` `ActionResult`：

    ```
    public ActionResult MyProfile()
    {
        var db = new LetLordContext();
        var currentTenant = db.UserProfile.First(t => t.UserName == HttpContext.User.Identity.Name);

        return View(currentTenant);
    } 
    ```

正如我所说，这是昨天的工作，但是当我单击登录按钮时出现以下错误`_RegisterPartial`：

> 未找到“登录”视图或其主视图，或者没有视图引擎支持搜索到的位置。搜索了以下位置：~/Views/Account/Login.aspx ~/Views/Account/Login.ascx ~/Views/Shared/Login.aspx ~/Views/Shared/Login.ascx ~/Views/Account/Login。 cshtml ~/Views/Account/Login.vbhtml ~/Views/Shared/Login.cshtml ~/Views/Shared/Login.vbhtml

为什么 MVC 寻找一个名为 Login 的视图？我没有将它指定为路由到名为 Login 的视图。我的路由/控制器逻辑有问题吗？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:05:01.357

因为这些行被执行：

```
// If we got this far, something failed, redisplay form
ModelState.AddModelError("", "The user name or password provided is incorrect.");
return View(model); 
```

显然，要么登录尝试失败，要么输入无效。现在执行最后一次返回的`Login`动作。由于您没有直接说明视图的名称，因此命名约定会尝试查找与操作同名的视图（在本例中为登录）。尝试明确指定视图名称：

```
return View("ViewName", model); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:04:41.997

您的`Login`操作`AccountsController`返回 a `View(model)`。

按照约定，MVC 将在与控制器名称匹配的文件夹中查找与操作名称匹配的视图名称。因此它在 Accounts 控制器下寻找登录视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:07:05.070

执行以下技巧并检查它是否在浏览器上打印“Hello User”，如果是，则表示它没有验证用户并重定向到方法底部提到的登录页面。

```
public ActionResult Login(LoginModel model)
{
    if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
    {
        if (Roles.IsUserInRole("Tenant"))
        {
            return RedirectToAction("MyProfile", "Tenants");
        }
    }

    // If we got this far, something failed, redisplay form
    ModelState.AddModelError("", "The user name or password provided is incorrect.");
    return Content("Hello User");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:13:05.757

打开您的 web.config。

看这里：

```
<system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T17:31:42.053

问题是由使用这个引起的......

```
if (Roles.IsUserInRole("Tenant")) 
```

...而不是这个：

```
if (Roles.IsUserInRole(model.UserName, "Tenant")) 
```

前者可以在用户登录后调用。似乎后者在内部调用时必须使用`Login`- 可能与用户不在会话中/完全登录等有关。

无论如何它都有效。

# cakephp-2.0 - Cake 电子邮件出错

> ID：15136187
> 
> 赞同：1
> 
> 时间：2013-02-28T12:59:39.173
> 
> 标签：cakephp-2.0, cakephp-2.1, cakephp-2.2, cakephp-2.3

在我的控制器文件中，我编写了以下代码用于将图像附加到邮件，但它给出了一个错误

```
$email->attachments(array('/localhost/projname/app/webroot/img/file.png')); 
```

它显示一个错误，如 File not found: ""

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:36:27.160

最后我得到了附加图像的解决方案

```
$email->attachments(array (
                    array('file'=>ROOT.'/app/webroot/img/car.gif',
                          'mimetype'=>'image/png'
                         ),
                    )); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T13:29:48.150

您可以使用该`IMAGES`常量来获取图像文件夹的文件路径：

```
$email->attachments(array(IMAGES.DS.'file.png')); 
```

# android - ImageView 在键盘打开时调整大小

> ID：15136193
> 
> 赞同：0
> 
> 时间：2013-02-28T12:59:51.587
> 
> 标签：android, android-layout, android-relativelayout, android-softkeyboard

这是我的代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" >

<ImageView
    android:id="@+id/bgImage"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_alignParentTop="true"
    android:contentDescription="@string/todo"
    android:scaleType="fitXY"
    android:src="@drawable/default_wallpaper" />

<LinearLayout
    android:id="@+id/mainLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/title"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/in"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="@android:color/transparent"
        android:cacheColorHint="@android:color/transparent"
        android:divider="@android:color/transparent"
        android:stackFromBottom="true"
        android:transcriptMode="alwaysScroll" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/edit_text_out"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_gravity="bottom"
            android:layout_weight="1"
            android:inputType="none" />

        <Button
            android:id="@+id/button_send"
            android:layout_width="70dp"
            android:layout_height="fill_parent"
            android:text="@string/send"
            android:textSize="15sp"
            android:textStyle="bold" />
    </LinearLayout>
</LinearLayout>

</RelativeLayout> 
```

在这种情况下，当我点击`EditText`软键盘时会打开，但我`ImageView`正在缩小。

我`android:windowSoftInputMode="adjustPan"`在清单文件中使用过，但是通过使用它，它会向上推整个活动，但我希望 ImageView 保持原样，并且当键盘打开时，ImageView 是从底部切开的，而不是像在`WhatsApp`应用程序中那样从顶部切开。

任何帮助将不胜感激。谢谢 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T15:18:31.583

我有一个类似的问题，其中`ParallaxBackground`我已经适应的自定义视图应该充当具有视差效果的背景图像，该视差效果由`ViewPager`同一活动中的 a 的滚动驱动。

换句话说，我有一个视图，它显示的图像宽度略大于屏幕的宽度，当用户沿 滚动时，滚动中`ViewPager`的图像`ParallaxBackground`也会滚动一点。

现在，在我的情况下，我的 ViewPager 片段中有一些 EditText，当用户单击它们时，导致软键盘出现，ParallaxBackground（以及因此，背景图像）将被重新调整大小并*“*违背我的意愿” ”。

所以我为 and 添加了一个`boolean isBackground`, two `int`s`fixedWidth`并`fixedHeight`覆盖了我的视图`onMeasure()`，如下所示：

```
 @Override
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    if(isBackground) 
    // If this is being used as a background and is supposed to occupy the whole screen...
    {
                    // force the View to have the specified dimensions
        setMeasuredDimension(fixedWidth, fixedHeight);
    }
    // ...aply default measures...
    else
    {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

 } 
```

我知道这不是一个“漂亮”的解决方案，但是，即使我的回答不是 100% 与您的问题相关，您可能想尝试扩展`ImageView`类并覆盖`onMeasure`.

然后，在您的`onCreate`方法中，您可以设置`isBackground`为 true 并给出您测量的屏幕宽度`fixedWidth`和`fixedHeight`高度的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:09:50.267

删除父布局（`RelativeLayout`）并使`LinearLayout`仅包含对话框的父级！另外，添加`android:windowSoftInputMode="stateVisible|adjustResize"`到`AndroidManifest.xml`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-22T12:36:48.790

从 Java 而非 XML 添加背景图像：

```
getActivity().getWindow().setBackgroundDrawable(getResources().getDrawable(R.drawable.splash_image)); 
```

在清单中添加

```
android:windowSoftInputMode="adjustResize|stateHidden" 
```

如果必须在打开屏幕时隐藏键盘，可以根据需要编写隐藏状态

# deployment - Jenkins 中的代码提升

> ID：15136196
> 
> 赞同：0
> 
> 时间：2013-02-28T12:59:59.213
> 
> 标签：deployment, jenkins, continuous-integration

Jenkins 有没有办法通过自动编写工作而不是手动提升来将代码从 Dev 提升到 Staging/Prod。

如果存在，此功能称为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:38:39.400

升级的[构建插件](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)确实允许手动和自动升级。

# c# - 如何使用 c# 在 paypal 中实现 DoDirectPayment

> ID：15136197
> 
> 赞同：2
> 
> 时间：2013-02-28T13:00:14.533
> 
> 标签：c#, asp.net-mvc, paypal, paypal-sandbox

我是贝宝的新手。我想为我的网站实现直接支付 api。意味着当我点击它时我会有一个购买按钮，它会展开，并且在那个 iframe 中我将拥有 paypal 直接付款的 url。我写了这样的代码

```
 string address = "https://api-3t.sandbox.paypal.com/nvp?USER=user&COUNTRYCODE=US&ZIP=95131&STATE=CA&CITY=San Jose&FIRSTNAME=John&LASTNAME=Smith&STREET=1asfasdfSt&CVV2=123&ACCT=4683075410516684&IPADDRESS=192.168.0.62&PWD=1357635822&EXPDATE=042011&VERSION=58.0&SIGNATURE=signature&METHOD=DoDirectPayment&CREDITCARDTYPE=Visa&AMT=10.00&PAYMENTACTION=Sale&RETURNURL=http://returnurl&CANCELURL=http://cancnelurl";

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(address);
        HttpWebResponse response2 = (HttpWebResponse)request.GetResponse();
        Stream stream = response2.GetResponseStream();
        StreamReader rdr = new StreamReader(stream);
        string req = rdr.ReadToEnd(); 
```

但`req`包含失败消息。我不知道我缺少什么凭据。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:28:35.237

正如已经提到的，您得到的错误是因为您使用凭据的帐户上没有启用 pro。Express Checkout 不需要任何特殊的计费协议，这就是您的 Express Checkout 呼叫有效的原因。

我已经在您的测试沙盒帐户上启用了专业服务，您现在应该可以使用它进行测试了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:30:30.353

```
<html>
<head>
<title>PayPal Merchant SDK - DoDirectPayment API</title>
<link rel="stylesheet" href="../Common/sdk.css"/>
<script language="JavaScript">
    function generateCC(){
        var cc_number = new Array(16);
        var cc_len = 16;
        var start = 0;
        var rand_number = Math.random();

        switch(document.DoDirectPaymentForm.creditCardType.value)
        {
            case "Visa":
                cc_number[start++] = 4;
                break;
            case "Discover":
                cc_number[start++] = 6;
                cc_number[start++] = 0;
                cc_number[start++] = 1;
                cc_number[start++] = 1;
                break;
            case "MasterCard":
                cc_number[start++] = 5;
                cc_number[start++] = Math.floor(Math.random() * 5) + 1;
                break;
            case "Amex":
                cc_number[start++] = 3;
                cc_number[start++] = Math.round(Math.random()) ? 7 : 4 ;
                cc_len = 15;
                break;
        }

        for (var i = start; i < (cc_len - 1); i++) {
            cc_number[i] = Math.floor(Math.random() * 10);
        }

        var sum = 0;
        for (var j = 0; j < (cc_len - 1); j++) {
            var digit = cc_number[j];
            if ((j & 1) == (cc_len & 1)) digit *= 2;
            if (digit > 9) digit -= 9;
            sum += digit;
        }

        var check_digit = new Array(0, 9, 8, 7, 6, 5, 4, 3, 2, 1);
        cc_number[cc_len - 1] = check_digit[sum % 10];

        document.DoDirectPaymentForm.creditCardNumber.value = "";
        for (var k = 0; k < cc_len; k++) {
            document.DoDirectPaymentForm.creditCardNumber.value += cc_number[k];
        }
    }
</script>
</head>
<body>
    <div id="wrapper">
        <div id="header">
            <h3>DoDirectPayment</h3>
            <div id="apidetails">Process a credit card payment.</div>
        </div>
        <div id="request_form">     
            <form method="POST" action="DoDirectPayment.php"
                name="DoDirectPaymentForm">
                <div class="params">
                    <div class="param_name">Payment type</div>
                    <div class="param_value">
                        <select name="paymentType">
                            <option value="Sale" selected="selected">Sale</option>
                            <option value="Authorization">Authorization</option>
                        </select>
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">First name</div>
                    <div class="param_value">
                        <input type="text" name="firstName" value="John"/>
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">Last name</div>
                    <div class="param_value">
                        <input type="text" name="lastName" value="Doe"/>
                    </div>
                </div>          
                <div class="params">
                    <div class="param_name">Card type</div>
                    <div class="param_value">
                        <select name="creditCardType"
                            onChange="javascript:generateCC(); return false;">
                                <option value="Visa" selected="selected">Visa</option>
                                <option value="MasterCard">MasterCard</option>
                                <option value="Discover">Discover</option>
                                <option value="Amex">American Express</option>
                        </select>               
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">Card number</div>
                    <div class="param_value">
                        <input type="text" size="19" maxlength="19" name="creditCardNumber">
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">Expiry date</div>
                    <div class="param_value">
                        <select name="expDateMonth">
                            <option value="01">01</option>
                            <option value="02">02</option>
                            <option value="03">03</option>
                            <option value="04">04</option>
                            <option value="05">05</option>
                            <option value="06">06</option>
                            <option value="07">07</option>
                            <option value="08">08</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                        </select>
                        <select name="expDateYear">                 
                            <option value="2013">2013</option>
                            <option value="2014" selected>2014</option>
                            <option value="2015">2015</option>
                            <option value="2016">2016</option>
                            <option value="2017">2017</option>
                            <option value="2018">2018</option>
                            <option value="2019">2019</option>
                            <option value="2020">2020</option>                      
                        </select>
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">CVV</div>
                    <div class="param_value">
                        <input type="text" size="3" maxlength="4" name="cvv2Number" value="962">
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">Amount</div>
                    <div class="param_value">
                         <input type="text" size="5" maxlength="7" name="amount" value="1.00"> USD
                    </div>
                </div>              
                <div class="section_header">Billing address</div>
                <div class="params">
                    <div class="param_name">Address 1</div>
                    <div class="param_value">
                        <input type="text" size="25" maxlength="100" name="address1" value="1 Main St">
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">Address 2 (optional)</div>
                    <div class="param_value">
                        <input type="text" size="25" maxlength="100" name="address2" value="">
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">City</div>
                    <div class="param_value">
                        <input type="text" size="25" maxlength="40" name="city" value="San Jose">
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">State</div>
                    <div class="param_value">
                        <select id=state name="state">
                            <option value=""></option>
                            <option value="AK">AK</option>
                            <option value="AL">AL</option>
                            <option value="AR">AR</option>
                            <option value="AZ">AZ</option>
                            <option value="CA" selected>CA</option>
                            <option value="CO">CO</option>
                            <option value="CT">CT</option>
                            <option value="DC">DC</option>
                            <option value="DE">DE</option>
                            <option value="FL">FL</option>
                            <option value="GA">GA</option>
                            <option value="HI">HI</option>
                            <option value="IA">IA</option>
                            <option value="ID">ID</option>
                            <option value="IL">IL</option>
                            <option value="IN">IN</option>
                            <option value="KS">KS</option>
                            <option value="KY">KY</option>
                            <option value="LA">LA</option>
                            <option value="MA">MA</option>
                            <option value="MD">MD</option>
                            <option value="ME">ME</option>
                            <option value="MI">MI</option>
                            <option value="MN">MN</option>
                            <option value="MO">MO</option>
                            <option value="MS">MS</option>
                            <option value="MT">MT</option>
                            <option value="NC">NC</option>
                            <option value="ND">ND</option>
                            <option value="NE">NE</option>
                            <option value="NH">NH</option>
                            <option value="NJ">NJ</option>
                            <option value="NM">NM</option>
                            <option value="NV">NV</option>
                            <option value="NY">NY</option>
                            <option value="OH">OH</option>
                            <option value="OK">OK</option>
                            <option value="OR">OR</option>
                            <option value="PA">PA</option>
                            <option value="RI">RI</option>
                            <option value="SC">SC</option>
                            <option value="SD">SD</option>
                            <option value="TN">TN</option>
                            <option value="TX">TX</option>
                            <option value="UT">UT</option>
                            <option value="VA">VA</option>
                            <option value="VT">VT</option>
                            <option value="WA">WA</option>
                            <option value="WI">WI</option>
                            <option value="WV">WV</option>
                            <option value="WY">WY</option>
                            <option value="AA">AA</option>
                            <option value="AE">AE</option>
                            <option value="AP">AP</option>
                            <option value="AS">AS</option>
                            <option value="FM">FM</option>
                            <option value="GU">GU</option>
                            <option value="MH">MH</option>
                            <option value="MP">MP</option>
                            <option value="PR">PR</option>
                            <option value="PW">PW</option>
                            <option value="VI">VI</option>
                        </select>
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">Zip code</div>
                    <div class="param_value">
                        <input type="text" size="10" maxlength="10" name="zip" value="95131"> (5 or 9 digits)
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">Country</div>
                    <div class="param_value">
                        <input type="text" size="10" maxlength="10" name="country" value="US">
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">Phone</div>
                    <div class="param_value">
                        <input type="text" size="10" maxlength="10" name="phone" value="">
                    </div>
                </div>
                <div class="params">
                    <div class="param_name">IPN listener URL</div>
                    <div class="param_value">
                        <input type="text" size="80" maxlength="200" name="notifyURL" value="">
                    </div>
                </div>

                <div class="params">
                    <div class="param_name"></div>
                    <div class="param_value">
                    </div>
                </div>
                <div class="submit">
                    <input type="submit" name="DoDirectPaymentBtn"
                        value="DoDirectPayment" />
                </div>                          
            </form>
            <a href="../index.php">Home</a>
        </div>
    </div>
    <script language="javascript">
        generateCC();
    </script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:13:00.470

错误消息指出它的到期日期就是问题所在。

您传递的 EXPDATE=042011 在我看来就像过去的日期。

编辑：

10500 Invalid Configuration 由于商户配置无效，无法处理此交易。在您未同意计费协议时发生。

10501 Invalid Configuration 由于商户配置无效，无法处理此交易。

在计费协议被禁用或不活动时发生。

# android - 何时使用 handler.post() 以及何时使用 new Thread()

> ID：15136199
> 
> 赞同：72
> 
> 时间：2013-02-28T13:00:20.317
> 
> 标签：android, android-handler, android-thread

我想知道什么时候应该使用`handler.post(runnable);`，什么时候应该使用 `new Thread(runnable).start();`

它在 Handler 的开发者文档中提到：

> 使 Runnable r 添加到消息队列中。可运行对象将在附加此处理程序的线程上运行。

这是否意味着如果我在`onCreate()`课堂上`Activity`写：

```
Handler handler = new Handler();
handler.post(runnable); 
```

那么runnable会在单独的线程中调用还是在Activity的线程中调用呢？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-02-28T13:02:34.773

`Handler.post()`每当您想在 UI 线程上执行操作时都应该使用。

因此，假设您想更改`TextView`回调中的 a 文本。因为回调不在 UI 线程上运行，所以您应该使用`Handler.post()`.

在 Android 中，与许多其他 UI 框架一样，UI 元素（小部件）只能从 UI 线程修改。

另请注意，术语“UI 线程”和“主线程”通常可以互换使用。

* * *

编辑：长时间运行任务的示例：

```
mHandler = new Handler();

new Thread(new Runnable() {
  @Override
  public void run () {
    // Perform long-running task here
    // (like audio buffering).
    // You may want to update a progress
    // bar every second, so use a handler:
    mHandler.post(new Runnable() {
     @Override
     public void run () {
       // make operation on the UI - for example
       // on a progress bar.
     }
    });
  }
}).start(); 
```

当然，如果您要执行的任务真的很长，并且用户可能会同时切换到另一个应用程序的风险，您应该考虑使用[Service](http://developer.android.com/guide/components/services.html)。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-03-07T07:54:26.250

要回答您的具体问题：

> 这是否意味着如果在 Activity 类的 onCreate 中我写：
> 
> 处理程序 handler = new Handler() hanlder.post(runnable); 那么，runnable 会在单独的线程中调用还是在 Activity 的线程中调用？

不，不会的。Runnable 将在主线程本身上调用。处理程序仅用于将消息发布到它所附加的线程（创建它的位置）。它不会自行创建线程。在您的示例中，您在主线程（调用 Activity.OnCreate() 的位置）中创建了一个处理程序，因此在此类处理程序上发布的任何消息都将仅在主线程上运行。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-24T15:02:08.470

示例被顶起：

```
mHandler = new Handler();
new Thread(new Runnable(){
  @Override
  public void run () {
    mHandler.post(new Runnable() {
     @Override
     public void run () {
       mUiView.setX(x);
     }
    });
  }
}).start(); 
```

或者，您可以跳过处理程序并直接在视图上使用 post 方法：

```
new Thread(new Runnable(){
  @Override
  public void run () {
    mUiView.post(new Runnable() {
     @Override
     public void run () {
       mUiView.setX(x);
     }
    });
  }
}).start(); 
```

这是一篇很好的文章，概述了不同之处：[post 方法到底是做什么的？](https://stackoverflow.com/questions/13840007/what-exactly-does-the-post-method-do)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-03-27T00:14:57.610

`handler.post()`当您想将代码*（通常从后台线程）***发布**到**主线程**时使用。是的，POST，就像你一样，给某人寄一封信。*在处理程序*的帮助下，代码将尽快执行，即几乎立即执行。

# android - 通过android手机将文件上传到服务器（IIS）

> ID：15136205
> 
> 赞同：0
> 
> 时间：2013-02-28T13:00:33.727
> 
> 标签：android

我用谷歌搜索了我的问题，但没有找到任何东西。我在win 7中创建了一个服务器来将文件从android手机上传到它。但我无法上传文件。我不知道服务器设置/配置是真的吗？！[server1][1]

```
HttpURLConnection connection = null;
        DataOutputStream outputStream = null;
        DataInputStream inputStream = null;

        String pathToOurFile = "/sdcard/test.txt"; //complete path of file from your android device
        String urlServer = "http://www.rar.com/";// complete path of server
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";
        Log.i("*******urlServer**1**", "urlServer ");
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1 * 1024 * 1024;

        try {
            FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile));
            Log.i("*******fileInputStream******", "sent: ");
            URL url = new URL(urlServer);
            connection = (HttpURLConnection) url.openConnection();
            Log.i("*******HttpURLConnection**1**", "v ");
            // Allow Inputs & Outputs
            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);

            // Enable POST method
            connection.setRequestMethod("POST");

            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
            Log.i("*******setRequestProperty**1**", "v ");
            outputStream = new DataOutputStream(connection.getOutputStream());
            Log.i("*******DataOutputStream******", "DataOutputStream: ");
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
            outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile + "\"" + lineEnd);
            outputStream.writeBytes(lineEnd);
            Log.i("*******lineEnd******", "writeBytes: ");
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];

            // Read file
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            Log.i("*******befwhile******", "byteread ");
            Log.i("*******byteread******", String.valueOf(bytesRead));

            while (bytesRead > 0) {
                outputStream.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
            Log.i("*******befwhile******", "end while ");
            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
            Log.i("*******befwhile******", "twoHyphens ");
            // Responses from the server (code and message)
            int serverResponseCode = 0;
            String serverResponseMessage = "";
            serverResponseCode = connection.getResponseCode();
            Log.i("*******befwhile******", "getResponseCode1 ");
            serverResponseMessage = connection.getResponseMessage();
            Log.i("*******befwhile******", "getResponseMessage2 ");

            fileInputStream.close();
            outputStream.flush();
            outputStream.close();
            Log.i("*******Sending******", "sent: Final***");
        }
        catch (Exception ex) {
            Log.i("*******exception&&" + ex.toString(), ex.getMessage());
            //Exception handling
        } 
```

我也不知道 outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile + "\"" + lineEnd); 当我运行上面的代码时，它运行到 Log.i(" ****** *befwhile* ***** ", "twoHyphens "); 请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:18:56.600

从文档 url.openConnection() 返回 URLConnection 而不是 HttpURLConnection 所以方法 getResponseCode() 不存在。您对 HttpURLConnection 的向下转换将不起作用。此外，所有数据都将在刷新方法后发送。

# java - Java 正则表达式和/或字符串魔术从字符串中提取 ID

> ID：15136209
> 
> 赞同：1
> 
> 时间：2013-02-28T13:00:42.557
> 
> 标签：java, regex, json, string

我有一个 Java 应用程序正在访问一个返回以下 JSON 的第 3 方 RESTful Web 服务：

```
{"fizz":
    {"widgets":
        [
            {
                "widget_id":"295874"
            },
            {
                "widget_id":"295873"
            },
            {
                "widget_id":"295872"
            }
        ],
        "otime":1361993756
    },
    "resp":"ok"
} 
```

通常我会使用 GSON 或 Genson 将其映射回 Java POJO，但这是我必须执行此操作的唯一代码区域，我想在这里偷懒;-)。

我试图想出一个漂亮的方法来提取 3 个`widget_id`值（`,`和``) and returns them as a`List`：

```
public List<Long> extractIdsFromJson(String json) {
    // Can I solve this with a regex perhaps?
} 
```

不确定正确的方法是什么 - 正则表达式、replaceAll 或其他方法？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T13:03:11.160

从长远来看，在这里偷懒只会咬你一口。解析 JSON 并以这种方式提取值；所涉及的“努力”会更少，代码会更容易理解，未来的代码维护者也不会骂你的名字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T13:04:54.617

```
// untested
public List<Long> extractIdsFromJson(String json) {
    List<Long> list = new ArrayList<Long>();
    Matcher matcher = Pattern.compile("\"widget_id\":\"?(\\d+)\"?").matcher(json);
    while (matcher.find())
        list.add(Long.valueOf(matcher.group(1)));
    return list;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T13:04:11.090

如果你喜欢偷懒。这是解决方案。我希望你知道任何需要你选择用正则表达式解决问题的方法：

*   它不检查 JSON 的结构。您忽略了 JSON 可能格式错误的事实，只是盲目地提取数据。
*   它在这里有效，因为您想要一个值不是`Object`or的属性`Array`。

原始正则表达式：

```
"widget_id"\s*:\s*"(\d+)" 
```

在文字字符串中：

```
"\"widget_id\"\\s*:\\s*\"(\\d+)\"" 
```

将上面的正则表达式与`Matcher`循环一起使用：

```
Pattern p = Pattern.compile("\"widget_id\"\\s*:\\s*\"(\\d+)\"");
Matcher m = p.matcher(inputString);

while (m.find()) {
    System.out.println(m.group(1));
} 
```

# c# - c#正则表达式查找“ [data]”和后面的文本

> ID：15136211
> 
> 赞同：0
> 
> 时间：2013-02-28T13:00:48.200
> 
> 标签：c#, expression

嗨，如果有人可以帮助我不熟悉正则表达式，我已经做了一些基本的例子，但我不需要。这是我需要阅读的文本文件：

```
[data]
84  73  0   -124    0   50
84  73  0   -124    0   50
84  84  0   -124    0   50
87  109 0   -124    0   50
82  120 0   -124    0   50
82  132 0   -124    0   50
83  143 0   -124    0   50
83  154 0   -124    0   50 
```

`[data]`我当前的代码读入文本文件并将其存储到一个`[data]`列表`\r\n`中例如文本文件。我不是要求任何人做我的代码，我已经完成了所有其余的工作，只是表达或指向正确方向的一点。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:17:05.543

为什么在可以使用`FilereadLines`and时使用正则表达式`Linq`：

```
var lines = File.ReadLines("text.txt");
var result = lines.SkipWhile(i => i != "[data]").Skip(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:47:33.280

这可能不是最短的正则表达式，可以做你想做的事，但我认为它有效`(\[data\]{1}\s*(\d+\s*|(\-{1})\d+\s*)+\n)`。我使用[http://regexpal.com/](http://regexpal.com/)来测试上面的正则表达式：

```
[data] 123  73 0 -124 21312 123 73 0 -123 231231
123 
```

作为测试数据。

# android - Google maps API v2 按 id 查找标记

> ID：15136212
> 
> 赞同：1
> 
> 时间：2013-02-28T13:00:49.733
> 
> 标签：android, android-maps-v2

您可以在 Android 上使用新的 V2 Google 地图 API 简单地添加标记。因为标记是在配置更改或保存实例时重新创建的，所以您必须通过其 ID 引用它们。问题是如何从具有特定 ID 的地图标记中删除？

我的用例是将标记添加到地图中，将其 id 与真实对象的映射一起存储。然后用户删除了其中一个真实对象，因此我找到了 Marker id 并想从地图中删除 Marker，我知道的唯一方法是拥有 Marker 对象并在其上调用 remove()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:01:49.827

关于在配置更改上重新创建标记的文档是错误的，它实际上对我们有好处，但那里是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:01:34.810

我在进行地图聚类时也遇到过类似的情况，我需要在将标记添加到群集时将其删除。

**我使用的解决方案是，在创建标记并将其添加到地图中并将标记存储在Map (String - Marker)**中时，我持有对标记的引用，其中 key(String) 将是自动生成的标记 id，值将是标记对象。

现在，您可以通过其 id 获取对标记对象的引用并在该标记上调用**remove()**。

我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:25:51.693

只需尝试以下操作：

```
private Marker myMarker;

myMarker = getMap().addMarker(new MarkerOptions()
                    .position(latLng)
                    .title("My Spot")
                    .snippet("This is my spot!")); 
```

现在您要删除的标记可以调用

```
myMarker.remove(); 
```

# mapping - 如何将 RDF 图属性转换为 OWL 对象属性？

> ID：15136215
> 
> 赞同：1
> 
> 时间：2013-02-28T13:00:56.110
> 
> 标签：mapping, rdf, owl, protege, object-properties

我需要将我的 RDF 图形文档转换为 Protege 3.x 识别的 OWL（1 或 2）。W3C Recommendation for mapping [OWL 2 Web Ontology Language Mapping to RDF Graphs](http://www.w3.org/TR/2012/REC-owl2-mapping-to-rdf-20121211/#Mapping_from_RDF_Graphs_to_the_Structural_Specification)说要从 RDF 图中声明对象属性，应该添加 rdf:type owl:ObjectProperty 元素。我在以下代码中发现了用 RDF 图形式表达 OWL 对象属性的问题：

```
<rdf:Property rdf:about="&uni;isTaughtBy">
        <rdf:type rdf:resource="&owl;ObjectProperty"/>
        <rdfs:domain rdf:resource="&uni;Course"/>
        <rdfs:range rdf:resource="&uni;Proffessor"/>
</rdf:Property> 
```

使用以下指定的命名空间：

```
xmlns:uni="http://www.mydomain.org/uni-ns#"
xmlns:owl="http://www.w3.org/2002/07/owl#" 
```

不幸的是，上面提到的代码无法识别，因此显示在 Protege 3.x IDE 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:24:07.050

Protege 4（推荐版本）可以阅读以下代码。复制粘贴该块并将其保存在一个新文件中，然后您应该能够使用 Protege 读取它：

```
<?xml version="1.0"?>
<!DOCTYPE rdf:RDF [
  <!ENTITY owl "http://www.w3.org/2002/07/owl#" >
  <!ENTITY uni-ns "http://www.mydomain.org/uni-ns#" >
  <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
  <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
  <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
]>
<rdf:RDF xmlns="http://www.mydomain.org/uni-ns#"
 xml:base="http://www.mydomain.org/uni-ns"
 xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
 xmlns:uni-ns="http://www.mydomain.org/uni-ns#"
 xmlns:owl="http://www.w3.org/2002/07/owl#"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<owl:Ontology rdf:about="http://www.mydomain.org/uni-ns#"/>
<owl:ObjectProperty rdf:about="&uni-ns;isTaughtBy">
    <rdfs:domain rdf:resource="&uni-ns;Course"/>
    <rdfs:range rdf:resource="&uni-ns;Professor"/>
</owl:ObjectProperty>
<owl:Class rdf:about="&uni-ns;Course"/>
<owl:Class rdf:about="&uni-ns;Professor">
    <rdfs:subClassOf rdf:resource="&owl;Thing"/>
</owl:Class>
</rdf:RDF> 
```

# xml - SVN 日志 XML 输出：获取修订号作为节点

> ID：15136216
> 
> 赞同：1
> 
> 时间：2013-02-28T13:00:57.090
> 
> 标签：xml, svn

当我跑步时`svn log --xml 'repos'`。它生成日志，如...

```
<logentry revision="1">
<author>harry</author>
<date>2008-06-03T06:35:53.048870Z</date>
<msg>Initial Import.</msg>
</logentry> 
```

可以输出为

```
<logentry>
<revision>1</revision>
<author>harry</author>
<date>2008-06-03T06:35:53.048870Z</date>
<msg>Initial Import.</msg>
</logentry> 
```

这将帮助我轻松解析它以将数据插入数据库。或者有什么简单的方法可以将日志存储到数据库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:44:09.050

如果不使用您所追求的修改编译您自己的自定义 Subversion 客户端，您就不能。

或者，您可以通过 XSLT 样式表传递 XML 以执行您所追求的转换，然后将*其*提供给您的数据库。

或者简单地自己解析 XML（每种编程/脚本语言都有一个内置的 XML 库，或者很容易获得）来执行插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T10:49:58.087

PanBI 有一个 svn 模块，它为 svn 日志提供 OLAP 接口：http: [//sourceforge.net/projects/panbi/](http://sourceforge.net/projects/panbi/)

它会生成一个包含所有日志的 svn.sql。您可以使用 sql 转储到您想要的任何数据库

# android - Android，无法显示列表项

> ID：15136220
> 
> 赞同：0
> 
> 时间：2013-02-28T13:01:11.917
> 
> 标签：android, android-listview, adapter

在我的片段中，我有一个列表。我想在我的列表中显示数据。这是适配器类：

```
@Override
    public int getCount() {
        10;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        Log.e(TAG, "---");
        if (convertView == null) {
            convertView = myInflater.inflate(R.layout.list_topicslist, null);
            holder      = new ViewHolder();

            holder.tvTitle          = (TextView)        convertView.findViewById(R.id.tvTitle);
            holder.tvExcerpt        = (TextView)        convertView.findViewById(R.id.tvExcerpt);
            holder.tvDate           = (TextView)        convertView.findViewById(R.id.tvDate);
            holder.tvAuthor         = (TextView)        convertView.findViewById(R.id.tvAuthor);
            holder.tvComment_Count  = (TextView)        convertView.findViewById(R.id.tvComment_Count);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.tvTitle.setText("Title");
        holder.tvExcerpt.setText("Content");
        holder.tvAuthor.setText("Hesam");
        holder.tvComment_Count.setText("Votes:");
        holder.tvDate.setText("1/1/2013");

        return convertView;
    } 
```

这是 list_topicslist.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/rlContainer"
        android:background="@color/White" >

    <RelativeLayout
            android:id="@+id/rlHeader"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="25dp" android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" android:background="@color/bg_list_title">
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/title_author"
                android:id="@+id/tvAuthor" android:layout_alignParentRight="true" android:layout_centerVertical="true"
                android:layout_margin="@dimen/sideMargin" android:lines="1" android:maxLines="1"/>
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/title_date"
                android:id="@+id/tvDate" android:layout_alignParentLeft="true"
                android:layout_margin="@dimen/sideMargin" android:maxLines="1"
                android:lines="1" android:layout_centerVertical="true"/>
    </RelativeLayout>

    <RelativeLayout
            android:id="@+id/rlBody"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="100dp"
            android:layout_below="@id/rlHeader" android:clickable="false">

        <ImageView
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:id="@+id/ivPostImage" android:layout_alignParentRight="true"
                android:layout_alignParentTop="true" android:layout_margin="@dimen/sideMargin"
                android:src="@drawable/ic_loading_green"/>
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/title_title"
                android:id="@+id/tvTitle" android:layout_toLeftOf="@+id/ivPostImage"
                android:layout_alignTop="@+id/ivPostImage" android:layout_margin="@dimen/sideMargin" android:lines="1"
                android:maxLines="3"/>
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/title_excerpt"
                android:id="@+id/tvExcerpt" android:layout_toLeftOf="@+id/ivPostImage"
                android:layout_below="@+id/tvTitle" android:layout_margin="@dimen/sideMargin" android:lines="1"
                android:maxLines="6"/>
    </RelativeLayout>

    <RelativeLayout
            android:id="@+id/rlFooter"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="25dp"
            android:layout_below="@id/rlBody"
            android:background="@color/bg_list_footer">
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/title_comment_count"
                android:id="@+id/tvComment_Count" android:layout_alignParentRight="true"
                android:layout_alignParentTop="true" android:layout_margin="@dimen/sideMargin"
                android:layout_centerVertical="true" android:lines="1" android:maxLines="1"/>
    </RelativeLayout>

</RelativeLayout> 
```

这是片段的 xml：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools" >

    <ListView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/lvTopicsList"
            android:scrollbars="none"
            android:scrollingCache="false"
            tools:listitem="@layout/list_topicslist" />
</RelativeLayout> 
```

当我运行应用程序时，我看不到我的列表，但 Log 显示 getView() 已被调用。

```
02-28 21:09:10.195: E/*** TopicAdapter ***(16184): ---
02-28 21:09:10.220: D/dalvikvm(16184): GC_CONCURRENT freed 2720K, 33% free 11321K/16775K, paused 2ms+1ms
02-28 21:09:10.235: E/*** TopicAdapter ***(16184): ---
02-28 21:09:10.235: E/*** TopicAdapter ***(16184): ---
02-28 21:09:10.235: E/*** TopicAdapter ***(16184): ---
02-28 21:09:10.240: E/*** TopicAdapter ***(16184): ---
02-28 21:09:10.240: E/*** TopicAdapter ***(16184): ---
02-28 21:09:10.250: E/*** TopicAdapter ***(16184): ---
02-28 21:09:10.275: E/*** TopicAdapter ***(16184): ---
02-28 21:09:10.295: D/dalvikvm(16184): GC_CONCURRENT freed 262K, 31% free 11693K/16775K, paused 2ms+2ms 
```

我的错误是什么，在哪里？任何建议，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:07:58.313

```
@Override
 public Object getItem(int position) {
 return position;// change null to position
 } 
```

看看这里的视频。[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。要清楚地了解内存管理，请查看此链接[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。

看看类似的问题[How to solve GC_concurrent freed?](https://stackoverflow.com/questions/6591807/how-to-solve-gc-concurrent-freed) . 看起来你的堆已经满了。

上面的链接应该可以帮助您找到摆脱麻烦的方法。使用 MAT Analyzer 检查任何内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:39:53.347

问题是因为 lint 的愚蠢建议要求我将 layout_width 设置为 0dp 而不是 match-parent。我在 activity_main.xml 中将我的 xml 活动代码（上面未提及）更改为类似的内容

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <fragment
            android:name="com.kamalan.fragments.Fragment_TopicsList"
            android:id="@+id/fragment"
            android:layout_width="match_parent"   <==================
            android:layout_height="match_parent"
            android:layout_gravity="left|center_vertical" />
</LinearLayout> 
```

现在，应用程序运行良好。

* * *

**更新**

我发现这篇文章很有用：[为什么 0dp 被认为是一种性能增强？](https://stackoverflow.com/questions/12016781/why-is-0dp-considered-a-performance-enhancement)

# grails - 如何在 GSP 中使用我的 groovy 类中的 get 方法

> ID：15136221
> 
> 赞同：0
> 
> 时间：2013-02-28T13:01:14.453
> 
> 标签：grails, grails-orm

我正在遵循 spring 安全插件中[这个 groovy 类](https://github.com/grails-plugins/grails-spring-security-core/blob/master/src/templates/PersonAuthority.groovy.template)的模板来维护我的多对多关系。

其中一种方法是这样的：

```
static UserEvent get(long userId, long eventId) {
    UserEvent.find 'from UserRole where user.id=:userId and event.id=:eventId',
            [userId: userId, eventId: eventId]
} 
```

注意：此类没有 ID 属性。

**问题**

如何从我的 GSP 中使用此方法来验证它是否返回某些东西？

我已经尝试过了，但它似乎不起作用，它总是给我相同的结果：

```
<g:if test="${UserEvent.get(currentUserId as long, eventInstance.id as long) != null} ">
   <span>you attended this event</span>
</g:if> 
```

当我在 UserEvent 类中有条目或没有条目时，这两种情况似乎都是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:28:47.153

在控制器中完成工作并将数据传递给视图。视图应该只关注显示数据，而不是计算数据，尤其是不进行数据库查询。这不是 PHP :)

将代码添加到控制器操作：

```
def yourAction() {
   // existing code

   UserEvent event = UserEvent.get(currentUserId as long, eventInstance.id as long)

   [foo: bar, ..., eventExists: event != null]
} 
```

然后在 GSP 中使用它：

```
<g:if test="${eventExists}">
   <span>you attended this event</span>
</g:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:02:25.050

如果你摆脱空测试，只依赖常规的事实，它会起作用吗？

```
<g:if test="${UserEvent.get(currentUserId as long, eventInstance.id as long)}"> 
```

# mongodb - Mongo DB：查询高级结构化集合

> ID：15136224
> 
> 赞同：0
> 
> 时间：2013-02-28T13:01:32.910
> 
> 标签：mongodb

这是我的 Mongo DB 结构。

```
{
  "_id": "10280",
  "city": "NEW YORK",
  "state": "NY",
  "pop": 5574,
  "loc": [
{
    class: 4
    dept:comp
},
{
    class: 5
    dept:comp

}
{
    class: 5
    dept:comp

}
  ]
} 
```

如您所见，有关联的高级和低级。

如果城市是 NEW YORK 并且类是“5”，我需要查询所有文档我正在使用 Java 和 Mongo DB 我尝试过这种方式

```
 BasicDBObject query = new BasicDBObject();
        query.put(city, "NEW YORK");
          query.put(class, "5"); 
```

但它不工作。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:32:07.377

您缺少密钥的`loc`级别，`class`并且您的报价搞砸了。

```
BasicDBObject query = new BasicDBObject();
query.put("city", "NEW YORK");
query.put("loc.class", 5);
DBObject doc = coll.findOne(query); 
```

# java - 在蓝牙模块上读取数据表单android

> ID：15136229
> 
> 赞同：0
> 
> 时间：2013-02-28T13:01:57.853
> 
> 标签：java, android, eclipse, bluetooth

我已经坚持了好几天了。我想出了一个代码来向我的蓝牙模块发送数据字节。我没有收到任何错误，但我不确定数据是否实际正在发送。我用示波器检查了模块上的 RX 和 TX 引脚，但什么也没得到。有谁知道出了什么问题？这是我的代码：

```
import java.io.IOException;
import java.io.OutputStream;
import java.util.Set;
import java.util.UUID;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Modes extends Activity {
    Button gaming;
    Button graphics;
    Button sound;
    Button text;
    BluetoothDevice mmDevice;
    BluetoothSocket mmSocket;
    OutputStream mmOutputStream;
    BluetoothAdapter mBluetoothAdapter;
    byte val;
    private final UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805f9b34fb");

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.modes);
        setUp();
        gaming.setOnClickListener(new View.OnClickListener() {
                @Override
            public void onClick(View v) {
                System.out.println("gkghfgh");
                val = 0;
                try{
                    connect();
                    senData();
                 }catch(IOException ex){}

            }
        });

        graphics.setOnClickListener(new View.OnClickListener() {
             @Override
            public void onClick(View v) {
                    val = 1;
                try{
                      connect();
                    senData();
                }catch(IOException ex){}

            }
        });

        sound.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                val = 8;
                try{
                    connect();
                    senData();
                }catch(IOException ex){}
            }
        });

         text.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                val = 9;
                try{
                    connect();
                    senData();
                }catch(IOException ex){}
                startActivity(new Intent(Modes.this,Text.class));
            }
         });
     }

    private void setUp() {
        gaming = (Button) findViewById(R.id.button1);
        graphics = (Button) findViewById(R.id.button2);
        sound = (Button) findViewById(R.id.button3);
        text = (Button) findViewById(R.id.button4);
        gaming.setText("Gaming");
        graphics.setText("Graphics");
        sound.setText("Sound");
        text.setText("Text");
     }

    void connect() throws IOException{
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
        if(pairedDevices.size() > 0) {
            for(BluetoothDevice device : pairedDevices) {
                if(device.getName().equals("RN42-58C1")) {
                    mmDevice = device;
                    break;
                }
            }
         }
        mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);      
        mmSocket.connect();

    }

    void senData() throws IOException{
        mmOutputStream.write(val);
        System.out.println("Data Sent");
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T16:55:21.583

尝试调用“mmOutputStream.flush();” 在“mmOutputStream.write(val);”之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:49:47.600

我认为问题出在您的蓝牙设备名称上。您需要输入 12 位数字的蓝牙 ID。具有字母数字值。

希望有效。祝你好运。

# c - txt 文件执行了一些奇怪的字符

> ID：15136232
> 
> 赞同：0
> 
> 时间：2013-02-28T13:02:02.403
> 
> 标签：c, file, function, content-management-system, structure

```
 struct contact
 {
  char name[20];
  char email[20];
  int hpnum;
 }add;
  FILE *f;

 void addcontact(struct contact list[3]);
 void savecontact(struct contact list[3]);

 int main (void)
 {
    int option,i;
    struct contact list[3];
do
{
    system("cls");
    printf("==========Welcome to Jeffery's Contact System Management==========\n");
    printf("\t\t\tContact System Main Menu\n");
    printf("[1] Create a New Contact\n");
    printf("[2] Modified Existing Contact\n");
    printf("[3] Delete Existing Contact\n");
    printf("[4] Search Existing Contact\n");
    printf("[5] Exit\n");
    printf("Please enter one of your option.\n");
    scanf("%d",&option);

    switch(option)
    {
        //add new contact
        case 1:addcontact(list);savecontact(list);
        break;
        case 2:
        case 3:
        case 4:for(i=0;i<3;i++)
               {
                   if(list[i].email!=0){
                        printf("\nContact Name: %s",list[i].name);
                        printf("\nHandphone Number: %d",list[i].hpnum);
                        printf("\nE-mail: %s",list[i].email);
                   }
               }
               getch();
               break;
        case 5:exit(EXIT_SUCCESS);
    }
}while(i=1);
getch();
}
void addcontact(struct contact list[3])
{
 char name[20],email[20];
 int hpnum,no=0;

 fflush(stdin);
 printf("\nContact Name: ");
 scanf("%s",list[no].name);
 fflush(stdin);
 printf("\nHandphone Number: ");
 scanf("%d",&list[no].hpnum);
 fflush(stdin);
 printf("\nE-mail: ");
 scanf("%s",list[no].email);
   }
   void savecontact(struct contact list[3])
 {
 FILE *f;
 f=fopen("contact.txt","w");
 fwrite(list,sizeof(list),3,f);
 fclose(f);
} 
```

添加联系人后，当我在 cmd 中搜索时，它会存储它。当我搜索联系人时，它在搜索联系人部分中包含了奇怪的词。此外，它执行的txt文件，里面没有我写的东西。它只是由奇怪的词组成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:13:50.033

您正在接受单个函数并`contact`在`addcontact`函数中保存 3 个对象`savecontact`。

你的`addcontact`功能应该是这样的

```
void addcontact(struct contact *list)
{
 char name[20],email[20];
 int hpnum,no=0;

 fflush(stdout);
 printf("\nContact Name: ");
 scanf("%s",list->name);
 fflush(stdout);
 printf("\nHandphone Number: ");
 scanf("%d",&list->hpnum);
 fflush(stdout);
 printf("\nE-mail: ");
 scanf("%s",list->email);
   } 
```

像这样称呼它

```
struct contact list;
addcontact(&list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:19:51.807

*   `fflush(stdin);`是[未定义](https://stackoverflow.com/questions/2979209/using-fflushstdin)的错误。应该使用`fflush(stdout);`

*   在`savecontact()`功能`fwrite(list,sizeof(list),3,f);`上是错误的。它应该是

    `fwrite(list, sizeof(struct contact), 3, f);`

*   声明甚至错误的无效`addcontact(struct contact list[3])`应该是

    `void addcontact(struct contact *list)`

**编辑**

更正了您的代码。请阅读我在您的代码中添加的注释。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
struct contact
{
    char name[20];
    char email[20];
    int hpnum;
}add;
FILE *f;
void addcontact(struct contact list[3]);
void savecontact(struct contact list[3]);

int main (void){
    int option  ;
    struct contact list[1]; // chnages the size of Lint to One
    do
    {
        printf("==========Welcome to Jeffery's Contact System Management==========\n");
        printf("\t\t\tContact System Main Menu\n");
        printf("[1] Create a New Contact\n");
        printf("[2] Modified Existing Contact\n");
        printf("[3] Delete Existing Contact\n");
        printf("[4] Search Existing Contact\n");
        printf("[5] Exit\n");
        printf("Please enter one of your option.\n");
        scanf("%d",&option);
        switch(option)
        {
                //add new contact
                case 1:
                             addcontact(list);
                       savecontact(list);
                       break;
                case 2:
                case 3:
                case 4: // read from file instead from memroy (list)
                            f=fopen("contact.txt","rb");
                            while(fread(list,sizeof(struct contact),3,f)>0)
                                printf("%s %d %s\n",list[0].name, list[0].hpnum, list[0].email);
                            fclose(f);
                        break;
                case 5:exit(EXIT_SUCCESS);
        }
    }while(1); // changed to 1 instead i=1 and remove i variable from declaration 
}

void addcontact(struct contact *list) // Declaration corrected
{
    int no=0;
    fflush(stdout); // fflush(stdin); was wrong! (this line not needed here)
    printf("\nContact Name: ");
    scanf("%s",list[no].name);
    fflush(stdout);
    printf("\nHandphone Number: ");
    scanf("%d",&list[no].hpnum);
    fflush(stdout);
    printf("\nE-mail: ");
    scanf("%s",list[no].email);
}

void savecontact(struct contact *list) // Declaration corrected
{
    // remove redeclaration of `File* f`
    f=fopen("contact.txt","ab"); // open file in a+ mode instead w
    fseek(f, 0, SEEK_END); // Added this line to shift to end of file 
    fwrite(list,sizeof(struct contact),3,f); //Corrected this line 
    fclose(f);
} 
```

它的工作，运行：

```
:~$ gcc c.c -Wall
:~$ ./a.out 
==========Welcome to Jeffery's Contact System Management==========
            Contact System Main Menu
[1] Create a New Contact
[2] Modified Existing Contact
[3] Delete Existing Contact
[4] Search Existing Contact
[5] Exit
Please enter one of your option.
1

Contact Name: grijesh

Handphone Number: 123

E-mail: g@123
==========Welcome to Jeffery's Contact System Management==========
            Contact System Main Menu
[1] Create a New Contact
[2] Modified Existing Contact
[3] Delete Existing Contact
[4] Search Existing Contact
[5] Exit
Please enter one of your option.
1

Contact Name: yourname

Handphone Number: 1234

E-mail: your@email
==========Welcome to Jeffery's Contact System Management==========
            Contact System Main Menu
[1] Create a New Contact
[2] Modified Existing Contact
[3] Delete Existing Contact
[4] Search Existing Contact
[5] Exit
Please enter one of your option.
4
grijesh 123 g@123
yourname 1234 your@email 
```

# iphone - 如何知道图像是来自缓存还是 SDWebImage 中的表单 url？

> ID：15136237
> 
> 赞同：4
> 
> 时间：2013-02-28T13:02:10.470
> 
> 标签：iphone, ios, sdwebimage

我正在使用`SDWebImage`加载图像列表，它非常好，但是在下次加载图像时，如果 url 相同，它会从缓存中加载图像。但我需要知道它即将到来的形式缓存或网络。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-07T02:03:33.753

查看 SDWebImageManager，它有 2 个版本的函数来检查 URL 是否已经被缓存：

```
- (BOOL)diskImageExistsForURL:(NSURL *)url; 
```

还有一个版本带有一个在检查后执行的块。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T04:30:57.397

您可以检查缓存以查看相关图像是否已下载，如下所示：

```
NSString *key = [[SDWebImageManager sharedManager] cacheKeyForURL:URL];
UIImage *image = [[SDImageCache sharedImageCache] imageFromDiskCacheForKey:key]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:16:35.370

use your url

```
SDWebImageManager *manager = [SDWebImageManager sharedManager];
UIImage *cachedImage = [manager imageWithURL:url];

if (cachedImage) 
{
   [button setImage:cachedImage];
   //image is cashed
}
else 
{
   [manager downloadWithURL:url delegate:self];
} 
```

and then implement delegate function

```
- (void)webImageManager:(SDWebImageManager *)imageManager didFinishWithImage:(UIImage*)image {
   [button setImage:image];
   // new image
} 
```

# python - python 3 - urllib问题

> ID：15136241
> 
> 赞同：0
> 
> 时间：2013-02-28T13:02:19.947
> 
> 标签：python, python-3.x, urllib

我在 Windows 7 中使用 python 3.3.0。我有两个文件：dork.txt 和 fuzz.py

dork.txt 包含以下内容：

```
/about.php?id=1
/en/company/news/full.php?Id=232
/music.php?title=11 
```

fuzz.py 包含以下内容：

```
srcurl = "ANY-WEBSITE"
drkfuz = open("dorks.txt", "r").readlines()
print("\n[+] Number of dork names to be fuzzed:",len(drkfuz))

for dorks in drkfuz:
    dorks = dorks.rstrip("\n")
    srcurl = "http://"+srcurl+dorks

    requrl = urllib.request.Request(srcurl) 

    #httpreq = urllib.request.urlopen(requrl)

    # Starting the request
    try:
        httpreq = urllib.request.urlopen(requrl)
    except urllib.error.HTTPError as  e:
        print ("[!] Error code: ",  e.code)
        print("")
        #sys.exit(1)

    except urllib.error.URLError as  e:
        print ("[!] Reason: ",  e.reason)
        print("")
        #sys.exit(1)  

    #if e.code != 404:
    if httpreq.getcode() == 200:
        print("\n*****srcurl********\n",srcurl)
        return srcurl 
```

因此，当我输入正确的网站名称时`/about.php?id=1`，它可以正常工作。但是当我提供具有 的网站时`/en/company/news/full.php?Id=232`，它首先打印`Error code: 404`然后给我以下错误：`UnboundLocalError: local variable 'e' referenced before assignment`或`UnboundLocalError: local variable 'httpreq' referenced before assignment`

我可以理解，如果网站没有包含的页面`/about.php?id=1`，它会给出`Error code: 404`但为什么它不返回`for`循环来检查文本文件中剩余的傻瓜？？？为什么它停在这里并抛出错误？

我想制作一个脚本来从一个网站地址中找出有效页面，例如：`www.xyz.com`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:17:50.110

当行`urllib.request.urlopen(requrl)`表达式抛出异常时，`httpreq`永远不会设置变量。您可以将其设置为语句`None`之前`try`，然后测试它是否还在`None`之后：

```
httpreq = None

try:
    httpreq = urllib.request.urlopen(requrl)

# ...

if httpreq is not None and httpreq.getcode() == 200: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:42:51.223

```
srcurl = "ANY-WEBSITE"
drkfuz = open("dorks.txt", "r").readlines()
print("\n[+] Number of dork names to be fuzzed:",len(drkfuz))

for dorks in drkfuz:
    dorks = dorks.rstrip("\n")
    srcurl = "http://"+srcurl+dorks

    try:
        requrl = urllib.request.Request(srcurl)
        if requrl != None and len(requrl) > 0:
            try:
                httpreq = urllib.request.urlopen(requrl)
                if httpreq.getcode() == 200:
                    print("\n*****srcurl********\n",srcurl)
                    return srcurl
            except:
                # Handle exception
                pass
    except:
        # Handle your exception
        print "Exception" 
```

未经测试的代码，但它会在逻辑上工作。

# ruby-on-rails - 使用 jquery 自动完成将搜索参数传递给另一个表单

> ID：15136244
> 
> 赞同：1
> 
> 时间：2013-02-28T13:02:23.463
> 
> 标签：ruby-on-rails, associations, params

我正在尝试将表单参数从自动搜索字段传递到另一个表单，而不是`#<Restaurant:0x4708a10>`显示参数。

背景信息：我有两个模型：餐厅和用户。餐厅有很多用户，用户属于餐厅。餐厅已预先填充在数据库中，当用户想要注册帐户时，他们必须首先使用自动完成字段找到餐厅。执行此操作的 url 是 users/find_restaurant。一旦他们单击提交，表单就会发布到用户控制器的结果操作中，以检查餐厅是否已经存在用户。如果用户已经退出，则此人将被重定向到邀请操作，否则，他们将被重定向到新操作。当用户被带到新的操作时， restaurant_id 列显示`#<Restaurant:0x4708a10>`

代码是：

```
class Restaurant < ActiveRecord::Base
  has_many :users

def self.search(search)
  if search
    where('name LIKE ?', "%#{search}%")
  else
    scoped
  end
end

 end

class UsersController < ApplicationController

before_filter :allow_user, :except => ['new', 'find_restaurant', 'results']
autocomplete :restaurant, :name, :display_value => :funky_method, :extra_data => [:id, :address, :city, :state, :zip_code]

  def find_restaurant
    @restaurants = Restaurant.search(params[:search])
    @users = @resturants.map(&:users).flatten.compact.uniq  
  end

  def results
     @restaurants = Restaurant.search(params[:search])
     @users = @restaurants.map(&:users).flatten.compact.uniq
      if @users.blank?
        redirect_to new_user_path
     else
        redirect_to restaurants_path(@school)
   end
end

  def new
    @user = User.new
    @restaurants = Resturant.search(params[:search])
    @user.restaurant_id = @schools
  end

  def create
    @user = User.new(params[:user])
        if @user.save
            redirect_to(:action => 'index')
        else
            render('new')
  end
  end 
```

找学校的表格是

```
<%= form_tag results_users_path, :method => 'get' do %>

<p>
    <%= autocomplete_field_tag :search, params[:search], autocomplete_restaurant_name_users_path, :value_method => :id %>
    <%= submit_tag "Next", :name => nil, :id => "submit" %>
</p>

<% end %> 
```

新的形式是

```
<%= simple_form_for @user, :validate => true do |f| %>
<%= f.association :restaurant %>
<%= f.input :first_name %>
<%= f.input :last_name %>
<%= f.input :title %>
<%= f.input :email %>
<%= f.input :username %>
<%= f.input :password %>
<%= f.input :password_confirmation %>
<%= f.input :role %>
<%= f.button :submit %>

<% end %> 
```

任何帮助表示赞赏。

# php - 以 DOM 方式解析 HTML

> ID：15136248
> 
> 赞同：3
> 
> 时间：2013-02-28T13:02:28.343
> 
> 标签：php, dom, xpath

我们有一个带有静态信息的古老（内部）网站。我们将用更好的东西替换它，因此我需要获取所有信息。我*曾经*通过正则表达式来做到这一点，但最近我偶然发现了一些文章，指出使用正则表达式从 HTML 解析信息正在[邀请 cthulhu 进入这个领域](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)。

所以我决定学习一些新技巧，重新开始并以 DOM 方式进行。我需要的 HTML 部分如下所示：

```
<table id="articles">
    <tr>
    <th>
        <a href='articles/aa123.html'><img src="/iamges/aa123.jpg" alt="some article"></a>
        <br />short description
    </th>
    <td>
        <table class='details'>
        <tr><th><a href='articles/aa123.html'>Some Article</a></th></tr>
        <tr><th>Type:</th><td>article type</td></tr>
        <tr><th>Price:</th><td>€ 99</td></tr>
        <tr><th>Manufacturer:</th><td>Some Company</td></tr>
        <tr><th>Warehouse:</th><td>x</td></tr>
        </table>
    </td>
</tr>   
</table> 
```

到目前为止，我得到了这个：

```
$dom = new DOMDocument();
@$dom->loadHTMLFile ($file);
$xpath = new DOMXPath($dom);
$query = "/html/body/table[@id='articles']//th"; //catch all TH's 
$data = $xpath->evaluate($query); 
```

这就是我卡住的地方。我知道返回的 TH 的所有内容都在 ChildNodes 中，但我很难获得这些值。我需要详细信息页面的 URL 和价格列的值。

我如何提取那些？

目前我想出了以下内容：

```
$query = '//table[@class="details"]//td';
$data= $xpath->evaluate($query);
$c = $ths->length;

for ($i = 0; $i < $c; $i++) {   
    echo htmlentities($data->item($i)->nodeValue);      
} 
```

但这仅显示来自 TD 的文本值。当内容是链接时，它只显示链接标题。不是网址。

**更新** 感谢 Fab 的建议，我设法取得了一些进展。目前我得到以下内容：

```
$tables = $xpath->query('//table[@class="details"]');
foreach($tables as $table) {
    $url = $xpath->evaluate('//th/a/@href', $table);
    $articleName= $xpath->evaluate('//th/a', $table);
    $Manufacturer= $xpath->evaluate('//th[text()="Manufacturer:"]/../td', $table);

    echo 'articleName:' . $articleName . ' <br />';
    echo 'Manufacturer:' . $Manufacturer. ' <br />';
    echo 'url:' . $url. ' <br />';
    echo '<br />';
} 
```

但由于某种原因，它总是显示第一篇文章中的数据（重复页面上的文章数量）。好像“foreach”语句总是返回第一个找到的表。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:11:21.307

URL 的 XPath 将是：

```
//table[@class="details"]//th/a@href 
```

对于价格列：

```
//table[@class="details"]//th[text()="Price:"]/../td 
```

可能您希望分别获取每个表的 URL 和价格，为此您可以首先收集`DOMNodeList`所有“详细信息”表，然后在其中搜索（使用 context 参数）：

```
$tables = $xpath->query('//table[@class="details"]');
foreach($tables as $table) {
    $url = $xpath->evaluate('//th/a@href', $table);
    $price = $xpath->evaluate('//th[text()="Price:"]/../td', $table);
    echo "$url - $price <br>";
} 
```

**更新**

我忘了一件事：上下文参数只对相对路径生效，`//th/...`是绝对的。您必须在开头添加一个点：`.//th/...`

看看：[**工作演示**](http://sandbox.onlinephpfunctions.com/code/fe8085923432b49cc0bb24cbd2932f59728c891c)

（我还必须交换`evaluate`并`query`显式访问第一项的值：

```
$xpath->query(...)->item(0)->nodeValue; 
```

# android - Android ADB 没有在 Eclipse 中确认问题

> ID：15136252
> 
> 赞同：11
> 
> 时间：2013-02-28T13:02:38.163
> 
> 标签：android, adb

我在这个问题上花了大约 5 个小时。我在stackoverflow上阅读了同样的问题，但没有一个解决方案解决了我的问题...... **首先，它给了我：**

```
[2013-02-28 14:48:21 - adb] ADB server didn't ACK
[2013-02-28 14:48:21 - adb] * failed to start daemon * 
```

为了解决这个问题，我在任务管理器中杀死了 adb.exe，重新启动 eclipse。然后去DDMS，重置adb。没运气...

**然后，我转到命令行窗口，输入`adb kill-server`and `adb start-server`，它给了我：**

```
adb server is out of date. killing...
ADB server didn't ACK
fail to start deamon 
```

现在我不知道该怎么办。我有一个项目要在eclipse上开发，所以真的需要尽快解决这个问题。有人请帮忙！！

（正如许多解决方案所示，我杀死了我的 adb.exe 数千次，但它在 2 秒后立即出现在任务管理器中。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-08T02:00:09.973

I had the same problem, here is what actually helped me:

1.  Go to **platform-tools** in Android SDK directory.

2.  Type:

    `adb nodaemon server`

    Output:

    `cannot bind 'tcp:5037'`

3.  Now I know the reason adb not responsive is because it can not bind to port 5037\. Use following command to find out the process that occupies the port:

    `netstat -ano | findstr 5037`

    Output:

    ![Find port binding](../Images/e81e8a60bf083291c26e729901f91d0f.png)

4.  Note that process with PID 4888 is occupying port 5037.

5.  Open **Task Manager**, click on **Details** tab, find the process and kill it, tfadb.exe in this case. it may vary for me it is sh.exe and port 4599 and delete all adb.exe

    ![Processes](../Images/2b57af471ec2dece03481a9f89736f0e.png)

6.  Retry `adb kill-server` and `adb start-server`, hopefully adb is up running fine.

    ![Fine](../Images/37077d85e202b38fea8ae185ef2eb090.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-10T12:07:11.853

在我的情况下，终止 TASK MANAGER 中的进程可以解决它。杀死它后运行**adb start-server**或**adb devices**你应该没问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T15:15:34.217

解决了这个问题。因为我的电脑上安装了一个小助手插件，所以它的后台一直运行着一个adb.exe。所以在我卸载插件后，错误就消失了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-24T01:59:03.930

我有一台 HTC 设备，它的驱动程序软件 (HTC Sync) 试图在我试图从 Eclipse 运行的同时使用 adb 运行进程。如果您的设备有可能需要安装驱动程序的程序（如 HTC Sync），请关闭此程序以防止它并行执行 adb。到目前为止，对我来说，这已经修复了 100%。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-12T07:30:09.497

Sometimes when we are running **SnapPea**, it is running a background process called **"wandoujia_adb"**. when killing the process and running the command "adb start-server" in cmd promt, i get the following o/p text to cmd promt:

> C:\Users**>adb start-server
> * daemon not running. starting it now on port 5037 *
> * daemon started successfully *

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-08T03:52:47.833

Here Is your Solution

1.  Kill ADB process
2.  CLose Eclipse
3.  Remove Lock File .metadata of workspace
4.  Ensure Only one Java Whether JDK or JRE in installed if found remove the previous version
5.  Use Ccleaner to remove Temp files
6.  Clean Registry too
7.  Restart the system
8.  Restart Eclipse

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-08T15:34:17.503

If you have your device connected and you are trying to test through an emulator, make sure that a device sync agent isnt running in the background. This relaunches the adb even after you kill it in task manager.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-12T21:31:55.273

I have tried many approaches I've found here, but just one worked out perfectly:

UNINSTALL AVAST ANTIVIRUS!

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-23T13:23:10.117

I had a mobogenie plugin installed on my machine which was continuously running adb. Uninstalled it and got the problem solved.

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-06-02T04:56:43.847

In my case I was using the mobogeine universal driver, when I end task `adb.exe` from task manager, It restarts again in 1-2 seconds occupying another port number.

To get rid of this problem I have to disconnect my phone & 1st kill mobogeine driver, then `adb.exe` does not restarts agian. Now run `adb start-server` . If the success message shown then everything worked perfectly.

# codeigniter - CodeIgniter CLI 在使用模型时返回空白。如何安全地运行 cron？

> ID：15136258
> 
> 赞同：0
> 
> 时间：2013-02-28T13:02:53.497
> 
> 标签：codeigniter, command-line, cron, crontab

我正在尝试使用 CodeIgniter 从命令行运行 cron。

最初它返回一个空白，但利用 Codeigniter 论坛我发现版本 2.1.3 中有一个错误，需要在 Input.php 中进行行编辑

那是固定的。它仍然无法正常工作，它只是在加载我的主页。

更多的搜索使我在我的配置中将我的 uri_protocol 更改为 AUTO，最后 CLI 正在使用 CI 网站上概述的示例。

但是，当我在 cron 控制器中使用模型时，CLI 再次返回空白*刘海头*

控制器

```
<?php

class Cron extends CI_Controller
{
   public function admin_update()
   {

      $this->load->model('admin_model');
      $this->admin_model->admin_cron(); 
   }
} 
```

模型函数

```
function admin_cron()
{
   $this->load->database();
   echo "two";
} 
```

似乎是 $this->load->database() 行正在破坏它。如果我删除它，它会输出“两个”。

有谁知道为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:04:41.497

您没有为 $this->load->database(); 提供任何输入。

相反，它应该是这样的

```
var $DB; //global variable
$this->DB = $this->load->database('database1',TRUE); 
```

使用 $this->DB 现在运行数据库操作，例如，

```
$this->DB->query($query); 
```

将这些配置项放在 config/database.php

```
$db['database1']['hostname'] = 'serverIP';
$db['database1']['username'] = 'username';
$db['database1']['password'] = 'pwrd';
$db['database1']['database'] = 'DB name';
$db['database1']['dbdriver'] = 'mysql';
$db['database1']['dbprefix'] = '';
$db['database1']['pconnect'] = FALSE;
$db['database1']['db_debug'] = TRUE;
$db['database1']['cache_on'] = FALSE;
$db['database1']['cachedir'] = '';
$db['database1']['char_set'] = 'utf8';
$db['database1']['dbcollat'] = 'utf8_general_ci';
$db['database1']['swap_pre'] = '';
$db['database1']['autoinit'] = TRUE;
$db['database1']['stricton'] = FALSE; 
```

PS：[http ://ellislab.com/codeigniter/user-guide/general/models.html#conn](http://ellislab.com/codeigniter/user-guide/general/models.html#conn)

上面的链接是关于如何连接到数据库的

# xcode - 打开文档会打开我的应用程序的旧版本

> ID：15136259
> 
> 赞同：0
> 
> 时间：2013-02-28T13:02:58.280
> 
> 标签：xcode, cocoa, document, document-based

我有一个`document based application`. 如果我通过双击文件打开保存的文件，则打开我的程序的旧版本（我从系统中删除）而不是新版本。该应用程序是一个`stand alone application`.

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:47:54.757

如果它从系统中删除，它将不会启动。实际上，您确实在某处拥有该应用程序的另一个副本。启动服务无法区分它们之间的区别，可能会启动其中任何一个。您需要找到旧版本（和任何其他实例）并至少将其移至垃圾箱。

# android - 使用 Eclipse 设置 Phonegap

> ID：15136261
> 
> 赞同：0
> 
> 时间：2013-02-28T13:03:01.660
> 
> 标签：android, html, eclipse, cordova, phonegap-build

我浏览了一些关于 Phonegap 的文档。来自Android背景，我想尝试phonegap，以便我可以相对快速地开发多平台应用程序，但我不确定具体点。是否可以在 Eclipse 上安装 phonegap 并从那里编写多平台应用程序？还是我必须继续安装 xcode、visual basic 等并为每个人编写代码？

有人可以指出在这种情况下的最佳做法是什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T13:07:15.137

看看这个链接：

[将 Phonegap 与 Eclipse 集成](https://stackoverflow.com/a/13854393/556975)

这将向您展示一步一步的过程。

> 如果您想在多个平台上使用相同的代码，那么您必须将`www`文件夹下的代码上传到[Phonegap](http://phonegap.com/)站点。他们将直接为您提供多个构建。或者，如果您像上面的 Android 一样单独进行，那么您必须使用单独的 IDE 生成单独的构建，例如适用于 Android 的 eclipse 和适用于 iphone 的 xcode。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:17:45.427

当您下载将包含在示例中的 PhoneGap 时，只需导入该示例并在 eclipse 中运行该示例并浏览该项目中可用的所有文件。这样您就会了解必须将哪些文件放在哪里以及如何放置。

# python - 我怎么能说一个文件是 SVG 而不使用幻数？

> ID：15136264
> 
> 赞同：14
> 
> 时间：2013-02-28T13:03:05.123
> 
> 标签：python, xml, svg, file-format, magic-numbers

`SVG`文件基本上是一个文件`XML`，因此我可以使用字符串`<?xml`（或十六进制表示：）`'3c 3f 78 6d 6c'`作为幻数，但有一些相反的理由不这样做，例如，如果有额外的空格可能会破坏此检查。

我需要/期望检查的其他图像都是二进制文件并且有幻数。如何在`SVG`不使用扩展名的情况下快速检查文件是否为格式，最终使用 Python？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T13:22:58.493

XML 不需要以`<?xml`序言开头，因此对该前缀进行测试并不是一种好的检测技术——更不用说它将每个 XML 识别为 SVG。一个体面的检测，并且非常容易实现，是使用一个真正的 XML 解析器来测试该文件是包含`svg`顶级元素的格式良好的 XML：

```
import xml.etree.cElementTree as et

def is_svg(filename):
    tag = None
    with open(filename, "r") as f:
        try:
            for event, el in et.iterparse(f, ('start',)):
                tag = el.tag
                break
        except et.ParseError:
            pass
    return tag == '{http://www.w3.org/2000/svg}svg' 
```

Using通过使用[expat](https://libexpat.github.io/)`cElementTree`确保检测是有效的；显示在约 200μs 内检测到 SVG 文件，在 35μs 内检测到非 SVG。API 使解析器能够放弃创建整个元素树（尽管有模块名称），并且只读取文档的初始部分，而不管总文件大小如何。`timeit``iterparse`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:14:18.300

您可以尝试以二进制形式读取文件的开头 - 如果找不到任何幻数，则将其作为文本文件读取并匹配您想要的任何文本模式。或相反亦然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-06T20:04:55.270

这是来自`man file`([这里](https://manpages.ubuntu.com/manpages/focal/man1/file.1.html))，对于 unix`file`命令：

> 魔术测试用于检查具有特定固定格式数据的文件。典型的例子是二进制可执行文件……这些文件有一个“幻数”存储在文件开头附近的特定位置，告诉 UNIX 操作系统该文件是二进制可执行文件，以及几种类型中的哪一种其中。**“魔术”的概念已通过扩展应用于数据文件。通常可以用这种方式来描述任何在文件中具有较小固定偏移量的不变标识符的文件。**...

（我的重点）

这是该`file`命令用于识别`svg`文件（[source](https://github.com/file/file/blob/f58043c39891ff165660b84bc342820106ded5b2/magic/Magdir/sgml)）的“魔法”：

```
...
0       string        \<?xml\ version=
>14     regex         ['"\ \t]*[0-9.]+['"\ \t]*
>>19    search/4096   \<svg         SVG Scalable Vector Graphics image
...
0       string        \<svg         SVG Scalable Vector Graphics image
... 
```

如前所述[`man magic`](https://manpages.ubuntu.com/manpages/focal/en/man5/magic.5.html)，每一行都遵循格式`<offset> <type> <test> <message>`。

如果我理解正确，这将寻找文字`"<?xml version="`. 如果找到，它会查找版本号，如正则表达式所述。如果找到，它将搜索接下来的 4096 个字节，直到找到文字`"<svg"`。如果其中任何一个失败，它会`"<svg"`在文件的开头查找文字。

类似的东西可以在 Python 中实现。

请注意，还有[python-magic](https://github.com/ahupp/python-magic)，它提供了 的接口`libmagic`，供 unix`file`命令使用。

# autotools - 如何在 make 时将 shell 脚本输出到 Makefile.am？

> ID：15136267
> 
> 赞同：3
> 
> 时间：2013-02-28T13:03:08.430
> 
> 标签：autotools, autoconf, automake

我正在从事一个 autotools 项目，并且是 autotools 世界的新手。出于各种原因，为了完整起见，在底部进行了详细说明，我有一个 shell 脚本，我想从中获取输出以在我的 makefile 中使用。

我有类似以下的情况。`AC_CONFIG_FILES`Autoconf 从命令生成脚本。例如

```
AC_CONFIG_FILES([thescript], [chmod +x thescript]) 
```

脚本.in

```
#!/bin/sh
# -*- sh -*-
# @configure_input@
echo @abs_top_builddir@/bar/foo 
```

我真正想做的是使用返回的任何内容`@abs_top_builddir@/bar/foo`在我的 Makefile 中使用。我想在生成时在变量中提供这个值，并能够在我的 Makefile.am 中访问它，比如`$(FOOPLACE)`. 我怎样才能做到这一点？

**我需要这个/额外信息的原因**

这个问题与我以前的问题有关：

[如何在 autoconf configure.ac 中获取顶级构建目录的绝对路径？](https://stackoverflow.com/questions/15041754/how-to-get-absolute-path-to-top-build-directory-in-autoconf-configure-ac)

该项目需要一个具有自己的 makefile 和 configure.ac 的子项目。子项目是用于为主项目生成源文件的程序。有一个选项可以禁用此项目的构建并尝试使用已安装的版本。在这种情况下，已安装版本的位置在变量`FOOPLACE`(uisng `AC_PATH_PROG`) 中提供。当我使用本地构建的版本时，我想把它的位置放在里面`FOOPLACE`。然后在 Makefile.am 中将该变量用作`$(FOOPLACE)`.

autoconf 中似乎有一个错误，这意味着 abs_top_builddir 可以访问的唯一位置是在配置`AC_CONFIG_FILES`时生成的配置文件中。在链接的问题中有详细说明我为什么要这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T06:06:13.430

# 写的问题

在您的 Makefile.am 中，您可以执行以下操作：

```
foo.c: foo.in
        FOOPLACE=`./thescript`; $(FOOPLACE) -c -o $@ $< 
```

这样做的好处是在可移植的 Makefile 代码中不需要 GNU 主义。

# 正确而艰难的道路

我准备了一个使用名为`mkfoo`. 它可以使用内部副本或主机系统上的副本。

我们先来看看`configure.ac`：

```
AC_PREREQ([2.67])
AC_INIT([parent], [0], [jack@jackkelly.name])
AM_INIT_AUTOMAKE([foreign])

AC_ARG_WITH([mkfoo],
  [AS_HELP_STRING([--with-mkfoo],
    [Path to mkfoo, "external", "internal", or "check" @<:@check@:>@])],
  [MKFOO=$withval],
  [with_mkfoo=check])
AS_IF([test "$with_mkfoo" = check -o "$with_mkfoo" = external],
  [AC_PATH_PROG([MKFOO], [mkfoo], [no])])
AS_IF([test "$with_mkfoo" = external -a "$MKFOO" = no],
  [AC_MSG_ERROR([External mkfoo demanded, but not found.])])

dnl We conditionally set MKFOO in Makefile.am
AM_SUBST_NOTMAKE([MKFOO])

AM_CONDITIONAL([USE_INTERNAL_MKFOO],
  [test "$with_mkfoo" = internal -o "$MKFOO" = no])
AM_COND_IF([USE_INTERNAL_MKFOO], [AC_CONFIG_SUBDIRS([mkfoo])])

AC_CONFIG_FILES([Makefile src/Makefile])
AC_OUTPUT 
```

这里发生了一些事情：

1.  默认行为是“检查 mkfoo，如果不存在，则构建并使用捆绑的副本”。还要注意它支持`--with-mkfoo=PATH`（用户可能在一个奇怪的地方安装了一个副本），`--with-mkfoo=internal`（distcheck 需要，我们想要测试所有东西）和`--with-mkfoo=external`（对不喜欢捆绑子项目的包维护者的善意）。
2.  `AM_SUBST_NOTMAKE([MKFOO])`停止在中`automake`生成一行表格`MKFOO = @MKFOO@`。`Makefile.in`我们需要有条件地完成这项任务。
3.  我们设置了一个自动生成条件，因为我们需要为内部/外部`mkfoo`内部做不同的事情`Makefile.am`
4.  我们`mkfoo`有条件地配置目录。

现在，顶层`Makefile.am`：

```
if USE_INTERNAL_MKFOO
SUBDIRS = mkfoo
DIST_SUBDIRS = mkfoo
else
SUBDIRS =
DIST_SUBDIRS =
endif
SUBDIRS += src
DIST_SUBDIRS += src

## Need to make sure the internal tools work during distcheck.
DISTCHECK_CONFIGURE_FLAGS = --with-mkfoo=internal
dist-hook:
if ! USE_INTERNAL_MKFOO
        cp -fpR $(srcdir)/mkfoo $(distdir)
endif 
```

这里发生了什么：

1.  有条件地递归到`mkfoo`，并在之前做`src`，这需要`$MKFOO`。
2.  因为有次*连配置*`mkfoo`都没有，可能就没有了。这意味着我们已经坏了（并且通过扩展，）。所以我们也必须有条件地设置，如果我们没有配置，确保它的分布式成为我们的责任。*`Makefile``make dist``make distcheck``DIST_SUBDIRS``mkfoo`*
**   当我们`make distcheck`想要使用内部副本时，因为最好使用源 tarball 中的所有内容。*

 *现在，`src/Makefile.am`：

```
if USE_INTERNAL_MKFOO
MKFOO = $(abs_top_builddir)/mkfoo/mkfoo
else
MKFOO = @MKFOO@
endif

bin_SCRIPTS = foo
CLEANFILES = foo
EXTRA_DIST = foo.in

foo: foo.in
        $(MKFOO) < $< > $@ 
```

除了 的条件赋值之外，这里没有什么令人震惊的`MKFOO`。

`src/foo.in`：

```
I am foo.in! 
```

现在为子包。`mkfoo/configure.ac`：

```
AC_PREREQ([2.67])
AC_INIT([mkfoo], [0], [jack@jackkelly.name])
AM_INIT_AUTOMAKE([foreign])
AC_PROG_CC
AC_CONFIG_FILES([Makefile])
AC_OUTPUT 
```

如您所见，没有什么特别的。怎么样`mkfoo/Makefile.am`？

```
bin_PROGRAMS = mkfoo 
```

`mkfoo/mkfoo.c`：

```
#include <stdio.h>
int main(int argc, char *argv[]) {
  puts("Internal mkfoo.");
  return 0;
} 
```

只是一个虚拟测试程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:51:13.887

Makefile.am 中的以下行不适用于什么？

```
FOOPLACE=$(shell @abs_top_builddir@/thescript) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:22:51.750

`FOOPLACE`似乎是由它在条件中存在于 configure.ac 中创建的，即使条件不正确（有关详细信息，请参阅链接的问题）。因此它存在，但在制造时是空的。似乎变量不能在 Makefile.am 中重新定义，但是，它们可以附加到。由于`FOOPLACE`是空的，因此脚本的输出可以使用以下内容添加到其中。

```
FOOPLACE+=$(shell $(abs_top_builddir)/thescript) 
```*

# ruby-on-rails - 具有少量持久数据的无表 ActiveRecord 对象？

> ID：15136276
> 
> 赞同：0
> 
> 时间：2013-02-28T13:03:24.490
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2, active-attr

我想要无表格的 AR 对象。伪代码：

```
# tablefull AR object
class Item < ActiveRecord::Base
  has_one :color
end

# tableless AR object, but persistant
class Color
  include ActiveAttr::Model
  belongs_to :item
  attribute :color
  Colors = [:yellow, :red, :black]
end

# expect
Color.first => #<Color id:1, color: :yellow>
Item.create(color: Color.first, foo: 'bar')
Item.where(color_id: Color.first) 
```

我在下面看，但这些是无表的，不是持久的。 [如何在 Rails 3 中创建 ActiveRecord 无表模型](https://stackoverflow.com/questions/9123858/how-to-create-activerecord-tableless-model-in-rails-3) [Rub​​y on Rails：功能齐全的无表模型](https://stackoverflow.com/questions/4997762/ruby-on-rails-fully-functional-tableless-model)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:30:08.723

您正在以非标准方式使用某些术语。当 Rails 社区（以及我所知道的大多数技术社区）谈到“持久性”时，他们的意思是“将数据保存在持久的地方”。这至少意味着“将数据保存在应用程序内存之外的某个位置”，通常意味着“以能够在应用程序崩溃后幸免于难的方式保存数据（例如，保存到磁盘）”。对于 ActiveRecord，持久性意味着非常特殊的东西——存储到 SQL 数据库。

因此，您的示例成功获得了“无表”模型。如果您希望使用 ActiveRecord 保持持久性，请使用普通（表支持）模型。我意识到这可能不是您正在寻找的答案，但这是您需要听到的。

# ios6 - 在 iOS 6+ 中解析大字符串并用新值替换解析的字符串值

> ID：15136278
> 
> 赞同：0
> 
> 时间：2013-02-28T13:03:41.683
> 
> 标签：ios6, replace, string-parsing

在我的应用程序中，我想按照以下步骤获取最终字符串。我的消息格式如下

```
message <br/><br/> On {date_time_stamp} sender_name wrote <br/><br/> 
```

假设我的消息字符串如下

```
 Hello developers <br/><br/> On {2013-02-28 05:00:33} Bob wrote <br/><br/>
 Hello World <br/><br/> On {2013-02-27 08:35:33} Jack wrote <br/><br/>
 Hello Apple <br/><br/> On {2013-02-26 04:10:44} Tom wrote <br/><br/> 
```

现在我需要按照以下步骤

1.  一一获取消息中的所有日期

2.  将其从 GMT 时区转换为本地时区

3.  将消息中的 GMT 日期替换为本地日期时间

4.  最后用 \n 替换“断线”并从消息中删除花括号。

我有以下代码

```
 -(void)parseMessageBody:(NSString*)msg
{
    NSRange openBracket = [msg rangeOfString:@"{"];
    NSRange closeBracket = [msg rangeOfString:@"}"];
    NSRange numberRange = NSMakeRange(openBracket.location + 1, closeBracket.location - openBracket.location - 1);
    NSString *numberString = [msg substringWithRange:numberRange];
    NSLog(@"Parsed string: %@",numberString);
}

-(NSString*)formattedMessageFromString:(NSString*)msg
{
    NSString *formattedMessage = @"";
    formattedMessage = [msg stringByReplacingOccurrencesOfString:@"<br/>" withString:@"\n"];
    return formattedMessage;
}

-(NSString*)getLocalDateFromUTCDateString:(NSString*)utcDateString
{
    NSDateFormatter *serverDateFormatter = [[NSDateFormatter alloc] init];
    NSTimeZone *sourceTimeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    [serverDateFormatter setTimeZone:sourceTimeZone];
    [serverDateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSDate *dateFromServer = [serverDateFormatter dateFromString:utcDateString];
    DLog(@"UTC date From SERVER: %@",dateFromServer);

    NSDateFormatter *localDateFormatter = [[NSDateFormatter alloc] init];
    [localDateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSTimeZone* localTimeZone = [NSTimeZone systemTimeZone];
    [localDateFormatter setTimeZone:localTimeZone];
    NSString *localDate = [localDateFormatter stringFromDate:dateFromServer];
    DLog(@"Converted Local DAte : %@",localDate);

    return localDate;
} 
```

我无法执行步骤 1 和 3 来获取消息中的所有日期并将其替换为本地日期时间。消息也会随着时间的推移而增长。所以解析需要很快。谁能告诉我如何获取消息中的所有日期并将其替换为转换后的日期？

任何形式的帮助都将受到高度赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:46:51.973

可以使用正则表达式查找和替换日期：

```
NSString *msg = @"Hello developers <br/><br/> On {2013-02-28 05:00:33} Bob wrote <br/><br/>\n"
   "Hello World <br/><br/> On {2013-02-27 08:35:33} Jack wrote <br/><br/>\n"
   "Hello Apple <br/><br/> On {2013-02-26 04:10:44} Tom wrote <br/><br/>\n";
NSMutableString *replacedMsg = [msg mutableCopy];

NSString *pattern = @"\\{(.+?)\\}"; // Pattern for { ... }
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:NULL];

__block int offset = 0;
[regex enumerateMatchesInString:msg options:0 range:NSMakeRange(0, [msg length]) usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
    NSRange range0 = [result range]; // range including { }
    NSRange range1 = [result rangeAtIndex:1]; // range excluding { }
    range0.location += offset;
    range1.location += offset;
    NSString *oldDate = [replacedMsg substringWithRange:range1];
    NSString *newDate = [self getLocalDateFromUTCDateString:oldDate];
    if (newDate != nil ) {
        [replacedMsg replaceCharactersInRange:range0 withString:newDate];
        offset += [newDate length] - range0.length;
    }
}];

NSLog(@"%@", replacedMsg); 
```

输出（我的本地时区是 GMT+01）：

```
Hello developers <br/><br/> On 2013-02-28 06:00:33 Bob wrote <br/><br/>
Hello World <br/><br/> On 2013-02-27 09:35:33 Jack wrote <br/><br/>
Hello Apple <br/><br/> On 2013-02-26 05:10:44 Tom wrote <br/><br/> 
```

# sql - ALTER 语句：为什么使用 VARCHAR2(50 BYTE) 而不是 VARCHAR2(50 CHAR)？

> ID：15136280
> 
> 赞同：8
> 
> 时间：2013-02-28T13:03:45.410
> 
> 标签：sql, oracle, character-encoding, oracle11g

我执行了以下 (Oracle 11g) SQL 语句来*将*现有列的长度从 VARCHAR2(20 CHAR) 增加到 VARCHAR2(50 CHAR)：

```
ALTER TABLE USERX.MY_TABLE MODIFY (LASTNAME VARCHAR2(50)); 
```

它顺利地成功了，但是当我查看新`Data Type`列时，我看到：`VARCHAR2(50 BYTE)`而不是`VARCHAR2(50 CHAR)`.

我的问题是：

1.  为什么是**字节**而不是字符？我做错了什么？
2.  如何将列的长度固定为`VARCHAR2(100 CHAR)`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T13:12:40.237

[回答自己（感谢其他答案](https://stackoverflow.com/a/7477609/146325)提供的提示）：

我应该改为执行：

```
ALTER TABLE USERX.MY_TABLE MODIFY (LASTNAME VARCHAR2(50 CHAR)); 
```

（注意50后的额外`CHAR`）

# java - 如何在 Google Maps Android API v2 中向 MapFragment 添加自定义控件？

> ID：15136299
> 
> 赞同：13
> 
> 时间：2013-02-28T13:04:36.087
> 
> 标签：java, android, google-maps, android-fragments, google-maps-android-api-2

我有 SupportMapFragment，我需要在其中添加自定义控件以更改地图类型。调用 getView()，我得到 NoSaveStateFramelayout，我认为将它直接添加到它或其子代中不是一个好主意。

如何在地图上添加按钮以更改地图类型的最佳方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-02T14:24:20.167

我决定重写 onCreateView 并将地图封装在代码中。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup viewGroup, Bundle bundle) {
    View mapView = super.onCreateView(inflater, viewGroup, bundle);
    RelativeLayout view = new RelativeLayout(getActivity());
    view.addView(mapView, new RelativeLayout.LayoutParams(-1, -1));
    // working with view
    return view;
} 
```

它可以按我的需要工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T23:42:57.190

当地图和相对布局 match_parent 的宽度和高度时，尝试将地图放在具有相对布局的框架布局内。在相对布局中放置所有您想要的扩展控件。这样，将位于地图的顶部。

类似的事情：

```
<FrameLayout 
     android:layout_width="match_parent"
     android:layout_height="match_parent">

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/title_gray_background" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:paddingLeft="10dp"
            android:text="@string/tasks"
            android:paddingRight="3dp"
            android:textStyle="bold"
            android:textSize="18sp"
            android:textColor="@color/my_even_darker_gray" />

        <Button
            android:id="@+id/bLocateMe"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="3dp"
            android:background="@drawable/locate_me_button_selector"
            android:clickable="true"
            android:onClick="locateMeButtonOnClick"
            android:text="@string/locate_me"
            android:textColor="@color/my_white" />

    </RelativeLayout>

    <fragment
        xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T03:09:05.193

MapFragment 的 onCreateView 返回的视图是一个 FrameLayout。所以让我们使用它，不需要添加另一个布局（我们将减少视图层次结构）。

```
 @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup viewGroup, Bundle bundle) {
        FrameLayout mapView = (FrameLayout) super.onCreateView(inflater, viewGroup, bundle);
        mapView.add(someView);
        return view;
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-16T14:36:45.877

使用此代码在地图上方添加您的布局

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View mapView = super.onCreateView(inflater, container, savedInstanceState);
    @SuppressLint("InflateParams")
    FrameLayout view = (FrameLayout) inflater.inflate(R.layout.fragment_map, null);
    view.addView(mapView, 0, new RelativeLayout.LayoutParams(-1, -1));
    return view;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T11:44:59.717

我做了以下事情：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <!--suppress AndroidDomInspection -->

    <fragment
      android:id="@+id/map"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:name="com.google.android.gms.maps.SupportMapFragment"
      android:layout_alignParentBottom="true"
      android:layout_alignParentTop="true"
      android:layout_alignParentLeft="true"
      android:layout_alignParentRight="true"

    />
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        >
    <ImageButton
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="10sp"
            android:layout_marginTop="10sp"
            android:src="@android:drawable/ic_menu_mylocation"
            />
</RelativeLayout> 
```

# sql - 将不同的聚合函数与 CASE 相结合

> ID：15136300
> 
> 赞同：0
> 
> 时间：2013-02-28T13:04:38.443
> 
> 标签：sql, interbase

我想在查询中组合不同时期的不同总和

我使用以下查询来获得总和。

```
SELECT table1.BRS,
Sum(CASE WHEN table2.DATUM BETWEEN :van1 AND :tot1 THEN (DBBASIS-CRBASIS) ELSE (0) END)    
FROM table1 INNER JOIN table2 ON (table1.id= table2.id)    
WHERE table2.DATUM BETWEEN :van1 AND :tot1 
group by BRS 
```

这可以正常工作。

如果我升级到第二个总和

```
SELECT table1.BRS,
Sum(CASE WHEN table2.DATUM BETWEEN :van1 AND :tot1 THEN (DBBASIS-CRBASIS) ELSE (0) END),
Sum(CASE WHEN table2.DATUM BETWEEN :van2 AND :tot2 THEN (DBBASIS-CRBASIS) ELSE (0) END)    
FROM table1 INNER JOIN table2 ON (table1.id= table2.id)    
WHERE table2.DATUM BETWEEN :van1 AND :tot1 or  table2.DATUM BETWEEN :van2 AND :tot2 
group by BRS 
```

即使数据不同，我也会得到 2 个重复列的误报。该查询对第二个总和使用相同的日期。当我将第二个 Sum 更改为 Max 函数时，它使用第二个日期

如何结合这两个函数的结果。

PS：Interbase 不能使用

```
Select * from (Select Sum from...) Join (Select Sum from...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:20:18.280

如果我正确理解了您的数据模型，那么：

```
SELECT  table1.BRS,
        Sum(t2a.DBBASIS-CRBASIS),
        Sum(t2b.DBBASIS-CRBASIS)
FROM    table1 LEFT JOIN table2 t2a ON (table1.id= t2a.id and t2a.DATUM BETWEEN :van1 AND :tot1)
        LEFT JOIN table2 t2b ON (table1.id = t2b.id and t2b.DATUM BETWEEN :van2 AND :tot2)
group by BRS 
```

编辑：

```
SELECT  t1a.BRS,
        Sum(t1a.DBBASIS-CRBASIS),
        Sum(t1b.DBBASIS-CRBASIS)
FROM    table2 left join table1 t1a ON (table2.id= t1a.id and table2.DATUM BETWEEN :van1 AND :tot1)
        LEFT JOIN table1 t1b ON (table2.id = t1b.id and table2.DATUM BETWEEN :van2 AND :tot2)
group by t1a.BRS 
```

# python - SQLAlchemy 中 Django 的 auto_now、auto_now_add 等价于什么？

> ID：15136301
> 
> 赞同：14
> 
> 时间：2013-02-28T13:04:41.480
> 
> 标签：python, django, date, sqlalchemy

在 Django 中，我们可以在制作日期列时使用这两个参数：

> DateField.auto_now 每次保存对象时自动将字段设置为现在。对于“最后修改”的时间戳很有用。请注意，始终使用当前日期；它不仅仅是您可以覆盖的默认值。
> 
> DateField.auto_now_add 首次创建对象时自动将字段设置为现在。用于创建时间戳。请注意，始终使用当前日期；它不仅仅是您可以覆盖的默认值。

如何在 SQLAlchemy 中做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-28T13:17:20.520

最后，在检查了 SQLAlchemy 文档之后，应该是这样的：

```
Column('created_on', DateTime, default=datetime.datetime.now)

Column('last_updated', DateTime, onupdate=datetime.datetime.now) 
```

文档在这里：

[http://docs.sqlalchemy.org/en/latest/core/defaults.html#python-executed-functions](https://docs.sqlalchemy.org/en/latest/core/defaults.html#python-executed-functions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-22T08:21:26.700

仍然可以使用以下内容：

```
enter_date = Column(DateTime, default=datetime.datetime.utcnow, onupdate=datetime.datetime.utcnow) 
```

在更新时，sqlalchemy 也会在数据更新时设置当前日期。

# eclipse - 是否有任何参数选项可以传递给 eclipse 可执行文件？

> ID：15136304
> 
> 赞同：0
> 
> 时间：2013-02-28T13:04:52.087
> 
> 标签：eclipse, shared-libraries

我通过提供许多参数选项（例如 -vm、-nosplash、-showLocation 等）在我的系统上执行 eclipse。

是否有任何选项可以在启动 Eclipse 之前加载共享库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:09:52.600

我不确定您要实现什么，您可能想研究将您的`"shared-library"`作为 Eclipse 插件编写，可以指定在启动时加载。

来自 eclipse.ini 文件的示例：

```
-startup
../../../plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
../../../plugins/your_plugin_here 
```

# c - recv 什么时候阻塞？

> ID：15136308
> 
> 赞同：2
> 
> 时间：2013-02-28T13:05:01.763
> 
> 标签：c, linux, epoll

目标是在不阻塞的情况下从套接字读取数据。Linux手册页说：

> 接收调用通常会返回任何可用的数据，直到请求的数量，而不是等待接收请求的全部数量。

这是否意味着在使用/ /轮询套接字描述符后我不必将`MSG_DONTWAIT`标志传递给？`recv()``select()``poll()``epoll()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:06:58.177

`recv`/的行为`read`取决于套接字本身的特性。如果套接字被标记为非阻塞，这些调用应该立即返回`EAGAIN`/`EWOULDBLOCK`而不是阻塞进程。

套接字可以在读取之前标记为非阻塞，通常通过`fcntl`或`ioctl`。

该手册的摘录内容是，基本上，不需要对阻塞和非阻塞套接字进行读取来填充所提供的整个缓冲区。这就是为什么检查`recv`/`read`调用的结果很重要，以便了解缓冲区中有多少包含实际数据以及有多少是垃圾。

`select`将阻塞套接字与 IO 轮询调用（例如/ `poll`/ ）结合使用根本不是一个好主意`epoll`。即使轮询调用指示特定套接字已准备好读取，阻塞套接字有时仍会阻塞。

# php - 如何从 Facebook 通知重定向不是：https://apps.facebook.com/appname/ 而是：www.example.com？

> ID：15136310
> 
> 赞同：0
> 
> 时间：2013-02-28T13:05:12.230
> 
> 标签：php, facebook, facebook-php-sdk, facebook-apps

如何从 Facebook 通知重定向到：[https ://apps.facebook.com/appname/](https://apps.facebook.com/appname/)

但是到：www.example.com？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:07:51.933

提供`redirect_uri=www.example.com`您的代码并在您的 facebook 应用程序设置页面（站点 url）中提供相同的 url

# python - python中的bash命令

> ID：15136311
> 
> 赞同：4
> 
> 时间：2013-02-28T13:05:15.360
> 
> 标签：python, bash

我正在寻找在 python 中使用 bash 命令的最佳方式。有哪些方法？我知道 os.system 和 subprocess.Popen。

我试过这些：

```
bootfile = os.system("ls -l /jffs2/a.bin | cut -d '/' -f 4")
print bootfile 
```

这会按预期返回 a.bin ，但之后它会返回 0 并因此打印：

```
a.bin
0 
```

现在将 bootfile 设置为 0。下次我打印 bootfile 时，它​​只显示为 0。我猜这是退出值，我如何阻止这个值干扰？

我也试过：

```
bootfile = subprocess.Popen("ls -l /jffs2/a.bin | cut -d '/' -f 4")
print bootfile 
```

但它似乎破坏了脚本，因为我什么也没得到，我做对了吗？

还有哪些更好，为什么？还有其他方法吗？首选方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:16:28.507

使用`os.readlink`（由@kojiro 提议）并`os.path.basename`仅获取名称文件：

```
os.path.basename(os.readlink('/jffs2/a.bin')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:25:14.083

kojiro 的评论[`os.readlink`](http://docs.python.org/2/library/os.html#os.readlink)可能就是你想要的。我正在解释您试图实施的内容。

[`os.system`](http://docs.python.org/2/library/os.html#os.system)将返回命令运行的退出状态。

[`subprocess.Popen`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)将创建一个管道，以便您可以捕获命令运行的输出。
下面的行将捕获命令运行的输出：

```
bootfile = subprocess.Popen(["bash","-c","ls -l /jffs2/a.bin | cut -d '/' -f 4"], stdout=subprocess.PIPE).communicate()[0] 
```

更多细节在[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:11:37.153

正如@kojiro 所说，正确的答案是：

```
os.readlink('/jffs2/a.bin') 
```

但是如果你真的想用复杂的方式来做这件事，那么在 Python 2.7 中：

```
cmd = "ls -l /jffs2/a.bin | cut -d '/' -f 4"
bootfile = subprocess.check_output(cmd, shell=True) 
```

或者在较旧的 Python 上：

```
cmd = "ls -l /jffs2/a.bin | cut -d '/' -f 4"
p = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE)
bootfile = p.communicate()[0]
if p.returncode != 0:
    raise Exception('It failed') 
```

# javascript - 使用 jQuery 按类选择元素

> ID：15136312
> 
> 赞同：0
> 
> 时间：2013-02-28T13:05:15.880
> 
> 标签：javascript, jquery, spring, templates

我在模板中有一个像这样声明的按钮

```
 <a class="comment-btn delete-comment">Delete</a> 
```

我想为所有具有类的按钮添加一个事件侦听器`delete-comment`。我怎样才能在 jQuery 中做到这一点？

我尝试了这样的事情：

```
events:{
"click #delete-comment": "deleteComment"
{ 
```

但 id 似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:06:21.627

```
$('.delete-comment').on('eventName', function(){}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T13:07:12.100

非常直接：

```
$('.delete-comment').on('eventName', function(){
//your code
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T13:07:28.813

您可以使用...

```
 $(".delete-comment").click(function(){
      // Do some thing ...

    }) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T13:09:41.467

```
$('.delete-comment').click(function(){//your code}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T13:07:04.690

```
 $('.delete-comment').click(function(){
       //YOUR CODE HERE  
    }); 
```

# sql - SQL Server 2008R2 Where 子句合并两个查询

> ID：15136314
> 
> 赞同：1
> 
> 时间：2013-02-28T13:05:21.777
> 
> 标签：sql, sql-server-2008-r2

我有一个查询，可以返回用户有权访问的商店列表。但是，如果用户是内部员工，他们会自动访问所有商店。

在员工表中，这由名为 Internal 的列表示，用 1 表示是内部员工，用 0 表示不是内部员工。

当前有一个存储过程，它获取传入 userId 的用户的商店列表。存储过程类似于下面。所以我想弄清楚如何将查询合并为一个。

```
 DECLARE @IsInternal bit

    SELECT @IsInternal = Staff.Internal FROM Staff WHERE Staff.StaffId = @userId

 IF(@IsInternal = 0)
   BEGIN
      SELECT DISTINCT Store.Id, Store.Name,
      FROM 
        Store JOIN StaffAccess ON StaffAccess.StoreID = Store.StoreId
              JOIN Staff ON StaffAccess.StaffId= Staff.StaffId
      WHERE
        StaffAccess.StaffID = @userId
      ORDER BY
          Store.Name
   END
ELSE
   BEGIN
        SELECT DISTINCT Store.Id,Store.Name,
        FROM Store
        ORDER BY Store.Name
  END 
```

抱歉，我应该包括一个员工访问表。如果我在下面运行，它会为非内部员工的用户带回所有商店

```
SELECT DISTINCT
        Store.Id,
        Store.Name,

    FROM
        Store
            JOIN StaffAccess ON StaffAccess.StoreID = Store.StoreId
            JOIN Staff on Staff.Internal= 1 OR (StaffAccess.StaffID = @userId        AND StaffAccess.StaffId = Staff.StaffId)   

    ORDER BY
        Store.Name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:09:57.567

你可以有这个简单的查询来解决你的要求

```
SELECT DISTINCT
     Store.storeid,
     Store.Name 
FROM
    Store JOIN Staff ON Staff.StaffID = @UserId 
    AND (Staff.Internal = 1 OR 
         Staff.StoreID = Store.StoreId)
ORDER BY
    Store.Name; 
```

[在这里](http://www.sqlfiddle.com/#!3/aafa5/16/0)提琴

# asp.net - ASP.NET 表单部分提交

> ID：15136315
> 
> 赞同：1
> 
> 时间：2013-02-28T13:05:26.837
> 
> 标签：asp.net, ajax, updatepanel

我有这个代码形式：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

    <asp:TextBox ID="Text1" runat="server"></asp:TextBox>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:TextBox ID="Text2" runat="server"></asp:TextBox>
            <asp:Button ID="Submit" runat="server" OnClick="Submit_Click"
                Text="Click Me"/>
        </ContentTemplate>

    </asp:UpdatePanel> 
```

当我单击提交按钮时，所有表单都会回发到服务器（Text1 和 Text2）上。我只想在 UpdatePanel (Text2) 中回发文本框。可能吗？

感谢您的回复。

**编辑（解决方案）：** 我想，我有使用 Javascript 的解决方案：

```
 function onSubmit() {
        var text1 = this.document.getElementById('<%=Text1.ClientID%>');
        text1.disabled = true;
        return true;
    }

    ....

    <asp:Button ID="Submit" OnClientClick="onSubmit();" ..../> 
```

这会导致 Text1 在 PostBack 之前被禁用。似乎 ASP.NET 不会从禁用的文本框中回发值。然而，这仅在没有 UpdatePanel 的情况下有效。当然，回发后 Text1 为空。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T13:16:24.400

好吧，UpdatePanel 控制回发的内容。你无法改变这种行为。它应该只发布 UpdatePanel 的表单数据（我相信），以及整个 ViewState。它必须发布整个 ViewState 才能使页面生命周期正常工作。

# r - 如何在 R 中复制 SPSS 重新编码功能？

> ID：15136316
> 
> 赞同：3
> 
> 时间：2013-02-28T13:05:35.147
> 
> 标签：r, spss

目的是在 R 中模拟 SPSS 重新编码过程。复制命令很难翻译。

在 SPSS 我的代码为

```
RECODE A (1,2 = 1) (3,4 = copy) (8 thru hi = 3) (else = 1) into B. 
```

应用于看起来像的 A

```
A <- c(1,2,3,4,5,NA,7,8,9) 
```

我得到以下（SPSS）结果：

```
A = 1,1,3,4,1,1,1,3,3 
```

在 R 中，类似的代码如下所示：

```
B <- Recode(A, recodes = ("c(1,2) = 1; c(3,4) = c(3,4); c(8,9) = 3; else = 1"), as.numeric.result = TRUE)

A = 1,1,3,4,1,1,1,3,3 
```

一般问题是在 SPSS-copy 语句中指出值。在这里，我写了 c(3,4) = c(3,4) - 当然，它不起作用。

在 SPSS 中也存在说 else = copy what 返回与 R 相同的输出的可能性。

有没有人有一个与 SPSS 工作方式相同的 R 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:13:12.030

您可以组合`ifelse`并`car::recode`达到您想要的结果。

```
library(car)
A <- c(1,2,3,4,5,NA,7,8,9)
B <- ifelse(A %in% c(3,4), A, recode(A, "c(1,2) = 1; 8:hi = 3; else = 1"))
cbind(A, B) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:23:09.267

使用该`levels`功能。这是内置数据集的示例：

```
InsectSprays
levels(InsectSprays$spray)<-list(new1=c("A","C"),YEPS=c("B","D","E"),LASTLY="F") 
InsectSprays 
```

使用它来重置数据集：

```
InsectSprays <- datasets::InsectSprays 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:52:32.930

您可能想查看`car`包裹。不幸的是，没有可用的“复制”功能。

```
library(car)
?recode
A <- c(1,2,3,4,5,NA,7,8,9)
B <- recode(A, "c(1,2) = 1; 3 = 3; 4 = 4; 8:hi = 3; else = 1")
B

## SPSS result: A = 1,1,3,4,1,1,1,3,3
## > B
## [1] 1 1 3 4 1 1 1 3 3
## > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-12T23:26:41.860

```
library(expss)
a = c(1,2,3,4,5,NA,7,8,9)
# '%into%' supports multi-value assignment, eg: ... %into% (a1 %to% a3)
recode(a, 1:2 ~ 1, 3:4 ~ copy, 8 %thru% hi ~ 3, other ~ 1) %into% b
b
# 1 1 3 4 1 1 1 3 3 
```

或者，使用标准 R 分配：

```
b = recode(a, 1:2 ~ 1, 3:4 ~ copy, 8 %thru% hi ~ 3, other ~ 1)
b
# 1 1 3 4 1 1 1 3 3 
```

# php - 将带有包含的 php 文件包含到 smarty 模板中

> ID：15136322
> 
> 赞同：1
> 
> 时间：2013-02-28T13:05:55.477
> 
> 标签：php, smarty

我想将我的标题包含到使用**smarty 模板**的脚本中。通过搜索这个网站，我部分在那里，但不完全是：

```
{include file='/home/username/public_html/header.php'} 
```

这成功地将图像包含在标题中，但两个都不包含标题包含。其中一个是 php 文件，另一个是 html（我的引导导航栏）。从我的搜索中，我似乎需要制作一个插件，根据一篇文章，这很“容易”，但我找不到如何完成此任务的示例？

* * *

基于codefreaks的说明，这就是我所做的。我确定说明是正确的，我只是没有正确解释它们，因为这没有显示任何内容。

这是三个文件，它们的路径与 public_html 目录相关，以及我添加到其中的内容。一切都如我所说：这里没有任何文字是占位符。

**文件 1** `sitewide/myheader.php`

```
<?
ob_start(); 
--- I didn't change the original content here --
$output = ob_get_contents();
ob_end_clean();  ?> 
```

**文件 2** `newscript/includes/page_header.php`

```
$smarty = new Smarty();
require "/home/username/public_html/sitewide/myheader.php";
$smarty->assign('myheader', $output);
$smarty->display('../themes/default/template/header.tpl'); 
```

**文件 3** `newscript/themes/default/template/header.tpl`

```
{$myheader} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:10:47.127

我不认为你可以在 smarty 中包含你的 php 文件。

由于 samrty 是一个模板引擎，

PHP 页面首先执行，然后将数据发送到您的 smarty 页面。

解决方案：将所有需要的数据从 php 页面传递给 smarty，并包含 html 页面，并带有 smarty 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T22:27:05.680

我正在尝试做一件非常相似的事情，除了我想要的只是一些全局 PHP 常量，这些常量是我使用 define 在独立的**constants.php**文件中**定义**的。

我希望在我的 smarty 模板中使用相同的常量，所以我一直在尝试在 smarty 模板中包含**constants.php**，但这是更好的方法：

在**常量.php**

```
 $_CONSTANT['TBL']                      = TRUE;  
  $_CONSTANT['FLD']                      = FALSE;
  $_CONSTANT['DB_READ_SUCCESS']          =     1;
  $_CONSTANT['DB_WRITE_SUCCESS']         =     1;
  $_CONSTANT['DB_WRITE_ERROR_UNKNOWN']   =  -100;    

  //*** Copy the $_CONSTANT array to PHP define() to make global PHP constants
  foreach($_CONSTANT as $key => $value) {
    define($key, $value);
  } 
```

然后在我的智能设置功能中，我这样做：

```
foreach ($_CONSTANT as $key => $value) {
  Smarty->assign($key, $value);
} 
```

实际上，我认为变量（或常量）值是您在 Smarty 模板中真正想要的，以使您的视图层与模型层和控制器层分开。

**帖子脚本：**

事实上，您可以使用这种技术通过 Smarty 将 PHP 常量传递给 JavaScript，从而允许您在一个地方为三种不同的环境声明常量：PHP、Smarty 和 JavaScript。

就是这样：

**从您的 smarty 设置函数中调用以下命令：**

```
 public function AssignJSConstants($values) {
    $js = '';
    foreach ($values as $key => $value) {
      if ($key != 'CR') {
        if (is_string($value)) {
          $js = $js.$key.' = "'.$value.'";';
        } else {
          $js = $js.$key.' = '.$value.';';
        }
        $js = $js.CR.'      ';
      }
    }
    $this->Smarty->assign('JavaScriptConstants', $js);
  } 
```

**然后在你的 smarty 模板中声明以下内容：**

```
<script>
  //php constants that exported to JavaScript
  {$JavaScriptConstants}
</script> 
```

**这将在您的 HTML 中为您提供：**

```
<script>
  //php constants that exported to JavaScript
  TBL = 1;
  FLD = 0;
  DB_READ_SUCCESS = 1;
  DB_READ_ERROR_UNKNOWN = -10;
  DB_WRITE_SUCCESS = 1;
  DB_WRITE_ERROR_UNKNOWN = -100;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:54:24.263

在得到您的反馈并测试自己之后，我发现您可能没有正确设置 smarty。按照[http://www.smarty.net/quick_install](http://www.smarty.net/quick_install)上的说明正确安装。正确设置后我的最终目录结构如下所示：

![在此处输入图像描述](../Images/6ff00cec2a9a69f0a8691dd756e93e22.png)

正确设置后，这是我在文件中使用的代码：

索引.php

```
<?php
echo "hello";
require_once "libs/Smarty.class.php";
$smarty = new Smarty();
$smarty->setTemplateDir('smarty/templates');
$smarty->setCompileDir('smarty/templates_c');
$smarty->setCacheDir('smarty/cache');
$smarty->setConfigDir('smarty/configs');
require "header.php";

$smarty->assign('header', $output);
$smarty->testInstall();
$smarty->display('smarty.tpl');
echo "hello";
?> 
```

header.php：

```
<?php
ob_start();
?>
hello honey bunny
<?php
$output = ob_get_contents();
ob_end_clean();
?> 
```

将 smarty.tpl 放在模板文件夹中！

```
{$header}hellos 
```

# windows - 如何在作为 Windows 服务运行的 tomcat7 上启用 JMX？

> ID：15136327
> 
> 赞同：17
> 
> 时间：2013-02-28T13:06:16.917
> 
> 标签：windows, tomcat

在将其发布到此处之前，我已经广泛搜索了此内容。我一直在尝试找到一种在作为 Windows 服务安装的 Tomcat 实例上启用 JMX 访问的方法。通过 startup.bat 脚本调用 Tomcat 非常简单，只需将 CATALINA_OPTS 环境变量设置为“-Dcom.sun.management.jmxremote.port=1234 -Dcom.sun.management.jmxremote.authenticate=假-Dcom.sun.management.jmxremote.ssl=假"

但是如何让 Tomcat *Windows 服务*读取这些选项？我试过这个：

C:>tomcat\server\bin> **service.bat install #安装** *Tomcat7 windows服务*

C:>tomcat\server\bin> **tomcat7.exe //US//Tomcat7 ++JvmOptions "-Djava.io.tmpdir=$INSTDIR\server\temp;-XX:MaxPermSize =256m;-Dcom.sun.management. jmxremote.port=8090;-Dcom.sun.management.jmxremote.authenticate=false;-Dcom.sun.management.jmxremote.ssl=false" --JvmMs 256 --JvmMx 1 024** *#使用/更新安装的服务/US 开关；设置 tmpdir、JMX 访问和堆大小*

当我从“服务”面板启动服务时，服务无法启动，并且在 logs\tomcat7-stderr-yyyy-mm-dd.log 文件中出现以下错误：

yyyy-mm-dd hh:mm:ss Commons Daemon procrun stderr initialized Error: Invalid com.sun.management.jmxremote.port number: 8090 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote .ssl=假

我没有 Java 背景，我想在这里实现一些古怪的东西吗？请指教。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-05T06:30:31.047

回答我自己的问题；结果比我想象的要容易。

需要完成以下操作，以便为安装为 Windows 服务的 Tomcat 启用 JMX 访问，该服务的名称为“ApacheTomcatWindowsServer”，例如：

*   使用命令将 Tomcat 安装为 Windows 服务（首先 cd 进入 \bin\ ）

> `service.bat install`

或您的自定义脚本。

*   使用以下命令为已安装的服务启用 Apache 服务管理器：

> `tomcat7w.exe //MS//ApacheTomcatWindowsServer`

这应该会在您的系统托盘上启动 Apache Service Monitor 程序。单击其图标。选择“配置”，单击“Java”选项卡并在“Java 选项”文本框中附加以下内容，每行一个选项：

> `-Dcom.sun.management.jmxremote.port=8090`
> 
> `-Dcom.sun.management.jmxremote.authenticate=false`
> 
> `-Dcom.sun.management.jmxremote.ssl=false`

保存并退出并重新启动服务。

*   要连接到 JMX 控制台，`jconsole`请从您的 JDK 安装中触发，单击“新建连接”，指定“远程进程”并输入`hostname:8090`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-14T01:14:49.643

您也可以通过以下方式卸载该服务

```
service.bat remove 
```

然后编辑 service.bat 并在**StartPath**中添加参数并添加选项

> -Djavax.management.builder.initial=;-Dcom.sun.management.jmxremote.port=8090;-Dcom.sun.management.jmxremote.authenticate=false;-Dcom.sun.management.jmxremote.ssl=false

这是我文件中的示例 StartPath

> --StartPath "C:\tomcat7\" --Startup auto --JvmOptions "-Dcatalina.home=%CATALINA_HOME%;-Dcatalina.base=%CATALINA_BASE%;-Djava.endorsed.dirs=%CATALINA_HOME%\endorsed;- Djava.io.tmpdir=%CATALINA_BASE%\temp;-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager;-Djava.util.logging.config.file=%CATALINA_BASE%\conf\logging.properties; -Djava.rmi.server.hostname=;-Djavax.management.builder.initial=;-Dcom.sun.management.jmxremote.port=8090;-Dcom.sun.management.jmxremote.authenticate=false;-Dcom.sun .management.jmxremote.ssl=false" %JAVA_OPTS% ^

重新安装服务

```
service.bat install 
```

然后启动 Tomcat 以应用更改

# javascript - javascript 在什么时候为变量分配内存槽（在 OO 上下文中）？

> ID：15136330
> 
> 赞同：3
> 
> 时间：2013-02-28T13:06:24.847
> 
> 标签：javascript, object, memory, optimization, variable-assignment

我正在为我的问题寻找一个非常具体的答案。问题是根据标题，这是一个示例案例：

```
function MyObject(){
    this.value = null; //do we allocate a piece of memory of some sort
}
var meh = new MyObject(); 
```

我想我在某处听说 JS 直到分配时间才分配内存，因为它是弱类型的（并且不知道要分配多少内存），是这样吗？显然它会为新创建的 Object 本身分配内存占位符（指针），但是在这种情况下它是否为*value*变量分配内存？

这样做的原因是我实际上想到的对象有多个变量/数组/哈希表（我最终会分配/填充），所以我希望通过在顶部声明所有（持久）对象变量来获得一些性能优势（帮助 JS 引擎分配内存，很像编译时的 c/c++ 代码优化），因为我在一个非常受限的 JS 运行时工作。

就像我说的那样，作为一名经验丰富的 Javascript/c++ 开发人员，我正在寻找一个非常具体的答案（我已经用谷歌搜索过它）。我熟悉“让 javascript 引擎担心所有这些”的理念，这不是我想要的。

# php - PHP调用类方法到另一个类

> ID：15136332
> 
> 赞同：0
> 
> 时间：2013-02-28T13:06:30.987
> 
> 标签：php

我有 3 节课（Mysqliconn、Users 和 News）。

mysqliconn.class

```
Class Mysqliconn {
..connect to db
} 
```

新闻类

```
class News {
private $db;

   public function __construct( Mysqliconn $db ) {

   $this->db = $db; 
   }

   public test() {
     do something... 
   }
 } 
```

用户类

```
class Users {
private $db;

   public function __construct( Mysqliconn $db ) {

   $this->db = $db; 
   }

   public test2() {

     do something...
   }
} 
```

在我的 php 页面中

```
 $db = new Mysqliconn();
 $nw = new News( $db );
 $us = new Users( $db )

 $us->test2();
 $nw->test(); 
```

我的错误

```
Catchable fatal error: Argument 1 
passed to Users::__construct() must be an instance of Mysqliconn, 
none given, called in ....\class\class.news.php 
```

现在在我的用户类中，我想调用一个新闻类方法，但是如果我尝试在用户类中实例化新闻类，我会得到一个错误。

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:13:38.823

请发布您遇到的错误。否则很难捕捉到问题。但是如果你不想在用户类中实例化新闻类，你可以像访问它一样

```
class News
{
    // news class
}

class Users
{
    public function some_method(News $news){
        // work with the $news object
    }
}

$us = new Users();
$us->some_method(new News(/*$db*/)); 
```

这只是一个基本代码，让您了解如何使用它。在生产环境中，您必须采取很多预防措施。

# c# - 如何构建过滤器以在 .NET 应用程序中搜索 Active Directory 中的房间？

> ID：15136334
> 
> 赞同：0
> 
> 时间：2013-02-28T13:06:43.340
> 
> 标签：c#, active-directory, ldap, directorysearcher

我想从活动目录中获取我们公司的所有房间，为此我正在使用`DirectoryEntry`和`DirectorySearcher`类。我需要一个过滤器来获取正确的数据，但我不知道如何构建过滤器来搜索房间。

这是我需要过滤的属性：

![msExchResourceMetaData = 资源类型：房间](../Images/e0ba6a76a0ce42d1d4cb51d0326f99e5.png)

这是我的代码：

```
public static DataTable GetRooms(string domaincontroller) 
{
    DataTable list = new DataTable();

    string filter = "(&(objectClass=user)(objectCategory=user)(|(telephoneNumber=*)(mail=*)))";

    //....

    return list; 
} 
```

我只需要过滤器。其余的我知道:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:12:25.897

您在那里的过滤器将为您提供每个用户的电话号码或电子邮件地址。

如果您正在寻找带有电话号码或电子邮件地址的房间，只需添加`(msExchResourceMetaData=ResourceType:Room)`：

```
string filter = "(&(objectClass=user)(objectCategory=user)(msExchResourceMetaData=ResourceType:Room)(|(telephoneNumber=*)(mail=*)))"; 
```

如果你想要所有房间，不管他们是否有电话号码或电子邮件地址（我猜你有），然后删除不必要的条件：

```
string filter = "(&(objectClass=user)(objectCategory=user)(msExchResourceMetaData=ResourceType:Room))"; 
```

注意：确保在使用 Active Directory 时将所有内容都包装在`using`块中，否则会导致内存泄漏。

# sql-server - 在 T-SQL 中查询之前将字符串转换为 XML 数据类型

> ID：15136345
> 
> 赞同：2
> 
> 时间：2013-02-28T13:07:14.383
> 
> 标签：sql-server, xml, tsql

如何将字符串转换为 XML 数据类型，以便可以将数据作为 XML 查询：

例如（感谢为此提供原始 SQL 的“mellamokb the Wise”）

如果 xmlstring 是 XML 类型，则下面的代码可以正常工作（请参阅[**DEMO**](http://www.sqlfiddle.com/#!3/2e452/6)）

```
select id, name
from Data
cross apply (
  select Destination.value('data(@Name)', 'varchar(50)') as name
  from [xmlstring].nodes('/Holidays/Summer/Regions/Destinations/Destination') D(Destination)
) Destinations(Name) 
```

但是，如果 xmlString 是 varchar 类型，即使我将字符串转换为 XML ( [**DEMO**](http://www.sqlfiddle.com/#!3/c51e60/5) )，也会出现错误：

```
select id, name
from Data
  cross apply (
  select Destination.value('data(@Name)', 'varchar(50)') as name
  from CONVERT(xml,[xmlstring]).nodes('/Holidays/Summer/Regions/Destinations/Destination') D(Destination)
) Destinations(Name) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:20:59.647

您可以在一个额外的交叉应用中进行投射。

```
select id,
       T.N.value('@Name', 'varchar(50)') as name
from Data
cross apply (select cast(xmlstring as xml)) as X(X)
cross apply X.X.nodes('/Holidays/Summer/Regions/Destinations/Destination') T(N) 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/c51e60/6)

转换为 XML 可能存在性能问题。看看[这个答案](https://dba.stackexchange.com/a/34716/2103)和[这个答案](https://dba.stackexchange.com/questions/30862/optimising-plans-with-xml-readers/30947#30947)

# android - Android DownloadManager - 有没有办法在用户从 UI 中删除下载时收到通知？

> ID：15136348
> 
> 赞同：0
> 
> 时间：2013-02-28T13:07:15.067
> 
> 标签：android, download-manager

当用户在系统的 DownloadManager UI 中取消下载时，我找不到通知方式：

![用户选择并单击](../Images/fd4cf7a9bbb0764a53be36e4376ab4fe.png)

我知道可以`BroadcastReceiver`通过专用的意图操作为下载设置“完成”或“点击”：

*   `DownloadManager.ACTION_DOWNLOAD_COMPLETE`

和

*   `DownloadManager.ACTION_NOTIFICATION_CLICKED`

我需要知道何时取消正在运行的下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:24:14.160

如上所述，我的解决方案（感谢 SO 的各个页面）：

```
// DownloadManager job from the main activity

videoUri = Uri.parse(path.toURI() + composedFilename);

dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
Request request = new Request(Uri.parse(link));
request.setDestinationUri(videoUri);
request.allowScanningByMediaScanner();
request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE);
request.setTitle(vfilename);
enqueue = dm.enqueue(request);
Log.d(DEBUG_TAG, "_ID " + enqueue + " enqueued");

fileObserver = new Utils.delFileObserver(path.getAbsolutePath());
fileObserver.startWatching();

// delFileObserver class inside another Utility class

public static class delFileObserver extends FileObserver {
    static final String TAG="FileObserver: ";

    String rootPath;
    static final int mask = (FileObserver.CREATE | FileObserver.DELETE | FileObserver.DELETE_SELF); 

    public delFileObserver(String root){
        super(root, mask);

        if (! root.endsWith(File.separator)){
            root += File.separator;
        }
        rootPath = root;
    }

    public void onEvent(int event, String path) {

        if (event == FileObserver.DELETE || event == FileObserver.DELETE_SELF){
            Log.d(DEBUG_TAG, TAG + "file " + path + " DELETED");

            long id = settings.getLong(path, 0);
            Log.d(DEBUG_TAG, TAG + "id: " +  id);

            // actual job after a file deletion is detected
        }
    }

    public void close(){
        super.finalize();
    }
} 
```

# plone - 特定宽度/高度的图像字段验证器

> ID：15136352
> 
> 赞同：2
> 
> 时间：2013-02-28T13:07:26.070
> 
> 标签：plone, dexterity

我有一个灵巧类型，图像字段定义如下所示：

```
image = NamedBlobImage(
    title=_(u'Lead Image'),
    description=_(u"Upload a Image of Size 230x230."),
    required=True,
) 
```

如何添加验证器来检查上传的图像文件？例如，如果图像宽度超过 500 像素，则警告用户上传另一个文件。提示或示例代码表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T17:20:21.987

你想设置一个约束函数：

```
from zope.interface import Invalid
from foo.bar import MessageFactory as _

def imageSizeConstraint(value):
    # value implements the plone.namedfile.interfaces.INamedBlobImageField interface
    width, height = value.getImageSize()
    if width > 500 or height > 500:
        raise Invalid(_(u"Your image is too large")) 
```

然后将该功能设置`constraint`为您的`NamedBlobImage`字段：

```
image = NamedBlobImage(
    title=_(u'Lead Image'),
    description=_(u"Upload a Image of Size 230x230."),
    constraint=imageSizeConstraint,
    required=True,
) 
```

有关更多信息以及[接口定义](https://github.com/plone/plone.namedfile/blob/master/plone/namedfile/interfaces.py)，请参阅[有关验证的敏捷性手册](http://plone.org/products/dexterity/documentation/manual/schema-driven-forms/customising-form-behaviour/validation)。[`plone.namedfile`](https://github.com/plone/plone.namedfile/blob/master/plone/namedfile/interfaces.py)

# ruby-on-rails - 如何使用 RSpec 在 Rails 4 中测试质量分配

> ID：15136354
> 
> 赞同：1
> 
> 时间：2013-02-28T13:07:27.963
> 
> 标签：ruby-on-rails, rspec, rspec-rails, ruby-on-rails-4

给定一个简单的用户模型，在 Rails 4 中，名称、电子邮件和管理员布尔值，使用 RSpec 测试批量分配的最佳方法是什么？

这是用户控制器：

```
def create
  @user = User.new user_params
  ...snip
end

private

  def user_params
    params.require(:user).permit(:name, :email)
  end 
```

以及两种不同的测试方法：

在 user_spec.rb

```
describe "accessible attributes" do
  describe "should not allow access to admin" do
    before do 
      @user.admin = "1"
      @user.save
    end
    it { should_not be_admin }
  end
end 
```

或在 users_controller_spec.rb

```
it 'should only allow name and email to be set' do
  @controller.user_params.keys.should eq(['name', 'email')
end 
```

两者都不起作用 - 前者只是创建了一个 admin 设置为 true 的用户（未通过测试） - 大概这绕过了 strong_parameters。后者有效，但前提是 user_params 方法不是私有的。（官方文档建议将其设置为私有。注意 - 在 user_spec 中查看 MassAssignment 错误也不起作用（不会引发错误）。

注意 - 实际上在视图中将用户设置为 admin 可以正常工作 - admin 属性被过滤掉并且一切正常，但真的希望在测试中看到它正常工作。

另一种建议是将 shoulda-matchers gem 与 user_spec.rb 一起使用：

```
describe User do
  ...
  it { should_not allow_mass_assignment_of(:admin) }
  ...
end 
```

（这也不起作用），给出：

```
Failure/Error: it { should_not allow_mass_assignment_of(:admin) }
 NoMethodError:
   undefined method `active_authorizer' for #<Class:0x007f93c9840648> 
```

（我认为这个错误是由于 shoulda-matchers 还不兼容 Rails 4）。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:37:02.727

```
it "should not allow mass assignment" do
  raw_parameters = { :admin => 1 }
  parameters = ActionController::Parameters.new(raw_parameters)
  expect {@user.update_attributes(parameters)}.should raise_error
end 
```

为了测试质量分配，您应该模拟从控制器传递的参数。

[https://github.com/rails/strong_parameters#use-outside-of-controllers](https://github.com/rails/strong_parameters#use-outside-of-controllers)

# ruby-on-rails - glassfish gem 需要 jdk 6

> ID：15136363
> 
> 赞同：0
> 
> 时间：2013-02-28T13:07:53.693
> 
> 标签：ruby-on-rails, glassfish, java

嗨，

```
 I'm trying to work on RubyonRails, n installed the same with rubyinstaller. But, When i try to create a project, It gave me error as "glassfish gem requires jdk 6". 
```

有人可以帮我解决这个问题，我现在如何进行..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:11:29.397

如果您真的想使用 Glassfish，请从以下位置下载并安装 Java 开发工具包：

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

# c++ - 子进程在退出函数上给出 seg 错误

> ID：15136364
> 
> 赞同：0
> 
> 时间：2013-02-28T13:07:57.027
> 
> 标签：c++, signals, fork, multiprocessing, freebsd

我的环境：

*   **FreeBSD 9.1** 和我得到了一个预分叉的多进程环境。
*   一个主进程，一个轮询器来管理工作人员（决定忙碌或可用）和工作人员。

如果我发送一个`SIGTERM`到主进程没关系，如果工人数量不高。如果`high (x > 20)`我遇到段错误。

我有两个 truss 输出，其中一个是正常出口，另一个是 seg 故障。

**核心文件的 gdb 输出：**

```
Die: DW_TAG_unspecified_type (abbrev = 62, offset = 1535499)
    has children: FALSE
    attributes:
        DW_AT_name (DW_FORM_strp) string: "decltype(nullptr)"
Dwarf Error: Cannot find type of die [in module /usr/local/lib/gcc46/libstdc++.so.6]
Die: DW_TAG_unspecified_type (abbrev = 62, offset = 1535499)
    has children: FALSE
    attributes:
        DW_AT_name (DW_FORM_strp) string: "decltype(nullptr)"
Dwarf Error: Cannot find type of die [in module /usr/local/lib/gcc46/libstdc++.so.6] 
```

**正常退出进程的 truss 输出：**

```
> close(0)                                         = 0 (0x0) close(7)   
> = 0 (0x0) gettimeofday({1360957175.665250 },0x0)           = 0 (0x0) write(5,"2013-02-15 21:39:35.665 [64591] "...,64) = 64 (0x40) close(5)
> = 0 (0x0)
> 
> sigprocmask(SIG_BLOCK,SIGHUP|SIGINT|SIGQUIT|SIGKILL|SIGPIPE|SIGALRM|SIGTERM|SIGURG|SIGSTOP|SIGTSTP|SIGCONT|SIGCHLD|SIGTTIN|SIGTTOU|SIGIO|SIGXCPU|SIGXFSZ|SIGVTALRM|SIGPROF|SIGWINCH|SIGINFO|SIGUSR1|SIGUSR2,0x
> 0) = 0 (0x0)
> 
> sigprocmask(SIG_SETMASK,0x0,0x0)                 = 0 (0x0)
> 
> .............. .............. so many same sigprocmask call
> 
> 
> sigprocmask(SIG_BLOCK,SIGHUP|SIGINT|SIGQUIT|SIGKILL|SIGPIPE|SIGALRM|SIGTERM|SIGURG|SIGSTOP|SIGTSTP|SIGCONT|SIGCHLD|SIGTTIN|SIGTTOU|SIGIO|SIGXCPU|SIGXFSZ|SIGVTALRM|SIGPROF|SIGWINCH|SIGINFO|SIGUSR1|SIGUSR2,0x
> 0) = 0 (0x0)
> sigprocmask(SIG_SETMASK,0x0,0x0)                 = 0 (0x0)
> process exit, rval = 0 
```

**进程，有段错误：**

```
> gettimeofday({1360954514.547064 },0x0)           = 0 (0x0)
> write(5,"2013-02-15 20:55:14.547 [7580] I"...,63) = 63 (0x3f)
> close(5)                                         = 0 (0x0)
> SIGNAL 11 (SIGSEGV)
> process exit, rval = 0 
```

当进程尝试调用 sigprocmask 时，它会给出 seg 错误。我没有明确调用 sigprocmask，并且怀疑调用 sigprocmask 的竞争条件。您是否遇到与 sigprocmask 相关的竞争条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:40:40.160

> 当进程尝试调用 sigprocmask 时，它会给出 seg 错误

我不这么认为。看来，崩溃是在第 5 个文件描述符关闭之后发生的。进一步看来，描述符 5 在关闭之前获得了一条日志消息（带有时间戳）。

你的“主”守护进程试图清理，并在尝试中死去。我建议在运行时将 gdb 附加到它——就在发送 SIGTERM 之前。发送 SIGTERM 后，告诉 gdb 继续。

发送 SIGSEGV 后，进行调查。

我还强烈建议在 valgrind 下运行守护进程。那样你很可能会抓到很多虱子……

# grep - 如何在 grep 中使用非捕获组？

> ID：15136366
> 
> 赞同：51
> 
> 时间：2013-02-28T13:07:57.813
> 
> 标签：grep, pcre

[这个答案](https://stackoverflow.com/a/4825089/266309)表明`grep -P`支持`(?:pattern)`语法，但它似乎对我不起作用（该组仍被捕获并显示为匹配的一部分）。我错过了什么吗？

我正在尝试`grep -oP "(?:syntaxHighlighterConfig\.)[a-zA-Z]+Color" SyntaxHighlighter.js`此[代码](http://www.mediawiki.org/wiki/User:Remember_the_dot/Syntax_highlighter.js)，并期望结果是：

```
wikilinkColor
externalLinkColor
parameterColor
... 
```

但相反，我得到：

```
syntaxHighlighterConfig.wikilinkColor
syntaxHighlighterConfig.externalLinkColor
syntaxHighlighterConfig.parameterColor
... 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-28T13:18:45.147

“非捕获”并不意味着该组不是比赛的一部分；这意味着该组的值**不会保存以供反向引用使用**。您正在寻找的是一个*后视零宽度断言*：

```
grep -Po "(?<=syntaxHighlighterConfig\.)[a-zA-Z]+Color" file 
```

# tsql - SSRS 2008 R2 Report Builder 3.0：偏移日期默认开始时间

> ID：15136368
> 
> 赞同：2
> 
> 时间：2013-02-28T13:07:58.823
> 
> 标签：tsql, reporting-services, reportbuilder3.0, ssrs-2008-r2

我允许用户输入他们需要的开始日期和结束日期。我将开始和结束日期参数设置为@Start 和@End。它们没有存储任何值，而在我的代码中我有....在@Start 和@End 之间。用户输入的日期被传递到我的程序中，而不是我指定允许用户在参数属性中输入的内容。我的问题是我希望选择的每个日期的默认开始时间是 5:00 AM 而不是 0:00 AM。这样，当用户选择例如：2/20 和 2/21 时，他们可以从 5:00 AM-5:00 AM 检索日期。这使我的程序能够显示午夜之后的数据，这是必要的，因为我的数据在凌晨 3:00 停止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:46:57.910

您可以使用该`DateAdd`功能添加 5 小时以获得 2/20/2013 5:00 AM

看这个：

```
=DateAdd("h",5,Parameters!StartDate.Value) 
```

**编辑**

您可以在以下之一中添加这行代码：

**数据集的参数部分**

*   右键单击您的数据集
*   点击参数部分
*   单击`FX`按钮，然后将代码行放在那里

使用参数过滤 SQL 查询时使用此选项

**报告的字段（即文本框、表格单元格等）**

*   右键单击该字段
*   单击字段表达式选项，然后将代码行放在那里

结果如下所示： ![在此处输入图像描述](../Images/33f54c5b352513803b23277ce0efcb82.png)

# ios - iOS drawRect，在曲线上查找点

> ID：15136374
> 
> 赞同：1
> 
> 时间：2013-02-28T13:08:26.600
> 
> 标签：ios, uiview, drawrect, uibezierpath

我将绘制一条类似于下图中的红色曲线的曲线（可以是贝塞尔曲线或任何我认为最方便的曲线）。我想找到曲线上的点（伊洛中的蓝点）。这些点很可能是曲线长度的相等部分的分割。

我能找到这些点吗？到目前为止，我还没有在文档中看到解决方案。

![在此处输入图像描述](../Images/f01992a7f93ed591e045e88e39efb751.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:45:50.887

这个[答案](https://stackoverflow.com/a/9997476/1124373)涵盖了使用 de Casteljau 算法对贝塞尔曲线进行分割。您已经沿着曲线获得了参数化值以进行分割。

（如果您点击答案中引用的[链接](http://www.caffeineowl.com/graphics/2d/vectorial/bezierintro.html)，请确保您在浏览器中启用了 java，以便您可以查看示例可视化）。

# flash - Away3D 深度缓冲

> ID：15136375
> 
> 赞同：1
> 
> 时间：2013-02-28T13:08:27.050
> 
> 标签：flash, stage3d, away3d, depth-buffer

我正在 Away3D 中开发一个简单的场景编辑器，用户可以在其中导入、排列和转换对象。为了简化用户流程，我创建了一个小工具对象，它出现在选择上（基本上是三个箭头用于单击拖动），但是如果它们在选择的前面，这可能会被其他对象遮挡，相对于相机 - 有没有办法关闭给定对象/组的深度缓冲，以便它*始终*呈现在场景中其他对象的前面？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:23:49.980

不知道如何在 away3d 中执行此操作，但是 stage3D API 可以通过使用带有 Context3DCompareMode.ALWAYS 参数的 context3D.setDepthTest() 来实现。

# jquery - 尝试使用 cookie.js 显示更新

> ID：15136376
> 
> 赞同：1
> 
> 时间：2013-02-28T13:08:29.530
> 
> 标签：jquery

我需要一些帮助来解决我正在做的事情。我正在做一个 webapp 设计，当我们添加一些内容时，一个客户端想要，一个弹出窗口（如 IOS 之一）出现在图标上（该设计基于线条图标），显示还剩下多少更新。

好吧，现在主要问题变成了：我正在使用 cookie.js 在主屏幕上设置更新图标，并且我更改了代码以使其仅在您单击图像内部时才消失。它工作正常，但问题是在其他页面中（我的意思是当您单击其他图标时）仍然出现更新弹出窗口。

如何在其他页面上隐藏该更新弹出窗口？因为它仍然会看到，直到您单击主图标（删除弹出窗口的那个）。

Js代码

```
<script type="text/javascript">

         var popupStatus = 0;

//loading popup with jQuery magic!
function loadPopup(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#popupContact").fadeIn("slow");
        popupStatus = 1;
    }
}

//disabling popup with jQuery magic!
function disablePopup(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut(0.0000000000001);
        $("#popupContact").fadeOut(0.0000000000001);
        popupStatus = 0;
    }
}

//centering popup
function centerPopup(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth; 
    var windowHeight = document.documentElement.clientHeight; 
    var windowscrolltop = document.documentElement.scrollTop;
    var windowscrollleft = document.documentElement.scrollLeft;
    var popupHeight = $("#popupContact").height();
    var popupWidth = $("#popupContact").width();
    var toppos = windowHeight/2-popupHeight/2+windowscrolltop;
    var leftpos = windowWidth/2-popupWidth/2+windowscrollleft;
    //centering
    $("#popupContact").css({
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });
    $("#popupContact").click(function () {
$("div").hide(0.000000000001);
});

}

//CONTROLLING EVENTS IN jQuery
$(document).ready(function(){
    if ($.cookie("anewsletter") != 1) {   

        //load popup
        setTimeout("loadPopup()",0.001);   
    }       
    //CLOSING POPUP
    //Click the x event!
    $("#popupContactClose").click(function(){
        disablePopup();
        $.cookie("anewsletter", "1", { expires: 7 });
    });
    //Click out event!
    $("#pop").click(function(){
        disablePopup();
        $.cookie("anewsletter", "1", { expires: 7 });
    });
    //Press Escape event!
    $(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup();
            $.cookie("anewsletter", "1", { expires: 7 });
        }
    });

});
</script> 
```

的HTML

```
 <div class="imatge">
      <div class="imatges" id="hide"><a href="promos.html"><img src="Promociones.png" alt="Promociones"  border="0"></a></div>
      <div class="imatges"><a href="novedades.html"><img src="Novedades.png" alt="Novedades"  border="0"></a></div>
      <div class="imatges" id="pop">
      <a href="actualizacion.html"><img src="actprod.png" alt="Actproducto" border="0"></a>
      <div id="popupContact"></div>
      </div>
      <div class="imatges"><a href="http://anubis-cosmetics.com/news/indexapp.html"><img src="newsletter.png" alt="Newsletter" border="0"></a></div>
      <div class="imatges"><a href="http://www.blog.anubis-cosmetics.com"><img src="Blog.png" alt="Blog" border="0"></a></div>
      <div class="imatges"><a href="agenda.html"><img src="Agenda.png" alt="Agenda"  border="0"></a></div>
      <div class="imatges"><a href="sugerencias.html"><img src="sugerencias.png" alt="Sugerencias" border="0"></a></div>
      <div class="imatges"><a href="contacto.html"><img src="Contacto.png" alt="Contacto" border="0"></a></div>
      <div class="imatges"><a href="socialmedia.html"><img src="socialmedia.png" alt="socialmedia" border="0"></a></div>
  </div> 
```

我什至试图用 Jquery 将它隐藏在其他页面中

```
<script>
$(".imatges").hide();
$("#popupContact").click(function ( event ) {
event.preventDefault();
$(this).hide();
});
</script> 
```

但没有工作...

感谢您的帮助，谢谢

# ios - 适合 MKMapView 部分的注释

> ID：15136378
> 
> 赞同：1
> 
> 时间：2013-02-28T13:08:32.917
> 
> 标签：ios, objective-c, map, mkmapview

我得到了 MKMapView 和一些注释。我使用下一个代码来显示所有注释：

```
NSArray *coordinates = [self.mapView valueForKeyPath:@"annotations.coordinate"];

CLLocationCoordinate2D maxCoord = {-90.0f, -180.0f};
CLLocationCoordinate2D minCoord = {90.0f, 180.0f};
for(NSValue *value in coordinates) {
    CLLocationCoordinate2D coord = {0.0f, 0.0f};
    [value getValue:&coord];
    if(coord.longitude > maxCoord.longitude) {
        maxCoord.longitude = coord.longitude;
    }

    if(coord.latitude > maxCoord.latitude) {
        maxCoord.latitude = coord.latitude;
    }

    if(coord.longitude < minCoord.longitude) {
        minCoord.longitude = coord.longitude;
    }

    if(coord.latitude < minCoord.latitude) {
        minCoord.latitude = coord.latitude;
    }
}

MKCoordinateRegion region = {{0.0f, 0.0f}, {0.0f, 0.0f}};
region.center.longitude = (minCoord.longitude + maxCoord.longitude) / 2.0;
region.center.latitude = (minCoord.latitude + maxCoord.latitude) / 2.0;
region.span.longitudeDelta = (maxCoord.longitude - minCoord.longitude) * 1.5;
region.span.latitudeDelta = (maxCoord.latitude - minCoord.latitude) * 1.5;

[self.mapView setRegion:region animated:YES]; 
```

此代码将所有注释居中 - 完美。但是，如果我想在地图的右半部分放置注释怎么办？有没有办法做到这一点？

现在是这样：

![图片](../Images/b34851b8afa92f5d735c7b5423119dd0.png)

这是我想要实现的目标：

![图片](../Images/5990e359c2484737de8884f134316025.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:49:16.353

如果您的目标区域始终在左侧或右侧（即仍然允许全高），那么这很容易，您只需要计算出您所在区域边界的数学即可。

假设您希望引脚位于页面的右侧四分之一。这意味着您需要告诉地图查看比 pin 区域大 4x (targetspan/currentspan) 的区域，并且该区域的中间向左移动 1.5x ((targetspan-currentspan)/2) 的宽度地区。（我要坐的纬度是从 0 到 1，但实际上你只是使用你已经计算过的东西）

想象一下视图被分成四个垂直条，将有 5 条线。屏幕的左边缘是 0，下一行是 1，中间是 2，下一个是 3，最后一个是 4。您希望您的引脚位于第 3 行和第 4 行之间，这意味着您上面计算的经度跨度是1 个单位宽，center.longitude 为 3.5。

您有一个区域为 ((3.5,0.5), (1,1))，您需要告诉地图缩放到区域 ((2,0.5),(4,1))。因此，得到 longitudeDelta，将其乘以 1.5 并从 center.longitude 中减去，这就是您的新目标 center.longitude。然后将 longitudeDelta 乘以 4，这就是您的新 longitudeDelta。

您可以在小范围内对纬度进行类似的操作，但在大范围内，计算需要考虑地图投影，这意味着赤道附近的像素比两极附近的像素代表更多的土地。

# java - 为什么netty只使用一个线程？

> ID：15136382
> 
> 赞同：1
> 
> 时间：2013-02-28T13:08:43.917
> 
> 标签：java, udp, netty

我正在尝试编写一个 udp 服务器。我以这种方式配置了我的引导程序：

```
ChannelFactory factory = new NioDatagramChannelFactory(Executors.newCachedThreadPool());

    ConnectionlessBootstrap bootstrap = new ConnectionlessBootstrap(factory);
    bootstrap.setPipelineFactory(new UDPServerPipelineFactory());
    bootstrap.setOption("sendBufferSize", 1048576*2);
    bootstrap.setOption("receiveBufferSize", 1048576*2);
    bootstrap.setOption("tcpNoDelay", true);
    bootstrap.setOption("receiveBufferSizePredictorFactory", new AdaptiveReceiveBufferSizePredictorFactory(1048576, 1048576, 2000000));
    bootstrap.bind(new InetSocketAddress(11000)); 
```

以这种方式流水线：

```
@Override
public ChannelPipeline getPipeline() throws Exception
{
    ChannelPipeline pipeline = Channels.pipeline();

    pipeline.addFirst("execution-handler", new ExecutionHandler(new OrderedMemoryAwareThreadPoolExecutor(16, 2333444, 3444333)));
    pipeline.addLast("decoder", new StringDecoder());
    pipeline.addLast("counter", new UDPHandler());

    return pipeline;
} 
```

但是我的 UDPHandler 总是只由一个线程管理。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T04:53:38.577

你没有做错任何事。似乎 Netty UDP 只使用一个线程来处理请求。也有关于此的[问题](https://github.com/netty/netty/issues/1706)报告。

您最好在收到请求后创建一个 ExecutorService 来执行您的业务逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T07:28:44.253

请检查这个[http://lists.jboss.org/pipermail/netty-users/2009-September/001350.html](http://lists.jboss.org/pipermail/netty-users/2009-September/001350.html)

今天我们遇到了同样的问题，对于UDP，只有一个通道有一个worker。

所以只使用了一个线程。不知道为什么Netty不提供一些特殊的工厂只有一个线程来说明问题。

# java - Spring MVC 初始化对象

> ID：15136385
> 
> 赞同：2
> 
> 时间：2013-02-28T13:08:49.987
> 
> 标签：java, spring, jsp, spring-mvc, servlet-3.0

在我的 SpringMVC 项目中，我需要某种策略来调用一个类，该类解析一个确实拥有我的 RMI 服务器 ip 和端口的 xml 文件，并且 url 必须与 servletContext url 相关：

```
HttpServletRequest request;    
request.getServletContext().getRealPath("/WEB-INF/LABLAB/RMI-Config.xml") 
```

我想在 tomcat 中启动我的应用程序时加载这些类，而不是在我调用控制器类时加载这些类，因为我的应用程序依赖于我的 RMI，所以在其他任何事情之前，我必须解析我的文件并使用 IP 和 PORT 字段开始连接到我的 RMI & 然后调用 rmi 方法稍后做一些事情......

现在

我要怎么做？请告诉我如何初始化 HttpServletRequest 的实例并在我不在 Controller 类时给出初始值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:15:59.860

您正在使用 Spring，那么您可以创建一个类并实现[IntializingBean](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/InitializingBean.html)。如果你想掌握`ServletContext`你可以在初始化 bean 中简单地使用`@Autowired`注释。例如：

```
@Component
public class SomeBean implements InitializingBean {

    @Autowired
    private ServletContext context;   

    public void afterPropertiesSet() throws Exception {
       String path = context.getRealPath("/WEB-INF/LABLAB/RMI-Config.xml");
       //do something.
    }
} 
```

根据文档：

> IntializingBean - 由 BeanFactory 设置所有属性后需要做出反应的接口实现。

或者看看[这里](https://stackoverflow.com/questions/12098995/call-method-on-apache-cxf-initialiaze/12109443#12109443)如何使用`ServletContextListener`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:12:50.970

您需要实现该`ServletContextListener`接口并从您的`web.xml`：

```
<listener>
    <listener-class>InitializingListener</listener-class>
</listener> 
```

该接口有一个`contextInitialized(ServletContextEvent sce)`方法，您可以在其中调用`sce.getServletContext()`，因此您不需要`HttpServletRequest`.

如果这不起作用，因为您还需要从初始化类访问一些 Spring bean，然后忘记实现`ServletContextListener`接口，而是执行以下操作：

1.  通过 Spring 实例化您的初始化类（制作该类型的 bean）。
2.  使类实现`ServletContextAware`。这将导致 Spring 将 注入`ServletContext`到您的类中。
3.  在该 bean 上定义一个 init 方法（使用`init-method`bean 属性，或定义一个带`@PostConstruct`注释的方法）
4.  使用`depends-on`bean 属性使所有控制器 bean 依赖于初始化 bean。因此，初始化 bean 将在任何 Controller bean 之前创建。

如果没有最后一步，就无法保证您的控制器不会在初始化 bean 完成其工作之前开始处理请求。但是，`depends-on`在每个控制器 bean 上指定属性也是有问题的，尤其是它们通常是通过应用`@Controller`注释而不是 xml 配置来创建的。[这篇文章](https://stackoverflow.com/q/959547/1276804)中描述了一个很好的解决方法。

# antlr - ANTLR：词法分析器抛出 NoViableAltException

> ID：15136387
> 
> 赞同：-1
> 
> 时间：2013-02-28T13:08:52.670
> 
> 标签：antlr, antlr3

休息了几个星期，又到了和ANTLR战斗的时候了……

无论如何，我定义了以下 Lexer 标记：

```
fragment EQ: '=';
fragment NE: '<>';

BOOLEAN_FIELD
  : ('ISTRAINED'|'ISCITIZEN')
  ;

BOOLEAN_CONSTANT
  : ('TRUE'|'FALSE'|'Y'|'N')
  ;

BOOLEAN_LOGICAL
  : BOOLEAN_FIELD (EQ|NE) (BOOLEAN_FIELD|BOOLEAN_CONSTANT)
  ; 
```

不幸的是，BOOLEAN_LOGICAL 令牌以简单的术语（例如“ISTRAINED = ISTRAINED”）引发 NoViableAltException。

我知道一些响应将是“这应该在解析器中”。它以前在解析器中，但是，我试图将一些简单的项目卸载到词法分析器中，因为我只需要“是/否，这个文本块有效吗？”

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:08:57.053

`BOOLEAN_LOGICAL`不应该是词法分析器规则。词法分析器规则必须（或应该）是单个标记。`BOOLEAN_FIELD`作为词法分析器规则，和之间不能有任何空格`(EQ|NE)`（您可能在词法分析过程中跳过了空格，但这只会导致从**解析器**规则中跳过空格！）。

改为这样做：

```
boolean_logical
  : BOOLEAN_FIELD (EQ|NE) (BOOLEAN_FIELD|BOOLEAN_CONSTANT)
  ; 
```

这也意味着`EQ`并且`NE`不再是`fragment`规则：

```
EQ : '=';
NE : '<>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:27:47.283

这看起来应该是一个解析器规则。但是，如果要将其保留为词法分析器规则，则需要允许空格。

```
BOOLEAN_LOGICAL
  : BOOLEAN_FIELD WS+ (EQ|NE) WS+ (BOOLEAN_FIELD|BOOLEAN_CONSTANT)
    ; 
```

# python - TKinter 中的绑定事件问题

> ID：15136392
> 
> 赞同：0
> 
> 时间：2013-02-28T13:09:14.983
> 
> 标签：python, user-interface, event-handling, tkinter

背景：我的大部分经验是 ruby​​/rails。我正在尝试通过构建一个简单的 GUI 应用程序来帮助朋友，该应用程序可以更新 Excel 文件并且没有太多使用 Python 或 TKinter 的经验。目标是有一个简单的表单，用户输入一个数字，另一个表单显示一个下拉菜单。我决定将给定的数字存储在一个全局变量中，因为我在尝试在两个帧之间传递一个变量时遇到了麻烦。我无法同时设置全局变量并切换到第二帧。我遇到的其他问题/问题在## 标记的评论中。

或者，如果有人对制作可以访问 MDB 或 excel 文件的跨平台应用程序的最佳方法有任何想法，我会全力以赴。这让我大吃一惊，这是多么困难。谢谢你的帮助。

```
import Tkinter as tk

TITLE_FONT = ("Helvetica", 18, "bold")
ID_NUMBER = None

class StatusApp(tk.Tk):
    def __init__(self, *args, **kwargs):
        tk.Tk.__init__(self, *args, **kwargs)

        container = tk.Frame(self)
        container.pack(side="top", fill="both", expand=True)
        container.grid_rowconfigure(0, weight=1)
        container.grid_columnconfigure(0, weight=1)

        self.frames = {}
        for F in (EntryPage, StatusPage):
            frame = F(container, self)
            self.frames[F] = frame
            frame.grid(row=0, column=0, sticky="nsew")

        self.show_frame(EntryPage)

    def show_frame(self, c):
        '''Show a frame for the given class'''
        frame = self.frames[c]
        frame.tkraise()

class EntryPage(tk.Frame):
    def __init__(self, parent, controller):
        tk.Frame.__init__(self, parent) 
        label = tk.Label(self, text="Enter ID:", font=TITLE_FONT)
        self.entry = tk.Entry(self)
        ## Using the lambda works to switch frames, but I need to be able to execute 
        ## multiple statements.
        # entry.bind('<Return>', lambda event: controller.show_frame(StatusPage))

        ## In examples I've seen, callback has been used without the empty parens, not sure
        ## why they're needed?
        self.entry.bind('<Return>', self.callback())
        label.pack(side="top", fill="x", pady=10)
        self.entry.pack()
        self.entry.focus_set()

    def callback(self):
        ## I noticed the following gets fired once the program starts
        print 'hello'

        ## For some reason it says that entry doesn't have the attribute 'set'. I don't
        ## understand this as I'm calling it like a method.
        self.entry.set('hello')

        ## Ultimately setting the global ID_NUMBER variable is one of the main goals of this
        ## function
        ID_NUMBER = self.entry.get()

        ## I haven't been able to switch frames from within this function, only w/ a lambda as
        ## seen on line 34.
        # show_frame(StatusPage())

class StatusPage(tk.Frame):
    def __init__(self, parent, controller):
        tk.Frame.__init__(self, parent) 
        label = tk.Label(self, text="ID: ", font=TITLE_FONT)
        optionList = ('train', 'plane', 'boat')
        selected_opt = tk.StringVar()
        selected_opt.set(ID_NUMBER)
        menu = tk.OptionMenu(self, selected_opt, *optionList)
        button = tk.Button(self, text="Save", command=lambda: controller.show_frame(EntryPage))
        label.pack(side="top", fill="x", pady=10)
        menu.pack()
        button.pack()

if __name__ == "__main__":
    app = StatusApp()
    app.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:47:12.323

绑定的对象必须是对可调用函数的引用。Lambda 经常在这种情况下使用，因为它创建了一个匿名函数并返回一个引用）。

当您这样做时`...bind(..., self.callback())`，您将在执行绑定语句时调用该函数。在代码中您发表评论`## I noticed the following gets fired once the program starts`；这就是为什么。此函数调用的结果是与绑定相关联的内容。很多时候，在您的特定情况下，这就是 value `None`。您必须省略`()`

在你写的代码注释中

```
## For some reason it says that entry doesn't have the attribute 'set'. I don't
## understand this as I'm calling it like a method.
self.entry.set('hello') 
```

是什么让你相信入口小部件有`set`方法？据我所知，没有任何文件提出这种说法。错误消息是正确的，入口小部件没有名为“set”的属性（在此上下文中，函数被视为属性）。

# symfony - 将 parameter.ini 更改为 parameter.yml

> ID：15136394
> 
> 赞同：1
> 
> 时间：2013-02-28T13:09:25.093
> 
> 标签：symfony, config, file-format

我将`parameter.ini`文件更改为`parameter.yml`. 但浏览器中显示白页。

我的代码：parameter.yml

```
 parameters:
    database_driver: pdo_mysql
    database_host=localhost
    database_port=22
    database_name=traxerp_cons
    database_user=root
    database_password=console
    mailer_transport=smtp
    mailer_host=localhost
    mailer_user=null
    mailer_password=null
    locale=en
    secret="b538e3680321a85b2e39a3d1772e0b711ff9371c" 
```

配置.yml

进口：-{资源：parameters.yml}-{资源：security.yml}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:15:36.650

将所有出现的 更改`=`为`:`。

还要检查日志以了解应用程序失败的原因。

# css - 如何在选择其子项时将菜单设置为选中

> ID：15136398
> 
> 赞同：3
> 
> 时间：2013-02-28T13:09:29.877
> 
> 标签：css, stylesheet

我有一个创建菜单的任务。我想在选择其子项时将菜单设置为选中状态。我的css文件是

```
 #wrapper {
     width:100%;
     height:500px;
 }
 h2 {
     color:#787878;
 }
 #menu, #menu ul {
     list-style: none;
     //padding: 2px;
 }
 #nav{
     border-bottom: 1px solid #CCCCCC;
     border-spacing: 0;
     display: table;
     float: left;
     height: 25px;
     width: 100%;
 }
 #nav ul {
     margin: 0;
     padding: 0;
 }
 #nav > ul > li:hover {
     background: none repeat scroll 0 0 #FFFFFF;
     border-color: #ccc #ccc #FFFFFF;
     border-style: solid;
     border-width: 1px;
     padding-bottom: 0;
     border-radius:1px;
 }
 .menu-child {
     width:160px;
     display:block !important;

 }
 #nav ul li ul li:hover {
 }
 #nav ul li ul :hover { 
 }
 #menu {
     float: left;
     height: 25px;
 }
 #menu> li {
     float: left;
 }
 #menu li a {
     display: block;
     height: 2em;
     line-height: 2em;
     padding: 0 1.5em;
     text-decoration: none;
 }
 #menu ul {
     position: absolute;
     display: none;
     z-index: 999;
 }
 #menu ul li a { 
 }
 #menu li:hover ul {
     display: block;
 }
 #menu {
     font-family: Arial;
     font-size: 12px;
     //background: #F8F8F8;
 }
 #menu > li > a {
     font-family: Verdana, Arial, sans-serif;
     font-style: normal;
     color:#787878;
     font-weight: bold;
 }
 #menu > li > a:hover {
     color: #000;
 }
 #menu ul {
     background: none repeat scroll 0 0 #FFFFFF;
    border-radius: 0 0 5px 5px;
    margin-top: 1px;
 }
 #menu ul li a {
     color: #000;
 }
 #menu ul li a:hover {
     background: #E0E0E0;
 }
 .logout {
     float:right;
     width:300px;
 }
 .title {
     float:left;
     width:300px;
 }
 #footer {
     width:100%;
     height:100px;
     float:left;
 }
 .subchild-list {
     margin:0;

     position: absolute !important;
     top:0;
     right:-87px;
     //border-color: #ccc #FFFFFF #ccc #FFFFFF;
 }
 .child-list ul {
     display: none !important;
     position: absolute !important;
     z-index: 999 !important;
 }
 .child-list li {
     position:relative !important;

 }
 .child-list li:hover ul {
     display: block !important;
 }

.child-list li{

    border-left:1px solid #C0C0C0; 
    border-right:1px solid #C0C0C0;
}

.child-list ul{
    border-top:1px solid #C0C0C0; 
    border-bottom:5px solid #C0C0C0; 
}

.child-list{
    border-bottom:5px solid #C0C0C0; 
}
.nav-subchild
{
    border-color: #ccc #FFFFFF #ccc #FFFFFF;
}
#nav > ul > li:hover {
 border-color: #ccc #ccc #FFFFFF;
 border-style: solid;
 border-width: 1px;
 padding-bottom: 0;
 border-radius:1px;
 }

#menu > li {
border-bottom:#ccc;
border-left: 1px solid #fff;
border-right: 1px solid #fff;
border-top: 1px solid #fff;
}
#nav ul li:hover ul { margin-left:-1px; } #nav ul li ul:hover { margin-left:-1px; }
ul li ul li 
{
    width: 180px;
}
.subchild-list {
    margin:0;
    right:-183px;
    position: absolute !important;
    top:0;
}
.hassub {
    background: url('arrow.gif') right no-repeat;
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T06:49:03.963

试试这个字体粗体：粗体；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:11:55.643

如果我正确理解您的问题，您希望顶级导航即使在子级悬停时也具有活动状态。

在这种情况下，这是答案（附加到您的 CSS）：

```
#menu li:hover > a {
    color: #000;
} 
```

jsfiddle：http: [//jsfiddle.net/wDcV5/2/](http://jsfiddle.net/wDcV5/2/)

# memory-leaks - 如何正确销毁对象，以免它们导致内存泄漏

> ID：15136400
> 
> 赞同：2
> 
> 时间：2013-02-28T13:09:34.667
> 
> 标签：memory-leaks, asp-classic, vbscript

当我创建两个相互引用的字典对象时，即使我将它们明确设置为空，它们也会保留在内存中。以下代码消耗 >1 GB 内存

```
Dim i
For i = 1 to 100000
    leak
Next

Sub leak

    Dim a, b
    Set a = createObject("scripting.dictionary")
    Set b = createObject("scripting.dictionary")

    a.Add "dict1", b
    b.Add "dict2", a

    Set a = Nothing
    Set b = Nothing

end sub 
```

这与某些垃圾收集无关（VBScript 不这样做）。证明：当我改变`a.Add "dict1", b`和`a.Add "dict1", "foo"`改变`b.Add "dict2", a`内存消耗时`a.Add "dict2", "bar"`，内存消耗保持在合理的范围内。

顺便说一句，当字典引用自身时也会发生这种情况：

```
Sub leak
    Dim a
    Set a = createObject("scripting.dictionary")
    a.Add "dict1", a
    Set a = Nothing
end sub 
```

是否有可能以在内存中也被销毁的方式销毁像这些交叉引用字典这样的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:58:27.780

找到字典的答案：使用该`RemoveAll`方法在引用超出范围之前摆脱所有键和值。经测试，无泄漏：

```
Sub leak

    Dim a, b
    Set a = createObject("scripting.dictionary")
    Set b = createObject("scripting.dictionary")

    a.Add "dict1", b
    b.Add "dict2", a

    a.RemoveAll
    b.RemoveAll

end sub 
```

如果您将字典用作`keys`（而不是`items`/ `values`），这也解决了循环引用问题，例如：

```
a.Add b, "dictionary b"
b.Add a, "dictionary a" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:45:33.027

首先阅读[Eric Lippert 的文章 (Explanation #2)](http://blogs.msdn.com/b/ericlippert/archive/2004/04/28/when-are-you-required-to-set-objects-to-nothing.aspx)，然后将代码更改为

```
Dim i
For i = 1 to 100000
    leak
Next

Sub leak

    Dim a, b
    Set a = createObject("scripting.dictionary")
    Set b = createObject("scripting.dictionary")

    a.Add "dict1", b
    b.Add "dict2", a

    Set a("dict1") = Nothing
    Set b("dict2") = Nothing

end sub 
```

和的引用计数通过离开子范围而减少，因为`a`您必须自己做。`b``a("dict1")``b("dict2")`

# android - android.view.ViewRootImpl$CalledFromWrongThreadException 在 android

> ID：15136405
> 
> 赞同：0
> 
> 时间：2013-02-28T13:09:44.743
> 
> 标签：android, android-asynctask

我收到这个错误。我用谷歌搜索并编辑了我的 doInBackground 函数，我删除了 doInBackground 中的视图，但我仍然收到这个错误。有什么问题可以帮助我吗？

```
private class MessageProgressBar extends AsyncTask<Void, Integer, Void>{

    /** This callback method is invoked, before starting the background process */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        /** Creating a progress dialog window */
        mProgressDialog = new ProgressDialog(Messages.this);

        /** Close the dialog window on pressing back button */
        mProgressDialog.setCancelable(true);

        /** Setting a horizontal style progress bar */
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);

        /** Setting a message for this progress dialog
         * Use the method setTitle(), for setting a title
         * for the dialog window
         *  */
        mProgressDialog = ProgressDialog.show(Messages.this, 
                "Mesaj Gönderilyor", "Lütfen bekleyin...");

    }

    /** This callback method is invoked on calling execute() method
     * on an instance of this class */
    @Override
    protected Void doInBackground(Void...params) {
        String createdReplyResult=ReplyMessageWS(msgid[0], replyText.getText().toString(), mid, targetmid);
        parseReplyResult(createdReplyResult);   

        if(replyridfordevice[0]>1){
            replydbInstance.insertReplies(replyridfordevice[0], msgid[0], replyText.getText().toString(),replydatefordevice[0], mid, targetmid);

        }

        return null;
    }

    /** This callback method is invoked when publishProgress()
     * method is called */
    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
        mProgressDialog.setProgress(mProgressStatus);

    }

    /** This callback method is invoked when the background function
     * doInBackground() is executed completely */
    @Override
    protected void onPostExecute(Void result) { 

        replyText.setText("");
        startActivity(getIntent());

        mProgressDialog.dismiss();

    }
}

    private String ReplyMessageWS(int msgid,String replydesc,int repliedfrom,int repliedto) {

    String NAMESPACE = "http://ws.apache.org/axis2";
    String URL = "http://212.154.125.220:8080/MobileMerchMessage/services/messagesWS?wsdl";
    String METHOD_NAME = "replyMessage";
    String myResult = null;

    String SOAP_ACTION = NAMESPACE + METHOD_NAME;
    SoapObject result;
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("msgid",msgid);
    request.addProperty("replydesc",replydesc);
    request.addProperty("repliedfrom",repliedfrom);
    request.addProperty("repliedto",repliedto);

    // Parameter for Method
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    // envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        result = (SoapObject) envelope.bodyIn;
        myResult = result.getProperty("return").toString();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return myResult;

}

public void insertReplies(int rid,int msgid,String replydesc, String replydate, int repliedfrom,int repliedto) {
    SQLiteDatabase myDatabase = this.getWritableDatabase();

            String query = "INSERT INTO Replies (_id,msgid,replydesc,replydate,repliedfrom,repliedto) "+
                           " VALUES ("+rid+","+msgid+",'"+replydesc+"','"+replydate+"',"+repliedfrom+","+repliedto+")";
            SQLiteStatement st = myDatabase.compileStatement(query);

    try {
        st.execute();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    myDatabase.close();
    Log.i("insert","insert Replies completed");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:14:38.377

我猜你的`replydbInstance.insertReplies()`电话是在某个时候编辑一些视图......

我们只能猜测这些信息，请发布错误**堆栈跟踪**。

# php - 使困惑！PHP 如果不工作

> ID：15136406
> 
> 赞同：0
> 
> 时间：2013-02-28T13:09:50.633
> 
> 标签：php, function, if-statement

我有点困惑。可能只有我很厚！基本上，我有以下功能：

```
// Check if a verified email
function verified($username)
{
    global $conn;
    if($username == '') { return; } 
    $q = $conn->prepare("SELECT * FROM users WHERE Username='".$username."' AND Verified = 1");
    $q->execute();

    return $q->rowCount();
} 
```

然后我的脚本中有以下代码：

```
if (verified($_SESSION['Username'] == '0') 
```

现在我已经回显了上面的函数，它`0`按原样返回，但由于某种原因，如果上面似乎并不同意它确实是一个`0`. 我究竟做错了什么？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:12:43.020

我想你的意思是：

```
if (verified($_SESSION['Username']) == '0') 
```

注意 $_SESSION['Username'] 之后的右括号...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:16:48.990

此行不正确：

```
if (verified($_SESSION['Username'] == '0') 
```

您在 $_SESSION['Username'] 之后缺少一个 ')'。结果将是一个整数（行数），因此不需要''

```
if (verified($_SESSION['Username']) == 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:22:56.877

如果复制粘贴错误，没关系，否则检查

如果（已验证（$_SESSION['用户名'] **）** =='0'）

在 ['Username'] 之后检查正确的 ' **) '**

`session_start();`然后在a之前 检查`$_SESSION['Username']`

# android - getView() 返回 null

> ID：15136409
> 
> 赞同：6
> 
> 时间：2013-02-28T13:09:51.263
> 
> 标签：android, android-fragments

我基本上有一个`AsyncTask`（从 main 运行`Activity`）填充`ViewPager`一个片段内部。我正在膨胀一个 xml 布局文件来填充`ViewPager`.

问题是我无法获得指向布局内视图（imageview、textview）的指针，因此我可以在运行时进行更改。我知道这可能是因为`getView()`返回`null`。我读过这可能是因为`onCreateView()`还没有被调用。有人知道我能做些什么来解决这个问题吗？

* * *

我的代码现在有点乱。

这是对我正在做的事情的更简单的解释：

1.  MainActivity Asynctask 填充数据库并将指针发送到 Fragment。类似 SendToFragement(db);
2.  Fragment 方法 ReceiveFromActivity(db) 接收 db 指针并填充 ViewPager。

如果我只是创建 TextViews、设置文本并将 TextViews 添加到 Viewpager，它就可以正常工作。但是，当然，我想让它看起来更好，所以我膨胀了一个 xml 布局。问题是我无法更改 xml 布局的内容，因为`getView()`正在返回`NULL`所以`getView().findViewById()`不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T13:57:59.673

根据您的 PagerAdapter 的实现，可能会销毁不再显示的 Fragment`View`以释放资源。因此，无需更新 ，`View`因为它将`onCreateView()`使用更新的信息再次创建。 `getView()`将在调用`onCreateView()`和之间返回一个视图`onDestroyView()`。除此之外，`Fragment`can 仍然存在于内存中，但不附加到 any `View`，因此`getView()`将返回`null`。

所以基本上，

```
View fragmentView = getView();
if(fragmentView != null) {
  // we are in view or at least exist. Update the elements.
}
// Else don't worry about it. Just update the data. 
```

# java - Glassfish 方法执行程序异常

> ID：15136411
> 
> 赞同：2
> 
> 时间：2013-02-28T13:09:52.730
> 
> 标签：java, glassfish, glassfish-3

在 Glassfish 上部署一个相当简单的 Spring MVC 应用程序时出现以下错误。我相信它与某处的内存泄漏有关，但实际上没有任何迹象表明它可能在哪里。

这看起来像是应用程序问题还是我可以更改的应用程序服务器上的设置？

我之前遇到了 Statement Leak 检测错误，但我降低了 JDBC 池上的连接，然后就消失了。我正在使用 JDBCTemplate，所以我认为我不需要手动关闭任何连接。

有人可以建议开始寻找的最佳地点在哪里吗？

```
SEVERE: Exception while visiting com/sun/gjc/util/MethodExecutor.class of size 6337
java.lang.NullPointerException
    at org.glassfish.hk2.classmodel.reflect.impl.TypesImpl.getType(TypesImpl.java:78)
    at org.glassfish.hk2.classmodel.reflect.impl.ModelClassVisitor.visit(ModelClassVisitor.java:119)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:363)
    at org.glassfish.hk2.classmodel.reflect.util.JarArchive.onSelectedEntries(JarArchive.java:125)
    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)
    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662) 
```

# three.js - 三.js dds压缩纹理uv贴图问题

> ID：15136412
> 
> 赞同：2
> 
> 时间：2013-02-28T13:09:54.420
> 
> 标签：three.js, webgl, textures

我正在尝试让 dds 纹理与 three.js 一起使用。我有一个使用 jpg/png 格式的烘焙纹理的 json 模型（使用 three.js 转换器从 .obj + .mtl 转换）。我创建了一个 dds 纹理（带有 mipmap 的 DXT1）。当我加载使用 DDS 纹理的模型（使用 JSONLoader）时，似乎没有应用 UV 贴图。我根本没有映射。

例如具有 jpg 纹理的平面：

![在此处输入图像描述](../Images/3605a50152c6070e477bf83e24eb3546.png)

通过切换到 DDS，我得到了这个：

![在此处输入图像描述](../Images/278f6a55ae1f121ed74de8782e0ac935.png)

这是预期的行为吗？或者也许 DDS 纹理不支持 uv 贴图？或者可能是three.js中的某种错误？

我真的会使用任何帮助家伙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-04T18:35:53.417

正如这里解释的那样[https://github.com/mrdoob/three.js/issues/4316](https://github.com/mrdoob/three.js/issues/4316) dds 纹理不能像普通的 jpg/png 图像那样翻转，所以它们看起来是颠倒的。解决方案是翻转源图像，然后对其进行压缩，或者让着色器意识到这一点并翻转 uv 坐标。

# php - 如何接收从 flex 到 php 的数组集合

> ID：15136415
> 
> 赞同：1
> 
> 时间：2013-02-28T13:09:58.260
> 
> 标签：php, apache-flex, zend-framework, air, zend-amf

我正在研究zend Amf php，其中数据作为数组集合从flex（as3）发送到PHP服务，我的问题是如何在php端接收数组集合？

我创建了一个类，并将这个类包含在 php 服务文件中

```
class Application_Vo_ArrayCollection {

public $source = array();

public function __construct($arr = null) {
    if(isset($arr))
        $this->source = $arr;
    else {
        $this->source = array();
    }
}

public function push($o) {
    array_push($this->source, $o);
}

public function addItem($index, $item) {
    $this->source[$index] = $item;
}
} 
```

现在，当从 flex 调用**php 服务时。**

```
 public function my_php_service( $userdata, Application_Vo_ArrayCollection $questiondata, $requestdata ) {

} 
```

抛出错误，**无法解析空正文数据不支持的类型标记：17**

我想确保这是在 php 中接收数组集合的正确方法吗？ **Application_Vo_ArrayCollection $questiondata**在我的函数定义中。

谢谢，

# javascript - 通过切换它们的类来为多个 div 设置动画

> ID：15136417
> 
> 赞同：1
> 
> 时间：2013-02-28T13:10:07.187
> 
> 标签：javascript, jquery, html, css, animation

我很难为这个盒子设置动画，所以变化很顺利，但我就是不知道如何把所有东西放在一起。帮助将不胜感激。（已经尝试使用'switchClass'）这是整个代码：

```
<script src="jquery.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<style>
#box {
    position: relative;
    margin: auto;
    padding: auto;
    display: block;
    width: 167px;
    height: 167px;
}
#box .item {
    position: relative;
    margin: 0;
    display: block;
    width: 100%;
    height: 33%;
    cursor: pointer;
}
#box .over {
    height: 84%;
}
#box .other {
    height: 8%;
}
#top {
    background: red;
}
#mid {
    background: green;
}
#bot {
    background: blue;
}
</style>
<script>
function anim(item) {
    $('.item').attr('class', 'item other');
    $('#' + item.id).attr('class', 'item over');
}

function clean() {
    $('.item').attr('class', 'item');
}
</script>
<div id='box' onmouseout="clean()">
    <div id='top' class='item' onmouseover='anim(this)'></div>
    <div id='mid' class='item' onmouseover='anim(this)'></div>
    <div id='bot' class='item' onmouseover='anim(this)'></div>
</div> 
```

编辑：这段代码运行得很好，但它只是最终输出的一个例子（只需要一些动画）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:15:08.430

如果您的动画仅基于 CSS 类属性，为什么不使用 CSS3 悬停伪选择器？

例子：

```
.box {
    width: 200px;
}

.box:hover {
    width: 400px;
}

<div class="box">Hover over me!</div> 
```

* * *

## 补充：对评论的回应

* * *

如果您正在寻找自定义动画持续时间，您可以使用带有持续时间的回调函数进行初始函数调用。这是一个例子：

```
$('#div').animate({
   width: '200px',
   color: 'blue'
}, 5000, function() {
   // Animation finished after 5 seconds.
   alert("Animation complete!");
}); 
```

* * *

## 补充 #2

* * *

你的问题孩子就是这个小家伙：

```
$('.item').attr('class', 'item other'); 
```

这会将每个框设置为 8% 的高度，然后扩展主动画框。删除它，您的#box 将在所有动画中保持相同的高度！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:22:48.440

如果你想动画变化，请看一下[jQuery animate](http://api.jquery.com/animate/)

像这样的东西：

```
$('.item').mouseenter(function() {
 $('.item').animate({
    height: 80%
  }, 500, function() {
    // Animation complete.
  });
});

$('.item').mouseleave(function() {
  $('.item').animate({
    height: 33%
  }, 500, function() {
    // Animation complete.
  });
}); 
```

在这种情况下，您不需要`onmouseout`或`onmouseover`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:31:24.370

也许这不是很酷，但似乎可以做到：

```
var $items = $('.item').on({
    mouseover: function () {
        $items.removeClass('over other');
        $items.stop().filter(this).animate({height: '84%'}, function () {
            $(this).addClass('over');
        })
        .end().not(this).animate({height: '8%'}, function () {
            $(this).addClass('other');
        });
    },
    reset: function() {
        $items.removeClass('over other').stop().animate({height: '33%'});
    }
});

$('#box').mouseout(function() {
    $items.trigger('reset');
}); 
```

[http://jsfiddle.net/dfsq/4vnkh/1/](http://jsfiddle.net/dfsq/4vnkh/1/)

# c - 具有位域的结构的内存布局

> ID：15136426
> 
> 赞同：9
> 
> 时间：2013-02-28T13:10:50.250
> 
> 标签：c, unix, struct, ip, bit-fields

我有这个 C 结构：（代表一个 IP 数据报）

```
struct ip_dgram
{
    unsigned int ver   : 4;
    unsigned int hlen  : 4;
    unsigned int stype : 8;
    unsigned int tlen  : 16;
    unsigned int fid   : 16;
    unsigned int flags : 3;
    unsigned int foff  : 13;
    unsigned int ttl   : 8;
    unsigned int pcol  : 8;
    unsigned int chksm : 16;
    unsigned int src   : 32;
    unsigned int des   : 32;
    unsigned char opt[40];
}; 
```

我给它赋值，然后用 16 位字打印它的内存布局，如下所示：

```
//prints 16 bits at a time
void print_dgram(struct ip_dgram dgram)
{
    unsigned short int* ptr = (unsigned short int*)&dgram;
    int i,j;
    //print only 10 words
    for(i=0 ; i<10 ; i++)
    {
        for(j=15 ; j>=0 ; j--)
        {
            if( (*ptr) & (1<<j) ) printf("1");
            else printf("0");
            if(j%8==0)printf(" ");
        }
        ptr++;
        printf("\n");
    }
}

int main()
{
    struct ip_dgram dgram;

    dgram.ver   = 4;
    dgram.hlen  = 5;
    dgram.stype = 0;
    dgram.tlen  = 28;
    dgram.fid   = 1;
    dgram.flags = 0;
    dgram.foff  = 0;
    dgram.ttl   = 4;
    dgram.pcol  = 17;
    dgram.chksm = 0;
    dgram.src   = (unsigned int)htonl(inet_addr("10.12.14.5"));
    dgram.des   = (unsigned int)htonl(inet_addr("12.6.7.9"));

    print_dgram(dgram);

    return 0;
} 
```

我得到这个输出：

```
00000000 01010100 
00000000 00011100 
00000000 00000001 
00000000 00000000 
00010001 00000100 
00000000 00000000 
00001110 00000101 
00001010 00001100 
00000111 00001001 
00001100 00000110 
```

但我希望这样：

![在此处输入图像描述](../Images/3d4e42e80afc807de69eef097bf7d24b.png)

输出部分正确；在某处，字节和半字节似乎被互换了。这里有一些字节顺序问题吗？位域不适合这个目的吗？我真的不知道。有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T13:12:58.487

不，位域不适用于此目的。布局依赖于编译器。

对想要控制结果布局的数据使用位域通常不是一个好主意，除非您有（特定于编译器的）方法，例如`#pragma`s，可以这样做。

最好的方法可能是在没有位域的情况下实现这一点，即自己进行所需的按位运算。这很烦人，但比想办法解决这个问题要容易得多。此外，它与平台无关。

将标头定义为一个 16 位字的数组，然后您可以很容易地计算校验和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T16:42:54.707

C11 标准说：

> 实现可以分配任何大到足以容纳位域的可寻址存储单元。如果有足够的空间剩余，紧跟在结构中另一个位域之后的位域将被打包到同一单元的相邻位中。如果剩余空间不足，则将不适合的位域放入下一个单元还是与相邻单元重叠是实现定义的。单元内位域的分配顺序（高位到低位或低位到高位）是实现定义的。

我很确定这是不可取的，因为这意味着您的字段之间可能存在填充，并且您无法控制字段的顺序。不仅如此，您还可以在网络字节顺序方面随心所欲地实施。此外，想象一下如果 an`unsigned int`只有 16 位，并且您要求将 32 位位域放入其中：

> 指定位域宽度的表达式应是一个整数常量表达式，其非负值不超过在省略冒号和表达式时将指定的类型的对象的宽度。

我建议使用 s 数组`unsigned char`而不是结构体。这样，您就可以保证控制填充和网络字节顺序。从您希望结构的总大小开始。我假设您在 IP_PACKET_BITCOUNT 等常量中声明它：`typedef unsigned char ip_packet[(IP_PACKET_BITCOUNT / CHAR_BIT) + (IP_PACKET_BITCOUNT % CHAR_BIT > 0)];`

编写一个函数，`void set_bits(ip_packet p, size_t bitfield_offset, size_t bitfield_width, unsigned char *value) { ... }`该函数允许您将从位开始的`p[bitfield_offset / CHAR_BIT]`位设置`bitfield_offset % CHARBIT`为在值中找到的位，最长为`bitfield_width`位。这将是您任务中最复杂的部分。

然后，您可以为 VER_OFFSET 0 和 VER_WIDTH 4、HLEN_OFFSET 4 和 HLEN_WIDTH 4 等定义标识符，以使修改数组看起来不那么痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-23T16:24:50.483

尽管很久以前就提出了问题，但没有解释您的结果的答案。我会回答它，希望它对某人有用。

我将使用数据结构的前 16 位来说明这个错误。

请注意：此解释仅适用于您的处理器和编译器集。如果这些变化中的任何一个发生变化，行为可能会发生变化。

领域：

> ```
> unsigned int ver   : 4;
> unsigned int hlen  : 4;
> unsigned int stype : 8; 
> ```

分配给：

> ```
> dgram.ver   = 4;
> dgram.hlen  = 5;
> dgram.stype = 0; 
> ```

编译器开始分配从偏移量 0 开始的位域。这意味着数据结构的第一个字节存储在内存中：

```
Bit offset: 7     4     0
            -------------
            |  5  |  4  |
            ------------- 
```

赋值后的前 16 位如下所示：

```
Bit offset:     15   12    8     4     0
                -------------------------
                |  5  |  4  |  0  |  0  |
                -------------------------
Memory Address: 100          101 
```

您正在使用无符号 16 指针来取消引用内存地址 100。因此，地址 100 被视为 16 位数的 LSB。并且 101 被视为 16 位数字的 MSB。

如果您以十六进制打印 *ptr，您将看到：

```
*ptr = 0x0054 
```

您的循环在这个 16 位值上运行，因此您得到：

```
00000000 0101 0100
-------- ---- ----
   0       5    4 
```

**解决方案：** 将元素的顺序更改为

```
unsigned int hlen  : 4;
unsigned int ver   : 4;
unsigned int stype : 8; 
```

**并使用 unsigned char * 指针**来遍历和打印值。它应该工作。

请注意，正如其他人所说，这种行为是特定于平台和编译器的。如果有任何这些更改，您需要验证数据结构的内存布局是否正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-27T09:37:48.847

对于中国用户，我认为您可以参考[博客](https://tonybai.com/2013/05/21/talk-about-bitfield-in-c-again/)了解更多详细信息，非常好。

总之，由于字节序，有字节顺序和位顺序。位顺序是一个字节的每个位如何保存在内存中的顺序。在字节序问题的意义上，位顺序与字节顺序具有相同的规则。

对于您的图片，它是按照大端的网络顺序设计的。所以你的结构定义实际上是针对大端的。根据您的输出，您的 PC 是 little endian，因此您需要在使用时更改 struct 字段顺序。

显示每个位的方式是不正确的，因为当通过 char 获取时，位顺序已从机器顺序（在您的情况下为小端序）更改为我们人类使用的正常顺序。您可以根据参考的博客将其更改为以下内容。

```
void
dump_native_bits_storage_layout(unsigned char *p, int bytes_num)
{

    union flag_t {
        unsigned char c;
        struct base_flag_t {
            unsigned int p7:1,
                        p6:1,
                        p5:1,
                        p4:1,
                        p3:1,
                        p2:1,
                        p1:1,
                        p0:1;
        } base;
    } f;

    for (int i = 0; i < bytes_num; i++) {
        f.c = *(p + i);
        printf("%d%d%d%d %d%d%d%d ",
                        f.base.p7,
                        f.base.p6, 
                        f.base.p5, 
                        f.base.p4, 
                        f.base.p3,
                        f.base.p2, 
                        f.base.p1, 
                        f.base.p0);
    }
    printf("\n");
}

//prints 16 bits at a time
void print_dgram(struct ip_dgram dgram)
{
    unsigned char* ptr = (unsigned short int*)&dgram;
    int i,j;
    //print only 10 words
    for(i=0 ; i<10 ; i++)
    {
        dump_native_bits_storage_layout(ptr, 1);
        /* for(j=7 ; j>=0 ; j--)
        {
            if( (*ptr) & (1<<j) ) printf("1");
            else printf("0");
            if(j%8==0)printf(" ");
        }*/
        ptr++;
        //printf("\n");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-03T15:48:43.907

@放松

位域的一个典型用例是解释/模拟具有给定布局的字节码或 CPU 指令。“不要使用它，因为你无法控制它”是孩子们的答案。

@布鲁斯

对于 Intel/GCC，我看到了一个打包的 LITTLE ENDIAN 位布局，即`struct ip_dgram` 字段`ver`由位 0..3`hlen`表示，字段由位 4..7 表示......

为了操作的正确性，需要在运行时根据您的设计验证内存布局。

```
struct ModelIndicator
{
    int a:4;
    int b:4;
    int c:4;
};

union UModelIndicator
{
    ModelIndicator i;
    int v;
};

// test packed little endian
static bool verifyLayoutModel()
{
    UModelIndicator um;
    um.v = 0;
    um.i.a = 2; // 0..3
    um.i.b = 3; // 4..7
    um.i.c = 9; // 8..11
    return um.v = (9 << 8) + (3 << 4) + 2;
}

int main()
{
    if (!verifyLayoutModel())
    {
        std::cerr << "Invalid memory layout" << std::endl; 
        return -1;
    }
    // ...
} 
```

最早，当上述测试失败时，您需要考虑编译器编译指示或相应地调整您的结构，分别。验证布局模型（）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-04T22:49:31.397

是否依赖于编译器，这取决于您是要编写一个非常快的程序还是要一个可以与不同编译器一起使用的程序。要为 C 编写一个快速、紧凑的应用程序，请使用带有位域/的结构。如果您想要一个慢速的通用程序，请对其进行长代码。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-02-28T15:55:59.797

我同意 unwind 所说的。位字段取决于编译器。

如果您需要位按特定顺序排列，请将数据打包到指向字符数组的指针中。将缓冲区增加被打包元素的大小。打包下一个元素。

```
pack( char** buffer )
{
   if ( buffer & *buffer )
   {
     //pack ver
     //assign first 4 bits to 4\. 
     *((UInt4*) *buffer ) = 4;
     *buffer += sizeof(UInt4); 

     //assign next 4 bits to 5
     *((UInt4*) *buffer ) = 5;
     *buffer += sizeof(UInt4); 

     ... continue packing
   }
} 
```

# amazon-web-services - 在不丢失旧数据的情况下自动缩放 ec2 实例

> ID：15136428
> 
> 赞同：2
> 
> 时间：2013-02-28T13:11:05.407
> 
> 标签：amazon-web-services, autoscaling

最近我的网站转移到了亚马逊。

1.  我创建 EC2 实例。在 /var/www/http 文件夹中安装灯和设置 CodeIgnitor。结构
2.  Codeignitor 文件夹我的文件夹名称为“UPLOAD”。此文件夹用于上传图像和文件。

3.  我从 EC2 实例制作 AMI 图像。

4.  我已经设置了 Ec2 实例的自动缩放。

5.  当我的旧 ec2 实例失败时，会自动创建新实例。但是我从旧 ec2 实例上的文件夹“上传”中的所有数据都丢失了。

6.  我想将codeignitor中的“UPLOAD”文件夹与ec2实例分开。因此，每当创建新实例时，它都会获得 UPLOAD 文件夹及其内容而不会丢失。

我想分离这个上传文件夹。因此，当创建新实例时，它将获取此数据。这个怎么做。
感谢提前。

笔记 。我在 Amazon RDS 上使用过 MYSQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:17:35.307

You can use a shared [Elastic Block Storage](http://aws.amazon.com/ebs/) mounted directory.

If you manually configure your stack using the AWS Console, go to the EC2 Service in the console, then go to Elastic Block Storage -> Volumes -> Create Volume. And in your launch configuration you can bind to this storage device.

If you are using the command line tool as-create-launch-config to create your launch config, you need the argument

> --block-device-mapping "key1=value1,key2=value2..."

If you are using [Cloudformation](http://aws.amazon.com/cloudformation/) to provision your stack, refer to [this template](https://s3.amazonaws.com/cloudformation-templates-us-east-1/Gollum_Single_Instance_With_EBS_Volume.template) for guidance.

This assumes Codeignitor can be configured to state where its UPLOAD directory is.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:58:04.510

正如 Mike 所说，您可以使用**EBS**，但也可以使用[Amazon Simple Storage Service (S3)](http://aws.amazon.com/s3/)来存储图像。

这样，每当一个实例启动时，它就可以访问所有之前从 S3 上传的图像。当然，这意味着您必须更改上传代码，以使用 AWS API 而不是文件系统将图像存储到 S3。

# html - 如何以可编辑的形式在单击时调用函数（Twitter Bootstrap）

> ID：15136429
> 
> 赞同：0
> 
> 时间：2013-02-28T13:11:09.423
> 
> 标签：html, jquery-ui, twitter-bootstrap

我在 div（x 可编辑表单）中有一个输入文本字段。我需要在按钮单击时调用 Jquery 函数。怎么办。？

这是我的 div

```
<div class="input-append"><input type="text" id="WorkloadName" placeholder="enter your workload name" name=""></div> 
```

这是我用于 x 可编辑表单的 jquery 函数

```
jQuery.noConflict();
        (function($) { 
          $(function() {
          jQuery.fn.editable.defaults.mode = 'inline';
            jQuery('#WLElementName').editable();
});
})(jQuery); 
```

在单击文本字段后的 x-editable 表单中，将出现一个表单，我需要在单击提交按钮时调用该函数（带有刻度线的蓝色按钮，我无法在此处发布图像，因为我没有足够的声誉分数)

我尝试使用按钮的类名调用该函数，但它没有出现。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:42:18.087

在您的 .editable 声明中，添加一个字典参数

```
url: function(params) {} 
```

并在那里执行你的任务。

有关更多文档，请参阅[http://vitalets.github.com/x-editable/docs.html#editable](http://vitalets.github.com/x-editable/docs.html#editable)。

# jquery - JQuery 对话框全屏

> ID：15136430
> 
> 赞同：0
> 
> 时间：2013-02-28T13:11:17.737
> 
> 标签：jquery, dialog, fullscreen

是否有可能使 JQuery ui 对话框适合全屏，我的意思是在浏览器边界之外完全全屏？

如果是怎么办？

我正在考虑将文档正文的大小调整为全屏和对话窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:23:35.107

这是不可能的，因为 jQuery UI 对话框基本上是 HTML 元素，其样式看起来像一个窗口。您要求的内容需要在呈现页面的浏览器实例之外呈现 HTML，这是不可能的。

你所能做的就是调整浏览器窗口的大小，并使 jQuery 对话框适合整个页面。在[这个答案](https://stackoverflow.com/questions/1125084/how-to-make-in-javascript-full-screen-windows-stretching-all-over-the-screen)中，您可以找到如何调整浏览器的大小。甚至有一种可能的解决方案可以强制某些浏览器全屏显示。

# javascript - 为什么 jQuery 在显示/隐藏元素时会删除 Margin？

> ID：15136431
> 
> 赞同：0
> 
> 时间：2013-02-28T13:11:18.713
> 
> 标签：javascript, jquery, html, margin

我有一个具有顶部边距和边框的元素。当我调用`$(element).show()`它时，它不使用元素的边距并且看起来不太好（在[原始小提琴](http://jsfiddle.net/ahmadalli/SYaZh/1/)中如果单击输入文本之后的 div，则幻灯片动画从文本输入的顶部开始，您会看到黑色行通过它，它并不漂亮！我想要动画从文本输入的底部开始。）

[这](http://jsfiddle.net/ahmadalli/SYaZh/4/)是我在 jsFiddle 中的测试版。但[原件](http://jsfiddle.net/ahmadalli/SYaZh/1/)不同（我删除了一个元素，因为找不到想要的元素！）

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:22:54.207

我不能 100% 理解您想要实现的目标，但是您的 div #AdvancedPanel 有来自 div #urlpanel 的 margin-top 35px。如果你给 div #AdvancedPanel 一些高度，那么它看起来不错。你会精确你真正想要的吗？

# maven - Maven SAR打包：生成几个sar文件

> ID：15136432
> 
> 赞同：1
> 
> 时间：2013-02-28T13:11:19.220
> 
> 标签：maven, maven-plugin, sar

我是 maven 新手，我想知道是否可以让 Maven 使用 jboss-packaging-maven-plugin 在单个构建中打包多个 SAR。

我在不同的文件夹中有不同的 jboss-service.xml 文件，但我不知道如何配置插件来生成这些 .sar 文件。

Jboss-service.xml 文件位于 src/main/resources/META-INF- 下：

> 源/
> 
> ```
>  |__main/
>          |__resources/
>                       |
>                       |_META-INF-TEST/jboss-service.xml
>                       |
>                       |_META-INF-PROD/jboss-service.xml
>                       |
>                       |_META-INF-LOCAL/jboss-service.xml 
> ```

期望的结果应该是：

> -> myproject-TEST.sar
> 
> -> myproject-PROD.sar
> 
> -> myproject-LOCAL.sar

提前致谢！

# python - 如何在 python 中使用 os.path.getsize() 和 *？

> ID：15136435
> 
> 赞同：1
> 
> 时间：2013-02-28T13:11:26.890
> 
> 标签：python

有一个目录： /home/zurelsoft/files 文件名`.sachitadhFebruary28,2013,18:45PMsolexa.zip.M9mw9e`

有很多这样的文件：

```
.sachitadhFebruary28,2013,18:45PMsolexa.zip.M
.sachitadhFebruary28,2013,18:45PMsolexa.zip.KK 
```

它们存储在数据库中。

```
 current_file = Queue.objects.all()
      j = [i.file_session for i in current_file]
        k = [str(i) for i in j]
        new_file_size = [int(os.path.getsize(i+'*')) for i in k] 
```

我正在尝试像这样获取 filsize，但我收到 No such directory 错误。

我发现`glob.glob()`用过，但没有用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:19:17.430

`getsize`只需要*一个*文件名 - 你给它的任何东西都被认为是一个文件名。为了获得你想要的扩展，你确实想使用`glob.glob`- 大概，它没有工作，因为你做了类似的事情：

```
os.path.getsize(glob.glob('/home/zurelsoft/*')) 
```

这总是会出现异常，因为`glob`它不会返回`getsize`预期的确切文件名 - 它返回所有匹配项的列表。遍历该列表以获取每个单独的列表 - 例如，

```
for filename in glob.glob('/home/zurelsoft/*'):
   print(os.path.getsize(filename)) 
```

将打印主目录中每个文件的大小。

# python - 使用 Python 从 Web 文章中查找结构

> ID：15136436
> 
> 赞同：0
> 
> 时间：2013-02-28T13:11:27.763
> 
> 标签：python

我正在寻找一些 Python 工具，它可以帮助我从文章网站（例如[http://www.bbc.co.uk/](http://www.bbc.co.uk/) ）确定内容结构。我使用样板删除库 - Boilerpipe 来清除网页上不需要的东西（横幅、链接、图片等）。现在当我只有相关内容时，我想自动确定什么字符串是标题，作者，日期，文章更新日期，文章本身是什么。问题是，我不仅要将它用于透明文章页面，其中大部分信息都包含在 HTML 标记中，例如`<title>Title</title>`. 我希望能够从`<div>28.11.2011<p>John Cusack on Syria conflict</div>`. 有什么工具可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:44:54.190

刮痧不是为了那种东西吗？[http://scrapy.org/](http://scrapy.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T23:49:56.203

您可以使用以下“工具”轻松从文章中获取内容：

1.  scrapy（推荐，但有更大的学习曲线）
2.  报纸（立即为您提供标题、作者、文本、图像、视频等）
3.  goose-extractor （就像报纸）

# powershell - 跟踪目录中复制的文件

> ID：15136438
> 
> 赞同：1
> 
> 时间：2013-02-28T13:11:30.073
> 
> 标签：powershell

我正在尝试编写一个脚本，该脚本将跟踪何时将某些内容复制到目录“A”，然后将其复制到我们拥有的用于将文件移动到专用网络的文件夹中。我将该目录称为“b”。在另一端，我有一个脚本，它将“b”中的这些文件复制到一个文件夹，该文件夹镜像公共网络上的另一个文件夹，文件夹“c”。我只想获取最近复制到文件夹“a”中的那些文件。问题是文件中没有跟踪复制日期的属性。所以我想我会使用一个文本文件来跟踪它。我在下面写了这个脚本，但它不起作用。我认为这是因为当我从文本文件中提取信息时它不再是一个对象？无论如何，您可以提供的任何帮助将不胜感激。

```
$binaries = "\\network\home\binaries" 
$owt = "\\server1\owt\binaries"

function Get-Directories ($path)
{
    $PathLength = $path.length
        Get-ChildItem $path -Recurse | % {
        Add-Member -InputObject $_ -MemberType NoteProperty -Name RelativePath -Value $_.FullName.substring($PathLength+1)
    $_
}
}
$A= [IO.File]::ReadAllText("\\network\home\binaries\log\log.txt")
$B= Get-Directories $binaries 

#$stream = [System.IO.StreamWriter] "\\network\home\binaries\log\log.txt" | %   {$stream.WriteLine($b)}
#$stream.close() 
Compare-Object $A $B -Property RelativePath, Name, Length |
Sort RelativePath, Name, Length -desc | % {
if ($file -ne $_.RelativePath) { $_ } } | 
Where-Object {$_.SideIndicator -eq "=>"} | 
ForEach-Object {
    $file = $_.RelativePath
    Echo F | xcopy "$binaries\$file" "$owt\$file" /S
}
$c= Get-Directories $binaries | % { $c >> "\\network\home\binaries\log\log.txt"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:25:48.457

安排运行 robocopy 的 shell 脚本可能更容易。Robocopy 具有似乎更适合您的场景的各种便捷功能（镜像、带宽限制、错误重启等）。

账单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:55:04.280

[您可以使用FileSystemWatcher](http://gallery.technet.microsoft.com/scriptcenter/Powershell-FileSystemWatche-dfd7084b)编写脚本，然后使用[srvany](http://gfdsa.gfdsa.org/2009/11/start-powershell-script-as-service/)将其作为服务启动。

# database-design - 库存系统

> ID：15136444
> 
> 赞同：0
> 
> 时间：2013-02-28T13:12:07.710
> 
> 标签：database-design

我正在尝试开发一个**在线库存系统**。我有下表：

```
CREATE TABLE `product` (
  `ProductId` 
  `SubCategoryTypeId` 
  `MerchantId` 
  `ProductName`
  `MRP` 
  `Quantity` 
  `ProductCode` 
  `ProductSKUCode` 
  `BarCode`
  `Description_short`
  `Description_long`
  `ThumbnailImage`
  `ProductImage`
  `OurPrice`
  `MinBargainPrice`
  `Brand`
  `AirCost`
  `SurfaceCost`
  `ShippingAirTime`
  `ShippingSurfaceTime`
  `ColorCode`
  `DiscountPercent`
  `IsApproved`
  `IsActive`
  `HasSize`
  `isOnlineProduct`
  `isOfflineProduct`
  `ShippingCategory`
  `ProductExpiryDays`
  `RelatedVideo`
  `TechnicalSpecification`
  `CreatedDateTime`
  `ModifiedDateTime`
  `CreatedBy`
  `ModifiedBy`
  `IsCod`
  `HasOffer`
  `OfferText`
  `IsNewArrival`
  `HasColor`
  `NoOfRecommendation`
  `IsPremium` tinyint(1) 
  `IsImported`
  PRIMARY KEY (`ProductId`),
  KEY `Product_Category_Rel` (`SubCategoryTypeId`),
  KEY `Product_Merchant_Rel` (`MerchantId`)
) ENGINE=InnoDB AUTO_INCREMENT=2093 DEFAULT CHARSET=utf8 COMMENT='This table contains Product data.'; 
```

使用此表，我可以添加大部分产品，但如何优化此表以便也可以添加书籍。我在添加书籍时遇到问题，因为它有作者、出版商等。任何人都可以建议我该怎么做以便我也可以添加书籍吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:20:55.117

我认为您可以尝试使用规范化规则将您的表格拆分为更多表格。尝试了解如何应用关系。例如，您可以将数据库中的表拆分为具有产品名称的表，而其他表可用于将产品属性插入为 IsNewArrival。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:43:48.357

我使用泛化/专业化。例如，您有一个包含所有公共数据的产品表......但还有其他表用于更多具体数据（如您的书籍）。一个更好的例子，假设您销售书籍、电影和其他东西，如钢笔、铅笔、打印纸等（图书馆用品）。好吧，您可以拥有一个产品表，其中包含 ProductID(pk)、名称 (varchar)、描述 (varchar)。您也可以拥有 BookID （pk）、AuthorID（FK 到 Author 表）、ISBN（varchar）、EditorialID（FK 到编辑表）的 Books 表......但您也可以将 BookID FK 设置为 Products.ProductID 所以，当您插入books 表中的一本书首先在 Products 表中插入一个 Product，该 ID 是 Books.bookID ...（与 movies 表相同）

希望能理解我。

干杯!

# vb.net - Visual Studio 中的 msgbox 按钮类型

> ID：15136446
> 
> 赞同：0
> 
> 时间：2013-02-28T13:12:16.457
> 
> 标签：vb.net, visual-studio-2010, visual-studio

如何设置具有“确定”和“取消”等按钮的消息框？我们也可以为按钮命名我们自己的名字吗？我们可以为这些按钮编写源代码吗，比如

```
ok.click, form1.show() and if cancel.click form5.show()
msgbox() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:55:52.333

这应该有效：

```
If (MsgBox("Your Text", MsgBoxStyle.OkCancel, "MessageBox Title") = MsgBoxResult.Ok) Then
        Form1.Show()
    Else
        form5.show()
    End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:52:49.090

尝试这个：

```
MessageBox.Show("put your text here", "here the title of you message", MessageBoxButtons.OKCancel, MessageBoxIcon.Hand) 
```

在第二个逗号 [,] 之后，您可以输入按钮的类型，最后您可以输入您认为最适合您的消息框的图标

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:03:03.067

这是一个简单的消息框：

```
If MessageBox.Show("some msg", "caption", MessageBoxButtons.OKCancel) = DialogResult.Cancel Then
    ' you cancel it, so i will show another message box
EndIf 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:22:42.517

您可以使用[MessageBoxButtons](http://msdn.microsoft.com/en-us/library/system.windows.forms.messageboxbuttons.aspx)枚举在消息框上指定不同类型的按钮，并在单击按钮后使用[DialogResult](http://msdn.microsoft.com/en-us/library/system.windows.forms.dialogresult.aspx)为每种类型的消息框按钮指定不同的操作。或者[创建自己的 MessageBox](https://stackoverflow.com/questions/7847620/win32-custom-message-box)

# mysql - 多个条件的 SQL 顺序

> ID：15136448
> 
> 赞同：0
> 
> 时间：2013-02-28T13:12:23.347
> 
> 标签：mysql, sql, sql-server

我有一个带有“名称”、“状态”-失败或成功、“计数”-从 1 到 100 的表。我想以这样的方式对其进行排序，即只有“失败”的名称应该一起显示在顶部，然后是相同的名称失败和成功在一起，然后只有成功的名字在一起。我们可以用 sql 查询语言来做吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:25:10.800

好的，这应该适用于大多数 RDBMS：

```
SELECT A.*
FROM YourTable A
INNER JOIN (SELECT  name, 
                    COUNT(DISTINCT status) StatusCount,
                    MIN(status) MinStatus
            FROM YourTable
            GROUP BY name) B
    ON A.name = B.name
ORDER BY CASE WHEN StatusCount = 1 AND MinStatus = 'fail' THEN 1
         WHEN StatusCount = 2 THEN 2 
         ELSE 3 END, A.name, A.status 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:25:16.327

如果是 MySQL

```
select *, 0 as o
from t
union all
select *, 1 as o
from t
order by
    o = 1 and status != 'fail', o != 1, status = fail 
```

# ios - 横向/纵向图像分割

> ID：15136449
> 
> 赞同：0
> 
> 时间：2013-02-28T13:12:24.573
> 
> 标签：ios, ipad, landscape, landscape-portrait

我有图像数组，我需要在`Landscape`and`portrait`模式上显示。我所做的是我创建了一个图像数组并显示在 scrollView 上一次看到一个 ..但问题是当我移动时或 `Landscape to portrait`反之亦然图像被分割...视图带有上一张图像和下一张图像的一半..这不会每次都发生...我不知道为什么图像会分裂而不是完全对半...有时会分成不同的部分尺寸..

```
#define portrait_width1 600.0
#define portrait_height1 600.0
#define landscape_width1 800.0
#define landscape_height1 445.0

 CGFloat kScrollObjHeight_por1 = portrait_height1;
CGFloat kScrollObjWidth_por1    = portrait_width1;

- (void)viewDidLoad{
scrollView1.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scrollView1.clipsToBounds = YES;
    // default is NO, we want to restrict drawing within our scrollview
    scrollView1.scrollEnabled = YES;
    scrollView1.delegate = self;
    scrollView1.pagingEnabled = YES;
    [scrollView1 setShowsHorizontalScrollIndicator:NO];
    [scrollView1 setShowsVerticalScrollIndicator:NO];
   kNumImages=content.count;
      for (i = 1; i <= content.count; i++)
    {

        NSArray *photos = [NSArray arrayWithObjects:

                            [UIImage imageNamed:@"c.jpg"],
                            [UIImage imageNamed:@"photo2m.jpg"],[UIImage imageNamed:@"photo1m.jpg"],[UIImage imageNamed:@"photo4m.jpg"],[UIImage imageNamed:@"photo2l.jpg"],[UIImage imageNamed:@"photo4l.jpg"],
                            nil] ;

        UIImage *image = [photos objectAtIndex:i];

        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

        CGRect rect = imageView.frame;
        rect.size.height = kScrollObjHeight_por1;
        rect.size.width = kScrollObjWidth_por1;
        rect.origin.y=scrollView1.frame.origin.y;
        imageView.frame = rect;
        imageView.tag = i;

        [scrollArray addObject:imageView];
        [scrollView1 addSubview:imageView];
        [imageNameArray addObject:[[content objectAtIndex:i-1] _image_url]];

    }

    [self layoutScrollImages];
}
}

 -(void)layoutScrollImages
 {
 @try {
    UIImageView *view = nil;
    NSArray *subviews = [scrollView1 subviews];

        // reposition all image subviews in a horizontal serial fashion
    CGFloat curXLoc = 0;
    CGRect frame;
    for (view in subviews)
    {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
            frame = view.frame;
            frame.origin = CGPointMake(curXLoc, 0);
            view.frame = frame;

            curXLoc += (kScrollObjWidth_por1);
        }
    }

        // set the content size so it can be scrollable
    [scrollView1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth_por1), kScrollObjHeight_por1)];
        // scrollView.contentSize = CGSizeMake(scrollView.contentSize.width,scrollView.frame.size.height);
    NSLog(@"%d",[imageNameArray indexOfObject:Images]);
    currentImage=[scrollArray objectAtIndex:[imageNameArray indexOfObject:Images]];

    [scrollView1 scrollRectToVisible:currentImage.frame animated:YES];
}
@catch (NSException *exception) {
    NSLog(@"ImageFullScreenViewController - layoutScrollImages Exception Name = %@ Exception Reason = %@",[exception name],[exception reason]);
}

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return YES;
}

 - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

@try {
    if ([UIDevice currentDevice].orientation== UIInterfaceOrientationLandscapeLeft || [UIDevice currentDevice].orientation  == UIInterfaceOrientationLandscapeRight)
    {
        if (!landscapeImgSCRf) {
            CGFloat curXLoc = 0;
            CGRect frame;
            for (UIView *subview in scrollView1.subviews)
            {

                if ([subview isKindOfClass:[UIImageView class]])
                {
                    if (!rightside2f) {
                        kScrollObjWidth_por1 = landscape_width1;
                        kScrollObjHeight_por1= landscape_height1;
                        curXLoc = subview.frame.origin.x;
                        rightside2f=YES;

                    }
                    frame.origin = CGPointMake(curXLoc, 0);
                    [subview setFrame: CGRectMake(curXLoc, subview.frame.origin.y, kScrollObjWidth_por1, kScrollObjHeight_por1)];
                    curXLoc += (kScrollObjWidth_por1);
                    scrollView1.frame=CGRectMake(scrollView1.frame.origin.x, scrollView1.frame.origin.y, scrollView1.frame.size.width, scrollView1.frame.size.height);

                }

            }

            [scrollView1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth_por1), kScrollObjHeight_por1)];
            landscapeImgSCRf=YES;
        }

    }else
    {
        if (landscapeImgSCRf) {
            CGFloat curXLoc = 0;
            CGRect frame;
            for (UIView *subview in scrollView1.subviews)
            {

                if ([subview isKindOfClass:[UIImageView class]])
                {
                    if (rightside2f) {
                        kScrollObjWidth_por1 = portrait_width1;
                        kScrollObjHeight_por1= portrait_height1;
                        curXLoc = subview.frame.origin.x;
                        rightside2f=NO;

                    }
                    frame.origin = CGPointMake(curXLoc, 0);
                    [subview setFrame: CGRectMake(curXLoc, subview.frame.origin.y, kScrollObjWidth_por1, kScrollObjHeight_por1)];
                    curXLoc += (kScrollObjWidth_por1);
                    scrollView1.frame=CGRectMake(scrollView1.frame.origin.x, scrollView1.frame.origin.y, scrollView1.frame.size.width, scrollView1.frame.size.height);
                }

            }
            landscapeImgSCRf=NO;
            [scrollView1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth_por1), kScrollObjHeight_por1)];

        }

    }

}
@catch (NSException *exception) {
    NSLog(@"ImageFullScreenViewController - willRotateToInterfaceOrientation Exception Name = %@ Exception Reason = %@",[exception name],[exception reason]);
}

 } 
```

[检查图像](http://i.imgur.com/SdD04TO.png)

# php - 谷歌地图的问题

> ID：15136451
> 
> 赞同：2
> 
> 时间：2013-02-28T13:12:26.390
> 
> 标签：php, google-maps, http-status-code-403, failed-to-load-viewstate

我的数据库中记录了与客户相对应的任何地址。

我遇到的麻烦是关于包含 googlemap 的。

我有以下将地址转换为极坐标的代码。

```
function getCoordonnees($adresse) {
    $url = "http://maps.google.com/maps/geo?q=" . urlencode($adresse) .
            "&output=csv";
    $csv = file($url);
    $donnees = preg_split("#,#", $csv[0]);
    return $donnees[2] . "," . $donnees[3];
} 
```

以下代码返回给我类似的东西

```
48.9381235,2.1329083 
```

当我使用谷歌地图时，我有一张这样的照片：

![在此处输入图像描述](../Images/ec89dcd8536cc23d0bdb02d46d87e57a.png)

来自这个网址（由我的函数生成

```
http://maps.google.com/staticmap?center=48.9381235,2.1329083&zoom=15&size=300x300&maptype=mobile&markers=48.9381235,2.1329083,red&key=***********************KEY*GOOGLEMAP************&sensor=false 
```

当我尝试在我的网站上显示该图片时，出现错误，

```
<img src="http://maps.google.com/staticmap?center=<?php echo $polar; ?>&zoom=15&size=300x300&maptype=mobile&markers=<?php echo $polar; ?>,red&key=***********************KEY*GOOGLEMAP************&sensor=false" style="border:double 2px" /> 
```

极地在哪里`$polar`。

在我的网站中包含此代码会返回以下错误：

```
Failed to load resource: the server responded with a status of 403 (Forbidden) 
```

我不知道这个错误是从哪里来的。实际上，我认为它不是来自谷歌地图，因为在 stackoverflow 上会显示图片。

所以我想问是否有人知道这个错误在哪里？是来自服务器配置还是其他？我一直在寻找它，因为很多次没有答案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:48:28.447

我遇到了同样的问题，我决定打开 Google Maps API v2，我已经打开了 Google Maps API v3，但在搞乱许多设置之前，我将它们都打开了。现在它可以工作了

# python - 在 python 中使用 dxfgrabber 库解析 dxf 文件

> ID：15136456
> 
> 赞同：3
> 
> 时间：2013-02-28T13:12:40.007
> 
> 标签：python, parsing, dxf

我想用 dxfgrabber 库解析 dxf 文件以获取对象（线、点、文本等）。

代码如下

```
#!/usr/bin/env python
import dxfgrabber

dxf = dxfgrabber.readfile("1.dxf")
print ("DXF version : {}".format(dxf.dxfversion)) 
```

但它会出现一些错误......

```
Traceback (most recent call last):
  File "parsing.py", line 6, in <module>
    dxf = dxfgrabber.readfile("1.dxf")
  File "/usr/local/lib/python2.7/dist-packages/dxfgrabber/__init__.py", line 43, in readfile
    with io.open(filename, encoding=get_encoding()) as fp:
  File "/usr/local/lib/python2.7/dist-packages/dxfgrabber/__init__.py", line 39, in get_encoding
    info = dxfinfo(fp)
  File "/usr/local/lib/python2.7/dist-packages/dxfgrabber/tags.py", line 96, in dxfinfo
    tag = next(tagreader)
  File "/usr/local/lib/python2.7/dist-packages/dxfgrabber/tags.py", line 52, in __next__
    return next_tag()
  File "/usr/local/lib/python2.7/dist-packages/dxfgrabber/tags.py", line 45, in next_tag
    raise StopIteration()
StopIteration 
```

简单的 1.dxf 文件只包含行。

文件链接是[https://docs.google.com/file/d/0BySHG7k180kETlQ2UnRxQmxoUk0/edit?usp=sharing](https://docs.google.com/file/d/0BySHG7k180kETlQ2UnRxQmxoUk0/edit?usp=sharing)

这是 dxfgrabber 库的错误吗？有没有什么好的库可以在 python 中解析 dxf 文件？

我正在使用 dxfgrabber 0.4 和 python 2.7.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T06:21:55.847

我联系了开发人员，他说在当前版本 0.5.1 中制作以下第 49 行`__init__.py`：`with io.open(filename) as fp:`. 然后它起作用了（`io`丢失了）。他将很快在 0.5.2 版本中正式进行此更正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T15:13:06.243

您只能阅读以 AutoCAD 格式制作的 dxf！试试“DraftSight”，它是一个免费的 AutoCAD 克隆，可以很好地导出 dxf。试试 dxf R12 格式。这将解决您的问题。

# php - PayPal IPN 安全性已验证

> ID：15136459
> 
> 赞同：3
> 
> 时间：2013-02-28T13:12:42.183
> 
> 标签：php, https, paypal, payment, paypal-ipn

有 PayPal IPN PHP 示例代码[https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

有人可以告诉我它是如何保护的，因为我不明白吗？

示例：我有一家网店。我没有https。

1.  [在我们的http://my-magazine.com/process_pp.php](http://my-magazine.com/process_pp.php)上接收来自 PayPal 的数据 此数据未加密，因为我的网站位于 http 上。我对吗？所以（如果它没有加密）一些黑客可以改变它。
2.  我们发送一个 https 请求来验证我们在贝宝上的付款。
3.  PayPal 使用 http（不是 https）回答 INVALID，因此黑客可以在 VERIFIED 上再次更改它。黑客获得利润。

请告诉我，我的错误在哪里。我很困惑，因为其他支付系统使用`SecretKey`，然后你应该验证他们发送的哈希。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:31:51.943

您的错误在第 3 步；您正在通过 HTTPS 将数据发送回 PayPal（准确地说是发送到[https://www.paypal.com/cgi-bin/webscr?cmd=_notify-validate](https://www.paypal.com/cgi-bin/webscr?cmd=_notify-validate)），并且 PayPal 会发送 HTTP 响应（SSL 安全) 与 INVALID/VERIFIED 响应的连接。
只要您确保验证提供给您的 SSL 证书，*如果*您收到“已验证”响应，您就可以放心数据是真实的。

顺便提一下，默认的 IPN (PHP) 示例代码强制进行证书和 cn 验证；

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); 
```

只需确保在使用时指定了一个您信任的 CA 捆绑包，您就可以开始使用了。另请参阅[禁用 CURLOPT_SSL_VERIFYHOST (libcurl/openssl) 的安全后果](https://stackoverflow.com/questions/13740933/security-consequences-of-disabling-curlopt-ssl-verifyhost-libcurl-openssl)

# lucene - Hibernate 搜索查询过滤器性能影响与 ad-hoc 查询

> ID：15136465
> 
> 赞同：0
> 
> 时间：2013-02-28T13:12:52.903
> 
> 标签：lucene, hibernate-search

我有一个重复的标准（过滤掉用户无权访问的实体），用于几个休眠搜索查询。

目前，标准由函数生成，并在需要的所有查询中手动注入。

我很想把它变成一个休眠搜索查询过滤器。

我想知道这会对性能产生什么影响。即使用过滤器是否会（很多）比运行临时查询慢？

会有很多用户，很多读取，而不是很多写入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:25:32.720

Hibernate Search 中的过滤器方法非常快，并且基于 Lucene 过滤器。限制每个用户的结果似乎非常适合过滤器。通常，过滤器应该比查询执行得更好，特别是如果您使用缓存过滤器。我肯定会尝试过滤方法。如果您设置了一些性能工具，您还可以轻松衡量更改的影响。

# android - Android：从实际顶部获取 ListView 的位置

> ID：15136471
> 
> 赞同：0
> 
> 时间：2013-02-28T13:13:04.337
> 
> 标签：android, android-layout

我`List.get(position)`用来获取 a 的位置`ListView`。但这会返回当前滚动边界顶部的位置。我的 ListView 有 50 个项目，但您一次只能看到 10 个。因此，当您完全向下滚动并调用 List.get(position) 时，您会得到 10 的列表项，而不是 50。如果您单击位于中间的项目，`ListView`您会得到 5 而不是 25 等。

如何`ListView`从. **_** _ `ListView`至少是最简单的方法。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
View view = null;

if (convertView == null) {
  LayoutInflater inflator = context.getLayoutInflater();      
  view = inflator.inflate(R.layout.addtowatchlist, null);
  final ViewHolder viewHolder = new ViewHolder();
  viewHolder.text = (TextView) view.findViewById(R.id.label);      
  viewHolder.addbutton = (Button) view.findViewById(R.id.button);
  viewHolder.addbutton
      .setOnClickListener(new Button.OnClickListener() {
        @Override
        public void onClick(View buttonview) {
            //I need the correct ACTUAL position here, not the VISABLE position                 
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(list.get(position).getUrl()));
            context.startActivity(browserIntent);              
            list.get(position).getUrl();                
            Model element = (Model) viewHolder.addbutton
                      .getTag();
                  element.setSelected(true);
        }
      });
  view.setTag(viewHolder);
  viewHolder.addbutton.setTag(list.get(position));
} else {
  view = convertView;
  ((ViewHolder) view.getTag()).addbutton.setTag(list.get(position));
}
ViewHolder holder = (ViewHolder) view.getTag();
holder.text.setText(list.get(position).getName());      
return view; 
```

}

编辑：我认为这与使用错误的 viewHolder 调用 onClickListener 有关，但我无法弄清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:21:23.850

该变量`position`已经是您的 ListView 中条目的位置。
我不知道你的列表里面有什么。
这是 BaseAdapter 如何工作以及如何正确构建 getView 的教程：http: [//thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/](http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:09:44.640

经过多次痛苦的尝试，我自己修复了它。缺乏了解 ListView 优化的运作方式以及`convertView`参数的作用......

我将我`onClickListener`的块移到块外`if (convertView == null)`并在 getView 返回其视图之前将其放置。这样拍摄的位置不是回收的可见位置，而是从顶部一直到实际位置。

```
@Override
  public View getView(final int position, View convertView, ViewGroup parent) {
    View view = null;
    final AiringModel am = list.get(position);      
    am.setRealPosition(position, list.get(position).getUrl());    
    LayoutInflater inflator = context.getLayoutInflater();      
    view = inflator.inflate(R.layout.addtowatchlist, null);
    final ViewHolder viewHolder = new ViewHolder();
    viewHolder.text = (TextView) view.findViewById(R.id.label);
    if (convertView == null) {
        view.setTag(viewHolder);     
    } else {
      view = convertView;
      ((ViewHolder)view.getTag()).addbutton.setTag(list.get(position));      
    }
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(list.get(position).getName());       
    viewHolder.addbutton = (Button) view.findViewById(R.id.check);    
    viewHolder.addbutton.setTag((Integer)position);    
    viewHolder.addbutton
    .setOnClickListener(new Button.OnClickListener() {
        @Override
        public void onClick(View buttonview) {
            // TODO Auto-generated method stub                  
            int realPosition = am.getRealPosition();
            String realName = am.getRealName();
            Log.d("Pair created!", "Clicked button with position: "+ realPosition + " For item name: " + realName);
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(list.get(realPosition).getUrl()));
            context.startActivity(browserIntent);           
        }
    });
    return view;
  } 
```

# android - 在获得任何数据之前设置分配变量

> ID：15136473
> 
> 赞同：0
> 
> 时间：2013-02-28T13:13:05.177
> 
> 标签：android, allocation, mesh, renderscript

翻转扔草动态壁纸后，我找到了这段代码——它创建了草叶网格并设置了索引：

```
private void createMesh() {
    mVertexBuffer = new ScriptField_Vertex(mRS, mVerticies * 2);

    final Mesh.AllocationBuilder meshBuilder = new Mesh.AllocationBuilder(mRS);
    meshBuilder.addVertexAllocation(mVertexBuffer.getAllocation());

    mBladesIndicies = Allocation.createSized(mRS, Element.U16(mRS), mIndicies);
    meshBuilder.addIndexSetAllocation(mBladesIndicies, Primitive.TRIANGLE);

    mBladesMesh = meshBuilder.create();

    short[] idx = new short[mIndicies];
    int idxIdx = 0;
    int vtxIdx = 0;
    for (int i = 0; i < mBladeSizes.length; i++) {
        for (int ct = 0; ct < mBladeSizes[i]; ct ++) {
            idx[idxIdx + 0] = (short)(vtxIdx + 0);
            idx[idxIdx + 1] = (short)(vtxIdx + 1);
            idx[idxIdx + 2] = (short)(vtxIdx + 2);
            idx[idxIdx + 3] = (short)(vtxIdx + 1);
            idx[idxIdx + 4] = (short)(vtxIdx + 3);
            idx[idxIdx + 5] = (short)(vtxIdx + 2);
            idxIdx += 6;
            vtxIdx += 2;
        }
        vtxIdx += 2;
    }

    mBladesIndicies.copyFrom(idx);
} 
```

`meshBuilder.addIndexSetAllocation(mBladesIndicies, Primitive.TRIANGLE);`我对这两条线感到困惑：`mBladesIndicies.copyFrom(idx);` 为什么他们在变量实际获取他的数据`mBladesIndicies`之前将其发送给网格构建器并创建网格`mBladesIndicies``mBladesIndicies.copyFrom(idx);`

简而言之 -为什么`meshBuilder.addIndexSetAllocation(mBladesIndicies, Primitive.TRIANGLE);`来`mBladesMesh = meshBuilder.create();`之前**？** `mBladesIndicies.copyFrom(idx);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:12:02.507

分配通过引用而不是副本连接到网格。因此，添加数据的顺序无关紧要。

Mesh.Builder 在创建后会保留分配引用。

# c# - windows phone 8 中带有图像的辅助平铺动画

> ID：15136475
> 
> 赞同：0
> 
> 时间：2013-02-28T13:13:25.223
> 
> 标签：c#, windows-phone-8

我可以通过执行以下操作在 Windows Phone 8 应用程序中创建辅助磁贴：

```
StandardTileData NewTileData = new StandardTileData
{
   BackgroundImage =new Uri(@"Shared/ShellContent/Snow.png", UriKind.Relative),
   Title = ((CheckBox)sender).Content.ToString(),
   Count = 1,
   BackBackgroundImage =new Uri(@"Shared/ShellContent/Snow.png", UriKind.Relative),
   BackTitle = "Back Title",
   BackContent = "Back Content"
}; 
```

我可以为背景图像应用动画吗？我想在一段时间内在辅助磁贴中显示两个一个接一个垂直滚动的图像。可能吗？如果是这样，谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:16:16.823

你不能。

如果您希望它显示这样的图片，请查看循环图块。 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207036(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207036(v=vs.105).aspx)

# c# - Umbraco 4.11.3：客户端表单上传（多部分/表单数据）给出 404

> ID：15136477
> 
> 赞同：2
> 
> 时间：2013-02-28T13:13:25.993
> 
> 标签：c#, html, upload, http-status-code-404, umbraco

我正在使用带有无扩展网址的 umbraco。我在我的一个母版页（en/test）中插入了一段简单的 HTML：

```
<form method="post" enctype="multipart/form-data">
  <input type="submit" />
</form> 
```

当我按下提交按钮时，我得到一个 404。路径完全相同，应该存在。当我删除 enctype 部分时，提交正常。

我不知道如何解决这个问题，但我敢打赌这与重写有关。

我也尝试了以下但没有成功：

```
<form method="post" enctype="multipart/form-data" action="/en/test">
  <input type="submit" />
</form>

<form method="post" enctype="multipart/form-data" action="/en/test.aspx">
  <input type="submit" />
</form> 
```

我可以使用 enctype 属性的唯一页面是在实际主页上。我想这与 physic default.aspx 存在这一事实有关。

=============== 更新 =================

页面中只有一个表单元素，即我插入的那个。所以一个“整页”的表单元素肯定不是这样的。其次，是的，该表格理论上是回发给自己的。我还尝试了一个空的操作标签，加上一个带有建议的完整 URL 的操作标签，结果相同。

当我使用以下场景时：

*   无动作属性
*   动作=""
*   action="{相对路径}"
*   action="{绝对路径}"

我最终得到与我触发提交的 URL 完全相同的 URL。但它是 404。当我在地址栏中按回车键时，没有 404，我回到了具有相同 URL 的原始页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:40:11.387

我应该问的第一个问题是，当您浏览到“/en/test”或“/en/test.aspx”时，您会得到 404。要让表单回发给自己，请尝试空操作，例如 action="" 或将当前 url 写入操作属性。还有一个问题，你的页面周围是否有另一种带有 runat="server" 属性的表单，因为如果你有，你最终会得到嵌套的表单，这也会给你带来问题。

在一个侧节点上，由于 4.10 中引入了一个错误，我强烈建议将您的安装升级到至少 v4.11.4。详情请看以下...

**在取消发布子节点后尝试发布根节点（父节点）会导致 YSOD：http:** [//issues.umbraco.org/issue/U4-1491](http://issues.umbraco.org/issue/U4-1491)

**路径修复** [http://our.umbraco.org/projects/developer-tools/path-fixup](http://our.umbraco.org/projects/developer-tools/path-fixup)

# java - 我什至从哪里开始这个 android 项目？

> ID：15136478
> 
> 赞同：0
> 
> 时间：2013-02-28T13:13:37.730
> 
> 标签：java, android, html, sqlite

我知道有关于 sql 数据库的问题，诸如此类。我一直在该网站上搜索一些有用的东西，但这只会让我更加困惑。我很不情愿在这里问，因为上次我要求朝正确的方向轻推时，由于我没有发布代码，因此问题已关闭。

如果我什至知道从哪里开始，我会发布一些。

但我离题了。

我正在寻找最好的（最简单的？）方法来做到这一点：

Small interface, drop down menu with list of names, when a name is selected, it shows a small list of details about the selected name.

在这里，我模拟了 Dreamweaver 中的基本思想：

![在此处输入图像描述](../Images/27641e5c0666193905f04dccc73cd51d.png)

理想情况下，它会根据需要调用用户信息。

我不知道如何为 android 制作这样的东西（或者......真的）。有人有任何教程吗，或者你能指出我正确的方向吗？

感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:18:03.670

好吧，如果你对Android一无所知，那么做一些基本的HelloWorld教程怎么样？

无论如何，您必须创建一些类来保存有关您的用户的信息（位置、电话等）。

下拉列表在 Android 中被称为微调器，了解如何将其放入布局中、如何填充它、如何对从中选择的项目做出反应。

然后考虑如何在屏幕上呈现信息，了解 XML 布局、TextViews 等。

我们不会为您编写代码，它也不会自行编写代码，只需从*某个地方*开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:19:54.880

要开始为 Android 开发，您可以尝试 android.com 网站上的入门教程：http: [//developer.android.com/training/index.html](http://developer.android.com/training/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:24:58.900

我想你已经完成了第一步。对我来说，如果您可以可视化并绘制出您想要的内容，那么下一步就是首先深入研究代码。你会学到，只是不要害怕先做一些互联网搜索。

首先，我总是建议新的 Android 开发人员查看 Android 生命周期，以了解在哪里发生了什么。对于您的应用程序，您应该了解 an`Activity`是什么，以及`onCreate()`. 阅读并尝试掌握 Android [Activity](http://developer.android.com/reference/android/app/Activity.html)是什么。

接下来，您应该看看如何使用[Android 布局](http://developer.android.com/guide/topics/ui/declaring-layout.html)。这将帮助您在屏幕上放置一些东西。默认情况下，当您在 Eclipse 中创建新的 Android 应用程序时，会生成一个基本的 layout.xml 文件。将其用作将[输入控件拖放](http://developer.android.com/guide/topics/ui/controls.html)到屏幕上的基本框架。您正在寻找的特定“下拉”功能可以在[Spinner](http://developer.android.com/guide/topics/ui/controls/spinner.html)控件中找到。

一旦你`Spinner`的屏幕上有一个，你就可以通过创建一个`Array`你将分配给一个的值来填充它`ArrayAdapter`。然后，它`ArrayAdapter`直接与`Spinner`填充它相关联。

使用 Android Developers 站点，它非常有用。他们在 SDK 中也有[教程](http://developer.android.com/training/basics/firstapp/index.html)和示例代码。

这个答案应该有很多术语、链接和方向供您入门。

**更新：**

我想扩展我的答案以更具体，但我认为我需要更多信息。例如，您是否从任何特定的地方（即设备本身？）提取这些名称。无论如何，名称必须以某种数组的形式放置，要么 a`String Array`要么 an `ArrayList`。这只是因为这就是`ArrayAdapters`工作`ArrayAdapters`方式以及填充`Spinner`对象的方式。所以我想我想说的是，无论你*如何*得到你的名字，你都必须将它们组织成某种类型的数组才能将它们放入`Spinner`（当然，如果你想保持简单的话）。

现在，一旦您将名称放入数组中并且您可以单击`Spinner`以显示所有名称，您现在想要触发一个事件，该事件将您想要显示在其下方的数据拉出。我建议以 2 种方式中的 1 种方式执行此操作。您可以从您的姓名中选择一个名称`Spinner`，然后点击一个按钮来开始搜索您想要显示的其他信息。如果您从网络资源中提取名称上的数据，这将是一个更好的解决方案。如果您要提取与从实际设备（您配置的 SQLite DB 或 Android 系统 DB）中选择的名称关联的数据，我会`onSelectionChanged`在您的`Spinner`. 您可以通过使用类似于[此答案](https://stackoverflow.com/a/1714426/586859)的内容来做到这一点：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Spinner spinner = (Spinner)findViewById(R.id.mySpinner);

    // create your arrayadapter of names and then set it to your spinner        

    // then add a lister to look for a change
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
            // update your view with the information for the selected user
        }

        @Override
        public void onNothingSelected(AdapterView<?> parentView) {
            // do something
        }    
    });
} 
```

一旦您可以在微调器中注册更改，您就可以启动查询以确定要显示的信息。如果您使用与名称关联的所有信息创建自定义数据库，则必须创建自己的数据库处理程序。如果从网络资源中提取信息，请确保将网络操作放在后台线程或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中。如果您要从 Android 设备（联系人记录或其他内容）中提取信息，只需使用 Android 的内置函数、库和 API。我会尝试将所有内容都本地化，而不必依赖网络连接。

获得所有信息后，您可以动态创建布局并将它们添加到当前视图中，或者您可以只拥有一个偶尔更改并显示和隐藏的布局。这两种解决方案都是完全合理的，我不认为其中一种一定比另一种更好。我曾经喜欢让对象不可见并在需要时显示它们，但是当我需要它们时，我开始以编程方式动态创建布局。不过，这对于新的 Android 开发人员来说似乎有点困难，所以如果您有粗略的 if/else 语句来显示和隐藏 XML 布局，请不要感到难过。

无论如何，希望所有这些都有帮助！欢迎来到安卓！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:19:20.527

你要找的是一个Android简单的CRUD应用教程，google一下。（好吧，假设你有基本的android开发知识......）

结果样本：[http ://www.theserverside.com/discussions/thread.tss?thread_id=62177](http://www.theserverside.com/discussions/thread.tss?thread_id=62177)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T13:28:14.797

这些是可以通过 Google 找到的一些有用的教程。

[http://commonsware.com/Android/](http://commonsware.com/Android/)

# android - 如何通过android默认电子邮件客户端发送带有图像的html内容？

> ID：15136480
> 
> 赞同：7
> 
> 时间：2013-02-28T13:13:47.410
> 
> 标签：android, email

![描述 android 2.2+ 设备要求的图片](../Images/7c6963b3799be2ffb8d3452ceb6e7f61.png)

我们如何通过超文本标记语言 (HTML) 在默认的 android 电子邮件客户端中获取内联图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:16:33.417

**You can not**. As default Email application's doesn't support `<img />` tag.

Because, [ImageSpan](http://developer.android.com/reference/android/text/style/ImageSpan.html) doesn't implementing [Parcelable](http://developer.android.com/reference/android/os/Parcelable.html).

Hence its failed with **Intent's PUT_EXTRA**.

Its works only for basic tags, like, `<b>, <i>` ..etc

Look at [Sending html email in android using <table>, etc. - is there really no relatively built-in Intent way?](https://stackoverflow.com/questions/7787171/sending-html-email-in-android-using-table-etc-is-there-really-no-relativel) and [How to show an image in the email body?](https://stackoverflow.com/questions/6201682/how-to-show-an-image-in-the-email-body)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:21:04.100

字符串主体=" `<html><body><table>...</table></body></html>`";

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("text/html");
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "subject");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(body).toString());                    
startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

不幸的是，该`<table>` `,'img'`标签不受支持。**受支持的标签实际上更依赖于您用于发送电子邮件的电子邮件客户端 - 其中一些标签比其他标签更挑剔/限制性更强**。不过，它们中的大多数都使用诸如等之类的超级基本格式标签`<b>, <i>, <h1>,`。

# ruby-on-rails - 自动测试未使用正确的环境

> ID：15136489
> 
> 赞同：0
> 
> 时间：2013-02-28T13:14:21.733
> 
> 标签：ruby-on-rails, rspec, autotest

运行 Autotest 时，Autotest 不在“测试”环境中运行。如何强制它在“测试”中运行？

我已经尝试`RAILS_ENV=test bundle exec autotest`过`export RAILS_ENV=test; bundle exec autotest`

但 Rails.env 仍然等于“开发”。

我的 Gemfile 在“测试”组中定义了自动测试。它找到了规范，但它正在针对开发数据库执行并`puts Rails.env`显示“开发”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:44:44.913

这很愚蠢..刚`ENV['RAILS_ENV'] = 'development'`在我的环境中找到.rb 当我把它改成`ENV['RAILS_ENV'] ||= 'development'` 一切都很好。

# c++ - 在 C++ 中查找三个字符串中所有字符的出现次数

> ID：15136495
> 
> 赞同：1
> 
> 时间：2013-02-28T13:14:47.313
> 
> 标签：c++

我不明白为什么这个程序不起作用。

我需要通过任何方法找到三个字符串中所有字符的出现次数。

我使用了 count 方法，但是如果你们可以帮助我使用 find 功能，那就更好了。

```
#include<iostream>
#include<algorithm>

using namespace std;

int main()
{
    string line[3];
    int count[3];
    cout << "Enter three lines of text...\n\n";
    cin >> line[0];
    cin >> line[1];
    cin >> line[2];
    int i;
    for(char j='a'; j<=26; j++) {
        for(i=0; i<3; i++)
            count[i] = std::count(line[i].begin(), line[i].end(), j);
        cout << "\n" << j << "\t" << ":" << "\t" << count[i];
    }

    system ("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:20:56.133

26 不是字母，`(char)26`通常小于`'a'`- 所以你的循环不会执行。尝试`char j='a';j<='z';j++`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T13:21:38.647

我会去做这样的事情：

```
#include <map>
#include <string>
#include <iostream>

int main()
{
    // Given 3 strings...
    std::string s1 = "Hello";
    std::string s2 = "Cruel";
    std::string s3 = "World";

    //===============================================
    // THESE 2 LINES ARE ALL YOU NEED FOR COUNTING
    std::map<char, int> countMap;
    for (char c : (s1 + s2 + s3)) { countMap[c]++; }
    //===============================================

    // Print the output. This is if you do not care about
    // characters that do not appear at all.
    for (auto const& e : countMap)
    {
        std::cout << e.first << ": " << e.second << std::endl;
    }

    // Print the output. This is if you DO care about
    // characters that do not appear at all.
    for (char c = ' '; c <= '~'; c++)
    {
        std::cout << c << ": " << countMap[c] << std::endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:18:14.667

[http://www.asciitable.com/](http://www.asciitable.com/)

小写“a”是 96。小于 26，这就是循环不执行的原因。尝试：

```
for (char j = 'a'; j <= 'z'; j++) 
```

这只会计算小写字符。如果你想出现小写和大写，你可以这样做：

```
#include <iostream>
#include <algorithm>

using namespace std;

int main()
{
    string line[3];

    cout << "Enter three lines of text...\n\n";
    cin >> line[0];
    cin >> line[1];
    cin >> line[2];

    for(char j='a';j<='z';j++)
    {
        int upper_sum = 0;
        int lower_sum = 0;

        for(int i=0;i<3;i++)
        {
            lower_sum += std::count(line[i].begin(),line[i].end(),j);
            upper_sum += std::count(line[i].begin(),line[i].end(),j - 32); //32 = 'a' - 'A'
        }

        cout<<"\n"<<j<<"\t"<<":"<<"\t"<<lower_sum;
        cout<<"\n"<<(char)(j - 32)<<"\t"<<":"<<"\t"<<upper_sum;
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:25:54.653

这是您的程序的正确版本：

```
#include<iostream>
#include<algorithm>
using namespace std;

int main()
{
string line[3];
int count[3];
/*cout<<"Enter three lines of text...\n\n";
cin>>line[0];
cin>>line[1];
cin>>line[2];*/

      line[0] = "aaaaabbbbbbbbbbb";
      line[1] = "ccccccddddddddddd";
      line[2] = "kkkkkkkkkkkkk";

     int i;
     for(char j='a';j<= 'z';j++) // You can loop through the alphabet, but you need to go 'a' to 'z' and not 26
     { 

             for(i=0;i<3;i++) 
             { // You were missing these braces,  you need them if your loop contains multiple lines
               count[i]= std::count(line[i].begin(),line[i].end(),j);
               cout<<"\n"<<j<<"\t"<<":"<<"\t"<<count[i];
             }
    }

    system ("pause");
    return 0; 
```

}

在这里[，它正在](http://liveworkspace.org/code/1aOQ6F%247)发挥作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T23:31:40.007

```
int i;
for(char j='a'; j<=26; j++) {
    for(i=0; i<3; i++)
        count[i] = std::count(line[i].begin(), line[i].end(), j);
    cout << "\n" << j << "\t" << ":" << "\t" << count[i];
} 
```

您的`cout`线路不在内部`for`循环中。

内循环结束后，`i`是`3`。然后`cout`调用`count[i]`它超出数组的范围。未定义的行为，如果它崩溃了，你很幸运。

你的问题是`i`. 它被声明的地方意味着它仍然存在并且该`cout`行可以引用它。如果将声明移至循环初始化程序，您会发现下一个错误：

```
for(int i=0; i<3; i++)
    count[i] = std::count(line[i].begin(), line[i].end(), j);
cout << "\n" << j << "\t" << ":" << "\t" << count[i]; 
```

最后一行不会编译，因为`i`在循环结束时超出范围。我假设您错误地认为`cout`是循环的一部分，部分原因是代码格式不佳，其次是因为`i`在更广泛的范围内声明。

要更正此问题，请`for`使用`{`and为循环创建一个块`}`。这将保持`i`块内所有语句的范围，并为循环的每次迭代重复语句。

```
for(int i=0; i<3; i++) {
    count[i] = std::count(line[i].begin(), line[i].end(), j);
    cout << "\n" << j << "\t" << ":" << "\t" << count[i];
} 
```

# php - 在 PHP Core 中将现有字符串日期转换为“m/j/Y”

> ID：15136496
> 
> 赞同：2
> 
> 时间：2013-02-28T13:14:48.237
> 
> 标签：php, magento, cakephp, magento-1.7, cakephp-2.1

我有现有的日期`2000-06-22`，我想将其转换为`06/22/2000`格式任何 PHP 技术都可以工作。我在magento中工作。如何 ？任何解决方案？提前致谢。！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:16:21.877

试试这个 ：

```
$dt_str = '2000-06-22';
$date   = new Datetime($dt_str);
echo $date->format('m/d/Y'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:18:29.733

```
echo date('m/j/Y', strtotime('2000-06-22')); 
```

# ruby-on-rails - RSpec 测试自定义验证器

> ID：15136497
> 
> 赞同：6
> 
> 时间：2013-02-28T13:14:53.450
> 
> 标签：ruby-on-rails, ruby, rspec, validation, rspec-rails

我的模型中有以下验证器：

```
class ContinuumValidator < ActiveModel::Validator
  def validate(record)
    if !record.end_time.nil? and record.end_time < record.start_time
      record.errors[:base] << "An event can not be finished if it did not start yet..."
    end
  end
end

class Hrm::TimeEvent < ActiveRecord::Base
  validates_with ContinuumValidator
end 
```

如何使用 Rspec 对其进行测试？

这是我迄今为止尝试过的：（感谢[zetetic](https://stackoverflow.com/questions/3387211/rspec-model-spec)）

```
describe "validation error" do
  before do
    @time_event = Hrm::TimeEvent.new(start_time: "2012-10-05 10:00:00", end_time: "2012-10-05 09:00:00", event_type: 2)
  end

  it "should not be valid if end time is lower than start time" do
    @time_event.should_not be_valid
  end

  it "raises an error if end time is lower than start time" do
    @time_event.errors.should include("An event can not be finished if it did not start yet...")
  end
end 
```

但我收到以下错误：

```
1) Hrm::TimeEvent validation error raises an error if end time is lower than start time
   Failure/Error: @time_event.errors.should include("An event can not be finished if it did not start yet...")

   expected #<ActiveModel::Errors:0x007fd1d8e02c50 @base=#<Hrm::TimeEvent id: nil, start_time: "2012-10-05 08:00:00", end_time: "2012-10-05 07:00:00", event_type: 2, employee_id: nil, created_at: nil, updated_at: nil, not_punched: false, validated: false, replace_id: nil>, @messages={}> to include "An event can not be finished if it did not start yet..."

   Diff:
   @@ -1,2 +1,5 @@
   -["An event can not be finished if it did not start yet..."]
   +#<ActiveModel::Errors:0x007fd1d8e02c50
   + @base=
   +  #<Hrm::TimeEvent id: nil, start_time: "2012-10-05 08:00:00", end_time: "2012-10-05 07:00:00", event_type: 2, employee_id: nil, created_at: nil, updated_at: nil, not_punched: false, validated: false, replace_id: nil>,
   + @messages={}> 
```

我究竟做错了什么？我怎样才能实现我的目标？任何帮助或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T13:33:00.557

问题是你期望`@time_event.errors`表现得像一个字符串数组。它没有，它返回 ActiveModel::Errors。正如其他人指出的那样，您还需要通过调用来触发验证`valid?`：

```
it "raises an error if end time is lower than start time" do
  @time_event.valid?
  @time_event.errors.full_messages.should include("An event can not be finished if it did not start yet...")
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-15T07:07:44.490

这个解决方案对我有用（使用 Mongoid）：

**该模型**

```
class OpLog
...
field :from_status, type: String
field :to_status,   type: String
...
validate :states_must_differ

def states_must_differ
  if self.from_status == self.to_status
    errors.add(:from_status, "must differ from 'to_status'")
    errors.add(:to_status, "must differ from 'from_status'")
  end
end
...
end 
```

**考试：**

```
it 'is expected to have different states' do
  expect { create(:oplog, from_status: 'created', to_status: 'created').to raise_error(Mongoid::Errors::Validations) }
end 
```

所以在你的情况下，我会写一个这样的测试（如果使用 ActiveRecord）：

```
it 'raises an error if end time is lower than start time' do
  expect { create(Hrm::TimeEvent.new(start_time: "2012-10-05 10:00:00", end_time: "2012-10-05 09:00:00", event_type: 2)) }.to raise_error(ActiveRecord::Errors)
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T13:28:34.247

没有错误是因为您没有调用触发错误的事件。这通常在创建或保存记录时发生。您可能不想在测试中访问数据库，然后您可以使用如下方法`valid?`：

```
it "raises an error if end time is lower than start time" do
  @time_event.valid?
  @time_event.errors.should include("An event can not be finished if it did not start yet...")
end 
```

我个人会将这两个测试合二为一，因为有效？在第一种情况下被调用。

还有一个未成年人：`if record.end_time`优于`if !record.end_time.nil?`。（至少在我看来.... :-)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:31:52.793

我认为记录没有被验证，因此验证器没有运行并且没有添加错误。您可以在代码输出中看到这一点。“验证：假”

尝试：

```
it "raises an error if end time is lower than start time" do
  @time_event.valid?
  @time_event.errors.should include("An event can not be finished if it did not start yet...")
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T13:34:34.640

您实际上还没有测试验证，另外我建议您制定一个规范。

```
describe "validation error" do
  before { @time_event = Hrm::TimeEvent.new(start_time: "2012-10-05 10:00:00", end_time: "2012-10-05 09:00:00", event_type: 2) }

  it "raises an error if end time is lower than start time" do
    @time_event.valid?
    @time_event.errors.should include("An event can not be finished if it did not start yet...")
  end
end

class ContinuumValidator < ActiveModel::Validator
  def validate(record)
    if record.end_time and record.end_time < record.start_time
      record.error.add_to_base << "An event can not be finished if it did not start yet..."
    end
  end
end 
```

# java - 安装的驱动器路径名，使用在 tomcat 上运行的 python 脚本

> ID：15136499
> 
> 赞同：0
> 
> 时间：2013-02-28T13:14:54.787
> 
> 标签：java, python, tomcat

我有以下通过 java 类调用的 python 脚本。它适用于本地文件名（'D:\temp\Test.pdf'），但当文件名是 \serverA\f$\dir\Test.pdf 时，它总是返回 false。它在 tomcat 服务器上运行（具有管理员权限），并且 serverA 驱动器 f 安装在 tomcat 服务器机器上。关于我可能遗漏的任何想法？

```
def checkFileExists(filename):

        vFile = File(filename)
        if (vFile == None):
            return False
        return vFile.exists() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:17:29.037

So, as discussed in comments to the question, it is a bit hard to access Windows shares in Python. So, a hacky way of checking whether a file exists in a remote location not understood by Python, but understood by Windows' tools would be invoking these tools and parsing their output.

For example:

```
import subprocess

def file_exists(path):        
    res = subprocess.check_output(['IF', 'EXIST', path, 'ECHO', "1"])
    return res.strip() == '1' 
```

Usage:

```
path = r'\\serverA\f$\dir\Test.pdf'
print(file_exists(path)) 
```

# c++ - 两根弦之间的距离

> ID：15136500
> 
> 赞同：4
> 
> 时间：2013-02-28T13:14:55.710
> 
> 标签：c++, string, algorithm, distance

我不相信标准库提供任何东西来计算两个字符串之间的距离，而且我似乎在 Boost StringAlgo 中找不到任何东西。那么，还有其他我可以使用的库吗？

我对算法不太挑剔。Jaro-Winkler 很好，Levenshtein 也很好，我愿意接受建议，我不想编写已经有人编写过的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T14:13:03.077

您没有用实际的距离度量来定义您的问题，所以我认为它只需要满足“[度量（数学）](http://en.wikipedia.org/wiki/Metric_(mathematics)#Definition) ”中的条件：

> 集合 X 上的度量是一个函数（称为距离函数或简称为距离）d : X × X → R（其中 R 是实数集）。对于X中的所有x、y、z，该函数需要满足以下条件：
> 
> *   d(x, y) ≥ 0（非负性，或分离公理）
> *   d(x, y) = 0 当且仅当 x = y（音频不清晰的同一性，或巧合公理）
> *   d(x, y) = d(y, x)（对称）
> *   d(x, z) ≤ d(x, y) + d(y, z)（次可加性/三角不等式）。

假设我们这样定义`d`：

```
 { 0 if x = y
d(x, y) = {
          { 1 otherwise 
```

所以满足前三个条件：

*   `d(x, y) ≥ 0`
*   `d(x, y) = 0 iff x = y`
*   `d(x, y) = d(y, x) = 0 for x = y`， 和`d(x, y) = d(y, x) = 1 for x ≠ y`

对于最后一个条件，有两种情况：

*   `d(x, z) = 0`. 右侧唯一可以想到的值是`0`、`1`和`2`，其中任何一个都可以满足条件。
*   `d(x, z) = 1`. 假设右手边*不*大于或等于一。这意味着它必须为零。那么右边的两个术语都必须是`0`，这意味着`x = y`和`y = z`。第二个条件意味着那个`x = z`，这反过来意味着那个`d(x, z) = 0`。这是一个矛盾，所以右手边必须大于或等于一。

然后我们可以将度量定义为：

```
int d(std::string x, std::string y) {
    if (x == y) {
        return 0;
    } else {
        return 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T15:19:54.297

你可以试试[SimString](http://www.chokkan.org/software/simstring/)。

> SimString 是一个用于快速近似字符串检索的简单库。近似字符串检索在数据库中查找与查询字符串的相似度不小于阈值的字符串。近似字符串检索不仅查找相同而且相似的字符串，具有多种应用，包括拼写校正、灵活的字典匹配、重复检测和记录链接。
> 
> SimString 支持余弦、Jaccard、骰子和重叠系数作为相似性度量。SimString 使用字母 n-gram 作为计算字符串相似度的特征。

或[SimMetric](http://sourceforge.net/projects/simmetrics/)库。

> SimMetrics 是一个相似度度量库，例如从编辑距离（Levenshtein、Gotoh、Jaro 等）到其他度量（例如 Soundex、Chapman）。由 (AKT) 由 EPSRC 赞助的 IRC 资助的英国谢菲尔德大学提供的工作，授权号 GR/N15764/01。

或者[libdistance](http://www.monkey.org/~jose/software/libdistance/)库，它实现了 Levenshtein、Dameru、Needleman-Wunsch、Hamming、Bloom Filter、Jaccard 和 Minkowski 距离。

[语音算法](https://en.wikipedia.org/wiki/Phonetic_algorithm)也可能很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:18:54.877

[此相关问题包含](https://stackoverflow.com/a/908157/154306)演示 Levenshtein 距离的代码片段。它也已[在此 C 代码中为 MySQL 实现](https://github.com/jmcejuela/Levenshtein-MySQL-UDF/blob/master/levenshtein.c)。

# ruby-on-rails - 在文本字段中保留逗号

> ID：15136501
> 
> 赞同：0
> 
> 时间：2013-02-28T13:15:00.393
> 
> 标签：ruby-on-rails, ruby, number-formatting

我正在尝试为输入字段提供十进制值，例如 - 10,235,333。它采用此值，但当我移至下一个字段时，逗号会从文本字段中删除。在我提交表单之前，有什么方法可以将逗号留在文本字段中，但是当我提交表单时，只有数字会存储在数据库中？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T10:42:31.543

我已经得到了这个问题的解决方案。我有一个 jquery 插件，它是[**jquery.number**](https://github.com/customd/jquery-number)。此插件会自动在您的号码中添加逗号。

此插件隐式格式化输入值。

就像我们输入

```
10000 it formats this no to 10,000
for 1000 = 1,000
for 100000 = 100,000
for 1000000 = 1,000,000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:24:25.440

您可以覆盖 setter 方法。给定一个价格字段，

```
# model
def price=(num)
  write_attribute :price, price.gsub(/[^\d]/, '')
end 
```

然后在您的视图中，您可以在渲染视图之前格式化值

```
f.text_field :price, value: number_with_delimiter(f.object.price) 
```

# msmq - Windows Server 2008 上的 MSMQ

> ID：15136502
> 
> 赞同：1
> 
> 时间：2013-02-28T13:15:00.840
> 
> 标签：msmq, msmq-wcf

我以工作组模式在 Windows Server 2008 上安装了 MSMQ。我注意到只有一个私有队列并且缺少一个公共队列。这导致我无法从远程计算机发送消息。我看到传出队列中的消息。状态为“等待连接”，连接历史为“未报告失败”。

我有两个问题：

1.  我可以以任何方式添加公共队列选项吗？

2.  我应该怎么做才能将消息发送到远程计算机的私人队列？

（我使用 WCF。）

预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:07:06.400

在我的工作中，我们也遇到了这个问题。

解决方案是打开 msmq 正在使用的端口：

**TCP：1801 RPC：135、2101*、2103*、2105* UDP：3527、1801**

祝你好运。

# angularjs - 在 AngularJS 中使用带有指令的过滤器

> ID：15136504
> 
> 赞同：6
> 
> 时间：2013-02-28T13:15:08.827
> 
> 标签：angularjs, angularjs-directive

我正在尝试在 AngularJS 指令中使用过滤器，但不知道该怎么做。从邮件列表上的一些信息看来，您应该能够注入 $filter 并使用它，但我不确定如何/在哪里调用它。

我的指令目前看起来像这样：

```
myApp.directive('fancyDisplay', ['$filter', function($filter) {
    return {
        scope: {
            'fancyDisplay': '='
        },
        template: "<div ng-repeat='datum in fancyDisplay | filter:tagFilter'>{{datum.name}}</div>"
    };
}]); 
```

虽然`filter:tagFilter`不起作用。我应该如何过滤指令中的数据？

JSfiddle 可在[http://jsfiddle.net/VDLqa/4/](http://jsfiddle.net/VDLqa/4/) 获得提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T14:49:48.610

您正在指令 ( `scope: { 'fancyDisplay': '=' }`) 上创建一个新的隔离范围，这意味着您将无法从父范围访问属性。由于`tagFilter`在父范围上定义，您将无法访问它。

`tagFilter`作为属性传递给指令：

```
<div fancy-display="model.data" filter="tagFilter"></div> 
```

并在指令上：

```
scope: {
    fancyDisplay: '=',
    tagFilter: '=filter'
}, 
```

**jsfiddle**：http: [//jsfiddle.net/bmleite/VDLqa/5/](http://jsfiddle.net/bmleite/VDLqa/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T01:08:29.000

感谢@bmleite 的回答。

另一件可能有用的事情是确保像这样声明您的 ng-repeat 指令，以防您的列表中有重复项。

我花了很长时间才弄清楚这一点。显然，您必须在通过 x 指定轨道之前进行过滤：

```
app.directive("someDirective", function(){ ...

    restrict: "E",
    ...
    template:"<ul ng-repeat='t in tree | filter:key track by $index'><li>{{t}}</li></ul>",

}); 
```

反过来不起作用。

# excel - VBA遍历几个目录并在摘要工作簿中合并数据

> ID：15136507
> 
> 赞同：0
> 
> 时间：2013-02-28T13:15:11.513
> 
> 标签：excel, merge, summary

我有一个在指定目录上运行的宏，创建一个新的摘要工作簿，然后将所选数据从所有存在的 Excel 文件（在定义的目录中）复制到该摘要工作簿中，然后将摘要工作簿保存到新定义的位置并关闭。每次我有多个用于数据合并的文件夹（有时超过 30 个目录）时，我都必须更改目录名称。

我希望这个宏自动循环遍历一个根目录中包含的多个目录，并执行上面详述的相同操作。怎么可能？我使用了“脚本文件夹”方法，但是当我运行代码时它返回错误......从来没有成功过！

其次，我希望这个宏用它的文件夹名称保存摘要工作簿，即合并数据的目录。

我的代码在这里，请看一下并提出解决方案：

```
Sub MergeSitu()
Dim MyPath As String, FilesInPath As String
Dim MyFiles() As String
Dim SourceCcount As Long, FNum As Long
Dim mybook As Workbook, BaseWks As Worksheet
Dim sourceRange1 As Range, destrange1 As Range
Dim sourceRange2 As Range, destrange2 As Range
Dim sourceRange3 As Range, destrange3 As Range
Dim Rnum As Long, CalcMode As Long
Dim Cnum As Long
Dim listwb As Workbook
Dim mMonth As Range

 ' Change this to the path\folder location of the files.
MyPath = "D:\data\19h\13 feb\"

' Add a slash at the end of path if needed.
If Right(MyPath, 1) <> "\" Then
    MyPath = MyPath & "\"
End If

' If there are no Excel files in the folder, exit.
FilesInPath = Dir(MyPath & "*.xlsx*")
If FilesInPath = "" Then
    MsgBox "No files found"
    Exit Sub
End If
' Fill in the myFiles array with the list of Excel files in
' the search folder.
FNum = 0
Do While FilesInPath <> ""
    FNum = FNum + 1
    ReDim Preserve MyFiles(1 To FNum)
    MyFiles(FNum) = FilesInPath
    FilesInPath = Dir()
Loop

' Change the application properties.
With Application
    CalcMode = .Calculation
    .Calculation = xlCalculationManual
    .ScreenUpdating = False
    .EnableEvents = False
End With

' Add a new workbook with one sheet.
With Application

'--> Set contractor list file
Set listwb = .Workbooks.Open _
("D:\data\DataAssemble.xlsx")
End With
Set BaseWks = listwb.Sheets(1)
Cnum = 1
ActiveWorkbook.Sheets(1).Select
Range("P1").Select
ActiveCell.FormulaR1C1 = "Prod"

For Each mMonth In Sheets(1).Range("P1")
ActiveWorkbook.Sheets.Add after:=Worksheets(Worksheets.count)
 ActiveSheet.Name = mMonth
Next
Set BaseWks = listwb.Sheets(7)
Cnum = 1

' Loop through all of the files in the myFiles array.
If FNum > 0 Then
    For FNum = LBound(MyFiles) To UBound(MyFiles)
        Set mybook = Nothing
        On Error Resume Next
        Set mybook = Workbooks.Open(MyPath & MyFiles(FNum))
        On Error GoTo 0

        If Not mybook Is Nothing Then

            On Error Resume Next
            Set sourceRange1 = mybook.Worksheets(1).Range("A1:B1420")

            If Err.Number > 0 Then
                Err.Clear
                Set sourceRange1 = Nothing

            Else
                ' If the source range uses all of the rows
                ' then skip this file.
                If sourceRange1.Rows.count >= BaseWks.Rows.count Then
                    Set sourceRange1 = Nothing

                End If
            End If

            On Error GoTo 0

            If Not sourceRange1 Is Nothing Then

                SourceCcount = sourceRange1.Columns.count

                If Cnum + SourceCcount >= BaseWks.Columns.count Then
                    MsgBox "There are not enough columns in the sheet."
                    BaseWks.Columns.AutoFit
                    mybook.Close savechanges:=False
                    GoTo ExitTheSub
                Else

                    ' Copy the file name in the first row.
                    With sourceRange1
                        BaseWks.Cells(1, Cnum). _
                                Resize(, .Columns.count).Value = MyFiles(FNum)
                    End With

                    ' Set the destination range.
                    Set destrange1 = BaseWks.Cells(1, Cnum)
                    ' Copy the values from the source range
                    ' to the destination range.
                    With sourceRange1
                        Set destrange1 = destrange1\. _
                                        Resize(.Rows.count, .Columns.count)
                    End With

                    destrange1.Value = sourceRange1.Value

                    Cnum = Cnum + SourceCcount
                End If
            End If
        mybook.Close savechanges:=False
        End If
BaseWks.Columns.AutoFit
    Next FNum
End If
listwb.Activate
ActiveWorkbook.SaveAs Filename:="D:\data\Merged\19h\Data_ " & (FolderName) & ".xlsx",  
Password:="", _  
WriteResPassword:="", ReadOnlyRecommended:=False, CreateBackup:=False
ActiveWorkbook.Close

ExitTheSub:
'Restore ScreenUpdating, Calculation and EnableEvents
With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = CalcMode
End With
End Sub 
```

谢谢！桑吉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T02:44:29.080

我从以下网址获得此代码：http: [//vba-tutorial.com/merging-multiple-workbooks-togeather-by-searching-directories-and-sub-folders/](http://vba-tutorial.com/merging-multiple-workbooks-togeather-by-searching-directories-and-sub-folders/)

第 1 步 - 递归函数

```
Sub RecursiveFileSearch(ByVal targetFolder As String, ByRef objRegExp As Object, _
                ByRef matchedFiles As Collection, ByRef objFSO As Object)

    Dim objFolder As Object
    Dim objFile As Object
    Dim objSubFolders As Object

    'Get the folder object associated with the target directory
    Set objFolder = objFSO.GetFolder(targetFolder)

    'Loop through the files current folder
    For Each objFile In objFolder.Files
        If objRegExp.test(objFile) Then
            matchedFiles.Add (objFile)
        End If
    Next

    'Loop through the each of the sub folders recursively
    Set objSubFolders = objFolder.Subfolders
    For Each objSubfolder In objSubFolders
        RecursiveFileSearch objSubfolder, objRegExp, matchedFiles, objFSO
    Next

    'Garbage Collection
    Set objFolder = Nothing
    Set objFile = Nothing
    Set objSubFolders = Nothing

End Sub 
```

第 2 步 - 递归控制器

```
Function FindPatternMatchedFiles(sPath As String) As Collection

    Dim objFSO As Object
    Set objFSO = CreateObject("Scripting.FileSystemObject")

    Dim objRegExp As Object
    Set objRegExp = CreateObject("VBScript.RegExp")
    objRegExp.Pattern = ".*\.(xls|xlsx)"
    objRegExp.IgnoreCase = True

    Dim colFiles As Collection
    Set colFiles = New Collection

    RecursiveFileSearch sPath, objRegExp, colFiles, objFSO

    'Garbage Collection
    Set objFSO = Nothing
    Set objRegExp = Nothing

    Set FindPatternMatchedFiles = colFiles

End Function 
```

第 3 步 - 将每个匹配的工作簿合并在一起

```
Sub MergeWorkbooks(sPath As String, sWbName As String)

    Dim colFiles As Collection
    Set colFiles = FindPatternMatchedFiles(sPath)

    Dim appExcel As New Excel.Application
    appExcel.Visible = False

    Dim wbDest As Excel.Workbook
    Set wbDest = appExcel.Workbooks.Add()

    Dim wbToAdd As Excel.Workbook
    Dim sheet As Worksheet

    For Each file In colFiles

        Set wbToAdd = appExcel.Workbooks.Open(file)

        For Each sheet In wbToAdd.Sheets
            sheet.Copy Before:=wbDest.Sheets(wbDest.Sheets.Count)
        Next sheet

        wbToAdd.Close SaveChanges:=False

    Next

    wbDest.Close True, sPath + "\" + sWbName
    Set wbDest = Nothing
    Set appExcel = Nothing

End Sub 
```

第 4 步 - 调用合并工作簿子例程

```
Sub Main()

    MergeWorkbooks "C:\Path\To\Folder", "Awesomeness.xlsx"

End Sub 
```

# java - 每当有键匹配时添加两个映射的值

> ID：15136508
> 
> 赞同：1
> 
> 时间：2013-02-28T13:15:22.700
> 
> 标签：java, map, add

说我有一张像

```
{one=1; two=1; three=1} 
```

和另一张地图

```
{one=4; two=4; three=4} 
```

我知道 putAll() 会添加唯一键并替换现有键。是否可以添加两个地图，这会产生一个结果，例如只要存在现有关键字就添加值。

```
{one=5; two=5; three=5} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:20:15.820

创建一个[新`Map`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html#HashMap%28%29)的，然后对于其中的[所有条目](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html#entrySet%28%29) `x`，`map1`如果`map2` [包含 key](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html#containsKey%28java.lang.Object%29) `x`，[则将](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html#put%28java.lang.Object,%20java.lang.Object%29)两个值的添加放入带有 key 的新映射中`x`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:25:47.103

试试这个 ，

```
 Map<String, Integer> map = new HashMap<String, Integer>();
    Map<String, Integer> map1 = new HashMap<String, Integer>();
             Map<String, Integer> map2 = new HashMap<String, Integer>();

    map.put("one", 1);
    map.put("two", 1);
    map.put("three", 1);

    map1.put("one", 4);
    map1.put("two", 4);
    map1.put("three", 4);

    for (Map.Entry<String, Integer> entry : map.entrySet()) {
        System.out.println(map1.get(entry.getKey())+entry.getValue());
                        map2.put(entry.getKey(),map1.get(entry.getKey())+entry.getValue());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:26:06.903

扩展[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)并覆盖 putAll 方法。

```
public class MyMap extends java.util.HashMap{
 @Override
 public void putAll(java.util.Map mapToAdd){
      java.util.Iterator iterKeys = keySet().iterator();
      while(iterKeys.hasNext()){
           String currentKey = (String)iterKeys.next();
           if(mapToAdd.containsKey(currentKey)){
                mapToAdd.put(currentKey, new Integer(Integer.parseInt(get(currentKey).toString()) + Integer.parseInt(mapToAdd.get(currentKey).toString())));
           }else{
                mapToAdd.put(currentKey, get(currentKey));
           }
      }
      super.putAll(mapToAdd);
 }
 public static void main(String args[]){
     MyMap m1 = new MyMap();
     m1.put("One", new Integer(1));
     m1.put("Two", new Integer(2));
     m1.put("Three", new Integer(3));
     MyMap m2 = new MyMap();
     m2.put("One", new Integer(4));
     m2.put("Two", new Integer(5));
     m2.put("Three", new Integer(6));
     m1.putAll(m2);
     System.out.println(m1);
 } 
```

}

现在，创建 MyMap 的对象而不是 HashMap。[在这里](http://ideone.com/2BHYUr)创建了一个小提琴

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:39:45.133

试试这个方法。适用于通用键类型。`Integer`在我们添加它们时，值类型仍然存在。

```
public <K> void putAndAdd(Map<K, Integer> to,
        Map<? extends K, ? extends Integer> from) {
    for (Iterator<? extends Map.Entry<? extends K, ? extends Integer>> i = from
            .entrySet().iterator(); i.hasNext();) {
        Map.Entry<? extends K, ? extends Integer> e = i.next();
        if (to.get(e.getKey()) != null) {
            to.put(e.getKey(), to.get(e.getKey()) + e.getValue());
        } else {
            to.put(e.getKey(), e.getValue());
        }
    }
} 
```

# c# - 如何在 Linq to SQL 中插入具有一对一关系的子对象

> ID：15136515
> 
> 赞同：0
> 
> 时间：2013-02-28T13:15:45.597
> 
> 标签：c#, linq-to-sql

**编辑**

好吧，我在代码方面所做的一切都是正确的，我把关系放在表格上是错误的！

**问题**

从任务到消息，我有一对一的关系。插入新项目时，我遇到外键违规。

细节：

数据库结构

```
Task
    ID (Primary Key, Guid, Default = NEWID())
    MessageID (Unique Index with foreign key pointing to Message.ID)

Message
    ID (Primary Key, Guid, Default = NEWID()) 
```

每个表上主键的 dbml 设置都将 Auto Generate Value 设置为`true`，Auto-Sync 设置为`OnInsert`

我有以下代码来插入新对象

```
 var objMessage = new Data.Message()
    {
        Body = "",
        Subject = ""
    };
    Context.Messages.InsertOnSubmit(objMessage);

    var objTask = new Data.Task()
    {
        Message = objMessage
    };

    Context.Tasks.InsertOnSubmit(objTask);
    Context.SubmitChanges(); 
```

这会引发 SQL 错误外键约束被违反。

SQL 分析显示 linq to sql 在消息之前插入任务，因为它需要消息中的 id，所以它无法执行此操作，因此这当然会导致外键违规。

我在哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:20:46.707

我能看到的问题是第一个`InsertOnSubmit`。如果您想将其添加到相关表中，那么我认为您不需要第一个`InsertOnSubmit`。因为当您插入主对象时，子对象也将使用它的外键插入。

我认为你可以这样做：

```
var objTask = new Data.Task()
    {
        Message = new Data.Message()
                {
                    Body = "",
                    Subject = ""
                }
    };
    Context.Tasks.InsertOnSubmit(objTask);
    Context.SubmitChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:18:38.257

尝试这样做：

```
var objMessage = new Data.Message()
{
    Body = "",
    Subject = ""
};
Context.Messages.InsertOnSubmit(objMessage);
Context.SubmitChanges();

var objTask = new Data.Task()
{
    Message = objMessage
};

Context.Tasks.InsertOnSubmit(objTask);
Context.SubmitChanges(); 
```

您必须在使用新记录之前提交更改

# iphone - 如何将自定义按钮/MapPin 添加到 MKAnnotation？

> ID：15136524
> 
> 赞同：0
> 
> 时间：2013-02-28T13:16:20.137
> 
> 标签：iphone, uibutton, mapkit, customization, mkannotation

我是 iphone 开发的新手，我正在尝试将自定义按钮添加到注释标注中。我向 rightCalloutAccessoryView 添加常规按钮没有问题，但它不适用于自定义样式。我的图像大小是 32 x 32。我还想在此 stackoverflow 问题之后添加一个自定义地图图钉[，](https://stackoverflow.com/questions/2699171/how-do-i-add-custom-pins-to-the-iphone-mapkit)非常感谢任何帮助。

我的代码

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
// Define your reuse identifier.
static NSString *identifier = @"MapPoint";   

if ([annotation isKindOfClass:[MapPoint class]]) {
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }
    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;
    annotationView.animatesDrop = YES;
    annotationView.image = [UIImage imageNamed:@"myimage.png"];

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeCustom];
    //UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setImage:[UIImage imageNamed:@"phony2.png"] forState:UIControlStateNormal];
    [rightButton addTarget:self
                    action:@selector(showDetails:)
          forControlEvents:UIControlEventTouchUpInside];
    annotationView.rightCalloutAccessoryView = rightButton;

    return annotationView;
}
return nil; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:38:43.090

```
 [rightButton addTarget:self
                action:@selector(showDetails:) 
```

删除此行并设置按钮的框架

```
[rightButton setFrame:CGRectMake(0,0,32,32)]; 
```

并从 degate 方法中获取点击动作

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control; 
```

您在哪里获得注释视图。

希望这会帮助你。

# c# - Linq to SQL 多对多关系，使用集合

> ID：15136531
> 
> 赞同：0
> 
> 时间：2013-02-28T13:16:26.037
> 
> 标签：c#, linq, windows-phone-7, sql-server-ce

我有一个移动应用程序，我正在尝试使用 Windows Phone 数据库。但是我遇到了一个小问题。

这是我到目前为止所拥有的。

```
[Table]
public class CollectionManager
{
    [Column(IsPrimaryKey = true)]
    public int FilmID { get; set; }

    [Column(IsPrimaryKey = true)]
    public int CollectionID { get; set; }

    private EntityRef<FilmData> film;
    [Association(ThisKey = "FilmID", OtherKey = "ID", Storage = "film")]

    public FilmData Film{ get { return film.Entity; } set { film.Entity = value; } }

    private EntityRef<Collection> collection;
    [Association(ThisKey = "CollectionID", OtherKey = "ID", Storage = "collection")]

    public Collection Collection { get { return collection.Entity; } set { collection.Entity = value; } }
}

[Table]
public class FilmData
{
    [Column(IsPrimaryKey = true)]
    public int FilmID { get; set; }

    [Association(ThisKey = "ID", OtherKey = "FilmID")]
    public EntitySet<CollectionManager> CollectionManager { get; set; }
}

[Table]
public class Collection
{
    [Column(IsPrimaryKey = true)]
    public int CollectionID { get; set; }

    [Association(ThisKey = "ID", OtherKey = "CollectionID ")]
    public EntitySet<CollectionManager> CollectionManager { get; set; }
} 
```

所以这些是我的 3 张桌子，但是我正在努力

*   将影片添加到收藏夹
*   获取收藏中的所有电影。

任何帮助我都将不胜感激，非常感谢您花时间阅读本文！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:39:30.920

看来您的`EntitySet<>`属性倒退了。您的`FilmData`班级有很多`Collection`，而您的`Collection`班级有很多`CollectionManager`。如果你想添加`FilmData`到 a`Collection`那么你`Collection`应该有很多`FilmData`.

# python - 在python中序列化json

> ID：15136533
> 
> 赞同：0
> 
> 时间：2013-02-28T13:16:28.100
> 
> 标签：python, json

我知道那里有很多 json/python 问题，但我似乎无法弄清楚这一点。我正在尝试将两个列表序列化到同一个文件中。为此，我创建了一个包含两个列表的新类：

```
class newJSON(object):
    def __init__(self, list1, list2):
        self.data = {'data': list1, 'info' : list2} 
```

我需要生成的数据文件如下所示：

```
{
    "data" : [
        {
            "name" : "aName" ,
            "coordinates" : {"obj2" : 33, "obj3" : 71} 
        } , {
            "name" : "bName" ,
            "coordinates" : {"obj2" : 12, "obj3" : 77} 
        }
        ] ,
    "info" : [
        {
            "first" : ["xxx" , "yyy"] ,
            "space" : 21
        } , {
            "first" : ["aaa" , "bbb"] ,
            "space" : 12
        }
        ]
} 
```

然后我按照将[python 对象实例序列化为 JSON](https://stackoverflow.com/questions/10252010/serializing-python-object-instance-to-json)和其他几个中的建议对对象进行解码：

```
jsonToEncode = newJSON(myList1, myList2)
myNewJSONData = json.dumps(jsonToEncode.__dict__) 
```

但是我得到了“不是 JSON 可序列化错误”......我在有和没有**dict**的情况下都试过了，但没有成功。JSON 必须采用上述格式。问题是什么？

谢谢

****编辑****

为了制作这两个列表，我采用了一个 json 文件，该文件的格式与所示的 json 完全相同，并执行以下操作：

```
list1 = [obj1(**myObj) for myObj in data["data"]] 
```

和 list2 一样。obj1 是这样制作的：

```
class obj1(object):
    def__init__(self, name, coordinates): 
        self.name = name 
        self.coordinate = coordinates 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:24:59.160

无需创建新对象。直接序列化字典即可：

```
myNewJSONData = json.dumps({'data': list1, 'info': list2}) 
```

但是，您的代码应该可以正常工作。您可能*包含*其中不可序列化`list1`的数据。`list2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:23:54.570

试试`myNewJSONData = json.dumps(jsonToEncode.data)`吧。

甚至`myNewJSONData = json.dumps({'data': list1, 'info' : list2})`。你为什么还要使用那个类`jsonToEncode`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:33:01.973

试试这个：

```
myNewJSONData = json.dumps(jsonToEncode.data, indent=2) 
```

或这个：

```
>>> class newJSON2(dict):
...     def __init__(self, list1, list2):
...         self['data'] = list1
...         self['info'] = list2
>>> 
>>> 
>>> json2 = newJSON2(list1, list2)
>>> json2
{'info': [{'space': 21, 'first': ['xxx', 'yyy']}, {'space': 12, 'first': ['aaa', 'bbb']}], 'data': [{'name': 'aName', 'coordinates': {'obj3': 71, 'obj2': 33}}, {'name': 'bName', 'coordinates': {'obj3': 77, 'obj2': 12}}]}
>>> print json.dumps(json2, indent=2)
{
  "info": [
    {
      "space": 21, 
      "first": [
        "xxx", 
        "yyy"
      ]
    }, 
    {
      "space": 12, 
      "first": [
        "aaa", 
        "bbb"
      ]
    }
  ], 
  "data": [
    {
      "name": "aName", 
      "coordinates": {
        "obj3": 71, 
        "obj2": 33
      }
    }, 
    {
      "name": "bName", 
      "coordinates": {
        "obj3": 77, 
        "obj2": 12
      }
    }
  ]
}
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:37:00.977

使用`simplejson`图书馆。

```
from simplejson import loads, dumps
print loads(json_string) # Converts a JSON string to dict
print dumps(python_object) # Converts any valid python object/dict to valid JSON string 
```

看看[https://pypi.python.org/pypi/simplejson](https://pypi.python.org/pypi/simplejson)。

# upgrade - Magento: upgrade pre 1.6 version to most recent one

> ID：15136534
> 
> 赞同：0
> 
> 时间：2013-02-28T13:16:28.437
> 
> 标签：upgrade, magento-1.4, magento-1.5, magento-1.6, magento-1.3

I've seen a lot of questions about pre 1.6 Magento installations to the most recent version (at the current moment 1.7.0.2) but there are a lot of answers that don't work for everybody.

So below the answer to the question: **How to upgrade Magento from a pre 1.6 installation to the most recent one.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:16:28.437

There are a lot of versions and not all of them are working. This one has worked for me for a lot of versions, as far as 1.3 to 1.7.

*Please add comments with solutions to problems you're experiencing, I can update the answer so other people get help from this topic too!*

What you need: - SUDO rights/root account on your server. - The linux package 'nohub' - make sure NOBODY can trigger the index.php. If your version supports maintenance.flag, put an empty maintenance.flag file in your Magento root.

## Walkthrough

1) Download the latest Magento. Overwrite: ./download/* ./lib/* ./mage
2) Run these steps from you Magento root als SUDOer (if you're not root, put 'sudo' for all the commands)

```
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
chmod -R 777  ./var
chmod 550 mage 
```

3) Go to your Magento root folder and type:

```
./mage list-upgrades
./mage config-set preferred_state stable
./mage upgrade-all --force
./mage install http://connect20.magentocommerce.com/community Mage_All_Latest --force 
```

4) Now there is the last step. ***Note: In some situations this process can take up to 8+ hours!***

```
nohup php -f ./index.php 
```

## Known issues

1) it's possible that your update gets in a loop. To find this loop, enable debugging.
Edit: `/lib/Varien/Db/Adapter/Pdo/Mysql.php` (+/- line 112 and 112)

```
protected $_debug               = true;
protected $_debuglogeverything  = true; 
```

This will write a debug to: /var/debug/[debug_file]

2) Read the file by opening the dir:

```
cd /var/debug/[debug_file] <-- replace with the actual filename
tail -f [debug_file] 
```

3) If you use debug, the file will get HUGE! Make sure you delete it once in a while.
Tip: as a root user, type:

```
crontab -e
*/5 * * * * rm /[my_magento_base_folder]/var/debug/[debug_file] <-- add this line 
```

If you want to read the file, add a # to this line and use tail to read it.

These steps help you find common errors and loops (if the tail shows a repeating error message)

# osgi - How to change bundle start level in glassfish 3.1.2 equinox?

> ID：15136535
> 
> 赞同：0
> 
> 时间：2013-02-28T13:16:30.393
> 
> 标签：osgi, glassfish-3, equinox

I want to change the start level for a bundle in my glassfish. I used equinox as osgi runtime.

I changed the configuration file glassfish\config\osgi.properties and add the folowing line:

osgi.bundles=bundlesymbolicname@5:start

When I connect via telnet and search the bundle with "lb bundleid" I see in the level column 1 instead of 5.

Can anyone help me? What is the problem with my configuration?

Thanks Marco.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:25:22.773

您可以通过更新以下项目在 ${GF_HONE}/glassfish/config/osgi.properties 中进行更改：

```
# What should be the initial start level of framework. 
# For performance reason, initially we set the start level to 1 so that no optional
# bundles can get activated while server is still starting. Once server is started,
# the framework's start level is set to whatever is configured in glassfish.osgi.start.level.final property.
org.osgi.framework.startlevel.beginning=1

# Set bundle start level to be same or less than that of framework, 
# otherwise HK2 installed bundles won't be activated.
# See issue #5934
felix.startlevel.bundle=1 
```

# javascript - Safari document.write() alternative

> ID：15136536
> 
> 赞同：1
> 
> 时间：2013-02-28T13:16:31.580
> 
> 标签：javascript

I am creating a new window in javascript and writing its contents using `document.write()`:

```
var windowContent = '<!DOCTYPE html>';
windowContent += '<html>'
windowContent += '<head><title></title></head>';
windowContent += '<body>'
windowContent += '<img src="' + dataUrl + '" width="670px" style=">';
windowContent += '</body>';
windowContent += '</html>';
var printWin = window.open('','newWindow','width=100,height=100');
printWin.document.open();
printWin.document.write(windowContent);
printWin.document.close();
printWin.focus();
printWin.print();
setTimeout(function() {
  printWin.close();
}, 100); 
```

In most browsers this works fine, but in Safari 6.0.2, the line `printWin.document.write(windowContent);` will occasionally crash the browser, and other times do nothing, resulting in a blank window.

Is there any alternative to `document.write();` that I should be using instead? From googling, the general advice seems to be to use `document.body.appendChild();`, but the document doesn't have any content to begin with to append to.

# django - ImportError: No module named... & Unresolved reference in pycharm

> ID：15136541
> 
> 赞同：1
> 
> 时间：2013-02-28T13:16:39.183
> 
> 标签：django

Trying to run a management command with no success. Was getting an error in terminal ImportError, and in my IDE it would not resolve the models. I found the answer and the issue was that I was not running the management command via manage.py.

The error in terminal would come up when running

`../management/commands$ python import_puzzle.py`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:16:39.183

Instead of calling the management command directly from it's folder. You should run it from the src folder using manage.py:

```
`../src$ python manage.py import_puzzle` 
```

The reason is that `import_puzzle` is actually a management command and must be called using the manage.py. I'm too much of a beginner to elaborate any further! :)

# c# - 带有异步 lambda 的并行 foreach

> ID：15136542
> 
> 赞同：221
> 
> 时间：2013-02-28T13:16:40.937
> 
> 标签：c#, async-await, task-parallel-library, parallel.foreach

我想并行处理一个集合，但我在实现它时遇到了麻烦，因此我希望能得到一些帮助。

如果我想在并行循环的 lambda 中调用 C# 中标记为 async 的方法，就会出现问题。例如：

```
var bag = new ConcurrentBag<object>();
Parallel.ForEach(myCollection, async item =>
{
  // some pre stuff
  var response = await GetData(item);
  bag.Add(response);
  // some post stuff
}
var count = bag.Count; 
```

计数为 0 时会出现问题，因为创建的所有线程实际上只是后台线程，并且`Parallel.ForEach`调用不会等待完成。如果我删除 async 关键字，该方法如下所示：

```
var bag = new ConcurrentBag<object>();
Parallel.ForEach(myCollection, item =>
{
  // some pre stuff
  var responseTask = await GetData(item);
  responseTask.Wait();
  var response = responseTask.Result;
  bag.Add(response);
  // some post stuff
}
var count = bag.Count; 
```

它可以工作，但它完全禁用了等待的聪明，我必须做一些手动异常处理..（为简洁起见已删除）。

如何实现一个`Parallel.ForEach`循环，在 lambda 中使用 await 关键字？是否可以？

Parallel.ForEach 方法的原型采用`Action<T>`as 参数，但我希望它等待我的异步 lambda。

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2013-02-28T13:30:44.903

如果你只想要简单的并行性，你可以这样做：

```
var bag = new ConcurrentBag<object>();
var tasks = myCollection.Select(async item =>
{
  // some pre stuff
  var response = await GetData(item);
  bag.Add(response);
  // some post stuff
});
await Task.WhenAll(tasks);
var count = bag.Count; 
```

如果您需要更复杂的东西，请查看[Stephen Toub 的`ForEachAsync`帖子](https://devblogs.microsoft.com/pfxteam/implementing-a-simple-foreachasync/)。

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2016-08-26T21:02:40.053

您可以使用[AsyncEnumerator NuGet Package](https://www.nuget.org/packages/AsyncEnumerator)`ParallelForEachAsync`中的扩展方法：

```
using Dasync.Collections;

var bag = new ConcurrentBag<object>();
await myCollection.ParallelForEachAsync(async item =>
{
  // some pre stuff
  var response = await GetData(item);
  bag.Add(response);
  // some post stuff
}, maxDegreeOfParallelism: 10);
var count = bag.Count; 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2021-08-24T04:26:25.457

新的 .NET 6 API 之一是[Parallel.ForEachAsync](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.foreachasync)，这是一种安排异步工作的方法，允许您控制并行度：

```
var urls = new [] 
{
    "https://dotnet.microsoft.com",
    "https://www.microsoft.com",
    "https://stackoverflow.com"
};

var client = new HttpClient();

var options = new ParallelOptions { MaxDegreeOfParallelism = 2 };
await Parallel.ForEachAsync(urls, options, async (url, token) =>
{
    var targetPath = Path.Combine(Path.GetTempPath(), "http_cache", url);

    var response = await client.GetAsync(url);

    if (response.IsSuccessStatusCode)
    {
        using var target = File.OpenWrite(targetPath);

        await response.Content.CopyToAsync(target);
    }
}); 
```

另一个例子见[SCOTT HANSELMAN 博客](https://www.hanselman.com/blog/parallelforeachasync-in-net-6)

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2019-07-02T21:44:28.130

用`SemaphoreSlim`你可以实现并行控制。

```
var bag = new ConcurrentBag<object>();
var maxParallel = 20;
var throttler = new SemaphoreSlim(initialCount: maxParallel);
var tasks = myCollection.Select(async item =>
{
  await throttler.WaitAsync();
  try
  {
     var response = await GetData(item);
     bag.Add(response);
  }
  finally
  {
     throttler.Release();
  }
});
await Task.WhenAll(tasks);
var count = bag.Count; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2021-03-15T09:56:53.377

从其他答案和公认的 asnwer 引用的文章中编译的最简单的可能扩展方法：

```
public static async Task ParallelForEachAsync<T>(this IEnumerable<T> source, Func<T, Task> asyncAction, int maxDegreeOfParallelism)
{
    var throttler = new SemaphoreSlim(initialCount: maxDegreeOfParallelism);
    var tasks = source.Select(async item =>
    {
        await throttler.WaitAsync();
        try
        {
            await asyncAction(item).ConfigureAwait(false);
        }
        finally
        {
            throttler.Release();
        }
    });
    await Task.WhenAll(tasks);
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-10-17T11:01:56.637

我的 ParallelForEach 异步的轻量级实现。

特征：

1.  节流（最大并行度）。
2.  异常处理（完成时会抛出聚合异常）。
3.  内存高效（无需存储任务列表）。

 **```
public static class AsyncEx
{
    public static async Task ParallelForEachAsync<T>(this IEnumerable<T> source, Func<T, Task> asyncAction, int maxDegreeOfParallelism = 10)
    {
        var semaphoreSlim = new SemaphoreSlim(maxDegreeOfParallelism);
        var tcs = new TaskCompletionSource<object>();
        var exceptions = new ConcurrentBag<Exception>();
        bool addingCompleted = false;

        foreach (T item in source)
        {
            await semaphoreSlim.WaitAsync();
            asyncAction(item).ContinueWith(t =>
            {
                semaphoreSlim.Release();

                if (t.Exception != null)
                {
                    exceptions.Add(t.Exception);
                }

                if (Volatile.Read(ref addingCompleted) && semaphoreSlim.CurrentCount == maxDegreeOfParallelism)
                {
                    tcs.TrySetResult(null);
                }
            });
        }

        Volatile.Write(ref addingCompleted, true);
        await tcs.Task;
        if (exceptions.Count > 0)
        {
            throw new AggregateException(exceptions);
        }
    }
} 
```

使用示例：

```
await Enumerable.Range(1, 10000).ParallelForEachAsync(async (i) =>
{
    var data = await GetData(i);
}, maxDegreeOfParallelism: 100); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-09T22:39:16.617

我为此创建了一个扩展方法，它利用 SemaphoreSlim 并且还允许设置最大并行度

```
 /// <summary>
    /// Concurrently Executes async actions for each item of <see cref="IEnumerable<typeparamref name="T"/>
    /// </summary>
    /// <typeparam name="T">Type of IEnumerable</typeparam>
    /// <param name="enumerable">instance of <see cref="IEnumerable<typeparamref name="T"/>"/></param>
    /// <param name="action">an async <see cref="Action" /> to execute</param>
    /// <param name="maxDegreeOfParallelism">Optional, An integer that represents the maximum degree of parallelism,
    /// Must be grater than 0</param>
    /// <returns>A Task representing an async operation</returns>
    /// <exception cref="ArgumentOutOfRangeException">If the maxActionsToRunInParallel is less than 1</exception>
    public static async Task ForEachAsyncConcurrent<T>(
        this IEnumerable<T> enumerable,
        Func<T, Task> action,
        int? maxDegreeOfParallelism = null)
    {
        if (maxDegreeOfParallelism.HasValue)
        {
            using (var semaphoreSlim = new SemaphoreSlim(
                maxDegreeOfParallelism.Value, maxDegreeOfParallelism.Value))
            {
                var tasksWithThrottler = new List<Task>();

                foreach (var item in enumerable)
                {
                    // Increment the number of currently running tasks and wait if they are more than limit.
                    await semaphoreSlim.WaitAsync();

                    tasksWithThrottler.Add(Task.Run(async () =>
                    {
                        await action(item).ContinueWith(res =>
                        {
                            // action is completed, so decrement the number of currently running tasks
                            semaphoreSlim.Release();
                        });
                    }));
                }

                // Wait for all tasks to complete.
                await Task.WhenAll(tasksWithThrottler.ToArray());
            }
        }
        else
        {
            await Task.WhenAll(enumerable.Select(item => action(item)));
        }
    } 
```

样品用法：

```
await enumerable.ForEachAsyncConcurrent(
    async item =>
    {
        await SomeAsyncMethod(item);
    },
    5); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-18T10:30:23.080

在接受的答案中，不需要 ConcurrentBag。这是一个没有它的实现：

```
var tasks = myCollection.Select(GetData).ToList();
await Task.WhenAll(tasks);
var results = tasks.Select(t => t.Result); 
```

任何“// some pre stuff”和“// some post stuff”都可以进入GetData实现（或另一个调用GetData的方法）

除了更短之外，没有使用“async void”lambda，这是一种反模式。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-11-11T08:28:14.270

随着**.Net 6** **Parallel.ForEachAsync**的引入，现在可用。

```
using System.Net.Http.Headers;
using System.Net.Http.Json;

var userHandlers = new []
{
    "users/okyrylchuk",
    "users/shanselman",
    "users/jaredpar",
    "users/davidfowl"
};

using HttpClient client = new()
{
    BaseAddress = new Uri("https://api.github.com"),
};
client.DefaultRequestHeaders.UserAgent.Add(new ProductInfoHeaderValue("DotNet", "6"));

ParallelOptions parallelOptions = new()
{
    MaxDegreeOfParallelism = 3
};

await Parallel.ForEachAsync(userHandlers, parallelOptions, async (uri, token) =>
{
    var user = await client.GetFromJsonAsync<GitHubUser>(uri, token);

    Console.WriteLine($"Name: {user.Name}\nBio: {user.Bio}\n");
});

public class GitHubUser
{
    public string Name { get; set; }
    public string  Bio { get; set; }
} 
```

[github](https://github.com/dotnet/runtime/issues/1946)上的完整问题跟踪以及 SCOTT HANSELMAN 的 一些[使用示例](https://www.hanselman.com/blog/parallelforeachasync-in-net-6)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-09T03:16:26.520

以下设置为`IAsyncEnumerable`可使用，但可以`IEnumerable`通过更改类型并删除`foreach`. 它比创建无数并行任务然后等待它们全部更适合大量数据。

```
 public static async Task ForEachAsyncConcurrent<T>(this IAsyncEnumerable<T> enumerable, Func<T, Task> action, int maxDegreeOfParallelism, int? boundedCapacity = null)
    {
        ActionBlock<T> block = new ActionBlock<T>(
           action, 
           new ExecutionDataflowBlockOptions 
           { 
             MaxDegreeOfParallelism = maxDegreeOfParallelism, 
             BoundedCapacity = boundedCapacity ?? maxDegreeOfParallelism * 3 
           });

        await foreach (T item in enumerable)
        {
           await block.SendAsync(item).ConfigureAwait(false);
        }

        block.Complete();
        await block.Completion;
    } 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-02-22T19:29:16.573

对于更简单的解决方案（不确定是否最佳），您可以简单地嵌套`Parallel.ForEach`在 a `Task`- 这样

```
var options = new ParallelOptions { MaxDegreeOfParallelism = 5 }
Task.Run(() =>
{
    Parallel.ForEach(myCollection, options, item =>
    {
        DoWork(item);
    }
} 
```

开箱即用`ParallelOptions`，将为您进行节流。

我在现实世界的场景中使用它在后台运行很长时间的操作。这些操作是通过 HTTP 调用的，它被设计为在长操作运行时不会阻塞 HTTP 调用。

1.  调用 HTTP 进行长时间后台操作。
2.  操作从后台开始。
3.  用户获取状态 ID，可用于使用另一个 HTTP 调用检查状态。
4.  后台操作更新其状态。

这样，CI/CD 调用不会因为长时间的 HTTP 操作而超时，而是每 x 秒循环一次状态而不阻塞进程**

# xml - XML Parse - Loop through different nodes and output as one

> ID：15136545
> 
> 赞同：0
> 
> 时间：2013-02-28T13:16:44.277
> 
> 标签：xml

I have an XML as seen here:

```
 <?xml version="1.0" encoding="UTF-8"?>
<MIFORMS_EXPORT>
  <SESSION FORM_ID="775938" CID="" ID="HAKKI-LAPTOP_634975758376381105">
    <FIELD NAME="A001DATE_M" Y="2.32" X="5.5" WIDTH="7.15" HEIGHT="0.99" />
    <FIELD NAME="A002" Y="2.32" X="17.83" WIDTH="2.38" HEIGHT="0.99" />
    <FIELD NAME="A003" Y="1.11" X="17.83" WIDTH="2.38" HEIGHT="0.99" />
    <FIELD NAME="A004" Y="1.11" X="5.5" WIDTH="2.38" HEIGHT="0.99" />
    <FIELD NAME="OR01" Y="7.02" X="17" WIDTH="2.21" HEIGHT="0.6" />
    <FIELD NAME="OR02" Y="8.02" X="17" WIDTH="2.21" HEIGHT="0.6" />
    <FIELD NAME="OR03" Y="9.02" X="17" WIDTH="2.21" HEIGHT="0.6" />
    <FIELD NAME="OR04" Y="10.02" X="17" WIDTH="2.21" HEIGHT="0.6" />
    <FIELD NAME="OR05" Y="11.02" X="17" WIDTH="2.21" HEIGHT="0.6" />
    <FIELD NAME="OR06" Y="12.02" X="17" WIDTH="2.21" HEIGHT="0.6" />
    <FIELD NAME="OR07" Y="13.02" X="17" WIDTH="2.21" HEIGHT="0.6" />
    <FIELD NAME="OR08" Y="14.02" X="17" WIDTH="2.21" HEIGHT="0.6" />
    <FIELD NAME="OR99" Y="16.52" X="17.5" WIDTH="1.59" HEIGHT="0.99" />
    <FIELD NAME="DESCRIPTOR" Y="25" X="17.5" WIDTH="2" HEIGHT="0.5" />
    <FIELD NAME="A001DATE_M_2" Y="2.32" X="5.5" WIDTH="7.15" HEIGHT="0.99" />
    <FIELD NAME="A002_2" Y="2.32" X="17.83" WIDTH="2.38" HEIGHT="0.99" />
    <FIELD NAME="A003_2" Y="1.11" X="17.83" WIDTH="2.38" HEIGHT="0.99" />
    <FIELD NAME="A004_2" Y="1.11" X="5.5" WIDTH="2.38" HEIGHT="0.99" />
    <FIELD NAME="WTA101" Y="8" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA102" Y="8.7" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA103" Y="9.42" X="5.01" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA104" Y="10.12" X="5.01" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA105" Y="10.82" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA106" Y="11.51" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA107" Y="12.21" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA108" Y="12.91" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA109" Y="13.63" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA110" Y="14.35" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA111" Y="15.07" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA112" Y="15.77" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA113" Y="16.47" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA114" Y="17.18" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA115" Y="17.93" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA116" Y="18.65" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA117" Y="19.38" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA118" Y="20.08" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA119" Y="20.79" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA120" Y="21.5" X="5.01" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA121" Y="22.21" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA122" Y="22.96" X="5.01" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA123" Y="23.66" X="5.01" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA124" Y="24.38" X="5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA201" Y="8.01" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA202" Y="8.71" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA203" Y="9.42" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA204" Y="10.12" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA205" Y="10.82" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA206" Y="11.51" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA207" Y="12.21" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA208" Y="12.91" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA209" Y="13.63" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA210" Y="14.35" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA211" Y="15.07" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA212" Y="15.77" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA213" Y="16.47" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA214" TIMESTAMP="02/27/2013 15:30:43" Y="17.18" X="11.5" WIDTH="2.22" HEIGHT="0.6">1</FIELD>
    <FIELD NAME="WTA215" Y="17.93" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA216" Y="18.65" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA217" Y="19.38" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA218" Y="20.08" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA219" Y="20.8" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA220" Y="21.5" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA221" Y="22.21" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA222" Y="22.97" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA223" Y="23.67" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA224" Y="24.38" X="11.5" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA301" Y="8.01" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA302" Y="8.71" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA303" Y="9.42" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA304" Y="10.12" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA305" Y="10.82" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA306" Y="11.51" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA307" Y="12.21" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA308" Y="12.91" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA309" Y="13.63" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA310" Y="14.35" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA311" Y="15.07" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA312" Y="15.77" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA313" Y="16.47" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA314" Y="17.18" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA315" Y="17.93" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA316" Y="18.65" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA317" Y="19.38" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA318" Y="20.08" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA319" Y="20.8" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA320" Y="21.5" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA321" Y="22.21" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA322" Y="22.97" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA323" Y="23.67" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA324" Y="24.38" X="18" WIDTH="2.22" HEIGHT="0.6" />
    <FIELD NAME="WTA996" Y="25.8" X="3.21" WIDTH="1.59" HEIGHT="0.99" />
    <FIELD NAME="WTA997" Y="25.81" X="8.2" WIDTH="1.59" HEIGHT="0.99" />
    <FIELD NAME="WTA999" Y="25.81" X="18.19" WIDTH="1.59" HEIGHT="0.99" />
    <FIELD NAME="WTA998" Y="25.81" X="13.2" WIDTH="1.59" HEIGHT="0.99" />
    <IMAGE NAME="NewImagemap" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">775938-0-02272013-153112426-HAKKI-LAPTOP_634975758376381105.png</IMAGE>
    <IMAGE NAME="NewImagemap" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">775938-1-02272013-153112504-HAKKI-LAPTOP_634975758376381105.png</IMAGE>
    <IMAGE NAME="NewImagemap" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">775938-2-02272013-153112582-HAKKI-LAPTOP_634975758376381105.png</IMAGE>
  </SESSION>
</MIFORMS_EXPORT> 
```

I want to loop through the FIELD elements and value and also IMAGE Name and Resolution.

I am using C# and have devised this code:

```
 var doc = XDocument.Parse(ea.Result);
    var list = from p in doc.Descendants("FIELD")
               select new ExportData
                   {
                       Height = (string) p.Attribute("HEIGHT"),
                       Width = (string) p.Attribute("WIDTH"),
                       X = (string) p.Attribute("X"),
                       Y = (string) p.Attribute("Y"),
                       ID = (string) p.Attribute("NAME"),
                       Value = p.Value,
                       Image = (from c in doc.Descendants("IMAGE") select c.Value).FirstOrDefault(),
                       Resolution = (from c in doc.Descendants("IMAGE") select c.Attribute("RESOLUTION").Value).FirstOrDefault()
                   };

var enumerable = list as ExportData[] ?? list.ToArray();

foreach (var data in enumerable)
                                {
//output
} 
```

This makes FIELD work fine and I get all the information I need from there. However for IMAGE the same c.Value comes up over and over.

How do I loop through FIELD while looping through IMAGE.Value as well?

Thanks for any ideas.

# php - Imagemagick 文本剪切路径

> ID：15136546
> 
> 赞同：0
> 
> 时间：2013-02-28T13:16:44.363
> 
> 标签：php, imagick, clipping

我想在 Imagemagick 中沿剪切路径剪切文本。我找到了一个使用[pdflib](http://www.pdflib.com/fileadmin/pdflib/Cookbook/pdf/text_with_image_clipping_path.pdf)的解决方案（参见用例 2），但希望纯粹在 php/Imagick 中使用它。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:50:00.747

见[这里](http://imagemagick.org/Usage/text)- 大约 3/4 的地方有关于边界框和文本的讨论......以及它如何溢出。

# tfs - 签入 app.config

> ID：15136547
> 
> 赞同：0
> 
> 时间：2013-02-28T13:16:45.323
> 
> 标签：tfs, visual-studio-2012

我想在控制台应用程序中检查我的 app.config 文件。问题是服务器中的 app.config 包含服务器文件夹，例如：

```
 <add key="OutputFolderPath" value="\\ProductionServer\recordings\" /> 
```

但是由于在本地机器上调试代码。发布文件夹不同。通常我会得到最新的代码并手动修改值。

```
<add key="OutputFolderPath" value="\\TestServer\recordings\" /> 
```

现在我添加了一个在两个地方都存在的新值，如何签入？

我签入时没有发现“解决冲突”，因此我无法合并代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:20:16.800

我的建议是在源代码管理中存储一个模板，该模板使用令牌来引用特定于环境的设置，例如

```
<add key="OutputFolderPath" value="%SERVER_PATH%\recordings\" /> 
```

然后在部署包时，让安装脚本将 %SERVER_PATH% 替换为您要部署到的环境的适当值

# android - MapView display blank

> ID：15136548
> 
> 赞同：0
> 
> 时间：2013-02-28T13:16:45.273
> 
> 标签：android, api, google-maps, android-mapview

I'm using Google Maps Android API v2 with MapView . When I run MapView . It displays blank . What is happening ???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:24:32.053

MapView 不是 Fragment 的子类，因此您不能将其与`<fragment />`标签一起使用。

是的，地图 v2 与地图 v1 非常不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:41:20.513

如果您想使用，`MapView`那么您的活动必须扩展`MapActivity`。现在你有：

```
public class MyActivity extends Activity 
```

这在加载 Google Maps v2 片段时有效，但在加载 Google Maps v1 时无效`MapView`。A`MapView`必须在扩展的活动中创建`MapActivity`。将您的活动更改为

```
public class MyActivity extends MapActivity 
```

这应该可以解决地图视图问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:26:58.760

不要将片段元素与 MapView 一起使用。正确的方法是这样的布局文件：

```
<com.google.android.gms.maps.MapView 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"/> 
```

# c# - 如何使用 IoC 容器在不同的地方使用不同的实现

> ID：15136551
> 
> 赞同：3
> 
> 时间：2013-02-28T13:16:52.160
> 
> 标签：c#, .net, castle-windsor, ioc-container

我想知道如何在不同的客户端中使用一个接口的不同实现。这是示例情况。

```
public interface IRandomIntGenerator
{
    int Generate();
}

public class SimpleRandomIntGenerator : IRandomIntGenerator
{
    public int Generate()
    {
        return new Random().Next();
    }
}

public class CryptoServiceProviderRandomIntGenerator : IRandomIntGenerator
{
    public int Generate()
    {
        var generator = new RNGCryptoServiceProvider();
        byte[] bytes = new byte[4];
        generator.GetBytes(bytes);
        return BitConverter.ToInt32(bytes, 0);
    }
} 
```

然后我有两个客户不想知道特定的实现。一个生成登录代码，另一个选择数组的随机项。

```
public class LogInCodeGenerator
{
    private readonly IRandomIntGenerator randomIntGenerator;

    public LogInCodeGenerator(IRandomIntGenerator randomIntGenerator)
    {
        this.randomIntGenerator = randomIntGenerator;
    }

    public string GenerateCode(int length)
    {
        var builder = new StringBuilder(length);
        for (int i = 0; i < length; i++)
            builder.Append(randomIntGenerator.Generate() % 10);
        return builder.ToString();
    }
}

public class RandomArrayItemChoose
{
    private readonly IRandomIntGenerator randomIntGenerator;

    public RandomArrayItemChoose(IRandomIntGenerator randomIntGenerator)
    {
        this.randomIntGenerator = randomIntGenerator;
    }

    public string Choose(string[] arr)
    {
        return arr[randomIntGenerator.Generate() % arr.Length];
    }
} 
```

我想以这样的方式配置 IoC 容器，它将用于`SimpleRandomIntGenerator`for`RandomArrayItemChoose`和`CryptoServiceProviderRandomIntGenerator`for `LogInCodeGenerator`。

有没有办法用任何流行的 .NET IoC 容器来做到这一点？我对温莎城堡特别感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:30:20.120

使用 Windsor 的服务覆盖。[请参阅Windsor Docs](http://docs.castleproject.org/Windsor.Registering-components-one-by-one.ashx)中的“提供组件以供依赖项使用”部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T16:11:25.293

> 然后我有两个客户不想知道特定的实现。

您的设计似乎有些模棱两可。这些客户可能对确切的实现不感兴趣，但您的系统中似乎有某种要求`LogInCodeGenerator`必须使用加密随机数。

由于这是系统安全的要求，因此最好在设计中明确说明这一点。换句话说，您在这里谈论的是两个单独的合同：

```
interface IRandomIntGenerator { }

interface ICryptographicRandomIntGenerator { } 
```

这不仅使代码的意图更加清晰，而且从设计中消除这种歧义使您的 DI 配置更加简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:34:54.047

您可以命名已注册的实例，然后通过它们的名称访问它们。在您的情况下，如果我理解您的问题，您需要基于请求已解析实例的类进行不同的注入。因此，您可以通过请求类的类型名称来命名您的注册实例。

您将不得不`resolve`手动处理您的实例：

```
IRandomIntGenerator generator = container.Resolve<IRandomIntGenerator>(GetType().Name); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T11:53:36.663

只需显式声明依赖项：

```
Component.
    For<IRandomIntGenerator>().
    ImplementedBy<SimpleRandomIntGenerator>().
    Named("SimpleRandomIntGenerator"),
Component.
    For<IRandomIntGenerator>().
    ImplementedBy<CryptoServiceProviderRandomIntGenerator>().
    Named("CryptoServiceProviderRandomIntGenerator"),
Component.
    For<RandomArrayItemChoose>().
    DependsOn(Dependency.
        OnComponent("randomIntGenerator", "SimpleRandomIntGenerator")),
Component.
    For<LogInCodeGenerator>().
    DependsOn(Dependency.
        OnComponent("randomIntGenerator", "CryptoServiceProviderRandomIntGenerator")), 
```

# python - Handing out Exceptions in Generators

> ID：15136553
> 
> 赞同：4
> 
> 时间：2013-02-28T13:16:57.097
> 
> 标签：python, exception, generator

I often have a generator which iterates over some collection, processes the elements and yields the results. The processing of the elements might raise exceptions. I'd like to handle such an exception happening in such a generator in the caller of the generator, without terminating the generator. After all, just the processing failed, not the iterating, so the generator could well continue with the next iterated element. Example displaying the situation:

```
def generator():
  for element in collection:
    yield process(element)  # might raise Exception

def caller():
  for product in generator():
    doSomethingWith(product) 
```

I'd like to handle the exception thrown in `process()` in `caller()`. Unfortunately, the exception in `process()` will happen in `generator()` and thus terminate the generator (if we do not do something more complicated here). So a naive approach will fail:

```
def generator():
  for element in collection:
    yield process(element)  # might raise Exception

def caller():
  for product in generator():
    try:   # wrong place for try, as the loop will already fail
      doSomethingWith(product)
    except Exception as problem:
      handleProblem(problem) 
```

My working but flawed approach currently is to hand out the exception as yielded value:

```
def generator():
  for element in collection:
    try:
      yield process(element)  # might raise Exception
    except Exception as problem:
      yield problem

def caller():
  for yielded in generator():
    if isinstance(yielded, Exception):
      problem = yielded
      handleProblem(problem)
    else:
      product = yielded
      doSomethingWith(product) 
```

This works but has several drawbacks like

*   It depends on the fact that the product and the exception can be distinguished (won't work on generators which normally yield exceptions). We could use wrapping to solve that of course.
*   It needs that ugly check-pattern right after the receiving of the generated value (`if isinstance(...)`).
*   It does not use the normal Python exception handling, so things like re-raising the exceptions might pose a problem (didn't check on that thoroughly).

Do you have any better approach on this? I'd prefer to use some `try`/`except` pattern in the `caller()` for handling the exception instead of using `if` as it provides more flexibility like catching only specific exceptions (and others not).

# iphone - how can I get formatted address

> ID：15136556
> 
> 赞同：0
> 
> 时间：2013-02-28T13:17:07.290
> 
> 标签：iphone, xcode

How can I get formatted address like ***Covington, AL, USA*** of google web service in my iphone

from the below url [http://maps.google.com/maps/api/geocode/xml?latlng=31.319016,-86.399871&sensor=false](http://maps.google.com/maps/api/geocode/xml?latlng=31.319016,-86.399871&sensor=false)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:32:39.117

```
- (void) getAddress
{
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://maps.google.com/maps/api/geocode/json?latlng=31.319016,-86.399871&sensor=false"]];
    NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:nil];
    NSString *str = [[[dict objectForKey:@"results"] objectAtIndex:0] valueForKey:@"formatted_address"];
    NSLog(@"Address = %@", str);

} 
```

使用这个 json 这比 xml 快得多。

# android - 从 Android 相机拍摄多张照片后应用程序崩溃

> ID：15136560
> 
> 赞同：1
> 
> 时间：2013-02-28T13:17:27.257
> 
> 标签：android, android-camera

我正在为 Android 开发一个应用程序，它应该从相机拍照并将这些图像用作应用程序的个人资料图片。但是，该应用程序在前 3-4 张照片上运行良好，但是当我尝试拍摄更多照片时，该应用程序崩溃了。原因是内存泄漏。

这是相机启动意图的代码：

```
String fileName = "temp.jpg";
ContentValues values = new ContentValues();
values.put(MediaStore.Images.Media.TITLE, fileName);
mCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
takePictureIntent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI);
startActivityForResult(takePictureIntent,RESULT_LOAD_IMAGE_CAMERA); 
```

这是接收意图的代码：

```
if (requestCode == RESULT_LOAD_IMAGE_CAMERA && resultCode == RESULT_OK ) {
    String[] projection = { MediaStore.Images.Media.DATA};
    Cursor cursor = managedQuery(mCapturedImageURI, projection, null, null, null);
    final int column_index_data = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    String capturedImageFilePath = cursor.getString(column_index_data);
    profilePic.setImageURI(Uri.fromFile(new  File(capturedImageFilePath)));
} 
```

这是日志：

```
02-28 18:28:36.727: E/dalvikvm-heap(4081): 9830400-byte external allocation too large for this process.
02-28 18:28:36.727: E/GraphicsJNI(4081): VM won't let us allocate 9830400 bytes
02-28 18:28:36.824: E/AndroidRuntime(4081): FATAL EXCEPTION: main
02-28 18:28:36.824: E/AndroidRuntime(4081): java.lang.OutOfMemoryError: bitmap size    exceeds VM budget
02-28 18:28:36.824: E/AndroidRuntime(4081):     at   android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at   android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:562)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at  android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:426)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.graphics.drawable.Drawable.createFromStream(Drawable.java:657)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.widget.ImageView.resolveUri(ImageView.java:509)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.widget.ImageView.setImageURI(ImageView.java:293)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at com.octanetech.cortes.ProfileActivity.onActivityResult(ProfileActivity.java:596)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.app.Activity.dispatchActivityResult(Activity.java:3890)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3511)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3557)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.app.ActivityThread.access$2800(ActivityThread.java:125)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2063)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.os.Looper.loop(Looper.java:123)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at android.app.ActivityThread.main(ActivityThread.java:4627)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at java.lang.reflect.Method.invokeNative(Native Method)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at java.lang.reflect.Method.invoke(Method.java:521)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
02-28 18:28:36.824: E/AndroidRuntime(4081):     at dalvik.system.NativeStart.main(Native Method) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:25:48.177

替换此行

```
profilePic.setImageURI(Uri.fromFile(new  File(capturedImageFilePath))); 
```

您正在直接从 sdcard 加载图像，它可能会导致内存问题的大小。

试试这个

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize=8;      // 1/8 of original image
Bitmap b = BitmapFactory.decodeFile(capturedImageFilePath,options);
profilePic.setImageBitmap(b); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T05:39:38.680

最后我自己解决了这个问题。导致内存泄漏的主要问题是我没有**回收**位图对象。我只是用另一个位图图像**替换位图对象。**以为对象被另一个位图图像替换了，但之前的位图图像仍然存在于内存中。因此，在从相机拍摄多张图像时，位图图像堆积起来并引发了内存不足的异常。

因此，在将新图像分配给 Bitmap 对象之前，我玩了一个技巧来回收（删除）Bitmap 图像。我刚用

```
mImageBitmap.recycle(); 
```

这会清除之前的位图图像，并且没有发生内存泄漏。希望它也对其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:16:30.470

尝试使用 inSampleSize 缩放较大的位图，如下所示：摘自@Fedor 的惰性列表 [https://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/ImageLoader.java](https://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/ImageLoader.java)

**公共 int inSampleSize**

如果设置为大于 1 的值，则请求解码器对原始图像进行二次采样，返回较小的图像以节省内存。

```
//decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            FileInputStream stream1=new FileInputStream(f);
            BitmapFactory.decodeStream(stream1,null,o);
            stream1.close();

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            FileInputStream stream2=new FileInputStream(f);
            Bitmap bitmap=BitmapFactory.decodeStream(stream2, null, o2);
            stream2.close();
            return bitmap;
        } catch (FileNotFoundException e) {
        } 
        catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    } 
```

希望这对您有所帮助：

# c# - WinForms - wrong form size

> ID：15136564
> 
> 赞同：7
> 
> 时间：2013-02-28T13:17:36.083
> 
> 标签：c#, winforms

We have the following code:

```
 private void MainForm_Shown(object sender, EventArgs e)
    {
        RepositionForm();
    }

    private void RepositionForm()
    {
        Rectangle rect = Screen.PrimaryScreen.WorkingArea;
        this.Width = 100;
        this.Height = 117;
        this.TopMost = true;
        this.Left = rect.Width - this.Width - 1;
        this.Top = rect.Height - this.Height - 1;
    } 
```

When we launch the app from Visual Studio - the form is shown of correct size: 100x117. However, when we launch the project by launching EXE file, the form size is 106x127.

```
The MinimumSize, MaximumSize and Size properties are set to 100x117.
WindowsState = Minimized
ShowIcon = False
ShowInTaskbar = False
Topmost = True
MinimizeBox - False
MaximizeBox = False
FormBorderSize = FixedDialog
ControlBox = True 
```

How can that happen that there's even a difference between how the app is launched?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:36:39.700

我会冒险猜测问题出在 Windows 主题和/或桌面窗口管理器对您的操作系统版本不是确定性的。

尝试将您的 Windows 主题设置为基本（桌面->个性化），然后重新运行测试。如果你得到不同的结果，你知道它取决于 Windows，而不是你的代码。

此外，您可能想检查 Windows 框架的非客户区，看看它是否从操作系统/主题发生变化。

# javascript - javascript form validation object

> ID：15136565
> 
> 赞同：0
> 
> 时间：2013-02-28T13:17:36.390
> 
> 标签：javascript

Please i just started learning javascript, In order to build my skill. I gave myself a javascript project to build an object validator.The first method i created is checkEmpty. This method check for empty field. But for reason unknow to me the method don't work.

**This is the html form**

```
 <form name="myForm">

      <input type="text" class="required email" name='fName'/>
      <input type="text" class="required number"  name="lName"/>

       <input type="submit" value="submit" name="submit" id="submit"/>

     </form> 
```

**This is the javascript that called the validator object**

```
 window.onload = function(){
 var validate = new FormValidator('myForm');    
 var submit = document.getElementById('submit');

     //this method won't work for internet explorer
 submit.addEventListener('click',function(){return checkLogic();},false);   
 var checkLogic = function(){
    validate.checkEmpty('fName');                   
};  

   } 
```

This is the javascript object called Formvalidation

```
 function FormValidator(myForm){
  //check ur error in stack overflow;
   this.myForm = document.myForm;   

    this.error = '';

    if(typeof this.myForm === 'undefined'){

      alert('u did not give the form name ');
      return;
     }

    } 
```

//this method will check wheather a field is empty or not

```
 FormValidator.prototype.checkEmpty = function(oEmpty){  
     var oEmpty =  this.myForm.oEmpty;
     if(oEmpty.value === '' || oEmpty.value.length === 0){
    this.error += "Please Enter a valid Error Message \n";

      }
     FormValidator.printError(this.error);

     }; 
```

**This method printout the error;**

```
 FormValidator.printError = function(oData){
       alert(oData);
     }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:58:16.920

格式化代码后，找出问题所在就容易多了。我假设您正在尝试验证 html 代码中的输入字段。

您的代码第一次出现在方法 checkEmpty() 的第 1 行：

```
FormValidator.prototype.checkEmpty = function(oEmpty){
    var oEmpty =  this.myForm.oEmpty;
    if(oEmpty.value === '' || oEmpty.value.length === 0){
        this.error += "Please Enter a valid Error Message \n";

    }
    FormValidator.printError(this.error);
}; 
```

在第一行中，您使用第 1 行的 var oEmpty 语句隐藏方法参数 oEmpty

还有其他几个问题，例如过度使用方法和成员。以下代码可能是您想要的：

1.) index.html

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title></title>
</head>
<body>
    <form name="myForm">
        <input id="fName" name='fName' type="text"/>
        <input id="lName" name="lName" type="text"/>
        <input id="submit" name="submit" type="submit" value="submit"/>
    </form>
    <script src="main.js"></script>
</body>
</html> 
```

2.) main.js

```
function InputFieldValidator(inputFieldName){
    this.inputFieldName = inputFieldName;
    this.inputField = document.getElementById(this.inputFieldName);
    if(this.inputField === 'undefined'){
        alert('No input field: ' + this.inputFieldName);
    }
}

InputFieldValidator.prototype.validate = function(){
    if(this.inputField.value === ''){
        alert('Please enter valid text for input field: ' + this.inputFieldName);
    }
};

window.onload = function(){
    var fNameValidator = new InputFieldValidator('fName'),
        lNameValidator = new InputFieldValidator('lName'),
        submitButton = document.getElementById('submit');

    submitButton.addEventListener('click', function (){
        fNameValidator.validate();
        lNameValidator.validate();
    });
}; 
```

如果您愿意，可以轻松地将上面的输入字段验证器包装在表单验证器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:23:47.820

这是以这种方式定义函数的正确方法：

```
var FormValidator = function(myForm){ /* function body */ };
    FormValidator.prototype.checkEmpty = function(oEmpty){ /* function body */ }; 
```

然后，在实例化对象之后，您可以`FormValidator.checkEmpty(value)`像以前一样调用。

# php - Which SPL interface I must implement to be able to use usort() function on an object?

> ID：15136568
> 
> 赞同：2
> 
> 时间：2013-02-28T13:17:46.197
> 
> 标签：php, spl, usort

I have a class that represents a collection entity : it has only one attribute, an array. This class implements `\Countable`, `\IteratorAggregate`, and the most important for this question, `\ArrayAccess`.

But when using :

```
 usort($collectionData, function($a, $b) {
            return ($a->getPosition() > $b->getPosition());
        }); 
```

I get the following catchable exception :

> Warning: usort() expects parameter 1 to be array, object given in /home/alain/workspace/(...)n.php line 1057 (500 Internal Server Error)

I can trick using an intermediate variable :

```
 $data = $collectionData->getData();
        usort($data, function($a, $b) {
            return ($a->getPosition() > $b->getPosition());
        });
        $collectionData->setData($data); 
```

But wanted to know if there is an SPL interface that can pass through the array parameter type expectation of `usort()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:39:37.683

我真的认为你应该扩展的唯一类是 `ArrayIterator`因为它已经实现了

> ArrayIterator 实现了 Iterator , Traversable , ArrayAccess , SeekableIterator , Countable , Serializable

它还支持

```
 public void uasort ( string $cmp_function )
 public void uksort ( string $cmp_function ) 
```

[还有很多其他方法](http://php.net/manual/en/class.arrayiterator.php)

所以你的课很简单

```
class CollectionEntity extends ArrayIterator {
} 
```

然后

```
$collectionData->uasort(function ($a, $b) {
    return ($a->getPosition() > $b->getPosition());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:23:42.343

从来没听说过。没有接口会使你的对象也是一个`array`，这就是你需要传递给`usort()`. `usort()`但是，您可以通过向您的类添加方法来将此行为封装在您的类中。

```
class CollectionEntity implements Countable, IteratorAggregate, ArrayAccess {

  private $data = array();

  /* other methods omitted for simplicity */

  public function usort(Closure $callback) {
    usort($this->data,$callback);
  }

} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-28T13:27:36.063

没有这样的接口，数组函数*只能*作用于原生数组。但是，您可以将 Traversables 转换为`IteratorAggregate`数组，例如[`iterator_to_array`](http://php.net/iterator-to-array)

顺便说一句，这里有一个解释为什么特别`ArrayAccess`没有帮助：[PHP：我如何排序和过滤一个“数组”，即一个对象，实现 ArrayAccess？](https://stackoverflow.com/questions/14919172/php-how-can-i-sort-and-filter-an-array-that-is-an-object-implementing-array/14919719#14919719)

# java - 如何安装自定义验证器作为 Eclipse 插件的一部分？

> ID：15136584
> 
> 赞同：1
> 
> 时间：2013-02-28T13:18:40.190
> 
> 标签：java, eclipse-rcp

我想为给定的 Eclipse 插件安装自定义验证器。此验证器与 [任何文件]->右键单击->验证中的验证器相同。这甚至可能吗？我似乎找不到任何有用的资源，因为“验证”只是让我得到与 Eclipse RCP 相关的各种随机谷歌结果。

# asp.net-mvc - AttributeRouting 生成指定语言的链接

> ID：15136589
> 
> 赞同：0
> 
> 时间：2013-02-28T13:18:56.273
> 
> 标签：asp.net-mvc, attributerouting

我想知道是否有某种方法可以`Html.ActionLink`用来设置必须使用哪种语言生成链接的 URL `AttributeRouting`。我尝试过：

```
Html.ActionLink("DescriptionLinkText", "Controller", "Action",
                new { language="en" }, null) 
```

但它不起作用。有没有办法设置必须`AttributeRouting`以哪种语言生成 URL。

我需要的是在我的网站链接顶部放置以更改当前语言。例如，如果用户在 /en/contact 并单击链接以更改为西班牙语，我希望重新加载同一页面，但使用西班牙语 /es/contacto 而不是重定向到主页，因此我需要在CurrentCulture 的不同文化允许更改语言并继续到同一页面。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:22:13.633

为什么不使用资源进行本地化？

```
@Html.ActionLink(LocalizedResources.ActionLinkLabel, "Action", "Controller") 
```

更新：

```
@Html.ActionLink(LocalizedResources.ActionLinkLabel, LocalizedResources.Action, LocalizedResources.Controller) 
```

# git - 我这几次 git pull --rebase 发生了什么错误“您对以下文件的本地更改将被合并覆盖”

> ID：15136590
> 
> 赞同：9
> 
> 时间：2013-02-28T13:18:56.700
> 
> 标签：git, git-rebase

我曾经`git pull --rebase`提取最新的代码，而我有一个提交是远程来源的负责人。但是我第一次尝试两次时出错，但在第三次时，它运行良好。

## **第一次：**

```
remote: Counting objects: 165, done.
remote: Compressing objects: 100% (56/56), done.
remote: Total 111 (delta 77), reused 84 (delta 50)
Receiving objects: 100% (111/111), 18.37 KiB, done.
Resolving deltas: 100% (77/77), completed with 45 local objects.
From github.com:gumichina/crosskaiser-native
   e39c920..0491ecf  master     -> origin/master
First, rewinding head to replay your work on top of it...
Applying: complete friend list
Using index info to reconstruct a base tree...
M   application/Resources/CrossKaiser.ccbresourcelog
<stdin>:62: trailing whitespace.

<stdin>:100: trailing whitespace.

<stdin>:190: new blank line at EOF.
+
warning: 3 lines add whitespace errors.
Falling back to patching base and 3-way merge...
error: Your local changes to the following files would be overwritten by merge:
    application/Classes/CoverLayer/CoverLayer.cpp
    application/Classes/Friend/FriendList.cpp
    application/Classes/Friend/FriendList.h
    application/Classes/Friend/FriendListItem.h
    application/Classes/Friend/FriendListScene.cpp
Please, commit your changes or stash them before you can merge.
Aborting
Failed to merge in the changes.
Patch failed at 0001 complete friend list
The copy of the patch that failed is found in:
   /Users/tangyue/project/crosskaiser-native/.git/rebase-apply/patch

When you have resolved this problem, run "git rebase --continue".
If you prefer to skip this patch, run "git rebase --skip" instead.
To check out the original branch and stop rebasing, run "git rebase --abort". 
```

然后我输入`git status`，如下图所示：

```
# Not currently on any branch.
# You are currently rebasing.
#   (all conflicts fixed: run "git rebase --continue")
#
nothing to commit, working directory clean 
```

奇怪的是它变成了一个**分离分支**，并且**没有任何更改的文件**。

所以我用`git rebase --abort`.

## **第二次：**

```
First, rewinding head to replay your work on top of it...
Applying: complete friend list
Using index info to reconstruct a base tree...
M   application/Resources/CrossKaiser.ccbresourcelog
<stdin>:62: trailing whitespace.

<stdin>:100: trailing whitespace.

<stdin>:190: new blank line at EOF.
+
warning: 3 lines add whitespace errors.
Falling back to patching base and 3-way merge...
error: Your local changes to the following files would be overwritten by merge:
    application/Classes/Friend/FriendListItem.cpp
    application/Classes/Friend/FriendListScene.cpp
Please, commit your changes or stash them before you can merge.
Aborting
Failed to merge in the changes.
Patch failed at 0001 complete friend list
The copy of the patch that failed is found in:
   /Users/tangyue/project/crosskaiser-native/.git/rebase-apply/patch

When you have resolved this problem, run "git rebase --continue".
If you prefer to skip this patch, run "git rebase --skip" instead.
To check out the original branch and stop rebasing, run "git rebase --abort". 
```

然后，我看了看`git status`：

```
# Not currently on any branch.
# You are currently rebasing.
#   (all conflicts fixed: run "git rebase --continue")
#
nothing to commit, working directory clean 
```

这和第一次非常**相似。**

我再次中止了它`git rebase --abort`。

## **第三次：**

```
First, rewinding head to replay your work on top of it...
Applying: complete friend list
Using index info to reconstruct a base tree...
M   application/Resources/CrossKaiser.ccbresourcelog
<stdin>:62: trailing whitespace.

<stdin>:100: trailing whitespace.

<stdin>:190: new blank line at EOF.
+
warning: 3 lines add whitespace errors.
Falling back to patching base and 3-way merge... 
```

这一次，它运行良好，没有错误。

现在日志如下所示：

```
* 25f45f8 (HEAD, master) complete friend list
* 0491ecf (origin/master, origin/HEAD) add need_level to stage
* 8eb488e modify deck manager
* 1deef55 add status bar for sell scene
* 46f57b5 manage dialog&menu button priority
* 491d7e6 modify card template
* 9d09b34 add stamina dialog
* e39c920 complete TextInput
* a60d1b3 fix the name of template 
```

谁能告诉我，在所有操作过程中发生了什么？为什么我可以`git pull --rebase`在两次错误后正确？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T15:21:21.110

可能与[此](https://stackoverflow.com/questions/5074136/git-rebase-fails-your-local-changes-to-the-following-files-would-be-overwritte)有关。我和你一样的问题很久了，这有帮助。不过，我无法就其原因找到任何共识（这里有一些更多的[讨论](http://git.661346.n2.nabble.com/git-rebase-keeps-saying-local-changes-would-conflict-what-changes-td7561560.html)）。似乎有些东西正在改变文件元数据，本质上是重置文件的 ctime，因此 git 在依赖 ctime 信息时不会将它们识别为已更改。

git 文档的链接`trustctime`：[git-config](http://www.kernel.org/pub/software/scm/git/docs/git-config.html) , [git-update-index](http://www.kernel.org/pub/software/scm/git/docs/git-update-index.html)

# php - Qt & PHP：使用附加密钥上传文件

> ID：15136598
> 
> 赞同：0
> 
> 时间：2013-02-28T13:19:18.983
> 
> 标签：php, qt, post, upload

我已经设法让我的文件上传脚本代码到我的服务器工作。这是一段非常愚蠢的代码，目前接受每个文件。这意味着，每个访问脚本的人都可以立即上传文件。

这是我当前的 PHP 代码，它将接收 POST 数据并处理请求：

```
<?php
$uploaddir = '/var/www/uploads/';
$uploadfile = $uploaddir.basename($_FILES['userfile']['name']);

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile))
{
    echo "OKAY";
}
else
{
    echo "NOT SO OKAY";
}
?> 
```

为了防止世界其他地方将文件上传到我的服务器，我将在请求中发送一个 MD5-Hash 密钥，并且基本上只是在代码周围包装一个“if($key == $serverkey)”。

所以它应该是这样的：

```
<?php
if ($_POST['key'] == $serverkey)
{
    $uploaddir = '/var/www/uploads/';
    $uploadfile = $uploaddir.basename($_FILES['userfile']['name']);

    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile))
    {
        echo "OKAY";
    }
    else
    {
        echo "NOT SO OKAY";
    }
}
else
{
    echo "WRONG KEY";
}
?> 
```

我现在的问题是......如何以正确的方式将密钥附加到请求中，以便之后可以访问“$_POST ['key']”以及文件？我不希望密钥意外应用于文件数据。

该文件在 Qt 中附加了以下代码：

```
data.append(QString("--" + bound + "\r\n").toLatin1());
data.append("Content-Disposition: form-data; name=\"" + url + "\"\r\n\r\n");
data.append(scriptName + "\r\n");
data.append("--" + bound + "\r\n");
data.append("Content-Disposition: form-data; name=\"" + inputName + "\"; filename=\"" + inf.fileName() + "\"\r\n");
data.append("Content-Type: application/octet-stream\r\n\r\n");
if (!file.open(QIODevice::ReadOnly)) return;
data.append(file.readAll());
data.append("\r\n");
data.append("--" + bound + "--\r\n"); 
```

文件是否已经限制在边界内？

如果我只附加这样的另一行，PHP 会知道两者之间的区别：

```
data.append("&key=" + key); 
```

我需要“&”吗？我在谷歌上找不到任何东西......要么有严格的文件上传，要么有一些值，比如通过 POST 发送的密钥，但绝不会在同一个请求中同时出现。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:49:06.753

根据要求，我的评论作为答案。

由于您正在检查`$_POST`，因此必须在您的请求中添加一个额外的 POST 参数。我认为，您还可以签`$_GET`入您的 PHP 脚本并附`?key=md5stuff`加到您的 URL。

# asp.net-mvc - JSON 与 JSONP 与 CORS

> ID：15136602
> 
> 赞同：2
> 
> 时间：2013-02-28T13:19:32.880
> 
> 标签：asp.net-mvc, json, jsonp, cors

任何人都可以从 asp.net MVC 的角度帮助我理解 JSON、JSONP 和 CORS 之间的区别吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T18:12:35.817

JSON 是一种数据格式，而 JSON-P 和 CORS 是用于对数据进行跨域请求的机制/协议。

**JSON**是一种表示数据的格式。它最初是在 JavaScript 中定义的，但已经发展成为 API 表示数据的事实上的方式。大多数语言都有解析 JSON 的库。您可以在此处了解有关此格式的更多信息：http: [//json.org/](http://json.org/)。这是一个示例 JSON 对象：

```
{
  "key": "value"
} 
```

**JSON-P**是一种在 JavaScript 中加载数据的机制。它绕过浏览器的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)以从另一个域加载数据。它通过`script`在页面上嵌入 JavaScript 来做到这一点。此脚本调用远程域，该域返回包装在 JavaScript 函数中的数据。当这个函数返回浏览器时，它被执行，允许调用代码访问数据。

请注意，虽然名称中有“JSON”一词，但 JSON-P 不一定必须与 JSON 一起使用。例如，它可以将字符串或任何其他有效的 JavaScript 数据类型返回给用户。

请注意，虽然 JSON-P 在每个浏览器中都可以使用，但绕过浏览器的同源策略是一种技巧，并且有一些限制。例如，它只能发出 GET 请求，而调用者无权访问响应标头。由于它是浏览器和 JavaScript 自定义的，JSON-P 并不适合从其他语言访问数据，例如服务器端 Python。

您可以在此处了解有关 JSON-P 的更多信息：[http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

**CORS**是一种用于发出跨域请求的标准化机制。[大多数现代浏览器](http://caniuse.com/#search=cors)都支持它。客户端使用标准 XmlHttpRequest 对象发出 CORS 请求。服务器收到请求后，决定是否允许跨域请求。如果允许，服务器会发出允许将响应传递给客户端的特殊标头。

您可以在此处找到 CORS 规范：http: [//www.w3.org/TR/cors/](http://www.w3.org/TR/cors/) 您可以在此处了解有关如何使用 CORS 的更多信息：http: [//www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

所有这些技术都独立于 ASP.NET MVC。如果您想使用这些技术，您应该首先问自己“我需要跨域访问数据吗？” 如果答案是“是”，那么您应该问“我需要支持哪些浏览器/平台？” 如果您的答案是“最现代的浏览器”，那么您应该考虑实施 CORS。否则你应该使用 JSON-P

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T13:21:51.753

CORS 是一种规范，它与 JSONP 无关，只是在较新的浏览器中使其过时。它使用普通的 XMLHttpRequest 调用启用跨域请求。

以下是它如何工作以及如何使用它[的概述。](http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/)它可以在 Firefox 3.5+、Safari 4+、Chrome 3+、Internet Explorer 8+ 以及[使用相同引擎之一的任何其他](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)设备中使用。

有关详细信息，请继续阅读

> [http://json-p.org/](http://json-p.org/)

# drupal - 自定义 user_register_submit 中的用户 ID

> ID：15136603
> 
> 赞同：2
> 
> 时间：2013-02-28T13:19:35.103
> 
> 标签：drupal, drupal-6

我创建了一个自定义模块来发送包含注册用户数据的邮件。我用过`custom_user_register_submit`，但我没有得到注册的用户 ID。有什么方法可以在函数中获取用户 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:41:37.213

您可以使用该功能`user_load`。

我想，你知道用户登录名（例如“example_user”）。在这种情况下，您可以使用以下代码：

```
$user_name = "example_user";
$account = user_load(array("name" => $user_name));
$user_id = $account->uid; 
```

# java - 使用 spring-security 登录 Facebook

> ID：15136605
> 
> 赞同：2
> 
> 时间：2013-02-28T13:19:43.240
> 
> 标签：java, facebook, spring, spring-security

我正在尝试将 facebook 登录添加到我的 Spring 项目中。我可以将用户添加到数据库中，但我仍然需要使用我的 Spring 安全性对他进行身份验证。有谁知道如何做到这一点，或者你知道一个好的教程？

FBLogin.js

```
$(document).ready(function () {
function postFunction(type, username, typeUsername, firstname, lastname, id){
    $.post(location.protocol + '//' + location.host + '/ProjectTeamF-     1.0/user/addSocial.html', {
        type:type,
        userName:username,
        typeUserName:typeUsername,
        firstName:firstname,
        lastName:lastname,
        id:id
    }, function (data) {

        window.location = "http://localhost:8080/ProjectTeamF-1.0/" + data;
    });
}

FB.Event.subscribe('auth.login', function (response) {
    login();
});

FB.Event.subscribe('auth.logout', function (response) {
    logout();
});

function login() {
    var fbFirstName;
    var fbLastName;
    var fbId;
    var fbUserName;
    var fbScreenName;

    FB.api('/me', function (response) {
        if (response.username == null) {
            fbScreenName = response.first_name + response.last_name;
            fbUserName = response.first_name + response.last_name;
        } else {
            fbScreenName = response.username;
            fbUserName = response.username;
        }
        fbFirstName = response.first_name;
        fbLastName = response.last_name;
        fbId = response.id;
        postFunction('Facebook',fbUserName, fbScreenName, fbFirstName, fbLastName, fbId);
    });

}

function logout() {

} 
```

})

我的控制器中的 AddSocialUser 方法

```
@RequestMapping(value = "/user/addSocial", method = RequestMethod.POST)
public
@ResponseBody
String addSocialContact(HttpServletRequest request, HttpSession session) {
    User user = new User();

    if (userService.findUser(request.getParameter("userName")) == null) {
        user.setUsername(request.getParameter("userName"));
        user.setPassword(request.getParameter("id"));
        user.setFirstName((request.getParameter("firstName")));
        user.setLastName(request.getParameter("lastName"));

        userService.addUser(user);

    } else {
        user = userService.findUser(request.getParameter("userName"));
    }

   List<GrantedAuthority> gaList = new ArrayList<GrantedAuthority>();
    gaList.add(new GrantedAuthorityImpl("ROLE_USER"));
    org.springframework.security.core.userdetails.User usersec = new  org.springframework.security.core.userdetails.User(user.getUsername(), user.getPassword(), true, true, true, true, gaList);
    Authentication auth = new UsernamePasswordAuthenticationToken(usersec, user.getPassword(), gaList);
    org.springframework.security.core.context.SecurityContext sc = new SecurityContextImpl();
    sc.setAuthentication(auth);
    org.springframework.security.core.context.SecurityContextHolder.setContext(sc);

    return "/ProjectTeamF-1.0/j_spring_security_check";
} 
```

编辑：这是我们的 spring-security.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
         xmlns:beans="http://www.springframework.org/schema/beans"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http auto-config="true">
    <intercept-url pattern="/user/admincp-*.html" access="ROLE_USER" />
    <intercept-url pattern="/TripParticipants/*.html" access="ROLE_USER" />
    <intercept-url pattern="/editUserequipment/*.html" access="ROLE_USER" />
    <intercept-url pattern="/TripCategorie/*.html" access="ROLE_USER" />
    <intercept-url pattern="/StopPlaats/*.html" access="ROLE_USER" />
    <intercept-url pattern="/trip/join/*.html" access="ROLE_USER" />
    <intercept-url pattern="/trip/addTrip.html" access="ROLE_USER" />
    <form-login login-page="/general/login.html" default-target-url="/general/index.html"
                authentication-failure-url="/user/loginfailed.html" />
    <logout logout-success-url="/" />
</http>

<authentication-manager >
       <authentication-provider >
           <password-encoder hash="plaintext"/>
        <jdbc-user-service data-source-ref="dataSource"

          users-by-username-query="
          select username,password ,true
          from t_user where username=?"
          authorities-by-username-query="
          select username, 'ROLE_USER' from t_user where username=? "/>
    </authentication-provider>
</authentication-manager> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:43:00.750

如果您只想验证您的用户，那么只需执行

```
org.springframework.security.core.userdetails.User user = new User(login, password, true, true, true, true, new ArrayList<GrantedAuthority>());
Authentication auth = new UsernamePasswordAuthenticationToken(user, password, new ArrayList<GrantedAuthority>());
org.springframework.security.core.context.SecurityContext sc = new SecurityContextImpl();
sc.setAuthentication(auth);
org.springframework.security.core.context.SecurityContextHolder.setContext(sc); 
```

并确保当前和所有后续的 http 请求都被 spring 安全过滤器覆盖。如果所有用户信息都来自 Facebook，则不需要 DB 用户。

# android - 拍照后相机预览变黑

> ID：15136610
> 
> 赞同：0
> 
> 时间：2013-02-28T13:19:58.700
> 
> 标签：android, android-camera, freeze

在我的 Android 应用程序中，我想拍照。我有三星galaxy Gio（Android 2.3.3）并且我只是在使用`camera.takePicture(null, null, Activity.this);`，在我的Activity中我实现了`PictureCallback`方法并且一切都很好，直到我在Sony Xperia S（Android 4.0）上检查了我的应用程序，在这款手机上预览没有冻结但是它拍了一张照片，所以我`camera.stopPreview()`在拍照后添加了功能，现在它在 Xperia S 上运行良好，但在我的三星 GIO 上实现此功能后，我的屏幕在拍照后变黑，有人知道如何解决吗？感谢帮助

这是我的代码：

当用户单击框架布局时，我使用：

```
case R.id.camera_preview:
        camera.takePicture(null, null, Activity.this);
        break; 
```

在Activity中我实现了picturecallback方法：

```
public void onPictureTaken(byte[] data, Camera arg1) {
    imageData = data;
    cam_preview.stopPreview();
} 
```

我没有立即保存图像，因为我让用户选择保存或不保存图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:25:14.423

来自[http://developer.android.com/reference/android/hardware/Camera.html#takePicture(android.hardware.Camera.ShutterCallback, android.hardware.Camera.PictureCallback, android.hardware.Camera.PictureCallback, android.hardware .Camera.PictureCallback）](http://developer.android.com/reference/android/hardware/Camera.html#takePicture%28android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback%29)：

“拍摄图像后将停止预览；调用者如果要重新开始预览或拍摄更多照片，必须再次调用 startPreview()。”

所以根据这个图片回调应该如下：

```
public void onPictureTaken(byte[] data, Camera arg1) {
     imageData = data;
     cam_preview.startPreview();
} 
```

# jquery - 是否有任何允许自定义 jquery-ui 的 CDN？

> ID：15136613
> 
> 赞同：0
> 
> 时间：2013-02-28T13:20:11.190
> 
> 标签：jquery, jquery-ui, customization, cdn

我们在我们的服务中只使用了一些 jquery-ui 库，目前是 Sortable。这些库取自谷歌的 CDN，因为

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript" ></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js" type="text/javascript" ></script> 
```

目前我们需要优化客户端，google似乎不支持jquery-ui的自定义，但是有这种类型的东西会很不错

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript" ></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js?modules=core,widget,mouse,sortable" type="text/javascript" ></script> 
```

是否有任何 CDN 可以提供这种功能，或者我们应该托管我们自己的自定义库版本？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T11:18:15.930

使用自定义的 CDN 托管库实际上并没有多大意义，至少对于像 jQuery UI 这样具有许多自定义可能性的库而言。

像谷歌 CDN 这样的 CDN 的目的主要是“让网络更快”（正如谷歌所说，*除了很好地概述哪个库在哪个主页上使用，这是另一个主题*）。因此，如果多个站点都使用来自 CDN 的同一个库（**具有相同的 URL**），他们的浏览器（或任何代理服务器）可以使用已经本地缓存的库，而不是再次进行全新的下载。

如果 jQuery UI 可以在 CDN 上进行定制，那么另一个站点使用与您的站点完全相同的配置的可能性非常小，因此根本没有给出通过使用缓存版本来加速请求的进步。

例如，如果您正在使用

```
//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js?modules=core,widget,mouse,sortable 
```

一组不同的模块或只是另一个模块订单已经发出新请求。

# jquery - jQuery deferred 与谷歌地理编码错误

> ID：15136614
> 
> 赞同：2
> 
> 时间：2013-02-28T13:20:12.000
> 
> 标签：jquery, google-maps-api-3, jquery-deferred

首先，我想说声抱歉，因为我知道很多类似的问题。我读过很多，但我无法得到答案）；

我正在用谷歌地图构建一个网络应用程序。

我想在 javascript 中使用一种“等待”或“睡眠”函数来等待异步 geocode() 函数完成，

但是在谷歌搜索了一段时间之后，现在我知道 javascript 没有它们，我应该使用 jQuery deferred 来做到这一点。

（我正在使用 jQuery 1.8.3，并使用 google chrome 浏览器进行测试）

所以我这样写了我的代码，但它不起作用。

```
Location.prototype.geocode = function() {
    deferred = new $.Deferred();
    var latLng = this.latLng;
    var point = null;

    geocoder.geocode( {'latLng': latLng},
        function(results, status) {
            var point = null;
            if (status == google.maps.GeocoderStatus.OK) {
                if (results[0]) {
                    alert(results[0].formatted_address); // alert in callback
                    point = get_something_blah_blah_function() /* set return value here */
                    deferred.resolve();
                } else {
                    deferred.reject();
                    alert('Geocder Error: no result');
                }
            } else {
                deferred.reject();
                alert('Geocoder Error: ' + status);
            }
        }

    );

    alert(deferred.state()); // alert 1
    deferred.then(alert(point)); // alert 2
    alert(deferred.state()); // alert 3

    return point; /* return value is set in geocode callback function */
} 
```

我预计我会按此顺序看到警报消息，

1.  'pending' (alert 1) -> 2\. 点的地址 (alert in callback) -> 3\. '[object Object]' (alert 2) -> 4\. 'resolved' (alert 3) 因为我的代码会等待解决，直到解决，

但我看到的是 1\. 'pending' (alert 1) -> 2\. 'null' (alert 2) -> 3\. 'pending' (alert 3) -> 一个地址（alert in callback）

为什么不等到解决或拒绝？

我已经用 done() 和 always() 而不是 then() 尝试过，但都失败了。

这个问题阻止了我一个星期......

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:29:20.310

您似乎并不完全了解如何使用 deferrds。

看看s[文档](http://api.jquery.com/deferred.promise/)中的示例`promise`。使用 deferrd，您永远不会返回实际值，而是使用 deferrd 来返回它。

因此`point`，您需要返回一个，而不是返回`deferred.promise()`。然后，您可以[`$.when()`](http://api.jquery.com/jQuery.when/)在 deferrd 成功或失败时执行回调。为了访问成功或失败的值，您需要将所需的参数传递给相应的函数。您解决或拒绝延迟，现在使用 values 来解决[`deferred.resolve(point)`](http://api.jquery.com/deferred.resolve/)。

所以可以做这样的事情来访问该点（替换`geocode()`为返回的任何内容`promise()`）

```
$.when(geocode()).then(function(point){
  console.log(point);
}, function() {
  console.log("the deferred got rejected");
}); 
```

# android - NullPointerException 尝试在 Android 中使用 OAuth 发送电子邮件

> ID：15136615
> 
> 赞同：0
> 
> 时间：2013-02-28T13:20:14.813
> 
> 标签：android, smtp, oauth-2.0

我正在尝试使用 Google 的 Gmail API 和 OAuth 2.0 发送电子邮件。我设法获得了似乎是有效的 SMTPTransport（不完全确定它是否有效），但是当我尝试发送电子邮件时，我在 sendMessage 发生的行上收到了 NullPointerException。实际上，异常并不完全发生在那条线上。奇怪的是，在 Eclipse 中，调试器中的当前行返回到 sendMail 方法的第一行，然后返回到调用客户端并返回 NullPointerException。我不知道是什么导致了空异常。smtpTransport 和 msg 变量不为空：

```
 private Session session;

  public SMTPTransport connectToSmtp(String host, int port, String userEmail, String oauthToken, boolean debug) throws Exception
  {
    try
    {
      Properties props = new Properties();
      props.put("mail.smtp.starttls.enable", "true");
      props.put("mail.smtp.starttls.required", "true");
      props.put("mail.smtp.sasl.enable", "false");
      session = Session.getInstance(props);
      session.setDebug(debug);

      final URLName unusedUrlName = null;
      SMTPTransport transport = new SMTPTransport(session, unusedUrlName);

      // If the password is non-null, SMTP tries to do AUTH LOGIN.
      final String emptyPassword = null;
      transport.connect(host, port, userEmail, emptyPassword);

      byte[] response = String.format("user=%s\1auth=Bearer %s\1\1", userEmail, oauthToken).getBytes();
      response = BASE64EncoderStream.encode(response);

      transport.issueCommand("AUTH XOAUTH2 " + new String(response), 235);

      return transport;
    }
    catch (Exception ex)
    {
      return null;
    }
  }

  public synchronized void sendMail(String subject, String body, String user, String oauthToken, String recipients)
  {
    try
    {
      SMTPTransport smtpTransport = connectToSmtp("smtp.gmail.com", 587, user, oauthToken, true);

      MimeMessage message = new MimeMessage(session);
      DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));
      message.setSender(new InternetAddress(user));
      message.setSubject(subject);
      message.setDataHandler(handler);

      if (recipients.indexOf(',') > 0)
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));
      else
        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));

      smtpTransport.sendMessage(message, message.getAllRecipients());
    }
    catch (Exception e)
    {
    }
  } 
```

**编辑：** 我更新了 sendMail 中的代码，但仍然有同样的问题。logcat 没有显示任何异常。事实上，与服务器的连接是被接受的。但是，如果我多次运行代码，我最终会在 logcat 中得到一个异常，如下所示：

> 找不到从方法 myapp.sendMail 引用的类“javax.activation.DataHandler”

不知道为什么它找不到 DataHandler。可能缺少在编译时未检测到但仅在运行时检测到的 jar 文件？

```
02-28 14:33:14.619: I/ActivityManager(199): Starting: Intent { act=com.google.android.gms.common.account.CHOOSE_ACCOUNT cmp=com.google.android.gms/.common.account.AccountPickerActivity (has extras) } from pid 967
02-28 14:33:14.619: E/ActivityManager(199): exception bw.write()java.io.IOException: Transport endpoint is not connected
02-28 14:33:14.619: D/PowerManagerService(199): acquireWakeLock flags=0x1 tag=ActivityManager-Launch
02-28 14:33:14.899: E/ActivityRecord(199): sendActivityPerformanceInfo exception occurs: java.io.IOException: Transport endpoint is not connected
02-28 14:33:14.899: I/ActivityManager(199): Displayed com.google.android.gms/.common.account.AccountPickerActivity: +260ms
02-28 14:33:14.909: D/PowerManagerService(199): releaseWakeLock flags=0x1 tag=ActivityManager-Launch
02-28 14:33:16.879: E/ActivityManager(199): exception bw.write()java.io.IOException: Transport endpoint is not connected
02-28 14:33:16.879: D/PowerManagerService(199): acquireWakeLock flags=0x1 tag=ActivityManager-Launch
02-28 14:33:17.089: I/ActivityManager(199): Process com.google.android.gms (pid 642) has died.
02-28 14:33:18.629: D/PowerManagerService(199): acquireWakeLock flags=0xa tag=KEEP_SCREEN_ON_FLAG
02-28 14:33:18.649: W/InputManagerService(199): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@40928628 (uid=10025 pid=1085)
02-28 14:33:18.719: D/PowerManagerService(199): releaseWakeLock flags=0x1 tag=ActivityManager-Launch
02-28 14:33:22.139: D/PowerManagerService(199): releaseWakeLock flags=0xa tag=KEEP_SCREEN_ON_FLAG
02-28 14:33:23.969: I/System.out(967): DEBUG: setDebug: JavaMail version 1.4.6
02-28 14:33:23.989: I/System.out(967): DEBUG SMTP: useEhlo true, useAuth false
02-28 14:33:24.009: I/System.out(967): DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
02-28 14:33:24.139: I/System.out(967): 220 mx.google.com ESMTP 44sm11905543eek.5 - gsmtp
02-28 14:33:24.139: I/System.out(967): DEBUG SMTP: connected to host "smtp.gmail.com", port: 587
02-28 14:33:24.149: I/System.out(967): EHLO localhost
02-28 14:33:24.219: I/System.out(967): 250-mx.google.com at your service, [217.238.138.215]
02-28 14:33:24.239: I/System.out(967): 250-SIZE 35882577
02-28 14:33:24.239: I/System.out(967): 250-8BITMIME
02-28 14:33:24.239: I/System.out(967): 250-STARTTLS
02-28 14:33:24.259: I/System.out(967): 250 ENHANCEDSTATUSCODES
02-28 14:33:24.269: I/System.out(967): DEBUG SMTP: Found extension "SIZE", arg "35882577"
02-28 14:33:24.269: I/System.out(967): DEBUG SMTP: Found extension "8BITMIME", arg ""
02-28 14:33:24.269: I/System.out(967): DEBUG SMTP: Found extension "STARTTLS", arg ""
02-28 14:33:24.279: I/System.out(967): DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
02-28 14:33:24.289: I/System.out(967): STARTTLS
02-28 14:33:24.359: I/System.out(967): 220 2.0.0 Ready to start TLS
02-28 14:33:25.319: I/System.out(967): EHLO localhost
02-28 14:33:25.589: I/System.out(967): 250-mx.google.com at your service, [217.238.138.215]
02-28 14:33:25.599: I/System.out(967): 250-SIZE 35882577
02-28 14:33:25.609: I/System.out(967): 250-8BITMIME
02-28 14:33:25.609: I/System.out(967): 250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
02-28 14:33:25.619: I/System.out(967): 250 ENHANCEDSTATUSCODES
02-28 14:33:25.629: I/System.out(967): DEBUG SMTP: Found extension "SIZE", arg "35882577"
02-28 14:33:25.639: I/System.out(967): DEBUG SMTP: Found extension "8BITMIME", arg ""
02-28 14:33:25.639: I/System.out(967): DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH XOAUTH2"
02-28 14:33:25.639: I/System.out(967): DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
02-28 14:33:25.679: I/System.out(967): AUTH XOAUTH2 ??????????????????????????????==
02-28 14:33:26.309: I/System.out(967): 235 2.7.0 Accepted 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:20:32.407

事实证明，用于邮件内容的 jar 文件不兼容。Android 所需的 jar 文件可以在以下位置下载：

[https://code.google.com/p/javamail-android/downloads/list](https://code.google.com/p/javamail-android/downloads/list)

# ios - NSInternalInconsistencyException 错误

> ID：15136623
> 
> 赞同：0
> 
> 时间：2013-02-28T13:20:25.307
> 
> 标签：ios, objective-c, iphone, cocoa-touch

我在视图控制器之间切换时遇到问题。

我的 md360AppDelegate.h 标头看起来像这样

```
#import <UIKit/UIKit.h>
@class md360ViewController;
@interface md360AppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) md360ViewController *viewController;
@property (strong, nonatomic) UINavigationController *navigationController;
@end 
```

我的 md360AppDelegate.m 实现看起来像这样。

```
#import "md360AppDelegate.h"
#import "md360ViewController.h"

@implementation md360AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[md360ViewController alloc] initWithNibName:@"md360ViewController" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    [self.navigationController setNavigationBarHidden:YES animated:YES];
    [self.window setRootViewController:self.navigationController];
    [self.window makeKeyAndVisible];
    return YES;
}
@end 
```

我正在创建 UINavigationController 的实例并将其存储在此类的 navigationController 属性中。

当用户单击 md360ViewController 中的按钮时，我想更改 ViewController。

我的 md360ViewController.h 看起来像这样。

```
@interface md360ViewController : UIViewController
@property IBOutlet UIButton *homePathwayBtn;
@property IBOutlet UIButton *homeDiseaseBtn;
@property IBOutlet UIButton *homePipelineBtn;
- (IBAction)homeButton:(id)sender;
@end 
```

我的实现看起来像

```
#import "md360ViewController.h"
#import "md360AppDelegate.h"
#import "pipeViewDisease.h"
#import <QuartzCore/QuartzCore.h>

    - (IBAction)homeButton:(id)sender {
        UIViewController *pipeViewDisease = [[UIViewController alloc] initWithNibName:@"pipeViewDiease" bundle:nil];
        [self.navigationController pushViewController:pipeViewDisease animated:YES];
    } 
```

当我单击 UIButton 时，应用程序崩溃并显示以下消息。

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“pipeViewDiease”

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:22:41.947

*可能*只是一个拼写错误的 NIB 名称：

```
initWithNibName:@"pipeViewDiease" 
```

应该：

```
initWithNibName:@"pipeViewDisease"
                            ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:23:03.323

除非是拼写错误（应该是 pipeViewDisease），否则这个错误通常发生在在 xCode 环境之外重新命名文件时。

要解决这个问题：

*   从项目中删除有问题的文件
*   将文件重新导入您的项目。

# javascript - 从删除的 FileList 中删除元素

> ID：15136624
> 
> 赞同：2
> 
> 时间：2013-02-28T13:20:24.973
> 
> 标签：javascript, jquery, html, file, filelist

我有一个处理页面上拖放文件的功能：

```
function createDropHandlers() {
  var target = document;
  if (target === null) {
    return false;
  }

  // attach the 'dragover' event to the container
  target.addEventListener('dragover', function(event) {
    event.preventDefault();
  }, true);

  // attach the 'drop' event to the container
  target.addEventListener('drop', function(event) {
    event.preventDefault();
    var files = event.dataTransfer.files;

    // if (files.length > 3)
    // do something like
    // files.slice(files.length-3, files.length);

    for (var i = 0; i < files.length; i++) {
        processFile(files[i]);
        // ...
    }
  }, true);
} 
```

我想做的是在我的`for`循环之前（以及在以任何方式“处理”文件之前）检查是否拖动了 3 个以上的文件，如果是这样，只需将“数组”切片为最后 3 个元素。我知道这`FileList`是只读的，所以我不确定我在这里有什么选择来实现这一点......
我不会上传文件，并且在“处理”它们之后，我将不需要`File`任何对象。我需要做的就是检查文件是否是音频文件，从中读取一些元数据并在页面上显示元数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:25:05.043

slice() 是来自 Array 原型的方法。虽然它返回一个新数组，但它可能不在 FileList 原型中。您可以使用 Array.prototype.slice 方法并将其应用于文件列表：

```
Array.prototype.slice.call( fileList ); //will return an array-copy of the filelist
Array.prototype.slice.call( fileList, 0, 3 ); //Then simply use the slice arguments at your convenience 
```

你也可以在参数上使用（并且经常在 js-libraries 代码中看到）这个技巧。请注意， slice 不会像 splice() 那样修改原始对象。

您可以查看[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice#Array-like](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice#Array-like)以了解有关 MDN 的说明。

# objective-c - plist 不会拉入我的 NSMutableArray。我错过了什么吗？

> ID：15136625
> 
> 赞同：0
> 
> 时间：2013-02-28T13:20:33.587
> 
> 标签：objective-c, xcode, nsmutablearray, plist, nsmutabledictionary

所以这是我的代码。我正在尝试将 plist 中的内容显示到表格中，但我一直遇到错误。我整天都在做，所以我可能错过了一些相当容易的东西。希望你们能弄清楚为什么当我建造时，桌子是空的。

这是我的 plist（没有标题）：

```
<array>
<dict>
    <key>word</key>
    <string>AWord1</string>
    <key>definition</key>
    <string>here is a definition</string>
    <key>partOfSpeech</key>
    <string>here is a part of speech</string>
</dict>
<dict>
    <key>word</key>
    <string>Bword1</string>
    <key>definition</key>
    <string>here is a definition</string>
    <key>partOfSpeech</key>
    <string>here is a part of speech</string>
</dict>
</array>
</plist> 
```

*编辑：由于格式错误而缺少结束标签 - 已修复*

好的。这是我的新代码。我 NSLog'd 并决定在我去 plist 之前备份。所以，如果你能帮忙的话。你会如何建议我从 plist 中提取这些数据（假设数据在 plist 中）

```
//Initialize the array.
listOfItems = [[NSMutableArray alloc] init];

NSArray *countriesToLiveInArray = [NSArray arrayWithObjects:@"Iceland", @"Greenland", @"Switzerland", @"Norway", @"New Zealand", @"Greece", @"Italy", @"Ireland", nil];
NSDictionary *countriesToLiveInDict = [NSDictionary dictionaryWithObject:countriesToLiveInArray forKey:@"Countries"];

NSArray *countriesLivedInArray = [NSArray arrayWithObjects:@"India", @"U.S.A", @"Test", @"Test", @"Test", @"Test", @"Test", @"Test", @"Test", @"Test", @"Test", @"Test", @"Test", @"Test", @"Test", @"Test", nil];
NSDictionary *countriesLivedInDict = [NSDictionary dictionaryWithObject:countriesLivedInArray forKey:@"Countries"];

[listOfItems addObject:countriesToLiveInDict];
[listOfItems addObject:countriesLivedInDict];

//Initialize the copy array.
copyListOfItems = [[NSMutableArray alloc] init];

//Set the title
self.navigationItem.title = @"Countries";

//Add the search bar
self.tableView.tableHeaderView = searchBar;
searchBar.autocorrectionType = UITextAutocorrectionTypeNo;

searching = NO;
letUserSelectRow = YES; 
```

我觉得好像我仍然没有真正告诉它解析来自 plist 的数据。我只是初始化它。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:42:32.047

您的代码似乎很不完整，它与 plist 没有太大关系。这里有几个问题

*   正如 H2CO3 和 Fogmeister 所指出的，您显示的 plist 缺少结束`</array>`标记（但假设这是问题中的错字）
*   您将整个数组加载到字典中的单个条目中`countriesToLiveIn`（针对键“定义”）
*   `countriesToLiveIn`成为数组中的单个对象`listOfItems`
*   你初始化了一个`copyOfListItems`数组，然后不做任何事情

然后你不指出表格从哪里得到它的日期。

如果它来自`copyOfListItems`，那么该数组是空的 .: 空表。

如果它来自`listOfItems`您将以`countriesToLiveIn`某种方式解析字典，但您没有显示如何。

如果它直接来自 plist 数组`countriesToLiveInArray`，那么缺少`</array>`的标签可能是一个线索。您还需要以某种方式解析数组包含的字典，并且您没有向我们展示该代码，那里可能有问题。

为了进一步了解这一点，我建议大量使用`NSLog`来了解数据进入对象的程度。如果您仍然遇到困难，也许您可​​以用结果扩展您的问题。

**更新**

根据您更新的代码，我的第一个怀疑是您的 URL 存在问题。

在您之前的编辑中，这是可疑行

```
NSMutableArray *wordListArray = [[NSMutableArray alloc] initWithContentsOfURL: [NSURL URLWithString:@"http://url.com/dictpPlist.plist"]]; 
```

您需要在它之后立即进行 NSLog：

```
NSLog (@"wordListArray %@", wordListArray); 
```

确认您没有在此处选择 plist。至少我们在您的代码中将问题隔离到这一点。

然后我们需要质疑 URL - 它是否正确？plist 是如何到达那里的？你能独立验证吗？它是本地文件 URL 还是网络 URL？

如果您正在访问网络资源，这很可能是您的问题。这些`initWithContentsOfURL`方法应该只与本地文件系统 URL 一起使用。参见例如

[initwithcontentsofurl 方法被认为是有害](http://akosma.com/2010/05/28/initwithcontentsofurl-methods-considered-harmful/)的。

您应该`NSURLConnection`改为使用异步。苹果[对此也有点谨慎](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)：

> *aURL*`writeToURL:atomically:` ：包含由该方法生成的数组的字符串表示形式的文件的位置。

假设这是你的问题，你为什么不先让它与本地文件系统 plist 一起工作。

`listOfItems`从你的数组中写一个代码：

```
- (void) createPlist
{
    NSFileManager* fManager = [NSFileManager defaultManager];
    NSError* error;
    NSURL* docsURL = [fManager URLForDirectory:NSDocumentDirectory 
                                          inDomain:NSUserDomainMask 
                                 appropriateForURL:nil 
                                            create:NO 
                                             error:&error];

    NSURL* plistURL = [docsURL URLByAppendingPathComponent:@"testlist.plist"];
    [listOfItems writeToURL:plistURL atomically:YES];
} 
```

重新读一遍，验证它是否有效，然后找出如何通过网络执行相同的操作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-28T13:27:51.827

试试下面的代码

```
// Path to the plist (in the application bundle)
     NSString *path = [[NSBundle mainBundle] pathForResource:
    @"dictpPlist" ofType:@"plist"];

// Build the array from the plist  
     NSMutableArray *array2 = [[NSMutableArray alloc] initWithContentsOfFile:path];

// Show the string values  
    for (NSString *str in array2)
      NSLog(@"--%@", str); 
```

# javascript - Enter 按钮上的文本框点击功能

> ID：15136637
> 
> 赞同：3
> 
> 时间：2013-02-28T13:21:04.367
> 
> 标签：javascript, html, asp.net-mvc-3, visual-studio-2012

我有一个 mvc3 应用程序。在一个页面上，我有一个允许用户搜索客户端的文本框，现在我正在为某些功能而苦苦挣扎，因为我是 Windows 窗体和寡妇电话 8 开发人员。我希望这个文本框在我按下回车时执行，我有一个用户可以点击搜索的按钮，但我知道大多数用户只需点击回车！我正在使用 JavaScript 来实现功能！

按钮和文本框的 HTML：

```
 <td>
<input value="Search..." id="SearchText" style="color:GrayText" onchange="SearchText" onfocus="javascript:this.value=''" onblur="javascript: if(this.value==''){this.value='Search...';}" />
                        <input id="searchbutton" type="button"  value="Search" class="button"/>
                    </td> 
```

这是Javascript：

```
<script type="text/javascript">
            $('#searchbutton').click(function(){
                var client = document.getElementById('SearchText').value;
                var textbox = document.getElementById('SearchText');
                var edittext = ", is not available!";
                var result = client + edittext;

                if (textbox.value == 'Search...') {
                    alert('Please enter a Client Name to search for ');
                    textbox.focus();
                }
                else {
                    alert(result);
                };

            });

        </script> 
```

当我在文本框上按 Enter 时，我如何让文本框也触发该功能！

这是它在表单上的外观：

![在此处输入图像描述](../Images/e5075ea22805050b5f221c7665868f5c.png)

这种编码非常新，任何帮助都可以！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:25:55.360

```
$('#searchbutton').click(search);
$('#SearchText').keypress(function(e){
     var code = (e.keyCode ? e.keyCode : e.which);
      if(code == 13) {
        search()
      }
});

function search(){
    var client = document.getElementById('SearchText').value;
            var textbox = document.getElementById('SearchText');
            var edittext = ", is not available!";
            var result = client + edittext;

            if (textbox.value == 'Search...') {
                alert('Please enter a Client Name to search for ');
                textbox.focus();
            }
            else {
                alert(result);
            };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:27:36.200

```
$('#SearchText').on('keypress', function(e){

    var code = (e.keyCode ? e.keyCode : e.which);
             if(code == 13) {
             //write your code for search here..like searchbutton on click
             }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:25:45.537

我不知道您的问题的确切答案，但您可以使用[tabindex](http://www.htmlcodetutorial.com/forms/_INPUT_TABINDEX.html) 按 Tab 键跳转到您的按钮，然后您可以按 Enter 提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:34:50.823

试试这个..

```
<input type="text" placeholder="Search" id="txtSearch"  />
<input type="button" value="Search" id="btnsearch" onclick="return Search();" />

<script type="text/javascript">
    $("#txtSearch").keyup(function (event) {

        if (event.keyCode == 13) {
            $("#btnsearch").click();
        }
    });

    function Search(){
             // do Something here.......
     }

</script> 
```

# cobol - COBOL 还值得学习吗

> ID：15136641
> 
> 赞同：0
> 
> 时间：2013-02-28T13:21:22.887
> 
> 标签：cobol

我想从技术角度知道这个问题的答案， [COBOL还值得学习吗？](https://softwareengineering.stackexchange.com/q/247/18098)

我的意思是：你可以学习一些语言来成为一个更好的程序员，例如学习汇编程序可以帮助理解计算机是如何工作的，或者当你知道 OOP 语言可以教你看的时候学习一门函数式语言从另一个角度编程，另一种思维方式。COBOL有这样的优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:26:39.083

学习 COBOL 就是为了钱……

COBOL 被积极用于大型金融或政策合作，这些合作从 80 年代开始就有自己的系统，并且不想改变它。

为了保持他们的系统运行和更新，他们需要 cobol 程序员。但是今天很多这些程序员都退休了，很多人被买回了他们的工作，同时他们的工资翻了一番。

COBOL 不是很漂亮，也不是很有趣，但你可以用它赚钱。

# c# - 在 C# 中安全地向 DateTime 添加/减去天数

> ID：15136643
> 
> 赞同：7
> 
> 时间：2013-02-28T13:21:26.723
> 
> 标签：c#, datetime

我有一个带有两个`DateTime`参数的函数，我必须为这些日期添加单独的偏移量。我知道它`DateTime`具有将日期添加到日期的功能，如果小于或大于`AddDays`，它会引发异常。`DateTime``MinValue``MaxValue`

现在我想做一个安全的检查，是否在 a 中添加/减去以下天数是否`DateTime`会导致流量过多/不足。

```
safeStartDate = (startDate == DateTime.MinValue || startDate == DateTime.MaxValue) ? startDate : startDate.AddDays(startDateOffset);
safeEndDate = (endDate == DateTime.MaxValue || endDate == DateTime.MinValue) ? endDate : endDate.AddDays(enDateOffset); 
```

通过这样做，我将其设为免费的一级异常，但日期可以是`DateTime.Max - 1`并且在尝试添加偏移量时会引发异常。我正在寻找一种更好的方法，即最终值是否超过/低于流动而不进行实际计算，以防止异常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T13:26:20.600

如果不经常调用 catch，您可以执行以下操作：

```
try
{
    safeDate = dt.AddDays(days);
}
catch (ArgumentOutOfRangeException)
{
    safeDate = date;
} 
```

或者，

```
var maxDays = (DateTime.MaxValue - dt).TotalDays;
safeDate = (days <= maxDays) ? dt.AddDays(days) : dt; 
```

或者如果有负面的日子：

```
var maxDays = (DateTime.MaxValue - dt).TotalDays;
var minDays = (DateTime.MinValue - dt).TotalDays;
return (minDays <= days && days <= maxDays) ? dt.AddDays(days) : dt; 
```

或者只是使用[Rawling 的答案](https://stackoverflow.com/a/15136872/1245027)中的方法：`CanAddDays(dt, days) ? dt.AddDays(days) : dt`

如果你不捕捉，try/catch 版本的速度大约快 25%，如果你捕捉，速度大约慢 1000 倍。因此，如果您希望在每 5000 次使用中捕获超过 1 次，请使用第二个版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T13:32:57.530

您可以使用以下内容检查是否可以将给定的天数添加到给定的天数`DateTime`而不会导致溢出：

```
bool CanAddDays(DateTime dt, int days)
{
    double maxDaysToAdd = (DateTime.MaxValue - dt).TotalDays;
    double minDaysToAdd = (DateTime.MinValue - dt).TotalDays;
    return days <= maxDaysToAdd && days >= minDaysToAdd;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:32:20.710

我猜你正在寻找这样的东西

```
DateTime Now = DateTime.Now;
DateTime Max = DateTime.MaxValue;
Max.Subtract(Now);
int DaysToAdd = 1000;//or something else
if (Max.Day > DaysToAdd) Now.AddDays(DaysToAdd);//add 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:52:40.507

您可以考虑以下方法：

```
private static DateTime AddDays(DateTime dateTime, int days)
{
    var daysTimeSpanTicks = (new TimeSpan(days, 0, 0, 0)).Ticks;
    return (days >= 0) ?
        (DateTime.MaxValue.Ticks < dateTime.Ticks + daysTimeSpanTicks) ? dateTime : dateTime.AddDays(days) :
        (dateTime.Ticks + daysTimeSpanTicks < 0) ? dateTime : dateTime.AddDays(days);
} 
```

示例用法是：

```
DateTime date = DateTime.MinValue;
DateTime safe = AddDays(date, -100); 
```

# ios - UIPageControl：在情节提要中创建视图，将它们添加为子项，更改标签的文本

> ID：15136644
> 
> 赞同：2
> 
> 时间：2013-02-28T13:21:27.453
> 
> 标签：ios, objective-c, xcode, storyboard

我已经按照本教程：[http](http://www.wannabegeek.com/?p=168) : //www.wannabegeek.com/?p=168 来设置 UIPageControl。现在您可以在教程中看到，故事板中有 3 个视图。我想做的是：

[http://tinypic.com/view.php?pic=f3cs2b&s=6](http://tinypic.com/view.php?pic=f3cs2b&s=6)

因为我需要许多具有相同布局的视图（在图片中它只是橙色的背景）我需要能够重用它们并更改其上的文本，或创建一个按钮等。

我可以像这样添加视图：

```
 UIViewController *aViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"View1"];
    [self addChildViewController:aViewController]; 
```

但是如果我想从视图上的标签更改文本怎么办？

我在想这样的事情：

```
 UIViewController *aViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"View1"];
    // Change the text label thats on the viewcontroller, put an image on the UIImage thats on it, etc...
    [self addChildViewController:aViewController]; // After all that, add it as a child
    //Now I want the same layout template, so I choose the "View1" again
   UIViewController *aViewController2 = [self.storyboard                         instantiateViewControllerWithIdentifier:@"View1"];
    // Again change the text label.
    [self addChildViewController:aViewController2]; // Add this new one too 
    // And so on 
```

在我的图片中，我复制了视图 1，但我需要能够做到这一点是代码，而不是在情节提要上，因为我需要超过 100 个视图。

# winapi - SerialPorts 和 WaitForMultipleObjects

> ID：15136645
> 
> 赞同：1
> 
> 时间：2013-02-28T13:21:27.913
> 
> 标签：winapi, serial-port, waitformultipleobjects

我在跨平台应用程序（具有 Linux 嵌入式和实际嵌入式目标）中的串行端口存在一些问题，它也适用于 Windows 以使开发更容易。这是关于 Windows 实现的。

因此，串行协议的实现针对的是 OS 和非 OS 系统的混合，我不会触及实现本身。我想让它与现有的实现兼容。如果在合理时间内失败，我将创建一个单独的线程用于串行读取。

好的，基本上这个实现会打开串口，在我们的 IO 系统（`epoll`在 Linux 和`WaitForMultipleObjects`Windows 上使用）中注册文件描述符，然后，基本上，只是等待所有句柄并执行任何需要的操作。因此，当句柄发出读取信号时，我们希望从串行端口读取。不幸的是，在 Windows 上，您无法指定是等待读取还是写入，所以我想我会使用以下解决方案：

*   `CreateFile`和`FILE_FLAG_OVERLAPPED`
*   `SetCommMask`和`EV_RXCHAR`
*   创建`OVERLAPPED`具有手动重置事件的结构
*   `WaitCommEvent`使用所述结构调用`OVERLAPPED`，通常返回`ERROR_IO_PENDING`

这就是基本设置。我注册了事件句柄而不是文件句柄来等待。当手柄发出信号时，我执行以下操作：

*   `ReadFile`
*   如果成功，再次`ResetEvent`调用`WaitCommEvent`

但是，如果您指定`FILE_FLAG_OVERLAPPED`，您似乎也*必须*使用重叠 IO 进行读取和写入。所以我想无论何时`ReadFile`或`WriteFile`返回，我都会用and`ERROR_IO_PENDING`等待 IO 。不过，我似乎并没有参与其中。它似乎基本上可以工作，但有时它会在其中一个调用上崩溃，好像重叠仍然处于活动状态（尽管我猜它仍然不应该崩溃）。`WaitForSingleObject``GetOverlappedResult``ResetEvent`

所以，实际的问题。这可以按我的意愿完成吗？总的来说，这种方法是否存在问题，或者它应该有效吗？还是使用另一个线程是唯一好的解决方案？通信已经在一个单独的线程中，所以它至少是三个线程。

* * *

我将尝试根据需要发布尽可能多的代码，尽管它与实际代码相比有所减少，其中包含许多与串行读取没有直接关系的内容。

```
SerialPort::SerialPort(const std::string &filename)
{
    fd = INVALID_HANDLE_VALUE;
    m_ov = new OVERLAPPED(); // Pointer because header shouldn't include Windows.h.
    memset(m_ov, 0, sizeof(OVERLAPPED));
    m_waitHandle = m_ov->hEvent = CreateEvent(0, true, 0, 0);
}

SerialPort::~SerialPort(void)
{
    Close();
    CloseHandle(m_ov->hEvent);
    delete m_ov;
} 
```

构造函数在单独的线程中调用，该线程稍后调用 Open：

```
bool SerialPort::Open(void)
{
    if (fd != INVALID_HANDLE_VALUE)
        return true;
    fd = CreateFile(filename.c_str(), GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, FILE_FLAG_OVERLAPPED, NULL);
    if (fd != INVALID_HANDLE_VALUE) {
        DCB dcb;
        ZeroMemory(&dcb, sizeof(DCB));

        COMMTIMEOUTS timeouts = {0};
        timeouts.ReadIntervalTimeout = TimeOut();
        timeouts.ReadTotalTimeoutConstant = TimeOut();
        timeouts.ReadTotalTimeoutMultiplier = TimeOut() / 5;
        if (timeouts.ReadTotalTimeoutMultiplier == 0) {
            timeouts.ReadTotalTimeoutMultiplier = 1;
        }

        if (!SetCommTimeouts(fd, &timeouts)) {
            DebugBreak();
        }
        SetCommMask(fd, EV_RXCHAR);
        InitWait();

        return true;
    }
    return false;
}

void SerialPort::InitWait()
{
    if (WaitForSingleObject(m_ov->hEvent, 0) == WAIT_OBJECT_0) {
        return; // Still signaled
    }         
    DWORD dwEventMask;
    if (!WaitCommEvent(fd, &dwEventMask, m_ov)) {
        // For testing, I have some prints here for the different cases.
    }
} 
```

通过一个相当长的链，线程然后调用`WaitForMultipleObjects`m_ ，它与结构的成员`waitHandle`相同。这是在一个循环中完成的，并且列表中还有其他几个句柄，这就是为什么这与您有一个线程专门从串行端口读取的典型解决方案不同的原因。基本上，我无法控制循环，这就是为什么我尝试在正确的时间执行(within )。`hEvent``OVERLAPPED``WaitCommEvent``InitWait`

当句柄发出信号时，线程调用 ReadData 方法：

```
int SerialPort::ReadData(void *buffer, int size)
{
    if (fd != INVALID_HANDLE_VALUE) {
        // Timeouts are reset here to MAXDWORD/0/0, not sure if necessary.
        DWORD dwBytesRead;
        OVERLAPPED ovRead = {0};
        ovRead.hEvent = CreateEvent(0, true, 0, 0);
        if (ReadFile(fd, buffer, size, &dwBytesRead, &ovRead)) {
            if (WaitForSingleObject(m_ov->hEvent, 0) == WAIT_OBJECT_0) {
                // Only reset if signaled, because we might get here because of a timer.
                ResetEvent(m_waitHandle);
                InitWait();
            }
            CloseHandle(ovRead.hEvent);
            return dwBytesRead;
        } else {
            if (GetLastError() == ERROR_IO_PENDING) {
                WaitForSingleObject(ovRead.hEvent, INFINITE);
                GetOverlappedResult(fd, &ovRead, &dwBytesRead, true);
                InitWait();
                CloseHandle(ovRead.hEvent);
                return dwBytesRead;
            }
        }
        InitWait();
        CloseHandle(ovRead.hEvent);
        return -1;
    } else {
        return 0;
    }
} 
```

写入完成如下，不同步：

```
int SerialPort::WriteData(const void *buffer, int size)
{
    if (fd != INVALID_HANDLE_VALUE) {
        DWORD dwBytesWritten;
        OVERLAPPED ovWrite = {0};
        ovWrite.hEvent = CreateEvent(0, true, 0, 0);
        if (!WriteFile(fd, buffer, size, &dwBytesWritten, &ovWrite)) {
            if (GetLastError() == ERROR_IO_PENDING) {
                WaitForSingleObject(ovWrite.hEvent, INFINITE);
                GetOverlappedResult(fd, &ovWrite, &dwBytesWritten, true);
                CloseHandle(ovWrite.hEvent);
                return dwBytesWritten;
            } else {
                CloseHandle(ovWrite.hEvent);
                return -1;
            }
        }
        CloseHandle(ovWrite.hEvent);
    }
    return 0;
} 
```

看来它现在确实有效。再也没有崩溃了，至少我无法重现它们。所以它现在有效，我只是问我所做的是否理智，或者我是否应该以不同的方式做事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:33:44.447

顺便说一句，我在您显示的代码中看不到任何错误，但我想建议替代代码来清理您的错误处理`ReadData()`，`WriteData()`一般来说：

```
int SerialPort::ReadData(void *buffer, int size)
{
    if (fd == INVALID_HANDLE_VALUE)
        return 0;

    OVERLAPPED ovRead = {0};
    ovRead.hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
    if (!ovRead.hEvent)
        return -1;

    DWORD dwBytesRead;
    if (!ReadFile(fd, buffer, size, &dwBytesRead, &ovRead))
    {
        if (GetLastError() != ERROR_IO_PENDING)
        {
            CloseHandle(ovRead.hEvent);
            return -1;
        }

        if (!GetOverlappedResult(fd, &ovRead, &dwBytesRead, TRUE))
        {
            CloseHandle(ovRead.hEvent);
            return -1;
        }
    }

    if (WaitForSingleObject(m_waitHandle, 0) == WAIT_OBJECT_0)
    {
        ResetEvent(m_waitHandle);
        InitWait();
    }

    CloseHandle(ovRead.hEvent);
    return dwBytesRead;
}

int SerialPort::WriteData(const void *buffer, int size)
{
    if (fd == INVALID_HANDLE_VALUE)
        return 0;

    OVERLAPPED ovWrite = {0};
    ovWrite.hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
    if (!ovWrite.hEvent)
        return -1;

    DWORD dwBytesWritten;
    if (!WriteFile(fd, buffer, size, &dwBytesWritten, &ovWrite))
    {
        if (GetLastError() != ERROR_IO_PENDING)
        {
            CloseHandle(ovWrite.hEvent);
            return -1;
        }

        if (!GetOverlappedResult(fd, &ovWrite, &dwBytesWritten, TRUE))
        {
            CloseHandle(ovWrite.hEvent);
            return -1;
        }
    }

    CloseHandle(ovWrite.hEvent);
    return dwBytesWritten;
} 
```

# caching - Azure 共存缓存实例是内部的吗？

> ID：15136648
> 
> 赞同：2
> 
> 时间：2013-02-28T13:21:33.490
> 
> 标签：caching, azure, distributed-caching, azure-caching

调查 Azure 缓存我遇到了[这篇文章](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)，其中指出

> 当指定同位角色缓存时，缓存大小由虚拟机内存的指定百分比确定。指定专用角色缓存时，虚拟机的所有可用内存都用于缓存。如果配置了两个角色实例，则使用虚拟机的组合内存。

但是，同位缓存实例是特定的（只能由运行它的实例访问、读写）还是特定于角色的（可以由角色中的任何实例访问、读写）？

我找不到一个明确的答案......我确实发现如果你想让两个或多个角色访问同一个缓存，这个“缓存”本身必须是一个专用角色......

**编辑 1**
示例场景：使用同位缓存的单个角色的 3 个实例（i1、i2 和 i3），每个实例都有 100mb 缓存。如果 i1 写入缓存，那么 i2 可以读取它吗？i3 可以更改缓存的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:41:11.107

**共置缓存**可用于部署中的任何实例。这只是意味着实例在与 web/worker 角色相同的主机上运行缓存。您只需要知道**角色名称**即可访问缓存。

**Dedicated**和**Co-located**之间的区别在于可用于缓存的内存和可用于保持缓存的处理能力。使用 co-located 更便宜，但专用会提高性能（*和潜在成本*），因为它唯一的工作是管理缓存。如果您使用专用缓存角色也有灵活性，因为您可以为您的工作人员/Web 角色使用更大的 VM 大小，但为您的缓存角色使用更小的 VM 大小（*反之亦然，具体取决于您的需要*）。

配置缓存时，您只需要知道哪个角色正在托管缓存集群 - 更具体地说是角色名称。

```
<dataCacheClients>
  <dataCacheClient name="default">
    <autoDiscover isEnabled="true" identifier="[cache cluster role name]" />
  </dataCacheClient>
</dataCacheClients> 
```

# django - 在 django 中将新注册用户添加到数据库及其登录系统

> ID：15136649
> 
> 赞同：2
> 
> 时间：2013-02-28T13:21:36.317
> 
> 标签：django

我创建了一个表单，用户在其中输入数据并将数据保存到数据库中。但表单不是 s！[在此处输入图像描述][1]保存数据编码是否有任何错误？请帮助。 .

我的代码在这里：-

```
1) views.py 
-----------------------------------------------------------
from django.http import  HttpResponse
#from django.shortcuts import render_to_response
from django.template import RequestContext, loader
from forms import SignupForm

def signup(request):
    if request.method == 'POST':
        form = SignupForm(request.POST)
        if form.is_valid():
            form.cleaned_data('username')
            form.cleaned_data('email')
            form.cleaned_data('password1')
            form.save()
        return HttpResponse('/login/')     #havent did the login method yet...
    else: 
        t = loader.get_template('signup.html')
        cform = SignupForm()
        c = RequestContext (request, {'form' : cform,})
        return HttpResponse(t.render(c))      

#def login(request):
#   newform = SignupForm()
#if newform.is_valid(): 
```

## 2）forms.py-

```
from django.contrib.auth.models import User
from django import forms

class SignupForm(forms.Form):
    username            = forms.CharField(max_length=255, label="Username")
    email               = forms.CharField(max_length=255, label="E-Mail Address")
    password1           = forms.CharField(max_length=255, label="Password", widget=forms.PasswordInput)
    password2           = forms.CharField(max_length=255, label="Repeat Password", widget=forms.PasswordInput)

    def clean_username(self):
        try:
            User.objects.get(username=self.cleaned_data['username'])
        except User.DoesNotExist:
            return self.cleaned_data['username']
        raise forms.ValidationError("This username is already in use.Please choose another.")

    def clean(self):
        if 'password1' in self.cleaned_data and 'password2' in self.cleaned_data:
            if self.cleaned_data['password1'] != self.cleaned_data['password2']:
                raise forms.ValidationError("You must type the same password each time")
        return self.cleaned_data

    def save(self):
        new_user = User.objects.create_user(username=self.cleaned_data['username'], email=self.cleaned_data['email'], password=self.cleaned_data['password1'])
        return new_user 
```

## 3)urls.py:-

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
#from salary import settings 
#from salarylive.views import signup
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    #url(r'^$', 'salary.views.home', name='home'),
    #url(r'^salary/', include('salary.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
    url(r'^signup/$', 'salarylive.views.signup'),
    #url(r'^login/$', 'salarylive.views.login'),
) 
```

* * *

错误回溯：-

```
error traceback :- Environment:
Request Method: POST
Request URL: http://localhost:8000/signup/
Django Version: 1.4.3
Python Version: 2.7.0
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'salarylive')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "c:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "e:\Software Installations\Aptana Workspace\salary\salarylive\views.py" in signup
  10\.             form.cleaned_data('username')

Exception Type: TypeError at /signup/
Exception Value: 'dict' object is not callable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:28:05.933

你有一些缩进错误。第一个`return HttpResponse`应该缩进一个额外的级别，这样只有在表单有效时才会发生。第二个`return HttpResponse`和它上面的行应该**少**缩进一级，以便它捕捉到 if 语句的失败。

你拥有它的方式，代码总是重定向，即使表单无效并且数据没有保存。通过这些更改，第二次返回将在表单无效时重新呈现带有错误的表单。

# amazon-s3 - 您知道云存储支持不同域对多个文件夹的限制吗？

> ID：15136652
> 
> 赞同：1
> 
> 时间：2013-02-28T13:21:43.233
> 
> 标签：amazon-s3, cloud

我们正在寻找可靠的云存储，它具有为来自预定义域的请求设置访问文件夹中文件的限制的功能？例如：

我可以通过网址[http://cool-storage.com/resource-folder1/file.bin](http://cool-storage.com/resource-folder1/file.bin)从网站[http://mywebsite.com](http://mywebsite.com)和[http://yourwebsite.com](http://yourwebsite.com)下载文件。但我无法从网站[http://theirsite.com](http://theirsite.com)下载 file.bin 。

我们尝试使用 Amazon S3，但它仅对存储桶具有此功能，对其中的文件夹或文件没有此功能。此外，Amason S3 对存储桶的创建也有限制。

有人有类似的任务吗？

谢谢

# algorithm - 没有父信息的 BST 的有序继任者

> ID：15136654
> 
> 赞同：0
> 
> 时间：2013-02-28T13:21:44.347
> 
> 标签：algorithm, data-structures, tree

我试图在 BST 中找到一个节点的有序后继者。下面是我的示例代码。

```
public TreeNode getInorderSuccesor(TreeNode t)
{

    if(t == null)
    {
        return null;
    }

    if(t.getRight()!=null)
    {
        t = t.getRight();
        while(t.getLeft()!=null)
        {
            t = t.getLeft();
        }
        return t;
    }
    else
    {
        TreeNode parent = t.getParent();

        while(parent!=null && parent.getLeft() != t)
        {
            t = parent;
            parent = t.getParent();
        }
        return parent;
    }
} 
```

请让我知道它是否会失败。如果有些人可以共享算法/代码/ sudocode 以找到没有父节点的中序继任者，还有一件事。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:38:11.343

如果树中的节点具有唯一值，那么这很简单。你只需要找到：

*   小于或等于需要确定后继节点值的最大节点数
*   最小编号的节点严格大于需要确定后继节点的值。

后一个节点将是答案。第一个节点可用于检查输入节点是否为树中的有效节点。

伪代码：

```
function inOrderSuccessor(val, tree):
    (left, right) = findRange(val, tree.rootnode, null, null)

    if (left.val != val):
        throw Error("No node with specified value")

    return right

function findRange(val, currnode, left, right):
    if (currnode == null):
        return (left, right)

    if (currnode.val <= val):
        return findRange(val, currNode.right, currnode, right)
    else:
        return findRange(val, currNode.right, left, currnode) 
```

* * *

如果树中的节点可能具有重复值，则有序后继节点的定义不是很好。有必要知道何时给定一个节点，如何区分具有相同值的不同节点。您是否真正引用了树中的节点？

在棘手的情况下，您只是简单地获得一个节点的引用，并且树中还有其他具有相同值的节点，那么有两种情况：

*   情况1：节点有右子树，那么你只需要找到右子树中最小的元素。
*   情况2：节点没有右子树。您需要检查具有相同值的所有节点的引用相等性。当你在树中找到节点时，从节点向上遍历回到根（你在堆栈中有这个），并找到第一个左转的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:53:08.727

这是后继功能的基本逻辑；前任功能类似，但相反。递归函数沿着树向下搜索请求的键，如果每次跟随左子树，则跟踪当前树作为可能的后继树。如果它找到键，它的后继是右子树的最小元素，通过追逐左子树直到到达一个空节点找到。如果搜索到达空节点并因此无法找到键，则树中的下一个最大键是后继，在每次递归调用时保存的可能后继中找到。[我最近在我的博客上](http://programmingpraxis.com/2013/02/12/binary-search-tree-in-order-predecessor-and-successor/)实现了这个算法。

# mysql - Magento重新索引，无法创建表

> ID：15136655
> 
> 赞同：0
> 
> 时间：2013-02-28T13:21:45.580
> 
> 标签：mysql, magento

我正在尝试重新索引类别平面数据，但我总是遇到同样的错误：

```
There was a problem with reindexing process. Error Message: SQLSTATE[HY000]: General error: 1005 Can't create table 'xxx.catalog_category_flat_store_6' (errno: 121) 
```

该表不存在，有一个 1 和一个 7。不确定这是否有区别？

通过 phpMyAdmin 手动运行查询后，我遇到了 MySQL 错误 121。我检查了一下，这表明尝试创建的外键的名称已经存在。我现在已经列出了数据库中的所有外键，它们根本不存在。

我还尝试在数据库上运行 SHOW ENGINE INNODB STATUS 以获取更多信息，但我们显然无权查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:20:58.470

在更新了 priv 以便我们可以运行 SHOW INNODB STATUS 之后，我们发现我们已经有一个现有索引试图与这个新表复制。这源于我们备份了试图创建的表的旧版本。删除该表的副本使 Magento 能够正确地重新索引并解决我们的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:50:49.367

尝试记录 sql 命令并通过手动执行它们来调试它试图做什么。在索引过程中，通常有一个命令清除表，另一个命令重新创建它。

编辑 /magentoRoot/lib/Varien/Db/Adapter/Pdo/Mysql.php 并将 $_debug 更改为 true 并注意 $_debugFile 位置（应该是 var/debug/pdo_mysql.log）

最好在 vi 中编辑文件，打开浏览器以重新索引类别数据，将文件保存在 vi 中：w！然后运行索引器，然后将调试更改回 false。

然后去读日志。它可能会有所帮助。

# javascript - 在 Django 表单中动态显示和隐藏字段

> ID：15136657
> 
> 赞同：5
> 
> 时间：2013-02-28T13:21:48.953
> 
> 标签：javascript, django, forms

我在 Django 中有一个表格：

视图.py：

```
class SearchForm(forms.Form):
    type = forms.ChoiceField(choices = ...)
    list1 = forms.ModelMultipleChoiceField(...)
    list2 = forms.ModelMultipleChoiceField(...) 
```

主页.htm:

```
<td valign='top'>{{ form.type }}</td>
<td valign='top'>{{ form.list1 }}</td>
<td valign='top'>{{ form.list2 }}</td>
<td valign='top'><input type="submit" value="Find" /></td> 
```

如果类型为 1，我希望显示 list1 元素，如果类型为 2，则隐藏 list2 元素，反之亦然。我希望动态隐藏和显示它们，而无需重新加载页面或与服务器进行任何交互。

我相信 Javascript 在这里可能有用，但我不知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T23:01:00.817

这是对 Andrew 的 Javascript 解决方案的改编，以您通常期望的方式使用 Django 表单。

Django / Python中的表单：

```
class SearchForm(forms.Form):
    type = forms.ChoiceField(choices = ((1, 'One'), (2, 'Two')))

    # Use any form fields you need, CharField for simplicity reasons
    list1 = forms.CharField()
    list2 = forms.CharField() 
```

模板，假设一个实例`SearchForm`被传递给名为“form”的模板上下文：

```
<script>
function Hide() {
    if(document.getElementById('id_type').options[document.getElementById('id_type').selectedIndex].value == "1") {
         document.getElementById('id_list1').style.display = 'none';
         document.getElementById('id_list2').style.display = '';
    } else {
         document.getElementById('id_list1').style.display = '';
         document.getElementById('id_list2').style.display = 'none';
    }
}

window.onload = function() {
    document.getElementById('id_type').onchange = Hide;
};
</script>

<div>
    {{ form.type.label_tag }}{{ form.type }}
</div>
<div>
    {{ form.list1.label_tag }}{{ form.list1 }}
</div>
<div>
    {{ form.list2.label_tag }}{{ form.list2 }}
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T13:33:42.890

试试这个...

```
<script>function Hide()
{
    if(document.getElementById('mainselect').options[document.getElementById('mainselect').selectedIndex].value == "1")
    {
         document.getElementById('a').style.display = 'none';
         document.getElementById('b').style.display = '';
    }else
    {
         document.getElementById('a').style.display = '';
         document.getElementById('b').style.display = 'none'
    }
}
</script>
<td valign='top'><select id="mainselect" onchange="Hide()"><option value="1">1</option><option value="2">2</option></select></td>
<td valign='top' id='a'>{{ form.list1 }}</td>
<td valign='top' id='b'>{{ form.list2 }}</td>
<td valign='top'><input type="submit" value="Find" /></td> 
```

# ruby-on-rails - 视图中未定义的方法，但在控制台中工作

> ID：15136661
> 
> 赞同：0
> 
> 时间：2013-02-28T13:21:52.003
> 
> 标签：ruby-on-rails

我有用户、问题和答案模型。

用户`has_many :questions`和`has_many :answers`

问题`has_many :answers`和`belongs_to :user, :foreign_key => "user_id"`

回答`belongs_to :question, :foreign_key => "question_id"`和`belongs_to :user, :foreign_key => "user_id"`

在控制台中：

```
>> Question.find(2).answers.each{|a| p a.user.name}

=> "example user" 
```

鉴于：

```
- @question.answers.each do |a|
  = a.user.name 
```

但是视图返回`undefined method 'name' for nil:NilClass`

在控制器中：

```
@question = Question.find(params[:id]) 
```

id参数为2

如果我将视图切换到

```
Question.find(2).answers.each do |a|
  = a.user.name 
```

然后视图正确显示。

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:03:01.743

好像您在视图中创建了新的@question.answer，而这个答案没有相关用户。尝试使用隐藏字段在表单中设置 user_id 或者如果 a.user 在您的视图中，您可以写 = a.user.name

# java - 如何在实例上提交并发 MYSQL 查询（SELECT 查询）？

> ID：15136663
> 
> 赞同：-1
> 
> 时间：2013-02-28T13:21:59.963
> 
> 标签：java, mysql, multithreading, perl, fork

我想同时提交 MYSQL 查询（仅选择，因为我知道插入/更新在数据库端按顺序执行）。这可以使用单个连接和多个查询线程/进程来完成吗？

在 PERL 中使用 Java 线程或 fork 的解决方案将是有利的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:28:06.170

Mysql 驱动程序不支持异步请求。您应该自己创建连接池并将请求路由到它们。为避免阻塞，请尝试使用线程或 fork() 并通过 IPC 传输数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:25:47.523

如果您使用线程当然可以，并且如果您只是阅读，则没有问题。实现您的线程并在运行方法中为您的查询添加逻辑。如果您使用不同的表，则可以为每个表或每种类型的查询创建一个线程。这取决于您的要求或您的需要。

# django - 通过美味派 API 调用示例代码进行基于会话的回滚？

> ID：15136667
> 
> 赞同：0
> 
> 时间：2013-02-28T13:22:17.430
> 
> 标签：django, api, rest, session, tastypie

假设我已经`django.contrib.sessions.middleware.SessionMiddleware`安装在 django 中，并且正在使用`SessionAuthentication`类进行 API 身份验证。在一个会话中，我通过我的 API 对模型进行了一些更改，之后我想回滚。我可以通过美味派来做到这一点吗？如果是，我应该执行什么方法？我在美味的文档中找不到这样的方法。你有任何工作的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:15:35.747

Django 支持[数据库事务](http://en.wikipedia.org/wiki/Database_transaction)，它将以原子方式提交多个状态更改。（[文档...](https://docs.djangoproject.com/en/dev/topics/db/transactions/)）

您的问题不清楚您想如何触发回滚。一种选择是使用[request transactions](https://docs.djangoproject.com/en/dev/topics/db/transactions/#tying-transactions-to-http-requests)，如果视图函数发出未处理的异常，它将回滚。如果您想要更细粒度的控制，请熟悉链接到文档中的选项。例如，您可以显式[创建一个事务](https://docs.djangoproject.com/en/dev/topics/db/transactions/)，然后[将其回滚](https://docs.djangoproject.com/en/dev/topics/db/transactions/#transaction-rollback)到您的视图中。

对于 Tastypie，您可能需要将事务管理放在[`Resource`接口](http://django-tastypie.readthedocs.org/en/latest/resources.html)上的适当方法中。

我希望这能给你一些指示。如有必要，请更新您的问题并提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:49:59.747

因此，您想将对模型的更改提交到数据库，然后在将来的请求中回滚它们？这不是 TastyPie 支持的东西（或者，就此而言，Django 或 SQL）。考虑到其他请求可能同时与这些对象进行了交互/更改/建立了关系，因此实际上不可能像这样进行干净的回滚。

最好的解决方案可能是集成诸如[Reversion](https://github.com/etianen/django-reversion)之类的东西，它允许您将对象恢复到以前的状态。

如果您希望能够在会话期间回滚所有操作，您可能需要跟踪会话开始时间和已更改的对象列表。如果您想进行回滚，您只需要遍历该列表并调用`reversion`的`revert`方法，例如

```
reversion.get_for_date(your_model, session_start_datetime).revert() 
```

但是，同样，这也将回滚任何其他用户在同一时间范围内所做的任何更改，但对于此要求的任何解决方案都是如此。

# boost - 无法构建 Boost.Python

> ID：15136671
> 
> 赞同：2
> 
> 时间：2013-02-28T13:22:27.270
> 
> 标签：boost, build, boost-python

我正在尝试`boost.python`按照此[链接](http://www.boost.org/doc/libs/1_42_0/libs/python/doc/building.html#overwrite)进行构建。当我尝试使用`./b2`or进行编译`./bjam`时，出现如下错误：

```
error: No best alternative for /python_for_extensions 
next alternative: required properties: <python>2.6 <target-os>linux 
    matched 
next alternative: required properties: <python>2.6 <target-os>linux 
    matched 
```

当我添加这一行时，错误消失了：

`using python : 2.6 : /usr/bin/python2.6 : /usr/include/python2.6 : /usr/lib/python2.6 : <python-debugging>on ;`

在

`/home/kchaitanya/boost/boost_1_50_0/tools/build/v2/user-config.jam`

*但是，现在编译时，我得到了无法找到头文件*的编译时错误。错误的一小部分是：

```
 ...patience...
 ...patience...
 ...found 1548 targets...
 ...updating 62 targets...
 gcc.compile.c++ bin.v2/libs/python/build/gcc-4.1.2/release/link-static/threading multi/numeric.o

 In file included from ./boost/python/detail/prefix.hpp:13,
             from ./boost/python/numeric.hpp:8,
             from libs/python/src/numeric.cpp:6:
 ./boost/python/detail/wrap_python.hpp:50:23: error: pyconfig.h: No such file or directory
 ./boost/python/detail/wrap_python.hpp:75:24: error: patchlevel.h: No such file or directory
 ./boost/python/detail/wrap_python.hpp:78:2: error: #error Python 2.2 or higher is required for 
 ./boost/python/detail/wrap_python.hpp:142:21: error: Python.h: No such file or directory
 ./boost/python/instance_holder.hpp:34: error: ‘PyObject’ has not been declared
 ./boost/python/instance_holder.hpp:41: error: expected ‘;’ before ‘(’ token
 ./boost/python/instance_holder.hpp:45: error: ‘PyObject’ has not been declared
 ./boost/python/detail/wrapper_base.hpp:21: error: expected initializer before ‘*’ token
 ./boost/python/detail/wrapper_base.hpp:23: error: expected initializer before ‘*’ token 
```

在构建这个 boost.python 时需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T06:44:42.347

问题是没有安装与我的 python 版本相对应的包`python-devel`。`python-dev`

就我而言，它是 python2.6 所以

`sudo yum install python26-devel`成功了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-29T13:05:00.747

我在我的项目中遇到了类似的问题，以上没有帮助。我正在交叉编译python和boost，对我来说实际问题是配置中的'using python:'重复（一个存在于project-config.jam中，在bootstrap.sh/bat执行之后我试图添加另一个 python 配置自己到 user-config.jam）。

此处描述了此解决方案：http: [//comments.gmane.org/gmane.comp.lib.boost.build/22088](http://comments.gmane.org/gmane.comp.lib.boost.build/22088)

在这里： [https ://groups.google.com/forum/#!topic/boost-developers-archive/namMFSO_6Rg](https://groups.google.com/forum/#!topic/boost-developers-archive/namMFSO_6Rg)

# c# - 制作一个按钮，在下次运行程序时保存列表

> ID：15136677
> 
> 赞同：0
> 
> 时间：2013-02-28T13:22:44.467
> 
> 标签：c#, windows, list, save

我正在制作一个 Windows 窗体应用程序。它是一个单词生成器，可以从默认列表中生成一个随机单词，该列表也可以通过用户输入进行修改。我正在寻找一种方法来制作它，以便按钮保存列表，以便用户下次运行应用程序时，他们将拥有与以前相同的列表。txtaddverb 是用户输入的文本框。缺少的按钮仅对名词、形容词和副词列表执行相同的操作。

这是我的代码的样子：

```
 public class Lists
    {
        public static List<string> verbList = new List<string>() {"eat", "scramble", "slap", "stimulate"};

        public static Random randomverb = new Random();
    }

public string pickRandomVerb()

        {
            return Lists.verbList[Lists.randomverb.Next(0, Lists.verbList.Count)];
        }

public void button1_Click(object sender, EventArgs e)

        {
            if (Lists.verbList.Count > 0) verb.Text = pickRandomVerb();
        }

public void button5_Click(object sender, EventArgs e)

        {
            Lists.verbList.Add(txtaddverb.Text);
            txtaddverb.Clear();
        } 

public void button9_Click(object sender, EventArgs e)

        {
            Lists.verbList.Clear();
            verb.Clear();
            txtaddverb.Clear();
        }

//below is the button that I want to save the list

public static void button13_Click(object sender, EventArgs e)

        {
            //need help here
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:38:20.543

将 a`List<string>`写入文件：

```
File.WriteAllLines(path, verbList); 
```

如果文件不存在，这将创建文件，否则将覆盖它。

从文件中读取它：

```
List<string> verbList = File.ReadAllLines(path).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:52:17.977

如果该项目更多地供个人使用，那么您可以将列表写入文本文件并在程序加载时将其读回。可以为此实现流读取器和流写入器类。有关一些示例代码，请参阅[http://msdn.microsoft.com/en-us/library/aa903247%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa903247%28v=vs.71%29.aspx)。

如果多人将使用您的应用程序，我会说将列表保存到数据库将是一个更好的解决方案。这是一个很好的起点[http://www.dreamincode.net/forums/topic/31314-sql-basics-in-c%23/#/](http://www.dreamincode.net/forums/topic/31314-sql-basics-in-c%23/#/) 如果您没有 SQL 服务器，可以将教程调整为类似微软访问。（您将使用 System.Data.OleDb 而不是 System.Data.SqlClient）

有很多文章都在讨论如何在文本文件或数据库中读取和写入信息。如果我发布的两个链接没有您要查找的内容，请进行一些搜索，您应该能够找到适合您需求的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:24:58.730

要看。你想在哪里保存输入？在文本文件中？在数据库中？

保存到文本文件的示例

```
 // create a writer and open the file
        TextWriter tw = new StreamWriter("date.txt");

        // write a line of text to the file
        tw.WriteLine(DateTime.Now);

        // close the stream
        tw.Close(); 
```

# python - 查找列表中最高的 n 个元素及其位置。Python

> ID：15136693
> 
> 赞同：1
> 
> 时间：2013-02-28T13:23:22.487
> 
> 标签：python, performance, list

最近我被要求编写一些代码来查找列表中最高的 n 个元素并返回值和位置。

你能比这更快（在执行时间方面）吗？

```
def highest(L, n):
    return sorted(enumerate(L), reverse=True, key=lambda x: x[1])[:n]

if __name__ == '__main__':

    M = [102, 56, 2355, 3, 25, 78, 19, 25, 1002, -54, 0, 23, -1]
    r = highest(M,5)
    print r  #[(2, 2355), (8, 1002), (0, 102), (5, 78), (1, 56)] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T13:30:04.467

如果`n`与列表的长度相比较小，则`heapq.nlargest`应该比对整个列表进行排序更快。它也更具可读性。

```
def highest(L, n):
    return heapq.nlargest(n, enumerate(L), key=operator.itemgetter(1))

>>> M = [102, 56, 2355, 3, 25, 78, 19, 25, 1002, -54, 0, 23, -1]
>>> highest(M,5)
[(2, 2355), (8, 1002), (0, 102), (5, 78), (1, 56)] 
```

这将在 O(N + nlogn) 中工作，其中`N`是列表的长度，`n`是要返回的项目数，而不是 O(NlogN) 进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:05:50.893

只是一个补充，您可以`kth_smallest`在 pandas 中使用来查找 O(N) 中的值。

```
import numpy as np
import pandas as pd
a = np.array([102, 56, 2355, 3, 25, 78, 19, 25, 1002, -54, 0, 23, -1.0])
pd.algos.kth_smallest(a, len(a)-5) 
```

代码在这里：

[https://github.com/pydata/pandas/blob/master/pandas/algos.pyx#L653](https://github.com/pydata/pandas/blob/master/pandas/algos.pyx#L653)

注意：`kth_smallest`仅返回值，但您可以扫描数组以查找位置。

# jquery - 通过 jquery 的验证在不应该时失败

> ID：15136702
> 
> 赞同：0
> 
> 时间：2013-02-28T13:24:02.577
> 
> 标签：jquery

我的表单设置了一些 HTML5，要求在提交之前填写字段，但由于 < IE10 不支持，我需要确保这些浏览器不允许提交空表单。 .

```
<form name="upload" method="post" action="send_form_email3.php" enctype="multipart/form-data">
    <div width="100%" class="con3">
        <div class="lable">
            <label for="first_name">First Name *</label>
        </div>
        <input  type="text" name="first_name" id="first_name" class="span4" required />

        <div class="lable">
            <label for="email">Email Address *</label>
        </div>
        <input  type="text" name="email" id="email" class="span4" required />

        <div class="lable">
            <label for="telephone">Contact Number *</label>
        </div>
        <input  type="text" name="telephone" id="telephone" class="span4" required />

        <div class="lable">
            <label for="comments">Why are you the fun, energetic person that we are looking for? *</label>
        </div>
        <textarea  name="comments" rows="8" id="comments" class="span4" required /></textarea>

        <div class="lable">
            <label for="upload">Send Us Your CV *</label>
        </div>
        <input type="file" name="upload" id="upload" required />

        <input type="submit" value="Submit" class="btn btn-success">
    </div>
</form> 
```

为了在 < IE10 上处理此验证（还有其他不兼容 DOM 的浏览器吗？哈哈），我写了一些 jquery。

大多数情况下，以下内容适用于其他形式，但这次我想我可能会尝试对其进行一些改进并循环使用控件，`.each`而不是为每个输入运行一个新的 if 语句。

```
$("form[name=upload]").submit(function() {
    // Internet Explorer uses a different call to stop form submission
    // so we need to determine which browser is being used.

    // DOM compliant browsers use HTML5 to do this.

    if ($.browser.msie)
    {
        ($("form[name=upload] input").each(function() {
            if ($(this).val() == "")
            {
                var target, errmsg;
                switch ($(this).attr("name"))
                {
                    case "first_name":
                        errmsg += "Please enter your name.\r\n";
                        break;
                    case "email":
                        errmsg += "Please enter your email address.\r\n";
                        break;
                    case "telephone":
                        errmsg += "Please enter a contact number.\r\n";
                        break;
                    case "comments":
                        errmsg += "Please tell us why you are the fun, energetic person that we are looking for.\r\n";
                        break;
                    case "upload":
                        errmsg += "Please upload your CV so that we can review it.";
                        break;
                }
                event.returnValue = false;
                alert(errmsg);
            }
        });
    }
}); 
```

我不是很熟悉，`.each()`所以我不能确定自己是否正确。目前，此代码仍然允许表单提交通过，即使有空字段也不会发出任何警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:13:13.590

以下代码似乎有效：

*   用括号和花括号修复了一些语法错误（textarea 的标记也有双重关闭'/'）
*   将自 jquery 1.9 以来不受支持的 $.browser.msie 替换为`navigator.userAgent.match(/msie/i)`（测试对`required`属性的支持可能会更好）

    ```
    $("form[name=upload]").submit(function() {      
    // Internet Explorer uses a different call to stop form submission
    // so we need to determine which browser is being used.

    // DOM compliant browsers use HTML5 to do this.

    if (navigator.userAgent.match(/msie/i))
    {
        $("form[name=upload] input").each(function() {
            if ($(this).val() == "")
            {
                var target, errmsg;
                switch ($(this).attr("name"))
                {
                    case "first_name":
                        errmsg += "Please enter your name.\r\n";
                        break;
                    case "email":
                        errmsg += "Please enter your email address.\r\n";
                        break;
                    case "telephone":
                        errmsg += "Please enter a contact number.\r\n";
                        break;
                    case "comments":
                        errmsg += "Please tell us why you are the fun, energetic person that we are looking for.\r\n";
                        break;
                    case "upload":
                        errmsg += "Please upload your CV so that we can review it.";
                        break;
                }
                event.returnValue = false;
                alert(errmsg);
            }
        });
        }
    }); 
    ```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:58:56.887

所以最后我采取了简单的方法并用条件语句包围了我的脚本块：

```
<!--[if IE]>
<script type="text/javascript">
    // Do jquery validation here...
</script>
<![endif]--> 
```

# arrays - 如何从每个 Excel 单元格中删除前导空格？

> ID：15136705
> 
> 赞同：0
> 
> 时间：2013-02-28T13:24:11.783
> 
> 标签：arrays, vba, excel

假设以下 Excel 工作表：

```
 | A
--+-----
1 |foo bar
2 |  bar baz
3 |   baz
4 | bam 
```

我需要一种自动删除所有*前导*空格的方法：

```
 | A
--+-----
1 |foo bar
2 |bar baz
3 |baz
4 |bam 
```

我找不到执行此操作的 Excel 函数。谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:37:51.470

用于`=Trim(A1)`从字符串的任一侧删除 whitespce。

要将剩余的空白字符替换为换行符，您可以使用`=SUBSTITUTE(A1," ",[X])`where `[X]`is the one：

*   `Char(10)`{换行}
*   `Char(13)`{用于回车}
*   [type]`Alt+Enter`在 Excel 单元格中手动插入换行符

**帮助参考**

`TRIM(text)` 删除文本中的所有空格，单词之间的单个空格除外。

`SUBSTITUTE(text, old_text, new_text, [instance_num])`在文本字符串中替换`new_text`。`old_text`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:22:42.543

如果您希望单元格保存转换后的值以及`[return]`单词之间的空格，请使用以下代码：

```
'DECLARE VARIABLES
Dim myRng As Range, c As Range

'INITIALIZE VARIABLES
Set myRng = Range("A1:A4")

'LOOP THRU RANGE
For Each c In myRng.Cells
    'TRIM LEADING AND TRAILING SPACES
    c.Value = LTrim(c.Value)
    c.Value = RTrim(c.Value)
Next c

'ADD RETURN SPACE
myRng.Replace What:=" ", Replacement:=Chr(10), LookAt:=xlPart 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T03:53:15.267

您可以使用下面的数组方法非常快速地做到这一点，它完全避免了循环

虽然代码可以有效地在一条长行中运行，但为了清楚起见，我已经将其分解。

这会将单元格更新到原始范围的右侧。

```
Sub UpDateIt()
    Dim rng1 As Range
    Dim strText As String
    strText = ","
    Set rng1 = Range([a1], Cells(Rows.Count, "A").End(xlUp))
    With Application
        x = Replace(Replace(.Trim(Join(.Transpose(rng1), strText)), ", ", ","), Chr(32), Chr(10))
        rng1.Offset(0, 1) = .Transpose(Split(x, strText))
    End With
End Sub 
```

# java - 从批处理文件中的 java 应用程序获取退出代码

> ID：15136708
> 
> 赞同：3
> 
> 时间：2013-02-28T13:24:17.997
> 
> 标签：java, batch-file, exit

我目前正在努力为我们的一个 java 应用程序创建测试用例。在我的代码中，我的 java 应用程序调用了一个批处理文件，该批处理文件又启动了一个单独的 java 进程，该进程返回一个错误代码，我需要从调用 java 应用程序中使用该错误代码。我正在执行以下操作来调用我的批处理文件：

```
Process process = runTime.exec(new String[]{"cmd.exe","/c",scriptPath});
exitValue = process.waitFor(); 
```

批处理文件如下：

```
@echo off
cd %~dp0
java -cp  frames.FrameDriver
SET exitcode=%errorlevel%
exit /B %exitcode% 
```

现在有了上面的代码和批处理文件，我的 JUnit 框架就挂在这个特定的测试用例上，就好像它在等待它结束一样。现在，当 JUnit 挂在测试用例上时，转到任务管理器并结束 java.exe 进程将允许 JUnit 框架继续处理其他用例。

通过双击运行 .bat 文件可以正常运行 Java 应用程序。

`START`在我的批处理文件中的命令之前添加批处理命令`java`似乎可以解决挂起问题，但我似乎无法从我的 Java 应用程序中获得正确的退出代码，因为它始终为 0。（Java 应用程序使用 System .exit(INTEGER_VALUE))。我假设 %errorlevel% 值被“start”命令自己的退出值覆盖。

谁能告诉我如何解决这个问题？

谢谢。

PS：如果有什么不同，我使用的是 JDK 5 和 Netbeans 5.5.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T23:59:27.257

不要在出口处使用**/B**。以下是我将如何编写脚本：

```
@ECHO off
ECHO Running %~nx0 in %~dp0
CALL :myfunction World
java.exe -cp  frames.FrameDriver
IF NOT ERRORLEVEL 0 (
  SET exitcode=1
) ELSE (
  SET exitcode=0
)
GOTO :END
:myfunction
ECHO Hello %~1
EXIT /B 0
:END
EXIT %exitcode% 
```

注意：此外，您可以通过 3 种不同的方式执行 java 程序：

```
 java.exe -cp  frames.FrameDriver
  CALL java.exe -cp  frames.FrameDriver
  cmd.exe /c java.exe -cp  frames.FrameDriver 
```

This is very critical since, your Java command may exit with a exit code and in order to pass the exit code correctly to the ERRORLEVEL var, you need to use the correct method above, which I am unsure about.

# c# - Jquery Post 没有到达 MVC 控制器

> ID：15136713
> 
> 赞同：0
> 
> 时间：2013-02-28T13:24:28.193
> 
> 标签：c#, asp.net-mvc, jquery, asp.net-mvc-4

抱歉，如果这很琐碎，我已经阅读了许多其他评论，但仍然看不出有什么问题。我已经完成了一些教程，它们似乎工作正常，所以我真的错过了一些简单的东西。

我有一个基本的“删除”链接，我想做一个 JQuery Post 回到控制器以从数据库中删除一个项目，然后更新视图。

我的观点/Javascript：

```
<script type="text/javascript">
$(function () {
    $(".RemoveLink").click(function () {
        var id = $(this).attr("data-id");

        if (id != '') {
            $.post("@Url.Content("~/Agent/Remove")", { "id": id }, function (data) { alert('Here i am'); });
        }
    });
}); 
```

```
 @foreach (var item in Model.Object) {
<tr id="row-@item.ID">
    <td>
        @Html.DisplayFor(modelItem => item.Description)
    </td>
    <td>
        <a href="#" class="RemoveLink" data-id="@item.ID" >Remove</a>
    </td>
</tr>
    } 
```

我的控制器：

```
 [HttpPost]
    public ActionResult Remove(int id)
    {
        return Json(new { Data = "true" });
    } 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:29:27.773

改为使用`@Url.Action("Remove", "Agent")`。

`@Url.Content("...")`用于定位站点的任何静态内容。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:47:17.377

下面的代码运行良好。

```
 @foreach (var item in Model.Object) {
    <tr id="row-@item.ID">
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            <input type="button" class="RemoveLink"  id="@item.ID" Value="Remove" />

        </td>
    </tr>
        }

<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $('.RemoveLink').live("click", function () {
            Remove($(this));
        });
    });

    function Remove(_this) {

        var Id= $(_this).attr('id');

        $.ajax({
            type: 'POST',
            url: '@Url.Action("Remove", "Agent")',
            data: "{id: '" + Id + "'}",
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (data) {
                //do something here......
            },
            error: function () {

            }
        });
    }
</script> 
```

# sublimetext2 - Sublime 2 - 根据文件类型更改背景颜色？

> ID：15136714
> 
> 赞同：5
> 
> 时间：2013-02-28T13:24:30.117
> 
> 标签：sublimetext2

使用现有的 Sublime 2 配色方案，有没有办法选择性地调整背景颜色，例如。.js 文件？非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T14:17:52.967

你必须修改你的`.tmTheme`配色方案`plist`。您可以通过 menu `Preferences/Browse Packages...`、`Color Scheme - Default`directory 找到它。

您应该添加如下内容：

```
<dict>
    <key>scope</key>
    <string>source.js</string>
    <key>settings</key>
    <dict>
        <key>background</key>
        <string>#000000</string>
    </dict>
</dict> 
```

作为设置数组的子项（当然你必须用你的颜色代码更改#000000）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-03T18:19:52.137

我实际上是在尝试更改文本文件的背景颜色，并且想知道 Riccardo 是如何弄清楚如何使用 source.js 作为范围的值的。

您需要找到您尝试更改的文件类型的 .tmLanguage 文件，即文本文件的“Plain text.tmLanguage”。然后查找 scopeName 键并使用该值。这是来自我的“Plain text.tmLanguage”文件：

```
<key>scopeName</key>
<string>text.plain</string> 
```

因此，例如，要将文本文件的前景色更改为石灰：

```
<dict>
        <key>scope</key>
        <string>text.plain</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#00FF00</string>
        </dict>
    </dict> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-17T21:44:54.373

对我来说，我想将配色方案添加到 .conf (apache) 文件

在 Sublime 中打开 myFile.conf

> 工具>命令托盘>设置语法：groovy

我选择了“groovy”，你可以选择任何你想要的。

# android - 在 ListView 中垂直拉伸按钮

> ID：15136716
> 
> 赞同：0
> 
> 时间：2013-02-28T13:24:33.233
> 
> 标签：android, android-layout, listview

我正在使用一个使用内联删除按钮的自定义，但当行超过 1 行时`ListView`，无法让按钮垂直拉伸。`ListView`

我在让文本尊重按钮的边界方面也遇到了一些麻烦，尽管这在早期就起作用了，所以我怀疑这很容易解决。

我正在使用的代码如下：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

 <TextView 
    android:id="@+id/txt_item"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:gravity="center_vertical"
    android:textStyle="bold"
    android:textSize="22sp"
    android:textColor="#000000"
    android:textIsSelectable="false"
    android:layout_margin="8dp" />

 <Button 
     android:id="@+id/btn_delete"
     android:layout_width="wrap_content"
     android:layout_height="match_parent"
     android:layout_alignParentRight="true"
     android:background="@drawable/delete"
     android:contentDescription="@string/delete"/>

</RelativeLayout> 
```

它看起来像这样：

![我的列表视图](../Images/c940e43a9cc01be7ef4b4b5a39c8b74d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:29:08.210

试试这个：

```
<LinearLayout 
    android:orientation="horizontal" 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical">

 <TextView 
    android:id="@+id/txt_item"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:textStyle="bold"
    android:textSize="22sp"
    android:textColor="#000000"
    android:textIsSelectable="false"
    android:layout_margin="8dp" 
    android:layout_weight="1"
    android:singleLine="false"
    android:text=""/>

 <Button 
     android:id="@+id/btn_delete"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentRight="true"
     android:background="@drawable/ic_launcher"
     android:contentDescription="@string/delete"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:31:09.053

为按钮添加此属性

```
android:scaleType="fitXY" 
```

图像视图正在拉伸，但它持有的图像没有。请更换

```
android:background="@drawable/delete" 
```

到

```
android:src="@drawable/delete" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:28:14.607

您还需要设置按钮

```
 android:layout_centerVertical="true"

<Button 
     android:id="@+id/btn_delete"
     android:layout_width="wrap_content"
     android:layout_height="match_parent"
     android:layout_alignParentRight="true"
   android:layout_centerVertical="true"
     android:background="@drawable/delete"
     android:contentDescription="@string/delete"/> 
```

我认为它对你有帮助。

# image - 在 Matlab 中优化一个简单的函数（直方图距离）

> ID：15136717
> 
> 赞同：3
> 
> 时间：2013-02-28T13:24:34.137
> 
> 标签：image, matlab, optimization, image-processing, histogram

我分析了我的代码，发现这个特定的功能花费了太多时间。关于如何改进此代码的任何建议？

```
function s = compute_distance_hist(h1,h2)
    s = sum(sum(sum(sqrt(h1).*sqrt(h2)))); 
```

此函数计算直方图距离。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:30:24.610

`sqrt(h1.*h2)`您可以通过在最内括号中执行来节省一个平方根 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:09:22.720

更优雅的方式是

```
sum( sqrt( h1(:).*h2(:) ) ) 
```

我不确定它是否更快......

还有一件事，如果问题的根源是`compute_distance_hist`它被多次调用的事实，您可能想尝试将其转换为要使用的函数句柄，而不是显式调用它。

例如，而不是

```
while someCondition
    % computations...
    s = compute_distance_hist( a, b );
    % more computations
end 
```

怎么样

```
compute_distance_hist = @( h1, h2 ) sum( sqrt( h1(:).*h2(:) ) );
while someCondition
   % computation
    s = compute_distance_hist( a, b );
    % more computations
end 
```

# linux - Unix 显示有关匹配两种模式之一的文件的信息

> ID：15136722
> 
> 赞同：3
> 
> 时间：2013-02-28T13:25:01.230
> 
> 标签：linux, command-line, find

我试图在 Unix 系统上递归地显示所有以 a 开头`a`或以 a 结尾的文件，并`a`带有一些关于它们的信息：名称、大小和上次修改时间。

我试过`find . -name "*a" -o -name "a*"`了，它可以显示所有文件，但是当我添加`-printf "%p %s"`它时，它只显示一个结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:32:40.803

如果您希望将相同的操作应用于两种模式，则需要用括号将它们分组。此外，您应该在 printf 中添加一个换行符，否则所有输出都将在一行上：

```
find . \( -name "*a" -o -name "a*" \) -printf "%p %s\n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:42:37.003

```
find . -name "*.c" -o -name "*.hh" | xargs ls -l | awk '{print $9,$6,$7,$8,$5}' 
```

# php - 活动日历不显示活动

> ID：15136723
> 
> 赞同：0
> 
> 时间：2013-02-28T13:25:01.313
> 
> 标签：php, html, mysql, events, calendar

我正在创建一个 PHP 事件日历。我的日历工作正常，但我的任何活动都不会显示（现在我在 2013 年 2 月 28 日只有一个测试活动）

我感觉它与 DATE_FORMAT 有关，但我能得到的任何帮助将不胜感激。

[您可以在http://nitelifeconcepts.com/scrg/calendar.php](http://nitelifeconcepts.com/scrg/calendar.php)查看日历

原始代码来自[http://davidwalsh.name/php-event-calendar](http://davidwalsh.name/php-event-calendar)。阅读评论，看起来其他人也有同样的问题，但他们的解决方案似乎都没有对我有用

我的代码：

```
<html>
<head>
<title>SCRG EVENTS</title>
<link rel="stylesheet" type="text/css" href="calendar.css">
<script type="text/javascript">
    var GB_ROOT_DIR = "http://nitelifeconcepts.com/scrg/greybox/";
</script>
<script type="text/javascript" src="greybox/AJS.js"></script>
<script type="text/javascript" src="greybox/AJS_fx.js"></script>
<script type="text/javascript" src="greybox/gb_scripts.js"></script>
<link href="greybox/gb_styles.css" rel="stylesheet" type="text/css" />
</head>
<body>
<?php
/* Open up a connection to the mysql database on the same server as website */
$db_link = mysql_connect(XXXX, XXX, XXX)
    or die("Unable to connect to mysql database");

/* Select our database (there is more than one in my server) */
mysql_select_db("db156115_scrg", $db_link);
/* draws a calendar */
function draw_calendar($month,$year,$events = array()){

  /* draw table */
  $calendar = '<table cellpadding="0" cellspacing="0" class="calendar">';

  /* table headings */
  $headings =   array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
  $calendar.= '<tr class="calendar-row"><td class="calendar-day-head">'.implode('</td><td   class="calendar-day-head">',$headings).'</td></tr>';

  /* days and weeks vars now ... */
  $running_day = date('w',mktime(0,0,0,$month,1,$year));
  $days_in_month = date('t',mktime(0,0,0,$month,1,$year));
  $days_in_this_week = 1;
  $day_counter = 0;
  $dates_array = array();

  /* row for week one */
  $calendar.= '<tr class="calendar-row">';

  /* print "blank" days until the first of the current week */
  for($x = 0; $x < $running_day; $x++):
    $calendar.= '<td class="calendar-day-np">&nbsp;</td>';
    $days_in_this_week++;
  endfor;

  /* keep going with days.... */
  for($list_day = 1; $list_day <= $days_in_month; $list_day++):
    $calendar.= '<td class="calendar-day"><div style="position:relative;height:100px;">';
      /* add in the day number */
      $calendar.= '<div class="day-number">'.$list_day.'</div>';

    $event_day = $year.'-'.$month.'-'.$list_day;
      if(isset($events[$event_day])) {
        foreach($events[$event_day] as $event) {
          $calendar.= '<div class="event">'.$event['Title'].'</div>';
        }
      }
      else {
        $calendar.= str_repeat('<p>&nbsp;</p>',2);
      }
    $calendar.= '</div></td>';
    if($running_day == 6):
      $calendar.= '</tr>';
      if(($day_counter+1) != $days_in_month):
        $calendar.= '<tr class="calendar-row">';
      endif;
      $running_day = -1;
      $days_in_this_week = 0;
    endif;
    $days_in_this_week++; $running_day++; $day_counter++;
  endfor;

  /* finish the rest of the days in the week */
  if($days_in_this_week < 8):
    for($x = 1; $x <= (8 - $days_in_this_week); $x++):
      $calendar.= '<td class="calendar-day-np">&nbsp;</td>';
    endfor;
  endif;

  /* final row */
  $calendar.= '</tr>';

  /* end the table */
  $calendar.= '</table>';

  /** DEBUG **/
  $calendar = str_replace('</td>','</td>'."\n",$calendar);
  $calendar = str_replace('</tr>','</tr>'."\n",$calendar);

  /* all done, return result */
  return $calendar;
}

function random_number() {
  srand(time());
  return (rand() % 7);
}

/* date settings */
$month = ($_GET['month'] ? $_GET['month'] : date('m'));
$year = ($_GET['year'] ? $_GET['year'] : date('Y'));
if($month < 10)
  $month = '0'.$month;

/* select month control */
$select_month_control = '<select name="month" id="month">';
for($x = 1; $x <= 12; $x++) {
  $select_month_control.= '<option value="'.$x.'"'.($x != $month ? '' : '   selected="selected"').'>'.date('F',mktime(0,0,0,$x,1,$year)).'</option>';
}
$select_month_control.= '</select>';

/* select year control */
$year_range = 7;
$select_year_control = '<select name="year" id="year">';
for($x = ($year-floor($year_range/2)); $x <= ($year+floor($year_range/2)); $x++) {
  $select_year_control.= '<option value="'.$x.'"'.($x != $year ? '' : '    selected="selected"').'>'.$x.'</option>';
}
$select_year_control.= '</select>';

/* "next month" control */
$next_month_link = '<a href="?month='.($month != 12 ? $month + 1 : 1).'&year='.($month !=   12 ? $year : $year + 1).'" class="control">Next Month &gt;&gt;</a>';

/* "previous month" control */
$previous_month_link = '<a href="?month='.($month != 1 ? $month - 1 : 12).'&year='.($month   != 1 ? $year : $year - 1).'" class="control">&lt;&lt;   Previous Month</a>';

/* bringing the controls together */
$controls = '<form method="get">'.$select_month_control.$select_year_control.'&nbsp;<input    type="submit" name="submit" value="Go"   />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$previous_month_link.'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.      $next_month_link.' </form>';

/* get all events for the given month */
$events = array();
$query = "SELECT Title, DATE_FORMAT(eventDate,'%y-%m-%d') AS eventDate FROM eventcalendar    WHERE eventDate LIKE '$year-$month'";
$result = mysql_query($query,$db_link) or die('cannot get results!');
while($row = mysql_fetch_assoc($result)) {
  $events[$row['eventDate']][] = $row;
}

echo '<h2 style="float:left; padding-  right:30px;">'.date('F',mktime(0,0,0,$month,1,$year)).' '.$year.'</h2>';
echo '<div style="float:left;">'.$controls.'</div>';
echo '<div style="clear:both;"></div>';
echo draw_calendar($month,$year,$events);
?>
</body>
</html> 
```

再次感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:08:15.463

尝试将您的日期设置位更改为：

```
if(isset($_GET['month'])) {
$month = $_GET['month'];
} else {
$month = date('m');
}
$month = str_pad($month,2,0,STR_PAD_LEFT);

if(isset($_GET['year'])) {
$year = $_GET['year'];
} else {
$year = date('Y');
} 
```

并摆脱这一点...

```
if($month < 10)
$month = '0'.$month; 
```

我应该警告你，我不是一个编码员！！！

# javascript - 将字符串传递给 jquery 对话框以成为按钮的名称

> ID：15136725
> 
> 赞同：1
> 
> 时间：2013-02-28T13:25:07.763
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc

为了全球化的目的，我需要在 jquery 对话框中翻译按钮，但是当我尝试传递变量时，我没有得到变量的值，只是它的名称。

```
 var RemoveDialogButton = "@FriendsNamesNS.FriendsNames.Remove";
    var CancelDialogButton = "@FriendsNamesNS.FriendsNames.Cancel";

   //alert(RemoveDialogButton);

   $( "#dialog-confirm" ).dialog({
        autoOpen: false,
        resizable: false,
        height:190,
        modal: true,
        buttons: {
        RemoveDialogButton: function() {
             $( this ).dialog( "close" );
            $('#yesno').click();
            return true;
        },
        CancelDialogButton: function() {
        $( this ).dialog( "close" );
        }
      }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:29:13.423

```
RemoveDialogButton: {
      click: function() {
          $( this ).dialog( "close" );
          $('#yesno').click();
          return true;
      },
      text: RemoveDialogButton
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:34:34.140

```
 var buttons= {};
 buttons[your text] = function() { ....};

 $('.selector').dialog({      
   buttons: my_buttons 
  }); 
```

# typescript - ajax异步调用和回调处理的打字稿实现

> ID：15136727
> 
> 赞同：0
> 
> 时间：2013-02-28T13:25:10.247
> 
> 标签：typescript

在打字稿中，我试图实现 ajax 异步调用并通过处理程序方法处理它。下面是代码片段：

```
var JQryAjxSetting: JQueryAjaxSettings = {
    url: "h***//test/test.svc/GetUploadId",
    type: "GET",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: true,
    error: function (xhr, status, error) { alert(error); },
    success: function () { alert("success"); },
    jsonpCallback: 'SetUpLoadID',
}; 
```

在上面的声明中，我希望 a`jsonpCallback:`是我处理回调的地方。在“SetUpLoadID”中，我想得到序列化 json 数据的响应。那么在 SetUpLoadID 方法中我将如何接收数据？类似于事件我会得到一些变量，哪里`event.data`会给我从服务器发送的数据作为响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:49:27.730

在 jQuery 中，jsonpCallback 是向服务器呈现请求时使用的名称。数据将传递给您的成功函数。

```
var JQryAjxSetting: JQueryAjaxSettings = {
    url: "h***//test/test.svc/GetUploadId",
    type: "GET",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: true,
    error: function (xhr, status, error) { alert(error); },
    success: function (data) { alert(data); },
    jsonpCallback: 'itDoesntMatterNotAFunction',
}; 
```

# php - 无法将变量从 Facebook PHP SDK 传递到 Flash

> ID：15136732
> 
> 赞同：0
> 
> 时间：2013-02-28T13:25:24.527
> 
> 标签：php, facebook, actionscript-3, flash

我在将一个简单的变量从连接到 facebook 的 php 文件传递​​给 Flash 时遇到了一些麻烦。这就是我所做的：

当用户进入我的游戏时，他可以选择使用 facebook 登录。如果他选择这样做，我会调用一个 php 文件，将他带到 facebook，在那里他允许访问游戏，然后 facebook 将他重定向到游戏。再次进入游戏后，我使用 LoadVars 调用同一个文件，以便从 facebook 获取用户信息。由于用户已经连接到 facebook，因此变量应该正常传递给 Flash，但它们根本没有。如果我只执行 PHP，我可以正常看到变量，但它根本不会进入 Flash。

在允许访问 facebook 后，我通过将用户重定向到另一个 php 文件来解决问题。然后这个 php 文件将用户再次重定向到 flash 游戏索引，然后变量将正常传递！问题是，由于我将用户重定向到不同的 url，有时我会收到重定向错误……而且我不想使用这种方法。

有任何想法吗？

这是我的php代码：

```
<?php

require_once '../facebook.php'; // Require the Facebook PHP SDK

// CONNECT TO THE FACEBOOK APP
$config = array();
$config[appId] = 'xxxx';
$config[secret] = 'xxxx';
$config[fileUpload] = false;
$facebook = new Facebook ($config);

// GET THE USER ID
$user = $facebook->getUser();

if ($user) { // Succesfully got the user id. User is logged in to facebook
    $userProfile = $facebook->api('/me'); // Get the basic user info from his profile

    $toGame = "";
    $toGame .= $userProfile['first_name']."#";
    $toGame .= $userProfile['middle_name']."#";
    $toGame .= $userProfile['last_name']."#";
    $toGame .= $userProfile['birthday']."#";
    $toGame .= $userProfile['email']."#";
    $toGame .= $userProfile['gender'];

    echo $toGame;
}
else { // Failed to get the user's facebook id. Tell him to log on facebook
    $params = array ();
    $params[scope] = 'publish_stream, user_birthday, email';
    //$params[redirect_uri] = 'xxx';
    $params[redirect_uri] = 'xxx';
    $loginUrl = $facebook->getLoginUrl($params);

    echo "needLogin#".$loginUrl; // Tell Flash to redirect the user to the facebook connect page
}

?> 
```

# python - 解决如何在 Python 中的类中赋予属性

> ID：15136735
> 
> 赞同：2
> 
> 时间：2013-02-28T13:25:28.270
> 
> 标签：python, api, class, optimization, coding-style

我有以下课程：

```
class Point(object):
    __slots__= ("x","y","z","data","classification")
    def __init__(self,x,y,z,n=None):
        self.x = float(x)
        self.y = float(y)
        self.z = float(z)
        self.data = [self.x,self.y,self.z]

    def set_classification(self,n):
        self.classification = n

p = Point(10,20,30)
p.data
[10.0, 20.0, 30.0]
p.set_classification(0)
p.data
[10.0, 20.0, 30.0] 
```

我有以下问题：

首先，创建 Point 对象的参数是`x,y`, 和`z`。`Classification`是一个附件参数（有时是文件内的报告其他没有）。如果可能的话，我希望找到一种方法来 `p.data = [10.0, 20.0, 30.0, 50.0]`设置分类或未设置`p.data = [10.0, 20.0, 30.0]`分类。

二、我用`set_classification`

```
def set_classification(self,n):
      self.classification = n 
```

这是正确的 python API 风格吗？我阅读了几个论坛帖子，但我仍然感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:33:54.000

您可以使用 a[`property`](http://docs.python.org/2/library/functions.html#property)来处理分类：

```
class Point(object):
    __slots__= ("x", "y", "z", "data", "_classification")
    def __init__(self, x, y, z):
        self.x = float(x)
        self.y = float(y)
        self.z = float(z)
        self.data = [self.x,self.y,self.z]

    @property
    def classification(self):
        return getattr(self, '_classification', None)

    @classification.setter
    def classification(self, value):
        self._classification = value
        if value:
            self.data = self.data[:3] + [value]
        else:
            self.data = self.data[:3] 
```

`classification`这为属性设置了一个 getter 和一个 setter ；访问该`classification`属性将转换为调用的第一个方法。设置`classification`属性在 setter 中进行转换，第二种方法被调用：

```
p = Point(1, 2, 3)
p.classification = 50  # calls the second `classification` method, the setter, for you.
print p.classification # calls the first `classification` method, the getter. 
```

我在`classification`这里选择了属性作为属性，但您也可以创建`data`一个属性。您将哪一个变成属性取决于使用模式和意图。如果`classification`很少更改，则使其成为属性会更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:36:23.910

Getter 和 setter 方法通常不受欢迎。您可以使用属性来实现此目的，但是我建议始终包含`classification`在您的返回值中，因为您的脚本的其他部分可能期望它`data`始终是一个 4 项列表。API 应该是一致的。

这是我使用属性的看法：

```
class Point(object):
    __slots__= ("x", "y", "z", "data", "classification")
    def __init__(self, x, y, z, n=None):  ## what's n for?
        self.x = float(x)
        self.y = float(y)
        self.z = float(z)

        self.classification = None

    @property
    def data(self):
        if self.classification:
            return [self.x, self.y, self.z, self.classification]
        else:
            return [self.x, self.y, self.z]

p = Point(10, 20, 30)
print p.data   ## [10.0, 20.0, 30.0]
p.classification = 50.0
print p.data   ## [10.0, 20.0, 30.0, 50.0] 
```

# asp.net-mvc-3 - Updating article with multiple child elements from one view

> ID：15136736
> 
> 赞同：1
> 
> 时间：2013-02-28T13:25:35.427
> 
> 标签：asp.net-mvc-3, entity-framework

I've been looking for this conundrum for days now and been on many possible solutions, but either the examples are too far removed from what I am attempting and I am just not good enough to take in the data because of it. Hence I decided to ask the question myself and show my particular situation.

I got a product model like this (simplified)

```
public class Product
    {
        [Key]
        public int ProductId { get; set; }
        public string SKU { get; set; }
        public int ProductCategoriesId { get; set; }
        public bool Purchase { get; set; } 
        public bool ShowProduct { get; set; } 
        public virtual IList<ProductTranslations> ProductTranslations { get; set; }
    }

public class ProductTranslations 
    {
        [Key]
        public int ProductTranslationsId { get; set; }
        public int ProductId { get; set; }
        public string ProductLanguage { get; set; }
        public string Description { get; set; }
        public string ProductName { get; set; }
        public virtual Product Product { get; set; }
    } 
```

So I have one product with language neutral data, then each product can have several child elements, one for each language. I have an edit form where I want to show the language neutral data and the language specific data (names and descriptions).

Simplified view:

```
@model Artikelhantering.Models.Product

@using (Html.BeginForm())
{
@Html.LabelFor(model => model.SKU)

@foreach (var item in Model.ProductTranslations)
{
    @Html.EditorFor(TranslationItem => item.ProductName) 
    @Html.TextAreaFor(TranslationItem => item.Description)
}

<p>
<input type="submit" value="Save" />
</p>
} 
```

This gets everything onto the view nice and tidy looking I think, I think I could (should?) make a dedicated viewmodel for the editor-view later on. Anyway the problem is I don't know how to update the data on submit. I can update the language neutral data using normal EF approach but any changes to the fields from the other model are unchanged...

And to be honest that makes perfect sense to me, since there's nothing in the form to distinquish them, no unique id's or such and the product model does not contain those fields either... The way I would this in old classic asp would be to name the fields with their unique Id's and then make an SQL update query that updated each child model on submitting the form. I guess I could implement such a practice here too but it doesn't feel like the right way to go about things.

Is there a proper or 'best practices' approach in MVC for this kind of thing?

# c - 如何使用 perf 分析 C 项目代码？

> ID：15136738
> 
> 赞同：2
> 
> 时间：2013-02-28T13:25:37.857
> 
> 标签：c, optimization, perf

如何使用 perf 检查哪些部分代码运行缓慢？我遇到了这些 [链接](https://code.google.com/p/kernel/wiki/PerfUserGuide)，但我仍然无法理解生成的数据是这样的！那么我如何理解 perf 的报告和 perf annotate 生成的数据？[图片](http://i.stack.imgur.com/clOxb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:33:08.723

本[教程](https://perf.wiki.kernel.org/index.php/Main_Page)可能会有所帮助。正如 osgf 所说，您想寻找“最热门”的功能和指令，这是您的程序花费大部分时间的地方。然后思考如何改进这些领域。确保您有调试符号，以便 perf 报告为您提供更易于理解的输出。

# javascript - 为页面中的所有元素执行的按钮上的主干事件

> ID：15136751
> 
> 赞同：0
> 
> 时间：2013-02-28T13:26:10.013
> 
> 标签：javascript, jquery, model-view-controller, backbone.js

我有一个从 Backbone.View 扩展的视图类，在模型中我有以下按钮：

```
<a class="comment-btn delete-comment">Delete</a> 
```

我将方法与按钮相关联，如下所示：

```
events:{
"click delete-comment":"deleteComment"
} 
```

问题是当我单击一个按钮时，该方法会针对页面中可用的每个评论执行。

我怎样才能让它只在被点击的项目上执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:31:22.453

你的观点是什么样的？设置成什么`el:`？

事件的范围应为当前视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:35:53.353

对于这种情况，我通常为每个按钮添加一个“data-id”属性，并使用它来确定要操作的评论。

例如，如果按钮被定义为：

```
<a class="comment-btn delete-comment" data-commentId="1">Delete</a> 
```

然后，事件处理程序将通过评估事件源来确定正确的注释。以下示例假定使用 jQuery：

```
deleteComment: function(event, args) {
   var id = $(this).data("commentId");
   ...
} 
```

# android - dx.jar 文件未从 SDK 文件夹加载

> ID：15136752
> 
> 赞同：2
> 
> 时间：2013-02-28T13:26:19.473
> 
> 标签：android, sdk

当我将 Android SDK 文件夹从我朋友的桌面复制到我的桌面时，我收到此错误。我在首选项中更改了我的 SDK 的路径，它告诉我更新我的 ADT，我试图这样做但无法做到，因为它给了我无法重命名我的文件夹名称的错误。我也尝试删除我以前的 SDK 文件夹，但失败了。然后我也在我的 Eclipse Indigo 中重新安装了插件，但没有成功。我的 dx.jar 确实存在于平台工具的 lib 文件夹中。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T11:27:25.477

`dx.jar`这是由于VirtualStore（Windows 存储系统和程序文件的用户版本的文件夹）中存在较旧版本的。转到`"C:\Users\<your user name>\AppData\Local\VirtualStore\<android-sdk path>"`并删除所有内容，或仅删除`"\platform-tools\lib\dx.jar"`文件。

即：如果您的用户名是`"user32"`并且您的 android SDK 放置在 中，`"C:\Program Files\Java\android-sdk"`则更新后您可能会有一个过时版本`dx.jar``"C:\Users\user32\AppData\Local\VirtualStore\Program Files\Java\android-sdk\platform-tools\lib\"`

# html - 基于相对定位的孩子的父母身高

> ID：15136754
> 
> 赞同：2
> 
> 时间：2013-02-28T13:26:23.110
> 
> 标签：html, css, css-position

css 是一个**了不起**的东西，除非你被阻止并且你还没有你的*ahaha 时刻*。

今天，我无法将包含**相对定位**元素的父 div**的高度缩放到适当的高度。**这是因为孩子们正在使用一个属性。**`top`**

 **现在我知道了`top`相对定位元素的工作原理，并且我理解了为什么它不包含正确的高度值。

我想知道的是：
“是否可以在不切换到填充或边距的情况下**将这个顶级属性包含在我父母的高度中？”**

这是我的代码的小提琴：[http://cssdeck.com/labs/unfeydw0](http://cssdeck.com/labs/unfeydw0)
或者下面的简单代码：

*html:*

```
<div>
    <div class="relative">
    </div>
</div> 
```

*CSS：*

```
.relative {
    position: relative;
    top: 42px;
    height: 40px;
    width: 100%;
    background: red;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:30:03.883

当您指定“顶部”时，您将始终移动对象而不会影响父对象的高度。这意味着如果你想影响它的高度，你必须用边距移动它。

所以你的答案是：“不，这是不可能的”。这是规范：[http ://www.w3.org/TR/CSS2/visudet.html#Computing_heights_and_margins](http://www.w3.org/TR/CSS2/visudet.html#Computing_heights_and_margins)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T19:32:13.460

我发现在类似情况下对我有用的不是设置`top:`I set `margin-top:`。这将导致父 div 适当地调整自身大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:32:28.783

您可以在 之后添加一个空元素`.relative`并将其设置`height`为`.relative`' 的`top`定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:45:22.233

如果你想用 jquery 传递它

```
var positionToTop = $(".relative").css("top");
$(".relative").parent().css({"top":positionToTop}); 
```

我在这里为你[分叉了一个 CSSDeck](http://cssdeck.com/labs/gcdvzpyf)**

# canvas - 使我的 Canvas Kinetic JS 代码更高效。Firefox / Opera 都内存不足

> ID：15136762
> 
> 赞同：2
> 
> 时间：2013-02-28T13:26:51.520
> 
> 标签：canvas, html5-canvas, kineticjs

我有一个小动画，在单击按钮时执行。画布元素已被定义。这在 Chrome 和 IE 中完美运行。但是 Opera 会抛出内存不足错误。

我已将其缩小为以下代码：

谁能给我提示/建议一种使此代码更有效的方法。这是我的第一个画布项目，所以请不要因为糟糕的代码而侮辱我！:)

```
//function which runs once the 'play' button is clicked. Animation
function startIntro(){
welcomeLayer.remove();

 setTimeout(function() {
   introLayer.transitionTo({
      y: 0,
      duration: 0.3
    });
  }, 1);

 setTimeout(function() {
   introLayer.transitionTo({
      x: -stageWidth * 2 + 450,
      duration: 15   
    });
  }, 1020);

   setTimeout(function() {
        openJaws();
    }, 1000);

    setTimeout(function(){
        skipIntro.transitionTo({
            y:stageHeight - 40,
            duration:0.9
        });

         skipIntroText.transitionTo({
            y:stageHeight - 43,
            duration: 0.9
        });
    }, 500);

  setTimeout(function() {
        AmberGreenBody.transitionTo({
            x: stageWidth / 12 - 100,
            duration: 1.3,
            easing: 'ease-out'
          });

        AmberGreenArm.transitionTo({
            x: stageWidth / 12  -100,
            duration: 1.3,
            easing: 'ease-out'
          });
   }, 1090);

   setTimeout(function() {
        AmberGreenSpeechBubble.transitionTo({
           duration:0.2,
           scale: {
               x: 1,
               y: 1
           },
         easing: 'ease-out'
        });
    }, 2100);

   setTimeout(function() {
        AmberGreenSpeechBubbleText.transitionTo({
           duration:0.2,
           scale: {
               x: 1,
               y: 1
           },
           easing: 'ease-out'
        });
   }, 2100);

   setTimeout(function() {
        AmberGreenSpeechBubble.transitionTo({
           duration:0.1,
           scale: {
               x: 0,
               y: 0
           },
           easing: 'ease-out'
        });
   }, 6500);

  setTimeout(function() {
        AmberGreenSpeechBubbleText.transitionTo({
           duration:0.2,    
           scale: {
               x: 0,
               y: 0
           },
           easing: 'ease-out'
        });
   }, 6500);

   setTimeout(function() {
        TheConeBody.transitionTo({
            x: stageWidth / 5,
            duration: 2,
            easing: 'ease-out'
          });

           TheConeArm.transitionTo({
            x: stageWidth / 5 -10,
            duration: 2,
            easing: 'ease-out'
          });
  }, 6550);

   setTimeout(function() {
      TheConeSpeechBubble.transitionTo({
           duration:0.2,

     scale: {
         x: 1,
         y: 1
     },
      easing: 'ease-out'
    });
  }, 8900);

   setTimeout(function() {
       TheConeSpeechBubble.transitionTo({
           duration:0.1,
     scale: {
         x: 0,
         y: 0
     },
      easing: 'ease-out'
    });
  }, 12000);

      setTimeout(function() {
       TheConeSpeechBubbleText.transitionTo({
           duration:0.2,

     scale: {
         x: 1,
         y: 1
     },
      easing: 'ease-out'
    });
  }, 8900);   

    setTimeout(function() {
       TheConeSpeechBubbleText.transitionTo({
           duration:0.2,

     scale: {
         x: 0,
         y: 0
     },
      easing: 'ease-out'
       });
  }, 12000);   

  setTimeout(function() {
      AmberGreenSpeechBubbleTwo.transitionTo({
            duration:0.2,
            scale: {
                x: 1,
                y: 1
            },
      easing: 'ease-out'
    });
  }, 13000);

   setTimeout(function() {
       AmberGreenSpeechBubbleTextTwo.transitionTo({
            duration:0.2,
            scale: {
                x: 1,
                y: 1
            },
            easing: 'ease-out'
        });
  }, 13000);

   setTimeout(function() {
       AmberGreenSpeechBubbleTwo.transitionTo({
            duration:0.1,
            scale: {
                x: 0,
                y: 0
            },
            easing: 'ease-out'
        });
  }, 17000);

  setTimeout(function() {
       AmberGreenSpeechBubbleTextTwo.transitionTo({
            duration:0.2,
            scale: {
                x: 0,
                y: 0
            },
             easing: 'ease-out'
        });
  }, 17000);

  setTimeout(function() {
        BlindSpotBody.transitionTo({
            x: stageWidth / 2 + 400,
            duration: 1.5,
            easing: 'ease-out'
          });
  }, 17000);

  setTimeout(function() {
        BlindSpotBubble.transitionTo({
            scale:{
                x: -1,
                y:1
            },
            duration: 0.25,
            easing: 'ease-out'
          });

           BlindSpotText.transitionTo({
            scale:{
                x: 1,
                y:1
            },
            duration: 0.25,
            easing: 'ease-out'
          });
  }, 17500);

setTimeout(function() {
        BlindSpotBubble.transitionTo({
            scale:{
                x: 0,
                y:0
            },
            duration: 0.25,
            easing: 'ease-out'
          });

           BlindSpotText.transitionTo({
            scale:{
                x: 0,
                y:0
            },
            duration: 0.25,
            easing: 'ease-out'
          });
  }, 22500);

    setTimeout(function() {
        BlindSpotBody.transitionTo({
            y: stageHeight*2 ,
            duration: 1.5
          });

          AmberGreenBody.transitionTo({
            y: stageHeight*2 ,
            duration: 1.5
          });

          AmberGreenArm.transitionTo({
            y: stageHeight*2 ,
            duration: 1.5
          });

          TheConeBody.transitionTo({
            y: stageHeight*2 ,
            duration: 1.5
          });

          TheConeArm.transitionTo({
            y: stageHeight*2 ,
            duration: 1.5
          });
       }, 24000);

    setTimeout(function() {
         gameboardGroup.transitionTo({
             x: 425,
             duration: 15
           });
    }, 1020);

         setTimeout(function() {
         openJaws();

  }, 1000);

 setTimeout(function() {
      scoreGroup.transitionTo({
          y:5,
          duration: 0.5,
          easing:'bounce-ease-out'

      });
  }, 23400);     
}//End of StartIntro Functin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:30:10.850

正如精英所建议的那样，放弃所有的超时。使用新的 Kinetic.Animation 创建单个 Animation 对象，并在其中放置根据过去的时间触发不同转换的逻辑。

# mobile - Firefox OS 认证的应用程序

> ID：15136765
> 
> 赞同：1
> 
> 时间：2013-02-28T13:26:56.667
> 
> 标签：mobile, sms, firefox-os

我已经下载并安装了 FIrefox OS Simulator 用于测试和开发。我想测试一些仅允许在经过认证的应用程序上使用的功能，例如 SMS 和电话呼叫，如此[处](https://developer.mozilla.org/en-US/docs/Apps/App_permissions)所述。

为了在模拟器中访问此功能，我应该在清单（.webapp 文件）中包含什么？

谢谢， 塔马斯 Ionut

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:26:44.860

这是非常手动的，但我认为了解这些东西是如何在幕后工作的会很酷（这是我知道它总是有效的唯一方法）：

1.  确保你的`manifest.webapp`包括`"type": "certified"`
2.  打包应用程序
3.  将包含你`manifest.webapp`和`zip`包的目录添加到模拟器的 Gais`webapps`目录
4.  `webapps.json`为您的应用添加一个条目。确保它有`"appstatus": 3`
5.  玩得开心 ：）

模拟器 Gaia的`webapps`目录应该在 Firefox 配置文件中，路径如下：

```
/home/username/.mozilla/firefox-trunk/foobarbaz.default/extensions/r2d2b2g@mozilla.org/profile/webapps/. 
```

* * *

现在是最简单但目前不是那么容易的方法：

MDN 有[一个条目](https://developer.mozilla.org/en-US/docs/Apps/Packaged_apps)说

> 注意：如果您想测试经过认证的应用 API（如上所述），请在要安装应用的设备（Firefox OS）上打开“开发者模式”，并确保在 manifest.webapp 文件中指定正确的类型。

我在 Simulator 上看到过该选项，但它最近消失了。我几乎不记得在某个地方看到有人说他们会禁用模拟器构建的一些标志，但我再也找不到它了。无论如何，您可以尝试两种选择：

1.  自己构建模拟器（我需要大量的空间和时间，请注意！），看看你是否可以在那里获得这个选项。它不太可能会起作用，如果它真的被禁用了
2.  [从labs ftp](https://ftp.mozilla.org/pub/mozilla.org/labs/r2d2b2g/)下载 Simulator 1.1pre2 或 1.1pre3 ，这是我知道的最后一个模拟器版本，启用了该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:50:26.440

检查标准[短信](https://github.com/mozilla-b2g/gaia/tree/master/apps/sms)和[拨号器](https://github.com/mozilla-b2g/gaia/tree/master/apps/communications)应用程序。

请记住，Firefox OS 的生产版本不允许安装第三方认证的应用程序。

# wordpress - 自定义帖子网址？

> ID：15136767
> 
> 赞同：0
> 
> 时间：2013-02-28T13:27:02.410
> 
> 标签：wordpress

我做了一个新的自定义帖子，如下所示：

```
register_post_type( 'news',
            array( 
            'label' => __('News'), 
            'public' => true, 
            'show_ui' => true,
            'show_in_nav_menus' => false,
            'menu_position' => 5,
            'rewrite' => false,
            'supports' => array(
                    'title',
                    'thumbnail',
                    'editor',
                    'excerpt')
                ) 
            ); 
```

但是当我尝试发布网址时，它看起来像以下 `http://domainname.com/?news=post_title`

我希望网址像 `http://domainname.com/category/title`

所以我通过将重写更改为尝试以下帖子，`array('slug' =>'title', 'with_front' => true)` 但是当我这样做时，它给了我 404 page not found

这里有什么问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:13:41.367

Yes i knew what was the problem you have first to reset the permalink to default then create a new post type with `rewrite` then make it back to `/%category%/%postname%/`

# jquery - 使用 jQuery 的 ASP.NET MVC 异步文件上传

> ID：15136770
> 
> 赞同：2
> 
> 时间：2013-02-28T13:27:13.253
> 
> 标签：jquery, asp.net-mvc-3

我已经使用 [这个 jQuery 插件](https://github.com/blueimp/jQuery-File-Upload)来上传文件。

它适用于单个/多个文件。

但是当我尝试上传 90 到 100 MB 的大文件时，它会阻止所有其他 ajax 调用。

如果我已最小化窗口并尝试访问其他页面，则在上传如此大的文件时，所有 ajax 调用都将排队等待上传完成。

文件上传没有任何问题，我可以上传最大 2 GB 的文件。但在上传完成之前，我无法访问我网站的任何其他功能。

我该如何解决这个问题？

我想强制这个上传过程异步工作，让我访问我网站的所有其他页面/功能。

是否有任何其他可用的选项/插件可用于此目的（不带 Flash）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:24:33.823

如果您在控制器中使用 ASP.NET 会话，这是正常和预期的行为。这是设计使然。ASP.NET 会话不是线程安全的，如果您尝试从同一会话触发并行请求，ASP.NET 将简单地阻塞并按顺序执行这 2 个请求。

如果您不希望这种行为，您将不得不禁用包含您要上传到的操作的控制器的会话。这可以通过使用`SessionState`属性装饰它来完成：

```
[SessionState(SessionStateBehavior.Disabled)]
public class SomeController: Controller
{
    // You cannot use Session in this controller

    [HttpPost]
    public ActionResult Upload(MyViewModel model)
    {
        ...
    }
} 
```

# java - 来自接口数组的访问方法

> ID：15136772
> 
> 赞同：0
> 
> 时间：2013-02-28T13:27:17.047
> 
> 标签：java, android

我的代码有问题，找不到在哪里。我一定是忽略了什么。我会解释的。我有一个非常简单的界面：

```
public interface IMyEntity {

    public String GetName();

} 
```

然后我有我的课。我想创建一个使用 IMyEntity 接口数组的 SpinAdapter，这样我就可以为所有实现该接口的 pojo 重用 spinadapter。

```
public class SpinAdapter<IMyEntity> extends ArrayAdapter<IMyEntity> {

private Context context;
private IMyEntity[] values;

public SpinAdapter(Context context, int textViewResourceId, IMyEntity[] objects) {
    super(context, textViewResourceId, objects);
    this.context = context;
    this.values = objects;
}

public int getCount(){
    return values.length;
}

public IMyEntity getItem(int position){
    return values[position];
}

public long getItemId(int position){
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    TextView label = new TextView(context);
    label.setTextColor(Color.BLACK);
    label.setText(this.values[position].GetName());
    return label;
}

@Override
public View getDropDownView(int position, View convertView,
        ViewGroup parent) {
    TextView label = new TextView(context);
    label.setTextColor(Color.BLACK);
    label.setText(values[position].GetName());

    return label;
}

} 
```

我遇到的问题是在这条线上：

```
label.setText(values[position].GetName()); 
```

在这里，我应该可以访问 GetName 方法，但我收到一条错误消息，说它不存在。我不能使用接口的 GetName 方法。

我在这里做错了什么？我希望我的问题很清楚。

谢谢，

比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:33:06.230

不能实例化接口或抽象类。您需要一个实现接口的类才能使用它。

```
public class MyEntityImpl implements IMyEntity {
     public String GetName() {
         return "" ;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:34:21.793

您已经定义了一个接口，但没有实现它的类。您需要一个实现该接口的类型，然后创建一个该类型的数组，它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:44:15.433

我的猜测是问题在于它没有构造函数，请尝试添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T14:14:41.170

好的，找到了。我删除了整个班级并重新开始。现在它起作用了。

现在我的课开始于：

```
public class IEntitySpinAdapter extends ArrayAdapter<IMyEntity> 
```

这有效。

这不会：

```
public class SpinAdapter<IMyEntity> extends ArrayAdapter<IMyEntity> 
```

非常感谢所有试图提供帮助的人！！！！

# php - 使用php在jquery自动更正中显示存储在Mysql数据库中的url中的图像

> ID：15136779
> 
> 赞同：0
> 
> 时间：2013-02-28T13:27:43.260
> 
> 标签：php, jquery, mysql, arrays, image

我猜标题有点令人困惑，但这就是我需要的：

我有一个 jquery 自动完成文本字段，它从数据库中获取数据。一切正常，我可以在文本字段中输入邮政编码的一部分，当该部分存在于数据库中时，它会显示所有可用选项以及城市、州等。

但我想要的是在选项列表中显示该国的国旗（作为图像）。我创建了一个新行：county（其中包含标志图像文件的 url）

这就是出错的地方：

* * *

```
$rs = mysql_query('select zip, city, county, state from zipcode where zip like "'. mysql_real_escape_string($_REQUEST['term']) .'%" order by zip asc limit 0,10', $dblink);

$data = array();
if ( $rs && mysql_num_rows($rs) )
{
while( $row = mysql_fetch_array($rs, MYSQL_ASSOC) )
{

    $data[] = array(
        'label' => $row['zip'] .', '. $row['city'] .' '. $row['state'] .' '. <img src='http://www.colinch.com/fut/$row['county'].'' />  ,
        'value' => $row['zip']
    );
}
} 
```

* * *

我不是 php 专家，所以我认为这只是一件简单的事情出错了。当我删除 < img src="......." 部分时，它只会打印 $row['county'] ，如下所示： USA.png

我希望有一个人可以帮助我！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:29:12.897

你的报价完全错误：

```
 'label' => $row['zip'] .', '. $row['city'] .' '. $row['state'] .'<img src=\'http://www.colinch.com/fut/'.$row['county'].'\' />', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:32:44.697

试试这个 ：

```
$data[] = array(
        'label' => $row['zip'] .', '. $row['city'] .' '. $row['state'] .' <img src="http://www.colinch.com/fut/'.$row['county'].'" />'  ,
        'value' => $row['zip']
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:35:07.937

试试这个

```
 $data[] = array(
        'label' => $row['zip'] .', '. $row['city'] .' '. $row['state'] .' '. '<img src="http://www.colinch.com/fut/'.$row['county'].'"'.'/>'  ,
        'value' => $row['zip'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:35:22.440

你把引号用错了。这就是语法荧光笔如此有用的原因。看看您在问题中编写的代码。它被标记为 SO 和深红色/棕色标记文本所在的位置。你想`<img...`被放入一个文本中！或者更好的是，如果可能的话，将这些内容直接回显到 html 中，如下所示：

```
foreach($countries as $code)
{
    ?><img src="<?php echo $flag; ?>.png/><?php
} 
```

如果您决定不想/不能这样做，那么您的代码应如下所示：

```
'label' => $row['zip'] .', '. $row['city'] .' '. $row['state'] .' <img src=\'http://www.colinch.com/fut/'.$row['county'].'\' />' 
```

**PS**我建议使用`"`html 引号和`'`php 引号。这样你就不需要任何转义:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T13:38:03.757

这可能更容易阅读

```
$data[] = array(
        'label' => "{$row['zip']}, {$row['city']} {$row['state']} <img src='http://www.colinch.com/fut/{$row['county']}' />"  ,
        'value' => $row['zip']
    ); 
```

双引号的使用允许您在不转义字符串的情况下评估使用的变量。

您的问题在于您的报价方法

```
.' '. <img src='http://www.colinch.com/fut/$row['county'].'' />
    ^--no start^--start                         ^--closed 
```

您想继续构建字符串，但没有包含`<img`在文本中。PHP 然后决定再次在`'http...`. 这是不正确的。

# video.js - Safari 和 IE 的 Video.js 问题

> ID：15136780
> 
> 赞同：0
> 
> 时间：2013-02-28T13:27:46.413
> 
> 标签：video.js

我正在使用 video.js，并且我有一个页面，其中包含一个视频区域，单击某些缩略图时必须更改该区域。为此，我使用以下代码：

```
<video id="div_video" class="video-js vjs-default-skin" controls preload="none" width="560" height="315" poster="<?=ROOT?>media/videos/testvid_01.jpg" data-setup="{}">
    <source id="video_mp4" src="<?=ROOT?>media/videos/testvid_01.mp4" type="video/mp4" />
    <source id="video_ogg" src="<?=ROOT?>media/videos/testvid_01.ogv" type="video/ogg" />
    <source id="video_webm" src="<?=ROOT?>media/videos/testvid_01.webm" type="video/webm" />
</video> 
```

缩略图是与“缩略图”类的正常链接。要更改视频，我使用以下代码：

```
$(function () {
  $('.thumbnail').click(function () {
    var $target = 'testvid_' + $(this).attr('id');
    var $content_path = '<?=ROOT?>media/videos/';
    var $vid_obj = _V_('div_video');

    $('img.vjs-poster').hide();

    $vid_obj.ready(function () {
      $vid_obj.pause();
      $('video:nth-child(1)').attr('src', $content_path + $target + '.mp4');
      $('video:nth-child(1)').attr('src', $content_path + $target + '.ogv');
      $('video:nth-child(1)').attr('src', $content_path + $target + '.webm');
      $('img.vjs-poster')
        .attr('src', $content_path + $target + '.jpg')
        .show();
      $('.vjs-big-play-button').show();
      $('#div_video').removeClass('vjs-playing').addClass('vjs-paused');
      $vid_obj.load();
      $vid_obj.play();
    });
  });

  $('#01').click();
}); 
```

ROOT 是这里的完整域名。

现在，这在 Firefox 和 Chrome 中完美运行。视频开始自动播放，当单击其中一个缩略图时，它会变为另一个视频。完美的！

但是，它在 Safari (5.1.7) 和 IE (9) 中不起作用。在 Safari 中它只是无限显示加载图标，而在 IE 中它根本不启动。

当我删除 \$("#01").click(); 时，第一个视频（默认情况下）确实有效，但是当单击任何缩略图时，它只是再次显示加载图标。

在 IE 上，它根本不开始播放。使用兼容模式时，它开始播放但只播放声音。

有人知道这里有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T21:49:06.933

尝试这个：

```
<script type='text/javascript'>
    //<![CDATA[ 
    $(function () {
        $(".thumbnail").click(function () {
            var $target = "testvid_" + $(this).attr("id");
            var $content_path = "<?=ROOT?>media/videos/";
            var $vid_obj = _V_("div_video");

            $("img.vjs-poster").hide();

            $vid_obj.ready(function () {
                $vid_obj.pause();
                $("video:nth-child(1)").attr("src", $content_path + $target + ".mp4");
                $("video:nth-child(1)").attr("src", $content_path + $target + ".ogv");
                $("video:nth-child(1)").attr("src", $content_path + $target + ".webm");
                $("img.vjs-poster").attr("src", $content_path + $target + ".jpg").show();
                $(".vjs-big-play-button").show();
                $("#div_video").removeClass("vjs-playing").addClass("vjs-paused");
                $vid_obj.load();
                $vid_obj.play();
            });
        });

        $(".thumbnail[id='01']").click();
    });
    //]]>
</script> 
```

这对我有用。

# powershell - 如何在 Powershell 中组合两个列表的每个元素

> ID：15136782
> 
> 赞同：1
> 
> 时间：2013-02-28T13:28:02.737
> 
> 标签：powershell

假设我有两个这样的数组：

```
$greetings = "hello","hola","namaste"

$names = "jon","jim" 
```

如果我需要这样的输出：

```
hello jon
hola jon
namaste jon
hello jim
hola jim
namaste jim 
```

我该怎么办？

我试过这个：

```
$greetings | % { $_ + " " + $names} 
```

这只是给我这样的输出：

```
hello jon jim
hola jon jim
namaste jon jim 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:44:28.000

一条线：

```
$names | % { foreach($greeting in $greetings) { "$greeting $_" }} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:34:36.213

你需要一个嵌套循环：

```
$greetings = "hello","hola","namaste"

$names = "jon","jim"

Foreach ($name in $names)
 {
  Foreach ($greeting in $greetings)
   {
    "$greeting $name"
   }
 } 
```

# ruby-on-rails - 我无法编辑已显示值的值

> ID：15136783
> 
> 赞同：0
> 
> 时间：2013-02-28T13:28:04.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用脚手架我创建了一个项目我没有更新它在 pgadmin 中的值但我也能够创建和销毁并且更新的代码是

```
@department = Department.find(params[:id])
respond_to do |format|
  if @department.update_attributes(params[:departments])
    flash[:notice] = 'Department was successfully updated.'
    format.html { redirect_to(@department) }
    format.xml  { head :ok }
  else
    format.html { render :action => "edit" }
    format.xml  { render :xml => @department.errors, :status => :unprocessable_entity }
  end
end 
```

![在此处输入图像描述](../Images/b8cebaa7bf01f21e7216dec26a0cc1b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:33:47.570

看起来你的 config/routes.rb 有问题

你应该有类似的东西`resources :departments`。你能在这里发布你的 routes.rb 和完整的控制器代码吗（如果你自己没有发现错误）。

**更新**

仔细观察错误，我假设您`resource`在路线中使用而不是`resources`.

# ios - iOS：下拉查看徽标

> ID：15136791
> 
> 赞同：1
> 
> 时间：2013-02-28T13:28:15.513
> 
> 标签：ios, objective-c, uiview, graphical-logo

通常在 iOS 应用程序中，当您下拉而不是通常的“拉动刷新”功能时，您会发现公司徽标。我用谷歌搜索了很多，但似乎没有人真正想要这样做。下拉视图时如何实现自定义徽标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:34:23.610

您可以在滚动视图的 contentView 的原点上方放置一个 UIImageView。

IE

```
UIImageView *logoView = [[UIImageView alloc] initWithFrame:CGRectMake(0, -100, 320, 100)];
logoView.image = [UIImage imageNamed:@"logo"];

[scrollView.contentView addSubView:logoView]; 
```

嗯...不是 100% 确定这是否会在没有测试的情况下按我的预期工作？

如果这不起作用，那么它只会将 logoView 放在 scrollView 的顶部。让我知道，我会再试一次：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T14:43:52.510

您只需要将徽标图像作为子视图添加到刷新控件中（并删除/隐藏默认值）

请参阅我的教程，了解如何在 Objective-C 和 Swift 中实现自定义拉取刷新控件：[http ://www.jackrabbitmobile.com/design/ios-custom-pull-to-refresh-control/](http://www.jackrabbitmobile.com/design/ios-custom-pull-to-refresh-control/)

并检查`setupRefreshControl`它是如何组合在一起的方法。

希望对您有所帮助，如果您还有其他问题，请告诉我！

# ios - NSCalendar dateFromComponents 返回错误的日期 2

> ID：15136796
> 
> 赞同：5
> 
> 时间：2013-02-28T13:28:23.470
> 
> 标签：ios, calendar, components, nsdate, nsdatecomponents

我想找出一年中第一周的日期：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setYear:2013];
[components setMonth:1];
[components setWeekOfMonth:1];
[components setWeekday:1];
NSDate *newDate = [calendar dateFromComponents:components];
NSLog(@"%@",newDate); 
```

我得到的是：

```
2012-12-29 23:00:00 +0000 
```

当我与我的 mac 日历进行比较时，我需要得到的是：

```
2012-12-31 23:00:00 +0000 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:00:16.470

（我意识到你现在已经弄清楚发生了什么，但为了未来的读者......）

看看你在这里做什么：

```
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setYear:2013];
[components setMonth:1];
[components setWeekOfMonth:1];
[components setWeekday:1]; 
```

让我们以今天（2013 年 2 月 28 日）为例，看看我们在每一步之后得到了什么（假设；我无法检查这个！）：

*   `setYear:2013`- 没有变化，因为今年已经是 2013 年了
*   `setMonth:1`- 更改为一月：2013-01-28
*   `setWeekOfMonth:1`- 在 2013 年 1 月的第一周更改为同一天（星期四）：2013-01-03
*   `setWeekday:1`- 更改为同一周的星期日：2012-12-30

现在，当您打印出 2012 年 12 月 30 日的当地午夜时，但在 UTC 中，您会得到“2012-12-29 23:00:00 +0000”，因为您的当地时区可能比 UTC 早 1 小时。

因此，正如您已经确定的那样，您想要`setDay`而不是`setWeekOfMonth`/ `setWeekday`，假设您真的想要“1 月 1 日”而不是“1 月第 1 周的星期日”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:41:18.463

问题可能是设置`weekDay` 这里是工作代码

```
 NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [[NSDateComponents alloc] init];
    [components setYear:2013];
    [components setMonth:1];
    [components setDay:1];

    NSDate *newDate = [calendar dateFromComponents:components];
    NSLog(@"%@",newDate); //2012-12-31 23:00:00 +0000 
```

您可以使用的其他替代品`NSGregorianCalendar`，而不是`currentCalender`

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
        NSDateComponents *comp = [gregorian components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:[NSDate date]];
[comp setYear:2013];
[comp setMonth:1];
[comp setDay:1];
NSDate *firstDayOfMonthDate = [gregorian dateFromComponents:comp];
NSLog(@"%@",firstDayOfMonthDate);  // 2012-12-31 23:00:00 +0000 
```

# c++ - 如何用它们的命名等价物替换未命名的结构、联合、类？

> ID：15136798
> 
> 赞同：0
> 
> 时间：2013-02-28T13:28:34.453
> 
> 标签：c++, anonymous-class, anonymous-struct

我对我的项目进行了重构，我想摆脱所有匿名命名空间，包括类、结构、联合。我想以最简单的方式用它们命名的等价物替换它们。据我所知，匿名命名空间的等价物是：

这样的代码：

```
namespace { namespace-body } 
```

相当于：

```
 namespace unique { /* empty body */ }
  using namespace unique;
  namespace unique { namespace-body } 
```

链接：[匿名命名空间歧义](https://stackoverflow.com/questions/3673353/anonymous-namespace-ambiguity)

在这种简单的情况下，只需为 struct、union、class 设置唯一名称就足够了：

1）这样的代码：

```
typedef struct { int a; void func() {}; } s1; 
```

相当于

```
typedef struct unique { int a; void func() {}; } s1; 
```

2）这样的代码：

```
 struct vec3 { 
            struct {
                    class
                    {
                        public:
                        void foo();
                    } bar;
                float x, y, z;
            } hotel; 
            float xyz[3];
    };

int main() {
    vec3 v;
    return 0;
} 
```

相当于：

```
struct vec3 { 
        struct wigwam {
                class skyscraper
                {
                    public:
                    void foo();
                } bar;
            float x, y, z;
        } hotel; 
        float xyz[3];
};

int main() {
    vec3 v;
    return 0;
} 
```

**但是在这种情况下我该怎么办，我不知道：**

```
//Problem example
struct vec3 { 

        struct {
                class
                {
                    public:
                    void foo();
                } bar;  
            float x, y, z;
        } ; 
        float xyz[3];
};

int main() {
    vec3 v;
    v.x = 10; //direct access to the internal variable of anonymous struct.
    return 0;
} 
```

正如我们所看到的，访问匿名结构的成员是可能的，就像这个匿名结构是一个匿名命名空间一样。但是不可能以类似的方式定义 struct 。例如：

```
 struct unique { /* empty body */ }
  using namespace unique;
  struct unique { namespace-body } 
```

也不可能在 struct 中定义命名空间，因此在此示例中，不能仅在“namespace”关键字上替换“struct”。

**那么，为“问题示例”以及所有可能的示例设置匿名结构、联合、类的名称的最简单方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:44:18.857

1.  不，命名命名空间与匿名命名空间不同。匿名命名空间的主要用途是让它们的所有内容都有内部链接——这意味着其他编译单元不能引用它（例如调用函数）。因此**不要**重命名匿名命名空间。这就像`static`从静态函数中删除说明符一样。
2.  `typedef struct { int a; void func() {}; } s1;`可以更好地替换为`struct s1 { int a; void func() {} };`- 不需要额外的“唯一”标识符。同样适用于工会。整个`typedef struct { /*def*/ } Blah;`构造实际上是 C 的残余，在 C++ 中不是必需的。

对于您的实际问题示例：内部结构除了可能引入填充字节之外没有太大影响。所以这应该是等效的并完成工作：

```
//Problem example, revisited
struct vec3 { 

  class Bar {
  public:
    void foo();
  };

  Bar bar;
  float x, y, z;
  float xyz[3];
}; 
```

# ruby-on-rails - Rails 嵌套表单在父表单之前添加

> ID：15136802
> 
> 赞同：0
> 
> 时间：2013-02-28T13:28:53.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有Dog模型和Specie模型，属于Dog。创建 Dog 时，Rails 还会生成嵌套表单来添加物种，通过按钮“添加物种”。麻烦的是，添加嵌套表单后的视图发生在父表单之前。如果我添加了很多额外的嵌套表单，则父表单是最后一个表单。肯定不好。

```
class Dog < ActiveRecord::Base
  attr_accessible :name, :species_attributes
  has_many :species
  accepts_nested_attributes_for :species
  validates :name, :presence => true
end

class Specie < ActiveRecord::Base
  attr_accessible :name, :specie_id
  belongs_to :dog
  validates :name, :presence => true
end 
```

<

```
div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
    <%= f.fields_for :species do |builder| %>
        <%= render 'specie_fields', :f=> builder %>
    <% end %>
    <%= button_to_add_fields 'Add Specie', f, :species %>
  <div class="actions">
    <%= f.submit %>
  </div>
  <% end %> 
```

_specie_fields.html.erb：

```
<div class="field">
<%= f.label :name, 'Specie' %> <br />
<%= f.text_field :name %>
<%= f.hidden_field :_destroy %>
<%= button_to_function 'Specie delete', 'remove_fields(this)' %>
</div> 
```

辅助方法：

```
module ApplicationHelper
  def button_to_add_fields(name, f, association)
    new_object = f.object.class.reflect_on_association(association).klass.new
    fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
      render(association.to_s.singularize + "_fields", :f => builder)
    end
    button_to_function(name, "add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")")
  end
end 
```

JS文件：

```
 function add_fields(link, association, content) {
        var new_id = new Date().getTime();
        var regexp = new RegExp("new_" + association, "g")
        $(link).parent().before(content.replace(regexp, new_id)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:18:23.903

你必须检查你的 JS 函数“add_fields”。

此功能将您的嵌套表单添加到错误的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:05:32.640

在 JS 文件中替换`parent().before`为`before`如下所示：

```
 $(link).before(content.replace(regexp, new_id)); 
```

这样，您在按钮之前插入您的部分（来自您的助手`$(link)`中`this`的这一行：）`button_to_function(name, "add_fields(this, ...`，而不是在它的父级之前（这是您的父级`<%= button_to_add_fields 'Add Specie', f, :species %>`，可能是整个表单）。

# c - 一个简单程序的 GDB 反汇编

> ID：15136806
> 
> 赞同：3
> 
> 时间：2013-02-28T13:29:06.840
> 
> 标签：c, gcc, assembly, x86, gdb

这是一个简单的 C 语言程序，我使用 gdb 对其进行反汇编以了解发生了什么。

```
#include <stdio.h>
#include <string.h>
int main(){
    printf("%d", sizeof(foo("HELLOWORLD")));
}

int foo(char* c)
{
   printf("%s\n",c);
} 
```

下面是**disassemble main对应的汇编代码**

```
0x08048414 <+0>:    push   %ebp
   0x08048415 <+1>: mov    %esp,%ebp
   0x08048417 <+3>: and    $0xfffffff0,%esp
   0x0804841a <+6>: sub    $0x10,%esp
   0x0804841d <+9>: mov    $0x8048520,%eax
   0x08048422 <+14>:    movl   $0x4,0x4(%esp)
   0x0804842a <+22>:    mov    %eax,(%esp)
   0x0804842d <+25>:    call   0x8048320 <printf@plt>
   0x08048432 <+30>:    leave  
   0x08048433 <+31>:    ret 
```

下面是**反汇编 foo**

```
0x08048434 <+0>:    push   %ebp
   0x08048435 <+1>: mov    %esp,%ebp
   0x08048437 <+3>: sub    $0x18,%esp
   0x0804843a <+6>: mov    0x8(%ebp),%eax
   0x0804843d <+9>: mov    %eax,(%esp)
   0x08048440 <+12>:    call   0x8048330 <puts@plt>
   0x08048445 <+17>:    leave  
   0x08048446 <+18>:    ret 
```

我对这些说明感到困惑：

1.  `0x08048417 <+3> and $0xfffffff0,%esp` 为什么堆栈指针之前没有被修改时需要对齐？

2.  `0x0804841a <+6>:sub $0x10,%esp` 这条指令到底对程序做了什么？

3.  `0x0804841d <+9>:mov $0x8048520,%eax` 这条指令对程序有什么特别的作用？

4.  `mov %eax,(%esp)` 周围的括号是什么`%esp`意思？

如果有人解释这一点会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:37:20.097

1.  属于（函数）序言，它通过对 SP 进行位掩码将 SP 对齐到 16 字节边界。

2.  堆栈帧的内存被创建，因为您的指针需要传递给函数。地址将从堆栈传递给函数。然而，似乎表达式是在编译时评估的，因此不需要实际调用。

3.  `0x8048520`可能是您的字符串“%d”的地址。它被放入 eax，然后使用堆栈指针将其放入堆栈。

周围有很多材料，像[这样](https://www.hackerschool.com/blog/7-understanding-c-by-learning-assembly)。

# delphi - Delphi 2010，Master Detail - 遍历master中所有记录的详细信息

> ID：15136807
> 
> 赞同：0
> 
> 时间：2013-02-28T13:29:07.260
> 
> 标签：delphi

给定主：记录 A B

详细选择记录 YA NA YB NB

使用带有索引记录的 mastersource

如果光标 i 在 A（主）上，则详细显示链接到 A 的两条记录（依此类推）。还行吧。如果我离开窗口，我想检查详细信息 A 中的所有记录是否都有 Y，然后所有记录 B 中的所有详细信息都有 Y。但似乎我只能检查以 master 为重点的 master/detail。如果我在 A 主记录上，我无法详细找到 B 记录。有没有办法遍历主程序，从第一条记录开始获取详细信息，然后是第二条记录并获取详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:34:41.673

当然有：

```
MasterTable.First;
while not MasterTable.Eof do
begin
  while not ChildTable.Eof do
  begin
    // Access child table data here. It will contain only the
    // rows related to the current row of MasterTable
    ChildTable.Next;
  end;
  MasterTable.Next;
end; 
```

# javascript - Javascript - 暂停 - 释放内存

> ID：15136818
> 
> 赞同：0
> 
> 时间：2013-02-28T13:29:32.887
> 
> 标签：javascript

使用下面的代码，它使用基于代码中其他位置的 dataRefreshButton 函数刷新屏幕。

但是我发现 Firefox、Chrome 和 IE 没有机会释放内存。所以我试图每隔一段时间暂停一次刷新，试图让浏览器有机会捕捉到。这似乎并没有像我预期的那样暂停，无论何时暂停，它都会在允许释放内存方面正常工作。

所以问题是，停止刷新（setInterval）然后让它在大约十秒后恢复的最佳方法是什么？

```
<script type="text/javascript">
    function getdata(){

        counter++;
        if(counter==20) {

           clearInterval(reset, 10000);

        }
        //window.alert(counter);
       document.getElementById('dataRefreshButton').click();

    }

    function reset() {

            intGetData = setInterval(getdata, 4000);
            counter=0;

    }

    var intGetData;
    var counter = 0;

    function sel1(){
        var ref = document.getElementById('AutoRefresh').checked;

        if(ref == true) {

            intGetData = setInterval(getdata, 4000);

  window.alert("Auto refresh on");
        }

        else{
            clearInterval(intGetData);  
         //   window.alert("Auto refresh off");   

        }
    }
</script> 
```

# spring - 相同上下文中的 Spring REST 服务和 JAX WS 服务

> ID：15136819
> 
> 赞同：1
> 
> 时间：2013-02-28T13:29:39.537
> 
> 标签：spring, jax-ws, jax-rs

我有一个带有 DispatcherServlet 和一些 REST web 服务的 spring webapp。这工作正常。

当添加一些 JAX WS 端点 ( `@WebService`) 并使用它导出时，`SimpleJaxWsServiceExporter`这似乎接管了 servlet 的整个命名空间。我无法再访问静态资源或 REST 服务。

我尝试将 baseAddress 属性设置为，`[http://example.com:8080/soap/](http://example.com:8080/soap/)`但它仍然为 /* 提供 404。

我可以做些什么来将 JAX WS 服务导出到某个路径下吗？

**编辑：**上述服务部署为 webapp，在 /* 上配置了 DispatcherServlet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:31:30.880

确保`<mvc:default-servlet-handler />`在您的调度程序 servlet 配置中有，当您将调度程序 servlet 映射到 /* 时，这是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:17:08.130

为 Web 服务定义单独的 servlet

来自 Spring 文档的示例。请注意，您必须为此 servlet 定义一个配置文件。[http://static.springsource.org/spring-ws/site/reference/html/server.html](http://static.springsource.org/spring-ws/site/reference/html/server.html)参见第 5.3.1 节

```
<servlet>
    <servlet-name>spring-ws</servlet-name>
    <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spring-ws</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

# opengl - 如何找出我的 OpenGL 在它的颜色缓冲区上可以表示多少种颜色？

> ID：15136820
> 
> 赞同：3
> 
> 时间：2013-02-28T13:29:44.123
> 
> 标签：opengl

我需要知道我可以在我的 OpenGL 应用程序中使用多少种不同的颜色。

我的情况：我将使用 glReadPixels 读回绘制的像素，但颜色将具有整数含义而不是颜色。所以我需要知道我能代表多少信息。

我打算`glGet`与 GL_RED_BITS、GL_GREEN_BITS 和 GL_BLUE_BITS 一起使用。但这些已被弃用。如何使用至少在 OpenGL 3 上可用的功能来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T13:49:43.993

好的，我找到了我要找的东西。我的评论[`glGetFramebufferAttachmentParameteriv`](http://www.opengl.org/sdk/docs/man/xhtml/glGetFramebufferAttachmentParameter.xml)是正确的，这里有一些参考：

> glGetFramebufferAttachmentParameteriv — 检索有关绑定帧缓冲区对象的附件信息

到现在为止还挺好。

> 如果默认帧缓冲区绑定到目标，则附件必须是 GL_FRONT_LEFT、GL_FRONT_RIGHT、GL_BACK_LEFT 或 GL_BACK_RIGHT 之一，标识颜色缓冲区。

所以是的，我们可以将它用于屏幕缓冲区！现在是您感兴趣的部分：

`pname`可以是：

*   `GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE`
*   `GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE`
*   `GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE`
*   `GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE`
*   `GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE`

> `params`将包含指定附件的相应红色、绿色、蓝色、alpha、深度或模板组件中的位数。如果请求的组件不在附件中，则返回零。

哦，`target`可以`GL_FRAMEBUFFER`，我想。

编辑：你要求一个例子来总结这一切，所以......

```
glBindFramebuffer(GL_FRAMEBUFFER, 0);
GLint ret;

glGetFramebufferAttachmentParameteriv(GL_FRAMEBUFFER, GL_FRONT_LEFT, GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE, &ret);

if (ret == GL_NONE)
    exit(1); // something is really bad there or FRONT_LEFT isn't your default buffer. Check it!

glGetFramebufferAttachmentParameteriv(GL_FRAMEBUFFER, GL_FRONT_LEFT, GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE, &ret); 
```

您可能`INVALID_ENUMS`会得到：

> *   如果目标不是接受的令牌之一，则会生成 GL_INVALID_ENUM。
> *   如果 pname 对于 GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE 的值无效，则会生成 GL_INVALID_ENUM。

# arrays - 连接元胞数组

> ID：15136829
> 
> 赞同：4
> 
> 时间：2013-02-28T13:30:13.393
> 
> 标签：arrays, matlab, cell

我希望将两个单元格数组连接在一起。我有两个不同大小的矩阵，据我所知，将它们连接在一起的唯一可能方法是使用单元格数组。这是我的代码

```
M = magic(3);
B = {magic(3) 'sip' magic(4) magic(3) }

C = {B; ...
        B; ...
        B; ...
        B}

c1 = C{1}{1,1};
c2 = C{1}{1,3};
c{1} = c1; % after extracting matrix from cell array put it it
c{2} = c2; % into another cell array to attempt to concatenate
conca = [c{1};c{2}]; %returns error. 
```

我收到以下错误：

```
??? Error using ==> vertcat
CAT arguments dimensions are not
consistent.

Error in ==> importdata at 26
conca = [c{1};c{2}]; %returns error. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:43:29.883

我假设这是您想要的输出：

```
conca = 

    [3x3 double]
    [4x4 double] 
```

在哪里`conca{1}`：

```
 8     1     6
 3     5     7
 4     9     2 
```

并且`conca{2}`是：

```
16     2     3    13
 5    11    10     8
 9     7     6    12
 4    14    15     1 
```

你实际上非常接近。您所需要做的就是将方括号更改为花括号。像这样：

```
conca = {c{1};c{2}}; 
```

* * *

我实际上不明白你为什么使用`C`而不只是这样做

```
conca = {B{1};B{3}} 
```

这将为您提供相同的单元格数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T13:43:37.013

`c{1}`指单元格的内容，即您的情况下的矩阵。`[a b]`连接封闭的内容，即两个矩阵（如果行数相同）。

要连接两个元胞数组，请照此引用它们。要引用元胞数组的单个元胞，您可以使用`()`，例如`c(1)`。因此，

```
[c(1) c(2)] 
```

工作（或 [c(1);c(2)]），但对于这个例子，

```
c(1:2) 
```

是可取的（或者`c(1:2)'`对于一列而不是一行）。

# php - Mysql，删除具有多个值的行

> ID：15136839
> 
> 赞同：0
> 
> 时间：2013-02-28T13:30:56.137
> 
> 标签：php, mysql

[![图片](../Images/bd3e19c78ddd74cfd9ad6020893f0cc6.png)](https://i.stack.imgur.com/uQ0gO.png)
[（来源：[visedeg.no](http://visedeg.no/images/4ewq24mr3r76uuhq9324.png)）]

在您看到的图片上，我有相同值的行。我只想向他们展示一次。行中的值是第 9 周每笔钱的总和。

```
<? 
$result5 = mysql_query("SELECT * FROM Donering WHERE Uke=".$Uke."");

while ($row1 = mysql_fetch_array($result5)){
    $nick = $row1['nickid'];
    $result6 = mysql_query("SELECT * FROM Donering WHERE nickid=".$nick." and Uke=".$Uke."  ");

    echo "<table border='1'>
        <tr>
        <th>Brukernavn</th>
        <th>Kr</th>
        <th>Uke</th>
        </tr>";

    while ($row = mysql_fetch_array($result6))  {
        $sum2 = $sum2+$row['Penger'];
        $DittNick = $row['Nick'];
    }

    if ($sum2 >= 2500000000) {
        $Fargekode = "#00FF00";
    }
    else {
        $Fargekode = "#FF0000";
    }

    echo "<tr>";
    echo "<td>" . $DittNick . "</td>";
    echo "<td><font color='".$Fargekode."'>". number_format ($sum2 , 0, ',', '.'  ) . "   </font></td>";
    echo "<td>Uke ".$Uke."</td>";
    echo "</tr>";

    echo "</table>";

    $sum2 = NULL;
}?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:36:27.237

首先，`mysql_*`正在被弃用。查看我的答案的底部以获取更多信息。如果你不这样做，有一天你的代码将毫无用处。

对于您的实际查询，请尝试使用`SELECT DISTINCT`. 这将拉取唯一的行。

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:35:58.327

也许您正在寻找这个，移动表格的标题，并关闭一段时间

```
<?$result5 = mysql_query("SELECT * FROM Donering WHERE Uke=".$Uke."");

echo "<table border='1'>
<tr>
<th>Brukernavn</th>
<th>Kr</th>
<th>Uke</th>
</tr>";

while ($row1 = mysql_fetch_array($result5)){
$nick = $row1['nickid'];

$result6 = mysql_query("SELECT * FROM Donering WHERE nickid=".$nick." and Uke=".$Uke."  ");

while ($row = mysql_fetch_array($result6))  {

$sum2 = $sum2+$row['Penger'];

$DittNick = $row['Nick'];

}

if ($sum2 >= 2500000000) {
$Fargekode = "#00FF00";
}
 else {
$Fargekode = "#FF0000";
}

echo "<tr>";
echo "<td>" . $DittNick . "</td>";
echo "<td><font color='".$Fargekode."'>". number_format ($sum2 , 0, ',', '.'  ) . "    </font></td>";
 echo "<td>Uke ".$Uke."</td>";
 echo "</tr>";

  $sum2 = NULL;

  }

  echo "</table>";?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:39:00.240

您可以尝试在 MySQL 字符串中使用 DISTINCT 选项

# javascript - 调整 Google 新闻脚本以返回当前月份

> ID：15136844
> 
> 赞同：0
> 
> 时间：2013-02-28T13:31:10.843
> 
> 标签：javascript, variables, google-news, booleanquery

如何调整这个 Google 新闻脚本 - 我假设使用变量 - 将当前年份和当前月份放在布尔搜索中 - 具体来说，以“tabbed.execute（...？”

我的最终目标是让这个脚本在当前年份和月份的上下文中返回搜索词。感谢帮助新手！

```
google.load('search', '1');

function OnLoad() {

  // create a tabbed mode search control
  var tabbed = new google.search.SearchControl();

  // create our searchers.  There will now be 4 tabs.
  tabbed.addSearcher(new google.search.VideoSearch());
  tabbed.addSearcher(new google.search.NewsSearch());
  tabbed.addSearcher(new google.search.BlogSearch());
  tabbed.addSearcher(new google.search.ImageSearch());

  // draw in tabbed layout mode
  var drawOptions = new google.search.DrawOptions();
  drawOptions.setDrawMode(google.search.SearchControl.DRAW_MODE_TABBED);

  // Draw the tabbed view in the content div
  tabbed.draw(document.getElementById("stephennews"), drawOptions);

  // Search!
  tabbed.execute("'SEARCHTERM1' AND 'SEARCHTERM2' AND '2013' AND 'MARCH'");
}
google.setOnLoadCallback(OnLoad); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:28:22.083

我想找到了我的答案。我不需要使用当前日期论坛插入另一个变量。我可能可以让 Google 用布尔值为我完成所有工作：

过去的 x 个月数记为“m[INSERT NUMBER]” 同样，过去的 x 天数记为“d[INSERT NUMBER]”

所以我脚本中的搜索行将显示为：

```
tabbed.execute("'SEARCHTERM1' AND 'SEARCHTERM2' AND 'y[1]' AND 'm[1]'"); 
```

[Google 的 XML API 参考](https://developers.google.com/custom-search/docs/xml_results#as_qdr)

# python - 在搅拌机之外运行 Blender python 脚本

> ID：15136852
> 
> 赞同：11
> 
> 时间：2013-02-28T13:31:49.300
> 
> 标签：python, wolfram-mathematica, blender, povray

我想可视化一些科学数据，目前只是一些不同颜色和大小的球体的动画。

我已经在 Mathematica 中创建了一个为 POV-Ray 创建输入的脚本。

我的问题是，我对 POV-Ray 的结果质量不满意，想编写一个 Python 脚本，它可以设置相应的搅拌机场景并渲染它们。一个重要的限制是，我想在无头机器上渲染，所以我不能使用 Blender 的内部控制台。

我的问题：是否可以从外部控制台使用 Blender 的 API 来获得类似 POV-Ray 的行为？

* * *

阅读 George Profenza 的回答后，我做了进一步的研究，发现[不要使用 Blender！](http://www.blender.org/documentation/blender_python_api_2_66_release/info_tips_and_tricks.html#don-t-use-blender)在 Blender 的文档中。

与我的想法相反，必须创建一个由blender在后台模式下执行的python脚本。

```
./blender --background --python myscript.py 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T13:51:33.883

据我所知，您可以在不打开界面/窗口系统的情况下从命令行运行 Blender，我希望这对您的设置有用。您不仅可以告诉 Blender 渲染一个文档，还可以运行一个脚本来生成该文档/使用几何图形、灯光等填充场景。

或者，您可以直接为渲染器生成内容（并完全跳过 3D 编辑器/搅拌器）。那里有很多免费的渲染器，例如：

1.  [亚法瑞](http://www.yafaray.org/)
2.  [向日葵](http://sunflow.sourceforge.net/)
3.  [三叶](http://mitsuba-renderer.org/docs.html)
4.  [力士渲染](http://www.luxrender.net/)
5.  [小精灵](http://www.renderpixie.com/)

亚法瑞

![雅法瑞](../Images/b5054a1f41bbbe0a0767febe9c8f502d.png)

向日葵

![向日葵](../Images/09cf96c7d784a9e864f112b225d9939c.png)

勒克斯渲染 ![勒克斯](../Images/3c619865e638f0d4e002aa2f6d03eb2b.png)

小精灵

![小精灵](../Images/65324d869da0d4f9dd8a5948028b1c4e.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T17:02:03.320

有两种选择，

*   您遇到的第一个是在后台模式下运行 Blender，
*   第二个是非常实验性的，使用 Blender 作为 python 模块 - [BlenderAsPyModule](http://wiki.blender.org/index.php/User%3aIdeasman42/BlenderAsPyModule)

在这两种情况下，这应该是导入 Mathematica 场景的简单操作 - [bpy.ops.import_scene.*](http://www.blender.org/documentation/blender_python_api_2_66_release/bpy.ops.import_scene.html) 然后渲染场景[bpy.ops.render.render](http://www.blender.org/documentation/blender_python_api_2_66_release/bpy.ops.render.html#bpy.ops.render.render)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-12T05:44:24.640

Blender 可以在 Docker 容器内“无头”运行。[在此处](https://github.com/enric1994/pose2avatar/blob/master/docker/Dockerfile.pose2avatar)检查 Dockerfile

如果您不熟悉 Docker，请下载 Dockerfile 并运行：

```
docker build -t blender .
docker run -it -v your_folder/:/scripts bash 
```

现在您可以在无头 Blender 中运行您的脚本

# joomla - Virtuemart 2.0 将媒体附加到产品

> ID：15136854
> 
> 赞同：0
> 
> 时间：2013-02-28T13:31:52.433
> 
> 标签：joomla, virtuemart

一个简单的问题

我有一个安装了 VirtueMart 2.0 的 Joomla 2.5。

该网站已从 Joomla 1.5 升级，我的迁移过程是“手动”完成的（数据库脚本从旧的 Virtuemart 表中填充了新的表）

我无法将媒体文件添加到产品中，这应该是一个非常简单的功能

我转到产品的媒体文件管理器并单击“新建”链接

媒体文件已上传并创建，但未链接到产品

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:16:32.020

如果您使用的是 VM2.0 或更高版本，那么您可以`#__virtuemart_product_medias`在此表中找到一个表名 VM 保留产品 ID 和媒体 ID。您将从该表中获得分配给产品的所有图像。此外，从管理员的产品详细信息选项卡中，您可以为单个产品选择多个图像。

如果您已升级，请单独保留一个新版本，并与您的升级站点进行比较和更新。

希望它会有所帮助..

# git - Gitosis 将其文件存储在哪里？

> ID：15136856
> 
> 赞同：1
> 
> 时间：2013-02-28T13:32:04.073
> 
> 标签：git, gitosis

首先，我知道这篇文章：[gitosis 将工作副本存储在哪里？](https://stackoverflow.com/questions/4308128/where-does-gitosis-store-the-working-copies). 但我正在考虑创建这个消息来具体回答这个问题。

[gitosis 将工作副本存储在哪里？](https://stackoverflow.com/questions/4308128/where-does-gitosis-store-the-working-copies#comment4677945_4308150)

有人可以，请，做一些具体的吗？

我可以通过 post hooks 做到这一点吗？我有完全相同的问题，并考虑如何使 Web 服务器虚拟主机可以访问新推送的文件，其中存储了应用程序。

也许有任何例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:39:32.703

上一个问题的[问题](https://stackoverflow.com/q/4308128/6309)是：

> 如何在不知道工作副本路径的情况下编写部署脚本？

答案是：你一个人可以确定那条路径，因为像 gitolite 这样的 gitosis 只管理裸仓库，正如他们的名字所暗示的 (bare)*没有*工作树。

我建议：

*   使用[gitolite](https://github.com/sitaramc/gitolite)代替 gitosis（已过时且不再维护）
*   [使用 VREF](https://stackoverflow.com/questions/10888300/gitosis-vs-gitolite/10888358#10888358)（一个更新挂钩），它可以在您选择的任何工作树中部署 repo，其挂钩内容[与此类似](https://stackoverflow.com/a/10892791/6309)。

# wpf - 将控件的 Datacontext 设置为属性

> ID：15136865
> 
> 赞同：1
> 
> 时间：2013-02-28T13:32:43.910
> 
> 标签：wpf, binding, datacontext

我正在尝试为文本块创建一种样式以创建高亮效果。此样式将用于多个 TextBlock，每个都绑定到不同的属性。我的主控件的数据上下文在后面的代码中设置：

```
this.DataContext = dataobject; 
```

我可以使用这样的工作绑定创建一个文本块：

```
<TextBlock Text="Field1">
    <TextBlock.Style>
        <Style x:Key="HighlightStyle" TargetType="{x:Type TextBlock}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=.}" Value="True">
                    <Setter Property="Background" Value="Yellow"/>
                    <Setter Property="Foreground" Value="Black"/>
                 </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBlock.Style>
<TextBlock> 
```

但我需要更改绑定，以便可以在不同的 TextBlocks 上使用该样式。就像是：

```
<Style x:Key="HighlightStyle" TargetType="{x:Type TextBlock}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=.}" Value="True">
            <Setter Property="Background" Value="Yellow"/>
            <Setter Property="Foreground" Value="Black"/>
        </DataTrigger>
    </Style.Triggers>
</Style>

<TextBlock Text="Field1" DataContext="{Binding Path=BooleanProperty1}" Style="{StaticResource HighlightStyle}"/>
<TextBlock Text="Field2" DataContext="{Binding Path=BooleanProperty2}" Style="{StaticResource HighlightStyle}"/> 
```

当我尝试这个时，更改属性不会突出显示文本块。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:40:18.957

总是会滥用标签属性。

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="{x:Type TextBlock}">
            <Style.Triggers>
                <Trigger Property="Tag" Value="True">
                    <Setter Property="Background" Value="Yellow"/>
                    <Setter Property="Foreground" Value="Black"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <TextBlock Text="Field1" Grid.Row="0" Tag="{Binding Field1}"/>
        <TextBlock Text="Field2" Grid.Row="1" Tag="{Binding Field2}"/>        
    </Grid>
</Window> 
```

或者，如果您喜欢冒险，您可以创建一个附加的依赖属性并将其传递。

```
public class TextBlockExtender : DependencyObject
{
    public static string GetMyDataField(DependencyObject obj)
    {
        return (string)obj.GetValue(MyDataFieldProperty);
    }

    public static void SetMyDataField(DependencyObject obj, string value)
    {
        obj.SetValue(MyDataFieldProperty, value);
    }

    public static readonly DependencyProperty MyDataFieldProperty =
        DependencyProperty.RegisterAttached("MyDataField", typeof(string), typeof(TextBlockExtender), new PropertyMetadata(null));
} 
```

与 XAML 一起使用

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication2"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="{x:Type TextBlock}">
            <Style.Triggers>
                <Trigger Property="local:TextBlockExtender.MyDataField" Value="True">
                    <Setter Property="Background" Value="Yellow"/>
                    <Setter Property="Foreground" Value="Black"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <TextBlock Text="Field1" Grid.Row="0" local:TextBlockExtender.MyDataField="{Binding Field1}"/>
        <TextBlock Text="Field2" Grid.Row="1" local:TextBlockExtender.MyDataField="{Binding Field2}"/>
    </Grid>
</Window> 
```

# monetdb - 为什么“分组依据”只给出一列作为输出？

> ID：15136868
> 
> 赞同：1
> 
> 时间：2013-02-28T13:32:52.100
> 
> 标签：monetdb

我有一张这样的桌子：

```
ID|Value
01|1
02|4
03|12
01|5
02|14
03|22
01|9
02|32
02|62
01|13
03|92 
```

我想知道每个 id 取得了多少进展（从初始值或最小值）
，所以在 sybase 中我可以输入：

```
select ID, (value-min(value)) from table group by id;

ID|Value
01|0
01|4
01|8
01|12
02|0
02|10
02|28
02|58
03|0
03|10
03|80 
```

但是`monetdb`不支持这个（我不确定可能是cz它使用了SQL'99）。
Group by 只给出一列，或者可能是其他值的平均值，但不是所需的结果。

group by in 有什么替代方法`monetdb`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:43:54.957

您可以通过自加入来实现此目的。这个想法是您构建一个子选择，为每个 id 提供最小值，然后按 id 将其连接到原始表。

```
SELECT a.id, a.value-b.min_value
FROM "table" a INNER JOIN
    (SELECT id, MIN(value) AS min_value FROM "table" GROUP BY id) AS b
    ON a.id = b.id; 
```

# javascript - 了解Backbone set方法和Model

> ID：15136879
> 
> 赞同：0
> 
> 时间：2013-02-28T13:33:26.120
> 
> 标签：javascript, backbone.js

所有，我是Backbone的新手。我正在尝试了解 Backone 的模型。特别是如何定义模型。到目前为止，我还没有看到关于如何为骨干定义模型的清晰或正式的方法。例如让我们看看帮助文档中的 set 方法。

> **放**
> 
> model.set（属性，[选项]）
> 
> 在模型上设置属性的散列（一个或多个）。

假设我们有一些如下代码。我认为`set`方法实际上是为模型分配一个 javascript 对象。

```
 window.Employee = Backbone.Model.extend({

      validate:function(attrs){
        for(var key in attrs){
            if(attrs[key] == ''){
                return key + "can not be null";
            }
            if(key == 'age' && isNaN(attrs.age)){
                return "age is numeric";
            }
        }
      }
    });

    ....
    var attr = {}; // I can't not sure what is {} mean.
    $('#emp-form input,#emp-form select').each(function(){
        var input = $(this);//using jquery select input and select. and enumerate all of them.
        attr[input.attr('name')] = input.val();//I am not sure what does it means
    });
    if(employee.set(attr)){
            Employees.create(employee);
        }
    .... 
```

在这个例子中，我没有看到我们可以在 java 类或 c# 类中看到的经典方式来定义类字段或方法。但只看到一个`validate`功能。有没有人可以告诉我更多关于它的信息以帮助我理解？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:25:45.020

要在 Backbone 中定义模型，您必须扩展 Backbone.Model 对象。例如，如果您想创建一个新的 User 模型，您可以编写如下内容：

```
var User = Backbone.Model.extend({}) 
```

您还可以覆盖一些模型方法来满足您的需求。例如，您可以更改`urlRoot`属性以告诉模型他应该从哪里获取数据。

骨干模型在`attributes`属性中包含您的数据。您可以使用模型`set`方法更改这些属性，并且可以使用该方法读取存储在模型中的值`get`。因此，如果您有一些用户可以输入信息的输入，例如使用他的姓名和电子邮件创建一个新用户，并且您有一个包含两个文本输入的表单。你可以这样做：

```
var user = new User;
user.set('name', $('#name').val());
user.set('email', $('#email').val());
attributes = {
  name: user.get('name'),
  email: user.get('email')
};
user.save(attributes); 
```

有很多方法可以重构此代码以使其看起来更好，但有助于了解如何使用这些方法。您应该查看[Backbone 文档](http://backbonejs.org/#Model-set)以进一步了解它们是如何工作的。希望这可以帮助！

PD：在我的示例中，我一次设置一个属性，但您也可以发送一个属性散列以在一次调用中设置更多值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:41:00.307

JS 中的模型基本上是数据的包装器，具有 CRUD 和简单的验证功能。为了正常工作，您需要使服务器功能与（ajax）一起工作，我认为本教程说明了一切[http://backbonetutorials.com/what-is-a-model/](http://backbonetutorials.com/what-is-a-model/)。该模型与您的应用程序服务器端一起工作，而不是数据库。

如果您对数据有自定义操作（不仅仅是添加/编辑/删除），您可以手动“设置（）”数据，使用“onchange”事件并在需要时刷新您的视图。您甚至可以仅在特定字段上附加“onchange”事件，并在您的视图中创建自定义函数来处理每个特殊字段（用于验证或显示）。

您可以在初始化和默认值处定义字段，但不能定义自定义函数（您可以这样做，`model.customFuntion()`但我不建议这样做。

为了使其更加“经典方式”，您需要使用其他 Backbone 函数[http://backbonejs.org/#Collection-Underscore-Methods](http://backbonejs.org/#Collection-Underscore-Methods)和 Backbone.Collection。

# linux - linux以编程方式设置pptp vpn

> ID：15136889
> 
> 赞同：1
> 
> 时间：2013-02-28T13:34:16.527
> 
> 标签：linux, vpn

我想在 Linux 下用 C 代码设置 PPTP VPN 连接。然后监控它的状态，当它离线时，我想重新连接它。但我还没有找到任何用于执行此操作的 api。是否有任何 api 或库来实现这一点？还是有其他替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T09:38:37.857

我使用以下 shell 命令在我的代码中设置 pptp vpn。

```
pppd pty "pptp <vpn-host> --nolaunchpppd" user <vpn-user> password <vpn-password> lock noauth nobsdcomp nodeflate nodetach 
```

最后一个选项告诉 pppd 不要作为守护程序运行。然后我可以通过杀死pppd的具体进程来断开vpn。

并且阅读 pppd 标准输出流，您可以获得关于 vpn 连接的更多信息，如虚拟设备、本地 IP、远程 IP 等。

# perl - 如何从 Perl 程序调用 C 函数？

> ID：15136890
> 
> 赞同：5
> 
> 时间：2013-02-28T13:34:20.460
> 
> 标签：perl

`test.c`：

```
int sum(int a, int b)
{
    return (a+b);
} 
```

`test.pl`：

```
# how do I call sum here? 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T13:39:18.540

```
use Inline C => <<'__END_OF_C__';

    int sum(int a, int b)
    {
        return (a+b);
    }

__END_OF_C__

say sum($x,$y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:37:42.850

你需要`XS`. 它涉及到很多，所以最好看一下官方手册和教程页面：

[http://perldoc.perl.org/perlxstut.html](http://perldoc.perl.org/perlxstut.html)

[http://perldoc.perl.org/perlxs.html](http://perldoc.perl.org/perlxs.html)

# silverlight - Silverlight UserControl 与 DataContext Change 问题

> ID：15136898
> 
> 赞同：0
> 
> 时间：2013-02-28T13:34:46.027
> 
> 标签：silverlight, datacontext

我创建了一个用户控件并在我的 mainPage 中使用。我有 UserControlViewModel 和 MainPageViewModel。

我在 UserControlViewModel 中添加了 UsercontrolViewModel 作为属性名称为 usercontrolViewModelContext.so 我有主页面的 DataContext 是 MainPageViewModel。然后我从主页使用了 UserControl，并将 DataContext 设置为 usercontrolViewModelContext。

之后，我在 usercontrol.xaml.cs 中为 usercontrol 添加了 DataContextChanged 事件处理程序。在处理程序方法中，我为例如**InvalidOperationException("Invalid Data Assigned")抛出****自定义异常**。

 **我的问题是，我重建了应用程序。然后我关闭 mainpage.xaml 并打开。现在我打开了错误消息，并且 xaml 解析器错误为**“无效的数据分配”**，这是从 usercontrol.xaml.cs 中的 datacontextchanged 处理程序方法引发的异常。

注意：xaml 解析器错误仅在设计时显示。

`<uc:ErrorMessage DataContext="{Binding UserControlViewModelContext}" />`

在这里，我在 Datacontext 中得到蓝色下划线，它表示我的自定义消息。

提前致谢

尼扎姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-22T17:38:43.870

这是 Visual Studio 版本之一中的问题。这在 VS 2015 中已修复。**

# c# - 填充无效，无法删除 aes

> ID：15136900
> 
> 赞同：0
> 
> 时间：2013-02-28T13:34:48.073
> 
> 标签：c#, .net, aes, encryption-symmetric, rijndael

我在这个网站上搜索了解决方案，但没有一个能解决我的问题。有时我会收到“填充无效且无法删除”异常。我不知道该怎么办。当我尝试一些解决方案时，有空的解密文本或它不起作用。这是我的课

```
static class Aes
{
    public static string bytesToHexString(byte[] key)
    {
        return BitConverter.ToString(key).Replace("-", String.Empty);
    }

    public static byte[] stringToBytes(string key)
    {
        return Enumerable.Range(0, key.Length)
                 .Where(x => x % 2 == 0)
                 .Select(x => Convert.ToByte(key.Substring(x, 2), 16))
                 .ToArray();
    }

    public static void generateKeyAndIv(out byte[] key, out byte[] IV)
    {
        using (AesCryptoServiceProvider aesAlg = new AesCryptoServiceProvider())
        {
            aesAlg.BlockSize = 128;
            aesAlg.KeySize = 256;
            aesAlg.Padding = PaddingMode.PKCS7;
            aesAlg.Mode = CipherMode.CBC;
            aesAlg.GenerateKey();
            aesAlg.GenerateIV();
            key = aesAlg.Key;
            IV = aesAlg.IV;
        }
    }
    public static string EncryptStringToString(string plainText, byte[] Key, byte[] IV)
    {
        byte[] bytes =EncryptStringToBytes_Aes(plainText, Key, IV);
        return Convert.ToBase64String(bytes);
        //return Encoding.UTF8.GetString(bytes, 0, bytes.Length);
    }

    public static string DecryptStringToString(string cipherText, byte[] Key, byte[] IV)
    {
        //byte[] bytes = Encoding.UTF8.GetBytes(cipherText);
        byte[] bytes = Convert.FromBase64String(cipherText);
        return DecryptStringFromBytes_Aes(bytes, Key, IV);
    }

    public static byte[] EncryptStringToBytes_Aes(string plainText, byte[] Key, byte[] IV)
    {
        // Check arguments. 
        if (plainText == null || plainText.Length <= 0)
            throw new ArgumentNullException("plainText");
        if (Key == null || Key.Length <= 0)
            throw new ArgumentNullException("Key");
        if (IV == null || IV.Length <= 0)
            throw new ArgumentNullException("Key");
        byte[] encrypted;
        // Create an AesCryptoServiceProvider object 
        // with the specified key and IV. 
        using (AesCryptoServiceProvider aesAlg = new AesCryptoServiceProvider())
        {
            aesAlg.BlockSize = 128;
            aesAlg.KeySize = 256;
            aesAlg.Padding = PaddingMode.PKCS7;
            aesAlg.Mode = CipherMode.CBC;
            aesAlg.Key = Key;
            aesAlg.IV = IV;
            // Create a decrytor to perform the stream transform.
            ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

            // Create the streams used for encryption. 
            using (MemoryStream msEncrypt = new MemoryStream())
            {
                using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                {
                    using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                    {
                        //Write all data to the stream.
                        swEncrypt.Write(plainText);
                    }
                }

                encrypted = msEncrypt.ToArray();
            }
           /* using (var msEncrypt = new MemoryStream())
            using (var csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
            using (var swEncrypt = new StreamWriter(csEncrypt))
            {
                swEncrypt.Write(plainText);
                csEncrypt.FlushFinalBlock();
                encrypted = msEncrypt.ToArray();
            }*/
        }

        // Return the encrypted bytes from the memory stream. 
        return encrypted;

    }

    public static string DecryptStringFromBytes_Aes(byte[] cipherText, byte[] Key, byte[] IV)
    {
        // Check arguments. 
        if (cipherText == null || cipherText.Length <= 0)
            throw new ArgumentNullException("cipherText");
        if (Key == null || Key.Length <= 0)
            throw new ArgumentNullException("Key");
        if (IV == null || IV.Length <= 0)
            throw new ArgumentNullException("IV");

        // Declare the string used to hold 
        // the decrypted text. 
        string plaintext = null;

        // Create an AesCryptoServiceProvider object 
        // with the specified key and IV. 
        using (AesCryptoServiceProvider aesAlg = new AesCryptoServiceProvider())
        {
            aesAlg.BlockSize = 128;
            aesAlg.KeySize = 256;
            aesAlg.Padding = PaddingMode.PKCS7;
            aesAlg.Mode = CipherMode.CBC;
            aesAlg.Key = Key;
            aesAlg.IV = IV;
            // Create a decrytor to perform the stream transform.
            ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);

            // Create the streams used for decryption. 
            using (MemoryStream msDecrypt = new MemoryStream(cipherText))
            {
                using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                {
                    using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                    {

                        // Read the decrypted bytes from the decrypting stream 
                        // and place them in a string.
                        plaintext = srDecrypt.ReadToEnd();
                    }
                }
            }

        }

        return plaintext;

    }
} 
```

请帮忙，因为我自己寻找解决方案已经筋疲力尽

# matlab - 不规则网格的曲面图

> ID：15136906
> 
> 赞同：0
> 
> 时间：2013-02-28T13:34:59.463
> 
> 标签：matlab

我想绘制一些类似于以下产生的 3D 数据：

```
[X,Y,Z] = peaks(30);
surf(X,Y,Z) 
```

但有一点不同。出现在上述曲面图上的等值线会发生变形，以便它们“拉伸”以匹配 Z 轴的变化。有谁知道如何生成曲面图，但等值线看起来好像规则间隔的网格已经“覆盖”在曲面上？我假设指定数据的网格将不再是单调间隔的，但我不确定如何继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:02:32.177

你在找[`griddata`](http://www.mathworks.com/help/matlab/ref/griddata.html)吗？仔细看看那里的第一个例子：“Interpolate Scattered Data Over a Uniform Grid”。

# iis-7 - IIS for PHP php mail() 发送垃圾邮件

> ID：15136908
> 
> 赞同：0
> 
> 时间：2013-02-28T13:35:06.190
> 
> 标签：iis-7, php

我昨天在我的 IIS PHP 服务器上设置了我的 SMTP 服务器，并相应地配置了我的 PHP.ini 文件，昨天一切正常，我的所有邮件都已送达，但今天我的邮件落入垃圾邮件文件夹，我不知道发生了什么错了有人知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:38:46.450

我认为，您的服务器可能在电子邮件黑名单中列出

一探究竟

[mxtoolbox.com/blacklists.aspx](http://mxtoolbox.com/blacklists.aspx) [whatismyipaddress.com/blacklist-check](http://whatismyipaddress.com/blacklist-check)

如果不 。那么可能是您的邮件模式可能是垃圾邮件，请再等待 24 小时或联系服务器管理员

# mysql - SQL 选择以“开头”的项目/在变量 名称后面放一个 %

> ID：15136909
> 
> 赞同：2
> 
> 时间：2013-02-28T13:35:06.333
> 
> 标签：mysql, sql, select

我想选择所有行，其中列 g_folder 存在于搜索词的开头。例如： 表 c_groups 中的一个元素是“/f1”（在 g_folder 列中）。所以我只想拥有搜索词开头的项目：

它应该看起来像：`g_folder% is like '/f1/xx';` 但我不能把这个百分比放在变量后面。我怎样才能做到这一点？

我的声明：

```
 select count(*) from c_groups where g_folder is like '/f1/xx' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:38:24.487

如果这是 SQL Server，您可以像这样连接列：

```
SELECT
  COUNT(*)
FROM
  c_groups
WHERE
  '/f1/xx' LIKE (g_folder + '%') 
```

# asp.net-mvc-3 - 如何解决“访问路径被拒绝 asp.net”

> ID：15136916
> 
> 赞同：0
> 
> 时间：2013-02-28T13:35:24.043
> 
> 标签：asp.net-mvc-3, permissions

我已经通过stackoverflow上的其他条目，但没有一步一步的方法来解决这个问题？有那么复杂吗？

我想解压缩到我本地驱动器上的一个文件夹，也得到这个错误。我必须在我的 webconfig 中做些什么吗？

我应该对我的整个 C 盘有写权限吗？那不会很好吗？

谢谢

```
public ActionResult Upload(ScormUploadViewModel model)
{
  if (ModelState.IsValid)
  {
    if (model.ScormPackageFile != null)
    {
        //string destinationDirectoryName = "c:\\TSFPreview\\Zinc\\Web\\Project\\ScormPackages";
        string zipCurFile = model.ScormPackageFile.FileName;
        //string origZipFileName = zipCurFile.Remove(zipCurFile.Length - model.ScormPackageFile.FileName);
        string destinationDirectoryName = Path.GetFileNameWithoutExtension(zipCurFile);
        //Directory.CreateDirectory(destinationDirectoryName);
        Directory.CreateDirectory("C:\\Testing");
        StreamReader streamReader = new StreamReader("C:\\Testing"); //here get that error
        streamReader.Read();
        using (GZipStream Decompress = new GZipStream(model.ScormPackageFile.InputStream, CompressionMode.Decompress))
        {
          //Decompress.CopyTo("C:\\Testing");
        }
    }
  }
  return View(model);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:58:59.833

太长的评论，因此发布一个答案 -

打开您的 IIS，按照这篇[文章](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)中的说明进行操作。这告诉您如何检查应用程序池标识。

默认情况下，asp.net 应用程序在具有最低权限的帐户下运行，并且被拒绝写入 c:\ 位置的权限。

更改应用程序池标识以使用具有创建目录等操作所需的权限的本地帐户。（您可以通过将您的登录名放入应用程序池标识来测试这一点，但不建议将其用于已部署的代码）。

# r - 根据 colnames 匹配两个 data.frames

> ID：15136921
> 
> 赞同：0
> 
> 时间：2013-02-28T13:35:54.220
> 
> 标签：r, dataframe

我有两个大的data.frames：

```
 DF1 
```

> ```
>  AB2        CF34      FGH23     P53T    
>    a           b         c         d          
>    e           bv        sd        we 
>    sa          s         qw        fd    
>    fg          df        lk        po 
> ```

```
 DF2 
```

> ```
>  AB2        CF34      FGH23     P53T    
>    a          b         c         m          
>    n          m         sd        we 
>   sa          s         py        fd    
>   fgq         df        lk        pq 
> ```

我“simlpy”想每两列（根据相应的列名）逐列匹配两个data.frames，并返回成对比较产生的匹配项数。换句话说，一种：

> 合并（DF1，DF2，按 =“AB2”）
> 合并（DF1，DF2，按 =“CF34”）

等等。问题是这两个文件太大而无法手动进行比较，正如我使用合并功能报告的那样。

有什么想法吗？

非常感谢！

E.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:06:10.640

（从评论升级。）

这听起来像

```
sapply(names(DF1),function(n) nrow(merge(DF1,DF2,by=n)) 
```

解决你的问题。

# php - Zend Framework 2 教程“学习依赖注入”缺少示例

> ID：15136925
> 
> 赞同：1
> 
> 时间：2013-02-28T13:36:02.453
> 
> 标签：php, dependency-injection, zend-framework2

（在一些非常（！）有用的关于 DI 的文章和一个基本示例的链接之后）在“[最简单的用例（2 个类，一个消耗另一个）](http://framework.zend.com/manual/2.1/en/tutorials/quickstart.di.html#simplest-usage-case-2-classes-one-consumes-the-other) ”一章中，Zend Framework 2 教程“[学习依赖注入”提供了](http://framework.zend.com/manual/2.1/en/tutorials/quickstart.di.html)**构造函数**的示例**注射**。这个还行。然后它显示了一个**setter 注入**的例子。但它并不完整（缺少示例的调用/使用部分）。缺少**接口注入**和**基于注释的注入**的示例。

(1) setter 注入示例的缺失部分如何？有人可以用教程中的类写一个（2）接口注入和（3）基于注释的注入示例吗？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:14:44.620

You probably want to look into [Ralph Schindler's Zend\Di examples](https://github.com/ralphschindler/Zend_DI-Examples), which cover all the various `Zend\Di` use cases.

I also [started working on the Zend\Di documentation](https://github.com/zendframework/zf2-documentation/pull/82), but never got to finish it because I was too busy with other stuff (will eventually pick it up again).

Setter injection (enforced):

```
class Foo 
{
    public $bar;

    public function setBar(Bar $bar)
    {
        $this->bar = $bar;
    }
}

class Bar 
{
}

$di  = new Zend\Di\Di;
$cfg = new Zend\Di\Configuration(array(
    'definition' => array(
        'class' => array(
            'Foo' => array(
                // forcing setBar to be called
                'setBar' => array('required' => true)
            )
        )
    )
)));

$foo = $di->get('Foo');

var_dump($foo->bar); // contains an instance of Bar 
```

Setter injection (from given parameters):

```
class Foo 
{
    public $bar;

    public function setBar($bar)
    {
        $this->bar = $bar;
    }
}

$di     = new Zend\Di\Di;
$config = new Zend\Di\Configuration(array(
    'instance' => array(                
        'Foo' => array(
            // letting Zend\Di find out there's a $bar to inject where possible
            'parameters' => array('bar' => 'baz'),
        )
    )
)));
$config->configure($di);

$foo = $di->get('Foo');

var_dump($foo->bar); // 'baz' 
```

Interface injection. `Zend\Di` discovers injection methods from an `*Aware*` interface [as defined in the introspection strategy](https://github.com/zendframework/zf2/blob/release-2.1.3/library/Zend/Di/Definition/IntrospectionStrategy.php#L34):

```
interface BarAwareInterface
{
    public function setBar(Bar $bar);
}

class Foo implements BarAwareInterface
{
    public $bar;

    public function setBar(Bar $bar)
    {
        $this->bar = $bar;
    }
}

class Bar 
{
}

$di  = new Zend\Di\Di;
$foo = $di->get('Foo');

var_dump($foo->bar); // contains an instance of Bar 
```

Annotation injection. `Zend\Di` discovers injection methods via annotations:

```
class Foo 
{
    public $bar;

    /**
     * @Di\Inject()
     */
    public function setBar(Bar $bar)
    {
        $this->bar = $bar;
    }
}

class Bar 
{
}

$di  = new Zend\Di\Di;
$di
    ->definitions()
    ->getIntrospectionStrategy()
    ->setUseAnnotations(true);

$foo = $di->get('Foo');

var_dump($foo->bar); // contains an instance of Bar 
```

# asp.net - Windows 身份验证与“LOGON_USER”服务器变量不一致

> ID：15136926
> 
> 赞同：1
> 
> 时间：2013-02-28T13:36:07.330
> 
> 标签：asp.net, iis, forms-authentication

另一位开发人员和我都在开发同一个 ASP.NET Web 应用程序。该应用程序使用 Forms 身份验证，但 IIS 虚拟目录配置了“匿名访问”和“集成 Windows 身份验证”。这反映了根据需要进行身份验证的生产站点。

我们两种设置之间潜在的关键区别是他使用的是 Windows 7 和 IIS 7，而我使用的是 Windows XP 和 IIS 5（因为我的罪过）。

最初，当我们都运行应用程序时，变量...

```
HttpContext.Current.User.Identity.IsAuthenticated
```

……是假的。这是我所期望的，因为我们配置了表单身份验证。然后应用程序重定向到 WindowsAuth.aspx 页面。该页面检查 Request.ServerVariables["LOGON_USER"] 服务器变量，如果它不为 null 或为空，则使用它自动登录。

问题是，在我的 PC 上 Request.ServerVariables["LOGON_USER"] 始终为空。对我来说这是正确的，因为我们启用了匿名访问。但是在我同事的 PC 上，在生产环境中，变量保存了用户的用户名。我不明白为什么会这样。IIS 5 和 7 在这方面有区别吗？否则，你能解释一下吗？显然，我希望我的设置能够反映其他环境，但此时升级到 Windows 7 是最后的手段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-23T13:49:33.563

[https://support.microsoft.com/en-us/kb/306359](https://support.microsoft.com/en-us/kb/306359)

要在使用无以外的任何身份验证模式时填充 LOGON_USER 变量，您可以在 Web.config 文件的部分中拒绝匿名用户的访问。要拒绝访问该部分中的匿名用户，请执行以下步骤：

将 Web.config 文件中的身份验证模式更改为 None 以外的任何内容。例如，Web.config 文件中的以下条目将身份验证模式设置为基于表单的身份验证：

```
 <authentication mode="Forms" /> 
```

要拒绝访问 Web.config 文件中的匿名用户，请使用以下语法：

```
<authorization>
   <deny users = "?" /> <!-- This denies access to the Anonymous user -->
   <allow users ="*" /> <!-- This allows access to all users -->
</authorization> 
```

如果您使用的是 Windows 身份验证，还可以通过以下步骤解决此问题： 将 Web.config 文件中的身份验证方式更改为 Windows，如下所示：

```
<authentication mode="Windows" /> 
```

在 Internet 服务管理器中，右键单击 .aspx 文件或 Web 项目文件夹，然后单击属性。如果您单击了 Web 项目文件夹的属性，请单击目录安全选项卡。如果您单击了 .aspx 文件的属性，请单击文件安全选项卡。

在匿名访问和身份验证控制下，单击编辑。在身份验证方法对话框中，清除匿名访问复选框，然后选择基本、摘要或集成（NT 质询/响应）复选框。单击“确定”关闭这两个对话框。

# javascript - 使用 jquery 加载 html 页面后，html 代码不会显示

> ID：15136928
> 
> 赞同：-1
> 
> 时间：2013-02-28T13:36:13.553
> 
> 标签：javascript, jquery, html

编辑：如何扩展/编辑“附加内容”？我的意思是，如果我在“include.html”（我使用 jquery 加载附加的文件）中有一个名为“website”的 div，我可以在附加后向该 DIV 添加文本/代码吗？

我有一个简单的 HTML 菜单页面，我试图将其加载到我网站中的每个页面。对不起，如果它是一个菜鸟问题；) Jquery/js/html 有点菜鸟。

这是其中一个文件：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="cstyles.css">
        <script type='text/javascript' src='jquery-1.9.1.js'></script>
        <script type='text/javascript' src='menu2.js'></script>
        <script type='text/javascript' src='menu_load.js'></script>
    </head>
    <body>
        <script>
            loadContent();
            $(document).on('mouseenter', "#menulist", function() {
                mainmenu();
            });
        </script>
        <div id="contact_us" style="background:blue;">Something</div>
    </body>
</html> 
```

继承人menu2.js：

```
function mainmenu() {
    $(" #menulist li").hover(function () {
        $(this).find('ul:first').css({
            visibility: "visible",
            display: "none"
        }).show(300);
    }, function () {
        $(this).find('ul:first').css({
            visibility: "hidden"
        });
    });
}

$(document).ready(function () {
    mainmenu();
}); 
```

继承人menu_load.js：

```
function loadContent() {
    $("body").load("include.html");
} 
```

问题是：成功加载菜单后（名为INCLUDE.html的html文件），页面内容“消失”...

在这种情况下，这个词：某事不会出现。更清楚地说，它会显示一秒钟，然后被“include.html”文件中的内容替换。

有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:41:38.433

发生这种情况是因为这种方式`$("#body").load()`有效。我建议用

```
.prepend() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:42:03.673

那是因为您正在将`include.html`文件加载到整个文档中。您应该制作一个带有 id 的元素并将其加载到那里。例如

```
<div id="toload"></div> 
```

那么你的 jquery 函数将是：

```
function loadContent() {
$("#toload").load("include.html");
} 
```

# php - c++ 等效于 php shell_exec

> ID：15136935
> 
> 赞同：1
> 
> 时间：2013-02-28T13:36:39.047
> 
> 标签：php, c++, shell-exec

下面提到的 php 命令的 C++ equivalemt 命令是什么：

```
$command = shell_exec("sqlldr {$connect_string} control={$ctl_file_name} log={$log_file_name}"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:37:33.640

因此，根据您的评论，一个可行的解决方案是使用 popen(3)：

```
#include <cstdio>
#include <iostream>
#include <string>

int main()
{
   // Set file names based on your input etc... just using dummies below
   std::string
     ctrlFileName = "file1",
     logFileName  = "file2",
     cmd = "sqlldr usr/pwd@LT45 control=" + ctrlFileName + " log=" + logFileName ;

   std::cout << "Executing Command: " << cmd << std::endl ;

   FILE* pipe = popen(cmd.c_str(), "r");

   if (pipe == NULL)
   {
     return -1;
   }

   char buffer[128];
   std::string result = "";

   while(!feof(pipe))
   {
     if(fgets(buffer, 128, pipe) != NULL)
     {
         result += buffer;
     }
  }

   std::cout << "Results: " << std::endl << result << std::endl ;

   pclose(pipe);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:05:00.460

试试`forkpty`，你会得到一个文件描述符，你可以用它来从另一个伪终端读取。

# .htaccess - 在 .htaccess 中重写多个规则

> ID：15136938
> 
> 赞同：1
> 
> 时间：2013-02-28T13:36:54.363
> 
> 标签：.htaccess, mod-rewrite

我不是 mod 重写方面的专家。我正在尝试在我的根目录的 .htaccess 中重写多个规则，如下所示：

```
RewriteEngine On

#HEADER REDIRECTION
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
#FINISH HEADER REDIRECTION

#PREVENT IF NOT USER_AGENT
RewriteCond %{REQUEST_METHOD} POST
RewriteCond %{HTTP_USER_AGENT} ^$
RewriteRule .* - [F]
#FINISH PREVENT IF NOT USER_AGENT

#PREVENT UNEXPECTED USER_AGENT STRING
RewriteCond %{HTTP_USER_AGENT} ^Custo [OR]
RewriteCond %{HTTP_USER_AGENT} ^FlashGet [OR]
RewriteCond %{HTTP_USER_AGENT} ^GetRight  [OR]
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR]
RewriteCond %{HTTP_USER_AGENT} ^aHMView 
RewriteRule .* - [F]
#FINISH PREVENT UNEXPECTED USER_AGENT STRING

#BYPASS STRANGERS
RewriteCond %{REQUEST_METHOD} POST
RewriteCond %{HTTP_REFERER}&nbsp;!^http://www.site.com [NC]
RewriteRule .* - [F]
#FINISH PYPASS STRANGERS 
```

但规则导致内部服务器错误 500

有什么错误吗？如果是，我应该如何正确写？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:38:58.657

尝试“基本 .htaccess 代码语法检查器和验证器” [http://www.lyxx.com/freestuff/002.html](http://www.lyxx.com/freestuff/002.html)或“.htaccess 验证器 v1.06” [http://shop.alterlinks.com/htaccess-validator/ htaccess-validator.php](http://shop.alterlinks.com/htaccess-validator/htaccess-validator.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:08:14.477

你的规则很好。它们在香草 Apache 2.2 服务器上的空白 htaccess 文件中为我工作。您可能没有加载 mod_rewrite。在你的 httpd.conf 中检查，看起来像这样的行：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

没有被注释掉。

# wpf - 获取对 HeaderedItemsControl 中项目的引用

> ID：15136941
> 
> 赞同：1
> 
> 时间：2013-02-28T13:37:03.117
> 
> 标签：wpf, listview, mvvm, datatemplate, headereditemscontrol

XAML：

```
<HeaderedItemsControl ItemsSource="{Binding FooCollection}">
<HeaderedItemsControl.ItemTemplate>
    <DataTemplate>
        <StackPanel>
            <TextBlock Text={Binding foo}/>
            <Button Command="{Binding DeleteFoo}">Delete</Button>
        </StackPanel>
    </DataTemplate>
</HeaderedItemsControl.ItemTemplate> 
```

鉴于此 XAML，如何在 ViewModel 中的 DeleteFoo 命令和方法中获取对 FooCollection 中单击的项目的引用？通常在 DataGrid 等中，它只是绑定在 ViewModel 中的 SelectedItem，但令人讨厌的是 HeaderedItemsControl 没有此选项。

是否有另一种方法可以通过 CommandArguments 传递对项目的引用，或者它在 FooCollection 中的索引位置？

我意识到 ListView 是一个类似的控件，它有一个 selectedItem 等效项，但是我设置了一个格式很好的 HeaderedItemsControl （带有标题标题），所以如果可能的话，我宁愿不必放弃它。

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:02:39.527

您可以通过CommandParameter将每个项目的DataContext发送到命令

```
 <Button Command="{Binding DeleteFoo}" CommandParameter={Binding}>Delete</Button> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:03:31.333

无论如何我都会把它作为答案.. ItemsControls 将 ListItem 的 DataContext 设置为它们所代表的对象，这样您就可以使用获得对单击项目的引用

```
<HeaderedItemsControl ItemsSource="{Binding FooCollection}">
<HeaderedItemsControl.ItemTemplate>
    <DataTemplate>
        <StackPanel>
            <TextBlock Text={Binding foo}/>
            <Button Command="{Binding DeleteFoo}" CommandParameter={Binding}>Delete</Button>
        </StackPanel>
    </DataTemplate>
</HeaderedItemsControl.ItemTemplate> 
```

# jquery - jQuery Validate，在两个空白字段中，至少一个字段必须填写或两者都填写

> ID：15136943
> 
> 赞同：11
> 
> 时间：2013-02-28T13:37:12.890
> 
> 标签：jquery, jquery-validate

**我想验证我的表格，以便在两个空白字段中，至少必须填写一个字段，并且还可以填写两个字段；但不能将任何字段留空。**

我正在使用 jquery-1.9.1-min.js，这是我的 html 页面。

```
<form action="#" class="send_form" id="forgot_pass_form" method="POST">
            <fieldset>
                <div class="send_row">
                    <label class="padding-top10">Email</label>
                    <input type="text" class="send_email" id="email" name="email" />
                    <em>You need to type an email address</em>
                </div>

                <div class="send_row option">OR</div>

                <div class="send_row">
                    <label class="padding-top10">Username</label>
                    <input type="text" class="send_username" id="uname" name="uname" />
                </div>

                <div class="send_row send_submitforgotuser">
                    <input type="submit" value="Submit" />
                </div>
            </fieldset>
            </form> 
```

任何建议如何做到这一点....？

到目前为止我已经尝试过

```
 jQuery.validator.addMethod("require_from_group", function(value, element, options) {
    alert("xxx");
    var valid = $(options[1], element.form).filter(function() {
        return $(this).val();
    }).length >= options[0];

    if(!$(element).data('reval')) {
        var fields = $(options[1], element.form);
        fields.data('reval', true).valid();
        fields.data('reval', false);
    }
    return valid;
}, jQuery.format("'Please enter either username/ email address to recover password'/Please fill out at least {0} of these fields.")); 
```

仍然没有得到富有成效的输出。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-28T16:15:46.273

您正在尝试使用[jQuery Validate plugin](http://docs.jquery.com/Plugins/Validation)`validator.addMethod`的一部分。如果你还没有，你需要在你的代码中包含这个插件。

然后使用`require_from_group`已经包含[在 Validate 插件`additional-methods.js`文件](https://github.com/jzaefferer/jquery-validation/blob/master/additional-methods.js#L337)中的规则。（不要忘记也包含该`additional-methods.js`文件。）

```
rules: {
    myfieldname: {
        require_from_group: [1, ".class"]
    }
} 
```

*   第一个参数是需要的项目数。
*   第二个参数是`class`分配给分组中的所有元素。我`send`为您的两个输入元素添加了一个类。

*   还可以使用[该`groups`选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)将两条消息合并为一条消息。

**jQuery** :

```
$(document).ready(function () {

    $('#forgot_pass_form').validate({ // initialize the plugin
        groups: {  // consolidate messages into one
            names: "uname email"
        },
        rules: {
            uname: {
                require_from_group: [1, ".send"]
            },
            email: {
                require_from_group: [1, ".send"]
            }
        }
    });

    //  for your custom message
    jQuery.extend(jQuery.validator.messages, {
        require_from_group: jQuery.format("'Please enter either username/ email address to recover password'/Please fill out at least {0} of these fields.")
    });

}); 
```

**工作演示：http: [//jsfiddle.net/sgmvY/1/](http://jsfiddle.net/sgmvY/1/)**

* * *

**编辑**： [根据 Github，](https://github.com/jzaefferer/jquery-validation/issues/412)该`require_from_group`方法存在一个未解决的问题。在修复之前，开发人员在下面推荐此解决方案。由于您将手动将修改后的方法添加到代码中，因此无需包含该`additional-methods.js`文件。

**新的工作演示：http: [//jsfiddle.net/kE7DR/2/](http://jsfiddle.net/kE7DR/2/)**

```
$(document).ready(function () {

    jQuery.validator.addMethod("require_from_group", function (value, element, options) {
        var numberRequired = options[0];
        var selector = options[1];
        var fields = $(selector, element.form);
        var filled_fields = fields.filter(function () {
            // it's more clear to compare with empty string
            return $(this).val() != "";
        });
        var empty_fields = fields.not(filled_fields);
        // we will mark only first empty field as invalid
        if (filled_fields.length < numberRequired && empty_fields[0] == element) {
            return false;
        }
        return true;
        // {0} below is the 0th item in the options field
    }, jQuery.format("'Please enter either username/ email address to recover password'/Please fill out at least {0} of these fields."));

    $('#forgot_pass_form').validate({ // initialize the plugin
        groups: {
            names: "uname email"
        },
        rules: {
            uname: {
                require_from_group: [1, ".send"]
            },
            email: {
                require_from_group: [1, ".send"]
            }
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-16T23:12:38.883

@Sparky 我正在尝试使用您的答案来验证帐户名称和/或密码的更新。我输入原始帐户名和密码，然后单击更新按钮，执行原始帐户名和密码的验证（即，没有消息说必须输入新帐户或密码）。我的代码是：

```
$(document).ready(function(){
$.validator.addMethod(
        "regex",
        function(value, element, regexp) 
        {
            if (regexp.constructor != RegExp)
                regexp = new RegExp(regexp);
            else if (regexp.global)
                regexp.lastIndex = 0;
            return this.optional(element) || regexp.test(value);
        },
        "Please enter correct Characters."
);
jQuery.validator.addMethod("require_from_group", function (value, element, options) {
    var numberRequired = options[0];
    var selector = options[1];
    var fields = $(selector, element.form);
    var filled_fields = fields.filter(function () {
        // it's more clear to compare with empty string
        return $(this).val() != "";
    });
    var empty_fields = fields.not(filled_fields);
    // we will mark only first empty field as invalid
    if (filled_fields.length < numberRequired && empty_fields[0] == element) {
        return false;
    }
    return true;
    // {0} below is the 0th item in the options field
}, jQuery.format("'Please enter either a new Account name and/or a new password'/Please fill out at least {0} of these fields."));
$('[data-toggle="tooltip"]').tooltip();
$("#contactForm").validate({
    groups: {  // consolidate messages into one
        names: "accountName1 enterPassword1"
    },
    rules: {
        accountName: {
            required: true,
            minlength: 2
        },

        enterPassword: {
            required: true,
            minlength: 8
        },

        accountName1: {
            require_from_group: [1, ".send"],
            minlength: 2
        },

        accountName2: {
            minlength: 2,
            equalTo: "#accountName1"
        },

        enterPassword1: {
            require_from_group: [1, ".send"],
            regex: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,}/,
            minlength: 8
        },

        enterPassword2: {
            regex: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,}/,
            minlength: 8,
            equalTo: "#enterPassword1"
        }
    },

    messages: {
        accountName: {
            required: "Please enter your current account name.",
            minlength: "Your account name must consist of at least 2 characters."
        },

        enterPassword: {
            required: "Please enter your current password.",
            minlength: "Your password must consist of at least 8 characters."
        },

        accountName1: {
            minlength: "Your account name must consist of at least 2 characters."
        },

        accountName2: {
            minlength: "Your account name must consist of at least 2 characters.",
            equalTo: "Your confirmation account name does not match the original."
        },

        enterPassword1: {
            regex: "Please nter at least 8 characters containing at least 1 lower case, 1 upercase, 1 special and 1 numeric..",
            minlength: "Your password must consist of at least 8 characters."
        },

        enterPassword2: {
            regex: "Please enter at least 8 characters containing at least 1 lower case, 1 upercase, 1 special and 1 numeric..",
            minlength: "Your password must consist of at least 8 characters.",
            equalTo: "Your confirmation password does not match the original."
        }
    },

    submitHandler : function(contactForm) {
        //do something here
        var frm = $('#contactForm');
        //alert($("#accountName1").val());

        $.ajax({
            type: "POST",
            url: "UpdateAccountView",
            cache: false,
            data: frm.serialize(),
            success: function(data){
                console.log('Submission was successful.');
                console.log(data);

                $("#accountName").focus();
                $('#ajaxGetUserServletResponse').text(data);
            }
        });
    }
});      
}); // end document.ready 
```

# c# - 单声道异步请求执行

> ID：15136946
> 
> 赞同：0
> 
> 时间：2013-02-28T13:37:18.130
> 
> 标签：c#, asynchronous, mono

mono 在哪里以及如何完成异步请求？例如，可能通过将回调添加到本地线程池，创建一个新线程来处理回调等？

到目前为止，我无法准确确定它是如何完成请求的。

编辑以添加示例：

```
NetworkStream.BeginRead(byte[] buffer, int offset, int size, AsyncCallback callback, Object state) 
```

# php - PHP, 外币支付

> ID：15136950
> 
> 赞同：0
> 
> 时间：2013-02-28T13:37:24.430
> 
> 标签：php

如果有人要制造一台“自动售货机”，你会写下你要付多少钱，如果你为一件 2 英镑的商品支付了 100 英镑，那么让它与你得到的金额相呼应，然后以硬币的形式相呼应（ 1p，5p 等。如果你明白我的意思。）你会如何做硬币的回声？

```
$valg = $_POST['select'];
$pris = $_POST['pris'];

$r_pris = explode(" ", $valg);
$resultat = $r_pris['1']-$pris; 

if ($resultat<0){
    $slut_pris = "du skal have " . $resultat . " kroner tilbage";
} elseif($resultat==0){
    $slut_pris = "lige og plet på.";
}
else {
    $slut_pris = "du mangler " . $resultat . " kroner";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:43:06.430

你可以这样做

```
<?php

$amt_paid = 100; //Fetch the user input
$real_amount = 2; //Pre-Defined Amount

if($amt_paid > $real_amount) { //Check whether the paid amount is more than defined amount
    $amount_paybck = $amt_paid - $real_amount;
    echo '£'.$amount_paybck; //You can divide this value to get a output in coins
    echo '10P'.ceil($amount_paybck/10).'<br />'; //Coins of 10
    echo '5P'.ceil($amount_paybck/5).'<br />'; //Coins of 5
    echo '2P'.ceil($amount_paybck/2).'<br />'; //Coins of 2
} else {
    echo 'Amount paid is in-sufficient';
}

?> 
```

# java - 无法在计算器中得到简化结果

> ID：15136951
> 
> 赞同：1
> 
> 时间：2013-02-28T13:37:25.630
> 
> 标签：java, applet, calculator

根据我的代码，用户按下等于小程序后应该在文本字段中显示简化结果，但它没有这样做。

```
import java.awt.*;
import java.applet.*;

import java.awt.event.*;

/*

<applet code="Calculator height=300 width=300 >

</applet>

*/

import javax.script.ScriptEngine;

import javax.script.ScriptEngineManager;

import javax.script.ScriptException;

public class Calculator extends Applet implements ActionListener{

Button b[]=new Button[10];

String tx="";

TextField field;

Button plus,minus,div,mul,equal;

    public void init()
{
        field=new TextField(12);

        add(field);

        for(int i=0;i<10;i++)
{
        b[i]=new Button(String.valueOf(i));

        add(b[i]);

        b[i].addActionListener(this);

        }

        plus=new Button("+");

        add(plus);

        plus.addActionListener(this);

        minus=new Button("-");

        add(minus);

        minus.addActionListener(this);

        div=new Button("/");

        add(div);

        div.addActionListener(this);

        mul=new Button("*");

        add(mul);

        mul.addActionListener(this);

        equal=new Button("=");

        add(equal);

        equal.addActionListener(this);

}//end of init

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub
        String msg=e.getActionCommand();

        if(msg.equals("0")){
                tx=tx+msg;      
                repaint();
                }

        if(msg.equals("1")){
                tx=tx+msg;      
                repaint();
                }

        if(msg.equals("2")){
                tx=tx+msg;      
                repaint();
                }
        if(msg.equals("3")){
                tx=tx+msg;      
                repaint();
                }
        if(msg.equals("4")){
                tx=tx+msg;      
                repaint();
                }
        if(msg.equals("5")){
                tx=tx+msg;      
                repaint();
                }
        if(msg.equals("6")){
                tx=tx+msg;      
                repaint();
                }
        if(msg.equals("7")){
                tx=tx+msg;      
                repaint();
                }
        if(msg.equals("8")){
                tx=tx+msg;      
                repaint();
                }
        if(msg.equals("+")){
            tx=tx+msg;      
            repaint();
        }
        if(msg.equals("-")){
            tx=tx+msg;      
            repaint();
        }
        if(msg.equals("*")){
            tx=tx+msg;      
            repaint();
        }
        if(msg.equals("/")){
            tx=tx+msg;      
            repaint();
        }
        if(msg.equals("=")){
            calculate(tx);
        }

    }

        public void paint(Graphics g){
            field.setText(tx);

    }

        public  void calculate(String tx){

            ScriptEngineManager factory = new ScriptEngineManager();

            ScriptEngine engine = factory.getEngineByName("JavaScript");

            Object obj = null;

            try {
            obj = engine.eval(tx);
            } catch (ScriptException ex) {
            ex.printStackTrace();
            }

             tx=obj.toString();
             repaint();

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:49:06.000

在您的`calculate`方法中，您只是将结果分配给 的本地副本`String` `tx`，您需要将其分配给类成员变量：

```
this.tx = obj.toString(); 
```

* * *

但是，我建议您在这里重新考虑您的设计，该`paint`方法不应涉及简单的功能，例如将文本设置为`TextField`. 你可以使用`TextField#setText`它。

# c# - C# 应用程序可以与 Node.js 代码通信吗？

> ID：15136952
> 
> 赞同：37
> 
> 时间：2013-02-28T13:37:28.227
> 
> 标签：c#, node.js

我有一个 C# 应用程序和一个 Node.js 应用程序。我想在我的 C# 应用程序中按下一个按钮，将三个参数作为输入发送到 Node.js 应用程序/函数。这可能吗？

**编辑：**两个应用程序在同一台机器上运行。C# 应用程序将为 Node.js 应用程序提供三个参数。Node.js 应用程序将查询 Web 服务 (POST)、接收一些 XML 数据并操作该数据。我知道我也可以在 C# 中完成这项任务，但在这种情况下，它必须是 Node.js。

**编辑＃2和解决方案**：现在我选择了：`4\. Your node process runs a socket server and your C# app does requests over tcp`。

我还将提供一个似乎可行的解决方案：

*   Node.js[部分](http://www.hacksparrow.com/tcp-socket-programming-in-node-js.html)
*   C#[部分](http://www.codeproject.com/Articles/1415/Introduction-to-TCP-client-server-in-C)

现在您已准备好将任何数据从 C# 应用程序发送到 Node.js 服务器。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-28T15:42:56.770

是的，就像几个人在您的问题评论中指出的那样，沟通是可能的。

这些是（一些）选项：

1.  您的节点进程运行一个 http 服务器，并且您的 C# 应用程序通过 http 执行 JSON Rest 请求
2.  您的节点进程使用[node-soap](https://github.com/milewise/node-soap) / [strong-soap](https://www.npmjs.com/package/strong-soap)模块运行 SOAP Web 服务
3.  C# 应用程序启动您的节点应用程序，您通过写入节点进程输入流并读取它的输出流来执行 IPC。
4.  您的节点进程运行一个套接字服务器，并且您的 C# 应用程序通过 tcp 发出请求。
5.  您使用第三个进程/服务器，如 Redis 或消息队列
6.  任何允许您共享文件等数据的东西..

我建议您选择第一个选项，因为它不需要您定义语言协议以通过“电线”发送。另一个原因是有很多关于使用 C# 和 node.js 进行 Rest 的文档。

作为 C#中的客户端库，如果您不能使用最新版本的 .NET (4.5)，我建议您将[Restsharp作为客户端库。](http://restsharp.org/)如果您可以使用最新版本，请使用[HttpClient](http://blogs.msdn.com/b/webdev/archive/2012/08/26/asp-net-web-api-and-httpclient-samples.aspx)调用您的 Node.js restservice。对于 Node，只需使用 Express。

选项 2 可能很快，因为 VS 对 web 服务有很好的支持，但是，我只使用 node-soap 作为客户端，所以无法评论 node-soap webservices 与 C# 客户端的效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-29T10:55:37.867

手动处理进程间通信非常耗时，而旧的替代方案 Edge.js[自 2017 年中期以来一直没有更新](https://github.com/tjanczuk/edge/graphs/code-frequency)。

我的组织维护了一个库[Jering.Javascript.NodeJS](https://github.com/JeringTech/Javascript.NodeJS)，它允许您从 C# 调用Node.js。

### 示例用法

```
string javascriptModule = @"
module.exports = (callback, x, y) => {  // Module must export a function that takes a callback as its first parameter
    var result = x + y; // Your javascript logic
    callback(null /* If an error occurred, provide an error object or message */, result); // Call the callback when you're done.
}";

// Invoke javascript in Node.js
int result = await StaticNodeJSService.InvokeFromStringAsync<int>(javascriptModule, args: new object[] { 3, 5 });

// result == 8
Assert.Equal(8, result); 
```

您可以调用任何有效的 Node.js 模块，包括执行问题中列出的任务的模块：查询 Web 服务 (POST)、接收 XML 数据和操作该数据。

### 强调

*   跨平台支持

    *   面向 .NET Standard 2.0 和 .NET Framework 4.6.1。
    *   在 Windows、macOS 和 Linux 上测试。
*   [性能](https://github.com/JeringTech/Javascript.NodeJS#performance)特点

    *   不会为每次调用启动新的 Node.js 进程。相反，通过进程间通信将调用发送到长期存在的进程。
    *   （可选）在 Node.js 进程集群中[同时](https://github.com/JeringTech/Javascript.NodeJS#concurrency)运行调用。处理集群的负载平衡。
    *   尽可能缓存已编译的 javascript。
*   长期运行的应用程序支持

    *   如果 Node.js 进程意外终止，则重新启动它们。
    *   （可选）在文件更改时重新启动 Node.js 进程。
    *   当父 .Net 进程死亡时杀死 Node.js 进程。
*   [灵活的 API](https://github.com/JeringTech/Javascript.NodeJS#api)

    *   公开[静态 API](https://github.com/JeringTech/Javascript.NodeJS#static-api)和基于依赖注入的 API。
    *   `string`支持以表单、`Stream`表单或磁盘上的文件调用 javascript 。

# javascript - 日期时间部分的淘汰赛自定义绑定

> ID：15136953
> 
> 赞同：0
> 
> 时间：2013-02-28T13:37:34.963
> 
> 标签：javascript, knockout.js

我是新来的淘汰赛。我有一个像这样的视图模型：

```
var Booking = function(data) {
    var self = this;

    self.BookingID = ko.observable(data.BookingID);
    self.BookingCustomerOrderID = ko.observable(data.BookingCustomerOrderID);
    self.BookingName = ko.observable(data.BookingName);
    self.BookingTreatmentGroupID = ko.observable(data.BookingTreatmentGroupID);
    self.BookingStartTime = ko.observable(data.BookingStratTime);
    self.BookingEndTime = ko.observable(data.BookingEndTime); 
```

在我的表单中，我想让用户更改 StartTime 和 EndTime 的时间。我可以对从输入字段中离开日期部分的时间部分进行自定义绑定并使其更新模型吗？

仅显示该值，这可以正常工作，但这不会更新视图模型。

```
 ko.bindingHandlers.timeVal = {
    update: function (element, valueAccessor) {
        var value = valueAccessor();
        var date = moment(value());
        var strDate = date.format('HH:mm');
        $(element).val(strDate);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:50:08.250

查看[文档](http://knockoutjs.com/documentation/custom-bindings.html)，您可以在 init 方法中将事件处理程序注册到元素上，并使用它来更新您的 observable。像这样的东西：

```
ko.bindingHandlers.hasFocus = {
    init: function(element, valueAccessor) {
        $(element).change(function() {
            if(this.val() != valueAccessor())
            {
                this.val(valueAccessor());
            }
        });          
    },
    update: function(element, valueAccessor) {
        var value = valueAccessor();
        var date = moment(value());
        var strDate = date.format('HH:mm');
        $(element).val(strDate);
    }
}; 
```

# android - 使用 In App Billing 将付费 Android 应用程序更改为免费应用程序 - 保护现有客户

> ID：15136955
> 
> 赞同：10
> 
> 时间：2013-02-28T13:37:39.550
> 
> 标签：android, in-app-billing

我今天在 Google Play 中有一个付费应用程序，我想将其更改为具有 3 次应用内购买的免费应用程序。问题在于如何将应用内购买“给予”现有客户，因为已经为应用付费。

我只是有一个想法-许可可以解决问题吗？

现有的付费应用程序使用 Google 许可，但是当所有功能都作为应用程序内购买购买时，这应该不再需要 - 对吗？因此，所有现有客户都有许可证，而所有新客户都不需要许可证。

是否可以检查许可证，如果发现授予用户访问与 3 个应用内购买相同的功能的访问权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:15:17.913

据我所知，当用户购买还不是免费的（例如通过优惠券）时，没有好的方法可以免费为用户提供应用内购买。

在[如何使用我的应用程序的付费版本作为免费版本的“钥匙”中讨论了一些可能的方法来做到这一点？](https://stackoverflow.com/questions/3062946/how-can-i-use-the-paid-version-of-my-app-as-a-key-to-the-free-version?rq=1)

一种方法是使用一些代码来检查“旧用户”（那些安装了旧的付费应用程序的用户），并在他们的设备上设置一个偏好，将他们标记为拥有付费应用程序。

如果用户切换手机或卸载然后重新安装您的应用程序，您将遇到问题。您可以通过为旧用户添加第二套免费的应用内产品来规避这种情况，但仅提供给安装了旧应用的用户。在他们购买免费的旧版本后，他们可以卸载旧应用程序。然后，每当您检查购买的产品时，您都会检查旧产品或新产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T11:50:48.610

我认为您可以这样做，以验证“专业”应用程序是否可用并且由相同的签名签名。

```
public boolean isProAppPresent()
{
    try
    {
        PackageInfo info = context.getPackageManager().getPackageInfo("x.x.x.pro",
                PackageManager.GET_META_DATA);
        Log.d(TAG, "Pro app is installed: " + info.applicationInfo.name);
        return context.getPackageManager().checkSignatures("x.x.x",
                "x.x.x.pro") == PackageManager.SIGNATURE_MATCH;
    }
    catch (NameNotFoundException e)
    {
        return false;
    }
} 
```

这很容易做到，但我不确定它是否是一个完整的保护。

# android - 想在邮件列表中向用户显示我的 android 应用程序

> ID：15136957
> 
> 赞同：0
> 
> 时间：2013-02-28T13:37:46.960
> 
> 标签：android, list, show, mailing

如果有人从任何其他应用程序单击电子邮件地址，我想启动我的应用程序或想在邮件列表中显示我的应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:47:09.760

您需要在应用程序的清单文件中定义意图过滤器，可以像这样

```
 <action android:name="android.intent.action.SEND" />     
<category android:name="android.intent.category.DEFAULT" />
<data android:mimeType="text/plain" /> 
```

这将使您的应用出现在共享列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:57:55.740

请在您的清单行中添加此行并检查它。

```
<intent-filter> 
<action android:name="android.intent.action.SEND" />
<data android:mimeType="text/html"/>
</intent-filter> 
```

希望对你有帮助..

# javascript - 如何在 Jquery Mobile 中测试页面是否已“创建页面”？

> ID：15136959
> 
> 赞同：1
> 
> 时间：2013-02-28T13:37:55.250
> 
> 标签：javascript, jquery, events, jquery-mobile

我有一个两页的应用程序。两个页面都有在客户端上动态创建的所有内容。

问题是，如果我`page A > page B > page A > page B`在第二次+ 访问时，页面 B 不再被 Jquery Mobile 增强，尽管`pagecreate`触发正确。我被一页未增强的标记困住了。

我无法调用`create`页面的单独小部件，因为小部件将是随机类型，并且因为 I `cannot call create prior to initialization`. 收到此错误后，我`pagecreate`在未增强的页面上手动调用，该页面修复了所有小部件。

问题是，如何检测页面是否已被 JQM 增强？因为我不想在已经增强的页面上调用它。

所以，**看似简单的问题**：
如何测试页面是否已被 Jquery Mobile 增强？

感谢您的投入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:59:02.127

这很简单。

1.  如果您使用 trigger('pagecreate') 来增强页面标记，请使用它来检查页面容器是否已增强：

    ```
    $(document).on('pagebeforeshow', '#index', function(){       
        alert($.mobile.activePage.hasClass('ui-page'));
    }); 
    ```

    现场示例：http: [//jsfiddle.net/Gajotres/HthYd/](http://jsfiddle.net/Gajotres/HthYd/)

2.  如果您使用 trigger('create') 仅增强页面内容 div 使用它来检查内容容器是否已增强：

    ```
    $(document).on('pagebeforeshow', '#index', function(){       
        alert($.mobile.activePage.find('[data-role="content"]').hasClass('ui-content'));
    }); 
    ```

    现场示例：http: [//jsfiddle.net/Gajotres/8jcGb/](http://jsfiddle.net/Gajotres/8jcGb/)

当然，这种情况仅适用于您要增强整个页面或整个内容的情况。

**编辑 ：**

这是一个动态添加页面的真实示例：http: [//jsfiddle.net/Gajotres/8jcGb/](http://jsfiddle.net/Gajotres/8jcGb/)

# delphi - 终止前显示窗口

> ID：15136960
> 
> 赞同：1
> 
> 时间：2013-02-28T13:37:58.827
> 
> 标签：delphi

我有一个 delphi 应用程序，它在启动时检查进程是否已经在运行，如果它正在运行，我将数据传递给该进程并终止当前进程。问题：在终止当前进程时，应用程序的窗口在终止前会闪烁一瞬间。所有代码都在应用程序初始化中，甚至在创建主表单之前，所以我不明白它如何在一瞬间显示表单。我尝试了很多事情，比如让窗户不可见，但似乎没有任何效果。有什么我做错了吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:44:17.987

您显然没有足够快地终止。我会做类似的事情

```
program Project1;

uses
  Forms,
  Windows,
  Unit1 in 'Unit1.pas' {Form1};

{$R *.res}

function PrevInstance: boolean;
begin
  ...
end;

procedure PassData;
begin
  ...
end;

begin

  if PrevInstance then
  begin
    PassData;
    Exit;
  end;

  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm1, Form1);
  Application.Run;
end. 
```

**更新：**我相信你会做类似的事情

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TForm1 = class(TForm)
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure MyInitProc;
begin
  if true then Application.Terminate;
end;

initialization
  InitProc := @MyInitProc;

end. 
```

这*不起作用*，因为`Application.Terminate`不会立即终止应用程序。相反，它只是[发布一条`WM_QUIT`消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644945%28v=vs.85%29.aspx)。在所有初始化完成后，该消息将被接收并采取行动。

# r - 在 R 中连接一个函数来调整窗口大小操作

> ID：15136961
> 
> 赞同：0
> 
> 时间：2013-02-28T13:38:00.680
> 
> 标签：r, window-resize

我有一个函数显示一个主要包含大量文本的绘图（wordcloud 包中 wordcloud 函数的修改版本）。调整窗口大小而不调整文本大小看起来很糟糕。我想为在调整绘图窗口大小时调用的函数创建一个自定义钩子。

如果可以的话，我怎么能以编程方式在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:27:11.047

[本文档](http://finzi.psych.upenn.edu/R/library/grid/doc/displaylist.pdf)讨论了显示列表以及调整图形大小时会发生什么。我看不到用基本图形重做计算的方法，尽管可能有一个可以设置的钩子。如果您使用网格图形而不是基本图形，则链接文档有一些建议可能会触发您想要的重新计算。

# ruby-on-rails - rails before_filter 防止访问控制器

> ID：15136965
> 
> 赞同：0
> 
> 时间：2013-02-28T13:38:11.507
> 
> 标签：ruby-on-rails, before-filter

我有一个应用程序，用户可以在其中提名一个也可以查看其帐户的密钥持有人。我有一个 before_filter，这意味着只有帐户持有人或他们的密钥持有人才能查看他们的帐户。此代码适用于查看用户主页的任何人，但我无法做任何进一步的事情 - 我目前以密钥持有者身份登录，我无法注销或向任一帐户添加“注释”（现在密钥持有人可以不受限制地访问他们自己的帐户和他们的密钥持有人）。请问有人可以帮忙吗？

before_filter 是：

```
def correct_user
        @user = User.find(params[:id])

        unless (@user && current_user.id == @user.id) || ((current_user.access_id==@user.id)&&(current_user.id==@user.access_id))
          redirect_to root_path
        end
      end 
```

我在尝试创建笔记时遇到的错误是：

```
ActiveRecord::RecordNotFound in NotesController#new 
Couldn't find User without an ID 
```

它指的是 before_filter 中的@user 行。

为什么当我作为keyholder登录时，我可以查看主页，但不能执行其他操作？谢谢！

更新：

更新 before_filter（在 application_controller.rb 中）：

```
def correct_user
        if params[:id]
          @user = User.find(params[:id])

          unless (@user && current_user.id == @user.id) || ((current_user.access_id==@user.id)&&(current_user.id==@user.access_id))
            redirect_to root_path
          end
        else
          redirect_to root_path
        end
      end 
```

笔记创建时的控制台输出：

```
Started POST "/notes" for 127.0.0.1 at 2013-02-28 14:10:49 +0000
Processing by NotesController#create as HTML
  Parameters: {"utf8"=>"V", "authenticity_token"=>"qMDHQAoC4l3Be5YZKSH1AJ9E5zS1D
kMNCW2KzUZ38gM=", "note"=>{"user_id"=>"16", "content"=>""}, "commit"=>"Update Note"}
Redirected to http://localhost:3000/
Filter chain halted as :correct_user rendered or redirected
Completed 302 Found in 98ms (ActiveRecord: 0.0ms)

Started GET "/" for 127.0.0.1 at 2013-02-28 14:10:49 +0000
Processing by PublicController#index as HTML
  ←[1m←[36mUser Load (3.0ms)←[0m  ←[1mSELECT "users".* FROM "users" WHERE "users
"."id" = 16 LIMIT 1←[0m
  Rendered public/index.html.erb within layouts/application (5.0ms)
  ←[1m←[36mTimeline Load (3.0ms)←[0m  ←[1mSELECT "timelines".* FROM "timelines"
WHERE "timelines"."user_id" = 16 LIMIT 1←[0m
  ←[1m←[36mMessageBoard Load (2.0ms)←[0m  ←[1mSELECT "message_boards".* FROM "me
ssage_boards" WHERE "message_boards"."user_id" = 16 LIMIT 1←[0m
  Rendered partials/_menuoptions.html.erb (53.0ms)
Completed 200 OK in 551ms (Views: 535.0ms | ActiveRecord: 16.0ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:46:09.533

我认为您在单个操作上验证了太多，无论如何问题似乎出在 get/post 请求中，因为没有 id 进入控制器操作，您可以附加发送到控制器的参数吗？从控制台复制它们，它会更容易阅读......

```
 "note"=>{"user_id"=>"16", "content"=>""} 
```

你必须用来`params[:note][:user_id]`获取用户 ID，你必须添加一个带有用户 ID 的隐藏字段才能做你想做的事情，如果你问我，我不认为这是一个好习惯，有你看过任何 railscast 吗？，我很确定你可以在那里找到很多有用的提示，例如看看这个：

[Railscast 康康舞](http://railscasts.com/episodes/192-authorization-with-cancan)

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:48:32.833

当你去 yo notes/new 时，你没有提供任何 id 参数，这就是你得到这个异常的原因。

您必须先检查 params[:id] 是否存在：

```
def correct_user
  if params[:id]
    @user = User.find(params[:id])

    unless (@user && current_user.id == @user.id) || ((current_user.access_id==@user.id)&&(current_user.id==@user.access_id))
      redirect_to root_path
    end
  else
    redirect_to root_path
  end
end 
```

在 notes/new 的链接中，您必须为用户提供 id 参数：

```
<%= link_to "New note on #{@user.name}", new_note_path(id: @user.id) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:36:31.760

尝试：

```
def correct_user
            if current_user
              @user = User.find(current_user.id)

              unless (@user && current_user.id == @user.id) || ((current_user.access_id==@user.id)&&(current_user.id==@user.access_id))
                redirect_to root_path
              end
            else
              redirect_to root_path
            end
          end 
```

实际上，这里没有`params[:id]`类似的东西。是您正在检查的`current_user`用户，因此您可以`current_user.id`如上所述直接找到。用上面的代码替换代码，如果您发现其他代码，请尽可能纠正。这只是一个实施的想法。

# gunicorn - 工人超时需要处理程序

> ID：15136967
> 
> 赞同：0
> 
> 时间：2013-02-28T13:38:14.000
> 
> 标签：gunicorn

如果 gunicorn 报告工人超时并“谋杀”工人，我需要能够进行后续处理。看起来 worker_exit 仅在工作进程崩溃时才被调用，但如果它没有响应则不会。我如何确定一名或多名工作人员是否超时？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:56:26.363

好的，我发现这是解决方案： http: [//docs.python.org/2/library/signal.html](http://docs.python.org/2/library/signal.html)

我只需要在我怀疑可能超时的地方设置一个警报信号。

# sql - 根据日期创建具有不同值的表

> ID：15136968
> 
> 赞同：2
> 
> 时间：2013-02-28T13:38:16.440
> 
> 标签：sql, sql-server, sql-server-2008, distinct

我有一张桌子，每个月都有很多交易，如下所示。

```
Name          ID        Date         OtherColumn
_________________________________________________
John Smith    11111     2012-11-29   Somevalue
John Smith    11111     2012-11-30   Somevalue
Adam Gray     22222     2012-12-11   Somevalue
Tim Blue      33333     2012-12-15   Somevalue
John NewName  11111     2013-01-01   Somevalue
Adam Gray     22222     2013-01-02   Somevalue 
```

从这个表中，我想创建一个具有唯一名称和 ID 的维度表。问题是一个人可以更改他/她的名字，例如上面示例中的“John”。否则，ID 总是唯一的。在这些情况下，我只想使用最新的名称（日期最新的名称）。

所以我最终得到一个这样的表：

```
Name          ID
______________________
John NewName  11111
Adam Gray     22222
Tim Blue      33333 
```

我该如何实现这一目标？
我可以在一个查询中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:41:39.350

为此使用 CTE。它简化了排名和窗口函数。

```
;WITH CTE as
(SELECT
  RN = ROW_NUMBER() OVER (PARTITION BY ID ORDER BY [Date] DESC),
  ID,
  Name
 FROM
  YourTable)
SELECT
  Name,
  ID
FROM
  CTE
WHERE
  RN = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:45:05.990

我认为创建一个表是一个坏主意，但这是您获得最新名称的方式。

```
select name
from yourtable yt join 
(select id, max(date) maxdate
from yourtable
group by id ) temp on temp.id = yt.id and yt.date = maxdate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:22:29.283

JNK 的`CTE`解决方案等效于以下内容。

```
SELECT
  Name,
  ID
FROM (
     SELECT
      RN = ROW_NUMBER() OVER (PARTITION BY ID ORDER BY [Date] DESC),
      Name, 
      ID
     FROM theTable
     )
WHERE RN = 1 
```

试图想一种方法来摆脱分区函数而不引入可能的重复。

# asp.net - 如何在 Web 服务端点转发肥皂消息并在本地数据库中写入请求？

> ID：15136970
> 
> 赞同：0
> 
> 时间：2013-02-28T13:38:20.573
> 
> 标签：asp.net, .net, sql

我是Web服务开发的新手。我有一个新项目，我需要将通过 Web 服务网关（我们称之为 Cyceon）从客户收到的请求转发到另一个 Web 服务端点（Omega）。但是，出于报告原因，我还需要在 Cyceon 的本地 sql 数据库中编写请求和响应。请求：客户端 A --ws--> Cyceon 数据库（写入客户端请求）--ws--> Omega 响应：Omega --ws--> Cyceon 数据库（写入 Omega 响应）--ws--> 客户端 A 我做了Cyceon --ws--> Omega 连接和一个 test_client 从中直接向 Omega 发送请求......但我不知道如何制作 Cyceon 端点，该端点将从外部客户端检索请求，将数据写入数据库和在 Omega 中转发请求。

任何帮助将不胜感激。

提前致谢， Sotiris

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:53:12.570

不是一个详细的问题，所以答案也很笼统。

如果我们谈论的是 WCF IIS 托管的 Web 服务，那么您可以创建一个由 Cyceon 托管的 Web 服务，该服务将用作客户端的联系端点，并将包含一个由客户端调用的方法。此方法的主体必须包含一个逻辑，该逻辑将用适当的数据填充数据库，然后将对您说您已经创建的 Omega WS 进行适当的调用。

# ios - 如何实现显示“有状态”内容的 UICollectionViewCells？

> ID：15136973
> 
> 赞同：0
> 
> 时间：2013-02-28T13:38:33.673
> 
> 标签：ios, user-interface, ios6, uicollectionview, uicollectionviewcell

我目前正在重构我的报亭应用程序。

以前，我在`UIView`嵌入在滚动视图中的自计算网格布局（每行 3 个项目，行数根据需要）中显示了几个自定义 s（“CoverView”），垂直滚动。

每个“CoverView”包括

*   标签（显示问题标题）
*   图片（显示问题封面）
*   一个按钮（显示“下载”或 - 如果已下载 - “阅读”）
*   进度条（最初隐藏，显示下载进度）

每个 CoverView 都有自己的`UITapGestureRecognizer`和`UILongPressGestureRecognizer`.

如果用户点击一次，按钮会被隐藏，下载进度条会显示并随着下载进度不断更新：

```
 [issue addObserver:cover forKeyPath:@"downloadProgress" options:NSKeyValueObservingOptionNew context:NULL]; 
```

（长按识别器用于让用户删除问题）。

所有 CoverView 都存储在 NSMutableDictionary 中，并且始终保存在内存中。尽管未缩放的图像相当大（1024 像素高），但我在滚动时从未遇到过性能问题，可能是因为存储的问题（以及 CoverViews）并不多。

由于自行实现的网格布局复杂且难以维护，因此我想使用 a`UICollectionView`来代替。我添加了一个集合视图并使我的 CoverView 类继承自`UICollectionViewCell`（而不是`UIView`）。

显示和滚动有效，但我遇到了这些问题：

1.  当需要显示新的单元格行并为每个单元格调用**collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath**时，滚动会滞后。

2.  我试图不重用单元格（以提高性能，很奇怪），但这失败了，因为每个单元格都必须设置它的*重用标识符*（并且“reuseIdentifier”属性是只读的，所以我不能在代码中设置它）。

3.  我不知道在哪里为单元格取消设置 KVO 的观察者。一旦一个单元被排队等待重用，有没有办法得到通知？

一般来说，我不确定我是否在`UICollectionView`这里误用了我的特定用例，应该坚持我以前的方法，还是只是我无法有效地使用和调整`UICollectionView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:39:48.993

要设置“reuseIdentifier”，正确的设计是使用 UICollectionView 方法：

*   `registerClass:forCellWithReuseIdentifier:`
*   或者`registerNib:forCellWithReuseIdentifier:`

您通常调用这些方法一次，具体取决于您希望如何提供单元的实例化（从 NIB 膨胀，或通过标准实例化`[[ViewClass alloc] init]`

注册视图后，您可以像这样从 UiCollectionView 使用它们：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"yourReuseId" forIndexPath:indexPath];
    // Collection view handle ALL the work :
    // 1 - retrieves a reusable view if views have already been recycled
    // or 2- instantiate a new one, using the class/nib you registered
    // So, cell SHOULDN'T be nil from here :)

    // Note : from iOS 6, UITableView has a similar auto-instantiation mechanism

} 
```

3 - 取消设置 KVO，覆盖`UICollectionViewCell`的`-(void)prepareForReuse`方法（继承自`UICollectionReusableView`）

# asp.net-mvc - MVC4 PartialView ajax 加载是否应该触发“pageinit”事件？

> ID：15136983
> 
> 赞同：1
> 
> 时间：2013-02-28T13:39:08.993
> 
> 标签：asp.net-mvc, jquery-mobile

在我的 asp.net mvc4 + jquerymobile 应用程序中，我有一个看起来像这样的“页面”：

```
+---------------------------------------+
|A                                      |
|   +----------------+----------------+ |
|   |B               |C               | |
|   |                | +------------+ | |
|   |                | |D           | | |
|   |                | +------------+ | |
|   +----------------+----------------+ |
+---------------------------------------+ 
```

*   A 几乎只是一个容器页面，除了设置 B 和 C 的“子页面”（部分视图）之外，它什么也不做
*   B 是一个 UserList 面板（div），它具有绑定的事件，这将导致面板 C 的 ajax 重新加载（部分视图）
*   C 是一个 UserEdit 面板（div），包含一个带有其他信息的辅助面板。
*   D 是一个 UserPermissions 面板（div），包含通过 ajax 调用与 simplemembership 角色系统交互的复选框。

所有四个视图我都有这个脚本的某个版本，告诉我哪些事件正在触发，什么时候：

```
$(document).ready(function () {
    console && console.log("portalUser (pvUserEdit) document ready!!");
});
$(document).on('pageinit', function () {
    console && console.log("portalUser (pvUserEdit) pageInit!!");
}); 
```

当页面 A 首次加载时，页面 B 会同时加载，并且 pageinit 事件和 DOM 就绪事件都会为它们触发。当从 B 中的列表中选择一个项目时，它会生成一个 ajax 加载来填充面板 C（这会导致面板 D 也加载）。这一次，只有 C&D 面板的 DOM 就绪事件触发，从不触发 pageinit 事件。

所以，这就是所有的背景信息。问题是：考虑到项目的 MVC4+JQM 方面，这是预期的行为吗？我应该期望 pageinit 在 partialView 加载时触发吗？还是我需要以不同于处理完整页面的方式处理部分视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:45:01.093

Javascript 不知道正在运行什么样的后端，所以绝对不是 mvc 问题。它在不同的浏览器中可能会有所不同，但肯定会因为 ajax 页面加载而有所不同

# twitter-bootstrap - 如果访问 mydomain.com/#collapseFour，引导程序崩溃

> ID：15136985
> 
> 赞同：0
> 
> 时间：2013-02-28T13:39:15.687
> 
> 标签：twitter-bootstrap, anchor, collapse

我有个问题

我在页面上使用 twitter bootstrap 折叠。在页面中有**更多的折叠**：

**#collapseOne #collapseTwo #collapseThree** ...

正常情况下**都是关闭的。**

但是如果我像这样访问我的链接：**mydomain.com/#collapseFour**我希望**自动**显示一个折叠。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:49:04.373

我会在 PHP 中做到这一点，只需在手风琴体中添加一个“in”类。

例如

```
<div id="collapseFour" class="accordion-body collapse <?=($_GET['open'] == 4) ? "in" : ""?>"> 
```

那么您的网址将是 mydomain.com/?open=4

如果您想在哈希上执行此操作，请阅读[我可以在我的服务器端应用程序（PHP、Ruby、Python 等）上读取 URL 的哈希部分吗？](https://stackoverflow.com/questions/940905/can-php-read-the-hash-portion-of-the-url)

并查看引导文档，它非常好！

# c# - 如何在 Visual Studio 中删除测试项目？

> ID：15136989
> 
> 赞同：5
> 
> 时间：2013-02-28T13:39:35.803
> 
> 标签：c#, visual-studio-2010, projects-and-solutions, solution

最近我的测试项目（Visual Studio 2010 中的单元测试）出现问题（无法从程序集“...”加载类型“...”），所以我尝试（在此处寻找解决方案后）删除它并重写它。我通过右键单击解决方案资源管理器中的项目并选择“删除”来删除它。尽管如此，我可以看到该项目仍然存在，如果我通过 Windows 查看（整个解决方案的）文件夹......

如何正确彻底地删除测试项目？（我已经备份了...）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-28T13:44:03.497

*从项目结构中删除*它只会修改解决方案文件 (.sln)。删除项目后，它不再在其中列出，并且参考消失了。

因此，从解决方案中删除项目只会删除对该项目的*引用*。如果您想完全删除它，也可以从磁盘上的旧位置手动删除它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-28T13:43:23.233

您几乎做了正确的事情...您必须通过右键单击并“删除”项目从解决方案中“删除”。此操作将更改解决方案 (.sln) 文件，删除对项目的引用，但文件夹将保留在磁盘中。然后您必须手动将其从磁盘中删除。

# c++ - 为什么我的程序在构造函数中使用 fread 时会崩溃？

> ID：15136992
> 
> 赞同：0
> 
> 时间：2013-02-28T13:39:38.630
> 
> 标签：c++, arrays, crash, fread

我有一个小程序，用 C++ 编写，其中包含一个带有大数组的类。该类如下所示：

```
class Test
{
public:
    Test();
    ...
private:
    int myarray[45000000];
}; 
```

现在，这个数组是从文件中读入的。我想直接用构造函数来做这件事，而不是费心调用任何额外的函数。数组只需要读入一次，之后就不会再改变了。它具有指定的确切尺寸。

我的构造函数如下所示：

```
Test()
{
   memset(myarray, 0, sizeof(myarray));
   FILE* fstr = fopen("myfile.dat", "rb");
   size_t success= fread(myarray, sizeof(myarray), 1, fstr);
   fclose(fstr);
} 
```

使用 Visual Studio 2012 Ultimate：尝试启动使用此类的程序时，一旦创建类，它就会崩溃并出现“APPCRASH”，并且在尝试调试它时（我几乎不知道），告诉我认为错误是堆栈溢出。

这一切的奥秘在于，在我以前的版本中，myarray 是一个静态变量，我必须调用一个静态函数来设置它，一切都很好。但是尝试将其转换为构造函数，尽我所能，我所有的尝试都失败了。

那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:42:46.803

即使您`int`的最小大小为 2 个字节，您的数组也会使用大约 86MB 的内存。典型的最大堆栈大小为 1MB。如果您的对象的存储空间`Test`是在堆栈上分配的，您将很容易溢出。您需要动态分配数组或不一次将所有数组加载到内存中。更好的是，使用对其元素使用动态分配的标准容器，例如`std::vector。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T13:43:53.003

您班级中的此声明：

```
int myarray[45000000]; 
```

正在尝试为每个 int 分配 45,000,000 * 4 字节（假设为 32 位）= 180MB 的内存。你的堆栈不可能支持这一点。您需要重新设计应用程序以更改加载文件的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T13:46:06.803

所以你大概在你的主要（或其他任何地方）这样做

```
int main ()
{
  Test t; // Hello StackOverflow
} 
```

你需要的是在堆上分配它：

```
int main ()
{
  Test* t = new Test;
  delete t;
} 
```

它没有因静态变量而崩溃，因为静态变量未在堆栈上分配

# delphi - 如何将 TGifImage 中的帧提取到位图中？

> ID：15136993
> 
> 赞同：7
> 
> 时间：2013-02-28T13:39:42.010
> 
> 标签：delphi, gif

下面的演示尝试在表单的画布上绘制 GIF。它不起作用。图像不会前进。如何让它发挥作用？

```
procedure TForm1.FormCreate(Sender: TObject);
begin
 GIF := TGIFImage.Create;
 GIF.LoadFromFile('c:\2.gif');
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
 GIF.Free;
end;

procedure TForm1.Button1Click(Sender: TObject);
VAR i: Integer;
begin
 REPEAT
  for i:= 0 to GIF.Images.Count-1 DO
   begin
    DisplayGifFrame(i);
    Sleep(30);
   end;
 UNTIL FALSE;
end;

procedure TForm1.DisplayGifFrame(AIndex: Integer);
VAR
   Renderer: TGIFRenderer;
begin
 Renderer := TGIFRenderer.Create(GIF);
 TRY
  Renderer.Animate := TRUE;
  Renderer.FrameIndex := AIndex;
  Renderer.Draw(Canvas, Canvas.ClipRect); 

  {save frame in a bitmap here. save bitmap to disk}
  // xxx 
 FINALLY
  Renderer.Free;
 end;
end; 
```

**我想要实现的目标：**
我想从 GIF 中提取所有帧并将每个帧放在一个唯一的位图中。

* * *

**更新：**
在此处继续：[无法在动态创建的 TBitmap(s) 上绘制 GIF](https://stackoverflow.com/questions/15140614/cannot-draw-gif-on-tbitmap)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T13:46:27.040

试试这个：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  GIF: TGIFImage;
  Bitmap: TBitmap;
  I: Integer;
  GR: TGIFRenderer;
  R: TRect;
begin
  GIF := TGIFImage.Create;      
  Bitmap := TBitmap.Create;
  try
    GIF.LoadFromFile('c:\test\test.gif');
    Bitmap.SetSize(GIF.Width, GIF.Height);
    GR := TGIFRenderer.Create(GIF);
    try
      for I := 0 to GIF.Images.Count - 1 do
      begin
        if GIF.Images[I].Empty then Break;
        GR.Draw(Bitmap.Canvas, Bitmap.Canvas.ClipRect);
        GR.NextFrame;
        Bitmap.SaveToFile(Format('%.2d.bmp', [I]));
      end;
    finally
      GR.Free;
    end;  
  finally
    GIF.Free;
    Bitmap.Free;
  end;
end; 
```

上面的代码考虑了Frame的`Disposal`方法。[在此处](https://stackoverflow.com/q/10349050/937125)查看相关问题。

# regex - 正则表达式：重复组只得到最后一组

> ID：15136998
> 
> 赞同：3
> 
> 时间：2013-02-28T13:39:59.263
> 
> 标签：regex

我的数据：

```
stack: 123 overflow: 456 others: - st: 7 ov: 7 againothers: - m: 11 t: 12 - m: 13 t: 14 - m: 15 t: 16 - st: 8 ov: 8 againothers: - m: 17 t: 18 end: 42 
```

我的正则表达式：

```
^stack: (\d+) overflow: (\d+) others: ?(.+) end: (\d+)$ 
```

将组匹配为：

```
1: 123
2: 456
3: - st: 7 ov: 7 againothers: - m: 11 t: 12 - m: 13 t: 14 - m: 15 t: 16 - st: 8 ov: 8 againothers: - m: 17 t: 18
4: 42 
```

目前很好。然后在第 3 组上运行以下正则表达式：

```
^(?:- st: (\d+) ov: (\d+) againothers: ?(?: - m: (\d+) t: (\d+))+)+$ 
```

这根本不起作用（为什么？），所以我删除了`^`and`$`它匹配。然后比赛看起来像这样：

```
1: 7     // <-- Works as expected.
2: 7
3: 15    // <-- Here I'd expected 2 groups matching: (13,14), (15,16)
4: 16    // <-- but I'm only getting the last group.
1: 8     // <-- This works and the remainder is as expected.
2: 8
3: 17
4: 18 
```

我似乎缺少匹配一个或多个`(?: - m: (\d+) t: (\d+))+`组合的内部组“13、14”。

在线测试：[http](http://gskinner.com/RegExr/?33urf) ://gskinner.com/RegExr/? 33urf，万一被宰了，我的数据是：`- st: 7 ov: 7 againothers: - m: 11 t: 12 - m: 13 t: 14 - m: 15 t: 16 - st: 8 ov: 8 againothers: - m: 17 t: 18`并且正则表达式是：`(?:- st: (\d+) ov: (\d+) againothers: ?(?: - m: (\d+) t: (\d+))+)+`。

我已阅读[http://www.regular-expressions.info/captureall.html](http://www.regular-expressions.info/captureall.html)，我认为我的问题与此有关？任何提示/指针/帮助，以便我可以匹配一个或多个 m:t: 组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:53:18.343

大多数正则表达式引擎不允许从重复组内的同一组括号中进行多次捕获。如果捕获括号多次匹配，您将得到最后匹配的结果。

最简单的解决方法是只为该子模式创建一个正则表达式，然后在每次匹配时获取结果。

换句话说，首先获取字符串的相关部分，然后在其上使用这样的正则表达式：

```
/ - m: (\d+) t: (\d+)/ 
```

（使用您的语言使用的任何机制来匹配*all*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:51:09.840

您的小组获得以下号码

```
^(?:- st: (\d+) ov: (\d+) againothers: ?(?: - m: (\d+) t: (\d+))+)+$
          1         2                            3        4 
```

它们由左括号编号。

如果此表达式现在再次匹配，则捕获组中的内容将被覆盖。

您正在[重复捕获组](http://www.regular-expressions.info/captureall.html)。

正如我在 .net 中所知，可以访问所有这些匹配项，但在所有其他正则表达式实现中，组内容被覆盖。

# jquery - jQuery 更改和选择

> ID：15136999
> 
> 赞同：2
> 
> 时间：2013-02-28T13:40:00.047
> 
> 标签：jquery, select

当我手动更改选择时，`$("select").change`事件按预期触发。但如果我通过 JavaScript 更改选择，它不会触发

小提琴：http: [//jsfiddle.net/72Lsw/](http://jsfiddle.net/72Lsw/)

为什么会发生这种情况以及如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:42:06.670

您将需要`change`使用以下代码通过代码触发事件：

```
$("select").val(rand_int);

// trigger change
$("select").trigger('change'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:42:17.883

通过 jQuery 设置选择的值**不会调用事件**：

```
$("select").val(rand_int); 
```

在 jQuery 中设置它之后，您需要自己调用它，如下所示：

```
$("select").val(rand_int).change(); 
```