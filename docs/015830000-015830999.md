# StackOverflow 问答 15830000-15830999

# jquery - jQuery图像在悬停时旋转

> ID：15830001
> 
> 赞同：0
> 
> 时间：2013-04-05T09:12:20.003
> 
> 标签：jquery, thumbnails

是否有机会在悬停时更改图像 src，最多计数 10 并从第一次返回？

这就是我需要的，这是默认拇指，**flv-3.jpg**！

```
<img src="/thumbs/e/b/d/6/d/ebd6d2d6d99e/ebd6d2d6d99e.flv-3.jpg" /> 
```

在鼠标悬停时只需要更改数字

*   flv-1.jpg
*   flv-2.jpg
*   flv-3.jpg
*   flv-4.jpg
*   ETC..

最多 10 个，然后再返回并从数字 1 开始，但是当我将鼠标从拇指移动时需要回到默认拇指 flv-3.jpg

这是我现在使用的，但不是很好的解决方案，

```
var _thumbs = new Array();
function changeThumb(index, i, num_thumbs, path)
{
    if (_thumbs[index])
    {         
        document.getElementById(index).src = path + i + ".jpg";

        preload = new Image();
        preload_image_id = (i + 1 > num_thumbs) ? 1 : i + 1;
        preload.src = path + preload_image_id + ".jpg";
        i = i % num_thumbs;
        i++;
        setTimeout("changeThumb('" + index + "'," + i + ", " + num_thumbs + ", '" + path + "')", 800)
    }
}    
function startThumbChange(index, num_thumbs, path)
{    
    if (num_thumbs < 2) return false;
    _thumbs[index] = true;
    changeThumb(index, 1, num_thumbs, path);
}
function endThumbChange(index, image)
{
    _thumbs[index] = false;
    document.getElementById(index).src = image;
} 
```

和 html

```
<img onmouseout="endThumbChange('515e9279d96c6', '/thumbs/e/b/d/6/d/ebd6d2d6d99e/ebd6d2d6d99e.flv-3.jpg');" onmouseover="startThumbChange('515e9279d96c6', '10', '/thumbs/e/b/d/6/d/ebd6d2d6d99e/ebd6d2d6d99e.flv-','.jpg');" id="515e9279d96c6" src="/thumbs/e/b/d/6/d/ebd6d2d6d99e/ebd6d2d6d99e.flv-3.jpg" class="img"> 
```

并且还可以在更改拇指时添加淡入淡出等效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:13:58.437

变种计时器；

```
$('div.settingsButton').hover(function() {

var angle = 0,
    $this = $(this);

timer = setInterval(function() {
    angle += 4;
    $this.rotate(angle);
}, 50);
},
function() {

timer && clearInterval(timer);
$(this).rotate(0); 
```

这里的[小提琴](http://jsfiddle.net/ptJuU/)

# php - PHP列表到数组到foreach Joomla模块

> ID：15830005
> 
> 赞同：0
> 
> 时间：2013-04-05T09:12:37.687
> 
> 标签：php, arrays, joomla, foreach

我有以下 PHP，它需要获取文章 ID 列表并通过一个函数运行它以从数据库中获取它们。

到目前为止，我是 PHP 的初学者，我有：

```
list($slide1, $slide2, $slide3, $slide4, $slide5) = explode(" ", $params->get('id'));

$a = array(
    $item => $slide1,
    "two" => $slide2,
//    "three" => $slide3,
//    "four" => $slide4,
//  "five" => $slide5
);

foreach ($a as $k) {
    $args['id'] = $k;
    $item = ModArticleSlider::getArticles($args);
} 
```

和班级：

```
class ModArticleSlider {

    public function getArticles($args){
        $db = &JFactory::getDBO();
        $item = "";

        $id = $args['id'];
        if($id > 0){

            $query  = "select * ";
            $query .= "FROM #__content  WHERE id =".$id." AND state=1 " ;

            //echo $query;
            $db->setQuery($query);
            $item = $db->loadObject();
        }

        return $item;
    }

} 
```

我将如何得到它，而不是指定 $item 让它几乎是动态的，以便我可以获得所有选定的文章并将它们放在不同的变量中..或者我必须将它们放在一个数组中？

非常感谢任何建议/答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:03:11.120

另一种方法，可能更高效，因为它只需要一个数据库查询（而不是每篇文章一个），将使用[http://docs.joomla.org/JDatabase::loadObjectList](http://docs.joomla.org/JDatabase::loadObjectList)

因此，您可以改为将您的文章 ID 数组作为 $ids 传递给您的类，例如：

```
public function getArticles($ids){

    if ($ids) {
        $db    = JFactory::getDbo();
        $query = "SELECT * FROM #__content  WHERE id IN (" . implode(',', $id) . ")  AND state=1 " ;
        $db->setQuery($query);
        $rows = $db->loadObjectList();

        return $rows;
    }

    return FALSE;
} 
```

$rows 作为数组返回，因此您可以根据需要对其进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:23:11.943

我也是PHP的初学者。请试试这个：

```
foreach ($a as $k => $val) {
    $args = $val;
    $item[] = ModArticleSlider::getArticles($args);
    var_dump($item);
} 
```

在你的课上

简单地

```
$id = $args; 
```

我希望它会帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:33:30.007

将文章存储到数组中，你可以试试这个：

```
$slides = explode(" ", $params->get('id'));
$articleArray = array();
foreach($slides as $slide) {
    $articleArray[] = ModArticleSlider::getArticles($slide);
}

var_dump($articleArray); 
```

# c# - 以编程方式将 MultiTrigger 添加到 ContentControl 子类

> ID：15830006
> 
> 赞同：0
> 
> 时间：2013-04-05T09:12:41.343
> 
> 标签：c#, wpf, triggers

一切正常，直到我调用 this.Triggers.Add(TriggerFocus)。此类是 ContentControl 的子类。

这是我的代码：

```
private void CreateTriggers()
    {
        TriggerFocus = new MultiTrigger
        {
            Conditions = 
            {
                new Condition
                {
                    Property = IsFocusedProperty,
                    Value = true
                },
                new Condition
                {                                                    
                    Property = IsKeyboardFocusedProperty,
                    Value = true
                }
            },
            Setters =
            {
                new Setter
                {
                    Property = SetFocusProperty,
                    Value = true
                },
            }
        };

        this.Triggers.Add(TriggerFocus);
    } 
```

有任何想法吗？

这是等效的 xaml，它也会引发错误：

```
<ContentControl.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="ContentControl.IsFocused" Value="True"/>
                    <Condition Property="ContentControl.IsKeyboardFocused" Value="True"/>
                </MultiTrigger.Conditions>
                <Setter TargetName="BorderFocus" Property="ContentControl.Visibility" Value="Visible" />
            </MultiTrigger>
        </ContentControl.Triggers> 
```

经过一些测试，我已将问题隔离到上面的 MultiTrigger 上。如果我将触发器放在模板或样式中，它似乎工作正常。

抛出的错误信息不是很丰富：“System.Windows.Controls.ContentControl”的初始化引发了异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:28:15.340

您只能将 EventTriggers 放入`<ContentControl.Triggers>`集合中。

# ffmpeg - 从 Adob e Flash 容器中解析 rtmp 流 url

> ID：15830007
> 
> 赞同：2
> 
> 时间：2013-04-05T09:12:43.393
> 
> 标签：ffmpeg, flash, live-streaming

如何使用其播放路径完全检索 rtmp 流 url 并使用 flash 插件中的 ffplay/avconv 播放。在 rtmp 地址 exits (rtmp://live.atv.com.tr/atv) 下面的嵌入式闪存代码中，但它不适用于 avplay，因为它需要播放路径。

```
<param value="config={"key":"#@c67bf4e753034f78950","play":{"display":"none"},"clip":{"eventCategory":"Canli Yayin","url":"atv3","live":true,"provider":"influxis"},"plugins":{"controls":{"url":"http://i.tmgrup.com.tr/p/flowplayer.controls.swf"},"influxis":{"url":"http://i.tmgrup.com.tr/p/flowplayer.rtmp.swf","netConnectionUrl":"rtmp://live.atv.com.tr/atv"},"ova":{"url":"http://i.tmgrup.com.tr/p/ova.swf","autoPlay":true,"overlays":{"regions":[{"id":"Reklam","verticalAlign":"bottom","horizontalAlign":"right","backgroundC...0,"style":".smalltext { font-style: italic; font-size:10; }"}]},"ads":{"notice":{"show":true,"region":"my-ad-notice","message":"<p class=\"smalltext\" align=\"right\"> Kalan süre : _countdown_ saniye.</p>"},"schedule":[{"zone":"5","position":"pre-roll","server":{"type":"direct","apiAddress":"http%3a%2f%2fad.reklamport.com%2frpgetad.ashx%3ftt%3dt_atv_canli_yayin_preroll_800x700%26vast%3d2"}}]}}},"playerId":"live","playlist":[{"eventCategory":"Canli Yayin","url":"atv3","live":true,"provider":"influxis"}]}" name="flashvars"> 
```

已解决的问题：使用wireshark（网络分析器）更有效地检索rtmp url，playpath等参数...之后。

# wpf - MVVM 和 VM 集合

> ID：15830008
> 
> 赞同：50
> 
> 时间：2013-04-05T09:12:52.567
> 
> 标签：wpf, mvvm, collections, viewmodel

一个常见的场景：具有项目模型集合的模型。
例如，一个有一群人的房子。

**如何为 MVVM 正确构建这个结构 - 特别是关于通过添加和删除更新 Model 和 ViewModel 集合？**

模型`House`包含模型的集合`People`（通常是 a `List<People>`）。
视图模型`HouseVM`包含它包装的 House 对象和视图模型的 ObservableCollection `PeopleVM`( `ObservableCollection<PeopleVM>`)。请注意，我们最终会看到 HouseVM 持有两个集合（需要同步）：
1\. `HouseVM.House.List<People>`
2.`HouseVM.ObservableCollection<PeopleVM>`

当 House 更新为新人员（添加）或人员离开（删除）时，现在必须在 Model House People 集合**和**VM HouseVM PeopleVM ObservableCollection 两个集合中处理该事件。

**这个结构是正确的 MVVM 吗？
有没有办法避免对添加和删除进行双重更新？**

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-05T10:04:15.730

您的一般方法是非常好的 MVVM，让 ViewModel 公开其他 ViewModel 的集合是一种非常常见的场景，我到处都在使用它。我不建议直接在 ViewModel 中公开项目，就像 nicodemus13 说的那样，因为您最终会将视图绑定到模型，而在您的集合项目之间没有 ViewModels。所以，第一个问题的答案是：是的，这是有效的 MVVM。

您在第二个问题中解决的问题是房屋模型中的人物模型列表与房屋 ViewModel 中的人物 Vie​​wModel 列表之间的同步。您必须手动执行此操作。所以，没有没有办法避免这种情况。

![在此处输入图像描述](https://i.stack.imgur.com/29Z8S.png)

您可以做什么：实现一个自定义`ObservableCollection<T>`, `ViewModelCollection<T>`，它将更改推送到基础集合。要获得双向同步，请将模型的集合也设为 ObservableCollection<> 并注册到`CollectionChanged`ViewModelCollection 中的事件。

这是我的实现。它使用 ViewModelFactory 服务等，但请看一下一般主体。我希望它有帮助...

```
/// <summary>
/// Observable collection of ViewModels that pushes changes to a related collection of models
/// </summary>
/// <typeparam name="TViewModel">Type of ViewModels in collection</typeparam>
/// <typeparam name="TModel">Type of models in underlying collection</typeparam>
public class VmCollection<TViewModel, TModel> : ObservableCollection<TViewModel>
    where TViewModel : class, IViewModel
    where TModel : class

{
    private readonly object _context;
    private readonly ICollection<TModel> _models;
    private bool _synchDisabled;
    private readonly IViewModelProvider _viewModelProvider;

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="models">List of models to synch with</param>
    /// <param name="viewModelProvider"></param>
    /// <param name="context"></param>
    /// <param name="autoFetch">
    /// Determines whether the collection of ViewModels should be
    /// fetched from the model collection on construction
    /// </param>
    public VmCollection(ICollection<TModel> models, IViewModelProvider viewModelProvider, object context = null, bool autoFetch = true)
    {
        _models = models;
        _context = context;

        _viewModelProvider = viewModelProvider;

        // Register change handling for synchronization
        // from ViewModels to Models
        CollectionChanged += ViewModelCollectionChanged;

        // If model collection is observable register change
        // handling for synchronization from Models to ViewModels
        if (models is ObservableCollection<TModel>)
        {
            var observableModels = models as ObservableCollection<TModel>;
            observableModels.CollectionChanged += ModelCollectionChanged;
        }

        // Fecth ViewModels
        if (autoFetch) FetchFromModels();
    }

    /// <summary>
    /// CollectionChanged event of the ViewModelCollection
    /// </summary>
    public override sealed event NotifyCollectionChangedEventHandler CollectionChanged
    {
        add { base.CollectionChanged += value; }
        remove { base.CollectionChanged -= value; }
    }

    /// <summary>
    /// Load VM collection from model collection
    /// </summary>
    public void FetchFromModels()
    {
        // Deactivate change pushing
        _synchDisabled = true;

        // Clear collection
        Clear();

        // Create and add new VM for each model
        foreach (var model in _models)
            AddForModel(model);

        // Reactivate change pushing
        _synchDisabled = false;
    }

    private void ViewModelCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        // Return if synchronization is internally disabled
        if (_synchDisabled) return;

        // Disable synchronization
        _synchDisabled = true;

        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:
                foreach (var m in e.NewItems.OfType<IViewModel>().Select(v => v.Model).OfType<TModel>())
                    _models.Add(m);
                break;

            case NotifyCollectionChangedAction.Remove:
                foreach (var m in e.OldItems.OfType<IViewModel>().Select(v => v.Model).OfType<TModel>())
                    _models.Remove(m);
                break;

            case NotifyCollectionChangedAction.Reset:
                _models.Clear();
                foreach (var m in e.NewItems.OfType<IViewModel>().Select(v => v.Model).OfType<TModel>())
                    _models.Add(m);
                break;
        }

        //Enable synchronization
        _synchDisabled = false;
    }

    private void ModelCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (_synchDisabled) return;
        _synchDisabled = true;

        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:
                foreach (var m in e.NewItems.OfType<TModel>()) 
                    this.AddIfNotNull(CreateViewModel(m));
                break;

            case NotifyCollectionChangedAction.Remove:
                    foreach (var m in e.OldItems.OfType<TModel>()) 
                        this.RemoveIfContains(GetViewModelOfModel(m));
                break;

            case NotifyCollectionChangedAction.Reset:
                Clear();
                FetchFromModels();
                break;
        }

        _synchDisabled = false;
    }

    private TViewModel CreateViewModel(TModel model)
    {
        return _viewModelProvider.GetFor<TViewModel>(model, _context);
    }

    private TViewModel GetViewModelOfModel(TModel model)
    {
        return Items.OfType<IViewModel<TModel>>().FirstOrDefault(v => v.IsViewModelOf(model)) as TViewModel;
    }

    /// <summary>
    /// Adds a new ViewModel for the specified Model instance
    /// </summary>
    /// <param name="model">Model to create ViewModel for</param>
    public void AddForModel(TModel model)
    {
        Add(CreateViewModel(model));
    }

    /// <summary>
    /// Adds a new ViewModel with a new model instance of the specified type,
    /// which is the ModelType or derived from the Model type
    /// </summary>
    /// <typeparam name="TSpecificModel">Type of Model to add ViewModel for</typeparam>
    public void AddNew<TSpecificModel>() where TSpecificModel : TModel, new()
    {
        var m = new TSpecificModel();
        Add(CreateViewModel(m));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T09:24:24.060

在这种情况下，我只是让模型暴露`ObservableCollection`s 而不是`List`s。没有特别的理由不应该这样做。它`ObservableCollection`位于程序集的`System.Collections.ObjectModel`命名空间中`System`，因此没有不合理的额外依赖项，`System`无论如何你几乎肯定有。 `List`在 中`mscorlib`，但这与任何东西一样都是历史文物。

这极大地简化了模型-视图模型的交互，我看不出不这样做的理由，`List`在模型上使用 s 只会创建许多令人不快的样板代码。毕竟，您对这些事件感兴趣。

另外，为什么你`HouseVM`包装的是`ObservableCollection<PeopleVM>`, 而不是 `ObservableCollection<People>`? 虚拟机用于绑定到视图，所以我认为绑定到您的任何`ObservableCollection<PeopleVM>`内容实际上都对 感兴趣`People`，否则您是绑定在绑定中，或者是否有特定原因为什么这很有用？我通常不会让 VM 公开其他 VM，但也许这只是我。

**编辑关于库/WCF**

我不明白为什么在库中有模型，甚至由 WCF 服务器公开会影响它们是否引发事件，这对我来说似乎完全有效（显然 WCF 服务不会直接公开事件） . 如果您不喜欢这样，我认为您不得不链接多个更新，但我想知道您是否实际上只是手动执行与事件相同的工作`ObservableCollection`，除非我误解了一些它。

就个人而言，就像我说的那样，我会保持 VM 简单，并让它们暴露最低限度，而不是暴露其他 VM。它可能需要一些重新设计并使某些部分有点痛苦（例如`Converter`，但是，您最终会得到一个简单，易于管理的设计，边缘有一些易于处理的刺激。

在我看来，您当前的路线很快就会变得非常复杂，最重要的是，很难遵循……但是，YMMV，这只是我的经验:)

也许将一些逻辑转移到显式服务可能会有所帮助？

# sql - 想要将动态 PL/SQL 查询转换为静态查询

> ID：15830009
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:12:52.427
> 
> 标签：sql, oracle, plsql

在我的项目中，有一个冗长的动态查询，如下所示 -

```
basic_query varchar2(1000);
final_query varchar2(1500);
where_clause varchar2(500) default null;

basic_query :=<select ...from table where ....>

If(<condition1>)
    then 
    where_clause := <one_new_condition_will_be_added_in_where_clause1>
elsif(<condition2>)
    then 
    where_clause := <one_new_condition_will_be_added_in_where_clause2>
elsif(<condition3>)
    then 
    where_clause := <one_new_condition_will_be_added_in_where_clause3>
else  
    where_clause := <one_new_condition_will_be_added_in_where_clause4>
endif;

final_query :=basic_query || where_clause || '<group_by_clause'> || <'order_by_clause'>;

execute immediate final_query; 
```

现在我的客户想要将此动态查询转换为静态查询。我已经尝试过使用 CASE，但它不能正常工作。

```
select ...from table where condition1,and 
case(
when(<condition1> and <one_new_condition_will_be_added_in_where_clause1>)
    then 'valid'
when(<condition2> and <one_new_condition_will_be_added_in_where_clause2>
    then 'valid'
when(<condition1> and <one_new_condition_will_be_added_in_where_clause3>)
    then 'valid'
when(<condition2> and <one_new_condition_will_be_added_in_where_clause4>
        then 'valid'
    else 'invalid'
end;)='valid 
```

它正在检查 CASE 子句中给出的条件，如果其中任何一个为真，它会给出输出而不在 where 子句中添加这些条件。

希望有人能理解这个问题并给出解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:08:29.257

正如我在评论中所说，原则上使用`case`你所展示的应该有效（我所说的“工作”是指产生相同的结果；这并不一定意味着它会更好，并且可能会对性能和维护产生影响等）。为了演示，我将创建一些虚拟数据：

```
create table t42 (flag varchar2(1), value varchar2(10), cond number);
insert into t42 values ('Y', 'One', 1);
insert into t42 values ('Y', 'Two', 2);
insert into t42 values ('Y', 'Three', 3); 
```

...和一个包中的两个程序：

```
create package p42 as
procedure proc1(parm number);
procedure proc2(parm number);
end p42;
/

create package body p42 as

procedure proc1(parm number) is
    basic_query varchar2(1000);
    final_query varchar2(1500);
    where_clause varchar2(500) default null;
    result t42.value%type;
begin
    basic_query := 'select value from t42 where flag = ''Y'' ';

    if parm = 2013 then
        where_clause := 'and cond = 1 ';
    elsif parm = 2012 then
        where_clause := 'and cond = 2 ';
    else
        where_clause := 'and cond = 3 ';
    end if;

    final_query := basic_query || where_clause;
    execute immediate final_query into result;
    dbms_output.put_line(result);
end proc1;

procedure proc2(parm number) is
    result t42.value%type;
begin
    select value into result from t42 where flag = 'Y'
    and case
        when parm = 2013 and cond = 1 then 'valid'
        when parm = 2012 and cond = 2 then 'valid'
        when not (parm = 2013 or parm = 2012) and cond = 3 then 'valid'
        else 'invalid' end = 'valid';
    dbms_output.put_line(result);
end proc2;

end p42;
/ 
```

我`proc1`相信，本质上就是在做你原来的动态查询所做的事情。`proc2`正在使用您的`case`构造。显然条件是完全组成的，并且可变`where`子句在这种形式下会很愚蠢，但这只是关于`case`.

使用 parm (2013, 2012, 2011) 的各种值运行会在两个过程中返回相同的行，因此它们在这个意义上是等效的

```
exec p42.proc1(2013);

One

exec p42.proc2(2013);

One 
```

我怀疑你的最终条件是错误的。当然我猜，因为您发布的伪代码到目前为止已从您的实际查询中删除，我们无法看到您可能做错了什么。但是如果你做了这样的事情：

```
 and case
        when parm = 2013 and cond = 1 then 'valid'
        when parm = 2012 and cond = 2 then 'valid'
        when cond = 3 then 'valid'
        else 'invalid' end = 'valid'; 
```

... then`cond = 3`将针对先前案例中尚未匹配的所有行进行评估，而不管`parm`- 例如 if`parm = 2013`和的值`cond = 3`，您的原始动态版本不会拾取。与`2013`你匹配`One`and `Three`。因此，您需要排除`parm`之前用作条件的所有值，然后再查看`cond = 3`：

```
 and case
        when parm = 2013 and cond = 1 then 'valid'
        when parm = 2012 and cond = 2 then 'valid'
        when not (parm = 2013 or parm = 2012) and cond = 3 then 'valid'
        else 'invalid' end = 'valid'; 
```

所以在你的伪代码中，这可能意味着：

```
select ... from table where condition1 and  case
    when (<condition1> and <one_new_condition_will_be_added_in_where_clause1>)
        then 'valid'
    when (<condition2> and <one_new_condition_will_be_added_in_where_clause2>
        then 'valid'
    when (<condition3> and <one_new_condition_will_be_added_in_where_clause3>)
        then 'valid'
    when (not (<condition1> or <condition2> or <condition3>)
        and <one_new_condition_will_be_added_in_where_clause4>)
        then 'valid'
    else 'invalid'
end = 'valid' 
```

我不一定说这是一个好主意，只是说它应该可以工作。不知道为什么您的客户端反对动态 SQL（所有这些？查询的某些特定方面？您对数据库的一些影响，例如通过不使用绑定变量？）以及您的真实查询在做什么是不可能知道的如果这种方法合适的话。可能有更好的方法，这可能是我们所知道的改进动态版本......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:59:30.687

我建议您在代码中使用 PL/SQL 函数。

```
select ...from table where 'Y' = IsRecordValid(...all relevant values in conditions...); 
```

并在那里实施评估。我不确定您对性能的考虑，但您可能对基于函数的索引感兴趣以提高您的性能。

其他方法是使用**dbms_sql**包，您可以使用它来创建动态 SQL，但几乎保留了静态查询的所有优点。

# python - Python ctypes。如何将 IN LPVOID 传递给 C++ 函数

> ID：15830012
> 
> 赞同：1
> 
> 时间：2013-04-05T09:12:58.610
> 
> 标签：python, ctypes

我正在尝试使用 ctypes 将字符串传递给 C++ 函数，并得到一个作为回报。函数声明为：

```
BOOL PERFORMAXCOM_API _stdcall SendReceive(IN HANDLE pHandle, 
                          IN LPVOID wBuffer,
                          IN DWORD dwNumBytesToWrite,
                          IN DWORD dwNumBytesToRead,
                          OUT LPVOID rBuffer) 
```

`HANDLE`我对和`DWORD`变量很满意，并且通过`OUT LPVOID`以下设置实现了类似的功能：

```
szReplyBuffer = create_string_buffer(64)
ReplyBuffer = c_char_p(addressof(szReplyBuffer)) 
```

当与类似的一起使用时，它会`OUT LPVOID`得到一个字符串。

我目前`IN LPVOID`从输入的字符串`cmdStr`（例如“E0 = 1”）创建的方法是：

```
szSendStr = c_char * 64
SendStr = szSendStr()

for i in range(len(cmdStr)):
    SendStr[i] = cmdStr[i] 
```

然后我使用以下声明将其传递给函数： `Status = SendReceive(byref(hUSBDevice), c_void_p(addressof(SendStr)), 64, 64, ReplyBuffer)`

我已经尝试了许多不同的将 传递给函数的排列`SendStr`，但从来没有通过空字符串返回任何东西`ReplyBuffer`。有没有办法传递我缺少的字符串？

谢谢

劳伦斯

# iphone - 如何在 PhoneGap 中创建 viewController 以使用主视图

> ID：15830016
> 
> 赞同：0
> 
> 时间：2013-04-05T09:13:06.013
> 
> 标签：iphone, ios, cordova

我想用`[UIDocumentInteractionController presentPreviewAnimated]`;打开文件

我已经创建了视图控制器

```
@interface FileViewController : UIViewController <UIDocumentInteractionControllerDelegate>

    @end

#import "FileViewController.h"

@interface FileViewController ()

@end

@implementation FileViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}   

- (UIViewController *) documentInteractionControllerViewControllerForPreview:(UIDocumentInteractionController *)controller {
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

并尝试预览文件

```
UIDocumentInteractionController *controller = [UIDocumentInteractionController  interactionControllerWithURL:fileURL];
vController = [[FileViewController alloc] init];
controller.delegate = vController;
[controller presentPreviewAnimated:YES]; 
```

并得到错误：

```
Warning: Attempt to present <QLPreviewController: 0x1e56e0a0> on <FileViewController: 0x1ec3e000> whose view is not in the window hierarchy! 
```

我可以设置根视图控制器

```
[[[[UIApplication sharedApplication] delegate] window] setRootViewController:vController]; 
```

但我不想使用新视图。我需要使用PhoneGap 的主视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:12:34.097

问题已经解决了

```
CDVViewController* mainController = (CDVViewController*)[ super viewController ]; 
[mainController addChildViewController:vController]; 
```

# printf - 使用 printf 的 atmel 传感器

> ID：15830019
> 
> 赞同：2
> 
> 时间：2013-04-05T09:13:10.700
> 
> 标签：printf, sensors, atmel

我有一个 atmel UC3-L0 和指南针传感器。现在我安装 AtmelStudio 并将一些演示代码下载到板上。但我不知道`printf`演示代码中的函数会在哪里出现数据。我该怎么做才能获取数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:51:41.147

printf 函数输出到标准输出。

通常在没有操作系统的“裸”处理器上，您需要定义如何从物理接口（通常是 USART、控制台端口、USB 端口、4 端口 LCD 接口等）发送或接收字符。因此，通常您可能希望使用处理器板的 USART 端口使用串行电缆连接到运行 Hyperterm、PuTTY 或类似设备的 PC。

本质上，您将需要

*   使用宏创建`FILE`流和`fdev_setup_stream()`
*   提供指向函数的指针`get()`并`put()`告诉`printf()`函数如何准确地从/向该流读取和写入（例如读取/写入到 USART、LCD 显示器等）。
*   您可能有库 - 取决于您的硬件 - 已经包含此类功能（加上正确的端口初始化功能），例如 uart.c/.h、lcd.c/.h 等。

在 stdio.h 的文档中（例如[此处](http://www.gnu.org/savannah-checkouts/non-gnu/avr-libc/user-manual/group__avr__stdio.html)）查找以下内容 `printf()`：`fdev_setup_stream()`

如果您已经下载了 Atmel Studio，您可以查看 stdiodemo.c 代码以获得进一步的了解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-01T17:02:20.713

为了在 ATMEL studio 中使用 printf，您应该检查以下事项：

1.  从 Project->ASF Wizard 添加并应用标准串行 I/O 模块。
2.  还可以从 ASF 向导添加 USART 模块。
3.  在 main 函数之前包含以下代码片段。

> ```
>  static struct usart_module usart_instance; 
>       static void configure_console(void)
>     {
>       struct usart_config usart_conf;
>       usart_get_config_defaults(&usart_conf);
>       usart_conf.mux_setting = EDBG_CDC_SERCOM_MUX_SETTING;
>       usart_conf.pinmux_pad0 = EDBG_CDC_SERCOM_PINMUX_PAD0;
>       usart_conf.pinmux_pad1 = EDBG_CDC_SERCOM_PINMUX_PAD1;
>       usart_conf.pinmux_pad2 = EDBG_CDC_SERCOM_PINMUX_PAD2;
>       usart_conf.pinmux_pad3 = EDBG_CDC_SERCOM_PINMUX_PAD3;
>       usart_conf.baudrate    = 115200;
> 
>       stdio_serial_init(&usart_instance, EDBG_CDC_MODULE, &usart_conf);
>       usart_enable(&usart_instance);
>     } 
> ```

4.  确保在 main 函数的 system_init() 之后调用 configure_console。

5.  现在转到工具-> 扩展管理器。添加终端窗口扩展。

6.  构建并运行您的程序并从视图-> 终端窗口打开终端窗口。放置您的设备正在运行的正确 com 端口并将波特率设置为 115200 并点击终端窗口上的连接。
7.  您现在应该看到 printf 语句。（浮点数不会在 Atmel 工作室打印）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T23:35:33.593

我最近自己也对此感到困惑。我已经安装了 Atmel Studio 7.0，并通过一个调用 printf 的示例项目使用了 SAMD21 开发板。

在示例代码中，我看到有一个配置部分：

```
/*!
 * \brief Initialize USART to communicate with on board EDBG - SERCOM 
 * with the following settings.
 * - 8-bit asynchronous USART
 * - No parity
 * - One stop bit
 * - 115200 baud
 */ 
static void configure_usart(void)
{
    struct usart_config config_usart;
    // Get the default USART configuration
    usart_get_config_defaults(&config_usart);
    // Configure the baudrate
    config_usart.baudrate = 115200;
    // Configure the pin multiplexing for USART
    config_usart.mux_setting = EDBG_CDC_SERCOM_MUX_SETTING;
    config_usart.pinmux_pad0 = EDBG_CDC_SERCOM_PINMUX_PAD0;
    config_usart.pinmux_pad1 = EDBG_CDC_SERCOM_PINMUX_PAD1;
    config_usart.pinmux_pad2 = EDBG_CDC_SERCOM_PINMUX_PAD2;
    config_usart.pinmux_pad3 = EDBG_CDC_SERCOM_PINMUX_PAD3;
    // route the printf output to the USART
    stdio_serial_init(&usart_instance, EDBG_CDC_MODULE, &config_usart);
    // enable USART
    usart_enable(&usart_instance);
} 
```

在 Windows 设备管理器中，我看到“端口”下列出了“Atmel Corp. EDBG USB 端口 (COM3)”。但是，该端口的“属性”之一被列为每秒 9600 位。我将其从 9600 更改为 115200 以与上面的配置部分保持一致。

最后，我运行 PuTTY.exe 并将 Connection-->Serial 设置为 COM3 和 115200 波特。然后我去会话，然后单击串行连接类型，然后单击打开按钮。而且，BAM，还有我通过 PuTTY 输出的 printf。

# email - 是否可以在我们获得“READ”、“DELETED”、“SOFT BOUNCE”、“HARD BOUNCE”计数的范围内跟踪电子邮件？

> ID：15830020
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:13:14.633
> 
> 标签：email, email-validation

标题不言自明，我想补充几点。

1.首先，是否可以在不使用第三方 API 的情况下跟踪所有这些（读取、删除、软弹跳、硬弹跳）？2\. 如果不是，哪些第三方服务为您提供相同的服务？

我知道`<img src="send-identifiers-to-this-url-to-track"/>`，但这只能让我获得“读取/转发次数”，但不会被删除。

有人在寻求帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:26:18.040

您可以使用自己的软件而不是第三方来检测许多东西，但我不知道它们如何映射到您列出的类别：

1.  跟踪图像和链接，就像你说的（阅读）。
2.  没有邮件服务器接收消息，例如域可能没有任何 MX 记录，或者您的邮件服务器 IP 可能被 DNSBL 阻止（也许您所说的 HARD BOUNCE 是什么意思？）
3.  [邮件服务器响应代码](http://www.aspiresoft.com/email-server-status-codes/)。例如，这可能会告诉您：
    1.  您的电子邮件被拒绝，因为邮箱容量过大等（可能是 SOFT BOUNCE）
    2.  被拒绝，因为它是垃圾邮件（可能是 HARD BOUNCE）
    3.  灰名单之类的（可能是 SOFT BOUNCE）

但是，您基本上无法检测未读和已删除消息之间的区别。第三方服务也是如此。除非您的收件人打开跟踪图像或单击跟踪链接，否则您甚至不会检测到已读邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-06T21:36:54.273

获取这些信息非常困难，例如，我必须实现一个[后缀日志分析器](https://github.com/FgForrest/Postfix-Deliverability-Analytics)，该分析器正在挖掘反弹信息（软/硬）以及它们发生的原因，并通过 API 以结构化形式提供。

# android - 带有字符串 xml + 格式错误的 Sax 解析器

> ID：15830024
> 
> 赞同：0
> 
> 时间：2013-04-05T09:13:19.060
> 
> 标签：android

我正在尝试从 xml 字符串中读取数据并使用 setter getter 方法设置相应的标记元素，但我的 xml 在 xml 文件中显示格式错误。我在这里做错了什么是我的代码。

在 oncreate..

```
 SAXHelper2 sh = null;

    try {

        sh = new SAXHelper2(newxml);

    } catch (MalformedURLException e) {
        e.printStackTrace();
    }

     sh.parseContent("");

    return null; 
} 
```

}

```
 /* 
 * 
 */

class SAXHelper2 {

    private String data;
    StringBuffer chars = new StringBuffer();

    public SAXHelper2(String xmlstring) throws MalformedURLException {
        this.data = new String(xmlstring);
    }

    DefaultHandler handler = new DefaultHandler();

    public RSSHandler parseContent(String parseContent) {
        RSSHandler df = new RSSHandler();

        try {

            SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser saxParser = factory.newSAXParser();
    saxParser.parse(new InputSource(newxml), new RSSHandler());

        } catch (Exception e) {
            e.printStackTrace();
        }

        return df;
    }

    class RSSHandler extends DefaultHandler {

        private ComptePost currentPost = new ComptePost();

        StringBuffer chars = new StringBuffer();

        public void startElement(String uri, String localName, String qName, Attributes atts) {

            chars = new StringBuffer();
            if (localName.equalsIgnoreCase("comptes")) {

            }
        }

     DefaultHandler handler = new DefaultHandler() {

        @Override
        public void endElement(String uri, String localName, String qName)
                throws SAXException {

            if (localName.equalsIgnoreCase("numCompte")
                    && currentPost.getNumComtpe() == null) {
                System.out.println("Post: "+currentPost.getNumComtpe());
                Log.i("numCompte", currentPost.getNumComtpe());
                currentPost.setNumComtpe(chars.toString());

            }
            if (localName.equalsIgnoreCase("authCompte")
                    && currentPost.getAuthCompte() == null) {
                currentPost.setAuthCompte(chars.toString());

            }
            if (localName.equalsIgnoreCase("typeCompte")
                    && currentPost.getTypeCompte() == null) {
                currentPost.setTypeCompte(chars.toString());

            }
            if (localName.equalsIgnoreCase("libelleCompte")
                    && currentPost.getLibelleCompte()== null) {
                currentPost.setLibelleCompte(chars.toString());
            }

            if (localName.equalsIgnoreCase("soldeCompte")
                    && currentPost.getSoldeCompte() == null) {
                currentPost.setSoldeCompte(chars.toString());
            }

            if (localName.equalsIgnoreCase("deviseCompte")
                    && currentPost.getDeviseCompte() == null) {
                currentPost.setDeviseCompte(chars.toString());

            }
            if (localName.equalsIgnoreCase("dateSolde")
                    && currentPost.getDateSolde()== null) {
                currentPost.setDateSolde(chars.toString());
            }

            if (localName.equalsIgnoreCase("droitVirement")
                    && currentPost.getDroitVirement()== null) {
                currentPost.setDroitVirement(chars.toString());
            }

            if (localName.equalsIgnoreCase("carteBancaire")
                    && currentPost.getCarteBancaire()== null) {
                currentPost.setCarteBancaire(chars.toString());
            }

            if (localName.equalsIgnoreCase("debitMin")
                    && currentPost.getDebitMin()== null) {
                currentPost.setDebitMin(chars.toString());
            }

            if (localName.equalsIgnoreCase("debitMax")
                    && currentPost.getDebitMax()== null) {
                currentPost.setDebitMax(chars.toString());
            }

            if (localName.equalsIgnoreCase("creditMin")
                    && currentPost.getCreditMin()== null) {
                currentPost.setCreditMin(chars.toString());
            }

            if (localName.equalsIgnoreCase("creditMax")
                    && currentPost.getCreditMax()== null) {
                currentPost.setCreditMax(chars.toString());
            }

            if (localName.equalsIgnoreCase("echeanceMax")
                    && currentPost.getEcheanceMax()== null) {
                currentPost.setEcheanceMax(chars.toString());
            }

            if (localName.equalsIgnoreCase("comptes")) {
                PostList.add(currentPost);
                currentPost = new ComptePost();
            }

        }

        @Override
        public void characters(char ch[], int start, int length) {
            chars.append(new String(ch, start, length));
        }

     };

    }

} 
```

java.io.IOException：无法打开原因：java.net.MalformedURLException：找不到协议：

```
04-05 15:24:52.699: W/System.err(4784):     at org.apache.harmony.xml.ExpatParser.openUrl(ExpatParser.java:760)
04-05 15:24:52.703: W/System.err(4784):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:289)
04-05 15:24:52.707: W/System.err(4784):     at javax.xml.parsers.SAXParser.parse(SAXParser.java:390)
04-05 15:24:52.707: W/System.err(4784):     at .details.CompteDetails$SAXHelper2.parseContent(CompteDetails.java:222)
04-05 15:24:52.707: W/System.err(4784):     at .details.CompteDetails$loadingTask.doInBackground(CompteDetails.java:193)
04-05 15:24:52.710: W/System.err(4784):     at .details.CompteDetails$loadingTask.doInBackground(CompteDetails.java:1)
04-05 15:24:52.710: W/System.err(4784):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-05 15:24:52.710: W/System.err(4784):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
04-05 15:24:52.714: W/System.err(4784):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
04-05 15:24:52.714: W/System.err(4784):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
04-05 15:24:52.714: W/System.err(4784):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
04-05 15:24:52.718: W/System.err(4784):     at java.lang.Thread.run(Thread.java:1019)
04-05 15:24:52.718: W/System.err(4784):     at java.net.URL.<init>(URL.java:273)
04-05 15:24:52.722: W/System.err(4784):     at java.net.URL.<init>(URL.java:157)
04-05 15:24:52.722: W/System.err(4784):     at org.apache.harmony.xml.ExpatParser.openUrl(ExpatParser.java:753) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:57:35.970

这将按预期工作

**类型.java**

```
package com.example.test;

public class Type
{
    private String lory;
    private String car;

    public String getLory()
    {
        return lory;
    }

    public void setLory(String lory)
    {
        this.lory = lory;
    }

    public String getCar()
    {
        return car;
    }

    public void setCar(String car)
    {
        this.car = car;
    }

    @Override
    public String toString()
    {
        return "Lory : " + this.lory + "\nCar : " + this.car;
    }

    public String getDetails()
    {
        String result = "Lory : " + this.lory + "\nCar : " + this.car;
        return result;
    }
} 
```

**SAXXMLHandler.java**

```
package com.example.test;

import java.util.ArrayList;
import java.util.List;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class SAXXMLHandler extends DefaultHandler
{
    private List<Type> types;
    private String tempVal;
    private Type tempType;

    public SAXXMLHandler()
    {
        types = new ArrayList<Type>();
    }

    public List<Type> getTypes()
    {
        return types;
    }

    // Event Handlers
    @Override
    public void startElement(String uri, String localName, String qualifiedName, Attributes attributes) throws SAXException
    {
        // reset
        tempVal = "";
        if ( qualifiedName.equalsIgnoreCase("data") )
        {
            // create a new instance of type
            tempType = new Type();
        }
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException
    {
        tempVal = new String(ch, start, length);
    }

    @Override
    public void endElement(String uri, String localName, String qualifiedName) throws SAXException
    {
        if ( qualifiedName.equalsIgnoreCase("type") )
        {
            // add it to the list and create new instance
            types.add(tempType);
            tempType = new Type();
        }
        else if ( qualifiedName.equalsIgnoreCase("lory") )
        {
            tempType.setLory(tempVal);
        }
        else if ( qualifiedName.equalsIgnoreCase("car") )
        {
            tempType.setCar(tempVal);
        }
    }
} 
```

**SAXXMLParser.java**

```
package com.example.test;

import java.io.InputStream;
import java.util.List;

import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import android.util.Log;

public class SAXXMLParser
{
    public static List<Type> parse(InputStream is)
    {
        List<Type> types = null;
        try
        {
            // create a XMLReader from SAXParser
            XMLReader xmlReader = SAXParserFactory.newInstance().newSAXParser().getXMLReader();
            // create a SAXXMLHandler
            SAXXMLHandler saxHandler = new SAXXMLHandler();
            // store handler in XMLReader
            xmlReader.setContentHandler(saxHandler);
            // the process starts
            xmlReader.parse(new InputSource(is));
            // get the `Type list`
            types = saxHandler.getTypes();
        }
        catch ( Exception ex )
        {
            Log.d("XML", "SAXXMLParser: parse() failed");
        }
        // return Type list
        return types;
    }
} 
```

**SAXParserActivity.java**

```
package com.example.test;

import java.io.ByteArrayInputStream;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class SAXParserActivity extends Activity implements OnClickListener
{
    Button button;
    List<Type> types = null;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        button = (Button) findViewById(R.id.button);
        button.setOnClickListener(this);
    }

    @Override
    public void onClick(View v)
    {
        String xml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?> <data> <type> <lory>vroom</lory> <car>crack</car> </type> <type> <lory>doom</lory> <car>chack</car> </type> </data>";
        types = SAXXMLParser.parse(new ByteArrayInputStream(xml.getBytes()));
        Log.d("SSDDSD", "Length : " + "" + types.size());
        for ( Type type : types )
        {
            Log.d("SAXParserActivity", type.toString());
            Toast.makeText(getApplicationContext(), type.toString(), Toast.LENGTH_SHORT).show();
        }
    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="10dip" >
    <Button
        android:id="@+id/button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Parse XML Using SAX" />
</LinearLayout> 
```

您可以在 LogCat 和 Toast 中看到输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T02:02:52.900

尝试使用 xmlPullParser 而不是 Sax！像这样：

```
import java.io.IOException; 
```

`import java.io.StringReader;`

`import org.xmlpull.v1.XmlPullParser;`

`import org.xmlpull.v1.XmlPullParserException;`

`import org.xmlpull.v1.XmlPullParserFactory;`

`public class XmlPullParserCdb {`

```
public static void parse(String dados) throws XmlPullParserException, IOException {
    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(true);
    XmlPullParser xpp = factory.newPullParser();

    xpp.setInput(new StringReader(dados));
    int eventType = xpp.getEventType();
    while (eventType != XmlPullParser.END_DOCUMENT) {
        if (eventType == XmlPullParser.START_DOCUMENT) {
            System.out.println("Start document");
        } else if (eventType == XmlPullParser.END_DOCUMENT) {
            System.out.println("End document");
        } else if (eventType == XmlPullParser.START_TAG) {
            System.out.println("Start tag " + xpp.getName());
        } else if (eventType == XmlPullParser.END_TAG) {
            System.out.println("End tag " + xpp.getName());
        } else if (eventType == XmlPullParser.TEXT) {
            System.out.println("Text " + xpp.getText());
        }
        eventType = xpp.next();
    }
} 
```

}

# entity-framework-5 - Database.SetInitializer 实际上是如何工作的？（EF 代码优先创建数据库并使用多个连接字符串应用迁移）

> ID：15830030
> 
> 赞同：4
> 
> 时间：2013-04-05T09:13:48.720
> 
> 标签：entity-framework-5, entity-framework-migrations

给定连接字符串，我正在尝试编写一种方法来创建数据库并在其上运行迁移。

我需要多个连接，因为我在单独的数据库中记录了审计日志。我使用类似的代码从 app.config 中获取连接字符串

```
ConfigurationManager.ConnectionStrings["Master"].ConnectionString; 
```

该代码适用于我的 app.config 中定义的第一个连接字符串，但不适用于其他代码，这让我认为它以某种我不知道的方式从 app.config 获取连接字符串。

如果数据库不存在，我创建数据库的代码是

```
private static Context MyCreateContext(string ConnectionString)
  {
   // put the connection string where the factory method can get it
   AppDomain.CurrentDomain.SetData("ConnectionString", ConnectionString );
   var factory = new ContextFactory();
   // I know I need this line - but I cant see how what follows actually uses it
   Database.SetInitializer(new MigrateDatabaseToLatestVersion<Context,DataLayer.Migrations.Configuration>());
   var context = factory.Create();
   context.Database.CreateIfNotExists(); 
   return context
   } 
```

Migrations.Configuration 中的代码是

```
Public sealed class Configuration :  DbMigrationsConfiguration<DataLayer.Context>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
    }
} 
```

上下文工厂代码是

```
 public class ContextFactory : IDbContextFactory<Context>
{
    public Context Create()
    {
        var s = (string)AppDomain.CurrentDomain.GetData("ConnectionString");

        return new Context(s);
    }
} 
```

因此，我在创建上下文之前设置了连接字符串。
考虑到除了数据库名称之外的连接字符串都相同，并且迁移代码使用一个连接字符串运行，但不使用其他连接字符串运行，我哪里会出错？

我想知道我的问题是否与了解 Database.SetInitializer 如何实际工作有关。我在猜测关于反射或泛型的一些事情。我如何使对 SetInitializer 的调用与我的实际上下文相关联？

我尝试了以下代码，但迁移不运行

```
 private static Context MyCreateContext(string ConnectionString)
    {
        Database.SetInitializer(new MigrateDatabaseToLatestVersion<Context, DataLayer.Migrations.Configuration>());
        var context = new Context(ConnectionString);
        context.Database.CreateIfNotExists();
    } 
```

[这个问题似乎是相关的](https://stackoverflow.com/questions/15504465/entityframework-code-first-custom-connection-string-and-migrations)

更新：

如果我使用 public MyContext() 引用连接字符串，我可以使迁移工作： base("MyContextConnection") - 指向配置

如果我创建了一个 ContextFactory 类并通过引用全局将连接传递给它，我还能够使用上下文的不同实例进行迁移。（请参阅我对相关问题链接的回答）

现在我想知道为什么它必须这么难。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T00:46:47.417

我不确定你面临的问题是什么，但让我试试

**提供连接的最简单方法**- 并确保它以这种方式工作......

1) `Use your 'DbContext' class name`- 并在 app.config（或 web.config）中定义连接。这是最简单的，你应该有一个与你的上下文类名匹配的连接，

2）如果您通过构造函数将其放入 DbContext - 然后保持一致并使用那个。我还建议从配置连接中“读取” - 并再次将其命名为与您的上下文类“相同”（使用连接“名称”，而不是实际字符串），

3）**如果不存在 - EF/CF 会**根据你的提供者 -**和你的上下文的类名**- 制作“默认” - 这通常不是你想要的，

> 出于这个原因，您不应该使用初始化程序进行自定义 - 初始化程序应该是不可知的并用于其他目的 - 在 .config 中设置连接 - 或直接在您的`DbContext`

还要首先检查这个[实体框架代码 - 一旦开发完成，我如何告诉我的应用程序现在使用生产数据库而不是创建本地数据库？](https://stackoverflow.com/questions/15767739/entity-framework-code-first-how-do-i-tell-my-app-to-now-use-the-production-dat/15772655#15772655)

> 在做任何事情之前，请始终检查“您的数据”的去向。

**对于初始化程序的实际工作方式**- 检查我的另一个帖子，我做了一个完整的例子

[如何创建初始化程序来创建和迁移 mysql 数据库？](https://stackoverflow.com/questions/15796115/how-to-create-initializer-to-create-and-migrate-mysql-database/15796416#15796416)

**注：（来自评论）**

连接不应该是非常动态的 - 配置是它的正确位置，除非你有充分的理由。
构造函数也应该可以正常工作。
`CreateDbIfNotExists`不能与“迁移”初始化程序一起使用。您可以只使用`MigrateDatabaseToLatestVersion`初始化程序。不要“混合”它

或者 - 放一些像 public `MyContext() : base("MyContextConnection")`- 指向`<connectionStrings>`配置的 东西

指向连接 - 只需使用它的“名称”并将其放入构造函数中。

或使用类似的东西`ConfigurationManager.ConnectionStrings["CommentsContext"].ConnectionString`

关于通过迁移（本地和远程从一个应用程序）来娱乐“多个数据库” - 不完全相关 - 但这个链接 -[迁移没有按我的意愿工作...... Asp.net EntityFramework](https://stackoverflow.com/questions/15794413/migration-not-working-as-i-wish-asp-net-entityframework/15795166#15795166)

**更新：（** 在这里进一步讨论-[如果添加一个继承自某事物的类是否会改变代码的行为，是否违反了可靠的原则？](https://stackoverflow.com/questions/15856703/is-adding-a-class-that-inherits-from-something-a-violation-of-the-solid-principl/15857842#15857842)）

这里变得越来越有趣了。我确实设法重现了您实际面临的问题。以下是我认为正在发生的事情的简短细分：

首先，这很“愉快”：

```
Database.SetInitializer(new CreateAndMigrateDatabaseInitializer<MyContext, MyProject.Migrations.Configuration>());
for (var flip = false; true; flip = !flip)
{
    using (var db = new MyContext(flip ? "Name=MyContext" : "Name=OtherContext"))
    {
        // insert some records...
        db.SaveChanges();
    }
} 
```

（我使用了我另一篇文章中的自定义初始化程序，它“手动”控制迁移/创建）

在没有初始化程序的情况下工作得很好。一旦我打开它，我遇到了一些奇怪的问题。

我删除了 Db-s（每个连接两个）。我希望要么不工作，要么创建一个数据库，然后在下一次传递中创建另一个（就像它所做的那样，没有迁移，只是“创建”初始化程序）。

> 发生了什么事，令我惊讶的是 - 它实际上是在第一遍创建了两个数据库吗？

然后，作为一个好奇的人:)，我在`MyContext`ctor 上设置了断点，并通过迁移器/初始化器进行了调试。再次为空/无 db-s 等。

它在我的通话中创建了第一个实例`flip`。然后在第一次访问“模型”时，它调用了初始化程序。Migrator 接管（没有 db-s）。在此期间，`migrator.Update();`它实际上构造了`MyContext`（我猜测是通过配置中的通用参数） - 并调用“默认”空 ctor。默认情况下，它具有“其他连接/名称” - 并且也创建了其他 Db。

所以，我认为这解释了你正在经历的事情。以及为什么您必须创建“工厂”来支持上下文创建。这似乎是唯一的方法。并设置一些“AppDomain”范围的“连接字符串”（实际上你做得很好），默认情况下 ctor 调用不会“覆盖”。

我看到的解决方案是——你只需要通过工厂运行所有东西——并在那里“翻转”连接（不需要静态连接，只要你的工厂是单例的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T11:02:52.197

您可以在 MigrateDatabaseToLatestVersion 构造函数中提供配置。如果您在 DbContext 中设置初始化程序，您还可以传递“true”以使用当前连接字符串。

# c++ - C++ wstring 到文件而不是字符串

> ID：15830035
> 
> 赞同：1
> 
> 时间：2013-04-05T09:13:58.147
> 
> 标签：c++, logging, wstring

我有一个简单的记录器类，我试图将其转换为接受和输出 wstrings 而不是字符串。

标题：

```
#include <fstream>
using namespace std;

class CLog 
{
  public:
    CLog(wstring filename);
    ~CLog();
    void WriteString(string uString);
  private:
    fstream m_stream;
}; 
```

cp:

```
#include "stdafx.h";
#include "log.h";

CLog::CLog(wstring uPath) 
{
  m_stream.open(uPath);
}
void CLog::WriteString(string uString)
{
  m_stream << uString.c_str() << endl;
}
CLog::~CLog()
{
  m_stream.close();
} 
```

有人可以建议我应该使用什么来代替 fstream 吗？我尝试使用 wstringstream，但它甚至没有 .open 将其输出到文件，所以我认为这是错误的方法。

我想保留它立即写入文件的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:33:42.057

我现在使用“wofstream”而不是“fstream”，而且效果很好。

# java-me - 无法通过 j2me 中的代码创建文件夹和文件

> ID：15830037
> 
> 赞同：0
> 
> 时间：2013-04-05T09:14:18.443
> 
> 标签：java-me

我正在尝试通过代码在 j2me 中创建一个文件夹和一个图像。我能够在模拟器中创建一个图像文件，但是当我尝试在移动设备（诺基亚 2700）中运行该代码时......它给出了异常。我的代码是 folloes .....

```
 Enumeration e = FileSystemRegistry.listRoots();
                String root = null;
                while (e.hasMoreElements()) {
                root = (String) e.nextElement();
                break;
            }

 String  newFilePath = "file:///"+root+fileName[i];

 FileConnection fileConnection = (FileConnection) Connector.open(newFilePath,
 Connector.READ_WRITE);

                if(!fileConnection.exists())
                    fileConnection.create();

                else if(fileConnection.fileSize() == mediaSize){
                    fileConnection.close();
                    continue;
                } 
```

我应该怎么做才能在以前存在的文件夹中创建一个图像文件，或者如果可能的话，我怎么能在 j2me 中创建一个文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:51:09.657

有些手机只允许在根目录的某些子文件夹中创建文件夹和文件。您可能无法在诺基亚 2700 的根目录中创建文件夹或文件。

通常，您必须转到这些手机上的“其他”文件夹。因此，请尝试以下两者之一作为路径和文件名：

```
file:///c:/other/myfolder/myimage.jpg
file:///e:/other/myfolder/myimage.jpg 
```

取决于您是要保存到手机内存（驱动器 c）还是存储卡（驱动器 e）。

# ios - 我想创建 CustomCell 但它给出了一些错误，如何解决它？错误描述如下

> ID：15830038
> 
> 赞同：1
> 
> 时间：2013-04-05T09:14:20.120
> 
> 标签：ios, ipad, uitableview

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"CustomCell";
CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
}
cell.cellDate.text=@"date";
cell.cellDescription.text =@"Description";
cell.cellImageview.image = [UIImage imageNamed:@"sample.png"];
cell.cellTitle.text = @"Title";
NSLog([cell Description]);
return cell; 
```

}

```
 NSLog([cell Description]); 
```

返回空

以上是我的方法它给出以下错误：here

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView 返回一个单元格：cellForRowAtIndexPath：”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:16:22.503

您没有在 if`(cell == nil)`位内分配新单元格。您需要分配一个新`UITableViewCell`的返回。

出队的工作方式是：

1.  向表格视图询问可重复使用的单元格`CellIdentifier`

2.  如果单元格为 nil，则使用您的分配一个新单元格，`CellIdentifier`以便将来可以重新使用。

所以你可以这样做：

```
static NSString *CellIdentifier = @"CustomCell";
//Ask for a cell with the cell identifier
CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

//If the cell is nil
if (cell == nil) 
{
//Allocate a new cell with the identifier
    cell = [[CustomCell alloc] init];//put your actual init method here
}
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
{
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}
cell.cellDate.text=@"date";
cell.cellDescription.text =@"Description";
cell.cellImageview.image = [UIImage imageNamed:@"sample.png"];
cell.cellTitle.text = @"Title";
NSLog([cell Description]);
return cell; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:18:08.617

改变这个：

```
CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
} 
```

至 ：

```
CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier: CellIdentifier];

if (cell == nil) 
{
    cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
          cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:18:18.177

```
enter code here// Customize the appearance of table view cell
   - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  (NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"CustomCell";
   CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:  CellIdentifier];

if (cell == nil)
{
     cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}

cell.cellDate.text=@"date";
cell.cellDescription.text =@"Description";
cell.cellImageview.image = [UIImage imageNamed:@"sample.png"];
cell.cellTitle.text = @"Title";
return cell;

} 
```

不要忘记在编译源选项卡中添加 customcell 的 .m 文件

# iphone - UITableview 自定义剖面视图移到顶部

> ID：15830040
> 
> 赞同：0
> 
> 时间：2013-04-05T09:14:35.073
> 
> 标签：iphone, objective-c, uitableview, uiview

我有一个`UITableview`where 我使用`view`部分标题的方法来自定义`view`类似的下拉列表，这样，当我`button`在部分标题视图上选择特定的部分时， `cell`for`row`就会出现，就像一个下拉列表一样。我需要一种方式，当我选择特别的`section`this`section`应该放在`tableview`. 有没有解决方案来实现这一点。

# codeigniter - CodeIgniter：如何将 get() 活动记录与以前的活动记录一起使用两次？

> ID：15830044
> 
> 赞同：0
> 
> 时间：2013-04-05T09:14:44.650
> 
> 标签：codeigniter, activerecord, get

如图所示，我在模型下具有以下功能..

```
 public function get_products($category, $brand, $filter, $page, $limit) {
    // output
    $output = "";
    // offset
    $offset = $limit * ($page - 1);
    // query for pagination
    $this->db->select("*");
    $this->db->from("products");
    $this->db->where("category", $category);
    if ($brand != "all") {
        $this->db->where("brand", $brand);
    }
    // first time use
    $query = $this->db->get();
    $total_rows = $query->num_rows();
    $this->db->limit($limit, $offset);
    switch ($filter) {
        case 'latest':
        $this->db->order_by("released", "ASC");
        break;
        case 'most-viewed':
        $this->db->order_by("views", "ASC");
        break;
        case 'price-low-to-high':
        $this->db->order_by("price", "DESC");
        break;
        case 'price-high-to-low':
        $this->db->order_by("price", "ASC");
        break;
    }
    //second time use
    $query = $this->db->get(); 
```

在这里，我想使用`select`,`from`和`where`2`this->db->get()`如您所见，但查询在运行第一个`get()`. 那么有没有办法做到这一点？或者我必须写两次活动记录？

**我尝试这样做的原因是为了获得`num_rows`分页`total_rows`配置的限制。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:33:42.070

这是你如何做到的。

```
public function get_products($category, $brand, $filter, $page, $limit) 
{
    $output = "";
    $offset = $limit * ($page - 1);

    $this->getQuery($category , $brand);
    $query = $this->db->get();

    $total_rows = $query->num_rows();
    //Call the query again 
    $this->getQuery($category , $brand);
    /*  This time limit and order will be applied to the query */   
    $this->db->limit($limit, $offset);

    switch ($filter) {
        case 'latest':
        $this->db->order_by("released", "ASC");
        break;
        case 'most-viewed':
        $this->db->order_by("views", "ASC");
        break;
        case 'price-low-to-high':
        $this->db->order_by("price", "DESC");
        break;
        case 'price-high-to-low':
        $this->db->order_by("price", "ASC");
        break;
    }
    //Run query now
    $query2 = $this->db->get();
}
/* This will only generate the query and will not run it */
function getQuery($category , $brand){

    $this->db->select("*");
    $this->db->from("products");
    $this->db->where("category", $category);
    if ($brand != "all") {
        $this->db->where("brand", $brand);
    }
} 
```

# python - 在 Python Tkinter 中从特定位置播放声音

> ID：15830045
> 
> 赞同：3
> 
> 时间：2013-04-05T09:14:51.917
> 
> 标签：python, audio

**目标**

`D:1.wav`在用户启动应用程序时从该位置播放 wav 文件

**研究**

看到以下问题：

[我将如何在 python 中播放警报声？](https://stackoverflow.com/questions/4006709/how-would-i-go-about-playing-an-alarm-sound-in-python)

[使用 Python 播放音频](https://stackoverflow.com/questions/260738/play-audio-with-python)

**我试过的**

我尝试了以下几行：

示例 1

```
import winsound
winsound.PlaySound('D:\1.wav',winsound.SND_FILENAME)  ##Did not work 
```

示例 2

```
import winsound
winsound.PlaySound('1.wav',winsound.SND_FILENAME)  ##DID not work 
```

两次我都得到了默认声音，但没有按照音频文件播放的声音

**还**

1.  当我写`winsound.PlaySound('1.wav',winsound.SND_FILENAME)`python 在哪里检查文件时`1.wav`？在哪个目录？
2.  为什么要使用国旗`winsound.SND_FILENAME`？

**规格**Python 2.7 TKinter 8.5 Windows XP SP

**请**帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:24:49.683

改变

```
winsound.PlaySound('D:\1.wav',winsound.SND_FILENAME) 
```

到

```
winsound.PlaySound('D:\\1.wav',winsound.SND_FILENAME) 
```

防止 python 逃离你的路径：

```
>>> a = '\1.wav'
>>> a
'\x01.wav' 
```

> winsound.SND_FILENAME
> 
> sound 参数是 WAV 文件的名称。不要与 SND_ALIAS 一起使用。

（来自[winsound 文档](http://docs.python.org/2/library/winsound.html)）

如果您不使用 flag `winsound.SND_NODEFAULT`，则 winsound 会在找不到您指定的文件时播放默认声音。

在里面创建一个`D:\test_sounds\`包含您的 wav 文件的文件夹（例如），[将该文件夹添加](https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7)到您的`PYTHONPATH`变量中，然后再次尝试运行您的代码。或者（更好的是，如果您打算分发您的代码），按照我刚刚链接的同一篇文章，将其添加到您的代码中：

```
import sys
if "D:\\my_sound_folder" not in sys.path:
    sys.path.append("D:\\my_sound_folder") 
```

然后你可以打电话`winsound.PlaySOund('1.wav', winsound.SND_FILENAME)`，因为它会在你的可用路径中

# c++ - 用于树莓派的 C GPIO 编程

> ID：15830046
> 
> 赞同：2
> 
> 时间：2013-04-05T09:14:53.220
> 
> 标签：c++, python, c, raspberry-pi, gpio

我在 python 中有一个 GPIO 程序 .. 任何人都可以帮助我让等效的 C 或 C++ 程序在树莓派上运行 ..

蟒蛇代码是

```
import RPi.GPIO as GPIO  
import time  
# blinking function  
def blink(pin):  
    GPIO.output(pin,GPIO.HIGH)  
    time.sleep(1)  
    GPIO.output(pin,GPIO.LOW)  
    time.sleep(1)  
    return  
# to use Raspberry Pi board pin numbers  
GPIO.setmode(GPIO.BOARD)  
# set up GPIO output channel  
GPIO.setup(11, GPIO.OUT)  
# blink GPIO17 50 times  
for i in range(0,50):  
        blink(11)  
GPIO.cleanup() 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:30:18.723

```
#include <header.h> // which contatining some delay function
void blink(int pin)
{ 
    //Program the pin (which GPIO) to  high
    //delay function
    //Program the pin (which GPIO) to low
    //delay
    return 0;
}
main()
{
// to use Raspberry Pi board pin numbers  
GPIO.setmode(GPIO.BOARD)  //check this fun def and find out what it is doing and code it accordingly

// set up GPIO 11 as output channel  

// blink GPIO11 50 times  
for(i=0;i<50;i++)  
        blink(11);

GPIO.cleanup() ////check this fun def and find out what it is doing and code it 
```

# unity3d - Unity 3d中的对象运动作为波浪

> ID：15830047
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:14:53.333
> 
> 标签：unity3d, transform, monodevelop, unityscript

我统一创建了一个对象

```
GameObject monsterclone = 
      (GameObject)Instantiate(monsterPrefab, floorPosition, Quaternion.identity); 
```

该对象应以波浪形式从 limit1 移动到 limit2。

然后从limit2回到limit1。

Y 位置以及 x 位置必须以特定方式改变。

```
Vector3 nPos = mfloorPos + new Vector3(2f, 0f, 0f);
Vector3 oPos = mfloorPos  + new Vector3(-2f, 0f, 0f); 
```

我该怎么做？

![在此处输入图像描述](https://i.stack.imgur.com/ZhSCn.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:18:14.037

在不知道更具体的情况下，我无法完全编写代码，但我认为这个问题已经被问到任何这个链接将帮助你将[MOVE OBJECT 作为波](http://answers.unity3d.com/questions/59934/how-to-an-object-floating-up-and-down.html)

**编辑：**

我认为 flat up 和 float down 功能将适用于您将一个点移动到另一个示例：

```
var floatup;
function Start(){
floatup = false;
}
function Update(){
if(floatup)
floatingup();
else if(!floatup)
floatingdown();
}
function floatingup(){
transform.position.y += 0.3 * Time.deltaTime;
yield WaitForSeconds(1);
floatup = false;
}
function floatingdown(){
transform.position.y -= 0.3 * Time.deltaTime;;
yield WaitForSeconds(1);
floatup = true;
} 
```

[示例取自](http://answers.unity3d.com/questions/59934/how-to-an-object-floating-up-and-down.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T10:26:52.833

```
float amplitudeX = -25.0f;
float amplitudeY = 5.0f;
float omegaX = 0.5f;
float omegaY = 4.0f;
float index;

void Update () {
    index += Time.deltaTime;
    float x = amplitudeX*Mathf.Cos (omegaX*index);      
    float y = Mathf.Abs (amplitudeY*Mathf.Sin (omegaY*index));
    if(transform.position.x > 24){
            transform.eulerAngles = new Vector3(270, -90, 0);
    }
    if(transform.position.x < -24){
            transform.eulerAngles = new Vector3(270, 90, 0);
    }   
    transform.localPosition= new Vector3(x,y,20);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:20:20.397

如果这是一个持续的波浪并且不依赖于速度，我会使用动画来创建 Position.Y 值的文字波浪曲线（与 Ravindra Shekhawat 解释的原理大致相同。）您可以在[此处找到有关动画的更多信息。](http://docs.unity3d.com/Documentation/Components/AnimationEditorGuide.html)

这是一些您可以关闭的代码（未经测试）。它在 c# 中，所以我希望它证明放入 JavaScript 没有问题。

```
bool monsterMoving = false;

void Update(){
    //check monster moving to start updating position
    if(monsterMoving == true){

        //moving animation controls up and down "wave" movement
        animation.CrossFade('moving'); 

        //Lerp changes position
        Transform.Lerp(transform.Position, oPos, Time.deltaTime); 

        if (transform.Position == oPos) {
            //We are at destination, stop movement
            monsterMoving = false;
        }

    } else {
        // if monster stopped moving, return to idle animation (staying still)
        animation.CrossFade('idle');
    }
}

// function to send a new position to the monster object
void MoveTo(Vector3 newPos){
    oPos = newPos;
    monsterMoving = true;
} 
```

# linux - bash，搜索 USB 存储设备。输出位置

> ID：15830048
> 
> 赞同：2
> 
> 时间：2013-04-05T09:14:58.323
> 
> 标签：linux, bash, usb

我正在寻找一种列出任何 USB 连接设备或可移动存储介质的方法。

我将使用此列表作为 gtk 引导媒体写入器，以便用户可以轻松地将 iso 写入 USB。

这将创建所有分区的完美列表：

```
ls /dev | grep "[sh]d[a-z][1-9]" 
```

我怎样才能得到一个类似的列表，它只是可移动媒体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:15:46.210

在我的系统（Ubuntu 12.04）上，我可以使用以下命令获取 USB 设备和分区列表

```
ls /dev/disk/by-path/*usb* 
```

给予

```
/dev/disk/by-path/pci-0000:00:02.1-usb-0:1.1:1.0-scsi-0:0:0:0  
/dev/disk/by-path/pci-0000:00:02.1-usb-0:1.1:1.0-scsi-0:0:0:0-part1 
```

或单独分区

```
ls /dev/disk/by-path/*usb*part* 
```

`/dev/sdd`例如，这些是符号链接，指向真实的设备文件`/dev/sdd1`。

我仅使用 USB 记忆棒和外部 USB 硬盘对此进行了测试。我不能说这是否或如何与 eSATA 或 Firewire 磁盘一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T22:20:35.857

根据 Olaf Dietsche 的回答，我得出以下结论：

```
devs=`ls -al /dev/disk/by-path/*usb*part* 2>/dev/null | awk '{print($11)}'`; for dev in $devs; do dev=${dev##*\/}; echo -n "$dev ("; echo -n `mount | grep \`echo -E ${dev}\` | awk '{print($3)}'`; echo ")"; done 
```

对我来说，上面的代码显示了 USB 设备以及它们的安装位置（括号之间）。它适用于 Ubuntu 13.04 和 12.04.2，但我不知道它是否适用于任何其他系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:25:15.693

也许您可以使用`lsusb`命令的输出：

```
lsusb
Bus 001 Device 002: ID 8087:0020 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 002: ID 8087:0020 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 003: ID 0db0:3870 Micro Star International 
Bus 002 Device 003: ID 0000:0000  
Bus 002 Device 004: ID 14cd:6116 Super Top M6116 SATA Bridge 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T05:22:41.943

要获取 USB 存储使用的安装路径

> mount|grep /media|awk '{打印 $3}'

## 命令的解释

mount 将打印所有已安装的驱动器，grep 将仅显示安装在 /media 中的驱动器，（考虑到 /media 是默认安装点）此输出通过管道传输到 awk，它将打印 USB 驱动器的安装路径

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-12T15:16:36.887

[`bootiso`](https://github.com/jsamr/bootiso)`-l`BASH 实用程序只是在使用选项调用时执行此操作。这是稍微修改的 bash 代码段的输出：

```
/dev/sdd /dev/sde 
```

相关片段：

```
printUSBDevices() {
  typeset -a usbDevices
  typeset -a devices
  getDeviceType() {
    typeset deviceName=/sys/block/${1#/dev/}
    typeset deviceType=$(udevadm info --query=property --path="$deviceName" | grep -Po 'ID_BUS=\K\w+')
    echo "$deviceType"
  }
  mapfile -t devices < <(lsblk -o NAME,TYPE | grep --color=never -oP '^\K\w+(?=\s+disk$)')
  for device in "${devices[@]}" ; do
    if [ "$(getDeviceType "/dev/$device")" == "usb" ]; then
      usbDevices+=("/dev/$device")
    fi
  done
  echo "${usbDevices[@]}"
}

printUSBDevices 
```

# c# - 如何从pdf文档中的文本框注释中获取值

> ID：15830050
> 
> 赞同：1
> 
> 时间：2013-04-05T09:15:05.637
> 
> 标签：c#, pdf, itextsharp

我有一个 pdf 文档，里面有 2 种类型的评论列表：1\. 矩形 2\. 文本框

![在此处输入图像描述](https://i.stack.imgur.com/YzKKx.jpg)

我想用 c# 和 itextsharp 从文本框中获取值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:47:33.427

您所指的文本框和矩形称为注释。注释被定义为字典，并且每页列出。

换句话说：您需要创建一个`PdfReader`实例并`ANNOTS`从每个页面获取：

```
PdfReader reader = new PdfReader("your.pdf");
for (int i = 1; i <= reader.NumberOfPages; i++) {
    PdfArray array = reader.GetPageN(i).GetAsArray(PdfName.ANNOTS);
    if (array == null) continue;
    for (int j = 0; j < array.Size; j++) {
        PdfDictionary annot = array.GetAsDict(j);
        PdfString text = annot.GetAsString(PdfName.CONTENTS);
        ...
    }
} 
```

在上面的代码示例中，我有一个`PdfDictionary`命名`annot`的，我可以从中提取内容。您可能也对其他一些条目感兴趣（例如注释的名称，如果有的话）。请检查对象中可用的所有键，`annot`以防`Contents`条目不是您要查找的。

用您想要对文本执行的任何操作替换这些点。`PdfString`有不同的方法可以揭示其内容。

**免责声明：**我是 iText 的原始开发者（我一直认为人们已经知道这一点，但我曾经被否决，因为我没有添加此免责声明）。

# java - 如何使用基于“父案例产品描述”等参数的 SQOP API 过滤 Salesforce 案例对象

> ID：15830051
> 
> 赞同：0
> 
> 时间：2013-04-05T09:15:07.873
> 
> 标签：java, salesforce

我正在尝试获取已打开并分配给工程团队并特定于少数产品的案例列表。

我正在使用 SOAP API 并尝试首先根据“父案例产品描述=某些产品”、类型=工程升级等标准过滤案例，然后检索所有者名称、帐户名称、案例产品版本等。“父案例产品描述”和类型是附加字段，我们可以根据这些字段从 Salesforce GUI 中筛选案例。

但是，我无法根据上述字段过滤案例，因为这些不是案例对象的字段。我在这里检查了这个[http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_case.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_case.htm)

我可以访问该字段（不是案例对象的一部分），例如帐户名称字段在案例对象中不存在，但我可以在 SOQL 查询中使用“case.Account.name”检索它。但我的问题是，我找不到访问“父案例产品描述=某些产品”和类型=工程升级之类的参数的方法。

我想实现如下所示，SELECT ... FROM case where "Parent Case Product Description" LIKE "some product name" AND Type = 'Engineering Escalation';

请提供一些关于如何访问 where 子句中提到的参数的指示。

注意：请注意，我在上面的例子中提到的“类型”不同于“案例对象字段”——类型。

以下是我正在尝试的代码部分。

```
Private void querySample() {
  String soqlQuery = "SELECT Case.ParentId, AccountId, CaseNumber, Subject, OwnerId, Case.Account.name FROM Case'";
  try {
     QueryResult qr = connection.query(soqlQuery);
     boolean done = false;

     if (qr.getSize() > 0) {
        System.out.println("\nLogged-in user can see "
              + qr.getRecords().length + " records.");

        while (!done) {
           System.out.println("");
           SObject[] records = qr.getRecords();
           for (int i = 0; i < records.length; ++i) {
              Case con = (Case) records[i];
              String CNumber = con.getCaseNumber();
              String Csubject = con.getSubject();
              String CownerId = con.getOwnerId();
              com.sforce.soap.enterprise.sobject.Account CaseAccount = con.getAccount();
              String name = CaseAccount.getName(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:36:06.317

假设“产品描述”是 Case 上的自定义字段并且它不是一个长的测试区域（[在 WHERE 子句中是不允许的](http://www.salesforce.com/us/developer/docs/soql_sosl/Content/sforce_api_calls_soql_select_fieldexpression.htm)），SOQL 查询看起来是这样的：

```
SELECT Id FROM Case WHERE Parent.Product_Description__c LIKE '%something%' AND Type__c = 'Engineering Escalation' 
```

我在您的查询中注意到的一件事是，对于父关系，您在前缀`Case`（例如`Case.ParentId`）这并不是真正需要的（即只是`ParentId`会做）。这并不重要，只是把它叫出来，因为它是导致一些关于遍历关系的混淆的原因。

[此外，对于手头的任务，使用SOSL 搜索](http://www.salesforce.com/us/developer/docs/soql_sosl/Content/sforce_api_calls_sosl.htm)而不是[SOQL 查询](http://www.salesforce.com/us/developer/docs/soql_sosl/Content/sforce_api_calls_soql.htm)可能会更好地解决。SOSL 将允许您在长文本区域中查找文本，并且可以搜索整个对象，这可能会更好并且应该更快，因为数据已被索引。它可能会发现太多，但它确实允许您向下过滤记录，并且您可以使用 SOQL 或在您的 Java 代码中进行进一步过滤。

# model - ER模型和关系模型中实体和关系之间的关系？

> ID：15830052
> 
> 赞同：0
> 
> 时间：2013-04-05T09:15:10.083
> 
> 标签：model, entity, entity-relationship, relationship, relational

我可以在 ER 模型上设置实体和多对多关系之间的关系吗？如果是这样，你如何代表它？

我读了[ER 数据模型（连接 2 个关系）](https://stackoverflow.com/questions/9138227/er-data-model-connecting-2-relations)，但它只是谈论关系模型......

就我而言，我有一个超市数据库。我将只谈谈有这个问题的实体：
-*超市*销售*Product*。
-*产品*在*超市*出售。
-*超市*销售 (0, n)*产品*，*产品*在 (0, n)*超市*销售：多对多关系。*价格*是一个关系属性。
-*用户*在特定*超市*为*产品*添加*价格*。

 **那么我可以在*用户*实体和*销售*关系之间添加关系吗？你如何在 ER 模型上表示它？

*如果不是，我应该设置Supermarket*和*Price*之间的关系（在这种情况下作为一个弱实体：它需要*Supermarket作为标识符）以及**Price*（弱实体）和*Supermarket*（强实体）之间的另一个关系。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:45:47.463

好吧，我想我已经找到了解决方案。有两种选择： 1.- *User*、*Supermarket*和*Product*
之间的三元关系。 2.- 类似于附图中的示例： ***![在此处输入图像描述](https://i.stack.imgur.com/C3X8H.png)*****

# .net - 程序化数据库结构推出

> ID：15830057
> 
> 赞同：0
> 
> 时间：2013-04-05T09:15:19.443
> 
> 标签：.net, relational-database

我想为我的数据模型定义一个定义，并让我的应用程序在启动时检查和同步它。

不幸的是，我找不到任何这样做的产品，所以我想听听您是否知道，或者您是否有解决此问题的建议。

我想到的解决方案：应用程序在启动时读取定义（例如 XML 文件）并与 DB 结构进行比较。如果不同，它会生成`ALTER TABLE`语句并采用。如果缺少某些表，它还可能会在某些表中创建默认记录。它应该支持多个 RDBMS（ms sql、oracle、db2 等）并在 .NET 中运行。

使用数百个 SQL 脚本和回滚脚本执行此操作对我来说似乎有点不切实际且容易出错。

我可以自己开始编程，但也许有一些非常漂亮的东西？

# css - CSS - 设置 s 与“位置：绝对”不相互重叠

> ID：15830059
> 
> 赞同：0
> 
> 时间：2013-04-05T09:15:24.757
> 
> 标签：css, select, html, absolute

我有一个有 n 列的表。每列都有一个预定义的宽度，在每列**th**内，有一个包含实际标题文本的 div 和一个**包含**下拉菜单的**div 。**

这是表的简化结构：

```
<table>
    <tr>
        <th>
            <div>TEXT</div>
            <div><select>...</select></div>
        </th>
    <tr>
    ...
    ...
</table> 
```

列的预定义宽度可能导致文本被分成多行。发生这种情况时，显然**th**内的元素会重新排列它们的位置，从而导致列的**select** ..错位。

我需要做的是找到一种方法让每个**选择**相互对齐，可能锚定到**th**的底部。

[http://jsfiddle.net/SezSZ/2/](http://jsfiddle.net/SezSZ/2/) <- 这里我做了一个我正在做的例子。

第二个表格显示没有任何样式的表格（宽度除外）：注意第一个和第二个**select**之间的错位。

相反，第一个表应用了一些样式。如您所见，第二列文本与选择重叠。我尝试使用“位置”属性解决这个问题。我如何告诉文本根据需要占用尽可能多的空间，而不知道有多少它会被分割成几行？

另一件（次要）事情：我想将每个**选择**设置为他的父 div 的 100% 宽度，但是（表 1）右侧的下拉菜单与表格边框重叠（1 或 2 像素，而在表 2 中的所有内容没问题）..

提前感谢您的帮助，我希望我足够清楚，最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:30:32.523

我相信这个[JSFiddle](http://jsfiddle.net/v3y7J/10/)是你所追求的，对吧？整个技巧是`vertical-align: middle`在`th`.

# javascript - XmlHttpRequest 与 asp.net

> ID：15830060
> 
> 赞同：3
> 
> 时间：2013-04-05T09:15:26.313
> 
> 标签：javascript, asp.net, internet-explorer, web, xmlhttprequest

我尝试向我的 ashx 文件发送获取请求。但我遇到了字符问题。
问题是当我通过 firefox 或 crome 发送请求时没有问题，但是当尝试使用 IE 发送时，我无法
收到我发送的内容。我发送“Ç”字符但在服务器端我无法得到它。

```
myRequest.open("GET", "/Search.ashx?SearchText=" + search + "", true);
myRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
myRequest.send(null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:28:46.123

看来您还没有使用 javascript 使用 encodeURIComponent 函数对“搜索”字符串进行编码。在 ashx 方面，您可以使用 HttpUtility.HTMLDecode 方法来解码您的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:37:35.090

encodeURIComponent(search) 是答案。

# c# - 仅从字符串中获取整数值

> ID：15830062
> 
> 赞同：0
> 
> 时间：2013-04-05T09:15:30.723
> 
> 标签：c#

我只需要从字符串中获取最后一个数字。该字符串包含字符串+整数+字符串+整数的模式，即“GS190PA47”。我只需要从字符串中得到 47。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:20:55.590

一个简单的正则表达式，链接到字符串末尾的任意数量的整数位

```
string test = "GS190PA47";
Regex r = new Regex(@"\d+$");
var m = r.Match(test);

if(m.Success == false)
    Console.WriteLine("Ending digits not found");
else
    Console.WriteLine(m.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:20:26.853

```
string input = "GS190PA47";
var x = Int32.Parse(Regex.Matches(input, @"\d+").Cast<Match>().Last().Value); 
```

如果字符串总是以数字结尾，您可以`\d+$`像史蒂夫建议的那样简单地使用模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:19:12.227

你可以试试这个正则表达式：

(\d+)(?!.*\d)

您可以使用此在线工具对其进行测试：[link](http://www.rubular.com/r/pZsERUUUxZ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:36:01.493

不确定这是否比 RegEx 更有效或更有效（Profile it）

```
 string input = "GS190PA47";
 var x = Int32.Parse(new string(input.Where(Char.IsDigit).ToArray())); 
```

## 编辑：

令人惊讶的是它实际上比正则表达式快得多

```
var a = Stopwatch.StartNew();

        for (int i = 0; i < 10000; i++)
        {
            string input = "GS190PA47";
            var x = Int32.Parse(new string(input.Reverse().TakeWhile(Char.IsDigit).Reverse().ToArray()));
        }
        a.Stop();
        var b = a.ElapsedMilliseconds;

        Console.WriteLine(b);

        a = Stopwatch.StartNew();

        for (int i = 0; i < 10000; i++)
        {
            string input = "GS190PA47";
            var x = Int32.Parse(Regex.Matches(input, @"\d+").Cast<Match>().Last().Value);
        }
        a.Stop();
         b = a.ElapsedMilliseconds;

        Console.WriteLine(b); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T09:46:09.673

试试这个：

```
string input = "GS190PA47";

Regex r = new Regex(@"\d+\D+(\d+)");
int number = int.Parse(r.Match(input).Groups[1].Value); 
```

模式意味着我们找到一组数字（190），下一组非数字字符（PA），最后是寻找的数字。

不要忘记包含使用 System.Text.RegularExpressions 指令。

# javascript - Facebook API 错误 100 - 无效链接

> ID：15830066
> 
> 赞同：2
> 
> 时间：2013-04-05T09:15:32.507
> 
> 标签：javascript, ruby-on-rails, facebook

我正在使用 Facebook API 在我的 Rails 应用程序中创建一个发送对话框。我只是使用 Facebook 在 Javascript 中推荐的格式（作为 HTML 中的脚本）。

我的问题是我得到一个：

```
 API Error code 100, invalid parameter, link URL not properly formatted 
```

关于以下内容：

```
 <script>

    function detail(friend_id, user_name, restaurant_name, restaurant_id, articles){
      // assume we are already logged in
      FB.init({appId: '<%= Facebook::APP_ID.to_s %>', xfbml: true, cookie: true});

      FB.ui({
        to: friend_id,
          method: 'send',
          name: user_name +' needs more details about '+ restaurant_name,
           picture: 'http://fb-logo-75.png',
          link: "<%= Facebook::SITE_URL%>restaurants/"+restaurant_id,
          description: '<b>'+user_name + ' needs your help.</b> Add some color to your review of <b>'+restaurant_name+'</b> and help '+articles["object"]+' decide if he should eat there.'
          });
    }
     </script> 
```

请注意：

a) Facebook::SITE_URL 因环境而异。您可能认为这是一个本地主机问题。但是，当我整合网站 URL 的值（这是一个有效的网站，与 localhost 不同）时，我仍然收到错误消息。然而，该链接（指向我在 Heroku 上的应用程序）肯定是有效的。

b) 当我发布到提要时，无论是从本地主机还是在生产中，我都没有收到错误消息。问题似乎仅限于发送对话框。

c) 当我输入另一个 URL，例如[http://www.cnn.com](http://www.cnn.com)时，我没有收到错误消息。以下是在页面上调用该方法的方式：

```
 <li class = "flat_list_item"><button id="detail_friend" onclick='detail(<%= review.user.fb_id.to_s %>, "<%= @current_user.first_name.to_s %>",
"<%= review.restaurant.name.to_s %>", <%= review.restaurant.id %>,<%= @current_user.gender_article.to_json %>)'>Tell me more</button></li> 
```

注意：User.gender_article 是一个 hack，如果用户是男性，则提供“他/他/他”，如果用户是女性，则提供“她/她/她”。

这就是它在客户端的翻译方式：

的HTML：

```
<button id="detail_friend" onclick="detail(XXXX, &quot;Laurent&quot;,&quot;Refuge&quot;, 227,{&quot;subject&quot;:&quot;he&quot;,&quot;possess&quot;:&quot;his&quot;,&quot;object&quot;:&quot;him&quot;})">Tell me more</button> 
```

这就是脚本在客户端的样子：

```
function detail(friend_id, user_name, restaurant_name, restaurant_id, articles){
  // assume we are already logged in
  FB.init({appId: 'XXXX', xfbml: true, cookie: true});

  FB.ui({
    to: friend_id,
      method: 'send',
      name: user_name +' needs more details about '+ restaurant_name,
       picture: 'http://fb-logo-75.png',
      link: 'http://powerful-woodland-3700.herokuapp.com',
      description: '<b>'+user_name + ' needs your help.</b> Add some color to your review of <b>'+restaurant_name+'</b> and help '+articles["object"]+' decide if he should eat there.'
      });
} 
```

请注意，此链接实际上是一个功能链接（尽管有很多错误 - 但它存在并链接到实际网站）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:47:28.243

[http://fb-logo-75.png](http://fb-logo-75.png)的图片 URL无效

它必须是绝对 URL（例如：[http://domain.com/path/to/image.png](http://domain.com/path/to/image.png)）并且不能位于 Facebook 的 CDN 上。所以把它改成[http://your_domain.com/path/to/fb-logo-75.png](http://your_domain.com/path/to/fb-logo-75.png)

# sql - sql左外连接按左表中的列顺序但保留所有行

> ID：15830070
> 
> 赞同：0
> 
> 时间：2013-04-05T09:15:50.967
> 
> 标签：sql, join

我有以下内容：

```
SELECT 
table1.id
FROM
table1 
LEFT OUTER JOIN table2 ON table2.table1_id = table1.id
WHERE
(table1.entry_id=2) 
AND 
parent_id=0 
ORDER BY 
SUM(table2.column1) - SUM(table2.column2) 
```

在我添加“order by”之前工作正常，我需要它从 table1 中获取所有相关行，即使它们在 table2 中有不匹配的行，排序会将它们放在底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:20:50.940

试试这个：

```
SELECT 
  t1.id
FROM table1 AS t1
LEFT OUTER JOIN
(
   SELECT table1_id, SUM(column1) sum1, SUM(column2) sum2
   FROM table2 
   GROUP BY table1_id
) AS t2  ON t2.table1_id = t.id
        AND t1.entry_id  = 2 
        AND t1.parent_id = 0 
ORDER BY t2.sum1 - t2.sum2; 
```

# c++ - 关于编写相同指针数组的类的代码中的错误？

> ID：15830072
> 
> 赞同：1
> 
> 时间：2013-04-05T09:16:00.483
> 
> 标签：c++

大家好，我在下面的代码
中`PointArray.h`

```
#ifndef POINTARRAY_H_INCLUDED
#define POINTARRAY_H_INCLUDED

template <typename T>
class PointArray
{
private:
    int nSize;
    T *array[];
public:
    PointArray();
    PointArray(const T *points[],const int size);
    PointArray(const PointArray &pv);
    ~PointArray();
    int * get(const int position);//is same to array[position]
    const int * get(const int position) const;//is same to array[position]
    const int getSize() const;//get size of array
};

#endif // POINTARRAY_H_INCLUDED 
```

在`PointArray.cpp`

```
#include "PointArray.h"
#include<iostream>
#include <assert.h>
using namespace std;

template<class T>
PointArray<T>::PointArray(const T *points[],const int size)
{
    nSize=size;
    for (int i=0;i<size;i++)
    {
        array[i]=new T;
        *array[i]=*points[i];
    }
}

template<class T>
PointArray<T>::PointArray()
{
    nSize=0;
}

template<class T>
PointArray<T>::PointArray(const PointArray &pv)
{
    nSize=pv.getSize();
    for (int i=0;i<nSize;i++)
    {
        array[i]=new T;
        *array[i]=*(pv.get(i));
    }
}

template<class T>
const int PointArray<T>::getSize() const
{
    return nSize;
}

template<class T>
PointArray<T>::~PointArray()
{
    delete[] array;
    nSize=0;
}

template<class T>
int * PointArray<T>::get(const int position)
{
    assert(position>-1 && position<nSize);
    return array[position];
}

template<class T>
const int * PointArray<T>::get(const int position) const
{
    return array[position];
} 
```

在`main.cpp`

```
#include<iostream>
#include "PointArray.h"
#include "PointArray.cpp"
using namespace std;

int main()
{
    int x=22;
    int y=3;
    const int * a[2]={&x,&y};
    PointArray<int> p;
    PointArray<int> p2(a,2);
    PointArray<int> p3(p2);
    cout << p.getSize() << endl;
    cout << p2.getSize() << endl;
    cout << p3.getSize() << endl;
    return 0;
} 
```

上面的代码应该打印

```
0
2
2 
```

但输出是

```
9244616
9244600
2 
```

当我再次运行它时`9244616`，它`9244600`被改变了。
什么是问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:16:31.743

你的问题是

```
T *array[]; 
```

您定义一个没有元素的指针数组。然后您尝试访问其（不存在的）元素，这会导致未定义的行为。

另一个未定义的行为是在析构函数中

```
delete[] array; 
```

你应该只使用-ed`delete[]`的东西。不是。相反，您应该遍历所有元素（如果有的话）并删除它们中的每一个。`new[]``array``array`

最好的解决方案是使用`std::vector`而不是数组。如果您坚持使用数组，请在构造函数中更改`T* array[]`为`T **array`, 为其分配内存

```
array = new T*[size]; 
```

并在析构函数中删除所有数组元素，然后再删除数组本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:35:26.233

问题是您将 cpp 文件包含在 main 中并在那里实现，模板实现应该在 h 文件中完成。你的 h 文件应该是：

```
 #ifndef POINTARRAY_H_INCLUDED
#define POINTARRAY_H_INCLUDED

template <typename T>
class PointArray
{
private:
    int nSize;
    T *array[];
public:
    PointArray()
    {
        nSize=0;
    }
    PointArray(const T *points[],const int size)
    {
        nSize=size;
        for (int i=0;i<size;i++)
        {
            array[i]=new T;
            *array[i]=*points[i];
        }
    }
    PointArray(const PointArray &pv)
    {
        nSize=pv.getSize();
        for (int i=0;i<nSize;i++)
        {
            array[i]=new T;
            *array[i]=*(pv.get(i));
        }
    }
    ~PointArray()
    {
        delete[] array;
        nSize=0;
    }
    int * get(const int position)
    {
        assert(position>-1 && position<nSize);
        return array[position];
    }
    const int * get(const int position) const
    {
        return array[position];
    }
    const int getSize() const { return nSize;}
};

#endif // POINTARRAY_H_INCLUDED 
```

代码仍然有点难，分配也很糟糕（注意你在过程结束时得到堆断言）..但它对我有用：打印了 0 2 2 ......干杯。

（请注意：）

```
delete[] array; 
```

是内存泄漏，因为您的对象不是一个数组，但您尝试定义指向数组的指针，您应该将其更改为

```
T** array 
```

然后在数组第一个维度的析构函数循环处，然后执行`delete[] array`

# arm - 使用来自目标 ARM 板的 rootfs 的内核头文件交叉编译内核模块

> ID：15830076
> 
> 赞同：3
> 
> 时间：2013-04-05T09:16:18.847
> 
> 标签：arm, embedded-linux, kernel-module, archlinux

我有一个OLinuXino 板。我下载了 ArchLinux img 文件（ArchLinuxARM-2013.02-olinuxino-rootfs.img）并使用 dd 将其写入 SD 卡并使用该卡启动板。我使用以太网将电路板连接到互联网并安装了 gcc 并使用 pacman 在其上制作。我能够为板上的板构建用户空间程序。

ArchLinux SD 卡映像已经在 rootfs (/lib/modules/linux-3.7.2-2-ARCH/build) 中有内核头文件目录。因此，我也能够在电路板上为电路板构建可加载的内核模块。

我有一台 Ubuntu 12.04.1 开发 PC。我已经在上面安装了适用于 ARM GNU/Linux (arm-2012.09-64-arm-none-linux-gnueabi.bin) 的 Sourcery CodeBench Lite。我能够在这台开发 PC 上交叉编译 OLinuXino 的用户空间程序，并通过 SFTP 将其传输到板上并在板上运行（通过 ttyAMA0 串行端口使用控制台）。

现在我想为 OLinuXino 板交叉编译内核模块。我之前为另一个自定义构建 imx233 板完成了此操作 - 在这种情况下，我已配置内核构建系统 (LTIB) 以在构建映像后保持内核源和 rootfs 完好无损。这样我就能够指定内核头文件构建目录来交叉编译内核模块并且它工作。

这次对于 OLinuXino，我没有构建源，所以我将 rootfs（使用 cp -dR）复制到我的 Ubuntu PC 并尝试通过将内核头目录指定为 /lib/modules/linux- 来交叉编译一个 hello world 内核模块3.7.2-2-ARCH/build 并引发以下错误：

```
anurag@anurag-VirtualBox:~/HelloKS$ make
make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- -C /mnt/ArchOL/lib/modules/3.7.2-2-       ARCH/build M=/home/anurag/HelloKS modules
make[1]: Entering directory `/mnt/ArchOL/usr/src/linux-3.7.2-2-ARCH'
  CC [M]  /home/anurag/HelloKS/khello.o
/bin/sh: scripts/basic/fixdep: cannot execute binary file
make[2]: *** [/home/anurag/HelloKS/khello.o] Error 126
make[1]: *** [_module_/home/anurag/HelloKS] Error 2
make[1]: Leaving directory `/mnt/ArchOL/usr/src/linux-3.7.2-2-ARCH'
make: *** [all] Error 2 
```

scripts 文件夹中的 fixdep 二进制文件是为 ARM 预编译的，因此我删除了该二进制文件并为 x86 重新编译并将其放置在那里。当我再次尝试交叉编译内核模块时，抛出了一个类似的错误，抱怨脚本文件夹中的另一个可执行文件（这次是 modpost）。

我的问题是如何将 kernel-header / build 文件夹中的这些 arm 二进制文件替换为 x86 版本？构建文件夹中是否有脚本可以执行此操作？我可以用我的 ubuntu 内核模块构建文件夹中的脚本文件夹替换复制的 ArchLinux 中的脚本文件夹吗？或者我是否修改内核模块的 makefile 以指示构建脚本在脚本文件夹中重建二进制文件，或者为这个二进制文件使用不同的脚本文件夹（我会指定）内核头文件夹中 ubuntu 脚本文件夹的路径？或者我是否以错误的方式解决这个问题，并且有更好的方法来为我拥有的电路板和设置设置交叉编译？

PS。仅供参考：交叉编译器使用 libc 2.16，而用于 OLinuXino 的 ArchLinux img 上有 libc 2.17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-13T10:46:24.203

我已经成功编译了一个没有内核源代码的模块，只有内核头文件。我使用了来自 gcc-libs 和 glibc 的 qemu 和 ARM 版本库文件。

只需复制主机的脚本目录以覆盖 ARM 目录，`mod/modpost`程序除外。编辑`mod/Makefile.modpost`以`modpost`使用`qemu-arm`. 如果您不想实际更改这些文件，您当然可以使用 aufs / overlayfs / bind mount 来实现相同的目的。

设置`QEMU_LD_PREFIX`为您的 ARM 库文件所在的位置，确保 qemu-arm .../modpost 实际工作。然后`make`按照您尝试的方式运行。

如果你会读中文，你可以[在这里阅读我的经验](https://blog.lilydjwg.me/2015/9/13/cross-compile-8192eu-for-raspberrypi.182518.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:40:33.500

如果您正在为 x86 进行编译，应将内核头文件目录指定为`/lib/modules/linux-3.7.2-2-ARCH/build`. 对于交叉编译，我们将下载 linux 源代码或使用 SOC 制造商提供的 linux 源代码。必须指定下载的 linux 源的内核头文件才能编译。假设您在 /opt 目录下下载了 linux 源代码，那么示例“Makefile”将如下所示

```
obj-m += name-of-driver.o  
make -C /opt/linux(specify full version) M=${PWD} modules 
```

必须安装交叉编译器并导出 ie `export PATH=$PATH:<absolute-path-of-cross-compiler-binaries>`。使用 make 实用程序进行编译时提供`make ARCH=arm(Target for which you are compiling) CROSS_COMPILE=arm-none-linux-gnueabi-`. 完成所有这些过程后，您将成功为目标编译内核模块。

# abap - 在 4 个有条件的表中选择

> ID：15830077
> 
> 赞同：2
> 
> 时间：2013-04-05T09:16:19.417
> 
> 标签：abap

我需要从 likp 中选择 vbeln，并且我必须只选择在 vbuk 中标记为“C”的 vbeln。并且从那个 likp-vbeln(delivery) 中，我必须在 vekp 中搜索/选择其承运人，然后在搜索承运人之后，我必须从另一个表中搜索/选择其船型。我有 7 个字段的表，在下面的代码中，我选择了一些交付，但我不知道如何在 vbuk 表中添加条件，因为我不需要从 vbuk 中选择。谢谢。代码如下：

```
SELECT likp~vbeln
     tab~shiptype
     vekp~carrier
     vekp~service
     COUNT( DISTINCT vekp~shipment )
     SUM( vekp~packagecount )
     SUM( vekp~rate ) FROM vekp
  INNER JOIN tab
  ON tab~carrier = vekp~carrier INNER JOIN likp
  ON vekp~delivery = likp~vbeln INTO itab
  WHERE likp~erdat IN so_date AND
        vekp~delivery = likp~vbeln AND
        vekp~carrier = tab~code
        GROUP BY vbeln shiptype carrier service. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:04:22.880

您无需从表中进行选择即可加入，只需将 VBUK 添加到您的加入中即可。

我注意到您没有包含使用字段列表时需要的 INTO 子句。

就像是：

```
SELECT likp~vbeln
 tab~shiptype
 vekp~carrier
 vekp~service
 COUNT( DISTINCT vekp~shipment )
 SUM( vekp~packagecount )
 SUM( vekp~rate ) 
INTO (field1, fied2, etc)                    "<=== Change1
FROM vekp
INNER JOIN tab
  ON tab~carrier = vekp~carrier INNER JOIN likp
  ON vekp~delivery = likp~vbeln INTO itab
INNER JOIN VBUK                              "<=== Change2
  ON likp~vbeln = vbuk~vbeln
WHERE likp~erdat IN so_date AND
    vekp~delivery = likp~vbeln AND
    vekp~carrier = tab~code AND
    vbuk~fieldtocheck = 'C'                  "<=== Change3
GROUP BY vbeln shiptype carrier service. 
```

# powershell - 简单的递增/递减计数器

> ID：15830084
> 
> 赞同：3
> 
> 时间：2013-04-05T09:16:27.870
> 
> 标签：powershell, counter, increment, decrement

我想在 PowerShell 中做一个简单的计数器。它必须提示用户他们想要更高或更低的数字。

起始数字必须为0，不能小于0或大于10。如果用户想要更大的数字，则必须将数字增加1，如果较低的数字减少1。那么它必须能够停止在所需的数字。有了这个数字，我可以设置一个注册表值。

我不知道提示用户的有效方法。我可以使用[Read-Host](http://technet.microsoft.com/en-us/library/hh849945.aspx) cmdlet 来询问他们输入的是“更高”还是“更低”，但有没有更有效的方法来完成此操作？

例如，

```
$i = 0

while (($i -gt 0) -or ($i -lt 10)){
    $j = Read-Host "The current number is $i, would you like a higher/lower number, or quit?"

    if ($j -eq "higher") {
        $i++
        Write-Host "The current number is $i"
    } elseif ($j -eq "lower") {
        $i--
        Write-Host "The current number is $i"
    } elseif ($j -eq "quit") {
        Write-Host "Final number is: $i"
        break
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:02:09.917

您可以使用是/否提示窗口来获取用户输入。

```
$a = new-object -comobject wscript.shell
$intAnswer = $a.popup("Do you want to delete these files?", 0, "Delete Files", 4)
If ($intAnswer -eq 6) {
    $a.popup("You answered yes.")
}
else {
    $a.popup("You answered no.")
} 
```

如果您替换 popup() 函数的第四个参数中的“3”，您将在提示窗口中获得是、否和取消按钮。

参考：*[在 Windows PowerShell 中提供是/否提示](http://gallery.technet.microsoft.com/scriptcenter/1a386b01-b1b8-4ac2-926c-a4986ac94fed)*

# ruby-on-rails - 无法连接到 ec2 服务器上的 rds，缺少 mysql 套接字

> ID：15830088
> 
> 赞同：3
> 
> 时间：2013-04-05T09:16:41.253
> 
> 标签：ruby-on-rails, amazon-web-services, amazon-rds

我有一个 ec2 服务器和 rds 服务器。和一个 Ruby On Rails 应用程序连接到具有这些设置的 rds 在本地 ENV 中为我工作：

```
host: myappnameandhash.us-west-2.rds.amazonaws.com
adapter: mysql2
encoding: utf8
reconnect: false
database: mainDb
pool: 20
username: root
password: xxxx
socket: /var/run/mysqld/mysqld.sock
port: 3306 
```

但是在我的 EC2 服务器上，我没有那个 mysqld.sock 文件，所以我收到了这个错误：

> FATAL: 连接 MySQL 失败 (error=Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2))

我需要安装什么才能拥有插座？

谢谢

更新：

我删除了套接字定义和端口。我使用 capistrano 进行部署，现在我 ssh 到我的服务器并转到“当前”文件夹。在那里我尝试运行：rake ts:start，我得到以下信息：

> 耙中止！无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

但我什至在我的 database.yml 文件中都没有套接字定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:59:41.223

从您的 database.yml 文件中删除套接字和端口号，然后尝试，它会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:28:24.843

您必须指定 RDS 的“主机”，并在 RDS 中配置安全组以允许您的实例连接到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T14:30:40.817

我知道这已经有一段时间了，我的 EC2 服务器连接到 RDS 时遇到了这个问题。想分享一下我是如何解决这个问题的。

首先从 database.yml 帮助中删除`socket`和`port`

```
#In your database.yml

development:
  #some configuration

staging:
  #some configuration

production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  pool: 20
  host: url.to.rds.server
  database: your-database
  username: your-username
  password: your-password 
```

要在生产环境中运行这个 rake 命令，您需要指定您的`rails-env`，例如，如果您正在使用`production`环境，它应该是

```
bundle exec rake ts:start RAILS_ENV=production 
```

# solr - 重新加载 SolrCloud 配置（存储在 Zookeeper 上） - schema.xml

> ID：15830090
> 
> 赞同：18
> 
> 时间：2013-04-05T09:16:47.393
> 
> 标签：solr, apache-zookeeper, solr4, solrcloud

我已经使用独立的 zookeeper 设置了 SolrCloud 复制。但现在我希望对我的 Schema.xml 进行一些更改并重新加载核心。问题是，当我运行单个服务器 Solr（没有 solrcloud）时，会加载新模式，但我不知道如何在所有复制服务器上重新加载模式。我尝试在其中一台服务器上重新加载架构，但没有任何预期的影响。有没有一种方法可以在使用 Zookeeper 的分布式复制设置中重新加载 Solr 中的 schema.xml。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-05T13:03:35.947

刚刚找到了我们需要将更改后的配置推送到 zookeeper ensemble 的解决方案。

只需使用

```
sh zkcli.sh -cmd upconfig -zkhost  127.0.0.1:2181  -collection collection1 -confname myconf -solrhome ../solr -confdir ../solr/collection1/conf 
```

zkcli.sh 位于 example/cloud-scripts 下

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-11T16:22:11.910

**标记为正确的答案是错误的。**你必须使用[Solr Collection API](https://cwiki.apache.org/confluence/display/solr/Collections+API)

使用 Solr[`zkcli.sh`](https://cwiki.apache.org/confluence/display/solr/Command+Line+Utilities)实用程序上传新的集合（索引）配置后，配置将不会自动重新加载。

Solr Collection API 用于 SolrCloud，配置重新加载将分布在整个集群中。据我所知，Solr Collection API 至少从 Solr 4.8 开始可用。

该过程略有不同，使用这些 API，您**只需一次 API 调用**即可在整个集群上重新加载配置。

只需使用 Solr[`zkcli.sh`](https://cwiki.apache.org/confluence/display/solr/Command+Line+Utilities)实用程序上传您的更新配置。请注意不要将 Solr`zkcli.sh`与 Zookeeper混淆，`zkCli.sh`它们的名称完全相同，但用途完全不同。

所以正如所说的使用 Solr `zkcli.sh`（在撰写本文时在目录中`server/scripts/cloud-scripts`）：

```
./zkcli.sh -cmd upconfig -zkhost 127.0.0.1:2181 -collection collection1 -confname myconf -confdir path/to/solr/collection1/conf 
```

然后你可以重新加载配置`collection1`：

```
http://server1:8983/solr/admin/collections?action=RELOAD&name=collection1 
```

整个集群将被更新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-13T14:24:57.170

**这对我有用：**

```
 bin/solr zk -upconfig -n collectionName -d pathto/Conf_directory -z localhost:2181/solr 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-22T11:28:24.123

下面是 Windows 的命令，

它在 Unix 中几乎相同，我们只需要更改 Solr lib 的路径和类路径分隔符，`; & :`因为它的 java 命令也应该在 Unix 中运行。

```
java  -Dlog4j.configuration="file:E:/solr-5.5.1/server/scripts/cloud-scripts/log4j.properties" -classpath .;E:/solr-5.5.1/server/solr-webapp/webapp/WEB-INF/lib/*;E:/solr-5.5.1/server/lib/ext/* org.apache.solr.cloud.ZkCLI -cmd upconfig -zkhost 192.168.42.13:2787 -confdir E:/New_Solor_Conf -confname Solor_conf 
```

关于命令的简要细节如下：

**用于日志记录的 log4j 配置。**

*   -Dlog4j.configuration="文件:E:/solr-5.5.1/server/scripts/cloud-scripts/log4j.properties

**运行“org.apache.solr.cloud.ZkCLI”的类路径。**班级。

确保 UNIX 和 Windows 有不同的 : (Unix 分隔符) ;(Windows 分隔符)

*   -classpath .;E:/solr-5.5.1/server/solr-webapp/webapp/WEB-INF/lib/ *;E:/solr-5.5.1/server/lib/ext/*
*   -zkhost 192.168.42.13:2787（Solr **Zookeeper 运行的远程主机和端口**）
*   -confdir E:/New_Solor_Conf **（我们需要上传的本地目录。）**
*   -confname Solor_conf **远程实例名称。**

**如果您不使用正确的类路径，您将收到如下错误：**

```
 Error: Could not find or load main class org.apache.solr.cloud.ZkCLI 
```

**或者**

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFacto
    ry
            at org.apache.solr.common.cloud.SolrZkClient.<clinit>(SolrZkClient.java:
    71)
            at org.apache.solr.cloud.ZkCLI.main(ZkCLI.java:183)
    Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
            at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
            at java.net.URLClassLoader$1.run(URLClassLoader.java:355) 
```

我能够上传我的本地配置更改，而无需实际登录到远程 Solr 框。希望它也适用于其他人。

# c++ - 数据错误，重试

> ID：15830097
> 
> 赞同：1
> 
> 时间：2013-04-05T09:17:06.953
> 
> 标签：c++

我在一本书中找到了这个代码片段：

```
int ival;
// read cin and test only for EOF; loop is executed even if there are other IO failures
while (cin >> ival, !cin.eof()) {
    if (cin.bad())         // input stream is corrupted; bail out
        throw runtime_error("IO stream corrupted");
    if (cin.fail()) {                        // bad input
        cerr<< "bad data, try again";        // warn the user
        cin.clear(istream::failbit);         // reset the stream
        istream::iostate cin_state = cin.rdstate();
        continue;                            // get next input
    }
    // ok to process ival
} 
```

如果我在命令窗口点击'f'，那么无数“坏数据，重试”，cin_state为0X02，等于badbit。Failbit一直不清楚，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T09:20:31.467

问题是它`f`永远不会从输入流中删除，因此`cin >> ival`不断尝试一遍又一遍地读取它。

你需要跳过它。例如，请参阅[istream::ignore( ) 如何工作？](https://stackoverflow.com/questions/14693106/how-does-istreamignore-work)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:45:01.887

虽然 NPE 关于不从流中删除违规数据的观点是正确的，但这并不是唯一（或最严重）的问题。

您应该使用`cin.clear()`，这与`cin.clear(ios_base::goodbit)`默认参数相同。正如您在评论中推测的那样，`cin.clear(istream::failbit)`不会重置`cin`为良好状态。事实上，**它将流设置为失败状态**。这似乎违反直觉，但`clear`将流的状态设置为（或“将其清除为”）传递的参数。关于其操作还有一些其他细节，但它们与本次讨论无关。

确保你调用`clear`before `ignore`，否则后者将不起作用。最后，为了防止任意长的无效条目，将`std::numeric_limits<int>::max()`to`ignore`作为第一个参数传递。

修改后的代码片段应该是：

```
int ival;
// read cin and test only for EOF; loop is executed even if there are other IO failures
while (cin >> ival, !cin.eof()) {
    if (cin.bad())         // input stream is corrupted; bail out
        throw runtime_error("IO stream corrupted");
    if (cin.fail()) {                        // bad input
        cerr<< "bad data, try again";        // warn the user
        cin.clear();         // or cin.clear(istream::goodbit);
        istream::iostate cin_state = cin.rdstate();
        cin.ignore(std::numeric_limits<int>::max(), '\n');
        continue;                            // get next input
    }
    // ok to process ival
} 
```

至于为什么你在 C++ Primer 中发现了这个，我不能说。我没有读过这本书，但我知道它的思想相当好。我建议检查您的版本的年龄并查找勘误表。

# css - 水平显示四个列表

> ID：15830098
> 
> 赞同：0
> 
> 时间：2013-04-05T09:17:07.507
> 
> 标签：css, html

如何水平显示四 (4) 个无序列表？

**列表.html**

```
<!DOCTYPE html>

<html lang='en'>
<head>
    <meta charset="UTF-8" /> 
    <title>
        HTML Lists
    </title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>

<h1>
    HTML Lists
</h1>

<div id="container">
    <ul id="k">
        <li>katakana</li>
        <li>katakana</li>
        <li>katakana</li>
        <li>katakana</li>
        <li>katakana</li>   
    </ul>

    <ul id="ki">
        <li>katakana-iroha</li>
        <li>katakana-iroha</li>
        <li>katakana-iroha</li>
        <li>katakana-iroha</li>
        <li>katakana-iroha</li> 
    </ul>

    <ul id="h">
        <li>hiragana</li>
        <li>hiragana</li>
        <li>hiragana</li>
        <li>hiragana</li>
        <li>hiragana</li>   
    </ul>

    <ul id="hi>
        <li>hiragana-iroha</li>
        <li>hiragana-iroha</li>
        <li>hiragana-iroha</li>
        <li>hiragana-iroha</li>
        <li>hiragana-iroha</li> 
    </ul>

    <ul id="i">
        <li>Image</li>
        <li>Image</li>
        <li>Image</li>
        <li>Image</li>
        <li>Image</li>  
    </ul>
</div>

</body>
</html> 
```

**样式.css**

```
#container  {
    display: inline;
}

ul {
    list-style-position: inside;    
}

#k  {
    list-style-type: katakana;  
}

#ki{
    list-style-type: katakana-iroha;

}

#h {
    list-style-type: hiragana;
}

#hi {
    list-style-type: hiragana-iroha;
}

#i {
    list-style-image: url(images/myimage.png);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:19:57.797

```
ul {
    list-style-position: inside;    
    display:inline-block;
    vertical-align:top;
} 
```

并且`display:block`在`#i`

```
#i {
    list-style-image: url(images/myimage.png);
    display:block;
} 
```

小提琴- ~~[http://jsfiddle.net/nNRDa/](http://jsfiddle.net/nNRDa/)~~ [http://jsfiddle.net/nNRDa/1/](http://jsfiddle.net/nNRDa/1/)

注意：IE7 只支持`display:inline-block`自然内联的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:41:44.823

如果已将 with 提供给 ul 和容器，则以下内容将起作用

```
#container  {
display: block;
width:100%;       
overflow:hidden;        
}

ul {
width:15%;
float:left;
margin:20px 3% 0 0;
display:block;
vertical-align:top;
} 
```

宽度也可以以 px 为单位。

# sql-server - 在非聚集主键索引中包含其他列

> ID：15830099
> 
> 赞同：12
> 
> 时间：2013-04-05T09:17:11.080
> 
> 标签：sql-server, sql-server-2008

我已将表上的主键定义为`nonclustered`. 对于显式创建的非聚集索引，`create nonclustered index`可以包含其他（非索引）列。隐式创建的主键非聚集索引也可以吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T09:30:45.687

INCLUDE 列的语法仅适用于[CREATE NONCLUSTERED INDEX](http://msdn.microsoft.com/en-us/library/ms188783.aspx)，特别是

> INCLUDE (column [ ,... n ] ) 指定要添加到非聚集索引的叶级别的非键列。非聚集索引可以是唯一的或非唯一的。

它是否不适用于 ADD CONSTRAINT，因此即使它是非集群的，也不能包含任何具有主键的列。

PRIMARY KEY 可用作记录的唯一标识符，并且是可用于 REFERENTIAL 约束的候选键。但是，出于性能原因，如果您在另一列上有一个聚集键，并且没有其他候选键可提升为 PK，您始终可以在主键列上创建一个***额外***的非聚集索引并包含其他列上索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-27T13:26:09.857

尽管无法使用主键或唯一约束指定包含的列，但一种解决方法是使用具有相同键的唯一非聚集索引以及包含的列。这不仅提供与主键约束相同的唯一性保证，外键也[可以引用唯一约束/索引键](https://www.dbdelta.com/secrets-of-foreign-key-index-binding/)，提供与被引用主键相同的引用完整性。

这种方法的好处是特殊用例的性能，例如当最佳聚集索引选择不是主键并且包含列对于性能来说是可取的。

缺点是只能指定具有主键约束的声明性级联 DRI，而且不直观。

# highstock - Highstock 问题 - 无法正确绘制和绘制图表

> ID：15830101
> 
> 赞同：0
> 
> 时间：2013-04-05T09:17:16.957
> 
> 标签：highstock

我正在研究使用`Highstock`.

**问题一：**

我尝试使用图形显示 ohlc 数据，使用`ohlc`图形显示高低，使用图表显示`areasplinerange`音量`column`。

一切正常，如果我放大`1m`, `3m`, `6m`, `YTD`, 和`1y`. 这是快照。[链接1](http://imgur.com/3X1odFK)。但如果放大到, 图表就会像这个[link2](http://imgur.com/7ML3Xeb)`All`一样乱七八糟。

我的编码错了还是它的错误？

**问题2：**

在同一张图表中，我有将图表类型从 更改为 的`ohlc`代码`line`。当我放大到`1m`,时它工作正常`3m`。这是快照[链接3](http://imgur.com/QPvIIqb)。但是当我放大到`6m`、`1y`和时，它没有显示折线图`All`。这是快照[链接4](http://imgur.com/9YFuSPE)。

这怎么可能发生？

谢谢您的帮助。

**代码：** 这是我用来显示图表的代码

```
$.getJSON(url, function (data1) {
    $.getJSON(urlprediction, function (data2) {
        var ohlc = [],
            volume = [],
            closed = [],
            forecast = [],
            dataLength1 = data1.length;
            dataLength2 = data2.length;

        for (i = 0; i < dataLength1; i++) {
            ohlc.push([
                data1[i][0], // the date
                data1[i][1], // open
                data1[i][2], // high
                data1[i][3], // low
                data1[i][4] // close
            ]);

            closed.push([
                data1[i][0], // the date
                data1[i][4] // close
            ]);

            volume.push([
                data1[i][0], // the date
                data1[i][5] // the volume
            ])
        }

        for (i = 0; i < dataLength2; i++) {         
            forecast.push([
                data1[i][0], // the date
                data1[i][1],
                data1[i][2], // close
            ])
        }

        // set the allowed units for data grouping
        var groupingUnits = [[
            'week',                         // unit name
            [1]                             // allowed multiples
        ], [
            'month',
            [1, 2, 3, 4, 6]
        ]];

        $('#container').highcharts('StockChart', {

                rangeSelector: {
                    selected: 1
                },
                title: {
                    text: title
                },  
                yAxis: [{
                    title: {
                        text: 'OHLC'
                    },
                    height: 360,
                    lineWidth: 2
                }, {
                    title: {
                        text: 'Volume'
                    },
                    top: 433,
                    height: 100,
                    offset: 0,
                    lineWidth: 2
                }],
                series: [{
                    type: 'ohlc',
                    name: stockname,
                    data: ohlc,
                }, {
                    type: 'areasplinerange',
                    name: stockname,
                    data: data2,
                }, {
                    type: 'column',
                    name: 'Volume',
                    data: volume,
                    yAxis: 1,
                }]
        });
    });
}); 
```

# xamarin - Xamarin：库支持

> ID：15830105
> 
> 赞同：1
> 
> 时间：2013-04-05T09:17:27.913
> 
> 标签：xamarin

我想在我的 Xamarin.Android 和 Xamarin.iOS 项目上使用 C++ 库（静态/动态）。C++ 库应该是静态的还是动态的，以便在 Xamarin.Android 和 Xamarin.iOS 项目中使用，因为我正在考虑使用 C# DLLimport/SWIG 工具将 C++ 库用作 C#。

（我听说 iOS 禁止在应用程序中使用动态库。）对我来说最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:28:16.763

您是对的，iOS 不允许您使用动态库，因此至少对于 iOS，您必须将 C++ 库构建为静态库。

我相信静态库和动态库都可以在 Android 上正常运行，因此您选择哪一个并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T23:28:45.643

iOS8 在 9 月发布后，您将能够为所有设备添加对 iOS Embedded 框架的支持，最低部署目标为 iOS8。事实上你现在可以在你的目标不低于iOS8时添加动态库。[无论如何，这里](https://stackoverflow.com/questions/25909870/xcode-6-and-embedded-frameworks-only-supported-in-ios8/25910262#25910262)有一些陷阱。

# java - SQLite 返回的行数为零

> ID：15830110
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:17:37.650
> 
> 标签：java, android, sqlite

```
 public class SQLiteProvider extends SQLiteOpenHelper {

    private static SQLiteDatabase sqliteDatabase ;  

    public SQLiteProvider ( Context context ) {
        super ( context , DATABASE_NAME , null , DATABASE_VERSION ) ;
    }

    @Override
    public void onCreate ( SQLiteDatabase sqliteDatabase ) {
        try {
            this . sqliteDatabase = this . getWriteabaleDataBase ( ) ;
            this . sqliteDatabase . execSQL ( TABLE_CREATE ) ;
            this . sqliteDatabase . close ( ) ;
        } catch ( Exception exception ) {
            Log . i ( LOG_TAG , "Exception is `" + exception . toString ( ) + "`" ) ;
        }
    }

    private void insert ( String column1Value , String column2Value ) {
        try {
            sqliteDatabase = this . getWritableDatabase ( ) ;
            sqliteDatabase . execSQL ( QUERY_TO_INSERT ) ;
            sqliteDatabase . close ( ) ;
        } catch ( Exception exception ) {
            Log . i ( LOG_TAG , "Exception is `" + exception . toString ( ) + "`" ) ;
        }
    }

    private String selectColumn1byColumn2 ( String column2Value ) {
        try {
            sqliteDatabase . getWritableDatabase ( ) ;
            cursor = sqliteDatabase . rawQuery ( SELECT_QUERY ) ;
            sqliteDatabase . close ( )
        } catch ( Exception exception ) {
            Log . i ( LOG_TAG , "Exception is `" + exception . toString ( ) + "`" ) ;
        }
        if ( cursor . getCount ( ) > 0 ) {
            return cursor . getString ( 0 ) ;
        } else { 
            Log . i ( LOG_TAG , "selectColumn1byColumn2 row count is zero " ) ; 
            return "";
        }
    }

    public String doIt ( ) {
        insert ( VARIABLE1 , VARIABLE2 ) ;
        return selectColumn1byColumn2 ( VARIABLE2 ) ;
    }
} 
```

所有方法都使用相同的 sqliteDatabase 对象，并且每个方法都在开始时调用 getWritableDatabase。函数 doIt ( ) 只返回空字符串并记录行数为零 ( `selectColumn1byColumn2 row count is zero`) 且没有任何异常。我用事务和不做，它都不起作用我怎么做对？

4月8日更新

我已经做好了

添加 finally 块`sqliteDatabase . close ( )`

必要时添加`cursor . close ( )`之前`sqliteDatabase . close ( )`

更改`cursor . getString ( 0 )`为`cursor . getString ( cursor . getColumnIndex ( TABLE_COLUMN1 ) )`

更改`if ( cursor . getCount ( ) > 0 )`为`if ( cursor . moveToFirst ( ) )`

现在它返回的行数为零并且不适用于 Jelly Bean 4.2 - android 应用程序崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:24:39.090

更改您的 selectColumn1byColumn2() 方法如下

```
 private String selectColumn1byColumn2 ( String column2Value ) {
        try {
            sqliteDatabase . getWritableDatabase ( ) ;
            cursor = sqliteDatabase . rawQuery ( SELECT_QUERY ) ;
             if ( cursor . getCount ( ) > 0 ) {
            return cursor . getString ( 0 ) ;
        } else { 
            Log . i ( LOG_TAG , "selectColumn1byColumn2 row count is zero " ) ; 
            return "";
          } 
```

> ~~sqlite 数据库。关 （ ）;~~

```
 } catch ( Exception exception ) {
            Log . i ( LOG_TAG , "Exception is `" + exception . toString ( ) + "`" ) ;
        }
         finally
        {
          cursor.close();
          sqliteDatabase . close ( );
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:00:38.577

你没有得到想要的结果的原因是因为你先关闭数据库然后从游标中读取。

如果您首先从 cursur 读取，并且当您使用完游标关闭数据库时，它应该可以工作。

名叫alibi的用户在他的回答中给出了很好的解释：[Clicky](https://stackoverflow.com/questions/5450050/android-sqlitedatabases-and-cursors)

> 1）游标只是一个指向查询返回的数据的指针，它不包含查询中的所有数据。这是为了提高性能/效率（不会一次读取大型结果集 -> 使用更少的内存）。因此，如果关闭数据库，游标无法检索数据 -> 它是空的。
> 
> 2) 当你关闭一个游标时，所有关联的资源都被释放->你不能访问与这个游标关联的数据（因为它已经被释放了），但是你可以使用这个游标或其他游标进行新的查询。当你关闭一个数据库时，你不能再查询它（直到你重新打开它）。
> 
> 3) 始终关闭游标。否则你会遇到问题——如果游标没有关闭并且新的查询被阻止，GC 会抱怨。
> 
> 4）如果您在应用程序完成时关闭它，是的

再次，功劳归于不在场证明。

### 更新

```
private String selectColumn1byColumn2 ( String column2Value ) {
    try {
        sqliteDatabase . getWritableDatabase ( ) ;
        cursor = sqliteDatabase . rawQuery ( SELECT_QUERY ) ;

        cursor.moveToFirst();
        if ( cursor . getCount ( ) > 0 ) {
            return cursor . getString ( 0 ) ;
        } else { 
            Log . i ( LOG_TAG , "selectColumn1byColumn2 row count is zero " ) ; 
            return "";
        }
    } catch ( Exception exception ) {
        Log . i ( LOG_TAG , "Exception is `" + exception . toString ( ) + "`" ) ;
    } finally {
        cursor.close(); 
        sqliteDatabase . close ( );
    }
} 
```

cursor.close 和 sqliteDatabase.close() 被移动到 finally 块。这将确保在您使用完数据库和游标后正确清理它。

我还添加了 cursor.moveToFirst(); 在您第一次调用 getCount() 之前调用；

不是 100% 肯定需要它，但值得一试。

# html - 如何更改字体的字体大小 内的元素? I have built this fiddle as an example of what I am doing. What I am trying to do works fine in Firefox. With the font-size being 14px when you open up the select options. However looking at it in Google Chrome it picks th

> ID：15830115
> 
> 赞同：44
> 
> 时间：2013-04-05T09:18:02.633
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-05T09:20:49.697

一种解决方案可能是将选项包装在[**optgroup 中**](http://www.w3schools.com/tags/tag_optgroup.asp)：

```
optgroup { font-size:40px; }
```

```
<select>
  <optgroup>
    <option selected="selected" class="service-small">Service area?</option>
    <option class="service-small">Volunteering</option>
    <option class="service-small">Partnership &amp; Support</option>
    <option class="service-small">Business Services</option>
  </optgroup>
</select>
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-05T09:35:38.943

与 HTML 中的大多数表单控件一样，将 CSS 应用到元素`<select>`和`<option>`元素的结果在不同浏览器之间存在很大差异。正如您所发现的，Chrome 不会让您`<option>`直接将字体样式应用于元素 --- 如果您对其执行 Inspect Element，您会看到`font-size: 14px`声明被交叉，就好像它已被级联覆盖一样，但实际上是因为 Chrome 忽略了它。

但是，Chrome*会让*您将字体样式应用于[`<optgroup>`元素](https://developer.mozilla.org/en-US/docs/HTML/Element/optgroup)，因此要获得您想要的结果，您可以将所有`<option>`s 包装在 an 中`<optgroup>`，然后将您的字体样式应用于`.styled-select optgroup`选择器。如果你想要 optgroup sans-label，你可能需要做一些巧妙的 CSS 定位或隐藏顶部显示标签的白色区域，但这应该是可能的。

分叉到一个新的 JSFiddle 来向你展示我的意思：

[http://jsfiddle.net/zRtbZ/](http://jsfiddle.net/zRtbZ/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T09:22:29.173

```
.service-small option {
    font-size: 14px;
    padding: 5px;
    background: #5c5c5c;
} 
```

我认为这是因为您在类代码的开头使用了 .styled-select 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T00:51:19.487

对我来说，我直接将样式应用于`<option>`标签。

例如，我正在创建自己的文本编辑器，我想显示一个选择菜单来选择标题类型。我想用每个选项的字体大小显示每个选项。例如，如果第一个选项是**Header 1**，那么我想要 h1 字体大小的单词 Header 1 。所以，我`h1`直接在 option 标签上使用了 bootstrap 类。

```
<option value="h1" class="h1"> Header 1 </option> 
```

[![在此处输入图像描述](https://i.stack.imgur.com/8L1Vx.png)](https://i.stack.imgur.com/8L1Vx.png)

# c# - c# Selenium WebDriver。Firefox 浏览器阻止弹出窗口

> ID：15830120
> 
> 赞同：1
> 
> 时间：2013-04-05T09:18:29.907
> 
> 标签：c#, firefox, selenium-webdriver

我正在使用 Firefox 19.0.2、Selenium 2.31.2.0

在设置方法中，我通过 firefox 配置文件 firefoxProfile.SetPreference("dom.disable_open_during_load", true); 此选项是必需的，因为客户希望在启用弹出阻止的情况下一切正常。

在测试中，我需要将内容分享给外部社区。当我按下按钮时，会出现外部社区弹出窗口。问题是当我手动执行此操作时，一切正常并且弹出窗口不会阻塞。当我尝试通过 WebDriver 单击此按钮时，Firefox 会阻止弹出窗口。

像这样点击按钮：

```
//kind of mouse over emulation
    new Actions(Driver).MoveToElement(_element).Release(_element).Build().Perform();
    _element.Click(); 
```

我认为问题在于本机按钮单击和 WebDriver 执行的单击之间的差异。在 Firefox 配置文件中设置`EnableNativeEvents = true`不是解决方案，因为测试变得非常不稳定。

也许有人面临这个问题并可以提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:31:53.313

动作由 3 个步骤组成。

配置动作

```
Actions builder = new Actions(driver); 
builder.MoveToElement(_element).Release().click(); 
```

采取行动

```
Action pushButton = builder.build(); 
```

执行

```
pushButton.perform(); 
```

告诉我你是否改进了。

编辑 ：

`.Release()`用于拖放操作。

我在[这里](http://pragmaticqa.co.uk/blog/2009/04/selenium-rc-and-pop-up-handling/)和[这里](http://wiki.openqa.org/display/SEL/Selenium+Core+FAQ#SeleniumCoreFAQ-HowdoIworkwithapopupwindow?)找到了 2 个规格。好读。

# json - 雅虎 placefinder api 停止工作

> ID：15830124
> 
> 赞同：0
> 
> 时间：2013-04-05T09:18:47.207
> 
> 标签：json, geolocation, yahoo-api

Yahoo placefinder api 已停止工作。我知道这是一个已弃用的版本，并且已被雅虎停产。

下面是我的网址。

[http://where.yahooapis.com/geocode?postal=122001&country=India&appid=XXXXXXXX&flags=j](http://where.yahooapis.com/geocode?postal=122001&country=India&appid=XXXXXXXX&flags=j)

我只想知道这个 api 的免费替代品。

在我的应用程序中，当用户输入密码时，此 URL 会预先填充他的城市、州和国家/地区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:25:38.783

使用 YQL 似乎仍然可以正常工作： http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20geo.placefinder%20where%20postal%3D%22122001%22% [20and%20country %3D%22india%22&诊断=真](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20geo.placefinder%20where%20postal=%22122001%22%20and%20country=%22india%22&diagnostics=true)

这也是，[http ://gws2.maps.yahoo.com/findlocation?pf=1&postal=122001&country=india](http://gws2.maps.yahoo.com/findlocation?pf=1&postal=122001&country=india)

# database - db2：将 ebcdic 数据从大型机加载到 Linux 以保持 ebcdic

> ID：15830136
> 
> 赞同：0
> 
> 时间：2013-04-05T09:19:23.213
> 
> 标签：database, load, db2, ebcdic

我需要将来自大型机 DB2 的表（即数据编码为 EBCDIC）加载到 Linux DB2 上，并将它们保存在 Linux 中的 EBCDIC 中。

我尝试在 Linux 上的 CREATE DATABASE 上使用 TERRITORY 和 CODEPAGE 参数，但无法达到正确的值。

有人可以告诉我该怎么做吗？提前致谢

问候

迪迪埃

# php - 从当前 url 获取 slug

> ID：15830138
> 
> 赞同：8
> 
> 时间：2013-04-05T09:19:26.153
> 
> 标签：php

我有这样的网址：

```
http://localhost/hi-every-body/
http://s1.localhost/hello-world/
http://s2.localhost/bye-world/ 
```

我想要来自 URLS 的页面“slug”，例如。

```
hi-every-body
hello-world
bye-world 
```

在 PHP 中执行此操作的简单方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-05T09:21:21.737

这应该正是这样做的：

```
trim(parse_url($url, PHP_URL_PATH), '/'); 
```

它采用路径并去除两侧的正斜杠。

仅获取路径的最后一部分：

```
basename(parse_url($url, PHP_URL_PATH)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-21T14:23:11.887

一个可能更强大的解决方案是：

```
$slugs = explode("/", $_GET['params']); 
```

这将为您提供一个包含 URL 中每个元素的数组。

例如。`http://localhost/one/hippo/cake?t=21`

变成数组：

```
Array ( 
   [0] => one 
   [1] => hippo 
   [2] => cake 
) 
```

这使您可以根据需要使用每个元素。

# android - Android OpenGL 中的平滑动画过渡逻辑

> ID：15830139
> 
> 赞同：1
> 
> 时间：2013-04-05T09:19:27.607
> 
> 标签：android, animation, libgdx

我有一个使用 openGL 和 LibGDX 开发的 Android 应用程序。
现在我不知道如何在一组动画之间编写平滑过渡的策略。

例子：

我们有一个`cat`演员。
它的动画由一组与变换矩阵配对的关键帧组成。
我们为此设置了 5 个预设动画`cat`：
`idle`、`walk left`、`walk right`和。`jump``lie down`

我们如何 在动画播放到一半时从让我们说
`walk right`=> `lie down`
`walk right`=>过渡？`walk left`
`walk right`

现在，一旦动画开始，它需要播放 1 个完整周期直到结束。
这是为了使`cat`罐子移回其中性位置。
因此它可以播放下一个从中立位置开始的动画。
最终的结果是不自然的和生涩的。

我应该使用什么方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T00:33:31.897

即使前一个动画没有完成，也只是开始下一个动画是标准方式。它看起来不错，不要等待第一个动画完成。

如果您仍然认为它看起来不自然。然后你必须在动画之间创建一个非常快速的“过渡帧”，让它看起来更自然。如果您问我，不值得付出努力，请尝试第一种方式:)

# asp.net-mvc - 如果文件名包含点，则找不到 MVC Razor View

> ID：15830140
> 
> 赞同：2
> 
> 时间：2013-04-05T09:19:28.240
> 
> 标签：asp.net-mvc, razor, http-status-code-404, asp.net-mvc-partialview

如果路线包含点，我在访问路线时遇到问题。为了重现，创建一个默认的 MVC4 WebApi 应用程序。走默认路线...

```
routes.MapRoute(
   name: "Default",
   url: "{controller}/{action}/{id}",
   defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

编写控制器如下...

```
public class HomeController : Controller
{
   public ActionResult Index(string id)
   {
      if (id == null)
      {
         return View();
      }
      else
      {
         return PartialView(id);
      }
   }
} 
```

并在现有的“index.cshtml”旁边创建两个文件“test.cshtml”和“test.menu.cshtml”。

打开 /home/index/test 按预期工作。它带回了“test.cshtml”的内容。

但是，打开 /home/index/test.menu 会返回 404 错误。

为什么会这样？又该如何避免呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:21:42.103

您看到的 404 错误来自 IIS。MVC 路由模块永远无法控制。

将以下选项添加到`modules`部分的`<system.webServer>`部分`web.config`将确保尝试 MVC 路由并应该解决您的问题：

`runAllManagedModulesForAllRequests="true"`

在我的 web.config 中没有现有`modules`部分，因此我在该部分中添加了以下行`<system.webServer>`：

`<modules runAllManagedModulesForAllRequests="true" />`

现在它对我有用。

# javascript - 为什么我的代码循环两次？

> ID：15830145
> 
> 赞同：0
> 
> 时间：2013-04-05T09:19:46.880
> 
> 标签：javascript, jquery

我正在制作一个数据可视化工具，您可以在其中输入自己的数据。数据值存储在无序列表中，如下所示`<ul><li data-name='name'><a href='#' onclick='showEditDv(this);'>Edit</a><span class='name'>name</span><span class='seperator'> | </span><span class='value'>7</span></li></ul`：列表中可以有多个列表项。当您单击 Edit 按钮时，它会调用该`showEditDv()`函数，并提供对自身的引用。在展示函数之前，我会说`data`对象是这样组织的：

```
data ->
    name: "root",
    children: [ {name: "something", size: "7"},
        {name: "something-else", size: "999"} ] 
```

这是函数的代码：

```
function showEditDv(object) {
    var name = $(object).parent().attr("data-name"),
        input = new Opentip($(object), {removeElementsOnHide: true, target: null, showOn: null, hideTrigger: "closeButton"}),
        disabled = (data.children[getChildIndexByName(name)].hasOwnProperty("children")) ? "disabled" : "";

    input.setContent("<label>Name:</label><input type='text' data-prevname='" + name + "' value='" + name + "' class='dv-add-name' /><label>Value:</label><input " + disabled + " type='text' class='dv-add-value' value='" + data.children[getChildIndexByName(name)].size + "' /><button class='callEditDv'>Apply</button>"); // Set content of opentip

    input.show();

    $("body").on("click", ".callEditDv", function() {
        var newname = $(this).siblings(".dv-add-name").val(),
            prevname = $(this).siblings(".dv-add-name").attr("data-prevname"),
            value = $(this).siblings(".dv-add-value").val();

        if (newname !== prevname)
        {
            data.children[ getChildIndexByName(prevname) ].name = newname; // Update name

            $(object).parent().attr("data-name", newname); // Update parent data

            $(object).siblings(".name").text(newname); // Update form
        }

        if (data.children[ getChildIndexByName(newname) ].size !== value)
        {
            data.children[ getChildIndexByName(newname) ].size = value;
            $(object).siblings(".value").text(value);
        }
        input.hide();
    });
} 
```

它使用 Opentip，这只是一种创建动态弹出窗口/工具提示的方式。问题是，一旦您更改了数据值一次，当您再次尝试更改它时，它会循环两次代码！第一次一切都按预期工作，但第二次它再次使用相同的`prevname`，这意味着`getChildIndexByName`返回`undefined`并且它无法设置导致错误的变量。`getChildIndexByName`循环`data.children`检查名称的值，直到找到匹配项，然后返回数组中对象的索引。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:29:54.947

试试这个：

```
$("body").off('click').on("click",... 
```

[jQuery 文档](http://api.jquery.com/unbind/#entry-longdesc)

> 使用 .bind() 附加的事件处理程序可以使用 .unbind() 删除。（从 jQuery 1.7 开始，首选 .on() 和 .off() 方法来附加和删除元素上的事件处理程序。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:24:39.377

改变：

```
$("body").on("click",... 
```

到

```
$("body").unbind('click').on("click", 
```

希望这有帮助！

# c++ - 在 Sublime Text 2 中运行带有输入的 C++ 文件

> ID：15830149
> 
> 赞同：1
> 
> 时间：2013-04-05T09:20:20.960
> 
> 标签：c++, sublimetext2

编译 C++ 源代码后，我想通过 sublime text 命令使用输入文件运行它。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:17:44.270

如果您的意思是 C++ 构建文件之后的参数，我已经找到了一种方法来以一种狡猾的方式做到这一点......我为 c++11 创建了一个新的构建系统并将输入文件（参见下面的 input_file）添加到运行部分。

```
{
"cmd": ["g++", "-Wall", "-Wextra", "-pedantic", "-std=c++0x",   "${file}", "-o", "${file_path}/${file_base_name}"],
"file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
"working_dir": "${file_path}",
"selector": "source.c, source.c++",

"variants":
[
    {
        "name": "Run",
        "cmd": ["bash", "-c", "g++ -Wall -Wextra -pedantic -std=c++0x '${file}' -o '${file_path}/${file_base_name}' && '${file_path}/${file_base_name}' input_file"]
    }
]} 
```

保存文件，例如`C++11.sublime-build`，在`$HOME/.config/sublime-text-2/Packages/User`. 选择 Build System C++11，它应该可以完成这项工作。

# jsf-2 - 解决 ViewExpiredException 上的导航案例时出现 NullPointerException

> ID：15830152
> 
> 赞同：0
> 
> 时间：2013-04-05T09:20:23.927
> 
> 标签：jsf-2, exception-handling, primefaces, navigation, viewexpiredexception

我创建了一个自定义异常处理程序，它应该导航到`ViewExpiredException`.

```
ExceptionQueuedEventContext context = (ExceptionQueuedEventContext) event.getSource();
Throwable t = context.getException();

if (t instanceof ViewExpiredException) {
    ViewExpiredException v = (ViewExpiredException) t;
    FacesContext fc = FacesContext.getCurrentInstance();
    Map<String, Object> requestMap = fc.getExternalContext().getRequestMap();
    NavigationHandler nav = fc.getApplication().getNavigationHandler();

    try {
        requestMap.put("currentViewId", v.getViewId());
        nav.handleNavigation(fc, "*", "viewExpired"+"?faces-redirect=true");
        fc.renderResponse(); 
```

但是，它会在行上引发以下异常`nav.handleNavigation()`

```
 java.lang.NullPointerException
    at org.apache.myfaces.application.NavigationHandlerImpl.getNavigationCase(NavigationHandlerImpl.java:203)
    at org.apache.myfaces.application.NavigationHandlerImpl.handleNavigation(NavigationHandlerImpl.java:77)
    at com.daimler.esr.ui.exception.DefaultExceptionHandler.handle(DefaultExceptionHandler.java:55)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:191)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1188)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:763)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:454)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:92)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:919)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1016)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3703)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276) 
```

我正在使用 MyFaces 和 PrimFaces 3.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:37:09.350

不要指定 的“来自” `"*"`，而是指定`null`.

```
nav.handleNavigation(fc, null, "viewExpired?faces-redirect=true"); 
```

当您指定非`null`“来自”时，需要确定当前视图 ID 才能找到关联的“来自”，即使它是通配符，如`"*"`. 由于当前视图已过期（您有一个`ViewExpiredException`，对吗？），它不再可用，因此`NullPointerException`在行的内部代码中`context.getViewRoot().getViewId()`。

# mercurial - 对于一个反复无常的变更集，相同的父版本两次

> ID：15830160
> 
> 赞同：0
> 
> 时间：2013-04-05T09:20:33.237
> 
> 标签：mercurial

是否有一个规范的解释，为什么相同的父版本对于合并产生的给定的可变变更集列出了两次。

不幸的是，我们没有机会说出在观察到的案例中究竟是什么导致了这种情况。这种情况可能是由于尝试执行空合并操作引起的。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:43:00.007

我们找到了一种可能导致这种情况的方法......

通过选择本地版本并“与本地合并”选中“放弃合并目标（其他）修订版中的所有更改”选项，可以使用 TortoiseHG 轻松重现这种情况。

这不会导致调用`hg merge`（正如人们可以假设的那样），但是`hg debugsetparents`. 因此，我们强迫 Mercurial 将父母双方都设置为相同的修订版，从而自取其辱。

# java - 主要和静态方法中的一元运算符

> ID：15830161
> 
> 赞同：-3
> 
> 时间：2013-04-05T09:20:38.813
> 
> 标签：java

我有以下两个代码，并且在了解一元操作在 SOP 和 main 方法中如何工作的过程中。有人可以让我知道“i”的值是如何在 main 中计算的，以及它何时进入静态方法。

任何细节的背景操作都将不胜感激，因为我需要构建一个逻辑来帮助我理解其他相关代码。

在此先感谢您的帮助。

```
class R
{

    static int test( int i)
    {

        return i--;

    }

    public static void main (String[] args)
    {

        int i=0;
        System.out.println(test(i++));
        System.out.println(i);
        i = 0;
        System.out.println(test(i--));
        System.out.println(test(i));
    }
} 
```

结果：

```
0
1
0
-1 
```

第二个 ：

```
class S
{

    static int test( int i)
    {

        return ++i;

    }

    public static void main (String[] args)
    {

        int i=0;
        System.out.println(test(i++));
        System.out.println(i);
        i = 0;
        System.out.println(test(i--));
        System.out.println(test(i));
    }
} 
```

结果：

```
1
1
1
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:33:56.540

理解程序行为的关键是记住对于**原始**类型，Java 使用**按值调用**而不是**按引用调用**。

因此`i`，您的函数中的名称将不会引用您的函数中的名称`test`所引用的相同值。`i``main`

## 举例

```
 public static void main (String[] args) {

  int i=0;
  System.out.println(test(i++)); 
```

这里发生的是：

*   i 的值增加`i++`为 1

*   接下来`test`使用旧值 i 调用该方法，因此`test (0)`

*   的返回值`test (0)`将打印到标准输出。

要确定返回值，`test (0)`请仔细查看该`test`方法：

```
 static int test( int i) {
    return i--;
  } 
```

这里发生的是：

*   名称引用的传入值`i`减少了`i--`

*   返回 i 的旧值

由于`0`在结果返回值中传递了 的值`0`，因此该值通过以下方式打印：

```
System.out.println(test(i++)); 
```

在你的主要方法中。下一行：

```
System.out.println(i); 
```

将 main 中命名的值打印`i`到标准输出。作为传递给方法的值的**副本**，旧值仍然保持不变。因此该数字将被打印到标准输出。`i``test``1`

## 现在由你决定

通过示例展示了如何使用相同的模式跟踪代码的前两个结果的程序流，您应该能够自己解释其他结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:42:49.813

“R”类中的函数“test”是没有意义的：它总是返回用于调用函数的值。（因为后期递减和按值调用）

# c# - 将路径作为参数传递给进程 C#

> ID：15830165
> 
> 赞同：1
> 
> 时间：2013-04-05T09:20:49.293
> 
> 标签：c#, process

我有以下代码，我试图从 C# 调用 C++ 控制台应用程序。我的日志文件一直告诉我它无法打开配置文件。在这种情况下，将路径作为参数写入的正确方法是什么？

```
Process process = new Process();
process.StartInfo.FileName = "C:\\myCapp.exe";
process.StartInfo.Arguments = "C:\\config.txt"; // Put your arguments here
process.StartInfo.UseShellExecute = false;
process.StartInfo.CreateNoWindow = true;
process.Start();
process.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:57:07.140

你的方法是正确的（刚刚测试了这个样本）。我认为问题出在 C++ 应用程序或错误的文件访问中。

可能是文件已在 C# 应用程序中打开但尚未关闭？

# oauth - Facebook 错误代码列表？

> ID：15830166
> 
> 赞同：3
> 
> 时间：2013-04-05T09:20:49.563
> 
> 标签：oauth, facebook-oauth

有没有可以找到 Facebook 错误代码的完整列表的地方？在我的应用程序的统计中，我有一些 1340004 错误：

```
Method: dialog:oauth:touch
Error Code: 1340004
Failures: 436
Sampled Method Calls: 1,172
Failure Rate: 37.2% 
```

但是那个 1340004 错误到底是什么鬼？答案无处可寻，FB 的文档只有一小部分付款错误，即 138* ***。

所有 FB 错误代码的文档在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:20:49.380

我注意到我有同样的错误：

```
Method: dialog:oauth:popup
Error Code: 1340004
Failures: 410
Sampled Method Calls: 816
Failure Rate: 50,2% 
```

这个数据是两天前的数据，昨天我把失败率降低到1'1%，我认为我今天不会有任何失败。我在使用令牌时遇到了很多错误，因为 2 天前我收到了更长的 access_tokens，并且我的数据库中有一个用于此 access_token 的短 varchar 字段，结果被截断了 access_tokens。

我昨天更改了这个字段，我怀疑我为修复减少了这个错误，但我不确定。

# app-store-connect - Autoingestion.class 已停止创建报告文件

> ID：15830169
> 
> 赞同：3
> 
> 时间：2013-04-05T09:20:51.493
> 
> 标签：app-store-connect

几个月前，我编写了一些脚本来自动获取 iTunes 连接销售报告。今天我注意到脚本已经停止正常工作，所以我搜索了问题。

显然，Apple 的 Autoingestion Tool (Autoingestion.class) 已停止创建预期的输出文件......

使用示例：java Autoingestion *user* *pw* *vendor* Sales Daily Summary 20130401

[关于http://www.apple.com/itunesnews/docs/AppStoreReportingInstructions.pdf](http://www.apple.com/itunesnews/docs/AppStoreReportingInstructions.pdf)，语法仍然正确

该工具运行良好，没有任何错误。只是缺少预期的输出文件:(。

为了排除 java 的问题——我在不同的平台上用不同的 JVM 版本测试了这个工具。

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T19:40:06.577

我遇到了同样的问题，但是根据您自己的评论，我相信我在另一个装有最新 JRE 的盒子上尝试了它，并且它有效。（我在我的开发箱上试过，但在现场箱上运行它是有效的。有道理。）

只需添加，这是我们希望看到的输出：

```
$ java Autoingestion autoingestion.properties <vendor> Sales Daily Summary 20130801
S_D_<vendor>_20130801.txt.gz
File Downloaded Successfully 
```

我倾向于认为运行 Autoingestion 应该*总是*有输出。我最初运行它时实际上有错误的凭据，但它甚至无法告诉我，在错误的环境中。

# jquery - 由于幻灯片太少而终止

> ID：15830171
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:20:55.577
> 
> 标签：jquery

我收到一条错误消息，说幻灯片太少。我可以知道是什么问题吗？

```
function log() {
    if (window.console && window.console.log)
        window.console.log('[cycle] ' + Array.prototype.join.call(arguments,' '));
}; 
```

这是我的 html 代码和我的 jquery。我目前正在谷歌浏览器下运行并尝试使用`onmouseover`效果，但不知道我现在所做的是否有效。任何帮助将不胜感激。

```
<script type="text/javascript">
    $("#Menu1").hover(
  function () { $("#td_1").show(); },
  function () { $("#td_1").hide(); }
);
    $("#Menu2").hover(
  function () { $("#td_2").show(); },
  function () { $("#td_2").hide(); }
);
    $("#Menu3").hover(
    function () { $("#td_3").show(); },
    function () { $("#td_3").hide(); }
  );
    $("#Menu4").hover(
  function () { $("#td_4").show(); },
  function () { $("#td_4").hide(); }
);
    $("#Menu5").hover(
  function () { $("#td_5").show(); },
  function () { $("#td_5").hide(); }
);
    $("#Menu6").hover(
  function () { $("#td_6").show(); },
  function () { $("#td_6").hide(); }
);
    $("#Menu7").hover(
  function () { $("#td_7").show(); },
  function () { $("#td_7").hide(); }
);
    $("#Menu8").hover(
  function () { $("#td_8").show(); },
  function () { $("#td_8").hide(); }
);
</script>

<tr>
          <td id="td_1" colspan="8" bgcolor="#CF0D0B" height="25"><div align="center" class="style101">
          <a href="open-live-account.aspx" class="style101">Open Live Account</a>&nbsp;&nbsp; | &nbsp;&nbsp;
          <a href="/File/nzf4setup.exe" class="style101">Download</a>&nbsp;&nbsp; | &nbsp;&nbsp;
          <a href="/deposit.aspx" class="style101">Deposit</a>&nbsp;&nbsp; | &nbsp;&nbsp;
          <a href="/withdraw.aspx" class="style101">Withdrawal</a>
              </div>
          </td>
        </tr>
          <tr>
            <td id="td_2" colspan="8" bgcolor="#CF0D0B" height="25">
                                <div align="center" class="style101">
                                    <a href="open-live-account.aspx" class="style101">Open Live Account</a>&nbsp;&nbsp;
                                    | &nbsp;&nbsp;<a href="deposit.html" class="style101">Deposit</a><a href="nzf-seminar.html"
                                        class="style101"></a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="withdraw.html" class="style101">Withdraw</a><a
                                            href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="trading-platform.html"
                                                class="style101">Trading Platform</a><a href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp;
                                    | &nbsp;&nbsp;<a href="market-hours.html" class="style101">Market Hours</a><a href="nzf-seminar.html"
                                        class="style101"></a><a href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp;
                                    | &nbsp;&nbsp;<a href="trading-services.html" class="style101">Trading Services</a><a
                                        href="nzf-seminar.html" class="style101"></a></div>
            </td>
              </tr>
          <tr>
            <td id="td_3" colspan="8" bgcolor="#CF0D0B" height="25"><div align="center" class="style101"><a href="education-center.html" class="style101">Education Center</a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="risk-assessment.html" class="style101">Risk Assessment</a><a href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="risk-warning.html" class="style101">Risk Warning</a><a href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="money-management-responsible-trading.html" class="style101">Money Management &amp; Responsiblity Trading</a><a href="nzf-seminar.html" class="style101"></a></div></td>
          </tr>
          <tr>
            <td id="td_4" colspan="8" bgcolor="#CF0D0B" height="25"><div align="center" class="style101"><a href="investment-news.html" class="style101">Investment news</a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="economic-calendar.html" class="style101">Economic Calendar</a><a href="nzf-seminar.html" class="style101"></a></div></td>
              </tr>
          <tr>
            <td id="td_5" colspan="8" bgcolor="#CF0D0B" height="25"><div align="center" class="style101"><a href="affiliate-program.html" class="style101">Affiliate Program</a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="white-label.html" class="style101">White Label</a><a href="nzf-seminar.html" class="style101"></a></div></td>
          </tr>
          <tr>
            <td id="td_6" colspan="8" bgcolor="#CF0D0B" height="25"><div align="center" class="style101"><a href="contact-us.aspx" class="style101">Contact Us</a><a href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="nzf-faq.html" class="style101">FAQ</a><a href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="site-map.html" class="style101">SiteMap</a><a href="nzf-seminar.html" class="style101"></a></div></td>
              </tr>
          <tr>
            <td id="td_7" colspan="8" bgcolor="#CF0D0B" height="25"><div align="center" class="style101"><a href="about-us.html" class="style101">About Us</a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="nzf-vision.html" class="style101">NZF Vision</a><a href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="careers.html" class="style101">Careers</a><a href="nzf-seminar.html" class="style101"></a></div></td>
              </tr>
          <tr>
            <td id="td_8" colspan="8" bgcolor="#CF0D0B" height="25"><div align="center" class="style101"><a href="contact-us.aspx" class="style101">Contact Us</a><a href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="nzf-faq.html" class="style101">FAQ</a><a href="nzf-seminar.html" class="style101"></a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="site-map.html" class="style101">SiteMap</a><a href="nzf-seminar.html" class="style101"></a></div></td>
              </tr>
        </tr>
      </table></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:25:58.010

甚至在不知道你的代码是什么样子的情况下，我认为你正在使用 jQuery 循环插件并且你的 HTML 只有一张幻灯片使插件无用是一个很好的猜测。循环终止，因为您只有一张幻灯片。

您包含的代码根本没有帮助。您可以发布您的 HTML 和 JS。

# objective-c - 无法使用 MusicPlayer 和 AUGraph 在 iOS 中设置多个乐器

> ID：15830173
> 
> 赞同：4
> 
> 时间：2013-04-05T09:20:56.540
> 
> 标签：objective-c, core-audio, mixer

我有一个 MusicPlayer，它包含一个包含 3 个 MusicTrack 的 MusicSequence。我已经设置了一个 AUGraph，其中 3 个 AUSampler 节点插入到多通道混音器中，该混音器又连接到输出节点。

我正在使用 SoundFont，并希望我的 3 种不同的 MusicTrack 可以在 3 种不同的乐器上演奏，如此处[所述](http://lists.apple.com/archives/coreaudio-api/2012/Jun/msg00051.html)。但是，我得到的代码不起作用 - 相反，它只播放其中一个部分。

我按如下方式创建 AUGraph：

```
NewAUGraph (&_processingGraph);
AUNode samplerNode, samplerNodeTwo, samplerNodeThree, ioNode, mixerNode;

AudioComponentDescription cd = {};
cd.componentManufacturer     = kAudioUnitManufacturer_Apple;

//----------------------------------------
// Add 3 Sampler unit nodes to the graph
//----------------------------------------
cd.componentType = kAudioUnitType_MusicDevice;
cd.componentSubType = kAudioUnitSubType_Sampler;

AUGraphAddNode (self.processingGraph, &cd, &samplerNode);
AUGraphAddNode (self.processingGraph, &cd, &samplerNodeTwo);
AUGraphAddNode (self.processingGraph, &cd, &samplerNodeThree);

//-----------------------------------
// 2\. Add a Mixer unit node to the graph
//-----------------------------------
cd.componentType          = kAudioUnitType_Mixer;
cd.componentSubType       = kAudioUnitSubType_MultiChannelMixer;

AUGraphAddNode (self.processingGraph, &cd, &mixerNode);

//--------------------------------------
// 3\. Add the Output unit node to the graph
//--------------------------------------
cd.componentType = kAudioUnitType_Output;
cd.componentSubType = kAudioUnitSubType_RemoteIO;  // Output to speakers

AUGraphAddNode (self.processingGraph, &cd, &ioNode);

//---------------
// Open the graph
//---------------
AUGraphOpen (self.processingGraph);

//-----------------------------------------------------------
// Obtain the mixer unit instance from its corresponding node
//-----------------------------------------------------------
AUGraphNodeInfo (
                             self.processingGraph,
                             mixerNode,
                             NULL,
                             &mixerUnit
                             );

//--------------------------------
// Set the bus count for the mixer
//--------------------------------
UInt32 numBuses = 3;
AudioUnitSetProperty(mixerUnit,
                              kAudioUnitProperty_ElementCount,
                              kAudioUnitScope_Input,
                              0,
                              &numBuses,
                              sizeof(numBuses));

//------------------
// Connect the nodes
//------------------

AUGraphConnectNodeInput (self.processingGraph, samplerNode, 0, mixerNode, 0);
AUGraphConnectNodeInput (self.processingGraph, samplerNodeTwo, 0, mixerNode, 1);
AUGraphConnectNodeInput (self.processingGraph, samplerNodeThree, 0, mixerNode, 2);

// Connect the mixer unit to the output unit
AUGraphConnectNodeInput (self.processingGraph, mixerNode, 0, ioNode, 0);

// Obtain references to all of the audio units from their nodes
AUGraphNodeInfo (self.processingGraph, samplerNode, 0, &_samplerUnit);
AUGraphNodeInfo (self.processingGraph, samplerNodeTwo, 0, &_samplerUnitTwo);
AUGraphNodeInfo (self.processingGraph, samplerNodeThree, 0, &_samplerUnitThree);
AUGraphNodeInfo (self.processingGraph, ioNode, 0, &_ioUnit); 
```

然后我从 SoundFont（SoundFont 中的 ID 0、1 和 2）加载 3 种乐器，如下所示，传入 SoundFont 的“bankURL”：

```
// Load the first instrument
AUSamplerBankPresetData bpdata;
bpdata.bankURL  = (__bridge CFURLRef) bankURL;
bpdata.bankMSB  = kAUSampler_DefaultMelodicBankMSB;
bpdata.bankLSB  = kAUSampler_DefaultBankLSB;
bpdata.presetID = (UInt8) 0;

AudioUnitSetProperty(self.samplerUnit,
                              kAUSamplerProperty_LoadPresetFromBank,
                              kAudioUnitScope_Global,
                              0,
                              &bpdata,
                              sizeof(bpdata));

// Load the second instrument
AUSamplerBankPresetData bpdataTwo;
bpdataTwo.bankURL  = (__bridge CFURLRef) bankURL;
bpdataTwo.bankMSB  = kAUSampler_DefaultMelodicBankMSB;
bpdataTwo.bankLSB  = kAUSampler_DefaultBankLSB;
bpdataTwo.presetID = (UInt8) 1;

AudioUnitSetProperty(self.samplerUnitTwo,
                              kAUSamplerProperty_LoadPresetFromBank,
                              kAudioUnitScope_Global,
                              0,
                              &bpdataTwo,
                              sizeof(bpdataTwo));

// Load the third instrument
AUSamplerBankPresetData bpdataThree;
bpdataThree.bankURL  = (__bridge CFURLRef) bankURL;
bpdataThree.bankMSB  = kAUSampler_DefaultMelodicBankMSB;
bpdataThree.bankLSB  = kAUSampler_DefaultBankLSB;
bpdataThree.presetID = (UInt8) 2;

AudioUnitSetProperty(self.samplerUnitThree,
                              kAUSamplerProperty_LoadPresetFromBank,
                              kAudioUnitScope_Global,
                              0,
                              &bpdataThree,
                              sizeof(bpdataThree)); 
```

最后，我将每个 MusicTrack 使用的 AUSampler 节点设置如下：

```
//-------------------------------------------------
// Set the AUSampler nodes to be used by each track
//-------------------------------------------------
MusicTrack track, trackTwo, trackThree;
MusicSequenceGetIndTrack(testSequence, 0, &track);
MusicSequenceGetIndTrack(testSequence, 1, &trackTwo);
MusicSequenceGetIndTrack(testSequence, 2, &trackThree);

AUNode samplerNode, samplerNodeTwo, samplerNodeThree;
AUGraphGetIndNode (self.processingGraph, 0, &samplerNode);
AUGraphGetIndNode (self.processingGraph, 1, &samplerNodeTwo);
AUGraphGetIndNode (self.processingGraph, 2, &samplerNodeThree);

MusicTrackSetDestNode(track, samplerNode);
MusicTrackSetDestNode(trackTwo, samplerNodeTwo);
MusicTrackSetDestNode(trackThree, samplerNodeThree); 
```

但是，当我播放 MusicPlayer 时，我只听到一个部分在播放。尝试使用不同的乐器时会出现问题 - 当我使用具有标准 MusicPlayer 设置的单个乐器时（而不是像上面那样编辑 AUGraph），它工作正常。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T12:33:25.393

我找到了解决方案。在从 SoundFont 加载乐器之前，需要以下行：

```
MusicSequenceSetAUGraph(testSequence, self.processingGraph); 
```

只要这条线的运行点出现在从 SoundFont 加载乐器之前以及在为各种 MusicTrack 分配 AUSampler 节点之前，它似乎就可以工作 - 所有部分都根据需要在不同的乐器上演奏。[这个](https://stackoverflow.com/a/11750219/1295558)对相关问题的回答帮助我弄清楚了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T08:00:54.413

我和你有完全相同的问题。所有曲目都使用第一个声音字体乐器播放。我遵循了您的解决方案，但起初它不起作用。最后，我解决了这个问题。正如您所提到的，调用函数的顺序确实很重要。是的。实际上，序列调用应该是这样的：

```
.....
MusicSequenceSetAUGraph(s, _processingGraph);
.......
MusicTrackSetDestNode(track[i], samplerNodes[i]);
......
[self loadFromDLSOrSoundFont];
......
MusicPlayerStart(p); 
```

这适用于我的项目。顺便说一句，感谢您分享您的代码。真的有帮助:)

# perforce - p4 列出特定用户的作业

> ID：15830175
> 
> 赞同：0
> 
> 时间：2013-04-05T09:21:04.763
> 
> 标签：perforce

P4 服务器 2010.2/347035

我正在尝试列出我在 p4 中创建的工作。我希望以下命令可以工作

```
p4 -u xxx jobs -m 50 
```

但事实并非如此。上面的命令没有列出该 xxx 用户的工作，而是只显示所有工作。

问题

1.  我怎样才能只列出我的工作？（或特定用户的工作）
2.  有什么方法可以打印 p4 生成的小幅打印输出？大多数 p4 命令都有表格输出，我想要表格输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:51:47.023

你想要'p4 jobs -e ReportedBy=CalmStorm'或者'p4 jobs -e OwnedBy=CalmStorm'。

由于作业规范是可定制的，因此确切的语法将取决于您为作业规范定义的字段。

查看[http://www.perforce.com/perforce/doc.current/manuals/cmdref/jobs.html#1040665](http://www.perforce.com/perforce/doc.current/manuals/cmdref/jobs.html#1040665)了解有关作业查询语言的更多信息。

关于漂亮的打印，命令行本身没有内置任何东西。许多用户使用 Perl、Python 或 Ruby 等脚本工具来实现这些目的；有适用于所有主要脚本语言的 Perforce 包，因此您可以选择自己喜欢的一种。或者使用 P4V——它有一个很好的 GUI 用于搜索和查看工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:26:21.703

命令

```
p4 jobs -r -m 100 -e xxx 
```

有点实现了这一点，但它列出了分配给我的工作，而不仅仅是我创建的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:58:10.337

你可以在工作列表中用 grep 搜索你的名字：

> p4 工作 |grep $P4USER

# iphone - 获取pdf文件Titanium Studio iPhone的页码

> ID：15830177
> 
> 赞同：5
> 
> 时间：2013-04-05T09:21:08.347
> 
> 标签：iphone, pdf, webview, scroll, titanium-mobile

我正在创建一个应用程序来阅读 PDF 文件。我正在使用 WebView 加载 PDF 文件。下面是代码：

```
var wv = Ti.UI.createWebView({
           backgroundColor:"gray", 
           border:1,
           height:410,
           url : "file.pdf"
         });

win.add(wv); 
```

我想知道是否有任何方法可以获取 PDF 的页码并逐页导航。我没有找到任何方法来做到这一点。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:28:16.493

我认为 Titanium WebView 组件不可能做到这一点。您可以使用几个适用于 Titanium 的[PDF 阅读器插件。](https://marketplace.appcelerator.com/listing?1080954371&q=pdf)

您也可以尝试使用[pdf.js](https://github.com/mozilla/pdf.js)并将其包含在 WebView 中并尝试管理您想要的东西。但在 Titanium 或移动环境之前，我从未尝试过使用 pdf.js。

# c# - WCF 客户端请求返回错误请求 (400)

> ID：15830180
> 
> 赞同：0
> 
> 时间：2013-04-05T09:21:20.323
> 
> 标签：c#, wcf

我的客户端应用程序使用托管在本地 IIS 中的 WCF Web 服务。此 Web 服务用于上传图像。一旦图像尺寸变大，它就会发出错误的请求（400）。

客户端配置为动态获取 Web 服务 URL。

**客户代码**

```
string serviceUrl=GetUrl();  /* http://localhost:85/ImageUploaderService.svc */

TimeSpan timeOut = new TimeSpan(0, 30, 0);

EndpointAddress endPoint = new EndpointAddress(serviceUrl);     

BasicHttpBinding binding = new BasicHttpBinding()
{
    CloseTimeout = timeOut,
    MaxReceivedMessageSize = 65536,
    OpenTimeout = timeOut,
    ReceiveTimeout = timeOut,
    SendTimeout = timeOut,
    MaxBufferSize = 65536,
    MaxBufferPoolSize = 524288,
    UseDefaultWebProxy = true,
};

binding.ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas()
{
    MaxArrayLength = 64000000,
    MaxStringContentLength = 8192,
    MaxDepth = 32,
    MaxNameTableCharCount = 16384,
    MaxBytesPerRead = 4096
};

client = new ImageUploaderServiceClient(binding, endPoint); 
```

**Web服务端**

```
<basicHttpBinding>
    <binding maxBufferSize="64000000" maxReceivedMessageSize="64000000" maxBufferPoolSize="64000000">
      <readerQuotas maxDepth="64000000" maxStringContentLength="64000000" maxArrayLength="64000000" maxBytesPerRead="64000000" />
      <security mode="None"/>
    </binding>
  </basicHttpBinding> 
```

我在做什么错。请引导我通过正确的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:24:28.797

您也应该在客户端增加 MaxReceivedMessageSize ：

```
BasicHttpBinding binding = new BasicHttpBinding()
{
     MaxReceivedMessageSize = 64000000,
     MaxBufferSize = 64000000,
     MaxBufferPoolSize = 64000000,
// .....
};
binding.ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas()
{
    MaxArrayLength = 64000000,
    MaxStringContentLength = 64000000,
    MaxDepth = 64000000,
    MaxBytesPerRead = 64000000
}; 
```

我曾经遇到过同样的问题——服务器和客户端绑定配置应该是一样的。

# hibernate - Hibernate 亲子一对多关系

> ID：15830181
> 
> 赞同：1
> 
> 时间：2013-04-05T09:21:21.033
> 
> 标签：hibernate, one-to-many

首先为这么冗长的问题道歉。:)

我有一个类`Parent`和一个类`Child`，其中 Parent 到 Child 是`OneToMany`映射并且`Parent`在`Child`. 结构如下：

```
@Entity
@Table (name = "PARENT_TABLE")
class Parent {
   @Id
   @Column (name = "PARENT_ID")
   protected Long parentId;

   @Column (name = "PARENT_NM")
   protected String parentName;

   @OneToMany (mappedBy = "parent")
   @Column (name = "PARENT_ID")
   protected Set<Child> children;

}

@Entity
@Table (name = "CHILD_TABLE")
class Child {
   @Id
   @Column (name = "CHILD_ID")
   protected Long childId;

   @Column (name = "CHILD_NM")
   protected String childName;

   @ManyToOne
   @JoinColumn (name = "PARENT_ID", referencedColumnName = "PARENT_ID")
   protected Parent parent;

   public String toString() {
      return "Child [childId=" + childId + ", parentId=" + parent.getParentId() + "]");
   }
} 
```

我对此有疑问。每当我使用加载`Child`对象`session.load(Child.class, 10L)`并尝试打印实体对象时，都会收到“断言失败：空标识符”。但是，当我第一次加载`Parent`对象然后加载`Child`对象时，它工作正常。

**失败的场景**

```
Child child = (Child) session.load(Child.class, 10L);
System.out.println(child); 
```

**可行的方案**

```
List<Parent> parents = (List<Parent>) session.createQuery("from Parent").list();
Child child = (Child) session.load(Child.class, 10L);
System.out.println(child); 
```

异常堆栈跟踪是：

```
Exception in thread "main" org.hibernate.AssertionFailure: null identifier
    at org.hibernate.engine.spi.EntityKey.<init>(EntityKey.java:69)
    at org.hibernate.internal.AbstractSessionImpl.generateEntityKey(AbstractSessionImpl.java:241)
    at org.hibernate.loader.Loader.extractKeysFromResultSet(Loader.java:722)
    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:635)
    at org.hibernate.loader.Loader.doQuery(Loader.java:850)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
    at org.hibernate.loader.Loader.loadEntity(Loader.java:2042)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:82)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:72)
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3710)
    at org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:439)
    at org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:420)
    at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:204)
    at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:143)
    at org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:992)
    at org.hibernate.internal.SessionImpl.immediateLoad(SessionImpl.java:907)
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:158)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:195)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185)
    at Parent_$$_javassist_63.getParentId(Parent_$$_javassist_63.java)
    at Child.toString(Child.java:110) 
```

当我尝试自己分析问题时，我观察到问题是因为在失败场景中，无论何时`child.parent`访问父对象都尚未加载。

我的观察对吗？

我该如何解决这个问题？

# c# - ASP.NET MVC 中操作方法与视图的隐式连接

> ID：15830187
> 
> 赞同：1
> 
> 时间：2013-04-05T09:21:26.840
> 
> 标签：c#, .net, asp.net-mvc, view, controller

我目前在**VS2010的棕地****ASP.NET MVC 3**项目中工作。

 **在这个项目中，视图和控制器位于不同的项目中。这不是我以前见过的。在每个操作方法中，都没有明确说明视图名称，如下所示。

```
return View("viewName",passingModel);//projects where controllers and views are in same 
```

我通过右键单击视图并在 VS2012 中隐式执行此操作并执行`add view`. 所以我并不担心动作方法的返回视图和视图之间的联系在哪里。

**与 VS2012 不同**，在 VS2010 中，我无法通过右键单击 View 并执行来导航到与一种特定操作方法相关的视图`go to view`。

我试图通过做这个小实验来理解这一点。我创建了一个`Controller`并创建了一个`Action Method`调用`xxxx`，并为它隐式创建了一个视图，如上所述，并`xxxx`在整个解决方案中搜索了这个词，但这个词只出现在控制器和视图中。

所以，我没能找到答案。我认为视觉工作室本身创建了自己的映射来实现这一点。我想知道是谁在动作方法和视图之间创建了这些隐式连接，以了解我的项目中发生了什么。

编辑：

包含控制器和视图的项目都是类库。不是 asp.net mvc 项目。

`Global.aspx`文件包含以下内容：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        protected void Application_Start()
        {
            DependenciesHelper.Register(new HttpContextWrapper(Context));

            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RoutingHelper.RegisterRoutes(RouteTable.Routes);
        }

        protected void Application_End()
        {
            //Should close the index
            //If this method is not executed, the search engine will still work.
            SearchService.CloseIndex();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:29:33.080

映射相当简单。例如，如果您有一个名为“MyBrilliantController”的控制器和一个名为“MyExcellentAction”的操作方法，它只返回`return View();`它会映射到（在 UI 项目中）`~/Views/MyBrilliant/MyExcellentAction.cshtml`

唯一不同的是当您使用“区域”时 - 但映射实际上是相同的，它只会首先考虑区域文件夹（即`~/Areas/MyArea/Views/MyBrilliant/MyExcellentAction.cshtml`）

希望有帮助。

**编辑 - 您还可以在每个路由的 global.asax 文件中指定命名空间，以便引擎找到控制器**

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { 
                controller = "Home", 
                action = "Index", 
                id = UrlParameter.Optional 
        }, // Parameter defaults
        new string[] {
            // namespaces in which to find controllers for this route
            "MySolution.MyControllersLib1.Helpers", 
            "MySolution.MyControllersLib2.Helpers",
            "MySolution.MyControllersLib3.Helpers" 
        } 
    );

} 
```**

# javascript - Java 脚本无效日期

> ID：15830188
> 
> 赞同：-3
> 
> 时间：2013-04-05T09:21:28.060
> 
> 标签：javascript

我正在使用 jQuery datepicker 来获取日期。一旦日期被保存到数据库中，它就会显示在屏幕上；我想将加载时间日期发送到`new Date()`，但它显示“格式无效”。

我该如何解决？

```
<input class="editTxtFrmt doj valid" `type="text" style="width:100%;">

var txt = name.replace("releavingDt","doj");
joinDt = $("input[name='"+txt+"']").val();      
new Date(joinDt) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:37:10.127

我不知道你的代码到底有什么问题，但我会逐行指出一些问题：

```
<input class="editTxtFrmt doj valid" `type="text" style="width:100%;"> 
```

前面有一个反引号`type="text"`。去掉它！

```
var txt = name.replace("releavingDt","doj"); 
```

的价值是`name`多少？它来自哪里？

```
joinDt = $("input[name='"+txt+"']").val(); 
```

您正在寻找一个具有任何`name`属性的输入元素`txt`。即使你得到一个有效的字符串`txt`（我怀疑上面的行），你上面的示例输入元素也没有任何`name`属性。`joinDt`也会如此`undefined`

```
new Date(joinDt) 
```

此行是正确的，仅当`joinDt`有效时。但是，鉴于上述所有问题，我坚信这`joinDt`一点`undefined`。

如何调试：

将代码更改为此，让我们知道您的警报给您什么：

HTML：

```
<input class="editTxtFrmt doj valid" type="text" style="width:100%;"> 
```

JS：

```
alert("name is: "+name);
var txt = name.replace("releavingDt","doj");
alert("txt is: "+txt);
joinDt = $("input[name='"+txt+"']").val();      
alert("joinDt is: "+joinDt);
new Date(joinDt) 
```

# ios-simulator - 如何播种 iOS 模拟器相册？

> ID：15830191
> 
> 赞同：3
> 
> 时间：2013-04-05T09:21:35.683
> 
> 标签：ios-simulator, uiimagepickercontroller, alassetslibrary, kif-framework

我有一套适用于我们的应用程序的[KIF](https://github.com/square/KIF)测试，但我无法弄清楚如何覆盖的部分是我们使用`UIImagePickerController`s. 显然我无法检查相机，但我想写一个用户从他们的库中选择图像的场景。我知道有`+[KIFTestStep stepsToChoosePhotoInAlbum:atRow:column:]`，但我不知道如何设置它，以便有一组一致的图像供测试选择。如何播种模拟器的相册？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T00:04:36.030

有 2 种不同的方式（一种涉及编程）来填充 iOS 模拟器的照片库：

*   在 iOS 模拟器中打开 Safari，在 Google 中搜索一些大尺寸的图片，打开一张并以全尺寸显示。然后长按照片并选择保存。对几张照片重复此操作以填满图书馆。

*   在 Mac 上创建一个文件夹，其中包含要填充照片库的图像。然后编写一个小的 iOS 应用程序，迭代该目录并从每个照片文件创建 NSData 对象。使用

    (void)writeImageDataToSavedPhotosAlbum:(NSData *)imageData 元数据:(NSDictionary *)元数据completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock

AssetsLibrary 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-27T14:25:56.457

这是一个对我有用的项目： [https ://github.com/justin/PopulateSimulatorPhotos](https://github.com/justin/PopulateSimulatorPhotos)

在您需要一次又一次地重置模拟器或想要在所有设备类型上快速测试的情况下，它已被证明非常好。

# jquery - 如何在窗口调整大小时隐藏 Facebook 聊天框？

> ID：15830195
> 
> 赞同：0
> 
> 时间：2013-04-05T09:21:45.037
> 
> 标签：jquery, facebook, facebook-chat

我试图在 Jquery 中重现，当视口大小发生变化时，Facebook 如何隐藏或显示打开的聊天框。基本上，如果您打开了 6 个聊天窗口，并且如果您调整或缩小浏览器的大小，如果这 6 个无法修复屏幕大小，则某些聊天窗口会被隐藏。

我正在使用函数 $(window).resize() 来检测所有打开窗口的总宽度加上一些边距是否大于窗口的宽度，然后隐藏第一个聊天窗口，或者如果有空间则显示最后一个更多的窗户。基本弹出或推送到堆栈...

我的方法不起作用，因为每当运行调整大小时，我的脚本都会不断尝试隐藏或显示窗口......（参见下面的代码）

任何建议表示赞赏。

`ChatWidget.isEnoughRoom = function() {`

 `return ($(window).width() > ((ChatWidget.WINDOW_WIDTH * $('.chatWindowWidget:visible').length) + ChatWidget.CONTACTLIST_WIDTH + 100));

};

$(window).resize(function(){

```
 if(!ChatWidget.isEnoughRoom()) {
            $('.chatWindow:visible:last').hide() ;
    } else {
        $('.chatWindow:hidden:last').show() ;
    } 
```` 

`})`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:16:37.463

您的问题与每次调整窗口大小时多次触发调整大小功能有关。我在chrome中测试过，它触发了两次。试试这个： [https ://github.com/louisremi/jquery-smartresize](https://github.com/louisremi/jquery-smartresize)

# java - 如何从给定的字符串中获取子字符串？

> ID：15830196
> 
> 赞同：-2
> 
> 时间：2013-04-05T09:21:45.437
> 
> 标签：java, string

我已经使用类将整个 xml 文件作为单个字符串读取。输出是

```
String result=<?xml version="1.0"?><catalog><book id="bk101"><part1><date>Fri Apr 05 11:46:46 IST 2013</date><author>Gambardella, Matthew</author><title>XML Developer's Guide</title><genre>Computer</genre><price>44.95</price>         <publish_date>2000-10-01</publish_date></part1></book></catalog> 
```

现在我想替换日期值。所以首先我想从字符串中提取日期并替换新值。我有以下代码，

```
 Date date=new Date()
  String str=result.substring(result.indexOf("<date>")); 
```

它显示从日期标签到结束标签的整个字符串。如何提取日期标签并替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:24:57.847

```
String str=result.substring(result.indexOf("<date>") ,result.indexOf("</date>")+"</date>".length()); 
```

[字符串#substring(int beginIndex)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int%29)

> 返回一个新字符串，它是该字符串的子字符串。子字符串以指定索引处的字符开始并延伸到该字符串的末尾。

String#substring(int beginIndex,int endIndex)

> 返回一个新字符串，它是该字符串的子字符串。子字符串从指定的 beginIndex 开始并延伸到索引 endIndex - 1 处的字符。因此子字符串的长度是 endIndex-beginIndex。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:35:43.867

这里使用正则表达式获取标签的内容......但至于替换它 - 我会回复你。

```
String result = "<?xml version=\"1.0\"?><catalog><book id=\"bk101\"><part1><date>Fri Apr 05 11:46:46 IST 2013</date><author>Gambardella, Matthew</author><title>XML Developer's Guide</title><genre>Computer</genre><price>44.95</price>         <publish_date>2000-10-01</publish_date></part1></book></catalog>";
String pattern = ".*(?i)(<date.*?>)(.+?)(</date>).*";
System.out.println(result.replaceAll(pattern, "$2")); 
```

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:36:47.447

编辑：哦，你想要它在java中。这是 C# 解决方案 =)

您可以通过替换包括标签在内的整个日期来解决此问题。

您的 XML 中有两个日期，因此为了确保不会同时替换它们，您可以这样做。

```
int index1 = result.IndexOf("<date>");
int index2 = result.IndexOf("</date>") - index1 + "</date>".Length;
var stringToReplace = result.Substring(index1, index2);

var newResult = result.Replace(stringToReplace, "<date>" + "The Date that you want to insert" + "</date>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:28:31.577

只是价值：

```
String str = result.substring(result.indexOf("<date>") + "<date>".length(),
        result.indexOf("</date>")); 
```

包括标签：

```
String str = result.substring(result.indexOf("<date>"),
        result.indexOf("</date>") + "</date>".length()); 
```

# c# - c# 与泛型类型的接口类型之间的转换

> ID：15830200
> 
> 赞同：0
> 
> 时间：2013-04-05T09:22:03.200
> 
> 标签：c#, generics, interface, casting

我有一个`MockRepository`实现 interface`IRepository`的类，我有一个`Technology`实现 interface的类`IIdentifiable`。

我想在某些操作完成后将一个对象从`MockRepository<Technology>`to 转换`IRepository<IIdentifiable>`回来。这可能吗？我的代码可以编译，但是当我尝试运行它时，我得到一个无效的强制转换异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:35:23.907

简短的回答是否定的。

如果您有一个接口`IMyInterface<T>`，那么编译器将为您使用的每种类型的 T 创建一个新接口，并替换 T 的所有值。

举个例子：

我有一个界面：

```
public interface IMyInterface<T> {
   public T Value {get; set;}
} 
```

我有 2 节课：

```
public class Foo {}

public class Bar : Foo {} 
```

然后我定义以下

```
public class Orange : IMyInterface<Foo> {}

public class Banana : IMyInterface<Bar> {} 
```

编译器将使用特定的名称约定自动创建 2 个新接口，我将使用不同的名称来突出它们的不同

```
public interface RandomInterface {
   Foo Value { get; set; }
}

public interface AlternativeInterface {
   Bar Value { get; set; }
}

public class Orange : RandomInterface {
}

public class Banana : AlternativeInterface {
} 
```

如您所见，`RandomInterface`和之间没有关系`AlternativeInterface`。所以继承自的类`RandomInterface`不能强制转换为`AlternativeInterface`

**阅读问题评论后更新**

如果您希望将 MockRepository 传递给需要 IRepository 的函数，您可以执行以下操作

```
 public void MyFunction<T>(IRepository<T> repo) where T: IIdentifiable {
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:51:53.303

我认为你有：

```
class MockRepository<T> : IRepository<T>  // note: same T
{
}

interface IRepository<out X>  // note: "out" means covariance in X
{
} 
```

那么因为 a`Technology`是一个`IIdentifiable`，协方差给出了一个`IRepository<Technology>`也是一个`IRepository<IIdentifiable>`。

因此，如果您的`IRepository<>`界面是（或可以制作）协变的，它应该可以工作。

# c# - C# - 如何从 GZip 读取文本文件

> ID：15830201
> 
> 赞同：7
> 
> 时间：2013-04-05T09:22:14.047
> 
> 标签：c#

这是我的问题，我正在尝试制作我的世界经典服务器，我正在使用文本系统为每个地图制作允许列表，问题是文本系统为每个地图制作一个文件，我们总共得到了大约 15k 个地图，所以如果1k 的玩家将允许列表添加到他们的地图中，很难将服务器上传/移动到另一台主机。我想在我的软件的主文件夹中制作一个 zip 文件，并将每个文本文件添加到其中，并使其能够被系统读取，我想知道如何从 GZip 读取文件，以及如何压缩文件。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-03-31T15:42:42.933

这是我非常简单的工作代码。没有临时文件

```
using (FileStream reader = File.OpenRead(filePath))
    using (GZipStream zip = new GZipStream(reader, CompressionMode.Decompress, true))
        using (StreamReader unzip = new StreamReader(zip))
            while(!unzip.EndOfStream)
                ReadLine(unzip.ReadLine()); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-17T07:50:39.883

如果你想避免创建临时文件，你可以使用这个：

```
using (Stream fileStream = File.OpenRead(filePath),
              zippedStream = new GZipStream(fileStream, CompressionMode.Decompress))
{
    using (StreamReader reader = new StreamReader(zippedStream))
    {
        // work with reader
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T09:27:16.060

详细介绍如何使用 GZip 进行压缩和解压缩。解压后可以使用[StreamReader()类](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)读取文件内容（.NET 4.0）。

```
using System;
using System.IO;
using System.IO.Compression;

namespace zip
{
    public class Program
    {
        public static void Main()
        {
            string directoryPath = @"c:\users\public\reports";

            DirectoryInfo directorySelected = new DirectoryInfo(directoryPath);

            foreach (FileInfo fileToCompress in directorySelected.GetFiles())
            {
                Compress(fileToCompress);
            }

            foreach (FileInfo fileToDecompress in directorySelected.GetFiles("*.gz"))
            {
                Decompress(fileToDecompress);
            }
        }

        public static void Compress(FileInfo fileToCompress)
        {
            using (FileStream originalFileStream = fileToCompress.OpenRead())
            {
                if ((File.GetAttributes(fileToCompress.FullName) & FileAttributes.Hidden) != FileAttributes.Hidden & fileToCompress.Extension != ".gz")
                {
                    using (FileStream compressedFileStream = File.Create(fileToCompress.FullName + ".gz"))
                    {
                        using (GZipStream compressionStream = new GZipStream(compressedFileStream, CompressionMode.Compress))
                        {
                            originalFileStream.CopyTo(compressionStream);
                            Console.WriteLine("Compressed {0} from {1} to {2} bytes.",
                                fileToCompress.Name, fileToCompress.Length.ToString(), compressedFileStream.Length.ToString());
                        }
                    }
                }
            }
        }

        public static void Decompress(FileInfo fileToDecompress)
        {
            using (FileStream originalFileStream = fileToDecompress.OpenRead())
            {
                string currentFileName = fileToDecompress.FullName;
                string newFileName = currentFileName.Remove(currentFileName.Length - fileToDecompress.Extension.Length);

                using (FileStream decompressedFileStream = File.Create(newFileName))
                {
                    using (GZipStream decompressionStream = new GZipStream(originalFileStream, CompressionMode.Decompress))
                    {
                        decompressionStream.CopyTo(decompressedFileStream);
                        Console.WriteLine("Decompressed: {0}", fileToDecompress.Name);
                    }
                }
            }
        }
    }
} 
```

[来源](http://msdn.microsoft.com/en-gb/library/system.io.compression.gzipstream.aspx)

# ios5 - iPhone 4s 和 iPhone 5 兼容性

> ID：15830203
> 
> 赞同：0
> 
> 时间：2013-04-05T09:22:17.993
> 
> 标签：ios5, ios4, ios6

我是 iPhone 开发的新手，我想让我的代码与 iPhone 4s 和 iPhone5 兼容，
但是当我将图像应用到 4S 的背景视图时，它的大小为 320*480，但它在 iPhone 5 中发生了变化。如何管理这种兼容性？我还需要管理按钮的兼容性及其在 iPhone 4s 和 iPhone 5 中的位置。如果是？那么如何以编程方式处理按钮的位置......

我找到了这个解决方案..

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
CGSize result = [[UIScreen mainScreen] bounds].size;
if(result.height == 480)
{
    // iPhone Classic    }
if(result.height == 568)
{
    // iPhone 5
}} 
```

它有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:54:23.403

是的，您正在以正确的方式进行操作。

现在，您需要做的是，您只需要检查条件，并在此基础上，您必须在屏幕上设置组件的 Frame。

```
if([UIScreen mainScreen].bounds.size.height == 568)
{
    // iPhone 5  
     // Set the frame of the buttons for iPhone5 screen
}
else
{
    // iPhone 4
     // Set the frame of the buttons for iPhone4 & 4S screen
}
} 
```

# android - 使用不同的谷歌帐户进行应用内计费测试

> ID：15830209
> 
> 赞同：0
> 
> 时间：2013-04-05T09:22:31.633
> 
> 标签：android, in-app-billing

要在应用计费中进行测试，据说我需要恢复**出厂设置** ，然后在设备启动时指定我的测试帐户。

我已经配置了 2 个 Google 帐户，我能否以某种方式让测试帐户在交易中处于活动状态，然后在我完成应用内计费测试后恢复为原始帐户？

当我可以设置多个 Google 帐户时，我无法理解是否需要恢复出厂设置来测试应用内结算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:36:46.623

环顾四周后，恢复出厂设置是当前更改设备帐户的唯一方法。Android Market In-App Billing 上有一个针对此[问题的问题](https://code.google.com/p/marketbilling/issues/detail?id=24)

我猜您不能使用个人帐户，因为它与开发者控制台帐户（Google 不允许）相同。但是，如果您在设备上使用个人帐户，则可以[更改开发者控制台帐户](https://support.google.com/googleplay/android-developer/answer/139626?hl=en)。

这意味着您可以使用您的个人帐户进行测试，避免恢复出厂设置。

# ruby-on-rails - 显示是否有人正在阅读帖子

> ID：15830212
> 
> 赞同：0
> 
> 时间：2013-04-05T09:22:50.853
> 
> 标签：ruby-on-rails, session, cookies

我想显示正在阅读帖子的人的列表。在尝试实现该功能之前，我想征求一些建议。我将首先检查在;中调用该`show`操作的用户。`PostsController`每当一个人查看一个帖子时，他都会被记录到正在阅读该帖子的人列表中。但是，当他**离开**阅读帖子时，我不确定如何从列表中**删除该人。**有没有办法使用或注意用户是否离开某个页面？一点帮助将帮助我立即开始！**`cookies``sessions`**

 **我很感激任何建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:28:23.770

通常使用超时系统。

我们可以存储用户阅读帖子的日期，而不是存储布尔值“正在阅读帖子”。

不，您可以轻松设置超时（例如 5 分钟）以了解谁在阅读帖子。这是一个近似值，但这几乎是现实的。

好处 ：

*   您可以根据需要删除完成的日期（使用 cron、每天或其他内容），使用单个查询而不是每个视图一个查询。
*   您解决了关闭其浏览器的用户的问题（当没有打开下一页时）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:38:09.550

为了更准确

在路线.rb

```
post "/posts/:id/being_read" => "posts#being_read", :defaults => { :format => "json"} 
```

在控制器中

```
PostsController < ApplicationController
  def being_read
    current_user && @post.being_read_by current_user
    head :ok
  end
end 
```

在展示页面上

```
function beingRead(){
  $.post("/posts/<%=@post.id%>/being_read", function(data) {
    setTimeout(beingRead,10000);
  });
} 
```

在 post.rb 中

```
def being_read_by user=nil
  # making use of rails low level cache

  readers_ids = Rails.cache.fetch("Post #{id} being read", :expires_in => 5.minutes) || []

  readers_ids = Rails.cache.fetch("Post #{id} being read", :expires_in => 5.minutes) (readers_ids << user.id) if user

  readers_ids
end 
```**

# jquery - 带有 history=false 自动关闭的 JQuery Mobile 弹出窗口

> ID：15830213
> 
> 赞同：3
> 
> 时间：2013-04-05T09:22:52.257
> 
> 标签：jquery, jquery-mobile, setinterval, clearinterval, jquery-mobile-popup

我正在尝试显示一个弹出窗口，但弹出窗口会自动消失，没有 history=false 弹出窗口仍然可见，但是在关闭弹出窗口时会触发浏览器返回操作

```
<div data-role="page" id="indexpage">
    <div data-role="popup" data-history="false" id="appPopup">test popup</div>
    <script>
    $("#indexpage").on("pageshow", function () {
        $("#appPopup").popup("open");
    });
    </script>
</div> 
```

检查这里发生了什么：http: [//jsfiddle.net/francisdb/ThtfZ/](http://jsfiddle.net/francisdb/ThtfZ/)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T09:28:54.280

工作示例：http: [//jsfiddle.net/Gajotres/2EL5R/](http://jsfiddle.net/Gajotres/2EL5R/)

```
$("#indexpage").on("pageshow", function () {
    var popup = setInterval(function(){
        $("#appPopup").popup("open");
        clearInterval(popup);
    },1);
}); 
```

Webkit 浏览器讨厌弹窗打开，所以需要使用 setinterval 来触发它。其他一些 jQuery Mobile 功能也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T19:42:02.530

我有同样的问题想解决这个问题几个小时。Gajotres 建议的解决方案首先开始工作，但最终并没有在所有设备上运行。我用几个安卓、桌面和 iOS 浏览器进行了测试。

我的问题是一个 AdSense 横幅，它被弹出窗口隐藏了。

Google AdSense 会注意到横幅不再可见，并在加载 AdSense 横幅后关闭弹出窗口。删除了横幅，它现在可以完美运行。页面上没有被弹出窗口隐藏的其他 AdSense 横幅不会影响弹出窗口功能。

# c# - 当 AutoGenerateColumns 设置为 True 时，如何停止在 DataGrid 中生成特定列？

> ID：15830214
> 
> 赞同：5
> 
> 时间：2013-04-05T09:22:52.963
> 
> 标签：c#, wpf, mvvm, datagrid

我已将 ObservableCollection 绑定到 a`DataGrid`并`AutoGenerateColumns`在带有 MVVM 应用程序的 WPF 中将其设置为 true。

那我怎么才能`stop`出现`specific column`在DataGrid中呢？

我在[这里](https://stackoverflow.com/q/4000132/873979)看到了同样的问题。但我正在寻找更多的 MVVM 方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T14:07:17.823

MVVM 意味着你的 UI 和你的数据层是完全分开的，视图层只是你的数据层的视觉反映。

因此，排除列的“MVVM 方式”取决于此排除应发生的位置：

*   如果您的数据层应该排除一列，请从数据层中删除该列。

    这通常意味着修改您`DataGrid.ItemsSource`绑定到的集合，使其不再包含不应显示的数据。

    或者根据您的应用程序的用途以及什么算作“应用程序逻辑”，这可能意味着维护要排除的列`string`或`List<string>`列，并让视图找到某种方式绑定到这些字符串并修改其显示以排除这些列（a自定义依赖属性、转换器、`Tag`属性+事件的重用`AutoGeneratingColumn`、触发器等）

*   如果您的视图层应该排除一列，请从视图层中删除该列。

    这通常是通过设置`AutoGenerateColumns="False"`和指定您`<DataGrid.Columns>`自己来完成的，但是您也可以使用的[AutoGeneratingColumn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn.aspx)事件从视图层中排除列，如果它等于您要排除的值，`DataGrid`则取消列的生成，例如[问题你链接](https://stackoverflow.com/a/4000269/302677)建议。`ColumnName`

    ```
    private void DataGrid_AutoGeneratingColumn(
        object sender, DataGridAutoGeneratingColumnEventArgs e)
    {
        if ((string)e.Column.Header == "ID")
        {
            e.Cancel = true;
        }
    } 
    ```

请记住，MVVM 的全部意义在于分离您的 UI 和数据层。在 MVVM 中使用代码隐藏视图绝对没有错，只要该代码仅与特定于 UI 的逻辑相关，而不是与特定于数据/应用程序的逻辑相关

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:08:45.437

或者你可以这样做...

> 您通常可以使用附加属性将事件绑定到`Command`-s - 然后直接到您的视图模型来解决此问题。

```
namespace YourNamespace // wrap that into e.g. 'xmlns:local="clr-namespace:YourNamespace"'
public static class Attach
{
    public static ICommand GetAutoGenerateColumnEvent(DataGrid grid) { return (ICommand)grid.GetValue(AutoGenerateColumnEventProperty); }
    public static void SetAutoGenerateColumnEvent(DataGrid grid, ICommand value) { grid.SetValue(AutoGenerateColumnEventProperty, value); }
    public static readonly DependencyProperty AutoGenerateColumnEventProperty =
        DependencyProperty.RegisterAttached("AutoGenerateColumnEvent", typeof(ICommand), typeof(Attach), new UIPropertyMetadata(null, OnAutoGenerateColumnEventChanged));
    static void OnAutoGenerateColumnEventChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        DataGrid grid = depObj as DataGrid;
        if (grid == null || e.NewValue is ICommand == false)
            return;
        ICommand command = (ICommand)e.NewValue;
        grid.AutoGeneratingColumn += new EventHandler<DataGridAutoGeneratingColumnEventArgs>((s, args) => OnAutoGeneratingColumn(command, s, args));
        // handle unsubscribe if needed
    }
    static void OnAutoGeneratingColumn(ICommand command, object sender, DataGridAutoGeneratingColumnEventArgs e)
    {
        if (command.CanExecute(e)) command.Execute(e);
    }
} 
```

在你的 XAML 中......

```
<DataGrid 
    local:Attach.AutoGenerateColumnEvent="{Binding AutoGeneratingColumnCommand}" AutoGenerateColumns="True" /> 
```

在你的视图模型中......

```
RelayCommand _autoGeneratingColumnCommand;
public RelayCommand AutoGeneratingColumnCommand 
{ 
    get 
    { 
        return _autoGeneratingColumnCommand ?? (_autoGeneratingColumnCommand = new RelayCommand(param => 
        { 
            var e = param as DataGridAutoGeneratingColumnEventArgs;
            if (e != null)
            {
                switch (e.PropertyName)
                {
                    case "ID":
                        e.Cancel = true;
                        break;
                    default:
                        break;
                }
            }
        }, 
        param => true)); 
    } 
} 
```

...`RelayCommand : ICommand`您可以在网络上找到的实现（广泛使用）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:41:19.340

它就像 MVVM'ish 一样。我看不出这有什么问题。我已经在我的 MVVM 项目中使用了它，并且效果非常好。

虽然我不使用 AutoGeneratedColumns，但附加了“可绑定”列的技巧。

```
<DataGrid Name="dataGrid"
          local:DataGridColumnsBehavior.BindableColumns="{Binding ColumnCollection}"
          AutoGenerateColumns="False"
          ...> 
```

然后是实际行为：

```
public class DataGridColumnsBehavior
{
    public static readonly DependencyProperty BindableColumnsProperty =
        DependencyProperty.RegisterAttached("BindableColumns",
                                            typeof(ObservableCollection<DataGridColumn>),
                                            typeof(DataGridColumnsBehavior),
                                            new UIPropertyMetadata(null, BindableColumnsPropertyChanged));
    private static void BindableColumnsPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
    {
        DataGrid dataGrid = source as DataGrid;
        ObservableCollection<DataGridColumn> columns = e.NewValue as ObservableCollection<DataGridColumn>;
        dataGrid.Columns.Clear();
        if (columns == null)
        {
            return;
        }
        foreach (DataGridColumn column in columns)
        {
            dataGrid.Columns.Add(column);
        }
        columns.CollectionChanged += (sender, e2) =>
        {
            NotifyCollectionChangedEventArgs ne = e2 as NotifyCollectionChangedEventArgs;
            if (ne.Action == NotifyCollectionChangedAction.Reset)
            {
                dataGrid.Columns.Clear();
                foreach (DataGridColumn column in ne.NewItems)
                {
                    dataGrid.Columns.Add(column);
                }
            }
            else if (ne.Action == NotifyCollectionChangedAction.Add)
            {
                foreach (DataGridColumn column in ne.NewItems)
                {
                    dataGrid.Columns.Add(column);
                }
            }
            else if (ne.Action == NotifyCollectionChangedAction.Move)
            {
                dataGrid.Columns.Move(ne.OldStartingIndex, ne.NewStartingIndex);
            }
            else if (ne.Action == NotifyCollectionChangedAction.Remove)
            {
                foreach (DataGridColumn column in ne.OldItems)
                {
                    dataGrid.Columns.Remove(column);
                }
            }
            else if (ne.Action == NotifyCollectionChangedAction.Replace)
            {
                dataGrid.Columns[ne.NewStartingIndex] = ne.NewItems[0] as DataGridColumn;
            }
        };
    }
    public static void SetBindableColumns(DependencyObject element, ObservableCollection<DataGridColumn> value)
    {
        element.SetValue(BindableColumnsProperty, value);
    }
    public static ObservableCollection<DataGridColumn> GetBindableColumns(DependencyObject element)
    {
        return (ObservableCollection<DataGridColumn>)element.GetValue(BindableColumnsProperty);
    }
} 
```

那么，对你来说，究竟是什么构成了“MVVM”的方法呢？在 XAML 中拥有一切并不是“MVVM”模式的意义所在。

您还可以使用另一种技巧。它基本上围绕模板 DataGridColumn 和编写特定的触发器，该触发器将根据某些条件折叠列。我没有“现成”的解决方案，但它会起作用。

# css - 在特定 div 中选择具有特定类的元素

> ID：15830215
> 
> 赞同：0
> 
> 时间：2013-04-05T09:22:58.707
> 
> 标签：css, css-selectors

假设我有一个带有 DIVCLASS 类的 div，并且我有一个带有 ELEMENTCLASS 类的元素。如何选择具有类：ELEMENTCLASS 的所有元素，这些元素位于具有类：DIVCLASS 的 div 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:30:44.553

依靠，

ELEMENTCLASS 位于 DIVCLASS 中的哪个级别是否重要？

如果没有，请使用：

```
.divclass .elementclass {
    //properties here
} 
```

如果您只想选择作为 DIVCLASS 的*直接后代*的 ELEMENTCLASS，请使用：

```
.divclass > .elementclass {
    //properties here
} 
```

除非确实有必要，否则不要使用 div.divclass 进行过度指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:24:03.830

```
div.divclass > .elementclass 
```

# javascript - 使用来自另一个对象的属性在 javascript 中构建一个对象

> ID：15830216
> 
> 赞同：0
> 
> 时间：2013-04-05T09:23:03.463
> 
> 标签：javascript

我想要做的是创建一个对象，其中包含 x 个属性以及来自另一个对象的 y 个属性，我从调用另一个方法中检索到。这可能吗？

即这是我的伪代码。基本上我希望 mydata 包含我从 getMoreData() 返回的对象的所有属性也许这是不可能的，但我不知道该怎么做:(

```
var mydata = 
{
    name: "Joe Soap",
    dob: "01-01-2001",
    otherData: {
        hasCat: true,
        hasDog : false
    }

    var otherData = getMoreData();
    for(var prop in otherData)
    {
        create additional property in mydata for prop;
    }
}

function getMoreData()
{
    var moreData = 
    {
        middleName: "tom",
        location: "uk"
    }
    return otherData;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:26:51.587

您不能`for`在对象文字中间声明变量或使用其他语句。您需要先定义基本对象，然后再添加属性：

```
var mydata = {
    name: "Joe Soap",
    dob: "01-01-2001",
    otherData: {
        hasCat: true,
        hasDog : false
    }
};

var otherData = getMoreData();
for(var prop in otherData) {
    mydata[prop] = otherData[prop];
} 
```

此外，您的`getMoreData()`函数需要返回`moreData`变量，而不是`otherData`：

```
function getMoreData() {
    var moreData = {
        middleName: "tom",
        location: "uk"
    }
    return moreData;
} 
```

演示：http: [//jsfiddle.net/nnnnnn/TQf5H/](http://jsfiddle.net/nnnnnn/TQf5H/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:13:25.397

除了`nnnnnn`的答案。请注意，上面只做一个浅拷贝。

意思是如果你有一个`Object`它被引用复制。

这是一个更高级的合并功能。稍后我会更详细地解释它。

## 合并函数

* * *

```
var merge = (function () {
    var initThis = this;
    return function () {
        var len = arguments.length - 1,
            srt, tmp;
        if ("function" === typeof arguments[arguments.length - 1]) srt = arguments[arguments.length - 1];
        else {
            srt = function (a, b, prop) {
                if (null === prop) return a;
                return a[prop];
            };
            len++;
        }
        var merge = this === initThis ? {} : this;
        for (var i = 0; i < len; i++) inner(arguments[i], merge);

        function inner(obj2, obj1) {
            var type = ({}).toString.call(obj2);
            if (type == "[object Object]") {
                if (!obj1) obj1 = {};
                if (typeof obj1 != "object") obj1 = (tmp = srt(obj1, obj2, null), tmp) === obj2 ? {} : tmp; //If obj2 is returned, set to empty obj to allow deep cloning
                for (var prop in obj2) {
                    var isObj = "object" === typeof obj2[prop];
                    if (!obj1[prop] && isObj) obj1[prop] = inner(obj2[prop]);
                    else if (obj1[prop] && isObj) obj1[prop] = inner(obj2[prop], obj1[prop]);
                    else if (obj1[prop]) obj1[prop] = srt(obj1, obj2, prop) || obj1[prop];
                    else obj1[prop] = obj2[prop];
                }
            } else if (type == "[object Array]") {
                if (!obj1) obj1 = [];
                if (typeof obj1 != "object") obj1 = (tmp = srt(obj1, obj2, null), tmp) === obj2 ? [] : tmp
                for (var i = 0; i < obj2.length; i++) if (!obj1[i] && typeof obj2[i] == "object") obj1[i] = inner(obj2[i]);
                    else if (obj1[i] && typeof obj2[i] == "object") obj1[i] = inner(obj2[i], obj1[i]);
                else if (obj1[i]) obj1[i] = (function (i) {
                        return srt(obj1, obj2, i)
                    })(i) || obj1[i];
                else obj1[i] = obj2[i];
            }
            return obj1;
        }
        return merge;
    };
})(); 
```

## 样本数据

* * *

```
var target = {
    unique: "a",
    conflict: "target",
    object: {
        origin: "target"
    },
    typeConflict: "primitive",
    arr: [1, 5, 3, 6]
};
var mergeFrom = {
    other: "unique",
    conflict: "mergeFrom",
    object: {
        origin: "mergeFrom",
        another: "property"
    },
    typeConflict: ["object"],
    arr: [3, 2, 7, 1]
}; 
```

## 用法

* * *

合并函数接受`n`参数。

并将所有传递的对象合并为一个并返回。

您可以设置`.call`对象合并到的上下文。

`conflict`函数可以作为最后一个参数传递。如果属性已经存在，则会调用它。

它使用 3 个参数调用。

`a`, `b`,`prop`其中

`a`是第一个对象 `b`是第二个对象 `prop`是当前合并的属性。

如果存在类型冲突。例如，值 1 是 a `primitive`，值 2 是`Object`

`prop`是`null`

* * *

## 示例调用

* * *

*使用上下文调用合并函数，而不是其所在的范围，它将对象合并到其中。*

```
merge.call(target,mergeFrom) 
```

*调用它，传递一个始终使用对象`b`属性的冲突函数。*

```
var result = merge(target,mergeFrom,function (a,b,prop) {  
    if (prop === null) return b  
    return b[prop]  
}) 
```

*调用它传递 3 个数组和一个将值推送到第一个的冲突函数*

```
var mergedArr = merge({arr:[1]},{arr:[2]},{arr:[3]},function (a,b,prop) {
  if (a[prop] != b[prop]) a.push(b[prop])
  return a[prop]
}) 
```

[这是一个关于JSBin](http://jsbin.com/utejol/2/edit)的例子

## 输出

* * *

*示例 1 -`console.log(target)`*

```
{
    "arr": [1, 5, 3, 6],
    "as": "arguments",
    "conflict": "target",
    "more": "Objects",
    "object": {
        "another": "property",
        "origin": "target"
    },
    "other": "unique",
    "typeConflict": "primitive",
    "unique": "a"
} 
```

*示例 2 -`console.log(result)`*

```
{
    "arr": [3, 2, 7, 1],
    "conflict": "mergeFrom",
    "object": {
        "another": "property",
        "origin": "mergeFrom"
    },
    "other": "unique",
    "typeConflict": ["object"],
    "unique": "a"
} 
```

*示例 3 -`console.log(mergedArr)`*

```
{
    "arr": [1, 2, 3]
} 
```

# php - PHP中字符串的文本缩写

> ID：15830222
> 
> 赞同：3
> 
> 时间：2013-04-05T09:23:17.837
> 
> 标签：php, codeigniter-2

我正在尝试使用 CodeIgniter 2.x 从头开始​​创建一个网上商店。一家商店有自己的制造商的产品，如*Glock、Colt、Kalashnikov、Boker、CZ、Kizlyar、GroundZero*等......

我需要为与和混合的每种产品创建唯一的**SKU** *（库存单位）*名称。这样做是没有问题的，即：带有 的产品的SKU **，**变为：**groundzero-0013**`product.id``product.manufacturer`**`id=13``manufacturer=GroundZero``name=Striker II`**

 ****我需要生成缩写，以便 SKU 变成这样：**grzr-0013**或**gnzr-0013**

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:10:58.077

我根据您提到的规格编写了以下 SKU 生成器，您可以更改`$l`以使其更加独特（在某种程度上）：

```
echo SKU_gen('ZeroGround', 13, 2).'<br>'; // zrgr-0013
echo SKU_gen('ZeroGround', 13, 3).'<br>'; // zrgrn-0013
echo SKU_gen('Glock', 14, 3).'<br>'; // glc-0014
echo SKU_gen('CZ', 15, 3).'<br>'; // cz-0015
echo SKU_gen('Kizlyar', 20).'<br>'; // kz-0020

function SKU_gen($string, $id = null, $l = 2){
    $results = ''; // empty string
    $vowels = array('a', 'e', 'i', 'o', 'u', 'y'); // vowels
    preg_match_all('/[A-Z][a-z]*/', ucfirst($string), $m); // Match every word that begins with a capital letter, added ucfirst() in case there is no uppercase letter
    foreach($m[0] as $substring){
        $substring = str_replace($vowels, '', strtolower($substring)); // String to lower case and remove all vowels
        $results .= preg_replace('/([a-z]{'.$l.'})(.*)/', '$1', $substring); // Extract the first N letters.
    }
    $results .= '-'. str_pad($id, 4, 0, STR_PAD_LEFT); // Add the ID
    return $results;
} 
```****

# javascript - 检测用户在使用 gapi.auth.authorize 时是否关闭弹出窗口

> ID：15830224
> 
> 赞同：3
> 
> 时间：2013-04-05T09:23:26.683
> 
> 标签：javascript

使用 gapi.auth.authorize 函数，用户可以在不单击任何选项（没有接受或拒绝按钮）的情况下关闭弹出窗口。当这种情况发生时，我的回调函数不会触发，所以我无法处理这种情况。解决这种情况的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-28T17:33:47.100

这个问题已经存在了一段时间，但是当我调查这个问题时（我想在 google 身份验证窗口打开时显示一个微调器，如果用户决定不进行身份验证则隐藏它），并发现 gapi 正在抛出一个错误`popup_closed_by_user`。在抛出之前有两秒的延迟（有点长，Facebook 是即时的），但它确实有效。万岁，谷歌！

一些示例代码（角度 1.x）`prompting`是显示微调器的属性：

```
_google_obj.prompting = true;
gapi.auth2.getAuthInstance().signIn().then(function(googleResponse){
    var token = googleResponse.getAuthResponse().id_token;
    SVC_exec_.post('/q/goog', 1000, { token: token }, 'signing you in through Google', function (response) {
        if (response.code === 'ok') {
            // update the UI
        }
        _google_obj.prompting = false;
    });
}, 
function(error){
    $timeout(function () {
        console.log('user probably closed the google popup window: '+error);
        _google_obj.prompting = false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:47:48.277

他们似乎没有在任何文档中提及它，但`gapi.auth.authorize()`返回了 popup `Window`。所以你可以保存返回`Window`并设置一个间隔或超时来检查`Window.closed`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T14:59:57.070

所以你来自谷歌的 auth 函数返回**promise**，而不是一个窗口。但是您可以将原始窗口包装到函数中，该函数将设置间隔，以检查打开的窗口是否已经关闭。

```
// variable to store our deferred object
var authDefer = null;

function auth() {

    // right before the auth call, wrap window.open
    wrap();
    // Call auth
    authDefer = window.gapi.auth.authorize({
        client_id: ...,
        scope: ...,
        immediate: ...
    }).then(
        // onSuccess,
        // onReject,
        // onNotify
    );
}

function wrap() {
    (function(wrapped) {
        window.open = function() {
            // re-assign the original window.open after one usage
            window.open = wrapped;
            var win = wrapped.apply(this, arguments);
            var i = setInterval(function() {
                if (win.closed) {
                    clearInterval(i);
                    if (authDefer) {
                        authDefer.cancel();
                    }
                }
            }, 100);
            return win;
        };
    })(window.open);
} 
```

取自谷歌论坛上的一个主题。真的有效。

[指向源的外部链接](https://github.com/google/google-api-javascript-client/issues/25#issuecomment-76695596)

# php - 图像安全和 linux 文件/目录权限

> ID：15830226
> 
> 赞同：0
> 
> 时间：2013-04-05T09:23:33.560
> 
> 标签：php, linux, image, security

在 PHP 应用程序中，我允许用户上传照片。用户上传后，元数据存储在数据库中，然后图像存储在 linux 服务器上的目录中。我只希望在通过视图调用时可以查看这些图像，以便我可以验证正确的一方正在查看它们。我不希望任何人能够只输入一个 url 并查看图像。

```
/site
   /framework
   /protected  /**My PHP site**/
   /www
      /images  /**This is where I am currently storing the images**/ 
```

1.  为了限制查看这些图像，我需要将`images`目录移到`www`? 如果有到哪里？
2.  应该在`images`目录上授予哪些 linux 权限？
3.  对于我存储在我的数据库中的我想要限制访问的图像，我在我的框架中使用访问规则。诸如此类的规则是否也可以限制对给定目录中图像的访问？

可以提供有关如何处理此问题的任何信息（以便我可以进行进一步的研究）以及对上述问题的答案将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:29:13.377

> 为了限制查看这些图像，我是否需要将图像目录移到 www 之外？

不，但这是最安全的选择。

> 如果有到哪里？

任何地方

> 应该在 images 目录上赋予什么 linux 权限？

服务器读取和写入它所需的最小值。可能是700。

> 对于我存储在我的数据库中的我想要限制访问的图像，我在我的框架中使用访问规则。诸如此类的规则是否也可以限制对给定目录中图像的访问？

由于图像只能通过 PHP 获得，PHP 可以添加您喜欢的任何 auth/authz。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:30:30.017

对于要拒绝该目录中的所有图像（它们都必须通过脚本访问，并且它们都不能直接访问 - 即只有您的服务器能够访问它们，并且您有 apache ） ，`mod_rewrite`您可以放入`.htaccess`该目录如下所示：

```
deny from all 
```

所以按数字回答问题.. ^^

1.  不，它`.htaccess`会以同样的效果处理它。
2.  您需要 read ( `+r`) 来获取服务器的图像。
3.  框架可能有类似的东西，但如果图像 URL 已知，它不能阻止直接链接。使用`.htaccess`或移动目录将是最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:42:40.383

您可以简单地使用一个`.htaccess`文件并限制人们进入该目录，以及关闭目录列表以防万一。

# java - 使用 HtmlUnit 进行抓取时出现 OutOfMemoryError

> ID：15830227
> 
> 赞同：6
> 
> 时间：2013-04-05T09:23:36.233
> 
> 标签：java, web-scraping, tomcat7, htmlunit

我正在使用 HtmlUnit 登录到一个站点，然后从表中下载数据

当我运行我的代码时导致`java.lang.OutOfMemoryError`并且无法进一步运行。

以下是我的代码：

```
WebClient webClient = new WebClient(BrowserVersion.INTERNET_EXPLORER_6);
webClient.getOptions().setJavaScriptEnabled(true);
webClient.getOptions().setCssEnabled(false);
webClient.getOptions().setRedirectEnabled(true);
webClient.getCookieManager().setCookiesEnabled(true);
                            webClient.getOptions().setPrintContentOnFailingStatusCode(false);
webClient.setAjaxController(new NicelyResynchronizingAjaxController());
webClient.getOptions().setTimeout(50000);
webClient.getOptions().setUseInsecureSSL(true);
webClient.getOptions().setPopupBlockerEnabled(true);

HtmlPage htmlPage=webClient.getPage(url);
Thread.sleep(200);
                            //~~~~~~~Log-In
HtmlTextInput uname=(HtmlTextInput)htmlPage.getFirstByXPath("//*[@id=\"username\"]");
uname.setValueAttribute("xxx");
HtmlPasswordInput upass=(HtmlPasswordInput)htmlPage.getFirstByXPath("//*[@id=\"password\"]");
upass.setValueAttribute("xxx");
HtmlSubmitInput submit=(HtmlSubmitInput)htmlPage.getFirstByXPath("//*[@id=\"login-button\"]/input");
htmlPage=(HtmlPage) submit.click();
Thread.sleep(200);
webClient.waitForBackgroundJavaScript(10000);
for (int i = 0; i < 250; i++) {
 if (!htmlPage.asText().contains("Loading...")) {
     break;
  }
    synchronized (htmlPage) {
     htmlPage.wait(500);
 }
}

System.out.println(htmlPage.asText()); 
```

以下是stackTrace

```
java.lang.OutOfMemoryError: Java heap space
at net.sourceforge.htmlunit.corejs.javascript.Node.newString(Node.java:155)
at net.sourceforge.htmlunit.corejs.javascript.Node.newString(Node.java:151)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.createPropertyGet(IRFactory.java:1990)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformPropertyGet(IRFactory.java:968)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:106)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformPropertyGet(IRFactory.java:964)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:106)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformPropertyGet(IRFactory.java:964)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:106)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformFunctionCall(IRFactory.java:595)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:86)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformInfix(IRFactory.java:775)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:161)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformAssignment(IRFactory.java:368)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:152)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformExprStmt(IRFactory.java:488)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:149)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformBlock(IRFactory.java:406)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:82)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformIf(IRFactory.java:762)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:110)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformBlock(IRFactory.java:406)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:82)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformIf(IRFactory.java:762)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:110)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformBlock(IRFactory.java:406)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:82)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformIf(IRFactory.java:768)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:110)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformBlock(IRFactory.java:406)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transform(IRFactory.java:82)
at net.sourceforge.htmlunit.corejs.javascript.IRFactory.transformFunction(IRFactory.java:560) 
```

我在 catlina.sh 文件中添加了以下行来分配堆内存但我仍然遇到同样的错误（我的 RAM 大小为 2GB）。

```
if [ -z "$LOGGING_MANAGER" ]; then
     JAVA_OPTS="$JAVA_OPTS -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager"
else
     JAVA_OPTS="$JAVA_OPTS $LOGGING_MANAGER"
fi

# Uncomment the following line to make the umask available when using the
# org.apache.catalina.security.SecurityListener
   JAVA_OPTS="$JAVA_OPTS -Dorg.apache.catalina.security.SecurityListener.UMASK=`umask`"
   JAVA_OPTS="$JAVA_OPTS  -Xms512m -Xmx2048m -XX:MaxPermSize=512m"
   JAVA_OPTS="-server -XX:+UseConcMarkSweepGC" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:23:16.667

您在最后一行代码中包含此**$JAVA_OPTS**，愿您的代码有效

```
JAVA_OPTS="$JAVA_OPTS -server -XX:+UseConcMarkSweepGC" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:07:28.440

我会设置[-XX:+HeapDumpOnOutOfMemoryError](https://blogs.oracle.com/alanb/entry/heap_dumps_are_back_with)然后使用像[Eclipse MAT](http://www.eclipse.org/mat/)这样的工具。

# java - 合并时休眠 StaleDataException

> ID：15830229
> 
> 赞同：0
> 
> 时间：2013-04-05T09:23:38.793
> 
> 标签：java, spring, hibernate

我有 2 个网络服务 API。在一个 api 中，我获取一个实体并作为 SRO 返回。我是另一个 api，我收到一个 SRO，将其转换为实体并使用

```
sessionFactory.getCurrentSession().merge(code); 
```

但是，我得到以下异常。请帮我找出相同的原因。

```
org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Object of class [PartnerPromoCode] with identifier [254874]: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [PartnerPromoCode#254874]
at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:683)
at org.springframework.orm.hibernate3.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:89)
at org.springframework.orm.hibernate3.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:68)
at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58)
at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)
at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:163)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:199)
at sun.proxy.$Proxy48.updatePartnerPromoCode(Unknown Source)
at abc.updatePartnerPromoCode(abc.java:567)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:199)
at sun.proxy.$Proxy54.updatePartnerPromoCode(Unknown Source)
at abc.updatePartnerPromoCode(ServiceDealWebServiceController.java:272)
at xyz$$FastClassByCGLIB$$c65431c6.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149) 
```

**编辑**

这是实体 @Entity @Table(name = "partner_promo_code", catalog = "snapdeal") @NamedQueries({ @NamedQuery(name = QueryNames.GET_UNUSED_PARTNER_PROMO_CODE, query = "select p from PartnerPromoCode p where p.status=0 and p .partnerCode = :partnerCode 和 p.catalogId = :catalogId order by p.id"), @NamedQuery(name = QueryNames.GET_PARTNER_PROMO_CODE_BY_PROMO, query = "from PartnerPromoCode where partnerCode = :partnerCode and promoCode = :promoCode") }) 公共类PartnerPromoCode 实现 java.io.Serializable {

```
public static final Boolean STATUS_USED      = true;
public static final Boolean STATUS_NOT_USED  = false;
/**
 * 
 */
private static final long   serialVersionUID = 7786688992136091701L;
private Integer             id;
private String              partnerCode;
private String              promoCode;
private Boolean             status;
private Date                expiry;
private Date                created;
private Date                updated;

public PartnerPromoCode() {
}

public PartnerPromoCode(String partnerCode, String promoCode) {
    this.partnerCode = partnerCode;
    this.promoCode = promoCode;
    this.status = STATUS_NOT_USED;
}

@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name = "id", unique = true, nullable = false)
public Integer getId() {
    return this.id;
}

public void setId(Integer id) {
    this.id = id;
}

@Column(name = "partner_code")
public String getPartnerCode() {
    return partnerCode;
}

public void setPartnerCode(String partnerCode) {
    this.partnerCode = partnerCode;
}

@Column(name = "promo_code")
public String getPromoCode() {
    return promoCode;
}

public void setPromoCode(String promoCode) {
    this.promoCode = promoCode;
}

@Column(name = "status")
public Boolean getStatus() {
    return status;
}

public void setStatus(Boolean status) {
    this.status = status;
}

@Temporal(TemporalType.TIMESTAMP)
@Column(name = "expiry", nullable = false, length = 19)
public Date getExpiry() {
    return expiry;
}

public void setExpiry(Date expiry) {
    this.expiry = expiry;
}

@Temporal(TemporalType.TIMESTAMP)
@Column(name = "created", nullable = false, length = 19)
public Date getCreated() {
    return created;
}

public void setCreated(Date created) {
    this.created = created;
}

@Version
@Column(name = "updated", nullable = false, length = 19)
public Date getUpdated() {
    return updated;
}

public void setUpdated(Date updated) {
    this.updated = updated;
} 
```

}

我正在通过 id 获取实体并将其转换为 SRO，将其通过网络传递...然后我收到 sro，创建一个新的实体对象并设置 id 和所有其他字段，将更新的字段设置为当前时间，然后尝试通过合并实体`sessionFactory.getSession().merge(obj)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:27:01.070

因为带有注释的字段`@Version`的值与存储在数据库中的值不匹配（或者因为数据库中的行不再存在）。

# symfony - 连接树枝中对象列表的属性值

> ID：15830231
> 
> 赞同：5
> 
> 时间：2013-04-05T09:23:51.520
> 
> 标签：symfony, twig

是否可以加入对象列表的属性值来显示它？
就像是：

```
{{ users|join(', ', username) }} 
```

对象在哪里`users`，有一个`getUsername()`方法。
我想`join`不需要额外的参数，但是有没有解决方法来实现类似的东西？我不能使用该`__toString()`功能，因为它代表其他东西......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-01-31T08:40:46.607

或仅使用一个 forloop 获得相同的结果

```
{% for user in users %}
    {{ user.username }}{% if not loop.last %}, {% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T10:50:51.293

你可以用..

```
{% set usernames = [] %}

{% for user in users %}
    {% set usernames = usernames|merge([user.username]) %}
{% endfor %}

{{ usernames|join(', ') }} 
```

虽然不是最漂亮的。

你总是可以制作一个自定义的树枝过滤器来做到这一点。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-04-16T13:32:43.453

您可以使用[map()](https://twig.symfony.com/doc/3.x/filters/map.html)过滤器...并将所有内容放在一行中：

```
{{ users|map(u => u.username)|join(', ') }} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-27T13:24:01.637

[数字消息想法](https://stackoverflow.com/a/41953055/1456376)的简短版本：

```
{% for user in users %}
    {{ user.username ~ (not loop.last ? ', ') }}
{% endfor %} 
```

# rest - 如何将模型名称传递给 angularJS restful api

> ID：15830241
> 
> 赞同：1
> 
> 时间：2013-04-05T09:24:25.090
> 
> 标签：rest, module, angularjs

我是 AngularJS 的新手，但现在使用 Backbone 已经有一段时间了。

我想创建一个可重用的restful api，我可以将模型名称传递给它，以便我可以将它用于不同的模型。

目前我有：

```
angular.module('healthplanApiServices', ['ngResource'])
.factory('Api', function($resource) {
    return $resource(base_url + 'api/:object/:id', {
            id : '@id', object : 'actions'
    }, {
        query : {
            method : 'GET',
            isArray : true,
            callback : "JSON_CALLBACK"
        },
        save : {
            method :  '@id' ? 'PUT' : 'POST',
            isArray : true,
            callback : "JSON_CALLBACK"
        }
    });
}); 
```

...将模型设置为“动作”。然后在我的控制器中我使用：

```
// get the collection
Api.query(function(r) {
$scope.actions = r;
});
$scope.toggleDone = function(a) {
    a.done = !a.done;
   //save an item
    Api.save(a);
} 
```

这一切都很好，但是我如何为每种模型类型传递模型名称（在这种情况下为“动作”）：例如，而不是将其放入工厂函数中，如下所示：

```
id : '@id', object : 'actions' 
```

...但更像是：

```
var ActionApi = Api.setObject('actions');
ActionApi.query(function(r) {
    $scope.actions = r;
}); 
```

更新：我只是想出了一个办法。它可能不是最好的，但它确实有效。欢迎任何其他建议！只需将“对象”属性添加到模型中：

```
Api.query({object: 'actions'}, function(r) { 
  $scope.actions = r; 
  angular.forEach($scope.actions, function(a) { 
   a.object = 'actions' }); 
  }); 
Api.save(a);// also works 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T00:34:04.910

您可能想尝试[https://github.com/klederson/ModelCore](https://github.com/klederson/ModelCore) ( ModelCore )

它易于建模和构造，当然还有……使用。

```
model.$find({ filter : "John" },{},true); //to find all with query parameters 
model.$get(1); //to retreive the user with id 1
model.$save()
model.$deelte(); 
```

等等..查看文档

# perl - 哈希修改问题

> ID：15830252
> 
> 赞同：0
> 
> 时间：2013-04-05T09:24:45.327
> 
> 标签：perl, hash

我正在打印一个哈希`[ print Dumper($myhash); ]`，如下所示：

```
$VAR1= {
  'context_verdict' => 'Failed',
  'logfile' => 'abc',
  'Block_000' => {
     'Element_0032' => {
         'e_verdict' => 'FAILED',
         'e_name' => 'Element_0032',
         'e_log' => 'This is really bad...',
         'e_ref' => 'Good'
     }
  } 
```

现在我想将 logfile 的值从 abc 更改为 def。如何做到这一点？

我写

```
$myhash{'$VAR1'}->{'logfile'}="def"; 
```

但它不起作用！它仍然是“abc”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T09:28:16.810

试试这个：

```
$myhash->{'logfile'}="def"; 
```

Data::Dumper 将您的变量命名为 $VAR1，这不是您的哈希中的条目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T09:36:05.977

首先，始终使用`use strict; use warnings;`.

你要

```
$VAR1->{'logfile'} = "def"; 
```

如果您使用 获得转储`Dumper(\%myhash)`，

```
$myhash{'logfile'} = "def"; 
```

如果您使用 获得转储`Dumper($myhash)`，

```
$myhash->{'logfile'} = "def"; 
```

`$myhash`持有对哈希的引用，因此您需要取消引用它才能访问哈希。这就是`->`正在做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:59:05.297

`Data::Dumper`有助于分析一个巨大的哈希值，这些值将在输出中命名为**$VAR**。

你的问题的答案是：

您可以将值设置为

```
 $myhash->{'logfile'}="def"; 
```

# google-api - 使用 google-api-PHP-client 在 Google+ 流中的帖子未显示在用户的流中

> ID：15830255
> 
> 赞同：0
> 
> 时间：2013-04-05T09:24:56.340
> 
> 标签：google-api, google-plus, google-api-php-client

我正在尝试在用户的 Google+ 流中发帖，并且正在使用 google-api PHP 客户端进行尝试。到目前为止，我已经能够使用最新的 google-api PHP 客户端和示例脚本配置测试环境（有关更多信息，请参阅[使用 PHP 客户端发布 Google+ Moments 时的 401 Unauthorized access](https://stackoverflow.com/questions/15759821/401-unauthorized-access-when-posting-google-moments-with-php-client)）。它看起来像是在发布，因为它返回了一个带有答案的数组，但用户流中没有显示任何内容。

答案数组是：

```
Array ( 
    [kind] => plus#moment 
    [type] => http://schemas.google.com/AddActivity 
    [target] => Array ( 
        [kind] => plus#itemScope 
        [url] => https://developers.google.com/+/plugins/snippet/examples/thing 
    ) 
    [result] => Array ( 
        [kind] => plus#itemScope 
    ) 
    [id] => xxxxxxxxx 
) 
```

这看起来是正确的。有谁知道为什么会发生这种情况以及如何解决？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:53:57.017

应用活动不会呈现在用户的信息流中，而是呈现在 Google+ 的应用活动部分中：

[https://plus.google.com/apps/](https://plus.google.com/apps/)

为防止信息流中出现垃圾信息，用户必须明确分享到他们在 Google+ 中的信息流。您可以使用[Shares](https://developers.google.com/+/web/share/)和[Interactive Posts](https://developers.google.com/+/web/share/interactive)来做到这一点。

# colors - 使颜色转义码在 cgdb 中工作

> ID：15830259
> 
> 赞同：2
> 
> 时间：2013-04-05T09:25:03.667
> 
> 标签：colors, gdb, cgdb

我有以下功能`~/.gdbinit`：

```
define foo
    echo \033[34m
    echo testing...\n
    echo \033[0m
end 
```

但是，在其中运行时`foo`，`gdb`它会以蓝色打印`testing...`，但在`cgdb` 结果中运行时是：

```
[34mtesting...
[0m 
```

如何在 中启用颜色转义码`cgdb`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:01:54.520

不幸的是，cgdb 中的 gdb“窗口”不是一个成熟的终端……它可以处理基本的文本 I/O，但它不会呈现任何终端转义序列，例如颜色、光标移动等。

# jquery - 获取和操作产品 ID

> ID：15830260
> 
> 赞同：0
> 
> 时间：2013-04-05T09:25:07.857
> 
> 标签：jquery

我想澄清什么是获取和操作产品 ID 的正确方法。这是我的尝试：

HTML：

```
<div data-product-id="100"></div> 
```

脚本：

```
var pid = $(this).attr('data-product-id');
$('#product_' + pid).css('display', 'none'); 
```

有更好的方法`$('#product_' + pid)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:26:44.063

我可以使用的唯一问题是不使用[data()](http://api.jquery.com/jQuery.data/)访问数据属性，否则如果您没有很多元素，则使用产品 ID 号并将其与像 product_ 这样的前缀连接很好，否则您可以使用 p_ 来保存一些字节.

要查看 data() 和属性之间的区别，您可以阅读这篇[**文章**](https://stackoverflow.com/questions/7261619/jquery-data-vs-attr)。

```
var pid = $(this).data('product-id');
$('#product_' + pid).css('display', 'none'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:26:53.310

为什么不简单地这样做：

```
$('#product_id').hide(); 
```

但如果你坚持：

```
$('#product_' + $(this).data('product-id')).hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:29:59.357

您的代码唯一真正的问题是它不适用于任何 id。例如，如果您的数据属性中有圆点或括号，它将不起作用。

在这种情况下，你必须做

```
$(document.getElementById('product_' + $(this).data('product-id')))
    .css('display', 'none'); 
```

如果你知道你有什么 ID，而且它们并不花哨，那么你的代码基本上没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:27:24.067

尝试这个：

```
 $('#product_' + $(this).data('product-id')).css('display', 'none');; 
```

# build-automation - 在 CCNET 自动构建过程中以编程方式从 EDMX 生成 .generated.cs

> ID：15830264
> 
> 赞同：1
> 
> 时间：2013-04-05T09:25:19.167
> 
> 标签：build-automation, cruisecontrol.net, edmx

我正在尝试使用 CCNET 使用 EDMX 自动构建 MVC 项目。我们不会将生成的文件保存在源代码管理中（例如EDMX打开并保存（.generated.cs）时创建的文件），因此必须在构建过程中重新生成这些文件，但它们不是. 我正在使用 MVC4 并且 CCNET 是最新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:29:23.717

确保在构建服务器中安装了[TextTransform Utility 。](http://msdn.microsoft.com/en-us/library/bb126245.aspx)可以在[此处](http://msdn.microsoft.com/en-us/library/ee847423.aspx)找到有关构建服务器代码生成的良好指南。

# jquery - SCRIPT5：访问被拒绝 IE09 和 IE10

> ID：15830266
> 
> 赞同：4
> 
> 时间：2013-04-05T09:25:25.337
> 
> 标签：jquery, internet-explorer, file-upload, ruby-on-rails-3.2

我正在使用导轨 3.2.11。我已经实现了文件上传的概念。它适用于 Firefox 和 chrome 浏览器。

形式

```
<iframe id="upload_target" name="upload_target" style="display:none;"></iframe>
<%= form_tag(url_for(:action => 'add_image'), 
                    :target => 'upload_target',
                    :id => 'add_image_form',
                    :enctype => 'multipart/form-data', :multipart=>true) do %>
    <%= text_field 'image_asset', 'name', :size => [60,40].min, :maxlength => "60", :id => "focus", :style=>"display:none", :value=>"site_logo" %>
    <%= text_field 'image_asset', 'image_type', :value=>"Icon",:style=>"display:none"%>
    <input type="file" id="file" name="image_form_file" size="36" style="display:none;" /> 
    <a href="#" class="button" onclick="$('#file').click();">Upload a new logo image</a>
    <a href="#" class="button green" onclick=" $('#add_image_form').submit();">Save</a>
<% end %> 
```

jQuery

```
 $('#file').live("change",function() {
       $('#add_image_form').submit();
       setTimeout(function(){
        $.ajax({
                type: "GET",
                beforeSend: function(xhr){ xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
                dataType: "html",
                url: "/get_image",
                data: "record_id=<%= @page.id%>&format=html",

                success: function(data){
                    $('#site_logo').html(data);
                    var new_image = $('#site_logo').find("img").attr('src');
                },
                error: function(){
                }
            });
    }, 6000) 
```

我只在 IE 9、IE 10 浏览器中遇到问题。Java 脚本控制台抛出“SCRIPT5：访问被拒绝”。

我尝试过允许文件夹位置的权限，但没有用。C:\Users[USERNAME]\AppData\Local\Microsoft\Internet Explorer\DOMStor C:\Users[USERNAME]\AppData\Local\Packages\windows_ie_ac_001\AC\Microsoft\Intern‌​et Explorer\DOMStore

任何建议

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T09:38:23.980

尝试将您的按钮锚点包装在标签标签中：

```
<input type="file" id="file" name="image_form_file" size="36" style="display:none;" /> 
<label for="file" class="button">Upload a new logo image</label> 
```

单击标签将触发文件输入，而不会使 Internet Explorer 的表单无效。

（在 IE9 和 IE10 中测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-05T11:43:43.663

javascript 代码无法使用 iframe 进行文件上传，无法确定 IE10 中服务器响应的 HTTP 状态代码。

[https://cmlenz.github.io/jquery-iframe-transport/#section-13](https://cmlenz.github.io/jquery-iframe-transport/#section-13)

您必须返回成功响应并评估 json 数据以确定它是成功还是不响应。

# asp.net - 如何更改 Chrome 必填字段处理

> ID：15830267
> 
> 赞同：0
> 
> 时间：2013-04-05T09:25:30.147
> 
> 标签：asp.net, google-chrome

我有一些带有必需属性的输入字段

```
<input id="name" required="" placeholder="Write your name"> 
```

此外，我还有可以进行回发的按钮和一些其他可以进行回发的链接。

但如果输入字段没有任何数据 chrome 会阻止我的回发操作，并显示一些 chrome pupup 框，其中包含我需要在表单上填写所有数据的信息。同时 IE 允许这样做。如何解决呢？当然，我可以在回发操作之前使用 JavaScript 删除此属性，但我不确定这是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:42:14.613

我认为您不应该指望 HTML5`required`属性，因为（在 IE 的情况下）只有 IE 10+ 支持它（请参阅此处的“表单验证”部分：[Web Forms - Dive Into HTML5](http://diveintohtml5.info/forms.html)）。当然，`placeholder`属性也是如此，但在大多数情况下，它是您可以忍受的（并且进行有效的验证更为关键）。

我认为您应该使用 ASP.NET 本身提供的验证功能，它非常容易上手，并且您可以轻松地使其在客户端启用和不启用 JavaScript 的情况下工作。更多信息：[了解 ASP.NET 验证技术](http://www.codeproject.com/Articles/334310/Understanding-ASP-NET-Validation-Techniques)。

# lungojs - lungo 框架不适用于示例代码

> ID：15830269
> 
> 赞同：1
> 
> 时间：2013-04-05T09:25:39.647
> 
> 标签：lungojs

我正在测试lungo 框架，通过阅读他们的示例（[http://lungo.tapquo.com/howto/prototype](http://lungo.tapquo.com/howto/prototype)），它不起作用。

我正在使用他们的骨架代码：

```
 <body class="app">

<section id="main" data-transition="">
    <article id="main-article" class="active">
        test.
    </article>
</section>

<script src="components/quojs/quo.js"></script>
<script src="components/lungo/lungo.js"></script>

<script type='text/javascript'>
    Lungo.init({
        name: 'example'
    });
</script>

</body> 
```

我的控制台没有错误。什么可能导致问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:13:12.103

如果这就是你所有的 HTML，那么你会丢失一大堆 CSS 文件等。你能分享一个 JS fiddle 或更长的代码示例吗？您没有收到任何 JS 错误的方式对我来说意味着您很可能缺少一些 CSS。另外，您使用的是哪个版本的 Lungo？你是如何获得它的？

很多问题:) 但是，我不久前创建了一个基本的 Lungo JSfiddle - [http://jsfiddle.net/otupman/vz59n/](http://jsfiddle.net/otupman/vz59n/) - 试试看它是否有效。在“外部资源”部分，您将找到我所包含的 CSS 和 JS 以使其正常工作。

我正在使用的简单代码（因为 S/O 不允许我发布没有代码的 JSFiddle 链接）看起来像这样：

```
<section id="main" > 
    <header data-title="JsFiddle Lungo">
        <nav class="left">
            <a data-icon="home"></a>
        </nav>
    </header>
    <article class="active" id="first_article">
        <strong>Simple Example</strong>
        <a href="#second_article" data-router="article">Second article</a>
        <br/>
        <a href="#second_section" data-router="section">Second section</a>
    </article>
    <article id="second_article">
        <strong>Second article</strong>
        <a href="#first_article" data-router="article">First article</a>
        <br/>
        <a href="#second_section" data-router="section">Second section</a>
    </article>
</section> 
```

所有的 CSS/JS 文件都来自 Lungo 的示例，例如，一个 CSS 是[http://lungo.tapquo.com/example/components/lungo/lungo.css](http://lungo.tapquo.com/example/components/lungo/lungo.css)

# internet-explorer-9 - 奇怪的 Internet Explorer 9 问题 - 在多行文本框中复制文本

> ID：15830271
> 
> 赞同：1
> 
> 时间：2013-04-05T09:25:41.727
> 
> 标签：internet-explorer-9, textarea

我刚刚发现了我认为我见过的最奇怪的 Internet Explorer 问题，并且完全不知道如何解决它，所以希望也许有人以前见过类似的东西并且知道是什么原因导致它/如何解决它.

我有一个多行文本框，如下：

```
<asp:TextBox runat="server" ID="txtDoctorNotes" TextMode="MultiLine" Rows="8" Width="270"></asp:TextBox> 
```

今天早上我注意到这个文本框中的一些单词被重复了，我以为我只是在输入时犯了一个错误，我在框中单击以更改内容，但奇怪的是重复消失了，它应该是. 我在文本框上没有“onclick”事件，尽管在内容更改时使用了 jquery（所以当我开箱即用时，jquery 会标记表单的某些内容已更改）。认为这是一次性渲染问题，我重新加载了页面，果然相同的重复再次出现，单击框，它们消失了。奇怪的是，重复的单词不在内容的开头或结尾，甚至不是全部在一起，它只是随机复制它们。

在 Chrome 中尝试过，效果很好，没有重复。

例如，我已将内容更改为以下内容：

“敏捷的棕色狐狸跳过了懒惰的狗”。

我在设置文本框内容的行上放了一个断点，它显示了上面的内容，但是，当表单加载时它显示：

“敏捷的棕色狐狸跳过了懒惰的狗”。

如果我单击它，它会更改为正确读取。

当我之前有我的实际笔记时，它也复制了最后一个单词，但与其他单词分开，所以在上面的例子中它应该是：

“敏捷的棕色狐狸跳过了懒惰的狗狗”。

我正在运行 Internet Explorer 9。如果我通过 F12 按钮更改为 Internet Explorer 8 模式，它可以解决问题，所以它似乎是 IE9。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T22:51:13.583

我在 XP IE8 上遇到过这种情况。我的解决方案是结合一堆不同的垃圾：

*删除 textarea 及其容器周围的所有空格
*删除 textarea 周围或页面中的注释，如果可以的话
*如果 textarea 默认隐藏，则仅在显示它的操作上填充其文本！这是imo最重要的一个。

祝你好运，这个 bug 早在 IE7 中就出现了，但他们从未真正修复过它。

# php - 如何使用for循环解析json数组元素以一一获取值

> ID：15830276
> 
> 赞同：0
> 
> 时间：2013-04-05T09:25:52.800
> 
> 标签：php, json, parsing

我有一个 json 数组，我想通过使用 for 循环将 json 解析到最后一个元素，因为我想获取 json 数组中数组元素的数量，我在 anarray 中有超过 3 个对象，所以我是困惑如何解析 json 直到最后一个元素，我可以说你的想法

```
Count($json);
 echo count;
  for(i=0;i<l=count($json);i++)
 {
 then print the value of each key
 } 
```

我被卡住了，因为我得到的 json 没有固定长度，因为它是服务器响应，它可能返回一个对象，一个对象可能是两倍或三次或多个，所以我认为使用 for 循环会更好，因为一个 json 包含多个具有 3 个键的 json，例如国家可以有多个州，一个州可以有多个地区，请帮帮我，我在过去 2 天遇到问题谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:32:20.473

一个主意 ：

```
function printJson($json) {
       foreach($json as $index=>$value) {
           if(is_array($value)) {
               printJson($value);
           } else {
               echo 'Value :'.$value.'<br />';
           }
       }

}
$stringJson = "{'location':[{...}]}"; //for example
printJson(json_decode($stringJson)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:44:09.637

`json_decode()`您也可以使用它将给出 ua php 变量来解码 json 字符串，然后您可以轻松地使用 php 对其进行迭代。

例如。

```
$string = '{"image":"fox.png","puzzlepieces":{"f":{"puzzlepiece":"one","position":"top:121px;left:389px;"},"x":{"puzzlepiece":"three","position":"top:164px;left:455px;"},"o":{"puzzlepiece":"two","position":"top:52px;left:435px;"}}}';

var_dump(json_decode($string)); 
```

将输出为

```
object(stdClass)[1]
  public 'image' => string 'fox.png' (length=7)
  public 'puzzlepieces' => 
    object(stdClass)[2]
      public 'f' => 
        object(stdClass)[3]
          public 'puzzlepiece' => string 'one' (length=3)
          public 'position' => string 'top:121px;left:389px;' (length=21)
      public 'x' => 
        object(stdClass)[4]
          public 'puzzlepiece' => string 'three' (length=5)
          public 'position' => string 'top:164px;left:455px;' (length=21)
      public 'o' => 
        object(stdClass)[5]
          public 'puzzlepiece' => string 'two' (length=3)
          public 'position' => string 'top:52px;left:435px;' (length=20) 
```

我的 xdebug 扩展在 WAMP 中打开，因此您的 var_dump 格式可能略有不同，但总体而言，您会从数组中获得一个 php 变量，您可以使用它`foreach`或其他循环进行迭代。

[在此处](http://php.net/manual/en/function.json-decode.php)阅读有关 json_decode 的更多信息

# php - 在进行 Google plus API 调用时收到 HTTP 401 Unauthorized

> ID：15830280
> 
> 赞同：3
> 
> 时间：2013-04-05T09:26:04.550
> 
> 标签：php, google-plus, google-api-php-client

我正在尝试通过 API 从 Google plus 获取我所有朋友的列表。我代表其执行此操作的用户先前授权了我的请求，并且我获得了身份验证令牌。我在php中尝试了以下代码：

```
function CallAPI() {
  $opts = array(
    "http" => array(
      "method" => "GET"
    )
  );

  $url = 'https://www.googleapis.com/plus/v1/people/me/people/visible?key=XXXX';    
  $context = stream_context_create($opts);
  $response = file_get_contents($url, false, $context);
  var_dump($response);
} 
```

但我一直收到 HTTP 请求失败！HTTP/1.0 401 未经授权。我如何证明用户授权了我的操作或我做错了什么？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:48:53.560

您需要对用户进行身份验证才能使用特殊关键字“me”，因此使用您的简单 API 密钥将不起作用（假设传递的密钥是您的简单密钥）。相反，您需要获取访问令牌并传递它。

有关如何使用 PHP 客户端库在 PHP 中执行此操作的一个很好的示例，请尝试快速入门：

[https://developers.google.com/+/quickstart/php](https://developers.google.com/+/quickstart/php)

* * *

如果您已经获得访问令牌，则可以调用 tokeninfo 传递访问令牌以获取有关用户与其关联的更多信息：

[https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=ya29.xxxxxxxx](https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=ya29.xxxxxxxx) ...

此时，您可以调用：'https://www.googleapis.com/plus/v1/people/[useridfromaccesstoken]/people/visible?key=XXXX'；

要验证您的 API 密钥是否正确，但我建议使用客户端库，如快速入门示例中所示。

# php - 到达用户名时停止 mysql_fetch_array

> ID：15830282
> 
> 赞同：-2
> 
> 时间：2013-04-05T09:26:09.197
> 
> 标签：php, mysql, sql

我有这段代码可以从数据库中获取用户列表并按分数对它们进行排序。

```
$sql="SELECT * FROM users ORDER BY score DESC";
$result=mysql_query($sql);

while($rows=mysql_fetch_array($result)){ 
```

我想要做的是停止循环过程，当过程达到确定的用户名时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:28:39.750

有条件使用`break`_`if`

```
while($rows=mysql_fetch_array($result)){
    if($rows['name'] == 'yourname') {
        break;
    }else {
        //your code
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:29:13.673

你可以这样做

```
$sql="SELECT * FROM users ORDER BY score DESC";
$result=mysql_query($sql);

while($rows=mysql_fetch_array($result)){
  if($row['username']=='DecidedUser')
   break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:36:56.963

像这样在 mysql 查询中使用 WHERE。

```
$sql="SELECT * FROM users WHERE user_name='targetUserName' ORDER BY score DESC";
$result=mysql_query($sql); 
```

这里 user_name 是用户表中的 mysql 字段名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:28:05.467

使用休息；

```
$sql="SELECT * FROM users ORDER BY score DESC";
$result=mysql_query($sql);

while($rows=mysql_fetch_array($result)){
  if(Reached_at_user_name)
   break;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T09:28:13.190

`break;`是你的朋友

[http://php.net/manual/en/control-structures.break.php](http://php.net/manual/en/control-structures.break.php)

```
while($rows=mysql_fetch_array($result)){
    if (
        $row['username'] == 'username'
    ) {
        break;
    }
} 
```

根据您的意图，另一种方法是仅更改 SQL 查询以执行您想要的操作，即类似于以下内容的内容，它使用 @includeThis 变量来跟踪它是否已命中预期的用户名

```
$sql="
    SELECT 
        u.*, 
        @includeThis AS includeThis,
        @includeThis := IF(u.username = 'TargetUserName',0,@includeThis) AS updateIncludeThis
    FROM users u, (SELECT @includeThis := 1) d 
    ORDER BY u.score DESC
    HAVING includeThis = 1
"; 
```

此外，您不应再使用 mysql_ 函数，而应使用 mysqli_ 或 PDO。 [为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T09:28:44.100

在你想要添加一些东西的时候。

```
if($rows['username'] == "targetUserName"){return;} 
```

您也可以使用`break;`而不是 return，但是`return true;`如果需要，您可以使用 return 让您的脚本知道您的函数找到了用户名:)

# jquery - jQuery DataTables：按列过滤

> ID：15830283
> 
> 赞同：3
> 
> 时间：2013-04-05T09:26:12.667
> 
> 标签：jquery, ajax, datatables

我有一个 DataTables 表，它通过 AJAX 源获取数据。我已经启动并运行了表，甚至搜索工作。

现在我有一个要求为每一列实现搜索字段。似乎有一个用于列过滤的 DataTables 插件，我尝试使用它。

这是我的 HTML：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>testpage</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
    <script type="text/javascript" src="http://www.company.com/content/dam/workflows/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="http://jquery-datatables-column-filter.googlecode.com/svn/trunk/media/js/jquery.dataTables.columnFilter.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $("#overview").dataTable({
            aoColumnDefs:[{
                aTargets: [0]
            }],
            bAutoWidth: false,
            bLengthChange: false,
            iDisplayLength: 10,
            sAjaxSource: "http://server/api.jsp?someparameters"
        }).columnFilter();
    })
    </script>
</head>

<body>

<table id="overview">
<tr>
    <thead>
        <th>#</th>
        <th>Betrieb</th>
        <th>Status</th>
        <th>Anlagenummer</th>
        <th>Bezeichnung</th>
    </thead>
</tr>
</table>

</body>
</html> 
```

如您所见，我刚刚附加了 columnFilter() 方法。它甚至不会在控制台中引发错误，但表格看起来就像以前一样（没有额外的输入框来搜索列）。

难道我做错了什么？是否有可能是由于 AJAX 的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:32:51.687

我认为您需要在 html 表中定义一个页脚部分。看看[这个例子](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/default.html)

表格应该看起来像

```
<table>
    <thead>
        <tr>...</tr>
    </thead>
    <tfoot>
        <tr>...</tr>
    </tfoot>
</table> 
```

# android - 从 GetStringUTFChars JNI 没有得到任何结果

> ID：15830285
> 
> 赞同：1
> 
> 时间：2013-04-05T09:26:18.833
> 
> 标签：android, c, android-ndk, ffmpeg, java-native-interface

用于我的 android 应用程序的 android NDK。我被困在起跑线上，它没有进一步编译。以下是我的代码。**它在“str = (*env)->GetStringUTFChars(env, filename, NULL);”**之后不编译 . 请检查我的 java 和 c 代码

的java代码：

```
public class MyffmpegActivity extends Activity {

private static native int logFileInfo(String filename);

static
{
    Log.i("HEHA", "HOHA");
    System.loadLibrary("mylib");
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_myffmpeg);
    String path=Environment.getExternalStorageDirectory().getPath();
    path=path+"/test.mp4";
    Log.i("Name Returned is ", ":"+path);
int x=logFileInfo(path);

} 
```

C 代码

```
jint Java_com_example_myffmpegtest_MyffmpegActivity_logFileInfo(JNIEnv * env, jobject  this, jstring filename)
{

av_register_all();
   AVFormatContext *pFormatCtx;
   const jbyte *str;

  str = (*env)->GetStringUTFChars(env, filename, NULL);
 if(av_open_input_file(&pFormatCtx, str, NULL, 0, NULL)!=0)
 {
    LOGE("Can't open file '%s'\n", str);
    return 1;
}
else
{

    LOGI("File was opened\n");
    LOGI("File '%s', Codec %s",
        pFormatCtx->filename,
        pFormatCtx->iformat->name
    );
}
return 0;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:00:09.383

这是正确的语法：

```
const char *str;
str = (*env)->GetStringUTFChars(env, filename, NULL); 
```

此外，您似乎正在尝试开发我已经为其创建解决方案的东西。查看[FFmpegMediaMetadataRetriever](https://github.com/wseemann/FFmpegMediaMetadataRetriever)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:27:25.157

为什么要使用jbyte？你试过 `const char * str =(*env)->GetStringUTFChars(env, filename, NULL);` 了吗？

编辑：如果您确定文件名不为空，则问题可能来自它下面的 av_open_input_file 函数调用。FFmpeg 使用文件协议打开输入文件，这意味着你需要使文件名看起来像这样“file:///.../test.mp4”

希望这有帮助。

# python - 从文本文件中删除重复项

> ID：15830290
> 
> 赞同：4
> 
> 时间：2013-04-05T09:26:23.433
> 
> 标签：python, string, duplicates

我想从文本文件中删除重复的单词。

我有一些文本文件，其中包含如下内容：

```
None_None

ConfigHandler_56663624
ConfigHandler_56663624
ConfigHandler_56663624
ConfigHandler_56663624

None_None

ColumnConverter_56963312
ColumnConverter_56963312

PredicatesFactory_56963424
PredicatesFactory_56963424

PredicateConverter_56963648
PredicateConverter_56963648

ConfigHandler_80134888
ConfigHandler_80134888
ConfigHandler_80134888
ConfigHandler_80134888 
```

结果输出需要是：

```
None_None

ConfigHandler_56663624

ColumnConverter_56963312

PredicatesFactory_56963424

PredicateConverter_56963648

ConfigHandler_80134888 
```

我只使用了这个命令： en=set(open('file.txt') 但它不起作用。

谁能帮助我如何从文件中仅提取唯一集

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T09:40:33.633

这是一个使用集合从文本文件中删除重复项的简单解决方案。

```
lines = open('workfile.txt', 'r').readlines()

lines_set = set(lines)

out  = open('workfile.txt', 'w')

for line in lines_set:
    out.write(line) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T09:32:17.237

这是关于保留顺序的选项（与集合不同），但仍然具有相同的行为（请注意，故意删除 EOL 字符并忽略空行）...

```
from collections import OrderedDict

with open('/home/jon/testdata.txt') as fin:
    lines = (line.rstrip() for line in fin)
    unique_lines = OrderedDict.fromkeys( (line for line in lines if line) )

print unique_lines.keys()
# ['None_None', 'ConfigHandler_56663624', 'ColumnConverter_56963312',PredicatesFactory_56963424', 'PredicateConverter_56963648', 'ConfigHandler_80134888'] 
```

然后，您只需要将上述内容写入您的输出文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T09:30:20.750

以下是使用集合（无序结果）执行此操作的方法：

```
from pprint import pprint

with open('input.txt', 'r') as f:
    print pprint(set(f.readlines())) 
```

此外，您可能希望摆脱新行字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-29T12:06:37.997

```
def remove_duplicates(infile):
    storehouse = set()
    with open('outfile.txt', 'w+') as out:
        for line in open(infile):
            if line not in storehouse:
                out.write(line)
                storehouse.add(line)

remove_duplicates('infile.txt') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T09:32:39.403

如果您只想获得不重复的输出，您可以使用`uniq`and`sort`

```
hvn@lappy: /tmp () $ sort -nr dup | uniq
PredicatesFactory_56963424
PredicateConverter_56963648
None_None
ConfigHandler_80134888
ConfigHandler_56663624
ColumnConverter_56963312 
```

对于蟒蛇：

```
In [2]: with open("dup", 'rt') as f:
    lines = f.readlines()
   ...:     

In [3]: lines
Out[3]: 
['None_None\n',
 '\n',
 'ConfigHandler_56663624\n',
 'ConfigHandler_56663624\n',
 'ConfigHandler_56663624\n',
 'ConfigHandler_56663624\n',
 '\n',
 'None_None\n',
 '\n',
 'ColumnConverter_56963312\n',
 'ColumnConverter_56963312\n',
 '\n',
 'PredicatesFactory_56963424\n',
 'PredicatesFactory_56963424\n',
 '\n',
 'PredicateConverter_56963648\n',
 'PredicateConverter_56963648\n',
 '\n',
 'ConfigHandler_80134888\n',
 'ConfigHandler_80134888\n',
 'ConfigHandler_80134888\n',
 'ConfigHandler_80134888\n']

In [4]: set(lines)
Out[4]: 
set(['ColumnConverter_56963312\n',
     '\n',
     'PredicatesFactory_56963424\n',
     'ConfigHandler_56663624\n',
     'PredicateConverter_56963648\n',
     'ConfigHandler_80134888\n',
     'None_None\n']) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T10:38:07.837

```
import json
myfile = json.load(open('yourfile', 'r'))
uniq = set()
for p in myfile:
if p in uniq:
    print "duplicate : " + p
    del p
else:
    uniq.add(p)
print uniq 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-28T14:31:44.247

这样就可以取出放入的相同文件

```
import uuid

def _remove_duplicates(filePath):
  f = open(filePath, 'r')
  lines = f.readlines()
  lines_set = set(lines)
  tmp_file=str(uuid.uuid4())
  out=open(tmp_file, 'w')
  for line in lines_set:
    out.write(line)
  f.close()
  os.rename(tmp_file,filePath) 
```

# javascript - 在工具提示上显示百分比谷歌图表

> ID：15830292
> 
> 赞同：6
> 
> 时间：2013-04-05T09:26:29.297
> 
> 标签：javascript, google-visualization

我想用谷歌图表显示一个比例，使用百分比。我知道如何将 vAxis 更改为百分比：

```
vAxis: {format:'#%'}, 
```

但问题是我的数据在工具提示中未显示为百分比，而是以十进制值显示（0.85 而不是预期的 85%）

![在此处输入图像描述](https://i.stack.imgur.com/8scOC.png)

我的代码如下：

```
 google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(function() {})
        function drawChart(data) {
          var data = google.visualization.arrayToDataTable(data);

          var options = {
            title: "Pourcentage de production et productivité de l'entreprise",
            chartArea: {top:39},
            vAxis: {format:'#%'},
            pointSize:2
          }

          var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
          chart.draw(data, options);
        }

drawChart([['Year', '% de production', 'Productivité'],[ '06/03/2013', 0.85 , 0.58 ],[ '07/03/2013', 0.85 , 0.58 ],[ '23/03/2013', 0.85 , 0.58 ],[ '25/03/2013', 1 , 1.5 ],[ '26/03/2013', 0.72 , 0.63 ],[ '04/04/2013', 1 , 1.57 ]]) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T00:36:47.070

您可以使用[格式化程序](https://developers.google.com/chart/interactive/docs/reference#numberformatter)。

这是一个示例（在绘制图表之前将其粘贴到您的代码中）：

```
 var formatter = new google.visualization.NumberFormat({pattern:'#,###%'});
  formatter.format(data, 1);
  formatter.format(data, 2); 
```

如果你想稍微改变我上面给出的格式，你可以使用的格式是[ICU DecimalFormat的一个子集。](http://icu-project.org/apiref/icu4c/classDecimalFormat.html#_details)

# java - java.lang.Boolean 两个以上的实例

> ID：15830294
> 
> 赞同：0
> 
> 时间：2013-04-05T09:26:32.650
> 
> 标签：java

我注意到[HiberSAP 项目](http://hibersap.sourceforge.net/current/)的代码（[BooleanConverter](http://hibersap.svn.sourceforge.net/viewvc/hibersap/tags/hibersap-1.1.0/hibersap-core/src/main/java/org/hibersap/conversion/BooleanConverter.java?revision=449&view=markup) Linenumber 75）中有一个非常奇怪的行为。

问题是布尔值没有转换为“X”。我已经调试了代码并检查了布尔表达式`javaValue == Boolean.TRUE`。此表达式被解释为 false，因为 javaValue`Boolean.TRUE`的 ID 为 36，而 Boolean.TRUE 的 ID 为 33（该 ID 显示在 Eclipse IDE 的变量视图中）。我还可以检查所有布尔实例，实际上，有四个 java.lang.Boolean 实例！

有人可以解释一下为什么会这样。

* * *

## 编辑：

好的，我认为我的问题不够精确。应该转换的字段是**boolean**而不是**java.lang.Boolean**。这一定是一个类加载器错误。在我的情况下，从布尔值到布尔值的唯一转换是由 JVM 完成的。我知道每个 Object 比较都应该使用 .equals() （并且我填写了一个 Bug），但在这种情况下它应该按原样工作。请参阅以下代码：

```
public static void main(String[] args) {
    for(int i = 0; i < 1000; i++){
        print(true);
    }

}

public static void print(Object value) {
    System.out.println(value);
} 
```

这不应该**创建**1000 个 java.lang.Boolean 实例。这应该**始终**使用 java.lang.Boolean.TRUE！这是我无法理解的代码的奇怪行为。

也许这是 Hibersap 进行的反射的副作用？但我认为这不应该成为这种行为的原因。

拜托，我只是想明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:31:44.353

Each time you're doing `new Boolean(true)` or `new Boolean(false)`, you create a new instance of Boolean, which is, by definition, different from other instances. Objects, except enums, should never be compared with `==`. Use `.equals()` instead. Or, in your case, use `javaValue.booleanValue()`.

# extjs4 - 如何在 extjs 4 网格面板中更改标题模板

> ID：15830295
> 
> 赞同：2
> 
> 时间：2013-04-05T09:26:39.240
> 
> 标签：extjs4, extjs4.1, extjs-mvc

我想更改网格的默认标题模板。我不知道要设置什么配置或属性。我尝试了“renderTpl”、“tpl”、“metaRowTpl”，但这些属性与网格中的行相关，我想在其中更改标题。

![标题视图](https://i.stack.imgur.com/t3E90.png)

任何示例或链接都会很棒。

像上图一样，我希望在文本来自数据库的位置之间有额外的标题/行/列标题（基本上它是过滤器信息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:38:29.797

您可以使用以下命令更改标题文本

```
yourGrid.getView().getHeaderAtIndex(columnIndex).setText('Header Text'); 
```

[http://jsfiddle.net/alexrom7/YNTuN/3/](http://jsfiddle.net/alexrom7/YNTuN/3/)

# python - Python：如何将 .csv 文件中的信息作为包含元组的列表导入 python？

> ID：15830298
> 
> 赞同：2
> 
> 时间：2013-04-05T09:26:42.260
> 
> 标签：python, function, import

我是编程新手，所以请原谅我对编码的浅薄知识。我有一个可以用 excel 打开的 .csv 文件。每行代表一个人的姓名及其详细信息（如地址、电话号码和年龄），每个详细信息位于不同的列中。每当我移动到新行时，它都是另一个人的详细信息。

我想将此信息导入python，以便每一行（即那个人的每个细节）都在1个元组中（每个细节用'，'分隔），我想要一个列表中的所有元组。所以基本上是一个包含元组的列表。

我从打开文件开始编码，但不知道如何在一个元组和一个列表中的所有元组中实现人的每个细节细节。我正在使用 Python 2.7。

```
def load_friends(f):
"""
Takes the name of a file containing friends information as described in the
introduction and returns a list containing information about the friends
in the file.

load_friends(var) -> list

"""

openfile = open('friends.csv', 'Ur')
if f == 'friends.csv':
    openfile = open('friends.csv', 'Ur')
    lines = openfile.readlines()
    print lines
    openfile.close() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T09:29:59.093

使用[`csv`模块](http://docs.python.org/2/library/csv.html)非常简单：

```
import csv

with open('friends.csv', 'Ur') as f:
    data = list(tuple(rec) for rec in csv.reader(f, delimiter=',')) 
```

`data`是一个元组列表。

该`csv`模块正确读取文件：

```
"Smith, John",123 
```

将被读作

```
('Smith, John', '123') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:29:31.643

```
import csv
DIR = 'your dicrectory path'
openfile = csv.DictReader(open(DIR + '/file_name.csv', 'r'))
print .fieldnames
for p in filename:
    try:
        p = dict((k.strip().strip('\\t'), v) for k, v in p.iteritems() if v.lower() != 'null')
except AttributeError, e:
    print e
    print p
    raise Exception()
print p.get('Name'),p.get('Details') 
```

# jquery-ui - 谷歌地图拆分器布局

> ID：15830299
> 
> 赞同：0
> 
> 时间：2013-04-05T09:26:42.757
> 
> 标签：jquery-ui, google-maps, layout

是否有任何类似 [http://layout.jquery-dev.net/samples/gispaho/layoutintab.htm](http://layout.jquery-dev.net/samples/gispaho/layoutintab.htm)的布局，它支持谷歌地图作为我使用上面的一个。我遇到了问题，拆分器拖动在谷歌地图上失败。

参考 [https://stackoverflow.com/questions/15795815/jquery-dragable-fails-over-the-google-map](https://stackoverflow.com/questions/15795815/jquery-dragable-fails-over-the-google-map)

我尝试的是

```
<div id="layout" class="sun-layout" style="height: 600px;">
        <div class="ui-layout-west sun-layout">

            <div class="map1">
            </div>

        </div>
        <div class="ui-layout-center sun-layout">

            <div class="map2">
            </div>

        </div> 
```

在 Dom 准备好了

> var $layout = $("#layout"); $layout.layout({ west__size: 400 });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T20:02:18.377

我们在应用程序中遇到了同样的问题。我们只是在调整大小开始时在地图上显示一个不可见的 div，并在最后隐藏它。该 div 将暂时阻止所有鼠标事件到达地图。我想同样的技术也适用于你的另一个问题。只要有某种方法可以挂钩调整大小开始和调整大小结束事件，这应该是有效的。

因此，要将其应用于您的情况，我会这样更改 html：

```
<div id="layout" class="sun-layout" style="height: 600px;">
   <div class="ui-layout-west sun-layout">  
       <div class="map-mask"></div> <!-- Your map mask -->
       <div class="map1">
       </div>    
   </div>
   <div class="ui-layout-center sun-layout">   
       <div class="map-mask"></div> <!-- Your map mask -->
       <div class="map2">
       </div>   
</div> 
```

然后我会将以下事件添加到 jquery UI 布局中：

```
.layout({
    ...
    onresize_start: function(){
         $(".map-mask").show();
    },
    onresize_end: function(){
         $(".map-mask").hide();
    },
    ...
 }) 
```

还有一些 CSS。我不知道地图大小的上下文是什么，所以你需要调整它。这个想法是让 div 的 z-index 高于地图并完全覆盖它。

```
.map-mask{
     height:100%;
     width:100%;
     position: absolute;
     z-index: 1000;
} 
```

# asp.net - 将 Kendo UI 树视图绑定到 ASP.Net .ashx 处理程序返回的 Json 数据

> ID：15830301
> 
> 赞同：0
> 
> 时间：2013-04-05T09:26:44.790
> 
> 标签：asp.net, json, kendo-ui

我想用 Kendo UI treeview widjet 创建一个简单的 treeview。

我阅读了文档，但第一步我无法更进一步：绑定一个简单、简单的非嵌套 json 值：

在我的头部，我放了：

```
 <script>

       $(document).ready(function () {

         var homogeneous = new kendo.data.HierarchicalDataSource({

               transport: {
                   read: {
                       url: "kendoTWData.ashx",   
                       dataType: "json" 

                   }
               },
               schema: {
                   model: {
                       id: "EmployeeId",
                       FullName: "FullName"
                   }
               }

           });

           $("#treeview").kendoTreeView({
               dataSource: homogeneous,
               dataTextField: "FullName",
               dataValueField: "id"
           });
           });

        </script> 
```

处理程序“kendoTWData.ashx”正确返回： {"EmployeeId":1,"FullName":"AName"} 但什么也没有出现。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:18:30.337

它应该返回一个`array`而不是一个`object`。它应该是：

```
[{"EmployeeId":1,"FullName":"AName"}] 
```

这是因为`tree`可能有多个`nodes`级别`root`。

# python - Ajax 是返回所有的 html 而不是 Django 中的变量？

> ID：15830302
> 
> 赞同：0
> 
> 时间：2013-04-05T09:26:45.813
> 
> 标签：python, ajax, django

我有一个像这样的 Ajax 和模板：

```
<html>
<body>

<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function ajaxFunction(){
    var ajaxRequest;  // The variable that makes Ajax possible!

    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            document.myForm.time.value = ajaxRequest.responseText;
        }
    }
    url = '/home'
    ajaxRequest.open("GET", url, false);
    ajaxRequest.send(null); 
}

//-->
</script>

<form name='myForm'>
{% csrf_token %}
Name: <input type='text' onChange="ajaxFunction();" name='username' /> <br />
Time: <input type='text' name='time' id='time' value="" />
</form>
</body>
</html> 
```

我有这样的简单观点：

```
from django.shortcuts import render_to_response, HttpResponse
import simplejson
from django.template.context import RequestContext
import datetime

def home(request):
    if request.GET:
        a = datetime
        return HttpResponse(simplejson.dumps(a), mimetype='application/json')
        #return render_to_response('home.html', {'a':a}, context_instance=RequestContext(request))

    else:
        return render_to_response('home.html', context_instance=RequestContext(request)) 
```

当我按下回车键时，Ajax 正在加载，但不是特定变量，而是所有模板都加载到输入框中。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:34:17.110

这一行：

```
if request.GET: 
```

检查是否有任何 GET 参数。没有，因为你没有发送任何东西。URL 只是`/home`. 您可以使用`if request.method == 'GET'`，但我认为您在这里检查错误：正常请求（不是 Ajax）*也*将是 GET。

您应该做的是将`HTTP_X_REQUESTED_WITH`标头作为“XmlHttpRequest”发送，然后签[`request.is_ajax()`](https://docs.djangoproject.com/en/1.5/ref/request-response/#django.http.HttpRequest.is_ajax)入视图。或者，按照建议，使用像 jQuery 这样的库——它会自动为您设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:32:26.587

检测请求类型的正确方法是`if request.method == 'GET'`，而不是`if request.GET`.

# c++ - 来自 C++/CX 的设备唯一 ID

> ID：15830309
> 
> 赞同：2
> 
> 时间：2013-04-05T09:26:57.263
> 
> 标签：c++, .net, windows-phone-8, c++-cx

我可以`device unique id(UDID)`从 WP8 上的 C++/CX 代码获取吗？或者如果我不这样做，我该怎么办？我已经尝试过使用`DeviceExtendedProperties`（它不起作用，可能它只是.net 类）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T21:56:57.050

您可以使用[HardwareIdentification.GetPackageSpecificToken](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.profile.hardwareidentification.getpackagespecifictoken)方法来获取特定于您的应用的设备唯一 ID。它有一些复杂性，因为 ID 的值取决于许多系统因素，例如可用内存、连接的外围设备（想想蓝牙耳机）、网络连接等 - 请务必阅读链接的文档！[可以在此处找到](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431)有关硬件 ID 组件的更深入讨论。

该值对于您的应用程序和特定设备的组合是唯一的，这很可能足以满足应用程序开发的目的。

请注意，此 API 需要 WP 8.1“Windows 运行时”应用程序，并且不适用于 WP8 Silverlight 应用程序。

```
using namespace Windows::System::Profile;

...

IBuffer^ nonce = ...; // optional, see documentation
HardwareToken^ hwid = HardwareIdentification::GetPackageSpecificToken(nonce);

// HardwareToken has a few properties, but the one you're likely interested
// in is HardwareToken.
IBuffer^ id = hwid->Id; 
```

# directoryservices - edirectory 读取自定义属性值未知错误 (0x8000500c)

> ID：15830310
> 
> 赞同：1
> 
> 时间：2013-04-05T09:26:58.530
> 
> 标签：directoryservices, edirectory

奇怪的事情发生了……

我被迫转移到一台新的开发机器（Windows Server 2008 R2 到 2012）。完全相同的代码在新机器上不起作用。

```
public override MembershipUserCollection FindUsersByEmail(string emailToMatch, int pageIndex, int pageSize, out int totalRecords)
{
    MembershipUserCollection retvalue = new MembershipUserCollection();

    string ldapConnectionString = _configuration.GetConnectionString();

    using (DirectoryEntry de
        = new DirectoryEntry(ldapConnectionString, _configuration.SearchAccount, _configuration.SearchAccountPassword, AuthenticationTypes.ServerBind))
    {
        string filter = string.Format("(&(objectClass=Person)(CUSTOMemail={0}))", emailToMatch);

        DirectorySearcher ds = new DirectorySearcher(de, filter, new[] { "cn", "CUSTOMemail" }, SearchScope.Subtree);
        SearchResultCollection collection = ds.FindAll();

        totalRecords = collection.Count;

        int pagesCount = (totalRecords > pageSize) ? (int)Math.Ceiling((double)(totalRecords / pageSize)) : 1;

        if (pageIndex > pagesCount - 1)
            throw new IndexOutOfRangeException("PageIndex exceeds max PageIndex");

        for (int i = pageIndex * pageSize; i < totalRecords; i++)
        {
            DirectoryEntry userDirectoryEntry = collection[i].GetDirectoryEntry();

            string userName = userDirectoryEntry.Properties["cn"].Value as string;
            string providerUserKey = userDirectoryEntry.Path;
            string email = userDirectoryEntry.Properties["CUSTOMemail"].Value as string;

            MembershipUser mu = new MembershipUser(
                providerName: Name,
                name: userName,
                providerUserKey: providerUserKey,
                email: email,
                passwordQuestion: null,
                comment: null,
                isApproved: true,
                isLockedOut: false,
                creationDate: DateTime.MinValue,
                lastLoginDate: DateTime.MinValue,
                lastActivityDate: DateTime.MinValue,
                lastPasswordChangedDate: DateTime.MinValue,
                lastLockoutDate: DateTime.MinValue);

            retvalue.Add(mu);
        }
    }

    return retvalue;
} 
```

***代码在尝试读取 CUSTOMemail 属性时失败。系统属性（例如“cn”）起作用。***

IIS 设置完全相同，尽管这无关紧要，因为绑定过程有效。域成员身份（我阅读了有关此的各种线程）没有改变，也没有关系，因为它是一个电子目录，而且我正在使用专用用户进行绑定。

我***可以过滤属性（见上文）并查看***所有属性的***名称***。网络跟踪显示属性*及其*值是通过网络传输的，所以我需要的一切都在那里。并且使用 JXplorer 之类的 LDAP 资源管理器向我展示了完整的 DirectoryEntry（包括值）。但是我的 C# 代码与它不兼容。我对为什么它在一台虚拟机上运行而不在另一台上运行感到非常困惑。

我对所有数据都通过网络传输的事实很感兴趣（因此该目录绝对没有权限问题），但我的 C# 代码无法从中提取值:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-03T21:33:40.657

我知道这是一个老问题，但是由于我对同一件事绞尽脑汁，所以我认为对于已经走到这一步的任何人来说，这都是值得的……

问题在于 DirectoryServices 缓存架构的方式，如果它尝试加载自定义属性（DirectoryServices 通过其连接的域不熟悉的任何属性）（专门针对 Windows 8/2012 的修补程序）

它实际上记录在知识库文章 [http://support.microsoft.com/kb/2802148](http://support.microsoft.com/kb/2802148)中，其中还包括应该解决您的问题的修补程序（如果您还没有解决它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:29:06.350

这有可能在两个不同的虚拟机上以不同的用户身份运行吗？在哪种情况下可能存在权限问题？您在第二个 VM 上的用户是否具有足够的权限？

# actionscript-3 - 如何在 Action script 3 中使舞台透明（Adobe flash 专业版）

> ID：15830314
> 
> 赞同：2
> 
> 时间：2013-04-05T09:27:10.160
> 
> 标签：actionscript-3, flash, adobe, movieclip

我在 AS3 中制作文本动画，然后将其添加到影片剪辑中。所以我想要一个透明的舞台。有什么办法可以让**舞台透明**。如果可能，请详细描述。提前致谢>>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:21:30.763

将`wmode`参数设置为`transparent`。检查您的 Flash 对象的 html 代码。

```
<object classid="00" width="600" height="450">
    <param name="quality" value="high">
    <param name="wmode" value="direct" > // change this ... 
```

对此：

```
 <param name="wmode" value="transparent" > 
```

如果将 wmode 设置为透明，则将忽略设置 flash 文件的 bg 颜色。如果您在播放器外部运行*.swf*，则将显示背景颜色。

# asp.net-mvc - MVC ERP 解决方案

> ID：15830317
> 
> 赞同：3
> 
> 时间：2013-04-05T09:27:16.760
> 
> 标签：asp.net-mvc, architecture, webforms, erp

我正在研究设计一个完整的 ASP.NET MVC 应用程序的可行性。我想知道以下几点：

=>**有可能**吗？MVC 的架构是为处理大量数据处理的大型高流量 Web 应用程序而设计的吗？（担心将大量数据带到客户端？它会减慢速度吗？）有哪些功能使它变得容易用于或难以用于设计繁重的应用程序。

在这方面，我想更多地了解负责所有数据事务的实体框架。

=>在 MVC 中设计的 Web 应用程序**示例**，它们处理大量流量。

=>资源**链接**，包括示例项目、教程、讲座、示例代码等。

=>可能对这项技术有很大经验的**专家帮助，以供参考。**

=> 它**比**Web 表单好吗？MVC 应用程序是否完全为传统的 Web 表单提供了替代解决方案。

请分享您对此事的看法。

谢谢，

曼格什

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T10:33:52.367

是的，Mvc 应用程序完全有能力处理大数据，并且应用程序的架构为提高应用程序的性能提供了很多支持。但这仍然取决于您的编码方法和代码清洁度。如何将项目划分为层或模块。当您的任何模块准备好时，您可以并排使用 MVC 单元测试功能，这最终在您集成所有模块时变得舒适。

> > => 在 MVC 中设计的 Web 应用程序示例，处理大量流量 [http://www.nopcommerce.com/default.aspx](http://www.nopcommerce.com/default.aspx)
> > [http://www.sitefinity.com](http://www.sitefinity.com)
> > 
> > => 资源链接，包括示例项目、教程、讲座、示例代码等。
> > **音乐商店是 Asp.net Mvc 中最好的应用程序： [http](http://www.asp.net/mvc/tutorials/mvc-music-store)**
> > 
> > ://www.asp.net/mvc/tutorials/mvc-music-store => 专家帮助，可能对这项技术有很大的经验，以供参考。
> > **对不起，我无法理解这个问题。但我认为你的问题是关于在 MVC 中工作的先决条件。如果您曾经在 Asp.net Web Forms 中工作过，然后切换到 MVC，那么您就会了解 MVC 技术的强大功能。**
> > 
> > => 它比 Web 表单好吗？MVC 应用程序是否完全为传统的 Web 表单提供了替代解决方案。
> > **从我的角度来看，MVC 是比 Web 表单更好的选择。因为 MVC 在 RAD 术语中提供了很多支持，并且还有许多 Jquery 库可用，您可以在其中轻松地将丰富的控件集成到您的 Web 应用程序中，例如 Knockout.js： http: [//knockoutjs.com/](http://knockoutjs.com/)
> > Angular.js：[http：/ /angularjs.org/](http://angularjs.org/)
> > KendoUI.js: [http](http://www.kendoui.com)** 
> > ://www.kendoui.c​​om 你也可以看到很多 MVC vs WebForms 的争论:
> > [http://www.codeproject.com/Articles/528117/WebForms-vs-MVC](http://www.codeproject.com/Articles/528117/WebForms-vs-MVC)

# c# - 获取基于应该不同的一个字段的记录

> ID：15830323
> 
> 赞同：0
> 
> 时间：2013-04-05T09:27:24.567
> 
> 标签：c#, asp.net, sql, sql-server, database

我有类似的查询

```
 SELECT distinct(a.CreatedOn),
       a.id AS ID ,
       u1.FirstName CreatedByFirstName,
       u1.LastName
FROM AuditDetail a
LEFT JOIN UserProfile u1 ON a.CreatedBy = u1.UserProfileID
LEFT JOIN UserProfile u2 ON a.UpdatedBy = u2.UserProfileID 
```

这向我展示了所有的记录。并且 distinct createdon 也在每条记录中重复，因为所有记录都来了。我希望如果所有记录中的 createdon 都相同，那么它的第一条记录或单个记录不应该全部出现。我哪里错了？

![在此处输入图像描述](https://i.stack.imgur.com/E2kFV.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:41:49.237

试试这个，

可能会帮助你，使用子查询

```
SELECT a.CreatedOn,
       a.id AS ID ,
       u1.FirstName CreatedByFirstName,
       u1.LastName
FROM AuditDetail a
LEFT JOIN UserProfile u1 ON a.CreatedBy = u1.UserProfileID LEFT joinUserProfileu2 ON a.UpdatedBy = u2.UserProfileID
WHERE a.CreatedOn IN
    (SELECT DISTINCT CreatedOn
     FROM AuditDetail) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:29:55.767

您可以使用`Ranking Function`诸如`ROW_NUMBER()`which 为每个组的每条记录提供排名。

```
WITH recordList
AS
(
    SELECT  a.CreatedOn,
            a.id as ID ,
            u1.FirstName CreatedByFirstName, 
            u1.LastName,
            ROW_NUMBER() OVER(PARTITION BY a.CreatedOn ORDER BY a.CreatedOn) rn
    FROM    AuditDetail a 
            left join UserProfile u1 
                on a.CreatedBy = u1.UserProfileID 
            left join UserProfile u2 
                on a.UpdatedBy = u2.UserProfileID
)
SELECT  CreatedOn,
        ID,
        CreatedByFirstName,
        LastName
FROM    recordList
WHERE   rn = 1 
```

# java - 是否有模拟 Office Ribbon Customizer 的预制 Java 库？

> ID：15830324
> 
> 赞同：1
> 
> 时间：2013-04-05T09:27:27.983
> 
> 标签：java, swing, user-interface, packages

我正在尝试将 Microsoft Office 套件中的“功能区定制器”实现为摇摆产品。为了刷新您的记忆，或者第一次向您展示，我所指的定制器看起来像这样（带有强制性的手绘圆圈）：

![来自 Office 的功能区定制器](https://i.stack.imgur.com/tucYc.png)

我可能会花几个星期的时间尝试创建一个健壮的类来绘制它，因为它只有两个滚动窗格和几个按钮。但是我不想重新发明轮子，因为我的轮子最终可能会至少有点不稳定。

对于某些背景，它将来允许用户选择将哪些工作表添加到输出 Excel 工作簿中。

这种组件是否存在于我可以包含在我的项目中的某个包中？这种元素有标准名称吗？我试过用谷歌搜索图像和 java 包，但无济于事，我发现最接近的是这个[SWT 'Widget'](http://hexapixel.com/projects/ribbon)，但它只模拟功能区，而不是定制器。

# git - 在分支之间切换给了我错误

> ID：15830325
> 
> 赞同：0
> 
> 时间：2013-04-05T09:27:32.277
> 
> 标签：git, github

每次我在分支之间切换时都会出错。

我已经这样做了几次：

[https://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

```
 git rm --cached -r .
# Remove everything from the index.

git reset --hard
# Write both the index and working directory from git's database.

git add .
# Prepare to make a commit by staging all the files that will get normalized.

# This is your chance to inspect which files were never normalized. You should 
# get lots of messages like: "warning: CRLF will be replaced by LF in file."

git commit -m "Normalize line endings"
# Commit 
```

并且问题仍然存在。

我的 .gitattribute 文件如下所示：

```
# Set default behaviour, in case users don't have core.autocrlf set.
* text=auto

# Explicitly declare text files we want to always be normalized and converted 
# to native line endings on checkout.
*.c text
*.h text

# Declare files that will always have CRLF line endings on checkout.
*.sln text eol=crlf

# Denote all files that are truly binary and should not be modified.
*.png binary
*.jpg binary 
```

我得到错误：

“错误：您对以下文件的本地更改将被结帐覆盖：”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:27:27.977

> 错误：您对以下文件的本地更改将被结帐覆盖：

发生这种情况是因为某些文件尚未提交到存储库。`git add .`仅在当前目录中添加跟踪文件。要解决此问题，您可以：

*   手动添加每个文件 ( `git add <file>`)，给出文件的完整路径，
*   使用`git add -A`.

这是[`git-add`](http://linux.die.net/man/1/git-add).

# php - php 检查包含日期字段的文本框

> ID：15830330
> 
> 赞同：0
> 
> 时间：2013-04-05T09:27:52.510
> 
> 标签：php

我正在使用 php 并检查文本框是否为空（此文本框包含日期字段）

我有这样的东西

```
 $startPeriod = date("Y-m-d",strtotime($startPeriod));

  if(empty($startPeriod){
   // do something 
   } 
```

此 if 语句不起作用，因为当日期字段为空时，它默认为“1969-12-31”

我该如何解决这个问题，以便我可以实际检查日期字段文本框是否为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:34:21.123

```
if($startPeriod != "")
{
    $startPeriod = date("Y-m-d",strtotime($startPeriod));

    if(empty($startPeriod)
    {
         // your code 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:29:27.667

用 If 条件包装它

```
if($startPeriod != "") {
 $startPeriod = date("Y-m-d",strtotime($startPeriod));

  if(empty($startPeriod){
   // do something 
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:29:42.533

你应该像这样先检查它。

```
if($startPeriod != ""){
   $startPeriod = date("Y-m-d",strtotime($startPeriod));

   // do something 
} 
```

# apache-flex - 大纲 flex 4 fxg 图形

> ID：15830331
> 
> 赞同：0
> 
> 时间：2013-04-05T09:28:00.580
> 
> 标签：apache-flex, flex4, flex4.5

我正在尝试在 flex 4 中为我的 fxg 形状 (shapes:munch2 id="paper") 的边缘添加一个粗边框来表示出血区域。

请任何人都可以提出一种方法来做到这一点，我需要用可变宽度来做，而不是在我绘制 fxg 时设置它

谢谢大卫

```
<?xml version="1.0" encoding="utf-8"?>
<s:Module xmlns:fx="http://ns.adobe.com/mxml/2009" 
          xmlns:s="library://ns.adobe.com/flex/spark" 
          xmlns:mx="library://ns.adobe.com/flex/mx"
          xmlns:shapes="fxgGraphics.shapes.*"
          width="100%" height="100%">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";
        @namespace shapes "fxgGraphics.shapes.*";

        #paper {
            border: 3px solid #ff6600;
        }
    </fx:Style>
    <shapes:munch2 id="paper" width="100%" height="100%" horizontalCenter="0" verticalCenter="0" />
</s:Module> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:42:53.550

FXG 资源针对显示图形进行了优化，不支持 CSS 样式或 Flex 组件所做的许多其他事情。

此外，Flex 不支持您用来设置边框的速记语法。与 HTML 中的 CSS 相比，Flex 中的 CSS 相当有限。

一个简单的解决方案是将您的 FXG 资产包装在另一个 Flex 组件中，例如`BorderContainer`. 然后您可以将边框应用于容器对象：

```
<s:BorderContainer borderColor="#ff0000" borderWeight="2" cornerRadius="6">
    <local:MyFxgAsset />
</s:BorderContainer> 
```

样式属性`borderColor`,`borderWeight`等也可以通过 CSS 应用（但不使用速记/组合语法）。

# c - Arduino 由于 HTTPS 支持

> ID：15830333
> 
> 赞同：33
> 
> 时间：2013-04-05T09:28:06.063
> 
> 标签：c, https, arduino

在以前版本的 Arduino 中，8 位微控制器板的限制，似乎实现 HTTPS（不仅仅是 HTTP）几乎是不可能的。但较新版本的 Arduino Due 提供 32 位 ARM 内核 - 请参阅[此处](http://arduino.cc/en/Main/ArduinoBoardDue)的规范。

我试图检查几个网络库（libcurl、openssl、yaSSL），但我没有找到任何已经移植到与 Arduino Due 一起工作的人。

OpenSSL 可能太重而无法在此处理器上运行，但我相信[yaSSL](http://www.yassl.com/yaSSL/Home.html)作为嵌入式库应该是可以做到的。

你有我可以用来触发 Arduino Due 上的 HTTPS 请求的库的任何信息吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-13T06:27:51.130

不幸的是，这对于评论来说太长了。

►**没有开箱即用的解决方案**

从我收集到的信息来看，对于在*Atmel SAM3X8E ARM Cortex-M3 CPU*上运行的网络服务器，*没有直接的解决方案*，可以开箱即用地输出 HTTPS。Texas Instruments目前使用配备*Stellaris 微控制器 ARM Cortex-M3 CPU的主板*[提供了更好的选择](http://www.element14.com/community/solutions/5883/l/texas-instruments-evaluating-peersec-networks-matrix-ssl-on-a-stellaris-microcontroller)。

 ****► 替代品**

有几种可用的选项可以呈现加密功能，基于这些选项可以布置和实现与中间设备通信的[简单安全通信协议，这反过来又促进了快速应用程序开发和 SSL。](http://dimacs.rutgers.edu/Workshops/Security/program2/gl97-2/node23.html)

这个中间设备，例如一个现成的 70 美元的 Android 智能手机，可以让您的项目保持移动和连接，在指定的端口上运行一项服务，该端口又与*Amazon SQS*通信。已经[可用](http://aws.amazon.com/sdkforandroid/)。这听起来可能很难看或很难，但比在 Arduino 上为具有完整 TLS 3 支持的网络服务器做编程基础要容易得多。考虑到适当的动机，后者可能很容易，但如果一个人只是想为自己的项目找到一个快速务实的解决方案，那就不行了。

►**密码库**

*   [crypto-arduino-library](http://code.google.com/p/crypto-arduino-library/) [http://code.google.com/p/crypto-arduino-library/](http://code.google.com/p/crypto-arduino-library/)（自 2010 年以来未维护）
*   [矩阵ssl](http://www.matrixssl.org/)
*   [mbed TLS](https://tls.mbed.org/)（以前称为 PolarSSL）
*   [wolfSSL](https://www.wolfssl.com/)（以前的 CyaSSL）

►**讨论**

以下是帮助您入门的讨论列表：

*   [Arduino 上的 HTTPS 替代方案](https://stackoverflow.com/questions/11138017/https-alternative-on-arduino)
*   [来自微控制器的 SSL](https://electronics.stackexchange.com/questions/10405/ssl-from-a-microcontroller)
*   [轻量级数据包加密](http://forums.whirlpool.net.au/archive/1738978)

其中许多库仍需要进行调整，但[社区](http://arduino.cc/forum/index.php?board=3.0)专家可以很快为您提供帮助。

祝你好运！如果您可以随意将您的最终项目上传到 github，那么您将获得感谢和关注。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-13T08:25:15.747

恕我直言 Arduino（包括 DUE）是基于 Web 的繁重和/或加密通信的错误工具。我强烈建议在相同尺寸和价格范围内寻找更合适的硬件。一旦您进入 https，您就足够接近，并且还想要真正操作系统提供的许多其他东西。换句话说，我建议选择 Raspi 之类的东西。类似的大小和价格，但功能更强大，尤其是它可以运行 Linux。--> HTTPS 变得简单。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-14T11:28:40.233

arduino 上 https 支持的一个大问题是处理器过载的危险，这可能会使项目不可行。

即使是像[PolarSSL](https://polarssl.org/)这样的嵌入式平台目标解决方案也会消耗过多的内存并使用过多的处理能力。请记住，即使在最简化的实现中，SSL 支持也必须得到推广才能被广泛采用，并且将包括您认为不必要的组件。还有一个问题是您将信任哪些证书颁发机构，以及您将如何与他们就证书撤销等事情进行通信。

相反，我会寻找一种表面上不会满足您需求的解决方案。类似[CurveProtect](http://mojzis.com/software/curveprotect/)的东西，它是[CurveCP](http://curvecp.org/)的一个实现。

当然，你的决定很大程度上取决于你想做什么以及你想花多少时间来解决问题。PolarSSL 的占用空间可以小至 30K（通常接近 100K）。**

# java - Selenium 需要大量时间来获取给定 URL 的动态页面

> ID：15830334
> 
> 赞同：0
> 
> 时间：2013-04-05T09:28:06.980
> 
> 标签：java, dom, selenium, selenium-webdriver, jsoup

我正在用*Java*做一个项目。在这个项目中，我必须使用 DOM。为此，我首先使用 Selenium 加载任何给定 URL 的动态页面。然后我使用 Jsoup 解析它们。

**我想获取给定 URL 的动态页面源代码**

**代码快照：**

```
public static void main(String[] args) throws IOException {

     // Selenium
     WebDriver driver = new FirefoxDriver();
     driver.get("ANY URL HERE");  
     String html_content = driver.getPageSource();
     driver.close();

     // Jsoup makes DOM here by parsing HTML content
     Document doc = Jsoup.parse(html_content);

     // OPERATIONS USING DOM TREE
} 
```

但问题是，Selenium 占用了整个处理时间的 95% 左右，这是不可取的。

Selenium 首先打开 Firefox，然后加载给定页面，然后获取动态页面源代码。

你能告诉我如何通过用另一个有效的工具替换这个工具来减少 Selenium 所花费的时间。任何其他建议也将受到欢迎。

**编辑编号。1**

[此链接](https://code.google.com/p/selenium/wiki/TipsAndTricks)上有一些代码。

```
FirefoxProfile profile = new FirefoxProfile();
profile.setPreference("general.useragent.override", "some UA string");
WebDriver driver = new FirefoxDriver(profile); 
```

但是这里的第二行是什么，我不明白。由于文档中的硒也很差。

**编辑第 2 号**

System.out.println("正在获取 %s..." + url1); System.out.println("正在获取 %s..." + url2);

```
 WebDriver driver = new FirefoxDriver(createFirefoxProfile());

    driver.get("url1");  
    String hml1 = driver.getPageSource();

    driver.get("url2");
    String hml2 = driver.getPageSource();
    driver.close();

    Document doc1 = Jsoup.parse(hml1);
    Document doc2 = Jsoup.parse(hml2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:13:07.227

试试这个：

```
public static void main(String[] args) throws IOException {

    // Selenium
    WebDriver driver = new FirefoxDriver(createFirefoxProfile());
    driver.get("ANY URL HERE");
    String html_content = driver.getPageSource();
    driver.close();

    // Jsoup makes DOM here by parsing HTML content
    // OPERATIONS USING DOM TREE
}

private static FirefoxProfile createFirefoxProfile() {
    File profileDir = new File("/tmp/firefox-profile-dir");
    if (profileDir.exists())
        return new FirefoxProfile(profileDir);
    FirefoxProfile firefoxProfile = new FirefoxProfile();
    File dir = firefoxProfile.layoutOnDisk();
    try {
        profileDir.mkdirs();
        FileUtils.copyDirectory(dir, profileDir);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return firefoxProfile;
} 
```

如果配置文件不存在，createFireFoxProfile() 方法会创建配置文件。如果配置文件已存在，则使用它。所以 selenium 不需要每次都创建 profile-dir 结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T14:15:11.957

如果您确定，对您的代码有信心，您可以使用 phantomjs。它是一个无头浏览器，可以通过快速点击获得您的结果。FF 将需要时间来执行。

# r - data.table 中 POSIXct 的高效比较

> ID：15830341
> 
> 赞同：16
> 
> 时间：2013-04-05T09:28:26.107
> 
> 标签：r, time-series, data.table, posixct, subset

您好，我正在寻找一种有效的方法来`POSIXct`从 a 中选择行，`data.table`使得一天中的时间少于说`12:00:00`（注意不需要毫秒，因此我们可以使用`ITime`例如）

```
set.seed(1); N = 1e7;
DT = data.table(dts = .POSIXct(1e5*rnorm(N), tz="GMT"))
DT
                               dts
#       1: 1969-12-31 06:35:54.618925
#       2: 1970-01-01 05:06:04.332422
#     ---                           
# 9999999: 1970-01-03 00:37:00.035565
#10000000: 1969-12-30 08:30:23.624506 
```

一种解决方案（这里的问题是，如果 N 很大，演员表可能会很昂贵）

```
f <- function(t, st, et) {time <- as.ITime(t); return(time>=as.ITime(st) & time<=as.ITime(et))}
P <- function(t, s) { #geekTrader solution
    ep <- .parseISO8601(s) 
    if(grepl('T[0-9]{2}:[0-9]{2}:[0-9]{2}/T[0-9]{2}:[0-9]{2}:[0-9]{2}', s)){
        first.time <- as.double(ep$first.time)
        last.time <- as.double(ep$last.time)-31449600
        SecOfDay <- as.double(t) %% 86400
        return(SecOfDay >= first.time & SecOfDay <= last.time )
    } else {
        return(t >= ep$first.time & t <= ep$last.time)    
    }
} 
```

快速了解性能

```
system.time(resf <- DT[f(dts,'00:00:00','11:59:59')])
   user  system elapsed 
   1.01    0.28    1.29
system.time(resP <- DT[P(dts,'T00:00:00/T11:59:59')])
   user  system elapsed 
   0.64    0.13    0.76 

identical(resf,resP)
[1] TRUE 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T12:07:29.010

```
 P <- function(t, s) {
  ep <- .parseISO8601(s)

  if(grepl('T[0-9]{2}:[0-9]{2}:[0-9]{2}/T[0-9]{2}:[0-9]{2}:[0-9]{2}', s)){
    first.time <- as.double(ep$first.time)
    last.time <- as.double(ep$last.time)-31449600
    SecOfDay <- as.double(t) %% 86400
    return(SecOfDay >= first.time & SecOfDay <= last.time )

  } else {
    return(t >= ep$first.time & t <= ep$last.time)    
  }

}

F <- function(t, st, et) {
  time <- as.ITime(t) 
  return(time>=as.ITime(st) & time<=as.ITime(et))
}

 Sys.setenv(TZ='GMT')
 N = 1e7;
 set.seed(1);

 DT <- data.table(dts = .POSIXct(1e5*rnorm(N), tz="GMT"))

 system.time(resP <- DT[P(dts, 'T00:00:00/T12:00:00'), ])
##   user  system elapsed 
##   1.11    0.11    1.22 
 system.time(resF <- DT[F(dts,'00:00:00','12:00:00')])
##   user  system elapsed 
##   2.22    0.29    2.51 

 resP
##                         dts
##      1: 1969-12-31 06:35:54
##      2: 1970-01-01 05:06:04
##      3: 1969-12-31 00:47:17
##      4: 1970-01-01 09:09:10
##      5: 1969-12-31 01:12:33
##     ---                    
##5000672: 1970-01-01 06:08:15
##5000673: 1970-01-01 05:02:27
##5000674: 1969-12-31 02:25:24
##5000675: 1970-01-03 00:37:00
##5000676: 1969-12-30 08:30:23
 resF
##                         dts
##      1: 1969-12-31 06:35:54
##      2: 1970-01-01 05:06:04
##      3: 1969-12-31 00:47:17
##      4: 1970-01-01 09:09:10
##      5: 1969-12-31 01:12:33
##     ---                    
##5000672: 1970-01-01 06:08:15
##5000673: 1970-01-01 05:02:27
##5000674: 1969-12-31 02:25:24
##5000675: 1970-01-03 00:37:00
##5000676: 1969-12-30 08:30:23

 #Check the correctness
 resP[,list(mindts=max(dts)),by=list(as.Date(dts))]
##       as.Date              mindts
## 1: 1969-12-31 1969-12-31 12:00:00
## 2: 1970-01-01 1970-01-01 12:00:00
## 3: 1969-12-29 1969-12-29 12:00:00
## 4: 1970-01-02 1970-01-02 12:00:00
## 5: 1969-12-30 1969-12-30 12:00:00
## 6: 1970-01-03 1970-01-03 12:00:00
## 7: 1970-01-04 1970-01-04 11:59:59
## 8: 1970-01-05 1970-01-05 11:59:45
## 9: 1969-12-28 1969-12-28 12:00:00
##10: 1969-12-27 1969-12-27 11:59:21
##11: 1970-01-06 1970-01-06 10:53:21
##12: 1969-12-26 1969-12-26 10:15:03
##13: 1970-01-07 1970-01-07 08:21:55
 resF[,list(mindts=max(dts)),by=list(as.Date(dts))]
##       as.Date              mindts
## 1: 1969-12-31 1969-12-31 12:00:00
## 2: 1970-01-01 1970-01-01 12:00:00
## 3: 1969-12-29 1969-12-29 12:00:00
## 4: 1970-01-02 1970-01-02 12:00:00
## 5: 1969-12-30 1969-12-30 12:00:00
## 6: 1970-01-03 1970-01-03 12:00:00
## 7: 1970-01-04 1970-01-04 11:59:59
## 8: 1970-01-05 1970-01-05 11:59:45
## 9: 1969-12-28 1969-12-28 12:00:00
##10: 1969-12-27 1969-12-27 11:59:21
##11: 1970-01-06 1970-01-06 10:53:21
##12: 1969-12-26 1969-12-26 10:15:03
##13: 1970-01-07 1970-01-07 08:21:55 
```

现在一些漂亮的`xts`样式子集的演示

```
 DT[P(dts, '1970')]
##                         dts
##      1: 1970-01-01 05:06:04
##      2: 1970-01-02 20:18:48
##      3: 1970-01-01 09:09:10
##      4: 1970-01-01 13:32:22
##      5: 1970-01-01 20:30:32
##     ---                    
##5001741: 1970-01-02 15:51:12
##5001742: 1970-01-03 01:41:31
##5001743: 1970-01-01 06:08:15
##5001744: 1970-01-01 05:02:27
##5001745: 1970-01-03 00:37:00
 DT[P(dts, '197001')]
##                         dts
##      1: 1970-01-01 05:06:04
##      2: 1970-01-02 20:18:48
##      3: 1970-01-01 09:09:10
##      4: 1970-01-01 13:32:22
##      5: 1970-01-01 20:30:32
##     ---                    
##5001741: 1970-01-02 15:51:12
##5001742: 1970-01-03 01:41:31
##5001743: 1970-01-01 06:08:15
##5001744: 1970-01-01 05:02:27
##5001745: 1970-01-03 00:37:00
 DT[P(dts, '19700102')]
##                         dts
##      1: 1970-01-02 20:18:48
##      2: 1970-01-02 17:59:38
##      3: 1970-01-02 07:14:53
##      4: 1970-01-02 02:13:03
##      5: 1970-01-02 01:31:37
##     ---                    
##1519426: 1970-01-02 11:25:24
##1519427: 1970-01-02 10:00:21
##1519428: 1970-01-02 05:21:25
##1519429: 1970-01-02 05:11:26
##1519430: 1970-01-02 15:51:12
 DT[P(dts, '19700102 00:00:00/19700103 12:00:00')]
##                         dts
##      1: 1970-01-02 20:18:48
##      2: 1970-01-02 17:59:38
##      3: 1970-01-02 07:14:53
##      4: 1970-01-02 02:13:03
##      5: 1970-01-02 01:31:37
##     ---                    
##1785762: 1970-01-02 05:21:25
##1785763: 1970-01-02 05:11:26
##1785764: 1970-01-02 15:51:12
##1785765: 1970-01-03 01:41:31
##1785766: 1970-01-03 00:37:00

 #Check the correctness again
 DT[P(dts, '19700102 00:00:00/19700103 12:00:00'), max(dts)]
##[1] "1970-01-03 12:00:00 GMT"
 DT[P(dts, '19700102 00:00:00/19700103 12:00:00'), min(dts)]
##[1] "1970-01-02 00:00:00 GMT" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T08:04:23.720

这样做的规范方法是转换`POSIXlt`并提取小时分量。

```
hour(as.POSIXlt(DT$dts, "GMT")) < 12 
```

这似乎在性能上与所讨论的其他技术相当（并且更容易理解）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T18:48:43.183

这是一种使用**[xts](http://cran.r-project.org/package=xts)**中的一些功能来完成您想要的功能的方法。这不是一个很好的解决方案，因为`xts`对象必须按时间排序，但`data.table`对象不必如此。此外，它可能不会非常快，因为`xts`and正在完成一些冗余工作`data.table`。尽管如此，我认为这可能很有趣。

```
library(data.table)
library(xts)
set.seed(1); N = 1e5;
# I tweaked the following line to make this reproducible in other timezones.
DT = data.table(dts = .POSIXct(1e5*rnorm(N), tz="GMT"))
setkey(DT, dts)  # must sort on time first so that the `xts` object we're about 
                 # to create has the same order
DT[, XTS:=xts(rep(NA, .N), dts)]  # add a dummy xts object as a column
DT[XTS["T00:00:00/T11:59:59.999999", which=TRUE]][, list(dts)] 
                       dts
    1: 1969-12-27 00:28:41
    2: 1969-12-27 00:34:00
    3: 1969-12-27 03:11:21
    4: 1969-12-27 04:20:27
    5: 1969-12-28 00:00:21
   ---                    
49825: 1970-01-05 08:05:22
49826: 1970-01-05 09:35:32
49827: 1970-01-05 09:49:49
49828: 1970-01-05 09:50:27
49829: 1970-01-05 11:07:32 
```

上面使用`xts`-style 子集字符串来获取每天时间在 00:00:00 和 12:00:00 之间的行。Using`which=TRUE`返回行号而不是该行的数据，以便我们可以`data.table`按这些行子集。

您可以使用“1970-01-01”之类的字符串来获取当天的所有数据，或者使用“1970-01”来获取 1970 年 1 月的所有数据，或者使用“1970-01-01/1970-01-02”来获取所有数据从那两天获取所有行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T02:27:41.147

一个迟到的条目，但我认为该`as.POSIXlt`解决方案将创建一个命名的向量列表，您只需要一个小时

我会按一`ITime`列键，然后使用二进制搜索在下午 12 点之前对这些时间进行子集化

中午 12 点前还有`60*60 *12 - 1`几秒钟，所以`seq_len(43199)`会在晚上 12 点之前（但不包括）返回所有内容

```
# create IDate and ITime columns and key by time
setkey(DT[, c('Date','Time') := IDateTime(dts)],Time)

# subset times before 12pm
DT[.(seq_len(43199))] 
```

# java - 将 HashTable/Map 绑定到 Jtable

> ID：15830345
> 
> 赞同：1
> 
> 时间：2013-04-05T09:28:36.343
> 
> 标签：java, swing, jtable, hashmap

我有 C# 背景，对 Java 还是很陌生。尝试使用 Java 将我的 Windows 应用程序移植到 Mac。

我遇到的问题是如何将包含类的 HashTable 绑定到 JTable，以便键中的变量显示在 JTable 中。在 C# WPF 中这非常简单，只需将 GridView.ItemSource 绑定到 dictionary.keys。但在 Java 中，它似乎要复杂得多。这是我到目前为止所拥有的：

```
Map<Files, String> files = new HashMap<Files,String>();

public class Files {
       public Files(String files, String duration, String status) {}
                   }

public void AddFiles(String addfile, String addduration, String addstatus, String path){
            files.put(new Files(
                    addfile, addduration, addstatus), 
                    path);
            } 
```

在 C# 中，这个类看起来有点不同，但我可以做 GridView.Itemsource = files.Keys 和瞧，这一切都完美地显示了 upp。如何在 Java 中实现类似的功能？

我知道 JTable 可以使用多维数组来加载值，所以我现在正在尝试将 HashTable 的值加载到`Object[][] tableData`然后使用：

```
String[] columnNames = {"File","Duration", "Status"};
final JTable table = new JTable(tableData, columnNames); 
```

问题是我不知道如何访问 HashMap“文件”中的“文件”类中的变量。

我知道有：`.getKey().getClass()`但我仍然无法使用 HashMap 中的“文件”类的值加载多维数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:52:54.200

创建一个从基类扩展的 tableModel `AbstractTableModel`。在这里，您必须覆盖适当的方法（您的 IDE 会指出它们），最重要的是`getValueAt()`.

以类似于以下的方式覆盖这个：

```
@Override
public Object getValueAt(int rowIndex, int columnIndex) {
     switch (columnIndex) {
     case 0:
            return data.get(rowIndex).getValueX; // Change to however you'd like to call a single value from your map
     case 1:
            return data.get(rowIndex).getValueY;
     case 2:
            return data.get(rowIndex).getValueZ;
     default:
            throw new IndexOutOfBoundsException();
     }
} 
```

您可以使用您的数据作为参数调用您的模型。之后，将此模型用作您的 JTable 的参数，您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:04:33.543

你可以得到`keys`一个`HashMap`using`HashMap.keySet()`方法。

这将返回`Set`您存储在`HashMap`.

```
HashMap<Files, String> yourHashMap = new HashMap<Files, String>();
Set<Files> keys = yourHashMap.keySet(); 
```

一旦你得到了集合，假设你有你的`DefaultTableModel`集合`JTable`，你可以这样做，

```
for(Files f : keys) {
   yourDefaultTableModel.addRow(new String[]{f.files, f.duration, f.status});
} 
```

笔记：

使用一个覆盖方法 &的**类**总是*更好，它是***不可变** 的用作键。**`equals()`**`HashMap`****

 ****覆盖`equals()`将避免在[Hash 冲突](http://en.wikipedia.org/wiki/Collision_%28computer_science%29)的情况下覆盖键，并且使类**不可变**不会使与键关联的值成为**孤儿**（因为键一旦创建就不会更改）

因此，如果您觉得使类不可变会破坏其目的，我建议您使用`HashMap<String, Files>`而不是。`HashMap<Files,String>``Files`****

# ruby-on-rails - 更新授权（Ruby on Rails 教程）

> ID：15830351
> 
> 赞同：0
> 
> 时间：2013-04-05T09:28:50.657
> 
> 标签：ruby-on-rails, railstutorial.org

Mike Hart 关于添加授权的教程提供了以下代码（原始代码清单的[链接）。](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code-correct_user_before_filter)为什么该方法`update`会调用`sign_in @user`. 这对我来说似乎是多余的，因为`before_filter :correct_user`应该保证客户端由于`current_user?(@user)`in 方法而登录`correct_user`。

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:edit, :update]
  before_filter :correct_user,   only: [:edit, :update]
  .
  .
  .
  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end
  .
  .
  .
  private

    def signed_in_user
      redirect_to signin_url, notice: "Please sign in." unless signed_in?
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:43:21.290

因为用户在更新属性时被迫更新他们的密码，这将导致他们当前的登录无效。

# c# - 如何将 XAML 文件更改为模板 WPF

> ID：15830357
> 
> 赞同：0
> 
> 时间：2013-04-05T09:29:10.173
> 
> 标签：c#, wpf, xaml, templates

我有一个带有 2 个模板（一组 .xaml 文件）的 C# WPF 应用程序，如何在不手动编辑项目文件的情况下从项目中排除一组 xaml 文件并包含其他组

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:35:31.903

在 Visual Studio 中，右键单击要从项目中排除的文件，然后单击`Exclude from Project`。您可以通过右键单击他们的文件夹或项目并选择 Add --> Existing Item 来重新添加它们，然后在 Open Fire 对话框中选择它们。

# java - XML 解析。我怎样才能得到孩子的孩子？

> ID：15830358
> 
> 赞同：0
> 
> 时间：2013-04-05T09:29:10.870
> 
> 标签：java, xml

我正在尝试用 Java 解析这个 XML：

```
<entities>
<entity name="product_section" id="1">
    <product_type>3</product_type>
    <section_type>1</section_type>
    <name>Empresa</name>
    <description>d</description>
    <position>1</position>
    <align>left</align>

    <files section_id="1">
        <ico id="ico_1" type="normal" src="sections/1/icons/ico.png"></ico>
        <ico id="ico_2" type="hover"  src="sections/1/icons/ico.png"></ico>
        <ico id="ico_3" type="active" src="sections/1/icons/ico.png"></ico>

        <img id="img_1" type="normal" src="sections/1/img/pestanya.png"></img>
        <img id="img_2" type="hover"  src="sections/1/img/pestanya-hover.png"></img>
        <img id="img_3" type="active" src="sections/1/img/pestanya-active.png"></img>

        <background id="background_1" type="background" position="1" src="sections/1/background/bg1.png"></background>
        <background id="background_2" type="background" position="2" src="sections/1/background/bg2.png"></background>
        <background id="background_3" type="background" position="3" src="sections/1/background/bg3.png"></background>
    </files>
</entity> 
```

但是我刚刚实现了遍历实体，获取所有实体和每个`<product_type>`，`<section_type>`等等。但我也想遍历文件。

到目前为止，这是我的实现：

```
try {
        File contingut = new File("xmlfile.xml");
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(contingut);
        doc.getDocumentElement().normalize();
        System.out.println("root of xml file " + doc.getDocumentElement().getNodeName());
        //loop a cada entity
        NodeList nodes = doc.getElementsByTagName("entity");
        for (int i = 0; i < nodes.getLength(); i++) {
            Node node = nodes.item(i);
            Element element = (Element) node;
            System.out.println("product_type: " + getValue("product_type", element));
            System.out.println("section_type: " + getValue("section_type", element));
            System.out.println("name: " + getValue("name", element));
            System.out.println("description: " + getValue("description", element));
            System.out.println("position: " + getValue("position", element));
            System.out.println("align: " + getValue("align", element));
        }
    } catch (Exception e){
        e.printStackTrace();
    } 
```

`getValue`功能是：

```
private static String getValue(String tag, Element element) {
    NodeList nodes = element.getElementsByTagName(tag).item(0).getChildNodes();
    Node node = (Node) nodes.item(0);
    return node.getNodeValue();
} 
```

我做了很多谷歌搜索，我发现的只是“简单”的例子，有父母和孩子，但不是孩子的孩子。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:47:35.050

首先一个建议：

在此之后检查元素类型 `Element element = (Element) node;`

使用此代码或类似的东西：

```
if (element.getNodeType() == Element.ELEMENT_NODE) {  // do smth} 
```

并回答您的问题：

你可以简单地重写你的代码。创建后，`element`您可以通过使用获取它的所有子元素`element.getChildNodes();`

它为您提供所有子标签。之后，您编写简单的 for 循环，您可以从节点列表中获取每个节点元素，如下所示：

```
NodeList nodes = element.getChildNodes();
for(int i =0; i < nodes.getLength(); i++){
     Element child = (Element) nodes.item(i);
     if(child.getNodeType() == Element.ELEMENT_NODE){
             String tagName = child.getTagName();
             if(!tagName.equals("files")){
                   System.out.println(tagName + " : " + child.getTextContent());
             }else{
                   NodeList filesChilds = child.getChildNodes();
                   for(int j = 0; j < filesChilds.getLength(); j++){
                      //and like above
                   }
             }
     }
} 
```

# android - (Robotium) 如何在 RadioGroup 中选择 RadioButton

> ID：15830359
> 
> 赞同：4
> 
> 时间：2013-04-05T09:29:11.020
> 
> 标签：android, android-layout, android-intent, robotium

在我的 Android 应用程序视图布局中，我有一个`<RadioGroup>`包含两个`<RadioButton>`：

```
<RadioGroup
     android:id="@+id/my_radio_group"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:orientation="vertical">

      <RadioButton 
       android:id="@+id/yes_btn"

       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="@string/yes"
      />

     <RadioButton
       android:id="@+id/no_btn" 

       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="@string/no"
      />
</RadioGroup> 
```

我使用**[Robotium](https://code.google.com/p/robotium/)**库为此单选组编写**JUnit 测试****以选择一个单选按钮**。测试代码片段为：

```
Solo solo = new Solo(getInstrumentation(), getActivity()); 
...
solo.clickOnRadioButton(R.id.yes_btn); //I expect the "yes" radio button will be selected 
```

我希望上面的测试代码会选择“YES”单选按钮，但是当运行它时，它会引发一个**错误**：

```
junit.framework.AssertionFailedError: 2131427675 RadioButtons are not found!
at com.jayway.android.robotium.solo.Waiter.waitForAndGetView(Waiter.java:417)
at com.jayway.android.robotium.solo.Clicker.clickOn(Clicker.java:374)
at com.jayway.android.robotium.solo.Solo.clickOnRadioButton(Solo.java:1063)
... 
```

我怎样才能用**[Robotium](https://code.google.com/p/robotium/)**`<RadioButton>`选择一个呢？`<RadioGroup>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:03:49.733

试试下面的代码

```
RadioButton rb = (RadioButton) solo.getView(R.id.yes_btn);
solo.clickOnView(rb); 
```

当您传递资源 ID 时，solo.clickOnRadioButton() 将视图索引作为参数。

# java - 在 Java 7（或 32 位文件...）上运行 Java 6 文件

> ID：15830363
> 
> 赞同：0
> 
> 时间：2013-04-05T09:29:20.507
> 
> 标签：java

我试图在持续的 Java 7 上运行 .jar 文件。我收到了这个错误：

```
Could not load 'plugins/ucars.jar' in folder 'plugins'
org.bukkit.plugin.InvalidPluginException: java.lang.UnsupportedClassVersionError: com/useful/ucars/ucars : Unsupported major.minor version 51.0
at org.bukkit.plugin.java.JavaPluginLoader.loadPlugin(JavaPluginLoader.java:184)
at org.bukkit.plugin.SimplePluginManager.loadPlugin(SimplePluginManager.java:305)
at org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager.java:230)
at org.bukkit.craftbukkit.v1_4_R1.CraftServer.loadPlugins(CraftServer.java:239)
at org.bukkit.craftbukkit.v1_4_R1.CraftServer.<init>(CraftServer.java:217)
at net.minecraft.server.v1_4_R1.PlayerList.<init>(PlayerList.java:55)
at net.minecraft.server.v1_4_R1.DedicatedPlayerList.<init>(SourceFile:11)
at net.minecraft.server.v1_4_R1.DedicatedServer.init(DedicatedServer.java:104)
at net.minecraft.server.v1_4_R1.MinecraftServer.run(MinecraftServer.java:399)
at net.minecraft.server.v1_4_R1.ThreadServerApplication.run(SourceFile:849)
    Caused by: java.lang.UnsupportedClassVersionError: com/useful/ucars/ucars : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at org.bukkit.plugin.java.PluginClassLoader.findClass0(PluginClassLoader.java:80)
at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:53)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:249)
at org.bukkit.plugin.java.JavaPluginLoader.loadPlugin(JavaPluginLoader.java:173)
... 9 more 
```

（这是[CraftBukkit](http://bukkit.org/) v1.4.7 R1.0 服务器）只有这个插件，.jar，不工作。

如果这是因为 java 版本不同，我如何在 Java 7 上运行 Java 6 文件（？）？

(Mac OS X Lion 10.7.5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:32:26.123

反之亦然。`Java 7`您正在尝试运行为( `major.minor version 51.0`) 下编译的 java 程序`Java 6`。检查，`JRE`您使用哪个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:33:15.343

该错误意味着您正在尝试在 Java 6 运行时环境中使用使用 JDK 7 编译的类（而不是相反！）。

Java 是向后兼容的。较新版本的 Java 可以使用用旧版本 Java 编译的类而无需修改。

确保您使用 Java 7 来运行您的课程。您可以使用以下命令检查您的 Java 运行时环境和 JDK 版本：

```
java -version
javac -version 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:34:28.550

您可以让软件供应商重新构建他们的产品以与 Java 6 兼容，或者您​​可以运行 Java 7。因为 Java 6 是 EOL - 意味着它已经到了生命周期的尽头，并且因为 Java 6 不会再获得一个公开更新，即使发现了最近几周发现的更多新错误，您应该安装 Java 7。

# php - 如何在codeigniter中获取当前日期

> ID：15830364
> 
> 赞同：8
> 
> 时间：2013-04-05T09:29:21.937
> 
> 标签：php, javascript, codeigniter, codeigniter-2

如何以 YY-mm-dd 格式在 codeigniter 中获取当前日期。我想在 YY-mm-dd frmat 中获取当前日期并将此值放入输入文本框中

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T09:31:17.337

您可以使用[PHP 日期函数](http://php.net/manual/en/function.date.php)。

```
date('Y-m-d'); 
```

据我所知，codeigniter 中没有单独的日期函数。

**编辑 ：**

但是如果你想要这种格式的日期`13-04-05 [ yy-mm-dd ]`，试试这个

```
date('y-m-d'); 
```

有关更多日期格式，请查看此链接[**PHP Date Formats**](http://php.about.com/od/learnphp/ss/php_functions_3.htm)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-01T17:05:59.337

尝试使用这是 DateTime 的通用格式

```
echo date('Y-m-d H:i:s'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T09:32:10.827

使用php`date`函数

```
echo date("Y-m-d"); 
```

会给你结果

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-24T14:49:24.200

关于什么：

```
$date = new \Datetime('now');
var_dump($date); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-08T11:45:03.507

如果你想要完整的日期：

```
echo date('Y-m-d'); 
```

取决于您的日期结构。

```
echo date('d-m-Y'); 
```

如果你只想要一年，那就 `echo date('Y');`足够了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-29T07:49:07.563

使用 php date() 函数，例如 echo Date('Y/m/d'); 它会给你想要的结果！

# mysql - 在mysql中删除设置空创建表

> ID：15830371
> 
> 赞同：0
> 
> 时间：2013-04-05T09:29:46.183
> 
> 标签：mysql

我要创建一个名为 patientmedicinecategory 的表。如下所示：-

```
 CREATE TABLE patientmedicinecategory
 (
 pmc         int(11) NOT NULL AUTO_INCREMENT,
 patient_id  int(11) NOT NULL,
 med_id      int(3) NOT NULL,
 cat_id      int(3) NOT NULL,
 testname    varchar(100) NOT NULL,

 PRIMARY KEY(pmc),
 UNIQUE KEY(patient_id, med_id,cat_id,testname),
 FOREIGN KEY(patient_id) REFERENCES patient(patient_id) ON UPDATE CASCADE ON DELETE    
 CASCADE,
 FOREIGN KEY(med_id) REFERENCES medicine(med_id) ON UPDATE CASCADE ON DELETE CASCADE,
 FOREIGN KEY(cat_id) REFERENCES category(cat_id) ON UPDATE CASCADE ON DELETE SET NULL
 )ENGINE=InnoDB; 
```

我的病人表是：-

```
 CREATE TABLE patient
  (
  patient_id    int NOT NULL AUTO_INCREMENT,
  salutation    ENUM('Mr.','Mrs.','Miss.','Dr.') NOT NULL,
  name      varchar(50) NOT NULL,
  email_id  varchar(100),
  year      int(4) NOT NULL,
  month     int(3),
  day       int(3),
  sex       ENUM('M','F') NOT NULL,
  contactno         varchar(50),    

  PRIMARY KEY(patient_id)
  )ENGINE=InnoDb; 
```

药表是：-

```
 CREATE TABLE medicine
  (
  med_id  int(3) NOT NULL,
  name    varchar(40) NOT NULL,

  PRIMARY KEY (med_id)
  )ENGINE=InnoDB; 
```

类别表是： -

```
 CREATE TABLE category
  (
  cat_id    int(3) NOT NULL,
  name      varchar(20) NOT NULL,

  PRIMARY KEY (cat_id)
  )ENGINE=InnoDB; 
```

但是当我尝试创建它时，它会给出错误：-

```
 ERROR 1005 (HY000): Can't create table 'nutech3.patientmedicinecategory' (errno: 150) 
```

我已经尝试了很多但无法成功。请帮我 。提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T10:00:15.613

如果您以 root 身份登录并运行`SHOW ENGINE INNODB STATUS`，您将看到确切的错误消息是这样的：

```
------------------------
LATEST FOREIGN KEY ERROR
------------------------
130405 11:55:42 Error in foreign key constraint of table test/patientmedicinecategory:
FOREIGN KEY(cat_id) REFERENCES category(cat_id) ON UPDATE CASCADE ON DELETE SET NULL
 )ENGINE=InnoDB:
You have defined a SET NULL condition though some of the
columns are defined as NOT NULL. 
```

这是违规行：

```
FOREIGN KEY(cat_id) REFERENCES category(cat_id) ON UPDATE CASCADE ON DELETE SET NULL 
```

MySQL 不能生成`patientmedicinecategory.cat_id`NULL，因为它是这样定义的：

```
cat_id      int(3) NOT NULL, 
```

您的选择是：

*   允许`cat_id`成为`NULL`
*   设置不同的`ON DELETE`条件

# qt - 摆脱 Qt 在 QListView 项目上的虚线轮廓

> ID：15830383
> 
> 赞同：12
> 
> 时间：2013-04-05T09:30:16.140
> 
> 标签：qt, pyqt4, qtstylesheets

我正在尝试`QListView::item`使用样式表删除此文本上的虚线边框：

![带有虚线轮廓的 QListView 显示在所选项目上](https://i.stack.imgur.com/yoHly.png)

我已经尝试过`border: 0`和`show-decoration-selected: 0`的变体`QListView`，`QListView::item`但`QListView::item::text`没有效果。

我正在使用 PyQt，但我相信样式表规则与 C++ 库中的相同。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-05T10:12:28.423

经过更多测试，我发现以下样式表有效：

```
QListView {
    outline: 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-19T07:53:14.163

设置“大纲：0；” 在样式表中对我不起作用（不再？）。我能找到的唯一解决方案是将 ListView 的 FocusPolicy 设置为“Qt::NoFocus”，这有明显的缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-07T09:39:29.750

将边框设置为无似乎对我有用。

```
QListView::item { 
    border: none;
} 
```

# php - 一次只显示一个隐藏的表格行

> ID：15830386
> 
> 赞同：0
> 
> 时间：2013-04-05T09:30:19.250
> 
> 标签：php, javascript, jquery, css

我有一个表，其中每隔一个表行都有一个类名“hideme”。在我的 css 文件中，我制作了 .hideme { display:none}

隐藏行包含有关其上方行的选项/信息。我的目标是使用 jquery 在单击上面的行时打开/关闭隐藏行。我已经成功了，但是代码有一个缺陷。我可以同时显示多个隐藏行。这是不可取的。我希望在任何给定时间只显示一个隐藏行，或者根本不显示。

我应该如何更改我的 jQuery 代码以使我的表格表现得像我想要的那样？

这是我的 jQuery 代码：

```
$(document).ready(function() {

$('#eventtable tr').click(function() {
    $(this).closest("tr").next().toggle();
});
}); 
```

我的 HTML/PHP 如下：

```
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {

        echo '
            <tbody>
                <tr>
                    <td>' . $row['event'] . '</td>
                    <td>' . $row['dr'] . '</td>
                </tr>
                <tr class = "hideme"> 
                    <form method="post" action="galleryHandler.php">
                    <input type="hidden" name="Name" value="' . $row['name'] . '" />    
                    <td><input type="password" class="input" name="password" size="25" maxlength="20"/></td>
                    <td><input type="submit" name="submit" value="Se fotosession" class="button2"/></td>
                    </form>         
                </tr>
            </tbody>
        ';

    } 
```

这个问题已经被一个好心的stackoverflow用户解决了。但是我仍然有一个问题，因为我在隐藏行中有文本字段，我一开始没有提到，当我点击它们时它们消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:37:29.817

隐藏所有其他之前：

```
$('#eventtable tr:even').hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:05:49.080

这可以解决问题：

```
$(document).ready(function() {
    $('#eventtable tr:even').on('click', function() {
        if ($(this).next().css('display') == 'none') {
            $('#eventtable .hideme').hide();
            $(this).next().show();
        }
        else {
            $('#eventtable .hideme').hide();
        }
    });
}); 
```

在这里工作：

[http://jsfiddle.net/aTN6v/](http://jsfiddle.net/aTN6v/)

这将使切换行为起作用，但会在打开您单击的那个之前关闭已经打开的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:33:54.463

试试这个：

```
$(document).ready(function () {

    $('#eventtable > tbody > tr > td').click(function () {
        $(this).closest("tr").next().toggle();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:45:13.527

```
$(document).ready(function() {

$('#eventtable tr').click(function() {
    var nextRow = $(this).closest("tr").next();
    $('#eventtable tr.hideme').not(nextRow).hide(); 
    nextRow.toggle();
});
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T09:54:26.107

假设**HTML**结构如下

```
<table border="1">
    <tr><td>1.a</td><td>foo</td></tr>
    <tr class="hideme"><td>1.b</td><td>foo</td></tr>
    <tr><td>2.a</td><td>bar</td></tr>
    <tr class="hideme"><td>2.b</td><td>bar</td></tr>
    <tr><td>3.a</td><td>baz</td></tr>
    <tr class="hideme"><td>3.b</td><td>baz</td></tr>
</table> 
```

并使用**CSS**如下

```
.hideme { display:none; } 
```

以下**JS代码**应该可以解决问题

```
$('tr:even').click(function(){
    $(this).next().toggleClass('hideme');
}); 
```

[在这里](http://jsfiddle.net/5rAtZ/2/)检查工作小提琴。

# forms - Symfony“无法加载类型”服务yaml

> ID：15830394
> 
> 赞同：0
> 
> 时间：2013-04-05T09:30:36.100
> 
> 标签：forms, symfony

我尝试在 Symfony 2.2 中为我的一种形式创建服务：

服务.yml：

```
tyg_user.settings.form:
    class: Symfony\Component\Form\Form
    factory_method: createNamed
    factory_service: form.factory
    arguments: 
        - tyg_user_settings
        - tyg_user_settings_name
tyg_user.settings.form.type:
    class: TyG\UserBundle\Form\Settings\SettingsFormType
    tags:
        - { name: form.type, alias: tyg_user_settings }
tyg_user.settings.form.handler:
    class: TyG\UserBundle\Form\Settings\SettingsFormHandler
    scope: request
    arguments:
        - @tyg_user.settings.form
        - @request
        - @fos_user.user_manager 
```

SettingsForm.php

```
<?php

namespace TyG\UserBundle\Form\Settings;

use Symfony\Component\Form\FormBuilderInterface as FormBuilder;;
use Symfony\Component\Form\AbstractType;

class SettingsForm extends AbstractType
{

  public function buildForm(FormBuilder $builder, array $options)
  {
      $builder
        ->add('birthday', 'birthday')
        ->add('email', 'email')
        ->add('showmail')
        ->add('showbirthday')
      ;
  }

  public function getName()
  {
      return 'tyg_user_settings';
  }
}
?> 
```

但是发生了错误：

```
Could not load type "tyg_user_settings_name 
```

当我通过服务容器获取表单时会发生这种情况：

```
$this->container->get('tyg_user.settings.form'); 
```

我曾经通过 xml 格式创建我的服务，但是当我更改为 yml 格式时，我不知道如何使它工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:31:34.800

`tyg_user_settings_name`正在引用表单类型别名。

如果您希望它引用您应该使用的参数`%tyg_user_settings_name%`。

# android - 使用选取框检测 TextView 中特定文本的单击事件

> ID：15830395
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:30:36.903
> 
> 标签：android, textview, marquee

我在textview中设置一个文本。它是选框文本。不仅仅是文本，它是一个接一个连接并添加到textview的文本数组。我希望如果我点击任何文本然后那个文本（或单词）将显示在一个对话框中。首先它是否可能无论如何。我尝试使用此[链接](https://stackoverflow.com/questions/10345768/android-how-to-set-the-portion-of-the-text-is-clickable)中的 Spannable 第一个答案。但它不能按照我的要求工作，因为我有字幕文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:35:25.760

你为什么不用更有用的东西来代替品牌呢？:) 您可以将 textView 包装到水平滚动视图中。然后你有一个滚动文本的线程（AsyncTask），使用 ScrollView.setScrollX() 就像 marquee 一样。

你能猜到，接下来会发生什么吗？如您引用的链接所建议的那样，使用跨度！

# c# - C# Directory.exist 在本地网络上总是返回 false

> ID：15830396
> 
> 赞同：3
> 
> 时间：2013-04-05T09:30:38.743
> 
> 标签：c#, networking, directory, impersonation

我正在尝试检查目录是否存在于不存在或本地网络上。在对 stackoverflow 和 MSDN 进行了一些研究之后，我使用模拟方法开发了我的代码。问题是它不能很好地工作，该`Directory.exists()`方法总是返回这里你有我的代码（它与[MSDN](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)`False`中的几乎相同）：

```
public sealed class SafeTokenHandle : SafeHandleZeroOrMinusOneIsInvalid
    {
        private SafeTokenHandle()
            : base(true)
        {
        }

        [DllImport("kernel32.dll")]
        [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
        [SuppressUnmanagedCodeSecurity]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool CloseHandle(IntPtr handle);

        protected override bool ReleaseHandle()
        {
            return CloseHandle(handle);
        }
    }

 class Environment
    {
        [DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
        public static extern bool LogonUser(String lpszUsername, String lpszDomain, String lpszPassword,
            int dwLogonType, int dwLogonProvider, out SafeTokenHandle phToken);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
        public extern static bool CloseHandle(IntPtr handle);
        const int LOGON32_PROVIDER_DEFAULT = 0;
        const int LOGON32_LOGON_INTERACTIVE = 2;

        private void m_SendAlertes()
        {
                SafeTokenHandle safeTokenHandle;
                string v_pathToDir = "\\192.168.1.199\Clients SiteInternet";

                if (!LogonUser("RKalculateur", "SERVEUR2", 
                                "riskedge", LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, out safeTokenHandle))
                {
                    int ret = Marshal.GetLastWin32Error();
                    throw new System.ComponentModel.Win32Exception(ret);
                }
                using (safeTokenHandle)
                {
                    using (WindowsIdentity newId = new WindowsIdentity(safeTokenHandle.DangerousGetHandle()))
                    {
                        using (WindowsImpersonationContext impersonatedUser = newId.Impersonate())
                        {
                            if (Directory.Exists(@v_pathToDir))
                            {
                               // Proceed code here
                            }
                        }
                    }
                }
        }
    } 
```

在这里，您可以看到此目录的权限图片： ![在此处输入图像描述](https://i.stack.imgur.com/3jYtX.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:08:30.907

这可能是与用户权限相关的问题。

来自 MSDN：

> 如果您没有对该目录的最低只读权限，则 Exists 方法将返回 false。

如果您使用的是本地帐户而不是域帐户，则使用 Directory.Exists() 方法是有问题的。

过去我也遇到过类似的问题：我必须检查我的网络中是否存在网络共享并且没有域。你的方法对我不起作用。最后，我放弃了 Directory.Exists() 方法，最终使用了 NET USE 命令（[http://www.cezeo.com/tips-and-tricks/net-use-command/](http://www.cezeo.com/tips-and-tricks/net-use-command/)）

```
bool exists = false;
string output = "";
string error = "";

System.Diagnostics.Process process = new System.Diagnostics.Process();
process = new System.Diagnostics.Process();
            ExecuteShellCommand(process, "NET USE", "\""+ @path + "\" "+
               this.password+ " /USER:"+machinename+"\\"+username + " /PERSISTENT:NO",
               ref output, ref error);
Console.WriteLine("\r\n\t__________________________"+
                "\r\n\tOutput:" + output.Trim().Replace("\r", " ") +
                "\r\n\tError: " + error.Trim().Replace("\r"," "));

            if (output.Length>0 && error.Length==0)
            {
                exists = true;
            }

            process = new System.Diagnostics.Process();
            ExecuteShellCommand(process, "NET USE", " /DELETE " + @path,
                ref output, ref error); 
```

……

```
public void ExecuteShellCommand(System.Diagnostics.Process process, string fileToExecute,
        string command, ref string output, ref string error)
    {
        try
        {
            string CMD = string.Format(System.Globalization.CultureInfo.InvariantCulture, @"{0}\cmd.exe", new object[] { Environment.SystemDirectory });
            string args = string.Format(System.Globalization.CultureInfo.InvariantCulture, "/C {0}", new object[] { fileToExecute });
            if (command != null && command.Length > 0)
            {
                args += string.Format(System.Globalization.CultureInfo.InvariantCulture, " {0}", new object[] { command, System.Globalization.CultureInfo.InvariantCulture });
            }

            System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo(CMD, args);

            startInfo.CreateNoWindow = true;
            startInfo.UseShellExecute = false;
            startInfo.RedirectStandardOutput = true;
            startInfo.RedirectStandardInput = true;
            startInfo.RedirectStandardError = true;

            process.StartInfo = startInfo;

            process.Start();

            // timeout
process.WaitForExit(10 * 1000);
output = process.StandardOutput.ReadToEnd();
             error = process.StandardError.ReadToEnd();
        }
        catch (Win32Exception e32)
        {
            Console.WriteLine("Win32 Exception caught in process: {0}", e32.ToString());
        }
        catch (Exception e
        {
            Console.WriteLine("Exception caught in process: {0}", e.ToString());
        }
        finally
        {
            // close process and do cleanup
            process.Close();
            process.Dispose();
            process = null;
        }
    } 
```

我知道这是一个 hack，但它对我有用，而且是有可能的。（尽管您可能需要设置适当的净份额）

# php - php require_once

> ID：15830399
> 
> 赞同：0
> 
> 时间：2013-04-05T09:30:44.643
> 
> 标签：php

我在第一页“login.php”中有这个

```
<?php
session_start();
$msg='';
if ((isset($_POST))&& (!empty($_POST)))
{
require_once('log.php') or die(mysql_error());
$p=md5($pass);
if (login($login,$p))
{
    header('location:index.php');;
}
else 
{
    $msg="Login ou mot de passe incorrect";
}
}
?> 
```

日志.php：

```
$req="SELECT * FROM admin WHERE login='$e' and password='$p'";
$res=mysql_query($req) or die(mysql_error()."\n".$req);

if(mysql_num_rows($res)!=0)
{
    $data=mysql_fetch_assoc($res);
    $_SESSION['adm']=array('code'=>$data['code'], 'login'=>$data['login']);
    return true;
    mysql_close();
}
else return false;
}?> 
```

如果我测试第一页“login.php”我得到了这个：

> 警告：require_once(1)：打开流失败：第 6 行的 C:\xampp\htdocs\admin\login.php 中没有这样的文件或目录
> 
> 致命错误：require_once(): Failed opening required '1' (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\admin\login.php on line 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:45:19.030

require_once 不是一个函数。发生的事情是您的 require_once 行的评估如下：

```
 require_once ( log.php or die() ); 
```

这意味着它试图打开一个名为 1 的文件。

你不需要在 require_once 之后使用 die，它会失败并自行死亡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:40:31.350

为确保您拥有正确的位置，您可以使用 dirname

```
dirname(__FILE__) . '/log.php' 
```

[查看此文档和解释](http://www.kavoir.com/2010/02/php-why-you-should-use-dirname__file__-include-php-instead-of-just-include-php.html)

# ruby-on-rails - Ruby 中 For 和 Map 的区别

> ID：15830404
> 
> 赞同：1
> 
> 时间：2013-04-05T09:31:02.580
> 
> 标签：ruby-on-rails, ruby, arrays, loops, map

请让我知道这些操作之间有什么区别。第一个代码工作正常：

```
1) for elem in(mr)
     elem.shedule = Date.new(date.year, date.month, date.day)  
   end 
```

但我想使用`map`：

```
2) mr.map!{ |elem| elem.shedule = Date.new(date.year, date.month, date.day) } 
```

第二个代码返回错误：

```
 NoMethodError in Events#index

Showing C:/Sites/calend/app/views/events/_calendar.html.erb where line #9 raised:

undefined method `shedule' for Thu, 04 Apr 2013:Date

Extracted source (around line #9):

6:   </h2>
7:   <%= calendar_for(@repeats, :year => @date.year, :month => @date.month) do |calendar| %>
8:     <%= calendar.head('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday') %>
9:     <%= calendar.day(:day_method => :shedule) do |date, events| %>
10:       <%= date.day %> <%= link_to '+', new_event_path(date: date) %>
11:       <ul>
12:         <% for event in events %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T09:54:01.810

您`map`以错误的方式使用，您应该`each`改用。您的代码应该是：

```
mr.each do |elem| 
  elem.shedule = Date.new(date.year, date.month, date.day)
end 
```

`map`用块返回的值替换 Array 中的每个元素（请参阅下面的 Linuxios 注释），在您的示例中，该块返回一个 Date 对象。`map!`在不创建新数组的情况下执行相同的操作，因此在您的示例`mr`中是日期对象数组而不是事件数组。

此外，`for`在 Ruby 代码中使用的非常少见，它通常被替换为`each`因为：

```
[1, 2, 3].each do |x|
  puts x
end 
```

几乎等同于（有关差异，请参阅 Mladen Jabnović 对此答案的评论）：

```
for x in [1, 2, 3]
  puts x
end 
```

前者被认为更“Rubyish”。

# python - 使用 SymPy 查找复杂多项式的所有根

> ID：15830406
> 
> 赞同：2
> 
> 时间：2013-04-05T09:31:19.557
> 
> 标签：python, math, polynomial-math, sympy

我试图用符号解决一个复数的多项式及其与 SymPy 的共轭。我想我已经走了很长一段路，但`solve`尽管多项式是可解的，但并没有给我任何解决方案。

```
from sympy import *

# set up symbols
a, b = symbols("a b", real=True)
t = a+I*b
T = functions.conjugate(t)

# set up polynomial
a1=0.005+I*0.0009
a2=0.9+I*-0.9
a3=0.4+I*0.5
a4=8+I*-80
a5=284+I*-1.5
a6=27100+I*-11500
poly=t**2 * T * a1 + t * T * a2 + t**2 * a3 + T * a4 + t * a5 + a6

# Trying to solve symbolically...
solve([re(poly), im(poly)], a, b)
#     Output: []

# Solving numerically works, but only finds one solution...
nsolve((re(poly), im(poly)), (a, b), (0, 0))
#     Output: matrix(
#             [['-137.962596090596'],
#              ['52.6296963395752']])

# verify with two solutions obtained in Maxima
poly.subs({a:-137.9625935162095, b:52.6296992481203}).n()
#     Output: 0.000540354631040322 + 0.00054727003909351*I
poly.subs({a:-332.6474382554614+I*-185.9848818313149, b:258.0065640091016+I*-272.3344263478699}).n()
#     Output: -6.55448222470652e-12 - 1.41238056784605e-12*I 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-12T14:02:40.620

一个问题可能是您的系数包含浮点数。这通常不适用于符号软件。

使用 f=10000*simplify(re(poly)) 和 g=10000*simplify(im(poly)) 并编辑结果给出具有整数系数的多项式。CAS（在我的例子中是 Magma）然后可以产生 f 和 g 的理想的三角形表示，它作为多项式给出

```
a - 2483798807340123709959247/13545514719183259347425004828125*b^4
  + 66732206412048596386372283/541820588767330373897000193125*b^3 
  - 3849759933277117021785191063/86691294202772859823520030900*b^2
  + 9245906471290310401430681453/1733825884055457196470400618*b
  - 31414499425567273751868164900/866912942027728598235200309,

b^5 - 189465979625/206648369*b^4 
    + 330827538698125/826593476*b^3
    - 17645868534640625/206648369*b^2 
    + 1724106750659765625/206648369*b
    - 52548859891484375000/206648369 
```

这告诉我们存在 5 个解决方案。第二个多项式的数值解是

```
174.10461010682254746847015187264557067610513554291323564643772 
 + 63.402741884833821878468926640811609033267039765104756747285816*i

174.104610106822547468470151872645570676105135542913235646437738
 - 63.402741884833821878468926640811609033267039765104756747285804*i

258.006564009101655109715962546854008929462784282347754971379392
  + 272.334426347869856080204881056671278679761260094680345276069337*i

258.006564009101655109715962546854008929462784282347754971379382
 - 272.334426347869856080204881056671278679761260094680345276069359*i

52.62969633957523864698147679803879873180829265956656342643376 
```

产生了一个真正的解决方案。sympy的数值结果是正确和完整的。

# php - 在 MySQL 中合并两行以将数据显示为一行

> ID：15830410
> 
> 赞同：1
> 
> 时间：2013-04-05T09:31:23.440
> 
> 标签：php, mysql, join

我想加入 WooCommerce 创建的帖子元字段，以在一行中显示客户的名字和姓氏。

mysql的表结构如下：

```
meta_id    post_id    meta_key                meta_value
=======    =======    =======                 ===========
1234       1874       _billing_first_name     John
1235       1874       _billing_last_name      Cobe 
```

现在我希望它使用 mysql 语句返回以下结果

```
post_id    _billing_first_name    _billing_last_name
=======    ====================   ==================
1874       John                   Cobe 
```

期待您的建议和帮助。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:54:10.253

如果 meta_key 有两个固定值，则可以使用如下内容：

```
SELECT
  post_id,
  MAX(CASE WHEN meta_key='_billing_first_name' THEN meta_value END) _billing_first_name,
  MAX(CASE WHEN meta_key='_billing_last_name' THEN meta_value END) _billing_last_name
FROM
  yourtable
GROUP BY
  post_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:24:47.770

看一下[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数。我认为它会为你完美地工作。
这是[SQL Fiddle中的一个示例](http://sqlfiddle.com/#!3/fcef1/17/0)

```
选择 *
从
(
  选择 post_id、meta_key、meta_value
  FROM table_name WHERE post_id = 1874
) 作为 x
枢
(
  MAX（元值）
  FOR meta_key IN ([_billing_first_name], [_billing_last_name])
) 作为 p

```

# excel - 使用从另一个工作表中的数据过滤的数据创建一个表

> ID：15830411
> 
> 赞同：2
> 
> 时间：2013-04-05T09:31:23.820
> 
> 标签：excel, filtering

我在表 1 中有一个包含 105 列和大约 300 行的表。我需要在表 2 中使用同一表的简化版本，并按某些列值（不是第一列）进行过滤。

我查看了数据透视表，但似乎无法获得相同的表格结构。我已尝试使用高级过滤器，但出现错误：

> “提取范围的字段名称缺失或非法”。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-15T16:18:30.330

Microsoft 的 PowerQuery 插件支持这一点。它的众多来源之一可以是 Excel 数据源表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:58:57.453

我发现需要在未使用的位置从目标表运行高级过滤器（最好在预期目标上方，而不是在其上或下方）。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T21:34:57.440

您可以使用我开发[的表值函数加载项对](http://finaquant.com/products/excel-add-in-for-table-valued-functions)Excel 中的数据表进行任何操作（包括过滤、分区、聚合、分布等）。

每个表（Excel 中的 ListObject）都是表值函数的输入或输出参数。例如，您可以将三个表作为输入参数提供给生成一些结果表的表函数。

# c# - Windows 窗体 SingletoneFormProvider 并使用第二个构造函数获取一些参数

> ID：15830414
> 
> 赞同：0
> 
> 时间：2013-04-05T09:31:42.863
> 
> 标签：c#, winforms

我有`MDI Forms`应用程序并且我使用`SingletoneFormProvider`它，因为它一次只需要一个表单实例。

我有可用于创建新记录或更改现有记录的编辑表单。问题在于现有记录的编辑。

到目前为止我所做的：

*   我有一个从类中调用静态方法`SingletoneProviderForm`并获取表单的新实例的方法：

    ```
     protected void LoadForm<T>(ToolStripItem formButton, string buttonText, long? loadEntityId = null, bool closeAlreadyOpened = true) where T : BaseForm
    {
             //Some code..
             openForm = SingletonFormProvider.GetInstance<T>(parentFrm, closeAlreadyOpened);
             openForm.LoadEntityId = loadEntityId;
             openForm.MdiParent = parentFrm;
             openForm.Dock = DockStyle.Fill;
             openForm.Show();
             openForm.Activate();
             //More code.. 
    ```

    }

*   我有以下三个声明`SingletonFormProvider.GetInstance<T>`：

    static public T GetInstance(Form owner) where T : Form

    static public T GetInstance(Form owner, bool closeAllButThis) where T : BaseForm

    static public T GetInstance(Form owner, bool closeAllButThis, params object[] args) where T : Form

*   到目前为止，为了获得任何形式的新实例，我这样做了：

    加载表格（）；

*   如果我想发送一个 ID，那么只需：

    加载表格（ID）；

问题来了。因为我尝试使用提供的 ID 记录中的数据填充表单字段，所以我进行了查询：

```
entity = anyForm.Find(LoadEntityId.Value); 
```

当我在`form_load`活动中这样做时，所有这些实际上都很好。但是现在当我每次检查时在构造函数中移动这个部分时：

```
if (LoadEntityId.HasValue) 
```

它从来没有，因为似乎表单实例的构造方式我无法从构造函数访问 ID。

我做了什么 ：

*   改变了`LoadForm()`方法：

    if (loadEntityId == null) { openForm = SingletonFormProvider.GetInstance(parentFrm, closeAlreadyOpened); } else { openForm = SingletonFormProvider.GetInstance(parentFrm, closeAlreadyOpened, loadEntityId); }

*   使我的默认构造函数受到保护并从中删除所有内容：

    受保护的 AnyForm() {}

*   制作了另一个接受一个参数的构造函数：

    public AnyForm(long?LoadEntityId) { long? AnyFormID = LoadEntityId.Value; 初始化组件（）；//我需要的所有东西}

所以它的工作对我来说太神奇了。我很怀疑这是实现这一目标的方法。因此，请查看并指导我正确执行此操作。当然，如果这在某种程度上是正确的方法，请验证，因为我怀疑是否可以将其放入生产代码中。

附言

如前所述`Matthew Watson` ，表单在没有默认构造函数的情况下表现得很奇怪，所以我最终得到了一个默认（无参数）构造函数，而另一个采用了一个参数——我需要的 ID。更糟糕的是，现在我有重复的代码。我很确定这不是它的做法。

# html - HTML5 语义和大纲

> ID：15830419
> 
> 赞同：0
> 
> 时间：2013-04-05T09:31:53.367
> 
> 标签：html, semantics

我最近才发现了整个 HTML 大纲的东西，并发现了这个很棒的在线[HTML5 大纲工具](http://gsnedders.html5.org/outliner/)。现在我正在尝试完成一个语义上正确的简单 HTML 页面，其大纲应如下所示：

1.  页
    1.  导航
    2.  主要的
    3.  子
        1.  在旁边
    4.  页脚

并呈现这样的页面：

```
| --- NAV ----------------- |
|      content              |
| --- MAIN ---------------- |
|      content              |
| --- SUB ----------------- |
|      content      | aside |
| --- FOOTER -------------- |
|      content              | 
```

HTML 如下所示：

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Title</title>
</head>

<body>
    <div class="page">

        <header class="page--header">
            <hgroup>
                <h1>page</h1>
                <h2>subtitle</h2>
            </hgroup>
            <nav>
                <h1>Nav</h1>
                <ul>
                    <li>link 1</li>
                    <li>link 2</li>
                    <li>link 3</li>
                    <li>link 4</li>
                    <li>link 5</li>
                </ul>
            </nav>

        </header><!-- .page-header -->

        <section class="page--main">
            <h1>Main</h1>                
        </section><!-- .page-main -->

        <section class="page--sub">
            <h1>Sub</h1>
            <aside>
                <h1>Aside</h1>
                <p>Advertisement block</p>
            </aside><!-- aside -->                
        </section><!-- .page-sub -->

        <footer>
            <h1>Footer</h1>                
        </footer><!-- footer -->

    </div><!-- .page -->
</body>
</html> 
```

这使得大纲看起来像这样：

1.  页
    1.  导航
    2.  主要的
    3.  子
        1.  在旁边
2.  页脚

在获得上述大纲的同时，我应该如何更改 HTML 以保持其语义正确？即使它们都是具有相同标题级别的兄弟，为什么`footer`没有与那些顶级部分元素（即主和子）在同一级别上概述？

困惑，欢迎任何帮助，批评或建议，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:35:30.173

1.  使用排名`<h1>`到 `<h6>`标题而不是所有`<h1>`s。[来源](http://html5doctor.com/interview-steve-faulkner-html5-editor-new-doctor/#comment-32325)
2.  将主要内容包裹在`<main>`元素内。记得设置`main { display: block }`跨浏览器兼容性。
3.  将侧边栏容器 ( `<aside>`)`<main>`作为`<aside>`的补充内容放入其中`<main>`。
4.  删除`<h1>`内部`<footer>`，因为`<footer>`它不是分段元素，因此不需要标题。

简要示例：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Title</title>
</head>
<body>

    <header role="banner">
        <hgroup>
            <h1>page</h1>
            <h2>subtitle</h2>
        </hgroup>
        <nav role="navigation">
            <h2>Nav</h2>
            <ul>
                <li>link 1</li>
                <li>link 2</li>
                <li>link 3</li>
                <li>link 4</li>
                <li>link 5</li>
            </ul>
        </nav>
    </header>

    <main role="main">

        <!-- main content goes here -->
        <section id="example">
            <h2>Example</h2>
            <p>Lorem ipsum</p>
        </section>
        <!-- main content goes here -->

        <aside role="complementary">
            <h2>Aside</h2>
            <article id="ad">
                <h3>Ad</h3>
                <p>Advertisement block</p>
            </article>
        </aside>    

    </main>

    <footer role="contentinfo">
        <p><small>&copy; <time>2013</time> Website Name</small></p>
    </footer>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:42:35.633

也`header`不会`footer`在大纲中创建项目符号。主要的分段元素是：`nav`、`section`、`article`和`aside`。

你应该看看：[http ://html5doctor.com/outlines/](http://html5doctor.com/outlines/)

# python - 不支持带有编码声明的 XML Unicode 字符串

> ID：15830421
> 
> 赞同：30
> 
> 时间：2013-04-05T09:31:54.447
> 
> 标签：python, xml, django

尝试执行以下操作...

```
from lxml import etree
from lxml.etree import fromstring

if request.POST:
    parser = etree.XMLParser(ns_clean=True, recover=True)
    h = fromstring(request.POST['xml'], parser=parser)
    return HttpResponse(h.cssselect('itagg_delivery_receipt status').text_content()) 
```

但它给出了这个错误：

```
[Fri Apr 05 10:27:54 2013] [error] Internal Server Error: /sms/status_postback/
[Fri Apr 05 10:27:54 2013] [error] Traceback (most recent call last):
[Fri Apr 05 10:27:54 2013] [error]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 115, in get_response
[Fri Apr 05 10:27:54 2013] [error]     response = callback(request, *callback_args, **callback_kwargs)
[Fri Apr 05 10:27:54 2013] [error]   File "/usr/local/lib/python2.7/dist-packages/django/views/decorators/csrf.py", line 77, in wrapped_view
[Fri Apr 05 10:27:54 2013] [error]     return view_func(*args, **kwargs)
[Fri Apr 05 10:27:54 2013] [error]   File "/srv/project/livewireSMS/sms/views.py", line 42, in update_delivery_status
[Fri Apr 05 10:27:54 2013] [error]     h = fromstring(request.POST['xml'], parser=parser)
[Fri Apr 05 10:27:54 2013] [error]   File "lxml.etree.pyx", line 2754, in lxml.etree.fromstring (src/lxml/lxml.etree.c:54631)
[Fri Apr 05 10:27:54 2013] [error]   File "parser.pxi", line 1569, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:82659)
[Fri Apr 05 10:27:54 2013] [error] ValueError: Unicode strings with encoding declaration are not supported. 
```

这是 XML

```
 <?xml version="1.1" encoding="ISO-8859-1"?>
<itagg_delivery_receipt>
<version>1.0</version>
<msisdn>447889000000</msisdn>
<submission_ref>
845tgrgsehg394g3hdfhhh56445y7ts6</
submission_ref>
<status>Delivered</status>
<reason>4</reason>
<timestamp>20050709120945</timestamp>
<retry>0</retry>
</itagg_delivery_receipt> 
```

我无法控制来自 SMS 公司的 xml 文档。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-05T09:41:30.573

您必须对其进行编码，然后在解析器中强制使用相同的编码：

```
from lxml import etree
from lxml.etree import fromstring

if request.POST:
    xml = request.POST['xml'].encode('utf-8')
    parser = etree.XMLParser(ns_clean=True, recover=True, encoding='utf-8')
    h = fromstring(xml, parser=parser)

    return HttpResponse(h.cssselect('delivery_reciept status').text_content()) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-07-07T11:24:07.267

[kernc](https://gist.github.com/karlcow/3258330#gistcomment-769151)的以下解决方案对我有用：

```
from lxml import etree

xml = u'<?xml version="1.0" encoding="utf-8" ?><foo><bar/></foo>'
xml = bytes(bytearray(xml, encoding='utf-8'))  # ADDENDUM OF THIS LINE (when unicode means utf-8, e.g. on Linux)
etree.XML(xml)

# <Element html at 0x5b44c90> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-04-23T06:10:05.207

比上面的答案更简单：

```
from lxml import etree

#Do request for data, response = r#
data = etree.fromstring(bytes(r.text, encoding='utf-8')) 
```

抱歉，当时我还年轻，愚蠢，还不够成熟，无法努力解释我的答案（我也没有真正的知识）

*   `fromstring()`是作为库`etree`一部分的对象的自定义构造函数`lxml`
*   字符串形式的 XML 可能包含未编码的字符，该构造函数希望它们如何编码 -> 因此您可以将它们编码为`utf-8`字节，这将符合`fromstring()`构造函数的要求

# c# - 我们可以从 SSIS 包调用 Restful WCF 服务吗

> ID：15830422
> 
> 赞同：2
> 
> 时间：2013-04-05T09:32:00.100
> 
> 标签：c#, wcf, rest, ssis

我有一个 SSIS 包，我需要从中调用一个作为 REST 公开的 WCF 服务。是否可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:07:30.517

这是了解[如何配置 SSIS 包以访问 wcf 服务的链接](http://blogs.msdn.com/b/dbrowne/archive/2010/07/08/how-to-configure-an-ssis-package-to-access-a-web-service-using-wcf.aspx)

# excel - 需要通过 VBA 将公式结果大于或等于 10 的单元格加粗

> ID：15830425
> 
> 赞同：1
> 
> 时间：2013-04-05T09:32:07.897
> 
> 标签：excel, excel-2010, vba

我需要对公式结果为 10 或更多的特定范围内的所有单元格应用**粗体。**我已经尝试了以下代码，但它似乎随机应用粗体！

```
Sub BoldHighHours()

Application.ScreenUpdating = False
Dim c As Object

For Each c In Range("I7:AM1005")
   If c.Value >= 10 Then
       c.Offset(0, 1).Font.Bold = True
       c.Offset(0, 2).Font.Bold = True
   Else
       c.Offset(0, 1).Font.Bold = False
       c.Offset(0, 2).Font.Bold = False
   End If
Next
Application.ScreenUpdating = True
End Sub 
```

如果您一直关注我以前的问题/传奇，您就会明白为什么我不能使用条件格式！自动过滤器对大量的条件格式不友好，并且大大降低了速度！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:30:09.553

您需要删除`Offset()`：

```
Sub BoldHighHours()

    Application.ScreenUpdating = False 
    Dim c As Range 

    For Each c In Range("I7:AM1005") 

        If c.Value >= 10 Then 
            c.Font.Bold = True
        Else 
            c.Font.Bold = False 
        End If 

    Next 
    Application.ScreenUpdating = True 

End Sub 
```

**我的优化：**

```
Sub BoldHighHours()

    Application.ScreenUpdating = False 
    Dim c As Long

    For Each c = 9 to 39 ' hopefully i to am..

        ActiveSheet.AutoFilterMode = False

        With Range("A8:A1005").Offset(0, c - 1)

            .Font.Bold = False
            .AutoFilter Field:=1, Criteria1:=">=10"
            .Font.Bold = True
        End With 

    Next 

    ActiveSheet.AutoFilterMode = False
    Application.ScreenUpdating = True 

End Sub 
```

# c++ - 如何使用 boost::function 参数将 lambda 传递给被覆盖的方法？

> ID：15830427
> 
> 赞同：2
> 
> 时间：2013-04-05T09:32:13.883
> 
> 标签：c++, visual-studio-2010, boost, c++11, lambda

我有一个类，其构造函数定义如下：

```
LambdaJSONVisitor();
LambdaJSONVisitor(boost::function<void (const Value &)> f);
LambdaJSONVisitor(boost::function<void (const Object &)> f);
LambdaJSONVisitor(boost::function<void (const KeyValuePair &)> f);
LambdaJSONVisitor(boost::function<void (const Array &)> f); 
```

我正在尝试构建一个像这样的对象：

```
LambdaJSONVisitor setNodeIDVisitor([&](const JSONAPI::Value &val) -> void
{
    ...
}); 
```

当我尝试编译它时，我收到以下编译器错误：

```
4>netmodel\CNetworkAlarmBuilder.cpp(60): error C2668: 'JSONAPI::LambdaJSONVisitor::LambdaJSONVisitor' : ambiguous call to overloaded function
4>          C:\workspace\client\projects\JSONParser\API/LambdaJSONVisitor.h(21): could be 'JSONAPI::LambdaJSONVisitor::LambdaJSONVisitor(boost::function<Signature>)'
4>          with
4>          [
4>              Signature=void (const JSONAPI::Array &)
4>          ]
4>          C:\workspace\client\projects\JSONParser\API/LambdaJSONVisitor.h(20): or       'JSONAPI::LambdaJSONVisitor::LambdaJSONVisitor(boost::function<Signature>)'
4>          with
4>          [
4>              Signature=void (const JSONAPI::KeyValuePair &)
4>          ]
4>          C:\workspace\client\projects\JSONParser\API/LambdaJSONVisitor.h(19): or       'JSONAPI::LambdaJSONVisitor::LambdaJSONVisitor(boost::function<Signature>)'
4>          with
4>          [
4>              Signature=void (const JSONAPI::Object &)
4>          ]
4>          C:\workspace\client\projects\JSONParser\API/LambdaJSONVisitor.h(18): or       'JSONAPI::LambdaJSONVisitor::LambdaJSONVisitor(boost::function<Signature>)'
4>          with
4>          [
4>              Signature=void (const JSONAPI::Value &)
4>          ]
4>          while trying to match the argument list '(`anonymous-namespace'::<lambda1>)' 
```

是否可以将 lambda 作为参数传递给这样的重写构造函数？如果是这样，我做错了什么，我应该如何更改代码以使其工作？我正在使用 Visual Studio 2010。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:42:58.353

只有当有派生类型时它才起作用[示例](http://liveworkspace.org/code/9YSdj%2411)这可以通过创建对象并将其转换为正确的类型来解决，例如

```
auto lambda = [&](const C&) {};
Func f(static_cast<std::function<void(const C&)>>(lambda)); 
```

或不创建对象

```
Func f(static_cast<std::function<void(const C&)>>(
[&](const C&) {}); 
```

[例子](http://liveworkspace.org/code/9YSdj%2417)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:21:56.210

使用一些胶水代码，您可以让编译器找出 lambda 的参数类型并调用相应的构造函数，而无需显式转换。但是，您唯一需要的是至少为您的访问者提供一个移动构造函数。

第一步：制作一个“模板化”的构造函数。我想， LambdaJSONVisitor 不能改变，所以你需要一个辅助函数：

```
template <class Arg>
LambdaJSONVisitor createLJV_Arg(std::function<void(const Arg&)> f)
{ return LambdaJSONVisitor(f); } 
```

您现在可以通过显式提供模板参数来调用该函数：

```
LambdaJSONVisitor v = createLJV_Arg<Value>( [](Value const&){} );
                                 // ^-- explicitly state the type 
```

第二步：创建一个模板元编程函数，确定 lambda 的参数类型并将其显式传递给第一个函数。示例可以在[这里](https://stackoverflow.com/questions/4482646/is-there-a-way-to-deduce-the-signature-of-a-lambda-as-an-mpl-sequence)找到：

```
template <class F>
LambdaJSONVisitor createLJV(F&& f)
{
   typedef boost::function_types::parameter_types<decltype(&F::operator())>::type args_t;
   typedef boost::mpl::at<args_t, boost::mpl::int_<1>>::type arg1_t;

   return createLJV_Arg<arg1_t>(std::forward<F>(f));
} 
```

然后就

```
LambdaJSONVisitor v = createLJV( [](Value const&){} ); 
```

当然，如果您*可以*修改`LambdaJSONVisitor`，则只给它一个模板化构造函数，并在其中进行 lambda 的参数类型推导。

# python - Python 3.3 Threading.Semaphore 不接受详细参数

> ID：15830428
> 
> 赞同：1
> 
> 时间：2013-04-05T09:32:14.527
> 
> 标签：python, python-3.x, billiards

我有个问题。我想在 python 3.3 上使用 celery，我已经安装了这个数据包，它工作正常。但是如果我运行它，台球库中有问题。第一个问题是他不知道库_subproces。现在我已将其更改为 _winapi，现在它可以工作了。但现在我有另一个问题。在 Python 3.3 上 Threading.Semaphor 不接受详细参数。

```
[2013-04-05 11:21:22,468: ERROR/MainProcess] Unrecoverable error: TypeError('__i
nit__() takes from 1 to 2 positional arguments but 3 were given',)
Traceback (most recent call last):
  File "C:\Python33\lib\site-packages\celery\worker\__init__.py", line 205, in s
tart
    self.namespace.start(self)
  File "C:\Python33\lib\site-packages\celery\bootsteps.py", line 119, in start
    step.start(parent)
  File "C:\Python33\lib\site-packages\celery\bootsteps.py", line 352, in start
    return self.obj.start()
  File "C:\Python33\lib\site-packages\celery\concurrency\base.py", line 112, in
start
    self.on_start()
  File "C:\Python33\lib\site-packages\celery\concurrency\processes.py", line 81,
 in on_start
    **self.options)
  File "C:\Python33\lib\site-packages\billiard-2.7.3.23-py3.3.egg\billiard\pool.
py", line 834, in __init__
    self._putlock = semaphore or LaxBoundedSemaphore(self._processes)
  File "C:\Python33\lib\site-packages\billiard-2.7.3.23-py3.3.egg\billiard\pool.
py", line 136, in __init__
    _Semaphore.__init__(self, value, verbose)
TypeError: __init__() takes from 1 to 2 positional arguments but 3 were given 
```

有没有人有解决这个问题的想法？？？

# yii - 如何将 CGridView 转换为 PDF

> ID：15830437
> 
> 赞同：1
> 
> 时间：2013-04-05T09:32:35.093
> 
> 标签：yii, pdf-generation, fpdf, cgridview

我尝试使用 FPDF 扩展 pdf-grid，但不能完全支持 CSqlDataProvider，如果我隐藏 Grid 的标题，那么它就可以工作。但我想与标题一起使用。是否有任何想法来获取 Grid 的标题，或者是否有任何其他 Cgridview 扩展与 Csqldataprovider

# android - “您已经授权”Facebook页面

> ID：15830438
> 
> 赞同：2
> 
> 时间：2013-04-05T09:32:36.017
> 
> 标签：android, facebook, login

是的，我也面临同样的问题，当我在 mjyandroid 应用程序中按下“通过 facebook 登录”时，我收到一个带有消息“你已经授权”的页面，但它对其他用户工作正常，仅适用于我（我我正面临这个问题）。你能告诉我，如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:33:50.230

截至今天，看起来我们的每个用户在我们的 iOS 应用程序上都有相同的行为。这始于一些用户向看到这一点的更大（全部？）用户提及行为变化。显然，这是新的 FB 应用程序授权工作流程，似乎只影响那些通过内联登录表单（即较旧的 FB SDK）或通过 Safari 浏览器的应用程序（再次......我唯一的经验是在 iOS边）。请将此作为缺陷记录在 Fb 错误跟踪站点上。

# javascript - 为什么我会收到“无法从已释放的脚本中执行代码”

> ID：15830442
> 
> 赞同：4
> 
> 时间：2013-04-05T09:32:59.960
> 
> 标签：javascript

首先：是的，我已经阅读[了这个答案](https://stackoverflow.com/questions/5812180/cant-execute-code-from-a-freed-script-ie6-ie7-ie8-ie9)......而且，是的，脚本之后没有元数据（因为我的页面上没有任何元数据），并且，不，没有超时或ajax请求

我有以下辅助方法（是的，我可以制作一个原型方法......）：

```
function removeElementFromArray(array, compareMethod) {
    if (!array) {
        return;
    }
    if (!$.isFunction(compareMethod)) {
        return;
    }
    var index = getIndexOfElement(array, compareMethod);
    if (index < 0) {
        return;
    }
    array.splice(index, 1);
}
function getIndexOfElement(array, compareMethod) {
    if (!array) {
        return -1;
    }
    if (!$.isFunction(compareMethod)) {
        return -1;
    }
    for (var i = 0; i < array.length; i++) {
        var element = array[i];
        if (compareMethod(element)) {
            return i;
        }
    }
    return -1;
} 
```

我打电话给这个：

```
$foo.on('click', function () {
    removeElementFromArray(window.myArray, function (element) {
        return // some condition
    });
}); 
```

我在以下行中收到异常“SCRIPT5011：无法从释放的脚本中执行代码”（仅在 IE 渲染模式 < 10 中）：

```
array.splice(index, 1); 
```

但不是在第一次调用时，而是在任何后续调用时（对于同一个数组）......

但是我想不出这个异常发生的单一原因，因为我正在其他行以及调用堆栈中访问数组（如您所见，例如 getIndexOfElement，我在其中迭代数组）。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:08:57.190

[这个问题](https://stackoverflow.com/questions/83132/what-causes-the-error-cant-execute-code-from-a-freed-script)包含关于 iframe 关系的一个很好的答案。（添加为 OP 建议的答案）。

# ios - 遍历 UICollectionView 中的所有单元格

> ID：15830444
> 
> 赞同：12
> 
> 时间：2013-04-05T09:33:03.557
> 
> 标签：ios, ios6, uicollectionview, uicollectionviewcell

我有一个`UICollectionView`并且我想为每个单元格添加动画。

目前我正在使用

```
for(UICollectionView *cell in collectionView.visibleCells){
  //add animation to cell here
} 
```

但这只会将动画应用于可见单元格，一旦我向下滚动并且单元格不再可见，动画就会停止。

我如何循环遍历中的所有单元格`UICollectionView`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T09:49:19.853

我可能会以不同的方式解决这个问题。如果你想让单元格动画，你可以设置一个 property `shouldAnimate = YES`。然后`collectionView:cellForItemAtIndexPath:`检查该属性并在需要时应用动画（或删除它）。

设置属性后，仅重新加载 visibleCells: `[collectionView reloadItemsAtIndexPaths:collectionView.indexPathsForVisibleItems]`。

现在，由于动画是在通过数据源协议请求单元格时提供的，因此您也可以在滚动时获得动画。

# mysql - 我可以有两行除了 1 列之外的内容相同吗

> ID：15830445
> 
> 赞同：0
> 
> 时间：2013-04-05T09:33:06.120
> 
> 标签：mysql

我建立了一个数据库并存储了通行证等信息。现在我正在逐步更新通行证。我编辑了通行证表的 1 列。我可以这样做吗？还是错了？![通过表](https://i.stack.imgur.com/QjLsg.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:00:33.143

首先从表中获取max(updateTag)，然后执行如下查询

```
Select serialNo from table where updateTag = <Max update flag obtained in previous query> 
```

# php - 在 PHP 中使用 Services_JSON 和 json_encode 进行 JSON 编码，使用 jQuery ajax 调用返回空对象

> ID：15830446
> 
> 赞同：0
> 
> 时间：2013-04-05T09:33:06.217
> 
> 标签：php, javascript, jquery, json

```
 $.ajax({
                url: '/ajax/get_rule.php',
                dataType: 'json',
                data: {                 
                    feature : feature,
                    ajax : 1
                },
                success: function(resp) {
                    console.log('in here');
                    console.log('response: ' + resp);

                },
                error : function() {
                    console.log('there was an error...');
                }
            }); 
```

我正在使用 PHP PEAR [Services_JSON](http://pear.php.net/pepr/pepr-proposal-show.php?id=198)类将我的数组编码为 JSON 字符串，然后在响应中回显，如下所示：

```
echo Registry('json')->encode(array('ajax' => 1, 'feature' => 'rfc1872'));
exit; 
```

在上面的例子`Registry('json')`中是一个`Services_JSON`对象。

我也尝试过 PHP 内置函数`json_encode`：

```
echo json_encode(array('ajax' => 1, 'feature' => 'rfc1872'));
exit; 
```

这些都不起作用，虽然我没有陷入上面的 jQuery ajax 调用中的错误回调，但我`response: [object Object]`在 Firebug 中得到了一个空对象的响应值。

为什么我不会收到对带有 JSON 编码字符串的 jQuery 代码的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:37:53.793

正如 Felix King 在上面的评论中提供的那样，这实际上是由于将 the 强制转换`resp`为字符串造成的：

```
console.log('response: ' + resp) 
```

更改为：

```
console.log(resp); 
```

解决了这个问题。

# node.js - 如何使用 Node.JS 的 restify 框架解析/读取多个参数

> ID：15830448
> 
> 赞同：29
> 
> 时间：2013-04-05T09:33:10.193
> 
> 标签：node.js, query-string, request.querystring, querystringparameter, restify

**场景**：我们的开发人员正在尝试用 Node.JS Restful API 替换 Web 服务（用 C#.Net 编写）。

**问题**：现在我们需要按原样处理传入的请求（我们无法控制它）。所以下面是传入 URL 的格式：

> http://www.website.com/Service.aspx?UID=Trans001&FacebookID=ae67ea324&GetDetailType=FULL

我能够处理这样的 URL：

> http://www.website.com/service/Trans001/ae67ea324/FULL

我可以从上面的 URL 解析/读取参数

代码：

```
var server = require('restify').createServer();
function respond(req, res, next) {
    console.log("req.params.UID:" + req.params.UID);
    console.log("req.params.FacebookID:" + req.params.FacebookID);
    console.log("req.params.GetDetailType" + req.params.GetDetailType);
}
server.get('/service/:UID/:FacebookID/:GetDetailType', respond);
server.listen(8080, function () {
    console.log('%s listening at %s', server.name, server.url);
}); 
```

**问题**：如何从格式如下的 URL 中读取多个参数`http://www.website.com/Service.aspx?UID=Trans001&FacebookID=ae67ea324`

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-05-06T22:17:03.677

您只需要像这样加载查询解析器插件；

```
server.use(restify.plugins.queryParser()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-14T12:08:41.220

**Restify 5（2017）答案：**

从 restify 5 开始，您现在可以像这样设置查询解析器 `server.use(restify.plugins.queryParser());`：

如果你使用这个插件，你可以在`req.query`.

有关其他选项和信息，请查看 restify 文档：[http ://restify.com/docs/plugins-api/#queryparser](http://restify.com/docs/plugins-api/#queryparser)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-15T10:48:19.627

西蒙的回答不再有效，因为 restify 的 queryParser 已移至 restify-plugins 包。更新的解决方案是

```
server.use(require('restify-plugins').queryParser()); 
```

# javascript - 如何定位交替的奇数/偶数文本行

> ID：15830449
> 
> 赞同：7
> 
> 时间：2013-04-05T09:33:10.757
> 
> 标签：javascript, jquery, css

假设我有一个`p`元素或`div`元素的文本大约有 10-15 行，现在我的客户对此有一个奇怪的调用，他需要具有不同文本颜色的奇数/偶数行。说第 1 行 - 黑色，所以第 2 行应该是灰色，第 3 行应该再次是黑色等等......

所以我决定使用跨度并改变颜色，但可变分辨率在这里杀死了东西，我知道`:first-line`选择器（在这种情况下这不会有用），也像`:odd`&这样的选择器`:even`将被排除在这里，因为我不使用表格，所以有什么方法可以使用 CSS 实现这一点，还是需要使用 jQuery？

> TL; DR：我想定位段落或 div 中的奇数/偶数行

我需要一个 CSS 解决方案，如果没有，欢迎使用 jQuery 和 JavaScript

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T10:24:16.390

## 演示 1

[http://jsfiddle.net/Fptq2/2/](http://jsfiddle.net/Fptq2/2/)
[应该适用于所有现代浏览器。]

本质上它：

1.  将源拆分为单个单词一次
2.  将每个单词包装在一个跨度中（丑陋但有效- 现在可以将*任何样式应用于跨度）*
3.  使用简单的位置计算来确定元素是否低于前一个
4.  根据索引更改更改颜色
5.  在调整大小时执行 #3-5（这绝对应该被限制！）

```
$(".stripe").each(function(){
  var obj = $(this);
  var html = obj.html().replace(/(\S+\s*)/g, "<span>$1</span>");
  obj.html(html);
});

function highlight(){
    var offset = 0;
    var colorIndex = 0;
    var colors = ["#eee","#000"];
    var spans = $(".stripe span");

    // note the direct DOM usage here (no jQuery) for performance
    for(var i = 0; i < spans.length; i++){
        var newOffset = spans[i].offsetTop;  

        if(newOffset !== offset){
            colorIndex = colorIndex === 0 ? 1 : 0;
            offset = newOffset;
       }

       spans[i].style.color = colors[colorIndex];
    }
}

highlight();
$(window).on("resize", highlight); 
```

## 演示 2

**小提琴：http:** [//jsfiddle.net/Fptq2/4/](http://jsfiddle.net/Fptq2/4/)

*   使用更大的文本块
*   显示应用于多个元素的效果
*   缓存“所有跨度”选择器
*   添加调整大小限制

```
(function () {
    $(".stripe").each(function () {
        var obj = $(this);
        var html = obj.html().replace(/(\S+\s*)/g, "<span>$1</span>");
        obj.html(html);
    });

    var offset = 0;
    var colorIndex = 0;
    var colors = ["#ccc", "#000"];
    var spans = $(".stripe span");

    function highlight() {
        for (var i = 0; i < spans.length; i++) {

            var newOffset = spans[i].offsetTop;
            if (newOffset !== offset) {
                colorIndex = colorIndex === 0 ? 1 : 0;
                offset = newOffset;
            }

            spans[i].style.color = colors[colorIndex];
        }
    }

    highlight(); // initial highlighting

    var timeout;
    function throttle(){
        window.clearTimeout(timeout);
        timeout = window.setTimeout(highlight, 100);
    }

    $(window).on("resize", throttle);
})(); 
```

## 输出

![在此处输入图像描述](https://i.stack.imgur.com/L9wkR.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T09:53:36.717

这是一种可能的解决方案。它生成许多`<div>`放置在文本后面的元素。`<div>`元素从父容器继承字体大小，因此不应损坏标记。

*HTML：*

```
<div id="test">Lorem ipsum ...</div> 
```

*JavaScript：*

```
var div = document.getElementById("test"),
    layer = document.createElement("div"),
    text = div.innerHTML,
    lineHeight;

layer.appendChild(document.createTextNode("\u00A0"));
div.insertBefore(layer, div.firstChild);

lineHeight = layer.offsetHeight;
div.style.position = "relative";
div.style.overflow = "hidden";
div.style.color = "transparent";
layer.style.position = "absolute";
layer.style.zIndex = "-1";

window.addEventListener("resize", (function highlight() {
    while (layer.firstChild)
        layer.removeChild(layer.firstChild);

    for (var i = 0, n = Math.ceil(div.offsetHeight / lineHeight); i < n; i++) {
        var line = document.createElement("div"),
            block = document.createElement("div");

        line.style.height = lineHeight + "px";
        line.style.color = i % 2 ? "#ccc" : "#aaa";
        line.style.overflow = "hidden";

        block.innerHTML = text;
        block.style.marginTop = -i * lineHeight + "px";

        line.appendChild(block);
        layer.appendChild(line);
    }
    return highlight;
})(), false); 
```

**演示：http:** [//jsfiddle.net/M3pdy/2/](http://jsfiddle.net/M3pdy/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-10T16:58:46.633

回答这个问题为时已晚.. 但是如果这个答案对想要将换行的文本段落分成单独的行的其他人有所帮助，那么我很高兴
将换行的文本转换为行（用于行编号或将每行分成单独的行）元素）是一个经常出现在板上的问题，我终于有必要这样做了，所以在这里（对于 MooTools 和 jQuery - jQuery 版本未经测试，所以如果有任何问题请离开一条评论）。这个特殊的化身将每个包裹的行分成一个不同的新元素，但可以修改为只计算行数。
使用代码你可以实现 `$("#someElement").linify()`
这里下面的 URL 是这个
[jquery-mootools的概念证明](http://upshots.org/javascript/jquery-mootools-wrapped-text-to-lines)

这是一个快速小提琴，它演示了单个 div 项的包装文本行。
[http://jsfiddle.net/UANeP/](http://jsfiddle.net/UANeP/)

# r - 连接和分组两个数据表

> ID：15830451
> 
> 赞同：3
> 
> 时间：2013-04-05T09:33:16.350
> 
> 标签：r, data.table

假设我有以下两个数据表：

```
dt1 <- data.table(id=1:3,val1=c("a","a","b"),key="id")
#    id val1
# 1:  1    a
# 2:  2    a
# 3:  3    b

dt2 <- data.table(id=c(1:3,1:2),val2=10:14,key="id")
#    id val2
# 1:  1   10
# 2:  1   13
# 3:  2   11
# 4:  2   14
# 5:  3   12 
```

假设这`dt1`是一个由他们识别的人的列表`id`，以及`dt2`对这些人的观察列表，与通讯员`id`。

现在，我想计算`val2`每组`val1`. 我知道我可以通过以下方式做到这一点：

```
dt1[dt2][,mean(val2),by=val1]
#    val1 V1
# 1:    a 12
# 2:    b 12 
```

但我也在常见问题解答（第 1.14 节）中读到它效率不高（至少对于非常大的数据表）。

那么，有没有更好、更有效的方法呢？

**编辑：**另一个相关问题：我刚刚看到以下两行将给出相同的结果：

```
dt1[dt2][,mean(val2),by=val1]
dt2[dt1][,mean(val2),by=val1] 
```

它们是等效的还是两者之间有区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:43:31.620

在你的情况下，这样做是可以的。iiuc 文档解释的内容例如在这种情况下（您没有对所有列进行分组/聚合）：

```
dt1 <- data.table(id=1:3,val1=c("a","a","b"),key="id")
dt2 <- data.table(id=c(1:3,1:2),val2=10:14,key="id")

dt2[, val3 := rep(5:7, c(2,1,2))]
#    id val2 val3
# 1:  1   10    5
# 2:  1   13    5
# 3:  2   11    6
# 4:  2   14    7
# 5:  3   12    7 
```

现在，假设您想`val2`为每个 获得单独的平均值`val1`，那么连接所有列是没有意义的。在这种情况下，您可以这样做：

```
dt1[dt2, list(val1, val2)][, mean(val2), by=val1]
#    val1 V1
# 1:    a 12
# 2:    b 12 
```

而不是这样做：

```
# gives same result but performs join on all columns
dt1[dt2][, mean(val2), by=val1] 
```

* * *

对于您的第二个问题，我想了解差异`dt1[dt2]`和`dt2[dt1]`. 为此，您的数据并不是最好的例子。假设，

```
dt1 <- data.table(id=c(1,4,5), val1=c("a","a","b"))
dt2 <- data.table(id=c(1,2,3,6,7,8), val2=c(6,5,3,4,2,1))

setkey(dt1, "id")
setkey(dt2, "id") 
```

`dt1[dt2]`为每个`id`in`dt2`获取并获取所有其他列的相应值`dt1`以执行连接：

```
dt1[dt2]
#    id val1 val2
# 1:  1    a    6
# 2:  2   NA    5
# 3:  3   NA    3
# 4:  6   NA    4
# 5:  7   NA    2
# 6:  8   NA    1 
```

`dt2[dt1]`从其他列中获取对应值`id`中的每个 来执行连接：`dt1``dt2`

```
dt2[dt1]
#    id val2 val1
# 1:  1    6    a
# 2:  4   NA    a
# 3:  5   NA    b 
```

请注意，中的值*仅*`dt1[dt2]`包含的 id 。同样仅包含. 在您的情况下，由于s 完全相同（忽略它们发生的次数），因此两个连接都会为您提供相同的连接（列的顺序除外），iiuc。*`dt2``dt2[dt1]``dt1``id`*

 ** * *

只是为了使这部分完整，如果您想要“完整”连接，请使用`merge`with `all=TRUE`。该`merge.data.table`方法已实现。

```
merge(dt1, dt2, all = TRUE)

merge(dt1, dt2, all.x = TRUE) 
# is equivalent to
dt2[dt1]

merge(dt1, dt2, all.y = TRUE)
# is equivalent to
dt1[dt2] 
```*

# javascript - 当标签包含重复的“ID”属性时调用 JS 函数

> ID：15830452
> 
> 赞同：0
> 
> 时间：2013-04-05T09:33:17.650
> 
> 标签：javascript, asp.net

我想调用一个 JS 函数，这样当我单击文本框时我可以获取 jquery 日历，但它显示错误。我想知道如何将属性用于 txtExpiry 和 datapicker？还是有其他方法？

这是我的文本框的代码

```
<asp:TextBox ID="txtExpiray"  runat="server" ID="datepicker" ClientIDMode="Static"  Width="70px"></asp:TextBox> 
```

这是我的功能

```
<script type='text/javascript'>
         $(function () {
             $('#datepicker').datepicker();
         });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:35:20.620

您不能使用重复的 ID 属性 - 甚至不能使用重复的属性（页面的 ID 属性应该是唯一的）。

你可以这样做：

```
<asp:TextBox ID="txtExpiray"  runat="server" ClientIDMode="Static"  Width="70px"></asp:TextBox>

<script type='text/javascript'>
         $(function () {
             $('#txtExpiray').datepicker();
         });
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:37:50.637

您可以将日期选择器附加到您想要的所有 jQuery 选择器上...

例如 ：

```
<asp:TextBox ID="txtExpiray"  runat="server" js='datepicker' ClientIDMode="Static"  Width="70px"></asp:TextBox> 
```

在 JS 中

```
<script type='text/javascript'>
     $(function () {
         $('[js="datepicker"]').datepicker();
     });
</script> 
```

所以你可以使用类，或者你想要的任何属性。

# javascript - mootools .bind 功能不起作用

> ID：15830457
> 
> 赞同：0
> 
> 时间：2013-04-05T09:33:41.323
> 
> 标签：javascript, pagination, mootools, lazy-loading

这是我的页面： [http ://www.ba.lt/c3150/Seseliai-akims](http://www.b-a.lt/c3150/Seseliai-akims)

在这个页面中，我使用了 mootools 插件lazypagination

[http://mootools.net/forge/p/lazypagination](http://mootools.net/forge/p/lazypagination)

在 FF Chrome 和 IE9+ 中一切正常，但在 IE7 中，惰性分页类中的 IE8 绑定功能不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:50:44.863

IE7 和 IE8 不支持绑定功能。

之前已经回答了同样的问题 [How to handle lack of JavaScript Object.bind() method in IE 8](https://stackoverflow.com/questions/11054511/how-to-handle-javascript-bind-method-missing-in-ie-8)

在我的情况下，我使用的是 jQuery，因此使用 $.proxy() 方法结束，该方法返回一个新函数，该函数的上下文为“this”，该函数设置为您传入的对象。不知道 Mootools 是否有等价物功能。

# java - 以编程方式将文件上传到 SalesForce

> ID：15830460
> 
> 赞同：5
> 
> 时间：2013-04-05T09:33:42.803
> 
> 标签：java, web-services, rest, salesforce

我建立了一个在销售人员中创建案例的流程。现在，我正在尝试以编程方式将文件上传到该案例。基本上，客户端在服务器中手动上传文件。现在的问题是我如何通过基于 java rest 的 web 服务上传它。最好有任何描述该主题的链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:37:23.747

首先尝试阅读以下文档：
**请参阅以下内容：**
[http ://www.salesforce.com/in/?ir=1](http://www.salesforce.com/in/?ir=1)
**API 文档： http:**
[//www.salesforce.com/us/developer/docs/api/Content /sforce_api_objects_document.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_document.htm)
**示例：**
[http ://login.salesforce.com/help/doc/en/fields_useful_field_validation_formulas.htm](http://login.salesforce.com/help/doc/en/fields_useful_field_validation_formulas.htm)

以下代码允许您将物理文件上传到 Salesforce.com 并将其附加到记录中。
**代码：**

```
 try {

        File f = new File("c:\java\test.docx");
        InputStream is = new FileInputStream(f);
        byte[] inbuff = new byte[(int)f.length()];        
        is.read(inbuff);

        Attachment attach = new Attachment();
        attach.setBody(inbuff);
        attach.setName("test.docx");
        attach.setIsPrivate(false);
        // attach to an object in SFDC 
        attach.setParentId("a0f600000008Q4f");

        SaveResult sr = binding.create(new com.sforce.soap.enterprise.sobject.SObject[] {attach})[0];
        if (sr.isSuccess()) {
            System.out.println("Successfully added attachment.");
        } else {
            System.out.println("Error adding attachment: " + sr.getErrors(0).getMessage());
        }

    } catch (FileNotFoundException fnf) {
        System.out.println("File Not Found: " +fnf.getMessage());

    } catch (IOException io) {
        System.out.println("IO: " +io.getMessage());            
    } 
```

请试试这个，如果有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T14:07:13.567

上一个答案给出了文档而不是附件的 API 文档。附件的 API 文档是：http: [//www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_attachment.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_attachment.htm)

# paypal - Paypal 订阅按钮在每个月的第一天收费

> ID：15830461
> 
> 赞同：0
> 
> 时间：2013-04-05T09:33:43.210
> 
> 标签：paypal, wordpress, paypal-subscriptions

我是编程和创建 Paypal 支付按钮的新手，我想在我的计划中使用订阅按钮。

我有一项每月销售 2,500 日元的服务，我想在每个月的第一天收费。

如果客户在月中购买服务，我想按天收费。

例如，如果他们在 4 月 5 日付款，他们在 4 月 5 日支付 2,166 日元（2,500 除以 30 天，乘以 26 天）。他们每个月的第一天支付2,500日元。

任何后续帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:55:37.190

您必须使用非托管的明文 PayPal 按钮，这样您就可以动态修改变量。然后，您必须在代码中构建逻辑以正确计算计费条款和金额，然后让它们动态填充订阅按钮中的变量。

# ios - 为 iOS 设置 Frank 时的问题

> ID：15830462
> 
> 赞同：2
> 
> 时间：2013-04-05T09:33:44.387
> 
> 标签：ios, objective-c, cucumber, frank

在我的 iOS 项目中设置 Frank 时遇到问题。我按照说明在控制台中执行：

```
sudo gem install frank-cucumber -V 
```

我得到的是：

```
 ERROR:  Error installing frank-cucumber:
         activesupport requires i18n (= 0.6.1, runtime) 
```

我不知道可能出了什么问题。我使用以下方法检查了宝石：

```
gem list --local 
```

并得到：

```
i18n (0.6.4) 
```

你知道可能出了什么问题吗？感谢您的每一个回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:02:57.117

看起来`activesupport`需要的版本与您安装的版本不匹配。

我会尝试一下`gem update`，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:58:59.813

令人惊讶的是，通过安装 Rails 解决了这个问题。

```
gem install rails 
```

可能是它更新了弗兰克需要的宝石。也许像tapi建议的那样积极支持，但我不能肯定地说。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T15:31:24.870

尝试安装所需的版本：

```
gem install i18n -v 0.6.1 
```

如果仍然有问题，请卸载以前的版本，方法是：

```
gem uninstall i18n -v 0.6.4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-21T07:59:19.310

对我来说，我的机器上有两个版本的 ruby​​，`1.8.7`并且`1.9.3`.. 我的默认设置是`1.8.7`（不要问为什么）.. 所以我只是切换到 ruby `1.9.3`​​，这个问题就消失了

检查哪个红宝石版本：

```
ruby -v 
```

如果不是 1.9.3 切换到它

```
rvm use 1.9.3 
```

如果你没有安装 1.9.3 安装它

```
rvm install 1.9.3 
```

对于未来，我建议将 1.9.3 设置为默认值：

```
rvm --default 1.9.3 
```

# jquery - 使用 jQuery 获取动态背景位置

> ID：15830469
> 
> 赞同：0
> 
> 时间：2013-04-05T09:33:56.920
> 
> 标签：jquery, css

我正在尝试在网站上实现视差滚动效果（使用Smashing Magazine 中的[本教程](http://coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/)）。视差效果运行良好，但我需要让其中一个精灵在到达某个点时停止滚动。默认情况下，它会继续滚动，直到看不见为止。

视差效果通过动画元素的背景位置来工作。我正在尝试使用以下代码获取动态背景位置：

```
jQuery(function($) {

            var elem = $("#heart-box");

            var backgroundPos = $(elem).css("backgroundPosition").split(" ");

            var xPos = backgroundPos[0],
                yPos = backgroundPos[1];

            $(window).scroll(function() {

                console.log(yPos);

                if ( yPos >= 210 ) {
                    $(elem).hide();
                }
            });

        }); 
```

相反，仅返回起始位置，如 CSS 中定义的那样，并且在页面滚动时不会在控制台日志中更改。

当页面滚动时，背景 Y 位置会动态改变 - 其范围大约是 -200px 开始，到 400px 结束。当背景 Y 位置达到 210px 时，我希望元素具有 210px 的固定背景位置，而不是一直滚动。

任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:44:37.527

返回初始值，因为在回调`yPos`之外设置为 backgroundPosition 的值。`scroll`在 Javascript 中，只有对象通过引用传递，因此当您从更改中检索到的 CSS 属性时，您的`backgroundPos`,`yPos`和`xPos`变量（在这种情况下是原始类型 - 字符串）不会更改；它们具有最初分配的值，因为您从未重新分配它们。

要使这项工作按您的预期进行，您需要在`scroll`回调中检索当前背景位置。

```
$(window).scroll(function() {

    var backgroundPos = $(elem).css("backgroundPosition").split(" ");
    var xPos = backgroundPos[0],
        yPos = backgroundPos[1];

    console.log(yPos);

    if ( yPos >= 210 ) {
        $(elem).hide();
    }

}); 
```

为了稍微提高效率，您可以将结果分配给`$(elem)`滚动回调之外的变量，以便不会在每个滚动事件上调用选择器（如果您使用字符串作为选择器则更相关）：

```
var elem = $(elem);
...
elem.css("backgroundPosition").split(" "); 
```

# r - 在 R 中读取格式错误的 csv - 不匹配的引号

> ID：15830470
> 
> 赞同：3
> 
> 时间：2013-04-05T09:33:57.877
> 
> 标签：r, parsing, csv

我有数百个大型 CSV 文件（每个文件的大小从 10k 行到 100k 行不等），其中一些文件的描述格式不正确，引号内带有引号，因此它们可能看起来像

```
ID,Description,x
3434,"abc"def",988
2344,"fred",3484
2345,"fr""ed",3485
2346,"joe,fred",3486 
```

我需要能够将 R 中的所有这些行清晰地解析为 CSV。dput（）'ing它并阅读......

```
txt <- c("ID,Description,x",
    "3434,\"abc\"def\",988",
    "2344,\"fred\",3484", 
    "2345,\"fr\"\"ed\",3485",
    "2346,\"joe,fred\",3486")

read.csv(text=txt[1:4], colClasses='character')
    Error in read.table(file = file, header = header, sep = sep, quote = quote,  : 
      incomplete final line found by readTableHeader on 'text' 
```

如果我们更改引用并且不包含嵌入逗号的最后一行 - 它运行良好

```
read.csv(text=txt[1:4], colClasses='character', quote='') 
```

但是，如果我们更改引用并在最后一行包含嵌入的逗号...

```
read.csv(text=txt[1:5], colClasses='character', quote='')
    Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
      line 1 did not have 4 elements 
```

编辑 x2：应该说不幸的是，有些描述中有逗号 - 代码在上面进行了编辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:38:09.107

更改`quote`设置：

```
read.csv(text=txt, colClasses='character',quote = "")

    ID Description    x
1 3434   "abc"def"  988
2 2344      "fred" 3484
3 2345    "fr""ed" 3485
4 2346       "joe" 3486 
```

# 编辑以处理错误的逗号：

```
 txt <- c("ID,Description,x",
         "3434,\"abc\"def\",988",
         "2344,\"fred\",3484", 
         "2345,\"fr\"\"ed\",3485",
         "2346,\"joe,fred\",3486")

txt2 <- readLines(textConnection(txt)) 

txt2 <- strsplit(txt2,",")

txt2 <- lapply(txt2,function(x) c(x[1],paste(x[2:(length(x)-1)],collapse=","),x[length(x)]) )
m <- do.call("rbind",txt2)
df <- as.data.frame(m,stringsAsFactors = FALSE)
names(df) <- df[1,]
df <- df[-1,]

#     ID Description    x
# 2 3434   "abc"def"  988
# 3 2344      "fred" 3484
# 4 2345    "fr""ed" 3485
# 5 2346  "joe,fred" 3486 
```

不知道，如果这对您的用例来说足够有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:03:53.390

由于在这组讨厌的文件中只有一个引用的列，我可以`read.csv()`在每一侧做一个来处理引用列左右其他未引用的列，所以我当前的解决方案基于来自@agstudy 和 @roland 的信息

```
csv.parser <- function(txt) {
    df <- do.call('rbind', regmatches(txt,gregexpr(',"|",',txt),invert=TRUE))
    # remove the header
    df <- df[-1,]
    # parse the left csv
    df1 <- read.csv(text=df[,1], colClasses='character', comment='', header=FALSE)
    # parse the right csv
    df3 <- read.csv(text=df[,3], colClasses='character', comment='', header=FALSE)
    # put them back together
    dfa <- cbind(df1, df[,2], df3)
    # put the header back in
    names(dfa) <- names(read.csv(text=txt[1], header=TRUE))
    dfa
}

# debug(csv.parser)
csv.parser(txt) 
```

因此，谢天谢地，在更广泛的数据集上运行它。

```
txt <- c("ID,Description,x,y",
         "3434,\"abc\"def\",988,344",
         "2344,\"fred\",3484,3434", 
         "2345,\"fr\"\"ed\",3485,7347",
         "2346,\"joe,fred\",3486,484")
csv.parser(txt)
    ID Description    x    y
1 3434     abc"def  988  344
2 2344        fred 3484 3434
3 2345      fr""ed 3485 7347
4 2346    joe,fred 3486  484 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:06:14.173

您可以使用between and 来使用`readLines`和提取元素`regmatches``,"``",`

```
ll <- readLines(textConnection(object='ID,Description,x
  3434,"abc"def",988
2344,"fred",3484
2345,"fr""ed",3485
2346,"joe,fred",3486'))
ll<- ll[-1]     ## remove the header
ll <- regmatches(ll,gregexpr(',"|",',ll),invert=TRUE)
do.call(rbind,ll)
       [,1]     [,2]       [,3]  
[1,] "  3434" "abc\"def" "988" 
[2,] "2344"   "fred"     "3484"
[3,] "2345"   "fr\"\"ed" "3485"
[4,] "2346"   "joe,fred" "3486" 
```

# javafx - JavaFX FlowPane 换行文本

> ID：15830474
> 
> 赞同：0
> 
> 时间：2013-04-05T09:34:08.667
> 
> 标签：javafx, word-wrap

我正在为 gui 中的输出控制台创建自定义流程窗格。我一直在研究在[这里](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html#SAMPLES/Layout/Flow%20Pane)找到的代码，只是试图让 setPrefWrapLength 工作。默认情况下，此处设置为 200，但向其中一个标签添加更多文本不会显示其环绕。

所以，我想我的问题是，如何让 FlowPane 正确包装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:04:51.497

我想到了。FlowPane 宽度由它所在的窗格定义。虽然我的窗格的宽度小于 550，但我也必须将其最大宽度设置为 550：pane.setMaxWidth(550)

# jquery - HTML5 Canvas 添加 id 或 class

> ID：15830477
> 
> 赞同：0
> 
> 时间：2013-04-05T09:34:15.590
> 
> 标签：jquery, canvas

我在画布上画画。
例子：

```
 '1.01': {
        color: 'pink',
        points: [563,69,630,69,630,149,563,149]
      }, 
```

其中 1.01 是鼠标悬停在工具提示上时显示的文本。点是在画布上创建块的坐标`x`。`y`是否可以给这个绘制的块一个`id`或一个`class`以便我可以在 jQuery 中处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:38:43.707

您如何将其存储在自己的对象中，然后保存这些对象的集合以供以后使用？尽管我不确定“在 jQuery 中处理”的确切含义，因为在画布上，您只是在填充像素区域，这与使用 DOM 时非常不同。

```
var block = function (color, points) {
    return {
        color: color,
        points: points
    };
};

var b1 = block('pink', [563,69,630,69,630,149,563,149]);
// Do whatever you need with it... 
```

并用以下代码替换您的代码以保持相同的参考：

```
'1.01': b1, 
```

# ruby - 等效于 minitest 中的 should be_true

> ID：15830479
> 
> 赞同：0
> 
> 时间：2013-04-05T09:34:19.280
> 
> 标签：ruby, rspec, minitest

我想知道相当于：

```
event.should be_live 
```

在 Minitest 中？我正在测试的方法是：

```
event.live? 
```

目前我正在使用：

```
conf.live?.must_equal true 
```

但在我看来，这很做作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:21:19.803

较新版本的 minitest 允许在`assert_operator`. 规范 DSL 中对此的期望是`must_be`. 所以你的代码看起来像：

```
event.must_be :live? 
```

# asp.net - 我可以在 asp.net mvc4 中为布局创建控制器吗？

> ID：15830483
> 
> 赞同：0
> 
> 时间：2013-04-05T09:34:27.617
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我有一个菜单，我使用了一个 cookie 来将菜单设置为通过刷新选择。菜单对所有类都是通用的，所以我把它放在 _layout.cshtml 中，但同时我想要这个布局的控制器，因为有一些功能可以将菜单设置为突出显示。我可以为此创建一个控制器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:41:33.987

是的，您可以从视图调用`@Html.Action`或`@Hmtl.RenderAction`调用控制器。但这接近于混合关注点，因为现在您的视图正在主动调用您的控制器。

更好的方法通常是将适当的数据作为视图模型的一部分传递给视图。

*   [我的有点相关的答案](https://stackoverflow.com/a/15716558/453277)
*   [RenderAction 方法文档](http://msdn.microsoft.com/en-us/library/ee728607%28v=vs.108%29.aspx)

> 但同时我想要这个布局的控制器，因为有一些功能可以将菜单设置为突出显示。

如果您正在做一些基本的事情，比如突出显示当前页面，可能会有一个更简单的解决方案。您可以将当前页面 ID 放入`ViewBag`主 _Layout 文件中并检索该值，并使用它来选择适当的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:36:33.880

部分操作可能是您在此处寻找的内容 -[这篇文章可能会有所帮助](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)。它与 MVC2 相关，但原理保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:00:25.177

为菜单创建一个动作，并将菜单ui放在视图中，然后在布局页面上调用Html.Action("menu action name","controllern name")。

# android - Android：LinearLayout（水平）切断最后一列

> ID：15830486
> 
> 赞同：1
> 
> 时间：2013-04-05T09:34:52.773
> 
> 标签：android, android-linearlayout

非常简单的布局：我在一行中显示了两个 TextView。布局以屏幕为中心，两个字符串以编程方式设置，第一个是可变长度字符串，而第二个字符串为空或（比方说）“X”：

```
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/lblSelectionName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ellipsize="end"
        android:singleLine="true"
        android:text="@string/empty"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/lblSelectionAttribute"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

请注意，第一个 TextView 是椭圆的，以便在其大小超过 TextView 时切断字符串。我期待类似的东西：

“普通文本 | X”（以屏幕为中心）

“必须是...| X 的超大文本”（以屏幕为中心 - 填满屏幕）

但是会发生什么：第一个 TextView 缩小但填满了整个屏幕（-width），第二个 TextView 不在屏幕上（分别包装到下一行）。无论如何，使用“重量”也无济于事。将 layout_height 设置为固定值（例如 15dp）也无济于事......

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:41:15.450

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:orientation="horizontal"
    android:layout_gravity="center_horizontal"
     >

    <TextView
        android:id="@+id/lblSelectionName"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ellipsize="end"
        android:singleLine="true"
        android:text="asdhsagdkgfhgfhghg"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/lblSelectionAttribute"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="X"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

# javascript - 如何隐藏 .each() Jquery 之外的特定元素

> ID：15830487
> 
> 赞同：1
> 
> 时间：2013-04-05T09:34:53.330
> 
> 标签：javascript, jquery

通过 Sharepoint 会生成一堆 td，其中包含一些元素。所以为了清楚起见，我无法编辑或更改元素，因为它是生成的。

我想要完成的是遍历所有内容`'.js-contentFollowing-itemLink'`，然后如果 .text() 包含我正在寻找的特定文本，则`'<span> Stop following</span>'`应该用 .text() 隐藏`'.hide()'`。

我似乎无法做到这一点，我尝试了很多方法。

这是jsfiddle：http: [//jsfiddle.net/QXwyk/3/](http://jsfiddle.net/QXwyk/3/)

另请注意，我无法获取唯一的 id，并且其中许多元素是使用不同的值和文本生成的。

**HTML：**

```
<span class="ms-contentFollowing-itemTitle">
<a href="#" class="js-contentFollowing-itemLink">test</a>
</span>

<br>
<div class="js-contentFollowing-itemUrlDiv">
<span class="ms-metadata ms-contentFollowing-itemUrl"></span>

    <input type="text" readonly="readonly" class="ms-metadata ms-contentFollowing-itemUrl ms-contentFollowing-itemFullUrl" style="visibility: visible; border-color: transparent; background-color: transparent;">
</div>
<a href="#" class="ms-secondaryCommandLink"><span>Stop following</span></a> 
```

我的 JS：

```
$('.js-contentFollowing-itemLink').each(function () {
        if ($(this).text() == "test")

            $(this).closest("span").hide();

    }); 
```

注意：我知道它隐藏了错误的元素，但 If 语句在 if 语句中的代码起作用，我无法完成我需要隐藏“停止关注”。这个 JS 只是我做过的不起作用的例子之一。

我在 if 语句中尝试过，但是用“停止关注”`$('.ms-secondaryCommandLink span').hide();`删除了所有内容：/`<span>`

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:39:56.817

您的代码中有几个问题：

```
$('.js-contentFollowing-itemLink').each(function () {
    if ($(this).text() == "test")
    var text = $(this).parent().parent().parent().hide); <-- hide not closed properly
} <--- Extra bracket here..
}); 
```

工作代码：

```
$('.js-contentFollowing-itemLink').each(function () {
    if ($(this).text() == "test") {
        var text = $(this).parent().parent().parent().hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:51:17.643

html

```
<div class="ms-content">
<span class="ms-contentFollowing-itemTitle">
<a href="#" class="js-contentFollowing-itemLink">test</a>
</span>

<br>
<div class="js-contentFollowing-itemUrlDiv" id="contentFollowingUrl_18" url="http://dev/socialsites/Utförsåkning">
<span class="ms-metadata ms-contentFollowing-itemUrl"></span>

    <input type="text" readonly="readonly" class="ms-metadata ms-contentFollowing-itemUrl ms-contentFollowing-itemFullUrl" style="visibility: visible; border-color: transparent; background-color: transparent;">
</div>
<a href="#" class="ms-secondaryCommandLink"><span>Stop following</span></a>
</div> 
```

JS

```
$('.js-contentFollowing-itemLink').each(function () {
     if ($(this).text() == "test")
         var text = $(this).closest('.ms-content').find('.ms-secondaryCommandLink').hide();
}); 
```

[http://jsfiddle.net/QXwyk/4/](http://jsfiddle.net/QXwyk/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:26:53.170

您可以通过以下方式选择包含特定文本的对象，在此基础上您可以执行剩余操作...

示例：$('.js-contentFollowing-itemLink:contains(test)').hide(); 将隐藏“测试”

# c# - 单元测试内部属性的反射

> ID：15830490
> 
> 赞同：6
> 
> 时间：2013-04-05T09:34:58.353
> 
> 标签：c#, unit-testing, reflection

我有一个`TargetContainerDto`具有 2 个内部属性的公共类（）。一个枚举和一个包含来自该枚举的值的类型。

我正在尝试对类型进行单元测试，但我遇到了问题。

```
internal enum TargetContainerType
{
    Endpoint,
    Group,
    User,
    UserGroup
}

internal TargetContainerType Type { get; set; } 
```

这是我在测试类中的反射代码

```
public void setType(TargetContainerDto t, int val)
{
    BindingFlags bf = BindingFlags.NonPublic | BindingFlags.Instance;
    PropertyInfo pi = t.GetType().GetProperty("Type", bf);
    pi.SetValue(t, val, null);
}

public TargetContainerDto setTypeTo(TargetContainerDto t, int val)
{
    setType(t, val);
    return t;
} 
```

`TargetContainerDto`具有比 Type 更多的属性，但它们是公开的，因此可以测试它们。这`iconURL`是一个`TargetContainerDto`根据类型定义的字符串。这是我的测试方法：

```
public void DefaultSubGroupIcon()
{
    var o1 = new TargetContainerDto
    {
        Id = 1234,
        DistinguishedName = "1.1.1.1",
        SubGroup = "test",
    };
    setType(o1, 3);
    Assert.AreEqual(o1.IconUrl, "/App_Themes/Common/AppControl/Images/workstation1.png");
} 
```

当我需要设置类型值时，我在测试方法中调用 setTypeTo，但我得到了一个`MethodAccessException`. 我认为这是因为我无法访问枚举。如何通过反射访问枚举？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T09:43:53.967

使用属性标记您的程序集，`InternalsVisibleTo`您不需要在测试 dll 中使用反射。

例如，在应用程序 dll 的 AssemblyInfo.cs 文件中添加以下行：

```
[assembly:InternalsVisibleTo("TestAssembly")] 
```

请参阅[此处](http://msdn.microsoft.com/en-ie/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)了解更多详细信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T09:45:36.873

你问错问题了。一个更好的问题是：

> > 如何停止测试类的内部状态？

[但是，如果你完全需要这个，这个相关的SO 答案](https://stackoverflow.com/a/11401920/706456)中描述了几种方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:52:30.630

我同意您应该尝试重新设计以避免测试内部状态的其他评论，但是我确实尝试了您的代码并且它对我来说很好（VS2012 上的.Net 4）。

我正在测试的类库如下所示：

```
using System;

namespace ClassLibrary
{
    internal enum TargetContainerType
    {
        Endpoint,
        Group,
        User,
        UserGroup
    }

    public class TargetContainerDto
    {
        internal TargetContainerType Type
        {
            get;
            set;
        }

        public void Print()
        {
            Console.WriteLine(Type);
        }
    }
} 
```

测试程序（控制台应用程序）如下所示：

```
using System;
using System.Reflection;
using ClassLibrary;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var test = new TargetContainerDto();
            setType(test, 1);
            test.Print();
        }

        public static void setType(TargetContainerDto t, int val)
        {
            BindingFlags bf = BindingFlags.NonPublic | BindingFlags.Instance;
            PropertyInfo pi = t.GetType().GetProperty("Type", bf);
            pi.SetValue(t, val, null);
        }
    }
} 
```

`Group`正如预期的那样，这会打印出来。如果我们能确定这与您的实际代码之间的差异，我们或许能够找到问题所在。

# android - tweeter4j 从 android 上传图像和消息

> ID：15830493
> 
> 赞同：0
> 
> 时间：2013-04-05T09:35:12.770
> 
> 标签：android, twitter4j, android-twitter

身份验证后尝试发推文时出现异常，推 **特登录错误**

if (!isTwitterLoggedInAlready()) { Uri uri = getIntent().getData();

```
 if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
            // oAuth verifier
            Log.d("Inside","inside");
            String verifier = uri
                    .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

            try {
                // Get the access token
                AccessToken accessToken = twitter.getOAuthAccessToken(
                        requestToken, verifier);

                // Shared Preferences
                Editor e = mSharedPreferences.edit();

                // After getting access token, access token secret
                // store them in application preferences
                e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                e.putString(PREF_KEY_OAUTH_SECRET,
                        accessToken.getTokenSecret());
                // Store login status - true
                e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                e.commit(); // save changes

                Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

                // For now i am getting his name only
                long userID = accessToken.getUserId();
                User user = twitter.showUser(userID);
                String username = user.getName();
                Log.d("usrnm",username);
                // Displaying in xml ui

            } catch (Exception e) {
                // Check log for login errors
                Log.e("Twitter Login Error", "> " + e.getMessage());
            }
        }

private void loginToTwitter() {
        Log.d("user",""+isTwitterLoggedInAlready());
        // Check if already logged in
        if (!isTwitterLoggedInAlready()) {
            ConfigurationBuilder builder = new ConfigurationBuilder();
            builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
            builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
            Configuration configuration = builder.build();

            TwitterFactory factory = new TwitterFactory(configuration);
            twitter = factory.getInstance();

            try {
                requestToken = twitter
                        .getOAuthRequestToken(TWITTER_CALLBACK_URL);
                this.startActivity(new Intent(Intent.ACTION_VIEW, Uri
                        .parse(requestToken.getAuthenticationURL())));
            } catch (TwitterException e) {
                e.printStackTrace();
            } 
        } else {
            // user already logged into twitter    
            new updateTwitterStatus().execute("Hello");

        }
    } 
```

堆栈跟踪

```
04-12 11:21:52.479: E/Twitter Login Error(1065): > null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:39:41.740

此解决方案用于通过 TwitPic API 将图像上传到 Twitter。您需要在他们的[开发者部分注册您的帐户](http://dev.twitpic.com/)

我采用的解决方案可以被认为是一个两步解决方案。

首先，当用户点击发布按钮时，我首先抓取图片并上传到 TwitPic。从那里，我获取了 TwitPic ( `String url = upload.upload(finalFile);`) 返回的 URL。

在此代码的第二步中，在一个 String 实例 ( `String finalStatusWithURL`) 中，我获取了 an 的内容，`EditText`然后将步骤 1 中的 URL 附加到它上面。完成此操作后，该帖子最终发布到 Twitter。

```
Configuration conf = new ConfigurationBuilder()
.setOAuthConsumerKey(TWITTER_CONSUMER_KEY)
.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET)
.setOAuthAccessToken(twit_access_token)
.setOAuthAccessTokenSecret(twit_access_token_secret)
.setMediaProviderAPIKey(TWIT_PIC_API)
.build();

// SET THE FILE PATH (THIS IS UPDATED! NOTICE THE CHANGES MADE!!)
Uri tempUri = getImageUri(getApplicationContext(), bmpFinal);
File finalFile = new File(getRealPathFromURI(tempUri));

// THIS IS IMPORTANT. TWITPIC NEEDS THE ACTUAL / ABSOLUTE PATH OF THE IMAGE. JUST THE URI DOES NOT WORK!!!!

ImageUpload upload = new ImageUploadFactory(conf).getInstance(MediaProvider.TWITPIC);

String url = upload.upload(finalFile);
Log.e("TWITTER URL RESPONSE", url);

// END OF FIRST STEP:

// SECOND STEP IS TO UPLOAD TO TWITTER

ConfigurationBuilder builder = new ConfigurationBuilder();

builder.setOAuthConsumerKey(YOUR_TWITTER_CONSUMER_KEY);
builder.setOAuthConsumerSecret(YOUR_TWITTER_CONSUMER_SECRET);

AccessToken accessToken = new AccessToken(your_twit_access_token, your_twit_access_token_secret);
Twitter twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

String finalStatusWithURL = null;

if (finalStatusMessage.trim().length() > 0) {

    finalStatusMessage = editStatusUpdate.getText().toString();
    finalStatusWithURL = finalStatusMessage + ":\n " + url;

} else {
    finalStatusWithURL = url;
}

twitter4j.Status response = twitter.updateStatus(finalStatusWithURL);
Log.e("TWITTER RESPONSE", response.getText()); 
```

这是获取您要上传的图像的真实路径的方法：

```
// HELPER METHOD TO GET REAL PATH FOR THE SELECTED IMAGE
public String getRealPathFromURI(Uri uri) {
    Cursor cursor = getContentResolver().query(uri, null, null, null, null); 
    cursor.moveToFirst(); 
    int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA); 
    return cursor.getString(idx); 
}

public Uri getImageUri(Context inContext, Bitmap inImage) {
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
    String path = Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null);
    return Uri.parse(path);
} 
```

**更新：**

在尝试上传之前执行此操作：

```
Bitmap bmpFinal = getBitmapFromURL("http://www.cosmopolitanclublahore.com/wp-content/uploads/2011/06/mexicanfoodrestaurant.jpg"); 
```

以及返回位图的方法：

```
// THE METHOD TO DOWNLOAD THE IMAGE INTO A BITMAP
public Bitmap getBitmapFromURL(String strURL) {
    try {
        URL url = new URL(strURL);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        return myBitmap;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

你可能需要调整一些东西。我的代码使用用户从图库中选择的图像或他用相机拍摄的图像。您需要上传从 Internet 上获取的图像。里程可能会有所不同，并且可能需要调整代码。

# javascript - 如何让事件绑定在 jQuery mobile 上工作？

> ID：15830495
> 
> 赞同：3
> 
> 时间：2013-04-05T09:35:17.813
> 
> 标签：javascript, jquery, jquery-mobile

我正在将一个普通网站转移到 jQuery 移动版。我有一些事件绑定，以及其他特定于页面的调整：

```
$('.roulette-img').css({
});

$('.shuffle-img').each(function(){
});

$('.button').bind('mousedown', function(){
});

$('.spin-btn').bind('mousedown', function(){
    $(document).bind('mouseup', function(){
    });
})

$(window).resize(function(){
}); 
```

现在某些页面不能正常工作（通过不触发这些事件）。我知道这是因为 jQuery 的 ajax 导航，该脚本仅在加载第一页时加载一次，因此通过 AJAX 加载的所有后续内容都不会绑定到事件。

哪种方式最好绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:41:57.013

首先不要使用绑定，它已被弃用并从 jQuery 版本 1.9 + 中删除。改为使用。这是一个例子：

```
$('#buttonID').on('click', function(){       

}); 
```

此外，如果您想在某个页面中执行某些操作，则需要在 jQuery Mobile 页面事件中执行，如下所示：

```
$(document).on('pagebeforeshow', '#index', function(){       

}); 
```

我给你做了一个工作示例：http: [//jsfiddle.net/Gajotres/8hKe2/](http://jsfiddle.net/Gajotres/8hKe2/)

在这里，您可以看到使用页面事件为特定页面执行代码的样子。

您想知道的所有内容都可以在此答案/文章中找到：**[jQuery Mobile：文档就绪与页面事件](https://stackoverflow.com/a/14469041/1848600)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:49:41.930

如果您希望处理程序在加载时绑定到新页面，则可以使用[pageinit](http://api.jquerymobile.com/pageinit/)事件并将选择器限制为当前初始化的页面：

```
$(document).on("pageinit", function(e) {
    $(".button", e.target).on("mousedown", function() {
        // ...
    });

    $(".spin-btn", e.target).on("mousedown", function() {
        // ...
    });
}); 
```

# exe - 进行代码签名重要吗？

> ID：15830500
> 
> 赞同：0
> 
> 时间：2013-04-05T09:35:36.537
> 
> 标签：exe, code-signing, authenticode

我们想在互联网上分发我们的新 Windows 软件（exe 文件）。

获得验证码代码签名证书有什么好处？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:22:30.767

您可以注册 Windows 错误报告流程并获取崩溃报告，这很好。对您的可执行文件（和/或您的安装程序）进行签名将防止一些可能对用户来说很可怕的“不受信任的代码”警告，并降低您遇到 Microsoft 的“这可能很危险”检查的可能性。

# sorting - SortableAsyncListView 排序

> ID：15830506
> 
> 赞同：0
> 
> 时间：2013-04-05T09:35:45.300
> 
> 标签：sorting, filter, null, field, graniteds

```
 <s:DataGrid id="materialsList">
        <s:dataProvider>
            <c:SortableAsyncListView list="{materials}" />
        </s:dataProvider>
        .... 
```

材料是PagedQuery。当我使用复杂的 dataField ("group.name") 按 GridColumn 排序时，我将得到 sort[0]=null 并且服务器端的过程无法按此字段订购材料。如何按复杂字段对 SortableAsyncListView 进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:40:41.753

没有理由不能对复杂字段进行排序。您使用的是哪个版本的 Flex SDK？

# android - 如何实现这种布局

> ID：15830511
> 
> 赞同：2
> 
> 时间：2013-04-05T09:36:21.537
> 
> 标签：android, android-layout, android-relativelayout

在我的应用程序中，我想要如下图所示的布局。 ![在此处输入图像描述](https://i.stack.imgur.com/Gyhmk.png)

我已经尝试了几个小时，但无法获得预期的结果。

这是我的布局xml：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingTop="@dimen/activity_vertical_margin" >

    <View
        android:id="@+id/middleSeperator"
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:background="#90909090" />

    <LinearLayout
        android:id="@+id/leftLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@id/middleSeperator"
        android:gravity="right"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/batt_health"
            android:textColor="@color/white" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:text="@string/batt_level"
            android:textColor="@color/white" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:text="@string/batt_status"
            android:textColor="@color/white" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:text="@string/batt_tech"
            android:textColor="@color/white" />

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:text="@string/batt_temp"
            android:textColor="@color/white" />

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:text="@string/batt_voltage"
            android:textColor="@color/white" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/rightLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/middleSeperator"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textViewHealth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/activity_horizontal_margin"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:textColor="@color/teal"
            android:textStyle="bold"
            tools:ignore="SelectableText" />

        <TextView
            android:id="@+id/textViewLevel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/activity_horizontal_margin"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:textColor="@color/teal"
            android:textStyle="bold"
            tools:ignore="SelectableText" />

        <TextView
            android:id="@+id/textViewStatus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/activity_horizontal_margin"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:textColor="@color/teal"
            android:textStyle="bold"
            tools:ignore="SelectableText" />

        <TextView
            android:id="@+id/textViewTech"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/activity_horizontal_margin"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:textColor="@color/teal"
            android:textStyle="bold"
            tools:ignore="SelectableText" />

        <TextView
            android:id="@+id/textViewTemp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/activity_horizontal_margin"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:textColor="@color/teal"
            android:textStyle="bold"
            tools:ignore="SelectableText" />

        <TextView
            android:id="@+id/textViewVoltage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/activity_horizontal_margin"
            android:layout_marginTop="@dimen/activity_vertical_margin"
            android:textColor="@color/teal"
            android:textStyle="bold"
            tools:ignore="SelectableText" />
    </LinearLayout>
</RelativeLayout> 
```

有了这个，左侧的文本视图是不可见的。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:40:03.303

您可以通过多种方式做到这一点，一种可以使用普通的 LinearLayout 作为容器，然后将两个`TextView`s 的宽度`fill_parent`设置为 AND`android:layout_weight="1"`在两个`TextView`s 上设置，以便它们占据可用宽度的 50%。然后你需要将垂直线放在固定大小之间`1dp`（你可以用背景颜色放置`ImageView`甚至是空的）。`FrameLayout`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T09:52:53.073

试试这个 。

1-您可以创建父布局`Horizontal`

这将水平排列所有项目。

2- 内部`layout`垂直

3-添加`View`

4-内部`layout`使其垂直。

这很简单，可以根据您的需要进行更改，我只是为演示创建的。

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textViewStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="abc" />

    <TextView
        android:id="@+id/textViewStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="abc" />

    <TextView
        android:id="@+id/textViewStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="abc" />
</LinearLayout>

<View
    android:layout_width="1dp"
    android:layout_height="fill_parent" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textViewStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="xyz" />

    <TextView
        android:id="@+id/textViewStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="xyz" />

    <TextView
        android:id="@+id/textViewStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="xyz" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T09:48:58.857

试试这个代码..

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:weightSum="2" >

<LinearLayout
    android:id="@+id/first"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

    <RelativeLayout
        android:id="@+id/firstpane"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dp" >

        <TextView
            android:id="@+id/ftext1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="text 1" />

        <TextView
            android:id="@+id/ftext2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/ftext1"
            android:text="text 2" />

        <TextView
            android:id="@+id/ftext3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/ftext2"
            android:text="text 3" />
    </RelativeLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/second"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

    <RelativeLayout
        android:id="@+id/secondpane"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp" >

        <TextView
            android:id="@+id/stext1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="text 1" />

        <TextView
            android:id="@+id/stext2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/stext1"
            android:text="text 2" />

        <TextView
            android:id="@+id/stext3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/stext2"
            android:text="text 3" />
    </RelativeLayout>
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T09:52:42.557

试试这个代码..与你的要求非常相似。

```
 <?xml version="1.0" encoding="utf-8"?>
        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <View
                android:id="@+id/middleSeperator"
                android:layout_width="1dp"
                android:layout_height="fill_parent"
                android:layout_alignParentTop="true"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:background="#90909090" />

            <TextView 
                android:id="@+id/t1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toLeftOf="@+id/middleSeperator"
                android:text="TextView"/>

            <TextView 
                android:id="@+id/t2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toLeftOf="@+id/middleSeperator"
                android:layout_below="@+id/t1"
                android:text="TextView I am no2"/>

            <TextView 
                android:id="@+id/t3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toLeftOf="@+id/middleSeperator"
                android:layout_below="@+id/t2"
                android:text="TextView I am number 3"/>

            <TextView 
                android:id="@+id/t4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toLeftOf="@+id/middleSeperator"
                android:layout_below="@+id/t3"
                android:text="TextView I am number 4"/>

            <TextView 
                android:id="@+id/t5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toLeftOf="@+id/middleSeperator"
                android:layout_below="@+id/t4"
                android:text="TextView I am number 5"/>

            <TextView 
                android:id="@+id/t6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/middleSeperator"
                android:text="TextView"/>

            <TextView 
                android:id="@+id/t7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/middleSeperator"
                android:layout_below="@+id/t6"
                android:text="Another TextView"/>

            <TextView 
                android:id="@+id/t8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/middleSeperator"
                android:layout_below="@+id/t7"
                android:text="Another TextView"/>

            <TextView 
                android:id="@+id/t9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/middleSeperator"
                android:layout_below="@+id/t8"
                android:text="TextView"/>

            <TextView 
                android:id="@+id/t10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/middleSeperator"
                android:layout_below="@+id/t9"
                android:text="TextView"/>

        </RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T14:38:24.533

试试这个代码：

```
&lt;RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
     xmlns:tools="http://schemas.android.com/tools" 
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:gravity="center" 
    android:paddingBottom="@dimen/activity_vertical_margin" 
    android:paddingTop="@dimen/activity_vertical_margin" >
&lt;LinearLayout
        android:id="@+id/leftLayout" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignParentLeft="true" 
        android:layout_alignParentTop="true" 
        android:layout_marginRight="10dp" 
        android:layout_toLeftOf="@id/middleSeperator" 
        android:orientation="vertical" >
&lt;TextView
            android:id="@+id/textView1" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textView" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" 
            android:gravity="right"/>
&lt;TextView
            android:id="@+id/textView2" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:gravity="right" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am num 1" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" />
&lt;TextView
            android:id="@+id/textView3" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am number 2" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" 
            android:gravity="right"/>
&lt;TextView
            android:id="@+id/textView4" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am number 3" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" 
            android:gravity="right"/>
&lt;TextView
            android:id="@+id/textView5" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am number 4" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" 
            android:gravity="right"/>
&lt;TextView
            android:id="@+id/textView6" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am number 5" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" 
            android:gravity="right"/>
&lt;/LinearLayout&gt;
&lt;View
        android:id="@+id/middleSeperator" 
        android:layout_width="1dp" 
        android:layout_height="fill_parent" 
        android:layout_centerInParent="true" 
        android:background="#90909090" />
&lt;LinearLayout
        android:id="@+id/rightLayout" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignLeft="@id/middleSeperator" 
        android:layout_alignParentRight="true" 
        android:layout_alignParentTop="true" 
        android:layout_marginLeft="10dp" 
        android:orientation="vertical" >
&lt;TextView
            android:id="@+id/textViewHealth" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textView" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" />
&lt;TextView
            android:id="@+id/textViewLevel" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am num 1" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" />
&lt;TextView
            android:id="@+id/textViewStatus" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am number 2" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" />
&lt;TextView
            android:id="@+id/textViewTech" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am number 3" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" />
&lt;TextView
            android:id="@+id/textViewTemp" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am number 4" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" />
&lt;TextView
            android:id="@+id/textViewVoltage" 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:layout_marginTop="@dimen/activity_vertical_margin" 
            android:text="textview am number 5" 
            android:textStyle="bold" 
            tools:ignore="SelectableText" />
&lt;/LinearLayout&gt;
&lt;/RelativeLayout&gt; 
```

# javascript - Javascript 模块模式和 jquery Ajax 等待问题

> ID：15830512
> 
> 赞同：0
> 
> 时间：2013-04-05T09:36:22.477
> 
> 标签：javascript, jquery, wait, module-pattern

我编写了一个自定义 js 模块，它基本上发送消息并且需要等待响应才能继续：

```
var manageBooking = (function (jQ) {

//decalre private variables
var domain, msgRecieved, msgResponse, validationValue;
//decalre private functions
var sendMessage, wait;

// A private variables
domain = document.domain;
msgRecieved = false;
msgResponse = null;

wait = function(timeOutStep){
    var w;
    console.log('msgRecieved', msgRecieved);
    if (msgRecieved === true) {
        clearTimeout(w);
        return;
    } else {
        console.log('waiting..');
        w = setTimeout(wait, timeOutStep, timeOutStep);
    }
}

// A private function to send messages
sendMessage = function( requestURL, data, type ) {
    console.log(requestURL);
    console.log(data);
    console.log(type);
    //reset vars to defaults
    msgRecieved = false;
    msgResponse = null;
    jQuery.ajax({
        url: "http://"+domain+"/_ajax/"+requestURL,
        dataType: "html",
        async: true,
        data: data,
        type: type,
        success: function(msg){
            console.log(msg);
            msgResponse = msg;
            msgRecieved = true;
        }
    });
    console.log('after ajax call');
    wait(500);
    console.log('after wait');
    console.log('msgRecieved', msgRecieved);
    return;
};
return {

// A public variable
errorMsg: "",
validationName: "",
bookingID: "",
output: "",
// A public function to login
login: function( enteredBookingID, enteredSurname ) {
    // Call private sendMsg
    sendMessage("user_login/"+enteredBookingID+"/"+enteredSurname, null, 'GET');
    console.log(msgResponse);
    throw "error";
    //check response
    var patt=/Sorry/i;
    //test pattern
    var result=patt.test($.trim(msgResponse));
    //if false OK
    if (result === false) {
        var split = msgResponse.split('|');
        validationName = split[0];
        validationValue = split[1];
        bookingID = enteredBookingID
        return true;
    }
    //else error
    errorMsg = msgResponse;
    return false;
}
};
})(jQuery);
manageBooking.login(123,123); 
```

我遇到的问题是强制`sendMessage`函数等到 ajax 完成并设置`msgRecieved`为 true。

但是，该函数似乎`sendMessage`命中该`wait`函数一次，然后继续。以下控制台输出显示了事件的顺序：

```
GET http://website/_ajax/user_login/123/123
after ajax call //sendMessage()
msgRecieved, false //wait()
waiting.. //wait()
after wait //sendMessage()
msgRecieved, false //sendMessage()
null//login()
uncaught exception: error //login() 
<p>Sorry, we cannot locate your details.  </p> <!-- jQuery Ajax call -->
msgRecieved, true //wait() 
```

我感到困惑的是，该`wait`功能似乎在最后再次触发..

谁能给我一些关于让它工作的指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:40:34.793

您应该尝试使用 JavaScript setInterval 函数而不是 setTimeout。但是这次把sendMessage拆开，把收到ajax消息后需要执行的部分放在一个setInterval下面。

一旦收到 ajax 消息，sendMessage 的第二部分就会运行（在 messagereceived 为 true 之后），并且还会清除间隔。

这是因为 setTimeout() 只在设定的时间间隔后执行一次。

setInterval() 重复执行 exery 间隔，直到它被清除。

更多信息可以在[这里找到](http://www.w3schools.com/jsref/met_win_setinterval.asp)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:40:46.373

问题可能与`w`变量的范围有关，因为在第二次调用（在等待函数中，进入您的`else`分支）时，您正在破坏对先前创建的超时的引用，因此 clearTimeout 无法工作：尝试定义它在直接的外部范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:41:24.230

JavaScript 以异步方式运行，这意味着它**不会等待**。

您的代码中有一部分如下所示：

```
jQuery.ajax({
    url: "http://"+domain+"/_ajax/"+requestURL,
    dataType: "html",
    async: true,
    data: data,
    type: type,
    success: function(msg){
        console.log(msg);
        msgResponse = msg;
        msgRecieved = true;
    }
}); 
```

当响应到达函数内时，您应该放置要运行的代码`success`，如下所示：

```
success : function (msg) {
    handleMessage(msg); // Or any other manipulation to the received message
}

function handleMessage(msg) {
    // Work with your received message here.
} 
```

`success`将与*收到*的消息一起调用，它是一个回调。

正确的实施`sendMessage`方式如下：

```
sendMessage = function( requestURL, data, type, callback ) {
    console.log(requestURL);
    console.log(data);
    console.log(type);
    //reset vars to defaults
    msgRecieved = false;
    msgResponse = null;
    jQuery.ajax({
        url: "http://"+domain+"/_ajax/"+requestURL,
        dataType: "html",
        async: true,
        data: data,
        type: type,
        success: function(msg){
            console.log(msg);
            msgResponse = msg;
            msgRecieved = true;
            // Call the callback function to notify the message
            // was received
            callback();
        }
    });
}; 
```

然后像这样使用它：

```
sendMessage(urlHere, dataHere, typeHere, function () {
    // Message has been received, msgResponse and msgReceived
    // have already been updated. Do what you need here
}); 
```

# hibernate - 如何从使用struts和hibernate的jsp页面中的数据库中删除组合框值？

> ID：15830513
> 
> 赞同：1
> 
> 时间：2013-04-05T09:36:23.587
> 
> 标签：hibernate, jsp, struts-1

嗨，我有四个组合框，如果一次选择一个选项，它不应该出现在其他组合框中，即：用户不应该选择重复值？问题是值来自数据库？我是新手，请帮忙？

how to remove the combo box value from database in the jsp page when an option is selected that uses struts and hibernate ?

以下是示例代码。

```
<html:optionsCollection  property="ListName" value="value" label="name5"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:46:15.763

*从数据库中删除？？多么优雅的方式..*

不要从数据库中删除它。在客户端本身使用一些脚本，`hide`或者`remove`通过`combo`使用一些脚本或一些适当的消息。

如果他/她在第一个组合中选择了一个值会发生什么，那么你从数据库中删除该选项。如果他想再次更改选择怎么办？？当你从数据库中删除时，你永远不会得到回报。

我的建议是使用一些[Javascript](https://stackoverflow.com/questions/1982449/jquery-to-remove-an-option-from-drop-down-list-given-options-text-value)`hide/remove`的值。`Combobox`

# ruby-on-rails - coffeescript ajax setinterval 不工作

> ID：15830519
> 
> 赞同：0
> 
> 时间：2013-04-05T09:36:41.790
> 
> 标签：ruby-on-rails, ruby, coffeescript

我是新手。我正在尝试对更改进行轮询（railscast 229）并通过coffeesc 提交表单。

```
jQuery ->

MessagePoller =
  poll: ->
    setInterval MessagePoller.request("get_new": "yes"), 1000
    true
  request : (data) ->
    $.ajax(
      type: "POST",
      url: $("#messageform").attr("action")
      data: data
      dataType: "JSON"
    ).success (json) ->
      alert(json)
      #act on result.
    false

 $("#formsubmit").click ->
   valuesToSubmit = $("textarea#message").val()
   sendData = {"message" : valuesToSubmit}
   $("ul#messages").append("<li>" + valuesToSubmit +  "</li>")
   $("textarea#message").val('')
   MessagePoller.request(sendData)
   false # prevents normal behaviour

 MessagePoller.poll() 
```

但是@request 只工作一次。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:38:25.563

代替：

```
poll: ->
  setInterval MessagePoller.request("get_new": "yes"), 1000

request : (data) -> 
```

和：

```
@poll: ->
  setInterval ->(MessagePoller.request("get_new": "yes")), 1000

@request : (data) -> 
```

基本上：

*   你在实例和类方法之间搞砸了

*   你需要一个关闭

# android - 如何处理 CSV 文件中的特殊字符

> ID：15830522
> 
> 赞同：0
> 
> 时间：2013-04-05T09:36:43.773
> 
> 标签：android

我正在我的应用程序中创建 csv 文件 我面临的问题是，在编写用于创建 csv 文件的普通代码时，我能够管理换行符但无法处理内容中的 (,) 并且如果我使用的是 opencsv 库而不是它将句柄 (,) 但如果字符串中有换行符，则它将所有内容留在 \n 旁边。请建议如何处理。

```
 while (cursor.moveToNext()) 
         {
                  String _address=cursor.getString(cursor.getColumnIndexOrThrow("address"));
                  if(_address!=null)
                   writer.append(_address);
                  else
                     writer.append("Unknown");

                   writer.append(',');

                  String _body=cursor.getString(cursor.getColumnIndexOrThrow("body"));
                  if(_body.contains("\n"))
                      _body=_body.replace("\n", "\\n");
                 if(_body!=null)
                   writer.append('"'+_body+'"');
                 else
                    writer.append("");
                    writer.append(',');

                    String _IsRead=cursor.getString(cursor.getColumnIndexOrThrow("read"));
                    writer.append(_IsRead);
                    writer.append(',');
                    String SmsDate = cursor.getString(cursor.getColumnIndexOrThrow("date"));
                    writer.append(SmsDate);
                    writer.append(',');
                  // writer.append(cursor.getString(cursor.getColumnIndexOrThrow("type")));
                    if (cursor.getString(cursor.getColumnIndexOrThrow("type")).contains("1")) 
                    writer.append("Inbox");
                    else 
                    writer.append("Sent");                      
                    writer.append('\n');
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:28:45.563

您可以在将数据写入 CSV 文件之前对其进行预处理。字符 ',' 可以替换为 '~' 之类的字符或任何其他字符，在数据中出现的概率非常小。这不是一个万无一失的解决方案，但可以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:14:37.433

为什么不做 Excel 所做的事情：

1.  如果有双引号，则添加另一个。
2.  每个项目都放在双引号中。

# c - c openmp parallel for 在一个并行区域内

> ID：15830526
> 
> 赞同：3
> 
> 时间：2013-04-05T09:36:50.450
> 
> 标签：c, multithreading, for-loop, openmp

我的问题是这样[的](https://stackoverflow.com/questions/11493265/for-loop-inside-parallel-region)。但我想做一些不同的事情...

例如，在我的并行区域内，我想在 4 个线程上运行我的代码。当每个线程进入 for 循环时，我想在 8 个线程上运行我的代码。就像是

```
#pramga omp parallel num_threads(4)
{
    //do something on 4 threads
    #pragma omp parallel for num_threads(2)
    for(int i=0;i<2;i++){
        //do something on 8 threads in total
    }
} 
```

那么，有没有办法将每个（4）个正在运行的线程“拆分”成两个（新）线程，以便在 for 循环中运行更多（8）个线程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T12:41:27.193

大多数当前启用 OpenMP 的编译器都支持您在这里所拥有的 -[嵌套并行性](http://docs.oracle.com/cd/E19205-01/819-5270/aewbc/index.html)，一个并行部分位于另一个部分中，但通常默认情况下是关闭的。您需要将`OMP_NESTED`环境变量设置为`TRUE`，或在您的程序调用`omp_set_nested(1)`中。参见，例如，[这个答案](https://stackoverflow.com/a/8303151/463827)。

要在评论中回答您的后续问题，您不需要在 OpenMP 并行 for 循环结束时设置障碍；除非您使用该[`nowait`子句](http://msdn.microsoft.com/en-us/library/ek5st0e3.aspx)`for`，否则在循环结束时已经存在用于同步的隐式障碍。你不能在 for 循环中设置*障碍*；如果循环迭代没有被线程平均划分会发生什么？您最终会遇到一些线程“卡住”在障碍处等待其他线程无法到达的障碍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:41:30.563

是的，正确的方法是您选择的方法：第二个 for 循环将由每 4 个线程拆分，以便 8 个线程*可以*同时执行最内层循环。

# android - 轮流导航Android

> ID：15830528
> 
> 赞同：0
> 
> 时间：2013-04-05T09:36:55.193
> 
> 标签：android, map, openstreetmap, android-maps, osmdroid

我正在使用 OSM Mapquest 地图并使用 OSM Bonus Pack 接收行车路线。一旦用户通过了上一个航路点，我无法找到如何前进并向用户显示下一个即将到来的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T05:13:21.797

OSM Bonus Pack 是第三个库，它在 OSM 地图之上提供转弯方向，并具有一些附加功能。

[https://code.google.com/p/osmbonuspack/](https://code.google.com/p/osmbonuspack/)

更新：这个项目已经迁移到 Github

> 这是新链接： [https ://github.com/MKergall/osmbonuspack](https://github.com/MKergall/osmbonuspack)

# java - 来自 jar-File 的 InputStream 始终返回 null

> ID：15830532
> 
> 赞同：0
> 
> 时间：2013-04-05T09:37:03.667
> 
> 标签：java, jar, null, inputstream

我知道这个问题已经被问过好几次了，但我认为我的问题与其他问题有点不同：

```
String resourcePath = "/Path/To/Resource.jar";

File newFile = new File(resourcePath);
InputStream in1 = this.getClass().getResourceAsStream(resourcePath);
InputStream in2 = this.getClass().getClassLoader().getResourceAsStream(resourcePath); 
```

File-Object newFile 完全没问题（已找到 .jar 文件，您可以获取其元数据，如 newFile.length() 等）

另一方面，InputStream 总是返回 null。我知道 javadoc 说`getResourceAsStream()`如果没有找到具有此名称的资源，则为 null，但文件在那里！（显然，因为它在文件对象中）

任何人都知道为什么会发生这种情况以及如何修复它以便我可以在 InputStream 中获取 .jar 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:41:02.557

该`getResourceAsStream()`方法不从文件系统加载文件；它从类路径加载资源。例如，您可以使用它来加载打包在 JAR 中的属性文件。您不能使用它从文件系统加载文件。

因此，如果您的文件驻留在文件系统上，而不是在您的 JAR 文件中，最好使用[`FileInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html)该类。

# jms - 在 Camel 中是否可以为发送到 ActiveMQ 的每条消息设置不同的请求超时？

> ID：15830537
> 
> 赞同：3
> 
> 时间：2013-04-05T09:37:26.213
> 
> 标签：jms, activemq, apache-camel

我有一个使用 ActiveMQ 处理 Camel Route 的请求/回复，其中处理消息所需的时间因消息而异。是否可以在 Camel 交换中而不是在路由定义中设置 requestTimeout？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:14:14.437

这是不可能的。

您使用不同超时的用例是什么？我们可以考虑将这样的功能添加到 camel-jms。

# java - JDK7 编译错误：歧义参考

> ID：15830541
> 
> 赞同：3
> 
> 时间：2013-04-05T09:37:36.870
> 
> 标签：java, java-7

我正在尝试将遗留代码库从 java1.6 迁移到 1.7，并且在编译时出现以下错误：

> 对 create 的引用不明确，Meta 中的方法 create(long,Object...) 和 Meta 中的方法 create(Object...) 都匹配

这里 Meta 是类名。此错误仅在使用 JDK1.7 编译时出现。在 1.6 中，它构建良好，所有依赖项也都运行良好。

两个多态函数如下：

```
 create(long id, Object... paramters) {
    ....
 }

create(Object... paramters) {
   ....
} 
```

如何解决这个问题，以便代码适用于 1.6 编译和 1.7 编译。

编辑：添加引发错误的调用示例：

```
Id.create(1234);
Id.create(id); // id is a long value 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:56:59.713

这是由 Java 7 编译器中的修复引起的：

**[JDK 7 和 JDK 6 之间的不兼容性](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#jdk7)**

> 领域：工具
> 
> 概要：最具体的 Varargs 方法选择的变化
> 
> 描述：javac 编译器中的重载解析算法已修复，当有多个方法适用于给定调用站点时，它如何选择最具体的可变参数方法（请参阅 JLS，Java SE 7 版，第 15.12.2.5 节） .

...

> 虽然 javac 编译器接受的代码比 JDK 7 之前的多，但此修复在以下情况下也会导致轻微的源不兼容：

```
class Test {
    void foo(int... i) {}
    void foo(Object... o) {}

    void test() {
       foo(1,2,3);
    }
} 
```

> **此代码在 JDK 6 中编译（最具体的方法是 foo(int...)）。此代码无法在 JDK 7 下编译。**

* * *

要使代码在两个 JDK 中都能正常工作，您需要为编译器提供额外提示以选择正确的方法，例如

```
Id.create(1234, new Object[0]);
Id.create(id, new Object[0]); 
```

这将为`create(long id, Object... parameters)`JDK6 和 JDK7 调用 ，并将为可变参数部分传递一个大小为 0 的数组，在 Java 6 的情况下也会传递原始代码。

尽管如此，这看起来有点奇怪，我可能会选择（为了更好的可读性）**重命名**其中一个方法，以便方法调用不依赖于签名。

您还应该考虑到 Java6 正处于其生命周期结束时，因此可能另一种选择是修改代码，使其首先可以与 Java7 一起编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:47:40.670

当包裹在 Long 中时 long 成为一个对象。

那么编译器如何知道调用哪个方法呢？

对于编译器，由于自动装箱，这两种方法都与方法调用匹配。

如果您调用`create(12)`编译器，则无法决定方法。因为当 long 自动装箱为 Long 时，它将匹配这两种方法。

# ruby - 如何进行非常简单的 Sinatra LDAP 身份验证？

> ID：15830556
> 
> 赞同：5
> 
> 时间：2013-04-05T09:38:18.627
> 
> 标签：ruby, ldap, sinatra

我查看了 Sinatra 文档，他们似乎只引用了 HTTP 身份验证。我正在寻找一种非常简单的方法来根据通过 LDAP 服务器授权/验证的用户来控制对路由的访问。

我已经构建了一个执行 LDAP 位的类，如果用户已成功通过身份验证，则返回一个 LDAP 对象，如果没有，则返回 nil：

```
>>DirectoryUser.authenticate('user', 'password')
#<DirectoryUser:0x007ffb589a2328> 
```

我可以使用它来确定他们是否已成功通过身份验证。

作为下一步，我想将其拼接到一个简单的 Sinatra 应用程序中，该应用程序提供了一个表单来收集 LDAP 用户和密码：

```
require 'directoryUser'
require 'sinatra'

enable :sessions

  get '/form' do
    username        = params[:username]
    password     = params[:password]
    haml :form
  end 
```

然后我只想在“DirectoryUser”对象存在的情况下允许路由：

```
get '/protected' do # Only if DirectoryUser object exists 
    "This route is protected"
end

get '/unprotected' do  
    "This route is unprotected"
end 
```

我花了几个小时试图找到这个问题的答案，但到目前为止，似乎找不到任何对我有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:58:44.753

我可能会选择这样的东西：

```
require 'directoryUser'
require 'sinatra'

enable :sessions

helpers do
  def authorize!
    redirect(to('/login')) unless session[:user_id]
  end
end

get '/login' do
  haml :login # with the login form
end

post '/login' do
  user = DirectoryUser.authenticate(params[:username], params[:password])

  if user
    session[:user_id] = user.id
    # Or: session[:logged_in] = true, depending on your needs.
    redirect to('/protected')
  else
    redirect to('/login')
  end
end

get '/protected' do
  authorize!
  'This route is protected'
end

get '/unprotected' do  
  'This route is unprotected'
end 
```

# php - 我怎样才能不仅通过 id 还通过一列来获取

> ID：15830558
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:38:21.020
> 
> 标签：php, codeigniter, web

这是我的

**模型**

```
public function get_news($NewsId= FALSE)
    {
        if ($NewsId === FALSE)
        {
         $this->db->select('*');
         $this->db->from('news');
         $this->db->where('Status' , 1);
         $this->db->where('Language' , 2);

        return $query->result_array();
        $config['per_page']; $this->uri->segment(3);
        }
        $query = $this->db->get_where('news', array('NewsId' => $NewsId));
        return $query->row_array(); 
```

**控制器**

```
public function single($NewsId)
        {

        $data['news_item'] = $this->news_model->get_news($NewsId);
        if (empty($data['news_item']))
        {
        show_404();
        }
        $data['NewsId'] = $data['news_item']['NewsId'];

        $this->load->view('news/single', $data);

        } 
```

**看法**

```
<?php echo $news_item['TittleNews'];?> 
```

我有其他观点，即 foreach 我所有的新闻表，我想创建更多阅读我在我的代码上创建的它工作正常 **想要使用 NewsId 和另一列阅读更多内容这意味着首先检查 NewsId，然后检查其他列然后向我展示我的观点，这是唯一的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:24:40.310

你可以使用这样的模型方法：

```
 function getBy($data){
    foreach($data as $key=>$value){
      $this->db->where($key,$value);
    }

    $query = $this->db->get('users_table');
    return $query->row(); //or $query->result(); as you want
  } 
```

那么你用它来称呼它

```
$this->model->getBy(
array(
'username'=>'Mark',
'id'=>'90',
'email'=>'asd@asd.com'
);
); 
```

显然，您可以尽可能多地扩展模型方法

# java - 使用 jsoup 解析亚马逊页面返回 204 状态

> ID：15830561
> 
> 赞同：0
> 
> 时间：2013-04-05T09:38:33.563
> 
> 标签：java, html, parsing, jsoup

示例页面：[http ://www.amazon.com/gp/offer-listing/1589942140](http://www.amazon.com/gp/offer-listing/1589942140)

```
public void connect( String url ) {        
    this.conn = Jsoup.connect( url );  
}

/**
 * Executes the request and parses the result.
 * @return 
 */
public boolean parse() 
{
    try {
        this.page = this.conn.get();
        return true;
    } catch (IOException ex) {
        // log it here
        System.out.format("Error: %s%n", ex);
        return false;
    }
} 
```

解析页面会在下面创建 ioexception：

org.jsoup.HttpStatusException：获取 URL 的 HTTP 错误。状态=204，URL= [http://www.amazon.com/gp/offer-listing/1589942140](http://www.amazon.com/gp/offer-listing/1589942140)

我用下面的本机 java url 类尝试了它，它没有创建 IOException：

```
 try {
        URL myURL = new URL("http://www.amazon.com/gp/offer-listing/1589942140");
        URLConnection myURLConnection = myURL.openConnection();
        myURLConnection.connect();
        System.out.format("%s", myURLConnection.getContentType());
    } 
    catch (MalformedURLException e) { 
        // new URL() failed
        System.out.format("Error: %s%n", e);
    } 
    catch (IOException e) {   
        // openConnection() failed
        System.out.format("Error: %s%n", e);
    } 
```

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:15:26.897

以下对我有用：

```
 System.out.println(Jsoup.connect("http://www.amazon.com/gp/offer-listing/1589942140").userAgent("Mozilla").get().text());; 
```

上面尝试的 URL 是您在上面指定的。（示例页面：[http](http://www.amazon.com/gp/offer-listing/1589942140) ://www.amazon.com/gp/offer-listing/1589942140 ）

# php - PHP Mysql 多搜索功能

> ID：15830562
> 
> 赞同：0
> 
> 时间：2013-04-05T09:38:33.577
> 
> 标签：php, mysql, algorithm, join

问题是根据多类别查找特定业务。以下是我的mysql表：

业务表：

```
id | business_name | cat_id | cat2_id | cat3_id | sub_cat_id | sub_cat2_id | sub_cat3_id
1       bz1            1      2          3         1001          2001         3001
2       bz2            1      2          3         1002          2002         3002
3       bz3            1      2          3         1003          2003         3003 
```

business_categories_tbl：

```
id | cat_name
 1     food
 2     restaurants
 3     wine 
```

business_sub_categories_tbl：

```
b_sub_cat_id | b_sub_cat_name | b_maincat_id
 1001             donuts          1
 1002              xx             1
 2001             steakhouse      2
 2001              yy             2
 3001            white            3
 3002             zz              3 
```

如何根据多类别搜索找到特定的公司名称？例如，mysql 查询需要如何才能搜索所有类别，即`cat_id, cat2_id , cat3_id, sub_cat_id ,sub_cat2_id and sub_cat3_id`如果找到匹配项则返回 business_name。我当前的查询只执行 1 个 cat_id 和 1 个 sub_cat_id 搜索，因为加入多个类别没有返回任何内容。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:42:10.817

我从您的帖子中了解到的内容是我尝试在以下查询中构建的。去尝试一下：

```
select business_name  from  business_tbl where '1002' IN (cat_id, cat2_id , cat3_id, sub_cat_id ,sub_cat2_id, sub_cat3_id) 
```

# javascript - 在 Google Maps V3 API 中多次调用 set_at

> ID：15830563
> 
> 赞同：0
> 
> 时间：2013-04-05T09:38:37.177
> 
> 标签：javascript, google-maps-api-3

```
poly = new google.maps.Polyline(polyOptions);
poly.setMap(map);

google.maps.event.addListener(map, 'click', addLatLng);

function addLatLng(event) {

    var path = poly.getPath();

    // Because path is an MVCArray, we can simply append a new coordinate
    // and it will automatically appear
    path.push(event.latLng);

    // Add a new marker at the new plotted point on the polyline.
    var marker = new google.maps.Marker({
        position: event.latLng,
        title: '#' + path.getLength(),
        map: map,
        dragable: false,
        clickable: true,
        name: name,
        raiseOnDrag: false,
    });

    //This event is fired when setAt() is called. The event passes the index that was passed to setAt() and the element that was previously in the array at that index.
    google.maps.event.addListener(path, 'set_at', function(index,oldWP) {                   
        //called when editing the path
        //we need to remove the (current) marker and add a new one at the position

    });

    google.maps.event.addListener(path, 'insert_at', function(index) {
        //when insert happens not at the end of the path but somewhere in the middle
        //We need to completely rerender all makers 

    });
} 
```

Google 文档：**调用 setAt() 时会触发此事件。该事件传递传递给 setAt() 的索引和该索引处先前在数组中的元素。**

但是，此事件被称为 x 次（其中 x 是路径的 # elem）。

任何人都知道这是为什么以及是否可以防止这种情况（除了在内存中保留一个计数器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:53:35.773

您在这里所做的是每次路径更改时都向路径添加新的侦听器。您要做的是只添加一次侦听器。我认为这应该可以解决问题：

```
poly = new google.maps.Polyline(polyOptions);
poly.setMap(map);
var path = poly.getPath();

google.maps.event.addListener(map, 'click', addLatLng);

function addLatLng(event) {

    // Because path is an MVCArray, we can simply append a new coordinate
    // and it will automatically appear
    path.push(event.latLng);

    // Add a new marker at the new plotted point on the polyline.
    var marker = new google.maps.Marker({
        position: event.latLng,
        title: '#' + path.getLength(),
        map: map,
        dragable: false,
        clickable: true,
        name: name,
        raiseOnDrag: false,
    });
}

 //This event is fired when setAt() is called. The event passes the index that was passed to setAt() and the element that was previously in the array at that index.
google.maps.event.addListener(path, 'set_at', function(index,oldWP) {                   
    //called when editing the path
    //we need to remove the (current) marker and add a new one at the position

});

google.maps.event.addListener(path, 'insert_at', function(index) {
    //when insert happens not at the end of the path but somewhere in the middle
    //We need to completely rerender all makers 

}); 
```

# javascript - 如何获取所有被选中的段落的id？

> ID：15830567
> 
> 赞同：1
> 
> 时间：2013-04-05T09:38:58.893
> 
> 标签：javascript, android, html, css

我正在使用 android webview 并为了实现一些我需要集成 javascript 的功能。我是 javascript 新手，请告诉我如何获取段落 id（正在选择的每个段落的 id）。详细信息：

就像我有数据一样-

```
 <p id="01">hhh dhghdg  
    <span id="1.1">dada</span>
    <span id="1.2">dgsdd</span>
</p>
    <p id="02">dsdgs dhgd hdhd
 <span id="2.1">dada</span>
    <span id="2.2">dgsdd</span>
</p> 
```

因此，您选择了一些数据，即“hhh dhghdg dsdgs”，因此该数据属于多个段落 p1 和 p2，因此我想使用 javascript 获取这两个段落的 id。

请告诉我如何得到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:00:13.697

PPK 有一个非常详细的帖子： [http ://www.quirksmode.org/dom/range_intro.html](http://www.quirksmode.org/dom/range_intro.html)

其中描述了范围对象。我以前没有这样做过，但从你需要使用的东西来看：

```
window.getSelection() 
```

它应该返回一个选择对象，您可以从中获取一个包含所有选定元素的范围对象（如上面的链接中所述）

通过扫描 MDN 上的文档： [https ://developer.mozilla.org/en-US/docs/DOM/window.getSelection](https://developer.mozilla.org/en-US/docs/DOM/window.getSelection)

您将获得一个 HTML 字符串，您可以尝试使用正则表达式从中获取所有 id，如下所示：

```
var underSelection = window.getSelection().getRangeAt(0);
var idsRegEx = /#\s(id|class)="[^"]+"/;
var idMatches = idsRegEx.match(underSelection);
//then clean and do something with the ids 
```

我还没有测试过这些，但我希望它能让你开始。

编辑：附加信息如果您使用的是 jQuery，您可以将选择加载到 jQuery 对象中，并通过执行以下操作获取所有 id：

```
var IDs = [];
$(underSelection).find("p").each(function(){ IDs.push(this.id); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:59:29.033

你必须使用

```
document.documentElement.id 
```

或者

```
document.getElementsByTagName('HTML')[0].id 
```

# jquery - jQuery表单验证没有启动

> ID：15830568
> 
> 赞同：2
> 
> 时间：2013-04-05T09:39:04.220
> 
> 标签：jquery, html, forms, validation

我已经编写了以下代码，但表单试图发布好像没有找到 javascript？

代码在`<head>`文档中：

```
<script language="JavaScript" type="text/javascript">
    $('.entrysend').click(function(e){
        e.preventDefault();

        var error = false;
        var name = $('#name').val();
        var address = $('#address').val();
        var phone = $('#phone').val();
        var email = $('#email').val();

        if(name.length == 0){
            var error = true;
            alert("Please complete all fields");
        }
        if(address.length == 0){
            var error = true;
            alert("Please complete all fields");
        }
        if(phone.length == 0){
            var error = true;
            alert("Please complete all fields");
        }
        if(email.length == 0){
            var error = true;
            alert("Please complete all fields");
        }

        if(error == false){
            $.post("compthanks.asp",
                    $(".entry").serialize(),
                    function(result){
                        if($.trim(result) == 'sent'){
                            $('.entrysend').remove();
                            alert("Thanks for entering!");
                        }
                    }
</script> 
```

HTML：

```
<form class="entry" action="compthanks.asp" method="post" class="floatClear" name="entryForm">   
    <br class="floatClear" />
    <div class="formwrapper">
        <input name="name" id="name" type="text" placeholder="FullName" />
    </div>

    <div class="formwrapper">
        <textarea name="address" id="address" placeholder="Address" cols="20" rows="10"></textarea>
    </div>

    <div class="formwrapper">
        <input name="phone" id="phone" type="text" placeholder="ContactNumber" />
    </div>

    <div class="formwrapper">
        <input name="email" id="email" type="text" placeholder="Email" />
    </div>

    <div class="formwrapper floatClear">  
        <input name="submit" type="submit" value="Send Entry" class="entrysend" />
    </div>
</form> 
```

谁能指出为什么表单仍然提交而不是 javascript 启动的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:41:31.827

运行验证 onsubmit（在表单上）而不是 onclick（在按钮上） - 如果验证失败，则返回 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:57:37.090

如果您的 JS 在`<head>`您的页面中，那么这将不起作用。当你添加

```
$('.entrysend').click(function(e){...}); 
```

页面上还没有具有类的元素`entrysend`。

要解决此问题，您有两种选择：

*   将您的 JS 移动到页面底部，在`<form>`元素之后。

*   将您的 JS 包装在`ready`处理程序中：

JS：

```
$(document).ready(function() {
    $('.entrysend').click(function(e){...});
}); 
```

这样，jQuery 将等到所有 HTML 都添加到 DOM 后，才会尝试将点击处理程序附加到`entrysend`元素。

更新：

我刚刚将您的代码添加到 jsFiddle 并注意到您发布的代码中有 JS 错误。它可能只是一个复制/粘贴错误，但它可能是您问题的原因：

你永远不会关闭一半的功能。你以两个花括号结束，它们只关闭你最后一个`function`块。你需要添加`)}})`到你的 JS

*   A`)`关闭`$.post`
*   A`}`关闭`if(error == false)`
*   A关闭处理程序`}`中的匿名函数`click`
*   A`)`关闭点击处理程序

新JS：

```
<script language="JavaScript" type="text/javascript">
    $(document).ready(function() {
        $('.entrysend').click(function(e){
            e.preventDefault();

            var error = false;
            var name = $('#name').val();
            var address = $('#address').val();
            var phone = $('#phone').val();
            var email = $('#email').val();

            if(name.length == 0){
                var error = true;
                alert("Please complete all fields");
            }
            if(address.length == 0){
                var error = true;
                alert("Please complete all fields");
            }
            if(phone.length == 0){
                var error = true;
                alert("Please complete all fields");
            }
            if(email.length == 0){
                var error = true;
                alert("Please complete all fields");
            }

            if(error == false){
                $.post("compthanks.asp", $(".entry").serialize(),function(result){
                    if($.trim(result) == 'sent'){
                        $('.entrysend').remove();
                        alert("Thanks for entering!");
                    }
                });
            }
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:43:24.573

//你的脚本

```
<script language="JavaScript" type="text/javascript">
        $('.entrysend').click(function(e){

        var error = false;
        var name = $('#name').val();
        var address = $('#address').val();
        var phone = $('#phone').val();
        var email = $('#email').val();

        if(name.length == 0){
                    var error = true;
                    alert("Please complete all fields");
                    return false;
                }
        if(address.length == 0){
                    var error = true;
                    alert("Please complete all fields");
                    return false;
                }
        if(phone.length == 0){
                    var error = true;
                    alert("Please complete all fields");
                    return false;
                }
        if(email.length == 0){
                    var error = true;
                    alert("Please complete all fields");
                }

        if(error == false){
                    $.post("compthanks.asp", $(".entry").serialize(),function(result){
                    if($.trim(result) == 'sent'){
                       $('.entrysend').remove();
                       alert("Thanks for entering!");
                    }
                }
        </script> 
```

//你的表格

```
<form class="entry" action="compthanks.asp" method="post" class="floatClear" name="entryForm">   
        <br class="floatClear" />
        <div class="formwrapper">
          <input name="name" id="name" type="text" placeholder="FullName" />
        </div>

        <div class="formwrapper">
          <textarea name="address" id="address" placeholder="Address" cols="20" rows="10"></textarea>
        </div>

        <div class="formwrapper">
          <input name="phone" id="phone" type="text" placeholder="ContactNumber" />
        </div>

        <div class="formwrapper">
          <input name="email" id="email" type="text" placeholder="Email" />
        </div>

        <div class="formwrapper floatClear">  
          <input name="submit" type="button" value="Send Entry" class="entrysend" />
        </div>
        </form> 
```

如果发生任何错误，我已经更改了您的代码并提供了`return false;`声明，以便表单不会被提交。

# pdf - 使用html2pdf在后台保存pdf

> ID：15830569
> 
> 赞同：6
> 
> 时间：2013-04-05T09:39:04.423
> 
> 标签：pdf, html2pdf

我正在尝试使用 html2pdf 类自动生成 pdf。我得到了以下工作正常的代码，只是有人必须手动保存 pdf。但是，每当添加新产品时，我想自动将 pdf 保存到某个文件夹而无需用户干预，并将此值存储在数据库中以供将来参考。如何在不显示任何弹出窗口或要求用户干预的情况下“静默”地保存 pdf 文件？提前致谢。

```
 include('pdf_content.php');
 $content = ob_get_clean();
// convert to PDF
require_once('html2pdf/html2pdf.class.php');
try
{
    $html2pdf = new HTML2PDF('P', 'A4', 'en');
    $html2pdf->pdf->SetDisplayMode('fullpage');
    $html2pdf->setDefaultFont('Arial');
    $html2pdf->writeHTML($content, isset($_GET['vuehtml']));
    //$html2pdf->Output($file_name.'_'.date("dmY").'.pdf');
    $html2pdf->Output($product_id.'_'.$file_name.'_'.date("dmY").'.pdf'); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-05T09:46:06.200

每次添加新产品时，您都可以尝试调用此脚本，尽管那样您不会真正在“后台”中执行此操作...

有关更多信息，请注意问题[“提交表单后如何在后台运行 PHP 脚本？”](https://stackoverflow.com/questions/4626860/how-can-i-run-a-php-script-in-the-background-after-a-form-is-submitted)

*编辑：*

如果您希望将文件保存在服务器上而不是将其输出到浏览器，您可以使用不同的参数。[另见 html2pdf-wiki。](http://wiki.spipu.net/doku.php?id=html2pdf:en:v4:output)请注意，您不能将文件保存在用户的计算机上而不引起注意！

```
$html2pdf->Output('directory/file_xxxx.pdf', 'F'); 
```

# c# - 具有相同标签的 XML 解析

> ID：15830572
> 
> 赞同：0
> 
> 时间：2013-04-05T09:39:07.113
> 
> 标签：c#, xml, c#-4.0, xml-parsing

我需要得到

1.  “输入用户名”、“输入密码”
2.  “stack@gmail.com”/“abcd*”

在单独的列表中

```
<steps id="0" last="3">
  <step id="1" type="ValidateStep">
    <parameterizedString><text>Enter User Name</text></parameterizedString>
    <parameterizedString><text>stack@gmail.com</text></parameterizedString>
    <description>
    </description>
  </step>
  <step id="2" type="ValidateStep">
    <parameterizedString><text>EnterPassword</text> </parameterizedString>
    <parameterizedString><text>abcd*</text></parameterizedString>
    <description></description></step>
  <step id="3" type="ActionStep">
    <parameterizedString>
    <text>Click on Login Button</text>
    </parameterizedString><parameterizedString />
    <description />
  </step>
</steps> 
```

```
XDocument doc = XDocument.Parse(xmlSteps);
var values = (from f in doc.Elements().Descendants()
              select f.Attribute("text").Value).ToArray(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:20:25.310

假设您只需要第 1 步和第 2 步（否则删除带有注释的行），请使用与此类似的内容：

```
var values = doc.Descendants("step")
            .Where(step => new[] { "1", "2" }.Contains(step.Attribute("id").Value)) //only step 1 & 2
            .Select(step => step.Descendants("text").Select(text => text.Value).ToList()); 
```

# csv - 在 C# 中将包含 ObservableCollection 的类导出到 csv

> ID：15830573
> 
> 赞同：2
> 
> 时间：2013-04-05T09:39:23.803
> 
> 标签：csv, export

我找到了许多将类导出到 CSV 的解决方案，但我的问题是：

我要导出的类有一个可观察集合的属性。例如：

```
public class ShipmentForExport
    {
        public string WaybillNumber { get; set; }
        public DateTime WaybillDate { get; set; }
        public string CustomerName { get; set; }
        public string CustomerCode { get; set; }
        public string CollectingBranchName { get; set; }
        public string CollectingBranchCode { get; set; }
        public string RecipientName { get; set; }
        public string RecipientPhoneNumber { get; set; }
        public string RecipientCellphoneNumber { get; set; }
        public string RecipientCompany { get; set; }
        public string DestinationAddress1 { get; set; }
        public string DestinationAddress2 { get; set; }
        public string DestinationCity { get; set; }
        public string DestinationSuburb { get; set; }
        public string DestinationProvince { get; set; }
        public string DestinationCountry { get; set; }
        public string DestinationPostalCode { get; set; }

        ***public ObservableCollection<InHouseParcel> Parcels { get; set; }***

    } 
```

当我尝试将货物列表导出到 csv 时，它可以工作，但显然包裹并没有按照我想要的方式导出。

我也尝试过使用 Filehelpers Library 和 csvHelper。

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T21:28:34.420

使用[CsvHelper](http://joshclose.github.io/CsvHelper/)（我维护的一个库）...

编写时，您必须手动编写，因为不支持编写集合属性。

```
foreach( var record in records )
{
    csv.WriteField( record.WaybillNumber );
    ...
    foreach( var parcel in record.Parcels )
    {
        csv.WriteField( parcel );
    }
} 
```

阅读更容易一些，因为您可以将其添加到映射中。

```
Map( m => m.Parcels ).ConvertUsing( row =>
{
    var oc = new ObservableCollection<InHouseParcel>();
    var parcel = row.GetField<InHouseParcel>( 17 );
    oc.Add( parcel );
} ); 
```

您需要将字段值转换为`InHouseParcel`并循环遍历行中的其余字段。我会把这个任务留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T10:05:02.647

乔希的答案如今已经过时了。您可以使用类型转换器，例如：

```
CsvHelper.TypeConversion.TypeConverterFactory.AddConverter<ObservableCollection<string>>(new CsvHelper.TypeConversion.StringListConverter());

using (var txt = new StreamReader(filename))
using (var reader = new CsvHelper.CsvReader(txt))
{ .... }

namespace CsvHelper.TypeConversion
{
public sealed class StringListConverter : DefaultTypeConverter
{
    public override object ConvertFromString(TypeConverterOptions options, string text)
    {
        var oc = new ObservableCollection<string>();
        if (text.IndexOf('|') >= 0)
        {
            var list = text.Split('|').ToList<string>();// base.ConvertFromString(options, text);
            oc = new ObservableCollection<string>(list);
        }
        return oc;
    }

    public override string ConvertToString(TypeConverterOptions options, object value)
    {
        var l = value as IEnumerable<string>;
        if ( l == null || l.Count() == 0)
        {
            return "";
        }

        return string.Join("|", l);
    }

    public override bool CanConvertFrom(Type type)
    {
        return type == typeof(string);
    }
} 
```

}

# xml - PHP - 使用 SimpleXMLElement 时无法将字符串解析为 XML

> ID：15830575
> 
> 赞同：0
> 
> 时间：2013-04-05T09:39:30.400
> 
> 标签：xml, simplexml, php

我在数据库中有一个带有值的字符串字段：

```
<ProductOrderItem>
<Product>
<ProductOffering>
<id>1</id>
</ProductOffering>
<ComponentProduct>
<ProductOffering>
<Id>10</Id>
</ProductOffering>
<CharacteristicValue>
<Characteristic>
<Name>Color</Name>
</Characteristic>
<Value>black</Value>
</CharacteristicValue>
<CharacteristicValue>
<Characteristic>
<Name>IMEI</Name>
</Characteristic>
<Value>imei100</Value>
</CharacteristicValue>
</ComponentProduct>
<ComponentProduct>
<ProductOffering>
<Id>11</Id>
</ProductOffering>
<CharacteristicValue>
<Characteristic>
<Name>MSISDN</Name>
</Characteristic>
<Value>063</Value>
</CharacteristicValue>
<CharacteristicValue>
<Characteristic>
<Name>IMSI</Name>
</Characteristic>
<Value>064</Value>
</CharacteristicValue>
</ComponentProduct>
</Product>
</ProductOrderItem> 
```

当我尝试时：

```
$xml = new SimpleXMLElement($field); 
```

我得到了例外：

> 字符串不能解析为XML

我在 Notepad++ 中验证了 XML，它显示“未检测到错误”。我真的必须在该字符串字段的某个字段中具有此 XML 值。我的问题在哪里？谢谢

**更新：** 我的字段现在具有价值：

```
<?xml version="1.0" encoding="utf-8"?>
<ProductOrderItem><Product><ProductOffering><id>1</id></ProductOffering><ComponentProduct><ProductOffering><Id>10</Id></ProductOffering><CharacteristicValue><Characteristic><Name>Color</Name></Characteristic><Value>black</Value></CharacteristicValue><CharacteristicValue><Characteristic><Name>IMEI</Name></Characteristic><Value>imei100</Value></CharacteristicValue></ComponentProduct><ComponentProduct><ProductOffering><Id>11</Id></ProductOffering><CharacteristicValue><Characteristic><Name>MSISDN</Name></Characteristic><Value>063</Value></CharacteristicValue><CharacteristicValue><Characteristic><Name>IMSI</Name></Characteristic><Value>064</Value></CharacteristicValue></ComponentProduct></Product></ProductOrderItem> 
```

但仍然是同样的例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:46:51.847

```
$filed='<?xml version="1.0" encoding="utf-8"?>
 <ProductOrderItem>
  <Product>
    <ProductOffering>
      <id>1</id>
    </ProductOffering>
    <ComponentProduct>
      <ProductOffering>
        <Id>10</Id>
      </ProductOffering>
      <CharacteristicValue>
        <Characteristic>
          <Name>Color</Name>
        </Characteristic>
        <Value>black</Value>
      </CharacteristicValue>
      <CharacteristicValue>
        <Characteristic>
          <Name>IMEI</Name>
        </Characteristic>
        <Value>imei100</Value>
      </CharacteristicValue>
    </ComponentProduct>
    <ComponentProduct>
      <ProductOffering>
        <Id>11</Id>
      </ProductOffering>
      <CharacteristicValue>
        <Characteristic>
          <Name>MSISDN</Name>
        </Characteristic>
        <Value>063</Value>
      </CharacteristicValue>
      <CharacteristicValue>
        <Characteristic>
          <Name>IMSI</Name>
        </Characteristic>
        <Value>064</Value>
      </CharacteristicValue>
    </ComponentProduct>
  </Product>
</ProductOrderItem>';

$xml = new SimpleXMLElement($filed);
print_r($xml ); 
```

使用此功能检查 xml

```
function isXML($xml){
   libxml_use_internal_errors(true);

   $doc = new DOMDocument('1.0', 'utf-8');
   $doc->loadXML($xml);

   $errors = libxml_get_errors();

   if(empty($errors)){
       return true;
   }

   $error = $errors[0];
   if($error->level < 3){
       return true;
   }

   $explodedxml = explode("r", $xml);
   $badxml = $explodedxml[($error->line)-1];

   $message = $error->message . ' at line ' . $error->line . '. Bad XML: ' . htmlentities($badxml);
   return $message;
} 
```

样本`echo isXML($filed);`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T21:23:26.520

我在数据库中（以及磁盘上的某些文件中）也有有效的 XML。我可以发给你（如果你真的想看的话）。*但是，在您的代码上下文中，仅在某处*拥有有效的 XML 是完全没用的：

```
$xml = new SimpleXMLElement($field); 
```

更重要的是，`$field`您拥有的变量中的字符串是有效的 XML。如果您在理解错误消息时遇到问题：您在`$field`.

您唯一需要做的就是将有效的 XML 放入该变量中。

最好首先找出该变量内部的确切内容。然后，您可以将其与您的预期进行比较，您可能会立即发现问题并解决它。

HTH。

（提示：如果您发现后仍然碰壁，请提供 的[十六进制转储`$field`](https://stackoverflow.com/q/1057572/367456)）。

# kendo-ui - 根据选择是否可以更改值轴

> ID：15830576
> 
> 赞同：2
> 
> 时间：2013-04-05T09:39:31.303
> 
> 标签：kendo-ui

我有一个要求，即基于树视图复选框选择值轴需要更新。我正在使用 4 个带有 4 个值轴的复选框。当我检查第一项时，对应的值轴应该更改 .3 其他轴应该在看不见的状态。

在这里，我尝试了一些代码并更新了 .

代码：

```
 <div id="treeview"></div>
  <div id="example" class="k-content">
            <div class="chart-wrapper">
                <div id="chart"></div>
            </div>
       </div> 

 var valueAxes = [
       { name: "KM",visible:false,
        title: { text: "KM" ,visible:false}
                                },
                              { name: "Miles Per Gallon",
                                    title: { text: "Miles Per Gallon" }
                                },

                            {
                                name: "Miles",

                                title: { text: "Miles " }
                            },

                            {
                                name: "liters per 100km", 
                                title: { text: "liters per 100km" }
                            }
                        ];
    function createChart() {
                        $("#chart").kendoChart({

                            legend: {
                                position: "top"
                            },
                            series: [{
                                type: "column",
                                data: [20, 40, 45, 30, 50],
                                stack: true,
                                name: "on battery",
                                color: "#003c72"
                            }, {
                                type: "column",
                                data: [20, 30, 35, 35, 40],
                                stack: true,
                                name: "on gas",
                                color: "#0399d4"
                            }, {
                                type: "area",
                                data: [30, 38, 40, 32, 42],
                                name: "mpg",
                                color: "#642381" 

                            }, {
                                type: "area",
                                data: [7.8, 6.2, 5.9, 7.4, 5.6],
                                name: "l/100 km",
                                color: "#e5388a" 

                            }],
                            valueAxes:valueAxes,                      
                            categoryAxis: {
                                categories: ["Mon", "Tue", "Wed", "Thu", "Fri"],

                                axisCrossingValues: [0, 0, 10, 10]
                            }

                        });
                    }

        $(document).ready(function() {    
            createChart();     
            $("#treeview").kendoTreeView({
              checkboxes: {
               checkChildren: true
                },
          dataSource: [{
            id: 1,
            text: "Value axis",
            expanded: true,
            items: [{
                id: 2,
                text: "KM"  
            },
            {
                id: 3,
                text: "Miles Per Gallon" 
            },
              {
                id: 4,
                text: "Miles "   
            },
              {
                id: 5,
                text: "liters per 100km"  
            }]
        }]
    }).data("kendoTreeView");
    $("#treeview").on("change", function (e) {
        var chart = $("#chart").data("kendoChart");
        var checkedSeries = [];    
        $("#treeview").find(":checked").each(function() {
          var nodeText =$(this).parent().parent().text();        
          $.each(valueAxes, function(index, valueAxes) {
             if (valueAxes.name == nodeText) {
              checkedSeries.push(valueAxes);
             checkedSeries.visible==="true";
             checkedSeries.title.visible===true;
                }
            });
        });    
        chart.options.valueAxes = checkedSeries;
        chart.refresh();
    });                     
    }); 
```

jsbin：[值轴变化](http://jsbin.com/eyibar/26/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:57:01.087

为方便起见，我最初加载所有图表轴。它按照你的要求工作......

jsbin：http: [//jsbin.com/eyibar/37/edit](http://jsbin.com/eyibar/37/edit)

```
<html>
    <head>
        <link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
        <link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.rtl.min.css" rel="stylesheet" type="text/css" />
        <link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.default.min.css" rel="stylesheet" type="text/css" />
        <link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.dataviz.min.css" rel="stylesheet" type="text/css" />
        <link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.dataviz.default.min.css" rel="stylesheet" type="text/css" />
        <link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://cdn.kendostatic.com/2013.1.319/js/kendo.all.min.js"></script>
        <meta charset="utf-8" />
        <title>JS Bin</title>
        <style>
            #chart { width: 600px; }
        </style>
    </head>
    <body>
        <div id="treeview"></div>
        <div id="example" class="k-content">
            <div class="chart-wrapper">
                <div id="chart"></div>
            </div>
        </div>

        <script type="text/javascript">
            var valueAxes = [
                {
                    name: "KM",
                    title: { text: "KM" }
                },
                {
                    name: "Miles Per Gallon",
                    title: { text: "Miles Per Gallon" }
                },

               {
                   name: "Miles",
                   title: { text: "Miles " }
               },

               {
                   name: "liters per 100km",
                   title: { text: "liters per 100km" }
               }];

            function createChart(valueAxes) {
                $("#chart").kendoChart({

                    legend: {
                        position: "top"
                    },
                    series: [{
                        type: "column",
                        data: [20, 40, 45, 30, 50],
                        stack: true,
                        name: "on battery",
                        color: "#003c72"
                    }, {
                        type: "column",
                        data: [20, 30, 35, 35, 40],
                        stack: true,
                        name: "on gas",
                        color: "#0399d4"
                    }, {
                        type: "area",
                        data: [30, 38, 40, 32, 42],
                        name: "mpg",
                        color: "#642381"

                    }, {
                        type: "area",
                        data: [7.8, 6.2, 5.9, 7.4, 5.6],
                        name: "l/100 km",
                        color: "#e5388a"

                    }],
                    valueAxes: valueAxes,
                    categoryAxis: {
                        categories: ["Mon", "Tue", "Wed", "Thu", "Fri"],

                        axisCrossingValues: [0, 0, 10, 10]
                    }

                });
            }

            $(document).ready(function () {
                createChart(valueAxes);
                $("#treeview").kendoTreeView({
                    checkboxes: {
                        checkChildren: true
                    },
                    dataSource: [{
                        id: 1,
                        text: "Value axis",
                        expanded: true,
                        items: [{
                            id: 2,
                            text: "KM"
                        },
                        {
                            id: 3,
                            text: "Miles Per Gallon"
                        },
                          {
                              id: 4,
                              text: "Miles "
                          },
                          {
                              id: 5,
                              text: "liters per 100km"
                          }]
                    }]
                }).data("kendoTreeView");

                $("#treeview").on("change", function (e) {
                    var chart = $("#chart").data("kendoChart");
                    var checkedSeries = [];
                    if ($("#treeview").find(":checked").length != 0) {
                        $("#treeview").find(":checked").each(function () {
                            var nodeText = $(this).parent().parent().text();
                            $.each(valueAxes, function (index, valueAxes) {
                                if (valueAxes.name == nodeText.trim()) {
                                    checkedSeries.push(valueAxes);
                                    checkedSeries["visible"] = true;
                                }
                            });
                        });
                        createChart(checkedSeries);
                    }
                    else {
                        createChart(checkedSeries);
                    }
                });
            });

        </script>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:30:01.207

是的，可以一次绑定和取消绑定值轴和系列。
更改您的脚本，如下所示

```
 var valueAxes = [
               {
                   name: "KM", labels: {
                       format: "{0}"
                   }, min: 0,
                   max: 9,

                   title: { text: "KM" }
               },
               {
                   name: "Miles Per Gallon", labels: {
                       format: "{0}%"
                   }, min: 0,
                   max: 5,

                   title: { text: "Miles Per Gallon" }
               },

              {
                  name: "Miles", labels: {
                      format: "{0}%"
                  },

                  title: { text: "Miles " }
              },

              {
                  name: "liters per 100km", min: 0,
                  max: 1,

                  title: { text: "liters per 100km" }
              }];

        var series = [{
            type: "column",
            axis: "KM",
            data: [20, 40, 45, 30, 50],
            stack: true,
            name: "KM",
            color: "#003c72"
        }, {
            type: "column",
            data: [20, 30, 35, 35, 40],
            axis: "Miles Per Gallon",
            stack: true,
            name: "Miles Per Gallon",
            color: "#0399d4"
        }, {
            type: "column",
            data: [30, 38, 40, 32, 42],
            axis: "Miles",
            name: "Miles",
            color: "#642381"

        }, {
            type: "column",
            axis: "liters per 100km",
            data: [7.8, 6.2, 5.9, 7.4, 5.6],
            name: "liters per 100km",
            color: "#e5388a"

        }];
        function createChart(inputValueAxes, inputSeries) {
            $("#chart").kendoChart({

                legend: {
                    position: "top"
                },
                series: inputSeries,
                valueAxes: inputValueAxes,
                categoryAxis: {
                    categories: ["Mon", "Tue", "Wed", "Thu", "Fri"],

                    axisCrossingValues: [0, 0, 10, 10]
                }

            });
        }

        $(document).ready(function () {
            createChart(valueAxes, series);
            $("#treeview").kendoTreeView({
                checkboxes: {
                    checkChildren: true
                },
                dataSource: [{
                    id: 1,
                    text: "Value axis",
                    expanded: true,
                    items: [{
                        id: 2,
                        text: "KM"
                    },
                    {
                        id: 3,
                        text: "Miles Per Gallon"
                    },
                      {
                          id: 4,
                          text: "Miles "
                      },
                      {
                          id: 5,
                          text: "liters per 100km"
                      }]
                }]
            }).data("kendoTreeView");

            $("#treeview").on("change", function (e) {
                var chart = $("#chart").data("kendoChart");
                var checkedSeries = [];
                var checkedAxes = [];
                if ($("#treeview").find(":checked").length !== 0) {
                    $("#treeview").find(":checked").each(function () {
                        var nodeText = $(this).parent().parent().text();

                        $.each(valueAxes, function (index, valueAxes) {
                            if (valueAxes.name == nodeText.trim()) {
                                checkedAxes.push(valueAxes);
                                checkedAxes.visible = true;
                            }
                        });

                        $.each(series, function (index, series) {
                            if (series.name == nodeText.trim()) {
                                checkedSeries.push(series);
                            }
                        });
                    });                    

                    createChart(checkedAxes, checkedSeries);
                }

                else {
                    createChart(checkedAxes, checkedSeries);
                }

            });
        }); 
```

参考这个[http://jsbin.com/eyibar/49/edit](http://jsbin.com/eyibar/49/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:33:13.573

我编辑了你的代码，我可以通过在长度 ==-1 的条件下调用 creatChart(checkedAxes) 函数来绑定和取消绑定值轴，当时系列没有更新。

```
$("#treeview").on("change", function (e) {
              var chart = $("#chart").data("kendoChart");
              var checkedSeries = []; 
              var checkedAxes = [];
                if ($("#treeview").find(":checked").length !== -1){
                   $("#treeview").find(":checked").each(function () {
                   var nodeText = $(this).parent().parent().text();

                    $.each(valueAxes, function (index, valueAxes) {
                           if (valueAxes.name == nodeText) {
                               checkedAxes.push(valueAxes);
                               checkedAxes.visible = true;
                           }
                     });

                   $.each(series, function (index, series) {
                       if (series.name == nodeText) {
                           checkedSeries.push(series);
                       }
                        });
                   });

                    chart.options.series = checkedSeries;
                    chart.options.valeAxes = checkedAxes;
                    chart.refresh();
                }
                    createChart(checkedAxes);
            }); 
```

但如果我尝试不调用 creatChart(checkedAxes) 函数，则绑定到图表的系列会更新。

```
$("#treeview").on("change", function (e) {
              var chart = $("#chart").data("kendoChart");
              var checkedSeries = []; 
              var checkedAxes = [];
                if ($("#treeview").find(":checked").length !== -1){
                   $("#treeview").find(":checked").each(function () {
                   var nodeText = $(this).parent().parent().text();

                    $.each(valueAxes, function (index, valueAxes) {
                           if (valueAxes.name == nodeText) {
                               checkedAxes.push(valueAxes);
                               checkedAxes.visible = true;
                           }
                     });

                   $.each(series, function (index, series) {
                       if (series.name == nodeText) {
                           checkedSeries.push(series);
                       }
                        });
                   });

                    chart.options.series = checkedSeries;
                    chart.options.valeAxes = checkedAxes;
                    chart.refresh();
                }
            }); 
```

我一次没有得到这两种情况。对不起，希望你找到解决方案。

干杯，快乐编码...

# javascript - 避免“脚本运行时间过长”对话框，我应该拆分我的函数并每隔一段时间运行它吗？

> ID：15830577
> 
> 赞同：1
> 
> 时间：2013-04-05T09:39:32.003
> 
> 标签：javascript, performance, internet-explorer, loops

我的一个页面上运行了一个非常大的 JavaScript for 循环。它是如此之大，以至于在旧版本中导致 IE 弹出窗口显示如下内容：“此页面的脚本使其运行缓慢，您要终止它吗？”

我相信我已经尽可能地优化了它，所以现在我正在寻找替代方法来做到这一点。

我想知道创建一个运行前 100 次迭代、然后是第二个 100 次迭代、然后是第三个等等直到所有迭代都完成的间隔对我是否有益？这会阻止 IE 弹出窗口声称脚本运行太慢吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:48:08.963

Javascript 是单线程的，所以这是主要障碍。

如果您想执行大量计算，最好使用[Workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)，但是这些仅受现代浏览器支持。这样您的计算就不会减慢应该在主线程中的 UI。这是构建桌面应用程序时的常见做法。

如果您不介意花费比应有的时间更长的时间，那么拆分计算可能是一个好主意。如果您的时间正确，那应该可以防止弹出窗口出现。

您或许还应该重新考虑在客户端执行这么多计算的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:49:50.447

你可以使用这个：[多线程](http://www.sitepoint.com/multi-threading-javascript/)。它不是真正的多线程，它只是在玩定时器。它将阻止弹出窗口。但我不确定在这种情况下是否有必要，除非你正在制作一款完整的游戏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:57:08.040

只要您的代码没有足够快地将控制权交还给浏览器的主事件处理循环，就会出现“脚本太长”的浏览器弹出窗口。

按照您在问题中的建议使用`setTimeout`批量触发您的计算确实会阻止弹出窗口出现。

定期返回事件循环还将允许浏览器保持对其他 UI 事件的响应 - 您可以（例如）提供“取消”按钮。我建议您尝试至少每秒屈服一次，如果不是比这更频繁的话。

# javascript - 在 Android 上使用 PhoneGap 进行地理定位

> ID：15830580
> 
> 赞同：2
> 
> 时间：2013-04-05T09:39:45.083
> 
> 标签：javascript, android, cordova, geolocation, gps

我在使用 PhoneGap 的应用程序上工作。目前，我只在 Android 上测试它。我的应用程序中有几个页面需要地理定位功能。

所以我用这行代码做了一个JS来处理它（当然这不是我唯一的代码行）：navigator.geolocation.watchPosition(successGeolocation, errorGeolocation, {maximumAge: 5000, enableHighAccuracy: true});

地理位置需要尽可能准确，因此我使用 GPS，并且可能需要一些时间才能进行 GPS 定位。

问题是当用户从一个页面导航到另一个页面时。WatchPosition 停止（这是正常的，因为用户加载了另一个页面），当我回忆起它时，GPS 需要再次修复。

这很烦人，我搜索了一个解决方案来保持 GPS 处于活动状态。有人对我有想法吗？也许通过插件或原生 Android LoC，我可以在整个应用程序生命周期中保持其活跃？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:29:13.340

第一步，您应该创建一个 Android 插件，该插件将为您提供用于接收位置数据的 API。

创建插件非常简单，在此处进行了说明： [插件开发指南](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html)和[在 Android 上开发插件](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)。[您还可以在此处](https://stackoverflow.com/a/14991641/1755778)查看创建 Cordova 插件的示例。

接下来，创建一个位置监视器类。您可以将其设为单例并从您的主要活动中对其进行初始化。

这是一个简单但有效的代码，我从多个来源和许多测试中编译来满足我的需求。主要代码取自[这里](https://code.google.com/p/openmobster/wiki/LocationApp)，尽管我尽可能地对其进行了简化。

```
public class LocationMonitor
{
    private LocationListener locationListener = null;
    private LocationManager locationManager = null;
    private Location location = null;

    public LocationMonitor()
    {
    }

    public void startGPSActivity(Context context)
    {
        LocationLooper looper = new LocationLooper();
        looper.start();

        while (!looper.isReady())
        {
        }

        looper.handler.post(new LocationBootstrapper(context));
    }

    public void stopGPSActivity()
    {
        locationManager.removeUpdates(locationListener);
    }

    public Location getLocation()
    {
        return location;
    }

    private class LocationLooper extends Thread
    {
        private Handler handler;

        private LocationLooper()
        {
        }

        public void run()
        {
            Looper.prepare();

            this.handler = new Handler();

            Looper.loop();
        }

        public boolean isReady()
        {
            return this.handler != null;
        }
    }

    private class LocationBootstrapper implements Runnable
    {       
        private Context context;

        private LocationBootstrapper(Context context)
        {
            this.context = context;
        }

        public void run()
        {
            locationListener = new LocationListenerImpl();
            locationManager = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 1, locationListener);
        }
    }

    private class LocationListenerImpl implements LocationListener
    {
        private LocationListenerImpl()
        {
        }

        @Override
        public void onLocationChanged(Location location) 
        {
            LocationMonitor.this.location = location;
            Log.i("LocationMonitor", "New location: lat= " + location.getLatitude() + " lng=" + location.getLongitude() + " acc=" + location.getAccuracy());
        }

        @Override
        public void onProviderDisabled(String provider) 
        {       
        }

        @Override
        public void onProviderEnabled(String provider) 
        {       
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) 
        {       
        }
    }
} 
```

现在从您的插件访问 LocationMonitor 类，您就有了所需的解决方案 - 页面更改不会重新初始化您的 GPS，并且您的 PhoneGap 应用程序可以使用位置数据。

干杯

# php - JAXL 异常：此流不支持 SSL/加密

> ID：15830581
> 
> 赞同：1
> 
> 时间：2013-04-05T09:39:47.397
> 
> 标签：php, facebook-graph-api, xmpp, facebook-chat

我使用 jaxl.V3 连接到 facebook。这是我的代码：

```
<?php

  require_once '../jaxl.php';
  $client = new JAXL(array(
     'jid' => '(myID)'.'@chat.facebook.com',
     'fb_app_key' => '(MYKeyApp)',
     'fb_access_token' => '(myAccessToken)',
     'domain'=>'chat.facebook.com',
     'host' => 'chat.facebook.com',
     'port'=>5222,
     'boshHost'=>'localhost',
     'priv_dir'  => 'D:/wamp/www/jaxl/.jaxl/tmp',
     'resource' => 'resource', 
     'force_tls' => true,
     'auth_type' => 'X-FACEBOOK-PLATFORM',
     'log_level' => JAXL_DEBUG,
    ));

    $client->add_cb('on_auth_success', function() {
        global $client;
        _info("got on_auth_success cb, jid ".$client->full_jid->to_string());
        $client->set_status("Available!", "ol", 10);
        $msg = new XMPPMsg(array('to'=>'-(myFriID)@chat.facebook.com'), $txtMessage);
            $client->send($msg);
   });

    $client->add_cb('on_auth_failure', function($reason) {
        global $client;
        $client->send_end_stream();
        _info("got on_auth_failure cb with reason $reason");

     });

     $client->add_cb('on_chat_message', function($stanza) {
        global $client;

       // echo back incoming message stanza
       $stanza->to = $stanza->from;
       $stanza->from = $client->full_jid->to_string();
       $client->send($stanza);
       _info("echo message sent");

           sendMessage($client);
   });

   $client->add_cb('on_disconnect', function() {
       _info("got on_disconnect cb");
   });

   //
   // finally start configured xmpp stream
   //
   $client->start();
   echo "done\n";
   ?> 
```

我已成功通过使用控制台命令行进行 sendMessage 聊天。但我需要的是浏览器。相同的代码配置，如果我通过浏览器运行它，我会在日志文件中收到消息错误，例如：

```
jaxl_fsm:56 - 2013-04-05 23:00:57 - calling state handler 'setup' for incoming event   'connect'
jaxl_socket_client:91 - 2013-04-05 23:00:57 - trying tcp://chat.facebook.com:5222
jaxl_socket_client:96 - 2013-04-05 23:00:57 - connected to tcp://chat.facebook.com:5222
jaxl_loop:82 - 2013-04-05 23:00:57 - active read fds: 1, write fds: 0
jaxl_fsm:65 - 2013-04-05 23:00:57 - current state 'connected'
jaxl_fsm:56 - 2013-04-05 23:00:57 - calling state handler 'connected' for incoming event 'start_stream'
jaxl_loop:82 - 2013-04-05 23:00:57 - active read fds: 1, write fds: 1
jaxl_fsm:65 - 2013-04-05 23:00:57 - current state 'wait_for_stream_start'
jaxl_socket_client:187 - 2013-04-05 23:00:57 - sent 226/226 of data
jaxl_socket_client:188 - 2013-04-05 23:00:57 - <stream:stream    xmlns:stream="http://etherx.jabber.org/streams" version="1.0" from="100004083275041@chat.facebook.com" to="chat.facebook.com" xmlns="jabber:client"  xml:lang="en" xmlns:xml="http://www.w3.org/XML/1998/namespace">
jaxl_loop:100 - 2013-04-05 23:00:57 - active read fds: 1, write fds: 0
jaxl_socket_client:174 - 2013-04-05 23:00:57 - read 173/173 of data
jaxl_socket_client:175 - 2013-04-05 23:00:57 - <?xml version="1.0"?><stream:stream id="E21DE38D" from="chat.facebook.com" version="1.0" xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" xml:lang="en">
jaxl_fsm:56 - 2013-04-05 23:00:57 - calling state handler 'wait_for_stream_start' for incoming event 'start_cb'
jaxl_fsm:65 - 2013-04-05 23:00:57 - current state 'wait_for_stream_features'
jaxl_socket_client:174 - 2013-04-05 23:00:57 - read 227/400 of data
jaxl_socket_client:175 - 2013-04-05 23:00:57 - <stream:features><starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/><mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl"><mechanism>X-FACEBOOK-PLATFORM</mechanism><mechanism>DIGEST-MD5</mechanism></mechanisms></stream:features>
jaxl_fsm:56 - 2013-04-05 23:00:57 - calling state handler 'wait_for_stream_features' for incoming event 'stanza_cb'
jaxl_loop:82 - 2013-04-05 23:00:57 - active read fds: 1, write fds: 1
jaxl_fsm:65 - 2013-04-05 23:00:57 - current state 'wait_for_tls_result'
jaxl_socket_client:187 - 2013-04-05 23:00:57 - sent 61/287 of data
jaxl_socket_client:188 - 2013-04-05 23:00:57 - <starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"></starttls>
jaxl_loop:100 - 2013-04-05 23:00:57 - active read fds: 1, write fds: 0
jaxl_socket_client:174 - 2013-04-05 23:00:58 - read 50/450 of data
jaxl_socket_client:175 - 2013-04-05 23:00:58 - <proceed xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>
jaxl_fsm:56 - 2013-04-05 23:00:58 - calling state handler 'wait_for_tls_result' for incoming event 'stanza_cb'
jaxl_exception:48 - 2013-04-05 23:00:58 - got jaxl exception construct with stream_socket_enable_crypto() [<a href='streams.crypto'>streams.crypto</a>]: this stream does not support SSL/crypto, 2, D:\wamp\www\jaxl\core\jaxl_socket_client.php, 127
jaxl_exception:75 - 2013-04-05 23:00:58 - exception handler catched {"xdebug_message":"<tr><th align='left' bgcolor='#f57900' colspan=\"5\"><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )<\/span> JAXLException: stream_socket_enable_crypto() [<a href='streams.crypto'>streams.crypto<\/a>]: this stream does not support SSL\/crypto in D:\\wamp\\www\\jaxl\\core\\jaxl_socket_client.php on line <i>127<\/i><\/th><\/tr>\n<tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack<\/th><\/tr>\n<tr><th align='center' bgcolor='#eeeeec'>#<\/th><th align='left' bgcolor='#eeeeec'>Time<\/th><th align='left' bgcolor='#eeeeec'>Memory<\/th><th align='left' bgcolor='#eeeeec'>Function<\/th><th align='left' bgcolor='#eeeeec'>Location<\/th><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>1<\/td><td bgcolor='#eeeeec' align='center'>0.0005<\/td><td bgcolor='#eeeeec' align='right'>396352<\/td><td bgcolor='#eeeeec'>{main}(  )<\/td><td title='D:\\wamp\\www\\jaxl\\examples\\xfacebook_platform_client.php' bgcolor='#eeeeec'>..\\xfacebook_platform_client.php<b>:<\/b>0<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>2<\/td><td bgcolor='#eeeeec' align='center'>0.0211<\/td><td bgcolor='#eeeeec' align='right'>1553464<\/td><td bgcolor='#eeeeec'>JAXL->start(  )<\/td><td title='D:\\wamp\\www\\jaxl\\examples\\xfacebook_platform_client.php' bgcolor='#eeeeec'>..\\xfacebook_platform_client.php<b>:<\/b>71<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>3<\/td><td bgcolor='#eeeeec' align='center'>0.5094<\/td><td bgcolor='#eeeeec' align='right'>1556144<\/td><td bgcolor='#eeeeec'>JAXLLoop::run(  )<\/td><td title='D:\\wamp\\www\\jaxl\\jaxl.php' bgcolor='#eeeeec'>..\\jaxl.php<b>:<\/b>386<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>4<\/td><td bgcolor='#eeeeec' align='center'>0.9847<\/td><td bgcolor='#eeeeec' align='right'>1570632<\/td><td bgcolor='#eeeeec'>JAXLLoop::select(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_loop.php' bgcolor='#eeeeec'>..\\jaxl_loop.php<b>:<\/b>109<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>5<\/td><td bgcolor='#eeeeec' align='center'>0.9883<\/td><td bgcolor='#eeeeec' align='right'>1571360<\/td><td bgcolor='#eeeeec'><a href='http:\/\/www.php.net\/call_user_func' target='_new'>call_user_func<\/a>\n(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_loop.php' bgcolor='#eeeeec'>..\\jaxl_loop.php<b>:<\/b>133<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>6<\/td><td bgcolor='#eeeeec' align='center'>0.9883<\/td><td bgcolor='#eeeeec' align='right'>1571376<\/td><td bgcolor='#eeeeec'>JAXLSocketClient->on_read_ready(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_loop.php' bgcolor='#eeeeec'>..\\jaxl_loop.php<b>:<\/b>133<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>7<\/td><td bgcolor='#eeeeec' align='center'>0.9915<\/td><td bgcolor='#eeeeec' align='right'>1572888<\/td><td bgcolor='#eeeeec'><a href='http:\/\/www.php.net\/call_user_func' target='_new'>call_user_func<\/a>\n(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_socket_client.php' bgcolor='#eeeeec'>..\\jaxl_socket_client.php<b>:<\/b>178<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>8<\/td><td bgcolor='#eeeeec' align='center'>0.9915<\/td><td bgcolor='#eeeeec' align='right'>1572936<\/td><td bgcolor='#eeeeec'>JAXLXmlStream->parse(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_socket_client.php' bgcolor='#eeeeec'>..\\jaxl_socket_client.php<b>:<\/b>178<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>9<\/td><td bgcolor='#eeeeec' align='center'>0.9916<\/td><td bgcolor='#eeeeec' align='right'>1573000<\/td><td bgcolor='#eeeeec'><a href='http:\/\/www.php.net\/xml_parse' target='_new'>xml_parse<\/a>\n(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_xml_stream.php' bgcolor='#eeeeec'>..\\jaxl_xml_stream.php<b>:<\/b>92<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>10<\/td><td bgcolor='#eeeeec' align='center'>0.9916<\/td><td bgcolor='#eeeeec' align='right'>1573960<\/td><td bgcolor='#eeeeec'>JAXLXmlStream->handle_end_tag(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_xml_stream.php' bgcolor='#eeeeec'>..\\jaxl_xml_stream.php<b>:<\/b>92<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>11<\/td><td bgcolor='#eeeeec' align='center'>0.9917<\/td><td bgcolor='#eeeeec' align='right'>1574328<\/td><td bgcolor='#eeeeec'><a href='http:\/\/www.php.net\/call_user_func' target='_new'>call_user_func<\/a>\n(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_xml_stream.php' bgcolor='#eeeeec'>..\\jaxl_xml_stream.php<b>:<\/b>163<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>12<\/td><td bgcolor='#eeeeec' align='center'>0.9917<\/td><td bgcolor='#eeeeec' align='right'>1574720<\/td><td bgcolor='#eeeeec'>JAXLFsm->__call(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_xml_stream.php' bgcolor='#eeeeec'>..\\jaxl_xml_stream.php<b>:<\/b>0<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>13<\/td><td bgcolor='#eeeeec' align='center'>0.9932<\/td><td bgcolor='#eeeeec' align='right'>1576088<\/td><td bgcolor='#eeeeec'><a href='http:\/\/www.php.net\/call_user_func' target='_new'>call_user_func<\/a>\n(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_fsm.php' bgcolor='#eeeeec'>..\\jaxl_fsm.php<b>:<\/b>58<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>14<\/td><td bgcolor='#eeeeec' align='center'>0.9933<\/td><td bgcolor='#eeeeec' align='right'>1576136<\/td><td bgcolor='#eeeeec'>XMPPStream->wait_for_tls_result(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_fsm.php' bgcolor='#eeeeec'>..\\jaxl_fsm.php<b>:<\/b>58<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>15<\/td><td bgcolor='#eeeeec' align='center'>0.9933<\/td><td bgcolor='#eeeeec' align='right'>1576136<\/td><td bgcolor='#eeeeec'>JAXLSocketClient->crypt(  )<\/td><td title='D:\\wamp\\www\\jaxl\\xmpp\\xmpp_stream.php' bgcolor='#eeeeec'>..\\xmpp_stream.php<b>:<\/b>483<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>16<\/td><td bgcolor='#eeeeec' align='center'>0.9933<\/td><td bgcolor='#eeeeec' align='right'>1576232<\/td><td bgcolor='#eeeeec'><a href='http:\/\/www.php.net\/stream_socket_enable_crypto' target='_new'>stream_socket_enable_crypto<\/a>\n(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_socket_client.php' bgcolor='#eeeeec'>..\\jaxl_socket_client.php<b>:<\/b>127<\/td><\/tr>\n<tr><td bgcolor='#eeeeec' align='center'>17<\/td><td bgcolor='#eeeeec' align='center'>0.9933<\/td><td bgcolor='#eeeeec' align='right'>1577176<\/td><td bgcolor='#eeeeec'>JAXLException::error_handler(  )<\/td><td title='D:\\wamp\\www\\jaxl\\core\\jaxl_socket_client.php' bgcolor='#eeeeec'>..\\jaxl_socket_client.php<b>:<\/b>127<\/td><\/tr>\n"}
jaxl:228 - 2013-04-05 23:00:58 - cleaning up pid and unix sock files
jaxl_clock:55 - 2013-04-05 23:00:58 - shutting down clock server... 
```

我已经在 PHP.INI 中启用了 extension=php_openssl.dll。请帮我解决它。请有任何想法。我很快就会寻求你的帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T02:26:21.253

如果有人使用 Jaxl 库并遇到与我相同的问题。[您只需通过此](http://www.phpjoel.com/2011/04/07/installing-ssl-using-openssl-on-a-wamp-localhost/)安装 OpenSSL

为窗口。一切都是 SSL 不支持的问题都可以解决。如果您像我一样尝试使用 JAXL 库，我建议您使用[http_bind进行测试](https://github.com/abhinavsingh/JAXL/blob/v3.x/examples/http_bind.php)

这可能比我现在尝试的要容易。:D

# c# - 如何使用 Javascript 从下拉列表中获取先前选定的项目和当前选定的项目？

> ID：15830584
> 
> 赞同：1
> 
> 时间：2013-04-05T09:39:58.553
> 
> 标签：c#, jquery, asp.net

如何使用 Javascript 从下拉列表中获取先前选定的项目和当前选定的项目？我认为，使用几个隐藏字段并在其中存储先前和当前值。更改下拉列表值时，将当前隐藏字段值复制到上一个。隐藏字段值，然后用选定的下拉值替换当前隐藏字段值。但我是 jquery 的新手。所以我不知道如何在上述条件下工作。任何人都知道 Jquery 意味着回答我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:42:37.343

对于当前选定的项目，这应该可以工作

```
var yourSelect = document.getElementById('id');
alert(yourSelect.options[yourSelect.selectedIndex].value) 
```

对于以前的

```
<select name="test">
    <option value="test1">test1</option>
    <option value="test2">test2</option>
    <option value="test3">test3</option>
    <option value="test4">test4</option>
</select> 
```

```
(function () {
    var previous;

    $("select[name=test]").focus(function () {
        // Store the current value on focus, before it changes
        previous = this.value;
    }).change(function() {
        // Do soomething with the previous value after the change
        document.getElementById("log").innerHTML = "<b>Previous: </b>"+previous;

        previous = this.value;
    });
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T05:33:50.283

使用以下：

document.getElementById("ddlcountry").options[document.getElementById("ddlcountry").selectedIndex].value

# windows-phone-7 - 如何使用 C# 在 windows phone 中将 .Gif 图像转换为 .Jpg

> ID：15830589
> 
> 赞同：0
> 
> 时间：2013-04-05T09:40:21.980
> 
> 标签：windows-phone-7

> 我想在 Windows Phone 应用程序中使用 C# 转换 .jpg 中的 .gif 图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:05:00.890

我认为没有任何规定可以直接使用 .gif 图像。但一种方法是获取动画的所有关键图像并创建故事板，或者您可以使用第三方工具。

首先使用Httprequest或Webclient下载图像（任何），然后通过以下方式将gif（如果是gif）转换为jpg或png。

```
GifDecoder gd = new GifDecoder();
ImageTools.ExtendedImage img = new ImageTools.ExtendedImage();
gd.Decode(img, stream);              //stream means image stream
PngEncoder png = new PngEncoder();
png.Encode(img, isoFileStreamdownload);  //isoFileStreamdownload means stream, which is used to save image in image file like(image.png)) 
```

使用 ImageTools.dll、ImageTools.IO.Gif.dll、ImageTools.IO.Png.dll（图像工具）

您可以从 codeplex 获取 dll 文件，或者只是 google 一下。

# html - 多页通讯

> ID：15830592
> 
> 赞同：0
> 
> 时间：2013-04-05T09:40:24.600
> 
> 标签：html, dom, html-email, newsletter

我想知道是否可以创建多页电子通讯。我知道电子邮件客户端通常非常严格（当然有充分的理由），因此必须使用基于表格的普通 html 进行设计，甚至图像下载也必须手动批准，更不用说脚本了。但也许......在 html5 或其他先进技术的帮助下，可以将附加页面包含到附件中并以某种方式使用它们。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:45:18.627

您最好的机会是创建链接到网页的“阅读更多...”按钮。

如果您想拥有多页新闻通讯，有多种选择：

*   ~~框架~~
*   ~~框架~~
*   ~~使用 JavaScript~~

不幸的是，所有这些选项都直接发送到垃圾邮件箱。

即使会有 HTML5 标记或仅元素选项，例如。一个滑块，大多数电子邮件客户端在接下来的数十亿年都不会支持这些新功能。Webdev 抱怨 IE，但电子邮件客户端更糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:50:08.417

通常电子邮件仅支持 (x)html 和有限的 css。与不断发展的网络不同，流行的电子邮件客户端（例如 Outlook）已经过时（并且使用 MS Word 渲染引擎）。当今常见的 Web 实践中的大部分 html5/css3 并未在主要电子邮件客户端中得到广泛支持。

作为更多链接的唯一选择是在线托管附加信息（典型的是登录页面），或者使用锚链接并将附加信息放在电子邮件的下方。然而，锚链接不是 100% 支持的。您可能会让 iframe 在一个或两个电子邮件客户端中工作，但它在大多数情况下都不起作用。

电子邮件不支持 Javascript 或任何其他服务器或客户端语言。

# android - 设置活动 - 新对话框

> ID：15830597
> 
> 赞同：-4
> 
> 时间：2013-04-05T09:40:39.400
> 
> 标签：android, dialog

嗨，谁能告诉我如何制作如下图所示的对话框片段以及如何将结果传递回活动？ ![在此处输入图像描述](https://i.stack.imgur.com/d7nR3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:42:07.677

```
AlertDialog.Builder editalert = new AlertDialog.Builder(this);

editalert.setTitle("messagetitle");
editalert.setMessage("here is the message");

final EditText input = new EditText(this);
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
        LinearLayout.LayoutParams.FILL_PARENT,
        LinearLayout.LayoutParams.FILL_PARENT);
input.setLayoutParams(lp);
editalert.setView(input);

editalert.setPositiveButton("Send via email", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {

    }
});

editalert.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:49:08.287

创建一个带有editext 和两个按钮的自定义对话框。

dilog.xml

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/ok"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText1"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="20dp"
    android:text="OK" />

<Button
    android:id="@+id/anuluj"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/ok"
    android:layout_alignBottom="@+id/ok"
    android:layout_marginLeft="35dp"
    android:layout_toRightOf="@+id/ok"
    android:text="Anuluj" />

</RelativeLayout> 
```

在您的活动中，将 cusotm 布局设置为您的对话框

```
public void showpopup()  
{
final Dialog d = new Dialog(MainActivity.this);
d.setTitle("my title");
d.setContentView(R.layout.dialog);
Button ok = (Button) d.findViewById(R.id.ok);
final EditText ed= (EditText) d.findViewById(R.id.editText1);
ok.setOnClickListener(new OnClickListener()
{

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        String s= ed.getText().toString();//get text form editext

    }

});
 Button anuluj = (Button) d.findViewById(R.id.anuluj);

    anuluj.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            d.cancel();

        }

    });
    d.show();

   } 
```

# r - 将列附加到满足特定条件的行

> ID：15830600
> 
> 赞同：3
> 
> 时间：2013-04-05T09:40:46.273
> 
> 标签：r, csv, rows, output

我是 SO 和 R 编程语言的新手。

我有两个 csv 格式的数据集。它们每个都包含几列。假设：-第一个文件 a.csv 包含列 A、B、C、D -第二个文件 b.csv 包含列 A、B、Y、Z

我想将 A、B 在两个文件（条件）中包含相同值的所有行输出到一个新的 output.csv 文件中，并将 b.csv 中的 Y、Z 附加到 a.csv 中的 C、D 仅用于满足（条件）的行。

这是一个例子：

一个.csv

```
 A      B      C      D
    1      a      0      1
    56     b      2      3
    321    b      0      0 
```

b.csv

```
 A      B      Y      Z
    1      a      4      4
    56     b      5      5
    321    o      0      10 
```

输出.csv

```
 A      B      C      D      Y      Z
    1      a      0      1      4      4
    56     b      2      3      5      5 
```

我已经尝试了几个小时，但没有任何输出正是我想要的。我真的很感激能从你的回复中学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:51:59.520

可以通过合并来完成 -

```
output <- merge(a, b, by.x=c(1,2)) 
```

有关其他信息，请检查 ?merge

# php - 在 ZF2 中如何使视图函数在控制器中运行

> ID：15830603
> 
> 赞同：4
> 
> 时间：2013-04-05T09:40:59.750
> 
> 标签：php, zend-framework2, zend-view, zend-controller

我希望视图文件的功能也可以在控制器文件中运行。

例如，我希望`$this->escapeHtml()`仅在视图文件中运行的哪个通过某种方式在控制器中运行，例如`$this->...->escapeHtml()`

这可能吗？请帮忙。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-05T09:57:56.617

您需要获取`ViewHelperManager`并提取`EscapeHtml`帮助程序。这是一个如何从控制器执行此操作的示例：

```
$viewHelperManager = $this->getServiceLocator()->get('ViewHelperManager');
$escapeHtml = $viewHelperManager->get('escapeHtml'); // $escapeHtml can be called as function because of its __invoke method       
$escapedVal = $escapeHtml('string'); 
```

请注意，建议在视图脚本中而不是在控制器中转义并显示输出。

# c# - 如何以编程方式将 ListView 滚动到最后一个元素 - Compact Framework

> ID：15830607
> 
> 赞同：2
> 
> 时间：2013-04-05T09:41:09.297
> 
> 标签：c#, listview, compact-framework, autoscroll

我正在使用 Windows Mobile 6.1 上的 3.5 Compact Framework 开发应用程序。我有一个`ListView`并且我想在添加项目时*自动滚动此列表。*

我能怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T10:26:05.157

```
 listView.EnsureVisible(listView.Items.Count - 1); 
```

# java - 如何解决 Android 中的 Array IndexOutOfBoundException

> ID：15830609
> 
> 赞同：1
> 
> 时间：2013-04-05T09:41:14.853
> 
> 标签：java, android, arraylist, hashmap

我有 5 个年份列表和 5 个与年份列表相对应的金额列表。

```
year_Earnings = [2011,2012,2013];
year_Expense = [2011,2012];
year_Investment = [2013];
year_Returns=[];
year_Savings=[2011,2012,2013];

amount_Earnings = [10,20,7];
amount_Expense = [5,10];
amount_Investment = [5];
amount_Returns=[];
amount_Savings=[5,10,7]; 
```

显然，当我尝试在单个 for 循环中迭代所有列表时，我会得到 ArrayIndexOutOfBoundException。所以我使用下面的代码将所有列表转换为带有键值对的哈希映射

```
 Map<Double, Double> earningsMap = listToMap(year_Earnings, amount_Earnings);
     Map<Double, Double> expensesMap = listToMap(year_Expense, amount_Expense);
     Map<Double, Double> investmentMap = listToMap(year_Investment, amount_Investment);
     Map<Double, Double> returnsMap = listToMap(year_Returns, amount_Returns);
     Map<Double, Double> savingsMap = listToMap(year_Savings, amount_Savings);

public Map<Double, Double> listToMap(List<Double> years, List<Double> money) {
    Map<Double, Double> newMap = new HashMap<Double, Double>();
    if (years == null || money == null || years.size() != money.size()) {
        throw new IllegalArgumentException();
    }
    for (int i=0; i< years.size(); i++ ) {
        newMap.put(years.get(i), money.get(i));
    }

    return newMap;
} 
```

现在我想要如下列表

```
year_Earnings = [2011,2012,2013];
year_Expense = [2011,2012,2013];
year_Investment = [2011,2012,2013];
year_Returns=[2011,2012,2013];
year_Savings=[2011,2012,2013];

amount_Earnings = [10,20,7];
amount_Expense = [5,10,0];
amount_Investment = [0,0,5];
amount_Returns=[0,0,0];
amount_Savings=[5,10,7]; 
```

谁能帮我做这件事..提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:56:18.817

You can do it without any additional data structure, using the following utility method:

```
public static int[] values(int[] arr, int[] years, int firstYear, int lastYear) {
        int[] res = new int[lastYear-firstYear+1];
        int arrPos = 0;
        for(int i = 0; i < res.length; i++) {
            int year = firstYear + i;
            if (arrPos==arr.length || years[arrPos] >  year)
                res[i] = 0;
            else
                res[i] = arr[arrPos++];
        }
        return res;
    } 
```

The input array `arr` can have any number of gaps, and the output will be an array corresponding to consecutive years, from firstYear to lastYear.

It requires that you first find the minimum and maximum year value in all year arrays.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:04:59.887

我建议您不要使用这种复杂且健壮的架构，而不要使用它。

存储交易类型的枚举

```
public enum FinancialType {
 EARNING,
 EXPENSE,
 INVESTMENT,
 RETURN,
 SAVING;
} 
```

将存储

```
public class FinancialOperation {
  private final FinancialType type;
  private final int year;
  private final BigDecimal value;
} 
```

然后将列表转换为结构的 util 方法。

```
 private List<FinancialOperation> createFinancialOperation(FinancialType type, List<Double> years, List<Double> money) {

     List<FinancialOperation> result = new ArrayList<>();

     for(int i = 0; i < years.size(); i++) {

        Double year = years.get(i);
        Double money = moneys.get(i);

        if(year == null) {
           continue; //or throw
        }

        BigDecimal amount = BigDecimal.ZERO;

        if(money != null) {
          amount = new BigDecimal(money,MathContext.DECIMAL128);
        }

        result.add(new FinancialOperation(type,year.intValue(),amount);
     }

     return result;

} 
```

用法很容易想象。

```
List<FinancialOperation> earningsList =  createFinancialOperation(FinancialType.EARNING,year_Earnings, amount_Earnings);
List<FinancialOperation> investmentList =  createFinancialOperation(FinancialType.INVESTMENT,year_Investment, amount_Investment); 
```

和

```
Map<FinancialType,List<FinancialOperation>> map = new HashMap<>();

  map.put(FinancialType.EARNING,earningsList);
  map.put(FinancialType.INVESTMENT,investmentList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:12:40.900

> 我有 5 个年份列表和 5 个与年份列表相对应的金额列表。

=>**这是一个糟糕的解决方案**，因为如果你遵循这个，那么你必须管理 10 个列表，相反我建议你创建 Only Single `ArrayList<Object>`，每个项目都是 Object 类型的。

1) 使用 getter/setter 方法定义一类收益。

```
public class Earning {

    int year;
    int amount;

    public int getYear() {
        return year;
    }
    public void setYear(int year) {
        this.year = year;
    }
    public int getAmount() {
        return amount;
    }
    public void setAmount(int amount) {
        this.amount = amount;
    }
} 
```

2) 定义`ArrayList<Earning>`类型，随时创建 Earnings 类型的对象并将其放入 ArrayList 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T10:16:12.697

**ArrayIndexOutOfBoundException**例外，因为您的列表大小不同...在所有列表中使用相同大小，此错误将消失...

# android - 如何在 android 中运行 Ndk 示例应用程序

> ID：15830611
> 
> 赞同：2
> 
> 时间：2013-04-05T09:41:21.110
> 
> 标签：android, augmented-reality, vuforia

你好。我想开发增强现实应用程序。所以我点击了这个链接[https://developer.vuforia.com/resources/dev-guide/step-2-installing-vuforia-sdk](https://developer.vuforia.com/resources/dev-guide/step-2-installing-vuforia-sdk)我安装了`sdk`, `ndk`, `cygwin`,`vuforia-sdk-android-2-0-31`我为所有这些设置了路径但是当我运行 ImageTargets 示例应用程序，我得到`unsatisfied link exception`. 谁能建议我在哪里做错了以及如何解决该问题。

就我而言

**sdk 路径：** `C:\Development\Android\android-sdk-windows`
**eclips 路径：** `C:\Development\Android\android-sdk-windows\eclipse`
**cygwin 路径：** `C:\cygwin`
**ndk 路径：** `C:\Development\Android\vuforia-sdk-android-2-0-31`
**vuforia-sdk-android 路径：** `C:\Development\Android\vuforia-sdk-android-2-0-31`

**在环境变量中，我将路径设置为 sdk、ndk 和 cygwin，如下所示：**

```
C:\Development\Android\android-sdk-windows\tools\;
C:\cygwin\bin;
C:\Development\Android\android-ndk-r8\ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:49:54.720

`ndk-build`您应该通过从 cygwin 命令行运行命令来构建本机代码 (C++) 。在安装目录中打开`Cygwin.bat`以访问命令行并将目录更改为`ImageTarget`项目的根文件夹并运行以下命令：

```
ndk-build 
```

如果它成功构建了本机代码，您应该`lib`会在 Eclipse 中看到一个文件夹添加到您的项目中。现在，您可以构建您的 APK 并在您的设备上运行它。每次更改本机代码时都应重复此步骤。

# java - 是否可以在不安装 Python 的情况下在 Windows 上安装 Robot Framework？

> ID：15830612
> 
> 赞同：1
> 
> 时间：2013-04-05T09:41:21.323
> 
> 标签：java, python, windows, jython, robotframework

我有 Java 1.6。我已经按照以下步骤在 Windows 上安装了 Jython：

1.  下载“jython-installer-2.7-b1.jar”
2.  打开命令提示符 --> 转到保存 jython-installer-2.7-b1.jar 的位置/文件夹
3.  执行命令 java -jar jython-installer-2.7-b1.jar
4.  Jython 安装 GUI 打开并按照说明安装 jython
5.  设置路径和 JYTHON_HOME（在我的例子中，它分别是 "C:\jython2.7b1\bin" 和 "C:\jython2.7b1"）

Jython 安装成功。现在我想安装机器人框架。我尝试使用 "robotframework-2.7.7.win32.exe" 安装机器人框架。在第二步，显示以下信息消息：“在注册表中找不到 Python 安装”

所以，我明白 Python 是安装 Robot Framework 所必需的。但是，我想在不使用 Jython 安装 Python 的情况下安装 Robot Framework。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:59:42.037

根据[文档](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.7#using-windows-installer)，Windows 安装程序需要安装 Python。也许您可以在安装 Robot Framework（未测试）后将其卸载。

如果您对 Jython 2.5 没问题，您应该使用[独立的 JAR 发行版](https://code.google.com/p/robotframework/downloads/list)。如果你真的想要 Jython 2.7，那么你可能需要[从源代码安装](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.7#installing-from-source)，但它看起来并不复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:53:35.163

I have not used this framework before, but from what I understood from the documentation and based on my Java experience, I would recommend you to download the Standalone JAR Package (which, for the latest version is: robotframework-2.7.7.jar (at [http://code.google.com/p/robotframework/downloads/detail?name=robotframework-2.7.7.jar&can=2&q=](http://code.google.com/p/robotframework/downloads/detail?name=robotframework-2.7.7.jar&can=2&q=) )

According to the Wiki and the download notes, this package is standalone and already contains Jython, so it doesn't require additional installations of anything besides Java.

You can confirm this at: [http://code.google.com/p/robotframework/wiki/Installation#Stand-alone_JAR_package](http://code.google.com/p/robotframework/wiki/Installation#Stand-alone_JAR_package)

# c# - Windows Server 2008 R2 上的 Office (Outlook) 互操作问题

> ID：15830613
> 
> 赞同：0
> 
> 时间：2013-04-05T09:41:22.970
> 
> 标签：c#, automation, interop, ms-office, windows-server-2008-r2

我制作了一个发送 SMS 的小型控制台应用程序。您可能知道，您可以使用 Outlook 发送 SMS。

好吧，我完成了，一切正常，但仅在装有 Windows 7 的台式机上。

在我真正需要它并且应该安装它的机器上它不起作用！

这是一台 Windows Server 2008 R2 机器。

我发现了一篇关于[Microsoft 的文章](http://support.microsoft.com/kb/257757/en-us)，说 Office 自动化不是“推荐”与服务器一起使用，而且它“不能很好地工作”。

就我而言，这是一项要求，我必须让它以某种方式工作。

这里发送短信的代码：

```
Microsoft.Office.Interop.Outlook.Application app = new Microsoft.Office.Interop.Outlook.Application();
var sms = app.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMobileItemSMS);
//Unnecessary Things between I removed
sms.Send(true); 
```

我得到的错误如下：

> 操作中止 {HRESULT 异常：0x80004004 (E_ABORT)}

对于任何可行的解决方案或帮助，我深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:49:17.073

我解决了这个问题。

有点奇怪，但是将 Build 选项卡中的 Platform target 从“ **ANY CPU** ”更改为“ **x86** ”使得应用程序在 Windows 服务器上成功工作/运行。

也许这也可以帮助其他人:)

# ruby - 从 ruby 哈希中提取条件值

> ID：15830615
> 
> 赞同：3
> 
> 时间：2013-04-05T09:41:24.253
> 
> 标签：ruby, hash

我的应用程序的用户有他们的观点。我想根据他们的分数为他们分配不同的等级。这是我的排名映射哈希：

```
RANKS = { (1..20)     => 'Private'
          (21..40)    => 'Corporal'
          (41..60)    => 'Sergeant'
          (61..80)    => 'Lieutenant'
          (81..100)   => 'Captain'
          (101..150)  => 'Major'
          (151..200)  => 'Colonel'
          201         => 'General'
        } 
```

我需要检查用户的点是否在哈希的范围键中，并提取必要的值。有什么优雅的解决方案吗？我可以使用“case”运算符，但这不会像我想要的那样优雅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:45:48.533

您可以迭代所有键/​​值对并检查。

```
RANKS = { (1..20)     => 'Private',
          (21..40)    => 'Corporal',
          (41..60)    => 'Sergeant',
          (61..80)    => 'Lieutenant',
          (81..100)   => 'Captain',
          (101..150)  => 'Major',
          (151..200)  => 'Colonel',
          (201..+1.0/0.0)         => 'General', # from 201 to infinity
        }

def get_rank score
  RANKS.each do |k, v|
    return v if k.include?(score)
  end

  nil
end

get_rank 1 # => "Private"
get_rank 50 # => "Sergeant"
get_rank 500 # => "General"
get_rank -1 # => nil 
```

## 更新：

我不知道你为什么认为`case`它不优雅。我认为它非常优雅。

```
def get_rank score
  case score
  when (1..10) then 'Private'
  when (21..40) then 'Corporal'
  when (41..1.0/0.0) then 'Sergeant or higher'
  else nil
  end
end

get_rank 1 # => "Private"
get_rank 50 # => "Sergeant or higher"
get_rank 500 # => "Sergeant or higher"
get_rank -1 # => nil 
```

# excel - Excel VBA 查找所有

> ID：15830617
> 
> 赞同：1
> 
> 时间：2013-04-05T09:41:26.497
> 
> 标签：excel, vba, while-loop, find

像往常一样，在最终屈服并寻求帮助之前，我已经浪费了几个小时来解决问题，所以任何帮助都将不胜感激！

我正在`Test1`我的数据表上运行一个while循环，以便将数据复制到`Test2`参数匹配的表上的特定行，但我目前这样做的方式是循环遍历表2的每一行 - 两张表数据超过 50,000 行，因此虽然我的方法非常适合我的 10 行测试，但要花几个小时才能处理完整数据。我想知道是否有人可以简化我的代码，理想情况下它可以搜索匹配的行而不是比较每一行？

我尝试过使用`Find`，但无法使用多个参数。

这是我当前的代码，我省略了设置参数设置以节省空间的部分，但它们存在于我的工作表中：

```
While row1 <= lastRow1
    Param1 = Sheets("Test1").Cells.Range("A" & row1).Value
    Param2 = Sheets("Test1").Cells.Range("B" & row1).Value
    Param3 = Sheets("Test1").Cells.Range("D" & row1).Value
    Param4 = Sheets("Test1").Cells.Range("E" & row1).Value
    Param5 = Sheets("Test1").Cells.Range("F" & row1).Value
    Cell_to_copy = Sheets("Test1").Cells.Range("G" & row1).Value
*****THIS IS THE BIT I WANT TO OPTIMISE************
        For row2 = 2 To lastRow2
            KParam1 = Sheets("Test2").Cells.Range("A" & row2).Value
            KParam2 = Sheets("Test2").Cells.Range("B" & row2).Value
            KParam3 = Sheets("Test2").Cells.Range("I" & row2).Value
            KParam5 = Sheets("Test2").Cells.Range("G" & row2).Value
                If (InStr(1, KParam1, Param1) > 0) _
                And ((InStr(1, KParam2, Param2) > 0) Or (InStr(1, Param2, KParam2) > 0)) _
                And ((InStr(1, KParam3, Param3) > 0) Or (InStr(1, KParam3, Param4) > 0)) _
                And (InStr(1, KParam5, Param5) > 0) _
                Then
                    Sheets("Test2").Cells.Range("L" & row2).Value = Cell_to_copy
                End If
        Next row2
****************************************************
        row1 = row1 + 1
Wend 
```

我想更改中间部分以执行搜索功能来查找与`If`查询匹配的行，然后将其复制`Cell_to_copy`到该行的单元格 L。

这可能吗？如果绝对必要，我可以将可搜索的值连接`Test2`到一个单元格中，但如果可以避免，我宁愿不这样做，因为它会匹配一些误报。

提前致谢，

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:50:39.517

好的，所以规则似乎是，如果

```
Test1.column A is found inside Test2.column A
Test1.column B is found inside Test2.column B
Test1.column D is found inside Test2.column I
Test1.column E is found inside Test2.column I
Test1.column F is found inside Test2.column G 
```

然后将*Test1.column G***复制** 到*Test2.Column L*

 **是对的吗？

为什么不能使用 Sheet2 上的公式来做到这一点？

也许：Test2.Column L 公式 =`=IF(FIND(A:A,Sheet1!A:A)>0,Sheet1!G:G)`

该公式需要`OR`与其他条件一起检查其他列 - 午餐后尝试！

如果没有，那么好的，我认为我们需要考虑使用 ADO 并将工作表视为 db 表。

如果你展示你的源数据是什么样的，以及你需要的结果，我可以尝试为你编写一个示例，但到目前为止，最好的选择是让你*学习*使用下面的链接钓鱼。

请参阅此处：[MSDN KB：如何将 ADO 与 Visual Basic 或 VBA 中的 Excel 数据一起使用](http://support.microsoft.com/kb/257819)

另请阅读：在**Excel 用户 MVP 网站上将 Excel 视为**[关系数据源](http://www.exceluser.com/explore/msquery1_1.htm)

 **另请阅读：[办公空间：使用 ADO 查询 Excel 电子表格](http://technet.microsoft.com/en-us/library/ee692882.aspx)

基本上任务是将您需要的过滤数据读入 ADO 记录集，然后使用 CopyFromRecordset 方法一步将结果转储到 Sheet2

所以你有一些阅读要做，如果你需要一个例子或更多帮助，请告诉我们

菲利普****

# php - 使用 php 拆分 tar.gz 文件

> ID：15830623
> 
> 赞同：0
> 
> 时间：2013-04-05T09:41:34.577
> 
> 标签：php, mysql, database, gzip, file-read

我正在将数据馈送导入我的网站。我的数据馈送文件来自 tar.gz 格式。文件大小非常大，高达 10 GB。我需要拆分 tar.gz 文件，然后上传到数据库。如何将 tar.gz 单个文件拆分为多个文件。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:47:22.480

您可以像这样创建几个部分：

```
$fileName = 'something_big.tar.gz';
$fileSize = filesize($fileName);
$parts = 10;
$partSize = ceil($fileSize / 10);

$f_in = fopen($fileName, 'rb');
for ($i = 0; $i < $parts; ++$i) {
    $f_out = fopen("$fileName.$i", 'wb');
    stream_copy_to_stream($f_in, $f_out, $partSize);
    fclose($f_out);
}
fclose($f_in); 
```

# ms-access - 基于排序查询访问报告？

> ID：15830626
> 
> 赞同：1
> 
> 时间：2013-04-05T09:41:43.800
> 
> 标签：ms-access

在基于查询创建 Access 报表时，当需要对报表进行排序时，必须使用排序和分组图标在报表本身中定义排序键和顺序。
我的问题是在基础查询中定义任何排序顺序是否会对性能产生影响，或者这些只是被 Access 报告忽略了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:57:06.767

对于非常大的结果集，查询上的额外排序*可能会*减慢速度，因此如果可以的话，最好避免它。我没有看到任何提及“忽略”底层查询的 ORDER BY 子句的 Access 报告。我想这是*可能*的，但我有点怀疑......

# c - 相同信息的不同 typedef

> ID：15830629
> 
> 赞同：0
> 
> 时间：2013-04-05T09:41:44.933
> 
> 标签：c, java-native-interface

我正在编写一段代码，我遇到了这个：

```
typedef jobject jthread;
typedef jobject jthreadGroup; 
```

对于类似的条目，不同的 typedef 有什么意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:50:59.967

它允许您为同一类型使用两个不同的名称。您想要这个有（至少）两个不同的原因：

1.  在代码中，您希望读者看到我们正在处理的数据类型。毕竟，“线程”不同于“线程组”，即使表示它们的底层类型不同。
2.  能够更改其中一种类型的类型而不影响另一种类型。如果在稍后阶段，我们认为“jthreadGroup”最好是一个新类型，我们可以在不影响“jthread”的情况下改变它。

想象一下，我们有一个小游戏，我们以整数类型计算分数。我们还计算了玩家数量：

```
typedef int ScoreCount;
typedef int PlayerCount; 
```

后来，我们决定只需要一个小数字`short`来计算玩家：

```
typedef short PlayerCount; 
```

与使用“jobject”的想法相同，只是不同的基本类型，这可能使其易于理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:48:33.537

可能是为了实现代码清晰，他们用不同的名称定义了相同的类型在这里您可以同时使用 jthread 和 jthreadGroup 而不是 jobject 类型

# javascript - 如何确定 DOJO Checkbox 是否被选中？

> ID：15830633
> 
> 赞同：5
> 
> 时间：2013-04-05T09:42:02.800
> 
> 标签：javascript, syntax, dojo

```
<input id="test" type="checkbox" value="test" data-dojo-type="dijit.form.CheckBox"> 
```

如何检查上面的 dojo 复选框在我的 javaScript 函数中是否被选中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T10:32:19.210

您可以通过多种方式进行检查。您可以使用纯 HTML/DOM/JavaScript 并使用以下内容：

```
if (document.getElementById("test").checked) { ... } 
```

或使用 Dojo：

```
if (dojo.byId("test").checked) { ... } 
```

这就是@Shreyos Adikari 我认为的意思，但您也可以使用小部件本身（在屏幕后面做同样的事情）：

```
if (dijit.byId("test").checked) { ... } 
```

前两种方法与最后一种方法的区别在于，前两种使用 DOM 节点，而最后一种使用具有相似属性的 Dojo CheckBox 小部件/对象。我个人推荐最后一个，因为这应该**总是**有效的，即使他们决定改变他们的模板。

但无论如何，网络上有很多关于如何实现这一点的示例（甚至在 Dojo 文档本身），我建议您查看[API 文档](http://dojotoolkit.org/api/1.8/dijit/form/CheckBox.html)或至少查看[示例](http://dojotoolkit.org/reference-guide/1.8/dijit/form/CheckBox.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T09:44:57.500

您可以使用通过 id 检查的 javascript 函数，例如：

```
 if (test.checked == 1){
          alert("checked") ;
    }
else{
          alert("unchecked") ;
    } 
```

**如果复选框被选中，这里 .checked 将返回“1”。**
请在您的 javascript 中尝试此操作，如有任何疑问，请告诉我。

# android - 如何将带有所有过滤器和标签的 logcat 输出存储在 SdCard 上的文件中？

> ID：15830634
> 
> 赞同：0
> 
> 时间：2013-04-05T09:42:06.567
> 
> 标签：android, android-logcat

我正在使用此代码将 logcat 输出保存到 sdcard：-

```
 public String ReadFromCMD(String[] strCmdArgs)
    {

     ProcessBuilder cmd;
     String result="";
     try
     {
          cmd = new ProcessBuilder(strCmdArgs);
          Process process = cmd.start();
          InputStream in = process.getInputStream();

          BufferedReader reader = new BufferedReader(
                new InputStreamReader(process.getInputStream()));
            int read;
            char[] buffer = new char[4096];
            StringBuffer output = new StringBuffer();

            process.waitFor();

            while ((read = reader.read(buffer)) > 0) 
            {
                output.append(buffer, 0, read);
            }
            reader.close();
            result = output.toString();
            in.close();

     } catch(Exception ex){ ex.printStackTrace(); }

     return result;
} 
```

在这里我可以将日志保存到文件中。

用这个命令。

```
String[] args_Logs_Save = "/system/bin/logcat -v time -d -b radio -b events -b main -b system".split(" ");
ReadFromCMD(args_Logs_Save); 
```

这里的问题是：- 日志保存仅适用于我的应用程序包，而不是带有“I/WifiHW、W/ActivityManager、D/hwcomposer、D/wpa_supplicant”等标签的完整 logcat 输出...

当我从 adb shell 手动执行“/system/bin/logcat -v time -d -b radio -b events -b main -b system”时，它将成功执行并给我所有输出

但是当我从上面的代码执行时，它只会为我的包提供输出。

那么现在如何从我上面的代码中获取所有 logcat 呢？

笔记：

我正在使用 Android 4.1 和 4.2

参考链接：[Link1](https://stackoverflow.com/questions/8982263/how-to-write-entire-logcat-in-to-sdcard)、[Link2](https://stackoverflow.com/questions/12686314/logcat-output-on-sdcard)、[Link3](https://stackoverflow.com/questions/12686314/logcat-output-on-sdcard)、[Link4](https://stackoverflow.com/questions/6970169/stream-android-logcat-output-to-an-sd-card/9039352#9039352)

如果你知道然后请帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:16:27.093

在 Android 4.1 之前，所有具有 的应用程序`READ_LOG_PERMISSION`都可以访问其他程序的日志记录，但这在 Android Jelly Bean 中发生了变化。出于安全原因，Android 4.1 及更高版本仅允许您从自己的程序中读取日志记录。不幸的是，Google 并未记录此更改（另请参阅[此讨论](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/6U4A5irWang)）

AFAIK唯一的解决方法是root您的设备，然后以root身份运行您的程序或运行此命令`chmod 04755 /system/bin/logcat`（另见[这篇文章](https://android.stackexchange.com/a/28864/7574)）

# ruby-on-rails - 同一个按钮上的两个不同动作

> ID：15830636
> 
> 赞同：0
> 
> 时间：2013-04-05T09:42:07.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在开发一个简单的房间预订演示应用程序，其中我有三个表作为成员类型、客户和捐助者

型号如下

```
class MemberType < ActiveRecord::Base
 has_one  :donor
 has_many :customers
 has_many :room_rates
 attr_accessible :member_type
end

class Customer < ActiveRecord::Base
  belongs_to :member_type 
  has_one  :donor
  has_many :rooms
  has_many :room_types
  has_many :room_rates
end

class Donor < ActiveRecord::Base
  belongs_to :customer
  belongs_to :member_type 
  attr_accessible :donation, :free_days, :used_days,:customer_id
end 
```

当客户添加他们的基本信息并选择 member_type 作为捐赠者并提交它时，我已将 member_types 添加为捐赠者、来宾和另外两个作为管理员，并将所有信息存储在客户表中

客户提交信息时，如何在捐赠者表中添加此 customer_id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:55:24.533

您可以在 Customer 模型中使用活动记录回调，如下所示：

```
class Customer< ActiveRecord::Base
  after_save :new_donor

  private 
  def new_donor
    new_record = Donor.new(:customer_id => self.id)
    new_record.save
  end

end 
```

顺便说一句，您的模型设计中有一个闭环关系（room_rates 属于 member_type 和 customer），这不是表格设计中的最佳实践，尽管它也不是完全错误的。
如果可能，您可能需要重新设计它

# c - 将许多参数传递给 C 函数

> ID：15830641
> 
> 赞同：2
> 
> 时间：2013-04-05T09:42:15.940
> 
> 标签：c, function, arguments

如何将许多参数传递给 C 函数？假设我有这个功能：

```
void f(int n, char* a, char* b, ...) 
```

我想要一个未定义数量的 char* 参数。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:59:21.973

您需要的是可变数量的参数函数，您可以阅读：[9.9。可变数量的论点](http://publications.gbdirect.co.uk/c_book/chapter9/stdarg.html)是一个很好的论文教程。

一个**简短的四点理论**将帮助您理解我的代码：

1.  `<stdarg.h>`必须包含头文件，他引入了一种新类型，称为 va_list，以及对这种类型的对象进行操作的三个函数，称为`va_start, va_arg, and va_end`.
2.  `va_start:`是一个宏，设置为可选参数`arg_ptr`列表的开头`ap`
3.  `va_arg:`确实是使用这个保存的堆栈指针，并为提供的类型提取正确的字节数
4.  `va_end:`是一个要重置的宏`ap`，在检索到所有参数后，`va_end`将指针重置为 NULL。

这个理论还不够，但下面的示例（根据您的需要）将帮助您理解基本的工作流程/和步骤：（*每 4 个步骤阅读评论*）

```
//Step1: Need necessary header file
#include <stdarg.h>     
void f(int first, char* a, char* b, ...){   
    va_list ap;  // vlist variable
    int n;       // number 
    char aa,     
    int i;
    float f;
   //print fix numbers of arguments
    printf("\n %d, %s, %s\n", first, a, b);

   //Step2: To initialize `ap` using right-most argument that is `b` 
    va_start(ap, b); 

   //Step3: Now access vlist `ap`  elements using va_arg()
     n = va_arg(ap, int); //first value in my list gives number of ele in list 
     while(n--){
       aa = (char)va_arg(ap, int); // notice type, and typecast
       i = va_arg(ap, int);
       f = (float)va_arg(ap, double);   
       printf("\n %c %d %f \n", aa,i, f);
    }

    //Step4: Now work done, we should reset pointer to NULL
    va_end(ap); 
}
int main(){
    char* a = "Aoues";
    char* b = "Guesmi";
    f(2, a, b, 3, 'a', 3, 6.7f, 'b', 5, 5.5f, 'A', 0, 0.1);
    //         ^ this is `n` like count in variable list
    return 1;
} 
```

谁运行：

```
~$ ./a.out 
 2, Aoues, Guesmi
 a 3 6.700000 
 b 5 5.500000 
 A 0 0.100000 
```

我的代码的**简要说明**将对未来的用户有所帮助：

1.  实际上函数是固定数量的参数，后跟可变数量的参数。函数最右边的参数（`char* b`在我们函数中的固定参数列表中`f()`）仅用于初始化可行列表`ap`。
2.  first 上面的函数`f()`读取的`n`值是`3`（*读取 main 中的注释*）。在`f()`, 中 `while(n--)`执行 3 次，每次在循环中使用`va_arg()`宏我们检索三个值。
3.  如果你注意到我读了前两个，`ints`然后是 a `double`，我发送的位置`char, int, float`（*在我调用 f() 的 main 中通知*）。这是因为在可变参数列表的情况下自动类型提升。（从上面的 lisk 中详细阅读）

她是 MSDN 中另一个有用的链接：[va_arg、va_end、va_start](http://msdn.microsoft.com/en-us/library/kb57fad8%28v=vs.71%29.aspx)。

（*如果您需要更多帮助，请告诉我*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:46:09.300

使用可变参数（自己查一下，被调用者用来读取参数的东西在`stdarg.h`）。

请注意，被调用者无法自动确定实际传递的参数数量。因此，例如它可能是`n`，您只需要相信调用者会`n`正确。

# objective-c - 我如何知道发布数据正确

> ID：15830645
> 
> 赞同：1
> 
> 时间：2013-04-05T09:42:26.833
> 
> 标签：objective-c, nsurlconnection, nsurlrequest

```
-(IBAction)clicked:(id)sender{
    NSString *CIDString = cID.text;

    NSURL *url = [NSURL URLWithString:@"http://localhost:8080/test/?"];
    NSString *postData = [NSString stringWithFormat:@"companyID=%@",CIDString];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[url standardizedURL]
                                                           cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:[postData dataUsingEncoding:NSUTF8StringEncoding]];

    [self startConnection:(NSMutableURLRequest *)request];
     if([self.result isEqualToString:@"New Alert"])
    {
        cID.text = @"Scuess";
    }

} 
```

其中startConnection方法如下

```
- (void)startConnection:(NSMutableURLRequest *)request {

    [self.connection cancel];

    NSMutableData *data = [[NSMutableData alloc] init];
    self.receivedData = data;
    self.result = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    NSLog(@"receivedData: %@", [[NSString alloc] initWithData:receivedData encoding:NSASCIIStringEncoding]);

    self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (self.networkErrorAlert) {
        NSLog(@"connection fail");

    }

    [self.connection start];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:06:37.433

> 当我在浏览器中键入本地主机字符串时，我在浏览器中获取我想要在我的代码中的数据

您需要实现一个委托：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"Received response: %@", [response url]); //give you the url.        [receivedData setLength:0];
} 
```

> 当服务器提供了足够的数据来创建一个 NSURLResponse 对象时，委托会收到一个 connection:didReceiveResponse: 消息。委托方法可以检查提供的 NSURLResponse 并确定数据的预期内容长度、MIME 类型、建议的文件名和服务器提供的其他元数据。

编辑：

```
 //if you want something more...you need to do as :
    NSString *contentTypeValue = nil;
    for (NSString *headerKey in [[(NSHTTPURLResponse*)response allHeaderFields] allKeys] ) {
        if([@"content-type" caseInsensitiveCompare:headerKey] == NSOrderedSame ) {
            contentTypeValue = [[(NSHTTPURLResponse*)response allHeaderFields] valueForKey:headerKey];
        }
     }
     NSLog(@"===>%@",contentTypeValue); 
```

# java - 用大数据计算常见组成员的算法

> ID：15830649
> 
> 赞同：6
> 
> 时间：2013-04-05T09:42:46.877
> 
> 标签：java, sql, algorithm, postgresql, bigdata

我需要编写一个程序来计算两个用户在同一组中的次数。用户由用户名给出，组由 id 给出。例如，使用输入（存储在文本文件中）：

```
john 32
john 21
jim 21
jim 32
bob 32 
```

我想要结果：

```
john-jim 2 
john-bob 1
jim-bob 1 
```

这听起来微不足道。但问题是：我有 180 万组和 30 万用户。还有很多会员资格（我预计每位用户平均至少有 50 个，可能更多）。这意味着大量的数据和处理。

我已经编写了 5 个不同的程序来执行此操作，但没有一个能够减少数据量：它作为 PostgreSQL 查询太慢了。在 Java 工作内存中的 Map 中运行太耗内存（第一个堆空间，优化后我得到了罕见的“超出 GC 开销限制”）。从 Java 连续写入数据库太慢（即使使用批处理查询进行了优化）。越来越绝望，我尝试了一些更奇特的事情，比如将所有对写入数组，然后对它们进行排序 (O(n log (n)))，然后计算它们 peu à peu。但它仍然是太多的数据存储在内存中。

关于这样做的算法的任何想法？还是不可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T10:01:59.170

RDBMS 专门用于排序等操作。在数据库之外执行此操作几乎不会在性能上接近。用 SQL 来做！

这将完成工作（在更新中简化​​）：

```
SELECT t1.usr || '-' || t2.usr, count(*) AS ct
FROM   usr_grp t1
JOIN   usr_grp t2 USING (grp_id) 
WHERE  t2.usr > t1.usr   -- prevent dupes and get sorted pair
GROUP  BY t1.usr, t2.usr; 
```

正如您所说，根据您有多少重叠，这可能会产生大量的行。所以这永远不会很快。

*提出了一个问题*：产生数百万行没人能处理的目的是什么？你确定，这个操作一开始就有意义吗？

为了让它*更快*，你可以..

*   **升级！** [PostgreSQL 8.4 现在已经过时了](http://www.postgresql.org/support/versioning/)。特别是 PostgreSQL 9.2 专注于大数据。对于这样的工作，您可以期待*更好*的表现。*没有人*应该运行 8.4.0
    。仅出于安全原因，您也错过了许多错误修复。当前的版本是 8.4.17。我引用链接的网站：

 *> *我们始终建议所有用户针对正在使用的主要版本运行最新的可用次要版本。*

*   为用户使用**`integer`**as 代理键，因此您只在`usr_grp`. 使表和索引更小，处理速度更快。如果 n:m table ( `usr_grp`) 的基数比 table 大得多`usr`，这应该会更快，即使这意味着额外的连接。

```
SELECT u1.usr  || '-' || u2.usr, count(*) AS ct
FROM   usr_grp t1
JOIN   usr_grp t2 USING (grp_id) 
JOIN   usr u1 ON t1.usr_id = u1.usr_id
JOIN   usr u2 ON t2.usr_id = u2.usr_id
WHERE  t2.usr_id > t1.usr_id
GROUP  BY u1.usr_id, u2.usr_id; 
```

*   创建一个**多列索引**（如果您还没有）。
    `grp_id`必须先来。[为什么这很重要？](https://dba.stackexchange.com/questions/27481/is-a-composite-index-also-good-for-queries-on-the-first-field/27493#27493)

```
 CREATE INDEX usr_grp_gu_idx ON usr_grp(grp_id, usr_id); 
```

*   将**大量 RAM**[`work_mem`](http://www.postgresql.org/docs/current/interactive/runtime-config-resource.html#GUC-WORK-MEM)放入您的机器并增加和的设置[`shared_buffers`](http://www.postgresql.org/docs/current/interactive/runtime-config-resource.html#GUC-SHARED-BUFFERS)。

### 测试用例

我获取了[@OldCurmudgeon](https://stackoverflow.com/a/15831671/939860)为他的测试用例报告的数字，并在 PostgreSQL 中创建了一个可比较的测试用例。

[-> **SQLfiddle**演示。](http://www.sqlfiddle.com/#!12/0b72c/2)

在这个公共测试数据库中~ **250 毫秒。**
结果未排序（否`ORDER BY`），因为尚未指定。
相比**2.5 分钟**，[报告如下](https://stackoverflow.com/a/15831671/939860)。系数 600。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:33:47.710

让你的文件系统来做这件事怎么样。

对于每个条目 - 打开一个以组 ID 命名的文件并附加新用户的名称。您最终将得到每组一个文件。

你现在有 - 例如：

```
Group-21.txt
 jim
 john

Group-32.txt
 bob
 jim
 john 
```

现在遍历所有文件，在其中生成每个用户名对（我将对名称进行排序并对其执行标准组合过程）。对于每一对，将“1”附加到具有特定名称的文件中。

你现在有 - 例如：

```
User-jim-john.txt
 11

User-bob-jim.txt
 1

User-bob-john.txt
 1 
```

您现在在文件中拥有文件名和计数对（一元，所以您真正需要的只是文件大小（以字节为单位））。

尽管第 1 阶段必须在第 2 阶段开始之前完成，但几乎所有这些都可以并行完成。为了提高速度 - 添加内核 - 购买更快的磁盘。没有内存限制，只有磁盘。

**补充：**我刚刚使用一个线程对此算法进行了一些模拟测试

1800 个群组、300 个用户和 15000 个会员都是随机生成的，耗时约 2.5 分钟。900 个群组、150 个用户和 7500 个会员资格用时 54 秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:41:22.630

无论解决方案如何，复杂性取决于生成的对数，而不一定取决于组或人的数量。对于不同的组大小：

*   一个有 10 个成员的组产生 C(10,2) = 45 对
*   一个有 100 个成员的组产生 C(100,2) = 4950 对
*   1000人的团体，499500对...
*   拥有10000名成员，单组将产生近5000万双！因此，单个组可以超过其余计算的全部成本。

所以我的第一个建议是在数据集中剔除非常大的组。如果您不能省略大型组，并且发现它不适合内存或者使用单个线程需要很长时间才能通过它，您可以使用[Map-Reduce](http://en.wikipedia.org/wiki/MapReduce)自动并行化计算，如下所示。如果您从组成员身份开始，例如：

```
32 -> john, jim, bob
21 -> john, jim 
```

您可以使用 map 步骤生成所有对：

```
john-jim -> 32, john-bob -> 32, jim-bob -> 32
john-jim -> 21 
```

这些将按名称对为您汇总。然后在 reduce 中，只计算每个键的出现次数。这假设您有足够的磁盘来存储所有对。*

# sql-server - 将一个表的行值映射到另一个表的列名

> ID：15830650
> 
> 赞同：1
> 
> 时间：2013-04-05T09:42:47.640
> 
> 标签：sql-server, tsql

我有一个表，它跟踪 15 个名为“tracking_table”的表的更新。因为我只想要一个表来处理所有 15 个表，所以我在 'tracking_table' 中保留了 10 列，这是所有 15 个表中列数的最大值。

现在从 tracking_table 我能够在以下结构中的特定表的特定列上完成最新更新。

```
p_key_no    col_name    value               table
__________________________________________________________________
1       ALTEMAIL    abc@gmail.com           emp_info
1       PASSWORD    AA321                   emp_info
2       ALTEMAIL    xyz@gmail.com           emp_info
2       EMAIL       pqr@yahoo.com           emp_info
2       PASSWORD    SB12321                 emp_info 
```

这会跟踪表名、列名、特定行的主键值及其更改值。

而emp_info表如下图：

```
PKEY    EMAIL           FULLNAME    PASSWORD    TIME_STAMP                  ALTEMAIL        
1       a123@xyz.com    xyz1        AA123       2013-04-05 13:24:49.650     aaa@gmail.com       
2       b123@xyz.com    xyz2        BB123       2013-04-05 13:24:49.650     bbb@gmail.com       
3       c123@xyz.com    xyz3        CC123       2013-04-05 13:24:49.650     ccc@gmail.com 
```

我想只显示特定列的更新值的 emp_info 表。

所以请帮我将行值映射到原始表列名称和值。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:50:24.230

这可以通过几种不同的方式完成，一种方式是首先旋转`tracking_table`将值从行转换为列，然后加入您的`emp_info`表。

枢轴代码将类似于以下内容：

```
select p_key_no, ALTEMAIL, PASSWORD, EMAIL
from tracking_table
pivot
(
  max(value)
  for col_name in (ALTEMAIL, PASSWORD, EMAIL)
) p
where [table] ='emp_info' 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/00454/5)。`emp_info`这将获取可用于与表进行数据比较的行中的数据。最终代码将类似于：

```
;with cte as
(
  select p_key_no, ALTEMAIL, PASSWORD, EMAIL
  from tracking_table
  pivot
  (
    max(value)
    for col_name in (ALTEMAIL, PASSWORD, EMAIL)
  ) p
  where [table] ='emp_info'
)
select e.pkey,
  coalesce(c.email, e.email) email,
  e.fullname,
  coalesce(c.password, e.password) password,
  time_stamp,
  coalesce(c.altemail, e.altemail) altemail
from emp_info e
left join cte c
  on e.pkey = c.p_key_no; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/00454/4)。这给出了最终结果：

```
| PKEY |         EMAIL | FULLNAME | PASSWORD |          TIME_STAMP |      ALTEMAIL |
------------------------------------------------------------------------------------
|    1 |  a123@xyz.com |     xyz1 |    AA321 | 2013-04-05 13:24:49 | abc@gmail.com |
|    2 | pqr@yahoo.com |     xyz2 |  SB12321 | 2013-04-05 13:24:49 | xyz@gmail.com |
|    3 |  c123@xyz.com |     xyz3 |    CC123 | 2013-04-05 13:24:49 | ccc@gmail.com | 
```

也可以使用带有`CASE`表达式的聚合函数来编写枢轴：

```
select p_key_no, 
  max(case when col_name = 'ALTEMAIL' then value end) ALTEMAIL,
  max(case when col_name = 'PASSWORD' then value end) PASSWORD,
  max(case when col_name = 'EMAIL' then value end) EMAIL 
from tracking_table
where [table] ='emp_info'
group by p_key_no 
```

# javascript - jquery .on 函数

> ID：15830652
> 
> 赞同：2
> 
> 时间：2013-04-05T09:42:49.953
> 
> 标签：javascript, jquery

我已将我的 jquery 脚本更新为 1.9.1，并且一个函数停止使用`.live()`.

我已经开始`.on()`工作，但现在它没有从列表中删除该项目，我必须更新页面才能看到结果。

生成html代码：

```
for (var i = 0; i < o.length; i++)
    {
        $('#listInserts').append('<div>' + o[i].text + '<a class="del" rel="'+ o[i].dataid +'" href="#">X</a></div>');
    } 
```

之前的代码

```
$('.del').live('click', function() {
        delItem = $(this);
        var dataid = $(this).attr('rel');

        $.post('dashboard/xhrDeleteListing', {'dataid': dataid}, function(o) {
            delItem.parent().remove();
        }, 'json');

        return false;
    }); 
```

之后的代码

```
$(document).on('click','.del', function() {
        delItem = $(this);
        var dataid = $(this).attr('rel');

        $.post('dashboard/xhrDeleteListing', {'dataid': dataid}, function(o) {
            delItem.parent().remove();
        }, 'json');

        return false;
    }); 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:24:28.560

了解 HTML 结构并知道 'json' 不合适，您可以试试这个：

```
$('#listInserts').on('click','.del', function() {
    var delItem = $(this);
    var dataid = delItem.attr('rel');
    $.post('dashboard/xhrDeleteListing', {'dataid': dataid}, function(o) {
        delItem.closest('div').remove();
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:29:57.787

我找到了我的问题的答案

```
$('.del').on('click', function() {
    delItem = $(this);
    var dataid = $(this).attr('rel');

    $.post('dashboard/xhrDeleteListing', {'dataid': dataid}, function(o) {
delItem.parent().remove();

    });
            return false;
}); 
```

原来，我从我的模型返回 true，但等待一个 JSON 对象。已删除`,JSON`，它可以正常工作。

# github - akka github 源包含不可打印的字符

> ID：15830653
> 
> 赞同：0
> 
> 时间：2013-04-05T09:42:53.240
> 
> 标签：github, akka

我从github下载了akka源。我发现很多文件中都有这些垃圾字符。

=> 转换为 â‡'</p>

<- 转换为 →

```
trait OnlyCauseStackTrace { self: Throwable â‡’
  override def fillInStackTrace(): Throwable = {
    setStackTrace(getCause match {
      case null â‡’ Array.empty
      case some â‡’ some.getStackTrace
    })
    this
  }
} 
```

这存在于每个版本中。akka-master，akka-release-2.2-M2，akka-release-2.1

当我从 sbt 生成 eclipse 项目后将代码导入 eclipse 时，这些会出错

我如何下载：我`zip`从 github 网站下载文件。我不能使用 eclipse 从 github 导入，因为我在防火墙后面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:17:00.180

不，您可能只是没有使用 UTF-8 编辑它们（就像它们一样）：[https ://github.com/akka/akka/blob/master/project/AkkaBuild.scala#L575](https://github.com/akka/akka/blob/master/project/AkkaBuild.scala#L575)

# excel - 将图像/公司徽标从 ax 插入到 excel

> ID：15830655
> 
> 赞同：0
> 
> 时间：2013-04-05T09:43:02.300
> 
> 标签：excel, dynamics-ax-2009, axapta

如何将图像/公司徽标从 ax 插入到 excel？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:52:28.900

看看[这个](http://dynamicsuser.net/forums/t/16803.aspx)。我认为这可能会有所帮助。

# javascript - 随机数，Math.floor(...) 与 Math.ceil(...)

> ID：15830658
> 
> 赞同：5
> 
> 时间：2013-04-05T09:43:07.387
> 
> 标签：javascript, random

我见过很多生成随机数的代码，例如

```
// random integers in the interval [1, 10]
Math.floor(Math.random()*10 + 1) 
```

无论如何，我觉得我错过了一些东西。为什么人们不使用更简洁的方式

```
Math.ceil(Math.random()*10); 
```

?

我试图测试随机性，到目前为止它似乎是正确的。

其实后面的代码

```
// will generate random integers from 1 to 4
var frequencies = [ 0, 0, 0, 0, 0 ]; // not using the first place
var randomNumber;
for ( var i = 0; i < 1*1000*1000; ++i ) {
   randomNumber = Math.ceil(Math.random()*4);
   frequencies[randomNumber]++;
}

for ( var i = 1; i <= 4; ++i ) {
   console.log(i +": "+ frequencies[i]);
} 
```

打印出来

```
1: 250103
2: 250161
3: 250163
4: 249573 
```

我错过了什么？

*Quick OT：有没有更简洁的方式来声明和初始化频率？我的意思是像`frequencies[5] = { 0 };`从 C++...*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T09:48:17.520

如[MDN 参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random)中所述`Math.random()`

> 返回 [0, 1) 范围内的浮点伪随机数，即从 0（包括）到但不包括 1（不包括），然后您可以将其缩放到所需的范围。

由于 Math.random 可以 return `0`， then`Math.ceil(Math.random()*10)`也可以 return`0`并且该值超出了您的`[1..10]`范围。

* * *

关于您的第二个问题，请参阅[创建零填充 JavaScript 数组的最有效方法？](https://stackoverflow.com/questions/1295584/most-efficient-way-to-create-a-zero-filled-javascript-array)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T09:56:07.867

`Math.floor()`这里是首选，因为`Math.random()`.

例如，`Math.random() * 10`给出一个范围`[0, 10)`。使用`Math.floor()`你*永远不会*得到 的价值`10`，而`Math.ceil()` *可能*会给`0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:49:22.727

区间 [1, 10] 中的随机整数：

```
Math.floor(Math.random()*10 + 1) 
```

**区间 [0, 10] 中的随机整数：**

```
Math.ceil(Math.random()*10); 
```

只看你需要什么。

# c# - 转到实现的方法而不是接口

> ID：15830659
> 
> 赞同：10
> 
> 时间：2013-04-05T09:43:09.157
> 
> 标签：c#, visual-studio-2010, class, interface

经常在浏览代码时，我会遇到这样的事情：

```
public class Fruity
{
    private IOrange _Orange;

    public Fruity()
    {
        _Orange = new Orange() as IOrange;
    }

    public void PrepareFruit()
    {
        return _Orange.Peel();
    }
} 
```

太好了，所以现在我想看看 Peel 方法是如何实现的。右键单击该方法可以让我转到定义，这会将我带到接口存根。

好的，严格来说，定义是由接口赋予的，因为私有变量是以这种方式定义的，但是有没有办法直接去实现呢？

当然还有 Find All References，它是调用、接口和具体的分散枪法。但是在这种情况下，实现的来源是显而易见的，所以我应该能够跳到它我想...

显然，有时可能会出现模棱两可的情况，这里对此进行了很好的描述：

[转到具体类型的定义](https://stackoverflow.com/questions/4234796/go-to-definition-on-concrete-type)

但可以肯定的是，当实现非常清晰时，应该有一个 Go To Implementation 选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T09:53:17.117

If you double-click or highlight `Peel` and press `CTRL+,` you'll get the "navigate to symbol" window which will list the actual implementation, usually as the second item. It's about the fastest way of finding it without 3rd party tools. And unlike "find all references", it only shows the method definitions and not wherever it's called.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:57:49.917

如果您转到 Visual Studio 菜单“查看”并选择“代码定义窗口”，当您单击时，`.Peel()`您可能会看到实现`.Peel()`（这并不总是有效，但试试看）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T21:46:50.090

当然已经存在于 Visual Studio 中了！从那时起它就在那里。

右键单击您的代码（例如：属性）并选择“查看调用层次结构”。在 Call Hierarchy 窗口中，选择 Implements 文件夹。

你在这。为什么要锐化？？？当然并不像从允许直接询问接口的 resharper 的 go 实现那么复杂，但只有一个属性或来自该接口的方法就足够了。前任：

```
public interface IModule
{
int Count { get; set; }
}

public class Module : Imodule
{ 
  public int Count {get; set;}
}

public class Module2 : Imodule
{ 
   public int Count {get; set;}  
} 
```

右键单击 Count 属性（在类内或接口内的任何位置）并选择“查看调用层次结构”，应该会显示哪个类实现了它，因此会显示整个接口。

一开始我们都喜欢 Resharper，随着时间的推移，我们都讨厌它！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-28T14:11:02.157

使用 Visual Studio >= 2015，您可以使用快捷键 ctrl + F12 跳转到实现

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-04T17:14:16.573

Visual Studio 2015 可以使用“Go To Implementation”扩展来做到这一点 - [https://visualstudiogallery.msdn.microsoft.com/0ed93222-83cd-4db3-92bc-a78909047156](https://visualstudiogallery.msdn.microsoft.com/0ed93222-83cd-4db3-92bc-a78909047156)

如果有多个实现，它将向您显示一个列表，以便您选择跳转到哪个。

# php - 未找到 CodeIgniter URL

> ID：15830660
> 
> 赞同：2
> 
> 时间：2013-04-05T09:43:18.290
> 
> 标签：php, .htaccess, codeigniter, url-rewriting

`enter code here`我在我的 .htaccess 文件中得到了这段代码：

```
RewriteEngine On
RewriteBase /projFolder

### Canonicalize codeigniter URLs

# If your default controller is something other than
# "welcome" you should probably change this
RewriteRule ^(mycontrol(/index)?|index(\.php)?)/?$ /  [L,R=301]
RewriteRule ^(.*)/index/?$ $1 [L,R=301]

# Removes trailing slashes (prevents SEO duplicate content issues)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ $1 [L,R=301]

# Enforce www
# If you have subdomains, you can add them to 
# the list using the "|" (OR) regex operator
RewriteCond %{HTTP_HOST} !^(www|subdomain) [NC]
RewriteRule ^(.*)$ http://www.domain.tld/$1 [L,R=301]

# Enforce NO www
#RewriteCond %{HTTP_HOST} ^www [NC]
#RewriteRule ^(.*)$ http://domain.tld/$1 [L,R=301]

###

# Removes access to the system folder by users.
# Additionally this will allow you to create a System.php controller,
# previously this would not have been possible.
# 'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]

# Checks to see if the user is attempting to access a valid file,
# such as an image or css document, if this isn't true it sends the
# request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

我的项目在 /var/www/projFolder -> 该文件夹中的结构是

```
/application
/system
/user_guide
.htaccess
index.php 
```

我改变了 $route['default_controller'] = "mycontrol"; 在配置 routes.php 文件中。如果我输入 url localhost/projFolder/ 它会从该控制器加载默认的 mycontrol.php 控制器和索引函数。如果我去 localhost/projFolder/myFunction -> 意味着我想从默认控制器加载 myFunction，它会给我“在此服务器上找不到请求的 URL”。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:18:16.047

打开你的`config/routes.php`文件

添加这一行：

```
$route['mycontrol/(:any)'] = "mycontrol/index"; 
```

然后我从来没有用过这么大`.htaccess`的codeigniter，我总是用这个而且效果很好：

```
RewriteEngine On
RewriteBase /projFolder
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /projFolder/index.php/$1 [L] 
```

要删除 index.php，您必须使用 htaccess 并更改`config/config.php`：

```
$config['index_page']=''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T10:06:52.137

将您的 .htaccess 字段编辑为：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:57:11.393

虽然`mycontrol`是默认控制器，但它不会工作，因为它希望在您键入时找到一个`controller`被调用的. 如果要访问，请尝试键入. 使用这种方法，您将调用控制器并请求特定功能。`myFunction``localhost/projFolder/myFunction``myfunction``localhost/projFolder/mycontrol/myFunction`

# spring-mvc - 使用 jqgrid 进行春季分页

> ID：15830661
> 
> 赞同：0
> 
> 时间：2013-04-05T09:43:19.347
> 
> 标签：spring-mvc, jqgrid

我想用 Spring 和 jqGrid 进行分页。我将一个包含 n 行的文件发送到 spring，然后它必须处理并除以 5 行。

```
@RequestMapping(value = "/load", method = RequestMethod.POST) 
public @ResponseBody ResponseEntity<List<filecontent>> 
                     Control(@RequestParam("files") List<MultipartFile> file) 
```

我曾经`PagedListHolder`在 jqgrid 给出响应，但我不知道如何请求其他行，如果我调用相同的方法，这需要参数“文件”，但我已经发送了文件。如果我将所有数据发送到 jqGrid，这将非常缓慢，并且我一次只需要获取该文件的一部分。那么我如何从 jqgrid 向其他部分提出请求呢？谢谢。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:50:18.697

您的 jqGrid 应该将您需要的所有信息传递给控制器​​，以便您拉回正确的数据页面。

```
sidx = data to sort on
sord = the sort order
page = which page the grid is on
rows = how many rows are being shown in the grid 
```

这应该允许您针对数据源查询适当的数据页面，并且只将该切片传递给 jqGrid 进行显示。

# python - Python：在两个列表中查找第一个不匹配项

> ID：15830663
> 
> 赞同：5
> 
> 时间：2013-04-05T09:43:29.513
> 
> 标签：python, list

给定两个相同长度的列表，如何有效地找到这些列表的对应元素不相等的第一个位置？基本上我需要索引或两个不相等的元素。

我很感兴趣是否存在一些简洁的“pythonic”解决方案，而列表没有明显的显式迭代。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:45:10.327

您无法避免对列表的迭代，但您可以通过理解来做到这一点并获得一个优雅的解决方案：

```
next( (idx, x, y) for idx, (x, y) in enumerate(zip(list1, list2)) if x!=y ) 
```

如果你喜欢不那么以单线为中心的东西，你可以像这样拆分它

```
coupled_idx = enumerate(zip(list1, list2))
res = next( idx for idx, (x, y) in coupled_idx if x!=y ) 
```

编辑：

另外，如果您需要检查两个列表可以完全相等的情况，您可以在下一个函数中添加第二个参数，告诉它如果没有找到索引则返回什么。最常见的选项是返回 None：

```
coupled_idx = enumerate(zip(list1, list2))
res = next( (idx for idx, (x, y) in coupled_idx if x!=y), None ) 
```

请注意，您需要将生成器表达式括在括号之间，因为它不是此调用中函数的唯一参数。

为了增加一点乐趣，您还可以通过链接表达式来询问第 n 对不同的情侣。例如，这会为您提供直到第五对的所有夫妻（如果夫妻失踪，则填写无）

```
coupled_idx = enumerate(zip(list1, list2))
coupler = (idx for idx, (x, y) in coupled_idx if x!=y)
res = [ next(coupler, None) for _ in range(5) ] 
```

编辑2：

这种解决方案实际上是通过 zip 函数创建两个列表的副本。如果您需要避免这种情况，您可以使用itertools 模块中的**izip函数。**

关于有趣的部分，您可以通过同一个模块的**islice功能仅选择某些解决方案**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:51:10.193

```
>>> from operator import eq
>>> a = [1, 2, 4, 3]
>>> b = [1, 2, 3, 4]
>>> map(eq, a, b).index(False)
2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:37:18.230

```
>>> from itertools import dropwhile
>>> a = [1, 2, 4, 3]
>>> b = [1, 2, 3, 4]
>>> next(dropwhile(lambda x: x[0] == x[1], zip(a, b)))
(4, 3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:45:57.257

```
In [1]: l1=[1,2,3]

In [2]: l2=[1,4,5]

In [4]: next(i for i, (el1, el2) in enumerate(zip(l1, l2)) if el1 != el2)
Out[4]: 1 
```

这里，`1`是第一个索引where`l1`和`l2`differ。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T09:52:17.493

尝试这个：

```
next(i for i, (el1,el2) in enumerate(zip(li1,li2)) if el1 != el2) 
```

或者它的等效功能：

```
def first_diff(li1, li2):
    for i, (el1,el2) in enumerate(zip(li1,li2)):
        if el1 != el2:
            return i
    return False 
```

一个例子

```
>>> li1 = range(32)
>>> li2 = range(32)
>>> li2[10] = 2
>>> next(i for i, (el1,el2) in enumerate(zip(li1,li2)) if el1 != el2)
10
>>> first_diff(li1, li2)
10 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-21T18:10:07.260

同时，下一个命令中允许有一个额外的默认参数。由于 filter 和 zip 是生成器，因此以下构造涉及两个列表的最小元素数，以确定两个列表在相同索引处定义但在该索引处具有不同值的第一个值，或者在不存在此类值时返回默认值。

只要可以找到差异，就会返回不同的值：

```
a=[1,2,3,4,5,6]

b=[1,2,7,4,'Hugo']

next(filter(lambda x: x[0]!=x[1], zip(a,b)),"Value that you choose to represent failure")

Out[91]: (3, 7) 
```

当两个列表相等时，返回默认值：

```
b[2]=3; b[4]=5; b.append(6)

next(filter(lambda x: x[0]!=x[1], zip(a,b)),"Value that you choose to represent failure")

Out[93]: 'Value that you choose to represent failure' 
```

当任何其他问题导致搜索失败时，将返回默认值：

```
a=[]

next(filter(lambda x: x[0]!=x[1], zip(a,b)),"Value that you choose to represent failure")

Out[95]: 'Value that you choose to represent failure' 
```

当然，您可以将生成器分配给一个变量并重复使用 next 来查找第二个或其他事件。

```
a=[1,2]

b=['fred',1,2.2]

f=filter(lambda x: x[0]!=x[1], zip(a,b))

next(f,'error')

Out[110]: (1, 'fred')

next(f,'error')

Out[111]: (2, 1)

next(f,'error')

Out[112]: 'error' 
```

您可以使用 None 作为默认值以静默失败或用于测试

```
next(f,None) 
```

脱离列表末尾后的后续调用不会引发异常或错误。

```
next(f,'No more')

Out[114]: 'No more' 
```

# android - 将滑动抽屉放在另一个布局的顶部

> ID：15830664
> 
> 赞同：0
> 
> 时间：2013-04-05T09:43:29.450
> 
> 标签：android, slidingdrawer

我想在另一个布局顶部显示我的从左到右滑动抽屉.. 我该怎么做？

蓝色部分是滑动抽屉......它没有放在其他布局的顶部......我已经使用这个[链接](http://samplecodez.com/android/slidingdrawer.php#)来创建滑动抽屉。请帮忙！提前谢谢！

这是我的代码

```
 `      <?xml version="1.0" encoding="utf-8"?>
        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/scrollView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:scrollbars="none" >

        <LinearLayout
            android:id="@+id/relativelayout"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#f5f5f5"
            android:orientation="vertical" >

     <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="70dp"
         android:background="#325462">

         <Button    
            android:id="@+id/handle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Settings"
             android:layout_alignParentLeft="true"
            />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/relativelayout"

            android:gravity="center"
            android:paddingLeft="45dp"
            android:paddingRight="30dp"
            android:singleLine="false"
            android:text="Application Form"
            android:textSize="20sp"
            android:textStyle="bold" />

        <Button
            android:id="@+id/dashboardbtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="24dp"
            android:background="@drawable/dashboardimg"
            android:onClick="dashboardpage" />

            </RelativeLayout>  
                          <com.android.lthomepage.Transparent
            android:id="@+id/popup_window"
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:padding="30px">

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingBottom="20dp"
                android:paddingTop="20dp"
                android:text="Settings"
                android:textColor="#000000"
                android:textSize="20dp" />

            <Button
                android:id="@+id/changepass"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Change Online Password" />

            <Button
                android:id="@+id/changpin"
                android:layout_width="180dp"
                android:layout_height="wrap_content"
                android:text="Change Offlin Pin" />

            <Button
                android:id="@+id/logout"
                android:layout_width="180dp"
                android:layout_height="wrap_content"
                android:text="Logout" />

    </com.android.lthomepage.Transparent>

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="13.08"
            android:background="@drawable/hdpi1" >
          <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="450dp"
        android:layout_height="match_parent"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="70dp"
        android:layout_marginTop="10dp" >

        <LinearLayout
            android:layout_width="388dp"
            android:layout_height="match_parent"
            android:layout_marginTop="30dp"
            android:orientation="vertical" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp" >

            <EditText
            android:id="@+id/displayDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="Select Application Date" 
            android:textSize="10dp" />

            <ImageView
           android:id="@+id/pickDate"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_centerHorizontal="true"
           android:layout_centerVertical="true"
           android:layout_toRightOf="@id/displayDate"
           android:src="@drawable/calendaricon" />

            </RelativeLayout>

            <EditText
            android:id="@+id/rpfno"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_alignRight="@+id/displayDate"
            android:ems="10"
            android:hint="RPF Application no." >

           <requestFocus />
            </EditText>

            <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Dear Sir/s," />

            <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="I/We am/are requesting you to extend the finance facility to me/us for" />

            <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/finance_rupees"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/textView4"
                android:ems="10" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/finance_rupees"
                android:layout_alignBottom="@+id/finance_rupees"
                android:layout_alignParentLeft="true"
                android:paddingLeft="15dp"
                android:text="Rs." />

            </RelativeLayout>

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"

                android:layout_alignParentTop="true" >

            <TextView
                android:id="@+id/textView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:text="for a tenure of" />

            <EditText
                android:id="@+id/tenure"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/textView5"
                android:ems="10" />

            </RelativeLayout>

            <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text=" months as per applicable rate of interest for purchase of new / used assests" />

            <EditText
                android:id="@+id/asset"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:ems="10" />

            <TextView
                android:id="@+id/textView7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/asset"
                android:layout_alignBottom="@+id/asset"
                android:layout_toRightOf="@+id/asset"
                android:text=" from your company, kindly consider my/our application. " />
                <RelativeLayout 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
            <Button
                    android:id="@+id/btn_exit"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_alignParentLeft="true"
               android:layout_alignParentTop="true"
               android:text="Exit"
               android:textSize="18sp" />

        <Button
       android:id="@+id/info"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentRight="true"
       android:layout_alignParentTop="true"
       android:layout_marginRight="14dp"
       android:background="@drawable/i_info" />

        <Button
       android:id="@+id/btn_saveandcontinue"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentTop="true"
       android:layout_marginLeft="10dp"
       android:layout_toRightOf="@+id/btn_exit"
       android:text="Continue"
       android:textSize="18sp" />
            </RelativeLayout>

            </LinearLayout>

        </ScrollView>

              <RelativeLayout
                 android:layout_width="50dp"
                 android:layout_height="fill_parent"
                 android:layout_alignParentRight="true"
                 android:layout_alignTop="@+id/scrollView1"
                 android:layout_toRightOf="@+id/scrollView1" >

                  <Button
            android:id="@+id/pf1"
            android:layout_width="70dp"
            android:layout_height="150dp"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="60dp"
            android:background="@drawable/applicant" />

                <Button
            android:id="@+id/pf2"
            android:layout_width="70dp"
            android:layout_height="150dp"
            android:layout_alignLeft="@+id/pf1"
            android:layout_below="@+id/pf1"
            android:layout_marginTop="24dp"
            android:background="@drawable/refer" />

            <Button
            android:id="@+id/pf3"
            android:layout_width="70dp"
            android:layout_height="150dp"
            android:layout_alignLeft="@+id/pf2"
            android:layout_below="@+id/pf2"
            android:layout_marginTop="37dp"
            android:background="@drawable/asset" />

            <Button
            android:id="@+id/pf4"
            android:layout_width="70dp"
            android:layout_height="150dp"
            android:layout_alignLeft="@+id/pf3"
            android:layout_below="@+id/pf3"
            android:layout_marginTop="40dp"
            android:background="@drawable/office" />

             </RelativeLayout>

            </RelativeLayout>
            </LinearLayout>

            </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:02:28.357

我使用**[了 Sephiroth](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom/)**的滑动抽屉。它提供了方向的属性，例如，

```
<attr name="direction">
    <enum name="rightToLeft" value="0" />
    <enum name="bottomToTop" value="1" />
    <enum name="leftToRight" value="2" />
    <enum name="topToBottom" value="3" />
</attr> 
```

因此，只需在您的布局中传递您想要的方向类型即可。

```
<it.sephiroth.demo.slider.widget.MultiDirectionSlidingDrawer
    xmlns:my="http://schemas.android.com/apk/res/it.sephiroth.demo.slider"
    android:id="@+id/drawer"
    my:direction="topToBottom"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    my:handle="@+id/handle"
    my:content="@+id/content">
    <include
        android:id="@id/content"
        layout="@layout/pen_content" />
    <ImageView
        android:id="@id/handle"
        android:layout_width="wrap_content"
        android:layout_height="40px"
        android:src="@drawable/sliding_drawer_handle_bottom" />
</it.sephiroth.demo.slider.widget.MultiDirectionSlidingDrawer> 
```

试试这个，肯定会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:55:38.347

FrameLayout 专为重叠视图而设计。

重叠整个布局做

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
              .....
         >       

          <RelativeLayout .... 
           >
                    all your staff goes here
          </RelativeLayout>

          <SeekBar     .... />

  </FrameLayout> 
```

要重叠“子布局”，请使用 FrameLayout 包装此布局，并将 SeekBar 放置在其后（但在 FrameLayout 内）。

# c# - 导航属性到同一个表

> ID：15830667
> 
> 赞同：1
> 
> 时间：2013-04-05T09:43:33.133
> 
> 标签：c#, entity-framework, dbcontext

我的项目中有以下模型（EF5、DBContext、数据库优先）：

顾客

```
 InvoiceAddress -> Addresses (table)
 DeliveryAddress -> Addresses (table) 
```

所以我对同一张表有 2 个外键。

当我使用以下语句加载客户实体时：

```
 var cst = ctx.Customers.Where(c => c.CustomerID == 2).SingleOrDefault();
     ctx.Entry(cst).Reference(c => c.InvoiceAddress).Load(); 
```

在加载 InvoiceAddress 的引用后，DeliveryAddress 也被加载。但是，这仅在发票和交货 ID 相同时才会发生。当它们不相等时，不会加载 DeliveryAddress。是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:51:12.377

这是一个有根据的猜测：

当您急切地引用一个实体时，您会`SELECT`立即引用它。当您获取数据时，实体管理器会创建 EF 意义上的*实体*。由于`DeliveryAddress`and`InvoiceAddress`实际上是同一个实体（相同的 PK，如果你有一个复合键，它必须是相同的复合键），它使用相同的实例来表示它们，这也意味着两个地址都被加载- 因为为什么不呢？它是完全相同的实体，数据指向数据库中的同一行。引用是共享的，它使用更少的内存。

如果 PK 不同，则发票和收货地址由不同的实体表示，加载一个不会影响另一个。

# asp.net - 运算符 '>=' 与操作数类型 'String' 和 'Object' 不兼容

> ID：15830668
> 
> 赞同：0
> 
> 时间：2013-04-05T09:43:43.870
> 
> 标签：asp.net, sql, linq, entity-framework

我想使用 linq 创建搜索，我在 SQL 中有用户表，其中包含两`nvarchar`列 FName 和 LName 以及 Id 和其他列的 PK。

**aspx**：

```
 <asp:TextBox ID="search" runat="server" AutoPostBack="True" 
                            ontextchanged="search_TextChanged"></asp:TextBox>    <br />      
  <asp:ListBox ID="found" runat="server" Height="400px" Width="300px" 
                               AutoPostBack="True" DataSourceID="LinqUserSearch" DataTextField="Users" 
                               DataValueField="Id">
  </asp:ListBox>   
  <asp:LinqDataSource ID="LinqUserSearch" runat="server" 
                               ContextTypeName="Zhotel.User" EntityTypeName="" GroupBy="Id" 
                               OrderBy="FName, LName" OrderGroupsBy="key" 
                               Select="new (key as Id, it as Users)" TableName="Users" 
                               Where="FName &gt;= @FName &amp;&amp; LName &gt;= @LName">
        <WhereParameters>
         <asp:ControlParameter ControlID="search" Name="FName" PropertyName="Text" 
                                       Type="String" />
       <asp:ControlParameter ControlID="search" Name="LName" PropertyName="Text" 
                                       Type="String" />
  </WhereParameters>
  </asp:LinqDataSource> 
```

但在运行时，上面的代码给了我这个错误。

```
 Operator '>=' incompatible with operand types 'String' and 'Object' 
```

我使用 EF 和 ASP.NET 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:04:56.687

看看这里让你开始：

[http://forums.asp.net/t/1654093.aspx/1](http://forums.asp.net/t/1654093.aspx/1)

问题很可能是字符转义问题。

干杯。

# c# - 如何通过编码创建多个端点？

> ID：15830670
> 
> 赞同：2
> 
> 时间：2013-04-05T09:43:46.863
> 
> 标签：c#, wcf, c#-4.0

端点是在 app.config 中创建的，如下所示，但是如何创建具有不同地址的多个端点？

**应用程序配置**：

```
 <service name="PokerService.PlayerService" behaviorConfiguration="ServiceBehaviorPlayer">
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:5054" />
      </baseAddresses>
    </host>
    <!-- Service Endpoints -->
    <endpoint address="player" binding="netTcpBinding" bindingConfiguration="PlayerBinding" contract="PokerService.IPlayerService" />
    <endpoint address="player/mex" binding="mexTcpBinding" name="ServiceBehaviorPlayer" contract="IMetadataExchange" />
  </service>
</services> 
```

但我怎么能像这样生成`Tcp//localhost/player/1 ( 1-1000)`。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:57:56.507

这将在主机上创建 1000 个端点。

```
var host = new ServiceHost(typeof(PokerService.PlayerService));
 for(int i = 1; i <= 1000; i++)
 {
   host.AddServiceEndpoint(typeof(PokerService.IPlayerService), 
                                  new NetTcpBinding(),
                                  @"net.tcp://localhost:5054/player/"+i);
 }
 host.Open(); 
```

**编辑**

我同意@JanW - 这个方法是ludacris - 并且作为@JanW sais，你应该让ServiceHost处理并发，通过在你的实现上配置[ServiceBehavior 。](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.aspx)

但是，要获取托管端点的完整列表，请执行以下操作：

```
foreach (var e in host.Description.Endpoints)
{
    Console.WriteLine(e.Address);
} 
```

# c# - 如何在 .aspx 页面中访问 ac# 变量的值并在 String.Concat 方法中使用它？

> ID：15830672
> 
> 赞同：2
> 
> 时间：2013-04-05T09:43:52.380
> 
> 标签：c#, asp.net

嗨，我的代码中有这个：

```
string input = Request.Url.AbsoluteUri;
string output = input.Substring(input.IndexOf('=') + 1); 
```

这是我的 .aspx 页面：

```
<asp:TemplateField ShowHeader="False" HeaderText="Some text">
   <ItemTemplate>
     <asp:TextBox ID="txtUrl" Text='<%# String.Concat(@"\Uploads\",Eval("text")) %>' runat="server" onclick="javascript:this.select();"></asp:TextBox>
   </ItemTemplate>
</asp:TemplateField> 
```

我需要这样做：

```
<asp:TemplateField ShowHeader="False" HeaderText="Some text">
   <ItemTemplate>
     <asp:TextBox ID="txtUrl" Text='<%# String.Concat(@"\Uploads\",output,Eval("text")) %>' runat="server" onclick="javascript:this.select();"></asp:TextBox>
   </ItemTemplate>
</asp:TemplateField> 
```

- 如您所见，我需要使用 string.concat 加入**\Uploads\** + 变量**输出**的值+ **Eval("text")在文本框中创建自定义“路径”**

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:47:29.103

您可以先在后面的代码中编写一个方法：

```
protected string GetOutput()
{
    string input = Request.Url.AbsoluteUri;
    return input.Substring(input.IndexOf('=') + 1);
} 
```

然后在您的 WebForm 中使用此方法：

```
<asp:TemplateField ShowHeader="False" HeaderText="Some text">
   <ItemTemplate>
     <asp:TextBox ID="txtUrl" Text='<%# String.Concat(@"\Uploads\", this.GetOutput(), Eval("text")) %>' runat="server" onclick="javascript:this.select();"></asp:TextBox>
   </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:48:15.627

公开宣布。

```
public string output = string.Empty; // At the class declaration

output = input.Substring(input.IndexOf('=') + 1); // On page load, etc 
```

# iphone - 在方法之间传递 NSString

> ID：15830677
> 
> 赞同：0
> 
> 时间：2013-04-05T09:44:14.697
> 
> 标签：iphone, objective-c, methods, nsstring

我遇到了一些新手问题。

我得到了这种方法来根据 GPS 坐标确定 iPhone 所在的邮政编码。反向地理编码。我的方法有效，我知道这一点，因为将正确的邮政编码写到标签上没有问题。

但我需要将此邮政编码存储在一个字符串中，以便在我用来编写 SMS 的方法中使用该字符串。

任何人都可以帮助我吗？

告诉我是否需要源代码！（只是目前没有坐在我的工作补偿上）

显然我被误解了，应该发布 som 代码。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"didUpdateToLocation: %@", newLocation);
    CLLocation *currentLocation = newLocation;

    // Reverse Geocoding
    NSLog(@"Resolving the Address");
    [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
        if (error == nil && [placemarks count] > 0) {
            placemark = [placemarks lastObject];
            **postalCode** = [NSString stringWithFormat:@"%@",
                            placemark.postalCode];
        } else {
            NSLog(@"%@", error.debugDescription);
        }
    } ];

} 
```

在这里，我尝试将邮政编码保存在名为 postalCode 的 NSString 中（以“**”突出显示）

我尝试在短信作曲家中再次加载它

```
-(void)displaySMSComposerSheet
{
    CLLocation *currentLocation;

    // Reverse Geocoding
    NSLog(@"Resolving the Address");
    [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
        if (error == nil && [placemarks count] > 0) {
            placemark = [placemarks lastObject];
            postalCode = [NSString stringWithFormat:@"%@",
                          placemark.postalCode];
        } else {
            NSLog(@"%@", error.debugDescription);
        }
    } ];

    MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];
    picker.recipients = [NSArray arrayWithObjects:@"1220", nil];
    picker.body = [NSString stringWithFormat:@"Dog %@", (placemark.)postalCode];
    picker.messageComposeDelegate = self;

    [self presentModalViewController:picker animated:YES];

} 
```

仅在 SMS 窗口中打印出来： Dog (null) 而且我确定我有坐标，它们会在输出中打印出来。

希望这有助于更好地理解这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:51:27.843

如果你想`postalCode`跨视图控制器访问，你可以把它保存到`NSUserDefaults`

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    // ...
    NSString *postalCode = [NSString stringWithFormat:@"%@",
                            placemark.postalCode];
    [[NSUserDefaults standardDefaults] setObject:postalCode forKey:@"postalCode"];
    // ...
} 
```

并再次加载

```
-(void)displaySMSComposerSheet
{
    // ...
    NSString *postalCode = [[NSUserDefaults standardDefaults] objectForKey:@"postalCode"];
    // ....
} 
```

**编辑：**您确定`placemark`并且`postalCode`已经设置（即 -`locationManager:didUpdateToLocation:fromLocation:`已被调用）？如果`displaySMSComposerSheet`在确定位置之前调用，则此行为是正常的。

**Edit2：**从您的代码中，您似乎忘记告诉`locationManager`开始更新位置。将以下内容添加到`viewDidLoad`：

```
locationManager.delegate = self;
[locationManager startUpdatingLocation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:57:46.413

尝试

```
picker.body = [NSString stringWithFormat:@"Dog %@", postalCode]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:06:18.403

```
-(void)displaySMSComposerSheet
{
    CLLocation *currentLocation;

    // Reverse Geocoding
    NSLog(@"Resolving the Address");
    [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
        if (error == nil && [placemarks count] > 0) {
            placemark = [placemarks lastObject];
            postalCode = [NSString stringWithFormat:@"%@",
                          placemark.postalCode];
            [self showMailComposer:postalcode]; // method call
        } else {
            NSLog(@"%@", error.debugDescription);
        }
    } ];

}

-(void)showMailComposer:(NSString *)postalCode{
    MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];
    picker.recipients = [NSArray arrayWithObjects:@"1220", nil];
    picker.body = [NSString stringWithFormat:@"Dog %@",  postalCode];
    picker.messageComposeDelegate = self;

    [self presentModalViewController:picker animated:YES];
} 
```

# spring - 从 jsp 访问 Spring bean

> ID：15830678
> 
> 赞同：1
> 
> 时间：2013-04-05T09:44:22.713
> 
> 标签：spring, model-view-controller

我正在学习 Spring 课程，我的 Spring MVC 程序在 jsp 页面上打印标准的“Hello World”消息。我正在使用 eclipse 3.6 和 GlassFish 3.1 从 IDE 中运行应用程序。以下是相关文件：

**控制器.HelloWorldController.java**

```
package controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class HelloWorldController {

      @RequestMapping("/helloworld")
      protected ModelAndView HelloWorld() throws Exception {
        String hello = "Hello World! My First Web App Using Spring MVC.";
        return new ModelAndView("helloworld","hello",hello);

      }

} 
```

**Dispatcher servlet 配置文件：dispatcher-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

   <context:component-scan
        base-package="controller" />        

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean> 

</beans> 
```

**应用程序的入口点：index.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                       "http://www.w3.org/TR/html4/loose.dtd">

<html>
  <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>My First Web Application Using Spring MVC</title>
  </head>
  <body>
    <h3><a href="helloworld.htm">Greet the World!</a></h3>
  </body>
</html> 
```

**helloworld.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>My First Web Application Using Spring MVC</title>
</head>
<body>
     ${hello}
</body>
</html> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/dispatcher-servlet.xml</param-value>
  </context-param>
  <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
  <display-name>FirstWebAppUsingSpringMVC</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>dispatcher</servlet-name>
     <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
      <url-pattern>*.htm</url-pattern>
  </servlet-mapping>
  <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

并给出成功的输出`http://localhost:8080/FirstWebAppUsingSpringMVC/helloworld.htm.`

我很好奇 Spring bean 是否可以从 jsp 访问（在这方面用谷歌搜索并在网络上做了一些研究），并对它们确实可以做到感到惊讶（正如 Spring 设计人员以 的形式`exposedContextBeanNames`和`exposeContextBeansAsAttributes`属性提供的那样`InternalResourceViewResolver`）。

**[侧边栏]** 我知道这个网站已经有很多关于这个主题的问题。我已经经历了一些我认为可以帮助我解决问题的方法，但没有。所以，请原谅我问的很明显！
**[/边栏]**

所以，为了实现这个`exposedContextBeanNames`属性，我修改了

**控制器.HelloWorldController.java**

```
package controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.AbstractController;
import service.HelloWorldService;

    public class HelloWorldController extends AbstractController {
            //property helloWorldService that  references Service bean HelloWorldService
        private HelloWorldService helloWorldService;

            //defined handleRequestInternal method of the AbstractController class
            //that returns a new ModelAndView object
            //Instance of ModelAndView adds logical viewName and model data as arguments
        @Override
        protected ModelAndView handleRequestInternal(HttpServletRequest request,
        HttpServletResponse response) throws Exception {
        // TODO Auto-generated method stub
        //view passed as string to new ModelAndView object
        ModelAndView mv = new ModelAndView("helloworld");
            //instance of Service class accessing its object dispMessage()
            mv.addObject("helloworld", helloWorldService.dispMessage());
            return mv;
        }

            //generate setter and getter for the property
            //implicitly injecting business component within Controller
        public void setHelloWorldService(HelloWorldService helloWorldService) {
            this.helloWorldService = helloWorldService;
        }

        /**
         * @return the helloWorldService
         */
        public HelloWorldService getHelloWorldService() {
            return helloWorldService;
        }        
    } 
```

**Dispatcher servlet 配置文件：dispatcher-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!-- defined handler to map url pattern to Controller bean on the basis of controller class -->
<bean id="controllerclasshandlermapping"
    class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping">
</bean>

<!-- defined view resolver to resolve Controller class HelloWorldController to helloworld.jsp -->
   <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp">
<!-- exposing Controller bean helloWorldController to the view  -->
          <property name="exposedContextBeanNames">
            <list>
             <value>helloWorldController</value>
            </list>
          </property>    
    </bean> 

<!-- Explicit mapping to Controller bean helloWorldController which references Service bean thru its property
       from the applicationContext.xml -->
    <bean id= "helloWorldController"
      class="controller.HelloWorldController" p:helloWorldService-ref="helloWorldService"/>
</beans> 
```

**helloworld.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>My First Web Application Using Spring MVC</title>
</head>
<body>
     <!--${beanName.beanProperty}-->
     ${helloWorldController.helloWorldService}
</body>
</html> 
```

**web.xml**

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    //changed path to applicationContext.xml to reference Service class
    <param-value>/WEB-INF/applicationContext.xml</param-value>
  </context-param> 
```

并介绍了

**service.HelloWorldService.java（服务 bean）**

```
package service;

public class HelloWorldService {

    public String dispMessage() {
        String msg = "Hello World! My First Web App Using Spring MVC.";
        return msg;
    }
} 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans  
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema
       /aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema
       /tx/spring-tx-3.0.xsd">

    <!--Service bean defined-->
    <bean name="helloWorldService" class="service.HelloWorldService"/>
</beans> 
```

但是，在运行项目时，输出`http://localhost:8080/FirstWebAppUsingSpringMVC/helloworld.htm`为

```
service.HelloWorldService@bf12af34 
```

为什么不显示“Hello World”消息？我哪里出错了？？.......一直在尝试解决这个问题，但无法找到解决方案。

如果论坛成员/专家可以帮助解决同样的问题，我们将不胜感激。

感谢用户1586954

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:34:11.433

编辑评论为时已晚，所以这里有各种各样的答案。

看起来 toString() 正在你的 helloWorldService 上被调用，所以你只是得到了对象表示，因为你还没有实现 toString。但你实际上是在访问它看起来的 bean。

这是否是一个好主意是另一回事。

最好只使用模型将数据返回到视图（您已经在这样做）所以这在您的 JSP 中就足够了：${helloworld}

# java - Powermock - @SupressStaticInitializationFor 不起作用

> ID：15830679
> 
> 赞同：0
> 
> 时间：2013-04-05T09:44:23.810
> 
> 标签：java, powermock, maven-surefire-plugin, static-initialization

我有一个包含本机方法的类和一个静态初始化程序，它加载一个 dll 并用 powermock 模拟它，以便应该抑制静态初始化程序并且不应该加载 dll。

该类如下所示：

```
class UsbCommunication {

    static {
        //load some dll
    }

    public static native void nativeFunction();

} 
```

在 windows 下，测试使用 maven 成功执行（在 eclipse 和 cmd 中）。但是当我让我们的 CI 服务器（一个 unix 系统）构建项目时，所有的测试都会出错。

测试看起来像这样：

```
@RunWith(PowerMockRunner.class)
@SuppressStaticInitializationFor
    ("com.printerStatus.UsbCommunication")
public class PrinterTest {
    //Test code
} 
```

令我困惑的是，我得到一个 java.lang.UnsatisfiedLinkError 说明尽管静态初始化程序应该被抑制，但无法加载 dll。

**版本：**

*   模拟：1.9.0
*   PowerMock：1.4.12
*   JDK：1.7

此外，我必须将此添加到 pom.xml 作为解决此问题的方法：[PowerMock 问题](https://code.google.com/p/powermock/issues/detail?id=355)

```
<profile>
    <id>SplitVerifier</id>
    <activation>
        <activeByDefault>true</activeByDefault>
    </activation>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12</version>
                <configuration>
                    <argLine>-XX:-UseSplitVerifier</argLine>
                </configuration>
            </plugin>
        </plugins>
    </build>
</profile> 
```

这是我得到的堆栈跟踪：

```
java.lang.UnsatisfiedLinkError: Can't load library
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1828)
    at java.lang.Runtime.load0(Runtime.java:792)
    at java.lang.System.load(System.java:1059)
    at de.kriegerit.tools.customPrinterStatusTools.CeSMLm.<clinit>(CeSMLm.java:9)
    at sun.reflect.GeneratedSerializationConstructorAccessor6.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator.newInstance(SunReflectionFactoryInstantiator.java:40)
    at org.objenesis.ObjenesisBase.newInstance(ObjenesisBase.java:59)
    at org.mockito.internal.creation.jmock.ClassImposterizer.createProxy(ClassImposterizer.java:111)
    at org.mockito.internal.creation.jmock.ClassImposterizer.imposterise(ClassImposterizer.java:51)
    at org.powermock.api.mockito.internal.mockcreation.MockCreator.createMethodInvocationControl(MockCreator.java:100)
    at org.powermock.api.mockito.internal.mockcreation.MockCreator.mock(MockCreator.java:58)
    at org.powermock.api.mockito.PowerMockito.mockStatic(PowerMockito.java:70)
    at de.kriegerit.tools.customPrinterStatusTools.PrinterInterfaceTest.setup(PrinterInterfaceTest.java:42)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.internal.runners.MethodRoadie.runBefores(MethodRoadie.java:129)
    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:93)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:296)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:112)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:73)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:284)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:209)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:148)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:122)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:102)
    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:42)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74) 
```

是否有任何已知问题或解决此问题的方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T09:53:39.853

我想问题是你试图在 Unix 机器上加载一个 Windows DLL ;-)

# vb6 - 如何自动关闭模态表单

> ID：15830680
> 
> 赞同：1
> 
> 时间：2013-04-05T09:44:24.517
> 
> 标签：vb6

我有一个 VB6 项目，我实现了一个带有自动注销的会话计时器。

我的问题是，如果打开了模式表单，则此表单不在 Forms Collection 中，因此我不知道是否打开此表单以卸载它。使用非模态形式，没有问题。

如果有人有想法？是否可以显示所有打开的表单（非模态和模态）？

感谢您的回复

编辑：代码片段：

表单创建：

```
Dim FormLoc As New F_Options
FormLoc.Show vbModal 
```

形式破坏：

```
For Each mFrm In Forms
    unload mFrm
next    

For Each mFrm In F_MDIParent.MDIActiveX1.Forms
    unload mFrm
next 
```

主窗体是 MDI 窗体。其他表单可以在 MDI Mainform 中打开和停靠，但有些表单是“正常的”。

编辑 ：

我做了一些测试和表单集合依赖于一个项目，我认为这个集合对于应用程序来说是全局的，但显然不是。

我想关闭主项目的所有表格。我可以让另一个项目打开一个模态表单（所有应用程序的 90 个项目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:42:23.497

如果您只想确保它已关闭，您还可以使用 Windows API 函数：

Private Declare Function CloseWindow Lib "user32" Alias "CloseWindow" (ByVal hwnd As Long) Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As Long

Dim wid 只要 wid=FindWindow(vbnullstring,"") if wid <> 0 then CloseWindow wid

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:27:09.877

一种可行的替代方案；

```
do until Screen.ActiveForm is Nothing
    unload Screen.ActiveForm
loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T06:10:15.457

模态、无模态和默认表单确实显示在表单集合中

运行以下测试项目以查看它的发生：

```
'project with 2 forms
'  form1 with :
'    1 label: name=Label1
'    1 timer: name=Timer1
'    4 command buttons: names are Command1, Command2, Command3, Command4
'  form2 with nothing on it
Option Explicit

Private Sub Command1_Click()
  Dim frm As New Form2
  frm.BackColor = vbRed
  frm.Show vbModal
End Sub

Private Sub Command2_Click()
  Dim frm As New Form2
  frm.BackColor = vbGreen
  frm.Show vbModeless, Me
End Sub

Private Sub Command3_Click()
  Dim frm As New Form2
  frm.Show
End Sub

Private Sub Form_Load()
  With Screen
    Move .Width / 2, 0, .Width / 2, .Height / 2
  End With 'Screen
  Command1.Caption = "modal"
  Command2.Caption = "modeless"
  Command3.Caption = "default"
  Command4.Caption = "unload"
  With Timer1
    .Interval = 1000
    .Enabled = True
  End With 'Timer1
End Sub

Private Sub Form_Resize()
  Dim sngLblWidth As Single, sngLblHeight As Single
  Dim sngCmdWidth As Single, sngCmdHeight As Single
  sngCmdHeight = 495
  sngLblHeight = ScaleHeight - sngCmdHeight
  sngLblWidth = ScaleWidth
  sngCmdWidth = sngLblWidth / 4
  Label1.Move 0, 0, sngLblWidth, sngLblHeight
  Command1.Move 0, sngLblHeight, sngCmdWidth, sngCmdHeight
  Command2.Move sngCmdWidth, sngLblHeight, sngCmdWidth, sngCmdHeight
  Command3.Move 2 * sngCmdWidth, sngLblHeight, sngCmdWidth, sngCmdHeight
  Command4.Move 3 * sngCmdWidth, sngLblHeight, sngCmdWidth, sngCmdHeight
End Sub

Private Sub Timer1_Timer()
  Dim frm As Form
  Dim strShow As String
  strShow = CStr(Now)
  For Each frm In Forms
    strShow = strShow & vbCrLf & frm.Name
  Next frm
  Label1.Caption = strShow
End Sub 
```

**[编辑]**

将 3 个命令按钮添加到 form2 并单击它们以测试卸载时会发生什么

在从 ide 运行时对其进行测试，并注意显示模式表单、显示无模式表单（有所有者）和显示默认表单（没有所有者）时的区别..注意“运行”按钮i ide .. 卸载 form1 并显示模型表单时，应用程序保持运行

这是Form2的代码

```
Option Explicit

Private Sub Command1_Click()
  UnloadForms "Form1"
End Sub

Private Sub Command2_Click()
  UnloadForms "Form2"
End Sub

Private Sub Command3_Click()
  UnloadForms ""
End Sub

Private Sub Form_Load()
  Command1.Caption = "Unload Form1"
  Command2.Caption = "Unload Form2"
  Command3.Caption = "Unload All"
End Sub

Private Sub UnloadForms(strName As String)
  Dim frm As Form
  For Each frm In Forms
    If InStr(frm.Name, strName) > 0 Then
      Unload frm
    End If
  Next frm
End Sub 
```

**[编辑 2]**

下面是我用来卸载所有表单的子，这个子在一个模块中，所以我可以在任何地方调用它

```
Public Sub UnloadAll(strExcept As String, blnKeepMDI As Boolean)
  Dim frm As Form
  'unload all other forms
  For Each frm In Forms
    Select Case frm.Name
      Case "mdiPaneel"   'unload mdi as last
      Case "frmMsg"      'dont unload msg unless specified
      Case strExcept     'dont unload this if mdi stays
        If blnKeepMDI = False Then
          Unload frm
        End If
      Case Else
        Unload frm
    End Select
  Next frm
  If blnKeepMDI = False Then
    'unload mdi and finish program
    Unload mdiPaneel
  End If
End Sub 
```

# php - 身份验证后执行操作

> ID：15830682
> 
> 赞同：1
> 
> 时间：2013-04-05T09:44:26.540
> 
> 标签：在用户通过zfcuser, php, authentication, zend-framework2, zfcuser

[在用户通过zfcuser](/questions/tagged/zfcuser "显示标记为“zfcuser”的问题")进行身份验证后，我想执行一些操作。

我之前已经找到了如何执行操作：

```
$events->attach('ZfcUser\Authentication\Adapter\AdapterChain', 'authenticate.pre', function($e) use ($startup) { 
  //actions
}); 
```

但是**认证后什么都没有，**我错过了一个**触发器**，如何找到它？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:15:02.717

没有定义身份验证后触发器（至少在我使用的 ZfcUser 版本中）。您可以在 ZfcUser\Authentication\Adapter\AdapterChain\prepareForAuthentication() 找到现有的触发器

```
public function prepareForAuthentication(Request $request)
{
    $e = $this->getEvent()
              ->setRequest($request);

    //THE PRE-AUTHENTICATION YOU USE
    $this->getEventManager()->trigger('authenticate.pre', $e);

    //THIS ONE LAUNCHES THE AUTHENTICATION. LOOK AT:
    //ZfcUser\Authentication\Adapter\Db\authenticate()
    $result = $this->getEventManager()->trigger('authenticate', $e, function($test) {
        return ($test instanceof Response);
    });

    if ($result->stopped()) {
        if($result->last() instanceof Response) {
            return $result->last();
        } else {
            // throw new Exception('Auth event was stopped without a response.');
        }
    }

    if ($e->getIdentity()) {
        //THIS IS WHERE THE TRIGGER SHOULD BE PLACED
        return true;
    }

    return false;
} 
```

您可以覆盖此类/方法并将触发器放在上面注释的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:05:12.380

好的，我不知道这是否是好方法，但它正在工作..

我刚刚将**login_redirect_route**更改为控制器操作以执行一些有用的操作，**然后重定向**到用户配置文件。

顺便说一下，触发器工作得很好@lluisaznar！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T16:42:44.330

今天也和这个搏斗，写了一篇关于它的小文章，以防将来对任何人有帮助：

[http://circlical.com/blog/2013/7/5/capturing-auth-events-with-zfcuser](http://circlical.com/blog/2013/7/5/capturing-auth-events-with-zfcuser)

# java - 如何为每个正在执行的 java 程序强制执行安全策略

> ID：15830685
> 
> 赞同：2
> 
> 时间：2013-04-05T09:44:36.210
> 
> 标签：java, jvm, security-policy

我如何为 JVM 指定将应用于其中执行的每个程序的安全策略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T00:00:09.047

更新 JVM 的默认 java 安全策略文件：

```
https://docs.oracle.com/javase/8/docs/technotes/guides/security/PolicyFiles.html 
```

或者，如果您想为每个应用程序使用不同的策略文件，则需要通过将以下设置添加到 java 命令来定义启动时的策略：

```
-Djava.security.manager -Djava.security.policy=/path/to/app.policy 
```

# excel - 在java中调用宏

> ID：15830687
> 
> 赞同：0
> 
> 时间：2013-04-05T09:44:46.010
> 
> 标签：excel, vba

我是 Java 编程新手。

我想创建一个简单的程序来读取 .xls / .xlsx 文档、调用宏并保存文件。我正在使用 org.apache.poi，除了调用宏之外，一切似乎都很好。我一直在论坛上寻找一些技巧，但一无所获。

宏之前创建并保存。我只有很多文件，不想手动完成。

在 Java 中，我创建了一个工作簿，创建了一个工作表。如何调用宏来完成？我应该参考工作簿或工作表本身吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T19:36:18.707

有几种方法可以实现这一点：

*   通过 ProcessBuilder 启动 Excel 并让 Excel 运行宏并保存文件。要运行宏，您可能需要添加一点 VBA（例如在 AutoOpen Sub 中）。
*   还有一些工具可以从 Excel（[Obba](http://www.obba.info)或[XLLoop](http://xlloop.sourceforge.net)）调用 Java。您可以调用 Java 表单 VBA，然后调用宏，然后保存文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:12:02.927

目前这是不可能的。POI 是一个用于读取/编辑 Office 文件的库。它将保留文件中存在的任何宏，但它没有内置的解释器来运行宏。

# ruby-on-rails - Ruby on Rails thinking-sphinx 有很多通过索引

> ID：15830688
> 
> 赞同：0
> 
> 时间：2013-04-05T09:44:48.170
> 
> 标签：ruby-on-rails, full-text-search, thinking-sphinx

干杯! 我有`tour`这些关联的模型：

```
 has_many :tour_in_the_countries
  has_many :country, :through => :tour_in_the_countries 
```

在 tour_index.rb

```
ThinkingSphinx::Index.define :tour, :with => :active_record do
  indexes :title
  indexes :preview
end 
```

在这种情况下如何添加到索引国家的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:03:12.240

这应该可以解决问题：

```
indexes tour_in_the_countries.country.name, :as => :countries 
```

# php - 以编程方式将 DOC/DOCX 转换为 PDF

> ID：15830689
> 
> 赞同：1
> 
> 时间：2013-04-05T09:44:54.460
> 
> 标签：php, python, ms-word, pdf-generation

我在尝试以编程方式将 DOC/DOCX 转换为 PDF 时遇到问题。我正在关注[**这个答案**](https://stackoverflow.com/a/11665852/1159056)。

我正在使用上面答案中提到的**PyODConverter 。**我要求我的虚拟主机安装**OpenOffice**，他们也这样做了，所以当我运行`whereis soffice`它时，它给了我`/usr/bin/soffice`.

* * *

所以，我有这段代码：

# adocpdf

```
filename=$1
extension=$2
SERVICE='soffice'
if [ "`ps ax|grep -v grep|grep -c $SERVICE`" -lt 1 ]; then 
unset DISPLAY
/usr/bin/soffice -headless -accept="socket,host=127.0.0.1,port=8100;urp;" -nofirststartwizard & 
sleep 5s
fi
python /home/[MYSITE]/public_html/docpdf/DocumentConverter.py /home/[MYSITE]/public_html/docpdf/$filename$extension /home/[MYSITE]/public_html/docpdf/$filename.pdf 
```

# 索引.php

```
<?php
    $filename = "teste";
    $extension = ".doc";
    $output = array();
    $return_var = 0;

    exec("/home/[MYSITE]/public_html/docpdf/adocpdf {$filename} {$extension}", $output, $return_var);
    print_r($output);
    print($return_var);
 ?> 
```

# 我的文件夹结构

![在此处输入图像描述](https://i.stack.imgur.com/MZz9u.png)

执行我的php代码后，输出如下，`Array()`是`$output`和`1``$return_var`

```
Array ( ) 1 
```

我对python不太了解，我真的需要这个来工作！

## 编辑1：

我运行了 `exec('pydoc modules') 它给了我这个输出：

```
Please wait a moment while I gather a list of all available modules...

ArrayPrinter audioop iniparse (package) select
BaseHTTPServer audit inspect selinux (package)
Bastion auparse itertools semanage
CDROM avc japanese (package) seobject
CGIHTTPServer base64 keyword sepolgen (package)
CORBA bdb kudzu sets
Canvas binascii lapack_lite sgmllib
ConfigParser binhex ldap (package) sha
Cookie bisect ldapurl shelve
DLFCN bonobo (package) ldif shlex
Dialog bsddb (package) libiscsi shm
DocXMLRPCServer bz2 libsvn (package) shutil
DocumentConverter cElementTree libuser signal
FFT (package) cPickle libxml2 site
FileDialog cStringIO libxml2mod smtpd
FixTk cairo (package) linecache smtplib
HTMLParser calendar linuxaudiodev snack
IN cgi locale sndhdr
LinearAlgebra cgitb logging (package) socket
M2Crypto (package) chunk macpath sos (package)
MA (package) cmath macurl2path sqlite (package)
MLab cmd mailbox sqlitecachec
Matrix code mailcap sre
MimeWriter codecs markupbase sre_compile
Numeric codeop marshal sre_constants
ORBit collections math sre_parse
PortableServer colorsys md5 stat
Precision commands mhlib statcache
Queue compileall mimetools statvfs
RNG (package) compiler (package) mimetypes string
RandomArray cookielib mimify stringold
ScrolledText copy mmap stringprep
SimpleDialog copy_reg modulefinder strop
SimpleHTTPServer cracklib multiarray struct
SimpleXMLRPCServer crypt multifile subprocess
SocketServer csv mutex sunau
StringIO curses (package) netrc sunaudio
TYPES datetime new svn (package)
Tix dbhash nis symbol
Tkconstants dbm nntplib symtable
Tkdnd dbus (package) ntpath sys
Tkinter decimal nturl2path syslog
UserArray difflib numeric_version tabnanny
UserDict dircache oddjob tarfile
UserList dis opcode telnetlib
UserString distutils (package) operator tempfile
_LWPCookieJar dl optik termios
_MozillaCookieJar doctest optparse test (package)
__builtin__ dogtail (package) os textwrap
__future__ drv_libxml2 os2emxpath this
_audit dsextras ossaudiodev thread
_bisect dsml pango threading
_bsddb dumbdbm pangocairo time
_codecs dummy_thread parser timeit
_codecs_cn dummy_threading pdb timing
_codecs_hk elementtree (package) pickle tkColorChooser
_codecs_iso2022 email (package) pickletools tkCommonDialog
_codecs_jp encodings (package) pipes tkFileDialog
_codecs_kr errno pkgutil tkFont
_codecs_tw exceptions platform tkMessageBox
_csv fcntl popen2 tkSimpleDialog
_curses filecmp poplib toaiff
_curses_panel fileinput posix token
_gamin fnmatch posixfile tokenize
_heapq formatter posixpath trace
_hotshot fpformat pprint traceback
_kudzu ftplib profile tty
_ldap gamin pstats turtle
_locale gc pty types
_multibytecodec gconf pwd tzparse
_numpy gdbm py_compile umath
_random getopt pyclbr unicodedata
_semanage getpass pydoc unittest
_snack gettext pyexpat urlgrabber (package)
_socket glob pygtk urllib
_sqlite gnome (package) pynche (package) urllib2
_sqlitecache gnomevfs (package) quopri urlparse
_sre gobject (package) random user
_ssl gopherlib ranlib uu
_strptime grp re warnings
_symtable gtk (package) readline wave
_testcapi gtkunixprint reconvert weakref
_threading_local gzip regex webbrowser
_tkinter heapq regex_syntax whichdb
_weakref hmac regsub whrandom
acutil hotshot (package) repr xdrlib
aifc htmlentitydefs resource xml (package)
anydbm htmllib rexec xmllib
array httplib rfc822 xmlrpclib
arrayfns idlelib (package) rgbimg xxsubtype
asynchat ihooks rhpl (package) yum (package)
asyncore imageop rlcompleter zipfile
atexit imaplib robotparser zipimport
atk imghdr rpm (package) zlib
atspi imp rpmUtils (package)
audiodev imputil sched 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:06:52.753

我已经要求我的托管服务提供商安装最新的 LibreOffice，结果一切正常！

我正在使用以下代码：

```
exec("/opt/libreoffice4.0/program/soffice.bin  --headless --convert-to pdf --outdir ".$path."  ".$filename.".".$extension, $output, $return_var); 
```

我正在使用 Uploadify 上传要转换的文档，然后将文件返回给客户端进行下载。

希望这个问题/答案可以帮助世界上像我一样遇到 OpenOffice 问题的其他人。

# iphone - 我正在通过此代码捕获图像，并且我还必须录制视频该怎么做？

> ID：15830694
> 
> 赞同：2
> 
> 时间：2013-04-05T09:44:57.737
> 
> 标签：iphone, objective-c, ipad, cocoa-touch

**我正在通过此代码捕获图像，但我还必须在单击按钮时录制视频并保存，所以请告诉我该怎么办？实际上我没有得到，因为我已成功捕获图像并将其保存到我的相册但现在我还必须录制视频并存储它所以请任何人给我更好的主意**

```
 - (void)viewDidLoad
   {
   front=NO;
   self.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
barPicker.value = hue;
    pickerArr=[[NSArray   alloc]initWithObjects:@"01",@"02",@"03",@"04",@"05",@"06",@"07",@"08",@"09",@"10", nil];
   flashlightOn=YES;
  [flashButton setImage:[UIImage imageNamed:@"off.png"] forState:UIControlStateNormal];
  [camraButton setImage:[UIImage imageNamed:@"camra.png"] forState:UIControlStateNormal];
session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetMedium;
CALayer *viewLayer = self.vImagePreview.layer;
AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.frame = self.vImagePreview.bounds;
 [self.vImagePreview.layer addSublayer:captureVideoPreviewLayer];
[self.vImagePreview addSubview:flashButton];
[self.vImagePreview addSubview:camraButton];
AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
 NSError *error = nil;
input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys:  AVVideoCodecJPEG, AVVideoCodecKey, nil];
 if (!input) {
    // Handle the error appropriately.
    NSLog(@"ERROR: trying to open camera: %@", error);
}
else
{
    [session addInput:input];
    [stillImageOutput setOutputSettings:outputSettings];
    [session addOutput:stillImageOutput];

}
[session startRunning];
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
}
    -(IBAction) captureNow
 {

if (!front)
{
    if (flashlightOn) {
        AVCaptureDevice *device1 = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
        if ([device1 hasTorch] && [device1 hasFlash])
        {
            [device1 lockForConfiguration:nil];
            [device1 setTorchMode:AVCaptureTorchModeOn];
            [device1 setFlashMode:AVCaptureFlashModeOn];
            [device1 unlockForConfiguration];
        }
    }
}

AVCaptureConnection *videoConnection = nil;

for (AVCaptureConnection *connection in stillImageOutput. connections) {
    for (AVCaptureInputPort *port in [connection inputPorts]) {
        if ([[port mediaType] isEqual:AVMediaTypeVideo]) {
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection) {
        break;
    }
}

NSLog(@"about to request a capture from: %@", stillImageOutput);
[stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection                                completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error)

 {
     CFDictionaryRef exifAttachments = CMGetAttachment(imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
     if (exifAttachments) {

     }
     else {
     }
     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];

     image.image = [[UIImage alloc] initWithData:imageData];

    }];

  } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T10:46:59.067

抱歉，我无法编辑您的代码，但我提供了一些可以帮助您完成任务的链接。

[http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)

[http://www.techotopia.com/index.php/An_Example_iOS_6_iPhone_Camera_Application](http://www.techotopia.com/index.php/An_Example_iOS_6_iPhone_Camera_Application)

只需查看这些链接..

享受..

# android - 如何从源代码中删除 android 广告 (admob)

> ID：15830703
> 
> 赞同：-5
> 
> 时间：2013-04-05T09:45:19.043
> 
> 标签：android, admob, ads

我正在尝试将开源 android 应用程序改编为我自己的项目，我需要删除 android 广告。我试图删除它们，但我不知道如何删除，而且我总是在这里和那里遇到错误。有什么简单的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:28:03.783

尝试一下....

```
http://stackoverflow.com/questions/4549401/correctly-disable-admob-ads
http://stackoverflow.com/questions/13323097/in-app-purchase-remove-ads 
```

请检查上面的链接，它会帮助你。

从您的应用程序中删除以下代码

```
AdView adView = (AdView) this.findViewById(R.id.adView);
adView.loadAd(new AdRequest());

<xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
   android:id="@+id/adView"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   ads:adSize="BANNER"
   ads:adUnitId="a1513ffd4f3e17c" /> 
```

# java - 通过 Squash TM 向 mantis 报告错误

> ID：15830705
> 
> 赞同：0
> 
> 时间：2013-04-05T09:45:28.520
> 
> 标签：java, php, mantis, squash

我在管理部分配置了我的错误跟踪器（螳螂）。现在，我想通过 squashTM 向这个 bugtracker 添加一个 bug。但我收到这样的错误：

[http://img854.imageshack.us/img854/2739/20130313092653.png](http://img854.imageshack.us/img854/2739/20130313092653.png)

我应该怎么办？当我尝试使用不同的错误跟踪器（本地主机上的螳螂，而不是公司服务器上）时，我得到了同样的错误。我想这个原因在 mantis core/e_mail_api.php 文件中，但不知道我在这个文件中改变了什么。有任何想法吗？谢谢你的支持。

# ruby-on-rails - 在 Rails 上使用 Streamio FFMPEG 的正确路径视频是什么

> ID：15830707
> 
> 赞同：3
> 
> 时间：2013-04-05T09:45:33.317
> 
> 标签：ruby-on-rails, ffmpeg, gem

我按照这个 gem [https://github.com/streamio/streamio-ffmpeg](https://github.com/streamio/streamio-ffmpeg)，然后我这样做：

```
movie = FFMPEG::Movie.new("#{Rails.root}/public/aaa.mov") 
```

但结果是：

```
Errno::ENOENT: No such file or directory - ffmpeg -i /home/user/projects/test/public/aaa.mov 
```

有人知道吗 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:15:55.910

此 gem 假定`ffmpeg`在您的`PATH`. 如果它不在您的 中`PATH`，您需要指定`ffmpeg`二进制文件的路径。

```
FFMPEG.ffmpeg_binary = '/usr/local/bin/ffmpeg' 
```

如果您没有`ffmpeg`安装，则需要安装它。

[下载页面](http://www.ffmpeg.org/download.html)

# git - Git分支分歧

> ID：15830709
> 
> 赞同：5
> 
> 时间：2013-04-05T09:45:37.320
> 
> 标签：git, git-branch, git-merge

我是 GIT 的新手，虽然我了解它的概念，但我认为我也不了解它的实践。

我得到了一个分支，`uitest`可以继续工作，因为我可能没有正确完成推送、提交、拉取，我现在已经分叉了这个分支。

因为我是新来的，所以我也不想覆盖其他开发人员代码，因为我的代码或更改只是为了习惯 git 及其工作原理而进行的实验性我不介意丢弃我的更改，因为我拥有所有内容的副本我需要重新做所有事情。

```
$ git status
# On branch uitest
# Your branch and 'origin/uitest' have diverged,
# and have 47 and 6 different commits each, respectively.
#
nothing to commit (working directory clean) 
```

我将如何消除分歧？丢弃我的更改并从最新更改中提取最新更改，然后继续工作而不会弄乱其他人的工作。

另外，由于我是新手，请对您的答案进行一些描述，因为这对我来说可能没有多大意义。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T10:07:39.000

有几种方法。

### 合并

首先，您可以简单地 merge `origin/uitest`，但这并没有留下干净的历史记录，因为它引入了看起来像分支的内容，并且即使它一直是同一个分支，也可以合并。我相信 Linus 喜欢将这种合并提交称为“毫无意义”。不幸的是，这也是最简单的方法。

### 变基

变基往往是一个更高级的主题，如果您不小心，可能会引入大量其他问题。也就是说，这也是在没有毫无意义的提交的情况下获得干净历史记录的好方法。在这种情况下，您可以这样做：

```
git rebase origin/uitest 
```

来自您的 uitest 分支，它将占用您所做的所有工作，并将其放在 origin/uitest 中的工作之上。

不过有几个问题。首先，如果您已将任何其他分支合并到您的分支中，`git rebase`将删除它们。您需要传递`-p`标志以保留您引入的任何合并提交，但这也不总是正确的做法。如果您所做的只是提交自己的更改，那么您应该可以接受我给出的命令。

其次，任何时候你使用变基，你都应该记住永远不要变基公共提交。Rebase 将更改提交 ID，因为父母已更改。如果人们正在合并您的工作，并且您对其进行了变基，那么他们最终会在历史记录中获得您的提交的多个副本——这很糟糕。因此，在应用此技术时要小心。

说了这么多，你想交`git rebase`你的朋友。这是一个强大而有用的工具，但与任何电动工具一样，它可能很危险。

### 放弃你的工作

如果你只是想放弃你所做的，你可以运行：

```
git reset --hard @{u} 
```

或者

```
git reset --hard origin/uitest 
```

这将重置您的 uitest 分支以匹配上游或`origin/uitest`. 它会丢弃你的提交。

就个人而言，我会重新调整这项工作，或者至少试一试。如果它失败，或者由于合并冲突而变得复杂，您总是可以使用 中止`git rebase --abort`，然后退回到合并或丢弃您的更改（尽管合并可能会向您显示相同的合并冲突）。

# scheme - 如何在 Scheme 中进行模式匹配？

> ID：15830712
> 
> 赞同：5
> 
> 时间：2013-04-05T09:45:44.060
> 
> 标签：scheme, pattern-matching, racket

有谁知道如何在 Scheme 中使用这两个 (?x lives-in ?city) (john living-in new-york) 进行模式匹配？

我试过使用匹配定义，但没有成功。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T14:11:54.830

I guess you meant *pattern* matching. For the general solution to this problem, think about implementing the [Unification Algorithm](https://en.wikipedia.org/wiki/Unification_%28computer_science%29#Unification_in_logic_programming), there's a complete working solution described in [SICP](https://mitpress.mit.edu/sicp/full-text/book/book-Z-H-29.html#%_sec_4.4). Alternatively, consider embedding [miniKANREN](http://kanren.sourceforge.net/#mini) in your code, it's a simple logic programming system that works with Scheme.

Now, for a simpler match you can use Racket's [Pattern Matching](http://docs.racket-lang.org/reference/match.html) abilities. For the example in the question:

```
(define expression '(john lives-in new-york))

(match expression
  [(list ?x 'lives-in ?city) (list ?x ?city)]
  [_ #f])

=> '(john new-york) 
```

The above will match a given expression against the `(?x lives-in ?city)` pattern, returning a list with the matched values for `?x` and `?city`, or `#f` if no match was found.

# c# - 尝试在 asp.net 中删除文件时出错

> ID：15830715
> 
> 赞同：2
> 
> 时间：2013-04-05T09:45:50.373
> 
> 标签：c#, asp.net, visual-studio-2008, itextsharp

我在文字中有一个 html 数据，我使用 .`scan.pdf`从该 html 中创建了一个 pdf 文件`iTextsharp`。但是当我尝试使用 File.Delete() 方法删除创建的 pdf 文件时，它显示如下错误

D:\Hosting\filepath\scan.pdf' 因为它正被另一个进程使用

我该如何解决？

这是从html创建pdf文件并将其作为附件发送到某个mailid的代码

```
 string MailFormat = searchDt.Rows[0][1].ToString();
            EmalBody.Append(MailFormat);
            EmalBody.Replace("[Date]", DateTime.Today.ToString());
            string emailbody = EmalBody.ToString();
            message.Body = EmalBody.ToString();
            ***HTMLToPdf(emailbody, "scan.pdf");***
            System.Net.Mail.Attachment attachment;
            attachment = new System.Net.Mail.Attachment(Server.MapPath("scan.pdf"));
            message.Attachments.Add(attachment);
            message.IsBodyHtml = true;
            message.Subject = "";
            smtpClient.Send(message);
            File.Delete("D://filepath//scan.pdf");

   public void HTMLToPdf(string HTML, string FilePath)
   {
   Document document = new Document();
   PdfWriter.GetInstance(document, new FileStream("D:\\filepath\\scan.pdf",FileMode.Create));
    document.Open();

    iTextSharp.text.html.simpleparser.StyleSheet styles = new iTextSharp.text.html.simpleparser.StyleSheet();
    iTextSharp.text.html.simpleparser.HTMLWorker hw = new iTextSharp.text.html.simpleparser.HTMLWorker(document);
    hw.Parse(new StringReader(HTML));
    document.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:52:03.693

生成 PDF 文件后，您可能不会释放资源。通常通过在相应对象上调用“关闭”和/或“处置”方法来完成。

如果对象实现了`IDisposable`，您可以只使用`using`构造。这样，一旦执行通过`using`块，资源就会被释放（这也保证了即使`using`块内有异常也会释放资源）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:52:49.943

在 Textsharp 中保存文件后，您仍然可以使用该文件，因为您还没有`cleaned`处理该文件的所有句柄。您的编写器可能不在 using 块中，通过检查它们是否是一次性的来查看应该处理哪些其他类。如果找到它们，请确保将它们丢弃，以便释放所有手柄。

一些示例代码：

```
using (FileStream stream = new FileStream(temp_filename, FileMode.Create))
{
    iTextSharp.text.Document document = new iTextSharp.text.Document();
    PdfWriter writer = PdfWriter.GetInstance(document, stream);
    ...
}

//    Do the delete after using block 
```

删除必须在您的 using 块之外。如果您仍然有错误，请检查您使用文件的代码（将其发送到客户端等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:16:35.660

实际上我忘了释放邮件附件对象，这就是我收到错误的原因。当我输入此代码`attachment.Dispose();`时，错误被清除了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:58:17.983

我以前从未使用过这个 Textsharp 库，但我猜你可以通过在 using 块中创建文件来解决这个问题：

```
using(PdfWriter MyWriter=PdfWriter.GetInstance(Document,Stream))
{
...
} 
```

或者简单地调用 .dispose() ：

```
MyWriter.Dispose() 
```

如果您可以显示您的代码，这将有助于调试问题的确切位置。

# r - 在 R 中使用 ksvm 的大型支持向量机的概率模型无效

> ID：15830718
> 
> 赞同：1
> 
> 时间：2013-04-05T09:46:01.097
> 
> 标签：r, kernlab

我使用 R 中的 kernlab 包中的函数训练支持向量机`ksvm`，对大量的观察结果（300k）进行训练，但特征不是很多（1-8）。我想使用生成的概率模型，但是对于大型数据集，生成的概率模型具有意外的格式。

这是应该发生的：

```
n <- 1000
df <- data.frame(label=c(rep("x",n),rep("y",n)),value=c(runif(n),runif(n)+2))
m <- ksvm(label~value,df,prob.model=TRUE)

> prob.model(m)
[[1]]
[[1]]$A
[1] -6.836228

[[1]]$B
[1] 0.003163229 
```

但是，对于较大的值`n`（例如 100k；请注意高内存使用率和长执行时间），值`prob.model(m)[[1]]`是长度的数值向量`2n`，似乎是 中每个观察的可能性`df`。什么可能导致这种情况？

会话信息：

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] graphics  grDevices datasets  utils     stats     methods   base

other attached packages:
[1] kernlab_0.9-16   e1071_1.6-1      class_7.3-5      data.table_1.8.8

loaded via a namespace (and not attached):
[1] tools_2.15.2 
```

**编辑：**这是我正在谈论的分类任务，`df`具有以下形式：

```
label value
"x"    0.21
...
"x"   -1.20
"y"    2.42
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:32:37.057

问题的根源由以下错误消息指示：

```
line search fails 
```

一个更具体的问题，包括我使用的原始数据框，在这里：[Line search failed in training ksvm prob.model](https://stackoverflow.com/questions/15895897)。

# java - Jfreechart 中的 if 和 else if 语句中的形状没有改变

> ID：15830723
> 
> 赞同：0
> 
> 时间：2013-04-05T09:46:17.143
> 
> 标签：java, jfreechart

在单个系列中，即在时间序列图中，必须获得不同的形状。但它不会来......请参考以下代码并告诉我我犯了什么错误？

```
 TimeSeriesCollection dataset = new TimeSeriesCollection(glucoseries);                                                
      JFreeChart chart = ChartFactory.createTimeSeriesChart("Glucometer","Date","value",dataset,true,true,false);                           

     XYPlot xyplot = (XYPlot)chart.getPlot();
     XYLineAndShapeRenderer  renderer = (XYLineAndShapeRenderer) xyplot.getRenderer(); 

    int glucovalue = Integer.parseInt(glcvalue);

    if(glucovalue<80)
    {     
    renderer.setSeriesShape(0,new Ellipse2D.Double(-3.0,-3.0,8.0,8.0));
    renderer.setSeriesShapesVisible(0,true);
     }
    else if(glucovalue>80 && glucovalue<100)
    {               
    renderer.setSeriesShape(0,ShapeUtilities.createUpTriangle(4.0f));
    renderer.setSeriesShapesVisible(0,true);            
    }
    else if(glucovalue>100 && glucovalue< 120)
    {                   
    renderer.setSeriesShape(0,ShapeUtilities.createDiamond(4.0f));
    renderer.setSeriesShapesVisible(0,true);                    
    }
    else
    {
    renderer.setSeriesShape(0,ShapeUtilities.createDownTriangle(4.0f));
    renderer.setSeriesShapesVisible(0,true);                    
    }

     ChartRenderingInfo info = new ChartRenderingInfo(new StandardEntityCollection());
    File file1 = new File(request.getRealPath("\\jspchart\\gluco7.png"));
    ChartUtilities.saveChartAsPNG(file1, chart, 700, 400, info); 
```

![在此处输入图像描述](https://i.stack.imgur.com/WX9GG.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:47:24.243

IF 语句中的逻辑只评估一次，您需要子类`XYLineAndShapeRenderer#getItemShape`化以根据当前值返回形状。像这样的东西

```
 XYLineAndShapeRenderer renderer =  new XYLineAndShapeRenderer(true, true){
        Shape ellipse = new Ellipse2D.Double(-3.0,-3.0,8.0,8.0);
        Shape upTriangle = ShapeUtilities.createUpTriangle(4.0f);
        Shape diamond = ShapeUtilities.createDiamond(4.0f);
        Shape downTriangle = ShapeUtilities.createDownTriangle(4.0f);

        @Override
        public Shape getItemShape(int row, int column) {
            Double value = (Double) plot.getDataset(0).getY(row, column);
            if (value > 6.0 ) {
                return ellipse;
            } else if (value >= 5.0 ) {
                return upTriangle;
            } else if (value >= 2.0 ) {
                return diamond;
            }else {
                return downTriangle;
            }
        }

    };

  plot.setRenderer(renderer); 
```

![在此处输入图像描述](https://i.stack.imgur.com/boOc9.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:51:40.800

我无法弄清楚 :**葡萄糖值的价值是什么**

但是您在这里错过的一件事是：您没有正确考虑边界值。

例如：

```
 if(glucovalue<80)
{     
renderer.setSeriesShape(0,new Ellipse2D.Double(-3.0,-3.0,8.0,8.0));
renderer.setSeriesShapesVisible(0,true);
 }
else if(glucovalue>80 && glucovalue<100)
{ 
```

在上面的代码中，如果`glucovalue = 80`

更改代码如下：

```
 if(glucovalue<80)
{     
renderer.setSeriesShape(0,new Ellipse2D.Double(-3.0,-3.0,8.0,8.0));
renderer.setSeriesShapesVisible(0,true);
 }
else if(glucovalue>=80 && glucovalue<=100)
{ 
```

# php - HTTP_REFERER 问题：只有当访问者事先访问过另一个特定页面时，我才能允许访问特定页面？

> ID：15830724
> 
> 赞同：1
> 
> 时间：2013-04-05T09:46:21.097
> 
> 标签：php, download

PHP 新手在这里，疯狂地挣扎着想知道如何在我可悲的无能下载系统中实现基于 HTTP_REFERER 的安全功能。

基本上，我的文件下载页面在 URL 的末尾附加了一个特定的字符串，这个特定的字符串是：

```
?thanks 
```

如果这在 URL 中可见，则用户将能够下载位于其上的文件。它工作得很好，但很容易通过简单地将“？谢谢”部分添加到 URL 本身来“解锁”页面。有效地允许用户绕过我笨拙的安全性并轻松访问我的高级文件。

如果可能的话，我想添加一个安全措施，让任何试图访问包含字符串“？谢谢”的页面的人都被重定向到主页。这将为我提供完美的解决方案。

为清楚起见，典型的预下载过程如下所示：

*   用户访问下载页面：[网站]/download/page/123/
*   用户完成 Recaptcha，被重定向到这里：[website]/download/page/123/?pending
*   用户填写详细信息，被重定向到这里：[website]/download/page/123/?thanks
*   用户收到他们的文件

啰嗦，是的，但对于我不寻常的要求来说，这将是非常理想的。我也知道用户可以通过首先在 URL 中附加“？pending”然后附加“？thanks”来解决这个问题，但它仍然非常非常有用。

那么，StackOverflow，你们中的任何一个干瘪而善良的编码人员可以帮助一个初出茅庐的网页设计师吗？我感谢您的任何帮助。干杯，伙计们。

编辑：哦，这是最后一次尝试但遭到可怕轰炸的一种失败方法，以防万一它有助于进一步说明我的目标：

```
if (('http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'] == wp_get_shortlink().'?thanks') && (isset($_SERVER['HTTP_REFERER']) && preg_match("/".preg_quote('?pending',"/")."/i",$_SERVER['HTTP_REFERER']))) {
    echo 'Hurrah!';
} else {
    echo 'Oh dear.';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:00:13.003

如果这一切都取决于*请求本身中的信息*，则无法强制执行您要执行的操作。引用者也只是一个任意*请求标头*。

您需要的是实际的*服务器端状态*。为用户打开一个会话，为他正在经历的进程提供一些随机的唯一 id，该 id 在进程中的每个页面上携带，并保存进度和接下来在会话中显示的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:03:30.737

没有像“基于 HTTP_REFERER 的安全性”这样的东西。那是矛盾的。

一般来说，为了安全起见，您必须使用 SESSION。在您的特定情况下，它似乎也是最合适的：只需在会话中存储访问过任何页面的事实，然后在其他任何页面上检查该值

# android - 安卓.XML。大型广播组都不适合屏幕

> ID：15830726
> 
> 赞同：0
> 
> 时间：2013-04-05T09:46:31.793
> 
> 标签：android, xml, size, screen

我已经设置了横向，我的应用程序的最后一个按钮（第八个）不适合我的三星 mini S3 的 4 英寸屏幕。它适合模拟器上更大的屏幕尺寸。我尝试将父级设置为固定尺寸，收音机在实际设备上，按钮似乎更加分散。有什么想法吗？

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#111111"
android:gravity="left"
tools:context=".MainActivity" >

<RadioGroup
    android:id="@+id/RadioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:orientation="vertical" >

    <RadioButton
        android:id="@+id/RadioButtonlowC1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_marginTop="0dp"
        android:button="@drawable/my_radio"
        android:checked="false" />

    <RadioButton
        android:id="@+id/RadioButtonD1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:button="@drawable/my_radio" />

    <RadioButton
        android:id="@+id/RadioButtonE1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:button="@drawable/my_radio" />

    <RadioButton
        android:id="@+id/RadioButtonF1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:button="@drawable/my_radio" />

    <RadioButton
        android:id="@+id/RadioButtonG1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:button="@drawable/my_radio" />

    <RadioButton
        android:id="@+id/RadioButtonA1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:button="@drawable/my_radio" />

    <RadioButton
        android:id="@+id/RadioButtonB1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:button="@drawable/my_radio" />

    <RadioButton
        android:id="@+id/RadioButtonC1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:button="@drawable/my_radio" />
</RadioGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:53:25.767

用滚动视图包裹相对布局

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

         <RelativeLayout 
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:background="#111111"
           android:gravity="left" >

           <!-- your stuff -->

           </RelativeLayout>

</ScrollView> 
```

# database-design - 我的累积快照设计是否适合我的 DW 和我的需要

> ID：15830729
> 
> 赞同：0
> 
> 时间：2013-04-05T09:46:43.703
> 
> 标签：database-design, data-warehouse, snapshot

我刚刚发现了 DW 的累积快照设计。

我需要记录来自我的错误跟踪器的错误信息。错误有一些信息（错误编号、句子...）。它还具有状态：已创建、已取消、受影响、已解决

错误不必经历所有状态（它可以从创建到取消，或从创建到受影响到已解决......）

这是我的中心事实表

> FT_Bug_Track
> 
> * * *
> 
> idBug 整数
> 
> BugSentence varhchar(100)
> 
> 创建日期 DATE
> 
> 已解决日期 DATE
> 
> 受影响日期 DATE
> 
> 取消日期日期
> 
> FKStatus 整数

状态外键只是链接到一个维度，告诉我我当前处于哪个状态（创建，取消......）

（当然我还有其他维度，比如项目、客户、typeOfBug ...）

每次我的错误状态发生变化时，我都会在需要的地方放置一个新日期并将 FKStatus 更新为当前日期

我的设计是否适合 DW 和我的系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:43:13.547

我不知道这是否适合您的情况，这取决于您的要求，即您需要能够在报告中显示什么。因此，如果您不清楚数据将如何被使用以及用户期望从中找到什么，您应该在做出任何重大设计决策之前先这样做。

话虽如此，如果某件事经历了（相对）定义明确、稳定的一系列步骤，比如制造过程或贷款批准，那么累积快照效果最好。不幸的是，bug 跟踪器很少出现这种情况：票证可以重新分配给其他人，而不会改变他们的状态；它们可以重新打开并再次完成整个解决过程；他们可以在“开发中”和“测试中”等之间来回“弹跳”。这意味着您无法提前知道在一张票的整个生命周期内需要多少个日期和状态（除非您的流程异常简单）。

我最近处理了一些帮助台报告，并提出了一个使用两个事实表的解决方案。第一个每张工单有一行，仅显示当前状态（新、已分配、已关闭等），仅带有“创建”和“最后修改”的时间戳。第二个事实表每次修改工单都有一行，因此您可以深入了解工单的详细历史记录。此处值得注意的是，对工单的许多常见更改实际上并不会更改状态（例如添加评论），因此您需要确定您的情况是什么“修改”：任何更改，还是仅更改状态？

ETL 流程计算并维护第一个事实表上的工单级别 KPI，例如工单已经（或曾经）打开了多长时间，从提交工单到首次分配工单之间的时间间隔等。报告用户（例如经理）通常是对两个特定事件之间的持续时间感兴趣，并且处理重复或循环过程并不是特别容易。出于这个原因，我会尝试使用主（聚合）事实表生成大多数报告，而将第二个主要用于交互式分析，但一切都取决于您想要从数据中得到什么。

即使这不能回答你的问题，我希望它能给你一些想法。

# node.js - 加载时将 mongo 存储的日期转换回自 Unix 纪元以来的毫秒数？

> ID：15830733
> 
> 赞同：17
> 
> 时间：2013-04-05T09:47:04.360
> 
> 标签：node.js, mongodb, date, mongoose

我正在为我的网络服务器使用 Mongoose 和 Node.js。

作为我的一个文档模式的一部分，我有一个“时间戳”字段。它在模式中的行是： `timestamp: { type: Date, default: Date.now }`

这很好用，并允许我根据时间戳检索文档，但是，这会保存为 ISODate 格式，如下所述：http://docs.mongodb.org/manual/core/document/#date [，](http://docs.mongodb.org/manual/core/document/#date)如下所示：

`"timestamp":"2013-04-04T19:31:38.514Z"`

我不介意这一点，但我按原样将其发送给客户。这意味着我必须在客户端使用 Date.parse() 才能与之进行比较操作。

有没有办法将日期存储为整数，或者在检索到日期时自动将其转换为整数？

有什么理由我应该保持原样，并在客户端处理它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T13:01:34.760

您可以在架构上添加数字毫秒版本`timestamp`作为[虚拟属性：](http://mongoosejs.com/docs/guide.html#virtuals)

```
schema.virtual('timestamp_ms').get(function() {
  return this.timestamp.getTime();
}); 
```

然后，您可以通过架构上的选项启用虚拟字段包含在`toObject`模型实例的调用中：

```
var schema = new Schema({
  timestamp: Date
}, {
  toObject: { getters: true }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-01T12:13:41.007

```
var schema = new Schema({
  timestamp: {type:Number, default: new Date().getTime()}
}); 
```

希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T11:16:23.000

作为最佳实践，我会说：**保持你的数据是它应得的类型**。

无论如何，如果您的客户端需要处理数字，您可以简单地将日期以毫秒为单位传递给客户端，并且仍然可以在 Node.js 中使用 Date 对象。

只需致电`timestamp.getTime()`和 ta-da，您就可以为客户端准备好 unix 时间戳。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-05T10:41:11.860

这对我来说很好

```
db.eurusd.ticks.findOne({_id:ObjectId("518636777055000000000000")}).t.getTime() 
```

返回以毫秒为单位的时间，其中返回的文档具有结构

```
{
 "_id" : ObjectId("518636777055000000000000"),
 "t" : ISODate("2013-05-05T10:37:43Z"), // date data type
 "ask" : "Joe",
 "bid" : 33
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-19T03:33:02.933

当您将 mongoose 类型设置为 "Date" 时，mongoose 会将时间戳转换为 UTC，因为时间戳是一个数字，而不是日期。那么如果你想存储时间戳，你应该将猫鼬类型设置为“数字”。

```
myfield{
    type: Number,
    default: Date.now()
} 
```

# javascript - 通过 ajax 发送输入值而不使用 val() 函数

> ID：15830735
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:47:12.750
> 
> 标签：javascript, jquery, ajax, input

我的用例是这样的：我有几个`input`：

```
 <label class="minilabel">Field1</label><input type="text">
  ...
  <label class="minilabel">FieldN </label><input type="text"> 
```

我必须得到`value`每个`input`然后通过`AJAX`（`post`请求）发送它。通常我`ID`为每个设置一个然后我通过..`input`检索它，但它是如此复杂。有另一种获取这些值的方法吗？`$("#id1").val()``$("#idN").val()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T09:47:57.697

```
$('form').serialize(); 
```

...是你的朋友。这会将表单中的所有数据转换为您作为数据属性传入的查询字符串。

理想情况下，我会将元素包装在一个表单中（除非这些是动态创建的），因为您可以在发送 AJAX POST 请求时引用“action”属性，并且该页面也保持 HTML4/5 兼容。像这样的东西：

```
var $form = $('form');
$.ajax({
    "type": "POST",
    "url": $form.attr('action'),
    "data": $form.serialize(),
    "success": function (r) {

    }
}); 
```

另一方面，您还可以使用以下简单的方法序列化收集的输入元素的 jQuery 对象：

```
$(":input").serialize(); 
```

（感谢 Dziamid 提供此信息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:54:23.323

您正在搜索[.serialize()](http://api.jquery.com/serialize/)

在服务器端

```
$params = array();
parse_str($_GET, $params); 
```

$params 应该是一个数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:19:38.803

如果你决定使用 jQuery .each() 你可以这样做：

```
var value = '';
$('input[type=text]').each(function() {
  // get input value
  value = $(this).val();    

  // do whatever you need with the value
  // save in array to send later to server for example
  // ...
}); 
```

# selenium - selenium IDE 出现问题，“[error] testCase.debugContext.currentCommand() 未定义”

> ID：15830736
> 
> 赞同：1
> 
> 时间：2013-04-05T09:47:14.317
> 
> 标签：selenium, ide, selenium-ide, user-extensions.js

我在一个没有改变的脚本中看到这个错误 - 但 Selenium 版本有。该错误发生在成功执行 10 次以上的 EndWhile 循环中。我面临这个错误。

```
[error] testCase.debugContext.currentCommand() is undefined
[error] Unexpected Exception: fileName -> chrome://selenium-ide/content/selenium-runner.js, lineNumber -> 157 
```

收到这些错误后，Selenium 挂起，我必须关闭并重新打开。

有没有办法解决这个错误？或以任何方式使此错误不再面临。请帮忙。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-31T08:35:31.637

这在 Firefox 36.0.4 和没有任何插件的 vanilla Selenium IDE 中不断发生。

您可能需要下载与当前 Selenium 版本兼容的早期版本的 Firefox。

# python - 使用子进程在 python 脚本中停止和启动服务器

> ID：15830737
> 
> 赞同：1
> 
> 时间：2013-04-05T09:47:21.940
> 
> 标签：python, subprocess

从我的 python 脚本中，我需要多次停止和启动 Weblogic 服务器。

如果我们需要在 linux 中手动执行（停止或启动服务器）

我去 mwhome+"/user_projects/domains/bifoundation_domain/bin 并执行命令

```
./stopWeblogic.sh 
```

并且要在终端中启动服务器，我执行命令

```
./startWeblogic.sh 
```

我需要在我的 python 代码中复制它。

```
wlserverstop=mwhome+"/user_projects/domains/bifoundation_domain/bin/stopWebLogic.sh"
output3 = subprocess.call([ wlserverstop ])

#starting weblogic server
wlserver=mwhome+"/user_projects/domains/bifoundation_domain/bin/startWebLogic.sh"
output4 = subprocess.Popen([ wlserver],stderr=STDOUT, stdout=PIPE)
time.sleep(200) 
```

1) 由于 stopWeblogic 服务器将终止并返回，我使用了 subprocess.call() 2) 由于 startWeblogic 服务器不会终止并且需要在后台运行进程，所以我使用了 subprocess.Popen()

但问题是服务器的停止和启动没有正确发生。有时它不会启动，有时即使服务器在我立即发出 stopserver 命令时启动，它也会永远运行。

有更好的方法吗？谢谢

# ibm-connections - IBM Social Business Toolkit SDK 开发环境设置 - 服务库 GET 请求时出错

> ID：15830742
> 
> 赞同：0
> 
> 时间：2013-04-05T09:47:27.897
> 
> 标签：ibm-connections, ibm-sbt

[我已经按照以下IBM Social Business Toolkit SDK Development Environment Setup Youtube 视频](http://youtu.be/Cx4x1gkIPWE)中的描述设置了 Java EE Eclipse ，我在[IBM SBTSDK 的 OpenNTF.org 页面](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Social%20Business%20Toolkit%20SDK)上找到了该视频。IBM Social Business Toolkit SDK 开发环境设置

当我启动 Tomcat 并打开 sbt.sample.web 并调用其中一个示例时，我在 Tomcat 日志中收到以下错误（见下文）。

我使用以下版本的 SBTSDK sbtsdk-1.0.0.20130228-2321。

以下项目在我的工作区中也有错误，无法构建描述资源路径位置类型项目“com.ibm.sbt.bootstrap211”缺少所需的源文件夹：“src”com.ibm.sbt.bootstrap211 构建路径构建路径问题

任何想法出了什么问题？

```
 INFO: Server startup in 2190 ms
05.04.2013 11:30:55 com.ibm.sbt.jslibrary.servlet.LibraryServlet doGet
WARNUNG: Error servicing library GET request
java.lang.NoClassDefFoundError: org/apache/http/HttpRequestInterceptor
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at com.ibm.commons.runtime.beans.AbstractBeanFactory$Factory.create(AbstractBeanFactory.java:65)
    at com.ibm.commons.runtime.impl.AbstractContext.getBean(AbstractContext.java:142)
    at com.ibm.sbt.services.endpoints.EndpointFactory.getEndpointUnchecked(EndpointFactory.java:87)
    at com.ibm.sbt.services.endpoints.EndpointFactory.getEndpointUnchecked(EndpointFactory.java:68)
    at com.ibm.sbt.jslibrary.servlet.AbstractLibrary.populateEndpoints(AbstractLibrary.java:237)
    at com.ibm.sbt.jslibrary.servlet.AbstractLibrary.doGet(AbstractLibrary.java:168)
    at com.ibm.sbt.jslibrary.servlet.LibraryServlet.doGet(LibraryServlet.java:170)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at com.ibm.commons.runtime.servlet.BaseToolkitServlet.service(BaseToolkitServlet.java:100)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ibm.sbt.util.SBTFilter.doFilter(SBTFilter.java:53)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.apache.http.HttpRequestInterceptor
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 34 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:14:25.717

对于项目 'com.ibm.sbt.bootstrap211' 缺少所需的源文件夹：

右键单击 bootstrap211 项目 > 属性 > Java 构建路径 > 单击源选项卡 > 取消选中“/src”（如果已选择）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:28:37.697

从您得到的异常 ( `java.lang.ClassNotFoundException: org.apache.http.HttpRequestInterceptor`) 看来，您需要将`httpcore`jar 库包含到您的 Tomcat 中。

# uiimageview - [iOS]从相册中选择图片

> ID：15830746
> 
> 赞同：1
> 
> 时间：2013-04-05T09:47:33.160
> 
> 标签：uiimageview, gallery, photo

我知道如何打开照片库，现在我想选择其中一张图片并将其放在 UIImageView 上，有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:36:34.843

你有没有提到照片库是什么意思？

下面一个是从照片库访问图像的代码

```
-(void)photoLibraryAction
{
    NSLog(@"image");
    if(picker!=nil){
        [picker dismissModalViewControllerAnimated:YES];
        [test dismissPopoverAnimated:YES];
        picker.delegate=nil;
        picker=nil;
        test.delegate=nil;
        test=nil;
    }
    picker= [[UIImagePickerController alloc] init];
    picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    picker.delegate=(id)self;

    NSLog(@"%@",picker);
    if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPhone)
    {
        [self  presentModalViewController:picker animated:YES];
    }
    // [self pre
    else if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
    {
        UIPopoverController *popImageLibrary=[[UIPopoverController alloc]initWithContentViewController:picker];
        test=popImageLibrary;
        test.delegate=(id)self;

        [test presentPopoverFromRect:CGRectMake(240, 730, 400, 0) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
    }

} 
```

并为图像选择器设置委托

```
picker.delegate=(id)self; 
```

然后使用委托方法

```
- (void)imagePickerController:(UIImagePickerController *)albumPicker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
     if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPhone || albumPicker.sourceType==UIImagePickerControllerSourceTypeCamera)
        {
            self.imageData=[info objectForKey:@"UIImagePickerControllerOriginalImage"];
                [albumPicker dismissModalViewControllerAnimated:YES];
         }
        else
        {
            yourImageView.image=[info objectForKey:@"UIImagePickerControllerOriginalImage"];
            [test dismissPopoverAnimated:YES];            

         }

} 
```

# unit-testing - 谷歌测试可以在windows上处理多线程测试输出吗

> ID：15830748
> 
> 赞同：0
> 
> 时间：2013-04-05T09:47:37.763
> 
> 标签：unit-testing, googletest, boost-unit-test-framework

我刚刚遇到了在多个线程的输出不是原子的 Windows 上运行的[boost 单元](http://www.boost.org/doc/libs/release/libs/test/doc/html/utf.html)的问题，因此如果我将任何测试或消息放在主线程以外的任何线程中，它会破坏输出 XML，这会混淆 CI 系统。

我看不到任何[增强单元选项](http://www.boost.org/doc/libs/release/libs/test/doc/html/utf/user-guide/runtime-config/reference.html)来控制它，所以我想知道这是否是[谷歌测试](https://code.google.com/p/googletest/)可以做的事情，这是否值得切换到谷歌测试（搜索维基没有找到我任何东西）。

还是我应该使用其他一些方法（在 linux 上从命令行运行测试以查看此输出时很有用。但我不希望它破坏我的 windows CI）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:51:08.227

GTest 的输出是互斥保护的，所以多线程不会产生乱码输出。

通常做这项工作的功能是[`AddTestPartResult`](http://code.google.com/p/googletest/source/browse/trunk/src/gtest.cc?r=649#3699). 在第 3713 行，您可以看到正在应用的锁：

```
internal::MutexLock lock(&mutex_); 
```

然后在 3732 处将结果打印在此调用中：

```
impl_->GetTestPartResultReporterForCurrentThread()->ReportTestPartResult(result); 
```

# ruby-on-rails - 仅在特定控制器操作上加载帮助程序

> ID：15830749
> 
> 赞同：1
> 
> 时间：2013-04-05T09:47:39.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 Rails 3 应用程序中，我有一个包含我自己的助手的模块，它覆盖了几个内置的 rails 助手：

```
module MyHelpers
  def form_for(*args)
     ...
  end

  def link_to(*args)
     ...
  end
end 
```

上述模块位于 lib 文件夹中。

我希望这些助手仅用于特定的控制器操作。我的第一次尝试是这样的：

```
require "my_helpers"
class MyController < ApplicationController 

  before_filter :add_helpers

  def add_helpers
    if some_condition
      ApplicationHelper.send(:include, MyHelpers)
    end
  end
  ..
end 
```

Module.send(:include, ModuleB) 是在另一个模块中包含模块的有效方法，但在这种情况下它不能满足我的需要：我的模块中的方法在视图中不可用。在运行任何控制器方法之前，Rails 似乎已经确定了视图可以使用哪些辅助方法。

有没有办法做我需要的？

我知道我可以全局覆盖 form_for 方法，但我不想这样做。

我认为这个问题的答案将来自于理解 rails 如何使视图可以访问辅助方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-17T08:54:43.713

config.action_controller.include_all_helpers 应设置为 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:10:20.653

由于 Rails 会自动加载并包含`app/helpers`目录中的所有帮助程序，因此您可以尝试将帮助程序放在不同的位置，例如在`lib`目录中。

这样 .rb 文件会被解析和加载，但模块不会`ApplicationHelper`自动包含在类中。然后，您可以按照您的说明在之前的过滤器中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:18:50.343

Vapire 认为将这些模块放置在`app/helpers`. 我会更进一步，并说您尝试做的事情可能不明智-在每个操作的基础上提供或不提供某些方法对我来说有点太脆弱了。

我宁愿采用在您的控制器之间放置自定义控制器超类并`ApplicationController`包含模块（或仅在您的超类中包含这些方法）的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-24T03:52:10.987

在控制器类或帮助器类上添加帮助器后，它将在请求后保持加载。您需要在操作后卸载它们。不幸的是，没有官方方法可以卸载一部分助手，您需要编写它。

```
class MyController < ApplicationController
  around_action :load_helper, only: :create

  def load_helper
    self.class.helper_method :your_helper_method
    yield
    self.class.helper { undef your_helper_method }
  end
end 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-05T10:42:58.833

答案是使用“helper”类方法，如下所示：

```
require "my_helpers"
class MyController < ApplicationController 

  before_filter :add_helpers

  def add_helpers
    if some_condition
      MyController.helper MyHelpers
    end
  end
  ..
end 
```

# css - 在理解 CSS3 动画方面需要帮助

> ID：15830751
> 
> 赞同：0
> 
> 时间：2013-04-05T05:05:55.360
> 
> 标签：css, css-animations

我正在尝试学习 CSS3 中的动画，但我坚持使用所有文档。我有这个代码：

```
h1{
        -webkit-animation: moveDown 1.s ease-in-out .6s backwards;
        -moz-animation: moveDown 1s ease-in-out 0.6s backwards;
        -o-animation: moveDown 1s ease-in-out 0.6s backwards;
        -ms-animation: moveDown 1s ease-in-out 0.6s backwards;
        animation: moveDown 1s ease-in-out 0.6s backwards;
    }
    @-webkit-keyframes moveDown{
        0% { 
            -webkit-transform: translateY(-300px); 
            opacity: 0;
        }
        100% { 
            -webkit-transform: translateY(0px);  
            opacity: 1;
        }
    }

    @-moz-keyframes moveDown{
        0% { 
            -moz-transform: translateY(-40px); 
            opacity: 0;
        }
        100% { 
            -moz-transform: translateY(0px);  
            opacity: 1;
        }
    }

    @-o-keyframes moveDown{
        0% { 
            -o-transform: translateY(-40px); 
            opacity: 0;
        }
        100% { 
            -o-transform: translateY(0px);  
            opacity: 1;
        }
    } 
```

*   我明白`webkit-animation`-`animation`是每个浏览器的调用。
*   我不明白modeDown。这像一个变量吗？
*   1s是动画的长度？
*   缓进出我不明白
*   .6s 是延迟
*   我没有倒退，也找不到任何关于它的信息

这是为了时序吗？

```
@-moz-keyframes moveDown{
    0% { 
        -moz-transform: translateY(-40px); 
        opacity: 0;
    }
    100% { 
        -moz-transform: translateY(0px);  
        opacity: 1;
    } 
```

我读过[这个](http://css3.bradshawenterprises.com/transitions/)，[这个](http://www.netmagazine.com/tutorials/masterclass-css-animations)和[这个](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)。有人介意向我解释一下吗？}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:02:28.857

**我不明白modeDown。这像一个变量吗？**

动画从and`moveDown`开始，在`opacity:0`and`-moz-transform:translateY(-40px)`结束。这意味着它从完全透明开始并在正常位置上方移动 40 像素，并在其常规位置结束并完全不透明。`opacity: 1``-moz-transform: translateY(0px)`

```
@-moz-keyframes moveDown{
    0% { 
        -moz-transform: translateY(-40px); 
        opacity: 0;
    }
    100% { 
        -moz-transform: translateY(0px);  
        opacity: 1;
    }
} 
```

**1s是动画的长度？**

是的。

**缓进出我不明白**

`ease-in-out`是一个[动画计时功能](https://developer.mozilla.org/en-US/docs/CSS/animation-timing-function)，它指定如何从 0% 过渡到 100%（或其他方式）。Ease in out 将动画的每一个进出，所以变化不会那么突然，另一个例子是线性的，它将以完全统一的方式变化。

此页面上有一个[方便的图表，](http://www.the-art-of-web.com/css/timing-function/#.UV6hY5NQHNs)可以比文字更好地解释差异。

**.6s 是延迟**

是的。

**我没有倒退，也找不到任何关于它的信息**

`backwards`并`forwards`用于[动画填充模式](https://developer.mozilla.org/en-US/docs/CSS/animation-fill-mode)，它表示动画应该去的切换方向。如果`forwards`选中则动画将从 0%（透明）运行到 100%（不透明），如果`backwards`选中则动画将从 100% 运行到 0%。

## 进一步阅读

*   [网络艺术 - 计时功能](http://www.the-art-of-web.com/css/timing-function/)
*   [CSS3 动画规范](http://www.w3.org/TR/css3-animations/)
*   [Mozilla 开发者 - 动画](https://developer.mozilla.org/en-US/docs/CSS/animation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:08:08.313

通常最好阅读 W3C 的实际[工作草案](http://www.w3.org/TR/2013/WD-css3-animations-20130219/)（或建议），因为它们提供了完整的信息：

> 我不明白modeDown。这像一个变量吗？

你可以这么说，但是*变量* 通常是可变的，而`moveDown`只是动画的标识符。所以它只是动画的名称：

> 关键帧是使用专门的 CSS 规则指定的。@keyframes 规则包含关键字“@keyframes”，后跟一个为动画命名的标识符（将使用 'animation-name' 引用），然后是一组样式规则（由大括号分隔）。[[来源]](http://www.w3.org/TR/2013/WD-css3-animations-20130219/#keyframes)

* * *

> *   1s是动画的长度？
> *   缓进出我不明白
> *   .6s 是延迟

该[`animation`](http://www.w3.org/TR/2013/WD-css3-animations-20130219/#animation-shorthand-property)属性是多个`animation-*`属性的简写：

```
<single-animation> = <single-animation-name> || <time> || <single-animation-timing-function> || <time> || <single-animation-iteration-count> || <single-animation-direction> || <single-animation-fill-mode> || <single-animation-play-state> 
```

如您所见，第一个属性是动画的名称（见上文），第二个是实际长度，第三个是计时功能，在您的情况下`ease-in-out`。这基本上是一个修改时间[的贝塞尔曲线。](http://www.w3.org/TR/2012/WD-css3-transitions-20120403/#transition-timing-function-property)例如，您想在开始和结束时加快动画的速度，并在中间具有更线性的行为。

`.6s`确实是动画之间的延迟。

> *   我没有倒退，也找不到任何关于它的信息

看看[`animation-fill-mode`](http://www.w3.org/TR/2013/WD-css3-animations-20130219/#animation-fill-mode-property)：

> 如果 'animation-fill-mode' 的值为 'backwards'，则动画将应用关键帧中定义的属性值，该关键帧将在 'animation-delay' 定义的时间段内开始动画的第一次迭代。这些是'from'关键帧的值（当'animation-direction'是'normal'或'alternate'时）或'to'关键帧的值（当'animation-direction'是'reverse'或'alternate-逆转'）。

# ios - 将新对象分配给块中的参数对象

> ID：15830752
> 
> 赞同：0
> 
> 时间：2013-04-05T09:47:41.213
> 
> 标签：ios, objective-c, block

说我有这样的块：

```
Object someObject = nil;

block = ^(Object *obj){

    if(obj == nil)
        obj = [[Object alloc] init];
};

block(someObject); //someObject is still nil
block(someObject); //it will assign again, instead of not

NSLog(@"result: %@", someObject); //still nil 
```

似乎您不能以这种方式将事物分配给块中的参数，有什么方法可以做到吗？此块作用于不同的对象，如果对象为nil，则需要对其进行赋值。在这种状态下，某些对象仅在范围内分配（因此`obj`已分配，但未分配`someObject`）。我试过使用`__block`，但我不认为这就是它的用途。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:59:05.223

您也可以采用这种方法：

```
__block Object someObject = nil;
block = ^(void)
{
  if(someObject == nil)
    someObject = [[Object alloc] init];
}
block(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:49:29.800

对于示例 - 在您的标题或其他内容中声明类似于此的 typdef：

```
typedef void (^ActionBlock)(NSArray **array); 
```

然后像这样使用它：

```
__block NSArray *array = nil;
NSLog(@"Before: %@",array);
ActionBlock block = ^(NSArray **array)
{
    if(*array == nil)
        *array = [[NSArray alloc] init];
};
block(&array);
NSLog(@"After: %@",array); 
```

输出：

```
2013-04-05 21:05:23.153 TestingSuite[62813:c07] Before: (null)

2013-04-05 21:05:23.155 TestingSuite[62813:c07] After: (
) 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:56:27.913

当涉及到参数时，块就像函数一样。您在此处所做的操作类似于 Apple 的 API 处理 NSErrors 的方式。

试试这个：

```
Object * someObject = nil;

block = ^(Object **obj){

    if(obj != nil && *obj == nil)
        *obj = [[Object alloc] init];
};

block(&someObject); //someObject is still nil
block(&someObject); //it will assign again, instead of not

NSLog(@"result: %@", someObject); 
```

# php - 使用 PHP 删除单个 cron 作业

> ID：15830758
> 
> 赞同：2
> 
> 时间：2013-04-05T09:48:16.567
> 
> 标签：php, crontab

我有一个 php 脚本，一旦将一些数据插入 SQL 数据库，它就会设置一个 cron 作业：

```
<?
$output = shell_exec('crontab -l');
file_put_contents('/tmp/crontab.txt', $output.'* * * * * /usr/local/bin/php /home/dldl1330/public_html/new/mailchimp.php'.PHP_EOL);
echo exec('crontab /tmp/crontab.txt');
?> 
```

此 cron 作业执行另一个脚本，该脚本将 SQL DB 与 mailchimp 同步。在这个 mailchimp php 脚本中，它删除了 cron 选项卡：

```
echo exec('crontab -r'); 
```

一旦发生这种情况，我会丢失我的 cron 选项卡中的所有作业（并且它会删除在每个 cron 作业之后通过电子邮件发送的电子邮件），我怎样才能做到这一点，以便上面的行只删除`/home/dldl1330/public_html/new/mailchimp.php`cron 作业？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T11:34:21.410

我使用了上述建议并提出了一个解决方案，我不确定它的效率或正确性....欢迎发表评论。

注意： //Find string 部分仅用于我的调试/学习目的

```
<?php
//get contents of cron tab
$output = shell_exec('crontab -l');
echo "<pre>$output</pre>";

//Find string
$cronjob = ('* * * * * /usr/local/bin/php /home/dldl1330/public_html/new/mailchimp.php');
if (strstr($output, $cronjob)) {
   echo 'found';
} else {
   echo 'not found';
}

//Copy cron tab and remove string
$newcron = str_replace($cronjob,"",$output);
echo "<pre>$newcron</pre>";

file_put_contents('/tmp/crontab.txt', $newcron.PHP_EOL);
echo exec('crontab /tmp/crontab.txt');

?> 
```

# image-resizing - 转换图像时如何保留颜色配置文件

> ID：15830760
> 
> 赞同：1
> 
> 时间：2013-04-05T09:48:22.507
> 
> 标签：image-resizing, imageresizer

当我在输出图像中使用 imageresizing.net(FreeImageDecode) 库调整图像大小时，颜色配置文件 sRGB 将被忽略。转换时如何保持颜色配置文件 sRGB？我已经设置了 ignoreicc=false

[http://imageshack.us/photo/my-images/59/93596133.png/](http://imageshack.us/photo/my-images/59/93596133.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T13:42:42.530

出于性能原因（250% 的性能提升），FreeImageDecoder 插件中使用的 FreeImage 版本当前编译时没有元数据/icc 支持。

无论如何，一切都是在 sRGB 中执行的；所以不应该有任何实际问题，除非你的源文件不是 sRGB。

我们希望 FreeImage 团队允许使用标志设置它而不需要重新编译。目前，在使用 FreeImage 插件时，我们无法同时支持良好的性能和 ICC 灵活性。

# c# - C# 工作单元错误的实现

> ID：15830762
> 
> 赞同：1
> 
> 时间：2013-04-05T09:48:28.260
> 
> 标签：c#, entity-framework

我试图用 SQLCE 数据库实现一个工作单元。一切正常，除了一件事。

我有一个场景，患者可以执行不同的会话，每个会话都基于特定的测试。这些是实现：

```
public class Patient
{
    public int Id { get; set; }
    public byte[] IdentificationCode { get; set; }
    public string Sex { get; set; }

    public virtual List<Session> Sessions { get; set; }        
}

public class Session
{
    public int Id { get; set; }

    public Guid Unique { get; set; }
    public DateTime DateTime { get; set; }

    public virtual Patient Patient { get; set; }
    public virtual Test Test { get; set; }

    public virtual List<VideoExerciseResult> VideoSessionResults { get; set; }
    public virtual List<AudioExerciseResult> AudioSessionResults { get; set; }
}

public class Test
{
    public int Id { get; set; }
    public string Name { get; set; }

    public virtual List<Session> Sessions { get; set; }
} 
```

当我执行测试时，数据实际上被保存了，我可以直接去查看会话的结果。

但是当我再次运行应用程序并加载会话时，会话中的结果和测试显示为 null（而 Patient、Id 和 Unique 具有正确的值）。

```
private void GetSessionData()
    {
        // List<Test> tempList = new List<Test>(UOW.Tests.GetAll());
        // List<AudioExerciseResult> tempList1 = new List<AudioExerciseResult>(UOW.AudioSessionsResults.GetAll());

        switch (SelectedSession.Test.Name)
        { 
```

而且我发现在调用 Session 对象之前加载数据库的 Tests 和 Results 列表将使 Session 对象内的 Test 和 Results 的值正确显示。

显然，在 DB 的世界中有些东西我不明白。有人可以澄清我为什么必须从数据库加载值列表吗？

我不清楚我会更准确地解释......

# reporting-services - 具有分组行的 SSRS 表中的自动行号

> ID：15830767
> 
> 赞同：9
> 
> 时间：2013-04-05T09:48:40.423
> 
> 标签：reporting-services, ssrs-2008

我正在使用 SSRS 2008。在我的一份报告中，我有一个包含 3 列的表格。先生，第 1 列，第 2 列。Sr. No 是 -RowNumber("DataSet") 和其他两个是数据集列。我已经在第 1 列和第 2 列对我的表进行了分组（行组）。这没关系，但是 Sr.No 列没有显示正确的计数，它显示了分组行的行号，例如 2、4、9、10 等等。我想在分组后保留 Sr.No 或行号，并且在我的表格顶部我想在分组后显示表格中的行数。

请建议

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T11:04:42.267

对于不同的行编号，您可以尝试以下操作：

```
=RunningValue(CountDistinct("YourTableName"),Count,"YourTableName") 
```

如果您的报告中只有一个分组级别，您可以在 SQL 查询中对您的值进行分组，然后在 SQL 查询中添加新的列`ROW_NUMBER() OVER(...)`编号您的行。

# visual-studio-2010 - Visual Studio 2010 专业版错误

> ID：15830773
> 
> 赞同：1
> 
> 时间：2013-04-05T09:48:52.507
> 
> 标签：visual-studio-2010

我已经安装了`Silverlight5_Tools`，然后我再也找不到我的解决方案资源管理器并得到这个错误

构造此帧的内容时发生异常。可以通过在命令行中使用 /log 运行应用程序来保存此信息，该命令将结果存储在“C:\Users\studio\AppData\Roaming\Microsoft\VisualStudio\10.0\ActivityLog.xml”中。

异常详细信息：System.OutOfMemoryException：没有足够的存储空间来完成此操作。（HRESULT 异常：0x8007000E (E_OUTOFMEMORY)）→ System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo) à Microsoft.VisualStudio.Platform.WindowManagement.WindowFrame.ConstructContent()

# zend-framework2 - zf2 在两个不同的数据库之间进行连接

> ID：15830774
> 
> 赞同：4
> 
> 时间：2013-04-05T09:48:53.167
> 
> 标签：zend-framework2, zend-db, zend-db-table

我正在尝试使用 Zend Framework 2 在放置在不同数据库中的两个表之间进行连接。

第一个表称为**users**并存储在数据库**admin中**

第二个表称为**层次结构**，存储在数据库**客户中**

我在 global.php 中加载数据库适配器

> ```
> return array(
> 'admin' => array(
>     'driver' => 'Pdo',
>     'dsn' => 'mysql:dbname=admin;host=localhost',
>     'driver_options' => array(
>         PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
>     ),
> ),
> 'customer' => array(
>     'driver' => 'Pdo',
>     'dsn' => 'mysql:dbname=customer;host=localhost',
>     'driver_options' => array(
>         PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
>     ),
> ),
> 'service_manager' => array(
>     'factories' => array(
>         'Zend\Db\Adapter\Adapter'
>         => 'Zend\Db\Adapter\AdapterServiceFactory',
>     ),
> ), 
> ```
> 
> );

但是当我尝试使用此功能加入 UserDao 时：

> ```
> public function getSelect(Hierarchy $hierarchy) {
>     $select = $this->tableGateway->getSql()->select();
>     $select->where(array('level' => $hierarchy()->getId()));
>     $select->join(array('h' => 'hierarchies'), 'h.id = users.idHierarchy', array('hierarchyId' => 'id', 'level' => 'level'));
>     return $select;
> } 
> ```

这会生成这个 SQL 语句：

> SELECT "users".*, "h"."id" AS "hierarchyId", "h"."level" AS "level" FROM "users" INNER JOIN "hierarchies" AS "h" ON "h"."id " = "用户"."idHierarchy" WHERE "级别" = '1'

但是当我尝试使用它时它会抛出这个异常：

> ```
> Zend\Db\Adapter\Exception\InvalidQueryException
> SQLSTATE[42S02]: Base table or view not found: 1146 Table 'admin.hierarchies' doesn't exist 
> ```

我尝试在连接中指示数据库的名称，如下所示：

> $select->join(array('h' => 'customer.hierarchies'), 'h.id = users.idHierarchy', array('hierarchyId' => 'id', 'level' => 'level') );

但它也抛出了这个异常：

> SQLSTATE [42S02]：未找到基表或视图：1146 表 'admin.customer.hierarchies' 不存在

我发现这个网站解释了我如何做到这一点，但它只对 Zend Framework 1 有效，我正在使用 Zend Framework 2。

[在 Zend 框架中使用不同的数据库](http://www.amazium.com/blog/using-different-databases-with-zend-framework)

有人可以帮我吗？请。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T21:33:03.887

看起来这个问题是不久前被问到的，但我似乎找到了一个很好的解决方法或解决方案。如果您使用 Zend\Db\Sql\TableIdentifier 和 Zend\Db\Sq\Expression，您将能够解决您的问题。

```
public function getSelect(Hierarchy $hierarchy) {
    $select = $this->tableGateway->getSql()->select();
    $select->where(array('level' => $hierarchy()->getId()));
    $select->join(
         array('h' => new TableIdentifier('hierarchies', 'admin')), 
         new Expression('h.id = ?', 'users.idHierarchy', Expression::TYPE_IDENTIFIER), 
         array('hierarchyId' => 'id', 'level' => 'level')
    );
    return $select;
} 
```

我不确定您的层次结构表在哪个数据库中，所以我现在使用“admin”。您可以将其替换为您拥有的任何数据库名称。看看它是否适合你，似乎对我来说很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:23:45.477

该框架不支持与另一个数据库的联接。您必须使用纯 SQL 来构建查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:38:37.300

由于 Select 类转义引号的方式，出现此问题。

$select->join("database2.table2", "database2.table2.id = table.id")

呈现为：

SELECT 'table'.* 'database2.table2'.* FROM 'table' INNER JOIN 'database2.table2' ON 'database2'.'table2'.'id' = 'table'.'id'

请注意围绕“database2.table2”的不一致和不正确的引用。

更新 \Zend\Db\Sql\Select 中的第 596、599、624、625 行以将“quoteIdentifier”方法替换为“quoteIdentifierInFragment”可以正确呈现查询并允许执行跨数据库连接。

我已经向 Zend 提交了一份问题报告，因为我不相信当前的行为是有意的，因此希望它会在未来的构建中得到更新。现在手动更新类已经很容易了（尽管确实有点脏）。

[https://github.com/zendframework/zf2/issues/4307](https://github.com/zendframework/zf2/issues/4307)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T11:31:15.487

正如 Dan 回答的那样，但对于**Zend 2.3**，您应该将文件**Zend\Db\Sql\Select.php中的****第 742 行**从

 **```
$joinName = $platform->quoteIdentifier($joinName); 
```

至

```
$joinName = $platform->quoteIdentifierInFragment($joinName); 
```

和**第 680 行**从

```
$name = $platform->quoteIdentifier($name); 
```

至

```
$name = $platform->quoteIdentifierInFragment($name); 
```

Obs：这些只是我可以识别的行，可能不是完整的列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-13T06:00:41.710

为什么要使用 DAO 概念？只有在表网关中，您才能拥有所需的一切。您已经在 global 或 local.php 中有适配器。您已经有用于表网关的工厂，不是吗？为什么需要将 Hierarchy 类（我认为它是另一个表网关）传递给当前类？要进行所需的连接，您唯一需要的是表标识符。

```
$table2 = new Zend\Db\Sql\TableIdentifier('table2', 'schema_name'); 
$select = $this->tableGateway->getSql()->select()
->join($table2, 'table1.field = table2.field', ['fields_from_table2'], 'INNER');

$sql = new Sql($this->tableGateway->getAdapter());
$selectString = $sql->buildSqlString($select);
$result = $adapter->query($selectString, $adapter::QUERY_MODE_EXECUTE); 
```

[查看这个问题的答案](https://stackoverflow.com/questions/36722493/zend-framework-2-join-tables-in-different-databases-and-schemas/59459885#59459885)**

# java - 覆盖抽象超类中的克隆

> ID：15830775
> 
> 赞同：0
> 
> 时间：2013-04-05T09:48:53.680
> 
> 标签：java, overriding, clone

==================================编辑前=============== ==========================

我对Java有点陌生，所以请多多包涵:)

我创建了一个超类。

```
public abstract class Employee 
```

我尝试通过执行以下操作来覆盖对象克隆

```
 @Override
    public Employee clone()
    {
        Employee foo;

        try
        {
            foo = (Employee) super.clone();
        }
        catch (CloneNotSupportedException e)
        {
            throw new AssertionError(e);
        }

        return foo;
    } 
```

我创建了一个子类

```
public class Employee_Subclass extends Employee 
```

只有一个构造函数。

在此之上，我有我的主程序。

从主程序中，我尝试克隆 的对象`Employee_Subclass`，但未成功。

是否可以在超类中仅使用克隆功能克隆子类的对象？

我不断收到向我抛出的 AssertionError

```
 Exception in thread "main" java.lang.AssertionError: java.lang.CloneNotSupportedException: test_project.Employee_Subclass
    at test_project.Employee.clone(Employee.java:108)
    at test_project.Test_Project.main(Test_Project.java:22)
Caused by: java.lang.CloneNotSupportedException: test_project.Employee_Subclass
    at java.lang.Object.clone(Native Method)
    at test_project.Employee.clone(Employee.java:104)
    ... 1 more
Java Result: 1 
```

知道如何正确地做到这一点吗？

谢谢。

==================================================== =================================

好的，所以我添加了可克隆，这就是我所拥有的

```
 public abstract class Employee implements Cloneable 
    {
        private String firstName;
        private String lastName;
        private String socialSecurityNumber;
        private Date_Of_Birth Date_Of_Birth_Inst;

        // three-argument constructor
        public Employee( String first, String last, String ssn, int Day, 
                             int Month, int Year )
        {
             firstName = first;
             lastName = last;
             socialSecurityNumber = ssn;
             Date_Of_Birth_Inst = new Date_Of_Birth(Day, Month, Year);
        } 

        ....
        Some Get and Set functions.
        ....

        @Override
        protected Employee clone() throws CloneNotSupportedException {
            Employee clone = (Employee) super.clone();
            return clone;
        }
   } 
```

这是子类

```
public class Employee_Subclass extends Employee{

    public Employee_Subclass( String first, String last, String ssn, int Day, 
                         int Month, int Year )
    {
            super( first, last, ssn, Day, Month, Year);
        }

} 
```

只有一个构造函数。

这是主文件。

```
public class Test_Project {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws CloneNotSupportedException {

        Employee_Subclass Employee_Inst = new Employee_Subclass("Hello", "World",
                                                   "066499402", 7, 6, 1984);

        Employee_Subclass Employee_Inst1;

        Employee_Inst1 = (Employee_Subclass) Employee_Inst.clone();
    }        

} 
```

我必须添加，`throws CloneNotSupportedException`否则它将无法正常工作。

所以我的问题是它到底是如何工作的？

当我调用 Employee_Inst.clone() 时，它会调用 Employee 中的 clone 函数，对吗？

现在，这个函数返回一个Employee对象，那么我怎样才能将它插入到子类对象中呢？

至于深层克隆，我做对了吗？Date_Of_Birth_Inst 怎么样，是否正确复制？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:51:04.450

您只是忘记让您的 Employee 类实现 Cloneable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:51:39.530

你需要`implement Cloneable`在你的`Employee`课堂上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:56:19.357

I suggest you implement a copy-constructor instead of using the Cloneable interface. See [Joshua J. Bloch explanation](http://www.artima.com/intv/bloch13.html) for further details.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T10:07:58.623

您需要实现`Cloneable`接口。以下示例可能会帮助您了解深度克隆和浅层克隆。

```
import java.util.ArrayList;
import java.util.List;

public class DeepCopy implements Cloneable {
    private List<String> hobbiesList;
    private int age;
    private String name;
    private float salary;

    public static void main(String[] args) throws CloneNotSupportedException {
        DeepCopy original = new DeepCopy();
        original.name = "AAA";
        original.age = 20;
        original.salary = 10000;
        original.hobbiesList = new ArrayList<String>();
        original.hobbiesList.add("Cricket");
        original.hobbiesList.add("Movies");
        original.hobbiesList.add("Guitar");
        original.hobbiesList.add("Eating");

        DeepCopy cloned = (DeepCopy) original.clone();
        System.out.println("original:=" + original);
        System.out.println("cloned  :=" + cloned);
        System.out.println("After adding two more hobbies in 'original' which untimately reflected in 'cloned'");
        cloned.name = "BBB";
        cloned.age = 27;
        cloned.salary = 18237;
        cloned.hobbiesList.add("Trecking");
        System.out.println("original       :=" + original);
        System.out.println("cloned  changed:=" + cloned);
    }

    @Override
    protected DeepCopy clone() throws CloneNotSupportedException {
        DeepCopy clone = (DeepCopy) super.clone();
        clone.hobbiesList = new ArrayList<String>(clone.hobbiesList);
        return clone;
    }

    @Override
    public String toString() {
        return "My name is (String)" + name + " having age (int)" + age + ". I earned (float)" + salary + " and hobbies are (ArrayList)" + hobbiesList;
    }
} 
```

# linux-device-driver - 如何阻止 eth0 接收的数据包进入 TCP/IP 堆栈

> ID：15830777
> 
> 赞同：2
> 
> 时间：2013-04-05T09:48:57.017
> 
> 标签：linux-device-driver, kernel-module

我们使用带有 ETH_P_ALL 的 dev_add_pack 来获取 eth1 接收到的所有以太网帧的 sk_buff 副本。有没有一种方法可以阻止 eth1 将所有以太网帧转发到 TCP/IP 层，同时仍然让它捕获所有帧并将其传递给我们的可加载内核模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:48:44.843

你最好的选择是创建一个 netfilter 钩子。而不是 dev_add_pack，它获取 sk_buff 的副本（从而允许原始 sk_buff 传播到 TCP/IP 堆栈，netfilter 挂钩将在遍历堆栈时为您提供指向原始 sk_buff 的指针，并且您的代码实际执行作为堆栈本身的回调 - 因此您可以选择阻止数据包，声明模块的所有权，或者做几乎任何您想做的事情。

# sql - 如果不存在则将行添加到数据库中，如果存在则更新行

> ID：15830779
> 
> 赞同：0
> 
> 时间：2013-04-05T09:49:00.790
> 
> 标签：sql, sql-update

如果它不存在，我正在尝试将一行添加到数据库中，如果存在则更新该行。我在这个 SQL 语句中哪里出错了？

```
UPDATE Classes 
SET (Duration='44',
INModule='Actions',
EditionsFOR='Vocus VPR - Basic    Edition//Vocus PR - Enterprise Edition//',    
Objectives='objective 1//objective 2//objective 3//', 
PreReq='prerequisite   
1//prerequisite 2//prerequisite 3//',
Points='training point   1//training point 2//training point 3//',     
ContentLink='www.aol.com', 
OtherInfo='this is the internal info', 
Summary='this is a brief summary of the class') 
WHERE Title='this is the class title' 
IF @@ROWCOUNT=0 
INSERT INTO Classes (Title, Duration, INModule, EditionsFOR, Objectives, PreReq, 
Points, ContentLink, OtherInfo, Summary) 
VALUES ('this is the class title','44','Actions',
'Vocus VPR - Basic Edition//Vocus PR - Enterprise Edition//',
'objective 1//objective 2//objective 3//',
'prerequisite 1//prerequisite 2//prerequisite 3//',
'training point 1//training point 2//training point 3//',
'www.aol.com','this is the internal info',
'this is a brief summary of the class') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:50:55.997

去掉 . 周围的括号`SET`。应该这样写：

```
UPDATE Classes 
SET Duration    = '44', 
    INModule    = 'Actions', 
    EditionsFOR = 'Vocus VPR - Basic Edition//Vocus PR - Enterprise Edition//',
    Objectives  = 'objective 1//objective 2//objective       3//', 
    PreReq      = 'prerequisite 1//prerequisite 2//prerequisite 3//', 
    Points      = 'training point 1//training point 2//training point 3//', 
    ContentLink = 'www.aol.com', 
    .... 
```

# javascript - 如何使用纯 Javascript 而不使用插件来简单地冻结表格的第一行？

> ID：15830780
> 
> 赞同：0
> 
> 时间：2013-04-05T09:49:03.323
> 
> 标签：javascript, html, css, html-table, tableheader

我只需要这张表在最新版本的谷歌浏览器中工作（所以不用担心跨浏览器的解决方案，比如旧版本的 IE 等）

我正在寻找一种解决方案来冻结第一行并且没有任何成功。`relative`如果我在这个 CSS 中排除这个词，`position: fixed relative;`那么标题行会堆叠在一起。当我滚动时，不确定如何让标题保持在屏幕顶部。

## 表格代码

```
<html>
<head>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.js"></script>
<script type="text/javascript">

$(document).ready(function(){
    $( "#status_report .measure[data-bg='1']").css('background', 'red');
    $( "#status_report .measure[data-bg='2']").css('background', 'grey');
    $( "#status_report .measure[data-bg='3']").css('background', 'yellow');
    $( "#status_report .measure[data-bg='4']").css('background', 'green');
});

</script>
<style type="text/css">
th{
    position: fixed relative;
    background:#111;
    color:#fff;
    padding: 2px;
}
td
{
    background:#ddd;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding: 2px;
}
</style>
</head>
<body>
<table id="status_report">
<tr>
    <th>field1</th>
    <th>field2</th>
    <th>field3</th>
</tr>
<tr>
<?php foreach( $data as $row ) : ?>
<tr>
    <td><?php echo $row['field1']; ?></td>
    <td class = "measure" data-bg="<?php echo $row['field2']; ?>"><?php echo $row['field2']; ?></td>    
    <td class = "measure" data-bg="<?php echo $row['field3']; ?>"><?php echo $row['field3']; ?></td>        
</tr>
<? endforeach;
$dbh = null; ?>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:00:41.877

您可以为此定义一个 JScrollpane。

但是，如果用户不在 JScrollPane 的焦点范围内，它将无法工作。因此，如果用户在 JScrollPane 之外，您可以捕获 onscroll 事件并重置位置。

这是一个例子：

[http://christian-illies.info/2011/11/javascript-scrollbalken-mit-jscrollpane/](http://christian-illies.info/2011/11/javascript-scrollbalken-mit-jscrollpane/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:09:55.370

`position: fixed relative`是无效的 CSS。当您将某物设置为 时`fixed`，它的位置会“重置”，例如，对象不会停留在“它应该在的位置”，而是相对于文档，因此您需要使用 等设置它的`top`位置`left`。

这就是他们堆叠的原因。

[阅读有关定位](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)的更多信息。

# javascript - 与 URL 解析正则表达式混淆

> ID：15830781
> 
> 赞同：0
> 
> 时间：2013-04-05T09:49:06.793
> 
> 标签：javascript, regex

[我在代理PAC 文件](https://github.com/goagent/goagent/blob/2.0/local/proxy.pac)中遇到了一个 url 解析正则表达式。

它的功能是匹配属于域 wikimapia 的任何 url 模式。（顺便说一句，只是我的猜测）

```
^[\w\-]+:\/+(?!\/)(?:[^\/]+\.)?wikimapia\.org 
```

我将其拆分并给出如下混淆：

```
^ 
[\w\-]+     // any protocol name containing '-' ?
:
\/+         // why not use '\/\/', aren't protocol names follow by '://' ?
(?!\/)      // what's the function of this part?
(?:[^\/]+\.)? // is non-capturing grouping ?: necessary here? or just for optimization?
wikimapia
\.
org 
```

希望有人能解释我的困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:45:00.073

根据[rfc](http://www.ietf.org/rfc/rfc1738.txt)，一个 URL 可以包含`-`在架构（协议）中，对于非基于 IP 的协议，您可以拥有两个以上`/`的 '。但是，`http`它应该始终是`://`.

（`(?!\/)`负前瞻）断言在`/`'s 的“the”字符串之后的任何内容都不是`/`. 然而，这并没有多大用处，大多数正则表达式引擎都是贪婪的，所以它会消耗它所能消耗的所有`/`东西，所以不应该`/`留下任何非字符。此外，下一个字符或者不在`/`可选`(?:[^\/]+\.)?`部分中，如果不匹配，则下一个字符将`w`在`wikimapia.org`. 因此，最终前瞻毫无用处。

除非您实际上引用了捕获组，否则将任何组设为非捕获对性能没有任何影响。我会说这仍然是一件好事，如果您实际上使用反向引用，那么养成这个习惯会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:06:16.193

该模式`(?!\/)`是一个否定的前瞻断言。换句话说，断言该断言之后的字符不是正斜杠。我不明白为什么要使用它。正如您在问题中所述，几个正斜杠肯定就足够了：

`[\w\-]+:\/\/(?:[^\/]+\.)?wikimapia\.org`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:33:13.083

我不能对那个表达本身说太多，但这会更好：

```
var suffix = 'wikimapia.org';
if ((matches = url.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)) {
    if (matches[4] && matches[4].substr(-suffix.length) == suffix) {
        // valid
    }
} 
```

# vb.net - 从文本框中获取“十”个值，将它们拆分为 10 个单个值并输出到一列

> ID：15830788
> 
> 赞同：1
> 
> 时间：2013-04-05T09:49:24.980
> 
> 标签：vb.net, text, mapping

我目前正在使用以下代码的修改版本将在 Form 2 的组合框和文本框中输入的信息发送到 Labels Form3

```
Public Class Form1
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
Dim f As New FormVb2()
f.TextBox1Value = TextBox1.Text
f.ShowDialog()
End Sub
End Class

Public Class Form2
Public Property TextBox1Value As String

Private Sub Form2_Load(sender As Object, e As EventArgs) Handles Me.Load
    TextBox1.Text = TextBox1Value
End Sub
End Class 
```

感谢@steven Doggart，

我现在希望将这个过程更进一步......假设表单 2 上的 textbox5 具有以下数据...... 27、34、56、94、23 我希望将这些数据带入 Form3 并在 5 上输出不同的标签为 27 34 56 94 23

我马上想到的问题是我是否需要准备好标签以将这些标签输入（如果数据可以拆分），还是可以对其进行编码以创建和放置数据？由于 form2 有 10 个文本框，每个文本框都可以输入 1 到 50 个不同的值，我希望它从 form2 上的每个文本框中获取数据，将它们作为列中 form3 上的单个值输出。

如果我曾经达到 15rep，我可以提供一些屏幕截图，这将有助于更好地展示这个过程。如果需要任何进一步的信息，请告诉我。

非常感谢您的建议/帮助/建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:20:12.130

拆分数据当然是可能的，但这一切都取决于数据的实际格式。如果数据的格式总是用逗号后跟每个值之间的空格，那么您可以使用该`String.Split`方法，如下所示：

```
Dim data As String = "27, 34, 56, 94, 23"
Dim values() As String = data.Split({", "}, StringSplitOptions.None) 
```

该`String.Split`方法返回一个字符串数组，其中数组中的每个项目都是分隔值之一。

至于在 a 上显示它们`Form`，如果要将它们显示在一列`Label`控件中，则需要为`Label`数组中的每个项目创建一个新的。要么您需要在设计时将它们放在表单上，​​要么您需要`Label`在运行时动态实例化控件。但是，我也不推荐。如果您需要显示一列数据，有比`Label`.

我建议使用`ListBox`控件来显示它们。除了方便之外，该控件的优点`ListBox`是它可以显示任意数量的项目。如果控件中的项目太多，它将显示一个滚动条，以便用户可以向上和向下滚动项目。`ListBox`以下是从字符串数组中填充 a 的方法：

```
ListBox1.Items.AddRange(values) 
```

或者，如果您确实需要使用`Label`控件，出于某种原因，您可以在单个 Label 控件中将每个项目显示在单独的行上。为此，您需要使用`NewLine`字符串作为分隔符将所有项目连接在一起，例如：

```
Label1.Text = String.Join(Environment.NewLine, values) 
```

Raja 提供了一个很好的示例，说明如何遍历`TextBox`表单上的所有控件并构建一个`ArrayList`包含所有拆分值的控件。但是，我要提醒您，它会在表单上找到*所有* `TextBox`控件，因此如果您有任何其他文本框，则需要稍微更改逻辑。我对改进他所做的唯一真正的建议是`ArrayList`，您应该使用`List(Of String)`. 不是特定于`ArrayList`类型的，因此不太安全，因此不推荐使用。它是 .NET 早期的一个较旧的类，早在支持泛型之前。现在，即使您需要不特定类型的列表，大多数人还是建议使用`List(Of Object)`而不是`ArrayList`.

要从多个文本框中构建字符串列表，然后将它们添加到 a`ListBox`中，您可以执行以下操作：

```
Dim allValues As New List(Of String)()
For Each i As TextBox In Me.Controls.OfType(Of TextBox)()
    allValues.AddRange(i.Text.Split({", "}, StringSplitOptions.None))
Next
ListBox1.Items.AddRange(allValues.ToArray()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:46:59.347

我刚刚编辑了您的代码并制作了一个`snippet`适合您要求的代码。

**表格1：**

```
Public Class Form1

 Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

       Dim xFrm2 = New FormVb2

       'This loop will get the text from all of your text boxes, split that with ','
       'and after that it will add that text into the public arraylist of form2

       For Each xTextBoxes In Me.Controls.OfType(Of TextBox)()
          xFrm2.mValues.AddRange(xTextBoxes.Text.Split(","))
       Next

       xFrm2.ShowDialog()

 End Sub

End Class 
```

**表格2：**

```
Public Class Form2

 Public mValues As New ArrayList

    Private Sub Form2_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

           Dim xVal As Integer = 0

           'This loop will get values from that list and create a new label for each. 
           'Here i had set some other properties, for a visual representation.
           For Each XText In mValues

              Me.Controls.Add(New Label() With _
                                   { _
                                   .Name = xVal, _
                                   .Height = 50, _
                                   .Text = XText, _
                                   .Location = New Point(0, xVal), _
                                   .BackColor = If((xVal / 10) Mod 2 = 0, Color.Red, Color.White) _
                                   }) : xVal +=50

           Next

    End Sub

End Class 
```

# .net - 检测程序安装时间

> ID：15830789
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:49:26.887
> 
> 标签：.net, winapi, registry

我可以以某种方式检测使用 .Net 或 Win32 api 或任何其他方式安装程序的时间吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:54:43.640

这将获得安装的日期，我不确定你能得到时间

```
string registry_key = @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall";
using(Microsoft.Win32.RegistryKey key = Registry.LocalMachine.OpenSubKey(registry_key))
{
    foreach(string subkey_name in key.GetSubKeyNames())
    {
        using(RegistryKey subkey = key.OpenSubKey(subkey_name))
        {
            Console.WriteLine(subkey.GetValue("DisplayName"));
            Console.WriteLine(subkey.GetValue("InstallDate"));
        }
    }
} 
```

您可以使用所有这些字段

![注册表项](https://i.stack.imgur.com/aSteV.png)

有关更多信息，请参阅[此](https://stackoverflow.com/questions/908850/get-installed-applications-in-a-system)答案。

您可以通过使用 Windows Installer API 来获得时间！要使用的函数是[MsiGetProductInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370130%28v=vs.85%29.aspx)，属性名称是**INSTALLPROPERTY_INSTALLDATE**，但 WMI 是重量级的。

这是从[此处获取的此属性的更多信息](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370130%28v=vs.85%29.aspx)

**INSTALLPROPERTY_INSTALLDATE**：*该产品上次接受服务的时间。每次从产品应用或删除补丁或使用 /v 命令行选项修复产品时，都会替换此属性的值。如果产品未收到任何维修或补丁，则此属性包含此产品在此计算机上安装的时间。*

**例子：**

```
[DllImport("msi.dll", CharSet=CharSet.Unicode)]
static extern Int32 MsiGetProductInfo(string product, string property, [Out] StringBuilder valueBuf, ref Int32 len);

Int32 len = 512;
System.Text.StringBuilder builder = new System.Text.StringBuilder(len);
MsiGetProductInfo("{4B3334CE-06D9-4446-BBC5-EB4C9D75BFF6}", "INSTALLPROPERTY_INSTALLDATE", builder , ref len); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:52:59.867

您必须在注册表中找到它。

这就是为什么它不是关于`.NET`或`WinAPI`。

例如：

```
HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\InstallDate 
```

显示自 1970年 1 月 1 日`Windows`以来的安装时间（以秒为单位）

# python - Python HTTP 599：连接关闭（龙卷风）

> ID：15830792
> 
> 赞同：3
> 
> 时间：2013-04-05T09:49:33.593
> 
> 标签：python, tornado, http-error, connection-close

我收到此错误：

> HTTP 599：连接已关闭 [E 130405 11:43:14 web:1031] 未捕获的异常 GET /networks/1/sensors/1/alarm (127.0.0.1)

在执行以下代码时：

```
from tornado.stack_context import ExceptionStackContext

def handle_exc(*args):
print('Exception occured')
return True

@tornado.gen.engine
def check_status_changes(netid, sensid):

    como_url = "".join(['http://131.114.52:44444/ztc?netid=', str(netid), '&sensid=', str(sensid), '&start=-5s&end=-1s'])

    http_client = AsyncHTTPClient()
    response = yield tornado.gen.Task(http_client.fetch, como_url)

    if response.error is not None:
            print("Terzo")
            print response.error
            with ExceptionStackContext(handle_exc):
                response.rethrow()
    else:
        print('Handle request')

    for line in response.body.split("\n"):
                if line != "": 
                    #net = int(line.split(" ")[1])
                    #sens = int(line.split(" ")[2])
                    #stype = int(line.split(" ")[3])
                    value = int(line.split(" ")[4])
                    print value
                    yield value
                    return

class AlarmHandler(BaseHandler):
    @tornado.web.authenticated
    @tornado.web.asynchronous
    @tornado.gen.engine
    def get(self, netid, sensid):
        self.lock_tables("read", ['devices'])
        status = self.db.get("SELECT status from devices \
                          WHERE id=%s AND network_id=%s", sensid, netid)
        print("Primo")
        print status

        try:
            periodic = tornado.ioloop.PeriodicCallback(check_status_changes(netid, sensid), 5000)
            value = periodic.start()
            print("Secondo")
            print value
        except:
            print("Quarto")
            periodic.stop()
            self.finish()
            return
        if value != status['status']:

            self.lock_tables("write", ['devices'])
            self.db.execute("UPDATE devices SET status=%s \
                             WHERE id=%s AND network_id=%s", value, netid, sensid)
            self.unlock_tables()
            self.notice("Status changed") 
```

在课堂`AlarmHandler`上有一个名为`check_status_changes`. 在这个函数中，当有 response.error 时，我会获取标题的错误。

如何设置 if 错误条件以返回课堂并管理情况？谢谢你。

**其他信息**

如果我做一个 Tornado 屏幕，我会看到：

> 普里莫
> 
> {'状态'：无}
> 
> 秒
> 
> 没有任何
> 
> 泰尔佐
> 
> HTTP 599：连接关闭
> 
> 发生异常

所以，我认为程序在异常是rethtow之前关闭了连接！

在 html 控制台中，我看到了这个错误：

> 文件“./wsn.py”，第 226 行，在 response.body.split("\n") 中的 check_status_changes 行：AttributeError: 'NoneType' object has no attribute 'split'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:43:56.033

你提出了一个例外：

```
if response.error:
        print("Terzo")
        print response.error
        raise Exception(response.error)
        return 
```

这将是一个`Uncaught Exception`. 您应该对此进行编码以处理异常而不引发异常。例如，记录错误消息并中止数据库更新。

# php - 使用 Codeigniter 的 Active Record 的条件子句

> ID：15830793
> 
> 赞同：1
> 
> 时间：2013-04-05T09:49:34.677
> 
> 标签：php, codeigniter, activerecord

我有一个函数根据传递的参数返回数据。基本上，查询会根据子句而变化。

```
if(1==$case) 
return select()->from('db')->where('x',$something)->where('y','fixed')...

else if(2==$case)
return select()->from('db')->where('x','fixed')->where('y',$something)... 
```

有没有更好的方法来做到这一点？

另外，是否有可能有这样的条款

```
...->where('category',*) 
```

'*' 被一个值或等同于“any”的东西替换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:53:27.277

这种类型的查询也称为“动态查询”，因为您可以轻松地组合子句。试试这个：

```
$query = $this->db->select()
    ->from('db');
if(1==$case) {
    $query->where('x',$something)
          ->where('y','fixed')
}
elseif (2==$case){
    $query->where('x','fixed')
          ->where('y',$something)
}
....
return $query->get(); 
```

回答你的第二个问题，你可以使用：

```
$this->db->like('category', '%'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T09:55:14.970

你可以这样做-

```
$where = array();

if(1==$case) 
 $where['x'] = $something;
 $where['y'] = 'fixed';

else if(2==$case)
 $where['x'] = $something;
 $where['y'] = 'fixed';

$this->db->where($where);
$this->db->get(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:55:21.173

你可以像这样简化它

```
if($case == 1){
    $this->db->where('x',$something)->where('y','fixed');
}else if($case == 2){
    $this->db->where('x','fixed')->where('y',$something)
}else{
    //no where clause
}
$query  =   $this->db->get('db_table');
return $query->result(); 
```

# jquery - 将 preventDefault() 与函数分开

> ID：15830796
> 
> 赞同：4
> 
> 时间：2013-04-05T09:49:44.230
> 
> 标签：jquery

而不是这样的

```
$('#submitbutton').click(function(e) {
    e.preventDefault(); //to avoid the submit button to reload the page and go page to page one.
/* computing dimensions */
}); 
```

我想把我的功能放在别的地方，像这样：

```
$('#submitbutton').click(computeUserDimensions);

function computeUserDimensions(){
/* computing dimensions */
} 
```

但是后来我不知道在哪里`preventDefault`提供点击（在提交按钮上）以转到另一个页面。

你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:51:36.940

向您的函数添加参数`event`，它将被`jQuery`隐式传递。

```
$('#submitbutton').click(computeUserDimensions);

function computeUserDimensions(event){
    /* computing dimensions */
    event.preventDefault();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:51:55.627

您可以将函数调用更改为处理单击并调用子函数的匿名函数。

```
$('#submitbutton').click(function(e) {e.preventDefault(); computeUserDimensions();});

function computeUserDimensions(){
/* computing dimensions */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:52:50.650

```
function computeUserDimensions(e){

   var evt = e ? e:window.event;
   if (evt.preventDefault) evt.preventDefault();

   /* computing dimensions */

} 
```

# php - 在 php 中设置 javascaript 变量（php 在 javascript 中）

> ID：15830802
> 
> 赞同：0
> 
> 时间：2013-04-05T09:50:18.760
> 
> 标签：php, javascript, jquery

我在侧 JavaScript 中编写 php 代码。

**这个类型：-**

```
function load(){
                var lan= "22.3000";
                var lng= "70.7833";
                var radius = "7000";
                var xml;
                var data = lan+","+lng+","+radius;
        xml = '<?php          echo file_get_contents("http://services.gisgraphy.com/geoloc/search?lat=23.00&lng=72.00&radius10000");?>'
                xmlDoc = $.parseXML( xml );
        $xml = $( xmlDoc );
           abc= xmlDoc.getElementsByTagName("asciiName")[0].firstChild.nodeValue;
        alert(abc);
            } 
```

我想在页面加载时设置 php JavaScript 变量值 lan lng 和 radius

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:54:24.763

what you want to do is to load your page then do an ajax call to load the page with the `lat` and `lng` and `radius` parameters.

# c# - 在后面的 C# 代码中获取 kendomenu 事件

> ID：15830805
> 
> 赞同：0
> 
> 时间：2013-04-05T09:50:32.607
> 
> 标签：c#, kendo-ui

您好，我是使用剑道组件的新手。我有一个基本问题，可能太初级而无法出现在档案中。如何从 Visual Studio 项目中 kendo 组件的事件背后的 C# 代码中获取？例如，相当于普通 Button1 的 onClick 事件来触发后面 C# 代码中的 Button1_onClick() 方法？非常感谢马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:52:18.733

Kendo 小部件不会向您的代码发送任何事件。

您可以处理它通过 javascript 发送的事件，并使用它们提交表单或发出 ajax 请求

您可以执行以下操作：

```
$("#combobox").kendoComboBox({
    dataTextField: "text",
    dataValueField: "value",
    dataSource: data,
    select: onSelect
});
function onSelect(e){
   var dataItem = this.dataItem(e.item.index());
   // Make an axaj call to a handler that updates the value with dataItem.value 
} 
```

# three.js - 在 powerpoint 中嵌入 webgl 或从 webgl 渲染动画 gif

> ID：15830807
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:50:33.963
> 
> 标签：three.js, webgl

任何人都知道如何将 webgl 动画嵌入到 powerpoint 中。任何可用于服务器端捕获动画 gif 的工具？

我没有将 webgl html 直接嵌入到 powerpoint 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:10:23.290

您可以通过调用 toDataURL() 创建 webgl 的图像，如

```
var canvas = document.createElement("canvas");
var gl = canvas.getContext("experimental-webgl");

function render() {
  gl.clearColor(Math.random(), Math.random(), Math.random(), 1);
  gl.clear(gl.COLOR_BUFFER_BIT);

  // takes a 'screenshot' of the canvas.
  var image = canvas.toDataURL();
  requestAnimationFrame(render);
}
render(); 
```

要制作动画，您可以将每个屏幕截图发送到服务器

```
...
var image = canvas.toDataURL();
var req = new XMLHTTPRequest();
req.open("POST", "http://localhost:8080", true);
var data = {
  cmd: 'screenshot',
  dataURL: image,
};
req.setRequestHeader("Content-type", "application/json");
req.send(JSON.stringify(data)); 
```

这是一个 node.js 服务器，它将屏幕截图保存为 .png 文件。然后，您可以将它们加载到某个程序中以将它们变成 gif。

```
var port = 8080
var screenshotCount = 0;

var http = require('http'),
    url = require('url'),
    fs = require('fs'),
    util = require('util'),
    path = require('path'),
    querystring = require('querystring');

function postHandler(request, callback) {
  var query_ = { };
  var content_ = '';

  request.addListener('data', function(chunk) {
    content_ += chunk;
  });

  request.addListener('end', function() {
    query_ = JSON.parse(content_);
    callback(query_);
  });
}

function sendJSONResponse(res, object) {
  res.writeHead(200, {'Content-Type': 'application/json'});
  res.write(JSON.stringify(object), 'utf8');
  res.end();
}

function startsWith(str, start) {
  return (str.length >= start.length &&
          str.substr(0, start.length) == start);
}

function saveScreenshotFromDataURL(dataURL) {
  var EXPECTED_HEADER = "data:image/png;base64,";
  if (startsWith(dataURL, EXPECTED_HEADER)) {
    var filename = "screenshot-" + (screenshotCount++) + ".png";
    fs.writeFile(
        filename,
        dataURL.substr(
            EXPECTED_HEADER.length,
            dataURL.length - EXPECTED_HEADER.length),
        'base64');
    util.print("Saved Screenshot: " + filename + "\n");
  }
}

server = http.createServer(function(req, res) {
  // your normal server code
  if (req.method == "POST") {
    postHandler(req, function(query) {
      switch (query.cmd) {
        case 'screenshot':
          saveScreenshotFromDataURL(query.dataURL);
          sendJSONResponse(res, { ok: true });
          break;
        default:
          util.print("err: unknown post: " + query + "\n");
          break;
      }
    });
  }
}),

server.listen(port); 
```

请注意，服务器仅保存屏幕截图，不提供文件（为简洁起见）。因此，您需要添加该功能或从另一台服务器提供文件。

# java - 如何在java中更改日期格式？

> ID：15830813
> 
> 赞同：0
> 
> 时间：2013-04-05T09:50:52.437
> 
> 标签：java

我`dd-mm-yy`通过 jsp 页面将我的日期输入作为格式的字符串。因为这种格式比较好理解。但现在我想将日期以`yyyy-MM-dd HH:mm:ss`格式存储在我的数据库中。我正在使用以下代码。

```
try
    {       
    String s="30-04-2013";
    SimpleDateFormat ft = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    d1=new SimpleDateFormat("yyyy-MM-dd").parse(s);
    System.out.println(d1);
    System.out.println(ft.format(d1));
    } catch(Exception e) {
        System.out.println("Exception:"+e);
    } 
```

我的 Jsp 日期格式是`dd-mm-yy`，但它给出的答案是

```
Tue Oct 04 00:00:00 IST 35
0035-10-04 00:00:00 
```

我的错误是什么？请告诉我任何人

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:52:51.833

```
d1=new SimpleDateFormat("yyyy-MM-dd").parse(s); 
```

应该

```
d1=new SimpleDateFormat("dd-MM-yyyy").parse(s); 
```

因为您提供的输入日期字符串`String s="30-04-2013";`的格式为`dd-MM-yyyy`. 因此，要解析它，您需要`dd-MM-yyyy`在 SDF 中提供格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:55:31.033

将代码中的格式从 更改`yyyy-MM-dd`为`dd-MM-yyyy`. 一个简单的调试就可以解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:58:34.137

请参阅下面的工作程序。请参阅解析和格式化方法。

```
import java.text.SimpleDateFormat;
public class DateParsing {

    public static void main(String args[]) {

        String s = "30-04-2013";
        SimpleDateFormat ft = new SimpleDateFormat("dd-MM-yyyy");
        SimpleDateFormat nt = new SimpleDateFormat("yyyy-MM-dd");
        try {
            System.out.println(nt.format(ft.parse(s)));
        }

        catch (Exception e) {
            System.out.println("Exception:" + e);
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:58:54.360

我认为您需要将 Date 对象传递给SimpleDateFormat 类的**format()方法，而不是将字符串传递给它**

试着做如下

```
SimpleDateFormat ft = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String formatted_date = ft.format(new Date());
System.out.println(formatted_date); 
```

让我知道状态

快乐编码

# iphone - Linkedin 集成中的内部 api 服务器错误

> ID：15830816
> 
> 赞同：2
> 
> 时间：2013-04-05T09:50:56.810
> 
> 标签：iphone, ios, linkedin, ipad-2

当我通过linkedin集成发送邀请时，出现以下错误

```
 "errorCode": 0,

  "message": "Internal API server error",

  "requestId": "3KLV53VUW0",

  "status": 500,

  "timestamp": 1365154932156 
```

我正在发送这样的邀请请求

```
 NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/mailbox"];

    OAMutableURLRequest *request =
    [[OAMutableURLRequest alloc] initWithURL:url
                                    consumer:oAuthLoginView.consumer
                                       token:oAuthLoginView.accessToken
                                    callback:nil
                           signatureProvider:nil];

 NSString *str = [NSString stringWithFormat:@"{\"recipients\":{\"values\": [{\"person\": {\"_path\": \"/people/6JmPthSfnJ\", }}]},\"subject\": \"Invitation to connect.\",\"body\": \"Say yes!\",\"item-content\":{\"invitation-request\":{\"connect-type\":\"friend\",\"authorization\":{ \"name\":\"NAME_SEARCH\",\"value\":\"i_QN\"}}}}"];

[request setHTTPMethod:@"POST"];

  [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

   [request setValue:@"json" forHTTPHeaderField:@"x-li-format"];

    [request setHTTPBodyWithString:str];

  NSString *str = [NSString stringWithFormat:@"{\"recipients\":{\"values\": [{\"person\": {\"_path\": \"/people/6JmPthSfnJ\", }}]},\"subject\": \"Invitation to connect.\",\"body\": \"Say yes!\",\"item-content\":{\"invitation-request\":{\"connect-type\":\"friend\",\"authorization\":{ \"name\":\"NAME_SEARCH\",\"value\":\"i_QN\"}}}}"]; 
```

任何人请帮帮我

提前致谢

# mysql - 将所有数据从一个表传输到另一个相同的数据库

> ID：15830817
> 
> 赞同：2
> 
> 时间：2013-04-05T09:50:56.780
> 
> 标签：mysql, sql

我正在尝试使用 SQL 将包含 BLOB 的完整记录行从一个表 (TABLE1) 移动到同一数据库中的另一个表 (TABLE2)。我已经尝试了我所知道的很少但它失败了。

我已经使用失败的是：

```
INSERT INTO TABLE2
SELECT * FROM TABLE1
 WHERE 
staff_id = '0010002'; 
```

我应该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:56:05.813

尝试：

```
INSERT INTO TABLE2 (colname1, colname2)
SELECT colename1, colename2
FROM TABLE1 
WHERE staff_id = '0010002' 
```

并了解更多详情。[http://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

# jquery - Rails - 重置选择

> ID：15830819
> 
> 赞同：0
> 
> 时间：2013-04-05T09:50:58.830
> 
> 标签：jquery, ruby-on-rails, forms

在我的表单中，我有两个下拉框。

```
<%= f.input :movie_code, input_html: { class: "ajax_select2", onchange: "$.movies.movieChanged(this)" } %>  

<%= f.label :actor_name, required: true %>
<%= f.select :actor_code, choices, {}, {id: "actor_code_element", class: "select2"} %> 
```

当我在第一个下拉列表中更改值时，函数 movieChanged 通过 ajax 获取电影的演员并重新填充第二个下拉列表。

```
movieChanged: function(element) {
    var $this = $(element);
    url = '/movie/' + $this.val() + '/actors/';

    $.getJSON(url, null, function(data, status, xhr) {
      $('#actor_code_element').empty(); //empty the list of options
      $('#actor_code_element').prop("selected", false);
      $.each($(data), function(index, value) {
        var option = $('<option />');
        option.attr('value', value.id).text(value.text);
        $('#actor_code_element').append(option); //add option
      });
    });
  } 
```

我不能做的是在先前选择一个选项后重置第二个下拉列表的值。

例如：我选择低俗小说电影，塞缪尔·杰克逊和约翰·特拉沃尔塔出现。我选择塞缪尔。接下来我把电影改成肖申克的救赎。我重置了演员列表，但选定的演员仍然是约翰特拉沃尔塔。我想取消选择它并将其设置为空...

我正在阅读并尝试：

```
$('#actor_element').val('')
$('option', $('#category_code_element').attr('selected', false); 
```

没有任何工作...

我该怎么做？

编辑：现在我意识到可能有一种 select2ish 的做事方式。我正在尝试改变它的工作方式，这可能就是它没有按预期工作的原因......在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:39:59.293

```
$('#actor_element').val([]) 
```

应该正确重置选择。

编辑：啊，错过了你使用select2。

我会测试

```
$('#actor_element').trigger('change') 
```

看看这是否能解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:19:21.300

清空 select and set 属性 disabled 并在需要时启用它。

尝试这个

```
$('#actor_element').empty().attr('disabled','disabled'); 
```

见[小提琴](http://jsfiddle.net/anpsmn/qb5nt/)

# ruby-on-rails - 如何从 Rails 中的 garb-gem 开始？

> ID：15830824
> 
> 赞同：1
> 
> 时间：2013-04-05T09:51:09.313
> 
> 标签：ruby-on-rails, google-analytics, google-analytics-api, garb-gem

我是一名 ruby​​ on rails 新手，喜欢使用[garb gem](https://github.com/Sija/garb)从 google analytics api 获取一些数据。但我一开始就挣扎。有没有人有一个小的示例应用程序来检索一些我可以用作起点的数据？

KR，费边

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:40:50.317

您可以参考以下链接获取服装

[http://geekospace.com/working-with-garb-a-rails-gem-for-google-analytics/](http://geekospace.com/working-with-garb-a-rails-gem-for-google-analytics/)

[http://viget.com/extend/introducing-garb-access-the-google-analytics-data-export-api-with-ruby](http://viget.com/extend/introducing-garb-access-the-google-analytics-data-export-api-with-ruby)

[http://www.tweetegy.com/2010/06/using-google-analytics-api-in-a-ruby-on-rails-project/](http://www.tweetegy.com/2010/06/using-google-analytics-api-in-a-ruby-on-rails-project/)

# iphone - 如何根据 .h 和 .m 设置 Header Search Path

> ID：15830825
> 
> 赞同：0
> 
> 时间：2013-04-05T09:51:09.360
> 
> 标签：iphone, ios, objective-c, header, path

这是一个非常基本的问题，但我没有找到解决方案......

我正在尝试将 .h 文件从集成项目导入到我的项目中。它说未找到 SpeechToTextModule.h 文件

我通过这些链接..

[Xcode 4.2 如何将一个项目包含到另一个项目中？](https://stackoverflow.com/questions/9370518/xcode-4-2-how-include-one-project-into-another-one)

[Xcode 4.3 中的标头搜索路径是什么？如何使用它？](https://stackoverflow.com/questions/12633939/what-is-header-search-path-in-xcode-4-3-how-to-use-it)

[http://iphoneincubator.com/blog/xcode/how-to-add-multiple-static-library-files-with-different-architectures-to-xcode](http://iphoneincubator.com/blog/xcode/how-to-add-multiple-static-library-files-with-different-architectures-to-xcode)

我的项目架构：

我正在尝试在“ViewController.h”中导入“SpeechToTextModule.h”

![在此处输入图像描述](https://i.stack.imgur.com/FIvpQ.png)

看到上面的图片一次..我选择了speechToText.xcodeproj然后“在Finder中显示”然后“获取信息”我得到了以下路径

/Users/stellent/Documents/Sppech2Text/Speech2ooText/3rd Party

我将上述路径放在标题搜索路径中

它是否正确？

我也在项目和目标中设置了我的标题搜索路径，我尝试了递归和非递归

我给出了所有这些链接，如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/kNE2n.png)

这是我的项目结构：

![在此处输入图像描述](https://i.stack.imgur.com/MGUzj.png)

![在此处输入图像描述](https://i.stack.imgur.com/n0IGA.png)

![在此处输入图像描述](https://i.stack.imgur.com/n0IGA.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:03:34.353

1.  复制 SpeechToText 项目并将其放在包含 Speech2ooText 项目的文件夹中。

2.  现在将这个 (SpeechToText) 项目拖放到 Speech2ooText 项目中。

3.  转到 Speech2ooText 的 Build Settings--> Header Search Paths 并添加此路径

    ${SRCROOT}/第 3 方

    ${SRCROOT} --> 它是你的主项目的路径（在你的例子中是Speech2ooText）并且通过
    给出'/ 3rd Party'我们告诉标题在这个文件夹中。

# android - 创建从左到右和从右到左滑动的简单手势

> ID：15830832
> 
> 赞同：2
> 
> 时间：2013-04-05T09:51:24.970
> 
> 标签：android, android-activity, swipe-gesture

我想在两个活动之间创建简单的滑动手势，我搜索了很多类似下面的内容。但我的疑问是我如何使用滑动手势滑动活动或查看！

```
class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            try {
                if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                    return false;
                // right to left swipe
                if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    Toast.makeText(SelectFilterActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();
                }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    Toast.makeText(SelectFilterActivity.this, "Right Swipe", Toast.LENGTH_SHORT).show();
                }
            } catch (Exception e) {
                // nothing
            }
            return false;
        } 
```

希望有人能帮助我@谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T10:26:13.550

现在试试这个代码..

```
page = (LinearLayout) findViewById(R.id.flipper);

@Override
public boolean dispatchTouchEvent(MotionEvent event) {
    super.dispatchTouchEvent(event);
    return gestureDetector.onTouchEvent(event);
}

SimpleOnGestureListener simpleOnGestureListener = new SimpleOnGestureListener() {

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {

        float sensitvity = 50;
        if ((e1.getX() - e2.getX()) > sensitvity) {
            SwipeLeft();
        } else if ((e2.getX() - e1.getX()) > sensitvity) {
            SwipeRight();
        }

        return true;
    }

};

 GestureDetector gestureDetector = new GestureDetector(
        simpleOnGestureListener);

private void SwipeLeft() {

     page.setInAnimation(animFlipInForeward);
      page.setOutAnimation(animFlipOutForeward);
      page.showNext();

}

 private void SwipeRight() { 

     page.setInAnimation(animFlipInBackward);
     page.setOutAnimation(animFlipOutBackward);
     page.showPrevious();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:56:39.033

```
implement your activity with OnGestureListener

 yourview.setOnTouchListener(touchListener); 
```

如下图实现touchListener

```
 OnTouchListener touchListener = new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                gestureScanner.onTouchEvent(event);
                return false;
            }
        }; 
```

用于滑动的 onFling 方法。

```
 public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                    float velocityY) {
                try {
//                  if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
//                      return false;
                    // right to left swipe
                     if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE  && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                         viewFlipper.setInAnimation(animFlipInPrevious);
                         viewFlipper.setOutAnimation(animFlipOutPrevious);
                         Globle.falg =false;
                    if (count != 2) {
                        if (count == 2) {
                            count = 0;
                        } else {
                            count = count + 1;
                        }
                        if (currentView == 0) {
                            viewFlipper.showNext();
                            currentView = 1;
                        } else if (currentView == 1) {
                            viewFlipper.showNext();
                            currentView = 2;
                        } else {
                            currentView = 0;
                            viewFlipper.showNext();
                        }
                    }
                    count = viewFlipper.getDisplayedChild();
                    } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE  && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                        viewFlipper.setInAnimation(animFlipInNext);
                        viewFlipper.setOutAnimation(animFlipOutNext);
                        Globle.falg =false;
                    if (count != 0) {
                        if (count == 0) {
                            count = 2;
                        } else {
                            count = count - 1;
                        }
                        if (currentView == 2) {
                            currentView = 1;
                            viewFlipper.showPrevious();
                        } else if (currentView == 1) {
                            currentView = 0;
                            viewFlipper.showPrevious();
                        } else {
                            currentView = 2;
                            viewFlipper.showPrevious();
                        }
                    }
                    count = viewFlipper.getDisplayedChild();
                }
                } catch (Exception e) {
                    // nothing
                }
                return false;
            }
        } 
```

如上面的代码，您可以更改视图，在我的情况下，这里有三个视图，但您只需要两个视图，因此更改计数值以上。跳这对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T07:47:13.430

```
public class Main extends Activity implements OnGestureListener {

    private GestureDetector gDetector;
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        gDetector = new GestureDetector(this);
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {
                return false;
            }
            // right to left swipe
            if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                ((ImageView) findViewById(R.id.image_place_holder))
                        .setImageResource(R.drawable.down);

            }
            // left to right swipe
            else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                ((ImageView) findViewById(R.id.image_place_holder))
                        .setImageResource(R.drawable.up);

            }
        } catch (Exception e) {

        }
        return false;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:57:05.700

看到这个链接它可能对你有帮助。

[手势检测器](http://developer.android.com/training/gestures/detector.html)

或者你必须在你的应用程序中使用 viewpager。

对于viewpager，以下链接将为您提供帮助

[查看寻呼机示例](http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/)

# java - 找不到适合 dbc:mysql://localhost:8080/kholofedb 的驱动程序

> ID：15830835
> 
> 赞同：0
> 
> 时间：2013-04-05T09:51:30.517
> 
> 标签：java, mysql, sql, jdbc, mysql-connector

我已经在整个互联网上搜索过这个问题......我是 JDBC 的初学者，但这里和其他网站提供的解决方案对我不起作用。

我`mysql-connector-java-5.1.18-bin.jar`在 Linux Mint 32 位上使用“”。我正在使用 Eclipse 3.8 ...我已经安装了 mySQL-server 并且它正在运行（我运行它使用：`sudo service mysql start`）...在运行时我收到此错误

```
connecting to psysical database...

java.sql.SQLException: No suitable driver found for dbc:mysql://localhost:8080/kholofedb
  at java.sql.DriverManager.getConnection(DriverManager.java:604)
  at java.sql.DriverManager.getConnection(DriverManager.java:221)
  at com.psybergate.database.SimbleCode.main(SimbleCode.java:21) 
```

这是我的源代码：

```
package com.psybergate.database;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;

public class SimbleCode 
{

    private static final String USER = "root" , PASS = "";

    public static void main(String ...args)
    {
        try {
            String connectionURL =       "dbc:mysql://localhost:8080/kholofedb";
               Class.forName("com.mysql.jdbc.Driver");
        //  Class.forName("org.postgresql.Driver");
            System.out.println("connecting to psysical database...");
            Connection conn = DriverManager.getConnection(connectionURL  , USER , PASS);

            Statement statement = conn.createStatement();
            System.out.println("Connection has been made");

            Scanner keyBoardScanner =  new Scanner(System.in);
            System.out.println("Enter table name:");
            String tableName = keyBoardScanner.nextLine();

            System.out.println("Creating table...");
            statement.executeQuery("create table " + tableName + " (name , age ,salary)");
            System.out.println("Table successfully created");
            System.out.println("Inserting data into the table ...");
            statement.executeUpdate("insert into " + tableName + "values (kholofelo , 21 , 9969696)");
        }
        catch (ClassNotFoundException | SQLException e) {

            e.printStackTrace();
        }

    }

} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:53:34.553

您的连接字符串应该是：

```
String connectionURL = "jdbc:mysql://localhost:8080/kholofedb"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:54:01.773

您的连接 URL 应以“jdbc:”而不是“dbc:”开头

# asp.net-mvc - 更改表之间的关系以简化 MVC3 中的数据访问

> ID：15830837
> 
> 赞同：0
> 
> 时间：2013-04-05T09:51:33.140
> 
> 标签：asp.net-mvc

带有实体框架的 Asp.net MVC3 应用程序。假设我有 3 张桌子；文章、类别和作者。

我使用代码优先导航属性在 Category.CategoryId -> Article.CategoryId 和 Author.AuthorId -> Article.AuthorId 之间创建关系

```
public virtual Category Category { get; set; }
public virtual Author Author { get; set; } 
```

这意味着当我查看文章列表时，我必须：

```
return View(db.Article
            .Include(c=>c.Category)
            .Include(a=>a.Author)
            .ToList()); 
```

为了访问类别和作者的名称，而不仅仅是他们的 id

打破这个经典模式而不在这些表之间创建关系会有多大的伤害？然后我可以从 ViewModel 中的 Author 和 Category 表中返回 SelectLists，并使用相应的名称而不是 id 直接填充我的 Article 表中的 Category 和 Author 字段，并保持数据完整性。我的查询将被简化为：

```
return View(db.Article.ToList()); 
```

我想我必须为这些字段创建索引以加快搜索速度。

这是在某个地方完成的还是完全错误的？它的性能更好还是更差？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:01:05.903

@Panos，您原来的方法是正确的，删除​​外键将是一个错误。使用包含您可以避免这种情况下的延迟加载，并且您可以获得良好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:12:43.407

```
public virtual Category Category { get; set; }
public virtual Author Author { get; set; } 
```

您将类别和作者定义为虚拟，这意味着如果您的查询中没有包含命令，这些对象将不会加载。您可以在网格中使用选择列表而不删除这些关系，因为如果查询中没有 Include 命令，这些关系就没有任何实际负载。

但请注意使用 .ToList() 这将加载您查询的所有记录，稍后它可能会变成大量数据。

# sql-server - 使用实体框架在 SQL 服务器中搜索和更新加密数据

> ID：15830839
> 
> 赞同：0
> 
> 时间：2013-04-05T09:51:38.670
> 
> 标签：sql-server, entity-framework, sql-server-2008-r2

我将 C# 4.0、VS 2010 MVC 3 和实体框架用于 Web 应用程序，并使用 SQL Server 2008R2 进行数据存储。我需要加密一个表中的三列 - 两列是文本列，一列是日期列，以更新它们并使用上述技术搜索这些列中的项目。

TDE 不是一个选项。

然而，在 SQL 服务器上执行所有加密功能似乎是最佳实践，尽管有很多关于如何加密列作为一次性练习的示例，但在加密后没有更新或搜索这些字段的内容。

除了将加密和解密移到应用程序中之外，我看不到其他方法。

非常欢迎所有指导、帮助、指示和提示。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:11:06.763

根据定义，您无法搜索加密数据。您可以搜索的是已知纯文本的哈希并处理可能的冲突。为此，您需要添加额外的列来保存被加密的纯文本的哈希值。有关更多详细信息和示例，请参阅[索引加密数据。](http://blogs.msdn.com/b/raulga/archive/2006/03/11/549754.aspx)

至于更新，我真的不明白问题是什么。您使用新的加密值更新加密值，就像任何其他更新一样。

TDE 在很大程度上是一个更好的选择。只是在说'。

# java - 无法通过反射调用方法

> ID：15830840
> 
> 赞同：2
> 
> 时间：2013-04-05T09:51:39.300
> 
> 标签：java, reflection, exception-handling

以下是我的方法，我尝试在 java 中使用反射调用该方法：

```
@PreAuthorize("isAuthenticated() and hasPermission(#request, 'CREATE_REQUISITION')")
    @RequestMapping(method = RequestMethod.POST, value = "/trade/createrequisition")
    public @ResponseBody
    void createRequisition(@RequestBody CreateRequisitionRO[] request,
            @RequestHeader("validateOnly") boolean validateOnly) {
        logger.debug("Starting createRequisition()...");
        for (int i = 0; i < request.length; i++) {
            CreateRequisitionRO requisitionRequest = request[i];

            // FIXME this has to be removed/moved
            requisitionRequest.setFundManager(requisitionRequest.getUserId());
            // FIXME might have to search using param level as well
            SystemDefault sysDefault = dbFuncs.references.systemDefault
                    .findByCompanyAndDivisionAndPortfolio(
                            userContext.getCompany(),
                            userContext.getDivision(),
                            requisitionRequest.getPortfolio());
            requisitionRequest.setCustodianN(sysDefault.getCustodianN());

            gateKeeper.route(requisitionRequest);
        }
    } 
```

我创建反射的方式：

```
public static void main(String[] args) {
        Class[] paramString = new Class[1]; 
        paramString[0] = String.class;

        //Object parameter
        Class[] parames = new Class[1]; 
        parames[0] = CreateRequisitionRO.class;

        Class booleanVal ;  
        booleanVal = Boolean.class;

        Class cls;
        CreateRequisitionRO[] request = new CreateRequisitionRO[10];
        try {
            //load the HexgenWebAPI at runtime
            cls = Class.forName("com.hexgen.api.facade.HexgenWebAPI");
            Object obj = cls.newInstance();

            Method method = cls.getDeclaredMethod("createRequisition", parames,booleanVal);
            method.invoke(obj, request,true);

        }catch(Exception ex){
            ex.printStackTrace();
        }

    } 
```

我得到以下异常：

```
The method getDeclaredMethod(String, Class...) in the type Class is not applicable for the arguments (String, Class[], Class) 
```

在以下行

Method method = cls.getDeclaredMethod("createRequisition", parames,booleanVal);

我理解异常，但我的方法参数是对象数组。如果我删除数组而不是得到`NoSuchMethod Exception`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:59:50.050

您需要传递数组的一个类`CreateRequisitionRO`，而不是类的数组：替换这个

```
Class[] parames = new Class[1]; 
parames[0] = CreateRequisitionRO.class; 
```

有了这个：

```
Class parames = CreateRequisitionRO[].class; 
```

另外，由于第二个参数是`boolean`, not `Boolean`，所以需要替换

```
booleanVal = Boolean.class; // The class of the wrapper Boolean 
```

和

```
booleanVal = Boolean.TYPE;  // The class of the primitive boolean 
```

# css - 字体间歇性无法加载？

> ID：15830843
> 
> 赞同：3
> 
> 时间：2013-04-05T09:51:46.413
> 
> 标签：css, browser, font-face, webfonts

这是一个非常令人沮丧的错误！

我正在使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)（本地托管）和其他几种字体，它们间歇性地无法加载——不是 404，只是完全没有出现在开发者工具的“网络”选项卡中，也没有在页面上呈现。

它似乎最常发生在第一次加载页面时 - 刷新字体然后加载/渲染 OK。但是，清除浏览器缓存并不能可靠地重现该问题。

我知道路径没问题，因为大约 80% 的时间字体呈现正常。这是一个间歇性问题。我在 OSX 上使用 Chrome v26。

我的 CSS 看起来像这样：

```
<head>
... 
<link rel="stylesheet" type="text/css" href="${context}/resources/font/opensans.css" />
<link rel="stylesheet" type="text/css" href="${context}/resources/css/font-awesome.min.css" />
... 
```

CSS 文件如下所示：

```
@font-face {
font-family: 'open_sanslight';
src: url('opensans-light-webfont.eot');
src: url('opensans-light-webfont.eot?#iefix') format('embedded-opentype'),
     url('opensans-light-webfont.woff') format('woff'),
     url('opensans-light-webfont.ttf') format('truetype'),
     url('opensans-light-webfont.svg#open_sanslight') format('svg');
font-weight: normal;
font-style: normal; 
```

}

再一次，路径是正确的（正如字体在大约 80% 的时间内正确渲染的事实所证明的那样）。

可能会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:35:22.670

这里同样的问题。似乎只影响 Chrome。Chromium 中的这个错误似乎描述了相同的问题（或非常相似的问题）：

[https://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=font&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified&groupby= &sort=-修改&id=229071](https://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=font&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified&groupby=&sort=-modified&id=229071)

我们目前假设它是一个浏览器错误，尽管它似乎只影响我们的一些网站，而不影响其他网站，所以可能不止于此。

以下是我们尝试但没有成功的一些事情：

*   从引导 CDN 而不是我们自己的服务器加载字体 (FontAwesome)。仍然间歇性地失败。
*   将字体文件内联为 base64 编码字符串。仍然间歇性地失败。
*   从 FontAwesome 切换到 SymbolSet。仍然间歇性地失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:21:09.997

可能有许多问题导致观察到的行为。根据您对问题的描述，目前尚不清楚发生了什么。

我建议尝试使用[WebPagetest](http://webpagetest.org)重现问题。勾选录制视频的选项，这样您就可以看到绘画的时间。WPT 能够准确地模拟首次观看体验，因此这将是一个很好的起点。

# c# - 在列表框中使用 SelectionChanged 取消选择项目时遇到问题

> ID：15830846
> 
> 赞同：2
> 
> 时间：2013-04-05T09:51:53.983
> 
> 标签：c#, wpf, listbox, selection

我有两个相邻的 ListBox。在 XAML 文件中，它看起来像这样：

```
<ListBox Name="first_box" ItemsSource="{Binding Path=Firstlist}"  
    DisplayMemberPath="name" SelectionMode="Single" 
    SelectionChanged="Firstlist_SelectionChanged"/>
<ListBox Name="second_box" ItemsSource="{Binding Path=SecondList}"  
    DisplayMemberPath="name" SelectionMode="Single" 
    SelectionChanged="Secondlist_SelectionChanged"/> 
```

我想要做的是，当一个 ListBox 中的一个项目被选中时，另一个 ListBox 应该失去它的选择。但我认为失去该选择会`SelectionChanged`再次触发，从而删除另一个列表框中的选择，等等......

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:53:57.510

一种解决方案是测试所选项目是否为空：

```
Firstlist_SelectionChanged(object o, EventArgs e)
{
    if(first_box.SelectedItem != null)
    {
        second_box.SelectedItem = null;
    }
}

Secondlist_SelectionChanged(object o, EventArgs e)
{
    if(second_box.SelectedItem != null)
    {
        first_box.SelectedItem = null;
    }
} 
```

初始情况：

```
Box1 => Item1
Box2 => null 
```

单击 Box2 中的项目

```
Box1 => Item1
Box2 => Item2 => Event fire 
```

Box2 是否为空？不，所以将 Box1 设置为 null

```
Box1 => null => Event fire
Box2 => Item2 
```

Box1 是否为空？是的，没有动作。
最终情况：

```
Box1 => null
Box2 => Item2 
```

# typescript - Typescript 声明文件不包含其他声明文件引用

> ID：15830855
> 
> 赞同：2
> 
> 时间：2013-04-05T09:52:30.197
> 
> 标签：typescript

我构建了一个 TypeScript 库，它是我的应用程序的“核心”（称为 Core.ts），它使用内部模块和每个文件的单个类方法编译为单个输出文件（Core.js）。我`--declaration`在编译器中添加了标志，它会生成声明文件（Core.d.ts）。问题是，这个生成的声明文件不包含对最初包含在编译中的其他声明文件的引用。一旦我将生成的 Core.d.ts 添加到我的项目中，我会从该文件中收到关于 undefined `JQuery`、等的1k 错误。`Backbone`

我将评论标志设置为 true，它在 Core.js 中生成了评论和引用，但为了 Core.d.ts 将它们全部剥离了

如果我查看从“绝对类型”中获取的其他定义文件，其中一些确实包含对其他定义文件的引用，所以这似乎是一个错误，尽管注释标志设置为 true，但编译器正在剥离它们。

请指教。

似乎遇到过这个问题，但从未调查过：

[https://typescript.codeplex.com/discussions/434018](https://typescript.codeplex.com/discussions/434018)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:03:22.210

听起来您希望`Core.d.ts`包含来自的定义`jquery.d.ts`，`backbone.d.ts`但我认为从概念上讲 TypeScript 编译器希望您引用所有三个：

```
///<reference path="jquery.d.ts" />
///<reference path="backbone.d.ts" />
///<reference path="Core.d.ts" /> 
```

一个典型的例子是 jQuery 插件 - 每个定义文件都包含插件的定义，但不包含 jQuery，因此您需要同时引用`jquery.d.ts`和`jquery.someplugin.d.ts`.

**更新**

实际上-我认为您只是希望将参考评论包含在其中`Core.d.ts`-这更有意义。我将评论您链接到的 CodePlex 上的错误，也许它会唤醒讨论！

# python - 如何通过使用另一个数组的元素作为名称在 Python 中创建一个数组

> ID：15830860
> 
> 赞同：0
> 
> 时间：2013-04-05T09:52:41.693
> 
> 标签：python, list

我正在尝试在 python 中执行以下操作：我有一个包含一些字符串值的列表。该列表如下所示：

```
 parameters =  ['RH', 'WindSp_Avg', 'WindDir'] 
```

我想做的——我真的希望这个问题不是荒谬的——是创建三个列表，每个列表都有“参数”列表的名称。例如：

```
 RH = []
         WindSp_Avg = []
         WindDir = [] 
```

我是 python 新手，虽然我在网上搜索了一下，但找不到一些优雅的方法来做这样的事情。

我正在尝试这样的事情：

```
 for i in parameters:

        parameters[0] = [] 
```

但这似乎不起作用。有什么建议么？

谢谢迪米特里斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T09:56:25.443

您正在尝试做的事情非常不安全，并且违反了所有良好做法。简单地创建字典有问题吗？

```
myVars = {}
for param in parameters:
    myVars[param] = [] 
```

**警告**以下代码用于教育目的！不要在真实代码中使用它！

您可以做一个硬破解来动态地将变量添加到函数内的局部变量中。通常`locals()`表示所有局部变量。然而，简单地添加到该字典并不能解决问题。有一个 hack 可以强制 Python 使用 重新评估本地人`exec`，例如：

```
def test():
    for param im parameters:
        locals()[param] = []
    exec ""
    print WindSp_Avg 
```

结果：

```
>>> test()
[] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:06:03.317

```
parameters = ['RH', 'WindSp_Avg', 'WindDir']
for i in parameters:
    vars()[i] = [];
print locals() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:04:10.803

要创建变量，您可以这样做：

```
parameters =  ['RH', 'WindSp_Avg', 'WindDir']
for i in parameters:
    exec("%s = []" % i);

print vars() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T10:09:12.147

你可以这样：

```
code = "{0} = []"
for i in parameters:
    codeobj = compile(code.format(i), "/dev/null", "single")
    eval(codeobj) 
```

但我认为这很不安全。因为它可能是参数中的某些内容，并且将由 eval 执行。因此，请仅在真正必要且安全性不太重要时才使用它。

# silverlight - 在没有访问 Application_Startup 的情况下访问 silverlight 中的参数

> ID：15830861
> 
> 赞同：0
> 
> 时间：2013-04-05T09:52:42.067
> 
> 标签：silverlight, parameters, startup

我目前正在尝试通过 url 参数将参数发送到 silverlight webapplication。

当您自己编写整个应用程序并可以访问 StartupEvent 时，这相对简单。

在这种特殊情况下，我只是为现有的 silverlight 应用程序编写了一个插件，并且无法访问`Application_Startup`和`StartupEvent`.

是否可以捕获 ASPX 文件中的 URL 参数并使它们可供应用程序内的对象/类（我的插件）访问？

谢谢，-Helge

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:58:34.107

如果您唯一的问题是访问您的 url 以获取您的参数，那么您不需要访问 Application_Startup。您可以使用以下代码获取当前网址：

```
//get input url
_inputUrl = HtmlPage.Document.DocumentUri.Query; 
```

然后你可以解析你的输入 url 来获取你的参数。

希望能帮助到你。

# .net - 从 RavenDB 索引中的集合中检索特定类型的项目总和

> ID：15830865
> 
> 赞同：1
> 
> 时间：2013-04-05T09:52:48.230
> 
> 标签：.net, mapreduce, ravendb

我正在尝试创建一个具有与下图类似的类和索引定义的索引：

```
public class Foo
{
    public string Tag { get; set; }
    public List<Bar> Bars { get; set; }
}

public abstract class Bar
{
    public int Weight { get; set; }
}

public class IronBar : Bar { }

public class ChocolateBar : Bar { }

public class TagSummary
{
    public string Tag { get; set; }
    public int Count { get; set; }
    public int TotalChocolateBarWeight { get; set; }
    public int TotalIronBarWeight { get; set; }
}

public class TagSummaryIndex : AbstractIndexCreationTask<Foo, TagSummary>
{
    public TagSummaryIndex()
    {
        Map = foos => from f in foos
                      select new
                      {
                          Tag = f.Tag,
                          Count = 1,
                          TotalChocolateBarWeight = f.Bars.OfType<ChocolateBar>().Sum(x=> x.Weight),
                          TotalIronBarWeight = f.Bars.OfType<IronBar>().Sum(x=> x.Weight)
                      };

        Reduce = results => from r in results
                            group r by r.Tag into g
                            select new
                            {
                                Tag = g.Key,
                                Count = g.Sum(x => x.Count),
                                TotalChocolateBarWeight = g.Sum(x => x.TotalChocolateBarWeight),
                                TotalIronBarWeight = g.Sum(x => x.TotalIronBarWeight)
                            };
    }
} 
```

但是，当我尝试创建索引时

```
IndexCreation.CreateIndexes(this.GetType().Assembly, _documentStore); 
```

它抛出一个 InvalidOperationException。如果我从中删除`.OfType<T>()`零件，`Map` 那么一切都很好（但不是我想要的）。我尝试过使用`Where(x => x is ChocolateBar)`和其他各种类型检查选项，但无济于事。

我将如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:48:14.953

可能您可以做的最简单的事情是向您的类添加一些预先计算小计的属性。

```
public class Foo
{
    public string Tag { get; set; }
    public List<Bar> Bars { get; set; }
    public int ChocolateBarsWeight
    {
        get
        {
            return Bars.OfType<ChocolateBar>().Sum(x => x.Weight);
        }
    }
    public int IronBarsWeight
    {
        get
        {
            return Bars.OfType<IronBar>().Sum(x => x.Weight);
        }
    }
} 
```

然后在索引图中使用这些值：

```
TotalChocolateBarWeight = f.ChocolateBarsWeight,
TotalIronBarWeight = f.IronBarsWeight 
```

但是，我倾向于同意`.OfType<T>()`在这种情况下应该有效，但事实并非如此。原因是每个条的类型信息被序列化为`$type`json 中的值。每当您存储抽象基类型或接口时，都会发生这种情况。例如：

```
{
    "Tag": "A",
    "Bars": [
        {
            "$type": "YourNameSpace.ChocolateBar, YourNameSpace",
            "Weight": 10
        },
        {
            "$type": "YourNameSpace.IronBar, YourNameSpace",
            "Weight": 1000
        }
    ]
} 
```

乌鸦应该能够接受并妥善处理`.OfType<T>()`。我会在他们的下一个主要版本中推荐它。

# php - select only one attribute from php multidimensional array?

> ID：15830873
> 
> 赞同：1
> 
> 时间：2013-04-05T09:52:57.273
> 
> 标签：php, arrays, select, multidimensional-array

Supposedly I have an array like this:

```
$shop = array( array("name"=>"Tom", "level"=> 1.25 ),
               array("name"=>"Mike","level"=> 0.75 ),
               array("name"=>"John","level"=> 1.15 ) 
             ); 
```

How do I make an array with all name values and the keys being the position of theri original array. I know I could iterate through, and put in another array, but are there any functions?

Sorry if I was confusing. My desired output would be:

```
array(0=>"Tom",1=>"Mike",2=>"John"); 
```

So basicaly what select does in sql.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T10:06:37.610

从 PHP 5.3.0 开始，你可以使用这个：

```
$result = array_map(
    function($x) {
        return $x['name'];
    }, $shop);

print_r($result); 
```

在 5.3.0 之前，您可以使用[create_function](http://php.net/manual/pl/function.create-function.php)进行回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-30T11:21:51.920

从 php 5.5 开始，您可以使用

```
$names = array_column($shop, 'name'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:06:13.587

```
$shop = array( array("name"=>"Tom", "level"=> 1.25 ),
               array("name"=>"Mike","level"=> 0.75 ),
               array("name"=>"John","level"=> 1.15 ) 
             );
$newArr = array();

foreach($shop as $key=>$val){
$newArr[$key] = $val['name'];
}
print_r($newArr); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-05T10:04:12.870

你可以用`foreach`

```
<?php

$shop = array( array("name"=>"Tom", "level"=> 1.25 ),
               array("name"=>"Mike","level"=> 0.75 ),
               array("name"=>"John","level"=> 1.15 ) 
             ); 

$newar = array();
foreach($shop as $subarr){
    $newar[] = $subarr['name'];
}

print_r($newar);

?> 
```

# java - 实例变量初始化器的排序

> ID：15830880
> 
> 赞同：9
> 
> 时间：2013-04-05T09:53:24.837
> 
> 标签：java, initialization

看起来很直观，在 Java 中，[实例变量初始化程序](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2)是按照它们在类声明中出现的顺序执行的。

在我使用的 JDK 中，这肯定是这种情况。例如，以下内容：

```
public class Clazz {
    int x = 42;
    int y = this.z;
    int z = this.x;
    void print() {
        System.out.printf("%d %d %d\n", x, y, z);
    }
    public static void main(String[] args) {
        new Clazz().print();
    }
} 
```

打印`42 0 42`（换句话说，`y`获取 的默认值`z`）。

这种订购真的有保证吗？我一直在查看 JLS，但找不到任何明确的确认。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T10:05:44.837

是的。

[se7 JLS 涵盖了12.5 执行](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)部分中的实例变量初始化顺序：

> ...
> 4\. 执行该类的实例初始化器和实例变量初始化器，将实例变量初始化器的值分配给相应的实例变量，按照它们在源代码中以文本形式出现的从左到右的顺序. 如果执行这些初始化程序中的任何一个导致异常，则不会处理更多初始化程序，并且此过程会突然完成相同的异常。否则，继续第 5 步。
> ...

[JLS for Java 5](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.7)在“类”部分中提到：

> 静态初始化程序和类变量初始化程序按文本顺序执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:12:40.070

是的，类中的变量初始化以相同的顺序执行。因此，在您的第二行中，y 采用 z 的默认值 o，因为 z 未初始化

# regex - 带有 6 个小数和 3 个数字的浮点正则表达式

> ID：15830882
> 
> 赞同：1
> 
> 时间：2013-04-05T09:53:26.617
> 
> 标签：regex, floating-point, decimal

我需要一个正则表达式来表示浮点数的正数或负数，小数点分隔符前最多 3 个数字，之后最多 6 个（只有 6 个）数字。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:59:52.827

在 JavaScript 中 - 这将符合您的要求。但如果没有进一步的澄清，就没有什么可做的了：

```
/[+|-][0-9]{0,3}\.[0-9]{6}/g 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:58:36.663

这是 Perl 正则表达式的味道。

对于 java 脚本：`/[+|-]\d{1,3}\.\d{6}/`

对于 java : `"[+|-]\\d{1,3}\.\\d{6}"`/* 在 java.util.regex 中使用模式和匹配器。*/

# jquery - 形成不同的提交动作

> ID：15830885
> 
> 赞同：0
> 
> 时间：2013-04-05T09:53:29.553
> 
> 标签：jquery, ruby-on-rails, submit

我有一个显示报告的表格，但我需要 3 个功能，即`print to pdf`,`print to excel`和还通过 html 本身显示预览`js`

这是仅对`pdf`and`excel`和 and 都适用的第一个条件。

**控制器：**

```
respond_to do |format|
  if params[:print]
    format.html { redirect_to :action => "report", :format => "pdf", :start_period => params[:start_period], :end_period => params[:end_period], :warehouse => params[:warehouse] }
  elsif params[:excel]
    format.html { redirect_to :action => "report", :format => "xls", :start_period => params[:start_period], :end_period => params[:end_period], :warehouse => params[:warehouse] }
  else
    format.html
  end
end 
```

**看法：**

```
<%= form_tag(models_path, :method => "get") do %>
  <%= submit_tag "#{t 'pdf'}", :name => "print" %>
  <%= submit_tag "#{t 'excel'}", :name => "excel" %>
<% end %> 
```

但是当我开始通过添加预览功能时`js`，它不是错误，而是两个提交按钮（pdf n excel）都**指向 js**。

**新控制器**

```
respond_to do |format|
  if params[:print]
    format.html { redirect_to :action => "report", :format => "pdf", :start_period => params[:start_period], :end_period => params[:end_period], :warehouse => params[:warehouse] }
  elsif params[:excel]
    format.html { redirect_to :action => "report", :format => "xls", :start_period => params[:start_period], :end_period => params[:end_period], :warehouse => params[:warehouse] }
  else
    format.html
    format.js # NEW LINE
  end
end 
```

**新观点**

```
<%= form_tag(models_path, :method => "get", :id => "headers_search") do %>
  <%= submit_tag "#{t 'ep.submit'}", :name => nil, :remote => true %>
  <%= submit_tag "#{t 'pdf'}", :name => "print" %>
  <%= submit_tag "#{t 'excel'}", :name => "excel" %>
<%= end %> 
```

`headers_search`指向**application.js**

```
$.fn.ajaxFilter = function() {
  this.submit(function() {
    $.get(this.action, $(this).serialize(), null, "script");
  return false;
  });
}

$("#headers_search").ajaxFilter(); 
```

所以，我对我做错的地方感到困惑..我有点像rails新手。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:01:04.873

尝试

```
if params[:name] == "print" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:01:46.720

jquery`seralize()`方法不序列化提交按钮。[请参阅Jquery-Serialize](http://api.jquery.com/serialize/)上的文档。这意味着当您通过 jquery 提交表单时，不包含任何提交按钮。

您需要编辑 jquery 提交以包括单击哪个按钮以使您的代码正常工作。

请参阅问题的答案 - [jQuery：如何获取表单提交时单击了哪个按钮？](https://stackoverflow.com/questions/5721724/jquery-how-to-get-which-button-was-clicked-upon-form-submission)关于如何确定按下了哪个按钮。

# java - 尝试获取嵌套 bean 属性时出现 NoSuchMethodException

> ID：15830901
> 
> 赞同：0
> 
> 时间：2013-04-05T09:54:11.207
> 
> 标签：java, nosuchmethoderror, apache-commons-beanutils

我有一个产品类：

```
public class Product {

private ProductClass prodClass;

public ProductClass getProdClass() {
    return prodClass;
}

public void setProdClass(ProductClass prodClass) {
    this.prodClass = prodClass;
}
} 
```

还有一个 ProductClass ...

```
public class ProductClass {

private String StbFlag;

public String getStbFlag() {
    return StbFlag;
}

public void setStbFlag(String stbFlag) {
    StbFlag = stbFlag;
}
} 
```

当我尝试使用 BeanUtils.getNestedProperty 获取属性时，如下所示..

```
public class Test {

public static void main(String Args[]) {

    Product product = new Product();
    ProductClass proClass = new ProductClass();
    proClass.setStbFlag("abcd");
    product.setProdClass(proClass);

    try {
        String value = BeanUtils.getNestedProperty(product, "prodClass.StbFlag");
        System.out.println(value);
    } catch (Exception e) {
        e.printStackTrace();  
    }
}
} 
```

它抛出以下异常......

```
java.lang.NoSuchMethodException: Unknown property 'StbFlag' on class 'class ProductClass'
    at org.apache.commons.beanutils.PropertyUtilsBean.getSimpleProperty(PropertyUtilsBean.java:1313)
    at org.apache.commons.beanutils.PropertyUtilsBean.getNestedProperty(PropertyUtilsBean.java:762)
    at org.apache.commons.beanutils.BeanUtilsBean.getNestedProperty(BeanUtilsBean.java:715)
    at org.apache.commons.beanutils.BeanUtils.getNestedProperty(BeanUtils.java:354)
    at Test.main(Test.java:15)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:90) 
```

可能是什么原因？这只是我用来找出问题的一个示例。我实际上正在将 XML 映射到 Java 对象，并且需要根据 xml 标记将名称保留为 StbFlag。

当我使用 STBflag 或 stbFlag 作为变量名时，它工作正常。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:29:21.207

BeanUtils 要求您的字段名称以小写字母开头，因为它遵循 JavaBean 命名约定。

在[JavaBeans 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)的第 8.8 节中：

> Java 程序员习惯于让普通标识符以小写字母开头。审稿人的积极意见使我们相信我们应该遵循同样的属性和事件名称的常规规则。
> 
> 因此，当我们从现有 Java 名称的中间提取属性或事件名称时，我们通常将第一个字符转换为小写。然而，为了支持偶尔使用所有大写名称，我们检查名称的前两个字符是否都是大写的，如果是，则不处理。例如，“FooBah”变成“fooBah”，“Z”变成“z”，“URL”变成“URL”</p>
> 
> 我们提供了一个方法 Introspector.decapitalize 来实现这个转换规则

也就是说，将您的代码更改为此将修复它：

```
String value = BeanUtils.getNestedProperty(product, "prodClass.stbFlag"); 
```

如果您`"StbFlag"`从 XML 文件中获取字符串，我建议使用`decapitalize`BeanUtils 用来将其转换为正确格式的相同方法。

```
Introspector.decapitalize("StbFlag") 
```

结果将返回`"stbFlag"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:04:13.013

```
public class ProductClass {

private String StbFlag;

public String getStbFlag() {
    return StbFlag;
}

public void setStbFlag(String stbFlag) {
    this.StbFlag = stbFlag;//error here write this get anwser
}
} 
```

写这段代码 anwser 来了

# android - 如何在清单中设置活动

> ID：15830902
> 
> 赞同：1
> 
> 时间：2013-04-05T09:54:11.780
> 
> 标签：android, android-manifest

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".precus"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.yair.guessit.PRECUS" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="Customize"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="FirstPage"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.yair.guessit.MAINACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

这是我的清单，应用程序打不开。有人可以解释一下如何使用所有活动设置清单吗？当应用程序打开时，precus 是目前第一个打开的。在 precus 活动中，有一个意图是，当单击按钮时，它的自定义活动。为什么它不工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:03:34.133

更改文件中的这一行

```
<action android:name="com.yair.guessit.PRECUS" /> 
```

到

```
<action android:name="android.intent.action.MAIN"/> 
```

然后运行它。

如果它工作正常。然后将其标记为已接受的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:13:24.557

您的应用程序有所有带有意图过滤器的活动。**主要**......只让一个拥有这个过滤器，在其他人 - 只需删除意图过滤器，如......

```
<activity
    android:name="FirstPage"
    android:label="@string/app_name"
    android:screenOrientation="portrait" >
</activity> 
```

# ios - uiscrollview's unusual contentsize property

> ID：15830909
> 
> 赞同：0
> 
> 时间：2013-04-05T09:54:29.063
> 
> 标签：ios, objective-c, uiscrollview

I am quite new to iOS application development.

I was working with `UIScrollView` and found very strange behavior. Hope somebody could explain this to me.

I tried the two methods and found the outputs different.

1). `UIScrollView` is added to my `view` in the Interface Builder, and a `view (UIView)` is also added to the `scrollview` earlier. I set the view's bounds manually in the IB, and set the `scrollview`'s `content size` in the class file.

**Observation :** The `scrollview` doesn't `scroll` with the `setcontentsize`, rather takes some unusual `content size`, independent of anything else, even its own bounds.

2). The same `UIScrollView` is again added in the Interface Builder, but the `view` is added this time programmatically.

**Observation :** This time everything works out quite good.

I don't understand what could have gone wrong.

Can anyone explain and elaborate

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:01:11.127

我不确定您的问题到底是什么，但是如果您希望能够在 IB 中向 UIScrollView 添加视图，请创建一个 UIScrollView 子类并执行以下操作：

```
- (void)awakeFromNib
{
    [super awakeFromNib];

    CGRect bounds = CGRectZero;

    for (UIView* view in self.subviews)
    {
        bounds = CGRectUnion(bounds, view.frame);
    }

    [self setContentSize:bounds.size];
} 
```

# c++ - LAPACK 矩阵乘法与 C++

> ID：15830913
> 
> 赞同：3
> 
> 时间：2013-04-05T09:54:46.983
> 
> 标签：c++, linear-algebra, blas

我对 C++ 相当陌生，并尝试使用 LAPACK 库进行矩阵乘法。我尝试运行下面给出的例程 dgemm。我期待输出 A*B。但每次我得到答案 B*A。是例行程序的工作方式还是我的代码有什么问题。

我的代码：

```
#include "stdafx.h"
#include<iostream>

using namespace std;

extern "C" void dgemm_(const char *TRANSA, const char *TRANSB, const int *M, const int *N, const int *K, double *ALPHA, double *A, const int *LDA, double *B, const int *LDB, double *BETA, double *C, const int *LDC);

int main(void)
{
    double A[4] = {1,2,3,4};
    double B[4] = {5,6,7,8};
    char TRANS = 'N';
    int M = 2;
    int N = 2;
    int K = 2;
    double ALPHA = 1.0;
    int LDA = 2;
    int LDB = 2;
    double BETA = 0.0;
    double C[4];
    int LDC = 2;

    dgemm_(&TRANS, &TRANS, &M, &N, &K, &ALPHA, A, &LDA, B, &LDB, &BETA, C, &LDC);

    cout << C[0] << endl;
    cout << C[1] << endl;
    cout << C[2] << endl;
    cout << C[3] << endl;
    getchar();
    return 0;
} 
```

任何输入都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:10:44.613

我没有研究您对 dgemm 的调用的详细信息，我无法判断您是如何解释结果矩阵的。但您似乎很可能在某处混淆了 col major 和 row major 的解释。计算很可能使用 col 专业，但您假设行专业。

# android - PRIMARY KEY 必须是呼叫更新时的唯一例外

> ID：15830915
> 
> 赞同：1
> 
> 时间：2013-04-05T09:54:48.977
> 
> 标签：android, sqlite

当我尝试更新 ma 表时出现异常：

这是导致崩溃的行：

```
rowsAffected = mDatabase.update(ApplicationDatabase.CHANNELS_TABLE_NAME, values, Channel.DATABASE_KEY_EPG_ID + " = ?", new String[] { values.getAsString(Channel.DATABASE_KEY_EPG_ID) }); 
```

这是我创建表的方式：

```
private static final String CHANNELS_TABLE_CREATE =
            "CREATE TABLE " + CHANNELS_TABLE_NAME + " (" +
            BaseColumns._ID + " INTEGER NOT NULL PRIMARY KEY, " +
            Channel.DATABASE_KEY_KIND + " TEXT, " +
            Channel.DATABASE_KEY_INDEX + " INTEGER, " +
            Channel.DATABASE_KEY_NAME + " TEXT, " +
            Channel.DATABASE_KEY_EPG_ID + " TEXT, " +
            Channel.DATABASE_KEY_HASHTAG + " TEXT, " +
            Channel.DATABASE_KEY_IMAGE_URL + " TEXT, " +
            Channel.DATABASE_KEY_LOGO_IMAGE_URL + " TEXT, " +
            Channel.DATABASE_KEY_LIVE_THUMBNAILS + " INTEGER, " +
            Channel.DATABASE_KEY_BLENDED_TV + " INTEGER, " +
            Channel.DATABASE_KEY_FAVORITE + " INTEGER);"; 
```

日志猫：

```
04-05 10:45:27.348: E/AndroidRuntime(18041): FATAL EXCEPTION: Thread-51422
04-05 10:45:27.348: E/AndroidRuntime(18041): android.database.sqlite.SQLiteConstraintException: PRIMARY KEY must be unique (code 19)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at android.database.sqlite.SQLiteConnection.nativeExecuteForChangedRowCount(Native Method)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at android.database.sqlite.SQLiteConnection.executeForChangedRowCount(SQLiteConnection.java:883)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at android.database.sqlite.SQLiteSession.executeForChangedRowCount(SQLiteSession.java:754)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:64)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at android.database.sqlite.SQLiteDatabase.updateWithOnConflict(SQLiteDatabase.java:1565)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at android.database.sqlite.SQLiteDatabase.update(SQLiteDatabase.java:1514)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at com.orange.programmetv.fr.providers.ChannelsProvider.update(ChannelsProvider.java:109)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at android.content.ContentProvider$Transport.update(ContentProvider.java:235)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at android.content.ContentResolver.update(ContentResolver.java:992)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at com.orange.programmetv.fr.services.ApplicationService.parseChannel(ApplicationService.java:354)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at com.orange.programmetv.fr.services.ApplicationService.parseChannels(ApplicationService.java:339)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at com.orange.programmetv.fr.services.ApplicationService.access$5(ApplicationService.java:327)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at com.orange.programmetv.fr.services.ApplicationService$1.work(ApplicationService.java:321)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at com.orange.programmetv.fr.services.ApplicationService$Request.run(ApplicationService.java:240)
04-05 10:45:27.348: E/AndroidRuntime(18041):    at java.lang.Thread.run(Thread.java:856) 
```

我不明白为什么我得到 PRIMARY KEY 必须是唯一的例外？我不是在做插入，而是在做更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:09:00.283

在您的更新中，您将（在`values`_ID 中）设置为已被另一行使用的值。

不要更新值中的 _ID。

## 编辑

或者，您的 where 子句匹配多于 1 行并且值包含 _ID。发生子句冲突是因为您将相同的 _id 设置为几行，这是主键的性质所禁止的。

# jquery - jQuery 每个元素，但只有第一父母？

> ID：15830916
> 
> 赞同：2
> 
> 时间：2013-04-05T09:54:50.313
> 
> 标签：jquery, each

有没有办法只选择div中的顶级父母？

我的结构：

```
<div class="topParent">
    +<div class="child">
        -<div class="child">
            -<div class="child"></div>
        </div>
    </div>

    +<div class="child"></div>
</div> 
```

我添加了 + 和 - 符号来表明我想要得到什么。我正在使用`$('.topParent').find('.child').each(function() { .. } );`迭代，但我在循环中选择了所有 .child 元素。

有没有办法只选择顶部的 .child 元素，然后遍历它们并计算特定 div 有多少其他 .child 元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:56:06.373

```
$('.topParent > .child').each(function() {...}); 
```

只选直子！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T09:58:35.923

```
$('.topParent').children('.child').each(function() { .. } ); 
```

# javascript - 从 asp.mvc 应用程序迁移到 node.js 应用程序，专注于设计

> ID：15830917
> 
> 赞同：1
> 
> 时间：2013-04-05T09:55:01.257
> 
> 标签：javascript, node.js, unit-testing, unit-of-work, sequelize.js

我目前正在寻找将现有应用程序迁移到的替代平台，它最初是使用 asp.mvc 的原型，但大多数代码是带有简单 asp mvc Web 服务的 javascript，因此我们正在考虑将其向前推进，这似乎是明智的我们只是废弃了当前的 microsoft 堆栈，转而使用 nodejs，这让我们可以更自由地在何处以及如何托管我们的应用程序，而且我们可以在 Web 服务和前端中重用一些模型和代码，尽管这可能会结束最多是少量。

这可能是一个包含许多部分的相当大的问题，但无论如何我都会把它放在那里，因为我相信这可能对许多其他人了解他们如何从 .net/java 之类的东西迁移到 node.js 有所帮助. 由于这些静态类型语言中的大多数都使用了许多模式和实践，例如控制反转、工作单元、面向方面编程等，因此转向另一个似乎不需要太多结构的平台似乎有点奇怪领域...所以我对从我的超级结构化和测试的世界迁移到这个看似非结构化和动态的新世界有些担忧。

所以这是我在 MVC 中要做的主要事情，并且目前想在 node.js 中做，但我不太确定实现相同级别的分离或功能的最佳方法。

* * *

## 路由到操作

ASP MVC 中的这种机制似乎可以被 node.js 中的 Express 替换，这将使我具有将路由映射到方法的相同能力。但是有几个问题：

*   在 ASP MVC 中，我的控制器可以进行依赖注入并具有变量，因此操作很容易测试，因为它们所依赖的所有内容都可以在需要时进行模拟并通过构造函数传入。但是，由于 express 中的方法似乎没有包含范围，因此我似乎必须使用全局变量或在内部更新变量。有没有一种*很好的*方法可以在这些路由方法中访问我的业务逻辑容器？

*   有没有办法自动绑定正在发送的模型？或者至少以某种有用的方式获取 json/xml 等？看来，如果您发送带有内容的正确 mime 类型，它可以被提取，但我没有在网上看到任何明确的例子。我很高兴在 Express 之上使用其他框架来提供此功能，因为理想情况下，我只想发出 POST 请求`/user/1`并拉出用户对象并更新数据库中 id 为 1 的用户（我们将讨论不久）。

*   验证正在发送的数据的最佳方法是什么？目前在我们的前端 javascript 应用程序中，我们使用 KnockoutJS，所有模型都使用敲除 observables，并使用 Knockout.Validation 进行验证。我很高兴在节点上使用 Knockout Validation，因为模型是前端和后端之间的合同，但是如果有更好的解决方案，我很乐意去研究它。

## 数据库交互

目前在 .net 领域，我们使用 NHibernate 与我们的关系数据库进行通信，并使用 MongoDB 驱动程序与我们的 MongoDB 数据库进行通信。我们使用通用存储库模式并将查询隔离到它们自己的类中。我们还大量使用了工作单元模式，因此我们可以将单词的逻辑块包装到事务中，然后如果顺利则全部提交，如果不顺利则回滚。这使我们能够根据我们想要测试的内容在几乎任何级别模拟我们的对象，也让我们可以轻松地更改我们的实现。所以这是我的担忧：

*   Sequalize 似乎很适合替换 NHibernate，但是它似乎没有任何类型的事务处理，因此很难制作一个工作单元模式。如果不能以相同的方式完成，这不是世界末日，但我想要某种方式能够以某种方式对一大块工作进行分组，因此像 CreateNewUserUnitOfWork 这样的操作将采用代表用户的模型详细信息，验证它，在一个表中创建一个条目，然后在其他表中创建一些关系数据等，从数据库中获取用户 ID，然后将其发回（假设一切顺利）。从 QueryChainer 看来，它似乎提供了大部分功能，但如果它在 5 次操作中的第 3 次失败，则回滚似乎并不容易，那么有什么方法可以获得这种级别的控制吗？

## 插件/分散的配置数据

这更多是我们应用程序的一个小众问题，但我们有中央应用程序，然后是其他包含插件的 dll。将它们放入 bin 文件夹，然后将连接到路由、数据库和验证配置。想象一下它就像拥有谷歌主页，谷歌地图、文档等都是插件，它们告诉主应用程序将额外的调用路由到插件中的方法，然后它们有自己的模型和数据库配置等。这是我对此的担忧：

*   似乎有一种方法可以通过扫描目录中的新插件并包含它们来更新路由（[node.js 需要文件夹中的所有文件？](https://stackoverflow.com/questions/5364928/node-js-require-all-files-in-a-folder)）但是有一些最佳实践来做这种事情，因为我没有希望每个请求都必须不断进行目录扫描。可以安全地假设我很高兴在启动节点应用程序时将插件放在正确的位置，因此目前无需在运行时添加插件。

## 测试

目前在应用程序中有单元、集成、验收测试。单元测试发生在前端和后端，所以目前它将在我们的构建脚本中使用 JsTestDriver 进行 javascript 测试，以确认所有业务逻辑都按预期独立工作等。然后我们有集成测试，目前都在C# 将测试我们的控制器和操作是否按预期工作以及任何工作单元等，这再次由构建脚本启动，但也可以通过 Resharper 单元测试运行程序运行。最后，我们使用 Web 驱动程序用 c# 编写验收测试，该驱动程序仅针对前端并通过浏览器测试所有功能。我对此的主要担忧是：

*   测试 nodejs 的最佳实践和框架是什么？目前，在 ASP 层进行测试的大多数测试都是通过 C# 脚本执行的，创建具有模拟依赖项的控制器并运行操作以证明它使用 MVC Helpers 等按预期工作。但是我想知道 NodeJS 对此有什么级别的支持，因为在没有节点运行的情况下测试 node.js 组件似乎并不简单（快速浏览）。

*   假设有一些测试 node.js 的好方法可以通过命令行运行器等将其挂接到构建脚本中吗？因为我们希望一切尽可能自动化和隔离。

* * *

我很欣赏这更像是把 5 个以上的小问题合并成一个更大的问题，但由于基本问题是如何使用大型节点 js 应用程序实现良好的设计，我希望这对很多喜欢我自己的人仍然有用从大型企业应用程序到节点 js 风格的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:33:49.193

我最近从 ASP MVC 切换到 Node.js，强烈建议切换。

我无法为您提供您正在寻找的所有信息，但我强烈建议您将 Sequelize 作为 ORM 和 mocha（使用 expect.js 和 sinon）进行测试。Sequelize 正在下一个版本 1.7.0 中添加事务支持。我不喜欢 QueryChainer，因为它的每个元素都是单独执行的。

我对 Jasmine 作为测试框架感到沮丧，它缺少在验收测试后关闭 Express 服务器的 AfterAll 方法。Mocha 由 Express 的作者开发。

如果您想在插件中加载 Express 服务器，您可以使用这样的单例模式：[https ://github.com/JeyDotC/articles/blob/master/EXPRESS%20WITH%20SEQUELIZE.md](https://github.com/JeyDotC/articles/blob/master/EXPRESS%20WITH%20SEQUELIZE.md)

您可能还会非常喜欢[https://github.com/visionmedia/express-resource](https://github.com/visionmedia/express-resource)，它提供了一个 RESTful 接口来访问您的模型。[对于验证，我认为您会对https://github.com/ctavan/express-validator](https://github.com/ctavan/express-validator)感到满意

为什么需要在不使用 Node 的情况下测试 Node 模块？使用 Makefile 调用测试脚本被认为是标准的，您可以在 git 中添加一个 pre-commit 挂钩以在提交之前运行测试。

# android - Android 偏好设置 onBackButton

> ID：15830918
> 
> 赞同：0
> 
> 时间：2013-04-05T09:55:08.280
> 
> 标签：android, sharedpreferences

我将用户登录信息保存到 SharedPreferences，因此他只需配置一次登录数据。

这是我的 Preferences.class 中的 onBackPressed 方法（扩展 PreferenceActivity）：

```
 @Override
public void onBackPressed() {
    //Login again
    Intent intent = new Intent(Preferences.this, LoginActivity.class);
    startActivity(intent);
} 
```

**我需要的是一个 if 条件，它检查偏好是否改变**。：

如果用户打开 Preferences Activity（编辑：从任何视图（！）），并且没有更改任何内容并单击后退按钮 - > 只是返回到最后一个状态。

如果偏好改变：调用 LoginActivity。

还没有找到解决方案，每当我点击后退按钮时都会调用 LoginActivity。

在此先感谢，马利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:09:53.133

要确定是否有更改，`SharedPreferences`您必须像这样将 a 分配`OnSharedPreferenceChangeListener`给您的`SharedPreferences`对象：

```
prefs = PreferenceManager.getDefaultSharedPreferences(this);
prefs.registerOnSharedPreferenceChangeListener(this); 
```

在这种情况下，我正在我的`Application`课堂上执行它：

```
public class YambaAppObj extends Application implements OnSharedPreferenceChangeListener 
```

然后你将不得不覆盖：

```
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key)
{
    //this method will be called when preferences are changed.
    //do here what you want to record the change
    Log.d(TAG , "onSharedPreferenceChanged for:" + key);
} 
```

然后您可以在您的`onBackPressed()`方法中检查此记录`Preferences Activity` 并采取相应措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:18:14.947

您可以使用`OnSharedPreferenceChangeListener`或（取决于您的真正意思`changed`）您可以尝试使用`onSharedPreferenceChanged()`如下：

```
protected Boolean mPrefsChanged = false;

@Override
public void onSharedPreferenceChanged( SharedPreferences sharedPreferences,
                                                                  String key ) {
    mPrefsChanged = true;
} 
```

当然它远非完美，但至少你有更多选择

# facebook - How to find fb photos of two or more specific friends were tagged in the same photos

> ID：15830921
> 
> 赞同：1
> 
> 时间：2013-04-05T09:55:11.813
> 
> 标签：facebook

Is there any method that I can find all the Facebook photos of 2 or more friends which I specified were tagged together? I mean when they appear in the same photo. Any kinds of method will do. Thanks!

# php - Google Analytics PHP API (GAPI) 非移动浏览器

> ID：15830925
> 
> 赞同：0
> 
> 时间：2013-04-05T09:55:18.670
> 
> 标签：php, mobile, google-analytics, google-analytics-api, mobile-browser

我正在尝试使用 GAPI 显示前 5 个非移动浏览器。我似乎找不到这样做的方法，这甚至可能吗？
这就是我获得移动访问百分比的方式：

```
$ga->requestReportData(GA_PROFILE_ID, array("isMobile"), array("visits"), '-visits', null, $startdate, $enddate);
foreach ($ga->getResults() AS $result) {

    if ((string)$result == "Yes") $mobile["yes"] = $result->getVisits();
    else $mobile["no"] = $result->getVisits();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:39:26.513

这就是我最终这样做的方式：

```
public function getDevices($max = 5) {
    $this->ga->requestReportData($this->profileid, array('mobileDeviceInfo'), array('visits'), '-visits', 'mobileDeviceInfo != (not set) && mobileDeviceInfo != (not provided)', $this->startdate, $this->enddate, 1, $max);
    foreach ($this->ga->getResults() as $result) {
        $device[] = (string)$result;
        $visits[] = $result->getVisits();
    }
    if (!isset($device) OR !isset($visits)) {
        $device[] = "Niet genoeg data beschikbaar";
        $visits[] = "0";
    }
    $return = array("device" => $device, "visits" => $visits);
    return $return;
} 
```

# validation - 未触发 CustomRequiredvalidator

> ID：15830932
> 
> 赞同：1
> 
> 时间：2013-04-05T09:55:30.910
> 
> 标签：validation, jsf

我很困惑，因为我的自定义所需验证没有被触发。我有一个类，它以编程方式创建我的 HtmlTextInput 元素并添加验证器。此外，我得到了我的自定义验证器类。控制台告诉我验证器绑定到 HtmlTextInput。无论如何，在点击“保存”后 CustomRequiredValidator 没有被调用！我正在使用 JSF 2.x。提前致谢。

```
// programmatically built HtmlInput-element
if (freeText.isRequired()) {
    // Validator-Objekt
    System.out.println("CustomRequiredValidator bound.");
    final CustomRequiredValidator validator = (CustomRequiredValidator) FacesContext.getCurrentInstance().getApplication().createValidator("CustomRequiredValidator");
    inputText.addValidator(validator);
}

// CustomValidator
@FacesValidator("CustomRequiredValidator")
public class CustomRequiredValidator implements Validator {
    @Override
    public void validate(FacesContext context, UIComponent uiComponent, Object value) throws ValidatorException {
        System.out.println("RequiredValidator.validate ..."); ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:55:42.163

仅当转换成功时才调用验证器。因此，如果有一个转换器，无论是显式注册还是隐式使用（例如，拥有一个`Integer`bean 属性会触发 JSF 内置`IntegerConverter`）并且它抛出了一个`ConverterException`，那么验证器将永远不会被触发。但是，您应该在任何相关`<h:message(s)>`组件或服务器日志中注意到此转换器异常。

如果转换器被排除在怀疑之外，那么另一个可能的原因是 JSF 被配置为不通过在 webapp 中具有以下上下文参数来验证空字段`web.xml`：

```
<context-param>
    <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
    <param-value>false</param-value>
</context-param> 
```

除此之外，运行调试器，从[`UIInput#validate()`](http://grepcode.com/file/repo1.maven.org/maven2/javax.faces/jsf-api/2.1/javax/faces/component/UIInput.java#UIInput.validate%28javax.faces.context.FacesContext%29)方法处的断点开始应该可以提供见解。

# ms-access - 如何在 ms 中“分组”重命名字段 - 访问

> ID：15830933
> 
> 赞同：0
> 
> 时间：2013-04-05T09:55:36.370
> 
> 标签：ms-access

我有这个选择在访问中运行良好

```
 select case when ziffer = '042'  then 0 else 1 end as ID,
        case when ziffer = '042'  then 'Fiktiv' else 'Regelbesteuert' end as Code 
 from MWST_Code 
```

如果我尝试按 ID 和代码对此选择进行分组，则会出现错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:18:12.090

如果您访问支持案例声明，请尝试这样做：

```
 select case when ziffer = '042'  then 0 else 1 end as ID, 
      case when ziffer = '042'  then 'Fiktiv' else 'Regelbesteuert' end as Code
      from MWST_Code 
      group by case when ziffer = '042'  then 0 else 1 end, 
           case when ziffer = '042'  then 'Fiktiv' else 'Regelbesteuert' end 
```

# android - saving bitmap after translation saves bitmap with black area

> ID：15830934
> 
> 赞同：1
> 
> 时间：2013-04-05T09:55:40.453
> 
> 标签：android

i have used custom view which contains canvas to draw bitmap, overlay, shapes etc. this custom view is added to the relative layout in my activity. my problem is while i translate image on canvas to edit the bottom portion of image, it edits successfully but after editing when i save this bitmap the saved bitmap contains only the part of original bitmap which is shown at a time of save....remaining part of bitmap which is not shown on the screen bcoz of translation is not saved as a black part with bitmap.... any solution to this problem..? thanks.

```
private void settingBitmapToDraw() {
    // TODO Auto-generated method stub

    resultBitmap=Bitmap.createScaledBitmap(resultBitmap, WIDTH, HEIGHT, true);
    Matrix matrix=new Matrix();
    matrix.setRotate(TO_DEGREE);
    tempBitmap=Bitmap.createBitmap
                            (resultBitmap, 0, 0, WIDTH, HEIGHT, matrix, true);
    if(bitmap!=null)
    {
        bitmap.recycle();
        bitmap=null;
    }   
    bitmap=Bitmap.createBitmap(WIDTH, HEIGHT, tempBitmap.getConfig());
    canvas=new Canvas(bitmap);
    invalidate();

} 
```

# c# - 基于罗马数字 C# 拆分字符串

> ID：15830937
> 
> 赞同：1
> 
> 时间：2013-04-05T09:55:47.177
> 
> 标签：c#

我想在字符串中查找罗马数字（低于 20 的数字就足够了）并根据罗马数字拆分字符串

例如：用户输入是：

```
Whats your name?i)My name is C# ii)My name is ROR iii)My Name is Java 
```

我想做类似的事情

```
Whats your name?
i)My name is C# 
ii)My name is ROR 
iii)My Name is Java 
```

编辑：这是格式化可选问题..所以选项不会超过 5 或 6..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:21:41.440

这段代码：

```
string input = "I. Some text. II. Some text... V. Some stupid text. XVII. Eshe kakaya-to hernya...";

Regex r = new Regex(@"\bx{0,3}(i{1,3}|i[vx]|vi{0,3})\b", RegexOptions.IgnoreCase);
string result = r.Replace(input, new MatchEvaluator(e => Environment.NewLine + e.Value)).Trim(); 
```

结果：

```
I. Some text. 
II. Some text... 
V. Some stupid text. 
XVII. Eshe kakaya-to hernya... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:24:54.780

```
Regex.Split(yourstring, @"(?=\b\w+\))") 
```

应该做你想做的。

**例子：**

```
var s = "Whats your name?i)My name is C# ii)My name is ROR iii)My Name is Java XX)foo ix)barv x)foobar";
Regex.Split(s, @"(?=\b\w+\))").Dump(); 
```

**输出：**

![在此处输入图像描述](https://i.stack.imgur.com/GKo7O.png)

请注意，您的文本中不能有 a `)`。如果你愿意，你可以使用`(?=\b[ivxIXV]+\))`它作为替代方案，但我认为你应该保持简单。

# javascript - Highcharts - 如何在工具提示中隐藏系列名称和 Y 值

> ID：15830940
> 
> 赞同：7
> 
> 时间：2013-04-05T09:55:57.800
> 
> 标签：javascript, charts, highcharts, tooltip

将鼠标悬停在[Highchart 图表](http://www.highcharts.com/demo/line-basic)中的系列上会显示一个带有系列名称和 Y 值的弹出窗口，在示例中为：“东京 9.5ºC”。我想在悬停时显示我自己的自定义文本 - 我可以通过修改每个点的名称来做到这一点。同时我想隐藏默认系列名称和 Y 值。我已经搜索了文档，但没有找到任何合适的东西。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T11:41:14.927

您必须自己指定工具提示格式化程序（请参阅[文档](http://api.highcharts.com/highcharts#tooltip.formatter)）：

```
tooltip: {
  formatter: function() {
    return 'The value for <b>'+ this.x +
           '</b> is <b>'+ this.y +'</b>';
  }
}, 
```

如果您喜欢或您的自定义文本，您可以在那里显示 x 值。
希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-20T05:51:45.893

我已经修改了DEMO并在这里创建了一个新的[**DEMO**](http://jsfiddle.net/phpdeveloperrahul/2p32639L/)

要自定义 中显示的文本[`tooltip`](https://api.highcharts.com/highcharts/tooltip)，您应该像这样使用它：

```
Highcharts.chart('container', {

    title: {
        text: 'Solar Employment Growth by Sector, 2010-2016'
    },

    subtitle: {
        text: 'Source: thesolarfoundation.com'
    },
........
.....
....

    tooltip: {
      formatter: function() {
        return '<strong>X value: </strong>'+ this.x;
      }
    },
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-13T02:06:23.010

如果要格式化工具提示的第二行，但不保留 x 轴标签名称，则可以使用点格式而不是格式化程序。

```
tooltip: {
     pointFormat: 'The value is point.y'
}, 
```

# c++ - "ClassName objName; objName(1);" 是什么意思？意思是？

> ID：15830943
> 
> 赞同：0
> 
> 时间：2013-04-05T09:56:04.473
> 
> 标签：c++, syntax, instantiation

我有这个代码：

```
ClassName objName;
objName(1); 
```

我应该怎么理解？第一行是否使用不带任何参数的构造函数创建了一个对象（称为`objName`并属于类）？`ClassName`然后第二行调用带有一个整数参数的构造函数？那么，这意味着，事实上，在第二行我们销毁旧对象并创建一个新对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:57:16.197

第一行按你说的做；它创建一个类型的对象`ClassName`并调用它`objName`。它是使用其默认构造函数（不带参数）构造的。

第二行是调用`operator()`该类的重载。这允许它像函数一样被调用。参数`1`被传递给那个重载的操作符。

这是一个例子：

```
struct foo
{
  operator()(int x) { std::cout << x * 2 << std::endl; }
}; 
```

这种`foo`类型是重载`operator()`的，它需要一个`int`. 然后它打印出通过`int`乘以 2 的值。这是它的使用示例：

```
foo f;
f(5); // Prints out 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:57:18.413

```
objName(1); 
```

此行暗示`operator ()`ClassName 已重载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:57:27.380

`ClassName`有过载吗`operator()(int)`？

这将解释行为 - 在这种情况下，这只是函数调用

# hadoop - DistributedCache 文件 hadoop 有多大？

> ID：15830944
> 
> 赞同：1
> 
> 时间：2013-04-05T09:56:04.387
> 
> 标签：hadoop

是否有关于是否使用分布式缓存分发文件的指南？

我有一个大小为 86746785 的文件（我使用`hadoop dfs -dus`- 不知道这是在里面`bytes`还是什么）。分发这个文件是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:38:01.320

唯一可行的答案是“视情况而定”。

关于使用分布式缓存，您必须考虑的是文件被复制到您的任务中涉及的**每个**节点，这显然会占用带宽。此外，通常如果您希望文件在分布式缓存中，您会将文件保存在内存中，因此您必须考虑到这一点。

至于你的情况——是的，那些是字节。大小约为 86 MB，非常适合分布式缓存。几百 MB 以内的任何东西都应该是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:07:18.650

除了 TC1 的回答，还要考虑：

*   您打算何时/何地使用这些文件以及您的集群有多大？
    *   在许多映射器、单个减速器（或少数）场景中，您只需要减速器中的文件，我建议您不要这样做，因为您不妨自己在减速器（设置方法）中拉下文件，而不是不必要地对于您的映射器运行的每个任务节点 - 特别是如果文件很大（这取决于您的集群中有多少节点）
*   您将多少文件放入缓存中？
    *   如果由于某种原因您有 100 多个文件要分发，您最好将它们打包并将 tar 文件放入分布式缓存的档案集中（dist 缓存会为您解压缩文件）。您在这里要避免的事情是，如果您没有将它们放在 dist 缓存中而是直接从 HDFS 加载它们，您可能会遇到这样一种情况，即您有 1000 个映射器和/或减速器试图打开同一个文件可能导致名称节点和数据节点的*打开文件过多问题*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:06:46.273

分布式缓存的大小默认为 10GB。但最好在分布式缓存中保留几 MB 的数据。否则会影响应用程序的性能。

# vb.net - 如何在启动时隐藏 vb 表单？

> ID：15830948
> 
> 赞同：1
> 
> 时间：2013-04-05T09:56:16.570
> 
> 标签：vb.net, winforms

我试图在启动时隐藏主窗体，但由于某种原因我没有这样做。在下面的代码中，我创建了一个隐藏表单的按钮，但我想在加载时隐藏表单。请帮帮我。提前致谢。

```
Option Strict On

Public Class Form1
    Private Declare Function GetAsyncKeyState Lib "user32" (ByVal vkey As Long) As Integer

    Private Sub timerKeys_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles timerKeys.Tick
        Dim result As Integer
        Dim key As String

        Dim i As Integer
        For i = 2 To 90
            result = 0
            result = GetAsyncKeyState(i)
            If result = -32767 Then
                tbLog.Text = tbLog.Text + Chr(i)
                If i = 13 Then key = vbNewLine

                Exit For
            End If
        Next i

        If key <> Nothing Then
            If My.Computer.Keyboard.ShiftKeyDown OrElse My.Computer.Keyboard.CapsLock Then
                tbLog.Text = key
            Else
                tbLog.Text = key.ToLower
            End If
        End If

        If My.Computer.Keyboard.CtrlKeyDown AndAlso My.Computer.Keyboard.AltKeyDown AndAlso key = "z" Then
            Me.Show()

        End If
    End Sub

    Private Sub btnHide_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnHide.Click
        Me.Hide()
    End Sub
    Private msg As String = ""
    Private Sub timerSave_Tick() Handles timerSave.Tick
        My.Computer.FileSystem.WriteAllText("D:\log.txt", tbLog.Text, True)
        tbLog.Clear()

    End Sub

    Private Sub Form1_FormClosed(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosedEventArgs) Handles Me.FormClosed
        tbLog.Text &= vbNewLine & "Closed at:" & Now & vbNewLine
        'My.Computer.FileSystem.WriteAllText("D:\log1.txt", tbLog.Text, True)
        timerSave_Tick()

    End Sub

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        tbLog.Text = " Started at :" & Now & vbNewLine

    End Sub

    Public Sub store(ByVal s As String)

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:12:34.673

如果您不想在启动时显示表单，那么解决方案是更改项目的启动方法，而不是尝试隐藏表单。

在应用程序设置中，禁用“应用程序框架”并将启动对象设置为`Sub Main`而不是表单对象。然后在模块中编写适当的`Sub Main`入口点。

[MSDN 有更多信息](http://msdn.microsoft.com/en-us/library/ms235406.aspx)（尽管本文中给出的一些信息具有严重的误导性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T08:02:32.633

只需在表单的开头输入粘贴即可。

```
Protected Overrides Sub SetVisibleCore(ByVal value As Boolean)
    If Not Me.IsHandleCreated Then
        Me.CreateHandle()
        value = False
    End If
    MyBase.SetVisibleCore(value)
End Sub 
```

更多信息见： [如何拥有一个不可见的启动表格？汉斯·帕桑特](https://stackoverflow.com/questions/12393715/how-to-have-an-invisible-start-up-form)

最好的，

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-20T10:39:47.893

当您转到代码选项卡时，它的正下方是一个列表框。选择“（form1 事件）”。完成后，旁边是另一个列表框。将该文本框放在“加载”上。创建了一个新事件。该事件在程序启动时启动。放入这个事件：me.visible = false。这应该这样做。

# cruisecontrol.net - CCNET is not run correctly

> ID：15830949
> 
> 赞同：1
> 
> 时间：2013-04-05T09:56:17.680
> 
> 标签：cruisecontrol.net

I have installed the ccnet 1.6.798 on Windows 7 Ent. After fews time is run correctly, now its just load some line and then go to hang . Nothing happen anymore, Can somebody help me to solve this matter, I have this problem on windows server 2k8 too.

```
 [CCnet Server:INFO] Starting Cruisecontrol.Net Server
  [CCnet Server:INFO] Initialising security 
```

Here is screenshot:

```
 http://postimg.org/image/irgl0kbpd/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:27:49.617

它不挂起。正如您在调试日志中看到的，您尚未配置任何项目。所以 CCNet 没有任何事情要做。

请阅读有关如何将项目添加到您的配置的[文档。](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Configuration)

此外，[Scenarios](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Scenarios)是入门的非常有用的资源。

# java - 提取jar到指定目录

> ID：15830952
> 
> 赞同：79
> 
> 时间：2013-04-05T09:56:19.413
> 
> 标签：java, jar, command

我想使用`jar`命令行实用程序将我的一个 jar 提取到指定目录。

如果我理解这个正确`-C`的选择应该是诀窍但是当我尝试

```
jar xvf myJar.jar -C ./directoryToExtractTo 
```

我从我的 jar 实用程序中获取使用信息，所以我做错了。

是我想要实现的事情`jar`还是我需要手动移动我的 jar 并在那里调用

```
jar xvf myJar.jar 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-05T11:06:33.613

jars 使用 zip 压缩，因此您可以使用任何解压缩实用程序。

例子：

`$ unzip myJar.jar -d ./directoryToExtractTo`

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-04-05T10:05:44.633

最好这样做。

导航到您需要的文件夹结构

使用命令

```
jar -xvf  'Path_to_ur_Jar_file' 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-24T18:56:10.533

jar 命令本身没有这样的选项。查看[文档](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html)：

> -C dir 在执行 jar 命令期间临时更改目录 (cd dir)，同时处理以下 inputfiles 参数。其操作旨在类似于 UNIX tar 实用程序的 -C 选项。例如： jar uf foo.jar -C classes bar.class 更改为 classes 目录并将 bar.class 从该目录添加到 foo.jar。以下命令 jar uf foo.jar -C classes 。-C bin xyz.class 更改到classes目录并将classes目录下的所有文件添加到foo.jar中（没有在jar文件中创建classes目录），然后更改回原来的目录，然后再更改到bin目录添加xyz.class 到 foo.jar。如果类包含文件 bar1 和 bar2，那么使用 jar tf foo.jar 的 jar 文件包含以下内容： META-INF/
> 
> 元信息/清单.MF
> 
> 酒吧1
> 
> 酒吧2
> 
> xyz类

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-04-25T03:31:30.963

如果您不想更改当前工作目录，在这样的子外壳中运行提取命令可能会更容易。

```
mkdir -p "/path/to/target-dir"
(cd "/path/to/target-dir" && exec jar -xf "/path/to/your/war-file.war") 
```

然后，您可以从任何工作目录执行此脚本。

[感谢[David Schmitt](https://stackoverflow.com/questions/786376/how-do-i-run-a-program-with-a-different-working-directory-from-current-from-lin?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa)的 subshel​​l 技巧]

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-12T05:05:20.710

这对我有用。

我创建了一个文件夹，然后使用命令提示符中的 CD 选项更改为该文件夹。

然后从那里执行 jar。

```
d:\LS\afterchange>jar xvf ..\mywar.war 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-06T21:13:07.420

这就是我最终在 .bat 文件中使用的内容。当然只有 Windows。

```
set CURRENT_DIR=%cd%
mkdir ./directoryToExtractTo
cd ./directoryToExtractTo
jar xvf %CURRENT_DIR%\myJar.jar
cd %CURRENT_DIR% 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-31T22:35:30.313

截至 2020 年 10 月的当前工作版本，已更新为使用 maven-antrun-plugin 3.0.0。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>3.0.0</version>
            <executions>
                <execution>
                    <id>prepare</id>
                    <phase>package</phase>
                    <configuration>
                        <target>
                            <unzip src="target/shaded-jar/shade-test.jar"
                                   dest="target/unpacked-shade/"/>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-16T04:48:35.040

可能有点矫枉过正，但这是我想要的，所以我为它写了一个 Bourne Shell 脚本（依赖于`sed`and `grep`）：

```
Usage: unjar FILE [DEST]

- DEST must not already exist (won't overwrite existing contents);
  path to DEST will be created.

- If DEST is not provided, defaults to a subdirectory in the current
  working directory that will be named after FILE without the extension.
  Ex: unjar foo.jar  # foo.jar extracted to ./foo

- If DEST is provided, the path will be created and the jar will
  be extracted into it.
  Ex: unjar foo.jar /a/b/c  # foo.jar extracted into /a/b/c 
```

完整的脚本在这个[要点上](https://gist.github.com/subfuzion/57bf9dca1951c3d0da9672d9ae8b97c5)

# css - mac pc中的网页宽度和高度小于windows pc

> ID：15830953
> 
> 赞同：0
> 
> 时间：2013-04-05T09:56:24.520
> 
> 标签：css, windows, macos

mac pc和windows pc的px是否不同。如何为 mac 和 windows 设置相同的大小

```
 My CSS 
      .div
        {
         width: 900px;
         height: auto;
         margin-left:auto;
         margin-right:auto;
         margin-top: 1px;
         border: 0px solid #a3a3a3;
         overflow: hidden;
         background-color:#FFFFFF;
        } 
```

# c# - 如何在超链接中获取 Run 的文本？

> ID：15830955
> 
> 赞同：0
> 
> 时间：2013-04-05T09:56:26.703
> 
> 标签：c#, .net, wpf, c#-4.0, wpf-4.0

这是我的 XAML 标记：

```
<TextBlock>
    <Hyperlink Click="InstrumentFile_Click">
        <Run Text="{Binding InstrumentFile}"/>
    </Hyperlink>
</TextBlock> 
```

C＃：

```
private void InstrumentFile_Click(object sender, RoutedEventArgs e)
{
    Hyperlink link = sender as Hyperlink;
    if (link != null)
    {
        //need to get text here
    }
} 
```

我想获取绑定到 Run 的文本。我怎样才能得到？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:50:01.787

这是一个愚蠢的情况。您已经编写了一个具有 InstrumentFile 成员的类，并通过视图绑定到它。现在您想以编程方式访问视图以获取您最初提供的数据吗？是倒退了！

只需直接访问 InstrumentFile 成员。您首先编写了代码！

# bash - bash重命名文件问题？

> ID：15830960
> 
> 赞同：0
> 
> 时间：2013-04-05T09:56:39.803
> 
> 标签：bash, shell, batch-file

我对 Linux 命令或 bash 脚本一无所知，所以请帮助我。我在不同的目录中有很多文件我想使用 bash 文件将所有这些文件从“name”重命名为“name.xml”是否可以这样做？我只是在互联网上找到这样的有用代码：

```
shopt -s globstar # enable ** globstar/recursivity
for i in **/*.txt; do
echo "$i" "${i/%.txt}.xml";
done 
```

它甚至不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:08:52.400

为此`prename`，许多 Linux 发行版上默认安装的实用程序派上用场，通常它与 Perl 包一起分发。你可以像这样使用它：

```
find . -iname '*.txt' -exec prename 's/.txt/.xml/' {} \; 
```

或者这个更快的选择：

```
find . -iname '*.txt' | xargs prename 's/.txt/.xml/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:12:37.863

显示`*/.txt */.xml`实际上意味着**没有**`*`匹配给定模式的文件，因为默认情况下，如果没有找到匹配项，bash 将逐字使用。

为防止出现此问题，您必须另外设置`shopt -s nullglob`bash 在根本没有匹配项时不返回任何内容。

在验证回显线看起来有些合理后，您必须更换

```
echo "$i" "${i/%.txt}.xml" 
```

和

```
mv "$i" "${i/%.txt}.xml" 
```

重命名文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:15:59.113

您可以使用此 bash 脚本。

```
#!/bin/bash
DIRECTORY=/your/base/dir/here
for i in `find $DIRECTORY -type d -exec find {} -type f  -name \*.txt\;`;
do mv $i $i.xml
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T10:21:35.517

### 解释

移动/重命名当前目录和以下目录中的所有文件（无论扩展名是什么）从`name`到`name.xml`. 您应该`echo`在运行真正的脚本之前测试使用。

```
shopt -s globstar # enable ** globstar/recursivity
for i in **; do # **/*.txt will look only for .txt files
    [[ -d "$i" ]] && continue # skip directories
    echo "$i" "$i.xml"; # replace 'echo' by 'mv' when validated
    #echo "$i" "${i/%.txt}.xml"; # replace .txt by .xml
done 
```

# liferay - 启动生命射线

> ID：15830961
> 
> 赞同：2
> 
> 时间：2013-04-05T09:56:45.993
> 
> 标签：liferay

我在 liferay 工作。我们在项目中使用一个模块来创建 liferay 主题。我使用命令 ant -`Ddeploy.war=true`将其部署在服务器中。战争文件在 liferay 部署文件夹中创建。但是当我启动服务器时，我没有任何登录选项。我没有得到任何 Liferay 特定的选项。我得到以下服务器日志

```
An error occurred at line: 117 in the jsp file: /html/portlet/login/login.jsp
com.alepo.hooks.ConcurrentLoginException cannot be resolved to a type
114:            <liferay-ui:error exception="<%= UserLockoutException.class %>" message="this-account-has-been-locked" />
115:            <liferay-ui:error exception="<%= UserPasswordException.class %>" message="please-enter-a-valid-password" />
116:            <liferay-ui:error exception="<%= UserScreenNameException.class %>" message="please-enter-a-valid-screen-name" />
117:            <liferay-ui:error exception="<%= com.alepo.hooks.ConcurrentLoginException.class %>" message="max-sessions-exceeded" />
118:
119:            <fieldset class="block-labels">
120:                    <div class="ctrl-holder">

Stacktrace:
        at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:93)
        at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
        at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:451)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:328)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:307)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:295)
        at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:565)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:311)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:679)
        at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:584)
        at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:497)
        at com.liferay.taglib.util.IncludeTag.doEndTag(IncludeTag.java:67)
        at org.apache.jsp.html.common.themes.portlet_jsp._jspService(portlet_jsp.java:2669)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T05:27:54.593

看来您的自定义登录挂钩搞砸了，这不是主题的问题。

如果您仔细阅读错误：

> 在 jsp 文件中的第 117 行发生错误：/html/portlet/login/login.jsp com.alepo.hooks.ConcurrentLoginException 无法解析为类型

所以发生的事情是`/html/portlet/login/login.jsp`无法找到`ConcurrentLoginException`可能驻留在您的钩子中的类，为什么会发生这种情况是因为 liferay 处理类加载的方式。

简而言之，有 3 个类加载器：

1.  **全局**（服务器库中的类，`tomcat/ext/lib`如数据库驱动程序和`portal-service.jar`）：这些类可以被所有插件上下文和 liferay 上下文使用，并且可供所有插件使用。
2.  **门户类加载器**（类`ROOT/WEB-INF/lib`如著名的`portal-impl.jar`）：这些类或实现仅适用于 Liferay 的上下文。
3.  **Portlet / Plugin ClassLoader**（加载我们插件的类）：这些可用于我们的插件（portlet、钩子等），但不适用于 liferay 的模块/上下文。

因此，在这个简短的速成课程之后，您可能已经知道问题所在，但我仍然会尝试回答这个问题（为了积分:-)。

就是这样，因为 JSP-hook 修改了 liferay 的 JSP 并被复制到`ROOT`它属于 liferay 上下文的目录中，因此在插件中创建的任何自定义类（portlet 或钩子或主题）都对 JSP 不可用，所以在这种情况下`login.jsp`。

因此，要么不要在 JSP 中使用该类 ;-)，要么将异常类（打包在 jar 中）放在全局路径中，即`tomcat/ext/lib`它可用于`login.jsp`.

这是[Liferay 员工](http://www.liferay.com/community/forums/-/message_boards/view_message/7454307#_19_message_7480316 "Liferya 论坛：自定义 JSP 钩子和类路径问题")对类似问题的裁决和另一个[答案](https://stackoverflow.com/a/14435937/468763 "所以答案：Liferay ClassNotFoundException")，这可能有助于推动这个概念回家并在未来有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-08T09:33:29.407

看起来你还没有`ConcurrentLoginException`在你的`/html/portlet/login/login.jsp`

假设该类在您的项目中，通过将下面的行放在顶部来`ConcurrentLoginException`将该类导入：`login.jsp``login.jsp`

```
<%@page import="com.alepo.hooks.ConcurrentLoginException"%> 
```

如果`ConcurrentLoginException`您的项目中不存在类，则使用 Prakash 的方法，这是关于如何映射依赖项的绝佳答案。

# c# - 如何将 IEnumerable 模型对象转换为视图中的单个模型对象，MVC3

> ID：15830963
> 
> 赞同：0
> 
> 时间：2013-04-05T09:56:50.527
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, ienumerable

这不是重复的。虽然另一个问题与此相同，但它在偏离程序时得到了解决。在这里，我再次偶然发现了同样的问题。

我正在使用 DB First 方法。我有一个名为 Dynaportal.context.cs 的上下文文件，其中有一个名为 DynaPortalEntities 的类：-

```
public partial class DynaPortalEntities : DbContext
{
   ...    
    public DbSet<Page> Pages{ get; set; }

    public DbSet<TemplateMaster> TemplateMasters { get; set; }
} 
```

在视图中

```
@model DynaPortalMVC.Models.DynaPortalEntities 
```

并在 foreach 循环中

```
@foreach (var item in Model.TemplateMasters)
{} 
```

在同一个视图中，我需要一个不是 iEnumerable 的页面模型，如下所示：-

```
@Html.EditorFor(model => model.Pages.Title)===========>This shows error under Title 
```

所以在这里我应该将 IEnumerable Model.Pages 转换为单个页面对象以获取 model.pages.Title。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:01:08.187

是的，如果我理解正确，Razor 不知道`Page`您想要什么标题，因为您要求的是 the `Title`of all `Pages`。

通常，您会使用 循环`Pages`并输出每个标题`@foreach`。或者，索引到`Pages`: `@Html.EditorFor(model => model.Pages.First().Title)`。

# c++ - 为什么我对 ro 没有正确答案？

> ID：15830973
> 
> 赞同：-4
> 
> 时间：2013-04-05T09:57:17.103
> 
> 标签：c++, while-loop

```
#include<stdio.h>
#include <math.h>

int main()
{
    float pb;
    float N;
    float ro;
    float nb;

    printf(" Now we will find the number of charges and users \n \n \n ");

    printf(" Please enter the probability \n ");

    printf(" The probability is ");

    scanf("%f",&pb);

    printf("\n \n Please enter the number of circuits N \n");

    printf("The number is");

    scanf("%f",&N);

    while ( pb>0.01 )
    {
        pb=1/(1+N/(ro*pb));
        ro=ro+0.01;
    }

    printf("%f",ro);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:01:37.390

您至少需要初始化所有未从用户那里读取的变量。现在，您正在使用一些“随机”值进行数学运算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:13:33.727

```
pb=1/(1+N/(ro*pb)); 
```

在上面的程序中使用 ro 语句并且它没有被初始化，所以你的计算没有按预期结束。

# c# - 在 C# 中处理数组生成 xml？

> ID：15830976
> 
> 赞同：1
> 
> 时间：2013-04-05T09:57:21.213
> 
> 标签：c#, xml, xsd

我在 C# 中生成了一个类（来自带有 xsd/c 的 xsd），它得到了这个声明（连同字符串字段、数字字段等）：

```
private string[] itemsField;
private ItemsChoiceType[] itemsElementNameField; 
```

ItemsChoiceType 如下所示：

```
public enum ItemsChoiceType1 {
    colorOfCar,
    colorOfMC,
    colorOfBike,
} 
```

因此，如果我们查看 itemsElementNameField，它是一个枚举数组，但我应该如何填充它，以使每个值都成为我的 XML 文件中的一个元素？

（我用来创建 xml 的方法是：

```
 - XmlSerializer XmlSerRoot = new XmlSerializer(typeof(RootInformation)) (the root of my xml!) 
 - StringWriterWithEncoding strWriter = new StringWriterWithEncoding(Encoding.GetEncoding("iso-8859-1"));
 - XmlDocument documentInXML = new XmlDocument();
 - XmlSerRoot.Serialize(strWriter, rootInformation);  
 - string XmlString;
 - XmlString = strWriter.ToString(); 
 - documentInXML.LoadXml(XmlString);
 - documentInXML.Save(myPath); 
```

也许不感兴趣，但最好应用一些关于它的信息，我想）

我希望这个数组就像文件中的一个普通的 xml 标记，比如：`<colorOfCar>Blue</colorOfCar>`

我得到了我需要的所有信息，比如它是否是 colorOfCar，以及它的颜色（如蓝色）。但是数组应该是什么样子的呢？我的意思是，我应该如何填写才可以。它不适用于类似的东西`ItemsChoiceType[1] = "colorOfCar"`（我在这个阶段得到了这个信息）。但我无法弄清楚应该如何填充数组才能最终确定。

也许是一种不完整的信息，但我想你明白我的意思......主要是：如何填充一个数组以表示为最后的 xml 元素。

问候，/ E

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:07:27.807

我别无选择，只能跟随 xsd，我只是从 3.rd 部分拿到它。这就是为什么它看起来有点混乱。但解决方案比我想象的要容易。我不知道这是如何工作的，但 id 可以。我刚刚用枚举填充了数组，它看起来不错。另一个数组保留值。

有点奇怪，它没关系，但它有效。

/E

# html - 下拉菜单选项卡在 VS2010 上不起作用

> ID：15830977
> 
> 赞同：0
> 
> 时间：2013-04-05T09:57:25.463
> 
> 标签：html, css

我尝试为主页上的一个主选项卡创建下拉导航选项卡，我使用 CSS 来做到这一点。它在记事本上运行良好，但不适用于 Visual Studio 母版页文件。你能告诉我我哪里错了吗？样式表和代码如下：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<style type="text/css">

#navMenu
{
margin: 0;
padding: 0;
} 

#navMenu ul {    
margin: 0;
padding: 0;
line-height:40px;    
}

#navMenu li 
{
margin: 0;
padding  :0; 
list-style:none; 
position: relative;
float: left;
background-color:gray;
color:#000; 
border-radius:5px;   
}

#navMenu ul li a 
{
text-align:center;
font-family:tahoma;
font-size:9.5pt;
text-decoration:none;
height:40px;
display:block;
color:#000;
border-right:white thin solid;    
}

#navMenu ul ul
{
position:absolute;
visibility:hidden;
top:40px;
}

#navmenu ul li:hover ul
{
visibility:visible;
}

#navMenu li:hover {
background-color:black;
color:#FFF;
}  

#navMenu ul li:hover ul li a:hover
{
background:black;
color:white; 
}  

#navMenu a:hover{
color:#FFF
}

</style>
</head>
<body onresize="window.location=window.location;" style="text-align:justify">
<form id="form1" runat="server">       
    <div> 
    <table border="0" cellpadding="0" cellspacing="0">
    <tr>
    <td colspan="5">
                        <div id="navMenu">
                        <ul> 
                        <li> 
                        <a href="~/" style="width:65px">Home</a>                    
                        </li>                            
                       <li>
                       <a href="~/" style="width:150px">tab1</a>                           
                       <ul >
                       <li><a href="~/" style="width:150px">subtab1</a>  </li>
                       <li><a href="~/" style="width:150px">subtab2</a>  </li>
                       <li><a href="~/" style="width:150px">subtab3</a>  </li>
                       <li><a href="~/" style="width:150px">subtab4</a>  </li>
                       </ul>
                       </li>
                       <li>                                                 
                       <a href="~/" style="width:125px">tab2</a>
                       </li>
                       <li>
                       <a href="~/" style="width:95px">tab3</a>
                       </li>
                       <li>
                       <a href="~/" style="width:65px">tab4</a>
                       </li>
                       <li>
                       <a href="~/" style="width:110px">tab5</a>
                       </li>
                       <li>
                        <a href="~/" style="width:165px">tab6</a>
                      </li>
                      <li>
                       <a href="~/" style="width:200px">tab7</a>
                        </li>
                        </ul> 
                        </div>
        </td>
        </tr>

  </table>
  </div>
  </form>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:20:21.083

尝试添加标签，如下所示

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# user-interface - VisualStateManager 适用于 Visual Studio，但不适用于应用程序

> ID：15830980
> 
> 赞同：0
> 
> 时间：2013-04-05T09:57:30.380
> 
> 标签：user-interface, view, visualstatemanager

我有一个看起来像这样的视图：

[http://www.imgbox.de/users/public/images/W3pITuCTOw.png](http://www.imgbox.de/users/public/images/W3pITuCTOw.png)

如您所见，这是标准设计。

当我在 Visual Studio 中单击 'Snapped' 时，它看起来像这样：

www.imgbox.de/users/public/images/8FW93PIwbt.png

如您所见，第二个网格“West”现在位于左侧网格“Ost”下方。

问题是，当我启动应用程序时它不起作用（它保持标准）（不要被顶部栏激怒......）

[http://www.imgbox.de/users/public/images/C6AYtKnJjO.png](http://www.imgbox.de/users/public/images/C6AYtKnJjO.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:43:50.203

问题解决了。这必须在代码隐藏中：

```
 public MainPage()
    {
        this.InitializeComponent();
        Window.Current.SizeChanged += Current_SizeChanged;  
    }

    void Current_SizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
    {
        VisualStateManager.GoToState(this, ApplicationView.Value.ToString(), true);
    } 
```

# ms-access - 防止 Access 数据库膨胀的最佳方法是什么

> ID：15830981
> 
> 赞同：1
> 
> 时间：2013-04-05T09:57:31.490
> 
> 标签：ms-access, database-design, vba

**介绍：**

我正在创建一个将推出多用户功能的 Access 数据库系统。但是当我在 Access 2000（我知道的老学校）中创建这个数据库时，当我的数据库超过 40-60MB 时，会出现很多错误和随机的神秘问题。

**我的问题：**

有没有人有一个很好的解决方案来解决我如何缩小它或防止膨胀？

**细节：**

我正在使用许多本地表与 SQL 表和我的前端链接到后端 SQL Server。我已经尝试过压缩和修复，但它只缩小到大约 15MB，并且在用户使用数据库几次后，膨胀迅速扩大到超过 50-60MB！

让我知道是否需要更多细节，但这是我问题的大致轮廓。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:37:22.170

这里有一些想法供您遵循。

你说你也有很多本地表。将本地表拆分为另一个 Access 数据库。因此，您将拥有 2 个后端（1 个 SQL Server 和 1 个 Access）和前端。

创建一个批处理文件，使用**/compact**选项打开本地表后端数据库。所以，它看起来像这样：

```
"C:\Prog...\Microsoft...\Officexx\ C:\ProjectX_backend.mdb /compact" 
```

然后使用计划任务每​​天运行此批处理文件。除非您以任何方式对其进行编辑，否则您的前端永远不需要压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:24:51.167

如果您被 2000 所困扰，它的名声很差，那么您必须深入研究您的应用程序并找出造成膨胀的原因。最常见的原因是批量插入，然后是删除。其他原因是使用 OLE 对象字段。其他原因是形式等对象的编程更改。你真的必须通过你的应用程序并找到具体的原因。

仅连接到受支持服务器且不对本地对象进行更改的 mdb 文件不应增长。

至于您的随机问题，除了 2000 版本的稳定性不足之外，如果您的 mdb 文件在网络上共享，您应该检查计算机中的 RAM 损坏、硬盘驱动器损坏和网络控制器损坏。

# xamarin.android - 使用 monodroid/mvvmcross 构建项目时出错

> ID：15830986
> 
> 赞同：0
> 
> 时间：2013-04-05T09:57:43.497
> 
> 标签：xamarin.android, mvvmcross

当我尝试构建项目 (monodroid/mvvmcross) 时出现错误。这是消息错误：

```
Error   37  The type 'Android.App.ListActivity' is defined in an assembly that is not referenced. You must add a reference to assembly 'Mono.Android, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c4c4237547e4b6cd'. 
```

有人知道如何解决这个问题吗？这很奇怪，因为之前没有这个错误。

此错误位于 MvxDialogActivityView.cs (cirrious.MvvmCross.Dialog.Droid)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:49:49.077

我认为您的问题是您的部分代码是针对 Xamarin.Android 编译的，而其他代码是针对 Mono for Android 编译的。

请参阅：[http ://forums.xamarin.com/discussion/1476/changes-to-assembly-strongnames-in-xamarin-android-4-6-0](http://forums.xamarin.com/discussion/1476/changes-to-assembly-strongnames-in-xamarin-android-4-6-0)

您将需要重新编译应用程序的所有部分以针对相同版本的 Xamarin 产品。

# regex - 如何一次查找和替换 muiti 文本？

> ID：15830990
> 
> 赞同：-6
> 
> 时间：2013-04-05T09:57:50.183
> 
> 标签：regex, notepad++

我有一段文字：

> 声音处理工具的瑞士军刀：它可以在许多不同的文件格式和音频设备之间转换声音文件，并且可以应用许多声音效果和转换，以及进行基本分析并为更强大的分析和绘图工具提供输入。

示例：我想 find:`audio,sound`并一次替换它`Whitespace`。
因为我有一个非常大的文本文件，所以我找不到每个单词都使用`Find/Replace and replace`use `Replace all`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:13:19.723

查找内容：`audio|sound` 替换为：`<whatever>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:02:15.313

需要更多信息。但是，如果您使用的是 Windows，请尝试使用 Textpad -[文本编辑器](http://www.textpad.com/)，它甚至可以处理非常大的文件

否则，如果您使用的是 linux，请查看 SED [sed search & replace](http://www.brunolinux.com/02-The_Terminal/Find_and%20Replace_with_Sed.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-12T22:15:21.450

```
sed -i 's/original/replace with/g' * 
```

'*' 是用通配符的所有文本文件列表替换它

或者你可以使用[vscode](https://code.visualstudio.com/)或 sublime text

# mongodb - 我们可以在 mongo db 的分片之间动态移动文档吗？

> ID：15830995
> 
> 赞同：1
> 
> 时间：2013-04-05T09:58:04.427
> 
> 标签：mongodb

我正在构建一个具有以下用例的跟踪平台。

1.  需要跟踪 50,000 辆汽车
2.  每辆车每 60 秒传输一次其位置。
3.  获取返回 X 公里范围内所有车辆的 API。

所以，我需要扩展写入并实现查询隔离。我可以创建一个以地理区域为分片键（geohash）的分片集群。这将帮助我平衡写入并实现查询隔离。但是当车辆跨区域移动时会发生什么情况，在这种情况下，mangodb 会自动将文档移动到新的分片吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:56:44.640

一旦写入，您将无法更改记录的分片键字段。使用区域作为分片键将阻止您跨区域移动，除非您删除原始区域中的记录并使用新区域插入。

在选择分片键时，请查找与您最常见的查询模式匹配的分片键。查询分片键将允许您直接从分片中检索记录。不使用分片键的查询必须对所有分片执行分散聚集查询。

如果已启用或可以使用 Mongodb 2.4，并且您不需要执行基于范围的查询，您可能需要考虑使用[哈希](http://docs.mongodb.org/manual/release-notes/2.4/#new-hashed-index-and-sharding-with-a-hashed-shard-key)分片键，即使您的分片键是单调递增的，也可以实现均匀分布。有关选择分片键的建议，请参阅[此页面](http://docs.mongodb.org/manual/tutorial/select-shard-key/)。