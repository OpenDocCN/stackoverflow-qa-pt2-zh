# StackOverflow 问答 15658000-15658999

# ios - UIDocumentInteractionController ios5如何添加邮件应用

> ID：15658001
> 
> 赞同：1
> 
> 时间：2013-03-27T11:44:12.537
> 
> 标签：ios, ios5, uidocumentinteraction

我正在显示一个带有 UIDocumentInteractionController 的 png。是否可以将 Mail App 添加到可用的应用程序中？全新固件安装只有打印机，而在 iOS 6 上，有许多默认选项

谢谢你

# ios - ios：应用内购买编码最佳实践来管理 UIViewController 的变化

> ID：15658005
> 
> 赞同：0
> 
> 时间：2013-03-27T11:44:34.583
> 
> 标签：ios, in-app-purchase

我想了解有关应用内购买的编码最佳实践是什么。我正在开发一个应用程序，用户可以在其中购买非消耗品（具有恢复购买功能）。当用户尝试购买或恢复购买时，他仍然可以选择进入应用程序部分（这也意味着更改当前的`UIViewController`）。处理这种情况的正确方法是什么？我应该写一个单例对象（如`MyStoreKitManager`）来管理它吗？

# ios - 禁用/启用 UIButton

> ID：15658006
> 
> 赞同：3
> 
> 时间：2013-03-27T11:44:37.723
> 
> 标签：ios, objective-c, xcode, uibutton, conditional

我正在尝试在游戏中创建不同的关卡。目前，用户可以点击进入任何级别并播放该级别。我想阻止用户点击 2 级，除非他们已通过 1 级。

我有一个 VC 类，在一个级别结束时说级别通过，清除下一个级别。在这里我会有一个计数器，所以如果计数器 = 1 清除 2 级等。

我不确定如何使按钮可点击。我希望解锁的关卡在通过上一个关卡之前是不可点击的并且颜色略有不同。

关于如何做到这一点的任何想法？我也愿意接受更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:11:31.587

更传统的 Objective-C 语法：

```
[button setEnabled:YES]; 
```

和，

```
[button setEnabled:NO]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:20:49.250

我会通过 Interface Builder 取消设置 2 级及以上按钮的启用状态。这样，默认状态是禁用的。

然后，只有当它们满足要求时，才将按钮的启用状态设置为 YES。

您需要保存它们满足要求的事实，以便您可以在视图加载时正确设置按钮的状态。

查看`UserDefaults`该类以轻松保存用户数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:49:18.783

要禁用按钮，请使用以下代码：

```
button.enabled = NO; 
```

要识别按钮，请给它一个带有舞台级别的标签。

```
button.tag = LEVEL_OF_STAGE; 
```

要从 parentView 中检索按钮，

```
UIButton *btn = [parentView viewWithTag:STAGE_NUMBER]; 
```

# jquery - 将 jquery datepicker 位置设置为文本字段的顶部

> ID：15658009
> 
> 赞同：4
> 
> 时间：2013-03-27T11:44:49.277
> 
> 标签：jquery, datepicker

Jquery datepicker 显示在测试字段下。有时它会出现在文本字段的顶部。但我想始终在测试字段的顶部显示日期选择器。怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-11-13T11:43:27.357

以下代码将始终将日历定位在输入字段的顶部。

```
$('.txtDate').datepicker({
   beforeShow: function (textbox, instance) {
       var txtBoxOffset = $(this).offset();
       var top = txtBoxOffset.top;
       var left = txtBoxOffset.left;
       var textBoxWidth = $(this).outerWidth();
       console.log('top: ' + top + 'left: ' + left);
               setTimeout(function () {
                   instance.dpDiv.css({
                       top: top-190, //you can adjust this value accordingly
                       left: left + textBoxWidth//show at the end of textBox
               });
           }, 0);

   }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:10:15.063

使用风险自负...

```
.ui-datepicker {
    position: relative !important;
    top: -290px !important;
    left: 0 !important;
} 
```

[http://jsfiddle.net/mXnjS/1/](http://jsfiddle.net/mXnjS/1/)

您可能需要更新 top px，因为它取决于您的基本字体大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-05T07:37:35.743

```
 $('#txtDate').datepicker({
    beforeShow: function (textbox, instance) {
            instance.dpDiv.css({
                    marginTop: (-textbox.offsetHeight) + 'px',
                    marginLeft: textbox.offsetWidth + 'px'
            });
          }
      }); 
```

如果您在一页中有两个或多个日期选择器，则此代码会更改所有日期选择器的位置。如果您需要单独更改每个，则应使用此代码...

```
 beforeShow: function (input, inst) {
       setTimeout(function () {
           inst.dpDiv.css({
            top: 100,
                left: 200
        });
      }, 0);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-15T08:58:04.947

我尝试使用这个 hack 来解决这个问题，基于原始 jQuery UI 的“_checkOffset”函数：

```
function datepickerInitDirectionReverse() {
    // Store original method to be able to call it inside our overriding method.
    $.datepicker._checkOffset_original = $.datepicker._checkOffset;
    $.datepicker._checkOffset = function(inst, offset, isFixed) {
        var dpHeight = inst.dpDiv.outerHeight(),
            inputHeight = inst.input ? inst.input.outerHeight() : 0,
            viewTop = isFixed ? 0 : $(document).scrollTop();
        offset = $.datepicker._checkOffset_original(inst, offset, isFixed);
        // Try to reposition the datepicker on top of it,
        // only if the option flag is set by the user
        // and only if this has not already happened.
        offset.top -= Math.min(
            offset.top,
            (
                this._get(inst, "directionReverse")
                &&
                (offset.top > inst.input.offset().top)
                &&
                (offset.top - viewTop > dpHeight)
            ) ? Math.abs(dpHeight + inputHeight) : 0
        );
        return offset;
    }
} 
```

现在，您可以在每个元素基础上按如下方式配置您的定位偏好：

```
// Prefer datepicker to appear on top of input element (if room).
$(element).datepicker({
    directionReverse: true
});

// Prefer datepicker to appear on bottom of input element (if room).
// This is the unchanged default behaviour.
$(element).datepicker({
    directionReverse: false
}); 
```

请注意，如果开发人员决定更改界面，上述内容可能会在未来版本的 jQuery UI 中中断。另外请告诉我是否会有任何副作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-02T05:24:58.480

```
$('#StartDateIssued,#EndDateIssued,#StartDateFulFill,#EndDateFulFill').datepicker({
    beforeShow: function (input, inst) {
        var offset = $(input).offset();
        var height = $(input).height();
        window.setTimeout(function () {
            inst.dpDiv.css({ top: (offset.top + height - 20) + 'px', marginLeft: ( input.offsetWidth) + 'px' })
        })},
    changeMonth: true, changeYear: true, constrainInput: true,
    dateFormat: "dd-mm-yy", onSelect: function (dateText, inst) {
        $('#StartDateIssued').valid();
        $('#StartDateIssued').val(dateText);
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T11:51:11.683

```
You can try this :

$('#txtDate').datepicker({
    beforeShow: function (textbox, instance) {
            instance.dpDiv.css({
                    marginTop: (-textbox.offsetHeight) + 'px',
                    marginLeft: textbox.offsetWidth + 'px'
            });
    }
}); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2014-02-04T12:18:07.047

jquery datepicker 的设计就像它不需要任何更改...只能通过更改 datepicker 的 css 来向左或向右移动...检查您的 html 版本，因为 datepicker 不支持 html 版本 5..支持 html 版本 4

# c# - 非正式谬误导致堆栈溢出

> ID：15658012
> 
> 赞同：9
> 
> 时间：2013-03-27T11:45:01.213
> 
> 标签：c#, language-agnostic, logic

*   破码

    ```
    public static partial class LogicExtensions {
        public static bool Implies<T>(this T premise, T conclusion) {
            return conclusion.Infers(premise);
        }

        public static bool Infers<T>(this T premise, T conclusion) {
            return premise.Implies(conclusion);
        }
    } 
    ```

上面的代码期望表达：

> 结论推断前提，因为前提蕴含结论。
> 
> 前提暗示结论，因为结论推断前提。

这将是[循环推理](http://en.wikipedia.org/wiki/Circular_reasoning)，肯定会导致堆栈溢出。然后我重新设计如下：

*   工作代码

    ```
    public delegate bool Paradox<T>(T premise, T conclusion, Paradox<T> predicate=null);

    public static partial class LogicExtensions {
        public static bool Implies<T>(this T premise, T conclusion, Paradox<T> predicate=null) {
            if(null==predicate)
                return conclusion.Infers(premise, Implies);

            if(Infers!=predicate)
                return predicate(premise, conclusion);

            return LogicExtensions.Implies(conclusion as IConvertible, premise as IConvertible);
        }

        public static bool Infers<T>(this T premise, T conclusion, Paradox<T> predicate=null) {
            if(null==predicate)
                return premise.Implies(conclusion, Infers);

            if(Implies!=predicate)
                return predicate(premise, conclusion);

            return LogicExtensions.Implies(conclusion as IConvertible, premise as IConvertible);
        }

        static bool Implies<T>(T premise, T conclusion) where T: IConvertible {
            var x=premise.ToUInt64(null);
            return x==(x&conclusion.ToUInt64(null));
        }
    } 
    ```

但这意味着：

1.  它在正确的逻辑上失败了，它不能没有`Paradox<T>`我最初命名`Predicate<T>`但与`System.Predicate<T>`.

2.  与代码生成器不同，它`T`必须实现的缺陷。`IConvertable`

需要明确的是，我试图使代码不仅可以工作，而且还可以表示类似的逻辑公式，我可以进一步重用它来推理逻辑，而不受`T`implements的约束`IConvertable`。有没有办法使逻辑正确并摆脱有缺陷的设计？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T12:31:20.547

从您的问题中不清楚您要做什么。您是否尝试在 C# 中表达一些逻辑谓词？您是否正在尝试编写能够推理逻辑的代码？您是否试图表示逻辑公式？

**悖论。**在谈论计算中的悖论时，最好阅读 lambda 演算和 Russel 悖论（[这是一篇不错的文章](http://planetmath.org/lambdacalculus)）。Lambda 演算本质上是一种简单的函数式编程语言（想象一下带有 lambda 函数和应用程序的 C#，但仅此而已）。

它最初是作为*数学基础*系统开发的（在计算机发明之前），但这并没有真正起作用，因为您可以编写没有意义的递归计算（有关详细信息，请参阅文章），但是您可以编写计算如下（在 C# 表示法中）：

```
r(r) = not(r(r)) = not(not(r(r))) 
```

...并且由于没有`x = r(r)`这样的`x = not(x)`，该模型作为数学基础没有意义。但它作为一种编程语言模型很有用，您可以在其中编写递归计算——尽管它们可能永远不会终止。

**代表逻辑。**如果您想在程序中表示逻辑公式，那么您可能希望将公式的*表示与**推理*分开。这最好在函数式语言（如 F#）中完成，但您也可以在 C# 中完成（只需输入更多内容）。公式的 F# 表示形式类似于：

```
type Formula = 
  | Variable of string
  | Negation of Formula 
  | Implies of Formula * Formula 
```

这个想法是，一个公式要么是一个变量（命名），要么是另一个公式的否定，或者一个公式暗示另一个公式的蕴涵。在 C# 中，您可以将同一事物表示为类层次结构（`Formula`作为基类和三个派生类。）

然后可以将您的推理实现为操纵公式的方法。在 F# 中，这可以很容易地使用模式匹配来完成。在 C# 中，您可能需要使用类型测试来编写代码来检查参数是否是`Variable`（然后做一些事情......）；如果论点是`Negation`（然后做某事......）等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:02:02.727

**丢弃 IConvertible**

让我们从“简单的部分”开始：删除`IConvertible`. 您需要它的原因是因为您希望此代码适用于所有类型，这意味着您不能总是影响它具有某个成员 ( `Implies`)。您想要做的是他们在 C++ 中所说的：模板专业化，但不幸的是在 C# 中不可用（还没有？）：

```
 static bool Implies<T>(T premise, T conclusion) where T : IConvertible
    {
        var x = premise.ToUInt64(null);
        return x == (x & conclusion.ToUInt64(null));
    }

    static bool Implies<T>(T premise, T conclusion) where T : Foobar
    {
    // other fancy logic
    }

// and so on 
```

解决这个问题的最简单方法是使用多方法。您可以为此使用“动态”关键字：

```
public partial class Implications
{
    internal static bool CheckImplies<T>(T lhs, T rhs)
    {
        return Implies((dynamic)lhs, (dynamic)rhs);
    }

    public static bool Implies(int lhs, int rhs)
    {
        return lhs == (lhs & rhs);
    }
    // your other implies thingies implement this same partial class
}

public static partial class LogicExtensions
{
    public static bool Implies<T>(this T premise, T conclusion, Paradox<T> predicate = null)
    {
        if (null == predicate)
            return conclusion.Infers(premise, Implies);

        if (Infers != predicate)
            return predicate(premise, conclusion);

        return Implications.CheckImplies(premise, conclusion);
    }

    public static bool Infers<T>(this T premise, T conclusion, Paradox<T> predicate = null)
    {
        if (null == predicate)
            return premise.Implies(conclusion, Infers);

        if (Implies != predicate)
            return predicate(premise, conclusion);

        return Implications.CheckImplies(premise, conclusion);
    }
} 
```

**如果你有“第三种”方法，你可以简单地调用它**

我已经看了几分钟奇怪的递归定义，它对我来说真的没有意义......如果你有第三个辅助方法，为什么不直接调用它呢？:-)

```
 public static bool Implies<T>(this T premise, T conclusion)
    {
        return Implications.CheckImplies(premise, conclusion);
    }

    public static bool Infers<T>(this T premise, T conclusion)
    {
        return Implications.CheckImplies(conclusion, premise);
    } 
```

**not(not(T)) 问题**

虽然以上对我来说没有多大意义，但我发现使用类型系统和语言来帮助你一点是完全合理的。好吧，当然你可以做到这一点，这就是我会这样做...... :-)

让我们介绍一个带有泛型的“Not”类：

```
public class Not<T>
{
    public Not(T val)
    {
        this.not = val;
    }
    internal T not;
} 
```

如果我们这里有一个 Not> 的情况，我们想给 - 否则，我们想直接使用。好吧，我们可以通过一些扩展轻松做到这一点：

```
 public static T Optimize<T>(this Not<Not<T>> var)
    {
        return Optimize(var.not.not);
    }

    public static T Optimize<T>(this T var)
    {
        return var;
    } 
```

要对其进行测试，您可以执行类似的操作：

```
 var val = new Not<Not<int>>(new Not<int>(2));
var result = val.Optimize(); 
```

这是可行的，因为重载解决方案将选择正确的 Optimize 调用，从而确保您将 Not>>>> 优化为 T 值等等。

它也有效，因为我们将“Not”包装在一个包装类中，然后使用类型系统来发挥我们的优势。

**回到最初的问题**

与其直接评估“暗示”和“推断”，不如使用临时对象来做​​你的坏事。您可以使用运算符重载（准确地说是隐式转换）来指定 Implies 和 Infers 如何关联。唯一的问题是它对扩展方法有限制。

然后 C# 运算符重载将选择最佳匹配方法。在第一种情况下，这将是完全匹配，在第二种情况下，方法将被隐式转换，然后调用 Evaluate。换句话说，它不会堆栈溢出，仅仅是因为它会懒惰地进行评估。准备好代码了吗？:-)

```
public class Implies<T>
{
    public Implies(T premise, T conclusion)
    {
        this.premise = premise;
        this.conclusion = conclusion;
    }

    public T premise;
    public T conclusion;

    public static implicit operator Infers<T>(Implies<T> src)
    {
        return new Infers<T>(src.conclusion, src.premise);
    }
}

public class Infers<T>
{
    public Infers(T premise, T conclusion)
    {
        this.premise = premise;
        this.conclusion = conclusion;
    }

    public T premise;
    public T conclusion;

    public static implicit operator Implies<T>(Infers<T> src)
    {
        return new Implies<T>(src.conclusion, src.premise);
    }
}

public static partial class LogicExtensions
{
    public static Implies<T> Implies<T>(this T premise, T conclusion)
    {
        return new Implies<T>(premise, conclusion);
    }

    public static Infers<T> Infers<T>(this T premise, T conclusion)
    {
        return new Infers<T>(premise, conclusion);
    }
}

public class Foo
{
    // The things you wish to implement :-)
    public static bool Evaluate(Implies<int> impl)
    {
        return impl.premise == (impl.conclusion & impl.premise);
    }

    static void Main(string[] args)
    {
        Implies<int> impl= 0.Implies(2); // will be called directly
        Infers<int> impl2 = 0.Infers(2); // will be converted

        Console.WriteLine("Res: {0} {1}", Evaluate(impl), Evaluate(impl2));

        Console.ReadLine();
    }
} 
```

# c++ - 将信号 (SIGINT) 传播到 C++11 线程

> ID：15658016
> 
> 赞同：8
> 
> 时间：2013-03-27T11:45:13.487
> 
> 标签：c++, multithreading, c++11, signals

我正在尝试在接收到 SIGINT 信号（`^C`它是）时正确终止我的多线程 C++11 应用程序，但由于某种原因，它不会传播到子线程，尽管主线程对它的响应很好。

例如（如下面的代码示例），如果我们在线程内部有一个阻塞函数`sleep()`（比如`^C``sigaction()`

有没有办法修复或解决这种行为？有没有办法将主接收的信号传播到子线程？

**编辑**`sleep()`：用 C++11替换 POSIX`std::this_thread::sleep_for()`

```
#include <iostream>
#include <thread>
#include <chrono>
#include <signal.h> // for sigaction() function 

static int signaled = 0;

void threaded_foo() {
  while (!signaled) {
    // pressing ^C now will not lead to correct termination, because we are
    // sleeping for a long time (100500 seconds) and do not respond to
    // SIGINT for some tricky reason i am looking a bypassage for.
    std::chrono::seconds duration(100500);
    std::this_thread::sleep_for(duration);
  }
  std::cout << "Correct termination\n";
}

void sighandler(int sig, siginfo_t *siginfo, void *context) {
  signaled = 1;
}

void install_sig_hooks() {
  struct sigaction action;
  memset(&action, 0, sizeof(struct sigaction));
  action.sa_sigaction = sighandler;
  action.sa_flags     = SA_SIGINFO;
  sigaction(SIGINT, &action, NULL);
}

int main(int argc, char **argv) {
  install_sig_hooks();

  std::thread t(threaded_foo);
  t.join();
  return 0;
} 
```

**EDIT2** 因此，解决方案是用非阻塞对应项以及条件变量和轮询等机制替换所有阻塞调用。

实际问题仍未得到解答，因为当前的软件（可能还有硬件）的设计方式不是在一个线程中处理信号，而是应该告诉其他人在接收信号时要做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:06:22.973

> 我试图在接收到 SIGINT 信号（^C 它是）后正确终止我的多线程 C++11 应用程序，但由于某种原因，它不会传播到子线程，尽管主线程对它的响应很好。

[POSIX 区分针对进程或线程的信号](http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html)。在任何一种情况下，只有一个线程接收到信号：

> 在生成时，应确定该信号是为进程还是为进程内的特定线程生成的。由可归因于特定线程的某些动作（例如硬件故障）生成的信号应为导致生成信号的线程生成。应为进程生成与进程 ID 或进程组 ID 或异步事件（例如终端活动）相关联的信号。
> 
> > ...
> 
> ... 为进程生成的信号应准确传送到进程中的那些线程之一，这些线程正在调用选择该信号的 sigwait() 函数或没有阻止信号的传递。如果在调用 sigwait() 函数时没有线程选择该信号，并且如果进程内的所有线程都阻塞了信号的传递，则该信号应在进程上保持挂起状态，直到线程调用 sigwait() 函数选择该信号信号，线程解除对信号的传递的阻塞，或者与信号相关的动作被设置为忽略信号。

在多线程进程中，一种常见的解决方案是阻止一个打算在除一个线程之外的所有线程中处理的进程信号。该线程通常会处理所有进程信号并告诉其他线程要做什么（例如终止）。

另外，因为`signaled`是由信号处理程序设置的，所以应该声明它，这是引入`volatile`的两个用例之一：`volatile`

```
static int volatile signaled = 0; 
```

# c# - 如何配置 NServiceBus 以使用远程 MSMQ 队列？

> ID：15658018
> 
> 赞同：3
> 
> 时间：2013-03-27T11:45:28.713
> 
> 标签：c#, msmq, nservicebus

我尝试使用 NServiceBus 版本 3 来接收从远程客户端机器发送到 MSMQ 队列的消息。客户端与目标队列所在的机器位于同一个域中。后一种机器运行 Windows Server 2008 R2（MSMQ 版本 5.0）作为操作系统。考虑到 NServiceBus 文档，我以“QueueName@MachineName”的形式指定了端点名称。但是，消息**没有发送**到指定的队列。似乎“MessageQueue”类的“Transactional”属性导致了问题。所以我绕过了在 NServiceBus 源代码中访问该属性。结果消息发送成功，但**没有收到回复消息**在客户端。更准确地说，当我查看服务器管理器窗口上的消息信息时，响应队列的名称是空的。**仅当远程发送消息时才会发生这种情况。**看来我设置了一些配置不正确。我想知道我需要提供哪些配置信息才能使 NServiceBus 在提到的上下文中工作。此外，是否有示例项目演示如何使用 NServiceBus 向远程队列发送消息并接收相应的回复消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:05:31.737

如果您将客户端进程配置为仅发送端点，则它不会在它发送的消息中包含其返回地址，这意味着服务器将无法响应。话虽如此，我认为这不是你的问题。

您应该尝试在您的机器上运行 NServiceBus 附带的全双工示例，以查看它是否正常工作。如果没有，这意味着您在那些需要纠正的机器上存在更深层次的安装问题。

# java - MyBatis 升级导致构建错误

> ID：15658021
> 
> 赞同：0
> 
> 时间：2013-03-27T11:45:54.637
> 
> 标签：java, gradle, java-7, mybatis, jdk6

在我使用 Gradle（Windows 7、Java 1.7.0.15）构建的现有项目中，我已经升级了 Mybatis 库，如下所示：

```
// MyBatis      
compile "org.mybatis:mybatis:3.2.1"
compile "org.mybatis:mybatis-spring:1.2.0"  

//compile "org.mybatis:mybatis:3.0.6"
//compile "org.mybatis:mybatis-spring:1.0.2" 
```

现在，当我构建时，出现以下错误：

```
11:38:37.308 [INFO] [org.gradle.api.internal.tasks.compile.jdk6.Jdk6JavaCompiler]
Compiling with JDK 6 Java compiler API.
11:38:39.147 [ERROR] [system.err] ...java:14: error: DateTimeHandler is not abstract and does not override abstract method getNullableResult(ResultSet,int) in BaseTypeHandler
11:38:39.153 [ERROR] [system.err] public class DateTimeHandler extends BaseTypeHandler<DateTime> {
11:38:39.274 [ERROR] [system.err] Note: Some input files use or override a deprecated API.
11:38:39.279 [ERROR] [system.err] Note: Recompile with -Xlint:deprecation for details.
11:38:39.284 [ERROR] [system.err] 1 error 
```

我已经检查了这个类一百次，它确实覆盖了正确的方法（事实上 Eclipse 同意它没有显示错误）。

我不知道为什么在一切都应该在 Java 7 之下时使用内部 Gradle 类 jdk6。有人知道这里发生了什么 id 吗？

Gradle 不喜欢的类：

```
import java.sql.CallableStatement;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import org.apache.ibatis.type.BaseTypeHandler;
import org.apache.ibatis.type.JdbcType;
import org.apache.ibatis.type.MappedTypes;
import org.joda.time.DateTime;

@MappedTypes(value = DateTime.class)
public class DateTimeHandler extends BaseTypeHandler<DateTime> {

    public DateTimeHandler() {
    }

    @Override
    public void setNonNullParameter(PreparedStatement ps, int i, DateTime parameter, JdbcType jdbcType) throws SQLException {
        ps.setTimestamp(i, new java.sql.Timestamp((parameter.toDate()).getTime()));
    }

    @Override
    public DateTime getNullableResult(ResultSet rs, String columnName) throws SQLException {
        java.sql.Timestamp sqlTimestamp = rs.getTimestamp(columnName);
        if (sqlTimestamp != null) {
            return new DateTime(sqlTimestamp.getTime());
        }
        return null;
    }

    @Override
    public DateTime getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {
        java.sql.Timestamp sqlTimestamp = cs.getTimestamp(columnIndex);
        if (sqlTimestamp != null) {
            return new DateTime(sqlTimestamp.getTime());
        }
        return null;
    }
} 
```

但据我所知，它没有任何问题。正确的方法被覆盖。

确定修复了构建：

在方法中添加：

public DateTime getNullableResult(ResultSet rs, int columnIndex) 抛出 SQLException；

如果我在此方法上使用覆盖注释，但没有注释 Gradle 构建成功完成，则会出现 Eclipse 错误。如果该方法被删除，Gradle 会产生一个错误，指出该类需要覆盖具有该签名的方法（或被声明为抽象）。

因此，尽管我的问题已解决，但我并不真正了解此错误的性质。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:15:59.900

Gradle 支持多种调用 Java 编译器的方式。其中之一是通过 JDK 6 Java 编译器 API，它存在于 JDK 6 及更高版本中。`gradle -v`会告诉你哪个 JDK 用于执行 Gradle。默认情况下，相同的 JDK 将用于编译 Java 代码。

至于编译错误，我需要更多信息来帮助（Gradle 版本、源代码、`compile`类路径的打印输出、可重现的示例等）。如果代码在 Eclipse 中编译而不在 Gradle 中编译，则 Gradle 和 Eclipse 的配置可能不同，例如在它们的编译类路径方面。

# wpf - 动画用户控件的可见性

> ID：15658023
> 
> 赞同：2
> 
> 时间：2013-03-27T11:45:56.263
> 
> 标签：wpf, animation, user-controls, visibility

我有一个用户控件，它为可见性隐藏和显示定义情节提要（根是用户控件中的顶级网格控件）：

```
<Storyboard x:Key="VisibleStoryboard">
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Root" Storyboard.TargetProperty="Visibility">
        <DiscreteObjectKeyFrame Value="{x:Static Visibility.Visible}" KeyTime="0" />
    </ObjectAnimationUsingKeyFrames>

    <DoubleAnimation Storyboard.TargetName="RootScale" Storyboard.TargetProperty="ScaleY" From="0" To="1" Duration="{StaticResource Duration}" />

    <DoubleAnimation Storyboard.TargetName="Root" Storyboard.TargetProperty="Opacity" To="1" Duration="{StaticResource Duration}"/>
</Storyboard>

<Storyboard x:Key="CollapsedStoryboard">
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Root" Storyboard.TargetProperty="Visibility">
        <DiscreteObjectKeyFrame Value="{x:Static Visibility.Collapsed}" KeyTime="{StaticResource DurationKeyTime}" />
    </ObjectAnimationUsingKeyFrames>

    <DoubleAnimation Storyboard.TargetName="RootScale" Storyboard.TargetProperty="ScaleY" From="1" To="0" Duration="{StaticResource Duration}" />

    <DoubleAnimation Storyboard.TargetName="Root" Storyboard.TargetProperty="Opacity" To="0" Duration="{StaticResource Duration}"/>
</Storyboard> 
```

当控件的可见性发生变化时，我正在应用这些故事板：

```
static MyControl()
{
    VisibilityProperty.OverrideMetadata(typeof(Warning), new PropertyMetadata(VisibilityChanged));
}

private static void VisibilityChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var element = (FrameworkElement)d;

    switch ((Visibility)e.NewValue)
    {
        case Visibility.Visible:
            ((Storyboard)element.FindResource("VisibleStoryboard")).Begin(element);
            break;
        case Visibility.Collapsed:
            ((Storyboard)element.FindResource("CollapsedStoryboard")).Begin(element);
            break;
    }
} 
```

可见的故事板工作正常。但是，折叠的故事板不起作用，因为用户控件的可见性立即设置为折叠，使其在故事板运行之前消失。

在情节提要生效之前，如何延迟或覆盖用户控件可见性的实际设置？

# emacs - 为所有模式启用 preview-latex

> ID：15658025
> 
> 赞同：0
> 
> 时间：2013-03-27T11:46:02.063
> 
> 标签：emacs, emacs23

我可以在任何 Tex 缓冲区上成功使用 preview-latex，而且效果很好。

我想知道如何为*任何*模式启用预览功能，例如基本模式或任何其他编程语言模式。我试过了，我得到了

```
TeX-region-create: Wrong type argument: stringp, nil 
```

我对 Ein 模式（ipython 笔记本模式）的这项工作特别感兴趣。我也尝试在这种模式下预览，我收到 Ein 的投诉，说我所在的点是只读的。

[http://tkf.github.com/emacs-ipython-notebook/](http://tkf.github.com/emacs-ipython-notebook/)

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:44:47.620

将“preamble.tex”文件或您自己的 LaTeX 文件复制到您的工作目录，并将`'TeX-master`变量设置为“preamble.tex”文件的路径。此外，设置`'TeX-header-end`和`'TeX-trailer-start`。基本上，将以下内容添加到您的模式挂钩中：

```
(set 'TeX-header-end "^[^%\n]*\\\\begin *{document}")
(set 'TeX-trailer-start "^[^%\n]*\\\\end *{document}")
(set 'TeX-master "/path/to/preamble.tex")
(cd "/path/to/") 
```

内容`preamble.tex`：

```
\documentclass[12pt,a4paper]{report}
\usepackage{amssymb,amsmath,amsthm}
\begin{document}
\end{document} 
```

我最近没有检查过这个，但它很久以前对我有用。如果您取得了进展，请告诉我，我会更新我的答案。

# python - 计算数组元素落在某个范围内的频率

> ID：15658027
> 
> 赞同：0
> 
> 时间：2013-03-27T11:46:18.100
> 
> 标签：python, arrays

基本上，我正在尝试我的一位同行给我的一个问题，以帮助我使用 python。我必须计算给定值在距数组“边缘”一定距离内的频率。

我使用 rand(100,100) 生成了一个 100x100 的数组，其中填充了随机变量。但是从那里我很困惑。

据我所知，我必须声明范围，然后使用计数器来计算该范围内的元素，但老实说我不知道​​。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:41:35.567

我不是 100% 清楚“在距离数组的‘边缘’一定距离内”的含义，但我假设你有一个 numpy 数组，并且你正在尝试计算一个上层和下限，在这种情况下，您可以使用：

```
((lowerBound < numpyArray) & (numpyArray < upperBound)).sum() 
```

在哪里：

lowerBound 和 upperBound 是介于 0 和 1 之间的浮点变量

numpyArray 是您生成的数组

# ios - CoreData、Magical Record 和 mogenerator

> ID：15658029
> 
> 赞同：2
> 
> 时间：2013-03-27T11:46:32.907
> 
> 标签：ios, objective-c, core-data, magicalrecord, mogenerator

我刚刚安装`mogenerator`以`Managed Objects`在我的项目中创建。

我以前没有工作`mogenerator`。

我也在用`MagicalRecord`。

我有一个实体`Message`，我正在尝试运行这条线......

```
return [Message countOfEntitiesWithPredicate:[NSPredicate predicateWithFormat:@"user == 123"]]; 
```

但我`unrecognized selector`在这条线上遇到了一个错误。

如果我将其更改为...

```
return [_Message countOfEntitiesWithPredicate:[NSPredicate predicateWithFormat:@"user == 123"]]; 
```

它工作正常。但愚蠢的是，我在几行之后使用不同的谓词执行相同的功能，并且在没有修复的情况下它可以正常工作。我试过不使用谓词但得到相同的结果。

**编辑**

我只是试着评论这条线并把......

```
return 0; 
```

现在我在第二次使用这条线时得到了无法识别的选择器。这几乎就像我必须通过`_Message`首先调用它来“初始化”CoreData？！？！

有任何想法吗？

**编辑 2**

我在尝试跑步时也遇到了这个问题......

```
[Message createEntity]; 
```

相同的无法识别的选择器。如果它要对我所有的核心数据内容执行此操作，这将非常烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T23:15:02.897

我有一个类似的问题。我意识到核心数据不喜欢名为“消息”和“连接”的实体。用我的自定义前缀为这些前缀解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:08:15.203

我不知道 100% 这就是答案，但是当我在 iPhone 模拟器中使用 AppCode 运行项目时，我看到一条奇怪的调试消息，说 Message 类被实现了两次。

它一定是在我正在使用的另一个框架中实现的。

当我将核心数据实体的名称改回更独特的名称时，它运行良好。

我很惊讶这个编译在所有 TBH 中。

# opengl - 使用着色器在 2D 环境中实现视野

> ID：15658031
> 
> 赞同：2
> 
> 时间：2013-03-27T11:46:46.200
> 
> 标签：opengl, glsl, shader

我正在实现动态视野。我决定使用着色器以使照明更好看以及它如何影响墙壁。这是我正在处理的场景：http: [//i.imgur.com/QxZVyo7.jpg](https://i.imgur.com/QxZVyo7.jpg)

1.  我有一张地图，有平坦的地板和墙壁。这里的所有东西都是 2d 的，没有 3d 几何，只有 2d 多边形构成墙壁。

2.  使用我投射阴影的多边形的顶点来定义可视区域。（紫色线条是我下一步使用的蒙版的一部分）

3.  在场景顶部绘制阴影时使用着色器，我避免了墙壁也被遮挡。

4.  这样，随着视野的变化，阴影会沿着墙壁动态投射

我使用以下着色器来实现这一点。但我觉得这有点矫枉过正，而且真的非常低效：

```
uniform sampler2D texture;
uniform sampler2D filterTexture;
uniform vec2 textureSize;
uniform float cellSize;
uniform sampler2D shadowTexture;

void main()
{
    vec2 position;
    vec4 filterPixel;
    vec4 shadowPixel;
    vec4 pixel = texture2D(texture, gl_TexCoord[0].xy );

    for( float i=0 ; i<=cellSize*2 ; i++)
    {
        position = gl_TexCoord[0].xy;
        position.y = position.y - (i/textureSize.y);
        filterPixel = texture2D( filterTexture, position );

        position.y = position.y - (1/textureSize.y);
        shadowPixel = texture2D( texture, position );

        if (shadowPixel == 0){
            if( filterPixel.r == 1.0 )
            {
                if( filterPixel.b == 1.0 ){
                    pixel.a = 0;
                    break;
                }
                else if( i<=cellSize )
                {
                    pixel.a = 0;
                    break;
                }
            }
        }
    }

    gl_FragColor = pixel;
} 
```

迭代每个帧只是为了寻找掩码中的红色像素似乎是一个巨大的过载，但我看不到如何通过使用着色器以任何其他方式完成此任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:42:34.713

这里的解决方案非常简单：使用阴影贴图。

您的情况可能是 2D 而不是 3D，但基本概念是相同的。您想根据世界上某个点与“光源”（在您的情况下为玩家角色）之间是否存在障碍表面来“遮蔽”区域。

在 3D 中，阴影贴图的工作原理是从光源的角度渲染世界。这会产生一个 2D 纹理，其中的值表示从光（在特定方向）到最近的障碍物的深度。真实渲染场景时，通过将当前片段投影到 2D 深度纹理（阴影贴图）中来检查当前片段的位置。如果您为当前片段计算的深度值比阴影贴图中投影位置中最近的障碍物更近，则该片段在灯光下是可见的。如果不是，那就不是。

您的 2D 版本必须做同样的事情，只是少了一个维度。您从“光源”的角度渲染您的 2D 世界。在这种情况下，您的 2D 世界实际上只是阻碍四边形（您必须使用线多边形填充来渲染它们）。任何阻碍视线的四边形都应渲染到阴影贴图中。纹理访问是完全没有必要的；您需要的唯一信息是深度。您的着色器甚至不必编写颜色。您可以通过将 2D 空间投影到 1D 纹理来渲染这些对象。

这看起来像这样：

```
 X..X
XXXXXXXX..XXXXXXXXXXXXXXXXXXXX
X.............\.../..........X
X..............\./...........X
X...............C............X
X............../.\...........X
X............./...\..........X
X............/.....\.........X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

`C`是角色的位置；这些点只是规则的，通畅的地板。`X`s 是墙壁。来自的线条`C`代表您需要从中渲染 2D 线条的四个方向。

在 3D 中，要对点光源进行阴影贴图，您必须将场景在 6 个不同方向上渲染 6 次到立方体阴影贴图的面中。在 2D 中，您必须在 4 个不同的方向上将场景渲染 4 次，生成 4 个不同的 1D 阴影贴图。您可以为此使用一维数组纹理。

一旦有了阴影贴图，您只需在着色器中使用它们来检测片段何时可​​见。为此，您需要将一组从窗口空间转换为 4 个不同的投影，这些投影代表您渲染到的 4 个视图方向。根据片段相对于目标的位置，只有其中一个将用于任何特定片段。

为了实现这一点，我将从一个简单的定向“阴影”案例开始。也就是说，不要使用位置；只是一个“光”的方向。这将测试您开发 2D 到 1D 投影矩阵的能力，以及将您的世界空间四边形转换为相机空间的适当相机空间矩阵的能力。一旦你掌握了这一点，你就可以用不同的预测来做 4 次。

# yii - yii中没有模型的下拉菜单

> ID：15658038
> 
> 赞同：0
> 
> 时间：2013-03-27T11:47:13.397
> 
> 标签：yii

我正在使用一个组件来解析 yii 中的国家/地区 api。所以在表单下拉列表中调用列出国家的函数。该函数将国家/地区列表作为数组返回。表单.php

```
<?php echo $form->labelEx($model,'country'); ?>
<?php $cty=  Country::getCountry();
      echo $form->dropdownList($model,'country', $cty , array('style'=>'width: 175px','empty'=>array('empty'=>Yii::t('app','Select Country'))));?> 
```

现在，国家/地区列表在下拉列表中正确加载，但是在节省时间时，国家/地区的相应 ID 被保存。我想将国家名称保存在数据库中。它是如何解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:57:35.427

您必须使用所需的键/值构建自己的自定义数组，例如：

```
$cty = Country::getCountry();
$cty = array_combine(array_values($cty), $cty); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T20:50:12.250

您可以使用这种方式（如果您需要 Country 表的所有项目）

```
$cty = CHtml::listData(Country::model()->findAll(), 'name', 'name'); 
```

# maven - 依赖层次结构不使用父pom的属性？

> ID：15658040
> 
> 赞同：1
> 
> 时间：2013-03-27T11:47:20.693
> 
> 标签：maven, maven-3

我有一个问题，我想知道是否有人可以帮助我解决。我的项目中有一个模块结构，我使用 Maven 解决依赖关系。对于这个结构，我有不同内容的版本，我使用分类器来区分。对于每个分类器，我在父 pom 中定义了一个配置文件，其中包含属性中分类器的字符串。这样，在我的模块中，我使用了这个属性，并且是我定义的配置文件，谁决定了分类器常量。我现在遇到的问题是，当依赖关系是从我在我的一个模块的 pom 中定义的依赖关系继承时，依赖层次结构无法识别分类器。例如，如果我有项目 A、B 和 C，B 依赖于 A，C 依赖于 B，从 C 中我得到 B 和分类器，而不是 A。如果我使用父 pom 中的属性，就会发生这种情况。如果我直接使用常量字符串，则依赖项会被正确捕获。我看到的唯一解决方案是在每个 pom 上使用配置文件来定义它们内部的依赖关系。但我有 5 个配置文件！难道没有其他方法可以解决这个问题吗？我正在使用带有 m2e 插件的 STS 3.8 作为我的 IDE。

先感谢您！

我添加了 poms

父pom：

```
<profiles>
    <profile>
        <id>TRUNK</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <svnBranch />
        </properties>
    </profile>
    <profile>
        <id>MON</id>
        <properties>
            <svnBranch>MON</svnBranch>
        </properties>
    </profile>
    <profile>
        <id>LOLA</id>
        <properties>
            <svnBranch>LOLA</svnBranch>
        </properties>
    </profile>
    <profile>
        <id>NBA</id>
        <properties>
            <svnBranch>NBA</svnBranch>
        </properties>
    </profile>
    <profile>
        <id>TEST</id>
        <properties>
            <svnBranch>TEST</svnBranch>
        </properties>
    </profile>
    <profile>
        <id>PROD</id>
        <properties>
            <svnBranch>PROD</svnBranch>
        </properties>
    </profile>
</profiles> 
```

项目一：

```
<parent>
    <groupId>com.myproject</groupId>
    <artifactId>pom</artifactId>
    <version>1.0.10</version>
</parent>

<artifactId>core-services</artifactId>
<version>1.1.0.41-SNAPSHOT</version> 
```

项目B：

```
<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>pom</artifactId>
    <version>1.0.10</version>
</parent>

<artifactId>olb-services</artifactId>
<version>1.1.0.41-SNAPSHOT</version>

<properties>
    <module.core-services.dependency.version>1.1.0.41-SNAPSHOT</module.core-services.dependency.version>
</properties>

<dependencies>
    <dependency>
        <groupId>com.mycompany</groupId>
        <artifactId>core-services</artifactId>
        <version>${module.core-services.dependency.version}</version>
        <classifier>${svnBranch}</classifier>
    </dependency>
</dependencies> 
```

项目 C：

```
<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>pom</artifactId>
    <version>1.0.10</version>
</parent>

<artifactId>nba-services</artifactId>
<version>1.1.0.41-SNAPSHOT</version>

<properties>
    <module.olb-services.dependency.version>1.1.0.41-SNAPSHOT</module.olb-services.dependency.version>
    <module.core-services.dependency.version>1.1.0.41-SNAPSHOT</module.core-services.dependency.version>
</properties>

<dependencies>
    <dependency>
        <groupId>com.mycompany</groupId>
        <artifactId>olb-services</artifactId>
        <version>${module.olb-services.dependency.version}</version>
        <classifier>${svnBranch}</classifier>
    </dependency>
    <dependency>
        <groupId>com.mycompany</groupId>
        <artifactId>core-services</artifactId>
        <version>${module.core-services.dependency.version}</version>
        <classifier>${svnBranch}</classifier>
    </dependency>
</dependencies> 
```

在每个依赖项的分类器标记中使用 ${svnBranch} 不起作用。看起来在项目 B 中，当项目 C 引用时，属性 ${svnBranch} 为空，但它来自父 pom。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:31:20.577

在 Maven 中，您只能在子 pom 中使用在父级别定义的配置文件，如果您只能通过传递 -D{activation.property}=value 或 -P{profile.id/s} 在构建时激活它。

您不能在父母中定义配置文件并尝试在您的子 pom 中激活它，因为配置文件不能被继承（根据您的示例，您甚至没有尝试在子 pom 中激活）。

换句话说，除非配置文件默认激活，否则 maven 不知道它（在您的情况下，您可能想默认激活所有内容，但请记住，当时默认情况下只能激活一个配置文件）

您的问题是来自 TRUNK 的 ${svnBranch} 仅存在于您的子 pom 中并且没有任何价值，因此 maven 仅作用于 GAV 而不是分类器。并证明检查您孩子的有效 pom (mvn help:effective-pom)。您还可以检查哪些个人资料处于活动状态，哪些没有（mvn help:all-profiles）。

我不认为使用配置文件是您正在做的事情的最佳方法。例如，更好/更简单的方法可能是仅在父级的正常属性中声明您的分支名称。

```
<properties>
 <svnBranch.lola>LOLA</svnBranch.lola>
 <svnBranch.nba>NBA</svnBranch.nba>
</properties> 
```

然后您的孩子根据需要使用。

```
<dependencies>
    <dependency>
        <groupId>com.mycompany</groupId>
        <artifactId>olb-services</artifactId>
        <version>${module.olb-services.dependency.version}</version>
        <classifier>${svnBranch.lola}</classifier>
    </dependency>
    <dependency>
        <groupId>com.mycompany</groupId>
        <artifactId>core-services</artifactId>
        <version>${module.core-services.dependency.version}</version>
        <classifier>${svnBranch.nba}</classifier>
    </dependency>
</dependencies> 
```

# class - 由于 cdecl 和 myclass 冲突导致的错误 C2664

> ID：15658049
> 
> 赞同：0
> 
> 时间：2013-03-27T11:47:51.653
> 
> 标签：class, visual-c++, cdecl, c2664

我正在尝试将 C 中的一段旧代码加入到我目前的 VC++ 项目中：

```
// .h
    class DMSinv : public CDialog {
        double finte(double z);
        double ITFStolz(double Zp1, double Zp2, double Zc);
    };

// .cpp
    double Zcglob;
    double DMSinv::finte(double z) 
    {
       return TFStolz(z, Zcglob);
    }

    double DMSinv::ITFStolz(double Zp1, double Zp2, double Zc)
    {
        int ierr;
        Zcglob = Zc;

        return (coteglob(&DMSinv::finte, Zp1, Zp2, 1.0e-10, &ierr));
    //error C2664: 'DMSinv::coteglob' : cannot convert parameter 1 from 'double (__thiscall DMSinv::* )(double)' to 'double (__cdecl *)(double)'    

    } 
```

coteglob 函数来自旧的 C 部分，finte 是一个中间函数，将 TFStolz 函数传递给 coteglob。

我在论坛中搜索并发现了这个相关问题： [How to convert void (__thiscall MyClass::*)(void *) to void (__cdecl *)(void *) pointer](https://stackoverflow.com/questions/5326251/how-to-convert-void-thiscall-myclass-void-to-void-cdecl-void) 我试图以这种方式应用：

```
// .h
    class DMSinv : public CDialog {
        virtual double finte(double z);
        double ITFStolz(double Zp1, double Zp2, double Zc);
    };

// .cpp
    double Zcglob;
    extern "C"
    {
        static double __cdecl finteHelper(double z)
        {
            DMSinv* datainv = reinterpret_cast< DMSinv > (z); //error C2440: 'reinterpret_cast' : cannot convert from 'double' to 'DMSinv'  

            datainv->finte(z);
        }
    }

    double DMSinv::ITFStolz(double Zp1, double Zp2, double Zc)
    {
        int ierr;
        Zcglob = Zc;
        double solution = coteglob(&finteHelper, Zp1, Zp2, 1.0e-10, &ierr);
        return solution;
    } 
```

但仍然无法正常工作。有人可以指导我如何适应它吗？我还是个新手，这似乎与我的知识相去甚远。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:22:19.423

不确定是否可以按照您的意愿进行操作。我想到的唯一选择是使用一些静态变量来存储 DMSinv 对象的地址。这将您限制为 1 个线程，实现简单...

尝试这个：

```
// .h
class DMSinv : public CDialog {
    double finte(double z);
    double ITFStolz(double Zp1, double Zp2, double Zc);

private:
  static DMSinv* _current;
  static double __cdecl finteHelper(double z);
};

// .cpp
double Zcglob;
DMSinv* DMSinv::_current = 0;
double DMSinv::finte(double z) 
{
   return TFStolz(z, Zcglob);
}

double DMSinv::ITFStolz(double Zp1, double Zp2, double Zc)
{
    int ierr;
    Zcglob = Zc;

   _current = this;
   return (coteglob(DMSinv::finteHelper, Zp1, Zp2, 1.0e-10, &ierr));
}

double __cdecl DMSinv::finteHelper(double z)
{
    return _current->finte(z);
} 
```

这不是 IMO 的好解决方案，但我不确定还有其他方法。

**PS** 要删除一个线程的限制，您可以使用 TLS 插槽或在 VC++ 中仅使用[__declspec(thread)](http://msdn.microsoft.com/en-us/library/9w1sdazb.aspx)。后者只需添加`__declspec(thread)`如下`_current`： `static __declspec(thread) DMSinv* _current;`. 但！！！请注意，每个线程变量的数量对于进程是有限的。在 MSDN 中阅读有关此内容的更多信息。

**更新**

免责声明：只是为了好玩。

理论上，还有其他机会。您可以将汇编代码存储在数组中，附加到对象。这个汇编代码应该是一个 __cdecl 函数，它根据 eip 寄存器简单地将 __cdecl 转换为 __thiscall。但这永远不应该这样做......：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:19:56.103

我不认为你可以这样做。您需要以某种方式将引用传递给您的对象 ( `this`)。在链接的问题中，函数的参数被定义为类型，`void *`因此您可以将所需的任何内容传递给函数，包括指向`this`. 你的函数接受`double`，所以你不能传递`this`给它。

我认为最简单的方法是在类外定义中间函数，因为它似乎独立于类内部。像这样的东西：

```
double finte(double z) 
{
   return TFStolz(z, Zcglob);
} 
```

您还可以将实例指针存储在静态函数可以读取的公共全局/静态类内变量中。

# php - 使用 ID 收集 Google 帐户数据

> ID：15658052
> 
> 赞同：0
> 
> 时间：2013-03-27T11:48:02.003
> 
> 标签：php, api, openid

我想允许用户使用他们的 Google 帐户登录我的网站。我希望能够得到他们的会话；如果他们实际登录，他们的电子邮件和他们的谷歌名称。

我目前有一个谷歌登录系统，它运行良好，一旦他们登录，就会给出这个代码

“用户[https://www.google.com/accounts/o8/id?id=AItOawlaxJIBB-bwC8Yc49r5GNNRsdQiD1Fs2dU](https://www.google.com/accounts/o8/id?id=AItOawlaxJIBB-bwC8Yc49r5GNNRsdQiD1Fs2dU)已登录。”

我想知道如何从这个 id 获取他们的帐户信息，比如他们的电子邮件，如果 id 是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:50:20.510

好吧，你不能。这是一个隐私的事情。您能做的最好的事情就是稍后向他们询问信息。

# ipc - 为什么该行没有复制到子进程的地址空间中？

> ID：15658053
> 
> 赞同：1
> 
> 时间：2013-03-27T11:48:02.887
> 
> 标签：ipc

```
 #include<stdio.h>---->(1)
    int main()
    {
        int i;
        int j,K;
        j = 200;
        K = 300;
        printf("Before forking: j = %d, K = %d\n ", j, K);---->(2)
        i = fork();---->(3) /* Calling fork() */
       if (i > 0) { /* Parent Process */ ----->(4)    
         sleep(10);/* Delay the parent */
         printf("After forking, parent: j = %d, K = %d\n", j, K);
       } ----->(5)

      else {----->(6)  /* Child process */
        j++;
        K++;
        printf("After forking, child: j = %d, K = %d\n", j, K);
      }---->(7)

   o/p of the above pgm is 
   Before forking: j = 200, K = 300
   After forking, child: j = 201, K = 301
   After forking, parent: j = 200, K = 300. 
```

由于我是 IPC 的初学者，因此在首先回答问题之前，我想确保我的理解是正确的。line# (1) 到第 (2) 行和第 (4) 行到第 5 行构成父进程和第 (6) 行) 到第 (7) 行构成子进程，fork() 之上的任何内容，即从第 (1) 行到第 (2) 行的任何内容都被复制到子进程的地址空间。我对上述观点是否正确？那么为什么第（2）行没有打印两次，一个在子进程中，另一个在父进程中。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:56:19.520

子进程继承父进程的上下文并在 fork() 之后继续执行。通常，exec() 在 child 中的 follow() 之后调用，exec() 覆盖 parent 的上下文，并让 child 全新运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:51:00.593

父母和孩子都从调用 到 之后继续`fork()`。孩子不再从`main()`.

（如果您希望子进程从头开始，则应在子进程中立即使用`fork()`后续。）`exec()`

# c# - HttpWebRequest 每次都不起作用

> ID：15658058
> 
> 赞同：0
> 
> 时间：2013-03-27T11:48:25.283
> 
> 标签：c#, httpwebrequest

我正在做一个`WebRequest`，`Uri`但问题是我每次都没有得到回应。有时我需要重做。我希望我的程序检查它是否没有响应，如果是，程序将自动调用方法，`WebRequest`直到我得到响应。

在伪代码中

```
while(response == null)
{
    try it again
} 
```

这是我的功能。大写评论是对我的问题的解释

```
private string HttpWebRequest()
{
    string xml = @"<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<Siri version='1.0' xmlns='http://www.siri.org.uk/'>
  <ServiceRequest>
    <RequestTimestamp>2011-10-24T15:09:12Z</RequestTimestamp>
    <RequestorRef><USERNAME></RequestorRef>
    <StopMonitoringRequest version='1.0'>
      <RequestTimestamp>2011-10-24T15:09:12Z</RequestTimestamp>
      <MessageIdentifier>12345</MessageIdentifier>
      <MonitoringRef>020035811</MonitoringRef>
    </StopMonitoringRequest>
  </ServiceRequest>
</Siri>";

    string responseFromServer = null;

    WebRequest request = WebRequest
    .Create("http://<USERNAME>:<PASSWORD>@nextbus.mxdata.co.uk/nextbuses/1.0/1");

    request.Method = "POST";
    string postData = xml;

    byte[] byteArray = Encoding.UTF8.GetBytes(postData);
    request.ContentType = "application/x-www-form-urlencoded";
    request.ContentLength = byteArray.Length;
    Stream dataStream = request.GetRequestStream();
    dataStream.Write(byteArray, 0, byteArray.Length);

    dataStream.Close();

    ////////IF I GET NO RESPONSE EVERYTHING AFTER THE NEXT LINE WILL BE IGNORED
    WebResponse response = request.GetResponse();
    ///////////THIS MESSAGEBOX WILL BE IGNORED
    MessageBox.Show(((HttpWebResponse)response).StatusDescription+" Completed");

    dataStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(dataStream);
    responseFromServer = reader.ReadToEnd();

    reader.Close();
    dataStream.Close();
    response.Close();

    return responseFromServer;
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T16:15:47.970

我在这台服务器上遇到了同样的 401 问题，而不是按照 traveline 文档将您的用户名和密码放在 url 中，而是使用“凭据”：-

```
string travelineUrl = "http://nextbus.mxdata.co.uk/nextbuses/1.0/1";        
var travelineRequest = (HttpWebRequest)WebRequest.Create(travelineUrl);
travelineRequest.Credentials = new NetworkCredential("yourusername", "yourpassword"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:02:53.950

如果您只想在返回的结果最终为空时重试。为什么不这样做：

```
private void RunWebrequest()
{
     if (HttpWebRequest() == null)
     {
          RunWebrequest();
     }
     else
     {
          //continue
     }
} 
```

# .net - interop dll如何轻松更新？

> ID：15658063
> 
> 赞同：4
> 
> 时间：2013-03-27T11:48:49.923
> 
> 标签：.net, visual-studio, com, com-interop, tlbimp

假设我们在 VS 2005 (VB .Net) 中有一个 .NET 项目。该项目使用非 GUI COM 对象。当我添加对该对象的引用时，VS 会创建互操作 dll。但是我在另一个项目中向 COM 对象添加了新方法。如何在不显式调用的情况下更新互操作 dll `tlbimp`？我希望 Intellisense 显示此 COM 对象中的新方法列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:09:43.097

如果我对您的理解正确，您将拥有一个 COM 服务器（显然是进程内 / DLL），它承载您正在更新的对象。当您尚未编译 COM 服务器时，您希望这些更新可以通过客户端项目中的 IntelliSense 获得，对吧？

如果是这样：这是不可能的。让我描述一下原因：

IntelliSense 仅为项目的引用构建文档缓存。引用 COM 服务器与引用 .NET 项目不同。对于 .NET 项目，它能够直接从代码模型构建文档缓存。但是 COM 服务器通常是用一种语言描述的，编译器不知道！`tlbimp`生成一个为您调用 COM 服务器的 .NET 包装器。IntelliSense 能够理解包装器（互操作 DLL，它只不过是一个自动生成的 .NET DLL），但不能理解它的实际作用。所以你总是需要保持包装器是最新的。

每当您对 COM 服务器进行更改时，您都需要注册它（使用`regsvr32`），这样更改对客户端“可见”（在本例中为`tlbimp`）。然后，您必须重新添加对 .NET 项目的引用，这会导致`tlbimp`生成 IntelliSense 可以理解的新互操作 DLL。这就是 .NET 环境下与 COM 的交易......

但是，您可以尝试进一步自动化构建过程：

1.  在您的服务器项目中，调用`tlbimp`构建后事件，并让它创建一个[Primary Interop Assembly](http://msdn.microsoft.com/en-us/library/aax7sdch.aspx)。
2.  自动将 PIA 部署到[GAC](http://msdn.microsoft.com/en-us/library/yf1d93sz%28v=vs.110%29.aspx)。
3.  在您的客户端项目（.NET 项目）中，引用 PIA。
4.  每次构建新的服务器项目时，刷新客户端项目中的 IntelliSense 缓存（“编辑”->“智能感知”->“刷新本地缓存”或`Ctrl`+ `Shift`+ `R`）。

希望这可以帮助！

# ruby-on-rails - 在我的 ruby on rails 应用程序中，我调用了 render text: nil，它返回空格标记“”

> ID：15658064
> 
> 赞同：0
> 
> 时间：2013-03-27T11:48:51.173
> 
> 标签：ruby-on-rails, ajax, coffeescript

在我`BillsController`写的

```
def bill_info
   path = Path.find_by_bill_id(params[:id]).try(:url)
   render text: path
end 
```

在我看来，我写了一个`get`方法来调用`bill_info`

使用咖啡脚本

```
$.get ("/bills/<%= @bill.id %>/bill_info"), {}, (data)-> 
```

事实证明，如果`path == nil`它返回`data`等于空格标记“”，我很难理解，请有人好心告诉我为什么？

谢谢

# regex - 使用 Text.Regex.PCRE 解析网页标题的缺失字符

> ID：15658067
> 
> 赞同：4
> 
> 时间：2013-03-27T11:49:02.197
> 
> 标签：regex, haskell, pcre

我最近做了一个网站，需要从 TED 网站上检索谈话标题。

到目前为止，问题是本次演讲所特有的：[弗朗西斯·柯林斯：我们需要更好的药物——现在](http://www.ted.com/talks/francis_collins_we_need_better_drugs_now.html)

从网页源，我得到：

```
<title>Francis Collins: We need better drugs -- now | Video on TED.com</title>
<span id="altHeadline" >Francis Collins: We need better drugs -- now</span> 
```

现在，在 ghci 中，我尝试了这个：

```
λ> :m +Network.HTTP Text.Regex.PCRE
λ> let uri = "http://www.ted.com/talks/francis_collins_we_need_better_drugs_now.html"
λ> body <- (simpleHTTP $ getRequest uri) >>= getResponseBody
λ> body =~ "<span id=\"altHeadline\" >(.+)</span>" :: [[String]]
[["id=\"altHeadline\" >Francis Collins: We need better drugs -- now</span>\n\t\t</h","s Collins: We need better drugs -- now</span"]]
λ> body =~ "<title>(.+)</title>" :: [[String]]
[["tle>Francis Collins: We need better drugs -- now | Video on TED.com</title>\n<l","ncis Collins: We need better drugs -- now | Video on TED.com</t"]] 
```

无论哪种方式，解析后的标题都漏掉了左侧的一些字符，而右侧有一些非预期的字符。这似乎与`--`谈话中的标题有关。然而，

```
λ> let body' = "<title>Francis Collins: We need better drugs -- now | Video on TED.com</title>"
λ> body' =~ "<title>(.+)</title>" :: [[String]]
[["<title>Francis Collins: We need better drugs -- now | Video on TED.com</title>","Francis Collins: We need better drugs -- now | Video on TED.com"]] 
```

幸运的是，这不是问题`Text.Regex.Posix`。

```
λ> import qualified Text.Regex.Posix as P
λ> body P.=~ "<title>(.+)</title>" :: [[String]]
[["<title>Francis Collins: We need better drugs -- now | Video on TED.com</title>","Francis Collins: We need better drugs -- now | Video on TED.com"]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:25:11.503

我的建议是：不要使用正则表达式来解析 HTML。请改用适当的 HTML 解析器。这是一个使用 html-conduit 解析器和 xml-conduit 游标库（以及用于下载的 http-conduit）的示例。

```
{-# LANGUAGE OverloadedStrings #-}
import           Data.Monoid          (mconcat)
import           Network.HTTP.Conduit (simpleHttp)
import           Text.HTML.DOM        (parseLBS)
import           Text.XML.Cursor      (attributeIs, content, element,
                                       fromDocument, ($//), (&//), (>=>))

main = do
    lbs <- simpleHttp "http://www.ted.com/talks/francis_collins_we_need_better_drugs_now.html"
    let doc = parseLBS lbs
        cursor = fromDocument doc
    print $ mconcat $ cursor $// element "title" &// content
    print $ mconcat $ cursor $// element "span" >=> attributeIs "id" "altHeadline" &// content 
```

该代码也可[在 Haskell 学校作为活动代码使用](https://www.fpcomplete.com/user/snoyberg/random-code-snippets/html-crawling)。

# jar - 存储和提供许多具有共享基础内容的压缩档案

> ID：15658068
> 
> 赞同：0
> 
> 时间：2013-03-27T11:49:03.423
> 
> 标签：jar, filesystems, compression, storage, delta

我有一个 Web 服务器，其中包含**许多**可供下载的压缩存档文件（zip 文件）。我想大大减少这些档案在服务器上占用的磁盘空间。

关键的见解是，这些档案实际上*是相同未压缩内容的略有不同的版本*。如果您解压缩这些档案中的任何两个并对结果进行比较，我希望您会发现差异大约是档案总大小的 1%。

这些档案实际上是 JAR 文件，但压缩细节——我相信——无关紧要。但这解释了，以特定压缩格式提供这些档案是不可协商的：这是服务器的基本目的。

**就其本身而言，为这些档案的内容安装差异存储**对我来说不是问题，从而大大减少了档案*集*的磁盘占用空间。有很多方法可以做到这一点，使用[增量编码](https://en.wikipedia.org/wiki/Delta_encoding)或理解共享的压缩文件系统（例如，我相信[btrfs](https://btrfs.wiki.kernel.org/index.php/Main_Page)理解块共享，或者我可以使用快照来强制执行它）。

问题是，**我如何从这些文件中生成压缩的 zip**？我拥有的服务器的计算能力非常低，当然不足以从块共享内容*中即时重新创建 JAR 。*

是否有一种编程方式将未压缩级别的共享内容公开给压缩级别？一种易于翻译为 zip 的增量压缩格式 ?

我应该寻找一种缓存解决方案以及动态生成 JAR 吗？这至少会减轻生成请求最多的 JAR 的计算痛苦。

有[专门的硬件](http://www.edn.com/design/communications-networking/4326852/Plugging-hardware-based-compression-into-a-server)可以非常快速地产生拉链，但我宁愿避免花费。随着对服务器的请求数量的增长，它也不是一个非常可扩展的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:06:20.237

如果 1% 的差异被涂抹在所有 jar 文件中的所有条目中，那么您无需大量重新压缩就无能为力。

另一方面，如果 1% 的差异集中在少数 jar 条目中，而大多数 jar 条目没有变化，那么就有希望了。您可以将所有单独的 jar 条目保存在服务器上它们自己的 jar 文件中，并且对于要提供的每个 jar 文件，只需保留这些单独的 jar 条目文件的列表以进行组合。编写一个快速实用程序来获取一组 jar 文件并将它们合并到一个 jar 文件中是很容易的。如果还没有的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T01:15:02.087

我过去使用的一种方法是在一段时间内记录对 zip 文件的实际请求。如果您发现请求高度倾斜，那么您可以使用缓存来降低动态生成 zip 文件的成本。

基本上，按照您的建议实施差异存储。还要为实际​​的 .zip 压缩文件分配 LRU（或您喜欢的任何其他替换算法）的总存储量，例如 10%。每次用户请求 zip 时，如果它准备好了，您就从缓存中提供它，或者如果没有，则动态生成它并将其放入缓存中。

在一般情况下这可能效果不佳，但在实际请求通常是针对少量集中文件的常见情况下，它可能会解决问题。

否则，我将您的选择视为：

1.  在磁盘上使用增量编码，然后更改客户期望的响应格式。例如，您可以为他们提供一种格式，而不是 zip，该格式基本上是他们重建文件所需的 delta 编码文件的位。在服务器端，您节省了大部分工作，因为您只是从磁盘提供或多或少未修改的文件，然后客户端必须将它们放在一起（现有客户端已经必须解压缩文件，所以也许这不是负担过重）。

2.  仔细查看 .zip 格式并以一种可以提前完成大部分 .zip 工作的特殊方式存储您的文件。例如，类似于 delta 编码，但匹配查找的实际困难部分存储在磁盘上，因此对文件进行编码可能是一个非常快速的过程。然而，这需要对 zip 格式有深入了解的人来设计。

# ios - UICollectionview 控制器到 UItableview 控制器

> ID：15658070
> 
> 赞同：0
> 
> 时间：2013-03-27T11:49:14.343
> 
> 标签：ios, xcode, uibutton, uitableview, uicollectionview

嗨，我有一个带有两个按钮的 uicollectionview 控制器，当我单击第一个按钮时，它直接打开 uitableview 控制器（带有 2 个按钮），当我单击第二个按钮时，我希望 uicollectionview 控制器显示？我怎么能在故事板中做到这一点？

我在一个按钮内尝试了此代码，但它引发了一个异常，例如“未找到 Nib 文件”

```
 table *listview=[[table alloc]initWithNibName:@"listview" bundle:nil];
[self.navigationController pushViewController:listview animated:NO]; 
```

{列表视图是 uitableviewcontroller 名称，我在 xcode 右侧面板中的 uitableviewcontroller 标题属性上分配了这个名称}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:38:51.587

“未找到 Nib 文件”错误让我认为您没有正确拼写 .xib 的名称。

假设你有你想要推送的控制器。

```
TableViewController.h
TableViewController.m 
```

以及与 TableViewController.h 链接的相应 xib。（查看、IBOutlets 等）。

```
TableView.xib 
```

现在在您的主 ViewController 中，我们推送到 TableViewController

```
TableViewController *controller = [[TableViewController alloc] initWithNibName:@"TableView" bundle:nil];
[self.navigationController pushViewController:controller animated:NO]; 
```

希望这可以帮助。

BooRanger

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:41:54.457

我们可以使用故事板标识符从 uicollectionviewcontroller 移动到 uitableviewcontroller

```
 table *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"list"];

[self presentViewController:vc animated:NO completion:nil]; 
```

它工作正常

# php - “字段列表”中的意外列“消息”

> ID：15658073
> 
> 赞同：1
> 
> 时间：2013-03-27T11:49:21.120
> 
> 标签：php, mysql

我正在尝试创建一个使用会话的 PHP 论坛页面。每次我尝试发表评论时，我都会收到同样的错误，不知道我哪里出错了

这是我的表单代码：

```
session_start();

if(!isset($_SESSION['user_id'])){

    require('login_tools.php');

    load();

    }

    $page_title = 'Post Message';

    include('includes/header.html');

    echo "<h1>Home</h1>

        <p>You are now logged in, {$_SESSION['first_name']} 

{$_SESSION['last_name']}

        </p>";

    echo '<form action = "post_action.php" method = "POST" accept-charset = "utf-8">
        <p>Subject:<br/>

        <input name = "subject" type = "text" size = "64"</p>`

        <p>Message:<br/>

        <textarea name = "message" rows = "5" cols = "50">

        </textarea></p>

        <p><input type = "submit" value = "Submit"></p>

        </form>'; 
```

这是发布操作的代码：

```
session_start();
    require('login_tools.php');

    if(!isset($_SESSION['user_id'])){

    load();
    }

    $page_title = 'Post Error';

    include('includes/header.html');

    echo '<div id = "content">';

    if($_SERVER['REQUEST_METHOD']=='POST'){

        if(empty($_POST["subject"])){

            echo '<p class = "main">Please enter a subject for this post</p>';
            }

        if(empty($_POST["message"])){

            echo '<p class = "main">Please enter a message for this 
```

邮政

'; }

```
 if(!empty($_POST['subject']) && !empty($_POST['message'])){

                require('../connect_db.php');

                $q = "INSERT INTO forum
                    (first_name,last_name,subject,messsage,post_date)

                    VALUES(

                    '{$_SESSION[first_name]}',

                    '{$_SESSION[last_name]}',

                    '{$_POST[subject]}',

                    '{$_POST[message]}',

                    NOW())";

                    $r = mysqli_query($dbc,$q);

                        if(mysqli_affected_rows($dbc)!=1){

                            echo '<p>Error</p>'.mysqli_error($dbc);
                            }
                            else{
                                load('forum.php');
                                }

                    mysqli_close($dbc);
                    }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:51:45.807

有一个拼写错误

```
 $q = "INSERT INTO forum
                    (first_name,last_name,subject,messsage,post_date) 
```

它应该是`message`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:00:44.350

生成 SQL 的 PHP 语句在 $_SESSION 的成员名称周围缺少引号。

我会写

```
$q = "INSERT INTO forum
          (first_name,last_name,subject,messsage,post_date)

          VALUES('" .

              $_SESSION['first_name'] . "','" .

              $_SESSION['last_name'] . "','" .

              $_POST['subject'] . "','" .

              $_POST['message'] . "'," .

              "NOW())"; 
```

# android - 在应用程序启动时检查 Android API 级别？

> ID：15658074
> 
> 赞同：0
> 
> 时间：2013-03-27T11:49:27.027
> 
> 标签：android, api

有没有办法在调用任何活动之前检查 Android API 级别？我想设置这个应用程序的方式是，如果 API 级别低于 15，应用程序会启动一个主要使用活动和简单布局的活动，而如果 API 级别高于或等于 15，它应该打开一个不同的活动使用更漂亮的布局和更高 API 级别附带的功能。

我知道如何从 MainActivity 做到这一点（只需一个简单的 if 语句并检查内部版本号），但这可以在调用任何内容之前完成吗？因为如果我必须将应用程序的两个完全不同的部分压缩到一个 Activity 中，它会变得*非常*拥挤......（而且它不会真的那么优雅......）在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:00:46.683

没有任何内置功能可以让您做到这一点。最简单的解决方法是创建一个存根 Activity，它只会根据当前的 android 版本启动适当的 Activity。

```
public class StubActivity extends Activity {
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {
            startActivity(new Intent(this, ICSActivity.class));
        } else {
            startActivity(new Intent(this, PreICSActivity.class));
        }

        finish();
    }
} 
```

# c# - 为什么 Linq-to-WMI `where` 查询不起作用？

> ID：15658079
> 
> 赞同：0
> 
> 时间：2013-03-27T11:49:51.057
> 
> 标签：c#, linq, wmi-query

这不起作用（0 项）：

```
var cfg = from n in context.Source<Win32_NetworkAdapterConfiguration>()
    where n.Description == theDescription
    select n; 
```

但这确实：

```
var cfg = new List<Win32_NetworkAdapterConfiguration>();

var x = from n in context.Source<Win32_NetworkAdapterConfiguration>()
    select n;

foreach (var i in x) { if (i.Description == theDescription) cfg.Add(i); } 
```

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:31:41.507

我假设您正在使用[http://linq2wmi.codeplex.com](http://linq2wmi.codeplex.com)上的 Linq To Wmi 项目。如果是这样，那么发布的版本只支持常量而不支持查询表达式中的变量。（您的查询最终会生成类似`... where Description = 'theDescription' ...`不太可能返回任何结果的内容。）

但是如果你去[http://linq2wmi.codeplex.com/SourceControl/list/patches](http://linq2wmi.codeplex.com/SourceControl/list/patches)你会看到有人提交了一个补丁来解决这个问题。它于 2009 年提交，但从未被接受。

从那时起，已发布的源代码发生了一些细微的变化，但合并它们应该是相当简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:28:25.543

我想这与数据与 LINQ 的绑定时间以及 WMILinq 中使用的实现有关。您可以联系该库的作者。

或者你可以试试这个：

```
void Main()
{
    string filter = "WAN Miniport (SSTP)";
    string qry = "SELECT * FROM Win32_NetworkAdapterConfiguration WHERE description = '" + filter + "'";
    ManagementObjectSearcher r = new ManagementObjectSearcher(qry);
    var items = r.Get();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T16:42:42.833

用 LINQ 比较字符串是区分大小写的......

如果 n.Description 等于“hello”并且 theDescription 等于“HELLO”，则 n.Description == theDescription 将为 false。

尝试类似的东西

```
where string.Equals(n.Description, theDescription, StringComparison.OrdinalIgnoreCase) 
```

# java - 通知线程时出现 IllegalMonitorStateException

> ID：15658082
> 
> 赞同：0
> 
> 时间：2013-03-27T11:50:20.033
> 
> 标签：java, multithreading

我有一个模拟船门的程序。它们在线程中运行。这个想法是让他们在 run 方法中的随机时刻运行和暂停，以模拟人员经过。这是由所有线程完成的，同时主线程正在等待通知并检查船是否已满，当线程通知他们添加了一个通过大门的人时，主线程再次检查船是否已满。该程序分为三个类：

计数器：

```
 public class Counter {
        private int currentValue[];
        private int maxValue;

        public Counter(int[] nrOfPeople, int max) {
            currentValue = nrOfPeople;
            currentValue[0] = 0;
            maxValue = max; 
        }

        public synchronized void addPersons(int nr_p) {
            currentValue[0] += nr_p;
        }

        public synchronized int getValue() {
            return currentValue[0];
        }

        public synchronized boolean isFull() {
            if(currentValue[0] < maxValue)
                return false;
            return true;
        }
    } 
```

门类：

```
 public abstract class Gate implements Runnable {
        int nrOfPassengers;
        int gatenr;
        int gatesize;
        Counter c;
        private Thread t;
        private Random r;
        private boolean blocked; /* suspends people from passing */

        public Gate(Counter c, int nr) {
            this.c = c;
            gatenr = nr;
            this.open();
            r = new Random();
            t = new Thread(this);
            t.start();
        }

        public void setGatesize(int size) {
            gatesize = size;
        }

        public void close() {
            blocked = true;
        }

        public void open() {
            blocked = false;
        }

        public int getNoOfPassangers() {
            return nrOfPassengers;
        }

        public int getId() {
            return gatenr;
        }

        @Override
        public void run() {
            while(!blocked) {
                int waitTime = (r.nextInt(5) + 1) * 1000; /* between 1-5 seconds */
                System.out.println("Person-Gate " + gatenr + ": adding one to " + c.getValue());
                try {
                    /* bigger throughput => amount can vary */
                    if(gatesize > 1) {
                        int persons = r.nextInt(gatesize)+1;
                        c.addPersons(persons);
                        nrOfPassengers += persons;
                    } else {
                        c.addPersons(1);
                        nrOfPassengers++;
                    }
                    Thread.sleep(waitTime);
                } catch (InterruptedException e) {
                    System.out.println("Person-Gate " + gatenr + ": was interrupted adding person");
                    e.printStackTrace();
                }
                System.out.println("Person-Gate " + gatenr + ": added one to " + c.getValue());
                t.notify();
            }
        }

        public void join() {
            try {
                t.join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    } 
```

还有一个运行主要方法的模拟器：

```
 /*
     * This class simulates cars and persons- entering a ferry.
     */
    public class Simulator {

        public static final int MAX = 30;

        public static void main(String[] args) {
            int nrOfPeople[] = new int[1]; /* array of size one for keeping count */
            ArrayList<Gate> gates = new ArrayList<Gate>();
            Counter counter = new Counter(nrOfPeople, MAX);
            Thread mainThread = Thread.currentThread();

            /* adding 3 person-gates */
            for(int i=1; i<4; i++) {
                gates.add(new PersonGate(counter, i));
            }

            /* let all gates work as long as passengers is under MAX */
            while(!counter.isFull()) { 
                try {
                    mainThread.wait();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            System.out.println("Announcement: Ship is full!");

            /* wait for child threads to finish */
            for(Gate g: gates) {
                g.close();
                try {
                    g.join();
                } catch (Exception e) { /* InterruptedException */
                    e.printStackTrace();
                }
                System.out.println(g.getNoOfPassangers() + " passed through gate nr " + g.getId());
                System.out.println(counter.getValue() + " has passed in total");
            }

        }
    } 
```

我收到一个错误

```
Person-Gate 1: adding one to 0
Person-Gate 2: adding one to 1
Person-Gate 3: adding one to 2
Exception in thread "main" java.lang.IllegalMonitorStateException
at java.lang.Object.wait(Native Method)
at java.lang.Object.wait(Object.java:485)
at Simulator.main(Simulator.java:24)
Person-Gate 3: added one to 3Exception in thread "Thread-3" 
```

有人现在发生了什么事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T13:52:00.390

您只能在块内调用`wait`和。`notify/notifyAll``synchronized`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:55:59.693

您必须拥有调用 wait 或 notify 的对象的监视器。意思是，你必须在一个同步块中，比如

```
synchronized( objectUsedAsSynchronizer) {
    while ( mustStillWait) {
        objectUsedAsSynchronizer.wait();
    }
} 
```

这是许多其他[问题](https://stackoverflow.com/search?q=java%20IllegalMonitorStateException%20wait%20notify)的主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:00:16.910

```
 t.notify(); 
```

您正在通知错误的监视器。当您不使用`synchronize`节包装监视器对象时，会发生此异常。但是，您用于通知和等待方法的对象是不同的。创建`new Object()`监视器并将其传递给 Gate 的构造函数。

您也可以看一下`CountDownLatch`，它完全符合您的要求。

# matlab - MATLAB：为什么我的像素索引与空间坐标中的像素索引如此不同

> ID：15658088
> 
> 赞同：0
> 
> 时间：2013-03-27T11:50:32.790
> 
> 标签：matlab, image-processing, graphics, computer-vision, projection

对问题进行了修改，使其更加具体和建设性。

我正在做 imtransform，但 xdata 和 ydata 与 size(output) 有很大不同。

[输出，xdata，ydata] = imtransform（imgDouble{1}，tform）；

真实数据测试：

```
K>> size(output)

ans =

         854        1230

K>> xdata(2) - xdata(1)

ans =

   1.6635e+03

K>> ydata(2) - ydata(1)

ans =

  876.1373 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:00:17.383

如[文档中所述](http://www.mathworks.co.uk/help/images/ref/imtransform.html)，如果输出图像“过大”，imtransform 有时会重新缩放数据。您可以通过添加输入参数 'XYScale' 并将其设置为 1 来强制它匹配输入图像的比例。

如果输出仍然不是您所期望的（并且您已经仔细检查了转换），您可能还需要通过为 'size' 或 'xdata' 和 ' 提供输入参数来设置图像的输出大小数据”。

尚不清楚您要对其余代码做什么，但是如果您有一组坐标来定义某个或多个兴趣点的位置（inlier_array？），并且您想知道它们在哪里' 会在转换后结束，这正是 tformfwd 所做的。

如果您的变换包含翻译，我建议通读[此](http://www.mathworks.co.uk/help/images/performing-general-2-d-spatial-transformations.html)内容，尤其是“了解变换图像的坐标”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:07:42.107

它是关于[表达图像位置](http://www.mathworks.com/help/images/image-coordinate-systems.html#brcu_cr)的。

图像位置表达有两种，

一种也是最常见的一种是

像素指数：

在行和列中

另一种是内在坐标系：

用 x 和 y 表示：

[http://www.mathworks.com/help/images/intro_r_1.png](http://www.mathworks.com/help/images/intro_r_1.png)

# excel - 将 2 个工作表附加到第 3 个工作表 excel vba

> ID：15658089
> 
> 赞同：1
> 
> 时间：2013-03-27T11:50:34.940
> 
> 标签：excel, append, vba

我首先想将所有行从表 evaluatierooster_NL 复制到表 evaluatierooster_NLFR。然后我想将工作表 evaluatierooster_FR 中的所有行（第一行除外）附加到工作表 evaluatierooster_NLFR。我在该对象下方的行中收到错误丢失？

```
LastRow = ActiveSheet.Cells.Find(What:="*", After:=evaluatierooster_NLFR.Range("A1"), _
                                 SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row

'~~> Copy evaluatierooster_NL to evaluatierooster_NLFR
Sheets("evaluatierooster_NL").Select
Rows("1:" & Rows.Count).Copy
Sheets("evaluatierooster_NLFR").Select
Range("A1").Select
ActiveSheet.Paste

Sheets("evaluatierooster_FR").Select
Rows("2:" & Rows.Count).Copy
Sheets("evaluatierooster_NLFR").Select

Dim LastRow As Long

Set LastRow = ActiveSheet.Cells.Find(What:="*", After:=evaluatierooster_NLFR.Range("A1"), _
                                     SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row

ActiveSheet.Cells(LastRow, 1).Paste 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:16:40.760

试试下面的代码。

```
Dim lastRow As Long

lastRow = Sheets("evaluatierooster_NL").Range("A65000").End(xlUp).Row
Sheets("evaluatierooster_NL").Rows("1:" & lastRow).Copy Sheets("evaluatierooster_NLFR").Range("A1")

 lastRow = Sheets("evaluatierooster_FR").Range("A65000").End(xlUp).Row
 Sheets("evaluatierooster_FR").Rows("2:" & lastRow).Copy Sheets("evaluatierooster_NLFR").Range("A65000").End(xlUp).Offset(1, 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:47:19.217

试试下面的：

```
'~~> Copy evaluatierooster_NL to evaluatierooster_NLFR
Dim LastRow As Long

Sheets("evaluatierooster_NL").Select
Rows("1:" & Rows.Count).Copy
Sheets("evaluatierooster_NLFR").Select
Range("A1").Select
ActiveSheet.Paste

Sheets("evaluatierooster_FR").Select
Rows("2:" & Rows.Count).Copy
Sheets("evaluatierooster_NLFR").Select

' get the last row (same as doing CTRL+Up keystroke in Excel)    
LastRow = activesheet.range("A65536").end(xlup).row+1

ActiveSheet.Cells(LastRow, 1).Paste 
```

应该这样做。

# haskell - Haskell IO 无法让列表围绕菜单功能循环

> ID：15658093
> 
> 赞同：3
> 
> 时间：2013-03-27T11:50:45.413
> 
> 标签：haskell, io

我目前正在使用haskell 制作基于文本的菜单系统。我创建了一个名为 Book 的数据类型，其中每个函数都编辑列表并返回它。但是，我无法弄清楚如何使菜单部分工作，它可以编辑此列表并递归回来。

关于我卡在菜单上的示例，将一本书添加到列表中，然后菜单需要重新加载菜单，以便我可以显示新添加的书籍。

菜单示例

```
menu:: [Book] -> [IO]
menu books = do
  str <- getLine
  let selectNum = (read str :: Int)
  case selectNum of
     1 -> let sd = addNewBookIO books 
     2 -> displayAllBooksFromYear books 
```

添加新书的示例

```
addNewBookIO :: [Book] -> IO [Book]
addNewBookIO films =
  do putStr "Film name: " 
     filmTitle <- getLine
     putStr "List all cahr in the Book (separated by commas): "
     cast <- addToStringArray []
     putStr "Year of Realese in the UK: "
     year <- getLine
     let test = (read year :: Int)
     putStr "List all the fans(separated by commas): "
     fans <- addToStringArray [] 
     putStrLn "Your Book has been added"
     let bookList = addbookFilm (Film bookTitle cast test fans) films
     return bookList 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T11:59:41.180

目前你的类型签名`menu`没有任何意义。你的意思是这样的吗？

```
menu :: [Book] -> IO [Book] 
```

如果是这样，那么您可以将其定义为

```
menu books = do
  str <- getLine
  case read str of
    1 -> do books' <- addNewBookIO books             -- add a new book, then loop
            menu books'
    2 -> displayAllBooksFromYear books >> menu books -- display books, then loop
    3 -> return books                                -- quit 
```

这会从用户那里读取一个字符串，然后要么添加一本新书，要么显示当前的图书列表，要么结束循环，返回图书列表。

**编辑：**操作员将`>>`两个操作排列在一起。该组合的`a >> b`意思是“做`a`，然后做`b`”。

下面两段代码是完全等价的（其实第一段只是第二段的语法糖）

```
do displayAllBooksFromYear books
   menu books 
```

和

```
displayAllBooksFromYear books >> menu books 
```

希望这有助于澄清事情。

# vba - 如何以编程方式访问 vba 访问对象/模块的属性？像 self["property" + i]？

> ID：15658096
> 
> 赞同：1
> 
> 时间：2013-03-27T11:50:48.580
> 
> 标签：vba, ms-access

我有一个表单，它有 12 个按顺序命名的对象：object0、object1、object2... 我想做一个类似循环的事情来获取所有值，而不是为每个值做同样的事情。

喜欢：

```
self["object" + i] 
```

在 i 是当前数字的循环中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:56:56.033

你可以参考我：

```
Me("Object" & i) 
```

当代码在表单的模块中运行时。或其他地方：

```
Forms!TheFormName.Controls("Object" & i) 
```

甚至

```
Forms![Some Form Name]("Object" & i).Value 
```

# java - 在 Java 中生成注释

> ID：15658102
> 
> 赞同：1
> 
> 时间：2013-03-27T11:51:10.143
> 
> 标签：java, annotations, gson

我有一个 GSON 注释（“SerializedName”），我想从我的自定义注释中翻译它。我的意思是，如果我有带有“SerialType”元素的“Serial”注释（它告诉我我想要该字段的序列化类型），在“SerialType”中设置 GSON 类型之后 - 我如何生成 GSON 注释具体领域？

示例代码：

```
@Target(ElementType.FIELD)
public @interface Serial 
{
    SerialType type();
    String value();
}

public class Example
{
    @Serial(type = SerialType.GSON, value = "test")
    public int field;
} 
```

将生成：

```
public class Example
{
    @SerializedName("test")
    public int field;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:57:08.390

尝试查看注释处理器。[您可以在文档](http://docs.oracle.com/javase/1.5.0/docs/guide/apt/mirror/com/sun/mirror/apt/AnnotationProcessor.html)中找到更多信息

[这](http://deors.wordpress.com/2011/10/08/annotation-processors/)是一篇很好的文章，描述了如何使用它们。

# python - 谷歌浏览器在下载文件时如何自动重命名文件？

> ID：15658105
> 
> 赞同：2
> 
> 时间：2013-03-27T11:51:14.853
> 
> 标签：python, file, google-chrome, rename

我想要获取文件的扩展名？如：

```
import os
print os.path.splitext('testit.doc')
""">>>('testit', '.doc')""" 
```

但是当我使用以下示例时它不起作用。

```
import os
print os.path.splitext('testid.tar.gz')
""">>>('testit.tar', '.gz')""" 
```

我看到当位置中有同名文件时，Chrome 可以自动重命名文件。它将添加 (1) 或 (n)。我想知道它是怎么做的！有没有机构可以告诉我？ ![在此处输入图像描述](../Images/cf3750c9b9f49a6a1044846f7dc5ad27.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:34:35.827

幸运的是，Chromium 是开源的，因此您可以查看记录良好的代码。好的...我找到了：[这里](https://code.google.com/p/chromium/codesearch#chromium/src/content/browser/download/download_file_impl.cc&sq=package%3achromium&type=cs&l=104&rcl=1364340364)

`RenameAndUniquify`是：

```
void DownloadFileImpl::RenameAndUniquify(
    const base::FilePath& full_path,
    const RenameCompletionCallback& callback) {
  DCHECK(BrowserThread::CurrentlyOn(BrowserThread::FILE));

  base::FilePath new_path(full_path);

  int uniquifier =
      file_util::GetUniquePathNumber(new_path, FILE_PATH_LITERAL(""));
  if (uniquifier > 0) {
    new_path = new_path.InsertBeforeExtensionASCII(
        base::StringPrintf(" (%d)", uniquifier));
  }

...

} 
```

并`InsertBeforeExtension`致电`ExtensionSeperatorPosition`您感兴趣的电话（[链接](https://code.google.com/p/chromium/codesearch#chromium/src/base/files/file_path.cc&sq=package%3achromium&type=cs&l=126&rcl=1364340364)）：

```
// Find the position of the '.' that separates the extension from the rest
// of the file name. The position is relative to BaseName(), not value().
// This allows a second extension component of up to 4 characters when the
// rightmost extension component is a common double extension (gz, bz2, Z).
// For example, foo.tar.gz or foo.tar.Z would have extension components of
// '.tar.gz' and '.tar.Z' respectively. Returns npos if it can't find an
// extension.
StringType::size_type ExtensionSeparatorPosition(const StringType& path) {
  // Special case "." and ".."
  if (path == FilePath::kCurrentDirectory || path == FilePath::kParentDirectory)
    return StringType::npos;

  const StringType::size_type last_dot =
      path.rfind(FilePath::kExtensionSeparator);

  // No extension, or the extension is the whole filename.
  if (last_dot == StringType::npos || last_dot == 0U)
    return last_dot;

  const StringType::size_type penultimate_dot =
      path.rfind(FilePath::kExtensionSeparator, last_dot - 1);
  const StringType::size_type last_separator =
      path.find_last_of(FilePath::kSeparators, last_dot - 1,
                        arraysize(FilePath::kSeparators) - 1);

  if (penultimate_dot == StringType::npos ||
      (last_separator != StringType::npos &&
       penultimate_dot < last_separator)) {
    return last_dot;
  }

  for (size_t i = 0; i < arraysize(kCommonDoubleExtensions); ++i) {
    StringType extension(path, penultimate_dot + 1);
    if (LowerCaseEqualsASCII(extension, kCommonDoubleExtensions[i]))
      return penultimate_dot;
  }

  StringType extension(path, last_dot + 1);
  for (size_t i = 0; i < arraysize(kCommonDoubleExtensionSuffixes); ++i) {
    if (LowerCaseEqualsASCII(extension, kCommonDoubleExtensionSuffixes[i])) {
      if ((last_dot - penultimate_dot) <= 5U &&
          (last_dot - penultimate_dot) > 1U) {
        return penultimate_dot;
      }
    }
  }

  return last_dot;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:04:52.920

我认为它使用了一个众所周知的文件扩展名列表，你也可以这样做，你有很多方法（可能比我的解决方案性能更好，例如使用正则表达式），但这是一个非常简单的解决方案：

```
import os

known_extensions = ['.tar.gz', '.tar.bz2']
def splitext(file_name):
    file_name = file_name.strip()

    for ex in known_extensions:
        if file_name[-len(ex):] == ex:
            return file_name[:-len(ex)], ex

    return os.path.splitext(file_name) 
```

# asp.net - 将文件放入“实时”环境时查询缓慢

> ID：15658106
> 
> 赞同：2
> 
> 时间：2013-03-27T11:51:15.993
> 
> 标签：asp.net, performance, oracle, architecture

情况是这样的...

我们在位置 A 有一个本地开发服务器，在那里我们构建了所有的 aspx 页面。我们的数据库也位于位置 A。

在开发服务器上测试我们的文件时，我们的查询在 1 秒内运行得最快。

我们刚刚将文件移动到位于位置 B 的实时服务器（数据库仍在位置 A），现在查询所需的时间比开发服务器长 5-10 倍。位置 A 位于东英吉利，位置 B 位于伦敦，相距约 100 英里。

同样在开发服务器和实时服务器上，运行的第一个查询比之后的其余查询花费的时间要长得多。

任何想法可能导致缓慢？

**编辑**

我已经打开了几个页面的跟踪，似乎 End Load 是所有方法中时间最长的，但我不确定为什么

不幸的是，我也无法访问我们的外部服务器来安装 SSMS 或 Oracle 开发人员来测试任何查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:29:50.747

> “运行的第一个查询比之后的其余查询花费的时间要长得多。”

这就是缓存的效果。第一个查询付出了物理 IO 的代价。后续查询受益于查找已经在缓存中的相关记录，无论是数据库缓冲区缓存还是其他一些操作系统或架构缓冲区。

至于两种环境在性能上的差异，大概是这样的：

> “相距大约 100 英里”

这两个位置之间的网络连接很可能会限制数据传输。假设它是私人连接，您需要与您的网络管理员交谈。如果您使用的是公共基础设施，那么您的选择是有限的。

* * *

> “似乎 End Load 是所有方法中时间最长的”

好的，所以我不是 ASPX 专家（我在这里是为了 [oracle] 标签），但是一些简单的搜索显示了几个线程，这表明它可能是“用户控件”，因为[这些线程在 End Load 事件之前触发](http://blogs.thesitedoctor.co.uk/tim/2006/06/30/Complete+Lifecycle+Of+An+ASPNet+Page+And+Controls.aspx). 例如[this other SO question](https://stackoverflow.com/q/2120653/146325)。

# xml - 如何将 XML 元素转换为 .Net 对象

> ID：15658108
> 
> 赞同：0
> 
> 时间：2013-03-27T11:51:31.910
> 
> 标签：xml, vb.net, xml-parsing, xsd

第一次使用 XML，虽然我可以遍历 XML，但我很难找出将元素转换为 .Net 对象的最佳方法。具体来说，我需要获得构成过度简化地图的点。

```
Imports System
Imports System.Xml
Imports System.Xml.XPath
Imports System.Linq
Imports System.Xml.Linq

Module Module1

    Dim s As XDocument =
<?xml version="1.0" encoding="UTF-8"?>
<map:Map xmlns="java:com.raytheon.atc.chi.graphics.geom2d" xmlns:map="java:com.raytheon.atc.chi.adt.map" unit="m" lat="41.975953650" lon="-87.903248430" alt="78.33"><!--ASDE-X DP map for facility:ord Created 10/20/2009 2:22:31 PM-->
    <map:Layer isVisible="true"><map:Line type="Runway"></map:Line>
        <map:Region type="Runway"><Surface operation="union">
            <Polygon><Point x="1618.87" y="-742.10"></Point>
                <Point x="1459.74" y="-742.52"></Point>
                <Point x="1058.11" y="-743.35"></Point>
            </Polygon>
            <Polygon><Point x="16.82" y="1760.35"></Point>
                <Point x="46.31" y="1725.16"></Point>
                <Point x="16.82" y="1760.35"></Point>
            </Polygon>
            <Polygon><Point x="16.82" y="1760.35"></Point>
                <Point x="16.82" y="1760.35"></Point>
            </Polygon>
            </Surface>
        </map:Region>
    </map:Layer>
</map:Map>

    Public Sub Parse()

        Dim ns As New XmlNamespaceManager(New NameTable())

        ns.AddNamespace("x", "java:com.raytheon.atc.chi.graphics.geom2d")
        ns.AddNamespace("m", "java:com.raytheon.atc.chi.adt.map")

        Debug.Print("Points:")
        Dim elements = s.XPathSelectElements("//m:*//m:Region/x:Surface/x:Polygon/x:Point", ns)
        For Each element As XElement In elements
            'Convert this element to a System.Windows.Point
        Next
    End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:55:06.080

```
Dim points = s.XPathSelectElements("//m:*//m:Region/x:Surface/x:Polygon/x:Point", ns).Select(function(e) new Point(CDbl(e.Attribute("x")), CDbl(e.Attribute("y")))).ToList() 
```

或使用您的`For Each`方法：

```
For Each element As XElement In elements
    Dim p As new Point(CDbl(element.Attribute("x")), CDbl(element.Attribute("y")))
Next 
```

# android - Android，在“双重检查锁定”（和其他上下文）中使用局部变量是否比使用静态变量更快？

> ID：15658109
> 
> 赞同：0
> 
> 时间：2013-03-27T11:51:33.880
> 
> 标签：android, performance, static, local

在[http://en.wikipedia.org/wiki/Double_checked_locking_pattern#Usage_in_Java](http://en.wikipedia.org/wiki/Double_checked_locking_pattern#Usage_in_Java)中使用局部变量作为优化，来自 Joshua Bloch “Effective Java, Second Edition”，p。283 使其在“某些版本的 Java VM”上速度提高 25%。当相关变量也是静态的时，这种局部变量的好处是否适用，它是否适用于Android？

那么这些`getInstance()`s 中的哪一个在 Android 上更快（或者它们是否相同？）：

A：

```
class Something {

    private static volatile Something instance = null;

    public static Something getInstance(Context context) {
        Something local = instance;
        if (local==null) {
            synchronized(Something.class) {
                local = instance;
                if (local==null) {
                    instance = local = new Something(context);
                }
            }
        }
        return local;
    }
} 
```

或者

B.

```
class Something {

    private static volatile Something instance = null;

    public static Something getInstance(Context context) {
        if (instance==null) {
            synchronized(Something.class) {
                if (instance == null) {
                    instance = new Something(context);
                }
            }
        }
        return instance;
    }
} 
```

为什么？

（别担心，`Something`不保留对 的引用`context`，它只是在需要它进行实例化时临时使用它，这就是为什么我似乎需要实例化是“懒惰的”。）

如果你的答案是“只是测试它”，你能给我这样做的步骤吗？但是，如果有的话，我还是想知道差异的原因（反正可能没有）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:59:50.383

我认为最快的方法是跳过仔细检查并使用仍然线程安全的方式：

```
public final class Foo {
    private static volatile Foo mInstance      = new Foo();

    private Foo() {
        // do what ever you want
    }

    /**
     * @return The singleton object
     */
    public static Foo getInstance() {
        return mInstance;
    }

    /**
     * @return the singleton object with new context
     */
    public static Foo getInstance(Context context) {
        mInstance.setContext(context); // just as an example
        return mInstance;
    }
} 
```

# db2 - 安装 IBM worklight 后如何更改 wluser 的密码？

> ID：15658115
> 
> 赞同：0
> 
> 时间：2013-03-27T11:51:55.623
> 
> 标签：db2, websphere, ibm-mobilefirst

如何更改 wluser 的密码？
我更改了它的密码，以及 worklight.properties 的“wl.db.password”。
但是工作灯控制台和应用程序中心都不起作用。
之后，我取回了密码，然后它们都可以正常工作。
有人试过吗？
※「wluser」是工作灯的 db2user。
[http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/admin/t_creating_the_db2_databases.html?resultof=%22%64%62%32%22%20 %22%77%6c%75%73%65%72%22%20](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/admin/t_creating_the_db2_databases.html?resultof=%22%64%62%32%22%20%22%77%6c%75%73%65%72%22%20)

我的环境如下。
Windows 7
Worklight V5.0.5.1
WAS V8.5
DB2 V9.7

当我更改 wluser 的密码时，出现以下错误。

工作灯控制台

> 错误 500：javax.servlet.ServletException：Worklight 项目未初始化

应用中心，

> 发生意外错误（HTTP 状态 500）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:31:51.277

创建 worklight.properties 时，可以选择通过两种方式指定数据库连接参数，如[http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=%2Fcom中所述.ibm.worklight.help.doc%2Fadmin%2Fr_ibm_worklight_database_setup.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fadmin%2Fr_ibm_worklight_database_setup.html)。为了能够从应用程序服务器控制台而不是在 worklight.properties 文件中修改密码，您需要使用设置数据库连接属性的“JNDI 方式”，如[http://pic.dhe中所述.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fdevref%2Ft_transporting_the_app.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fdevref%2Ft_transporting_the_app.html)。

在 WebSphere Application Server 中，您可以通过打开 WAS 管理控制台找到编辑 DB2 密码的位置，然后打开“Security > Global security”页面，然后单击“Java Authentication and Authorization Service > J2C authentication data”，在结果列表选择“WorklightDb2DatabaseCredentials”凭据并进行编辑。请注意，对于 DB2 以外的其他类型的数据库，密码存储为数据源的自定义属性，而不是 JAAS 身份验证数据。

在 WebSphere Application Server Liberty 概要文件中，密码位于服务器的 server.xml 文件中的 <dataSource jndiName="jdbc/WorklightDS"> 和 <dataSource jndiName="jdbc/WorklightReportsDS"> 元素中。只需编辑此文件；Liberty 会注意到它已被编辑并重新加载。

在 Tomcat 中，密码位于 conf/server.xml 文件中。此处，密码位于 <Resource name="jdbc/WorklightDS"> 和 <Resource name="jdbc/WorklightReportsDS"> 元素中。只需编辑此文件，然后重新启动 Tomcat 服务器。

# xcode - MapView 问题 - 地图重新加载时引脚更改颜色

> ID：15658119
> 
> 赞同：0
> 
> 时间：2013-03-27T11:52:09.793
> 
> 标签：xcode, mkmapview, mkpinannotationview

刷新完成后，我的 PIn 颜色 mapView 出现问题。在我的应用程序中，我用两种颜色显示一些点，以确定服务是否可用。在第一次启动时，没有出现任何问题。代码如下：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    [self dowloadPoint];    // here I exucte the first start 

}

- (void)dowloadPoint{
    NSURL *url1 =[NSURL URLWithString:@"http:MYUSRL"];
    NSData *datos1 =[[NSData alloc] initWithContentsOfURL:url1];

        [self plotBarPosition:datos_string1];     //Here I call the plotBarPosition method
}

- (void)plotBarPosition:(NSString *)datos_string1 {

    for (id<MKAnnotation> annotation in _mapView.annotations) {
        [_mapView removeAnnotation:annotation];
    }

    // Parse the string into JSON
    NSDictionary *json = [(NSDictionary*)[datos_string1 JSONValue]objectForKey:@"features"];

    // Get the objects you want, e.g. output the second item's client id
    NSArray *items_properties = [json valueForKeyPath:@"properties"];
    NSArray *items_geo = [json valueForKeyPath:@"geometry"];

        for (int i = 0; i < [json count]; i++){

            NSString *nomprePunto =[[items_properties objectAtIndex:i] objectForKey:@"title"]; 

            NSNumber *lat =[[[items_geo objectAtIndex:i] objectForKey:@"coordinates"] objectAtIndex:0];

            NSNumber *lon =[[[items_geo objectAtIndex:i] objectForKey:@"coordinates"] objectAtIndex:1];

            CLLocationCoordinate2D coordinate;
            coordinate.latitude = lat.doubleValue;
            coordinate.longitude = lon.doubleValue;

            //ESTADO
            NSString *description = [[items_properties objectAtIndex:i] objectForKey:@"description"];
            NSString *estado_punto = [[NSString alloc]init];

            if ([description rangeOfString:@"Averiado"].location == NSNotFound) {
                estado_punto = @"Available";
            } else {
                estado_punto = @"NOt Available";
                averiados ++;
             }
            NSString *averiadosStr = [NSString stringWithFormat:@"%d",averiados];
           averiadosLabel.text = averiadosStr;

            MyLocation *location =[[MyLocation alloc] initWithName:nomprePunto coordinate:coordinate estado:estado_punto];

            [_mapView addAnnotation:location];
    }

}

- (MKPinAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(MyLocation *)annotation {

        static NSString *identifier = @"MyLocation";
        if ([annotation isKindOfClass:[MyLocation class]]) {
            MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

            if (annotationView == nil) {
                annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];

                annotationView.enabled = YES;
                annotationView.canShowCallout = YES;

                if([[annotation estado] isEqualToString:@"En Servicio"])
                annotationView.pinColor = MKPinAnnotationColorGreen;

                } else {
                annotationView.annotation = annotation;
            }

            return annotationView;
        }

        return nil;
    } 
```

但是当我添加一个函数的 refres 按钮时，它只是一次刷新调用 dowloadPoint，

```
- (IBAction)refresh{

    [self dowloadPoint];
} 
```

引脚的颜色以“随机方式”变化，与点的真实状态不对应。关于正在发生的事情有什么想法吗？提前致谢。

编辑：这似乎是由于：

```
for (id<MKAnnotation> annotation in _mapView.annotations) {
    [_mapView removeAnnotation:annotation];
} 
```

擦除它，该应用程序可以正常工作，但引脚区域淹没在以前的区域...：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:35:00.100

引脚的默认颜色为红色。如果对象的`estado`属性`MyLocation`等于 ，则将其设置为绿色`@"En Servicio"`。我知道有时颜色是红色，当您的`estado`属性等于 时`@"En Servicio"`，有时颜色不是绿色。
一个原因可能是`MyLocation`当您按下刷新按钮时您的对象不再存在。在这种情况下，您可能仍然有一个指向它曾经存在的内存位置的指针，但该位置可能已被任何内容覆盖，从而导致随机颜色。
例如，如果您的`MyLocation`对象已被创建为自动释放对象，当您返回主事件循环时，该对象已被释放，即处理用户交互，则可能会发生这种情况。
如果您使用 ARC，则不应出现这种情况。

# gridview - 如何以如下格式显示分组项目（GridView 组）：一张大图，其余为小图（附示例）

> ID：15658123
> 
> 赞同：0
> 
> 时间：2013-03-27T11:52:22.263
> 
> 标签：gridview, windows-8, winrt-xaml, itemspaneltemplate

我希望 GridView 中的每个组都在这个特定的结构/模板中（一个大项目，其余的大小相同）： ![在此处输入图像描述](../Images/6d16ddeffcb04556e6e3a2aa19b50399.png)

这些项目应该填满屏幕，直到按钮中没有更多空间。它应该从右到左填充（当填充一列项目时，我们填充下一列）。我的视图模型公开了分组集合，我希望 GridView 获取每个“小”项并将其定位，就好像大项是 GridView 的“天花板”一样。

我认为这与 VariableSizedWrapGrid 有关。

这是我当前的代码（目前每个项目的大小相同，流程是从右到左）：

```
 <GridView   
                        VerticalAlignment="Top"
                        x:Name="GridMenu"
                        ItemsSource="{Binding Source={StaticResource groupedArticlesViewSource}}"
                        ItemTemplate="{StaticResource ArticlePreviewListView}">
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <GridView.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>
                                <Grid Margin="10">
                                    <TextBlock Text='{Binding Key}'
                                               FontFamily="{StaticResource FontFamilyStyle}"
                                               Foreground="DarkBlue"
                                               FontSize="20"/>
                                </Grid>
                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>

                        <GroupStyle.Panel>
                            <ItemsPanelTemplate>
                                <VariableSizedWrapGrid Orientation="Vertical"/>
                            </ItemsPanelTemplate>
                        </GroupStyle.Panel>
                    </GroupStyle>
                </GridView.GroupStyle>
            </GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:15:12.730

您应该查看 microsoft 提供的示例。[在 win8 开发者论坛上看到这个帖子](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/966aa897-1413-46f0-bef7-663de36f9423)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:35:41.670

我发现了这个好： [http ://dotnet.dzone.com/articles/windows-8-beauty-tip-using](http://dotnet.dzone.com/articles/windows-8-beauty-tip-using)

希望它对人们有所帮助（我写这个是因为我必须输入至少 30 个字符:)）

# java - 在 JSON 中查找深度嵌套的键/值

> ID：15658124
> 
> 赞同：3
> 
> 时间：2013-03-27T11:52:23.687
> 
> 标签：java, json

假设我有一个这样的 JSON 数组：

```
[
    {
        "id": "429d30a1-9364-4d9a-92e0-a17e00b3afba",
        "children": [],
        "parentid": "",
        "name": "Expo Demo"
    }, 
    {
        "id": "f80f1034-9110-4349-93d8-a17e00c9c317",
        "children": 
            [
                {
                    "id":"b60f2c1d-368b-42c4-b0b2-a1850073e1fe", 
                    "children":[], 
                    "parentid":"f80f1034-9110-4349-93d8-a17e00c9c317", 
                    "name":"Tank"
                }
            ],
        "parentid": "",
        "name": "Fishtank"
    }, 
    {
        "id": "fc8b0697-9406-4bf0-b79c-a185007380b8",
        "children": [
            {
                "id":"5ac52894-4cb6-46c2-a05a-a18500739193", 
                "children":[
                    {
                        "id": "facb264c-0577-4627-94a1-a1850073c270",
                        "children":[
                            {
                                "id":"720472b5-189e-47f1-97a5-a18500a1b7e9", 
                                "children":[], 
                                "parentid":"facb264c-0577-4627-94a1-a1850073c270", 
                                "name":"ubSubSub"
                            }],
                        "parentid": "5ac52894-4cb6-46c2-a05a-a18500739193",
                        "name": "Sub-Sub1"
                    }], 
                "parentid":"fc8b0697-9406-4bf0-b79c-a185007380b8", "name":"Sub"
            },
            {
                "id":"4d024610-a39b-49ce-8581-a18500739a75", 
                "children":[], 
                "parentid":"fc8b0697-9406-4bf0-b79c-a185007380b8", 
                "name":"Sub2"
            }
        ],
        "parentid": "",
        "name": "Herman"
    }, 
    {
        "id": "a5b140c9-9987-4e6d-a883-a18c00726883",
        "children": [
            {
                "id":"fe103303-fd5e-4cd6-81a0-a18c00733737", 
                "children":[], 
                "parentid":"a5b140c9-9987-4e6d-a883-a18c00726883", 
                "name":"Contains Spaces"
            }],
        "parentid": "",
        "name": "Kiosk"
    }
] 
```

不，我想根据 id 找到某个对象，一旦有了，我需要它的孩子和所有孩子的孩子

所以假设我想找到一个 id**为 4d024610-a39b-49ce-8581-a18500739a75 的元素**

那应该找到元素**Sub2**

现在它应该产生所有的子元素 id 女巫将是：

```
facb264c-0577-4627-94a1-a1850073c270
720472b5-189e-47f1-97a5-a18500a1b7e9 
```

假设我会做

```
findElementsChildren("4d024610-a39b-49ce-8581-a18500739a75") 
```

所以我猜它有两个部分，首先找到“父”元素。然后找到它的childrends childrends children等等。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:16:40.220

您可以使用递归来解决无限嵌套的问题。使用 Gson，它将类​​似于以下代码片段（未经测试）。其他库也将提供 JsonElement 结构。

```
private JsonElement findElementsChildren(JsonElement element, String id) {
    if(element.isJsonObject()) {
        JsonObject jsonObject = element.getAsJsonObject();
        if(id.equals(jsonObject.get("id").getAsString())) {
            return jsonObject.get("children");
        } else {
            return findElementsChildren(element.get("children").getAsJsonArray(), id);
        }
    } else if(element.isJsonArray()) {
        JsonArray jsonArray = element.getAsJsonArray();
        for (JsonElement childElement : jsonArray) {
            JsonElement result = findElementsChildren(childElement, id);
            if(result != null) {
                return result;
            }
        }
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:43:44.783

根据 Stefan Jansen 的回答，我做了一些更改，这就是我现在所拥有的：

nestedChildren 全局声明，在搜索子项之前重置为 new ArrayList()

```
private void findAllChild(JSONArray array) throws JSONException {

    for ( int i=0;i<array.length();i++ ) {
        JSONObject json = array.getJSONObject(i);
        JSONArray json_array = new JSONArray(json.getString("children"));
        nestedChildren.add(json.getString("id"));
        if ( json_array.length() > 0 ) {
            findAllChild(json_array);
        }
    }
} 
```

这假设它是所有数组，在我的情况下是

# asynchronous - 运行并发下载时实际数据的 NSURLResponse Content-Length 大小不匹配

> ID：15658127
> 
> 赞同：0
> 
> 时间：2013-03-27T11:52:34.843
> 
> 标签：asynchronous, nsurlconnection, nsurlrequest, content-length, simultaneous-calls

I have a UITableView, when a cell is selected, I make a service call to asynchronously download a PDF file from a web service. 它工作得很好，直到您一个接一个（单独）选择多个单元格，然后事情开始向南......

这里有一些（精简）代码来澄清：

**在 MasterViewController.m 中：**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //To uniquely identify this field, I build a simple string using the indexPath.
    NSString *key = [[NSString alloc]initWithFormat:@"%d.%d",pIndex.section,pIndex.row];

    //Use a pre-populated NSDictionary to specify the file I want from the server.
    NSString *reportID = [reportDictionary valueForKey:key];

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/RequestReportWithID",myConnectionObject.ServiceURL]];

    NSMutableDictionary *body = [[NSMutableDictionary alloc] initWithObjectsAndKeys:reportID, @"reportID", nil];

    NSData *requestData = [NSJSONSerialization dataWithJSONObject:dic options:0 error:nil];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody: requestData];

    //Create a new object as delegate to receive the data, also add the key to assist with identification.
    ReportDownloader *newReportDownloader = [[ReportDownloader alloc]initWithDelegate:self andKey:key];

    NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:newReportDownloader];
    if (connection)
    {
        //Nothing to do here, request was made.
    }
} 
```

**在 ReportDownloader.m 中：**

```
long long expectedReportSize;
NSString *key;
NSData *thisReport;

-(NSObject*)initWithDelegate:(NSObject*)pDelegate andKey:(NSString*)pKey
{
    myTypedDelegate = (MasterViewController*)pDelegate;
    Key = pKey;
    return self;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    expectedReportSize = [response expectedContentLength];
    NSLog(@"Key:%@, Expected Size=%lld bytes",Key, [response expectedContentLength]);
    thisReport = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    [thisReport appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    //Here is where things go wrong...
    NSLog(@"Key:%@, Actual Size=%ld bytes",Key, (unsigned long)[thisReport length]);
} 
```

上面的代码适用于单个报告。在快速线上，它适用于 3-4 份报告，但尝试做的不止于此，预期长度开始与实际长度不匹配。而且我不明白为什么yyyy....

查看上面代码生成的输出：（ *注意只有 indexPath 1.1 的报告被正确下载）*

```
Key:1.0, Expected Size=304006 bytes
Key:1.3, Expected Size=124922 bytes
Key:1.0,   Actual Size=369494 bytes
Key:1.3,   Actual Size=380030 bytes
Key:1.2, Expected Size=179840 bytes
Key:1.4, Expected Size=377046 bytes
Key:1.2,   Actual Size=114376 bytes
Key:1.5, Expected Size=175633 bytes
Key:1.4,   Actual Size=180558 bytes
Key:1.5,   Actual Size=274549 bytes
Key:1.1, Expected Size=443135 bytes
Key:1.1,   Actual Size=443135 bytes 
```

尝试打开 PDF 文档时确认数据损坏，对于所有文件的数据大小与预期内容长度不匹配的文件均失败。

我对这种行为完全感到困惑，我希望我犯了一个明显的 n00b 错误，并且这里有人发现了它。

我制作 ReportDownloader 类的主要原因是为了避免这样的问题。

提前感谢花时间扫描我的代码的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:32:23.553

好的，可以在此处找到此问题的解决方案： [https](https://stackoverflow.com/a/1938395/1014983) ://stackoverflow.com/a/1938395/1014983 James Wald 的这个答案，虽然不是问题的公认答案，但完全解决了我使用多个同时异步 NSURLConnections 的所有问题。

如果您在实施方面需要一些帮助，请告诉我，但这很简单。

# android - 如何在addView之前计算按钮宽度

> ID：15658130
> 
> 赞同：2
> 
> 时间：2013-03-27T11:52:46.783
> 
> 标签：android, android-layout

我以编程方式将按钮添加到水平线性布局中，并且我想在布局之前知道这个按钮的宽度。

这是因为如果按钮的总宽度超过 LinearLayout 宽度，App 在旧的 LinearLayout 下创​​建新的 LinearLayout。

按钮有 1 字节字符和多字节字符。

因此，当按钮只有 1 字节字符时按钮宽度的情况，当按钮只有多字节时按钮宽度的情况，按钮宽度是不同的。

```
public void draw() {
　　　　　　　　　width = 320;//screen width
        Button btn;
        int i;
        int twidth = 0;
        LinearLayout.LayoutParams lparams = new LinearLayout.LayoutParams(
                new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        lparams.setMargins(0, 5, 0, 5);
        LinearLayout.LayoutParams buttonParams = new LinearLayout.LayoutParams(
                new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        buttonParams.setMargins(5, 0, 5, 0);

    for (i = -1; +i < size(); i++) {
        LinearLayout layout2 = new LinearLayout(context);
        layout2.setOrientation(LinearLayout.HORIZONTAL);
        addView(layout2, lparams);
        twidth = 0;

        while (twidth < width && i + 1 < size()) {
            btn = new Button(context);
            btn.setText(element.get(i + 1).tagName);
            btn.setTextColor(Color.BLACK);
            btn.setBackgroundColor(Color.WHITE);
            btn.setMaxLines(1);
            btn.setLayoutParams(buttonParams);
            twidth += btn.getTextSize() * btn.length() + 10;

            if (twidth >= width) {
                i--;
                break;
            } else {
                btn.setPadding(5, 0, 5, 0);
                btn.setClickable(true);
                btn.setId(element.get(i + 1).tagId);
                layout2.addView(btn, buttonParams);
                i++;
            }

        }
    }
} 
```

有解决方案吗？

# android - 应用内计费 (v3) - IllegalArgumentException：服务未注册：

> ID：15658132
> 
> 赞同：46
> 
> 时间：2013-03-27T11:52:50.880
> 
> 标签：android, in-app-purchase

我刚刚发布了一个带有应用内计费的应用。到目前为止，还没有向 google play 报告崩溃（这只发生在用户不厌其烦地报告崩溃时），但我确实有一些通过 flurry 报告的崩溃（这是自动的）。崩溃报告如下：

```
class java.lang.RuntimeException
Msg: android.app.ActivityThread.performDestroyActivity:3655 (Unable to destroy activity {com.mycompany.mygame/com.mycompany.mygame.Splashscreen}: java.lang.IllegalArgumentException: Service not registered: com.mycompany.mygame.util.IabHelper$1@46369b38) 
```

这只发生在我的应用程序执行的 < 1% 上。

如果我错了，请纠正我，但似乎在混乱报告中没有给出崩溃的行号:-(

我什至不确定这个崩溃报告是什么意思，更不用说如何修复它了。有任何想法吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-05-11T09:40:13.943

我相信这是 IabHelper.java 中的一个错误。

在 IabHelper dispose 方法中，以下行，

```
 if (mContext != null) mContext.unbindService(mServiceConn); 
```

应该改成这个。

```
 if (mContext != null && mService != null) mContext.unbindService(mServiceConn); 
```

mService 仅在服务注册后才设置，因此在我们尝试解除绑定之前，检查它是否为 != null 将保证服务确实已注册。

# java - 从托管在 Linux 服务器上的 Java 客户端使用 WCF

> ID：15658134
> 
> 赞同：1
> 
> 时间：2013-03-27T11:52:55.777
> 
> 标签：java, linux, wcf, tcp, named-pipes

在 Windows 服务器上托管为 TCP IP 或命名管道的 WCF 服务是否可以由托管在 Linux 服务器上的基于 Java 的应用程序使用？

我有一个 wcf 服务，它每天需要低延迟和非常高的调用次数。由于性能问题和 HTTP 开销，不能在 IIS 上托管服务。此服务需要由托管在 linux 服务器上的基于 java 的客户端使用。如果它托管在 TCP 端点上，它可以被 Java 客户端使用吗？看起来命名管道只允许在同一台机器内使用，因此它也不符合要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:30:24.513

只有在 WCF 中确保“互操作性”的绑定是`BasicHttpBinding`. 如果您需要最小过载，请不要使用 WCF。编写你自己的基于 tcp 的协议，使用套接字或任何你喜欢的东西。

[这是非常相似的问题的答案。](https://stackoverflow.com/questions/4188318/using-nettcpbinding-to-communicate-with-non-wcf-clients)

# visual-c++ - VC++ 播放声音

> ID：15658135
> 
> 赞同：1
> 
> 时间：2013-03-27T11:53:08.817
> 
> 标签：visual-c++, audio

我需要 C++ 代码以用户动态选择的特定分贝播放声音。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:58:54.530

[这是在这里](https://stackoverflow.com/questions/1565439/how-to-playsound-in-c)回答的

您需要使用绝对路径，确保您正在发送文件名（使用 SND_FILENAME 标志），并暂停程序足够长的时间以播放声音文件（例如，使用 getchar()）。您需要在项目设置中链接 winmm.lib 库，并在标头中链接 #include windows.h 和 mmsystem.h。

```
#include <windows.h>
#include <mmsystem.h>

int main() {
    PlaySound((LPCSTR) "C:\\kenny g.WAV", NULL, SND_FILENAME | SND_ASYNC);
    getchar();
} 
```

# ormlite - 如何使用 ORMLite 查询只读字段

> ID：15658137
> 
> 赞同：1
> 
> 时间：2013-03-27T11:53:24.657
> 
> 标签：ormlite, readonly

我正在尝试将 ORMLite 作为我正在开发的项目的 ORM。我正在将一个 java 类映射到一个具有一些审计字段（即，updatedby、updatedtime 等）的表。审计字段由数据库使用触发器维护，以确保无论用户使用什么前端，这些字段在更新记录时始终会正确更新。

我需要在我的客户端应用程序中包含这些字段，以便在上次更新记录时通知用户，但用户无法更改它们。有没有办法注释类，以便 ORMLite 不会尝试对这些字段执行更新或将它们包含在插入语句中。如果这些字段包含在更新语句中，数据库将拒绝更新（这就是为什么我不能只写回从数据库查询的原始值）。

我尝试`@DatabaseField(persisted = false)`在 Java 字段上使用注释，但是它们根本不会被查询，因此 Java 对象永远不会填充这些字段。

基本上，我需要将这些字段包含在`SELECT`语句中，但不包含在`INSERT`or`UPDATE`语句中（相当于`@DatabaseField(immutable = true)`注释）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:16:19.813

有趣的模式。 [ORMLite](http://ormlite.com/)当时不支持该功能，但现在从 4.46 版开始支持。

现在有一个`@DatabaseField(readOnly=true)`注释字段。

# django - django - 无法过滤对象并转移到模板

> ID：15658141
> 
> 赞同：0
> 
> 时间：2013-03-27T11:53:34.763
> 
> 标签：django

我有一个模型，我试图根据 url 中传递的参数进行过滤，然后通过模板显示过滤后的对象，但我不知道我做错了什么。

这是 urls.py：

```
url(r'^courses/(?P<course_code>\w+)/$', views.course, name="course"), 
```

这是视图：

```
from website.models import Course

def course(request, course_code):
    current_course = Course.objects.filter(short_title='course_code')
    template = loader.get_template('website/course.html')
    context = Context({
        'current_course': current_course,
    })
    return HttpResponse(template.render(context)) 
```

这是模型：

```
class Course(models.Model):
    title = models.CharField(max_length=200)
    short_title = models.CharField(max_length=5)
    course_type = models.CharField(max_length=100)
    start_date = models.DateTimeField()
    end_date = models.DateTimeField()
    fee = models.IntegerField()
    places = models.IntegerField()
    venue = models.CharField(max_length=200)
    description = models.TextField()
    short_description = models.TextField()
    age_low = models.IntegerField()
    age_high = models.IntegerField() 
```

这是模板：

```
{% if current_course %}

    {% for course in current_course %}

        {{ current_course.title }}

    {% endfor %}

{% else %}
    <p>Sorry, that course doesn't exist.</p>
{% endif %} 
```

当我加载页面 /courses/CR1 （带有 short_title="CR1" 的课程肯定存在，因为它在另一个我没有过滤但只显示所有课程的模板上呈现良好），它给了我“对不起，那个课程不存在。”

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:57:29.760

在这一行：

```
current_course = Course.objects.filter(short_title='course_code') 
```

您正在检查具有确切文本“course_code”的课程标题。您的意思是使用变量的值`course_code`：

```
current_course = Course.objects.filter(short_title=course_code) 
```

# tcl - 您可以使用 TCL (Expect) 在 Solaris 上的 Progress Character UI 旧版应用程序上编写操作脚本吗？

> ID：15658142
> 
> 赞同：0
> 
> 时间：2013-03-27T11:53:36.050
> 
> 标签：tcl, expect, progress-4gl, chui

标题说明了一切，真的。

[在 Sun OS 5.1 上，我可以使用Expect](http://en.wikipedia.org/wiki/Expect)自动执行旧 Progress（移植到 v.10，但仍作为基于字符的 UI 运行，由过程编辑器启动）上的一些操作吗？

有人对这种设置有任何实际经验吗？它知道工作吗？还是根本不工作？有什么注意事项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:33:44.613

是的。我已经做到了。

这是很久以前的事了，但肯定是有可能的。

没有特别针对进度的特殊警告。在复杂的应用程序中自动导航是一项挑战——但你会期望（双关语……）

我记得最难的部分是为每个屏幕设计不同的“锚”字符串。

在这里和那里建立一点等待时间也很有用。

# android - 如何识别从动态生成的表中单击的按钮

> ID：15658144
> 
> 赞同：4
> 
> 时间：2013-03-27T11:53:43.357
> 
> 标签：android, user-interface

我正在从一个字符串数组动态填充一个表。表的每一行还有一个加号和减号按钮来增加/减少一列的值。这些按钮也是动态创建的，如下面的代码所示。在这里，我如何在单击时检测到确切的按钮。IE; 如果我单击第二行的“+”按钮，如何获取单击按钮的 ID 以进行进一步处理。

```
 plusButton= new Button(this);
 minusButton= new Button(this);
 createView(tr, tv1, names[i]);
 createView(tr, tv2, (String)(names[i+1]));
 minusButton.setId(i);
 minusButton.setText("-");
 minusButton.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
 plusButton.setId(i);
 plusButton.setText("+");
 plusButton.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:58:19.223

您可以`onClickListener`为每个按钮设置一个侦听器。`view.getId()`在您的方法上使用方法中的按钮 id`onClick()`来识别按钮单击。

您可以像这里一样为每个按钮添加单独的侦听器（假设您为每个按钮设置的 id 对应于一行）

```
minusButton.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v){
             // Do some operation for minus after getting v.getId() to get the current row
        }
    }
); 
```

**编辑：**

我假设你的代码是这样的。如有偏差，请纠正我。

```
Button minusButton = null;
for(int i = 0; i < rowCount; i++)
{
    minusButton = new Button(this);
    minusButton.setId(i);
    // set other stuff and add to layout
    minusButton.setOnClickListener(this);
} 
```

让你的类实现接口`View.OnClickListener`并实现`onClick()`方法。

```
public void onClick(View v){
    // the text could tell you if its a plus button or minus button
    // Button btn = (Button) v;
    // if(btn){ btn.getText();}
    // getId() should tell you the row number
    // v.getId()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:17:45.470

您可以使用 tags:`minusButton.setTag("-")`和`plusButton.setTag("+")`.

在您的 clickListener 中，只需从您的按钮中获取它`view.getTag()`。

然后在比较字符串标签的操作之间切换。

**编辑：**
ID 的“应该”是唯一的。如果 setId() 对您不起作用， setTag() 方法可能会对您有所帮助。

# mpi - 尽管 array_size 不能完全被进程数整除，但如何在 MPI 中的进程之间大致均匀地共享工作？

> ID：15658145
> 
> 赞同：13
> 
> 时间：2013-03-27T11:53:44.683
> 
> 标签：mpi

大家好，我有一个长度为 N 的数组，我想在“大小”处理器之间尽可能地划分它。N/size 有余数，例如 1000 个数组元素除以 7 个进程，或 14 个进程除以 3 个进程。

我知道 MPI 中至少有两种工作共享方式，例如：

```
for (i=rank; i<N;i+=size){ a[i] = DO_SOME_WORK } 
```

但是，这不会将数组分成连续的块，我想这样做，因为我认为出于 IO 原因更快。

我知道的另一个是：

```
int count = N / size;
int start = rank * count;
int stop = start + count;

// now perform the loop
int nloops = 0;

for (int i=start; i<stop; ++i)
{
    a[i] = DO_SOME_WORK;
} 
```

但是，使用这种方法，对于我的第一个示例，我们得到 1000/7 = 142 = count。所以最后一个等级从 852 开始，到 994 结束。最后 6 行被忽略。

将这样的内容附加到以前的代码中是最好的解决方案吗？

```
int remainder = N%size;
int start = N-remainder; 
if (rank == 0){
     for (i=start;i<N;i++){
         a[i] = DO_SOME_WORK;
     } 
```

这看起来很混乱，如果它是最好的解决方案，我很惊讶我在其他地方没有看到它。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-24T19:10:45.290

如果我有`N`任务（例如，数组元素）和`size`工作人员（例如，MPI 等级），我会这样做：

```
int count = N / size;
int remainder = N % size;
int start, stop;

if (rank < remainder) {
    // The first 'remainder' ranks get 'count + 1' tasks each
    start = rank * (count + 1);
    stop = start + count;
} else {
    // The remaining 'size - remainder' ranks get 'count' task each
    start = rank * count + remainder;
    stop = start + (count - 1);
}

for (int i = start; i <= stop; ++i) { a[i] = DO_SOME_WORK(); } 
```

这就是它的工作原理：

```
/*
  # ranks:                    remainder                     size - remainder
            /------------------------------------\ /-----------------------------\
     rank:      0         1             remainder-1                         size-1
           +---------+---------+-......-+---------+-------+-------+-.....-+-------+
    tasks: | count+1 | count+1 | ...... | count+1 | count | count | ..... | count |
           +---------+---------+-......-+---------+-------+-------+-.....-+-------+
                      ^       ^                            ^     ^
                      |       |                            |     |
   task #:  rank * (count+1)  |        rank * count + remainder  |
                              |                                  |
   task #:  rank * (count+1) + count   rank * count + remainder + count - 1

            \------------------------------------/ 
  # tasks:       remainder * count + remainder
*/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-25T09:16:07.530

这是一个封闭形式的解决方案。

令 N = 数组长度和 P = 处理器数量。

从*j* = 0 到*P* -1，

处理器上数组的起点*j* = floor( *N* * *j* / *P* )

处理器上的数组长度*j* = floor( *N* * ( *j*  + 1) /  *P* ) – floor( *N* * *j*  /  *P* )

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-11T16:23:54.737

考虑您的“1000 个步骤和 7 个过程”示例。

*   简单的除法不起作用，因为整数除法（在 C 中）给了你发言权，你还剩下一些余数：即 1000 / 7 是 142，会有 6 个小玩意儿闲逛

*   天花板除法有相反的问题： ceil(1000/7) 是 143，但是最后一个处理器超出了阵列，或者最终比其他处理器少做。

您要求一种将剩余部分均匀分配给处理器的方案。一些流程应该有 142，其他流程应该有 143。必须有一个更正式的方法，但考虑到这个问题在过去六个月中得到的关注可能不是。

这是我的方法。每个进程都需要做这个算法，只为自己挑选出它需要的答案。

```
#include <mpi.h>
#include <stdio.h>
#include <stdlib.h>

int main (int argc, char ** argv)
{
#define NR_ITEMS 1000
    int i, rank, nprocs;;
    int *bins;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &nprocs);
    bins = calloc(nprocs, sizeof(int));

    int nr_alloced = 0;
    for (i=0; i<nprocs; i++) {
        remainder = NR_ITEMS - nr_alloced;
        buckets = (nprocs - i);
        /* if you want the "big" buckets up front, do ceiling division */
        bins[i] = remainder / buckets;
        nr_alloced += bins[i];
    }

    if (rank == 0)
        for (i=0; i<nprocs; i++) printf("%d ", bins[i]);

    MPI_Finalize();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-17T05:42:07.933

改进@Alexander 的回答：利用`min`来浓缩逻辑。

```
int count = N / size;
int remainder = N % size;
int start = rank * count + min(rank, remainder);
int stop = (rank + 1) * count + min(rank + 1, remainder);

for (int i = start; i < stop; ++i) { a[i] = DO_SOME_WORK(); } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-20T15:04:26.753

我知道这已经过去了，但是一个简单的方法是给每个进程（项目数）/（进程数）+（如果 process_num < num_items mod num_procs 则为 1）。在 python 中，具有工作计数的数组：

```
# Number of items
NI=128
# Number of processes
NP=20

# Items per process
[NI/NP + (1 if P < NI%NP else 0)for P in range(0,NP)] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T17:03:54.340

我认为最好的解决方案是为自己编写一个小函数，以便在进程之间*足够均匀地分配*工作。这是一些伪代码，我相信您可以比我更好地编写 C（您的问题中是 C 吗？）。

```
function split_evenly_enough(num_steps, num_processes)
    return = repmat(0, num_processes)  ! pseudo-Matlab for an array of num_processes 0s
    steps_per_process = ceiling(num_steps/num_processes)
    return = steps_per_process - 1 ! set all elements of the return vector to this number
    return(1:mod(num_steps, num_processes)) = steps_per_process  ! some processes have 1 more step
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-12T20:19:41.423

这个怎么样？

```
int* distribute(int total, int processes) {
    int* distribution = new int[processes];
    int last = processes - 1;        

    int remaining = total;
    int process = 0;

    while (remaining != 0) {
        ++distribution[process];
        --remaining;

        if (process != last) {
            ++process;
        }
        else {
            process = 0;
        }
    }

    return distribution;
} 
```

这个想法是您将一个元素分配给第一个进程，然后将一个元素分配给第二个进程，然后将一个元素分配给第三个进程，依此类推，只要到达最后一个进程，就会跳回第一个进程。

即使进程数*大于*元素数，此方法也有效。它只使用非常简单的操作，因此应该非常快。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-23T21:31:36.123

我遇到了类似的问题，这是我使用 Python 和 mpi4py API 的非最佳解决方案。最佳解决方案将考虑处理器的布局方式，此处将额外的工作分配给较低的等级。不均匀的工作量仅因一项任务而有所不同，因此一般情况下应该没什么大不了的。

```
from mpi4py import MPI
import sys
def get_start_end(comm,N):
    """
    Distribute N consecutive things (rows of a matrix , blocks of a 1D array)
    as evenly as possible over a given communicator.
    Uneven workload (differs by 1 at most) is on the initial ranks.

    Parameters
    ----------
    comm: MPI communicator
    N:  int
    Total number of things to be distributed.

    Returns
    ----------
    rstart: index of first local row
    rend: 1 + index of last row

    Notes
    ----------
    Index is zero based.
    """

    P      = comm.size
    rank   = comm.rank
    rstart = 0
    rend   = N
    if P >= N:
        if rank < N:
            rstart = rank
            rend   = rank + 1
        else:
            rstart = 0
            rend   = 0
    else:
        n = N//P # Integer division PEP-238
        remainder = N%P
        rstart    = n * rank
        rend      = n * (rank+1)
        if remainder:
            if rank >= remainder:
                rstart += remainder
                rend   += remainder
            else:
                rstart += rank
                rend   += rank + 1
    return rstart, rend

if __name__ == '__main__':
    comm = MPI.COMM_WORLD
    n = int(sys.argv[1])
    print(comm.rank,get_start_end(comm,n)) 
```

# java - HttpURLConnection - 返回格式

> ID：15658146
> 
> 赞同：0
> 
> 时间：2013-03-27T11:53:49.483
> 
> 标签：java, web-services, rest, httpurlconnection, type-conversion

我正在使用 HttpUrlConnection 来使用 REST 服务。当我执行 GET 时，就像我在下面展示的那样，我不想获取按字符返回的信息。我想以返回的格式获得结果。例如，在这里，我想获得一个布尔值，而不是类似`System.out.print((char) ch);`. 我怎样才能收到它？

我知道我可以将 String 解析为 Boolean 类型，但是如果我收到另一种数据类型呢？

```
public class SensorGetDoorStatus {

public static void main(String[] args) throws Exception
{
    HttpURLConnection urlConnection = null;

try {
    String webPage = "http://localhost:8080/LULServices/webresources/services.sensors/doorstatus";
            String name = "xxxx";
    String password = "xxxx";

            Authenticator myAuth = new Authenticator() 
            {
              final String USERNAME = "xxxx";
              final String PASSWORD = "xxxxx";

              @Override
              protected PasswordAuthentication getPasswordAuthentication()
              {
                return new PasswordAuthentication(USERNAME, PASSWORD.toCharArray());
              }
            };

            Authenticator.setDefault(myAuth);

    String authString = name + ":" + password;
    byte[] authEncBytes = Base64.encodeBase64(authString.getBytes());
    String authStringEnc = new String(authEncBytes);

    URL urlToRequest = new URL(webPage);
    urlConnection = (HttpURLConnection) urlToRequest.openConnection();

    urlConnection.setRequestProperty("Authorization", "Basic " + authStringEnc);
    System.out.println("Authorization : Basic " + authStringEnc);

    urlConnection.setRequestMethod("GET");
    urlConnection.setRequestProperty("Accept", "application/json");                
    urlConnection.setReadTimeout(15*1000);
    urlConnection.connect();

    InputStream inStrm = urlConnection.getInputStream();

    int ch;
    while (((ch = inStrm.read()) != -1))
         System.out.print((char) ch);
    inStrm.close(); 

} catch (MalformedURLException e) {
        e.printStackTrace();
} catch (IOException e) {
        System.out.println("Failure processing URL");
        e.printStackTrace();
} catch (Exception e) {
        e.printStackTrace();
    }

    finally {
    if (urlConnection != null) {
        urlConnection.disconnect();
    }
}
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:02:41.827

您可能想看看使用 DataInputStream。您可以使用此类的方法 readBoolean 方法来读取布尔值。

DataInputStream 和 DataOutputStream 还为您提供了写入和读取特定数据类型的方法，例如 int、float、long 等

您应该在发送数据的另一端写入类 DataOutputStream 的 writeBoolean。

代码将如下所示：

```
 InputStream inStrm = urlConnection.getInputStream();
 DataInputStream doi = new DataInputStream(inStrm);
 boolean bol = doi.readBoolean();

  doi.close();
  inStrm.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:59:00.897

我会玩[`BufferedReader`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)：它允许`InputStream`逐行读取，并且您可能能够以这种方式解析您的数据。

不过，如果您的数据采用 XML 或 JSON 等预定义格式，则最好使用库来解析响应数据。

# sublimetext2 - Sublime text html 整洁配置

> ID：15658147
> 
> 赞同：0
> 
> 时间：2013-03-27T11:54:01.280
> 
> 标签：sublimetext2, htmltidy

我使用 sublime text 有一段时间了。当我尝试使用 HTML tidy 插件来缩进 html 文件时，我发现我的所有换行符都被它自动删除了。

有没有办法阻止它？我不想通过插件删除换行符。我找不到任何可以为我做到这一点的设置。

我应该去其他一些 HTML 格式化程序吗？

# android - 将片段附加到 Android 中的活动

> ID：15658148
> 
> 赞同：1
> 
> 时间：2013-03-27T11:54:02.733
> 
> 标签：android, android-activity, fragment, viewpagerindicator

我的旧版 Android 应用程序使用 4 个不同的活动（FirstActivity => FourthActivity，具有相应的 xml activity_first => activity_fourth），该应用程序可以在使用`Intent`. 最近我想更改用户界面以使用`ViewPagerIndicator`. 我已经实现了 4 个这样的片段：

```
public class FirstFragment extends Fragment{
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        return inflater.inflate(R.layout.activity_first, null);
    }
} 
```

问题是，如何将所有业务代码从 FirstActivity 迁移到 FirstFragment？我是否只需要找到 onCreate、onDestroy、onStart... 的等价物并复制/粘贴代码（在适当的地方添加 getActivity()、getView()）？是否有任何简单的方法可以将片段附加到活动以避免这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:46:57.650

最简单的方法是将您在各个活动中的代码迁移`onCreate()`到`onActivityCreated()`新片段中。`onCreate()`然后，您可以在支持活动的方法中使用片段事务将片段添加到您的活动中。android 文档很好地介绍了如何在[此处](http://developer.android.com/guide/components/fragments.html)执行此操作，并附有示例代码。如果有一些混淆，您将在您的基础活动中执行以下操作：

得到一个新的`FragmentManager`

```
FragmentManager fragmentManager = getFragmentManager(); 
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction(); 
```

创建片段的新实例

```
ExampleFragment fragment = new ExampleFragment(); 
```

将该片段添加到您的`FragmentManager`

```
fragmentTransaction.add(R.id.fragment_container, fragment); 
fragmentTransaction.commit(); 
```

有许多不同的方式可以使用片段——比如在 a `ViewPager`or`ViewSwitcher`中需要不同的实现，但这听起来像是解决了你想要做的事情。

# jquery - 单击类是子类的链接

> ID：15658150
> 
> 赞同：1
> 
> 时间：2013-03-27T11:54:09.520
> 
> 标签：jquery

我的代码是这个

```
<a onclick="......">
  <span class="addUserButton"></span>
</a> 
```

我想在该类`addUserButton`是该链接的子类的链接上执行单击事件。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:55:07.960

您可以使用[:has](http://api.jquery.com/has-selector/)， :has 选择包含至少一个与指定选择器匹配的元素的元素。

**[现场演示](http://jsfiddle.net/vrbr2/)**

```
$('a:has(.addUserButton)').click(function(){

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:57:21.447

```
$(".addUserButton").parent().click(); 
```

# iphone - 无法在 CCTextureCache 中添加图像 fire.png，但 fire.png 在项目中..？

> ID：15658153
> 
> 赞同：1
> 
> 时间：2013-03-27T11:54:22.677
> 
> 标签：iphone, objective-c, cocos2d-iphone, cctexturecache

我在互联网上搜索了这个问题的答案，但这让我发疯..

我正在尝试创建一个 CCParticleSun 或 CCParticleEffect .. 现在我知道这些需要在 cocos2d 的资源文件夹中找到的 fire.png 和 fire.pvr .. 我已将这些文件包含在我的项目中（就像所有我的其他图片..)

我的代码是这样的：

```
 sun = [[CCParticleSun alloc]initWithTotalParticles:100];

    sun.texture = [[CCTextureCache sharedTextureCache] addImage:@"fire.png"];

    sun.position = ccp(120,120);

    [self addChild:sun]; 
```

但是，当我运行我的代码时.. 我的输出中出现这些错误：

```
2013-03-27 13:19:25.063 Touchz[425:1be03] cocos2d: OS version: 5.1 (0x05010000)
2013-03-27 13:19:25.065 Touchz[425:1be03] cocos2d: GL_VENDOR:   Apple Computer, Inc.
2013-03-27 13:19:25.066 Touchz[425:1be03] cocos2d: GL_RENDERER: Apple Software Renderer
2013-03-27 13:19:25.066 Touchz[425:1be03] cocos2d: GL_VERSION:  OpenGL ES 2.0 APPLE
2013-03-27 13:19:25.068 Touchz[425:1be03] cocos2d: GL_MAX_TEXTURE_SIZE: 4096
2013-03-27 13:19:25.068 Touchz[425:1be03] cocos2d: GL_MAX_TEXTURE_UNITS: 8
2013-03-27 13:19:25.069 Touchz[425:1be03] cocos2d: GL_MAX_SAMPLES: 4
2013-03-27 13:19:25.069 Touchz[425:1be03] cocos2d: GL supports PVRTC: YES
2013-03-27 13:19:25.070 Touchz[425:1be03] cocos2d: GL supports BGRA8888 textures: YES
2013-03-27 13:19:25.071 Touchz[425:1be03] cocos2d: GL supports NPOT textures: YES
2013-03-27 13:19:25.071 Touchz[425:1be03] cocos2d: GL supports discard_framebuffer: YES
2013-03-27 13:19:25.072 Touchz[425:1be03] cocos2d: GL supports shareable VAO: NO
2013-03-27 13:19:25.072 Touchz[425:1be03] cocos2d: compiled with Profiling Support: NO

2013-03-27 13:19:25.073 Touchz[425:1be03] cocos2d: **** WARNING ****           CC_ENABLE_GL_STATE_CACHE is disabled. To improve performance, enable it by editing ccConfig.h

2013-03-27 13:19:25.074 Touchz[425:1be03] cocos2d: cocos2d v2.0.0
2013-03-27 13:19:25.075 Touchz[425:1be03] cocos2d: Using Director     Type:CCDirectorDisplayLink
2013-03-27 13:19:25.105 Touchz[425:1be03] Retina Display Not supported
2013-03-27 13:19:25.109 Touchz[425:1be03] cocos2d: animation started with frame interval:     60.00
2013-03-27 13:19:25.112 Touchz[425:1be03] cocos2d: surface size: 480x320
2013-03-27 13:19:25.114 Touchz[425:1be03] cocos2d: CCTexture2D: Using RGB565 texture since     image has no alpha
2013-03-27 13:19:26.228 Touchz[425:1be03] cocos2d: CCTexture2D: Using RGB565 texture since image has no alpha
2013-03-27 13:19:26.234 Touchz[425:1be03] -[CCFileUtils     fullPathFromRelativePath:resolutionType:] : cocos2d: Warning: File not found: fire.png
2013-03-27 13:19:26.235 Touchz[425:1be03] cocos2d: CCTexture2D. Can't create Texture. cgImage is nil
2013-03-27 13:19:26.236 Touchz[425:1be03] cocos2d: Couldn't add image:fire.png in     CCTextureCache
2013-03-27 13:19:26.237 Touchz[425:1be03] cocos2d: CCTexture2D. Can't create Texture. cgImage is nil
2013-03-27 13:19:26.237 Touchz[425:1be03] cocos2d: Couldn't add image:fire.png in CCTextureCache 
```

即使我确定我的项目中有我的 fire.png 和 fire.pvr ！我会发布我的项目文件的图像，但我还没有 10 个声誉点。无论如何，可能是什么问题？任何帮助是极大的赞赏。CCParticle 效果对任何游戏都很重要。在此先感谢。

PS 我正在运行 MAC OSX 10.7.4，我有 cocos2d-iphone 2.0 和 Xcode 4.4.1

# android - 错误：在 android 中将图像上传到 twitpic

> ID：15658158
> 
> 赞同：1
> 
> 时间：2013-03-27T11:54:34.827
> 
> 标签：android, twitpic

在我的 android 应用程序中，我想将图像上传到 twitpic。我的 SD 卡中有一些图像。当我单击按钮时，图像将上传到 twitpic。这是我的代码...

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    uploadImage = (Button) findViewById(R.id.uploadImage);
    uploadImage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
        new ImageSender().execute();

        }
    });
}

private class ImageSender extends AsyncTask<URL, Integer, Long> {
     private String url;

     protected void onPreExecute() {
mProgressDialog = ProgressDialog.show(MainActivity.this, "", "Sending image...", true);

mProgressDialog.setCancelable(false);
mProgressDialog.show();
}

        protected Long doInBackground(URL... urls) {
            long result = 0;

            TwitterSession twitterSession   = new TwitterSession(MainActivity.this);
            AccessToken accessToken = twitterSession.getAccessToken();

Configuration conf = new ConfigurationBuilder()
            .setOAuthConsumerKey(twitter_consumer_key)
            .setOAuthConsumerSecret(twitter_secret_key)
            .setOAuthAccessToken(accessToken.getToken())
            .setOAuthAccessTokenSecret(accessToken.getTokenSecret())
            .build();

OAuthAuthorization auth = new OAuthAuthorization (conf, conf.getOAuthConsumerKey (), conf.getOAuthConsumerSecret (),
new AccessToken (conf.getOAuthAccessToken (), conf.getOAuthAccessTokenSecret ()));

ImageUpload upload = ImageUpload.getTwitpicUploader (twitpic_api_key, auth);

Log.d(TAG, "Start sending image...");

try {
    String ExternalStorageDirectoryPath = Environment
              .getExternalStorageDirectory()
              .getAbsolutePath();

    String targetPath = ExternalStorageDirectoryPath + "/Friends/"+"image2.jpg";

    File targetDirector = new File(targetPath);
url = upload.upload(new File(targetDirector.getAbsolutePath()));
result = 1;

Log.d(TAG, "Image uploaded, Twitpic url is " + url);    
} catch (Exception e) { 
Log.e(TAG, "Failed to send image");

e.printStackTrace();
}

            return result;
        }

        protected void onProgressUpdate(Integer... progress) {
        }

        protected void onPostExecute(Long result) {
         mProgressDialog.cancel();

         String text = (result == 1) ? "Image sent successfully.\n Twitpic url is: " + url : "Failed to send image";

         Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG).show();
        }
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

TwitterSession 课程在这里...

```
public class TwitterSession {
private SharedPreferences sharedPref;
private Editor editor;

private static final String TWEET_AUTH_KEY = "auth_key";
private static final String TWEET_AUTH_SECRET_KEY = "auth_secret_key";
private static final String TWEET_USER_NAME = "user_name";
private static final String SHARED = "Twitter_Preferences";

public TwitterSession(Context context) {
    sharedPref    = context.getSharedPreferences(SHARED, Context.MODE_PRIVATE);

    editor        = sharedPref.edit();
}

public void storeAccessToken(AccessToken accessToken, String username) {
    editor.putString(TWEET_AUTH_KEY, accessToken.getToken());
    editor.putString(TWEET_AUTH_SECRET_KEY, accessToken.getTokenSecret());
    editor.putString(TWEET_USER_NAME, username);

    editor.commit();
}

public void resetAccessToken() {
    editor.putString(TWEET_AUTH_KEY, null);
    editor.putString(TWEET_AUTH_SECRET_KEY, null);
    editor.putString(TWEET_USER_NAME, null);

    editor.commit();
}

public String getUsername() {
    return sharedPref.getString(TWEET_USER_NAME, "");
}

public AccessToken getAccessToken() {
    String token        = sharedPref.getString(TWEET_AUTH_KEY, null);
    String tokenSecret  = sharedPref.getString(TWEET_AUTH_SECRET_KEY, null);

    if (token != null && tokenSecret != null) 
    {
        AccessToken accessToken =  new AccessToken(token, tokenSecret);
        int userID = accessToken.getUserId();
        User user = null;
        try {
            user = twitter.showUser(userID);
        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String username = user.getName();

        storeAccessToken(accessToken, username);
        return accessToken;
    }
    else
        return null;
} 
```

这是我的日志-

> 03-27 11:47:34.427：E/AndroidRuntime(2676)：致命异常：AsyncTask #1 03-27 11:47:34.427：E/AndroidRuntime(2676)：java.lang.RuntimeException：执行 doInBackground 时发生错误() 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 android.os.AsyncTask$3.done(AsyncTask.java:299) 03-27 11:47:34.427: E/AndroidRuntime(2676):在 java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:219) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.FutureTask.run(FutureTask.java:239) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.ThreadPoolExecutor。runWorker(ThreadPoolExecutor.java:1080) 03-27 11:47:34.427: E/AndroidRuntime(2676): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 03-27 11:47: 34.427: E/AndroidRuntime(2676): at java.lang.Thread.run(Thread.java:856) 03-27 11:47:34.427: E/AndroidRuntime(2676): 引起：java.lang.NullPointerException 03- 27 11:47:34.427: E/AndroidRuntime(2676): 在 com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:1) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.FutureTask.run(FutureTask.java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ... 4 更多

空指针来了

```
.setOAuthAccessToken(accessToken.getToken()) 
```

我怎样才能消除错误？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:19:22.350

在您的方法 getAccessToken() 中，token 或 tokenSecret 或两者都从 sharedpreference 中变为 null。

```
public AccessToken getAccessToken() {

     // either or both of them below are coming up as null
    String token        = sharedPref.getString(TWEET_AUTH_KEY, null);
    String tokenSecret  = sharedPref.getString(TWEET_AUTH_SECRET_KEY, null);

    if (token != null && tokenSecret != null) 
        //here you are retreiving the accesstoken when it is not there in the shared preference then you need to save it as well because otherwise it will create a new AccessToken every time

        AccessToken accToken =  new AccessToken(token, tokenSecret);

        storeAccessToken(accToken, userName); /// you need to sort out where the userName will come from as it is needed by your StoreAccessToken method so next time getAccessToken is called it will retrieve the AccessToken from SharedPreference

        return 
    else
        return null;
} 
```

现在我可以从代码中看到 storeAccessToken 正在存储您上面需要的所有信息。而且我看不到它是否被调用。所以请看看它是否被调用？

# css - div定位跟随另一个div

> ID：15658166
> 
> 赞同：0
> 
> 时间：2013-03-27T11:54:57.953
> 
> 标签：css, html, comments, positioning

我正在处理的网站上的评论部分有一点问题：

[http://whybaguio.com/php/profile/businessprofile.php?id=103#](http://whybaguio.com/php/profile/businessprofile.php?id=103#)

看看如何添加您自己的反馈！div 与 Facebook 评论一起下降。我不知道如何不让它随着 facebook 的评论而失望....大声笑，我不确定我是否在解释我的自我正确，但我希望你们能明白...

我尝试将它定位为相对和绝对，但它超出了它的父 div....

请帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:03:32.187

如果我理解正确：将“添加您自己的反馈”div 放在 HTML 代码中的“Facebook 评论”div 之前。

您的“添加您自己的反馈”div 具有“float:right”属性，并且带有“float”的块应该放在非浮动块之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:04:04.690

您可以将`float: left;`属性设置为`.fb-comment`类，并从类中删除`margin-left`属性`.secondcomment`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:01:32.710

好的，这是如何使用的问题`position:absolute;`您需要做的是像这样更改代码：

```
#feed {
background: white;
height: 280px;
padding: 10px;
margin-top: 295px;
overflow-y: auto;
margin-left: -580px;
position: relative;/*this needs to have a position for .secondcomment to 'hook on' to*/
}

.secondcomment {
position: absolute;
top: 10px;
right: 0;
} 
```

# ruby - 通过 RVM 安装 Ruby，无需确认提示

> ID：15658167
> 
> 赞同：3
> 
> 时间：2013-03-27T11:54:58.500
> 
> 标签：ruby, rvm, puppet

我使用 Puppet 通过 RVM 安装 Ruby，并且直到最近（最近几天左右）都可以正常工作。

我认为这是由于 rvm 希望我“按任意键继续”。无论如何强制“是”这个，我试过 --force 但没有运气。谢谢

```
[root@local ~]# rvm install --binary --verify-downloads 1 ruby-1.9.3-p362
Searching for binary rubies, this might take some time.
Installing requirements for unknown, might require sudo password.
Always update your system first!
/bin/bash
/usr/bin/curl
which: no git in (/usr/local/rvm/gems/ruby-1.9.3-p362/bin:/usr/local/rvm/gems/ruby-1.9.3-p362@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p362/bin:/usr/local/rvm/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/aws/bin)
/usr/bin/patch
Install: git
Install: build-essential openssl libreadline zlib1g libyaml libsqlite3 sqlite3 libxml2 libxslt autoconf libc6 libgdbm ncurses automake libtool bison pkg-config
press any key to continue 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:26:50.830

尝试：

```
$ yes | rvm install --binary --verify-downloads 1 ruby-1.9.3-p362 
```

从`yes`的手册页：

> 重复输出包含所有指定 STRING(s) 或 'y' 的行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T20:10:53.197

此消息来自 RVM 的新 autolibs 功能，您可以在此处找到它的文档：[https ://rvm.io/rvm/autolibs](https://rvm.io/rvm/autolibs)

您可以使用以下方法禁用自动库：

```
rvm autolibs disable 
```

并确保向 RVM 报告它无法识别您的系统 => [https://github.com/wayneeseguin/rvm/issues](https://github.com/wayneeseguin/rvm/issues) ...确保包括`head -n 100 /etc/*release`（以用户而非 root 身份运行）

# ruby-on-rails - Rails 如何将 STI 模型转换为其父模型？

> ID：15658171
> 
> 赞同：4
> 
> 时间：2013-03-27T11:55:12.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, metaprogramming

编辑：重写整个问题！

```
class Product < ActiveRecord::Base
end

class ExternalProduct < Product
end 
```

Rails 有一种将 ExternalProduct 转换为 Product 的方法，这就是我正在寻找的方法。所以我们希望这个断言中有一个真实的值：

```
assert ExternalProduct.some_method == Product 
```

编辑：我不是在寻找如何断言这一点。我正在研究如何将 ExternalProduct 变成 Product。

编辑2：

如果这是我的输入：

```
:external_product 
```

我如何在不知道任何子类或 STI 的情况下将其*转换*为正确的模型，即`Product`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T20:01:34.450

`ExternalProduct.base_class`是你想要的方法。

不像`superclass`它实际上会给你 STI 基类，所以如果层次结构发生变化或者你完全传入不同的对象，它仍然会返回适当的类。

[在此处](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/inheritance.rb#L42)查看源代码`base_class`以及 STI 内部如何使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-18T18:47:33.480

如果你有一个实例，`ExternalProduct`但你希望它是一个实例`Product`，你可以这样做：

`@product = @external_product.becomes(Product)`

这相当于做：

`@product = Product.new(@external_products.attributes)`

也许不是您问题的答案，但可能对遇到此问题的其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:16:49.343

这就是你获得超级课程的方式

```
>> ExternalProduct.superclass.name
>> "Product" 
```

这是获取超类的示例。

```
>> e = ExternalProduct.first
>> ExternalProduct(id: 1, author_id: 1)
>> e.class
>> ExternalProduct(id: integer, author_id: integer
>> e.class.superclass
>> Product(id: integer, author_id: integer
>> e.class.superclass.name 
>> "Product" 
```

# c# - RestClient DELETE操作Json错误

> ID：15658172
> 
> 赞同：1
> 
> 时间：2013-03-27T11:55:13.313
> 
> 标签：c#, asp.net

我正在尝试使用 RestClient 进行删除操作，但我无法将我的 Json 对象包含在请求正文中。这是我的代码：

```
 var client = new RestClient(WebService);
        var request = new RestRequest(string.Format("/api/v1/{0}/{1}", controller,    action), method);

        request.AddHeader("Accept", ContentTypeApplicationJson);
        request.RequestFormat = DataFormat.Json;            
        request.AddHeader("Content-Type", ContentTypeApplicationJson);
        request.AddCookie(".ASPXAUTH", AspxAuth);
        request.AddBody(jsonObjectRequest);

        var response = client.Execute(request);

        var jsonResponse = string.Empty;
        using (var stream = new MemoryStream(response.RawBytes))
        {
            stream.Position = 0;
            var sr = new StreamReader(stream);
            jsonResponse = sr.ReadToEnd();
        }

        var jObjectDeserialize = GetJObjectDeserialize(jsonResponse); 
```

在我的示例 ContentTypeApplicationJson = application/json 和 jsonObject 是一个对象，其中包含：

{ “BasketItemReferenceGuid”：“示例字符串 1”，“BasketReferenceGuid”：“示例字符串 2”}

这是我在提琴手的要求

```
删除 http://local.webapi.com/api/v1/BasketV3Products/ HTTP/1.1
接受：应用程序/json
内容类型：应用程序/json
用户代理：RestSharp 102.4.0.0
主机：local.webapi.com
Cookie: .ASPXAUTH=E6D216034E2CB1A22466A501392B1E2E46601E345B8A0E7743D76CF2270ACFC8ED3C9F1F2F477C4499267222A250E4490291381EE68FE719E094EF1ACDD619B4D792341988F80CB67E8B5037D8ACF9FBABB74DE1E75A530AB432D85722D647771C6C576F8E810257CE9E60117DCEEFBD949EAD9E64C84898BDC5D691F957CE6266CF5652C693B86ED1D55907AAC5DC68
内容长度：0
接受编码：gzip，放气

```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:02:10.897

看起来即使 HTTP 规范没有明确说明 a`DELETE`不应该有正文，但许多 Web 服务器（或 Web 代理）会忽略它。

从语义上讲，在使用 时`DELETE`，uri 应该将资源标识为`DELETE`。这有点像使用`GET`. 同样，`GET`规范并没有禁止正文，但实际上并没有多少 Web 服务器（或 Web 代理）支持`GET`请求正文。

有关更多信息，请参阅[此 SO 帖子](https://stackoverflow.com/questions/299628/is-an-entity-body-allowed-for-an-http-delete-request)。

因此，实现您的更好方法是`DELETE`将其放置`BasketItemReferenceGuid`在`BasketReferenceGuid`uri 模板中。

# javascript - 使用静态 PNG 制作加载图标

> ID：15658174
> 
> 赞同：0
> 
> 时间：2013-03-27T11:55:22.313
> 
> 标签：javascript, html, css, png

我打算使用 Javascript 在 HTML 上制作一个带有 PNG 的加载图标。
我的意思是，不是嵌入 GIF ..

我发现[加载动画 png](https://stackoverflow.com/questions/2820011/loading-animated-png/)但它引用[http://www.ajaxload.info/](http://www.ajaxload.info/)
它使用 GIF ..

我有一次想到这个想法，GMail 使用这种方法，我检查元素它..
它使用图像内部有大约 10 个类似齿轮的 PNG..
彼此是相同的齿轮，但有一定程度的旋转差异..

聊天发送时，显示加载图标，齿轮，但它是一个单一的齿轮，移动，旋转......

我想知道如何做到这一点..
我真的想完全避免使用 GIF..

***编辑：***

我在[http://devthought.com/wp-content/projects/mootools/APNG/Demo/](http://devthought.com/wp-content/projects/mootools/APNG/Demo/)
在“预先存在的 DIV 元素（单个图像），每帧间隔”部分得到了我想要的东西。谢谢答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:58:11.287

您可以使用[JQuery Rotate](https://code.google.com/p/jqueryrotate)，这将允许您旋转页面上的 PNG 图像以模拟您使用动画 GIF 获得的加载旋转。

# c# - 无法在 C# 后面的代码中使用 javascript 变量

> ID：15658175
> 
> 赞同：0
> 
> 时间：2013-03-27T11:55:22.710
> 
> 标签：c#, javascript, jquery, asp.net

伙计们，我正在使用 jquery 价格范围滑块从用户那里获取价格范围。但问题是用户在滑块上选择的价格范围我必须在后面的代码中使用它。我的代码是这样的：我的 java 脚本：

```
 <script type="text/javascript">
        //adding load class to body and hide page
        document.documentElement.className += 'loadstate';
    </script>
    <script type ="text/javascript" >
      var str1=  document.getElementById("amt3").value;
     var str2=   document.getElementById("amt4").value;
     document.getElementById("hf1").value = str1;
     document.getElementById("hf2").value = str2;
    </script>

    </head> 
```

我的 HTML 代码是这样的：

```
 <asp:HiddenField ID="hf1" runat="server" />
    <asp:HiddenField ID="hf2" runat="server" />
    <div class="form-row row-fluid">
        <div class="span12">
            <div class="row-fluid">
                <label class="form-label span4" for="slider">
                    Range slider</label>
                <div class="span8">
                    <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                    <ContentTemplate >
                        <asp:HiddenField ID="HiddenField1" runat="server" />
                    <div id="slider-range"    class="slider" >
                    </div>
                    <input type="text" id="amount1" style="border: 0; color: #ED7A53; font-weight: bold;
                        box-shadow: none;" />
                    <input type="text" id="amt3"    style="border: 0; color: #ED7A53; font-weight: bold;
                        box-shadow: none;" />
                    <input type="text" id="amt4"    name="amt4" style="border: 0; color: #ED7A53;
                        font-weight: bold; box-shadow: none;" />
                        </ContentTemplate>
                    </asp:UpdatePanel>
                </div>
            </div>
        </div> 
```

我的代码后面是这样的：

```
 protected void lnkFilter_Click1(object sender, EventArgs e)

        {

          string str=  hf1.Value;
            if (WebHelper.Cast(amt2.Value, 0) != 0)
            {
                Fill();

            }

            } 
```

但问题是 hf1（隐藏字段）正在获取空字符串值。请帮助我并建议我一个解决方案如何在文件后面的代码中使用 jquery 滑块上的选定范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:58:13.430

您应该在更新面板中移动隐藏的值，因为它们不会在部分更新时被发布回服务器。

# sql-server - T-SQL 日期时间到日期转换 - 容差

> ID：15658176
> 
> 赞同：3
> 
> 时间：2013-03-27T11:55:23.693
> 
> 标签：sql-server, tsql, datetime, date-conversion

我们试图从 DateTime 变量中去除时间：

```
DECLARE @Date DateTime 

SET @Date = '01Jan2013 23:59:59.998'
PRINT DATEADD(dd, 0, DATEDIFF(dd, 0, @Date ))

SET @Date = '01Jan2013 23:59:59.999'
PRINT DATEADD(dd, 0, DATEDIFF(dd, 0, @Date )) 
```

**结果：**

> 2013 年 1 月 1 日上午 12:00 2013 年 1
> 月 2 日上午 12:00

为什么`01Jan2013 23:59:59.999`以1 月**2 日**而不是 1 月 1 日的形式返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:58:04.817

因为在日期时间类型中没有 .999 和 .998 秒的小数部分。您只有 0.990、0.993 和 0.997。

所以 .998 向下舍入为 0.997，而 0.999 向上舍入。阅读有关该类型的更多信息。

# c# - 在另一个 Window 中添加 Window 或 UserControl 的实例

> ID：15658183
> 
> 赞同：0
> 
> 时间：2013-03-27T11:56:02.850
> 
> 标签：c#, wpf, wpf-controls, wpftoolkit

我有一个在`Window`其中显示一组的`MediaElements`。它们消耗大量内存。有一个预览选项。

预览需要与加载和播放`Window`的main 同步。`MediaElements`

目前，我运行了两个控件实例，它们在主程序`Window`和预览中加载`Window`，它会减慢整个应用程序的速度。有时也有些`MediaElements`空白。

是否可以在单独的`Window`or中显示`UserControl`已经运行或添加为子控件的or的实例。`Panel``Canvas``Grid`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:14:51.753

使用多个`MediaElements`. 不推荐，因为您可以[在此处](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/3b9e40f1-039a-4d4b-b38b-2be2a25544b1/)和[此处](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9fd599fa-6967-480d-9e7e-f72d3dee2e2e)看到。

我建议您尝试使用[WPF MediaKit](http://wpfmediakit.codeplex.com/)或[DirectShowNet](http://directshownet.sourceforge.net/)库。

WPF MediaKit 提供了`MediaElement`.

它`MediaUriElement`可以像这样使用

```
<DirectShowControls:MediaUriElement 
       Source="{Binding ElementName=fileDialog, Path=FilePath}" 
       Stretch="Uniform" 
       VideoRenderer="VideoMixingRenderer9" 
       LoadedBehavior="Play"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:04:21.640

`VisualBrush`通过使用并将其分配给主窗口解决了与主窗口和预览窗口的同步问题，`Visual`这有效地帮助我减少了内存使用量。

参考：链接：[visual-brush-in-wpf](http://www.c-sharpcorner.com/uploadfile/raj1979/visual-brush-in-wpf/)

# c - C中的pthread，不兼容的类型

> ID：15658184
> 
> 赞同：3
> 
> 时间：2013-03-27T11:56:04.117
> 
> 标签：c, pthreads

在编译时，我得到了这个错误

```
expected 'union pthread_mutex_t *' but argument is type of 'pthread_mutex_t' 
```

1）'union pthread_mutex_t *'和'pthread_mutex_t'有什么区别？
2）我如何将'pthread_mutex_t'变成正确的参数？

```
void buffer_insert(int number)
{
  pthread_mutex_t padlock;
  pthread_cond_t non_full;
  pthread_mutex_init(&padlock, NULL);
  pthread_cond_init(&non_full, NULL);
  if(available_buffer()){
    put_in_buffer(number);
  } else {
    pthread_mutex_lock(padlock);
    pthread_cond_wait(non_full, padlock);
    put_in_buffer(number);
    pthread_mutex_unlock(padlock);
    pthread_cond_signal(non_empty);
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T11:57:43.353

中的星号

```
int pthread_mutex_lock(pthread_mutex_t *mutex); 
```

表示该函数需要一个指向的[*指针*](http://en.wikipedia.org/wiki/Pointer_%28computer_programming%29#C_pointers)`pthread_mutex_t`。

您需要获取互斥变量的地址，即在调用函数时替换`padlock`为。`&padlock`

例如，

```
pthread_mutex_lock(padlock); 
```

应该读

```
pthread_mutex_lock(&padlock); 
```

依此类推（对于互斥锁和条件变量）。

还值得注意的是，在您显示的代码中，`padlock`并且`non_full`是函数本地的，并且每次调用函数时都会创建和销毁。因此不会发生同步。您需要重新考虑如何声明和初始化这两个变量。

代码还有更多问题。例如，您使用条件变量的方式在几个方面存在缺陷。

考虑到这一点，我建议遵循 pthreads 教程。

# c# - 使用 WshShell 从 VBA 运行 .NET 应用程序时出现溢出错误

> ID：15658186
> 
> 赞同：1
> 
> 时间：2013-03-27T11:56:12.280
> 
> 标签：c#, .net, vba, wsh, exit-code

为什么我收到[错误 6：](http://msdn.microsoft.com/en-us/library/aa264525%28v=vs.60%29.aspx)使用以下代码启动我的 .NET 应用程序 (QCSearch.exe) 时溢出：

```
Private Sub StartQCSearch()
    Dim wsh As WshShell
    Dim waitOnReturn As Boolean: waitOnReturn = True
    Dim windowStyle As Integer: windowStyle = 1
    Dim errorCode As Integer
    Dim pth As String

    Set wsh = New WshShell
    pth = ThisWorkbook.Path & "\QCSearch.exe"
    // Following line is marked, when debugging error 6:
    errorCode = wsh.Run(pth, windowStyle, waitOnReturn)
    If errorCode <> 0 Then
        MsgBox "QCSearch.exe exited with error code " & errorCode & "."
    End If
End Sub 
```

.NET 应用程序（用 c# 编写）有一个主窗体，它打开一个对话框。当我确认此对话框时，出现错误 6 并立即关闭 .NET 应用程序。

似乎对话框正在返回一些不可分配的退出代码`errorCode`。但正如我所说，我检查了我的 .NET 应用程序的退出代码，但是，它们通常不应该通过关闭任何对话框返回，而是通过关闭主窗体？！

另外，调试错误后，`errorCode`变量仍然赋值为0。

感谢您提前提供任何帮助。

***更新***：

从 Windows CMD 启动 .NET 应用程序时，在确认对话框后也会中断。现在，我真的很困惑。有谁知道为什么内部对话框会关闭整个应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:33:01.183

好的，**永远不要**忘记这样做，如果您在 .NET 应用程序中使用相对路径：

```
wsh.CurrentDirectory = ThisWorkbook.Path 
```

# python - 用python中的另一个字符串替换单词列表中的所有单词

> ID：15658187
> 
> 赞同：9
> 
> 时间：2013-03-27T11:56:13.790
> 
> 标签：python, text, for-loop, replace

我有一个用户输入的字符串，我想搜索它并用我的替换字符串替换任何出现的单词列表。

```
import re

prohibitedWords = ["MVGame","Kappa","DatSheffy","DansGame","BrainSlug","SwiftRage","Kreygasm","ArsonNoSexy","GingerPower","Poooound","TooSpicy"]

# word[1] contains the user entered message
themessage = str(word[1])    
# would like to implement a foreach loop here but not sure how to do it in python
for themessage in prohibitedwords:
    themessage =  re.sub(prohibitedWords, "(I'm an idiot)", themessage)

print themessage 
```

上面的代码不起作用，我确定我不明白 python for 循环是如何工作的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-27T12:03:13.077

您可以通过一次调用来做到这一点`sub`：

```
big_regex = re.compile('|'.join(map(re.escape, prohibitedWords)))
the_message = big_regex.sub("repl-string", str(word[1])) 
```

例子：

```
>>> import re
>>> prohibitedWords = ['Some', 'Random', 'Words']
>>> big_regex = re.compile('|'.join(map(re.escape, prohibitedWords)))
>>> the_message = big_regex.sub("<replaced>", 'this message contains Some really Random Words')
>>> the_message
'this message contains <replaced> really <replaced> <replaced>' 
```

请注意，使用`str.replace`可能会导致细微的错误：

```
>>> words = ['random', 'words']
>>> text = 'a sample message with random words'
>>> for word in words:
...     text = text.replace(word, 'swords')
... 
>>> text
'a sample message with sswords swords' 
```

虽然使用`re.sub`给出了正确的结果：

```
>>> big_regex = re.compile('|'.join(map(re.escape, words)))
>>> big_regex.sub("swords", 'a sample message with random words')
'a sample message with swords swords' 
```

正如 thg435 指出的那样，如果要替换*单词*而不是每个子字符串，则可以将单词边界添加到正则表达式：

```
big_regex = re.compile(r'\b%s\b' % r'\b|\b'.join(map(re.escape, words))) 
```

这将取代`'random'`in`'random words'`但不是 in `'pseudorandom words'`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T12:00:03.463

尝试这个：

```
prohibitedWords = ["MVGame","Kappa","DatSheffy","DansGame","BrainSlug","SwiftRage","Kreygasm","ArsonNoSexy","GingerPower","Poooound","TooSpicy"]

themessage = str(word[1])    
for word in prohibitedwords:
    themessage =  themessage.replace(word, "(I'm an idiot)")

print themessage 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:45:30.563

**代码：**

```
prohibitedWords =["MVGame","Kappa","DatSheffy","DansGame",
                  "BrainSlug","SwiftRage","Kreygasm",
                  "ArsonNoSexy","GingerPower","Poooound","TooSpicy"]
themessage = 'Brain'   
self_criticism = '(I`m an idiot)'
final_message = [i.replace(themessage, self_criticism) for i in prohibitedWords]
print final_message 
```

**结果：**

```
['MVGame', 'Kappa', 'DatSheffy', 'DansGame', '(I`m an idiot)Slug', 'SwiftRage',
'Kreygasm', 'ArsonNoSexy', 'GingerPower', 'Poooound','TooSpicy'] 
```

# javascript - 表的行中的不同列数

> ID：15658193
> 
> 赞同：6
> 
> 时间：2013-03-27T11:56:25.013
> 
> 标签：javascript, html-table

是否可以在每一行中创建一个具有相同宽度和高度的单元格数量不同的表格..？？如果是这样，如何以更简单的方式完成..???

笔记：

1.  行宽和高相同
2.  每一行的单元格宽度都不同

    ```
    <table>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td colspan="2">&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td colspan="3">&nbsp;</td>
    </tr> 
    ```

    [这](http://jsfiddle.net/4RM7S/1/)是我尝试使用 coll span 的方法。假设第一行单元格宽度为 30px,30px,30px 。如果我使用 coll span ，它会像 60px,30px 但我希望它是 50px,40px 只有 2 个单元格

我想要这样![在此处输入图像描述](../Images/6e51f77c7f2d1080bb6f96c2fdc17d0e.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T11:59:26.383

您可以使用`colspan`创建跨越多列的单元格。

[jsFiddle](http://jsfiddle.net/4RM7S/)

![在此处输入图像描述](../Images/0cf585b20619f864d1d805751bb6e0c7.png)

```
<table>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td colspan="2">&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td colspan="3">&nbsp;</td>
    </tr>
</table> 
```

如果您希望所有的宽度和高度都相同，但只有单元格数量不同，您可以不设置`<table>`.

[jsFiddle](http://jsfiddle.net/4eRRD/)

![在此处输入图像描述](../Images/9018c93c6bbedfae6b8fff178eb93984.png)

```
<table>
    <tr>
        <td class="content">&nbsp;</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td class="content">&nbsp;</td>
        <td class="content">&nbsp;</td>
        <td></td>
    </tr>
    <tr>
        <td class="content">&nbsp;</td>
        <td class="content">&nbsp;</td>
        <td class="content">&nbsp;</td>
    </tr>
</table> 
```

## 更新

您对图像的更新，是的，您可以使用以下方法完成此操作`colspan`：

[jsFiddle](http://jsfiddle.net/RTU6e/)

![在此处输入图像描述](../Images/204df19d5db7ae25b8a0acf538f6c01a.png)

```
<table>
    <tr>
        <td>&nbsp;</td>
        <td colspan="2">&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td colspan="2">&nbsp;</td>
        <td colspan="2">&nbsp;</td>
    </tr>
</table> 
```

这使用了四列，中间的两列比其他列小，这是一个说明如何设置列的图像：

![在此处输入图像描述](../Images/f0e1fdf4c0f97a6651d3236767a69b1d.png)

## 更新#2

这是一个更随机大小的单元格的示例。第一行 10%、90%，第二行 55%、45%。

[jsFiddle](http://jsfiddle.net/5jAfY/1/)

![在此处输入图像描述](../Images/ad65af63e636de47c0ff9bf4803159e7.png)

**HTML**

```
<table>
    <tr>
        <td></td>
        <td colspan="2"></td>
    </tr>
    <tr>
        <td colspan="2"></td>
        <td></td>
    </tr>
</table> 
```

**CSS**

```
table {
    width:100px;
}
td {
    border: 1px solid #000;
    height:1em;
}
tr:first-child td:first-child {
    width:10%;
}
tr:first-child td:last-child {
    width:90%;
}
tr:last-child td:first-child {
    width:55%;
}
tr:last-child td:last-child {
    width:45%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:01:35.733

是的，您可以使用`colspan`表格单元格的属性，如下所示：

```
<table>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
    </tr>

    <tr>
        <td>1</td>
        <td colspan="2">2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
    </tr>

     <tr>
        <td>1</td>
        <td colspan="5">2</td>
    </tr>

    <tr>
        <td colspan="2">1</td>
        <td>2</td>
        <td colspan="2">3</td>
        <td>4</td>
    </tr>
</table> 
```

工作示例：http: [//jsfiddle.net/sk5cB/](http://jsfiddle.net/sk5cB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:22:12.257

您还可以在

```
 <tr> </tr> tags 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:02:00.577

不确定这是您要查找的内容，但您可以使用标签中的`colspan`属性创建包含合并单元格的表格。`<td>`

[HTML colspan 属性](http://www.w3schools.com/tags/att_td_colspan.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-21T13:09:08.127

如果您打算在这些单元格中插入内容并希望保持相同的单元格宽度，那么仅使用表格是不可能的。我也搜索过这个问题的解决方案，当单元格为空时看起来很棒，就像 Daniel Imms 在他的示例中提出的那样，但是如果你向这些单元格添加内容，它们的宽度开始变大，并且行上的其他单元格开始变大更小。指定 table-layout:fixed 没有帮助，因为第一行成为所有后续行的规则。

如果您有可能使用具有向左浮动和百分比宽度的 div 以及一个清晰的修复 display:table div 将它们全部包裹起来，就像 Bootstrap 3 在其网格系统中所做的那样，那么这将更加可靠。

# php - 处理数组并插入mysql表

> ID：15658205
> 
> 赞同：0
> 
> 时间：2013-03-27T11:56:57.937
> 
> 标签：php, mysql, arrays

```
Array
(
[pid] => Array
    (
        [0] => 2
        [1] => 3
    )

[price] => Array
    (
        [0] => 20
        [1] => 20
    )

[qty] => Array
    (
        [0] => 2
        [1] => 1
    )

) 
```

我从一些处理中得到了上述数组的结果。有了这个我需要更新到下表中的数据库

```
pid price qty
2   20    2
3   20    1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:02:19.707

```
$i = 0;
while( $i < count( $YourArray['pid']) ) {
    $query = "INSERT INTO `tableName`(`pid`, `price`, `qty`) VALUES( ?, ?, ? )";
    $stmt = $con->prepare( $query );
    $stmt->execute(
        array(
            $YourArray['pid'][$i],
            $YourArray['price'][$i],
            $YourArray['qty'][$i]
        )
    );
    $i++;
} 
```

其中，我使用了[pdo](/questions/tagged/pdo "显示标记为“pdo”的问题")的插入方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:00:13.277

```
for(i=0;i<amount;i++){
    echo $array['pid'][i];
    echo $array['price'][i];
    echo $array['qty'][i]; 
} 
```

其中amount 必须是`count`您拥有的行数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:14:41.517

这是一种错误的做法，我会使用索引数组，然后构建一个 foreach 循环来分别处理每个 1，例如：

```
$values = array();
$values[] = array(
                  'pid' => 2,
                  'price' => 20,
                  'qty' => 2
                 );

$values[] = array(
                  'pid' => 3,
                  'price' => 20,
                  'qty' => 1
                  ); 
```

然后从这里构建一个foreach循环并在那里运行每个查询

```
foreach ($values as $value) {
   $query = "insert into blah 
              set pid = " . $value['pid'] . ",
              price = " . $value['price'] . ",
              qty = " . $value['qty'] . ";";

   mysql_query($query);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:01:26.467

尝试这个 ：

```
$array = array("pid" => array(2,3),"price" => array(20,20),"qty" => array(2,1));
array_unshift($array, null);
$res   = call_user_func_array('array_map', $array);

echo "<pre>";
print_r($res); 
```

输出 ：

```
Array
(
    [0] => Array
        (
            [0] => 2
            [1] => 20
            [2] => 2
        )

    [1] => Array
        (
            [0] => 3
            [1] => 20
            [2] => 1
        )

) 
```

循环此数组并添加到 DB - 这样您就可以在 DB 中添加两个条目

# java - Android Java - 摇动时更改颜色/文本

> ID：15658211
> 
> 赞同：2
> 
> 时间：2013-03-27T11:57:11.383
> 
> 标签：java, android, shake

我很难正确地找到这一点。我想要的是，当我摇晃时，我的颜色会变成其他东西或文字会变成其他东西。不一定是随机的。找不到任何有用的东西，但不包括无用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:00:31.003

甚至 20 秒的谷歌搜索都没有为您提供一个可能非常完美的复制粘贴解决方案，并且您可以通过简单的回调在其中执行任何您想要在 Activity 中执行的操作......

[http://android.hlidskialf.com/blog/code/android-shake-detection-listener](http://android.hlidskialf.com/blog/code/android-shake-detection-listener)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:46:14.880

使用下面的类，并在创建它的新实例时调用您创建的实例上的 setCallBack 方法以接收回调，当您通过传感器管理器注册侦听器时传递该实例。

```
import android.hardware.Sensor;

import android.hardware.SensorEvent;

import android.hardware.SensorEventListener;

public class ShakeListener implements SensorEventListener {

    private ShakeCallback mShakeCallback;

    private int totalMovement;
    private long timeMilies;
    private float lastX, lastY, lastZ = -1.0f;
    private int shakeIntervalMilies = 2000;

    ShakeListener() {
    }

    public static ShakeListener newInstance() {
        return new ShakeListener();
    }

    public ShakeListener setCallBack(ShakeCallback shakeCallback) {
        this.mShakeCallback = shakeCallback;

        return this;
    }

    public ShakeListener setShakingInterval(int intervalMilies) {
        this.shakeIntervalMilies = intervalMilies;

        return this;
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        if (mShakeCallback != null) {
            totalMovement = (int) ((event.values[0] + event.values[1] + event.values[2]) - (lastX
                    + lastY + lastZ));
            if (totalMovement > 20
                    && (System.currentTimeMillis() - timeMilies >= shakeIntervalMilies)) {
                mShakeCallback.onShake();
                timeMilies = System.currentTimeMillis();

            }
            lastX = event.values[0];
            lastY = event.values[1];
            lastZ = event.values[2];
        }
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }
    public static interface ShakeCallback {
        public void onShake();

    }

} 
```

# javascript - jquery使用绑定vs点击

> ID：15658231
> 
> 赞同：53
> 
> 时间：2013-03-27T11:58:22.213
> 
> 标签：javascript, jquery, onclick

我遇到了几种在 jquery 中处理点击事件的方法：

绑定：

```
$('#mydiv').bind('click', function() {
    ...
}); 
```

点击：

```
$('#mydiv').click(function() {
   ...
} 
```

上：

```
$('mydiv').on('click', function() {
   ...
} 
```

两个问题：

1.  他们还有其他方法吗？
2.  我应该使用哪一个，为什么？

更新：

正如每个人都乐于建议的那样，我应该更好地阅读文档，并发现我应该使用：

on() 或 click()，

这实际上是同一件事。

但是，没有人解释为什么不再推荐 bind ？我可能会因为在某处遗漏明显的东西而受到更多的反对，但我在文档中找不到这样做的原因。

更新2：

'on' 具有能够将事件处理程序添加到动态创建的元素的有用效果。例如

```
$('body').on('click',".myclass",function() {
    alert("Clicked On MyClass element");
}); 
```

此代码将单击处理程序添加到具有“myClass”类的元素。但是，如果稍后动态添加更多 myClass 元素，它们也会自动获取点击处理程序，而无需显式调用“on”。据我了解人们所说，这也更有效（见下面的西蒙斯回答）。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-27T12:00:06.707

从 and 的文档`bind`中`click`：

**[绑定](http://api.jquery.com/bind/)：**

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。

[源](http://code.jquery.com/jquery-latest.js)清楚地表明没有理由使用`bind`，因为这个函数只调用更灵活的`on`函数，甚至没有更短：

```
bind: function( types, data, fn ) {
    return this.on( types, null, data, fn );
}, 
```

所以我建议，就像 jQuery 团队一样，忘记旧`bind`功能，它现在已经没用了。它只是为了与旧代码兼容，它仍然在这里。

**[点击](http://api.jquery.com/click/)：**

> 此方法是 .on('click', handler) 的快捷方式

这个快捷方式当然不如`on`函数强大和灵活，并且不允许委派，但它可以让您编写更短的代码，并且可以说在应用时更具可读性。关于这一点意见分歧：一些开发人员认为应该避免它，因为它只是一个捷径，而且还有一个事实是你需要在`on`使用委托时立即替换它，那么为什么不直接使用`on`来更一致呢？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-27T12:17:56.993

对于您的第一个问题：还有`.delegate`，从 jQuery 1.7 开始已被取代`.on`，但仍然是绑定事件处理程序的有效形式。

对于您的第二个问题：您应该始终`.on`像文档说的那样使用，但您还应该注意如何使用`.on`，因为您可以将事件处理程序绑定到对象本身或更高级别的元素上，并像使用`.delegate`.

假设您有一个`ul > li`列表，并且想要将鼠标悬停事件绑定到`li`s。现在有两种方法：

*   `$('ul li').on('mouseover', function() {});`
*   `$('ul').on('mouseover', 'li', function() {});`

`event.currentTarget`第二个更可取，因为使用这个事件处理程序绑定到 ul 元素一次，jQuery 将通过( [jQuery API](http://api.jquery.com/event.currenttarget/) )获取实际的目标项，而在第一个示例中，您将其绑定到每个列表元素。此解决方案也适用于在运行时添加到 DOM 的列表项。

这不仅适用于`parent > child`元素。如果您对页面上的每个锚点都有一个单击处理程序，那么您应该使用`$(document.body).on('click', 'a', function() {});`而不是仅仅`$('a').on('click', function() {});`为了节省大量时间将事件处理程序附加到每个元素。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-27T12:04:18.847

我认为您应该在发布此问题之前搜索[jquery 文档：](http://api.jquery.com/bind/)

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。

# java - Android - 带有 Gmail ID 的 JavaMail

> ID：15658233
> 
> 赞同：0
> 
> 时间：2013-03-27T11:58:31.787
> 
> 标签：java, android, gmail, jakarta-mail, gmail-imap

我正在编写一个应用程序，该应用程序需要能够从特定帐户（在本例中为 Gmail）接收电子邮件并获取每封邮件的唯一 Gmail ID，以便创建指向该邮件的链接以供将来参考。

所有这些都可以在 Java 中使用 JavaMail API 和 GmailMessage 类并通过“gimaps”连接来完成。但是，此 API 在导入我的 Android 应用程序时无法编译 -`Unable to execute dex: Multiple dex files define Lcom/sun/mail/iap/AString`根据我尝试导入的 jar（pop3、imap、gimap 等），我会得到不同的变体

搜索它似乎我需要使用其中一个 JavaMail android 端口，但是它们都没有能力获取 Gmail 唯一的消息 ID。

所以我的问题是，有没有人知道在 Android 上使用官方 JavaMail API（如果可能的话）或在各种端口上使用的方法？

谢谢。

编辑：谢谢，实际上我已经使用[https://code.google.com/p/java-gmail-imap/](https://code.google.com/p/java-gmail-imap/)此处找到的端口使其部分工作，但是在尝试从电子邮件中获取文本正文时它会崩溃。我知道这是由于在此端口[https://code.google.com/p/javamail-android/](https://code.google.com/p/javamail-android/)中已更正的相同文件丢失 我已将 java-gmail-imap 代码检出到 eclipse 中以尝试添加android端口中缺少的类，但每次我导出我都会得到`java.lang.NoClassDefFoundError: com.google.code.javax.mail.Session`

打开这个类存在的jar文件..有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:21:12.933

不幸的是，Android 不是 Java，所以其中一些东西可能不起作用。

仅基于错误消息，您似乎已尝试导入多个定义同一类 (com.sun.mail.iap.AString) 的 jar 文件。检查您的应用程序中的 JavaMail 副本是否不超过一份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:11:57.550

我设法使用[此处找到](https://code.google.com/p/java-gmail-imap/)的库来完成这项工作，并将一些导入更改为 myjava.* 从[Android Java Mail port](https://code.google.com/p/javamail-android/)导入。

# sql - 在使用 Web 角色的 Azure 云服务托管上使用 SQL Server CE 3.5

> ID：15658237
> 
> 赞同：4
> 
> 时间：2013-03-27T11:58:38.343
> 
> 标签：sql, azure, sql-server-ce, windows-ce

我们使用 Web 角色在 Azure 云托管服务上托管了一个 asp.net 4.0 应用程序。我们正在使用 SQL Server CE 3.5 dll 并将一些数据插入`.sdf`文件。打开与 SQL Server CE`.sdf`文件的连接时收到以下错误消息。

> 无法加载与版本 8080 的 ADO.NET 提供程序对应的 SQL Server Compact 本机组件。请安装正确版本的 SQL Server Compact。有关详细信息，请参阅知识库文章 974247。

尝试过`DbProviderFactories`，web.config 中的运行时标签仍然存在相同的问题。并且还尝试了解决方案上的可部署依赖项选项以及本文建议的 SQL Server Compact 的私有安装。[http://www.codeproject.com/Articles/33661/Creating-a-Private-Installation-for-SQL-Compact](http://www.codeproject.com/Articles/33661/Creating-a-Private-Installation-for-SQL-Compact) ，仍然存在问题。

如果我使用 SQL Server CE 4.0，它工作正常，它能够插入数据并返回`.sdf`文件。但是对于 SQL Server CE 3.5，它给出了上述错误，我们需要特别 3.5，因为我们将`.sdf`通过 Web 服务将此文件发送到移动应用程序。

如何在 Azure 云托管服务上使用 SQL Server CE 3.5？任何建议都受到高度赞赏。

谢谢和问候，哈里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:33:44.510

它可能是环境问题 - 你能测试一下这两个语句的值吗：

```
string envVar = Environment.GetEnvironmentVariable("PROCESSOR_ARCHITECTURE");

Assembly entryAssembly = Assembly.GetEntryAssembly();
string str2 = (entryAssembly == null) ? string.Empty : Path.GetDirectoryName(entryAssembly.Location); 
```

（这是来自 3.5 SP2 ADO.NET 提供程序的代码） - str2 应该是 Web 应用程序 bin 文件夹的路径 - envVar 应该是处理器架构（X86 或 AMD64）的文件夹名称

在 4.0 中，获取路径 (str2) 的逻辑得到了改进：

```
string localPath = new Uri(Assembly.GetExecutingAssembly().CodeBase).LocalPath;
Path.GetDirectoryName(localPath); 
```

我认为逻辑在 4.0 中得到了改进，以更好地支持 Web 部署。换句话说：不支持使用 SQL Server Compact 3.5 SP2 进行私有 Web 部署。

选项：使用安装了 3.5 SP2 的主机，使用 4.0 并修改文件的版本头（没有尝试过，但可能是一个选项）参见[http://erikej.blogspot.dk/2010/08/how-to -upgrade-version-3x-database-file.html](http://erikej.blogspot.dk/2010/08/how-to-upgrade-version-3x-database-file.html)

# css - iphone网站显示问题

> ID：15658239
> 
> 赞同：0
> 
> 时间：2013-03-27T11:58:46.327
> 
> 标签：css, viewport

我的网站在 iphone5 和 4s 上显示不正确。

网址是：[http ://www.mya.co.uk/nonsurgicaldev/index.html](http://www.mya.co.uk/nonsurgicaldev/index.html)

当手机处于纵向视图时，内容不适合屏幕宽度，在横向和纵向视图中，左侧都有很大的边距，而右侧没有。

我在页面上有一个表格，并隐藏了原来的复选框，如下所示：

```
:root input[type=checkbox] {
position: absolute;
left: -6em;
} 
```

我认为这可能与此有关，但我删除了复选框替换 css，但我仍然遇到问题。

我已经包括：

```
<meta name="viewport" content="width=320" />
<script>
if (screen.width > 740) {
var mvp = document.getElementById('testViewport');
mvp.setAttribute('content','width=740');
}
</script> 
```

在我的头标签中。

有人可以帮我解决这个问题吗？将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:17:31.050

这是 iOS 中的一个错误，它已被广泛记录，您可以使用`<meta>`标签来解决它：

`<meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">`

或使用此[Webdsigner 墙](http://webdesignerwall.com/tutorials/iphone-safari-viewport-scaling-bug)文中的 javascript 解决方案。

# algorithm - 有效地找到所有连接的诱导子图

> ID：15658245
> 
> 赞同：12
> 
> 时间：2013-03-27T11:59:04.193
> 
> 标签：algorithm, graph, time-complexity, complexity-theory, graph-algorithm

是否有一种有效的（*）算法来查找连接的无向顶点标记图的所有连接（诱导）子图？

(*) 我明白，在一般情况下，任何此类算法都可能具有 O(2^n) 复杂度，因为对于一个集团 (Kn)，有 2^n 个连接子图。但是，我通常处理的图的连接子图要少得多，所以我正在寻找一种方法来生成它们，而不必考虑所有 2^n 子图并丢弃那些未连接的子图（如[这个问题](https://stackoverflow.com/questions/5984531/subgraph-enumeration)的解决方案）。

运行时间与解的数量呈线性关系的算法（即，它可以直接从图的结构中生成解，而不会浪费时间考虑所有非解）显然是理想的。节点数量的多项式的附加步骤也可以（例如，预先计算图的传递闭包 - 我认为这在这种情况下会有所帮助）。

或者，证明没有这样的解决方案至少会让我摆脱痛苦。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T13:02:26.550

在递归伪代码中，2^n 算法是

```
GenerateAndTest(verticesNotYetConsidered, subsetSoFar):
    if verticesNotYetConsidered is empty:
        yield subsetSoFar if it induces a connected subgraph
    else:
        choose a vertex v in verticesNotYetConsidered
        GenerateAndTest(verticesNotYetConsidered - {v}, subsetSoFar)
        GenerateAndTest(verticesNotYetConsidered - {v}, subsetSoFar union {v}) 
```

选择哪个顶点 v 无关紧要；我们甚至可以在两个兄弟调用中做出不同的选择。我们利用这种自由度通过修剪递归树来获得几乎线性时间的算法（n 倍于解的数量）。

如果`subsetSoFar`为空，则选择仍然不受约束。否则，我们选择`v`与 中的一个顶点相邻`subsetSoFar`。如果不`v`存在，我们让步`subsetSoFar`并返回，因为在这个子树中没有其他解决方案。

请注意`subsetSoFar`始终连接的新不变量，因此我们可以消除显式连接测试。我们在递归树的每个节点上做 O(n) 工作（天真 O(n^2)，但我们可以增量地维护相邻顶点的集合），它是完全二元的，其叶子每个都产生一个解决方案，所以总工作如所声称的那样（回想一下内部节点的数量比叶子的数量少一）。

由于新的不变量，不会产生断开的子图。

产生每个连接的子图。对于诱导连通子图的一组顶点 S，遵循与 S 一致的分支。 S 的适当子集不可能与 S 的其余部分不相邻，因此不修剪 S。

新的伪代码如下。`N(v)`表示 的邻居集合`v`。

```
GenerateConnectedSubgraphs(verticesNotYetConsidered, subsetSoFar, neighbors):
    if subsetSoFar is empty:
        let candidates = verticesNotYetConsidered
    else
        let candidates = verticesNotYetConsidered intersect neighbors
    if candidates is empty:
        yield subsetSoFar
    else:
        choose a vertex v from candidates
        GenerateConnectedSubgraphs(verticesNotYetConsidered - {v},
                                   subsetSoFar,
                                   neighbors)
        GenerateConnectedSubgraphs(verticesNotYetConsidered - {v},
                                   subsetSoFar union {v},
                                   neighbors union N(v)) 
```

编辑：对于最大度数 O(1) 的图，我们可以通过保持 来实现真正的线性时间，`verticesNotYetConsidered intersect neighbors`为了清楚起见，我没有这样做。如果您通过将图形表示为邻接矩阵，其中每一行存储为一个或两个字位图来利用字并行性，这种优化可能并不值得。

# php - AJAX 将检索到的值显示为未定义

> ID：15658246
> 
> 赞同：3
> 
> 时间：2013-03-27T11:59:05.107
> 
> 标签：php, javascript, ajax, jquery

我正在使用 AJAX 向 PHP 发送值并从 PHP 中检索值。问题是我从 PHP 获得的值在 AJAX 中被视为未定义。请帮我解决这个问题。

AJAX 代码：

```
var channel;

function overall() {
    $(".one").show();
    $(".two").hide();
    $(".three").hide();
    $(".four").hide();
    window['channel'] = "OVERALL";
    $.ajax({
        type: "GET",
        url: "dash2.php",
        data: ({channel: channel}),
        success: function (data) {
            console.log(data.a);
            console.log(data.b);
            console.log(data.c);
        }
    });
} 
```

PHP代码：

```
<?php

$channel=$_GET['channel'];
$host="192.168.0.29";
$username="root";
$password="root";
$dbname="realcl";

mysql_connect($host,$username,$password) OR DIE ('Unable to connect to database! Please try again later.');
mysql_select_db($dbname);

$query = 'select * from '.$channel;
$masterresult = mysql_query($query);

while($row1 = mysql_fetch_array($masterresult))
{
    $success=$row1[1];
    $timeout=$row1[2];
    $fail=$row1[3]; 
}
echo json_encode(array("a"=>"$success","b"=>"$timeout","c"=>"$fail"));

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:09:19.787

只是其他人尚未涵盖的一点：您需要在此处使用双引号或连接：

```
'select * from $channel'; // no
"select * from $channel"; // yes
'select * from '.$channel; // yes 
```

变量不会在单引号内解析，因此您尝试从字面上称为`$channel`.

另外请使用某种验证，`$channel`因为您所拥有的非常容易受到 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:48:10.533

请试试这个。1\. 使用输出缓冲，以便在 ajax 响应中只接收 json 数据 2\. 在 ajax 中提供 json 数据类型

```
<script type='text/javascript'>
    overall();
    function overall() {
        var channel = 1;
        $.ajax({
            method: "GET",
            url: "http://localhost",
            data: ({channel: channel}),
            dataType: 'json',
            success: function(data) {
                console.log(data.a);
                console.log(data.b);
                console.log(data.c);
            }
        });
    }
</script> 
```

php代码

```
 //empty the current contents of the output buffer
    ob_end_clean();

    // Turns on output buffering
    ob_start();

    // print output
    echo json_encode(array("a" => "success", "b" => "timeout", "c" => "fail"));

    // Turn off buffering and print the contents
    ob_end_flush(); // Turn off buffering and print the contents
    exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:05:44.707

再次！！！不管怎样，让我解释一下……

首先，您通过 ajax 中的 get 方法发送频道...

```
data:({channel:channel}),  //here which is just a vairable global variable 
                           //and not assigned any value in your given code... 
```

所以这个发送通道是空的......因此你的查询将无法工作，因为它变成了......

```
$query = "select * from '' "; <-- here you have a singe quote `'` which also gives error 
```

其次..ajax 具有类型属性而不是方法..

```
 type:"GET" //here type is get not method 
```

看到你的 php 和查询 .. $channel 看起来像一个 tbalename ，如果它是 OVERALL ，那么你可以在你的 ajax 中传递字符串，如果没有，那么你必须在 ajax 中为通道分配一个表名

```
 type:"GET" //here type is get not method
 data:{channel:"OVERALL"}, //note you don't need an extra bracket here `()` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:06:04.467

因为您正在将数据编码为 json。

尝试添加`dataType:"json"`您的 ajax 并且 ajax`type`没有方法，因此对`type`数据的更改应该只在`{}`：

```
$.ajax({
   type:"GET",
   url:"dash2.php",
   dataType: 'json',
   data:{channel:channel},
   success:function(data){
      console.log(data.a);
      console.log(data.b);
      console.log(data.c);
   }
 }); 
```

试着把这条线：

```
$channel=$_GET['channel']; 
```

db选择后：

```
mysql_select_db($dbname); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T12:23:42.980

将`dataType`参数设置为`json`。

```
$.ajax({
   type:"GET",
   url:"dash2.php",
   dataType: 'json',
   data:{channel:channel},
   success:function(data){
   }
 }); 
```

引用[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)文档

dataType 定义您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它。

从您的代码中很少观察到。
1) 正如上面一些帖子中所讨论的，您的代码容易受到`SQL injection attacks`.
2)`mysql_*`功能已被弃用，扩展将在未来被删除。不要依赖它们。我用大写字母来强调我的观点。

对于上述两点，请尝试使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。PDO 或 MySQLi 都可以用来保护您的代码免受 SQL 注入攻击。

[这是](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)一篇关于如何编写代码来保护您的代码免受 SQL 注入攻击的帖子。

3）将您的数据库配置详细信息转移到一个单独的`config.php`位置，这样您就不必在每个文件中放入相同的代码，您想要放入`SQL`查询。

# highcharts - 动态添加 Y 轴

> ID：15658249
> 
> 赞同：5
> 
> 时间：2013-03-27T11:59:11.977
> 
> 标签：highcharts, highstock

是否可以在 Highstock 图表中添加新的 y 轴？我尝试在选项中添加一个并重新绘制，但这似乎不起作用。

HighCharts 的文档包含图表对象的 addAxis() 函数，但在 HighStock 中此函数不存在。有什么选择吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T12:49:24.990

请看示例[http://jsfiddle.net/wvaGt/](http://jsfiddle.net/wvaGt/)

```
$('#container').highcharts('StockChart',{

    yAxis: {
        title: {
            text: 'Temperature'
        },
        lineWidth: 2,
        lineColor: '#F33'
    },

    series: [{
        name: 'Temperature',
        data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
        color: '#F33'   
    }]
});

// the button handlera
var chart = $('#container').highcharts();
$('#add').click(function() {
    chart.addAxis({ // Secondary yAxis
        id: 'rainfall-axis',
        title: {
            text: 'Rainfall'
        },
        lineWidth: 2,
        lineColor: '#08F',
        opposite: true
    });
    chart.addSeries({
        name: 'Rainfall',
        type: 'column',
        color: '#08F',
        yAxis: 'rainfall-axis',
        data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-03T08:36:16.027

[对应的jsfiddle](http://jsfiddle.net/Kondaldurgam/ruk1Lq29/)

```
yAxis: [{
        labels: {
            format: '{value} %'
        },
        min: 0,
        max: 60,
        opposite: false
}], 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:32:06.887

HighStock 的最新版本，目前是 1.3.0，[增加了](https://github.com/highslide-software/highcharts.com/commit/40f02d51abdd365fdaa24a8085d54dc50c5446cf#L1L10333)对`addAxis`. 它于 2013 年 3 月 22 日发布。

# c - 使用 open() 时如何设置文件的共享模式

> ID：15658252
> 
> 赞同：0
> 
> 时间：2013-03-27T11:59:22.757
> 
> 标签：c, windows, winapi

当你打开一个文件时，[`CreateFile`](http://msdn.microsoft.com/en-us/library/aa363858%28v=vs.85%29.aspx)你可以设置它的共享模式（第三个参数）。

使用时有没有办法设置共享模式[`_open`](http://msdn.microsoft.com/en-us/library/z0kc8e3z%28v=VS.71%29.aspx)？可能是通过调用`_setmode`或类似的方式？我需要使用该`FILE_SHARE_DELETE`模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:46:56.350

[_fsopen](http://msdn.microsoft.com/en-us/library/8f30b0db%28v=vs.80%29.aspx)、[_sopen](http://msdn.microsoft.com/en-us/library/w7sa2b22%28v=vs.80%29.aspx)和类似的函数可以采用共享模式参数，但是这不支持`FILE_SHARE_DELETE`。如果您想要此共享模式，请使用`CreateFile`

# java - 如何确保打开命令在 Mac 上的 Java 应用程序中调用 main 函数

> ID：15658255
> 
> 赞同：1
> 
> 时间：2013-03-27T11:59:26.820
> 
> 标签：java, macos, file-io, command-line

我在 Mac 上有一个在 Eclipse 中构建的 java 应用程序，并使用名为 osxappbundle-maven-plugin 的 maven 插件捆绑。在我解压应用程序的dmg文件，获取一个应用程序文件并将其复制到我的硬盘驱动器后，我通过终端使用以下命令调用此应用程序： open -a "/Full/Path/To/App/Match Player.app" --args "/Full/Path/To/File/TEST 1.mplx"

这将正确打开应用程序。
但是，在我执行以下命令后： open -a "/Full/Path/To/App/Match Player.app" --args "/Full/Path/To/File/TEST 2.mplx" 我的应用程序无法打开具有新测试文件的应用程序，但只关注先前打开的应用程序的窗口。
我很确定不会再次调用 main 函数，因为我编写了 main 函数，因此在每次调用时，它都会重新初始化窗口。（因此应用程序应该完全重新初始化）。

不能使用“open -n”选项打开多个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:26:31.473

> 我很确定不会再次调用 main 函数

是的，当已经有一个应用程序实例正在运行时，“打开”命令只是向正在运行的实例发送一个“打开文件”事件。您需要注册一个[OpenFilesHandler](http://developer.apple.com/library/mac/documentation/Java/Reference/JavaSE6_AppleExtensionsRef/api/com/apple/eawt/OpenFilesHandler.html)来接收此事件，并且您可以`main`从处理程序内部再次调用。

```
import com.apple.eawt.*;

public class MyMainClass {
  private static boolean listenerRegistered = false;

  public static void main(String[] args) throws Exception {
    if(!listenerRegistered) {
      Application.getApplication().setOpenFileHandler(new OpenFilesHandler() {
        public void openFiles(AppEvent.OpenFilesEvent evt) {
          List<String> filenames = new ArrayList<String>();
          for(File f : evt.getFiles()) {
            filenames.add(f.getAbsolutePath());
          }
          MyMainClass.main(filenames.toArray(new String[filenames.size()]));
        }
      });
      listenerRegistered = true;
    }

    // rest of main goes here
  }
} 
```

现在`open -a "/Full/Path/To/App/Match Player.app" "/Full/Path/To/File/TEST 1.mplx"`（没有`--args`）应该做正确的事情。

# mysql - MySQL 从另一个选择更新

> ID：15658257
> 
> 赞同：1
> 
> 时间：2013-03-27T11:59:35.623
> 
> 标签：mysql, select, sql-update

我需要根据另一个表中的值更新一列。

这个选择语句产生我需要的结果

```
select ct.entry_id, ct.url_title, ct.title
from exp_channel_titles ct, exp_channel_data cd
where ct.channel_id = 1
and cd.channel_id = 2
and ct.title = cd.field_id_2
and ct.status = 'open' 
```

但我插入的列采用这种格式的数据：

```
[entry_id] [url_title] title 
```

所以我的插入语句看起来像

```
update exp_channel_data
set field_id_1 = ([1234] [page-title] Page Title)
where... 
```

那么如何格式化我的选择语句，以便它输出带有 [] 和空格的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:04:57.303

您可以在 UPDATE 查询中使用 INNER JOIN，例如

```
UPDATE exp_channel_data cd
INNER JOIN exp_channel_titles ct
    ON ct.title = cd.field_id_2
    AND ct.channel_id = 1 
    AND ct.status = 'open'

SET cd.field_id_1 = CONCAT('[',ct.entry_id,'] [',ct.url_title,'] ',ct.title)

WHERE cd.channel_id = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:01:47.397

利用`CONCAT`

```
SELECT CONCAT('[', ct.entry_id, '] [', ct.url_title, '] ', ct.title) 
```

# php - 将表单数据存储在数据库中，用于具有不同文本框和下拉列表的任意数量的动态表单。

> ID：15658258
> 
> 赞同：-2
> 
> 时间：2013-03-27T11:59:38.843
> 
> 标签：php

我有一个包含用户和管理员两部分的网站。在管理员方面，我们提供了创建表单的选项。在表单中，他可以添加任意数量的文本框和下拉菜单。但是我们的问题是，一旦他创建了表单在数据库中添加文本框数据或下拉数据，因为在一种形式中他可以创建 5 个文本框，在另一种形式中他可以创建 10 个文本框。请提供解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:09:48.130

如果您可以使用任意数量的输入字段创建任意数量的表单，那么最好将表单数据存储为序列化数组形式的文本。

您可以使用 php[`serialize`](http://php.net/manual/en/function.serialize.php)并[`unserialize`](http://www.php.net/manual/en/function.unserialize.php)转换您的数组并重新转换您的序列化数组。

您可以创建一个表，例如`entries`，将`form_id`列作为外键链接到`form`表，`form_data`并将数据存储为`serialized array`. 这样你就可以支持各种形式

此解决方案实际上取决于您以后如何使用数据。因为用 sql 过滤并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:04:54.303

您可以为管理员创建的每个表单创建一个单独的表。然后，用户在该表单中输入的任何数据都可以存储在该表中。如果管理员创建一个带有 5 个文本框的表单和另一个带有 2 个文本框的表单，那么创建一个单独的表就可以了任务。如果您一次只需要一个处于活动状态的表单，则可以使用 alter table query 更改现有表，也可以删除旧表并添加新表。

# java - 为 ActiveMQ 处理应用程序选择 JVM 托管解决方案

> ID：15658260
> 
> 赞同：0
> 
> 时间：2013-03-27T11:59:44.500
> 
> 标签：java, hosting, activemq

我需要一些关于潜在托管解决方案的建议——那里有大量的选择和令人困惑的选择。

基本上我有一个包含嵌入式 ActiveMQ 消息代理的 Java 应用程序。此应用程序的工作是：

1) 处理从 10-15 个来源在代理上收到的消息 (JMS) 2) 将消息 (JMS) 发布到另一台服务器（在我们办公室）上的不同 JMS 代理。

所以，我正在寻找不会花费地球的东西（这仅用于测试目的）但可以提供不错的 RAM 和处理速度选项，以便我们可以真正测试应用程序的限制（我们需要看看瓶颈是什么，无论是Active MQ还是处理APP）。

此外，还需要考虑传出带宽成本。同样，数量将是零星的，有时会很大（取决于测试期的强度）。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:43:22.777

也许[Heroku](http://www.heroku.com)就是您正在寻找的东西。有一个[每月免费套餐](https://devcenter.heroku.com/categories/billing)，您可以[运行任何 Java 应用程序](https://devcenter.heroku.com/categories/java)。没有可用的 ActiveMQ，但[通过附加组件](https://addons.heroku.com/cloudamqp)，您可以使用同样支持 JMS 的 RabbitMQ。您可以随时提高应用程序的性能 - 查看 Herokus[定价](https://www.heroku.com/pricing#0-0)。

# jquery - jQuery Select2 插件“查看更多...”，隐藏搜索文本字段问题

> ID：15658263
> 
> 赞同：0
> 
> 时间：2013-03-27T11:59:51.933
> 
> 标签：jquery, jquery-select2

我有一系列关于 jQuery Select2 插件的问题（我对 Select2 很陌生，刚出生一天）：

1.  我通过 AJAX 调用（使用 Select2 的 ajax 功能）获取数据，并试图找出一种在下拉显示末尾添加“查看更多...”选项的方法。单击“查看更多...”必须将我带到另一个单独的搜索页面。

    如果我可以到达加载 AJAX 调用的 OnSuccess 或 OnComplete 事件，那么我可以在下拉结果中找到相关的 DIV 并附加“查看更多...” div。这甚至可能吗？

    我不想使用 Select2 中的“自动滚动”功能。

2.  我在 Select2 下拉列表旁边有一个搜索按钮，当用户在搜索框中输入一些字符时，我会进行 AJAX 调用并显示数据。在这里，我还需要的是，当用户点击搜索按钮时，我应该获取在搜索框中输入的值并进行另一个重定向。我面临的问题是——因为 Select2 要求搜索框为 AJAX 加载“隐藏”，当用户搜索时，搜索文本未填写在隐藏字段中，我不知道从哪里/如何获取输入搜索文本。

3.  填写AJAX数据时，下拉列表中的第一项被选中，如何不使其选中。或者更好的是，如果他们使用键在列表中上下移动，如果你到达第一个项目并向上键，我会很酷，它专注于搜索文本框 - 很像 LinkedIn 搜索框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:20:49.820

(1) 这是查看更多问题的代码：

```
$("#select").on('open', function() { 
    $(".select2-results").append('<li class="select2-results-dept-0 select2-result select2-result-unselectable select2-result-with-children"><div class="select2-result-label view-more">View More</div></li>');
    $(".view-more").on("click", function() { window.location.href = "another_url"; });
}); 
```

(2) 可以这样访问搜索框的值：

```
var searchValue = '';
$('.select2-search input').on('keydown', function(e) { 
    searchValue = $(this).val();
    console.log(searchValue);
});

$("#myBtn").on("click", function() { 
    alert(searchValue);
}); 
```

(3) 要取消选择默认选择的选项，请将此代码放入`open`函数中：

```
$('.select2-results .select2-highlighted').removeClass('select2-highlighted'); 
```

你可以在这里查看它是如何工作的：http: [//jsfiddle.net/netme/EW8t7/1/](http://jsfiddle.net/netme/EW8t7/1/)

# comments - 如何使用批处理文件打印用分隔符分隔的单词？

> ID：15658264
> 
> 赞同：1
> 
> 时间：2013-03-27T12:00:02.813
> 
> 标签：comments, dos

我对 DOS 评论很陌生。我有一个包含很多条目的文本文件，但它由分隔符分隔（例如：嗨；conf.txt；161；新团队）

我想在单独的行中打印每个分隔符。

例如：输出应该是 Hi conf.txt 161 new team

你能指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:37:14.627

尝试：

```
@echo off
setlocal enabledelayedexpansion

(for /f "tokens=*" %%a in (file.txt) do (
  set str=%%a
  echo !str:;=!
))>file.tmp

move file.tmp file.txt >nul 
```

其中 'file.txt' 是您的文本文件的名称（您需要在批处理文件的两个位置更改它）。

# eclipse - Liferay：从 Eclipse 打开 portlet.xml 时出错

> ID：15658267
> 
> 赞同：1
> 
> 时间：2013-03-27T12:00:07.970
> 
> 标签：eclipse, eclipse-plugin, liferay, liferay-6, liferay-ide

我正在使用 Eclipse Helios nd 使用 Liferay Portal 版本 6。

我已经安装了 Liferay IDE 插件，并安装了在这个平台上工作所需的软件。

但是当我尝试从 Eclipse 打开一个 portlet.xml 文件时，我仍然遇到错误：

```
 Problems occurred when invoking code from plug-in: "org.eclipse.jface". 
```

（错误日志）

```
 An error has occurred. See error log for more details.
    org/eclipse/sapphire/modeling/ModelElementType 
```

（错误视图）

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T02:22:14.830

您安装的[Sapphire版本与](http://eclipse.org/sapphire/)[Liferay IDE](http://www.liferay.com/community/liferay-projects/liferay-ide)不兼容。要解决此问题，请执行以下步骤：

1.  卸载 Liferay IDE 功能
2.  卸载所有蓝宝石功能
3.  从 Helios 更新站点重新安装 Liferay IDE：[http](http://releases.liferay.com/tools/ide/eclipse/helios/stable) ://releases.liferay.com/tools/ide/eclipse/helios/stable这样做会自动安装兼容版本的 Sapphire。
4.  尝试重新打开 portlet.xml

**注意**：要卸载功能：

1.  转到帮助 > 关于 > 安装 > 已安装的软件选项卡
2.  选择要卸载的功能
3.  点击卸载
4.  重新开始

# git - 将 git 存储库推送到映射的网络 Mac 驱动器失败

> ID：15658268
> 
> 赞同：1
> 
> 时间：2013-03-27T12:00:11.463
> 
> 标签：git, networking, version-control

我的网络上有一个 Mac 10.8 系统，我尝试在其中托管我们的存储库。在 Mac 上，我共享一个名为“Repositories”的目录。在我的 PC 上，我将此目录映射到 Y：

我确实可以克隆一个 repo，所以它看起来正在工作。问题是**当我尝试推送到遥控器时，它没有这样做**。它说：

```
git -c diff.mnemonicprefix=false -c core.quotepath=false 
push -v --tags --set-upstream origin master:master

Pushing to Y:\Repositories\test.git

remote: error: unable to write sha1 filename 
./objects/e5/08eb4d63d41d2cad4eb782381b3121ab4081b2: 

Permission denied[K
remote: fatal: failed to write object[K
error: unpack failed: unpack-objects abnormal exit
To Y:\Repositories\test.git
 ! [remote rejected] master -> master (unpacker error)
error: failed to push some refs to 'Y:\Repositories\test.git' 
```

问题是我有另一个名为 P 的映射网络驱动器：它工作得很好，所以它看起来与 Mac 和/或权限管理有关。

**有人知道我该如何解决这个问题吗？**

# zend-framework - 为什么应用程序以这种方式工作？

> ID：15658273
> 
> 赞同：0
> 
> 时间：2013-03-27T12:00:21.540
> 
> 标签：zend-framework, view-helpers

控制器中的变量不会出现在视图中，并且视图助手不起作用：例如，我在控制器中定义了一个变量：

```
$this->view->title = "Title"; 
```

并在视图中打印：

```
echo $this->title; 
```

变量“titles”的内容不会出现在页面中。

这是我的引导文件：

```
use ZFBootstrap\View\Helper\Navigation\Menu;

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
protected function _initAutoload() {
    require_once '../application/views/helpers/LoggedInAs.php';//need to include a view-helper
    require_once '../application/plugins/AuthPlugin.php';
    require_once '../application/configs/configAcl.php';
    $frontController = Zend_Controller_Front::getInstance();
    $frontController->registerPlugin($auth = new AuthPlugin());
    $frontController->getRouter()->addDefaultRoutes();
    $autoloader = Zend_Loader_Autoloader::getInstance();
    $autoloader->setFallbackAutoloader(true);

    $this->bootstrap('layout');
    $layout=$this->getResource('layout');
    $view=$layout->getView();
    $config = new Zend_Config_Xml(APPLICATION_PATH. '/configs/navigation.xml', 'nav');
    $container = new Zend_Navigation($config);
    $view->registerHelper(new Menu(), 'menu');
    $view->navigation($container);   
    Zend_View_Helper_Navigation_HelperAbstract::setDefaultAcl($acl);
    $auth = Zend_Auth::getInstance();
    $identity = $auth->getIdentity();
     $role = ($auth->hasIdentity() && !empty($auth->getIdentity()->role))
            ? $auth->getIdentity()->role : 'guest';
   Zend_View_Helper_Navigation_HelperAbstract::setDefaultRole($role);
    $view->navigation()->menu()->render();
    $view->navigation()->menu()->setMinDepth(1)->setUlClass('nav');
} 
```

相反，如果我使用此代码

```
use ZFBootstrap\View\Helper\Navigation\Menu;

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
protected function _initAutoload() {
    require_once '../application/plugins/AuthPlugin.php';
    require_once '../application/configs/configAcl.php';
    $frontController = Zend_Controller_Front::getInstance();
    $frontController->registerPlugin($auth = new AuthPlugin());
    $frontController->getRouter()->addDefaultRoutes();
    $autoloader = Zend_Loader_Autoloader::getInstance();
    $autoloader->setFallbackAutoloader(true);

    /*$this->bootstrap('layout');
    $layout=$this->getResource('layout');
    $view=$layout->getView();*/
    $config = new Zend_Config_Xml(APPLICATION_PATH. '/configs/navigation.xml', 'nav');
    $container = new Zend_Navigation($config);
    /*$view = Zend_Layout::startMvc()->getView();
    $view->registerHelper(new Menu(), 'menu');
    $view->navigation($container);//->setAcl($acl)->setRole($auth->getStorage()->read()->role);     
    */Zend_View_Helper_Navigation_HelperAbstract::setDefaultAcl($acl);
    $auth = Zend_Auth::getInstance();
    $identity = $auth->getIdentity();
     $role = ($auth->hasIdentity() && !empty($auth->getIdentity()->role))
            ? $auth->getIdentity()->role : 'guest';
   Zend_View_Helper_Navigation_HelperAbstract::setDefaultRole($role);
    /*$view->navigation()->menu()->render();
    $view->navigation()->menu()->setMinDepth(1)->setUlClass('nav');*/
} 
```

一切正常除了导航。问题是，为什么我的导航不起作用以及如何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:38:51.197

首先，你`Bootstrap.php`的一团糟。从一些基本的组织开始。

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    /**
     * initialize the session
     */
    protected function _initsession()
    {
        Zend_Session::start();
    }

    /**
     * initialize the registry and assign application.ini to config namespace of Zend_Registry
     */
    protected function _initRegistry()
    {
        $config = new Zend_Config($this->getOptions());
        Zend_Registry::set('config', $config);
    } 
```

当您想在引导程序中操作视图对象时，您需要确保返回新视图：

```
 /**
     * initialize the view and return it
     * @return \Zend_View
     */
    protected function _initView()
    {
        //Initialize view
        $view = new Zend_View();
        //add custom view helper path
        $view->addHelperPath('/../library/My/View/Helper');
        //set doctype for default layout
        $view->doctype(Zend_Registry::get('config')->resources->view->doctype);
        //set head meta data
        $view->headMeta()->setCharset(Zend_Registry::get('config')->resources->view->charset);
        //set css includes
        $view->headlink()->setStylesheet('/bootstrap/css/bootstrap.min.css');
        $view->headLink()->appendStylesheet('/css/main.css');
        //add javascript files
        $view->headScript()->setFile('/bootstrap/js/jquery.min.js');
        $view->headScript()->appendFile('/bootstrap/js/bootstrap.min.js');
        //add the view to the view renderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                'ViewRenderer');
        $viewRenderer->setView($view);
        //Return it, so that it can be stored by the bootstrap
        return $view;
    } 
```

就导航而言。您可以在引导程序中初始化导航容器，但实际的视图组件通常会在布局中设置：

```
 /**
     * The bootstrap part as example, yours will likely be similar but different
     */
    protected function _initNavigation() {

        $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/site.xml');
        $container = new Zend_Navigation($config);
        $registry = Zend_Registry::getInstance();
        $registry->set('Zend_Navigation', $container);
    } 
```

然后在您的布局文件中，您可以实现类似于以下内容的导航：

```
<div id="nav">
    <?php echo $this->navigation()->menu()
               ->renderMenu(null, array(
                   'minDepth' => null,
                   'maxDepth' => 1,
                   'onlyActiveBranch' => TRUE
               )) ?>
</div> 
```

需要记住的一件事：我们在调用方法时获得的选项`$this->getOptions()`来自`_initRegistry()`application.ini*文件*。这里经常初始化大量的选项。

```
//application.ini as example your settings will be somewhat different
[production]
;-------------------------------------------------------------------------------
;PHP
;-------------------------------------------------------------------------------

phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0

;-------------------------------------------------------------------------------
;Paths and Namespaces
;-------------------------------------------------------------------------------

includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
autoloaderNamespaces[] = "My_"

;-------------------------------------------------------------------------------
;Front Controller
;-------------------------------------------------------------------------------

resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.frontController.moduleControllerDirectoryName = "controllers"
resources.frontController.params.prefixDefaultModule = ""
resources.modules = ""
resources.frontController.baseurl = http://example.com
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"

;-------------------------------------------------------------------------------
;plugins
;-------------------------------------------------------------------------------

pluginPaths.My_Application_Resource = APPLICATION_PATH "/../library/My/Resource"
resources.frontController.actionhelperpaths.My_Controller_Action_Helper = APPLICATION_PATH "/../library/My/Controller/Action/Helper"

;-------------------------------------------------------------------------------
;View Settings
;-------------------------------------------------------------------------------

resources.view[]=
resources.view.charset = "UTF-8"
resources.view.encoding = "UTF-8"
resources.view.doctype = "HTML5"
resources.view.language = "en"

;-------------------------------------------------------------------------------
;Database Settings
;-------------------------------------------------------------------------------

resources.db.adapter = "pdo_Mysql"
resources.db.params.username = "user"
resources.db.params.password = "xxxxxxx"
resources.db.params.dbname = "dbname"
resources.db.params.charset = "utf8"
resources.db.isDefaultTableAdapter = true
resources.db.params.profiler = true

;-------------------------------------------------------------------------------
;Layouts
;-------------------------------------------------------------------------------

resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"

[staging : production]

[testing : production]

phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]

phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

如果您的页面是空白的并且您认为它不应该是空白的。将您的环境设置为“开发”或仅将“生产”部分中的错误显示值从“0”更改为“1”。如果您这样做，将显示错误。

祝你好运

# powershell - 安排 PS 脚本并将输出作为警报邮件

> ID：15658275
> 
> 赞同：0
> 
> 时间：2013-03-27T12:00:24.287
> 
> 标签：powershell, biztalk

我是 PowerShell 新手，需要帮助。以下是检查 BizTalk 中主机实例状态的标准脚本。

我有两个任务： 1\. 邮寄脚本的输出。2.调度PS脚本。

```
$servers = (".")

#This function checks the status of the host instances on a BizTalk server ($Server).
function checkhostinstancestatusstarted ($server)
{
#gets all host instances on the server. Isolated (hosttype = 2) or disabled hosts are excluded .
    $hostinstances = get-wmiobject MSBTS_HostInstance -namespace 'root\MicrosoftBizTalkServer' | where {$_.runningserver -match $server -AND $_.hosttype -ne "2" -and $_.IsDisabled -ne "True"}
    write-host "Checking the state of all host instances on the server $server`:"

    foreach ($hostinstance in $hostinstances)
    {
        $HostInstanceName = $HostInstance.hostname

#Checks the host instance state
        if ($HostInstance.ServiceState -eq 1)
        {
            write-host "$HostInstanceName`: Stopped."
        }
        elseif ($HostInstance.ServiceState -eq 2)
        {
            write-host "$HostInstanceName`: Start pending."
        }
        elseif ($HostInstance.ServiceState -eq 3)
        {
            write-host "$HostInstanceName`: Stop pending."
        }
        elseif ($HostInstance.ServiceState -eq 4)
        {
            write-host "$HostInstanceName`: Started."
        }
        elseif ($HostInstance.ServiceState -eq 5)
        {
            write-host "$HostInstanceName`: Continue pending."
        }
        elseif ($HostInstance.ServiceState -eq 6)
        {
            write-host "$HostInstanceName`: Pause pending."
        }
        elseif ($HostInstance.ServiceState -eq 7)
        {
            write-host "$HostInstanceName`: Paused."
        }
        elseif ($HostInstance.ServiceState -eq 8)
        {
            write-host "$HostInstanceName`: Unknown."
        } 
    }
write-host `n  

        }

foreach ($server in $servers)
{
    checkhostinstancestatusstarted $server
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:22:48.953

看起来您的 PowerShell 脚本仍然需要更多代码才能将输出保存到文件中。一旦你让那部分工作，如果你有一个 Microsoft Exchange 服务器，这里是我们每天早上使用的一个脚本，通过电子邮件将日志文件的输出发送给我们。Exchange 的好处是它有一个名为“pickup”的文件夹，它将以电子邮件的形式发送一个名为“*.eml”的格式正确的文本文件。将此代码放入一个 vbscript 文件（即，将其命名为“EmailScript.vbs”或其他），然后通过单击开始>管理工具>任务计划程序并指向 * .vbs 文件。为了安排 Powershell 脚本本身，我在 Google 上找到了几篇关于此的文章：

[http://community.spiceworks.com/how_to/show/17736-run-powershell-scripts-from-task-scheduler](http://community.spiceworks.com/how_to/show/17736-run-powershell-scripts-from-task-scheduler)

[http://blogs.technet.com/b/heyscriptingguy/archive/2012/08/11/weekend-scripter-use-the-windows-task-scheduler-to-run-a-windows-powershell-script.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2012/08/11/weekend-scripter-use-the-windows-task-scheduler-to-run-a-windows-powershell-script.aspx)

```
'First retrieve the contents of the log file
Set fso = CreateObject("Scripting.FileSystemObject")
Set file = fso.OpenTextFile("C:\logfile", 1)
content = file.ReadAll
file.close

msg = "To: jdoe@company.com"
msg = msg & chr(13) & chr(10)
msg = msg & "From: server@server.com"
msg = msg & chr(13) & chr(10)
msg = msg & "Subject: powershell results"
msg = msg & chr(13) & chr(10) & chr(13) & chr(10) & content

Set f = fso.OpenTextFile("\\ServerName\c$\program files\microsoft\exchange server\transportroles\pickup\powershell.eml",2, True)
f.Write msg
f.Close
Set f = Nothing
Set fso = Nothing 
```

# python - Gae ndb 结构化属性

> ID：15658276
> 
> 赞同：1
> 
> 时间：2013-03-27T12:00:24.700
> 
> 标签：python, google-app-engine

我有这样的事情：

```
class Book(ndb.Model):
    date=ndb.DateProperty()
    title=ndb.StringProperty()  
    content=ndb.TextProperty()

class User(ndb.Model):
    username=ndb.StringProperty()
    name=ndb.StringProperty()
    city=ndb.StringProperty() 
    books=ndb.StructuredProperty(Book, repeated=True) 
```

这个想法是有几个用户，每个用户都有几本不同的书。

一旦我有了用户对象：

```
user=User.query(User.username=="pepo").get() 
```

我可以轻松获取该用户的书籍列表：

```
user.books 
```

但是，例如，我怎样才能得到该用户按日期排序的书籍列表？或者通常对结构化属性的任何查询，但与我已经拥有的用户相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:22:37.120

拥有用户对象后，您可以将`books`属性视为普通列表。要排序，您可以执行以下操作：

```
sorted_books = sorted(user.books, lambda x: x.date) 
```

您将在内存中进行排序，而不是通过查询（尽管我相信您可以`User`通过结构化属性对查询结果进行排序，但它不会对属性本身的排序产生任何影响，只是在返回的`User`对象）。

有关如何在 Python 中对列表进行排序的更多信息，请查看[这篇文章](http://docs.python.org/2/howto/sorting.html)。

# android - 将 mapView 缩放到 osmdroid 上的某个边界框

> ID：15658277
> 
> 赞同：6
> 
> 时间：2013-03-27T12:00:27.527
> 
> 标签：android, maps, openstreetmap, bounding-box

我想使用 zoomToBoundingBox 方法将地图缩放到特定的边界框。
该方法只在缩放级别 0 上显示地图。

在 mapView.java 源代码中我发现了这个：

> /** * 缩放地图以包围指定的边界框，尽可能靠近。* 必须在显示布局完成后调用，否则屏幕尺寸未知，并且 * 将始终缩放到缩放级别 0 的中心。 * 建议：检查 getScreenRect(null).getHeight() > 0 */

我检查了一下`getScreenRect(null).getHeight() > 0`，它给了我错误的信息。

如何以编程方式完成显示布局？
我该怎么做才能使上述谓词使我正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:14:42.903

我有同样的问题。我通过在 onLayout() 方法结束时调用 zoomToBoundingBox() 来解决它。

我有自己的 MapView 子类，用于将我与地图库选择隔离开来。这个类有一个 clearPoints / addPoint / layoutPoints 风格的界面。在 layoutPoints() 方法中，我从点集合创建逐项叠加层，并创建存储在类的实例方法中的边界框。

```
public class MyMapView extends MapView {

// The bounding box around all map points
// Used to determine the correct zoom level to show everything
private int minLat = Integer.MAX_VALUE;
private int minLon = Integer.MAX_VALUE;
private int maxLat = Integer.MIN_VALUE;
private int maxLon = Integer.MIN_VALUE;

private BoundingBoxE6 boundingBox; 
```

我的 onLayout() 覆盖有：

```
/* (non-Javadoc)
 * @see org.osmdroid.views.MapView#onLayout(boolean, int, int, int, int)
 */
@Override
protected void onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4) {
    super.onLayout(arg0, arg1, arg2, arg3, arg4);

    // Now that we have laid out the map view,
    // zoom to any bounding box
    if (this.boundingBox != null) {
        this.zoomToBoundingBox(this.boundingBox);
    }
} 
```

我不确定这是否是最好的方法，但它似乎对我有用（除了缩放似乎有点太远了，但这是另一个问题）。

# asp.net-mvc - 在spring mvc中下载

> ID：15658283
> 
> 赞同：0
> 
> 时间：2013-03-27T12:00:48.050
> 
> 标签：asp.net-mvc, spring, download

我有一个必须从不同域下载的应用程序。下载完成后，控件应返回到我的应用程序并刷新该页面。所有这些都在 SPring MVC 应用程序中。请帮助我这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:04:08.447

我不会为你编写所有代码，但这就是我要做的。

从您的前端代码调用 SpringMVC servlet。从该 servlet（或服务器端，如果您想保持控制器代码干净），向不同域发出 CURL 请求并下载文件。对文件做任何你需要做的事情，存储它，持久化它，等等。使用 SpringMVC 作为来自 servlet 的响应进行页面刷新。

这将解决任何跨域 javascript 问题。

# java - 带有通配符输入的 unix 'ls' 命令 - 在 java 6 中等效

> ID：15658289
> 
> 赞同：1
> 
> 时间：2013-03-27T12:01:04.700
> 
> 标签：java, unix, wildcard, ls

对于 Unix cli 中的此命令，我需要 java 中的等效行为：

`ls /data/archive/users/*/*.xml`

哪个输出我：

`/data/archive/users/2012/user1.xml
/data/archive/users/2013/user2.xml`

Java 6 是否有一个简单的等效实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:06:01.253

[`java.util.Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)使用和使用方法获取用户输入[`java.io.File.listFiles(FilenameFilter)`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28java.io.FilenameFilter%29)以获取具有特定过滤器的文件夹中的文件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:11:04.080

这是我使用的代码，它适用于相对路径和绝对路径：

```
DirectoryScanner scanner = new DirectoryScanner();  
if (!inputPath.startsWith("/") || inputPath.startsWith(".")) {  
    scanner.setBasedir(".");  
}  
scanner.setIncludes(new String[]{inputPath});  
scanner.setCaseSensitive(false);  
scanner.scan();  
String[] foundFiles = scanner.getIncludedFiles(); 
```

（来自 org.apache.tools.ant 的 DirectoryScanner）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:04:46.170

我忘记了这是从哪里来的，但这应该是一个好的开始。还有更多可通过[Google](https://www.google.com/search?q=Java+RegexFilenameFilter)获得。

```
public class RegexFilenameFilter implements FilenameFilter {
  /**
   * Only file name that match this regex are accepted by this filter
   */
  String regex = null; // setting the filter regex to null causes any name to be accepted (same as ".*")

  public RegexFilenameFilter() {
  }

  public RegexFilenameFilter(String filter) {
    setWildcard(filter);
  }

  /**
   * Set the filter from a wildcard expression as known from the windows command line
   * ("?" = "any character", "*" = zero or more occurances of any character")
   *
   * @param sWild the wildcard pattern
   *
   * @return this
   */
  public RegexFilenameFilter setWildcard(String sWild) {
    regex = wildcardToRegex(sWild);

    // throw PatternSyntaxException if the pattern is not valid
    // this should never happen if wildcardToRegex works as intended,
    // so thiw method does not declare PatternSyntaxException to be thrown
    Pattern.compile(regex);
    return this;
  }

  /**
   * Set the regular expression of the filter
   *
   * @param regex the regular expression of the filter
   *
   * @return this
   */
  public RegexFilenameFilter setRegex(String regex) throws java.util.regex.PatternSyntaxException {
    this.regex = regex;
    // throw PatternSyntaxException if the pattern is not valid
    Pattern.compile(regex);

    return this;
  }

  /**
   * Tests if a specified file should be included in a file list.
   *
   * @param dir the directory in which the file was found.
   *
   * @param name the name of the file.
   *
   * @return true if and only if the name should be included in the file list; false otherwise.
   */
  public boolean accept(File dir, String name) {
    boolean bAccept = false;

    if (regex == null) {
      bAccept = true;
    } else {
      bAccept = name.toLowerCase().matches(regex);
    }

    return bAccept;
  }

  /**
   * Converts a windows wildcard pattern to a regex pattern
   *
   * @param wild - Wildcard patter containing * and ?
   *
   * @return - a regex pattern that is equivalent to the windows wildcard pattern
   */
  private static String wildcardToRegex(String wild) {
    if (wild == null) {
      return null;
    }
    StringBuilder buffer = new StringBuilder();

    char[] chars = wild.toLowerCase().toCharArray();

    for (int i = 0; i < chars.length; ++i) {
      if (chars[i] == '*') {
        buffer.append(".*");
      } else if (chars[i] == '?') {
        buffer.append('.');
      } else if (chars[i] == ';') {
        buffer.append('|');
      } else if ("+()^$.{}[]|\\".indexOf(chars[i]) != -1) {
        buffer.append('\\').append(chars[i]); // prefix all metacharacters with backslash
      } else {
        buffer.append(chars[i]);
      }
    }

    return buffer.toString();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:03:38.547

是的，有，它被称为类的`list`方法`File`。有关详细信息，请参阅它的[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#list%28%29)。

# ruby-on-rails - <%= posts_delete_path %> 不起作用

> ID：15658290
> 
> 赞同：-2
> 
> 时间：2013-03-27T12:01:12.517
> 
> 标签：ruby-on-rails, path, posts

我正在和朋友一起编写网站，但我的代码出现了一个错误。在我朋友的电脑中，他的代码相同，没有任何错误。

我收到以下错误：

> 我们很抱歉，但有些不对劲。

好吧，我们是 Rails 的新手，当我尝试加载帖子页面时出现此错误。我们认为错误在于删除帖子，因为如果我们评论“posts_delete_path”行，一切正常。对于删除帖子，我们使用：

显示.hmtl.erb：

```
<% @hashtag.posts.each do |p| %>
    <li>Posted by: <%= p.user.name %></li>
    <li>Content:</li>
    <li><%= p.content %></li>
    <li><a href="<%= posts_delete_path %>/<%= p.id %>" >Delete</a></li>
<% end %> 
```

路线：

```
 match '/signout', to: 'sessions#destroy'
   match 'posts/delete/:id', to: 'posts#destroy'
   resources :posts, :only => [:create, :show] 
```

职位控制器：

```
def destroy
    @post = Post.find(params[:id])
    if current_user.id == @post.user_id
       @post.destroy
    end
end 
```

----编辑----耙路线：

```
 posts GET    /posts(.:format)           posts#index
            POST   /posts(.:format)           posts#create
   new_post GET    /posts/new(.:format)       posts#new
  edit_post GET    /posts/:id/edit(.:format)  posts#edit
       post GET    /posts/:id(.:format)       posts#show
            PUT    /posts/:id(.:format)       posts#update
            DELETE /posts/:id(.:format)       posts#destroy 
```

我们知道这是删除帖子的新手方法，但我们没有找到更好的解决方案。（如果您想提出建议，我们也会很高兴）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:13:53.717

看起来你的链接很好，但听起来你没有**包含你的 js**，这就是为什么当你点击删除时它会将你重定向到显示页面。

```
<%= link_to 'Destroy', product, :confirm => 'Are you sure?', :method => :delete %> 
```

### 1\. 检查你的`/assets/application.js`

对于`//= require jquery`和 `//= require jquery_ujs`

在 application.js 中添加这段代码

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

### 2\. 检查您的 /layouts/application.html.erb

为了`<%= javascript_include_tag "application"%>`

```
<head>
    <title>My awesome app</title>
    <%= stylesheet_link_tag "application" %>
    <%= javascript_include_tag "application"%>
    <%= csrf_meta_tag %>
  </head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:03:33.577

感谢所有尝试帮助我的人。现在我解决了我的问题，但通过其他方式。

我要做的是：

鉴于：

```
<% if current_user.id == p.user_id %>
            <%= button_to "Delete", { :controller => :posts, :action => 'destroy', :id => p.id }, :method => :delete %>
<% end %> 
```

在控制器中：

```
 def destroy
    @post = Post.find(params[:id])
    #if current_user.id == @post.user_id
       @post.destroy
    end
  end 
```

在路线：

```
resources :posts 
```

多谢你们！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:11:53.480

```
<%= link_to "Delete", p, method: :delete %> 
```

并修改`routes.rb`with

> 资源：帖子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:05:02.743

你应该使用这样的`link_to`符号：

```
<%= link_to "Delete", p, method: :delete %> 
```

此外，您应该尝试阻止用户甚至在视图中看到删除按钮，例如：

```
<% if current_user == p.user %>
    <%= link_to "Delete", p, method: :delete %>
<% end %> 
```

这只会向帖子的所有者显示删除链接。

也像 Ganesh 说的，转这个：

```
match 'posts/delete/:id', to: 'posts#destroy'
resources :posts, :only => [:create, :show] 
```

至：

```
resources :posts, :only => [:create, :show, :destroy] 
```

查看 rails 指南中的路由系统：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)，然后查看您需要哪些路线。

# networking - 会话发起协议

> ID：15658291
> 
> 赞同：0
> 
> 时间：2013-03-27T12:01:20.767
> 
> 标签：networking, sip

SIP v2.0 是否允许协议在非标准端口（不是 5060）上运行？我已经检查了规范，但无法找到答案。看起来可以在注册阶段协商和确定端口，但我无法通过 RFC 确认这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:10:59.373

是的，如果没有给出其他端口，端口 5060/5061 只是*默认端口。*[RFC3261](https://www.rfc-editor.org/rfc/rfc3261)也只推荐监听 5060/5061 端口；

> 还建议服务器在所有公共接口上侦听默认 SIP 端口（TCP 和 UDP 为 5060，TLS over TCP 为 5061）上的请求。

例如，如果根据[RFC3263](https://www.rfc-editor.org/rfc/rfc3263)使用 DNS 查找，则端口与地址同时查找；

```
That lookup would return:  

;;          Priority Weight Port   Target  
    IN SRV  0        1      5060   server1.example.com  
    IN SRV  0        2      5060   server2.example.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:57:32.337

嗯，是的，您可以使用其他端口发送 Sip 数据包......端口转发是一个提示......

# visual-studio - 多语言测试？

> ID：15658295
> 
> 赞同：1
> 
> 时间：2013-03-27T12:01:35.953
> 
> 标签：visual-studio, testing, automated-tests, coded-ui-tests

我们有 20 种不同语言的 Web 应用程序，我们计划为此使用相同的录制脚本。但播放不适用于除录制的一种语言之外的任何其他语言。这是因为文本标题与记录的标题不同。我该如何做这个测试？谢谢（我一直在使用 Visual Studio 2012）

# python - 在 vim 中调试 python 烧瓶应用程序

> ID：15658297
> 
> 赞同：2
> 
> 时间：2013-03-27T12:01:45.787
> 
> 标签：python, debugging, vim

例如，有人在 vim 中调试烧瓶应用程序吗[？](http://www.vim.org/scripts/script.php?script_id=663)我想要什么：例如，我想在控制器方法中设置断点

```
def login():
(breakpoint)>> some code
...
... 
```

以某种方式运行烧瓶应用程序，当我发送例如登录表单时，在此断点处停止并调试源代码。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:24:51.737

你知道[Python 调试器](http://docs.python.org/2/library/pdb.html)吗？您可以使用以下行在代码中的任何位置设置断点：

```
import pdb; pdb.set_trace() 
```

如果你使用 vim，你可能也会喜欢这个快捷方式：

```
:ia pdb import pdb; pdb.set_trace()<ESC> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:28:13.757

下面是我设置的相关部分，它允许我按下`F7`一条线并`pdb.set_trace()`插入一条线。`Shift+F7`再次删除它。调试本身发生在 vim 之外（在执行程序的命令行上），但从未让我失望。

这个实现需要出色的[ipdb](https://github.com/gotcha/ipdb)，但如果/必要的话应该很容易修改。

~/.vim/ftplugin/python/python.vim：

```
...
map <S-F7> :py RemoveBreakpoints()<CR>
map <F7> :py SetBreakpoint()<CR>
... 
```

~/.vim/ftplugin/python/custom.py：

```
...
def SetBreakpoint():
    nLine = int( vim.eval('line(".")') )

    strLine = vim.current.line
    strWhite = re.search('^(\s*)', strLine).group(1)

    vim.current.buffer.append(
        (
            "%(space)spdb.set_trace() %(mark)s Breakpoint %(mark)s" %
            {'space': strWhite, 'mark': '#' * 30}
        ),
        nLine - 1
    )

    for strLine in vim.current.buffer:
        if strLine == "import ipdb as pdb":
            break
    else:
        vim.current.buffer.append('import ipdb as pdb', 2)
        vim.command('normal j1')
    vim.command('write')

def RemoveBreakpoints():
    nCurrentLine = int( vim.eval('line(".")') )

    nLines = []
    nLine = 1
    for strLine in vim.current.buffer:
        if strLine == 'import ipdb as pdb' or strLine.lstrip().startswith('pdb.set_trace()'):
            nLines.append(nLine)
        nLine += 1

    nLines.reverse()

    for nLine in nLines:
        vim.command('normal %dG' % nLine)
        vim.command('normal dd')
        if nLine < nCurrentLine:
            nCurrentLine -= 1

    vim.command('normal %dG' % nCurrentLine)
    vim.command('write')
... 
```

# c# - 负载均衡器上的 Quartz.net 作业

> ID：15658300
> 
> 赞同：1
> 
> 时间：2013-03-27T12:01:48.470
> 
> 标签：c#, scheduled-tasks, load-balancing, quartz.net

我有一个quartz.net 调度程序实现（和作业）。调度程序位于我的网站/应用程序本身内部，并以指定的时间间隔异步运行作业。

在本地和测试上一切都很好。一旦我将此代码移动到现场（其中有多个负载平衡器运行我的网站实例），作业开始触发的次数与负载平衡器的数量一样多。

我该如何处理？我如何确保只有一个调度程序在我的所有负载均衡器上运行作业。

或者，有没有办法让我找出以前的工作是什么时候被解雇的（在任何负载平衡器上！）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:36:49.310

如果您使用数据库作为作业存储，将所有调度程序指向同一个数据库并将它们设置为集群，那么您的作业将在服务器之间共享，您不会让它们多次触发。

或者，您也可以将调度程序移到它自己的 Windows 服务中，然后在您的 Web 服务器之间共享它。

# android - as3 StageText 光标不显示

> ID：15658301
> 
> 赞同：0
> 
> 时间：2013-03-27T12:01:48.993
> 
> 标签：android, actionscript-3, mobile, air, adobe

这是创建 StageText 的代码

```
var myTextField:StageText = new StageText();
myTextField.returnKeyLabel = ReturnKeyLabel.SEARCH;
myTextField.text = tlf.text;
myTextField.editable = true;
myTextField.fontFamily = "Ariel"
myTextField.fontSize = 40;
myTextField.color =  tlf.textColor
myTextField.textAlign = TextFormatAlign.RIGHT
myTextField.stage = stage;
myTextField.viewPort = new Rectangle(p.x,  p.y, tlf.width*screenUtil.xScaleFactor,tlf.height*screenUtil.yScaleFactor);
txtInputVo.stageText = myTextField;
myTextField.locale = "he-IL";
myTextField.addEventListener(FocusEvent.FOCUS_IN, onInFocus);
myTextField.addEventListener(FocusEvent.FOCUS_OUT, onOutFocus);
protected function onInFocus(event:FocusEvent):void
{
    var sTxt:StageText = event.currentTarget as StageText;
    var textInputVo:TextInputVO =  getTextInputVO(sTxt);
    if(textInputVo.defultText == sTxt.text)
    {
        sTxt.text = "";
    }
} 
```

它工作得很好，键盘出现了，你可以插入和编辑文本，但光标没有出现？

到目前为止，我只在 Android Air 3.6 上测试过它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-26T21:53:58.903

尝试“Arial”而不是“Ariel”作为字体系列

# vb.net - 我希望我的带有 sqldb 的 vb.net 程序可以转移

> ID：15658307
> 
> 赞同：1
> 
> 时间：2013-03-27T12:02:09.750
> 
> 标签：vb.net, tsql, sql-server-2005, connection, connection-string

我的 vb.net 程序有问题。它有一个包含以下`SqlConnection`字符串的数据库：

```
DbConn = New SqlConnection("Data Source=ACE-DUO;Initial Catalog=db_CVSO;Persist Security Info=True;User ID=sa;Password=pwd") 
```

我为这个 vb.net 程序制作了一个安装程序，但我的 SQL Server 连接字符串有问题。这是因为一旦我将程序安装在不同的计算机上。在我的例子中，服务器名称 (ACE-DUO) 发生了变化，并且无法定位数据库本身。

我知道如何分离文件并将其附加到 vb.net 程序。我真正的目标是我希望连接字符串根据程序资源的放置位置进行更改。

例如，如果程序安装在`C:\Program Files\MyDatabase`文件夹中，我想将其作为连接字符串的一部分，以便在不同的计算机上打开它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:18:20.403

如果您不需要对数据库的多个共享访问，您可以利用 Sql Server 2012 的 LocalDB 功能。您的连接字符串可以更改为

```
 DbConn = New SqlConnection("Server=(localdb)\v11.0;Integrated " & _ 
                            "Security=true;AttachDbFileName=C:\Program Files\MyDatabase\db.mdf;" 
```

[关于 LocalDB 的文章](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)

# asp.net-mvc - MVC 4 ComplexType 属性未搭建脚手架

> ID：15658309
> 
> 赞同：1
> 
> 时间：2013-03-27T12:02:11.823
> 
> 标签：asp.net-mvc, scaffolding, complextype

我有一个地址复杂类型作为用户的属性之一。当我搭建域模型时，视图中会跳过复杂类型。有解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:11:36.497

事实证明，MVC 4 还不能构建复杂类型。我们将不得不手动在表单中添加文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T14:36:52.540

您应该能够使用包管理器控制台构建复杂类型。

# java - Scala：加载 Java 属性

> ID：15658310
> 
> 赞同：6
> 
> 时间：2013-03-27T12:02:17.423
> 
> 标签：java, scala, properties

什么容易阅读和理解，Scala 代码根据以下 Java 代码加载 Java 属性：

```
 try {
        Properties prop = new Properties();
        prop.load(new FileInputStream("config.properties"));
        this.host = prop.getProperty("mongo.host");
        this.port = new Integer(prop.getProperty("mongo.port"));
        this.dbName = prop.getProperty("mongo.db");
        this.docsCollName  = prop.getProperty("mongo.coll.docs");
    } catch (Exception e) {
        e.printStackTrace();
        System.exit(1);
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T12:57:10.810

我肯定会推荐由 Scala 背后的公司编写并至少被 Akka 框架使用的[typesafe config 。](https://github.com/typesafehub/config)

特点（引自维基）：

*   用纯 Java 实现，没有依赖项
*   广泛的测试覆盖
*   支持三种格式的文件：Java 属性、JSON 和人性化的 JSON 超集
*   合并所有格式的多个文件
*   可以从文件、URL 或类路径加载
*   对“嵌套”的良好支持（将配置的任何子树视为整个配置）
*   用户可以使用 Java 系统属性覆盖配置，java -Dmyapp.foo.bar=10 支持配置应用程序及其框架和库，所有这些都来自单个文件，例如 application.conf
*   解析持续时间和大小设置，“512k”或“10 秒”
*   转换类型，所以如果你要求一个布尔值并且值是字符串“yes”，或者你要求一个浮点数并且值是一个整数，它会弄清楚。
*   JSON 超集特性：注释包括替换 ("foo" : ${bar}, "foo" : Hello ${who}) 类似属性的表示法 (ab=c) 噪音更小，语法更宽松 替代环境变量

例子：

```
Config conf = ConfigFactory.load();
int bar1 = conf.getInt("foo.bar");
Config foo = conf.getConfig("foo");
int bar2 = foo.getInt("bar"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-27T12:08:09.170

基本相同（如果您不使用任何配置库）：

```
val (host, port, dbName, docsCollName) = 
  try {
    val prop = new Properties()
    prop.load(new FileInputStream("config.properties"))

    (
      prop.getProperty("mongo.host"),
      new Integer(prop.getProperty("mongo.port")),
      prop.getProperty("mongo.db"),
      prop.getProperty("mongo.coll.docs")
    ) 
    } catch { case e: Exception => 
      e.printStackTrace()
      sys.exit(1)
    } 
```

# extjs - DateField：在哪里可以找到 setValue 函数的 Source

> ID：15658311
> 
> 赞同：1
> 
> 时间：2013-03-27T12:02:19.017
> 
> 标签：extjs, extjs4, extjs4.2

在哪里可以找到 DateField 的 setValue 函数的源代码？我的意思是它必须发生一些事情，因为我的商店保存了一个 Date 对象（至少我是这么认为的）并且 DateField 在我设置它时会考虑格式......

我需要为日期构建一个 Displayed 字段，这就是我查看此内容的原因。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:03:30.583

您在源代码中看到的只是 API 的文档覆盖，不多不少。

继承自身的`Ext.form.field.DateField`扩展覆盖并调用其扩展的方法。`Ext.form.field.Picker``setValue``Ext.form.field.Text``setValue``Ext.form.field.Base`

`Ext.form.field.Base`本身`setRawValue`以`valueToRaw`调用作为参数**[调用](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.form.field.Date-method-valueToRaw)**，该参数在`Ext.form.field.DateField`. 你在这...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:14:43.037

它在他们的 api 中可用。每个方法旁边都有一个查看源代码按钮，可以直接进入代码。

[http://docs.sencha.com/ext-js/4-2/source/Date4.html#Ext-form-field-Date-method-setValue](http://docs.sencha.com/ext-js/4-2/source/Date4.html#Ext-form-field-Date-method-setValue)

# r - 在 R 中访问结构

> ID：15658313
> 
> 赞同：3
> 
> 时间：2013-03-27T12:02:21.057
> 
> 标签：r

我想根据它们的 cronbach-alpha-if-excluded 值获取项目的名称。ltm 包为我提供了我需要的数据，但我无法理解如何以我需要的方式访问其结果集。（我知道其他包有 Cronbach alpha 函数，但我只能找到这个来处理我的随机丢失数据。）

```
library(ltm)
descript(Abortion)['alpha'] 
```

结果是

```
$alpha
                     value
All Items        0.8706719
Excluding Item 1 0.8572997
Excluding Item 2 0.8223116
Excluding Item 3 0.8147668
Excluding Item 4 0.8430359 
```

我想根据返回值对它们进行排序，并将两个最大的项目名称放在一个列表中。在这种情况下，我需要一种方法来返回 badItems<-c('Item 1', 'Item 4')。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:16:07.270

这可能有效：

```
names(sort(descript(Abortion)['alpha']$alpha[-1,1], decreasing=TRUE)[c(1,2)]) 
```

# blackberry - 适用于不同黑莓设备的黑莓应用程序

> ID：15658314
> 
> 赞同：0
> 
> 时间：2013-03-27T12:02:22.003
> 
> 标签：blackberry, screen-resolution

首先，我不是黑莓用户。我为 7.0+ 操作系统版本制作了一个黑莓应用程序。从一开始，我就在 Blackberry 9900 Bold Simulator 和同一设备（公司提供的同一设备）上测试了该应用程序。所以并没有真正检查其他黑莓设备中的应用程序。但是现在我得到了另一个分辨率 BB 设备，所有的 GUI 东西都被打乱了。

我现在该怎么办？

一种方法是我应该检查分辨率并`Display.getHorizontalResolution()`相应`Display.getVerticalResolution()`地制作 GUI，但由于我有 20 多个屏幕，我不会这样做。

如果您有任何通用解决方案，请提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:53:26.240

使用[嵌入式 Eclipse 插件预处理器](http://docs.blackberry.com/en/developers/deliverables/21065/Specifying_preprocessor_directives_657636_11.jsp)或[Antenna 预处理器通过](http://antenna.sourceforge.net/wtkpreprocess.php)[BlackBerry Ant Tools](http://bb-ant-tools.sourceforge.net/)进行条件编译，为不同的目标操作系统和/或不同的目标设备生成不同的应用程序文件。

考虑[使用 Alx-task](http://bb-ant-tools.sourceforge.net/docs#alx)来生成支持不同平台/OS-es 的 alx（应用程序描述符文件）。

还要检查[这篇文章](http://supportforums.blackberry.com/t5/Testing-and-Deployment/Create-a-single-alx-file-to-install-multiple-versions-of-an/ta-p/445156)。它将帮助您完成任务。

# security - 设计审查 - 基于角色的访问系统的性能和可扩展性问题

> ID：15658315
> 
> 赞同：2
> 
> 时间：2013-03-27T12:02:28.090
> 
> 标签：security, permissions, authorization, roles

我正在设计授权服务。它根据分配给用户的角色和对内容设置的权限执行访问控制。用户可以属于多个组。这些组也可以属于其他组。组下组下组的深度并没有那么大。内容可以在用户级别或组级别共享。内容也可以与多个组共享。内容上允许的操作是`to-read`或`to-read-write`。

这是我对设计上述问题的解决方案的想法。问题是，它看起来非常简单。**我担心我遗漏了一些会损害设计性能或可扩展性的点**。这是设计。

**数据存储：** 每个用户可以有多个角色。角色是一个字符串，看起来像命名空间。`supergroup.group.subgroup.rolename`. 每个内容可以有多个权限。权限是一个字符串，看起来像带有操作类型前缀的命名空间。`canreadwrite.supergroup.group.subgroup.rolename`

**授权算法** 授权函数算法是这样的（PS这只是为了展示基础，实际上角色和权限数组会被排序，并且会使用某种形式的二进制搜索来进行匹配）

```
public bool CanReadWrite(string[] roles, string[] permissions)
{
    foreach (var role in roles)
    {
        foreach (var permission in permissions.Where(s => s.StartsWith(canreadwrite)))
        {
            string barePermission = permission.Remove(0, canreadwrite.Length);

            if (role.StartsWith(barePermission))
            {
                return true;
            }
        }
    }

    return false;
} 
```

你觉得这个设计有什么问题吗？有性能问题吗？可扩展性问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T06:58:12.200

Your application is not very clear, especially how these hierarchies of user groups relate to the roles/permissions design.

First I'd avoid to implement binary search by your own, but just to use [dictionaries](http://www.dotnetperls.com/dictionary).

Second I'd assume you might have large numbers of content items and large numbers of users. It looks like you could end up with large numbers of "dotted permission strings" per content item, but you should keep the number of role/permission entries per content small for performance and maintainability of rights.

Maybe you can split the role definition/maintenance from these user group hierarchies, i.e. content items do only "know" some roles, not these groups.

Third, if you really need hierarchies of user groups, I'd consider to allow to attach roles/permissions on higher level groups where approriate to avoid the need to define/maintain roles/permissions always on lowest level (assuming many low level groups possible).

s.a. [RBAC at wikipedia](http://en.wikipedia.org/wiki/Role-based_access_control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:20:25.047

`canreadwrite`除了两个非常奇怪的名为or的顶级组之外，我找不到该方法的任何真正问题`canread`。如果一个愚蠢的管理员创建这样的组，你的算法就会失败。

因此，我建议使用类似`canreadwrite:supergroup.group.subgroup.rolename`.

作为替代方案，您可以格式化关联，如 rolehierarcy:permission，测试角色 with`StartsWith(roleName)`和权限 with `EndsWith(":" + permissionName)`。

例如`supergroup.group.subgroup.rolename:canreadwrite`

# phantomjs - PhantomJS：提交表单

> ID：15658317
> 
> 赞同：1
> 
> 时间：2013-03-27T12:02:33.433
> 
> 标签：phantomjs

我正在使用 PhantomJS 填写并提交表单，然后输出结果页面。问题是，我根本不知道这件事是否正在提交。

我打印结果页面，但它与原始页面相同。我不知道这是因为它重定向回来还是我没有提交或者我需要等待更长时间或或或。在真正的浏览器中，它发送一个 GET 并接收一个 cookie，它使用它来发送更多的 GETS，然后最终接收到最终结果 - 航班数据。

我复制了这个示例[How to submit a form using PhantomJS](https://stackoverflow.com/questions/9246438/how-to-submit-a-form-using-phantomjs)，使用不同的 url 和 page.evaluate 函数。

```
var page = new WebPage(), testindex = 0, loadInProgress = false;

page.onConsoleMessage = function(msg) {
  console.log(msg);
};

page.onLoadStarted = function() {
  loadInProgress = true;
  console.log("load started");
};

page.onLoadFinished = function() {
  loadInProgress = false;
  console.log("load finished");
};

var steps = [
  function() {
    //Load Login Page
    page.open("http://www.klm.com/travel/dk_da/index.htm");
  },
  function() {
    //Enter Credentials
    page.evaluate(function() {

                     $("#ebt-origin-place").val("CPH");
                    $("#ebt-destination-place").val("CDG");
                    $("#ebt-departure-date").val("1/5/2013");
                    $("#ebt-return-date").val("10/5/2013");

    });
  }, 
  function() {
    //Login
    page.evaluate(function() {

    $('#ebt-flightsearch-submit').click() ; 

     # also tried:
     # $('#ebt-flight-searchform').submit();   

    });
  }, 
  function() {
    // Output content of page to stdout after form has been submitted
    page.evaluate(function() {
      console.log(document.querySelectorAll('html')[0].outerHTML);
    });
  }
];

interval = setInterval(function() {
  if (!loadInProgress && typeof steps[testindex] == "function") {
    console.log("step " + (testindex + 1));
    steps[testindex]();
    testindex++;
  }
  if (typeof steps[testindex] != "function") {
    console.log("test complete!");
    phantom.exit();
  }
}, 50); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T23:51:08.513

感兴趣的站点是相当复杂的刮。我记录了来自美国荷航网站的 HTTP 流量并得到了这个：

GET /travel/us_en/apps/ebt/ebt_home.htm?name=on&ebt-origin-place=New+York+-+John+F.+Kennedy+International+%28JFK%29%2CNew+York&ebt-destination-place=Paris+- +查尔斯+德+高乐+机场+%28CDG%29%2C+法国&c%5B0%5D.os=JFK&c%5B0%5D.ost=机场&c%5B0%5D.ds=CDG&c%5B0%5D.dst=机场&c%5B1 %5D.os=CDG&c%5B1%5D.ost=机场&c%5B1%5D.ds=JFK&inboundDestinationLocationType=机场&redirect=no&chdQty=0&infQty=0&c%5B0%5D.dd=2013-07-31&c%5B1%5D.dd=2013 -08-14&c%5B1%5D.format=dd%2Fmm%2Fyyyy&flex=true&ebt-cabin-class=ECONOMY&adtQty=1&goToPage=&cffcc=ECONOMY&sc=false HTTP/1.1

您为表单元素注入的值不是他们的服务器正在寻找的。

在 page.evaluate() 内部，您是沙盒的，但示例代码包含一个挂钩，用于将沙盒控制台活动获取到外部控制台。对于其他调试，您还可以包括对象检查器等，但它们必须注入到页面或传递给评估（）的部分代码中。

# c# - 在 C# 中使用信号量

> ID：15658318
> 
> 赞同：3
> 
> 时间：2013-03-27T12:02:37.787
> 
> 标签：c#, multithreading, visual-studio-2010, semaphore

嗨，我正在尝试`Semaphore`在我的应用程序中使用。我是这样声明的。

```
class MyThread
{
    public Thread Thrd;

    static Semaphore sem = new Semaphore(2, 2);
    public MyThread(string name)
    {
        Thrd = new Thread(this.Run);
        Thrd.Name = name;
        Thrd.Start();
    }
} 
```

但我无法编译它给了我这个错误：

```
The type or namespace name 'Semaphore' could not be found 
(are you missing a using directive or an assembly reference?) 
```

但是我已经添加了 `using System.Threading;`可以使用**Mutex**的命名空间。可能是我所缺少的。有没有其他参考需要补充。？我正在使用**VS 2010**。框架 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:08:11.453

信号量是[在 .NET 2.0 中引入的](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)

System.Threading.dll 是在 .NET 4.0 中添加的（尽管命名空间 System.Threading 从 v1 开始就已经存在）。也许您的项目包含旧版本的 System.Threading。

这是一个常见问题[类型或命名空间''在类或命名空间''中不存在（您是否缺少程序集引用？）](http://blogs.msdn.com/b/csharpfaq/archive/2004/04/29/why-did-i-receive-the-error-the-type-or-namespace-lt-namespace-name-gt-does-not-exist-in-the-class-or-namespace-lt-parent-namespace-gt-are-you-missing-an-assembly-reference.aspx)

您需要在项目中添加对定义了该命名空间的程序集的引用，或者尽管您声明您正在使用 System.Threading，但您仍然缺少 using 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:19:10.900

最好添加 4.0 版本以获得 Semaphore 类的适当参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:07:18.783

```
 .NET Framework
 Supported in: 4.5, 4, 3.5, 3.0, 2.0
.NET Framework Client Profile
 Supported in: 4, 3.5 SP1
 Portable Class Library
 Supported in: Portable Class Library
 .NET for Windows Store apps
 Supported in: Windows 8 
```

你可能需要另一个版本的框架

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:21:03.360

这段代码为我编译

```
using System.Threading;

namespace ConsoleApp1
{
    class MyThread
    {
        static Semaphore sem = new Semaphore(2, 2);
    }

    class Program
    {
        static void Main(string[] args) { }
    }
} 
```

*   对比 2010
*   .NET 4.0
*   单一引用`System.dll` *v4.0.0.0，运行时版本 v4.0.30319，位于 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.dll*

# css - 网站内容溢出到页脚

> ID：15658319
> 
> 赞同：0
> 
> 时间：2013-03-27T12:02:38.180
> 
> 标签：css, layout, footer

[http://jsfiddle.net/talmuda3/s9QyR/](http://jsfiddle.net/talmuda3/s9QyR/)

```
footer {
    margin-top: 1em;
    width: 100%;
    height: 20em;
    position: relative;
    bottom: 0;
    left: 0;
} 
```

离线网站的布局很棘手。内容溢出到页脚。部分代码如上。

如何调整内容以使页脚保持在底部，并且内容在整个网站上延伸而不与页脚重叠。请温柔一点。检查 Chris Coyier 的网站是否有任何提示 - 可能只是漏掉了一些东西。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:04:47.413

您正在通过声明将文章推倒`top: 12em`。您应该为页脚提供相同的属性，这可以解决问题：http: [//jsfiddle.net/s9QyR/1/](http://jsfiddle.net/s9QyR/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:17:01.790

您还应该推动页脚`top:12em;` ，这将在正确的位置添加页脚。[演示](http://jsfiddle.net/s9QyR/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:56:07.940

我认为这就是你所追求的 - [jsFiddle](http://jsfiddle.net/apaul34208/s9QyR/10/)

```
article {
    margin-top:12em;
    width:80%;
    height:100%;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 3em;
    padding: 1em;
    z-index: 2;
    background: transparent;
    overflow: visible;
}

footer {
    margin-top: 1em;
    width: 100%;
    height: 20em;
} 
```

似乎改变定位打破了元素的自然流动。

您可能想尝试这种方法，以避免不得不将所有内容都放在行中。

# c# - 加快 MSBuild 构建过程

> ID：15658321
> 
> 赞同：2
> 
> 时间：2013-03-27T12:02:41.980
> 
> 标签：c#, performance, compilation, msbuild, msbuild-4.0

我的 Buildprocess 工作正常，但对于一个非常小的项目，它需要将近 3 秒。

**我怎样才能加快构建过程？**

日志文件对于发布它来说太大了。随意询问有关记录器输出的问题，然后我将发布请求的部分。

**构建项目的 C# 方法**

```
private void CompileCode()
        {
            using (var buildManager = new BuildManager())
            {
                var result = buildManager.Build(this.CreateBuildParameters(), this.CreateBuildRequest());

                if (result.OverallResult == BuildResultCode.Failure)
                {
                    // Error handling
                    var stringbuilder = new StringBuilder();

                    using (var reader = new StreamReader(NameDebuggerLogFile))
                    {
                        stringbuilder.Append(reader.ReadToEnd());
                    }

                    throw new CompilerException(stringbuilder.ToString());
                }
            }
        }

        private BuildParameters CreateBuildParameters()
        {
            var projectCollection = new ProjectCollection();
            var buildLogger = new FileLogger { Verbosity = LoggerVerbosity.Detailed, Parameters = "logfile=" + NameDebuggerLogFile };
            var buildParameters = new BuildParameters(projectCollection) { Loggers = new List<ILogger>() { buildLogger } };
            return buildParameters;
        }

        private BuildRequestData CreateBuildRequest()
        {
            var globalProperties = new Dictionary<string, string>();
            var buildRequest = new BuildRequestData(FolderPath + NameProjectFile, globalProperties, null, new[] { "Build" }, null, BuildRequestDataFlags.ReplaceExistingProjectInstance);
            return buildRequest;
        } 
```

**用于构建过程的项目文件**

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <AssemblyName>GeneratedFlexForm</AssemblyName>
    <OutputPath>DLL</OutputPath>
    <OutputType>Library</OutputType>
    <DebugType>none</DebugType>
    <DebugSymbols>false</DebugSymbols>
    <Optimize>false</Optimize>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.ServiceModel" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Web" />
    <Reference Include="System.Web.Services" />
    <Reference Include="System.Drawing" />
    <Reference Include="System.Design" />
    <Reference Include="System.Data" />
    <Reference Include="System.Core" />
    <Reference Include="System.Management" />
    <Reference Include="System.Configuration" />
    <Reference Include="System.Xaml">
      <RequiredTargetFramework>4.0</RequiredTargetFramework>
    </Reference>
    <Reference Include="WindowsBase" />
    <Reference Include="PresentationCore" />
    <Reference Include="PresentationFramework" />
    <!--<Reference Include="FlexForms.Core" />-->
    <Reference Include="FlexForms.Core, Version=1.0.0.0, Culture=neutral, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>Library\FlexForms.Core.dll</HintPath>
    </Reference>
    <Reference Include="Gizmox.WebGUI.Forms">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>Library\Gizmox.WebGUI.Forms.dll</HintPath>
    </Reference>
    <Reference Include="Gizmox.WebGUI.Common">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>Library\Gizmox.WebGUI.Common.dll</HintPath>
    </Reference>
    <Reference Include="FlexForms.ServiceProviders">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>Library\FlexForms.ServiceProviders.dll</HintPath>
    </Reference>
  </ItemGroup>
  <ItemGroup>
    <Page Include="FlexForm.xaml">
      <Generator>MSBuild:Compile</Generator>
      <DependentUpon>RadioButtonValueConverter.cs</DependentUpon>
      <SubType>Designer</SubType>
    </Page>
    <Compile Include="FlexForm.xaml.cs">
      <DependentUpon>FlexForm.xaml</DependentUpon>
      <SubType>Code</SubType>
    </Compile>
    <Compile Include="UserCode.cs">
      <SubType>Code</SubType>
    </Compile>
    <Compile Include="RadioButtonValueConverter.cs">
      <SubType>Code</SubType>
    </Compile>
    <Resource Include="datacontext.xml"/>
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
</Project> 
```

**在构建期间收集的记录器输出**（由于文件大小，仅最后几行）

> 完成构建项目“projectfile.csproj”。
> 
> 构建成功。0 警告 0 错误
> 
> 经过时间 00:00:02.68

**编辑：**

我希望我可以在这里引用**Seva Titov**：

> 构建 WPF 非常棘手，例如 XAML 文件会被重新编译两次（请参阅 MSDN）。仅使用 csc.exe 无法轻松复制它。如果您的项目中有 XAML，则必须使用 MSBuild。——塞瓦·蒂托夫

这就是为什么我必须坚持使用 MSBuild。

无论如何，我有一些想法来提高性能：

*问题 1：* 这是我的日志文件中的一个片段，它说 MSBuild 在解决依赖关系时会处理 .winmd、.dll 和 .exe 文件。

> ```
> AllowedAssemblyExtensions:
>     .winmd
>     .dll
>     .exe 
> ```

由于我只有 .dll 文件，我想禁用 MSBuild 考虑 .winmd 文件，这几乎适用于我所有的依赖项。（下面的例子）

> 主要参考“PresentationCore，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35”。解析的文件路径为“C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\PresentationCore.dll”。在搜索路径位置“{TargetFrameworkDirectory}”找到参考。对于 SearchPath“{TargetFrameworkDirectory}”。考虑“C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\PresentationCore.winmd”，但它不存在。

*解决方案： 1* 我必须修改我的 CreateBuildRequest() 方法：

```
private BuildRequestData CreateBuildRequest()
{
    var globalProperties = new Dictionary<string, string>();
    // Related to idea 1           
    globalProperties.Add("ExpandSDKAllowedReferenceExtensions", ".dll");
    globalProperties.Add("AllowedReferenceAssemblyFileExtensions", ".dll");
    globalProperties.Add("AllowedReferenceRelatedFileExtensions", string.Empty);
    // Related to idea 2     
    globalProperties.Add("BuildProjectReferences", "false");
    globalProperties.Add("BuildInParallel", "true");
    var buildRequest = new BuildRequestData(FolderPath + NameProjectFile, globalProperties, "4.0", new[] { "Build" }, null, BuildRequestDataFlags.IgnoreExistingProjectState);
    return buildRequest;
} 
```

**EDIT2：** *想法 2：* 有人知道如何包含 /maxcpucount 或 /m 开关来并行构建我的项目吗？它在此[MSDN 页面](http://msdn.microsoft.com/library/vstudio/bb651793)上进行了解释，但我不知道如何将其应用于上面列出的项目文件

*解决方案 2：* 参见*解决方案 1*，但变化不大。

**EDIT3：** 玩了几个小时后，我想我将不得不放弃。我看到的唯一选择是总体上减少依赖关系。但我稍后会回来讨论这个问题。

有点无关：

```
> Task Performance Summary:
>         0 ms  CreateItem                                 1 calls
>         0 ms  AssignCulture                              1 calls
>         0 ms  CallTarget                                 2 calls
>         0 ms  FindAppConfigFile                          1 calls
>         0 ms  Delete                                     4 calls
>         0 ms  GetFrameworkPath                           1 calls
>         0 ms  ConvertToAbsolutePath                      1 calls
>         0 ms  MakeDir                                    1 calls
>         0 ms  Message                                    5 calls
>         0 ms  AssignTargetPath                           6 calls
>         1 ms  FindUnderPath                              5 calls
>         1 ms  FileClassifier                             1 calls
>         1 ms  RemoveDuplicates                           2 calls
>         1 ms  CreateCSharpManifestResourceName           1 calls
>         1 ms  ReadLinesFromFile                          1 calls
>        15 ms  ResolveAssemblyReference                   1 calls
>        21 ms  ResourcesGenerator                         1 calls
>        56 ms  Copy                                       2 calls
>       299 ms  GenerateTemporaryTargetAssembly            1 calls
>       502 ms  Csc                                        2 calls
>       725 ms  MarkupCompilePass1                         1 calls
>       814 ms  MarkupCompilePass2                         1 calls
> 
> Build succeeded.
>     0 Warning(s)
>     0 Error(s)
> 
> Time Elapsed 00:00:02.27 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:29:34.323

要回答您的直接问题，您无能为力来加快 msbuild。如果您的机器使用 SSD，我希望它运行得更快，但这可能不是您正在寻找的那种解决方案。

我能想到的唯一另一件事是完全停止使用 msbuild。它所做的只是驱动 C# 编译器。那么，为什么还要打扰 msbuild 呢？直接使用 C# 编译器即可。例如通过`CSharpCodeProvider`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T09:43:57.307

我可以建议的一种简单方法是通过提供如下命令中的 MSBuild 属性来利用处理器的多个内核：

```
msbuild default.msbuild /m:1 
```

我不确定这些`/m`属性如何在内部生效。

**编辑：**

据我所见，线程发生在项目外部。解决方案中的多个项目将使用一个线程并行运行每个项目。因此，您可能无法将其添加为项目选项。

但是，在另一个[Hanselman 链接](http://www.hanselman.com/blog/HackParallelMSBuildsFromWithinTheVisualStudioIDE.aspx)中，我发现了一个 hack，可以将其合并到 Visual Studio 中，以便与解决方案编译一起运行它。请检查一下。

在这里，它添加了 MSBuild 作为外部工具来运行具有此属性的解决方案。

# php - 设置 netbeans 将 .tpl.php 识别为 smarty 扩展

> ID：15658325
> 
> 赞同：0
> 
> 时间：2013-03-27T12:02:50.370
> 
> 标签：php, plugins, netbeans, smarty

我所有的模板文件都带有`.tpl.php`扩展名，我不知道如何将 smarty 插件与这些文件相关联。覆盖`.php`扩展有效，但不是一个好的解决方案......你知道如何解决这个问题吗？

# ios - 计算 ALAssetLibrary 的最快方法是什么？

> ID：15658326
> 
> 赞同：0
> 
> 时间：2013-03-27T12:02:54.687
> 
> 标签：ios, performance, media

我正在寻找计算 ALAssetLibrary 中项目数量的最快方法。至少在这一点上，我不关心 /what/ 里面有什么，只是里面有很多东西。

对于音乐/音乐视频，这很容易：

```
MPMediaQuery* query = [[MPMediaQuery alloc] init];
int numItems = [[query items] count]; 
```

对于 ALAssetLibrary，我能想到的最好的就是像这样疯狂的东西（在这里手工输入，所以可能有错误）：

```
 ALAssetsLibrary* assetLibrary = [[ALAssetsLibrary alloc] init];
    ALAssetsGroupType groupType = ALAssetsGroupAll;
    int numAssets=0;

    [assetLibrary enumerateGroupsWithTypes:groupType 
                                usingBlock:^(ALAssetsGroup* group, BOOL* stop){
         if (group)
         {
             [group enumerateAssetsUsingBlock:^(ALAsset* asset, NSUInteger index, BOOL* innerstop)
              {
                  if (asset)
                  {
                       numAssets++;
                  }
              }];
         }
     }]; 
```

我可以看到，如果我只有 10 张图片/视频，但即使在移动设备上，也很容易拥有数千张。

此外，因为它是在块中的，所以我必须围绕此代码设置锁以使其同步，从而进一步减慢速度。

有 /got/ 是做这种事情的更好方法。任何人？

-肯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:22:27.383

确实有更好的方法：

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
int __block numAssets = 0;
[library enumerateGroupsWithTypes:ALAssetsGroupAll
    usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
        if (group)
            numAssets += group.numberOfAssets;
        else
            NSLog(@"Asset count is: %i", numAssets);
        }
        failureBlock:^(NSError *err) {
            NSLog(@"Failure");
        }]; 
```

# ruby-on-rails - 在使用 ActiveAdmin 验证之前使用 HABTM 关联编辑对象修改数据库

> ID：15658329
> 
> 赞同：5
> 
> 时间：2013-03-27T12:03:11.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, activeadmin

我在尝试更新具有`has_and_belongs_to_many`关联的模型时遇到问题。

假设`Post` `has_and_belongs_to_many` `Tag`, 并`Post`验证 title 和 的存在`Tags`。如果我更新`Post`，删除它的标题和标签，我会在`title`和中得到验证错误`tags`，好的。但是已经删除了在and`ActiveAdmin`之间建立关联的记录，因此，如果我离开编辑页面，数据库上的 将无效，而没有.`Post``Tag``Post``post``tags`

这是我的模型：

```
class Tag < ActiveRecord::Base
  attr_accessible :label
  has_and_belongs_to_many :posts
end 
```

* * *

```
class Post < ActiveRecord::Base
  attr_accessible :content, :title, :tag_ids
  has_and_belongs_to_many :tags
  validates_presence_of :content, :title, :tags
end 
```

* * *

```
ActiveAdmin.register Post do

  form do |f|
    f.inputs do
        f.input :title
        f.input :content
        f.input :image
        f.input :tags
    end

    f.buttons
  end
end 
```

我使用 selected [-rails](https://github.com/tsechingho/chosen-rails) gem，它允许用户取消选择帖子的所有标签。

总而言之，我的问题是：ActiveAdmin 在执行模型验证之前更新数据库上的关系。

这种行为有解决方案还是我做错了什么？

**编辑：**

这是我尝试更新没有标题和标签的帖子时的请求日志：

```
Started PUT "/admin/posts/8" for 127.0.0.1 at 2013-04-01 10:32:07 -0300
Processing by Admin::PostsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"amSbLlP/rgDrNn/N8lgq/KEaRXK1fMPShZDwpZ0QIJ4=", "post"=>{"title"=>"", "content"=>"content", "tag_ids"=>["", ""]}, "commit"=>"Update Post", "id"=>"8"}
  AdminUser Load (0.2ms)  SELECT `admin_users`.* FROM `admin_users` WHERE `admin_users`.`id` = 1 LIMIT 1
  Post Load (0.2ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`id` = 8 LIMIT 1
  Tag Load (0.2ms)  SELECT `tags`.* FROM `tags` INNER JOIN `posts_tags` ON `tags`.`id` = `posts_tags`.`tag_id` WHERE `posts_tags`.`post_id` = 8
   (0.1ms)  BEGIN
  SQL (12.3ms)  DELETE FROM `posts_tags` WHERE `posts_tags`.`post_id` = 8 AND `posts_tags`.`tag_id` IN (1, 2)
   (49.6ms)  COMMIT
   (0.1ms)  BEGIN
   (0.2ms)  ROLLBACK
  Post Load (0.3ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`id` = 8 LIMIT 1
  Tag Load (0.2ms)  SELECT `tags`.* FROM `tags` 
  Rendered /home/rodrigo/.rvm/gems/ruby-1.9.3-p125@blog/gems/activeadmin-0.5.1/app/views/active_admin/resource/edit.html.arb (192.3ms)
Completed 200 OK in 276ms (Views: 194.8ms | ActiveRecord: 63.3ms) 
```

**编辑2：**

好的，我确定 ActiveAdmin 有这个错误。

查看 ActiveRecord 行为，我认为仅使用模型类会破坏验证流程。看这个例子：

```
1.9.3p125 :064 > post = Post.find(8)
  Post Load (0.3ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`id` = 8 LIMIT 1
 => #<Post id: 8, title: "title", content: "content", created_at: "2013-03-27 13:13:20", updated_at: "2013-03-27 13:13:20", image: "extrato.bmp"> 
1.9.3p125 :065 > post.tags
  Tag Load (0.2ms)  SELECT `tags`.* FROM `tags` INNER JOIN `posts_tags` ON `tags`.`id` = `posts_tags`.`tag_id` WHERE `posts_tags`.`post_id` = 8
 => [#<Tag id: 1, label: "tag", created_at: "2013-02-25 18:32:45", updated_at: "2013-02-25 18:32:45">, #<Tag id: 2, label: "new", created_at: "2013-02-25 18:32:50", updated_at: "2013-02-25 18:32:50">] 
1.9.3p125 :066 > post.title = ""
 => "" 
1.9.3p125 :067 > post.save #<<<<<<< It's invalid on title
 => false 
1.9.3p125 :068 > post.tags = []  #<<<<<<< This shouldnt trigger database update
   (0.3ms)  BEGIN
  SQL (0.5ms)  DELETE FROM `posts_tags` WHERE `posts_tags`.`post_id` = 8 AND `posts_tags`.`tag_id` IN (1, 2)
   (55.5ms)  COMMIT
 => [] 
1.9.3p125 :069 > post.save #<<<<<<<  It's invalid on title AND TAGS
   (0.2ms)  BEGIN
   (0.2ms)  ROLLBACK
 => false 
1.9.3p125 :070 > post.reload
  Post Load (0.2ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`id` = 8 LIMIT 1
 => #<Post id: 8, title: "title", content: "content", created_at: "2013-03-27 13:13:20", updated_at: "2013-03-27 13:13:20", image: "extrato.bmp"> 
1.9.3p125 :071 > post.valid? #<<<<<<< Now, I have this model in invalid state 
  Tag Load (0.6ms)  SELECT `tags`.* FROM `tags` INNER JOIN `posts_tags` ON `tags`.`id` = `posts_tags`.`tag_id` WHERE `posts_tags`.`post_id` = 8
 => false 
```

在进行任何数据库更新之前，有什么方法可以更新帖子属性（包括标签）并验证模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T18:38:40.270

你可以使用这个 gem：[https ://github.com/MartinKoerner/deferred_associations](https://github.com/MartinKoerner/deferred_associations)

延迟关联将修复此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:19:16.177

@Rodrigo 我能够在没有活动管理员的情况下在本地重现您的问题，如果您看到 [此处][1]，问题实际上是使用 HABTM 关系时的默认操作之一

[1]：[http](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many) ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many 它说：

集合=对象

```
Replaces the collection’s content by deleting and adding objects as appropriate. 
```

所以显然你需要覆盖这个操作

这是一个例子：

[在 has_many :through 关系上覆盖 ActiveRecord << 运算符，以接受连接模型的数据](https://stackoverflow.com/questions/12846881/override-activerecord-operator-on-has-many-through-relationship-to-accept-d)

让我知道如何帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-16T21:12:23.633

因此，对于遇到相同问题的任何人，我找到了一种解决方法：您可以在 has_and_belongs_to_many 关联中定义 before_remove 并引发异常，然后您可以在 ActiveAdmin 中捕获该异常。

为此，它将是

```
class Post < ActiveRecord::Base
  attr_accessible :content, :title, :tag_ids
  has_and_belongs_to_many :tags, before_remove: :check_something
  validates_presence_of :content, :title, :tags
end

def check_something(agent)
    if self.tags.size == 1
      raise ActiveModel::MissingAttributeError.new 'something'
    end
end 
```

更多信息：[https ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-27T12:52:53.010

我建议添加一个 tmp 变量并在其中存储值。然后，如果验证通过，您应该将它们移至数据库。

这是一个例子：

你的`models/article.rb`：

```
class Article < ActiveRecord::Base
  validate :author_presence
  has_and_belongs_to_many :authors

  attr_writer :tmp_author_ids

  def tmp_author_ids
    @tmp_author_ids || author_ids
  end

  def author_presence
    if tmp_author_ids.reject(&:blank?).empty?
      errors.add(:tmp_author_ids, 'Author is missing')
    else
      self.author_ids = tmp_author_ids
    end
  end
end 
```

你的`admin/article.rb`, 块`form`：

```
f.input :tmp_author_ids, as: :select, multiple: true, collection: Author.all, label: 'Authors' 
```

而已

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-03T18:44:46.117

如果需要，您可以在 active_admin 中重新定义更新操作，以防止保存空标签，类似于这种风格

```
ActiveAdmin.register Post do

  controller do
    def update
      if params[:post][:tag_ids] == ["", ""]
        flash.now[:alert] = "You can't remove all tags"
        render :edit
      else
        super
      end
    end
  end
...
end 
```

我认为模型中的这些东西可以删除

```
attr_accessor :new_tag_ids

validate :validate_new_tags_ids

after_save :update_tags

def update_tags
    self.tag_ids = @new_tag_ids if defined?(@new_tag_ids)
    @new_tag_ids = nil
end

private 
def validate_new_tags_ids
    errors[:tags] << "can't be blank (2)" if @new_tag_ids.blank? 
end 
```

# excel - 跨工作簿的 vba Vlookup

> ID：15658334
> 
> 赞同：2
> 
> 时间：2013-03-27T12:03:30.247
> 
> 标签：excel, vba

我似乎在下面的语法行中有错误。我认为问题在于工作簿 book1 的范围参数。我不知道为什么。基本上我想在 2 个工作簿中查找。

该代码是从工作簿 - book1 调用的。就在这行代码工作簿之前 - book2 被激活。两个工作簿都是打开的。我通过用变体变量替换左侧来捕获错误代码 2015。

感谢您对此 vlookup 问题的任何帮助。谢谢。

```
 Cells(j, c + 2).value = [VLookup(workbooks(book2).sheets(5).range(Cells(j, c + 1)), workbooks(book1).sheets(4).range(cells(row1+2,1),cells(row2,col1)), 3, false)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:03:35.773

您只提供了一段代码，但首先要确保您已定义所有变量。我还添加了更多内容来简化并可能有助于捕获错误。

```
Sub VlookMultipleWorkbooks()
Dim lookFor as String
Dim srchRange as Range
Dim book1 as Workbook
Dim book2 as Workbook

'Set some Workbook variables:
Set book1 = Workbooks("Book 1 Name") '<edit as needed
Set book2 = Workbooks("Book 2 Name") '<edit as needed

'Set a string variable that we will search for:
lookFor = book2.sheets(5).range(Cells(j, c + 1))

'Define the range to be searched in Book1.Sheets(4):
Set srchRange = book1.Sheets(4).Range(cells(row1+2,1).Address, cells(row2,col1).Address)

'This assumes that the Book2 is Open and you are on the desired active worksheet:
ActiveSheet.Cells(j, c + 2).value = _
         Application.WorksheetFunction.VLookup(lookFor, _
         book1.Sheets(4).Range(srchRange.Address), 3, False)

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T06:28:35.400

Below is a simple example.

```
Sub VlookMultipleWorkbooks()

    Dim lookFor As Range
    Dim srchRange As Range

    Dim book1 As Workbook
    Dim book2 As Workbook

    Dim book2Name As String
    book2Name = "test.xls"    'modify it as per your requirement

    Dim book2NamePath As String
    book2NamePath = ThisWorkbook.Path & "\" & book2Name

    Set book1 = ThisWorkbook

    If IsOpen(book2Name) = False Then Workbooks.Open (book2NamePath)
    Set book2 = Workbooks(book2Name)

    Set lookFor = book1.Sheets(1).Cells(2, 1)   ' value to find
    Set srchRange = book2.Sheets(1).Range("B:C")    'source

    lookFor.Offset(0, 1).Value = Application.VLookup(lookFor, srchRange, 2, False)

End Sub

Function IsOpen(strWkbNm As String) As Boolean

    On Error Resume Next

    Dim wBook As Workbook
    Set wBook = Workbooks(strWkbNm)

    If wBook Is Nothing Then    'Not open
        IsOpen = False
        Set wBook = Nothing
        On Error GoTo 0
    Else
        IsOpen = True
        Set wBook = Nothing
        On Error GoTo 0
    End If

End Function 
```

![enter image description here](../Images/d07a60e0f088b9b604b08694ac7e8f9c.png)

# ruby-on-rails - 如何从 String 上的 Monkeypath 内部设置会话变量

> ID：15658338
> 
> 赞同：0
> 
> 时间：2013-03-27T12:03:39.623
> 
> 标签：ruby-on-rails, delayed-job, pg-search

我收到以下错误...

```
pry("serp")> session[self.to_sym] = "closed"
NameError: undefined local variable or method `session' for "serp":String 
```

...当我尝试从 String 类的猴子补丁中设置会话变量时。（这是必要的，以便我可以跟踪延迟工作中的工作进度，以便仅在准备好时加载我的搜索结果。）

如何在那里设置会话变量？还是有更好的解决方案？

我的代码...

**/config/initializers/string.rb**：

```
class String
  def multisearch
    result = PgSearch.multisearch(self)
    session[self.to_sym] = "closed"
    return result
  end
end 
```

**/app/views/searches/show.html.haml**：

```
- if @term.present? && session[@term.to_sym] == "open"
  %h1 Search In Progress
  # then show spinning wheel animation etc
- else
  %h1 Search Results
  = form_tag search_path, :method => :get do
    = text_field_tag "term", "Search term"
    = submit_tag "Search"
  - unless @results.blank?
    # then show the search results etc 
```

**/app/views/layouts/application.html.haml：

```
!!!
%html
  %head
    - if @term.present? && session[@term.to_sym] == "open"
      %meta{:content => "5", "http-equiv" => "refresh"}/ 
```

**/app/controllers/searches_controller.rb**：

```
class SearchesController < ApplicationController
  respond_to :html
  filter_access_to :all  
  def show
    if @term = params[:term]
      session[@term.to_sym] = "open"
      @results = @term.delay.multisearch
      # other stuff...
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:50:35.157

答案是停止与 Ruby 的 OO 特性作斗争，并构建一个可以拥有我需要访问的所有内容的搜索模型。

**/app/models/search.rb**：

```
class Search < ActiveRecord::Base
  serialize :results
  def multisearch
    results = PgSearch.multisearch(self.term).to_a
    self.update_attributes :results => results, :status => "closed"
    return results
  end  
end 
```

** /app/controllers/searches_controller.rb**:

```
class SearchesController < ApplicationController  
  respond_to :html
  def show
    if params[:term].present?
      @search = Search.find_or_create_by_term(params[:term])
      if @search.status.blank?
        @search.delay.multisearch
        @search.status = "open"
        @search.save
      elsif @search.status == "closed"
        @search.update_attributes :status => nil
      end
    end
  end
end 
```

**/app/views/searches/show.html.haml**：

```
- if @search.present? && @search.status == "open"
  # progress bar etc
- else
  = form_tag search_path, :method => :get do
    = text_field_tag "term", "Search term"
    = submit_tag "Search"
- if @search.present? && @search.status.nil?
  - unless @search.results.blank?
    # show the search results 
```

**/app/views/layouts/application.html.haml**：

```
- if @search.present? && @search.status == "open"
  %meta{:content => "5", "http-equiv" => "refresh"}/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:06:38.833

将会话作为参数传递。

```
class String
  def multisearch session
    result = PgSearch.multisearch(self)
    session[self.to_sym] = "closed"
    return result
  end
end 
```

然后

```
@term.delay.multisearch(session) 
```

# php - 如何在php中使用搜索和替换句子中的所有匹配词

> ID：15658339
> 
> 赞同：3
> 
> 时间：2013-03-27T12:03:40.017
> 
> 标签：php, regex, preg-replace

我必须搜索并替换句子中所有以 @ 和 # 开头的单词。您能否让我知道在 PHP 中执行此操作的最佳方法。我试过了

`preg_replace('/(\@+|\#+).*?(?=\s)/','--', $string);`

这将只解决一个句子中的一个单词。我希望所有的比赛都被替换。

我不能`g`像在 perl 中一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:17:31.050

[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)默认替换所有匹配项。如果不这样做，则说明您的模式或数据存在问题。

试试这个模式：

```
(?<!\S)[@#]+\w+ 
```

`(?<!\S)`- 如果模式前面有非空白字符，则不匹配。

`[@#]+`- 匹配一个或多个`@`and `#`。

`\w+`- 匹配一个或多个单词字符（字母、数字、下划线）。这将保留标点符号。例如，`@foo.`将替换为`--.`. 如果你不想要这个，你可以改用`\S+`它，它匹配所有不是空格的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:14:10.230

尝试这个 ：

```
 $string     = "@Test let us meet_me@noon see #Prasanth";
  $new_pro_name = preg_replace('/(?<!\S)(@\w+|#\w+)/','--', $string);
  echo $new_pro_name; 
```

`@`这将替换所有以OR开头的单词`#`

输出：`-- let us meet_me@noon see --`

如果要在`@`OR之后替换单词，`#`即使它位于单词的中间。

```
 $string     = "@Test let us meet_me@noon see #Prasanth";
  $new_pro_name = preg_replace('/(@\w+|#\w+)/','--', $string);
  echo $new_pro_name; 
```

输出：`-- let us meet_me-- see --`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:14:54.610

**以字符开头**的单词意味着它在该字符之前有一个空格。尝试这样的事情：

```
/(?<!\S)[@#].*(?=[^a-z])/ 
```

为什么不使用`(?=\s)`？因为如果单词后面有一些标点符号，它就不是单词的一部分。注意：您可以用`[^a-z]`单词中任何不允许的字符列表替换。

但要小心，有两种特殊情况不起作用。您必须`preg_replace`连续使用 3 个，另外两个用于字符串开头和结尾的单词：

```
/^[@#].*(?=[^a-z])/
/(?<!\S)[@#].*$/ 
```

# c++ - hbrBackground 中的颜色窗口

> ID：15658341
> 
> 赞同：11
> 
> 时间：2013-03-27T12:03:42.813
> 
> 标签：c++, windows

```
WNDCLASS wc;
...
wc.hbrBackground = (HBRUSH)GetStockObject(COLOR_WINDOW+1); 
```

我无法理解什么是`+1`为了什么是`HBRUSH`什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T00:31:33.517

你不是说吗？

```
wc.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1); 
```

[GetStockObject](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144925%28v=vs.85%29.aspx)获取库存画笔、钢笔、字体或调色板之一。您不应该将 COLOR_WINDOW 与它一起使用。

使用其中一个库存画笔，因此对于白色背景，您可以使用...

```
wc.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH); 
```

无论什么作品，使用它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T07:46:20.813

系统颜色定义在`Winuser.h`

```
#define CTLCOLOR_MSGBOX 0

#define CTLCOLOR_EDIT 1

#define CTLCOLOR_LISTBOX 2

#define CTLCOLOR_BTN 3

#define CTLCOLOR_DLG 4

#define CTLCOLOR_SCROLLBAR 5

#define CTLCOLOR_STATIC 6

#define CTLCOLOR_MAX 7

#define COLOR_SCROLLBAR 0

#define COLOR_BACKGROUND 1

#define COLOR_ACTIVECAPTION 2

#define COLOR_INACTIVECAPTION 3

#define COLOR_MENU 4

#define COLOR_WINDOW 5

#define COLOR_WINDOWFRAME 6

#define COLOR_MENUTEXT 7

#define COLOR_WINDOWTEXT 8

#define COLOR_CAPTIONTEXT 9

#define COLOR_ACTIVEBORDER 10

#define COLOR_INACTIVEBORDER 11

#define COLOR_APPWORKSPACE 12

#define COLOR_HIGHLIGHT 13

#define COLOR_HIGHLIGHTTEXT 14

#define COLOR_BTNFACE 15

#define COLOR_BTNSHADOW 16

#define COLOR_GRAYTEXT 17

#define COLOR_BTNTEXT 18

#define COLOR_INACTIVECAPTIONTEXT 19

#define COLOR_BTNHIGHLIGHT 20

#if(WINVER >= 0x0400)

#define COLOR_3DDKSHADOW 21

#define COLOR_3DLIGHT 22

#define COLOR_INFOTEXT 23

#define COLOR_INFOBK 24

#endif /* WINVER >= 0x0400 */

#if(WINVER >= 0x0500)

#define COLOR_HOTLIGHT 26

#define COLOR_GRADIENTACTIVECAPTION 27

#define COLOR_GRADIENTINACTIVECAPTION 28

#if(WINVER >= 0x0501)

#define COLOR_MENUHILIGHT 29

#define COLOR_MENUBAR 30

#endif /* WINVER >= 0x0501 */

#endif /* WINVER >= 0x0500 */

#if(WINVER >= 0x0400)

#define COLOR_DESKTOP COLOR_BACKGROUND

#define COLOR_3DFACE COLOR_BTNFACE

#define COLOR_3DSHADOW COLOR_BTNSHADOW

#define COLOR_3DHIGHLIGHT COLOR_BTNHIGHLIGHT

#define COLOR_3DHILIGHT COLOR_BTNHIGHLIGHT

#define COLOR_BTNHILIGHT COLOR_BTNHIGHLIGHT

#endif /* WINVER >= 0x0400 */ 
```

因此，正如@CodyGray 定义的那样，添加 1 以区分 COLOR_SCROLLBAR 和 NULL HBRUSH。而且，（引用@CodyGray 的评论并纠正我的解决方案）“HBRUSH 是 C 风格的演员，你应该使用`static_cast<HBRUSH>`而不是 C 风格的演员。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T12:31:09.043

COLOR_WINDOW 是一个数字。当您向其添加 1 时，您会增加数字。(HBRUSH) 用于将数字转换为颜色代码。

# groovy - 使用geb上传文件

> ID：15658345
> 
> 赞同：1
> 
> 时间：2013-03-27T12:04:08.457
> 
> 标签：groovy, selenium-webdriver, geb

全部！我想在我的测试中上传文件。在[Geb-book](http://www.gebish.org/manual/0.9.0-RC-1/navigator.html#file_upload)上写下它是如何制作的，但它对我不起作用。

我有领域：

```
<input id="bla-bl-bla" type="file" name="foo-foo-foo"> 
```

和按钮：

```
<input type="submit" value="Загрузить файл" name="bar-bar-bar"> 
```

我尝试：

```
 def "choose banner format"() {
    when: "choose fake format"
        $("select", name: Const.namespaceId + "createBanner:j_id83:j_id91")
    and: "wait load"
        waitFor(25, 2) { $("input", name : Const.namespaceId + "createBanner:upload:j_id256")}
    then: "can upload file"
        $("input", id : "name") << name_banner
        String file_1 = "/full/path/to/file"
        String uploadfile = "foo-foo-foo"
        $("input").uploadfile  =  banner
        $("input", name : "bar-bar-bar").click()
        def createActLink = $("input", name : "save")
        createActLink.click()
        sleep 20000
} 
```

但我有错误：

```
Expected a condition, but found an assignment. Did you intend to write '==' ? 
```

Geb：0.9.0-RC-1 Groovy：2.1.1 浏览器：FF 19

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-13T11:31:44.317

首先，您应该认真考虑使用 Page 模型重写此代码，如此[处](http://www.gebish.org/manual/current/#pages)所述。它会让你的生活更轻松。虽然如果您只想让代码正常工作，请尝试这样的事情......

```
def "choose banner format"() {

    given:
        String file_1 = "/full/path/to/file"
        String uploadfile = "foo-foo-foo"
    when: 
        //if j_id83 and j_id91 are integers, caste them to strings!
        $("select", name: Const.namespaceId.toString() + "createBanner:j_id83:j_id91")
        waitFor(25, 2) { $("input", name : Const.namespaceId + "createBanner:upload:j_id256")}
        $("input", id : "name") << name_banner
        $("input").uploadfile  =  banner
        $("input", name : "bar-bar-bar").click()
        waitFor{ $("input", name : "save") }
        def createActLink = $("input", name : "save")
        createActLink.click()
    then:
        waitFor{
          // choose an element to refresh on page after input is clicked   
        } 
} 
```

# facebook - 上传照片并标记朋友

> ID：15658352
> 
> 赞同：1
> 
> 时间：2013-03-27T12:04:23.897
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在尝试在用户墙上发布照片并标记朋友，但我得到了这个：

> 致命错误：未捕获的 OAuthException：(#324) 需要在第 1238 行的 /home/vhosts/somesite.com/src/base_facebook.php 中抛出上传文件

这是我的代码

```
<?php
require_once "./src/facebook.php";

$app_id = "xxxxxxxx";
$app_secret = "xxxxxxxxxx";

// Init facebook api.
$facebook = new Facebook(array(
        'appId' => $app_id,
        'secret' => $app_secret,
        'cookie' => true
));

// Get the url to redirect for login to facebook
// and request permission to write on the user's wall.
$login_url = $facebook->getLoginUrl(
    array('scope' => 'publish_stream')
);

$loginUrl = $facebook->getLoginUrl($params);

// If not authenticated, redirect to the facebook login dialog.
// The $login_url will take care of redirecting back to us
// after successful login.
if (! $facebook->getUser()) {
    echo <<< EOT
<script type="text/javascript">
top.location.href = "$login_url";
</script>;
EOT;

    exit;
}

// Do the wall post.
$args = array(
  'message' => 'Test Message',
  'image'   => '@' . realpath('http://imageurl.com'),
  'tags'    => array(
     array(
      'tag_uid'=> $friend1_uid,
      'x'      => $x1,
      'y'      => $y1,
     ),
     array(
      'tag_uid' => $friend2_uid,
      'x'       => $x2,
      'y'       => $y2,
     ),/*...*/
   ),
);

$data = $facebook->api('/me/photos', 'post', $args);

// Upload Support.
$facebook = new Facebook(array(
  /*..*/
  'fileUpload'  => true,
));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:17:48.820

```
'image'   => '@' . realpath('http://imageurl.com'), 
```

realpath 用于*文件系统*路径，而不是 URL。

将其更改为本地文件系统路径 - 或者，如果您想从公开可用的 HTTP URL 上传照片，请使用参数名称`url`而不是`source`并将 URL 作为值。

# php - 如何在 Zend Framework 2 中为 RegEx 路由的 RegEx 设置 (UTF8) 修饰符？

> ID：15658354
> 
> 赞同：4
> 
> 时间：2013-03-27T12:04:33.190
> 
> 标签：php, routes, zend-framework2, pcre, modifier

我在使用[URI 中的（德语）特殊字符时遇到问题，](https://stackoverflow.com/questions/15634913/uris-with-german-special-characters-dont-work-error-404-in-zend-framework-2)并想尝试使用[RegEx Route](http://framework.zend.com/manual/2.1/en/modules/zend.mvc.routing.html#zend-mvc-router-http-regex)和UTF-8的[PCRE 模式修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)`u`来解决它。

```
'router' => array(
    'routes' => array(
        // ...
        'city' => array(
            'type'  => 'regex',
            'options' => array(
                'regex' => '/catalog/(?<city>[a-zA-Z0-9_-äöüÄÖÜß]*)\/u',
                'defaults' => array(
                    'controller' => 'Catalog\Controller\Catalog',
                    'action'     => 'list-sports',
                ),
                'spec'  => '/catalog/%city%',
            ),
            'may_terminate' => true,
        ),
    ),
), 
```

但是当我设置它时，路由完全停止工作（错误 404）——既不适用于带有特殊字符的 URI，也不适用于没有特殊字符的 URI。

如何正确设置修饰符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T13:35:25.913

因为我已经打开了这个，所以这里有一个可以解决问题的处理程序。

```
<?php
namespace Application\Mvc\Router\Http;

use Zend\Mvc\Router\Http\Regex;
use Zend\Mvc\Router\Http\RouteMatch;
use Zend\Stdlib\RequestInterface as Request;

class UnicodeRegex extends Regex
{
    /**
     * match(): defined by RouteInterface interface.
     *
     * @param  Request $request
     * @param  integer $pathOffset
     * @return RouteMatch
     */
    public function match(Request $request, $pathOffset = null)
    {
        if (!method_exists($request, 'getUri')) {
            return null;
        }

        $uri  = $request->getUri();
        // path decoded before match
        $path = rawurldecode($uri->getPath());

        // regex with u modifier    
        if ($pathOffset !== null) {
            $result = preg_match('(\G' . $this->regex . ')u', $path, $matches, null, $pathOffset);
        } else {
            $result = preg_match('(^' . $this->regex . '$)u', $path, $matches);
        }

        if (!$result) {
            return null;
        }

        $matchedLength = strlen($matches[0]);

        foreach ($matches as $key => $value) {
            if (is_numeric($key) || is_int($key) || $value === '') {
                unset($matches[$key]);
            } else {
                $matches[$key] = $value;
            }
        }

        return new RouteMatch(array_merge($this->defaults, $matches), $matchedLength);
    }
} 
```

假设您将文件放在`Application/Mvc/Router/Http/UnicodeRegex`路由定义中应该如下所示

```
'router' => array(
    'routes' => array(
        // ...
        'city' => array(
            'type'  => 'Application\Mvc\Router\Http\UnicodeRegex',
            'options' => array(
                'regex' => '/catalog/(?<city>[\p{L}]+)',
                // or if you prefer, your original regex should work too
                // 'regex' => '/catalog/(?<city>[a-zA-Z0-9_-äöüÄÖÜß]*)',
                'defaults' => array(
                    'controller' => 'Catalog\Controller\Catalog',
                    'action'     => 'list-sports',
                ),
                'spec'  => '/catalog/%city%',
            ),
            'may_terminate' => true,
        ),
    ),
), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:18:49.803

出色地，

我想你可以像许多其他人遇到同样的问题一样轻松地解决它。所以看看其中的一些：

## [* 正则表达式中的 UTF-8](https://stackoverflow.com/a/6408143/2215452)

使用以下修饰符，如`\\s`,`\\p{L}`和`\\u`来帮助您。我希望它能解决！祝你好运。

**编辑**

看我自己的测试：

```
<?php

    $toss_the_dice = utf8_decode ("etc/catalog/Nürnberg");
    preg_match ('/\/catalog\/([\\s\\p{L}]*)/m', $toss_the_dice, $dice);
    echo utf8_encode ($dice[1]);

// Now it prints
// Nürnberg

?> 
```

你能意识到吗？

**编辑 2**

它可以对你更好！

```
<?php
    $toss_the_dice = "etc/catalog/Nürnberg";
    preg_match ('/\/catalog\/([\\s\\p{L}]*)/u', $toss_the_dice, $dice);
    echo $dice[1];

// Now it also prints
// Nürnberg

?> 
```

# android - 在 Facebook 页面上发布消息

> ID：15658355
> 
> 赞同：-3
> 
> 时间：2013-03-27T12:04:39.110
> 
> 标签：android, facebook-graph-api

如何在 Android 中的 Facebook 页面时间轴上发布消息？这允许 Graph API？感谢任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:12:46.060

你需要使用`Facebook Android SDK` [available here](http://developers.facebook.com/android/)。阅读[文档以开始使用](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)。

这是另一个[为您提供信息的好教程](http://www.codeproject.com/Articles/462526/Easy-Facebook-Android-SDK-Simple-Tutorial)。

# ajax - 基于 URI 的 Ajax 加载 Div（而不是 onClick）

> ID：15658356
> 
> 赞同：0
> 
> 时间：2013-03-27T12:04:40.620
> 
> 标签：ajax, jquery

我正在转换一个旧的 Web 应用程序。在旧版本中，有一个页面会在用户导航到该页面时显示一些默认内容。该页面中有一个链接，它重新加载页面，但带有一个查询字符串`showform=yes`，导致显示表单而不是内容。

在旧版本中，页面是这样的：

*   `http://site.com/directory.asp`- 用于包含内容的主页
*   `http://site.com/directory.asp?showform=yes`- 当用户单击按钮以显示表单时调用。

在新版本的 web 应用程序中，相同的页面使用 ajax 设置，因为有一个 div 包含有人访问时的默认内容`http://site.com/directory`。有一个按钮，当单击该按钮时（从该页面内），将调用一些 ajax 来交换内容并显示表单。URI/查询字符串没有变化。

这是我的问题 - 在网络应用程序的旧版本中，还有一些其他页面将用户直接链接到带有表单 ( `http://site.com/directory.asp?showform=yes`) 的页面，例如，一旦到达 directory.asp，他们就不需要单击按钮.

根据我现在如何设置该页面，例如通过 ajax 在 div 中显示表单，我是否可以模仿这种行为？）

最初我认为也许可以基于 URI 中存在的查询字符串或锚点来触发 ajax，`/directory#form`但我不确定这是否可能。

我更喜欢不依赖 jQuery 的解决方案，但如果没有其他选择，我会考虑它。

提前感谢您的关注，如果我能进一步澄清，请告诉我。

谢谢，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:59:48.887

是的，您可以根据可以通过查询字符串设置的布尔变量触发 AJAX 调用。布尔变量的默认值为 false，这会强制用户单击按钮以刷新表单部分。

但是当返回到同一页面时，查询字符串会将布尔变量设置为 true，从而从您的 JSP/ASP 或 HTML 调用包含 AJAX 代码的 javascript 函数。

# c - 显示链接列表时出现运行时错误的原因可能是什么

> ID：15658357
> 
> 赞同：2
> 
> 时间：2013-03-27T12:04:40.537
> 
> 标签：c, linked-list, runtime-error

```
#include <stdio.h>
#include <stdlib.h> 
```

定义结构

```
typedef struct node{
char name[20];
struct node *next;
}Node;

Node *head = NULL;

void insert ();

int main (){

Node *student1, *student2;
Node *walker;
int i;

head = (Node*)malloc(sizeof(Node));

for (i=0; i<3; i++) insert();

walker = head;

while(walker != NULL){
    printf ("%s\n", walker->name);
    walker = walker->next;  
}
return 0; 
```

这个循环工作正常，但在程序崩溃之前最后添加了一些垃圾

```
} 
```

在开头插入新节点

```
void insert(){
Node* nn;

nn = (Node*)malloc(sizeof(Node));

printf ("Name: ");
scanf ("%s", nn->name);

nn->next = head;
head = nn;

return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:06:52.117

由于`head->next`未初始化，因此链表末尾没有空终止符。这会导致未定义的行为。

```
/* In main() */

head = malloc(sizeof(Node));
head->next = NULL; 
```

# doctrine-orm - 学说查询语言中的一些顺序

> ID：15658358
> 
> 赞同：1
> 
> 时间：2013-03-27T12:04:43.737
> 
> 标签：doctrine-orm, doctrine

我有一个查询如下：

```
SELECT t.id, t.name, count(i.id) FROM Acme\TestBundle\Entity\Tags t
LEFT JOIN t.items i WITH i.status=1 AND (SELECT count(img.id) FROM Acme\TestBundle\Entity\ItemsImages img WHERE img.item=i.id) > 0
GROUP BY t.id
ORDER BY COUNT (i.id) DESC 
```

此查询在没有 ORDER BY 子句的情况下工作正常。每当我添加此子句时，它都会给我错误：

```
[Syntax Error] line 0, col 297: Error: Expected end of string, got '(' 
```

ORDER BY 适用于列名，但使用 count(i.id) 之类的列不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:17:02.530

要按聚合值排序，您需要先`SELECT`对其进行排序，然后将其用于`ORDER BY`：

```
SELECT
    t.id,
    t.name,
    count(i.id) AS tags_count
FROM 
    Acme\TestBundle\Entity\Tags t
...
ORDER BY
    tags_count DESC 
```

# input - 节点本地映射减少作业

> ID：15658360
> 
> 赞同：1
> 
> 时间：2013-03-27T12:04:45.813
> 
> 标签：input, hadoop, mapreduce, hdfs, localityofreference

我目前正在尝试编写一个 map-reduce 作业，其中输入数据不在 HDFS 中，并且基本上无法加载到 HDFS 中，因为使用数据的程序不能使用来自 HDFS 的数据，并且有太多可以将其复制到 HDFS 中，至少每个节点 1TB。

所以我在集群中的 4 个节点上都有 4 个目录。理想情况下，我希望我的映射器只接收这 4 个本地目录的路径并读取它们，使用类似 file:///var/mydata/... 的东西，然后 1 个映射器可以处理每个目录。即总共16个映射器。

但是，为了能够做到这一点，我需要确保每个节点正好有 4 个映射器，并且正好有 4 个映射器被分配到该机器的本地路径。这些路径是静态的，因此可以硬编码到我的文件输入格式和记录读取器中，但是我如何保证给定的拆分最终出现在具有已知主机名的给定节点上。如果它在 HDFS 中，我可以使用 FileInputFormat 的变体设置 isSplittable 为 false，hadoop 会处理它，但由于所有数据都是本地的，这会导致问题。

基本上，我想要的是能够在集群中的每个节点上抓取一次本地目录结构，处理这些目录中的 SSTables 集合并发出行（在映射器上），并将结果（在 reduce 步骤中）减少到HDFS 用于进一步的批量处理。

我注意到 inputSplits 提供了一个 getLocations 函数，但我相信这并不能保证执行的位置，只会优化它，并且如果我尝试在每个映射器中使用 file:///some_path 我需要确保确切的位置，否则我可能会结束重复阅读一些目录，而其他根本不阅读。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:55:39.750

我看到有三种方法可以做到这一点。

1.) 只需将数据加载到 HDFS 中，您不想这样做。但值得一试，因为它将对未来的处理有用

2.) 您可以使用 NLineInputFormat。使用每个节点中输入文件的 URL 创建四个不同的文件。

```
file://192.168.2.3/usr/rags/data/DFile1.xyz
....... 
```

您将这些文件加载​​到 HDFS 并在这些文件上编写程序以使用这些 URL 访问数据数据并处理您的数据。如果您将 NLineInputFormat 与 1 行一起使用。您将处理 16 个映射器，每个映射处理一个专有文件。这里唯一的问题，一个节点上的数据很有可能在另一个节点上处理，但是不会有任何重复处理

3.) 您可以进一步优化上述方法，分别加载上述四个带有 URL 的文件。在加载这些文件中的任何一个时，您可以删除其他三个节点，以确保文件准确地转到本地存在数据文件的节点。加载时选择复制为 1，以便不复制块。这个过程会极大地增加启动的地图处理本地文件的概率。

干杯抹布

# java - 无法在jsp中处理结果集

> ID：15658362
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:04:47.070
> 
> 标签：java, sql, jsp, resultset

我试图在 jsp 中调用一个返回结果集的方法。喜欢，

在 JSP 中：

```
OracleResultSet rs = null;
rs = getMyValuesHere();
out.println("rs:"+rs); 
// rs is not null.Something like oracle.jdbc.driver.OracleResultSetImpl@1f1e1f 
```

如何从结果集中检索我的值？因为甚至没有进入这个while循环。,

```
while(rs.next()) {

} 
```

方法是：

```
<%!
public OracleResultSet getMyValuesHere()
{
    OracleConnection connection = null;
    OraclePreparedStatement ptmst = null;
    OracleResultSet rs = null;
    OracleCallableStatement cstmt = null;
    StringBuffer sql = new StringBuffer();
    //My query goes here
    connection = (OracleConnection) TransactionScope.getConnection();
    sql.append("SELECT DISTINCT  something.... ");
    rs = (OracleResultSet)ptmst.executeQuery(); 
   return rs;
}
%> 
```

我尝试将数据打印在`getMyValuesHere()`

```
rs = (OracleResultSet)ptmst.executeQuery();     
while (rs.next()) 
{
// rs.getString(1))  -- I was able to print this.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:43:56.120

您没有在程序中指定数据库驱动程序。在程序中包含驱动程序，然后尝试一次

# java - onCreateOptionsMenu 没有在 Fragment 类中被调用

> ID：15658375
> 
> 赞同：0
> 
> 时间：2013-03-27T12:05:32.847
> 
> 标签：java, android

```
public class FragmentClass extends android.support.v4.app.Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setHasOptionsMenu(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater,
                 ViewGroup container, Bundle savedInstanceState) {  

    }   

    @Override 
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        Log.d("Does", "get called");
        inflater.inflate(R.menu.menuItem, menu);
    } 
```

}

`onCreateOptionsMenu`即使我已将方法放在`setHasOptionsMenu(true)`我的方法中，也永远不会调用`onCreate`方法。

这就是我的`Activity class`样子。

[https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/fragments/FragmentChangeActivity.java](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/fragments/FragmentChangeActivity.java)

更多更新：这是我里面的方法`Fragment Class`。

```
@Override
public void onCreateOptionsMenu(Menu menu,MenuInflater inflater){
    inflater.inflate(R.menu.facesheet, menu);
    super.onCreateOptionsMenu(menu,inflater);
} 
```

这是在 BaseActivity 类中。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
      getSupportMenuInflater().inflate(R.menu.main, menu);
      return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:39:14.670

我认为您没有覆盖正确的方法。

试试这个代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.menuItem, menu);
    return true;
} 
```

[来源链接。](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/BaseActivity.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T16:17:18.087

额外尝试调用`setMenuVisibility(true);`

# neo4jclient - 如何在 neo4j .net 客户端中返回两个带有密码查询的集合

> ID：15658376
> 
> 赞同：3
> 
> 时间：2013-03-27T12:05:35.727
> 
> 标签：neo4jclient

我想在一个查询“标签”和“项目”中返回两个集合，其中每个标签可以有 0..many 项目。看起来如果我使用投影，它将假定一个包含两列而不是两个集合的集合，对吗？有没有更好的方法来运行这个搜索查询？

我越来越`"the query response contains columns Tags, Items however ...anonymous type does not contain settable properties to receive this data"`

```
var query =  client
    .Cypher
    .StartWithNodeIndexLookup("tags", "tags_fulltext", keyword)
    .Match("tags<-[:TaggedWith]-items")
    .Return((items, tags) => new 
    {
        Tags = tags.As<Tag>(),
        Items = items.As<Item>()
    });

var results = await query.ResultsAsync;

return new SearchResult
{
    Items = results.Select(x => x.Items).ToList(),
    Tags = results.Select(x => x.Tags).Distinct().ToList()
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T01:28:17.503

# 选项1

*场景：*您想要检索与关键字匹配的所有标签，然后为每个标签检索每个项目（以仍将它们链接到标签的方式）。

首先，这一行：

```
.StartWithNodeIndexLookup("tags", "tags_fulltext", keyword) 
```

应该：

```
.StartWithNodeIndexLookup("tag", "tags_fulltext", keyword) 
```

也就是说，身份不应该`tag`是`tags`。这是因为该`START`子句产生一组节点，每个节点都是 a `tag`，而不是一组称为`tags`. 语义，但它使下一步的事情变得更简单。

现在我们调用它`tag`而不是`tags`，我们将`MATCH`子句更新为：

```
.Match("tag<-[:TaggedWith]-item") 
```

这就是说“对于集合中的每个标签，去寻找附加到它的每个项目”。同样，“item”是单数的。

现在让我们返回它：

```
.Return((tag, item) => new 
{
    Tag = tag.As<Tag>(),
    Items = item.CollectAs<Item>()
}); 
```

在这里，我们将每个“项目”*收集*到一组“项目”中。我在该代码中对单数与复数的使用非常具体。

生成的 Cypher 表如下所示：

```
-------------------------
| tag      | items      |
-------------------------
| red      | A, B, C    |
| blue     | B, D       |
| green    | E, F, G    |
------------------------- 
```

最终代码：

```
var query = client
    .Cypher
    .StartWithNodeIndexLookup("tag", "tags_fulltext", keyword)
    .Match("tag<-[:TaggedWith]-item")
    .Return((tag, item) => new
    {
        Tag = tag.As<Tag>(),
        Items = item.CollectAs<Item>()
    }); 
```

不过，这不适合您`SearchResult`。

# 选项 2

*场景：*您想检索与关键字匹配的所有标签，然后检索与这些标签中的任何一个匹配的所有项目，但您不关心将两者链接在一起。

让我们回到 Cypher 查询：

```
START tag=node:tags_fulltext('keyword')
MATCH tag<-[:TaggedWith]-item
RETURN tag, item 
```

这将产生一个像这样的 Cypher 结果表：

```
--------------------
| tag      | item  |
--------------------
| red      | A     |
| red      | B     |
| red      | C     |
| blue     | B     |
| blue     | D     |
| green    | E     |
| green    | F     |
| green    | G     |
-------------------- 
```

您希望将其中的每一个都折叠成一个不相关的标签和项目列表。

我们可以`collect`这样做：

```
START tag=node:tags_fulltext('keyword')
MATCH tag<-[:TaggedWith]-item
RETURN collect(tag) AS Tags, collect(item) AS Items

-----------------------------------------------------------------------------
| tags                                            | items                   |
-----------------------------------------------------------------------------
| red, red, red, blue, blue, green, green, green  | A, B, C, B, D, E, F, G  |
----------------------------------------------------------------------------- 
```

我们不希望所有这些重复，所以让我们收集不同的：

```
START tag=node:tags_fulltext('keyword')
MATCH tag<-[:TaggedWith]-item
RETURN collect(distinct tag) AS Tags, collect(distinct item) AS Items

--------------------------------------------
| tags              | items                |
--------------------------------------------
| red, blue, green  | A, B, C, D, E, F, G  |
-------------------------------------------- 
```

随着 Cypher 的工作，将其转换为 .NET 很容易：

```
var query = client
    .Cypher
    .StartWithNodeIndexLookup("tag", "tags_fulltext", keyword)
    .Match("tag<-[:TaggedWith]-item")
    .Return((tag, item) => new
    {
        Tags = tag.CollectDistinct<Tag>(),
        Items = item.CollectDistinct<Item>()
    }); 
```

# 概括

1.  始终从 Cypher 开始
2.  始终从 Cypher 开始
3.  当您使用 Cypher 时，.NET 实现应该几乎是一对一的

# 问题？

我已经在没有 VS 支持的文本框中输入了所有这些代码，而且我还没有测试过任何代码。如果发生崩溃，请在我们的问题页面上报告**完整的异常文本和查询。**在这里跟踪崩溃很困难。**在没有完整**异常文本、消息、堆栈跟踪等的情况下跟踪崩溃只会消耗我的时间，因为它会使调试变得更加困难，并且减少了我可以花在帮助您上的时间。

# c# - 如何在 wpf datagrid 中自动生成日期时间和图像列

> ID：15658377
> 
> 赞同：0
> 
> 时间：2013-03-27T12:05:39.260
> 
> 标签：c#, wpf, mvvm

我有一个包含`datetime`,`string`和`image uri`属性的自定义对象。

截至目前，我正在使用模板列手动生成列。

由于我只需要使用**一个数据网格，并且数据源对于应用程序中的****四种**不同场景是动态的，因此我需要通过设置`ItemsSource`数据网格的属性来自动生成列。

所以，我的问题是，如果我`ItemsSource`根据场景设置，它会相应地生成所有列。（日期时间、字符串和图像）

此外，这些列需要是**可排序**的。

# facebook-graph-api - 传递结果 ResultInfo 失败：com.facebook.LoginActivity

> ID：15658381
> 
> 赞同：2
> 
> 时间：2013-03-27T12:05:51.990
> 
> 标签：facebook-graph-api

这是我的错误

03-27 19:04:59.183: E/AndroidRuntime(8820): java.lang.RuntimeException: 将结果 ResultInfo{who=null, request=32665, result=0, data=null} 传递给活动 {com.example. googlemapsv2/com.facebook.LoginActivity}：java.lang.NullPointerException

# erlang - 在 Erlang 中解码 PGP 密钥

> ID：15658382
> 
> 赞同：5
> 
> 时间：2013-03-27T12:05:53.427
> 
> 标签：erlang, gnupg, openpgp

我无法在 Erlang 中“pem_entry_decode”GPG 公钥。通过 OpenSSL 生成的公钥可以正常工作。我已经按照[Erlang - Importing GPG Public Key](https://stackoverflow.com/questions/10966256/erlang-importing-gpg-public-key)中的建议修复了 GPG 密钥。

```
#!/usr/local/bin/escript

main(_) ->
  [application:start(X) || X <- [crypto, public_key, ssl]],
  Msg = list_to_binary("Hello World!"),
  %{ok, FileContents} = file:read_file("public_openssl.pem"),
  {ok, FileContents} = file:read_file("public_gpg.asc"),
  show(FileContents),
  [Entry] = public_key:pem_decode(FileContents),
  show(Entry),
  Key = public_key:pem_entry_decode(Entry),
  show(Key),
  EM = public_key:encrypt_public(Msg, Key),
  show(EM).

show(Something) ->
  io:format("~p~n", [Something]). 
```

错误：

```
escript: exception error: no match of right hand side value 
                 {error,
                     {asn1,
                         {wrong_tag,
                             {{expected,16},{got,131097,{131097,<<"\r">>}}}}}}
  in function  public_key:der_decode/2 (public_key.erl, line 170)
  in call from erl_eval:do_apply/6 (erl_eval.erl, line 572)
  in call from erl_eval:expr/5 (erl_eval.erl, line 367)
  in call from escript:eval_exprs/5 (escript.erl, line 850)
  in call from erl_eval:local_func/5 (erl_eval.erl, line 470)
  in call from escript:interpret/4 (escript.erl, line 768)
  in call from escript:start/1 (escript.erl, line 277)
  in call from init:start_it/1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T21:59:49.677

从你的：

```
{ok, FileContents} = file:read_file("public_gpg.asc") 
```

`FileContents`, 选择前 16 个字符。

# javascript - 循环遍历记录所有组合的数组

> ID：15658391
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:06:17.930
> 
> 标签：javascript

例如，我有一组数组

```
["a1", "a2"]
["b1", "b2", "b3"]
["c1", "c2"]
["d1", "d2", "d3", "d4"] 
```

可以有任意数量的这些数组。使用第一个数组，是否有一种好方法可以遍历记录每个组合的其他数组。

例如

```
a1,b1,c1,d1
a2,b1,c1,d1    
a1,b2,c1,d1
a2,b2,c1,d1
.
.
.
a1,b1,c1,d4
a2,b1,c1,d4
.
.
.
a1,b3,c2,d4
a2,b3,c2,d4 
```

我正在尝试绘制概率树的结果，这部分让我陷入困境

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:43:02.387

鉴于我理解你的问题是正确的，你在所有子阵列的[笛卡尔积之后。](http://en.wikipedia.org/wiki/Cartesian_product)

让我们从构建可能的最愚蠢的版本开始；没有聪明，只是一个双循环：

```
function product ( left, right ) {
    var ret = [];

    for (var i = 0; i < left.length; i++) {
        for (var j = 0; j < right.length; j++) {
            ret.push( [left[i], right[j]] );
        }
    }

    return ret;
} 
```

我们简单地遵循产品的定义： 中的每个项目`left`与 中的每个项目`right`。让我们聪明一点：我们遍历两个数组，将每个左边的项映射到右边的项。也许如果我们使用`Array#map`...

```
function product ( left, right ) {
    return left.map(function ( i ) {
        return right.map(function ( j ) {
            return [i, j];
        });
    });
} 
```

但是，这会创建一个嵌套数组：

```
> product( [0, 1], [2, 3] );
[ [[0,2], [0,3]],
  [[1,2], [1,3]] ] 
```

我们可以通过*减少*第一个数组来解决这个问题：

```
function product ( left, right ) {
    return left.reduce(function ( ret, i ) {
        var ans = right.map(function ( j ) {
            return [i, j];
        });

        return ret.concat( ans );
    }, []);
} 
```

到目前为止，这描述了产品`left × right`，但是您想要一个 n 元产品：`A × B × C × ...`我们将如何做到这一点？

我们将使用笛卡尔积的一个非常有用的特征：`A × B × C = A × (B × C)`. 这意味着我们可以递归地定义一个 n 元乘积。这是第一次尝试：

```
function product ( left, right, other ) {
    if ( other ) {
        right = product.apply( this, [].slice.call(arguments, 1) );
    }

    return left.reduce(function ( ret, i ) {
        var ans = right.map(function ( j ) {
            return [i, j];
        });

        return ret.concat( ans );
    }, []);
} 
```

错误应该很清楚：`[i, j]`. 这假设我们有两个标量（常规的、平坦的值），而实际上我们有一个标量和一个数组。修复很简单：我们不是将结果包装在数组中，而是将数组连接到标量，从而得到最终解决方案：

```
function product ( left, right, other ) {
    if ( other ) {
        right = product.apply( this, [].slice.call(arguments, 1) );
    }

    return left.reduce(function ( ret, i ) {
        var ans = right.map(function ( j ) {
            return [i].concat( j );
        });

        return ret.concat( ans );
    }, []);
} 
```

在您的情况下，由于您有一个数组数组，因此在调用时，您需要将其展平：

```
> var arr = [ ["a1", "a2"], ["b1", "b2", "b3"], ["c1", "c2"], ["d1", "d2", "d3", "d4"] ];
undefined
> product.apply( null, arr );
[ [ 'a1', 'b1', 'c1', 'd1' ],
  [ 'a1', 'b1', 'c1', 'd2' ],
  [ 'a1', 'b1', 'c1', 'd3' ],
  [ 'a1', 'b1', 'c1', 'd4' ],
  [ 'a1', 'b1', 'c2', 'd1' ],
  [ 'a1', 'b1', 'c2', 'd2' ],
  [ 'a1', 'b1', 'c2', 'd3' ],
  [ 'a1', 'b1', 'c2', 'd4' ],
  [ 'a1', 'b2', 'c1', 'd1' ],
  [ 'a1', 'b2', 'c1', 'd2' ],
  [ 'a1', 'b2', 'c1', 'd3' ],
  [ 'a1', 'b2', 'c1', 'd4' ],
  [ 'a1', 'b2', 'c2', 'd1' ],
  [ 'a1', 'b2', 'c2', 'd2' ],
  [ 'a1', 'b2', 'c2', 'd3' ],
  [ 'a1', 'b2', 'c2', 'd4' ],
  [ 'a1', 'b3', 'c1', 'd1' ],
  [ 'a1', 'b3', 'c1', 'd2' ],
  [ 'a1', 'b3', 'c1', 'd3' ],
  [ 'a1', 'b3', 'c1', 'd4' ],
  [ 'a1', 'b3', 'c2', 'd1' ],
  [ 'a1', 'b3', 'c2', 'd2' ],
  [ 'a1', 'b3', 'c2', 'd3' ],
  [ 'a1', 'b3', 'c2', 'd4' ],
  [ 'a2', 'b1', 'c1', 'd1' ],
  [ 'a2', 'b1', 'c1', 'd2' ],
  [ 'a2', 'b1', 'c1', 'd3' ],
  [ 'a2', 'b1', 'c1', 'd4' ],
  [ 'a2', 'b1', 'c2', 'd1' ],
  [ 'a2', 'b1', 'c2', 'd2' ],
  [ 'a2', 'b1', 'c2', 'd3' ],
  [ 'a2', 'b1', 'c2', 'd4' ],
  [ 'a2', 'b2', 'c1', 'd1' ],
  [ 'a2', 'b2', 'c1', 'd2' ],
  [ 'a2', 'b2', 'c1', 'd3' ],
  [ 'a2', 'b2', 'c1', 'd4' ],
  [ 'a2', 'b2', 'c2', 'd1' ],
  [ 'a2', 'b2', 'c2', 'd2' ],
  [ 'a2', 'b2', 'c2', 'd3' ],
  [ 'a2', 'b2', 'c2', 'd4' ],
  [ 'a2', 'b3', 'c1', 'd1' ],
  [ 'a2', 'b3', 'c1', 'd2' ],
  [ 'a2', 'b3', 'c1', 'd3' ],
  [ 'a2', 'b3', 'c1', 'd4' ],
  [ 'a2', 'b3', 'c2', 'd1' ],
  [ 'a2', 'b3', 'c2', 'd2' ],
  [ 'a2', 'b3', 'c2', 'd3' ],
  [ 'a2', 'b3', 'c2', 'd4' ] ] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T12:10:45.267

对于未指定数量的数组，您可以这样做：

```
var arrays = [
  ["a1", "a2"],
  ["b1", "b2", "b3"],
  ["c1", "c2"],
  ["d1", "d2", "d3", "d4"]
];
(function dive(stack) {
  if (stack.length==arrays.length) {
    console.log(stack);
  } else {
    arrays[stack.length].forEach(function(v){
        dive(stack.concat(v));
    });
  }
})([]); 
```

[演示](http://jsbin.com/iyotet/3/edit)（打开控制台）

如果您想支持旧浏览器，请为 forEach使用[shim 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility)

# java - WebDriver 无法单击具有 onclick=function1() 作为属性的输入元素

> ID：15658392
> 
> 赞同：1
> 
> 时间：2013-03-27T12:06:22.303
> 
> 标签：java, webdriver, selenium-webdriver

我正在使用带有 Java 的 Web 驱动程序 2.31。Web 驱动程序似乎无法对具有`onclick()`属性的输入元素执行单击操作。

我需要对其执行点击操作的输入元素具有以下属性 - `id`（这是一个随机生成的数字）、`class`、`type=button`、`onclick`、`onmouseout`、`onmouseover`和。 `title``value`

我能够获取的值`title`和`value`属性，这意味着网络驱动程序能够识别输入元素，但不能对其执行点击操作。

我尝试过以下方法：

1.  `webdriver.findElement(By.xpath("xpath for the input")).click()`
2.  `webdriver.findElement(By.xpath("xpath for the input")).sendKeys(Keys.ENTER);`
3.  `new Actions(webdriver).moveToElement(webdriver.findElement(By.xpath("xpath for the input"))).click().perform();`

以上选项均无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T06:08:59.573

我在我的项目中遇到了完全相同的问题。**问题不是定位元素，而是 onClick() 事件没有触发。** 然后我发现还有其他东西从事件中停止触发。我曾使用 java 脚本来启用日期选择器框并这样做，

```
((JavascriptExecutor)driver).executeScript ("document.getElementById('txtOriginDate').removeAttribute('readonly',0);");

WebElement originDateBox= driver.findElement(By.xpath(prop.getProperty("originDateBox")));
originDateBox.clear();
originDateBox.sendKeys("9-Dec-2014"); //Enter date 
```

开发人员对此进行了设计，如果您不使用日期选择器来选择日期，则不会设置特定变量。**最终使 **onclick**事件不会触发。

日期选择器代码是这样的，

```
var jsoncustdate = "";
var jsonorigindate = "";

function onSelectCalender( StrDt, obj ) 
{
    if ( !varReadonly ) {
    if ( $( "#txtCustDescisionDate" ).attr( "IsDisable" ) == "FALSE" ) 
    {
        if ( obj.id == "txtCustDescisionDate" ) 
        {
            custobjDt = new Date( obj.selectedYear, obj.selectedMonth,obj.selectedDay, 0, 0, 0, 0 );
            jsoncustdate = custobjDt.getTime();
            jsoncustdate = "\/Date(" + jsoncustdate + ")\/";
            DisabledBtnStage();
            //        $("#txtFromDate").datepicker("option", "maxDate", objDt);

        }
        if ( obj.id == "txtOriginDate" ) 
        {
            var objDt = new Date( obj.selectedYear, obj.selectedMonth,obj.selectedDay,0, 0,0,0 );
            jsonorigindate = objDt.getTime();
            jsonorigindate = "\/Date(" + jsonorigindate + ")\/";
            DisabledBtnStage();
            //        $("#txtToDate").datepicker("option", "minDate", objDt);
        }
    }
    elogCommon.CheckMandatory();
  }

} 
```

我终于以正常方式使用了日期选择器，并且事件顺利触发。

我希望这个答案会有所帮助。. 干杯 !!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:56:45.573

您是否从 element.click() 中得到任何异常？它启用并可见吗？我们遇到的问题之一是 WebDriver 没有正确处理 position:static 元素，因此在播放过程中它会覆盖按钮（并且您不会在屏幕截图上看到它）并且会抛出异常“元素在点不可点击”。

我们在元素方面遇到了类似的问题，并且有以下代码有时确实有效（但也不是 100% 的时间）：

```
element.click();
if("button".equals(tagName)) {
    if(element.isEnabled() && element.isDisplayed())
        element.sendKeys(Keys.ENTER);
} 
```

但是在升级 WebDriver 之后问题就消失了，我们删除了 sendKeys(ENTER)，它在 2.29.0 中也可以正常工作。

# asp.net - 如何将控制作为变量传递

> ID：15658395
> 
> 赞同：1
> 
> 时间：2013-03-27T12:06:25.280
> 
> 标签：asp.net, vb.net, variables

这是似乎应该有一个简单的解决方案的问题之一，但我无法弄清楚它是什么！

如果第一个 sub 实际上没有调用第二个，我如何将控件从一个 sub 传递到另一个 sub？例如，btnChangeText 位于具有名为 mpExample 的 ModalPopupExtender 的面板中，因此通常不可见：

```
Protected Sub btnChangeText_Click(sender as object, e as EventArgs) Handles btnChangeText.Click

<SpecifiedTextBox>.Text = "Hello"

End Sub 
```

然后在主页上，始终可见，是一个与每个文本框相关联的按钮。在此示例中，它是 textbox15：

```
Protected Sub btnChangeTextBox15_Click(sender as object, e as EventArgs) Handles btnChangeTextBox15.Click

<Set TextBox15 as variable>
mpExample.Show()

End Sub 
```

我知道这是一个愚蠢的例子 - 当我说我想要做的真正应用实际上是有道理的时候相信我！但关键是我想以某种方式存储控件的名称，以便在第二个子运行时由第一个子更新。

如果我从第二个调用第一个子会很容易，我只是将它作为参数传递，但我不是。第一个 sub 是通过单击按钮调用的，并且是第二个 sub 运行的独立动作。

我似乎无法使用会话变量（我的第一个想法），因为我找不到任何方法将控件名称存储为字符串，然后在第一个子运行时将其转换回实际控件。如果有人能告诉我该怎么做，那将是最简单的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:07:28.167

一种方法是将控件的 ID 作为字符串存储在 Session 变量中，然后使用该`FindControl`方法在您的 2nd Click 事件中获取控件。

```
Protected Sub btnChangeTextBox15_Click(sender as object, e as EventArgs) Handles btnChangeTextBox15.Click
    Session("currentTextBox") = TextBox15.ID
    mpExample.Show()
End Sub

Protected Sub btnChangeText_Click(sender as object, e as EventArgs) Handles btnChangeText.Click
    Dim currentTextBox As TextBox
    currentTextBox = CType(Page.FindControl(Session("currentTextBox")),TextBox)
    currentTextBox.Text = "Hello"
End Sub 
```

请注意，如果您的 TextBox15 控件位于某种容器（Panel 或其他东西）内，您将需要使用该容器的`FindControl`方法，而不是`Page.FindControl`.

* * *

另一种方法是将`TextBox`自身存储在 Session 变量中，然后将其拉出以在其他方法中设置文本。请注意，这仅适用于在同一个请求中调用这两个方法的情况（这听起来不适用于您的用例）。这就是它的样子：

```
Protected Sub btnChangeTextBox15_Click(sender as object, e as EventArgs) Handles btnChangeTextBox15.Click
    Session("currentTextBox") = TextBox15
    mpExample.Show()
End Sub

Protected Sub btnChangeText_Click(sender as object, e as EventArgs) Handles btnChangeText.Click
    Dim currentTextBox As TextBox
    currentTextBox = CType(Session("currentTextBox"), TextBox)
    currentTextBox.Text = "Hello"
End Sub 
```

# sql - 不明确的列名，我的 WHERE 语句已用于其他目的

> ID：15658397
> 
> 赞同：3
> 
> 时间：2013-03-27T12:06:35.237
> 
> 标签：sql, sql-server, join, where

所以我有这个问题，我需要一个 INNER JOIN 将我的图像表连接到我的产品表，并且我已经尝试指定每个列名称与表的连接，如下所示。当谈到我的 WHERE 语句时，这就是它变得棘手的地方。因为我需要将我的 ProductID 保存为一个名为 pid 的变量以用于其他代码隐藏目的。

```
SELECT * FROM ProductTBL p
INNER JOIN ImageTBL img on p.ProductID = img.ProductID 
WHERE (ProductID = @pid) 
```

当我运行此代码时，它会告诉我 ProductID 是一个模棱两可的列名，当我尝试进一步指定我的 Where 语句时，如下所示：

```
WHERE (p.ProductID = @pid) 
```

它会给我另一个错误，告诉我没有数据绑定到我从中取出数据的某些行。仅当我没有像上面那样指定 Where 语句时，才会出现此错误。

任何输入都将不胜感激:)

PS：如果有什么要说的，我正在运行 MSSQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:33:26.793

“不明确的列名”消息是 SQL Server 错误，您通过指定“WHERE p.ProductID = @pid”来修复它。是的，你需要 p。在 ProductID 前面，因为 ImageTBL 也有同名的列。

“没有绑定数据”错误不是来自 SQL。您现在有一个正确的 SQL 语句，但它显然没有返回任何记录，至少对于您正在运行它的 @pid 的值。

你是从一个试图对数据做某事的应用程序中调用它的，对吧？这就是“没有数据绑定”错误的来源。

您可以通过在 SQL Server Management Studio 查询窗口中运行 SQL 语句并为 @pid 插入所需的值来分离问题的两个部分。然后您可以在调试模式下运行您的应用程序，并检查它是否接收到您在 Management Studio 中看到的相同数据。这里有一个猜测：您的应用程序没有正确传递@pid，并且 SQL 语句正在返回 p.ProductID = '' 的记录。看看是不是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T15:38:23.773

我知道这样做的两种方法。第二种方式可能是推荐的方式（它应该运行得更快）。

方式1）

在两步语句中运行它。我认为您不能在内部 SELECT 语句中使用 * ：

```
SELECT * FROM (
    SELECT p.ProductID, [other needed fields]
    FROM ProductTBL p
    INNER JOIN ImageTBL img on p.ProductID = img.ProductID
    ) as x
WHERE (ProductID = @pid) 
```

内部 SELECT p.ProductID 表示从 ProductTBL 显式返回 ProductID。然后可以在 WHERE 语句中使用该 ProductID 字段，因为它位于外部 SQL 语句中。

方式2）

将“WHERE”标准作为连接的一部分

```
SELECT *
FROM ProductTBL p
INNER JOIN ImageTBL img on p.ProductID = img.ProductID AND p.ProductID = @pid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:16:13.887

这可能是您的代码的问题。尝试使用产品 ID 的硬核值运行查询并在数据库控制台中运行它。

似乎不是数据库问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:46:34.903

好的，这是有问题的 where 语句。您需要在您的 productID 前面加上您的表别名。表别名'很好，我毫不怀疑你已经意识到，当你输入 SELECT * From MyTable T，然后返回选择你的列时，当你用 T 替换 * 时，你会得到一个列的智能列表。别名表是总是好的。假设您有两个表 T1 和 T2 以及 T1 中的 C1、C2、C3 和 T2 中的 C4、C5、C6 列。您编写存储过程的脚本并且它可以工作。稍后某个时候有人出现并将名为 C2 的 c 列添加到 T2，那么如果您没有在列上添加表名前缀，那么您的过程可能会中断。因此，即使当前没有歧义并且您永远不会更改存储的过程，使用前缀总是更健壮。

明确声明列而不是使用 * 总是一个好主意，因为再次添加列可能会破坏您的 proc，而且如果您的列名不正确，SSMS 会用红色的小波浪线在其下划线。

# django - 保存后 Django 分配 M2M

> ID：15658399
> 
> 赞同：1
> 
> 时间：2013-03-27T12:06:42.170
> 
> 标签：django, m2m

我正在 Django 中开发一个项目，但遇到以下问题：

我有这两个类，团队和项目。当我创建一个项目时，我想自动将团队中的用户分配给我在创建项目时选择的新项目。我覆盖了项目的保存方法，并在创建项目后将用户分配给项目（我在保存后做了，因为之前给了我一个错误）。我尝试了几种方法，但没有一种方法有效。试用者：

```
self.user.add(*self.team.users.all())
self.save() 
```

这是行不通的。

尝试迭代：

```
for uTeam in self.team.users.all():
    self.users.add(uTeam) 
```

也不起作用。

对我有用的唯一方法是这样，但仅在 Django Shell 中：

```
P = Project.objects.get(pk=1)
T = Team.objects.get(pk=1)
P.user.add(*T.user.all())
P.save() 
```

这是我下面的解决方案，但在 Django 中不起作用（提供无限循环）

```
class Team(models.Model):
    name = models.CharField(max_length=200,
                            help_text=_('name of the team'))
    user = models.ManyToManyField(settings.AUTH_USER_MODEL,
                                related_name="members_of_team",
                                help_text=_('users of the team'),
                                null=True
                                )
    and more....

class Project(models.Model):
    id = models.AutoField(primary_key=True, null=False)
    name = models.CharField(max_length=200,
                            help_text=_('name of project'),
                            )
    team = models.ForeignKey(Team,`enter code here`
                             on_delete=models.PROTECT,
                             help_text=_('team of project'))
    created_by = models.ForeignKey(settings.AUTH_USER_MODEL,
                                  on_delete=models.PROTECT,
                                  related_name='creator_project',
                                  blank=True,
                                  null=False,
                                  help_text=_('project created by'))
    customer = models.ForeignKey(Customer,
                                on_delete=models.PROTECT,
                                help_text=_('customer'))
    user = models.ManyToManyField(settings.AUTH_USER_MODEL,
                                  related_name='users_team',
                                  blank=True,
                                  null=False,
                                  help_text=_('users of this project'))

   def save(self, *args, **kwargs):

     if self.checkIntegrity():
       super(Project, self).save(*args, **kwargs)
       if self.user.all().count() < self.team.user.all().count():
         T = Team.objects.get(pk=self.team.id)
         P = Project.objects.get(pk=self.id)
         P.user.add(*T.user.all())
         P.save() 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:46:42.423

我明白了，我读到在 save() 和 post_save() 之后填充了 m2m 字段，并且当 m2m 字段更改时会触发一个信号，所以我写了以下内容：

```
@receiver(m2m_changed, sender=Project.user.through)
def m2mChange(sender, **kwargs):
    instance = kwargs['instance']
    T = Team.objects.get(pk=instance.team.id)
    if kwargs['pk_set'] is None:
         instance.user.add(*T.user.all()) 
```

现在它工作正常。感谢你所做的一切。

# django - 哪些模型字段可以与无线电小部件一起使用（通过模型表单）？

> ID：15658400
> 
> 赞同：0
> 
> 时间：2013-03-27T12:06:43.913
> 
> 标签：django, django-forms

当我阅读有关模型表单和小部件的文档时，看起来您可以在任何模型表单上使用任何小部件，但是某些默认小部件用于与模型表单字段对应的表单字段。我能够使用表单字段而不是模型表单字段来呈现无线电输入。

我尝试了很多不同的东西，但我**似乎无法呈现来自模型字段的模型表单字段的 RadioSelect 小部件。这甚至可能**吗？

顺便说一句，我的目标是让无线电输入的初始值与模型字段的当前值（布尔值）相对应。

**尝试1：**

```
# views.py
class SettingsView(FormView):
    template_name = 'settings.html'
    success_url = 'settings/saved/'
    form_class = NicknameForm

    def post(self, request, *args, **kwargs):
        profile = request.user.get_profile()
        if request.POST['show_nickname'] == 'False':
            profile.show_nickname = False
            profile.save()         
        elif request.POST['show_nickname'] == 'True':
            profile.show_nickname = True
            profile.save()

        return super(NicknameFormView, self).post(request, *args, **kwargs)

    def get_context_data(self, **kwargs):
        """
        To be able to use 'show_nickname_form' instead of plain 'form' in the template.
        """        
        context = super(NicknameFormView, self).get_context_data(**kwargs)
        context["show_nickname_form"] = context.get('form')
        return context

# models.py 
from django.db import models
from django.contrib.auth.models import User

class Profile(models.Model):
    user = models.OneToOneField(User,
                                unique=True,
                                verbose_name='user',
                                related_name='profile')
    show_nickname = models.BooleanField(default=True)

# forms.py
from django import forms
from models import Profile    

CHOICES = (('shows_nickname', 'Yes'), ('hides_nickname', 'No'))

class NicknameForm(forms.ModelForm):
    class Meta:
        model = Profile
        fields = ('show_nickname',)
        widgets = {
            'show_nickname': forms.RadioSelect(attrs={'choices': CHOICES}),
        } 
```

我的模板的一部分：

```
 <form action='' method="post">
            {{ show_nickname_form.as_ul }} {% csrf_token %}
            <input type="submit" value="Save setttings">
        </form> 
```

从 呈现的形式`{{ show_nickname_form.as_ul }}`：

```
<li><label for="id_show_nickname_0">show nickname:</label> 
<ul></ul>
</li> 
<div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='1BqD6HJbP5e01NVwLtmFBqhhu3Y1fiOw' /></div>` 
```

**尝试2：** #forms.py from django import forms from models import Profile

```
class NicknameForm(forms.ModelForm):
    class Meta:
        model = Profile
        fields = ('show_nickname',)
        widgets = {
            'show_nickname': forms.RadioSelect(),
        } 
```

**尝试 3**

```
# forms.py
CHOICES = ((True, 'On',),
  (False, 'Off',))

class NicknameForm(ModelForm):
    show_nickname = ChoiceField(widget=RadioSelect, choices=CHOICES, initial=True , label='')

    class Meta:
        model = Profile
        fields = ('show_nickname',) 
```

这使得无线电输入很好，但我需要它采用相应模型字段的初始值`show_nickname`而不是常量`True`。

我正在使用`Django 1.4`顺便说一句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:50:16.427

您需要将其变为 a`ChoiceField`而不是 a`BooleanField`并为每个选项和 a 进行选择，`RadioWidget`以便它显示单选按钮。 [https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ChoiceField)

如果您想保留布尔字段，您很可能需要做一些黑客行为来创建自己的字段/小部件。

* * *

```
# views.py
class SettingsView(FormView):
    template_name = 'settings.html'
    success_url = 'settings/saved/'
    form_class = NicknameForm

    def get_form(self, form_class):
        """
        Returns an instance of the form to be used in this view.
        """
        form = super(SettingsView, self).get_form(form_class)

        if 'show_nickname' in form.fields:
            profile = self.request.user.get_profile()
            form.fields['show_nickname'].initial = profile.show_nickname

        return form

    def post(self, request, *args, **kwargs):
        profile = request.user.get_profile()
        if request.POST['show_nickname'] == 'False':
            profile.show_nickname = False
            profile.save()
        elif request.POST['show_nickname'] == 'True':
            profile.show_nickname = True
            profile.save()

        return super(NicknameFormView, self).post(request, *args, **kwargs)

    def get_context_data(self, **kwargs):
        """
        To be able to use 'show_nickname_form' instead of plain 'form' in the template.
        """
        context = super(NicknameFormView, self).get_context_data(**kwargs)
        context["show_nickname_form"] = context.get('form')
        return context 
```

# javascript - 在 Marionette / Backbone.js 中渲染布局和子视图

> ID：15658403
> 
> 赞同：2
> 
> 时间：2013-03-27T12:07:09.527
> 
> 标签：javascript, jquery, model-view-controller, backbone.js, marionette

我有一个关于在我正在处理的 Marionette 应用程序中使用区域中的视图呈现布局的工作解决方案，但感觉有些不对劲。您必须将任何内容直接附加到 DOM 吗？

这是我在控制器中的方法：

```
 //Grab the main Layout
        var layout = new APP.Views.LayoutView();

        //Render that layout
        layout.render();

         //Make the model
        var simpleModel = new APP.Models.simpleModel({
          "field1" : "foo",
          "field2" : "bar"
        });

        layout.header.show(new APP.Views.subView({model: simpleModel}));

        $('body').html(layout.el); 
```

这是我感觉不自然的最后一部分。这主要是因为如果我将 'layout.header.show' 移到 .html() 之后，则它无法正确呈现。如果区域在将其推送到 DOM 后不能动态更改，那么区域的意义何在？

这是我的布局：

```
APP.Views.LayoutView = Backbone.Marionette.Layout.extend({

  template: "#layoutTemplate",

  className : 'wrapper',

  regions: {
    header: "#header",
    footer: "#footer"
  }

}); 
```

这是子视图：

```
APP.Views.subView = Backbone.Marionette.ItemView.extend({

    template : '#headerTemplate',

    className: 'container'

}); 
```

正如我所说，这可行，但感觉就像我没有正确使用区域。是否有更好、更简洁的方法来执行此操作，允许您在将布局渲染到 DOM 后访问区域？

在[Marionette 文档](https://github.com/marionettejs/backbone.marionette/tree/master/docs)中似乎没有提到使用 .html() 来获取页面上的内容——我想知道这是否因为不需要或被假定而被遗漏了。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:37:28.877

好的，似乎可以通过在应用程序中创建一个“区域”来规避这种情况，然后使用 .show() 来显示其中的布局。

这是我在 SO 上找到的小提琴的链接：http: [//jsfiddle.net/TDqkj/6/](http://jsfiddle.net/TDqkj/6/)

以及另一个问题：[Understanding layouts in Marionette for Backbone.js](https://stackoverflow.com/questions/11974176/understanding-layouts-in-marionette-for-backbone-js?rq=1)

小提琴特别有这个代码：

```
App = new Backbone.Marionette.Application();
App.addRegions({
   'nav': '#nav',
  'content': '#content'
}); 
```

程序员使用它来向这些区域添加布局——这意味着您永远不必附加到 DOM。

如果其他人有更优雅的解决方案，请发布！

# ios5 - 导航控制器释放

> ID：15658409
> 
> 赞同：0
> 
> 时间：2013-03-27T12:07:21.557
> 
> 标签：ios5, uinavigationcontroller, automatic-ref-counting, memory-management

我对导航栏应用程序中 ARC 中的 dealloc 的行为有疑问。我有一个导航栏应用程序，其中有 5 个屏幕。我在导航堆栈中推送视图控制器，并在各自的 VC 中编写了 dealloc 函数我正在发布强引用变量。Dealloc 被多次调用，但内存占用仍在增加。**只有当他从导航堆栈中弹出时才会取消分配 VC，否则会在堆栈中的一段时间后调用它**。

我在导航栏中没有用户的后退按钮，因为它不是必需的。所以我应该手动从导航堆栈中删除 VC，否则它们会被 ARC 自己释放？任何帮助都将不胜感激，因为我我真的遇到了应用程序崩溃问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:14:52.063

`UINavigationController`自行管理其视图控制器的内存。

如果您的内存占用增加，那一定是由于其他一些内存泄漏。

# c++ - 无法模板化虚函数。只是暂时的技术限制？

> ID：15658414
> 
> 赞同：5
> 
> 时间：2013-03-27T12:07:33.753
> 
> 标签：c++, templates

我知道您不能将虚拟方法声明为模板，因为编译器不知道要在虚拟表中保留多少条目。然而，这是一个技术限制，而不是语言限制。编译器可以知道实际需要多少模板实例，并“返回”以分配适当的 vtable 大小。

即将发布的标准中是否有计划的技术解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:10:11.170

编译器永远无法知道模板的所有可能实例化。在目前的编译模式下，每个翻译单元都是单独编译后链接的。在一个翻译单元中编译模板类型时，您不知道该类型在另一个翻译单元中的实例化。

想象一下，您正在编写一个库，并且想要在其中包含一个模板函数。您编译该库，然后将其分发给您的客户。现在客户可以使用他们喜欢的任何模板参数来实例化您的模板函数，但是您的库已经编译好了！它不能“返回”并改变这一点。

您假设在编译模板函数时，您还可以使用该函数的每个实例化。通常情况并非如此，并且在当前的编译和链接模型下，不可能知道是这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T12:23:56.970

鉴于不需要使用现有链接器，这当然是**可能的。**也就是说，链接器可以筛选该模板函数的所有实例并构建适当的数据结构。但是 C++ 的优势之一是它不需要专门的链接器。这使得它可以移植到链接器是用石头编写并且无法更改的系统。而且，是的，这种情况发生了；链接器是**所有目标代码相遇的地方，它必须与系统支持的****所有**编程语言兼容，这反过来意味着它有时会变得陈旧和笨拙，并且**任何**变化带来了很大的破损风险。所以，虽然理论上可以做到这一点，但它不会发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:30:27.453

根据 C++ 标准委员会的[论文](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/)和[核心语言问题](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_toc.html)，目前没有任何计划。C++ 标准规定了 C++ 实现的要求，但没有定义技术实现本身。因此，模板虚函数明确不是技术限制，而是标准定义的语言的限制。然而，语言的限制可能是改变现有实现所涉及的风险的结果，而不是由于实现的技术限制而强加的。

# c# - 时间：2019-01-01 标签：c#templates如何将约束应用于从某事物派生的类

> ID：15658417
> 
> 赞同：1
> 
> 时间：2013-03-27T12:07:45.340
> 
> 标签：c#, generics, generic-constraints

再次愚蠢的问题。

我有这个类通过一个基类引入一些代码，如下所示：

```
class TVIRoot : OURTreeNodeImpl { } 
```

我现在想添加一些模板功能

```
class TVIRoot<TLabelHandler> : OURTreeNodeImpl { } 
```

但是当我需要提供一些约束时，我无法弄清楚我需要什么样的手指修改才能编译它。

```
class TVIRoot<TLabelHandler> where TLabelHandler : new(), OURTreeNodeImpl { } //no    
class TVIRoot<TLabelHandler> where TLabelHandler : SomeClass : OURTreeNodeImpl { } //no
class TVIRoot<TLabelHandler> : OURTreeNodeImpl, where TLabelHandler : SomeClass { } //no 
```

这可以做到吗？

非常感谢。

bg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:13:52.610

```
class TVIRoot<TLabelHandler> : OURTreeNodeImpl where TLabelHandler : SomeClass { } //yes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:25:56.057

约束出现在基类继承之后，这是一个示例：

```
public interface  IFood
{
}

public class Animal
{
}

public class Cat<T> : Animal where T : IFood
{
    public void Eat(T food)
    {
    }
} 
```

有关更多详细信息，请查看：http: [//msdn.microsoft.com/en-US/library/d5x73970 (v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/d5x73970(v=vs.80).aspx)

# ios - QLPreviewController VS UIWebView 在渲染效率和内存使用方面

> ID：15658420
> 
> 赞同：4
> 
> 时间：2013-03-27T12:07:48.783
> 
> 标签：ios, uiwebview, doc, quicklook, qlpreviewcontroller

我正在开发一个 iPad 项目，该项目允许用户浏览本地文档、ppts、pdf 等。

我有两个选项来显示这些文件：

首先，我可以使用 UIWebView 来显示它们；

或者，我可以使用 QLPreviewController 来显示它们。

从 ActivityConsole，我发现当我使用 UIWebView 显示 8.6M PPT 时，我的应用程序的进程成本如下：

![我的应用程序的流程成本](../Images/f6ccf5bc4e32581134e19c9e80b34e72.png)

但是，当我使用 QLPreviewController 显示相同的 PPT 时，会出现以下两个过程：

![My App 的流程和 quicklook 流程](../Images/3c255f0e2da1430f551f97675014a0f7.png)

我认为“quicklookd”进程是由 QuickLook Framework 启动的辅助进程。

如我所见，整体内存使用量大致相同，但使用 QLPreviewController 可以减少我的应用程序的内存使用量（在 Instruments 中得到了证明）。所以我认为使用QLPreviewController可以让doc的显示更加流畅和快速。但是，当我在 iPad1，iOS 5.1.1 中测试这两个 Approches 时，我发现 QLPreviewController 的渲染效率低于 UIWebView。在 QLPreviewController 中，ppt 的滚动更加令人窒息。

谁能解释一下 QLPreviewController 渲染过程的底层实现？哪个是显示文档的更好选择？

或者除了上述方法之外，还有更好的方法来显示文档吗？

感谢您的任何帮助！

# r - 在 R 中创建切片树

> ID：15658422
> 
> 赞同：2
> 
> 时间：2013-03-27T12:07:52.350
> 
> 标签：r, tree, nodes, slice, cran

有谁知道R中是否有一个包或简单的方法来创建以下形式的树结构：

![在此处输入图像描述](../Images/0e570c01f8d1c9ffff5a4532790455df.png)

我不是在寻找一种方法来创建像上面这样的漂亮情节。我最大的问题是找到一种方法来处理这样一棵树，其中节点、叶子和子节点之间有明显的区别。例如，我希望能够通过调整字符串或向量来切换两个叶子。所以我想这主要是一个“数据存储”问题。

我一直在寻找很长一段时间，偶然发现了一个名为“Dendrogram”的包。这个包的问题是（据我所知）它不允许标记内部节点，例如“H”和“V”。只有最后的叶子可以携带一个值或字符串。

我发现的另一个包是“rpart”，但我认为这些只对回归树有用。

如果有人知道一些事情，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:52:44.680

如果你有一个边缘列表，你可以用 igraph 做一些非常相似的事情：

```
el <- matrix( c( "H" , "V" , "H" , "V2" , "V" , "1" , "V" , "V3" , "V3" , "3" , "V3" , "4" , "V2" , "2" , "V2" , "H2" ) , ncol = 2 , byrow = TRUE )
g <- graph.edgelist(el , directed = TRUE )
V(g)$label <- get.vertex.attribute(g, 'name')
plot(g,layout=layout.reingold.tilford) 
```

您还可以将`el`命令中的节点命名为字母，然后用于`get.vertex.attribute(g, 'name')`查看生成的节点的名称，然后传递您喜欢的任何字符向量以获取图片中的标签。 ![在此处输入图像描述](../Images/5d4f2cb8db2ea5c9ad3b904a1beaedc8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:01:33.100

是的，rpart 可能不适合您的需要。尝试[phylobase](http://cran.r-project.org/web/packages/phylobase/index.html)包。

如果您的树可以从文件中读取，那么您可能会使用某种类似这样的 XML 树[解析器](http://cran.r-project.org/web/packages/XiMpLe/index.html)。

# windows-phone-8 - 软振动，在应用程序中

> ID：15658423
> 
> 赞同：1
> 
> 时间：2013-03-27T11:11:28.750
> 
> 标签：windows-phone-8

好的，我正在开发一个 win 手机应用程序，我在这里和那里都有按钮，我希望手机在有人按下按钮时振动。

我设法做到了

```
using Windows.Phone.devices.Notification;

VibrationDevice v = VibrationDevice.GetDefault();    
v.Vibrate(TimeSpan.FromSeconds(0.1); 
```

但是，每次有人按下按钮时，这种振动都相当强烈且令人讨厌，我想知道，**我们是否可以使用软振动？**就像有人按下 Windows 按钮/返回键/搜索玻璃时 - 这三个按钮的振动更柔和

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:39:27.727

对于 WP7.1，您可以使用 XNA：

```
Microsoft.Xna.Framework.WindowsPhone.Input.GamePad.SetVibration(player, leftMotorStrength, rightMotorStrength) 
```

但是，对于 Windows Phone 8，这是不可能的。

有关详细信息，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206994%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:02:06.563

您可以使用更短的时间跨度。在不同的设备上做一些实验。您可能需要为不同的设备使用不同的值。

我从三星 ATIV Odyssey 获得了非常好的柔和振动`TimeSpan.FromSeconds(0.01)`。然而，HTC 8X 似乎忽略了这么短的时间跨度——0.02 的结果有些不一致；0.03 是一个不错的选择。

# sparql - 大师级 sparql 引擎

> ID：15658424
> 
> 赞同：2
> 
> 时间：2013-03-27T12:07:55.850
> 
> 标签：sparql, virtuoso

我想问一下是否有人知道 sparql 查询在 virtuoso 开源版本中是如何实际执行的。sparql 查询是否映射到 sql 查询？如何访问 RDF 数据？我应该为此阅读源代码吗？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T11:23:18.400

> sparql 查询是否映射到 sql 查询？

是的

> 如何访问 RDF 数据？

您可以在此处找到有关 rdf-data 存储的一些详细信息：[使用 SQL-ORDBMS 实现符合 SPARQL 的 RDF 三重存储](http://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VOSRDFWP)

但是，如果您正在编写 RDF 感知应用程序，您应该只使用 SPARQL 接口并忽略所有实现细节。它快速且功能丰富。

> 我应该为此阅读源代码吗？

好吧，这取决于您需要实现的目标。使用不是必需的，但如果您打算提供补丁，那么阅读源代码是必须的:)

# python - 如何使用 python 收集 GDI 和用户对象的性能指标

> ID：15658426
> 
> 赞同：1
> 
> 时间：2013-03-27T12:08:01.967
> 
> 标签：python, windows, wmi, performance-testing, metrics

认为这是我在这里提出的第一个问题，通常会找到我需要的所有答案（提前致谢）

好的，我的问题我已经编写了一个 python 程序，它将在线程中监视进程并将结果输出到 csv 文件以供以后使用。这段代码运行良好，我使用 win32pdhutil 作为计数器，使用 WMI，Win32_PerfRawData_PerfProc_Process 作为 CPU %time。我现在被要求监视 WPF 应用程序并专门监视用户对象和 GDI 对象。

这就是我遇到的问题，我似乎找不到任何 python 支持来收集这两个计数器上的指标。这两个计数器在任务管理器中很容易获得我觉得奇怪的是这两个计数器的信息很少。我正在专门研究收集这些以查看我们是否有内存泄漏，我不想在系统上安装除已安装的 python 之外的任何其他东西。请您帮忙寻找解决方案。

我正在使用 python 3.3.1，它将在 Windows 平台上运行（主要是 win7 和 win8）这是我用来收集数据的代码

```
def gatherIt(self,whoIt,whatIt,type,wiggle,process_info2):
    #this is the data gathering function thing
    data=0.0
    data1="wobble"
    if type=="counter":
        #gather data according to the attibutes
        try:
            data = win32pdhutil.FindPerformanceAttributesByName(whoIt, counter=whatIt)
        except:
            #a problem occoured with process not being there not being there....
            data1="N/A"

    elif type=="cpu":
       try:
            process_info={}#used in the gather CPU bassed on service
            for x in range(2):
                for procP in wiggle.Win32_PerfRawData_PerfProc_Process(name=whoIt):
                    n1 = int(procP.PercentProcessorTime)
                    d1 = int(procP.Timestamp_Sys100NS)
                    #need to get the process id to change per cpu look...
                    n0, d0 = process_info.get (whoIt, (0, 0))     
                    try:
                        percent_processor_time = (float (n1 - n0) / float (d1 - d0)) *100.0
                        #print whoIt, percent_processor_time
                    except ZeroDivisionError:
                        percent_processor_time = 0.0
                    # pass back the n0 and d0
                    process_info[whoIt] = (n1, d1)
                #end for loop (this should take into account multiple cpu's)
            # end for range to allow for a current cpu time rather that cpu percent over sampleint
            if percent_processor_time==0.0:
                data=0.0
            else:
                data=percent_processor_time
        except:
            data1="N/A"

    else:
        #we have done something wrong so data =0
        data1="N/A"
    #endif
    if data == "[]":
        data=0.0
        data1="N/A"
    if data == "" :
        data=0.0
        data1="N/A"
    if data == " ":
        data=0.0
        data1="N/A"
    if data1!="wobble" and data==0.0:
        #we have not got the result we were expecting so add a n/a
        data=data1
    return data 
```

干杯

如果有人试图运行它，则编辑正确的 cpu 计时问题：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T11:12:47.833

因此，经过长时间的搜索，我能够将一些东西混合在一起，从而为我提供所需的信息。

```
import time
from ctypes import *
from ctypes.wintypes import *
import win32pdh

# with help from here http://coding.derkeiler.com/Archive/Python/comp.lang.python/2007-10/msg00717.html
# the following has been mashed together to get the info needed

def GetProcessID(name):
    object = "Process"
    items, instances = win32pdh.EnumObjectItems(None, None, object, win32pdh.PERF_DETAIL_WIZARD)
    val = None
    if name in instances :
        tenQuery = win32pdh.OpenQuery()
        tenarray = [ ]
        item = "ID Process"
        path = win32pdh.MakeCounterPath( ( None, object, name, None, 0, item ) )
        tenarray.append( win32pdh.AddCounter( tenQuery, path ) )
        win32pdh.CollectQueryData( tenQuery )
        time.sleep( 0.01 )
        win32pdh.CollectQueryData( tenQuery )
        for tencounter in tenarray:
            type, val = win32pdh.GetFormattedCounterValue( tencounter, win32pdh.PDH_FMT_LONG )
            win32pdh.RemoveCounter( tencounter )
        win32pdh.CloseQuery( tenQuery )
    return val

processIDs = GetProcessID('OUTLOOK') # Remember this is case sensitive
PQI = 0x400
#open a handle on to the process so that we can query it
OpenProcessHandle = windll.kernel32.OpenProcess(PQI, 0, processIDs)
# OK so now we have opened the process now we want to query it
GR_GDIOBJECTS, GR_USEROBJECTS = 0, 1
print(windll.user32.GetGuiResources(OpenProcessHandle, GR_GDIOBJECTS))
print(windll.user32.GetGuiResources(OpenProcessHandle, GR_USEROBJECTS))
#so we have what we want we now close the process handle
windll.kernel32.CloseHandle(OpenProcessHandle) 
```

希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-10T02:26:23.067

对于 GDI 计数，我认为一个更简单、更干净的监控脚本如下：

```
import time, psutil
from ctypes import *

def getPID(processName):
    for proc in psutil.process_iter():
        try:
            if processName.lower() in proc.name().lower():
                return proc.pid
        except (psutil.NoSuchProcess, psutil.AccessDenied, psutil.ZombieProcess):
            pass
    return None;

def getGDIcount(PID):
    PH = windll.kernel32.OpenProcess(0x400, 0, PID)
    GDIcount = windll.user32.GetGuiResources(PH, 0)
    windll.kernel32.CloseHandle(PH)
    return GDIcount

PID = getPID('Outlook')

while True:
    GDIcount = getGDIcount(PID)
    print(f"{time.ctime()}, {GDIcount}")
    time.sleep(1) 
```

# ios - IOS - Quartzcore 自定义 UIView 带阴影

> ID：15658432
> 
> 赞同：1
> 
> 时间：2013-03-27T12:08:16.817
> 
> 标签：ios, uiview, nib, shadow, quartz-core

我正在实现一个自定义 UIView 以显示在 UIScrollview 中。问题是我需要视图来投下阴影，所以我做了：

```
#import <QuartzCore/QuartzCore.h>
@implementation CustomView

-(void)setupView{

  self.layer.shadowColor = [UIColor blackColor].CGColor;
  self.layer.shadowOpacity = 0.5;
  self.layer.shadowRadius = 1;
  self.layer.shadowOffset = CGSizeMake(.6f, .6f);
  self.layer.cornerRadius = 2;

  [...]

}

-(id)initWithFrame:(CGRect)frame{
  if((self = [super initWithFrame:frame])){
    [self setupView];
  }

  return self;
}

[...] 
```

关键是，当我构建和运行它时，滚动视图非常慢，我只需要删除那些我正在破解“self.layer”的行，滚动视图再次快速流畅。

**向我的自定义视图添加阴影的正确方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:30:57.420

这与`UIView`移动时必须进行的所有重绘有关。

如果您将图层栅格化，它将变得更平滑，这应该可以解决问题：

```
self.layer.rasterizationScale = [UIScreen mainScreen].scale;
self.layer.shouldRasterize = YES; 
```

您可以尝试添加阴影路径：

```
self.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.bounds]; 
```

这可能会有所帮助。

# java - 字符串的java util日期值

> ID：15658435
> 
> 赞同：2
> 
> 时间：2013-03-27T12:08:35.477
> 
> 标签：java, date, java.util.date

这是 EJB 中用于添加预订的方法，我正在尝试将 a 设置为 String Arr 的值，因为 Arr 是一个字符串，它在 Servlet 中获取表单值，我想对 d 的值执行相同的操作 String Dept . 我正在使用`java.util.Date`，它适用于`java.sql.Date`但不适用于`java.util.Date`。

```
public void addBooking(String Arr,  String Dept, String username, String roomnum){
    BookingTableClass booking = new BookingTableClass();

    Date a= Date.valueOf(Arr);//the problem is in these four lines
    booking.setarrivalDate(a);
    Date d= Date.valueOf(Dept);
    booking.setdeptDate(d);

            booking.setCustomerUsername(username);  
    Long rmnum = Long.valueOf(roomnum);
    booking.setRoomNumber(rmnum);} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T12:13:18.550

也许您没有为 Date 类型使用正确的格式，您必须指定您正在使用的格式，为此使用 SimpleDateFormat 类。

```
SimpleDateFormat textFormat = new SimpleDateFormat("yyyy-MM-dd");
String paramDateAsString = "2007-12-25";
Date myDate = null;

myDate = textFormat.parse(paramDateAsString); 
```

希望能帮助到你。此致。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T12:11:54.710

您可以将 java.util.Date 转换为 java.sql.Date 对象，如下所示：

```
java.util.Date now = new java.util.Date();
java.sql.Date date = new java.sql.Date(now.getTime()); 
```

也就是说，您以毫秒为单位获得等效的 java.util.Date，然后使用该值来初始化 java.sql.Date 对象。

# c# - 带强制小数点的双精度字符串

> ID：15658436
> 
> 赞同：8
> 
> 时间：2013-03-27T12:08:35.693
> 
> 标签：c#, string, double, valueconverter

这可能很愚蠢，但这让我很难过。我需要将 a 转换/格式化为`double`强制`string`小数点。

```
1         => 1.0
0.2423423 => 0.2423423
0.1       => 0.1
1234      => 1234.0 
```

基本上，我想输出所有小数，但也要确保四舍五入的值也有冗余`.0`。我确信有一种简单的方法可以实现这一目标。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T12:11:52.893

使用`double.ToString("N1")`：

```
double d1 = 1d;
double d2 = 0.2423423d;
double d3 = 0.1d;
double d4 = 1234d;
Console.WriteLine(d1.ToString("N1"));
Console.WriteLine(d2.ToString("N1"));
Console.WriteLine(d3.ToString("N1"));
Console.WriteLine(d4.ToString("N1")); 
```

[**演示**](http://ideone.com/aCa9A0)

[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

[数字 ("N") 格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#NFormatString)

**更新**

> (1.234).ToString("N1") 产生 1.2，除了删除额外的十进制数字外，它还添加了千位分隔符

好吧，也许您需要实现一个自定义`NumberFormatInfo`对象，您可以从 current 派生`CultureInfo`并使用 in `double.ToString`：

```
var culture = CultureInfo.CurrentCulture;
var customNfi = (NumberFormatInfo)culture.NumberFormat.Clone();
customNfi.NumberDecimalDigits = 1;
customNfi.NumberGroupSeparator = "";
Console.WriteLine(d1.ToString(customNfi)); 
```

请注意，您需要克隆它，因为默认情况下它是只读的。

[**演示**](http://ideone.com/zW9XME)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T12:26:58.417

没有内置方法可以使用该方法将强制附加`.0`到整数末尾`.ToString()`，因为现有格式将根据您指定的小数位数截断或舍入。

我的建议是使用扩展方法滚动您自己的实现

```
public static String ToDecmialString(this double source)
{
    if ((source % 1) == 0)
        return source.ToString("f1");
    else
        return source.ToString();

} 
```

以及用法：

```
double d1 = 1;
double d2 = 0.2423423;
double d3 = 0.1;
double d4 = 1234;
Console.WriteLine(d1.ToDecimalString());
Console.WriteLine(d2.ToDecimalString());
Console.WriteLine(d3.ToDecimalString());
Console.WriteLine(d4.ToDecimalString()); 
```

输出结果：

```
1.0
0.2423423
0.1
1234.0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T12:20:34.813

你可以这样做：如果数字没有小数点，你可以格式化它的输出以强制一个小数点 0，如果它有小数位，只需使用 ToString();

```
double a1 = 1;
double a2 = 0.2423423;
string result = string.Empty;
if(a1 - Math.Floor(a1) >0.0)
       result = a1.ToString();    
else
       result = a1.ToString("F1"); 

if (a2 - Math.Floor(a2) > 0.0)
       result = a2.ToString();
else
       result = a2.ToString("F1"); 
```

当您`"F"`用作格式时，输出将不包含千位分隔符，它后面的数字指定小数位数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-15T08:51:46.723

使用 ToString("0.0###########################")。

它确实有效。我发现它与您的问题[十进制 ToString 格式重复，它至少给出 1 位数字，没有上限](https://stackoverflow.com/questions/8184068/decimal-tostring-formatting-which-gives-at-least-1-digit-no-upper-limit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T12:12:16.237

Double 提供了一种方法`ToString()`，您可以在其中传递`IFormatProvider`-object 说明您希望如何`double`转换。

`0`此外，它应该不惜一切代价显示尾随。

```
value = 16034.125E21;
// Display value using the invariant culture.
Console.WriteLine(value.ToString(CultureInfo.InvariantCulture));
// Display value using the en-GB culture.
Console.WriteLine(value.ToString(CultureInfo.CreateSpecificCulture("en-GB")));
// Display value using the de-DE culture.
Console.WriteLine(value.ToString(CultureInfo.CreateSpecificCulture("de-DE")));
// This example displays the following output to the console: 
//       -16325.62015 
//       -16325.62015 
//       -16325,62015 
//       1.6034125E+25 
//       1.6034125E+25 
//       1,6034125E+25 
```

[这](http://msdn.microsoft.com/en-us/library/shxtf045.aspx)是来自 MSDN 的文档。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-27T12:11:59.097

如果没有给出小数点，您可以转换为字符串，然后附加“.0”

```
string sValue=doubleValue.ToString();
if(!sValue.Contains('.'))
    sValue+=".0"; 
```

编辑：正如评论中提到的那样。可能不是当前文化中的小数分隔符。如果您想为这种情况保存代码，请参阅[本文以检索实际的分隔符。](http://msdn.microsoft.com/de-de/library/system.globalization.numberformatinfo.numberdecimalseparator%28v=vs.80%29.aspx)

# php - 数据库中的 DATETIME 问题

> ID：15658441
> 
> 赞同：1
> 
> 时间：2013-03-27T12:09:01.820
> 
> 标签：php, mysql, datetime, date-arithmetic

我设计了以下代码；计算患者的等待时间和预期时间。如果患者等待的时间过长，该代码还应回显警告。

请注意：Waiting_time 是数据库中的 DATETIME。

这是代码；

```
<?php

$conn = mysqli_connect("localhost","root","") or die ("No connection");
mysqli_select_db($conn, "a&e") or die('Could not select database.');

$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_time,NOW() as now,ABS(TIMEDIFF(NOW(), Arrival_time)) as Waiting_Time FROM Patient";
$result = mysqli_query($conn, $query) or die("Invalid query"); 

echo "<table border='1'>
<tr>
<th>PatientID</th>
<th>Forename</th>
<th>Surname</th>
<th>Gender</th>
<th>Illness</th>
<th>Priority</th>
<th>Waiting Time</th>
</tr>";

while ($row = $result->fetch_object()){

//Select the  expected and discharge time for this patient.
  $query2 = "SELECT Abs(TIMEDIFF(Expected_Time,'00:00:00')) as Expected,Abs(TIMEDIFF(Discharge_Time,'00:00:00')) as Discharge ".
                "FROM priority_time ".
                "WHERE Illness = '".$row->Illness."'".
                    " AND Priority = '".$row->Priority."'".
                ";";

    $result2 = mysqli_query($conn, $query2) or die("Invalid statement: ".$query2);

    $row2 = $result2->fetch_object();
    $expected =  $row2->Expected;

    $discharge  = $row2->Discharge;
    echo "expected-> ".$expected." discharge-> ".$discharge;

    if($expected > $discharge){
        echo "There is a problem with the database consistency, expectedTime must be less than dischargeTime!";
    }
    //Set the patient color.
    if($row->Waiting_Time <  $expected && $row->Waiting_Time <  $discharge){
        echo "<tr>";
    }
    if($row->Waiting_Time >=  $expected && $row->Waiting_Time <  $discharge){
        echo '<tr bgcolor="#FFFF00">';
    }
    if($row->Waiting_Time >  $expected && $row->Waiting_Time >  $discharge){
        echo '<tr bgcolor="#FF0000">';
    }

    //Print patient info
     echo 
      "<td>" . $row->PatientID . "</td>
      <td>" . $row->Forename . "</td>
      <td>" . $row->Surname . "</td>
      <td>" . $row->Gender . "</td>
      <td>" . $row->Illness . "</td>
      <td>" . $row->Priority . "</td>
      <td>" . $row->Waiting_Time . "(".$expected."-".$discharge.") </td>";

    //Close row
    echo "</tr>";

}

echo "</table>";
mysqli_close($conn);
?> 
```

编辑：在每一行，在等待时间列中，它以秒为单位显示等待时间，括号中是 currentTime a 减号和到达时间，仅用于检查。如何将等待时间转换为 hh:mm:ss 格式以便更好地代表用户？

显示；

```
Waiting time 
01:15:42(10500.000000-10500.000000) 
```

为什么显示（10500.000000-10500.000000）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:23:22.957

尝试这个：

```
gmdate("H:i:s", $seconds) 
```

如果这不起作用，请查看[如何将秒转换为时间格式？](https://stackoverflow.com/questions/3856293/how-to-convert-seconds-to-time-format)

**更新：**

要在 SQL 语句中执行此操作，请尝试以下操作：

```
SELECT TIME_TO_SEC(TIMEDIFF('2013-03-27 12:00:00', '2013-03-27 10:00:00')) diff; 
```

所以是这样的：

```
SELECT PatientID
, Forename
, Surname
, Gender
, Illness
, Priority
, Arrival_time
, NOW() as now
, TIME_TO_SEC(TIMEDIFF(NOW(), Arrival_time)) as Waiting_Time 
FROM Patient; 
```

然后你会改变这一行：

```
<td>" . $row->Waiting_Time . "(".$expected."-".$discharge.") </td> 
```

对此：

```
<td>" . gmdate("H:i:s", $row->Waiting_Time) . "(".$expected."-".$discharge.") </td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:29:36.420

在 php 中处理日期和时间时，strtotime() 是你最大的朋友。幸运的是 date() 函数就是你所需要的。将秒转换为可读格式的东西可能如下。

```
$time = strtotime('now');
echo $time . '<br />';
$var =  date('H:i:s',$time);
echo $var; 
```

# javascript - 如何检索 Ember.js 模型的所有属性

> ID：15658442
> 
> 赞同：10
> 
> 时间：2013-03-27T12:09:02.647
> 
> 标签：javascript, ember.js

我正在使用 Ember.js 中的表单，我想检索所有模型属性的列表，以便我可以在不同时刻拍摄表单状态的快照。有没有办法获取模型所有属性的列表？

例如，如果我的模型是：

```
App.User = DS.Model.extend({
  name: DS.attr('string'),
  email: DS.attr('string'),
  current_password: DS.attr('string'),
  password: DS.attr('string'),
  password_confirmation: DS.attr('string'),
  admin: DS.attr('boolean'),
} 
```

然后我想要这样的东西：

```
> getEmberProps('User')

["name", "email", "current_password", "password", "password_confirmation", "admin"] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-08-05T08:26:45.217

您可以简单地在模型上使用[toJSON](http://ember-doc.com/classes/DS.Model.html#method_toJSON)方法并从对象中获取键。

```
Ember.keys(model.toJSON()) 
```

请注意，这不会返回您的关系键。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-10T06:54:12.977

你也可以使用这个： http:
[//emberjs.com/api/data/classes/DS.Model.html#property_attributes](http://emberjs.com/api/data/classes/DS.Model.html#property_attributes) [http://emberjs.com/api/data/classes/DS.Model.html#method_eachAttribute](http://emberjs.com/api/data/classes/DS.Model.html#method_eachAttribute)

```
Ember.get(App.User, 'attributes').map(function(name) { return name; });
Ember.get(userInstance.constructor, 'attributes').map(function(name) { return name; }); 
```

关系也有类似的属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-23T18:39:10.997

打印字段及其值的简单方法：

```
Ember.keys(model.toJSON()).forEach(function(prop) { console.log(prop + " " + model.get(prop)); } ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:46:05.180

没有简单的方法，但您可以尝试这样的自定义 mixin：

```
Ember.AllKeysMixin = Ember.Mixin.create({
    getKeys: function() {
        var v, ret = [];
        for (var key in this) {
            if (this.hasOwnProperty(key)) {
                v = this[key];
                if (v === 'toString') {
                    continue;
                } // ignore useless items
                if (Ember.typeOf(v) === 'function') {
                    continue;
                }
                ret.push(key);
            }
        }
        return ret
    }
}); 
```

你可以像这样使用它：

```
App.YourObject = Ember.Object.extend(Ember.AllKeysMixin, {
 ... //your stuff
});
var yourObject = App.YourObject.create({
  foo : "fooValue";
});
var keys = yourObject.getKeys(); // should be ["foo"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-12T11:02:42.267

2018 年：使用 Ember Data 的[eachAttribute](https://www.emberjs.com/api/ember-data/3.5/classes/DS.Model/methods/eachAttribute?anchor=eachAttribute)。

所以，给定一个模型 Foo：

```
import Model from 'ember-data/model';
import attr from 'ember-data/attr';

export default Model.extend({
    "name": attr('string'),
    "status": attr('string')
}); 
```

让我们通过构造函数获取模型的定义：

```
var record = this.store.createRecord('foo', {
    name: "model1",
    status: "status1"
});
this.modelClass = record.constructor; 
```

并为其每个 Ember Data 属性调用一个函数：

```
modelClass.eachAttribute(function(key, meta){ 
   //meta provides useful information about the attribute type
} 
```

# php - Netbeans PHP 函数参数提示

> ID：15658444
> 
> 赞同：9
> 
> 时间：2013-03-27T12:09:10.220
> 
> 标签：php, netbeans, ide, code-completion, code-hinting

我环顾四周，发现了一些解决相关问题的东西，但不是我正在寻找的东西。

我正在使用 Netbeans，它确实在我身上成长，但是当我去使用一个函数时，“智能感知”提示会正确弹出，但是一旦我输入参数，代码提示就会显示函数签名它的参数消失了。

这会影响我的工作效率，因为我没有记住签名，而且我总是在输入时不得不参考它。

这对于 Netbeans 是否正常，或者有什么方法可以让函数提示一直存在，直到我关闭函数签名的括号？

**更新：** 我刚刚发现 Ctrl + P 会显示参数方法，有没有办法让它自动显示而不是不断地输入 Ctrl + P？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-07-26T16:11:06.320

在函数括号内，键入*Ctrl + P*将出现参数提示（*NetBeans 菜单栏 -> 源代码 -> 显示方法参数*）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T12:49:18.187

显然关闭自动括号关闭将允许智能感知和代码提示正确显示。

# javascript - Kineticjs - 将可拖动图像绑定到画布

> ID：15658446
> 
> 赞同：0
> 
> 时间：2013-03-27T12:09:26.270
> 
> 标签：javascript, canvas, kineticjs

我正在使用 Kinetcjs 库来处理画布中的图像，因此我们可以在画布中拖动图像。

我遇到的一个问题是用户可以将加载到画布中的图像拖出画布。当我们在用户完成图像后尝试获取图像时，这显然会导致问题，因为他们可以在画布的中途上传图像。

无论如何我们可以绑定它，使图像的顶部不能拖过画布的顶部，而图像的底部不能拖过画布的底部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:43:24.520

我已经让它工作了。对于任何对如何做到这一点感兴趣的人，我是这样做的：

```
photo.setDragBoundFunc(function(pos){                           
    var yBound = stage.getHeight()-newPhotoHeight;

    if(pos.y >= yBound && pos.y < 0)  {
        var newY =  pos.y;
    } else if(pos.y < yBound) {
        var newY = yBound;
    } else if(pos.y > 0) {
        var newY = 0;
    } else {
        var newY = pos.y;
    }

    return {
            x: this.getAbsolutePosition().x,
            y: newY
           }
    }); 
```

# css - CSS/SCSS/bootstrap :: 覆盖 bootstrap 中的打印设置 :: 更改背景：透明！对颜色很重要

> ID：15658449
> 
> 赞同：22
> 
> 时间：2013-03-27T12:09:33.880
> 
> 标签：css, twitter-bootstrap, overriding, sass

我的引导 CSS/打印有问题。

在引导 CSS (reset.css) 中，所有内容都被清除以进行打​​印

```
@media print {
  * {
    text-shadow: none !important;
    color: black !important;
    background: transparent !important;
    box-shadow: none !important;
  }
} 
```

但我必须打印几行彩色。我的表如下所示：

```
<div class="container">
    <div id="task-summary">
        <div id="process-summary">
            <table class="table table-condensed">
                <tbody>
                    <tr class="success">
                        <td> 
```

我将它嵌入到我的代码中，但它不起作用：

```
@media print {

  #task-summary{
    .success{
      background-color: #DFF0D7 !important;
    }
  }
} 
```

我已经尝试过使用 display: none 是否排除 css .. 它可以工作（不显示行）并且似乎在正确的位置。

有人知道如何在不编辑 bootstrap 的 reset.css 的情况下设法覆盖 bootstrap css 命令吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-28T19:08:51.257

我有同样的问题。当您打印页面时，该`background-color: ...;`选项不适用于表格行。将 CSS 选择器更改为：

```
@media print {

  #task-summary .success td {
    background-color: #DFF0D7 !important;

    /* add this line for better support in chrome */ 
    -webkit-print-color-adjust:exact;
  }
} 
```

更改后一切都应该正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-11T07:34:22.143

```
@media print {
    .success {
      background-color: #DFF0D7 !important;
    }    
} 
```

或者

```
@media print {
    #task-summary .success {
      background-color: #DFF0D7 !important;
    }  
} 
```

或者

```
@media print {
    #task-summary > #process-summary .success {
      background-color: #DFF0D7;
    }
} 
```

# mysql - 从另一个表中选择具有备用排序字段的行

> ID：15658451
> 
> 赞同：1
> 
> 时间：2013-03-27T12:09:45.757
> 
> 标签：mysql, sql, select

给定一个 *students_exam_rooms* 表：

```
+------------+---------+---------+
| student_id | room_id | seat_no |
+------------+---------+---------+
|          1 |      30 |    1001 |
|          2 |      30 |    1002 |
|          3 |      31 |    2001 |
|          4 |      32 |    2002 |
|          5 |      33 |    3001 |
|          6 |      33 |    3002 |
|          7 |      34 |    4001 |
|          8 |      34 |    4002 |
+------------+---------+---------+ 
```

和 *students_tbl*：

```
+------------+-------------+------+
| student_id | studen_name | year |
+------------+-------------+------+
|          1 | Eric        |    1 |
|          2 | Mustafa     |    1 |
|          3 | Michael     |    2 |
|          4 | Andy        |    2 |
|          5 | Rafael      |    3 |
|          6 | Mark        |    3 |
|          7 | Jack        |    4 |
|          8 | peter       |    4 |
+------------+-------------+------+ 
```

如何从 *students_tbl.year* 订购的 *students_exam_rooms* 中进行选择，但像这样一个接一个：

```
+--------------+------+
| student_name | year |
+--------------+------+
| Eric         |    1 |
| Michael      |    2 |
| Rafael       |    3 |
| Jack         |    4 |
| Mustafa      |    1 |
| Andy         |    2 |
| Mark         |    3 |
| Peter        |    4 |
+--------------+------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:41:01.907

我假设您想按年份的“出现次数”排序，然后按年份排序，例如所有年份的所有第一次出现，按年份排序，然后所有年份的所有第二次出现也按年份排序， 等等。这将是模拟其他 RDBMS 的分析/窗口函数的完美案例：

```
select *
from (
    select 
        s.studen_name,
        s.year,
        ser.*,
        (
            select 1 + count(*)
            from students_tbl s2
            where s.year = s2.year
                and s.student_id > s2.student_id
        ) rank
    from students_tbl s
        JOIN students_exam_rooms ser
            ON s.student_id = ser.student_id
) i_dont_really_want_to_name_this
order by rank, year 
```

这是针对 JW 小提琴的略微调整版本：[http ://www.sqlfiddle.com/#!2/27c91/1](http://www.sqlfiddle.com/#!2/27c91/1)

[Emulating Analytic (AKA Ranking) Functions with MySQL](http://onlamp.com/pub/a/mysql/2007/03/29/emulating-analytic-aka-ranking-functions-with-mysql.html)是一篇很好的文章，提供了更多背景和解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:18:25.690

尝试以下任何一项：

```
SELECT  a.studen_name, a.year
FROM    students_tbl a
        INNER JOIN students_exam_rooms b
          ON a.student_id = b.student_id
ORDER   BY  REVERSE(b.seat_no),
            a.year 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/30c9b/2)

通过使用`Modulo`

```
SELECT  a.studen_name, a.year
FROM    students_tbl a
        INNER JOIN students_exam_rooms b
          ON a.student_id = b.student_id
ORDER   BY CASE WHEN MOD(b.seat_no, 2) <> 0 THEN 0 ELSE 1 END,
            a.year 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/30c9b/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:02:18.520

在我看来，您尝试先按座位排序，然后按年份排序。看着你的`students_exam_rooms`桌子，看起来你从一个简单的座位号开始，并在前面加上`year * 1000`. 所以，如果我们省略年份，它看起来像这样：

```
> select * from fixed_students_exam_rooms;
+------------+---------+---------+
| student_id | room_id | seat_no |
+------------+---------+---------+
|          1 |      30 |       1 |
|          2 |      30 |       2 |
|          3 |      31 |       1 |
|          4 |      32 |       2 |
|          5 |      33 |       1 |
|          6 |      33 |       2 |
|          7 |      34 |       1 |
|          8 |      34 |       2 |
+------------+---------+---------+ 
```

如果你有*那个*表，你的查询很简单：

```
select
  student_name, year

from
  modified_student_exame_rooms
  left join students_tbl using (student_id)

order by
  seat_no, year
; 
```

*使用您当前拥有*的表格，假设“核心座位号”不超过 999，它只会稍微复杂一些。

```
select
  student_name, year

from
  modified_student_exame_rooms
  left join students_tbl using (student_id)

order by
  convert(substr(seat_no, 2), unsigned),
  year
; 
```

# qt - Qt 右键单击 QPushButton

> ID：15658464
> 
> 赞同：9
> 
> 时间：2013-03-27T12:11:01.743
> 
> 标签：qt, right-click, qpushbutton

我正在使用 Qt Creator 为 mineseeper 游戏创建 gui。我怎么知道用右键单击的 QpushButton？为游戏中的旗帜。换句话说，哪个信号用于右键单击？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T12:31:52.787

**在mousePressEvent**插槽中使用过滤器创建您自己的按钮。

qrightclickbutton.h

```
#ifndef QRIGHTCLICKBUTTON_H
#define QRIGHTCLICKBUTTON_H

#include <QPushButton>
#include <QMouseEvent>

class QRightClickButton : public QPushButton
{
    Q_OBJECT

public:
    explicit QRightClickButton(QWidget *parent = 0);

private slots:
    void mousePressEvent(QMouseEvent *e);

signals:
    void rightClicked();

public slots:

};

#endif // QRIGHTCLICKBUTTON_H 
```

qrightclickbutton.cpp

```
#include "qrightclickbutton.h"

QRightClickButton::QRightClickButton(QWidget *parent) :
    QPushButton(parent)
{
}

void QRightClickButton::mousePressEvent(QMouseEvent *e)
{
    if(e->button()==Qt::RightButton)
        emit rightClicked();
} 
```

现在像这样连接

```
QRightClickButton *button = new QRightClickButton(this);
ui->gridLayout->addWidget(button);
connect(button, SIGNAL(rightClicked()), this, SLOT(onRightClicked())); 
```

在 MainWindow.cpp 中创建一个插槽。

```
void MainWindow::onRightClicked()
{
    qDebug() << "User right clicked me";
} 
```

这个对我有用！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T12:23:07.077

我认为 QPushButton 是在内部实现的，只听鼠标左键。但是您可以轻松地扩展 QPushButton 并重新实现假设鼠标释放事件并在按下鼠标右键时执行您的操作，例如发出自定义`rightClicked()`信号，例如：

```
signals:
    void rightClicked();

protected:
    void mouseReleaseEvent(QMouseEvent *e) {
        if (e->button() == Qt::RightButton) emit rightClicked();
        else if (e->button() == Qt::LeftButton) emit clicked();
    } 
```

...或者您可以创建转发 mouseEvent 指针的 clicked 信号的重载，以便您可以在按钮之外进行相同的检查。

```
signals:
    void clicked(QMouseEvent *);

protected:
    void mouseReleaseEvent(QMouseEvent *e) {
        emit clicked(e);
    } 
```

然后，您在将按钮`clicked(QMouseEvent *)`信号连接到的插槽中进行检查并相应地进行操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-17T10:11:17.993

我刚刚编写了这个小助手适配器，以使任何现有的按钮都可以右键单击，而无需对其进行子类化：

```
class CRightClickEnabler : public QObject
{
public:
    CRightClickEnabler(QAbstractButton * button): QObject(button), _button(button) {
        button->installEventFilter(this);
    };

protected:
    inline bool eventFilter(QObject *watched, QEvent *event) override {
        if (event->type() == QEvent::MouseButtonPress)
        {
            auto mouseEvent = (QMouseEvent*)event;
            if (mouseEvent->button() == Qt::RightButton)
                _button->click();
        }
        return false;
    }

private:
    QAbstractButton* _button;
}; 
```

用法：

```
connect(ui->pushButton, &QPushButton::clicked, [](){qDebug() << "Button clicked";});
new CRightClickEnabler(ui->pushButton); 
```

从现在开始，`clicked`信号将由右击和左击触发。没有必要删除这个对象——它`ui->pushButton`用作父对象，当父对象被销毁时，Qt 会自动删除它。

显然，如果需要，您可以编写 2 行代码（字面意思）在此处声明一个新信号，并在右键单击而不是 时发出该信号`clicked`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-28T20:46:19.710

我也想建议这个选项，不需要事件过滤器/其他东西......

```
 self.button.released.connect(self.doStuff)
    self.button.setContextMenuPolicy(Qt.ContextMenuPolicy.CustomContextMenu)
    self.button.customContextMenuRequested.connect(partial(self.doStuff, False))

    def doStuff(self,state=True,p=QPoint()):
        print("True for left, False for right!",state) 
```

# c# - 我可以在视图中使用 IEnumerable<> 吗？

> ID：15658465
> 
> 赞同：1
> 
> 时间：2013-03-27T12:11:01.993
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

**在 _Layout.cshtml**

```
 @model DynaPortalMVC.Models.Page
@using System.Linq
<ul>
     @IEnumerable<model.Page> pages = model.Where(x=>x.CompanyID == 1);
     @foreach (var item in pages)
     {
       <li>item.Title</li>
     }
 </ul> 
```

在视图中，我试图过滤名为“page”的模型对象并获取 id 为 1 的页面列表。我需要遍历它以显示菜单。

控制器内的代码

```
public ActionResult Menu(string PageName)
    {
        //
        return View(PageName, db.Pages);
    } 
```

请告诉我，如何将此模型对象过滤到列表中？我在使用 IEnumerable 时遇到错误。

**解决了**

我在视图页面中将模型对象更改为 IEnumerable。

```
@model IEnumerable<DynaPortalMVC.Models.Page> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:14:47.677

您可以跳过将查询结果分配给 IEnumerable 变量，除非您将在页面的其他位置使用它。所以你可以这样做：

```
@model DynaPortalMVC.Models.Page
@using System.Linq
<ul>
     @foreach (var item in model.Where(x=>x.CompanyID == 1))
     {
       <li>@item.Title</li>
     }
 </ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:13:09.323

你需要

```
@ {IEnumerable<model.Page> pages = Model.Where(x=>x.CompanyID == 1);} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T10:23:01.100

```
@model IEnumerable<DynaPortalMVC.Models.Page>
@{
    ViewBag.Title = "Page";

} 
```

# ember.js - EmberJS：如何防止 Ember 干扰 jQuery.extend？

> ID：15658466
> 
> 赞同：1
> 
> 时间：2013-03-27T12:11:04.010
> 
> 标签：ember.js

在我的 Ember 应用程序中，我需要操作（排序、过滤等）大量与 UI 无关的对象。由于它们有很多而且嵌套很深，所以我没有将它们声明为 Ember 对象，而是“纯”Javascript 对象（数组和 {}）。我不需要所有的 Ember mixin。

我的应用程序开始变慢。查看详细信息，这是我发现的：

在某些时候我做了一个简单的：

```
var b = $.extend(true, [], a); // a is a pure javascript object 
```

但是当我检查 b 时，它看起来已经变成了一个 Ember 对象。它有很多属性，比如 addArrayObserver、addBeforeObserver 等等。

我该如何防止这种情况发生？

谢谢

PJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:52:13.557

Ember 会自动扩展默认的 Javascript 数组以添加功能，因此即使您使用`[]`.

您可以通过在加载 Ember.js 之前设置配置标志来禁用这些扩展：

```
window.Ember = {};
Ember.EXTEND_PROTOTYPES = false; 
```

这在[其中一个指南页面](http://emberjs.com/guides/configuring-ember/disabling-prototype-extensions/)中有详细说明。

# localhost - 无法让 localhost 同时显示 WampServer 索引和动态 url

> ID：15658468
> 
> 赞同：6
> 
> 时间：2013-03-27T12:11:32.613
> 
> 标签：localhost, wamp, apache, wampserver

我已经安装了 Wamp，所以我可以运行我构建的一些简单的动态站点。我希望能够拥有三个或四个并学习如何在本地级别做事，然后将改进的文件上传到实时站点，而不必由于不同的位置/路径等而重写部分。

为了让 WampServer 索引页面显示我去 http-vhosts.conf 并添加

`<VirtualHost 127.0.0.1>
ServerName localhost
DocumentRoot "E:/wamp/www"
</VirtualHost>`

我知道我将标记为 mysite.local 的站点目录放入 E:wamp/www，因此路径变为 E:wamp/www/mysite.local。然后我去 http-vhosts.conf 并添加

`<VirtualHost *:80>
ServerName mysite.local
DocumentRoot "E:/wamp/www/mysite.local"
</VirtualHost>`

我的主机文件有

```
127.0.0.1       localhost  
127.0.0.1       mysite.local 
```

我的 httfp.conf 有

```
# Virtual hosts  
Include conf/extra/httpd-vhosts.conf 
```

所以我完成这一切的问题是，当我在 url 中键入 localhost 时，我的 WampServer 索引显示正常，并且 mysite.local 出现在“你的项目”下的那个索引页面上，这一切都很好，但是当我点击 mysite.local来自 WampServer 的链接，url 更改为 localhost/mysite.local 而不是 mysite.local，然后当我单击来自 localhost/mysite.local 的页面链接时，我得到 localhost/mysite.local/linkedpage 作为 url 和 404 错误。

mysite.local 作为 url 也会打开 WampServer 索引页面

如果我从 http-vhosts.conf 中注释掉 ServerName localhost 并重新启动 apache。当我尝试将 mysite.local 作为 url 时，我得到了我想要的东西 - mysite 有效，所有动态链接都有效。但是 WampServer 索引是一个 404 错误。

我想要做的就是登录 WampServer 并从“您的项目”列表中访问各个站点。

请帮助一个numty

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T10:57:59.140

`hosts`文件并`httpd.conf`看起来不错。

有些事情要尝试...

*   `<VirtualHost *:80>`对于两个虚拟主机。

*   确保`DocumentRoot`字符串有一个终端`/`。

*   对于根虚拟主机，`ServerName localhost:80`.

*   `localhost/`要通过虚拟主机浏览，请始终从 url 中省略。“您的项目”链接包括`localhost/`和访问项目作为来自根的路径，而不是作为独立站点，每个站点都有自己的根（这是虚拟主机为您提供的）。

*   （WAMP 2）当其他一切都修复后......要使根“index.php”页面的“您的虚拟主机”部分活跃起来，请按照[这些说明](http://arbitraryknowledge.com/web-development/how-to-properly-virtual-host-in-wamp-2/)进行操作。我只是这样做了，并不后悔。现在我可以单击链接来访问我作为虚拟主机服务的网站 - 耶！正是我一直想要的“你的项目”链接，但没有得到。

顺便说一句，`<VirtualHost>...</VirtualHost>`指令是将每个主机名绑定到服务器文件系统中的特定路径的东西，因此“E：/wamp/www/”中的子目录不需要“.local”后缀。从目录本身中删除“.local”后，对`DocumentRoot`条目进行相应的更改，例如`DocumentRoot "E:/wamp/www/mysite/"`. 但请务必在“ServerName”条目中保留“.local”，例如。`ServerName mysite.local`, 以匹配“主机”文件中的条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T22:15:43.230

请参阅下面的合理虚拟主机定义

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

## must be first so the the wamp menu page loads
<VirtualHost *:80>
    ServerAdmin webmaster@homemail.net
    DocumentRoot "D:/wamp/www"
    ServerName localhost
    ServerAlias localhost
    <Directory  "D:/wamp/www">
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@homemail.net
    DocumentRoot "D:/websrc/www/project1"
    ServerName project1.dev
    ServerAlias project1.dev www.project1.dev
    Options Indexes FollowSymLinks
    <Directory "D:/websrc/www/project1">
        AllowOverride All
        Order Deny,Allow
        Allow from 127.0.0.1
        Allow from 192.168.2
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@homemail.net
    DocumentRoot "D:/websrc/www/project2"
    ServerName project2.dev
    ServerAlias project2.dev www.project2.dev
    Options Indexes FollowSymLinks
    <Directory "D:/websrc/www/project2">
        AllowOverride All
        Order Deny,Allow
        Allow from 127.0.0.1
        Allow from 192.168.2
    </Directory>
</VirtualHost> 
```

您将不得不更改目录名称以适应您的情况。

还要记住将您的虚拟主机名称添加到您的 HOSTS 文件中

c:\windows\system32\drivers\etc\hosts

```
> 127.0.0.1 project1.dev
> 127.0.0.1 project2.dev 
```

在我看来，虚拟主机最好设置在 /wamp/www 文件夹结构之外的某个地方。在我使用的示例中参见上面 d:\websrc\www\project1

您使用直接键入浏览器地址字段的 project1.dev 运行虚拟主机。

如果您想在 wamp 主页上查看您的虚拟主机，请执行以下操作：

创建一个文件夹 ?:/wamp/vhosts 在该文件夹中创建文件，命名如下： project1.dev.conf project2.dev.conf ...等

它们不需要任何内容​​，只需要正确的名称来匹配您的虚拟主机名称

然后这些将显示在您的虚拟主机标题下的 wamp 主页上，您可以单击它们以启动它们。

# windows - 如何使批处理文件将字符串作为命令运行？

> ID：15658475
> 
> 赞同：33
> 
> 时间：2013-03-27T12:11:54.167
> 
> 标签：windows, batch-file, cmd

我想制作一个批处理文件来规避计算机上的一些 cmd 问题，但为此我需要能够接受 String 用户输入并将其作为命令运行。

基本上我想要做的是在批处理文件要求输入时输入命令，并让计算机运行该命令，类似于 python 的 os 模块（类？）

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-27T12:16:59.580

只需将字符串分配给一个变量，然后“执行”该变量，就好像它是一个程序一样

例如

```
set  myvar=ECHO Hello, World!
%myvar% 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T13:32:40.433

使用`set /p`命令提示输入。此命令还会显示一条消息。例子：

```
@echo off
set "command=dir"
set /p "command=type in a command: "
echo.command is: %command%
echo.press any key or ^<CTRL+C^> to abort . . .
>nul pause
%command% 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T14:10:11.680

在最简单的情况下，您想使用`set /p`提示输入命令，将环境变量设置为结果，然后简单地自行扩展环境变量，操作系统将尝试将其作为命令执行。

```
SET /P COMMAND=Command:
%COMMAND% 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-12T00:37:55.470

您可以使用批处理 for 循环，这适用于我在命令提示符下，但不适用于电源外壳：

```
Microsoft Windows [Version 6.3.9600]
(c) 2013 Microsoft Corporation. All rights reserved.

C:\Users\Administrator>FOR /F "delims=" %i IN ('python -c "print('set wow=yep')"') DO set toexec=%i

C:\Users\Administrator>set toexec=set wow=yep

C:\Users\Administrator>%toexec%

C:\Users\Administrator>echo %wow%
yep 
```

# webview - 如何减少在 Android WebView 中启动 CSS 动画/过渡的延迟？

> ID：15658479
> 
> 赞同：8
> 
> 时间：2013-03-27T12:11:59.140
> 
> 标签：webview, android-webview, delay, css-transitions, css-animations

我正在尝试在 Android WebView 中使用 CSS3 动画，但在启动动画时出现了非常烦人的延迟（大约 500 毫秒）。

动画运行流畅，没有延迟，但开始时有延迟。由于没有滞后，我认为这不是性能问题。或者它可能是？

这不是默认的 300 毫秒 onclick 延迟，我已经更改为 ontouchstart 并且当我执行动画/过渡以外的任何操作时，没有延迟。只有这两个。

它也不是动画延迟属性，我已经将它设置为 0。

任何可能的解释/解决方案？

PS：我试图运行的动画/过渡是带有`transform: translateX()`属性的。之前，我尝试使用`left: Xpx`，但在动画过程中出现了滞后。使用变换，没有滞后，但有延迟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T07:35:14.903

我有同样的问题，未能找到合理的解决方案。我尝试了不同的方法，这些是我的结论：

*   使动画更长使其看起来更流畅，但不会减少开始时的延迟
*   关闭硬件加速使动画更快（延迟也减少），但一些帧被丢弃并且动画不再流畅
*   全部更改`translate3d`为`translateX`// `translateY`-`translateZ`没有视觉差异
*   将动画更改为通过 JavaScript (`transitionEnd`事件) 控制的多个过渡会使其变慢，并在途中出现多个打嗝（每次`transitionEnd`被触发时）。

我的猜测是 CSS 动画在 Android 上很慢，需要一些预计算才能显示出来；因此一开始的延迟。我们可能需要等待 Chrome 成为 Android 的默认浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T00:55:02.540

我在股票浏览器上遇到了同样的问题。事实证明，您可以将其添加到您正在制作动画的块中：

```
-webkit-backface-visibility: hidden;
-webkit-perspective: 1000; 
```

这应该使动画平滑，使它们更快地开始，并消除动画前后的闪烁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T18:51:53.663

我不确定它是否有助于延迟，但也许您应该使用`translate3d(x,0,0)`而不是`translateX`，因为 3D 转换在硬件上运行。

我现在找不到这方面的参考资料，但我记得在 Google Android HTML Developers 网站上读过一篇关于它的文章。

# javascript - 隐藏浏览器的地址栏

> ID：15658480
> 
> 赞同：0
> 
> 时间：2013-03-27T12:12:00.080
> 
> 标签：javascript, jquery, browser, address-bar

我的客户要求在他访问项目后立即隐藏浏览器的地址栏。我正在尝试找出一种在 load 时触发全屏事件的方法。但显然这无法完成，因为 requestfullscreen 只能通过用户事件调用（点击、按键...）

这是我的代码：

```
 function goFs(id) {
    var element = document.getElementById(id);

    if (element.mozRequestFullScreen) {
        element.mozRequestFullScreen();
    } else if (element.webkitRequestFullScreen) {
        element.webkitRequestFullScreen();
    }
}
//goFs('test'); 
```

是否有任何技巧可以在 web 应用程序加载时模拟全屏模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:13:59.323

这是不可能的。浏览器极力抵制向用户隐藏他们正在访问的 URL（因为这将极大地有助于执行网络钓鱼攻击）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:29:08.180

我发现这样做的唯一方法是在您的第一页中使用弹出窗口（例如 index.hxtml）

```
<script type="text/javascript">
function popupAppli(){
    parent.opener = top;
    params = "menubar=no,toolbar=no,location=no,left=0,height=701,width=1016,top=0,scrollbars=no,status=no,resizable=yes";
    loc="(another xhtml page)";
    popsApp = window.open(loc,"My application",params);
    if(parent.location != popsApp.location){
        parent.close();
    }           
</script> 
```

然后，您在 body onload 上调用该函数

```
<body onload="popupAppli();"></body> 
```

这不是真正的全屏，但我没有找到其他解决方案

# c# - RichTextBox 上次更改检查

> ID：15658483
> 
> 赞同：0
> 
> 时间：2013-03-27T12:12:09.490
> 
> 标签：c#, forms, richtextbox

我如何知道用户对 RichTextBox 中的文本所做的最后一次更改？有功能吗？或者我需要为其构建一个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:18:32.077

将事件添加到您的文本框。选择您的文本框，转到属性，在事件选项卡中，您将看到不同的事件。查找 TextChanged 事件。将该事件添加到您的代码中。

每次更改文本框时都会触发此功能。您可以在该函数中编写逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:34:53.033

`UpdatedChar`将包含新添加到 textbox1 的字符

`OldValue`将始终在 textbox1 中包含旧值

***从您的示例***中：如果我的文本是：“文本”，然后单击 8，则文本将为“文本 8”，因此字符为 8。

`UpdatedChar`=8 和 `OldValue`= 文本

```
 public string OldValue = string.Empty;

    public char UpdateChar;

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        var newText = sender as TextBox;

        foreach (var val in newText.Text)
        {
            if(!OldValue.ToCharArray().Contains(val))
                UpdateChar = val;
        }

        OldValue = newText.Text;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:15:10.050

它提供了一个`event`被调用的`TextChanged`. 您需要定义一个`EventHandler`并指定当文本更改时会发生什么。

例如：

```
private void rtb_TextChanged(object sender, EventArgs e)
{
    char c = rtb.Text.ElementAt(rtb.Text.Length);
    if(c == mystring.ElementAt(mystring.Length))
      //is equal
    mystring = rtb.Text; //save string for next comparison
} 
```

现在您需要将事件处理程序添加到事件中，例如

```
rtb.TextChanged += rtb_TextChanged; 
```

[在此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)查找文档。

# asynchronous - Trigger.io + Angular.js 并在调用 forge.ajax 后更新视图

> ID：15658485
> 
> 赞同：2
> 
> 时间：2013-03-27T12:12:13.807
> 
> 标签：asynchronous, angularjs, trigger.io

遇到问题，到目前为止无法为看似相似的 SO 问题找到任何解决方案。问题是这样的：

使用 Trigger.io 的 forge.ajax，我的 Angular.js 视图在数据返回后不会更新。我意识到这是因为 forge.ajax 是一个异步函数，并且在视图已经显示后返回数据。我尝试使用 $rootScope.apply() 来更新视图，但它对我不起作用，如我见过的许多示例所示。

请参阅下面的控制器代码：

```
function OfferListCtrl($scope) {

   $scope.offers = [];

   $scope.fetchOffers = function(callback) {

       $scope.offers  = [];

       var successCallback = function(odataResults) {
           var rawJsonData = JSON.parse(odataResults);
           var offers = rawJsonData.d;
           callback(offers);
        };

       var errorCallback = function (error){
            alert("Failure:" + error.message);
       };

       forge.request.ajax({
           type: 'GET',
           url: 'https://www.example.com/ApplicationData.svc/Offers',
           accepts: 'application/json;odata=verbose',
           username: 'username',
           password: 'password',
           success: successCallback,
           error: errorCallback
       });

    };

    $scope.fetchOffers(function(offers) {
        $scope.offers = offers;
        forge.logging.info($scope.offers);
    });
} 
```

那里的所有代码都可以正常工作，并且 $scope.offers 会使用数据库中的 Offer 数据填充。记录功能显示数据正确，格式正确。

我曾尝试在逻辑位置（以及一些不合逻辑的位置）使用 $rootScope.apply()，但无法更新视图。如果您有任何想法，我将如何使它工作，我将不胜感激。

**编辑：添加了 HTML**

HTML 如下。注意带有 ng-click="refresh()" 的按钮。这只是一种解决方法，所以我至少可以看到数据。它调用一个执行 $rootScope.apply() 的单行刷新函数，该函数确实更新了视图。

```
 <div ng-controller="OfferListCtrl">
        <h1>Offers</h1>
      <ul>
        <li ng-repeat="offer in offers">
            <p>Description: {{offer.Description}}<br />
               Id: {{offer.Id}}<br />
              Created On: {{offer.CreatedOn}}<br />
              Published: {{offer.Published}}<br />
            </p>
        </li>
      </ul>
  <input type="button" ng-click="refresh()" value="Refresh to show data" />
    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T13:28:04.373

你需要改变

```
$scope.fetchOffers(function(offers) {
    $scope.$apply(function(){
        $scope.offers = offers;
    });
    forge.logging.info($scope.offers);
}); 
```

这是因为对 的所有更改`$scope`都必须在角度范围内进行，在这种情况下，由于您使用`forge`回调调用 ajax 请求并没有在角度框架内执行，这就是它不起作用的原因。

在这种情况下，您可以使用[$scope.$apply()](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)在 Angular 框架内执行代码。

查看`$apply()`方法文档

> $apply() 用于从 Angular 框架外部执行 Angular 表达式。（例如来自浏览器 DOM 事件、setTimeout、XHR 或第三方库）。因为我们正在调用 Angular 框架，所以我们需要执行适当的异常处理范围生命周期，执行 watch。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:23:17.883

做这个

```
function MyController($scope, myService) 
{
    myService.fetchOffers(data){
        //assign your data here something like below or whateever
        $offers = data 
        $scope.$apply();
    }
}); 
```

谢谢 Dhiraj

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T14:52:05.810

> When I do that I have an error like : "$digest already in progress"... I'm Working with $q...
> 
> Someone knwo how I can resolve this issue ?

yes, this is caused where ur data comes fast enough and angular has not finished his rendering so the update cant update "outside" angular yet.

so use events: [http://bresleveloper.blogspot.co.il/2013/08/angularjs-and-ajax-angular-is-not.html](http://bresleveloper.blogspot.co.il/2013/08/angularjs-and-ajax-angular-is-not.html)

# mysql - MySQL对多个表的列添加唯一约束？

> ID：15658487
> 
> 赞同：1
> 
> 时间：2013-03-27T12:12:16.240
> 
> 标签：mysql, sql

这是我想要做的一个例子：

我有 3 张桌子：

*   村庄（id，名称）
*   家庭 (id, village_id)
*   人员（first_name、last_name、family_id）

我想确保同一个村子里没有两个人的名字和姓氏相同。

基本上我想做这样的事情：

```
ALTER TABLE persons 
 ADD UNIQUE (first_name, last_name, households.village_id 
            WHERE household_id=households.id) 
```

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:27:04.750

我认为没有简单的方法可以做到这一点。

您可能想尝试在插入/更新之前创建触发器并在您的自定义条件上抛出错误。但这高度依赖于您的 MySQL 版本：在 5.5 版本之前，我相信没有正确的方法来引发错误 - 通常人们使用诸如调用不存在的程序之类的技巧。但如果您的版本 >5.5，您可以使用 SIGNAL 语句：[http ://dev.mysql.com/doc/refman/5.5/en/signal.html](http://dev.mysql.com/doc/refman/5.5/en/signal.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:18:11.300

你不能直接这样做，但如果这是为了存储真实世界的数据，理论上两个同名的人可以住在一个村庄里，所以这可能不是最好的主意吗？

如果您坚持走这条路线，那么我建议使用存储过程来处理对该表的插入，并接受用户名和村庄等参数。然后，存储过程可以在 INSERT 之前执行 SELECT 以检查冲突。这将取代任何 INSERT 查询。更新还需要通过程序处理以防止冲突。

# java - java.awt.HeadlessException

> ID：15658493
> 
> 赞同：2
> 
> 时间：2013-03-27T12:12:35.730
> 
> 标签：java

```
JFileChooser chooser = new JFileChooser();
JDialog dialog=new JDialog();
dialog.setAlwaysOnTop(true);
/*System.out.println("is always on top?"+dialog.isAlwaysOnTop());*/
chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
int returnVal = chooser.showOpenDialog(dialog);

String path = null;

if(returnVal == JFileChooser.APPROVE_OPTION) {

    path=chooser.getSelectedFile().getAbsolutePath();

} 
```

我已经在 Servlet 的方法中编写了这段代码。`doGet`当我部署在 linux 服务器中时出现以下异常：

```
java.awt.HeadlessException
    at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159) 
```

有谁知道如何克服这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-24T23:30:56.953

> **无头异常**
> 
> 在不支持键盘、显示器或鼠标的环境中调用依赖于键盘、显示器或鼠标的代码时引发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T12:35:37.977

你的 HTML 表单应该是这样的：

```
<form action="upload" method="post" enctype="multipart/form-data">
    <input type="file" name="file" />
    <input type="submit" />
</form> 
```

然后，使用[Apache Commons FileUpload](http://commons.apache.org/fileupload)，您可以在 Servlet 中处理上传的文件。有关更多信息，请参阅他们的[用户指南](http://commons.apache.org/fileupload/using.html)和[常见问题解答](http://commons.apache.org/fileupload/faq.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-08T14:55:45.637

在 Fedora 和其他一些 Linux 发行版中，默认情况下只安装无头 Java 运行时。您可能需要安装完整的 java 运行时：

`sudo yum install java-1.8.0-openjdk`

来源：[https ://github.com/chatty/chatty/issues/261#issuecomment-392228006](https://github.com/chatty/chatty/issues/261#issuecomment-392228006)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T12:29:40.777

Web 应用程序通常在无头的后端服务器上运行。除了在 Applet 中运行的 GUI 之外，最好避免使用任何 GUI。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-17T21:00:16.333

如果你在低权限的 Linux 下运行它，你会得到：

```
java.lang.RuntimeException: Failed to create component for 'frame' reason: java.awt.HeadlessException
    at Pp$_run_closure1.doCall(Pp2.groovy:17)
    at Pp.run(Pp2.groovy:15)
    at Pp$run.call(Unknown Source)
    at Pp.main(Pp2.groovy:12)
Caused by: java.awt.HeadlessException 
```

您必须以正确的权限运行它。

首先尝试使用最大权限：

```
sudo groovy MyClass.groovy 
```

这应该可以解决您的问题。

# php - MySQL时区混淆

> ID：15658497
> 
> 赞同：3
> 
> 时间：2013-03-27T12:12:42.443
> 
> 标签：php, mysql

我完全不知道插入到底是怎么回事。基本上，我试图做正确的事情，将数据库中的所有内容以 UTC 存储，然后根据用户的信息转换为本地时区。我有很多查询都可以正常工作，但是这个插入查询正在给工作带来麻烦。

```
$adt = date('Y-m-d') . " " . $_POST['Time'];
echo $adt;
$tmp_dt = new DateTime($adt, new DateTimeZone($tz));
echo $tmp_dt->format('H:i:s');  
$tmp_dt->setTimezone(new DateTimeZone('UTC'));
$UTC_time = $tmp_dt->format('H:i:s');
echo $UTC_time;

echo 'date_default_timezone_set: ' . date_default_timezone_get() . '<br />';
mysql_select_db($db_name, $JewelryDB);
mysql_query("SET time_zone = '+00:00';");

$updateSQL = sprintf("INSERT INTO reminder_cfg 
                    (id, day_of, day_of_advance, day_prior, default_time, week_prior, 2_week_prior, 3_week_prior, 4_week_prior, 5_week_prior, day_after, 2_week_after, 50_day_after) 
                    VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)
                    ON DUPLICATE KEY UPDATE day_of = %s, day_of_advance = %s, day_prior = %s, default_time = %s, week_prior = %s, 2_week_prior = %s, 3_week_prior = %s, 4_week_prior = %s, 5_week_prior = %s, day_after = %s, 2_week_after = %s, 50_day_after = %s",
                   GetSQLValueString($jeweler, "text"),
                   GetSQLValueString($_POST['DayOf'], "text"),
                   GetSQLValueString($_POST['Advance'], "text"),
                   GetSQLValueString($_POST['DayPrior'], "text"),
                   GetSQLValueString($UTC_time, "text"),
                   GetSQLValueString($_POST['WeekPrior'], "text"),
                   GetSQLValueString($_POST['2WeeksPrior'], "text"),
                   GetSQLValueString($_POST['3WeeksPrior'], "text"),
                   GetSQLValueString($_POST['4WeeksPrior'], "text"),
                   GetSQLValueString($_POST['5WeeksPrior'], "text"),
                   GetSQLValueString($_POST['DayAfter'], "text"),
                   GetSQLValueString($_POST['2WeeksAfter'], "text"),
                   GetSQLValueString($_POST['50DaysAfter'], "text"),
                   GetSQLValueString($_POST['DayOf'], "text"),
                   GetSQLValueString($_POST['Advance'], "text"),
                   GetSQLValueString($_POST['DayPrior'], "text"),
                   GetSQLValueString($_POST['Time'], "text"),
                   GetSQLValueString($_POST['WeekPrior'], "text"),
                   GetSQLValueString($_POST['2WeeksPrior'], "text"),
                   GetSQLValueString($_POST['3WeeksPrior'], "text"),
                   GetSQLValueString($_POST['4WeeksPrior'], "text"),
                   GetSQLValueString($_POST['5WeeksPrior'], "text"),
                   GetSQLValueString($_POST['DayAfter'], "text"),
                   GetSQLValueString($_POST['2WeeksAfter'], "text"),
                   GetSQLValueString($_POST['50DaysAfter'], "text"));

$Result1 = mysql_query($updateSQL, $JewelryDB) or die("Insert query error: " . mysql_error()); 
```

代码中的 echo 语句显示我的时区转换按预期工作，但插入语句以某种方式减去 5 小时以在本地时区插入时间。这是一个共享/托管服务器，所以我不能简单地将系统时间设置为 UTC。我认为 MySQL“SET time_zone”会纠正这个问题。

请帮忙。这让我发疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:50:35.013

Mysql makes a distinction between the `timestamp` data type and the confusingly similar `datetime` data type. The `datetime` type has an implicit time zone (defined by you according to the weather outside your window), while the values stored in the `timestamp` type are implicitly converted to unixtime (UTC). If you want your time zone conversions to stick, you should store your values as `datetime` rather than `timestamp`.

# wpf - 如何从同一 TreeViewItem 中的 ComboBox SelectionChanged 事件中将焦点设置在文本框上

> ID：15658498
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:12:42.990
> 
> 标签：wpf, focus, treeviewitem

所以`DataTemplate`对于`TreeViewItem`：

```
<DataTemplate>
    <StackPanel Orientation="Horizontal">
        <ComboBox Name="CB" />
        <TextBox Name="TB" />
    </StackPanel>
<DataTemplate> 
```

`TextBox`更改选择时如何将焦点放在`ComboBox`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:12:35.953

如果您戴上它`FocusManager.FocusedElement="{Binding ElementName=TB}"`，它会在您单击打开和关闭后将`ComboBox`焦点发送到（即使您没有选择任何内容），这最终对我来说效果很好，尽管我确信有更好的方法。`TextBox``ComboBox`

# winforms - 如何仅在系统托盘中显示 VB 应用程序

> ID：15658501
> 
> 赞同：1
> 
> 时间：2013-03-27T12:12:50.467
> 
> 标签：winforms, visual-studio-2010

是否有可能我们只能在系统托盘（屏幕右下角的托盘）中显示应用程序，而不是像通常应用程序在底部栏中打开的那样？如果是，那么我们如何在 Visual Basic 2010 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:08:35.603

您可以在 Windows 窗体上将 showInTaskbar 属性设置为 false。此外，您可以将 Visible 设置为 false。

在您的设计器中，您可以将 notifyIcon 添加到表单中，这是您正在搜索的典型托盘图标。

# javascript - jQuery 特殊事件 API

> ID：15658512
> 
> 赞同：2
> 
> 时间：2013-03-27T12:13:45.433
> 
> 标签：javascript, jquery, events

我正在创建一个特殊事件，如[Brandon Aaron](http://brandonaaron.net/blog/2009/03/26/special-events)的文章中所述， 此事件需要在窗口调整大小时触发。

```
$.event.special.myevent = {
setup: function () {
    $(window).bind("resize", $.event.special.myevent.handler);
},

teardown: function () {
    $(window).unbind("resize", $.event.special.myevent.handler);
},

handler: function (e) {
    var $this = $(this);

    //some other rulles

    console.log("handler function");

    e.type = "myevent";

    jQuery.event.handle.apply(this, arguments);
}

} 
```

绑定到事件：

```
$("#myDiv1").bind("myevent", function () {
    alert("my event sub");
}) 
```

问题： `$("#myDiv1")`没有收到事件。这似乎与在设置中我触发`$(window)`而不是`$(this)`.

问题是我怎样才能让事件依赖于其他对象上发生的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:25:12.617

您可以使用[`$.proxy`](http://api.jquery.com/jQuery.proxy/)更改`this`函数内部的引用：

```
setup: function () {
    $(window).on("resize.myevent", $.proxy($.event.special.myevent.handler, this));
},

teardown: function () {
    $(window).off("resize.myevent");
}, 
```

[**小提琴**](http://jsfiddle.net/7BLvQ/2/)

我使用了一个事件命名空间来更轻松地删除处理程序，因此您不需要引用由`$.proxy`.

# javascript - Jquery在创建新行时不向最后一行添加索引

> ID：15658514
> 
> 赞同：0
> 
> 时间：2013-03-27T12:13:47.210
> 
> 标签：javascript, jquery

请有人告诉我为什么第一行得到索引值 1 但每隔一个新行也得到 1 而不是 2,3,4 等等。

```
<!DOCTYPE html>
<head>
    <meta charset="utf-8">
</head>

<body>
    <form>
        <table>
            <thead>
                <tr>
                    <th scope="col">Track</th>
                    <th scope="col">Album</th>
                    <th scope="col">Artist</th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td><input name="track[0]" id="track"></td>
                    <td><input name="album[0]" id="album"></td>
                    <td>
                        <select name="artist[0]" id="artist">
                            <option value="">Please select</option>
                            <option value="1">Joe Bloggs</option>
                            <option value="2">Jack Bloggs</option>
                            <option value="3">Tina Bloggs</option>                              
                        </select>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>

    <button>Add Row</button>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>
    $(document).ready(function($)
    {
        // trigger event when button is clicked
        $("button").click(function()
        {
            // add new row to table using addTableRow function
            addTableRow($("table"));
            // prevent button redirecting to new page
            return false;
        });

        function addTableRow(table)
        {   

            var $tr = $(table).find("tr:last").clone();
            alert($tr);
            var fname = $("#track").attr("name");
              var nid = fname.match(/\[(.*?)\]/g);
            var idx = nid[0];
            idx = idx.replace(/[[\]]/g,'')
            var n = fname.split("[");

            idx = parseInt(idx) + 1;
            $tr.find("input,select").attr("name", n[0] + "[" + idx + "]");

            $(table).find("tbody tr:last").after($tr);

        };
    });
    </script>       
</body> 
```

每次准备使用 AJAX 帖子时，我似乎无法弄清楚如何每次将每个表元素的“名称”增加 1 时添加一个新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:30:26.480

新行创建错误。艺术家和专辑元素**名称**始终为**track[0]**

做这样的事情不会更容易吗？

```
function addTableRow(table) {

    var index = $(table).find("tbody tr").length;
    var $tr = $(table).find("tr:last").clone();
    $tr.find("input,select").each(function (i, k) {
        var old_name = $(k).attr("name");
        var new_name = old_name.replace(index-1, index);
        $(k).attr("name", new_name);
    });

    $(table).find("tbody tr:last").after($tr);
}; 
```

[演示](http://jsfiddle.net/LQe9b/)

另外，考虑`class`在每个中给出 a 而不是 id并为行`input/select`给出 a `id`。使用起来会更容易。正如**@HMR**所说，在克隆 the`tr`和`inputs`id时`select`也会克隆，添加行然后会导致多个元素具有相同的 id。这不好，**请确保每个元素都作为唯一 ID**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:36:00.603

不如只计算`tr`一下`tbody`：

```
 function addTableRow(table)
    {   
        var $tr = table.find("tbody").find("tr").last().clone();
        var fname = $("#track").attr("name");
        var nid = fname.match(/\[(.*?)\]/g);
        var new_idx = table.find('tbody').find('tr').length;
        var n = fname.split("[");

        idx = parseInt(idx) + 1;
        $tr.find("input,select").attr("name", n[0] + "[" + new_idx + "]");

        $(table).find("tbody tr:last").after($tr);

    }; 
```

# ios - KVO addObserver 到 CoreData 对象的一对多关系

> ID：15658518
> 
> 赞同：9
> 
> 时间：2013-03-27T12:14:04.283
> 
> 标签：ios, objective-c, core-data, key-value-observing

大家好，多年阅读 StackOverflow，现在我决定加入。我正在努力解决这个问题：

我有一个“仓库”实体，它有两个对多关系“人员”和“卡车”。我想观察在给定“仓库”对象的情况下，其中一个关系（并了解其中一个关系）何时发生变化（插入、删除）。

目前我正在这样做：

`[mydepot addObserver:self forKeyPath:@"Trucks" options:NSKeyValueObservingOptionNew context:nil];`

和

`[mydepot addObserver:self forKeyPath:@"Persons" options:NSKeyValueObservingOptionNew context:nil];`

但是每次两个相关集合之一发生变化时，`observeValueForKeyPath`都会被调用两次（每个键路径一次）。

我做错了吗？查看“更改”字典，（也观察 OptionOld）显示没有意外更改（当我更换人员时，卡车没有更改），但通知仍然出现。

谢谢，彼得罗

编辑：似乎两次“更改”字典都包含“新”字段中的整个关系。（显然是一次人，一次是卡车）

编辑2：即使是简单的属性，它也会与 managedctx 保存操作有关吗？好像当您保存时，整个对象都被认为已更改..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T22:32:58.650

在 Key Value Observing Programming Guide 中说

> 如果您使用 Core Data，您可以将父级注册到应用程序的通知中心，作为其托管对象上下文的观察者。父级应该以类似于键值观察的方式响应子级发布的相关更改通知。

这可能实际上意味着推荐的做法是不使用`addObserver:forKeyPath:options:context:`，而是注册`NSManagedObjectContextDidSaveNotification`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:57:19.220

如果您自动设置卡车 ( `something.trucks = newArray`)，您将收到一个值设置通知。而是在 . 返回的可变数组上使用 addObject/removeObject `[ something mutableArrayValueForKey:@"trucks" ]`。

您还可以使用/实现 KVO 生成的访问器`insertObjectIntoTrucks:`/`countOfTrucks`等。

您应该阅读 KVO 文档。[在此处](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/KeyValueCoding)的“索引对多关系合规性”和“无序对多关系合规性”下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T15:00:51.797

我遇到了同样的问题。我仍然坚持这个问题。

但我可以肯定的是，第一次调用它的原因是你做了类似的事情`[Depot addPerson:person]`，而第二次调用它的原因是 MOC 保存操作将发布一个`NSManagedObjectContextDidSaveNotification`通知，让你的观察者认为另一个修改刚刚发生.

而我的问题更糟糕的是，因为观察者，我会丢失一些我对核心数据的修改。

这让我觉得我这两天都傻了。

我正在考虑`NSManagedObjectContextDidSaveNotification`在@Mundi 的回答中使用 register

如果有人有更好的方法，请尽快告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T15:29:53.030

我保留了一些缓存作为 NSManagedObject 的属性，并且需要使它们无效。我首先研究了使用 KVO 并收听`NSManagedObjectContextDidSaveNotification`.

对我来说最简单的解决方案是实现这些方法`– [NSManagedObject didSave]`，`– [NSManagedObject didTurnIntoFault]`就像这样。

```
@interface BazClass ()
@property (nonatomic, strong) NSArray* sortedItems;    // sorted items cache
@end

@implementation BazClass

@dynamic items; // this is a to many relationship. i.e. NSOrderedSet
@synthesize sortedItems;

- (NSArray*)sortedItems
{
    if (!_sortedItems) {
        NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"foo" ascending:YES];
        _sortedItems = [self.items sortedArrayUsingDescriptors:@[sortDescriptor]];
    }
    return _sortedItems;
}

// didSave and didTurnIntoFault will delete the sorted items cache
- (void) didSave
{
    self.sortedItems = nil;
}

-(void) didTurnIntoFault
{
    self. sortedItems = nil;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-02T14:10:01.040

如果您想知道何时从 to-many trucks 关系中添加或删除项目，则需要对计数（在您的视图控制器中的某处）执行 KVO，如下所示：

`[self.depot addObserver:self forKeyPath:@"trucks.@count" options:0 context:nil];`

# jquery-mobile - jquery 移动历史记录返回

> ID：15658520
> 
> 赞同：0
> 
> 时间：2013-03-27T12:14:06.380
> 
> 标签：jquery-mobile

我使用js显示和隐藏一些元素的页面。但是当我使用浏览器返回时出现问题。

```
<div data-role="page">
    <div class="step1">
       step1 content...
       <a href="javascript:void(0)" class="nextBtn">next</a>
    </div>
    <div class="step2" style="display:none">
       step2 content...
       <a href="javascript:void(0)" class="okBtn">next</a>
    </div>
    <div class="step3" style="display:none">
       step3 content...
       <a href="javascript:void(0)" class="goBtn">next</a>
    </div>
    <script>
    some script...
    $('.nextBtn').click(function(){
        ok = do something...
        if(ok){
          $('.step1').hide();
          $('.step2').show();
        }
    });
    $('.okBtn').click(function(){
        ok = do something...
        if(ok){
          $('.step2').hide();
          $('.step3').show();
        }
    });
    </script>
</div> 
```

但是当我使用浏览器后退按钮时，出现问题。我的意思是当“step2”显示时，我点击后退按钮，我想去“step1”显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:49:44.393

如果您希望`.step1`在加载页面时可见，这里是代码。

```
$(document).on('pagebeforeshow', '[data-role="page"]', function () {
 $('div.step1').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:05:29.237

我建议您使用[https://github.com/browserstate/History.js](https://github.com/browserstate/History.js) 来操作浏览器的历史记录

# vb.net - VB.NET - 调用另一个构造函数时对正在构造的对象的引用无效

> ID：15658521
> 
> 赞同：0
> 
> 时间：2013-03-27T12:14:08.143
> 
> 标签：vb.net

这样做有什么区别：

```
Public Class Class1
    Protected Test1 As String
    Public Sub New(ByVal test2 As String)
        Test1 = test2
    End Sub
End Class

Public Class Class2
    Inherits Class1

    Public Sub New()
        MyBase.New("called from class 2")
    End Sub

End Class 
```

和这个：

```
Public Class Class1
    Protected Test1 As String
End Class

Public Class Class2
    Inherits Class1

    Public Sub New()
        Test1 = "Called from class 2"
    End Sub
End Class 
```

在第一个示例中，超类实例变量在构造函数中初始化。在第二个示例中，超类实例变量在子类中初始化。

我问的原因是因为我试图从子类中做到这一点：

```
Public Sub New()
        MyBase.New(                   System.Configuration.ConfigurationManager.AppSettings.Item("PurgeFile" & Me.GetType.Name), & _
               System.Configuration.ConfigurationManager.AppSettings.Item("PurgeHeader" & Me.GetType.Name) )
        End Sub 
```

我收到一个错误：“调用另一个构造函数时对正在构建的对象的引用无效”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:15:54.763

您不能`Me`在`MyBase.New()`通话中使用，因此以下部分代码无效：

```
Me.GetType.Name 
```

**更新**

你的两个样本有很大的不同：第一个不允许`Class1`没有构造函数参数的初始化，第二个允许。

我宁愿考虑类似的事情：

```
Public MustInherit Class Class1
    Public MustOverride ReadOnly Property Test1 As String
End Class

Public Class Class2
    Inherits Class1

    Private _Test1 As String = "Called from class 2"

    Public Overrides ReadOnly Property Test1 As String
        Get
            Return _Test1
        End Get
    End Property
End Class 
```

[来自 MSDN 的参考](https://msdn.microsoft.com/en-us/library/3tsft9yh(v=vs.90).aspx)

# dynamics-crm-2011 - 从代理类型获取属性名称而不使用反射

> ID：15658523
> 
> 赞同：1
> 
> 时间：2013-03-27T12:14:10.883
> 
> 标签：dynamics-crm-2011

我们使用早期绑定类进行开发。但有时我们会使用属性名称。

有一种使用反射的[方法](http://patrickverbeeten.com/Blog/2010/11/25/Get-attribute-names-from-proxy-types)，但沙盒插件中不允许反射。

在不依赖反射的情况下从代理类型获取属性的方法是什么？

```
Opportunity.OpportunityId.AttributeName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:23:36.673

你有几个选择：

*   您可以使用[`RetrieveEntityMetadata`](http://crmprof.wordpress.com/2013/03/13/how-to-retrieve-entity-metadata-using-net-in-microsoft-dynamics-crm-2011/)实体包含的属性列表。您将无法在此处使用任何早期绑定，但您可以在运行时检查结果以查看实体的有效属性。

*   您还可以创建一个简单的实用程序，在实际部署之前使用反射自动生成包含属性列表的类或枚举。只需将该类添加到您的插件 dll 中，您就可以在开发插件时获得早期绑定实体属性的好处，而无需在运行时进行反射。

# python - 在 Tornado 中定义一个函数

> ID：15658524
> 
> 赞同：0
> 
> 时间：2013-03-27T12:14:19.210
> 
> 标签：python, tornado

大家好，我在 Tornado 有这个主要功能：

```
def main():
    tornado.options.parse_command_line()
    http_server = tornado.httpserver.HTTPServer(Application())
    http_server.listen(options.port)
    periodic = tornado.ioloop.PeriodicCallback(check_commands_response, 5000)
    periodic.start()
    tornado.ioloop.IOLoop.instance().start() 
```

现在，你可以看到，我在 main 中放入了一个调用函数的周期性函数。

在这个函数中，我会使用某些类中的一些函数方法......所以我不能把这个 check_commands_response 放在类之外。但我不能将函数也放入类中（它是一个 BaseHandler），因为当 main 启动时，函数还没有定义......

我能怎么做？

**编辑**

如果我写这个有什么问题：

```
class CheckCommandResponse(BaseHandler):
    @tornado.web.authenticated
    @tornado.web.asynchronous
    @tornado.gen.engine

    @staticmethod
    def check_commands_response(self):
        self.lock_tables("read", ['networks'])
        nets = self.db.query("SELECT DISTINCT netid from networks")
        self.unlock_tables

        for net in nets:
            got_commands_response(net)

    @staticmethod
    def got_commands_response(netid):
        como_url = "".join("http://xx.xx.xx.xx:44444/ztc_config?netid=" \
                   + netid + "&opcode_group=0&opcode=0&start=-10s&end=-1s")

        http_client = AsyncHTTPClient()
        #asynchronous alternative to time.sleep
        yield tornado.gen.Task(tornado.ioloop.IOLoop.instance().add_timeout, time.time() + 5)
        response = yield tornado.gen.Task(http_client.fetch, como_url)

        print response

################################################################################
# Application Entry Point
################################################################################
def main():
    tornado.options.parse_command_line()
    http_server = tornado.httpserver.HTTPServer(Application())
    http_server.listen(options.port)
    periodic = tornado.ioloop.PeriodicCallback(CheckCommandResponse.check_commands_response, 5000)
    periodic.start()
    tornado.ioloop.IOLoop.instance().start() 
```

# android - 谷歌地图 Android V2 - 黑屏

> ID：15658526
> 
> 赞同：5
> 
> 时间：2013-03-27T12:14:29.420
> 
> 标签：android, google-maps

我正在为 android 实现谷歌地图。我创建了一个测试应用程序并在该应用程序中插入了所有权限等，并且该应用程序完美运行。

但是当我尝试将相同的代码复制到我的真实应用程序时，它会在 android 活动上显示空白屏幕。尽管我已经在`google api console`.

这是我的测试项目清单的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.mapstutorial"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<permission
    android:name="com.example.mapstutorial.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission android:name="com.example.mapstutorial.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
<uses-library android:name="com.google.android.maps" />
    <meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="my api key"/>

    <activity
        android:name="com.example.mapstutorial.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

这是我真正的项目清单的样子：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.shop.shoppinglist"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />

<permission      android:name="com.shop.addtask.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
<permission      android:name="com.shop.shoppinglist.permission.C2D_MESSAGE"    android:protectionLevel="signature" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="com.shop.addtask.permission.MAPS_RECEIVE"/>
<uses-permission android:name="com.shop.shoppinglist.permission.C2D_MESSAGE" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:allowBackup="true"
    android:theme="@style/AppTheme" >

    <uses-library android:name="com.google.android.maps"/>
    <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="my api key"/>

    <activity
        android:name=".Login_Activity"
        android:label="@string/title_activity_main" 
        android:theme="@style/Theme.Sherlock" 
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我在控制台指纹中更新了包名称，`com.shop.addtask`但它仍然显示白屏。可能导致问题的原因是什么？`apikey`我在两个应用程序中使用的都是相同的。但它`test application`不适用于`real app`.

*   我已经使用指纹创建了 api 密钥
*   我已经`on`在控制台中切换了 google maps android v2
*   我正在使用与控制台中提到的相同的 api 密钥。

所以这些事情是正确的，问题不能由其中之一引起。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:25:19.257

2个可能的原因：

**1.**这部分：

```
 <uses-library android:name="com.google.android.maps"/>
<meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="my api key"/> 
```

应该在结束`application`标签之前。

**2.**很可能您的密钥存在某种问题。`debug.keystore`尝试通过删除文件夹并运行项目来生成新的。然后通过控制台再次注册。

你可以使用我写的这个指南来做到这一点：

[谷歌地图 API V2 密钥](https://blog-emildesign.rhcloud.com/?p=403)

**更新：**

检查一下：

```
<permission      android:name="com.shop.addtask.permission.MAPS_RECEIVE" android:protectionLevel="signature"/> 
```

看起来您在此处设置的包不是您的应用程序的包，应该是：

```
 <uses-permission android:name="com.shop.shoppinglist.permission.MAPS_RECEIVE"/>
  <permission      android:name="com.shop.shoppinglist.permission.MAPS_RECEIVE" android:protectionLevel="signature"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T20:12:47.240

一切都失败后，尝试卸载应用程序并重试。它在我的情况下有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:12:11.250

```
<permission      android:name="com.shop.addtask.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
<uses-permission android:name="com.shop.addtask.permission.MAPS_RECEIVE"/> 
```

包名是

```
package="com.shop.shoppinglist" 
```

希望下面的链接对您有所帮助，[AndroidManifest.xml for Google Maps Android API v2](http://android-er.blogspot.in/2012/12/modify-androidmanifestxml-for-google.html)

尝试这个，

```
<permission      android:name="com.shop.shoppinglist.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
<uses-permission android:name="com.shop.shoppinglist.permission.MAPS_RECEIVE"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-19T08:51:54.293

我的问题是我在 AndroidManifest 文件中更改了应用程序的包名称，但没有更改 gradle.build 的“applicationId”属性，也许这对某人有帮助......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-30T15:37:30.083

我的地图也有类似的问题。修复所有库和关键问题后，我只看到一个标有“Google”的白色屏幕。问题是，我`MapFragment`把`ScrollView`. 删除后`ScrollView`一切正常。我可以看到地图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-09T20:27:26.580

我有同样的问题。我尝试了有关此错误的不同解决方案的所有建议。包容地，我重新创建了我的 API 密钥（包括创建一个新项目），但没有任何效果。在浪费了很多很多时间之后，我决定删除我的安卓设备上的所有 myapp 用户数据，神奇地解决了这个问题。我的地图显示正确！耶！！！

Android 4.2.2：设置/应用程序/YourApp/清除数据。

我希望这个简单的解决方案在其他一切都失败时有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-28T23:25:22.813

好的，我有同样的问题，我按照博客和谷歌官方页面中的所有步骤操作，但没有工作，
`<uses-library android:name="com.google.android.maps"/>`
`<meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="my api key"/>`
在关闭应用程序标签之前解决方案是正确的，但在另一种情况下我找到了解决方案，问题是我生成**Macinthosh中的****SHA1**代码，但我克隆了存储库并在 windows 平台中工作，但我发现了这个问题，我的解决方案是转到 google 控制台并生成其他 apikey，但在 windows 中使用此命令获取 SHA1 代码，打开控制台并输入代码 下一步复制并粘贴此代码 **`cd C:\Program Files\Java\jre1.8.0_20\bin and press enter`** 

 **```
keytool -list -v -keystore %HOMEPATH%\.android\debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

在控制台内按 Enter 后，您会在 google 控制台中显示 SHA1 代码复制和粘贴，指定 SHA1 代码“;”非常重要 和正确的包装..

问候！！！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-21T06:03:31.470

检查您是否启用了 Google Maps Android API

*   打开谷歌地图开发者控制台。
*   转到图书馆-> Google Maps Android API
*   如果它被禁用，请启用它。 [![在此处输入图像描述](../Images/0a191b002a00f8df523b06aac0213e6d.png)](https://i.stack.imgur.com/U9Lb2.png)**

# ios - 当我认为我没有更改任何内容时，为什么会突然在 Xcode 中出现随机错误？

> ID：15658527
> 
> 赞同：3
> 
> 时间：2013-03-27T12:14:31.113
> 
> 标签：ios, objective-c, xcode, build

当我在 Xcode 中构建我的项目时，突然间我遇到了疯狂的随机错误。通常会出现大约 15 或 16 个错误，但它们都与 3rd 方库有关，而不是我自己的代码。

首先是`FMDB`库有所有错误，然后随机`ASIHttp`出现错误，相同类型的消息，例如：

`Illegal interface qualifier`

然后有很多`Expected a type`错误是一些标题，例如

```
- (void)requestStarted:(ASIHTTPRequest *)request;
- (void)request:(ASIHTTPRequest *)request didReceiveResponseHeaders:(NSDictionary *)responseHeaders;
- (void)request:(ASIHTTPRequest *)request willRedirectToURL:(NSURL *)newURL;
- (void)requestFinished:(ASIHTTPRequest *)request;
- (void)requestFailed:(ASIHTTPRequest *)request;
- (void)requestRedirected:(ASIHTTPRequest *)request; 
```

以上所有行错误。

我唯一的警告是与我自己的代码有关，即：

`Incomplete implementation`但是在我看来它是完整的，我在标题中的类中没有任何遗漏。

这完全让我大吃一惊，我不知道出了什么问题，所以如果有人能提供帮助，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:22:52.713

我曾经（）遇到过这种错误`Illegal interface qualifier`。

**症状**

在以前完美编译的项目中突然出现大量错误。错误通常与语法或限定符有关。代码看起来不错，符号定义明确，方法存在，但不知何故编译器看到了错误。错误也可能在函数结束、Objective-C 消息结束、控制循环结束等附近弹出。

**问题的原因**

在标头或代码文件的开头附近出现额外字符。开发商在不知不觉中添加。

**如何解决**

检查头文件和源文件。寻找位置不当的字符，尤其是在文件开头附近。

# jquery - jQuery - 检查是否选择了任何选择选项

> ID：15658528
> 
> 赞同：23
> 
> 时间：2013-03-27T12:14:31.633
> 
> 标签：jquery

基本上我有一个选择选项，它从数据库中提取所有“旅游名称”作为 $touroptions。$touroptions 可以包含 1-20 个值（选择选项）。

我需要做的是有一个jQuery函数来做如下： -

```
If (any option) #sel-destination-tour is selected {
//DO SOMETHING
}
ELSE {
//DO SOMETHING ELSE
} 
```

我只是不确定我怎么能做到这一点。

**HTML**

```
<select name="sel-destination-tour" id="sel-destination-tour" class="input-select-tour">

    <option value="0"></option>

    <?php echo $touroptions ?>

</select> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-27T12:17:22.517

可以通过测试select的value属性来检查一个option是否

```
if($('#sel-destination-tour').val()){
    // do something
} else {
    // do something else
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T12:15:51.380

尝试这个

```
$('#sel-destination-tour').val() == ""){
    //nothing selected;
}else{
    //something selected;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T12:19:35.663

跟踪 select 的更改事件并相应地做你的事情

```
$(function(){

 $("#sel-destination-tour").change(function(){

 if($(this).val() !="0")
  {
    // logic goes here
  }
  else
  {
   // no option is selected
  }
});

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T12:17:35.367

假设您有示例中所示的第一项，这将完成...

```
if ($("#sel-destination-tour").val() != "0") {
    // nothing selected
} else {
    // something selected
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T12:17:36.760

检查`val()`（假设 0 没有值）：

```
if ($('#sel-destination-tour').val() != 0) {
   // has a value selected
} 
else {
   // does not have a value selected
} 
```

示例 - [http://jsfiddle.net/infernalbadger/RrtT7/](http://jsfiddle.net/infernalbadger/RrtT7/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-20T00:54:57.790

在我的情况`val()`是返回`[]`和出现`true`。所以我把它改成：

```
if($('#sel-destination-tour').val()[0]){
    // do something
} else {
    // do something else
} 
```

# javascript - 如何在 AngularJS 中为未定义的表达式值显示占位符？

> ID：15658535
> 
> 赞同：61
> 
> 时间：2013-03-27T12:14:55.437
> 
> 标签：javascript, angularjs, placeholder

如果我有一个表达式`{{ x }}`并且 x 是`undefined`or `null`，那么我该如何显示它的占位符？

我在回答中提供了一种解决方案，但我想知道还有哪些其他方法。也许，也适用于承诺的占位符。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-03-27T15:02:17.447

`{{ counter || '?'}}`. 只是纯JavaScript。`||`可以用作默认值。由于每个中的空消息不同，因此通用指令不适用于许多情况。

如果您想将不同的类应用于空类，它也是内置的：

```
<div ng-class="{empty: !counter}" ng-bind="counter || ?"></div> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-27T12:14:55.437

我会这样做，但也许有更好的方法：

```
angular.module('app').filter('placeholdEmpty', function(){
  return function(input){
    if(!(input == undefined || input == null)){
      return input;
    } else {
      return "placeholder";
    }
  }
}); 
```

然后使用`{{ x | placeholdEmpty}}`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-27T13:24:10.473

我用 ng-show 来做，像这样：

```
<strong>{{username}}</strong>
<span class="empty" ng-show="!username">N/A</span> 
```

当然，它为我的观点添加了更多我可能能够以不同方式处理的元素。我喜欢清楚地看到我的占位符/空值在哪里是多么容易，而且我也可以为它们设置不同的样式。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-04T03:12:38.327

实现`default`过滤器：

```
app.filter('default', function(){
  return function(value, def) {
    return (value === undefined || value === null? def : value);
  };
}); 
```

并将其用作：

```
{{ x | default: '?' }} 
```

过滤器解决方案的优势`{{ x || '?'}}`在于您可以区分`undefined`,`null`或`0`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-28T22:00:36.407

实现默认过滤器是可行的，但如果你只使用数字，你可以使用 Angular 自己的[数字过滤器](https://docs.angularjs.org/api/ng/filter/number)

> 如果输入为 null 或未定义，它将被返回。如果输入是无限的（Infinity 或 -Infinity），则分别返回 Infinity 符号“∞”或“-∞”。如果输入不是数字，则返回空字符串。

```
{{ (val | number ) || "Number not provided"}} 
```

# web - 网站滑动内容移动

> ID：15658537
> 
> 赞同：0
> 
> 时间：2013-03-27T12:14:56.110
> 
> 标签：web, touch, swipe

我正在尝试开发类似 Windows Phone 界面的功能 - 使用向右水平滑动来显示菜单。基本上我有两个 100% 宽度的列，其中之一被推到右侧，因此不可见。如何实现动画滑动，以实现我想要的交互？如何制作水平滚动动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:17:43.330

网络还是原生？如果你正在制作网页，我建议使用*** [http://quojs.tapquo.com/](http://quojs.tapquo.com/) ***

# php - 通过 API 下载 Vimeo 视频

> ID：15658543
> 
> 赞同：7
> 
> 时间：2013-03-27T12:15:13.950
> 
> 标签：php, vimeo

有没有办法使用 PHP vimeo API 获取 vimeo 视频的直接下载链接？

我试过[这个 stackoverflow 答案](https://stackoverflow.com/questions/4460394/how-can-i-find-download-links-for-vimeo-videos)，但 moogaloop 的链接不起作用。[Vimeo 更新他们的API](https://github.com/vimeo/vimeo-php-lib)已经一年多了。

有没有办法通过 API/PHP 获得直接链接/下载视频。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-05-24T10:03:24.660

对于**Vimeo PRO**帐户：

您可以获得帐户中任何视频或所有视频的直接链接。要获取所有视频的下载链接，您必须使用您的访问令牌调用以下 API。

```
GET https://api.vimeo.com/me/videos 
```

或者您可以通过调用以下 API 获取单个视频的下载链接

```
https://api.vimeo.com/me/videos/{video_id} 
```

在回复中，您可以找到`download['link']`

有关更多信息，请转到 [Vimeo API 文档](https://developer.vimeo.com/api/start)

# c++ - 黑莓 10 中的 TouchEvent

> ID：15658547
> 
> 赞同：0
> 
> 时间：2013-03-27T12:15:30.163
> 
> 标签：c++, touch-event, blackberry-10

据我所知，黑莓 10 中有四种类型的 Touch Type-

1.  下
2.  移动
3.  向上
4.  取消

在插槽`onTouch()`中，我检查这四种类型的事件并在那里完成我的一些任务。如下所示：

```
if (event->isDown())
{
    // implementing my task
}
if (event->isUp())
{
    // implementing my task
}
if (event->isMove())
{
    // implementing my task
}
if (event->isCancel())
{
    // implementing my task
} 
```

那么，我的问题是什么？在代码块中执行我的一些任务`isUp()`并同时触摸屏幕。但是我在运行时没有`isDown()`在我的代码中收到任何事件`isUp()`。完成里面的任务`isUp()`后，我得到了`isDown`事件。

`isDown()`我的目标是在触摸屏幕以停止内部执行时获取事件`isUp()`。

如何在 Blackberry 10 中实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T18:05:35.997

我建议阅读这篇有趣的博客文章，了解 UI 渲染线程如何与应用程序线程讨论： http: [//devblog.blackberry.com/2012/09/cascades-custom-ui/](http://devblog.blackberry.com/2012/09/cascades-custom-ui/)

如果您在“isUp”中的进程这么长，那么您别无选择，只能在线程中执行，并在调用“isDown”时终止线程：http: [//developer.blackberry.com/cascades/reference/qthread。 html#终止](http://developer.blackberry.com/cascades/reference/qthread.html#terminate)

# c# - 无法将 Linq 结果转换为现有的预定义模型

> ID：15658549
> 
> 赞同：0
> 
> 时间：2013-03-27T12:15:36.460
> 
> 标签：c#, linq

我得到如下错误

`cannot convert from 'System.Collections.Generic.IEnumerable AnonymousType#1' to 'System.Collections.Generic.IEnumerable WebUI.DataModels.CandidateGeographiesAttributes'`

我的代码如下

```
//Able to get result from SP here 
List obj_Candidate_Geographies_List = 
    DBEntity.sp_GetCandidateEntityDataByFunctionTypeIdAndLevel(
        Convert.ToInt32(FunctionTypeEnum.Geography),
        Convert.ToInt32(EntityLevel.Undefined)
    ).ToList();

//Not able to convert to predefined model here 
IQueryable obj_Candidate_Geographies_Attributes_List = 
    (from c in DBEntity.Candidates.ToList() 
        join p in DBEntity.vw_Candidate_AttributesNew.ToList() 
            on c.CandidateId equals p.CandidateId 
        join q in obj_Candidate_Geographies_List 
            on c.CandidateId equals q.CandidateId 
    select new 
            { 
                CandidateId = c.CandidateId, 
                FirstName = q.FirstName, 
                LastName = q.LastName, 
                GeographyId = q.GeographyId, 
                GeographyName = q.GeographyName, 
                SkillId = p.SkillId, 
                SkillName = p.SkillName, 
                CreatedOn = c.CreatedOn, 
                ModifiedOn = c.ModifiedOn 
            }
        );

//Predefined Model
public class CandidateGeographiesAttributes 
{ 
    public int CandidateId { get; set; } 
    public string FirstName { get; set; } 
    public string LastName { get; set; } 
    public int GeographyId { get; set; } 
    public string GeographyName { get; set; } 
    public int SkillId { get; set; } 
    public string SkillName { get; set; } 
    public DateTime CreatedOn { get; set; } 
    public DateTime ModifiedOn { get; set; } 
} 
```

任何人都可以帮助我如何将 linq 结果转换为预定义数据模型的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:21:00.450

您应该创建实例`CanidateGeographicAttributes`而不是让 linq 在这里为您创建匿名类型：

```
select new { CandidateId = c.CandidateId, FirstNam ... 
```

改成：

```
select new CanidateGeographicAttributes() { CandidateId = c.CandidateId, FirstNam.. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:26:30.840

您需要创建一个新的 CandidateGeographiesAttributes 而不是匿名类型。像这样：

```
IQueryable<CandidateGeographiesAttributes> 
obj_Candidate_Geographies_Attributes_List = 
(from c in DBEntity.Candidates 

    join p in DBEntity.vw_Candidate_AttributesNew.ToList() on c.CandidateId
    equals  p.CandidateId 

    join q in obj_Candidate_Geographies_List on c.CandidateId 
    equals q.CandidateId 

    select new CandidateGeographiesAttributes
    { 
        CandidateId = c.CandidateId, 
        FirstName = q.FirstName, 
        LastName = q.LastName, 
        GeographyId = q.GeographyId, 
        GeographyName = q.GeographyName, 
        SkillId = p.SkillId, 
        SkillName = p.SkillName, 
        CreatedOn = c.CreatedOn, 
        ModifiedOn = c.ModifiedOn 
    }
).AsQueryable();

//Predefined Model 
public class CandidateGeographiesAttributes 
{ 
public int CandidateId { get; set; } 
public string FirstName { get; set; }
public string LastName { get; set; } 
public int GeographyId { get; set; } 
public string GeographyName { get; set; } 
public int SkillId { get; set; } 
public string SkillName { get; set; } 
public DateTime CreatedOn { get; set; } 
public DateTime ModifiedOn { get; set; } 
} 
```

# wpf - IsMouseOver 在取消选择项目后不起作用

> ID：15658552
> 
> 赞同：0
> 
> 时间：2013-03-27T12:15:43.003
> 
> 标签：wpf

我有一个问题，我的列表视图中取消选择的项目在我取消选择后不显示“IsMouseOver”的颜色，除非我选择其他内容然后选择它。在我的 ItemContainerStyle 中，我将焦点/非焦点的默认颜色设置为透明，因为我想定义自己的值。谁能看看这个并告诉我为什么“IsMouseOver”对取消选择的项目不起作用？

xml:

```
<ListView Name="lstPhoneCarrier" HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="408" Height="145" 
  ItemsSource="{Binding ShowAllCarrierInfo, Mode=TwoWay}" 
  ScrollViewer.HorizontalScrollBarVisibility="Hidden" ScrollViewer.VerticalScrollBarVisibility="Visible" 
  SelectionMode="Single">

<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent" />
        </Style.Resources>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Yellow" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListView.ItemContainerStyle>

<ListView.ItemTemplate>
    <DataTemplate>
        <Label x:Name="lblCarrier" HorizontalAlignment="Left">
            <Label.Content>
                <StackPanel Orientation="Horizontal">
                    <TextBlock>
                        <TextBlock.Text>
                            <MultiBinding StringFormat="{}{0}-{1}">
                                <Binding Path="Name" />
                                <Binding Path="Description" />
                             </MultiBinding>
                        </TextBlock.Text>
                    </TextBlock>
                </StackPanel>
            </Label.Content>
        </Label>
        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=CarrierSelected}" Value="True" >
                <Setter TargetName="lblCarrier" Property="Background" Value="Pink" />
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</ListView.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:37:24.793

您已经覆盖了高亮画笔，以便用户看不到选择，但内部`selection`仍在工作，`captures the mouse`因此`MouseOver events not getting raised for that item`.

您需要设置`Focusable`为`false`，`listBoxItem`以便鼠标不会被捕获`ItemContainerStyle`-

```
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
         <Setter Property="Focusable" Value="False"/> // <---- HERE
        <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" 
                             Color="Transparent" />
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                             Color="Transparent" />
        </Style.Resources>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Yellow" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListView.ItemContainerStyle> 
```

# mysql - 使用 laravel 模式构建器创建临时表

> ID：15658556
> 
> 赞同：3
> 
> 时间：2013-03-27T12:15:46.320
> 
> 标签：mysql, laravel, laravel-3

我想知道是否有任何方法可以使用 laravel 的模式构建器创建临时表。我正在使用 laravel 3.2 提前谢谢。

# c++ - 将 8 个字符压缩为 7 个字节

> ID：15658564
> 
> 赞同：-3
> 
> 时间：2013-03-27T12:16:15.480
> 
> 标签：c++

我有一个包含八个字符的 std::string 和一个下拉控件的索引值 (int)。我只有 8 个字节来存储所有数据。

是否可以将 8 个字符压缩为 7 个字节，以便为索引值保留第 8 个字节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:27:28.417

```
unsigned long long pack(const std::string& s, unsigned index)
{
    return (s[0] & 127)
         | (s[1] & 127) << 7
         | (s[2] & 127) << 14
         | (s[3] & 127) << 21
         | (s[4] & 127) << 28
         | (s[5] & 127) << 35
         | (s[6] & 127) << 42
         | (s[7] & 127) << 49
         |     index    << 56;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T12:18:25.433

是的，**假设**您的字符仅采用标准 ASCII 字符集中的值。

如果这个假设是正确的，那么它们只取值 0-127（即 7 位值）。所以你只有 8 * 7 位的信息。你有 7 * 8 位来存储它。所以只需去掉每个字符的 MSB，然后打包它们。

* * *

[*然而，这似乎只是为了保存一个字节而做的大量工作。你真的需要这样做吗？*]

# ios - 如何检测用户何时通过 UIWebView 登录？

> ID：15658565
> 
> 赞同：0
> 
> 时间：2013-03-27T12:16:16.417
> 
> 标签：ios, objective-c, ios5, login, uiwebview

我想为`UIWebView`用户提供一个登录屏幕来登录服务，一旦他们正确登录，我想抓取页面的内容。我如何确定他们何时登录服务？

我知道我可以检查当前的`URL`，因为它重定向到一个特定的、易于识别`URL`的，但同时，如果他们以某种方式在网络上导航直到他们遇到这个链接并点击它，它会在我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:48:31.967

有很多方法可以向服务器发送请求，您可以使用一些开放的 API，例如[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)（可能已过时）和[AFNetworking](https://github.com/AFNetworking/AFNetworking)。如果你想使用 Apple 提供的 API，那么你可以使用[NSURLConnection](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)。基本上你`synchronous`在你的情况下发送请求。

```
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *reply = [[NSString alloc]  initWithBytes:[data bytes] length:[data length] encoding: NSUTF8StringEncoding]; 
```

如果用户已登录，请检查服务器的响应，然后打开`UIWebView` 所需内容，否则显示错误或警报。

```
if([reply isEqualToString:@"OK"]){
 // open and show Contents in `UIWebView`
} else {
 //show error not authenticated
} 
```

[如果您开始使用，这里有一些基本教程。](http://codewithchris.com/tutorial-how-to-use-ios-nsurlconnection-by-example/)

[NSURLConnection 的另一个教程](http://nscookbook.com/2012/12/ios-programming-recipe-4-using-nsurlconnection/)

# java - 使用 Rhino 的 Javascript 解析器，如何获取评论？

> ID：15658569
> 
> 赞同：4
> 
> 时间：2013-03-27T12:16:25.043
> 
> 标签：java, javascript, parsing, comments, rhino

我有一些 javascript 文件并使用 Rhino 的 javascript 解析器对其进行解析。

但我无法得到评论。

我怎样才能得到评论？

这是我的代码的一部分。

运行此代码，“comment”变量为空。此外，在运行“astRoot.toSource();”时，它只显示 javascript 代码。不包括评论。它消失了！

[java代码]

```
public void parser() {
    AstRoot astRoot = new Parser().parse(this.jsString, this.uri, 1);

    List<AstNode> statList = astRoot.getStatements();
    for(Iterator<AstNode> iter = statList.iterator(); iter.hasNext();) {
        FunctionNode fNode = (FunctionNode)iter.next();

        System.out.println("*** function Name : " + fNode.getName() + ", paramCount : " + fNode.getParamCount() + ", depth : " + fNode.depth());

        AstNode bNode = fNode.getBody();
        Block block = (Block)bNode;
        visitBody(block);
    }

    System.out.println(astRoot.toSource());
    SortedSet<Comment> comment = astRoot.getComments();
    if(comment == null)
        System.out.println("comment is null");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:56:43.153

配置您的[CompilerEnvirons](http://www.jarvana.com/jarvana/view/org/mozilla/rhino/1.7R3/rhino-1.7R3-javadoc.jar!/org/mozilla/javascript/CompilerEnvirons.html)并使用[AstRoot.visitAll(NodeVisitor)](http://www.jarvana.com/jarvana/view/org/mozilla/rhino/1.7R3/rhino-1.7R3-javadoc.jar!/org/mozilla/javascript/ast/AstRoot.html#visitAll%28org.mozilla.javascript.ast.NodeVisitor%29)：

```
import java.io.*;
import org.mozilla.javascript.CompilerEnvirons;
import org.mozilla.javascript.Parser;
import org.mozilla.javascript.ast.*;

public class PrintNodes {
  public static void main(String[] args) throws IOException {
    class Printer implements NodeVisitor {
      @Override public boolean visit(AstNode node) {
        String indent = "%1$Xs".replace("X", String.valueOf(node.depth() + 1));
        System.out.format(indent, "").println(node.getClass());
        return true;
      }
    }
    String file = "foo.js";
    Reader reader = new FileReader(file);
    try {
      CompilerEnvirons env = new CompilerEnvirons();
      env.setRecordingLocalJsDocComments(true);
      env.setAllowSharpComments(true);
      env.setRecordingComments(true);
      AstRoot node = new Parser(env).parse(reader, file, 1);
      node.visitAll(new Printer());
    } finally {
      reader.close();
    }
  }
} 
```

*爪哇 6; 犀牛1.7R4*

# android - MediaPlayer 应该在单独的线程中运行吗？

> ID：15658583
> 
> 赞同：15
> 
> 时间：2013-03-27T12:17:10.733
> 
> 标签：android, multithreading, service, streaming, media-player

我正在构建一个从网络服务器流式传输音乐的应用程序。该应用程序具有使用 MediaPlayer 进行播放的前台服务。

我的代码基于这个例子：http: [//developer.android.com/guide/topics/media/mediaplayer.html](http://developer.android.com/guide/topics/media/mediaplayer.html)

在示例中，除了 prepareAsync() 调用外，没有任何线程。让我感到困惑的是，当我阅读 Service 类时，我发现了以下信息：

*“警告：服务在其托管进程的主线程中运行——该服务不会创建自己的线程，也不会在单独的进程中运行（除非您另外指定）。这意味着，如果您的服务将执行任何CPU 密集型工作或阻塞操作（例如 MP3 播放或网络），您应该在服务中创建一个新线程来完成这项工作。通过使用单独的线程，您将降低应用程序无响应 (ANR) 错误的风险和应用程序的主线程可以保持专用于用户与您的活动的交互。”*

我问的原因是应用程序有时（通常在失去连接时）在流式传输音频时冻结 UI。我完全理解如果服务使 CPU 密集工作，UI 会冻结，因为活动和服务在同一个线程上运行。但是，我应该期望 MediaPlayer 如此激烈吗？也就是说，它应该在单独的线程上运行吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-12T12:55:03.293

不幸的是，调用 prepareAsync() 根本不足以避免 ANR 提示和您的应用程序挂起几秒钟，尤其是当您正在播放来自网络的文件时。您最好的选择是将您的 MediaPlayer 实例放在它自己的线程中，或者至少在 Handler 中执行密集调用（如`mediaplayer.start()`）。我已经使用 MediaPlayer 一年多了，我可以告诉你，它在多次通话后肯定会挂起，具体取决于具体情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:39:30.950

流式音乐是否会导致主线程停止，直到音乐完成流式传输？这可能就是为什么它正在放慢速度。

我不是专家，目前正在学习自己，但值得思考。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-27T12:22:00.750

不，如果你正在做任何网络传输，你应该把它放在一个线程中，媒体播放器不是那么资源密集型。把它放在你的活动中。

# php - 从openstreetmap获取城市边界

> ID：15658585
> 
> 赞同：7
> 
> 时间：2013-03-27T12:17:16.317
> 
> 标签：php, openstreetmap

我正在开发一个网站，我需要根据用户输入获得一个区域的所有边界。例如，用户想知道一个名为 x 的城市的边界。我应该如何从 openstreetmap 中获取它？我听说过 xapi 和 osmosis，但在任何地方都找不到任何示例。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T03:53:47.383

我在这里尝试使用 JavaScript 进行此操作： [https ://github.com/pgkelley4/city-boundaries-google-maps](https://github.com/pgkelley4/city-boundaries-google-maps)

基本上它归结为找到OpenStreetMap 将城市边界存储为的[关系。](http://wiki.openstreetmap.org/wiki/Relation)

我使用类似以下查询来获取该区域：

```
area[name="Seattle"]["is_in:state_code"="WA"];foreach(out;); 
```

或者，如果没有找到任何东西，则通过节点查找任何相关区域：

```
node[name="New York"][is_in~"NY"];foreach(out;is_in;out;); 
```

要获取关系 ID，请从上述查询返回的区域 ID 中减去 3600000000。然后从其 ID 中获取关系：

```
(relation(" + relationID + ");>;);out; 
```

你可以在这里测试查询，我的可能会改进： http: [//overpass-api.de/query_form.html](http://overpass-api.de/query_form.html)

那就是如何获得城市边界，处理它们是另一回事，因为关系中没有任何秩序。为此，请参阅我的 GitHub 项目和： [http ://wiki.openstreetmap.org/wiki/Relation:multipolygon/Algorithm](http://wiki.openstreetmap.org/wiki/Relation:multipolygon/Algorithm)

我还要注意，城市边界的 OpenStreetMap 数据参差不齐。据我所知，达拉斯和洛杉矶这样的大城市缺少它。

# java - Linux 上的 Java 窗口半透明

> ID：15658589
> 
> 赞同：2
> 
> 时间：2013-03-27T12:17:27.327
> 
> 标签：java, linux, swing, translucency

在 Windows XP SP3、Vista、7、8 和 Mac OS X Mountain Lion 上使用 Java 7 窗口半透明效果非常好。但是，在 Linux 上我无法让它正常工作。

[使用此处](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)找到的教程，特别是*GradientTranslucentWindow*示例，它**似乎**工作得很好。但是，如果您将颜色更改为除白色以外的其他颜色（我所做的唯一更改是在示例代码中将 R 设置为 0），则框架不会正确合成：

![看到这个比较](../Images/ac3c5d09f923c95dcfedd69d7381aaf3.png)

该`isWindowTranslucencySupported`方法为`PERPIXEL_TRANSLUCENT`. 我正在使用 Compiz 复合管理器运行 Ubuntu 12.04 LTS 32 位，并打开了复合插件。

问题：

1.  我该怎么做才能让它发挥作用？是需要更改的 Linux 设置、Java 代码更改还是什么？
2.  还有其他人有这个问题吗？Java 7 已经发布了一段时间，但我找不到其他人遇到这个问题。Java 错误数据库中有一些错误报告，但它们都是“固定的”。我已向 Java 错误数据库提交了一个错误，但它尚未出现在外部数据库中。
3.  我在 Oracle VirtualBox 下运行 Ubuntu。这可能是问题吗？可悲的是，我没有安装 Linux 的机器，所以其他运行非 vm linux 的人可以试试这个吗？**编辑**我安装了来宾插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:49:45.007

VirtualBox 确实是问题所在（即使有来宾插件）。运行带有专有显卡驱动程序的非 vm'ed Ubuntu 允许示例按预期工作。

# xml - 如何根据 crm 2011 中的视图过滤条件更新实体

> ID：15658602
> 
> 赞同：0
> 
> 时间：2013-03-27T12:17:45.847
> 
> 标签：xml, views, dynamics-crm-2011, crm, fetch

我正在尝试创建一个按钮，它将根据视图中的过滤条件获取所有记录，直到现在我可以创建按钮并运行一个页面来更新实体中的所有记录，但现在我需要应用在视图中过滤条件，有什么想法吗？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:34:14.717

您需要在 Javascript 中执行此操作吗？您可以在插件中执行保存的视图（名为 SavedQuery），试试这个：

```
using (ServiceContext svcContext = new ServiceContext(_serviceProxy))
{
    var viewFetchXml = (from q in svcContext.CreateQuery<SavedQuery>()
                        where q.Name == "Saved Query Name"
                        select q.FetchXml).FirstOrDefault();
    if (viewFetchXml != null)
    {
        FetchExpression query = new FetchExpression(viewFetchXml);
        EntityCollection results = _serviceProxy.RetrieveMultiple(query);    
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:59:28.143

@Pedro，我不知道这是否是方法？我认为这必须通过自定义工作流活动或插件来完成！

```
protected static EntityCollection GetInfo(string EntityName)
        {
            OrganizationService _orgService;
            String connectionString = CrmClasses.Operations.Configuration.GetServiceConfiguration();

            CrmConnection connection = CrmConnection.Parse(connectionString);
            using (_orgService = new OrganizationService(connection))
            {
                QueryExpression request = new QueryExpression
                {
                    EntityName = EntityName,
                    ColumnSet = new ColumnSet { AllColumns = true },
                    Criteria =
                    {
                        Filters =
                                    {
     // -------------- insert here the filters criteria view?????????? --------
                      }
                    }                           
                };
                EntityCollection retrieved = _orgService.RetrieveMultiple(request);
                return retrieved;
            }
        }
        #endregion 
```

# php - 如何在密码中匹配多个关系

> ID：15658603
> 
> 赞同：4
> 
> 时间：2013-03-27T12:17:46.430
> 
> 标签：php, neo4j, cypher

Cypher 在匹配关系中支持 OR(|) 我想要这样的 Cypher query= ' start n= node:node_auto_index(name=ashish '') MATCH n-[?: f&:t]-> k return k '

Cypher 支持这一个 n-[?:f|:t]->k for 2 关系，就像这样
G -[:f]->k <-[:t]-H
但是 mote than 2 关系呢？说 3,4 等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:55:53.450

您只需将它们列为单独的 MATCH 元素

```
start n=node:node_auto_index(name='ashish') 
MATCH n-[:f]-> k, n-[:t]-> k, n-[:g]-> k
return k 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T12:56:09.643

您可以像这样分开几个匹配语句：

```
MATCH n-[:A_REL_TYPE*]-end, n-[:ANOTHER_REL_TYPE*]-end 
```

# javascript - TypeError 使用 QueryLoader 插件

> ID：15658605
> 
> 赞同：1
> 
> 时间：2013-03-27T12:17:55.940
> 
> 标签：javascript, jquery, html

对于页面加载器，我使用了该插件。下面是js：

```
var QueryLoader = {
    overlay: "",
    loadBar: "",
    preloader: "",
    items: new Array(),
    doneStatus: 0,
    doneNow: 0,
    selectorPreload: "body",
    ieLoadFixTime: 2000,
    ieTimeout: "",

    init: function() {
        if (navigator.userAgent.match(/MSIE (\d+(?:\.\d+)+(?:b\d*)?)/) == "MSIE 6.0,6.0") {
            //break if IE6          
            return false;
        }
        if (QueryLoader.selectorPreload == "body") {
            QueryLoader.spawnLoader();
            QueryLoader.getImages(QueryLoader.selectorPreload);
            QueryLoader.createPreloading();
        } else {
            $(document).ready(function() {
                QueryLoader.spawnLoader();
                QueryLoader.getImages(QueryLoader.selectorPreload);
                QueryLoader.createPreloading();
            });
        }

        //help IE drown if it is trying to die :)
        QueryLoader.ieTimeout = setTimeout("QueryLoader.ieLoadFix()", QueryLoader.ieLoadFixTime);
    },

    ieLoadFix: function() {
        var ie = navigator.userAgent.match(/MSIE (\d+(?:\.\d+)+(?:b\d*)?)/);
        if (ie[0].match("MSIE")) {
            while ((100 / QueryLoader.doneStatus) * QueryLoader.doneNow < 100) {
                QueryLoader.imgCallback();
            }
        }
    },

    imgCallback: function() {
        QueryLoader.doneNow ++;
        QueryLoader.animateLoader();
    },

    getImages: function(selector) {
        var everything = $(selector).find("*:not(script)").each(function() {
            var url = "";

            if ($(this).css("background-image") != "none") {
                var url = $(this).css("background-image");
            } else if (typeof($(this).attr("src")) != "undefined" && $(this).attr("tagName").toLowerCase() == "img") {
                var url = $(this).attr("src");
            }

            url = url.replace("url(\"", "");
            url = url.replace("url(", "");
            url = url.replace("\")", "");
            url = url.replace(")", "");

            if (url.length > 0) {
                QueryLoader.items.push(url);
            }
        });
    },

    createPreloading: function() {
        QueryLoader.preloader = $("<div></div>").appendTo(QueryLoader.selectorPreload);
        $(QueryLoader.preloader).css({
            height:     "0px",
            width:      "0px",
            overflow:   "hidden"
        });

        var length = QueryLoader.items.length; 
        QueryLoader.doneStatus = length;

        for (var i = 0; i < length; i++) {
            var imgLoad = $("<img></img>");
            $(imgLoad).attr("src", QueryLoader.items[i]);
            $(imgLoad).unbind("load");
            $(imgLoad).bind("load", function() {
                QueryLoader.imgCallback();
            });
            $(imgLoad).appendTo($(QueryLoader.preloader));
        }
    },

    spawnLoader: function() {
        if (QueryLoader.selectorPreload == "body") {
            var height = $(window).height();
            var width = $(window).width();
            var position = "fixed";
        } else {
            var height = $(QueryLoader.selectorPreload).outerHeight();
            var width = $(QueryLoader.selectorPreload).outerWidth();
            var position = "absolute";
        }
        var left = $(QueryLoader.selectorPreload).offset()['left'];
        var top = $(QueryLoader.selectorPreload).offset()['top'];

        QueryLoader.overlay = $("<div></div>").appendTo($(QueryLoader.selectorPreload));
        $(QueryLoader.overlay).addClass("QOverlay");
        $(QueryLoader.overlay).css({
            position: position,
            top: top,
            left: left,
            width: width + "px",
            height: height + "px"
        });

        QueryLoader.loadBar = $("<div></div>").appendTo($(QueryLoader.overlay));
        $(QueryLoader.loadBar).addClass("QLoader");

        $(QueryLoader.loadBar).css({
            position: "relative",
            top: "50%",
            width: "0%"
        });
    },

    animateLoader: function() {
        var perc = (100 / QueryLoader.doneStatus) * QueryLoader.doneNow;
        if (perc > 99) {
            $(QueryLoader.loadBar).stop().animate({
                width: perc + "%"
            }, 500, "linear", function() { 
                QueryLoader.doneLoad();
            });
        } else {
            $(QueryLoader.loadBar).stop().animate({
                width: perc + "%"
            }, 500, "linear", function() { });
        }
    },

    doneLoad: function() {
        //prevent IE from calling the fix
        clearTimeout(QueryLoader.ieTimeout);

        //determine the height of the preloader for the effect
        if (QueryLoader.selectorPreload == "body") {
            var height = $(window).height();
        } else {
            var height = $(QueryLoader.selectorPreload).outerHeight();
        }

        //The end animation, adjust to your likings
        $(QueryLoader.loadBar).animate({
            height: height + "px",
            top: 0
        }, 500, "linear", function() {
            $(QueryLoader.overlay).fadeOut(800);
            $(QueryLoader.preloader).remove();
        });
    }
} 
```

在我的 html 文件中，我使用了以下 Javascript：

```
<script type='text/javascript'>
    QueryLoader.init();
</script> 
```

CSS如下：

```
.QOverlay {
    background-color: #000000;
    z-index: 9999;
}

.QLoader {
    background-color: #CCCCCC;
    height: 1px;
} 
```

我将此用于简单的示例，它运行良好。但是当我将它用于我的网站时，它会在 js 文件中给出如下错误：

> TypeError: $(...).offset(...) 未定义

```
var left = $(QueryLoader.selectorPreload).offset()['left']; 
```

所以请你能帮助解决这个问题：提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:42:51.253

你的插件不是一个真正的插件。请参阅[文档](http://docs.jquery.com/Plugins/Authoring)以查看更多详细信息。

无论如何，即使它不是插件，它也可以使用一些 jQuery 函数作为对象工作。

首先，您不应该在对象函数中调用对象。IE ：

```
QueryLoader.ieTimeout = setTimeout("QueryLoader.ieLoadFix()", QueryLoader.ieLoadFixTime); 
```

在这里，您遇到了您可以在控制台中看到的第一个错误。它应该是 ：

```
this.ieTimeout = setTimeout(this.ieLoadFix, this.ieLoadFixTime); 
```

您可以像这样开始调试，直到您在此处出现初始错误。

# elasticsearch - 为什么 ElasticSearch Heap Size 没有恢复正常？

> ID：15658612
> 
> 赞同：2
> 
> 时间：2013-03-27T12:18:19.787
> 
> 标签：elasticsearch

我已经设置了 elasticsearch 并且效果很好。

我已经完成了一些批量插入并进行了一些负载测试。但是，它已经闲置了一段时间，我不确定为什么堆大小没有减少到`50mb`它开始时的大小？我猜GC没有发生？

![在此处输入图像描述](../Images/94bc5f5b6c8bd92ef743b8c083e3f1e7.png)

请注意，节点在 AWS 上的不同机器上运行。它们都在小型实例上，每个实例都有 1.7GB 的 RAM。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:50:22.247

大概。很难说，JVM 管理内存并做它认为最好的事情。它可能会避免 GC 循环，因为它根本没有必要。实际上，建议设置`mlockall`为true，这样堆在启动时就被完全分配，并且永远不会改变。

ES将内存用于堆并不是真正的问题......内存是要使用的，而不是保存的。除非你有记忆问题，否则我会忽略它并继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T15:04:17.317

ElasticSearch 和 Lucene 维护缓存数据以执行快速排序或分面。

如果您的查询正在进行排序，这可能会增加可能无法释放的 Lucene FieldCache 大小，因为此处的对象不符合 GC 条件。因此 75% 的默认阈值 (CMSInitiatingOccupancyFraction) 不适用于此处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-27T10:43:52.243

您可以按照此处的说明管理 FieldCache 持续时间：[http ://www.elasticsearch.org/guide/en/elasticsearch/reference/current/index-modules-fielddata.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/index-modules-fielddata.html)

# extjs - sencha touch - datepickerfield 不显示当前日期之前的日期

> ID：15658614
> 
> 赞同：0
> 
> 时间：2013-03-27T12:18:20.857
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我如何强制 sencha datepicker 字段仅显示当前日期的日期。并且不显示以前的日期？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:26:26.777

正如 Rob 所说，这是不可能的，因为如果我禁用 1 月和 2 月（因为它是 3 月）然后继续选择明年，则应该再次启用 1 月和 2 月。如果我仍然必须实现它，我必须以编程方式或通过验证来解决它。

# sql - 替换oracle sql case语句中的日期错误

> ID：15658624
> 
> 赞同：0
> 
> 时间：2013-03-27T12:19:04.400
> 
> 标签：sql, oracle11g

我有一个包含日期错误的表。

错误是一个看起来像这样的错字：01-AUG-208 而不是 01-AUG-2008。我要做的是使用正确的信息从该表创建一个视图。

我已经尝试过了，但它给了我一个 ORA-01858: a non-numeric character found where a digit is expected

```
CREATE OR REPLACE VIEW IC_STRUCTURE("DATE_DE_CONSTRUCTION") AS
SELECT 
  CASE
    WHEN DATE_DE_CONSTRUCTION = '01-AUG-208'
    THEN TO_DATE('01-AUG-2008')
    ELSE DATE_DE_CONSTRUCTION
  END AS DATE_DE_CONSTRUCTION
FROM structure_souterraine; 
```

不幸的是，我不能简单地用正确的值更新错误，因为该表每个月都会由另一个数据库更新，这是错误的来源。我必须每个月纠正它。

我的查询有什么问题？还有其他工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:16:16.233

我想你会想要：

```
CREATE OR REPLACE VIEW IC_STRUCTURE("DATE_DE_CONSTRUCTION") AS
SELECT 
  CASE
    WHEN DATE_DE_CONSTRUCTION = '01-AUG-208'
    THEN TO_DATE('01-AUG-2008','DD-MON-YYYY')
    ELSE TO_DATE(DATE_DE_CONSTRUCTION,'DD-MON-YYYY')
  END AS DATE_DE_CONSTRUCTION
FROM structure_souterraine; 
```

更新不正确的值并设置检查约束：

```
TO_DATE(DATE_DE_CONSTRUCTION,'DD-MON-YYYY') > date '1900-01-01' 
```

...不过似乎是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:59:55.560

```
WHEN DATE_DE_CONSTRUCTION = '01-AUG-208' -- Date or char?
THEN TO_DATE('01-AUG-2008') -- this is a date
ELSE DATE_DE_CONSTRUCTION   -- must be date datatype. Your DATE_DE_CONSTRUCTION most likely char. Convert it to date. 
```

# azure - 是否可以使用 NancyFX 启用 CORS？

> ID：15658627
> 
> 赞同：27
> 
> 时间：2013-03-27T12:19:10.740
> 
> 标签：azure, cors, nancy

我有一个用 NancyFX 制作的 API 服务，还有几个前端开发人员针对这个 API 创建了一个 SPA JS 客户端。

我们希望针对已发布的服务器测试客户端代码，而不必过于频繁地发布客户端代码。

但是，客户端在本地主机上运行，​​而服务器在 Windows Azure 上。

在 NancyFX 服务器上启用 CORS 是否可行且容易？我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-05-08T23:32:03.410

Its possible to do this in the bootstraper of Nancy

```
protected override void RequestStartup(TinyIoCContainer container, IPipelines pipelines, NancyContext context)
    {

       //CORS Enable
        pipelines.AfterRequest.AddItemToEndOfPipeline((ctx) =>
        {
            ctx.Response.WithHeader("Access-Control-Allow-Origin", "*")
                            .WithHeader("Access-Control-Allow-Methods", "POST,GET")
                            .WithHeader("Access-Control-Allow-Headers", "Accept, Origin, Content-type");

        }); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-25T05:13:54.317

如果您使用 IIS 来托管 Nancy，在这种情况下是在 Windows Azure 上，那么您只需更新 web.config 以将标头添加到每个请求。

这可以通过添加以下内容来完成：

```
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <add name="Access-Control-Allow-Origin" value="*" />
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

或者，您可以按照 Sunny 的建议进行操作，如果您不喜欢每次都这样写，您可以添加自己的扩展方法：

```
public static class NancyExtensions
{
    public static void EnableCors(this NancyModule module)
    {
        module.After.AddItemToEndOfPipeline(x =>
        {
            x.Response.WithHeader("Access-Control-Allow-Origin", "*");
        });
    }
} 
```

然后你可以打电话给`this.EnableCors()`你的路线。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-03-28T20:33:23.640

如果您的 HTTP 请求很[简单](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Simple_requests)，那么[Phill 的回答](https://stackoverflow.com/a/16206832/196451)就足够了，但如果请求不那么简单，浏览器将发送预检检查。预检检查是一个 OPTIONS HTTP 请求，这也必须处理。

这是配置 CORS 的扩展方法：

```
public static class MyNancyExtension
{
    public static void EnableCORS(this Nancy.Bootstrapper.IPipelines pipelines)
    {
        pipelines.AfterRequest.AddItemToEndOfPipeline(ctx =>
        {
            if (ctx.Request.Headers.Keys.Contains("Origin"))
            {
                var origins = "" + string.Join(" ", ctx.Request.Headers["Origin"]);
                ctx.Response.Headers["Access-Control-Allow-Origin"] = origins;

                if (ctx.Request.Method == "OPTIONS")
                {
                    // handle CORS preflight request

                    ctx.Response.Headers["Access-Control-Allow-Methods"] =
                        "GET, POST, PUT, DELETE, OPTIONS";

                    if (ctx.Request.Headers.Keys.Contains("Access-Control-Request-Headers"))
                    {
                        var allowedHeaders = "" + string.Join(
                            ", ", ctx.Request.Headers["Access-Control-Request-Headers"]);
                        ctx.Response.Headers["Access-Control-Allow-Headers"] = allowedHeaders;
                    }
                }
            }
        });
    }
} 
```

要启用 CORS，请在引导程序中调用此扩展方法：

```
protected override void ApplicationStartup(Nancy.TinyIoc.TinyIoCContainer container, Nancy.Bootstrapper.IPipelines pipelines)
{
    base.ApplicationStartup(container, pipelines);

    pipelines.EnableCORS();
} 
```

请注意，它没有扩展 NancyModule，因为[OPTIONS 是在模块之外处理的](https://github.com/NancyFx/Nancy/issues/1422)（也在[此处](https://stackoverflow.com/q/22068456/196451)）。

# sms - 通过 Arduino 发送/接收短信

> ID：15658633
> 
> 赞同：1
> 
> 时间：2013-03-27T12:19:25.143
> 
> 标签：sms, embedded, arduino, gsm, gprs

我有一个 GBoard，其中包含一个 SIM900 GSM/GPRS 模块、一个 XBEE Shield 和一个 SD 卡插槽。

[这是GBoard产品的链接](http://imall.iteadstudio.com/im120411004.html)。

我希望 Arduino 在 SIM900 模块上发送和接收短信。具体来说，我想主要是看短信，根据短信内容采取一些措施，然后从SIM卡中删除。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T16:29:35.597

这是我通过短信打开/关闭 LED 的工作。您可能需要为您的设置调整代码。

```
#include <SoftwareSerial.h>

SoftwareSerial mySerial(7, 8);

// EN: String buffer for the GPRS shield message
// FR: Mémoire tampon de type string pour les messages du shield GPRS 
String SmsStorePos = String("");
String msg = String("");
String snTmp = String("");
String snFull = String("");

// EN: Set to 1 when the next GPRS shield message will contains the SMS message
// FR: Est mis à 1 quand le prochain message du shield GPRS contiendra le contenu du SMS
int SmsContentFlag = 0;

// EN: Pin of the LED to turn ON and OFF depending on the received message
// FR: Pin de la LED a allumer/éteindre en fonction du message reçu
int ledPin = 5;

void setup()
{
  mySerial.begin(19200);               // the GPRS baud rate   
  mySerial.print("\r");
  delay(1000);
  Serial.begin(19200);                 // the GPRS baud rate
  Serial.println("Started!");

  pinMode( ledPin, OUTPUT ); 
  digitalWrite( ledPin, LOW ); 
}

void loop()
{
    char SerialInByte;

    if(Serial.available())
    {
       mySerial.print((unsigned char)Serial.read());
     }  
    else  if(mySerial.available())
    {
        char SerialInByte;
        SerialInByte = (unsigned char)mySerial.read();

        // EN: Relay to Arduino IDE Monitor
        // FR: Relayer l'information vers le moniteur Serie Arduino
        Serial.print( SerialInByte );

        // -------------------------------------------------------------------
        // EN: Program also listen to the GPRS shield message.
        // FR: Le programme écoute également les messages issus du GPRS Shield.
        // -------------------------------------------------------------------

        // EN: If the message ends with <CR> then process the message
        // FR: Si le message se termine par un <CR> alors traiter le message 
        if( SerialInByte == 13 ){
          // EN: Store the char into the message buffer
          // FR: Stocké le caractère dans le buffer de message
          ProcessGprsMsg();
         }
         if( SerialInByte == 10 ){
            // EN: Skip Line feed
            // FR: Ignorer les Line Feed 
         }
         else {
           // EN: store the current character in the message string buffer
           // FR: stocker le caractère dans la mémoire tampon réservé au message
           msg += String(SerialInByte);
         }
     }   
}

// EN: Make action based on the content of the SMS. 
//     Notice than SMS content is the result of the processing of several GPRS shield messages.
// FR: Execute une action sur base du contenu d'un SMS.
//     Notez que le contenu du SMS est le résultat du traitement de plusieurs messages du shield GPRS.
void ProcessSms( String sms ){
  sms.toLowerCase();
  Serial.print( "ProcessSms for [" );
  Serial.print( sms );
  Serial.println( "]" );

  if( sms.indexOf("on") >= 0 ){
    digitalWrite( ledPin, HIGH );
    Serial.println( "LED IS ON" );
    return;
  }
  if( sms.indexOf("off") >= 0 ){
    digitalWrite( ledPin, LOW );
    Serial.println( "LED IS OFF" );
    return;
  } else {
    mySerial.print("AT+CMGF=1\r");    //Because we want to send the SMS in text mode
    delay(1000);
    mySerial.print("AT+CMGS=\"");
    mySerial.print(snFull);
    mySerial.print("\"\r");
    delay(1000);
    mySerial.print("Unknown Command: ");
    mySerial.print(sms);
    mySerial.print("\r");
    delay(1000);
    mySerial.write(0x1A);  //Equivalent to sending Ctrl+Z     
    return;
  }
}
// EN: Request Text Mode for SMS messaging
// FR: Demande d'utiliser le mode Text pour la gestion des messages
void GprsTextModeSMS(){
  mySerial.println( "AT+CMGF=1" );
}

void GprsReadSmsStore( String SmsStorePos ){
  // Serial.print( "GprsReadSmsStore for storePos " );
  // Serial.println( SmsStorePos ); 
  mySerial.print( "AT+CMGR=" );
  mySerial.println( SmsStorePos );
}

// EN: Clear the GPRS shield message buffer
// FR: efface le contenu de la mémoire tampon des messages du GPRS shield.
void ClearGprsMsg(){
  msg = "";
}

// EN: interpret the GPRS shield message and act appropiately
// FR: interprete le message du GPRS shield et agit en conséquence
void ProcessGprsMsg() {
  Serial.println("");
  Serial.print( "GPRS Message: [" );
  Serial.print( msg );
  Serial.println( "]" );

  if( msg.indexOf( "Call Ready" ) >= 0 ){
     Serial.println( "*** GPRS Shield registered on Mobile Network ***" );
     GprsTextModeSMS();
  }

  // EN: unsolicited message received when getting a SMS message
  // FR: Message non sollicité quand un SMS arrive
  if( msg.indexOf( "+CMTI" ) >= 0 ){
     Serial.println( "*** SMS Received ***" );
     // EN: Look for the coma in the full message (+CMTI: "SM",6)
     //     In the sample, the SMS is stored at position 6
     // FR: Rechercher la position de la virgule dans le message complet (+CMTI: "SM",6) 
     //     Dans l'exemple, le SMS est stocké à la position 6
     int iPos = msg.indexOf( "," );
     SmsStorePos = msg.substring( iPos+1 );
     Serial.print( "SMS stored at " );
     Serial.println( SmsStorePos );

     // EN: Ask to read the SMS store
     // FR: Demande de lecture du stockage SMS
     GprsReadSmsStore( SmsStorePos );
  }

  // EN: SMS store readed through UART (result of GprsReadSmsStore request)  
  // FR: Lecture du stockage SMS via l'UART (résultat de la requete GprsReadSmsStore)
  if( msg.indexOf( "+CMGR:" ) >= 0 ){
    // get number of sender
    int snPos = msg.indexOf("+1");
    Serial.print("SMS From: ");
    snTmp = msg.substring(snPos+1);
    snFull = "";
    for (int i = 0; i < 11; i++){
      snFull += snTmp[i];    
    }
    Serial.println(snFull);

    // EN: Next message will contains the BODY of SMS
    // FR: Le prochain message contiendra le contenu du SMS
    SmsContentFlag = 1;
    // EN: Following lines are essentiel to not clear the flag!
    // FR: Les ligne suivantes sont essentielle pour ne pas effacer le flag!
    ClearGprsMsg();
    return;
  }

  // EN: +CMGR message just before indicate that the following GRPS Shield message 
  //     (this message) will contains the SMS body
  // FR: le message +CMGR précédent indiquait que le message suivant du Shield GPRS 
  //     (ce message) contient le corps du SMS 
  if( SmsContentFlag == 1 ){
    Serial.println( "*** SMS MESSAGE CONTENT ***" );
    Serial.println( msg );
    Serial.println( "*** END OF SMS MESSAGE ***" );
    ProcessSms( msg );
    delSMS();
  }

  ClearGprsMsg();
  // EN: Always clear the flag
  // FR: Toujours mettre le flag à 0
  SmsContentFlag = 0; 
}
void delSMS() {
  mySerial.print("AT+CMGD=");
  mySerial.println(SmsStorePos);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-07T20:47:26.240

如果有人不想使用盾牌，你也可以使用这个[应用程序](https://play.google.com/store/apps/details?id=ram.mere.DoDuino)！

这是[教程]（[https://sites.google.com/site/blueact0/sms-action](https://sites.google.com/site/blueact0/sms-action)）！

更新：您现在也可以将 BlueAct 与串行（不仅是蓝牙）一起使用，但您的设备应该支持 OTG 电缆：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:40:00.757

嗨，我建议您按照[gsmshield](https://github.com/jgarland79/GSM_Shield/blob/master/GSM_Shield.cpp#L1506)库中的示例进行操作，该库链接到 GBoard Usefull Links。

# php - 访问私有对象属性

> ID：15658636
> 
> 赞同：1
> 
> 时间：2013-03-27T12:19:33.197
> 
> 标签：php, amf, sabre

我正在使用 SabreAMF 来解码 PHP 中的 AMF 数据。我得到的结果是：

```
Rtmp\SabreAMF\AMF3\SabreAMF_AMF3_Wrapper Object
(
    [data:Rtmp\SabreAMF\AMF3\SabreAMF_AMF3_Wrapper:private] => Array
    (
      [0] => Array
      (
        [0] => value1
        [1] => value2
      ... 
```

问题是我无法访问数据属性来获取具有值的数组，因为它是私有属性。我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:45:11.273

私有成员的一般想法是阻止从外部访问它们。

如果您有权访问该课程，您可以编写一个`__get`可以帮助您的方法（但如果您有权访问，您也可以将它们公开）。

一些解决方法是“捕捉” `print_r`, `var_export`or`var_dump`函数的输出，然后解析它，这样你就可以得到你需要的东西。

# sql - 连接 3 个表的 SUM

> ID：15658637
> 
> 赞同：-2
> 
> 时间：2013-03-27T12:19:34.033
> 
> 标签：sql, join, sum

我有这些表：

Hraci: IDHrace (int) Jmeno (varchar)

Ucast_Zapas: ID_Hrace_zapas (int) 布兰奇 (int)

Zapas: ID_zapas (int) kategorie_zapas (int)

类别：IDkategorie (int)

我的代码：

```
SELECT Jmeno, COUNT(Ucast)
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace
INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_Hrace_zapas
INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas
WHERE (Ucast=1)AND (Kategorie_zapas=1)
GROUP BY Jmeno; 
```

但它不起作用：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:45:08.243

所以你的`WHERE`条款是错误的：

```
WHERE Hraci.IDHrace = 1 
```

# git - git无法执行任何任务

> ID：15658640
> 
> 赞同：3
> 
> 时间：2013-03-27T12:19:45.673
> 
> 标签：git

我在 Windows 7 上使用从[http://git-scm.com/download](http://git-scm.com/download)下载的 Git 。无论我重新安装 Git 多少次并尝试做某事（即使克隆也不起作用），它根本无法执行任何任务。它总是抛出相同的错误：

```
fatal: Full write to remote helper failed: Invalid argument 
```

我无能为力地弄清楚这到底是什么意思。没有任何网络搜索显示任何明确的解决方案来解决这个混乱。我在网上遇到了几个错误，但直到现在这个错误似乎还没有出现在任何人的系统上。请帮忙，因为我是新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T13:21:19.080

就我而言，是 COMODO Antivirus 默默地阻止了 git 脚本的执行。将整个 git 安装文件夹添加到防病毒软件例外列表中，它应该开始工作。

# c# - 使用撤消修改集合中的类

> ID：15658643
> 
> 赞同：1
> 
> 时间：2013-03-27T12:20:01.680
> 
> 标签：c#, collections, undo

这与其说是如何做某事的问题，不如说是我如何更好地实施某事或以不同的方式思考问题。

我有一个允许用户在网格中选择多行的 winforms 应用程序。这些行代表帐户，当用户选择帐户并点击按钮时，对象上的布尔属性将更改为所选值，无论其现有状态如何。但是，如果验证方法失败，则会向用户发送一条消息，并且需要将布尔属性设置回其原始状态。

```
public void ModifyAccounts(List<DemoAccount> accts, bool updateIsSpecial)
{
    // Dictionary that will hold the account ID along with the booleans original state
    Dictionary<int, bool> originalState = new Dictionary<int, bool>();
    foreach(var acct in accts)
    {
        // Add the current state to the dictionary
        originalState.Add(acct.Id, acct.IsSpecial);

        acct.IsSpecial = updateIsSpecial;
    }

    // Send the list to another method that loops through each account and checks
    // for specific validation rules. Returns a collection of tuples. The tuple
    // contains the account for item1 and a bool validated flag for item2
    var valAccounts = ValidateAccounts(accts);

    var failedAccounts = from obj in valAccounts
                         where !acct.Item2
                         select new
                                  {
                                      account = obj.Item1,
                                      isValid = obj.Item2
                                  };

    if (failedAccounts.Count() > 0)
    {
        // Alert the user with custom msg box method that the accounts failed
        // Do Custom Method

        // Reset the values of the failed accounts to their previous state. 
        // It is possible that some accounts passed validation and were saved,
        // only the failed accounts should be reset. 
        foreach (var obj in failedAccounts)
        {
            bool originalFlagState = false;
            originalFlagStates.TryGetValue(obj.account.Id, out originalFlagState);
            var origAccount = accts.Where(x => x.Id == obj.account.Id).FirstOrDefault();
            origAccount.IsSpecial = originalFlagState;

        }
    }
} 
```

我希望这不会太令人困惑。我只有大约 3 年的开发经验，这并不多。但是，我觉得在做某事时，如果感觉有更好的方法，那么我可能没有正确或有效地做这件事就足够了。修改帐户标志会更改帐户列表中的对象。显然，将对象添加到新列表只会创建对该对象的引用。所以我不能做一些事情，比如持有 2 个集合，一个用于修改，另一个用于原始状态。我也无法进行深度复制，因为帐户类未标记为可序列化。由于对象的类型，我无法更改此设置。

感谢任何可以提供一些建议或见解的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T10:54:45.673

我不明白您为什么要在更改后而不是事先进行验证。但是，如果您真的必须在之后验证并使用 undo，那么有一种设计模式支持这种行为

看看命令模式。这是一个代码项目链接，描述了如何实现它 [http://www.codeproject.com/Articles/8303/Using-the-Command-pattern-for-undo-functionality](http://www.codeproject.com/Articles/8303/Using-the-Command-pattern-for-undo-functionality)

在您的特定情况下，我将遍历命令堆栈并撤消在失败帐户上使用的所有命令

它可能看起来像这样

```
 foreach (var obj in failedAccounts)
         foreach ICommand command in commandStack
              If(command.element.Equals(obj))
                   command.undo; 
```

command.element 应该包含您要使用命令更改的元素。

如果你不想要两个 foreach 你可以使用 System.Linq 操作

# c# - 返回原始实体不是匿名类型的分组集合

> ID：15658648
> 
> 赞同：0
> 
> 时间：2013-03-27T12:20:11.520
> 
> 标签：c#, linq

如何在不使用匿名类型的情况下返回每个成员的类型为 Member 的 groupedMembers 及其所有现有值和更改后的 Name 属性？

我不想使用 .Select() 方法复制/粘贴匿名类型中的所有原始成员值...

```
var groupedMembers = from r in dataRows 
                    join m in members on r.Name equals m.Name
                    group r by r.Name into g
                    select new { Name = String.Format("{0} ({1})", g.Key, g.Count()) };

var dataRows = new List<GenericDataRow> { 
    new GenericDataRow { Name = "E1" },
    new GenericDataRow { Name = "E1" }, 
    new GenericDataRow { Name = "E1" }, 
    new GenericDataRow { Name = "E1" }, 
    new GenericDataRow { Name = "E2" },
    new GenericDataRow { Name = "E2" }, 
    new GenericDataRow { Name = "E2" } 
};          

var members = new List<OtlClientMember> { 
    new Member { Name = "E1" },
    new Member { Name = "E2" },
    new Member { Name = "E3" },
    new Member { Name = "E4" },                         
}; 
```

**输出**

```
E1 (4)
E2 (3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:48:39.190

If `Name` is what makes `GenericDataRow` unique then you need to implement the `IEquatable<GenericDataRow>` as well as overriding `GetHashCode` and `Equals(object)`. Example below.

```
 private class GenericDataRow : IEquatable<GenericDataRow>
    {
        public string Name { get; set; }

        public bool Equals(GenericDataRow other)
        {
            return Name.Equals(other.Name);
        }

        public override int GetHashCode()
        {
            return Name.GetHashCode();
        }

        public override bool Equals(object obj)
        {
            return Equals(obj as GenericDataRow);
        }
    } 
```

With the following Linq:

```
var groupedMembers = from r in dataRows 
                join m in members on r.Name equals m.Name
                group r by r into g
                select new { Name = String.Format("{0} ({1})", g.Key.Name, g.Count()) }; 
```

# playframework - 为所有用户播放 2.1 Http 上下文

> ID：15658649
> 
> 赞同：1
> 
> 时间：2013-03-27T12:20:14.483
> 
> 标签：playframework, playframework-2.1

在 play 2.1 应用程序中，每个用户都有自己的 Http.Context.current()？还是 Http.Context.current() 对所有用户都一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:23:32.537

查看[源代码](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/java/play/mvc/Http.java)显示上下文包含 http 请求、对该请求的 http 响应、会话范围和 flash 范围。

*   请求和响应在当前上下文中不是唯一的——它们在路由文件中设置并通过模型/控制器逻辑选择
*   会话范围对于该会话是唯一的——该用户在该登录期间，
*   flash 范围对于该请求是唯一的——它在下一个请求时被清空

Play 将所有这些都包装起来并赋予它一个唯一的 ID。因此，上下文将特定于该单个操作，其中部分对于该用户是不变的，而您可以指望在所有用户中保持不变的部分。

# c# - C# - 没有模块句柄？

> ID：15658650
> 
> 赞同：2
> 
> 时间：2013-03-27T12:20:15.940
> 
> 标签：c#, hook

我正在尝试通过在 WH_DEBUG 上安装全局挂钩来制作一个能够检测系统上的键盘记录器的程序。我的问题是，GetModuleHandle（以及 - 似乎 - 所有其他更晦涩的获取模块句柄的方法）返回 null。我希望这里的某个人能够对这种情况有所了解。

MainForm.cs：

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;
using System.Runtime;
using System.Diagnostics;
using System.Runtime.InteropServices;
using Microsoft.Win32;

namespace MouseTimer
{
    /// <summary>
    /// Description of MainForm.
    /// </summary>
    public partial class MainForm : Form
    {
        public MainForm()
        {
            InitializeComponent();
        }
        public static void log(String ltxt)
        {
            ((MainForm)Application.OpenForms[0]).richTextBox1.Text += ltxt+"\n";
            ((MainForm)Application.OpenForms[0]).richTextBox1.SelectionStart = ((MainForm)Application.OpenForms[0]).richTextBox1.Text.Length;
            ((MainForm)Application.OpenForms[0]).richTextBox1.ScrollToCaret();
        }
        public int DbgEvt(int code, IntPtr wParam, IntPtr lParam)
        {
            log("DBGEVT: "+wParam.ToString());
            return 0;
        }

        void MainFormLoad(object sender, EventArgs e)
        {
            WindowsHook wh = new WindowsHook(HookType.WH_DEBUG, DbgEvt);
            wh.Install();

        }
    }
} 
```

WindowsHook.cs：

```
public class WindowsHook
{
    public delegate int HookProc(int code, IntPtr wParam, IntPtr lParam);
    protected IntPtr m_hhook = IntPtr.Zero;
    protected HookProc m_filterFunc = null;
    protected HookType m_hookType;
    public delegate void HookEventHandler(object sender, HookEventArgs e);
    public event HookEventHandler HookInvoked;
    protected void OnHookInvoked(HookEventArgs e)
    {
        if (HookInvoked != null)
            HookInvoked(this, e);
    }
    public WindowsHook(HookType hook)
    {
        m_hookType = hook;
        m_filterFunc = new HookProc(this.CoreHookProc); 
    }
    public WindowsHook(HookType hook, HookProc func)
    {
        m_hookType = hook;
        m_filterFunc = func; 
    }       
    protected int CoreHookProc(int code, IntPtr wParam, IntPtr lParam)
    {
        if (code < 0)
            return CallNextHookEx(m_hhook, code, wParam, lParam);

        HookEventArgs e = new HookEventArgs();
        e.HookCode = code;
        e.wParam = wParam;
        e.lParam = lParam;
        OnHookInvoked(e);
        return CallNextHookEx(m_hhook, code, wParam, lParam);
    }
    public void Install()
    {

        using (Process p = Process.GetCurrentProcess())
                using (ProcessModule m = p.MainModule)
        {
                m_hhook = SetWindowsHookEx(m_hookType, m_filterFunc,
               GetModuleHandle(m.ModuleName), 0);
        }

    }

    public void Uninstall()
    {
        UnhookWindowsHookEx(m_hhook); 
        m_hhook = IntPtr.Zero;
    }

    public bool IsInstalled
    {
        get{ return m_hhook != IntPtr.Zero; }
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        protected static extern IntPtr SetWindowsHookEx(HookType code, 
            HookProc func,
            IntPtr hInstance,
            int threadID);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        protected static extern int UnhookWindowsHookEx(IntPtr hhook); 

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        protected static extern int CallNextHookEx(IntPtr hhook, 
            int code, IntPtr wParam, IntPtr lParam);
    [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);

} 
```

问题是，当我尝试（低级）鼠标钩子时，它在没有模块句柄的情况下就可以很好地钩子。所以我不确定问题是什么。任何人都可以帮忙吗？

提前致谢，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:32:26.613

.Net 不支持全局挂钩。

见这里： http: [//support.microsoft.com/kb/318804 ?wa=wsignin1.0](http://support.microsoft.com/kb/318804?wa=wsignin1.0)

我从中引用：

> 除了 WH_KEYBOARD_LL 低级挂钩和 WH_MOUSE_LL 低级挂钩，您不能在 Microsoft .NET Framework 中实现全局挂钩。要安装全局挂钩，挂钩必须具有本机 DLL 导出，以将自身注入另一个需要有效、一致的函数才能调用的进程。此行为需要 DLL 导出。.NET Framework 不支持 DLL 导出。托管代码没有函数指针一致值的概念，因为这些函数指针是动态构建的代理。

# php - PHP 邮件程序（邮件正文为空）

> ID：15658663
> 
> 赞同：0
> 
> 时间：2013-03-27T12:20:53.557
> 
> 标签：php, phpmailer

我是 PHPMailer 的新手，我想用这个类发送 HTML 邮件。但我得到的消息是身体是空的。

这是我的代码：

```
<?php        

$bericht .= 'my html and php code that format the mail';

require_once('class.phpmailer.php');

$mail             = new PHPMailer(); // defaults to using php "mail()"

$body             = preg_replace('/[\]/','',$bericht);

$mail->SetFrom('email@adres', 'Name');

$address = "email@adres";
$mail->AddAddress($address, "");

$mail->Subject    = "PHPMailer Test Subject via mail(), basic";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:30:38.607

我觉得你的有问题`preg_replace()`。如果我尝试在我的服务器上运行它，我会收到以下警告：

> 警告：preg_replace()：编译失败：偏移 3 处的字符类缺少终止]

您是否尝试了没有`preg_replace()`, 即仅通过传递`$bericht`到的代码`MsgHTML()`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:39:14.630

我误解了如果不需要变量，为什么需要对变量执行此增量。

```
$bericht .= ...; 
```

是的，引号内的字符串值在哪里？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:24:40.237

我认为你的代码有错误

```
$bericht .= (my html and php code that format the mail); 
```

应该

```
$bericht = 'my html and php code that format the mail'; 
```

然后代替这个

```
$body             = $bericht;
$body             = preg_replace('/[\]/','',$body); 
```

这样做更容易

```
$body             = preg_replace('/\[\]/','',$bericht); 
```

# django - 启用 Django 表单国际化

> ID：15658670
> 
> 赞同：1
> 
> 时间：2013-03-27T12:21:22.777
> 
> 标签：django, forms, internationalization

我正在努力实现表格的国际化。据我了解我阅读的[文档](https://docs.djangoproject.com/en/dev/topics/i18n/formatting/#locale-aware-input-in-forms)和帖子，必须将以下设置添加到应用程序以使表单国际化工作。

1.  在 settings.py 中将 USE_L10N 设置为 True；USE_L10N = 真
2.  在视图中设置语言环境：

    ```
    import locale
    locale.setlocale(locale.LC_ALL, 'de_DE') 
    ```

3.  对于将 localize 设置为 True 的每个表单字段：

    ```
    class ExpenditureForm(forms.ModelForm):
        class Meta:
            model = Expenditure
            fields = ('gross_value', 'tax', 'receipt_date', 'currency', 'description', 'receipt',)

    def __init__(self, *args, **kwargs):
        super(ExpenditureForm, self).__init__(*args, **kwargs)
        self.fields['gross_value'].localize = True
        self.fields['gross_value'].widget.is_localized = True #added this as reaction to comments. 
    ```

简化模型如下所示：

```
class Expenditure(models.Model): 
    user = models.ForeignKey(User)
    purchase_order_membership = models.ForeignKey(PurchaseOrderMembership)
    month = models.PositiveIntegerField(max_length=2)
    year = models.PositiveIntegerField(max_length=4)
    net_value = models.DecimalField(max_digits=12, decimal_places=2)
    gross_value = models.DecimalField(max_digits=12, decimal_places=2) 
```

我执行了这些步骤，但 Django 仍然只接受带有点作为小数分隔符的数字输入，而不是根据德语符号的需要，将逗号作为小数分隔符。

所以可能我错过了一步。我也不确定在哪里设置语言环境。我认为视图不是合适的地方。在视图中为每个请求设置语言环境不是很干。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:16:57.850

Your form is right, also `settings.py` . Elegant way is to set translation activate in a middleware, but in view. See [stefanw's answer](https://stackoverflow.com/a/2336889/842935) for details, I quote answer here:

```
from django.utils import translation

class LocaleMiddleware(object):
    """
    This is a very simple middleware that parses a request
    and decides what translation object to install in the current
    thread context. This allows pages to be dynamically
    translated to the language the user desires (if the language
    is available, of course).
    """

    def process_request(self, request):
        language = translation.get_language_from_request(request)
        translation.activate(language)
        request.LANGUAGE_CODE = translation.get_language() 
```

Remember to register the middleware.

# java - java, 将 -XX:HeapDumpPath 目录设置为 user.home

> ID：15658673
> 
> 赞同：0
> 
> 时间：2013-03-27T12:21:43.467
> 
> 标签：java, heap-dump

我正在尝试控制我的堆转储在哪里使用内存异常`-XX:HeapDumpPath`

我的 java 进程没有写入当前工作目录的权限，所以我试图指定`user.home`目录。我无法提前知道绝对名称，所以我尝试使用变量来做到这一点`user.home`

我试过`-XX:HeapDumpPath=${user.home}/mydump.hprof`了，但这不起作用

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:23:20.950

当您运行您建议的命令时，在运行`${user.home}`之前由您的 shell 扩展`java`，并且很可能是空白的。

更改`${user.home}`为`${HOME}`。

# android - Android 4.2.2 SDK 使用的是什么版本的 Apache HttpClient？

> ID：15658678
> 
> 赞同：8
> 
> 时间：2013-03-27T12:22:16.033
> 
> 标签：android, sdk, httpclient

Android 4.2.2 SDK 使用的是什么版本的 Apache HttpClient？我检查了[https://code.google.com/p/httpclientandroidlib/](https://code.google.com/p/httpclientandroidlib/)但它似乎不正确，原因是 AuthCache 类应该在 Android 4.2.2 SDK 中，如果它使用最新的 HttpClient。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T12:30:39.513

> Android 4.2.2 SDK 使用的是什么版本的 Apache HttpClient？

从一开始就与每个版本的 Android 相同。我认为官方数字是 4.0-beta-1，或者可能是 4.0-beta-2。有关更多信息，请参阅[https://stackoverflow.com/a/4818714/115145](https://stackoverflow.com/a/4818714/115145)。

[https://code.google.com/p/httpclientandroidlib/](https://code.google.com/p/httpclientandroidlib/)是将 HttpClient 重构为一个新的包 ( `ch.boye.httpclientandroidlib`)，以允许它与 Android 的旧版本 HttpClient 同时存在于您的 VM 中。

# css - 反馈部分出现的水平滚动条是什么？

> ID：15658682
> 
> 赞同：0
> 
> 时间：2013-03-27T12:22:20.147
> 
> 标签：css, html, scrollbar

[http://whybaguio.com/php/profile/businessprofile.php?id=178](http://whybaguio.com/php/profile/businessprofile.php?id=178)

有人能告诉我为什么要为反馈部分创建一个水平滚动条吗？？？？我正在检查元素，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:24:22.110

给. `overflow-x:hidden`_ `#feed`那就是解决问题。

并`position:absolute`从`.second`课堂上删除。

# c - 在 C 中管理几乎相同的数据结构

> ID：15658685
> 
> 赞同：1
> 
> 时间：2013-03-27T12:22:38.063
> 
> 标签：c, oop, data-structures

使用以下（简化的）数据定义：

```
#define DIM0 10
#define DIM1 15

typedef struct {
    uint32_t var1:
    ...
    int8_t arrayVar1[DIM0];
 } dataClass0;

typedef struct {
    uint32_t var1:
    ...
    int8_t arrayVar1[DIM1];
 } dataClass1; 
```

在一个给定的点上，我必须创建这些结构的数组并处理它们。

除了数组（不同长度）之外，处理完全相同。现在它是这样的：

```
 dataClass0 *data;
 data = (dataClass0 *) malloc(dimension * sizeof (dataClass0));
 // Processing and filling structure
 data[i].var1 = <value>
 ... 
```

现在我为每个数据类复制了相同的函数。使用这些数据结构时有没有办法避免重复代码？

笔记：

*   只有纯 C，没有 C++；
*   我无法更改数据定义（即不能`int8_t *arrayVar1`在结构中使用）。
*   处理时，我收到要处理的数据类型（0 表示 class0，1 表示 class1，...）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:42:07.230

```
typedef struct {
    uint32_t var1:
    ...
    int8_t arrayVar[];    /* Declare as flexible array, allowed since C99 */
} dataClass; 
```

分配类似的东西：

```
data1 = malloc(sizeof (dataCLass) + DIM1*sizeof ((dataClass*)NULL)->arrayVar[0]);
data2 = malloc(sizeof (dataCLass) + DIM2*sizeof ((dataClass*)NULL)->arrayVar[0]);
or define
#define ALLOCDATA(dim) malloc(sizeof (dataCLass) + (dim)*sizeof ((dataClass*)NULL)->arrayVar[0]); 
```

定义

```
#define ELEMENT1(data, i) (dataClass*)(((char*)(data))+(i)*(DIM1+sizeof (dataCLass)))
#define ELEMENT2(data, i) (dataClass*)(((char*)(data))+(i)*(DIM2+sizeof (dataCLass))) 
```

或者如果您将 DIM 参数化

```
#define ELEMENT(data, i, dim) (dataClass*)(((char*)(data))+(i)*((dim)+sizeof (dataCLass))) 
```

请享用

```
ELEMENT1(data1, i)->var1 = 1;
ELEMENT1(data1, i)->arrayVar1[9] = 4;

ELEMENT2(data2, i)->arrayVar1[14] = 4; 
```

或者

```
ELEMENT(data1, i, DIM1)->var1 = 1;
ELEMENT(data1, i, DIM1)->arrayVar1[9] = 4;

ELEMENT(data2, i, DIM2)->arrayVar1[14] = 4; 
```

不完美，但不是太奇怪的构造不可用。

编辑： ELEMENT 定义应更改为

```
#define ELEMENT1(data, i) (dataClass*)(((char*)(data))+(i)*(DIM1*sizeof ((dataClass*)NULL)->arrayVar[0]+sizeof (dataCLass)))
#define ELEMENT2(data, i) (dataClass*)(((char*)(data))+(i)*(DIM2*sizeof ((dataClass*)NULL)->arrayVar[0]+sizeof (dataCLass)))

#define ELEMENT(data, i, dim) (dataClass*)(((char*)(data))+(i)*((dim)*sizeof ((dataClass*)NULL)->arrayVar[0]+sizeof (dataCLass))) 
```

通过此更改，您的 arrayVar 字段可以是任何类型，并且不限于大小为 1 的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:27:02.453

你不能让数组动态吗？所以你创建你的结构，`malloc()`然后初始化一些成员来保存大小（并确保它以一个`uint8_t *`而不是一个实际的数组结尾，或者使用 VLA）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:00:44.560

这取决于您是否要最初用不同的值填充数组。否则，您可以只使用一个宏来初始化两种类型的结构

```
#define STRUCTURE_INITIALIZER(VAR1, VAR2) { .var1 = (VAR1), .var2 = (VAR2) } 
```

并将其用作

```
dataClass0 data = STRUCTURE_INITIALIZER(31, 42); 
```

`0`然后，无论它们的大小如何，您的数组组件都将始终被初始化。

要初始化`malloc`你的东西的 ed 数组：

```
dataClass0 *data  = malloc(dimension * sizeof (dataClass0));

// Processing and filling structure
for (size_t i = 0; i < dimension; ++i)
  data[i]= (dataClass0)STRUCTURE_INITIALIZER(43, i); 
```

顺便说一句，更喜欢正确初始化变量并且不要强制返回`malloc`.

# android - 如何使用 onResume()？

> ID：15658687
> 
> 赞同：92
> 
> 时间：2013-03-27T12:22:46.163
> 
> 标签：android, android-lifecycle, onresume

谁能给我一个`onResume()`在Android中使用的例子？

另外，如果我想在另一个执行结束时重新启动活动，执行哪个方法 - <code>onCreate() 还是`onResume()`？

如果我想更新数据，我该如何把它放进去`onResume()?`

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-03-27T12:31:30.190

任何重新启动的 Activity 都会首先执行其**onResume()**方法。

要使用此方法，请执行以下操作：

```
@Override
public void onResume(){
    super.onResume();
    // put your code here...

} 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-03-27T12:26:17.763

重新启动应用程序将调用`OnCreate()`.

暂停时继续应用程序将调用`OnResume()`. [来自https://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](https://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)的官方文档，这里是活动生命周期的图表。

[![Android 活动生命周期，来自 https://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle 上的 https://developer.android.com/images/activity_lifecycle.png](../Images/0f1d7bdd8c984794a0f9daffadebaf51.png)](https://i.stack.imgur.com/DJjEq.png)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-27T12:37:35.613

最好的理解方法是在您的活动中覆盖所有 LifeCycle 方法，并在每个方法中放置一个断点（如果签入模拟器）或一个日志。您将知道何时调用哪个。

就像剧透一样，`onCreate()`首先被调用，然后如果您通过进入主屏幕或启动另一个活动来暂停活动，则会`onPause()`被调用。如果操作系统在此期间破坏了活动，`onDestroy()`则被调用。如果您恢复应用程序并且应用程序已经被销毁，`onCreate()`将被调用，否则`onResume()`将被调用。

编辑：我忘了`onStop()`，它之前被调用过`onDestroy()`。

做我提到的练习，你会有更好的理解。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-27T12:50:43.087

以前的大多数答案都很好地解释了如何、为什么以及何时使用，`onResume()`但我想补充一些关于重新创建你的`Activity`.

> 我想知道我是否想在另一个执行 onCreate() 或 onResume() 的方法结束时重新启动活动

答案是`onCreate()`然而，在决定实际重新创建它时，您应该问自己有多少`Activity`需要重新创建。如果它是适配器中的数据，比如说一个列表，那么您可以调用`notifyDataChanged()`来`adapter`重新填充，`adapter`而不必重绘所有内容。

此外，如果您只需要更新某些`views`但不是全部，那么调用需要更新`invalidate()`的（s）可能会更有效。`view`这只会重绘那些`views`，并可能让您的应用程序运行得更顺畅。我希望这可以帮助你。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-03-23T18:34:41.153

当您打开应用程序时，它会经历以下状态：onCreate() –> onStart() -> onResume()

当您按下返回按钮并退出应用程序时

onPaused() -> onStop() -> onDestory()

当你按下主页按钮

onPaused() -> 停止()

按下主页按钮后，再次从最近的任务列表中打开应用程序时

onRestart() -> onStart() -> onResume()

从对话框中关闭对话框或返回按钮后

onResume()

如果电话正在响铃并且用户正在使用该应用程序

onPause() -> onResume()

通话结束后

onResume()

当您的手机屏幕关闭时

onPaused() -> 停止()

当您的手机屏幕重新打开时

onRestart() -> onStart() -> onResume()

快乐编码...@Ambilpura

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-27T12:37:00.660

`onResume()`是整个[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)中调用的方法之一。`onResume()`是在任何时候从视图中隐藏活动时调用的对应`onPause()`项，例如，如果您启动一个隐藏它的新活动。`onResume()`当隐藏的活动返回到屏幕上查看时调用。

您的问题是询问使用什么方法来重新启动活动。`onCreate()`在首次创建活动时调用。在实践中，大多数活动通过一系列`onPause()`和`onResume()`调用在后台持续存在。`onRestart()`一个活动只有在首先通过调用完全停止`onStop()`然后恢复生命时才真正“重新启动” 。因此，如果您实际上并没有停止使用`onStop()`它的活动，那么您很可能会使用`onResume()`.

阅读以上链接中的 android 文档，以更好地了解不同生活方式之间的关系。无论您最终使用哪种生命周期方法，通用格式都是相同的。您必须覆盖标准方法并在注释部分包含您的代码，即您希望活动在该点执行的操作。

```
@Override
public void onResume(){
 //will be executed onResume
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-27T12:30:09.683

重新查看 Android Activity 生命周期参考。有一张漂亮的图片，表格显示了调用了哪些方法。参考链接[google](https://developer.android.com/reference/android/app/Activity.html)

[https://developer.android.com/reference/android/app/Activity.html](https://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-05-20T09:53:08.990

**科特林**

任何重新启动的 Activity 都会首先执行其 onResume() 方法。

要使用此方法，请执行以下操作：

```
override fun onResume() {
        super.onResume()
        // your code here
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-02T01:23:04.723

在活动开始后，重新启动（onRestart() 发生在 onStart() 之前）或暂停（onPause()），onResume() 调用。当 Activity 处于 onResume() 状态时，该 Activity 已准备好供应用用户使用。

我对活动生命周期进行了一些研究，以下是我对这个主题的理解：如果你想在另一个活动的执行结束时重新启动活动（A），可能有几种不同的情况。

1.  另一个活动 (B) 已暂停和/或停止或销毁，并且活动 A 可能已暂停 (onPause())，在这种情况下，活动 A 将调用 onResume()

2.  活动 B 已暂停和/或停止或销毁，活动 A 可能由于内存问题已停止 (onStop())，在这种情况下，活动 A 将首先调用 onRestart()，其次是 onStart()，然后是 onResume ()

3.  活动 B 已暂停和/或停止或销毁，活动 A 已销毁，程序员可以手动调用 onStart() 以先启动活动，然后再调用 onResume()，因为当活动处于销毁状态时，活动已没有开始，这发生在活动被完全删除之前。如果活动被删除，则需要重新创建活动。手动调用 onStart() 我认为这是因为如果活动没有启动并且它被创建，onStart() 将在 onCreate() 之后被调用。

如果要更新数据，请创建一个数据更新函数并将该函数放在 onResume() 中。或者在 onResume() 里面放一个 loadData 函数

最好借助 Activity 生命周期图来理解生命周期。

# imacros - 从另一个 iMacros 脚本调用 iMacros 脚本

> ID：15658693
> 
> 赞同：2
> 
> 时间：2013-03-27T12:23:09.950
> 
> 标签：imacros

假设我有 2 个 iMacros 脚本 script1.iim 和 script2.iim，是否可以从 script1.iim 中调用 script2.iim？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:00:46.737

是的。

您可以为此目的使用 JavaScript 脚本。将`script1.iim`和`script2.iim`放在同一个文件夹中`#Current.iim`

然后你可以制作一个 JavaScript 并命名它`test.js`。在其中放置这些代码。

```
iimPlay("script1.iim")
iimPlay("script2.iim") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:24:47.320

一个简单的选择是结合这两个脚本

# three.js - 与 Raycaster 相交精灵

> ID：15658704
> 
> 赞同：5
> 
> 时间：2013-03-27T12:23:42.803
> 
> 标签：three.js

我想用 three.js 实现一个 3D 交互式地球，我想知道是否有一种方法可以将 Sprites 原语与 Raycaster 相交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:16:51.700

If you check the source code for RayCaster at

[https://github.com/mrdoob/three.js/blob/master/src/core/Raycaster.js](https://github.com/mrdoob/three.js/blob/master/src/core/Raycaster.js)

it would appear that the intersectObject function only checks objects that are instances of THREE.Particle or THREE.Mesh, not THREE.Sprite. Possibly this is because sprites could be set to use screen coordinates, and so a ray that projects into your 3d scene wouldn't make sense in this situation, or if placed in the scene as the sprite image always faces the camera, it doesn't act like your standard 3d mesh.

Perhaps you could attach a PlaneGeometry or a very thin CubeGeometry to the position of your sprite, set its rotation to the rotation of the camera so that it is always parallel to the view plane of the camera like the sprite is, and then check for intersections with the mesh instead?

# javascript - 使用 PHP 在同一页面中计算

> ID：15658706
> 
> 赞同：0
> 
> 时间：2013-03-27T12:23:43.140
> 
> 标签：javascript, validation

我只需要在文本框中输入“ **0** ”或“ **1** ”或“ **0.5** ”作为输入，使用 PHP。我已经使用了代码，在文本框中只输入数字：

```
<input type="text" id="tla1" name="tlaCasual"  maxlength="3" onkeyup="enterNumber()" onblur="calculate_casualleave()"  style="width:40px;" > 
```

和javascript是：

```
<script language="javascript" type="text/javascript">
function enterNumber()
{    
    var e = document.getElementById('tla1');
    if (!/^[0-9]+$/.test(e.value)) 
    {
        alert("Please enter only number.");
        e.value = e.value.substring(0,e.value.length-1);
    }
}   
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:32:15.013

这与 PHP 无关，PHP 是一种服务器端语言。您也没有指出您要计算的确切内容，但我想您要求正确的正则表达式只允许“0”、“0.0”、“0.5”、“1”和“1.0”，即`^(0(\.0|\.5)?|1(\.0)?)$`

仅用于“0”、“0.5”和“1”`^(0(\.5)?|1)$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:34:33.090

我不明白为什么要使用正则表达式来测试三个可能的值。

```
if((e.value!=1) && (e.value!=0.5) && (e.value!=0)){
 // error
 }
else{
 // ok
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:32:21.897

我会假设你的问题是“它不起作用”。

正则表达式确实不接受“0.5”，所以我猜您只需将其更新为：

```
 function enterNumber(){

   var e = document.getElementById('tla1');

      if (!/^[0-9\.]+$/.test(e.value)) 
    { 
    alert("Please enter only number.");
    e.value = e.value.substring(0,e.value.length-1);
    }
    } 
```

希望这可以帮助...

# php - 如何显示文件夹中的图片php

> ID：15658707
> 
> 赞同：-3
> 
> 时间：2013-03-27T12:23:54.437
> 
> 标签：php, html

我有一个保存上传文件的文件夹。此页面用于检索那些保存的文件。文件夹中有一张名为“flower.jpeg”的图片，我正在尝试使用图像标签显示该图片，如下所示。我有两个选择，但它们都不起作用。

```
 <!DOCTYPE html>
    <html>
    <body>
    <?php

        $picture=flower.jpeg
        $playfile='/upload/$picture';

    ?>
        // <img href= '<?php $playfile ?>'  width="800" height="600">   
        // <img src= '<?php echo $playfile; ?>'  width="800" height="600">  <br>

    <script>
        document.write('<a href="' + document.referrer + '">Go Back To Chat</a>');
    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:26:59.373

flower.jpeg 需要引号，并且 $playfile 分配没有正确指定，据我所知，单引号内的字符串不会被解析为 PHP 中的变量。

```
$picture='flower.jpeg';
$playfile='/upload/'.$picture; 
```

另外正确使用标签如下

```
<img src="<?php echo $playfile; ?>"  width="800" height="600"> 
```

由于属性需要用双引号括起来，因此您只是使用 PHP 来回显包含字符串的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:30:07.840

什么是错的解释。您正在使用以下代码来构建您的链接：

```
$picture=flower.jpeg
$playfile='/upload/$picture'; 
```

首先，你需要引用图片

```
$picture = 'flower.jpg';
//or
$picture = "flower.jpg"; 
```

下一个问题是如何构建`playfile`. 您需要退出单引号以使用变量或使用双引号：

```
$playfile = '/upload/'.$picture;
//or
$playfile = "/upload/$picture";
//or even
$playfile = "/upload/".$picture; 
```

单引号将按原样获取文本，双引号将评估其中的变量。我建议继续阅读 PHP 和字符串的基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:20:42.323

这里有几个步骤*可以*帮助您确定图像的路径（或您所称的“href”）是否正确。正如西蒙指出的那样，由于我们无权访问您的文件系统，因此不可能有直接的解决方案。

*   检查您的图片的文件扩展名是否正确提及。还要检查它是否在正确的大写字母中。例如，如果您使用 MS Paint 保存图片，则扩展名为 *.PNG，但您的脚本可能包含 *.png；在某些情况下，这*可能会*导致问题。

*   .jpg 和 .jpeg 有时是两个不同的扩展名（就上述观点而言）。您可能需要考虑到这一点。

*   您可能需要验证图像的目录结构是否正确（即验证您指定的文件路径是否正确）。

希望这对您有所帮助。上述步骤是粗略和模糊的。如果他们未能帮助您，请发表评论，有人将能够帮助您。

# jquery - 带有 esc 的 Jquery 淡出 div

> ID：15658711
> 
> 赞同：0
> 
> 时间：2013-03-27T12:23:58.520
> 
> 标签：jquery, fadeout

我是网页设计的新手。现在已经做了半年了。我正在尝试使用 JS，但我无法弄清楚......我得到了这个代码：

```
$(window).load(function(){ 
    $('div#contact1').click(function(e){    
        $('div#contact1').fadeOut('slow', function(){
            $('div#contact2').fadeIn('slow');
        });
    }); 
    $('div.close3').click(function(e){    
        $('div#contact2').fadeOut('slow', function(){
            $('div#contact1').fadeIn('slow');
        });
    });
}); 
```

我想用 div#close3 和转义键淡出 div contact2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:40:24.770

添加这个：

```
$(document).keyup(function(e){
    if (e.keyCode == 27) { 
        $('div#contact2').fadeOut('slow', function(){
            $('div#contact1').fadeIn('slow');
        });
    }
}); 
```

**资料来源：** [使用 jQuery 的转义键的哪个键码](https://stackoverflow.com/questions/1160008/which-keycode-for-escape-key-with-jquery)

# c# - C# 泛型协方差

> ID：15658712
> 
> 赞同：0
> 
> 时间：2013-03-27T12:24:07.283
> 
> 标签：c#, .net

**我在 DerivedFileInfo 类声明中遇到错误。**

> *错误：类型“StorageManager.Test.DerivedStorageProvider”不能用作泛型类型或方法“StorageManager.Test.BaseFileInfo”中的类型参数“TStorageProvider”。没有从“StorageManager.Test.DerivedStorageProvider”到“StorageManager.Test.IStorageProvider”的隐式引用转换。*

**通用约束是否缺少某些东西，或者我需要通用协变？**

```
public interface ICacheProvider
{
}

public class BaseCacheProvider : ICacheProvider
{
}

public class DerivedCacheProvider : BaseCacheProvider
{

}

public interface IStorageProvider<TCacheProvider> where TCacheProvider : ICacheProvider
{
}

public abstract class BaseStorageProvider<TCacheProvider> : IStorageProvider<TCacheProvider> where TCacheProvider : ICacheProvider
{
}

public class DerivedStorageProvider : BaseStorageProvider<DerivedCacheProvider>
{
}

public interface IResourceInfo<TStorageProvider> where TStorageProvider : IStorageProvider<ICacheProvider>
{
}

public abstract class ResourceInfo<TStorageProvider> : IResourceInfo<TStorageProvider>
    where TStorageProvider : IStorageProvider<ICacheProvider>
{
}

public abstract class BaseFileInfo<TStorageProvider> : ResourceInfo<TStorageProvider> where TStorageProvider : IStorageProvider<ICacheProvider>
{
}

public class DerivedFileInfo : BaseFileInfo<DerivedStorageProvider>
{ 
} 
```

# c# - 将导出的 doc 文件保存到磁盘

> ID：15658723
> 
> 赞同：0
> 
> 时间：2013-03-27T12:24:41.780
> 
> 标签：c#, asp.net, export

是否可以使用 Response.Write() 保存导出的 Word 文档文件。现在它显示保存/打开对话框，一旦它转换成功。但我需要将此文件保存到文件夹中。请帮我解决这个问题。

我的 Doc 代码转换附在下面。

```
 private void ExportDataSetToWordDoc()
    {
        try
        {
            Response.ClearContent();
            Response.Buffer = true;
            Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", DateTime.Today.ToShortDateString().Replace("/", "").Replace("-", "") + "_" + DateTime.Now.ToShortDateString() + ".doc"));
            Response.ContentType = "application/ms-word";
            StringWriter sw = new StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);

            tblMain.RenderControl(htw);

            Response.Write(sw.ToString());
            Response.End();
        }
        catch (ThreadAbortException ex)
        {

            Common.LogError(ex);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:22:02.437

我修改了我的代码，如下所示。现在它保存指定的文件夹

```
Response.ClearContent();
            Response.Buffer = true;
            Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", DateTime.Today.ToShortDateString().Replace("/", "").Replace("-", "") + "_" + DateTime.Now.ToShortDateString() + ".doc"));
            Response.ContentType = "application/ms-word";
            StringWriter sw = new StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);

            tblMain.RenderControl(htw);

            string strPath = Request.PhysicalApplicationPath + "Test.doc";
            StreamWriter sWriter = new StreamWriter(strPath);
            sWriter.Write(sw.ToString());
            sWriter.Close(); 
```

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:48:37.603

由浏览器为用户提供“打开或保存”选项。这就是您的内容处置“附加”鼓励浏览器执行的操作。您的另一个选项是内容处置“内联”，浏览器通常只会调用应用程序（在本例中为 Word）来打开文件。 [请参阅 MSDN](http://msdn.microsoft.com/en-us/library/system.net.mime.contentdisposition.inline.aspx)。

遗憾的是，浏览器并不总是提供您在“另存为”对话框中指定为默认文件名的文件名。通常，它会提供您的网页名称作为默认名称。Firefox 至少将其记录为一个错误，IE 似乎认为这是一个“功能”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:33:48.447

您可以通过路径使用流编写器 (System.IO.StreamWriter)。当流写入器关闭时，文件将保存在指定路径。

但是，它将保存在服务器磁盘上。如果你想在客户端保存，你别无选择，只能询问用户将文件放在哪里。未经客户端批准，您不能将文件保存在客户端上。

```
var x = new System.IO.StreamWriter(path);
x.Close(); 
```

# javascript - 如何在 Facebook Canvas 应用程序中调用 FB.ui？

> ID：15658726
> 
> 赞同：0
> 
> 时间：2013-03-27T12:24:48.410
> 
> 标签：javascript, facebook, canvas, sdk, payment

我想创建一个使用 Facebook 登录的网站，用户可以通过简单的支付方式购买虚拟商品。

据我了解，Facebook 支付系统（弹出窗口等）仅适用于 Canvas 应用程序或移动设备。因此，我已经设置了我的应用名称空间和画布页面 url，以便 app.facebook.com/### 包含我想要的页面。

要检查用户是否已登录并已授予应用程序的基本权限，我有：

```
<?php 

 $app_id = "###";

 $canvas_page = "http://apps.facebook.com/###";

 $auth_url = "https://www.facebook.com/dialog/oauth?client_id=" . $app_id . "&redirect_uri=" . urlencode($canvas_page);

 $signed_request = $_REQUEST["signed_request"];

 list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

 $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);

 if (empty($data["user_id"])) {
        echo("<script> top.location.href='" . $auth_url . "'</script>");
 }
 else {
    echo $data["user_id"];
 }

?> 
```

在页面的正文中。显然，一些用户数据在 $data 对象中是可用的。

但是，现在我想要一个支付按钮，我需要使用 JS SDK 来调用`FB.ui(...)`. 更简单地说，只是为了访问，`FB.me(...)`我需要通过并异步加载 JS SDK，`FB.init(...)`并检查登录状态，以便我可以调用`FB.me`and`FB.ui`函数。这个对吗？我的印象是上面的PHP已经有了一些这样的数据，那么我真的需要重新连接Javascript来调用这些函数吗？当我这样做时，我只是将`response.id`或其他用户数据设为“未定义”。

一般来说，我只想知道 - 如何在画布上运行的 Facebook 应用程序中使用基本的 api 调用？

付款教程全部在 JS 中，但应用程序必须在画布中，使用 PHP 重定向。

## 编辑

我应该说清楚的；`FB.me(...)`与其他`FB.`函数一样返回未定义。JS 是标准的，从教程代码中复制粘贴，异步加载 sdk，包装`FB.init()`和其他功能在`window.fbAsyncInit`. 出于某种原因，在画布中似乎会阻止标准 JS SDK 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:24:36.587

仅仅因为您使用 PHP SDK 并不意味着您不应该使用 javascript SDK，因为事实上它们是为了一起使用而构建的，通过客户端和服务器端创建更好的连接。

我使用 javascript SDK 来处理用户状态（已登录、应用程序是否授权等），处理用户与来自 facebook 的插件的对话和交互及其各自的响应，并处理由用户的操作触发的事件.

在服务器端，我使用 PHP SDK 来查询 facebook 或检索有关用户的信息，我也总是在服务器端验证用户。

# java - 重置/销毁对象实例

> ID：15658736
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:25:16.053
> 
> 标签：java, object, reset

我正在将 PHP 代码翻译成 JAVA 代码。

PHP代码片段：

```
class Population {
        private $ind;

        public function __construct()
        {
            $this->ind = array();
        }

        function ResetObject() {
            foreach ($this as $key => $value) {
                unset($this->$key);
            }
        }
}

$temppop->ResetObject(); 
```

如何`ResetObject`在 JAVA 代码中替换以`temppop`从内存中删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:27:17.313

您不必手动从内存中删除它，Java 有垃圾收集来为您执行此操作。

如果你愿意，你可以打电话`System.gc()`告诉 JVM 你想进行垃圾收集，但它可以忽略你，直到它可以接受请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:29:37.103

Java 使用垃圾收集器，它在堆中搜索断开连接的对象并回收它们的内存。您不能强制 GC，但我相信（至少在 1.2 中）您可以推荐它。要使对象可用于 GC，只需将对其的所有引用设置为 null。

# php - 在 echo 中显示 php 代码

> ID：15658738
> 
> 赞同：4
> 
> 时间：2013-03-27T12:25:19.117
> 
> 标签：php

如何在 print / echo 中打印 php 代码？

我的意思是：

```
<?php echo "<?php ?>"; ?> 
```

应该输出：`<?php ?>`在我的屏幕上，但我收到一个空白页。我必须使用任何特殊的转义？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T12:26:19.480

```
<?php echo htmlspecialchars('<?php ?>'); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:29:14.477

如果返回文件的 Content-Type 是 HTML，Akam 的解决方案会整理 PHP。

或者，您可以将 Content-Type 更改为 Text，从而绕过 HTML 呈现。

```
<?php

header( 'Content-type: text/plain' );

echo '<?php ?>';

?> 
```

当然，这会影响*整个*页面，而不仅仅是其中的一部分。因此，将 PHP 脚本文件的内容显示为独立页面会很有用，但如果您想在 HTML 页面中显示 PHP 代码片段，那么 Akam 的解决方案将更适合这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:30:01.133

如果您打印并假装将其视为 HTML，浏览器将解释该标签并且什么也不显示，但如果您查看源代码，您仍然可以看到它。要正确显示 < 和 > 标签，您应该使用 < 和> 或使用[htmlentities()](http://www.php.net/manual/en/function.htmlentities.php)或[htmlspecialchars()](http://www.php.net/manual/en/function.htmlspecialchars.php)函数：

```
<?php
  echo htmlentities( '<?php ?>' );
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T19:36:48.217

还有另一种基于[str_replace](http://php.net/manual/en/function.str-replace.php)的解决方案，它接受数组进行参数搜索和替换。

```
<?php
 echo str_replace(array('<','>'),array('&lt;','&gt;'),'<?php ?>');
?> 
```

查看以下演示： http: [//phpfiddle.org/main/code/3hp-itx](http://phpfiddle.org/main/code/3hp-itx)

# linux - 如果任何参数错误，如何使 ssh 失败

> ID：15658743
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:25:33.947
> 
> 标签：linux, ssh

我正在使用该命令`ssh -i /home/ssh_keys/10_1_1_127 root@10.1.1.127 date`检查其他机器上的日期，

如果某些参数错误，例如用户、ip 或身份文件不存在，ssh 会要求输入密码

例如，如果我写`ssh -i /home/ssh_keys/10_1_1_1277 root@10.1.1.127 date` while`/home/ssh_keys/10_1_1_1277`不存在，我会得到：

`root@10.1.1.127's password:`

我想知道是否可能，如果可能，如果某些参数不正确，如何使 ssh 失败，所以如果我输入错误的参数，ssh 不会要求我输入密码...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:27:43.360

所有这些更改都应通过`root`或`sudo`启用的用户完成。

在`/etc/ssh/sshd_config`将以下条目设置为否：

```
ChallengeResponseAuthentication no
PasswordAuthentication no
UsePAM no 
```

如果您在查找这些特定行时需要帮助，请使用 grep：

```
grep -n "PasswordAuthentication" /etc/ssh/sshd_config
          ^^or whatever^^ 
```

这将输出行号

然后重启`ssh`

`/etc/init.d/ssh restart`

或者

`service ssh restart`

取决于你的 Linux 风格。

# asp.net - IE 兼容模式问题

> ID：15658744
> 
> 赞同：2
> 
> 时间：2013-03-27T12:25:36.290
> 
> 标签：asp.net, internet-explorer, cross-browser

我在网站和各种连接的网络应用程序中设置 IE 兼容模式时遇到问题，经过对该主题的大量研究，我仍然对它的工作原理感到有些困惑。基本上，我在一个公司网站上工作，该网站在通过 IE10 访问时出现问题，并试图将其设置为在 IE9 兼容模式下运行。有许多第三方控件和网站的各种其他元素在 IE10 上不起作用，我还没有时间完全更新这个网站（这是一个相当大的网站）。我发现的所有内容都告诉我通过将代码添加到 Web 配置文件或在标头中的元标记中来设置兼容模式。似乎很容易。

```
<httpProtocol>
  <customHeaders>
    <clear />
    <add name="X-UA-Compatible" value="IE=9" />
  </customHeaders>
</httpProtocol> 
```

或者

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

现在，当我手动设置兼容模式（不是在代码中，而是在我自己的浏览器中）时，一切正常，这就是我通过 IE 开发人员工具看到的。

```
Browser Mode: IE10 Compat View    Document Mode: IE9 Standards 
```

这里的问题是，当我通过上面列出的方法之一在我的代码中设置它时，这就是我所看到的，似乎没有任何改变。

```
Browser Mode: IE10    Document Mode: IE9 Standards 
```

请注意，这里只有文档模式受到影响，这与我手动进行更改时不同。如前所述，我对此进行了大量研究，但仍然不太了解浏览器模式和文档模式之间的区别，或者为什么我似乎需要更改的模式不受每个人似乎在这里推荐的解决方案的影响。任何人都可以帮助我准确理解这意味着什么以及重点是什么，更重要的是，有人知道如何做我在这里想要完成的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:36:12.027

IE 不允许您以编程方式设置该`Browser Mode`选项。X-UA-Compatible 设置仅设置`Document Mode`，并且没有其他设置可以用于`Browser Mode`.

然而，幸运的是，在大多数情况下，您无论如何都不需要担心`Browser Mode`。

`Document Mode`是改变实际渲染引擎的那个；这是 IE 在 IE9 模式下显示内容的重要一环。

`Browser Mode`不那么重要。所有这一切都是设置用户代理字符串 - 即浏览器发送到服务器以识别您正在使用的浏览器的文本。页面的实际呈现不受此设置的影响。

因此，假设您的站点没有通过查看用户代理字符串来进行任何服务器端浏览器嗅探，那么您根本不需要担心`Browser Mode`。

如果您*正在进行*浏览器嗅探，那么它可能会影响您。如果是这种情况，那么您将有点卡住，因为您无法强制浏览器更改模式，但在这种情况下，我建议您尝试不同的技术。人们普遍认为，出于各种原因，嗅探用户代理字符串是一个坏主意。在这种情况下，使用客户端特征检测可能会更好。

希望有帮助。

# javascript - 使用 Styled javascript 类检查所有复选框将不起作用

> ID：15658747
> 
> 赞同：0
> 
> 时间：2013-03-27T12:25:51.947
> 
> 标签：javascript, checkbox

勾选时我有一个主复选框，应选中所有复选框。这部分使用javascript完美运行。如果我使用另一个 javascript 将 CSS 类添加到复选框列表中以使这些复选框看起来不错，则主复选框的主要功能将停止正常工作。

下面是我用来设置复选框样式的脚本（checkBoxStyled.js）。

```
var checkboxHeight = "25";
var radioHeight = "25";
var selectWidth = "190";

document.write('<style type="text/css">input.styled { display: none; } select.styled {     position: relative; width: ' + selectWidth + 'px; opacity: 0; filter: alpha(opacity=0); z-index: 5; } .disabled { opacity: 0.5; filter: alpha(opacity=50); }</style>');

var Custom = {
init: function() {
    var inputs = document.getElementsByTagName("input"), span = Array(), textnode, option, active;
    for(a = 0; a < inputs.length; a++) {
        if((inputs[a].type == "checkbox" || inputs[a].type == "radio") && inputs[a].className == "styled") {
            span[a] = document.createElement("span");
            span[a].className = inputs[a].type + "Styled";

            if(inputs[a].checked == true) {
                if(inputs[a].type == "checkbox") {
                    position = "0 -" + (checkboxHeight*2) + "px";
                    span[a].style.backgroundPosition = position;
                } else {
                    position = "0 -" + (radioHeight*2) + "px";
                    span[a].style.backgroundPosition = position;
                }
            }
            inputs[a].parentNode.insertBefore(span[a], inputs[a]);
            inputs[a].onchange = Custom.clear;
            if(!inputs[a].getAttribute("disabled")) {
                span[a].onmousedown = Custom.pushed;
                span[a].onmouseup = Custom.check;
            } else {
                span[a].className = span[a].className += " disabled";
            }
        }
    }
    inputs = document.getElementsByTagName("select");
    for(a = 0; a < inputs.length; a++) {
        if(inputs[a].className == "styled") {
            option = inputs[a].getElementsByTagName("option");
            active = option[0].childNodes[0].nodeValue;
            textnode = document.createTextNode(active);
            for(b = 0; b < option.length; b++) {
                if(option[b].selected == true) {
                    textnode = document.createTextNode(option[b].childNodes[0].nodeValue);
                }
            }
            span[a] = document.createElement("span");
            span[a].className = "select";
            span[a].id = "select" + inputs[a].name;
            span[a].appendChild(textnode);
            inputs[a].parentNode.insertBefore(span[a], inputs[a]);
            if(!inputs[a].getAttribute("disabled")) {
                inputs[a].onchange = Custom.choose;
            } else {
                inputs[a].previousSibling.className = inputs[a].previousSibling.className += " disabled";
            }
        }
    }
    document.onmouseup = Custom.clear;
},
pushed: function() {
    element = this.nextSibling;
    if(element.checked == true && element.type == "checkbox") {
        this.style.backgroundPosition = "0 -" + checkboxHeight*3 + "px";
    } else if(element.checked == true && element.type == "radio") {
        this.style.backgroundPosition = "0 -" + radioHeight*3 + "px";
    } else if(element.checked != true && element.type == "checkbox") {
        this.style.backgroundPosition = "0 -" + checkboxHeight + "px";
    } else {
        this.style.backgroundPosition = "0 -" + radioHeight + "px";
    }
},
check: function() {
    element = this.nextSibling;
    if(element.checked == true && element.type == "checkbox") {
        this.style.backgroundPosition = "0 0";
        element.checked = false;
    } else {
        if(element.type == "checkbox") {
            this.style.backgroundPosition = "0 -" + checkboxHeight*2 + "px";
        } else {
            this.style.backgroundPosition = "0 -" + radioHeight*2 + "px";
            group = this.nextSibling.name;
            inputs = document.getElementsByTagName("input");
            for(a = 0; a < inputs.length; a++) {
                if(inputs[a].name == group && inputs[a] != this.nextSibling) {
                    inputs[a].previousSibling.style.backgroundPosition = "0 0";
                }
            }
        }
        element.checked = true;
    }
},
clear: function() {
    inputs = document.getElementsByTagName("input");
    for(var b = 0; b < inputs.length; b++) {
        if(inputs[b].type == "checkbox" && inputs[b].checked == true && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 -" + checkboxHeight*2 + "px";
        } else if(inputs[b].type == "checkbox" && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 0";
        } else if(inputs[b].type == "radio" && inputs[b].checked == true && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 -" + radioHeight*2 + "px";
        } else if(inputs[b].type == "radio" && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 0";
        }
    }
},
choose: function() {
    option = this.getElementsByTagName("option");
    for(d = 0; d < option.length; d++) {
        if(option[d].selected == true) {
            document.getElementById("select" + this.name).childNodes[0].nodeValue = option[d].childNodes[0].nodeValue;
        }
    }
}
}
window.onload = Custom.init; 
```

下面是 html (index.html)。请注意，如果我删除 class='styled'，一切正常

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<meta name="language" content="en">

<script type="text/javascript" src="checkBoxStyled.js"></script>
<link rel="stylesheet" type="text/css" href="checkBoxStyled.css">
</head>

<body>
<div class="well">
<script type="text/javascript">function check_all(abox) {var table =   document.getElementById('userFlashReports');var cboxes = table.getElementsByTagName('input'); var l = cboxes.length; for (var i = 0; i < l; i++) {var n = cboxes[i]; n.checked = abox.checked;}}</script>
<div>
<input name="all" id="title_1" type="checkbox" onclick="check_all(this)" class="styled">
        Toggle All
    </div>
    <div id="userFlashReports">
        <div class="checkboxSpaced">
            <input class="styled" id="UserFlashReportsForm_flashReports_0" value="dmsReport" type="checkbox" name="UserFlashReportsForm[flashReports][]">
            label1
        </div>
        <div class="checkboxSpaced">
            <input class="styled" id="UserFlashReportsForm_flashReports_1" value="gobReport" type="checkbox" name="UserFlashReportsForm[flashReports][]">
            label2
        </div>
        <div class="checkboxSpaced">
            <input class="styled" id="UserFlashReportsForm_flashReports_2" value="marketSegmentReport" checked="checked" type="checkbox" name="UserFlashReportsForm[flashReports][]">
            label3
        </div>
    </div>
</div>
</body>
</html> 
```

CSS 文件 (checkBoxStyled.css)

```
.checkboxStyled, .radioStyled {
width: 19px;
height: 25px;
padding: 0 5px 0 0;
background: url(checkbox.png) no-repeat;
display: block;
clear: left;
float: left;
}

.selectStyled {
position: absolute;
width: 158px; /* With the padding included, the width is 190 pixels: the actual width of the image. */
height: 21px;
padding: 0 24px 0 8px;
color: #fff;
font: 12px/21px arial,sans-serif;
background: url(select.png) no-repeat;
overflow: hidden;
} 
```

这是图像[checkbox.png](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:38:03.320

```
//Add following styles

.checkboxStyled:checked {
background-position: 0px -50px;
}
.radioStyled :checked {
background-position: 0px -50px;
} 
```

# java - onPause() 或 onStop()

> ID：15658751
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:26:13.043
> 
> 标签：java, android, timer

这不像我预期的那样工作。但是，我期望它的工作方式可能是错误的。

我有一个实现倒数计时器的应用程序。单击 android 手机上的后退按钮时，用户将导航回主屏幕。但是，倒数计时器仍然在后台运行。我可以告诉它，因为它会在一定的时间间隔喝啤酒。

我想如果我实现`onPause()`了，我就可以调用`countdowntimer.cancel()`. 当用户通过后退按钮退出活动时，它将取消倒计时。但是，应用程序反而会失败。

我也尝试过类似的方法，`onStop()`但它不起作用。

我现在没有我的代码，它只是在我的脑海中。如果这篇文章有任何错误也很抱歉，我已经写在我的手机上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:24:56.150

**当*一个 Activity*将控制权转移到*另一个 Activity时调用***onPause()**，当*Activity*处于**完成**模式 时调用**onStop()**方法。**

 ****** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:34:03.900

尝试：

```
movetasktoback(true);//in the onbackpressed 
```

然后使用：

```
countdowntimer.cancel();// in onpause 
```

之后就可以打电话`finish()`了`onpause()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:52:27.843

为什么按下后退键时不调用 countdowntimer.cancel() 可以覆盖后退单击

```
@Override
     public boolean onKeyDown(int keyCode, KeyEvent event)  {
         if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
             countdowntimer.cancel();
         }

         return super.onKeyDown(keyCode, event);
     } 
```*****

# datetime - ColdFusion - 带有 GMT 偏移的日期时间格式

> ID：15658756
> 
> 赞同：2
> 
> 时间：2013-03-27T12:26:24.277
> 
> 标签：datetime, coldfusion, coldfusion-10, datetimeoffset

我正在使用 ColdFusion 10 进行一些 REST 调用，并且返回的日期使用的是 GMT 偏移量。

例子：`2013-03-25T14:30:40-04:00`

我需要将此格式化用于两个目的：

1.  屏幕显示，所以它看起来像`mm/dd/yyyy hh:mm:ss`
2.  插入到 mySQL。

我尝试了各种 CF 时间/日期功能，但继续得到“不是有效的日期格式”

我想也许`#ParseDateTime(i.submitted_at,"pop")#`会用 POP 处理它，但同样的问题。

现在花了几个小时尝试多种变体并在谷歌上搜索现在只是绕圈子。任何想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:48:09.197

看看`DateConvertISO8601()`CFLib 上的 UDF。

[CFLib 上的 DateConvertISO8601(ISO8601dateString, targetZoneOffset)](http://www.cflib.org/udf/DateConvertISO8601)

> **说明：**
> 此函数采用一个包含 ISO 8601 日期的字符串并将其转换为 ODBC 日期时间，但可以调整为转换为您喜欢的任何内容。它还将通过指定偏移量转换为您选择的时区中的日期时间，即它可能需要 GMT 中的日期时间并转换为 PT。请参阅[http://www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)了解 ISO 8601 的描述，这是日期和时间表示的国际标准。
> 
> **返回值：**
> 返回日期时间。

源代码可在我提供的链接中查看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-14T17:13:07.477

这是一个信息性答案，而不是对该问题的直接答案。

ColdFusion 11 更新了[ParseDateTime()](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-m-r/parsedatetime.html)函数，以便它将 ISO-8601 日期/时间字符串正确转换为 ColdFusion 日期时间对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T12:42:07.077

这 2013-03-25T14:30:40-04:00 是一个字符串。如果你运行这个：

```
x = left(2013-03-25T14:30:40-04:00, 19); 
```

你得到 2013-03-25T14:30:40。您可以使用替换功能将 T 替换为空格。然后你可以到这个

```
DateTimeVar =parsedatetime('2013-03-25 14:30:40'); 
```

现在您有了一个可以格式化的日期时间变量。如有必要，您可以使用与 GMT 的偏移量进行 datediff。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T12:52:29.293

对于许多远程请求和响应，日期/时间值通常可以以 ISO 格式返回。在您的情况下，掩码如下所示：

```
YYYY-MM-DDThh:mm:ssTZD (eg 1997-07-16T19:20:30+01:00) 
```

在此 ISO 格式中，T 字符串是时间戳记在字符串中开始的标记的文字表示（直接跟在偏移量后面）。

下面是一个可重用的函数，它将 ISO 日期格式转换为可用的 ColdFusion 日期时间对象：

```
<cffunction name="ISOToDateTime" access="public" returntype="string" output="false" 
    hint="Converts an ISO 8601 date/time stamp with optional dashes to a ColdFusion   
        date/time stamp.">
    <cfargument name="Date" type="string" required="true" hint="ISO 8601 date/time stamp." />
        <cfreturn ARGUMENTS.Date.ReplaceFirst(
            "^.*?(\d{4})-?(\d{2})-?(\d{2})T([\d:]+).*$",
            "$1-$2-$3 $4"
            ) />
</cffunction> 
```

然后，您可以像这样调用该函数来输出或返回对 ColdFusion 友好的日期时间版本：

```
ISOToDateTime( "2013-03-25T14:30:40-04:00" ) 
```

该功能由 Ben Nadel 提供。原始博客文章可以在这里找到：

[http://www.bennadel.com/blog/811-Converting-ISO-Date-Time-To-ColdFusion-Date-Time.htm](http://www.bennadel.com/blog/811-Converting-ISO-Date-Time-To-ColdFusion-Date-Time.htm)

如果需要，您还可以使用偏移量转换日期时间值。Ben Nadel 再次发表了一篇很棒的博文，概述了如何实现这一目标：

[http://www.bennadel.com/blog/1595-Converting-To-GMT-And-From-GMT-In-ColdFusion-For-Use-With-HTTP-Time-Stamps.htm](http://www.bennadel.com/blog/1595-Converting-To-GMT-And-From-GMT-In-ColdFusion-For-Use-With-HTTP-Time-Stamps.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-23T16:26:24.453

[CF10 可以使用parseDateTime() 文档](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-m-r/parsedatetime.html)示例中所述的此代码。

```
<cfset string = "1997-07-16T19:20:30+01:00">
<cfset date = parseDateTime(string, "yyyy-MM-dd'T'HH:mm:ssX")> 
```

# php - 根据输入的值从 MYSQL 数据库中检索订单状态

> ID：15658760
> 
> 赞同：0
> 
> 时间：2013-03-27T12:26:37.713
> 
> 标签：php, javascript, html, forms, onsubmit

我创建了一个 MySQL 数据库，其中我的一个表是“ServiceOrder”。ServiceOrder 表将保存客户下达的订单数据以及这些订单的状态，例如待启动、已启动、质量保证、已完成。

所以，我有一个网站，上面有一个表格（见下文）。在表单中，我想允许人们输入他们的订单 ID 来检索他们的订单状态。注意：“ServiceOrder”数据库包括字段、orderID 和状态（以及与此无关的其他内容）。

这是我的 HTML 表单：

```
<form id="form1" name="form1" method="post" action="">
Insert Order Number Here
    <input name="woodingdeantracking" type="text" id="woodingdeantracking" size="40" />
    <input type="submit" name="Track Order" id="Track Order" value="Track Order" />
</form> 
```

我现在理想地希望它做的是，当客户输入存在的 OrderID 时，它会将它们发送到一个页面，但是如果 orderID 不存在，它们会被发送到不同的 poage。

我希望我已经清楚了。如果需要任何其他信息，请告诉我，我对此很陌生！

提前致谢， 导航

PS我愿意使用Javascript，如果它更容易实现我想要为演示实现的目标，本质上，如果输入“ABC”，则返回成功页面，如果输入其他任何内容，则返回失败页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:40:28.760

```
 // validate values before manipulating the database

    $sql = "select status from ServiceOrder where orderID = ".mysql_real_escape_string($_POSt['woodingdeantracking']);

    $query = mysql_query($sql);

    $orderDetails = mysql_fetch_row($query);

    if(count($orderDetails) > 0){
    // redirect to success page with order status value
    }else{
    // redirect to error page
    } 
```

# python - Tkinter - 我将如何重置对象列表？

> ID：15658767
> 
> 赞同：2
> 
> 时间：2013-03-27T12:27:05.073
> 
> 标签：python, user-interface, tkinter

昨天我问了这个问题[通过循环 Tkinter 创建元素](https://stackoverflow.com/questions/15642039/creating-elements-by-loop-tkinter)来了解如何动态创建一些项目符号点。现在我希望添加一个清除按钮，以便在按下时重置整个表单。我尝试将列表设置回 [] 但它不起作用。

编辑 - 所以基本上当我按下重置时，我希望它看起来与加载表单时完全一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:44:45.957

使用以下方法删除按钮`destroy`：

```
 for button in self.button:
        button.destroy() 
```

* * *

```
import Tkinter as tk

class ButtonBlock(object):
    def __init__(self, master):
        self.master = master
        self.button = []
        self.button_val = tk.IntVar()
        entry = tk.Entry()
        entry.grid(row=0, column=0)
        entry.bind('<Return>', self.onEnter)
        entry.focus()
        clear_button = tk.Button(master, text='Clear', command=self.onClear)
        clear_button.grid(row=0, column=1)
    def onClear(self):
        for button in self.button:
            button.destroy()
    def onEnter(self, event):
        entry = event.widget
        num = int(entry.get())
        self.onClear()
        for i in range(1, num+1):
            self.button.append(tk.Radiobutton(
                self.master, text=str(i), variable=self.button_val, value=i,
                command=self.onSelect))
            self.button[-1].grid(sticky='WENS', row=i, column=0, padx=1, pady=1)
    def onSelect(self):
        print(self.button_val.get())

if __name__ == '__main__':
    root = tk.Tk()
    ButtonBlock(root)
    root.mainloop() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:47:46.433

重新设置列表（即使用`self.button = []`）只会清除存储在`button`变量中的数据。仅该操作不连接到用户界面 (UI)。您必须明确删除（通过`onEnter`方法）创建的小部件对象。

[因此，通过扩展上一个问题的答案](https://stackoverflow.com/a/15642635/404469)，您正在寻找的清算功能应该是可行的。向类添加一个`onClear`方法，`ButtonBlock`以便在选择“清除”控件（即使用按钮小部件）时调用其回调函数`ButtonBlock.onClear()`，类似于`Entry`小部件调用该`onEnter`方法的方式。

**编辑**：请参阅 unutbu 对此问题的回答。选中后，`clear_button`控件调用`ButtonBlock.onClear()`. for 循环`onClear`从列表中获取对每个按钮 ojbect 的引用，`button`并调用对象的`destroy`方法，将其从 UI 中删除。

# c# - 网络 - 通过端口发送的字节数

> ID：15658769
> 
> 赞同：2
> 
> 时间：2013-03-27T12:27:09.093
> 
> 标签：c#, networking, port, packet

我在 C# 中有以下代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;

namespace Networking
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("---Connecting to a Host using a Specific Port---");
            Console.WriteLine();
            Console.WriteLine("Attempting Connection...");
            Console.WriteLine();

            string hostname = "www.yahoo.com";
            int port_no = 21; //HTTP = 80, HTTPS = 443, FTP = 21

            IPAddress ipa = (IPAddress)Dns.GetHostAddresses(hostname)[0];

            try
            {
                Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                socket.Connect(ipa, port_no);

                if (socket.Connected == true)
                {
                    Console.WriteLine("The connection was successful!");
                }
            }
            catch (System.Net.Sockets.SocketException ex)
            {
                if (ex.ErrorCode == 10061)
                {
                    Console.WriteLine("The connection was NOT successful!");
                }
                else
                {
                    Console.WriteLine(ex.Message);
                }
            }
            Console.WriteLine();
            Console.WriteLine("Press enter to exit");
            Console.ReadLine();
        }
    }
} 
```

如您所见，该程序尝试使用特定端口号连接到特定网站。

如何修改程序以便我可以知道数据是否在连接后通过特定端口发送？也许计算发送的字节数或文件类型？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:30:49.143

有几种可能性。首先，您可以调用`Accept`套接字并使程序阻塞，直到数据可用。一旦数据可用，您就可以将`Receive`数据放入字节数组并进行处理。

其次，您可以调用`BeginAccept`并异步等待数据到达并相应地处理它。

请参阅C# 中有关套接字的[文档。](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)

# google-analytics - 谷歌分析中插槽的功能

> ID：15658774
> 
> 赞同：0
> 
> 时间：2013-03-27T12:27:33.377
> 
> 标签：google-analytics, analytics

我编写了 javascript 代码来测量每月保留率（参考[http://viget.com/advance/track-visitor-retention-more-deeply-in-google-analytics](http://viget.com/advance/track-visitor-retention-more-deeply-in-google-analytics)）
三月：`_gaq.push(['_setCustomVar', 1, 'Month', 'March2013', 1]);`
四月：`_gaq.push(['_setCustomVar', 2, 'Month', 'April2013', 1]);`
但我不知道谷歌如何分析检测到 4 月访问者在 3 月访问过的部分。
插槽有什么作用？如果 4 月的访客在 3 月访问过，他们有 2 个 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:12:32.717

您在 Google Analytics（分析）中有 5 个自定义变量（标准版 - 50 个带有高级 GA，这对大多数公司来说成本很高）。“插槽”只是变量的数字索引。如果您重新使用插槽（在同一范围内），该变量将被新值覆盖。

在观众的分析界面 - > 自定义 - > 自定义变量部分，您会看到一行显示

> 主要维度：自定义变量（键 1）自定义变量（键 2）自定义变量（键 3）自定义变量（键 4）自定义变量（键 5）

“Key1”到“Key5”对应于您的插槽 - 如果您单击链接，下面的数据表将显示相应插槽的值。

# java - 如何从侦听器中禁用 Jcombobox 项目？

> ID：15658777
> 
> 赞同：1
> 
> 时间：2013-03-27T12:27:48.080
> 
> 标签：java, indexing, jcombobox

我的项目有问题，因为我的目标是让用户用数组中的项目手动填充 6 个字段；我想到了 6 个`JComboBox`具有相同项目的 es，当您在一个框中选择一个项目时，它在其余部分中被禁用。我开始了，虽然我已经搜索过，但我只找到了在其构造函数中执行此操作的方法。

```
cb1.addActionListener(new ActionListener(){ 

@Override
public void actionPerformed(ActionEvent e) {
     if(cb1.getSelectedIndex()==1) {
         // this is as far as I go, but disables the entire jcombobox
         cb2.setEnabled(false);

         // this is more like I want, but it doesn't work.
         cb2.setSelectedIndex(1).setEnabled(false);                            
 }}}); 
```

如果有人知道一种更有效的方法可以让用户手动将数组项分配给许多字段，我会欢迎它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:26:23.463

您无法禁用`JComboBox`. 您可以将其从该位置删除，方法如下：-

```
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JComboBox;
import javax.swing.JFrame;
public class Combobox extends JFrame{
Combobox(){
    this.setVisible(true);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    String[] list={"car","bus","bike"};
    final JComboBox c1=new JComboBox(list);
    final JComboBox c2=new JComboBox(list);
    Container c=this.getContentPane();
    c.setLayout(new FlowLayout());
    c.add(c1);
    c.add(c2);
    c1.addActionListener(new ActionListener(){
        @Override
        public void actionPerformed(ActionEvent e) {
            int index=c1.getSelectedIndex();
            c2.removeItemAt(index);
            }
    });
    this.pack();
}
    public static void main(String[] args) {
        new Combobox();
    }
} 
```

`final JComboBox c1=new JComboBox(list);`将使一个`JComboBox`拥有的物品`list`。之所以使用 c1 ，是因为在用于单击事件的`final`内部类内部调用了 c1。将获得所选项目的. 将删除位于c2 位置的项目。因为和都包含相似的项目，所以项目的位置是相同的。如果您想在某个时候在 c2 中重新插入项目，则保存要删除的项目的索引位置和要删除的项目的名称，使用`ActionListener``index=c1.getSelectedIndex();``index location``c1``c2.removeItemAt(index);``index``c1``c2``index`

```
index=c1.getSelectedIndex();
item=c2.getItemAtIndex(index);
c2.removeItemAt(index); 
```

然后使用恢复项目

```
c2.insertItemAt(item,index); 
```

**注意**-如果要在外面使用`index`，`item`应该在外面声明 `ActionListener`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:38:32.357

尝试启用 ComboItem。函数 setEnabled 用于对象，在您的情况下为 cb2。

# php - Symfony 2 项目中的 SOAP 服务器

> ID：15658787
> 
> 赞同：1
> 
> 时间：2013-03-27T12:28:27.037
> 
> 标签：php, symfony, soap, soapserver

我试图在 Symfony 2 框架中使用 SOAP 实现 WebService。在服务器端我将类设置为我的服务器（setClass() 方法），因为我需要对类的一个实例进行更多操作。如果我将 setObject 用于soapCalls，效果很好，

```
use path\to\Test;
public function indexAction()
{
    $server = new \SoapServer(null, array('uri' => "http://test-uri.cz/"));
    $server->setObject($this->get('my_service'));
    $response = new Response();
    $response->headers->set('Content-Type', 'text/xml');

    ob_start();
    $server->handle();
    if (ob_get_length() > 0) {
        $response->setContent(ob_get_clean());
    }

    return $response;
} 
```

但不适用于 setClass 方法。

```
use path\to\Test;
public function indexAction()
{
    $server = new \SoapServer(null, array('uri' => "http://test-uri.cz/"));
    $server->setClass('Test');
    $response = new Response();
    $response->headers->set('Content-Type', 'text/xml');

    ob_start();
    $server->handle();
    if (ob_get_length() > 0) {
        $response->setContent(ob_get_clean());
    }

    return $response;
} 
```

有人可以给我任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:06:16.167

最后它起作用了......我的命名空间不好，并且在 SOAP 服务器中需要在 setClass() 之后使用 setPersistence() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:34:02.940

如果要使用 SoapServer::setClass，则必须声明服务构造函数的每个参数，并**使用完整的命名空间字符串**声明类名：

```
$server->setClass('Acme\YourBundle\SoapManager', $arg0, $arg1, $arg2 /*, ... */); 
```

# extjs - 如何在我的模型中引用复杂的 json 对象，以便它们可以显示在列表中

> ID：15658788
> 
> 赞同：1
> 
> 时间：2013-03-27T12:28:28.817
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我试图在我的模型中引用复杂的 json 对象，然后将它们与其他对象一起显示在表格中。下面是一个json的例子。如何获得评分和类型？

```
 "reviews" : [
     {
        "aspects" : [
           {
              "rating" : 1,
              "type" : "food"
           },
           {
              "rating" : 3,
              "type" : "decor"
           },
           {
              "rating" : 2,
              "type" : "service"
           }
        ]

Ext.define('FirstApp.model.Details',{
extend:'Ext.data.Model',
config:{
  //  fields:     ['id','recordId','name','icon','vicinity','reference','website','reviews.aspects.type'],

 fields: [ {

name: 'aspects',
mapping: 'reviews.aspects'
},
  {
  name: 'vicinity'
  },
    {
   name: 'name'
  },
  {
  name: 'icon'
  },
 {
  name: 'website'
  }]

  }
  }) 
```

我正在调用下表，但我收到错误 Uncaught SyntaxError: Unexpected token ILLEGAL where itemTpl is。

```
 {
              xtype:'list',
              store:'Details',
                itemTpl:'<img src="{icon}"></img><h1>{name:ellipsis(25)}</h1>
                <h3>{vicinity:ellipsis(35)}</h3><h2>{website}</2><h2>{reviews}</h2><tpl   for="aspects">
               {rating} - {type}
              </tpl>',
            itemCls:'place-entry'
           } 
```

**笔记：**

我尝试了以下方法。错误已停止并显示所有其他信息，但方面仍然没有显示。

```
 itemTpl:new Ext.XTemplate(
        '<div>',
            '<div><img src="{icon}"></img><br>',
            '<h1>{name}</1><br>',
           ' </div>',
           '<div><h3>{vicinity:ellipsis(60)}</h3><h3>{website}</3><br>',
            '<h3>{formatted_phone_number}</h3><br>',
            '<tpl for="aspects"<td>{type}</td></tpl><br>',
           ' </div>',
        '</div>'
        ), 
```

这就是模型现在的样子：

```
 fields: [
 {

  name: 'reviews'

 },
 {

name: 'aspects',
mapping: 'reviews.aspects'
},

{
name: 'vicinity'
},
{
name: 'name'
 },
 {
name: 'icon'
},
{
name: 'website'
 },
 {
name: 'formatted_phone_number'}]

} 
```

**样本数据：**

```
 "reviews" : [
        {
        "aspects" : [
           {
              "rating" : 3,
              "type" : "food"
           },
           {
              "rating" : 3,
              "type" : "decor"
           },
           {
              "rating" : 3,
              "type" : "service"
           }
        ],
        "author_name" : "Aubrey Skelly",
        "author_url" : "https://plus.google.com/101776084849290882399",
        "text" : "Small and wonderful, the food fantastic, service 100% miss this    wonderful restaurant and you will miss a gem in waterford",
        "time" : 1359588944
     }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:25:23.217

我认为您必须在模型中进行映射：

```
fields: [
{
    name: 'aspects',
    mapping: 'reviews.aspects'
},
{
    name: 'vicinity'
}
... 
```

然后在 tpl 中：

```
<tpl for="aspects">
    {rating} - {type}
</tpl> 
```

## 笔记：

tpl 中不能有换行符：

```
//this will throw an error
itemTpl: '<div>this is some content<br>
         this is the same div but I am on a new line now</div>' 
```

您必须拆分行：

```
//this is OK
itemTpl: '<div>this is some content<br>',
         'this is the same div but I am on a new line now</div>' 
```

# ios6 - Facebook SDK - 在启动时正确检查权限

> ID：15658793
> 
> 赞同：1
> 
> 时间：2013-03-27T12:28:51.070
> 
> 标签：ios6, facebook-ios-sdk

我有使用 Facebook SDK 的应用程序和访问用户数据的权限。

如何正确检查这些情况：

*   用户已在 iPhone 设置中注销 Facebook 帐户
*   用户已注销 Facebook 帐户并使用 iPhone 设置中的另一个帐户登录
*   用户在 iPhone 设置中拒绝该应用访问 Facebook 帐户

谢谢

**更新**

我可以检查用户是否未在 iPhone 设置上登录 Facebook。但我无法检查用户是否已在 FB 应用程序中注销

**更新**

无需检查用户是否已从 Facebook 应用程序注销。我需要做的就是通过观察来检查用户是否更改了手机设置`ACAccountStoreDidChangeNotification`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:35:08.870

在此处查看 iOS 文档： [ACAccountStore 上的 Apple 文档](https://developer.apple.com/library/ios/documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/ACAccountStore/requestAccessToAccountsWithType%3aoptions%3acompletion%3a)

您会发现在 iOS6 上询问用户权限和检查当前身份验证状态所需的一切。

# sql-server - 如何选择所有状态都为零的记录？

> ID：15658794
> 
> 赞同：0
> 
> 时间：2013-03-27T12:28:53.163
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2000

假设我有下表 `Person table`和`personStatus table`.

```
declare @Persons table
(PersonId int)

insert into @Persons select 10   
insert into @Persons select 11    

declare @PersonStatus table
(id int,statuss int)

insert into @PersonStatus (id,statuss) values(10,0)
insert into @PersonStatus (id,statuss) values(10,0)
insert into @PersonStatus (id,statuss) values(11,1)
insert into @PersonStatus (id,statuss) values(10,0)
insert into @PersonStatus (id,statuss) values(11,0) 
```

现在我想找到**所有**状态都为零的人员 ID 结果只是 ---> 10

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:31:35.627

```
SELECT  id
FROM    @PersonStatus
GROUP   BY ID
HAVING  COUNT(DISTINCT statuss) = 1 AND
        MAX(statuss) = 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/a6804/2)

或者

```
SELECT  id
FROM    @PersonStatus
GROUP   BY ID
HAVING  MAX(statuss) = MIN(statuss) AND
        MAX(statuss) = 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/a6804/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:36:39.777

由于我假设该`@Persons`表不仅仅是一`PersonId`列，而且您可能需要其他列，因此我认为`@Persons`需要成为查询的一部分。

```
SELECT p.PersonId --, other columns from p
 FROM @Persons AS p
 WHERE EXISTS (SELECT id FROM @PersonStatus
   WHERE id = p.PersonId
   GROUP BY id HAVING MAX(statuss) = 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:32:27.577

```
select distinct p.id from @PersonStatus as p
where Statuss = 0
and not exists (select null from @Personstatus as t
                where p.id = t.id and t.statuss <> 0) 
```

# hadoop - PigLatin - 本地模式 - 错误 1066：无法打开别名 B 的迭代器

> ID：15658795
> 
> 赞同：0
> 
> 时间：2013-03-27T12:28:56.943
> 
> 标签：hadoop, apache-pig

我正在试验 Pig UDF。我能够获得像大写这样的简单 UDF 为我工作。所以我试图编写自己的UDF。我想处理包含 3 个整数的输入文件的每一行。如果 3 个整数满足直角三角形边的标准，则返回斜边，否则返回 null。

但我收到以下错误 - 错误 1066：无法打开别名 B 的迭代器

这是猪脚本代码 -

```
-- rat.pig - A Pig script to test right angle triangle
REGISTER /Users/admin/Programming/PigUDF/bin/myudfs/myudfs.jar;
A = LOAD '/Users/admin/Programming/pigdata/triangle.csv' AS (sides: tuple(side_0:int, side_1:int, side_2:int));
B = FILTER A BY (myudfs.RAT(A.sides)!= 0);
DUMP B; 
```

UDF就像

打包 myudfs；

```
import java.io.IOException;
import org.apache.pig.EvalFunc;
import org.apache.pig.data.Tuple;

public class RAT extends EvalFunc<Integer>{
    public Integer exec(Tuple input) throws IOException {
        if (input == null || input.size() == 0) {
            return null;
        }
        try {
            int num_0 = (Integer)input.get(0);
            int num_1 = (Integer)input.get(1);
            int num_2 = (Integer)input.get(2);

            if ((num_0 * num_0) + (num_1 * num_1) == num_2 * num_2) 
                return Integer.valueOf(num_2);
            else if ((num_0 * num_0) + (num_2 * num_2) == num_1 * num_1)
                return Integer.valueOf(num_1);
            else if ((num_1 * num_1) + (num_2 * num_2) == num_0 * num_0)
                return Integer.valueOf(num_0);
            else {
                return null;
            }
        } catch (Exception e) {
            throw new IOException(" Caught exception processing input row", e);
        }
    }

} 
```

我想知道我在这里做错了什么。任何指针表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:29:12.987

苏莫德，

您需要进行一些更改。

您的 LOAD 语句似乎没有生成正确的元组。并且功能也需要稍作改动。

请查看我所做的代码修改。有任何问题请告诉我。

```
REGISTER PIGTrnFilter.jar;
A = LOAD '/home/hadoop/lab/examples/PigTrnTest.txt' AS (side_0:int, side_1:int, side_2:int);
B = FILTER A BY (inverika.training.examples.RAT(TOTUPLE(A.side_0, A.side_1, A.side_2)) != 0);
DUMP B; 
```

过滤器功能如下。

```
package inverika.training.examples;

import java.io.IOException;
import org.apache.pig.EvalFunc;
import org.apache.pig.data.Tuple;

public class RAT extends EvalFunc<Integer>{
    public Integer exec(Tuple TT) throws IOException {
        if (TT == null || TT.size() == 0) {
            return null;
        }
        try {           
            Object tupleObject = TT.get(0);

            Tuple input = (Tuple) tupleObject;

            Object object0 = input.get(0);
            Object object1 = input.get(1);
            Object object2 = input.get(2);

            int num_0 = (Integer) object0;
            int num_1 = (Integer) object1;
            int num_2 = (Integer) object2;

            if ((num_0 * num_0) + (num_1 * num_1) == num_2 * num_2) 
                return Integer.valueOf(num_2);
            else if ((num_0 * num_0) + (num_2 * num_2) == num_1 * num_1)
                return Integer.valueOf(num_1);
            else if ((num_1 * num_1) + (num_2 * num_2) == num_0 * num_0)
                return Integer.valueOf(num_0);
            else {
                return new Integer(0);
            }
        } catch (Exception e) {
            throw new IOException(" Caught exception processing input row", e);
        }
    }
} 
```

请注意，我使用的是制表符分隔的数据而不是 csv。如果有 csv 那么你需要使用 PigStorage 函数来加载。

```
1   2   3
2   5   2
2   2   2
1   3   7
7   2   10
3   4   5 
```

我做了一些小的修改，我想你可以遵循。查看关系模式以了解我所做的更改。您实际上可以使用 FilerFunc，它返回 Boolean 而不是 EvalFunc。希望这对您有所帮助。

# sql - 删除 SQL 无效字符 Oracle PL/SQL

> ID：15658796
> 
> 赞同：0
> 
> 时间：2013-03-27T12:29:00.383
> 
> 标签：sql, oracle, xml-parsing, invalid-characters

我正在尝试从用于填充 xml 的列中删除方形字符 问题是 xml 没有正确创建，并且为我创建了很多工作。因此，作为每天的脚本作业，我将尝试运行 sql 来更新值以删除有问题的字符。

到目前为止我有

```
select * from (select dump(narration) as dn,narration from ar_journal)
where dn like '%27%'
and dn not like '%=27:%'; 
```

这找到了有问题的东西，但我想知道是否可以使用替换函数调用 dn？

请注意，dn 是列旁白的转储。

结果如下 DN Typ=1 Len=200: 96,27,97,110,115,102,101,114,32,102,114,111,109,32,67,117,115,116,111,109,101,114,32,32,32,32,32,75,42,32,323, ,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32 ,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32 ,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32 ,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32 ,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32 ,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32 ,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32

旁白 *CharWasHere* '从客户 900转移
值是不可预测的，但字符始终相同，

任何帮助将不胜感激。

干杯，

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:45:22.373

```
select replace(narration, chr(27)) from table 
```

# ruby - 表示数字的字符串之间的空白范围

> ID：15658800
> 
> 赞同：1
> 
> 时间：2013-03-27T12:29:26.790
> 
> 标签：ruby, ruby-1.8

这是两个范围值。

```
('1'..'10').to_a   => ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"] 
```

但，

```
('2'..'10').to_a  => [] 
```

为什么第二个在 ruby​​ 1.8.7 中返回一个空数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:04:50.860

问题是 Ruby 1.8 试图确定是否`('2'..'10')`是有效范围作为其代码分析的一部分，并确定它是无效的。在使范围值向后`'2'`排序后进行排序。`'10'`

当人们尝试对字符串值进行排序时，这是一个常见的问题，他们会一次又一次地遇到它，直到他们知道这个技巧永远不会奏效。

使用 1.8.7：

```
('2'..'10').to_a
=> []
('02'..'10').to_a
=> ["02", "03", "04", "05", "06", "07", "08", "09", "10"] 
```

或者：

```
(2..10).map(&:to_s)
=> ["2", "3", "4", "5", "6", "7", "8", "9", "10"] 
```

如果我需要与 1.8 和 1.9+ Rubies 兼容，我可能会使用最后一种方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T12:31:09.233

```
irb(main):001:0> '2' > '10'
=> true
irb(main):002:0> '1'>'10'
=> false 
```

由于字符串比较算法，无法创建下限大于上限的范围。

**实际上它适用于1.9.3**。奇怪的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T12:31:27.563

这不是我得到的：

```
irb(main):001:0> ('2'..'10').to_a
=> ["2", "3", "4", "5", "6", "7", "8", "9", "10"] 
```

不过，与问题无关：正确的方法是：

```
(2..10).to_a 
```

（我使用的是 Ruby 1.9.3）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T12:45:42.953

在 ruby​​2.0.0-p-0 这就是我得到的：

```
["2", "3", "4", "5", "6", "7", "8", "9", "10"] 
```

# javascript - 我有可用于使用 javascript 减去文本框值的代码？

> ID：15658808
> 
> 赞同：0
> 
> 时间：2013-03-27T12:29:41.567
> 
> 标签：javascript, html, subtraction

我有代码可用于使用javascript进行减法和附加文本框值，它正在工作，但问题是javascript一次又一次地执行函数，只要`onfocus textbox`我想要一次javascript应该是`executed function`吗？

javascript函数一次又一次附加`onMouseOver="return B(0);"`

javascript函数一次次减法`onfocus="return C();"`

javascript函数一次又一次附加`onfocus="return D();"`

```
function getObj(objID){
return document.getElementById(objID);
}

function B(){
var advanceBox = document.getElementById('advance');
var originalValue = advanceBox.value;
advanceBox.onfocus = function() {
this.value = parseFloat(originalValue, 10) +
parseFloat(document.getElementById('recamt').value, 10);
return false;
};
}   

function C() {
getObj("balance").value=parseFloat(getObj("total").value  || 0)-
(parseFloat(getObj("advance").value || 0)) ;
getObj("balance").value=parseFloat(getObj("balance").value || 0)-
(parseFloat(getObj("discount").value)||0) ;
return false;
} 

function D() {
getObj("total").value=parseFloat(getObj("total").value  || 0)+
(parseFloat(getObj("openbal").value || 0)) ;
return false;
}      

 Opening Balance:<input class="input_field2" 
 type="text" name="openbal" id="openbal"><br />

Total:<input class="input_field2" type="text" 
readonly name="total" id="total" value="5000"><br />

Advance:<input class="input_field2" type="text" 
readonly name="advance" id="advance"    value="500" 
onMouseOver="return B(0);"><br />

Balance:<input class="input_field2" readonly type="text" 
name="balance" id="balance" onfocus="return C();"><br />

Rem Amount:<input class="input_field2" type="text"
name="recamt" id="recamt"><br />

Discount: <input class="input_field2" 
style="background-color:#FFF !important;" 
type="text" name="discount" id="discount" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:45:19.067

你可以有：

```
var executedAlready = false; 
```

内部函数 B 和 C 具有：

```
if(executedAlready != true){ executedAlready = true; }
else { return; } 
```

或者也许你可以**分离事件**？我想有几种不同的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:43:15.260

您可以使用一个或多个标志：

在页面的开头：

```
<script>
    var flag = false;
</script> 
```

在你的元素上：

```
<div .... onMouseOver="if(!flag) { flag = true; return B(0);}" > .... </div> 
```

onFocus 也一样...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:13:47.993

其他答案告诉您，获得结果的“最快”方法是让您的函数只执行一次。你可以这样做：

*   做一个标志（只是一个知道你的函数是否已经被触发的变量）。
*   在执行你的函数时，首先检查这个标志。

这是一个如何使用函数 B() 执行此操作的示例：

（*注意：我没有改变你的功能，现在不想进入）*

```
// setup fired as false
var hasBFired = false;
function B(){
  // if B is true, we do nothing
  if (hasBFired) {
    return;
  // else if it is not true, basically only the first time you call this, flip the flag and execute the rest of the code.
  } else {
    hasBFired = true;
  }
  var advanceBox = document.getElementById('advance');
  var originalValue = advanceBox.value;
  advanceBox.onfocus = function() {
  this.value = parseFloat(originalValue, 10) +
  parseFloat(document.getElementById('recamt').value, 10);
  return false;
}; 
```

现在，对 C 和 D 函数重复相同的操作（再设置两个标志）。

这不是最好的方法 - 设置全局对象和东西并不好，但由于您可能没有获得任何侧库，它现在可以帮助您解决问题。对于长期解决方案，您应该使用事件库（如[YUI Event](https://yuilibrary.com/yui/docs/event/)）并让它为您处理对 onfocus 事件的附加和分离操作。

# asp.net - 会员信息仅在 Google Chrome 中不保留在 Umbraco ASP.NET 中

> ID：15658814
> 
> 赞同：2
> 
> 时间：2013-03-27T12:29:56.543
> 
> 标签：asp.net, umbraco, windows-authentication, integrated

我有一个 umbraco 站点，并且正在为公共站点使用集成 Windows 身份验证。在 IE、Firefox、Safari 中一切正常。然而，在谷歌浏览器中，用户不断被送回登录页面。有时它可以正常工作，而其他的则不行。下面列出了用户登录的代码：

```
//some stuff to get the member name from the windows username, then:
FormsAuthentication.SetAuthCookie(username, true);

    Member loginMember = Member.GetMemberFromLoginName(username);
    if (loginMember != null)
    {
        Member.AddMemberToCache(loginMember, true, new TimeSpan(0, 20, 0));
    }
    FormsAuthentication.RedirectFromLoginPage(username, true); 
```

如前所述，这在 chrome 以外的任何浏览器中都可以正常工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:41:15.017

您是否在重定向之前检查该成员是否有效？

```
if (Membership.ValidateUser(用户名，密码))
{
FormsAuthentication.SetAuthCookie（用户名，真）；
// 你的其余代码在这里
}

```

如果这不起作用，那么在没有看到更多代码的情况下，我觉得没有足够的信息来正确回答您被注销的原因。如果您真的认为它只是 Chrome，那么请尝试 1) 在隐身模式下使用 chrome (ctrl+shift+N)，以及 2) 重新安装 chrome。插件有可能会干扰您的 cookie 存储。

最后，如果重新安装 Chrome 后问题仍然存在，请查看以下代码：

[http://our.umbraco.org/projects/website-utilities/razorlogin](http://our.umbraco.org/projects/website-utilities/razorlogin)

祝你好运，如果它有效，请告诉我们。

# javascript - 使用 c# 的 monotouch uiwebview 最简单的 javascript 桥 - xamarin ios

> ID：15658818
> 
> 赞同：2
> 
> 时间：2013-03-27T12:30:06.167
> 
> 标签：javascript, ios, uiwebview, xamarin.ios, xamarin

真的很难找到一个有效的解决方案，可以在 monotouch (c#) 和 uiwebview 之间实现 2 路通信。

Android 似乎用 JavaScriptInterface 做得很好。

（试图让leaflet.js 在Xamarin IOS uiwebview 组件中工作，并下载geojson，这样我就可以在uiwebview 中填充leaflet.js 并收听来自本机的js 回调）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T14:34:15.857

请参阅此示例：

[https://github.com/xamarin/mobile-samples/tree/master/ContentControls](https://github.com/xamarin/mobile-samples/tree/master/ContentControls)

以及之前关于 StackOverflow 的问题：

[如何使用 MonoTouch 调用 javascript 函数，反之亦然？](https://stackoverflow.com/questions/5399706/how-i-can-call-a-javascript-function-with-monotouch-and-vice-versa)

[MonoTouch UIWebView 和 EvaluateJavascript](https://stackoverflow.com/questions/10087489/monotouch-uiwebview-and-evaluatejavascript)

或完整的博客文章：

[http://yobriefca.se/blog/2011/12/05/rolling-your-own-phonegap-with-monotouch/](http://yobriefca.se/blog/2011/12/05/rolling-your-own-phonegap-with-monotouch/)

# git - GIT：使用远程 git 存储库恢复服务器 - 如何正确行事？

> ID：15658823
> 
> 赞同：0
> 
> 时间：2013-03-27T12:30:16.303
> 
> 标签：git, backup

存储我们的远程存储库的机器崩溃了。目前，它使用两天前的备份进行恢复。

你能给我们一些建议吗？在我们看来，我们需要做的就是将所有分支中的本地提交推送回远程仓库。

我们在这里监督什么吗？任何意见，将不胜感激！

亲切的问候，弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:42:55.930

我认为没有必要恢复遥控器。您可以简单地将本地存储库推送到新的远程存储库。这就是分布式源代码控制如此受欢迎的原因之一，不是吗？

# c# - iTextSharp PDF阅读器准确性

> ID：15658825
> 
> 赞同：1
> 
> 时间：2013-03-27T12:30:20.137
> 
> 标签：c#, itextsharp

从多页扫描的 pdf 中读取文本时，你们中的任何人是否有使用 iTextSharp 准确性的经验？

事情是我尝试使用 adobe 阅读器中的基本搜索功能以及使用 iTextSharp 阅读 pdf。

itextsharp 设法找到大约 50% 的给定单词的出现，而 adobe (我称之为) 100%

```
[iTextSharp 1000 occ // Adobe Reader >2000] 
```

这是一个已知的“问题”吗？

**编辑：我应该补充：在我搜索的时候它已经被 ocr'ed 了。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:18:18.857

正如@ChrisHaas 已经解释的那样，没有代码和 PDF 样本很难具体说明。

首先，说*itextsharp 设法找到大约 50% 的给定单词*的出现有点误导，因为 iText(Sharp) 没有直接公开在 PDF 中查找特定文本的方法，因此实际上**找到了 0%。**它只是提供了一个框架和一些简单的文本提取示例。

使用这个框架来**认真**搜索*给定的单词*需要的不仅仅是应用那些简单的示例用法（由 the 提供，`SimpleTextExtractionStrategy`并且在`LocationTextExtractionStrategy,`使用 时也在后台工作`PdfTextExtractor.GetTextFromPage(myReader, pageNum)`）结合一些`Contains(word)`调用。你必须：

*   创建更好的文本提取策略

    *   有更好的算法来识别哪些字形属于哪一行；例如，对于带有 OCR 文本的扫描页面，示例策略可能会完全失败，其中文本行不是 100% 笔直，而是最低限度地上升；

    *   识别穷人的粗体（以非常小的偏移量两次打印相同的字母以获得粗体字符样式的印象）和类似的构造并相应地转换它们；

*   创建一个文本规范化

    *   解决连字；

    *   统一语义相同或相似字符的替代字形；

*   规范化提取的文本和您的搜索词，然后才进行搜索。

此外，正如@ChrisHaas 所提到的，必须特别注意文本中的空格。

如果您在考虑这些条件的情况下创建基于 iText 的文本搜索，您肯定会获得可接受的命中率。与 Adob​​e Reader 一样好是一项艰巨的任务，因为他们已经在此功能上投入了相当多的资源。

为了完整起见，您不仅应该搜索页面内容和从那里引用的所有内容，还应该搜索可能包含相当多文本内容的注释，甚至可能看起来像是页面的一部分，例如在免费的情况下文本注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:11:09.433

在不了解您的具体情况（有问题的 PDF、使用的代码等）的情况下，我们无法为您提供太多帮助。

但是我可以告诉你，iTextSharp 有更多的文字文本提取器。由于 PDF 中的文本可以并且通常是不连续的和非线性的，因此 iTextSharp 采用任何连续的字符并构建我们认为的单词和句子。然后，它还会尝试组合看起来“几乎在同一行”并且执行相同操作的字符（例如像 OCR 文本通常那样具有小角度的文本）。还有“空格”应该是简单的 ASCII 32 字符，但通常不是。iTextSharp 更加努力并尝试计算两个文本运行是否应该用空格分隔。

Adobe 可能有进一步的启发式方法，能够猜测更多关于文本的信息。我的猜测是他们在组合非线性文本时有一个更大的猜测阈值。

# wcf - WCF Web 服务自定义授权

> ID：15658826
> 
> 赞同：0
> 
> 时间：2013-03-27T12:30:20.683
> 
> 标签：wcf, authorization

我有使用 Windows 身份验证和自定义 ServiceAuthorizationManager 的 WCF Web 服务。一切正常，但如果重写 CheckAccessCore 返回 false，我会收到错误 500，而不是我预期的 401。服务不实现任何服务级别的错误处理。如何发送 401 而不是 500 标头？

服务配置：

```
 <!-- App configuration-->
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
        <customErrors mode="Off" />
    </system.web>

    <appSettings>
        <!-- Allowed users divided by comma -->
        <add key="allowedUsers" value="DOMAIN\User1, DOMAIN\User2" />
    </appSettings>

    <!--Webservice-->
    <system.serviceModel>
        <services>
            <service name="WebService.ApiService">
                <endpoint binding="basicHttpBinding" bindingConfiguration="AuthenticatedBinding" bindingNamespace="http://namespace.com/customapi" contract="WebService.IApiService" />
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior>
                    <serviceMetadata httpGetEnabled="true"/>
                    <serviceDebug includeExceptionDetailInFaults="true"/>
                    <serviceAuthorization serviceAuthorizationManagerType="WebService.Model.Services.AuthorizationService, WebService" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <bindings>
            <basicHttpBinding>
                <binding name="AuthenticatedBinding">
                    <security mode="TransportCredentialOnly">
                        <transport clientCredentialType="Windows" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    </system.serviceModel>

</configuration> 
```

自定义授权管理器：

```
class AuthorizationService : ServiceAuthorizationManager
{
    private List<string> allowedUsers = new List<string>();

    public AuthorizationService() : base()
    {
        Configure();
    }

    protected override bool CheckAccessCore(OperationContext operationContext)
    {
        base.CheckAccessCore(operationContext);

        return allowedUsers.Contains(operationContext.ServiceSecurityContext.WindowsIdentity.Name);
    }

    private void Configure()
    {
        var configRow = ConfigurationManager.AppSettings["allowedUsers"];
        var parts = configRow.Split(',');

        if (parts.Length > 0)
        {
            foreach (var part in parts)
                allowedUsers.Add(part.Trim());
        }
    }
} 
```

结果图片： ![结果截图](../Images/f9e55e8e45f8c06449d9a2b21b9c8ace.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:46:38.710

我在网上发现错误代码 500 是发送 SOAP 错误响应的正确方法。所以我的网络服务一切正常（我收到“拒绝访问”错误，错误代码为 500）。

*   [关于它的 SOAP 规范](http://www.w3.org/TR/soap11/#_Toc478383529)
*   [Martin Karpiseks 博客总结](http://karpisek.net/2009/12/20/soap-fault-http-status-code/)

# atomic - 原子操作和原子事务

> ID：15658828
> 
> 赞同：15
> 
> 时间：2013-03-27T12:30:24.653
> 
> 标签：atomic

有人可以向我解释一下，原子操作和原子事务有什么区别？在我看来，这两个是一回事。对吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-19T17:54:28.620

原子性的概念在原子事务和原子操作之间很常见，但它们通常与不同的域相关。

原子事务与数据库操作相关联，其中一组操作必须全部完成，否则没有一个完成。例如，如果有人预订航班，您既想获得付款又想预订座位，或者两者都不做。如果允许其中一个成功，而另一个不成功，则数据库将不一致。

另一方面，原子操作通常与关于多处理或多线程应用程序的低级编程相关联，并且类似于关键部分。例如，如果两个线程都访问和修改同一个变量，则每个线程都会执行以下步骤：

1.  将变量从存储读取到本地内存。
2.  修改本地内存中的值。
3.  将修改后的值写回原始存储位置。

但是在多线程系统中，在第一个进程读取了值但没有写回之后，可能会发生中断或其他上下文切换。然后第二个进程（或中断）将读取和修改 OLD 值并将其修改后的值写回存储。当第一个进程重新启用时，它不知道某些内容可能已更改，因此它将更改写回原始值。因此，第二个进程对变量所做的操作将丢失。如果操作是**原子**的，则保证一旦开始就可以完成而不会被中断。这通常使用硬件级原语来完成，例如测试和设置或比较和交换。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T12:40:59.033

要获得更广泛的图片，您可以查看：

*   MySQL[事务和原子操作](https://docs.oracle.com/cd/E17952_01/mysql-5.1-en/ansi-diff-transactions.html)
*   [原子性（数据库系统）](http://en.wikipedia.org/wiki/Atomicity_%28database_systems%29)
*   [原子性（编程）](http://en.wikipedia.org/wiki/Atomicity_%28programming%29)

以上引用的资源中的一些引用：

**关于数据库：**

> 在原子事务中，一系列数据库操作要么全部发生，要么什么都不发生。原子性保证可防止仅对数据库进行部分更新，这可能会导致比直接拒绝整个系列更大的问题。换句话说，原子性意味着不可分割性和不可约性。

**关于编程：**

> 在并发编程中，一个操作（或一组操作）是原子的、可线性化的、不可分割的或不可中断的，如果它对系统的其余部分来说是瞬间发生的。原子性是与并发进程隔离的保证。此外，原子操作通常有一个成功或失败的定义——它们要么成功地改变了系统的状态，要么没有明显的效果。

我已经看到*事务*这个词在编程中更常用于*数据库*和*操作*，尤其是在内核级编程中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-27T12:33:56.107

在声明中：原子事务是执行所需步骤的最小操作集。所有这些必需的操作要么发生（成功），要么原子事务失败。

原子操作通常与事务没有共同之处。据我所知，这来自硬件编程，其中一组操作（或一个）恰好立即得到解决。

# dependency-injection - Symfony 2 Controller 依赖，扩展 ContainerAware

> ID：15658830
> 
> 赞同：0
> 
> 时间：2013-03-27T12:30:26.780
> 
> 标签：dependency-injection, symfony-components

# 编辑

在深入研究了 symfony 代码，尤其是 ControllerResolver 之后，似乎我试图做的事情实际上是不可能的，除非我自己继承/实现 ControllerResolverInterface。

这是以下代码，它实例化从路由传递的控制器：

```
protected function createController($controller)
{
    if (false === strpos($controller, '::')) {
        throw new \InvalidArgumentException(sprintf('Unable to find controller "%s".', $controller));
    }

    list($class, $method) = explode('::', $controller, 2);

    if (!class_exists($class)) {
        throw new \InvalidArgumentException(sprintf('Class "%s" does not exist.', $class));
    }

    return array(new $class(), $method);
} 
```

正如你在最后一行看到的，它总是在没有传递参数的情况下被实例化，所以我必须重写这个方法才能以这种方式注入一些东西。感觉很hacky。

* * *

# 原始问题

我试图弄清楚如何使用 Symfony 组件（例如，*不是*完整的堆栈框架）将服务注入到在动态路由中定义的自定义控制器中。

请注意，我*没有*使用完整的堆栈框架，也没有使用他们的 DemoBundle src 代码。我有一个`composer.json`需要组件的文件，所以我有一个`index.php`与此处详述的文件大致相同的自定义文件：

[http://fabien.potencier.org/article/55/create-your-own-framework-on-top-of-the-symfony2-components-part-12](http://fabien.potencier.org/article/55/create-your-own-framework-on-top-of-the-symfony2-components-part-12)

我有以下内容：

```
$routes = new RouteCollection();
$routes->add(
    'some route name',
    new Route(
      'a route path', 
      array(
        '_controller' => 'App\MyBundle\Controller\MyController::handle'
      )
    )
); 
```

然后我有以下内容`App/MyBundle/DependencyInjection/MyExtension.php`：

```
public function load(array $configs, ContainerBuilder $container) {
    $loader = new XmlFileLoader(
      $container, 
      new FileLocator(__DIR__.'/../Resource/config')
    );
    $loader->load('services.xml');
} 
```

`App/MyBundle/Resources/config/services.xml`：

```
<container xmlns="http://symfony.com/schema/dic/services"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://symfony.com/schema/dic/services 
                      http://symfony.com/schema/dic/services/services-1.0.xsd">

<services>
  <service id="templating" class="Symfony\Component\Templating\EngineInterface" />
  <service id="navigation" class="App\MyBundle\Controller\MyController">
    <argument type="service" id="templating" />
  </service> 
</services>
</container> 
```

我基本上是在尝试将模板服务注入`MyController`构造函数，我的理解是`MyExtension`文件应该自动加载。我假设我没有使用完整的堆栈框架，这就是原因，但我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-30T14:00:46.317

重写 ControllerResolver 没有错。完整的堆栈框架也可以做到这一点。否则控制器不能是 ContainerAware。

我还使用了没有完整堆栈框架的 Symfony 组件，并且部分复制了完整堆栈框架，我最终这样做是为了将容器注入我的控制器中

```
class ControllerResolver extends SymfonyControllerResolver
{
    protected $container;

    public function __construct(ContainerInterface $container, LoggerInterface $logger = null)
    {
        $this->container = $container;

        parent::__construct($logger);
    }

    protected function createController($controller)
    {
        if (false === strpos($controller, '::')) {
           throw new \InvalidArgumentException(sprintf('Unable to find controller "%s".', $controller));
        }

        list($class, $method) = explode('::', $controller, 2);

        $class = "Namespace\\Controllers\\" . $class;

        if (!class_exists($class)) {
            throw new \InvalidArgumentException(sprintf('Class "%s" does not exist.', $class));
        }

        $controller = new $class();
        if ($controller instanceof ContainerAwareInterface) {
            $controller->setContainer($this->container);
        }

        return array($controller, $method);
    }
} 
```

如果您想增加将控制器定义为服务的可能性，您可以替换

```
if (!class_exists($class)) {
        throw new \InvalidArgumentException(sprintf('Class "%s" does not exist.', $class));
    }

    $controller = new $class();
    if ($controller instanceof ContainerAwareInterface) {
        $controller->setContainer($this->container);
    } 
```

有类似的东西

```
if (!class_exists($class)) {
    if (!$this->container->has($class)) {
        throw new \Exception( ... );
    }
    $controller = $this->container->get($class);

    return array($controller, $method);
}

$controller = new $class();
if ($controller instanceof ContainerAwareInterface) {
    $controller->setContainer($this->container);
}

return array($controller, $method); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:21:15.243

嗯，一开始。您不必将服务注入您的控制器。一个普通的控制器将扩展`Symfony\Bundle\FrameworkBundle\Controller\Controller`，从而注入孔容器。这意味着您可以`templating`像这样访问服务：

```
public function myAction()
{
    $templating = $this->get('templating');
} 
```

但是 Symfony2 也为您提供了将控制器创建为服务的可能性。这意味着您从默认值中删除扩展，`Controller`而不是只注入您需要的服务（通常是`request`和`response`）。更多信息可以在Richard Miller的[这篇精彩文章中找到。](http://richardmiller.co.uk/2011/04/15/symfony2-controller-as-service/)
你也可以阅读Lukas Kahwe Smith 的[这篇文章](http://pooteeweet.org/blog/1947)，他在其中谈到了为什么他认为服务是“最佳实践”（请注意，Symfony 项目的前身 Fabien 不同意这一点）。

# git - 如何在 Git 中取消提交

> ID：15658832
> 
> 赞同：1
> 
> 时间：2013-03-27T12:30:34.070
> 
> 标签：git, git-commit

![在此处输入图像描述](../Images/29621b6da363642dfa6364cf672bb474.png)

我想**取消蓝色提交**
有没有有效的方法呢？？？
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:39:41.230

我认为您有几个选项可以摆脱该提交（上面的评论中提到了一些）：

1.  `git revert <commit_id>`- 这将在 git 历史记录中显示您专门删除了代码
2.  `git reset --hard <commit_id_before_your_commit>`然后樱桃选择你想保留`git cherry-pick <commit_id_to_keep>`x2 的提交，最后强制推送到原点
3.  `git rebase -i origin/wix`- 交互式变基分支，并在你到达它时跳过提交

后两个选项不会在您的分支历史记录中显示该提交的任何痕迹，而第一个选项将显示提交存在但您选择将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:39:25.950

你可以做一个还原

```
git revert <commit-id> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:42:20.453

除了还原：

如果您还没有推送更改（`remotes/origin/wlx`建议的那一行）：

```
> git rebase -i remotes/origin/wlx 
```

这将打开一个编辑器，询问您如何处理提交。删除任何行都会将该提交从历史记录中删除。

# python - PyGTK + 线程；窗户意外冻结

> ID：15658833
> 
> 赞同：0
> 
> 时间：2013-03-27T12:30:37.227
> 
> 标签：python, multithreading, pygtk, freeze

我正在尝试管理包含“其他文件”的文件（许多小文件存储在几个大文件中）。“引擎”工作得很好，但我对 GUI 有一些问题。由于处理时间的原因，某些函数是线程化的，例如删除或添加文件。以下是部分代码：

```
import gtk, os, data, time, threading, subprocess
import Image, re
gtk.gdk.threads_init()

#some unimportant code - creating window with some buttons and IconView item (to show elements in currently opened directory)
    def _del_thread(self): #deletes items selected in gtk.IconView
        dl, fl = self.items #self.items stores selected dirs and files
        for d in dl:
            self.changestatus('Deleting: '+data.dirs[d][0]+'...') #prints the text at StatusBar (data.dirs[d][0] is a filename)
            data.RemoveDir(d) #recursively removes all content in directory d
        for f in fl:
            self.changestatus('Usuwanie pliku: '+data.files[f][0]+'...')
            data.PopFile(f) #removes single file
        self.changestatus('') #clears the StatusBar
        self.refresh() #some elements are deleted - refresh IconView

    def _add_thread(self, fl): #adds files listed in fl
        for f in fl:
            self.changestatus('Adding: '+f[-50:]+'...')
            #some unimportant code (recognizing file's extension and generating a thumbnail
            data.PutFile(f, thumb, self.dir) #adds the file with generated thumbnail to currently opened directory (self.dir)
        self.changestatus('') #clears the StatusBar
        self.refresh() #some elements are added - refresh IconView

    def Delete(self, widget): #triggered by clicking a context-menu item
        md = gtk.MessageDialog(None, gtk.DIALOG_DESTROY_WITH_PARENT, \
                               gtk.MESSAGE_QUESTION, gtk.BUTTONS_OK_CANCEL, \
                               "Do you want to remove selected items?")
        res = md.run()
        md.destroy()
        if res == gtk.RESPONSE_OK:
            t = threading.Thread(target=self._del_thread) #start new thread
            t.start()

    def Add(self, widget): #triggered by clicking a context-menu item
        chooser = gtk.FileChooserDialog(title='Select files to add...',action=gtk.FILE_CHOOSER_ACTION_OPEN,
                                        buttons=(gtk.STOCK_CANCEL,gtk.RESPONSE_CANCEL,gtk.STOCK_OPEN,gtk.RESPONSE_OK))
        chooser.set_select_multiple(True)
        response = chooser.run()
        if response == gtk.RESPONSE_OK:
            #star new thread with selected files' list as an argument
            t = threading.Thread(target=self._add_thread, args=(chooser.get_filenames(),))
            t.start()
        chooser.destroy() 
```

还有第三个函数在线程中运行，但这并不重要。它很快（约 1 秒），始终执行良好并且从不冻结窗口。另外两个（如上所示）有时执行得很好，有时则不然。例如，我在 FileChooserDialog 中选择了一些文件，添加线程启动，StatusBar 连续显示正在添加的文件，最后窗口冻结。之后窗口看起来像这样（对不起波兰描述）： ![pygtk窗口+线程，窗口冻结](../Images/673b1f71691aa58a8d1c2d020bf0b70c.png) 为什么线程有时处理没有问题，有时没有？

最好的问候， mopsiok

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:00:39.370

我想我找到了问题所在。根据[http://faq.pygtk.org/index.py?file=faq20.006.htp&req=show](http://faq.pygtk.org/index.py?file=faq20.006.htp&req=show)，我必须在线程中的每个 gtk 函数之前添加 gtk.threads_enter() ，然后在它之后添加 gtk.threads_close() . 现在它似乎工作正常。

# c++ - std::istream 不抛出 eof 异常（已启用）

> ID：15658836
> 
> 赞同：3
> 
> 时间：2013-03-27T12:30:39.857
> 
> 标签：c++, stl, llvm, istream

我正在尝试使用`std::istream`并希望使用异常来简化错误处理来解析文件。但是即使启用了，流也不会在*eof*上引发异常。

考虑以下代码段：

```
std::string line("Lorem ipsum");
std::istringstream is(line);
is.exceptions(std::ios::eofbit | std::ios::failbit);

std::string value1, value2, value3;
is >> value1;
std::cout << is.eof() << std::endl;
is >> value2;
std::cout << is.eof() << std::endl;
is >> value3;
std::cout << is.eof() << std::endl; 
```

读取*value2*后，`eof()`返回*true*但在任何时候都不会抛出异常，即使流被指示这样做（参见第 3 行）。最后，*value3*包含一个空字符串。

我错过了什么？

以防万一：我正在使用作为 Xcode 4.6.1 一部分的 LLVM libc++（支持 C++11 的 LLVM C++）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T18:58:07.783

我刚刚查看了 libc++ 实现和指定此行为的标准部分：

27.7.2.1 类模板 basic_istream [istream]/p3：

> 如果`rdbuf()->sbumpc()`或`rdbuf()->sgetc()`返回`traits::eof()`，则输入函数，除非另有明确说明，否则会在返回之前完成其操作并执行`setstate(eofbit)`，这可能会抛出 `ios_base::failure`(27.5.5.4)。

然后p4：

> 如果这些被调用函数之一引发异常，则除非另有明确说明，否则输入函数将设置`badbit`为错误状态。如果`badbit`是 on `exceptions()`，则输入函数在不完成其操作的情况下重新抛出异常，否则它不会抛出任何东西并继续进行，就好像被调用的函数返回了失败指示一样。

我相信这里的症结在于对“其中一个被调用的函数”的解释。我将该短语解释为指上一段中提到的所有功能，包括`setstate(eofbit)`. 在这种解释下，libc++ 的行为是正确的，因为`badbit`未设置。

要获得您想要的行为，请执行以下操作：

```
is.exceptions(std::ios::eofbit | std::ios::failbit | std::ios::badbit); 
```

# c++ - 如何防止 Boost.Interprocess 使用 wchar？

> ID：15658837
> 
> 赞同：1
> 
> 时间：2013-03-27T12:30:41.850
> 
> 标签：c++, boost, interprocess

我正在尝试将一些 Boost Interprocess 代码交叉编译到没有 wchar 函数（如 wcslen 和 wmemset）实现的环境中。

这是我的代码：

```
#define BOOST_NO_CWCHAR
#define BOOST_NO_CWCTYPE
#define BOOST_NO_CTYPE_FUNCTIONS
#define BOOST_NO_INTRINSIC_WCHAR_T
#define BOOST_NO_STD_WSTREAMBUF
#define BOOST_NO_STD_WSTRING
#define BOOST_NO_CHAR32_T
#define BOOST_NO_CHAR16_T
#define BOOST_NO_CXX11_CHAR16_T
#define BOOST_NO_CXX11_CHAR32_T
#define BOOST_NO_UNICODE_LITERALS

#define BOOST_DATE_TIME_NO_LIB
#define BOOST_ALL_NO_LIB
//#define BOOST_INTERPROCESS_POSIX_PROCESS_SHARED
//#define BOOST_INTERPROCESS_POSIX_TIMEOUTS
//#define BOOST_DATE_TIME_HAS_HIGH_PRECISION_CLOCK
#define BOOST_HAS_GETTIMEOFDAY
#define CGAL_HAS_NO_THREADS -U__GNUG__
#define BOOST_NO_NATIVE_LONG_DOUBLE_FP_CLASSIFY
#define BOOST_MATH_NO_LONG_DOUBLE_MATH_FUNCTIONS

#include <boost/interprocess/managed_external_buffer.hpp>
#include <boost/interprocess/allocators/allocator.hpp>
#include <boost/interprocess/containers/list.hpp>
#include <cstring>
#include <boost/aligned_storage.hpp>

using namespace boost::interprocess;

//Alias an integer node allocator type
//This allocator will allocate memory inside the static buffer
typedef allocator<int, wmanaged_external_buffer::segment_manager>
   allocator_t;

//Alias a STL compatible list to be constructed in the static buffer
typedef list<int, allocator_t>    MyBufferList;

void processWork(char *data, int size)
{
    const int localSize = 65536;
    static boost::aligned_storage<localSize>::type static_buffer2;
    std::memcpy(&static_buffer2, data, localSize);

    wmanaged_external_buffer objects_in_static_memory2
       (open_only, &static_buffer2, localSize);

    //Check that "MyList" has been duplicated in the second buffer
    MyBufferList *list = objects_in_static_memory2.find<MyBufferList>(L"MyList").first;
    std::cout << list->front();

    **objects_in_static_memory2.destroy<MyBufferList>(L"MyList");**

}

int main()
{
    std::cout << "Starting";

   //Create the static memory who will store all objects
   const int memsize = 65536;

   static boost::aligned_storage<memsize>::type static_buffer;

   //This managed memory will construct objects associated with
   //a wide string in the static buffer
   wmanaged_external_buffer objects_in_static_memory
      (create_only, &static_buffer, memsize);

   //We optimize resources to create 100 named objects in the static buffer
   objects_in_static_memory.reserve_named_objects(100);

   //The list must be initialized with the allocator
   //All objects created with objects_in_static_memory will
   //be stored in the static_buffer!
   MyBufferList *list = objects_in_static_memory.construct<MyBufferList>(L"MyList")
                           (objects_in_static_memory.get_segment_manager());

   list->push_back(624);
   processWork((char*)static_buffer.address(), memsize);
   objects_in_static_memory.destroy<MyBufferList>(L"MyList");

   return 0;
} 
```

其中带有 L"MyList" 的调用会在 boost /interprocess/segment_manager.cpp 中调用：

```
 index_it it = index.find(key_type (name, std::char_traits<CharT>::length(name))); 
```

这试图在 libcxx/string 中调用 wcslen，这是我试图避免的。

我尝试从缓冲区名称中删除“L”，但随后它抱怨参数不是 wchar。任何有关如何删除此 wchar 依赖项的指导最受赞赏 - 不幸的是，我设置的宏似乎并没有起到作用。

我正在使用最新的 Boost 标头（不是我系统上的）

马科斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:40:32.730

`wmanaged_external_buffer`是一个 typedef `basic_managed_external_buffer<wchar_t>`，就像`std::wstring`是一个 typedef `std::basic_string<wchar_t>`。

您应该使用`managed_external_buffer`（或`basic_managed_external_buffer<char>`直接）。

# c# - 返回动态/通用对象或 POCO

> ID：15658840
> 
> 赞同：0
> 
> 时间：2013-03-27T12:30:54.030
> 
> 标签：c#, .net, rest, asp.net-web-api

因此，当我编写 Web API 时，我在考虑如何处理发生错误时的情况。我应该如何告知消费者发生了什么以及如何纠正它。我有一个错误对象，当消费者违反业务规则时，我会返回错误编号、消息、可能的原因和解决方案等内容。我的直接想法是返回 POCO 并在发生错误气体时返回错误对象，但这意味着每个控制器都必须返回一个通用对象才能允许这样做。这似乎违反了合同或某些编程原则。我的意思是最终它总是会产生一个 JSON 对象，但控制器返回“对象”似乎很模糊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:31:55.247

不要将 POCO 对象或 Error 对象作为“通用”对象返回，而是使用 C# 泛型返回一个新类：

```
public class Response<T>
{
    public T Value { get; set; }
    public ErrorClass Error { get; set; }
} 
```

# javascript - 如何仅对字母启用 onpaste

> ID：15658841
> 
> 赞同：6
> 
> 时间：2013-03-27T12:30:54.733
> 
> 标签：javascript, jquery, html

我的任务是禁止粘贴文本框。必须只允许粘贴字母字符。我的代码是

```
<b>Name</b>
<input type="text" id="name" onpaste="return false"/> 
```

通过给出 onpaste="return false" 不会粘贴任何值。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T13:43:45.823

试试这个代码

```
$(".alphabetOnly").bind('paste', function(e) {
  var self = this;
  setTimeout(function(e) {
    var val = $(self).val();
    if (val != '0') {
      if (val.match(/^[0-9]+$/) != null) {
        $(".alphabetOnly").val("");
      }
      $(this).val(val);
    }
  }, 0);
}); 
```

我在[这里更新了代码](http://jsfiddle.net/WSvhZ/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:34:26.470

之前犯了一些错误，这是有效的：

```
$('#name').bind('paste', function(){
    var self = this;
    setTimeout(function() {
        if(!/^[a-zA-Z]+$/.test($(self).val()))
            $(self).val('');
    }, 0);    
}); 
```

你必须`onpaste="return false"`从你的html中删除！

可以在这里找到一个工作示例：[JS Fiddle](http://jsfiddle.net/GuhJN/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-12T04:52:24.930

此代码限制除了输入字段中的数字之外的其他字符的粘贴。在将值粘贴到输入字段时，我正在使用正则表达式测试该值，如果条件为真，则将设置该值，否则我'我清空输入值。在我的情况下，我必须限制除数字之外的其他字符，您可以根据您的要求更改正则表达式

```
$(".numbersOnly").bind('paste', function(e) {
        var self = this;
        setTimeout(function(e) {
            var val = $(self).val();
            if (val != '0') {
                var regx = new RegExp(/^[0-9]+$/);
                if (!regx.test(val)) {
                    $(".numbersOnly").val("");
                }
                $(this).val(val);
            }
        }, 0);
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:34:38.777

调用 onpaste 值内的函数。然后，在该函数内部，清除非字母字符。

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/10972954/javascript-onpaste)。

# matlab - 为什么 cDAQ 设备没有 Simulink 模块？

> ID：15658845
> 
> 赞同：0
> 
> 时间：2013-03-27T12:31:12.707
> 
> 标签：matlab, simulink, nidaqmx

我目前正在从事一个涉及 Simulink 中的数据采集和实时处理的项目。我们继承了一些专门为此项目购买的相当时髦的 DAQ 硬件 - 即 National Instruments cDAQ 设备 (USB)。在这一点上，更换硬件太昂贵了。

我之前看到过与 DAQ Toolbox 配合使用的 Simulink 模块，因此很自然地假设我可以在 Simulink 中使用我们的 cDAQ。然而，在进一步调查中，这些模块似乎只适用于 PCI NI 设备，而不是像我们这样的“紧凑型”USB 设备。

我通过编写一个使用 DAQ 工具箱的基于会话的接口的 2 级 MS 函数创建了一个解决方法，将传入数据放入队列中并通过 onOutputs 中的输出端口将其推出。这似乎工作正常。

我的问题是：MathWorks 决定不让他们的 DAQ 模块与 cDAQ 设备一起工作是否有原因？我知道 USB 往往会出现一些延迟问题，但我真的认为这是可能的吗？我什至会说它实际上看起来相当简单，但肯定有一个动机是 DAQ 工具箱中缺少对 cDAQ 设备的 Simulink 支持。我是否过于简单化了这个问题？如果是这样，怎么办？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:37:19.060

Mathworks 的动机可能是由需求驱动的，可能没有多少用户要求它。

不知道这是否对您有帮助，但是编写 C 库来进行数据采集非常容易并且可能更快。然后，您可以从 Simulink 调用库中的函数。该解决方案还具有让您完全控制 DAQ 板的优势。DAQmx 的分发盘有很多 C 示例。

# gwt - 如何使用 gwt 查询获取与按钮相邻的文本框的值

> ID：15658846
> 
> 赞同：0
> 
> 时间：2013-03-27T12:31:15.750
> 
> 标签：gwt, jquery-selectors, gwtquery, gquery

我有一个像这样的自定义小部件，它基本上是几个文本框和按钮。

```
<g:VerticalPanel>
    <b:Label>Lower Limit</b:Label>
    <b:TextBox ui:field="lowerLimit" addStyleNames="lowerLimitTextBox"></b:TextBox>
    <b:Button icon="COPY" addStyleNames="copyAll copyAllLower">Copy To All</b:Button>
</g:VerticalPanel>

<g:VerticalPanel>
    <b:Label>Upper Limit</b:Label>
    <b:TextBox ui:field="upperLimit" addStyleNames="upperLimitTextBox"></b:TextBox>
    <b:Button icon="COPY" addStyleNames="copyAll copyAllUpper">Copy To All</b:Button>
 </g:VerticalPanel> 
```

页面上有许多这样的小部件。单击按钮时，我希望能够选择左侧的文本框并将该值复制到所有相应的小部件。

我可以选择按钮，但不知道如何选择左边的文本框。有人能帮忙吗。

我正在添加 jQuery-selectors 标记，因为选择器可能类似于 GwtQuery 的选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:33:28.913

好吧，首先你必须知道 a`VerticalPanel`是如何呈现的，这样你才能弄清楚 dom 中的文本框在哪里。

`VerticalPanel`呈现为表格，每个小部件都定位到一个结构中：`<tr><td>widget</td></tr>`

在您的情况下，您可以使用`closest()`并`prev()`获取`tr`按钮的上一个：

```
$(button).closest("tr").prev(); 
```

然后使用`find()`获取`input`里面的上一个`tr`

```
$(button).closest("tr").prev().find("input") 
```

因此，使用 find 的 gquery 功能，`Widgets`UI 中每个按钮的代码可能如下所示：

```
 button.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
      TextBox box = $(button).closest("tr").prev().find("input").widget();
      for (TextBox b :  $(".gwt-TextBox").widgets(TextBox.class) ) {
        b.setValue(box.getValue());
      }
    }
  }); 
```

虽然如果你想`gquery`一次增强所有按钮，一切都简单得多：

```
 $(".gwt-Button").click(new Function(){
    public void f() {
      String value = $(this).closest("tr").prev().find("input").val();
      $(".gwt-TextBox").val(value);
    }
  }); 
```

# android - 失去对退出编辑文本和保存状态的关注

> ID：15658847
> 
> 赞同：0
> 
> 时间：2013-03-27T12:31:20.397
> 
> 标签：android, android-edittext, autofocus

我有一个编辑文本，当我在此处输入内容并在外部点击时，如果输入的值不为空，焦点和软键盘应该隐藏并更改按钮的可见性。如果我再次输入并更改编辑文本 0 的值并点击，按钮应该再次变得不可见。PFA 我在做什么：

```
public void onFocusChange(View v, boolean hasFocus) {
    String s = enter_num.getText().toString();
    if(!(s.equals(""))){
        enter_num.setFocusable(isFinishing());
        InputMethodManager imm = (InputMethodManager).getContext().getSystemService(Context.INPUT_METHOD_SERVICE); 
        imm.hideSoftInputFromWindow(v.getWindowToken(), 0);                         
        ans_status2.setVisibility(View.VISIBLE);                                                                
    }
} 
```

这并没有失去焦点。这是开始的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:38:42.677

试试这个：

```
public void onFocusChange(View v, boolean hasFocus) {
    String s = enter_num.getText().toString().concat("");
    int length = s.length();
    if(length <= 0){                
    } else {
        if(s.equals("0")){
            enter_num.setFocusable(isFinishing());
            InputMethodManager imm = (InputMethodManager).getContext().getSystemService(Context.INPUT_METHOD_SERVICE); 
            imm.hideSoftInputFromWindow(v.getWindowToken(), 0);                         
            ans_status2.setVisibility(View.VISIBLE);                                                                
         }
    }
} 
```

希望这会帮助你。

# c# - 在 c# winforms 的选项卡标题上添加关闭按钮

> ID：15658852
> 
> 赞同：0
> 
> 时间：2013-03-27T12:31:29.407
> 
> 标签：c#, winforms

我创建了一个扩展选项卡控件。在那个选项卡控件中，我想放置关闭按钮（就像 chrome 浏览器选项卡一样）。它将如何发生？请给任何建议。我用于创建选项卡控件的以下代码

```
 public class ExtendedTabControl : TabControl
    {
        public ExtendedTabControl()
        {
            this.DrawMode = TabDrawMode.OwnerDrawFixed;
            SetStyle(ControlStyles.AllPaintingInWmPaint | ControlStyles.DoubleBuffer | ControlStyles.ResizeRedraw |
                ControlStyles.UserPaint | ControlStyles.SupportsTransparentBackColor, true);

            this.Invalidate();
            BorderWidth =1;

        }
        public Color ActiveBorderColor { get; set; }
        public Color InactiveBorderColor { get; set; }
        public Color ActiveTabColor { get; set; }
        public Color InActiveTabColor { get; set; }
        public float BorderWidth { get; set; }

        protected override void OnSelectedIndexChanged(EventArgs e)
        {
            base.OnSelectedIndexChanged(e);
            //TabPages[this.SelectedIndex]

            this.Invalidate();
        }
        protected override void OnPaintBackground(PaintEventArgs e)
        {
            base.OnPaintBackground(e);
            for (int i = 0; i < this.TabCount; i++)
            {
                if (i != this.SelectedIndex)
                {
                    DrawTab(e.Graphics, i, false);
                }
            }
            //TabPages[this.SelectedIndex].BackColor = ActiveTabColor;
            DrawTab(e.Graphics, this.SelectedIndex, true);

        }
        protected override void OnPaint(PaintEventArgs e)
        {
            //base.OnPaint(e);

        }
        private void DrawTab(Graphics g, int i, bool isSelected)
        {
            if (i < 0)
            {
                return;
            }
            Rectangle rectangle = GetTabRect(i);
            if (isSelected)
            {
                rectangle.Height += 2;
            }

            GraphicsPath path = new GraphicsPath();
            Point p1 = new Point(rectangle.X + 20, rectangle.Y);
            Point p2 = new Point(rectangle.X, rectangle.Y + rectangle.Size.Height);
            path.AddLine(p1, p2);
            Point p3 = new Point(rectangle.X + rectangle.Width, rectangle.Y);
            path.AddLine(p1, p3);
            Point p4 = new Point(rectangle.Left + rectangle.Width + 24, rectangle.Top + rectangle.Height);
            path.AddLine(p3, p4);
            path.AddLine(p4, p2);
            if (isSelected)
            {

                using (Brush brush = new SolidBrush(ActiveTabColor))
                {
                    g.FillPath(brush, path);
                }

                using (Pen pen = new Pen(ActiveBorderColor, BorderWidth))
                {
                    DrawTabBorder(g, pen);
                }

            }
            else
            {  
                using (Brush brushI = new SolidBrush(InActiveTabColor))
                {
                    g.FillPath(brushI, path); 
                }
                using (Pen pen = new Pen(InactiveBorderColor, BorderWidth))
                {
                    DrawTabBorder(g, pen);
                }

            }

        }

        private void DrawTabBorder(Graphics g, Pen pen)
        {
            if (this.SelectedIndex < 0)
            {
                return;
            }
            Rectangle selectedRectangel = GetTabRect(this.SelectedIndex);
            #region coment
            //selectedRectangel.Width -= 6;
            //selectedRectangel.X += 1;        
            //Point pRight = new Point(this.SelectedTab.Bounds.Location.X + this.SelectedTab.Width + 1,
                                     //this.SelectedTab.Bounds.Location.Y - 1);

            //Point pRightBottam = new Point(this.SelectedTab.Bounds.Location.X + this.SelectedTab.Width + 1,
                                           //this.SelectedTab.Bounds.Location.Y + this.SelectedTab.Bounds.Height + 1);
            //Point pLeftTabStart = new Point(selectedRectangel.X, pLeft.Y);
            //Point pLeftTabStop = new Point(selectedRectangel.X + selectedRectangel.Width + selectedRectangel.Height + 1 ,
#endregion

            Point pLeft = new Point(this.SelectedTab.Bounds.Location.X, this.SelectedTab.Bounds.Location.Y);

            Point pLeftBottam = new Point(this.SelectedTab.Bounds.Location.X - 1, 
                                          this.SelectedTab.Bounds.Location.Y + this.SelectedTab.Bounds.Height + 1);
            Point pt1 = selectedRectangel.Location;
            pt1.X += 20;
            Point pt2 = new Point(selectedRectangel.Location.X + selectedRectangel.Width + 1, 
                                   selectedRectangel.Location.Y + 1);
            Point pt3 = new Point(selectedRectangel.X, selectedRectangel.Y + selectedRectangel.Height);
            Point pt4 = new Point(selectedRectangel.Left+selectedRectangel.Width+24,
                                   selectedRectangel.Top+selectedRectangel.Height);
            Point pt6 = new Point(this.SelectedTab.Bounds.Location.X + this.SelectedTab.Width + 1,
                                  this.SelectedTab.Bounds.Location.Y - 1);
            Point pt7 = new Point(pLeftBottam.X+this.SelectedTab.Bounds.Width,pLeftBottam.Y);
            Point pt8 = pLeftBottam;

            GraphicsPath pathTab = new GraphicsPath();
            pathTab.AddLine(pt3, pt1);
            pathTab.AddLine(pt1, pt2);
            pathTab.AddLine(pt2, pt4);
            pathTab.AddLine(pt4, pt6);
            pathTab.AddLine(pt6, pt7);
            pathTab.AddLine(pt7, pt8);
            pathTab.AddLine(pt8, pLeft);
            pathTab.AddLine(pLeft, pt3);

            g.SmoothingMode = SmoothingMode.AntiAlias;
            pathTab.Widen(pen);
            g.DrawPath(pen, pathTab);

        }
        protected override void OnSelected(TabControlEventArgs e)
        {
            TabPage page = this.SelectedTab;
            page.BackColor = ActiveTabColor;
        }
} 
```

# javascript - 如何使div从右向左滑动

> ID：15658858
> 
> 赞同：8
> 
> 时间：2013-03-27T12:31:39.220
> 
> 标签：javascript, jquery, css

从某人那里得到了一个代码....

我喜欢的是让滑动 div 从右滑到左，我的意思是它把 div 隐藏到右边，然后慢慢地向左滑动 300px 宽度。

HTML

```
<a id="loginPanel">quote</a>
<div id="userNav">User Area</div> 
```

CSS

```
#loginPanel {
    color: #000;
    cursor:pointer;
}

#userNav {
    width: 200px;
    height: 200px;
    display: none;
    background: #ff0000;
} 
```

jQuery

```
// Open / Close Panel According to Cookie //    
if ($.cookie('panel') == 'open'){    
    $('#userNav').slideDown('fast');
} else {
    $('#userNav').slideUp('fast');
}

// Toggle Panel and Set Cookie //
$('#loginPanel').click(function(){        
    $('#userNav').slideToggle('fast', function(){
        if ($(this).is(':hidden')) {
            $.cookie('panel', 'closed');
        } else {
            $.cookie('panel', 'open');
        }
    });
}); 
```

请在这方面需要帮助。只是为了让 div 从右向左滑动

这是小提琴[http://jsfiddle.net/7m7uK/195/](http://jsfiddle.net/7m7uK/195/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T12:44:27.840

您可以使用 jQueryUI 和附加效果*Slide*

[http://docs.jquery.com/UI/Effects/Slide](http://docs.jquery.com/UI/Effects/Slide)

例子：

```
$('#userNav').hide("slide", {direction: "left" }, 1000);
$('#userNav').show("slide", { direction: "right" }, 1000); 
```

您不能使用 .slideToggle() 从左向右滑动，反之亦然，从[http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)：

> .slideToggle() 方法为匹配元素的高度设置动画。这会导致页面的下部向上或向下滑动，似乎显示或隐藏项目。如果元素最初被显示，它将被隐藏；如果隐藏，它将显示。

您应该尝试更改代码以实现此代码，但我认为如果您尝试使用[@s15199d](https://stackoverflow.com/a/15659017/1081079)答案可能会比您不需要使用 jQueryUI 更好

好的，我创建了 jsfiddle，你必须包含 jQueryUI 才能工作，你有不同的滑动方向组合：

[http://jsfiddle.net/7m7uK/197/](http://jsfiddle.net/7m7uK/197/)

好的，用 cookie 创建了另一个小提琴

[http://jsfiddle.net/7m7uK/198/](http://jsfiddle.net/7m7uK/198/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-01T18:41:16.143

**不依赖 JQuery-UI**

您需要将`<div>`要滑动的内容放在 wrapper`<div>`中。然后将内容 div 的右边距设置为其负宽度。包装器的诀窍`<div>`是将其`x-overflow`设置为 hidden 以便隐藏内容`<div>`。然后，您可以使用 jQuery 的原生`animate()`例程将右边距设置为 0，以使内容`<div>`出现水平滑动效果。

HTML：

```
<div id="slider-wrapper">
    <div id="slider-content">
</div> 
```

CSS：

```
#slider-wrapper {
    overflow-x: hidden;
}
#slider-content {
    width:         300px;
    margin-right: -300px;
} 
```

JavaScript：

```
$("#slider-button").click(function () {
    $("#slider-content").animate({ "margin-right": 0 }, "slow");
}); 
```

这是一个使用句柄`<div>`展开和折叠 div 的演示：http: [//jsfiddle.net/gingi/KUCaL/](http://jsfiddle.net/gingi/KUCaL/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-22T06:12:14.280

从右到左和从左到右滑动 DIV

```
<div class="nav ">
       <ul>
        <li><a href="#">HOME</a></li>
        <li><a href="#">ABOUT</a></li>
        <li><a href="#">SERVICES</a></li>
        <li><a href="#">CONTACT</a></li>
       </ul>
   </div> 
```

CSS：

```
/*nav*/
.nav{
    position: fixed;
    right:0;
    top: 70px;
    width: 250px;
    height: calc(100vh - 70px);
    background-color: #333;
    transform: translateX(100%);
    transition: transform 0.3s ease-in-out;

}
.nav-view{
    transform: translateX(0);
} 
```

JS：

```
 $(document).ready(function(){
  $('a#click-a').click(function(){
    $('.nav').toggleClass('nav-view');
  });
}); 
```

[http://www.themeswild.com/read/slide-navigation-left-to-right](http://www.themeswild.com/read/slide-navigation-left-to-right)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:40:14.423

```
$("#DivName").animate({"left": "-=300px", "opacity":1}, "slow"); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-03-27T12:35:23.507

你试过这个吗？

```
if ($.cookie('panel') == 'open'){    
    $('#userNav').slideLeft('fast');
} else {
    $('#userNav').slideRight('fast');
} 
```

# php - AJAX 长轮询 - 在尝试访问另一个页面时等待 php 完成

> ID：15658859
> 
> 赞同：0
> 
> 时间：2013-03-27T12:31:40.987
> 
> 标签：php, ajax, jquery, long-polling

我想在我公司的 erp 中创建类似于 Facebook 的通知系统。为了保持良好的性能，我使用长轮询 - 循环 ajax 查询 php 脚本的秒数。一切正常，直到我尝试转到 ERP 中的另一个页面。当我单击页面上的任何链接时，一切都会冻结，直到后台 php 脚本完成，即使我手动终止了 ajax 连接。JS 脚本包含在每个页面中，并在页面加载时自行启动。

```
function notificationsObject(){
  var nl = new Object();

nl.startAjax = function(data){
    if(nl.ajaxObject != null) try{ nl.ajaxObject.abort() } catch(e){} finally{nl.ajaxObject = null}
    nl.ajaxObject = $.ajax({
      url: nl.ajaxUrl, //declared before function declaration
      type: 'POST',
      data: {data: data}
    }).done(function(responseText){nl.ajaxSuccess(responseText)
    }).fail(function(responseText){nl.ajaxFail(responseText)});

  }

  nl.ajaxSuccess = function(response){
      console.debug(response);
      nl.startAjax();
  }

  nl.ajaxFail = function(response){
    //@todo some code here
  }

  nl.killConnection = function(){
    if(nl.ajaxObject != null) try{ nl.ajaxObject.abort() } catch(e){} finally{nl.ajaxObject = null}
    console.debug('killing');
  }

(more code here)
return nl;
} 
```

初始化代码看起来像这样

```
$(document).ready(function(){

  var notifications = notificationsObject();
  notifications.startAjax({name: 'startup'});

  setTimeout(function(){window.onbeforeunload = function(){notifications.killConnection()};}, 1000);

}); 
```

还有一些 PHP 代码：

```
public function executeUsersNotificationListener(){
    ignore_user_abort(false);
    ob_end_flush();
    $this->getResponse()->setHttpHeader("Cache-Control", "no-cache");
    $this->getResponse()->setHttpHeader("Pragma", "no-cache");
    $this->getResponse()->setHttpHeader("Expires", 0);

    $timeLimit = 30;
    set_time_limit($timeLimit+1);

    echo 'test';

    $i = 0;
    while($i++ < $timeLimit){

      echo "       ";

      sleep(1);
    }

    return sfView::NONE;
  } 
```

正如你在上面看到的，我做了一些研究和使用`ignore_user_abort`等等，但它不起作用。

# git - 如何取消跟踪或忽略文件而不在 Git 中删除它们？

> ID：15658864
> 
> 赞同：0
> 
> 时间：2013-03-27T12:31:56.880
> 
> 标签：git, version-control

我对如何在 git 中使用忽略和排除有点困惑。

我有一个带有 2 个分支的仓库，master 和 production。

这两个分支的配置文件需要不同，一个用于开发服务器，一个用于生产服务器。

Git 文档指出 ignore 和 exclude 不会对跟踪的文件进行操作。但是如果我取消跟踪它们，那么它们会在本地和远程仓库中被删除。

如果我只在本地应用任一选项，那么当我合并或重新设置其他文件中的任何更改时，配置将被来自其他分支的配置覆盖。

我目前在 Mac OSX 上使用 Tower。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:35:41.220

用于`--cached`从索引中删除文件，但不从磁盘中删除：

```
$ git rm --cached my_file

$ git status

# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    my_file 
```

不要忘记提交您的更改：

```
$ git commit -m "Removed a my_file 
```

# javascript - javascript 从字符串数组构造一个对象

> ID：15658865
> 
> 赞同：1
> 
> 时间：2013-03-27T12:31:58.693
> 
> 标签：javascript, algorithm

我有以下数组

```
var testArray = ["test1", "test2", "test3"]; 
```

和`obj`其中有其他对象的

```
var obj.test1.test2.test3 = "test"; 
```

我想测试 testArray

并得到以下

```
obj[testArray[0]][testArray[1]][testArray[2]] 
```

或者`obj["test1"]["test2"]["test3"]`

这等于`obj.test1.test2.test3`并将返回“测试”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:36:27.713

正如您所说，您知道，我们可以利用`obj["test1"]`符号将自己更深地嵌套到目标对象中。在这种情况下，在每次迭代中，我们将我们所指向的“顶部”重新分配为最后一次迭代的子项。

```
var obj = { test1: { test2: {test3: 'test' }}};
var current = obj;

var arr = ['test1', 'test2', 'test3'];
for(var i = 0; i < arr.length; i++){
    if(current === undefined){ break; }
    current = current[arr[i]];
}

console.log(current); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:38:35.090

这个怎么样：

```
var testArray = ["test1", "test2", "test3"];
var value = [obj].concat(testArray).reduce(function(prev, curr) {
     return prev[curr];
}); 
```

但请记住， IE <= 8（[减少参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)`reduce`）不支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:42:06.333

```
function extractDeep(obj, propPathArr) {
   var prop = obj;
   propPathArr.forEach(function (item) {
      prop = prop[item];
   });
   return prop;
} 
```

像这样打电话：

```
alert(extractDeep({a: {b: {c: "The property!"}}}, ['a', 'b', 'c'])); 
```

笔记：

*   **你真的应该添加一些错误检查。**
*   **`forEach`不适用于所有浏览器**

[jsFiddle 可以在这里找到](http://jsfiddle.net/Yb3PE/)

# asp.net - 如何获取唯一标识符的 UserId

> ID：15658867
> 
> 赞同：0
> 
> 时间：2013-03-27T12:32:06.787
> 
> 标签：asp.net

我在 asp.net 网络表单中编码。我有默认从asp.net生成的用户表我需要获取当前的UserId，在我的情况下默认是uniqueidentifier

```
string user = User.Identity.Name; //this give me the name
            string name = TextBoxCategoryName.Text;
            this.connection.Open();
            command = connection.CreateCommand();
            command.CommandText = "insert into ProfitCategories(name, IdUser/*this is foreign key to Users table*/) values ( '" + name + "', '"+user+"' )";
            command.ExecuteNonQuery();

            connection.Close(); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-27T12:45:52.180

试试 ExecuteScalar() [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

另外，请参阅此先前特定于返回 GUID 的答案： [https ://stackoverflow.com/a/8398174/280785](https://stackoverflow.com/a/8398174/280785)

# hadoop - 在 hadoop 0.23.6 中运行 mapreduce 示例时出错

> ID：15658870
> 
> 赞同：1
> 
> 时间：2013-03-27T12:32:13.330
> 
> 标签：hadoop

我在 Ubuntu 12.04 LTS 中部署了 Hadoop 0.23.6。我能够复制文件并进行文件操作。我正在使用 YARN 进行 mapreduce。

当我尝试使用 hadoop-mapreduce-examples-0.23.6.jar 运行任何 mapreduce 应用程序时，出现以下错误

使用的命令：bin/hadoop jar hadoop-mapreduce-examples-0.23.6.jar randomwriter -Dmapreduce.randomwriter.mapsperhost=1 -Dmapreduce.job.user.name=$USER -Dmapreduce.randomwriter.bytespermap=10000 -Ddfs.blocksize =536870912 -Ddfs.block.size=536870912 -libjars hadoop-mapreduce-client-app-0.23.6.jar 输出

Hadoop版本：0.23.6

**container_1364342550899_0001_01_000002 的容器启动失败：java.lang.IllegalStateException：为尝试_1364342550899_0001_m_000000_0 返回了无效的随机播放端口号-1**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:36:29.557

验证您的 yarn-site.xml 配置。您需要配置以下属性。

```
<property>
    <name>yarn.nodemanager.aux-services</name>
    <value>mapreduce.shuffle</value>
</property>
<property>
    <name>yarn.nodemanager.aux-services.mapreduce.shuffle.class</name>
    <value>org.apache.hadoop.mapred.ShuffleHandler</value>
</property> 
```

有关更多详细信息，请查看 jira [https://issues.apache.org/jira/browse/MAPREDUCE-2983?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://issues.apache.org/jira/browse/MAPREDUCE-2983?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

# java - FreeMarker：使用宏时保持标识

> ID：15658872
> 
> 赞同：8
> 
> 时间：2013-03-27T12:32:14.520
> 
> 标签：java, code-generation, freemarker

我正在使用 FreeMarker 模板引擎从 web 服务的抽象描述中生成一些 php 类。我的问题是，当我在 FreeMarker 模板中调用宏时，宏会在宏调用之前插入没有左侧空格的文本。

示例模板.ftl：

```
<?php
    class ${class.name} {
        <@docAsComment class.doc/>

        <#list class.fields as field>
        $${field.name};
        </#list>
        <#-- ... -->
    }
?>

<#macro docAsComment doc>
/*
<#if doc.title != "">
* ${doc.title}
</#if>
<#list doc.content as content>
<#if content != ""> * ${content}</#if>
</#list>
*/
</#macro> 
```

这将生成如下内容：

```
<?php
    class foo {
/*
 * foo
 * bar foo, bla
 */          

    $a;
    $b;
    }
?> 
```

一种解决方案是将前导空格作为参数提交给宏，但这只会使模板更加不可读。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:59:10.727

似乎`docAsComment`总是在代码生成中以相同的缩进级别调用。您可以将该缩进烘焙到宏中。

如果注释的缩进是可变的，则必须传入缩进级别。我不明白您关于使模板更难阅读的评论。它*确实*使宏更复杂一些。

调用将如下所示：

```
<@docAsComment class.doc 1/> 
```

宏会变成这样：

```
<#macro docAsComment doc indent=1>
   <#local spc>${""?left_pad(indent * 4)}</#local>
${spc}/*
<#if doc.title != "">
${spc}* ${doc.title}
</#if>
<#list doc.content as content>
<#if content != "">${spc} * ${content}</#if>
</#list>
${spc}*/
</#macro> 
```

还不错，真的。您可以通过缩进使宏更易于阅读：

```
<#macro docAsComment doc indent=1>
    <#local spc>${""?left_pad(indent * 4)}</#local>
    ${spc}/*<#lt>
    <#if doc.title != "">
        ${spc}* ${doc.title}<#lt>
    </#if>
    <#list doc.content as content>
        <#if content != "">${spc} * ${content}</#if><#lt>
    </#list>
    ${spc}*/<#lt>
</#macro> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-27T10:57:15.567

今天，可以使用`<#nt>`. [空白文档](http://freemarker.org/docs/dgui_misc_whitespace.html#dgui_misc_whitespace_stripping)对此进行了如下说明：

> 可以使用 nt 指令（对于 No Trim）禁用单行的空白剥离。

根据[V2.3 变更日志](http://freemarker.org/docs/versions_2_3.html)，在以前的版本中，仅包含 FTL 标记的行会被修剪，`<#include>`自定义指令（如`<@macroname>`）除外。但在 V2.3 中，他们将此行为更改为始终修剪此类线条。所以，当你使用你的宏时，你可以放上`<#nt>`一行来防止修剪，所以，保持缩进。

```
<#macro test>
...<#t>
</#macro>

Example:
   - <@test /><#nt> 
```

给出结果：

```
Example:
   - ... 
```

您可以看到，在宏中，我定义了`<#t>`，这是因为宏内部的新行不会被修剪，并且总是会在您所在的位置给出一个新行`<@macro>`，因此在一部分中，我们修剪了空白，在另一部分，我们保留它！

**编辑：**

值得一提的是，由于某种原因，**这只适用于一行**。如果您的宏中有多行，它只保留第一行的缩进。到目前为止，我还没有找到解决方法，但我[在 Freemarker JIRA](https://issues.apache.org/jira/browse/FREEMARKER-81)中为此创建了一个问题。

例子：

```
<#macro test>
...
wow
</#macro>

Example:
   - <@test><#nt> 
```

将导致：

```
Example:
   - ...
wow 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T09:12:45.700

这类问题（动态缩进）的通用解决方案是一个过滤器，它（基本）理解您生成的语言（PHP）并重新缩进代码。您可以将过滤器实现为`Writer`包装真实输出的过滤器`Writer`。`{`如果它观察,`}`和标记的位置可能就足够了`/*`（`*/`我不确定）。

另一个更容易实现的解决方案是创建一个自定义 FreeMarker 指令，通过`TemplateDirectiveModel`在每行的开头简单地添加或删除作为参数给定的空格数量来过滤在其嵌套内容中生成的输出。然后你可以做类似的事情：

```
<@indent spaces=4>
   ...
</@indent> 
```

使用它会使模板更复杂，但它仍然不像在每一行中插入缩进那样嘈杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-15T10:36:17.237

对于那些希望在导入的宏前加上一些空格缩进的人，这里有一个执行工作的类：

```
public final static class IndentDirective
    implements TemplateDirectiveModel
{

  private static final String COUNT = "count";

  public void execute(Environment environment, Map parameters, TemplateModel[] templateModels,
      TemplateDirectiveBody body)
      throws TemplateException, IOException
  {
    Integer count = null;
    final Iterator iterator = parameters.entrySet().iterator();
    while (iterator.hasNext())
    {
      final Map.Entry entry = (Map.Entry) iterator.next();
      final String name = (String) entry.getKey();
      final TemplateModel value = (TemplateModel) entry.getValue();

      if (name.equals(COUNT) == true)
      {
        if (value instanceof TemplateNumberModel == false)
        {
          throw new TemplateModelException("The \"" + COUNT + "\" parameter " + "must be a number");
        }
        count = ((TemplateNumberModel) value).getAsNumber().intValue();
        if (count < 0)
        {
          throw new TemplateModelException("The \"" + COUNT + "\" parameter " + "cannot be negative");
        }
      }
      else
      {
        throw new TemplateModelException("Unsupported parameter '" + name + "'");
      }
    }
    if (count == null)
    {
      throw new TemplateModelException("The required \"" + COUNT + "\" parameter" + "is missing");
    }

    final String indentation = StringUtils.repeat(' ', count);
    final StringWriter writer = new StringWriter();
    body.render(writer);
    final String string = writer.toString();
    final String lineFeed = "\n";
    final boolean containsLineFeed = string.contains(lineFeed) == true;
    final String[] tokens = string.split(lineFeed);
    for (String token : tokens)
    {
      environment.getOut().write(indentation + token + (containsLineFeed == true ? lineFeed : ""));
    }
  }

} 
```

您可以通过添加`configuration.setSharedVariable("indent", new IndentDirective());`到 FreeMarker 配置来集成它，然后通过插入在模板中使用它

```
<@indent count=4>
[whathever template code, including macro usage]
</@indent> 
```

# c# - 没有 Include("A") 方法的实体框架代码优先延迟加载

> ID：15658876
> 
> 赞同：0
> 
> 时间：2013-03-27T12:32:26.567
> 
> 标签：c#, .net, entity-framework-4, ef-code-first, lazy-loading

我有一堂课：

```
class Client
{
  public string Name {get;set;}

  public virtual A{get;set;}

  public virtual B{get;set;}
} 
```

我正在填充`A`和`B`这样的属性：

```
public Client GetById(Guid id)
{
    using (DataContext context = new DataContext())
    {
        context.Configuration.LazyLoadingEnabled = true;
        var query = context.Clients.Include("A");
        query = query.Include("B");
        return query.FirstOrDefault(r => r.Id == id);
    }
} 
```

上下文继承自`System.Data.Entity.DbContext`

如果我要重命名`A`，或者`B`我将不得不`Include("A")`手动更改它。不好...

请让我知道是否有另一种方便的方法来填充此属性？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:35:37.620

```
context.Clients.Include(x => x.A).Include(x => x.B) 
```

通过这种方式，智能感知至少会拾取重命名。

# javascript - Javascript变量等于json数据文件

> ID：15658882
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:32:41.193
> 
> 标签：javascript, jquery, json

我有一个简单的 javascript 文件 javascriptvar.js，它在该文件中包含一个 json，如下所示：

```
 var ajavascriptjsonvariable = {   
            id: "someid",
            name: "somerandomname",
           data: {},
           children: []       
       }; 
```

我想要做的是简单地使 var ajavascriptjsonvariable 等于存储 json 的文本文件。所以我创建了一个名为“data.json”的文件，里面有这个：

```
 { 
              id: "someid",
              name: "somerandomname",
             data: {},
             children: []       
          } 
```

（我不确定是否需要在 data.json 的末尾使用分号？）

现在我尝试让js文件中的变量ajavascriptjsonvariable读取data.json文件，但它不会通过。这就是我所做的：

```
 $.getJSON("data.json", function(data){});
 var ajavascriptjsonvariable = data; 
```

我如何获得 ajavascriptjsonvariable = data.json 文件？

编辑，对不起，引号是一个错字，更正它们，我要问的是我认为我应该在 function(data){} 括号部分中包含一些东西，以使 jsonvariable 读取 data.json 文件，我不知道那部分，这就是我想要弄清楚的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:49:06.187

首先 JSON 不会验证它应该看起来像这样

```
{
    "id": "someid",
    "name": "somerandomname",
    "data": {},
    "children": []
} 
```

接下来，因为您在这里进行 ajax 调用，所以您必须在 ajax 回调函数中分配值

```
$.getJSON("data.json", function(data){
    var ajavascriptjsonvariable = data;
    /* Rest of the code with uses the "ajavascriptjsonvariable" variable */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:38:18.987

AJAX 是异步的，在 99% 的情况下，将值分配给您在回调函数中不使用的变量是错误的。这是你*应该*做的：

```
$.getJSON("data.json", function(data) {
    // use data here
}); 
```

显然，您*可以*分配`data`给外部范围中存在的其他一些变量，但是您不能只在`$.getJSON()`调用后使用它！您需要调用任何依赖于回调函数结果的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:46:41.353

```
var MyVariableModule = (function($){

var myJavaScriptJsonVariable = null;

var getJsonFile = function(){
    return $.getJSON("data.json").done(function(data) {
     myJavaScriptJsonVariable = $.trim(data);
    });
};

return {
      makeComparison : makeComparison 
};  
})(jQuery); 
```

# php - URL 中的空格和非拉丁字符

> ID：15658886
> 
> 赞同：0
> 
> 时间：2013-03-27T12:33:14.603
> 
> 标签：php, url, encoding, pretty-urls

我希望我的 URL 尽可能易于阅读和美观。我注意到即使是空格字符也可以在 URL 中使用。复制：`http://en.wikipedia.org/wiki/Prince of Persia`或`http://en.wikipedia.org/wiki/سنڌي`到您的借款人的地址栏，它的工作原理！

这些也有效：

```
<a href='http://en.wikipedia.org/wiki/Prince of Persia'> Foo </a>
<a href='http://en.wikipedia.org/wiki/سنڌي'> Bar </a> 
```

在 URL 中使用 AZ 以外的 Unicode 字母有多安全？我的 URL 很简单，没有任何标点符号，类似于 Wikipedia 链接。

对我来说有效或无效并不重要，我只希望它有效！

（实际上我将使用`+`而不是 ' `' 我主要关心的是 Unicode 文本）`

 `以上在所有常见浏览器中都可以轻松运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:36:11.523

这完全取决于浏览器，因为它只是一个 UI 噱头。实际使用的 URL 是经过编码的 URL，如果您尝试复制粘贴它，您会看到剪贴板中有 URL 编码的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:41:49.447

当您调用“ [http://en.wikipedia.org/wiki/Prince](http://en.wikipedia.org/wiki/Prince) of Persia”时，您的浏览器会在幕后施展魔法。空格字符转换为 %20 转义格式并发送到 Web 服务器。 [http://en.wikipedia.org/wiki/Prince%20of%20Persia](http://en.wikipedia.org/wiki/Prince%20of%20Persia)

然而，维基百科还没有返回真实页面。您的浏览器会收到带有下划线格式的重定向回复。然后您的浏览器会下载真实内容。它的维基百科服务器业务逻辑来清理可见的 url。HTTP/1.0 301 永久移动位置：[http ://en.wikipedia.org/wiki/Prince_of_Persia](http://en.wikipedia.org/wiki/Prince_of_Persia)

你只是让你的浏览器和互联网更加努力:-)

任何 unicode 字母都可以，它们在发送到 Web 浏览器之前被 %XX 转义。这是目标 Web 服务器看到的真实 url 格式。 [http://en.wikipedia.org/wiki/%D8%B3%D9%86%DA%8C%D9%8A](http://en.wikipedia.org/wiki/%D8%B3%D9%86%DA%8C%D9%8A)

它取决于 Web 服务器知道如何处理 UTF8 unicode 转义，大多数现代服务器都知道该怎么做。智能浏览器可以将 %XX 转义转换为地址栏字段中的可见字母。当您以编程方式进行 http 调用时，您需要知道转义是如何工作的。`

# meteor - Meteor/Handlebars #如果不是自动更新

> ID：15658888
> 
> 赞同：0
> 
> 时间：2013-03-27T12:33:17.267
> 
> 标签：meteor, handlebars.js

我刚刚开始使用 Meteor，我有点困惑；我不确定这是 Meteor 问题还是 Handlebars 问题。

我正在尝试创建一个嵌套菜单（一组可点击的 div，每个可切换一个由更多可点击的 div 组成的子菜单）。我希望子菜单默认隐藏，但在用户单击其父级时出现。

这就是我所拥有的：

```
Template.sidebutton.events({
    click : function() {
        this.clicked = !this.clicked;
        clickHandlers[this.label]();
    }
}) 
```

和

```
<template name = "sidebutton">
    <div class = "sidebutton" id = "sidebutton_{{label}}"><p>{{label}}</p></div>
    {{#if clicked}}
        {{#each submenus}}
            {{> submenu}}
        {{/each}}
    {{/if}}
</template> 
```

我已验证单击时会触发 onclick 功能；this.clicked 被切换并且我的点击处理程序被调用。我还验证了如果我去掉 #if 块或者我在初始页面加载时将 clicked 设置为 true 会出现子菜单。但是当我点击时子菜单没有出现。

我还需要做些什么吗？我发现的关于 Meteor 的一切似乎都暗示，如果我更改任何数据，受影响的对象会重新渲染，但似乎它们没有在这里重新渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:24:28.873

我想“点击”在你的 mongodb 数据库集合元素中，在这种情况下，你不能像你一样改变它的值。你必须这样称呼：

```
myCollection.update(_id, {clicked:!clicked}); 
```

# css - 一个div之间的div的具体浮动结构

> ID：15658893
> 
> 赞同：3
> 
> 时间：2013-03-27T12:33:30.400
> 
> 标签：css

是否可以以这种方式在 div 之间浮动 div？

![](../Images/779029993d8286e83aa7a87d33c08224.png)

编码：

```
<div class="event_month">
<div class="event1">1</div>
<div class="event2">2</div>
<div class="event3">3</div>
<div class="event4">4</div>
<div class="event5">5</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:45:50.090

[这](http://jsfiddle.net/C6fwj/3/)将是现代浏览器的 CSS 解决方案：

HTML

```
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
</ul> 
```

CSS

```
ul {
    width: 210px;
    background: chocolate;
    margin: 20px;
    padding: 0 10px 10px;
    list-style: none;
    column-count: 2;
    -moz-column-count: 2;
    -webkit-column-count: 2;
    column-width: 100px;
    -moz-column-width: 100px;
    -webkit-column-width: 100px;
    column-gap: 10px;
    -moz-column-gap: 10px;
    -webkit-column-gap: 10px;
    font-size: 0;
}

li {
    display: inline-block;
    width: 100px;
    height: 60px;
    background: beige;
    margin-top: 10px;
    font-size: 14px;
    text-align: center;
    line-height: 60px;
} 
```

注意：我认为 IE10 理解 CSS 列。

更新：[这与 divs 相同](http://jsfiddle.net/C6fwj/1/)，只是为了证明......

更新 2：如果您只是浮动包装器，Chrome (webkit) 将无法正常工作，如果您希望包装器适合，则必须为此设置宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:47:11.680

这是你要找的：

```
 HTML:
<div class="event_month outer_styling">
  <div class="float-left">
    <div class="event1">1</div>
    <div class="event2">2</div>
    <div class="event3">3</div>
  </div>
  <div class="float-left">
    <div class="event4">4</div>
    <div class="event5">5</div>
  </div>
</div> 
```

CSS：

```
.float-left {
    float: left;
} 
```

演示：http: [//jsfiddle.net/SSxWz/2/](http://jsfiddle.net/SSxWz/2/)

# h.264 - 将 MOOV atom 放在 MP4 文件的开头是否有缺点？

> ID：15658895
> 
> 赞同：25
> 
> 时间：2013-03-27T12:33:42.120
> 
> 标签：h.264, mp4, video-encoding

我看到很多关于将`moov`原子从 MP4 视频容器的末尾重新定位到开头的问题，以使视频“网络优化”或更容易流式传输。似乎大多数工具在第一次编码视频时都需要一个明确的选项来执行此操作，如果它完全可用的话。

如果将原子放在开头可以使流媒体工作更好，并且事后这样做的成本很高，那么我为什么要在结尾处使用原子对视频进行编码呢？有什么好处？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-27T12:42:05.253

在文件末尾编码 MOOV 通常是视频编码器的默认操作，因为它们倾向于通过一次性写入输出文件来操作，而 MOOV atom 的确切内容和大小只有在写入音频后才能知道和视频数据，因为它包含绝对文件大小。

FFmpeg 允许您进行第二次传递并将原子移动到开头`-movflags +faststart`。

在末尾添加 MOOV atom 并没有什么特别的好处，只是在本地播放情况下并不那么不方便，因为在播放前在文件结尾处查找并不像渐进式下载交付那样昂贵。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T12:38:46.770

您总是希望将索引信息放在文件的开头，除了唯一的一个之外，此布局没有任何隐藏成本：在进行捕获/转码时，您可能无法提前知道该 MOOV 需要多少空间atom 开始时，它的数据也还不是很好。因此，您通常将有效负载直接写入文件，然后他们通过添加 MOOV 并更新文件的其余部分来完成写入。

# java - Websphere 管理工具应用程序

> ID：15658898
> 
> 赞同：1
> 
> 时间：2013-03-27T12:33:49.650
> 
> 标签：java, websphere, administration

我正在尝试为 websphere 创建一个简单的管理客户端应用程序：

我的代码：

> 属性 connectProps = new Properties(); connectProps.setProperty(AdminClient.CONNECTOR_TYPE, AdminClient.CONNECTOR_TYPE_SOAP); connectProps.setProperty(AdminClient.CONNECTOR_SECURITY_ENABLED, "true");
> 
> connectProps.setProperty(AdminClient.CONNECTOR_HOST, "XXXXX"); connectProps.setProperty(AdminClient.CONNECTOR_PORT, "8879"); connectProps.setProperty(AdminClient.USERNAME, "admin"); connectProps.setProperty(AdminClient.PASSWORD, "admin"); connectProps.setProperty("javax.net.ssl.trustStore","C:\Users\DummyClientTrustFile.jks"); connectProps.setProperty("javax.net.ssl.keyStore", "C:\Users\DummyClientKeyFile.jks"); connectProps.setProperty("javax.net.ssl.trustStorePassword", "admin"); connectProps.setProperty("javax.net.ssl.keyStorePassword", "admin");
> 
> AdminClient adminClient = null; 尝试 { adminClient = AdminClientFactory.createAdminClient(connectProps); } catch (ConnectorException e) { System.out.println("创建管理客户端的异常：" + e);
> 
> ```
>  e.printStackTrace(); } 
> ```
> 
> }

我收到的错误消息：

> com.ibm.websphere.management.exception.ConnectorException: ADMC0016E: 系统无法创建 SOAP 连接器以连接到端口 8879 处的主机 xxxx。在 com.ibm.websphere.management.AdminClientFactory.createAdminClientPriviled(AdminClientFactory.java:635)在 com.ibm.websphere.management.AdminClientFactory.access$000(AdminClientFactory.java:127) 在 com.ibm.websphere.management.AdminClientFactory$1.run(AdminClientFact ory.java:210) 在 com.ibm.ws.security .util.AccessController.doPrivileged(AccessController.java:63) at com.ibm.websphere.management.AdminClientFactory.createAdminClient(Adm inClientFactory.java:206) at TryConnection1.main(TryConnection1.java:42) 原因：java。 sun.reflect.NativeConstructorAccessorImpl 处的 lang.reflect.InvocationTargetException。newInstance0（本机方法）
> 
> ```
>  at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
> 
>     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Sou 
> ```
> 
> rce) at java.lang.reflect.Constructor.newInstance(Unknown Source) at com.ibm.websphere.management.AdminClientFactory.createAdminClientPriviled(AdminClientFactory.java:457) ... 5 更多原因：java.lang.NoSuchMethodError： org.apache.soap.rpc.Call.WASinvoke(Ljava /net/URL;Ljava/lang/String;)Lorg/apache/soap/rpc/Response; 在 com.ibm.ws.management.connector.soap.SOAPConnectorClient$4.run(SOAPCon nnectorClient.java:373) 在 com.ibm.ws.security.util.AccessController.doPrivileged(AccessControll er.java:118) 在 com。 ibm.ws.management.connector.soap.SOAPConnectorClient.reconnect(SO APConnectorClient.java:366) 在 com.ibm.ws.management.connector.soap.SOAPConnectorClient.(SOAPC onnectorClient.java:222) ... 10 更多 - --- 开始回溯嵌套异常 java.lang。
> 
> ```
>  at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
> 
>     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Sou 
> ```
> 
> rce) at java.lang.reflect.Constructor.newInstance(Unknown Source) at com.ibm.websphere.management.AdminClientFactory.createAdminClientPriviled(AdminClientFactory.java:457) at com.ibm.websphere.management.AdminClientFactory.access$000( AdminClient tFactory.java:127) 在 com.ibm.websphere.management.AdminClientFactory$1.run(AdminClientFact ory.java:210) 在 com.ibm.ws.security.util.AccessController.doPrivileged(AccessControll er.java:63)在 com.ibm.websphere.management.AdminClientFactory.createAdminClient(Adm inClientFactory.java:206) 在 TryConnection1.main(TryConnection1.java:42) 引起：java.lang.NoSuchMethodError：org.apache.soap.rpc.Call。 WASinvoke(Ljava /net/URL;Ljava/lang/String;)Lorg/apache/soap/rpc/Response; 在 com.ibm.ws.management.connector.soap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:52:52.810

似乎您在类路径中混合了错误的 jars/jre。可能是 IBM adminclient jars 和 sun JRE？还是错误的 xml/soap 罐子？

我从来没有真正尝试过直接调用 adminclient jars。更好的支持方式是使用 IBM 的 wsadmin.sh 脚本并通过 jython 调用 AdminClient 接口。在屏幕后面，这也将执行您在 java 中所做的事情，因此您可以对该脚本进行逆向工程，以查看哪些 jre 和哪些 jars 实际用于使魔术工作。

有关 wsadmin 的 websphere v6.1 文档，请参阅[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/topic/com.ibm.websphere.base.doc/info/aes/ae/rxml_commandline.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/topic/com.ibm.websphere.base.doc/info/aes/ae/rxml_commandline.html)。

# javascript - Angular.js 教程使用 Node.js 网络服务器

> ID：15658899
> 
> 赞同：7
> 
> 时间：2013-03-27T12:33:54.233
> 
> 标签：javascript, git, node.js, angularjs

我正在尝试通过[Angular.js Tutrorial_00](http://docs.angularjs.org/tutorial/step_00)并且似乎无法弄清楚如何让 node.js Web 服务器运行演示应用程序？

有没有人完成本教程或知道如何正确使用此步骤来使服务器正常工作？

1.  对于 node.js 用户：在单独的终端选项卡或窗口中，运行`node scripts\web-server.js`以启动 Web 服务器。打开浏览器窗口
2.  应用程序并导航到`http://localhost:8000/app/index.html`

发生的情况是我在 node.js 中运行第 1 步，然后它输出“...”，我认为这意味着它正在监听。

然后，当我进入第 2 步时，我在浏览器中输入并显示“糟糕！Google Chrome 无法连接到”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T12:59:35.343

`node scripts\web-server.js`是一个命令行，而不是一段 JavaScript。

在 shell（在 Windows 上可能意味着 PowerShell）中运行它，同时确保您位于正确的目录中。不要尝试在节点 REPL 中运行它。

# android - Android 2.3.3 AVD 上的 opengl-es 1.1 或 2.0？

> ID：15658903
> 
> 赞同：1
> 
> 时间：2013-03-27T12:34:05.170
> 
> 标签：android, opengl-es, android-emulator, avd

您是否能够在 Android 2.3.3 AVD 上运行使用 opengl-es 1.1 或 2.0 的 apk？还是模拟器不模拟 2.3.3 设备的 opengl-es 1.1 +？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:37:30.640

Open GL 不会在 Android 模拟器上运行。你需要实际的设备来运行它。

# scriptella - 处理来自查询的空结果集

> ID：15658905
> 
> 赞同：1
> 
> 时间：2013-03-27T12:34:17.997
> 
> 标签：scriptella

我有两个结构相同的数据库，我想比较数据库之间的记录。第二个数据库中的记录是从第一个数据库中复制的，但是复制过程有时不起作用，并且在一个表中的第一个数据库中，我的记录比第二个数据库中的同一个表中的记录多。所以我想知道第二个数据库中不存在第一个数据库中的哪些记录。我试过这样的东西：

```
<etl>
<connection id="db1" driver="auto"
    url="jdbc:mysql://localhost:3306/db" user="user"
    password="xxx"
    classpath="C:/mysql-connector-java-5.1.20.jar" />
<connection id="db2" driver="auto"
    url="jdbc:mysql://localhost:3307/db" user="user"
    password="xxx"
    classpath="C:/mysql-connector-java-5.1.20.jar" />
<connection id="text" driver="text" />
<query connection-id="db1">
    SELECT * FROM table;
    <query connection-id="db2">
        SELECT * FROM table WHERE id = '$id';
        <script connection-id="text">
            sometext, $rownum
        </script>
    </query>
</query>
</etl> 
```

问题是，当对 db2 的查询结果为空时，不会执行脚本。

如何解决这个问题呢？

问候， 雅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:37:05.480

您可以使用 count 来检查实际记录数。在这种情况下，结果集将始终返回一行。例子：

```
<query connection-id="db1">
    SELECT * FROM table;
    <query connection-id="db2">
        SELECT count(id) as CNT FROM table WHERE id = ?id;
        <!-- The script is executed ONLY IF number of results is zero -->
        <script connection-id="text" if="CNT==0">
            No matching record for id $id
        </script>
    </query>
</query> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:59:45.613

可能他不需要 if 条件，因为他的问题是脚本没有执行；）

# c# - DateTime.TryParseExact CultureInfo.InvariantCulture

> ID：15658909
> 
> 赞同：5
> 
> 时间：2013-03-27T12:34:28.903
> 
> 标签：c#, c#-4.0

谁能看到我做错了什么，我正在尝试解析日期以确保其有效日期，如果是这样将其转换为我需要的格式。

我尝试了不同的方法来做到这一点，但都返回`01/01/0001 00:00:00`。

字符串的值`parseArrivalDate`=`02/02/2013`

```
DateTime ukDateFormat;
string ukFormat = "0:ddd, MMM d, yyyy";    
DateTime.TryParseExact(parseArrivalDate, ukFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out ukDateFormat);    
DateTime test = ukDateFormat; 
```

- - - - - - - - - - - - - - - - - - -编辑 - - - - - - ------------------

好的对不起，我没有很好地解释它。如果我输入英国格式，比如 27/02/2013，当我将英国格式设置为 dd/MM/yyyy 时它工作正常，问题是当我输入美国或任何其他格式时，它返回的日期不正确，所以我是改变格式轮思维是问题所在。

阅读您的评论后，我现在恍然大悟，我的 uk 格式第一次正确，所以我的问题是，如何更改代码，以便可以正确解析任何日期格式。

希望这更有意义谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T14:59:00.573

你的字符串

```
"0:ddd, MMM d, yyyy" 
```

有一个数字`0`、一个冒号`:`和一个对应于的格式

```
"Wed, Mar 27, 2013" 
```

例如，如果文化是`"en-GB"`（“英语（英国）”）。它可能来自一个或类似的方法调用`String.Format`，`Console.WriteLine`它被放在大括号`{}`中以格式化文本，如

```
Console.WriteLine("The date {0:ddd, MMM d, yyyy} was selected.", someDateTime); 
```

它可以使用如下代码：

```
string arrivalDateString = "Wed, Mar 27, 2013";

...

DateTime result;
string yourFormat = "ddd, MMM d, yyyy";    // no "0:" part
bool isOK = DateTime.TryParseExact(arrivalDateString, yourFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out result);    
if (isOK)
{
    // Worked! Answer is in 'result' variable
}
else
{
    // Didn't work! 'result' variable holds midnight 1 January 0001
} 
```

* * *

对应的格式`"27/03/2013"`是`"dd/MM/yyyy"`（或`"d/M/yyyy"`）。对应的格式`"03/27/2013"`是`"MM/dd/yyyy"`（或`"M/d/yyyy"`）。

不可能有一种方法可以处理两种日期样式，因为像这样的字符串

```
"01/04/2013"   /* ambiguous */ 
```

可能意味着

*   2013 年 4 月 1 日
*   2013 年 1 月 4 日

所以它是模棱两可的，我们无法判断日期是什么意思。另请参阅[Wikipedia：日历日期 → 日期格式](http://en.wikipedia.org/wiki/Calendar_date#Date_format)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:37:48.193

您提供的格式看起来有点奇怪。尝试用这个替换它

```
string ukFormat = "dd/MM/yyyy"; 
```

并阅读有关此的[文档](http://msdn.microsoft.com/en-us/library/ms131044.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:36:34.467

您的日期字符串是：`02/02/2013`并且您使用的格式是错误的，如果是月份`"0:ddd, MMM d, yyyy"`，则应该是。`MM/dd/yyyy`

```
DateTime ukDateFormat;
string ukFormat = "MM/dd/yyyy";    
DateTime.TryParseExact(parseArrivalDate, ukFormat,CultureInfo.InvariantCulture,DateTimeStyles.None, out ukDateFormat);    
 DateTime test = ukDateFormat; 
```

如果您指定的日期首先包含天，然后是月，则使用格式`"dd/MM/yyyy"`，顺便说一下，您可以使用单位`d`和`M`两位数的日/月。

目前您正在获得`DateTime.MinValue`, 因为格式无效导致解析失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T12:37:16.420

我不知道您的期望，但是您的输入字符串不符合您的`ukFormat`模式！所以这是完全正确的行为。

改变你的模式，`""dd/MM/yyyy""`使`TryParseExact`工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:02:29.503

感谢大家帮助我了解我哪里出错了，下面的代码是我想出的，虽然并不完美，因为 03/06/2013 UK 与 03/06/2013 US 的含义不同。

我在文本框上方添加了文本，要求人们使用 dd/mm/yyyy 格式。

```
string getArrivalDate   = ArrivalDate;
                    string getDepartureDate = DepartureDate;

                    string dteFormat        = "dd/MM/yyyy";
                    DateTime result;
                    string arrivalDateParse;
                    string departureDateParse;

                    bool arrival = DateTime.TryParseExact(getArrivalDate, dteFormat, new CultureInfo("en-GB"), DateTimeStyles.None, out result);
                    if (arrival)
                        {
                        arrivalDateParse = getArrivalDate;
                        }
                    else
                        {
                        arrivalDateParse = "notvalid";
                        }

                    bool depart = DateTime.TryParseExact(getDepartureDate, dteFormat, new CultureInfo("en-GB"), DateTimeStyles.None, out result);
                    if (depart)
                        {
                        departureDateParse = getDepartureDate;
                        }
                    else
                        {
                        departureDateParse = "notvalid";
                        }

                    if (arrivalDateParse == "notvalid" || departureDateParse == "notvalid")
                        {
                        if (Request.IsAjaxRequest())
                            {
                            return Json(new { Confirm = "Date not in correct format" }, JsonRequestBehavior.AllowGet);
                            }
                        else
                            {
                            TempData["Error"] = "Sorry your arrival date or departure date is not a valid format, please enter date as dd/mm/yyyy example 02/12/2013";

                            return View("~/Views/Shared/Error.cshtml");
                            } 
```

如果有人可以改进代码，将不胜感激。

谢谢

乔治

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-22T23:12:11.147

与其使用 InvariantCulture ，不如考虑使用 RoundTrip 样式 (ISO-8601)。请参阅此 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/bb882584.aspx](http://msdn.microsoft.com/en-us/library/bb882584.aspx)

# c - 用于迭代结构成员的宏

> ID：15658916
> 
> 赞同：1
> 
> 时间：2013-03-27T12:34:44.357
> 
> 标签：c, macros, bit-fields

我使用位字段的结构来访问像素中的每个颜色通道，问题是我经常有代码以相同的方式应用于每个通道，但是因为我不能只在 CI 端迭代结构的成员每个成员最多有 3 个相同代码的副本，或者更不方便的是必须使用 switch-case 语句。

我认为如果我可以使用宏以便我可以通过提供一个数字来访问成员会更优雅，理想情况下是一个可以使 .CHAN(i) 变为 .r、.g 或 .b 的宏，具体取决于整数变量 i 包含 0、1 或 2。除了我不知道如何制作这样的宏，或者即使这可能。

一个细节，但每个成员都是 12 位，而不是预期的 8 位，所以我不能只是将它变成一个数组或有一个带有指针的联合。X-Macros 也不会这样做，因为我经常需要对每个通道做很多事情，然后再对另一个通道做同样的事情，换句话说，用于遍历每个成员的 for 循环可以包含更多的内容，而不仅仅是一行。

编辑：这是一些代码，首先是结构：

```
typedef struct
{
    uint32_t b:12;
    uint32_t g:12;
    uint32_t r:12;
    uint32_t a:12;
} lrgb_t; 
```

现在是我的问题在代码中的示例：

```
for (ic=0; ic<3; ic++)
{
    for (i=0; i<curvecount; i++)
    {
        curve[i].p0.x = (double) i;
        curve[i].p3.x = (double) i+1.;

        switch (ic)     // this is what I'm trying to eliminate
        {
            case 0:
                curve[i].p0.y = pancol[i].r / 4095.;
                curve[i].p3.y = pancol[i+1].r / 4095.;
                break;
            case 1:
                curve[i].p0.y = pancol[i].g / 4095.;
                curve[i].p3.y = pancol[i+1].g / 4095.;
                break;
            case 2:
                curve[i].p0.y = pancol[i].b / 4095.;
                curve[i].p3.y = pancol[i+1].b / 4095.;
                break;
        }
        // Ideally this would be replaced by something like this, CHAN() being an hypothetical macro
        // curve[i].p0.y = pancol[i].CHAN(ic) / 4095.;
        // curve[i].p3.y = pancol[i+1].CHAN(ic) / 4095.;
    }

    ... // more stuff that ultimately results in a bunch of pixels being written, channel after channel
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:36:40.910

*正如评论中所指出的，这并不能真正解决 OP 的问题，因为他的结构上的成员是不与数组对齐的位域。不过，我会在这里保留答案，希望它仍然对某人有用。*

我认为a`union`是你想要的。您可以编写结构，例如

```
union
{
   struct
   {
       float r;
       float g;
       float b;
   }rgb;
   float channel[3];
} color; 
```

这样，结构将与 float[3] 在内存中的相同位置，并且您可以有效地访问相同的成员作为结构成员或数组中的元素。

您可能需要查找确切的语法，但您明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:41:17.487

一种可能是将重复的代码包装到一个函数中，然后为每个通道调用它：

```
typedef struct {
  int r:12;
  int g:12;
  int b:12;
} Pixel;

int inc(int val) {
  return val + 1;
}

int main(void) {
  Pixel p = {0, 0, 0};
  p.r = inc(p.r);
  p.g = inc(p.g);
  p.b = inc(p.b);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:56:13.983

阅读您添加的代码后，我对建议的宏进行了一些更改

```
#define CHAN(ic) \
(ic == 1) ? curve[i].p0.y = pancol[i].r / 4095; curve[i].p3.y = pancol[i+1].r / 4095; : \
(ic == 2) ? curve[i].p0.y = pancol[i].g / 4095; curve[i].p3.y = pancol[i+1].g / 4095; : \
curve[i].p0.y = pancol[i].b / 4095; curve[i].p3.y = pancol[i+1].b / 4095; 
```

宏 CHAN(ic) 将评估 'ic' 以确定要操作的成员。如果 'ic' 为 1，则成员 '.r' 将被操纵，如果 'ic' 为 2，则 '.g' 将被操纵，如果 'ic' 既不是 1 也不是 2，则将操纵 '.b' 因为在这个假设中，您必须确保正确设置了“ic”，否则您可能会使用 panco[i].b 和 pancol[i+1].b 的值。您的代码应如下所示，但您很可能需要稍微调整宏，如果您有任何问题，请告诉我。

```
//#define CHAN(ic) here

for (ic=0; ic<3; ic++)
{
  for (i=0; i<curvecount; i++)
  {
     curve[i].p0.x = (double) i;
     curve[i].p3.x = (double) i+1.;
     CHAN(ic)
  }
  ... // more stuff that ultimately results in a bunch of pixels being written, channel after channel
} 
```

另请注意，我的宏将与您的开关盒完全一样。唯一的区别是它是在宏中定义的，我试图说明的是开关盒和宏之间的区别纯粹是视觉上的。

# jquery - 键入 jQuery 时在输入中激活 keyup

> ID：15658917
> 
> 赞同：0
> 
> 时间：2013-03-27T12:34:47.107
> 
> 标签：jquery, keyup, livequery

我有一个文本输入，使用 .keyup 在 ajax 负载上激活 .livequery。问题是，用户必须在框外单击才能激活 keyup 功能。打字时是否可以模拟按键功能？

这是我所拥有的：

```
 $('.input-mini').keyup().livequery('change', function () {
                url = $(this.form).attr('action');
                data = $(this.form).serialize();
                $.post(url, data, function () {
                        $('#checkout').load('/store/checkout_table');
                        $('#checkout_form').attr('action', url);

            $.cookie('all_cookie', null);

                });
                return false;
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:36:31.157

尝试这个

```
$('.input-mini').keyup(function(){
  $(this).livequery('change', function () {
  ....
}) 
```

# entity-framework - 如何使用虚假数据上下文进行 Specflow 测试

> ID：15658919
> 
> 赞同：0
> 
> 时间：2013-03-27T12:34:53.483
> 
> 标签：entity-framework, unit-testing, functional-testing, specflow

我正在编写 specflow 测试，我想从内存数据库中运行，以使测试运行得更快并更好地控制我的数据。

当前：对数据上下文使用工作单元生命周期 [http://blog.stevensanderson.com/2007/11/29/linq-to-sql-the-multi-tier-story/](http://blog.stevensanderson.com/2007/11/29/linq-to-sql-the-multi-tier-story/)

使用类似于以下设置的假上下文： [http ://refactorthis.wordpress.com/2011/05/31/mock-faking-dbcontext-in-entity-framework-4-1-with-a-generic-repository/](http://refactorthis.wordpress.com/2011/05/31/mock-faking-dbcontext-in-entity-framework-4-1-with-a-generic-repository/)

如何在 Specflow 中使用这个假上下文？我似乎无法从 Specflow 访问当前的 dbcontext 单例，所以我不能只在那里设置假数据上下文并让它影响正在运行的测试。

我可以以某种方式告诉我的网站我正在 specflow 中进行测试并在那种情况下使用 fakecontext 吗？我应该使用按钮按下或 url 参数还是我可以做其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:46:48.377

> 如何在 Specflow 中使用这个假上下文？我似乎无法从 Specflow 访问当前的 dbcontext 单例，所以我不能只在那里设置假数据上下文并让它影响正在运行的测试。

由于您实际上并没有说出您的错误是什么，因此我将大胆猜测它`internal static class FakeContext`是在与您的 SpecFlow 测试声明的程序集不同的程序集中声明的。如果是这种情况，那么您需要添加

```
[assembly:InternalsVisibleTo("MyApplication.SpecFlowTests")] //name of the test assembly 
```

到包含`FakeContext`.

或者将类声明为`public`.

> 我可以以某种方式告诉我的网站我正在 specflow 中进行测试并在那种情况下使用 fakecontext 吗？我应该使用按钮按下或 url 参数还是我可以做其他事情？

您可以告诉网站您正在对其进行测试，但如果某些恶意人员在生产中发现了执行此操作的顺序，那么您将遇到问题。

由于您正在谈论模拟您的数据库和测试网站，那么我将假设您正在使用 ATDD（请参阅[Development_style](http://en.wikipedia.org/wiki/Test-driven_development#Development_style)的最后一段），那么更好的方法是在您启动您的网站的同时自动托管您的网站以自动方式浏览器（通常通过 Selenium）。通过这种方式，您可以控制您的网站如何选择其数据库，而无需将该功能暴露给整个世界。

# ios - 当 UISearchBar 的第一个响应者更改控制器时将文本设置为很奇怪

> ID：15658920
> 
> 赞同：0
> 
> 时间：2013-03-27T12:34:57.210
> 
> 标签：ios, uitextfield, uisearchbar, settext, becomefirstresponder

在我的应用程序中，我`UITextField`看到了 VC1( `UIViewController`)。当我更改文本字段中的文本时，我`UISearchBar`在其视图中调用另一个控制器 VC2 的推送。推送即时消息后，将`UISearchBar`文本分配给 VC1 的文本字段文本。

在 xib 我的文本字段已经有一些文本“测试字符串”。

当我在 VC1 文本字段中附加任何字符时 - VC2 推送和搜索栏上的文本是正常的。

但是当我在 iPhone 键盘上按下退格键时 - VC2 被按下并且搜索字段上的文本开始逐个删除字符，而整个字符串没有被清空。它发生是因为委托方法递归调用。

如何解决这种行为`UISearchBar`？当 VC2 出现时，我必须在打开键盘的情况下激活搜索栏！是主要条件。当然，如果我将`[self.searchBar becomeFirstResponder]`全部删除将正常工作。

这里有一些代码：

```
@implementation ViewController1

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range  replacementString:(NSString *)string
{
NSString * resultString = [textField.text stringByReplacingCharactersInRange:range withString:string];
ViewController2 * vc2 = [ViewController2 new];
[self.navigationController pushViewController:vc2 animated:YES];
[vc2 loadText: resultString];
return NO;
}

@end

@implementation ViewController2

- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.searchBar becomeFirstResponder];
}

- (void) loadText: (NSString *) text
{
    self.searchBar.text = text;
}

@end 
```

问题示例源码：http: [//yadi.sk/d/NJmTLot73_vrE](http://yadi.sk/d/NJmTLot73_vrE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T11:36:19.533

我在 iOS 7 上遇到了奇怪的 UISearchBar 动画。通过将 becomeFirstResponder 调用放入 viewDidAppear 并延迟 0.1 解决了这个问题。

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [self.searchBar performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0.1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:49:37.410

我浏览了代码，出于某种原因，删除/退格键被 UIKeyboard 的辅助功能函数反复调用。我还没有找到原因，但一种解决方法是将`[self.searchBar becomeFirstResponder];`线路放入`viewDidAppear`而不是`viewWillAppear`- 这是一个可以接受的解决方法吗？键盘动画略有不同，但我不确定您的需求对此有多敏感。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T12:41:48.537

您的代码中有一个递归调用。

```
self.searchBar.text = text; 
```

呼吁

```
textField:shouldChangeCharactersInRange: 
```

这反过来又要求

```
loadText: 
```

您可以做的是从 searchBar uitextfield 中删除委托，设置文本，然后返回委托。像这样的东西：

```
- (void) loadText: (NSString *) text
{
    self.searchBar.delegate = nil;
    self.searchBar.text = text;
    self.searchBar.delegate = vc1;
} 
```

# javascript - LinkedIn API 示例实现不起作用

> ID：15658923
> 
> 赞同：2
> 
> 时间：2013-03-27T12:35:23.257
> 
> 标签：javascript, html, linkedin

我试图让这段特定的代码工作。它在开发人员控制台中运行良好，但在我的计算机上以 html 文件尝试时失败。它在弹出窗口中给我一个错误，上面写着 [object Object]。真的可以在这里使用一些帮助。我不知道为什么代码进入错误处理程序，而它在 LinkedIn 的开发人员控制台中运行良好。

谢谢！

```
<html>
<head>
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
api_key: my_actual_key
authorize: false
credentials_cookie: true
credentials_cookie_crc: true
onLoad: onLinkedInLoad

</script>
</head>
<body>
<p>This example demonstrates the use of a login button to control what's displayed. It also demonstrates how to use the LinkedIn auth events in a user flow.</p>

<div id="loginbadge">
<p>Login badge renders here if the current user is authorized.</p>
</div>
<!-- NOTE: be sure to set onLoad: onLinkedInLoad -->
<script type="text/javascript">
function onLinkedInLoad() {
IN.Event.on(IN, "auth", function() {onLinkedInLogin();});
IN.Event.on(IN, "logout", function() {onLinkedInLogout();});
}

function onLinkedInLogout() {
setLoginBadge(false);
}

function onLinkedInLogin() {
// we pass field selectors as a single parameter (array of strings)
IN.API.Connections("me")
.fields(["id", "firstName", "lastName", "pictureUrl", "publicProfileUrl"])
.result(function(result) {
setLoginBadge(result.values[0]);
})
.error(function(err) {
alert(err);
});
}

function setLoginBadge(profile) {
if (!profile) {
profHTML = "<p>You are not logged in</p>";
}
else {
var pictureUrl = profile.pictureUrl || "http://static02.linkedin.com/scds/common/u/img/icon/icon_no_photo_80x80.png";
profHTML = "<p><a href=\"" + profile.publicProfileUrl + "\">";
profHTML = profHTML + "<img align=\"baseline\" src=\"" + pictureUrl + "\"></a>";
profHTML = profHTML + "&nbsp; Welcome <a href=\"" + profile.publicProfileUrl + "\">";
profHTML = profHTML + profile.firstName + " " + profile.lastName + "</a>! <a href=\"#\" onclick=\"IN.User.logout(); return false;\">logout</a></p>";
}
document.getElementById("loginbadge").innerHTML = profHTML;
}
</script>

<!-- need to be logged in to use; if not, offer a login button -->
<script type="IN/Login"></script>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T00:59:56.880

尝试更换

```
IN.API.Connections("me") 
```

和

```
IN.API.Profile("me") 
```

# python - 使用没有四舍五入、两位小数和千位分隔符的货币的通用方法

> ID：15658925
> 
> 赞同：4
> 
> 时间：2013-03-27T12:35:28.340
> 
> 标签：python, python-2.7, currency-formatting

我是一个学习 python (2.7.3) 的新手，并且得到了一个简单的计算成本的练习，但很快就对真正能够控制或理解正在产生的结果的“精确性”产生了兴趣。如果我在我的计算机上使用计算器，我会得到我认为我想要的结果（即它们看起来非常具体），但如果我使用 python，我似乎必须非常准确地了解如何将格式信息添加到正在使用的值中，并且打印。

我的问题的简短版本是：

每当我使用返回的货币时，是否有一个简单的解决方案可以使用：

*   小数点右边两位小数
*   不进行四舍五入（即基本上只是“截断”小数点后第二位右侧的任何内容）
*   如有必要，添加千位分隔符

如果有人想运行它来查看结果和变化，我一直在使用解释器（见下面的代码）测试变化。

谢谢你。

```
# basic entry - both are seen as integers
print 'A:  ', 7/3

# test by printing out the types
print 'B:  ', type(7)
print 'C:  ', type(3)

# this is not necessary as they are already integers
print 'D:  ', int(7/3)

# converts the result of 7/3 into a floating number
print 'E:  ', float(7/3)

# defines the float version of 7 by the float version of 3
print 'F:  ', float(7) / float(3)

# coverts the results of the above into a string and assigns to variable
string_var = str(float(7) / float(3))

# print the string
print 'G:  ', string_var

# prints 4 characters of the string, but returns two decimal places
print 'H:  ', string_var[:4]

string_var = str(25.8545678888)

# prints 5 characters of the string, but returns two decimal places
print 'I:  ',string_var[:5]

# import the locale module
import locale
# sets to user's default settings (don't know what empty quotes are)
locale.setlocale( locale.LC_ALL, '' )

#set an arbitrary float number to a variable
float_var = 25.859

# apply locale.currency formatting
print 'J:  ',locale.currency(float_var)

# import the decimal module
from decimal import *

# the decimal version of the variable
print 'K:  ',Decimal(float_var)

# divide the decimal version by 2
print 'L:  ',Decimal(float_var) / 2

# divide the decimal version by the decimal verson of 2
print 'M:  ', Decimal(float_var) / Decimal(2)

# change decimal precision to 6
getcontext().prec = 6

# note there is no change in this value as precision only applied to
# result of calculations, see
#http://stackoverflow.com/questions/6483440/python-decimal-precision
print 'N:  ', Decimal(float_var)

# the following equation returns decimal precision to 6 (6 characters displayed)
print 'O:  ', Decimal(float_var) / 2

# example of 6 characters printed, not decimal places
# to the right of the decimal
print 'P:  ', Decimal(55550) / 130

# if you want to control places to the right of the decimal
# displayed without rounding and show thousand separators if
# necessary ? 
```

**编辑：**

感谢大家的回复，这是我采用的解决方案，它是所有回复的混合：

```
def make_it_money(number):
    """
    always:
    - shows 2 decimal places
    - shows thousands separator if necessary
    - retains integrity of original var for later re-use
    - allows for concise calling
    """
    import math
    return '$' + str(format(math.floor(number * 100) / 100, ',.2f'))

# tests

var1 = 25.867
var2 = 25.864
var3 = 25.865
var4 = 2500.7869

print make_it_money(var1)
print make_it_money(var2)
print make_it_money(var3)
print make_it_money(var4) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T14:42:17.007

使用[`format()`函数](http://docs.python.org/2/library/functions.html#format)来格式化`float`或输入`Decimal`：

```
format(value, ',.2f') 
```

这导致：

```
>>> format(12345.678, ',.2f')
'12,345.68' 
```

在`,`输出中添加一个逗号作为千位分隔符。

您通常*不*希望在浮点或`Decimal` 计算之后不加选择地向下舍入。如果您觉得无论如何*都*必须这样做，请在格式化之前明确地这样做：

```
>>> import math
>>> format(math.floor(12345.678 * 100) / 100, ',.2f')
'12,345.67' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:17:14.297

Python 从 C 继承了很多，因此您可以使用`print %.2f`语法来打印逗号后只有 2 个值的浮点数，这将对值进行四舍五入。

千位分隔符似乎也很容易，看看这个问题/答案：

[https://stackoverflow.com/a/5513747/1093485](https://stackoverflow.com/a/5513747/1093485)

您还可以导入现有模块，例如 python-money ( [https://pypi.python.org/pypi/python-money](https://pypi.python.org/pypi/python-money) )

# windows-8 - 应用内购买 Windows 8 恢复

> ID：15658930
> 
> 赞同：0
> 
> 时间：2013-03-27T12:35:46.497
> 
> 标签：windows-8, in-app-purchase, restore, recover, winrt-async

我正在为 Windows 8 - Metro 开发，想知道在重新安装应用程序后如何恢复或恢复我的购买。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T21:14:25.423

我遇到过同样的问题。我的应用内购买（删除广告）已通过新安装的应用恢复。尝试重新安装。

简

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:43:44.957

服务器记录用户在商店中购买的所有物品。最终用户可以打开应用商店应用并按 Windows+Z 打开应用栏。有一个名为“您的应用程序”的顶部应用程序栏菜单项。单击它，您可以看到您购买的应用程序（如果需要，从下拉列表中选择“所有应用程序”）。重新安装应用程序，并验证应用内购买是否仍处于启用状态。

# openstack - 从 devstack 脚本安装后从系统中完全删除 openstack

> ID：15658932
> 
> 赞同：4
> 
> 时间：2013-03-27T12:35:56.960
> 
> 标签：openstack, devstack

我通过[这个](http://devstack.org/guides/single-machine.html)链接在我的本地机器上安装 OpenStack。但是我无法从本地机器上完全删除已安装的组件。我运行了以下命令：-

```
$ sudo ./unstack.sh
tgtadm: can't send the request to the tgt daemon, Transport endpoint is not connected
tgtd seems to be in a bad state, restarting...
stop: Unknown instance: 
tgt start/running, process 14629
tgt stop/waiting
Volume group "stack-volumes" not found
Skipping volume group stack-volumes 
```

并且文件仍然存在于 /opt/stack 和 /usr/local/bin/ 中。但是手动删除这些文件不是一个好的选择。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-12-04T15:11:58.120

unstack.sh**脚本**仅停止服务而不删除它们。Devstack 的文件夹包含一个**clean.sh**脚本，它删除了 openstack 和依赖项，因此您可以运行如下内容：

```
cd path/to/devstack

# There's no need to call unstack.sh explicitly
# clean.sh invokes that script itself.
./clean.sh 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-06T07:39:12.510

请遵循以下 3 个步骤：

1.  `./clean.sh`
2.  `rm -rf /opt/stack`
3.  `rm -rf /usr/local/bin`（小心，这将删除安装到本地 bin 文件夹中的所有内容，其中可能包括以前安装的应用程序）。

有关所有受影响文件和目录的更多信息，请访问[此链接](https://www.berrange.com/posts/2012/11/20/what-devstack-does-to-your-host-when-setting-up-openstack-on-fedora-17/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T18:12:57.220

unstack 不会清除 /opt/stack。或清除所有依赖包。或从蟒蛇中清除所有鸡蛋。

我建议在 VM 中运行 devstack。简单地移除虚拟机并从头开始重建是很容易的。

为 kvm 创建 devstack VM 的示例 shell 脚本：

```
#!/bin/sh

/usr/bin/vmbuilder kvm ubuntu -v --suite=oneiric --libvirt=qemu:///system --flavour=server --arch=amd64 --cpus=2 --mem=4096 --swapsize=2048 --rootsize=30480 --ip=192.168.122.236 --hostname=devstack --user=stack --name=stack --pass=stack --addpkg=git --addpkg=screen --addpkg=vim --addpkg=strace --addpkg=lsof --addpkg=nmap --addpkg=subversion --addpkg=acpid --addpkg=tcpdump --addpkg=python-pip --addpkg=wget --addpkg=htop --mirror=http://us.archive.ubuntu.com/ubuntu --components='main,universe' --addpkg=openssh-server --dns=8.8.8.8 --dest=/virts/devstack 
```

# javascript - 家庭作业帮助我被困在 NUMber 6 Window.prompt() 步骤

> ID：15658933
> 
> 赞同：0
> 
> 时间：2013-03-27T12:35:58.767
> 
> 标签：javascript, html

这是我的编码..我做错了什么。我在 6 号，但它不起作用 有人可以看看这个并给我一些帮助吗？谢谢

```
<html>
  <head>
    <title> My Homework </title>
  </head>
  <body>
    <div style="width:400px; height:200px" id="firstdiv">
     <br /> <br /><center>Well Hi there! <br/> Answer the prompt to see what happens next.</center>
    </div>

   <script type="text/javascript">
     var moquestion = window.prompt("What is the capital of Missouri?","");

     if (moquestion.length < 1) {
        <div style="width:400px; height:200px" id="sorrydiv">
          <br /> <br /> <h1><center>Sorry you don't feel like playing.<br />The capital of Missouri is Jefferson City</center></h1>
        </div>
      }
   </script>

  </body>
</html> 
```

下面是作业

1.  创建一个包含所有基本 HTML 标记的网页。
2.  在 中`<body>`，创建一个`<div>`带有元素 id 的标签。
3.  `<div>`在标签中插入一些文本。
4.  在此下方添加您的脚本，`<div>`以便在加载之前它不会尝试运行。
5.  使用 window.prompt 方法询问“密苏里州的首府是哪里？” 确保没有为用户显示默认答案。
6.  检查以确保返回字符串的长度属性不小于 1。如果为空，请在`<div>`标签中写入类似以下内容：“对不起，您不想玩。密苏里州的首府是杰斐逊城。”</li>
7.  如果字符串不为空，请使用 window.confirm 方法询问用户：“这是您的最终答案吗？”
8.  如果他们确认，请在标签中写入类似于以下内容的字符串：“密苏里州的首府是”+ myanswer +“。你这么说。”</li>
9.  如果他们取消，再问一次：“那么密苏里州的首府是哪里？” 这一次，写下没有错误检查的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:48:22.237

这并不意味着要编写一个新`div`标签，而是要更改您已经编写的标签的内容，即您称为“firstdiv”的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:55:46.590

您的代码的主要问题是您在 JavaScript 代码中使用 HTML 代码。

-tag 告诉您的`<script type="text/javascript">`浏览器：使用您的默认 JavaScript 引擎执行下一个块。但是 JavaScript 引擎无法渲染甚至理解 HTML 代码。

开始创建一个简单的模板：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Homework No. 6</title>
    </head>
    <body>

        <!-- place the script at the bottom to execute 
        AFTER the whole page has loaded. -->
        <script type="text/javascript">
            // create the DIV Tag and insert it
            // Answers: question 2 & 3

            // THIS IS WHERE THE HTML-ELEMENT KICKS INTO THE PAGE
            var div= document.createElement("div");
            div.innerHTML = "Lets play!";
            div.id = "questionContainer";

            // Insert the element into the body
            document.body.appendChild(div);

            var question = window.prompt("What is the capital of Missouri", "");

            // check if the question is empty
            if (question.length < 1 || typeof question === "undefined") {
                div.innerHTML = "Sorry you don't feel like playing :(";
                return;
           }
           // check if user is sure (and repeat the question if he's not.)
           if (!window.confirm("Are you sure?")) 
                question = window.prompt("What is the capital of Missouri", "");

           div.innerHTML = "The capital of Missouri is: " + question + " as you told me.";
       </script>
    <body>
</html> 
```

这应该可以解决问题。请记住：不要混合使用 JavaScript 和 HTML。

另外：查看这个 jsFiddle 以查看它的实际效果：http: [//jsfiddle.net/du4CH/](http://jsfiddle.net/du4CH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:31:07.863

第 6 点实际上是说“将其写入 div 标签”。假设这意味着您之前创建的 div，您应该查看在文档上定位 div，然后写入其 innerHTML。就像是

```
if (moquestion.length < 1) {
    document.getElementById("firstdiv").innerHTML="Sorry you don't feel like playing";
} 
```

应该做的伎俩。

# iphone - 我的 iOS 应用程序的图标在设备上看起来很模糊

> ID：15658940
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:36:17.960
> 
> 标签：iphone, ios, icons

我是 iOS 开发的新手，我正在编写我的第一个 ios 应用程序，但我在显示图标时遇到了问题。我在我的应用程序中使用的图标看起来不像其他应用程序中的图标或 Apple 默认图标那样明亮漂亮。

![在此处输入图像描述](../Images/072a377e17a419ad1648d078b35ef703.png)

在上图中，信息图标看起来很棒（它已经是 ios 信息图标）但我的星形图标很糟糕..我尝试了很多图标，所有这些都是一样的......

编辑：在 pc 上看起来很棒，但在我的 ipad 或 iphone 上却不行。

这就是我在应用程序中使用图标的方式，图标位于 Supporting Files 文件夹中...

```
UIImage* image3 = [UIImage imageNamed:@"Star.png"];
CGRect frameimg = CGRectMake(0, 0, image3.size.width, image3.size.height);
UIButton *someButton = [[UIButton alloc] initWithFrame:frameimg];
[someButton setBackgroundImage:image3 forState:UIControlStateNormal];
[someButton addTarget:self action:@selector(sendmail)
forControlEvents:UIControlEventTouchUpInside];
[someButton setShowsTouchWhenHighlighted:YES]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:50:32.207

要在具有 Retina 显示器的设备上支持高分辨率图形，请创建两个版本的图像：标准尺寸图像和名称中添加“@2x”的双倍尺寸图像：

标准尺寸：button.png 60 x 20 像素高分辨率：button@2x.png 120 x 40 像素

详情： [http ://www.idev101.com/code/User_Interface/sizes.html](http://www.idev101.com/code/User_Interface/sizes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:56:37.093

尝试在简单的 iPhone 模拟器上运行它，然后在 iPhone（Retina）模拟器上从 Hardware->device 中选择模拟器。如果你的图像在简单的 iPhone 模拟器上看起来不错，而不是在 iPhone 视网膜模拟器上，那么你应该使用双分辨率的图像，然后你目前拥有的一个

# html - 标签上带有行高的垂直和水平流

> ID：15658941
> 
> 赞同：1
> 
> 时间：2013-03-27T12:36:18.217
> 
> 标签：html, tags, vertical-alignment, css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:57:53.190

将行高设置为没有单位的小数似乎可以解决问题：

[jsFiddle](http://jsfiddle.net/4Y96b/)

```
small { font-size: 0.8125rem; line-height: 1.75; } 
```

设置`display:block`似乎也解决了这个问题，但这显然不是一个理想的解决方案。

[jsFiddle](http://jsfiddle.net/g22Vv/)

```
small { font-size: 0.8125rem; display:block; } 
```

# datetime - 在 Windows 8 中使用给定的 GMTOffset 显示当前时间

> ID：15658943
> 
> 赞同：0
> 
> 时间：2013-03-27T12:36:20.027
> 
> 标签：datetime, windows-8, timezone

我的 GMTOffset 格式为 UTC/GMT +1.00 小时。我正在 Windows 8 中创建时钟应用程序，并希望使用此 GMToffset 显示时钟当前时间。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:46:42.277

您可以创建一个转换器并格式化您的 DateTime：

```
DateTime.Now.ToString("ddd, dd MMMM yyyy HH:mm:ss zzz"); 
```

这会给你这个字符串：

```
Wed, 27 March 2013 14:33:14 +01:00 
```

转换器的源代码如下所示：

```
public class DateTimeConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, string language)
    {
        if (value is DateTime)
        {
            return ((DateTime)value).ToString("ddd, dd MMMM yyyy HH:mm:ss zzz"); 
        }
        return value
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

# jackson - Jackson - 如何序列化 javascript 函数

> ID：15658950
> 
> 赞同：2
> 
> 时间：2013-03-27T12:36:30.040
> 
> 标签：jackson

我使用 Jackson 从 Java 对象生成 JSON 格式的字符串。

生成的 JSON 字符串然后在 HTTPResponse 中发送，Highcharts 将其解释为客户端以显示图表。

一切都很好，直到我发现我需要序列化一个 JavaScript 函数。例如

```
"xAxis" : {
    events {
        setExtremes: function(event) {
            //javascript code
        }
    }
} 
```

我知道这不再是有效的 JSON，但我需要一种解决方法。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T12:47:21.780

虽然我对杰克逊一无所知，但我在 java json 库中遇到了类似的问题。

所做的是将占位符值放在我想要函数去的地方：

```
setExtremes: "SETEXTREMES_PLACEHOLDER" 
```

然后，当我将 json 对象转换为 json 字符串时，我使用所需的函数对占位符进行了字符串替换操作。

不漂亮，但它完成了工作。

# sorting - 剑道网格排序问题

> ID：15658952
> 
> 赞同：1
> 
> 时间：2013-03-27T12:36:31.483
> 
> 标签：sorting, kendo-grid

我已经让它工作了一半，但它有两个问题，

第一个当设置正确时进行排序（可排序：true但serverSorting：false）它只会对当前页面的结果进行排序

2nd with serverSorting: true 它不会进行任何排序，但会发布参数：-

page 1 pageSize 10 skip 0 sort[0][dir] asc sort[0][field] Ward take 10

控制器 json 中的 ofc 它不会以那种格式拾取/理解它

```
public JsonResult _List(Request request, int skip, int take) 
```

或者

```
public JsonResult _List(List<SortDescription> sort, int skip, int take) 
```

当我单击对列进行排序时，两者都将具有 count = 1，但即使我只是尝试字符串字段字符串 dir，两者都具有字段/目录 null。

就我所见，我没有正确地将排序数据从视图发送到控制器，但是我似乎找不到任何地方清楚地表明它是如何从点 a 到点 b，然后在json。

有人有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T10:07:36.337

您可以尝试使用将查询参数映射到对象 (KendoGridRequest)的[KendoGridBinderEx项目。](https://github.com/StefH/KendoGridBinderEx)

控制器如下所示：

```
[HttpPost]
public JsonResult _List(KendoGridRequest request)
{
    var entities = _employeeService.AsQueryable();
    return GetKendoGridAsJson(request, entities);
} 
```

# java - ImageJ，使用校准将图像校准到物理比例？

> ID：15658954
> 
> 赞同：0
> 
> 时间：2013-03-27T12:36:34.283
> 
> 标签：java, imagej

我希望能够将图像校准到物理距离，这样我就可以将图像裁剪到物理距离，而不是给出要裁剪的像素数。我已经在 ImageJ API 中看到了 Calibration 类，我可以通过设置 Xorigin 和 Yorigin 变量来设置校准以设置像素尺寸并说明图像的原点在哪里。

如果我的图像不包含原点，或者如果一个像素确实描述了原点，即两个像素可能从 -0.3cm 到 0 和从 0 到 +0.3cm，该怎么办。

有没有办法告诉 ImageJ，即“物理空间中的左上角像素是 (-200mm,200mm)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:11:52.773

在 ImageJ 用户界面中，您可以使用“属性”对话框（在“图像”菜单下方）分配与图像关联的物理尺寸和原点。原点始终以像素表示，但由于您知道每个像素的物理宽度和高度，因此很容易使用除法将您想要的物理空间转换回像素。

既然你提到了这个`Calibration`类，我想你正在寻找 Java 中的解决方案。这是演示您想要什么的代码：

```
double mmPerPixelX = 5.2;
double mmPerPixelY = 6.3;
double mmOriginX = -200.0;
double mmOriginY = 200.0;

ImagePlus imp = IJ.getImage();
Calibration cal = imp.getCalibration();
cal.setUnit("mm");
cal.pixelWidth = mmPerPixelX;
cal.pixelHeight = mmPerPixelY;
cal.xOrigin = -mmOriginX / mmPerPixelX;
cal.yOrigin = -mmOriginY / mmPerPixelY; 
```

[您还可以使用Fiji 脚本编辑器](http://fiji.sc/Script_Editor)将此代码作为 Beanshell 脚本执行。

# spring-security - Spring-security如何从每个页面登录？

> ID：15658956
> 
> 赞同：4
> 
> 时间：2013-03-27T12:36:37.230
> 
> 标签：spring-security

我有一个 Spring-MVC 应用程序，我希望在其中有一个显示在多个页面上的登录栏 - 并使用 jQuery 的对话框系统在模式对话框窗口中显示表单。我应该在其中使用什么 Spring-Security 设置`securityContext.xml`才能正常工作？

这是我目前使用的：

```
<http pattern="/resources/**" security="none" />

<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/redirect.jsp" access="permitAll" />
    <intercept-url pattern="/*.html" access="permitAll" />
    <intercept-url pattern="/**" access="denyAll" />        
    <form-login login-page="" />
    <logout logout-success-url="/logout" />
</http> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:07:56.133

从每个页面登录是应用程序没有任何入口点的另一种说法。所以我们需要配置一个什么都不做的入口点。

我们可以这样做：

```
public class DoNothingEntryPoint implements AuthenticationEntryPoint {

    @Override
    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)
        throws IOException, ServletException {

        /* do nothing */

        }
}

in XML:
<beans:bean id="doNothingEntryPoint" class="xyz.package.DoNothingEntryPoint" />

<http entry-point-ref="doNothingEntryPoint" use-expressions="true">
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:02:21.900

如果你使用jsp，你可以利用spring标签：

```
<sec:authorize ifNotGranted="ROLE_ANONYMOUS">
//User is loggedin
              Welcome, ${pageContext.request.userPrincipal.principal.nameToDisplay}
              <a href="j_spring_security_logout">Logout</a>
                </sec:authorize>
<sec:authorize access="isAnonymous()">
//user is not loggedin, show login form
                <form id="loginForm" onsubmit="DoLoginInline();"  target="passwordIframe" >
                <label>Login:</label>
                <input type="text" class="headerInputs" id="LoginUsername" name="j_username">
                <label>Password:</label>
                <input type="password" class="headerInputs" id="LoginPassword" name="j_password">

                <button type="submit" value="Submit"></button>

                </form>

            </sec:authorize> 
```

# java - 生成所有排列的列表，不重复 2^9

> ID：15658960
> 
> 赞同：1
> 
> 时间：2013-03-27T12:37:13.973
> 
> 标签：java, permutation, combinations

我一直像疯子一样在谷歌上搜索，但找不到任何足以让我开始的具体内容。请原谅我完全的菜鸟和可能恶魔般的略读能力。

基本上，我有一份包含 9 个问题的问卷，每个问题都有 2 个可能的答案。做完数学 (2^9) 后，我知道有 512 个排列。

我希望生成所有排列的列表，没有任何重复，为我提供可能的答案组合列表。

我希望我的输出看起来与此类似：

112112111

其中 1s 表示该人为某个问题选择了答案“a”，而 2s 表示该人选择了答案“b”。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:46:23.940

您只是在枚举 0 到 512 之间的数字，并且您希望以二进制表示形式打印字符串，其中 0 和 1 替换为 1 和 2，并适当填充，因此以下代码将起作用：

```
 for (int i = 0; i < 512; i++) {
        System.out.println(String.format("%9s", Integer.toBinaryString(i)).replace('1', '2').replace('0', '1').replace(' ', '1'));
    } 
```

请参阅此相关问题以在 Java 中生成填充的二进制字符串：[How to get 0-padded binary representation of an integer in java?](https://stackoverflow.com/questions/4421400/how-to-get-0-padded-binary-representation-of-an-integer-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:42:31.693

一种可能的方法是查找 111111111 和 222222222 之间仅包含 1 和 2 的所有数字。

就像是：

```
for (i=111111111 ; i<=222222222 ; i++)
    if (number_has_only_one_or_twos(i))
         print i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:52:31.000

如果我正确阅读了您的问题，那么您只需要 0 到 511 之间数字的二进制表示（因为 511 - 0 + 1 = 512）。您需要做的就是找到该范围内每个数字的 9 位二进制表示。取 0 表示答案 B，​​取 1 表示答案 A。

您可以轻松地将二进制数转换为字符串并将 0 替换为 2 并打印出来。这就是数字二进制表示的美妙之处。这是查找给定范围内所有排列的最佳方法之一。

想象一下找到数组中所有元素的排列。将数字范围从零到数组的大小，取 1 表示您要使用该索引，取 0 表示不使用该索引。每当您遇到它时，它将大大简化该问题。

# python - Emacs Jedi 自动完成功能不适用于 init

> ID：15658963
> 
> 赞同：4
> 
> 时间：2013-03-27T12:37:23.693
> 
> 标签：python, emacs, autocomplete, jedi

前几天我通过 el-get 安装了 jedi 和其他一些软件包，最初一切都很好（自动完成、弹出菜单等）。

然而，在过去的几天里，jedi 已经停止工作（即自动完成、弹出窗口和函数参数建议不再起作用）。

我发现这不起作用的部分原因是，由于某种原因，启动时未启用自动完成。我尝试在 el-get 加载绝地之前和之后将 (setq auto-complete-mode t) 添加到我的 .emacs 文件中，但是尽管启用了自动完成功能，但由于某种原因它仍然无法正常工作。相反，我必须在 emacs 加载后使用 Mx auto-complete-mode 启用自动完成（我也尝试过[Emacs auto-complete-mode at startup](https://stackoverflow.com/questions/8095715/emacs-auto-complete-mode-at-startup)的建议，但这只会在 emacs 加载时引发大量错误）。

除此之外，当我键入 Mx jedi RET 时，jedi 故障排除页面上列出的一些命令（例如 jed:setup-keys）似乎丢失了。

我似乎也遇到了和这个人一样的问题：[emacs-jedi does not find numpy completions](https://stackoverflow.com/questions/14708453/emacs-jedi-does-not-find-numpy-completions)，但我不确定这两个问题是否相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:34:38.137

我遇到了同样的问题`auto-complete-mode`。我不得不手动启动它。

作为一个完全的新手，我挣扎了一段时间，但推导出了一个解决方案。也许它不是很优雅，但它可以工作......`python-mode`在启用绝地交流之前将它作为一个钩子添加。

```
;;enable jedi autocompletion in python
(add-hook 'python-mode-hook 'auto-complete-mode)
(add-hook 'python-mode-hook 'jedi:ac-setup) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T20:33:35.910

首先查看文档中的故障排除部分：http: [//tkf.github.com/emacs-jedi/#troubleshooting](http://tkf.github.com/emacs-jedi/#troubleshooting)

我建议你从`make tryout`文档中提到的开始，像这样：

```
 curl -fsSkL https://raw.github.com/rejeep/carton/master/go | sh
 make CARTON=$HOME/.carton/bin/carton tryout 
```

从文件：

> 这将安装 Jedi.el 的要求，与您的本地设置分开`.emacs.d`。您还可以检查配置文件 tryout-jedi.el 用于`make tryout`查看最低工作配置。如果您在设置 Jedi.el 时遇到问题，请比较您的配置文件和`tryout-jedi.el`.

# image - 使用 tomcat7 和 primefaces 显示绝对目录中的图像

> ID：15658964
> 
> 赞同：0
> 
> 时间：2013-03-27T12:37:25.513
> 
> 标签：image, tomcat, primefaces, directory

我想从 p:graphicImage 获取我保存到绝对目录中的图像

我测试[了这个解决方案（BalusC）](https://stackoverflow.com/questions/10844869/how-to-show-the-server-path-image-to-primefaces-pgraphicimage/10844924#10844924)：

但图像没有出现：

这是我的 xhtml 代码：

```
<h:form prependId="false" enctype="multipart/form-data">
    <p:fileUpload binding="#{upload}" mode="simple" id="monfileupload" 
                  value="#{articleMB.uploadedPicture}"/>
    <p:commandLink id="mylink" onclick="uploader();">
        <h:graphicImage id="monimage" value="/images/Chrysanthemum.jpg" 
                        height="64"  width="64" binding="#{image}" />
    </p:commandLink>
    <p:commandButton actionListener="#{articleMB.ajouter}" value="submit"
                     ajax="false" />
</h:form> 
```

这是tomcat的配置（在server.xml中）：

```
<Context docBase="C:/images_test" path="/images" /> 
```

这是目录： ![在此处输入图像描述](../Images/d46358ff13090ff7df2411b4c4981689.png)

我不知道出了什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:21:14.243

由于您使用的是 tomcat 7，因此使用 aliases 属性将对您有所帮助。

```
<Context ... aliases="/images=c:\images_test\"> 
```

您可能会更多关于[http://tomcat.apache.org/tomcat-7.0-doc/config/context.html上的属性的上下文参数](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)

# ios - 为 phonegap iOS 创建 Geolocation 插件以在后台运行

> ID：15658971
> 
> 赞同：3
> 
> 时间：2013-03-27T12:37:37.883
> 
> 标签：ios, cordova, background, geolocation

由于 watchposition 在后台运行时间不超过 30 分钟，因此我必须创建一个地理定位插件，以便每 5 分钟在我的网络服务器上注册一次位置。另一个问题是我对objective-c一无所知。所以任何人都可以帮助我或给我一些代码，我可以做点什么吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-08T08:23:33.603

您无需为 phonegap 应用创建插件即可在后台接收位置更新。我已经制作了我的基于 phonegap 的导航器应用程序的 iOS 版本，并成功地让它在后台运行时接收位置更新。我已经在“现实世界”中对其进行了广泛的测试，它可靠地工作，对接收位置更新的持续时间没有任何限制。

首先，您需要使用 XCode 来开发您的 phonegap 应用程序 - 如果您使用的是 Phonegap Build，我不确定您是否可以在您的 iOS 应用程序中设置正确的属性。您可以将“UIBackgroundModes”键设置为“location”的值，这将导致iOS在每次收到位置更新时触发您在watchPosition()中注册的JS回调函数。

有关 iOS 项目密钥的详细信息，请参阅[此页面](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)。

有关如何在 XCode 中设置背景模式键的信息，请参阅[此页面。](http://www.raywenderlich.com/29948/backgrounding-for-ios)您要选择的值是“应用程序注册位置更新”。

希望这可以帮助！

# login - 如何更改 Prestashop 导航栏的登录状态？（登录/注销按钮）

> ID：15658972
> 
> 赞同：1
> 
> 时间：2013-03-27T12:37:38.780
> 
> 标签：login, navigation, prestashop

我目前正在使用 Prestashop，我有一个修改过的皮肤，但我发现如果我没有登录，我的登录按钮不会从“登录”更改为“注销”。现在我试图通过层次结构来查看在定义名称的位置，但找不到它。要查看我的网站的实时预览，您可以访问 [此链接](http://www.jorritpresta.microdesign.nl)。

如果有人能告诉我如何编辑导航菜单，或者更好的是我的导航按钮的登录状态，那真的会帮助我。感谢您的帮助:)。

问候金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:28:34.337

它可能取决于 Prestashop 版本和您正在使用的模块，但使用该`blockuserinfo`模块它可以像这样工作（在 Prestashop 1.5 中）：

```
{if $logged}
    <a href="{$link->getPageLink('index', true, NULL, 'mylogout')}">{l s='Log out' mod='blockuserinfo'}</a>
{else}
    <a href="{$link->getPageLink('my-account', true)}">{l s='Login' mod='blockuserinfo'}</a>
{/if} 
```

# c++ - 用openCV将两个图像相乘

> ID：15658977
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:37:57.127
> 
> 标签：c++, visual-studio-2010, opencv

我通过以下方式将两个 16U DEPTH / 3 通道图像与 openCV 相乘： cvMul(*src1, *src2, *dest, 1)

目标属性是什么？16U，3通道也是？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:22:48.563

是的，dest 的深度也为 3

# sql-server - TRY/CATCH 对 SQL Server 代理错误不起作用？

> ID：15658978
> 
> 赞同：5
> 
> 时间：2013-03-27T12:37:59.157
> 
> 标签：sql-server, try-catch, sql-server-agent

我`sp_start_job`用来开始工作。

作业 ( `test2`) 只有一步：

```
select getdate()
waitfor delay '00:00:10' 
```

`TRY/CATCH`代码：

```
begin try
    EXEC msdb.dbo.sp_start_job @job_name = 'test2'
end try
begin catch
    print 'error'
end catch 
```

第一次运行代码：

> 作业“test2”成功启动。

代码的第二次运行（10 秒内）：

> 消息 22022，级别 16，状态 1，第 0 行
> SQLServerAgent 错误：运行作业 test2 的请求（来自用户 sa）被拒绝，因为作业已经从用户 sa 的请求中运行。

为什么`TRY/CATCH`在这种情况下不起作用？

更新：我首先应该补充一点，我正在使用具有链接服务器（sql server 2000）的 sql server 2005。我试图在 sql server 2005 服务器上编写一个 proc，以查看所有链接服务器上的作业。如果作业未运行，请运行它。最初，我使用 try - catch 并希望在运行已经运行的作业但失败（此线程）时捕获任何错误。

我终于使用了以下代码：（它不会编译，你需要替换一些变量，只是给出一个想法）

```
 CREATE TABLE [dbo].[#jobInfo](
        [job_id] [uniqueidentifier] NULL,
        [originating_server] [nvarchar](30) ,
        [name] [nvarchar](128) ,
        [enabled] [tinyint] NULL,
        [description] [nvarchar](512) ,
        [start_step_id] [int] NULL,
        [category] [nvarchar](128) ,
        [owner] [nvarchar](128) ,
        [notify_level_eventlog] [int] NULL,
        [notify_level_email] [int] NULL,
        [notify_level_netsend] [int] NULL,
        [notify_level_page] [int] NULL,
        [notify_email_operator] [nvarchar](128) ,
        [notify_netsend_operator] [nvarchar](128) ,
        [notify_page_operator] [nvarchar](128) ,
        [delete_level] [int] NULL,
        [date_created] [datetime] NULL,
        [date_modified] [datetime] NULL,
        [version_number] [int] NULL,
        [last_run_date] [int] NOT NULL,
        [last_run_time] [int] NOT NULL,
        [last_run_outcome] [int] NOT NULL,
        [next_run_date] [int] NOT NULL,
        [next_run_time] [int] NOT NULL,
        [next_run_schedule_id] [int] NOT NULL,
        [current_execution_status] [int] NOT NULL,
        [current_execution_step] [nvarchar](128) ,
        [current_retry_attempt] [int] NOT NULL,
        [has_step] [int] NULL,
        [has_schedule] [int] NULL,
        [has_target] [int] NULL,
        [type] [int] NOT NULL
    )

    SET @sql = 
    'INSERT INTO #jobInfo
    SELECT * FROM OPENQUERY( [' + @srvName + '],''set fmtonly off exec msdb.dbo.sp_help_job'')'

    EXEC(@sql)

    IF EXISTS (select * from #jobInfo WHERE [name] = @jobName AND current_execution_status IN (4,5)) -- 4: idle, 5: suspended 
    BEGIN
        SET @sql = 'EXEC [' + @srvName + '].msdb.dbo.sp_start_job @job_name = ''' + @jobName + ''''
        --print @sql    
        EXEC (@sql) 
        INSERT INTO #result (srvName ,status ) VALUES (@srvName, 'Job started.')
    END ELSE BEGIN
        INSERT INTO #result (srvName ,status ) VALUES (@srvName, 'Job is running already. No action taken.')
    END 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T12:48:02.013

并非所有错误都能被`TRY/CATCH`. 在这种情况下，`sp_start_job`实际上调用了外部过程，而这些超出了 SQL Server 错误处理的范围。或者至少这是他们坚持的故事：

[http://connect.microsoft.com/SQLServer/feedback/details/362112/sp-start-job-error-handling](http://connect.microsoft.com/SQLServer/feedback/details/362112/sp-start-job-error-handling)

另请注意，这在 SQL Server 2012 SP1 CU3 中仍然是一个问题。**如果您想修复此错误，请投票和评论。**

一个乏味但可行的解决方法，需要一定的权限，在这种情况下假设工作​​所有者是`sa`：

```
DECLARE @x TABLE
(
  a VARBINARY(32),b INT,c INT,d INT,e INT,f INT,g INT,h INT,i NVARCHAR(64),
  Running BIT, -- the only important column
  k INT,l INT,m INT
);

DECLARE @job_id UNIQUEIDENTIFIER;

SELECT @job_id = job_id FROM msdb.dbo.sysjobs WHERE name = N'test2';

INSERT @x EXEC master.dbo.xp_sqlagent_enum_jobs 1, N'sa', @job_id;

IF EXISTS (SELECT 1 FROM @x WHERE Running = 0)
BEGIN
     EXEC msdb.dbo.sp_start_job @job_name = N'test2';
END
ELSE
BEGIN
     PRINT 'error';
END 
```

更好的可能是：

```
DECLARE @job_id UNIQUEIDENTIFIER, @d DATETIME;

SELECT @job_id = job_id FROM msdb.dbo.sysjobs WHERE name = N'test2';

SELECT @d = stop_execution_date 
  FROM msdb.dbo.sysjobactivity WHERE job_id = @job_id;

IF @d IS NOT NULL
BEGIN
     EXEC msdb.dbo.sp_start_job @job_name = N'test2';
END
ELSE
BEGIN
     PRINT 'error';
END 
```

在任何一种情况下，作业仍有可能在检查其状态和调用启动它之间开始，因此这并不能`sp_start_job`完全消除错误，但它使它们发生的可能性大大降低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-08T10:56:40.977

You can use alerts to execute SQL Agent jobs. And you can use alerts' options to configure required response. (this will help you to totally avoid error 22022 but you will have additional records in the errorlog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-20T00:14:20.857

为了制定一个常青的解决方案，我们还应该考虑一个以前从未运行过的工作。这在重建 SQL 服务器和重新创建作业的情况下很有用。要捕获该场景，请查看上次运行请求的日期：

```
DECLARE @jobEnd DATETIME, @jobRun DATETIME
SELECT @jobEnd = sja.stop_execution_date , @jobRun = sja.run_requested_date
FROM msdb.dbo.sysjobactivity AS sja
INNER JOIN msdb.dbo.sysjobs AS sj
ON sja.job_id = sj.job_id
WHERE sj.name = 'PhoneListSyncMember'

IF (@jobEnd IS NOT NULL AND @jobRun IS NOT NULL)
  OR (@jobEnd IS NULL AND @jobRun IS NULL)  -- job is New and never run before
    EXEC @iRet =msdb.dbo.sp_start_job @job_name='PhoneListSyncMember' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-04T08:33:26.523

这是捕获作业触发器失败的方法。

声明@returnstatus int

执行@returnstatus msdb.dbo.sp_start_job '作业名'

if(@returnstaus = 1) 打印“成功”，否则打印“失败”

# c# - 使用自定义 WP8 模拟器

> ID：15658989
> 
> 赞同：3
> 
> 时间：2013-03-27T12:38:36.377
> 
> 标签：c#, visual-studio, windows-phone-7, windows-phone-8

我可以在 Visual Studio 2012 中使用自定义 Windows Phone 8 模拟器吗？我已经尝试在 Hyper V Manager 中配置由 VS 创建的 VM，但是当我尝试在模拟器中运行我的应用程序时，VS 会将自定义设置重置为默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T11:17:17.137

不，您不能使用自定义模拟器或自定义模拟器图像。您最多可以做的是切换皮肤以在模拟器中显示您最喜欢的手机的外观

# asynchronous - 带有进度事件的 Queue.js

> ID：15658990
> 
> 赞同：3
> 
> 时间：2013-03-27T12:38:41.733
> 
> 标签：asynchronous, queue, d3.js

我想加载多个文件以在 D3.js 中使用。Queue.js 似乎是一个很好的工具。由于 d3.js 在 v3 中支持更高级的 XHR 功能，我想使用 Queue.js 加载多个文件并显示加载进度，并在出错时中止加载所有文件。

这是您检查进度以及如何使用 Queue.js 的方式：[https ://github.com/mbostock/d3/wiki/Upgrading-to-3.0](https://github.com/mbostock/d3/wiki/Upgrading-to-3.0)

我不知道如何组合这些代码。

这是我到现在为止的。 [JSFiddle](http://jsfiddle.net/Mikey/sm6WX/)

我认为 Queue.js 上最好有一个进度事件处理程序，但我不知道如何实现这一点。

示例代码：

```
queue()
  .defer(d3.json, "file1.json") // https://api.github.com/repos/mbostock/d3")
  .defer(d3.json, "file2.json")
  .progress(function() { console.log(d3.event.loaded/d3.event.total; }) // or use argument?
  .error(function(error) { this.abort(); console.log(error); })
  .await(function(data) { console.log(data); }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T04:27:25.610

queue.js 中 queue() 返回的对象没有“progress”和“error”方法。这是源代码的链接：[https](https://github.com/mbostock/queue/blob/master/queue.js) ://github.com/mbostock/queue/blob/master/queue.js 。

由于 queue.js 采用 xhr 对象并使用“应用”来执行该函数，因此以下解决方法对我有用。它涉及使用 xhr 对象的 get() 方法来执行函数。

示例代码：

```
queue().defer(d3.json("file1.json")
                 .on("progress", function({console.log(d3.event.loaded);})                                               
                 .get, /*First argument*/ "error")
       .await(function (error, file1_data) {console.log(file1_data);}); 
```

希望这可以帮助。

# php - 根据具有权限的角色获取用户

> ID：15658992
> 
> 赞同：1
> 
> 时间：2013-03-27T12:38:43.177
> 
> 标签：php, yii, rights

我在数据库中有三个表。一种是`authmanager`有`rolename`和`user_id`。第二个是`user`通常的`id`,`username`和`password`。第三个表是`employee`，它有 'id'、'user_id' 和其余字段。问题是在员工的索引页面中，我想根据“authmanager”表中的角色在选项卡中显示员工。yii的关系怎么用？

我`rights`用于管理权限和`authasignments`. 我想获得所有属于特定的用户`rolename`。到目前为止，我在`Rights::getAssignedRoles()`. 我是权利新手，所以请给我一个工作方向。

# svn - TFS 中 svn log -v 的等价物是什么？

> ID：15658996
> 
> 赞同：1
> 
> 时间：2013-03-27T12:38:48.577
> 
> 标签：svn, tfs, azure-devops

`svn log -v`这是来自命令的 svn 存储库最近更改的详细输出

```
r22 | dev_0 | 2013-03-26 15:54:08 +0530 (Tue, 26 Mar 2013) | 1 line
Changed paths:
   A /Adhoc_Requests/Cust_1/SupplyExtract.sql

added SupplyExtract.sql based on the adhoc request
------------------------------------------------------------------------
r1 | Contractor_0 | 2013-02-19 02:20:26 +0530 (Tue, 19 Feb 2013) | 1 line
Changed paths:
   A /Application
   A /Adhoc_Requests
   A /Adhoc_Requests/Cust_2
   A /Adhoc_Requests/Cust_2/MaleFemaleCounts.sql
   A /Adhoc_Requests/Cust_1
   A /Adhoc_Requests/Cust_1/DomainScores.sql

Initial commit
------------------------------------------------------------------------ 
```

我怎样才能获得相同的 TFS 存储库？

PS：我的机器或网络中没有安装 TFS。我只是使用在线 Team Foundation Service。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:37:42.200

有`tf history`可能是您正在寻找的命令。

打开一个 Visual Studio 命令提示符并导航到您的工作区（这样您就不必添加一堆参数来告诉 TFS 您要与之交谈的服务器/团队项目等）

使用类似的东西

`tf history $/TeamProject/Branch/Folder /format:detailed /noprompt /recursive`

/noprompt 停止工具启动 GUI 并在 CLI 中显示结果

/recursive 导航整个树，而不仅仅是提供的目录

# django - Django：找不到带有参数“（）”和关键字参数“{}”的“预订”的反向

> ID：15658998
> 
> 赞同：0
> 
> 时间：2013-03-27T12:38:54.357
> 
> 标签：django

抱歉，如果这看起来像一个重复的问题，但我已经查看了其他问题，问题似乎不一样。

例外：

```
Reverse for 'booking' with arguments '()' and keyword arguments '{}' not found. 
```

在 courses.html 模板上会抛出以下错误：

```
{% url 'booking' %} 
```

网址.py：

```
url(r'^courses/(?P<course_code>\w+)/$', views.course, name="course"),
url(r'^booking/(?P<course_code>\w+)/$', views.booking, name="booking"), 
```

意见：

```
def booking(request, course_code):
current_course = Course.objects.filter(short_title=course_code)
template = loader.get_template('website/booking.html')
context = Context({
    'current_course': current_course,
})
return HttpResponse(template.render(context))

def courses(request):
latest_course_list = Course.objects.order_by('-start_date')
template = loader.get_template('website/courses.html')
context = Context({
    'latest_course_list': latest_course_list,
})
return HttpResponse(template.render(context)) 
```

这里的其他问题似乎是在模板中的变量周围加上引号的问题，但这看起来不像是同一个问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:42:58.533

您的`booking`url 采用一个参数 as `course_code`，因此您收到错误消息。

您应该适当地更新该行`{% url 'booking' %}`以将一些传递`course_code`给 url。

所以你需要用类似的东西来更新它`{% url 'booking' course_code %}`，这里我假设`course_code`模板中有可用的参数，你可以根据你的代码来改变它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:43:09.327

根据你的网址

```
url(r'^booking/(?P<course_code>\w+)/$', views.booking, name="booking"), 
```

你需要`course_code`像这样在你的模板中传递一个参数

```
{% url 'booking' course_code_value %} 
```