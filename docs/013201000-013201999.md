# StackOverflow 问答 13201000-13201999

# ado.net - Windows 8 中的 ADO.NET

> ID：13201001
> 
> 赞同：1
> 
> 时间：2012-11-02T18:25:39.850
> 
> 标签：ado.net, windows-8, windows-phone-8

Windows 8 和 Windows Phone 8 中是否有 ADO.NET？我需要 SqlConnection 类。也许还有其他图书馆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:57:55.130

WP8 中没有 ADO.NET。如果您指的是现代的 Windows 8 应用商店应用程序，也不允许使用 ADO.NET。ADO.NET 只能在桌面应用程序中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T22:29:09.400

上面的答案是正确的。如果需要，这里有一些后续内容。

Windows 8 应用程序应直接从 Windows 应用商店运行，而不受通过连接字符串连接到本地服务器所施加的限制。

推荐的方法是通过 Web 服务公开您的数据库。

执行此操作的两种 Microsoft 技术是：(1) Windows Communication Foundation (2) ASP.NET Web API（更现代的方法）

对于 Windows Communication Foundation，这里有一个教程： http: [//www.intstrings.com/ramivemula/articles/create-a-simple-wcf-service-against-pubs-database-using-ef-linq-part-i/](http://www.intstrings.com/ramivemula/articles/create-a-simple-wcf-service-against-pubs-database-using-ef-linq-part-i/)

对于 ASP.NET Web API，这里有一个教程： [http ://code.msdn.microsoft.com/ASP-NET-Web-API-Tutorial-c4761894/view/SourceCode](http://code.msdn.microsoft.com/ASP-NET-Web-API-Tutorial-c4761894/view/SourceCode)

# python - 动态 Python 变量

> ID：13201002
> 
> 赞同：-2
> 
> 时间：2012-11-02T18:25:54.057
> 
> 标签：python, variables

我有一个简单的问题：我有这个代码：

```
# open an HTML file on my own (Windows) computer
url = "$user data here"
webbrowser.open(url,new=new) 
```

我需要它，这样当它运行时，用户可以输入让我们说 3 个不同的 URL，并让该代码再创建两次，用每个部分中的三个变量之一填充变量点。

我会假设我需要一个循环，但是如果它们输入 3 或 5 个 url，我如何动态定义变量，它会生成代码来做到这一点？

在此先感谢，贾斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:28:21.673

创建一个空列表。使用[list.append](http://docs.python.org/2/tutorial/datastructures.html)方法也可以随时添加到这个列表中，从而在不实际使用动态变量的情况下达到您需要的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:30:29.033

如果用户输入网址，以空格分隔，如下所示：

```
urls = "http://stackoverflow.com http://google.com" 
```

然后你可以`webbrowser.open`为每个 url 循环调用一次，如下所示：

```
for url in urls.split():
    webbrowser.open(url,new=new) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T18:30:55.413

你的意思是你想抓取像这样的网址：

```
urls = raw_input("Enter yer urls! ") 
```

?

如果是这样，您可以拆分结果并为每个 url 打开窗口，例如：

```
for url in urls.split():
    webbrowser.open(url,new=new) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T19:34:07.317

创建一个没有值的列表，并使用列表中的 append 方法将值动态分配给可用于迭代的列表。

使用逗号分隔各个网址

```
input = raw_input("Enter  urls separted by commas ")
urls=input.split(",") 
```

对于迭代变量使用“For”循环

```
for value in urls:
   webbrowser.open(value,new=new) 
```

我希望这可以解决您为函数动态提供输入的问题

# android - 如何从 MySQL 数据库中获取数据并在 ListView 中列出

> ID：13201006
> 
> 赞同：3
> 
> 时间：2012-11-02T18:26:25.613
> 
> 标签：android

我已经看到了很多关于这个的问题/教程，但他们都使用某种预制数据库或使用 JSON。

我已经在我的服务器上创建了一个数据库和一个带有 simlpe 数据的表，该`MySQL`服务器在我的开发机器上作为服务单独运行。

我想从该表中提取数据并在我的 Andoird 应用程序启动（onCreate）时将其列出在我的 Andoird 应用程序的 ListView（MainActivity）中。

目前我正在使用预先制作的汽车名称列表。

**汽车表**（在 mydb 数据库中）

`id`, `name`, `model`, `year`, `vin`, `km`,`price`

**MainActivity.java**

```
package com.example.myfirstproject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;

public class MainActivity extends Activity implements OnItemClickListener  {

    protected String[] cars =  {"BMW", "Audi", "VW", "Ford", "Subaru"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ListAdapter adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, cars);
        ListView carsList = (ListView) findViewById(R.id.listCars);
        carsList.setAdapter(adapter);
        ListView list = (ListView) findViewById(R.id.listCars);
        list.setOnItemClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Intent intent = new Intent(this, DetailsActivity.class);
        startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:26:55.947

由于使用已弃用的 PHP/MySQL 函数会引起强烈反对，我不愿意发布此答案，但这里是：

服务器端（仅供参考，不鼓励查看MySQLi或[PDO_MySQL ）：](http://php.net/manual/en/function.mysql-connect.php)`mysql_connect`

```
if ($_GET["selectedCompany"] == "true" && $_GET['companyName']) {

    $query = "Your query here";

    mysql_connect($dbserver, $dbusername, $dbpassword) or die(mysql_error());
    mysql_select_db($dbname) or die(mysql_error());

    $result = mysql_query($query) or die(mysql_error());  
    $num = mysql_numrows($result);
    $row = mysql_fetch_assoc($result);

    $i = 0;
    $rows = array();
    while ($i < $num) {

        $survey_lat['survey_lat'] = mysql_result($result, $i, "survey_lat");
        $survey_lng['survey_lng'] = mysql_result($result, $i, "survey_lng");
        $thumbnail = mysql_result($result, $i, "thumbnail");
        $finalImg['thumbnail'] = base64_encode($thumbnail);
        $sign_type['sign_type'] = mysql_result($result, $i, "sign_type");
        $object_lat['object_lat'] = mysql_result($result, $i, "object_lat");
        $object_lng['object_lng'] = mysql_result($result, $i, "object_lng");

        $finalArray = array_push($rows, array_merge($sign_type, $object_lat, $object_lng, $survey_lat, $survey_lng, $finalImg));

        $i++;
    }

    print json_encode($rows);
    mysql_close();
} 
```

要检索的客户端/Android 端`AsyncTask`（我修改了之前给出的答案以反映 mysql 查询以及如何解析该 JSON 数据）：

```
class MyAsyncTask extends AsyncTask<String, String, Void> {

    private ProgressDialog progressDialog = new ProgressDialog(MainActivity.this);
    InputStream inputStream = null;
    String result = ""; 

    protected void onPreExecute() {
        progressDialog.setMessage("Your progress dialog message...");
        progressDialog.show();
        progressDialog.setOnCancelListener(new OnCancelListener() {
            public void onCancel(DialogInterface arg0) {
                MyAsyncTask.this.cancel(true);
            }
        });
    }

    @Override
    protected Void doInBackground(String... params) {

        String url_select = "http://yoururlhere.com/index.php?selectedCompany=true&companyName=examplevalue";

                ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

        try {
            // Set up HTTP post
            // HttpClient is more then less deprecated. Need to change to URLConnection
            HttpClient httpClient = new DefaultHttpClient();

            HttpPost httpPost = new HttpPost(url_select);
            httpPost.setEntity(new UrlEncodedFormEntity(param));
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // Read content & Log
            inputStream = httpEntity.getContent();
        } catch (UnsupportedEncodingException e1) {
            Log.e("UnsupportedEncodingException", e1.toString());
            e1.printStackTrace();
        } catch (ClientProtocolException e2) {
            Log.e("ClientProtocolException", e2.toString());
            e2.printStackTrace();
        } catch (IllegalStateException e3) {
            Log.e("IllegalStateException", e3.toString());
            e3.printStackTrace();
        } catch (IOException e4) {
            Log.e("IOException", e4.toString());
            e4.printStackTrace();
        }
        // Convert response to string using String Builder
        try {
            BufferedReader bReader = new BufferedReader(new InputStreamReader(inputStream, "iso-8859-1"), 8);
            StringBuilder sBuilder = new StringBuilder();

            String line = null;
            while ((line = bReader.readLine()) != null) {
                sBuilder.append(line + "\n");
            }

            inputStream.close();
            result = sBuilder.toString();

        } catch (Exception e) {
            Log.e("StringBuilding & BufferedReader", "Error converting result " + e.toString());
        }
    } // protected Void doInBackground(String... params)

    protected void onPostExecute(Void v) {

        //parse JSON data
        try{
            JSONArray jArray = new JSONArray(result);

            for(int i=0; i < jArray.length(); i++) {

                JSONObject jObject = jArray.getJSONObject(i);

                String signType = jObject.getString("sign_type");
                double object_lat = jObject.getDouble("object_lat");
                double object_lng = jObject.getDouble("object_lng");
                double survey_lat = jObject.getDouble("survey_lat");
                double survey_lng = jObject.getDouble("survey_lng");
                String thumbnailImg = jObject.getString("thumbnail");
                byte[] encodeByte = Base64.decode(thumbnailImg, Base64.DEFAULT);
                bmImg = BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);
                bmImg = Bitmap.createBitmap(bmImg);

            } // End for Loop

            this.progressDialog.dismiss();

        } catch (JSONException e) {

            Log.e("JSONException", "Error: " + e.toString());

        } // catch (JSONException e)

    } // protected void onPostExecute(Void v)

} //class MyAsyncTask extends AsyncTask<String, String, Void> 
```

# coldfusion - ColdFusion - 将行显示为列

> ID：13201007
> 
> 赞同：2
> 
> 时间：2012-11-02T18:26:31.440
> 
> 标签：coldfusion

我正在使用 ColdFusion 构建一个记分卡，它将允许更新数据。我需要以行作为列，将列作为行来显示数据。以下是该表的示例：

```
Mon Met1 Met2 Met3 Met2 Met5
Jan 15    24   21   40   50
Feb 30    21   14   39   44
Mar 15    19   20   28   19
Apr 16    31   33   21   43 
```

我想像这样显示数据（翻转行和列）：

```
Metric Jan  Feb   Mar  Apr

Met1   15   30   15   16  
Met2   24   21   19   31 
Met3   21   14   20   33
Met4   40   39   28   21
Met5   50   44   19   43 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:07:27.577

听起来像是我多年前写的“垂直排序”常见问题解答。也许这会有所帮助：

```
<html>
<head>
   <title>Vertical Sorting</title>
</head>
<cfquery name = "qMyQuery" datasource = "dsn">
   SELECT fields
   FROM   table
   ORDER BY myField
</cfquery>
<body>
<!--- set the number of colums you wish to have --->
<cfset cols = 5>
<!--- get the number of rows so you know what record to display at the top of the next row. for example if our query contains "a,b,c,d,e,f,g,h,i,j,k,l,m" (13 elements) it will produce 3 totalrows--->
<cfset totalRows = ceiling(qMyQuery.RecordCount / cols)>
<!--- set inital record to 1 "output" is the actual cell of the query --->
<cfset output = 1>
<!--- Create table --->
<table width = "100%" border="0" align="center" cellpadding="2" cellspacing = "2">            
    <!--- loop through the rows.  This loop will run 3 times in this example --->
    <cfloop from = "1" to = "#totalRows#" index = "thisRow">
    <tr>
        <!--- this loop will run 5 times in times in this example --->
        <cfloop from = "1" to = "#cols#" index = "thisCol">
        <!--- the width in the table cell will dynamicaly calculated to evenly distribute the cells. in this example if cols = 5 100/5 will make the cells 20% of the table --->
        <td width = "<cfoutput>#numberformat((100/cols), 99)#</cfoutput>%" align="center" nowrap style = "border: 1px solid #ccc;">
            <!--- Check current record with the record count, this will be used to display data or an empty cell --->
            <cfif output lte qMyQuery.recordCount>
                <cfoutput>#qMyQuery.Mon[output]#</cfoutput>
            <cfelse>
            <!--- use <br> to display an empty cell --->
                <br>
            </cfif>
            <!--- increment counter to the next record in this example if we started on the first cell of the first row it would be 1(a), then 4(d), then 7(g) and so on if this was the firs cell on the second row it would be 2(b), 5(e), 8(h), continue... --->
            <cfset output = output + totalRows>
        </td>
        </cfloop>
        <!--- this little bit tells where to start the next row. if we just finished the first row output would be 2(b) --->
        <cfset output = thisRow + 1>
    </tr>
    </cfloop>
</table>
</body>
</html> 
```

# java - 如果 double 是整数，不显示小数？

> ID：13201008
> 
> 赞同：8
> 
> 时间：2012-11-02T18:26:35.447
> 
> 标签：java, double, decimal, calculator

我正在用 Java 制作一个图形计算器程序，并且有一个方法可以根据用户输入执行操作，并返回一个要显示在`JTextField`. 但是，我希望将结果显示为一个整数，而`".0"`不是在小数点后没有有效数字的情况下显示，但在必要时仍显示小数点。这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T18:33:24.003

您可以`DecimalFormat`用于抑制尾随字符，例如：

```
DecimalFormat format = new DecimalFormat("#.##");
double doubleFromTextField = Double.parseDouble(myField.getText());
System.out.println(format.format(doubleFromTextField)); 
```

# php - PHP - PayPal 自适应支付（延迟链式支 付）

> ID：13201014
> 
> 赞同：0
> 
> 时间：2012-11-02T18:27:19.017
> 
> 标签：php, paypal, paypal-ipn, paypal-adaptive-payments

我真的需要你们的帮助。我目前正在开发我的市场网站，但正在使用的 Web 开发人员对 PayPal 不太好。

为了确保网站上的每个人都能轻松使用该网站，我决定使用 PayPal 自适应支付 - 延迟链式支​​付。

有两种方法可以支付网站上的工作费用。1) 直接给某人一份工作。

在这个选项中，我们想要的是当向网站上的某人提供工作的人完成工作详细信息时，当它到达付款页面时，他/她将通过 PayPal 付款（看起来他/她是仍然在网站内），但他/她也将知道，在他/她重新登录到他/她的贝宝帐户并单击显示为“作业完成”。

2) 允许求职者竞标工作。在此选项中，当此人表示他/她希望人们竞标工作时，我们希望在工作表上，当此人单击任何工作服务费报价时，他/她将被带到贝宝（它将看起来他/她仍在站点内），他/她将在那里付款。但他/她也将意识到，在他/她重新登录到他/她的贝宝帐户并单击显示“工作已完成”的复选框或按钮之前，该网站和从事工作的人将无法获得资金。

任何帮助将不胜感激。

谢谢本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:10:09.913

我有一个[用于 PayPal 的 PHP 类库，](http://www.angelleye.com/overview-of-php-class-library-for-paypal/)它可以让您非常简单。我是 PayPal 的官方合作伙伴、认证的 PayPal 开发人员、PayPal 大使和 3 次 PayPal 明星开发人员奖获得者，因此您可以放心，它会为您服务。

我通常也提供 30 分钟的免费培训，只要您了解 PHP 以及如何使用数组数据，这通常足以让人们开始并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T11:31:21.583

你可以像这样集成： [https ://github.com/paypal/adaptivepayments-sdk-php](https://github.com/paypal/adaptivepayments-sdk-php)

用于自适应支付贝宝。

谢谢杰

# php - DOMXpath 从不同的类中获取

> ID：13201015
> 
> 赞同：1
> 
> 时间：2012-11-02T18:27:20.580
> 
> 标签：php, domdocument, domxpath

我有这样的事情：

```
<div class='rand'>
    some text...
</div>
<div class='rand1'>
    some text..
</div>
<div class='rand2'>
    some text..
</div>
.
.
. 
```

我想从所有不同的 div 中只提取那些`class='rand'`或`class='rand2'` 全部在一个 DOMXpath 查询中的那些。有
什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:29:29.427

Xpath：

```
//div[@class='rand' or @class='rand2'] 
```

以下是有关如何运行 xpath 查询的示例： [Parse HTML with PHP's HTML DOMDocument](https://stackoverflow.com/questions/2571232/parse-html-with-phps-html-domdocument)

# c++ - c++ sizeof(array) 返回数组声明长度的两倍

> ID：13201016
> 
> 赞同：1
> 
> 时间：2012-11-02T18:27:22.130
> 
> 标签：c++, sizeof

我有一段代码，其中声明了两个数组，大小分别为 6 和 13，但是当使用“sizeof()”时，长度返回为 12 和 26。

```
#include <iostream>
using namespace std;

int main(){

    enum charRaces {DWARF,ELF,GNOME,HALFELF,HALFLING,HUMAN};
    enum classes{WARRIOR,FIGHTER,RANGER,PALADIN,WIZARD,MAGE,ILLUSIONIST,PRIEST,CLERIC,DRUID,ROGUE,THEIF,BARD};

    short int races[6] = {DWARF,ELF,GNOME,HALFELF,HALFLING,HUMAN};
    short int classes[13] = {WARRIOR,FIGHTER,RANGER,PALADIN,WIZARD,MAGE,ILLUSIONIST,PRIEST,CLERIC,DRUID,ROGUE,THEIF,BARD};

    cout << "sizeof(races)\t"  << sizeof(races) << endl;
    cout << "sizeof(classes)\t"  << sizeof(classes) << endl;

    system("pause");

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T18:28:54.493

`sizeof`返回变量（在本例中为数组）的大小，其中`sizeof(char)`为 1。由于 a`char`为一个字节宽，`sizeof`因此返回变量的大小（以字节为单位）。由于每个`short int`在您的系统上都是两个字节宽，因此其中 6 个数组的大小为 12，而 13 个数组的大小为 26。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T18:29:12.117

`sizeof`返回以字节为单位的大小，对于数组，它是项目数 × 每个项目的大小。要获得项目数除以一个元素的大小。

```
sizeof(races) / sizeof(races[0]) 
```

小心这个。它仅适用于在编译时大小已知的数组。这将不起作用：

```
void func(short int array[])
{
    // DOES NOT WORK
    size_t size = sizeof(array) / sizeof(array[0]);
} 
```

这里`array`实际上是一个`short int *`并且`sizeof(array)`不返回数组的实际大小，这在编译时是未知的。

[`std::vector`](http://www.cplusplus.com/reference/stl/vector/)这是在 C++中偏爱[`std::array`](http://www.cplusplus.com/reference/stl/array/)原始数组的众多原因之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T18:30:07.410

`sizeof`返回数组使用的实际内存（以字节为单位）。一个相当普遍的习惯用法是做这样的事情：

```
short int races[6] = {DWARF,ELF,GNOME,HALFELF,HALFLING,HUMAN};
size_t num_races = sizeof(races) / sizeof(races[0]); 
```

`num_races`然后将数组中的元素数存储在其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T20:54:15.100

`sizeof`运算符返回表示类型所需的字节大小（在编译时）。

```
double array[10]; // type of array is: double[10] 
```

`sizeof(array)`与 的含义相同`sizeof(double[10])`，等于：

```
sizeof(double) * 10 
```

这是一个可以容纳 10 个双精度值的数组。`sizeof(array[0])`意思是：数组中单个元素的大小，和`sizeof(double)`这里一样。要获得实际的元素数量，您必须将数组的大小除以单个元素的大小：

```
size_t num_elem = sizeof(array) / sizeof(array[0]); 
```

但是，这不适用于指针！

```
double* p = array; 
```

`sizeof(p)`实际上翻译为`sizeof(double*)`. 它的大小与 double 的大小或它指向的数组的大小无关。相反，它是将地址存储到内存位置所需的大小（32 位操作上的 32 位）。有关元素数量的信息丢失了！

如果您想安全地获取数组中的元素数量，可以使用此模板：

```
template<typename T, size_t N>
size_t inline static_arrlen(T (&)[N]) {
    return N;
} 
```

在编译时，它推导出类型 T 和元素个数 N，返回 N。

```
size_t num_elem = static_arrlen(array); // T=double, N=10 
```

如果您尝试从指针获取数组大小，它将无法编译：

```
static_arrlen(p); // ERROR: could not deduce template argument 
                  // for 'T (&)[N]' from 'double *' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T18:28:33.373

sizeof 运算符以单位进行测量，使得 unsigned char 为 1 个单位。

在您的平台上，short 是 char 的两倍，因此是您看到的结果。

要正确确定数组长度，您可以使用如下宏：

```
#define ARRAY_LEN(ary) (sizeof (ary) / sizeof (ary[0])) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T18:31:36.477

sizeof 是 C++ 中的一个运算符，用于测量字节数的大小。我认为在您的机器整数中占用 2 个字节，这就是为什么它显示数组大小的两倍。

# asterisk - 通话期间的 WaitExten

> ID：13201022
> 
> 赞同：0
> 
> 时间：2012-11-02T18:27:47.180
> 
> 标签：asterisk

设想：

1.  Asterisk 接收到一个 DID 号码的来电
2.  Asterisk 使用 PSTN 终端将来电转发到移动号码。
3.  在手机上接听电话

问题：

通话过程中是否可以将通话转接到其他分机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:23:25.250

是的。这是非常直接的。

假设您的 DID 是 1-234-567-8900 而您的手机是 1-987-654-3210：

```
exten => _12345678900,1,NoOp(Call for DID to Mobile)
 same => n, Dial(DAHDI/g1/19876543210,30,t)
 same => n, HangUp() 
```

拨号选项“t”允许“ *...被叫用户通过按下盲 xfer 键 (features.conf) 来转移呼叫*”

进一步阅读：[http ://www.voip-info.org/wiki/view/Asterisk+cmd+Dial](http://www.voip-info.org/wiki/view/Asterisk+cmd+Dial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T02:29:29.597

是的，但需要大师级别。

它可以通过编写特殊应用程序或使用会议或使用 AMI 来完成。

可能简单的方法是会议

# javascript - 对话框打开后停止加载页面

> ID：13201023
> 
> 赞同：1
> 
> 时间：2012-11-02T18:27:55.240
> 
> 标签：javascript, modal-dialog

我想要做的是有一个联系表单，当用户点击提交时，会出现一个对话框，要求用户确认是/否，并且在用户选择是或停留在页面上之前，表单不应提交选择否。

我的问题是，一旦对话框打开，表单仍会提交，并且对话框仅打开一秒钟左右。

那么是否可以在关闭对话框或单击“是”之前停止页面加载？

我正在为对话框使用 jQuery Impromptu 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:44:25.570

我对即兴库不熟悉；但是，我相信这可以通过阻止 onClick 事件通过 go_there() 方法中的回调提交和提交来完成。我会尝试将 onClick 方法替换为`"go_there(); return false;"`. 这应该取消正常的提交事件。然后，您可以在重置位置之前在回调的真实条件中添加提交语句 ( `document.email.submit();`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:33:29.777

不使用 `type="submit"`，只使用 `type="button"`。根据对话结果从您自己的代码提交表单。

# c# - LINQ to XML 查询取决于后代的标签名称

> ID：13201028
> 
> 赞同：0
> 
> 时间：2012-11-02T18:28:27.800
> 
> 标签：c#, xml, xml-parsing, linq-to-xml

我有以下 XML：

```
 <?xml version="1.0" encoding="UTF-8"?>
<sos:GetObservation xmlns="http://www.opengis.net/sos/2.0" service="SOS" version="2.0.0" 
                    xmlns:sos="http://www.opengis.net/sos/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" 
                    xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:swe="http://www.opengis.net/swe/2.0" 
                    xmlns:swes="http://www.opengis.net/swes/2.0" xmlns:xlink="http://www.w3.org/1999/xlink" 
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                    xsi:schemaLocation="http://www.opengis.net/sos/2.0 
                    http://schemas.opengis.net/sos/2.0/sos.xsd">

    <!--identifier of an offering-->
    <offering>HG.Logger@DJK001</offering>

    <!--identifier of an observed property-->
    <observedProperty>HG</observedProperty>

    <!--optional temporal filter restricting the results which shall be returned-->
    <temporalFilter>
        <fes:After>
            <fes:ValueReference>phenomenonTime</fes:ValueReference>
            <gml:TimeInstant gml:id="startPosition">
                <gml:timePosition>2010-07-31T01:05:00</gml:timePosition>
            </gml:TimeInstant>
        </fes:After>
    </temporalFilter>

    <featureOfInterest>DJK001</featureOfInterest>

</sos:GetObservation> 
```

节点`<temporalFilter>`可以替换为：

```
<temporalFilter>
    <fes:Before>
        <fes:ValueReference>phenomenonTime</fes:ValueReference>
        <gml:TimeInstant gml:id="endPosition">
            <gml:timePosition>2010-07-31T01:05:00</gml:timePosition>
        </gml:TimeInstant>
    </fes:Before>
</temporalFilter> 
```

或者：

```
<temporalFilter>
    <fes:During>
        <fes:ValueReference>phenomenonTime</fes:ValueReference>
        <gml:TimePeriod gml:id="duringPosition">
            <gml:beginPosition>2010-07-31T01:05:00</gml:beginPosition>
            <gml:endPosition>2010-07-31T01:06:00</gml:endPosition>
        </gml:TimePeriod>
    </fes:During>
</temporalFilter> 
```

以下 LINQ to XML 代码有效，但我需要该代码能够处理我上面列出的三种 temporalFilter 可能性中的任何一种。有人有什么建议吗？

```
private void GetTemporalFilterFromXml(GetObservation getObservation)
    {
        //var root = XElement.Load(@"C:\Working Directory\OGCSOS.Service\OGCSOS.Service\Resources\GetObservation_TemporalFilter.xml");
        var root = XElement.Parse(getObservation.ToXml(false, Formatting.None, EOLType.CRLF, RequestHandler.GetSos20Context()));
        GetTemporalFilterDescendant(root); //Test line of code!
        var query = (from level in root.Descendants(sos + "temporalFilter")
                     select new
                     {
                         valueReference = (string)level.Descendants(fes + "ValueReference").FirstOrDefault(),
                         timeInstant = (string)level.Descendants(gml + "TimeInstant").First().Attribute(gml + "id"),
                         timePosition = (string)level.Descendants(gml + "TimeInstant").Descendants(gml + "timePosition").First()
                     }).ToList();
        if (query.Any() == false) return;
        if (!String.IsNullOrEmpty(query[0].valueReference)) ValueReference = query[0].valueReference;
        if (!String.IsNullOrEmpty(query[0].timePosition)) TimePosition = query[0].timePosition;
        if (!String.IsNullOrEmpty(query[0].timeInstant)) TimeInstant = query[0].timeInstant;
    } 
```

编辑：这是我用来捕获我需要的所有数据的代码

```
 {
        //var root = XElement.Load(@"C:\Working Directory\OGCSOS.Service\OGCSOS.Service\Resources\GetObservation_TemporalFilter.xml");
        var root = XElement.Parse(getObservation.ToXml(false, Formatting.None, EOLType.CRLF, RequestHandler.GetSos20Context()));
        var query = (from x in root.Descendants(sos + "temporalFilter").Elements()
                     let timeInstant = x.Element(gml + "TimeInstant")
                     let timePeriod = x.Element(gml + "TimePeriod")
                     select new
                     {
                         valueReference = (string)x.Element(fes + "ValueReference"),
                         timeInstant = (timeInstant == null) ? null : timeInstant.Attribute(gml + "id").Value,
                         timePosition = (timeInstant == null) ? null : timeInstant.Element(gml + "timePosition").Value,
                         timePeriod = (timePeriod == null) ? null : timePeriod.Attribute(gml + "id").Value,
                         beginPosition = (timePeriod == null) ? null : timePeriod.Element(gml + "beginPosition").Value,
                         endPosition = (timePeriod == null) ? null : timePeriod.Element(gml + "endPosition").Value,
                     }).ToList();

        if (query.Count == 0) return;
        ValueReference = query[0].valueReference;
        TimeInstant = query[0].timeInstant;
        TimePosition = query[0].timePosition;
        TimePeriod = query[0].timePeriod;
        BeginTime = query[0].beginPosition;
        EndTime = query[0].endPosition;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:31:37.420

这将完成这项工作。`Elements()`将返回所有三种类型的节点 - 之前、之后和期间。引入新的范围变量`timeInstant`允许检查该节点是否存在于元素中并处理节点期间：

```
var query = from x in root.Descendants(sos + "temporalFilter").Elements()
            let timeInstant = x.Element(gml + "TimeInstant")
            select new 
            {
                valueReference = (string)x.Element(fes + "ValueReference"),
                timeInstant = (timeInstant == null) ? null : (string)timeInstant.Attribute(gml + "id"),
                timePosition = (timeInstant == null) ? null : (string)timeInstant.Element(gml + "timePosition")
            }; 
```

*顺便说一句*，你可以投到`timePosition`，`(DateTime?)`Linq 会给你很好的`DateTime`对象。

# iphone - iOS - 无法在 UIScrollView 中对齐 UIView

> ID：13201033
> 
> 赞同：0
> 
> 时间：2012-11-02T18:28:36.557
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有`UIViewController`两个`UIScrollView`标签和一个按钮：

```
UIView
  -UIScrollView
    -UILabel
    -UILabel
    -UIButton 
```

我需要动态对齐我的`UILabels`和`UIButton`之后，因为每个视图都可以有不同的大小。`UILabels`没关系，但我`UIButton`进入第二个中间`UILabel` 这是我的代码：

```
self.header.text = event.title;
self.header.numberOfLines = 0;
CGFloat headerHeight = [event.title sizeWithFont:[UIFont fontWithName:@"Arial" size:20] constrainedToSize:CGSizeMake(280, 100000) lineBreakMode:UILineBreakModeWordWrap].height;
self.header.frame = CGRectMake(19, 20, 280, headerHeight);

CGFloat positionY = 40 + [self.header.text sizeWithFont:[UIFont fontWithName:@"Arial" size:20] constrainedToSize:CGSizeMake(280, 100000) lineBreakMode:UILineBreakModeWordWrap].height;

CGFloat descriptionHeight = [event.descr sizeWithFont:[UIFont systemFontOfSize:17] constrainedToSize:CGSizeMake(280, 100000) lineBreakMode:UILineBreakModeWordWrap].height;
self.descr.frame = CGRectMake(19, positionY, 280, descriptionHeight);
self.descr.text = event.descr;
self.descr.numberOfLines = 0; 

positionY =  self.descr.frame.origin.y + self.descr.frame.size.height + 40;

buyButton.frame = CGRectMake(19, positionY, 72, 37);

scrollView.contentInset = UIEdgeInsetsMake(contentInset, 0, 0, 0);
[scrollView setContentSize:CGSizeMake(320, positionY+80)]; 
```

UIScrollView 在 IB 中设置了灵活的高度自动调整掩码。

这是它的外观：

![在此处输入图像描述](../Images/4bb873250a84275459d7e703bfd04399.png)

谁能告诉我我做错了什么？

**更新：**

如果我删除 UIScrollView 的自动调整大小掩码 - 一切正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:40:43.033

如果您的问题通过更改滚动视图上的自动调整大小掩码自行解决，请务必检查按钮和标签上的自动调整大小掩码以确保它们都一致。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-02T18:32:16.773

使用 UISCROLLVIEW 子视图的计数并将 X 轴作为

```
 CGRECTMAKE((count-count)*100)+x,y,width,height; 
```

# linux - USB HID 设备仅报告第一个事件

> ID：13201035
> 
> 赞同：2
> 
> 时间：2012-11-02T18:28:45.243
> 
> 标签：linux, usb, hid

我有一个随 ASUS PSR 2000 Web Surfing Remote Control 一起提供的 eDIO USB Multi Remote Controller（红外线接收器）。

我正在尝试将 Remote COntroller 连接到我的 pi，以便它接收遥控器发送的击键。

控制器被检测为 HID 设备。以下是 lsusb -v 命令的详细信息

```
Bus 001 Device 007: ID 147a:e001 Formosa Industrial Computing, Inc.
Couldn't open device, some information will be missing
Device Descriptor:
bLength                18
bDescriptorType         1
bcdUSB               1.10
bDeviceClass            0 (Defined at Interface level)
bDeviceSubClass         0
bDeviceProtocol         0
bMaxPacketSize0         8
idVendor           0x147a Formosa Industrial Computing, Inc.
idProduct          0xe001
bcdDevice            1.22
iManufacturer           1
iProduct                2
iSerial                 0
bNumConfigurations      1
Configuration Descriptor:
bLength                 9
bDescriptorType         2
wTotalLength           34
bNumInterfaces          1
bConfigurationValue     1
iConfiguration          4
bmAttributes         0xa0
(Bus Powered)
Remote Wakeup
MaxPower              300mA
Interface Descriptor:
bLength                 9
bDescriptorType         4
bInterfaceNumber        0
bAlternateSetting       0
bNumEndpoints           1
bInterfaceClass         3 Human Interface Device
bInterfaceSubClass      1 Boot Interface Subclass
bInterfaceProtocol      2 Mouse
iInterface              0
HID Device Descriptor:
bLength                 9
bDescriptorType        33
bcdHID               1.10
bCountryCode            0 Not supported
bNumDescriptors         1
bDescriptorType        34 Report
wDescriptorLength      20
Report Descriptors:
 ** UNAVAILABLE **
 Endpoint Descriptor:
 bLength                 7
bDescriptorType         5
bEndpointAddress     0x81  EP 1 IN
bmAttributes            3
  Transfer Type            Interrupt
  Synch Type               None
  Usage Type               Data
wMaxPacketSize     0x0004  1x 4 bytes
bInterval              10 
```

我也可以在 dev 文件夹中创建一个事件的设备

```
pi@raspberrypi /dev/input/by-id $ dir
usb-Cypress_Semiconductor_eDio_USB_Multi_Remote_Controlle-event-if00 
```

与它关联的事件处理程序如下所示，从以下命令中可以看出。

```
 pi@raspberrypi /proc/bus/input $ cat devices
    I: Bus=0003 Vendor=147a Product=e001 Version=0110
    N: Name="Cypress Semiconductor eDio USB Multi Remote Controlle"
    P: Phys=usb-bcm2708_usb-1.2/input0
    S: Sysfs=/devices/platform/bcm2708_usb/usb1/1-1/1-1.2/1-1.2:1.0/input/input2
    U: Uniq=
    H: Handlers=event0
    B: PROP=0
    B: EV=1 
```

问题是当我试图从为设备创建的事件处理程序中读取输出时。第一次击键已注册，但随后的击键不会由 CAT 命令显示。

```
 pi@raspberrypi /dev/input $ cat event0 | xxd
   0000000: e007 9450 9476 0900 0000 0000 0000 0000  ...P.v.......... 
```

请建议我该怎么做才能使设备正常工作。除非重新插入设备，否则在第一次击键后按下任何键都不会返回任何内容。

请建议需要做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:34:52.263

根据您最终想要做什么，将 HID 遥控器的按钮映射到击键可能就足够了，并且使用[QJoyPad](http://qjoypad.sourceforge.net/)等工具很容易实现。

这似乎[很难在 Raspberry Pi 上构建](http://www.raspberrypi.org/phpBB3/viewtopic.php?t=26178&p=237981)，因此您可能想尝试[joy2key](https://wiki.archlinux.org/index.php/Joy2key)，它可以在 repos: 中找到`sudo apt-get install joy2key`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:36:50.857

最后，我有时间使用 PyUSB 库编写自己的实现，它是 Libusb 的包装器。

我在这里发布代码。可能会对某人有所帮助。

我有另一段代码创建了这里使用的配置文件。没有映射所有的远程键，因为我不需要它们。

```
import usb.core
import usb.util
import ConfigParser
import shlex
import subprocess
import logging

# find our device
diction={
  6402315641282315:'1',
  6402415641282415:'2',
  6402515641282515:'3',
  6402615641282615:'4',
  6402715641282715:'5',
  6402815641282815:'6',
  6402915641282915:'7',
  6403015641283015:'8',
  6403115641283115:'9',
  }

def load_config():
    dict={}
    config = ConfigParser.RawConfigParser()
    config.read('/codes/remote/remote.cfg')

    dict['vendor']=config.getint('Settings','idVendor')

    dict['product']=config.getint('Settings','idProduct')

    dict['interface']=config.getint('Settings', 'interface')

    r=config.options('Key Mappings')

    for item in r:
        if config.get('Key Mappings',item)!='': 
            dict[item]=config.get('Key Mappings',item)
            #print config.get('Key Mappings',item)
    return dict

def pyus():

    try:
        load_log()
        dict=load_config()
        join_int = lambda nums: int(''.join(str(i) for i in nums))
        #print dict

        dev = usb.core.find(idVendor=dict['vendor'], idProduct=dict['product'])
        interface=dict['interface']

        if dev is None:
            raise ValueError('Device not found')

        if dev.is_kernel_driver_active(interface) is True:
                #print "but we need to detach kernel driver"
                dev.detach_kernel_driver(interface)
        #dev.detatch_kernel_driver(interface) 
        # set the active configuration. With no arguments, the first
        # configuration will be the active one
        dev.set_configuration()

        # get an endpoint instance
        cfg = dev.get_active_configuration()
        interface_number = cfg[(0,0)].bInterfaceNumber
        alternate_setting = usb.control.get_interface(dev,interface_number)
        intf = usb.util.find_descriptor(
            cfg, bInterfaceNumber = interface_number,
            bAlternateSetting = alternate_setting
        )

        ep = usb.util.find_descriptor(
            intf,
            # match the first IN endpoint
            custom_match = \
            lambda e: \
                usb.util.endpoint_direction(e.bEndpointAddress) == \
                usb.util.ENDPOINT_IN
        )

        assert ep is not None
        #print 'packet details',ep.bEndpointAddress , ep.wMaxPacketSize

        while 1:
            try:
                data = dev.read(ep.bEndpointAddress, ep.wMaxPacketSize*2,interface,1000)
                data=data.tolist()
                key=join_int(data)
                #print "Key is " , key
                if  key in diction:

                    try:
                        args=shlex.split(dict[diction[key]])
                        #print args
                        p=subprocess.Popen(args, stderr=subprocess.STDOUT, stdout=subprocess.PIPE)
                        #print "Pressed key is ",diction[key]
                    except:
                        pass

            except usb.core.USBError as e:
                pass
    except:
        pass

pyus()

#____________________________REPORT DESCRIPTOR EXAMPLE___________________
# Bus 001 Device 007: ID 147a:e001 Formosa Industrial Computing, Inc.
    # Couldn't open device, some information will be missing
    # Device Descriptor:
    # bLength                18
    # bDescriptorType         1
    # bcdUSB               1.10
    # bDeviceClass            0 (Defined at Interface level)
   # bDeviceSubClass         0
   # bDeviceProtocol         0
   # bMaxPacketSize0         8
   # idVendor           0x147a Formosa Industrial Computing, Inc.
   # idProduct          0xe001
   # bcdDevice            1.22
   # iManufacturer           1
   # iProduct                2
   # iSerial                 0
   # bNumConfigurations      1
  # Configuration Descriptor:
  # bLength                 9
  # bDescriptorType         2
# wTotalLength           34
# bNumInterfaces          1
# bConfigurationValue     1
# iConfiguration          4
# bmAttributes         0xa0
  # (Bus Powered)
  # Remote Wakeup
# MaxPower              300mA
# Interface Descriptor:
  # bLength                 9
  # bDescriptorType         4
  # bInterfaceNumber        0
  # bAlternateSetting       0
  # bNumEndpoints           1
  # bInterfaceClass         3 Human Interface Device
  # bInterfaceSubClass      1 Boot Interface Subclass
  # bInterfaceProtocol      2 Mouse
  # iInterface              0
    # HID Device Descriptor:
      # bLength                 9
      # bDescriptorType        33
      # bcdHID               1.10
      # bCountryCode            0 Not supported
      # bNumDescriptors         1
      # bDescriptorType        34 Report
      # wDescriptorLength      20
     # Report Descriptors:
       # ** UNAVAILABLE **
  # Endpoint Descriptor:
    # bLength                 7
    # bDescriptorType         5
    # bEndpointAddress     0x81  EP 1 IN
    # bmAttributes            3
      # Transfer Type            Interrupt
      # Synch Type               None
      # Usage Type               Data
    # wMaxPacketSize     0x0004  1x 4 bytes
    # bInterval              10 
```

# javascript - 从页面导航时 OpenERP 中的警告？

> ID：13201036
> 
> 赞同：0
> 
> 时间：2012-11-02T18:28:49.473
> 
> 标签：javascript, openerp

我有一些问题 ：

1.  保存记录（在创建中）方法（如成功保存记录）时是否可以显示警告消息。

2.我想在点击创建后从页面导航时显示警告消息，点击浏览器的某些菜单项、退格或后退按钮离开页面而不保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:41:29.330

1.  I can't understand why you want to show a warning message on save when everything is goes fine. Warning message is shown when something goes wrong or user break a rule eg. when user don't have a right to create a record of particular object and user try to create a record.

IMHO It is better to use a workflow to define the flow of process like we have a two state new and done default state is new when user create and enter all required field and click on save trigger a workflow and change state from new to done. That tell user that he complete the flow like wise you can put a state as you required. for more detail on workflow please read from [http://doc.openerp.com/v6.0/developer/3_9_Workflow_Business_Process/index.html](http://doc.openerp.com/v6.0/developer/3_9_Workflow_Business_Process/index.html)

2.I think this feature is already implemented in new upcoming version 7.0.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T11:33:37.100

strong textHi 是的，您可以在通过 JS 脚本保存记录时发出警报消息，您可能必须在路径 addons/web/static/src/js/viewform.js 中编写单行代码

```
on_button_save: function() {
    var self = this;
    return this.save().done(function(result){
        **if (!confirm(_t("The record has been saved"))) {
            return false;
        }**
        self.trigger("save", result);
        self.reload().then(function() {
            self.to_view_mode();
            var parent = self.ViewManager.ActionManager.getParent();
            if(parent){
                parent.menu.do_reload_needaction();
            }
        });
    });
}, 
```

# c++ - Visual Assist X 重命名符号如何工作？

> ID：13201039
> 
> 赞同：1
> 
> 时间：2012-11-02T18:29:00.333
> 
> 标签：c++, visual-studio, hungarian-notation, visual-assist

我想从一段巨大的代码中删除匈牙利符号，但我不确定插件如何处理替换。我的意思是 - 如果我有：

```
void DoNothing(int *pNothing)
{
pNothing = 0;
}; 
```

然后我单击“pNothing”并使用 VA 重构工具将其重命名为“nothing”，是仅在此函数中重命名它还是将在整个项目中的每个函数和类中重命名所有名为 pNothing 的指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:10:53.200

> 在使用 C/C++、C# 和 VB 编程时，重命名会更改定义和所有引用以及声明。重命名可选地更改注释和字符串。

因此，在您的示例中，它只会更改函数中的名称。但是，如果您要更改类成员的名称，那么它将在您的整个解决方案中更改它。

参考： http: [//www.wholetomato.com/products/features/rename.asp](http://www.wholetomato.com/products/features/rename.asp)

# javascript - 从外部文件调用外部 JS 函数

> ID：13201041
> 
> 赞同：1
> 
> 时间：2012-11-02T18:29:04.553
> 
> 标签：javascript, function

好的，情况就是这样。

我在页面中嵌入了一个语言切换链接，它将 URL 的字符串从 -eng.shtml 更改为 -fra.shtml 以及 Alias 值。

现在基本上在标题中我调用了两个脚本：

```
<script type="text/javascript" src="/js/langDB.js"></script>
<script type="text/javascript" src="/js/langToggle.js"></script> 
```

LangToggle.js 在 langDB.js 中有一个函数，但是当调用编程到 langDB.js 中的函数时，它并没有按预期工作，它的功能应该是将变量值从一个更改为另一个。

切换代码：

```
function js_changeit(){

    //Get the current page full URL 
        var mainName = String(window.location);

    //Base name
        var slash = mainName.lastIndexOf("/");  
        var dot = mainName.lastIndexOf(".");
        var quest = mainName.lastIndexOf("?");
        var name = mainName.substring(slash+1,dot);
        var ext = mainName.substring(dot,mainName.length);

    //Remove the _f is it exists
        var lang = name.substring(name.length-3,name.length);

    //Detect the site sections, get the current site title and the site primary alias strings
        var SiteSection = mainName.split("/");
        var currentAlias = SiteSection[3];
        var currentSite = SiteSection[2];

    //Split the url from Site to the end Alias section
        var siteSectionAlias = "http://" + currentSite + "/" + currentAlias + "/";
        var SectionaAlias = mainName.split(siteSectionAlias)
        var htmlFullDocFilename = SectionaAlias[1];

    //Extract the filename without the extension
        var shtmlLastPos = htmlFullDocFilename.lastIndexOf(".shtml");
        var docTitle = htmlFullDocFilename.substring(0,shtmlLastPos-4);     

    //Alias Toggles, when an alias is detected in the conditional list, switch to the other.

    langToggle();

    // Main Page
        if (lang != "eng") {
            window.open("http://" + currentSite + "/" + currentAlias + "/" + docTitle + "-eng" + ext, "_self");
        } else {
            window.open("http://" + currentSite + "/" + currentAlias + "/" + docTitle + "-fra" + ext, "_self");
        }
    } 
```

langDB.js 中的函数：

```
function langToggle() {
    switch(currentAlias) {
    //Switch the variable from English to French and vice versa depending on the current page's URL string when the toggle js link is clicked
        //If ENGLISH switch the variable to French
        case "about-us": 
            currentAlias = "a-notre-sujet"; break;
        //If FRENCH switch the variable to French
        case "a-notre-sujet": 
            currentAlias = "about-us"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "facilities-and-security": 
            currentAlias = "installations-et-securite"; break; 
        case "installations-et-securite": 
            currentAlias = "facilities-and-security"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "offenders": 
            currentAlias = "delinquants"; break; 
        case "delinquants": 
            currentAlias = "offenders"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "you-and-csc": 
            currentAlias = "scc-et-vous"; break; 
        case "scc-et-vous": 
            currentAlias = "you-and-csc"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "connecting": 
            currentAlias = "etablir-des-liens"; break; 
        case "etablir-des-liens": 
            currentAlias = "connecting"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "resources": 
            currentAlias = "ressources"; break; 
        case "ressources": 
            currentAlias = "resources"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "international-transfers": 
            currentAlias = "transferements-internationaux"; break; 
        case "transferements-internationaux": 
            currentAlias = "international-transfers"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "educational-resources": 
            currentAlias = "ressources-pedagogiques"; break; 
        case "ressources-pedagogiques": 
            currentAlias = "educational-resources"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "cfp": 
            currentAlias = "pfc"; break; 
        case "pfc": 
            currentAlias = "cfp"; break;
    }
} 
```

当我单击语言切换链接时，IE 会给我一个“currentAlias”未定义的错误，基本上变量的值似乎没有加载到从外部脚本调用的函数中......

我不太确定我做错了什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:31:31.807

> 当我单击语言切换链接时，IE 会给我一个错误，“currentAlias”未定义...

那是因为`currentAlias`是函数内的*局部变量。*无法访问.`js_changeit``langToggle``js_changeit`

~~如果您的代码确实需要访问它，并且这些确实必须是单独的文件，则您必须`js_changeit`将它放在全局命名空间中（属性 on `window`）：~~

 ~~```
window.currentAlias = currentAlias; 
```~~ 

...然后从那里使用它。而且您需要确保它`js_changeit`在运行之前运行，`langToggle`以便运行它的代码`window`。

（我说“全局变量”和“属性 on `window`”可以互换，因为所有全局变量都是单个 [未命名] JavaScript 全局对象上的属性，并且在浏览器上，该对象可以从全局变量`window`[`window`是一个指向对象它是]的属性。）

~~但是如果`langToggle`需要访问它，一些重构可能是合适的，尤其是这样你就可以避免添加更多的全局符号。~~

抱歉，刚刚再次查看了您的代码并看到了`js_changeit` *调用* `langToggle`。因此，更好的解决方案是作为参数`js_changeit`传入。不需要全局变量。`currentAlias``langToggle`

所以改变这一行`js_changeit`：

```
langToggle(); 
```

到：

```
currentAlias = langToggle(currentAlias); 
```

并更改`langToggle`，使其接受`currentAlias`作为参数并为其返回更新后的值。

您误入歧途的一点是，函数不会从*调用它的范围继承变量，而是从**定义*它的范围继承它们。所以`currentAlias`不存在，`langToggle`因为它没有在声明的范围内`langToggle`声明。

让我们举一个更简单的例子：

```
function foo() {
    var answer = 42;

    bar();
}

function bar() {
    console.log(answer); // <== Error, `answer` is not defined
} 
```

`bar`从*调用*，`foo`但不继承`foo`的变量。如果`foo`想与 进行通信`bar`，它通常会将其作为参数传递：

```
function foo() {
    var answer = 42;

    bar(answer);
}

function bar(a) {
    console.log(a); // This is fine
} 
```

那么，如果我们调用`foo`，`bar`将记录“42”。

同样，如果`bar`需要将某些内容传回给`foo`，它通常会通过返回一个值来做到这一点：

```
function foo() {
    var answer = 42;
    var b;

    b = bar(answer);
    console.log(b);
}

function bar(a) {
    console.log(a);
    return a * 2;
} 
```

现在，如果我们调用`foo`，`bar`将记录“42”`foo`并将记录“84”。

还有其他方法可以共享信息（对象属性`foo`、`bar`闭包），但是如果您对这些东西不熟悉，那么现在就可以开始了。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:34:39.927

好吧，您应该完全按原样接收错误消息。如果您查看您的 langToggle 函数，您会立即尝试引用 currentAlias，但它尚未在函数的范围内定义。

我看到你已经在函数 js_changeit 的范围内定义了它，但声明只能在该函数的范围内使用，而不是在 langToggle 函数范围内。

# c - C中的十进制到二进制算法

> ID：13201042
> 
> 赞同：7
> 
> 时间：2012-11-02T18:29:07.180
> 
> 标签：c, algorithm, binary, decimal

我正在尝试使用以下算法将十进制数转换为 C 中的二进制数。我不明白为什么它对于某些输入不能正常工作（例如，对于 1993 年，我得到 1420076519）。

```
int aux=x;
long bin=0;
while (aux>0)
{
    bin=bin*10+aux%2;
    aux=aux/2;
}
printf("%d in decimal is %ld in binary.", x, bin); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:33:03.207

当您打印 long 时，您不会打印二进制文件。转换为二进制或显示十进制数的二进制表示的最佳方法是将其存储在字符串中。波纹管是另一个 SO[答案中提供的解决方案](https://stackoverflow.com/questions/7911651/decimal-to-binary)

```
void getBin(int num, char *str)
{
  *(str+5) = '\0';
  int mask = 0x10 << 1;
  while(mask >>= 1)
    *str++ = !!(mask & num) + '0';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T23:36:42.713

如果您知道算法，就没有理由不使用`itoa`

[http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)

```
#include <stdio.h>
#include <stdlib.h>

int main ()
{
  int n;
  char output[100];

  printf("Enter a number: ");
  scanf("%d", &n);

  itoa(n, output, 2); //2 means base two, you can put any other number here

  printf("The number %d is %s in binary.", n, output);

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T19:05:39.063

转换是如何工作的？

```
/* Example: 
   125(10) -----> ?(2)                     125  |_2
                                            -1-   62  |_2
                                                  -0-   31 |_2
                                                        -1-  15 |_2
                                                             -1-  7 |_2
                                                                 -1-  3 |_2
                                                                     -1-  1 */ 
```

所以在这个例子中，125(10) 的二进制数是 1111101(2)，这就是我在函数中描述的过程。

```
/* Functions declaration (Prototype) */

 int wordCalculator( int * const word, long int number, int base );
    int main( void )
        {
            int i, base;
            int word[ 32 ];
            unsigned long int number;

            printf( "Enter the decimal number to be converted: " );
            scanf( "%ld", &number );
            printf( "\nEnter the new base: " );
            scanf( "%d", &base );

            i = wordCalculator( word, number, base );

            printf( "The number is: " );

            for(; i >= 0; i--){

                if ( word[ i ] <= 9)
                    printf( "%d", word[ i ] );

                else
                    /* 65 represents A in ASCII code. */
                    printf( "%c", ( 65 - 10 + word[ i ] ) );
            }

            printf( "\n" );
        }

        int wordCalculator( int * const word, long int number, int base )
        {
            unsigned long int result = number;
            int i, difference;

            i = 0;
            do{
                difference = result % base;
                result /= base;
                *( word + i ) = difference;
                i++;

                if ( result < base )
                    *( word + i ) = result;

            } while( result >= base );

            return i;

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T18:44:37.147

我认为最短的答案是

```
char* getBinary(int n,char *s)
{
  while(n>0)
  {
    *s=(n&1)+'0';
    s++;
    n>>=1;
  }
  *s='\0';
  return s;
} 
```

在被调用的函数中以相反的方式打印它..因为存储已经完成`LSB`但是`MSB` 我们必须先打印`MSB`然后`LSB`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T18:34:42.207

您应该使用字符串来存储二进制数。以下代码应该适合您。

```
#include <stdio.h>
#include <stdlib.h>

char *decimal_to_binary(int);

main()
{
   int n, c, k;
   char *pointer;

   printf("Enter an integer in decimal number system\n");
   scanf("%d",&n);

   pointer = decimal_to_binary(n);
   printf("Binary string of %d is: %s\n", n, pointer);

   free(pointer);

   return 0;
}

char *decimal_to_binary(int n)
{
   int c, d, count;
   char *pointer;

   count = 0;
   pointer = (char*)malloc(32+1);

   if ( pointer == NULL )
      exit(EXIT_FAILURE);

   for ( c = 31 ; c >= 0 ; c-- )
   {
      d = n >> c;

      if ( d & 1 )
         *(pointer+count) = 1 + '0';
      else
         *(pointer+count) = 0 + '0';

      count++;
   }
   *(pointer+count) = '\0';

   return  pointer;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-24T06:33:49.143

您可以使用以下[算法将十进制数转换为二进制数系统](http://codeforwin.blogspot.in/2015/08/c-program-to-convert-from-decimal-to-binary-number-system.html#algorithm)。

```
#include <stdio.h>  

int main()  
{  
    long long decimal, tempDecimal, binary;  
    int rem, place = 1;  

    binary = 0;  

    /* 
     * Reads decimal number from user 
     */  
    printf("Enter any decimal number: ");  
    scanf("%lld", &decimal);  
    tempDecimal = decimal;  

    /* 
     * Converts the decimal number to binary number 
     */  
    while(tempDecimal!=0)  
    {  
        rem = tempDecimal % 2;  

        binary = (rem * place) + binary;  

        tempDecimal /= 2;  
        place *= 10;  
    }  

    printf("\nDecimal number = %lld\n", decimal);  
    printf("Binary number = %lld", binary);  

    return 0;  
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-20T19:37:55.460

这是我写的一个递归解决方案，它很简单并且工作正常。

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

int  printBinary(int N)
{
    if(N < 0){errno = EINVAL; return -1;}

    if(N == 0)
        printf("0");
    else if(N == 1)
        printf("1");
    else
    {
        printBinary(N/2);
        printf("%d", N%2);
    }

    return 0;
}

int main(int argc, char* argv[])
{
    if(argc < 2)
    {
        fprintf(stderr, "usage: %s NUM\nWhere NUM is an integer number\n", argv[0]);
        exit(EXIT_FAILURE);
    }
    errno = 0;

    long NUM = strtol(argv[1], NULL, 10);
    if(NUM == 0 && errno != 0)
    {
        perror("Error during number acquisition: ");
        exit(EXIT_FAILURE);
    }

    if(NUM < 0)
    {
        printf("-");
        printBinary(-NUM);
    }
    else
        printBinary(NUM);

    printf("\n");

    return 0;
} 
```

# c# - Linq 并与 Datetime 一起工作？

> ID：13201045
> 
> 赞同：1
> 
> 时间：2012-11-02T18:29:15.620
> 
> 标签：c#, .net, linq

我需要这样做：

```
context.Ads.Where(c => c.PublishedDate.HasValue &&
        c.EndDate.HasValue &&
        c.EndDate.Value.AddTicks(c.PublishedDate.Value.Ticks) > currentTime &&
        c.AdStatusMail.Where(b => b.StatusKey != (int)AdStatusMailKey.EndedRemainder && b.StatusKey != (int)AdStatusMailKey.MiddleRemainder).Count() < 1)
        .ToList(); 
```

问题是 AddTicks 不能在 Linq 中使用。我看过 EntityFunctions 但看不到如何使用它来做我需要的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:34:44.810

IQueryable 无法处理刻度，使其成为 IEnumerable（或 tolist）。这是一个例子：

```
context.Ads.Where(c => c.PublishedDate.HasValue && c.EndDate.HasValue && c.AdStatusMail.Where(b => b.StatusKey != (int)AdStatusMailKey.EndedRemainder && b.StatusKey != (int)AdStatusMailKey.MiddleRemainder).Count() < 1)
           .AsEnumerable()
           .Where (c => c.EndDate.Value.AddTicks(c.PublishedDate.Value.Ticks) > currentTime)
           .ToList(); 
```

# jquery - simplemodal 和 gif 未加载

> ID：13201046
> 
> 赞同：1
> 
> 时间：2012-11-02T18:29:24.577
> 
> 标签：jquery, iis-7, simplemodal

我正在使用 simplemodal jquery 插件并使用它来显示动画 gif。它在本地主机上运行良好，一旦我将代码/图像移动到服务器（IIS 7），gif 将不会显示。这是我需要更改的 IIS 设置吗？所有其他 GIF 都显示得很好。这是我调用模态的代码：

```
$.modal('<center><img alt="" src="./../../Content/Images/ajaxloader1.gif"/></center>', {      minHeight: 66, minWidth: 100 }); 
```

# c# - 由于派生表，实体框架很慢

> ID：13201049
> 
> 赞同：9
> 
> 时间：2012-11-02T18:29:29.657
> 
> 标签：c#, mysql, entity-framework, linq-to-entities, database-performance

我将 MySQL Connector/Net 6.5.4 与 LINQ to 实体一起使用，我经常得到糟糕的查询性能，因为实体框架生成使用派生表的查询。

这是我多次遇到的简化示例。在 C# 中，我编写了这样的查询：

```
var culverCustomers = from cs in db.CustomerSummaries where cs.Street == "Culver" select cs;
// later...
var sortedCustomers = culverCustomers.OrderBy(cs => cs.Name).ToList(); 
```

而不是像这样生成简单的查询：

```
SELECT cust.id FROM customer_summary cust WHERE cust.street = "Culver" ORDER BY cust.name 
```

实体框架生成一个带有派生表的查询，如下所示：

```
SELECT Project1.id FROM (
    SELECT cust.id, cust.name, cust.street FROM customer_summary cust
    WHERE Project1.street = "Culver"
) AS Project1 -- here is where the EF generates a pointless derived table
ORDER BY Project1.name 
```

如果我解释这两个查询，我会在第一个查询中得到这个：

```
id, select_type, table, type, possible_keys, rows
1,  PRIMARY,     addr,  ALL,  PRIMARY,       9
1,  PRIMARY,     cust,  ref,  PRIMARY,       4 
```

...对于实体框架查询，像这样可怕的事情

```
id, select_type, table,      type, possible_keys, rows
1,  PRIMARY,     <derived2>, ALL,                 9639
2,  DERIVED,     addr,       ALL,  PRIMARY,       9
2,  DERIVED,     cust,       ref,  PRIMARY,       4 
```

注意第一行，MySQL 解释说它正在扫描**9000+ 条记录**。由于派生表，MySQL 正在创建一个临时表并加载每一行。（或者我是根据这样的文章推断的：[Derived Tables and Views Performance](http://www.mysqlperformanceblog.com/2006/08/31/derived-tables-and-views-performance/)）

**如何防止实体框架使用派生表，或者如何说服 MySQL 对这样的查询进行明显的优化？**

为了完成，这里是这个 linq 查询的源视图：

```
create view  customer_summary as
select cust.id, cust.name, addr.street
customers cust 
join addresses addr
on addr.customer_id = cust.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T17:52:34.860

I think your query statement is missing 'select'. You have not identified the record(s) you want. your query:

```
var culverCustomers = from cs in db.CustomerSummaries 
                        where cs.Street == "Culver"; 
```

//no select

what are you selecting from the table? try this

example:

```
var culverCustomers =  from cs in db.CustomerSummaries 
                        where cs.Street == "Culver"
                        select cs; 
```

# asp.net - 使用 (AjaxControlToolkit)ASP.NET AJAX 控制工具包和 Telerik RadControls for ASP.NET AJAX 的问题

> ID：13201053
> 
> 赞同：1
> 
> 时间：2012-11-02T18:29:50.643
> 
> 标签：asp.net, ajax, telerik, scriptmanager, toolkit

我正在使用 (AjaxControlToolkit)ASP.NET AJAX Control Toolkit，它是一个构建在 Microsoft ASP.NET AJAX 框架之上的开源项目。

另外，我正在使用 Telerik RadControls for ASP.NET AJAX

为了使用 (AjaxControlToolkit)ASP.NET AJAX 控件工具包，我必须在我的 aspx 页面中声明 asp:ScriptManager。

为了将 Telerik RadControls 用于 ASP.NET AJAX，我必须在我的 aspx 页面中声明 telerik:RadScriptManager。

可悲的是，我收到以下错误：

只能将 ScriptManager 的一个实例添加到页面中。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：只能将 ScriptManager 的一个实例添加到页面。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

有人可以告诉我如何使用这两种技术吗？

谢谢，

新的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:32:46.687

删除 asp:scriptmanager，因为 telerik 是建立在 asp 之上的，并且可以处理这两种技术。

# excel - 基于数据透视表数据的自定义计算

> ID：13201055
> 
> 赞同：1
> 
> 时间：2012-11-02T18:30:00.527
> 
> 标签：excel, pivot, pivot-table

我有一个返回以下数据的数据透视表：

`Accounting_Code`-`(Values are 12345, 23456, 45678)`

`Users`-`(Values are User 1, User 2, USer 3)`

`Total_Time`-`(Values are Hours logged per accounting code per user)`

我想根据会计代码创建两个自定义字段。首先是创建一个名为“Core”的字段，该字段根据 Accountg 字段中的 12345 的值进行计算。第二个称为“其他”，并根据“核心”以外的项目计算值。

我的目的是捕捉人们在 Core 和 Other 之间花费的时间百分比。

我正在努力想出基于字段值获取此数据的公式。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:48:01.647

您可以使用数据透视表中的计算项目函数来执行此操作。

首先假设这是您的数据。

```
AccCode UserID  TotalTime
12345   1   02:00
12345   2   04:00
12345   3   03:00
23456   1   03:00
23456   2   01:00
23456   3   01:00
34567   1   04:00
34567   2   02:00
34567   3   01:00 
```

创建一个简单的数据透视表，如下所示：

```
AccCode Sum of TotalTime
12345   09:00:00
23456   05:00:00
34567   07:00:00
Grand Total 21:00:00 
```

现在，单击您的数据透视表，选择包含 12345 的单元格。单击**数据透视表工具**功能区，然后单击**字段、项目和集**按钮（在计算区域内）。选择**计算项**。

首先是你的核心项目。将计算项目的名称设置为“核心”，然后在项目部分双击 12345。单击**添加**以将新行插入数据透视表。

对“其他”重复此操作，但这次公式将是 =“23456”+“34567”。

过滤数据透视表的行以仅显示“Core”和“Other”，然后右键单击 Sum of TotalTime 列，将鼠标悬停在**Show Values As**上，然后选择**% of Grand Total**。

# c# - Howto：下载在 C# 中保留原始名称的文件？

> ID：13201059
> 
> 赞同：3
> 
> 时间：2012-11-02T18:30:17.863
> 
> 标签：c#, download, webclient

我在服务器上有可以从格式如下的 URL 访问的文件：http://address/Attachments.aspx?id=GUID

我可以访问 GUID，并且需要能够将多个文件下载到同一个文件夹。

如果您获取该 URL 并将其放入浏览器中，您将下载该文件并且它将具有原始文件名。

我想在 C# 中复制这种行为。我尝试过使用 WebClient 类的 DownloadFile 方法，但是你必须指定一个新的文件名。更糟糕的是，DownloadFile 会覆盖现有文件。我知道我可以为每个文件生成一个唯一的名称，但我真的很喜欢原始文件。

是否可以下载保留原始文件名的文件？

**更新：**

使用下面的奇妙答案来使用 WebReqest 类，我想出了以下完美的方法：

```
 public override void OnAttachmentSaved(string filePath)
    {
        var webClient = new WebClient();

        //get file name
        var request = WebRequest.Create(filePath);
        var response = request.GetResponse();
        var contentDisposition = response.Headers["Content-Disposition"];
        const string contentFileNamePortion = "filename=";
        var fileNameStartIndex = contentDisposition.IndexOf(contentFileNamePortion, StringComparison.InvariantCulture) + contentFileNamePortion.Length;
        var originalFileNameLength = contentDisposition.Length - fileNameStartIndex;
        var originalFileName = contentDisposition.Substring(fileNameStartIndex, originalFileNameLength);

        //download file
        webClient.UseDefaultCredentials = true;
        webClient.DownloadFile(filePath, String.Format(@"C:\inetpub\Attachments Test\{0}", originalFileName));            
    } 
```

只需进行一些字符串操作即可获得实际的文件名。我太激动了。谢谢大家！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T19:06:09.217

`Content-Disposition`正如评论中所暗示的，文件名将在标题中可用。不确定如何在使用时获得它的价值`WebClient`，但它相当简单`WebRequest`：

```
WebRequest request = WebRequest.Create("http://address/Attachments.aspx?id=GUID");
WebResponse response = request.GetResponse();
string originalFileName = response.Headers["Content-Disposition"];
Stream streamWithFileBody = response.GetResponseStream(); 
```

# asp.net - 为什么天蓝色会引发此错误：无法加载文件或程序集'Microsoft.Build.Utilities.v3.5

> ID：13201060
> 
> 赞同：1
> 
> 时间：2012-11-02T18:30:27.320
> 
> 标签：asp.net, asp.net-mvc, azure

我已在本地计算机上将 EntityFramework 从 4.1 升级到 5，并将 .NET Framework 升级到 4.5，一切正常，但是当我在 Azure 上发布我的更改时，我收到此错误：

```
Server Error in '/' Application.

Could not load file or assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Assembly Load Trace: The following information can be helpful to determine why the assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' could not be loaded.

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:36:18.553

检查该程序集的项目引用。确保您已将该引用的属性上的 copy local 设置为 true。此外，升级 Azure SDK 和 EF 可能会影响项目引用的程序集版本。确保您的项目中也引用了正确的版本。

发现什么可能是您的问题的根源 -> 特别是如果您正在升级您的项目：http: [//ivarunsingh.blogspot.com/2011/12/microsoftbuildutilitiesv35-report.html](http://ivarunsingh.blogspot.com/2011/12/microsoftbuildutilitiesv35-report.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:46:29.503

您是否正在部署到 Windows Server 2012 映像（我看到您使用的是 .NET 4.5）？如果您使用 Azure SDK 1.8 并且 OSVersion = 3（新 SDK 上的新云服务项目的默认设置）...

Windows Server 2012 没有启用 .NET 3.5 库，您必须启用该功能（我相信安装它）。您可能必须自动启用 .NET 3.5。

# java - 如何在bin文件夹中创建一个txt文件

> ID：13201062
> 
> 赞同：4
> 
> 时间：2012-11-02T18:30:33.640
> 
> 标签：java, filesystems

我正在处理一个java项目，我想知道是否可以编写一个可以`txt`直接在`bin`文件夹中创建文件的代码（例如eclipse的bin文件夹，我可以`getClass()`用来访问`txt`文件）以便用户使用该程序时将无法看到创建的`txt`文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:39:05.127

你肯定可以做到这一点。但是再想想。用户没有从 Eclipse 运行程序。用户通常运行打包在 jar 中的程序，因此所有类文件都不在文件系统中，而是在 jar 中。此外，除了特殊文件夹外，用户甚至可能没有写入文件系统的权限。

底线：您想要创建在文件系统中存储一些运行时数据的应用程序，您应该使用用户主目录或临时目录，或者使用`java.util.prefs.Preferences`提供平台独立的方式来使用 unix 中的文件系统和 windows 中的注册表来保存和检索数据。

如果您选择自己创建文件，您可以使用系统属性`user.home`和`java.io.tmpdir`.

# jclouds - 在 CloudStack 3 上的 Cloudify 版本 2.2 或更低版本上注册 VM：NumberFormatException

> ID：13201064
> 
> 赞同：3
> 
> 时间：2012-11-02T18:30:36.363
> 
> 标签：jclouds, cloudify

我试图让 CloudStack 3.0 与 Cloudify 2.1 和 2.2 一起使用，但是我得到了下面概述的错误：

**堆栈跟踪**

第一个遇到的错误是：

```
java.lang.NumberFormatException: For input string: "11e2ccc4-43dd-4558-99ef-a687000g632f"
    at org.cloudifysource.esc.shell.installer.CloudGridAgentBootstrapper.boostrapCloudAndWait(CloudGridAgentBootstrapper.java:177)
    at org.cloudifysource.esc.shell.commands.BootstrapCloud.doExecute(BootstrapCloud.java:98)
    at org.cloudifysource.shell.commands.AbstractGSCommand.execute(AbstractGSCommand.java:79)
    at org.apache.felix.gogo.commands.basic.AbstractCommand.execute(AbstractCommand.java:35)
    at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:474)
    at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:400)
    at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)
    at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)
    at org.apache.karaf.shell.console.jline.Console.run(Console.java:221)
    at org.apache.karaf.shell.console.Main.run(Main.java:191)
    at org.apache.karaf.shell.console.Main.run(Main.java:89)
    at org.cloudifysource.shell.GigaShellMain.main(GigaShellMain.java:122)
Caused by: org.cloudifysource.esc.driver.provisioning.CloudProvisioningException: One or more managememnt machines failed. The first encountered error was: java.lang.NumberFormatException: For input string: "11e2ccc4-43dd-4558-99ef-a687000g632f"
    at org.cloudifysource.esc.driver.provisioning.jclouds.DefaultProvisioningDriver.handleProvisioningFailure(DefaultProvisioningDriver.java:564)
    at org.cloudifysource.esc.driver.provisioning.jclouds.DefaultProvisioningDriver.doStartManagementMachines(DefaultProvisioningDriver.java:431)
    at org.cloudifysource.esc.driver.provisioning.jclouds.DefaultProvisioningDriver.startManagementMachines(DefaultProvisioningDriver.java:365)
    at org.cloudifysource.esc.shell.installer.CloudGridAgentBootstrapper.boostrapCloudAndWait(CloudGridAgentBootstrapper.java:174)
    ... 13 more
Caused by: java.util.concurrent.ExecutionException: java.lang.NumberFormatException: For input string: "52c2cfb4-40eb-4928-99ef-a687000a632c"
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
    at java.util.concurrent.FutureTask.get(FutureTask.java:91)
    at org.cloudifysource.esc.driver.provisioning.jclouds.DefaultProvisioningDriver.doStartManagementMachines(DefaultProvisioningDriver.java:402)
    ... 15 more
Caused by: java.lang.NumberFormatException: For input string: "11e2ccc4-43dd-4558-99ef-a687000g632f"
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1222)
    at java.lang.Double.parseDouble(Double.java:510)
    at com.google.gson.stream.JsonReader.nextLong(JsonReader.java:561)
    at com.google.gson.internal.bind.TypeAdapters$8.read(TypeAdapters.java:250)
    at com.google.gson.internal.bind.TypeAdapters$8.read(TypeAdapters.java:242)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40)
    at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:81)
    at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:60)
    at com.google.gson.Gson.fromJson(Gson.java:755)
    at org.jclouds.http.functions.ParseFirstJsonValueNamed.apply(ParseFirstJsonValueNamed.java:81)
    at org.jclouds.http.functions.ParseFirstJsonValueNamed.apply(ParseFirstJsonValueNamed.java:48)
    at com.google.common.util.concurrent.Futures$4.apply(Futures.java:503)
    at com.google.common.util.concurrent.Futures$4.apply(Futures.java:501)
    at com.google.common.util.concurrent.Futures$3.apply(Futures.java:279)
    at com.google.common.util.concurrent.Futures$ChainingListenableFuture.run(Futures.java:729)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:05:43.780

CloudStack 版本 3 及更高版本与 Cloudify 2.2 或更低版本或任何依赖于 jcloud 1.4 或更低版本的程序不兼容。简而言之，解决方案只是迁移到 Cloudify 2.3，我必须从源代码（https://github.com/CloudifySource/cloudify）构建它并让 Cloudify 和 CloudStack 正常工作

这个问题实际上是因为 CloudStack 从模板上的长类型 id 键移动到字符串键，以下类 org.jclouds.cloudstack.domain.Template 类将 id 设置为长，这会导致 JSON 上的解析问题，如您在堆栈跟踪。

# imagemagick - 如何在 Mountain Lion (10.8.2) 上安装 Image Magick for MAMP (Pro)

> ID：13201071
> 
> 赞同：16
> 
> 时间：2012-11-02T18:31:10.983
> 
> 标签：imagemagick, mamp, osx-mountain-lion

我一直在寻找一种在我的 Mountain Lion 设置（我使用 MAMP Pro 的地方）上安装 Image Magick 的方法。我确实找到[了这篇文章](http://www.adamstacey.co.uk/2010/06/28/installing-image-magick-and-imagick-for-php-for-mamp/)，但它并不特定于 ML。在 SO 上还发现了其他几个类似的问题，但我认为它们太具体了。我不擅长这种事情也无济于事。谁能指点我一个好的资源？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-05-27T18:16:14.173

[正如erwinheiser 的评论](https://stackoverflow.com/questions/13201071/how-to-install-image-magick-for-mamp-pro-on-mountain-lion-10-8-2#comment34751997_15023091)中所指出的，MAMP 3 现在**预装了 imagemagick**。我检查了[MAMP 的用户指南 (PDF)](http://www.mamp.info/en/documentation/MAMP-PRO-3-User-Guide.pdf)并发现了这一点：

> 默认情况下包含 ImageMagick PHP 模块，但您必须在 php.ini 模板文件中启用它。去除那个 ';' 从下一行。
> 
> `;extension=imagick.so`

您如何找到并更改MAMP Pro的（正确的） **php.ini文件？**

*   从 MAMP 的菜单中选择**文件**›**编辑模板**› **PHP** › [最新版本]
    *   *或*使用键盘快捷键：**⌘4**
*   进行编辑。（Imagick 在我的第 542 行。）
*   保存并关闭文件。
*   MAMP 询问您是否要立即重新启动服务器，选择**yes**。

你完成了！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-22T11:25:22.057

**如果您使用的是最新版本的 MAMP，请务必查看 Joel Farris 的回答**

* * *

我终于设法使用 Homebrew 和这里的说明正确安装它：http: [//egoco.de/post/23167969231/installing-imagemagick-for-php-and-mamp](http://egoco.de/post/23167969231/installing-imagemagick-for-php-and-mamp)

我确实必须运行 brew doctor 和 brew link 几次来修复依赖项（并更改一两个文件的权限），然后使用

```
brew install php54-imagick 
```

而不是网址中提到的那个。

他最后提到的扩展名（您必须粘贴到不同的 ini 文件中的位）是：

```
[imagick]
extension="/usr/local/Cellar/php54-imagick/3.1.0RC2/imagick.so" 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-10T16:28:13.897

MAMP 安装了 Imagick。我在 OS X 10.10.3 (Yosemite) 上运行了 MAMP v3.2.1（不是 MAMP Pro）。

我通过编辑 MAMP 附带的 php.ini 文件启用了 imagick。

php.ini 文件位于以下路径：

```
/Applications/MAMP/bin/php/php5.6.7/conf/php.ini 
```

将 5.6.7 替换为您的 php 版本号。

php.ini 文件将包含以下行：

```
;extension=imagick.so 
```

将该行更改为：

```
extension=imagick.so 
```

现在重新启动 MAMP 服务器，一切顺利。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-22T22:50:47.500

我们在这里制作了一个 Mac 安装包——http [://www.cactuslab.com/imagemagick/](http://www.cactuslab.com/imagemagick/)

# sql - 2 小时间隔的最小值、最大值、平均值

> ID：13201077
> 
> 赞同：1
> 
> 时间：2012-11-02T18:31:41.470
> 
> 标签：sql, postgresql, datetime, aggregate, generate-series

在下面的查询中，我正在使用 PostgreSQL 计算两小时间隔的最小值、最大值和平均值。

该查询在偶数开始时间可以正常工作`(..04:00:00+05:30)`，但它给出的结果与奇数开始时间的偶数开始时间相似`(..05:00:00+05:30)`。乘以 2 的倍数返回偶数小时，这就是问题所在。

```
SELECT tagid, CAST(sample_time_stamp as Date) AS stat_date, 
       (floor(extract(hour from sample_time_stamp)/2) * 2)::int AS hrs,
       min(sensor_reading) AS theMin,   
       max(sensor_reading) AS theMax,
       avg(sensor_reading) AS theAvg
FROM sensor_readings WHERE tagid =1 AND 
sample_time_stamp BETWEEN '2012-10-23 01:00:00+05:30'
                  AND     '2012-10-23 05:59:00+05:30'
GROUP BY tagid,CAST(sample_time_stamp as Date),
         floor(extract(hour from sample_time_stamp)/2) * 2
ORDER BY tagid,stat_date, hrs 
```

### 奇数开始时间的输出 ('2012-10-23 01:00:00+05:30')

```
tagid    date          hrs  theMin  themax    theAvg 
1        2012-10-23    0    6       58        30.95
1        2012-10-23    2    2       59        29.6916666666667
1        2012-10-23    4    3       89        31.7666666666667 
```

### 偶数开始时间的输出 ('2012-10-23 02:00:00+05:30')

```
tagid    date          hrs  theMin   themax    theAvg
1        2012-10-23    2    2        59        29.6916666666667
1        2012-10-23    4    3        89        31.7666666666667 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:05:31.883

要从您的最小时间戳开始获得恒定的时间范围：

```
WITH params AS (
   SELECT '2012-10-23 01:00:00+05:30'::timestamptz AS _min  -- input params
         ,'2012-10-23 05:59:00+05:30'::timestamptz AS _max
         ,'2 hours'::interval                      AS _interval
   )
  ,ts AS (SELECT generate_series(_min, _max, _interval) AS t_min FROM params)
  ,timeframe AS (
   SELECT t_min
         ,lead(t_min, 1, _max) OVER (ORDER BY t_min) AS t_max
   FROM ts, params
   )
SELECT s.tagid
      ,t.t_min
      ,t.t_max     -- mildly redundant except for last row
      ,min(s.sensor_reading) AS the_min
      ,max(s.sensor_reading) AS the_max
      ,avg(s.sensor_reading) AS the_avg
FROM   timeframe t
LEFT   JOIN sensor_readings s ON  s.tagid = 1
                              AND s.sample_time_stamp >= t.t_min
                              AND s.sample_time_stamp <  t.t_max
GROUP  BY 1,2,3
ORDER  BY 1,2; 
```

可用于*任何*时间范围和*任何*间隔长度。需要 PostgreSQL 8.4 或更高版本。

如果最大时间戳`_max`不落在`_min + n * _interval`最后一个时间帧上，则截断。因此，最后一行可以表示比您想要的更短的时间范围`_interval`。

### 关键要素

*   [通用表表达式 (CTE)](http://www.postgresql.org/docs/current/interactive/queries-with.html)更易于处理。在顶部 CTE 中输入*一次*参数值 `params`。

*   [`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)用于创建时间栅格的间隔。

*   [具有 3 个参数（包括默认值）的窗口函数`lead(...)`](http://www.postgresql.org/docs/current/interactive/functions-window.html)- 覆盖最后一行的特殊情况。

*   `LEFT JOIN`在栅格和实际数据之间，因此没有匹配数据的时间范围仍将显示在结果中（以`NULL`值作为数据）。这也是后来编辑的原因：`WHERE`条件必须移动到`LEFT JOIN`条件，才能实现。

### 使用递归 CTE 生成替代时间框架：

```
WITH RECURSIVE params AS (
   SELECT '2012-10-23 01:00:00+05:30'::timestamptz AS _min  -- input params
         ,'2012-10-23 05:59:00+05:30'::timestamptz AS _max
         ,'2 hours'::interval                      AS _interval
   )
   , timeframe AS (
   SELECT _min AS t_min, LEAST(_min + _interval, _max) AS t_max
   FROM   params

   UNION  ALL
   SELECT t_max, LEAST(t_max + _interval, _max)
   FROM   timeframe t, params p
   WHERE  t_max < _max
   )
SELECT ... 
```

稍微快一点……随你挑。
[**-> sqlfiddle**](http://www.sqlfiddle.com/#!12/71568/5)显示两者。

请注意，即使在声明时也可以拥有*非递归*`WITH RECURSIVE`CTE（另外） 。

### 表现与指数

应该比您的原始查询更快。一半的代码处理生成时间栅格，这涉及很少的行并且*非常*快。处理实际表行（昂贵的部分）变得更便宜，因为我们不再计算新值`sample_time_stamp`。

你绝对应该有一个形式的[多列索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)：

```
CREATE INDEX foo_idx ON sensor_readings (tagid, sample_time_stamp DESC); 
```

我`DESC`假设您更频繁地查询最近的条目（后来的时间戳）。如果不是这种情况，请删除修饰符。无论哪种方式都没有太大的区别。

# r - 如何从长列表中提取子集？

> ID：13201081
> 
> 赞同：1
> 
> 时间：2012-11-02T18:32:07.327
> 
> 标签：r, list, subset

我有一个`x`包含数百万条目的列表。我想将所有长度大于一的条目放入一个新列表中`z`。我怎样才能在 R 中有效地做到这一点？

我尝试了这段代码，而 R 只是保持运行很长时间。

```
z=NULL
for(i in 1:length(x)) {
  if(length(x[[i]])!=1) z=list(z,x[[i]])
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T18:41:52.560

这是您要使用的一种情况`vapply`：

```
z <- x[vapply(x, length, integer(1)) > 1L] 
```

以下是比较`sapply`和的基准`vapply`：

```
A <- list( x = c(), y = c(1), z = c(1, 2))
B <- A[sample(1:3, 1e7, replace = TRUE)]
system.time(sapply(B, length))
#    user  system elapsed 
#   55.95    0.54   56.50 
system.time(vapply(B, length, integer(1)))
#    user  system elapsed 
#    6.78    0.00    6.78 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T18:34:36.647

做就是了：

```
z = x[sapply(x, length) > 1] 
```

# iphone - 如果安装了 IOS 6，则在操作表上显示按钮

> ID：13201082
> 
> 赞同：1
> 
> 时间：2012-11-02T18:32:08.603
> 
> 标签：iphone, objective-c, ios, facebook, ios6

我创建了一个操作表，我想显示 Facebook 共享选项。我不想使用 Composeviewcontroller。我的问题是：如果用户安装了 IOS6，是否可以只显示 Facebook 共享选项？代码片段将非常有用。我添加了社交框架并创建了一个带有一些按钮的操作表：

> UIActionSheet *actionsheet = [[UIActionSheet alloc] initWithTitle:@"Empfehlen" delegate:(id)self cancelButtonTitle:@"Abbrechen" 破坏性ButtonTitle:nil otherButtonTitles:@"via Mail", @"via iMessage/SMS",@"Tweet" , 无];

有没有人建议或解决方案该怎么做？

我的应用程序使用 iOS 5，我想保留它。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:42:31.197

这是对 OP 在评论部分提出的后续问题的回答。

在 iOS 6+ 下你可以使用一段`UIActivityViewController`时间，在 iOS 5 下你仍然可以使用`UIActionSheet`.

```
Class avcClass = NSClassFromString(@"UIActivityViewController");
if (avcClass) {
    NSArray *items = @[ xxx ]; // create one or more activity item objects for this
    UIActivityViewController *avc = [[avcClass alloc] initWithActivityItems:items applicationActivities:nil];
    [self presentViewController:abc animated:YES completion:nil];
} else {
    // create and show an action sheet
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:06:44.200

UIActionSheet *actionsheet;

```
if([SLComposeViewController class] != nil)//some class only available in ios6
{
    actionsheet = [[UIActionSheet alloc] initWithTitle:@"Empfehlen" delegate:(id)self 
cancelButtonTitle:@"Abbrechen" destructiveButtonTitle:nil otherButtonTitles:@"via Mail", @"via iMessage/SMS",@"Tweet", @"Facebook", nil];
}
else
{
    actionsheet = [[UIActionSheet alloc] initWithTitle:@"Empfehlen" delegate:(id)self 
cancelButtonTitle:@"Abbrechen" destructiveButtonTitle:nil otherButtonTitles:@"via Mail", @"via iMessage/SMS",@"Tweet", nil];
} 
```

您只是在检查要共享的内容是否存在以及是否显示该选项。

# ios - 如何在 iOS 中将 kCVPixelFormatType_420YpCbCr8BiPlanarFullRange 缓冲区转换为 UIImage

> ID：13201084
> 
> 赞同：9
> 
> 时间：2012-11-02T18:32:20.947
> 
> 标签：ios, uiimage, avfoundation, video-capture, video-processing

我试图在原始线程中回答这个问题，但是 SO 不允许我这样做。希望有更多权威的人可以将其合并到原始问题中。

好的，这是一个更完整的答案。首先，设置捕获：

```
// Create capture session
self.captureSession = [[AVCaptureSession alloc] init];

[self.captureSession setSessionPreset:AVCaptureSessionPresetPhoto];

// Setup capture input
self.inputDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
AVCaptureDeviceInput *captureInput = [AVCaptureDeviceInput deviceInputWithDevice:self.inputDevice
                                                                           error:nil];
[self.captureSession addInput:captureInput];

// Setup video processing (capture output)
AVCaptureVideoDataOutput *captureOutput = [[AVCaptureVideoDataOutput alloc] init];
// Don't add frames to the queue if frames are already processing
captureOutput.alwaysDiscardsLateVideoFrames = YES;

// Create a serial queue to handle processing of frames
_videoQueue = dispatch_queue_create("cameraQueue", NULL);
[captureOutput setSampleBufferDelegate:self queue:_videoQueue];

// Set the video output to store frame in YUV
NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey;

NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_420YpCbCr8BiPlanarFullRange];
NSDictionary* videoSettings = [NSDictionary dictionaryWithObject:value forKey:key];
[captureOutput setVideoSettings:videoSettings];
[self.captureSession addOutput:captureOutput]; 
```

现在好了，委托/回调的实现：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
   fromConnection:(AVCaptureConnection *)connection
{

// Create autorelease pool because we are not in the main_queue
@autoreleasepool {

    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

    //Lock the imagebuffer
    CVPixelBufferLockBaseAddress(imageBuffer,0);

    // Get information about the image
    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);

    //    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);

    CVPlanarPixelBufferInfo_YCbCrBiPlanar *bufferInfo = (CVPlanarPixelBufferInfo_YCbCrBiPlanar *)baseAddress;

    // This just moved the pointer past the offset
    baseAddress = (uint8_t *)CVPixelBufferGetBaseAddressOfPlane(imageBuffer, 0);

    // convert the image
    _prefImageView.image = [self makeUIImage:baseAddress bufferInfo:bufferInfo width:width height:height bytesPerRow:bytesPerRow];

    // Update the display with the captured image for DEBUG purposes
    dispatch_async(dispatch_get_main_queue(), ^{
        [_myMainView.yUVImage setImage:_prefImageView.image];
    });        
} 
```

最后是从 YUV 转换为 UIImage 的方法

```
- (UIImage *)makeUIImage:(uint8_t *)inBaseAddress bufferInfo:(CVPlanarPixelBufferInfo_YCbCrBiPlanar *)inBufferInfo width:(size_t)inWidth height:(size_t)inHeight bytesPerRow:(size_t)inBytesPerRow {

NSUInteger yPitch = EndianU32_BtoN(inBufferInfo->componentInfoY.rowBytes);

uint8_t *rgbBuffer = (uint8_t *)malloc(inWidth * inHeight * 4);
uint8_t *yBuffer = (uint8_t *)inBaseAddress;
uint8_t val;
int bytesPerPixel = 4;

// for each byte in the input buffer, fill in the output buffer with four bytes
// the first byte is the Alpha channel, then the next three contain the same
// value of the input buffer
for(int y = 0; y < inHeight*inWidth; y++)
{
    val = yBuffer[y];
    // Alpha channel
    rgbBuffer[(y*bytesPerPixel)] = 0xff;

    // next three bytes same as input
    rgbBuffer[(y*bytesPerPixel)+1] = rgbBuffer[(y*bytesPerPixel)+2] =  rgbBuffer[y*bytesPerPixel+3] = val;
}

// Create a device-dependent RGB color space
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

CGContextRef context = CGBitmapContextCreate(rgbBuffer, yPitch, inHeight, 8,
                                             yPitch*bytesPerPixel, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedLast);

CGImageRef quartzImage = CGBitmapContextCreateImage(context);

CGContextRelease(context);
CGColorSpaceRelease(colorSpace);

UIImage *image = [UIImage imageWithCGImage:quartzImage];

CGImageRelease(quartzImage);
free(rgbBuffer);
return  image;
} 
```

您还需要`#import "Endian.h"`

请注意，对 CGBitmapContextCreate 的调用比我预期的要复杂得多。我对视频处理不是很精通，但是这个电话让我难过一段时间。然后当它最终起作用时，它就像魔术一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-28T05:18:38.137

背景信息：@Michaelg 的版本仅访问 y 缓冲区，因此您只能获得亮度而不是颜色。如果缓冲区中的间距和像素数不匹配（无论出于何种原因在行尾填充字节），它也会出现缓冲区溢出错误。这里发生的事情的背景是，这是一种平面图像格式，它为每个像素分配一个字节用于亮度，每 4 个像素分配 2 个字节用于颜色信息。这些不是连续存储在内存中，而是存储为“平面”，其中 Y 或亮度平面有自己的内存块，而 CbCr 或颜色平面也有自己的内存块。CbCr 平面由 Y 平面的样本数（半高和半宽）的 1/4 组成，CbCr 平面中的每个像素对应于 Y 平面中的 2x2 块。希望这个背景有所帮助。

编辑：他的版本和我的旧版本都有可能超出缓冲区，如果图像缓冲区中的行在每行的末尾都有填充字节，则将无法工作。此外，我的 cbcr 平面缓冲区未使用正确的偏移量创建。要正确执行此操作，您应该始终使用核心视频函数，例如 CVPixelBufferGetWidthOfPlane 和 CVPixelBufferGetBaseAddressOfPlane。这将确保您正确解释缓冲区，并且无论缓冲区是否有标题以及您是否搞砸了指针数学，它都会起作用。您应该使用 Apple 函数中的行大小以及它们函数中的缓冲区基地址。这些记录在：[https ://developer.apple.com/library/prerelease/ios/documentation/QuartzCore/Reference/CVPixelBufferRef/index.html](https://developer.apple.com/library/prerelease/ios/documentation/QuartzCore/Reference/CVPixelBufferRef/index.html)请注意，虽然这里的这个版本使用了 Apple 的一些功能并使用了一些标头，但最好只使用 Apple 的功能。我将来可能会更新它以完全不使用标题。

这会将 kcvpixelformattype_420ypcbcr8biplanarfullrange 缓冲区缓冲区转换为 UIImage，然后您可以使用它。

首先，设置捕获：

```
// Create capture session
self.captureSession = [[AVCaptureSession alloc] init];

[self.captureSession setSessionPreset:AVCaptureSessionPresetPhoto];

// Setup capture input
self.inputDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
AVCaptureDeviceInput *captureInput = [AVCaptureDeviceInput deviceInputWithDevice:self.inputDevice
                                                                           error:nil];
[self.captureSession addInput:captureInput];

// Setup video processing (capture output)
AVCaptureVideoDataOutput *captureOutput = [[AVCaptureVideoDataOutput alloc] init];
// Don't add frames to the queue if frames are already processing
captureOutput.alwaysDiscardsLateVideoFrames = YES;

// Create a serial queue to handle processing of frames
_videoQueue = dispatch_queue_create("cameraQueue", NULL);
[captureOutput setSampleBufferDelegate:self queue:_videoQueue];

// Set the video output to store frame in YUV
NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey;

NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_420YpCbCr8BiPlanarFullRange];
NSDictionary* videoSettings = [NSDictionary dictionaryWithObject:value forKey:key];
[captureOutput setVideoSettings:videoSettings];
[self.captureSession addOutput:captureOutput]; 
```

现在好了，委托/回调的实现：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
   fromConnection:(AVCaptureConnection *)connection
{

// Create autorelease pool because we are not in the main_queue
@autoreleasepool {

    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

    //Lock the imagebuffer
    CVPixelBufferLockBaseAddress(imageBuffer,0);

    // Get information about the image
    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);

    //    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);

    CVPlanarPixelBufferInfo_YCbCrBiPlanar *bufferInfo = (CVPlanarPixelBufferInfo_YCbCrBiPlanar *)baseAddress;
    //get the cbrbuffer base address
    uint8_t* cbrBuff = (uint8_t *)CVPixelBufferGetBaseAddressOfPlane(imageBuffer, 1);
    // This just moved the pointer past the offset
    baseAddress = (uint8_t *)CVPixelBufferGetBaseAddressOfPlane(imageBuffer, 0);

    // convert the image
    _prefImageView.image = [self makeUIImage:baseAddress cBCrBuffer:cbrBuff bufferInfo:bufferInfo width:width height:height bytesPerRow:bytesPerRow];

    // Update the display with the captured image for DEBUG purposes
    dispatch_async(dispatch_get_main_queue(), ^{
        [_myMainView.yUVImage setImage:_prefImageView.image];
    });        
} 
```

最后是从 YUV 转换为 UIImage 的方法

```
- (UIImage *)makeUIImage:(uint8_t *)inBaseAddress cBCrBuffer:(uint8_t*)cbCrBuffer bufferInfo:(CVPlanarPixelBufferInfo_YCbCrBiPlanar *)inBufferInfo width:(size_t)inWidth height:(size_t)inHeight bytesPerRow:(size_t)inBytesPerRow {

     NSUInteger yPitch = EndianU32_BtoN(inBufferInfo->componentInfoY.rowBytes);
 NSUInteger cbCrOffset = EndianU32_BtoN(inBufferInfo->componentInfoCbCr.offset);
 uint8_t *rgbBuffer = (uint8_t *)malloc(inWidth * inHeight * 4);
 NSUInteger cbCrPitch = EndianU32_BtoN(inBufferInfo->componentInfoCbCr.rowBytes);
 uint8_t *yBuffer = (uint8_t *)inBaseAddress;
 //uint8_t *cbCrBuffer = inBaseAddress + cbCrOffset;
 uint8_t val;
 int bytesPerPixel = 4;

 for(int y = 0; y < inHeight; y++)
 {
 uint8_t *rgbBufferLine = &rgbBuffer[y * inWidth * bytesPerPixel];
 uint8_t *yBufferLine = &yBuffer[y * yPitch];
 uint8_t *cbCrBufferLine = &cbCrBuffer[(y >> 1) * cbCrPitch];

 for(int x = 0; x < inWidth; x++)
 {
 int16_t y = yBufferLine[x];
 int16_t cb = cbCrBufferLine[x & ~1] - 128; 
 int16_t cr = cbCrBufferLine[x | 1] - 128;

 uint8_t *rgbOutput = &rgbBufferLine[x*bytesPerPixel];

     int16_t r = (int16_t)roundf( y + cr *  1.4 );
     int16_t g = (int16_t)roundf( y + cb * -0.343 + cr * -0.711 );
     int16_t b = (int16_t)roundf( y + cb *  1.765);

 //ABGR
 rgbOutput[0] = 0xff;
     rgbOutput[1] = clamp(b);
     rgbOutput[2] = clamp(g);
     rgbOutput[3] = clamp(r);
 }
 }

 // Create a device-dependent RGB color space
 CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
 NSLog(@"ypitch:%lu inHeight:%zu bytesPerPixel:%d",(unsigned long)yPitch,inHeight,bytesPerPixel);
 NSLog(@"cbcrPitch:%lu",cbCrPitch);
 CGContextRef context = CGBitmapContextCreate(rgbBuffer, inWidth, inHeight, 8,
 inWidth*bytesPerPixel, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedLast);

 CGImageRef quartzImage = CGBitmapContextCreateImage(context);

 CGContextRelease(context);
 CGColorSpaceRelease(colorSpace);

 UIImage *image = [UIImage imageWithCGImage:quartzImage];

 CGImageRelease(quartzImage);
 free(rgbBuffer);
 return  image;
 } 
```

您还需要`#import "Endian.h"`定义`#define clamp(a) (a>255?255:(a<0?0:a));`

请注意，对 CGBitmapContextCreate 的调用比我预期的要复杂得多。我对视频处理不是很精通，但是这个电话让我难过一段时间。然后当它最终起作用时，它就像魔术一样。

# c# - GetWeekOfYear 返回错误的结果？

> ID：13201085
> 
> 赞同：5
> 
> 时间：2012-11-02T18:32:35.703
> 
> 标签：c#, .net

2013 年的第 1 周从 2012 年 12 月 31 日开始，因为它是星期一。

调用`GetWeekOfYear`withculture `nl-NL`，`FirstDayOfWeek.Monday`并`CalendarWeekRule.FirstFourDayWeek`在 2012 年 31 月 12 日星期一返回第 53 周，在 2013 年 1 月 1 日星期二返回第 1 周。那个星期一怎么可能和星期二有不同的周数呢？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:35:13.343

因为它是 2012 年的第 53 周。它将根据您使用的日期返回一年中的第几周 ( `31-12-2012`)。2013 年的第 1 周与 2012 年的第 53 周是同一周。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:34:55.637

您在第一个示例中经过的年份是 2012 年。不是 2013 年。它返回您在日期中经过的一年中的那一周。

# java - 用户触摸时将 TextView 边界限制为 ImageView

> ID：13201090
> 
> 赞同：1
> 
> 时间：2012-11-02T18:32:56.300
> 
> 标签：java, android, android-layout, textview, ontouchlistener

我有一个只占屏幕一部分的图像视图。我在图像视图之上有一个文本视图。当用户触摸 textview 时，他们可以将其拖动到屏幕上任何他们想要的位置。但是，我想限制用户只能在图像视图上移动文本视图。

当 textview 移动到屏幕的顶部或右侧时，它会自动阻止它继续前进（类似于将计算机鼠标移动到屏幕的顶部或左侧）。我想尝试在图像视图的范围内模仿这种效果。

我尝试了许多技术，例如获取 imageview 的大小并将其与 y 和 x 值进行比较，如果 textview 超过这一点，它将等于这一点。然而，到目前为止还没有成功。

这是我当前的代码（在 OnTouchListener() 中）：

```
 if (touchY >= imageHeight){
                    params.leftMargin = leftSideText;//sets the margin so the textview is displayed on the screen according to them because its aligned to top and left
                    params.topMargin = (tvOne.getHeight()) - imageHeight;
                    params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
                    params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
                    tvOne.setLayoutParams(params);
                } 
```

其中一些变量是：

```
 touchX = (int) eventTwo.getRawX();
                touchY = (int) eventTwo.getRawY();
                //helps make the edit text start where the user touches the screen rather than that just being the top corner
                int editTextWidth = tvOne.getWidth() / 2;
                int editTextHeight = tvOne.getHeight() / 2;

                topText = touchY - editTextHeight;
                leftSideText = touchX - editTextWidth; 
```

这段代码只是让文本视图在超过这一点后消失。

所以，为了澄清我的问题，你如何将 textview 边界限制在 imageview 的范围内？如果您能提供任何帮助或建议，将不胜感激，谢谢！

**编辑：**我找到了问题的原因，但是，我还没有找到解决方案。首先，似乎文本视图并没有消失，它只是在图像下方的黑色背景上不可见。其次，文本视图超过图像视图的原因是因为没有显示完整的图像，或者看起来如此。所以，当我得到高度时，它指的是整个图像的高度，但是，整个图像并没有被显示。

看看我的问题[here](https://stackoverflow.com/questions/13203957/scaling-down-bitmap-causes-portion-of-image-not-visible)

# php - 调用未定义的函数 mysql_query()

> ID：13201095
> 
> 赞同：3
> 
> 时间：2012-11-02T18:33:13.387
> 
> 标签：php, mysql, apache

我无法在此站点上找到此问题。当我加载我的页面时，我收到以下错误

```
Call to undefined function mysql_query() 
```

所以我检查了我的`phpinfo()`文件，我根本找不到 mysql 扩展或任何扩展。所以我进入我的 php ini 文件并取消注释扩展

```
extension=php_pdo_mssql.dll
extension=php_pdo_mysql.dll 
```

我重新启动了我的 apache 服务器和 mysql，但没有任何改变，扩展名也没有被识别。我有 mysql 服务器正在运行，我有 apache 与 php 一起运行，但我很难加载扩展。所以我检查了我的扩展目录（我`phpinfo()`指定的目录，那里什么都没有。）MacPorts 安装了除了我的扩展之外的所有东西。有没有搞错 ？？还有什么我想念的吗？

# php.ini

```
;;;;;;;;;;;;;;;;;;;;;;
; Dynamic Extensions ;
;;;;;;;;;;;;;;;;;;;;;;

; If you wish to have an extension loaded automatically, use the following
; syntax:
;
;   extension=modulename.extension
;
; For example, on Windows:
;
;   extension=msql.dll
;
; ... or under UNIX:
;
;   extension=msql.so
;
; ... or with a path:
;
;   extension=/path/to/extension/msql.so
;
; If you only provide the name of the extension, PHP will look for it in its
; default extension directory.
;
; Windows Extensions
; Note that ODBC support is built in, so no dll is needed for it.
; Note that many DLL files are located in the extensions/ (PHP 4) ext/ (PHP 5)
; extension folders as well as the separate PECL DLL download (PHP 5).
; Be sure to appropriately set the extension_dir directive.
;
;extension=php_bz2.dll
extension=php_curl.dll
;extension=php_fileinfo.dll
;extension=php_gd2.dll
;extension=php_gettext.dll
;extension=php_gmp.dll
;extension=php_intl.dll
;extension=php_imap.dll
;extension=php_interbase.dll
;extension=php_ldap.dll
;extension=php_mbstring.dll
;extension=php_exif.dll      ; Must be after mbstring as it depends on it
extension=php_mysql.dll
extension=php_mysqli.dll
;extension=php_oci8.dll      ; Use with Oracle 10gR2 Instant Client
;extension=php_oci8_11g.dll  ; Use with Oracle 11gR2 Instant Client
;extension=php_openssl.dll
;extension=php_pdo_firebird.dll
extension=php_pdo_mssql.dll
extension=php_pdo_mysql.dll
extension=php_pdo_oci.dll
extension=php_pdo_odbc.dll
;extension=php_pdo_pgsql.dll
;extension=php_pdo_sqlite.dll
;extension=php_pgsql.dll
;extension=php_pspell.dll
;extension=php_shmop.dll

; The MIBS data available in the PHP distribution must be installed. 
; See http://www.php.net/manual/en/snmp.installation.php 
;extension=php_snmp.dll

extension=php_soap.dll
extension=php_sockets.dll
extension=php_sqlite.dll
extension=php_sqlite3.dll
;extension=php_sybase_ct.dll
;extension=php_tidy.dll
;extension=php_xmlrpc.dll
;extension=php_xsl.dll
;extension=php_zip.dll

;;;;;;;;;;;;;;;;;;;
; Module Settings ;
;;;;;;;;;;;;;;;;;;;

[Date]
; Defines the default timezone used by the date functions
; http://php.net/date.timezone
;date.timezone =

; http://php.net/date.default-latitude
;date.default_latitude = 31.7667

; http://php.net/date.default-longitude
;date.default_longitude = 35.2333

; http://php.net/date.sunrise-zenith
;date.sunrise_zenith = 90.583333

; http://php.net/date.sunset-zenith
;date.sunset_zenith = 90.583333

[filter]
; http://php.net/filter.default
;filter.default = unsafe_raw

; http://php.net/filter.default-flags
;filter.default_flags =

[iconv]
;iconv.input_encoding = ISO-8859-1
;iconv.internal_encoding = ISO-8859-1
;iconv.output_encoding = ISO-8859-1

[intl]
;intl.default_locale =
; This directive allows you to produce PHP errors when some error
; happens within intl functions. The value is the level of the error produced.
; Default is 0, which does not produce any errors.
;intl.error_level = E_WARNING

[sqlite]
; http://php.net/sqlite.assoc-case
;sqlite.assoc_case = 0

[sqlite3]
;sqlite3.extension_dir =

[Pcre]
;PCRE library backtracking limit.
; http://php.net/pcre.backtrack-limit
;pcre.backtrack_limit=100000

;PCRE library recursion limit.
;Please note that if you set this value to a high number you may consume all
;the available process stack and eventually crash PHP (due to reaching the
;stack size limit imposed by the Operating System).
; http://php.net/pcre.recursion-limit
;pcre.recursion_limit=100000

[Pdo]
; Whether to pool ODBC connections. Can be one of "strict", "relaxed" or "off"
; http://php.net/pdo-odbc.connection-pooling
;pdo_odbc.connection_pooling=strict

;pdo_odbc.db2_instance_name

[Pdo_mysql]
; If mysqlnd is used: Number of cache slots for the internal result set cache
; http://php.net/pdo_mysql.cache_size
pdo_mysql.cache_size = 2000

; Default socket name for local MySQL connects.  If empty, uses the built-in
; MySQL defaults.
; http://php.net/pdo_mysql.default-socket
pdo_mysql.default_socket=

[Phar]
; http://php.net/phar.readonly
;phar.readonly = On

; http://php.net/phar.require-hash
;phar.require_hash = On

;phar.cache_list =

[Syslog]
; Whether or not to define the various syslog variables (e.g. $LOG_PID,
; $LOG_CRON, etc.).  Turning it off is a good idea performance-wise.  In
; runtime, you can define these variables by calling define_syslog_variables().
; http://php.net/define-syslog-variables
define_syslog_variables  = Off

[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
;sendmail_from = me@example.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
;sendmail_path =

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = On

; The path to a log file that will log all mail() calls. Log entries include
; the full path of the script, line number, To address and headers.
;mail.log =

[SQL]
; http://php.net/sql.safe-mode
sql.safe_mode = Off

[ODBC]
; http://php.net/odbc.default-db
;odbc.default_db    =  Not yet implemented

; http://php.net/odbc.default-user
;odbc.default_user  =  Not yet implemented

; http://php.net/odbc.default-pw
;odbc.default_pw    =  Not yet implemented

; Controls the ODBC cursor model.
; Default: SQL_CURSOR_STATIC (default).
;odbc.default_cursortype

; Allow or prevent persistent links.
; http://php.net/odbc.allow-persistent
odbc.allow_persistent = On

; Check that a connection is still valid before reuse.
; http://php.net/odbc.check-persistent
odbc.check_persistent = On

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/odbc.max-persistent
odbc.max_persistent = -1

; Maximum number of links (persistent + non-persistent).  -1 means no limit.
; http://php.net/odbc.max-links
odbc.max_links = -1

; Handling of LONG fields.  Returns number of bytes to variables.  0 means
; passthru.
; http://php.net/odbc.defaultlrl
odbc.defaultlrl = 4096

; Handling of binary data.  0 means passthru, 1 return as is, 2 convert to char.
; See the documentation on odbc_binmode and odbc_longreadlen for an explanation
; of odbc.defaultlrl and odbc.defaultbinmode
; http://php.net/odbc.defaultbinmode
odbc.defaultbinmode = 1

;birdstep.max_links = -1

[MySQL]
; Allow accessing, from PHP's perspective, local files with LOAD DATA statements
; http://php.net/mysql.allow_local_infile
mysql.allow_local_infile = On

; Allow or prevent persistent links.
; http://php.net/mysql.allow-persistent
mysql.allow_persistent = On

; If mysqlnd is used: Number of cache slots for the internal result set cache
; http://php.net/mysql.cache_size
mysql.cache_size = 2000

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/mysql.max-persistent
mysql.max_persistent = -1

; Maximum number of links (persistent + non-persistent).  -1 means no limit.
; http://php.net/mysql.max-links
mysql.max_links = -1

; Default port number for mysql_connect().  If unset, mysql_connect() will use
; the $MYSQL_TCP_PORT or the mysql-tcp entry in /etc/services or the
; compile-time value defined MYSQL_PORT (in that order).  Win32 will only look
; at MYSQL_PORT.
; http://php.net/mysql.default-port
mysql.default_port =

; Default socket name for local MySQL connects.  If empty, uses the built-in
; MySQL defaults.
; http://php.net/mysql.default-socket
mysql.default_socket =

; Default host for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysql.default-host
mysql.default_host =

; Default user for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysql.default-user
mysql.default_user =

; Default password for mysql_connect() (doesn't apply in safe mode).
; Note that this is generally a *bad* idea to store passwords in this file.
; *Any* user with PHP access can run 'echo get_cfg_var("mysql.default_password")
; and reveal this password!  And of course, any users with read access to this
; file will be able to reveal the password as well.
; http://php.net/mysql.default-password
mysql.default_password =

; Maximum time (in seconds) for connect timeout. -1 means no limit
; http://php.net/mysql.connect-timeout
mysql.connect_timeout = 60

; Trace mode. When trace_mode is active (=On), warnings for table/index scans and
; SQL-Errors will be displayed.
; http://php.net/mysql.trace-mode
mysql.trace_mode = Off

[MySQLi]

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/mysqli.max-persistent
mysqli.max_persistent = -1

; Allow accessing, from PHP's perspective, local files with LOAD DATA statements
; http://php.net/mysqli.allow_local_infile
;mysqli.allow_local_infile = On

; Allow or prevent persistent links.
; http://php.net/mysqli.allow-persistent
mysqli.allow_persistent = On

; Maximum number of links.  -1 means no limit.
; http://php.net/mysqli.max-links
mysqli.max_links = -1

; If mysqlnd is used: Number of cache slots for the internal result set cache
; http://php.net/mysqli.cache_size
mysqli.cache_size = 2000

; Default port number for mysqli_connect().  If unset, mysqli_connect() will use
; the $MYSQL_TCP_PORT or the mysql-tcp entry in /etc/services or the
; compile-time value defined MYSQL_PORT (in that order).  Win32 will only look
; at MYSQL_PORT.
; http://php.net/mysqli.default-port
mysqli.default_port = 3306

; Default socket name for local MySQL connects.  If empty, uses the built-in
; MySQL defaults.
; http://php.net/mysqli.default-socket
mysqli.default_socket =

; Default host for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysqli.default-host
mysqli.default_host =

; Default user for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysqli.default-user
mysqli.default_user =

; Default password for mysqli_connect() (doesn't apply in safe mode).
; Note that this is generally a *bad* idea to store passwords in this file.
; *Any* user with PHP access can run 'echo get_cfg_var("mysqli.default_pw")
; and reveal this password!  And of course, any users with read access to this
; file will be able to reveal the password as well.
; http://php.net/mysqli.default-pw
mysqli.default_pw =

; Allow or prevent reconnect
mysqli.reconnect = Off

[mysqlnd]
; Enable / Disable collection of general statistics by mysqlnd which can be
; used to tune and monitor MySQL operations.
; http://php.net/mysqlnd.collect_statistics
mysqlnd.collect_statistics = On

; Enable / Disable collection of memory usage statistics by mysqlnd which can be
; used to tune and monitor MySQL operations.
; http://php.net/mysqlnd.collect_memory_statistics
mysqlnd.collect_memory_statistics = On

; Size of a pre-allocated buffer used when sending commands to MySQL in bytes.
; http://php.net/mysqlnd.net_cmd_buffer_size
;mysqlnd.net_cmd_buffer_size = 2048

; Size of a pre-allocated buffer used for reading data sent by the server in
; bytes.
; http://php.net/mysqlnd.net_read_buffer_size
;mysqlnd.net_read_buffer_size = 32768

[OCI8]

; Connection: Enables privileged connections using external
; credentials (OCI_SYSOPER, OCI_SYSDBA)
; http://php.net/oci8.privileged-connect
;oci8.privileged_connect = Off

; Connection: The maximum number of persistent OCI8 connections per
; process. Using -1 means no limit.
; http://php.net/oci8.max-persistent
;oci8.max_persistent = -1

; Connection: The maximum number of seconds a process is allowed to
; maintain an idle persistent connection. Using -1 means idle
; persistent connections will be maintained forever.
; http://php.net/oci8.persistent-timeout
;oci8.persistent_timeout = -1

; Connection: The number of seconds that must pass before issuing a
; ping during oci_pconnect() to check the connection validity. When
; set to 0, each oci_pconnect() will cause a ping. Using -1 disables
; pings completely.
; http://php.net/oci8.ping-interval
;oci8.ping_interval = 60

; Connection: Set this to a user chosen connection class to be used
; for all pooled server requests with Oracle 11g Database Resident
; Connection Pooling (DRCP).  To use DRCP, this value should be set to
; the same string for all web servers running the same application,
; the database pool must be configured, and the connection string must
; specify to use a pooled server.
;oci8.connection_class =

; High Availability: Using On lets PHP receive Fast Application
; Notification (FAN) events generated when a database node fails. The
; database must also be configured to post FAN events.
;oci8.events = Off

; Tuning: This option enables statement caching, and specifies how
; many statements to cache. Using 0 disables statement caching.
; http://php.net/oci8.statement-cache-size
;oci8.statement_cache_size = 20

; Tuning: Enables statement prefetching and sets the default number of
; rows that will be fetched automatically after statement execution.
; http://php.net/oci8.default-prefetch
;oci8.default_prefetch = 100

; Compatibility. Using On means oci_close() will not close
; oci_connect() and oci_new_connect() connections.
; http://php.net/oci8.old-oci-close-semantics
;oci8.old_oci_close_semantics = Off

[PostgreSQL]
; Allow or prevent persistent links.
; http://php.net/pgsql.allow-persistent
pgsql.allow_persistent = On

; Detect broken persistent links always with pg_pconnect().
; Auto reset feature requires a little overheads.
; http://php.net/pgsql.auto-reset-persistent
pgsql.auto_reset_persistent = Off

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/pgsql.max-persistent
pgsql.max_persistent = -1

; Maximum number of links (persistent+non persistent).  -1 means no limit.
; http://php.net/pgsql.max-links
pgsql.max_links = -1

; Ignore PostgreSQL backends Notice message or not.
; Notice message logging require a little overheads.
; http://php.net/pgsql.ignore-notice
pgsql.ignore_notice = 0

; Log PostgreSQL backends Notice message or not.
; Unless pgsql.ignore_notice=0, module cannot log notice message.
; http://php.net/pgsql.log-notice
pgsql.log_notice = 0

[Sybase-CT]
; Allow or prevent persistent links.
; http://php.net/sybct.allow-persistent
sybct.allow_persistent = On

; Maximum number of persistent links.  -1 means no limit.
; http://php.net/sybct.max-persistent
sybct.max_persistent = -1

; Maximum number of links (persistent + non-persistent).  -1 means no limit.
; http://php.net/sybct.max-links
sybct.max_links = -1

; Minimum server message severity to display.
; http://php.net/sybct.min-server-severity
sybct.min_server_severity = 10

; Minimum client message severity to display.
; http://php.net/sybct.min-client-severity
sybct.min_client_severity = 10

; Set per-context timeout
; http://php.net/sybct.timeout
;sybct.timeout=

;sybct.packet_size

; The maximum time in seconds to wait for a connection attempt to succeed before returning failure.
; Default: one minute
;sybct.login_timeout=

; The name of the host you claim to be connecting from, for display by sp_who.
; Default: none
;sybct.hostname=

; Allows you to define how often deadlocks are to be retried. -1 means "forever".
; Default: 0
;sybct.deadlock_retry_count=

[bcmath]
; Number of decimal digits for all bcmath functions.
; http://php.net/bcmath.scale
bcmath.scale = 0 
```

# 编辑

我正在使用 Mac 并检查上面的设置。我也安装了 php_mysql.dll 文件

```
extension=php_mysql.dll
extension=php_mysqli.dll 
```

这是我的`phpinfo()`页面

![在此处输入图像描述](../Images/85d73b3eb6bf21b3edaa6042fbed0144.png)

我的页面上出现了 3 次 mysql 一词。

# 编辑

好的，我有一个屏幕截图，显示了扩展目录的位置，但是当我去那里时，我没有看到任何扩展。macports安装会损坏吗？

![在此处输入图像描述](../Images/c8e6c1174b0fa87f6cb9a43e376773fd.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T18:36:37.160

`mysql_query()`不是 PDO 的一部分，因此您正在检查的 DLL（这是 PDO 的用于 MySQL 支持的 dll）不是您应该检查的。你想检查`php_mysql.dll`（Linux服务器上的.so）。

但是 PDO 绝对是访问 MySQL 的正确方法。它比使用 mysql_query() 要好得多。

[在 PHP 的 PDO 页面上](http://ie1.php.net/manual/en/book.pdo.php)阅读更多内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T18:36:08.177

所以开始使用`mysqli_()`和停止使用`mysql_()`

[阅读此](http://www.php.net/manual/en/function.mysql-affected-rows.php)页面上的大红框

使用[mysqli_()](http://php.net/manual/en/book.mysqli.php)或[PDO](http://ie1.php.net/manual/en/book.pdo.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T18:40:57.417

这些扩展是从 /etc/php.d 下的相应 .ini 文件加载的。尝试使用它们的完整路径，例如 /etc/php.d/mysql.ini 中的 mysql 使用：

扩展=/usr/lib64/php/modules/mysql.so

# batch-file - 删除远程文件的 BAT 脚本

> ID：13201103
> 
> 赞同：0
> 
> 时间：2012-11-02T18:34:05.127
> 
> 标签：batch-file, samba, file-sharing, smb

我在本地 Windows 网络上有一个共享的备份硬盘驱动器 (SMB/CIFS)。现在我需要一个 Windows BAT 脚本来删除备份驱动器中的一些共享文件。在 Linux+bash 中它会相当简单，但是在 SMB/CIFS 共享驱动器上并且只使用批处理脚本我找不到任何解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:45:13.983

您可以尝试一些事情。首先要在共享上“启用”删除，您可以首先使用`net use' :` NET USE [driveletter:] \ComputerName\ShareName[\volume] [password |映射驱动器] *] [/USER:[域名]用户名] [/PERSISTENT:YES]`

您可能可以使用 DEL 命令访问这些文件。

如果这不起作用，您需要在 unix 机器上通过 SSH 执行删除。为此，您可以使用 plink： http : [//www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)我认为文档的描述性已经足够了。如果这也不起作用，您将需要重型武器-> Cygwin，它也可以通过脚本用于通过 SSH 发送命令

# jquery - 更改 Ext JS 工具栏方向（在配置之外）

> ID：13201105
> 
> 赞同：0
> 
> 时间：2012-11-02T18:34:07.873
> 
> 标签：jquery, extjs, extjs3

有没有一种轻松的方法来改变 Ext JS 工具栏的方向？类似于将***tbar***更改为***bbar***（在配置之外）

我正在尝试在 Ext JS 3.4 中执行此操作

我知道我可以覆盖配置并更改工具栏方向。但我想知道是否有人足够聪明，只需几行代码就可以做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:18:47.997

更改初始配置的方法是在实例化期间传递覆盖配置。例如，如果您定义了一个带有 tbar 的面板：

```
Ext.define('MyPanel',{
  extend:'Ext.panel.Panel',
  tbar: [{text:'myButton'}]
  ...
}); 
```

您可以在实例化它时覆盖它的配置：

```
Ext.create('MyPanel',{
  tbar:undefined,
  bbar: [{text:'myButton'}]
  ...
}); 
```

# ruby - 在 Rails 中按复杂结构排序

> ID：13201115
> 
> 赞同：0
> 
> 时间：2012-11-02T18:34:53.297
> 
> 标签：ruby, ruby-on-rails-3

我有一个名为 Event 的模型，它有很多 EventRegistrations，属于一个人。EventRegistration 也有很多 EventAtendee，它们也属于一个人。

我想在 Rails 中订购与事件相关的所有人员，这意味着： - 与事件注册相关联的人员 - 与与注册相关联的事件参与者相关联的人员..

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:39:30.367

据我了解，您有以下模型和关联：

```
Event
  has_many :event_registrations

EventAttendee
  belongs_to :event_registration
  belongs_to :person

Person
  has_many :event_registrations
  has_many :event_attendees

EventRegistration
  belongs_to :person
  belongs_to :event 
```

现在，关于你的实际问题。你说你想“订购所有与事件相关的人”

我实际上并没有看到“排序”（又名排序）是如何进入其中的。

要让所有用户与事件相关联，我建议添加一些 :through 关联：

```
Event
  has_many :event_attendees, :through => :event_registrations
  has_many :people, :through => :event_attendees 
```

然后，当你有一个事件对象时，你可以简单地调用`.people`它，它就可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:41:29.163

假设您正确设置了所有 ActiveRecord 关联，那么您将按此人的姓氏排序。

```
event_registrations = EventRegistrations.find(:all)

ordered_event_registrations = event_registrations.sort{|registration_a,registration_b|registration_a.people.lastname<=>registration_b.people.lastname} 
```

# ios - UIAlertView 不打开网址？

> ID：13201117
> 
> 赞同：3
> 
> 时间：2012-11-02T18:34:56.370
> 
> 标签：ios, objective-c, uialertview

我用三个按钮创建了一个警报视图——“注册”、“捐赠”、“取消”——当你点击注册或捐赠时，safari 应该打开特定的网站。但是，当我打开应用程序并单击任何按钮时，safari 不会打开或执行任何操作，并且这些按钮就像取消按钮的不同版本一样工作。这是我的代码：

在 BlahBlah.h 中：

```
@interface BlahBlah: UIViewController <UITextFieldDelegate, UIAlertViewDelegate> {
}
@end 
```

在 BlahBlah.m 中：

```
#define donate_tag 0
#import "BlahBlah.h"
@implementation BlahBlah
...
- (void) donate {
UIAlertView *alert2  = [[UIAlertView alloc] initWithTitle:@"Donate"
message:@"Function doesn't work yet :(" delegate:nil cancelButtonTitle:@"Cancel"
otherButtonTitles:@"Sign Up",@"Donate",nil];
alert2.tag = donate_tag;
[alert2 show];
[alert2 release];
}
...
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

if(alertView.tag == donate_tag && buttonIndex == 1){
   [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]];
  }
else if(alertView.tag == donate_tag && buttonIndex == 2){
   [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.yahoo.com"]];
  }
}
...
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:37:46.810

你需要告诉alert谁来处理按钮的动作，也就是说，谁是`delegate`alert视图的“”。

由于与 UIAlertView 相关的所有内容都在您的“ `BlahBlah`”视图控制器中，因此在创建 alert2 后，请执行以下操作：

```
alert2.delegate = self; 
```

或在您的 UIAlertView 实例中声明它：

```
UIAlertView *alert2  = [[UIAlertView alloc] initWithTitle:@"Donate" 
    message:@"Function doesn't work yet :(" delegate:self 
    cancelButtonTitle:@"Cancel" otherButtonTitles:@"Sign Up",@"Donate",nil]; 
```

# shell - 使用 shell、sed 或 awk 在文件的每两行之间插入一个空行

> ID：13201125
> 
> 赞同：1
> 
> 时间：2012-11-02T18:35:41.583
> 
> 标签：shell, sed, awk

我有一个包含很多行的文件。我想在每两行之间插入一个空行，例如原始文件

```
xfdljflsad
fjdiaopqqq
dioapfdja; 
```

我想把它做成：

```
xfdljflsad

fjdiaopqqq

dioapfdja; 
```

如何做到这一点？我想为此使用 shell 脚本、awk 或 sed？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T18:46:03.653

与`sed`, 使用

```
sed G input-file 
```

如果 pilcrow 是正确的，并且您不希望在文件末尾添加额外的换行符，则执行以下操作：

```
sed '$!G' input-file 
```

另一种选择是使用`pr`：

```
pr -dt input-file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T07:20:28.360

awk '{打印 nl $0; nl="\n"}' 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T18:40:44.963

如果我想快速正则表达式文件，我的方法。

```
vim file.txt
%s/\n/\n\n/g 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T23:24:39.600

惯用的awk：

```
awk 1 ORS='\n\n' file 
```

与 perl 类似的事情：

```
perl -nE 'say' file 
```

`| head -n -1`如果不需要最后的换行符，请附加。

# url - 每个 URI“保留字符”的预期用途是什么？

> ID：13201126
> 
> 赞同：2
> 
> 时间：2012-11-02T18:35:45.637
> 
> 标签：url, character-encoding, uri, url-encoding

我们总是在 URL 中看到保留字符，如`/`, `#`, ；但是像, , ,`&`等不太常见的用途是什么？`@``[``]``,`

我一直无法很好地解释这些字符的*用途*。

请参阅[Wikipedia](http://en.wikipedia.org/wiki/Percent-encoding#Types_of_URI_characters)和[此处的第 2.2 节](http://www.ietf.org/rfc/rfc2396.txt)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T12:15:24.343

*   `@`和`:`: 用于主机的 HTTP 登录数据 ( `http://john:password@example.com`)
    *   `:`还将主机与端口（`http://example.com:1337`）分开
    *   请注意，`@`显然在 URI 的路径中使用`mailto`，但在 HTTP URI 路径中也[允许使用](https://stackoverflow.com/a/19737890/1591669)
*   `[`和`]`: 对于[CURIE](http://www.w3.org/TR/curie/) ( `[db:resource/Albert_Einstein]`)
*   `,`: 可用于分隔（查询）参数
*   `;`：请参阅此问题：[URL 中保留的分号是什么？](https://stackoverflow.com/q/2163803/1591669)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:49:23.123

@ 用于将用户名和密码添加到 url，所以你可以这样做`http://username:password@host.com`

# jquery - 使用 jquery 删除包含数据属性的 html 5 表行

> ID：13201134
> 
> 赞同：5
> 
> 时间：2012-11-02T18:36:12.600
> 
> 标签：jquery, html

我了解如何获取`$('#tableid tr').attr('data-id')`使用 HTML5 数据属性的表对象的属性。但是，当我尝试根据 data-id 属性删除行时，它似乎不起作用。

当我做这样的事情时：

```
var theRowId = $('#tableid tr').attr('data-id');
$('#tableid tr#'+theRowId).remove(); 
```

它没有用。Html 5 数据属性应该像任何其他属性一样处理，对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T18:40:33.627

您需要传递要从中获取数据属性的 tr的**索引**

`$('#tableid tr:eq(0)');` // 表格的第一行

`$('#tableid tr:eq(1)');` // 表格第二行

因为表中可能有多行

```
var theRowId = $('#tableid tr:eq(1)').attr('data-id'); // Get the Second Row id
$('#tableid tr#'+theRowId).remove();  // Remove the row with id 
```

或者，如果您**知道行的 ID** .. 只需执行此操作

```
$('#tableid tr[data-id="'+theRowId+'"]').remove(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T18:41:50.127

您需要更改为 data-id 属性选择的方式。尝试选择这样的行：

```
$('#tableid tr[data-id="'+theRowId+'"]').remove(); 
```

这将为具有匹配的 data-id 属性的 tr 选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T18:41:28.473

data-id 不像 id

你需要这样做：

```
 $('#tableid tr[data-id='+ theRowId +']').remove() 
```

# c# - 使用 c# 写入 Amazon s3 存储桶上的文件

> ID：13201135
> 
> 赞同：5
> 
> 时间：2012-11-02T18:36:14.517
> 
> 标签：c#, amazon-s3, streamwriter

我的 amazon s3 存储桶上有一个文本文件，我想在该文件的末尾写一些文本。类似于以下内容：xxxxxx|xxxxxx|xxxxx|xxxx。我想用 c# 做到这一点。我确实尝试过使用streamwriter，但没有奏效。

```
using(StreamWriter writer = new StreamWriter(Server.MapPath(url), true))
{
  writer.WriteLine("xxxxxxxx|xxxxxxxxxxx|xxxxxxx|xxxxxxxxxx");
} 
```

我最初的猜测是必须有某种身份验证要求。任何人都可以帮助我或指导适当的资源。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T19:21:16.677

Amazon S3 不支持附加到对象。您必须从 S3 读取整个对象，然后将其与新数据一起放回原处。

适用于 .NET 的 AWS 开发工具包（请参阅[http://aws.amazon.com/sdkfornet](http://aws.amazon.com/sdkfornet)）提供的工具可以使经过身份验证的 S3 操作在 C# 中更易于管理，包括将 S3 存储桶视为本地文件系统（请参阅[http://docs. amazonwebservices.com/sdkfornet/latest/apidocs/html/N_Amazon_S3_IO.htm](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/N_Amazon_S3_IO.htm)）

# excel - 我可以使用标题中的用户输入来自动填充其他标题吗？

> ID：13201138
> 
> 赞同：0
> 
> 时间：2012-11-02T18:36:17.933
> 
> 标签：excel

我有一个工作簿，里面有十个不同的电子表格。每个电子表格都有一个遵循以下格式的标题：“项目名称 - 电子表格名称 - 修订日期：”。

例如，示例电子表格标题应如下所示：

```
"Test Project - Form 1 - Revision Date: "
"Test Project - Form 2 - Revision Date: "
"Test Project - Form 3 - Revision Date: " 
```

等等..

我想通过只让他们输入一次“项目名称”来适应用户，然后它会用该值自动填充其余的标题。我知道使用单元格可以很容易地完成，但我对 Excel 不是很有经验。这可以用标题完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:02:22.393

使用输入单元格让用户输入项目名称，然后将该单元格命名为“Project_Name”。

接下来，对于电子表格中的每个标题，输入以下公式：

```
= Project_Name & " - Form XX - Revision Date: " 
```

（显然，将“XX”更改为表格编号）

希望这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:22:42.357

如果您指的是只能在布局视图和打印预览中看到的标题，则无法使用简单的 excel 函数进行设置。您应该在宏中执行此操作。

如果您将项目名称存储在单元格 A1 中，并将修订日期存储在单元格 B1 中，那么您可以在同一张表上放置一个按钮。按钮的文本可以是“填充标题”，它将运行的宏是以下代码：

```
Sub FillHeaders()

    For Each wSheet In ActiveWorkbook.Worksheets

        If wSheet.Name <> "Cover Page" Then

            wSheet.PageSetup.CenterHeader = _
                ActiveSheet.Range("A1") & " - " & _
                wSheet.Name & " - Revision date: " & _
                ActiveSheet.Range("B1")

        End If

    Next wSheet

End Sub 
```

这将遍历所有工作表（名为“封面”的工作表除外）并将中心标题设置为您需要的文本。由于 ActiveWorksheet 是您按下按钮的位置，因此该工作表中的 A1 和 B1 单元格*将*在标题文本中使用。

# compilation - 编译一个独立的 gtk#

> ID：13201140
> 
> 赞同：2
> 
> 时间：2012-11-02T18:36:32.770
> 
> 标签：compilation, mono, static-linking, gtk#

当我构建我的项目时，生成的 exe 需要 Gtk# 才能运行。MonoDevelop（或其他东西）中是否有任何设置可以静态链接已编译二进制文件中的 Gtk# 库？

我在 Windows 7 64 位上进行开发，但我选择了 C# Gtk，因为我认为代码可以针对多个操作系统进行编译。但是，我相信像我正在开发的那样小的程序不应该强迫用户安装像 Gtk 这样的开发工具。

编辑：我找到了[Embedding Mono](http://www.mono-project.com/Embedding_Mono)网页，但它看起来处理 C 代码、GCC 和 Mono 而不是 C# 代码、Gtk# 和 MonoDevelop。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:12:35.080

据我所知，您能做的最好的事情就是简单地将 gtk# 与您的应用程序打包在一起（只需复制几个 dll）。但是请记住，gtk# 不是 gtk 的托管重写，它只是一组包装库。因此，他们需要存在本机 gtk。当然，您也可以将其与您的应用程序一起发布，但这会使您的程序包增大约 16MB。您可以包含 gtk 安装程序或最终用户不需要设置的已解压版本。两种解决方案都有优点。

# ruby-on-rails - 无法创建新路线

> ID：13201146
> 
> 赞同：1
> 
> 时间：2012-11-02T18:36:52.573
> 
> 标签：ruby-on-rails

我正在使用控制器方法`search_same_director`。链接代码来自`show.html.haml`：

```
= link_to 'Find Movies With Same Director','/movies/search_same_director', :director=>@movie.director 
```

我已将以下行添加到`routes.rb`

```
match '/movies/search_same_director'=>'movies#search_same_director' 
```

但是该链接将请求路由到 show 操作。我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:22:08.660

您已经设置了路线，因此请在视图中使用 rails 路径：

```
= link_to 'Find Movies With Same Director', search_same_director_path(@movies.director), :director=>@movie.director 
```

并且由于您要传递`director`给操作，因此请更改 match 语句`routes.rb`：

```
match '/movies/search_same_director/:director'=>'movies#search_same_director' 
```

此外，请确保该`match`语句高于`resources :movies`路由文件中的语句。

# svn - 我手动编辑合并信息的方式安全吗？

> ID：13201153
> 
> 赞同：2
> 
> 时间：2012-11-02T18:37:41.873
> 
> 标签：svn, merge, mergeinfo

我对为什么子目录合并不好做了一些研究，最近在我们的存储库中发现了一个子目录，上面有 mergeinfo。

我正在尝试手动删除此合并信息，并想看看我是否正确理解 mergeinfo 并正确执行。

**ROOTDIR 合并信息**

/分支/迭代53：18065-18126

/分支/迭代54：18150-18204,18210-18231

/branches/Iteration55:18341,18348,18353-18355,18357,18364-18365 <===== 这行不同

/分支/gds返工：17329-17457

/主干：17869,18085

**SUBDIR 合并信息**

/分支机构/Iteration53/kiwi-web:18065-18126

/branchs/Iteration54/kiwi-web:18150-18204,18210-18231

/branches/Iteration55/kiwi-web:18336-18428 <===== 这行不同

/branchs/gdsRework/kiwi-web:17329-17457

/trunk/kiwi-web:17869,18085

两者之间只有 1 行不同。我还注意到 SUBDIR 合并信息中的 18336-18428 范围包括 ROOTDIR 合并信息中同一行的所有修订。

所以我的计划是用 SUBDIR 中的行替换 ROOTDIR 中的那一行，然后一起删除 SUBDIR 合并信息：

**新的 ROOTDIR 合并信息**

/分支/迭代53：18065-18126

/分支/迭代54：18150-18204,18210-18231

/branches/Iteration55:18336-18428 <===== 现在与 SUBDIR 合并信息相同

/分支/gds返工：17329-17457

/主干：17869,18085

**SUBDIR 合并信息被删除。**

这安全吗？陷阱会在哪里？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:34:41.213

不建议手动编辑mergeinfo。尽管过去我做了您所描述的事情，即使根目录和子目录之间的差异更加复杂，但这种编辑非常容易出错，因此需要格外小心和准确。正如我后来了解到的，SVN 足够强大，可以很容易地解决这种情况；所以最好不要养成手动合并信息编辑的习惯。

简单的情况是 SUBDIR 合并信息中记录的“额外”修订仅影响该子目录。在这种情况下，您只需要在 ROOTDIR 级别对修订 18336 到 18428 进行仅记录合并。仅记录合并将在不触及任何文件的情况下更新 ROOTDIR 的合并信息，并且由于 SUBDIR 合并信息将与 ROOTDIR 完全相同，因此它将删除过多。

*   如果您直接使用 SVN 命令，只需将`--record-only`选项添加到`svn merge`您将用于真正合并的命令中。
*   如果您使用 GUI 客户端，请在其合并对话框中查找“仅记录”或类似名称的选项。

请注意 mergeinfo 中的范围（包括其两端和其间的所有内容）和`-r`选项中的范围（指定两个版本以获取差异）之间的区别；例如，在命令行中您需要指定`-r 18335:18428`，即获取差异的起始版本比要合并的第一个版本小一个。

更复杂的情况是，如果这些修订合并到 SUBDIR 而不是 ROOTDIR 也会更改 SUBDIR 之外的文件。这些更改很可能尚未合并。如果忽略这些更改是安全的，那么您也可以进行仅记录合并。相反，如果碰巧错过了这些更改，您可能希望对 ROOTDIR 级别的修订进行定期合并，并修复合并冲突（如果有）。

合并（仅记录或常规）完成后，检查目录的合并信息是否正确更改，并提交结果。

一篇很好的文章在这里我学到了很多关于 mergeinfo 以及它是如何被 SVN 命令操作的（包括仅记录合并、mergeinfo elision 等），在这里：[Subversion 1.5 Mergeinfo - Understanding the Internals](http://www.open.collab.net/support/media/pdfs/SVN/Mergeinfo%20-%20Understanding%20the%20Internals.pdf)。我建议您在尝试修复存​​储库中的 mergeinfo 之前阅读该内容。

# google-tv - GoogleTv 模拟器基本文本输入

> ID：13201155
> 
> 赞同：1
> 
> 时间：2012-11-02T18:38:02.187
> 
> 标签：google-tv

我最近在 Ubuntu 12 桌面版上设置了我的 googleTV 模拟器。为 Eclipse 添加了 Android SDK 和 ADT 插件。当我启动模拟器时，我在电视屏幕上看到了预期的谷歌图标和一些按钮以及其他 4 个图标。当我选择电视选项时，我被提示输入 LiveTV 的邮政编码。那是当我意识到我无法使用键盘输入文字时！我的方向键正在使用模拟器进行导航，但我无法输入邮政编码/搜索文本。有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:57:34.037

请在[http://code.google.com/p/googletv-issues/](http://code.google.com/p/googletv-issues/)提出问题，我会派人调查。AFAIK这工作正常 - 你能提供更多关于你的系统设置的细节吗？SDK 版本、任何最近的库更新等。

# git - Git - 处理文件已合并的合并

> ID：13201156
> 
> 赞同：0
> 
> 时间：2012-11-02T18:38:17.210
> 
> 标签：git, merge, branch

我们面临的问题很简单，我只是不知道如何正确处理它。我们有一个重新组织文件的分支，我们准备将 master 合并到该分支中。问题是现在主人已经改变了很多。

前任：

```
Master:
- file1
- file2
- file3

Our branch:
- directory1/file1
- directort2/file2
- directroy3/file3 
```

如何告诉 git 文件的新位置，以便自动合并可以正常工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:42:17.603

您应该始终使用该`git mv`命令移动文件，以确保正确跟踪新文件结构。只要 git 知道哪些文件是哪些文件，它就可以处理合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:48:18.487

我以前遇到过这种情况，这可能会很痛苦。这并不是一个真正的解决方案，但减少痛苦的一种方法是经常针对 Master 重新设置分支。

# asp.net - 以下服务器配置中可能设置日期时间格式的位置有哪些？

> ID：13201157
> 
> 赞同：1
> 
> 时间：2012-11-02T18:38:22.207
> 
> 标签：asp.net, windows-server-2008, web-deployment, esx

我正在尝试部署与语言环境或日期时间格式无关的旧应用程序（即我没有编写它）。修复应用程序的代码目前不是一种选择。

我们在将此应用程序从一台服务器移动到另一台服务器时遇到问题，因为日期格式在新服务器上为 dd/mm/yyyy，但在下一个服务器上为 mm/dd/yyyy。

原始服务器是 Windows Server 2008 安装。它是托管在 IIS 上的 ASP.NET 应用程序。

新服务器是运行 ESX 的虚拟化环境。VM 是 Windows Server 2008 映像。

简单的调查确实揭示了新 VM 的日期设置被配置为不同的语言环境（默认为 dd/mm/yyyy）。但是，我们已经重新配置并重新启动了 VM，并且看到了相同的行为。

关于此设置可能从新 VM 上的何处提取的任何想法？或者我们需要遵循一个过程来强制 VM 的日期设置来更改 ASP.NET 框架正在接收的格式？

谢谢，坏熊猫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:42:41.840

在 web.config 文件中设置正确的**[全球化](http://msdn.microsoft.com/en-us/library/hy4kkhe0%28v=vs.100%29.aspx)**标签。

[为 Web 表单全球化设置文化和 UI 文化](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.100%29.aspx)：通过指定文化，可以使用一组通用首选项来获取与用户文化约定相对应的字符串、日期和数字格式等信息。

**全球化：**配置应用程序的全球化设置。

例如。

```
<configuration>
   <system.web>
     <globalization culture="en-US" uiCulture="en-US" />
   </system.web>
</configuration> 
```

**culture**：指定处理传入 Web 请求的默认文化。

**uiCulture**：指定用于处理与区域设置相关的资源搜索的默认文化。

# python - 如何检查一个元素是否也在另一个列表中

> ID：13201161
> 
> 赞同：1
> 
> 时间：2012-11-02T18:38:50.677
> 
> 标签：python, list, tuples

想象一个函数：

```
def Intersects (x, list1, list2, list3):
    if x in list1 and x in list2 and x in list3: return True
    return False 
```

必须有更好的方法来做到这一点，但我无法弄清楚。我怎样才能做到这一点？（性能很重要）

**编辑：**这次我遇到了一个相关但更难的问题。这次我有 3 个不相关的整数，我需要测试它们是否也相交。

像：

```
1, 2, 3 <-- elements to look for
if InAll ((1, 2, 3)) ... 
```

但我不是在寻找元组，而是在寻找整数。如何解包元组并进行相同的搜索？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T18:40:21.020

如果您希望能够为其提供任意数量的列表（不仅仅是三个），您可能会喜欢：

```
def inAll(x, *lsts):
    return all((x in l) for l in lsts) 
```

如果您多次检查这些列表中的成员资格（即在许多`x`s 上），您将希望在开始循环遍历s之前将每个成员设置为一个[集合。](http://docs.python.org/2/library/stdtypes.html#set)`x`

从您最近的编辑来看，您似乎还希望能够在`x`. 代码是：

```
def inAll(xs, *lsts):
    return all(all(x in l for x in xs) for l in lsts) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:51:10.173

```
 def intersects(x,L1,L2,L3):
     if not isinstance(x,(list,tuple)):
            x = [x]
     return set(x).intersection(L1).intersection(L2).intersection(L3) == set(x) 
```

应该适用于很多东西

```
>>> l1 = range(10)
>>> l2 = range(5,10)
>>> l3 = range(2,7)
>>> def intersects(x,L1,L2,L3):
...      if not isinstance(x,(list,tuple)):
...             x = [x]
...      return set(x).intersection(L1).intersection(L2).intersection(L3) == set(x)
...
>>> intersects(6,l1,l2,l3)
True
>>> intersects((5,6),l1,l2,l3)
True
>>> intersects((5,6,7),l1,l2,l3)
False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:19:12.873

做这样的事情的最好方法是使用集合......即使转换时间也可能会更有效：

```
def InAll(element_list, *sets):
    #calculate the intersection between all the sets
    intersection = reduce( lambda i , j: i & j, sets )
    #check if every element is in the intersection
   return all( i in intersection for i in element_list )

sets = [ set(range(5)), set(range(10)) ]
InAll( [9], *sets )
#False

sets = [ set(range(5)), set(range(10)) ]
InAll( [1,3], *sets )
#True 
```

最好事先将列表转换为集合，但是在函数内部插入转换conde很容易（但如果您有很多这些控件，请保留集合的副本）

# javascript - 在 ExtJs 中 form.getValues 返回什么样的对象

> ID：13201162
> 
> 赞同：2
> 
> 时间：2012-11-02T18:38:55.107
> 
> 标签：javascript, extjs

我有以下代码，我直接从 ExtJs 的教程中获得：

```
updateUser: function (button) {
var win = button.up('window'),
form = win.down('form'),
record = form.getRecord(),
values = form.getValues();

record.set(values);
win.close(); 
```

现在，我正在做一些修改以满足我的需要，以下 3 行究竟返回了什么：

```
form = win.down('form'),
record = form.getRecord(),
values = form.getValues(); 
```

根据文档，`down()`上面的方法返回一个`Ext.Container.AbstractContainer`根据文档甚至不应该使用的方法。此外，它没有 a`getRecord()`或`getValues()`方法。谁能解释这里发生了什么以及这两个调用返回什么样的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:01:36.013

当您调用`up`它时，它会查找传递的选择器的祖先。当您调用`down`它时，它会返回传递的选择器的后代。`form.getRecord()`返回表单的模型实例。并`form.getValues()`返回表单中输入的实际值。

例如：模型有 3 个字段`id, name, email`和一些配置，当您调用`form.getRecord()`它时，它会返回模型实例，基本上是骨架。

as`form.getValues()`返回输入的值。 例如：如果在调用时
在表单中输入以下值，则返回一个对象`id=1, name=xxxxx, email=aaaaa@test.com``form.getValues()`

```
{
  id:1,
  name:'xxxxx',
  email:'aaaaa@test.com'
} 
```

我希望这能回答你的问题

# windows - 检查命令是否在 CMD 内部

> ID：13201166
> 
> 赞同：4
> 
> 时间：2012-11-02T18:39:16.087
> 
> 标签：windows, batch-file, cmd

我有一个命令的名称，我需要检查这个命令是否是内部的。如何在批处理脚本中执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T18:45:43.950

因此，经过大量调整，并且感谢@Andriy M 的帮助，它终于可以工作了。

```
@ECHO off

CALL :isInternalCommand dir dirInternal
ECHO is dir internal: %dirInternal%

CALL :isInternalCommand find findInternal
ECHO is find internal: %findInternal%

exit /b 0

:isInternalCommand
SETLOCAL

MKDIR %TEMP%\EMPTY_DIR_FOR_TEST > NUL 2>& 1
CD /D %TEMP%\EMPTY_DIR_FOR_TEST
SET PATH=
%~1 /? > NUL 2>&1
IF ERRORLEVEL 9009 (ENDLOCAL
SET "%~2=no"
) ELSE (ENDLOCAL
SET "%~2=yes"
)

GOTO :EOF 
```

* * *

## 旧解决方案

您可以使用`where`. 如果失败，则该命令可能是内部命令。如果成功，您将获得证明它不是内部的可执行路径。

```
C:\Users\user>where path
INFO: Could not find files for the given pattern(s).

C:\Users\user>where find
C:\Windows\System32\find.exe 
```

**编辑：**正如评论所暗示的，如果您正在寻找可移植性而不仅仅是研究，这可能不是最佳解决方案。所以这是另一种可能的解决方案。

设置`%PATH%`为空，因此`HELP`找不到任何内容，然后`HELP`在您尝试检查的命令上运行。

```
C:\Users\user>set PATH=

C:\Users\user>path
PATH=(null)

C:\Users\user>%WINDIR%\System32\help del
Deletes one or more files.

DEL [/P] [/F] [/S] [/Q] [/A[[:]attributes]] names
[...]

C:\Users\user>%WINDIR%\System32\help find
'find' is not recognized as an internal or external command,
operable program or batch file. 
```

如果命令没有帮助，这可能仍然会失败。

**编辑2：**没关系，这也行不通。两种情况都返回`%ERRORLEVEL%=1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T01:37:07.917

kichik 有一个很好的答案。但是，如果当前目录中恰好有与提供的命令名称匹配的可执行文件或批处理脚本，则它可能会给出误报。

我能想到的避免该问题的唯一方法是在目录中创建一个已知为空的文件夹，`%TEMP%`然后从该文件夹运行测试。

这是 kichik 解决方案的修改版本，应该可以使用。

```
@echo off
setlocal

::Print the result to the screen
call :isInternal find
call :isInternal dir

::Save the result to a variable
call :isInternal find resultFind
call :isInternal dir  resultDir
set result

exit /b

:isInternal  command  [rtnVar]
setlocal
set "empty=%temp%\empty%random%"
md "%empty%"
pushd "%empty%"
set path=
>nul 2>nul %1 /?
if errorlevel 9009 (set rtn=not internal) else (set rtn=internal)
popd
rd "%empty%"
(
  endlocal
  if "%~2" neq "" (set %~2=%rtn%) else echo %1 is %rtn%
)
exit /b 0 
```

这是一个脚本，它将简单地列出所有内部命令，假设 HELP 包含内部命令的完整列表。

***更新：*** *FOR 和 IF 都有特殊的解析规则，如果通过 FOR 变量或延迟扩展执行这些命令，这些规则将无法工作。我不得不重写此脚本以使用 CALL 并改为通过 CALL 参数执行命令。*

```
@echo off
setlocal enableDelayedExpansion
set "empty=%temp%\empty%random%"
md "%empty%"
pushd "%empty%"
for /f "delims= " %%A in ('help^|findstr /rc:"^[^ ][^ ]*  "') do call :test %%A
popd
rd "%empty%"
exit /b

:test
setlocal
set path=
%1 /? >nul 2>nul
if not errorlevel 9009 echo %1
exit /b 0 
```

# wcf - IIS6 中是否有类似于 wcf 的命名管道传输的东西？

> ID：13201173
> 
> 赞同：2
> 
> 时间：2012-11-02T18:39:47.383
> 
> 标签：wcf, web-services, iis

我有一个只能从同一个框调用的 Web 服务。在 IIS 7 中，我使用命名管道端点来提高安全性和速度。我现在正在处理的项目具有相同的要求，但将在服务器 2003 IIS 6 上。我有哪些选项可以限制对本地计算机的访问？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:01:11.290

IIS6 仅支持 http 和 wshttp 协议。您可以在 Windows 服务中运行您的 WCF 并像现在一样控制一切（尽管可能如此）。还有很多方法可以保护它。

两者之间的自签名证书（在互联网上很流行）

Windows 身份验证和控制列表（在同一网络/域上很容易）

用户名密码（也很简单）。

但是，如果您现在可以使用它，我会尝试重新托管到 Windows 服务中，这不应该带走您当前的功能。

您应该知道，如果在网络上使用命名管道，它实际上只是通过 TCP 进行远程处理。

# xamarin.ios - 在 MvvmCross monodroid Activity 中插入一个 Monogame 视图

> ID：13201174
> 
> 赞同：2
> 
> 时间：2012-11-02T18:39:50.507
> 
> 标签：xamarin.ios, xamarin.android, xamarin, mvvmcross, monogame

我正在尝试从我的 MvvmCross monodroid Activity 视图中的 RelativeLayout 中构建一个 Monogame 视图。

android Activity 继承自 Microsoft.Xna.Framework.AndroidGameActivity 以便能够在 RelativeLayout（工作）中运行 Monogame。

我的 MvvmCross Activity 继承自 MvxBindingActivityView(working)。

所以，我需要一种方法来运行游戏并在同一个活动中绑定一些数据。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:28:40.200

简单地说，您可以通过继承一些接口，然后剪切和粘贴少量代码来执行 ViewModel 的基本加载和分配，将任何 Activity 转换为 MvxActivity。

例如，查看`#Region`并`IMvxAndroidView<TViewModel>`添加以使[MvxActivityView.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Views/MvxActivityView.cs)从正常的`Activity`.

例如，它是用于将 Google 之类的专用 Activity 适配`MapActivity`到[MvxMapActivityView.cs中的相同区域和接口](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid.Maps/MvxMapActivityView.cs)

在这个级别，Activity/View 有一个`ViewModel`可以在 C# 代码中使用，但没有聪明的 xml 膨胀——它没有聪明的`Binding`支持。

可以在这个级别编写代码——我已经发布了没有绑定的应用程序——但许多用户也更喜欢添加 DataBinding ......

* * *

要添加此 DataBinding 支持，您需要添加更多代码，以提供 BindingInflate、绑定存储、绑定处置等。

例如，使用接口和#region`MvxActivityView`扩展原始数据，例如： [MvxBindingActivityView.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Views/MvxBindingActivityView.cs%20sds)`IMvxBindingActivity`

例如`MvxMapActivityView`使用相同的区域和接口进行扩展：[MvxBindingMapActivityView.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid.Maps/MvxBindingMapActivityView.cs)

* * *

因此，要扩展您的自定义`AndroidGameActivity`：

1.  继承 from`AndroidGameActivity`获取`ViewModelOwningGameActivity<T>`和剪切和粘贴`IMvxAndroidView<TViewModel>`接口，继承`#region`from`MvxActivityView<T>`提供 ViewModel 方法、字段和属性。

然后假设你想要绑定：

1.  继承自`ViewModelOwningGameActivity<T>`获取`BindingGameActivity<T>`和剪切粘贴`IMvxBindingActivity`和`#region`从`MvxBindingActivityView<T>`获取绑定方法

* * *

对于专业活动，您可能想要添加更多 - 例如，您可以为 MapActivity 添加一些自定义帮助方法来绘制点和线，或者让 GameActivity 做*任何游戏*......但这取决于个人实现。

* * *

很抱歉在调整活动时需要剪切和粘贴代码 - 我已尝试将其保持在最低限度。然而，到目前为止，我真正想要在 C# 中使用多重继承或 Mixins 编写 Mvx

# .net - 使用 Mvc.Controller 通过操作打印出消息？VB.NET

> ID：13201176
> 
> 赞同：0
> 
> 时间：2012-11-02T18:40:10.007
> 
> 标签：.net, vb.net, visual-studio

## 控制器

* * *

```
Public Class HelloWorldController
    Inherits System.Web.Mvc.Controller

    '
    ' GET: /HelloWorldController

    Function PrintMessage() As ActionResult

    End Function

End Class 
```

## 网址请求

* * *

`http:// localhost:1430 / HelloWorld / PrintMessage`

## 问题

* * *

如何在本地主机上的网络浏览器中打印出一条消息，上面使用“Mvc.Controller”，方法和相应的 URL 请求？

`intended`只需按下链接或按钮即可调用方法（操作） 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:58:50.967

您可以使用[Content](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.content%28v=vs.98%29.aspx)方法返回一个字符串：

```
return Content("Hello World") 
```

如果要格式化，请创建一个视图并将字符串作为模型返回。

# ruby - 如何在 Ruby 中实现多态性

> ID：13201178
> 
> 赞同：1
> 
> 时间：2012-11-02T18:40:13.920
> 
> 标签：ruby

所以这里有一个更 java-esq 的方法（我认为）......我在 Ruby 中有这段代码

```
class Human
  def move
    p 'Human move: X'
  end
end

class Computer
  def move
    p'Computer move: O'
  end
end

class Player
  def initialize(letter)
    if letter == 'X'
      return Human.new
    else
      return Computer.new
    end
  end
end

bob = Player.new('X')
bob.move 
```

我期待回到 cli 'Human move: X' 我收到以下错误...

```
undefined method `move' for #<Player:0x007f8d930895a8> (NoMethodError) 
```

任何人都可以帮助这个 Ruby 菜鸟吗？

- - - - - - - - - - - - -讨论 - - - - - - - - - - - -

现在我刚刚想出了一种方法，我猜想，使用继承和覆盖的“经典”Ruby 时尚。现在，这对我心中的子处理器毫无意义。我的意思是，如果我这样做......我可以只需要任何其他类文件中的类文件并实例化一个新对象。当您在 Java 中执行此操作时，它并没有真正的多态性......这是代码......

```
class Player
  def move
    return ""
  end
end

class Human < Player
  def move
    return 'Human move: X'
  end
end

class Computer < Player
  def move
    return'Computer move: O'
  end
end

players = [Human.new, Computer.new]
players.each {|player|
  print player.move
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T18:46:47.913

You almost made it :) In ruby you can't return an arbitrary object from a constructor. Well, you can, but that return value is ignored. Instead use a [Factory Method](http://en.wikipedia.org/wiki/Factory_method_pattern) (in OOP speak).

```
class Human
  def move
    p 'Human move: X'
  end
end

class Computer
  def move
    p 'Computer move: O'
  end
end

class Player
  def self.get_player(letter)
    if letter == 'X'
      return Human.new
    else
      return Computer.new
    end
  end
end

bob = Player.get_player('X')
bob.move
# >> "Human move: X" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:46:25.167

You're calling `Player.new`, so you'll get a `Player` object back, no matter what you return in the `initialize` function. If for some reason you don't want to instantiate `Human` and `Computer` directly, do something like that :

```
class Player
  def self.new_player(letter)
    if letter == 'X'
      return Human.new
    else
      return Computer.new
    end
  end
end

bob = Player.new_player('X')
bob.move #Prints your output 
```

# sql - 表标识符的整数或指导

> ID：13201183
> 
> 赞同：-4
> 
> 时间：2012-11-02T18:40:28.927
> 
> 标签：sql, sql-server, int, guid, identifier

> **可能重复：**
> [SQL 主键、INT 或 GUID 或..？](https://stackoverflow.com/questions/4557422/sql-primary-key-int-or-guid-or)

在 sql server 表中使用唯一标识符的最佳实践是什么？

我看过有关使用 guid 或 int 的文章，每种方法的优缺点。

我希望使用以下主体，对于外部标识符，应该使用 guid，但对于内部标识符，最好使用 int。

我正在寻找有关此原则的反馈以及有关最佳方法的指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:01:28.833

我喜欢所有表的 PK 的聚集标识列。

1.  它们更容易使用，因为我是人类。
2.  它们需要更少的存储空间（记住索引也使用你的 PK）

如果我需要创建一个不可猜测的标识符，我还会使用一个 guid 列，但我仍然有我的身份列。

我只见过一个令人信服的论点，将 guid 用作集群 pk，并且仅限于非常高的插入场景（我记得每秒数百次）。在这种情况下，您不希望一个硬盘驱动器磁头完成所有磁盘写入，因此 GUID 会强制它不要简单地添加到表的末尾并在整个位置进行写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:48:42.903

我同意你的原则。在 URL 中公开整数会使网络访问者猜测，例如更改数字以查看网站的反应。URL 中的 int 也显示了数据库的大小。我不想要那个。我喜欢 URL 中的指南。

# c# - 什么在流的末尾返回常见的二进制读取方法？

> ID：13201196
> 
> 赞同：-1
> 
> 时间：2012-11-02T18:41:33.280
> 
> 标签：c#, stream, binary, byte

我有一个小问题。什么在流的末尾返回常见的二进制读取方法？例如，我有`Stream.ReadByte()`它返回单个无符号字节。当我在直播结束时会发生什么？当我将此方法与 NetworkStream 一起使用时有什么不同吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:44:46.447

根据[基类的文档](http://msdn.microsoft.com/en-us/library/system.io.stream.readbyte.aspx)：

> **返回值**
> 
> 类型：System.Int32
> 转换为 Int32 的无符号字节，如果在流的末尾，则为 -1。

因此，该方法读取一个 int 并将其转换为更广泛的类型，以便能够在流的末尾返回额外的 -1 值。

[`FileStream`](http://msdn.microsoft.com/en-us/library/y0bs3w9t.aspx)和都[`NetworkStream`](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx)源自[`Stream`](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)。这意味着不需要逻辑上的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:51:03.640

用 BinaryReder 包装流以对各种流类型具有相同的行为。当您阅读完结尾时，阅读器会抛出异常。

[http://msdn.microsoft.com/en-us/library/system.io.endofstreamexception(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.io.endofstreamexception(v=vs.80).aspx)

**异常还是-1？**

这取决于您如何阅读流

```
using (var stream = new FileStream("c:\\smple.bin", FileMode.Open))
{
    ...
    stream.ReadByte(); // will return -1 when reading over the end
} 
```

但是当你这样做时：

```
using (var stream = new FileStream("c:\\smple.bin", FileMode.Open))
using (var reader = new BinaryReader(stream))
{
    ... 
    reader.ReadByte(); // will throw an exception
} 
```

# wordpress - 验证 wordpress 评论中的电子邮件。功能

> ID：13201201
> 
> 赞同：0
> 
> 时间：2012-11-02T18:41:50.530
> 
> 标签：wordpress

我想验证 WordPress 评论中的电子邮件。发送邮件评论。评论者一键检查您的邮件。然后自动发布消息。我不知道如何编写函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:46:10.863

```
function CheckEmail(email)
{
   if(email contains text before @ && text between @ and . && text after the .)
    {
       return true;
    }
    return false;
} 
```

像这样的东西？

# regex - Vim substitution with regex

> ID：13201204
> 
> 赞同：7
> 
> 时间：2012-11-02T18:41:52.933
> 
> 标签：regex, vim, substitution

New to regex and I need to pattern match on some dates to change the format.

I'm going from `mm/dd/yy` to `yyyy-mm-dd` where there are no entries prior to 2000.

What I'm unfamiliar with is how to group things to use their respective references of `\1`, `\2`, etc.

Would I first want to match on `mm/dd/yy` with something like `( \d{2} ) ( \/\d{2} ) ( \/\d{2} )` or is it as easy as `\d\d/\d\d/\d\d` ?

Assuming my first grouping is partially the right idea, I'm looking to do something like:

```
:%s/old/new/g
:%s/ ( \d{2} ) ( \/\d{2} ) ( \/\d{2} ) / ( 20+\3) - (\3) - (\1) /g 
```

EDIT: Sorry, the replace is going to a `yyyy-mm-dd format` with hyphens, not the slash.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T19:19:47.700

I was going to comment on another answer but it got complicated.

Mind the `magic` setting. If you want unescaped parens to do grouping, you need to include `\v` somewhere in your pattern. (See `:help magic`).

You can avoid escaping the slashes if you use something other than slashes in the `:s` command.

You are close. :) You don't want all of those spaces though as they'll require spaces in the same places to match.

My solution, where I use `\v` so I don't need to escape the parens and exclamation points so I can use slashes in my pattern without escaping them:

```
:%s!\v(\d{2})/(\d{2})/(\d{2})!20\3-\2-\1!g 
```

This will match "inside" items that start or end with three or more digits though, too. If you can give begin/end criteria then that'd possibly be helpful. Assuming that simple "word boundary" conditions work, you can use `<>`:

```
:%s!\v<(\d{2})/(\d{2})/(\d{2})>!20\3-\2-\1!g 
```

To critique yours specifically (for learning!):

```
:%s/ ( \d{2} ) ( \/\d{2} ) ( \/\d{2} ) / ( 20+\3) - (\3) - (\1) /g 
```

*   Get rid of the spaces since presumably you don't want them!
*   Your grouping needs either `\( \)` or `\v` to work
*   You also need `\{2}` unless you use `\v`
*   You are putting the slashes in groups two and three which means they'll show up in the replacement too
*   You don't want the parentheses in the output!
*   You're substituting text directly; you don't want the `+` after the 20 in the output

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:54:23.757

Try this:

```
:%s/\(\d\{2}\)\/\(\d\{2}\)\/\(\d\{2}\)/20\3-\2-\1/g 
```

The bits you're interested in are: `\(...\)` - capture; `\d` - a digit; `\{N}` - N occurrences; and `\/` - a literal forward slash.

So that's capturing two digits, skipping a slash, capturing two more, skipping another slash, and capturing two more, then replacing it with "20" + the third couplet + "-" + the second couplet + "-" + the first couplet. That should turn "dd/mm/yy" into "20yy-mm-dd".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:18:46.863

ok, try this one:

```
 :0,$s#\(\d\{1,2\}\)/\(\d\{1,2\}\)/\(\d\{1,2\}\)#20\3-\2-\1#g 
```

I've removed a lot of the spaces, both in the matching section and the replacement section, and most of parens, because the format you were asking for didn't have it.

Some things of note:

*   With vi you can change the '/' to any other character, which helps when you're trying to match a string with slashes in it.. I usually use '#' but it doesn't have to be.
*   You've got to escape the parens, and the curly braces
*   I use the :0,$ instead of %s, but I think it has the same meaning -- apply the following command to every row between row 0 and the end.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T18:54:01.263

For the match: `(\d{2})\/(\d{2})\/(\d{2})`

For the replace: `20\3\/\1\/\2`

# r - 向量化函数：带有衰减参数的 cumsum

> ID：13201206
> 
> 赞同：2
> 
> 时间：2012-11-02T18:42:11.077
> 
> 标签：r, vectorization, cumsum

我编写了该`cumsum`函数的一个变体，在添加当前值之前，我将先前的总和乘以衰减因子：

```
decay <- function(x, decay=0.5){
  for (i in 2:length(x)){
    x[i] <- x[i] + decay*x[(i-1)]
  }
  return(x)
} 
```

这是一个演示，使用二进制变量使效果清晰：

```
set.seed(42)
Events <- sample(0:1, 50, replace=TRUE, prob=c(.7, .3))
plot(decay(Events), type='l')
points(Events) 
```

![绘图](../Images/5485749b49c187929ced4d78ed598daf.png)

编译这个函数会加快很多速度：

```
#Benchmark
library(compiler)
library(rbenchmark)
cumsum_decayCOMP <- cmpfun(cumsum_decay)
Events <- sample(0:1, 10000, replace=TRUE, prob=c(.7, .3))
benchmark(replications=rep(100, 1),
          cumsum_decay(Events),
          cumsum_decayCOMP(Events),
          columns=c('test', 'elapsed', 'replications', 'relative'))

                      test elapsed replications relative
1     cumsum_decay(Events)    3.28          100    6.979
2 cumsum_decayCOMP(Events)    0.47          100    1.000 
```

但我怀疑矢量化会进一步改善它。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:52:19.860

试试这个`filter`功能：

```
filter.decay <- function(x, decay=0.5) filter(x, decay, method = "recursive") 
```

它非常快：

```
#                       test elapsed replications relative
# 1     cumsum_decay(Events)    4.83          100    19.32
# 2 cumsum_decayCOMP(Events)    1.00          100     4.00
# 3     filter.decay(Events)    0.25          100     1.00 
```

# com-interop - 如何在不调用 RegAsm 的情况下在安装期间正确注册 .NET 程序集？

> ID：13201209
> 
> 赞同：1
> 
> 时间：2012-11-02T18:42:18.690
> 
> 标签：com-interop, regasm

我有一个 .NET COM 可见的进程外服务器，我们称之为 Server.exe。我需要能够在可能安装了不同版本的 .NET 框架的系统上注册它，所以我想避免用它的全名（往往包含 .NET 框架的版本号）来调用 RegAsm。

我一直在尝试通过导出注册表补丁并使用以下命令导入它来使其正常工作：

```
regasm /regfile:foo.reg Server.exe
reg import foo.reg 
```

但是，应用补丁并不能正确注册组件。我可以直接使用 regasm 注册它。我是管理员。regasm 在做什么，它没有写入注册表补丁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:49:12.063

这是因为 RegAsm 已损坏，并且通过注册表修补在常规注册和延迟注册之间的行为不一致，并且由于其量子特性，它将根据请求的行为生成不同的注册表项。尚未探索使用 RegAsm 来模拟进程内和进程外服务器叠加之间的量子计算。

要解决此问题：

1.  用于`RegAsm /regfile:foo.reg Server.exe`生成注册表补丁。
2.  用于`RegAsm /register Server.exe`正确注册类型。
3.  在记事本中打开 foo.reg。foo.reg 中指定的几个键将具有以下格式的路径：`HKEY_CLASSES_ROOT\CLSID\{YOUR-CLSID}`. 打开 regedit 并找到此键。
4.  将此密钥导出为 bar.reg 并在记事本中打开。
5.  将 bar.reg 中的所有条目复制到 foo.reg，并从 foo.reg 中删除任何将值添加到`HKEY_CLASSES_ROOT\CLSID\{YOUR-CLSID}`.

    *   请记住，如果您在 64 位系统上，注册表重定向可能意味着此密钥存储在`HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{YOUR-CLSID}`而不是`HKEY_CLASSES_ROOT\CLSID\{YOUR-CLSID}`. 为确保在 32 位和 64 位系统上的部署一致，`Wow6432Node\`请从路径中删除（保留路径与它们在 32 位系统上的外观相同）并使用`reg import foo.reg /reg:32`. `/reg:32`是一个半文档化的开关，它可以在 32 位和 64 位版本的 windows 上工作，即使在 64 位版本的 reg 上也可以启用注册表反射，从而确保条目安装在正确的位置。

# java - Java：在同一元素上工作的锁定函数

> ID：13201210
> 
> 赞同：0
> 
> 时间：2012-11-02T18:42:31.750
> 
> 标签：java, synchronization, locking, synchronized

有许多线程在同一个地图上的元素上工作，每个线程都有一个代码，例如：

```
THREAD_1 works on an element with code "1234"
THREAD_2 works on an element with code "1234"
THREAD_3 works on an element with code "9876"
etc... 
```

元素不是永久性的，即 THREAD_1 可能会删除元素“1234”，然后再次插入。我想要的是，当 THREAD_1 正在处理元素“1234”（也将其删除）时，THREAD_2 必须等待。

有没有办法做到这一点？

一种可能的解决方案可能是在 HashMap 中插入一个假元素，然后在该元素上使用“同步”子句强制同步。你有什么想法？（显然，如果线程删除了带有相关代码的元素，那么假元素也会保留在地图中）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:19:39.823

鉴于您的特定问题，没有一个 java 标准对象可以解决您的所有问题。这是一个我认为是正确的解决方案，并且不会在您的锁定映射中保留任何不必要的键或值：

```
// we don't use a ConcurrentHashMap, because we have some other operations 
// that need to be performed in atomically with map.put and map.remove.
// ConcurrentHashMap would of course also work, but it doesn't remove the 
// need for external synchronization in in our case.
Map<String, CountingLock> locksMap = new HashMap<String, CountingLock>();
...

HttpResponse myFunction(String key) {

    CountingLock lock;
    synchronized(locksMap){
        lock = locksMap.get(key);
        if(lock == null){
            lock = new CountingLock();
            locksMap.put(key, lock);
        }
        lock.prepare(); // has to be done while holding the lock of locksMap.
                        // basically tells other threads that the current 
                        // thread intends to acquire the lock soon. This way,
                        // the other threads know not to remove this lock 
                        // from locksMap as long as another one has indicated
                        // that he is going to need it soon.
    }

    lock.lock(); // has to be done while NOT holding the lock of locksMap,
                 // or we risk deadlock situations.

    try {
        // ...
        // work
        // ...
    } finally {
        synchronized(locksMap) {
            if(lock.unlock() == 0){
                // no other thread is intending to use this lock any more. 
                // It is safe to remove it from the map. The next thread 
                // will just have to recreate a new lock for the same key.
                locksMap.remove(key);
            }
        }
    }

    return SOMETHING;    
}

private static class CountingLock {
    // The number of threads that are trying to access the protected Key
    private AtomicInteger interestedThreads = new AtomicInteger(0);

    private Lock lock = new ReentrantLock();

    public void prepare(){
        interestedThreads.incrementAndGet();
    }

    public void lock(){
        lock.lock();
    }

    public int unlock(){
        lock.unlock();
        return interestedThreads.decrementAndGet();              
    }
} 
```

此代码在所有情况下都应按预期工作。这是一个有趣的问题要解决:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:21:55.213

我们使用一种我们称之为 LockMap 的东西。

LockMap 本质上是：

```
Map<Object, ReadWriteLock> 
```

我们有一个同步方法来获取特定对象的锁。

由于 Maps 依赖于等价性，而不是身份，因此两个对象`equal()`给你相同的锁。

所以：

```
lock1 = map.get(new Thing(1));
lock2 = map.get(new Thing(1));

lock1 == lock2 = true 
```

这很方便。

获得锁后，您可以根据需要将其锁定，以控制对对象的访问。

我们做的另一件事是使用 LRU 映射（使用 LinkedHashMap - 见此[）](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html#removeEldestEntry%28java.util.Map.Entry%29)，以便旧对象键在未使用时可能会从末端脱落。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:43:42.923

你应该使用[`ConcurrentHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)

> 支持检索的完全并发和可调整的预期更新并发的哈希表。

**检索操作（包括 get）一般不会阻塞**，因此可能与更新操作（包括 put 和 remove）重叠。

> 更新操作之间允许的并发性由可选的 concurrencyLevel 构造函数参数（默认为 16）指导，该参数用作内部大小调整的提示。该表在内部进行了分区，以尝试允许指定数量的并发更新而不会发生争用。因为哈希表中的放置本质上是随机的，所以实际的并发性会有所不同

# c++ - 访问向量中的一系列元素

> ID：13201211
> 
> 赞同：0
> 
> 时间：2012-11-02T18:42:32.143
> 
> 标签：c++

有一个对象列表，例如：- 列表中的矩形对象，如 std::list。我需要从列表中（一次）获取 50 个对象的列表，然后从每个 Rectangle 中获取单个元素作为长度和宽度，并形成前 50 个大小（长度、宽度）的字符串，然后是下一个 50 和以此类推，直到最后……

我正在尝试找出一种使用增强功能对其进行编码的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:06:37.233

You didn't give any details of how those strings should be formatted, but the general iteration could be of this form:

```
int j;
string work;
vector<string> strings;
for(list<Rectangle>::iterator i = l.begin(); i != l.end(); i++,j++)
{
    int len = i->length, br = i->breadth;
    work += something_based_on(len,br);
    if(j == 50)
    {
        strings.push_back(work);
        work.clear();
        j = 0;
    }
} 
```

This doesn't use boost, though.

# c++ - c++：得到一个奇怪的打印输出

> ID：13201213
> 
> 赞同：1
> 
> 时间：2012-11-02T18:42:33.400
> 
> 标签：c++

那是我的代码：

```
long base2(int number)
{
   long result = 0;
   int num = number;
   int multi = 1;
   int rem;
   while(num > 0)
   {
    rem = num % 2;
    result = result + (rem * multi);
    num = num / 2;
    multi = multi * 10;
   }
   return result;
} 
```

我得到一个奇怪的打印：`-1884801888`

我运行了调试器并正确计算，但最后最终答案更改为`-1884801888`

[打印主要发生，我检查了，这里的数字更改为`-1884801888`]

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:50:33.947

在当今最常见的平台上，两者`int`都是`long`32 位宽。您正在导致*整数溢出*，其中您计算的值超出了带符号的 32 位整数可表示的范围。

如果值不适合 32 位但适合 63 或 64 位，则可以使用`long long`or `unsigned long long`（或固定宽度类型`int64_t`或`uint64_t`from `<stdint.h>`）数据类型来存储结果。如果这些还不够大，那么您将需要使用更复杂的解决方案（例如，GMP 库支持任意大小的整数），但只能作为最后的手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:05:39.383

看起来您正在尝试获取一个数字并打印出其二进制表示，首先将其转换为一种十进制编码的二进制。无需转换，数字已在内部存储为一堆 0 和 1。实际上，打印出来必须经过一些处理才能将其打印为十进制数。

以下是如何以几种不同的方式打印出数字：

```
const int foo = 17;
std::bitset<sizeof(foo)*8> b(foo);

std::cout << "Decimal:  " << foo
          << "\nHex:      " << std::hex << foo
          << "\nOctal:    " << std::oct << foo
          << "\nBinary:   " << b << std::endl; 
```

二进制形式以这种方式打印出所有前导零，但还有其他方法可以跳过前导零。

# xml-parsing - PHP 解析 XML 中的节点详细信息并组合成可点击的 URL

> ID：13201218
> 
> 赞同：0
> 
> 时间：2012-11-02T18:42:49.160
> 
> 标签：xml-parsing

我有一个名为“ID”的 XML 节点并包含字母数字，例如 123xyz。我有另一个标准网站 url，例如，staffexam.com，它不在 XML 节点中。

现在我想用网站网址“staffexam.com”解析“ID”

```
<?php
$xml = simplexml_load_file("exam.xml");
foreach ( $xml->ID as $examID )
{
echo " URL: ", " http://", $examID, ".staffexam.com", "\n";
}
?> 
```

最终结果显示[http://123xyz.staffexam.com](http://123xyz.staffexam.com)但它是纯文本格式。如何将其转换为可点击的网址？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:58:36.270

```
foreach ( $xml->ID as $examID )
{
$url = "http://" . $examID . ".staffexam.com";
echo " URL: <a href=\"$url\">$url</a>\n";
} 
```

# database - 与即时客户端连接时出现 ora-12154 问题

> ID：13201220
> 
> 赞同：0
> 
> 时间：2012-11-02T18:43:06.493
> 
> 标签：database, oracle, oracle11g, tnsnames, ora-12154

我在 Windows Server 2008R2 上运行 Oracle 11g。我有一个在其他地方运行的客户端应用程序（Zabbix）试图连接到它。

客户端机器具有：

*   oracle-instantclient11.2-basic-11.2.0.3.0-1.i386.rpm
*   oracle-instantclient11.2-devel-11.2.0.3.0-1.i386.rpm

因此，它没有 sqlnet.ora 或 tnsnames.ora 文件。它正在尝试使用直接寻址建立连接。使用 php 中的打印语句，我看到它正在调用

```
ociplogon(user,password,$connect); 
```

将 connect 设置为**//dbhostmachine:1521/zabbix**。所以那里的一切看起来都很好。

```
C:\Users\mdobrini> lsnrctl services

LSNRCTL for 64-bit Windows: Version 11.1.0.7.0 - Production on 02-NOV-2012 13:00:55

Copyright (c) 1991, 2008, Oracle.  All rights reserved.

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=dbhostmachine.dddd.cccc.com)(POR
Services Summary...
Service "zabbix" has 1 instance(s).
  Instance "zabbix", status READY, has 1 handler(s) for this service...
    Handler(s):
      "DEDICATED" established:578 refused:0 state:ready
         LOCAL SERVER
Service "zabbixXDB" has 1 instance(s).
  Instance "zabbix", status READY, has 1 handler(s) for this service...
    Handler(s):
      "D000" established:0 refused:0 current:0 max:1022 state:ready
         DISPATCHER <machine: dbhostmachine, pid: 6384>
         (ADDRESS=(PROTOCOL=tcp)(HOST=dbhostmachine.dddd.cccc.com)(PORT=61396))
Service "zabbix_XPT" has 1 instance(s).
  Instance "zabbix", status READY, has 1 handler(s) for this service...
    Handler(s):
      "DEDICATED" established:578 refused:0 state:ready
         LOCAL SERVER
The command completed successfully 
```

尝试在本地连接工作正常：

```
SQL*Plus: Release 11.1.0.7.0 - Production on Fri Nov 2 13:06:31 2012

Copyright (c) 1982, 2008, Oracle.  All rights reserved.

Enter user-name: SYSTEM
Enter password:

Connected to:
Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production

SQL> connect uuu/ppp@localhost/zabbix
Connected.
SQL> 
```

但是，远程我得到了流行的错误：

```
ociplogon(): ORA-12154: TNS:could not resolve the connect identifier specified 
```

奇怪的是，它之前一直在间歇性地工作。我的应用程序中每 10 秒就会出现一个错误：

```
30923:20121101:142237.595 [Z3001] connection to database '//dbhostmachine:1521/zabbix'     failed: [-1] ORA-12516: TNS:listener could not find available handler with matching   protocol stack
30923:20121101:142237.596 watchdog: database is down 
```

但是肯定有数据通过网络发送，并保存在数据库中。重新启动应用程序和服务器后，我根本无法获得连接，我一直在关注 ORA-12154

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:20:48.647

ORA-12154 是由 DNS 问题引起的。切换到IP地址后就消失了。

ORA-12516 是由数据库上达到的最大会话/进程引起的。在调整它以及一些 PHP OCI8 参数之后，它也消失了。

# css - 带有 Internet Explorer 的 CSS 菜单

> ID：13201222
> 
> 赞同：0
> 
> 时间：2012-11-02T18:43:24.700
> 
> 标签：css, menu, padding

我用 CSS 创建了非常简单的菜单。在 Firefox、opera、safari 和 chrome 中一切正常。但在 IE 10 中，左侧有很大的可用空间。我尝试了填充和文本对齐，但它们没有用。

这是我的菜单：

```
<div id="menu_mod">
   <ul>
    <li><a href="#">UŻYTKOWNICY</a>
     <ul>
      <li>  <?php echo anchor('admin/UserGet/GetAll', 'Przeglądaj', 'class="link-class"') ?></li>
      <li>  <?php echo anchor('admin/UserGet/', 'Dodaj', 'class="link-class"') ?></li>
      <li>  <?php echo anchor('admin/UserGet/', 'Uprawnienia', 'class="link-class"') ?></li>
      <li>  <?php echo anchor('admin/UserGet/', 'Aktywacja', 'class="link-class"') ?></li>
      <li>  <?php echo anchor('admin/UserGet/', 'Usuń', 'class="link-class"') ?></li>
     </ul>
    </li>
   </ul>
</div> 
```

和CSS：

```
#menu_mod {
    width: 200px;
    height:790px;
    float: left;
    background: url(images/menu.png) repeat-x left top;
    text-align: left;
}

#menu_mod ul {
    padding-left: 5px;
}

#menu_mod li {
    padding-left: 5px;
}

#menu_mod ul li a {
    font: bold 12px/24px "Trebuchet MS", Arial, Helvetica, sans-serif;
}

#menu_mod ul li a:hover {
    color: #ffffff; 
} 
```

[1]: [http://i50.tinypic.com/2vj9095.png](http://i50.tinypic.com/2vj9095.png) - 其他浏览器

[1]： http: [//i50.tinypic.com/abjtq1.jpg](http://i50.tinypic.com/abjtq1.jpg) - - IE

我删除`display:block;`了，但仍然没有帮助。我试过`anchor`and `a href`，但还是一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:19:01.313

**基于列表的菜单规则：**

1.  重置您的列表：`ul, li { margin:0;padding:0 }`
2.  不要为列表设置样式 - 为列表的内容设置样式。

这意味着除了`float/positioning/display`，将所有样式放在`A`-tag 上（并使用`display:block`）。

# php - 从另一个数组中排除一个数组

> ID：13201223
> 
> 赞同：0
> 
> 时间：2012-11-02T18:43:29.990
> 
> 标签：php

我有这两个数组，它们的 ID [3 和 4] 是常见的，ID [10] 是不同的。我只需要 ID 为 [10] 的商品

```
<?php

$usergroups = array();
$usergroups[] = array("id" => 3, "name" => "Parish 3");
$usergroups[] = array("id" => 4, "name" => "Parish 4");

$u= (object) $usergroups;
var_dump($u);

echo '<hr />';

$featuredgroups = array();
$featuredgroups [] = array("id" => 3, "name" => "Parish 3");
$featuredgroups [] = array("id" => 4, "name" => "Parish 4");
$featuredgroups [] = array("id" => 10, "name" => "Parish 10");

$fg = (object) $featuredgroups;
var_dump($fg);

  $filtered = array_diff($featuredgroups, $usergroups);
  var_dump($filtered); //returns empty result
?> 
```

如何过滤掉用户的特色？我试过这个

```
$filtered = array();
foreach($u as $uu)
{
   $ug = (object) $uu;
   foreach($fg as $ff)
   {
      $fgr = (object) $ff;
      if($fgr->id != $ug->id)
         echo "<br>---".$fgr->name;  //am supposed to add this to filtered
   }
} 
```

它正在打印出来

```
---Parish 4
---Parish 10
---Parish 3
---Parish 10 
```

而不仅仅是'Parish 10'，这是不同的。

## 更新

出于某种原因，`array_diff`如答案中所建议的那样不起作用。这仅适用于线性/一维数组。我用多维数组尝试过，就像问题中的那个一样，它没有用

```
 $filtered = array_diff($featuredgroups, $usergroups);
  var_dump($filtered); //returns empty result 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:46:55.337

要获得两个数组的差异，您可以使用 array_diff。

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

```
$differences = array_diff($usergroups, $featuredgroups); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T18:47:24.837

你需要使用`array_diff`，这是[手册](http://php.net/manual/en/function.array-diff.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T07:43:38.537

让我们来看看这两个数组。

```
 $usergroups = array();
            $usergroups[] = array("id" => 3, "name" => "Parish 3");
            $usergroups[] = array("id" => 4, "name" => "Parish 4"); 
```

和

```
 $featuredgroups = array();
            $featuredgroups [] = array("id" => 3, "name" => "Parish 3");
            $featuredgroups [] = array("id" => 4, "name" => "Parish 4");
            $featuredgroups [] = array("id" => 10, "name" => "Parish 10"); 
```

现在，假设这是唯一的，我们可以在数组中`id`检索用户组中的所有s。`id`

```
foreach ($usergroups as $item => $value)
        {
            $c[] = $value['id'];
        } 
```

这个 $c 数组将包含用户组中的所有`id`s。现在我们需要做的是，检查`id`特征组中是否存在；如果不存在，则检索这些值。这可以通过以下方式的组合`foreach`来完成：`in_array()`

```
foreach ($featuredgroups as $item => $value)
            {
                if (!in_array($value['id'], $c))
                {
                    $d[] = $value;
                }
            } 
```

**完整代码：**

```
foreach ($usergroups as $item => $value)
            {
                $c[] = $value['id'];
            }

foreach ($featuredgroups as $item => $value)
            {
                if (!in_array($value['id'], $c))
                {
                    $d[] = $value;
                }
            } 
```

这里`$d`将检索所需的结果。

# c++ - 前向声明来自不同命名空间的抽象类

> ID：13201226
> 
> 赞同：0
> 
> 时间：2012-11-02T18:43:38.343
> 
> 标签：c++, inheritance, namespaces, forward-declaration

> **可能重复：**
> [dynamic_cast 中的类型必须是指向完整类类型的指针或引用，或 void *](https://stackoverflow.com/questions/13133407/the-type-in-a-dynamic-cast-must-be-a-pointer-or-reference-to-a-complete-class-ty)

我有一个命名空间 Fuzzy，它有一个名为 CuteDog 的抽象类（继承自另一个抽象类）。

我正在写一个名为 PuppyArmy 的新课程

我想在 PuppyArmy 中有一个指向 CuteDog 的指针，并且在我的头文件中我正在尝试这个。

```
namespace Fuzzy { class CuteDog }

using namespace Fuzzy;

class PuppyArmy { 
  ...
  CuteDog *cute;
} 
```

然后当在我的 cpp 文件中时，我得到了这个

```
using namespace Tough;

....
cute = dynamic_cast<::Fuzzy::CuteDog*>(foo()); // where foo() returns the parent class of CuteDog* 
```

编译器告诉我

```
 C2440: '=' : cannot convert from Fuzzy::CuteDog * to PuppyArmy::Fuzzy::CuteDog * 
```

任何指向我在这里做错了什么的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:55:55.693

看起来您没有在定义`CuteDog`实现的地方包含头文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:46:17.707

以防有人被标题引导到这里。这是如何从不同的名称空间转发声明一个类（抽象或非抽象）：

```
namespace different {
  class SomeClass;
} 
```

# .net - 如何在 vb.net 中更改字符串名称列表

> ID：13201230
> 
> 赞同：0
> 
> 时间：2012-11-02T18:44:19.237
> 
> 标签：.net, vb.net, soap, vb.net-2010

我有一个`WebMethod`你传递一个 SQL 查询来执行并返回一个字符串列表

*   查询来自客户端，所以我不知道它是什么

这里是`webMethod`

```
<WebMethod()> _
Public Function ExecQuery() As List(Of String)

    Dim result As New List(Of String)
    Dim sqlConn As New sqlConn........
    Dim queryString As String = 'SELECT * FROM tbl_name'
    Dim command As New SqlCommand(queryString, sqlConn)
    sqlConn.Open()
    Dim reader As SqlDataReader = command.ExecuteReader()
    While reader.Read()
        For i As Integer = 0 To reader.FieldCount - 1
            result.Add(reader.Item(reader.GetName(i)))
        Next

    End While
    Return result

End Function 
```

*此代码返回一个字符串列表，如下所示*

![在此处输入图像描述](../Images/2ca8ce7a919933d0f0d848fc7395440d.png)

*我没有足够的经验这样做*

**问题**

组织这个的最佳方式是什么

*   我如何更改`<string>`为`<column_name>`并将它们包装起来`Unique Name`

    我曾经创建一个`Class`而不是`list (of string)`我使用类引用

我得到一个列表如下

```
 <className>
     <col1>val1<col1>
     <col2>val1<col1>
 </className>
 <className>
     <col1>val2<col1>
     <col2>val2<col1>
 </className> 
```

然后我使用这个类名在javascript中循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:03:48.103

如果这需要完全动态，那么（正如@Jeremy 建议的那样）返回您自己的 XML。有 webmethod 返回`String`，没有`List(Of ...)`。创建您自己的 XML 字符串：

```
Dim sb As New System.Text.StringBuilder
While reader.Read()
    sb.Append("<record>")
    For i As Integer = 0 To reader.FieldCount - 1
        sb.AppendFormat("<field name=""{0}"">", reader.GetName(i))
        sb.Append(reader(i).ToString())
        sb.Append("</field>")
    Next
    sb.Append("</record>")
End While

Return sb.ToString() 
```

使用 DOM 方法解析 Javascript 代码中的 XML。

# linux - 如何在 linux mint 中搜索多个命令输出

> ID：13201237
> 
> 赞同：1
> 
> 时间：2012-11-02T18:44:40.987
> 
> 标签：linux

我在单行中运行多个命令，需要搜索模式 ex：

```
cd udaya/;service status;service2 status 
```

在我想通过 grep 在同一行中搜索某些模式之后，仅针对这两个服务而不是

```
cd udaya/;service status | grep -i  'text';service2 status | grep -i 'text' 
```

为什么因为我想从这两个服务中搜索相同的模式。

所以，我只能看到这些服务的模式输出。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:15:46.527

使用子shell怎么样？

```
( service status & service2 status ) | grep -i 'text' 
```

或者，您可以使用[命名管道](https://www.google.com/search?q=linux%20named%20pipes)。

# iphone - 在使用情节提要时不确定如何正确继承 UIApplication

> ID：13201240
> 
> 赞同：3
> 
> 时间：2012-11-02T18:45:06.040
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想在 X 次用户不活动（没有触发触摸事件）之后返回我的故事板的初始视图控制器。经过一些研究，我发现检测不活动的最常见方法是触发 NSTimer 并在触发事件时重置间隔。为了检测触发的事件，我们在 UIApplication 的子类中重写 [UIApplication sentEvent:]。这是我有点卡住的部分。

我正在看这个项目作为参考

[http://www.icodeblog.com/2011/09/19/timing-out-an-application-due-to-inactivity/](http://www.icodeblog.com/2011/09/19/timing-out-an-application-due-to-inactivity/)

[https://github.com/elc/ELCUIApplication](https://github.com/elc/ELCUIApplication)

我不确定在使用情节提要时如何实现类似的功能。我尝试了类似于那个 github 项目的东西；我创建了一个新类，它是 UIApplication 的子类，覆盖了所需的方法，最后更改了主函数中的目标类（从我的 appdelegate 到子类化 UIApplication 的新类）。通过这样做，我得到了以下错误

*如果要使用主故事板文件，应用程序委托必须实现 window 属性。*

github中的appDelegate是NSObject的子类，根据我的理解手动加载了他的window属性中的初始视图，而我的appDelegate是UIResponder的子类，它本身就是UIApplication的超类。我不知道如何继续，我的 AppDelegate 中已经有了 window 属性并已合成，但我不确定如何处理它。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T19:09:36.593

听起来您将错误的参数更改为`UIApplicationMain`.

默认调用`UIApplicationMain`如下所示：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

第三个参数（`nil`默认）是`UIApplication`要使用的类的名称。如果为 nil，则应用程序仅使用`UIApplication`.

第四个参数是`UIApplicationDelegate`要使用的类的名称。

听起来您更改了第四个参数，但您应该更改了第三个参数：

```
return UIApplicationMain(argc, argv,
    NSStringFromClass([MyApplication class]),
    NSStringFromClass([AppDelegate class])); 
```

# javascript - 使用 JavaScript 滚动时响应地为页面元素设置动画 [编辑：视差滚动]

> ID：13201242
> 
> 赞同：7
> 
> 时间：2012-11-02T18:45:19.443
> 
> 标签：javascript, html, css, parallax

我敢肯定这在过去已经提出过；但是我不知所措。

在 Square 的这个[网页上](https://squareup.com/careers/creative)，用户滚动浏览标题为“在 Square，不同学科合作设计精美简单的解决方案”的部分。动画在页面上的特定点右侧激活。当用户向后滚动时，图像会恢复等等。他们是如何实现这一目标的？

**2013 年 8 月：**自从我提出这个问题以来已经过去了 9 个月，而视差滚动几乎可以正常运行了。我附上了几个链接，以便进一步阅读这个主题，从如何实现它到为什么要避免它。

**视差滚动示例：**

* * *

*   [http://en.wikipedia.org/wiki/Parallax_scrolling](http://en.wikipedia.org/wiki/Parallax_scrolling)
*   [http://www.awwwards.com/20-best-websites-with-parallax-scrolling-of-2013.html](http://www.awwwards.com/20-best-websites-with-parallax-scrolling-of-2013.html)
*   [http://www.cloudberrycreative.com/blog/6-sites-that-get-parallax-scrolling-right/](http://www.cloudberrycreative.com/blog/6-sites-that-get-parallax-scrolling-right/)

**教程：**

* * *

*   [http://tympanus.net/codrops/2012/04/30/fluid-css3-slideshow-with-parallax-effect/](http://tympanus.net/codrops/2012/04/30/fluid-css3-slideshow-with-parallax-effect/)
*   [http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/](http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/)
*   [http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/](http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/)
*   [http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)

**想法：**

* * *

*   [http://curveagency.com/blog/parallax-scrolling-good-bad-and-questionable](http://curveagency.com/blog/parallax-scrolling-good-bad-and-questionable)
*   [http://teamhardison.com/wordpress-for-real-estate/parallax-scrolling-really-do-have/](http://teamhardison.com/wordpress-for-real-estate/parallax-scrolling-really-do-have/)
*   [http://www.monolithdoes.com/parallax-scrolling-why-or-why-not/](http://www.monolithdoes.com/parallax-scrolling-why-or-why-not/)
*   [http://www.quora.com/search?q=parallax+scrolling](http://www.quora.com/search?q=parallax+scrolling)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T18:52:17.360

它被称为[视差滚动](http://en.wikipedia.org/wiki/Parallax_scrolling)。

他们只是检测窗口位置，然后在窗口滚动到他们设置的任何点时应用 jquery 动画。

在此处查看深入的解释和教程：http: [//coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/](http://coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/)

这里有一个示例和开源 GitHub 项目：http: [//prinzhorn.github.com/skrollr/](http://prinzhorn.github.com/skrollr/)

在我看来，这通常是糟糕的设计。我想它可能很微妙并且做得很好，但它经常会分散注意力而没有真正的目的。

# ruby-on-rails - 类更改时未在开发环境中调用初始化程序

> ID：13201243
> 
> 赞同：1
> 
> 时间：2012-11-02T18:45:27.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, development-environment

我的 Rails 3.2 应用程序中有一个初始化程序，它在启动时包含基于配置文件的模块。它看起来像这样：

```
Array(Settings.site.authentications).map(&:to_sym).each do |sym|
  AuthAuth.class_eval do
    include Object.const_get(sym)
  end
end

Array(Settings.site.authorizations).map(&:to_sym).each do |sym|
  AuthAuth.class_eval do
    include Object.const_get(sym)
  end
end

# This exception is never raised when I start the server.  So the includes 
# appear to be working correctly.
raise "method not found!" unless AuthAuth.new.respond_to? :dynamically_included_method 
```

`AuthAuth`在 my `ApplicationController`in a 中使用`:before_filter`以确保用户经过身份验证和授权。它工作得很好，并且满足了我有一种可配置的方式来设置每个站点的授权和身份验证逻辑的要求。

但是，我注意到，当我在开发模式下运行服务器时，如果我对应用程序中的任何类进行代码更改，`AuthAuth`则会在没有包含模块的情况下恢复为默认行为。

除了初始化文件之外，是否有合适的地方包含此代码？

这是一个相对较小的问题。每次代码更改后重新启动开发服务器很容易，但我很好奇。

# c# - 如何在 ASP.NET MVC 4 中获取控制器操作的自定义注释属性？

> ID：13201250
> 
> 赞同：10
> 
> 时间：2012-11-02T18:45:57.633
> 
> 标签：c#, asp.net-mvc, razor

我正在为我的应用程序在 ASP.NET MVC 中使用基于权限的授权系统。为此，我创建了一个自定义授权属性

```
public class MyAuthorizationAttribute : AuthorizeAttribute
{
    string Roles {get; set;}
    string Permission {get; set;}
} 
```

这样我就可以通过角色或带有注释的特定权限密钥来授权用户，以执行诸如

```
public class UserController : Controller
{
    [MyAuthorization(Roles="ADMIN", Permissions="USER_ADD")]
    public ActionResult Add()

    [MyAuthorization(Roles="ADMIN", Permissions="USER_EDIT")]
    public ActionResult Edit()

    [MyAuthorization(Roles="ADMIN", Permissions="USER_DELETE")]
    public ActionResult Delete()
} 
```

然后我用类似的逻辑（伪代码）覆盖 MyAuthorizationAttribute 类中的 AuthorizeCore() 方法

```
protected override bool AuthorizeCore(HttpContextBase httpContext)
{
    if(user not authenticated)
        return false;

    if(user has any role of Roles)
        return true;

    if(user has any permission of Permissions)
        return true;

    return false;
} 
```

到目前为止工作正常。

现在我需要某种扩展方法，以便我可以在视图页面中动态生成操作 url，该操作 url 将基于给定操作的 MyAuthorization 属性授权逻辑返回操作 url。像

```
@Url.MyAuthorizedAction("Add", "User") 
```

如果用户具有管理员角色或具有“USER_ADD”权限（在操作的属性中定义），则将 url 返回到“用户/添加”，否则返回空字符串。

但是在网上搜索了几天后，我无法弄清楚。:(

到目前为止，我只找到了这个[“安全意识”操作链接？](https://stackoverflow.com/questions/2721869/security-aware-action-link/2722026)它通过执行操作的所有操作过滤器来工作，直到它失败。

这很好，但我认为每次调用 MyAuthorizedAction() 方法时执行所有操作过滤器都会产生开销。此外它也不适用于我的版本（MVC 4 和 .NET 4.5）

我所需要的只是检查经过身份验证的用户的角色、权限（将存储在会话中）与授权角色和给定操作的权限。如下所示（伪代码）

```
MyAuthorizedAction(string actionName, string controllerName)
{
    ActionObject action = SomeUnknownClass.getAction(actionName, controllerName)
    MyAuthorizationAttribute attr = action.returnsAnnationAttributes()

    if(user roles contains any in attr.Roles 
       or 
       user permissions contains any attr.Permissions)
    {
        return url to action
    }
    return empty string
} 
```

我一直在寻找获取动作属性值的解决方案，根本找不到足够好的资源。我错过了正确的关键字吗？：/

如果有人可以为我提供真正有很大帮助的解决方案。提前感谢您的解决方案

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-02T20:57:49.007

虽然我同意根据权限生成 url 可能不是最佳实践，但如果您想继续，您可以使用以下方法找到操作及其属性：

**检索“操作”方法：** 这会检索方法信息的集合，因为可能有多个具有相同名称的控制器类和多个具有相同名称的方法，特别是在使用区域时。如果你不得不担心这个，我会把歧义留给你。

```
public static IEnumerable<MethodInfo> GetActions(string controller, string action)
{
    return Assembly.GetExecutingAssembly().GetTypes()
           .Where(t =>(t.Name == controller && typeof(Controller).IsAssignableFrom(t)))
           .SelectMany(
                type =>
                type.GetMethods(BindingFlags.Public | BindingFlags.Instance)
                    .Where(a => a.Name == action && a.ReturnType == typeof(ActionResult))
             );

} 
```

**从 MyAuthorizationAttributes 检索权限：**

```
public static MyAuthorizations GetMyAuthorizations(IEnumerable<MethodInfo> actions)
{
    var myAuthorization = new MyAuthorizations();
    foreach (var methodInfo in actions)
    {
        var authorizationAttributes =  methodInfo
                .GetCustomAttributes(typeof (MyAuthorizationAttribute), false)
                .Cast<MyAuthorizationAttribute>();
        foreach (var myAuthorizationAttribute in authorizationAttributes)
        {
            myAuthorization.Roles.Add(MyAuthorizationAttribute.Role);
            myAuthorization.Permissions.Add(MyAuthorizationAttribute.Permission);
        }
    }
    return myAuthorization;
}
public class MyAuthorizations
{
    public MyAuthorizations()
    {
        Roles = new List<string>();
        Permissions = new List<string>();
    }
    public List<string> Roles { get; set; }
    public List<string> Permissions { get; set; }
} 
```

**最后是 AuthorizedAction 扩展：** 警告：如果您对给定的控制器/动作对确实有多个匹配项，如果用户被授权使用其中任何一个，这将给出“授权”网址......

```
public static string AuthorizedAction(this UrlHelper url, string controller, string action)
{
    var actions = GetActions(controller, action);
    var authorized = GetMyAuthorizations(actions);
    if(user.Roles.Any(userrole => authorized.Roles.Any(role => role == userrole)) ||
       user.Permissions.Any(userPermission => authorized.Permissions.Any(permission => permission == userPermission)))
    {
        return url.Action(controller,action)
    }
    return string.empty;
} 
```

**关于基于权限生成 URL 的注意事项：**
我声明这*可能*不是最佳实践，因为有很多小事。根据您的情况，每个可能都有自己的相关性级别。

*   给人的印象是试图通过默默无闻来实现安全。*如果我不向他们显示 url，他们就不会知道它在那里。*
*   如果您已经在以其他方式检查权限以控制页面的呈现（看起来您正在根据您在其他地方的评论进行操作），那么明确不写出 url 是没有意义的。*最好不要调用 Url.Action 方法。*
*   如果您尚未根据用户的权限控制页面的呈现，那么简单地为 url 返回空字符串会在您的页面上留下大量损坏或看似损坏的内容。*嘿，当我按下这个按钮时，它什么也没做！*
*   它可以使测试和调试变得更加复杂：*是因为权限不对，url 没有显示，还是有另一个错误？*
*   AuthorizedAction 方法的行为似乎不一致。有时返回一个 url，有时返回一个空字符串。

**通过动作授权属性控制页面渲染：** 将方法修改`AuthorizedAction`为 a `boolean`，然后使用其结果来控制页面渲染。

```
public static bool AuthorizedAction(this HtmlHelper helper, string controller, string action)
{
    var actions = GetActions(controller, action);
    var authorized = GetMyAuthorizations(actions);
    return user.Roles.Any(userrole => authorized.Roles.Any(role => role == userrole)) ||
       user.Permissions.Any(userPermission => authorized.Permissions.Any(permission => permission == userPermission))
} 
```

然后在您的剃须刀页面中使用它。

```
@if(Html.AuthorizedAction("User","Add")){
   <div id='add-user-section'>
        If you see this, you have permission to add a user.
        <form id='add-user-form' submit='@Url.Action("User","Add")'>
             etc
        </form>
   </div>
}
else {
  <some other content/>

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:50:30.463

我认为每次要使用 Url.Action() 创建 url 时都不应该检查操作注释。如果该操作使用自定义授权过滤器进行保护，它将不会为非特权用户执行，那么隐藏该操作的 URL 有什么意义呢？相反，您可以在 HtmlHelper 上实现扩展方法来检查当前用户是否具有给定的权限，例如：

```
public static bool HasPermission(this HtmlHelper helper, params Permission[] perms)
{
    if (current user session has any permission from perms collection)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

然后，您可以使用视图中的帮助程序来隐藏当前用户无法访问的按钮和链接，例如：

```
@if (Html.HasPermission(Permission.CreateItem))
{
    <a href="@Url.Action("Items", "Create")">Create item</a>
} 
```

当然，隐藏特定链接仅用于 UI 目的 - 访问的真正控制是由自定义授权属性完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:11:38.883

我唯一的建议是写一个扩展方法，`IPrincipal`而不是看起来像

```
public static bool HasRolesAndPermissions(this IPrincipal instance,
    string roles,
    string permissions,)
{
  if(user not authenticated)
    return false;

  if(user has any role of Roles)
    return true;

  if(user has any permission of Permissions)
    return true;

return false;
} 
```

然后视图/部分中的代码在实际执行的操作方面更具可读性（不使用 html 执行任何操作，而是验证用户），然后视图/部分中的代码看起来像

```
@if (User.HasRolesAndPermissions(roles, permissions)) 
{ 
   @Html.ActionLink(..);
} 
```

每个 MVC 页面都有当前用户的属性[WebViewPage.User](http://msdn.microsoft.com/en-us/library/system.web.webpages.webpagerenderingbase.user%28v=vs.98%29.aspx)。

您有针对性的解决方案（以及指向安全意识链接的链接）的问题在于，链接的创建和控制器上的授权可能不同（在我看来，以这种方式混合职责是不好的做法）。通过扩展`IPrincipal`新的授权将如下所示：

```
protected override bool AuthorizeCore(HttpContextBase httpContext)
{
  return user.HasRolesAndPermissions(roles, permissions)
} 
```

现在您的授权属性和视图都使用相同的角色/权限数据逻辑。

# c# - 接口作为方法参数类型有效，但不是接口列表

> ID：13201259
> 
> 赞同：5
> 
> 时间：2012-11-02T18:46:37.303
> 
> 标签：c#, interface

我有一个接口和 2 个继承该接口的类，如下所示

```
public interface ILeader
{
    int ID { set; get; }
    string Name { set; get; }
}
public class User : ILeader
{
    public int ID { set; get; }
    public string Name { set; get; }
}
public class Group : ILeader
{
    public int ID { set; get; }
    public string Name { set; get; }
} 
```

现在我有 2 个方法，它有一个类型的参数`ILeader`和 ILeader 的 IList

```
public void Change(ILeader leader)
{
  //do some thing           
}
public void ChangeList(IList<ILeader> leaderList)
{
  //do some thing           
} 
```

现在我可以将一个对象传递`Group`给`User`Change 方法并且它可以工作。但是当我尝试用`List`to`ChangeList`方法做同样的事情时，它给了我编译时错误。

```
IList<User> userList=new List<User>();
userList.Add(new User { ID=1, Name ="Happy"});

Change(userList[0]);  //this works

ChangeList(userList);  //this throws compile error 
```

错误是

```
cannot convert from List<User> to List<ILeader> 
```

如何使我的`ChangeList`方法起作用，以便我可以同时传递 和 的`Users`列表`Groups`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T18:50:33.167

如果您使用的是 .Net 4.0 或更高版本，您可以将您的 IList(T) 更改为 IEnumerable(T) 并且它会起作用。IList(T) 接口的 T 参数不是协变的，而 IEnumerable(T) 接口的 T 参数是协变的。看

[http://msdn.microsoft.com/en-us/library/dd469487.aspx](http://msdn.microsoft.com/en-us/library/dd469487.aspx)

进一步解释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T18:51:12.420

因为`IList<T>`不是协变的，这意味着没有什么可以停止`ChangeList`将 a 添加`Group`到 的列表中`Users`，这显然是无效的。

要传递这两种类型的列表，请将列表转换为 a `List<ILeader>`：

```
ChangeList(userList.Cast<ILeader>().ToList()); 
```

但是请注意，这实际上并没有*强制转换*列表，它会创建一个*新*列表，其中每个成员都是`ILeader`. 这意味着 ChangeList 可以将 a 添加`Group`到列表中，这意味着您无法将其转换回`List<User>`.

如果`ChangeList`没有将任何成员添加到列表中，您可以将其转换回来：

```
var leaderList = userList.Cast<ILeader>().ToList();
ChangeList(leaderList);  
userList = leaderList.Cast<User>().ToList(); 
```

如果`ChangeList` *添加*s以外的任何项目，`User`则转换将失败。您最好的选择是从结果中*只*取`User`s：

```
var leaderList = userList.Cast<ILeader>().ToList();
ChangeList(leaderList);  
userList = leaderList.OfType<User>().ToList();  // will ignore anything that's not a `User` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T18:50:54.040

您实际上应该在第二种方法上依赖泛型类型约束：

```
public void ChangeList<T>(IList<T> leaderList) where T : ILeader
{
  //do some thing           
} 
```

现在您可以通过这两个列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T18:50:57.037

在 C# 中，类不是协变的，这是您在此处尝试使用的功能。有关更多信息， 请参阅[此常见问题解答。](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)

> 要记住的几个重要规则：
> 
> 此功能仅适用于通用接口和委托。如果你实现一个变体泛型接口，实现类仍然是不变的。C# 4.0 中的类和结构不支持变体。因此以下内容无法编译：
> 
> ```
> // List<T> implements the covariant interface
> // IEnumerable<out T>. But classes are invariant.
> List<Person> list = new List<Employee>(); // Compiler error here. 
> ```

为了完成这项工作，您需要将您的文件`User`转换为`ILeader`. 你会用`userList.Cast<ILeader>()`.

# java - java中真正的长类型范围是什么？

> ID：13201261
> 
> 赞同：1
> 
> 时间：2012-11-02T18:46:44.807
> 
> 标签：java, types, primitive-types

根据我找到的所有参考资料，Java 中的 long 类型范围从 -9,223,372,036,854,775,808 到 +9,223,372,036,854,775,807。我在下面写了以下代码，

```
public static void main(String[] args){
    long x = 12 * 24 * 60 * 1000 * 1000; 
    long y = 12 * 60 * 1000 * 1000;
    System.out.print(x / y); 
} 
```

预期结果为 24；但是输出为0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:47:44.170

在您的代码中， `12 * 24 * 60 * 1000 * 1000`被评估为整数。然后你将它分配给long。

尝试

```
long x = 12L * 24 * 60 * 1000 * 1000; 
    long y = 12L * 60 * 1000 * 1000;
    System.out.print(x / y); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T18:50:15.547

你的文字是int的......

这给出了 x = 100130816 而不是 17280000000

干得好：

```
public static void main(String[] args) {
        long x = 12L * 24L * 60L * 1000L * 1000L;
        long y = 12L * 60L * 1000L * 1000L;
        System.out.print(x + " " + y + " " + x / y);

} 
```

结果是 24

PS我第一次解决了这个问题，但是您删除了问题...

# oracle - 使用Puppet测试Oracle数据库的连接

> ID：13201265
> 
> 赞同：0
> 
> 时间：2012-11-02T18:46:57.960
> 
> 标签：oracle, configuration, puppet

我的应用程序需要 Oracle 数据库作为先决条件。所以在安装我的应用程序之前，我准备了一个属性文件，如下所示：

```
DB_CONNECTION_STRING=oracle_server:1526:SID
USER_NAME=xxxx
USER_PSWD=xxxx 
```

我想配置 Puppet 在部署之前检查 Oracle 数据库的可用性。有人知道如何用 Puppet 做到这一点吗？

有木偶专家来帮忙吗？rephase，这是如何使用 Puppet 读取属性文件并使用属性尝试连接远程 Oracle 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:07:58.043

这似乎可能会有所帮助：

[https://github.com/stschulte/puppet-oracle](https://github.com/stschulte/puppet-oracle)

# jquery - json 数组仅填充第一个值

> ID：13201267
> 
> 赞同：0
> 
> 时间：2012-11-02T18:47:00.797
> 
> 标签：jquery, asp.net, json

嗨，我对存储一些 json 数据的本地文件有疑问

```
{
  "tournament": [{
    "TeamName": "AS Roma",
    "TeamPlayer": "Rickard"
  } {
    "TeamName": "Inter",
    "TeamPlayer": "Bobban"
  }]
}​ 
```

然后在buttonclick上我尝试用这个数据填充一个数组。但它只需要“AS Roma”和“Rickard”而不是“As Roma”“Rickard”和“Inter”“Bobban”。

```
// Get teams
var url = "http://localhost:57608/json/teams.txt";
$("#btnGetTeams").on('click', function() {
    var allItems = [];
    $.getJSON(url, function(data) {
        $.each(data, function(i, team) {
            allItems.push({
                theTeam: team.tournament.TeamName,
                thePlayer: team.tournament.TeamPlayer
            });
        });
        $.each(allItems, function(i, val) {
            $('#teams').append('<p>' + val.theTeam + val.thePlayer + '</p>');
        });
    });
});​ 
```

因此，它不会输出 AS Roma Rickard Inter Bobban，而是只写 AS Roma Rickard。我究竟做错了什么？

**感谢 Sushanth 更新完整的工作代码**

```
// Get teams
var url = "http://localhost:57608/json/teams.txt";
$("#btnGetTeams").on('click', function () {
                var allItems = [];
                $.getJSON(url,
                         function (data) {                               
                                 $.each(data.tournament, function (i) {
                                     allItems.push({
                                         theTeam: data["tournament"][i]["TeamName"],
                                         thePlayer: data["tournament"][i]["TeamPlayer"],
                                     });
                                 });
                             $.each(allItems, function (i, val) {
                                 $('#teams').append('<p>' + val.theTeam + val.thePlayer + '</p>');
                             });                                 
                         });
            }); 
```

与 Json

```
{
"tournament": [
        {
            "TeamName": "AS Roma",
            "TeamPlayer": "Rickard" 
        },
        { 
            "TeamName": "Inter",
            "TeamPlayer": "Bobban" 
        }
            ] 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:48:42.093

JSON 中缺少**逗号**

```
},  <-- Missing comma between two objects
 { 
```

此外，您以错误的方式访问 json .. 您的 json 是一个**对象数组**

```
$.each(data.tournament, function (i, team) {
       allItems.push({
                        theTeam : team.TeamName,
                        thePlayer: team.TeamPlayer
    });
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/77muQ/)**

![在此处输入图像描述](../Images/aa872075f425ddbdd3001613ff4526af.png)

用括号表示法试试这种方式..

```
$.each(data.tournament, function(i) {
    allItems.push({
        theTeam: data["tournament"][i]["TeamName"],
        thePlayer: data["tournament"][i]["TeamPlayer"],
    });
}); 
```

**[小提琴括号符号](http://jsfiddle.net/sushanth009/77muQ/1/)**

如果这不起作用，请使用 for 循环

```
var allItems = [];
var data = data.tournament;
var i = 0;
for(key in data){
     allItems.push({
        theTeam: data[i].TeamName,
        thePlayer: data[i].TeamPlayer,
    });

} 
```

**[对于小提琴](http://jsfiddle.net/sushanth009/77muQ/2/)**

# c# - TreeView 与 WPF 的绑定

> ID：13201268
> 
> 赞同：0
> 
> 时间：2012-11-02T18:47:05.133
> 
> 标签：c#, wpf, data-binding

我正在尝试创建具有特定结构的 TreeView。我知道如何创建 TreeView 并使用 HierarchicalDataTemplate 绑定数据，但是我正在努力解决如何正确设计我的模板。

我想向用户显示的信息如下所示： ClassA ---ClassB ---ClassB ---ClassB ClassA ---ClassB ---ClassB ClassA ---ClassB

换句话说 - 我将拥有一个 ClassA 的集合，我将其视为：

```
public ObservableCollection<ClassA> ClassAItems 
```

我希望 ClassA 持有 ClassB 的集合，因此：

```
public ObserverableCollection<ClassB> ClassBItems 
```

有关如何进行此设置的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:02:40.850

我已经通过使用继承解决了我自己的问题。我创建了一个 ClassA 和 ClassB 都继承的基类，其中包含 Models/Header/Tooptip 属性。

# node.js - 在集群中运行流星并实时更改

> ID：13201269
> 
> 赞同：12
> 
> 时间：2012-11-02T18:47:08.193
> 
> 标签：node.js, mongodb, meteor

我计划将 Meteor 部署到我的 Amazon AWS EC2 服务器，但我还想同时运行多个服务器实例来服务更多客户。在 Meteor 中是否有适当的方法来执行此操作，而不会破坏客户更新其收藏品更新的能力？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-05T04:00:43.990

运行多个 Meteor 服务器进程时需要考虑两个主要问题。

1.  **客户端会话亲和性。** 客户端使用 SockJS 库连接回 Meteor 服务器，通常使用长轮询策略，每隔一段时间重新连接到服务器。服务器进程保存与每个客户端相关的状态。所以重要的是给定客户端的连接不要在服务器之间反弹，否则服务器会认为它正在与新客户端通信并重新发送所有订阅状态。

2.  **协调数据库失效。** 每当客户端发出数据库写入时，服务器进程都会运行重新计算并将更新推送到任何其他受影响的客户端。但是连接到不同服务器的客户端在该服务器进程运行 10 秒 Mongo 轮询循环之前不会看到更改。对于某些应用程序，可以让大多数客户端滞后 10 秒。如果您的应用程序需要更实时的东西，那么您必须在 Meteor 服务器进程之间实现自己的进程间通信。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-14T01:10:59.490

伙计们，这是你应该看的

流星集群 - [https://github.com/arunoda/meteor-cluster](https://github.com/arunoda/meteor-cluster)

我也在这里写了一篇博客：http: [//goo.gl/2aHJ2](http://goo.gl/2aHJ2)

# ruby-on-rails - 用于电子邮件联系表的 ruby on rails 应用程序中的错误

> ID：13201270
> 
> 赞同：0
> 
> 时间：2012-11-02T18:47:09.427
> 
> 标签：ruby-on-rails, heroku

我为我的 ruby​​ on rails 应用程序遵循了这个[电子邮件表单](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)教程，该应用程序托管在 heroku 上。每次我打开 localhost:3000/contact 时，我都会收到以下错误：

没有路线匹配 {:action=>"home", :controller=>"contact"}

这是我的 routes.rb 文件中的内容：

```
Inspired::Application.routes.draw do
  get "pages/home"
  get "pages/about_us"
  get "pages/web_design"
  get "pages/portfolio"
  get "pages/contact"

  match 'contact' => 'contact#new',    :as => 'contact', :via => :get
  match 'contact' => 'contact#create', :as => 'contact', :via => :post

  root :to => 'pages#home'
end 
```

我不确定我要去哪里错了。为什么动作应该回到新的或创建的地方？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:53:47.023

看起来您不小心将两条路线命名为contact_path（:as 命名路线），并且覆盖了 :get 一条。如果您更改第二个 URL 的名称，它应该可以工作：

```
match 'contact' => 'contact#new',    :as => 'contact', :via => :get
match 'contact' => 'contact#create', :as => 'make_contact', :via => :post 
```

或者可能将其更改为 RESTful 资源？

```
resources :contact_messages 
```

# javascript - 清除飞溅动画javascript返回未定义

> ID：13201273
> 
> 赞同：1
> 
> 时间：2012-11-02T18:47:27.567
> 
> 标签：javascript, animation, opacity, splash-screen

我的清晰动画有效，我的显示动画有效，但是当我尝试做一个然后另一个时，它似乎使所有编程都无效。我敢肯定有一个简单的论点，我只是没有看到。

```
var opac = null;

var removeGif = document.getElementById('splash');
function dissappear (elem, speed) {
    if (opac) clearTimeout(opac);
    if ( !elem.style.opacity ) {
        elem.style.opacity = 1;
    }
    setTimeout(function() {
        setInterval(function() {
        elem.style.opacity -= 1;
        }, speed / 50);
    },10);
}
dissappear(removeGif, 250000);

var folio = document.getElementById('content');
function appear (elem, speed) {
    if (opac) clearTimeout(opac);
    if ( !elem.style.opacity ) {
        elem.style.opacity = 0;
    }
    setTimeout(function() {
        setInterval(function() {
        elem.style.opacity += 1;
        }, speed / 50);
    },10);
}
appear(removeGif, 250000); 
```

如果有人能看到问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:58:18.567

我看到一些可能有问题的事情：

1.  你永远不会分配`setTimeout`to的结果`opac`，所以`opac`永远都是`null`。

    ```
    opac = setTimeout(function() {
               ...
           }); 
    ```

2.  在`appear()`中，这段代码对我来说没有意义：

    ```
    if ( !elem.style.opacity ) {
        elem.style.opacity = 0;
    } 
    ```

    可以`elem.style.opacity`为空吗？如果是这样，那没关系。`!elem.style.opacity`如果不透明度为 ，也将是正确的`0`，因此无需将其重置为 0。

    您不想检查元素是否已经可见，然后退出该功能而不是先使其不可见吗？

3.  正如[Ian](https://stackoverflow.com/users/1317927/ian)所说，不透明度值的范围从 0 到 1 作为十进制值，而不是百分比值。考虑将增量和减量更改为 0.1 之类的值。

4.  您的`setInterval()`函数将永远不会停止运行。你从来没有任何对应`clearInterval()`的 . 您也不会检查不透明度是 0 还是 1 以知道何时调用`clearInterval()`。

一个简单的淡入/淡出实现不需要`setTimeout`. 一个工作示例[看起来更像这样](https://stackoverflow.com/a/4909750/74757)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:53:18.520

感谢您的意见帮助我使我的代码不那么迂回。这是我最终得到的代码。

```
window.setTimeout(function toggle () {
    var spl = document.getElementById('splash');
    var cnt = document.getElementById('content');
        spl.style.display = "none";
        cnt.style.display = "block";
}, 25000); 
```

现在一切似乎都那么简单！

# android - Android：自上而下动画隐藏 onCreate

> ID：13201275
> 
> 赞同：1
> 
> 时间：2012-11-02T18:47:47.580
> 
> 标签：android

在我的应用程序中，当单击按钮时，我有一个从顶部移入的菜单。该菜单嵌套在 LinearLayout

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/root"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background"
android:orientation="vertical">

    <!-- Top Menu -->

    <LinearLayout
        android:id="@+id/top_menu"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="visible"
        android:orientation="vertical">

        <The 3 Menu Buttons as ImageButton>
    </LinearLayout>

    <!-- End of Top Menu -->

    ...[Rest of Layout / the always visible content
</LinearLayout> 
```

现在我希望在创建 Activity 时隐藏菜单，如下所示：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_someactivity);        

    animHelp = new AnimationHelper(getWindow().getDecorView().getRootView());        
    // Not really working temporary fix for the Animation 'moveup thingy' that happens the first time (view.gone/view.visible issue)
    animHelp.doSlideUp(0); // int param = animation.setDuration(0); 
```

**问题**：当活动开始时，您会看到动画发生/内容部分向上移动

**问题**：我怎样才能以看不到动画发生的方式隐藏 top_menu？

**尝试**： - 使用 Visibility:Gone 作为启动参数也不能解决问题。

为了完整起见，这里是 AnimationHelper.class

```
public class AnimationHelper {

    private boolean isDown = false;

    private LinearLayout ll;
    private LinearLayout menu;

    public AnimationHelper(View v) {
        ll = (LinearLayout)v.findViewById(R.id.root);
        menu  = (LinearLayout) v.findViewById(R.id.top_menu);
    }

    public void doSlideDown(int time) {
        menu.setVisibility(View.VISIBLE);

        Animation slideDown = setLayoutAnim_slidedown(time);
        ll.startAnimation(slideDown);
    }

    public void doSlideUp(int time) {

         Animation slideUp = setLayoutAnim_slideup(time);
         ll.startAnimation(slideUp);
    }

    private Animation setLayoutAnim_slidedown(int time) {

         Animation animation = new TranslateAnimation(
                 Animation.ABSOLUTE, 0,
                 Animation.ABSOLUTE, 0,
                 Animation.ABSOLUTE, -menu.getHeight(),
                 Animation.ABSOLUTE, 0);

            animation.setDuration(time);
            animation.setAnimationListener(new AnimationListener() {

                public void onAnimationStart(Animation animation) {}

                public void onAnimationEnd(Animation animation) {
                    isDown = true;              
                }

                public void onAnimationRepeat(Animation animation) {}

            });

         return animation;

    }

    private Animation setLayoutAnim_slideup(int time) {

        Animation animation = new TranslateAnimation(
                Animation.ABSOLUTE, 0,
                Animation.ABSOLUTE, 0,
                Animation.ABSOLUTE, 0,
                Animation.ABSOLUTE, -menu.getHeight());

        animation.setDuration(time);
        animation.setAnimationListener(new AnimationListener() {        

            public void onAnimationStart(Animation animation) {}

            public void onAnimationEnd(Animation animation) {
                ll.clearAnimation();
                menu.setVisibility(View.GONE);
                isDown = false;

            }

            public void onAnimationRepeat(Animation animation) {}

         });

         return animation;
    }

    public boolean isDown() {
        return isDown;
    }

} 
```

非常感谢您的宝贵时间！

# ruby-on-rails - 如何使用 select_tag 和 options_from_collection_for_select 获取选择的值并将其传递给控制器

> ID：13201284
> 
> 赞同：4
> 
> 时间：2012-11-02T18:48:28.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sunspot, sunspot-rails

我已经建立了一个这样的表单搜索：

```
<%= form_tag({ controller: 'questions', action: 'search_topic' }, method: 'get') do %>
  <%= select_tag 'search_topic', options_from_collection_for_select(current_user.get_topics, :id, :name) %>
  <%= submit_tag "Search", name: nil, class: 'btn' %>
<% end %> 
```

我想搜索从选择框中选择的主题的所有问题，我使用 sunspot 来帮助搜索，所以现在我如何将值选择从选择框传递到控制器进行搜索，我使用下面的代码来传递参数 [:search] ：

```
<%= select_tag 'search_topic', options_from_collection_for_select(current_user.get_topics, :id, :name), params[:search] %> 
```

但它有错误：

```
undefined method `[]' for nil:NilClass 
```

这是我的控制器：

```
def search_topic
  @search = Question.search do
    with(:topic_id, params[:search])
    paginate page: 1, per_page: 10
  end

  @questions = @search.results
  render 'index'
end 
```

那么，我如何将从表单上的选择框中选择的值传递给控制器​​进行搜索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:59:25.037

```
<%= select_tag 'search_topic', 
  options_from_collection_for_select(current_user.get_topics, :id, :name) %> 
```

这假定显示的视图代码在表单内。如果该表单发布，它最终会在创建操作中说：

```
params[:search_topic] 
```

包含您选择的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T18:56:25.100

嘿，不需要传递参数 [:search]。
当单击提交按钮时，Rails 会自动生成选择参数。

如果要将参数名称设置为“搜索”，则将选择“搜索主题”的名称更改为“搜索”。

如果要检查参数的值，它将如何在参数中接收，请尝试调试器并检查此表单生成的参数的值。

另外，还有一个快捷方式，在按下提交后尝试在要调用的动作中放入错误，并在浏览器页面上读取参数。您也可以在下一页上快速打印

# c# - 如何从 xaml 中该行中的模板单元格绑定到 DataGridRow 项？

> ID：13201286
> 
> 赞同：4
> 
> 时间：2012-11-02T18:48:34.167
> 
> 标签：c#, wpf, xaml

什么绑定用于将 DataGridTemplateColumn 的单元格模板中定义的元素绑定到该单元格的 DataGridRow 的绑定数据项？

例如，假设 DataGrid 项是具有 Name 属性的对象。下面的代码中需要什么绑定才能将 TextBlock 文本绑定到父行表示的数据项的“名称”属性？

（是的，在示例中我可以只使用 DataGridTextColumn，但我只是为了简化示例。）

```
<DataGrid ItemsSource="{Binding Items}">
  <DataGrid.Columns>
    <DataGridTemplateColumn Header="Name">
      <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
          <TextBlock Text="{Binding ???}"/>
        </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
  </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:20:29.447

您不需要任何特殊类型的绑定 - TextBlock 从行（设置为绑定项）继承数据上下文。

所以你可以这样做：

```
<TextBlock Text="{Binding Name}" /> 
```

要查看数据上下文实际上是由 TextBlock 继承的，您可以在控件层次结构中设置更接近 TextBlock 的不同数据上下文。TextBlock 现在将使用该数据上下文。

在此示例中，StackPanel 的名称将显示在 TextBlock 中，而不是 DataGrid 上绑定行对象上的名称：

```
<DataTemplate>
    <StackPanel x:Name="panel1" DataContext="{Binding RelativeSource={RelativeSource Self}}">

        <!-- Binds to Name on the Stackpanel -->
        <TextBlock Text="{Binding Name}" />

        <!-- Binds to Name on object bound to DataGridRow -->
        <TextBlock Text="{Binding DataContext.Name, 
                         RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGridRow}}" />

    </StackPanel>
</DataTemplate> 
```

# java - GWT：何时使用 AsyncProxy 而不是 AsyncProvider ?

> ID：13201291
> 
> 赞同：2
> 
> 时间：2012-11-02T18:48:47.283
> 
> 标签：java, gwt

我正试图围绕 GWT[`AsyncProvider<T,F>`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/core/client/AsyncProvider.html)和[`AsyncProxy<T>`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/AsyncProxy.html)课程。**我了解Async Provider 模式**背后的概念：它允许您构建代码，以便将专有片段（模块）与`AsyncProvider`实现相关联。然后，只要您想使用该模块，您就可以针对该`AsyncProvider`impl 提供的 API 进行编码。够简单...

但是这`AsyncProxy`让我失望了。根据JavaDocs：

> AsyncProxy 类型用于在打算与 runAsync 一起使用的类之间提供可达性屏障，同时维护一个简单的延迟同步 API。在 AsyncProxy 上第一次调用实例方法将通过 runAsync 触发具体对象的实例化。

但这不是`AsyncProvider`应该做的吗？！？如果有人能给我一个具体的例子，说明我什么时候会使用`AsyncProxy`而不是`AsyncProvider`我认为事情会合二为一，我就能理解它的其余 JavaDocs。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T23:20:50.547

`AsyncProxy`只是使用[代码拆分](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)的另一种方式，例如它基本上是语法糖，可以用来代替`GWT.runAsync`

假设您有一些类能够显示一些带有分析的复杂弹出窗口。

```
public class InformationResolver {

    public void showAnalytics(String targetId){
        //lots of complicated logic here
    }         

} 
```

我们知道这个类提供的功能并不是用户想要使用的第一件事。所以它是代码拆分的完美候选者。而且它只有 void 方法，用 . 实现它真的很容易`AsyncProxy`。

首先，我们提取接口：

```
 interface InformationResolverIfc{ void showAnalytics(String targetId);} 
```

原始类将实现此接口。比我们创建一个代理接口：

```
@ConcreteType(InformationResolver.class)
 interface ResolverProxy extends AsyncProxy<InformationResolverIfc>, InformationResolverIfc {} 
```

现在，当我们在某个时间点想要调用`showAnalytics`方法时，我们执行以下操作：

```
InfomationResolverIfc resolver=GWT.create(ResolverProxy.class);
resolver.showAnalytics("gwt"); 
```

因此，您可以`InformationResolver`在应用程序的任何地方自由轻松地使用提供的功能，但只有在第一次实际使用时才会下载此类的实现代码。而且您根本不必使用`GWT.runAsync`。只有一个问题，`AsyncProxy`只能用于只有 void 方法的类（因为您无法从尚未加载的类中获取任何内容）。

# php - 从 php 调用 perl 脚本有时无法创建套接字连接

> ID：13201295
> 
> 赞同：2
> 
> 时间：2012-11-02T18:49:02.607
> 
> 标签：php, perl, sockets

我正在尝试制作一个网页，人们可以在其中运行[moss](http://theory.stanford.edu/~aiken/moss/)并检查源代码文件中的相似性。
为此，我通过 php 上传文件并使用 php 中的“exec”以这些文件作为参数调用[moss 脚本](http://moss.stanford.edu/general/scripts/mossnet)，并将输出转储到单独的文本文件中。该代码有时可以正常工作，但有时它会在上传文件后停止。
以下是脚本的片段

```
$server = 'moss.stanford.edu';
$port = '7690';
.
.    
$sock = new IO::Socket::INET (
                                  PeerAddr => $server,
                                  PeerPort => $port,
                                  Proto => 'tcp',
                                 );
die "Could not connect to server $server: $!\n" unless $sock;
$sock->autoflush(1);
.
. 
```

它无法创建连接，并且不会超出此代码段中的第四行 - ' *die "Could not connect to server $server: $!\n" unless $sock;* '

这并不总是发生，但有时它工作得很好，有时却不行。
但是，当我通过 ssh 登录到我的网络主机（顺便说一句，godaddy）并在终端中使用相同的参数执行脚本时，它总是有效的！

有人可以帮我解决这个问题，服务器上出了什么问题，有时脚本在通过浏览器执行时会死掉？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T06:39:47.917

After DAYS of researching this error ... and confirming that my code and the server settings were all perfect, **the reason for the "Connection refused" error is due to shared server issues versus a blocked port.**

Meaning... Hosting companies such as Hostgator and GoDaddy block MANY ports!! This is understandable due to security issues. You cannot simply choose a port on the remote server that you would like to use.

The method for testing your server/client/port/script is to OPEN the remote server's port using a more commonly used port. (i.e.: 8080, 80, etc.) Since opening these ports is a security risk, keep the port open only as long as it takes to test the script, then close it again.

If your script processes correctly, then, you need to find a port that your shared hosting company does not block.

*One more tip: It is also possible that a shared hosting company has proxies. This can add to more 'blocking/connection' problems.

I hope this alleviates others from spending the countless hours that I spent trying to solve this problem.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:58:26.733

由于它在另一台机器上运行良好，因此问题可能出在您的网络或 Perl 安装的细节上，或者与浏览器/PHP 交互有关。最容易检查的是它是否是您的网络。

看看你是否可以用 Perl 以外的东西重现网络问题。也许`telnet moss.stanford.edu 7690`是好几次。这将确定问题是 Perl 还是您的网络连接不稳定。

我还会`ping moss.standford.edu`继续运行并尝试在浏览器中重现问题。如果在您遇到问题的同时 ping 掉线了，那就是网络问题。

# mysql - MySQL group by 和 Where

> ID：13201298
> 
> 赞同：2
> 
> 时间：2012-11-02T18:49:32.327
> 
> 标签：mysql, group-by, where

我想在下面的 sql 中添加一个 where 子句，以便名为“howmany”的列只显示大于 1 的结果，但是当我尝试时我不断收到错误消息。

```
 select monthname(birthdate) as 'Month', Count(*) as howmany
 from tblBday
 group by month(birthdate)
 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:51:55.477

您不能在`WHERE`子句中使用别名，并且由于要使用聚合函数，因此您需要一个`HAVING`子句：

```
select monthname(birthdate) as `Month`, Count(*) as howmany
from tblBday
group by month(birthdate)
having Count(*) > 1 
```

如果要在`WHERE`子句中使用别名，则可以将查询设为子查询：

```
select `month`, howmany
from
(
    select monthname(birthdate) as `Month`, Count(*) as howmany
    from tblBday
    group by month(birthdate)
) src
where howmany > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:52:05.287

这是因为您不能在 WHERE 子句中使用别名

此外，您不能在 WHERE 子句中执行聚合函数

你需要这样的东西

```
SELECT monthname(birthdate) as Month, Count(*) AS howmany
FROM tblBday
GROUP BY month(birthdate)
HAVING Count(*) > 1
 ; 
```

[这是](http://www.w3schools.com/sql/sql_having.asp)关于 HAVING 的教程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T18:52:55.087

```
 select monthname(birthdate) as 'Month', Count(*) as howmany
                                ^--   ^-- 
```

你不能像那样引用别名。单引号 ( `'`) 将事物转换为字符串 - 字符串不是别名，也不能是别名。删除引号，或使用反引号：

```
select monthname(birthdate) as Month, Count(*) as howmany 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T18:52:16.383

尝试

```
select monthname(birthdate) as 'Month', Count(*) as howmany
from tblBday
group by month(birthdate)
having howmany > 1
; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T18:53:28.690

```
 select monthname(birthdate) as 'Month', Count(*) as howmany
 from tblBday
 group by monthname(birthdate)
Having count(*) > 1
; 
```

# iphone - iPhone、Three20 图书馆（图书馆在维护吗？）

> ID：13201299
> 
> 赞同：0
> 
> 时间：2012-11-02T18:49:35.603
> 
> 标签：iphone, three20

Three20 库 (http://three20.info) 是否正在维护？

GitHub 上报告了许多突出的错误。我不确定是否有人正在积极工作。

最后一次入住是在 9 个月前（相对于 2012 年 11 月）。

我了解不支持 Retina。

杰夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T13:51:26.093

没有发展。

不时有一些合并到开发分支，但主要是构建修复，没有特性和更大的变化。

# actionscript-3 - 使用 compareFunction 对 ArrayCollection 进行排序

> ID：13201300
> 
> 赞同：-1
> 
> 时间：2012-11-02T18:49:36.363
> 
> 标签：actionscript-3, apache-flex, sorting, flash-builder, arraycollection

使用 Flash Builder 4.6 我想对 arrayCollection 进行排序。该数组有 2 个属性 status 和 help_id。我想对数组进行排序以使所有“打开”状态都位于顶部，而不是所有“已读”、“现场”、“完成”等等。我创建了一个函数来执行此操作，但我希望所有具有相同状态的项目都按 help_id 属性最高的第一个最低的最后一个排序。

这是我对状态进行排序的代码。

```
 [Bindable]protected var myHelp:ArrayCollection = new ArrayCollection(); 
```

排序功能：

```
 function sortFunction(a:Object, b:Object, array:Array = null):int
                {

                    var status:Array = ["open", "read", "onsite","complete", "reopen", "closed"];
                    var aStatus:Number = status.indexOf(a.status);
                    var bStatus:Number = status.indexOf(b.status);
                    if(aStatus == -1 || bStatus == -1)
                        throw new Error("Invalid value for criticality ");
                    if(aStatus == bStatus)
                        return 0;
                    if(aStatus > bStatus)
                        return 1;
                    return -1;
                }
                var sort:Sort = new Sort();
                sort.compareFunction = sortFunction;
                myHelp.sort = sort;
                myHelp.refresh(); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:29:54.863

与其在数组中查找字符串索引，不如对两者都使用整数。在您的代码中，您可以引用 StatusType.OPEN 等常量...然后您的代码可能如下所示：

```
var sort:Sort = new Sort();
sort.fields = [new SortField("status", true, true), new SortField("help_id", true, true)];
myHelp.sort = sort;
myHelp.refresh(); 
```

这将同时按状态排序，然后按 help_id 排序。然后当您需要在 GUI 中向用户显示状态时，将 int 转换为 String 人类可读的值

# java - 根据登录用户和调用的 servlet 确定 Dao 调用的逻辑

> ID：13201302
> 
> 赞同：1
> 
> 时间：2012-11-02T18:49:40.440
> 
> 标签：java, servlets

我有三个 servlet

```
/Servelt1 (supervisors, managers & president can execute)
/Servelt2 (only managers & president can execute)
/Servelt3 (only president can execute) 
```

每个 servlet 都使用 Struts 风格的 actionMaps。例如，当调用每个 servlet 时， `?method=list`它们都会执行 Comment.getList()

```
/actionMap.put("list", new ListAction(modelMap, form, "WEB-INF/views/servlet1_v.jsp"));
/actionMap.put("list", new ListAction(modelMap, form, "WEB-INF/views/servlet2_v.jsp"));
/actionMap.put("list", new ListAction(modelMap, form, "WEB-INF/views/servlet3_v.jsp"));

Class Comment {  
//getList called from the 3 servlets
  public List<Comment> getList(HttpServletRequest request) {
     List<Comment> comments = null;
     try {
         CommentDetailDAO cdDao = new CommentDetailDAO();
    comments = cdDao.getComDetailListForDirectReports(authUser.getBadge());
    } catch (DAOException e) {
       setError(FORM_RESULTS, e.getMessage());
    }
    request.setAttribute("comments ", comments);
    return comments; //redundant not really used
  } 
```

那么什么是根据谁登录以及他们正在调用什么 servlet 来执行不同的 Dao 调用。

```
 if (supervisor) {
   comments = cdDao.getComDetailListForDirectReports(authUser.getBadge());
   //other dao calls 
 }
 if (manager & servlet1) {
   comments = cdDao.getComDetailListForDirectReportsAndTheirDirectReports(authUser.getBadge());
   //other dao calls
 }
 etc... 
```

是使用大量 if/then/else 逻辑的唯一方法吗？或者我应该让每个 servlet 调用特定的 SupervisorCommentClass.getList()、ManagerCommentClass.getList() 等...？

==编辑——周末我想到了这个。由于我有 3 个不同的 Servlet，并且每个 servlet 有 3 个不同的视图，因此拥有 3 个包含业务逻辑的不同类文件似乎是最有意义的。`Comment.getList()`因此，我认为我应该有 3 个 Comment 类，而不是每个 servlet 调用：

```
SupervisorComment.getList();
ManagerComment.getList();
PresidentComment.getList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:03:58.960

这只是我现在创建的示例代码（我没有调试......）：[https ://gist.github.com/4019608#comments](https://gist.github.com/4019608#comments)

# php - curl CLI 到 php curl

> ID：13201305
> 
> 赞同：0
> 
> 时间：2012-11-02T18:49:58.407
> 
> 标签：php, curl, command-line-interface

我有一个工作 CLI

```
curl -X POST \
-H "X-Parse-Application-Id: ID" \
-H "X-Parse-REST-API-Key: KEY" \
-H "Content-Type: application/json" \
-d '{
    "channels": [
      "Giants",
      "Mets"
    ],
    "data": {
      "alert": "The Giants won against the Mets 2-3."
    }
  }' \
https://api.parse.com/1/push 
```

返回一个字符串`{"result":"success"}`

但是我的 php curl

```
$post = json_encode(array('channels'=>array('Giants','Mets'),'data'=>array('alert'=>'The Giants won against the Mets 2-3')));
$ch = curl_init();
curl_setopt_array($ch, array(
            CURLOPT_URL             =>  'https://api.parse.com/1/push',
            CURLOPT_HTTPHEADER      =>  array(
                                            'X-Parse-Application-Id: ID',
                                            'X-Parse-REST-API-Key: KEY',
                                            'Content-Type: application/json'
                                        ),
            CURLOPT_POST            =>  true,
            CURLOPT_POSTFIELDS      =>  $post,
            CURLOPT_FOLLOWLOCATION => true,
            CURLOPT_RETURNTRANSFER => true
        ));
$res = curl_exec($ch);

if (curl_error($ch)) {
     echo "Curl error: " . curl_error($ch);
}
curl_close($ch);
echo $res; 
```

显示消息“您要查找的页面不存在”。然后在其下方的“1”是`$res`没有错误的

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:02:18.650

您正在使用相同的密钥发送多个标头，因此每个标头都会清除前一个。您必须将标头作为数组发送：

```
CURLOPT_HTTPHEADER => array(
    'Content-type: text/plain',
    'Content-length: 100',
    '...'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:01:19.247

您在数组中传递相同的密钥：“CURLOPT_HTTPHEADER”

请试试：

```
curl_setopt_array($ch, array(
  CURLOPT_URL         =>  'https://api.parse.com/1/push',
  CURLOPT_HTTPHEADER      =>  "X-Parse-Application-Id: ID\n" .
        "X-Parse-REST-API-Key: KEY\n" .
        "Content-Type: application/json",
  CURLOPT_POST        =>  true,
  CURLOPT_POSTFIELDS  =>  $post,
  CURLOPT_FOLLOWLOCATION => true,
  CURLOPT_RETURNTRANSFER => true
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-06T05:48:48.993

请试试：

```
curl_setopt_array($ch, array(
      CURLOPT_URL         =>  'https://api.parse.com/1/push',
      CURLOPT_HTTPHEADER      =>  "X-Parse-Application-Id: ID\n" .
            "X-Parse-REST-API-Key: KEY\n" .
            "Content-Type: application/json",
      CURLOPT_POST        =>  true,
      CURLOPT_POSTFIELDS  =>  $post,
      CURLOPT_FOLLOWLOCATION => true,
      CURLOPT_RETURNTRANSFER => true,
      CURLOPT_SSL_VERIFYPEER => false//not SSL verification
    )); 
```

# javascript - 使用 PubNub for Javascript 检测断开连接

> ID：13201306
> 
> 赞同：2
> 
> 时间：2012-11-02T18:50:10.163
> 
> 标签：javascript, pubnub

我正在使用 PubNub 创建一个人对人的聊天应用程序。

基本上，每个用户都订阅了自己的频道，然后双方以即时消息方式将消息发送到彼此的频道。

消息然后显示在页面上。我为此使用 JQuery。

```
pubnub.subscribe({
    restore  : true,
    channel  : 'my_channel',
    callback : function(message) {
        console.log(JSON.stringify(message));
        $('div.chatbox').append('<div>'+message+'</div>');
    }
}); 
```

但是，我希望能够检测到用户何时下线（我并不关心他们是如何下线的，只是与对方的连接不再可用）。

那么如果用户 1 和用户 2 正在通话，那么用户 2 就下线了，PubNub 端有什么机制可以让用户 1 来检查用户 2 的连接状态吗？我将如何在 JS 代码中实现这一点（骨架代码可以）？

提前致谢。

PS 我不想使用 Socket.IO

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T06:18:42.707

# 如何使用 PubNub 检测丢失的朋友和自己（本地）网络连接

为了检测移动设备、平板电脑和 Web 设备上断开的网络连接，您可以使用 PubNub 通过绑定到 PubNub JavaScript API 中的内置事件来显示连接状态。了解断开连接和重新连接状态有几个方面。此外，使用 PubNub，您可能会对在线朋友的连接/断开事件的社交发现感兴趣。这样你就可以有绿点效果来指示你的朋友*在线*状态和一个红点当你的朋友*离线*时。我们将从两个方面进行连接状态跟踪，以便您能够检测并通知您的用户何时他们自己的设备离线/在线以及他们的朋友何时在线/离线。

## 使用 JavaScript PubNub API 检测本地连接状态

**在任何支持 JavaScript 的设备（例如手机**和 Web 浏览器）上检测您与 Internet 的本地连接状态都很简单。您将使用一些高级 PubNub 参数来访问在连接状态更改期间触发的回调。在应用程序代码中注册回调很容易。这是一个快速复制/粘贴的起点，您可以将其放在后袋中：

```
<div pub-key="demo" sub-key="demo" id="pubnub"></div>
<script src="http://cdn.pubnub.com/pubnub-3.3.min.js"></script>
<script>(function(){

// LISTEN FOR MESSAGES
PUBNUB.subscribe({
    channel    : "hello_world",      // CONNECT TO THIS CHANNEL.
    restore    : true,               // STAY CONNECTED, EVEN WHEN BROWSER IS
                                     // CLOSED OR WHEN PAGE CHANGES.
    callback   : alert,              // FUNCTION TO RUN ON MESSAGE RECEIVED.

    disconnect : function() {        // LOCAL LOST CONNECTION.
        alert("Connection Lost.")
    },
    reconnect  : function() {        // CONNECTION RESTORED.
        alert("And we're Back!")
    },
    connect    : function() {        // CONNECTION ESTABLISHED.
        PUBNUB.publish({             // SEND A MESSAGE.
            channel : "hello_world",
            message : "Hi from PubNub."
        }) 
    }
})

})();</script> 
```

> **注意：**上面显示的是注册本地设备连接事件的简单方法。

现在是时候谈谈 PubNub 的存在了；PubNub 的一项功能，可让您在朋友在线或离线时检测朋友的连接并接收远程连接事件。

## 使用 PubNub 在线检测好友在线/离线状态

接下来，您想了解如何检测您的朋友在线和离线时的连接状态。您也可以注册这些活动，但您需要做更多的工作，因为您需要提供用户的 ID（或抽象 ID）。您可以通过 PubNub 的存在来做到这一点，但它涉及的更多一些，我将向您发送两篇博文，让您快速上手。在我送你之前，我将向你展示重要的代码片段，用于注册来自你朋友的远程在线/离线事件通知：

```
// Open Bidirectional Socket Connection with
// REMOTE Connection Detect "Presence" Events.
PUBNUB.subscribe({
    channel  : "my_channel", // Channel Name
    connect  : connect,      // OnConnect Callback
    callback : alert,        // Received Message Callback
    presence : presence      // Presence Callback
}); 
```

> **注意：**通过 PubNub 存在回调事件接收远程连接状态更新（朋友连接状态）。

在代码示例中，您将看到一个**存在**回调。此参数选项需要一个函数引用，当您的朋友在同一 PubNub 频道上发生连接更改（在线/离线）时，将执行该函数引用。好的，现在您已经掌握了要点，您需要查看以下博客文章，以帮助您了解有关 PubNub 存在的具体细节。

### PubNub 存在资源

*   宣布 PubNub 频道存在[http://blog.pubnub.com/announcing-pubnub-channel-presence/](http://blog.pubnub.com/announcing-pubnub-channel-presence/)
*   使用 PubNub Channel Presence 在移动和 Web 上进行漂亮的 HTML5 聊天[http://blog.pubnub.com/html5-websockets-beautiful-real-time-chat-on-mobile-using-pubnubs-channel-presence/](http://blog.pubnub.com/html5-websockets-beautiful-real-time-chat-on-mobile-using-pubnubs-channel-presence/)
*   Live PubNub 聊天频道状态应用程序[http://pubnub.s3.amazonaws.com/rally/index.html](http://pubnub.s3.amazonaws.com/rally/index.html)
*   Vimeo 上的 PubNub 存在视频[https://vimeo.com/channels/379311](https://vimeo.com/channels/379311)
*   下载示例 Presence 应用程序源代码 (GitHub) - [https://github.com/pubnub/pubnub-chat-c](https://github.com/pubnub/pubnub-chat-channel-presence) ​​hannel-presence - 开源 MIT 许可证。

使用上述链接和参考资料了解您需要了解的有关 PubNub Presence 的所有信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T11:19:47.693

另请参阅 help.pubnub.com 知识库中的 Channel Presence FAQ。

将 socket.io 用于在线状态功能仅限于客户端（通常，您的服务器还需要获取在线状态信息来管理客户端交互或对话），并且是一个非常健谈的协议，会导致过度的电池消耗和移动设备上的数据计划浪费电话。

# ios - 带有 Image 的 UIBarButtonItem 只能部分点击

> ID：13201307
> 
> 赞同：1
> 
> 时间：2012-11-02T18:50:11.967
> 
> 标签：ios, uibarbuttonitem

我每隔几天就在谷歌上搜索并为此搜索了几个星期，但从未发现过类似的问题，但我相信其他人一定会受苦。所以这里是： 简而言之：我正在一个 iPhone 应用程序的 UINavigationController 的工具栏中创建一个 UIBarButtonItem，其中有一个图像，当我单击该按钮时，我必须单击一个非常特定的部分才能使其工作.

我有几个这样的按钮，每个按钮在不同的部分都很敏感。它几乎似乎取决于图像中透明度的位置 - 但我不确定。

下面是创建这样一个按钮的代码：

```
_addButton = [[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"50-plus"]
                                             style:UIBarButtonItemStyleBordered
                                            target:self
                                            action:@selector(addButtonPressed:)]; 
```

将它加载到工具栏中的代码有点条件，但基本上它将这个按钮放在 NSMutableArray 中，并调用UINavigationController 中的 UITableViewControler 在`[controller setToolbarItems:items animated:YES]`哪里。`controller`

其他一些细节以防有帮助：

*   我只是在 XCode 4.3 中使用 iPhone 5.1 模拟器尝试这个
*   该图像是来自 glyphish 图标集 (glyphish.com) 的白色图标
*   按钮的“点击区域”很小但一致，此 + 按钮位于左下象限的某个位置，但与其他图像的按钮不同
*   该按钮确实可以完全按预期工作，但前提是我单击了非常特定的区域

# django - 获取 HTML、imaplib 和 Django 格式的文本

> ID：13201316
> 
> 赞同：5
> 
> 时间：2012-11-02T18:50:56.440
> 
> 标签：django, imaplib

我在 Python/Django 中使用 imaplib 获取电子邮件。

我的目标是阅读纯文本和 HTML 电子邮件。

我在用着：

```
mail.select('inbox', readonly=True)
result, data = mail.uid('fetch', email_uid, '(RFC822)')

raw_email = data[0][1]
email_message = email.message_from_string(raw_email)

#print "EMAIL:",email_message
#print "HEADERS",email_message.items()

subject = get_decoded_header(email_message['Subject'])
from_address = get_decoded_header(email_message['From'])

date = email_message['Date']
date = parse_date(date)

body = ''+get_first_text_block(email_message) 
```

以及 get_first_text_block 的代码（从网上获得）：

```
def get_first_text_block(email_message_instance):
    maintype = email_message_instance.get_content_maintype()

    if maintype == 'multipart':
        for part in email_message_instance.get_payload():
            if part.get_content_maintype() == 'text':
                return part.get_payload()
    elif maintype == 'text':
        return email_message_instance.get_payload()

    # In cases of emails with empty body
    return '' 
```

现在，这个问题是，文本没有出现格式化。具体来说：如果是纯文本电子邮件，则文本显示为一个大的合并字符串，而不是在行间有断点、段落和空行。

如果它是 HTML 文本，则 HTML 根本不会显示，而是显示为带有 HTML 片段的纯文本（即使在 Django 上使用 |safe 过滤器）。

我想可能会发生诸如将电子邮件有效负载不当转换为字符串或类似的事情，但我检查了所有内容，但找不到可能出现的问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:55:52.880

问题是您只使用了电子邮件正文的第一个文本块。请尝试以下方法，看看它是否有效。这不是 Django 问题。

```
body = email_message.get_payload()[1].get_payload() 
```

尝试更改索引并测试以查看是否看到 html。

基于此，您必须修改函数以获取电子邮件的正文。

编辑：我在这里假设您正在查看多部分消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:38:09.043

要提取文本版本，您可以使用下面的代码。如果您想要电子邮件 juist 的 html 版本，请替换`!= 'plain'`为`!= 'html'`.

```
import email
resp, data = M.FETCH(1, '(RFC822)')
mail = email.message_from_string(data[0][1])

for part in mail.walk():
 print 'Content-Type:',part.get_content_type()
 print 'Main Content:',part.get_content_maintype()
 print 'Sub Content:',part.get_content_subtype()

for part in mail.walk():

  if part.get_content_maintype() == 'multipart':
    continue

  if part.get_content_subtype() != 'plain':
    continue

  payload = part.get_payload()
  print payload 
```

# c# - ASP.NET MVC 将 div 附加到正文

> ID：13201319
> 
> 赞同：1
> 
> 时间：2012-11-02T18:50:58.867
> 
> 标签：c#, asp.net-mvc

我制作了一个关于日历的自定义控制器。但是需要附加到正文的 div。我搜索，但一无所获。我实现的以下代码有效，但不好。我发现， div 应该放在 body 的末尾，就像`jquery $('body').append('div')`但是我不知道如何在 MVC 助手中编码。

```
 public static MvcHtmlString CalendarTextBox(this HtmlHelper helper, string name, DateTime? value, DateTime start, DateTime max, string nextTriggerId, object htmlAttributes = null)
            {
                var result = helper.TextBox(name, value, htmlAttributes);
                var str = result.ToHtmlString().Replace(@"/>", string.Format(@"  mod=""calendar|notice"" 
       mod_notice_tip=""yyyy-mm-dd"" 
      mod_calendar_rangeStart=""{0}"" 
      mod_calendar_rangeEnd=""{1}""
      mod_calendar_focusNext=""{2}"" //>", start.ToString("yyyy-MM-dd"), max.ToString("yyyy-MM-dd"), nextTriggerId));

                if (null == helper.ViewData["calendar"])
                {
                    str += string.Format(
                       @"<div style=""HEIGHT: 0px""id=""jsContainer""class=""jsContainer""><div style=""DISPLAY: none""id=""jsHistoryDiv""></div><textarea style=""DISPLAY: none""id=""jsSaveStatus""></textarea><div style=""Z-INDEX: 999; POSITION: absolute; DISPLAY: none; OVERFLOW: hidden""
    id=""tuna_alert""></div><div style=""Z-INDEX: 120; POSITION: absolute; VISIBILITY: hidden""
    id=""tuna_jmpinfo""></div><div style=""Z-INDEX: 120; POSITION: absolute; DISPLAY: none""id=""tuna_calendar""
    class=""tuna_calendar""></div></div><SCRIPT type=text/javascript charset=utf-8 src=""{0}/js/datepicker/tuna_100324_jsLoader.js""></script><script type=""text/javascript"">var JL=new CtripJsLoader();var files=[[""{0}/js/datepicker/tuna_100324_index.js"",""utf-8"",true]];JL.scriptAll(files);</script>",
                       Define.ASSET_PATH);
                    helper.ViewData["calendar"] = 1;
                }
                return MvcHtmlString.Create(str);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:33:08.230

将该`$('body').append('div');`行注入到生成的 HTML 中，并将语句嵌套在 document ready 函数内的 javascript 块中：

```
// ...
str += string.Format(
    @"<script type=""text/javascript"">$(document).ready(function () {
    $('body').append('div'); } </script>");

helper.ViewData["calendar"] = 1;
// ... 
```

# xpath - 如何使用 2 个元素计算 xpath？

> ID：13201320
> 
> 赞同：0
> 
> 时间：2012-11-02T18:51:00.063
> 
> 标签：xpath, selenium, phpunit

如果一个条目成功提交，我想计算星星的数量。还可以为尚未提交的条目加星标。如果条目尚未提交，我想忽略这些条目，即使那些尚未提交的条目有星号。

这是我要计算的代码：

```
<table>
  <tr id="entry_row_25494">
    <td>
      <img id="star_span_25494" img="" <="" src="/images/yes_star.png" onclick="toggleStar(25494);">
    </td>
    <td>
    <img title="Entry successfully submitted" alt="Entry successfully submitted" src="/images/greencirclecheck.png">
    </td>
  </tr>
  <tr id="entry_row_25496">
    <td>
      <img id="star_span_25496" img="" <="" src="/images/yes_star.png" onclick="toggleStar(25496);">
    </td>
    <td></td>
  </tr>
</table> 
```

这就是我所拥有的：

```
$numOfStars = $this->getXpathCount("xpath=(//img[contains(@src, 'yes_star') and (contains(@src, 'greencirclecheck.png'))])") 
```

这些是我到目前为止在 Selenium IDE 中使用 storeXpathCount 尝试过的

```
//table//img[@src='/images/yes_star.png' and @src='/images/greencirclecheck.png']
//table/tbody/tr[*]/td[*]/img[contains(@src, 'yes_star.png')]/parent::*[contains(@src, 'greencirclecheck.png')]
//img[contains(@src, 'greencirclecheck.png')]/preceding::img[contains(@src, 'yes_star.png')]
xpath=(//img[contains(@src, 'yes_star.png')]//img[contains(@src, 'greencirclecheck.png')]) 
```

但那些不起作用

如果您需要我澄清而不是投反对票，请告诉我。我是 Selenium 和 PHPUnit 的新手，所以问题可能不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:55:52.797

```
$counted = 0;
    $countEntries = $this->getXpathCount("//img[contains(@id, 'star_span')]");
    for($num = 1; $num <= $countEntries; $num ++) {
        $entry = $this->getAttribute("//tr[contains(@id, 'entry_row')][".$num."]@id");
        $newEntry = preg_replace("/[^0-9]/i", "", $entry);
        if($this->isElementPresent("//tr[@id='entry_row_".$newEntry."']//img[contains(@src, 'yes_star.png')]") && $this->isElementPresent("//tr[@id='entry_row_".$newEntry."']//input[contains(@checked, 'checked')]") == true) {
            $counted ++;
        }
    } 
```

# visual-studio-2010 - 尝试创建新项目时 Visual Studio 不显示项目类型

> ID：13201321
> 
> 赞同：1
> 
> 时间：2012-11-02T18:51:01.467
> 
> 标签：visual-studio-2010

我正在尝试创建一个 C# 项目。但是，当我单击文件 --> 新项目时，我看到了空项目。它没有显示任何选择选项，如 C++、C# 等。我以前从未见过。

我曾经能够选择我想要创建的项目类型，然后它会创建项目。现在它说没有找到任何项目。我该如何解决这个问题。\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:17:15.757

也许它太容易推荐了，但你确定你安装了 Visual Studio 的 C++ 和 C# 组件吗？

# grails - 从 grails 应用程序加载 Neo4j 时出错

> ID：13201322
> 
> 赞同：0
> 
> 时间：2012-11-02T18:51:02.330
> 
> 标签：grails, neo4j, grails-2.0

我正在使用 Grails 2.0.1 和 Neo4J 1.8，并且想在我的 spring 资源文件中实例化一个 Neo4j 数据库，如下所示：

```
import org.codehaus.groovy.grails.commons.ConfigurationHolder as CH;
import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.factory.GraphDatabaseFactory;
import org.neo4j.graphdb.factory.GraphDatabaseSettings;

// Place your Spring DSL code here
beans = {
    GraphDatabaseService db = getGraph();
    enronService(com.fxpal.neo4j.EnronService) {
        graph = db;
        index = db.index()
            .getNodeAutoIndexer()
            .getAutoIndex();
    }
}

protected GraphDatabaseService getGraph() {
    String graphDBName = CH.config.enron.graphdb ?: "../databases/enrontest";
    GraphDatabaseService db = new GraphDatabaseFactory().
        newEmbeddedDatabaseBuilder( graphDBName ).
        setConfig( GraphDatabaseSettings.node_keys_indexable, "emailID,address" ).
        setConfig( GraphDatabaseSettings.node_auto_indexing, "true" ).
        setConfig( GraphDatabaseSettings.dump_configuration, "true").
        newGraphDatabase();

    return db;
} 
```

我的`BuildConfig.groovy`文件已`mavenLocal()`启用，并且路径中有 Lucene 3.5 核心库。

当我运行我的应用程序时，我会在 Neo4j 启动时收到以下消息：

```
| Running Grails application
Physical mem: 7987MB, Heap size: 455MB
| Error 2012-11-02 11:34:48,597 [pool-5-thread-1] ERROR spring.GrailsRuntimeConfigurator  - [RuntimeConfiguration] Unable to load beans from resources.groovy
Message: Failed to transition org.neo4j.kernel.InternalAbstractGraphDatabase$DefaultKernelExtensionLoader@2116b32 from NONE to STOPPED
   Line | Method
->> 388 | init                      in org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    82 | init                      in org.neo4j.kernel.lifecycle.LifeSupport
|   116 | start . . . . . . . . . . in     ''
|   227 | run                       in org.neo4j.kernel.InternalAbstractGraphDatabase
|    79 | <init> . . . . . . . . .  in org.neo4j.kernel.EmbeddedGraphDatabase
|    70 | newDatabase               in org.neo4j.graphdb.factory.GraphDatabaseFactory$1
|   205 | newGraphDatabase . . . .  in org.neo4j.graphdb.factory.GraphDatabaseBuilder
|    21 | getGraph                  in resources
|     8 | doCall . . . . . . . . .  in resources$_run_closure1
|   736 | invokeBeanDefiningClosure in grails.spring.BeanBuilder
|   569 | beans . . . . . . . . . . in     ''
|   303 | innerRun                  in java.util.concurrent.FutureTask$Sync
|   138 | run . . . . . . . . . . . in java.util.concurrent.FutureTask
|   886 | runTask                   in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . . . . . . . . . . . in     ''
^   619 | run                       in java.lang.Thread
Caused by NoClassDefFoundError: org/apache/lucene/util/Version
->> 113 | <clinit>                  in org.neo4j.index.impl.lucene.LuceneDataSource
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    72 | load                      in org.neo4j.index.lucene.LuceneIndexProvider
|   1171 | loadIndexImplementations  in org.neo4j.kernel.InternalAbstractGraphDatabase$DefaultKernelExtensionLoader
|   1143 | init                      in     ''
|   382 | init . . . . . . . . . .  in org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance
|    82 | init                      in org.neo4j.kernel.lifecycle.LifeSupport
|   116 | start . . . . . . . . . . in     ''
|   227 | run                       in org.neo4j.kernel.InternalAbstractGraphDatabase
|    79 | <init> . . . . . . . . .  in org.neo4j.kernel.EmbeddedGraphDatabase
|    70 | newDatabase               in org.neo4j.graphdb.factory.GraphDatabaseFactory$1
|   205 | newGraphDatabase . . . .  in org.neo4j.graphdb.factory.GraphDatabaseBuilder
|    21 | getGraph                  in resources
|     8 | doCall . . . . . . . . .  in resources$_run_closure1
|   736 | invokeBeanDefiningClosure in grails.spring.BeanBuilder
|   569 | beans . . . . . . . . . . in     ''
|   303 | innerRun                  in java.util.concurrent.FutureTask$Sync
|   138 | run . . . . . . . . . . . in java.util.concurrent.FutureTask
|   886 | runTask                   in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . . . . . . . . . . . in     ''
^   619 | run                       in java.lang.Thread
Caused by ClassNotFoundException: org.apache.lucene.util.Version
->> 156 | findClass                 in org.codehaus.groovy.tools.RootLoader
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   307 | loadClass                 in java.lang.ClassLoader
|   128 | loadClass . . . . . . . . in org.codehaus.groovy.tools.RootLoader
|   248 | loadClass                 in java.lang.ClassLoader
|   113 | <clinit> . . . . . . . .  in org.neo4j.index.impl.lucene.LuceneDataSource
|    72 | load                      in org.neo4j.index.lucene.LuceneIndexProvider
|   1171 | loadIndexImplementations  in org.neo4j.kernel.InternalAbstractGraphDatabase$DefaultKernelExtensionLoader
|   1143 | init                      in     ''
|   382 | init . . . . . . . . . .  in org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance
|    82 | init                      in org.neo4j.kernel.lifecycle.LifeSupport
|   116 | start . . . . . . . . . . in     ''
|   227 | run                       in org.neo4j.kernel.InternalAbstractGraphDatabase
|    79 | <init> . . . . . . . . .  in org.neo4j.kernel.EmbeddedGraphDatabase
|    70 | newDatabase               in org.neo4j.graphdb.factory.GraphDatabaseFactory$1
|   205 | newGraphDatabase . . . .  in org.neo4j.graphdb.factory.GraphDatabaseBuilder
|    21 | getGraph                  in resources
|     8 | doCall . . . . . . . . .  in resources$_run_closure1
|   736 | invokeBeanDefiningClosure in grails.spring.BeanBuilder
|   569 | beans . . . . . . . . . . in     ''
|   303 | innerRun                  in java.util.concurrent.FutureTask$Sync
|   138 | run . . . . . . . . . . . in java.util.concurrent.FutureTask
|   886 | runTask                   in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . . . . . . . . . . . in     ''
^   619 | run                       in java.lang.Thread 
```

昨天我已经能够从其他应用程序加载这个数据库。在寻找这个问题的解决方案时，我在 Neo4j Google 小组上遇到了这个[讨论。](https://groups.google.com/forum/#!msg/neo4j/lFVgntpLq5Y/CKCbLJjDesIJ)这意味着这个问题应该已经在我的 Neo4j 版本（1.8，上周下载）中得到解决。接下来我应该尝试什么？

**更新**

BuildConfig.groovy。主要是库存；`mavenLocal()`未注释；休眠删除。

```
grails.servlet.version = "2.5" // Change depending on target container compliance (2.5 or 3.0)
grails.project.class.dir = "target/classes"
grails.project.test.class.dir = "target/test-classes"
grails.project.test.reports.dir = "target/test-reports"
grails.project.target.level = 1.6
grails.project.source.level = 1.6
//grails.project.war.file = "target/${appName}-${appVersion}.war"

grails.project.dependency.resolution = {
    // inherit Grails' default dependencies
    inherits("global") {
        // uncomment to disable ehcache
        // excludes 'ehcache'
    }
    log "warn" // log level of Ivy resolver, either 'error', 'warn', 'info', 'debug' or 'verbose'
    checksums true // Whether to verify checksums on resolve

    repositories {
        inherits true // Whether to inherit repository definitions from plugins
        grailsPlugins()
        grailsHome()
        grailsCentral()
        mavenCentral()

        // uncomment these to enable remote dependency resolution from public Maven repositories
        //mavenCentral()
        mavenLocal()
       //mavenRepo "http://snapshots.repository.codehaus.org"
        //mavenRepo "http://repository.codehaus.org"
        //mavenRepo "http://download.java.net/maven/2/"
        //mavenRepo "http://repository.jboss.com/maven2/"
    }
    dependencies {
        // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.

        // runtime 'mysql:mysql-connector-java:5.1.16'
    }

    plugins {
//        runtime ":hibernate:$grailsVersion"
        runtime ":jquery:1.7.1"
        runtime ":resources:1.1.6"

        // Uncomment these (or add new ones) to enable additional resources capabilities
        //runtime ":zipped-resources:1.0"
        //runtime ":cached-resources:1.0"
        //runtime ":yui-minify-resources:0.1.4"

        build ":tomcat:$grailsVersion"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:35:51.413

添加到您`grails-app/conf/BuildConfig.groovy`的依赖项部分：

```
compile('org.neo4j:neo4j-community:1.8') 
```

# objective-c - 将 NSDate 的 NSArray 转换为格式化日期数组作为字符串

> ID：13201325
> 
> 赞同：2
> 
> 时间：2012-11-02T18:51:09.750
> 
> 标签：objective-c, ios, for-loop, nsdate

我在 NSDate 格式的 NSArray 中有一组非连续日期。我需要在数组中使用相同的日期集，但在格式为 dd/MM 的 NSString 中。我想我需要循环读取原始数组中的每个日期，将其转换为字符串并根据需要对其进行格式化，但我不知道如何逐步遍历原始数组。

```
NSError *error2;
NSArray *swim750mArray = [context executeFetchRequest:request2 error:&error2];
if (swim750mArray == nil) {
    NSLog(@"The fetch request2 returned an array == nil");
} else {
    NSLog(@"The fetch request2 returned an array...");
    NSLog(@"%@", swim750mArray);

NSArray *datesAsDates = [swim750mArray valueForKey:@"date"];
NSMutableArray* arrayOfDatesAsStrings = [NSMutableArray arrayWithCapacity:count];

    //SomeCode - Convert the Array of NSDates to a new Array of dates as NSStrings...

      for (int i=0; i<index; i++) {
           //get the date next NSDate from the array as: NSDate *dateAsDate...
           NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
           [dateFormat setDateFormat:@"dd/MM"];

         NSString *dateAsStr = [dateFormat stringFromDate:dateAsDate];

         [arrayOfDatesAsStrings addObject:dateAsStr];
        } 
```

这个答案与我需要的很接近，只是它没有从现有数组中读取：[How to use NSDate formatter with a array of dates?](https://stackoverflow.com/questions/5012381/how-to-use-nsdate-formatter-with-an-array-of-dates)

请帮忙！提前谢谢了...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:54:56.223

使用[快速枚举](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html)怎么样？

```
for (NSDate* dateAsDate in datesAsDates) {
     //get the date next NSDate from the array as: NSDate *dateAsDate...
     NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
     [dateFormat setDateFormat:@"dd/MM"];

     NSString *dateAsStr = [dateFormat stringFromDate:dateAsDate];

     [arrayOfDatesAsStrings addObject:dateAsStr];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:49:28.017

jere 命名为快速枚举。它也可以通过[基于块的枚举](http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-SW19)来完成。此外，您[应该创建一次格式化程序并重新使用它](http://twitpic.com/443azs)。

```
NSDateFormatter *dateFormater = [[NSDateFormatter alloc] init];
[dateFormater setDateFormat:@"dd/MM"];

NSMutableArray *datesAsStrings = [NSMutableArray array];
[datesAsDates enumerateObjectsUsingBlock:^(NSDate *date, NSUInteger idx, BOOL *stop){
     NSString *dateString = [dateFormater stringFromDate:date];
     [datesAsStrings addObject:dateString] 
}]; 
```

如果您想坚持使用 C 样式，请执行

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"dd/MM"];
for (int i=0; i< [datesAsDates count]; i++) {       
    NSString *dateAsStr = [dateFormat stringFromDate:[dateAsDate objectAtIndex:i]]; 
    [arrayOfDatesAsStrings addObject:dateAsStr];
} 
```

但由于有突变保护，枚举是首选。

# mongodb - 无法在 Mongodb 中查询嵌入文档

> ID：13201329
> 
> 赞同：0
> 
> 时间：2012-11-02T18:51:24.540
> 
> 标签：mongodb

我一直在研究如何使用 Mongodb，并且一直坚持查询嵌入式文档中的数据几个小时。我在 Mongodb 的网站上找到了示例：[http ://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking](http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking)

但是，当我使用自己的数据进行尝试时，例如

```
db.test.save({"name":"record", "items":[{"histPrices":[10,12],"name":"stuff"}]})
db.test.find({items.name:"stuff"}) 
```

它从来没有找到任何东西，而是给了我一个错误：Fri Nov 2 14:24:09 SyntaxError: missing : after property id (shell):1

有人对此有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:54:55.143

我不确定你为什么使用`histPrices.name`. 但是，如果您使用点表示法，则应将复杂名称括在引号中。

```
> db.test.find({'items.name':"stuff"})
{
    "_id" : ObjectId("509416a3d78ed5021c34c12d"),
    "name" : "record",
    "items" : [
        {
            "histPrices" : [
                10,
                12
            ],
            "name" : "stuff"
        }
    ]
} 
```

# mysql - Bash 中的 MySQL 备份脚本

> ID：13201330
> 
> 赞同：0
> 
> 时间：2012-11-02T18:51:30.903
> 
> 标签：mysql, linux, bash, backup, mysqldump

参考[http://www.rsnapshot.org/howto/1.2/rsnapshot-HOWTO.en.html](http://www.rsnapshot.org/howto/1.2/rsnapshot-HOWTO.en.html) 4.3.9。备份脚本

如果创建新数据库，我需要动态备份所有 mysql 数据库。有没有一种理想的方法可以用最少的代码在 bash 中做到这一点？

我需要登录mysql并获取所有数据库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-22T16:28:25.977

似乎您想要一个 bash 脚本在 MySQL 中创建的动态数据库上运行备份。您可以在根目录的 my.cnf 中或在 # [Define Variables] 下的 bash 脚本中添加 mysql root 用户帐户信息。

您将需要使用 chmod bash 脚本

```
$sudo chmod +x backupmysql.sh 
```

这将允许您使用以下命令运行脚本。

```
$sudo ./backupmysql.sh 
```

您可以随意命名脚本。在本例中，我将其命名为 backupmysql.sh。

这是 bash 脚本：

```
#!/bin/bash

# [ Define Variables ]
HOST=`hostname -s`
syslogtag=MySQL-Backup
DEST=/var/dba/backup/
DBS="$(mysql -u root -Bse 'show databases' | egrep -v '^Database$|hold$' | grep -v 'performance_schema\|information_schema')"
DATE=$(date +'%F')

#[ Individually dump all databases with date stamps ]
for db in ${DBS[@]};
do  

GZ_FILENAME=$HOST-$db-$DATE.sql.gz
mysqldump -u root --quote-names --opt --single-transaction --quick $db > $DEST$HOST-$db-$DATE.sql
ERR=$?

if [ $ERR != 0 ]; then
NOTIFY_MESSAGE="Error: $ERR, while backing up database: $db"
logger -i -t ${syslogtag} "MySQL Database Backup FAILED; Database: $db"
else
NOTIFY_MESSAGE="Successfully backed up database: $db "
logger -i -t ${syslogtag} "MySQL Database Backup Successful; Database: $db"
fi
echo $NOTIFY_MESSAGE
done 
```

如果你有大文件需要备份，你可以替换 bash 脚本中 mysqldump 的语句来使用 gzip 压缩文件。

```
mysqldump -u root --quote-names --opt --single-transaction --quick $db | gzip -cf > $DEST$HOST-$db-$DATE.sql.gz 
```

您可以使用 gunzip 解压缩文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:53:01.403

该`mysqldump`命令具有一次`--all-databases`备份每个数据库的选项。

唯一的缺点是你必须一起恢复它们，你没有挑选和选择的奢侈。

请记住，数据库通常在您的 MySQL 数据目录中有一个关联的目录，因此您始终可以遍历这些目录以找出存在哪些数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-07T15:56:48.760

对于 mysql 本地系统进程，我使用：

```
#!/bin/bash

DEFAULTSFILE=/etc/my.cnf.d/.backups.cnf
BACKUPDIR=/root/db_backups
SAVEIFS=$IFS

# get list of dbs with field name (Database)

DBLIST=$(mysql -e "show databases" | cut -d ' '  -f 2 | grep -v Database)
IFS=$'\n'
DBLIST=($DBLIST)

# create backups directory if it doesn't exist

[ -d $BACKUPDIR ] || mkdir -p $BACKUPDIR

# make a single dump file for all databases in case entire server needs to be restored:

echo "Dumping all databases..."
mysqldump --defaults-file=$DEFAULTSFILE --all-databases > $BACKUP_DIR/$(date +%Y%m%d).all.sql
echo "Done dumping all databases."

# backup each database into it's own file to facilitate discrete restoration:

for (( i=0; i<${#DBLIST[@]}; i++ ))
do
  echo "starting dump of  ${DBLIST[$i]}..."
  mysqldump --defaults-file=$DEFAULTSFILE ${DBLIST[$i]} --skip-lock-tables > $BACKUPDIR/$(date +%Y%m%d).${DBLIST[$i]}.sql
  echo "done dumping ${DBLIST[$i]}."
done
IFS=$SAVEIFS

# gzip the sql files in-place to save space

gzip -f $BACKUPDIR/*.sql

# delete sql files older than 7 days

find $BACKUPDIR -type f -mtime +7 -name '*.gz' -execdir rm -- '{}' \; 
```

对于 docker，情况略有不同：

```
#!/bin/bash
DEFAULTSFILE=/etc/my.cnf.d/.backups.cnf
BACKUPDIR=/root/db_backups
SAVEIFS=$IFS

# get list of dbs with field name (Database) and information_schema excluded. information_schema hangs during dumps

DBLIST=$(docker exec mysql mysql --defaults-file=/etc/my.cnf.d/.backups.cnf -e "show databases" | cut -d ' '  -f 2 | grep -v Database)
IFS=$'\n'
DBLIST=($DBLIST)

# create backups directory if it doesn't exist

[ -d $BACKUPDIR ] || mkdir -p $BACKUPDIR

# backup each database into it's own file to facilitate discrete restoration:

for (( i=0; i<${#DBLIST[@]}; i++ ))
do
  echo "starting dump of  ${DBLIST[$i]}..."
  docker exec mysql mysqldump --defaults-file=$DEFAULTSFILE ${DBLIST[$i]} --skip-lock-tables > $BACKUPDIR/$(date +%Y%m%d).${DBLIST[$i]}.sql
  echo "done dumping ${DBLIST[$i]}."
done
IFS=$SAVEIFS

# gzip the sql files in-place to save space

gzip -f $BACKUPDIR/*.sql

# delete sql files older than 7 days

find $BACKUPDIR -type f -mtime +7 -name '*.gz' -execdir rm -- '{}' \; 
```

我无法让 --all-databases 为 docker 工作。反正我不喜欢多合一备份...

我把这些直接扔到root的crontab中，它们工作正常......

# objective-c - 如何在工具栏中自动布局项目

> ID：13201331
> 
> 赞同：1
> 
> 时间：2012-11-02T18:51:44.340
> 
> 标签：objective-c, ios, toolbar, landscape, autolayout

如果您打开横向模式，纵向模式下工具栏上的项目看起来很正常，因为它们会移动。

如何使它们在纵向和横向模式中处于中间？

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:36:10.657

`Flexible Space Bar Button Item`在工具栏的每一侧添加一个。那应该把它推到中心。

# c# - 为什么 Microsoft Word 会为已打开的文档触发 DocumentOpen 事件

> ID：13201332
> 
> 赞同：3
> 
> 时间：2012-11-02T18:51:45.867
> 
> 标签：c#, vsto, add-in, office-interop

我有一个使用 VSTO 和互操作的 Microsoft Word 插件。`DocumentOpen`如果为已打开的文档触发事件，我的代码会出现问题。通过打开一个文档 doc1，打开另一个文档 doc2，然后尝试再次打开 doc1，我能够始终如一地复制这一点。

Doc1 显然已经打开，但再次为 doc1 触发 DocumentOpen 事件。这是一个预期的设计吗？如果是这样，是否有一种简单的方法可以判断是否为已打开的文档触发了事件？

```
private void ThisAddIn_Startup(object sender, System.EventArgs a)
{
  try
  {
    this.Application.DocumentOpen += 
      new MSWord.ApplicationEvents4_DocumentOpenEventHandler(Application_DocumentOpen);

  }
}

private void Application_DocumentOpen(MSWord.Document document)
{
  HandleOpenedDocument(document);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T18:02:56.407

据我通过阅读[文档](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.word.applicationevents4_event.documentopen%28v=office.14%29.aspx)和做一些实证研究可以看出，如果发生以下情况，事件似乎`DocumentOpen`会被触发：

*   您打开 doc1，然后是 doc2，然后再次打开 doc1

但是，如果您：

*   打开 doc1 然后再次打开 doc1，该事件仅在第一次打开 doc1 时触发。

因此，规则可能类似于：*“如果您一遍又一遍地打开同一个文档，则该事件仅触发一次，但是，当您打开与最近打开的文档不同的文档时，将为新打开的文档触发该事件无论该文档是否已在正在运行的 Word 实例中打开。”*

我一直在文档中寻找更多细节，但没有任何运气。但是，如果您真的想知道发生了什么，我建议您在 MSDN 论坛上提问，其中一些 MVP 可能会提供帮助。

然后你问：

> 有没有一种简单的方法可以判断是否为已打开的文档触发了事件？

是的，我认为:)

基本上，您可以在应用程序中保留一组打开的文档，并使用`DocumentOpen`和`DocumentBeforeClose`事件来维护该集合。知道当前打开了哪些文档，就可以轻松确定触发事件时文档是否已经打开 - 只需在集合中查找即可。

为了说明，我已经构建了一个示例实现，说明如何使用 Word Interop 来完成 - 据我所知，这应该几乎 1 到 1 映射到 VSTO。我在代码中提供了一些注释，因此应该很容易理解正在发生的事情。

```
using Microsoft.Office.Interop.Word;
using Application = Microsoft.Office.Interop.Word.Application;

namespace WordDocStats
{
    internal class Program
    {
        private static readonly HashSet<Document> OpenDocuments = new HashSet<Document>();

        private static void Main()
        {
            var wordApplication = new Application() { Visible = true };

            // Listen for documents open
            wordApplication.DocumentOpen += WordApplicationDocumentOpen;

            // Listen for documents close
            wordApplication.DocumentBeforeClose += WordApplicationDocumentBeforeClose;

            Console.ReadLine();
            wordApplication.Quit();
        }

        static void WordApplicationDocumentBeforeClose(Document doc, ref bool cancel)
        {
            OpenDocuments.Remove(doc);
            Console.WriteLine(doc.Name + " closed!");
        }

        static void WordApplicationDocumentOpen(Document doc)
        {
            // If this returns true, the doc is not in the set of open documents, hence the doc is not already open
            if(OpenDocuments.Add(doc))
            {
                OpenDocuments.Add(doc);
                Console.WriteLine(doc.Name + " opened...");
            }
            // Otherwise, the doc is already in the set of open documents, hence we know the document is already open
            else
            {
                Console.WriteLine(doc.Name + " is already open!");
            }
        }
    }
} 
```

希望这可以帮助！:)

# jsp - Java EE 中 JspWriter 和 PrintWriter 的区别？

> ID：13201334
> 
> 赞同：17
> 
> 时间：2012-11-02T18:51:54.777
> 
> 标签：jsp, jakarta-ee, buffer, printwriter, output

对于所有“重复”的狂热分子，这里有一个关于 SO 的类似[问题](https://stackoverflow.com/questions/3228633/what-is-difference-between-jspwriter-and-printwriter)。不同之处在于我画了一个我无法理解输出的生动示例。

[JspWriter](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/JspWriter.html)和[PrintWriter](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)的文档说有两个区别：**1.** JspWriter 可以抛出异常， PrintWriter 不应该这样做。**2.** JspWriter 在后台使用 PrintWriter，但由于默认情况下 JSP 页面是缓冲的，因此不会创建 PrintWriter 直到`the buffer is flushed`- 无论在 JSP 页面的上下文中意味着什么。我不确定我是否理解了最后一部分。考虑这个 JSP 页面：

```
<%@page import="java.io.PrintWriter"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JspWriter versus PrintWriter</title>
    </head>
    <body>
        <p>I should be row one.</p>
        <%
            out.println("<p>JspWriter said: I should be the second row.</p>");

            PrintWriter pw = response.getWriter();
            pw.println("<p>PrintWriter said: I should be the third row.</p>");
        %>
        <p>I should be the fourth row.</p>
    </body>
</html> 
```

它产生以下输出：

```
PrintWriter said: I should be the third row.
I should be row one.
JspWriter said: I should be the second row.
I should be the fourth row. 
```

如您所见，JspWriter 按照我的预期将他的字符串输出到浏览器。但是 PrintWriter 在所有其他内容发送到浏览器之前输出他的字符串。如果我们检查发送到浏览器的源代码，PrintWriter 的字符串作为第一行发送，在 DOCTYPE 声明之前。那么在上面的例子中，究竟发生了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-02T19:03:00.053

解释在您自己的问题中：

> JspWriter 在后台使用 PrintWriter，但由于默认情况下 JSP 页面是缓冲的，因此在刷新缓冲区之前不会创建 PrintWriter

这意味着写入 JspWriter 的内容被缓冲，一旦这个缓冲区被刷新（因为缓冲区已满，或者因为 JSP 已到达其执行的末尾），内容将被写入响应的 PrintWriter。

因此，您的示例流程如下：

*   直到 scriptlet 的静态 HTML 代码：写入内存缓冲区
*   out.println(...)：写入内存缓冲区
*   pw.println(...)：写入响应
*   直到 JSP 结束的静态 HTML 代码：写入内存缓冲区
*   内存缓冲区的刷新：它包含的所有内容都写入响应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T11:58:04.887

JSP 应该使用由“out”隐式对象表示的 JspWriter 将输出发送回客户端。JspWriter 是 PrintWriter 的缓冲版本。有关详细信息，请参阅 JspWriter API。JspWriter 与 PrintWriter 的区别还在于抛出 java.io.IOException，而 PrintWriter 不会。

# python - 使用 python 自动从 csv 文件中声明 input_fields

> ID：13201335
> 
> 赞同：0
> 
> 时间：2012-11-02T18:52:00.263
> 
> 标签：python, csv

我一直遇到以下问题，我需要声明输入文件的 input_fields 并且我只是从文件复制并粘贴到我的变量中，添加逗号和引号。例如：

```
input = ("First Name", "Middle Name", "Last Name") 
```

我想自动化这个过程，这样我的程序就可以有这样的一行：

```
input = inputize.function1("name_of_file.csv") 
```

其中 function1 获取输入文件（“name_of_file.csv”）并返回，在本例中是一个包含三个字符串（“First Name”、“Middle Name”、“Last Name”）的元组。正如您可以想象的那样，这现在很痛苦，因为我必须为很多文件手动执行此操作，其中许多文件有很多列......

我想我希望基本结构如下所示，但我一直认为必须有一种非常简单的方法来获取 csv 文件的第一行，分隔每个列标题，在其周围加上引号，并在其后加上逗号，然后将整个内容存储为元组...

```
def function1(input_file):

  with open(input_file, "rb") as infile:
       for line in infile:
           split = line.split(",")
           for item in split:
               input = '"' + item + '","
           return input 
```

我希望这对其他人也有帮助，因为它似乎是一个足够常见/超级烦人的手动任务，并且肯定会感谢任何指导。

**附录**

我一直在写这样的代码：

```
input_fields = ("First Name", "Middle Name", "Last Name")
reader = csv.DictReader(infile, fieldnames = input_fields) 
```

根据您在下面的回答，似乎最重要的是没有实际意义，因为我所要做的就是：

```
reader = csv.DictReader(infile) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:54:32.260

你可以使用[`DictReader`](http://docs.python.org/2/library/csv.html#csv.DictReader)它有一个 fieldnames 属性！

```
reader = DictReader(open('name_of_file.csv'))
reader.fieldnames 
```

使用内置的 DictReader 将帮助您解决解析 csv 文件所涉及的一些细微差别。

# git - git：合并来自多个分支的更改

> ID：13201340
> 
> 赞同：1
> 
> 时间：2012-11-02T18:52:18.597
> 
> 标签：git

我正在研究功能分支*fb1*并意识到我需要一些新功能，但它们应该发生在*master*上。所以我将 master 分支到*fb2*并构建了我的功能。

现在 fb2 需要在我将其合并到 master 之前进行测试，但我想同时继续处理 fb1。但是我需要 fb1 来包含 fb2 上的更改。他们都需要与主人保持同步。

我试图从两个分支合并，也喜欢 fb1 < fb2 < master，但是这两个分支都很快变得丑陋，我最终退出了。

如果有人有建议，我会为此学习一个新的工作流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:01:05.030

您可以将 fb1 重新设置为 fb2：

```
git rebase --onto fb2 master fb1 
```

Git 将接受 master 和 fb1 之间的提交，并在看起来相同的 fb2 之上重新创建它们。不要对已发布的历史进行变基，并确保您了解其中的含义。对于首次使用 rebase 的用户，建议备份 ;)

# java - “找不到符号”为什么？

> ID：13201342
> 
> 赞同：1
> 
> 时间：2012-11-02T18:52:21.313
> 
> 标签：java

因此，我正在为一个模拟网站的编程类编写代码，客户可以在该网站上购买产品并将其添加到购物车中。我做了一个产品和购物车类。它们都在某个目录中，并且它们的 .class 文件在同一个包中。那么为什么我在编译我的 Cart 类时在 Product 上得到“找不到符号”？请帮忙！和 ty

购物车类：

```
package com.DownloadThis;

import java.util.ArrayList;

public class Cart {

private ArrayList<Product> myCart;

public Cart() {
myCart = new ArrayList<Product>();
}

public void addProduct(Product p) {
myCart.add(p);
}

public float getTotal() {
float totalPrice = 0;
for(int i = 0; i < myCart.size(); i++) {
  Object obj = myCart.get(i);
  Product p = (Product)obj;
  totalPrice = totalPrice + p.getPrice();
}
return totalPrice;
}

public void addToCart(int product_id) {

}
} 
```

产品类别：

```
package com.DownloadThis;

import java.sql.*;

public class Product {

private String artist;
private String album;
private int year;
private String genre;
private float price;
private String albumart;
private String username;
private String password;

private Connection connection = null;
private ResultSet rs = null;
private Statement st = null;

public Product() {
}

public Product(String artist, String album, int year, String genre, float price, String albumart) {
 this.artist = artist;
 this.album = album;
 this.year = year;
 this.genre = genre;
 this.price = price;
 this.albumart = albumart;
}

public String getArtist() {
    return this.artist;
}

public void setArtist(String artist) {
    this.artist = artist;
}

public String getAlbum() {
    return this.album;
}

public void setAlbum(String album) {
    this.album = album;
}

public int getYear() {
    return this.year;
}

public void setYear(int year) {
    this.year = year;
}

public String getGenre() {
    return this.genre;
}

public void setGenre(String genre) {
    this.genre = genre;
}

public float getPrice() {
    return this.price;
}

public void setPrice(float price) {
    this.price = price;
}

public String getAlbumart() {
    return this.albumart;
}

public void setFilename(String albumart) {
    this.albumart = albumart;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:56:12.820

编译时，您必须在上层文件夹中 - 即，因为您的包名称是 com.DownloadThis，所以您应该位于“com”文件夹之上（如果您从命令行发出 dir，您应该会看到 com 文件夹结果中）。

com 文件夹应包含 DownloadThis 文件夹（名称区分大小写），该文件夹又必须包含您的 .class 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:08:09.353

我可以通过运行“javac *”直接从 ../com/DownloadThis/ 编译这两个文件

# ios - 主/详细信息中的 UIGestureRecognizer 用于干扰子视图的对角线移动

> ID：13201343
> 
> 赞同：2
> 
> 时间：2012-11-02T18:52:24.090
> 
> 标签：ios, uigesturerecognizer, diagonal

我有一个具有特定视图的主详细信息模板应用程序，该视图需要禁用手势（特别是向右滑动，因为它会启动 UISplitViewController 下的表格视图）。我已将以下代码片段添加到我的视图的 ViewDidLoad 中，它似乎可以很好地处理向上/向下/向右/向左的滑动。问题是，对于某种类型的手势，从下/左到上/右或从上/左到下/右的对角线运动会触发，并且偶尔会调出表格视图。如果移动很慢，它不会，但如果快速对角线移动它会打断我的视图绘制动作。

```
- (void)viewDidLoad {

[super viewDidLoad];

UISwipeGestureRecognizer * recognizerR = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeRight:)];
recognizerR.direction = UISwipeGestureRecognizerDirectionRight;

recognizerR.cancelsTouchesInView = NO;
recognizerR.delegate = self;

 [self.view addGestureRecognizer:recognizerR];
} 
```

我对 IOS/Obj C 编程有点陌生，所以请耐心等待。

# php - smarty 出错（模板中的语法错误）

> ID：13201345
> 
> 赞同：0
> 
> 时间：2012-11-02T18:52:41.750
> 
> 标签：php, javascript, smarty

页面出现错误，我使用 smarty 作为模板

错误聪明的是：

```
 Fatal error: Uncaught exception 'SmartyCompilerException' with message
 'Syntax Error in template &quot;.\templates\footer.tpl&quot; 
on line 72 &quot;var reg = /^(([^&amp;lt;&amp;gt;()[\]\\.,;:\s@\&amp;quot;]+(\.[^&amp;lt;&amp;gt;()[\]\\.,;:\s@\&amp;quot;]+)*)|(\&amp;quot;.+\&amp;quot;))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;&quot; 
```

第 72 行是（js）：

```
<script type="text/javascript">
    function validateEmail(email) { 
        var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return reg.test(email);
    }
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:59:21.200

使用[{literal}](http://www.smarty.net/docsv2/en/language.function.literal.tpl)标签转义这些可能冲突的部分。

我引用：

> {文字}
> 
> {literal} 标签允许按字面意思获取数据块。这通常用于 Javascript 或样式表块，其中 {花括号} 会干扰模板分隔符语法。{literal}{/literal} 标记中的任何内容都不会被解释，而是按原样显示。如果您需要在 {literal} 块中嵌入模板标签，请考虑使用 {ldelim}{rdelim} 来转义各个分隔符。

# c++ - 没有与这些操作数匹配的运算符

> ID：13201347
> 
> 赞同：0
> 
> 时间：2012-11-02T18:52:51.437
> 
> 标签：c++

在尝试显示信息时，我还收到“无运算符“<<”匹配这些操作数”错误。

```
 cout << (<- error with these) PrintHex(ASphere.CalcCircumference()) << endl; 
```

我环顾四周，大多数人说这是因为缺少#include。但是，我认为我拥有我需要包括的一切。（在我尝试显示函数中的信息之前，它也不会成为问题。）

```
#include <iostream>
#include <iomanip>
#include <string> 
```

我的功能看起来像这样。

```
void PrintHex(int InNum)
{
cout << hex << setiosflags (ios_base::showbase) << InNum;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:54:20.093

`PrintHex`已经在`std::cout`内部调用，所以没有理由把它放在另一个`std::cout`调用中。

```
PrintHex(ASphere.CalcCircumference()); 
```

这就是打印所需要做的一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:54:22.743

您正在尝试打印返回 a 的函数的输出`void`，这意味着*什么都没有*。

如果你想打印任何东西，请从你的函数中返回一些东西。

您可以：

*   只需`PrintHex(ASphere.CalcCircumference());`从里面调用和打印（你已经做了什么）
*   从您的函数中返回 a`stringstream`或 a ，然后通过调用`string`打印它`cout`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T18:54:36.113

说啊：

```
PrintHex(ASphere.CalcCircumference()); 
```

您的函数不适合与 一起使用`<<`，因为它不返回任何内容。

# javascript - 这个网站是怎么做的？div对齐并相互粘连

> ID：13201350
> 
> 赞同：0
> 
> 时间：2012-11-02T18:53:01.297
> 
> 标签：javascript, jquery, html, css, alignment

示例：http: [//jsfiddle.net/BpYZn/](http://jsfiddle.net/BpYZn/)

这是我想要得到的： [http ://www.akinyapin.com/](http://www.akinyapin.com/)

根据浏览器大小，div 从每行 3 个重新排列为每行 5 个（也许更多，我的屏幕是 1366 × 768，无法检查）。

我试着让 div 元素与 float 属性对齐。它部分工作，它们根据浏览器大小缩小到每行 3 个，但它们不会“粘”在一起。不同行中的 div 之间有很大的差距。

第二个网站使用“位置：绝对”。有没有人可能知道的那种事情的脚本？

这是div的css

```
.box1{
padding:7px;
position:relative;
margin:1px;
background-color:white;
width:230px;
min-height:200px;
float:left;
-webkit-border-radius: 2px;
-webkit-user-select: none;
-moz-user-select: none;
-khtml-user-select: none;
user-select: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:00:13.877

该网站使用了一个名为[Masonry](http://masonry.desandro.com/)的 javascript 插件，它正在做堆叠 div 的魔法。我看不到这种效果是用纯 CSS 实现的。

# ruby-on-rails - Rails 渲染 javascript 显示文本

> ID：13201351
> 
> 赞同：0
> 
> 时间：2012-11-02T18:53:09.250
> 
> 标签：ruby-on-rails, ruby, ajax

我不确定这种行为是否正常，但是当我这样做时：

```
渲染 js：“window.location.pathname = '#{new_user_session_path}';”

```

`window.location.pathname = '/user/sign_in';`在我的控制器中，它会在执行该行并成功重定向之前简要显示文本。

这是完整的控制器操作：

```
def vote_down
    如果 user_signed_in?
      current_user.vote_exclusively_against(@deal = Deal.find(params[:id]))

      渲染：partial => '交易/部分/交互'，
        :locals => {:deal => @deal, :votes_for => @deal.votes_for, :votes_against => @deal.votes_against}
    别的
      渲染 js：“window.location.pathname = '#{new_user_session_path}';”
      flash[:error] = '请登录投票。'
    结尾
  结尾

```

如何防止这种情况发生并直接渲染该模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:56:24.920

为什么不直接使用 rails 控制器路由重定向回 new_user_session_path？

```
respond_to do |format|
   format.html { redirect_to new_user_session_path, error: 'Please sign in to vote.' }
end 
```

# algorithm - 平均情况下的算法分析

> ID：13201352
> 
> 赞同：1
> 
> 时间：2012-11-02T18:53:11.293
> 
> 标签：algorithm, complexity-theory, calculus

我正在尝试解决一个非常简单的算法分析（显然对我来说不是那么简单）。

算法是这样的：

```
int findIndexOfN(int A[], int n) {
// this algorithm looks for the value n in array with size of n.
// returns the index of n in case found, otherwise returns -1.
// it is possible that n doesn't appear in the array.
// n appears at most one time.
// the probability that n doesn't appear in the array is $1/(n+1)$
// for each cell in the array, the probability that n is found in index i
// is $1/(n+1)$

    int index, fIndex;
    index = 0;
    fIndex = -1;
    while (index < n && fIndex == -1) {
      if(A[index] == n) {
        fIndex = index;
      }
      index++;
    }
    return fIndex;

 } 
```

现在我正在尝试计算平均运行时间。我认为这是几何系列，但我找不到在概率和复杂性这两个术语之间进行合并的方法。

例如，我知道如果在索引 1 中找到值 n，则需要 1 个循环步骤来获取第二个索引 (1) 并找到 n。

另一方面，概率给了我一些分数......

这是我到目前为止得到的：

$\sigma 从 i=1 到 n 评估 ( (1/n) * ((n-1)/n)^i-1 )

但同样，我找不到这个公式与 T(n) 的联系，也找不到这个函数的 BigOh、BigOmega 或 Theta 的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:01:29.913

该算法是 BigOh(n)、BigOmega(n) 和 Theta(n)。

要知道这一点，您不需要计算概率或使用主定理（因为您的函数不是递归的）。您只需要看到该函数就像是对`n`术语的循环。如果您像这样表示您的功能，也许会更容易：

```
for (int i = 0; i < n; ++i) {
    if (A[i] == n)
        return i;
} 
```

我知道这似乎违反直觉，因为 if`n`是数组的第一个元素，实际上您只需要一个操作即可找到它。这里重要的是*一般情况*，在`n`你的数组中间的某个地方。

让我们这样说：给定你写的概率，元素和数组`n`之间有 50% 的机会。在这种情况下，您需要 between和测试来找到您的元素，该元素的计算结果为（在进行 BogOh 分析时删除常量）。`n/4``3n/4``n/4``3n/4``O(n)`

如果您想知道您需要的平均操作数，您可以计算一个系列，就像您在问题中写的那样。为您提供平均操作次数的实际系列是

```
1/(n+1) + 2/(n+1) + 3/(n+1) ... + n/(n+1) 
```

为什么？因为您需要一个测试是否`n`在第一个位置（概率为`1/(n+1)`），两个测试是否`n`在第二个位置（概率为`1/(n+1)`），...`i`测试是否`n`在第`i`th 位置（概率为`1/(n+1)`）

该系列评估为

```
n(n+1)/2 * 1/(n+1) = n/2 
```

# c# - Observable.FromEvent & CreateDelegate 参数映射

> ID：13201355
> 
> 赞同：12
> 
> 时间：2012-11-02T18:53:33.930
> 
> 标签：c#, delegates, system.reactive

我在看的实施

```
Observable.FromEvent<TEventHandler, TEventHandlerArgs>(add, remove) 
```

我正在努力理解它是如何工作的。让我们说 TEventHandler 是标准：

```
public delegate void EventHandler(object sender, EventArgs e); 
```

那么让我困惑的代码是：

```
TEventHandler d = (TEventHandler) Delegate.CreateDelegate(
    typeof (TEventHandler),
    (object) new Action<EventArgs>(observer.OnNext),
    typeof (Action<EventArgs>).GetMethod("Invoke")); 
```

（注意，我已将此通用代码专门用于此特定示例实例。）

CreateDelegate 如何创建一个签名委托 (obj, args)，该委托绑定到操作上的签名 (args) 调用方法？obj去哪儿了？

感觉有点像可能有一个开放的行动代表，我们正在从 CreateDelegate 强制“this”成为“firstArguemnt”，并允许 args 失败。如果是这样感觉有点脏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T00:03:48.757

让我们分解一下：

首先，反编译 Rx v2.0.3 似乎没有`Observable.FromEvent<TEventHandler, TEventHandlerArgs>(add, remove)`方法，我碰巧躺在身边的 Rx v 1.1 也没有。我将假设您的意思是我能找到的最接近的匹配项，即：

```
public static IObservable<TEventArgs> FromEvent<TDelegate, TEventArgs>(Action<TDelegate> addHandler, Action<TDelegate> removeHandler) 
```

查看 Rx 1.1 的反编译源代码（2.0 源代码已经把所有架构宇航员都放在了我们身上，并且充满了间接性，这使得它更难理解）使用反射器进行反编译的实际代码片段是这样的：

```
Action<TEventArgs> o = new Action<TEventArgs>(observer.OnNext);
    TDelegate d = CreateDelegate<TDelegate>(o,
        typeof(Action<TEventArgs>).GetMethod("Invoke"));

    addHandler(d); 
```

所以，问题：

> > CreateDelegate 如何创建一个签名委托 (obj, args)，该委托绑定到操作上的签名 (args) 调用方法？obj去哪儿了？

我不确定我的理解是否完全正确，但似乎这个问题具体是*如何`CreateDelegate<TDelegate>(o, typeof(Action<TEventArgs>).GetMethod("Invoke")`产生一个只有`args`参数的方法 -`o`对象会发生什么？*

发生的事情是，是的，`o`对象被传递`object firstArgument`给内部 .NET 框架方法。

```
public static Delegate CreateDelegate(Type type, object firstArgument, MethodInfo method, bool throwOnBindFailure) 
```

此方法“绑定” firstArgument 基本上是`this`返回方法的指针。在内部，它将在委托对象内的某处存储对 firstArgument 的引用。我们看不到它的内部，因为它是一个内部的 .NET 实现细节，所以它可以做各种奇怪的事情，并在它喜欢的地方打破规则。

> > 感觉有点像可能有一个开放的行动代表，我们正在从 CreateDelegate 强制“this”成为“firstArguemnt”，并允许 args 失败。如果是这样感觉有点脏？

是的，这几乎就是正在发生的事情。这就是该`CreateDelegate`功能的设计目的。
除了它变得比那更脏。`CreateDelegate`简单地返回一个类型的对象`Delegate`——我们在方法 args 等上没有类型安全性——然后代码将其转换为 a——这是`TDelegate`有效的，因为委托是特殊的，您可以将其转换为具有相同“形状”的任何函数类型. 如上所述，它是一个内部 .NET 实现细节，因此它可以做各种奇怪的事情 :-)

# php - 如何在 zend 框架 2 或 AjaxContext 中使用 ajax？

> ID：13201361
> 
> 赞同：1
> 
> 时间：2012-11-02T18:54:06.303
> 
> 标签：php, jquery, request, render, zend-framework2

`AjaxContext`helper 是 ZF1 中的一个简洁功能，我在很多地方都使用了它。

我想知道这是否在 ZF2 中可用。

我做了一个测试并补充说：

```
public function init()
{
    $ajaxContext = $this->_helper->getHelper('AjaxContext');
    $ajaxContext->addActionContext('input', 'html')
                ->addActionContext('number', 'html')
                ->initContext();
} 
```

在控制器中，添加了一个动作：

```
public function inputAction()
{
    $form = new AddInput();

    return ['form' => $form];
} 
```

一份文件`input.ajax.phtml`

和一个ajax调用：`$.get('/form/input/format/html').css("display","block");`

请求通过正常，带有`200`代码，但我收到渲染错误

```
Fatal error: Uncaught exception 'Zend\View\Exception\RuntimeException' with message 'Zend\View\Renderer\PhpRenderer::render: Unable to render template "form/index/input"; resolver could not resolve to a file' in C:\xampp\htdocs\Zend-Project\vendor\zendframework\zendframework\library\Zend\View\Renderer\PhpRenderer.php on line 454

( ! ) Zend\View\Exception\RuntimeException: Zend\View\Renderer\PhpRenderer::render: Unable to render template "form/index/input"; resolver could not resolve to a file in C:\xampp\htdocs\Zend-Project\vendor\zendframework\zendframework\library\Zend\View\Renderer\PhpRenderer.php on line 454

#   Time    Memory  Function    Location
1   0.0003  139048  {main}( )   ..\index.php:0
2   0.0969  4288136 Zend\Mvc\Application->run( )    ..\index.php:12
3   0.1463  6125720 Zend\Mvc\Application->completeRequest( )    ..\Application.php:310
4   0.1463  6125832 Zend\EventManager\EventManager->trigger( )  ..\Application.php:326
5   0.1463  6125904 Zend\EventManager\EventManager->triggerListeners( ) ..\EventManager.php:208
6   0.1464  6127112 call_user_func ( )  ..\EventManager.php:468
7   0.1464  6127128 Zend\Mvc\View\Http\DefaultRenderingStrategy->render( )  ..\EventManager.php:468
8   0.1464  6127176 Zend\View\View->render( )   ..\DefaultRenderingStrategy.php:128
9   0.1465  6128304 Zend\View\View->renderChildren( )   ..\View.php:196
10  0.1465  6128936 Zend\View\View->render( )   ..\View.php:231
11  0.1466  6129560 Zend\View\Renderer\PhpRenderer->render( )   ..\View.php:203 
```

任何想法出了什么问题，或者可能是替代方案？谢谢。

编辑：

如果我这样做，使用`DefaultRenderingStrategy`：

```
public function inputAction()
{
    $result = new ViewModel(array('some_parameter' => 'some value',));
    $result->setTerminal(true);
    return $result;
} 
```

`var_dump($this->result);`我去拿`null`

编辑2：

感谢@Sam，我设法让它工作。这是我的步骤：

`javascript`

```
$.get('/form/input', { name: "John", time: "2pm" }).done(function(data) {
    $('#some_div').append(data);
}); 
```

`controller`

```
public function inputAction()
{
    $request = $this->getRequest();
    $results = $request->getQuery();  // this is the get string

    $result = new ViewModel(['result' => $results]);
    $result->setTerminal(true);

    return $result;
} 
```

`view`

```
<?php
echo '<div>'.$this->result->name.'</div>'; 
```

结果将是`<div>John</div>`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:29:44.630

查看[JsonStrategy](http://akrabat.com/zend-framework-2/returning-json-from-a-zf2-controller-action/)。

此外，如果您希望返回完整视图（分离布局），只需返回一个 ViewModel`$viewModel->setTerminal(true)`即可。

# android - setOnItemClickListener 没有被调用

> ID：13201363
> 
> 赞同：0
> 
> 时间：2012-11-02T18:54:11.463
> 
> 标签：android, onclicklistener

我在 onCreate 方法中有这个，如下所示：

```
 ListView lv = (ListView)findViewById(android.R.id.list);
   adapter = new ModuleAdapter(this);
   lv.setAdapter(adapter);
   lv.setOnItemClickListener(this); 
```

然后在后面的代码中：

```
 @Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub
    Log.v(TAG, "clicked");

} 
```

OnItemClickListener 正在实施。

我正在尝试从 onItemClick 触发一个新活动，但它似乎没有工作。

刚接触Android，对java不太了解。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:05:13.673

```
ListView lv = (ListView)findViewById(android.R.id.list); 
```

如果您尝试获取 android 系统资源，但您想要在 xml 布局中描述的列表视图。

假设它看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

所以你需要将你的代码更改为

ListView lv = (ListView)findViewById(R.id.listView1);

一些解释：

*   `android.R`- 它是 Android 操作系统的默认资源 - 比如按钮、图像、列表视图项目布局等。

*   `R`- 它是你的项目资源完整路径喜欢 [你的包路径].R 例如：com.example.R

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:35:42.640

在 xxx_row.xml 中尝试此更改

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:enabled="false">
</TextView> 
```

至少对我来说，当我更改宽度和启用属性时它起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T00:23:31.660

您是否在布局中将 FocusableInTouchMode 设置为 true？如果是这样，则不会调用 onItemClick。

# java - 如何在 Java 桌面应用程序中添加 Flash 动画

> ID：13201365
> 
> 赞同：0
> 
> 时间：2012-11-02T18:54:17.080
> 
> 标签：java, flash

在我的 java 程序中，我想在一些用户界面中添加一个动画徽标。我使用了这段代码，但它不起作用。我还添加了 jflashplayer jar。窗台它不起作用。有人可以提出解决方案吗？

```
try {
    FlashPanel fp = new FlashPanel(new File("C:\\Users\\ASHAN\\Desktop\\grandmsz.swf"));
    jPanel1.add(fp);
    fp.isOpaque();
    fp.play();
} catch (JFlashLibraryLoadFailedException ex) {
    Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
} catch (JFlashInvalidFlashException ex) {
    Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
} catch (FileNotFoundException ex) {
    Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
} 
```

# php - 使用 PHP 以编程方式将 CSS 注入 Joomla 内容编辑器 (JCE)？

> ID：13201369
> 
> 赞同：3
> 
> 时间：2012-11-02T18:54:29.297
> 
> 标签：php, css, joomla, editor, joomla-component

我想在 JCE 编辑器 iframe 中仅针对特定页面嵌入样式表，最好使用 PHP。现在，JCE 管理界面允许您为在管理控制面板中加载 JCE 的每个实例全局设置样式表，并按单个用户配置文件进行设置。但是，我正在创建自定义组件来加载编辑器以进行显示，如下所示：

```
<?php
$editor = JFactory::getEditor();  // JCE set by default
echo $editor->display(); 
```

我希望能够根据组件的不同部分加载不同的样式表。据我所知，这并不存在开箱即用，所以我想看看是否有一些 API 方法可以帮助我实现这一目标。

就像是：

```
<?php
$editor = JFactory::getEditor();  // JCE set by default

// calculate whether additional styles may be needed...
if (true === $needs_more_stylesheets_bool) {
   // Would be nice to do something like
   $editor->addStylesheet('specific_styles.css');
   // Or
   $editor->addInlineStyle('body{background:green}');
   // Or
   $editor->removeStylesheet('general_styles.css'); 

   // Or... with adding/editing user profiles... 
   $editor->loadUserProfile('user_2_with_different_stylesheets');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:55:23.367

我会建议你如何添加一些内联样式，你可以继续使用相同的方法编辑器类位于 root/libraries/joomla/html/editor.php

绕线你会发现显示功能

```
public function display($name, $html, $width, $height, $col, $row, $buttons = true, $id = null, $asset = null, $author = null, $params = array())
    {
        ...
        ...
$width = str_replace(';', '', $width);
        $height = str_replace(';', '', $height);

        // Initialise variables.
        $return = null;

        $args['name'] = $name;
        $args['content'] = $html;
        $args['width'] = $width;
        $args['height'] = $height;
        $args['col'] = $col;
        $args['row'] = $row;
        $args['buttons'] = $buttons;
        $args['id'] = $id ? $id : $name;
        $args['event'] = 'onDisplay';
                ...
} 
```

我会尝试传递我的内联样式

```
public function display($name, $html, $width, $height, $col, $row, $buttons = true, $id = null, $asset = null, $author = null, $params = array(),$inlinestyles){
...
$args['inlinestyles'] = $inlinestyles;
...
} 
```

现在我们必须编辑位于 root/plugins/editors/jce/jce.php 中的 jce.php 文件

正如您在参数事件中看到的，我们将更改 onDisplay 事件

108号线附近

```
public function onDisplay($name, $content, $width, $height, $col, $row, $buttons = true, $id = null, $asset = null, $author = null) {
... 
return $editor;
    } 
```

现在我们将更改此函数并使用 JDocument 来解析我们的样式

```
public function onDisplay($name, $content, $width, $height, $col, $row, $buttons = true, $id = null, $asset = null, $author = null,$inlines) {
//blah blah some code
//here comes the fun part
if($inlines){
$document =& JFactory::getDocument();
$document->addStyleDeclaration($inlines);
}

} //end of ondisplay 
```

现在在您的组件中，您必须调用您的编辑器，因为它记录在 Joomla 的文档中

```
$inlines= 'BODY {'
        . 'background: #00ff00;'
        . 'color: rgb(0,0,255);'
        . '}'; 
$editor = JFactory::getEditor();
echo $editor->display("jobdesc", ""/*$itemData['body']*/, "400", "100", "150", "10", 1, null, null, null, array('mode' => 'advanced'),$inlines); 
```

[http://docs.joomla.org/JFactory/getEditor](http://docs.joomla.org/JFactory/getEditor)

# jquery - JQuery Mobile 无法将 GPS 坐标拉入 googlemaps

> ID：13201372
> 
> 赞同：1
> 
> 时间：2012-11-02T18:54:42.540
> 
> 标签：jquery, google-maps, mobile, gps

我有一个我正在构建的应用程序的 div 移动页面。当我定义：

```
var latitude = position.coords.latitude;
var longitude = position.coords.longitude; 
```

无论是在我的功能内，还是在它之外，然后尝试在以下位置使用它们：

```
latlng1 = new google.maps.LatLng(latitude, longitude); 
```

我的页面没有加载，只给了我 CSS 边框等

但是，如果我只是简单地删除`(latitude, longitude);`并放入`(40.716948, -74.003563);` 它就`latlng1 = new google.maps.LatLng(40.716948, -74.003563);`可以了。

**为什么定义的变量值没有传递到 LatLng ？**

这是源代码的 div 部分：

```
<!-- My Location -->
<div data-role="page" data-theme="b" id="my_loc" class="page-map1">

  <div data-role="header" data-theme="a">
    <a href="#home" data-icon="arrow-l">Back</a>
    <h1>My Location</h1>
  </div>

  <div data-role="content">

    <h2>Map</h2>

    <div id="map1" class="gmap"></div>

      <script type="text/javascript">
        var map1, latlng1, options1, latitude, longitude;

        //these lat and long variable definitions are messing me up !!
        //latitude = position.coords.latitude;
        //longitude = position.coords.longitude;

        function initialize() { 
          latlng1 = new google.maps.LatLng(latitude, longitude);
          //40.716948, -74.003563);
          //Lat, Lon); 
          //(position.coords.latitude, position.coords.longitude);
          //40.716948, -74.003563); change from new jersey
          options1 = { zoom: 14, center: latlng1, mapTypeId:google.maps.MapTypeId.ROADMAP };
          map1 = new google.maps.Map(document.getElementById("map1"), options1);
        }

        $('.page-map1').live("pagecreate", function() {
          initialize();
        });

        $('.page-map1').live('pageshow',function(){
          console.log("test");
          google.maps.event.trigger(map1, 'resize');
          map1.setOptions(options1); 
        });
      </script>

    </div>
  </div>

  <div data-role="page" id="map" data-theme="a">
    <div data-role="header" data-position="fixed">
      <h1>Page Header</h1>
    </div>
    <div data-role="content">
      <p class="errorMsg">Your location could not be determined.</p>
      <div id="gMap"></div>
    </div>
    <div data-role="footer" data-position="fixed">
      <h4>TRACK</h4>
    </div>
  </div>
  <!-- /My Location -->
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:02:08.317

您的经度和纬度变量显然没有被填充。为了填充它们，您肯定需要先调用 navigator.geolocation.getCurrentPosition 方法吗？但即使在那个阶段之前，您也要确保浏览器支持地理定位（检查 navigator.geolocation 布尔值）。

查看[本教程](http://www.w3schools.com/html/html5_geolocation.asp)并将您的逻辑调整为更像这样。一旦你这样做了，alert/console.log 你的经度和纬度变量，以确保它们实际上被填充。

# c# - 增强互操作格式条件性能

> ID：13201384
> 
> 赞同：0
> 
> 时间：2012-11-02T18:55:23.663
> 
> 标签：c#, excel, interop

我有一个工具，它使用 Interop 并使用大量条件格式数据栏在 Excel 中生成报告。

我发现通过 Interop 添加条件格式时性能受到巨大影响。

问题是：有没有办法提高互操作条件格式的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:55:23.663

而今天，经过大量搜索甚至考虑完全重写我的代码以使用不同的 OpenXML 库，我终于在 MSDN 中找到了解决方案：

[Worksheet.EnableFormatConditionsCalculation 属性](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.enableformatconditionscalculation.aspx)

只需在使用 Interop 添加条件格式之前添加这行代码，您就会发现应用程序的性能得到了巨大的提升：

```
// Disable conditional format calculations to enhance speed
Sheet.EnableFormatConditionsCalculation = false; 
```

希望这对其他人有所帮助，因为我一直在寻找这个，直到今天我才找到它。:)

*注意：显然，您不需要在保存 Excel 之前将此属性设置回 true。到目前为止，我保存的 Excel 在我打开它们时启用了条件格式计算，即使在使用 Interop 保存它们时我也没有将其设置回 true。*

# bash - 删除字段中的所有重复条目

> ID：13201392
> 
> 赞同：4
> 
> 时间：2012-11-02T18:55:47.097
> 
> 标签：bash, sed, awk

我有一个格式如下的文件：

```
text   number   number   A;A;A;A;A;A
text   number   number   B
text   number   number   C;C;C;C;D;C;C;C;C 
```

我想要做的是删除第四列中条目的所有重复项，以结束：

```
text   number   number   A
text   number   number   B
text   number   number   C;D 
```

我更喜欢使用 bash 脚本作为解决方案，以适应我正在对该文件进行的其他文本操作的管道。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:13:34.263

可以使用`awk`. 使用 ; 将字段 4 拆分为数组 第一的

```
awk '{delete z; d=""; split($4,arr,";");for (k in arr) z[arr[k]]=k; for (l in z) d=d";"l; print($1,$2,$3,substr(d, 2))}' file_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:09:42.440

这可能对您有用（GNU sed）：

```
sed 's/.*\s/&\n/;h;s/.*\n//;:a;s/\(\([^;]\).*\);\2/\1/;ta;H;g;s/\n.*\n//' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T23:46:40.777

假设制表符分隔的输入，您可以使用 GNU 并行执行此操作：

```
parallel -C '\t' c4='$(echo {4} | tr ";" "\n" | sort -u | head -c-1 | tr "\n" ";");' \
                 echo -e '"{1}\t{2}\t{3}\t$c4"' :::: infile 
```

输出：

```
text    number  number  A
text    number  number  B
text    number  number  C;D 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T10:37:55.523

这也可能有效

```
awk -F";" '{
              delete words
              match($1,/[[:alpha:]]$/)
              words[substr($1,RSTART,RLENGTH)]++
              printf "%s",$1
              for (i=2;i<=NF;i++){
                if (!words[$i]++) printf ";%s",$i
              }
              printf "\n"
           }' file 
```

笔记：

1.  由于`;`用作字段分隔符，因此之前有多少列（或用于这些列的分隔符）并不重要`A;A;A;A;A;A`

2.  `/[[:alpha:]]$/`可以替换`/[^[:space:]]+$/`为匹配多个非空格字符而不是单个字母。

3.  `if (!words[$i]++) printf ";%s",$i`如果列/字符不作为关联数组的键存在，则打印列/字符`words`，即如果`words[$i]`为 0。

# javascript - highchart xaxis 和随机 y 值

> ID：13201398
> 
> 赞同：0
> 
> 时间：2012-11-02T18:56:13.087
> 
> 标签：javascript, highcharts

我已经为此工作了几个小时，但无法弄清楚，如果有人可以提供帮助，我将不胜感激。

```
$(function() {
    $(document).ready(function() {
        Highcharts.setOptions({
            global: {
                useUTC: false
            }
        });

        var chart;
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
                marginRight: 10,
                events: {
                    load: function() {

                        // set up the updating of the chart each second
                        var series = this.series[0];
                        setInterval(function() {
                            var x = (new Date()).getTime(),
                                // current time
                                y = Math.random();
                            series.addPoint([x, y], true, true);
                        }, 1000);
                    }
                }
            },
            title: {
                text: 'Live random data'
            },
            xAxis: {
                 type: 'datetime' ,
                tickPixelInterval: 150                
        },
            yAxis: {
                max: 400,
                min: 0,  
                plotLines: [{
                    value: 200,
                    width: 1,
                    color: '#ccc',
                    }]

            },
            tooltip: {
                enabled: false
            },
            legend: {
                enabled: false
            },
            exporting: {
                enabled: false
            },
            series: [{
                name: 'Random data',
                data: (function() {
                    // generate an array of random data
                    var data = [],
                        time = (new Date()).getTime(),
                        i;

                    for (i = -19; i <=0; i++) {
                        data.push({
                            x: time + i * 1000,
                            y: time + 4 * 50
                        });
                    }
                    return data;
                })()}]
        });
    });

});​ 
```

这是我正在尝试做的事情：

1.  我喜欢从 00:00 开始并以 5 秒为增量运行，而不是 xAxis 上的当前时间。
2.  我也想让 Y 值有随机数，不知道为什么它不起作用
3.  最后，我想从另一个元素中获取值，并相应地在图表上绘制一条水平线。

谢谢你看...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:03:28.107

1 - 保持秒的运行计数器 ( `i`) 并用于`setHours()`设置小时、分钟、秒和毫秒......不过，您真正关心的唯一一个是秒。

```
var i = 0;
setInterval(function() {
  var x = (new Date((new Date()).setHours(0,0,i,0)).getTime()),
  y = Math.random()*400;
  series.addPoint([x, y], true, true);
  i++; 
}, 1000); 
```

2 - 将你乘以[`Math.random()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random)某个值（比如你的最大值）。

[`Math.random()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random)：

> 返回 [0, 1) 范围内的浮点伪随机数，即从 0（包括）到但不包括 1（不包括），然后您可以将其缩放到所需的范围。

3 - 有点不清楚你在找什么，你介意指定吗？

**[例子](http://jsfiddle.net/Ruz4A/106/)**

# android - 列表视图崩溃的自定义适配器

> ID：13201401
> 
> 赞同：0
> 
> 时间：2012-11-02T18:56:25.287
> 
> 标签：android, listview, adapter

这个问题已经解决了。发现这是一个简单的错字，我引用了错误的布局文件。

我正在尝试为列表视图创建一个自定义适配器，以便我可以显示一个（不可编辑的）评级栏，其评级值是我的程序从数据库中为菜单中的每个项目获得的评级值。当我运行它时，它崩溃了，我不知道为什么。

这是尝试创建列表视图的方法。`SetBogusFoodArray2()`返回在另一个类中定义的菜单项的 ArrayList。这一切都正常工作。

```
private void setupMenu2(){
    ArrayList<MenuItem> menu = setBogusFoodArray2();        
    MenuAdapter myMenuAdapter = new MenuAdapter(this, menu);
    ListView menuList = (ListView) findViewById(R.id.listView1);

    menuList.setAdapter(myMenuAdapter);
} 
```

这是我的适配器的定义。

```
public class MenuAdapter extends BaseAdapter{
    private Context context;
    private List<MenuItem> myMenu = new ArrayList<MenuItem>();

    public MenuAdapter(Context context, ArrayList<MenuItem> menu){
        context = context;
        myMenu = menu;
    }

    public int getCount() {
        return myMenu.size();
    }

    public Object getItem(int position) {
        return myMenu.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View myView = convertView;
        MenuItem myFood = (MenuItem) getItem(position); 
        if (convertView == null){
            LayoutInflater inf = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            myView = inf.inflate(R.layout.hall_list_item, null);
        }

        TextView name = (TextView) myView.findViewById(R.id.textView1);
        TextView hall = (TextView) myView.findViewById(R.id.textView2);
        RatingBar rating = (RatingBar) myView.findViewById(R.id.ratingBar1);

        name.setText(myFood.myName);
        hall.setText(myFood.myHall);

        rating.setRating(myFood.myRating);

        return myView;
    }
} 
```

任何帮助将不胜感激！以下是 logcat 中的前几个错误。如果你想看更多，还有更多的红色！

11-02 18:10:36.284：E/AndroidRuntime(619)：致命异常：主要 11-02 18:10:36.284：E/AndroidRuntime(619)：java.lang.NullPointerException 11-02 18:10:36.284： E/AndroidRuntime(619): 在 edu.calvin.cs.dininghall4.MenuAdapter.getView(MenuAdapter.java:49) 11-02 18:10:36.284: E/AndroidRuntime(619): 在 android.widget.AbsListView.obtainView (AbsListView.java:2267) 11-02 18:10:36.284: E/AndroidRuntime(619): 在 android.widget.ListView.measureHeightOfChildren(ListView.java:1244)

这是相关的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ff444444" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#ffffffff" />

    <RatingBar
        android:id="@+id/ratingBar1"
        android:isIndicator="true"
        android:rating = "2.5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1" 
        style="?android:attr/ratingBarStyleSmall"/>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/ratingBar1"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#ffffffff" />

</RelativeLayout> 
```

通过消除和注释代码的过程，问题所在的行是：

```
 name.setText(myFood.myName);
    hall.setText(myFood.myHall);
    rating.setRating(myFood.myRating); 
```

它适用于注释掉的这些行，但文本只是默认值。我尝试简单地插入值而不是变量，但它仍然崩溃。似乎对这些（setText（“Bacon”）、setBackgroundColor、setAllCaps 等）的任何引用都会导致应用程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:11:45.290

next time post a logcat. for now, you need to change your `myView` to:

```
myView = inf.inflate(R.layout.hall_list_item, parent, false); 
```

also i suggest you let your constructor do the `LayoutInflater` instantiation, because as of now - it's done for every row in your listview.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:10:51.533

似乎在这些行中抛出了`NullPointerException`你的`getView`方法

```
 name.setText(myFood.myName);
        hall.setText(myFood.myHall);
        rating.setRating(myFood.myRating); 
```

首先检查视图的 id 是否与布局文件“hall_list_item.xml”中的视图匹配，您可以通过发布 xml 文件来帮助我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:21:22.890

代码其实还不错，逻辑上

```
measureHeightOfChildren 
```

那家伙真恶心。在内部，您使用的是 LinearLayout 吗？老实说，我不确定这是否是答案，但是...

LinearLayouts 有时会发生内部视图以某种方式变得大于布局分配的空间，这听起来很奇怪，因为 ListViews 在理论上应该具有无限的高度。我想知道高度是否设置为 match_parent 或其他东西

另外，我会考虑检查上下文。考虑把 .getSystemService(Context.LAYOUT_INFLATER_SERVICE); 构造函数中的代码，然后不存储上下文

# jquery - 通过 AJAX 获取帖子的永久链接

> ID：13201402
> 
> 赞同：0
> 
> 时间：2012-11-02T18:56:29.977
> 
> 标签：jquery, ajax, wordpress

我目前第一次在 Wordpress 网站上工作，在我的一个观点中，我通过 AJAX 动态加载内容，但此信息不包括我加载的帖子的永久链接。我想知道如何通过提供帖子 ID 通过 AJAX 获取帖子的永久链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:16:34.077

此 WordPress 函数返回给定 ID 的永久链接。

[get_permalink()](http://codex.wordpress.org/Function_Reference/get_permalink)

后端：

```
<?php

    add_action('wp_ajax_get_permalink', 'ajax_get_permalink');
    add_action('wp_ajax_nopriv_get_permalink', 'ajax_get_permalink');

    function ajax_get_permalink(){
        echo get_permalink(intval($_REQUEST['id']));
        die();
    }

    wp_localize_script( 'ajax_get_permalink', 'ajax_get_permalink', array(
        ajax_url =>  admin_url( 'admin-ajax.php' )  
    ));

?> 
```

前端：

```
var data = {
    action: 'get_permalink',
    id: the_post_id
};

jQuery.post(ajax_get_permalink.ajax_url, data, function(response) {
    permalink = response;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:07:32.163

利用`get_permalink($your_post_id)`

在服务器上的 php 代码中并将其传回。

[您可以在此处](http://codex.wordpress.org/Function_Reference/get_permalink)阅读有关该功能的更多信息

# python - 无法从 /var/www 访问 /usr/lib/cgi-bin/ 文件夹脚本

> ID：13201403
> 
> 赞同：-3
> 
> 时间：2012-11-02T18:56:31.427
> 
> 标签：python, html, apache, web, cgi-bin

我正在学习 HTML 和 CGI​​。我在 ubuntu 服务器上安装了 Apache，它工作正常，因为我可以看到测试页面。我放置了一个新网页，该网页从 /usr/lib/cgi/ bin 文件夹中调用示例 Hello world 脚本，但是当我运行它时出现此错误：

```
Not Found
The requested URL /usr/lib/cgi-bin/save_file.py was not found on this server. 
```

/usr/lib/cgi-bin 的访问权限都设置为 root:root 并且脚本的权限是 a+x。

HTML 文件内容如下（取自在线示例之一）：

```
enctype="multipart/form-data" action="/usr/lib/cgi-bin/save_file.py" method="post" 
```

（我不得不从这里删除 HTML 标签，因为它们没有正确上传，但这是相关部分）

有人知道为什么我的脚本 -`save_file.py`找不到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:19:06.530

改为使用`action="/cgi-bin/save_file.py"`。

在 URL 的情况下，根 ( `/`) 是您的网络服务器的根，它被设置为`/var/www`. 你的 HTML 页面访问你的根目录是很危险的，不是吗？想象一下允许的后果`action=/bin/rm`。

Apache 的默认配置自动`/cgi-bin`指向`/usr/lib/cgi-bin`.

# vbscript - 什么是使用 VBScript 的批处理 ECHO 命令的等价物？

> ID：13201405
> 
> 赞同：9
> 
> 时间：2012-11-02T18:56:46.183
> 
> 标签：vbscript

我们目前使用 Windows 批处理 (DOS) 命令文件来控制我们的流程。要向控制台显示消息，我们将使用 ECHO 命令。这些消息将显示在我们的调度程序软件中，该软件以前是 Tivoli，现在是 CA WA Workstation\ ESP。

我想开始使用 VBS 文件而不是 CMD\BAT 文件，并试图弄清楚如何对控制台执行相当于 ECHO 的操作。

当我尝试使用 WScript.Echo 命令或写入标准输出时，消息都会显示在两者的对话框中，并且它们需要按下确定按钮才能继续。毫不奇怪，当我通过调度程序在无人看管的情况下运行时，该作业会遇到这些命令之一并且只是挂起，因为没有人可以确定消息框。

```
SET FS = CreateObject("Scripting.FileSystemObject")
SET StdOut = FS.GetStandardStream(1)
StdOut.Write("Test 1")

WScript.echo("Test 2") 
```

我意识到我可以使用 Scripting 对象将消息写入日志文件，但如果提供的路径无效或权限不足，这可能会失败。此外，能够在调度程序中查看反馈写入非常方便。

如何使用 VBScript 写入控制台？我在这里看到了其他帖子，这些帖子表明由于上述原因而不起作用的上述方法是这样做的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T19:07:48.853

wscript.echo 是正确的命令 - 但要输出到控制台而不是对话，您需要使用 cscript 而不是 wscript 运行脚本。

您可以通过以下方式解决此问题

*   从命令行运行脚本，如下所示：

    ```
    cscript myscript.vbs 
    ```

*   更改默认文件关联（或为要使用 cscript 运行的那些脚本创建新的文件扩展名和关联）。

*   通过脚本主机选项更改引擎（即根据[http://support.microsoft.com/kb/245254](http://support.microsoft.com/kb/245254)）

    ```
    cscript //h:cscript //s 
    ```

*   或者，您可以在脚本的开头添加几行以强制将“引擎”从 wscript 切换到 cscript - 请参阅[http://www.robvanderwoude.com/vbstech_engine_force.php](http://www.robvanderwoude.com/vbstech_engine_force.php)（复制如下）：

    ```
    RunMeAsCScript

    'do whatever you want; anything after the above line you can gaurentee you'll be in cscript 

    Sub RunMeAsCScript()
            Dim strArgs, strCmd, strEngine, i, objDebug, wshShell
            Set wshShell = CreateObject( "WScript.Shell" )
            strEngine = UCase( Right( WScript.FullName, 12 ) )
            If strEngine <> "\CSCRIPT.EXE" Then
                    ' Recreate the list of command line arguments
                    strArgs = ""
                    If WScript.Arguments.Count > 0 Then
                            For i = 0 To WScript.Arguments.Count
                                    strArgs = strArgs & " " & QuoteIt(WScript.Arguments(i)) 
                            Next
                    End If
                    ' Create the complete command line to rerun this script in CSCRIPT
                    strCmd = "CSCRIPT.EXE //NoLogo """ & WScript.ScriptFullName & """" & strArgs
                    ' Rerun the script in CSCRIPT
                    Set objDebug = wshShell.Exec( strCmd )
                    ' Wait until the script exits
                    Do While objDebug.Status = 0
                            WScript.Sleep 100
                    Loop
                    ' Exit with CSCRIPT's return code
                    WScript.Quit objDebug.ExitCode
            End If
    End Sub

    'per Tomasz Gandor's comment, this will ensure parameters in quotes are covered:
    function QuoteIt(strTemp) 
            if instr(strTemp," ") then
                    strTemp = """" & replace(strTemp,"""","""""") & """"
            end if
            QuoteIt = strTemp
    end function 
    ```

# iphone - 子视图的不透明度问题

> ID：13201406
> 
> 赞同：0
> 
> 时间：2012-11-02T18:56:59.470
> 
> 标签：iphone, uiview

我有一个子视图，我希望它完全不透明。它包含一个不透明的 UITextView 和一个 UIButton。UITextView 有一些动画。我似乎无法让子视图变得不透明。无论我尝试什么，它最终都是透明的。我尝试使用另一个包装子视图，但这并没有解决问题。我怎样才能让这个子视图不透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:56:34.390

我建议重组视图，以便需要透明度的视图（它自己的子视图树是围绕组件的容器视图的兄弟，该组件应该是不透明的。

```
main_view
 `-semi-transparent_container
   `-some_semitrans_component
 `-opaque_container
   `-some_opaque_componenent 
```

# c - 缺点/对的实施

> ID：13201407
> 
> 赞同：0
> 
> 时间：2012-11-02T18:57:11.737
> 
> 标签：c, lisp, scheme

用 C 等低级语言实现 Lisp 的 cons/pair 有哪些选择？

一种常见的实现是由字段**type**、**car**和**cdr**组成的结构。我知道链表在存储方面效率不高，但是额外的**类型字段**使情况变得更糟。

我在 Wikipedia 上读到[Lisp 机器](http://en.wikipedia.org/wiki/Lisp_machine)过去常常为每个单词添加额外的位以获取类型信息。但是今天的架构（x86、ARM）有哪些选择呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:21:11.750

Cons cells are just one type of data we need to represent in Lisp. Others are arrays or vectors. Strings. Characters. Numbers. Symbols. Records. Instances of Classes.

Not only Lisp Machines used tag bits. Most Lisp implementations use them.

Most Lisp implementations use just the bits inside each memory word. Various Lisp Machines differed in their number of bits per word. Symbolics 36** machines used 36 bit words. Symbolics Ivory used 40 bit words. TI Explorer used 32bit words. So Symbolics used an unusual word size and TI used a *normal* word size. Symbolics was able to address more memory with its 40bit CPUs - 16 GBytes. 8bits of a word were used for the tags. Symbolics also had various other optimizations in representing data (for example lists could be represented as *cdr-coded* vectors - this technique is not used in current Lisp implementations).

Most of today's CPUs are 32bit or 64bit architectures. That makes a Lisp cons cell then two of these words in size and the bits have to fit into these word sizes. A fixnum is smaller than 32bit or 64bit. A fixnum is an integer which fits into a word minus the tag bits. For larger integers the numbers need to be represented differently. Thus a full 64bit long number is not representable as a fixnum on an 64bit machine. Common Lisp provides information about these sizes. On my 64bit LispWorks the most positive fixnum is 1152921504606846975.

```
CL-USER > MOST-POSITIVE-FIXNUM
1152921504606846975 
```

It would be unusual to waste extra memory for the tag bits. Most current Lisp implementations have to put the tag bits into the data word (32bit or 64bit). Lisp implementors have been working hard to make this as efficient as possible.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:45:29.120

您可以用*指针*`type`中的标记替换该字段。

 *结合[NaN 装箱](http://wingolog.org/archives/2011/05/18/value-representation-in-javascript-implementations)，您可以将每个堆栈槽（以及结构的`car`and`cdr`字段`cons`）减少到`double`.

`malloc`但是，对于每个 cons 单元格，您仍然会有开销（一个或两个单词）。*

# jquery - 使用 jquery .before(); rails中的方法

> ID：13201411
> 
> 赞同：1
> 
> 时间：2012-11-02T18:57:21.487
> 
> 标签：jquery, ruby-on-rails-3

我想使用 jquery 的 .before(); 重复一个表单元素；方法，以便表单的用户可以在这种情况下将更多成分添加到他们的食谱中。

到目前为止，我已经想出了这个，但是我不能在 js 文件中使用 ruby​​ 代码

```
 $('document').ready(function() {
  var ingredient = '<%= f.text_field :ingredients, :class => :ingred %><br>';
   $('#addIngredient').click(function(e) {
    e.preventDefault();
     $(this).before(ingredient);

   })
  }); 
```

我已经使用 html5 完成了它并让它工作

```
 $('document').ready(function() {

            var ingredient = '<input class="ingredients" name="ingredients" type="text" placeholder="Enter Ingredients Here"><br>';
             $('#addingredient').click(function(event) {
               event.preventDefault();
                $(this).before(ingredient);

                 })
               }); 
```

我只是很难让它适合我的红宝石形式

目前我将此输出到页面而不是文本字段

```
 <%= f.text_field :ingredients, :class => :ingred %> 
```

任何人都可以帮忙吗？非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:32:23.407

在Rails 中，这应该`views`在您的rails 应用程序目录中的一个文件中（例如`/myrailsapp/app/views/<controllername>`），扩展名为.erb。

您可以将上面的代码包装在 `<script> </script>`您的视图文件中的标记中，也可以`<action>.html.erb`在部分示例`_beforeaction.js.erb`中，然后您可以使用以下方法将其加载到主`<action>.html.erb`文件中：

```
<%= render "beforeaction" %> 
```

（注意：`<action>`是您的 rails 控制器中的操作）。

您可以在此处阅读指南：

[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

[http://ruby.about.com/od/rails3tutorial/ss/Getting-Started-With-Rails-Views.htm](http://ruby.about.com/od/rails3tutorial/ss/Getting-Started-With-Rails-Views.htm)

# ruby-on-rails - Ruby on Rails：非资源性路由工作，但haml页面失败

> ID：13201414
> 
> 赞同：1
> 
> 时间：2012-11-02T18:57:27.660
> 
> 标签：ruby-on-rails, routes, haml

所以我的 routes.rb 文件中有以下代码：

```
match "/movies/:id/find_similar_movies", :to => "movies#similar", :as => "find_similar_movies" 
```

然后在一个haml页面中我有以下内容：

```
= link_to 'Find Movies With Same Director', find_similar_movies_path(:id=>@movie.id) 
```

然后在我的控制器中我有：

```
def similar
    movie=Movie.find_by_id([params(:id)])
    @movie_title=movie.title
    @similar_movies=Movie.find_all_by_director(movie.director)
  end 
```

在similar.html.haml中我写道：

```
%h2 Similar movies with #{@movie_title}
%ul
- @similar_movies.each do |movie|
  %li = movie
= link_to 'Back to movie list', movies_path 
```

当我按下`= link_to 'Find Movies With Same Director', find_similar_movies_path(:id=>@movie.id)`

我得到：

参数数量错误（1 代表 0）

Rails.root：/home/ubuntu/hw4_rottenpotatoes 应用程序跟踪 | 框架跟踪 | 全跟踪

app/controllers/movies_controller.rb:10:in `similar'

要求

参数：

{"id"=>"6"}

怎么了？谢谢你的时间...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:44:31.737

`params(:id)`正在尝试调用`params`使用`:id`参数调用的方法，这不是它的工作原理。`params`应该像哈希一样对待，其查找语法是`params[:id]`.

试试`Movie.find_by_id(params[:id])`。

# javascript - 是否可以使用 websockets 流式传输数据

> ID：13201421
> 
> 赞同：1
> 
> 时间：2012-11-02T18:57:59.280
> 
> 标签：javascript, extjs, websocket

我有大数据集要发送到客户端而不是等待完整的传输数据..

我很想知道是否有任何方法可以启用数据流，从而不断将数据推送到客户端表，同时用户可以查看数据。

使用 Ext JS 和 WebSockets，试过缓冲网格性能不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:44:26.247

WebSocket 协议定义了自己的框架。客户端将一次处理一帧。对您而言，这意味着您需要将数据分成块并通过网络发送其中的许多块。

这将允许客户端在它们进入时对其进行处理，而不是在内存中缓冲 40000 条记录，直到它们全部到达。

# jsf - Primefaces：数据表 LiveScroll 中的 PanelGrid

> ID：13201423
> 
> 赞同：0
> 
> 时间：2012-11-02T18:58:14.777
> 
> 标签：jsf, jsf-2, primefaces

有人试过吗？当它加载更多 panelGrid 时，表只是复制它们。 [这个简单代码块的图片结果](http://d1211.hizliresim.com/13/2/fkcgz.png)。上侧显示了它应该如何以正确的方式呈现，但它像在下侧一样出错。

```
 <p:dataTable liveScroll="true" value="#{PanelController.panelList2}" var="GridPanel" scrollable="true" scrollRows="20" scrollHeight="100" rows="5">
               <p:column>
                   <p:panelGrid>
                       <p:row>
                           <p:column>
                               <h:outputText value="ehehe"></h:outputText>
                           </p:column>
                       </p:row>
                   </p:panelGrid>
               </p:column>
       </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T12:43:01.287

如果由我决定，我会使用 p:dataScroller 并在其中使用 panelgrid。看看这个： http: [//www.primefaces.org/showcase/ui/data/datascroller/inline.xhtml](http://www.primefaces.org/showcase/ui/data/datascroller/inline.xhtml)

# windows - 如何从 Qt QGraphicsTextItem 中删除选择图

> ID：13201427
> 
> 赞同：3
> 
> 时间：2012-11-02T18:58:30.623
> 
> 标签：windows, qt, selection, qgraphicsscene

我正在 Windows XP 上使用 QGraphicsScene 开发 Qt 4.8 应用程序。当用户双击 QGraphicsTextItem 时，我调用

```
textItem->setTextInteractionFlags(Qt::TextEditorInteraction); 
```

在下一次选择更改时，我调用

```
textItem->setTextInteractionFlags(Qt::NoTextInteraction); 
```

这可以正常工作，但我找不到删除编辑中剩余的背景颜色反转的方法。在下面的屏幕截图中，我首先双击第一个文本项并选择字符“2927”。然后我点击第二个测试项目并选择“est”。我没有办法摆脱第一个文本项中仍然倒置的“2927”（尽管它不再处于编辑模式）。

![在此处输入图像描述](../Images/1a274e632ed1ee4d54265bfecbb18fd5.png)

我也试着打电话：

```
 textItem->textCursor().clearSelection();
    textItem->update();
    textItem->setTextInteractionFlags(Qt::NoTextInteraction);
    textItem->clearFocus(); 
```

但他的行为完全没有改变。

所以现在我找到了一个解决方法：

```
 QString s = textItem->toPlainText();
    textItem->setPlainText("");
    textItem->setPlainText(s);
    textItem->setTextInteractionFlags(Qt::NoTextInteraction); 
```

我不喜欢那样，但它有效。

任何提示更清洁的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T05:03:33.437

由于`QGraphicsTextItem::textCursor()`返回光标的副本，因此您必须将其设置回文本项才能使其生效。

```
QTextCursor cursor(textItem->textCursor());
cursor.clearSelection();
textItem->setTextCursor(cursor); 
```

# iframe - 输入 iframe firefox

> ID：13201430
> 
> 赞同：1
> 
> 时间：2012-11-02T18:58:38.937
> 
> 标签：iframe, selenium, webdriver, selenium-webdriver

我在 java 中使用 Selenium Webdriver（第二个）

我想弄清楚如何在 IFrame 中输入内容。现在，我是：

`WebDriver driver = new FirefoxDriver(); Wait<WebDriver> wait = new WebDriverWait(driver, 30) wait.until(ExpectedConditions.presenceOfElementLocated(By.cssSelector("#cke_contents_textarea1 iframe"))).sendKeys("Test Text");`

html是： `<td id="cke_contents_textarea1" class="cke_contents" style="height:200px" role="presentation"><iframe style="width: 657px; height: 100%; " frameborder="0" title="Rich text editor, textarea1, press ALT 0 for help." src="" tabindex="-1" allowtransparency="true"> </iframe> </td>`

我已经编辑了很多代码，所以我可能会错过粘贴一些东西。

我已经验证光标出现在文本框内（当我选择不同的 iframe 时，光标也会移动）在 iframe 中输入不同的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:12:15.403

我很惊讶您在没有切换到 Iframe 的情况下看到光标。尝试这样做

```
driver.switchTo().frame(driver.findElement(By.id("frameId")));
//do your stuff
driver.switchTo().defaultContent(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:27:10.150

请参考示例代码：我使用的网站包含 iFrame。（注意：您必须确保在我们的网页源代码中包含 iframe）

```
WebDriver driver = new InternetExplorerDriver();
driver.get("http://www.packagemapping.com/example1.htm#.UJS4DFIerb8");

driver.switchTo().frame(driver.findElement(By.name("frame_track")));
System.out.println(driver.findElement(By.xpath("//*[@id='table2']/tbody/tr/td[3]/font")).getText());
driver.findElement(By.name("shipper")).sendKeys("DHL"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T07:15:40.650

要在 iframe 中输入，请使用以下 Java 代码进行 selenium Webdriver。

driver.switchTo().frame((WebElement)driver.findElement(By.xpath("在此处输入iframe的xpath"))); driver.findElement(By.xpath("iframe 文本框的 xpath")).sendKeys("testing"); driver.switchTo().defaultContent();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-24T09:25:41.130

发生这种情况是因为元素未完全加载。在我的情况下，将 Thread.sleep(1000) 放在 sendKeys 之前就可以了。

```
 WebElement iFrameElmnt = cntntPnlFrmWrpr.findElement(By.tagName("iframe"));
            driver.switchTo().frame(iFrameElmnt);
            WebElement inputText = driver.findElement(By.id("__o3id0"));
            Thread.sleep(1000);
            inputText.sendKeys("12344"); 
```

# java - 正确调整 JScrollPane 及其内容的大小

> ID：13201434
> 
> 赞同：0
> 
> 时间：2012-11-02T18:59:01.103
> 
> 标签：java, swing, jpanel, jscrollpane, zooming

我正在构建一个处理截屏的小型 Java 应用程序。我有一个从 JPanel 继承的自定义类，称为 ScreenshotPanel，它保存图像，它位于 JScrollPane 内。调整框架大小时，ScrollPane 会移动并调整大小。除了缩放部分，一切都很好，我希望能够控制 ScrollPane 内 screenshotPanel 的大小，但是 screenshotPanel 不会调整大小，它会以正确的大小闪烁片刻，但随后会调整回 ScrollPane 的大小尺寸。

如果我在没有 ScrollPane 的情况下使用 screenshotPanel，它可以完全正确地工作，但我希望它自动添加滚动条，以便您可以在放大时看到移动图像。

这是我用来调整大小的部分代码：

```
 double AR=((double)screenshotPanel.getImage().getHeight())/screenshotPanel.getImage().getWidth();

    screenshotPanel.setSize((int)((getWidth()-180)*zoomFactor), (int)((AR*(getWidth()-180)-100)*zoomFactor));
    scrollPane.setSize(getWidth()-180, (int)(AR*(getWidth()-180))-100); 
```

-180 和 -100 用于为按钮和缩放控制组件保留空间（它们都可以完美地移动和调整大小），zoomFactor 是保存缩放量的双倍。

如何调整 ScrollPane 内的 screenshotPanel 的大小，而 ScrollPane 不强制它的大小变回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:44:21.793

Changing the size of the component won't scale the image, unless you have code in your paint method to compensate for the change in size.

`JViewPort` is respecting your components preferred size, thus you get this flicker, as you change the size and the viewport resets it.

Add a `scale` method to your panel and override the `getPreferredSize` method.

When you call `setScale`, calculate the new scaled size. Make sure that the `getPreferredSize` method returns these values.

You will need to call `invalidate` and possibly `repaint` to make sure the change is updated through the container hierarchy.

Remember, the pane will not resize the image on it's own, you are responsible for taking this ;)

# linux - 如果 LDFLAGS 中有多个目录，链接器如何知道首先查找的位置？

> ID：13201436
> 
> 赞同：3
> 
> 时间：2012-11-02T18:59:11.447
> 
> 标签：linux, makefile

如果我有两个具有相同库名称但存储在不同目录中的库（并且它们可能包含不同的代码）并且我在 makefile 的 LDFLAGS 变量中列出了这两个目录，那么链接器如何知道首先查找的位置以及要使用的库?

```
 LDFLAGS+= \
        -L${INSTALL_DIR}/lib\
        -L${EVO_INSTALL_DIR}/lib\ 
```

它会先查看 INSTALL_DIR 路径还是查看 EVO_INSTALL_DIR 路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:06:29.723

`INSTALL_DIR`. It will look in the order they are listed.

By the way, it's your linker (probably the same program as your compiler) that's making this choice, not the Makefile. Make (which is reading your Makefile) only *runs* the build tools.

# image-processing - Opencv如何忽略图像上的小部分

> ID：13201440
> 
> 赞同：1
> 
> 时间：2012-11-02T18:59:36.160
> 
> 标签：image-processing, opencv

我在 Opencv 中需要一点帮助，我是初学者，还不知道所有功能。我正在尝试在我的车牌上进行 OCR，它是巴西车牌。因此，经过 cvCvtColor、cvCanny、cvFindContours 和 cvDrawContours 等图像处理后，我得到如下图像：

![盘子](../Images/cf778822d923db828c96fcf1dce2d461.png)

这是一张假图片，我安装了这张图片，因为我不想在网上发布我的真实车牌。在我的真实图像上，我在这个例子中画了一些部分，只有黑白颜色，因为我想忽略这些部分。红色是城市名称，黄色是连字符分隔符，绿色是固定车牌的孔。我需要知道是否有办法忽略这些小部分并只识别大部分，所以在这个过滤器之后我可以进行 OCR 处理。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:37:57.107

我不确定它在其他情况下是否对您有帮助，但在这种情况下，您可以使用[侵蚀](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)或仅`contourArea`用于计算轮廓面积来移除小轮廓（如果面积太小则移除轮廓）。

# c - C中初学者电话簿应用程序中的奇怪输出

> ID：13201442
> 
> 赞同：1
> 
> 时间：2012-11-02T18:59:49.673
> 
> 标签：c, function, pointers

我是 C 新手，我正在努力创建典型的初学者电话簿应用程序。我在谷歌上看到了很多不同的链接，这些链接显示了电话簿应用程序的示例，但没有显示我想要完成的任务。基本上我想要做的是创建一个具有名字、姓氏和 2 个电话号码的结构，然后我想为每个创建 2 个不同的函数。对于结构中的每个变量，我都会有一个设置输入，然后另一个读取输入。这给了我 8 个函数，但是我想再添加三个函数，一个用于向结构中添加 11each 新合同，一个用于删除联系人，然后一个用于查看电话簿。现在我专注于添加功能和查看功能。我的问题是我得到了非常奇怪的输出。

```
#include<stdio.h>
#include<conio.h>

typedef struct friends_contact{
       char First_Name[10];
       char Last_Name[10];
       char home[15];
       char cell[15];

}fr;

void menu(fr*friends ,int* counter,int user_entry, char* nullStr,int i);
void setFirst(fr*,int *,int i);
char getFirst(fr*,int*,char*,int i);
void setLast(fr*friends, int* counter, int i);
char getLast(fr*friends ,int* counter,char *nullStr, int i);
void add_contact(fr*friends,int* counter,int i);
void show_contact(fr*friends ,int* counter,char *nullStr, int i);

int main()
{
  int user_entry=0;
  fr friends[5];
  int counter=0;
  char nullStr[21] = {"\0"}; 
  int i=0;

 menu(friends, &counter,user_entry,nullStr,i);
 getch();
 return 0;
}

void menu(fr*friends,int* counter,int user_entry,char *nullStr,int i)
{
  do{
  printf("Phone Book Application\n");
  printf("1) Add friend\n2) Delete friend\n3) Show a friend\n4) Show phonebook\n5)Exit);   
 scanf("%d", &user_entry);
  if(user_entry==1){

                    add_contact(friends,counter,i);
                    }
   if(user_entry==4){
                  show_contact(friends, counter,nullStr,i);
                   } 
   }while(user_entry!=5);                 
 }

 void setFirst(fr*friends, int* counter, int i)
{
 (*counter)++;
 printf("Enter a first name \n");
 scanf("%s",&friends[*counter-1].First_Name);
}
void setLast(fr*friends, int* counter, int i)
{
 (*counter)++;
 printf("Enter a first name \n");
 scanf("%s",&friends[*counter-1].Last_Name);
}
char getFirst(fr*friends ,int* counter,char *nullStr, int i)
{
     for(i=0; i<*counter; i++)
     {
        if (strcmp(nullStr, friends[i].First_Name) != 0) 
        {
           printf("%s\n", friends[i].First_Name);
        }
     }

return *friends[i].First_Name;
}

char getLast(fr*friends ,int* counter,char *nullStr, int i)
{
     for(i=0; i<*counter; i++)
     {
        if (strcmp(nullStr, friends[i].Last_Name) != 0) 
        {
           printf("%s\n", friends[i].Last_Name);
        }
     }

 return *friends[i].Last_Name;
}
void add_contact(fr*friends,int* counter,int i)
{ 
 setFirst(friends,counter,i); 
 setLast(friends,counter,i);
}    

void show_contact(fr*friends ,int* counter,char *nullStr, int i)
{
 getFirst(friends,counter,nullStr,i);
 getLast(friends,counter,nullStr,i);
} 
```

这是我现在得到的输出：

```
Enter a first name
john
Enter a first name
smith
Phone Book Application
1) Add friend
2) Delete friend
3) Show a friend
4) Show phone book
5) Exit

4
john
╝ ♠

smith 
```

当我在列表中添加另一个名称时，我的结果同样奇怪。奇怪的是，我在创建姓氏函数后才开始遇到这些问题。当我只输入名字时，它工作得很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:12:25.713

你的问题是：

1) 在函数 setFirst`scanf("%s",&friends[*counter-1].First_Name);`
中 2) 在函数 setLast 中 `scanf("%s",&friends[*counter-1].Last_Name);`

在这两种情况下，当您对字符串变量使用 scanf 时，您不应该将 '&' 放在变量前面，因为字符串变量已经是字符串第一个元素的地址。

这工作：

1) 在函数 setFirst`scanf("%s",friends[*counter-1].First_Name);`
中 2) 在函数 setLast 中 `scanf("%s",friends[*counter-1].Last_Name);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:12:44.687

看起来问题在于两者`setFirst`都`setLast`在递增计数器。因此，第一个条目填写名字，第二个条目填写姓氏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:00:13.457

您的错误输出是因为当您调用函数时`showContacts`，它首先调用函数`getFirst`，然后调用函数`getLast`，当您添加名称时`john smith`，`jane doe`函数`getFirst`将打印`john jane`和函数`getLast`打印`smith doe` 为了解决这个问题，您应该执行以下操作：

> void show_contact(fr*friends,int* counter,char *nullStr,int i){
> 
> > for(i = 0 : *counter)
> > 
> > > if (strcmp(nullStr, friends[i].First_Name) != 0)
> > > 
> > > > // 这里你应该调用函数**getFirst**和**getLast**
> > > > 
> > > > > }

你应该修改`getFirst`并只打印函数中找到`getLast`的位置的名字/姓氏`i``showContact`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T20:29:23.070

下面的代码解决了你所有的问题：

> void show_contact(fr*friends ,int* counter,char *nullStr, int i) {
> 
> > for( i = 0; i < *counter; i++)
> > 
> > > ```
> > >  if (strcmp(nullStr, friends[i].First_Name) != 0){ 
> > > ```
> > > 
> > > > ```
> > > >  getFirst(friends, i);
> > > >     getLast(friends, i);
> > > >   } 
> > > > ```
> > > > 
> > > > }
> 
> char getFirst(fr*friends , int pos) {
> 
> > ```
> >  printf("%s\n", friends[pos].First_Name);
> > 
> >       return *friends[pos].First_Name; 
> > ```
> > 
> > > }
> 
> char getLast(fr*friends , int pos) {
> 
> > ```
> >  printf("%s\n", friends[pos].Last_Name);
> > 
> >       return *friends[pos].Last_Name; 
> > ```
> > 
> > }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T21:49:23.203

好的，我做了一些更改，然后将我去掉了变量 nullStr 的整个代码（包括主代码）粘贴给你。当您想查看名称是否为 balnk 时，您可以使用 strlen(string) 它为您提供该字符串的大小。如果大小为 0，则表示字符串为空白。

这是代码：

> `#`包含<stdio.h> # 包含<string.h>
> 
> typedef struct friends_contact{
> 
> > ```
> >  char First_Name[10];
> >    char Last_Name[10];
> >    char home[15];
> >    char cell[15]; 
> > ```
> 
> }f;

```
void menu(fr*friends ,int* counter,int user_entry,int i);
void setFirst(fr*,int *,int i);
char getFirst(fr*,int i);
void setLast(fr*friends, int* counter, int i);
char getLast(fr*friends , int i);
void add_contact(fr*friends,int* counter,int i);
void show_contact(fr*friends ,int* counter, int i); 
```

> int main() {
> 
> > ```
> > int user_entry=0;
> > fr friends[5];
> > int counter=0;
> > int i=0;
> > menu(friends, &counter,user_entry,i);
> > return 0; 
> > ```
> > 
> > }
> 
> 无效菜单（fr *朋友，int *计数器，int user_entry，int i）{
> 
> > 做{
> > 
> > > ```
> > > printf("Phone Book Application\n");
> > > printf("1) Add friend\n2) Delete friend\n3) Show a friend\n
> > >                4) Show phonebook\n5)Exit"); 
> > > ```
> > > 
> > > > scanf("%d", &user_entry);
> > > > 
> > > > > ```
> > > > > if(user_entry==1){
> > > > >             add_contact(friends,counter,i);
> > > > >             }
> > > > >    if(user_entry==4){
> > > > >           show_contact(friends, counter,i);
> > > > >            } 
> > > > >    }while(user_entry!=5); 
> > > > > ```
> > > > > 
> > > > > }
> 
> void setFirst(fr*friends, int* counter, int i) {
> 
> > ```
> >  printf("Enter a first name \n");
> >     scanf("%s",friends[*counter].First_Name); 
> > ```
> > 
> > }
> 
> void setLast(fr*friends, int* counter, int i) {
> 
> > ```
> >  printf("Enter a first name \n");
> >     scanf("%s",friends[*counter].Last_Name); 
> > ```
> > 
> > }
> 
> void add_contact(fr*friends,int* counter,int i) {
> 
> > ```
> >  setFirst(friends,counter,i); 
> >     setLast(friends,counter,i);
> >     (*counter)++; 
> > ```
> > 
> > }
> 
> void show_contact(fr*friends,int* counter, int i) {
> 
> > ```
> > for( i = 0; i < *counter; i++) 
> > ```
> > 
> > > ```
> > >  if (strlen(friends[i].First_Name) && strlen(friends[i].Last_Name) )
> > >     { 
> > > ```
> > > 
> > > > ```
> > > >  getFirst(friends, i);
> > > >             getLast(friends, i);
> > > >     } 
> > > > ```
> > > > 
> > > > }
> 
> char getFirst(fr*friends , int pos) {
> 
> > ```
> >  printf("%s ", friends[pos].First_Name);
> >    return *friends[pos].First_Name; 
> > ```
> > 
> > }
> 
> char getLast(fr*friends , int pos) {
> 
> > ```
> >  printf("%s\n", friends[pos].Last_Name);
> >       return *friends[pos].Last_Name; 
> > ```
> > 
> > }

# jquery - jQuery Supersize 播放按钮和托盘向下按钮不显示 II

> ID：13201443
> 
> 赞同：1
> 
> 时间：2012-11-02T18:59:50.693
> 
> 标签：jquery, supersized

我不确定这是否是正确的方法，但我需要扩展原始问题“jQuery Supersize 播放按钮和托盘下拉按钮未显示”，先生回答。麦肯夫。我有完全相同的问题，但是在替换了 'image_path' 行之后，没有任何改变。由于这似乎是问题的解决方案，我想了解我做错了什么。提前致谢。

# javascript - JSON 树到父链接结构

> ID：13201444
> 
> 赞同：1
> 
> 时间：2012-11-02T18:59:51.783
> 
> 标签：javascript, tree

我有一个 JSON 树结构：

```
nodes = 
[
{
    "name": "user1",
    "children": [
        {
            "name": "user2"
        },
        {
            "name": "user3",
            "children": [
                {
                    "name": "user4"
                }
            ]
        },
        {
            "name": "user5"
        }
    ]
}
] 
```

我想转换为父链接结构：

```
[{"name": "user1","parent": "null"},
 {"name": "user2","parent": "user1"},
 {"name": "user3","parent": "user1"},
 {"name": "user4","parent": "user3"},
 {"name": "user5","parent": "user1"}] 
```

我试图递归遍历树，但没有成功访问父对象：

```
rebuild(nodes,parentLink);

function parentlink(key,value) {
    var obj = { name: value , parent: ??? };
    if (key == "name"){
        nodes.push(obj);
    }
}

function rebuild(o,func) {
    for (i in o) {
        func.apply(this,[i,o[i]])
      if (typeof(o[i])=="object") {
        traverse(o[i],func,nodes);
      }
    }
} 
```

在开发人员工具中，我可以看到每个孩子的父对象，但我不知道如何访问它们。我应该怎么做才能将父级添加到每个用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:16:05.640

我不会撒谎，我没有费心看你的代码——我会这样做：

[http://jsfiddle.net/J6G2W/1/](http://jsfiddle.net/J6G2W/1/)

```
function processChildren(item, ret, parent) {
    for (var i = 0; i < item.length; i++) {
        var cur = item[i];
        var cur_name = cur.name;
        ret.push({"user": cur_name, "parent": parent});
        if ("children" in cur && cur.children.length > 0) {
            processChildren(cur.children, ret, cur_name);
        }
    }
}

var all = [];

processChildren(nodes, all, null);

console.log(JSON.stringify(all)); 
```

输出是：

```
[{"user":"user1","parent":null},{"user":"user2","parent":"user1"},{"user":"user3","parent":"user1"},{"user":"user4","parent":"user3"},{"user":"user5","parent":"user1"}] 
```

这似乎是你正在寻找的。欢迎您修改我的代码以使其更像您的代码，我只是想我会分享我的工作:)

**更新**：

如果出于某种原因，您想让它更具可扩展性，您可以自定义哪些键是“名称”，哪些是“孩子”...例如：

[http://jsfiddle.net/J6G2W/2/](http://jsfiddle.net/J6G2W/2/)

```
function startProcess(item, ret, key_look, children_look, parent) {
    function processChildren(item2, ret2, parent2) {
        for (var i = 0; i < item2.length; i++) {
            var cur = item2[i];
            var cur_name = key_look in cur ? cur[key_look] : null;

            ret.push({"user": cur_name, "parent": parent2});
            if (children_look in cur && cur[children_look].length > 0) {
                processChildren(cur[children_look], ret, cur_name);
            }
        }
    }

    processChildren(item, ret, parent);
}

var all = [];

startProcess(nodes, all, "name", "children", null);

console.log(JSON.stringify(all)); 
```

请注意您只需指定`key_look, children_look`一次参数。内部函数可以访问这些参数，同时每次递归只传递重要的东西。这可能并不重要，我只是想弄清楚:)

# ruby-on-rails - Rspec 重定向到测试

> ID：13201446
> 
> 赞同：1
> 
> 时间：2012-11-02T19:00:13.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, rspec, rspec2

在我的控制器中，当用户创建新帖子时，他/她将被重定向到包含新创建的帖子的页面。我想在 rspec 中创建一个测试来覆盖这个重定向，但我遇到了麻烦。具体来说，我想知道在 refirst_to 参数中写什么。这是下面的控制器代码..

```
def create
@micropost = Micropost.new(params[:micropost])
 respond_to do |format|
  if @micropost.save
    format.html {redirect_to @micropost}
  else
    format.html {render action: 'edit'} 
  end
end
end 
```

这是 rspec 测试...

```
before do
  @params = FactoryGirl.build(:micropost)
end

it "redirects to index" do
  #clearly @params.id doesn't work. its telling me instead of a redirect im getting a 
  #200
  #response.should redirect_to(@params.id)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:29:49.590

假设 @params 将创建一个有效的 Micropost（否则 .save 将失败并且您将渲染 :edit）...

```
it "redirects to index on successful save" do
  post :create, :micropost => @params.attributes
  response.should be_redirect
  response.should redirect_to(assigns[:micropost])
end

it "renders :edit on failed save" do
  post :create, :micropost => {}
  response.should render ... # i don't recall the exact syntax...
end 
```

# windows - 使用命令行将文件从 USB 保存到计算机

> ID：13201448
> 
> 赞同：0
> 
> 时间：2012-11-02T19:00:20.773
> 
> 标签：windows, command-line

我写了一个脚本来在服务器上运行。我可以访问 Windows 服务器本身，但它没有*GUI* - 它只是一个命令终端。我需要的脚本保存在 USB 拇指驱动器上，我正在努力将其复制到服务器（我可以访问）上。

我努力了：

```
mkdir myFolder
copy script.txt C:\myFolder 
```

作为对此的响应，服务器打印

> 成功复制

但是当我尝试

```
cd C:\myFolder 
```

我收到无效的目录名称错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:10:12.053

您需要先创建目录，然后在复制后更改为该驱动器和目录。例如，如果您的 USB 驱动器是`G:`

更改为驱动器`G:`，在其上创建文件夹`C:`，然后复制文件

```
G:
md C:\TargetFolder
xcopy file.txt C:\TargetFolder 
```

然后切换到驱动器`C:`并制作`TargetFolder`当前目录

```
C:
cd \TargetFolder 
```

或者，在一个命令中：

```
cd /d C:\TargetFolder 
```

或者，如果您已经在驱动器 C: 上启动

```
md \TargetFolder
cd \TargetFolder
xcopy G:\file.txt 
```

# php - 如何在 php 中使用 css 样式

> ID：13201451
> 
> 赞同：19
> 
> 时间：2012-11-02T19:00:49.107
> 
> 标签：php, css, echo

我使用 php 显示来自 mysql 的数据。这是我的css语句：

```
<style type=”text/css”&gt;
table {
    margin: 8px;
}

th {
    font-family: Arial, Helvetica, sans-serif;
    font-size: .7em;
    background: #666;
    color: #FFF;
    padding: 2px 6px;
    border-collapse: separate;
    border: 1px solid #000;
}

td {
    font-family: Arial, Helvetica, sans-serif;
    font-size: .7em;
    border: 1px solid #DDD;
}
</style> 
```

它们用于显示表格、表格标题、表格日期。我是 php css 新手，所以我只是想知道如何在 php 显示代码中使用上述 css 样式：

```
<?php>
echo "<table>";
echo "<tr><th>ID</th><th>hashtag</th></tr>";
while($row = mysql_fetch_row($result))
{
    echo "<tr onmouseover=\"hilite(this)\" onmouseout=\"lowlite(this)\"><td>$row[0]</td>                <td>$row[1]</td></tr>\n";
}
echo "</table>";
<?> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-10-16T12:37:47.413

我猜你在数据库中有你的 css 代码并且你想将一个 php 文件呈现为一个 CSS。如果是这样的话……

在您的**html 页面**中：

```
<html>
<head>
   <!- head elements (Meta, title, etc) -->

   <!-- Link your php/css file -->
   <link rel="stylesheet" href="style.php" media="screen">
<head> 
```

然后，在**style.php**文件中：

```
<?php
/*** set the content type header ***/
/*** Without this header, it wont work ***/
header("Content-type: text/css");

$font_family = 'Arial, Helvetica, sans-serif';
$font_size = '0.7em';
$border = '1px solid';
?>

table {
margin: 8px;
}

th {
font-family: <?=$font_family?>;
font-size: <?=$font_size?>;
background: #666;
color: #FFF;
padding: 2px 6px;
border-collapse: separate;
border: <?=$border?> #000;
}

td {
font-family: <?=$font_family?>;
font-size: <?=$font_size?>;
border: <?=$border?> #DDD;
} 
```

玩得开心！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-02T19:08:20.533

级联样式表 (CSS) 是一种样式表语言，用于描述以标记语言编写的文档的表示语义（外观和格式）。更多信息：[http](http://en.wikipedia.org/wiki/Cascading_Style_Sheets) ://en.wikipedia.org/wiki/Cascading_Style_Sheets CSS 不是一种编程语言，也没有像 PHP 这样的服务器端语言附带的工具。但是，我们可以使用服务器端语言来生成样式表。

```
<html>
<head>
<title>...</title>
<style type="text/css">
table {
margin: 8px;
}

th {
font-family: Arial, Helvetica, sans-serif;
font-size: .7em;
background: #666;
color: #FFF;
padding: 2px 6px;
border-collapse: separate;
border: 1px solid #000;
}

td {
font-family: Arial, Helvetica, sans-serif;
font-size: .7em;
border: 1px solid #DDD;
}
</style>
</head>
<body>
<?php>
echo "<table>";
echo "<tr><th>ID</th><th>hashtag</th></tr>";
while($row = mysql_fetch_row($result))
{
echo "<tr onmouseover=\"hilite(this)\" onmouseout=\"lowlite(this)\"><td>$row[0]</td>                <td>$row[1]</td></tr>\n";
}
echo "</table>";
?>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-02T19:02:28.383

只需将 CSS 放在 PHP 标记之外。这里：

```
<html>
<head>
    <title>Title</title>
    <style type="text/css">
    table {
        margin: 8px;
    }
    </style>
</head>
<body>
    <table>
    <tr><th>ID</th><th>hashtag</th></tr>
    <?php
    while($row = mysql_fetch_row($result))
    {
        echo "<tr onmouseover=\"hilite(this)\" onmouseout=\"lowlite(this)\"><td>$row[0]</td>                <td>$row[1]</td></tr>\n";
    }
    ?>
    </table>
</body>
</html> 
```

请注意 PHP 标记是`<?php`和`?>`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-06T20:52:41.900

尝试将您的 php 放入 html 文档中：

注意：您的文件没有保存为 index.html，而是保存为 index.php，否则您的 php 将无法工作！

```
 //dont inline your style

 <link rel="stylesheet" type="text/css" href="mystyle.css"> //<--this is the proper way!

 //save a separate style sheet (i.e. cascading style sheet aka: css) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T19:02:51.663

我不明白这一点`Im new to php css`，但是当您在元素级别定义 CSS 时，您的样式已经应用于您的 PHP 代码

您的 PHP 代码将与这样的 HTML 一起使用

```
<!DOCTYPE html>
<html>
  <head>
    <style>
    /* Styles Go Here */
    </style>
  </head>
  <body>
  <?php
   echo 'Whatever'; 
  ?>
  </body>
</html> 
```

还要记住，您不需要使用 php 回显 HTML，只需像这样将它们分开即可

```
<table>
  <tr>
    <td><?php echo 'Blah'; ?></td>
  </tr>
</table> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-19T11:57:43.343

我不知道这是否是正确的格式。但它可以解决我在使用 php 在 html/tpl 文件中插入 css 代码时删除**type="text/css"的问题。**

```
<style type="text/css"></style>
```

变得

```
<style></style>
```

例子 [![在此处输入图像描述](../Images/8369521cef28e2c6c67d4e524da08a53.png)](https://i.stack.imgur.com/yNL3h.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-23T04:13:02.353

绝对最简单的方法（使用您当前的代码）是在`require_once("path/to/file")`您的 php 代码中添加一条语句。

```
<?php
require_once("../myCSSfile.css");
echo "<table>";
... 
```

另外，顺便说一句：开始`<?php`标签的末尾没有 a `>`，而结束的`?>`php 标签不以`<`. 很奇怪，但确实如此。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-29T05:33:38.017

您也可以将其嵌入到 php.ini 中。例如

```
<?php
    echo "<p style='color:blue; border:2px red solid;'>CSS Styling in php</p>";
?> 
```

希望这对将来的任何人都有帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-12T11:45:11.287

我刚才遇到了这个问题，我尝试了 require_once 技巧，但它只会在我的所有 php 代码之上回显 CSS，而没有实际应用样式。

不过，我所做的修复它是将我所有的 php 包装在它们自己的纯 HTML 模板中。只需在文档的第一行输入 html 并选择建议 html:5 即可获取 HTML 样板，就像您刚开始编写纯 HTML 文档时一样。然后剪切结束 body 和 html 标签并将它们一直粘贴到底部，在结束 php 标签下方以包装您的 php 代码，而无需实际更改任何内容。最后，您可以将指向样式表的普通旧链接放入 HTML 的头部。工作得很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-09T10:08:20.840

css`:hover`有点像 js`onmouseover`

```
row1 {
    // your css
}
row1:hover {
    color: red;
}
row1:hover #a, .b, .c:nth-child[3] {
    border: 1px solid red;
} 
```

不太确定它是如何工作的，但 css 将样式应用于回显的 id

# c# - VS2010 在单独的机器上构建 COM 组件 vs regasm /codebase

> ID：13201452
> 
> 赞同：-1
> 
> 时间：2012-11-02T19:00:59.480
> 
> 标签：c#, com

当你构建 regasm /codebase 没有的项目时，VS 做了什么来使 COM 组件工作？

当我在构建它的 PC 上使用该组件时，它工作正常。当我尝试在单独的 PC 上使用它时，找不到方法。

这是一些 GAC 类型的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:55:56.440

在 REGASM 中使用以下内容

REGASM mystuff.dll /codebase /tlb:mystuff.tlb

# java - JPanel 需要的建议 - 绘图区和听众

> ID：13201456
> 
> 赞同：0
> 
> 时间：2012-11-02T19:01:05.390
> 
> 标签：java, jframe, paint

下面是我目前用于绘图类的代码，我一直在寻找教我如何在屏幕上创建 3 个形状的文档。

我有一个 jframe，带有用于选择形状（见下文）等的菜单。

```
if (clickedMenu.getText().equals("Square")){                    
value = pane.returnslider();
shape = new ASquare(value); 
```

所以我的问题是：我如何编辑下面的类来创建一个出现在我的 Jframe 上的 2D 正方形，它根据滑块值改变大小？

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package assignment;

import java.awt.Graphics;

/**
 *
 * @author Steven
 */
public class MyDrawing extends javax.swing.JPanel {

/**
 * Creates new form MyDrawing
 */
 @Override public void paintComponent(Graphics g) {
     super.paintComponent(g);    // paints background

  }   
} 
```

* * *

我的 jpanel 中的一些代码可能会帮助您回答我的问题：

```
public class MyChangeAction implements ChangeListener {

    //complete code here
    @Override
    public void stateChanged(ChangeEvent ce) {
        double value = slider.getValue();
        String str = Double.toString(value);
        sliderLabel.setText(str);
        DecimalFormat df = new DecimalFormat("0.0");

        boundary_length.setText("" +     df.format(MyFrame.shape.computeBoundaryLength(value)));
        area.setText("" + df.format(MyFrame.shape.computeArea(value)));
    }
} // end class

public double returnslider() {
    return slider.getValue();
} 
```

* * *

我的广场课：

```
package assignment;

import java.awt.event.ActionListener;

/**
 *
 * @author b00560806
 */
public class ASquare extends MyShape {

double value;

public ASquare(double value) {
    this.value = value;
}

@Override
public double computeBoundaryLength(double Length) 
{
    thelength=(4*Length);
    return thelength;
}

@Override
public double computeArea(double Length) 
{
    thearea=(Length*Length);
    return thearea;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:06:09.930

尝试这个：

```
@Override 
public void paintComponent(Graphics g) {
    super.paintComponent(g);    // paints background

    Graphics2D g2 = (Graphics2D)g;
    g2.setStroke(new Stroke((int)returnslider));
    // rest of drawing.
} 
```

# facebook - 显示上次 Facebook 签到

> ID：13201457
> 
> 赞同：2
> 
> 时间：2012-11-02T19:01:13.293
> 
> 标签：facebook, api, checkin

我有我的业务的实际位置，我真的很想在状态帖子中显示最后登记或标记我的位置的几个人。我对 API 很陌生，可以使用一些帮助（如果可能的话）。

如果这不可能，是否至少可以实时查看我们在该位置收到了多少签到？

如果已经有人问过这个问题，请原谅我，我尝试搜索并没有找到我的问题的好答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:03:46.483

您可以查询 fql 签入表 (https://developers.facebook.com/docs/reference/fql/checkin/) 并使用时间戳和作者 ID 信息搜索签入。我试着在金门大桥上搜索签到——

```
SELECT checkin_id, author_uid, page_id, timestamp from checkin where page_id = 111856692159256 
```

它似乎返回了公共签到结果。您可能需要对它进行排序以仅显示最近的签到。

# html - 在 Perl 中比较输入元素的值

> ID：13201460
> 
> 赞同：0
> 
> 时间：2012-11-02T19:01:18.380
> 
> 标签：html, perl, comparison

我有一组名称相同但值不同的单选按钮。我正在尝试获取所选单选按钮的值并将其与预设值进行比较以查看它们是否匹配。

```
<input type="radio" name="one" value="a">
<input type="radio" name="one" value="b">
<input type="radio" name="one" value="c"> 
```

提交此表格...

**编辑**

```
@answers = ("a", "a", "c");

for $key (param()) {
  $input {$key} = param($key);

  if ($key ne "firstName" and $key ne "lastName") {
    $value = "$_\n" for $input{$key};

    #The below values print out correctly.
    #a a
    #a a
    #c c
    print $value . " " . $answers[$i] . "<br/>";

    #When trying to compare them nothing happens.
    if ($value eq $answers[$i]) {
      print "TEST<br/>";
      $avg += 1;
    }
    $i++;
  }
} 
```

所以我需要将单选按钮的值推送到我的数组中，然后将其与数组答案进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:00:30.143

1) 你总是在 $value 上添加一个换行符，但 @answers 中的值都没有。所以这永远不会匹配。

2）您假设您将按特定顺序获取值。有一天你会得到一个不同的订单，或者一个问题会被省略。然后，您将比较问题 1 和答案 2。

3) 如果同一参数有多个值（通常只是复选框的问题），您将丢失一些值。你的`"$_\n" for $input{$key};`暗示这是一个合理的担忧。但是您对 param() 的调用和您存储到哈希中的是标量上下文，这将始终删除其他值。您需要使用列表上下文（例如`@values=param($key); $item{$key}=[@values]`），但这将需要在其他地方进行额外的工作来检查每个值是标量还是列表引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:03:40.117

您可以[询问特定参数的值，](http://search.cpan.org/dist/CGI/lib/CGI.pm#FETCHING_THE_VALUE_OR_VALUES_OF_A_SINGLE_NAMED_PARAMETER%3a)因此无需将它们存储在单独的哈希中。

```
my @values = param("one"); 
```

然后使用[智能匹配](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)很容易进行比较。

```
use v5.10;

if( @values ~~ @answers ) {
    ...they matched...
} 
```

难题的最后一部分是将您的答案存储在哈希中，其中键是其参数。

```
my %correct_answers = (
    one => ['a', 'a', 'c'],
    two => [1,2,3],
); 
```

然后，不是遍历所有参数并提取那些不是答案字段的参数，因为谁知道用户还会发送什么（是的，用户可以按照他们想要的任何顺序为您的 CGI 程序提供他们想要的任何字段），你会循环遍历键`%correct_answers`以确保您只查看您期望的字段。

```
for my $key (keys %correct_answers) {
    my $correct_answer = $correct_answers{$key};

    my @answer = param($key);

    if( @answer ~~ @$correct_answers ) {
        ...they matched...
    }
} 
```

# java - 为什么 Libgdx 的 Table 不接受缩放动作？

> ID：13201462
> 
> 赞同：9
> 
> 时间：2012-11-02T19:01:25.340
> 
> 标签：java, libgdx, tablelayout, scene2d

我在 libgdx 库中使用 scene2d 在我的游戏中创建一些 UI。

我使用了一个表格，我想在用户触摸时采取一些缩放动作以使按钮具有触摸感。

当我使用任何其他“Actor”类型（如 Group）并给它一个缩放动作时，它可以工作，但不能使用 Table。

这是我的表定义：

```
Table table = new Table();
table.setSize(width, height);
table.setPosition(x, y);
table.setOrigin(width/2, height/2);
table.add(new Label(...));
table.row();
... 
```

在我的 touchDown 事件中，我给它一个缩放动作：

```
table.addAction(Actions.scaleTo(0.8f, 0.8f, 0.1f)); 
```

在 touchUp 中，我给它另一个动作来获得原始比例：

```
table.addAction(Actions.scaleTo(1f, 1f, 0.1f)); 
```

正如我所说，此代码适用于其他类型的 Actor，例如 Image 和 Group。有什么想法为什么不适用于表格？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-10T10:35:28.050

回答我自己的问题：

为了 libGdx 的文档 ( `https://code.google.com/p/libgdx/wiki/scene2dui#Rotation_and_scale`) 表不支持缩放和旋转，如果它的背景设置。

如果我们想缩放和/或旋转表格，我们必须像下面的代码一样：

```
TextButton button = new TextButton("Text Button", skin);
Table wrapper = new Table();
wrapper.add(button);
wrapper.setTransform(true);
wrapper.setOrigin(wrapper.getPrefWidth() / 2, wrapper.getPrefHeight() / 2);
wrapper.setRotation(45);
wrapper.setScaleX(1.5f); 
```

# c++ - 我如何返回一个包含 c++ 中两个地图差异的 std::map ？

> ID：13201463
> 
> 赞同：3
> 
> 时间：2012-11-02T19:01:26.687
> 
> 标签：c++, map, std

我有两张地图，我需要找到差异并创建一个只有差异的新地图。不知道该怎么做。我尝试使用 set_difference 但并不真正了解它是如何工作的。任何帮助，将不胜感激。谢谢

```
// header file
typedef std::map<std::string, int> MapCol;
typedef std::map<std::string, MapCol> MapRow;
MapRow m_mapRows;

//.cpp fle
CheckForDifferences( const Table& rhs )
{
    Table diffTable;
    vector<string> v;                           
    vector<string>::iterator it;
    it=set_difference (m_mapRows.begin(), m_mapRows.end(), diffTable.m_mapRows.begin(), diffTable.m_mapRows.end, v.begin());
} 
```

编辑：

```
std::set_difference( m_mapRows.begin(), m_mapRows.end(),
rhs.m_mapRows.begin(), rhs.m_mapRows.end(), diffTable.m_mapRows.begin()); 
```

好的，这就是我尝试的方法，但我得到了错误，第一个错误是错误 C2678: binary '=' : no operator found 它采用'const std::string' 类型的左操作数（或者没有可接受的转换)

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:07:18.213

如果您有两个已排序的容器`a`，`b`并且您想将不在其中的一组对象复制到另一个容器中`c`，您可以这样做：

```
std::set_symmetric_difference(
    a.begin(), a.end(),
    b.begin(), b.end(),
    std::back_inserter(c) ); 
```

如果您只想要其中的元素`a`不在 中`b`，请使用`set_difference`而不是`set_symmetric_difference`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-13T13:23:41.837

在您的代码中

```
std::set_difference( m_mapRows.begin(), m_mapRows.end(),
rhs.m_mapRows.begin(), rhs.m_mapRows.end(), diffTable.m_mapRows.begin()); 
```

您尝试使用常规迭代器作为输出，这是行不通的。在您的情况下，您可以使用[std::inserter](http://en.cppreference.com/w/cpp/iterator/inserter)

```
std::set_difference( m_mapRows.begin(), m_mapRows.end(),
rhs.m_mapRows.begin(), rhs.m_mapRows.end(), std::inserter( diffTable.m_mapRows, diffTable.m_mapRows.begin())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-04T12:44:22.207

这是我的看法。很基础。您从左侧操作数的副本开始，并删除右侧操作数中存在的所有内容。它给你留下了集合论定义的差异。

```
template< class TMap >
auto    MapDiff( const TMap & lh, const TMap & rh )
{
  auto result = lh ;

  for( auto const & item : rh )
  {
    result.erase( item.first ) ;
  }

  return result ;
} 
```

# c# - 由于保护级别，C# 命令行无法访问

> ID：13201469
> 
> 赞同：0
> 
> 时间：2012-11-02T19:01:44.667
> 
> 标签：c#, command-line, system.net

我正在尝试将基于命令行的 HTTP 发布到网页，该命令行可以登录并检索一些数据或执行其他操作。我有所有代码，但它不喜欢静态字段 Main 中的非静态内容，我该如何解决这个问题？

```
 static void Main(string[] args)
    {
        System.Console.Title = "Test Project";
        bool GoodUsername = false;
        string Username = "";
        while (GoodUsername == false)
        {
            Console.WriteLine("Please enter your username.");
             Username = Console.ReadLine();
            Console.WriteLine("Is " + Username + " correct? Type Yes or No");
            string YesNo = Console.ReadLine();
            if (YesNo == "yes" || YesNo == "Yes" || YesNo == "y")
            {
                GoodUsername = true;
                //return;
            }      
        }
        bool GoodPassword = false;
        string Password = "";           
        while (GoodPassword == false)
        {
            Console.WriteLine("Please enter your password.");
            Password = Console.ReadLine();
            Console.WriteLine("Attempting to log in.");
               string PostURL = "username=" + Username + "&password=" + Password + "&login=Login";
              string URLs = "http://c-rpg.net/index.php?page=login";
             string Response = CRPG.CRPG.DoPost(URLs, PostURL);                       
        }
    } 
```

是我的一个班级的代码。

```
 string Response = CRPG.CRPG.DoPost(URLs, PostURL); 
```

给我错误。

```
 CookieContainer cookies = new CookieContainer();
    protected string DoPost(string URLr, string POST)
    {
        Uri url = new Uri(URLr);
        HttpWebRequest HttpWRequest = (HttpWebRequest)WebRequest.Create(url);

        HttpWRequest.Headers.Set("Pragma", "no-cache");
        HttpWRequest.Timeout = 5000;
        HttpWRequest.Method = "POST";
        HttpWRequest.ContentType = "application/x-www-form-urlencoded";
        HttpWRequest.CookieContainer = cookies;

        byte[] PostData = System.Text.Encoding.ASCII.GetBytes(POST);
        HttpWRequest.ContentLength = PostData.Length;
        Stream tempStream = HttpWRequest.GetRequestStream();
        tempStream.Write(PostData, 0, PostData.Length);
        tempStream.Close();

        HttpWebResponse HttpWResponse = (HttpWebResponse)HttpWRequest.GetResponse();
        Stream receiveStream = HttpWResponse.GetResponseStream();
        StreamReader readStream = new StreamReader(receiveStream);

        string rcstr = "";
        Char[] read = new Char[256];
        int count = 0;
        while ((count = readStream.Read(read, 0, 256)) > 0)
        {
            rcstr += new String(read, 0, count);
        }
        HttpWResponse.Close();
        readStream.Close();
        return rcstr;
    } 
```

我可以把它公开，它给了我错误。

```
Error   1   An object reference is required for the non-static field, method, or property 'CRPG.CRPG.DoPost(string, string)'    c:\users\sales\documents\visual studio 2010\Projects\Test_CL\Test_CL\Program.cs 40 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:02:54.687

`DoPost()`并且该`cookies`字段是*实例*成员。
您需要该类的一个实例来调用它们。

你可能想让它们变成静态的。

# web-services - WSDL 标准缺乏扩散

> ID：13201470
> 
> 赞同：0
> 
> 时间：2012-11-02T19:01:48.553
> 
> 标签：web-services, api, wsdl, interpreter

免责声明：我认为这个问题适合这个网站，因为我可能忽略了一个技术限制，而不是仅仅基于偏好的讨论。

你好，

WSDL 没有在公共 API 创建中得到更广泛的使用是否有原因？它通过使用 WSDL 解释器为编程语言提供构造数据对象和代码本身的指令。

例如，Facebook API 以他们支持的每种特定语言在 github 上。然后对于一些小众应用程序，个人已经用其他语言进行了自己的 Facebook 集成。难道不是一个简单的解决方案只是一个 WSDL 文件，而其他所有人都可以使用他们选择的语言中的 WSDL 解释器来重新创建 API，而无需进行所有的反复试验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:15:40.417

WSDL 根本没有解决那些移植问题。它解决了一组更简单的用例——Web 服务和其他消息传递系统。例如，WSDL 不描述对象的行为，也不包括现代 OO 语言中存在的许多东西。您如何描述 WSDL 中的构造函数？甚至枚举，真的吗？

# hadoop - Hive - 分区查询不返回任何内容

> ID：13201472
> 
> 赞同：2
> 
> 时间：2012-11-02T19:01:56.670
> 
> 标签：hadoop, hive

我有一个按特定开始日期 (ds) 分区的表。我可以查询最新的分区（前一天的数据），它会很好地使用分区。

```
hive> select count(1) from vtc4 where ds='2012-11-01' ;
...garbage...
MapReduce Jobs Launched:
Job 0: Map: 1  Reduce: 1   Cumulative CPU: 6.43 sec   HDFS Read: 46281957 HDFS Write:  7 SUCCESS
Total MapReduce CPU Time Spent: 6 seconds 430 msec
OK
151225
Time taken: 35.007 seconds 
```

但是，当我尝试查询较早的分区时，hive 似乎可以很好地读取分区，但不返回任何结果。

```
hive> select count(1) from vtc4 where ds='2012-10-31' ;
...garbage...
MapReduce Jobs Launched:
Job 0: Map: 1  Reduce: 1   Cumulative CPU: 7.64 sec   HDFS Read: 37754168 HDFS Write: 2 SUCCESS
Total MapReduce CPU Time Spent: 7 seconds 640 msec
OK
0
Time taken: 29.07 seconds 
```

但是，如果我告诉 hive 针对表本身内部的日期字段运行查询，并且不使用分区，我会得到正确的结果。

```
hive> select count(1) from vtc4 where date_started >= "2012-10-31 00:00:00" and date_started < "2012-11-01 00:00:00" ;
...garbage...
MapReduce Jobs Launched:
Job 0: Map: 63  Reduce: 1   Cumulative CPU: 453.52 sec   HDFS Read: 16420276606 HDFS Write: 7 SUCCESS
Total MapReduce CPU Time Spent: 7 minutes 33 seconds 520 msec
OK
123201
Time taken: 265.874 seconds 
```

我在这里想念什么？我正在运行 hadoop 1.03 和 hive 0.9。我对 hive/hadoop 很陌生，所以任何帮助都将不胜感激。

谢谢。

**编辑 1:** hive> 描述格式化的 vtc4 分区 (ds='2012-10-31');

```
Partition Value:        [2012-10-31 ]
Database:               default
Table:                  vtc4
CreateTime:             Wed Oct 31 12:02:24 PDT 2012
LastAccessTime:         UNKNOWN
Protect Mode:           None
Location:               hdfs://hadoop5.internal/user/hive/warehouse/vtc4/ds=2012-10-31
Partition Parameters:
    transient_lastDdlTime   1351875579

# Storage Information 
SerDe Library:          org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe
InputFormat:            org.apache.hadoop.mapred.TextInputFormat
OutputFormat:           org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat
Compressed:             No
Num Buckets:            -1
Bucket Columns:         []
Sort Columns:           []
Storage Desc Params:
serialization.format    1
Time taken: 0.191 seconds 
```

分区文件夹存在，但是当我尝试在 hdfs://hadoop5.internal/user/hive/warehouse/vtc4/ds=2012-10-31 上执行 hadoop fs -ls 时，它说文件/目录不存在。如果我使用 Web 界面浏览到该目录，我可以进入该文件夹，并查看 /part-m-000* 文件。如果我在 hdfs://hadoop5.internal/user/hive/warehouse/vtc4/ds=2012-11-01 上执行 fs -ls 它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:43:59.323

看起来像是权限的事情，或者与配置单元或名称节点的元数据有关的东西。这是我会尝试的：

1.  将该分区中的数据复制到 hdfs 中的其他位置。您可能需要以 hive 或 hdfs 用户身份执行此操作，具体取决于您的权限设置方式。
2.  `alter table vtc4 drop partition (ds='2012-10-31');`
3.  `alter table vtc4 add partition (ds='2012-10-31');`
4.  将数据复制回 hdfs 上的该分区

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-22T01:33:44.737

hive 分区的另一件事是，当在 hive 外部创建时（例如从 sparksql），它有时不会在元数据系统中注册。您还可以尝试`MSCK REPAIR TABLE xc_bonus;`对分区进行任何更改，以便正确反映。

# django - 是否使用 Django-Haystack？

> ID：13201473
> 
> 赞同：3
> 
> 时间：2012-11-02T19:02:04.190
> 
> 标签：django, django-haystack

所以这对某些人来说可能是一个明显的答案，但我不确定正确的答案是什么。我有一个简单的捐赠应用程序，其中捐赠者对象是通过表单创建的。要添加的一项功能是允许按姓氏和/或电话号码搜索每个捐赠者。

这是使用 django-haystack 的好案例还是我应该创建自己的过滤器？我可能会看到 haystack 的问题是每分钟都会提交一些捐款，所以索引可能是个问题吗？目前大约有 130,000 条记录并且还在增长。我已经开始实施 haystack，但意识到它可能没有必要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:08:50.787

不要使用 haystack——当底层关系数据库无法轻松处理时，它用于快速全文搜索。haystack 的用例是当您存储许多包含大量文本的大型文档时，您希望通过文档中的单词对其进行索引，以便您可以轻松搜索。

默认情况下，Django 已经允许您轻松索引/搜索文本记录。例如，使用[管理后台只需指定搜索字段](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.search_fields)，您就可以轻松搜索姓名或电话号码。（它通常会进行不区分大小写的包含搜索——这将找到部分匹配项；例如，如果您仅搜索“doe”或“ohn”，则会出现名称“John Doe”）。

因此，如果您的 models.py 有：

```
class Donor(models.Model):
    name = models.CharField(max_length=50)
    phone = models.CharField(max_length=15) 
```

和一个 admin.py ：

```
from django.contrib import admin
from mysite.myapp.models import Donor

class DonorAdmin(admin.ModelAdmin):
    model = Donor
    search_fields = ['name', 'phone']

admin.site.register(Donor, DonorAdmin) 
```

它应该可以正常工作。如果需要改进，请考虑将全文索引添加到底层 RDBMS。例如，使用 postgres，您可以在 8.3 后创建一个文本搜索索引，在底层数据库中使用一个衬里，django 应该自动使用它：[http://www.postgresql.org/docs/8.3/static/textsearch-indexes。 html](http://www.postgresql.org/docs/8.3/static/textsearch-indexes.html)

# c# - DataGrid.ScrollIntoView() 不起作用，使用 DataGridTemplateColumn 和 MVVM

> ID：13201474
> 
> 赞同：1
> 
> 时间：2012-11-02T19:02:10.540
> 
> 标签：c#, wpf, datagrid, scroll, selecteditem

用户控件`DataGrid`XAML：

```
<DataGrid x:Name="NamingConventionDataGrid" Width="{Binding ElementName=toolbar, Path=ActualWidth}" MinHeight="100"
     HorizontalAlignment="Left" DockPanel.Dock="Bottom"
     VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="auto" 
     CanUserResizeRows="False" CanUserAddRows="False" CanUserSortColumns="True" CanUserDeleteRows="False"
     CanUserReorderColumns="False" CanUserResizeColumns="False" Background="White" BorderThickness="1"
     VerticalGridLinesBrush="{StaticResource RowGrayBrush}" HorizontalGridLinesBrush="{StaticResource RowGrayBrush}"
     RowBackground="White" AlternatingRowBackground="{StaticResource RowGrayBrush}" AlternationCount="2"
     ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle}"
     SelectedItem="{Binding SelectedName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
     AutoGenerateColumns="False" SelectionMode="Single" SelectionUnit="FullRow"
     RowHeaderWidth="15" RowHeaderStyle="{StaticResource DataGridRowHeaderStyle}" 
     ItemsSource="{Binding ReferenceValues, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
     MaxHeight="230" ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Auto" > 
```

视图模型代码：

```
 ReferenceValues = tempRefs;

 SelectedName = ReferenceValues.FirstOrDefault();
 _view.NamingConventionDataGrid.SelectedItem = SelectedName;
 _view.NamingConventionDataGrid.UpdateLayout();
 _view.NamingConventionDataGrid.ScrollIntoView(SelectedName); 
```

当我`ScrollIntoView()`使用`SelectedItem`对象 {Binding} 调用时，它会选择对象（我知道这一点是因为 WPF 应用程序上的其他内容发生了变化），但它不会滚动到对象所在的位置，并且`SelectedItem`对象不会像当你点击`DataGrid`. 我是否在某处遗漏了一些代码，这些代码可以让我滚动到当前位置`SelectedItem`并突出显示它，就像用户滚动到该项目并单击该行一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:17:21.407

我认为问题是由于 DataGrid 只为那些可见的项目和每个方向的一些项目创建容器。

尝试像这样设置 DataGrid 的 IsVirtualizing 属性：

```
VirtualizingStackPanel.IsVirtualizing="False" 
```

在我这样做之前，我在支持多项选择和滚动方面遇到了类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:29:14.083

我忘了设置一个`Binding`from`_view`对象来映射到`UserControl`.

一旦我添加了以下代码，一切都会再次运行。

```
 model._view = _view.NamingConventionControl; 
```

# wordpress - Wordpress - 元字段更新

> ID：13201476
> 
> 赞同：0
> 
> 时间：2012-11-02T19:02:20.510
> 
> 标签：wordpress, custom-post-type

我在 Wordpress 中为自定义帖子类型创建了几个元字段。它们是“价格”和“详细信息”。如果我进入“编辑帖子”页面，并且我在其中一个字段中进行了更改，但随后决定通过在浏览器中点击“返回”或关闭窗口来离开页面，我会收到来自浏览器的警告“您确定要离开该页面吗？”。当我点击“是”时，它会删除这两个字段中的任何内容，甚至是在我编辑之前存储的内容。

知道为什么会这样吗？

这是我在functions.php中的一些代码：

```
add_action("admin_init", "admin_init");
function admin_init()
    {
        add_meta_box("price", "Price", "price_field", "product", "normal", "high");
        add_meta_box("details", "Details", "details_field", "product", "normal", "high");
    }

    function price_field()
    {
        global $post;
        $custom = get_post_custom($post->ID);
        $price = $custom["price"][0];
        ?>
        <label>Price: $</label>
        <input name="price" value="<?php echo $price; ?>" />
        <?php
    }

    function details_field()
    {
        global $post;
        $custom = get_post_custom($post->ID);
        $details = $custom["details"][0];
        ?>
        <label>Details:</label>
        <input name="details" rows='5' value="<?php echo $details; ?>" />
        <?php
    }

    /*--------------------------------*/
    /* Save PRICE and DETAILS fields */
    /*--------------------------------*/
    add_action('save_post', 'save_details');
    function save_details()
    {
        global $post;
        update_post_meta($post->ID, "price", $_POST["price"]);
        update_post_meta($post->ID, "details", $_POST["details"]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:42:47.600

这是因为您没有在保存详细信息方法中添加过滤。请记住，一旦帖子自动保存在草稿中，即使您没有单击更新或发布按钮，也会调用动作挂钩“save_post”。试试这个

```
add_action('save_post', 'save_details');

 function save_details($post_id){
      if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE )
            return;

        // uncomment if youre using nonce
        //if ( !wp_verify_nonce( $_POST['my_noncename'], plugin_basename( __FILE__ ) ) )
          //       return;

        // Check permissions
        //change the "post" with your custom post type
        if ( 'post' == $_POST['post_type'] )
        {
           if ( !current_user_can( 'edit_page', $post_id ) )
                return;
        }
        else
        {
           if ( !current_user_can( 'edit_post', $post_id ) )
                return;
        }

      //if success go to your process
      //you can erase your global $post and dont use $post->ID rather change it with $post_id since its our parameter
      update_post_meta($post_id, "price", $_POST["price"]);
      update_post_meta($post_id, "details", $_POST["details"]);
 } 
```

**注意：**在**if ( 'post' == $_POST['post_type'] )**行中，将“post”更改为您的帖子类型

# python - 使用字典来保存多项式系数；添加

> ID：13201479
> 
> 赞同：-4
> 
> 时间：2012-11-02T19:02:27.900
> 
> 标签：python, class, dictionary

我需要有关此代码的帮助。当我在终端中运行它时，我得到：

```
<__main__.Polynomial instance at 0x2b6ae51c80e0>
<__main__.Polynomial instance at 0x2b6ae51c84d0>
Traceback (most recent call last):
  File "Polynomial_dict1.py", line 36, in <module>
    print p+p2
  File "Polynomial_dict1.py", line 22, in __add__
    result_d[key] = other.d[:]
TypeError: unhashable type 
```

我不知道出了什么问题。这是代码：

```
from Polynomial import*
class Polynomial:
    def __init__(self, dictionary):
        self.d = dictionary

    def __call__(self, x):
        s = 0

        for key in d.keys:
            s += self.d[key]*x**key
        return s

    def __add__(self, other):
        if len(self.d)>len(other.d):
            result_d = self.d[:]        # copy
            for key in d.keys:
                result_d[key] += other.get(key,0)
        else:
            result_d = other.d[:]
            for key in d.keys:
                result_d[key] += self.d.get[key,0]
        return Polynomial(result_d)     

p = Polynomial({1:1,100:-3})
p2 = Polynomial({1:-1,20:1,100:4})

print p 
print p2
print p+p2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:11:15.087

据我所知，您正在尝试在字典 ( `self.d[:]`) 上使用切片语法。那是行不通的。要制作副本，您需要`self.d.copy()`.

* * *

您还会在此行收到错误消息：

```
result_d[key] += self.d.get[key,0] 
```

它应该是：

```
result_d[key] += self.d.get(key,0) 
```

* * *

还，

```
for key in d.keys: 
```

不起作用，因为`keys`它是一种*方法*——你需要调用它：

```
for key in self.d.keys(): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T10:43:58.097

我假设他正在尝试以下内容：

他想创建一个可以添加多项式的程序。其中多项式系数和幂作为字典实现到程序中。

```
p = Polynomial({1:1, 100:-3})
p2= Polynomial({1:-1, 20:1, 100:4}) 
```

其中关键是功率，值是功率的系数。

p 和 p2 的数学形式是：

x - 3x* *100 {1:1, 100:-3} 和 x* *20 - x + 4x**100 {1:-1, 20:1, 100:4}

并且打印语句应产生以下内容： x* *20+x* *100

我很好奇您将如何调用**add**方法，还是在添加 2 个实例时自动完成？

因为上面提到的打印语句在运行时给出了这个：

```
Terminal > python stack_overflow.py 
    <__main__.Polynomial instance at 0x7f6879fffd88>
    <__main__.Polynomial instance at 0x7f6879fffe18>
    <__main__.Polynomial instance at 0x7f6879fffe60> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T00:45:08.790

这是您的代码版本，它消除了所有语法问题并使您的代码无错误地运行，尽管我真的不知道您是否想要这样做。

```
from Polynomial import*
class Polynomial:
    def __init__(self, dictionary):
        self.d = dictionary

    def __call__(self, x):
        s = 0
        for key in d.keys():
            s += self.d[key] * x**key
        return s

    def __add__(self, other):
        if len(self.d)>len(other.d):
            result_d = self.copy()
            for key in self.d:
                result_d[key] += other.get(key, 0)
        else:
            result_d = other.d.copy()
            for key in other.d:
                result_d[key] += self.d.get(key, 0)

        return Polynomial(result_d)

p = Polynomial({1:1, 100:-3})
p2 = Polynomial({1:-1, 20:1, 100:4})

print p
print p2
print p+p2 
```

这是已修复/更改的所有内容的列表：

`result_d = self.d[:]`--> `result_d = self.d.copy()`
`result_d = other.d[:]`-->`result_d = other.d.copy()`

在其他地方，我将语句更改`for key in d.keys:`为`for key in d:`
（尽管`for key in d,keys():`也可以）。

在一行中你有`result_d[key] += self.d.get[key,0]`
而不是`result_d[key] += self.d.get(key,0)`

我把它留在了，但一`from Polynomial import*`开始可能也是一个错误，因为它会导致脚本自行导入并基本上运行两次。

在此处发布问题之前，您确实应该尝试从代码中获取语法错误（除非您不能，这是您的问题）。

# javascript - 如何使用正则表达式检索类路径字符串的所有部分？

> ID：13201481
> 
> 赞同：0
> 
> 时间：2012-11-02T19:02:26.903
> 
> 标签：javascript, regex

例如，我有以下格式的路径：

```
f1/f2/f3/aaa 
```

我希望匹配组返回如下内容：

```
["f1", "f2", "f3", "aaa"] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T19:04:19.973

不要为此使用正则表达式：

```
var str = "f1/f2/f3/aaa",
    arr = str.split('/');
console.log(arr); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DQn5M/)。

这最终会为您提供一个*真正的*数组，而使用正则表达式，您最多只能得到一个类似数组的字符串*。*这似乎有些毫无意义。

如果您必须使用正则表达式方法：

```
var str = "f1/f2/f3/aaa",
    arr = str.match(/(\w+)/g);
console.log(arr)​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DQn5M/1/)。

看看那是多么难以理解。还有它有多脆弱（因为使用这种方法，它要求分隔符是非字母数字（或`_`）字符）。在*这种*情况下，确实没有充分的理由使用正则表达式。

# java - 添加对战争建设的额外依赖

> ID：13201482
> 
> 赞同：0
> 
> 时间：2012-11-02T19:02:31.507
> 
> 标签：java, maven, maven-war-plugin

我有带有下一个模块的 Maven 项目：`app`, `app-impl`, `web`. 我用 maven-war-plugin 构建网络。现在`app-impl`取决于`app`. `web`取决于`app-impl`。

但`web`应该只取决于`app`. 通过一些神奇的 maven-war-plugin 应该包含`app-impl`在战争中。我可以在没有额外的 Maven 模块的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:35:40.060

我绝对同意@Torsten，但您的请求中可能有一些有效的东西：

在使用 IDE 开发项目时，您可以要求它停止在代码完成列表中提供您的*实现类。*

如果这是您的原因，只需添加两个依赖项，对于实现之一，指定`<scope>runtime</scope>`. 这可确保：

*   您的`app`模块进入 javac 的类路径，但`app-impl`没有
*   两者都`app`将`app-impl`被置于`WEB-INF/lib/`你的战争之下
*   IDE（如果实施得当）不会为您提供完成`app-impl`

这绝对不会为您节省击键次数，而是为您提供更好的 pom，仔细建模现实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:15:29.247

`app`恕我直言，对in的依赖`web`并不能反映现实，因为您的 Web 应用程序确实依赖于我假设您在`app`.

考虑在 let say 中有一个替代实现`app-impl2`。maven 怎么可能决定它应该选择哪个实现？

因此，让 web 依赖于 app-impl 对我来说是可行的方法，并且鉴于上述设置也应该开箱即用。

# factory-bot - FactoryGirl：如何将工厂中的属性值传递给它的关联

> ID：13201483
> 
> 赞同：4
> 
> 时间：2012-11-02T19:02:35.420
> 
> 标签：factory-bot

如何将 :subscriber 工厂中的 'email' 属性值传递给它的关联 :authentication

例如：

```
factory :subscriber, :class => Subscriber do                                                                                                   
  sequence(:name) { |n| "test_user_#{n}" }                                                                                                     
  sequence(:email) { |n| "test_user_#{n}@example.com"}                                                                                                                   
  association :authentication, factory: :authentication, email: email       
end

factory :authentication do
  sequence(:email) { |n| "test_user_#{n}@example.com"} 
  password 'pass'
end 
```

给我错误

```
ArgumentError:
   Trait not registered: email 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T02:51:47.117

我认为您需要使您的关联调用动态化，因为电子邮件变量可能会发生变化：

```
authentication {association :authentication, email: email} 
```

# php - mySQL 中的复杂查询（在多个表中搜索用户）

> ID：13201485
> 
> 赞同：1
> 
> 时间：2012-11-02T19:02:46.580
> 
> 标签：php, mysql, wordpress

我有这种结构的表。

表 #1：用户（ID，用户名）

```
1, 'john777'
2, 'andy'
3, 'tom' 
```

表 #2：user_meta (meta_ID, user_ID, 'meta_name', 'meta_value')

```
1, 1, 'first_name', 'John'
2, 1, 'last_name', 'Smith'
3, 2, 'first_name', 'Andy'
4, 2, 'last_name', 'Pete'
5, 3, 'first_name', 'Thomas'
6, 3, 'last_name', 'Tan'
7, 3, 'other_random_meta', 'abcxyz' 
```

对于熟悉 WordPress 的你们来说，这是他们的数据库结构。我想要做的是根据用户名和全名（由名字和姓氏组成）获取与我的搜索词匹配的用户的用户 ID。

换句话说，我希望搜索为这些搜索词返回 1：“joh”、“john7”、“smith”、“john smi”、“smith jo”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:06:29.273

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:44:42.277

```
SELECT DISTINCT ID FROM 
(SELECT ID AS ID FROM users WHERE user_name LIKE 'YOURSEARCH%' 
UNION 
SELECT t1.user_id FROM 
  (SELECT user_id, meta_value AS firstName FROM user_meta WHERE meta_name ='first_name') AS t1 
INNER JOIN 
  (SELECT user_id, meta_value AS lastName FROM user_meta WHERE meta_name ='last_name') AS t2 ON t1.user_id=t2.userID 
WHERE concat_ws(' ',lastName,firstName) LIKE'YOURSEARCH%') 
```

这应该会为您提供与您的搜索条件相匹配的唯一用户 ID

# iphone - MappingProvider 的 errorMapping 总是失败：找不到 keyPath 的对象映射：''

> ID：13201486
> 
> 赞同：0
> 
> 时间：2012-11-02T19:02:48.087
> 
> 标签：iphone, ios, restkit

我在映射我的 API 错误时遇到了困难。我正在使用这样的块加载请求：

```
[self.objectManager loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader) {
    loader.onDidLoadObjects = ^(NSArray *objects) {
        // ...
    };
    loader.onDidFailLoadWithError = ^(NSError *error) {
        // ...
    };
    loader.onDidFailWithError = ^(NSError *error) {
        // ...
    };
}]; 
```

在服务器端，例如，如果我尝试使用错误的用户名/密码对用户进行身份验证，我的 API 会返回并出现以下格式的错误：

```
{ "error":
    {"code":"401",
    "message":"Wrong username etc. etc."}
} 
```

在[对象映射文档](https://github.com/RestKit/RestKit/wiki/Object-mapping)中，我发现了以下内容：

> ### RKErrorMessage
> 
> 一个简单的类，用于将服务器端错误消息映射回 NSError 对象 [...] 当初始化 RKObjectManager 时，从“错误”和“错误”键路径到 RKErrorMessage 实例的对象映射注册到映射提供程序. 这为简单的错误消息提供了开箱即用的映射支持。[...]

我将其解释为对象加载器会自动映射任何“错误”和“错误”键路径，并且 didFailWithError: （或块）将被调用。但是，情况并非如此。每次从 API 加载错误响应时，我都会收到此错误：

> 添加映射错误：找不到 keyPath 的对象映射：''

我已经尝试过[这个问题](https://stackoverflow.com/questions/10851239/how-do-i-setup-restkit-0-10-0-to-recognize-error-and-errors-messages)和[这个问题](https://stackoverflow.com/questions/9841203/restkit-json-error-response-msg-from-server)的解决方案，但结果是一样的。

我知道 json 是从我的 API 加载的，我已经在调试器中跟踪了它。此外，如果我创建一个 RKObjectMapping 并将其映射到“错误”keyPath，onDidLoadObjects 块会被一个错误对象触发，但这不是我打算做的。

长话短说，我的目标是让 RestKit 在我的 API 返回“错误”keyPath 时触发 onDidFailWithError 块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T17:18:20.700

根据您的问题，我认为问题出在您的服务器上，错误响应为 2xx 状态码。

其他可能性是使用早于您提到的文档的 RK 版本，或者您可能发现了一个错误:)

# c++ - C++ - 在声明之外定义模板成员函数

> ID：13201489
> 
> 赞同：1
> 
> 时间：2012-11-02T19:02:53.427
> 
> 标签：c++, templates, overloading

我有一个模板结构，我想像这样“重载”：

```
#include <iostream>

template <typename T, typename U = int>
struct foo {
    void operator()(T, U);
}

template <typename T, typename U = int>
void foo::operator()(T a, U b){
    std::cout << "T, U ()\n";
}

template <typename T>
struct foo<T, int> {
    void operator()(T);
}

template <typename T>
void foo<T, int>::operator()(T a){
    std::cout << "T ()\n";
}

int main(int argc, char **argv){
    foo<int> a;
    foo<int, char> b;

    a(1);
    b(2, 'b');

    return false;
} 
```

但是在编译时出现以下错误：

```
($ g++ test.cpp -o test)
test.cpp:11:6: error: 'template<class T, class U> struct foo' used without template parameters
test.cpp:11:30: error: 'void operator()(T, U)' must be a nonstatic member function 
```

这很奇怪，因为 foo< T, int >::operator() 的定义似乎工作得很好。另外，当我像这样定义内联函数时：

```
template <typename T, typename U = int>
struct foo {
    void operator()(T a, U b){ std::cout << "T, U ()\n"; }
} 
```

它可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:11:50.630

您必须使用这些模板参数来指定哪个 foo, `foo<T,U>::operator()`. 并从定义中删除默认模板参数值。

```
template <typename T, typename U>    // don't use a default parameter
void foo<T,U>::operator()(T a, U b){ // don't forget the <T,U> here
    std::cout << "T, U ()\n";
} 
```

您还忘记了模板类定义后的分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:05:08.137

您只能在函数原型上指定一次默认模板参数（如果该函数具有原型）。

```
template <typename T, typename U = int> void f();
// ....

template <typename T, typename U = int> void f() {} 
```

那是不必要的。简单地说：

```
template <typename T, typename U> void f() {} 
```

# c++ - 选择排序比较

> ID：13201494
> 
> 赞同：0
> 
> 时间：2012-11-02T19:03:05.207
> 
> 标签：c++

我必须跟踪此选择排序中的所有比较，但是当我这样做时，仅返回 1 作为 1000 列表中的值。我不确定我是否正确实现了它，但我确定我正确放置了比较计数/ . 通常，选择排序具有固定数量的关键比较，但我们的讲师禁止使用公式来跟踪它们。我很好奇为什么这个输出不断返回：

```
comp = 1
swap = 1 

template <class elemType>
void selectionSort(elemType list[], int length)
{
    int loc, minIndex;
    int first; 
    int last, second;
    int swaps =0;
    int comp = 0;

    minIndex = first;
    for (loc = 0; loc < length; loc++)
    {
        comp+=1; 

        for(loc = first +1; loc<=last; loc++)
        {
            comp+=1;
            if(list[loc]<list[minIndex])
                minIndex=loc;
            comp+=1;
        }
        elemType temp;
        temp= list[first];
        list[first]= list[second];
        list[second] = temp;

        swaps+=1;
    }

    //  comp = (length *(length-1)/2);

    cout<<"swaps= "<<swaps<<endl;
    cout<<"comps= "<<comp<< endl;
} 
```

任何想法表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:08:45.313

我猜你的排序本身不起作用。您需要正确初始化`last`,`first`和`second`变量（特别是`last`），然后移动（增量）它们。

**由于您的`last`变量默认为`0`**`loc<=last`，因此由于第二个 for 循环中的条件如您所愿，它不会执行迭代。我认为您需要将其初始化为：

```
 last = length-1; 
```

**还有一个问题：**在两个循环中，您都使用相同的索引变量，即`loc`。我认为您需要使用两个不同的变量。

```
for (loc = 0; loc < length; loc++)
{
  comp+=1; 
   for(loc = first +1; loc<=last; loc++)
   { 
```

**一旦您修复了逻辑以使其执行完整排序，您将获得正确的计数。**

# gcc - x86_64 上的软浮点

> ID：13201495
> 
> 赞同：15
> 
> 时间：2012-11-02T19:03:10.977
> 
> 标签：gcc, clang, cross-compiling

我为没有 FPU 的嵌入式系统开发软件。我希望能够在我的桌面上使用软件浮点库构建这个软件，以获得更真实的性能视图。有没有人对如何实现这一目标有任何想法？

到目前为止，我在使用`-msoft-float`gcc 方面没有取得太大进展。我目前正在考虑使用clang。通过使用标志`-Xclang -msoft-float -Xclang -no-implicit-float`并指定一个实现软浮点例程的库，我可以编译我的应用程序。当我尝试运行它时，它总是出现段错误。据我所知，这是因为该程序所依赖的库不是使用软浮点编译的。该应用程序依赖于 gtk、sqlite、expat、gcrypt、一些内部库和 libc。

我想尝试弄清楚如何构建具有软浮点支持的完整构建环境。我尝试了 uclibc 的 buildroot 和设置`CC`以及`CXX`clang 的二进制文件，但是由于编译 gcc 工具链的要求（例如 autotools 抱怨编译器版本不正确），这不起作用。由于我想在新的 buildroot 中使用 clang 作为编译器（为了获得软浮点支持），我认为构建 gcc 的必要性并不高。没有gcc可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T16:13:46.073

如果没有一些额外的库，GCC 无法开箱即用。基本上，`-msoft-float`只需生成对浮点库的调用，但所需的库不是 GCC 的一部分。

要链接`soft-fp`库，您可以使用 switch `-lsoft-fp`。

X86_64 架构包含 SSE 扩展，因此编译器将尝试为 + - * / 等基本操作生成 SSE 代码。我们将使用`-mno-sse`switch 来抑制这种未经授权的行为。

它可能如下所示：

```
gcc -g -msoft-float -mno-sse -m64 -lsoft-fp 
```

对于代码：

```
int main()
{
    float a = 10;
    float b = 20;

    float c = a * b;

    return 0;
} 
```

生成的程序集将是：

```
 .file   "12.cpp"
    .def    __main; .scl    2;  .type   32; .endef
    .def    __mulsf3;   .scl    2;  .type   32; .endef
    .text
    .globl  main
    .def    main;   .scl    2;  .type   32; .endef
    .seh_proc   main
main:
    pushq   %rbp
    .seh_pushreg    %rbp
    movq    %rsp, %rbp
    subq    $48, %rsp
    .seh_stackalloc 48
    .seh_setframe   %rbp, 48
    .seh_endprologue
    call    __main
    movl    .LC0(%rip), %eax
    movl    %eax, -4(%rbp)
    movl    .LC1(%rip), %eax
    movl    %eax, -8(%rbp)
    movl    -8(%rbp), %edx
    movl    -4(%rbp), %ecx
    call    __mulsf3
    movl    %eax, -12(%rbp)
    movl    $0, %eax
    addq    $48, %rsp
    popq    %rbp
    ret
    .seh_endproc
    .section .rdata,"dr"
    .align 4
.LC0:
    .long   1092616192
    .align 4
.LC1:
    .long   1101004800
    .ident  "GCC: (GNU) 4.8.0 20120624 (experimental)" 
```

没有生成 SSE 指令。注意对 的调用`__mulsf3`。

在这个问题中可以找到一些有趣的想法：[Using software floating point on x86 linux](https://stackoverflow.com/q/1018638/1065190)

# java - 字符串只包含字母

> ID：13201497
> 
> 赞同：5
> 
> 时间：2012-11-02T19:03:29.320
> 
> 标签：java, string

我是 Java 编程新手，我需要帮助。创建一个字符串表，用户给出大小。随后，用户给出字符串。我想打印字符但不打印不是字母的字符（例如 java!4 --> java, ja/?,.va --> java）

```
public static void main (String[] args) {

String[] x = new String[size];
int size;
String str= "";

BufferedReader input = new BufferedReader(new InputStreamReader(System.in));

System.out.print("Give me size: ");
size = Integer.parseInt(input.readLine());

    for(int i=0; i<size; i++){
    System.out.print("Give me a String: ");
    str = input.readLine();
    x[i]=str;
    }

} 
```

我正在网上寻找这段代码：

```
 if (str.matches("[a-zA-Z]")){
System.out.println(str);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:08:48.150

你可以用一个非常简单的正则表达式来做到这一点： `s/[^A-z]//g`. 这将不替换字符串中不在 range 中的`A-z`所有字符，它封装了所有字母（大写和小写）。干脆做`new_string = old_string.replaceAll("[^A-z]", "");`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T19:13:12.410

Since you're new to programming and don't want to involve in the RegEx world (yet), you can create a method that returns a `String` with letters only:

```
public String getStringOfLettersOnly(String s) {
    //using a StringBuilder instead of concatenate Strings
    StringBuilder sb = new StringBuilder();
    for(int i = 0; i < s.length(); i++) {
        if (Character.isLetter(s.charAt(i))) {
            //adding data into the StringBuilder
            sb.append(s.charAt(i));
        }
    }
    //return the String contained in the StringBuilder
    return sb.toString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:05:18.387

您可以检查 a`string`是否仅`alphabets`使用正则表达式。下面是示例代码

```
String word = "java";
Pattern pattern = Pattern.compiles("[a-zA-Z]+");
Matcher matcher = pattern.matcher(word);
System.out.println(pattern.find()); 
```

或者您可以`String.matches(regex)`从[String API](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)使用。您可以在此处阅读有关[Java 中的 REGEX 的](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)更多信息。

# mysql - 插入多个对象的 SQLAlchemy 错误

> ID：13201498
> 
> 赞同：1
> 
> 时间：2012-11-02T19:03:33.313
> 
> 标签：mysql, python-3.x, sqlalchemy

这可能是我缺少的一些简单的东西，但我不知道它是什么。

这是我的代码：

```
from sqlalchemy import (Column, String, create_engine)
from sqlalchemy.schema import FetchedValue
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import (scoped_session, sessionmaker)

DBSession = scoped_session(sessionmaker())
Base = declarative_base()

class Timezone(Base):
    __tablename__ = 'timezone'
    tz_name = Column(String(100), primary_key=True)
    description = Column(String(100), nullable=False)

if __name__ == '__main__':
    engine = create_engine('mysql+mysqlconnector://root@127.0.0.1/mainserver?charset=utf8&use_unicode=0', echo=True)
    DBSession.configure(bind=engine)
    Base.metadata.drop_all(engine)
    Base.metadata.create_all(engine)
    session = DBSession()
    session.add_all([
        Timezone(tz_name = "Canada/Atlantic", description = "Atlantic (UTC-4)"),
        Timezone(tz_name = "Canada/Central", description = "Central (UTC-6)"),
        Timezone(tz_name = "Canada/Eastern", description = "Eastern (UTC-5)"),
        Timezone(tz_name = "Canada/Mountain", description = "Mountain (UTC-7)"),
        Timezone(tz_name = "Canada/Newfoundland", description = "Newfoundland (UTC-3:30)"),
        Timezone(tz_name = "Canada/Pacific", description = "Pacific (UTC-8)"),
        Timezone(tz_name = "Canada/Saskatchewan", description = "Saskatchewan (UTC-6)"),
        Timezone(tz_name = "Canada/Yukon", description = "Yukon (UTC-8)"),
    ])
    session.flush()
    session.commit() 
```

这是发生错误的输出：

```
2012-11-02 18:52:32,343 INFO sqlalchemy.engine.base.Engine SELECT DATABASE()
2012-11-02 18:52:32,343 INFO sqlalchemy.engine.base.Engine {}
2012-11-02 18:52:32,346 INFO sqlalchemy.engine.base.Engine SHOW VARIABLES LIKE 'lower_case_table_names'
2012-11-02 18:52:32,346 INFO sqlalchemy.engine.base.Engine {}
2012-11-02 18:52:32,347 INFO sqlalchemy.engine.base.Engine SHOW COLLATION
2012-11-02 18:52:32,348 INFO sqlalchemy.engine.base.Engine {}
2012-11-02 18:52:32,364 INFO sqlalchemy.engine.base.Engine SHOW VARIABLES LIKE 'sql_mode'
2012-11-02 18:52:32,364 INFO sqlalchemy.engine.base.Engine {}
2012-11-02 18:52:32,365 INFO sqlalchemy.engine.base.Engine DESCRIBE `timezone`
2012-11-02 18:52:32,366 INFO sqlalchemy.engine.base.Engine {}
2012-11-02 18:52:32,366 INFO sqlalchemy.engine.base.Engine ROLLBACK
2012-11-02 18:52:32,367 INFO sqlalchemy.engine.base.Engine DESCRIBE `timezone`
2012-11-02 18:52:32,367 INFO sqlalchemy.engine.base.Engine {}
2012-11-02 18:52:32,368 INFO sqlalchemy.engine.base.Engine ROLLBACK
2012-11-02 18:52:32,369 INFO sqlalchemy.engine.base.Engine 
CREATE TABLE timezone (
    tz_name VARCHAR(100) NOT NULL, 
    description VARCHAR(100) NOT NULL, 
    PRIMARY KEY (tz_name)
)

2012-11-02 18:52:32,369 INFO sqlalchemy.engine.base.Engine {}
2012-11-02 18:52:32,434 INFO sqlalchemy.engine.base.Engine COMMIT
2012-11-02 18:52:32,436 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)
2012-11-02 18:52:32,437 INFO sqlalchemy.engine.base.Engine INSERT INTO timezone (tz_name, description) VALUES (%(tz_name)s, %(description)s)
2012-11-02 18:52:32,437 INFO sqlalchemy.engine.base.Engine ({'tz_name': 'Canada/Atlantic', 'description': 'Atlantic (UTC-4)'}, {'tz_name': 'Canada/Central', 'description': 'Central (UTC-6)'}, {'tz_name': 'Canada/Eastern', 'description': 'Eastern (UTC-5)'}, {'tz_name': 'Canada/Mountain', 'description': 'Mountain (UTC-7)'}, {'tz_name': 'Canada/Newfoundland', 'description': 'Newfoundland (UTC-3:30)'}, {'tz_name': 'Canada/Pacific', 'description': 'Pacific (UTC-8)'}, {'tz_name': 'Canada/Saskatchewan', 'description': 'Saskatchewan (UTC-6)'}, {'tz_name': 'Canada/Yukon', 'description': 'Yukon (UTC-8)'})
2012-11-02 18:52:32,438 INFO sqlalchemy.engine.base.Engine ROLLBACK
Traceback (most recent call last):
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py", line 1680, in _execute_context
    context)
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/default.py", line 330, in do_executemany
    cursor.executemany(statement, parameters)
  File "/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py", line 493, in executemany
    return self._batch_insert(operation,seq_params)
  File "/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py", line 449, in _batch_insert
    return self.execute(stmt)
  File "/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py", line 418, in execute
    self._handle_result(self._connection.cmd_query(stmt))
  File "/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/connection.py", line 512, in cmd_query
    result = self._handle_result(self._send_cmd(ServerCmd.QUERY, query))
  File "/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/connection.py", line 434, in _handle_result
    raise errors.get_exception(packet)
mysql.connector.errors.ProgrammingError: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_nam' at line 1

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "bug2.py", line 32, in <module>
    session.flush()
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/session.py", line 1718, in flush
    self._flush(objects)
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/session.py", line 1789, in _flush
    flush_context.execute()
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/unitofwork.py", line 331, in execute
    rec.execute(self)
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/unitofwork.py", line 475, in execute
    uow
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/persistence.py", line 64, in save_obj
    table, insert)
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/persistence.py", line 530, in _emit_insert_statements
    execute(statement, multiparams)
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py", line 1449, in execute
    params)
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py", line 1584, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py", line 1698, in _execute_context
    context)
  File "/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py", line 1843, in _handle_dbapi_exception
    from e
sqlalchemy.exc.ProgrammingError: (ProgrammingError) 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_nam' at line 1 'INSERT INTO timezone (tz_name, description) VALUES (%(tz_name)s, %(description)s)' ({'tz_name': 'Canada/Atlantic', 'description': 'Atlantic (UTC-4)'}, {'tz_name': 'Canada/Central', 'description': 'Central (UTC-6)'}, {'tz_name': 'Canada/Eastern', 'description': 'Eastern (UTC-5)'}, {'tz_name': 'Canada/Mountain', 'description': 'Mountain (UTC-7)'}, {'tz_name': 'Canada/Newfoundland', 'description': 'Newfoundland (UTC-3:30)'}, {'tz_name': 'Canada/Pacific', 'description': 'Pacific (UTC-8)'}, {'tz_name': 'Canada/Saskatchewan', 'description': 'Saskatchewan (UTC-6)'}, {'tz_name': 'Canada/Yukon', 'description': 'Yukon (UTC-8)'}) 
```

似乎代码中的某些内容没有进行正确的标签替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:37:31.283

I filed a bug with the SQLAlchemy devs and found that the issue was with the mysqlconnector. Here's the bug report: [http://www.sqlalchemy.org/trac/ticket/2599](http://www.sqlalchemy.org/trac/ticket/2599)

Here's the short version... changing

```
engine = create_engine('mysql+mysqlconnector://root@127.0.0.1/mainserver?charset=utf8&use_unicode=0', echo=True) 
```

into

```
engine = create_engine('mysql+mysqlconnector://root@127.0.0.1/mainserver?charset=utf8&use_unicode=0', paramstyle='format', echo=True) 
```

will fix the problem by working around the issue with mysqlconnector.

# r - R：图例表达式如何在两个值之间添加逗号以及如何抑制科学记数法

> ID：13201503
> 
> 赞同：3
> 
> 时间：2012-11-02T19:04:20.133
> 
> 标签：r, plot, expression, legend, plotmath

我正在尝试在我的情节中格式化图例，但由于希腊语和上标，我必须使用 expression() 。但是，当我想显示 r^2 = 0.45, P<0.0001，当我输入时，我得到 r^2 = 0.45 P<1e-04

```
legend(expression(r^2==0.9230~~P<0.0001)) 
```

我尝试查找 list() 函数，但它对逗号没有帮助。我也找不到在 expression() 函数中使用小数的任何内容。

任何建议，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T19:21:50.980

You can use `paste()` (within the call to `expression()`) to splice together character strings and unquoted expressions. The unquoted bits will be evaluated using the special rules exhibited by `example(plotmath)` and `demo(plotmath)`, while the character strings will be printed verbatim.

Here's an example (which also uses `phantom()`, because the `<` operator expects/needs **something** to both its left and its right):

```
plot(1)
legend(x = "topleft", 
       legend = expression(paste(r^2==0.9230, ",  ", P<phantom(), "0.0001"))) 
```

![enter image description here](../Images/ce49b2fe47069ccb453c505a460cfeb8.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T19:38:01.093

这是另一种使用方法`substitute`，可以避免`phantom`：

```
plot(1)
options(scipen=10)
legend(x = "topleft", 
       legend = substitute(list(r^2 == r2, P < p), list(r2=0.923, p=0.0001))) 
```

![在此处输入图像描述](../Images/9e5aeb307edae7d34ba661f24be65df7.png)

# c# - 如何自动刷新页面？

> ID：13201505
> 
> 赞同：0
> 
> 时间：2012-11-02T19:04:30.103
> 
> 标签：c#, javascript, jquery, asp.net, visual-studio-2010

如果 pc1 和 pc2 在同一页面上。pc1更改字段的状态，如何获取pc2的aspx页面以获取更新而不刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:07:29.607

我建议检查[SignalR](https://github.com/SignalR/SignalR)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:56:19.480

简短的回答是你需要更多的力量。

您可以使用[ajax 推送引擎](http://www.ape-project.org/)。这很好，因为服务器端和客户端代码都是用 JavaScript 编写的。

如果你喜欢 Flash，Flash 可以做这种事情。但我不确定如何。

# c++ - 如何在 C++ 中进行 SystemVerilog 样式的位向量切片分配？

> ID：13201507
> 
> 赞同：4
> 
> 时间：2012-11-02T19:04:38.797
> 
> 标签：c++, bitset, system-verilog

我正在将一些 SystemVerilog 代码移植到 SystemC/C++。我正在使用 std::bitset 来表示位向量，但我可以看到它已经没有提供访问切片的方法。

例如，如果我想使用 SystemVerilog 代码将 reg1 设置为 reg2 的第 4-8 位：

```
bit [3:0] reg1;
bit [15:0] reg2;
reg1 = reg2[7:4]; 
```

我怎么能用 std::bitset 做到这一点？

```
bitset<4> reg1;
bitset<16> reg2;
reg1[0] = reg2[4];
reg1[1] = reg2[5];
reg1[2] = reg2[6];
reg1[3] = reg2[7]; 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:39:42.610

现在你在使用 SystemC，为什么不使用 sc_bv<> 来原生地表示 HDL 信号呢？因为 SystemC 有一组数据类型来表示 HDL 位/逻辑和字逻辑运算符，所以将 SystemVerilog/Verilog 数据类型映射到 C/C++ 代码应该更容易。

```
sc_bv<4> reg1;
sc_bv<16> reg2;
reg1 = reg2.range(7,4); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T19:14:37.803

If your want to operate on bitsets - then use to_string function:

```
bitset<4> reg1;
bitset<16> reg2;
reg1 = bitset<4>(reg2.to_string().substr(4,4)); 
```

This is not very efficient way, but should work.

If you do not have bitsets bigger than 32 or 64 bits - then use version with `to_ulong` or `to_ullong` - it should be more efficient.

Also consider to use `std::vector<bool>` instead of `std::bitset<>`. Folks here have tendency to make downvote every time they see `std::vector<bool>`, but it could be more efficient here:

```
vector<bool> reg1(4);
vector<bool> reg2(16);
reg1.assign(reg2.begin() + 4, reg2.begin() + 8); 
```

# css - 从左到右延伸的 CSS 横幅

> ID：13201509
> 
> 赞同：0
> 
> 时间：2012-11-02T19:04:48.107
> 
> 标签：css

通常对于我的网页，我将有一个`#wrapper`DIV 包装整个页面并设置为：

```
#wrap {position: relative; width: 1000px; display: block; margin: auto;} 
```

我的问题是，如果里面有这样的横幅：

```
#banner {width: 100%; display: block; height: 100px; background :#CCC;} 
```

然后，我希望该横幅*超出*#wrapper 的边缘并到达窗口的两侧，无论窗口有多大。

我怎样才能做到这一点？

这是我可以拼凑的JS小提琴：http: [//jsfiddle.net/MCms6/](http://jsfiddle.net/MCms6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:13:01.673

To solve all your issues:

1.  Make a container element for your `#banner`, so it can follow the flow of your document. Also position it relative to make it the parent to your banner.

2.  Position `#banner` absolutely and you can stretch it as wide as you want.

* * *

**UPDATE** - [**DEMO**](http://jsfiddle.net/MCms6/2/)

***HTML***

```
<div id="wrapper">
    <h1>my content my content my content my content my content my content my content my content </h1>

    <div id="bannerHolder">
        <div class="banner">
            my Banner
        </div>
    </div>

     <h1>more content more content more content more content more content more content more content</h1>
</div> 
```

***CSS***

```
#wrapper {
    width: 140px;
    display: block;
    margin: auto;
    background: #ccc;        
}

#bannerHolder {
    background: #aaa;
    display: block;
    height: 100px;
}

#bannerHolder .banner {
    border: 1px solid #f00;
    position: absolute;
    background: #555;
    left: 0;
    right: 0;
    height: 100px;   
} 
```

# objective-c - GMGridViewCell CustomView 按钮操作方法没有被调用？

> ID：13201511
> 
> 赞同：0
> 
> 时间：2012-11-02T19:04:55.247
> 
> 标签：objective-c, ios, gmgridview, gmgridviewcell

我有一个带有 GMGridView 的视图控制器，其中有 4 个 GMGridViewCells。对于每个单元格视图，我使用单独的视图控制器视图作为单元格的内容视图。正在加载到 GMGridVeiwCell 中的视图控制器具有按钮。当我点击 GMGridViewCell 中的按钮时，按钮的 IBAction 方法不会被调用。谁可以帮我这个事？如何捕捉按钮动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:17:32.373

一个简单的解决方案是`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch`在这样的`GMGridView`类中覆盖：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if(gestureRecognizer == _tapGesture) {

        UIView* touchedView = [touch view];
        if([touchedView isKindOfClass:[UIButton class]]) {

            return NO;
        }
    }

    return YES;
} 
```

说到这里，你可以依靠这个讨论来获得更多信息：[GMGridView 讨论](https://github.com/gmoledina/GMGridView/issues/68#issuecomment-5781322)。

让我知道这是否能解决问题。此外，你为什么要为每个自定义视图设置一个控制器？我认为实现您的目标的最简单方法是为您的自定义视图创建一个委托。委托将是包含`GMGridView`. 当您单击自定义视图中的按钮时，您会调用委托，然后做出相应的响应。

希望有帮助。

# javascript - 如果至少有一个复选框被剔除选中，有没有办法启用按钮？

> ID：13201514
> 
> 赞同：2
> 
> 时间：2012-11-02T19:05:05.577
> 
> 标签：javascript, jquery, knockout.js

我正在尝试查看是否可以找到与这部分 jQuery 相当的淘汰赛：

[http://jsfiddle.net/chriscoyier/BPhZe/76/](http://jsfiddle.net/chriscoyier/BPhZe/76/)

这是我到目前为止所要做的，但是所有项目都绑定到同一个可观察对象，所以它显然不起作用。

**html:**

```
<form>
<div>
    <input type="checkbox" name="option-1" id="option-1" data-bind="checked: buttonEnabled"> <label for="option-1">Option 1</label>
</div>
<div>
    <input type="checkbox" name="option-2" id="option-2" data-bind="checked: buttonEnabled"> <label for="option-2">Option 2</label>
</div>
<div>
    <input type="checkbox" name="option-3" id="option-3" data-bind="checked: buttonEnabled"> <label for="option-3">Option 3</label>
</div>
<div>
    <input type="checkbox" name="option-4" id="option-4" data-bind="checked: buttonEnabled"> <label for="option-4">Option 4</label>
</div>
<div>
    <input type="checkbox" name="option-5" id="option-5" data-bind="checked: buttonEnabled"> <label for="option-5">Option 5</label>
</div>

<div>
    <input type="button" value="Do thing" data-bind="enable: buttonEnabled">
</div>
</form> 
```

**javascript:**

```
var viewModel = {
    buttonEnabled: ko.observable(true)
};

ko.applyBindings(viewModel); 
```

[http://jsfiddle.net/dludlow/WdWEW/](http://jsfiddle.net/dludlow/WdWEW/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T19:16:12.813

是的。在此处查看更新的 jsFiddle：http: [//jsfiddle.net/WdWEW/4/](http://jsfiddle.net/WdWEW/4/)

我做了几件事。

1.  我为每个复选框添加了一个独特的`value`属性
2.  我将复选框绑定到名为`options`observableArray的视图模型上的新属性
3.  我更改`buttonEnabled`为计算属性，`true`如果`options`属性的长度大于零，则返回。

这是更新的视图模型。

```
var viewModel = function() {
    var self = this;
    this.options = ko.observableArray(),
    this.buttonEnabled = ko.computed(function() {
       return self.options().length > 0;
    });
};

ko.applyBindings(new viewModel()); 
```

这是更新的视图：

```
<form>
    <div>
        <input type="checkbox" name="option-1" id="option-1" value="1" data-bind="checked: options"> <label for="option-1">Option 1</label>
    </div>
    <div>
        <input type="checkbox" name="option-2" id="option-2" value="2" data-bind="checked: options"> <label for="option-2">Option 2</label>
    </div>
    <div>
        <input type="checkbox" name="option-3" id="option-3" value="3" data-bind="checked: options"> <label for="option-3">Option 3</label>
    </div>
    <div>
        <input type="checkbox" name="option-4" id="option-4" value="4" data-bind="checked: options"> <label for="option-4">Option 4</label>
    </div>
    <div>
        <input type="checkbox" name="option-5" id="option-5" value="5" data-bind="checked: options"> <label for="option-5">Option 5</label>
    </div>

    <div>
        <input type="button" value="Do thing" data-bind="enable: buttonEnabled">
    </div>
</form>​ 
```

# sql-server-2008 - 使用来自另一个存储过程中的参数调用存储过程的正确语法

> ID：13201516
> 
> 赞同：3
> 
> 时间：2012-11-02T19:05:09.487
> 
> 标签：sql-server-2008, tsql, stored-procedures

我很难建立在存储过程中调用存储过程的正确语法。我认为这种语法是正确的：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[newProc](
    @param1 varchar(50),
    @param2 nvarchar(2000),
    @param3 int,
    @param4 int,
    @param5 int,
    @param6 int
)
AS
BEGIN
    SET NOCOUNT ON;

    EXEC [dbo].[externProc1] @param1, @param2;
    GO

    EXEC [dbo].[externProc2] @param3, @param4;
    GO

    EXEC [dbo].[insertProc3] @param5, @param6;
    GO

END
GO 
```

但是当我尝试这个时，我不断收到“';'附近的语法不正确” 必须声明标量变量@param3。必须声明标量变量@param5。”

使用另一个存储过程中的参数调用存储过程的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:10:10.127

T-SQL 中的`GO`关键字表明一个 t-sql 语句块结束并执行该块。这意味着在一个块中定义的变量不再“在范围内”用于在该块结束/执行后发生的语句`GO`。

GO 实际上不是一个事务处理 sql 语句：

[http://msdn.microsoft.com/en-us/library/ms188037(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms188037(v=sql.105).aspx)

> 用户必须遵守批量规则。例如，在批处理中的第一条语句之后执行任何存储过程都必须包含 EXECUTE 关键字。本地（用户定义）变量的范围仅限于一个批处理，**并且不能在 GO 命令之后被引用**。

# c# - 填充DataSet时更新WPF进度条，全部使用Rx

> ID：13201519
> 
> 赞同：1
> 
> 时间：2012-11-02T19:05:15.497
> 
> 标签：c#, wpf, dataset, progress-bar, system.reactive

我对 Rx 有点陌生，所以如果这看起来很愚蠢或明显，请原谅......

我有一个应用程序，它在某个时间扫描选定的文件夹并递归检索所有文件，之后它需要将它们存储在数据库中。我想在该过程中显示一个进度条，同时保持 UI 响应当然。取消按钮在稍后阶段也会很好。

我已经使用 Rx 实现了这一点，如下所示：

```
// Get a list of all the files
var enumeratedFiles = Directory.EnumerateFiles(targetDirectory, "*.*", SearchOption.AllDirectories);

// prepare the progress bar
            double value = 0;
            progBar.Minimum = 0;
            progBar.Maximum = enumeratedFiles.Count();
            progBar.Value = value;
            progBar.Height = 15;
            progBar.Width = 100;
            statusBar.Items.Add(progBar);

var files = enumeratedFiles.ToObservable()
                .SubscribeOn(TaskPoolScheduler.Default)
                .ObserveOnDispatcher()
                .Subscribe(x =>
                    {
                        myDataSet.myTable.AddTableRow(System.IO.Path.GetFileNameWithoutExtension(x));
                        value++;
                    },
                    () =>
                    {
                        myDataSetTableAdapter.Update(myDataSet.myTable);
                        myDataSetTableAdapter.Fill(myDataSet.myTable);
                        statusBar.Items.Remove(progBar);
                    }); 
```

但是，对于上面的示例，UI 被锁定，并且在此过程中进度条不会更新。我认为这是因为 AddTableRow 方法阻塞了线程，尽管我认为 SubscribeOn(TaskPoolScheduler) 应该在新线程上运行任务？

我也尝试了几种不同的方法，结果各不相同。例如添加一个 .Do 行：

```
var files = enumeratedFiles.ToObservable()
                .Do(x => myDataSet.myTable.AddTableRow(System.IO.Path.GetFileNameWithoutExtension(x)))
                .SubscribeOn(TaskPoolScheduler.Default)
                .ObserveOnDispatcher()
                .Subscribe(x =>
                    {
                        value++;
                    },
                    () =>
                    {
                        myDataSetTableAdapter.Update(myDataSet.myTable);
                        myDataSetTableAdapter.Fill(myDataSet.myTable);
                        statusBar.Items.Remove(progBar);
                        btnCancel.Visibility = Visibility.Collapsed;
                    }); 
```

这实际上显示了进度条的更新，并且 UI 没有完全锁定，而是波涛汹涌，性能下降......

我尝试使用 BackgroundWorker 来完成相同的工作，但性能比上面的 Rx 方法差得多（例如，对于 21000 个文件，Rx 方法需要几秒钟，而 BackgroundWorker 需要几分钟才能完成）。

对于进度条的 ValueProperty 方法，我也看到了 Delegates 解决了类似的问题，但如果可能的话，我真的很想使用 Rx 来解决这个问题。

我在这里遗漏了一些明显的东西吗？任何建议将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:44:05.400

你写的东西的语义很奇怪：

1.  在 UI 线程上做整个文件操作
2.  拿走这些物品，然后产生一个新线程
3.  在那个线程上， Dispatcher.BeginInvoke
4.  在调用中，添加表格行

这似乎不是你真正想要的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:19:12.093

我找到了解决方案，以及有关正在发生的事情的更多详细信息：

在我提到的 DataSet 中插入行时的延迟仅在 Debug 模式下存在，而在没有 Debug 的情况下运行时，应用程序不会显示延迟，并且进度条和项目数的处理速度要快很多倍。愚蠢的我没有早点测试......

递归扫描文件时会有一点延迟（对于 21000 个文件有几秒钟的延迟），但由于它只在你第一次这样做时发生，所以我在随后的测试中没有注意到它，我只关注看起来的部分对我来说慢：填充数据集。我猜 Directory.EnumerateFiles 将所有内容缓存在内存中，因此任何其他读取相同文件的尝试都会立即完成？

此外，似乎不需要 myDataSetTableAdapter.Fill(myDataSet.myTable) 行，因为 .Update 方法已经将内容保存在数据库本身中。

对我有用的最终代码片段如下：

```
progBar.Height = 15;
progBar.Width = 100;
progBar.IsIndeterminate = true;
statusBar.Items.Add(progBar);

var files = Directory.EnumerateFiles(targetDirectory, "*.*", SearchOption.AllDirectories)
            .Where(s => extensions.Contains(System.IO.Path.GetExtension(s))) // "extensions" has been specified further above in the code
            .ToObservable(TaskPoolScheduler.Default)
            .Do(x => myDataSet.myTable.AddTableRow(System.IO.Path.GetFileNameWithoutExtension(x), x, "default")) // my table has 3 columns
            .TakeLast(1)
            .Do(_ => myDataSetmyTableTableAdapter.Update(myDataSet.myTable))
            .ObserveOnDispatcher()
            .Subscribe(xy =>
                {
                    //progBar.Value++; //commented out since I've switched to a marquee progress bar
                },
                () =>
                {
                    statusBar.Items.Remove(progBar);
                    btnCancel.Visibility = Visibility.Collapsed;
                }); 
```

这对我来说似乎很好，感谢所有帮助人员！

编辑：我进一步扩展了上述内容，包括取消按钮功能。如果用户单击“取消”按钮，则该过程立即停止。我试图让它尽可能优雅，所以我从取消按钮的 Click 事件中添加了一个 Observable，然后在上面的现有文件 Observable 中使用了 .TakeUntil。代码现在如下所示：

```
// Show the Cancel button to allow the user to abort the process
btnCancel.Visibility = Visibility.Visible;

// Set the Cancel click event as an observable so we can monitor it
var cancelClicked = Observable.FromEventPattern<EventArgs>(btnCancel, "Click");

// Use Rx to pick the scanned files from the IEnumerable collection, fill them in the DataSet and finally save the DataSet in the DB
var files = Directory.EnumerateFiles(targetDirectory, "*.*", SearchOption.AllDirectories)
            .Where(s => extensions.Contains(System.IO.Path.GetExtension(s)))
            .ToObservable(TaskPoolScheduler.Default)
            .TakeUntil(cancelClicked)
            .Do(x => .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:01:12.510

阅读您的代码，您似乎在后台做了很多工作，然后最后更新了 UI。对于这种工作，最好这样定义`enumeratedFiles`变量：

```
var enumeratedFiles =
    Observable
        .Start(() =>
            Directory
                .EnumerateFiles(
                    targetDirectory, "*.*", SearchOption.AllDirectories),
                        Scheduler.TaskPool)
        .ObserveOnDispatcher(); 
```

您将获得一个相对较快的后台操作，然后是一次 UI 更新。这是您当前方法的更好实施。

如果你能弄清楚如何为每个返回的文件更新 UI，那么试试这个 observable：

```
var enumeratedFiles =
    Directory
        .EnumerateFiles(targetDirectory, "*.*", SearchOption.AllDirectories)
        .ToObservable(Scheduler.TaskPool)
        .ObserveOnDispatcher(); 
```

使用此选项，您肯定需要弄清楚如何为找到的每个文件更新 UI。

让我知道是否适合您。

# sql - 在 Drupal 中更新 SQL 记录

> ID：13201521
> 
> 赞同：0
> 
> 时间：2012-11-02T19:05:18.230
> 
> 标签：sql, drupal

我需要通过更改注释的状态（将读取和读取/写入禁用）来更新 50K 记录，并希望确保我的 SQL 语句是正确的：

```
$query = "UPDATE node.nid AS nid, node.comment AS node_comment, node.type AS node_type
        SET node.comment = '0'
        WHERE (node.type in ('article', 'blog', 'event')) 
        AND  (node.comment in ('1','2'))";

$total = 0;
$count = 0;
while ($query_result = db_query($query)){
    $count++;
    $total++;
    if($count>200){
        $count = 0;
        sleep(300);
    }    
}
echo "Updated records:" . $total; 
```

我在那里添加了一个定期暂停，因此它不会杀死服务器。这看起来好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:50:12.950

我将 UPDATE 更改为仅节点节点并且有效。

# ruby-on-rails - 在 Ruby on Rails 中复制父记录和关联子记录的最佳方法？

> ID：13201522
> 
> 赞同：1
> 
> 时间：2012-11-02T19:05:18.333
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

> **可能重复：**
> [ActiveRecord：如何克隆嵌套关联？](https://stackoverflow.com/questions/6711956/activerecord-how-can-i-clone-nested-associations)

我有一张桌子，`invoices`反过来可以有很多`items`.

现在在我的索引视图中，我想在每个说*Duplicate Invoice*`invoices`旁边放置一个链接。`invoice`

 *如果没有子记录，这将很容易：

```
<%= link_to "Duplicate", new_invoice_path(invoice.attributes) %> 
```

但是，如果发票`items`也应该重复，怎么办呢？

作为一个 Rails 新手，我无法理解这一点。这一切都可以通过`new`我的控制器内部的操作来处理吗？

```
def new
  @invoice = current_user.invoices.build(:project_id => params[:project_id])
  @title = "New invoice"
end 
```

或者我是否需要`copy`在我的控制器中创建另一个名为 eg 的函数？

最佳做法是什么？

感谢您的任何输入...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T05:07:46.183

逻辑应该在模型中

在`invoice.rb`：

```
def deep_dup
  new_invoice = Invoice.create(self.dup.attributes)
  items.each do |item|
    new_invoice.items.create(item.dup.attributes)
  end
  return new_invoice
end 
```

然后在控制器中，执行一个名为`duplicate`：

```
def duplicate
  new_invoice = @invoice.deep_dup
  redirect to new_invoice
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:20:03.290

Maybe something like this in your create action:

```
def create
  @invoice = Invoice.new(params[:invoice]
   #find duplicate invoice (if exists)
   duplicate_invoice = Invoice.find(params[:duplicate_invoice_id])
   unless duplicate_invoice.nil?
     items = nil
     duplicate_items = duplicate_invoice.items
     duplicate_items.each do |child|
       item = Item.new(child.attributes)
       item.save
       items << item
     end  
   end
   if @invoice.save
     @invoice.items << items #add the duplicate items to the duplicate invoice
     #handle your redirects....
   end
end 
```

Essentially what you can do pass the id of the duplicate invoice to your create action, find the invoice that you intent to duplicate and then process it's children items into an array of duplicate items. The final step is to add those newly duplicated items to your newly duplicated invoice. This is obviously untested and it's going to require a little additional work on your end but I hope you get the gist of the idea. There's probably other ways to accomplish this.

Of course, there are also gems that can do this for you but it's your call.*

# c# - 通过 Web 访问 WCF 服务的问题

> ID：13201526
> 
> 赞同：0
> 
> 时间：2012-11-02T19:05:38.977
> 
> 标签：c#, wcf, iis-7.5

多亏了 stackoverflow（主要是），我创建了一个 WCF 服务，该服务能够从我们的 ms sql 数据库中提取数据并以 json 格式将其中继回。该服务在本地和我们网络内的家庭服务器上按预期工作。但是，我似乎无法在网络外访问该服务。

代码中是否需要其他参数来适应通过 Web 发布，或者它可能只是主机设置，与 WCF 或服务无关？

服务器是 2008 R2 和 IIS 7.5，目前托管着我们的十几个网站。我们也为该服务设置了一个端口。

这是我正在使用的 web.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <customErrors mode="Off" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true">
    </serviceHostingEnvironment>
    <services>
      <service behaviorConfiguration="SrvcBehavior" name="Service.svc">
        <endpoint address="JSON" behaviorConfiguration="JSONEndpointBehavior" binding="webHttpBinding" bindingConfiguration="" name="RESTEP" contract="Service.Isvc" />
        <endpoint address="SOAP" binding="basicHttpBinding" name="Basic" contract="Service.Isvc" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="JSONEndpointBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="SrvcBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
  <connectionStrings>
    <add name="conn" connectionString="server=SERVER-DATABASE\SQL2005;database=myDatabase;uid=USERID;password=USERPASSWORD;" />
  </connectionStrings>
</configuration> 
```

# windows-8 - 点击时关闭弹出窗口

> ID：13201528
> 
> 赞同：0
> 
> 时间：2012-11-02T19:05:40.477
> 
> 标签：windows-8, microsoft-metro

当有人点击它时如何关闭弹出窗口？

可以设置`IsLightDismissEnabled`为`true`，但当有人点击其他地方而不是弹出窗口本身时，它将关闭弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:40:49.973

您可以添加事件处理程序`Tapped`，您可以在其中`popup.IsOpen = false;`

的目的`IsLightDismissEnabled`是在它失去焦点时关闭弹出窗口。

# python - 如何让 Python 任务队列和通道 API 在长时间运行的过程中发送消息和响应请求？

> ID：13201532
> 
> 赞同：1
> 
> 时间：2012-11-02T19:06:06.677
> 
> 标签：python, google-app-engine, task-queue, channel-api

这可能是一个基本问题，但我一直无法找到答案。

我有一个长时间运行的过程，每隔几分钟就会产生一次数据，我希望客户在准备好后立即接收这些数据。目前，我在任务队列中有一个长时间运行的进程，它从 for 循环中将通道消息添加到另一个任务队列。客户端成功接收到通道消息并使用get请求下载数据；但是，消息是在长时间运行的进程完成后（大约 10 分钟后）而不是在将消息添加到任务队列时从任务队列发送的。
如何立即发送任务队列中的消息？我需要将 for 循环分成几个任务吗？for 循环创建了许多字典，我认为我需要将其发布到数据存储中，然后为下一次迭代检索（似乎不是一个理想的解决方案），除非有更简单的方法从任务中返回数据。

当我没有将消息添加到任务队列并直接在for循环中发送消息时，服务器似乎没有响应客户端对数据的get请求（可能是由于长时间运行的进程阻塞的for循环响应？）

这是我的服务器代码的简化版本：

```
from google.appengine.ext import db
from google.appengine.api import channel
from google.appengine.api import taskqueue
from google.appengine.api import rdbms

class MainPage(webapp2.RequestHandler):
def get(self):
## This opens the GWT app    

class Service_handler(webapp2.RequestHandler):
def get(self, parameters):
## This is called by the GWT app and generates the data to be 
## sent to the client. 
    #This adds the long-process to a task queue
    taskqueue.Task(url='/longprocess/', params = {'json_request': json_request}).add(queue_name='longprocess-queue')

class longprocess_handler(webapp2.RequestHandler):
def post(self):
   #This has a for loop that recursively uses data in dictionaries to 
   #produce kml files every few minutes
   for j in range(0, Time):
      # Process data
      # Send message to client using a task queue to send the message.
      taskqueue.Task(url='/send/', params).add(queue_name=send_queue_name)

class send_handler(webapp2.RequestHandler):
def post(self):
    # This sends the message to the client
    # This is currently not happening until the long-process finishes,
    # but I would like it to occur immediately.

class kml_handler(webapp2.RequestHandler):
def get(self, client_id):
##  When the client receives the message, it picks up the data here.

app = webapp2.WSGIApplication([
                        webapp2.Route(r'/', handler=MainPage),
                        webapp2.Route(r'/Service/', handler=Service_handler),
                        webapp2.Route(r'/_ah/channel/<connected>/', handler = connection_handler),
                        webapp2.Route(r'/longprocess/', handler = longprocess_handler),
                        webapp2.Route(r'/kml/<client_id>', handler = kml_handler),
                        webapp2.Route(r'/send/', handler = send_handler)
                        ],
                      debug=True) 
```

我是否需要将长流程分解为从数据存储中发送和检索结果的任务，以便让 send_handler 立即执行，还是我遗漏了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:54:34.777

App Engine 开发服务器一次只处理一个请求。在生产中，这些事情会同时发生。在生产环境中尝试，并检查那里的行为是否符合预期。

也没有太多理由使用单独的任务在生产中发送通道消息 - 只需直接从主任务发送它们。

# delphi - 为什么 TTime 比较会给出意想不到的结果？

> ID：13201535
> 
> 赞同：5
> 
> 时间：2012-11-02T19:06:14.000
> 
> 标签：delphi, datetime, delphi-2010

我观察到一些关于`EncodeDateTime`和`EncodeTime`方法的奇怪行为，我正在寻求一些解释。

```
procedure SomeTestCase;
var
    time: TTime;
    dateTime: TDateTime;
begin
    time := EncodeTime(8, 0, 0, 0);
    date := EncodeDateTime(2012, 11, 2, 8, 0, 0, 0);

    Assert(time = TimeOf(date)); //Fails
end; 
```

我发现的是，`date`小时部分的计算结果是`7:59:59`而不是`8:00:00`。`time`但是，如果我将和的小时部分设置`date`为 9，则断言通过并`date`计算为预期值。有些时间工作，而另一些时间则不工作。有人可以解释一下发生了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T19:09:08.227

时间值（`TTime`, `TDate`, `TDateTime`）实际上是一个`double`（即浮点值），日期以整数部分编码，时间以小数部分编码。测试浮点值的相等性总是有风险的。

你可以`SameTime(time, date)`改用。这正确地补偿了“数字大惊小怪”：`Result := Abs(Frac(A) - Frac(B)) < OneMillisecond;`

# scheme - 使用 Scheme 语言，如何检查函数是否为指数函数

> ID：13201548
> 
> 赞同：1
> 
> 时间：2012-11-02T19:07:09.197
> 
> 标签：scheme, exponentiation

这不应该这么难，但我被困住了。我们有一个简单的任务，我们正在编写如何对函数求导。

```
(define (derive exp var)
(cond ((number? exp) 0)
    ((variable? exp) (if (same-variable? exp var) 1 0))
    ((sum? exp) (derive-sum exp var))
    ((product? exp) (derive-product exp var))
    ((exponentiation? exp) (derive-exponentiation exp var))
    (else 'Error))) 
```

但是对于幂运算，如果我确实有指数函数，它需要返回 true。我只是不完全确定如何写。到目前为止，我刚刚得到了这样的东西

```
(define (make-exponentiation base exponent)
   (cons base exponent)

(define (base exponentiation)
   (car exponentiation)

(define (exponent exponentiation)
   'cdr exponentiation)

(define (exponentiation? exp)
   'YourCodeHere)

(define (derive-exponentiation exp var)
   (* var (make-exponentiation exp (var-1)) (derive exp)) 
```

我不确定我在检查汽车和 cdr 的内容。整个事情有点混乱。那不是给定的代码。我猜 car 和 cdr 目前有点像占位符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:19:30.827

这是相当长的一段时间，因为我已经完成了计划。我更熟悉emacs lisp。所以带上一粒盐：

```
(define (make-exponentiation base exponent)
   (list '^ base exponent))

(define (base exponentiation)
   (car (cdr exponentiation)))

(define (exponent exponentiation)
   (car (cdr (cdr exponentiation))))

(define (exponentiation? exp)
   (equal? (car exp) '^))

(define (derive-exponentiation exp var)
   (let ((b (base exp))
         (e (exponent exp)))
   (make-product e (make-exponentiation b (- e 1)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:16:35.897

您的代码很难阅读，因为它的格式很奇怪，您应该尝试将不同的内容分隔到不同的行中。如果您使用的是 Racket 博士，您也可以点击选项卡，它会相应地排列所有内容，但它不能解决在同一行上有多个东西的问题。

无论如何，这个问题在很大程度上取决于分配的设置方式以及您期望采用的输入类型。您可以使用标签，或者您可以检查指数点是否有任何东西，或者它是否只是 0 或 1。同样，尽管它完全取决于输入的方式。

# javascript - .ajaxStart() 和 .ajaxStop() 在第一次后没有触发

> ID：13201549
> 
> 赞同：0
> 
> 时间：2012-11-02T19:07:12.303
> 
> 标签：javascript, jquery, ajax

这就是我所拥有的：

```
$(document).ready(function(){
    //stuff
}).ajaxSend(function() {
    $('.overlay').show();
}).ajaxStop(function() {
    $('.overlay').fadeOut();
}); 
```

我遇到的问题是，我第一次触发 ajax 动作时它工作得很好，但在那之后的任何时候都没有。我必须重新加载页面才能让 ajaxSend/Stop 再次工作。所以说我加载一个页面，点击'加载更多'来ajax加载内容，覆盖显示没有问题。但是然后我再次单击它，一切正常，除了模态这次或之后的任何时间都没有出现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:57:06.443

`$(document).ready`只会被调用一次 - 当加载 DOM 时。这在通过 ajax 加载数据时不起作用。

两种选择：

首先，如果您可以使用作为 ajax 页面加载的一部分加载的 div 来识别 div，那么您可以执行（编辑）：

```
$('.overlay').ajaxSend(function() { 
                                       $(this).show(); });
$('.overlay').ajaxStop(function() { 
                                       $(this).fadeOut(); }); 
```

或者，您可以完全放弃，`ajaxStart`并`ajaxStop`在单击“加载更多”链接时触发它们，例如：

```
$("a").click(function(){
   var url = $(this).attr('href');
   $(".overlay").show("fast", function(){
       $("#targetdiv").load(url + " #div_id", {}, function(){
          $(".overlay").fadeOut();
       })
   })
   return false;
}); 
```

# html - 在 html 表格中，为什么标题宽度不会改变整个表格的宽度？

> ID：13201552
> 
> 赞同：1
> 
> 时间：2012-11-02T19:07:22.723
> 
> 标签：html

看看这个小提琴：http: [//jsfiddle.net/foreyez/hQ9ZR/](http://jsfiddle.net/foreyez/hQ9ZR/)

```
<table background='red'>
<thead>
    <tr>
        <th style='width:3000px;background:red'>Students</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Joe</td>
    </tr>
    <tr>
        <td>Shmoe</td>
    </tr>
</tbody> 
```

​</p>

而CSS是：

```
 html,body { overflow:auto; } 
```

当我将 Header 的宽度设置为 3000px 时，我希望它会导致页面溢出（滚动条）。但事实并非如此。这是因为标题单元格的宽度不会改变整个表格的宽度。

如果将表格的宽度设置为 3000px，您会看到溢出（滚动条）

所以基本上，我想知道是否有办法让表格的宽度由它的标题宽度定义？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:17:10.093

首先，这不是你现在设计表格的方式

```
<table background='red'> 
```

改用这个

```
<table style="background:red;"> 
```

其次，您需要使用`min-width`for`th`而不是`width`

[**我的小提琴**](http://jsfiddle.net/hQ9ZR/3/)

```
<th style='border: 1px solid #fffff0;min-width:5000px;background:red'>Students</th> 
```

# java - 如何在使用 LWUIT 时摆脱 j2me 程序中的“后退”按钮？

> ID：13201555
> 
> 赞同：1
> 
> 时间：2012-11-02T19:07:40.730
> 
> 标签：java, java-me, lwuit, midlet, lwuit-form

我正在使用 LWUIT 编写一个 j2me 应用程序。我在 LWUIT 资源编辑器中制作了一个 GUI。但是有一个小问题：当我`Forms`在我的移动应用程序中切换时，会出现“返回”软按钮（它的任务是将用户移动到上一个表单）。然而，事实证明它在我的程序中是不恰当的。那么，我该如何摆脱它呢？如果可能的话，我怎样才能通过一个非常舒适的 LWUIT 资源编辑器来做到这一点（整个 GUI 都是在其中制作的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:50:04.693

该`Form`对象有一个方法来捕获默认返回`Command`。这个方法就是下面的[Form API getBackCommand](http://lwuit.java.net/javadocs/com/sun/lwuit/Form.html#getBackCommand%28%29)

使用此方法返回`Command`，然后使用 Form.removeCommand(backCommand) 将其删除

如果这不起作用，请查看`Commands`资源编辑器中添加的内容。资源编辑器总是在程序的导航`Command`时加一个后面`Form`

# c# - 每当新线程在 C# 中开始或结束时捕获事件

> ID：13201562
> 
> 赞同：1
> 
> 时间：2012-11-02T19:08:42.313
> 
> 标签：c#, .net, multithreading

我有一个高度多线程的应用程序，其中线程从多个地方启动，我想知道我是否可以挂钩到正在运行的进程，并且只要产生新的托管线程就会得到警报。我应该能够得到以下信息

1.  父线程
2.  新线程
3.  启动新线程的方法如`<className>.<methodName>`

该应用程序使用 C# 3.5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T19:13:26.860

据我所知，没有办法检测线程何时启动。最好的解决方案可能不是直接创建线程，而是通过“线程管理器”类来完成，该类将在启动线程时引发事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:17:40.107

状态应该在线程处理逻辑中处理。

我建议您创建一个包装器类来包装线程逻辑并根据需要报告它的状态和其他项目。我为多线程应用程序创建了这样一个类，我可以在其中收集线程的状态并以标准化的方式将该信息传递给 GUI。

当然，我有幸预先设计它，而你可能没有。

# unit-testing - 如何从 MSTest 获取测试结果状态？

> ID：13201566
> 
> 赞同：3
> 
> 时间：2012-11-02T19:08:48.947
> 
> 标签：unit-testing, mstest, vs-unit-testing-framework

在 NUnit 中，我可以从`context.Result.State`. 如果是`NUnit.Framework.TestState.Success`，那么我知道测试通过了。

在 MSTest 中，我如何获取该信息？

我看到了`context.Properties.Keys`，但没有一个人提到测试结果的状态。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T14:02:03.437

在方法中使用[TestContext.CurrentTestOutcome](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testcontext.currenttestoutcome%28v=vs.100%29.aspx)属性`TestCleanup`：

```
[TestClass]
public class UnitTest
{
    private TestContext TestContext { get; set; }

    [TestCleanup]
    public void TestCleanup()
    {
        if (TestContext.CurrentTestOutcome == UnitTestOutcome.Passed)
            //do something
    } 

    [TestMethod]
    public void TestMethod()
    {
    }
} 
```

# expressionengine - 如何在侧边菜单中仅显示相互关联的类别？

> ID：13201568
> 
> 赞同：1
> 
> 时间：2012-11-02T19:08:50.320
> 
> 标签：expressionengine

> **可能重复：**
> [表达式引擎类别](https://stackoverflow.com/questions/13200351/expression-engine-categories)

我还在为类别而苦苦挣扎。我有一个包含 8 个子类别的父类别。我还有另一类品牌。有没有办法在与所选产品组相关的列表中显示所有品牌。哇，我希望这是有道理的。

这是一个例子......

我有几个产品的父类别选择“中央吸尘器”。

这些产品也属于“附件”和“工具包”类别，它们是“中央吸尘器”的子项。

每个产品都标有不同的品牌（即“BEAM”、“Electrolux”、“Dyson”）

有没有办法在“中央吸尘器”产品部分中仅在品牌列表中显示“BEAM”、“伊莱克斯”、“戴森”，因为这些品牌已在“中央吸尘器”的产品中选择。品牌有几十个，但很多品牌与中央吸尘器无关。

非常混乱。我道歉。任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:12:57.080

您也许可以使用[Low Seg2Cat](http://devot-ee.com/add-ons/low-seg2cat)，它会从 URL 段中获取类别或父类别 ID，然后您可以使用它们来过滤您的频道类别或条目标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:08:55.063

请务必检查[http://devot-ee.com/add-ons/gwcode-categories](http://devot-ee.com/add-ons/gwcode-categories)，可能正是您正在寻找的。

# node.js - 配置monitrc来监控node js app进程，找不到使用screen ec2 linux运行的node app pidfile

> ID：13201570
> 
> 赞同：1
> 
> 时间：2012-11-02T19:08:56.820
> 
> 标签：node.js, linux, pid, gnu-screen, monit

我通过我的 ec2 linux 实例上的屏幕运行我的 app.js（节点 js 应用程序）。我正在尝试配置我的 monitrc 文件，我需要应用程序 pidfile。它不在：/var/run（并且没有 /var/www）

如果有人知道 pidfile 在哪里或我如何找到它，我将不胜感激。
谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:16:38.970

在您的应用程序中，您可以使用 process.pid 获取当前的 pid 号

```
var fs = require('fs');
fs.writeFile("/tmp/pidfile", process.pid); 
```

你在 tmp 中得到一个 pidfile

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:53:11.583

似乎没有创建 pid 文件，所以我使用了 forever-monitor 以便在出现错误时重新启动我的 app.js 脚本。看起来它正在工作。你需要做的是 npm install forever 并编写 server.js ：

```
var forever = require('forever'),
    child = new(forever.Monitor)('app.js', {
        'silent': false,
        'pidFile': '/var/run/app.pid',
        'watch': false,
        'options': ['8383'],  // Additional arguments to pass to the script,
        'sourceDir': '.', // Directory that the source script is in
        'watchDirectory': '.',     // Top-level directory to watch from.
        'watchIgnoreDotFiles': true, // whether to ignore dot files
        'watchIgnorePatterns': [], // array of glob patterns to ignore, merged with contents of watchDirectory + '/.foreverignore' file
        'logFile': 'logs/forever.log', // Path to log output from forever process (when daemonized)
        'outFile': 'logs/forever.out', // Path to log output from child stdout
        'errFile': 'logs/forever.err'
    });
child.start();
forever.startServer(child); 
```

然后使用 - node server.js 运行它（我从 ~/nodejs 目录运行它） 应该在 /var/run 中的 pid 文件仍然不存在，很奇怪，但我不再需要 monit 了。我仍然不明白为什么我应该另外使用暴发户（就像所有建议的相关帖子一样）当我尝试运行暴发户时它不起作用

# java - 使用 Comparator 对数组进行排序

> ID：13201573
> 
> 赞同：4
> 
> 时间：2012-11-02T19:09:15.657
> 
> 标签：java, comparator

我有以下代码。当我尝试编译它时，它给了我以下错误：

```
The method sort(List<T>, Comparator<? super T>) in the type Collections is not 
applicable for the arguments (Software[], new Comparator(){}) 
The type new Comparator(){} must implement the inherited abstract method
Comparator.compare(Object, Object) 
```

### 代码

```
import java.text.DecimalFormat; // For proper currency  
import java.util.Comparator;
import java.util.Collections;

public class Software

{
// Declare variables

String SoftwareTitle; // SoftwareTitle
int SoftwareStock;    // Software totals
double SoftwarePrice; // Software Price
int SoftwareNum;      // Software Product ID
double CalculateInventory;  // To add inventory
double SoftwareValue;       // Software Total value
double value;               // Complete inventory total

Software( String softtitle, int softstock, double softprice, int softitemnum )

{
    // Create object constructor

    SoftwareTitle = softtitle;
    SoftwareStock = softstock;
    SoftwarePrice = softprice;
    SoftwareNum = softitemnum;

    } 

    // Set Software Title

    public void setSoftwareTitle( String softtitle )
    {
        SoftwareTitle = softtitle;
    } 

    // Return Software Title

    public String getSoftwareTitle()
    {
        return SoftwareTitle;
    } 

    // Set software inventory
    public void setSoftwareStock( int softstock)
    {
        SoftwareStock = softstock;
    } 

    // Return software inventory
    public int getSoftwareStock()
    {
        return SoftwareStock;
    }

    // Set software price

    public void setSoftwarePrice( double softprice )
    {
        SoftwarePrice = softprice;
    }

    // Return software price
    public double getSoftwarePrice()
    {
        return SoftwarePrice;

    }

    // Set item number

    public void setSoftwareNum( int softitemnum )
    {
        SoftwareNum = softitemnum;
          }         //

    //return software item number

    public int getSoftwareNum()
    {
        return SoftwareNum;
    } //

    // calculate inventory value

    public double Softwarevalue()
    {
        return SoftwarePrice * SoftwareStock;

    } 

    public void setCalculateInventory (double value){
        this.CalculateInventory = value;
    }

    public double getCalculateInventory(){
        double value = 0;
        for(int i = 0; i < 3; i++){
            value = Softwarevalue();
        }
        return value;
    }

 }//end method value

 //

import java.text.DecimalFormat; // For proper currency  
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;

 public class Inventory {

public static void main( String args[] )

{

    // Start array of software titles

    Software[] aSoftware = new Software[4];

    aSoftware[0]= new Software("Command and Conquer ", 6, 29.99, 10122); 
        aSoftware[1]= new Software("Alice in Wonderland", 1, 10.99,10233);
        aSoftware[2]= new Software("Doom", 1, 10.99, 10344);
    aSoftware[3]= new Software("Walking Dead", 6, 9.99, 10455);

//Set currency format
    DecimalFormat money = new DecimalFormat("$0.00");

// Sort in order of Software Name

    Collections.sort(aSoftware, new Comparator() {
    public int compare(Software s1, Software s2) {
    return s1.getSoftwareTitle().compareTo(s2.getSoftwareTitle());

                }
            });

// Display software title, number of units, cost, item number and total inventory

     for (int i = 0; i < aSoftware.length; i++){    

System.out.println("Software Title is "+ aSoftware[i].getSoftwareTitle() );

System.out.println("The number of units in stock is "+    aSoftware[i].getSoftwareStock() );

System.out.println("The price of the Software Title is "+ (money.format(aSoftware[i].getSoftwarePrice() )));

System.out.println( "The item number is "+ aSoftware[i].getSoftwareNum());

System.out.println( "The value of the Software Inventory is "+  (money.format(aSoftware[i].Softwarevalue() )));

System.out.println();   
            }

//output total inventory value

double total = 0.0;
    for (int i = 0; i < 3; i++){ 
    total +=  aSoftware[i].getCalculateInventory();            
        }
    System.out.printf("Total Value of Software Inventory is: \t$%.2f\n", total);

//end output total inventory value

 }
 }

 //

 //end 
```

如何使用比较器按字母顺序显示软件标题（数组）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T19:16:35.683

你有两个问题：

1）您正在使用[`Collections.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)（需要 a `List<E>`），但试图对数组进行排序。改为使用[`Arrays.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)。

2）您需要指定您正在实施`Comparator<Software>`，而不仅仅是原始`Comparator`类型。

所以基本上，这有效：

```
Arrays.sort(aSoftware, new Comparator<Software>() {
    public int compare(Software s1, Software s2) {
        return s1.getSoftwareTitle().compareTo(s2.getSoftwareTitle());
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T19:16:08.787

首先：要对数组进行排序，例如`Software[]`，您需要使用`java.util.Arrays.sort`而不是`java.util.Collections.sort`。

其次：由于您`Comparator`是专门针对`Software`实例的，因此您应该编写`new Comparator<Software>()`而不仅仅是`new Comparator()`. （后者实际上是糟糕的代码，即使它确实有效。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:16:48.557

使用时不能对数组进行排序`Collections.sort`。`Collections.sort`只接受列表。用户`Arrays.sort`而不是`Collection.sort`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-06T22:55:17.453

因为您正在尝试使用以下对象数组：

```
Arrays.sort(aSoftware); 
```

并且您的软件类应该实现 Comparable 并覆盖其 compareTo 方法：

```
@Override
public int compareTo(Software o) {
    return this.getSoftwareTitle().compareTo(o.getSoftwareTitle());
} 
```

我已对您的课程进行了如下更正：

```
public class Software implements Comparable<Software>{
// Declare variables

String SoftwareTitle; // SoftwareTitle
int SoftwareStock; // Software totals
double SoftwarePrice; // Software Price
int SoftwareNum; // Software Product ID
double CalculateInventory; // To add inventory
double SoftwareValue; // Software Total value
double value; // Complete inventory total

Software(){

}

Software(String softtitle, int softstock, double softprice, int softitemnum)

{
    // Create object constructor

    SoftwareTitle = softtitle;
    SoftwareStock = softstock;
    SoftwarePrice = softprice;
    SoftwareNum = softitemnum;

}

// Set Software Title

public void setSoftwareTitle(String softtitle) {
    SoftwareTitle = softtitle;
}

// Return Software Title

public String getSoftwareTitle() {
    return SoftwareTitle;
}

// Set software inventory
public void setSoftwareStock(int softstock) {
    SoftwareStock = softstock;
}

// Return software inventory
public int getSoftwareStock() {
    return SoftwareStock;
}

// Set software price

public void setSoftwarePrice(double softprice) {
    SoftwarePrice = softprice;
}

// Return software price
public double getSoftwarePrice() {
    return SoftwarePrice;

}

// Set item number

public void setSoftwareNum(int softitemnum) {
    SoftwareNum = softitemnum;
} //

// return software item number

public int getSoftwareNum() {
    return SoftwareNum;
} //

// calculate inventory value

public double Softwarevalue() {
    return SoftwarePrice * SoftwareStock;

}

public void setCalculateInventory(double value) {
    this.CalculateInventory = value;
}

public double getCalculateInventory() {
    double value = 0;
    for (int i = 0; i < 3; i++) {
        value = Softwarevalue();
    }
    return value;
}

@Override
public int compareTo(Software o) {
    return this.getSoftwareTitle().compareTo(o.getSoftwareTitle());
}

}// end method value 
```

您的库存类别：

```
public class Inventory {

public static void main(String args[])

{

    // Start array of software titles

    Software[] aSoftware = new Software[4];

    aSoftware[0] = new Software("Command and Conquer ", 6, 29.99, 10122);
    aSoftware[1] = new Software("Alice in Wonderland", 1, 10.99, 10233);
    aSoftware[2] = new Software("Doom", 1, 10.99, 10344);
    aSoftware[3] = new Software("Walking Dead", 6, 9.99, 10455);

    // Set currency format
    DecimalFormat money = new DecimalFormat("$0.00");

    Arrays.sort(aSoftware);

    // Display software title, number of units, cost, item number and total
    // inventory

    for (int i = 0; i < aSoftware.length; i++) {

        System.out.println("Software Title is "
                + aSoftware[i].getSoftwareTitle());

        System.out.println("The number of units in stock is "
                + aSoftware[i].getSoftwareStock());

        System.out.println("The price of the Software Title is "
                + (money.format(aSoftware[i].getSoftwarePrice())));

        System.out.println("The item number is "
                + aSoftware[i].getSoftwareNum());

        System.out.println("The value of the Software Inventory is "
                + (money.format(aSoftware[i].Softwarevalue())));

        System.out.println();
    }

    // output total inventory value

    double total = 0.0;
    for (int i = 0; i < 3; i++) {
        total += aSoftware[i].getCalculateInventory();
    }
    System.out.printf("Total Value of Software Inventory is: \t$%.2f\n",
            total);

    // end output total inventory value

}
} 
```

以下是排序后的最终输出：

```
Software Title is Alice in Wonderland
The number of units in stock is 1
The price of the Software Title is $10.99
The item number is 10233
The value of the Software Inventory is $10.99

Software Title is Command and Conquer 
The number of units in stock is 6
The price of the Software Title is $29.99
The item number is 10122
The value of the Software Inventory is $179.94

Software Title is Doom
The number of units in stock is 1
The price of the Software Title is $10.99
The item number is 10344
The value of the Software Inventory is $10.99

Software Title is Walking Dead
The number of units in stock is 6
The price of the Software Title is $9.99
The item number is 10455
The value of the Software Inventory is $59.94

Total Value of Software Inventory is:   $201.92 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-02T19:15:08.663

You should make your "Software" class implement comparable and then overwrite the compare method to return a compare on the titles like you did outside your code. This will be a replacement for the comparator. Then all you need to to is call Arrays.sort.

# c# - REngine rengine = REngine.CreateInstance("RDotNet", new[] { "-q" } 第二次调用时会进一步停止执行

> ID：13201574
> 
> 赞同：1
> 
> 时间：2012-11-02T19:09:20.457
> 
> 标签：c#, asp.net-mvc-3, r

我正在使用 R.NET 和 ASP.NET MVC3 绘制预测图。第一次，它创建一个 RENgine 的实例。经过

```
REngine rengine = REngine.CreateInstance("RDotNet", new[] { "-q" }) 
```

并根据需要绘制图形。但是，当我通过选择另一个要绘制的图表来第二次调用相同的方法时，它会在此之后停止进一步移动。请有人帮我弄清楚我哪里出错了。我使用的代码是

```
using (REngine rengine = REngine.CreateInstance("RDotNet", new[] { "-q" }))
    {
        rengine.EagerEvaluate("YrTimeSeries<-c(123,234,255,456)");
        rengine.EagerEvaluate("tsValue<-ts(YrTimeSeries,frequency=1," 
                               + dt_StartYr.Rows[0][0].ToString() + ")");
        rengine.EagerEvaluate("library(Cairo);");
        rengine.EagerEvaluate("library(forecast)");
        rengine.EagerEvaluate(@"CairoPNG('C:\\Documents and Settings\\a\\im.png);
        rengine.EagerEvaluate("plot(forecast(tsValue,h=5),main='Immunization')");
        rengine.EagerEvaluate("graphics.off();");
        rengine.Close();
        rengine.Dispose();

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:41:12.187

我只是重新发布我关于在哪里找到问题的评论，但众所周知，您不会因为评论的支持而获得积分。

并行查看[R.NET 上的这个 MSDN](http://rdotnet.codeplex.com/discussions/267550)。我知道您不是一次创建两个，但看起来这会导致完全相同的问题。

# php - PHP：在线离线状态

> ID：13201579
> 
> 赞同：1
> 
> 时间：2012-11-02T19:09:46.743
> 
> 标签：php, mysql

嗨，自从 3 小时以来，我正在努力完成这项工作，但没有得到我想要的结果。我想显示在线和离线状态的用户列表。

这是桌子

![](../Images/c5fcb3f6ebebed369fb4899691eaf7c3.png)

在这里我试图获得状态结果。

```
$loggedtime = time() - 300; // 5 minutes

$query = 'SELECT userid, handle FROM ^users WHERE loggedin = '.$loggedtime.' ORDER BY userid ASC';

// below are scripts function qa_ pleses refer this http://www.question2answer.org/functions.php

$result = qa_db_query_sub($query);  
$users = qa_db_read_all_assoc($result); 

$row = mysql_fetch_array($result);

if($row['userid'] > $loggedtime){
    echo $row['handle'].' is online';
} else {
    echo $row['handle'].' is offline';
} 
```

**不是这个**

```
foreach($users as $user){
    if($user['userid'] > $loggedtime){
        echo $user['handle']. ' is online';
    } else {
        echo $row['handle'].' is offline';
    }
} 
```

以上代码均无效。我是 MYSQL 和 PHP 的新手，只知道基本知识，所以请帮我解决这个问题。

**编辑：** 我现在已经尝试过了，但没有工作

```
foreach($users as $user){
                if($user['loggedin'] > $loggedtime){
                    echo $user['handle']. ' is online';
                } else {
                    echo $row['handle'].' is offline';
                }
            } 
```

**编辑 2**

```
$query = "SELECT
    userid, handle, 
    CASE
        WHEN TIMESTAMPDIFF(SECOND, loggedin, NOW()) < 300
            THEN 'Online'
        ELSE 'Offline'
    END AS 'status'
FROM ^users
ORDER BY userid";

$result = qa_db_query_sub($query); 

while($user = mysql_fetch_array($result)){
    echo $user['handle'] . '<BR/>';
} 
```

**新的方法**

请检查此新方法[用户在线离线状态 - 离线状态问题](https://stackoverflow.com/questions/13208172/user-online-offline-status-offline-status-issue)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:12:28.780

为什么不只检查数据库端呢？

```
SELECT
    userid, handle, 
    CASE
        WHEN TIMESTAMPDIFF(SECOND, loggedin, NOW()) < 300
            THEN 'Online'
        ELSE 'Offline'
    END AS 'status'
FROM ^users
ORDER BY userid 
```

> 您可以使用`TIMESTAMPDIFF(unit,datetime_expr1,datetime_expr2)`to return `datetime_expr2 – datetime_expr1`、 where`datetime_expr1`和`datetime_expr2`are`date`或`datetime`表达式。一个表达式可能是 a `date`，另一个是 a `datetime`；值在必要时`date`被视为具有`datetime`时间部分。`'00:00:00'`结果的单位（整数）由 unit 参数给出。unit 的合法值与函数描述中列出的值相同`TIMESTAMPADD()`。

看看[MySQL 日期和时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。

另外，我强烈建议对表名使用[保留字](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:12:29.427

你的结构看起来很有趣，可以回答这个问题。您的登录字段实际上看起来更像是“他们最后一次登录”。仅仅因为您知道他们何时登录并不一定意味着他们“在线”。

您的查询不起作用的原因是您将 UNIX 时间戳与 mysql 日期时间进行比较。此外，您正在使用 = 所以除非他们在五分钟前完全登录，否则这将不起作用。

至少。

```
SELECT userid, handle FROM ^users WHERE loggedin > '.date('Y-m-d h:i:s', time()-300).'ORDER BY.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:20:29.283

由于您修复了用户 ID 比较，让我们解决下一个问题。

您正在尝试将字符串 DATE 与 unix 时间戳进行比较。让我们将它们设为相同类型并进行比较：

```
foreach($users as $user)
{
  $user_time = strtotime($user['loggedin']);
  if($user_time > $loggedtime)
  {
    echo $user['handle']. ' is online';
  } else {
    echo $row['handle'].' is offline';
  }
} 
```

总体而言，这不是解决此问题的最佳方法，但它可能会为您工作。上面的数据库解决方案可能是最好的。

# jquery - 如何使用 jquery .on() 提交检测输入按钮值

> ID：13201580
> 
> 赞同：3
> 
> 时间：2012-11-02T19:09:46.700
> 
> 标签：jquery, input, submit

如何使用 jquery .on() 提交检测在此表单上按下了哪个输入按钮？

```
<form name="input" action="none" method="post">
 <input type="text" name="user">
 <input id="submit" type="submit" value="Submit">
 <input id="cancel" type="submit" value="Cancel">
</form>​​​​​​​​​​​​​​​

$('body').on('submit', 'form', function(e) {
      console.log($(this).attr("value"));
      return false;}) 
```

一个 jsfiddle 的例子在这里[http://jsfiddle.net/dansalmo/suZHg/](http://jsfiddle.net/dansalmo/suZHg/)

我看过很多地方并尝试了许多不同的方法来尝试检测 .on() 方法中的输入提交按钮值，但我无法得到它。

在我的示例中 $(this).attr("value") 和 $(this).val() 出现 undefined

然后我希望能够使用 ajax 提交表单，因此仅检测按钮不是这个问题的重点。如果无法使用 .(on) submit 进行操作，那么了解这一点会有所帮助，而不是使用不涉及表单提交的替代按钮检测方法进行回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:44:59.033

我看不到从提交处理程序获取此信息的任何方式，但您可以从按钮单击事件中获取信息，然后在提交事件中使用它。

```
$('body').on('submit', 'form', function(e) {
      console.log($(this).data('clicked'));
      return false;
});
$('form').on('click', 'input[type=submit]', function(e) {
      $(this.form).data('clicked', this.value);
}); 
```

[http://jsfiddle.net/suZHg/15/](http://jsfiddle.net/suZHg/15/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:43:31.107

您可以拦截提交按钮的点击事件，然后手动触发表单提交，传入对原始按钮的引用：

```
 $("input:submit").on("click", function () {
            $("form[name='input']").trigger("submit", this);
            return false;
        });

        $('body').on('submit', 'form', function (e, button) {
            console.log($(button).val());
            return false;
        }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:15:38.720

```
$("input[type='submit']").click(function(e) {
      console.log($(this).val());
      return false;
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T19:15:50.267

**$(this)** corresponds to the `form` here..

And not the `button` that had submitted

Try this

```
$('body').on('click', 'input[type="submit"]', function(e) {
    e.preventDefault();
    console.log($(this).attr('value'));
    return false;
})​ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-02T19:19:29.750

```
$('input:submit').click(function(){alert(this.id); return false;}); 
```

# git - 从 GitHub 上不存在的分叉存储库中拉取对 GitHub 项目的请求

> ID：13201583
> 
> 赞同：2
> 
> 时间：2012-11-02T19:10:11.787
> 
> 标签：git, github

我想知道我是否可以从 GitHub 上不存在的分叉存储库向 GitHub 项目发送拉取请求？ie - 该项目是从 GitHub 派生的，但它在 GitHub 服务器上不存在。

我听说 GitHub 上的 pull-request 系统已经从原始 GIT 版本进行了修改，所以我不确定它是否与非 GitHub 存储库兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:04:52.593

这似乎不可能，尤其是考虑到[GitHub Pull Request 2.0](https://github.com/blog/712-pull-requests-2-0)：

拉取请求不仅链接到 GitHub 存储库，还涉及问题、比较视图和评论。

最简单的方法仍然是分叉 GitHub 存储库，克隆该分叉，从所述克隆测试您的修改，推回您的分叉，然后从那里发出拉取请求。

# jquery - 页面打开时 Ajax Jquery 弹出窗口

> ID：13201584
> 
> 赞同：0
> 
> 时间：2012-11-02T19:10:20.847
> 
> 标签：jquery, ajax, popup

我想在页面打开时添加弹出窗口。像 facebook 一样框或组销售网站的电子邮件请求弹出窗口，而首次加载页面。

如何在第一次打开网页时将 ajax-jquery 弹出框添加到网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:13:24.043

jQuery UI 很容易做到这一点

在核心 jQuery 脚本之后引用 ui 脚本和 css（如果您还没有它们，可以在[此处下载），如下所示：](http://jqueryui.com/download/)

```
<script src="../../Scripts/jquery-1.8.2.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.9.0.js" type="text/javascript"></script>
<link href="../../Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" /> 
```

然后是弹出窗口的基本 html

```
<div id="dialog" title="Basic dialog">
    <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div> 
```

最后是一个让它工作的小脚本：

```
 <script>
    $(function() {
        $( "#dialog" ).dialog();
    });
    </script> 
```

[资源](http://jqueryui.com/dialog/#default)

# objective-c - NSInvalidUnarchiveOperationException：无法实例化名为 NSLayoutConstraint 的类

> ID：13201586
> 
> 赞同：166
> 
> 时间：2012-11-02T19:10:28.980
> 
> 标签：objective-c, ios, autolayout

我对此很陌生。我按照 Apple 的 iPhone 项目“HelloWorld”教程一步一步来。我在 iPhone 5.0 模拟器中运行它，它崩溃了：

> 2012-11-02 14:46:06.782 HelloWorld[9880:c07] *** 由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 NSLayoutConstraint 的类”***第一次抛出调用堆栈：(0x14a2052 0xea2d0a 0x144aa78 0x144a9e9 0xfafd70x 0x32f6b7 0x23036d 0xd7e2c 0xd83a9 0xd85cb 0x38a73 0x38ce2 0x38ea8 0x3fd9a 0x10be6 0x118a6 0x20743 0x211f8 0x14aa9 0x138cfa9 0x14761c5 0x13db022 0x13d990a 0x13d8db4 0x13d8ccb 0x112a7 0x12a9b 0x1fed 0x1f15 0x1) terminate called throwing an exception(lldb)

有人可以告诉我出了什么问题吗？我正在使用 Xcode 4.5。

* * *

## 回答 #1

> 赞同：576
> 
> 时间：2012-11-02T19:18:37.090

默认情况下，当您在 Xcode 4.5 中创建新的 iOS 项目时，您的故事板或 XIB 设置为使用 Autolayout，这是 iOS 6.0 中的新功能。该类`NSLayoutConstraint`是 Autolayout 系统的一部分，在旧版本的 iOS 中不存在。

如果您想将您的应用程序部署到旧版本的 iOS，您需要更改您的故事板或 XIB 以*不*使用自动布局。这是文件检查器中的一个复选框：

![关闭自动布局](../Images/0cbad202a4bf2f2b81c39c8dd1cd63fa.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-02T19:19:28.470

Your Xib file (Interface builder file) contains AutoLayout elements, which iOS 5 does **not** support.

In Xcode, go to your .xib file(s), and for each one, turn off AutoLayout. There should be a checkbox on the left hand side saying "Use AutoLayout", uncheck it and try again. (This is under the first tab in the left hand side inspector, when you have File's owner) selected.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-09T09:40:08.483

当我在处理一个我想更新的旧项目时，我偶然发现了这个错误。我选择了“使用自动布局”复选框开始使用约束，但忘记将我的部署目标设置更新为 iOS 6。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-02T19:19:04.660

您需要在 iPhone 6.0 模拟器中运行它。你的错误：

```
* Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint' * 
```

建议您使用自动布局，它仅适用于 iOS 6。

# ios - 在 UiTableViewCell 上设置时，DisclosureButton Indicator 或任何类型的附件类型似乎都没有出现

> ID：13201589
> 
> 赞同：2
> 
> 时间：2012-11-02T19:10:33.393
> 
> 标签：ios, uitableview, accessorytype

这是我最近注意到的一件奇怪的事情。即使在使用以下代码设置了附件类型后，我也无法看到我的 UITableView 单元的附件类型

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"LocationCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier: CellIdentifier] autorelease];
}

if (indexPath.section == 0) {
    cell.textLabel.text = @"Move to a New Location";
}else{
    cell.textLabel.text = [self.locArray objectAtIndex:indexPath.row];
}
cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
return cell;
} 
```

我设置的配件类型无关紧要。它始终只显示单元格中的文本标签，但没有按钮。我错过了什么吗？请注意，这不是我第一次使用 UITableViewCell。我之前从未遇到过这个问题。同时，我正在 iOS6 上对此进行测试，并在 iPad 模拟器和它自己的设备上都确认了这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:13:02.873

出色地！我已经解决了这个问题。我的 Viewcontroller 最初是 UIViewController 的子类，而不是 UITableViewController。我这样做是想我会在主视图中添加额外的视图，这与 TableView 无关。然后我将其更改为 UITableViewController ，瞧，一切都很完美。但这是 UiViewController 和 UitableViewController 提供的灵活性之间的权衡，因为我现在必须将这些额外的视图添加到 TableView 的 headerview 或 footerview 中。尽管如此，我必须以任何方式处理它。我希望这会对某人有所帮助。

# java - `JTableHeader` 可以跨越多列吗？

> ID：13201590
> 
> 赞同：6
> 
> 时间：2012-11-02T19:10:34.140
> 
> 标签：java, swing, jtable, jtableheader

我花了很长时间搜索这个，我只找到了`GroupableHeader`代码。我需要一个标题超过 2 列中的 2 列`JTable`。如何在不使用臭名昭著的情况下做到这一点`GroupableHeader`，同时保持 `JTableHeader 的默认外观和感觉？

* * *

这是我想到的图形表示：

```
_________________________
|     Table Header      |
|-----------------------|
|           |           |
|-----------|-----------|
|           |           |
|-----------|-----------| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:28:32.387

这取决于您想要达到的目标。

我通过创建自己的 JTableHeader 做了类似的事情，它本质上只是一个`JPanel`.

我在上面放置了“组”标题，在我想要“分组”的列上方。

然后我作弊并使用现有表格行标题并将其添加到标题下方的第二行。

这需要一些手，因为您需要知道要分组/跨越的列及其宽度。您还需要监视其宽度的变化并适当地更新标题。

我见过的大多数实现都使用它们自己的 UI 实现，我个人不喜欢这样，因为它取消了您正在使用的外观的工作。

你可以看看[这个](http://www.crionics.com/public/swing_examples/JTableExamples7.html)，它展示了你可以用`JTable`s 以及多列跨越来做的一些有趣的事情，但同样，它使用它自己的 UI 来让它工作。

我们在工作中开始使用的实现以相同的方式工作，我遇到的问题是您可以在组标题中看到鼠标调整光标大小，对我来说，这并不是您真正希望用户使用的看

# iphone - 应用程序在进入后台之前不保存

> ID：13201598
> 
> 赞同：0
> 
> 时间：2012-11-02T19:11:14.353
> 
> 标签：iphone, objective-c, background

每当用户进入后台时，我想在文本字段中保存一些文本我认为我写的所有内容都正确，因为我遵循了许多问题/答案。但是，当我关闭我的应用程序时，我的应用程序不会保存文本，甚至不会创建 plist，因此当我重新打开它时，文本字段是空的。这是代码：RootViewController.h：

```
@interface RootViewController: UIViewController <UITextFieldDelegate> {
UITextField *textField1;
UITextField *textField2;
UITextField *textField3;
UITextField *textField4;
}
@property (nonatomic, retain) UITextField *textField1, *textField2, *textField3, *textField4;
@end 
```

RootViewController.m：

```
#import "RootViewController.h"
@implementation RootViewController
@synthesize textField1, textField2, textField3, textField4;
...
- (UILabel*)addNewLabel:(NSString*)_text
{
//Initializing TextViews
}
....
- (NSString *) saveFilePathB
{
NSString *path = @"/Applications/AppDissassembler.app/Cache/savefileb.plist";
return path;
}
- (void)loadView {
    self.view = [[[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]] autorelease];
self.view.backgroundColor = [UIColor whiteColor];
//creating textfields
self.textField1 = [self addNewTextfield:60:80:175:true:@"Binary Name Here":1];
self.textField2 = [self addNewTextfield:60:145:200:true:@"Offset Here (0xOffset)":2];
self.textField3 = [self addNewTextfield:75:210:175:false:nil:3];
self.textField4 = [self addNewTextfield:75:310:175:false:nil:4];
}
- (void)applicationDidEnterBackground:(UIApplication *)application {
NSArray *values = [[NSArray alloc] initWithObjects:self.textField1.text,self.textField2.text,self.textField3.text,self.textField4.text,nil];
NSFileHandle *fout1;
[[NSFileManager defaultManager] createFileAtPath:[self saveFilePathB] contents:nil attributes:nil];
//open output file for writing
fout1 = [NSFileHandle fileHandleForWritingAtPath:[self saveFilePathB]]; 
[values writeToFile:[self saveFilePathB] atomically:YES];
[values release];

}
- (void)viewDidLoad 
{ 
NSString *myPath = [self saveFilePathB];

BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];

if (fileExists)
{

    NSArray *values = [[NSArray alloc] initWithContentsOfFile:myPath];
    self.textField1.text = [values objectAtIndex:0];
    self.textField2.text = [values objectAtIndex:1];
    self.textField3.text = [values objectAtIndex:2];
    self.textField4.text = [values objectAtIndex:3];
    [values release];
}

UIApplication *myApp = [UIApplication sharedApplication];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidEnterBackground:) name:@"UIApplicationDidEnterBackgroundNotification" object:myApp];
 [super viewDidLoad]; 
} 
- (void)dealloc {
[textField1 release];
[textField2 release];
[textField3 release];
[textField4 release];
[super dealloc];
}
@end 
```

如果我改变这个：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidEnterBackground:) name:@"UIApplicationDidEnterBackgroundNotification" object:myApp]; 
```

对此：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:myApp]; 
```

我收到一条错误消息，指出未声明 UIApplicationDidEnterBackgroundNotification。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:10:17.957

您尝试的第二个版本`UIApplicationDidEnterBackgroundNotification`是标识符而不是文字字符串，是使用此功能的正确方法。它应该在 UIApplication.h 中定义。

你说你是在 iPhone 本身上编译的，所以听起来你那里的开发环境缺少这个定义。我自己没试过，所以不能确定。

一旦你克服了编译错误，我建议使用 NSLog 来查看你的代码到哪里，因为这比查找要创建的文件更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:10:48.413

它不会在您尝试的方法中运行，因此在 UIApplicationDidEnterBackground 委托中。您所要做的就是在使用 beginBackgroundTaskWithExpirationHandler 进入后台时处理您的进程。请参阅此主题：[主题](https://stackoverflow.com/questions/13113602/ios-safari-keep-working-outside-of-web-app/13114249#13114249)

# ruby-on-rails - undefined local variable or method `config' for #

> ID：13201604
> 
> 赞同：0
> 
> 时间：2012-11-02T19:11:19.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3

I'm following the following tutorial:

[http://railscasts.com/episodes/188-declarative-authorization?view=comments](http://railscasts.com/episodes/188-declarative-authorization?view=comments)

Also Had a go at following the documentation for the gem on Git:

[https://github.com/stffn/declarative_authorization](https://github.com/stffn/declarative_authorization)

But had the same outcome both times which is:

```
mark@ubuntu:~/RoR Projects/blog$ sudo rake gems:install
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
rake aborted!
undefined local variable or method `config' for #Bundler::Dsl:0x7fe2598d56d8> 
```

I have followed each tutorial to the letter but keep getting the same output so I'm guessing this is a system issue at my end?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:17:37.180

看起来您正在使用 rails 的旧方式（之前`bundler`）包含 gem，但正在使用`bundler`它`Gemfile`

添加`gem "declarative_authorization"`到您的`Gemfile`，它应该按预期工作。

# clojure - 块封装与本地封装 - 让

> ID：13201605
> 
> 赞同：6
> 
> 时间：2012-11-02T19:11:21.237
> 
> 标签：clojure, let

当我有与独立于其参数的函数相关的数据时，我应该在什么时候支持块封装而不是本地封装？

我什么时候应该使用：

```
(let [hello "Hello "]
  (defn do-greet
    "Print a greeting."
    [name]
    (println (str hello name)))) 
```

相对：

```
(defn do-greet
  "Print a greeting."
  [name]
  (let [hello "Hello "]
    (println (str hello name)))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T04:21:06.770

如果您想在词法范围的代码块中使用静态常量之类的值，则前者是一个合理的选择。通常，如果出现以下情况，您会这样做：

*   该值的计算成本很高，并且您只想在加载命名空间时执行一次
*   该值是真正的常量，即不会在函数调用之间改变
*   该值将在多个函数定义中使用（即您将多个定义放在 let 块内）
*   （可能？）因为您想在宏扩展中使用值，并且在宏扩展本身中嵌入 let 会增加不必要的复杂性。

在大多数其他情况下，可能应该首选后一个版本，这有几个原因：

*   它更地道
*   它允许函数定义处于顶层，这对代码的可读性/理解性更好
*   它允许值在不同的函数调用上有所不同
*   它更好地反映了在本地上下文中使用该值的意图

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T20:49:55.617

这是一种风格上的选择，而且应该至少在一定程度上取决于计算价值的成本。改为考虑：

```
(defn nth-prime [n] ...)

(defn f [x]
  (let [factor (nth-prime 10000)]
    (* x factor)))

(let [factor (nth-prime 10000)]
  (defn g [x]
    (* x factor))) 
```

每次`f`调用都重新计算一个昂贵的常量是浪费的，并且`g`使用一种简单的技术来避免这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T20:07:08.650

如果`hello`仅在该单个函数中使用，则将其放在`let`函数本身内部更有意义。如果您要在多个函数中使用，那么将这些函数的外部包裹起来是`hello`有意义的。`let`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T19:14:02.067

绝对是这个：

```
(defn do-greet
  "Print a greeting."
  [name]
  (let [hello "Hello "]
    (println (str hello name)))) 
```

# ios - 在 iPhone 上使用 GL_UNSIGNED_SHORT_1_5_5_5_REV

> ID：13201611
> 
> 赞同：4
> 
> 时间：2012-11-02T19:12:08.847
> 
> 标签：ios, c, opengl-es, colors, cgimage

我一直在为 iPhone 渲染定期更新的图像时遇到严重的性能问题。今天在 iPad 3 上试用后，我发现我只有 2fps。这太慢了。因此，我决定分析并发现几乎所有时间都用于将图像转换为 32 位 ARGB 图像（在 UIImage drawInRect 之后）。鉴于每个人都说 UIKit 使用 OpenGLES 渲染，我对性能如此糟糕感到非常震惊。

所以我将渲染代码转换为 GLES1（我懒得在 mo 处设置 GLES2 渲染器；））。性能已经飙升。我现在得到20 + fps。事实上，性能非常好，我开始怀疑我是否可以执行完整的视网膜渲染！

无论如何，我正在创建如下纹理：

```
glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_SHORT_5_5_5_1, &colours.front() ); 
```

不幸的是，这颠倒了组件顺序。我通过从以下位置反转位顺序来“修复”它：

```
val     = ((rgba.a >> 7) << 15) | ((rgba.b >> 3) << 10) | ((rgba.g >> 3) << 5) | ((rgba.r >> 3) << 0); 
```

到：

```
val     = ((rgba.r >> 3) << 11) | ((rgba.g >> 3) << 6) | ((rgba.b >> 3) << 1) | ((rgba.a >> 7) << 0); 
```

所以这证实了组件顺序在 CGImage 上是颠倒的。但是，此代码用于多种产品，因此我需要想出一种加载“组件反转”图像的方法。

因此，我找到了“GL_UNSIGNED_SHORT_1_5_5_5_REV”标志，但我无法让它工作。

我试过以下代码：

```
glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_SHORT_1_5_5_5_REV, &colours.front() ); 
```

和：

```
glTexImage2D( GL_TEXTURE_2D, 0, GL_BGRA, width, height, 0, GL_BGRA, GL_UNSIGNED_SHORT_1_5_5_5_REV, &colours.front() ); 
```

但两者都返回给我 GL_INVALID_ENUM。那么我做错了什么？甚至可以加载组件反转图像吗？

提前致谢！

**编辑**：在此期间，我引入了另一个像素类，然后添加了以下代码：

```
inline uint32_t UpdateGLTexture( uint32_t texture, std::vector< R5G5B5A1 >& colours, unsigned int width, unsigned int height )
{
    std::vector< A1R5G5B5 > convertedColours( colours.size() );
    ColourSpaceConversion::ConvertFormat( convertedColours, colours );
    return UpdateGLTexture( texture, convertedColours, width, height );
} 
```

所以我现在有了正确的渲染，但我试图避免这种颜色转换。在使用 GL 渲染时，我可能只是以该格式创建源图像，但令人讨厌的是我无法直接加载该格式:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-24T02:47:11.337

GL_UNSIGNED_SHORT_1_5_5_5_REV 不起作用的原因是它不是纹理格式，尽管这在 iOS 上非常有用。1555 16b 格式是 GL_EXT_read_format_bgra 扩展的一部分（参见定义它的 #ifdef 块），它只为 glReadPixels 定义了这个枚举，不幸的是，不是 glTexImage2D：

[http://www.khronos.org/registry/gles/extensions/EXT/EXT_read_format_bgra.txt](http://www.khronos.org/registry/gles/extensions/EXT/EXT_read_format_bgra.txt)

这很烦人。iOS 将其 16b 缩略图存储在 A1B5G5R5 中，CGBitmapContext 也支持 A1B5G5R5 渲染，但 OpenGL ES 在 iOS 上仅支持 R5G5B5A1 (5551)。AFAIK，没有办法直接下载使用 16b 5551 的 ALAsset 缩略图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T23:12:32.473

UIKit 不使用 OpenGL ES 进行渲染，它只是将结果缓存在 OpenGL ES 纹理中以进行合成和转换。矢量的绘制仍然受 CPU 限制，因此在升级到 Retina 显示器时必须将光栅化的像素数量增加四倍会减慢速度。

我不太确定您要做什么，但听起来您想将 BGRA 数据上传到您的 OpenGL ES 纹理中。在这种情况下，您需要执行以下操作：

```
glGenTextures(1, &outputTexture);
glBindTexture(GL_TEXTURE_2D, outputTexture);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (int)pixelSizeToUseForTexture.width, (int)pixelSizeToUseForTexture.height, 0, GL_BGRA, GL_UNSIGNED_BYTE, imageData); 
```

现在，我在这里做一个完整的每像素 32 字节的 RGBA 纹理，而不是你尝试的更紧凑的纹理，因为我希望纹理中的颜色保真度更高。我没有尝试过，但我相信您也可以使用更紧凑的颜色格式。

# backbone.js - Backbone pagination with static data set

> ID：13201615
> 
> 赞同：0
> 
> 时间：2012-11-02T19:12:28.133
> 
> 标签：backbone.js

I am using Backbone to do pagination on a static dataset. So I have a dataset with 100 records, I would like to store that data in the collection and use pagination over that dataset.

There is no database pagination available. So if I have 100 records, I would like to show 10 and then when I scroll, I would like to append another 10 to the view.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:26:21.650

[这](https://github.com/addyosmani/backbone.paginator)可能会帮助你。看`clientPager`。[Addy Osmani](https://github.com/addyosmani)的插件。

# android - OnBackPressing 退出应用程序

> ID：13201619
> 
> 赞同：0
> 
> 时间：2012-11-02T19:12:37.377
> 
> 标签：android, android-intent, android-camera

我正在使用相机意图拍照并处理像素。到目前为止，这很好用，但是当我第二次按下**后退**按钮重新初始化相机时，应用程序崩溃了。

我的应用程序在我启动它时也会关闭，然后在没有拍照的情况下按下**返回。**我实现了一个调用意图的按钮，拍摄多张照片没有问题。

LogCat Log 没有显示任何有趣的内容。我想这是我错过的基本内容，所以我不发布任何代码，但我的 Onback 方法。

```
@Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        super.onBackPressed();
        openCamera();

    } 
```

**编辑** 删除

```
super.onBackPressed(); 
```

解决了关闭问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:15:05.930

改成

```
@Override
    public void onBackPressed() {
        openCamera();

    } 
```

因为 backButton 的默认行为是 Activity 的调用 finish()。然后你调用它然后调用 super.onBackPressed()

换句话说，您调用默认后退按钮，但您想要覆盖它并且在代码中必须覆盖默认操作第一行您调用默认后退按钮操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:05:38.083

可能想试试：

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
     if ((keyCode == KeyEvent.KEYCODE_BACK))
       {       
      backMethod();
       }

       return super.onKeyDown(keyCode, event);
    } 
```

# python - 在远程机器上使用 Paramiko 通过 sshClient() 执行本地 python 脚本

> ID：13201624
> 
> 赞同：7
> 
> 时间：2012-11-02T19:12:54.217
> 
> 标签：python, paramiko

这是我在 StackOverflow 的第一篇文章，所以我希望以正确的方式来做！:)

我的新工作需要连接到多台服务器并在所有服务器中执行 python 脚本。我对服务器不是很熟悉（刚开始使用 paramiko），所以对于任何重大错误，我深表歉意！

我想在它们上运行的脚本修改了 authorized_keys 文件，但开始时，我只用一个服务器尝试它，还没有使用上述脚本（我不想犯错误并在我的第一个任务中阻止服务器！）。我只是想用一个非常简单的函数 getDir() 列出远程机器中的目录。到目前为止，我已经能够使用基本的 paramiko 连接到服务器（顺便说一下，我正在使用 pdb 来调试脚本）：

try_paramiko.py

```
#!/usr/bin/python

import paramiko
from getDir import get_dir
import pdb

def try_this(server):
    pdb.set_trace()
    ssh = paramiko.SSHClient()
    ssh.load_host_keys("pth/to/known_hosts")
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    my_key = paramiko.RSAKey.from_private_key_file("pth/to/id_rsa")
    ssh.connect(server, username = "root", pkey = my_key)
    i, o, e = ssh.exec_command(getDir()) 
```

这是获取目录列表的函数：

获取目录.py

```
#!/usr/bin/python

import os
import pdb

def get_dir():
    pdb.set_trace()
    print "Current dir list is:"
    for item in os.listdir(os.getcwd()):
        print item 
```

在调试时，我得到了本地机器的目录列表，而不是来自远程机器的目录列表……有没有办法通过 paramiko 将 python 函数作为参数传递？我只想在本地拥有脚本并远程运行它，就像您使用来自 ssh 的 bash 文件执行它时一样：

```
ssh -i pth/to/key username@domain.com 'bash -s' < script.sh 
```

所以实际上避免将python脚本复制到每台机器然后从它们运行它（我猜使用上面的命令脚本也会被复制到远程机器然后删除，对吧？）有没有办法做到这一点paramiko.sshClient()？

我还尝试修改代码并使用创建 exec_command 的通道的标准输出来列出留下脚本的目录，例如：

try_paramiko.py

```
#!/usr/bin/python

import paramiko
from getDir import get_dir
import pdb

def try_this(server):
    pdb.set_trace()
    ssh = paramiko.SSHClient()
    ssh.load_host_keys("pth/to/known_hosts")
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    my_key = paramiko.RSAKey.from_private_key_file("pth/to/id_rsa")
    ssh.connect(server, username = "root", pkey = my_key)
    i, o, e = ssh.exec_command(getDir())
    for line in o.readlines():
        print line
    for line in e.readlines():
        print line 
```

获取目录.py

```
def get_dir():
    return ', '.join(os.listdir(os.getcwd())) 
```

但是有了这个，它实际上会尝试将本地目录列表作为命令运行（这实际上对我来说是有意义的）。我不得不将列表转换为字符串，因为我有一个 TypeError 说它需要一个字符串或只读字符缓冲区，而不是列表......我知道这是传递函数的绝望尝试......任何人都知道我怎么能做这样的事情（通过 paramiko 传递一个本地函数在远程机器上执行它）？如果您对代码有任何更正或提示，非常欢迎他们（实际上，非常感谢任何形式的帮助！）。

提前非常感谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:38:21.593

您不能只通过 ssh 执行 python 函数。ssh 只是一条隧道，您的代码在一侧（客户端），外壳在另一侧（服务器）。您应该在远程端执行 shell 命令。

如果使用原始 ssh 代码并不重要，我建议[`fabric`](http://fabfile.org)将其作为编写管理工具的库。它包含用于轻松处理 ssh、文件传输、sudo、并行执行等的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:16:15.197

我认为您可能想要更改要传递的参数`ssh.exec_command`这是一个想法：

而不是这样做：

```
def get_dir():
    return ', '.join(os.listdir(os.getcwd()))

i, o, e = ssh.exec_command(getDir()) 
```

您可能想尝试：

```
i, o, e = ssh.exec_command('pwd')
o.printlines() 
```

和其他要探索的东西：

*   编写驻留在您的服务器上的 bash 脚本或 Python。您可以使用 Paramiko 登录服务器并使用`ssh.exec_command(some_script.sh)`或执行脚本`ssh.exec_command(some_script.py)`
*   Paramiko 有一些 FTP/SFTP 实用程序，因此您实际上可以使用它将脚本放在服务器上然后执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-20T07:46:59.443

可以通过使用 here 文档将模块提供给远程服务器的 python 解释器来做到这一点。

```
remotepypath = "/usr/bin/"

# open the module as a text file
with open("getDir.py", "r") as f:
    mymodule = f.read()

# setup from OP code
ssh = paramiko.SSHClient()
ssh.load_host_keys("pth/to/known_hosts")
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
my_key = paramiko.RSAKey.from_private_key_file("pth/to/id_rsa")
ssh.connect(server, username = "root", pkey = my_key)

# use here document to feed module into python interpreter
stdin, stdout, stderr = ssh.exec_command("{p}python - <<EOF\n{s}\nEOF".format(p=remotepypath, s=mymodule))
print("stderr: ", stderr.readlines())
print("stdout: ", stdout.readlines()) 
```

# html - iframe 对齐

> ID：13201630
> 
> 赞同：0
> 
> 时间：2012-11-02T19:13:41.320
> 
> 标签：html

这是我的页面来源：

```
<html style="height: 100%">
    <head>
        <link rel="stylesheet" media="screen" href="/public/stylesheets/main.css">
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body style="height: 100%; margin: 0px">
    <table>
    <tr>
        <th>
            <img src="/public/images/logo.jpg" alt="logo" id="logo" />
        </th>
    </tr>
    </table>

    <iframe id="testFrame" src="/public/site_down.gif" frameborder="0" style="overflow:hidden;height:100%;width:100%" height="100" width="100">

    </body>
</html> 
```

下面的代码在 Firefox 中显示在页面中心的徽标，但在 IE 中左对齐。我如何使它独立于浏览器，以便它始终显示在中心？

```
<table>
 <tr>
    <th>
        <img src="/public/images/logo.jpg" alt="logo" id="logo" />
    </th>
 </tr>
</table> 
```

iframe 代码在 Firefox 和 IE 中左对齐，IE 显示 V 滚动条，Firefox 没有。我想让 iframe 变得灵活，以便客户端可以删除任何图像/html 代码，以便它始终居中而不会出现任何滚动条。

我的 CSS

```
table
{
    border-width: 0 0 1px 1px;
    border-spacing: 0;
    border-collapse: collapse;
    margin:auto;
    vertical-align:middle;
}

td
{
    margin: 0;
    padding: 4px;
    border-width: 1px 1px 0 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:31:58.840

居中页面通常是这样工作的：

```
<body>
    <div id="wrapper">
     ...your side contents...
    </div>
</body> 
```

CSS：

```
#wrapper {
    width:960px;
    margin-left:auto;
    margin-right:auto;
} 
```

相同的技术可用于居中任何内容，包括您的图像和 iframe。给它一个类或 ID 并应用相同的 CSS 模式。

# c# - Show Progress Bar for task of one Process in another Process

> ID：13201631
> 
> 赞同：0
> 
> 时间：2012-11-02T19:13:44.050
> 
> 标签：c#, wcf, design-patterns, .net-3.5, progress-bar

I have a system with the following components:

Process A - A console app that acts as a service - Services clients through WCF

Process B - A console app that acts as a service - Services clients through WCF

Process C - A small WInForm app that acts as a service - Services clients through WCF

Though we can start each of the above processes individually by double clicking but we decided to have another Process "Service Manager" that hides the individual UI's and starts all the processes above and shows a kind of consolidated UI. The communication between the Service Manager Process and the different processes is right now done through TCP but we can move that to WCF anytime we wish. Before anybody asks, so TCP was initially used for "Mono" but that is not on the cards right now.

Now when Process A is started from the ServiceManager, lets say Process A is performing a time consuming task, since it does not have its own UI, so Service Manager needs to show a progress bar for the Process A task.

In Process A i have every information to show a deterministic progress bar, but how do i send that data over to the Service Manager. Like "Step 1 of 1000" etc.

Is there a recommended "Design Pattern" or any ideas that i can start with. Every process started from the Service Manager needs to use the same code for sending any progress task data over to the Service Manager(basically implement some interface). Every Process has its own progress bar on the Service Manager UI.

.Net 3.5

used Language C#

Thanks

# php - PHP 代码破坏背景和表格

> ID：13201635
> 
> 赞同：-2
> 
> 时间：2012-11-02T19:13:58.943
> 
> 标签：php

下面的代码破坏了我的页面......没有显示壁纸或表格。唯一显示的是徽标和登录表单。该表格假设让我登录然后显示我的帐户名和一些数字。如何修复以下代码？

```
 <?php

   include 'wasudf.php';

   //
   // get session id
   //
   $SessionID = $_GET['SessionID'];

   if (!$SessionID)
      $SessionID = $_POST['SessionID'];

   if (!$SessionID)
       $SessionID = $_COOKIE['SessionID'];

   if (!$Function)
      $Function = $_GET['FunkShun'];

   if (!$Function)
      $Function = $_POST['FunkShun'];

   if (!$Function)
      $Function="Home";

   if (!$SessionID)
      {

echo'     <form action="index.php" method="post" id="LoginForm" style="color:#FFF">';
echo'     <input type="hidden" name="SessionID" value="new"></input>';
echo'     Username:';
echo'     <label>';
echo'     <input type="text" name="AccountNo" value="" class="input" size="28"></input>';
echo'     </label>';
echo'     <BR /><BR />';
echo'     &nbsp;&nbsp;Password:';
echo'    <label>';
echo'    <input type="password" name="Password" value="" class="input" size="30"></input>';
echo'    </label>';
echo'     <BR /><BR />';
echo'    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="image" src="images/input-img.gif" value="Log On" class="input-img"></input>';
echo'    <BR /><br />';
echo'    <a href="#" class="link" style="font-size:12px;">Register now!</a>   <a href="#" style="font-size:12px;">Forgotten your password?</a> ';
echo'    </form>';

return;
      }

   //
   // this is a new session - add to web session table
   //
   if ($SessionID == "new")
      {
      $AccountNo = check_input(strtoupper(trim($_POST['AccountNo'])));
      $Password = check_input(strtoupper(trim($_POST['Password'])));

      if (!$AccountNo)
         ExitLogOn("Invalid Account/Password");

      $rs=mysql_query("select * from accounts where code='$AccountNo' and password='$Password'",$db);
      $row=mysql_fetch_array($rs);

      if (!$row)
         ExitLogOn("Invalid Account/Password!");

      mysql_query("update system set nextsession = nextsession + 1",$db);

      $rs=mysql_query("select * from system",$db);
      $row=mysql_fetch_array($rs);

      $SessionID = $row['nextsession'];

      //
      // ensure this session does not exist already
      // also remove any sessions belonging to this account
      //    - ie account can only be logged on one workstation at any time
      //
      mysql_query("delete from websession where sessionid='$SessionID' or account='$AccountNo'",$db);

      $Expiry=strtotime("+1 hour");

      $xCommand = "insert into websession set ";
      $xCommand = $xCommand . "sessionid='$SessionID',";
      $xCommand = $xCommand . "ipaddress='" . $_SERVER['REMOTE_ADDR'] . "',";
      $xCommand = $xCommand . "account='$AccountNo',";
      $xCommand = $xCommand . "password='$Password',";
      $xCommand = $xCommand . "date='" . date('YmdHis',$Expiry) . "'";

      mysql_query($xCommand,$db);
      }

   $rs=mysql_query("select * from websession where sessionid='$SessionID'",$db);
   $row=mysql_fetch_array($rs);

   if (!$row)
      {
      mysql_query("delete from websession where sessionid='$SessionID'",$db);
      mysql_query("delete from elist where code='$SessionID'",$db);
      ExitLogOn("Session Expired");
      }

   if ($row['date'] < date('YmdHis'))
      {
      mysql_query("delete from websession where sessionid='$SessionID'",$db);
      mysql_query("delete from elist where code='$SessionID'",$db);
      ExitLogOn("Session Expired!!");
      }

   $Expiry=strtotime("+1 hour");

   $xCommand = "update websession set ";
   $xCommand = $xCommand . "date='" . date('YmdHis',$Expiry) . "'";
   $xCommand = $xCommand . "where sessionid='$SessionID'";

   mysql_query($xCommand,$db);

   $AccountNo = $row['account'];
   $Password = $row['password'];
   $MiscData = $row['data'];

   $rs=mysql_query("select * from accounts where code='$AccountNo' and password='$Password'",$db);
   $row=mysql_fetch_array($rs);

   if (!$row)
      ExitLogOn("Invalid Account/Password!!");

   $Name = trim($row['name']);
   $Balance = $row['balance'];

      if ($Function == "Home")
      {
      echo '<form action="' . $_SERVER['SCRIPT_NAME'] . '" method="post">';
      echo '<input type="hidden" name="SessionID" value="' . $SessionID . '"></input>';
      echo '<table width=800 align=center>';

      echo '   <tr>';
      echo '      <td align=center colspan="4" style="color:#F93;">';
      echo           $Name;
      echo '      </td>';
      echo '   </tr>';

      echo '   <tr>';
      echo '      <td align=center colspan="4" style="color:#F93;">';
      echo '         Current Balance $ ' . snumber($Balance,10);
      echo '      </td>';
      echo '   </tr>';

      echo '   <tr>';
      echo '      <td align=center colspan="4">';
      echo '         &nbsp';
      echo '      </td>';
      echo '   </tr>';

      echo '</table>';
      echo '</form>';
      }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:18:35.753

您在同一页面上同时`GET`使用两者。`POST`

```
$SessionID = $_GET['SessionID'];

if (!$SessionID)
  $SessionID = $_POST['SessionID'];

if (!$SessionID)
   $SessionID = $_COOKIE['SessionID'];

if (!$Function)
  $Function = $_GET['FunkShun'];

if (!$Function)
  $Function = $_POST['FunkShun']; 
```

所有的重新分配是`$Function`怎么回事？

# javascript - Manipulate JQuery Dialog opened in other function

> ID：13201638
> 
> 赞同：1
> 
> 时间：2012-11-02T19:14:22.847
> 
> 标签：javascript, jquery, jquery-events, jquery-ui-dialog

I am trying to redirect to another page when the "OK" button of my JQuery dialog is clicked. It seems as though the JQuery function can't access the dialog defined by the JavaScript function. Any help would be appreciated! Here's my code:

```
$('#submitRegistration').bind('click', function() {
  $.post('verification/register.php', $('#register').serializeArray(), function(data){
      switch (data) {
          case "errMod":
              showDlg("Your attempt has been recorded. Expect the po-po any day now!");
              break;
          case "err1":
              showDlg("Username Incorrect", "The username must be at least 6 characters long");
              break;
          case "err2":
              showDlg("Password Incorrect", "Password must be at least 8 characters long");
              break;
          case "err3":
              showDlg("Database Offline", "The database is offline. Please try again later.");
              break;
          case "err4":
              showDlg("Not Unique Username", "Username has already been taken. Please choose another one");
              break;
          case "noerr":
              showDlg("Success!", "You have been registered! Click OK to continue");

                  while($('#message').dialog('isOpen')) {
                      continue;
                  }   
                          window.location = 'none.php';
                          break;
              default:                      
          }

      });

});

function showDlg(head, contents) {
      $('#message').html(contents);
      $('#message').dialog({                            
          title: head,
          modal: true,
          dragable: false,
          //resizable: false,
          show: 'slide',
          hide: 'slide',
          buttons: {
              'OK': function() { $('#message').dialog('close'); }   
          }
      });   
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:27:49.440

您可以尝试使用[jquery-ui](http://jqueryui.com/dialog/#modal-message)

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Dialog - Modal message</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="/resources/demos/external/jquery.bgiframe-2.1.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#dialog-message" ).dialog({
            modal: true,
            buttons: {
                Ok: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
    </script>
</head>
<body>

    <div id="dialog-message" title="Download complete">
    <p>
        <span class="ui-icon ui-icon-circle-check" style="float: left; margin: 0 7px 50px 0;"></span>
        Your files have downloaded successfully into the My Downloads folder.
    </p>
    <p>
        Currently using <b>36% of your storage space</b>.
    </p>
</div>

<p>Sed vel diam id libero <a href="http://example.com">rutrum convallis</a>. Donec aliquet leo vel magna. Phasellus rhoncus faucibus ante. Etiam bibendum, enim faucibus aliquet rhoncus, arcu felis ultricies neque, sit amet auctor elit eros a lectus.</p>

</body> 
```

# sql-server-2008-r2 - SSRS report VERY SLOW in prod but SQL query runs FAST

> ID：13201639
> 
> 赞同：5
> 
> 时间：2012-11-02T19:14:25.110
> 
> 标签：sql-server-2008-r2

I've spent hours troubleshooting this and I need some fresh perspective . . .

We have a relatively simple report setup in SSRS, simple matrix with columns across the top and data points going down. The SQL query behind the report is "medium" complexity -- has some subqueries and several joins, but nothing real crazy.

Report has worked fine for months and recently has become REALLY slow. Like, 15-20 minutes to generate the report. I can clip-and-paste the SQL query from the Report Designer into SQL Mgmt Studio, replace the necessary variables, and it ruturns results in less than 2 seconds. I even went so far as to use SQL profiler to get the *exact* query that SSRS is executing, and clipped-and-pasted this into Mgmt Studio, still the same thing, sub-second results. The parameters and date ranges specified don't make any difference, I can set parameters to return a small dataset (< 100 rows) or a humongous one (> 10,000 rows) and still the same results; super-fast in Mgmt Studio but 20 minutes to generate the SSRS report.

Troubleshooting I've attempted so far: Deleted and re-deployed the report in SSRS. Tested in Visual Studio IDE on multiple machines and on the SSRS server, same speed (~20 minutes) both places Used SQL Profiler to monitor the SPID executing the report, captured all SQL statements being executed, and tried them individualy (and together) in Mgmt Studio -- runs fast in Mgmt Studio (< 2 seconds) Monitored server performance during report execution. Processor is pretty darn hammered during the 20 minute report generation, disk I/O is slightly above baseline

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T19:37:53.717

检查两者的执行计划，以确保参数嗅探和/或 set_options 中的差异的组合没有生成两个单独的执行计划。

这是我在从 ADO.Net 和 SSMS 执行查询时遇到的情况。当使用不同的选项创建不同的执行计划时，就会出现问题。SQL Server 利用传入的参数值来尝试进一步优化生成的执行计划。我发现每个生成的执行计划都使用了不同的参数值，从而产生了最优和次优计划。目前我找不到用于检查此问题的原始查询，但快速搜索会发现与同一问题相关的这篇文章。

[http://www.sqlservercentral.com/blogs/sqlservernotesfromthefield/2011/10/25/multiple-query-plans-for-the-same-query_3F00_/](http://www.sqlservercentral.com/blogs/sqlservernotesfromthefield/2011/10/25/multiple-query-plans-for-the-same-query_3F00_/)

如果您使用的是 SQL Server 2008，还可以通过名为“OPTIMIZE FOR UNKNOWN”的查询提示提供替代方法，该方法实质上禁用了参数嗅探。下面是一篇文章的链接，该文章帮助我对该功能进行了原始研究。

[http://blogs.msdn.com/b/sqlprogrammability/archive/2008/11/26/optimize-for-unknown-a-little-known-sql-server-2008-feature.aspx](http://blogs.msdn.com/b/sqlprogrammability/archive/2008/11/26/optimize-for-unknown-a-little-known-sql-server-2008-feature.aspx)

对于早于 2008 的版本，上述方法的替代方法是将参数值存储在过程中的局部变量中。这与上面的查询提示的行为方式相同。这个提示来自下面的文章（在编辑中）。

* * *

编辑

多一点搜索发现了一篇文章，对这个主题进行了非常深入的分析，以防万一它有任何用处，链接如下。

[http://www.sommarskog.se/query-plan-mysteries.html](http://www.sommarskog.se/query-plan-mysteries.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-11T18:09:22.610

这个问题对我们来说也是一个问题。我们正在运行来自 CRM 2011 的 SSRS 报告。我尝试了一些建议的解决方案（将输入参数映射到局部变量，将 WITH RECOMPILE 添加到存储过程），但没有任何运气。

这篇关于报表服务器应用程序内存配置的文章 ( [http://technet.microsoft.com/en-us/library/ms159206.aspx](http://technet.microsoft.com/en-us/library/ms159206.aspx) )，更具体地说，将 4000000 值添加到我们的 RSReportServer.config 文件中解决了这个问题。

需要 30-60 秒才能呈现的报告现在在不到 5 秒的时间内完成，这与在 SSMS 中执行底层存储过程所需的时间大致相同。

# asp.net - writing csv adds extra lines

> ID：13201641
> 
> 赞同：1
> 
> 时间：2012-11-02T19:14:38.380
> 
> 标签：asp.net, csv

I've to write a csv for a third-party upload. They're saying they can't read the csv file created because it has two extra lines of code and doesn't end (when opened in Notepad) on the last character of the last line. That's true - but can anyone tell me why?

```
Dim _csvLine As New System.IO.StreamWriter(Server.MapPath("~/folder/_" & rptType.SelectedItem.Value.ToString & ".csv"), False)
Dim tb As New StringBuilder
Dim x As Integer = ds.Tables("csv").Columns.Count, y As Integer = 1
For Each row As Data.DataRow In ds.Tables("csv").Rows
    For Each col As Data.DataColumn In ds.Tables("csv").Columns
        If y <> x Then
            tb.Append(Trim(System.Text.RegularExpressions.Regex.Replace(row.Item(col).ToString, "\s+", " ", RegexOptions.IgnoreCase Or RegexOptions.Multiline)) & ",")
            y = y + 1
        Else
            tb.Append(Trim(System.Text.RegularExpressions.Regex.Replace(row.Item(col).ToString, "\s+", " ", RegexOptions.IgnoreCase Or RegexOptions.Multiline)))
            tb.AppendLine()
            y = 1
        End If
    Next
Next
_csvLine.WriteLine(Left(tb.ToString, Len(tb.ToString) - 2))
_csvLine.Flush()
_csvLine.Close()
_csvLine.Dispose() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:20:00.467

One line is appended by `_csvLine.WriteLine`, use Write() instead. `tb.AppendLine()` adds the second line, try avoiding it on the last line.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:18:46.033

您正在执行`_csvLine.WriteLine(`的操作是在文件末尾添加换行符。

# assembly - 为什么 x86-64 GCC 函数序言分配的堆栈比局部变量少？

> ID：13201644
> 
> 赞同：16
> 
> 时间：2012-11-02T19:14:48.757
> 
> 标签：assembly, gcc, stack, x86-64, red-zone

考虑以下简单程序：

```
int main(int argc, char **argv)
{
        char buffer[256];

        buffer[0] = 0x41;
        buffer[128] = 0x41;
        buffer[255] = 0x41;

        return 0;
} 
```

在 x86-64 机器上使用 GCC 4.7.0 编译。用 GDB 反汇编 main() 给出：

```
0x00000000004004cc <+0>:     push   rbp
0x00000000004004cd <+1>:     mov    rbp,rsp
0x00000000004004d0 <+4>:     sub    rsp,0x98
0x00000000004004d7 <+11>:    mov    DWORD PTR [rbp-0x104],edi
0x00000000004004dd <+17>:    mov    QWORD PTR [rbp-0x110],rsi
0x00000000004004e4 <+24>:    mov    BYTE PTR [rbp-0x100],0x41
0x00000000004004eb <+31>:    mov    BYTE PTR [rbp-0x80],0x41
0x00000000004004ef <+35>:    mov    BYTE PTR [rbp-0x1],0x41
0x00000000004004f3 <+39>:    mov    eax,0x0
0x00000000004004f8 <+44>:    leave  
0x00000000004004f9 <+45>:    ret 
```

当缓冲区为 256 字节时，为什么它只使用 0x98 = 152d 子 rsp？当我将数据移动到缓冲区 [0] 时，它似乎只是使用分配的堆栈帧之外的数据并使用 rbp 来引用，那么 sub rsp,0x98 的意义何在？

另一个问题，这些行有什么作用？

```
0x00000000004004d7 <+11>:    mov    DWORD PTR [rbp-0x104],edi
0x00000000004004dd <+17>:    mov    QWORD PTR [rbp-0x110],rsi 
```

为什么需要保存 EDI 而不是 RDI？但是，我看到它将其移到了 C 代码中分配的缓冲区的最大范围之外。同样有趣的是为什么两个变量之间的差异如此之大。既然 EDI 只有 4 个字节，为什么需要将两个变量分开 12 个字节呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-03T01:26:34.053

Linux （和其他一些操作系统，虽然特别*不是*Windows，它们有自己不同的 ABI）使用的[x86-64 ABI](http://www.x86-64.org/documentation/abi.pdf)在堆栈指针下方定义了一个 128 字节的“红色区域”，保证不会被信号或中断处理程序。（参见图 3.3 和 §3.2.2。）

 *因此，叶函数（即不调用任何其他函数的函数）可以使用这个区域来做任何它想要的事情——它不会做任何像 a`call`那样将数据放在堆栈指针上的事情；并且任何信号或中断处理程序都将跟随 ABI 并在存储任何内容之前将堆栈指针至少再下降 128 个字节。

（较短的指令编码可用于有符号的 8 位位移，因此红色区域的要点是它增加了叶函数可以使用这些较短指令访问的本地数据量。）

这就是这里发生的事情。

但是......这段代码没有使用那些较短的编码（它使用的是偏移量`rbp`而不是`rsp`）。为什么不？它也在节省`edi`，而且`rsi`完全没有必要——你问为什么要节省`edi`而不是`rdi`，但为什么要节省呢？

答案是编译器正在生成非常糟糕的代码，因为没有启用优化。如果您启用任何优化，您的整个功能可能会崩溃为：

```
mov eax, 0
ret 
```

因为这就是它真正需要做的：`buffer[]`是本地的，所以对其所做的更改将永远不会被其他任何东西看到，因此可以优化掉；除此之外，所有函数需要做的就是返回 0。

* * *

所以，这是一个更好的例子。这个函数完全是胡说八道，但是使用了一个类似的数组，同时做了足够的工作来确保事情不会全部被优化掉：

```
$ cat test.c
int foo(char *bar)
{
    char tmp[256];
    int i;

    for (i = 0; bar[i] != 0; i++)
      tmp[i] = bar[i] + i;

    return tmp[1] + tmp[200];
} 
```

经过一些优化后，您可以看到红色区域的类似用法，但这次它确实使用了以下偏移量`rsp`：

```
$ gcc -m64 -O1 -c test.c
$ objdump -Mintel -d test.o

test.o:     file format elf64-x86-64

Disassembly of section .text:

0000000000000000 <foo>:
   0:   53                      push   rbx
   1:   48 81 ec 88 00 00 00    sub    rsp,0x88
   8:   0f b6 17                movzx  edx,BYTE PTR [rdi]
   b:   84 d2                   test   dl,dl
   d:   74 26                   je     35 <foo+0x35>
   f:   4c 8d 44 24 88          lea    r8,[rsp-0x78]
  14:   48 8d 4f 01             lea    rcx,[rdi+0x1]
  18:   4c 89 c0                mov    rax,r8
  1b:   89 c3                   mov    ebx,eax
  1d:   44 28 c3                sub    bl,r8b
  20:   89 de                   mov    esi,ebx
  22:   01 f2                   add    edx,esi
  24:   88 10                   mov    BYTE PTR [rax],dl
  26:   0f b6 11                movzx  edx,BYTE PTR [rcx]
  29:   48 83 c0 01             add    rax,0x1
  2d:   48 83 c1 01             add    rcx,0x1
  31:   84 d2                   test   dl,dl
  33:   75 e6                   jne    1b <foo+0x1b>
  35:   0f be 54 24 50          movsx  edx,BYTE PTR [rsp+0x50]
  3a:   0f be 44 24 89          movsx  eax,BYTE PTR [rsp-0x77]
  3f:   8d 04 02                lea    eax,[rdx+rax*1]
  42:   48 81 c4 88 00 00 00    add    rsp,0x88
  49:   5b                      pop    rbx
  4a:   c3                      ret 
```

* * *

现在让我们稍微调整一下，通过插入对另一个函数的调用，使其`foo()`不再是叶函数：

```
$ cat test.c
extern void dummy(void);  /* ADDED */

int foo(char *bar)
{
    char tmp[256];
    int i;

    for (i = 0; bar[i] != 0; i++)
      tmp[i] = bar[i] + i;

    dummy();  /* ADDED */

    return tmp[1] + tmp[200];
} 
```

现在红色区域无法使用，因此您看到的内容更像您最初的预期：

```
$ gcc -m64 -O1 -c test.c
$ objdump -Mintel -d test.o

test.o:     file format elf64-x86-64

Disassembly of section .text:

0000000000000000 <foo>:
   0:   53                      push   rbx
   1:   48 81 ec 00 01 00 00    sub    rsp,0x100
   8:   0f b6 17                movzx  edx,BYTE PTR [rdi]
   b:   84 d2                   test   dl,dl
   d:   74 24                   je     33 <foo+0x33>
   f:   49 89 e0                mov    r8,rsp
  12:   48 8d 4f 01             lea    rcx,[rdi+0x1]
  16:   48 89 e0                mov    rax,rsp
  19:   89 c3                   mov    ebx,eax
  1b:   44 28 c3                sub    bl,r8b
  1e:   89 de                   mov    esi,ebx
  20:   01 f2                   add    edx,esi
  22:   88 10                   mov    BYTE PTR [rax],dl
  24:   0f b6 11                movzx  edx,BYTE PTR [rcx]
  27:   48 83 c0 01             add    rax,0x1
  2b:   48 83 c1 01             add    rcx,0x1
  2f:   84 d2                   test   dl,dl
  31:   75 e6                   jne    19 <foo+0x19>
  33:   e8 00 00 00 00          call   38 <foo+0x38>
  38:   0f be 94 24 c8 00 00    movsx  edx,BYTE PTR [rsp+0xc8]
  3f:   00 
  40:   0f be 44 24 01          movsx  eax,BYTE PTR [rsp+0x1]
  45:   8d 04 02                lea    eax,[rdx+rax*1]
  48:   48 81 c4 00 01 00 00    add    rsp,0x100
  4f:   5b                      pop    rbx
  50:   c3                      ret 
```

（请注意，`tmp[200]`在第一种情况下，它在有符号的 8 位位移范围内，但不在这种情况下。）*

# symfony - Update schema just from yml in Symfony2 with Doctrine

> ID：13201646
> 
> 赞同：3
> 
> 时间：2012-11-02T19:15:06.217
> 
> 标签：symfony, doctrine-orm

I want to add an item like this **just** to the src/Acme/AdminBundle/Entity/Artist.orm.yml:

```
email:
  type: string
  column: email_address
  length: 150 
```

but I'm forced to do the same in the file Acme/AdminBundle/Entity/Artist

```
/**
 * @var string $email
 */
private $email; 
```

If I don't do it, when I update the schema it shows an error:

```
php app/console doctrine:schema:update --force 
```

[Doctrine\ORM\Mapping\MappingException]
An error occurred in Acme\AdminBundle\Entity\Artist

[ReflectionException]
Property email does not exist

I generated the Bundle with the yml option at the beginning.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T16:54:06.357

一、生成实体类文件

```
php app/console doctrine:generate:entities [Your]/[Bundle]/Entity/Artist --path="src/" --no-backup 
```

如果要生成新实体，则必须给出“--path”参数。

然后，更新您的架构：

```
php app/console doctrine:schema:update --force 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T16:02:54.283

我有同样的问题，我设法解决了。

学说：生成：实体在“实体”处生成 .php 实体文件，但它也在“资源/配置/doctrine”处生成一个 orm 文件，如果您修改 .php 实体文件，这可能会产生冲突。

我刚刚删除了 orm 文件，它按预期工作。

# php - ftp_nlist 将数组中的输出限制为 9999 个元素

> ID：13201652
> 
> 赞同：0
> 
> 时间：2012-11-02T19:15:47.147
> 
> 标签：php, arrays, ftp

我遇到了 ftp_nlist() 的问题。看来，当我尝试使用此函数时，它会将数组中返回的元素总数限制为 9999。为什么会这样，我该如何解决这个问题？我有一个 ftp 目录，我试图从中提取所有文件，该目录有超过 20,000 个文件。

它可能与php.ini有关吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:06:43.480

您遇到的问题与 FTP 递归限制有关，这听起来像是设置为 9999。它可以通过编辑 FTP 配置文件来引发。如果您在服务器上使用 Pure-FTP，有[一篇文章](http://forums.cpanel.net/f5/pureftp-how-increase-file-limits-list-2000-entries-22879.html)可以帮助您。

# jquery - 使用 jQuery，如何在加载和调整大小时调整子元素的大小

> ID：13201655
> 
> 赞同：0
> 
> 时间：2012-11-02T19:15:50.330
> 
> 标签：jquery

我有一个非常基本的功能：

```
 function bx_thumbs() {
    pager_count = jQuery('.bx-pager').children().size();
    total_width = jQuery('.bx-pager').width();
    item_width_margin = pager_count*16;
    page_width = total_width-item_width_margin;
    item_width = page_width/pager_count;

    jQuery('.bx-pager a img').each(function(){
        jQuery(this).css('width',item_width+'px')
        console.log('hi' + total_width);        
    });  
}

jQuery(document).ready(function() {
  bx_thumbs();
});
jQuery(window).resize(function() {
  bx_thumbs();
 }); 
```

这样做的目的是将图像设置为使所有内容都在一行中的宽度。

这在负载时工作得很好。但是在我获取控制台日志时调整大小时，图像会失去宽度设置。

[您可以在http://simpleandcrisp.com/pairings](http://simpleandcrisp.com/pairings)看到这一点

我在我的css中设置了css max-width，这样如果js被停用，它就不会炸毁页面......只是无法弄清楚为什么它在调整大小时不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:47:15.220

上面的 SegioCruz 指出：

试试这个： jQuery(document).ready(function() { jQuery(window).resize(function() { bx_thumbs(); }).trigger('resize');// 触发初始调整大小 });

# twitter-bootstrap - Bootstrap 轮播出现故障

> ID：13201656
> 
> 赞同：1
> 
> 时间：2012-11-02T19:15:57.193
> 
> 标签：twitter-bootstrap, carousel

这里奇怪的问题，我找不到其他人遇到它。

我的轮播在 Chrome、Safari 和 Firefox（mac 和 pc）中运行良好，但在 IE7 和 8 中，在第一张幻灯片出现在页面加载后，幻灯片显示完全乱序。第一张幻灯片总是正确的。如果我开始使用上一个/下一个按钮，它们将按正确的顺序循环。

但是，我已经让另外 2 个人在 Chrome、FF 和 Safari 中进行了测试，但它们有时会出现故障。

bootstrap-carousel.js 与原始文件（新下载的）保持一致。

我确实在我的网站上为使用分页的其他一些轮播进行了一些自定义 js。这个虽然不使用。自定义代码不引用问题轮播的 div id。但是，当我删除页面上指向自定义 js 的链接时，问题就消失了，所以显然它是相关的，但我不知道为什么。

这是HTML：

```
<div id="myCarousel" class="carousel">
        <div class="carousel-inner">
          <div class="item active">
            <img src="images/home-slide-girl.jpg" alt="">
          </div>
          <div class="item">
            <img src="images/home-slide-woman.jpg" alt="">
          </div>
          <div class="item">
            <img src="images/home-slide-mom.jpg" alt="">
          </div>
          <div class="item">
            <img src="images/home-slide-choco.jpg" alt="">
          </div>
        </div>
        <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
      </div><!-- end myCarousel --> 
```

这是其他轮播用于分页的自定义js：

```
$(document).ready(
function() {
    $('#myCarousel2, #myCarousel3').each(
        function() {
            var html = '<div class="carousel-nav " data-target="' + $(this).attr('id') + '"><ul>';

            for(var i = 0; i < $(this).find('.item').size(); i ++) {
                html += '<li><a';
                if(i == 0) {
                        html += ' class="active"';
                }

                var item = $(this).find('.item').get(i);

                html += ' href="#">&nbsp;'  + $(item).attr('data-title') + '</a></li>';
            }

            html += '</ul></li>';
            $(this).after(html);
            $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').hide();
        }
    ).bind('slid',
        function(e) {
            var nav = $('.carousel-nav[data-target="' + $(this).attr('id') + '"] ul');
            var index = $(this).find('.item.active').index();
            var item = nav.find('li').get(index);

            nav.find('li a.active').removeClass('active');
            $(item).find('a').addClass('active');

            if(index == 0) {
                $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').fadeOut();
            } else {
                $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').fadeIn();
            }

            if(index == nav.find('li').size() - 1) {
                $('.carousel-control.right[href="#' + $(this).attr('id') + '"]').fadeOut();
            } else {
                $('.carousel-control.right[href="#' + $(this).attr('id') + '"]').fadeIn();
            }
        }
    );

    $('.carousel-nav a').bind('click',
        function(e) {
            var index = $(this).parent().index();
            var carousel = $('#' + $(this).closest('.carousel-nav').attr('data-target'));

            carousel.carousel(index);
            e.preventDefault();
        }
    );

    $('.carousel').carousel('cycle'); // Start the animation automatically
} 
```

);

有任何想法吗？多谢你们。

# ruby-on-rails - Rubymine 使用 rails 控制台中的生成器

> ID：13201658
> 
> 赞同：2
> 
> 时间：2012-11-02T19:16:05.023
> 
> 标签：ruby-on-rails, ruby, console, rubymine

我目前正在使用 Rubymine 进行 ruby​​ on rails 开发。在使用控制台进行测试之后，我想使用控制台而不是内置的 Rails 生成器来创建新模型等。

但是我不知道如何使用 rails 控制台（工具|运行 Rails 控制台）来生成 - 让我们说 - 一个新模型“用户”。

```
rails generate model user name:string 
```

给我

> NameError: main:Object 的未定义局部变量或方法“字符串”

我想我只是在这里遗漏了一些非常基本的东西，但是经过几次尝试后我自己无法提出解决方案：/我希望你能帮助我。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:46:01.643

您尝试运行的命令不应该从 ruby​​ 控制台运行。这是一个 bash 命令。你得到的错误是因为你试图在 ruby​​ 环境中运行不是 ruby​​ 的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:05:42.960

如果您觉得您确实必须使用控制台来执行此操作，您有几个选项可以进入系统。

您可以使用反引号。

**或者**

您可以使用系统（）

然后你的命令看起来像`system("rails generate model user name:string")`或者看起来像``rails generate model user name:string``

# ios - NSInternalInconsistencyException 修复 Facebook 登录

> ID：13201661
> 
> 赞同：0
> 
> 时间：2012-11-02T19:16:24.680
> 
> 标签：ios, xcode

我知道有很多关于这个错误的帖子，但由于这个错误似乎涵盖了很多领域，我认为发布我遇到的问题是公平的。

我有这个使用通过 facebook 登录的应用程序，我昨晚完成了它，运行良好，今天早上运行了一次，它就崩溃了。

与许多其他有此错误的人不同，我没有使用 NIB 文件，而是使用情节提要。据我所知，所有内容都拼写正确，即我的视图控制器的所有名称以及其他名称。我用来设置 facebook 登录的代码直接来自 facebook 本身。只有视图控制器的名称在最后。已经改变。

```
2012-11-02 15:06:50.167 App[18840:c07] *** Terminating app due to uncaught                exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/user/Library/Application Support/iPhone Simulator/6.0/Applications/B95B9738-17D5-46E9-AF45-5E4CCD825EAB/App.app> (loaded)' with name 'WLLoginViewController'' 
```

离子

有想法该怎么解决这个吗？

编辑：我可以给你这段代码，因为这是它崩溃的地方：

```
self.mainViewController = [[WLLoginViewController alloc]
                           initWithNibName:@"AppViewController" bundle:nil];
self.navController = [[UINavigationController alloc]
                      initWithRootViewController:self.mainViewController];
self.window.rootViewController = self.navController;
[self.window makeKeyAndVisible]; 
```

它在最后一行崩溃。

如果有人有任何想法，我会......我会嫁给你什么的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:52:24.030

After extensive research, I've come to this conclusion:

Facebook's current tutorial doesn't work with people that use Storyboards in their iOS apps. I already filled a bug report with them so hopefully they'll update that. Because my project uses storyboards, there is no NIB file so if there's no NIB file, it can never find it and will ALWAYS throw the above error.

# actionscript-3 - 在 local3DToGlobal 调用后 hitTestPoint 中断

> ID：13201664
> 
> 赞同：1
> 
> 时间：2012-11-02T19:16:37.353
> 
> 标签：actionscript-3, flash

已解决（我认为，请参阅编辑）

在 displayObject 的父级调用 local3DToGlobal 后，hitTestPoint 只给了我错误。我让父母打电话给它，因为这就是我发现坐标正确的方式（不知道为什么，来自[http://actionscript.org/forums/showthread.php3?t=190115](http://actionscript.org/forums/showthread.php3?t=190115)的想法）有什么想法吗？

```
import flash.display.Shape;
import flash.geom.Point;

var circle:Shape = new Shape();
circle.graphics.beginFill(0x0000FF);
circle.graphics.drawCircle(40, 40, 40);

circle.z= 30;

addChild(circle);

stage.addEventListener(KeyboardEvent.KEY_UP, checkIt);

function checkIt(e:Event){

trace(circle.hitTestPoint(40,40,true));

var pos3D= new Vector3D(circle.x,circle.y,circle.z);
var globalLoc;

//This line doesn't break hitTestPoint, but it doesn't give the correct
//global x,y projected coordinates of the circle
globalLoc=circle.local3DToGlobal(pos3D);
trace (globalLoc);

//This line breaks the hitTest but is the only way I can get the correct
//global x,y projected coordinates of the circle.
globalLoc=circle.parent.local3DToGlobal(pos3D)
trace (globalLoc);

trace(circle.hitTestPoint(40,40,true));
}

stop(); 
```

编辑：想看一些奇怪的东西吗？我为圆圈添加了一个容器。现在检查两次（按任意键两次）：你得到

真的

错误（就像上次一样）

* * *

真实（好的，更好）

真实（奇怪）

* * *

真的 （...）

真的 （...？）

```
import flash.display.Shape;
import flash.geom.Point;
import flash.display.MovieClip;

var circle:Shape = new Shape();
circle.graphics.beginFill(0x0000FF);
circle.graphics.drawCircle(40, 40, 40);

circle.z= 30;

var cont = new MovieClip();
addChild(cont);
cont.addChild(circle);

stage.addEventListener(KeyboardEvent.KEY_UP, checkIt);

function checkIt(e:Event){

    trace(circle.hitTestPoint(40,40,true));

    var pos3D= new Vector3D(circle.x,circle.y,circle.z);
    var globalLoc;

    //This line doesn't break hitTestPoint, but it doesn't give the correct
    //global x,y projected coordinates of the circle
    globalLoc=circle.local3DToGlobal(pos3D);
    trace (globalLoc);

    //This line breaks the hitTest but is the only way I can get the correct
    //global x,y projected coordinates of the circle.
    globalLoc=circle.parent.local3DToGlobal(pos3D)
    trace (globalLoc);

    trace(circle.hitTestPoint(40,40,true));
}

stop(); 
```

编辑：我认为的解决方案：

在函数外声明 pos3D 和 globalLoc

和

将圆圈放入容器中。

抱歉，我没有示例的固定代码，只是在完整项目中实现了它。

奇怪的东西，AS3。

# javascript - node.js / Express 在高负载下抛出“RangeError：超出最大调用堆栈大小”

> ID：13201667
> 
> 赞同：20
> 
> 时间：2012-11-02T19:16:50.187
> 
> 标签：javascript, node.js, garbage-collection, express, stack-overflow

我们的节点环境在高负载下运行时遇到问题，我们无法找到其来源。

一点背景知识：我们正在使用 Express 为 http 框架运行一个集群节点应用程序。目前，有 3 个盒子，每个盒子有 8 个 CPU 内核，每个盒子运行一个由 6 个节点工作人员组成的集群。设置似乎效果很好，我研究了所有建议的方法，因此我相信设置是可靠的。我们使用 Express 2.5.11 和 XMLHttpRequest 1.4.2 运行 node.js 0.8.1。

问题是：我们正在对该产品进行“暗启动”测试（即浏览器客户端代码在后台对我们的 API 进行 javascript ajax 调用，但未在页面上使用或向用户显示）。成功运行几分钟后，系统抛出：

```
[RangeError: Maximum call stack size exceeded] 
```

我们在集群控制器（启动每个工作程序）中的“uncaughtException”事件中捕获了错误，但是在该级别没有可用的堆栈跟踪。我已经对这个问题进行了广泛的研究，似乎找不到任何有类似错误的人。在梳理了系统中的每一行代码之后，这就是我所知道的：

*   我找不到任何递归或循环引用。（我读过这个错误并不总是意味着递归问题，但我们已经检查过；我们实际上已经通过删除大部分代码来运行测试，但它仍然会发生，见下文）；
*   我已经将每个盒子减少到 1 个工作进程，以尝试将集群作为一个问题消除——问题仍然存在；
*   该问题仅在高负载下发生。我们的流量约为。每秒 1500 页，在交通繁忙的时候，可以达到每秒 15000 页（我们无法在开发环境中复制）；
*   捕获错误的时间各不相同，但通常在 15 分钟内；
*   该错误似乎不会影响操作！我的意思是没有损坏的响应，除了偶尔的超时，系统永远不会崩溃；
*   捕获错误的工作进程恢复并在几秒钟后再次开始服务请求；
*   我在最基本的设计上发生了错误——没有调用额外的 API。只需接受请求并使用简单的 json 响应进行响应。这是最令人好奇的部分。似乎系统在我的任何代码中都没有失败——它在没有实例化任何类来完成*实际*工作的情况下失败了。显然，我从更多的代码开始，但慢慢地取出部分，直到它在一个简单的设置下仍然失败。

我相信，最明显的症状是错误总是在请求得到完全处理之后发生。也就是说，服务器接受一个请求，找到正确的 Express 路由，调用 res.send，然后完成。这对我来说真的感觉像是垃圾收集！我读过 V8 引擎有一个非常好的 GC 引擎，但我想知道我们的重负载对事物的影响有多大。

正如我所说，即使在基本设计上，代码也会引发错误。去掉了我们的大部分自定义代码，这是设置的基础。抱歉，我在这里删减了，因此并非所有变量声明等都将包括在内，但是代码确实有效，并且所有这些内容都在真实代码中：

**集群控制器。这是在命令行上启动的内容的清理版本。**

```
cluster = require('cluster');
path = require('path');
fs = require('fs');
app = require('./nodeApi');
_ = require('underscore');
nodeUtil = require(./nodeUtil);

process.on('uncaughtException', function(err) {
  var stamp;
  stamp = new Date();
  console.log("***************************** Exception Caught, " + stamp);
  return console.log("Exception is:", err);
});

if (cluster.isMaster) {
  if ((nodeUtil.isLiveServer() || nodeUtil.isCluster()) && process.env.IS_CLUSTER !== '0') {
    numCPUs = require("os").cpus().length - 2;
    if (numCPUs <= 0) {
      numCPUs = 1;
    }
  } else {
    numCPUs = 1;
  }
  console.log("Forking " + numCPUs + " workers...");
  for (i = _i = 1; 1 <= numCPUs ? _i <= numCPUs : _i >= numCPUs; i = 1 <= numCPUs ? ++_i : --_i) {
    worker = cluster.fork();
  }
} else {
  app.start();
} 
```

**节点工作代码。** 使用 Express 和简单的路由来处理请求。如果使用 jsonp，则请求被包装在回调中（对于我们使用 ajax 进行的测试，这是必需的）

```
(function() {
  var crypto, express, fs, modroot, path, staticroot, _;
  express = require('express');
  _ = require('underscore');
  fs = require('fs');
  path = require('path');

  module.exports.start = function() {
    logFile = fs.createWriteStream("" + logpath + "/access.log", {
      flags: 'a'
    });

    app = express.createServer();

    app.configure(function() {
      app.use(express.logger({
        stream: logFile,
        format: ':remote-addr - [:date] - ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" :response-time ms'
      }));
      app.use(express.errorHandler({
        dumpExceptions: true,
        showStack: true
      }));
      app.use(express.cookieParser());
      app.use(express.bodyParser());
      app.use(express.session({
        secret: "ourMemStoreSecret",
        cookie: {
          domain: ".ourdomain.com"
        },
        maxAge: new Date(Date.now() + 7200000),
        // The store WAS a redis store.  I took it out to eliminate redis as the issue.  We don't use sessions anyway.
        store: new require('express').session.MemoryStore({
          reapInterval: 60000 * 15
        })
      }));
      app.use(express["static"](staticroot));
      app.set('view engine', 'underscore');  // For our template rendering.  Not used in this test.
      app.set('views', __dirname + '/views/src');
      app.set('view options', {
        layout: false
      });
      app.use(app.router);
    });

    ignore = function(req, res, next) {
      if (req.params.api === 'favicon.ico') {
        return next('route');
      }
      return next();
    };

    wrapCallback = function(req, res, next) {
      var callbackName;
      if (callbackName = req.query.callback) {
        req.wrapCallback = true;
        res._send = res.send;
        res.send = function(data, status) {
          var dataString;
          if (_.isObject(data)) {
            dataString = encodeURI(JSON.stringify(data));
            res.setHeader('Content-Type', 'application/javascript');
            return res._send("" + callbackName + "(\"" + dataString + "\")", status);
          } else {
            data = encodeURI(data);
            return res._send("" + callbackName + "(\"" + data + "\")", status);
          }
        };
      }
      return next();
    };

    app.error(function(err, req, res, next) {
      console.log("[" + process.pid + "] Error Handler. Ok.", err);
      return res.send({
        error: err.msg
      }, err.statusCode);
    });

    // Does anyone know how to hard-code a path AND put it into a variable at the same time?
    // Kind of like: "/:api=MyTestAPI"  ??  That's why this route is here.
    setAPIName = function(req, res, next) {
      req.params.api = 'MyTestAPI';
      return next();
    };
    app.get("/MyTestAPI", setAPIName, wrapCallback, function(req, res) {
      res.send({
        hello: 'world'
      }, 200);
      return console.log("[" + process.pid + "] res.send (no cacher) is done");
    });

    process.setMaxListeners(0);
    process.send({
      // For IPC - the controller has a handler for this message
      cmd: 'isStarted'
    });
    return app.listen(process.env.APP_PORT);
  };

}).call(this); 
```

**错误是什么样的。** 基本上，我从来没有看到它发生在请求的中间。错误也没有调用堆栈——它只是堆栈溢出消息。在这里，您可以看到 2 个工作进程，每个进程都提供响应，然后其中一个出现错误。

```
[660] res.send (no cacher) is done
[654] res.send (no cacher) is done
***************************** Exception Caught, Fri Nov 02 2012 10:23:48 GMT-0400 (EDT) 
```

我真的很感激对此的一些反馈。该系统运行良好，能够用 3 个盒子处理我们巨大的流量。箱子上的负载约为 40% 并且嗡嗡作响。我很想找到这个问题的根源，这样其他人就可以像我一样为这个系统感到自豪，并向不相信 node.js 的人展示这是一个很棒的产品！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T07:33:19.823

我在我的一个生产环境中遇到了同样的问题。在分析过程中，我发现了以下内容，可能是我错了。但我希望，这会帮助你...

这个问题基本上和Socket有关。有一个选项应该接受多少个打开的 Socket 连接？连接可以保持半开吗？

通常这种异常发生只是因为您在特定时间段内访问服务器的频率。

让我解释清楚...

1.  假设只有两个套接字路径，并且您有四个请求，每个请求需要 5 秒的处理时间。

2.  一般来说，当您在第 0 秒发出 2 个请求并在第 6 秒发出 2 个请求时，NodeJs 可以完美地服务。

3.  而不是这样，如果你在第 0 秒发出 4 个请求，那么 NodeJs 准备只服务 2 个请求。NodeJs 只是关闭其余两个请求的套接字。注意：稍后如果您发出相同的请求，NodeJs 将接受并给出响应。

4.  有关更多信息，请通过 socket.io.js 实现。

我的解决方案是，

1.  以服务器友好的方式创建负载均衡器。
2.  在负载均衡器下运行 NodeJs 实例或集群。

或者，如果您发现任何其他简单的方法来解决此问题，请更新此帖子...

我正在等待知道这个问题的一个很好的解决方案。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:16:24.640

我想我会更新我自己的帖子来解释这个修复对我来说是什么。

在意识到我已经完成了我知道该怎么做的所有其他事情之后，解决方案通过这样做来呈现：

**安装 Express 版本 3**

需要对核心代码进行如此多的差异和更改，以至于我花了一整天的时间来完成转换。但是，在这样做的过程中，我能够利用许多新的 v3 功能，包括 .param 方法，用于将帮助器附加到每个路由中的 :param 变量。这消除了我的几个旧的“帮助”功能，所以我没有通过路由链接，而是使用了它。

我现在对路由/中间件有了充分的了解，只需为 Express v3 重写，我的问题就消失了！

由于这不是一个确切的答案，这些是我用来学习如何进行转换的东西：

[Express v3 API 参考](http://expressjs.com/api.html)

[有关路线如何运作的信息](https://github.com/senchalabs/connect)

[很棒的 HOWTO 文档！感谢那些家伙！](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)

# php - PHP 4 变量在范围更改时失去价值

> ID：13201668
> 
> 赞同：0
> 
> 时间：2012-11-02T19:16:59.923
> 
> 标签：php, mysql, forms, scope, php4

```
echo $uid; // RETURNS INTEGER VALUE

if (isset ( $_POST ['cashpaid'] )) {
    $queryfinal = "select * from " . $db_prefix . "customer_det
          where `id` = '$uid'"; // UID RETURNS NULL
.... 
```

我已经尝试了所有我能想到的全局变量和超级全局变量的组合。我无法将价值转移过来。我`$uid`从 MySQL 选择中提取并分配给一个整数值。正如您在代码开头看到的那样，结束大括号是包含值 for 的 IF 语句的结尾`$uid`。

如何`$uid`在所有范围内分配相同的值？

这已经杀死了我大约两天。如果这看起来很简单，我很抱歉，但它会让我发疯。我试过`$GLOBALS['uid']`无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:43:48.910

您可以尝试使用在全局范围内声明一次的 setter/getter 函数，但它并没有比访问 GLOBALS 做更多的事情。

```
function globalUid($value = False)
{
    GLOBAL $__uid;
    if (!isset($__uid))
        $__uid = False;
    if (False === $value)
        return $__uid;
    $__uid = $value;
} 
```

然后，不要回显`$uid`，而是尝试`globalUid($uid)`，稍后，`$saved_uid = globalUid();`。

但我认为这两个范围可能在两个不同的调用中执行，因此您可能需要将 UID 保存在*会话*变量中。

# objective-c - mapview中的合法标志如何移动

> ID：13201670
> 
> 赞同：13
> 
> 时间：2012-11-02T19:17:10.957
> 
> 标签：objective-c, mkmapview

我想知道是否有人知道您如何在地图视图上移动法律标志，现在我的工具栏正在覆盖它。有谁知道怎么做？谷歌标志有很多帮助，但苹果地图上没有。

![左下角的法律标志](../Images/d4d19669d975bc674e5225237f56dcbe.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-26T04:01:33.880

在斯威夫特：

```
mapView.layoutMargins = UIEdgeInsetsMake(top, right, -20, left) 
```

我在 OS9 中对此进行了测试，并且可以正常工作。

斯威夫特 5.2

```
// -20 will make the legal disclaimer move down. If you want the
// disclaimer to move up, use a positive number.
mapView.layoutMargins = UIEdgeInsets(top: 0, left: 0, bottom: -20, right: 0) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-02T19:54:41.033

这应该可行，虽然我不确定苹果是否会允许你这样做

```
UILabel *attributionLabel = [mapView.subviews objectAtIndex:1];
attributionLabel.center = CGPointMake(attributionLabel.center.x, attributionLabel.center.y - 44.0f); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-17T12:06:58.503

这在 iOS 7 中仍然是可能的，但只有 (?) 如果放置在`viewDidAppear`. 如果放置在`viewDidLoad`或中，坐标将被重置`viewWillAppear`。

```
 UILabel *attributionLabel = [mapView.subviews objectAtIndex:1];
    attributionLabel.center = CGPointMake(attributionLabel.center.x, attributionLabel.center.y - 44.0f); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-06-08T08:15:12.637

这些方法不再适用于 iOS 7。正确的方法是在 UIViewController 上指定 bottomLayoutGuide。[这里](http://jdkuzma.tumblr.com/post/79294999487/xcode-mapview-offsetting-the-compass-and-legal-link)详细描述

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-31T19:37:40.383

更改位置不太有效，但是隐藏“合法”按钮效果很好。

[[mapView.subviews objectAtIndex:1] setHidden:YES]

编辑：

Swift 2.0 iOS 等效

mapView.subviews[1].isHidden = true

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-28T13:52:04.053

进行双向飞碟点。

我实施了您的方法，它运行良好，但是在多次进入视图控制器之后，法律标签 y 不断减少，因为您看到它总是自行置换的逻辑。所以我建议改为改变中心

我们改变框架

```
UILabel *attributionLabel = [mapView.subviews objectAtIndex:1];
    attributionLabel.frame = CGRectMake(20, self.view.frame.size.height - 135, attributionLabel.frame.size.width, attributionLabel.frame.size.height); 
\\135 is height of your bottom view that was hiding legal 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-07T16:32:37.940

我写了对我有用的扩展。它可以在动画块中用于动画这些变化：

```
import MapKit

extension MKMapView {

  /// Workaround for layoutMargins bug.
  func setLegalInsets(left: CGFloat, bottom: CGFloat) {
    let oldLeft = layoutMargins.left
    let oldBottom = layoutMargins.bottom

    let lblLegal = (subviews.filter { view in
      return view is UILabel
      }).first

    lblLegal?.frame.origin.x += left - oldLeft
    lblLegal?.frame.origin.y -= bottom - oldBottom

    layoutMargins.left = left
    layoutMargins.bottom = bottom
  }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-19T17:59:56.690

@Dymtro 的回答对我来说效果很好，但我建议先检查子视图的大小。如果将来视图层次结构发生变化，这至少应该防止可能的崩溃：

```
override func viewWillLayoutSubviews() {
    positionLegalMapLabel()
}

func positionLegalMapLabel() {
    if self.mapView.subviews.count > 1 {
        let legalMapLabel = self.mapView.subviews[1]

        legalMapLabel.frame.origin = CGPointMake(self.mapView.bounds.size.width - legalMapLabel.frame.size.width - 7, legalMapLabel.frame.origin.y)
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-03T17:16:04.293

# 斯威夫特 4+

`layoutMargins`您可以通过设置的来更改它们的位置`mapView`。

例如，这会将其从底部推开：

```
mapView.layoutMargins.bottom = -100 
```

您还可以一次更改所有需要的边缘插图：

```
mapView.layoutMargins = UIEdgeInsets(top: 0, left: 0, bottom: -100, right: 0) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-13T13:43:40.110

一个基于 @xeieshan 示例的 Swift 3 示例，在针对 iOS 10 SDK 编译时有效。在我的示例中，我在底部有一个透明条，当地图视图出现时它会向上动画。标签重新定位也可以是动画的。

```
// reposition the 'Legal' label above the transparent bottom bar
// unfortunately there is no safe way to identify the label but it is the last subview - hopefully this will not change 
if let legalLabel = mapView.subviews.last {
    var frame = legalLabel.frame
    frame.origin.y = frame.origin.y - self.bottomBar.bounds.size.height // reposition it above the bottom bar
    legalLabel.frame = frame
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-01T15:30:22.363

使用 viewWillLayoutSubviews() 而不是 viewDidAppear() 来避免跳转。

```
override func viewWillLayoutSubviews() {
    positionLegalMapLabel()
}

func positionLegalMapLabel() {
    let legalMapLabel = self.mapView.subviews[1]

    legalMapLabel.frame.origin = CGPointMake(self.mapView.bounds.size.width - legalMapLabel.frame.size.width - 7, legalMapLabel.frame.origin.y)
} 
```

# forms - php中未定义的默认选中复选框

> ID：13201673
> 
> 赞同：0
> 
> 时间：2012-11-02T19:17:22.127
> 
> 标签：forms, checkbox, checked, php

我在使用复选框时遇到问题。我正在做的是显示一个复选框列表，如果之前选中它们将显示复选标记，然后你提交它们，另一个 php 应该识别哪些被选中，哪些没有。我的脚本适用于以前未选中的框，如果您选中它们，则操作 php 会识别它，但对于已经选中的框，我会得到通知 - 未定义的变量 - 用于框（即使再次未选中/选中）。我真的无法找到解决这个问题的方法。

我的代码是

```
$ind=0; //counting variable
//generating checkboxes from an xml
foreach($xml as $checkbox) 

{     
  $checks=$xml->checkbox[$ind]->active; //the active tag has a 0 or 1 stored.

echo "Activate ".$ind; // shows activate 0, activate 1, etc...

echo "<form name='checkb' action='show.php' method='post'>
  echo "<input type='checkbox' name='checks[]' class='act' value='".$ind."'";
  if($checks==0){ echo ">";} else{echo " checked ='checked'>";}
  echo "<input type='hidden' name='ind' value=".$ind.">"; 
$ind=$ind+1;
echo "<input type='submit' name='sub' value='Submit'/> </form>";  } 
```

在我的行动 php 我有

```
$chks = $_POST['checks'];
 $N = count($chks);
 echo("Active checkboxes ");
 for($i=0; $i < $N; $i++)
 {
      echo($chks[$i] . " ");} 
```

所有这一切都运作良好，直到我决定显示这些框之前是否已被选中。所以我想问题是，为什么 php 不能将 checked=checked 识别为真值？或者有没有其他方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:26:06.630

这里似乎有很多问题。

*   为什么要为每个复选框输出一个表单？
*   您在哪里提交表单？
*   `checked='checked'`你需要在你回声的地方前面有一个空间-`echo " checked='checked'>"`
*   如果将表单输出移出循环，则还需要将增量值添加到隐藏的输入名称属性（或将其设置为类似 的数组`checks`，否则您将只能获得该字段的一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:36:43.420

我尝试尝试清理一下。

```
$ind = 0;
echo "<form name='checkb' action='show.php' method='post'>";
foreach($xml as $checkbox){
    echo "Activate $ind";
    echo "<input type='checkbox' name='checks[]' class='act' value='$ind' ".(($checks == 0) ? " />" : " checked='checked' />";
    echo "<input type='hidden' name='ind_$ind' value='$ind' />";
    $ind++
}
echo "</form>"; 
```

请注意，就像 Mike 之前所说的，checked='checked' 之前有空格，因此组件之间存在分隔。此外，您的隐藏元素都具有相同的名称，因此我添加了 $ind 量词。

希望这可以帮助。

# c++ - 如何在 Linux 上获取 C++ 代码块的时钟滴答？clock() 结果没有意义。

> ID：13201675
> 
> 赞同：0
> 
> 时间：2012-11-02T19:17:32.213
> 
> 标签：c++, linux, time, click, clock

我正在尝试测试 pow() 的时钟滴答。

```
clock_t startTime = clock();
for (int ii = 0 ; ii < moreIter ; ++ii)
{
   for (int i = 0 ; i < totalIte ; ++i)
   P0Table[i] = pow( 1 + baseTable[i] + baseTable1[i]  , expTablr[i]);
}
clock_t endTime = clock();
clock_t powTime = endTime - startTime; 
```

如果 moreIter 为 1 且 totalIte 为 5000 ，则 powTime 始终为 0。

我刚刚关注： [http ://www.cplusplus.com/reference/clibrary/ctime/clock/](http://www.cplusplus.com/reference/clibrary/ctime/clock/)

为什么 ？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:34:07.457

尝试使用 C++11[`<chrono>`](http://en.cppreference.com/w/cpp/chrono)标头。

```
typedef std::chrono::high_resolution_clock Clock;

auto start = Clock::now();
/* do work */
auto end = Clock::now();

auto timeTaken = end - start; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:25:05.400

clock() 分辨率不是特别高，您可能需要更多次迭代才能获得非零结果。

在 Linux 上，cpu 时间根据 CONFIG_HZ 设置计入 iirc，现在通常为 100-1000 Hz。所以 1-10 毫秒的分辨率是你能得到的最好的。

使用 clock_gettime(..., CLOCK_MONOTONIC) 您可以获得纳秒级分辨率的挂钟时间，当然在这种分辨率下您可能需要考虑到调用本身需要一些时间（我上次检查的 IIRC 大约 20 ns） .

# javascript - 将画布内容导出为 PDF

> ID：13201679
> 
> 赞同：7
> 
> 时间：2012-11-02T19:17:50.963
> 
> 标签：javascript, html, canvas

我正在使用 HTML5 Canvas 做一些事情。一切都很好，除了现在，我可以使用 Canvas2image 将画布内容导出为 PNG。但我想将其导出为 PDF。我做了一些研究，我很确定这是可能的......但我似乎无法理解我需要在我的代码中进行哪些更改才能使其正常工作。我读过一个名为 pdf.js 的插件......但我不知道如何在我的代码中实现它。

第一部分 ：

```
function showDownloadText() {
        document.getElementById("buttoncontainer").style.display = "none";
        document.getElementById("textdownload").style.display = "block";
    }

    function hideDownloadText() {
        document.getElementById("buttoncontainer").style.display = "block";
        document.getElementById("textdownload").style.display = "none";
    }

    function convertCanvas(strType) {
        if (strType == "PNG")
            var oImg = Canvas2Image.saveAsPNG(oCanvas, true);
        if (strType == "BMP")
            var oImg = Canvas2Image.saveAsBMP(oCanvas, true);
        if (strType == "JPEG")
            var oImg = Canvas2Image.saveAsJPEG(oCanvas, true);

        if (!oImg) {
            alert("Sorry, this browser is not capable of saving " + strType + " files!");
            return false;
        }

        oImg.id = "canvasimage";

        oImg.style.border = oCanvas.style.border;
        oCanvas.parentNode.replaceChild(oImg, oCanvas);

        showDownloadText();
    } 
```

并且 JS 保存图像：

```
 document.getElementById("convertpngbtn").onclick = function() {
        convertCanvas("PNG");
    }

    document.getElementById("resetbtn").onclick = function() {
        var oImg = document.getElementById("canvasimage");
        oImg.parentNode.replaceChild(oCanvas, oImg);

        hideDownloadText();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-14T13:32:11.490

您需要为此使用 2 个插件：1) [jsPDF](https://parall.ax/products/jspdf) 2) [canvas-toBlob.js](https://github.com/eligrey/canvas-toBlob.js)

然后添加这段代码来生成轻量级PDF：

```
canvas.toBlob(function (blob) {
    var url = window.URL || window.webkitURL;
    var imgSrc = url.createObjectURL(blob);
    var img = new Image();
    img.src = imgSrc;
    img.onload = function () {
        var pdf = new jsPDF('p', 'px', [img.height, img.width]);
        pdf.addImage(img, 0, 0, img.width, img.height);
        pdf.save(fileName + '.pdf');
    }; 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:09:00.100

看看这个链接：

*   [http://www.codeproject.com/Questions/385045/export-html5-webpage-including-canvas-to-pdf](http://www.codeproject.com/Questions/385045/export-html5-webpage-including-canvas-to-pdf)
*   [http://badassjs.com/post/708922912/pdf-js-create-pdfs-in-javascript](http://badassjs.com/post/708922912/pdf-js-create-pdfs-in-javascript)

很可能它会做你需要的工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-04T14:27:50.577

此 jspdf 仅用于将文件保存在浏览器中，但我们不能使用生成的 PDF 发送到服务器

# c++ - 对二维结构数组进行排序

> ID：13201680
> 
> 赞同：1
> 
> 时间：2012-11-02T19:17:55.137
> 
> 标签：c++, arrays, sorting, struct

我正在尝试对二维结构数组（即每个结构包含一个结构数组的结构数组）进行排序。我的代码正确地对父结构和父结构中的结构进行排序。但是，当父结构被交换到其正确位置时，其中的结构数组将重置为其原始顺序。

注意：学生姓名必须包含名字和姓氏（否则程序将崩溃）。此外，等级必须是大写的“A”、“B”、“C”、“D”或“F”。我必须使用我编写的排序算法（我选择了冒泡排序）。我不能使用向量或 sort() 函数等。（这是作业）

```
Current Output:

Enter student name: Bob Chatter
Enter class title: Chem
Enter units for Chem: 3
Enter grade for Chem: A
Enter class title: Bio
Enter units for Bio: 3
Enter grade for Bio: B
Enter class title: Algebra
Enter units for Algebra: 4
Enter grade for Algebra: A
Enter class title:
Enter student name: Frank Brandon
Enter class title: Music
Enter units for Music: 3
Enter grade for Music: A
Enter class title:
Enter student name: Brad Anderson
Enter class title: CoSci
Enter units for CoSci: 3
Enter grade for CoSci: A
Enter class title:
Enter student name:
Student's name: Bob Chatter
Chem,A
Bio,B
Algebra,A
GPA: 3.70
Student's name: Frank Brandon
Music,A
GPA: 4.00
Student's name: Brad Anderson
CoSci,A
GPA: 4.00
Student's name: Brad Anderson
CoSci,A
GPA: 4.00
Student's name: Frank Brandon
Music,A
GPA: 4.00
Student's name: Bob Chatter
Chem,A
Bio,B
Algebra,A
GPA: 3.70
Press any key to continue . . . 
```

Bob Chatters 的课程没有排序，当我调试它们时，它们会正确排序，直到学生按姓氏排序，此时课程的排序会重置。

```
#include <iostream>
#include <string>
#include <stdio.h>
#include <string.h>
#include <iomanip>
using namespace std;

struct Class
{
    string title; 
    int units;
    char grade;

};
struct Student
{
    string name;
    double gpa;
    Class classes[500];
};

int const SIZE = 50;
void initStudent(Student[], int);
void readStudent(Student[], int,  int&);
void gpaCalculate(Student&);
void print(Student[], int);
void stringToCharArray (string, char[]);
string returnLastName(string);
void sort_name(Student[], int);
void bubbleUpLastName(Student[],int, int);
void bubbleUpClass(Student[],int, int);
void swapStu(Student&, Student&);
void swapStusClass(Class&, Class&);

int main()
{   
    int numberOfStudents = 0;
    Student students[SIZE];
    initStudent(students, SIZE);
    readStudent(students, SIZE, numberOfStudents);

    for(int i = 0; students[i].name != "";i++)
        gpaCalculate(students[i]);
    print(students, numberOfStudents);
    sort_name(students, numberOfStudents);
    print(students, numberOfStudents);
    system("pause");
    return 0;
}
void initStudent(Student st[], int s)
{
    for(int i = 0; i < s; i++)
    {
        st[i].gpa = 0.0;
    }

}

void readStudent(Student st[], int s, int& nStus)
{
    for(int i = 0; i < s; i++)
    {   
        string tmpName;

        cout << "Enter student name: ";
        getline(cin, tmpName);
        if(tmpName == "")
            break;
        st[i].name = tmpName;
        nStus++;

        for(int j = 0; j < 500; j++)
        {   
            string tmpTitle;
            cout << "Enter class title: ";
            getline(cin, tmpTitle);
            if (tmpTitle == "")
                break;
            st[i].classes[j].title = tmpTitle;

            cout << "Enter units for " << st[i].classes[j].title << ": " ;
            cin >> st[i].classes[j].units;
            cout << "Enter grade for " << st[i].classes[j].title << ": " ;
            cin >> st[i].classes[j].grade;
            cin.ignore();
        }   
    }
}

void gpaCalculate (Student& s)
{
    double unitsByPoints = 0;
    double totalUnits = 0;

    for (int i = 0; s.classes[i].title != ""; i++)
    {

        int grade = 0;
        char ltrGrade = s.classes[i].grade;
        switch (ltrGrade)
        {
        case 'A':
            grade = 4;
                break;
        case 'B':
            grade = 3;
                break;
        case 'C':
            grade = 2;
                break;
        case 'D':
            grade = 1;
                break;
        case 'F':
            grade = 0;
                break;
        }
        unitsByPoints += s.classes[i].units*grade;
        totalUnits += s.classes[i].units;

    }
    s.gpa = unitsByPoints/totalUnits;
}

void print(Student st[], int size)
{

    for (int i = 0; i < size; i++)
    {
        cout << "Student's name: " <<  st[i].name << endl;
        for (int j = 0; st[i].classes[j].title != ""; j++)
        {
            cout << st[i].classes[j].title << "," << st[i].classes[j].grade << endl;
        }
        cout << fixed << setprecision(2) << "GPA: " <<  st[i].gpa << endl;
    }
}

// Returns the last name of the student passed in
string returnLastName(string s) 
{
    int i = 0;
    while (s[i] != ' ')
    {
        i++;
    }
    return s.substr(i + 1, s.length() - (i + 1));
}

 //sorts the students according to name and their classes according to their title
void sort_name(Student st[], int numValues)
{
    int stuCurrent = 0;
    int numClasses = 0;
    while (stuCurrent < numValues - 1)
    {   
        int classCurrent = 0;
        for(int i = 0; st[stuCurrent].classes[i].title != ""; i++)
        {
            numClasses = i;
        }
        while (classCurrent < numClasses)
        {
            bubbleUpClass(st,classCurrent,stuCurrent);
            classCurrent++;
        }

        bubbleUpLastName(st, stuCurrent, numValues-1);

            stuCurrent++;
    }
}

// Moves the student with the last name that should be first alphabeticaly into the first position of the Student array
void bubbleUpLastName(Student st[],int startIndex, int numValues) 
{
    for (int index = numValues; index > startIndex; index--)
    {   
        if ((returnLastName(st[index-1].name).compare(returnLastName(st[index].name)) > 0))
        {
            swapStu(st[index], st[index-1]);
        }
    }
}

// Moves the Class that should be first alphabeticaly (according to title) into the first position of the Class array
void bubbleUpClass (Student st[],int startIndex, int stuIndex)
{
    int numValues = 0;
    for(int i = 0; st[stuIndex].classes[i].title != ""; i++)
        numValues = i;
    for(int index = numValues; index > startIndex; index--)
    {
        if(st[stuIndex].classes[index - 1].title.compare(st[stuIndex].classes[index].title))
        {
            swapStusClass(st[stuIndex].classes[index], (st[stuIndex].classes[index - 1]));
        }
    }
}
void swapStu(Student& s1, Student& s2)
{
    Student tmp;
    tmp = s1;
    s1 = s2;
    s2 = tmp;
}

void swapStusClass(Class& c1, Class& c2)
{
    Class tmp;
    tmp = c1;
    c1 = c2;
    c2 = tmp;
}

/*

Define a structure called Class (with uppercase C) with the following data:
title, units and grade.

Define a structure called Student with the following data:
name (full name), gpa, and classes which is an array of Class structures (all the classes the student has taken so far).

Write an initialize function that receives an array of Student structures and its size and sets the gpa of all to 0.0.

In main, create 50 Students and call the above function to initialize the gpa for all 50 Students to 0.0\. 

Then, pass the array of student structures and its size to a read function that will read student data from the user and store the entered data in the array of student structures.  The user will enter student name followed by the class title, units and grade received for each class he or she has taken.  When finished entering class information for a student, the user will just press Enter (an empty string) and to end entering more students, he or she will do the same for the student name. 

Example:

Enter student name: Maria Gomez

Enter class title: English 101
Enter units for English 101: 3 
Enter grade for English 101: A

Enter class title: Math 201
Enter units for Math 201: 4
Enter grade for Math 201: B

Enter class title: [User enters RETURN to indicate no more classes]

Enter student name: Kevin Duran

Enter class title: Poly Sci 101
Enter units for Poly Sci 101: 3 
Enter grade for Poly Sci 101: A

Enter class title: Math 201
Enter units for Math 201: 4
Enter grade for Math 201: B

Enter class title: [User enters RETURN to indicate no more classes]

Enter student name: [User enters RETURN to indicate no more students]

Once all Studnets have been entered, pass each element of the array of Student structures (element by element) to a gpa function which will compute and return the gpa for each Student using the classes array within each Student structure which contains the units and grade for each class taken by the student.  Store the gpa returned by the above function in the gpa member of the Student structures.  GPA is calculated by multiplying the number of units for each class by the points received for that class, and then adding all these products together and dividing it by total number of units.  The points received for a class is based on the grade: for A, it's 4; for B, it's 3; for C, it's 2; for D it's 1; and for F it's 0\.  For example, if a student has take 3 classes with 3, 4, and 3 units and has received A, B, and C for these classes, respectively, then, the GPA will be 3 x 4 + 4 x 3 + 3 x 2 / 10 = 3.0.

Print all students showing name, followed by all classes taken, the grade received and the gpa using a display function which receives the array and its size as parameters.

Then, using a sort_name function, sort the student structures based on their last names and for each student, sort the classes he or she is taking based on class title.  Display the sorted list of students using the display function by calling it from main.

For example:

Kevn Duran
Poly Sci 101, A
Math 150, B
GPA: 3.0

Maria Gomez:
English 101, A
Math 201, C
GPA: 2.9

Robert Small
Comp Science 801, C
Comp Science 802, D
GPA: 1.9

Tom Wang
Comp Science 808, A
Comp Science 839, B
GPA: 3.5

Then, sort the students based on their GPA's using a sort_gpa function and print the list again using the display function. 

Then, ask what to search for - name or gpa.  If name is selected, read a student name from the user and, using a binary search function that takes the array, its size and the name to search for, finds the student and displays all of his or her information (name, gpa, units and list of classes taken).

Example:

Enter a student name:  Robert Small

Robert Small:
Comp Science 801, C
Comp Science 802, B
GPA: 2.5

If GPA is selected, read a GPA and using another binary search find the student with the given GPA by passing the students array, its size and the GPA to search for.  Display the name of the student with the specified GPA in main.  

Example:

Enter GPA to search for:  2.5

Robert Small was found with the GPA of 2.5

If the name or GPA is not found, tell the user it was not found; e.g.: There was no student with a GPA of 2.5; or Robert Small was not found.

Then, pass the array of student atructures and the size to a stats function which will return the average of the GPA's of all students and through two reference parameters will output the student structures that have the minimum and maximum GPA's.  Print the average GPA, as well as the names of the students who have the minimum and maximum GPA in main, like so:

Average GPA = 3.17

Robert Small has the minimum GPA of 2.5.

Tom Wang has the maximum GPA of 3.5\. 

Finally, read a maximum and minimum GPA from the user and pass the array of student structures and its size, as well as two other arrays of student structures of the same size to a function which will store all students with a GPA of above the minimum in the highGPA array and all those with a GPA below the maximum in the lowGPA array.  Display the students stored in these two arrays by passing them each from main to the display function.  In other words, the highlow function receives two uninitalized arrays of student structures and populates them based on the GPA criteria passed to it (minimum GPA and maximum GPA).  Then, upon return to main, main passes each of these arrays to the display function to display them.  For example, if the user enters 2.0 for the maximum GPA, the lowGPA array gets filled out with all those students who have a GPA of less than 2.0\.  Likewise, if the minimum GPA is 3.5, the highlow function populates the highGPA array with those students who have a GPA of 3.5 or higher.

Example:

Enter maximum GPA:  2.0

Enter minimum GPA:  3.5

Students with a GPA of lower than 2.0:

Robert Small 1.9

Students with a GPA of 3.5 or higher:

Tom Wang 3.5

When writing the highlow function, take advantage of the fact that the array elements are sorted based on the GPA, so to find all the students with a GPA of equal to or higher than the minimum GPA, it doesn't make sense to start from the first element in the array. Instead you can start from the midpoint. If the midpoint is lower than the minimum GPA, you can increment the index until the midpoint is no longer smaller and then all the GPA's from that point on will be larger and part of the high GPA's.  For low GPA's of course, you'd want to start from the beginning of the array and compare and store each that's lower than the maximum until they are no longer lower.

Functions you must write for this assignment (in addition to main):

initialize, read, display, sort_name, sort_gpa, search-name, search_gpa, stats, highlow.

Upload your cpp and exe files using the Browse and Upload buttons below and click Finish once both have been uploaded to the site.*/ 
```

是什么导致父结构内的结构数组被重置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:03:44.333

比较`Class::title`时忘记添加比较来比较值：

您的线路：

```
if(st[stuIndex].classes[index - 1].title.compare(st[stuIndex].classes[index].title)) 
```

应该：

```
if(0 < st[stuIndex].classes[index - 1].title.compare(st[stuIndex].classes[index].title)) 
```

我说你忘记了——因为你的函数中有这个明确的比较来对学生进行排序。

现在解释你的结果：起初，只是偶然 - 对某个学生的课程进行了排序，但是在你的学生的位置发生变化（这是冒泡排序）之后，对这些课程进行了下一次排序 - 所以因为实际上你没有t 排序类，但只是改变它的位置，你可以在下一步中拥有它们的原始序列。

* * *

作为奖励，我建议不要使用 compare 进行排序 - 只需使用`operator <`：

```
if(st[stuIndex].classes[index - 1].title < st[stuIndex].classes[index].title) 
```

简单得多，不是吗？

# database - 一张大桌子还是把它们拆开？（最佳数据库）

> ID：13201682
> 
> 赞同：0
> 
> 时间：2012-11-02T19:17:55.883
> 
> 标签：database, database-design

我环顾四周，试图找出处理数据库的最佳方法，但我有一些问题。

有一张大桌子或单独的桌子更好吗？就服务器负载而言，有什么真正的区别吗？

我付钱给一个人把一个数据库和一些 php 放在一起，这样我就可以闯入它，他制作了 2 个单独的表，我认为应该是一个。似乎是多余的，我不喜欢重复自己。

基本上`x_content`是：

```
身份证 | 部分 | 页 | 标题 | 内容
```

并且`x_menu`是

```
身份证 | 家长 | 链接 | 显示 | 哈希尔德
```

（就我个人而言，它让我对大写感到不安。我想我会使用标准大小写，因为网站上的所有其他内容都是全小写或骆驼大写脚本）

无论如何，ID，（标题/显示）和（页面/链接）或多/少（可以）相同。在我看来，通过将这些结合起来并添加我想要的其余部分，我会帮自己一个忙。

我想要什么：

```
身份证 | 类别 | 姓名 | 网址 | 说明 | 关键词 | 内容 | 主题
```

那么-我应该删除`x_menu`并合并它们吗？

*如果我现在链接我网站中的所有页面，它会像 40+

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:43:53.010

如果菜单是在您的应用程序中动态构建的，我建议为菜单设置一个单独的表以便于维护。

但是，在您的组合表中，我没有看到任何“菜单”列。我不知道你是否想用 URL 替换它。但我发现不同之处在于每个页面都有 url，但它可能包含在菜单中，也可能不包含在菜单中。

如果“菜单”不是动态构建的，我认为必须提供更多信息来考虑菜单是否需要是单独的实体。

# ruby-on-rails - 重定向失败以及如何检查命名路由助手

> ID：13201684
> 
> 赞同：1
> 
> 时间：2012-11-02T19:18:04.010
> 
> 标签：ruby-on-rails, redirect, routes

我有一个单数资源和一个复数控制器：路由文件中的 PeopleController 和资源：人。在我的控制器创建操作中，我有一个 redirect_to @person，它应该重定向到刚刚创建的人员对象的显示操作。在我的控制器测试中，我断言 response.should redirect_to(@person)。这对我来说似乎很简单，但是当我运行规范时，我收到了这个错误：

```
 Failure/Error: post :create 
 NoMethodError: 
   undefined method `people_url' for #<PeopleController:0x00000002d7d988> 
```

似乎创建操作中的重定向正在尝试转到索引操作，对于单一资源，该操作不（也不应该）存在。

路由表很简单：

```
 person POST   /person(.:format)              people#create
          new_person GET    /person/new(.:format)          people#new
         edit_person GET    /person/edit(.:format)         people#edit
                     GET    /person(.:format)              people#show
                     PUT    /person(.:format)              people#update
                     DELETE /person(.:format)              people#destroy 
```

我明白为什么我会收到未定义的方法错误：单一资源没有 people_url，只有 person_url。我对为什么 redirect_to @person 试图调用 people_url 开始感到困惑。它不应该默认使用名为 person_url 的路由，并传递新保存的 person 对象的 id 吗？我可以通过使用redirect_to person_path(@person) 来通过测试，但是为什么这与redirect_to @person 应该返回的不同呢？

从辅助方法中的命名路由检查构造的 URL 的最佳方法是什么？当然，除了编写失败的测试。我已经很擅长了:-)。

# c# - 接口类

> ID：13201691
> 
> 赞同：6
> 
> 时间：2012-11-02T19:18:40.853
> 
> 标签：c#, oop, interface

我不明白如何清楚地使用接口类。我阅读了很多关于接口类相关 OOP 的文章和教程，所以我知道接口是什么，但我确实了解在实际项目中使用。

例如，

我制作了 IPayment 接口类。我定义了 2 种使用所有支付类通用的方法。

```
public interface IPayment 
{
  void MakePayment(OrderInfo orderInfo);
  void MakeRefund (OrderInfo orderInfo);
} 
```

我做了 3 个支付类，分别是 CreditCardPayment、PaypalPayment 和 GooglePayment。

我在每个类中定义了 2 个方法。

**我在这部分感到困惑，我需要创建 OrderInfo 类，其中包含需要用于处理付款或退款的订单信息。每个班级需要不同的信息。**

CreditCartPayment 类需要 Credit Card No, Expiration Date .... 但其他支付类不需要。

GooglePayment 类需要 Google 订单号，而其他类则不需要。

所以，最后 OrderInfo 类必须有许多额外的字段。而且看起来很脏...

前任）

```
Public class OrderInfo 
{
  /* For Common */
  string orderNo {get; set;}
  string customerNo { get; set;}
  decimal amount {get; set;}

  /* For Credit Card */
  string CCNum {get; set;}
  string expDate { get; set;}

  /* For Google */
  string googleOrderID {get; set;}
  ...

  /* For Paypal */
  ...
} 
```

我的问题是，

在这种情况下，使用 IPayment 是否正确？或者我需要在没有接口类的情况下使用正确的参数定义每个类？

我想使用接口类的好处是以后很容易弄清楚支付类。因为接口类将显示每个支付类中定义了哪些方法。还有其他优点吗？

您对在现实世界中理解接口类有什么建议吗？

**[编辑]**

谢谢你的建议。

我再次编写示例代码。你能检查一下这段代码吗？

```
public interface IPayment 
{
  void MakePayment(OrderInfo orderInfo); // !!
  void MakeRefund (OrderInfo orderInfo); // !!
}

public class OrderInfo 
{
  protected string OrderNo {get; set;}
  protected string CustomerNo { get; set;}
  protected decimal Amount {get; set;}
}

public class CreditCardPaymentInfo : OrderInfo
{
  string CCNum {get; set;}
  string ExpDate { get; set;}
}

public class GooglePaymentInfo : OrderInfo
{
  string GoogleOrderID {get; set;}
}

public class PaypalPaymentInfo : OrderInfo
{
  string PaypalID {get; set;}
}

public void MakePayment()
{
    IPayment paymentModule;
    // Get Order Info 
    if(orderType == "Paypal"){
        paymentModule = new PaypalPayment();

        PaypalPaymentInfo orderInfo = new PaypalPaymentInfo();
        orderInfo.PaypalID = "TEST";
    }else if(orderType == "Google"){
        paymentModule = new GooglePayment();

        GooglePaymentInfo orderInfo = new GooglePaymentInfo();
        orderInfo.GoogleOrderID = "TEST";
    }else{
        paymentModule = new CreditCardPayment();

        CreditCardPaymentInfo orderInfo = new CreditCardPaymentInfo();
        orderInfo.CCNum = "1111111111111111";
        orderInfo.ExpDate = "11/11";
    }

    orderInfo.OrderNo = "123";
    orderInfo.CustomerNo = "ABC";
    orderInfo.Amount = 12.20m;

    paymentModule.MakePayment();
} 
```

它发生错误：

**错误 1 ​​'com.WebUI.Models.CreditCardPaymentInfo' 没有实现接口成员 'com.WebUI.Models.IPaymentProcess.makeRefund(WebUI.Models.RefundModel)'**

我想我需要修复接口类。有人知道我应该如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T19:32:36.940

一种方法是创建`OrderInfo`一个基类，并使您的提供商特定的支付类型成为它的*子类*，如下所示：

```
public class OrderInfo 
{
  /* For Common - Protected members are accessible to subclasses! */
  protected string OrderNo {get; set;}
  protected string CustomerNo { get; set;}
  protected decimal Amount {get; set;}
}

public class CreditCardPaymentInfo : OrderInfo
{
  /* For Credit Card */
  string CCNum {get; set;}
  string ExpDate { get; set;}
}

public class GooglePaymentInfo : OrderInfo
{
  /* For Google */
  string GoogleOrderID {get; set;}
  ...
}

public class PaypalPaymentInfo : OrderInfo
{
  /* For Paypal */
  ...
} 
```

然后，您可以像这样实现您的 Payment 类，并满足 IPayment 接口的要求：

```
public class PaypalPayment : IPayment
{
    public void MakePayment(PaypalPaymentInfo orderInfo)
    {
      ...
    }

    public void MakeRefund (PaypalPaymentInfo orderInfo)
    {
      ...
    }
} 
```

因为`PaypalPaymentInfo`可以在任何`OrderInfo`指定的地方使用，所以这是一个有效的实现`IPayment`。对于信用卡和 Google 付款实施，您可以遵循相同的模式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T19:24:34.180

实现这一点的正确方法是为每种类型的付款创建一个类，但将它们用作一般的`IPayment`. 所以你会有：

`public class CreditPayment : IPayment`

`public class GooglePayment : IPayment`

`public class PaypalPayment : IPayment`

然后使用付款：

```
public class PaymentUser
{
   private IPayment _payment;

   public PaymentUser(//args)
   {
      //Which payment to be used would be based on args. Using a factory here is common
      _payment = new CreditPayment(//args);
   }
} 
```

现在您已经`IPayment`为您创建了一个，并且您不关心它是什么类型，除了知道它履行您的合同！

所以在某个地方你可以说

```
public void MakePayment(OrderInfo order)
{
   _payment.MakePayment(order);
} 
```

而且您甚至不知道`IPayment`您使用的是哪种类型。这增加了可扩展性，因为您不关心执行该方法的类型，只要它遵循`IPayment`接口即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:34:05.673

让我试着用简单的例子来解释它。

想一个简单的方法（例如）说`int rectanglePerimeter(int x, int y)`。该方法只取两个数字，将它们相乘并返回结果。现在您可以通过两种方式实现它：

第一：使用乘法

```
 return x*y; 
```

第二：使用加法

```
 int res = 0;
    for(int i=0; i< length; i++){
      res+= width;
    }
    return res; 
```

现在，如果您想保持此方法的使用者代码独立于实现，您可以简单地定义一个`Interface`具有方法签名的`int rectanglePerimeter(int x, int y)`. 这可能由不同的实现主体以不同的方式实现，但都必须遵守方法定义，并且您的使用者代码模式不会根据实现而改变。

现在让我们举一个更实际的`Database queries execution`使用`Connection`接口的例子。由于有多个数据库提供程序，它们都有不同的实现（数据库驱动程序）来支持与数据库的连接，但它们都提供与`Connection`接口中定义的相同的方法支持，例如`commit()`, `createStatement()`, `rollback()`& `close()`。

这使得使用独立于实现。正如你现在可以想象的那样，**`Interface`在消费者和服务提供者之间扮演着服务契约的角色。**消费者和服务提供者可能都是您自己的类，或者它可能来自两个不同的组/组织。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T19:39:00.703

我会给你一些关于接口如何工作的例子。无论如何，您有很多方面可以使用 *界面*

**接口继承**（又名类型继承）：这也称为子类型化。接口提供了一种机制来指定其他不相关的类之间的关系，通常通过指定每个实现类必须包含的一组公共方法。接口继承将程序的设计理念提升为接口而不是实现。这也减少了系统之间的耦合或实现依赖。在 Java 中，您可以实现任意数量的接口。这比实现继承更灵活，因为它不会将您锁定在使子类难以维护的特定实现中。所以应该注意不要通过修改接口来破坏实现类。

例子：

假设我们有一个名为`Person`.

包含以下`Person`字段：年龄、名字、姓氏、ID、军人 ID（例如兵役）、工作地点等。现在，您想向工作、军队、脸书等多个机构提供*人员信息。*您的工作不想在 facebook 上听到有关您的军人身份或昵称的所有信息。因此我们创建了几个接口：`MilitaryItf,`WorkItf `,`WebPersonItf `. In`WebPersonItf `you define methods`get/set `Nick name, First Name, gmail and so on. In`MilitaryItf `you provide`get/set` 用于年龄、健康、军人ID、服役开始/结束日期……最后每个机构只使用从“Person”派生的感兴趣的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T19:41:26.163

接口用于能够使用不从同一基类继承的类。你为这三个课程所做的看起来很合理。但也可以创建一个“基类”，用于继承接口中的函数。

您的问题`OrderInfo`不在于界面，而更多在于您基本上需要一种不同类型的对象。或多或少，您的界面不适合您的`CreditCartPayment`课程。

一种出路是创建一个从该类继承的`OrderInfo`类，`CredidCardOrderInfo`并在该类中使用它`CreditCardPayment`。您可以使用`CreditCardOrderInfo`该类的任何实例，就好像它是一个`OrderInfo`实例一样。然后你添加一行

```
CreditCardOrderInfo info = orderInfo as CreditCardOrderInfo;
if (info == null) throw new ArgumentException("orderInfo has no credit card order info"); 
```

它把东西放在一起......但仍然很脏。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-02T19:57:27.387

接口的目的是允许持有对实现它的对象的引用的实体使用该对象，而不必知道它可能碰巧是许多可能的实现中的哪一个。因此，接口通常应该只定义可能对所有实现它的类有用的方法。

根据您的场景，听起来需要的不是支付处理类的接口，而是接口`IOrderWithPayment`，用于预期封装某种形式的订单信息的对象和可以接受它的支付处理器对象（即特定种类的订单信息）。然后，该接口将具有将订单信息提供给支付处理器的方法`MakePayment`。`MakeRefund`持有 an 的对象`IOrderWithPayment`不必担心其中封装了哪种类型的订单信息或支付处理器，因为实现的每个类`IOrderWithPayment`都会封装相互兼容的订单信息和支付处理器类型。

请注意，可以定义一个通用类来处理订单信息和支付处理器对象的所有兼容组合，前提是这些对象包含关于它们可以接受什么的适当声明，但这需要使用一些相当高级的概念. 目前，定义封装兼容的对象组合的不同类型可能更容易。

# php - PHP 到 SMS - 更改“发件人名称”

> ID：13201708
> 
> 赞同：3
> 
> 时间：2012-11-02T19:19:54.557
> 
> 标签：php, sms

我正在编写一个使用 PHP 代码通过电子邮件发送电话号码的小型 Web 应用程序（拥有电话号码的人将其视为短信，当然不是电子邮件）。每个电话服务都有电子邮件到文本。例如，美国的 Verizon 使用@vtext.com。

我的问题是，SMS 上的 FROM 总是说“6245”，这显然是来自 Verizon 电子邮件域 (vtext.com) 的 SMS 的标准。我可以在代码中使用更易于阅读的 From 而不是这个看似随机的数字来更改它吗？

这是我使用 PHP 邮件程序的代码：

```
 $from = $_POST['email'];
            $from = filter_var($from, FILTER_SANITIZE_EMAIL);
            $message .= $guest . ' waiting at Office. Checked in at ';
            $message .= strftime("%l:%M %p (%A %b %e, %Y)", time());

            // PHP SMTP mail version

            $mail = new PHPMailer();

            $result = mysql_query("SELECT * FROM users WHERE onduty = 1");

            $recipients = array();

            while ($row = mysql_fetch_array($result)) {
                $recipients[] = $row['phone'] . $row['carrier'];

            }

            foreach ($recipients as $email) {
                $mail -> AddAddress($email);

            }

            $from_name = "Riverstone Notification";
            $subject = "Person in Office";

            $mail -> IsSMTP();
            $mail -> Host = "relay-hosting.secureserver.net";
            $mail -> Port = 25;
            $mail -> SMTPAuth = false;
            $mail -> Username = "EMAIL_USER";
            $mail -> Password = "EMAIL_PASS";
            $mail -> FromName = $from_name;
            $mail -> From = $from;
            $mail -> Subject = $subject;
            $mail -> Body = $message;

            $result = $mail -> Send(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:21:31.627

不，当您使用 Verizon 的服务时，不会。将成为标准，因为它来自 Verizon 的 SMS 网关。如果您需要灵活性，则必须获得付费服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-21T03:39:29.370

也许与您处理的事情相同，当我用来发送短信时（Tmobile = tmomail.net）净...一堆噪音....当我添加 From:3333@abc.com 并说我的网站是 abc.com 时，它会保持干净。从我得到的研究来看，它这样做是为了尝试阻止垃圾邮件，所以它会寻找一些东西来说明这封电子邮件来自这种网站类型的东西......

# javascript - Accessing global variables in JavaScript functions

> ID：13201709
> 
> 赞同：0
> 
> 时间：2012-11-02T19:19:58.917
> 
> 标签：javascript, asp.net-mvc-3, view, global-variables

I am using C# asp.net mvc3. In one of my views, say I declare a variable like this:

```
@{
    ViewBag.Title = "title"   
    string mystr;  
} 
```

I need to set the value of the variable mystr in a function of the script. How do I access this variable from the script? Suppose I have a function like

```
<Script type="text/javascript">
function(){
    var st = "This string is for the global variable"
     mystr = st;
}
</script> 
```

mystr will later be used in the html code like this: `<h2>@mystr</h2>` . Is there a similar way of accessing a variable from a function?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:30:36.343

`mystr`在您的示例中是在视图解析期间存在的**服务器端**变量。`cshtml`所以你不能用**客户端**的 JS 代码来影响它。你可以尝试这样的事情：

```
<script type="text/javascript">
window.mystr = @(mystr); // Set value while server side processing.
function(){
    var st = "This string is for the global variable"
    window.mystr = st; // Get/Set value
}
</script> 
```

并在您需要的任何地方使用客户端的全局变量`mystr`。

如果您需要然后通过 JS 设置标题的文本，您可以使用 jQuery 进行设置：

```
<h2 id="header"></h2> 
```

JS：

```
$('#header').text(window.mystr); 
```

# python - 矩阵计算产生的numpy数组中的舍入值

> ID：13201714
> 
> 赞同：4
> 
> 时间：2012-11-02T19:20:08.407
> 
> 标签：python, matrix, numpy, rounding

我有一些涉及两个矩阵的计算，这两个矩阵都以`numpy`数组表示。

计算后，我得到一个向量`floats`表示在另一个`numpy`数组中。

我想向上/向下舍入此结果向量中的值，例如，如果计算给出：

```
array([1.33333, 2.56, 9.99999, 16.0]) 
```

那么它应该四舍五入为：

```
array([1, 3, 10, 16]) 
```

最快的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T19:23:03.477

NumPy 数组有一个[round](http://docs.scipy.org/doc/numpy/reference/generated/numpy.around.html#numpy-around)方法：

```
In [73]: x = np.array([1.33333, 2.56, 9.99999, 16.0])

In [74]: x.round()
Out[76]: array([  1.,   3.,  10.,  16.]) 
```

# sql - Convert only the year part of the datetime in SQL server

> ID：13201715
> 
> 赞同：2
> 
> 时间：2012-11-02T19:20:13.360
> 
> 标签：sql, sql-server-2008

Any other easier way to bring the year part of a datetime to current year? If not, which one is better performance wise?

Attempt #1:

```
CAST(DATEPART(MONTH, mydate) AS VARCHAR) + '/' + 
CAST(DATEPART(DAY, mydate) AS VARCHAR) + '/' +
CAST(YEAR(GETDATE()) AS VARCHAR) AS DATETIME 
```

Attempt #2:

```
DATEADD(YEAR, DATEDIFF(YEAR,  mydate, GETDATE()), mydate) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:29:16.037

性能差异可以忽略不计，无论哪个更快。差异将在微秒范围内。

我通常使用 DATEADD + DATEDIFF 作为偏好。VARCHAR 版本的正确格式是使用 ISO-8601 格式 YYYYMMDD，例如

```
CAST(STUFF(CONVERT(char(8),mydate,112),1,4,YEAR(GETDATE())) as DATETIME) 
```

`CONVERT(,,112)`=> **YYYYMMDD**。STUFF 用当前年份替换前 4 个字符。YEAR() 返回一个数字，但在 STUFF 的上下文中会自动转换为 varchar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:23:38.297

不要使用第一种方法。它会产生不可靠的结果。

1/2/2012 可以解释为 2 月 1 日或 1 月 2 日，具体取决于[设置](http://support.microsoft.com/kb/173907?wa=wsignin1.0)。

避免使用字符串，尤其是日期。

你的第二种方法更可靠

# c# - Finding Globalized Resource files when remotely loading an assembly

> ID：13201717
> 
> 赞同：6
> 
> 时间：2012-11-02T19:20:39.267
> 
> 标签：c#, assemblies, globalization

Our code uses a "Plugin" model, that remotely loads dll's conforming to a predefined structure `IPluginModel` that is defined in the main program. The main program itself has several localized forms where the text and placement of the labels in the UI are all changed based on the different localization `Thread.CurrentThread.CurrentUICulture`.

One thing that we noticed is that any forms or reports from the remotely loaded dll's will never be properly localized. It does not seem to matter where the localization dll's containing the different resources for the plugin are located, either next to the main form, next to the plugin dll, or anywhere else. How would one cause the Assembly to correctly locate its localized resources when the assembly itself is loaded during RunTime of the main program?

I do have code that rather resembles the method used [Here](https://stackoverflow.com/questions/3125153/dynamically-loading-a-resource-and-reading-the-correct-value-for-the-currentuicu), but dont want to have to manually implement the resx against the form itself if at all possible. The code I have is located directly inside the plugin itself and is called whenever the CurrentUICulture is NOT "en-US".

Ideally speaking, what Im looking for is a way to load the `pluginName.resources.dll` which is directly associated with the plugin I just loaded. I do see the different folders in my main projects bin folder, the es folder contains a `main.resources.dll`, but simply placing the plugin dll's in that folder did not seem to work last time I tried it, although in theory that could have changed...or I may have done it wrong at the time...

**Loading the assembly [code snippet]**

```
 private void LoadPlugin(string filePath)
    {
        bool isValidPlugin = false;
        Assembly asm = null;
        try
        {
            asm = Assembly.LoadFrom(Path.Combine(Environment.CurrentDirectory, filePath));
                //Do some type checking to make certain this is in fact one of OUR plugins
            var p = (IFTLPlugin)Activator.CreateInstance(types[x]);
                _plugins.Add(p.Prefix, p);
            }
        } 
```

**Edit: More thoughts on the subject**

Is there some way to intercept the loading structure that attempts to resolve the satellite assemblies, an event that I can implement or a function I can override, where I can manually point the code to the correct resource assembly?. I found some things about assembly resolution, but that was for direct loading, not for satellite resources.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:57:09.513

正如您已经非常清楚的那样，运行时通过查找附属程序集（例如`fr/pluginName.resources.dll`）使用约定加载本地化资源。

我认为您认为这个问题可能是由于未能找到这些附属程序集可能是正确的。您可以尝试使用 .NET Framework 诊断工具[fuslogvw.exe](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.110%29.aspx)确认这一点。您还可以尝试将附属程序集部署到全局程序集缓存 (GAC) 作为快速修复（请参阅[本页](http://msdn.microsoft.com/en-us/library/21a15yht%28v=vs.71%29.aspx)在全局程序集缓存中安装附属程序集）。

如果这可行，并且为了帮助找出其他合适的位置（GAC 除外），运行时检查以查找附属程序集的位置在此处记录为后备过程：http: [//msdn.microsoft.com/en-我们/图书馆/sb6a8618%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/sb6a8618%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T05:13:05.070

正如您在问题背景中指出的那样，.NET 系统在加载资源程序集时使用**Thread.CurrentThread.CurrentUICulture 。**

问题是每个新线程都默认为**CultureInfo.InstalledCulture**，除非另有说明。

让您的主代码在初始化调用中将所需的文化传递给库。

然后在加载任何资源之前让库设置它的**Thread.CurrentThread.CurrentUICulture**（和**.CurrentCulture ，如果合适的话）。**例如，这将是在调用**InitializeComponent()**或**TryFindResource()**之前。

这使库的线程文化与主程序的线程文化保持一致，而不管操作系统对此的想法是什么。

# matlab - In octave, what are the error tolerance options in numerical integration?

> ID：13201719
> 
> 赞同：0
> 
> 时间：2012-11-02T19:20:52.700
> 
> 标签：matlab, octave, numerical-integration

In Octave, you can call quad_options to get:

```
quad_options()

Options for Quad include:

keyword                                             value
-------                                             -----
absolute tolerance                                  1.49012e-08
relative tolerance                                  1.49012e-08
single precision absolute tolerance                 0.000345267
single precision relative tolerance                 0.000345267 
```

Can someone explain the difference between these four kinds of error tolerances?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:01:50.537

有关绝对公差和相对公差之间的区别，请参阅[此问题](https://stackoverflow.com/questions/8961844/relative-and-absolute-tolerance-definitions-in-matlab-solver)的答案。最后两个是相同的，但是当您使用[单精度](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)数据而不是[double](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)时。

# php - Is there any way to have a table in mysql with two seperate engine?

> ID：13201720
> 
> 赞同：0
> 
> 时间：2012-11-02T19:20:57.787
> 
> 标签：php, mysql

related to [another question](https://stackoverflow.com/questions/13195426/whos-online-with-timestamp-with-high-performance/13201601#13201601) that no body answerd.

in [another question](https://stackoverflow.com/questions/13195426/whos-online-with-timestamp-with-high-performance/13201601#13201601) that i asked before some person helped me but now i am stuck in another situation.

ok now i want to know is there any way in some table we use from two seperate engine like 2 column `uid` and `username` has myisam engine and `lastlogin` which is a timestamp has a memory engine in use.

because i thought its not possible i tryed to make a table onlineusers(MEMORY ENGINE) in database with two columns one was `uid` and another one was `lastlogin` and then when user wants to login i check database like this and insert if user not exist

```
$myquery = mysql_query('SELECT COUNT(1) FROM `onlineusers` WHERE uid="'. $row['uid'] . '"');

if(mysql_result($myquery,0) == 0){
    $data['uid'] = $row['uid'];             
    $db->insert("onlineusers",$data);
}else{
    updateStatus($row['uid']);
} 
```

and update status function is like this

```
function updateStatus($uid){
    $db = DATABASE::obtain();
    $query = mysql_query("UPDATE `onlineusers` set `lastvisit`=now() WHERE uid='".$db->escape($uid)."'");
} 
```

but when i thought about this i figured it out when we restart our server then table of onlineusers will be empty and what will happen for users with cookies set logged in?

then i have to change update function to use two seperate query first query check if uid exist in onlineuses then if not we will insert into it or if exist we have to update timestamp..

now i have another question to ask. using this method is faster to check if exist or not and then update it with updatestatus function which has memory engine ... or just create some timestamp cloumn in my users table and update it on each page check that have myisam engine??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:59:04.403

您正在尝试做的事情，即在同一张桌子上使用两个单独的引擎听起来是不可能的。单个引擎控制单个表作为 MySQL 最基本的层次。有可能解决这个问题，但这并不明智。你可以编辑源代码，但这太疯狂了。如果您担心性能，那么您可以将您的表拆分为多个表，以便在您需要的表上使用您需要的引擎。否则，您可以使用像 mem cache（我推荐）这样的缓存框架，它可以通过缓存来提高性能，但是您需要它。Mem 缓存是一个经过良好测试的 PHP 工具，听起来就像您需要的一样。祝你好运。

# javascript - Snap or group text in textfield/textarea

> ID：13201721
> 
> 赞同：0
> 
> 时间：2012-11-02T19:20:58.443
> 
> 标签：javascript, jquery

Some applications and websites have a feature where text is grouped and snapped into a single element, and can only be deleted as a whole. Examples are e-mail addresses in e-mail clients, or tags in photosites and below in the stackoverflow tags box. As soon as you type a space after the text, it is replaced with and visualized as a block, sometimes including a cross to delete it. I was wondering if there is a common name for this, and if there is a jquery or related implementation that I can use out of the box.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:32:31.650

在 Git Hub 上查看**[tagit jQuery 插件。](http://aehlke.github.com/tag-it/)**

# javascript - generating and serving static files with Meteor

> ID：13201723
> 
> 赞同：20
> 
> 时间：2012-11-02T19:21:15.200
> 
> 标签：javascript, express, meteor

I'm looking to create static text files based upon the content of a supplied object, which can then be downloaded by the user. Here's what I was planning on doing:

1.  When the user hits 'export' the application calls a `Meteor.method()` which, in turn, parses and writes the file to the public directory using typical Node methods.

2.  Once the file is created, in the callback from `Meteor.method()` I provide a link to the generated file. For example, 'public/userId/file.txt'. The user can then choose to download the file at that link.

3.  I then use Meteor's `Connect modele` (which it uses internally) to route any requests to the above URL to the file itself. I could do some permissions checking based on the userId and the logged in state of the user.

The problem: When static files are generated in public, the web page automatically reloads each time. I thought that it might make more sense to use something like Express to generate a REST endpoint, which could deal with creating the files. But then I'm not sure how to deal with permissions if I don't have access to the Meteor session data.

Any ideas on the best strategy here?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-12-03T18:14:38.213

在版本中~~0.6.6.3~~ **0.7.x** - **1.3.x**您可以执行以下操作：

## 来写

```
var fs = Npm.require('fs');
var filePath = process.env.PWD + '/.uploads_dir_on_server/' + fileName;
fs.writeFileSync(filePath, data, 'binary'); 
```

## 服务

### 在香草流星应用程序中

```
var fs = Npm.require('fs');
WebApp.connectHandlers.use(function(req, res, next) {
    var re = /^\/uploads_url_prefix\/(.*)$/.exec(req.url);
    if (re !== null) {   // Only handle URLs that start with /uploads_url_prefix/*
        var filePath = process.env.PWD + '/.uploads_dir_on_server/' + re[1];
        var data = fs.readFileSync(filePath);
        res.writeHead(200, {
                'Content-Type': 'image'
            });
        res.write(data);
        res.end();
    } else {  // Other urls will have default behaviors
        next();
    }
}); 
```

### 使用熨斗时：路由器

这应该是服务器端路由（例如：在文件`/server/`夹中的文件中定义）

编辑（2016 年 5 月 9 日）

```
var fs = Npm.require('fs');
Router.route('uploads', {
       name: 'uploads',
       path: /^\/uploads_url_prefix\/(.*)$/,
       where: 'server',
       action: function() {
           var filePath = process.env.PWD + '/.uploads_dir_on_server/' + this.params[0];
           var data = fs.readFileSync(filePath);
           this.response.writeHead(200, {
               'Content-Type': 'image'
           });
           this.response.write(data);
           this.response.end();
       }
    }); 
```

过时的格式：

```
Router.map(function() {
    this.route('serverFile', {
        ...// same as object above
    }
}); 
```

## 笔记

*   `process.env.PWD`会给你项目根目录
*   如果您打算将文件放入项目中

    *   不要使用`public`或`private`流星文件夹
    *   使用点文件夹（例如隐藏文件夹，例如`.uploads`：）

    不尊重这两个将导致本地流星在每次上传时重新启动，除非您运行您的流星应用程序：`meteor run --production`

*   我已经使用这种方法进行简单的图像上传和服务（基于[dario](https://gist.github.com/dariocravero/3922137)的版本）
*   如果您希望进行更复杂的文件管理，请考虑[CollectionFS](https://github.com/CollectionFS/Meteor-CollectionFS)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-27T01:38:01.977

符号链接 hack 将不再适用于 Meteor（从 0.6.5 开始）。相反，我建议使用与以下类似的代码创建一个包：

`packge.js`

```
Package.describe({
  summary: "Application file server."
});

Npm.depends({
  connect: "2.7.10"
});

Package.on_use(function(api) {
  api.use(['webapp', 'routepolicy'], 'server');

  api.add_files([
    'app-file-server.js',
  ], 'server'); 
}); 
```

`app-file-server.js`

```
var connect = Npm.require('connect');

RoutePolicy.declare('/my-uploaded-content', 'network');

// Listen to incoming http requests
WebApp.connectHandlers
  .use('/my-uploaded-content', connect.static(process.env['APP_DYN_CONTENT_DIR'])); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-10T17:41:11.743

我遇到了完全相同的问题，与您的服务器生成的文件相比，我需要用户上传文件。我通过在同一文件夹级别上创建一个“上传”文件夹作为“客户端公共服务器”的兄弟来解决它。然后我创建了一个指向“.meteor/local/build/static”文件夹的符号链接，例如

```
ln -s ../../../../uploads .meteor/local/build/static/ 
```

但是在服务器启动时使用 nodejs 文件系统 api

```
Meteor.startup(function () {
    var fs = Npm.require('fs');

    fs.symlinkSync('../../../../uploads', '.meteor/local/build/static/uploads'); 
}; 
```

在您的情况下，您可能有一个像“generatedFiles”这样的文件夹，而不是我的“上传”文件夹，每次服务器启动时您都需要这样做，因为每次服务器启动时都会生成这些文件夹，例如您的实现中的文件更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-05T00:53:54.397

另一种选择是使用服务器端路由来生成内容并将其发送到用户的浏览器以供下载。例如，以下将按 ID 查找用户并将其返回为 JSON。系统会提示最终用户将响应保存到具有在 Content-Disposition 标头中指定的名称的文件中。也可以将其他标头（例如 Expires）添加到响应中。如果用户不存在，则返回 404。

```
Router.route("userJson", {
    where: "server",

    path: "/user-json/:userId",

    action: function() {
        var user = Meteor.users.findOne({ _id: this.params.userId });

        if (!user) {
            this.response.writeHead(404);
            this.response.end("User not found");
            return;
        }

        this.response.writeHead(200, {
            "Content-Type": "application/json",
            "Content-Disposition": "attachment; filename=user-" + user._id + ".json"
        });
        this.response.end(JSON.stringify(user));
    }
}); 
```

然而，这种方法有一个很大的缺点。服务器端路由不提供获取当前登录用户的简单方法。在 GitHub 上查看[此问题](https://github.com/EventedMind/iron-router/issues/649)。

# c# - Bluetooth phone, can I find cell carrier?

> ID：13201728
> 
> 赞同：0
> 
> 时间：2012-11-02T19:21:34.543
> 
> 标签：c#, bluetooth

After connecting to a cell phone via bluetooth, is there a way to find out what cell carrier (AT&T, Tmobile, etc.) the phone is using? This would need to work with any bluetooth phone on any carrier.

I'll be using the Microsoft® Surface® Bluetooth Connect Code Sample - SDK 2.0 to connect the phone.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:13:27.673

据我所知，这是不可能的。正如@Dan J 所说，这取决于配置文件以及手头设备的实现方式。

# linux - practical app to do screenshots with voiceover on windows and/or linux

> ID：13201730
> 
> 赞同：0
> 
> 时间：2012-11-02T19:21:46.757
> 
> 标签：linux, windows, screenshot

Does anyone knows what package(s) is suitable to do:

*   pressing `PrintScr` (or any other button) making screenshot and starts recording from mic

*   pressing `PringScr` again stops recording from mic

*   files are saved into some directory with timestamps to be latter renamed. Picture and audio file to have the same file name to simplify playback

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:08:50.313

你试过谷歌吗？

[http://en.wikipedia.org/wiki/Screenshot](http://en.wikipedia.org/wiki/Screenshot)

在 Linux 下，您会看到[X11 捕获。](http://en.wikipedia.org/wiki/Screenshot#X_Window_System)

声音可以通过许多应用程序来完成。像*cat /dev/... > file*这样简单的东西可能就足够了，尽管使用**[sox](http://sox.sourceforge.net/)**是更好的选择。（Sox 包括**play**和**rec**命令行实用程序，以及音频转换和许多其他工具。它通常已安装在 Linux 系统上。）

日期标记文件就像简单的**tcsh**或**bash**脚本中的**日期一样简单。**

 ****Printscreen 按钮几乎是不可能的。键盘事件被重定向到当前活动的进程（窗口）。您可能能够通过 X11 窗口管理器触发（拦截）某些东西。也许。否则，您正在查看内核。

你总是可以连接一些其他硬件，比如第二个鼠标，然后编写软件来监听它。或者在屏幕边缘运行一个简单的 GUI 应用程序，甚至是命令行，然后使用 ImageMagick 实用程序来修剪屏幕的该部分。

虽然一个更简单的解决方案是在第二台计算机上运行它，联网到（ssh'ing）第一台。例如：

```
(Everything is done on computerB.)
(convert is part of ImageMagick.)

machineB %  ssh machineA
machineA %  echo $DISPLAY
localhost:10.0
machineA %  setenv DISPLAY machineA:0
machineA %  rm tmp.root.xwd
machineA %  xwd -root > tmp.root.xwd
machineA %  convert tmp.root.xwd  image.`date +%Y.%m.%d_%H:%M:%S`.gif 
```

警告：在 machineA 上，在实际的 machineA 上，您可能需要先键入***xhost +machineA***。****

# html - 删除 HTML 文件中的前导/尾随空格的工具？

> ID：13201735
> 
> 赞同：0
> 
> 时间：2012-11-02T19:22:16.723
> 
> 标签：html, tags, trailing

我已经搜索过，但找不到与我需要的类似的东西。我正在寻找一种能够删除我的 HTML 文件中的前导/尾随空格的工具，该文件也嵌入了 JavaScript。基本上最后，我计划在我的 Nant 脚本中使用这个工具，在每次部署时即时执行这个任务。

是否已经有可以做到这一点的工具，或者最好的脚本语言？

基本上，我会喜欢 MS Word 使用“justify (Ctrl+J)”对文本执行的操作，以便对我的 HTML 文件执行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:21:06.113

这是我为此找到的解决方案。

使用 html 压缩器命令行工具，我只能删除 html 文件的前导空格，因为完全缩小它们不起作用。

灵魂：

java -jar htmlcompressor.jar --preserve-comments --preserve-multi-spaces --preserve-line-breaks --output D:\html\foo-leading_spaces.htm D:\html\foo.htm

使用这个工具来生成我想要的结果，我可以将它应用到我的构建脚本中以即时执行这个过程。

感谢大家的投入，并希望这对处于类似情况的其他人有所帮助。

# jquery - SlickGrid - 让关键字搜索过滤器工作

> ID：13201741
> 
> 赞同：0
> 
> 时间：2012-11-02T19:22:40.437
> 
> 标签：jquery, search, slickgrid

我正在尝试为我正在开发的项目选择 SlickGrid，我首先尝试重新创建开箱即用的示例，除了随机生成的数据和 CSS 之外，没有任何其他自定义。现在唯一不起作用的是搜索功能。如果你们中的一些人可以查看我的代码并让我知道我做错了什么，我将不胜感激。这是链接：[http ://www.tomryandesign.com/dev/datagrid/custom2/](http://www.tomryandesign.com/dev/datagrid/custom2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:37:07.007

试试这个说明性的例子。

```
var dataView = new Slick.Data.DataView();
var slickGrid = new Slick.Grid($('#grid_div'), dataView, gridColumns, gridOptions);
//Keyup event on search selector..
$('#search').keyup(function(e) {
 // clear on Esc
  if (e.which == 27) {
   this.value = "";
  }

  var searchList = $.trim(this.value.toLowerCase()).split(' ');
  dataView.setFilter(gridFilter);  
  slickGrid.invalidate();
  this.focus();

});
//This is custom logic for grid Filtering..
function gridFilter (rec) {
            var found;

            for (i = 0; i < gridSearchList.length; i += 1) {
                found = false;
                $.each(rec, function(obj, objValue) {
                    if (typeof objValue !== 'undefined' && objValue != null 
                    && objValue.toString().toLowerCase().indexOf(gridSearchList[i]) != -1) {
                        found = true;
                        return false; //this breaks the $.each loop
                    }
                });
                if (!found) {
                    return false;
                }
            }

            return true;
        } 
```

这应该适合您的要求。

祝你好运。尼克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T07:04:20.840

在您的触发器部分，添加以下内容：

```
$('#search').keyup(function(e) {
    if(e.which === 27) {   // clear on esc
        this.value = '';    
    }

    dataView.setFilter(gridFilter);
    slickGrid.invalidate();
 });

**//create a function gridFilter**

function gridFilter (rec) {
        var found,
            searchData = $.trim($('#search').val()).toLowerCase().split(' ');
    for (i = 0; i < searchData.length; i += 1) {
        found = false;
        $.each(rec, function(obj, objValue) {       
        if (typeof objValue !== 'undefined' && objValue != null && objValue.toString().toLowerCase().indexOf(searchData[i]) != -1) {
            found = true;
            return false; //this breaks the $.each loop
        }
    });
    if (!found) {
        return false;
    }
  }
    return true;        
} 
```

# actionscript-3 - 在一个循环中从一个 Vector 中拼接元素，该循环通过同一个 Vector (ActionScript 3)

> ID：13201743
> 
> 赞同：0
> 
> 时间：2012-11-02T19:22:56.613
> 
> 标签：actionscript-3, flash, vector, collision-detection

我正在制作一个简单的游戏，并且有一个充满敌人的向量，以便从我的“激光”对象（它是一个空间 shmup）对它们进行命中检查。每个激光都循环穿过 Vector 并检查它是否遮挡了命中圈。问题在于当一个激光摧毁一个敌人时，其余的激光也尝试检查相同的向量，只是因为敌人已经被拼接出来并且它改变了向量的大小而超出了界限。

```
for each (var enemy:Enemy in enemies){
                var distanceX = this.x - enemy.x;
                var distanceY = this.y - enemy.y;
                var distance = Math.sqrt( (distanceX*distanceX) + (distanceY*distanceY) );

                if (distance <= enemy.hitRadius) {
                    enemy.removeEnemy();
                    enemies.splice(enemies.indexOf(enemy),enemies.indexOf(enemy));
                }
} 
```

我将如何收集要删除的 Vector 中各个元素的索引，然后仅在每个 Laser 对象完成检查后才删除它们？

编辑：这是我的 Enemy 类中的 removeEnemy() 函数，以防万一：

```
public function removeEnemy(){
            removeEventListener(Event.ENTER_FRAME, move);
            parent.removeChild(this);
            trace("removed Enemy", enemies.indexOf(this));
        } 
```

编辑编辑：在我的 removeEnemy() 函数中，我也收到一个指向“父”的空引用指针错误......但只是有时。我有一种感觉，如果我解决了这两个问题中的一个，另一个也将得到解决，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:38:49.647

我修好了它！问题实际上在于我如何使用“splice()”方法。原来第二个参数不是停止拼接的结束索引，而是要拼接的元素个数。所以当我试图拼接元素 0 时，我没有拼接任何东西，而当我试图拼接元素 3 时，我也在拼接元素 4 和 5。我觉得自己像个笨蛋，因为没有正确阅读 API 并浪费了一个几个小时。感谢所有发表评论的人——你们帮助我排除了我认为的问题所在。

# java - JPanel 对 KeyBindings 没有反应

> ID：13201744
> 
> 赞同：7
> 
> 时间：2012-11-02T19:22:58.767
> 
> 标签：java, swing, jpanel, key-bindings, keystrokes

我正在开发一个需要 JPanel 对按下的转义键做出反应的应用程序。我很确定我使用了正确的方法将键绑定注册到组件，但显然我仍然做错了什么。这是负责注册端对所述键绑定做出反应的代码：

```
private void initializeKeyBindings() { 
    Action a = new AbstractAction() {
        private static final long serialVersionUID = 1L;
        @Override public void actionPerformed(ActionEvent e) {
            menu.setVisible(true);
            System.out.println("Herp");
        }
    };
    this.getInputMap().put(KeyStroke.getKeyStroke("ESCAPE"), "ESCAPE");
    this.getActionMap().put("ESCAPE", a);
} 
```

在初始化所有其他组件之后，在我的 JPanel 的构造函数中调用此方法。我试过调试它，我发现动作本身已在 JPanel 中注册，但 actionPerformed() 方法中的代码从未到达。我怀疑这个 JPanel 没有焦点可能存在问题，因为我在上层 JFrame 中使用了 CardLayout。我真诚地希望任何人都可以帮助我解决这个问题，因为它非常严重地阻碍了我的进步。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T20:04:13.610

你想念那里

[xxx.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(...)](https://stackoverflow.com/a/7940227/714968)

# c# - Windows 8 是否对应用程序具有更严格的权限？

> ID：13201748
> 
> 赞同：3
> 
> 时间：2012-11-02T19:23:07.253
> 
> 标签：c#, .net-4.0, permissions, windows-8, windows-installer

我有一个我编写的应用程序的 MSI 安装程序。安装程序在 Windows 7 上运行良好。我决定今天在 Windows 8 上对其进行冒烟测试，但它在 WMI 查询中爆炸。我的下意识反应是我的 WMI 查询出了点问题，但经过几个小时的挖掘（并发现其他错误），我开始认为存在与我的代码无关的系统性问题。

我发现的具体例子是：

*   WMI 查询失败。我试图查询一个特定的命名空间。我比较了我的 Windows 7 和 8 机器之间命名空间的安全权限，它们是相同的。*如果我将“INTERACTIVE”添加到 WMI 命名空间 ACL（它最初*只有 SYSTEM 和管理员），我能够让查询在 8 台机器上运行，这导致我找到下一个问题......
*   未能在 LOCAL_MACHINE 中打开注册表项。我注释掉了使用密钥的块，这导致我进入下一个问题......
*   无法在“程序文件”中打开文件

我做了什么：

*   UAC 一开始是完全关闭的，但我已经打开它（完全启动，通知我一切）。
*   修改了 WMI 命名空间的 ACL
*   尝试在 WMI 查询中使用模拟

我错过了 Windows 8 的一些技巧吗？

（代码是 C#，.NET 4.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:51:35.543

Windows 8 与 Windows 7/Vista 的不同之处在于它处理 UAC 被关闭的方式。在 7/Vista 中，程序被赋予高完整性级别，而在 8 程序中被赋予中等完整性级别。

资料来源：[http ://www.brianbondy.com/blog/id/140/](http://www.brianbondy.com/blog/id/140/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:37:33.743

你真的没有给我太多的工作，所以我将根据我在 Windows 8 上看到的其他安装程序的故障做出很多假设并冒险出去。

确保您在 Windows 8 上拥有与 Windows 7 相同版本的 .NET。进入并安装 .NET 3.5 / 4.0 和 4.5。

我见过几个安装程序（一个是 TFS Power Tools），它们使用 InstallUtil 编写托管代码自定义操作，这些操作绑定到框架的一个版本，并在您只有 .NET 4.5 时抛出错误。

对此的修复当然是改用 Wix/DTF 自定义操作，并使用 CustomAction.Config 来指定支持的运行时并允许旧版激活策略。

# javascript - 用 D3 绘制简单的时间线

> ID：13201749
> 
> 赞同：30
> 
> 时间：2012-11-02T19:23:13.013
> 
> 标签：javascript, html, d3.js, visualization, timeline

这就是我想要完成的事情：

![时间线](../Images/e54976e28c13875a3a6b75c32b5b8114.png)

在此示例中，我有一个开始日期（2011 年 6 月 1 日）、一个结束日期（2012 年 7 月 1 日）和此范围之间的多个事件。

每个事件都与日历中的某一天相关（尽管一天可能有很多事件）。

此数据是从 MySQL 数据库中获取的。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-27T04:59:27.713

我最近不得不做类似的事情。我最终编写了一个 d3 插件来处理这种情况。[https://github.com/jiahuang/d3-timeline](https://github.com/jiahuang/d3-timeline)

![在此处输入图像描述](../Images/0c3337b5471e68f18a70717963805000.png)

![在此处输入图像描述](../Images/df6a4bd2f52e9cf48074978a2750adbc.png)

![在此处输入图像描述](../Images/8546637ac65901b4c5a186e6eeb492db.png)

![在此处输入图像描述](../Images/4f06b1e9a4e5705cd39517c8383af9d1.png)

我对 D3 也很陌生，但我希望它有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T19:32:58.707

您应该能够通过[时间尺度](https://github.com/mbostock/d3/wiki/Time-Scales)和[轴来完成此任务](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-axis)

[Scott Murray](http://alignedleft.com/tutorials/d3/)有一套非常好的教程，其中一个是关于[轴的](http://alignedleft.com/tutorials/d3/axes/)

只需将您的时间线视为具有时间刻度的一维散点图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-27T07:54:28.793

我将开发类似的可视化，并在基于 d3.js的 Github [timeknots组件上找到。](https://github.com/alangrafu/timeknots)

# c - 重新分配一个 int 数组

> ID：13201750
> 
> 赞同：3
> 
> 时间：2012-11-02T19:23:21.440
> 
> 标签：c, segmentation-fault, malloc, realloc

我正在尝试创建一个数组来保存一个 int，然后当要添加另一个 int 时增加它的大小以保存另一个 int.. 等等..

我知道这不是 realloc 的有效使用，但它比其他任何东西都更能证明概念。只要让它工作，我就可以优化它并能够将它应用到有用的东西上。一个工作示例。当我调用打印函数并且它只是段错误时，问题就来了。任何帮助，将不胜感激。

```
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

typedef char String[100];

void begin(int *);
void add(int *, int);
void print(int *);

int tempcount=0;

int main(void)
{
    int *n=NULL;
    String menu;

    begin(n);

    while(true)
    {
        scanf("%9s", menu);

        if(!strcmp("a", menu)) //add
        {
            int i=0;
            scanf("%d", &i);
            add(n, i);
        }
        else if(!strcmp("p", menu)) //print
        {
            print(n);
        }
        else if(!strcmp("q", menu)) //quit
        {
            free(n);
            break;
        }

    }

    return 0;
}

void begin(int *n)
{
    n=malloc(sizeof(int));

    if(n==NULL)
    {
        printf("Error in malloc!");
        return;
    }

    n[0]=0;

    printf("Added %d \n", n[0]);
}

void add(int *n, int numToAdd)
{
    static int sizeCount=0;
    sizeCount++;
    tempcount=sizeCount;

    int *temp;

    temp=realloc(n, (sizeCount+1) * sizeof(int));

    if(temp==NULL)
    {
        printf("Error in realloc!");
        return;
    }

    n=temp;

    n[sizeCount]=numToAdd;

    printf("Added %d \n", n[sizeCount]);

}

void print(int *n)
{
    int i;
    for(i=0; i<tempcount; i++)
    {
        printf("%d ", n[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T19:25:31.520

您需要在 add/begin 中将指针传递给您的指针，以便他们可以在 main 中修改您的指针

```
begin(&n);
...
add(&n, i); 
```

和你的定义

```
void begin(int **n)
{
    *n=malloc(sizeof(int));

    if(*n==NULL)
    {
        printf("Error in malloc!");
        return;
    }

    (*n)[0]=0;

    printf("Added %d \n", (*n)[0]);
} 
```

和

```
void add(int **n, int numToAdd)
{
    static int sizeCount=0;
    sizeCount++;
    tempcount=sizeCount;

    int *temp;

    temp=realloc(*n, (sizeCount+1) * sizeof(int));

    if(temp==NULL)
    {
        printf("Error in realloc!");
        return;
    }

    *n=temp;

    (*n)[sizeCount]=numToAdd;

    printf("Added %d \n", (*n)[sizeCount]);

} 
```

现在您正在做的是在开始/添加中修改指针的本地副本，因此当您在这些函数中更改它时，它不会`n`在 main 中修改您的指针

另外，有趣的事实是，如果您将`NULL`其作为第一个参数传递给`realloc`它，它的行为就像 a `malloc`，所以如果您初始化`n`为`NULL`，您可以简单地调用`add`而无需先执行 a `begin`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:30:49.807

检查您的函数添加 - 您确定更新指针值吗？尝试使用 ** 作为参数 - 我认为它会有所帮助。

# html - 宽度：自动仅调整到 div 的一半

> ID：13201753
> 
> 赞同：0
> 
> 时间：2012-11-02T19:23:48.613
> 
> 标签：html, css, wordpress, width

谁能解释一下为什么在这个页面（以及其他一些页面来自主页和关于）[http://leedsragfashionshow.co.uk/wp/index.php/committee/](http://leedsragfashionshow.co.uk/wp/index.php/committee/)，页面的标题被切断显示只说了一半。

有时在刷新时它会以灰色背景完整显示标题，有时会恢复为只显示一半。

在 Chrome 上体验这个

![在此处输入图像描述](../Images/3ac3a5e43e28a8cbc72c83c7a2da536a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:01:45.770

看起来你有很多宽度：100% 和宽度：自动。你可能会在一些地方覆盖自己。尝试删除其中的一些，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:50:27.237

它似乎可以在 Firefox 和 Chrome 上正常加载。我看到的唯一被剪切的“标题”是由于 chrome 中的标签大小限制而被剪切的标题 html 标记。也许我是误会了？一切看起来都很好。

# jquery - jQuery 需要一种简单的方法来比较数组，然后显示相等的警报和其他错误的警报

> ID：13201754
> 
> 赞同：0
> 
> 时间：2012-11-02T19:23:49.610
> 
> 标签：jquery

有没有一种简单的方法来比较两个数组，然后如果数组相等则弹出警报（或稍后的其他功能），如果不相等则弹出警报？

这是我的数组

```
var answerKey = ["four", "two", "one", "three"];
var answers = []; 
```

到目前为止，我有 jQuery

```
$("#subBtn").click(function() {
$('#bin a').each(function() {
    answers.push($(this).attr('name'));
})
console.log(answers);
}); 
```

HTML

```
<ul>
    <li><a draggable="true" href="#" id="one" name="uno" class="imgHvr">One</a></li>
    <li><a draggable="true" href="#" id="two" name="dos" class="imgHvr">2</a></li>
    <li><a draggable="true" href="#" id="three" name="tres" class="imgHvr">three</a></li>
    <li><a draggable="true" href="#" id="four" name="sweet" class="imgHvr">4</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:39:13.437

只需逐个元素比较两个数组。

```
function arraysEqual(arr1, arr2){
    if (arr1.length != arr2.length) return false;

    for (var i=0;i<arr1.length;i++){
        if (arr1[i] != arr2[i]) return false;
    }

    return true;
} 
```

单击处理程序...

```
 $("#subBtn").click(function() {
    var answers = [];
    $('#bin a').each(function() {
        answers.push($(this).attr('name'));
    }); 

    console.log(answers);

    if (!arraysEqual(answerKey, answers)) {
        alert("something");
    }
}); 
```

完全复制这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:46:23.570

如果您不想逐个元素比较，这应该有效：

```
if (JSON.stringify(array_1) == JSON.stringify(array_2)){
....
} 
```

# jquery - 获取复选框以在单击时保持选中状态

> ID：13201755
> 
> 赞同：2
> 
> 时间：2012-11-02T19:24:04.880
> 
> 标签：jquery

我尝试了各种方法来让我的复选框在单击时被选中。

以下适用于准备好的文档：

```
$('input[name=foo]').attr("checked","checked"); 
```

但是，一旦我用单击事件包围它，复选框就不会保持选中状态。在单击时，他们会检查（他们应该），然后立即取消选中。

```
$("#selectall").click(function(){
$('input[name=foo]').attr("checked","checked");
}); 
```

我的 HTML：

```
<form id="frm1">
<input type="checkbox" name="foo" value="bar" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:32:17.613

采用...

```
[type=checkbox]    

$("#selectall").click( function(){ $('input[type=checkbox]').attr("checked","checked"); } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:37:33.187

试试这个使用`.prop()`而不是`.attr()`

**HTML**

```
<input id="selectall" type="checkbox" name="foo" value="bar">Select ALL

    <form id="form1">
       <input type="checkbox" name="foo" value="bar" />
       <input type="checkbox" name="foo" value="bar" /> 
       <input type="checkbox" name="foo" value="bar" /> 
       <input type="checkbox" name="foo" value="bar" />
    </form> 
```

**javascript**

```
$("#selectall").click(function() {
    $('#form1 input[type=checkbox]').prop("checked", this.checked);
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/z4B2U/4/)**

# php - php中的全局变量问题

> ID：13201760
> 
> 赞同：0
> 
> 时间：2012-11-02T19:24:37.267
> 
> 标签：php

> **可能重复：**
> [在函数中找不到 PHP 全局变量](https://stackoverflow.com/questions/5496208/php-global-variable-not-found-in-functions)

我有一个从数据库读取数据的函数。我有一个数组，我想将数据库中的数据放入其中以便于操作。我在函数外部定义我的数组并在调用函数时填充它。

```
$rid = "";
if(isset($_GET['rid'])){
  $rid = $_GET['rid'];
}

$dates = array();    
function getData($rid){
  //Db Connection Strings
  //Query stuff etc

  //DATES
  for ($i=0; $i < 5; $i++) { 
    $mil = (float)$query->table->records->record->f[$i];
    $seconds = $mil / 1000;
    $dt = gmdate('m-d-Y', $seconds);

    $dates[$i] = $dt;
  }  
  print_r($dates);//THIS WORKS
}

getData($rid);
print_r($dates);//THIS DOESN'T 
```

我的问题是：除非我在函数中调用引用 $dates，否则它不会吐出我的数据。我需要在函数外部完成此操作，以便在运行时将值放入文本字​​段中。

如何将我的值放入我的 $dates 数组中，以便它们可以在全球范围内使用？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:26:51.517

您可以通过三种基本方式来执行此操作：通过引用传递数组、全局调用它以及从函数中返回它。

## 通过引用传递

```
function getData($rid, &$dates) {
    ...
    for ($i=0; $i < 5; $i++) { 
        ...
        $dates[$i] = $dt;
    }
}

getData($rid, $dates); 
```

## 返回

```
function getData($rid) {
    $dates = array();
    ...
    for ($i=0; $i < 5; $i++) { 
        ...
        $dates[$i] = $dt;
    }
    return $dates;
}

$dates = getData($rid); 
```

## 全局变量

```
function getData($rid){
    global $dates;
    ...
    for ($i=0; $i < 5; $i++) { 
        ...
        $dates[$i] = $dt;
    }  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:27:44.753

这是一个范围界定问题。您应该将日期作为参考传递，或者将日期数组作为函数的结果返回。

```
function getData($rid){
   //Do whatever you need to do.
   return $dates;
}

$dates = getData($rid);
print_r($dates); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T19:27:49.063

只需从函数返回，而不是依赖全局数据：

```
function getData($rid) {
    // ...
    return $dates;
}
print_r(getData($rid)); 
```

之前的`$dates`函数没用，把它移到函数内部来正确初始化它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T19:27:24.977

在您的函数中声明以下内容：

```
global $dates; 
```

这将使用全局变量`dates`而不是创建局部变量并使用它，这就是现在正在发生的事情。

# css - 将网站移至 CMS

> ID：13201762
> 
> 赞同：0
> 
> 时间：2012-11-02T19:24:53.487
> 
> 标签：css, xhtml, content-management-system

我有一个静态网站，它是通过将 psd 转换为 xhtml/css 构建的，并且包含一点 PHP。这是我目前设计网站的程度。

我的客户现在告诉我将 CMS 整合到网站中是否是一个困难的过程。现在我知道了 CMS 是什么，也知道了常见的开源系统，如 Drupal、Wordpress 和 Joomla。

我的第一个问题是：-

*   我会将这些 CMS 中的一个合并到我的网站中还是将网站合并到 CMS 中？

和

*   整合 CMS 是一个漫长的过程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:29:48.387

> 我会将这些 CMS 中的一个合并到我的网站中还是将网站合并到 CMS 中？

这完全取决于您和您的客户希望如何管理网站。如果客户只希望能够“写博客”，那么将 CMS 添加到您的网站以获取客户想要管理的特定页面会更容易。

另一方面，如果客户想通过 CMS 管理整个站点，那么您将在您选择的 CMS 中构建您的站点。

> 整合 CMS 是一个漫长的过程吗？

这取决于您对 CMS 的熟悉程度。我可以在 wordpress 上发言，因为它是我最熟悉的——一旦您构建/选择/自定义了与您的原始网站（或新网站的外观）相匹配的主题，添加内容就相当容易了。在我看来，花在定制主题上的时间最多。

编辑添加：

如果时间是考虑因素，我的方法是要么在线购买客户同意的主题，要么将 Wordpress 主题设计分包给具有丰富自定义主题构建经验的人。无论如何，后一种选择并不“便宜”，但有许多自由设计师在设计 wordpress 主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:34:51.440

你几乎从头开始重建。您可以设计您想要的外观，然后通过“更用户友好”的界面上传内容。

就个人而言，我发现使用 Drupal 很痛苦，而 Joomla 对我来说只是一堆螺栓。我正在为客户开发自定义 CMS。这是我的第一个，但进展非常顺利。

如果最终用户非常熟练，那么其中一个系统可能没什么大不了的。否则，期望给这个客户很多关注。

我必须说，Wordpress 非常好。我不会将它用于整个网站（尽管很多人都这样做），但是一旦我获得主题设置，我就会将它用于我的博客（那里有一个学习曲线。你必须熟悉他们的系统）。

因此，如果您的客户不想编辑太多，我会为他们构建一个安全页面来编辑措辞，制作“新文章”或新页面，如果您的网站已经在PHP，你可以很好地解决。

祝你好运！

# maven - 自定义注释处理器在 Maven 中创建重复的类

> ID：13201763
> 
> 赞同：2
> 
> 时间：2012-11-02T19:24:59.453
> 
> 标签：maven, compilation, annotation-processing

我有一个自定义注释处理器，它使用速度模板生成类。它工作正常，但我需要在构建之前清理项目以避免在编译期间重复类。

我什至将速度配置为删除已经存在的文件，但它没有帮助。有什么特别需要避免这种情况吗？

**编辑**

您可以在此处查看代码[或在此处](https://bitbucket.org/javydreamercsw/jwrestling/src)查看[代码](https://javydreamercsw@bitbucket.org/javydreamercsw/jwrestling)。

NetBeans 包装器 pom 在[这里](https://bitbucket.org/javydreamercsw/simple-marauroa-rcp/src/df31e717097bfbbb3071e887a6e6ea79e088bace/Marauroa-Server-Manager/jWrestling-Wrapper/pom.xml?at=default)。

# iis - IIS 日志冻结，许多日志在 23.59.59 UTC 具有相同的时间戳

> ID：13201766
> 
> 赞同：2
> 
> 时间：2012-11-02T19:25:09.903
> 
> 标签：iis, iis-7.5

我有一个 IIS 7.5 服务器，在 .NET 4.0 上托管一个 Web 应用程序。我已启用 IIS 日志以每天记录请求。但是我观察到，在 23.59.59 之后，请求的时间戳在日志中冻结，生成大量带有该时间戳的日志（约 1000 个），而实际上当时几乎没有 5-10 个请求。有什么线索吗？

# javascript - 在 javascript 数组中查找元素并返回匹配元素的位置

> ID：13201768
> 
> 赞同：0
> 
> 时间：2012-11-02T19:25:22.013
> 
> 标签：javascript, jquery

我正在为此绞尽脑汁，但希望在几次失败的尝试后有人能提供帮助。

我有一个这样的 HTML 列表：

```
<ul>
<li><span class="current"></span></li>
<li><span class="normal"></span></li>
</ul> 
```

我试图找出一种方法来找到此列表中的 li 元素，该元素的跨度与当前类的跨度以及它在 ul 中的编号。因此，在这种情况下，它将是 1。

我尝试使用不同的 jquery 函数，但似乎无处可去。这就是它现在的样子：

```
var list = $('ul li');
$.each(list, function(key, value) {
    if( $(this).find('.current') ) {
        alert(key);
    }
}); 
```

这只是警告 0 和 1，本质上意味着它不起作用。有谁知道我在做什么有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:26:53.640

不是（JavaScript 是零索引），而是`0`：`1`

```
$('li:has(span.current)').index(); 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/PEjgN/)和一个[更大的表示例](http://jsfiddle.net/davidThomas/PEjgN/6/)。

或者你可以使用：

```
$('span.current').parent().index(); 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/PEjgN/1/)和一个[更大的表示例](http://jsfiddle.net/davidThomas/PEjgN/4/)。

或者：

```
$('span.current').closest('li').index(); 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/PEjgN/2/)和一个[更大的表示例](http://jsfiddle.net/davidThomas/PEjgN/5/)。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`:has()`选择器](http://api.jquery.com/has-selector/)。
*   [`index()`](http://api.jquery.com/index/).
*   [`parent()`](http://api.jquery.com/parent/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:40:21.110

jQuery 选择器（从不）返回错误值。所以像：

```
$(this).find('.current') 
```

`if`将始终在语句中返回 true 。检查是否存在的一种简单方法是使用`length` 属性，它表示从选择器中找到了多少元素。

```
if ($(this).find('.current').length > 0) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:31:00.233

您的代码循环遍历列表中的每个项目并显示其键。

你想要的更像是：

```
$('mylist').find('.current').each(function(key, value)
    {
        alert(key);
    } 
```

这将仅循环通过具有“当前”类的项目。

# php - CKEditor Paste from Word 将内容放入表格单元格

> ID：13201774
> 
> 赞同：0
> 
> 时间：2012-11-02T19:26:00.020
> 
> 标签：php, ckeditor

我刚刚在现有网站上安装了 CKEditor。似乎工作得很好，除了一个问题。

如果我从 MS Word 复制任何内容并粘贴到 CKEditor，使用粘贴或从 Word 粘贴天气，它总是将文本粘贴到表格单元格中。我不想将它放入表格单元格中，我只想要从 Word 复制的格式化文本。

有任何想法吗？也许某种配置设置？

对不起，如果这已被问到/回答。我搜索并找不到答案。

谢谢！瑞克

# javascript - 寻找节点的“util.inherits”的 JavaScript 实现

> ID：13201775
> 
> 赞同：5
> 
> 时间：2012-11-02T19:26:05.287
> 
> 标签：javascript, node.js

我正在实现一个也可以在节点上运行的 JavaScript 库，我想尽可能多地使用节点的 API。我的对象发出事件，所以我找到了一个名为[eventemitter2](https://github.com/hij1nx/EventEmitter2)的不错的库，它重新实现了 JavaScript 的 EventEmitter。现在我想为[util.inherits](http://nodejs.org/docs/latest/api/util.html#util_util_inherits_constructor_superconstructor)找到相同的内容。有人听说过这样的项目吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T19:43:52.577

您是否尝试过使用 Node.js 实现？（它使用`Object.create`，因此它[可能会或可能不会在您关心的浏览器上运行](http://kangax.github.com/es5-compat-table/)）。这是来自[https://github.com/joyent/node/blob/master/lib/util.js](https://github.com/joyent/node/blob/master/lib/util.js)的实现：

```
inherits = function(ctor, superCtor) {
  ctor.super_ = superCtor;
  ctor.prototype = Object.create(superCtor.prototype, {
    constructor: {
      value: ctor,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
}; 
```

CoffeeScript 使用了另一种方法，它编译

```
class Super
class Sub extends Super 
```

到

```
var Sub, Super,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Super = (function() {

  function Super() {}

  return Super;

})();

Sub = (function(_super) {

  __extends(Sub, _super);

  function Sub() {
    return Sub.__super__.constructor.apply(this, arguments);
  }

  return Sub;

})(Super); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-03T12:46:16.123

您不需要使用任何外部库。只需按原样使用 javascrit。

B 继承自 A

```
B.prototype = Object.create (A.prototype);
B.prototype.constructor = B; 
```

在 B 的构造函数内部：

```
A.call (this, params...); 
```

如果你知道javascript有一个名为constructor的属性，那么就避免它，不需要隐藏或不枚举它，避免避免避免。不需要超属性，只需使用 A.call 即可。这是 javascript，不要尝试像使用任何其他语言一样使用它，因为你会惨遭失败。

# css - Webfont 以不同方式加载跨浏览器（mac firefox 问题）

> ID：13201780
> 
> 赞同：0
> 
> 时间：2012-11-02T19:26:46.620
> 
> 标签：css, fonts, cross-browser, rendering, webfonts

我使用 google “Comfortaa” 字体作为带有此代码的博客

```
<link href='http://fonts.googleapis.com/css?family=Comfortaa&subset=greek,latin' rel='stylesheet' type='text/css'> 
```

但是，字体（以及其他字体）在 mac Firefox 上显示得更粗（在 Chrome mac/win firefox win 等上显示正常）

为了确定，我将所有 em 都更改为 px，而且我可以尝试使用代码中的 font squirrel

```
/* Generated by Font Squirrel (http://www.fontsquirrel.com) on November 2, 2012 */

@font-face {
    font-family: 'comfortaabold';
    src: url('comfortaa-bold-webfont.eot');
    src: url('comfortaa-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('comfortaa-bold-webfont.woff') format('woff'),
         url('comfortaa-bold-webfont.ttf') format('truetype'),
         url('comfortaa-bold-webfont.svg#comfortaabold') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'comfortaalight';
    src: url('comfortaa-light-webfont.eot');
    src: url('comfortaa-light-webfont.eot?#iefix') format('embedded-opentype'),
         url('comfortaa-light-webfont.woff') format('woff'),
         url('comfortaa-light-webfont.ttf') format('truetype'),
         url('comfortaa-light-webfont.svg#comfortaalight') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'comfortaaregular';
    src: url('comfortaa-regular-webfont.eot');
    src: url('comfortaa-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('comfortaa-regular-webfont.woff') format('woff'),
         url('comfortaa-regular-webfont.ttf') format('truetype'),
         url('comfortaa-regular-webfont.svg#comfortaaregular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

问题仍然存在。（我不确定在哪里放置@font face - 我通过博客 css 应用了它）

我做错了什么，或者这显然是一个无法修复的浏览器渲染问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T13:26:55.950

尝试使用数字字体粗细值。在 Google webfont 监听中，您可以看到每种样式的正确字体粗细。在 Comfortaa 的情况下，它们是：{font-weight: 300;} 用于书本，{font-weight: 400;} 用于正常和 {font-weight: 700;} 用于粗体。

# joomla2.5 - 如何在自定义组件中订购管理视图？

> ID：13201785
> 
> 赞同：0
> 
> 时间：2012-11-02T19:27:20.903
> 
> 标签：joomla2.5

不是 Joomla 的新手，而是 2.5 的新手，并且正在使用 Cook Component Builder 来弄湿我的脚（这非常好！）。无论如何，我已经创建了 3 个表/控制器和匹配的视图。

问题是它们按照我创建它们的顺序显示为选项卡和菜单项，但我希望它们以更合乎逻辑的方式出现在用户面前。我已经过了使用 Cook 的阶段，但无法确定核心 Joomla 代码中的哪个位置。大概我生成的代码丢失了一些东西，而 Joomla 正在使用一些默认值，并且经过*几个小时的跟踪*（我已经完成了我的作业，但*找不到*代码来显示我会尝试什么）Joomla 在做什么，我'我仍然无法找到我应该更改的位置/内容以更改它们出现的顺序。

例如，在文章管理器中，3 个选项卡是：

```
| Articles | Categories | Featured Articles | 
```

该表的顺序在哪里确定，或者我将如何将该顺序更改为此？：

```
| Articles | Featured Articles | Categories | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:41:29.780

文章管理器 (com_content) 有一个生成链接的助手（称为子菜单）。

看看*helpers*目录里面的 content.php。

在名为*ContentHelper*的类中，您将找到函数*addSubmenu()*。这是负责生成菜单的函数。

因此，如果您将*JSubMenuHelper::addEntry*调用按所需顺序放置，则顺序将发生变化。

知道了？:)

# android - 垂直运动传感器

> ID：13201788
> 
> 赞同：6
> 
> 时间：2012-11-02T19:27:28.723
> 
> 标签：android, accelerometer, gyroscope, motion, tilt

我正在开发一个需要检测垂直运动的 android 应用程序。向上移动平板电脑时，陀螺仪、加速度计和线性加速度传感器会给出相应的值来指示向上或向下运动。

我遇到的问题是，当您将平板电脑向用户倾斜或远离用户倾斜时，这些传感器也会读取向上/向下的运动。例如，陀螺仪中的 x 值代表垂直平面。但是当您将设备向前倾斜时，x 值会发生变化。当我做出这个动作时，读取垂直运动的同一个传感器会为此读取一个值。 [![在此处输入图像描述](../Images/4f3ed071741ad4b69a61a1271a03d5aa.png)](https://i.stack.imgur.com/8h6wC.png)

其余传感器也是如此。我尝试使用与陀螺仪结合的方向来制作条件语句，如果音高没有变化，但 x 变量向上/向下，那么我们有垂直运动。这样做的问题是，如果用户将其向上移动但稍微倾斜，它将不再起作用。我也尝试过这样做，所以如果倾斜发生变化，那么就没有垂直运动。但它迭代得如此之快，以至于倾斜可能会在 1/100 秒内发生变化，但下一秒则没有。

有什么方法可以让我只读取垂直变化而不读取设备间距的变化？

这是我要检测的内容： [![在此处输入图像描述](../Images/2d6edb5059ed7bc67d7928592106bf24.png)](https://i.stack.imgur.com/iqeTJ.png)

编辑：

“请对你认为的‘向上移动’提出一个数学上合理的定义。”这是我最初的问题，我如何编写一个函数来定义平板电脑何时向上或向下移动？我考虑向上移动的垂直平移。现在我该如何检测呢？我根本不知道从哪里开始，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-01T12:55:58.733

好的，尽管这个问题已经相当老了，但我在目前的答案和评论中看到了很多混乱，所以如果有人发现这个问题，我打算澄清一些事情。

# 陀螺仪

首先，陀螺仪不会根据您的定义测量垂直运动（平移运动）。它测量**围绕**每个轴的旋转，这些轴的定义如下图所示。因此，让您向前和向后倾斜您的设备确实会围绕 x 轴旋转它，因此您将在陀螺仪传感器的 x 值中看到非零值。

![设备轴](../Images/dfad9d57bdb652cf0aa1d2d7a8cac8e6.png)

> 陀螺仪中的 x 值代表垂直平面。

我不确定“垂直平面”是什么意思，但是 x 值当然不代表平面本身，也不代表设备在平面内的方向。

陀螺仪传感器的 x 值表示设备绕 x 轴的当前角速度（例如旋转的变化）。

> 但是当您将设备向前倾斜时，x 值会发生变化。当我做出这个动作时，读取垂直运动的同一个传感器会为此读取一个值。

不太清楚你在这里指的是什么。我假设“读取垂直运动的同一传感器”是陀螺仪，但如前所述，它不会读取垂直运动。它完全按照锡上所说的那样做。

# 设备坐标系

这更多是对用户 Ali 的回答，而不是原始问题，但在任何一种情况下都具有相关性。

线性加速度传感器（或任何其他传感器）的各个输出在**设备的坐标系中**表示，如上图所示。这意味着如果您稍微旋转设备，输出将不再平行于它们之前重合的任何世界轴。因此，您要么必须强制设备处于应用程序的特定方向，要么将新方向考虑在内。

`ROTATION_VECTOR`传感器与四元数数学或`getRotationMatrixFromVector()`方法相结合，是将您的测量值从设备坐标转换为世界坐标的一种方法。还有其他方法可以实现相同的目标，但一旦实现，您握持设备的方式对于测量垂直运动将不再重要。

无论哪种情况，您要查找的轴都是 y 轴，而不是 z 轴。

（如果你的意思是“沿着设备 y 轴”作为“垂直”，那么只需忽略所有方向的东西，只使用线性加速度传感器）

# 噪音

您在问题中提到了一些关于噪音和更新率的问题，所以我在这里只提一下。从经常变化的事物中获取良好、一致的数据的最简单和最常见的方法之一是使用低通滤波器。哪种类型的滤波器最好取决于应用程序，但我发现[指数移动平均滤波器](https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average)在大多数情况下是可行的。

# 整理思绪

请注意，如果您适当注意方向，则转换后的线性加速度输出将很好地近似垂直运动（嗯，运动变化），而不会过滤任何噪声。

此外，如果要测量垂直“运动”，例如速度，则需要集成加速度计输出。出于各种原因，在大多数情况下，这并不是真的很好，尽管它在速度的情况下不太严重，而不是尝试测量位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:50:25.417

好的，我怀疑这只是部分答案。

如果要检测垂直运动，只需要线性加速度，设备方向无关紧要。看

[iOS - 如何判断设备是否被抬起/放下（CoreMotion）](https://stackoverflow.com/a/12497161/341970)

或者

[如何计算手机从静止垂直方向的运动？](https://stackoverflow.com/a/6299287/341970)

出于某种原因，您也关心设备方向，我不知道为什么。我怀疑你想检测别的东西。所以请告诉我们更多，然后我会改进我的答案。

* * *

**更新**

> 我读了关于 coremotion 的帖子，你提到 z 越高 x 和 y 越低意味着垂直运动，你能详细说明一下吗？

我将用伪代码编写。您测量了`(x, y, z)`线性加速度矢量。计算

```
rel_z = z/sqrt(x^2+y^2+z^2+1.0e-6) 
```

如果`rel_z > 0.9`那么朝 z 方向的加速度占主导地位（垂直运动）。请注意，常数`0.9`是任意的，可能需要调整（应该是小于 1 的正数）。是为了`1.0e-6`避免意外被零除。

您可能必须添加另一个`z`足够大的约束。我不知道你的设备，它测量重力是 1 还是 9.81。我假设它测量为 1。

总而言之：

```
if (rel_z > 0.9 && abs(z) > 0.1) { // we have vertical movement 
```

同样，常数`0.1`是任意的，可能需要调整。它应该是积极的。

* * *

**更新 2**

> 我不想要这个，因为向我旋转它并没有向上移动它

**它正在向上移动**：质心正在向上移动。我的代码具有正确的行为。

请对您认为“向上移动”的内容提出一个数学上合理的定义。

# mysql - Rails 在查询结果上的位置

> ID：13201789
> 
> 赞同：1
> 
> 时间：2012-11-02T19:27:37.210
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3

我有一个模型`Link`——它有很多热门。我正在尝试做的是从数据库表中聚合每小时点击次数的数据`hits`- 包含`year`、`month`、`day`和`hour`.

一切正常，但是当我运行下面的代码时，我最终**对数据库进行了近 1,000 个查询**，这似乎相当多。

```
#before iteration
@hits = @link.hits.group('year, month, day, hour')
  .order('year ASC, month ASC, day ASC, hour ASC')
  .select('year, month, day, hour, count(*) as hits')

#inside iteration

#Line breaks are included here for easy reading
hits_per_hour =
  @hits.where(
    :year => t.year, 
    :month => t.month,
    :day => t.day,
    :hour => t.hour
  ).map(&:hits).first || 0 
```

这`t`是一个`Time`自第一次点击收到链接后以 1 小时为步长进行迭代的对象。

我认为 rails 会存储查询结果，而不是每次都重新查询。我也找不到任何有关缓存查询结果或任何内容的信息。我只是完全错过了一些东西，还是这真的是最简单的方法？

这是查询的示例（这是我在日志中看到的以一千块为单位的内容）：

```
SELECT year, month, day, hour, count(*) as hits
FROM `hits`
WHERE
  `hits`.`link_id` = 1 AND
  `hits`.`year` = 2012 AND
  `hits`.`month` = 11 AND
  `hits`.`day` = 2 AND
  `hits`.`hour` = 14
GROUP BY year, month, day, hour
ORDER BY year ASC, month ASC, day ASC, hour ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:42:33.783

行。所以`@hits`将是一个 ActiveRecord::Relation 对象——本质上是一个 SQL 查询。我相信，因为每次迭代`.where`都使用不同的参数调用它，从而改变了查询，Rails 决定必须每小时重新运行一次查询。

最简单的解决方法可能是在迭代之前将 Relation '折叠'到一个数组中，然后每次使用纯 Ruby 来选择你想要的结果：

```
@hits = @link.hits.group('year, month, day, hour')
  .order('year ASC, month ASC, day ASC, hour ASC')
  .select('year, month, day, hour, count(*) as hits').all 
```

进而：

```
hits_per_hour = (@hits.select{|record| record.year == t.year && record.month == t.month && record.day == t.day && record.hour == t.hour}.map(&:hits).first || 0) 
```

不过，我认为这实际上可能不是最好的解决方案。根据您需要的数据以及您正在使用的数据，您应该能够在数据库中完成所有工作。

# c++ - c++：打印有线字符串

> ID：13201796
> 
> 赞同：0
> 
> 时间：2012-11-02T19:28:19.360
> 
> 标签：c++, string, vector

我正在将 a 转换`string`为`char`数组，而不是转换回 a`string`和`vector`. 当我尝试打印时，我得到了这个：

```
this
is
the
sentence iuִִ[nu@h?(h????X 
```

以及更多。这是代码：

```
int main(int argc, char *argv[]){
    string s ="this is the sentence";
    char seq[sizeof(s)];
    strcpy(seq, "this is the sentence");
    vector<string> vec = split(seq);
    printWords(vec);

    return 0;
} 
```

这是 func.cpp 文件。一个函数将字符拆分为字符串向量，另一个是打印：

```
vector<string> split(char sentence[]){
    vector<string> vecto;
    int i=0;
    int size= strlen(sentence);
    while((unsigned)i< size){
        string s;
        char c =' ';
        while(sentence[i]!=c){
            s=s+sentence[i];
            i+=1;
        }
        vecto.push_back(s);

        i+=1;
    }

    return vecto;
}

void printWords(vector<string> words){
    int i=0;
    while ((unsigned)i<words.size()){
        string s = words.at(i);
        cout << words.at(i) << endl;
        i+=1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:31:21.183

您的问题之一是`sizeof(s) != s.size()`.

试试这个：

```
char letters = new char[s.size() + 1]; // +1 for the null terminator. 
```

该表达式`sizeof(s)`返回`std::string`对象的大小，而不是字符串中的字符数量。`std::string`对象可能多于字符串内容 。

此外，尝试使用`std::string::operator[]`访问字符串中的单个字符。

**例子：**

```
string s = "this is it";
char c = s[5]; // returns 'i' from "is". 
```

您还应该考虑使用 的搜索功能`std::string`，例如`std::string::find_first_of`。

**例子：**

无符号整数位置 = s.find_first_of(' ');

另一个有用的功能是`substr`方法：

```
 std::string word = s.substr(0, position); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:39:43.997

在理解了上面的答案之后，尝试一种不易出错的风格，更像这样（C++11）：

```
#include <iostream>
#include <sstream>
#include <vector>

using namespace std;
int main(){
  string s{"this is the sentence"};
  stringstream sStream;
  sStream<<s;
  string word;
  vector<string> vec;
  while(sStream >> word){
    vec.emplace_back(word);
  }
  for(auto &w : vec){
    cout << "a word: " << w <<endl;
  }
} 
```

# oracle - 在 Weblogic 上集成 JPA 的 Java NoClassDefFoundError

> ID：13201798
> 
> 赞同：0
> 
> 时间：2012-11-02T19:28:26.377
> 
> 标签：oracle, jpa

我有一个名为“eshop”的网络动态项目，我正在为其制作 JPA。我已经通过 File New JPA 项目添加了一个新的 JPA，并将其称为“jpa”，包名称为“model” 在 eshop 项目的 servlet 中，我通过以下方式调用它

```
import model.*;

ProductModelDAO dao4 = new ProductModelDAOImpl("jpa");
ArrayList products = dao4.getProductsByCategory(categoryId); 
```

但是，它不断给出 NoClassDefFoundError 错误。Eclipse 不允许我为 JPA 提供与包名为“eshop”的 eshop 项目相同的包名。在使用属性窗口的 JPA 项目中，我尝试引用 eshop 项目但没有任何结果。在 Java Build Path 的 JPA 项目中，我还通过 Add Class Folder 添加了 eshop 项目的类文件夹。也没有任何结果。我花了几个小时检查为什么会这样。谁能给我一个明确的指示如何解决这个问题？我正在使用 Weblogic 11gR1 (10.3.3)。错误如下：

```
java.lang.NoClassDefFoundError: model/ProductModelDAOImplat eshop.Servlet.doPost(Servlet.java:110)
at eshop.Servlet.doGet(Servlet.java:57)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.doIt(WebAppServletContext.java:3686)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3650)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2268)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2174)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1446)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:13:42.820

这似乎是一个包裹问题。我通过给 jpa 包名称 eshop 解决了这个问题。

# windows - 批处理文件以对文本文件中的数字求和并将该总值写入文本文件

> ID：13201801
> 
> 赞同：1
> 
> 时间：2012-11-02T19:28:41.623
> 
> 标签：windows, command-line, batch-file

我在文件夹 1 中有 300 个文本文件，在文件夹 2 中有 300 个文本文件

下面是一个文本文件的示例内容

```
india,car,10
uk,car,20
us,car,50 
```

我想对第 3 列求和并将其写入同一个文本文件。例子，

```
for /f "tokens=3 delims=," %%a in (folder1\textfile1.txt) do set /a total+=%%a
echo %total% >folder1\textfile1.txt 
```

上面的代码会在 textfile1.txt 中写入 80

请告诉如何使用批处理文件对所有 300 个文本文件执行相同操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:20:07.147

```
@echo off
for %%F in (
  folder1\*.txt
  folder2\*.txt
) do (
  set /a total=0
  for /f "usebackq tokens=3 delims=," %%a in ("%%F") do set /a total+=%%a
  echo %total% >"%%F"
) 
```

要点：

1）您正在用包含总数的单行替换每个文件（多行）的内容。如果要保留原始数据并将总数附加到末尾，则需要`>>`改用：

```
echo %total% >>"%%F" 
```

2）batch可以计算的最大整数值为2,147,483,647。每个文件的总和必须小于或等于该数字，否则它将失败。如果您的总数可能超过该值，那么您将不得不使用其他语言。也许是 JScript、VBScript 或 PowerShell。

# ios - Xcode 方案：一个选择 iOS 或 Mac OS X 的项目

> ID：13201804
> 
> 赞同：2
> 
> 时间：2012-11-02T19:28:56.567
> 
> 标签：ios, xcode, macos, libraries, xcode-scheme

我正在尝试构建一个库以包含在其他 iOS/Mac OS X 项目中。我目前有两个独立的项目，我在它们之间切换来构建库。我想要一个项目和两个不同的方案，以便我团队中的另一个人可以更改方案并获得他们想要的那种库。我想避免在需要时手动将新文件单独添加到每个单独的项目中。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:40:15.180

1.  打开你的 iOS 项目。
2.  从菜单栏中选择“文件”>“新建”>“目标...”。
3.  单击 OS X 部分中的框架和库。
4.  选择 Cocoa Library 目标。
5.  输入库的 OS X 版本的名称。它必须不同于 iOS 库名称。示例：“MyLibraryOSX”。
6.  也许将类型更改为静态。
7.  单击完成。
8.  在 Project Navigator 中选择您的项目本身。
9.  单击 TARGETS 部分中的新 OS X 库目标。
10.  单击构建阶段选项卡。
11.  打开编译源部分。
12.  请注意，Xcode 自动创建了一个`.m`与 OS X 库目标同名的文件。您可能希望从您的项目中删除它。
13.  将您的库源添加到“编译源”部分。

Xcode 通常会自动为新目标创建一个方案。如果你为这个项目关闭了“自动创建方案”，你需要选择产品>管理方案...并为新目标创建（或要求 Xcode 自动创建）方案。

# javascript - javascript类和对象

> ID：13201805
> 
> 赞同：0
> 
> 时间：2012-11-02T19:29:13.177
> 
> 标签：javascript

这可以用Javascript完成吗？我正在将一个 java wiki 页面转换为 javascript。我很确定应该使用 var 而不是 int 对吗？

```
class Sample extends Object {

 int ivar1;
 int ivar2; 

Sample(int i, int j) {
 ivar1 = i;
 ivar2 = j;

}

int emptyMethod() {}
...

for (int i = 0; i < maxLoops; i++) {
...
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:32:09.323

尝试查看**[原型](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)**或**[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)**。

来自[MDN（原型）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)：

> JavaScript 中的所有对象都是 Object 的后代；所有对象都从 Object.prototype Object.prototype 继承方法和属性， **尽管它们可能被覆盖**（除了具有空原型的对象，即 Object.create(null)）。例如，**其他构造函数的原型会覆盖构造函数属性并提供自己的** toString 方法。对 Object 原型对象的更改会传播到所有对象，除非受这些更改影响的属性和方法沿原型链被进一步覆盖。

许多人同意`Object`直接更改类型会导致问题，尤其是在链接其他库时。因此，通常最好使用闭包。

来自[MDN（闭包）：](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)

> Java 等语言提供了将方法声明为私有的能力，这意味着它们只能被同一类中的其他方法调用。
> 
> **JavaScript 不提供执行此操作的本机方式**，但可以**使用闭包模拟私有方法。**私有方法不仅对限制对代码的访问有用：它们还**提供了一种管理全局命名空间的强大方法，防止非必要方法使代码的公共接口混乱。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:31:47.640

```
function Sample(i, j) {
    this.ivar1 = i;
    this.ivar2 = j;

    this.emptyMethod = function() {};
}

var sample = new Sample(1, 2);

sample.ivar1; // 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:36:45.463

有多种方法可以松散地模仿这种行为。有几个库可以帮助您构建更多面向对象的 javascript，例如：

*   原型.js
*   骨干网.js
*   Angular.js

在一个松散的例子中使用`Prototypes`（不是原型框架）：

```
function Sample() {};
var i = new Sample();
var x = new Sample();    

Sample.prototype.init = function() {
    this.ivarA = "constant 1";
    this.ivarB = "constant 2";
}
Sample.prototype.set = function(i, j) {
    this.ivar1 = i;
    this.ivar1 = j;
}

//example of override
m.set = function(i, j) {
    this.ivar1 = i + j;
    this.ivar2 = i + i + j;    
}

i.init();
i.set("hey", "whats up?");
x.set(10, 5); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T19:55:22.880

```
// class Sample ...
// (including constructor)
function Sample (i, j) {

  this.ivar1 = i;
  this.ivar2 = j;

}

// ... extends Object
Sample.prototype = Object.create(Object.prototype);
// (the first Object is part of call, the second Object is the one from 'extend')

Sample.prototype.emptyMethod = function () {};
...

// Don't know where to put, probably error in original question:
// for (var i = 0; i < maxLoops; i++) {
// ... 
```

# c - POSIX 保证写入磁盘

> ID：13201808
> 
> 赞同：1
> 
> 时间：2012-11-02T19:29:22.413
> 
> 标签：c, file-io, io, posix, storage

据我了解，如果我想将数据同步到存储设备，我可以使用 fsync() 来刷新所有操作系统输出缓存......但显然它根本不能保证这一点，不像文档试图欺骗你，并且数据可能不会写入磁盘！

这对许多用途来说都不是很好，因为它可能导致数据损坏。如何使用 POSIX 库（如果可能，以可移植的方式）来保证数据已被写入（尽可能）并防止数据损坏？

有 fdatasync() 但它没有在 OSX 上实现，那么有没有更好、更便携的方法，还是必须在不同的系统上实现不同的代码？我也不确定 fdatasync() 是否足够好。

当然，在最坏的情况下，我可能会忘记这一点并使用使用 ACID 来存储数据的冗余数据库库。我不想要那个。

此外，我对如何确保截断和重命名操作确实完成感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T19:37:08.253

您正在寻找同步。有一个名为 sync 的程序和一个名为 sync 的系统调用（`man 1 sync`和`man 2 sync`分别）：

```
 #include <unistd.h>

   void sync(void);

DESCRIPTION
   sync() first commits inodes to buffers, and then buffers to disk. 
```

因此它将确保所有挂起的操作（截断、重命名等）实际上都写入磁盘。

`fsync`不声称刷新所有输出缓存，而是声称将对特定文件描述符的所有更改刷新到磁盘。它明确不确保更新目录条目（在这种情况下，需要在目录的文件描述符上调用 fsync）。

`fsyncdata`甚至更没用，因为它不会刷新文件元数据，而只会确保文件中的数据被刷新。

信任联机帮助页是个好主意。我不会说没有错误，但它们往往非常准确。

# mysql - MySQL 使用左连接的非常慢的查询

> ID：13201809
> 
> 赞同：2
> 
> 时间：2012-11-02T19:29:25.817
> 
> 标签：mysql, optimization, group-by, left-join

我有一个在相当大的数据集上运行的查询。
它*非常*缓慢...

我需要优化这个查询，不知道从哪里开始（除了索引）。

提前致谢！

```
SELECT d.distributor_id, 
d.first_name,
d.last_name,
d.sponsor_id,
COUNT(f.business_level) AS total_enrollments,
SUM(CASE WHEN UPPER(f.business_level) = 'EXECUTIVE' THEN 1 else 0 end)
    AS executive_enrollments,
SUM(CASE WHEN UPPER(f.business_level) = 'PERSONAL' THEN 1 else 0 end)
    AS personal_enrollments,
SUM(CASE WHEN UPPER(f.business_level) = 'PREFERRED CUSTOMER' THEN 1 else 0 end)
    AS preferred_customer_enrollments,
IFNULL(cf.commission_paid, 0) AS commission_paid,
IFNULL(cf.retention_earned, 0) AS retention_earned,
COUNT(df.order_type) AS total_autoships,
IFNULL(a.consecutive_streak, 0) AS autoship_streak,
IFNULL(a.enrollment_date, "Not Enrolled") AS autoship_enrollment,
d.highest_rank
    FROM warehouse.distributor d
        LEFT JOIN warehouse.enrollment_detail_fact f ON d.distributor_id = f.distributor_id
        LEFT JOIN warehouse.country c ON d.country = c.name
             AND c.country_id = 185
        LEFT JOIN warehouse.autoship a ON d.distributor_id = a.distributor_id
        LEFT JOIN warehouse.order_detail_fact df ON d.distributor_id = df.distributor_id
            AND UPPER(order_type) = 'AUTOSHIP'
            AND date_id IN(SELECT date_id FROM warehouse.date
                WHERE DATE BETWEEN '2012-10-10'
                AND '2012-10-11' ORDER BY date DESC)
        LEFT JOIN warehouse.commission_detail_fact cf ON d.distributor_id = df.distributor_id
        LEFT JOIN db.commission_level_type_details cl ON d.highest_rank = cl.name
WHERE d.active = 1               
    AND cl.commission_level_type_detail_id IN (23)
GROUP BY distributor_id
ORDER BY first_name; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:47:04.087

我会尝试将这个 WHERE 子句移到 JOIN 子句中：

```
AND cl.commission_level_type_detail_id IN (23) 
```

将其添加到此 JOIN 子句：

```
LEFT JOIN db.commission_level_type_details cl ON d.highest_rank = cl.name 
```

对于这个 JOIN 子句：

```
LEFT JOIN warehouse.order_detail_fact df ON d.distributor_id = df.distributor_id
            AND UPPER(order_type) = 'AUTOSHIP'
            AND date_id IN(SELECT date_id FROM warehouse.date
                WHERE DATE BETWEEN '2012-10-10'
                AND '2012-10-11' ORDER BY date DESC) 
```

我会将此数据结构***AND UPPER(order_type) = 'AUTOSHIP')***规范化为“order_type”表，并改用索引整数 ID。效率更高。

我还将对 date_id 进行非规范化（不知道为什么要对记录的日期进行规范化，也许我错过了一些业务需求）。只需将日期放在同一个表中，对其进行索引，然后让 MySQL 做它最擅长的事情。WHERE 子句中嵌入的 SELECT 未编入索引，因此 MySQL 无法以最佳方式处理该数据。

事实上，我会规范化 JOIN 和 WHERE 子句中不是 INTEGER 的所有内容。将它们转换为整数 ID。这将大大降低性能成本。根据经验，我从不要求数据库服务器对字母数字索引执行搜索。

当我想到它们时，我会编辑和发布更多内容。

希望这可以帮助。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:34:20.317

我不知道你为什么说“除了索引”。那将是我开始寻找优化的第一个地方。您用于连接、WHERE 子句过滤、分组和排序的每个字段都应该有一个索引。您还应该明确定义与 GROUP BY 和 ORDER BY 中使用的字段关联的表。

你应该消除这样的事情

```
UPPER(order_type) = 'AUTOSHIP' 
```

您将这些值用于连接、过滤、分组的位置，因为这将阻止使用字段上的索引。在 SELECT 语句中使用这些 UPPER 函数调用时，您也会损失一些性能（这些在性能方面并不昂贵，因为它们会导致您不使用索引）。如果您的数据经过适当的清理，则您不需要这些。

您可能还应该通过仅在日期表上进行内部连接并将日期范围过滤器添加到主 WHERE 子句来消除该子选择。同样，在其他情况下，您使用的过滤器可能应该作为连接字段进入您的 WHERE 子句。如果只是为了查询的可读性，我只会在适当的键上加入表，并将所有过滤逻辑放在 WHERE 子句中。

看起来您正在处理星型模式数据仓库，因此即使在优化索引并删除子选择之后，如果您有大量数据，您仍然可能会遇到缓慢的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:21:32.300

### 无用的 ORDER BY 子句

显然，这个`ORDER BY`子句完全没用：

```
AND date_id IN(SELECT date_id FROM warehouse.date
    WHERE DATE BETWEEN '2012-10-10'
    AND '2012-10-11' ORDER BY date DESC)
                  -- ^^^^^^^^^^^^^^^^^^ remove this! 
```

我不确定MySQL是否足够聪明来优化它，所以这可能是一些改进......

### 基于 VARCHAR 而非 INT 的 JOIN 谓词

这些连接谓词：

```
LEFT JOIN warehouse.country c ON d.country = c.name 
```

...如果他们是：他们会表现得更好：

```
LEFT JOIN warehouse.country c ON d.country_id = c.id 
```

### 还有最重要的问题：误用 LEFT JOIN 会导致笛卡尔积

你肯定在你的关系`f`和你的关系之间有一个笛卡尔积`df`，因为你错误地认为`LEFT JOIN`他们都是`d`。这意味着，您的查询不仅速度慢，而且可能还*错误*。例如：

```
COUNT(df.order_type) AS total_autoships,
-- [...]
LEFT JOIN warehouse.order_detail_fact df ON d.distributor_id = df.distributor_id
        AND UPPER(order_type) = 'AUTOSHIP'
        AND date_id IN(SELECT date_id FROM warehouse.date
            WHERE DATE BETWEEN '2012-10-10'
            AND '2012-10-11' ORDER BY date DESC) 
```

......可能是错误的。就其本身而言，`COUNT`可能仍然是正确的，但由于您加入了其他 1:N 关系，这`COUNT`可能会爆发为不切实际的值。最好写：

```
COUNT((SELECT df.order_type
       FROM   warehouse.order_detail_fact df
       WHERE  d.distributor_id = df.distributor_id
       AND    ...)) 
    AS total_autoships 
```

或`JOIN`直接聚合值：

```
df.total_autoships AS total_autoships,
-- [...]
JOIN ( 
    SELECT COUNT(order_type) AS total_autoships 
    FROM   warehouse.order_detail_fact 
    WHERE  d.distributor_id = distributor_id
    AND    ...
) df 
```

# android - 如何区分向下滑动和向下滚动

> ID：13201812
> 
> 赞同：3
> 
> 时间：2012-11-02T19:29:40.250
> 
> 标签：android, scroll, swipe

设备在向下滑动（fling）和向下滚动列表视图时出错。有没有人遇到过这个问题？

谢谢。

# visual-c++ - VC++ 2012 出于某种原因跳过 glew 库

> ID：13201817
> 
> 赞同：1
> 
> 时间：2012-11-02T19:30:24.287
> 
> 标签：visual-c++, linker, visual-studio-2012, external

我正在尝试在 vc++ 中链接 glew32.lib，但我得到了未解决的外部问题。我将显示进度设置为详细以查看发生了什么，我得到以下输出：

> ...
> 在 OpenGL32.lib(OPENGL32.dll) 中引用
> 加载的 OpenGL32.lib(OPENGL32.dll)
> 搜索 C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\lib\glew32.lib：
> 搜索 C:\Program文件 (x86)\Windows Kits\8.0\lib\win8\um\x86\kernel32.lib：
> 发现 _ *imp* _GetLastError@0
> 在 main.obj 中引用
> ...

所以在我看来它只是完全跳过了.lib？在输出的末尾，它告诉我 glew32.lib 未使用。我包括标题，除了未解决的外部问题之外没有其他错误。为什么它跳过链接这个文件？

# sharepoint - Sharepoint Cracl 规则 - 排除除一个列表之外的所有内容

> ID：13201818
> 
> 赞同：1
> 
> 时间：2012-11-02T19:30:31.303
> 
> 标签：sharepoint, web-crawler

我有一个简单的问题，但解决方案似乎很尴尬，或者我可能遗漏了一些东西。

我的 Sharepoint 站点中有一堆列表和文档库，我想从我的搜索中排除所有内容，但一个特定列表中的所有项目除外。所以我试图变得聪明，按以下顺序创建了一些爬网规则：

```
1\. http://domain/en/Lists/ListName/* - Include<br />
2\. http://* - Exclude<br /> 
```

我假设抓取引擎遵守规则的顺序，并且第一场比赛是最后一场比赛？

# javascript - 跨越内容窗格内的 Dojo 选项卡容器（href）

> ID：13201819
> 
> 赞同：1
> 
> 时间：2012-11-02T19:30:31.677
> 
> 标签：javascript, dojo, href, contentpane

`ContentPane`我的主页上有一个道场。我使用它的`href`属性（作为 iframe 替代）来加载不同的 php 文件，具体取决于主页上的一些数据。这个其他 php 文件包含`TabContainer`.
我的问题是 TabContainer 仅在我在`pixels`. 我想设置高度和宽度`percentages`。有谁知道如何做到这一点？

**主页：**

```
<div data-dojo-type="dojox/layout/ContentPane" data-dojo-props="href:'myTabs.php', splitter:false" style="width: 100%; height: 100%;"></div> 
```

**myTabs.html：**

```
<div data-dojo-type="dijit/layout/TabContainer" style="width:500px;height:600px;">
...
</div 
```

# python - Python 3 静态成员

> ID：13201822
> 
> 赞同：7
> 
> 时间：2012-11-02T19:30:39.793
> 
> 标签：python, python-3.x

我正在努力实现以下目标：

```
class A:
    username = None
    username = get_username()
    def get_username(self):
        if username is None:
            try:
                uname = os.environ["USER"]
            except:
                printf("Couldn't find a user name")
            return uname
        return username 
```

不知道如何实现这一点。我确定我错过了一些“自我”。前缀，但这是我第一次使用 python 和静态成员。

从某种意义上说，我想要一个包含一些成员和函数的类来计算这些成员的值，但我不想重新计算。我也希望这些是静态函数和数据成员。

问题是函数“username = get_username()”行尚未定义。如果我将用户名放在函数之后，那么它不是

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T19:39:44.153

首先，如果您只是要在之后立即重新分配它，则没有理由分配`None`给它。`username`

其次，如果你希望方法是静态方法，你不能给它一个`self`参数。如果你想要一个真正的静态方法，你必须明确声明它。

```
 @staticmethod
    def get_username():
        if username is None:
        ... 
```

否则，您需要一个类 (that `self`) 的实例来调用它，而您还没有。

在 Python 3 中，任何常规方法在类上调用时都像静态方法一样，在实例上调用时就像实例方法一样。所以，如果你确定你永远不想调用`a.get_username()`实例`a`，你可以跳过装饰器。但是您仍然需要摆脱`self`参数。

我认为您*实际上*想要做的是使用类变量来记忆静态方法的结果。你不能这样做，但是你可以使用一个类变量来记忆一个*类*方法的结果，这可能已经足够接近了。看起来像这样：

```
class A:
    username = None
    @classmethod
    def get_username(cls):
        if cls.username is None:
            try:
                uname = os.environ["USER"]
            except:
                print("Couldn't find a user name")
            else:
                cls.username = uname
        return cls.username 
```

另一方面，没有充分的理由 username 必须是类成员。您可以通过向函数添加成员、传递可变默认变量或以不需要感染类的各种其他方式来记忆，并允许您`get_username`作为静态方法而不是类方法离开。

但实际上，最好的解决方案是在 PyPI、ActiveState 的配方列表等中找到一个记忆库，这样你就可以这样写：

```
class A:
    @memoize
    @staticmethod
    def get_username():
        try:
            return os.environ["USER"]
        except:
            print("Couldn't find a user name")
            return None 
```

同样，`@staticmethod`如果您确定没有人会尝试创建`A`并调用`get_username`它的实例，则可以放弃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:47:03.000

如果您不想失去引用 A.username 的能力，可以使用带有一点元类的类属性：

```
class A(type):
    def __new__(cls, name, bases, attrs):
        # this allows B().username to also work
        attrs['username'] = property(lambda s: s.__class__.username)
        return type.__new__(cls, name, bases, attrs)
    @property
    def username(self):
        if not hasattr(self, '_username'):
            self._username = 'bar'
        return self._username

class B(object):
    __metaclass__ = A

print B.username
print B().username 
```

# sql-server - SP_SEND_DBMAIL @QUERY 在电子邮件中插入换行符

> ID：13201826
> 
> 赞同：4
> 
> 时间：2012-11-02T19:30:50.150
> 
> 标签：sql-server, sql-server-2008, tsql

我使用 sp_send_dbmail 中的 @query 边界发送一封带有警告列表的电子邮件（警告由 @query 边界返回）。@query 边界在电子邮件中作为文本列出。从@query 边界返回并显示在电子邮件中的所有记录之间都有一个换行符。IE。如果我有 4 条记录，由于换行符，我将有 8 行。

如何关闭断线？我阅读了 sp_send_dbmail 的 msdn 文章，但它没有提到任何可以更改的会影响换行符的属性。

代码：

```
 BEGIN
    EXEC MSDB.DBO.sp_send_dbmail 
        @PROFILE_NAME = 'Alerts',
        @RECIPIENTS = @MAIL,
        @SUBJECT = @NEWSUBJECT,
        @BODY = @NEWBODY,
        @QUERY =
            'SET NOCOUNT ON
            DECLARE @HEXSTRING AS VARCHAR(100)
            SET @HEXSTRING = (SELECT HEXADECIMAL_STRING FROM mydb.dbo.statusupdates
                WHERE MACHINE_ID = ''1111'' AND DATEDIFF(MI, TIME_DATE_RECEIVED, GETDATE()) <= 60)
            SELECT [Warning_Description] FROM mydb.DBO.BINARYTOTABLE(mydb.DBO.HEXTOBINARY(@HEXSTRING)) AS ABB1
            JOIN mydb.DBO.WarningMessages  ON mydb.DBO.WarningMessages.[Bit_Offset] = ABB1.BITPLACE
            WHERE BITVALUE = 1 AND ALERT_LEVEL = ''WARNING''',
        @QUERY_RESULT_HEADER = 0,
        @ATTACH_QUERY_RESULT_AS_FILE = 0;
    END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-15T11:04:30.527

旧帖子，但可能值得检查 sp_send_dbmail 的 @query_result_width 参数

请参阅[http://technet.microsoft.com/en-us/library/ms190307(v=sql.110).aspx](http://technet.microsoft.com/en-us/library/ms190307(v=sql.110).aspx)

如果列中的数据宽度超过 @query_result_width（默认为 256），将添加一个新行。

史蒂夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:27:47.237

我一直使用 CHAR(13)+CHAR(10) 在 tsql 中创建换行符。您必须将其替换为 ' '。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T21:38:01.217

我最终将所有内容都放入了 SP_SEND_DBMAIL 的 @BODY 参数中。来自 SELECT 语句的查询结果可以与常规文本连接成一个字符串，您可以使用 HTML 来格式化结果文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T20:10:34.873

试试这个，看看你得到了什么......

```
 @query = REPLACE(@query,CHR(13),'') 
```

# java - Java Try-Catch - 它是如何执行的？

> ID：13201829
> 
> 赞同：4
> 
> 时间：2012-11-02T19:31:02.527
> 
> 标签：java, try-catch

我只是想知道 Java VM 对 Try-Catch 做了什么。它是如何执行的？

我最好的猜测是，它就像一个 Linux 系统，在安装某些东西时会进行测试运行，如果没有发现错误，则询问用户是否要继续。在 Try-Catch 的情况下，它是否会进行测试运行，如果一切正常，是否执行它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:32:38.487

```
try
{
//execute your code
}catch(Exception e)
{
//Log message 
//IF you don't want to continue with the logic inside method, rethrow here.
}finally{
 //Ir-respective of what the status is in above cases, execute this code.
}
//Continue with other logic in the method 
```

.这在您想确定部分代码需要执行（或）不在异常情况下的情况下很有用。

要了解有关 try-catch 在 java 中如何工作的更多信息，请阅读本[教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/try.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T19:34:27.097

它比这简单得多 - 如果 try 子句中包含的任何子句产生错误，则将执行 catch 子句中的代码（对应于该错误 - 一次尝试可以有多个 catch）将被执行。没有办法提前知道某个特定子句是否会失败，只能在错误发生后尝试恢复。

如果你有十个子句并且最后一个抛出错误，那么前 9 个执行的修改将不会被“还原”！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:35:37.837

可以给出一些程序无法处理的意外结果的代码被保存在 try 块中，并且为了处理/捕获程序的意外崩溃，我们使用 catch 块。我们声明代码可以抛出的异常类型

例如：

```
 int a;
 try {
  a=1/0;//program wil crash here
 }catch(Exception e){
  System.out.println("Division by zero ");//handling the crash here
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T19:51:04.867

它开始正常执行，无需任何检查。如果发生任何异常，它将跳出子句（就像`break`在循环中），并立即执行`catch`，如果没有发现异常，它将跳过 catch 子句。

该`finally`子句确保无论是否抛出异常都会调用它。一个实际的例子是从文件或网络中读取，并关闭流，无论是否抛出异常。

# azure - 自动过期孤立订阅 (Azure ServiceBus Messaging SubscriptionClient)

> ID：13201831
> 
> 赞同：9
> 
> 时间：2012-11-02T19:31:16.687
> 
> 标签：azure, publish-subscribe, servicebus, orphaned-objects

我想到的场景是这样的：服务总线用于实例到实例的通信，因此每个服务实例的订阅都是唯一的。最终结果是，如果一个实例没有正常关闭，它的订阅不会被删除。

当服务实例“死亡”并重新启动时，订阅的先前内容无关紧要，可以丢弃。

那么，有没有办法为服务总线订阅设置“生存时间”或模拟类似的东西，而不必求助于一些自定义的孤儿检测机制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-17T17:01:49.513

从 Azure SDK 2.0 开始，这可以按预期工作。

此外，与其他报告相反，在我的测试中，只要有一个挂起的接收者正在监听该订阅，订阅就不会被删除。

```
var description = new SubscriptionDescription(topicPath, subscriptionId);
description.AutoDeleteOnIdle = TimeSpan.FromSeconds(600);
namespaceManager.CreateSubscription(description); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T07:12:08.897

该确切功能已在下一个版本中积压。也就是说，在 azure 中，您可以使用角色环境中的实例 ID 来创建订阅的名称，从而让重新启动的实例重用订阅。实例 ID 名称是稳定的。

编辑：该功能是 AutoDeleteOnIdle [https://docs.microsoft.com/en-us/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription](https://docs.microsoft.com/en-us/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-14T21:15:05.907

我遇到了完全相同的问题，预览解决它于 2013 年初发布：http: [//msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.subscriptiondescription.autodeleteonidle.aspx](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.subscriptiondescription.autodeleteonidle.aspx)

它非常易于使用（参见下面的示例）。不幸的是，如果在 AutoDeleteOnIdle 期间没有发布消息，订阅似乎会超时，即使您有一些等待消息的进程（根据[Azure Servicebus AutoDeleteOnIdle](https://stackoverflow.com/questions/16971443/azure-servicebus-autodeleteonidle)）。

```
NamespaceManager manager=NamespaceManager.CreateFromConnectionString(serviceBusConnectionString);
if(!manager.SubscriptionExists(topic,subscriptionName))
{
    manager.CreateSubscription(new SubscriptionDescription(topic,subscriptionName) {
        AutoDeleteOnIdle=TimeSpan.FromDays(2)
    });
} 
```

# android - 如何从一个项目创建多个 apk？

> ID：13201832
> 
> 赞同：4
> 
> 时间：2012-11-02T19:31:16.250
> 
> 标签：android, apk

我有一个需要创建多个 apk 的 android 项目。每个 apk 之间的唯一区别是包名称（例如 com.my.package.name）和应用程序字符串名称，因此我可以在一台设备上安装应用程序的多个实例。有没有更好的方法来做到这一点？我考虑过创建一个库项目，但我认为可能有更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T08:50:25.073

您可以将主代码放入库中并构建多个生成多个 APK 的同级项目：

我对此进行了测试，比我最初想象 **的要容易得多：** [https ://stackoverflow.com/a/9971543/305135](https://stackoverflow.com/a/9971543/305135)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:02:16.330

图书馆项目是这样做的正确方法。您创建并处理库项目，并且每个版本都有一个项目，这取决于库项目。请记住，您需要为每个项目提供正确的 Android 清单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T22:25:43.230

您可以试用新的 Android 构建系统。这里有一些链接

*   [http://tools.android.com/tech-docs/new-build-system](http://tools.android.com/tech-docs/new-build-system)
*   [http://tools.android.com/tech-docs/new-build-system/build-system-concepts](http://tools.android.com/tech-docs/new-build-system/build-system-concepts)
*   [http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system](http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system)

您可以自定义以下属性：

*   minSdkVersion
*   目标SDK版本
*   版本代码
*   版本名称
*   包名（覆盖清单中的值）
*   ETC..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-14T09:34:43.987

您可以在应用级别的 gradle 中使用 productFlavors。

```
 flavorDimensions "tier"
    productFlavors {

        dev
                {
                    dimension "tier"
                    buildConfigField "String", "URL", "\"http://glapp/demo.php\""
                    buildConfigField "boolean", "ENABLE_DEBUG", "false"
                    versionName = android.defaultConfig.versionName + " dev"
                    applicationId = "com.abc.glnewapp.dev"
                    resValue "string", "app_name", "GL Demo"
                }
        prod
                {
                    dimension "tier"
                    buildConfigField "String", "URL", "\"http://glapp/live.php\""
                    buildConfigField "boolean", "ENABLE_DEBUG", "false"
                    applicationId = "com.abc.glnewapp.prod"
                    resValue "string", "app_name", "GL Live"
                }

    } 
```

然后选择构建变体以根据变体构建 apk 您可以根据需要放置许多面粉（不同的 apk）。

[![在此处输入图像描述](../Images/4dfa1999a95b3a318453fd7d377e6873.png)](https://i.stack.imgur.com/XjrXZ.png)

您可以通过在 src 目录下的 falour name 文件夹中添加相同的 res 结构来更改应用程序图标和其他可绘制对象。此外，如果您发现任何与 google json 相关的问题，那么只需将 google json 文件复制到 src->productflavor

欲了解更多信息，请[访问](https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.ProductFlavor.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T19:44:14.740

您不能以编程方式更改包名称。因此，唯一的解决方案是手动更改它并创建**apk**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T20:15:27.050

要更改包名称，您可以执行以下操作：

您需要复制该项目。右键单击一个，选择“Android工具->重命名应用程序包”

希望这有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T22:26:53.423

我实际上使用[apktool](http://code.google.com/p/android-apktool/)来反编译 apk，然后使用一些 Perl 脚本编辑 smali 文件以更改包名称。

# html - 修改 tumblr 主题？

> ID：13201833
> 
> 赞同：4
> 
> 时间：2012-11-02T19:31:18.157
> 
> 标签：html, css, themes, tumblr

我有这个主题，但有一个问题：

我在“设置点击链接”中添加了照片的 URL 链接，但是当我访问我的博客并单击照片时，它不会将我定向到源 URL。（它仅在我浏览 tumblr 的仪表板并单击照片时指示，但在访问我的博客并单击照片时不会指示 - 否）。我的博客是：colorinspirations.tumblr.com

例如我检查的这个博客（http://color-fantasia.tumblr.com/）有这个功能。此外，当我单击我的博客名称（COLOR INSPIRATIONS）时，它不会做任何事情（例如指向主页）。

因此，如果您能提供帮助，请：

1）“设置点击链接”和“内容来源网址”要一致。（我使用 Firefox 的“Tumblr Post”扩展，它只有“设置点击链接”的选项。当我输入“设置点击链接”的信息时，我需要“内容源 URL”自动填写“设置点击链接”的URL。）

2）当我点击照片时，它应该引导我到“源链接”（它应该与“设置点击链接”相同）

3) 点击THE BLOG 的NAME 时，应该指向主页。

如果您能提供帮助，我将非常非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:28:42.360

## 将网站名称链接到首页

要将您的网站标题与首页链接，请替换

```
<div id="nameBlog">
    {block:IfHeaderImageImage}
        <img id="imagetitle" src="{image:Header Image}">
    {/block:IfHeaderImageImage}

    {block:IfNotHeaderImageImage}
        <h1>{Title}</h1>
    {/block:IfNotHeaderImageImage}
</div> 
```

和

```
<div id="nameBlog">
    {block:IfHeaderImageImage}
        <a href="/" rel="home"><img id="imagetitle" src="{image:Header Image}"></a>
    {/block:IfHeaderImageImage}

    {block:IfNotHeaderImageImage}
        <h1><a href="/" rel="home">{Title}</a></h1>
    {/block:IfNotHeaderImageImage}
</div> 
```

## 将帖子链接到来源

有关如何在主题中链接内容源的文档，请参阅[http://www.tumblr.com/docs/en/custom_themes#content-sources 。](http://www.tumblr.com/docs/en/custom_themes#content-sources)

该变量`{SourceURL}`将替换为您的源的 URL。所以你需要`<a href="{SourceURL}">…&lt;/a>`在你的内容周围添加应该链接的内容。（可能）将此内容包装在 中`{block:ContentSource} … {/block:ContentSource}`，这意味着只有在存在内容源时才会处理它。

如果您只想在帖子底部链接源（如果存在，带有源图标），您可以[使用](http://staff.tumblr.com/post/1059624418/content-attribution)：

```
{block:ContentSource}
    <a href="{SourceURL}">
        {lang:Source}:
        {block:SourceLogo}
            <img src="{BlackLogoURL}" width="{LogoWidth}" height="{LogoHeight}" alt="{SourceTitle}" />

        {/block:SourceLogo}
        {block:NoSourceLogo}
            {SourceTitle}
        {/block:NoSourceLogo}
    </a>
{/block:ContentSource} 
```

# jquery - 测试选项卡的存在

> ID：13201837
> 
> 赞同：0
> 
> 时间：2012-11-02T19:31:20.780
> 
> 标签：jquery

我正在测试 jQuery 中是否存在动态选项卡。如果存在，请选择它，如果不存在，请创建它。

这在 FF、Chrome 等中 100% 有效。我是 jQuery 新手，所以我正在努力使这个 IE 8+ 兼容。

```
 // Does the tab already exist?
    var checkName = satrk;
    var tabExists = false;
    $('#tabs ul li a').each(function(i) {
        if(this.text == checkName) {
            tabExists = true;
        }
    });

    // React to existance:
    if(!tabExists){
        $("#tabs").tabs("add","details.cfm?satrk="+satrk,satrk);
        $("#tabs").tabs("select", satrk); // select tab by index
    }else{
        $("#tabs").tabs("select", satrk); // select tab by index
    } 
```

我将标签索引传递给检查。

建议？

我在别处读到“一个 a 元素在 IE 中没有文本属性”。但这还不足以让我纠正我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:35:30.783

尝试：

```
if($(this).text() == checkName) { 
```

我认为在您的使用中，`this.text`是`text`DOM 对象的属性。如果你将 DOM 对象包装在 jQuery ( `$(this)`) 中，那么它应该有一个`.text()`方法可以让 jQuery 整理跨浏览器的内容，并返回你想要的文本。

# python - BeautifulSoup - 提取号码

> ID：13201840
> 
> 赞同：0
> 
> 时间：2012-11-02T19:31:44.357
> 
> 标签：python, beautifulsoup

我正在尝试学习如何抓取网络，但在让我的代码正常工作时遇到了一些问题。我想从下面的代码中提取的数字是 77.80。我遇到的问题是找到足够独特的东西来找到信息（地点）。你能帮我写正确的代码吗？提前致谢！

```
 </td>

            <td class="small">&nbsp;&nbsp;</td>

                    <td align="center" nowrap  valign="center" class="small">
                    <a alt="Utvald" class="small" href="javascript:QT('/se/skandia/funds/chosen.aspx?tab=5&cid=0P0000T35O&lang=SV&curiso=SEK&country=SE&clientattributes=8&lastpage=Sök fond&LastPageURL=/se/skandia/quickrank/index.aspx?tab=RSLTS|lang=SV|univ=SE1|country=SE|curiso=SEK|mec=|cat=-1|search=|sortby=Custom_4|sortorder=ASC|PageNo=1|Firstletter=','0P0000T35O','600')"  onmouseout="status=''; return true"><img src="../read/im/sigillsvartsmall_FFFFFF.gif" border="0" alt="Utvald av Skandia" height="12" width="9"/></a>
                </td>

            <td class="small">&nbsp;&nbsp;</td>

                <td align="right" nowrap  valign="top" class="small">
                    77.80                           
                </td>

            <td class="small">&nbsp;&nbsp;</td>

                <td align="right" nowrap  valign="top" class="small">
                    <!--<img src="../read/im/valueSEK.gif" align="texttop" height="10" width="22">-->
                    SEK
                </td>

            <td class="small">&nbsp;&nbsp;</td>

                <td align="right" nowrap  valign="top" class="small">
                    1.4
                </td>

            <td class="small">&nbsp;&nbsp;</td>

                <td align="right" nowrap  valign="top" class="small">
                    0.5
                </td>

            <td class="small">&nbsp;&nbsp;</td>

                <td align="right" nowrap  valign="top" class="small">
                    2.7
                </td>

            <td class="small">&nbsp;&nbsp;</td>

                <td align="right" nowrap  valign="top" class="small">
                    6.6
                </td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:38:05.977

这是查找所需文本的方法。这只是寻找第一个`td`有`class='small'`和`valign='top'`。

```
soup = BeautifulSoup(s)
tds = soup.find_all('td', attrs={'class': 'small', 'valign': 'top'})
the_td = tds[0].text.strip() 
```

# javascript - JavaScript 自调用函数

> ID：13201842
> 
> 赞同：1
> 
> 时间：2012-11-02T19:31:52.767
> 
> 标签：javascript, self-invoking-function

> **可能重复：**
> [“(function ( ) { } ) ( )” 和 “(function ( ) { } ( ) )” 在 JavaScript 中的功能是否相同？](https://stackoverflow.com/questions/5938802/are-function-and-function-functionally-equal-i)

这两者有区别吗？

```
(function () {}()); 
```

和

```
(function () {})(); 
```

对于在全局范围内构建对象，您对此有何看法：

```
;(function () {
            'use strict';

            this.menu = (function () {
                var version = "1.2.111",
                    someFunction = function() {
                        console.log("Version: " + version);
                        return version;
                    };
                return {
                    getVersion: someFunction
                };
            })();

            this.someObject = (function () {
                var privateVar = "1234",
                    privateFunction = function () {
                        console.log("Private Variable: " + privateVar);
                        return privateVar;
                    };

                return {
                    publicFunction: privateFunction
                };
            })();

        }).apply(window.saif = window.saif || {}); 
```

# android - 适用于 Android 的 Gamemaker 屏幕控制

> ID：13201854
> 
> 赞同：0
> 
> 时间：2012-11-02T19:33:10.467
> 
> 标签：android, sdk

我一直在游戏制造商上开发一些游戏，例如平台游戏和滚动射击游戏。我最近获得了 GameMaker Studio，想知道如何设置屏幕控制。现在我只想设置一个跳转按钮。如果这有任何帮助，我知道如何设置键盘控件。

我在 Google 上搜索过教程，但没有找到。任何人都可以指出我的教程或其他东西以供参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T16:18:07.873

It's called virtual keys, you can read the GameMaker: Studio documentation for virtual keys here: [http://docs.yoyogames.com/source/dadiospice/002_reference/mouse,%20keyboard%20and%20other%20controls/virtual%20keys/index.html](http://docs.yoyogames.com/source/dadiospice/002_reference/mouse,%20keyboard%20and%20other%20controls/virtual%20keys/index.html)

or you can watch this tutorial on youtube: [http://www.youtube.com/watch?v=wes7V-fOqD0](http://www.youtube.com/watch?v=wes7V-fOqD0)

Hope this helps..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-03T20:09:42.593

为 android 创建一个按钮：

1.  创建一个你将按下跳跃的精灵
2.  为该精灵创建一个对象
3.  创建左键按下事件
4.  添加代码并编写您想要执行的任何操作

一个例子是你正在使用物理并且你想跳跃

```
 with(obj_player){
        if (place_meeting(x,y+1,obj_platform){
phy_apply_impulse(enter figures to jump more on help screen)}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T21:21:33.530

Game Maker 中有一些东西，例如*虚拟屏幕按键*，可以模拟 PC 上的按键操作。您可以在 Game Maker 的帮助文件中查找它们。希望这可以帮助。

# magento - Fishpig 的 Magento WP 集成——WP 不使用 Magento 主题/包

> ID：13201856
> 
> 赞同：0
> 
> 时间：2012-11-02T19:33:23.360
> 
> 标签：magento, magento-1.7

我已经成功安装了 Fishpig 的 Magento WordPress 集成扩展。我按照您通过 Magento Connect 安装的说明进行操作，没有任何问题。顺便说一下，所有这些都在没有启用缓存或编译的开发服务器上。

Magento 购物车安装在 webroot 目录中，WordPress 位于子目录“wp”中，如 Fishpig 的说明中所述。完整集成博客路径是 /blog。

**问题：**

当我访问博客页面时，它没有使用 Magento 主题。我什至将它设置为使用相同的布局（与 CMS 的主页相同） 我们有一个自定义的 Magento 主题。也许我们在 Magento 主题方面做得不正确，导致 Fishpig 的扩展无法正常工作。屏幕截图最终会出现，但主机（DataGram）由于市中心的洪水而关闭。今天应该有希望回来。

为了澄清...... WordPress 正在使用自己的数据库。在商店的管理面板-> WordPress 选项卡中，我设置了完全集成并将路径设置为“wp”，博客路径为博客。

所以，现在如果我访问 example.com，您就在商店中，如果您访问 example.com/blog，那么您就在完全集成的博客中。

底线是它似乎在管理面板中配置得很好。我不是从 wp 目录（IE：example.com/wp）请求博客页面，而是从完全集成的页面（example.com/blog）请求。

**我们的问题可能与此人正在经历的类似：**

[Magento - FishPig 集成 - 没有为 /blog 获取正确的模板](https://stackoverflow.com/questions/12888221/magento-fishpig-integration-not-getting-correct-template-for-blog)

祝大家周末愉快！

最好的祝福，

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:17:05.293

Huzzah 看起来我的工作正常了 :-)

罪魁祸首是这个文件：

```
"app/design/frontend/default/eboost/layout/wordpress.xml" 
```

^^ 指向错误的模板文件名。更正了，很高兴。修改后的行号为 66。

**有趣的是，在该 XML 文件的顶部，它声明：**

"

*   选项 1 - local.xml（推荐）

*   在自定义主题的布局文件夹中创建一个名为 local.xml 的文件。然后，您可以通过以下方式更改布局

*   使用相关的布局句柄。这允许您保持此文件完整并接收新功能
*   升级扩展时。

*   选项 2 - 复制此文件

*   将此文件及其内容复制到自定义主题布局文件夹中名为 wordpress.xml 的新文件中。
*   每次升级时，您都需要检查您的文件副本和
*   app/design/frontend/base/default/layout/wordpress.xml 中的副本以进行更改并合并您找到的任何内容”

现在，正如我在原始帖子中所述，我使用他们的说明安装了 FishPig 扩展：http: [//fishpig.co.uk/wordpress-integration/docs/installation-and-configuration.html](http://fishpig.co.uk/wordpress-integration/docs/installation-and-configuration.html)

^^ 因此我不知道为什么使用选项 2 设置它。 wordpress.xml 在我们主题的布局目录中。

.

.

.

我觉得我也应该说明我所做的其他更改，即使它似乎并没有促成它的工作。只是为了完整性：

[-- 将子目录 /wp 重命名为 /wordpress，并使用http://interconnectit.com/124/search-and-replace-](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)将数据库中对 dev.eboost.com/wp 的所有引用更改为 dev.eboost.com/wordpress-[对于-wordpress-数据库/](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)

-- 从 /wordpress 文件夹中删除 .htaccess

所以底线看起来它工作正常。我们现在准备重新设计网站。

- 乔治

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:38:19.193

看看这个。 [http://www.wellicious.com/gbren/wellblog](http://www.wellicious.com/gbren/wellblog)

我也使用了 Fishpig，它正在工作。

访问博客页面是什么意思？您是否从 wordpress 目录请求博客页面？如果是这样，它不会改变它的设计。

您必须在您的商店中请求博客。

# javascript - 幻灯片背景标签

> ID：13201857
> 
> 赞同：0
> 
> 时间：2012-11-02T19:33:27.883
> 
> 标签：javascript, jquery

当用户加载我的页面时，我想让背景颜色为白色，然后在 5 秒后淡出颜色并淡入图片。5 秒后再次淡入另一张图片，这样您就可以在我的内容后面的背景中创建某种幻灯片放映。这就是我现在拥有的，但它不起作用，有什么帮助吗？

```
$(document).ready(function() {
setTimout(function() {
    $('body').css("background-image","url('../img/background/1.jpg')").fadeIn(1000)
},5000);

function repeat() {
    $('body')
        .delay(5000).css("background-image","url('../img/background/2.jpg')").fadeIn(1000)
        .delay(5000).css("background-image","url('../img/background/3.jpg')").fadeIn(1000)
        .delay(5000).css("background-image","url('../img/background/1.jpg')").fadeIn(1000);
}
window.setInterval(repeat, 18000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:38:52.373

以下是语法错误：

```
setTimout(function() {
$('body').css("background-image","url('../img/background/1.jpg')").fadeIn(1000)
},5000); 
```

应该

```
setTimeout(function() {
$('body').css("background-image","url('../img/background/1.jpg')").fadeIn(1000)},5000); 
```

它缺少setTimeout中的**e**

我也不相信您将能够淡入背景图像，除非您将其设置在 DIV 上，除非您淡出身体。我已将您的背景更换器重新编写为更少的代码行，这些代码行重复提供的图像列表。这应该继续循环您在数组中拥有的图像。

```
$(document).ready(function () {
                var images = ["../img/background/1.jpg", "../img/background/2.jpg"];
                var index = -1;

                window.setInterval(function () {
                    index = (index + 1 < images.length) ? index + 1 : 0;
                    $('body').css("background-image", "url('" + images[index] + "')");
                }, 5000);
            }); 
```

# spring - 配置文件的弹簧问题

> ID：13201861
> 
> 赞同：0
> 
> 时间：2012-11-02T19:33:42.350
> 
> 标签：spring, spring-mvc

我正在尝试根据代码运行的环境直接上传变量。我写了一些代码并遇到了问题。你能指出我做错了什么吗？

WebAppInitializer.java

```
public class WebAppInitializer implements WebApplicationInitializer {
@Override
public void onStartup(ServletContext sc) throws ServletException {
// Create the 'root' Spring application context
AnnotationConfigWebApplicationContext root = new AnnotationConfigWebApplicationContext();
root.scan("com.configs");
root.getEnvironment().setActiveProfiles("dev");
root.refresh();

// Manages the lifecycle of the root application context
sc.addListener(new ContextLoaderListener(root));

// Handles requests into the application
ServletRegistration.Dynamic appServlet = sc.addServlet("appServlet",
                               new DispatcherServlet(new GenericWebApplicationContext()));
appServlet.setLoadOnStartup(1);
Set<String> mappingConflicts = appServlet.addMapping("/");

if (!mappingConflicts.isEmpty()) {
    throw new IllegalStateException(
                    "'appServlet' could not be mapped to '/' due "
                    + "to an existing mapping. This is a known issue under Tomcat versions "
                    + "<= 7.0.14; see https://issues.apache.org/bugzilla/show_bug.cgi?id=51278");
}

} 
```

}

动态配置.java

```
@Configuration
@Profile("dev")
@PropertySource("classpath:/devel.properties")

public class DynamicConfig {

@Autowired 
Environment env;

@Bean
public TestClass testClass(){
    TestClass testClass = new TestClass();
    testClass.setEnvironment(env.getProperty("environment"));
    return testClass;       
} 
```

}

TestClass 是具有一个实例变量的简单类，该实例变量将来自基于环境的配置。

TestCase：包com.tester；

```
 import org.junit.Test;
 import org.springframework.context.ApplicationContext;
 import org.springframework.context.annotation.AnnotationConfigApplicationContext;

 import com.configs.DynamicConfig;
  import com.configs.EnvironmentDetector;
 import com.tester.TestClass;

 public class TestClassTest {
    AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(DynamicConfig.class);

 @Test
public void test(){
    ApplicationContext context = new AnnotationConfigApplicationContext(DynamicConfig.class);
   context.getEnvironment().setActiveProfiles("dev");
     context.scan("com.configs");
    TestClass test = context.getBean(TestClass.class);
    System.out.println(test.getEnvironment());
} 
```

}

现在我得到以下错误

```
 Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.282 sec <<< FAILURE!
  test(com.tester.TestClassTest)  Time elapsed: 0.279 sec  <<< ERROR!
 org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.tester.TestClass] is defined: expected single bean but found 0: 
at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:280)
at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1106)
at com.tester.TestClassTest.test(TestClassTest.java:16)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:146)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
at $Proxy0.invoke(Unknown Source)
at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:145)
at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:87)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69) 
```

当我从 DynamicConfig.java 代码中删除行**@profile("dev")时运行良好。**但我想要那个。我想为产品创建类似的类。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:32:18.397

更新您的测试类以激活配置文件。目前，您通过在 WebApplicationInitializer 中添加属性来激活它，该属性不在您的测试上下文中运行。

激活它的一种方法是执行以下操作，但这不是唯一的方法：

```
 @RunWith(SpringJUnit4ClassRunner.class)
 @ActiveProfiles({"dev"})
 @ContextConfiguration(classes = {DynamicConfig.class})
 public class TestClassTest {

 @Autowired
 TestClass testClass;

 @Test
 public void test(){
      System.out.println(testClass.getEnvironment());
 } 
```

# php - 使用 PHP 从 SOAP 响应中解析 CDATA

> ID：13201867
> 
> 赞同：3
> 
> 时间：2012-11-02T19:34:07.430
> 
> 标签：php, soap, xpath, xml-parsing, simplexml

我正在尝试使用 SimpleXML 和 Xpath 从 SOAP 响应中解析出 CDATA。我得到了我正在寻找的输出，但返回的输出是一行连续的数据，没有允许我解析的分隔符。

我很感激任何帮助！

**这是包含我需要解析的 CDATA 的 SOAP 响应：**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <ns1:getIPServiceDataResponse xmlns:ns1="http://ws.icontent.idefense.com/V3/2">
         <ns1:return xsi:type="ns1:IPServiceDataResponse" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
            <ns1:status>Success</ns1:status>
            <ns1:serviceType>IPservice_TIIncremental_ALL_xml_v1</ns1:serviceType>
            <ns1:ipserviceData><![CDATA[<?xml version="1.0" encoding="utf-8"?><threat_indicators><tidata><indicator>URL</indicator><format>STRING</format><value>http://update.lflink.com/aspnet_vil/debug.swf</value><role>EXPLOIT</role><sample_md5/><last_observed>2012-11-02 18:13:43.587000</last_observed><comment>APT Blade2009 - CVE-2012-5271</comment><ref_id/></tidata><tidata><indicator>URL</indicator><format>STRING</format><value>http://update.lflink.com/crossdomain.xml</value><role>EXPLOIT</role><sample_md5/><last_observed>2012-11-02 18:14:04.108000</last_observed><comment>APT Blade2009 - CVE-2012-5271</comment><ref_id/></tidata><tidata><indicator>DOMAIN</indicator><format>STRING</format><value>update.lflink.com</value><role>EXPLOIT</role><sample_md5/><last_observed>2012-11-02 18:15:10.445000</last_observed><comment>APT Blade2009 - CVE-2012-5271</comment><ref_id/></tidata></threat_indicators>]]></ns1:ipserviceData>
         </ns1:return>
      </ns1:getIPServiceDataResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

**这是我用来尝试解析 CDATA 的 PHP 代码：**

```
<?php        
    $xml = simplexml_load_string($soap_response);
    $xml->registerXPathNamespace('ns1', 'http://ws.icontent.idefense.com/V3/2');

    foreach ($xml->xpath("//ns1:ipserviceData") as $item)
    {
        echo '<pre>';
        print_r($item);           
        echo '</pre>';
    }            
?> 
```

**这是 print_r 输出：**

```
SimpleXMLElement Object
(
    [0] => URLSTRINGhttp://update.lflink.com/aspnet_vil/debug.swfEXPLOIT2012-11-02 18:13:43.587000APT Blade2009 - CVE-2012-5271URLSTRINGhttp://update.lflink.com/crossdomain.xmlEXPLOIT2012-11-02 18:14:04.108000APT Blade2009 - CVE-2012-5271DOMAINSTRINGupdate.lflink.comEXPLOIT2012-11-02 18:15:10.445000APT Blade2009 - CVE-2012-5271
) 
```

有什么想法可以使输出可用吗？例如，解析出 CDATA 输出的每个元素，例如：`<indicator></indicator>, <value></value>, <role></role>,`等。

仅供参考 - 还尝试使用**LIBXML_NOCDATA**输出没有变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:03:25.293

你得到它作为一个单一的字符串，因为你已经要求 - 只是字符串。

如果您希望能够将该字符串解析为 XML，那么可以从中创建一个新的 Simplexml 对象。

然后你有另一个可以解析 HTML 的字符串解析器（是的，很简单；[Demo](http://codepad.viper-7.com/JFF2Z5)）：

```
$soap = simplexml_load_string($soapXML);
$soap->registerXPathNamespace('ns1', 'http://ws.icontent.idefense.com/V3/2');
$ipserviceData = simplexml_load_string($soap->xpath('//ns1:ipserviceData')[0]);

// <threat_indicators><tidata><indicator>URL</indicator>
echo $ipserviceData->tidata->indicator, "\n"; # URL 
```

顺便说一句，[`LIBXML_NOCDATA`标志^(*Docs*)](http://www.php.net/manual/libxml.constants.php)仅控制这些`<![CDATA[...]]>`部分是保留为 CDATA 节点还是合并到文本节点中。

# spring - 使用 Paypal 的 Spring Web Flow

> ID：13201869
> 
> 赞同：0
> 
> 时间：2012-11-02T19:34:20.013
> 
> 标签：spring, spring-roo, spring-webflow

嗨！

我在 Spring Web 流中集成了 Paypal 支付。

该应用程序使用 externalRedirect 将请求转发到 PayPal 网站。(setExpresscheckout) 用户登录到 PayPal 并为该项目付款。用户完成支付后，paypal 会将请求转发回流程。一旦请求从 PayPal 返回，是否有办法在流程中输入特定的视图状态？

我试过这个，但不起作用：

这是 paypalcontroller 的一部分，我在其中将返回 url 设置为 paypal：

```
private void sessionmanager(RequestContext context) {
HttpServletRequest request = (HttpServletRequest)context.getExternalContext().getNativeRequest();
//generate Spring Webflow return URL
String url = request.getRequestURL()+";jsessionid="+ request.getSession().getId() + "?" +
            request.getQueryString();
String paypalCancelUrl   = url + "&_eventId=end-state";
String paypalApprovedUrl = url + "&_eventId=approved";
} 
```

流.xml：

```
<view-state id="view-state-1" view="sampleflow/view-state-1">
    <transition on="success" to="view-state-2"/>
    <transition on="cancel" to="end-state"/>
    <transition on="approved" to="view-state-2"/>
</view-state> 
```

这是会话管理器代码生成的 url，paypal 重定向到它：

```
http://localhost:8080/testpaysys/sampleflow;jsessionid=D693C9D4A2681CA6FF18E7C7078EA971?null&_eventId=approved 
```

批准的 eventID 似乎不起作用，我进入流程，但进入了起始状态。（不重定向到状态 2）

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:19:54.383

您将需要使用执行密钥。您应该`flowExecutionUrl`在控制器中构建的返回 url 中使用。
你可以通过`context.getFlowExecutionUrl()`

# xslt - 测试 for-each-group 是否返回超过 1 个组 XSL

> ID：13201870
> 
> 赞同：0
> 
> 时间：2012-11-02T19:34:21.520
> 
> 标签：xslt, xpath, xslt-2.0

我有一个如下所示的 for-each 组，但我只希望在 for-each-group 的结果超过 1 个组的情况下执行代码......我该怎么做？

```
<xsl:for-each-group select="course[$department = department/@code]" group-by="course_group[@code]"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:50:04.480

您可以简单地使用 last()：

```
<xsl:for-each-group select="..." group-by="...">
  <xsl:if test="last() gt 1">
    ...
  </xsl:if>
</xsl:for-each-group> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T04:05:16.313

**使用**：

```
<xsl:variable name="vGroups" as="item()*">
  <xsl:for-each-group select=
   "course[$department = department/@code]" group-by="course_group[@code]"
  >1</xsl:for-each-group>
</xsl:variable>

<xsl:for-each-group select=
 "course[$vGroups[2]][$department = department/@code]" group-by="course_group[@code]">
    <!-- Your desired processing here -->
</xsl:for-each-group> 
```

因此，第`<xsl:for-each-group>`一个为每个组生成一个项目，并将其捕获在`$vGroups`变量中。

第二个`<xsl:for-each-group>`具有添加的条件，并且仅当序列包含至少两个项目时`[$vGroups[2]]`才会选择任何组（并执行） 。`$vGroups`

**或者，可以使用**：

```
exists(distinct-values(course[$department = department/@code]/course_group[@code])[2]) 
```

**或者**，（为什么我忘记了这一点）正如迈克尔凯的回答所指出的那样，可以简单地使用：

```
last() gt 1 
```

这第三种选择是最好的和推荐使用的表达方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:40:09.900

尝试：

```
<xsl:for-each-group select="course[$department = department/@code]" group-by="course_group[@code]">
  <xsl:if test="count(current-group()) &gt; 1">
    <xsl:text>Do Something</xsl:text>
  </xsl:if>
</xsl:for-each-group> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T06:19:31.740

这对我有用

```
<xsl:if test="count(current-group()) > 1">
    <xsl:text>Do Something</xsl:text>
</xsl:if> 
```

# svn - 批处理文件中的svn diff

> ID：13201873
> 
> 赞同：1
> 
> 时间：2012-11-02T19:34:26.317
> 
> 标签：svn, scripting, batch-file, diff

我正在尝试使用 svn diff 命令获取文件的两个两个版本之间更改的行数。我的代码如下：

```
svn diff "http://svn.apache.org/repos/asf/lucene/dev/trunk" --revision 923475:925738 >>output.txt 
```

当我打开一个 cmd 窗口并运行它时，它工作正常。现在，我是批处理脚本的初学者并且不熟悉它。据我了解，如果我将上述命令复制并粘贴到 .bat 文件中，然后运行该 .bat 文件，我应该得到相同的输出。但是，当我尝试这个时，发生的事情是它以永无止境的循环将以下内容写入输出文本文件。

C:\Users\Desktop>svn diff "http://svn.apache.org/repos/asf/lucene/dev/trunk" --revision 923475:925738 1>>output.txt

谁能告诉我我做错了什么或告诉我如何在批处理文件中使用 svn diff 命令？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:16:24.433

# 备注，不回答

*   *您的命令（和任务*）的良好语法是

> svn diff [http://svn.apache.org/repos/asf/lucene/dev/trunk](http://svn.apache.org/repos/asf/lucene/dev/trunk) -r 923475:925738

（注意 URL 周围没有 "，-r = --revision，只是更短）

*   **URL同时**最大的麻烦是命令输出****

     **svn：E160013：在版本“923475”和“925738”的存储库中找不到差异目标“http://svn.apache.org/repos/asf/lucene/dev/trunk”** 

 **即 - 即使在您的语法和命令提示符中，您也无法获得结果

如果我们`svn log -q http://svn.apache.org/repos/asf/lucene/dev/trunk | tail -2`得到

```
r924461 | markrmiller | 2010-03-18 01:17:26 +0500 (Чт, 18 мар 2010)
------------------------------------------------------------------------ 
```

924461 > 923475，主干在开始修订时不存在

*   如果要“...获取文件的两个两个修订版本之间更改的行数...”，则必须在 URL 中定义**此文件**，dev/trunk 是包含很多文件的目录

*   output.txt 将是一个巨大的 multiMB 文件，有差异，不需要你的数据

> 如何在批处理文件中使用 svn diff 命令？

与手动在命令提示符下执行的方式相同（只有一个细节 - 当您使用 WC 时，不要忘记 cd 或在 bat 文件中使用 WC 的完整路径）**

# objective-c - 每次调用子类 uibutton 时都会调用哪个方法？

> ID：13201874
> 
> 赞同：0
> 
> 时间：2012-11-02T19:34:26.277
> 
> 标签：objective-c, uibutton, init

我对 a 进行了子类`UIButton`化，并且我想提供`newButton`相同背景图像的所有实例，等等。我以为我找到了正确的 init 方法`initWithCoder`，但它只是被第一个调用`newButton`。我通过将文本大小更改为巨大的东西做了一个小测试，并且只`newButton`更改了第一个 s 文本大小。

我可以使用`drawRect:`，而且效果很好。但有人告诉我这不是一个好方法。

有谁知道会调用哪个方法，以便我可以进行一些调整？

```
 @implementation LCHButton

 - (id)initWithFrame:(CGRect)frame
 {
self = [super initWithFrame:frame];
if (self) {
    [self setDefaults];
}
return self;
}

 -(id)init
 {
self = [super init];
if (self) {
    [self setDefaults];
}
return self;

}

 -(id)initWithCoder:(NSCoder *)aDecoder
 {
self = [super initWithCoder:aDecoder];
if (self) {
    [self setDefaults];
}
return self;
}

 -(void)setDefaults
 {
[self setBackgroundImage:[[UIImage imageNamed:@"submitBtn.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:0] forState:UIControlStateNormal];
self.titleLabel.font = [UIFont fontWithName:@"Museo-500" size:17];
}

 @end 
```

这只会更改第一个按钮

# django - nginx子域映射

> ID：13201876
> 
> 赞同：0
> 
> 时间：2012-11-02T19:34:43.583
> 
> 标签：django, configuration, nginx

我想在浏览器中打开 xyz.abc.com 但在内部（使用 python-django），我想将其映射到 abc.com/xyz 以下 nginx conf 代码有效，但我不想将用户重定向到这个新网址 (abc.com/xyz)

```
server {
    listen   80;
    server_name xyz.abc.com;

    location / {
        rewrite ^ http://abc.com/xyz;
        break;
} 
```

我已经尝试了很多东西，包括使用 proxy_pass 但它不起作用。我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:58:18.450

您可以将任何 3 级域转换为 2 级：

```
server {
    listen   80;
    server_name ~^(?<domain>.*)\.abc\.com;

    location / {
        proxy_pass http://abc.com/$domain$request_uri;
        break;
} 
```

在您的情况下尝试下一个：

```
server {
    listen   80;
    server_name xyz.abc.com;

    location / {
        proxy_pass http://abc.com/xyz$request_uri;
        break;
} 
```

关于**request_uri**：[http ://wiki.nginx.org/HttpCoreModule](http://wiki.nginx.org/HttpCoreModule)

# java - 无法将事件插入日历 Android

> ID：13201878
> 
> 赞同：0
> 
> 时间：2012-11-02T19:34:51.103
> 
> 标签：java, android, calendar, android-2.2-froyo

我正在尝试使用带有以下代码的 Intent 将事件插入日历：

```
package come.jobfinder.dev;

import java.util.Calendar;

import org.junit.Test;

import android.app.Activity;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Intent;
import android.net.Uri;
import android.provider.CalendarContract;
import android.provider.CalendarContract.Events;

public class CalendarWrapper extends Activity {

    public void syncDataWithCalendar(String workPlace , Calendar date){

        //TODO should be a field that user should fill - intreviewLength
        int intreviewLength = 60;// set it default to be an hour , will be a field user should fill
        //TODO should be a field that will be sent - position
        String position = "Product Manager";
        //TODO  should be a field that will be sent - location
        String location = "Tel Aviv";
        //TODO need to check where to take this argument from
        long calID = 3;
        Calendar beginTime = Calendar.getInstance();
        beginTime.set(date.get(Calendar.YEAR), date.get(Calendar.MONTH), date.get(Calendar.DAY_OF_MONTH), date.get(Calendar.HOUR), date.get(Calendar.MINUTE));
        Calendar endTime = Calendar.getInstance();
        endTime.set(date.get(Calendar.YEAR), date.get(Calendar.MONTH), date.get(Calendar.DAY_OF_MONTH), date.get(Calendar.HOUR), date.get(Calendar.MINUTE)+intreviewLength);
        Intent intent = new Intent(Intent.ACTION_INSERT)
                .setData(Events.CONTENT_URI)
                .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis())
                .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis())
                .putExtra(Events.TITLE, "Job Interview with "+workPlace)
                .putExtra(Events.DESCRIPTION, "Job interview with "+workPlace+" for the position"+position)
                .putExtra(Events.EVENT_LOCATION, location)
                .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)
                .putExtra(Intent.EXTRA_EMAIL, "rowan@example.com,trevor@example.com");

        startActivity(intent);

        //return intent;

        // get the event ID that is the last element in the Uri
    }
} 
```

并得到以下错误：

```
11-02 21:22:07.580: E/AndroidRuntime(15871): FATAL EXCEPTION: main
11-02 21:22:07.580: E/AndroidRuntime(15871): java.lang.NullPointerException
11-02 21:22:07.580: E/AndroidRuntime(15871):    at android.app.Activity.startActivityForResult(Activity.java:3195)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at android.app.Activity.startActivity(Activity.java:3302)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at come.jobfinder.dev.CalendarWrapper.syncDataWithCalendar(CalendarWrapper.java:45)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at come.jobfinder.dev.UpdateWorkPlace.onClick(UpdateWorkPlace.java:90)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at android.view.View.performClick(View.java:3627)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at android.view.View$PerformClick.run(View.java:14329)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at android.os.Handler.handleCallback(Handler.java:605)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at android.os.Looper.loop(Looper.java:137)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at android.app.ActivityThread.main(ActivityThread.java:4511)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at java.lang.reflect.Method.invokeNative(Native Method)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at java.lang.reflect.Method.invoke(Method.java:511)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
11-02 21:22:07.580: E/AndroidRuntime(15871):    at dalvik.system.NativeStart.main(Native Method) 
```

非常感谢

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:47:31.697

很难说发生了什么。您在跟踪中遇到空指针异常，哪个源语句失败？

# c# - Linq To Sql 返回值长度而不是值

> ID：13201880
> 
> 赞同：2
> 
> 时间：2012-11-02T19:34:54.750
> 
> 标签：c#, linq-to-sql

我今天刚开始自学 Linq to SQL。我对 linq 几乎一无所知。话虽如此，我有一个查询，我想从我的数据库中返回一个名称。它是数据库中的 varchar

```
var query = from a in FRESH.Customers
            select a.CUSTOMER_NAME;

dataGridView1.DataSource = query; 
```

这会产生一个带有名为“长度”的列的网格视图，并显示每个名称的长度。如果我将查询更改为`select a`一切显示正常。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:39:27.413

默认情况下，将`DataGridView`列表中类型的所有属性显示为列。由于您的查询返回 s 的集合，`string`并且 a 的[唯一^(1 个)“属性”](http://msdn.microsoft.com/en-us/library/h75y1h8f.aspx)是`string`它`Length`显示为一列。

尝试更改为

```
var query = from a in FRESH.Customers
            select new {Name = a.CUSTOMER_NAME}; 
```

¹从技术上讲，索引器`Chars`是一种“属性”，但`DataGridView`必须足够聪明，不要将索引器用作列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:41:10.940

问题出在 gridView 中，而不是在 Linq 中 - gridView 在`DataSource`. 它绑定到第一个找到的属性。因此它按`Length`属性绑定字符串（它是`String`对象具有的唯一属性）。

在 gridView 中显示字符串的默认方法是创建一些包装器，该包装器将具有字符串值的属性：

```
public class StringValue
{    
    public string Value { get; set; }
} 
```

当您创建匿名对象时，正如@DStanley 建议的那样，Linq 会为您创建包装器：

```
var query = from a in FRESH.Customers
            select new { CustomerName = a.CUSTOMER_NAME}; 
```

GridView 会在匿名对象中寻找属性，它会找到并使用`CustomerName`属性。

# c++ - 我可以避免临时搭建的意外吗？

> ID：13201881
> 
> 赞同：1
> 
> 时间：2012-11-02T19:34:59.227
> 
> 标签：c++, constructor

> **可能重复：**
> [如何在 C++ 中禁止临时对象](https://stackoverflow.com/questions/13159739/how-to-disallow-temporaries-in-c)

有时我打算写一些类似的东西

```
{
    MyClass anInstance( param );
    // other code...
} 
```

但实际上写了

```
{
    MyClass( param );
    // other code...
} 
```

结果，析构函数在析构函数之后立即被调用，而不是在作用域的末尾。有没有办法编写类来使这个错误产生编译错误？如果做不到这一点，也许我可以打开一个可选警告？（我在 Mac OS X 上使用 Clang。）

# push - Dreamweaver 电话应用程序的 Xtify 集成

> ID：13201883
> 
> 赞同：2
> 
> 时间：2012-11-02T19:35:11.317
> 
> 标签：push, xtify

我正在使用 Dreamweaver 和 phonegap 构建服务创建我的第一个本机电话应用程序，我需要的最重要的功能之一是能够发送推送通知。话虽如此，我很难找到有关将 xtify 与内置于 dreamweaver 的应用程序集成的教程。有什么建议么？xtify 上的所有文档都假设我在 phonegap 中构建程序。您需要了解的第一件事是，我不是程序员，我为非营利组织工作，这只是我在这里工作的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:11:04.037

Dreamweaver 使用 Adob​​e PhoneGap Build，它将移动应用程序打包在云中。他们还不支持自定义 phonegap 插件（如 Xtify），但他们正在努力。详情[在这里](https://build.phonegap.com/docs/plugins)。

从网站：

> 目前，您无法将自己的插件提交到 PhoneGap Build 并将它们包含在我们的系统中。我们正在对基础设施进行更改以提供这种支持。

# c++ - Cython 和类的构造函数

> ID：13201886
> 
> 赞同：5
> 
> 时间：2012-11-02T19:35:27.200
> 
> 标签：c++, python, constructor, cython, default-constructor

我对 Cython 使用默认构造函数有疑问。

我的 C++ 类节点如下

`Node.h`

```
class Node
{
public:
    Node()
    { 
        std::cerr << "calling no arg constructor" << std::endl;
            w=0.0;
        d=0.0;
    }
    Node(double val, double val2);
    {
            std::cerr << "calling 2 args constructor" << std::endl;
        this->w=val;
        this->d=val2;
    }
private:
    double d,w;
} 
```

包裹在 Cython 中，如下所示

```
cdef extern from "Node.h":
    cdef cppclass Node:
        Node() except +
        Node(double val1, double val2) except +
        double d
        double w

cdef class pyNode:
    cdef Node *thisptr      # hold a C++ instance which we're wrapping

    def __cinit__(self):
        self.thisptr = new Node()

    def __cinit__(self, double val1, double val2):
        self.thisptr = new Node(val1,val2)

    def __dealloc__(self):
        del self.thisptr

    def __repr__(self):
        return "d=%s w=%s" % (self.thisptr.w, self.thisptr.w ) 
```

Cython 代码编译良好，尤其是从 Python 调用时

```
from pyNode import pyNode as Node
n=Node(1.0,2.0) 
```

我得到了预期的`calling 2 args constructor`字符串，但是如果我尝试使用“无参数”构造函数从 python 声明一个 Node 对象（应该正确声明，因为`__cinit__(self)`我没有得到任何输出，这意味着无参数构造函数是不叫！

如何从包装类的**cinit方法显式调用它？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T19:41:20.313

这里的问题是你不能`__cinit__()`像那样重载（因为[只有`cdef`函数可以重载](https://github.com/cython/cython/wiki/enhancements-overloading)） - 相反，让它采用默认值，然后根据需要调用正确的东西。

编辑：本质上，您需要以更接近普通 Python 代码的方式实现该函数，而不是使用重载：

```
def __cinit__(self, double val1=-1, double val2=-1): 
    if val1 == -1 or val2 == -1:
        self.thisptr = new Node()
    else:
        self.thisptr = new Node(val1,val2) 
```

自然地，这假定`-1`是一个对函数没有用的值，您可以使用另一个值，或者如果您需要双精度的每个值都有效，那么您可能需要删除类型，采用 Python 对象以便您可以使用`None`默认值：

```
def __cinit__(self, val1=None, val2=None):
    if val1 is not None and val2 is not None:
        self.thisptr = new Node(val1, val2)
    else:
        self.thisptr = new Node() 
```

# metapost - Metapost 方程

> ID：13201891
> 
> 赞同：2
> 
> 时间：2012-11-02T19:35:52.960
> 
> 标签：metapost

在我的一门课程中，我得到了一项家庭作业，要求我们用谷歌搜索 Metapost 语言并找到该语言中方程求解功能的用途。在浏览了 Metapost 用户手册的前十几页之后，我发现它之所以有用只有一个原因，那就是“允许许多程序以主要的声明式风格编写”。除了说明它使编程更加“声明性”（据我理解，这意味着我们告诉语言该做什么而不是如何去做）我想不出任何其他原因说明方程求解是有用的。谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-28T10:10:50.563

这是一个说明如何在 MetaPost 中求解方程——以及就此而言的声明式编程——可能是有用的。

假设我们要画一个[骰子](https://en.wikipedia.org/wiki/Dice)：

![图片 0](../Images/7caab030bd1ef962cbae93fcb3ef1e84.png)

为此，让我们首先定义一个宏，它将绘制骰子的一个面：一个`s`上面有数字的正方形。

```
def face (expr s) = image (begingroup
    pickup pencircle scaled 1pt;
    draw (0.5, 0.5) -- (0.5, 9.5) -- (9.5, 9.5) -- (9.5, 0.5) -- cycle;
    label (s, (5, 5));
endgroup) scaled 10 enddef; 
```

现在我们可以绘制它并得到图片：

```
draw face ("1"); 
```

![图 1](../Images/c28a66be162139e0308603b713a49f84.png)

接下来，我们需要一个上脸和一个右脸。要绘制它们，我们将必须编写仿射变换来倾斜它们。这可能很棘手，因为唯一现成的用于倾斜的原始转换是`slanted a`将点`(x, y)`转换为`(x + ay, y)`. 这是我们的图片倾斜1：

```
draw face ("2") slanted 1; 
```

![图二](../Images/59f53d4b08b96d53b8f1b26e23b6e5cc.png)

然后（或者更确切地说，在此之前）我们必须按以下坐标之一进行缩放：

```
draw face ("2") yscaled 0.35 slanted 1; 
```

![图 3](../Images/ef02c6baeec1dc5c41140fb4e2427de5.png)

同样的方法不适用于第三张脸：

```
draw face ("3") xscaled 0.35 slanted 1; 
```

![图 4](../Images/aefc7bf4e7b4a12b4ea819cc3ebc7490.png)

经过一番试验，我们找到了正确的代码：

```
draw face ("3") rotated 90 yscaled 0.35 slanted -1 rotated -90; 
```

![图 5](../Images/67f0923f9f36f7c4c70a96dcbfd5f333.png)

但为什么所有的乏味？我们确切地*知道*我们需要什么样的转变。一种自然的表达方式是使用原语。但是，如果这被证明是不直观的，就像我们最后一行一样，那么只指定平面的哪些点转换到哪些点可能会更舒服。

```
transform t;
(0, 0) transformed t = (0, 0);
(0, 1) transformed t = (0.35, 0.35);
(1, 0) transformed t = (1, 0);
draw face ("3") transformed t; 
```

这基本上告诉 MetaPost：有一个 transform `t`，我们指定的三个点在它下面移动到我们指定的其他三个点。事实证明，这唯一地确定了平面变换，我们得到了相同的图片：

![图 6](../Images/e3ab4df87cf2d56b3746460277438699.png)

将所有这些放在一起（代码`beginfig (7)`在帖子末尾）让我们最终看到我们的死：

![图 7](../Images/7caab030bd1ef962cbae93fcb3ef1e84.png)

在这个简单的例子中，“坐标和方程”方法的难度与“原始变换”方法相当。现在，想象一下我们想要我们的立方体稍微倾斜。使用相同的声明性方法，仍然可以不调用 3D 几何（代码`beginfig (8)`在帖子末尾）：

![图 8](../Images/5c473a4f86e1a41b1b16f8742a587c43.png)

* * *

完整的程序如下。

```
prologues := 3;

def face (expr s) = image (begingroup
    pickup pencircle scaled 1pt;
    draw (0.5, 0.5) -- (0.5, 9.5) -- (9.5, 9.5) -- (9.5, 0.5) -- cycle;
    label (s, (5, 5));
endgroup) scaled 10 enddef;

beginfig (1)
    draw face ("1");
endfig;

beginfig (2)
    draw face ("2") slanted 1;
endfig;

beginfig (3)
    draw face ("2") yscaled 0.35 slanted 1;
endfig;

beginfig (4)
    draw face ("3") xscaled 0.35 slanted 1;
endfig;

beginfig (5)
    draw face ("3") rotated 90 yscaled 0.35 slanted -1 rotated -90;
endfig;

beginfig (6)
    transform t;
    (0, 0) transformed t = (0, 0);
    (0, 1) transformed t = (0, 1);
    (1, 0) transformed t = (0.35, 0.35);
    draw face ("3") transformed t;
endfig;

beginfig (7)
    transform t [];

    draw face ("1");

    (0, 0) transformed t[1] = (0, 0);
    (0, 1) transformed t[1] = (0.35, 0.35);
    (1, 0) transformed t[1] = (1, 0);
    draw face ("2") transformed t[1] shifted (0, 100);

    (0, 0) transformed t[2] = (0, 0);
    (0, 1) transformed t[2] = (0, 1);
    (1, 0) transformed t[2] = (0.35, 0.35);
    draw face ("3") transformed t[2] shifted (100, 0);
endfig;

beginfig (8)
    transform t [];
    pair Ox, Oy, Oz;
    Ox = (0.86, -0.21);
    Oy = (0.21, 0.86);
    Oz = (0.29, 0.44);

    (0, 0) transformed t[1] = (0, 0);
    (1, 0) transformed t[1] = Ox;
    (0, 1) transformed t[1] = Oy;
    draw face ("4") transformed t[1];

    (0, 0) transformed t[2] = (0, 0);
    (1, 0) transformed t[2] = Ox;
    (0, 1) transformed t[2] = Oz;
    draw face ("5") transformed t[2] shifted (Oy scaled 100);

    (0, 0) transformed t[3] = (0, 0);
    (1, 0) transformed t[3] = Oz;
    (0, 1) transformed t[3] = Oy;
    draw face ("6") transformed t[3] shifted (Ox scaled 100);
endfig;

end 
```

# java - Flume 1.2.0 自定义源码

> ID：13201893
> 
> 赞同：0
> 
> 时间：2012-11-02T19:36:04.687
> 
> 标签：java, hadoop, flume

我有一个自制的事件收集和处理框架，我希望用 Apache Flume 1.2.0 替代它，因为我们将开始将数据加载到 Hadoop 中。由于 Flume 没有 HTTP 源，我正在编写一个带有嵌入式 Tomcat 服务器的自定义源。我正在关注[http://flume.apache.org/FlumeUserGuide.html#custom-source](http://flume.apache.org/FlumeUserGuide.html#custom-source)上的文档，但是当我开始时出现以下异常：

> java.lang.IllegalArgumentException：在 org.apache.flume.SourceRunner.forSource(SourceRunner.java:54) 在 org.apache.flume.conf.properties 的源 com.xxx.xxx.flume.TestSource@5219f360 没有已知的运行器类型.PropertiesFileConfigurationProvider.loadSources(PropertiesFileConfigurationProvider.java:340) at org.apache.flume.conf.properties.PropertiesFileConfigurationProvider.load(PropertiesFileConfigurationProvider.java:222) at org.apache.flume.conf.file.AbstractFileConfigurationProvider.doLoad(AbstractFileConfigurationProvider.java :123) 在 org.apache.flume.conf.file.AbstractFileConfigurationProvider$FileWatcherRunnable.run(AbstractFileConfigurationProvider.java:202) 在 org.apache.flume.conf.file.AbstractFileConfigurationProvider.access$300(AbstractFileConfigurationProvider.java:38) 在 java .util.并发。Executors$RunnableAdapter.call(Executors.java:471) at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351) at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178) at java .util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor. java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)runAndReset(FutureTask.java:178) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) at java。 util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)runAndReset(FutureTask.java:178) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) at java。 util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:50:11.170

我想我明白了。Flume 网站上的文档没有提到自定义实现应该实现的不是 Source 接口，而是 EventDrivenSource 或 PollableSource 接口。

# matlab - 获得更高分辨率的奈奎斯特图

> ID：13201894
> 
> 赞同：1
> 
> 时间：2012-11-02T19:36:07.273
> 
> 标签：matlab

有没有办法获得更高分辨率的奈奎斯特图？

例如，波特图包括增加频率分辨率的可能性。

我使用该代码：

```
T=64.38 %ms

G_1=tf([-T 1],[T^2 2*T 1]);
zpk(G_1)
G_2=tf([1],[T 1]);
zpk(G_2)

G=G_1*G_1*G_1*G_2;

zpk(G)

nyquist(G) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:01:39.780

此信息可在文档中找到：您可以为 nyquist 指定频率范围：

```
w = -10:0.001:0;
nyquist(G,exp(w)) 
```

# java - java中带有LinkedList的哈希映射

> ID：13201898
> 
> 赞同：2
> 
> 时间：2012-11-02T19:36:30.303
> 
> 标签：java, linked-list, hashmap

java中是否有内置的哈希映射实现，其值是链表？

就像，如果我说：

```
 map.put(1, "A");
 map.put(1, "B"); 
```

然后它会自动将 A 和 B 添加到链表中。当我从地图中检索时，如：

```
 map.get(1) 
```

我得到一个包含它们的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:38:30.730

Java 没有，但您可以使用Google [Guava的](http://code.google.com/p/guava-libraries/)[MultiMap](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)。

> 类似于 Map 的集合，但可以将多个值与单个键相关联。如果您使用相同的键但值不同的两次调用 put(K, V)，则多重映射包含从键到两个值的映射。
> 
> get(K)、keySet()、keys()、values()、entry() 和 asMap() 方法返回作为多图视图的集合

这篇文章[Multimaps - Google Guava](http://tomjefferys.blogspot.in/2011/09/multimaps-google-guava.html)为您提供了有关如何使用它以及如何`HashMap`使用`List`作为值来完成它的完整想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:38:20.503

第二个 put 将覆盖第一个 put。您将得到 B 作为响应。

根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#put%28K,%20V%29)

> 如果映射先前包含键的映射，则替换旧值

如果要保留两个条目，则需要使用第三方库 google guava [MultiMap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:39:14.270

不，只是建立你自己的。

首先你拿一个HashMap，如果键不存在你把linkedList放在......

简单的...

# gdal - Geotools - 在 WMS 和 OSM 上绘制特征

> ID：13201902
> 
> 赞同：3
> 
> 时间：2012-11-02T19:36:50.360
> 
> 标签：gdal, geotools, wms

我正在尝试使用示例[http://docs.geotools.org/latest/userguide/tutorial/raster/image.html](http://docs.geotools.org/latest/userguide/tutorial/raster/image.html)在 wms 层上覆盖 shp 文件。

我不断收到错误：

```
Exception in thread "main" java.lang.UnsupportedOperationException: Trying to get a reader from an unknown format.
at org.geotools.coverage.grid.io.UnknownFormat.getReader(UnknownFormat.java:62)
at com.qedrix.map.maplotr.Demo1.displayLayers(Demo1.java:121)
at com.qedrix.map.maplotr.Demo1.main(Demo1.java:229) 
```

当代码尝试读取 WMS 图像时。

我的代码如下所示：

```
public class Demo1 {

private AbstractGridCoverage2DReader reader = null;

private StyleFactory sf = CommonFactoryFinder.getStyleFactory();
private FilterFactory2 ff = CommonFactoryFinder.getFilterFactory2();

/**
 * This method examines the names of the sample dimensions in the provided
 * coverage looking for "red...", "green..." and "blue..." (case insensitive
 * match). If these names are not found it uses bands 1, 2, and 3 for the
 * red, green and blue channels. It then sets up a raster symbolizer and
 * returns this wrapped in a Style.
 * 
 * @return a new Style object containing a raster symbolizer set up for RGB
 *         image
 */
private Style createRGBStyle() {
    GridCoverage2D cov = null;
    try {
        cov = reader.read(null);
    } catch (IOException giveUp) {
        throw new RuntimeException(giveUp);
    }
    // We need at least three bands to create an RGB style
    int numBands = cov.getNumSampleDimensions();
    if (numBands < 3) {
        return null;
    }
    // Get the names of the bands
    String[] sampleDimensionNames = new String[numBands];
    for (int i = 0; i < numBands; i++) {
        GridSampleDimension dim = cov.getSampleDimension(i);
        sampleDimensionNames[i] = dim.getDescription().toString();
    }
    final int RED = 0, GREEN = 1, BLUE = 2;
    int[] channelNum = { -1, -1, -1 };
    // We examine the band names looking for "red...", "green...",
    // "blue...".
    // Note that the channel numbers we record are indexed from 1, not 0.
    for (int i = 0; i < numBands; i++) {
        String name = sampleDimensionNames[i].toLowerCase();
        if (name != null) {
            if (name.matches("red.*")) {
                channelNum[RED] = i + 1;
            } else if (name.matches("green.*")) {
                channelNum[GREEN] = i + 1;
            } else if (name.matches("blue.*")) {
                channelNum[BLUE] = i + 1;
            }
        }
    }
    // If we didn't find named bands "red...", "green...", "blue..."
    // we fall back to using the first three bands in order
    if (channelNum[RED] < 0 || channelNum[GREEN] < 0 || channelNum[BLUE] < 0) {
        channelNum[RED] = 1;
        channelNum[GREEN] = 2;
        channelNum[BLUE] = 3;
    }
    // Now we create a RasterSymbolizer using the selected channels
    SelectedChannelType[] sct = new SelectedChannelType[cov.getNumSampleDimensions()];
    ContrastEnhancement ce = sf.contrastEnhancement(ff.literal(1.0), ContrastMethod.NORMALIZE);
    for (int i = 0; i < 3; i++) {
        sct[i] = sf.createSelectedChannelType(String.valueOf(channelNum[i]), ce);
    }
    RasterSymbolizer sym = sf.getDefaultRasterSymbolizer();
    ChannelSelection sel = sf.channelSelection(sct[RED], sct[GREEN], sct[BLUE]);
    sym.setChannelSelection(sel);

    return SLD.wrapSymbolizers(sym);
}

public void displayLayers() {

    File rasterFile = fetchWmsImage();

    AbstractGridFormat format = GridFormatFinder.findFormat(rasterFile);

    this.reader = format.getReader(rasterFile);

    // Initially display the raster in greyscale using the
    // data from the first image band
    Style rasterStyle = createRGBStyle();

    // Create a basic style with yellow lines and no fill
    Style shpStyle = SLD.createPointStyle("point", Color.YELLOW, Color.GRAY, 0.0f, 1.5f);

    MapContent map = new MapContent();
    map.setTitle("ImageLab");

    MapViewport vp = new MapViewport();

    org.geotools.map.Layer rasterLayer = new GridReaderLayer(reader, rasterStyle);
    map.addLayer(rasterLayer);

    saveImage(map, "final.jpeg", 583);

}

public File fetchWmsImage() {

    URL url = null;
    try {
        url = new URL("http://184.106.187.247:8080/geoserver/rg/wms?version=1.1.0");
    } catch (MalformedURLException e) {
        // will not happen
    }

    WebMapServer wms = null;
    try {
        wms = new WebMapServer(url);

        WMSCapabilities capabilities = wms.getCapabilities();
        Layer[] layers = WMSUtils.getNamedLayers(capabilities);

        GetMapRequest request = wms.createGetMapRequest();

        request.setFormat("image/png");
        request.setDimensions("583", "420");
        request.setTransparent(true);
        request.setSRS("EPSG:900913");
        request.setBBox("-13019428.542822,3922163.1648461,-13013051.407366,3929863.8567165");
        request.setProperty("isBaseLayer", "false");
        request.setProperty("opacity", ".2");

        for (Layer layer : WMSUtils.getNamedLayers(capabilities)) {
            if (layer.getName().equals("rg:parcels"))
                request.addLayer(layer);
        }

        GetMapResponse response = (GetMapResponse) wms.issueRequest(request);
        BufferedImage image = ImageIO.read(response.getInputStream());

        File rasterFile = new File("C:\\Users\\samabhik\\Workspace\\MAP\\data\\out.png");
        ImageIO.write(image, "png", rasterFile);

        return rasterFile;

    } catch (ServiceException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {

    }

    return null;
}

public void saveImage(final MapContent map, final String file, final int imageWidth) {

    GTRenderer renderer = new StreamingRenderer();
    renderer.setMapContent(map);

    Rectangle imageBounds = null;
    ReferencedEnvelope mapBounds = null;
    try {
        mapBounds = map.getMaxBounds();
        double heightToWidth = mapBounds.getSpan(1) / mapBounds.getSpan(0);
        imageBounds = new Rectangle(0, 0, imageWidth, (int) Math.round(imageWidth * heightToWidth));

    } catch (Exception e) {
        // failed to access map layers
        throw new RuntimeException(e);
    }

    BufferedImage image = new BufferedImage(imageBounds.width, imageBounds.height, BufferedImage.TYPE_INT_RGB);

    Graphics2D gr = image.createGraphics();
    gr.setPaint(Color.WHITE);
    gr.fill(imageBounds);

    try {
        renderer.paint(gr, imageBounds, mapBounds);
        File fileToSave = new File(file);
        ImageIO.write(image, "jpeg", fileToSave);

    } catch (IOException e) {
        throw new RuntimeException(e);
    }
}

public static void main(String[] args) {
    Demo1 demo = new Demo1();
    demo.displayLayers();
} 
```

}

我的 pom 依赖项如下所示：

```
<dependency>
  <groupId>org.geotools</groupId>
  <artifactId>gt-shapefile</artifactId>
  <version>${geotools.version}</version>
</dependency>
<dependency>
  <groupId>org.geotools</groupId>
  <artifactId>gt-swing</artifactId>
  <version>${geotools.version}</version>
</dependency>
<dependency>
  <groupId>org.geotools</groupId>
  <artifactId>gt-epsg-hsql</artifactId>
  <version>${geotools.version}</version>
</dependency>
<dependency>
  <groupId>org.geotools</groupId>
  <artifactId>gt-geotiff</artifactId>
  <version>${geotools.version}</version>
</dependency>
<dependency>
  <groupId>org.geotools</groupId>
  <artifactId>gt-image</artifactId>
  <version>${geotools.version}</version>
</dependency>
<dependency>
  <groupId>org.geotools</groupId>
  <artifactId>gt-wms</artifactId>
  <version>${geotools.version}</version>
</dependency>
<dependency>
  <groupId>org.geotools</groupId>
  <artifactId>gt-coverage</artifactId>
  <version>${geotools.version}</version>
</dependency> 
```

我在某处读到它可能是 GDAL 问题。但我不知道如何解决它。我在 64 JDK 1.6 和 Win 7 amd64 上使用 eclipse。

请帮助，有人..

刚刚使用 GDAL 本机库路径中的 gdalinfo.exe 测试了图像文件。这是报告：

```
Driver: PNG/Portable Network Graphics
Files: ..\..\Workspace\MAP\data\out2.png
Size is 583, 420
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  420.0)
Upper Right (  583.0,    0.0)
Lower Right (  583.0,  420.0)
Center      (  291.5,  210.0)
Band 1 Block=583x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=583x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=583x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=583x1 Type=Byte, ColorInterp=Alpha 
```

*进一步更新*

我刚刚尝试将 WMS 的输出格式从 images/png 更改为 images/geotiff，现在这部分工作（geotools 生成的最终图像是黑白）。为什么会这样？为什么它不适用于PNG？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T04:31:37.683

检查您是否有可用的 JAI 和 ImageIO。通过 maven 依赖项，或者按照快速入门中所述将它们安装为 Java 扩展。

*   [http://docs.geotools.org/latest/userguide/tutorial/quickstart/eclipse.html](http://docs.geotools.org/latest/userguide/tutorial/quickstart/eclipse.html)

更新：

我能够赶上 GeoTools IRC 频道并确认这是一个环境问题。在课堂*上为我工作的*时尚我能够使用 WMSLab 教程示例连接到有问题的 WMS 并显示结果。

因此，让我们检查一下“问题”环境：

System.out.println(GeoTools.getAboutInfo());

结果：：

GeoTools 版本 9-SNAPSHOT（由 ree5a6830d2c774ee9a4eb9e024d989c2a1bcdfe3 构建） Java 版本：1.7.0_09 操作系统：Windows 7 6.1 类路径上的 GeoTools jar：

几个想法：

*   查看 ImageLab 以确认 JAI / ImageIO 是否可用？

这行得通！

*   保存从浏览器检索到的图像并尝试使用直接 Java 加载它

来自 WorldImageReader 的示例::

```
File input = ...
ImageInputStreamSpi inStreamSPI= ImageIOExt.getImageInputStreamSPI( input );
if (inStreamSPI == null) throw new IllegalStateException("Unsuppported"); 
```

显然这不成功？

*   GeoTools 还没有通过 Java 7 的 QA，降级到 Java 6？

最近自愿提供了一个 Java 7 构建盒。当 GeoTools 在 Java 7 中工作时，发行说明和教程将被更新。

*   特别是在 Windows 上，PNG 支持的实现是可疑的。

来自 uDig 项目的以下代码禁用了本机实现，允许纯 Java 实现对其进行破解：

```
 if (Platform.getOS().equals(Platform.OS_WIN32)) {
        try {
            // PNG native support is not very good .. this turns it off
            ImageUtilities.allowNativeCodec("png", ImageReaderSpi.class, false); //$NON-NLS-1$
        } catch (Throwable t) {
            // we should not die if JAI is missing; we have a warning for that...
            System.out.println("Difficulty turnning windows native PNG support (which will result in scrambled images from WMS servers)"); //$NON-NLS-1$
            t.printStackTrace();
        }
    } 
```

# compilation - 如果 java 源正在调用带注释的方法，如何编写注释处理器以引发警告消息

> ID：13201903
> 
> 赞同：2
> 
> 时间：2012-11-02T19:36:55.380
> 
> 标签：compilation, annotations, warnings, processor

这是我在 Java 6 中的要求：我正在使用 Eclipse JUNO。

1.  使用自定义注解对方法进行注解。
2.  在编译期间，如果方法正在调用带注释的方法，则引发警告消息。

我正在寻找类似@Deprecated 注释的东西。

这就是我所做的：

1.  写了一个自定义注释。
2.  编写了一个注解处理器来读取和处理带有注解的方法。

创建了一个 jar 并将其添加到注释处理器路径中。我的示例代码（见下文）在带注释的方法中引发了警告消息。但这不是我的要求。

我不能做的：

1.  我无法获得调用方法。我想在那些调用方法中提出警告消息。

我的示例代码：

自定义注释：

```
package tool.apichecks;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.SOURCE)
@Target({ ElementType.METHOD })
public @interface HighCostMethod {
    String altMethod();
} 
```

注释处理器：

```
 package tool.apichecks;

import java.util.Set;

import javax.annotation.processing.AbstractProcessor;
import javax.annotation.processing.ProcessingEnvironment;
import javax.annotation.processing.RoundEnvironment;
import javax.annotation.processing.SupportedAnnotationTypes;
import javax.lang.model.element.Element;
import javax.lang.model.element.TypeElement;
import javax.tools.Diagnostic.Kind;

@SupportedAnnotationTypes({ "tool.apichecks.HighCostMethod" })
public class MethodProcessor extends AbstractProcessor {

    private enum MethodType {
        HIGH_COST(HighCostMethod.class.getName());

        private String name;

        private MethodType(String name) {
            this.name = name;
        }

        private static MethodType getMethodType(String name) {
            MethodType methodType = null;
            for (MethodType methodType2 : MethodType.values()) {
                if (methodType2.name.equals(name)) {
                    methodType = methodType2;
                    break;
                }
            }
            return methodType;
        }
    }

    private ProcessingEnvironment processingEnvironment;

    @Override
    public synchronized void init(ProcessingEnvironment processingEnvironment) {
        this.processingEnvironment = processingEnvironment;
    }

    @Override
    public boolean process(Set<? extends TypeElement> annotations,
            RoundEnvironment roundEnvironment) {
        if (!roundEnvironment.processingOver()) {
            for (TypeElement annotation : annotations) {
                final Set<? extends Element> elements = roundEnvironment
                        .getElementsAnnotatedWith(annotation);
                MethodType methodType = MethodType.getMethodType(annotation
                        .toString());

                for (Element element : elements) {
                    switch (methodType) {
                    case HIGH_COST: {
                        processHighCostMethod(element);
                        break;
                    }
                    }
                }
            }
        }
        return true;
    }

    protected void processHighCostMethod(Element element) {
        HighCostMethod highCostMethod = element
                .getAnnotation(HighCostMethod.class);
        /* TODO This warns the annotated method itself. I don't want this. I want to warn the methods that calls this method */
        processingEnvironment
                .getMessager()
                .printMessage(
                        Kind.WARNING,
                        String.format(
                                "Do not use high cost method %s. Instead use %s method.",
                                element, highCostMethod.altMethod()), element);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:43:37.343

使用 AnnotationProcessor 仅适用于包含注释或覆盖方法的文件，但不适用于调用方法。也许有办法解决这个问题，但是你可能会受到项目的限制，因为处理器一次只查看一个项目。

我猜你需要编写一个带有构建器的 Eclipse 插件，它分析所有文件中的代码并检查称为注释的方法。这比注释处理器工作更多，但您也有更多选择。例如，您可以对错误标记实施快速修复。

# git - 在ignoreLowercase = True时将git中的目录重命名为小写的问题

> ID：13201906
> 
> 赞同：46
> 
> 时间：2012-11-02T19:37:28.460
> 
> 标签：git

当我输入`git status`时，我看到：

```
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   DIR/a
# 
```

但是，在我的工作目录中，我看到这个文件实际上被调用`dir/a`了（注意小写`dir`而不是`DIR`）。

**问题：**我想将此修改后`a`的文件添加到暂存区并提交，但我希望它在我的工作目录中（显示`dir/a`） -*与 git 将其视为`DIR/a`*. 我怎样才能做到这一点？

**重要的提示：**

不幸的是，我不能仅仅`git mv DIR/a dir/a`因为`DIR/a`它实际上并不存在于工作树中。

目前我的`.git/config`文件显示`ingorecase = true`，所以我知道我必须将其设置为 false。然而，除了改变这个标志什么都不做之后，`git status`现在显示：

```
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   DIR/a
#
 # Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   dir/ 
```

我预料到了这一点，因为 git 只跟踪内容，并且切换忽略大小写会使 git 认为添加了一个新文件。不幸的是，git 现在认为我有两个文件被修改，而实际上我只有一个。我想`git status`简单地显示`dir/a`（因为它在我的工作目录中）而不是`DIR/a`，与`a`我最近制作的相同差异。

**附加说明**

如果您对这种不稳定的情况最初是如何产生的感到好奇，我已经设法复制了我最初将我的目录的案例从 重命名为 时所犯的愚蠢`DIR`错误`dir`。如果您认为这有助于找到解决此问题的方法，我很乐意进行编辑，以揭示我是如何错误地使 git 如此困惑的。（这涉及到我不小心击中`mv`而不是`git mv`，并且不知道该`ignorecase`标志并将其保留为`ignorecase=true`）。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2015-06-04T21:52:11.390

示例：如果您是小写的 Mydir

```
git mv src/Mydir src/mydirs

git mv src/mydirs src/mydir

git commit -m "Rename folder Mydir to mydir" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-05T22:42:42.403

我找到了解决方法。我不确定是否有更优雅的解决方案，但我已经对此进行了测试，它确实有效。因为 git 仍然认为只有一个文件存在两个文件，所以我实际上必须完全复制目录，删除 git 作为文件跟踪的内容，然后将复制的目录 mv 恢复为原始目录。

(1) 提交任何`dir`需要提交的文件。

(2)`cp -r dir tempDir`

(3)`git add tempDir/`

(4)`git rm -r dir Dir`

(5)`git commit -m "Temporary rename of dir to tempDir"`

(6)`git mv tempDir mms`

(7)`git commit -m "Full rename from DIR to dir complete"`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-08-05T08:09:01.123

您还可以在 git 配置中更改此敏感度。

```
git config core.ignorecase false 
```

# objective-c - 从块具有返回值的函数返回块的语法是什么

> ID：13201908
> 
> 赞同：0
> 
> 时间：2012-11-02T19:37:35.243
> 
> 标签：objective-c, objective-c-blocks

我有一个返回块的函数，这段代码有效：

```
typedef void (^AuthenticationBlock)(NSURLAuthenticationChallenge* challenge);

+ (AuthenticationBlock) defaultAuthenticationBlock
{
    return  ^(NSURLAuthenticationChallenge *challenge)
    {
    .... 
```

但我想改变它，使块返回一个布尔值：

```
 typedef BOOL (^AuthenticationBlock)(NSURLAuthenticationChallenge* challenge); 
```

但我不知道我需要做什么才能让 return 语句与这个更改一起编译

# asp.net - 条件中的 DateTime.TryParse 引发异常

> ID：13201909
> 
> 赞同：0
> 
> 时间：2012-11-02T19:37:42.233
> 
> 标签：asp.net, vb.net, visual-studio-2010, if-statement

在这两个示例中，我都给它一个**字符串**，如下所示：`26-03-17`

将 mvarValor 调暗为字符串 将 dateVarValor 调暗为 DateTime

此代码段在以下位置引发异常`TryParse`：

```
If Not mvarValor = Nothing AndAlso DateTime.TryParse(mvarValor, dateVarValor) Then
    Return Format(dateVarValor, mvarFormat)
Else
    Return strNull
End If 
```

下一个代码片段**不会**抛出异常，而是`False`应该抛出异常：

```
DateTime.TryParse(mvarValor, dateVarValor)
If dateVarValor = Nothing Then
    Return strNull
Else
    Return Format(dateVarValor, mvarFormat)
End If 
```

为什么第一个代码片段给了我一个例外？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:52:25.160

您需要传入一个 Y2K 兼容日期。解析器无法从 2 位数字中分辨出年份。如果您通过 2003-12-25，它将验证该日期确实存在，但 03-12-25 是模棱两可的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:11:16.710

`DateTime.TryParse`抛出三种类型的异常

[http://msdn.microsoft.com/en-us/library/9h21f14e(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/9h21f14e(v=vs.100).aspx)

你一定会得到其中之一。这是 DateTime.TryParse 的正确用法

```
var culture = CultureInfo.CreateSpecificCulture("en-US");

string parsedDateTime = null;

if (DateTime.TryParse(parseMe, culture, DateTimeStyles.None, out dateResult))
{
    parsedDateTime = dateResult;
} 
```

此代码段将解析日期时间而不会引发异常。

我希望这有帮助 ：）

# delphi - 使用 TTime 作为 TDictionary 的键

> ID：13201914
> 
> 赞同：2
> 
> 时间：2012-11-02T19:38:00.097
> 
> 标签：delphi, datetime, dictionary, delphi-2010

我想`TTime`用作 a 的键`TDictionary`，但我遇到了 TTime 比较的问题，因此我正在寻找替代方法。

我的特殊问题是，我试图建立某种议程，将时间放在一边，用一个`TTime`对象表示，然后我将它们存储在`TDictionary`它们的顶部坐标旁边。鉴于我想在网格上绘制任务的时间，我可以根据任务的时间轻松地从字典中检索其顶部坐标。不幸的是，它不起作用，因为[`TTime`比较会产生意想不到的结果](https://stackoverflow.com/questions/13201535/why-do-ttime-comparisons-give-unexpected-results)。我无法可靠地从字典中检索坐标`TTime`。

*   你将如何解决这个问题？
*   您会完全跳过 TDictionary 并采用另一种方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T21:02:15.153

构造`TDictionary`函数接受一个`IEqualityComparer<TKey>`参数，它将用于比较键值。实现该接口`TTime`（通过继承自[`TEqualityComparer`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Generics.Defaults.TEqualityComparer)）并用于[`SameTime`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.DateUtils.SameTime)执行比较。

# mysql - 如果记录不存在，MySQL INSERT SELECT FROM multiple tables

> ID：13201916
> 
> 赞同：0
> 
> 时间：2012-11-02T19:38:00.690
> 
> 标签：mysql

我正在尝试运行一个基本上如下所示的查询：

```
INSERT INTO lessons_skills_xref (lessons_id, skills_id)
SELECT id FROM lessons, (SELECT id FROM skills WHERE title = "title 1")
/* PSEUDO CODE - Where the ids for both lesson and skill don't already exist */ 
```

不知道如何完成最后一部分。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:43:10.163

假设`lessons_skills_xref`(lessons_id,skills_id) 上有一个唯一键，一个简单的方法就是使用`INSERT IGNORE`

```
INSERT IGNORE INTO lessons_skills_xref (lessons_id, skills_id)
SELECT id, (SELECT id FROM skills WHERE title = "title 1") FROM lessons 
```

如果`INSERT IGNORE`记录不存在，语法将插入记录，如果记录已经存在，则忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:40:21.373

```
INSERT INTO lessons_skills_xref (lessons_id, skills_id)

SELECT lessons.id, skills.id FROM lessons
inner join skills on <join criteria here>

where not exists (select 1 from lessons_skill_xref x where
                  x.lessons_id = lessons.id and x.skills_id = skills.id)

and skills.title = "title 1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:53:59.790

您是否尝试在每个课程 ID 和“标题 1”技能的技能 ID 之间生成笛卡尔连接？我不确定您的 SELECT 子句是否有效。这可能：

```
 INSERT INTO lessons_skills_xref (lessons_id, skills_id)
    (SELECT l.id, s.id FROM lessons l, skills s 
        WHERE s.title = "title 1"
        AND NOT EXISTS 
            (SELECT * FROM lessons_skills_xref 
                WHERE lessons_id=l.id 
                AND skills_id=s.id)
    ); 
```

请注意，这是未经测试的。

# android - 应用计费中的 Android SQLite

> ID：13201925
> 
> 赞同：1
> 
> 时间：2012-11-02T19:38:41.423
> 
> 标签：android, sqlite, in-app-billing

我有一个测验应用程序，它用大约 20 个不同类别的问题填充了一个 sqlite 数据库。我想在应用计费中实现，例如，如果有人购买 Category1，那么这些问题将被添加到数据库中，而不是其他问题。我的一些问题属于两类，所以让我们说 Category1 和 Category2。

```
try {
            for (int n = 1; n < sqlString.length; n++) {

                db.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES ("
                        + sqlString[n] + ");");

            }
            db.setTransactionSuccessful();
        } finally {
            db.endTransaction();
        } 
```

这是我当前在 SQLite 类的 onCreate 方法中设置的。sqlString 是一个字符串数组，包含我到目前为止的所有 500 个问题。

我将存储一个类别是否已在另一个表中购买（但我愿意接受有关如何执行此操作的其他建议）。我计划创建一个类，该类读取该数据库，设置布尔值 true 或 false，无论是否已购买每个类别。所以

```
boolean cat1 = CheckIfCategoryHasBeenBought(category1) 
```

等等，如果它已经被买了，我会实现一个方法，比如

```
boolean[] catChecker = {cat1, cat2, cat3, etc....}
SQLite info = new SQLite(this);
info.open();
info.addQs(catChecker)
//this will pass the true and false boolean values for each method then 
//based on that I choose to implement or not
info.close(); 
```

但是我不知道这是否是一个好方法。我不确定如何检查该值是否已添加（因为它与已购买的另一个类别交叉）。我在想一个光标最好检查是否已经添加了值但是我如何让光标进行搜索？

我认为可以实现的方法是

1）我只使用与购买的问题相关的字符串创建一个字符串数组。2) 我在上面的 for 循环中创建一个 if 语句，用于检查字符串是否来自已购买的类别 3) 我将值“null”赋予所有尚未购买的字符串，然后添加一个 if 语句仅执行 SQL if sqlString[n] 不为空。

你们知道如何最好地设置它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:54:43.387

有很多方法可以做到这一点，我认为会有不止 1 个好的答案。如果您有服务器，则可以执行诸如返回授权数据库/字符串/等列表之类的操作。您可以使用它来引用不同的表。您还可以创建表或使用下载表的共享首选项。名单还在继续。

服务器选项将增加一层安全性。存储的表索引更容易被盗用，但也可能更容易实现，并使您能够离线使用类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:31:42.117

您是否考虑过从一个完整的数据库开始——即包含任何人都可以购买的所有问题——然后删除那些不再适用的问题？

# git - git可以自动识别相同的提交（具有不同的哈希）

> ID：13201927
> 
> 赞同：3
> 
> 时间：2012-11-02T19:38:44.260
> 
> 标签：git, version-control, merge

我有一种情况，我有两个已被复制和损坏的存储库历史记录（通过围绕 SVN 的交互和迁移——不是我的选择）。我在同一个临时维护存储库中将两个存储库作为远程存储库。他们共享数百个历史提交，然后“旧”提交在几个分支上继续进行几十个。我需要将“新”树快进到旧树的状态。然而，由于重整，尽管它们具有相同的内容，但它们不会被识别为同一棵树。

我想告诉 git “这两个提交是相同的，尽管作者不同”（作者 ID 在翻译中被混淆了）。如果可能的话，我真的很喜欢它是否可以遍历两个远程树并为每个具有相同内容的节点建立关联。这意味着我可以在两者上手动标记“commit 1”，然后让它完成剩下的工作。否则我需要手动标记每个分歧的根源（不会太糟糕，但不希望这样做）。

我尝试使用移植点，这几乎是我想要的——gitk 显示了我想要的，但是当我将它推回主（新）存储库时，它拖着数百个重复提交。这样做也有点烦人，因为我必须为尚未合并的子节点这样做。

我找到了[https://stackoverflow.com/a/973403/372757](https://stackoverflow.com/a/973403/372757)，并认为它会起作用：我只需要将旧提交重新定位到新存储库，每个分支一次。

尽管如此，我仍然想知道我最初的请求是否可行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:31:55.937

`git`对什么是“相同的提交”有一个非常严格的定义，这可能与您的想法不符。为了成为相同的提交，以下所有条件都必须为真：

1.  树中要提交的每个文件都必须与提交中将成为新提交的父文件（即当前 HEAD）的同一文件逐字节相同
2.  没有新文件，没有删除文件，没有重组 - 树必须完全匹配，因为树的 SHA1 取决于它包含的文件和子树；如果树上的任何叶子不同，则顶层树的 SHA1 将不同
3.  完全相同的作者和提交者姓名和电子邮件值
4.  完全相同的作者和提交日期
5.  HEAD 的当前值完全相同，它成为新提交的父级
6.  完全相同的提交信息
7.  可能还有我遗漏的其他一些细节

所有这些东西都直接或间接用于为新提交生成 SHA1 哈希，因此除非真正相同，否则提交不会相同。

也就是说，我认为可能更符合您的问题，在生成新提交时，如果特定文件或树与数据库中已经存在的对象逐字节相同，因为另一个提交具有那些处于完全相同状态的事物，那么新的提交将指向那些已经存在的对象——它们不会被再次存储。

如果只有两个分支中不同的作者信息（这将是不同的提交序列，即使文件内容与另一个分支完全匹配），您可以使用`git filter-branch`或`git rebase`重写一个分支，随时修复信息，但是将导致一组全新的提交（但所有树和文件对象都可能保持不变，假设您除了提交消息、时间或作者/提交者名称之外没有更改任何内容）。但是请注意，如果其他工作（您自己或其他人）已经基于现有分支，则进行此类更改可能会涉及大量清理工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:45:14.147

您的问题是重新定义提交平等。我认为您应该使用`git cat-file`并`grep`过滤提交的相关信息。也许树线对你来说已经足够了（比如，`git cat-file commit <COMMIT_ID> | grep "tree"`），但我认为包含父树也很好（不仅仅是提交的 ID，因为它们会有所不同）。

`git rev-list`一旦你有了这个相等功能，我认为你的 repo 和对它们进行一些重复搜索就很重要了。

# c# - 并发访问列表：如果对象被删除或列表设置为空会发生什么？

> ID：13201929
> 
> 赞同：0
> 
> 时间：2012-11-02T19:38:59.700
> 
> 标签：c#, multithreading, concurrency, locking

我有一个包含对象**List<> my_objects**的列表。多个线程可以更改此列表。假设我没有任何锁定机制来控制对列表的访问。

如果我正在使用列表中的一个对象并且突然另一个线程将数组设置为空，会发生什么情况？

```
 MyObject o = my_objects[i];

    //now a second thread has set my_objects to null
    o.myMethod(); 
```

会发生 NullPointerException 吗？

此外，如果第二个线程在我在第一个线程中使用它时从列表中删除了考虑的对象，会发生什么？

```
 //second thread:
   //y = i
   MyObject o2 = my_objects[y];

   my_objects.Remove(o2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:45:31.663

> 如果我正在使用列表中的一个对象并且突然另一个线程将数组设置为空，会发生什么情况？

没什么，如果您已经将相关引用复制到局部变量。

如果在此行*之前*`my_objects`另一个线程设置为 null ，您将收到异常：

 *```
MyObject o = my_objects[i]; // my_objects must be non-null 
```

的值`o`只是对对象的引用。它*不*知道您碰巧从中获取它的列表或数组。收集可能是垃圾收集，任何事情都可能发生 - 引用和对象本身都不会受到影响。

（正如 Henk 所说，从列表中删除元素可能会导致问题 -`List<T>`不是线程安全的 - 但这与我理解你所问的问题不同。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:44:19.377

在这两种情况下，您已经获得了对该对象的引用，并且更改列表对对象本身没有影响。由于对象本身的状态（例如 NullReferenceException），您不会得到任何异常。

但是，由于同时访问`List<T>`. 您应该在访问列表时使用锁定，或者更好的是，查看[System.Collections.Concurrent](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)命名空间中的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:54:47.373

```
MyObject o = my_objects[i];

//now a second thread has set my_objects to null, and/or invoked my_objects.Remove(o)
o.myMethod(); 
```

没关系。该变量`my_objects`保存对对象的*引用*，而不是对象本身。当您创建一个新变量`o`时，它会保存对同一对象的第二个引用。然后你 clear `my_objects`，这意味着你不能再引用实际的对象`my_objects`了。但这并不能改变您仍然拥有的事实，您仍然`o`可以通过`o`. （*这*反过来又意味着对象本身仍然存在。C# 是一种垃圾收集语言，这首先意味着对象保证会一直存在，直到你用完它们。非托管 C++ 在在这方面，Objective-C 在第三个方面有所不同。不是你问的。）

实际上，在这方面，*引用的* `MyObject`行为就像原始类型一样，如`int`. 如果我有一个数组`int`，我会

```
int oi = my_ints[i]; 
```

然后我可以做任何我想做的事情`my_ints`（清除它，从中删除项目），这不会改变`oi`仍然存在的事实。

*关于引用类型*的事情`MyObject`，以及你对这个问题感到困惑的原因是，`MyObject`两个变量 (`o`和`my_objects[i]`) 仍然*引用*同一个实际对象，所以如果你通过 改变对象`my_objects[i].gainSpiderPowers()`，你会看到效果无论您是查看 via`my_objects[i]`还是 via ，该突变都会发生`o`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T19:45:48.983

考虑使用 ReadOnlyCollection。它位于 System.Collections.ObjectModel 命名空间中。*

# ios - 在应用程序购买警报视图未显示

> ID：13201931
> 
> 赞同：1
> 
> 时间：2012-11-02T19:39:05.273
> 
> 标签：ios, in-app-purchase, app-store-connect

我是这个领域的新手，想在我的应用程序中集成应用程序购买。我已经成功地在应用程序购买中运行了所有功能并对其进行了多次测试，并且显示了正确的结果。但是现在在我的设备和模拟器中都没有出现在应用程序购买警报视图中单击购买按钮。有没有人遇到过这个问题。

请针对上述问题提出任何解决方案。

# intersystems-cache - 如何测试对象数组是否包含字符串？

> ID：13201933
> 
> 赞同：0
> 
> 时间：2012-11-02T19:39:09.730
> 
> 标签：intersystems-cache

在 C# 中，我可以这样做：

```
public string[] MyStrings;
...
...
if(MyStrings.Contains("bob")) ... 
```

**在 ObjectScript 中这是如何完成的？**

对于`%ArrayOfObjects`类型，我看不到我在[这里寻找的确切内容](http://docs.intersystems.com/cache20122/csp/documatic/%25CSP.Documatic.cls?APP=1&LIBRARY=%25SYS&CLASSNAME=%25Library.ArrayOfObjects)

我试过的：

```
#Dim MyStrings As %ArrayOfDataTypes
do MyStrings.SetAt("User","User")   
do MyStrings.SetAt("Users","Users")
do MyStrings.SetAt("Group","Group")
do MyStrings.SetAt("Groups","Groups")

// if MyStrings contains Groups
if MyStrings.GetAt("Groups") '= ""
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:03:34.090

听起来您想要[.IsDefined() 方法](http://docs.intersystems.com/cache20122/csp/documatic/%25CSP.Documatic.cls?APP=1&LIBRARY=%25SYS&CLASSNAME=%25Library.ArrayOfObjects)。例如：

```
#Dim MyStrings As %ArrayOfDataTypes
do MyStrings.SetAt("User","User")   
do MyStrings.SetAt("Users","Users")
do MyStrings.SetAt("Group","Group")
do MyStrings.SetAt("Groups","Groups")

// if MyStrings contains Groups
if MyStrings.IsDefined("Groups")
{
    // code to execute if MyStrings contained "Groups"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:15:40.917

我不熟悉那种语言，但你能试试类似的东西：

```
//declare myString to hold a string
set myString = MyStrings.GetNext("")
While myString '= ""
{
    if MyStrings.GetAt(myString) '= ""  //Or should it be something like myString.value?  Is there a way to check the type of an object to see if it is a string?
    {
        //Do something here.  Exit loop if you are trying to find just a match.
    }
} 
```

我假设`'=`相当于`!=`在 C# 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T20:18:33.087

你做对了。我建议使用您自己的方法创建 %Library.ArrayOfDataTypes 的子类，例如“包含”。

使用您自己控制的类可能比您不使用的库类更安全一些（尽管在紧要关头，您总是可以使用 %Dictionary 包方法将对库类的所有引用切换到您的新类设计，所以这没什么大不了的）。

# java - 禁用按钮刷新浏览器

> ID：13201937
> 
> 赞同：1
> 
> 时间：2012-11-02T19:39:24.520
> 
> 标签：java, javascript, jquery

我在发送消息时遇到问题。我创建了一个带有调用表单的 jsp 页面，以使用 Post 方法发送消息。当我单击浏览器 FF 上的按钮刷新时，它会自动再次发送消息。我不想再发了。我怎么能禁用按钮刷新？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T19:41:26.563

你不能。

相反，使用[POST-Redirect-GET](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式。

1.  让表单发布到表单处理程序
2.  处理表单数据以发送消息
3.  重定向到另一个 URI
4.  浏览器将获取另一个 URI
5.  如果刷新浏览器，将使用 GET 请求另一个 URI，不会重新提交表单。

# android - 设置列表导航模式下拉窗口的滚动位置？

> ID：13201941
> 
> 赞同：0
> 
> 时间：2012-11-02T19:39:28.597
> 
> 标签：android, navigation, android-actionbar, android-spinner

我正在使用`ActionBar.NAVIGATION_MODE_LIST`并且我有一个用于`Spinner`.

我已经设法做我需要的一切，但只有一件我无法弄清楚的缺失的东西..

当一个项目被选中时，下次显示 DropDown 时，之前选择的选项是第一个被选中的。我希望 DropDown 显示列表中的第一项。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:05:01.770

调用. `setSelectedNavigationItem()`_ `ActionBar`虽然当你`Spinner`在某些方向上`NAVIGATION_MODE_TABS`使用`NAVIGATION_MODE_LIST`.

# java - PowerMock 可以为测试用例实例化一个内部类吗？

> ID：13201943
> 
> 赞同：12
> 
> 时间：2012-11-02T19:39:37.997
> 
> 标签：java, powermock

我正在尝试使用许多私人课程来测试一个课程（是的，我知道这通常被认为是可测试性的不良做法，但这个问题与设计原则无关）。我的课看起来像这样：

```
public class EnclosingClass {
  .
  .
  .
  private class InnerClass implements InnerClassType {
     public InnerClass(){ /* do stuff */}
     public int InnerClassMethod();
  }
} 
```

*   `InnerClassType`是一个公共接口

我尝试通过执行以下操作使用 powermock 实例化类：

```
Class clazz = Whitebox.getInnerClassType(EnclosingClass.class, "InnerClass");
Constructor constructor = Whitebox.getConstructor(clazz, null);
InnerClassType innerClass = (InnerClassType) constructor.newInstance(null); 
```

并且：

```
Class clazz = Whitebox.getInnerClassType(EnclosingClass.class, "InnerClass");
InnerClassType innerClass = (InnerClassType) Whitebox.invokeConstructor(clazz); 
```

但是，在这两次尝试中，我都得到了`ConstructorNotFoundException`

是否可以实例化这些内部类？如果是这样，我哪里错了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T00:11:54.047

您应该能够通过以下模块超越您的 ConstructorNotFoundException 到您的第一次努力：

```
Class clazz = Whitebox.getInnerClassType(EnclosingClass.class, "InnerClass");
Constructor constructor = Whitebox.getConstructor(clazz, EnclosingClass.class);
InnerClassType innerClass = (InnerClassType) constructor.newInstance(new EnclosingClass()); 
```

由于您的内部类不是静态的，因此它隐含地期望来自外部类的“this”引用。使用这种方法，看起来你必须明确地使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-25T13:24:47.933

你可以像这样模拟它：

```
InnerClassType innerClass = (InnerClassType) Mockito.mock(
    Class.forName(EnclosingClass.class.getName() + "$InnerClass")
); 
```

# java - 动态/现场 JTextfield 到 JLabel

> ID：13201951
> 
> 赞同：1
> 
> 时间：2012-11-02T19:40:19.470
> 
> 标签：java, swing, dynamic, jlabel, jtextfield

我想让一对 JTextField/JLabel 像在 StackOverflow 上一样工作，我的意思是当我在 JTextField 中编写字符串时，我希望在 JLabel 中显示一个字符串。

我尝试将 ActionListener 添加到 JTextField 但它仅适用于 ENTER。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:43:08.613

DocumentListener 应该允许您从不断变化的文本字段接收更新。我认为您只需要覆盖 changeUpdate 方法。祝你好运！

[http://docs.oracle.com/javase/6/docs/api/javax/swing/event/DocumentListener.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/DocumentListener.html)

# c# - 找不到与绑定 WSHttpBinding 的端点的方案 http 匹配的基地址。注册的基地址方案是 [https]

> ID：13201954
> 
> 赞同：0
> 
> 时间：2012-11-02T19:40:23.183
> 
> 标签：c#, wcf, web-config, wshttpbinding

我去过几个关于如何纠正这个错误的网站，但无法摆脱这个错误。我将它托管在启用 SSL 的 IIS 6 上。下面是我的配置

```
 <services>
            <service behaviorConfiguration="UsernamePasswordBehavior" name="DataServices.BEService">    

                <endpoint address="mex" binding="mexHttpsBinding" name="mex" contract="IMetadataExchange"  listenUri="https://mysite/beservice.svc"/>

                <endpoint address="wsbe" binding="wsHttpBinding" bindingConfiguration="wsHttpWithUsernamePassword"
                    name="BEwsHttp" contract="DataServices.IBEService" listenUri="https://mysite/beservice.svc" />               
            </service>
</services>

    <bindings>          
        <wsHttpBinding>
                    <binding name="wsHttpWithUsernamePassword" sendTimeout="00:06:00"  receiveTimeout="00:06:00">
                        <security mode="Message">
                            <message clientCredentialType="UserName"/>
                            </security>                    
                    </binding>
            </wsHttpBinding>
        </bindings>

     <behaviors>
                <serviceBehaviors>
                   <behavior name="UsernamePasswordBehavior">
                        <serviceMetadata httpsGetEnabled="true"/>
                        <serviceDebug includeExceptionDetailInFaults="true" />                    
                        <serviceCredentials>
                            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="DataServices.CustomUsernameValidator, DataServices" />
                            <serviceCertificate findValue="*.mysite.com" storeLocation="LocalMachine" storeName="My"  x509FindType="FindBySubjectName"/>                        
                        </serviceCredentials>                                      
                    </behavior>                
                </serviceBehaviors>
            </behaviors> 
```

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:44:10.650

听起来您托管的 IIS 网站实例仅配置为 HTTPS (SSL)。右键单击网站实例并选择“编辑绑定...”。您看到那里列出了端口 80（纯 HTTP）吗？还要检查“SSL 设置”功能以确保“始终需要”选项未打开。- 取自堆栈溢出本身。当您在配置中仅使用消息安全性时，它可以工作，必须有一个非 HTTPS/SSL 地址绑定到该站点。当您在本地计算机上使用自签名证书时，您的代码是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:54:19.700

我认为你需要使用

```
<security mode="TransportWithMessageCredential"> 
```

对于您的安全模式，而不是 Message ？

# oracle - 如何像 .pks 一样打开 .sql？

> ID：13201956
> 
> 赞同：0
> 
> 时间：2012-11-02T19:40:32.647
> 
> 标签：oracle, oracle-sqldeveloper

任何人都知道如何在 Oracle Sql Developer 工具中使用相同的 .pks 文件编辑器打开 .sql 文件？

# matlab - MATLAB从灰度（INTESITY）到真彩色（RGB）的转换

> ID：13201960
> 
> 赞同：0
> 
> 时间：2012-11-02T19:40:54.197
> 
> 标签：matlab, colors

我知道如何做相反的事情，`rgb2gray(img)`但我**找不到**`gray2rgb(img)`可以从*grayscale*转换为*truecolor*的函数。

有没有其他功能可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:44:36.487

[Gabriel Frangakis 制作的不错的功能](http://www.mathworks.com/matlabcentral/fileexchange/28111-gray2rgb/content/gray2rgb.m)：

```
function [Image]=gray2rgb(Image)
%Gives a grayscale image an extra dimension
%in order to use color within it
[m n]=size(Image);
rgb=zeros(m,n,3);
rgb(:,:,1)=Image;
rgb(:,:,2)=rgb(:,:,1);
rgb(:,:,3)=rgb(:,:,1);
Image=rgb/255;
end 
```

你应该为每个坐标制作灰度值`RGB`

# web - 无法访问使用 CouchDB 在本地运行的 Web 应用程序

> ID：13201962
> 
> 赞同：1
> 
> 时间：2012-11-02T19:41:07.427
> 
> 标签：web, couchdb

我有一个使用 CouchDB 在本地运行的 Web 应用程序。我正在尝试从我的手机和平板电脑访问该应用程序，但我无法访问它。我很困惑...该应用程序在 localhost:5984/myDb/_design/myDesign/mypage.html 上运行。有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:48:42.753

好的，所以对于像我这样无法想出原因的任何人来说...... :)

在默认配置 (local.ini) 中，bind_address 选项设置为 127.0.0.1。如果您将 bind_address 选项更改为 0.0.0.0，那么您将能够远程访问 CouchDB。进行此更改后重新启动 CouchDB。

# facebook - 特定帖子的点击次数

> ID：13201964
> 
> 赞同：0
> 
> 时间：2012-11-02T19:41:11.633
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

是否有可能获得特定帖子的多次点击？

我找到了这个主题[Get number of clicks on my post](https://stackoverflow.com/questions/9098624/get-number-of-clicks-on-my-facebook-post)，但是当我这样做时

```
https://graph.facebook.com/8062627951_10151315594152952/insights 
```

或者

`https://graph.facebook.com/8062627951_10151315594152952/insights/post_engaged_users`

即使我将 id 更改为 App ID，它也会返回一个空数据数组。

Regads，
埃尔卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:41:03.260

您需要为发布帖子的页面附加访问令牌以获取洞察数据。例如：

```
https://graph.facebook.com/8062627951_10151315594152952/insights/post_engaged_users/&access_token=ACCESSTOKEN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:07:48.100

您可以使用 Facebook PHP SDK 来提取该信息，如下所示：

```
$array = $facebook->api('/8062627951_10151315594152952/insights/post_engaged_users/'); 
```

它将包括授权用户的所有正确访问令牌等。

# jquery - 嵌套排序作为拖动目标

> ID：13201967
> 
> 赞同：0
> 
> 时间：2012-11-02T19:41:17.693
> 
> 标签：jquery, jquery-ui-sortable, jquery-ui-draggable

我正在构建一个拖放大纲工具。它`.sortable()`以嵌套方式使用 jQueryUI 来构建元素树。我还有一个项目调色板`.draggable()`，可以将其拖到任何给定级别的大纲中。

将新项目放入树的最顶层可以正常工作。但是当我将一个放到第二层时，该项目会被复制。当我将一个放到第三级时，该项目会被复制两次！我在这里将问题归结为本质：http: [//jsfiddle.net/curtisfarnham/TGAqW/](http://jsfiddle.net/curtisfarnham/TGAqW/)

我怎样才能防止物品在放入树的较低级别时被重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:02:25.793

这是 jquery ui 1.8 系列中的一个错误，事件冒泡。

请参阅使用 jquery ui 1.9.1 更新的 jsFiddle

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script> 
```

[http://jsfiddle.net/TGAqW/3/](http://jsfiddle.net/TGAqW/3/)

# wordpress - 视频未显示在 WordPress 页面上

> ID：13201974
> 
> 赞同：0
> 
> 时间：2012-11-02T19:41:42.997
> 
> 标签：wordpress

由于某种原因，该视频没有出现在 WordPress 网站上，src 是正确的。他们的代码有错误吗？它被用作文本小部件。

```
 <OBJECT CLASSID="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" WIDTH="400" HEIGHT="240" CODEBASE="http://www.apple.com/qtactivex/qtplugin.cab">
    <PARAM name="SRC" VALUE="http://www.preschooladvantage.org/wp-content/uploads/2012/05/PA-Presentation-small.m4v">
    <PARAM name="AUTOPLAY" VALUE="false">
    <PARAM name="CONTROLLER" VALUE="true">
    <EMBED SRC="http://www.preschooladvantage.org/wp-content/uploads/2012/05/PA-Presentation-small.m4v" WIDTH="400" HEIGHT="240" AUTOPLAY="false" CONTROLLER="true" PLUGINSPAGE="http://www.apple.com/quicktime/download/"></EMBED>
    </OBJECT> 
```

# xml - xml 解析器 PostgreSQL 6G

> ID：13201977
> 
> 赞同：-1
> 
> 时间：2012-11-02T19:42:19.207
> 
> 标签：xml, parsing, postgresql

每天，我们需要将大约 60,000 个 xml 文件解析为 PostgreSQL 或 mysql 数据库中的 3 个表。每个文件的大小约为 50-300k。有 10 种类型的消息。每个文件都有不同类型的消息。使用什么方法或工具使解析变得健壮、高效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:12:25.023

有很多方法可以解决这个问题。解析 XML 并不是一个独特的问题——几乎任何体面的语言都可以做到这一点。

你在哪个平台？

你最熟悉什么语言？

就**健壮性**而言，Python 是一种出色的语言，具有良好的错误处理能力、非常灵活、开发速度快、易于维护。

如果您选择 python，您将需要使用基于 c 的 xml 扩展来提高速度。看看[http://lxml.de/](http://lxml.de/)，或者 ElementTree 在某些版本中由 ac 模块支持。

更多细节将提示更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:48:59.990

我会使用 Perl、[Mojo::DOM](http://search.cpan.org/~sri/Mojolicious/lib/Mojo/DOM.pm)、[DBIx::Connector](http://search.cpan.org/~dwheeler/DBIx-Connector/lib/DBIx/Connector.pm)和 PostgreSQL。

# visual-studio-2012 - Visual Studio 2012 单元测试尝试加载旧版本的程序集

> ID：13201979
> 
> 赞同：1
> 
> 时间：2012-11-02T19:42:21.703
> 
> 标签：visual-studio-2012, mstest, windows-phone-8

我似乎无法运行任何单元测试。所有错误都遵循以下几行：

```
 Test method TvQueue.UnitTesting.TheTvDb.TheTvDbServiceTest.GetShowbasicTest threw exception: 
System.IO.FileNotFoundException: Could not load file or assembly 'System.Windows, Version=2.0.6.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' or one of its dependencies. The system cannot find the file specified.=== Pre-bind state information ===
LOG: User = JKRTABLET\Jan
LOG: DisplayName = System.Windows, Version=2.0.6.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e
 (Fully-specified)
LOG: Appbase = file:///C:/Users/Jan/Documents/Visual Studio 2012/Projects/TvQueue/TvQueue.UnitTesting/bin/Debug
LOG: Initial PrivatePath = NULL
Calling assembly : TvQueue.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Program Files (x86)\JetBrains\ReSharper\v7.0\Bin\JetBrains.ReSharper.TaskRunner.CLR4.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: System.Windows, Version=2.0.6.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e
LOG: Attempting download of new URL file:///C:/Users/Jan/Documents/Visual Studio 2012/Projects/TvQueue/TvQueue.UnitTesting/bin/Debug/System.Windows.DLL.
LOG: Attempting download of new URL file:///C:/Users/Jan/Documents/Visual Studio 2012/Projects/TvQueue/TvQueue.UnitTesting/bin/Debug/System.Windows/System.Windows.DLL.
LOG: Attempting download of new URL file:///C:/Users/Jan/Documents/Visual Studio 2012/Projects/TvQueue/TvQueue.UnitTesting/bin/Debug/System.Windows.EXE.
LOG: Attempting download of new URL file:///C:/Users/Jan/Documents/Visual Studio 2012/Projects/TvQueue/TvQueue.UnitTesting/bin/Debug/System.Windows/System.Windows.EXE.

    at TvQueue.Data.TheTvDb.TheTvDbService.<GetShow>d__8.MoveNext()
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start(ref TStateMachine stateMachine)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.Start(ref TStateMachine stateMachine)
   at TvQueue.Data.TheTvDb.TheTvDbService.GetShow(Int64 theTvDbId)
   at TvQueue.UnitTesting.TheTvDb.TheTvDbServiceTest.<GetShowbasicTest>d__0.MoveNext() in TheTvDbServiceTest.cs: line 19
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult() 
```

我在开发 Windows Phone 8 代码时遇到了这个问题。出于某种原因，MSTest 想要加载旧版本的程序集（项目中实际引用的程序集是 4.x 或更高版本，MSTest 想要加载 2.x 版本）。

我怀疑这是一个配置问题，但我不知道如何解决它。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:45:43.253

请参阅我关于[如何在 VS2010 中为 Windows Phone 8 应用程序使用 MSTest 的答案](https://stackoverflow.com/a/13035195/95309)

> 项目中实际引用的程序集是 4.x 或更高版本

`System.Windows, Version=2.0.6.0`不是旧版本，而是正确的新版本。而且您实际上看不到单个程序集的版本号，是否没有单个程序集之类的东西。

请记住，主要变化是 Windows Phone 8 和 Windows RT 一样，不再使用直接程序集，而是使用将多个程序集编译成单个 API 的 WinMD 文件。

# jquery - 将单击和绑定按键绑定到输入字段之间的区别

> ID：13201980
> 
> 赞同：0
> 
> 时间：2012-11-02T19:42:25.633
> 
> 标签：jquery

我想防止用户在焦点输入字段内移动光标。别担心，这只会在他们开始用他们自己的值替换默认值之前！

以下代码成功阻止用户使用箭头键移动光标：

```
$('.test').focus(function() {
    $(this).bind('keypress', function(event) {
        if (event.keyCode > 36 && event.keyCode < 41) {
            return false;
        } else {
            return true; 
        }      
    });
}); 
```

但是类似的代码，例如：

```
$('.test').focus(function() {
    $(this).bind('click', false);
}); 
```

不会阻止点击在输入字段内移动光标。这两种情况有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:44:29.703

`keypress`是通过键盘完成输入时触发的事件。`click`是鼠标事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:09:10.413

也许这对你有用：

```
$(".test").focus();
$(".test").bind('keydown', function(event) {
    if (event.keyCode > 36 && event.keyCode < 41) {
        return false;
    } else {
        return true; 
    }      
});
$(".test").bind('mousedown', function(event) {
    return false;
});​ 
```

见[http://jsfiddle.net/zEp36/](http://jsfiddle.net/zEp36/)

这可以防止输入字段上的所有鼠标按下操作。箭头键也被抑制。只需开始输入，您将替换默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:49:14.857

给你，伙计...

```
$('#noclick').on('mousedown click', function() {
          return false;
}); 
```

[小提琴](http://jsfiddle.net/JqSzF/2/)

# mysql - 我需要像 O'Leary 这样的姓氏逃脱

> ID：13201990
> 
> 赞同：0
> 
> 时间：2012-11-02T19:43:32.670
> 
> 标签：mysql

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

MySQL 不允许我输入爱尔兰姓氏，而无需在表单字段中的 ' 之前输入 \。准备数据的最佳方法是什么，以便 ' 自动转义。

# css - 使用ajax加载动态大小的页面

> ID：13201993
> 
> 赞同：0
> 
> 时间：2012-11-02T19:43:45.863
> 
> 标签：css, ajax, jquery

我有一个网站，它利用全宽背景图像以及动态大小的 div 来实现单页平滑滚动。

链接是[http://teneo.telegraphbranding.com/](http://teneo.telegraphbranding.com/)。

我想通过 ajax 加载 about.php，这样侧边栏就不必重新加载，但我没有任何运气。

当您单击侧边栏中的“关于”时，关于页面未正确呈现。似乎容器忽略了 jquery。除了底层背景图像外，它们应该紧挨着侧栏，但不能越过它。

我用这个脚本加载页面：

```
$(document).ready(function () {
var dropDown = $('.dropdown');
$('h3.about').on('click', function() {
    dropDown.slideDown('fast', function() {
        $('#index-wrap').load('about2.php');
    });
});
}); 
```

此外，它不会加载几个没有任何内容但有背景图像并且应该填满屏幕的 div。

```
$(document).ready(function () {
var snapshotWrap = $('#snapshot-wrap');
var w = $(window);
w.bind('load resize',function() {
    snapshotWrap.css({ width:w.width(), height:w.height()});
}); 
```

});

```
$(document).ready(function () {
var snapshotContent = $('#snapshot-content');
var w = $(window);
w.bind('load resize',function() {
    snapshotContent.css({ width:w.width() - 205 });
}); 
```

});

我是否正确使用 jquery/ajax 加载页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:02:38.273

When you load elements of a page with ajax, in order for jquery to use those elements, you have to attach event handlers to those new elements after they have loaded. Look up the documentation for .on() to see how to do this, it will be clear once you've read that page. If you get stuck again, be sure to make a new question.

So instead of using the .click() function you might say:

```
$("#object").on("click", function(event){
alert($(this).text());
}); 
```

# javascript - 将数字转换为字母javascript

> ID：13201994
> 
> 赞同：20
> 
> 时间：2012-11-02T19:43:47.347
> 
> 标签：javascript, implicit-conversion

我正在尝试将数字转换为字母。我正在制作一个需要数字或数字和字母的 div 数组。所以1-3只是1-3。但是4-13需要是a/4、b/5、c6等等。有没有办法可以轻松地将这些数字转换为字母。也许将 ascii 值更改一定数量？

```
 for(var i = 1; i < 33; i++){
    if( i < 4 || (i > 13 && i < 20) || i > 29){
        $('#teeth-diagram').append("<div class='tooth' id='" + i + "'>&nbsp;</div>");
    }else{
        $('#teeth-diagram').append("<div class='tooth' id='" + Letter goes here + "/" + i + "'>&nbsp;</div>");
    }
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-02T19:49:02.087

由于 97 是“a”的 ascii 值，而“a”的值为 3，因此您需要这样做才能将整数的值转换为字符：

```
if(i>=3){
    String.fromCharCode(94 + i);
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-02T19:48:53.560

是的你可以。使用`var letter = String.fromCharCode(number);` 要获得小写 a，数字将是 97，b 将是 98，依此类推。对于大写 A 65，B 将是 66，依此类推。有关示例，请参[见此 JSFiddle](http://jsfiddle.net/RZXDz/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-03-24T17:14:52.213

你可以使用这个`String.fromCharCode(x)`函数，你只需要传递正确的索引（例如：*97 = a, 98 = b*）

```
const numberA = 1; // 1 = A, 2 = B,...., 26 = Z
const numberB = 2; 

//lowercase (start in CharCode 97)
console.log( String.fromCharCode(96 + numberA) ); //a
console.log( String.fromCharCode(96 + numberB) ); //b

console.log("------------");

//uppercase (start in CharCode 65)
console.log( String.fromCharCode(64 + numberA) ); //A
console.log( String.fromCharCode(64 + numberB) ); //B 
```