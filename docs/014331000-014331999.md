# StackOverflow 问答 14331000-14331999

# java - jsp中的表单内的表单

> ID：14331000
> 
> 赞同：1
> 
> 时间：2013-01-15T04:05:10.360
> 
> 标签：java, forms, jsp, jsp-tags

我有一个jsp页面。在该 jsp 中，用户通过选择用户来激活功能的一种形式。而且我有一个搜索字段来搜索用户喜欢

```
<div class="quick-search-input-container"> 
<label id="quick-search-input-label" for="quick-search-input">Quick Search</label><s:textfield  name="quick-search-input"  id="quick-search-input" maxlength="50" value=""></s:textfield>
        <input type="button" class="grey-button" name="quick-search-submit" id="quick-search-submit" value="Search" onclick="searchSubmit()" />
        </div> 
```

通过单击我为搜索编写了一个操作，但是当我通过键盘单击输入按钮时我想搜索。

我应该在表格内有一个表格吗？这是最佳做法吗？或任何其他解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:11:46.890

您可以为此使用 AJAX。只需绑定搜索按钮的 onclick 事件即可对 servlet 执行 ajax 调用，然后从 servlet 发回响应，然后将其显示在 webapge 上的任何位置。

这是一个很好的教程，它解释了如何在你的 jsp 中使用 Jquery Ajax 并从 servlet 发送响应：[Login through database with help of jQuery 'ajax' & JSP](http://www.roseindia.net/tutorial/jquery/loginValidation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:13:27.603

这个解决方案怎么样？

```
function isEnterPressed(ev) {
if(ev.keyCode==13) {searchSubmit();return false;}
}
<s:textfield  name="quick-search-input"  id="quick-search-input" maxlength="50" value="" onkeypress="isEnterPressed(event)"></s:textfield> 
```

# javascript - 移动 safari（和 UIWebView）上的表情符号缩小

> ID：14331001
> 
> 赞同：2
> 
> 时间：2013-01-15T04:05:23.217
> 
> 标签：javascript, ios, css, font-size, emoji

这是一个面向 Objective-C 程序员和 HTML/CSS/Javascript 程序员的问题

当我尝试通过 CSS 将带有大字体的表情符号放在我的网站上时，它在我的笔记本电脑上运行良好，但是当我在 iPhone 的浏览器上查看它时，表情符号会缩小，但其余的文本仍然很大。

在笔记本电脑上访问：http: [//jsfiddle.net/yfvuX/](http://jsfiddle.net/yfvuX/) `然后在 iPhone 上访问...`

 `看到不同？

我怎样才能解决这个问题？在我的 UIWebView (Objective-C) 或网站本身 (HTML/CSS/Javascript) 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T19:30:05.703

当我将字体设置为 Apple Color Emoji 时，它对我有用：

```
font-family: 'AppleColorEmoji'; 
```

但在我看来，这些图标在大尺寸下看起来并不好。`

# php - phpize 和 php api 版本不匹配

> ID：14331003
> 
> 赞同：6
> 
> 时间：2013-01-15T04:05:28.863
> 
> 标签：php, memcached, php-extension

我正在尝试`memcached`在我的 mac 中安装。我已经下载并安装了它。我也将它添加到 php.ini 中。但仍然`memcached`没有加载。我意识到问题在于 和 的API**版本**不匹配。`php``phpize`

这就是我做的时候得到的`php -v`

```
PHP Warning:  PHP Startup: memcached: Unable to initialize module
Module compiled with module API=20090626
PHP    compiled with module API=20100525
These options need to match
 in Unknown on line 0
PHP 5.4.8 (cli) (built: Oct 30 2012 19:29:58) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies 
```

如果有人能帮助我解决这个问题，我将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-05-29T17:00:20.767

是的，您应该通过以下步骤手动构建扩展

```
phpize
./configure --with-php-config=/usr/local/php/bin/php-config
make
make install 
```

确保您运行`phpize`并`php-config`指向正确的 php 版本。

不在`/usr/bin/phpize`和`/usr/include/php`

确保使用`--with-php-config`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T04:44:22.613

您将需要手动构建 PHP 扩展。您最终得到的扩展是针对系统的 PHP 5.3 副本构建的，而不是您自行安装的 PHP 5.4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T15:43:13.813

根据你的php版本下载phpX.X.tgz，解压并复制php.z、zend_modules.h、zend_extension.h文件到include目录下（你可以通过编辑文件并搜索找到正确的api版本）定义 API_VERSION 它必须与 phpinfo 显示的 api 编号匹配）

换句话说，当您构建扩展时，您必须包含正确的 .h 文件，它可以从 phpxx.tgz 源获得

# php - 你能帮我找出发生了什么吗？

> ID：14331005
> 
> 赞同：-1
> 
> 时间：2013-01-15T04:05:34.107
> 
> 标签：php, mysql

任何人都可以帮助找到我发生了什么吗？我想设置优惠券兑换功能。

```
<?php
    include("mysql_connect.inc.php");
    $coupon1 = $_POST['coupon1'];
    $check = $_POST['check'];
    $sql = "UPDATE coupon_table SET check='$check' WHERE coupon1='$coupon1'";      
    if(mysql_query($sql))
    {
        echo 'success!';
        echo '<meta http-equiv=REFRESH CONTENT=2;url=redempt.php>';
    }
    else
    {
        echo 'fail!';
        echo '<meta http-equiv=REFRESH CONTENT=2;url=redempt.php>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T04:08:49.100

`CHECK`是 MySQL 中的[**保留字**](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。像这样逃脱它：

```
UPDATE coupon_table 
SET `check` = '$check' 
WHERE coupon1 = '$coupon1'; 
```

**请注意：**最好避免使用这些保留字作为对象名称，并且强烈建议不要使用它们。

# jquery - jQuery 模板将 JSON 数据显示为格式化的 HTML

> ID：14331016
> 
> 赞同：1
> 
> 时间：2013-01-15T04:07:08.160
> 
> 标签：jquery, json

我在使用查询模板显示一些 json 数据时遇到了困难：

这是我的代码：

这是json：

```
{
    "title": "The ppt presenation",
    "date_created": "9242010",
    "last_modified": "9242011",
    "author": "Mistic Frenzies",
    "slides": [
        {
            "Slide": "1",
            "header": "sdfsdf",
            "src": "ghkkgh.jpg",
            "Content": [
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                }
            ]
        },
        {
            "Slide": "2",
            "header": "sdfsdf",
            "src": null,
            "Content": [
             {
                    "bullet": ""
                },
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                }
            ]
        },
        {
            "Slide": 3,
            "header": "dsggd",
            "src": "sdfsdf.jpg",
            "Content": [
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                },
                {
                    "bullet": ""
                }
            ]
        }
    ]
} 
```

这是JavaScript：

```
<head>
<style type="text/css"></style>
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>

<script id="ititemplate" type="text/x-jquery-tmpl">
    <h2>${title}</h2>
    <li>${author}</li>
        {{each slides}}
            <h3>${header}</h3>
            <li>${slide}</li>
            <ol>
                {{each Content}}
                    <li style="background-color:#98FB98;">${bullet}</li>
                {{/each}}
            </ol>
        {{/each}}
</script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#powerpoint').click(function() {
            //var jsonloc = "ppt.json";
            $.getJSON('ppt.json',function(info){
                $('#header').empty();
                $('#ititemplate').tmpl(info).appendTo('#header');                       
            });                                 
        }); 
    });

</script>

</head>
<body>

<a href="#" id="powerpoint">Powerpoint</a>
<div id="header">
</div>
</body> 
```

所以，我不确定出了什么问题。当我单击 html 链接以显示数据时，什么也没有出现。我想知道我创建的模板是否有问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:48:57.043

代码看起来不错。我认为 getJSON 需要更长的时间来返回信息，并且您的代码在完成之前正在执行 appendTo 命令。您可以在 jquery 中使用 deferred（即 when....then）或使用 $.ajax 并使用其成功方法对信息进行模板化，如下所示：

```
 $.ajax({
            type: "POST",
            url: 'ppt.json',
            data: '{}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (info) {
                 $('#header').empty();
                $('#ititemplate').tmpl(info).appendTo('#header');   
            },
            error: function (jqXHR, textStatus, errorThrown) {
                //failure function goes here..
            }
        }); 
```

希望能帮助到你。

# properties - 自定义用户控件中的重写字体属性未保存在设计器文件中

> ID：14331021
> 
> 赞同：1
> 
> 时间：2013-01-15T04:07:39.710
> 
> 标签：properties, fonts, show

我有一个自定义用户进度条控件，并在显示文本的过程中覆盖了它的字体属性。

当我将用户控件的副本放到表单上时，我可以很好地设置 Font 属性，但是我没有看到我为“字体”设置的值出现在表单的设计器文件中。当我编译/运行我的应用程序时，我输入的值会丢失。

这是代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Windows.Forms;

namespace ProgressBarWithText
{
    /// <summary>
    /// Control that extends the System.Windows.Forms.ProgressBar with
    /// the ability to overlay the percentage or a text message.
    /// </summary>
    [Description(
        "Control that extends the System.Windows.Forms.ProgressBar with the ability to overlay the Text."),
    DefaultProperty("TextVisible"),
    DefaultEvent("TextChanged")]
    public class ProgressBarWithText : ProgressBar
    {
        private const int WM_PAINT = 0x0F;

        /// <summary>
        /// Raised when the visibility of the percentage text is changed.
        /// </summary>
        [Description("Raised when the visibility of the percentage text is changed."),
        Category("Property Changed")]
        public event EventHandler TextVisibleChanged;

        /// <summary>
        /// Raised when the text has changed.
        /// </summary>
        [Description("Raised when the text has changed."),
        Category("Property Changed")]
        public event EventHandler TextChanged;

        /// <summary>
        /// Raised when the font has changed.
        /// </summary>
        [Description("Raised when the font has changed."),
        Category("Property Changed")]
        public event EventHandler FontChanged;

        //private ContentAlignment m_p_align;
        private Font m_Font;
        private Color m_overlayColor;
        private StringFormat m_stringFormat;
        private string m_Text;
        private bool m_TextVisible;

        /// <summary>
        /// Create a new instance of a ProgressbarWithPercentage.
        /// </summary>
        public ProgressBarWithText()
        {
            InitializeComponent();

            m_overlayColor = Color.White;
            m_stringFormat = new StringFormat();
            m_TextVisible = true;
            m_stringFormat.Alignment = StringAlignment.Center;
            m_stringFormat.LineAlignment = StringAlignment.Center;
            if (m_Font == null)
                m_Font = SystemFonts.DialogFont;
        }

        #region Properties

        /// <summary>
        /// Get or Sets the Font of the Text being displayed.
        /// </summary>
        [Bindable(true),
        Browsable(true),
        Category("Appearance"),
        Description("Get or Sets the Font of the Text being displayed."),
        DesignerSerializationVisibility(DesignerSerializationVisibility.Visible),
        EditorBrowsable(EditorBrowsableState.Always)]
        public override Font Font
        {
            get
            {
                return m_Font;
            }
            set
            {
                if (m_Font != value)
                {
                    m_Font = value;
                    Invalidate();
                    OnFontChanged(EventArgs.Empty);
                }
            }
        }

        /// <summary>
        /// Gets or sets the Color that is used to draw the text over a filled section of the progress bar.
        /// </summary>
        [Browsable(true),
        Description("The Color that is used to draw the text over a filled section of the progress bar."),
        Category("Appearance"),
        DefaultValue(typeof(Color), "White")]
        public Color OverlayColor
        {
            get { return m_overlayColor; }
            set
            {
                if (m_overlayColor != value)
                    m_overlayColor = value;
            }
        }

        /// <summary>
        /// Gets or Sets the Text being displayed.
        /// </summary>
        [Browsable(true),
        Category("Appearance"),
        Description("The Text to be displayed or if left null will display a percentage"),
        DesignerSerializationVisibility(DesignerSerializationVisibility.Visible),
        EditorBrowsable(EditorBrowsableState.Always)]
        public override string Text
        {
            get
            {
                if (m_Text != "") return m_Text;
                return Value.ToString() + "%";
            }

            set
            {
                if (m_Text != value)
                {
                    m_Text = value;
                    Invalidate();
                    OnTextChanged(EventArgs.Empty);
                }
            }
        }

        /// <summary>
        /// Gets or sets a value that indicates whether the percentage will be displayed.
        /// </summary>
        [Browsable(true),
        Description("Indicates whether the percentage will be displayed on the progress bar."),
        Category("Appearance"),
        DefaultValue(true)]
        public bool TextVisible
        {
            get { return m_TextVisible; }
            set
            {
                if (m_TextVisible != value)
                {
                    m_TextVisible = value;
                    OnTextVisibleChanged(EventArgs.Empty);
                }
            }
        }

        public new int Value
        {
            get { return base.Value; }
            set
            {
                if (base.Value != value)
                {
                    base.Value = value;

                    /* Needed for XP. Downside is control will be drawn twice
                     * when value coincides with one that the system uses for
                     * repaint. Could maybe use Environment.OSVersion to check? */
                    if (m_TextVisible)
                        Invalidate();
                }
            }
        }

        #endregion Properties

        #region Event Handlers

        protected virtual void OnTextVisibleChanged(EventArgs e)
        {
            EventHandler eh = TextVisibleChanged;
            if (eh != null)
                eh(this, e);
        }

        protected virtual void OnTextChanged(EventArgs e)
        {
            EventHandler eh = TextChanged;
            if (eh != null)
                eh(this, e);
        }

        protected virtual void OnFontChanged(EventArgs e)
        {
            EventHandler eh = FontChanged;
            if (eh != null)
                eh(this, e);
        }

        #endregion Event Handlers

        private void ShowText()
        {
            using (Graphics graphics = CreateGraphics())
            {
                // Draw left side
                Region regionLeft = new Region(new RectangleF(
                    ClientRectangle.X,
                    ClientRectangle.Y,
                    (ClientRectangle.Width * base.Value) / 100,
                    ClientRectangle.Height));
                using (Brush brush = new SolidBrush(m_overlayColor))
                {
                    graphics.Clip = regionLeft;
                    graphics.DrawString(Text, Font, brush, ClientRectangle, m_stringFormat);
                }
                // Draw right side
                Region regionRight = new Region(ClientRectangle);
                regionRight.Exclude(regionLeft);
                using (Brush brush = new SolidBrush(ForeColor))
                {
                    graphics.Clip = regionRight;
                    graphics.DrawString(Text, Font, brush, ClientRectangle, m_stringFormat);
                }
            }
        }

        protected override void WndProc(ref Message m)
        {
            base.WndProc(ref m);
            if (m_TextVisible && m.Msg == WM_PAINT)
                ShowText();
        }
    }
} 
```

以下是更改“字体”属性后保存在设计文件中的内容：

```
namespace WindowsFormsApplication1
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.trackBar1 = new System.Windows.Forms.TrackBar();
            this.progressBarWithText1 = new ProgressBarWithText.ProgressBarWithText();
            ((System.ComponentModel.ISupportInitialize)(this.trackBar1)).BeginInit();
            this.SuspendLayout();
            // 
            // trackBar1
            // 
            this.trackBar1.Location = new System.Drawing.Point(13, 104);
            this.trackBar1.Maximum = 100;
            this.trackBar1.Name = "trackBar1";
            this.trackBar1.Size = new System.Drawing.Size(596, 45);
            this.trackBar1.TabIndex = 1;
            this.trackBar1.Scroll += new System.EventHandler(this.trackBar1_Scroll);
            // 
            // progressBarWithText1
            // 
            this.progressBarWithText1.Location = new System.Drawing.Point(13, 13);
            this.progressBarWithText1.Name = "progressBarWithText1";
            this.progressBarWithText1.Size = new System.Drawing.Size(596, 85);
            this.progressBarWithText1.TabIndex = 2;
            this.progressBarWithText1.Text = "foo";
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(621, 262);
            this.Controls.Add(this.progressBarWithText1);
            this.Controls.Add(this.trackBar1);
            this.Name = "Form1";
            this.Text = "Form1";
            ((System.ComponentModel.ISupportInitialize)(this.trackBar1)).EndInit();
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        #endregion

        private System.Windows.Forms.TrackBar trackBar1;
        private ProgressBarWithText.ProgressBarWithText progressBarWithText1;
    }
} 
```

如您所见，没有为 font 属性设置 progressBarWithText1 参数。有没有办法强制保存它们而无需手动设置它们，或者我做错了什么并且需要进一步的指导？

感谢您抽出宝贵时间参与其中。上帝保佑，

克雷格

附言。这个控制还没有完全完成。我现在只是在写它，然后就挂断了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:41:41.957

这是问题的答案：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Windows.Forms;

namespace ProgressBarWithText
{
    /// <summary>
    /// Control that extends the System.Windows.Forms.ProgressBar with
    /// the ability to overlay the percentage or a text message.
    /// </summary>
    [Description(
        "Control that extends the System.Windows.Forms.ProgressBar with the ability to overlay the Text."),
    DefaultProperty("TextVisible"),
    DefaultEvent("TextChanged")]

    public class ProgressBarWithText : ProgressBar
    {
        private const int WM_PAINT = 0x0F;

        /// <summary>
        /// Raised when the visibility of the percentage text is changed.
        /// </summary>
        [Description("Raised when the visibility of the percentage text is changed."),
        Category("Property Changed")]
        public event EventHandler TextVisibleChanged;

        /// <summary>
        /// Raised when the text has changed.
        /// </summary>
        [Browsable(true),
        Description("Raised when the text has changed."),
        Category("Property Changed")]
        public new event EventHandler TextChanged;

        /// <summary>
        /// Raised when the font has changed.
        /// </summary>
        [Browsable(true),
        Description("Raised when the font has changed."),
        Category("Property Changed")]
        public new event EventHandler FontChanged;

        //private ContentAlignment m_p_align;
        private Color m_overlayColor;
        private StringFormat m_stringFormat;
        private string m_Text;
        private bool m_TextVisible;

        /// <summary>
        /// Create a new instance of a ProgressbarWithPercentage.
        /// </summary>
        public ProgressBarWithText()
        {
            m_overlayColor = Color.White;
            m_stringFormat = new StringFormat();
            m_TextVisible = true;
            m_stringFormat.Alignment = StringAlignment.Center;
            m_stringFormat.LineAlignment = StringAlignment.Center;
        }

        #region Properties

        /// <summary>
        /// Get or Sets the Font of the Text being displayed.
        /// </summary>
        [Bindable(true),
        Browsable(true),
        Category("Appearance"),
        Description("Get or Sets the Font of the Text being displayed."),
        DesignerSerializationVisibility(DesignerSerializationVisibility.Visible),
        EditorBrowsable(EditorBrowsableState.Always)]
        public override Font  Font
        {
            get 
            { 
                return base.Font;
            }
            set 
            { 
                base.Font = value;
                Invalidate();
                OnFontChanged(EventArgs.Empty);
            }
        }

        /// <summary>
        /// Gets or sets the Color that is used to draw the text over a filled section of the progress bar.
        /// </summary>
        [Browsable(true),
        Description("The Color that is used to draw the text over a filled section of the progress bar."),
        Category("Appearance"),
        DefaultValue(typeof(Color), "White")]
        public Color OverlayColor
        {
            get { return m_overlayColor; }
            set
            {
                if (m_overlayColor != value)
                    m_overlayColor = value;
            }
        }

        /// <summary>
        /// Gets or Sets the Text being displayed.
        /// </summary>
        [Browsable(true),
        Category("Appearance"),
        Description("The Text to be displayed or if left null will display a percentage"),
        DesignerSerializationVisibility(DesignerSerializationVisibility.Visible),
        EditorBrowsable(EditorBrowsableState.Always)]
        public override string Text
        {
            get
            {
                if (m_Text != "") return m_Text;
                return Value.ToString() + "%";
            }

            set
            {
                if (m_Text != value)
                {
                    m_Text = value;
                    Invalidate();
                    OnTextChanged(EventArgs.Empty);
                }
            }
        }

        /// <summary>
        /// Gets or sets a value that indicates whether the percentage will be displayed.
        /// </summary>
        [Browsable(true),
        Description("Indicates whether the Text will be displayed on the progress bar."),
        Category("Appearance"),
        DefaultValue(true)]
        public bool TextVisible
        {
            get { return m_TextVisible; }
            set
            {
                if (m_TextVisible != value)
                {
                    m_TextVisible = value;
                    OnTextVisibleChanged(EventArgs.Empty);
                }
            }
        }

        public new int Value
        {
            get { return base.Value; }
            set
            {
                if (base.Value != value)
                {
                    base.Value = value;

                    /* Needed for XP. Downside is control will be drawn twice
                        * when value coincides with one that the system uses for
                        * repaint. Could maybe use Environment.OSVersion to check? */
                    if (m_TextVisible)
                        Invalidate();
                }
            }
        }

        #endregion Properties

        #region Event Handlers

        protected virtual void OnTextVisibleChanged(EventArgs e)
        {
            EventHandler eh = TextVisibleChanged;
            if (eh != null)
                eh(this, e);
        }

        protected override void OnTextChanged(EventArgs e)
        {
            EventHandler eh = TextChanged;
            if (eh != null)
                eh(this, e);
        }

        protected override void OnFontChanged(EventArgs e)
        {
            EventHandler eh = FontChanged;
            if (eh != null)
                eh(this, e);
        }

        #endregion Event Handlers

        private void ShowText()
        {
            using (Graphics graphics = CreateGraphics())
            {
                // Draw left side
                Region regionLeft = new Region(new RectangleF(
                    ClientRectangle.X,
                    ClientRectangle.Y,
                    (ClientRectangle.Width * base.Value) / 100,
                    ClientRectangle.Height));
                using (Brush brush = new SolidBrush(m_overlayColor))
                {
                    graphics.Clip = regionLeft;
                    graphics.DrawString(Text, Font, brush, ClientRectangle, m_stringFormat);
                }
                // Draw right side
                Region regionRight = new Region(ClientRectangle);
                regionRight.Exclude(regionLeft);
                using (Brush brush = new SolidBrush(ForeColor))
                {
                    graphics.Clip = regionRight;
                    graphics.DrawString(Text, Font, brush, ClientRectangle, m_stringFormat);
                }
            }
        }

        protected override void WndProc(ref Message m)
        {
            base.WndProc(ref m);
            if (m_TextVisible && m.Msg == WM_PAINT)
                ShowText();
        }
    }
} 
```

如果您想了解有关 Virtual、New 和 Override 的更多信息，您可以在[了解 C#](http://broadcast.oreilly.com/2009/10/understanding-c-using-virtual.html "http://broadcast.oreilly.com/2009/10/understanding-c-using-virtual.html")网站上找到它们。

谢谢你的时间。

上帝保佑，

克雷格

# ruby-on-rails - 基于关联计数的 Rails 默认范围排序

> ID：14331024
> 
> 赞同：0
> 
> 时间：2013-01-15T04:08:02.203
> 
> 标签：ruby-on-rails

我有一个`Library`，一个`Library`有很多`Book`s。

```
class Library < ActiveRecord::Base
  has_many :book_collectings
  has_many :books, through: :book_collectings 
```

如何使用`default_scope`，以便`Library.all`根据拥有的书籍数量排序`Library`？（或者有不同的方法吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:34:14.740

我同意这个已接受答案的建议：

[覆盖 Rails default_scope](https://stackoverflow.com/questions/1834159/overriding-a-rails-default-scope)

尽可能避免使用默认范围。即使您只使用了一个范围，为了提高性能，我认为您必须编写一些 SQL，这可能有点痛苦并且可能不可移植。我建议考虑一个计数器缓存列。这是适当的 Rails 指南参考：

[http://guides.rubyonrails.org/association_basics.html#belongs_to-counter_cache](http://guides.rubyonrails.org/association_basics.html#belongs_to-counter_cache)

您需要创建迁移。请参阅此答案以获取一些示例代码：

[https://stackoverflow.com/a/1794235/149156](https://stackoverflow.com/a/1794235/149156)

创建列后，您可以创建范围或类方法以按图书计数列排序。

# ios6 - iOS6：Pass 无法添加到 Passbook

> ID：14331025
> 
> 赞同：1
> 
> 时间：2013-01-15T04:08:16.987
> 
> 标签：ios6, passbook

我有一个问题，我可以在我的应用程序中打开存折通行证，但是当我“添加”按钮时，它不能存入存折，只有 PassesViewController 消失。我的通行证可以下载：

[https://ap.loc.sh/passbook/?couponId=50ea8c17e4b09d3fcd677612&memberId=50ef9fcfe4b082578408358f](https://ap.loc.sh/passbook/?couponId=50ea8c17e4b09d3fcd677612&memberId=50ef9fcfe4b082578408358f)

我确定我的 pass.json 是正确的。因为当我删除清单和签名时，使用苹果的存折符号生成的两个文件都可以，但是使用 php pass lib 会带来错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:22:44.547

经过测试我经历了以下（使用运行 iOS 6.1 beta 4 的 iPhone 5）

总之有两个问题；

*   您的网络服务正在发送一个无效的响应`https://ap.loc.sh/passbook/?couponId=486/v1/devices/5bca731a5779527c406213e9a847de97/registrations/pass.socialPoint.passbook/486`（这应该返回一个序列号数组，但只返回 1111）
*   通过您的 Web 服务发送的通行证包含无效数据。

以下是诊断您的问题的步骤，我还包括了设备控制台日志的摘录。

*   pkpass 捆绑包成功添加到 Passbook
*   通行证成功注册到您的网络服务

* * *

```
Jan 15 14:03:03 passd[4219] <Warning>: Generating POST request with URL <https://ap.loc.sh/passbook/?couponId=486/v1/devices/5bca731a5779527c406213e9a847de97/registrations/pass.socialPoint.passbook/486>
Jan 15 14:03:03 passd[4219] <Warning>: Request contains header field <Authorization: ApplePass vxwxd7J8AlNNFPS8k0a0FfUFtq0ewzFdc>
Jan 15 14:03:03 passd[4219] <Warning>: Request contains body dictionary {
                pushToken = XXXXXXX94500332b789a3ddb61800586d5c9aad1cb035c9f2725761d419950b2;
            }
Jan 15 14:03:06 passd[4219] <Warning>: Register task (for device 5bca731a5779527c406213e9a847de97, pass type pass.socialPoint.passbook, serial number 486; with web service url https://ap.loc.sh/passbook/?couponId=486) got response with code 200 
```

*   然后，设备会尝试检索同一证书 (pass.socialPoint.passbook) 的所有通行证的序列号 - 这是注册的标准部分，以防通行证数据过时并需要刷新。

* * *

```
Jan 15 14:03:06 passd[4219] <Warning>: Generating GET request with URL <https://ap.loc.sh/passbook/?couponId=486/v1/devices/5bca731a5779527c406213e9a847de97/registrations/pass.socialPoint.passbook>
Jan 15 14:03:11 passd[4219] <Warning>: Get serial #s task (for device 5bca731a5779527c406213e9a847de97, pass type pass.socialPoint.passbook, last updated (null); with web service url https://ap.loc.sh/passbook/?couponId=486) got response with code 200 
Jan 15 14:03:11 passd[4219] <Warning>: Get serial #s task (for device 5bca731a5779527c406213e9a847de97, pass type pass.socialPoint.passbook, last updated (null); with web service url https://ap.loc.sh/passbook/?couponId=486) encountered error: Server response was malformed (The operation couldn’t be completed. (Cocoa error 3840.)) 
Jan 15 14:03:11 passd[4219] <Warning>: Generating POST request with URL <https:/ap.loc.sh/passbook/?couponId=486/v1/log> Jan 15 14:03:11 Anatta passd[4219] <Warning>: Request contains body dictionary {
            logs =     (
                "[2013-01-15 14:03:11 +0800] Get serial #s task (for device 5bca731a5779527c406213e9a847de97, pass type pass.socialPoint.passbook, last updated (null); with web service url https://ap.loc.sh/passbook/?couponId=486) encountered error: Server response was malformed (The operation couldn\U2019t be completed. (Cocoa error 3840.))"
            );  } 
Jan 15 14:03:11 passd[4219] <Warning>: Get serial #s task (for device 5bca731a5779527c406213e9a847de97, pass type pass.socialPoint.passbook, last updated (null); with web service url https://ap.loc.sh/passbook/?couponId=486) will retry after 10 seconds 
```

*   设备收到无效响应，但会继续重试。

*   手动刷新通行证，显示另一个错误：

* * *

```
Jan 15 14:11:05 passd[4238] <Warning>: Get pass task (pass type pass.socialPoint.passbook, serial number 486, if-modified-since (null); with web service url https://ap.loc.sh/passbook/?couponId=486) got response with code 200
Jan 15 14:11:05 passd[4238] <Warning>: Invalid data error reading pass . Could not read json from URL file://localhost/var/mobile/Library/Caches/com.apple.passd/com.apple.Shoebox/EE7EC165-DFC8-4B74-8444-37FB4C84B542.pkpass/pass.json: Error Domain=NSCocoaErrorDomain Code=3840 "The operation couldn’t be completed. (Cocoa error 3840.)" (Invalid value around character 369.) UserInfo=0x361810 {NSDebugDescription=Invalid value around character 369.}
Jan 15 14:11:05 passd[4238] <Warning>: Get pass task (pass type pass.socialPoint.passbook, serial number 486, if-modified-since (null); with web service url https://ap.loc.sh/passbook/?couponId=486) encountered error: Received invalid pass data (The pass cannot be read because it isn't valid.)
Jan 15 14:11:05 passd[4238] <Warning>: Generating POST request with URL <https://ap.loc.sh/passbook/?couponId=486/v1/log>
Jan 15 14:11:05 Anatta passd[4238] <Warning>: Request contains body dictionary {
        logs =     (
            "[2013-01-15 14:11:05 +0800] Get pass task (pass type pass.socialPoint.passbook, serial number 486, if-modified-since (null); with web service url https://ap.loc.sh/passbook/?couponId=486) encountered error: Received invalid pass data (The pass cannot be read because it isn't valid.)"
        );
    } 
```

您的网络服务发送的第二遍的 pass.json 似乎不正确。

检查 pass.json 后，locations 键后似乎有错误：

```
{
  "formatVersion" : 1,
  "passTypeIdentifier" : "pass.socialPoint.passbook",
  "serialNumber" : "",
  "teamIdentifier" : "9TS732CS23",
  "authenticationToken" : "vxwxd7J8AlNNFPS8k0a0FfUFtq0ewzFdc",
  "webServiceURL" : "https://ap.loc.sh/passbook/?couponId=",
  "associatedStoreIdentifiers":[564576004],
  "relevantDate" : "1970-01-01T08:00:00+08:00",
  "locations" : ,  // Syntax error
  "organizationName" : "portaura",
  "logoText" : "",
  "description" : "Here is description",
  "backgroundColor" : "rgb(146, 108, 63)",
  "coupon" : { etc... 
```

# java - 你应该总是关闭连接吗？

> ID：14331027
> 
> 赞同：3
> 
> 时间：2013-01-15T04:08:26.857
> 
> 标签：java, sqlite, jdbc, concurrency

到目前为止，我见过的所有 JDBC 代码每次都会创建和关闭一个连接。但是，我想知道这是否有必要，因为我的代码似乎工作得很好，而且我每次都重用相同的连接：

**这是一个不好的方法吗？**

```
public static int getCount() {
    synchronized (DATABASE_ACCESS_LOCK) {
        try (ResultSet rs = QUERY.executeQuery("SELECT COUNT(1) FROM " + TABLE_CLIENTS)) {
            return rs.getInt(1);
        } catch (SQLException ex) {
            ex.printStackTrace();
            return -1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T04:15:12.313

*当您离开活动的工作范围时，您*通常应该释放您的数据库连接。数据库连接是昂贵的资源。持有它们超过必要的时间会使连接池管理器的工作变得更加困难。

如果您同时执行多个数据库操作，那么对所有这些操作使用相同的数据库连接是非常合理的。完成该组操作后，释放连接。

# xcode - 如何在 OS X 上编译 Maya 插件？

> ID：14331030
> 
> 赞同：0
> 
> 时间：2013-01-15T04:08:40.013
> 
> 标签：xcode, macos, plugins, maya

我正在尝试编写一个简单的工具，让我可以将 Maya 中的某些内容导出为我自己的文件格式。我是 Maya 的新手，我不知道如何为其编写插件。在互联网上搜索，我找到了一个很有前途的网站，并尝试编译一个示例。作者提供了一个 Visual-C++ 项目和一个 Linux Makefile，但对于 OS X 当然没有。有人知道如何在 Xcode 中为 Maya 设置项目吗？我就是无法让它工作，而且我不知道 Maya 的库和头文件在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:33:51.550

您将需要特定版本的 gcc 和许多标准库，这取决于您拥有的 Maya 版本。检查 Maya 文档，它应该列出您需要的内容。

我对 Xcode 并不太熟悉，但应该有一种方法可以让它调用一个 makefile 作为你的构建操作。

# mysql - mySQL 错误 1040：连接过多

> ID：14331032
> 
> 赞同：65
> 
> 时间：2013-01-15T04:08:55.367
> 
> 标签：mysql, connection

如何解决这些问题，“SQL 错误 1040：连接太多”，即使我尝试输入

```
max_user_connection=500 
```

仍然“连接太多”

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2017-02-13T05:06:18.360

**MySQL：错误 1040：连接太多**

这基本上告诉 MySQL 同时处理最大数量的连接，默认情况下它同时处理**100 个**连接。

以下这些原因导致 MySQL 耗尽连接。

1.  慢查询

2.  数据存储技术

3.  错误的 MySQL 配置

通过执行以下操作，我能够克服这个问题。

打开`MySQL command line tool`并输入，

```
show variables like "max_connections"; 
```

这会给你返回这样的东西。

```
+-----------------+-------+
| Variable_name   | Value |
+-----------------+-------+
| max_connections | 100   |
+-----------------+-------+ 
```

您可以通过发出以下命令将设置更改为例如 200，而无需重新启动 MySQL 服务器。

```
set global max_connections = 200; 
```

现在，当您下次重新启动 MySQL 时，它将使用此设置而不是默认设置。

***请记住，连接数的增加将增加 MySQL 运行所需的 RAM 量。***

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-12-09T10:10:31.190

值得知道的是，如果您的服务器分区或驱动器上的可用磁盘空间不足，这也会导致 MySQL 返回此错误。如果您确定这*不是*实际[连接的用户数，](https://stackoverflow.com/a/42196994/3536236)那么下一步是检查您的 MySQL 服务器驱动器/分区上是否有可用空间。

*编辑 2019 年 1 月：*
这适用于 MySQL 5.7 和 5.8 。我不知道上面的版本。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-01-15T04:10:23.353

如果您用完了这样的连接，则很有可能您没有关闭已打开的连接。

查看打开连接的代码并确保尽快关闭连接。通常，您希望在实现*IDisposable的任何对象（包括数据库连接）周围**使用 using*关键字，以确保这些对象在离开需要它们的范围后立即被释放。

 *您可以使用此查询检查当前的活动连接数：

```
show processlist 
```

参考：[MySQL 显示状态 - 活动或总连接数？](https://stackoverflow.com/q/7432241/141172)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-07-24T18:39:57.740

发生此错误是由于连接限制达到配置文件中定义的最大限制`my.cnf`。

为了修复这个错误，请以`root`用户身份登录 MySQL（注意：您可以以 root 身份登录，因为 mysql 将为 预分配一个额外的连接`root user`）并使用以下命令增加**max_connections变量：**

```
SET GLOBAL max_connections = 500; 
```

此更改将一直存在，直到下一次服务器重新启动。为了使此更改永久生效，您必须在配置文件中进行修改。你可以这样做，

```
vi /etc/my.cnf

[mysqld]
max_connections = 500 
```

[本文详细介绍](http://www.rathishkumar.com/2017/07/how-to-fix-mysql-too-many-connections.html)[了解决此错误](http://www.rathishkumar.com/2017/07/how-to-fix-mysql-too-many-connections.html)的分步解决方法。看看它，我希望它可以帮助你。谢谢。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-01-15T05:01:38.140

您必须进行更改`max_connections`以增加允许的连接总数。

并设置`max_user_connections`回默认值 0 =>**无限制**，除非您需要**限制**每个用户连接。

[MySQL 连接太多](https://dev.mysql.com/doc/refman/5.5/en/too-many-connections.html)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-04-08T09:47:41.727

在您的程序中，您将打开连接并保持打开状态而不关闭它。

我遇到了同样的问题，终于确定了。

我在尝试捕获后添加了此代码。

```
finally{
    try {
        rs.close();
        p.close();
        conn.close();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-01-24T23:27:05.703

要查看为您的数据库配置了多少个连接以供使用：

```
select @@max_connections; 
```

要更改它：

```
set global max_connections = 200; 
```

要查看当前连接的数量：

```
show processlist; 
```

我还编写了[这个软件](https://github.com/CherryCircle/MySQLSlowLogAnalyzer)来帮助我创建一个很好的交易电子表格，这样我就可以追踪哪些查询是问题所在： [![在此处输入图像描述](../Images/a782848d51a1de2f4070e5fc96b3e1a3.png)](https://i.stack.imgur.com/Ojvh8.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-12-05T12:21:47.167

尝试这个 ：

打开终端并输入以下命令：`sudo gedit /etc/mysql/my.cnf`

将该行粘贴到 my.cnf 文件中：`set-variable=max_connections=500`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-30T15:19:28.937

此问题主要发生在超过 MySQL 允许的最大并发连接数时。允许的最大连接数存储在全局变量 max_connections 中。您可以`show global variables like max_connections;`在 MySQL中检查它

您可以通过以下步骤修复它：

**步骤1：**

登录 MySQL 并运行以下命令：`SET GLOBAL max_connections = 100;`

现在登录到 MySQL，连接太多错误已修复。此方法不需要重新启动服务器。

**第2步：**

使用上面的 step1 你可以解决这个问题，但是当 mysql 重新启动时 max_connections 将回滚到它的默认值。

为了使 max_connection 值永久化，请更新 my.cnf 文件。

停止 MySQL 服务器： `Service mysql stop`

编辑配置文件 my.cnf：`vi /etc/mysql/my.cnf`

在 mysqld 部分下找到变量 max_connections。

`[mysql]`

`max_connections = 300`

设置为更高的值并保存文件。

启动服务器：`Service mysql start`

**注意：** 在增加 max_connections 变量值之前，请确保服务器有足够的内存用于新的请求和连接。

MySQL 为每个连接预分配内存并仅在连接关闭时取消分配。当新的连接查询时，系统应该有足够的资源，如内存、网络和计算能力来满足用户的请求。

此外，您应该考虑增加 MySQL 服务器中的打开表限制以适应额外的请求。最后。关闭服务器上已完成事务的连接非常重要。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-24T20:18:34.663

即使我的所有连接都包含在 using 语句中，我也收到了这个错误。我忽略的是这些连接保持开放的时间。

我正在做这样的事情：

```
using (MySqlConnection conn = new MySqlConnection(ConnectionString))
{
    conn.Open();
    foreach(var m in conn.Query<model>(sql))
    {
        // do something that takes a while, accesses disk or even open up other connections
    }
} 
```

请记住，在循环中的所有内容完成之前，连接不会关闭，如果循环创建更多连接，它们就可以真正开始加起来。

这个更好：

```
List<model> models = null;
using (MySqlConnection conn = new MySqlConnection(ConnectionString))
{
    conn.Open();

    models = conn.Query<model>(sql).ToList(); // to list is needed here since once the connection is closed you can't step through an IEnumerable   
}

foreach(var m in models)
{
    // do something that takes a while, accesses disk or even open up other connections
} 
```

这样你的连接就可以关闭并在你去做其他事情之前被释放回线程池

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-06T13:56:41.717

通过重新启动数据库 Windows 服务解决了问题

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-22T14:52:42.713

[该问题在https://dev.mysql.com/doc/refman/8.0/en/too-many-connections.html](https://dev.mysql.com/doc/refman/8.0/en/too-many-connections.html)中明确指出：

> 如果客户端在尝试连接 MySQL 服务器时遇到 Too many connections 错误，则所有可用连接都被其他客户端使用。

几分钟后我解决了这个问题，似乎连接已被其他客户端释放，我也尝试同时重新启动 vs 和工作台。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-03-16T17:54:39.610

检查您当前正在运行的应用程序是否仍在访问您的 mysql 并已使用所有数据库连接。

因此，如果您尝试从 workbench 访问 mysql ，您将收到“连接过多”错误。

停止当前正在运行的 Web 应用程序，该应用程序持有所有这些数据库连接，然后您的问题将得到解决。*

# git - 从 git 子树创建新的存储库

> ID：14331038
> 
> 赞同：0
> 
> 时间：2013-01-15T04:09:27.540
> 
> 标签：git, git-subtree

当使用`git subtree`一个完整的新树时，包括一个新的第一次提交，是在创建它的同一个存储库中创建的。这意味着此时存储库内部包含两个完全独立的树，根本没有共同的父级。

将这棵新树移到它自己的存储库中的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:09:27.540

一种方法是创建一个空的 git 存储库，将其添加为原始存储库的远程，然后仅将新的子树推送到它。这只会将新子树中的提交移动到新的存储库中。

```
# create new repository
> mkdir newRepo
> cd newRepo
> git init

# add remote in the original repo
> cd /path/to/originalRepo
> git remote add newRepo /path/to/newRepo

# push only new subtree
> git push newRepo <hash-of-subtree>:subtreeBranch 
```

# android - 我可以认为 Android WebView 等同于 Android 原生浏览器吗？

> ID：14331040
> 
> 赞同：0
> 
> 时间：2013-01-15T04:09:32.097
> 
> 标签：android, css, webview

我正在使用 Android WebView 播放 CSS3 动画。

当我在 GingerBread(2.3) 上测试动画时，它在本机浏览器上运行良好，但在 WebView 上不起作用。

因为原生浏览器是基于WebView开发的，所以我认为他们处理css3动画的功能应该是一样的，我希望结果是一样的。但事实是不同的。

谁能解释一下？

顺便说一句：我为 WebView 启用了 Javascript，为 WebView 启用了 setWebViewClient 和 setWebChromeClient。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:20:10.867

你添加了所有的客户吗？webviewclient，webchromeclient，启用等。

# winforms - 使用 c# 在 windows 8 中拖放文件（可能是 windows 8 阻止拖放文件）

> ID：14331041
> 
> 赞同：1
> 
> 时间：2013-01-15T04:09:33.437
> 
> 标签：winforms, drag-and-drop

在这个项目中，我：

*   使用 WinForm C#
*   启用`AllowDrop = true`
*   禁用 UAC 控制
*   关闭 Windows 防火墙、Windows Defender

但是我不能在Windows 8中拖动文件，所以我可以在Windows 7、Vista和XP中正常拖动。

如何在 Windows 8 中启用拖放文件？

或者

如何更改我的代码以在 Windows 8 中拖放文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T13:12:18.920

“如何在 Windows 8 上完全禁用 UAC

```
HKEY_LOCAL_MACHINE > SOFTWARE > Microsoft > Windows > CurrentVersion > Policies > System 
```

然后找到这个Key EnableLUA，双击它并将Value数据从1更改为0。”

# artificial-intelligence - 数据挖掘与模式识别

> ID：14331051
> 
> 赞同：-3
> 
> 时间：2013-01-15T04:11:43.207
> 
> 标签：artificial-intelligence, data-mining, pattern-recognition

数据挖掘和模式识别有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:17:20.173

首先，我将直接引用你在这个问题上的两个标签：

*数据挖掘*标签说：

> 数据挖掘是分析大量数据以发现模式和共性的过程。

*模式识别*标签说：

> 模式识别是自动将输入分类为预定类别的科学的术语，或者另一方面，能够通过其特征识别特定输入类别的科学。

现在，具有讽刺意味的是，我一直看到的方式是，在数据挖掘中，您不一定知道模式。您必须寻找它们，这通常涉及大量的预感和猜测以及一些可靠的测试。

在模式匹配中，您往往已经知道模式，并根据它们的特征来搜索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:18:37.323

我认为模式识别是数据挖掘的一部分，每当我们谈论数据挖掘时，我们都是广义上的，它包括理解大型数据集以进行特定操作，而模式识别意味着检查两个实体以找到相似的模式/趋势

# php - Ajax 联系表无法正常工作

> ID：14331056
> 
> 赞同：0
> 
> 时间：2013-01-15T04:12:11.087
> 
> 标签：php, jquery, ajax

我正在使用 ajax 联系表单，但它似乎无法正常工作。一旦我尝试提交表单，我就会收到“请填写所有字段”的消息，即使我已经填写了所有字段。

这是我当前的表单代码：

```
 <form method="get" action="mail.php">

    <input name="fname" type="text" value="Enter your First Name here..." id="fname" onfocus="if(this.value == 'Enter your First Name here...') this.value = ''"/>
    <input name="lname" type="text" value="Enter your Last Name here..." id="lname" onfocus="if(this.value == 'Enter your Last Name here...') this.value = ''"/>
    <input name="cname" type="text" value="Enter your Company Name here..." id="cname" onfocus="if(this.value == 'Enter your Company Name here...') this.value = ''"/>
    <input name="web" type="text" value="Enter your Website here..." id="web" onfocus="if(this.value == 'Enter your Website here...') this.value = ''"/>
    <input name="email" type="text" value="Enter your E-mail here..." id="email" onfocus="if(this.value == 'Enter your E-mail here...') this.value = ''"/>
    <input name="phone" type="text" value="Enter your Phone Number here..." id="phone" onfocus="if(this.value == 'Enter your Phone Number here...') this.value = ''"/>
    <textarea name="message" id="message" onfocus="if(this.value == 'Enter your message here...') this.value = ''" rows="" cols="">Enter your message here...</textarea>
    <input name="submit" type="submit" value="Submit" id="submit"/>
    <div id="response" style="float:right">
    <p></p>
    </div>

    </form> 
```

我的 mail.php 的内容：

```
 <?php

    if ($_GET['fname'] == "" || $_GET['lname'] == "" || $_GET['cname'] == "" || $_GET['web'] == "" || $_GET['phone'] == "" ||  $_GET['email'] == "" || $_GET['message'] == "") {
        echo 'Please fill in all fields!';
        exit;
    }

    if (strlen($_GET['fname']) < 3) {
        echo 'Your name should be atleast 3 characters long!';
        exit;
    }

    if (strlen($_GET['lname']) < 3) {
        echo 'Your name should be atleast 3 characters long!';
        exit;
    }

    if (strlen($_GET['cname']) < 3) {
        echo 'Your name should be atleast 3 characters long!';
        exit;
    }

    if (strlen($_GET['web']) < 3) {
        echo 'Your name should be atleast 3 characters long!';
        exit;
    }

    if (strlen($_GET['phone']) < 3) {
        echo 'Your name should be atleast 3 characters long!';
        exit;
    }

    if (!preg_match("/^([a-zA-Z0-9])+([\.a-zA-Z0-9_-])*@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-]+)*\.([a-zA-Z]{2,6})$/", $_GET['email'])) {
        echo 'Please enter a valid email address!'; 
        exit;
    }

    if (strlen($_GET['message']) < 10) {
        echo 'Your message should be atleast 10 characters long!';
        exit;
    }

    $to = 'my@email.com';

    $name = stripslashes($_GET['name']);
    $email = stripslashes($_GET['email']);

    $subject  = "Contact request";
    $msg  = "From:".$name."\r\n";
    $msg .= "e-Mail:".$email."\r\n";
    $msg .= "Subject:".$subject."\r\n\n";
    $msg .= "---Message--- \r\n".nl2br(stripslashes($_GET['message']))."\r\n\n";

    $mail = mail($to, $subject, $msg, "From:".$email);

    if($mail) {
        echo 'We will be in touch shortly!';
    } else {
        echo 'Error: Message could not be sent!';
    }

    ?> 
```

最后但并非最不重要的 ajax.js

```
 $(function() {
        $("input#submit").click( 
            function() {
                $('#response p').empty().append("<img src='img/ajax-loader.gif' />");

                var fname = $("#fname").val();  
                var lname = $("#lname").val();
                var cname = $("#cname").val(); 
                var web = $("#web").val();  
                var email = $("#email").val(); 
                var phone = $("#phone").val(); 
                var message = $("#message").val(); 

                var dataString = 'fname='+ fname + 'lname='+ lname + 'cname='+ cname + 'web='+ web + '&email=' + email + 'phone='+ phone + '&message=' + message;  

                $.ajax({

                    url: "mail.php",
                    data: dataString,
                    type: "GET",
                    success: function(responseText) {

                         $('#response p').empty().append(responseText);
                         }
                     });

            return false;

        });
      }); 
```

知道这里有什么问题吗？一些专家的建议会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:12:49.593

您可能需要`&`在构建您的`dataString`

```
var dataString = 'fname='+ fname + '&lname='+ lname + '&cname='+ cname + '&web='+ web + '&email=' + email + '&phone='+ phone + '&message=' + message; 
```

在您的代码中，您仅针对`email`and执行此操作`message`。

# php - 在 PHP MySQL 搜索中未找到结果时如何显示消息

> ID：14331058
> 
> 赞同：0
> 
> 时间：2013-01-15T04:12:17.460
> 
> 标签：php, html, mysql

我试过了，但它不起作用。当没有返回任何内容时，如何让它显示类似“未找到结果”的消息？

我的 PHP 脚本是：

```
<?php
$pnam=$_POST["prodnam"];
if($pnam=="")
{
  echo("Please enter a search…");
  return;
}

include("connection.php");

$SQL="SELECT * FROM results WHERE prodnam='".$pnam."'";
$run=mySQL_query($SQL,$con) or die ("SQL query error"); 
$rec=mysql_fetch_array($run);

echo ("<table align='center' style='
  font-family: Arial, Helvetica, sans-serif;
  color:#ffffff;
  font-size: 15px;
  text-align:center;'>");
echo ("<tr>");
echo ("<td>".$rec["dtlsnam"]."</td>");
echo ("</tr>");
echo ("</table>");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:17:10.377

除了说明要使用`PDO`or的明显语句之外`mysqli`，这是您需要的函数：[mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php)。

因此，只需按以下方式进行检查：

```
if( mysql_num_rows($run) == 0 ) exit( "No results" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:17:33.277

使用以下代码检查您的查询是否提取了记录。

```
$rec=mysql_fetch_array($run);
if(mysql_num_rows($run)>0)
{

// messaege here

} 
```

并且还通过使用以下代码来降低 SQL 注入的风险

```
$pnam = stripslashes($pnam); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:17:44.793

用于`mysql_num_rows`检查查询返回的行数并根据情况处理。

```
 $run=mySQL_query($SQL,$con) or die ("SQL query error");
 if(mysql_num_rows($run)>0) { 
        $rec=mysql_fetch_array($run);

        echo ("<table align='center' style='
            font-family: Arial, Helvetica, sans-serif;color:#ffffff;
            font-size: 15px;
            text-align:center;'>");
        echo ("<tr>");
        echo ("<td>".$rec["dtlsnam"]."</td>");
        echo ("</tr>");
        echo ("</table>");
}
else
{
    echo 'no rows present';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T04:18:35.317

您可以使用 mysql_num_rows() 来获取返回的记录数。

```
<?php

$num_rows = mysql_num_rows($run);

if($num_rows==0)
{
  echo 'No records found';
}
else
{
 $rec=mysql_fetch_array($run);

  echo ("<table align='center' style='
                font-family: Arial, Helvetica, sans-serif;color:#ffffff;
                font-size: 15px;
                text-align:center;'>");
            echo ("<tr>");
            echo ("<td>".$rec["dtlsnam"]."</td>");
            echo ("</tr>");
            echo ("</table>");

}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T04:42:45.107

我也只是将我的查询从 mysql_ 切换到 PDO。与其只是告诉你改变，我会尽力在 PDO 中把它做好……如果我搞砸了，我会学到一些东西。希望你能接受它并从中构建并改进你正在做的事情，因为我继续改进我的查询。我只有一个小应用程序升级了几个大应用程序。还在学习阶段。

老实说，如果我现在一直没有遇到堆栈溢出，我永远不会升级。每个使用 mysql_connect 的人都会受到打击。让我走出我的小程序员盒子并注意到。多谢你们！

好的，我要搞砸了，所以不要笑。

PS 不敢相信没有人在问题中提到表格。如果不止一种产品具有相同的名称会怎样？

```
$stmt=$con->prepare("SELECT * FROM results WHERE prodnam=:pnam");  // named variables in prepared
$stmt->bindValue(':pnam', $pnam, PDO::PARAM_STR);  // bind it to the variable
$stmt->execute();
$hit = $stmt->rowCount();  // count them rows

if($hit) {
   while($results = $stmt->fetchAll(PDO::FETCH_ASSOC)) {
      echo $results['dtlsnam'];
      /* I ignored the fact you are using tables because maybe it is a good tabular layout 
* you are planning.  You can figure out the table part.  But best to loop and put the table
*start before the loop and the table end after the loop and just loop the rows.
*/
   }
}

//
// Then in your connection include you want something like this.
//
// put in the values for your variables.
<?php
try {
$con = new PDO("mysql:host=" . $DB_MYSQL_HOST. ";dbname=" . $DB_MYSQL_NAME, $DB_MYSQL_USER,   $DB_MYSQL_PASS);
}
catch(PDOException $e)
{
echo $e->getMessage();
}
?> 
```

# iphone - 以编程方式找出 iOS 设备的市场内存大小

> ID：14331059
> 
> 赞同：1
> 
> 时间：2013-01-15T04:12:26.820
> 
> 标签：iphone, ios, objective-c

有没有办法以编程方式（在 Objective-C 中）找出 iOS 设备（如 iPad 2 16G、32G、64G）的市场总物理内存？看起来`UIDevice`相关的 API（例如[此处](https://stackoverflow.com/questions/1108859/detect-the-specific-iphone-ipod-touch-model)和[此处](https://stackoverflow.com/questions/448162/determine-device-iphone-ipod-touch-with-iphone-sdk)讨论的）没有提供此类信息。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:20:38.627

请看[这里](https://stackoverflow.com/questions/5712527/how-to-detect-total-available-free-disk-space-on-the-iphone-ipad-device)。您可以获得设备总空间以及可用空间。它给你一个清晰的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-18T07:41:07.317

派对有点晚了，但如果还有人来，你就去吧：

这一款为您提供了 iOS 设备上销售的内存大小（16GB、32GB、64GB、128GB ......）

**使用其他人建议的方法计算，然后四舍五入到最接近的 2 的较大幂。**

**斯威夫特 3.0 版本**

```
extension UIDevice {

var marketedMemorySize: Int {

    do {
        let systemAttributes = try FileManager.default.attributesOfFileSystem(forPath: NSHomeDirectory() as String)
        let totalDiskSpaceInBytes = (systemAttributes[FileAttributeKey.systemSize] as? NSNumber)?.int64Value

        func formatter(_ bytes: Int64) -> String {
            let formatter = ByteCountFormatter()
            formatter.allowedUnits = ByteCountFormatter.Units.useGB
            formatter.countStyle = ByteCountFormatter.CountStyle.decimal
            formatter.includesUnit = false
            return formatter.string(fromByteCount: bytes) as String
        }

        if let bytes = totalDiskSpaceInBytes {
            let memory = formatter(bytes)

            if let floatMemory = Float(memory) {

                if floatMemory > 128 {
                    return 256
                } else if floatMemory > 64 {
                    return 128
                } else if floatMemory > 32 {
                    return 64
                } else if floatMemory > 16 {
                    return 32
                } else if floatMemory > 8 {
                    return 16
                } else if floatMemory > 4 {
                    return 8
                }

            }
        }
        return 0
    }
    catch {
        return 0
    }

}

} 
```

**像这样使用它：**

```
UIDevice.current.marketedMemorySize 
```

# java - 调度上的多线程冲突（竞争条件）

> ID：14331061
> 
> 赞同：0
> 
> 时间：2013-01-15T04:12:40.410
> 
> 标签：java, multithreading, web-applications, thread-safety, conflict

我有一个关于我们通常如何处理线程冲突的问题？例如，如果您在网站上销售一本书，但只有一本可用。情况是有2个客户（线程）想买那本书，碰巧两个客户同时下单，那我们怎么处理呢？我们如何避免它？

更具体地说，我有一个接收客户端请求的 servlet，我的意思是因为我们不能只创建 doPost 方法`synchronized`，因为这可能会在每个请求（线程）进入时导致性能问题。

```
class Server{

      private Library library = Library.getInstance();   //singleton for all books

      protected void doPost(HttpServletRequest request, HttpServletResponse response) 
                                                 throws ServletException, IOException {
              synchronized(library){
                    Book book = library.get(request.getParameter("book_name"));
                    if(book != null){
                          int copies = book.getAvailable();
                          book.setAvailable(copies-1);
                          placeOrder();
                    }

              }
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:26:49.630

处理此类问题的最简单方法是使用数据库来处理并发。任何主流数据库都具有并发支持，背后有多年的开发努力。利用数据库中的 ACID 支持来处理这类标准业务问题相对容易。

更新：

正如@MartinJames 在下面的评论中所说的那样，我*并不是*说“数据库是所有并发事物的解决方案”。但是，对于已经更新数据库并且需要以“事务”性质控制多位数据的“更长”生命周期的交互，数据库是处理这种并发级别的理想场所。

此外，各种其他评论正在展示如何使用 java 级别的并发管理内存中的这些数据。然而，在这种情况下，当您需要“横向扩展”（即添加另一个应用服务器）时，您就死定了，因为 java 级别的同步将不再起作用。但是，数据库解决方案仍然有效。这就是为什么 EJB 不鼓励直接使用并发/同步的原因。相反，EJB/JPA 世界中的大多数同步都是在数据库中处理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:29:18.607

有多种方式。就Java中的服务器端而言，最简单的就是利用java监视器，即使用synchronized关键字来保护共享变量。更好的方法可能是使用 java.util.concurrent 类来实现生产者/消费者范例，例如，将 BlockingQueue 与执行器一起使用。

这是一个使用 util.concurrent 类的简单示例。请注意，Data 类是您的自定义类。

```
 // This can go inside a main method or your controller class.
    private BlockingQueue<Data> sharedQueue = new ArrayBlockingQueue<Chunk>(BUFFER_SIZE);
    for (int i = 0; i < NUMBER_OF_PRODUCERS; i++) {
         (new Thread(new Producer(sharedQueue, i))).start();
    }

    for (int i = 0; i < NUMBER_OF_CONSUMERS; i++) {
          (new Thread(new Consumer(sharedQueue, i))).start();
    }

public class Producer implements Runnable {
    private final BlockingQueue<Data> sharedQueue;

    public Producer(BlockingQueue<Data> sharedQueue, int id) {
            this.sharedQueue = sharedQueue;
    }

    public void run() {
            try {
                 while (true) {
                       sharedQueue.put(produce());
                 }
            } catch (InterruptedException ex) {
                    ex.printStackTrace();
            }
    }

    private Data produce() { return new Data(); }
 }

public class Consumer implements Runnable {

    private final BlockingQueue<Data> sharedQueue;

    public Consumer(BlockingQueue<Data> sharedQueue, int id) {
            this.sharedQueue = sharedQueue;
    }

    public void run() {
            try {
                 while (true) {
                       consume(sharedQueue.take());
                 }
            } catch (InterruptedException ex) {
                    ex.printStackTrace();
            }
    }

    void consume(Data c) { System.out.println(c); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:30:34.553

在那里你需要同步。如果一个客户已经开始在线程中购买这本书，另一个想要购买这本书的客户应该等到第一个完成购买或放弃想法（回滚）。向最终用户指示的一种选择是仅显示正在使用它的消息，等待或类似的东西。从实现的角度来看，您需要了解 Java 或数据库中的并发性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T05:45:46.420

对您已有的内容进行微调。这将有所帮助，因为您不会在整个下订单过程中同步......

```
class Server{

      private Library library = Library.getInstance();   //singleton for all books

      protected void doPost(HttpServletRequest request, HttpServletResponse response) 
                                                 throws ServletException, IOException {
             boolean isOkToPlaceOrder = false;
             synchronized(library){
                    Book book = library.get(request.getParameter("book_name"));
                    if (book != null) {
                          copies = book.getAvailable();
                          book.setAvailable(copies-1);
                          isOkToPlaceOrder = true;
                    }
              }
              if (isOkToPlaceOrder) placeOrder();
      }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T15:14:29.100

如果所有 library.get 调用都返回相同的对象（对于同一本书），您可以使用该对象同步代码。会比整个图书馆更好。

```
 class Server{

      private Library library = Library.getInstance();   //singleton for all books

      protected void doPost(HttpServletRequest request, HttpServletResponse response) 
                                                 throws ServletException, IOException {
             boolean isOkToPlaceOrder = false;
             Book book = library.get(request.getParameter("book_name"));

             synchronized(book){
                    if (book != null) {
                          copies = book.getAvailable();
                          book.setAvailable(copies-1);
                          isOkToPlaceOrder = true;
                    }
              }
              if (isOkToPlaceOrder) placeOrder();
      }
} 
```

另一方面，另一个想法是将代码与唯一的 String 实例同步（使用 intern 方法）。

```
 Book book = library.get(request.getParameter("book_name"));

     synchronized(book.getISBNString().intern()){
            // reload changes made by other thread
            book = library.get(request.getParameter("book_name"));
            if (book != null) {
                  copies = book.getAvailable();
                  // if copies < 1 --> Error message

                  book.setAvailable(copies-1);

                  // save changes in synch
                  ....
                  placeOrder();
            }
      } 
```

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29) [http://weblogs.java.net/blog/enicholas/archive/2006/06/all_about_inter .html](http://weblogs.java.net/blog/enicholas/archive/2006/06/all_about_inter.html)

# android - 如何使用 Android Universal Image Loader 获取图像的高度和宽度？

> ID：14331062
> 
> 赞同：1
> 
> 时间：2013-01-15T04:13:05.073
> 
> 标签：android, universal-image-loader

如何访问使用 Android 通用图像加载器加载的图像的高度和宽度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T19:48:08.867

使用 ImageLoadingListener 加载图像时，您可以获取图像的位图：

```
imageLoader.displayImage(imageUrl, imageView, [options], new SimpleImageLoadingListener() {
    @Override
    public void onLoadingComplete(Bitmap loadedImage) {
        int width = loadedImage.getWidth();
        int height = loadedImage.getHeight();
        //...
    }
}); 
```

# java - 如何在 Joda-Time 中正确获取当前日期和时间？

> ID：14331063
> 
> 赞同：36
> 
> 时间：2013-01-15T04:13:12.700
> 
> 标签：java, date, datetime, time, jodatime

如何在 Joda Time 中正确获取实际日期和时间？我的意思是在我的国家的时间。我阅读了官方页面和一些教程 - 关于语言环境和时区有很多东西，但我发现它很混乱。我没有找到任何示例如何简单地获取它。

我需要它做两件事：

1.  要获得当前讨论中的帖子，
2.  要获得当前时间，我将与出生日期“比较”并计算年龄。

当我有 UTC+1（布拉格 - 捷克共和国）时，如何设置当前时间？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-15T17:34:24.733

这是 Joda Time 的伪代码，可能对您有用。

```
import org.joda.time.*;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

public class JodaTimeExample {

    public static void main(String[] sm) {
        DateTimeFormatter dateFormat = DateTimeFormat
                .forPattern("G,C,Y,x,w,e,E,Y,D,M,d,a,K,h,H,k,m,s,S,z,Z");

        String dob = "2002-01-15";
        LocalTime localTime = new LocalTime();
        LocalDate localDate = new LocalDate();
        DateTime dateTime = new DateTime();
        LocalDateTime localDateTime = new LocalDateTime();
        DateTimeZone dateTimeZone = DateTimeZone.getDefault();

        System.out
                .println("dateFormatr : " + dateFormat.print(localDateTime));
        System.out.println("LocalTime : " + localTime.toString());
        System.out.println("localDate : " + localDate.toString());
        System.out.println("dateTime : " + dateTime.toString());
        System.out.println("localDateTime : " + localDateTime.toString());
        System.out.println("DateTimeZone : " + dateTimeZone.toString());
        System.out.println("Year Difference : "
                + Years.yearsBetween(DateTime.parse(dob), dateTime).getYears());
        System.out.println("Month Difference : "
                + Months.monthsBetween(DateTime.parse(dob), dateTime)
                        .getMonths());
    }
} 
```

[DateTimeFormat 格式化程序的链接](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)

[乔达时间 API](http://www.jarvana.com/jarvana/view/joda-time/joda-time/1.6.2/joda-time-1.6.2-javadoc.jar!/index.html)

我希望这能帮到您。如果您有任何问题，请告诉我。

PS：感谢 Sumit Arora 提供的输出。

```
dateFormatr : AD,20,2016,2016,26,2,Tue,2016,180,6,28,PM,8,8,20,20,25,20,2,‌​, 
LocalTime : 20:25:17.308 
localDate : 2016-06-28 
dateTime : 2016-06-28T20:25:18.872+05:30 
localDateTime : 2016-06-28T20:25:20.260 
DateTimeZone : Asia/Kolkata 
Year Difference : 14 
Month Difference : 173 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T08:25:30.293

```
LocalTime localTime = new LocalTime();
LocalDate localDate = new LocalDate();
DateTime dateTime = new DateTime();
LocalDateTime localDateTime = new LocalDateTime(); 
```

任何这个构造函数都会在您的时区创建日期，您的时**区**是指时区`DateTimeZone.getDefault();`

您想将当前日期与出生日期进行比较。你如何在数据库中保存污垢的日期？
如果是 UTC 时区，您可以与 UTC TZ 中的 dateTime 进行比较

```
Years.yearsBetween(dateOfBirth, new DateTime(DateTimeZone.UTC)); 
```

如果它有服务器 TZ 你应该做

```
Years.yearsBetween(dateOfBirth, new DateTime()); 
```

如果它有服务器 TZ 你应该做

```
Years.yearsBetween(dateOfBirth, new DateTime(DateTimeZone.forID("ClientTZ"))); 
```

# c++ - 创建一个函数来放置子小部件

> ID：14331065
> 
> 赞同：0
> 
> 时间：2013-01-15T04:13:19.267
> 
> 标签：c++, qt, widget

我正在开发一个需要将多个实例放置在特定区域内的项目。我在创建一个可以为我做这件事的函数时遇到了麻烦。现在我必须手动设置每个实例的值。我将如何制作一个函数来获取所有实例并根据半径将它们均匀地放置在一个圆圈中？

这是我手动设置位置的代码区域。功能`setIconWidgetLocation`是我目前有的，就是不知道里面放什么。

```
zMenuWidget::zMenuWidget(QWidget *parent) :
    QWidget(parent)
{
    icon1 = new iconWidget(this);
    icon2 = new iconWidget(this);
}

void zMenuWidget::resizeEvent(QResizeEvent *event)
{
    int yEndPosition = 0;
    int outerRadius = 100;
    int innerRadius = 60;

    QSizeF size = event->size();
    QPointF center(size.width(),size.height());
    center /= 2.0;

    yEndPosition = (outerRadius - innerRadius)/2.0 + innerRadius;
    yEndPosition = center.y() - yEndPosition;

    int yCurrIconLoc = icon1->rect().center().y();
    int xCurrIconLoc = icon1->rect().center().x();

    icon1->move(center.x() - xCurrIconLoc, yEndPosition - yCurrIconLoc);
}

void setIconWidgetLocation(iconWidget* w, float angle)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:24:46.770

我相当肯定这正是`QLayout`它的用途。您可以从中派生出自己的类，并使用它来径向布局其小部件。

但是继续你现在拥有的，忘记那个......你只想要简单的放置。您将需要遍历所有图标。大概您将它们存储在一个数组中。

为此，您需要知道您的圆的半径，这似乎是硬编码的。您可能想要的是在圆上对齐图标中心，因此您需要从外半径中减去图标大小的一半。但我看到你有一个外半径和内半径。所以让我们把图标中心放在中间：

```
int radius = (outerRadius + innerRadius) / 2; 
```

而你在这里真正做的只是数学。圈子很容易。您决定每个图标的对向弧角。随你（由你决定。您可以计算它以使图标不会发生冲突，或者您可以使其保持不变，或者您可以均匀地放置图标。

但是您似乎想要均匀间隔的图标，所以这很容易。每个图标占据了馅饼的一部分，以弧度表示的是*Tau*，更传统地称为*2Pi*。

```
float arcSize = 2.0 * M_PI / numIcons; 
```

每个圆都需要一个圆心和一个半径。现在你只需要决定从哪里开始。角度零通常在右侧（`radius`水平偏移和垂直零偏移），但您可能希望它位于顶部。我们可以添加四分之一转 ( `Tau/4`) 或者我们可以翻转数学。

通常，圆的公式是：

```
x = cx + r * cos(angle);
y = cy - r * sin(angle);   // Assuming screen co-ordinates 
```

但是如果我想从顶部开始（仍然逆时针旋转），我这样做：

```
x = cx - r * sin(angle);   // Flip the minus sign if you want clockwise.
y = cy - r * cos(angle); 
```

现在剩下要做的就是找到所有图标的中心并定位它们：

```
for( int i = 0; i < numIcons; i++ )
{
    // Find icon centre on circle
    double x = centreX + radius * sin(arcSize * i);
    double y = centreY - radius * cos(arcSize * i);

    // Offset to get the top-left of your icon
    x -= iconWidth / 2;
    y -= iconHeight / 2;

    // And position it with your Qt call, whatever that may be.
    icon[i]->move(x, y);
} 
```

# c# - 我将如何在 C# 中表达这个 VB 代码？

> ID：14331067
> 
> 赞同：0
> 
> 时间：2013-01-15T04:13:32.037
> 
> 标签：c#, vb.net

我有一段有人给我的 VB.NET 代码，我想知道是否可以将其转换为 C#。我对 VB.NET 几乎一无所知，所以我无法自己转换它。我不知道如何描述它，所以我只是展示它。

```
Public table = New Object(15) {}
Dim cElse As Char = "█"

Private Sub Form_Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load
    table(0) = New Char(15) {"0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "+", "-", "=", "*", "%", " "}
    table(1) = New Char(15) {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P"}
    table(2) = New Char(15) {"Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "(", "!", "?", Chr(147), ":", "."} '147 is open double quotes
    table(3) = New Char(15) {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p"}
    table(4) = New Char(15) {"q", "r", "s", "t", "u", "v", "w", "x", "y", "z", ")", ",", "/", "･", "~", "&"}
    table(5) = New Char(15) {"Á", "À", "Â", "Ä", "É", "È", "Ê", "Ë", "Í", "Ì", "Ï", "Ï", "Ó", "Ò", "Ô", "Ö"}
    table(6) = New Char(15) {"Ú", "Ù", "Û", "Ü", "á", "à", "â", "ä", "é", "è", "ê", "ë", "í", "ì", "î", "ï"}
    table(7) = New Char(15) {"ó", "ò", "ô", "ö", "ú", "ù", "û", "ü", "Ç", "Ñ", "ç", "ñ", "Œ", "ß", "’", Chr(148)} '148 is close double-quotes
    table(8) = New Char(15) {cElse, Chr(148), cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse}
    table(9) = New Char(15) {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse}
    table(10) = New Char(15) {"‘", cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse}
    table(11) = New Char(15) {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse}
    table(12) = New Char(15) {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse}
    table(13) = New Char(15) {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse}
    table(14) = New Char(15) {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse}
    table(15) = New Char(15) {cElse, cElse, cElse, cElse, cElse, cElse, cElse, vbNewLine, cElse, "$", cElse, cElse, cElse, cElse, cElse, "@"} '$ is variable
End Sub 
```

因此，基本上它会创建一个字符表，以便以后用作某种密码。

我仍然是 C# 的业余爱好者，但我想不出一个简单的方法来做到这一点。

如果有人知道，您不必重写整个表格，只需说出要更改的关键字和其他内容即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:22:13.670

**简而言之：**幸运的是，转换问题主要由可用工具解决。

试试这个很酷的工具：[**转换为 C#**](http://www.developerfusion.com/tools/convert/vb-to-csharp/?batchId=49d515fa-83f9-4d29-a5be-3842b0e03d11)

除了上述工具之外，还有关于将 VB.NET 转换为 C# 的工具的讨论和建议 -[将 VB.Net 转换为 C# 的好方法？](https://stackoverflow.com/a/756685/1437962)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:26:02.290

```
public Object[] table = new Object[16];
private Char cElse = '█';

private void Form_Load(object sender, EventArgs e)
{
    table[0] = new Char[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '-', '=', '*', '%', ' ' };
    // ...

    // vbNewLine can be Environment.NewLine, but keep in mind it's not a single Char... its composed of "\r\n" or "\n" depending on the current environment...
    // Chr(147) can be (Char)147 or Convert.ToChar(147) as it's just a Byte representation, and so on...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:27:30.383

```
public object[] table = new object[16];

 char cElse = '█';
 private void Form_Load(object sender, EventArgs e)
{
    table[0] = new char[16] {
        '0',
        '1',
        '2',
        '3',
        '4',
        '5',
        '6',
        '7',
        '8',
        '9',
        '+',
        '-',
        '=',
        '*',
        '%',
        ' '
    };
    table[1] = new char[16] {
        'A',
        'B',
        'C',
        'D',
        'E',
        'F',
        'G',
        'H',
        'I',
        'J',
        'K',
        'L',
        'M',
        'N',
        'O',
        'P'
    };
    table[2] = new char[16] {
        'Q',
        'R',
        'S',
        'T',
        'U',
        'V',
        'W',
        'X',
        'Y',
        'Z',
        '(',
        '!',
        '?',
        (char)147,
        ':',
        '.'
    };
    //147 is open double quotes
    table[3] = new char[16] {
        'a',
        'b',
        'c',
        'd',
        'e',
        'f',
        'g',
        'h',
        'i',
        'j',
        'k',
        'l',
        'm',
        'n',
        'o',
        'p'
    };
    table[4] = new char[16] {
        'q',
        'r',
        's',
        't',
        'u',
        'v',
        'w',
        'x',
        'y',
        'z',
        ')',
        ',',
        '/',
        '･',
        '~',
        '&'
    };
    table[5] = new char[16] {
        'Á',
        'À',
        'Â',
        'Ä',
        'É',
        'È',
        'Ê',
        'Ë',
        'Í',
        'Ì',
        'Ï',
        'Ï',
        'Ó',
        'Ò',
        'Ô',
        'Ö'
    };
    table[6] = new char[16] {
        'Ú',
        'Ù',
        'Û',
        'Ü',
        'á',
        'à',
        'â',
        'ä',
        'é',
        'è',
        'ê',
        'ë',
        'í',
        'ì',
        'î',
        'ï'
    };
    table[7] = new char[16] {
        'ó',
        'ò',
        'ô',
        'ö',
        'ú',
        'ù',
        'û',
        'ü',
        'Ç',
        'Ñ',
        'ç',
        'ñ',
        'Œ',
        'ß',
        '’',
        (char)148
    };
    //148 is close double-quotes
    table[8] = new char[16] {
        cElse,
        (char)148,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse
    };
    table[9] = new char[16] {
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse
    };
    table[10] = new char[16] {
        '\'',
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse
    };
    table[11] = new char[16] {
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse
    };
    table[12] = new char[16] {
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse
    };
    table[13] = new char[16] {
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse
    };
    table[14] = new char[16] {
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse
    };
    table[15] = new char[16] {
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        Environment.Newline,
        cElse,
        '$',
        cElse,
        cElse,
        cElse,
        cElse,
        cElse,
        '@'
    };
    //$ is variable
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T04:33:56.830

我唯一不能正确翻译的是`vbNewLine`因为它返回一个字符串而不是一个字符。我用过`\n`，希望是对的。

```
public object[] table = new object[15];
private char cElse = '█';

private void Form_Load(object sender, EventArgs e]) {
    table[0] = new char[] {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '-', '=', '*', '%', ' '};
    table[1] = new char[] {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P'};
    table[2] = new char[] {'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '[', '!', '?', (char)147, ':', '.'}; //147 is open double quotes
    table[3] = new char[] {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p'};
    table[4] = new char[] {'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ']', ',', '/', '･', '~', '&'};
    table[5] = new char[] {'Á', 'À', 'Â', 'Ä', 'É', 'È', 'Ê', 'Ë', 'Í', 'Ì', 'Ï', 'Ï', 'Ó', 'Ò', 'Ô', 'Ö'};
    table[6] = new char[] {'Ú', 'Ù', 'Û', 'Ü', 'á', 'à', 'â', 'ä', 'é', 'è', 'ê', 'ë', 'í', 'ì', 'î', 'ï'};
    table[7] = new char[] {'ó', 'ò', 'ô', 'ö', 'ú', 'ù', 'û', 'ü', 'Ç', 'Ñ', 'ç', 'ñ', 'Œ', 'ß', '’', (char)148}; //148 is close double-quotes
    table[8] = new char[] {cElse, Chr[148], cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse};
    table[9] = new char[] {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse};
    table[10] = new char[] {'‘', cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse};
    table[11] = new char[] {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse};
    table[12] = new char[] {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse};
    table[13] = new char[] {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse};
    table[14] = new char[] {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse};
    table[15] = new char[] {cElse, cElse, cElse, cElse, cElse, cElse, cElse, '\n', cElse, '$', cElse, cElse, cElse, cElse, cElse, '@'}; //$ is variable
} 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T04:34:35.627

```
public char[][] table;

private void Form_Load(object sender, EventArgs e)
{
    table = new char[16, 16]
    {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '-', '=', '*', '%', ' '},
    {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P'},
    {'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '(', '!', '?', (char)147, ':', '.'},
    {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p'},
    {'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ')', ',', '/', '･', '~', '&'},
    {'Á', 'À', 'Â', 'Ä', 'É', 'È', 'Ê', 'Ë', 'Í', 'Ì', 'Ï', 'Ï', 'Ó', 'Ò', 'Ô', 'Ö'},
    {'Ú', 'Ù', 'Û', 'Ü', 'á', 'à', 'â', 'ä', 'é', 'è', 'ê', 'ë', 'í', 'ì', 'î', 'ï'},
    {'ó', 'ò', 'ô', 'ö', 'ú', 'ù', 'û', 'ü', 'Ç', 'Ñ', 'ç', 'ñ', 'Œ', 'ß', '’', (char)148},
    {cElse, (char)148, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse},
    {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse},
    {'‘', cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse},
    {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse},
    {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse},
    {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse},
    {cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse, cElse},
    {cElse, cElse, cElse, cElse, cElse, cElse, cElse, Environment.Newline, cElse, '$', cElse, cElse, cElse, cElse, cElse, '@'}};
} 
```

抱歉不能帮助 cElse 的定义，因为我看不到实际的角色是什么，但其他一切都应该是好的。

# objective-c - 使用objective c将文件从互联网保存到mac osx中的硬盘

> ID：14331078
> 
> 赞同：0
> 
> 时间：2013-01-15T04:15:19.997
> 
> 标签：objective-c, macos, url, download

如何使用目标 c 在 mac osx 中从 Internet 下载文件我尝试使用`copyItemAtURL:toURL:error:`in 方法`NSFileManager`但没有成功。域是公共的，因此不需要身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:56:57.283

`NSFileManager`不支持 HTTP URL。您需要使用[`NSURLConnection`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003755)该类来执行 HTTP 请求。

如果要执行同步 HTTP 请求（例如，对于控制台应用程序或 GUI 应用程序的后台线程），那么基本工作流程是：

1.  [`NSURLRequest`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)为您想要的 URL构建一个
2.  称呼[`+[NSURLConnection sendSynchronousRequest:returningResponse:error:]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003755)
3.  调用[`-[NSFileManager createFileAtPath:contents:attributes:]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)以将结果保存`NSData`到所需的目标文件。

如果你需要做一个异步请求，那就有点复杂了。在这种情况下，您将创建一个符合`NSURLConnectionDelegate`协议的对象，将其设置为`NSURLConnection`对象的委托，然后执行请求。完成后，您可以将其保存到上述文件系统中。细节留给读者作为练习。

# java - 确保在 StringTemplate 中转义 HTML 实体的最佳方法是什么

> ID：14331081
> 
> 赞同：3
> 
> 时间：2013-01-15T04:15:58.997
> 
> 标签：java, stringtemplate, stringtemplate-4

假设下面的字符串模板，给出了一个 Java Bean 对象列表：

```
<ul>$people:{p|<li>$p.name$ $p.email</li>}$</ul> 
```

即人员列表可能包含`Person`您可能具有或不具有增强/扩展能力的对象：

```
class Person {
    ....
    public getName() { ... }
    public getEmail() { ... }
} 
```

`getName()`and`getEmail()`方法不会返回已清理的（转义的 html 实体）。你如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T05:05:04.290

您可以使用自定义渲染器，例如：

```
public static class HtmlEscapeStringRenderer implements AttributeRenderer {
    public String toString(Object o, String s, Locale locale) {
        return (String) (s == null ? o : StringEscapeUtils.escapeHtml((String) o));
    }
} 
```

然后在模板中表明您希望它转义：

```
$p.name;format="html"$ 
```

也就是说，您可能更喜欢在输入时清理数据，在发送到模板之前进行转换，将装饰人员发送到模板等。

* * *

```
public class App {
    public static void main(String[] args) {
        STGroupDir group = new STGroupDir("src/main/resource", '$', '$');
        group.registerRenderer(String.class, new HtmlEscapeStringRenderer());

        ST st = group.getInstanceOf("people");
        st.add("people", Arrays.asList(
                new Person("<b>Dave</b>", "dave@ohai.com"),
                new Person("<b>Nick</b>", "nick@kthxbai.com")
        ));

        System.out.println(st.render());
    }

    public static class HtmlEscapeStringRenderer implements AttributeRenderer {
        public String toString(Object o, String s, Locale locale) {
            return (String) (s == null ? o : StringEscapeUtils.escapeHtml((String) o));
        }
    }
} 
```

这输出：

```
<ul><li>&lt;b&gt;Dave&lt;/b&gt; dave@ohai.com</li><li>&lt;b&gt;Nick&lt;/b&gt; nick@kthxbai.com</li></ul> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-22T10:48:14.500

没有必要为此编写自己的渲染器。您可以使用内置渲染器 org.stringtemplate.v4.StringRenderer

```
group.registerRenderer(String.class, new StringRenderer()); 
```

并添加您的模板：

```
<ul>$people:{p|<li>$p.name;format="xml-encode"$ $p.email;format="xml-encode"$</li>}$</ul> 
```

# c# - Telerik Dropdowns 列出所选值

> ID：14331085
> 
> 赞同：0
> 
> 时间：2013-01-15T04:16:38.767
> 
> 标签：c#, asp.net, telerik

我正在使用 Radcombo 框。我想通过获取页​​面中下拉列表的选定值，并将其传递到不同的页面并在第二页中为 drop dwon 选择相同的值。

但我无法捕捉到价值。只能在这里获取索引。

我试过

```
 ddl2.SelectedIndex
           ddl2.SelectedItem.Text
           ddl2.SelectedValue 
```

用于发送值。但它只传递值的索引。另外，在第 2 页中，我需要将此值分配给 drop dwon list。所以，我用

```
 ddl2.SelectedIndex = Convert.ToInt32((Request.QueryString["No2"]));
           ddl3.SelectedIndex = Convert.ToInt32((Request.QueryString["No3"])); 
```

但这也无法选择合适的值。有什么建议么？

现在我可以使用查询字符串成功地将值传递到第二页..但是在将查询字符串中的值分配给 ddl 列表时，我每次都得到空值..

这是我尝试过的一段代码。我尝试了以下两行。但是每个案例值都进入 RHS ..但在 LHS 上它作为 Null 出现。

```
 ddl2.SelectedItem.Value Request.QueryString["No2"].ToString();
          ddl2.FindItemByValue(Request.QueryString["No2"].ToString()).Selected = true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:45:41.587

这是执行此操作的示例：

第1页.aspx：

```
<telerik:RadComboBox ID="RadComboBox1" runat="server">
    <Items>
        <telerik:RadComboBoxItem Value="A" Text="A" />
        <telerik:RadComboBoxItem Value="B" Text="B" />
    </Items>
</telerik:RadComboBox>
<asp:Button ID="btnNextPage" runat="server" Text="Next Page" OnClick="btnNextPage_Click" /> 
```

Page1.aspx.cs：

```
protected void btnNextPage_Click(object sender, EventArgs e)
{
    Response.Redirect("~/Page2.aspx?value=" + RadComboBox1.SelectedValue);
} 
```

页面2.aspx：

```
<telerik:RadComboBox ID="RadComboBox2" runat="server">
    <Items>
        <telerik:RadComboBoxItem Value="A" Text="A" />
        <telerik:RadComboBoxItem Value="B" Text="B" />
    </Items>
</telerik:RadComboBox> 
```

Page2.aspx.cs：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        RadComboBox2.SelectedValue = Request.QueryString["value"];
    }
} 
```

实现此目的的其他方法包括使用[多视图控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.multiview.aspx)而不是单独的页面，或[使用 postbackurl 属性回发到不同的页面](http://msdn.microsoft.com/en-us/library/ms178140%28v=vs.100%29.aspx)（而不是使用查询字符串）

# ios - 带有 RaptureXML 的 XPath 不匹配节点

> ID：14331087
> 
> 赞同：1
> 
> 时间：2013-01-15T04:16:51.500
> 
> 标签：ios, xml-parsing

我正在尝试使用 RaptureXML 解析 ePub 文档中的文件。我可以从一个孩子到另一个孩子遍历 XML 文档，但是当我尝试通过 XPath 获取元素时，它不会被返回。

这是 XML (container.xml)：

```
<?xml version="1.0"?>
<container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container">    
   <rootfiles>
   <rootfile full-path="content.opf" media-type="application/oebps-package+xml"/>

   </rootfiles>
</container> 
```

这是我的解析代码：

```
 NSString *containerPath = [path stringByAppendingPathComponent:@"META-INF/container.xml"];
    NSData *containerData = [NSData dataWithContentsOfFile:containerPath];
    RXMLElement *containerRoot = [RXMLElement elementFromXMLData:containerData];
    NSLog(@"root %@  ", [containerRoot tag]);
    RXMLElement *rootfiles = [containerRoot child:@"rootfiles"];
    NSLog(@"root %@ ", [rootfiles tag]);
    RXMLElement *rootfile = [rootfiles child:@"rootfile"];
    NSLog(@"root %@ ", [rootfile tag]);
    NSLog(@"attr %@ ", [rootfile attribute:@"full-path"]);

    [containerRoot
            iterateWithRootXPath:@"//rootfile"
                      usingBlock:^(RXMLElement *elem) {
                          NSLog(@"path=%@", [elem attribute:@"full-path"]);
                      }];
/* I've also tried this.... */
    [rootfiles
            iterateWithRootXPath:@"//rootfile"
                      usingBlock:^(RXMLElement *elem) {
                          NSLog(@"path=%@", [elem attribute:@"full-path"]);
                      }]; 
```

输出是：

```
2013-01-14 22:03:43.299 MLReader[9027:c07] root container  
2013-01-14 22:03:43.299 MLReader[9027:c07] root rootfiles 
2013-01-14 22:03:43.300 MLReader[9027:c07] root rootfile 
2013-01-14 22:03:43.300 MLReader[9027:c07] attr content.opf 
```

正如你所看到的，当我从一个孩子移动到另一个孩子时，我可以找到我正在寻找的根文件元素。但是，从不输入 iterateWithRootXPath:usingBlock: 中的块。

我已经在 J​​ava 中完成了大量的 XML/XPath，但我是 Objective-C/iOS 的新手。

# java - 将 SOAP 消息解析为字符串

> ID：14331092
> 
> 赞同：0
> 
> 时间：2013-01-15T04:17:12.537
> 
> 标签：java, soap

我有一个 SOAP 消息作为字符串，需要用 Java 解析它。我收到一个 XML 文件，其中包含数据和 XML 数据内容的签名，作为同一条肥皂消息的单独 XML 部分以下是我收到的示例 SOAP 消息（不是有效的 xml）：

```
------=_Part_2074_1202079654.1337767440483
Content-Type: text/xml; charset=utf-8
Content-Transfer-Encoding: binary
Content-Id: <164914372224.1337767440483.IBM.WEBSERVICES@su79aas2.pinkroccade.lan>

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soapenv:Header/>

<soapenv:Body>

<FileSet xmlns="http://www.mydomain.com">
<FileSetId>SRQ</FileSetId>
<File>
<FileType>SRQACK</FileType>
<FileName>ACK-BSP2-BP2-20120523100300-01.xml</FileName>
<FileContentId>1</FileContentId>
</File>
<File><FileType>SRQSIG</FileType>
<FileName>SIG-BSP2-BP2-20120523100300-01.sig</FileName>
<FileContentId>2</FileContentId>
</File>
</FileSet>

</soapenv:Body>
</soapenv:Envelope>
------=_Part_2074_1202079654.1337767440483
Content-Type: text/xml; charset=utf-8
Content-Transfer-Encoding: binary
Content-Id: 1

<?xml version="1.0" encoding="UTF-8"?>
<!--Handle SRQACK, SRSMUT, SUMMUT BP Postbank version 1.1-->
<Acknowledgements xmlns="http://www.mydomain.com">
<Header>
<BatchId>ACK-BSP2-BP2-20120523100300</BatchId>
<InterfaceId>ACK</InterfaceId>
<Version>02.0</Version>
<SourceSystemId>BSP2</SourceSystemId>
<TargetSystemId>BP2</TargetSystemId>
<CreateDateTime>2012-05-23T10:03:00Z</CreateDateTime>
<MessageCount>4</MessageCount>
</Header>
<Acknowledgement>
<BatchId>SRQ-BP2-BSP2-20120416101400</BatchId>
<AckTimeStamp>2012-05-23T10:03:00Z</AckTimeStamp>
<Result>ERROR</Result>
<ReasonCode>107</ReasonCode>
</Acknowledgement>
<Acknowledgement>
<BatchId>SRQ-BP2-BSP2-20120514140516</BatchId>
<AckTimeStamp>2012-05-23T10:03:00Z</AckTimeStamp>
<Result>OK</Result>
</Acknowledgement>
<Acknowledgement>
<BatchId>SRQ-BP2-BSP1-20120514140511</BatchId>
<AckTimeStamp>2012-05-23T10:03:00Z</AckTimeStamp>
<Result>ERROR</Result>
<ReasonCode>112</ReasonCode>
</Acknowledgement>
<Acknowledgement>
<BatchId>SRQ-BP2-BSP3-20120514140520</BatchId>
<AckTimeStamp>2012-05-23T10:03:00Z</AckTimeStamp>
<Result>ERROR</Result>
<ReasonCode>112</ReasonCode>
</Acknowledgement>
</Acknowledgements>

------=_Part_2074_1202079654.1337767440483
Content-Type: text/xml; charset=utf-8
Content-Transfer-Encoding: binary
Content-Id: 2

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--Handle SRQSIG, SRSSIG, EXCSIG, SUMSIG BSP 2 Biller version 1.2-->
<nl:Signature xmlns:nl="http://www.mydomain.com">
<SignatureValue>lJw2CNdcgEGEychSH/snpMvnXrV91775UANSZGN23n7hQnlIiak8Dqr9pe6FAtLjkZ9UZPip26VTxGVzeCHdsgYwrLt3mTLfX0h6KeRhPCYGd9QLxok1yv0Ua6iNlP0oEPaE4t6wJw/CKfCua4W0Jbnm18Ym5J7U08YB1+rc4Lw=</SignatureValue>
<Fingerprint>166105D2F2F23663F4405B6D84A4F51B48907F77</Fingerprint>
</nl:Signature>

------=_Part_2074_1202079654.1337767440483-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:34:20.380

使用多行正则表达式拉出`<ackowledgements*.</ackowledgements>`，另一个拉出`<nl:Signature.*<\nl:Signature>`并将这两个字符串提供给您选择的 dom 解析器 - 有关如何执行此操作的示例，请参阅[In Java, how do I parse XML as a String 而不是一份文件？](https://stackoverflow.com/questions/562160/in-java-how-do-i-parse-xml-as-a-string-instead-of-a-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:12:38.060

第一部分是从文本中提取有效的（从 XML 角度来看）片段。

您将不得不手动完成第一部分（= 编写自己的代码），或者如果幸运的话，您可能会找到一个可以为您完成的库。

第二部分 - 将这些片段提供给您使用的 DOM 解析器。

# java - 如何使用 java 在 Windows 上获取当前正在运行的应用程序名称？

> ID：14331101
> 
> 赞同：1
> 
> 时间：2013-01-15T04:18:19.667
> 
> 标签：java, windows, process

> **可能重复：**
> [如何使用 Java 获取当前打开的窗口/进程的列表？](https://stackoverflow.com/questions/54686/how-to-get-a-list-of-current-open-windows-process-with-java)

如何使用 java 在 Windows 上获取当前正在运行的应用程序名称？例如只需要我不需要的已打开和未运行的程序，我只需要桌面上当前正在运行的应用程序名称。我正在做这些。有连接在本地网络计算机和 1 台服务器上。服务器想知道客户端计算机在运行什么样的程序。请帮我

# web-services - 类型强制失败：无法将 XMLList@106e9af1 转换为 mx.collections.IList

> ID：14331106
> 
> 赞同：1
> 
> 时间：2013-01-15T04:18:50.107
> 
> 标签：web-services, apache-flex, soap-client

使用自爆代码我正在尝试解析以下肥皂响应。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               xmlns:components="components.*"
               xmlns:hellos="services.hellos.*"
               height="957"  creationComplete="initApp()" > 
    <fx:Style source="Styles.css"/>
    <fx:Script>

        <![CDATA[

            import mx.controls.Alert;

            private namespace invesbot = "http://Services.com";
            use namespace invesbot;

            private namespace a = "http://schemas.xmlsoap.org/soap/envelope/";
            private namespace b = "http://www.w3.org/2001/XMLSchema"; 
            private namespace c = "http://www.w3.org/2001/XMLSchema-instance";
            use namespace a;
            use namespace b;
            use namespace c;

            [Bindable]
            var _result:*

            private function initApp():void
            {
                myService.mycustomers();
            }

        ]]> 
    </fx:Script>
    <fx:Declarations>
        <mx:WebService id="myService" wsdl="http://localhost:8081/WebServiceTest/services/Hellos?wsdl" 
                       showBusyCursor="true" 
                       fault="Alert.show(event.fault.faultString), 'Error'">
            <mx:operation name="mycustomers" resultFormat="e4x">
                <mx:request>
                </mx:request>
            </mx:operation>
        </mx:WebService>

    </fx:Declarations>
<mx:HBox>
        <mx:Text
            text="{myService.mycustomers.lastResult.mycustomersReturn.name}"
            />
    </mx:HBox>
</s:Application> 
```

SOAP 响应如下

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Body>
    <mycustomersResponse xmlns="http://Services.com">
      <mycustomersReturn>
        <age>28</age>
        <name>John</name>
      </mycustomersReturn>
      <mycustomersReturn>
        <age>29</age>
        <name>Alex</name>
      </mycustomersReturn>
      <mycustomersReturn>
        <age>30</age>
        <name>Jack</name>
      </mycustomersReturn>
    </mycustomersResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

使用上面的代码，输出将是

```
<name xmlns="http://Services.com" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">John</name>
<name xmlns="http://Services.com" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Alex</name>
<name xmlns="http://Services.com" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Jack</name> 
```

但是当我使用以下代码将结果放入下拉框中时，会出现以下错误

```
<s:FormItem label="Employee:"> 
        <s:DropDownList id="dropDownList3"
                        labelField="name"
                        dataProvider ="{myService.mycustomers.lastResult.mycustomersReturn}"/>
    </s:FormItem> 
```

TypeError：错误 #1034：类型强制失败：无法将 XMLList@106e9af1 转换为 mx.collections.IList。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:31:59.610

您必须将数据包装在 XMLListCollection 中 与数组一样，您必须将它们包装到 ArrayCollection 中。使用新版本的 flex sdk 4.9，您还可以创建 VectorLists 和 VectorCollections。

例如：

```
var iList:IList =  new XMLListCollection(myService.mycustomers.lastResult.mycustomersReturn);
dataProvider = iList; 
```

# google-api - DotNetOpenAuth 和 Google 日历出现 401（未经授权）错误

> ID：14331108
> 
> 赞同：1
> 
> 时间：2013-01-15T04:19:00.840
> 
> 标签：google-api, google-calendar-api, dotnetopenauth, google-api-dotnet-client

我一直在努力让 Google Calendar API 与 DotNetOpenAuth 一起工作。我尝试了几种不同的方法，但我一直遇到以下错误：

```
The remote server returned an error: (401) Unauthorized. 
```

我已经通过使用 Google Data API for .NET 中的 CalendarService 以及通过调整 DotNetOpenAuth 示例项目中的 Google Contacts 示例进行了尝试。

当我尝试使用 CalendarService 时，我通过设置身份验证令牌来设置身份验证服务，如下所示：

```
_service = new CalendarService("CalendarSampleApp");
_service.SetAuthenticationToken(accessToken); 
```

在重新编写 Google 联系人示例时，我只是更改了端点以反映 Google 日历端点而不是 Google 联系人端点，如下所示：

```
private static readonly MessageReceivingEndpoint GetCalendarEndpoint = new MessageReceivingEndpoint("http://www.google.com/calendar/feeds/default/private/full", HttpDeliveryMethods.GetRequest);

public static XDocument GetCalendarEntries(ConsumerBase consumer, string accessToken, int maxResults/* = 25*/, int startIndex/* = 1*/)
{
    if (consumer == null)
    {
        throw new ArgumentNullException("consumer");
    }

    var extraData = new Dictionary<string, string>() {
        { "start-index", startIndex.ToString(CultureInfo.InvariantCulture) },
        { "max-results", maxResults.ToString(CultureInfo.InvariantCulture) },
    };
    var request = consumer.PrepareAuthorizedRequest(GetCalendarEndpoint, accessToken, extraData);

    // Enable gzip compression.  Google only compresses the response for recognized user agent headers. - Mike Lim
    request.AutomaticDecompression = DecompressionMethods.GZip;
    request.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.151 Safari/534.16";

    var response = consumer.Channel.WebRequestHandler.GetResponse(request);
    string body = response.GetResponseReader().ReadToEnd();
    XDocument result = XDocument.Parse(body);
    return result;
} 
```

当我运行它时，这是发送的请求：

[http://www.google.com/calendar/feeds/default/private/full?oauth_token=1/kyuMER6kPiG13pOw5M4NoEE7AJdN2fE4jTKSgaMToT8&oauth_consumer_key=419892106817-obg9lu9j9ihpnlh2e2qa01ber4hmq5mh.apps.googleusercontent.com&oauth_nonce=NtfQzRV3&oauth_signature_method=HMAC-SHA1&oauth_signature=XEdf4ipECY2iBfdQfupD1IK1uFw%3D&oauth_version=1.0&oauth_timestamp=1358213228&start -index=1&max-results=5&gsessionid=TV7D3zHTc7T3l41Xqfn-ig](http://www.google.com/calendar/feeds/default/private/full?oauth_token=1/kyuMER6kPiG13pOw5M4NoEE7AJdN2fE4jTKSgaMToT8&oauth_consumer_key=419892106817-obg9lu9j9ihpnlh2e2qa01ber4hmq5mh.apps.googleusercontent.com&oauth_nonce=NtfQzRV3&oauth_signature_method=HMAC-SHA1&oauth_signature=XEdf4ipECY2iBfdQfupD1IK1uFw%3D&oauth_version=1.0&oauth_timestamp=1358213228&start-index=1&max-results=5&gsessionid=TV7D3zHTc7T3l41Xqfn-ig)

正如我所说，在这两种情况下，我都会遇到相同的 401 错误。有没有人对我做错了什么有任何想法，或者如何进一步排除故障？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:59:40.767

我认为您正在使用旧版本的库。请从以下网址下载最新的稳定版本： [https ://code.google.com/p/google-api-dotnet-client/wiki/Downloads](https://code.google.com/p/google-api-dotnet-client/wiki/Downloads)

您还应该考虑阅读 OAuth2 的文档： [https ://code.google.com/p/google-api-dotnet-client/wiki/OAuth2](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

希望它可以帮助，埃亚尔

# c# - 托管 DirectX 报告不正确的屏幕分辨率 - 不能做到 1920x1080？

> ID：14331110
> 
> 赞同：1
> 
> 时间：2013-01-15T04:19:12.540
> 
> 标签：c#, direct3d, managed

我在尝试全屏运行我的托管 DirectX 程序时遇到了这个问题。它在 1920x1080（本机分辨率）下作为无边框窗口运行得很好，但是当我尝试创建全屏 1920x1080 设备时，出现“应用程序中的错误”异常。但它在 800x600 全屏下工作，所以我检查了**Manager.Adapters.Default.SupportedDisplayModes**的值，支持的最高分辨率是 1600x1024，它确实有效。它不提供任何宽度为 1920 的模式。

我在谷歌上找不到关于这个问题的任何信息。我有一个 nVidia GeForce GT540M 和 Windows 7。有人知道吗？有解决办法吗？

进一步说明：在 DirectX Caps Viewer 下，DXGI 1.1 设备\输出\显示模式 - 它确实显示 1920x1080，但在 Direct3D9 设备\显示模式下 - 它不显示 1920x1080。我假设 MDX 使用 DX9 作为其后端？但是为什么DX9不支持1920x1080呢？

# highcharts - 删除 yAxis 和 highcharts 中数据之间的空间

> ID：14331112
> 
> 赞同：6
> 
> 时间：2013-01-15T04:19:23.473
> 
> 标签：highcharts

我想删除 y 轴和图表之间的空间，如下所示： ![在此处输入图像描述](../Images/8f82c65276eb88105f2a11b04fc86002.png)

这是用于创建此图表的小提琴：此图表[的 jsFiddle](http://jsfiddle.net/basarat/pfkbX/)

这是用于设置的代码（与 jsFiddle 相同）：

```
 $(function () {
   var chart;
        $(document).ready(function () {
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    spacingLeft: 2,
                    spacingRight: 2
                },
                credits: { enabled: false },
                title: { text: '' },
                yAxis: {
                    title: '',
                    labels: {
                        style: {
                            fontSize:'9px'
                        }
                    }
                },
                xAxis: { labels: { enabled: false } }, //hide the x axis labels 

                series: [{
                    type: 'area',
                    name: 'speed',
                    showInLegend: false,
                    data: [
                        71.5, 106.4, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 95.6,
                        71.5, 106.4, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 95.6,
                        54.4]
                }],
                /* To make it pretty */
                plotOptions: {
                    area: {
                        animation: false,
                        lineWidth: 1,
                        marker: {
                            enabled: false,
                            states: {
                                hover: {
                                    enabled: true,
                                    radius: 5
                                }
                            }
                        },
                        shadow: false,
                        states: {
                            hover: {
                                lineWidth: 1
                            }
                        },
                        threshold: null
                    }
                }
            });
        });

}); 

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:59:33.280

正确的做法是将 设置`offset`为`-15`。

```
yAxis: {
    offset: -15
} 
```

[演示](http://jsfiddle.net/ricardolohmann/pfkbX/2/)

**偏移量**：

`The distance in pixels from the plot area to the axis line. A positive offset moves the axis with it's line, labels and ticks away from the plot area. This is typically used when two or more axes are displayed on the same side of the plot. Defaults to 0.`

[参考](http://api.highcharts.com/highstock#yAxis.offset)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T11:26:23.587

考虑使用您的 xAxis 对象使用以下内容：

```
 maxPadding:0,
        minPadding:0 
```

还要确保您的标签封口不包含“步骤”

min 和 max 也是一种方便的绑定方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T05:31:50.180

固定：http: [//jsfiddle.net/basarat/pfkbX/1/](http://jsfiddle.net/basarat/pfkbX/1/)

基本上需要加上yAxis.align = 'left'。还要将标签向上移动一点（通过设置 y=2 属性使它们在线上而不是在线下），并使用 x=0 属性使它们成为焦点：

```
 $(function () {
   var chart;
        $(document).ready(function () {
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    spacingLeft: 2,
                    spacingRight: 2
                },
                credits: { enabled: false },
                title: { text: '' },
                yAxis: {
                    title: '',
                    labels: {
                        style: {
                            fontSize:'9px'
                        },
                      y:-2,
                      x:0,
                      align:'left'
                    }
                },
                xAxis: { labels: { enabled: false } }, //hide the x axis labels 

                series: [{
                    type: 'area',
                    name: 'speed',
                    showInLegend: false,
                    data: [
                        71.5, 106.4, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 95.6,
                        71.5, 106.4, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 129.2, 144, 176, 135.6, 148.5, 216.4, 194.1, 95.6,
                        54.4]
                }],
                /* To make it pretty */
                plotOptions: {
                    area: {
                        animation: false,
                        lineWidth: 1,
                        marker: {
                            enabled: false,
                            states: {
                                hover: {
                                    enabled: true,
                                    radius: 5
                                }
                            }
                        },
                        shadow: false,
                        states: {
                            hover: {
                                lineWidth: 1
                            }
                        },
                        threshold: null
                    }
                }
            });
        });

}); 

```

# iphone - Objective C 数组元素都以相同的值结束

> ID：14331118
> 
> 赞同：3
> 
> 时间：2013-01-15T04:19:55.290
> 
> 标签：iphone, objective-c, xcode, arrays

首先，如果这是一个相当基本的问题，请道歉，但是我是 Objective C 的新手，在我的所有搜索中都无法找到我的问题的答案（尽管这很可能是因为我不是新手在寻找答案时使用正确的术语！）

我有一个简单的循环，在其中我用一些自定义对象填充 NSMutableArray。我发现在循环之后，我有一个数组，其元素似乎都具有相同的值：即插入 (0,1,2,3) 后我发现我的数组包含 (3,3,3,3) .

问题仅在使用我的对象时出现；第二个数组，我只添加字符串，最终填充了预期值。

查看数组中对象的地址，我发现它们都是不同的：我是否正确地认为这意味着我不只是拥有一个引用同一对象的指针数组？

我想了解为什么这不符合我的预期。我有一种感觉，我缺少一些非常基本的东西，任何见解都将不胜感激。

这是我执行的循环：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"STARTING");
    NSMutableArray* myArray1 = [NSMutableArray array];
    NSMutableArray* myArray2 = [NSMutableArray array];

    for (int i=0; i < 4; i++) {
        MyObject* obj = [[MyObject alloc] initWithSomeString: [NSString stringWithFormat: @"ID%u", i] 
                                                  AndSomeNum: i];
        [myArray1 addObject: obj];
        [myArray2 addObject: [NSString stringWithFormat: @"ID%u", i]];

        NSLog(@"  Added to array1: %@", [myArray1 objectAtIndex: i]);
        NSLog(@"       and array2: %@", [myArray2 objectAtIndex: i]);
    }

    NSLog(@"ALL DONE:\nARRAY1=%@\nARRAY2=%@", myArray1, myArray2);
} 
```

运行后得到的输出是：

```
STARTING
   Added to array1: num=0 self=<0x928e9b0> str=<0x9290090> str=ID0
        and array2: ID0
   Added to array1: num=1 self=<0x9290080> str=<0x928ff80> str=ID1
        and array2: ID1
   Added to array1: num=2 self=<0x928eb00> str=<0x9290020> str=ID2
        and array2: ID2
   Added to array1: num=3 self=<0x7499a30> str=<0x7499ae0> str=ID3
        and array2: ID3
ALL DONE:
ARRAY1=(
    "num=3 self=<0x928e9b0> str=<0x7499ae0> str=ID3",
    "num=3 self=<0x9290080> str=<0x7499ae0> str=ID3",
    "num=3 self=<0x928eb00> str=<0x7499ae0> str=ID3",
    "num=3 self=<0x7499a30> str=<0x7499ae0> str=ID3"
)
ARRAY2=(
    ID0,
    ID1,
    ID2,
    ID3
) 
```

这是 MyObject 类的实现：

```
@implementation MyObject

NSString* _blah;
int _num;

-(MyObject*)initWithSomeString: (NSString*)blah AndSomeNum: (int)num {
    self = [super init];
    _blah = [NSString stringWithString: blah];
    _num = num;
    return self;
}

-(NSString*)description {
    return [NSString stringWithFormat: @"num=%u self=<%p> str=<%p> str=%@", _num, self, _blah, _blah];
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T04:32:11.623

这里的问题是您对这两个变量的定义：

```
NSString* _blah;
int _num; 
```

您将它们放在此文件中的位置，它们被定义为全局变量。所以你的类的每个实例都共享这两个相同的变量。这就是为什么每次调用初始化程序时，都会覆盖相同的“_blah”。

如果您打算将它们作为*实例*变量，每个实例都有自己的“_blah”和“_num”，那么您需要在类的实现或接口中的 {} 中声明它们。所以这可以作为一个例子：

```
@implementation MyObject {

 NSString* _blah;
 int _num;

} // continue with method definitions... 
```

# python - 当 INSERT 不返回任何行时，SQLAlchemy 会引发 TypeError？

> ID：14331128
> 
> 赞同：1
> 
> 时间：2013-01-15T04:20:52.980
> 
> 标签：python, postgresql, sqlalchemy

我有这样的插入语句：

```
insert = MyTable.insert()
row = {"foo": 42}
result = cxn.execute(insert, row) 
```

但是 Postgres 触发器将插入重定向`mytable`到新表，因此插入语句实际上并没有返回任何内容：

```
# INSERT INTO mytable VALUES (DEFAULT, 'stuff') RETURNING LASTVAL();
 lastval 
---------
(0 rows) 
```

这会导致 SQLAlchemy (0.8b2) 引发`TypeError: 'NoneType' is not subscriptable`. `DefaultExecutionContext`当尝试获取插入行的主键时，似乎正在发生这种情况。

这是一个应该报告的错误吗？有什么办法可以解决这个问题，告诉 SQLAlchemy 不要期望返回值？

### 追溯

```
… snip… 
  File "myfile.py", line 85, in store
    result = cxn.execute(insert, row)
  File ".../sqlalchemy/engine/base.py", line 664, in execute
    params)
  File ".../sqlalchemy/engine/base.py", line 764, in _execute_clauseelement
    compiled_sql, distilled_params
  File ".../sqlalchemy/engine/base.py", line 899, in _execute_context
    context._fetch_implicit_returning(result)
  File ".../sqlalchemy/engine/default.py", line 697, in _fetch_implicit_returning
    ipk.append(row[c])
TypeError: 'NoneType' object is not subscriptable 
```

### Postgres 触发器

```
CREATE OR REPLACE FUNCTION mytable_insert_trigger()
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO mytable_cur VALUES (NEW.*);
    RETURN NULL;
END;
$$ LANGUAGE plpgsql;
CREATE TRIGGER mytable_insert_trigger
    BEFORE INSERT ON mytable
    FOR EACH ROW EXECUTE PROCEDURE mytable_insert_trigger(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:21:24.950

你在这里违反了合同。针对 Postgres 后端，SQLAlchemy 倾向于使用`INSERT ... RETURNING`它可以从生成的序列中检索例如值。您正在插入一行但在撒谎。

根据[文档](http://www.postgresql.org/docs/devel/static/plpgsql-trigger.html)，我认为您想使用`INSTEAD OF`触发器而不是`BEFORE`，并让它返回未`NEW`更改的行。Postgres 将假定您做了任何必要的插入操作，并且只是将返回的行传送回客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T16:15:34.723

是的，您可以通过关闭implicit_returning 回退到获取最后插入的id 的旧系统，您可以为表执行此操作：

```
Table('sometable', metadata, ... columns ..., implicit_returning=False) 
```

会发生什么，假设这是一个直接的 SERIAL 主键，它将事先显式执行“tablename_id_seq”，并在 INSERT 语句中使用该值。

# php - PHP 对多维数组进行排序的最佳方法？

> ID：14331129
> 
> 赞同：0
> 
> 时间：2013-01-15T04:21:06.030
> 
> 标签：php, arrays, sorting, methods, multidimensional-array

> **可能重复：**
> [如何在 php 中对多维数组进行排序](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)

可以说我有以下多维数组：

```
$fruits[] = array("name"=>"orange", "price"=>3, "code"=>"A45");
$fruits[] = array("name"=>"apple", "price"=>2, "code"=>"W71");
$fruits[] = array("name"=>"grape", "price"=>4, "code"=>"G11"); 
```

然后我想`$fruits[]`按它对这个数组进行排序**`price`**。
所以**应该**是：

```
$fruits[] = array("name"=>"apple", "price"=>2, "code"=>"W71");
$fruits[] = array("name"=>"orange", "price"=>3, "code"=>"A45");
$fruits[] = array("name"=>"grape", "price"=>4, "code"=>"G11"); 
```

然后我在网上冲浪了很多，最后我发现了以下一个[`php manual`](http://php.net/manual/en/function.array-multisort.php)（我用上面的数组调整了变量名）：

```
// Obtain a list of columns
foreach ($fruits as $key => $value) {
    $name[$key]  = $value['name'];
    $price[$key] = $value['price'];
    $code[$key] = $value['code'];
}

// Sort the data with volume descending, edition ascending
// Add $data as the last parameter, to sort by the common key
array_multisort($price, SORT_ASC, $fruits); 
```

好的，我知道了！然后`$fruits[]`数组按`price`值正确排序。
好吧，这是我的一些担忧：

*   据我之前了解到，我们不应该添加/使用任何附加/自定义代码来使用排序机制。（相反，我认为我们应该使用纯内置方法。）
*   在这里我怀疑性能，因为它内部有预自定义`foreach`循环，当我们拥有真正的巨大阵列时，这可能会大大降低速度。（就像我现在一样）

所以现在我想问的是：

*   有什么`PHP`纯粹的方法来实现这件事吗？
*   **[或者] 我们不能仅仅通过使用**/picking 来自一些 PHP 纯内置数组排序方法（例如：sort()、usort()、asort()、array_multisort来纠正这个多维数组排序问题吗？ （）， ETC..） ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:28:27.813

```
usort ($fruits, function($a, $b) { return $a['price'] > $b['price'] ? 1 : ($a['price'] == $b['price'] ? 0 : -1); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:29:39.583

[usort](http://php.net/manual/en/function.usort.php)听起来像你在找什么：

```
<?
$fruits[] = array("name"=>"orange", "price"=>3, "code"=>"A45");
$fruits[] = array("name"=>"apple", "price"=>2, "code"=>"W71");
$fruits[] = array("name"=>"grape", "price"=>4, "code"=>"G11");
usort($fruits, function($a, $b){return $a['price'] - $b['price'];});
print_r($fruits);
?> 
```

产生：

```
Array
(
    [0] => Array
        (
            [name] => apple
            [price] => 2
            [code] => W71
        )

    [1] => Array
        (
            [name] => orange
            [price] => 3
            [code] => A45
        )

    [2] => Array
        (
            [name] => grape
            [price] => 4
            [code] => G11
        )

) 
```

# java - Spring MVC 前端选择表单动作目标

> ID：14331131
> 
> 赞同：0
> 
> 时间：2013-01-15T04:21:24.167
> 
> 标签：java, html, user-interface, spring-mvc

我的 Web 应用程序有许多表单，其中最简单的是登录表单（我使用的是 thymeleaf）：

```
 <form method="post" action = "#" th:action = "@{/account/login}">
        Username: <input name="username" type="text" /> <br /> 
        Password: <input name="password" type="password" /> <br /> 
                  <input name="login" type="submit" value="Login" />
    </form> 
```

我的控制器处理程序方法是：

```
@RequestMapping(value = "/account/login", method = RequestMethod.POST, params = "login")
public String login(@RequestParam("username") String username, 
        @RequestParam("password") String password,
        Model model) {

    // do some logging in           
    return "/account/profile";
} 
```

我的问题是因为我正在做一个 POST `/account/login`，这就是浏览器地址栏中显示的内容。我真的很想展示它`/account/profile`。`/account/profile`即使从概念上讲它不正确，我是否应该改为进行 POST 。

另一种解决方案是在 POST 上`/account/login`进行，成功后重定向并在`/account/profile`.

假设我也有这样的处理方法：

```
@RequestMapping(value = "/account/login", method = RequestMethod.GET)
public String loginPage() {
    return "/account/login";
} 
```

还有哪些其他解决方案可能适合类似 REST 的 url 映射的概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:42:13.983

我认为 POST 之后的重定向最适合您的需求：

```
@RequestMapping(value = "/account/login", method = RequestMethod.GET)
public String loginPage() {
    return "redirect:/account/profile";
} 
```

这种方法的优点（与当前的方法相比——在操作中返回视图）是，如果用户按下“F5”，表单将不会被重新发布。这已成为一种模式：[在 post 之后重定向](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

如果您想知道重定向后如何显示错误，[Spring 3.1 支持它](https://stackoverflow.com/questions/2543797/spring-redirect-after-post-even-with-validation-errors)。

P/s：实际上，处理的链接与用户浏览器地址栏上显示的内容无关。如果你只关心 URL，你可以使用“url-rewriting”库，例如[土耳其 URLRewriter](http://tuckey.org/urlrewrite/)

# c# - 我可以在 WP8 动态磁贴上放置两个徽章值吗？

> ID：14331134
> 
> 赞同：1
> 
> 时间：2013-01-15T04:21:33.917
> 
> 标签：c#, windows-phone-8

我想在我的应用程序的动态磁贴上放置两个 int 徽章值；我已经看到更新一个值的示例，但我需要两个，一个高于/低于另一个。这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:55:18.670

也许在图片上写一个文本块，然后将其设置为 livetile？

[如何使用 Windows Phone 代码在图像上写文字？](https://stackoverflow.com/questions/13979607/how-to-write-text-on-a-image-using-windows-phone-code)

# solr - 自定义搜索查询：edismax(user_entered_search_keywords) AND (condition A OR condition B)

> ID：14331135
> 
> 赞同：0
> 
> 时间：2013-01-15T04:21:49.787
> 
> 标签：solr, lucene, edismax, dismax

我的 edismax 运行完美，当我将搜索关键字传递给 dismax 时，它在内部处理查询形成。

我实现的下一步是一个自定义查询，其中让 dismax 对这些搜索关键字执行所有 mumbo jumbo，但使用自定义条件执行 dismax 查询。

当我不使用 dismax 时，我会手动创建自己的查询，例如 (keyword1 OR Keyword2) AND Contidion A，但在这种情况下，我必须手动创建搜索关键字查询的所有 PnC。现在 dismax 做到了，但我不知道如何使用 dismax 以及不依赖于用户输入的搜索关键字的自定义条件。

是否可以使用（e）dismax，是的，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:26:07.693

如果您可以通过过滤查询来表示您的自定义条件，那将是最好的，在这种情况下，您可以使用标准查询解析器来构建您的自定义条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:43:17.693

不是 100% 确定你在问什么，但看起来你想同时执行一个 edismax 查询和一个常规的非 dismax 查询。

如果您想执行多个基于文本的查询，请查看此文档：

[http://searchhub.org//2009/03/31/nested-queries-in-solr/](http://searchhub.org//2009/03/31/nested-queries-in-solr/)

# javascript - json - 使用 json 检索数据的热点

> ID：14331136
> 
> 赞同：-2
> 
> 时间：2013-01-15T04:21:52.597
> 
> 标签：javascript, json

我的目标是使用 json 从我的服务器检索数据。当我运行这段代码时，我什么也没有。我不知道我做错了什么。

```
<!DOCTYPE html>
<html>
<head>
    <script>
        function fn_getdata()
            {
                $.getJSON("http://arvianne.com/android/index.php", function(data) {
                    alert(data.contacts);
                });
            }
    </script>
</head>
<body>
    <div id="iddiv_con"></div>
    <button onclick="fn_getdata()">Get Data</button>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:28:23.350

```
You are violating the same origin policy 
```

您应该将 json 包装在回调函数中。

使用 jsonp 而不是简单的 json 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:30:15.790

使用 firefox/firebug chrome/dev 工具来监控错误消息 - 一分钱一分钱你遇到了“同源”问题[维基百科](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:20:48.913

由于您的代码在 中运行，`localhost`并且您试图访问位于`arvianne.com`via的资源`ajax`，因此您违反了[同源策略](http://www.w3.org/Security/wiki/Same_Origin_Policy)，这就是您的 ajax 请求不起作用的原因。

如果您使用 firebug/developer 工具栏监控您的 ajax 请求，您会看到类似`XMLHttpRequest cannot load http://arvianne.com/android/index.php. Origin http://fiddle.jshell.net is not allowed by Access-Control-Allow-Origin.`.

如果可能的话，您可以将[jsonp](http://api.jquery.com/jQuery.ajax/)视为一种可能的解决方案。

# uialertview - 通过 Corona SDK 显示警报，类似于 iOS SDK 的 UIAlertViewStyleSecureTextInput

> ID：14331140
> 
> 赞同：2
> 
> 时间：2013-01-15T04:23:02.917
> 
> 标签：uialertview, alert, coronasdk

我正在开发一个应用 Corona SDK，我需要一个类似于在 iOS 中使用 UIAlertViewStyleSecureTextInput 样式的警报的警报弹出窗口（如下所示）。我将使用密码来验证是否可以访问我的应用程序的某些受限区域。

![](../Images/bc1c40ec0f42ff69c4b839b6dc4e23d6.png)

有谁知道我如何通过 Corona SDK 做到这一点。我的应用程序将部署在 iOS 和 Android 设备上。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T21:57:47.943

Corona 的 native.showAlert() API 调用不支持该功能。不过，这听起来像是一个很好的功能请求。

# mp4 - MP4 STSD 结构

> ID：14331142
> 
> 赞同：2
> 
> 时间：2013-01-15T04:23:10.093
> 
> 标签：mp4

我怀疑一件事。如 ISO-14496-12 中所述，moov/mvhd/trak/mdia/minf/stbl/stsd 应包含特定格式的框，例如 ISO-14496-15 中描述的 avc1 框或 ISO-14496-14 中描述的 mp42。但它也包含来自 QuickTime 格式规范的 VideoSampleDescription 字段，例如“version”、“revision_level”、“vendor”等。

谁能解释这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T17:02:58.227

stsd（示例描述框）可以被视为包含其他框的框。每个 Sample Entry 也只是一个普通的框：

```
 4 bytes - length in total
 4 bytes - 4 char code of sample description table (stsd)
 4 bytes - version & flags
 4 bytes - number of sample entries (num_sample_entries)
 [
    4 bytes - length of sample entry (len_sample_entry)
    4 bytes - 4 char code of sample entry
    ('len_sample_entry' - 8) bytes of data
 ] (repeated 'num_sample_entries' times)
(4 bytes - optional 0x00000000 as end of box marker ) 
```

# ruby-on-rails - 动态确定 Rails 模型属性

> ID：14331144
> 
> 赞同：1
> 
> 时间：2013-01-15T04:23:26.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, attributes, rails-activerecord

我有一个模型（下面的简化版 - 完整版有**更多**字段），我想在其上进行搜索。

```
class Media < ActiveRecord::Base

  attr_accessible :subject, :title, :ref_code

  validates :title, :presence => true
  validates :subject, :presence => true

  def self.search(terms_hash)
    return if terms_hash.blank?

    composed_scope = self.scoped

    terms_hash.each_pair do |key, value|
    if self.respond_to? key and not value.is_blank?
      value.split(' ').each do |term|
        term = "%#{term}%"
        composed_scope = composed_scope.where("#{key} LIKE ?", term)
      end
    end
    composed_scope
  end
end 
```

由于高级搜索表单与用于创建/更新模型实例的表单几乎相同，因此我想创建一个方法来动态查看请求的参数列表并通过名称将表单字段与模型属性匹配。所以如果搜索请求是，

```
/search?utf8=✓&amp;ref_code=111&title=test&subject=code&commit=Search 
```

然后我的控制器可以只调用 Media.search(params) 并且它将返回一个范围，该范围将在适当的字段中搜索适当的值。如您所见，我尝试使用`respond_to?`但仅针对**模型实例**而不是实际模型类定义，并且我需要忽略与模型无关的任何参数的东西（例如，在这种情况下为 utf8 和 commit）。如果这一切正常，我计划重构代码，以便我可以为多个模型重用相同的方法。

有没有类似的类方法`respond_to?`？你将如何处理相同的任务？

我知道这与[在 rails 3 中动态获取模型属性](https://stackoverflow.com/questions/5996455/get-model-attribute-dynamically-in-rails-3)有关，但它并没有真正回答我想要做的事情，因为我想在**模型**上而不是在模型的**实例上做**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T04:52:20.270

ActiveRecord 模型类上有一个[`columns`方法](http://api.rubyonrails.org/classes/ActiveRecord/ModelSchema/ClassMethods.html#method-i-columns)，因此您可以轻松获取属性名称列表：

```
names = Model.columns.map(&:name) 
```

您可以轻松删除一些常见的：

```
names = Model.columns.map(&:name) - %w[id created_at updated_at] 
```

类`accessible_attributes`方法也可能很有趣，它会告诉你给`attr_accessible`.

# cakephp - 自定义日志方法

> ID：14331152
> 
> 赞同：1
> 
> 时间：2013-01-15T04:24:37.387
> 
> 标签：cakephp, cakephp-2.0

我正在尝试在 cakePHP 中实现日志系统。我现在有一个问题，“write”中的方法内容被调用了两次。这会导致问题，因为它在我的系统中放置了 2 个相同类型的日志条目。

Lib/Engine/ 目录下的 Databaselogger.php：

```
App::uses('CakeLogInterface', 'Log');

class DatabaseLogger implements CakeLogInterface {

private $types = array();

public function __construct($options = array()) {
    // Allowed method calls
    $this->types = $options['types'];
}

public function write($type = NULL, $message = NULL) {

    // Only store to cache types that are permitted, other errors from cake are not reported
    if(!empty($this->types) && in_array($type, $this->types))
    {
        //make database entry here
    }
 } 
} 
```

在我的 bootstrap.php 中：

```
App::uses('CakeLog', 'Log');
CakeLog::config('debug', array(
'engine' => 'FileLog',
'types' => array('notice', 'info', 'debug'),
'file' => 'debug',
));
CakeLog::config('error', array(
'engine' => 'FileLog',
'types' => array('warning', 'error', 'critical', 'alert', 'emergency'),
'file' => 'error',
));

// Custom configuration
CakeLog::config('mytest', array(
  'engine' => 'DatabaseLogger',
'types' => array('mytest'),
'scope' => array(),
'file' => '',
)); 
```

这就是我调用该方法的方式：

```
CakeLog::write('mytest', 'this message!'); 
```

任何人都可以就为什么会发生这种情况给出一些提示吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:47:38.997

由于核心文件的命名空间是

```
/Log/Engine/ 
```

我认为它应该是

```
/Lib/Log/Engine/DatabaseLog.php (or Logger if you want to straggle from the core naming). 
```

因此。

您将从 LogEngineCollection 类中获得证明，该类包含：

```
App::uses($loggerName, $plugin . 'Log/Engine'); 
```

包括您的引擎（因此正确命名空间的重要性）。

请花时间研究核心代码。毕竟它是开源的:)

# border - 如何使用 CSS 边框属性制作五角星

> ID：14331154
> 
> 赞同：0
> 
> 时间：2013-01-15T04:24:51.467
> 
> 标签：border, css

我正在为死亡金属促销制作一个网站，并且想知道是否可以使用边框属性在 CSS3 中制作五角星。我能够找到一些参考资料，让我相信可以制作 6 分星，但经过几个小时的精神折磨，我放弃了制作 5 分星。这可能吗？

一个六边形由两个三角形组成，这就是 css3 如何使用以下代码将其拉出：

```
#six-point-star {
   position: absolute;
   width: 0; 
   height: 0; 
   border-left: 50px solid transparent; 
   border-right: 50px solid transparent; 
   border-bottom: 80px solid black;
}
#six-point-star:after {
   content:"";
   position: absolute;
   width: 0; 
   height: 0; 
   border-left: 50px solid transparent; 
   border-right: 50px solid transparent; 
   border-top: 80px solid black;
   margin: 30px 0 0 -50px;
} 
```

但它与 5 点混淆，因为它不能分解成更小的多边形。任何关于我如何实现这一点的知识都会很棒。

[http://jsfiddle.net/8FjL2/1/](http://jsfiddle.net/8FjL2/1/)

[http://www.skinit.com/assets/seo/jumbo_shot/jumbo_shot50039084/pentagram.jpg](http://www.skinit.com/assets/seo/jumbo_shot/jumbo_shot50039084/pentagram.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:38:54.547

解决这里所问的问题

[小提琴](http://jsfiddle.net/uttara/dVp6p/1/)

```
<div id="pentagram"></div>

#pentagram {
  position: absolute;
   width: 0; 
   height: 0; 
   border-right: 120px solid transparent; 
   border-left: 120px solid transparent; 
   border-bottom: 80px solid black;
  top:100px;
  left:50px;  
}
#pentagram:before {
  content: "";
  position: absolute;
   width: 0; 
   height: 0; 
   border-right: 120px solid transparent; 
   border-left: 120px solid transparent; 
   border-top: 80px solid black;
  -webkit-transform: rotate(34deg);
  margin:6px 0 0 -122px;
}

#pentagram:after {
  content: "";
  position: absolute;
   width: 0; 
   height: 0; 
   border-top: 120px solid transparent; 
   border-bottom: 120px solid transparent; 
   border-right: 80px solid black;
  -webkit-transform: rotate(15deg);
  margin:-74px 0 0 -42px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T09:52:41.873

好吧，通过谷歌搜索，我找到[了这个网站](http://csspentagram.com/)。通过摆弄一点（我按 F12），我发现了这个：

HTML：

```
<div id="pentagram">
<div id="star_1"></div>
<div id="star_2"></div>
<div id="star_3"></div>
<div id="star_4"></div>
<div id="star_5"></div>
</div> 
```

CSS：

```
#pentagram{margin:0 auto;margin-top:45px;margin-bottom:75px;height:500px;width:500px;border-radius:500px;border:5px solid #bb0000;position:relative;}#pentagram div{position:absolute;background:#bb0000;width:476px;height:5px;}
#star_1{top:328px;left:12px;}
#star_2{top:183px;left:-38px;transform:rotate(-37deg);-ms-transform:rotate(-37deg);-webkit-transform:rotate(-37deg);}
#star_3{top:183px;right:-38px;transform:rotate(37deg);-ms-transform:rotate(37deg);-webkit-transform:rotate(37deg);}
#star_4{top:268px;right:-60px;width:480px !important;transform:rotate(107deg);-ms-transform:rotate(107deg);-webkit-transform:rotate(107deg);}
#star_5{top:268px;left:-60px;width:480px !important;transform:rotate(-107deg);-ms-transform:rotate(-107deg);-webkit-transform:rotate(-107deg);} 
```

# c - C数学运算顺序

> ID：14331155
> 
> 赞同：2
> 
> 时间：2013-01-15T04:24:55.577
> 
> 标签：c, math, operator-precedence

我有一个我一直在做的任务。我的代码似乎具有正确的数学运算和正确的顺序（至少按顺序），但我的答案有点古怪。我根据我的输入值正确地获得了每个问题的部分内容，但随着输入值的变化，我永远不会得到相同的部分。是否有一些关于我缺少的 C 操作顺序导致了这种情况？

我觉得问题出在

```
intPeople = intCarCounter * intTrainCounter * CAR_CAPACITY; 
```

对于样本运行#3，前两个输入有 120 人（正好比正确答案多 20 人），剩余人数应该是样本运行#4 中的人数。在第三个输入中，我得到 112 人，这又是样本运行 #4 的正确答案。最后，在第 4 次样本运行中，我得到了 128 人（比正确答案多 16 人），剩余人数应该在第 3 次样本运行中。有任何想法吗？

作业： [http ://cop3223.blogspot.com/2013/01/problem-c-roller-coaster-design-coasterc.html](http://cop3223.blogspot.com/2013/01/problem-c-roller-coaster-design-coasterc.html)

我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#define FIRST_CAR_LENGTH 10
#define NORMAL_CAR_LENGTH 8
#define CAR_CAPACITY 4

int main(void)
{
    /* Initialize Variables */
    int intTrack,intMaxTrainSize,intActualTrainSize,intPeople,intCarCounter,intTrainCounter,n;

    /* Ask user for value of N */
    printf("What is the value for N?> ");
    scanf("%d",&n);
    for (int i=0; i<n;i++)
    {
        /* Ask user for total length of track */
        printf("\nWhat is the total length of the track, in feet?> ");
        scanf("%d",&intTrack);

        /* Ask user for maximum length of each train */
        printf("What is the maximum length of a train, in feet?> ");
        scanf("%d",&intMaxTrainSize);

        /* Set/Reset initial values of intActualTrainSize, intCarCounter and intTrainCounter */
        /* Each train will begin with FIRST_CAR_LENGTH -> intActualTrainSize=FIRST_CAR_LENGTH */
        /* Each train will begin with 1 car -> intCarCounter=1 */
        /* Train counter will begin at 0 -> intTrainCounter=0 */
        intActualTrainSize=FIRST_CAR_LENGTH;
        intCarCounter=1;
        intTrainCounter=0;

        /* Continue to add additional cars using NORMAL_CAR_LENGTH until the maximum train size has been reached */
        /* Count how many NORMAL_CAR_LENGTH cars are added -> intCarCounter++*/
        while (intActualTrainSize < intMaxTrainSize)
        {
            intActualTrainSize=intActualTrainSize+NORMAL_CAR_LENGTH;
            intCarCounter++;
        } 

        /* Count how many trains can be added until 25% of the track is used up -> intTrainCounter++ */
        while (intTrainCounter*intActualTrainSize < (int)(intTrack*.25)) 
        {
            intTrainCounter++;
        }

        /* Count how many people can be on the track at one time -> intPeople = intCarCounter * intTrainCounter * CAR_CAPACITY */
        intPeople = intCarCounter * intTrainCounter * CAR_CAPACITY;
        printf("\nYour ride can have at most %d people on it at one time.",intPeople);

        if (intActualTrainSize>intMaxTrainSize)
            printf("\nMaximum Train Length has surplus of %d feet.\n",intActualTrainSize-intMaxTrainSize);
        else if (intMaxTrainSize==intActualTrainSize)
            printf("\nMaximum Length fits exactly.\n");
    }
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:51:49.083

您使用循环来计算火车计数器和汽车计数器，作为另一种选择，您可以使用整数算术来计算这些值。我附上了不涉及循环的解决方案。它使调试更容易。我提供两个版本。版本 1 假定整数除法不进行四舍五入。版本 2 更安全，因为它在除法之前减去余数。

```
 //VERSION 1:

    #include <stdio.h>

    #define FIRST_CAR_LENGTH 10
    #define NORMAL_CAR_LENGTH 8
    #define CAR_CAPACITY 4

    int main(void)
    {
      int N, i;
      int trackSize;
      int trainSize;
      int numberPeople;
      int numberCars;
      int trainsPerTrack;
      int surplus;

      printf("What is the value for N?");
      scanf("%d", &N);
      for(i=0; i < N; i++)
      {
         printf("What is the total length of the track, in feet?\n");
         scanf("%d", &trackSize);
         printf("What is the maximum length of a train, in feet?\n");
         scanf("%d", &trainSize);
         trainsPerTrack = trackSize / (4 * trainSize);
         numberCars = (trainSize -FIRST_CAR_LENGTH) / NORMAL_CAR_LENGTH + 1;

         numberPeople = trainsPerTrack * numberCars * CAR_CAPACITY;
         printf("Your ride can have at most %d people on it at one time.\n", numberPeople);

         surplus = (trainSize - FIRST_CAR_LENGTH) % NORMAL_CAR_LENGTH;
         if(surplus)
           printf("Maximum Train Length has surplus of %d feet\n\n", surplus);
         else
           printf("Maximum Length fits exactly\n\n");
      }
      return 0;
    }

VERSION 2:
#include <stdio.h>

#define FIRST_CAR_LENGTH 10
#define NORMAL_CAR_LENGTH 8
#define CAR_CAPACITY 4

int main(void)
{
  int N, i;
  int trackSize;
  int trainSize;
  int numberPeople;
  int numberCars;
  int trainsPerTrack;
  int surplus;

  printf("What is the value for N?");
  scanf("%d", &N);
  for(i=0; i < N; i++)
  {
     printf("What is the total length of the track, in feet?\n");
     scanf("%d", &trackSize);
     printf("What is the maximum length of a train, in feet?\n");
     scanf("%d", &trainSize);
     trainsPerTrack = (trackSize- (trackSize % (4*trainSize))) / (4 * trainSize);
     int forSmallerCars = trainSize - FIRST_CAR_LENGTH;
     numberCars = (forSmallerCars - (forSmallerCars % NORMAL_CAR_LENGTH)) / NORMAL_CAR_LENGTH + 1;

     numberPeople = trainsPerTrack * numberCars * CAR_CAPACITY;
     printf("Your ride can have at most %d people on it at one time.\n", numberPeople);

     surplus = (trainSize - FIRST_CAR_LENGTH) % NORMAL_CAR_LENGTH;
     if(surplus)
       printf("Maximum Train Length has surplus of %d feet\n\n", surplus);
     else
       printf("Maximum Length fits exactly\n\n");
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:31:08.123

不确定它是否直接贡献，但您需要重新检查以下内容

```
while (intActualTrainSize +NORMAL_CAR_LENGTH  <= intMaxTrainSize )
{                         ^^^^^^^^^^^^^^^^^^    
    intActualTrainSize=intActualTrainSize+NORMAL_CAR_LENGTH;
    intCarCounter++;
} 
```

您的代码允许实际火车大小超出最大火车大小，因此这可能是额外 20 个中的 10 个。此检查将确保您仅添加仍保持在最大值范围内的汽车。

**与 Train counter 类似**，它也可能溢出。

**如果可以的话，**尝试将这样的 while 循环转换为数学公式，这样更高效、更易读。****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:36:02.573

你的火车最后排的太长了

```
 while (intActualTrainSize < intMaxTrainSize)
    {
        intActualTrainSize=intActualTrainSize+NORMAL_CAR_LENGTH;
        intCarCounter++;
    } 
```

由于您将执行此循环，直到火车太长...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-22T16:24:11.960

输入变量名，不推荐使用一个字符的变量名。在循环中增加一个带有固定值的计数器随乘法一起提供，不需要迭代。在循环的最后一次迭代中，实际列车大小超过了最大值。如果用户提供的最大火车尺寸低于 FIRST_CAR_LENGTH 怎么办？首先计算实际列车尺寸的方法是正确的。如果存在过剩，哈桑的回答似乎是不正确的。

```
const double occ = 0.25;

int track;
int max_train;

int cap;
int num_car;
int num_train = 0;
int train = 0;

printf( "Length of track? "); scanf( "%d", &track );
printf( "Max length of train? "); scanf( "%d", &max_train );

num_car = std::max( 0, max_train - FIRST_CAR_LENGTH + NORMAL_CAR_LENGTH ) / NORMAL_CAR_LENGTH;
if( 0 < num_car )
{
    train = FIRST_CAR_LENGTH + NORMAL_CAR_LENGTH * ( num_car - 1 );
    num_train = ( int ) ( occ * track ) / train;
}
cap = CAR_CAPACITY * num_car * num_train;
printf( "Capacity: %d; Train surplus: %d\n", cap, max_train - train ); 
```**

# php - 如何发送多个ajax请求？

> ID：14331159
> 
> 赞同：3
> 
> 时间：2013-01-15T04:25:20.420
> 
> 标签：php, javascript, ajax

我是ajax的新手。我有一个使用 php 页面将项目列表插入 sql 的功能，但它只插入最后一项。请看下面的代码：

```
function submitItems() {
    ...
    xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        if (xmlhttp.responseText != "Item Sold")
            alert(xmlhttp.responseText);
        }
    }
    for (i=0;i<rows.length;i++) {//a loop to send multiple requests
        xmlhttp.open("POST","submitItem.php?itemid="+itemid,true);
        xmlhttp.send();
    }
} 
```

循环将请求发送到执行插入的 php 页面，但只处理最后一个请求。如果我在循环中放置一个 alert() ，它每次都会弹出一个窗口，并且每个项目都会被插入，但是，不断弹出窗口很烦人。还有其他解决方案吗？

*   或者，正如第一个回复所说，我只发送一个请求，其中包含一个存储项目列表的数组。但我不知道如何将数组作为参数传递。我可以这样做吗？

    var items = 新数组（）；items.push(itemid); . . . . items.push(itemid); //然后直接发送？xmlhttp.open("POST","submitItem.php?items="items,true); xmlhttp.send();

然后在php文件中，我应该这样做吗？

```
$items = $_GET['items']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:28:15.787

使用 for 循环生成一个项目数组（`itemid`在每次迭代时将不同的 s 推入数组），然后只进行一次 AJAX 调用，您将在其中将所有项目插入数据库。这种方式还将优化您的网站并节省您的带宽。

# jquery - 在 Rails 中输入城市和国家的表格

> ID：14331163
> 
> 赞同：0
> 
> 时间：2013-01-15T04:26:31.747
> 
> 标签：jquery, ruby-on-rails, ruby, geonames

我的应用程序有一个表格，您需要在其中输入购买（日期、金额、描述、位置等）。位置部分是我有点挣扎的地方。我正在尝试确定输入城市和国家/地区的最简单方法，以便稍后我可以通过城市或国家对数据进行排序。

目前，每个都有两个文本字段。

我看过这篇[文章](https://stackoverflow.com/questions/4460269/need-a-list-of-cities-countries)，这是我见过的最有用的东西。

那么我的问题是，在 Rails 中输入位置数据以进行购买的最用户友好的方式是什么？我是否应该将它们保留为文本字段并将其与该链接中提到的名称数据库进行比较？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:27:28.237

[Google Places Autocomplete](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)为选择位置提供了出色的用户体验，但代价是一些 JS 工作以确保您存储所需的数据（并依赖于第 3 方 API）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:32:41.290

对于城市选择器，您至少可以使用[https://github.com/joecorcoran/cities （并使用经典的国家/城市组合）。](https://github.com/joecorcoran/cities)无需污染数据库。如果你想花哨 - 你可以使用谷歌地图来选择位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T06:31:05.097

[https://github.com/sgruhier/jquery-addresspicker.git](https://github.com/sgruhier/jquery-addresspicker.git)

看看这个。它会解决你的问题。

# eclipse - EGit“Revert Commit”是否会永久删除原始提交？

> ID：14331169
> 
> 赞同：2
> 
> 时间：2013-01-15T04:27:22.557
> 
> 标签：eclipse, git, egit

我仍在学习 Git 的工作流程，并意识到当我提交一些文件时我不小心进入了错误的工作分支。因此，使用 EGit，我列出了提交历史记录并从上下文菜单中选择了 Revert Commit 以进行几次提交。

从那以后我意识到我想要那些提交，但在任何地方都找不到原始提交。似乎原始提交几乎都被删除了。即使在整个 git repo 上列出完整的日志，也不会显示原始提交或还原提交。

根据我对 EGit 文档的理解，revert commit 只是应该通过在旧提交之上创建一个新提交来“撤消”更改，撤消它所做的事情。但是，它似乎实际上删除了我原来的提交。

我是吐司吗？我是否永久失去了这些更改？我正在使用 EGit 2.1.0.20120919 运行 Eclipse 3.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T05:23:51.017

`git revert`，正如你所说，不会删除提交。它只会创建一个新的提交，以撤消传递给它的某个提交的更改。因此，原始提交仍在存储库中。列出提交`git log`应该显示原始提交和撤消原始提交所做的提交。

这样，要恢复提交的原始内容，您可以还原还原提交或将存储库状态更改为还原之前的提交，`git reset --hard hash`其中哈希表示代表您`hash`的.`commit``git revert`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:24:47.477

最好的办法是暂时离开 eclipse 和 egit 并使用命令行。

有一个名为的工具[`git reflog`](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)可以向您展示比`git log`. 我建议您尝试一下，看看您对存储库做了什么。

# c# - Android GetDirections

> ID：14331170
> 
> 赞同：1
> 
> 时间：2013-01-15T04:27:23.577
> 
> 标签：c#, android, google-maps, monodevelop, directions

我正在使用 MonoDevelop for Android 和谷歌地图。

如果我有两组经度/纬度点，在地图上显示这两个点之间方向的最佳方式是什么？

我可以看看一些示例代码吗？我应该加载一个跟踪这条路线的网页吗？

我只是想要最简单的方法来显示可以在我为 Android 制作的谷歌地图应用程序中实现的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:48:42.487

1.  您可以使用[Google Web API](https://developers.google.com/maps/documentation/directions/#DirectionsRequests)来查找方向。它返回一个包含结果的 JSON。
2.  然后使用[google http java client](http://code.google.com/p/google-http-java-client/wiki/JSON)解析它们。它为您返回一个纬度/经度点列表
3.  最后，将这些点绘制到您的地图中。你可以看到[例子](https://stackoverflow.com/a/2184239/1821326)

# mysql - php mysql比较2个表并使用REPLACE（id，'junk''）AS id删除不匹配的BUT table2 id

> ID：14331174
> 
> 赞同：1
> 
> 时间：2013-01-15T04:27:50.517
> 
> 标签：mysql, replace, inner-join

我有 2 张桌子

table1 有 id 列，它只是一个自动递增数字 table2 有 id 列，它是相同的，但以“vt_”开头，然后是数字

我需要删除 table2 上 table2.id 与 table1.id 不匹配的任何行但我被卡住了，因为我需要替换“vt_”才能比较这两个数字。

我知道我可以在 SELECT 中做到这一点，例如“SELECT REPLACE(table2.id,'vts_','') AS table2_id”

我无法让它工作，我最后一次尝试是这样的：

```
$sql = @mysql_query("DELETE 
                           voting
                        FROM 
                            voting
                        INNER JOIN vouchers
                        ON REPLACE(voting.item,'vts_','') = vouchers.id"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:09:55.667

`LEFT JOIN`在这里使用

```
DELETE voting
FROM voting LEFT JOIN vouchers
      ON REPLACE(voting.item,'vts_','') = vouchers.id
WHERE  vouchers.id IS NULL 
```

# android - 使用文本和值从微调器 sqlite 加载

> ID：14331175
> 
> 赞同：8
> 
> 时间：2013-01-15T04:27:56.750
> 
> 标签：android, android-spinner

我有一个微调器将数据加载到 sqlite

我在数据库中有字段 ID 和字段名称。

```
private void loadSpinnerDataHama() {
        // database handler
        DatabaseSpinner db = new DatabaseSpinner(getApplicationContext()); 
        // Spinner Drop down elements
        List<String> lables = db.getAllLabels();
        // Creating adapter for spinner
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, lables);
        // Drop down layout style - list view with radio button
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // attaching data adapter to spinner
        spin2.setAdapter(dataAdapter);
    }

    public List<String> getAllLabels(){
    List<String> labels = new ArrayList<String>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_LABELS;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            labels.add(cursor.getString(1));
        } while (cursor.moveToNext());
    }

    // closing connection
    cursor.close();
    db.close();

    // returning lables
    return labels;
} 
```

结果是

美国 -> 值为“美国”

法国 -> 值为“法国”

当我将代码更改`labels.add(cursor.getString(1));`为`labels.add(cursor.getString(0));`

结果是

1 -> 值为“1”

2 -> 值为“2”

我尝试使用，`int position2 = spin2.getSelectedItemPosition()+1;`但值是微调器的 id/位置，而不是数据库的 id。

如何在微调器上显示字段名称。但值是名称的 id

示例：微调器显示：

美国 -> 值为“1”

法国 -> 值为“2”

BR

亚历克斯

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-15T08:14:15.397

这真的很简单，您可以通过以下方式实现/表示您需要的类：

创建以下类：**SpinnerObject**

```
public class SpinnerObject {

    private  int databaseId;
    private String databaseValue;

    public SpinnerObject ( int databaseId , String databaseValue ) {
        this.databaseId = databaseId;
        this.databaseValue = databaseValue;
    }

    public int getId () {
        return databaseId;
    }

    public String getValue () {
        return databaseValue;
    }

    @Override
    public String toString () {
        return databaseValue;
    }

} 
```

使用这个类，您仍然可以使用 ArrayAdapter 的 Android 实现（无需实现您自己的，因为**toString**方法提供了您要显示的字符串值，并且您仍然存储您还需要的数据库 id）。

现在您必须按如下方式创建您的列表：

```
public List < SpinnerObject> getAllLabels(){
    List < SpinnerObject > labels = new ArrayList < SpinnerObject > ();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_LABELS;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if ( cursor.moveToFirst () ) {
        do {
            labels.add ( new SpinnerObject ( cursor.getString(0) , cursor.getString(1) ) );
        } while (cursor.moveToNext());
    }

    // closing connection
    cursor.close();
    db.close();

    // returning labels
    return labels;
} 
```

现在您已经有了包含值和 id 的对象列表，您可以通过以下方式加载微调器：

```
private void loadSpinnerDataHama() {
    // database handler
    DatabaseSpinner db = new DatabaseSpinner(getApplicationContext()); 
    // Spinner Drop down elements
    List <SpinnerObject> lables = db.getAllLabels();
    // Creating adapter for spinner
    ArrayAdapter<SpinnerObject> dataAdapter = new ArrayAdapter<SpinnerObject>(this,
    android.R.layout.simple_spinner_item, lables);
    // Drop down layout style - list view with radio button
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // attaching data adapter to spinner
    spin2.setAdapter(dataAdapter);
} 
```

微调器将显示这些值，同时也有它们的 ID（来自数据库）。

为了检索当前选定项目的 id，您可以执行以下操作：

```
int databaseId = Integer.parseInt ( ( (SpinnerObject) spin2.getSelectedItem () ).getId () ); 
```

请尝试一下，让我知道会发生什么。

# selenium - 如何使用 Selenium Grid 在本地运行节点上的一些命令和系统命令

> ID：14331178
> 
> 赞同：0
> 
> 时间：2013-01-15T04:28:05.600
> 
> 标签：selenium, selenium-webdriver, selenium-grid

我正在尝试解决一个问题，我希望我可以用 Selenium Grid 来解决这个问题，但我不完全确定它是否可能。这是我的问题...我正在使用 Selenium WebDriver 开发测试用例，我需要我的测试在 Windows 机器上运行，但是 AUT 在 Linux 服务器上运行。我有几个只能在 Linux 上运行的工具，我希望能够在 Windows 机器上运行一些命令/测试，而在 Linux 服务器上运行其他一些命令/测试。例如

1.  测试开始 -> Firefox 启动（Windows 机器）
2.  登录网站（Windows 机器）
3.  在 Linux 服务器中运行命令
4.  返回 Windows 框上正在运行的命令/测试。

或者，我可以弄清楚如何从 Windows 机器远程运行这些命令，但我不期待这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:09:50.890

开箱即用，您不能使用 selenium 在本地计算机上运行命令。Selenium/Webdriver 是一个浏览器测试工具，只能与浏览器交互。

根据您的评论更新答案
两种方式的共同部分（我认为您已经知道）在您的 java 代码中，您应该拥有执行步骤 1 和 2 的 webdriver/selenium 命令的代码。您的 java 代码也应该包含逻辑/code 作为步骤 3 执行 linux 命令。步骤 4 应该再次成为您的 webdriver 命令。
此测试代码应从 linux 服务器运行，以便 java 命令执行将在 linux 框中发生。

现在唯一悬而未决的部分是在远程机器上执行测试。

## 方法1不使用网格

在 windows 机器上启动 selenium 服务器。将您的 java 测试指向在这台机器上运行的 selenium 服务器。如果你的 windows 机器 IP 是 10.0.0.1，你应该初始化 webdriver 对象为

```
WebDriver wd =  new RemoteWebDriver(new URL("http://10.0.0.1:4444/wd/hub"),DesiredCapabilities.Firefox()); 
```

这会将您所有的 webdriver 命令发送到在 10.0.0.1 端口 4444 上运行的 selenium 服务器。然后您的测试将在 Windows 机器中执行。为此，您的 linux 服务器和 windows 机器应该在同一个网络中。

## 方法 2 使用网格。

和上面一样，但是不要给出 windows 机器的 ip/dns 名称，而应该给出集线器机器的 ip/dns 名称。您还应该将 Windows 机器注册为该集线器的 RC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-05T12:59:43.603

我认为使用 AutoIT 类型的 Windows 框架，我们可以调用`C:\Windows\System32\cmd.exe`以打开命令提示符并运行一些 .bat 文件。如果是 Linux `/bin/csh or /bin/bash myscript.sh`。

# ios - ios - 用户是否应该添加到 XMPP 名册中以开始消息传递？

> ID：14331180
> 
> 赞同：0
> 
> 时间：2013-01-15T04:28:08.303
> 
> 标签：ios, database, xmpp

用户是否应该存在于名册中才能能够在 iOS 中使用 XMPP 与该用户发送消息？如果那时可以在没有名册的情况下使用 XMPP 吗？（与任何随机用户发送和接收消息）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:35:10.637

是的，它可以向任何没有名册的用户发送 XMPP 消息，您只需要拥有其他用户的 JID。

由于垃圾邮件保护策略，xmpp 客户端不会让您发送直接消息，但如果您的应用程序在双方都使用，那么这很容易实现！

# java - 确保线程在 Java 中获得（大约）相等的 CPU 时间

> ID：14331186
> 
> 赞同：3
> 
> 时间：2013-01-15T04:28:51.733
> 
> 标签：java, multithreading, concurrency

我正在编写一款游戏，玩家在 JVM 上编写相互竞争的 AI 代理。现在架构看起来是这样的：

1.  处理物理模拟的核心服务器模块，并从玩家那里获取消息作为输入以改变世界。核心还根据各种规则（想想战争迷雾）从每个玩家的角度确定世界的样子。
2.  播放器模块从核心接收世界的更新版本，对其进行处理，并基于该处理将消息作为输入流式传输到核心。

这个想法是核心与两个播放器模块一起编译，然后运行模拟，产生一个输出流，可以回放以生成比赛的可视化。

我的问题是，如果每个玩家都在一个 Java 线程上运行，是否有可能确保两个玩家线程获得等量的资源（我认为主要是 CPU 时间）？因为我无法控制每个 AI 正在执行的处理的性质，所以其中一个玩家可能效率极低，但编写方式使其线程消耗了如此多的资源，而另一个玩家的 AI 资源匮乏并且可以不公平竞争。

我觉得如果没有硬实时操作系统，这是不可能的，JVM 甚至还没有接近，但如果有一种方法可以相当接近，我很想探索它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:04:52.743

“播放器模块从核心接收世界的更新版本，对其进行处理，并将消息作为基于该处理的输入流传输到核心”。这意味着播放器模块内部有一个循环，它接收更新消息并将结果消息发送到核心。然后我会使用轻量级的actor模型，每个玩家都是一个actor，所有的actor都使用同一个ExecutorService。由于被激活的参与者通过相同的执行任务队列，他们获得了大致相同的 CPU 访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:56:21.997

您的直觉是正确的，这在 Java 中是不可能的。即使你有一个实时操作系统，仍然有人可以编写一个资源密集型的 AI 线程。

您可以采取几种方法至少在这里有所帮助。首先确保给两个播放器模块线程相同的优先级。如果你在一台有 2 个以上处理器的机器上运行，并且你将每个播放器模块线程设置为具有最高优先级，那么理论上它们都应该在有事可做时都运行。但是，如果没有什么可以阻止播放器模块自己生成新线程，那么您不能保证播放器不会这样做。

所以简短的回答是否定的，你不能在 java 中做出这些保证。

根据您的模拟工作方式，也许您可​​以拥有“转弯”的概念。所以模拟指示玩家 1 移动，然后玩家 2 移动，来回移动，因此他们每个人一次只能移动一个“移动”。不过，不确定这是否适用于您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:40:54.100

如果您有任何关于线程必须做多少工作的旋钮（或只是设置它们的优先级），您可以设置另一个线程，使用`ThreadMXBean`s 定期监视线程并使用`ThreadInfo.getThreadCpuTime`. 然后，您可以比较每个玩家的 CPU 时间并做出相应的反应。
不确定这对您来说是否足够及时和准确，但随着时间的推移，您可以平衡 CPU 使用率。
但是，将工作拆分为数据包并使用之前建议的 Executor 应该是更好的方法，并且更像 java。

# ruby-on-rails - 为什么 will_paginate 没有加载到 rails 3.2.8 引擎中？

> ID：14331187
> 
> 赞同：0
> 
> 时间：2013-01-15T04:28:54.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, will-paginate

这是我们索引中返回@customers 的代码：

```
@customers = Customerx::Customer.where(:active => true).order("since_date DESC, id DESC").paginate(:per_page => 30, :page => params[:page]) 
```

它导致以下错误：

```
undefined method `paginate' for #<ActiveRecord::Relation:0x6b88960> 
```

在调试中，`ActiveRecord::Base.respond_to? :paginate`返回`false`. 在我们看来， will_paginate 没有加载，即使`will_paginate (3.0.3)` 返回了`gem list`.

代码可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:07:51.440

该问题已通过添加`gem will_paginate`引擎的 gemfile 得到解决，即使`gem will_paginate`在 rails 引擎的 gemspec 中也是如此。该问题是由于 gem paginate 未加载为`ActiveRecord::Base.respond_to? :paginate`返回 false 引起的。

这是一篇与这里的问题有些相似的帖子。

[Rails Engine - Gems 依赖项，如何将它们加载到应用程序中？](https://stackoverflow.com/questions/5159607/rails-engine-gems-dependencies-how-to-load-them-into-the-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:43:07.583

即使我曾经得到这个错误，所以我尝试了页面方法......使用

```
@customers = Customerx::Customer.where(:active => true).order("since_date DESC, id DESC").page(params[:page]).per_page(30) 
```

# java - javah 可以被哄骗生成具有一致行尾的 .h 文件吗？

> ID：14331198
> 
> 赞同：1
> 
> 时间：2013-01-15T04:30:25.013
> 
> 标签：java, java-native-interface, newline, javah

`javah`我有一个 maven 项目，它通过作为 java 库的正常构建过程的一部分执行来生成 .h JNI 文件。然后将这些 .h 文件签入源代码控制（例如 git）并用于构建随附的本机库。

一个小烦恼是生成的文件`javah`因行尾不同而不同，具体取决于运行它的平台。因此，如果 Mac OSX 开发人员运行构建并签入（UNIX 样式的行结尾），那么 Windows 开发人员随后将看到*他们的*构建已更改所有 .h 文件（更改为 Windows 样式的行结尾）。但它们实际上并没有改变——`javah`只是以一种依赖于平台的方式表现。

`javah`例如，在生成 .h 文件时，如何哄骗始终使用 UNIX 样式的行尾？似乎没有适当的命令行开关：

```
> javah.exe
Usage:
  javah [options] <classes>
where [options] include:
  -o <file>                Output file (only one of -d or -o may be used)
  -d <dir>                 Output directory
  -v  -verbose             Enable verbose output
  -h  --help  -?           Print this message
  -version                 Print version information
  -jni                     Generate JNI-style header file (default)
  -force                   Always write output files
  -classpath <path>        Path from which to load classes
  -bootclasspath <path>    Path from which to load bootstrap classes
<classes> are specified with their fully qualified names
(for example, java.lang.Object). 
```

也许可以手动启动与`javah`可执行文件启动相同的类，除非`"line.separator"`在这样做之前显式设置属性。但是，我找不到那会是什么课程，或者在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:28:03.600

在这方面，'javah' 与所有其他 Java 程序相同。行终止符由例如 PrintWriter.println() 写入，由系统属性“line.separator”确定。您可以尝试从命令行进行设置，但我怀疑您会以这种方式获得任何乐趣。我会寻找更横向的解决方案，例如按照建议重新配置 IDE，或者只在一台构建机器上运行 javap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:17:43.330

我通过编写一个显式设置`line.separator`属性的自定义启动器解决了这个问题，然后在构建期间调用该启动器：

```
public class JavahLauncher {

    public static void main(String[] args) {
        String original = System.getProperty("line.separator");
        System.setProperty("line.separator", "\n");
        try {
            com.sun.tools.javah.Main.run(args, new PrintWriter(System.out));
        }
        finally {
            System.setProperty("line.separator", original);
        }
    }
} 
```

try-finally 允许在执行构建时在另一个 JVM（例如 Maven 的 JVM 实例）中调用此启动器，而不会永久更改`line.separator`值。一个有趣的注意事项是`com.sun.tools.javah.Main.main`不可用，因为它调用`System.exit`了 ，如果作为 Maven 构建的一部分调用它会导致 Maven 退出！

编译此启动器需要依赖于`tools.jar`，例如：

```
<dependency>
    <groupId>com.sun</groupId>
    <artifactId>tools</artifactId>
    <version>1.7.0</version>
    <scope>system</scope>
    <systemPath>${java.home}/../lib/tools.jar</systemPath>
</dependency> 
```

# ruby-on-rails - 只有管 理员才能创建新用户

> ID：14331201
> 
> 赞同：0
> 
> 时间：2013-01-15T04:30:44.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我已经在我的 rails 3 项目上安装和配置了设计，我想让它只有管理员才能创建/编辑用户。我怎样才能编辑设计控制器来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:42:08.903

我建议为此使用[CanCan](https://rubygems.org/gems/cancan)。

首先，您将[定义 、 和 之类的能力](https://github.com/ryanb/cancan/wiki/Defining-Abilities)，并`:read`使用以下内容将它们分配给用户角色：`:create``:update``:destroy`

```
if user.admin?
  can :manage, :all
end 
```

然后，您将通过使用[类似](https://github.com/ryanb/cancan/wiki/Checking-Abilities)`if can? :create, User`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:37:15.363

如果您只需要允许管理员创建用户，您可以编写类似的内容

```
class uUsersController < ApplicationController
  def create
     #validate if the current user is an admin 
  end
end 
```

**但**更标准、更灵活的方法是使用像[cancan](https://github.com/ryanb/cancan)这样的 gem ，我个人更喜欢它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:39:07.007

我之前已经整理过了。我记得这很痛苦，但它确实有效。它需要[CanCan](https://github.com/ryanb/cancan)。

假设管理员是`admin`在模型上使用布尔值定义的`User`：

**用户.rb：**

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable

  attr_accessor :current_password
  attr_accessible :name, :password, :password_confirmation, :current_password, :email, :remember_me, :admin

end

class Ability
    include CanCan::Ability

    def initialize(user)
    can :manage, :all if user.admin
  end
end 
```

**users_controller.rb**

```
def update
  @user = User.find(params[:id])
  params[:user].delete(:password) if params[:user][:password].blank?
  params[:user].delete(:password_confirmation) if params[:user][:password].blank? and params[:user][:password_confirmation].blank?
  if @user.update_attributes(params[:user])
    flash[:notice] = "Successfully updated "+@user.name
    redirect_to users_path
  else
    render :action => 'edit'
  end
end 
```

**路线.rb**

```
devise_for :users, :path => "d"

devise_scope :user do
  get '/sign_in' => 'devise/sessions#new'
  get '/sign_out' => 'devise/sessions#destroy'
end

resources :users, :controller => "users" 
```

**application_controller.rb**

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  after_filter :user_activity

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_path
  end

  def admin?
    self.admin == true
  end

  def authenticate_admin
    redirect_to :new_user_session_path unless current_user && current_user.admin?
  end

  private

  def user_activity
    current_user.try :touch
  end

end 
```

**application_helper.rb**

```
def resource_name
  :user
end

def resource
  @resource ||= User.new
end

def devise_mapping
  @devise_mapping ||= Devise.mappings[:user]
end 
```

那应该这样做。

# android - 按下后退按钮时异步任务崩溃。

> ID：14331202
> 
> 赞同：3
> 
> 时间：2013-01-15T04:30:52.603
> 
> 标签：android, android-asynctask

当调用片段被暂停/删除时，异步任务会发生什么？我假设任务已完成，但如果有人能证实这一点，那就太好了。我正在尝试解决我的崩溃问题。

我有一个异步任务，它是一个递归图像加载器。图像加载器是它为其加载图像的 listFragment 的内部类。除非我在加载完所有图像之前按下返回按钮，否则图像加载器可以完美运行。当我在所有图像加载完成之前按下后退按钮时，应用程序崩溃。我觉得图像加载器无法访问适配器，但我不确定我是否正确解决了这个问题。我不确定如何在我的异步任务中解决这个问题。如果有人可以帮助我。甚至从我的脑海中蹦出一个想法，让我以不同的方式思考。

任何帮助都是极好的。谢谢你花时间看。

图像加载器

```
private class ImageLoaderTask extends
        AsyncTask<HashMap<String, Object>, Void, HashMap<String, Object>> {

    @Override
    protected HashMap<String, Object> doInBackground(
            HashMap<String, Object>... hm) {
        InputStream in = null;

        String url = (String) hm[0].get("image");
        int pos = (Integer) hm[0].get("pos");
        url = "http://kzfr.org/u/img/small/" + url;
        URL mUrl;

        try {
            mUrl = new URL(url);
            URLConnection urlConnect = (URLConnection) mUrl
                    .openConnection();
            in = urlConnect.getInputStream();

            File cacheDirectory = getSherlockActivity().getBaseContext()
                    .getCacheDir();

            File tmp = new File(cacheDirectory.getPath() + "/kzfr_small"
                    + pos + ".png");

            FileOutputStream fOut = new FileOutputStream(tmp);

            Bitmap b = BitmapFactory.decodeStream(in);
            b.compress(Bitmap.CompressFormat.PNG, 100, fOut);
            fOut.flush();
            fOut.close();

            HashMap<String, Object> hmBmp = new HashMap<String, Object>();
            hmBmp.put("blank_start", tmp.getPath());
            hmBmp.put("pos", pos);
            return hmBmp;

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(HashMap<String, Object> result) {
        // this is the img path that leads to a local image that was just
        // saved on the phone.
        String imgPath = (String) result.get("blank_start");
        // the position of the image in the listview
        int position = (Integer) result.get("pos");
        // local adapter
        SimpleAdapter adapter = (SimpleAdapter) getListAdapter();
        // hashmap entry from the local adapter at the position of the image
        // that we just loaded.
        HashMap<String, Object> hm = (HashMap<String, Object>) adapter
                .getItem(position);
        // replace the actual blank image with the image path that we just
        // loaded
        hm.put("blank_start", imgPath);
        // update listview
        adapter.notifyDataSetChanged();
        // we are done with the current position increment position and move
        // on.
        position++;
        // this while loop finds the next position in the adapter that does
        // not have false for an image path. False indicates that there is
        // no image and i should load a default image.
        while (position < adapter.getCount()) {
            hm = (HashMap<String, Object>) adapter.getItem(position);
            imgPath = (String) hm.get("image");

            if (!imgPath.equalsIgnoreCase("false")) {
                break;
            }
            position++;
        }

        // checks to make sure that the position is not out of bounds on the
        // adapter. If in bounds then there might be more images to load.
        // Start a new ImageLoader. This is a recursive Class.
        if (position < adapter.getCount()) {
            ImageLoaderTask imageLoader = new ImageLoaderTask();

            hm.put("pos", (position));
            imageLoader.execute(hm);
        }

    } 
```

堆栈跟踪

```
01-14 20:09:28.752: E/AndroidRuntime(6069): FATAL EXCEPTION: main
01-14 20:09:28.752: E/AndroidRuntime(6069): java.lang.NullPointerException
01-14 20:09:28.752: E/AndroidRuntime(6069):     at com.appdomum.doublea.ListFrag$ImageLoaderTask.onPostExecute(ListFrag.java:272)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at com.appdomum.doublea.ListFrag$ImageLoaderTask.onPostExecute(ListFrag.java:1)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at android.os.AsyncTask.finish(AsyncTask.java:417)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at android.os.Looper.loop(Looper.java:130)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at android.app.ActivityThread.main(ActivityThread.java:3806)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at java.lang.reflect.Method.invokeNative(Native Method)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at java.lang.reflect.Method.invoke(Method.java:507)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at   com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-14 20:09:28.752: E/AndroidRuntime(6069):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T04:41:09.493

我认为你在正确的轨道上。

在编写自定义时`AsyncTask`，许多开发人员忘记了处理任务取消是必要的。简单地取消任务并不意味着它的代码不会在（例如）`Activity`/`Fragment`资源上执行，这可能会在当时被释放。这通常在以下步骤中完成：

1.  创建任务后，保存对它的引用。
2.  `Activity`/完成后取消所有正在运行的任务`Fragment`。这通常在`Activity.onDestroy()`/中完成`Fragment.onDestroy()`。删除对已取消任务的所有引用。
3.  在任务代码中：
    1.  在`doInBackground()`定期检查它是否`isCancelled()`。如果是这样，请整理并中止进一步的执行。
    2.  最终处理取消`onCancelled()`（在 UI 线程上运行）。
    3.  执行取消任务的任何处理`onPostExecute()`（如果任务被取消，则执行结果）*。*`null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:39:22.557

> 当调用片段被暂停/删除时，异步任务会发生什么？我假设任务已完成，但如果有人能证实这一点，那就太好了。

这是不正确的；该框架不会通过取消您在后台线程中所做的工作来为您完成工作。`onPause()`像和调用回调的原因`onResume()`是通知您的应用程序***您***需要清理并取消任何不在长寿命组件中的正在运行的工作，例如`Service`.

在这种情况下，如果您不取消，任务将继续运行。由于此类被定义为非静态内部类，这也意味着您已经创建了一个临时内存泄漏，因为`AsyncTask`它持有`Fragment`对) 甚至可以在`onDestroy()`.

您需要以`AsyncTask`这样的方式实现您的，它会检查取消标志，您可以手动取消工作`onPause()`或类似的回调。

# android - 适用于 2 个不同课程的 WiFi 广播接收器，我如何正确投射我的活动？

> ID：14331203
> 
> 赞同：1
> 
> 时间：2013-01-15T04:31:00.213
> 
> 标签：android, casting, broadcastreceiver, wifi-direct

我正在关注[Android 的 WiFi 直接指南，](http://developer.android.com/guide/topics/connectivity/wifip2p.html)因为我正在构建一个使用 WiFi 直接的应用程序。我也有2节课；一种称为ClientReceive，一种称为HostSend。客户端发起与主机的连接，然后主机将数据推送到客户端。

当我开始开始我的 WiFi 直接设置时，我制作了一个广播接收器来监听状态变化：

```
package com.mgamerzproductions.wifidirecttest;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.NetworkInfo;
import android.net.wifi.p2p.WifiP2pDevice;
import android.net.wifi.p2p.WifiP2pManager;
import android.net.wifi.p2p.WifiP2pManager.Channel;
import android.net.wifi.p2p.WifiP2pManager.PeerListListener;
import android.util.Log;

/**
 * A BroadcastReceiver that notifies of important wifi p2p events.
 */
public class WiFiDirectBroadcastReceiver extends BroadcastReceiver {

    private WifiP2pManager manager;
    private Channel channel;
    private WiFiActivity activity;

    /**
     * @param manager WifiP2pManager system service
     * @param channel Wifi p2p channel
     * @param Host class (HostSend) for this constructor.
     */
    public WiFiDirectBroadcastReceiver(WifiP2pManager manager, Channel channel,
            HostSend activity) {
        super();
        this.manager = manager;
        this.channel = channel;
        this.activity = activity;
    }

    /**
     * @param manager WifiP2pManager system service
     * @param channel Wifi p2p channel
     * @param activity activity associated with the receiver
     */
    public WiFiDirectBroadcastReceiver(WifiP2pManager manager, Channel channel,
            ClientReceive activity) {
        super();
        this.manager = manager;
        this.channel = channel;
        this.activity = activity;
    }

    /*
     * (non-Javadoc)
     * @see android.content.BroadcastReceiver#onReceive(android.content.Context,
     * android.content.Intent)
     */
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION.equals(action)) {

            // UI update to indicate wifi p2p status.
            int state = intent.getIntExtra(WifiP2pManager.EXTRA_WIFI_STATE, -1);
            if (state == WifiP2pManager.WIFI_P2P_STATE_ENABLED) {
                // Wifi Direct mode is enabled
                activity.setIsWifiP2pEnabled(true);
            } else {
                activity.setIsWifiP2pEnabled(false);
                //activity.resetData();

            }
            Log.d(Launch.APPTAG, "P2P state changed - " + state);
        } else if (WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION.equals(action)) {

            // request available peers from the wifi p2p manager. This is an
            // asynchronous call and the calling activity is notified with a
            // callback on PeerListListener.onPeersAvailable()
            if (manager != null) {
                /*manager.requestPeers(channel, (PeerListListener) activity.getFragmentManager()
                        .findFragmentById(R.id.frag_list));*/
            }
            Log.d(Launch.APPTAG, "P2P peers changed");
        } else if (WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION.equals(action)) {

            if (manager == null) {
                return;
            }

            NetworkInfo networkInfo = (NetworkInfo) intent
                    .getParcelableExtra(WifiP2pManager.EXTRA_NETWORK_INFO);

            if (networkInfo.isConnected()) {

                // we are connected with the other device, request connection
                // info to find group owner IP

                HostSend connectionListener = activity;
                manager.requestConnectionInfo(channel, connectionListener);
            } else {
                // It's a disconnect
                activity.resetData();
            }
        } else if (WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION.equals(action)) {
            /*DeviceListFragment fragment = (DeviceListFragment) activity.getFragmentManager()
                    .findFragmentById(R.id.frag_list);
            fragment.updateThisDevice((WifiP2pDevice) intent.getParcelableExtra(
                    WifiP2pManager.EXTRA_WIFI_P2P_DEVICE));*/

        }
    }
} 
```

但是，我有另一个类 ClientReceive，它也需要接收器，因为两个设备都需要直接设置 WiFi 并使用回调（我认为这就是所谓的回调？活动的回调？）来建立连接。这两个类都是 WiFi 活动的子类，它本质上是一个空类，它仅使用 super.methodname() 覆盖 Activity 中的一些方法，以便孩子可以访问它。IT 有一些与 WiFi 相关的额外方法。我创建它是为了避免强制转换，但它不起作用，因为子类有不同的方法，如果我使用 WiFiActivity 而不是它的子类，我不能使用子类方法。

有没有办法正确地做到这一点？我的代码正在进行中（这就是为什么它有点难看），但我没有想法。我有 2 个构造函数，一个来自每个设备上的每个活动（一个是主机设备，一个是客户端设备）。我想要做的是在两个类之间共享这个类，但我不知道如何正确地转换 HostSend connectionListener (HostSend) 活动，因为我不知道如何转换这样的项目。

谢谢。对不起，冗长的解释。

# linux - 系统备份后 Magento 文件权限更改 - 导致 500 错误

> ID：14331207
> 
> 赞同：6
> 
> 时间：2013-01-15T04:31:19.177
> 
> 标签：linux, magento, file-permissions

我在进行系统备份时遇到了 Magento 问题。每次我进行系统备份时，Magento 都会更改文件权限，并在备份完成并重新加载管理屏幕时导致 500 服务器错误。

问题与这个未回答的问题相同。我没有设置“维护模式”。：[https ://stackoverflow.com/questions/13107963/magento-file-permissions-chang-to-chmod-666-after-system-backup](https://stackoverflow.com/questions/13107963/magento-file-permissions-changing-to-chmod-666-after-system-backup)

谁能告诉我如何阻止这种情况发生。每次进行备份时都必须重置权限，这很痛苦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-17T20:32:09.677

问题的出现是因为 Magento Backup 设置了文件的权限。

有问题的工作是`lib/Mage/Archive/Helper/File.php`

在其中您可以找到一个功能`public function open($mode = \'w+\', $chmod = 0666)`

这会导致全局更改权限的问题。

如果您必须使用 Magento 的站点严重备份，那么您必须运行脚本来设置文件/文件夹权限。

ssh 命令（可以作为 shell 脚本运行）

对于通过 FastCGI、suPHP 或 LSAPI 运行 PHP 的 Magento：

```
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
chmod 500 pear
chmod 500 mage #for magento 1.5+ 
```

对于 PHP 在 Apache 下作为 DSO 模块运行的 Magento：

```
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
chmod o+w var var/.htaccess app/etc
chmod 550 pear
chmod 550 mage #for magento 1.5+
chmod -R o+w media 
```

为了让 Magento 正常工作， var/ 和 media/ 可能需要递归设置为 777

[从 MagentoCommerce 权限设置页面](http://www.magentocommerce.com/wiki/groups/227/resetting_file_permissions)，该页面也有一个 php 脚本链接大约一半，可以运行以设置权限。

另一种选择是转储 Magento 的备份系统，并使用`tar`和`mysqldump`. **注意：**这将需要大量可用空间来临时存储 tar 文件，直到您下载它，除非您排除了 media/ 文件夹并以不同的方式进行媒体文件夹备份。

```
tar -czf magentobu.tgz --exclude="public_html/var/*" --exclude="public_html/media/catalog/product/cache/*" public_html
mysqldump -u $USER -p$PASS $DBASE > magentodb.sql 
```

并将生成的文件复制到您的异地存储，无论是您的工作站、S3 存储桶还是 vps。

另一种选择是设置一个系统，您可以`rsync`将您的 Magento 系统安装到该系统上，并提取一个每天创建一次的 mysql 转储文件。这样做，您可以获得一个连续的、最新的完整站点镜像，当您等待将备份拉到异地时，不会在服务器上产生额外的存储空间。

# c# - 单元测试 - 为项目中的本地文件构造 URI

> ID：14331210
> 
> 赞同：0
> 
> 时间：2013-01-15T04:31:38.193
> 
> 标签：c#, unit-testing, uri, .net-4.5, xunit

我有一个从外部 API 解析 JSON 的服务。

该服务执行以下操作：

1.  构造 API 的 URI
2.  读取返回的 JSON
3.  反序列化为相关的 C# 对象
4.  映射到我的域实体
5.  保存到数据库

我正在尝试对步骤 1-4 进行单元测试（5 超出了此测试的范围）。

因此，我不想使用 web api——而是在我的测试项目中本地存储了一个“示例”JSON 文件。

如何读取此文件并将其构造为 Uri 对象？

例如：

```
var uri = new Uri("myfile.json"); 
```

我收到一条错误消息，提示“URI 格式不正确”。

该文件设置为“构建操作：嵌入式资源”和“复制到输出目录：始终复制”。

我在 C# .NET 4.5 (VS 2012) 上，并使用 XUnit 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:01:30.300

使用该`file:`方案和输出目录的完全限定路径，该路径应该与运行测试的路径相同。

```
var fqn = Assembly.GetExecutingAssembly().Location;
var uri = new Uri("file://" + fqn + "/myfile.json"); 
```

有关详细信息，请参阅[http://en.wikipedia.org/wiki/File_URI_scheme 。](http://en.wikipedia.org/wiki/File_URI_scheme)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T02:39:05.367

@RPM1984 的提示给出了答案。我刚刚遇到了这个问题，下面的 hack 为我做了：

```
string fqnModified = "\\" + fqn;
Uri uri = new Uri(fqnModified); 
```

# css - 仅使用 css 菜单正确显示第三层子菜单

> ID：14331212
> 
> 赞同：0
> 
> 时间：2013-01-15T04:31:41.197
> 
> 标签：css, hover, position, submenu

我正在开发一个新站点，但 css 菜单有问题。通过示例更容易解释：这是该站点的链接：[http ://www.webau.net/CSFF/index.asp](http://www.webau.net/CSFF/index.asp)

在“主页”父菜单项下，我有以下配置：

```
Top level menu (parent)
    Submenu 1 (child 1)
        Submenu 2 (grandchild 1)
    Submenu 3 (child 2)
    Submenu 4 (child 3) 
```

相反，它出现在这样的页面上，孙子 1 看起来取代了子 2 菜单：

```
Top level menu (parent)
    Submenu 1 (child 1)
    Submenu 2 (grandchild 1)
    Submenu 4 (child 3) 
```

我可以看到子菜单 2 的列表略有偏移。这让我认为这是试图不恰当地显示孙子。

所以我假设我有两个问题..

首先，当您将鼠标悬停在父菜单项上时，第三层菜单（孙子菜单 2）同时显示第二层菜单（子子菜单 1、3、4）。

其次，由于某种原因，孙子菜单 2 项正在取代子子菜单 3（放置在其上）。

我认为当我更正孙子菜单的显示时，问题二将得到解决。

有人可以帮我弄清楚如何添加新的 css 代码来处理第三层或多层菜单......所以它们会被隐藏，直到他们自己的父级悬停，然后显示在它的父级子菜单列的右侧？

再次感谢您的帮助。阳光奥兹

为了您的方便： HTML 代码：

```
<div id="navcontainer">
    <div id="navsection">  
        <ul>
            <li id="navactive"><a class="current" href="#">Home</a>
                <ul>
                    <li><a href="#">submenu 1</a>
                        <ul>
                            <li><a href="#">submenu 2</a></li>
                        </ul>
                    </li>
                    <li><a href="#">submenu 3</a></li>
                    <li><a href="#">submenu 4</a></li>
                </ul>
            </li>
            <li><... rest of menu items not needed for example>
            </li>
        </ul>
    </div>
</div> 
```

CSS 代码：

```
#navcontainer 
{
    width: 711px;
    height: 25px;
    text-align: center;
    margin: 0px auto; /*Center container on page*/
    clear: both;
    background-color: #129F9F;
    border: 3px solid #FFFFFF;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    -o-border-radius: 5px;
    -ms-border-radius: 5px;
    border-radius: 5px; 

    /* IE10 Consumer Preview */ 
    background-image: -ms-linear-gradient(top, #16ACAC 0%, #0D6F6F 100%);

    /* Mozilla Firefox */ 
    background-image: -moz-linear-gradient(top, #16ACAC 0%, #0D6F6F 100%);

    /* Opera */ 
    background-image: -o-linear-gradient(top, #16ACAC 0%, #0D6F6F 100%);

    /* Webkit (Safari/Chrome 10) */ 
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #16ACAC), color-stop(1, #0D6F6F));

    /* Webkit (Chrome 11+) */ 
    background-image: -webkit-linear-gradient(top, #16ACAC 0%, #0D6F6F 100%);

    /* W3C Markup, IE10 Release Preview */ 
    background-image: linear-gradient(to bottom, #16ACAC 0%, #0D6F6F 100%); 
}
#navsection
{
    height: 24px;
    line-height: 24px;
    font-size: 12px;
    position: relative;
}
#navsection ul
{
    padding: 0px 0px 0px 35px;  /* padding on left to get nav menu to center.. since it has a float left to make it display properly*/
    list-style: none;
}
#navsection ul li
{
    padding: 0;
    margin: 0;
    border-right: 2px solid #129F9F;
    float: left;
}
#navsection ul li.navcontact  /* to stop right border at end of nav line */
{
    padding: 0;
    margin: 0;
    border-right: none;
    float: left;
}
#navsection ul li a
{
    color: #FFF;
    display: block;
    text-decoration: none;
    padding: 0 15px;
}
#navsection > ul > li > a:hover, #navsection  > ul > li:hover > a  
{  
    text-decoration: none;
    color: #EAA339;
    /* IE10 Consumer Preview */ 
    background-image: -ms-linear-gradient(top, #0D6F6F 0%, #16ACAC 100%);

    /* Mozilla Firefox */ 
    background-image: -moz-linear-gradient(top, #0D6F6F 0%, #16ACAC 100%);

    /* Opera */ 
    background-image: -o-linear-gradient(top, #0D6F6F 0%, #16ACAC 100%);

    /* Webkit (Safari/Chrome 10) */ 
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #0D6F6F), color-stop(1, #16ACAC));

    /* Webkit (Chrome 11+) */ 
    background-image: -webkit-linear-gradient(top, #0D6F6F 0%, #16ACAC 100%);

    /* W3C Markup, IE10 Release Preview */ 
    background-image: linear-gradient(to bottom, #0D6F6F 0%, #16ACAC 100%); 
}

#navsection > ul > li > a.current:hover, #navactive a.current:link, #navactive a:visited, #navactive > ul  li  a:hover, #navsection a:hover
{
    text-decoration: none;
    color: #EAA339;
    /* IE10 Consumer Preview */ 
    background-image: -ms-linear-gradient(top, #0D6F6F 0%, #16ACAC 100%);

    /* Mozilla Firefox */ 
    background-image: -moz-linear-gradient(top, #0D6F6F 0%, #16ACAC 100%);

    /* Opera */ 
    background-image: -o-linear-gradient(top, #0D6F6F 0%, #16ACAC 100%);

    /* Webkit (Safari/Chrome 10) */ 
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #0D6F6F), color-stop(1, #16ACAC));

    /* Webkit (Chrome 11+) */ 
    background-image: -webkit-linear-gradient(top, #0D6F6F 0%, #16ACAC 100%);

    /* W3C Markup, IE10 Release Preview */ 
    background-image: linear-gradient(to bottom, #0D6F6F 0%, #16ACAC 100%); 
}

#navsection ul li ul
{
    display: none;
    width: auto;
    position: absolute;
    padding: 0px;
    margin: 0px;
}
#navsection ul li:hover ul
{
    display: block;
    position: absolute;
    margin: 0;
    padding: 0;
}
#navsection ul li:hover li
{
    float: none;
    list-style: none;
    margin: 0px;
}
#navsection ul li:hover li
{
    font-size: 12px;
    height: 24px;
    background: #54C4C4;
    border: 1px solid #FFFFFF;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    -o-border-radius: 5px;
    -ms-border-radius: 5px;
    border-radius: 5px; 
}
#navsection ul li:hover li a
{
    font-size: 11px;
    color: #fff;
    padding: 0px;
    display: block;
    width: 150px;
}
#navsection ul li li a:hover
{
    font-size: 11px;
    height: 24px;
    color:#EAA339;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    -o-border-radius: 5px;
    -ms-border-radius: 5px;
    border-radius: 5px; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:48:48.323

这里有3个问题。

1.  您正在显示`<ul/>`存在于悬停下方的所有元素`<li/>`。更改`#navsection ul li:hover ul`为`#navsection ul li:hover > ul`仅选择直接子级

2.  您将每个下降级别的位置设置为相同。尝试添加类似的`#navsection ul ul ul { top: 1em; left: 140px; }`内容，这将阻止孙子遮挡孩子。

3.  您的`title`属性会对您的导航产生负面影响。我会完全删除它们，因为它们不会向链接添加任何真正有用的信息，**并且**会模糊菜单项，从而使导航难以使用。

我希望这会有所帮助:)

# android - 如何在android中显示图片？我的第一个安卓应用

> ID：14331223
> 
> 赞同：0
> 
> 时间：2013-01-15T04:33:26.363
> 
> 标签：android, image

在我尝试添加图片之前，我一直在学习教程，一切都很好。

在我发布代码之前，这是我正在使用的：

eclipse 与 android 附加构建目标：2.2 api 8 avd 目标：2.2 api 8

在教程中，我被告知要在 res 中创建自己的可绘制文件夹，所以我做了并且在文件夹中有 3 个 .png。是的，我尝试使用 drawable-hdpi 文件夹，但仍然收到此错误：

“抱歉应用程序 blah blah 意外停止，请重试。”

这是我的xml代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayoutVert"
android:layout_width="wrap_content"
android:layout_height="125dp"
android:background="@layout/activity_postage_calculator"
android:gravity="center|left|top"
android:orientation="vertical"
android:paddingTop="5dp"
tools:context=".PostageCalculator" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="10dp"
    android:text="@string/package_type"
    android:textColor="@android:color/black"
    android:textSize="20sp" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayoutHoriz1"
    android:layout_width="320dp"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <RadioButton
        android:id="@+id/radioButton1"
        android:layout_width="100dp"
        android:layout_height="60dp"
        android:text="@string/letter" />
</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayoutHoriz2"
    android:layout_width="320dp"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:contentDescription="@string/letter"
        android:src="@drawable/letter" />
      </LinearLayout>
  </LinearLayout> 
```

一些logcat的东西：

```
01-14 23:27:04.174: D/AndroidRuntime(268): Shutting down VM
01-14 23:27:04.205: W/dalvikvm(268): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-14 23:27:04.294: E/AndroidRuntime(268): FATAL EXCEPTION: main
01-14 23:27:04.294: E/AndroidRuntime(268): java.lang.RuntimeException: Unable to start activity ComponentInfo{edu.pitt.cs1635.tdo7.prog1/edu.pitt.cs1635.tdo7.prog1.PostageCalculator}: android.view.InflateException: Binary XML file line #1: Error inflating class <unknown>
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.os.Looper.loop(Looper.java:123)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-14 23:27:04.294: E/AndroidRuntime(268):  at java.lang.reflect.Method.invokeNative(Native Method)
01-14 23:27:04.294: E/AndroidRuntime(268):  at java.lang.reflect.Method.invoke(Method.java:521)
01-14 23:27:04.294: E/AndroidRuntime(268):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-14 23:27:04.294: E/AndroidRuntime(268):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-14 23:27:04.294: E/AndroidRuntime(268):  at dalvik.system.NativeStart.main(Native Method)
01-14 23:27:04.294: E/AndroidRuntime(268): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class <unknown>
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
01-14 23:27:04.294: E/AndroidRuntime(268):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
01-14 23:27:04.294: E/AndroidRuntime(268):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.app.Activity.setContentView(Activity.java:1647)
01-14 23:27:04.294: E/AndroidRuntime(268):  at edu.pitt.cs1635.tdo7.prog1.PostageCalculator.onCreate(PostageCalculator.java:12)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-14 23:27:04.294: E/AndroidRuntime(268):  ... 11 more
01-14 23:27:04.294: E/AndroidRuntime(268): Caused by: java.lang.reflect.InvocationTargetException
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.widget.LinearLayout.<init>(LinearLayout.java:115)
01-14 23:27:04.294: E/AndroidRuntime(268):  at java.lang.reflect.Constructor.constructNative(Native Method)
01-14 23:27:04.294: E/AndroidRuntime(268):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
01-14 23:27:04.294: E/AndroidRuntime(268):  ... 21 more
01-14 23:27:04.294: E/AndroidRuntime(268): Caused by: android.content.res.Resources$NotFoundException: File res/layout/activity_postage_calculator.xml from drawable resource ID #0x7f030000
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.content.res.Resources.loadDrawable(Resources.java:1697)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.view.View.<init>(View.java:1885)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.view.View.<init>(View.java:1834)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.view.ViewGroup.<init>(ViewGroup.java:285)
01-14 23:27:04.294: E/AndroidRuntime(268):  ... 25 more
01-14 23:27:04.294: E/AndroidRuntime(268): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #1: invalid drawable tag LinearLayout
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:784)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:729)
01-14 23:27:04.294: E/AndroidRuntime(268):  at android.content.res.Resources.loadDrawable(Resources.java:1694)
01-14 23:27:04.294: E/AndroidRuntime(268):  ... 29 more 
```

我是新手，所以你们能给我的任何东西都将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:39:27.917

异常状态： *二进制 XML 文件第 1 行：无效的可绘制标签 LinearLayout*。

您是否将布局文件（您发布的 XML）放在 res/drawable 目录中？如果是这样，请尝试将其移动到 res/layout 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:48:03.793

该错误表示找不到资源。

检查文件名是否与您在 XML 上调用的文件名相同。并确保文件名全部小写。

# django - 如何在 django 中使用子查询？

> ID：14331224
> 
> 赞同：20
> 
> 时间：2013-01-15T04:33:27.877
> 
> 标签：django, postgresql, django-queryset

我想获取每个客户的最新购买列表，按日期排序。

除了日期之外，以下查询执行我想要的操作：

```
(Purchase.objects
         .all()
         .distinct('customer')
         .order_by('customer', '-date')) 
```

它产生如下查询：

```
SELECT DISTINCT ON 
    "shop_purchase.customer_id" 
    "shop_purchase.id" 
    "shop_purchase.date" 
FROM "shop_purchase" 
ORDER BY "shop_purchase.customer_id" ASC, 
         "shop_purchase.date" DESC; 
```

我被迫使用`customer_id`作为第一个`ORDER BY`表达式，因为`DISTINCT ON`.

我想按日期排序，所以我真正需要的查询应该是这样的：

```
SELECT * FROM (
  SELECT DISTINCT ON 
      "shop_purchase.customer_id" 
      "shop_purchase.id" 
      "shop_purchase.date" 
  FROM "shop_purchase" 
  ORDER BY "shop_purchase.customer_id" ASC, 
           "shop_purchase.date" DESC;
  )
AS result 
ORDER BY date DESC; 
```

我不想使用 python 进行排序，因为我仍然需要对查询进行页面限制。数据库中可能有数万行。

事实上，它目前在 python 中排序并且导致页面加载时间非常长，所以这就是我试图解决这个问题的原因。

基本上我想要这样的东西[https://stackoverflow.com/a/9796104/242969](https://stackoverflow.com/a/9796104/242969)。是否可以用 django 查询集而不是编写原始 SQL 来表达它？

实际的模型和方法有几页长，但这里是上面查询集所需的模型集。

```
class Customer(models.Model):
  user = models.OneToOneField(User)

class Purchase(models.Model):
  customer = models.ForeignKey(Customer)
  date = models.DateField(auto_now_add=True)
  item = models.CharField(max_length=255) 
```

如果我有如下数据：

```
Customer A - 
    Purchase(item=Chair, date=January), 
    Purchase(item=Table, date=February)
Customer B - 
    Purchase(item=Speakers, date=January), 
    Purchase(item=Monitor,  date=May)
Customer C - 
    Purchase(item=Laptop,  date=March), 
    Purchase(item=Printer, date=April) 
```

我希望能够提取以下内容：

```
Purchase(item=Monitor, date=May)
Purchase(item=Printer, date=April)
Purchase(item=Table,   date=February) 
```

每个客户的列表中最多有一次购买。购买是每个客户的最新产品。它按最新日期排序。

此查询将能够提取：

```
SELECT * FROM (
  SELECT DISTINCT ON 
    "shop_purchase.customer_id" 
    "shop_purchase.id" 
    "shop_purchase.date" 
  FROM "shop_purchase" 
  ORDER BY "shop_purchase.customer_id" ASC, 
           "shop_purchase.date" DESC;
) 
AS result 
ORDER BY date DESC; 
```

我试图找到一种不必使用原始 SQL 来实现此结果的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T00:39:37.800

这可能不是您正在寻找的东西，但它可能会让您更接近。看看[Django 的 annotate](https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate)。

这是一个可能有帮助的例子：

```
 from django.db.models import Max
  Customer.objects.all().annotate(most_recent_purchase=Max('purchase__date')) 
```

这将为您提供一个客户模型列表，其中每个模型都有一个名为“most_recent_purchase”的新属性，并将包含他们最后一次购买的日期。生成的 sql 如下所示：

```
SELECT "demo_customer"."id", 
       "demo_customer"."user_id", 
       MAX("demo_purchase"."date") AS "most_recent_purchase"
FROM "demo_customer"
LEFT OUTER JOIN "demo_purchase" ON ("demo_customer"."id" = "demo_purchase"."customer_id")
GROUP BY "demo_customer"."id",
         "demo_customer"."user_id" 
```

另一种选择是向您的客户模型添加一个属性，如下所示：

```
 @property
  def latest_purchase(self):
    return self.purchase_set.order_by('-date')[0] 
```

您显然需要处理在此属性中没有任何购买的情况，这可能不会很好地执行（因为您将为每个客户运行一个查询以获取他们的最新购买）。

我过去使用过这两种技术，并且它们在不同的情况下都能正常工作。我希望这有帮助。祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T07:18:17.863

每当使用 Django ORM 编写难以编写的查询时，我首先尝试在 psql（或您使用的任何客户端）中进行查询。你想要的 SQL**不是**这个：

```
SELECT * FROM (
  SELECT DISTINCT ON 
    "shop_purchase.customer_id" "shop_purchase.id" "shop_purchase.date" 
  FROM "shop_purchase" 
  ORDER BY "shop_purchase.customer_id" ASC, "shop_purchase.date" DESC;
  ) AS result 
ORDER BY date DESC; 
```

在上面的 SQL 中，内部 SQL 在 (customer_id、id 和 date) 的组合上查找 distinct，并且由于 id 对所有人都是唯一的，因此您将从表中获取所有记录。我假设 id 是按照约定的主键。

如果您需要找到每个客户的最后一次购买，您需要执行以下操作：

```
SELECT  "shop_purchase.customer_id", max("shop_purchase.date")
FROM shop_purchase
GROUP BY 1 
```

但上述查询的问题在于它只会给您客户姓名和日期。当您在子查询中使用这些结果时，使用它不会帮助您找到记录。

要使用`IN`，您需要一个唯一参数列表来识别记录，例如*id*

如果在您的记录中*id*是一个序列号，那么您可以利用最新日期也将是最大 id 的事实。所以你的 SQL 变成：

```
SELECT  max("shop_purchase.id") 
FROM shop_purchase
GROUP BY "shop_purchase.customer_id"; 
```

请注意，我在 selected 子句中只保留了一个字段 ( *id* )，以便在使用 IN 的子查询中使用它。

完整的 SQL 现在将是：

```
SELECT * 
FROM shop_customer 
WHERE "shop_customer.id" IN 
    (SELECT  max("shop_purchase.id") 
     FROM shop_purchase
     GROUP BY "shop_purchase.customer_id"); 
```

并使用 Django ORM 它看起来像：

```
(Purchase.objects.filter(
    id__in=Purchase.objects
                   .values('customer_id')
                   .annotate(latest=Max('id'))
                   .values_list('latest', flat=True))) 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-10T18:57:26.323

我有类似的情况，这就是我打算如何去做：

```
query = Purchase.objects.distinct('customer').order_by('customer').query
query = 'SELECT * FROM ({}) AS result ORDER BY sent DESC'.format(query)
return Purchase.objects.raw(query) 
```

它给了我想要的查询。缺点是它是原始查询，我不能附加任何其他查询集过滤器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-13T20:29:39.030

如果我需要一些数据子集（N 项）以及 Django 查询，这是我的方法。这是使用 PostgreSQL 和方便`json_build_object()`函数（Postgres 9.4+）的示例，但您可以在其他数据库系统中使用其他聚合函数。对于较旧的 PostgreSQL 版本，您可以使用`array_agg()`和`array_to_string()`函数的组合。

想象一下，您有模型`Article`以及`Comment`列表中的每篇文章，您想要选择 3 个最近的评论（更改`LIMIT 3`以调整子集的大小或`ORDER BY c.id DESC`更改子集的排序）。

```
qs = Article.objects.all()
qs = qs.extra(select = {
    'recent_comments': """
    SELECT
        json_build_object('comments',
            array_agg(
              json_build_object('id', id, 'user_id', user_id, 'body', body)
            )
        )
    FROM (
        SELECT
          c.id,
          c.user_id,
          c.body
        FROM app_comment c
        WHERE c.article_id = app_article.id
        ORDER BY c.id DESC
        LIMIT 3
    ) sub
    """
})

for article in qs:
    print(article.recent_comments)

# Output:
# {u'comments': [{u'user_id': 1, u'id': 3, u'body': u'foo'}, {u'user_id': 1, u'id': 2, u'body': u'bar'}, {u'user_id': 1, u'id': 1, u'body': u'joe'}]}
# .... 
```

# height - 如何减少段落之间的高度，即 在 JSP 中

> ID：14331226
> 
> 赞同：0
> 
> 时间：2013-01-15T04:33:34.347
> 
> 标签：height, paragraph

我有4段像

A B C D

efgh

伊克尔

操作

这是代码：

```
 <p style="line-height: 2"> <label><font color="red">*</font>Alamat :</label> 
${actionBean.deposit.alamat1} <p style="line-height: 1"> <label>&nbsp;</label> 
${actionBean.deposit.alamat2} </p> <p style="line-height: 1"> <label>&nbsp;</label>
 ${actionBean.deposit.alamat3} </p> 
```

段落之间的大小太大。我使用 line-height 属性，但它不能正常工作....请给我一个不错的选择。

```
 Thanks in advance. 
```

# c - 很难使用 getchar 和存储字符

> ID：14331227
> 
> 赞同：0
> 
> 时间：2013-01-15T04:33:53.133
> 
> 标签：c, input, getchar

我是 C 编程的新手，并且仍在尝试学习它在其库中提供的所有有用功能。特别是，我试图围绕如何在特定情况下将 getchar() 用于多个字符。我希望能够从控制台输入类似于：

11 2 34 100

我希望能够区分这些条目（我猜是分隔符空间？），并将这些数字相加。这是一项任务，所以我想知道是否有人可以给我一个提示或为我指出正确的方向，以了解如何更进一步。我当然会很感激。这就是我目前所拥有的。此外，我们不应该在这里使用数组。这真的让我很震惊，因为我看不到任何其他方式。同样，任何朝着正确方向的帮助或指示都会大有帮助！

```
 int main()
{

  int count = 0;
  char input;
  int wordCount = 0;
  int numEntered  = 0;

  input = getchar();

  while(input != '\n')
    {
      if(input != ' ')
    {

          count++;

    }

      input = getchar();

    }

  printf("Number of characters included in numbers %d\n", count);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:36:48.027

您可以存储两个整数，一个是运行总数，一个是当前数字。

如果遇到不是空格的数字，请将当前数字乘以 10，然后将该数字添加到当前数字。

如果遇到空格，请将当前数字添加到运行总数中，然后将当前数字重置为 0。

# c# - 如何在 C# 中使用这个单例类？

> ID：14331230
> 
> 赞同：9
> 
> 时间：2013-01-15T04:33:58.387
> 
> 标签：c#, design-patterns

我正在努力使用单例设计模式。我正在尝试在这个简单的控制台应用程序中使用它。我在 Program 类的 Main 方法中遇到了问题。我想从 Singleton 类定义对象，例如：`var data = Singleton.Instance;`但我不知道为什么我不能这样做另外，我不知道为什么我在运行程序时收到以下错误消息：

```
Unhandled Exception: System.NullRefernceException: Object reference not 
  set to an instance of an object. 
```

**那么如何解决呢？**
**单例类：**

```
namespace Singleton
{
    class Singleton
    {
        //Variable
        private static Singleton instance;
        private List<string> Messages;
        //Constructor
        private Singleton() { }
        //Property
        public static Singleton Instance
        {
            get 
            {
                if (instance == null)
                {
                    instance = new Singleton();
                }
                return instance;
            }
        }
        //Methods
        public void Message(string message)
        {
            Messages.Add(message);
        }

        public bool HasMessage(string message)
        {
            return Messages.Contains(message);
        }
    }
} 
```

**节目类：**

```
namespace Singleton
{
    class Program
{
    static void Main(string[] args)
    {
        var data = Singleton.Instance;
        Singleton.Instance.Message("Hello World!!!");
        if(Singleton.Instance.HasMessage("12"))
            Console.WriteLine("NO STRING!!!");
        else
            Console.WriteLine("There is a match");

    }
}
} 
```

**更新：**

伙计们，到目前为止，我非常感谢您的帮助。该程序现在正在运行，但逻辑不起作用。如果您查看主程序，您会看到列表中只有“Hello World！！！”。但是，当我使用 HasMessage 方法时不起作用。因为程序一直显示“有匹配”。但它应该告诉我“没有字符串！！！” 因为没有匹配。**那么如何解决呢？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T04:36:32.520

您的字段`Messages`未初始化为任何内容。这就是为什么你得到例外。在你的课堂上做：

```
 private List<string> Messages = new List<string>(); 
```

您还可以查看[Jon Skeet 的 Thread Safe Singleton implementation](http://csharpindepth.com/articles/general/singleton.aspx)

**编辑：**

基于更新的问题。你的 Check 和 Message 是相反的。它应该是：

```
if (Singleton.Instance.HasMessage("12"))
    Console.WriteLine("There is a match");
else
    Console.WriteLine("NO STRING!!!"); 
```

`HasMessage`如果传递的参数存在于列表中，则您的方法返回 true，否则返回 false。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T05:04:53.777

看起来你快到了。考虑像这样重写你的代码：

```
class Singleton
{
    //Variable
    private static Singleton Instance;
    private List<string> Messages;
    //Constructor
    private Singleton() 
    {
     Messages = new List<string>(); //Make sure to instantiate instance types before use. 
    }
    //Property
    public static Singleton GetInstance()
    {
            if (Instance == null)
            {
                Instance = new Singleton();
            }
            return Instance;

    }
    //Methods
    public void Message(string message)
    {
        Messages.Add(message);
    }

    public bool HasMessage(string message)
    {
        return Messages.Contains(message);
    }
} 
```

[此站点](http://www.dofactory.com/Patterns/PatternSingleton.aspx)上有一些有用的 C# 设计模式教程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T05:51:07.367

> 但是，当我使用 HasMessage 方法时不起作用。因为程序一直显示“有匹配”。但它应该告诉我“没有字符串！！！” 因为没有匹配。**那么如何解决呢？**

这应该是一个单独的问题，但无论如何我都会回答。你的情况倒退了。*如果实例确实*包含消息“12”，则您的代码将写入“无字符串”，如果*不*包含消息，则写入“有匹配项” 。尝试这个：

```
 if(Singleton.Instance.HasMessage("12"))
        Console.WriteLine("There is a match");
    else
        Console.WriteLine("NO STRING!!!"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T04:40:36.410

```
private List<String> Messages; 
```

这是你的问题。该成员从未在您的代码中实例化。您可以执行以下操作：

```
 //Constructor
    private Singleton()
    {
        Messages = new List<string>();
    } 
```

此外，我建议您为局部变量和成员使用正确的命名约定。更改`instance`为`m_Instance`和。`Messages`_ `m_Messages`还尝试以线程安全的方式实现单例...有关更多信息，请查看[此页面](http://csharpindepth.com/articles/general/singleton.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-15T13:34:38.107

这就是 Singleton 的实现：

```
public sealed class SingletonExample
{
    //static Field
    private static SingletonExample _seInstance = null;
    private int _nCounter = 0;

    // private constructor
    private SingletonExample() { _nCounter = 1; }

    //public static get(), with creating only one instance EVER
    public static SingletonExample SeInstance
    { 
        get { return _seInstance ?? (_seInstance = new SingletonExample()); }
    }      
} 
```

如何调用和创建实例？

```
SingletonExample si1 = SingletonExample.SeInstance;
SingletonExample si2 = SingletonExample.SeInstance; // it will be the same object

System.Diagnostics.Debug.WriteLine(si1.Equals(si2));// TRUE 
```

# c++ - 在 Doom3 的源代码中，为什么他们使用 bitshift 来生成数字而不是硬编码呢？

> ID：14331236
> 
> 赞同：10
> 
> 时间：2013-01-15T04:34:39.590
> 
> 标签：c++

他们为什么这么做：

```
Sys_SetPhysicalWorkMemory( 192 << 20, 1024 << 20 );   //Min = 201,326,592  Max = 1,073,741,824 
```

而不是这个：

```
Sys_SetPhysicalWorkMemory( 201326592, 1073741824 ); 
```

[我从中获得代码的文章](http://fabiensanglard.net/doom3/index.php)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-15T04:37:52.230

一个简洁的属性是移动一个值`<< 10`与将其乘以 1024 (1 KiB) 相同，并且`<< 20`是 1024*1024 (1 MiB)。

以 10 的连续幂移位产生我们所有标准的计算机存储单位：

*   `1 << 10` = 1 KiB ([千字节](http://en.wikipedia.org/wiki/Kibibyte))
*   `1 << 20` = 1 MiB ([兆字节](http://en.wikipedia.org/wiki/Mebibyte))
*   `1 << 30` = 1 GiB（[千兆字节](http://en.wikipedia.org/wiki/Gibibyte)）
*   ...

因此，该函数将其参数表示为 192 MB（最小）和 1024 MB（最大）。[`Sys_SetPhysicalWorkMemory`](https://dev.visucore.com/doom3/doxygen/win__shared_8cpp.html#ae613747e8f556c99908d6a03727f6020)`(int minBytes, int maxBytes)`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-15T04:40:34.843

自我评论代码：

192 << 20 表示 192 * 2^20 = 192 * 2^10 * 2^10 = 192 * 1024 * 1024 = 192 MByte

1024 << 20 表示 1024 * 2^20 = 1 GByte

对常量的计算被优化掉了，所以什么都没有丢失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T04:37:48.220

我可能错了（而且我没有研究源代码），但我想这只是出于可读性的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T10:09:37.090

我认为重点（尚未提及）是

> 除了最基本的编译器之外，所有编译器都会在编译时进行转换。每当您将运算符与常量表达式一起使用时，编译器甚至可以在生成代码之前执行此操作。请注意，在 constexpr 和 C++11 之前，这并没有扩展到函数。

# android - Android 上的 Trigger.io ui 增强不适用于 datetime-local

> ID：14331238
> 
> 赞同：3
> 
> 时间：2013-01-15T04:34:44.600
> 
> 标签：android, trigger.io

我有一个 HTML5 混合应用程序，我想将它包装在 trigger.io 中以进行部署。在 iOS 上，我已经能够使用

```
<input type="datetime-local" ... /> 
```

获取我想要的日期和时间的实际字符串，并为我的用户提供本地日期时间选择器。但是，在 Android 中这样做只会将该字段呈现为一个文本框，其中包含 ISO 格式的时间。如果我使用

```
<input type="datetime" ... /> 
```

我得到了本地日期选择器，然后是时间选择器（我可以忍受），但是当按下“确定”时，文本框的值就是格林威治标准时间的时间。我不想看到 GMT，我想要（基本上）输入的日期和时间字符串。

我查看了 trigger.io 的*all.js*文件，其中有如下一行：

```
var q=function(t){if(t.getAttribute("data-forge-fixed")!="yes"&&(t.type=="date"||t.type=="datetime"||t.type=="time")){ 
```

请注意，它缺少“本地日期时间”，如下所示：

```
var q=function(t){if(t.getAttribute("data-forge-fixed")!="yes"&&(t.type=="date"||t.type=="datetime-local"||t.type=="datetime"||t.type=="time")){ 
```

如果我编辑文件并保存此更改，然后重新编译我的应用程序，所有对*all.js*的更改都会被覆盖回最近下载的 trigger.io 版本。

有没有人有办法解决这个问题，或者这是一个我必须等待他们修复才能做更多的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:54:55.440

这是我们代码中的一个错误，对此感到抱歉。我们将确保在本周末之前部署修复程序。

我一般不会推荐这个，但是如果你现在想解决这个问题，你可以`.template/android/assets/forge/all.js`在你的 app 文件夹中编辑 all.js，这只会在运行完整的服务器端构建时被替换。

# java - JavaDoc 的备用输出目录

> ID：14331239
> 
> 赞同：3
> 
> 时间：2013-01-15T04:34:53.427
> 
> 标签：java, maven, javadoc, maven-javadoc-plugin

我正在尝试在我的多模块 Maven 项目中为 JavaDocs 配置备用输出位置。我将父 POM 中的 maven-javadoc 配置为如下所示：

```
<build>
...
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.9</version>
    <configuration>
        <noqualifier>all</noqualifier>
        <reportOutputDirectory>
            ${project.reporting.outputDirectory}/api
        </reportOutputDirectory>
        <destDir>api</destDir>
    </configuration>
</plugin>
...
</build> 
```

然后这里是我设置 project.reporting.outputDirectory 的地方。

```
<properties>
    <project.reporting.outputDirectory>
        ./module-webapp/src/main/webapp/docs
    </project.reporting.outputDirectory>
</properties> 
```

但是，Maven 似乎并不关心上述配置，尽管如此，它仍在默认目录中输出 JavaDoc。为什么是这样？

此外，我为我的 project.reporting.outputDirectory 变量使用了相对路径。当我`mvn javadoc:javadoc`在子模块中运行时，这个相对路径的含义是否与我在父模块中运行时的含义相同？

在此先感谢...非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T05:54:09.680

您需要更改变量的名称。 `project.reporting.outputDirectory`是一个内置变量，maven 会覆盖你的设置。

请注意，您可能仍然需要设置相对于 的目录`project.reporting.outputDirectory`，或者类似的东西`${basedir}`才能真正让它工作。

另请记住，根据我对文档的阅读，您的最终目录将是`./module-webapp/src/main/webapp/docs/api/api`，这可能不是您想要的

就相对目录和子模块而言，每个构建往往是自包含的，因此它将相对于每个子构建存放 javadocs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:52:56.127

发现出了什么问题。出于某种原因，当我删除 ${project.reporting.outputDirectory} 并直接输入路径时，它可以工作。由于某些其他原因，当我使用任何其他变量名（上述变量名除外）时，它会起作用。

# security - 在 Facebook 和安全上发布操作

> ID：14331240
> 
> 赞同：0
> 
> 时间：2013-01-15T04:35:06.523
> 
> 标签：security, facebook-opengraph

我正在创建一个应用程序，它允许人们在我们的网站上发布内容并同时出现在他们的 Facebook 时间线中。根据我对 OpenGraph API 的理解，我需要创建一个公开可用的页面，其中包含 Facebook 可以访问的元数据，以便发布操作起作用。例如：

```
<head>
<meta property="fb:app_id" content="" />
<meta property="og:type" content="" />
<meta property="og:title" content="" />
<meta property="og:image" content="" />
<meta property="og:url" content="" />
<meta property="og:description" content="" />
</head> 
```

我担心的是，如果 Facebook 可以使用此页面，那么未登录我们网站的人也将能够看到此内容。这是一个常见的安全问题吗？建议使用哪些最佳做法来保护用户的内容免受未经授权的用户的攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:39:18.247

这取决于你想分享什么。

如果您只想分享已上传到用户相册的文本或照片，您可以使用 Graph API创建[帖子](https://developers.facebook.com/docs/reference/api/user/#posts)或[照片。](https://developers.facebook.com/docs/reference/api/photo/)

否则，您需要使用服务器上的规则限制共享页面的可见性。共享页面需要对 Facebook 抓取工具可见（有关[详细信息，请参阅此 SO 帖子](https://stackoverflow.com/questions/8859013/whats-the-ip-address-range-of-facebooks-open-graph-crawler)），但需要对其他用户和搜索引擎进行身份验证。

# php - PHP密码更改脚本

> ID：14331241
> 
> 赞同：-1
> 
> 时间：2013-01-15T04:35:08.300
> 
> 标签：php, mysql

我正在尝试制作一个脚本来更改 MySQL 表中的加密密码。我认为代码是正确的，但脚本没有更改密码。它确实会检测旧密码何时错误以及新密码何时与确认密码不匹配。当一切都检查出来时，它不会给出错误，只是重定向。

```
 try
{
    $db = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options);
}
catch(PDOException $ex)
{
    die("Failed to connect to the database: " . $ex->getMessage());
}

$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);

if(function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc())
{
    function undo_magic_quotes_gpc(&$array)
    {
        foreach($array as &$value)
        {
            if(is_array($value))
            {
                undo_magic_quotes_gpc($value);
            }
            else
            {
                $value = stripslashes($value);
            }
        }
    }

    undo_magic_quotes_gpc($_POST);
    undo_magic_quotes_gpc($_GET);
    undo_magic_quotes_gpc($_COOKIE);
}

header('Content-Type: text/html; charset=utf-8');

session_start();
if(!empty($_SESSION['user']))
unset ($_SESSION['user']);
if(!empty($_POST))
{
    $query = "
        SELECT
            username,
            password,
            salt
        FROM users
        WHERE
            username = :username
    ";

    $query_params = array(
        ':username' => $_POST['username']);

    try
    {
        $stmt = $db->prepare($query);
        $result = $stmt->execute($query_params);
    }
    catch(PDOException $ex)
    {
        die("Failed to run query: " . $ex->getMessage());
    }

    $pass = false;

    $row = $stmt->fetch();

    if($row)
    {
        $check_password = hash('sha256', $_POST['old'] . $row['salt']);
        for($round = 0; $round < 65536; $round++)
        {
            $check_password = hash('sha256', $check_password . $row['salt']);
        }

        if($check_password !== $row['password'])
        {
            die("Incorrect old password!");
        }
        if($_POST['new'] !== $_POST['confirm'])
        {
            die("Password does not match!");
        }
        $pass = true;
    }

    if($pass)
    {       
        $salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647));
        $password = hash('sha256', $_POST['new'] . $salt);
        for($round = 0; $round < 65536; $round++)
        {
            $password = hash('sha256', $password . $salt);
        }

        $query1 = " UPDATE users SET password = ':password', salt = ':salt' WHERE username = ':username' ";

        $query_params1 = array(
            ':username' => $_POST['username'],
            ':password' => $password,
            ':salt' => $salt
        );

        try
        {
            $stmt1 = $db->prepare($query1);
            $result1 = $stmt1->execute($query_params1);
        }
        catch(PDOException $e)
        {
            die("Failed to run query: " . $e->getMessage());
        }
            header("Location: index.php");
            die;
    }
    else
    {
        print("Password change failed.");
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:38:05.283

您不引用绑定变量：

```
$query1 = 'UPDATE users SET password = :password, salt = :salt WHERE username = :username"; 
```

# c++ - 编译器将派生类视为实际定义的抽象引用函数

> ID：14331244
> 
> 赞同：0
> 
> 时间：2013-01-15T04:35:59.877
> 
> 标签：c++, abstract-class, instantiation

我正在为 Acellerated c++ 第 15 章编译代码。我或多或少直接从书中复制了代码，除了在某些地方他们在头文件的类主体中定义了诸如构造函数之类的东西，我把它们分开了以避免链接错误。

下面是代码；我试图在 Visual Studio 2010 中编译它，但不幸的是它失败了。它告诉我它不能创建“String_Pic”和其他派生类（Frame_Pic、HCat_Pic 和 VCat_Pic）的实例，因为它说它们仍然是抽象类。它说罪魁祸首是“显示”功能，它说它是未定义的。但是，我清楚地为每个派生类定义了它，如下所示。

这里发生了什么？

标题：

```
#ifndef _GUARD_PIC_BASE_H
#define _GUARD_PIC_BASE_H

    #include "Ptr.h"
    #include <iostream>
    #include <string>
    #include <vector>

    class Picture;

    class Pic_base {
        friend std::ostream& operator<<(std::ostream&, const Picture&);
        friend class Frame_Pic;
        friend class HCat_Pic;
        friend class VCat_Pic;
        friend class String_Pic;

        typedef std::vector<std::string>::size_type ht_sz;
        typedef std::string::size_type wd_sz;

        virtual wd_sz width() const = 0;
        virtual ht_sz height() const = 0;
        virtual void display(std::ostream, ht_sz, bool) const = 0;

    public:
        virtual ~Pic_base(){ }

    protected:
        static void pad(std::ostream&, wd_sz, wd_sz);
    };

    // public interface class and operations
    class Picture {
        friend std::ostream& operator<<(std::ostream&, const Picture&);
        friend Picture frame(const Picture&);
        friend Picture hcat(const Picture&, const Picture&);
        friend Picture vcat(const Picture&, const Picture&);

    public:
        Picture(const std::vector<std::string>& =
            std::vector<std::string>());
    private:
        Picture(Pic_base* ptr);  //here's one difference
        Ptr<Pic_base> p;
    };

    Picture frame(const Picture&);
    Picture hcat(const Picture&, const Picture&);
    Picture vcat(const Picture&, const Picture&);
    std::ostream& operator<<(std::ostream&, const Picture&);

    class String_Pic: public Pic_base {
        friend class Picture;
        std::vector<std::string> data;
        String_Pic(const std::vector<std::string>&);

        wd_sz width() const;
        ht_sz height() const;
        void display(std::ostream&, ht_sz, bool) const;
    };

    class VCat_Pic: public Pic_base {
        friend Picture vcat(const Picture&, const Picture&);
        Ptr<Pic_base> top, bottom;
        VCat_Pic(const Ptr<Pic_base>&, const Ptr<Pic_base>&);

        wd_sz width() const;
        ht_sz height() const;
        void display(std::ostream&, ht_sz, bool) const;
    };

    class HCat_Pic: public Pic_base {
        friend Picture hcat(const Picture&, const Picture&);
        Ptr<Pic_base> left, right;
        HCat_Pic(const Ptr<Pic_base>&, const Ptr<Pic_base>&);

        wd_sz width() const;
        ht_sz height() const;
        void display(std::ostream&, ht_sz, bool) const;
    };

    class Frame_Pic: public Pic_base {
        friend Picture frame(const Picture&);
        Ptr<Pic_base> p;
        Frame_Pic(const Ptr<Pic_base>& pic);

        wd_sz width() const;
        ht_sz height() const;
        void display(std::ostream&, ht_sz, bool) const;
    };

#endif 
```

.cpp/实现文件：

```
#include "Ptr.h"
#include "Pic_Base.h"
#include <vector>
#include <string>
#include <algorithm>
#include <iostream>

using namespace std;

//Picture-Specific Functions:

Picture::Picture(Pic_base* ptr):p(ptr) {}

Picture::Picture(const vector<string>& v): p(new String_Pic(v)) { }

//Frame-Specific Functions:

Frame_Pic::Frame_Pic(const Ptr<Pic_base>& pic): p(pic) {}

Pic_base::wd_sz Frame_Pic::width() const { return p->width() + 4; }

Pic_base::ht_sz Frame_Pic::height() const { return p->height() + 4; }

void Frame_Pic::display(ostream& os, ht_sz row, bool do_pad) const{
    if (row >= height()) {
        // out of range
        if (do_pad)
            pad(os, 0, width());
    } else {
        if (row == 0 || row == height() - 1) {

            // top or bottom row
            os << string(width(), '*');
        } else if (row == 1 || row == height() - 2) {

            // second from fop or bottom row
            os << "*";
            pad(os, 1, width() - 1);
            os << "*";
        } else {
            // interior row
            os << "* ";
            p->display(os, row - 2, true);
            os << " *";
        }
    }
}

Picture frame(const Picture& pic){
    return new Frame_Pic(pic.p);
}

//HCat-Specific Functions:

HCat_Pic::HCat_Pic(const Ptr<Pic_base>& l, const Ptr<Pic_base>& r): left(l), right(r) { }

HCat_Pic::HCat_Pic(const Ptr<Pic_base>& l, const Ptr<Pic_base>&r):
left(l), right(r) { }

Pic_base::wd_sz width() const { return left->width() + right->width(); }

Pic_base::ht_sz height() const { return max(left->height(), right->heigth()); }

void HCat_Pic::display(ostream& os, ht_sz row, bool do_pad) const{
    left->display(os, row, do_pad || row < right->height());
    right->display(os, row, do_pad);
}

Picture hcat(const Picture& l, const Picture& r){
    return new HCat_Pic(l.p, r.p);
}

//VCat-Specific Functions:

VCat_Pic::VCat_Pic(const Ptr<Pic_base>& t, const Ptr<Pic_base>& b): top(t), bottom(b) { }

Picture vcat(const Picture& t, const Picture& b){
    return new VCat_Pic(t.p, b.p);
}

Pic_base::wd_sz VCat_Pic::width() const {
    return max(top->width(), bottom->width());
}

Pic_base::ht_sz VCat_Pic::height() const{
    return top->height() + bottom->height();
}

void VCat_Pic::display(ostream& os, ht_sz row, bool do_pad) const{
    wd_sz w = 0;
    if (row < top->height()) {
        // we are in the top subpicture
        top->display(os, row, do_pad);
        w = top->width();
    } else if (row < height()) {
        // we are in the bottom subpicture
        bottom->display(os, row - top->height(), do_pad);
        w = bottom->width();
    }
    if (do_pad)
        pad(os, w, width());
}

//String_Pic-Specific Functions:

String_Pic::String_Pic(const std::vector<std::string>& v): data(v) { }

Pic_base::ht_sz String_Pic::height() const { return data.size(); }

Pic_base::wd_sz String_Pic::width() const{
    Pic_base::wd_sz n = 0;
    for (Pic_base::ht_sz i = 0;  i != data.size(); ++i)
        n = max(n, data[i].size());
    return n;
}

void String_Pic::display(ostream& os, ht_sz row, bool do_pad) const{
    wd_sz start = 0;

    // write the row if we're still in range
    if (row < height()) {
        os << data[row];
        start = data[row].size();
    }

    // pad the output if necessary
    if (do_pad)
        pad(os, start, width());
}

//Pic_base-Specific functions:
void Pic_base::pad(std::ostream& os, wd_sz beg, wd_sz end) {
    while (beg != end) {
        os << " ";
        ++beg;
    }
}

//Non-Specific Functions:

ostream& operator<<(ostream& os, const Picture& picture){
    const Pic_base::ht_sz ht = picture.p->height();
    for (Pic_base::ht_sz i = 0; i != ht; ++i) {
        picture.p->display(os, i, false);
        os << endl;
    }
    return os;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T04:39:21.903

您将纯虚函数声明为`ofstream` **按值获取对象**，而您的所有子类都将其定义为对一个对象**的引用**。

```
virtual void display(std::ostream, ht_sz, bool) const = 0; 
```

对比

```
void display(std::ostream&, ht_sz, bool) const;
                         ^ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T04:39:34.190

`Pi_base``display`用这个签名声明：

```
virtual void display(std::ostream, ht_sz, bool) const = 0; 
```

但是您的派生类使用以下签名声明它：

```
void display(std::ostream&, ht_sz, bool) const; 
```

仔细比较它们，您会发现您的基类需要一段`std::ostream`时间，而派生类需要`std::ostream&`.

# google-app-engine - 应用引擎提供的 blob url 保持有效多长时间？

> ID：14331245
> 
> 赞同：5
> 
> 时间：2013-01-15T04:36:00.703
> 
> 标签：google-app-engine, blobstore

我想知道是否有人知道从谷歌应用引擎 blob 商店返回的图片 URL 的有效期是多久？

我一直在跟踪我在 2013 年 1 月 3 日从 blob 商店提供[的图像的 url，它仍然存在。](http://lh3.ggpht.com/n2vefqV64BCW_V2g0EBFdD8heJmDE3Iu0FXXY2lK0rNSEVrIybE4iQho5KVSjUlSi9IpoKKEo11jW5pk26DGA7uJ)

我是专门问的，所以我可以缓存图像 url，而不是尝试重复提供它。如果我这样做了，我仍然会检查图像是否存在，但我需要多久检查一次

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T06:01:15.457

它们一直有效，直到您

一种。调用[delete_serving_url](https://developers.google.com/appengine/docs/python/images/functions)，或
b。[删除](https://developers.google.com/appengine/docs/python/blobstore/functions)底层 blob。

# python - 自动更新 Python 脚本的 Web 前端

> ID：14331252
> 
> 赞同：2
> 
> 时间：2013-01-15T04:36:41.240
> 
> 标签：python, ajax, web.py

我有一个非常简单的 Python 脚本，用于轮询串行设备（一个 Xbee 模块）。它本质上只是一个无休止的while循环。通过此循环的每次迭代我都希望更新一个网页。我已经看到很多示例显示 UI 交互，其中用户单击按钮将 ajax 帖子发送到服务器并返回，但我希望 python 后端循环在没有用户交互的情况下对客户端进行更新。我查看了 web.py 和 ajax，这似乎是要走的路，我似乎无法让它继续下去，希望得到一些帮助。这是我的python脚本的要点：

```
ser = serial.Serial('COM3', baudrate=9600)
while 1:
    data = ser.readline()
    if len(data) == 14:
        num = struct.unpack('BBBBBBBBBBBBBB', data)[9]
        if num == 1:
            // update the web client with 1
        elif num == 2:
            // update the web client with 2
        else:
            // update the web client with 0
    app.processEvents()
```

该设置在 ubuntu 12.04 上运行，带有 apache2 和 python 2.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:33:01.080

主要限制是：您无法从服务器上的脚本中更新客户端上显示的网站。您必须通过 Javascript 从您的网站内请求数据，然后让您的服务器返回更新后的数据。

在您的网站中，您可以使用

```
setInterval(function() {
    //do something
    }, 2000) 
```

或者

```
setTimeout(function() {
    //do something
    }, 2000) 
```

每两秒做一件事。然后，最简单的方法是重新加载网站

```
window.location.reload() 
```

您也可以使用 small`<iframe>`仅更新一小部分。

一个更复杂的选择是使用 AJAX，我建议坚持使用像 jQuery 这样的成熟库来这样做：[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)。jQuery 还使更改网站内容变得非常容易，只需查看文档即可。

# iphone - 在 UICollectionView endUpdates 中崩溃

> ID：14331254
> 
> 赞同：0
> 
> 时间：2013-01-15T04:36:47.293
> 
> 标签：iphone, ios, objective-c, ipad, uicollectionview

我有一个数据管理器（单例类），它从我的后端服务加载 JSON，然后在其中执行一些缓存，将其写入磁盘等

所以我把这个方法放在一个里面：

```
dispatch_sync(dispatch_queue_create("com.testing.serialQueue", DISPATCH_QUEUE_SERIAL), ^{
      //my method that does disk caching here
}); 
```

当一切都完成后，在这个方法中，我有一个 UINotification 使用以下内容：

```
 dispatch_async(dispatch_get_main_queue(),^{
                            [[NSNotificationCenter defaultCenter] postNotificationName:kNewStoriesNotification object:nil userInfo:userInfo];
                        }); 
```

在通知中我执行以下操作：

```
[self.collectionView performBatchUpdates:^{
        if ([highlightItems count] > 0){
            //doing some computation to find the index path
            [weakSelf.collectionView insertItemsAtIndexPaths:indexPathArray];
        }

    } completion:^(BOOL finished) {

    }]; 
```

它有时会给我这个错误：

```
 *** Assertion failure in -[UICollectionView _endItemAnimations], /SourceCache/UIKit_Sim/UIKit-2372/UICollectionView.m:2662 
```

我不知道为什么..但我猜这与我使用 GCD 和通知有关。有任何想法吗？

更新：

```
Even if I remove the insertItemsAtIndexPaths: it still crashes at performBatchUpdates.. wonder why 
```

# html - CSS3 图像高度自动

> ID：14331258
> 
> 赞同：0
> 
> 时间：2013-01-15T04:37:09.750
> 
> 标签：html

在 IE9 上测试一个 jQuery Mobile 网站的过程中，我发现了一些类似的东西

```
<img src=... width='100%' height='auto'/> 
```

不适用于 IE9 - 图像显示为一条没有高度的长水平线。似乎 IE 不理解 auto 属性或似乎将其解释为含义**0**。完全不考虑 height 属性就可以解决问题 - 图像按需要显示，这似乎也适用于所有其他浏览器。

问题解决了？好吧，不完全是因为这让我感到有点困惑。我一直认为指定图像的高度和宽度有助于浏览器渲染页面，因为它知道在获取图像之前需要为图像指定多少空间。所以“省略高度=自动”技巧意味着页面渲染会变慢，因为浏览器会推迟获取其他页面资源，直到它获得图像数据并建立页面布局尚未到来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:42:15.893

“浏览器会推迟获取其他页面资源，直到它获得图像数据并建立尚未到来的页面布局？” 是错的。自网景以来，情况并非如此。事实上，这是 netscape 的关键创新之一，页面将继续呈现，直到获取图像、确定大小并且页面被简单地“重排”。

如评论中所述。如果您不知道，请删除高度。将其设置为自动对浏览器没有任何帮助。

# gwt - GWT 可调整大小的组合

> ID：14331259
> 
> 赞同：0
> 
> 时间：2013-01-15T04:37:14.513
> 
> 标签：gwt, resize, composite

我正在尝试一个简单的实验，`ResizableComposite`通过记录小部件的宽度和高度，但我没有得到任何响应。

**可调整大小的流面板**

```
public class ResizableFlowPanel extends FlowPanel implements RequiresResize, ProvidesResize {

    public ResizableFlowPanel() {
    super();
    }

    @Override
    public void onResize() {
    GWT.log(this.getOffsetHeight() +","+this.getOffsetWidth());
    }

} 
```

**AppBody.java**

```
public class AppBody extends ResizeComposite implements RequiresResize,
    ProvidesResize {
    private static AppBodyUiBinder uiBinder = GWT.create(AppBodyUiBinder.class);

    public AppBody() {
    initWidget(uiBinder.createAndBindUi(this));
    }

    @Override
    public void onResize() {
    GWT.log(this.getOffsetHeight() + "," + this.getOffsetWidth());
    super.onResize();
    }

    interface AppBodyUiBinder extends UiBinder<Widget, AppBody> {
    }

} 
```

**AppBody.ui.xml**

```
<ui:UiBinder ...>
    <e:ResizableFlowPanel styleName="{bundle.appBodyStyle.app_body}">

    </e:ResizableFlowPanel>
</ui:UiBinder> 
```

当我调整浏览器大小时，我没有收到任何日志消息。

# java - 如何在给定 Oracle SQL 字符串的情况下提取选定的列？

> ID：14331263
> 
> 赞同：0
> 
> 时间：2013-01-15T04:37:39.620
> 
> 标签：java, sql, regex, evaluation

好的，这似乎太难在这里发布，所以我请你原谅。已经为此工作了将近一周。

我需要提取给定 Oracle SQL 字符串中的所有选定列。它应该通过以下测试用例：

```
// single column test
select col1 from dual
    // ^ should match "col1"

// multiple column test
select col1,col2 from dual
    // ^ should match "col1", "col2"

// multiple space test
select   col1   ,  col2   from   dual
    // ^ should match "col1", "col2"

// "distinct" tests
select distinct col1 from dual
    // ^ should match "col1"
select distinct col1, col2 from dual
    // ^ should match "col1", "col2"

// "distinct" with whitespaces tests
select   distinct   col1   from   dual
    // ^ should match "col1"
select   distinct   col1  ,  col2  from   dual
    // ^ should match "col1", "col2"

// "as" tests
select col1 from dual
    // ^ should match "col1"
select colA as col1 from dual
    // ^ should match "col1"
select colA as col1, col2, col3 from dual
    // ^ should match "col1", "col2", "col3"
select col1, colB as col2, col3 from dual
    // ^ should match "col1", "col2", "col3"
select col1, col2, colC as col3 from dual
    // ^ should match "col1", "col2", "col3"

// "as" tests with whitespaces tests
select    colA    as    col1,    colB    as    col2,    colC    as    col3    from    dual
    // ^ should match "col1", "col2", "col3"

// "distinct" with "as" tests
select distinct colA as col1 from dual
    // ^ should match "col1"
select distinct colA as col1, colB as col2, col3 from dual
    // ^ should match "col1", "col2", "col3"
select distinct colA as col1, col2, colC as col3 from dual
    // ^ should match "col1", "col2", "col3"

// function test
select funct('1','2') as col1 from dual
    // ^ should match "col1"
select col1, funct('1','2') as col2 from dual
    // ^ should match "col1", "col2"
select col1, colB as col2, funct('1','2') as col3 from dual
    // ^ should match "col1", "col2", "col3" 
```

我在 Java 中尝试了以下 RegEx

```
 ((?<=select\ )(?!distinct\ ).*?(?=,|from))
 ((?<=select\ distinct\ ).*?(?=,|from))
 ((?<=as\ ).*?(?=,|from))
 ((?<=,\ ).*?(?=,|from))(?!.*\ as\ ) // <- Right, I'm guessing here 
```

或将它们组合在一起，但我不能简单地通过上面的所有测试用例。（我正在使用这个[工具](http://www.regexplanet.com/advanced/java/index.html)来验证我的正则表达式）。

我尝试搜索 SQL 求值器，但找不到任何可以提取所有列而不对真实数据库执行它并且假定所有引用的表和函数都存在的方法。

一个 Java 正则表达式，一个可以通过测试的免费 SQL 评估器（不需要真正的数据库），或者任何更好的东西，这两个是可以接受的答案。假设 SQL 始终采用 Oracle 11g 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:26:52.097

鉴于 Oracle SELECT 列表可能会变得非常复杂（必须考虑您提到的所有情况，加上子查询、tablename.columnname 结构、引用的别名等），您可能想要超越正则表达式并实际解析 SQL 查询从解析的输出中拉出标记。

为此，您有几个不同的选择，但都不是那么容易，但也许能够解决您的问题

*   如果你愿意使用 Perl，你可以让[SQL::Parser](http://search.cpan.org/~rehsack/SQL-Statement-1.402/lib/SQL/Parser.pm)做你想做的事。
*   [如果您想要一个基于 java 的解决方案，您可以获得gsqlparser](http://www.sqlparser.com/download.php)的 90 次免费试用下载，如果这是一个一次性项目，这将很有帮助。
*   有这个 - [SQL92 parser](http://software.topcoder.com/catalog/c_component.jsp?comp=10023914)，它是免费下载的，但许可证未知，我不完全确定它是否可以处理任何特定于 Oracle 的怪事。
*   你可以使用 Antlr 生成一个基于[这个人的工作的](http://codemate.wordpress.com/2009/02/06/writing-a-sql-parser/)带有 java 接口的 SQL 解析器，它基于 CREATE TABLE 语法，但可以很容易地适应处理 SELECT 语法（或者你可以`antlr sql grammar`很容易地搜索并找到一个预制的）

# android - 摇一摇锁屏

> ID：14331269
> 
> 赞同：1
> 
> 时间：2013-01-15T04:38:03.493
> 
> 标签：android

我想在手机震动时锁定屏幕我已经创建了震动监听器并且它检测到手机的震动代码是..

```
 Receiver myReceiver;
 Context context1;

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Vibrator vibe = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);

    mShaker = new ShakeListener(this);
    mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
      public void onShake()
      {

        vibe.vibrate(100);
        new AlertDialog.Builder(MainActivity.this)
          .setPositiveButton(android.R.string.ok, null)
          .setMessage("Shooken!")
          .show();

       PowerManager manager = (PowerManager) getSystemService(Context.POWER_SERVICE);

        // Choice 1
 //         manager.goToSleep(amountOfTime);

// Choice 2
    PowerManager.WakeLock wl = manager.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "Your Tag");
        wl.acquire();
        wl.release();

                }

    });
  }

  @Override
  public void onResume()
  {
    mShaker.resume();
    super.onResume();
  }
  @Override
  public void onPause()
  {
    mShaker.pause();
    super.onPause();
  }
} 
```

警报对话框在那里，但它没有锁定手机我该怎么做

# django-forms - 找不到错误：找不到页面（404）

> ID：14331271
> 
> 赞同：0
> 
> 时间：2013-01-15T04:38:08.240
> 
> 标签：django-forms, django-templates, django-views

显示以下错误：

```
 Page not found (404)
  Request Method:   POST
  Request URL:  http://127.0.0.1:8000/events/toggle-attendance/%3E%3Cinput%20type=
  Using the URLconf defined in std.urls, Django tried these URL patterns, in this order:
  ^events/ ^tonight/$ [name='ev_tonight']
  ^events/ ^create/$ [name='ev_create']
  ^events/ ^toggle-attendance/$ [name='ev_toggle_attendance']
  ^admin/
  The current URL, events/toggle-attendance/><input type=, didn't match any of these. 
```

模板：

```
 <form method="POST" class="toggle_attendance_form" action="{% url ev_toggle_attendance %}>  
<input type="hidden" name="event_id" value="{{ event.id }}" />
        {% if attending %}
            <input class="attendance unattend" type="submit" value="Unattend" />
        {% else %}
            <input class="attendance attend" type="submit" value="Attend" />
        {% endif %}
    </form> 
```

看法：

def toggle_attendance(request): try: # 假设 post 参数中的值 event_id = int(request.POST['event_id'])

```
# couple of possible errors: no event_id in POST parameter or value can not casted as int
except (KeyError, ValueError):
    # raising http404: means it couldnt be found
    raise Http404
# getting the event where id= event_id
event = get_object_or_404(Event, id=event_id)
# 
attendance, created = Attendance.objects.get_or_create(user=request.user,
    event=event)
if created:
    pass
    # messages.add_message(request, messages.INFO, 'You are now attending %s.' % event)
else:
    attendance.delete()
    # messages.add_message(request, messages.INFO, 'You are no longer attending %s.' % event)

# Check to see whether the next variable in the POST parameters
next = request.POST.get('next', '')
if not next:
    next = reverse('ev_tonight')
return HttpResponseRedirect(next)
  toggle_attendance = login_required(toggle_attendance) 
```

网址：

urlpatterns = 模式（''，

```
url(r'^tonight/$', views.tonight, name='ev_tonight'),
url(r'^create/$', views.create, name='ev_create'),
url(r'^toggle-attendance/$', views.toggle_attendance, name='ev_toggle_attendance'), 
```

)

你能帮我找出错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:58:27.227

找到了！你错过了一个接近的报价

```
<form method="POST" 
 class="toggle_attendance_form" action="{% url ev_toggle_attendance %}> 
```

应该是哪个

```
<form method="POST" 
class="toggle_attendance_form" action="{% url ev_toggle_attendance %}"> 
```

希望解决！

# wpf - MVVMLight 的“Thumb.DragStarted”事件问题

> ID：14331272
> 
> 赞同：4
> 
> 时间：2013-01-15T04:38:18.387
> 
> 标签：wpf, xaml, slider, mvvm-light

我正在尝试`Slider` `Thumb.DragStarted`使用 MVVMLight 触发事件，`EventToCommand`但它不起作用。同样的事情也适用于 Slider Event `ValueChanged`。

下面是我的代码：

```
<Slider
    Width="150"
    AutoToolTipPlacement="BottomRight"
    AutoToolTipPrecision="2"
    IsSnapToTickEnabled="True"
    Maximum="{Binding SilderMaxValue}"
    Minimum="0"
    Value="{Binding SliderValue}">                                        
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="ValueChanged">
                <cmd:EventToCommand
                    Command="{Binding SliderValueChangedCommand}"
                    PassEventArgsToCommand="True" />
             </i:EventTrigger>
        <i:EventTrigger EventName="Thumb.DragStarted">
                <cmd:EventToCommand
                    Command="{Binding SliderDragStartedCommand}"
                    PassEventArgsToCommand="True" />
        </i:EventTrigger>                                  
</Slider> 
```

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:54:34.930

我在尝试做类似的事情时看到了你的帖子（尽管是用 Thumb.DragCompleted）。无论如何，我使用了附加属性。我会发布我的解决方案，以防它对任何人有用。

* * *

**SliderDragBehavoirs.cs：**

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Input;
using System.Windows.Media;

namespace WpfApplication1
{
    public static class SliderDragBehaviors
    {
        public static readonly DependencyProperty DragCompletedCommandProperty =
            DependencyProperty.RegisterAttached("DragCompletedCommand", typeof(ICommand), typeof(SliderDragBehaviors),
            new FrameworkPropertyMetadata(new PropertyChangedCallback(DragCompleted)));

        private static void DragCompleted(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var slider = (Slider)d;
            var thumb = GetThumbFromSlider(slider);

            thumb.DragCompleted += thumb_DragCompleted;
        }

        private static void thumb_DragCompleted(object sender, DragCompletedEventArgs e)
        {
            FrameworkElement element = (FrameworkElement)sender;
            element.Dispatcher.Invoke(() =>
                {
                    var command = GetDragCompletedCommand(element);
                    var slider = FindParentControl<Slider>(element) as Slider;
                    command.Execute(slider.Value);
                });
        }

        public static void SetDragCompletedCommand(UIElement element, ICommand value)
        {
            element.SetValue(DragCompletedCommandProperty, value);
        }

        public static ICommand GetDragCompletedCommand(FrameworkElement element)
        {
            var slider = FindParentControl<Slider>(element);
            return (ICommand)slider.GetValue(DragCompletedCommandProperty);
        }

        private static Thumb GetThumbFromSlider(Slider slider)
        {
            var track = slider.Template.FindName("PART_Track", slider) as Track;
            return track == null ? null : track.Thumb;
        }

        private static DependencyObject FindParentControl<T>(DependencyObject control)
        {
            var parent = VisualTreeHelper.GetParent(control);
            while (parent != null && !(parent is T))
            {
                parent = VisualTreeHelper.GetParent(parent);
            }
            return parent;
        }
    }
} 
```

这里有几件事值得注意。因为命令连接到 Slider，但事件是在 Thumb 上触发的，所以必须能够向上/向下查找可视树以便从另一个中获取一个。

* * *

**示例 XAML：**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:behaviors="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">

    <Grid x:Name="grid">
        <Slider behaviors:SliderDragBehaviors.DragCompletedCommand="{Binding Path=DragCompletedCommand}"/>
    </Grid>
</Window> 
```

* * *

希望这有一些用处:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-15T14:58:01.067

我对来自 Tom Allen 的代码有疑问，因为在我想用命令绑定它时滑块模板不可用。基本上，我需要做的就是等待滑块控件加载并重试。以下是我需要进行的更改才能使其正常工作：

```
 private static void DragCompleted(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        //the Template of the slider is not available now
        //we have to wait for the slider to load completely in order to do this
        var slider = (Slider)d;
        slider.Loaded += slider_Loaded;
    }

    static void slider_Loaded(object sender, RoutedEventArgs e)
    {
        var slider = (Slider)sender;
        var thumb = GetThumbFromSlider(slider);
        thumb.DragCompleted += thumb_DragCompleted;
    } 
```

希望能帮助到你！问候

# php - 当 php 类中有定义的对象时，可以使用默认构造函数创建对象吗？

> ID：14331273
> 
> 赞同：0
> 
> 时间：2013-01-15T04:38:18.487
> 
> 标签：php, class, object, constructor

是的，当我还定义了参数化构造函数时，我很困惑默认构造函数（在创建类时自动创建且无参数的构造函数）是否仍可用于构造对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:50:55.430

使用参数构造函数后，您需要使用参数调用它。PHP 不支持像 C# 那样的构造函数重载，但它们有很多解决方法。

# php - 按日期的 SUM 数据组

> ID：14331277
> 
> 赞同：-1
> 
> 时间：2013-01-15T04:38:47.873
> 
> 标签：php, report, sum

我想按日期汇总数据组

**示例数据**

```
{"reqtime":"Monday, July 30, 2012 08:55:45","user_id":"9704"},
{"reqtime":"Tuesday, September 4, 2012 11:07:11","user_id":"9717"},
{"reqtime":"Thursday, September 13, 2012 07:41:41","user_id":"9720"},
{"reqtime":"Friday, October 12, 2012 10:20:19","user_id":"9731"},
{"reqtime":"Friday, October 19, 2012 10:20:14","user_id":"9726"},
{"reqtime":"Monday, November 26, 2012 18:42:00","user_id":"9701"}
{"reqtime":"Thursday, December 6, 2012 11:33:52","user_id":"9728"},
{"reqtime":"Monday, December 10, 2012 02:55:53","user_id":"10282"},
{"reqtime":"Monday, December 10, 2012 03:02:24","user_id":"10284"},
{"reqtime":"Monday, December 10, 2012 04:02:57","user_id":"10286"},
{"reqtime":"Monday, December 10, 2012 04:18:29","user_id":"9944"},
{"reqtime":"Monday, December 10, 2012 05:22:38","user_id":"10292"},
{"reqtime":"Monday, December 10, 2012 05:23:05","user_id":"10291"}, 
```

变成这样

例子 ：

```
dec 10 : 6 user_id /*( **sum user_id but sorting by date** )*/ 
```

这是我的代码/脚本尚未求和，n 尚未编码为 json ：

```
$query = "SELECT * FROM  `users_demoid` order by reqtime LIMIT 0 , 100";
$result = mysql_query($query) or die("SQL Error 1: " . mysql_error());

// get data and store in a json array
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $date=date("l, F j, Y H:i:s",$row['reqtime']);
    $orders[] = array(
        'reqtime' => $date,
        'user_id' => $row['user_id']
      );
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:07:45.517

```
$arr = json_decode($json_arr) ;
$arr_res=array();
$i=0;
 foreach($arr as $stdobj)
   {
      $search = $stdobj->reqtime;
      $arr_res[$i]['user_id']=$stdobj->user_id;
      foreach($arr as $stdobj2 )
      {
            if($search == $stdobj2->reqtime)
            {
              $arr_res[$i]['sum'] +=1;
             } 
      }
   $i++
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:16:38.017

我假设您的示例数据实际上是一个 JSON 数组。我们将其称为`$json_data`示例。我相信您已经知道可以使用`json_decode`. 我们将 JSON 转换为关联数组，因为我碰巧喜欢它们而不是`StdObject`s：

```
$array_data = json_decode($json_data, TRUE); 
```

这将为您提供数据的多维数组 - 包含每个记录的数组作为关联记录的数组，其中键为`reqtime`and `user_id`，例如：

```
Array
(
    [0] => Array
        (
            [reqtime] => Monday, December 10, 2012 02:55:53
            [user_id] => 10282
        )

    [1] => Array
        (
            [reqtime] => Monday, December 10, 2012 02:55:53
            [user_id] => 10282
        )

) 
```

现在我们有了可以迭代的格式的数据，所以我们会这样做。在每次迭代中，我们将转换`reqtime`为方便的格式进行比较——基本上只是去掉时间分量。然后，如果该日期在该数组中不存在，我们将把它作为键添加到结果数组中，如果存在，则增加它的值：

```
$result = array();
foreach($array_data as $data_record) {
  $date = date('M d', strtotime($data_record['reqtime']));
  if (isset($result[$date])) {
    $result[$date]++;
  } else {
    $result[$date] = 1;
  }
} 
```

请注意，日期格式`M d`将仅包含月份和日期（例如“Dec 10”），但不包含年份，因此如果您的数据可能有重叠的日期（例如“Dec 10 2011”和“Dec 10” 2012”），那么您需要考虑到这一点。

此外，这将计算每个日期有多少条记录，而不是有多少唯一用户。如果同一用户有可能在同一日期出现在多条记录中，但您只想计算一次用户，那么您还需要额外的逻辑。

我将把这两个作为练习留给你，因为它们不是原始问题的一部分。

# javascript - 如何使用 Javascript 或 Jquery 将 JSON 对象包装在数组中？

> ID：14331280
> 
> 赞同：0
> 
> 时间：2013-01-15T04:39:02.370
> 
> 标签：javascript, jquery, arrays, json, object

如何将此处的所有数据包装在一个数组中？这是从网站系统自动生成的，我将其输入的应用程序要求数据位于数组中。JSON中有多组数据，这只是大约5或6个中的2个。

```
collection: {
id: "5096f729e4b02d37bef658f2",
enabled: true,
starred: false,
type: 10,
ordering: 3,
title: "About",
navigationTitle: "About",
urlId: "about",
itemCount: 0,
updatedOn: 1347025745523,
publicCommentCount: 0,
folder: false,
dropdown: false,
tags: [ ],
categories: [ ],
homepage: true,
typeName: "page",
synchronizing: false,
typeLabel: "page",
fullUrl: "/"
},

websiteSettings: {
id: "5096f728e4b02d37bef658e0",
websiteId: "5096f728e4b02d37bef658df",
type: "Business",
subject: "Personal",
country: "US",
state: "NY",
markdownMode: false,
simpleLikingEnabled: true,
commerceEnabled: false,
defaultPostFormat: "%y/%m/%d/%t",
commentLikesAllowed: true,
commentAnonAllowed: true,
commentThreaded: true,
commentApprovalRequired: false,
commentAvatarsOn: true,
commentSortType: 2,
commentFlagThreshold: 0,
commentFlagsAllowed: true,
commentEnableByDefault: true,
commentDisableAfterDaysDefault: 0,
disqusShortname: "username",
homepageTitleFormat: "%s - This is a test",
collectionTitleFormat: "%c — %s - This is a test",
itemTitleFormat: "%i — %s - This is a test",
commentsEnabled: true,
allowSquarespacePromotion: false,
storeSettings: {
storeTitle: "Test",
returnPolicy: null,
termsOfService: null,
privacyPolicy: null,
stockLevelAlertLimit: 5,
useLightCart: false,
stripeConnected: false,
storeState: 3
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:08:01.663

好的，假设您将 API 返回的 JSON 保存在名为`rawJson`. 这对您来说很容易使用 jquery，例如使用`getJSON`. 现在你可以用这段代码实现你想要的：

```
var rawJson = // get this yourself, pretend I'm inserting the JSON literal from the url you linked to above in your comments
arrayYouWant = [];

for (category in rawJson) {
  for (key in rawJson[category]) {
    arrayYouWant.push( {key: rawJson[category][key]} )
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T09:38:27.990

您还可以将这两个对象展平并将它们转换为数组，请参见下面的代码段。

```
var rawJSON = {
  collection: {
    id: "5096f729e4b02d37bef658f2",
    enabled: true,
    starred: false,
    type: 10,
    ordering: 3,
    title: "About",
    navigationTitle: "About",
    urlId: "about",
    itemCount: 0,
    updatedOn: 1347025745523,
    publicCommentCount: 0,
    folder: false,
    dropdown: false,
    tags: [],
    categories: [],
    homepage: true,
    typeName: "page",
    synchronizing: false,
    typeLabel: "page",
    fullUrl: "/"
  },

  websiteSettings: {
    id: "5096f728e4b02d37bef658e0",
    websiteId: "5096f728e4b02d37bef658df",
    type: "Business",
    subject: "Personal",
    country: "US",
    state: "NY",
    markdownMode: false,
    simpleLikingEnabled: true,
    commerceEnabled: false,
    defaultPostFormat: "%y/%m/%d/%t",
    commentLikesAllowed: true,
    commentAnonAllowed: true,
    commentThreaded: true,
    commentApprovalRequired: false,
    commentAvatarsOn: true,
    commentSortType: 2,
    commentFlagThreshold: 0,
    commentFlagsAllowed: true,
    commentEnableByDefault: true,
    commentDisableAfterDaysDefault: 0,
    disqusShortname: "username",
    homepageTitleFormat: "%s - This is a test",
    collectionTitleFormat: "%c — %s - This is a test",
    itemTitleFormat: "%i — %s - This is a test",
    commentsEnabled: true,
    allowSquarespacePromotion: false,
    storeSettings: {
      storeTitle: "Test",
      returnPolicy: null,
      termsOfService: null,
      privacyPolicy: null,
      stockLevelAlertLimit: 5,
      useLightCart: false,
      stripeConnected: false,
      storeState: 3
    }
  }
}

var myObject = Object.assign({}, rawJSON.collection); // merging objects aka extend
myObject = Object.assign(myObject, rawJSON.websiteSettings);

// {a: 1, b: 2} => [['a', 1], ['b', 2]]
var objAsAnArray=Object.keys(myObject).map((k)=>[k, JSON.stringify(myObject[k])])

console.log(objAsAnArray)
```

# java - 线程之间可变变量的一致性，同步和提升

> ID：14331290
> 
> 赞同：2
> 
> 时间：2013-01-15T04:40:13.190
> 
> 标签：java, concurrency, synchronization

在我的机器上，以下代码无限期运行（Java 1.7.0_07）：

```
public static void main(String[] args) throws InterruptedException {
    Thread backgroundThread = new Thread(new Runnable() {
        public void run() {
            int i = 0;
            while (!stopRequested) {
                i++;
            }
        }
    });
    backgroundThread.start();
    TimeUnit.SECONDS.sleep(1);
    stopRequested = true;
} 
```

但是，添加一个锁对象和一个`synchronized`NOT 语句`stopRequested`（实际上，在同步块中没有发生任何事情），它会终止：

```
public static void main(String[] args) throws InterruptedException {
    Thread backgroundThread = new Thread(new Runnable() {
        public void run() {
            Object lock = new Object();
            int i = 0;
            while (!stopRequested) {
                synchronized (lock) {}
                i++;
            }
        }
    });
    backgroundThread.start();
    TimeUnit.SECONDS.sleep(1);
    stopRequested = true;
} 
```

在原始代码中，变量`stopRequested`被“提升”，变为：

```
if (!stopRequested)
    while (true)
        i++; 
```

但是，在修改后的版本中，似乎没有发生这种优化，为什么？（事实上​​，为什么`synchronized`不完全优化掉？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:46:45.003

VM 无法推断锁没有被其他线程同步，因此无法对其进行优化。

根据 Java 内存模型，所有同步块都是完全有序的，并且这种顺序（在同一个锁上）有助于建立先发生关系。这就是为什么 VM 不能删除同步块的原因；除非 VM 可以证明只有一个线程在一个对象上同步，否则所有这些同步块都可以被删除，而不影响发生前的关系。

如果锁是本地对象，VM 可以进行逃逸分析以消除锁。多年来，我们一直在听说逃逸分析，但正如示例所示，并且正如我不久前测试过的那样，它似乎还没有起作用。

没有完成锁定省略可能是有原因的。优化对于使用本地等的代码非常有用`Vector`。`StringBuffer`但这仅适用于旧代码；很长一段时间没有人这样做。

一些代码甚至可能依赖于更强大的 pre-java-5 模型，在这种模型中，任何锁都不能被忽略。可能有许多程序，类似于 OP 精心制作的示例，在新模型中不正确，但在过去已经工作了多年。锁省略可能会破坏这些程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T08:22:35.440

虽然这看起来像是内存可见性问题，但在简单示例中通常是 JIT 优化问题。这是因为 JIT 可以检测您是否正在修改该线程中的标志，如果您不这样做，则可以将其内联。有效地将其变成无限循环。

可以看出这一点的一种方法是可见性问题是短暂的，通常太短而您看不到。虽然它们是随机的，但它们通常是一微秒到一毫秒。即直到线程上下文切换并且当它再次运行时它不会保留旧值。事实上，你可以看到它一直变成无限循环的例子，它永远不会“检测到”变化是一种放弃。

如果你只是用 a 减慢循环速度，`Thread.sleep(10)`这可能会阻止它运行足够长的时间来编译。它必须循环 10,000 多次才能进行优化。这通常会“解决”问题。

添加线程安全代码（例如使用 volatile 变量或添加同步块）可能会阻止进行优化。

# java - 未为 SharedPreferences.Editor 类型定义方法 apply()

> ID：14331297
> 
> 赞同：-1
> 
> 时间：2013-01-15T04:41:20.383
> 
> 标签：java, android

代码：[http](http://pastebin.com/sh5TKhVv) : //pastebin.com/sh5TKhVv 我已经从书中复制了这段代码，我没有改变任何东西，但它在第 96 行和第 192 行有这个错误。

```
preferencesEditor.apply(); --> The method apply() is undefined for the type SharedPreferences.Editor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:46:08.827

[SharedPreferences.Editor.apply();](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply%28%29) 在**API LEVEL 9**中添加。如果您使用的是 9中的较低版本，则使用[SharedPreferences.Editor。commit()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29)使用 SharedPreferences 保存所有更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:55:37.770

```
shared_preferences= PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
editor =shared_preferences.edit();
editor.putString("test","Done");
editor.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T12:08:49.143

尽管我使用的是 API LEVEL 17，但我遇到了同样的问题。
这条线为我解决了这个问题：

`SharedPreferences.Editor.commit();`

# javascript - 添加 周围/之后在纯 JavaScript

> ID：14331298
> 
> 赞同：0
> 
> 时间：2013-01-15T04:41:39.327
> 
> 标签：javascript

我正在用纯javascript（没有jQuery）制作一个简单的输入滑块。它工作得很好，除了一个小缺陷：我需要在 html 中调用它

```
<div id="test0" data-options="A;B;C;D;E" class="myslider"></div> 
```

而不是更自然

```
<input type="hidden" class="myslider" data-options="A;B;C;D;E" id="test0"> 
```

原因是我依赖于 `document.getElementById(name).innerHTML=...`向它添加必要的标记。所以我的问题是：我们可以做些什么来替换、附加、修改、替换... html 文本`<input>`？`innerHTML`似乎不起作用，我找不到替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:45:01.380

创建`<div>`、插入、`<div>`更改`input`？`id`

```
var input = document.getElementById('test0');

var slider = document.createElement('div');
slider.id = input.id;
slider.className = 'myslider';
slider.dataset.options = input.dataset.options;

input.id = null;
input.parentNode.insertBefore(slider, input); 
```

现在你可以随心所欲地改变`slider`了。不过，我建议检查 DOM API 而不是将 HTML 扔进东西中。HTML 很混乱。

# html - 我可以编写一个从网站中提取批量联系信息的脚本吗？

> ID：14331299
> 
> 赞同：0
> 
> 时间：2013-01-15T04:41:51.130
> 
> 标签：html, text, batch-file

我正在为我的工作做一个项目，并试图从 GA bar 网站上获取律师的联系信息。我已经搜索了执行此操作的程序，但没有找到任何我需要的东西。

我需要将所有律师信息都输入到 Excel 中，并且我认为有一些批处理文本程序可以完成这项工作。列出了超过 50,000 个联系人，我真的不认为我需要单击每个链接来查看信息才能访问它。

我在 chrome 上用“检查元素”打开了页面上的代码，发现每个律师在网站上都有一个唯一的 ID。我觉得他们的信息可以很容易地从网站上复制，但我的编程知识非常有限。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:44:52.330

第一步是检查 GA 酒吧网站的服务条款/版权，并确保您被允许这样做。

在开始编码之前，您可以考虑以数据库格式请求联系信息。这些信息可能是免费的，也可能是低于您编写解决方案的成本的费用。

如果你必须编程，一个非常强大的用于抓取网站内容的库是[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。我建议您熟悉它，并在您了解细节时在此处发布更详细的问题。

HTML Agility Pack 确实需要编程。如果您正在寻找非编程解决方案，Stack Overflow 不是合适的地方。

# c# - 如何知道某些文件元数据是只读的？

> ID：14331305
> 
> 赞同：1
> 
> 时间：2013-01-15T04:42:28.123
> 
> 标签：c#, .net, windows-runtime, windows-store-apps

我可以通过下面的代码将一些 EXIF 属性存储到 jpg 图片中。

```
var propertyToSave = new List<KeyValuePair<string, object>>() { 
    new KeyValuePair<string, object>("System.Photo.LensManufacturer", "Canon") };

await file.Properties.SavePropertiesAsync(propertyToSave); 
```

[但实际上这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ff516600%28v=vs.85%29.aspx)列出的 EXIF 的一些属性是只读的。

例如，如果试图设置一个只读属性，`"System.Photo.PeopleNames"`就会抛出一个异常。

```
// System.Photo.PeopleNames is a read-only property
var propertyToSave = new List<KeyValuePair<string, object>>() { 
    new KeyValuePair<string, object>("System.Photo.PeopleNames","Foo") 
}; 
```

ps：value，`"Foo"`可能不是key对应的正确值，`"System.Photo.PeopleNames"`. 我只是举个例子。

我的问题，有没有办法知道某些文件元数据是否是只读的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:50:10.427

文档在此处说明了哪些属性是只读的：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ee872003(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee872003(v=vs.85).aspx)

# google-app-engine - 空闲的常驻实例几分钟内什么都不做

> ID：14331306
> 
> 赞同：3
> 
> 时间：2013-01-15T04:42:32.850
> 
> 标签：google-app-engine

我惊讶地发现，谷歌应用引擎的空闲实例对服务任何新请求没有任何作用，但动态实例处理了大部分请求。许多空闲实例**实际上空闲**了几分钟。即使我检查了日志，但什么也没留下。

![在此处输入图像描述](../Images/816190e8dfc786b81c28947529ae48a1.png)

这是我的应用程序设置。

![在此处输入图像描述](../Images/ae10290a570b396d5bbdf3486b3567d4.png)

为什么动态实例的调度比空闲实例多？如何改进我的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:37:08.640

空闲实例是“保留”实例，因此当**流量增加**时它们立即可用。这就是文档所说的：`Idle Instances are pre-loaded with your application code, so when a new Instance is needed, it can serve traffic immediately.`

因此，仅当您预计会有大量流量峰值时才需要拥有大量空闲实例，但前提是您希望保持相同的延迟。

这是计算：实例可以处理（最多）10 个请求/秒，并且需要 15 秒才能启动。因此，如果您预计 15 秒内的流量增加 10 个请求/秒，您只需要一个空闲实例，如果增加 30 个请求/秒，您需要两个，等等。

# ruby-on-rails - FactoryGirl has_many ：通过 Rails 3.2.11 中的关系中断

> ID：14331308
> 
> 赞同：2
> 
> 时间：2013-01-15T04:42:52.253
> 
> 标签：ruby-on-rails, testing, factory-bot

一切都按预期工作，直到我升级到 Rails 3.2.11。

这就是我的模型的设置方式：

```
class Student < ActiveRecord::Base
    has_many :institutes
    has_many :teachers, :through => :institutes
end

class Teacher < ActiveRecord::Base
    has_many :institutes
    has_many :students, :through => :institutes
end

class Institute < ActiveRecord::Base
    belongs_to :teachers
    belongs_to :students
    validates :teacher_id, :presence => true
    validates :student_id, :uniqueness => {:scope  => :teacher_id}, :presence => true
end 
```

我的 factory.rb 文件如下所示：

```
factory :student do
    first_name "abc"
    last_name "xyz"
    teachers {|t| [t.association(:teacher)] }
end

factory :teacher do
    first_name "ABC"
    last_name "XYZ"
end

factory :institute do
    association :student
    association :teacher
end 
```

* * *

## **问题 ：**

当我做 ：

```
FactoryGirl.create(:student) 
```

它给了我以下错误：

```
ActiveRecord::RecordInvalid: Validation failed: Institutes is invalid 
```

看起来，它创造了`:teacher`，然后`:institute`，最后`:student`。因此，它没有`student_id`创建时间`:institute`，使其无效。

奇怪的是，相同的模型和 factory_girl 设置在 Rails 3.2.8 上运行良好。

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:03:35.160

尝试：

```
factory :student do
    first_name "abc"
    last_name "xyz"
end

factory :teacher do
    first_name "ABC"
    last_name "XYZ"
end

factory :institute do
    student
    teacher
end 
```

然后：

```
@institute = FactoryGirl.create(:institute)
@student = @institute.student 
```

这适用于验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T08:56:59.490

这样的事情怎么办

```
factory :student do |student|  
  ...
  student.after_create do |student|  
    student.teachers << :teacher  
  end  
end 
```

# r - 使用 ARIMA 对一个月的每日数据进行时间序列预测

> ID：14331314
> 
> 赞同：0
> 
> 时间：2013-01-15T04:43:22.537
> 
> 标签：r, time-series, forecasting

我每个周期工作 30 天（每月），因此在我的历史数据集中大约有 2 个周期。

`R`脚本是，

```
library(forecast)
value <- c(117.2 , 224.2 , 258.0 , 292.1 , 400.1 , 509.9 , 626.8 , 722.9 , 826.1 , 883.6,916.6, 1032.1, 1151.2, 1273.4 ,1391.8, 1499.2, 1532.5 ,1565.9 ,1690.9, 1813.6,1961.4 ,2102.8 ,2208.2, 2256.8, 2290.8 ,2413.7, 2569.4 ,2730.3, 2882.9 ,2977.5, 117.2 , 224.2 , 258.0 , 292.1 , 400.1 , 509.9 , 626.8 , 722.9 , 826.1 , 883.6,916.6, 1032.1, 1151.2, 1273.4 ,1391.8, 1499.2, 1532.5 ,1565.9 ,1690.9, 1813.6,1961.4 ,2102.8 ,2208.2, 2256.8, 2290.8 ,2413.7, 2569.4 ,2730.3, 2882.9 ,2977.5)

sensor<-ts(value,frequency=30)#daily data of month,here only 2 month's data
fit <- auto.arima(sensor)
LH.pred<-predict(fit,n.ahead=30)
plot(sensor,ylim=c(0,4000),xlim=c(0,5),type="o", lwd="1")
lines(LH.pred$pred,col="red",type="o",lwd="1")
grid() 
```

结果图是 ![预测图](../Images/3c58dd90f05a8977f60912f33c9ee3d9.png)

但我对这个预测并不满意。有什么方法可以使预测看起来与之前的价值趋势相似（见图）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T05:06:15.830

您要求很多人`auto.arima()`仅使用两个月的数据来找到模型。至少通过建议季节性差异来帮助它。此外，不要使用`predict`. `forecast`功能要好很多。

`forecast()`关于“更好”的原因，请参阅[Journal of Statistical Software of July 2008](http://www.jstatsoft.org/v27/i03/paper)，特别是第 4.4 节：

> predict() 函数是通用的，具有适用于各种时间序列模型的 S3 方法。它根据时间序列模型计算点预测和预测区间。存在使用 ets()、auto.arima()、Arima()、arima()、ar()、HoltWinters() 和 StructTS() 拟合模型的方法。
> 
> 还有一个 ts 对象的方法。如果将时间序列对象作为第一个参数传递给 forecast()，该函数将根据第 2 节的指数平滑算法生成预测。
> 
> 在大多数情况下，有一个现有的 predict() 函数旨在做同样的事情。不幸的是，predict() 函数的结果对象在每种情况下都包含不同的信息，因此不可能为结果构建通用函数（例如 plot() 和 summary()）。因此，相反，forecast() 充当 predict() 的包装器，并以通用格式（预测类）包装获得的信息。我们还定义了一个默认的 predict() 方法，该方法在不存在现有 predict() 函数时使用，并调用相关的 forecast() 函数。因此，predict() 方法与 predict() 方法并行，但后者提供了更可用的一致输出。

试试下面的。

```
fit <- auto.arima(sensor,D=1)
LH.pred <- forecast(fit,h=30)
plot(LH.pred)
grid() 
```

![在此处输入图像描述](../Images/d74474963c7d4ed71ddc10ea85402f9e.png)

# jquery - 为什么我必须刷新每个页面才能让 jQuery 在每个页面上正常工作？

> ID：14331317
> 
> 赞同：0
> 
> 时间：2013-01-15T04:43:35.767
> 
> 标签：jquery, jquery-mobile, prepend

我正在使用 jQuery Mobile，我正在尝试将一个简单的列表项从一个页面移动到另一个页面。这是我正在使用的一段代码：

```
$('#YesNoMaybePage, #summaryPage').live('pageinit', function() {
$('.green, .blue, .red').click(function(){
    var $move = $('.purchase').prependTo("#summaryPage .theListItem");
});
}); 
```

现在这很好用，当我刷新时`#summaryPage`，单击返回`#YesNoMaybePage`并执行事件。`#YesNoMaybePage`但是，如果我刷新并执行它，它就不起作用。`#summaryPage`我假设刷新时没有加载html ，`#YesNoMaybePage`这就是它不起作用的原因，但老实说我不知道​​。任何想法为什么会这样以及我如何解决这个问题？

感谢一堆世界。我爱你。为了进一步澄清，这里是另一个代码片段，我有完全相同的问题：

```
$('#YesNoMaybePage, #categorizePage').live('pageinit', function() {
$('.green, .blue, .red').click(function(){
    var $move = $('.purchase').prependTo("#categorizePage .theListItem");
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:12:36.610

这两个“页面”是否同时在 dom 中？您似乎正在尝试将 html 元素添加到当前未显示的页面。那不会飞，你只能修改当前加载的dom。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:04:49.097

这可能是因为您的 javascript 包含在您的 summarypage.html 中，而不是您的 yesnomaybepage.html 中。这是 jqm 的预期行为。您必须在站点的每个页面中包含相同的 js，或者将所有页面打包到一个 html 文件中。 [http://jquerymobile.com/demos/1.2.0/docs/pages/multipage-template.html](http://jquerymobile.com/demos/1.2.0/docs/pages/multipage-template.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-06T04:26:04.133

我以前也有同样的问题。我的问题是turbolink。通过禁用它，它对我来说非常有用。这是一个非常简单的删除方法：转到`app/assets/javascripts/application.js`

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require turbolinks
//= require_tree . 
```

去掉turbolink前面的等号就行了

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
// require turbolinks
//= require_tree . 
```

就是这样

# ruby - FakeFS 和 CSV.open 规范测试引发 ArgumentError:wrong number of arguments (3 for 2)

> ID：14331325
> 
> 赞同：0
> 
> 时间：2013-01-15T04:44:24.983
> 
> 标签：ruby, csv, rspec

我在使用 fakefs 规范测试 CSV.open 并引发 ArgumentError: wrong number of arguments (3 for 2) 时遇到问题

规范代码如下：

ruby 版本是 jruby 1.7.1 (1.9.3p327)

fakefs 版本是 0.4.2

需要“假货/安全”

```
 it 'should pull offers and save them into file' do
    FakeFS do 
      extractor.process(affiliate_ids)
      File::size(FILE_NAME).should > 0
    end
  end 
```

红宝石代码如下：

```
class Extractor
  def process(affiliates)
    save(ds)
  end

 # saves all the buy URLs to a text file
  def save(ds)
    @@logger.info "Writing offers to file #{FILE_NAME}"

    CSV.open(FILE_NAME, "w") do |csv|
      ds.each do |row|
        buy_url = row[:buy_url]
        csv << [row[:name], row[:offer_id], buy_url]
      end
    end

  end
end 
```

任何人都知道是什么导致了这个问题？提前致谢

吴大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:16:57.723

这个问题在 JRuby 中得到了解决。在此处查看详细信息。[https://github.com/defunkt/fakefs/issues/172](https://github.com/defunkt/fakefs/issues/172)

-亚历克斯

# c# - 如何从 Outlook 加载项表单区域中的当前电子邮件中读取电子邮件签名？

> ID：14331327
> 
> 赞同：0
> 
> 时间：2013-01-15T04:44:45.280
> 
> 标签：c#, asp.net, outlook-addin

我在 Visual Studio 2010 中使用 c#.net 在 Outlook 2010 插件中开发一个表单区域。

我想阅读当前打开的电子邮件的签名。

如何从电子邮件中读取签名？

我试图谷歌，但我找不到任何东西。大多数解决方案都显示了如何从默认模板设置签名或访问签名。

但我想从电子邮件中阅读它。

谁能帮我 ？

- 提前致谢。

毛萨米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:16:02.383

签名只是电子邮件正文的一部分，不会单独存储。Outlook 所做的只是将签名 HTML 附加到电子邮件的底部，因此您必须尝试以某种方式将签名与电子邮件的内容区分开来。我想这会很困难，你不可能只调用一个函数并检索 sig。

# date - 如何在 Informix 中计算返回值类型为整数的两个日期之间的差异？

> ID：14331328
> 
> 赞同：2
> 
> 时间：2013-01-15T04:44:45.320
> 
> 标签：date, informix

我正在使用 Informix 数据库。我想得到两个日期之间的差异，返回值的数据类型必须是整数。SQL 看起来像：

```
select (today - to_date('20121201','%Y%m%d'))  from your_table_name 
```

但是，当我执行 SQL 时，它返回 45，当然计算的值不是整数类型。值的日期类型是什么？如何将值转换为整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:48:14.577

TO_DATE 函数是一个 Oracle 导入，并在 Oracle 中返回一个 Oracle DATE 类型（因此得名），但 Oracle DATE 类型对应于一个 Informix DATETIME 类型。因此，TO_DATE() 函数的 Informix 实现返回一个 DATETIME 类型。

### 问题

```
SELECT TODAY AS TODAY,
       TO_DATE('20121201', '%Y%m%d') AS raw_to_date,
       (TODAY - TO_DATE('20121201','%Y%m%d')) AS raw_difference
  FROM sysmaster:informix.sysdual;

today       raw_to_date                   raw_difference
DATE        DATETIME YEAR TO FRACTION(5)  INTERVAL DAY(8) TO DAY
2013-01-16  2012-12-01 00:00:00.00000     46 
```

### 解决方案

表达式的解决方案是将 DATE 函数应用于 TO_DATE 的输出，或将其转换为类型 DATE。

```
SELECT DATE(TO_DATE('20121201', '%Y%m%d'))          AS date_to_date,
       CAST(TO_DATE('20121201', '%Y%m%d') AS DATE)  AS cast_to_date,
            TO_DATE('20121201', '%Y%m%d')::DATE     AS colon_to_date,
       (TODAY - DATE(TO_DATE('20121201','%Y%m%d'))) AS date_difference
  FROM sysmaster:informix.sysdual;

date_to_date  cast_to_date  colon_to_date  date_difference
DATE          DATE          DATE           INTEGER
2012-12-01    2012-12-01    2012-12-01     46 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:20:21.093

两个日期之间的差应该是一个整数。你应该只`INTERVAL`在计算值之间的差异时得到一个`DATETIME`。

我现在手头没有 Informix 实例，但我怀疑该`to_date()`函数的使用会导致`DATETIME`数学运算。

我可以看到您已经提出了解决方案，但请尝试以下方法，这会*更*简单：

```
SELECT today - TO_DATE('20121201', '%Y%m%d')::DATE AS td FROM tb_dis_controll 
```

# ios - 获取链接器命令失败，退出代码为 1（使用 -v 查看调用）错误

> ID：14331331
> 
> 赞同：0
> 
> 时间：2013-01-15T04:44:55.457
> 
> 标签：ios, objective-c, ios6

在 iPad 上运行应用程序时出错。我使用的是 ios6 和 xcode 4.5

![在 iPad 上运行时出错](../Images/29aedd5dee42214146ba55940366df51.png)

在模拟器中它工作正常。

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:00:23.297

尝试： - 清理并构建 - 删除派生数据文件夹 - 从 iPad 中删除应用程序并重新构建。- 重新编译您用于项目的任何库

# google-chrome - Sahi OS 控制器无法使用 Chrome 版本 24.0.1312.52 m 打开

> ID：14331332
> 
> 赞同：0
> 
> 时间：2013-01-15T04:45:00.507
> 
> 标签：google-chrome, windows-7, sahi

我已将我的 chrome 更新到版本 24.0.1312.52 m。Sahi OS 控制器无法使用更新的 Chrome 打开。我用 Alt、Alt+Ctrl 进行了同样的检查，关闭了弹出窗口阻止程序，但仍然没有运气。我在另一台机器上检查了同样的问题，同样的问题发生了，即在将 chrome 更新到最新版本后，sahi 控制器没有打开。

操作系统：Windows 7 专业版

浏览器：Chrome 版本 24.0.1312.52 m

Sahi：Sahi OS 版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:38:23.410

Not sure what is going on, but here is the workaround.

Open sahi/htdocs/spr/concat.js

Look for `Sahi.prototype.openControllerWindow`. Replace the full function so that it looks like:

```
Sahi.prototype.openControllerWindow = function (e) {
    if (!e) e = window.event;
    if (!this.isHotKeyPressed(e)) return true;
    if (this._isChrome()) {
        window.setTimeout(function(){_sahi.topSahi().openWin(e)}, 100);
    } else {
        this.topSahi().openWin(e);
    }
    return true;
}; 
```

Next search for `_sahiControl` in the same file and replace it with `sahiControl`. (You should see 2 occurrences.)

Restart Sahi, clear browser cache and check.

Regards, Narayan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:01:21.653

这已在 Sahi 4.5.1 中修复。您可以从此链接下载它： http: [//sahi.co.in/downloads-archive/](http://sahi.co.in/downloads-archive/)

谢谢，

# jquery - 页面上未加载 JQuery 菜单链接

> ID：14331335
> 
> 赞同：0
> 
> 时间：2013-01-15T04:45:18.413
> 
> 标签：jquery, jquery-ui

我正在尝试使用 Jquery 的菜单类为我正在编写的网站创建导航菜单。出于某种原因，我无法正确加载链接。如果我右键单击并在新窗口中打开它可以工作，但不能直接单击。

这是我的 HTML 代码（假设导入了 Jquery 和 Jquery-ui）：

```
$(function() {

    $( "#menu" ).menu({});
});

<ul id="menu" >
    <li>
        <a href="#">Service</a>
        <ul>
            <li>
                <a href="customHourReport.php">Report Hours</a>
            </li>
            <li>
                <a href="eventHistory.php">Event History</a>
            </li>
            <li>
                <a href="memberstats.php">Member Stats</a>
            </li>
        </ul>
    </li>
    <li>
        <a href="#">Fundraising</a>
        <ul>
            <li>
                <a href="./dlfiles/Application.docx">Support Letter</a>
            </li>
            <li>
                <a href="./dlfiles/SampleLetter.docx">Sample Letter</a>
            </li>
        </ul>
    </li>
    <li>
        <a href="#">Bylaws</a>
        <ul>
            <li>
                <a href="./dlfiles/Constitution2012-2013.docx">Download Bylaws</a>
            </li>
        </ul>
    </li>   
    <li>
        <a href="#">Budgets</a>
        <ul>
        </ul>
    </li>       
    <li>
        <a href="#">Settings</a>
        <ul>
            <li>
                <a href="changepassword.php">Change your Password</a>
            </li>
            <li>
                <a href="profpic.php">Upload/Change Profile Picture</a>
            </li>
        </ul>
    </li>   
</ul> 
```

有什么想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:05:28.410

无论您是否使用 jquery 方法`return false`和`event.preventDefault()`;

# php - 通过 JSOn 传递 PHP 数组以在 Jquery 中输出

> ID：14331337
> 
> 赞同：0
> 
> 时间：2013-01-15T04:45:39.397
> 
> 标签：php, javascript, jquery, ajax, json

我正在开发一个 jQuery 脚本，该脚本从 MySQL 数据库中检索 PHP 数组并将其作为 JSON 对象返回。这一切正常，我可以输出原始 JSON 对象，包括密钥。

我遇到的问题是我输出它的方式，我目前使用 jQuery 的 $.each。

示例：（不是完整的脚本，只是需要的）

```
 if(data){
                $.each(data, function(key, data) {
                $('#div').append(  key + ' : '  + data  );

                });

        }

    } , 'json') 
```

所以目前的输出是这样的：示例

```
 Name: Tom Age: 20 Gender: Male 
```

但是我不希望返回数组的所有结果，这就是 $.each 正在做的事情。我想在需要的时间和地点手动输出数组的不同部分。

我尝试了这样的方法，以便我可以得到具有“名称”键但它不起作用的数组结果（我的数组键之一是名称）：

```
 $('#div').append(  key + ' : '  + data['name']  ); 
```

有什么建议么？

编辑：让它更清楚一点：

而不是循环并输出整个数组，我只想输出选择的部分：例如；

数据名称数据年龄

例如，即使该数组有 10 个其他结果，它们也只会输出带有 name 和 age 键的 2 个数组。

我们正在使用的数组就是这样，只有 1 个结果，但有多个值。：

```
 {Name: 'Tom' Age: 20 Gender: 'Male'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:21:02.843

关于什么：

```
$.each(data, function(key, data) {
    $('#div #span-'+key).html(data);
}); 
```

因此，如果您有键名、年龄、性别，则需要 3 个带 ID 的跨度：#span-name、#span-age、#span-gender，它们将被填充数据。如果您只需要姓名和年龄，只需删除您的#span-gender 跨度，它就不会显示。

您的 html 将类似于：

```
<div id="div">
    <span id="span-name"></span>
    <span id="span-age"></span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:01:49.800

我想你想这样做：

```
$.each(data, function(key, val) {
   $('#div').html(key + ' : '  + val.name);
}); 
```

**建议：** 使用`.html()`它可以让您使用最新结果更新 div，并将结果`.append()`附加到以前的结果中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T05:03:33.790

在`each`. 您正在`data`用作主要对象以及回调的第二个参数。另请注意，密钥的使用区分大小写

将第二个更改为其他内容

```
$.each(data, function(key, item) {
                $('#div').append( item.Name  ) 
```

也不清楚您的数据是什么样的。我假设它是一个对象数组，例如：

```
[ {Name: 'Tom' Age: 20 Gender: 'Male'}, {Name: 'Jane' Age: 20 Gender: 'Female'}] 
```

如果数据只是单个对象，没有数组，则不需要使用`$.each`，只需使用对象表示法直接访问对象

```
{Name: 'Tom' Age: 20 Gender: 'Male'}
alert( data.Name); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-15T04:56:19.687

在您的 jQuery 代码中，执行此操作。

```
if(data){
    var dec_data = jQuery.parseJSON(data[0]);
    //Loop over it now
    jQuery.each(dec_data, function(key, val){
        //Stick it in the div
        jQuery('div').append(key+' - '+val);
    });
} 
```

# wpf - 需要一种使用 WPF 应用程序与 Unix 机器通信的方法

> ID：14331340
> 
> 赞同：-1
> 
> 时间：2013-01-15T04:45:55.203
> 
> 标签：wpf, unix

我正在使用 WPF（C# 作为代码隐藏）在 Windows 操作系统中创建一个应用程序，并将数据存储在同一网络中的 Unix 机器中。我的应用程序需要一种与 Unix 机器通信的方法，以从中获取数据并将其显示在 Windows UI（在 WPF 中创建）上。

我的应用程序还需要知道通过广播连接到网络中的所有 Unix 机器。

对于上述要求，使用我的 WPF 应用程序连接到 Unix 机器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:48:26.590

如果您要使用的数据是基于文件的，您可以在 unix 上使用 ftp 或 samba 服务器。samba 服务器的优点之一是它具有广播能力，并允许通过 netbios 发现其在网络中的资源。这将符合您的广播要求。

如果基于文件的存储还不够，请考虑使用 Web 服务。由于您是在 .NET 中编写应用程序，因此在 Unix 端使用 Mono 将是最容易的。[您可以在 Mono http://www.mono-project.com/Writing_a_WebService](http://www.mono-project.com/Writing_a_WebService)中编写一个 Web 服务，它将监听来自您的 WPF 应用程序的请求。

我承认这个解决方案在性能、可扩展性和可移植性方面并不是最好的，但它对于 .net 开发人员来说是最快的。

关于您的应用程序需要知道 unix 机器列表的另一个要求更为复杂。蛮力方法是拥有一个主服务器，当它们启动时，它将监听来自 unix 机器的通知。它将将该列表提供给 WPF 客户端。

如果你想要一个性能更高、更便​​携的解决方案并且你有更多的开发资源，你可以使用这些框架之一在 unix 端实现一个 RESTful 服务[REST frameworks](http://code.google.com/p/implementing-rest/wiki/ByLanguage)

就开发时间而言，最复杂的方法是使用裸 TCP ip。这将需要在客户端和服务器端进行大量编码，以及使其稳定的漫长过程。同样，这取决于您的数据交互的复杂程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:59:51.463

“将数据存储在同一网络中的 Unix 机器中”假设您的意思是它在数据库中，我会推荐某种 ORM（如 NHibernate）

# windows-phone-8 - 如何检测滑动手势中使用的手指数？

> ID：14331343
> 
> 赞同：1
> 
> 时间：2013-01-15T04:46:16.453
> 
> 标签：windows-phone-8

我的意图是根据用户是用一根手指还是两根手指滑动屏幕来产生不同的基于手势的动作。我对接触应用程序开发有点陌生，并且在操作事件或 Toolkit GestureService 中都没有看到必要的信息。如果需要，我可以使用更多低级触摸逻辑或手动跟踪触摸接触的数量，我只需要一些关于如何区分手势中的单点触控和双点触控的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:13:10.460

这可以帮助您解决问题。有属性可以在手势面板中找到第二个触摸点。

```
GestureSample sample = TouchPanel.ReadGesture();
Vector2 first = sample.Position;
Vector2 second = sample.Position2; 
```

Position2 属性将返回手势面板中的第二个触摸位置。

# python - python：如何使用带有列表值的字典来搜索文件

> ID：14331350
> 
> 赞同：0
> 
> 时间：2013-01-15T04:48:18.493
> 
> 标签：python, dictionary

希望这是一个简单的问题：

这是我的字典`temp = {'0.1995': ['in1', 'in2'], '0.399': ['in0', 'y']})`

搜索文件的代码：

```
for line in SPFFile:
    temp_dict = temp            
    for val in temp_dict.itervalues():      
    if re.search(val.upper(),line) and ((re.search("^R",line) or re.search("^C",line))):
         print "value found!" 
```

我的问题是 val 是一个列表，例如 ['in1','in2'] 而我需要 val 是 'in1' 然后是 'in2' 等等。

另外，如果我不应该使用字典来执行此操作，请告诉我。该词典由两个列表组成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:02:23.167

*   虽然您当然可以牺牲可读性来换取性能，但请尝试使用一个正则表达式而不是三个。因此，例如：

    ```
    if re.match('[RC].*(?:%s)' % '|'.join(map(re.escape, val), line):
        print "value found!" 
    ```

    假设“R”或“C”不是`val`您要匹配的项目的一部分，将一步完成您在上面描述的操作。如果是，您可以改用前瞻：

    ```
    if re.match('(?=.*%s)[RC]' % '|'.join(map(re.escape, val), line):
        print "value found!" 
    ```

*   `temp_dict = temp``temp`除非您计划稍后重新分配到某个地方，否则不会做任何事情；它只是给出了`temp`一个新名称的内容。您也可以考虑为变量赋予比`temp`和更有意义的名称`val`。

*   虽然`re`模块中内置了正则表达式缓存，但您应该养成编译将重复使用的正则表达式的习惯，因为它会给您带来显着的性能优势。这是我的风格，对你来说可能过于冗长：

    ```
    RE_BEGINS_WITH_R_OR_C = re.compile('^[RC]') 
    ```

    当然，如果您每次通过循环都使用新的正则表达式，那么这样做是没有意义的......但是如果在上面的代码中，如果您只关心*一个*项目匹配，而不是*哪个*项目匹配，那么您可以使用[此答案](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)展平列表列表（嵌套列表理解语法令人困惑，我不会争论:-)，编译单个正则表达式并将*其*用于文件的每一行。

*   请注意 和[之间](http://docs.python.org/2/library/re.html#search-vs-match)[的区别`re.match``re.search`](http://docs.python.org/2/library/re.html#search-vs-match)。`re.search`可以使用时无需锚定`re.match`。

一般来说，阅读文档！不算太差！您可能会先查看您正在使用的 Python 的各个部分（字符串、列表、字典和正则表达式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T04:55:59.890

将您的内部`for`循环更改为：

```
for key, vals in temp_dict.items():
    if re.search('|'.join(vals)):
        #do stuff here 
```

至于首先使用字典，这完全取决于您是否需要像上面那样通过键组织值。如果您只是想检查给定行中是否存在任何值，最好将`'|'.join()`所有值放在一起并将结果字符串用作搜索表达式。

# android - 从广播接收器类调用时，光标返回零

> ID：14331351
> 
> 赞同：0
> 
> 时间：2013-01-15T04:48:26.373
> 
> 标签：android, database, cursor, broadcast

当我从广播接收器类访问它时，光标值为零，这是我用来从数据库访问值的代码

```
public Cursor select_in(String num)
{
   final Cursor cur= db.rawQuery("SELECT incoming FROM contactlist WHERE number=\""+num+"\"",null);
   return cur;
} 
```

这就是我从广播接收器类调用函数的方式，并且我已经传递了 OnReceive 方法的上下文。

```
openhelper=new OpenHelper(context);

this.db=openhelper.getWritableDatabase();
this.dh=new DataHelper(context);
String num=phonenumber;
Cursor cur=this.dh.select_in(num);  
if (cur.moveToFirst()){

do{
   incoming=cur.getInt(cur.getColumnIndex("incoming"));
}while(cur.moveToNext());
} 
```

我的操作不是很繁重，因为我在广播接收器中使用它时不会在 10 秒内完成，我还关闭了数据库和光标，请任何人建议我如何获得该值。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:48:06.357

```
Cursor c ;
         try{
            c = theDatabase.query("data", new String[] {KEY_CITY, KEY_TIMEZONE, KEY_COUNTRY, KEY_TIMEZONE_DISPLAY_NAME, KEY_TIMEZONE_ID},_ID+" = '"+id+"';", null, null, null, null, null);
         }catch(Exception e){
                Log.e("CLOCK", "Error getting Timezone for "+KEY_CITY+" : "+e.getMessage());
                return null;
        } 
```

# jquery - Stellar JS（视差插件）定位问题

> ID：14331357
> 
> 赞同：0
> 
> 时间：2013-01-15T04:49:15.730
> 
> 标签：jquery, css, position, offset, parallax

我正在使用 stellar js 创建一个视差站点，但在“幻灯片”中定位元素时遇到了严重问题。我的所有元素都与给定的 css 完全对齐；但是，一旦我为图像添加了“数据星比”属性，它们的位置就完全搞砸了。扭曲的偏移没有明显的模式，或者我只是调整css。

这是我的html

```
<body>
  <div id="scrollContainer">
    <div id="scroller">

        <section data-slide="1" class="slide" id="slide1" > <!-- Home Screen -->
            <img class="part" data-stellar-ratio="1.5"  src="images/vi.svg" alt="">
            <img class="part" data-stellar-ratio="2" src="images/nyl.svg" alt="">
            <img class="part" data-stellar-ratio="3"  src="images/vibe.svg" alt="">
            <img class="part" data-stellar-ratio="2.5"  src="images/whitaker.svg" alt="">
            <img class="part" data-stellar-ratio="1"  src="images/red.svg" alt="">
        </section> <!-- END Home --> 
```

每个“section.slide”都设置为“position:relative;” 并且子图像设置为绝对。这是我的CSS

```
 #scroller
    {
    text-align: left;
    width: 960px;
    margin: 0 auto;
    padding:0;
    }
    section.slide { position:relative; width:960px; height: 728px;}
    .part { position:absolute; }

    section#slide1 {background: #f2f2f2; width:100%;}
    section#slide1 .part:first-child  { width:524px; left:-297px; top:715px; } /* vi */
    section#slide1 .part:nth-child(2) { width:780px; left:159px; top:1072px; /*bottom:-344px;*/} /* nyl */
    section#slide1 .part:nth-child(3) { width:395px; left:357px; top: 525px; /*bottom:203px;*/ } /*vibe*/
    section#slide1 .part:nth-child(4) { width:641px; left:599px; top: 590px; /*bottom:138px;*/ } /*whitaker*/
    section#slide1 .part:nth-child(5) { width:424px; left:28px; top: 842px; /*bottom:-114px;*/ } /*red*/ 
```

有谁知道合适的解决方案？谢谢你的帮助！！搞了3个小时，试了也没找到解决办法，网上也没找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:28:52.213

我不记得了，但我想我只是通过添加**Horizo​​ntalScrolling:false**解决了这个问题。

```
$.stellar({
    horizontalScrolling:false
    // other options...
}); 
```

# c - 如何在 C 中编辑 EXIF 标签？

> ID：14331362
> 
> 赞同：3
> 
> 时间：2013-01-15T04:49:47.943
> 
> 标签：c, libexif

我有一个使用 BlackBerry 10 Dev Alpha 拍摄的 JPG 文件。此代码（[此示例](http://libexif.cvs.sourceforge.net/viewvc/libexif/libexif/contrib/examples/photographer.c?view=markup)的略微修改版本）正确打印结果

```
static char* read_tag(ExifData *ed, ExifIfd eid, ExifTag tag){
static char result[1024];
ExifEntry *entry = exif_content_get_entry(ed->ifd[eid], tag);

if (entry){
    char buf[1024];

    exif_entry_get_value(entry, buf, sizeof(buf));
    trim_spaces(buf);

    if (*buf) strcpy(result, buf);
    else strcpy(result, "NULL");
}
else strcpy(result, "NULL");

return result;
} 
```

这意味着输出：

```
printf("Model : %s\n", read_tag(ed, EXIF_IFD_0, EXIF_TAG_MODEL)); 
```

是：

> 型号：BlackBerry 10 Dev Alpha

现在我想知道如何用另一个值替换“BlackBerry 10 Dev Alpha”（EXIF_TAG_MODEL），例如“Nokia 3330”。我已经看了一下[另一个例子](http://libexif.cvs.sourceforge.net/viewvc/libexif/libexif/contrib/examples/write-exif.c?view=markup)。不幸的是，我发现它很难阅读。也许有人有更短/直截了当的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-10T01:25:45.117

libexif 不支持直接加载 JPG。您需要另一个包来读取 JPG 并提取 EXIF 标头（或者您可以自己编写一些东西）。

请注意，在该示例中，它只是创建了一个新的 exif 标头，然后使用 fwrite 将其保存到文件中，然后在此处的这部分代码的末尾附加了没有 exif 信息的原始 JPG 数据：

```
 /* Write JPEG image data, skipping the non-EXIF header */
            if (fwrite(image_jpg+image_data_offset, image_data_len, 1, f) != 1) {
                    fprintf(stderr, "Error writing to file %s\n", FILE_NAME);
                    goto errout;
            } 
```

有一个名为 exifyay 的优秀 Github 项目，它使用 libexif 并有两个额外的库来处理 JPGS 中的读取。这是一个 python 项目，但库的源代码是 C。你可以在[这里找到 exifyay](https://github.com/NarrativeTeam/exifyay)（注意我与 exifyay 或 libexif 没有任何关系）

我刚刚编译了 libexif 并将 exifyay 的源代码合并到 VS2010 项目[中](https://www.dropbox.com/s/xsuqeui9w9gprhl/libexif-0.6.21_CompiledInVS2010%2BExample%2BJPGReaderWorking.7z?dl=0)。文件夹“contrib\examples\LibexifExample”中有一个示例。如果您不喜欢下载随机链接，这里是我工作的代码示例：

```
/*
 * write-exif.c
 *
 * Placed into the public domain by Daniel Fandrich
 *
 * Create a new EXIF data block and write it into a JPEG image file.
 *
 * The JPEG image data used in this example is fixed and is guaranteed not
 * to contain an EXIF tag block already, so it is easy to precompute where
 * in the file the EXIF data should be. In real life, a library like
 * libjpeg (included with the exif command-line tool source code) would
 * be used to write to an existing JPEG file.
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>
#include <libexif/exif-data.h>
#include <libjpeg/jpeg-data.h>
#include <JpegEncoderEXIF/JpegEncoderEXIF.h>

/* byte order to use in the EXIF block */
#define FILE_BYTE_ORDER EXIF_BYTE_ORDER_INTEL

/* comment to write into the EXIF block */
#define FILE_COMMENT "libexif demonstration image"

/* special header required for EXIF_TAG_USER_COMMENT */
#define ASCII_COMMENT "ASCII\0\0\0"

static ExifEntry *create_tag(ExifData *exif, ExifIfd ifd, ExifTag tag, size_t len)
{
    void *buf;
    ExifEntry *entry;

    /* Create a memory allocator to manage this ExifEntry */
    ExifMem *mem = exif_mem_new_default();
    assert(mem != NULL); /* catch an out of memory condition */

    /* Create a new ExifEntry using our allocator */
    entry = exif_entry_new_mem (mem);
    assert(entry != NULL);

    /* Allocate memory to use for holding the tag data */
    buf = exif_mem_alloc(mem, len);
    assert(buf != NULL);

    /* Fill in the entry */
    entry->data = (unsigned char*)buf;
    entry->size = len;
    entry->tag = tag;
    entry->components = len;
    entry->format = EXIF_FORMAT_UNDEFINED;

    /* Attach the ExifEntry to an IFD */
    exif_content_add_entry (exif->ifd[ifd], entry);

    /* The ExifMem and ExifEntry are now owned elsewhere */
    exif_mem_unref(mem);
    exif_entry_unref(entry);

    return entry;
}

int main(int argc, char **argv)
{

    ExifEntry *entry;

    //Input JPG
    char mInputFilename[]="example.jpg";

    //Load JPG
    JPEGData * mJpegData = jpeg_data_new_from_file(mInputFilename);

    //Load Exif data from JPG
    ExifData * mExifData = jpeg_data_get_exif_data(mJpegData);

    //Set some Exif options
    exif_data_set_option(mExifData, EXIF_DATA_OPTION_FOLLOW_SPECIFICATION);
    exif_data_set_data_type(mExifData, EXIF_DATA_TYPE_COMPRESSED);
    exif_data_set_byte_order(mExifData, FILE_BYTE_ORDER);

    entry = create_tag(mExifData, EXIF_IFD_EXIF, EXIF_TAG_USER_COMMENT, 
            sizeof(ASCII_COMMENT) + sizeof(FILE_COMMENT) - 2);
    /* Write the special header needed for a comment tag */
    memcpy(entry->data, ASCII_COMMENT, sizeof(ASCII_COMMENT)-1);
    /* Write the actual comment text, without the trailing NUL character */
    memcpy(entry->data+8, FILE_COMMENT, sizeof(FILE_COMMENT)-1);
    /* create_tag() happens to set the format and components correctly for
     * EXIF_TAG_USER_COMMENT, so there is nothing more to do. */

    /* Create a EXIF_TAG_SUBJECT_AREA tag */
    entry = create_tag(mExifData, EXIF_IFD_EXIF, EXIF_TAG_SUBJECT_AREA,
               4 * exif_format_get_size(EXIF_FORMAT_SHORT));
    entry->format = EXIF_FORMAT_SHORT;
    entry->components = 4;

    //Write back exif data
    jpeg_data_set_exif_data(mJpegData,mExifData);

    //Save to JPG
    jpeg_data_save_file(mJpegData,"test.jpg");

    return 0;
} 
```

# java - 处理搜索中的单引号

> ID：14331364
> 
> 赞同：3
> 
> 时间：2013-01-15T04:50:14.113
> 
> 标签：java, oracle, struts2

如何在 java 中使用单引号创建查询语句。当我用单引号搜索一个单词时，它显示没有要显示的记录

例如我有一个名字 D'costa 我将如何使用 java 搜索它

```
 getSearchByUserSQL.append("SELECT * FROM SID_USERS  ");
    getSearchByUserSQL.append("WHERE lower(FIRSTNAME) like  ? 
          OR lower(LASTNAME) like  ?"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T05:04:46.183

虽然您*可以*尝试手动转义所有字符串，但它的工作量很大而且很困难（不同的数据库可能有不同的转义规则）。作为你不应该这样做的进一步证据 - 看看 apahe commons lang - 他们放弃了对在 2.* 和 3.* 之间转义 SQL 的支持正是出于这个原因。

因此，如果您将查询放入[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)中，则可以使用[PreparedStatement.setParameter(int, String)](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setString%28int,%20java.lang.String%29)插入动态值而不是占位符，JDBC 驱动程序将为您完成所有转义。所以：

```
String myQuery = "SELECT * FROM SID_USERS WHERE lower(FIRSTNAME) like :1 OR lower(LASTNAME) like :2";
PreparesStatement ps = connection.prepareStatement(myQuery);
ps.setParameter(1,"Mickey");
ps.setParameter(2,"Mouse");
results = ps.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:52:40.753

你需要`'`用`\'`. 这`\`是一个转义字符。
您可以使用[String.replace](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)替换`'`为`\'`.

Java中的转义序列：

```
\ b    /* \u0008: backspace BS */
\ t    /* \u0009: horizontal tab HT */
\ n    /* \u000a: linefeed LF */
\ f    /* \u000c: form feed FF */
\ r    /* \u000d: carriage return CR */
\ "    /* \u0022: double quote " */
\ '    /* \u0027: single quote ' */
\ \    /* \u005c: backslash \ */ 
```

[文档链接](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T04:56:39.850

在 Java 中，您需要使用反斜杠转义单引号。而对于 Oracle，您需要用单引号转义单引号。所以`\'\'`应该做的伎俩，所以在PL/SQL中，它变成了`''`，最后变成`'`了。

```
getSearchByUserSQL.append("SELECT * FROM SID_USERS  ");
getSearchByUserSQL.append("WHERE lower(FIRSTNAME) like \'PETE\'\'S\' OR lower(LASTNAME) like \'REPEAT\'\'S\'"); 
```

会发现“pete's”和“repeat's”作为名字。只需将单引号作为文字给出 PL/SQL 字符串中的示例。它被称为“字符串初始”

# windows-phone-8 - windows phone 8 MDM 服务器设置

> ID：14331365
> 
> 赞同：1
> 
> 时间：2013-01-15T04:50:16.960
> 
> 标签：windows-phone-8, mdm

我正在尝试设置一个注册服务器来管理 Windows Phone 设备。我知道[http://enterpriseenrollment.mydomain.com/EnrollmentServer/Discovery.svc](http://enterpriseenrollment.mydomain.com/EnrollmentServer/Discovery.svc)有一个发现服务，它将提供注册服务 URL。

1.  Discovery.svc 的行为是什么？
2.  这是我需要开发的服务吗？
3.  如果是，该服务中应该有什么样的方法？
4.  如何设置注册服务？它的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:47:40.760

Search for "Enterprise Device Management Protocol for Windows Phone" documentation. It is explained there: [Enterprise Device Management Protocol for Windows Phone](http://www.google.co.uk/url?sa=t&rct=j&q=enterprise%20device%20management%20protocol%20for%20windows%20phone&source=web&cd=1&cad=rja&ved=0CEEQFjAA&url=http://download.microsoft.com/download/5/C/4/5C460CE2-3B0F-45CE-805D-1A3D5697639C/WP8_Enterprise_Device_Management_Protocol.pdf&ei=IjP1UOv1KKya1AWq7YHYCA&usg=AFQjCNE7fEvr5RxwEYJWxPA-PqNsKZ5r4A&bvm=bv.41018144,d.d2k)

# android - 如何停止显示在 android 队列中的 Toast 消息

> ID：14331368
> 
> 赞同：2
> 
> 时间：2013-01-15T04:50:28.123
> 
> 标签：android, toast

下面的代码显示了我目前的实现，这里创建了一个 toast 对象并在 onPause() 中关闭。这工作正常，直到没有敬酒的队列。

```
public static long **savedTimeStamp=0**;
    Toast showToastMessage;

if(System.currentTimeMillis()/1000 - savedTimeStamp >= 60 || savedTimeStamp==0){
    showToastMessage=Toast.makeText(this.this, "Toast message", Toast.LENGTH_LONG);
    showToastMessage.show();
    savedTimeStamp=System.currentTimeMillis()/1000;
}

    @Override
             protected void onPause() {
                  super.onPause();
                  if(showToastMessage!=null)
                    {
                    showToastMessage.cancel();
                    }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T05:47:23.313

我发现仅在实例上使用`Toast`效果最好。第一次分配它，然后更新它`setText`并重新显示。然后取消按预期工作，因为只有一个实例要取消。

```
if (showToastMessage != null) {
    showToastMessage.setText("New Toast message");
    showToastMessage.show();
} else {
    showToastMessage = Toast.makeText(showString.this,"First Toast message",Toast.LENGTH_LONG);
    showToastMessage.show();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-26T19:13:18.747

像这样创建一个通用类：

```
public class JToast {
private static Toast toast;
private static int LENGTH_LONG=Toast.LENGTH_LONG;
private static int LENGTH_SHORT=Toast.LENGTH_SHORT;

public static Toast makeText(Context context, String text, int duration) {
    if (toast != null) {
        toast.cancel();
    }
    toast = Toast.makeText(context, text, duration);
    return toast;
}
    public void show(){
        toast.show();
    }
} 
```

您只需致电即可敬酒

```
JToast.makeText(context, "My Toast Message", JToast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:01:04.933

制作自己的单例类，具有 a`handler`和 a `LooperThread`。制作一个类似于`showText(text, duration)`在其中创建可运行文件的方法。

在它的运行方法中，使用您的文本创建一个 Toast 对象，然后发布到处理程序。

Looper 线程将执行代码以查看处理程序是否为空，如果是则创建它。

这样，每次生成 toast 消息时，它都会立即在 UI 上更新，而不是在队列中排队。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:07:52.097

最后的结论是：阙的吐司是停不下来的。所以避免在 que 中使用 toast。

# ruby - 将 marshal_load 与 OpenStruct 一起使用

> ID：14331371
> 
> 赞同：3
> 
> 时间：2013-01-15T04:50:58.707
> 
> 标签：ruby, openstruct

如何使用 OpenStruct 的 marshal_load 实用程序？它似乎没有按预期工作。

文档给出[了这个例子](http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html#method-i-marshal_load)，但它似乎不起作用。

```
require 'ostruct'

event = OpenStruct.new
hash = { 'time' => Time.now, 'title' => 'Birthday Party' }
event.marshal_load(hash)
event.title # => nil 
```

如果不是这种方式，我如何将哈希加载到 OpenStruct 中（不使用构造函数）？

对于上下文：我正在从 YAML 文件中加载哈希并将其加载到 OpenStruct 子类的现有实例中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T05:06:50.470

尝试使用基于符号的哈希。这对我有用。

```
#works.rb

hash = { :time => Time.now, :title => 'Birthday Party' }
event.marshal_load(hash) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T06:39:15.070

该`marshal_load`方法的存在是为了提供对`Marshal.load`.

```
event = OpenStruct.new({ 'time' => Time.now, 'title' => 'Birthday Party' })
binary = Marshal.dump(event)
loaded = Marshal.load(binary) # the OpenStruct 
```

以编程方式将哈希加载到结构中的最简单方法是使用发送：

```
event = OpenStruct.new
hash.each do |key, value|
  event.send("#{key}=", value)
end 
```

# node.js - 如何在 nw.exe（node-webkit）而不是 nodejs.exe 中调用 npm？

> ID：14331376
> 
> 赞同：4
> 
> 时间：2013-01-15T04:51:27.897
> 
> 标签：node.js, npm

我正在使用节点 webkit在 Windows 上使用 node-webkit [https://github.com/rogerwang/node-webkit 。](https://github.com/rogerwang/node-webkit)我想使用 npm 更新包“请求”或任何其他包。我还没有在 Windows 上安装 nodejs。我发现 npm.cmd 需要 nodejs.exe。无论如何我可以用node-webkit而不是nodejs.exe来运行/调用npm吗？node-webkit 提供 nw.exe。

谢谢，问候， Maheshwar

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T16:50:31.167

我们将 npm 称为子进程。我们将 update.bat 写为“npm update package” 现在，npm 会像 windows update 一样自动更新我们的包。

# winforms - 找不到 Windows 应用程序的入口点

> ID：14331379
> 
> 赞同：0
> 
> 时间：2013-01-15T04:51:50.650
> 
> 标签：winforms

如何在 windows 应用程序中找到入口点，因为在 asp.net 应用程序中将有一个 Main 开始执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:54:44.223

在 Program.cs 你会发现 Main() 和 Application.Run(new Form1()); 注意：我认为您在谈论 winforms。

# asp.net-mvc - Kendo UI Grid Ajax 破坏成功

> ID：14331389
> 
> 赞同：2
> 
> 时间：2013-01-15T04:54:04.387
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid

我对 KENDO UI 真的很陌生，我也有点困惑，因为我将 VB.Net 与 Kendo 一起使用并且翻译有点奇怪，所以所有这些都让我们来回答这个问题。

我在 ASP.Net MVC 页面中使用 Kendo Grid，如下所示：

```
 @(Html.Kendo().Grid(Of Portal.ProductList).Name("Grid2") _
    .DataSource(Function(ds) ds.Ajax() _
    .Model(Sub(model) model.Id(Function(p) p.ItemID)) _
    .Read(Function(read) read.Action("GetAjaxItems", "ShoppingCartItems").Data("gridParms")) _
    .Destroy(Function(destroy) destroy.Action("DeleteAjaxItems", "ShoppingCartItems", New With {.ShoppingCartID = ViewData("ShoppingCartID")})) _
                                                ) _
    .Columns(Function(modelItem) modelItem.Bound(Function(p) p.ItemCodeOrdering).Title("Item")) _
    .Columns(Function(modelItem) modelItem.Bound(Function(p) p.Description)) _
    .Columns(Function(modelItem) modelItem.Bound(Function(p) p.Quantity).Title("Quantity").ClientTemplate("<input type='text' style='width:40px;' id='QTY#= ItemID #' value='#= Quantity #' /> &nbsp;<input type='button' id='UPD#= ItemID#' value='Update' onclick='updateItemQty(this)' /> ")) _
    .Columns(Function(modelItem) modelItem.Bound(Function(p) p.Price).Title("Unit Price").ClientTemplate("<div id='price#=ItemID#'>$#=Price.toFixed(2)#</div>")) _
    .Columns(Function(modelItem) modelItem.Bound(Function(p) p.Quantity).Title("Total Price").ClientTemplate("<div id='total#=ItemID#'>$#= (Price * Quantity).toFixed(2) #</div>")) _
    .Columns(Function(modelItem) modelItem.Bound(Function(p) p.ItemID)) _
    .Columns(Function(modelItem) modelItem.Command(Sub(cmd) cmd.Destroy()))
    ) 
```

我正在从 Destroy Ajax 调用返回一个值。我需要能够检索该值并使用来自 AJAX 调用的 Success 事件的订单总数更新页面上的另一个 div，但我无法确定如何拦截此事件。

本质上，此网格显示已订购的订单项，并且在页面底部有一个订单总数。当我们从订单上的已删除项目返回时，我想从控制器返回的值中更新总数。我希望这是有道理的...

控制器

```
 <HttpPost()>
    Function DeleteAjaxItems(<DataSourceRequest()> request As DataSourceRequest, Optional ShoppingCartID As Integer = 0, Optional ItemID As Integer = 0) As ActionResult
        Dim sci = db.ShoppingCartItems.Where(Function(c) c.ShoppingCartID = ShoppingCartID And c.ItemID = ItemID)

        If Not IsNothing(sci.FirstOrDefault) Then
            db.ShoppingCartItems.Remove(sci.FirstOrDefault)
            db.SaveChanges()
        End If

        Dim ShoppingCartItems = db.ShoppingCartItems.Include(Function(s) s.ShoppingCart).Where(Function(s) s.ShoppingCartID = ShoppingCartID)
        Dim ShoppingCartItemsTotal = ShoppingCartItems.Sum(Function(item) item.DealerPrice * item.Quantity)

        Return New JsonResult With {.Data = Format(ShoppingCartItemsTotal, "c")}
        'Return Nothing

    End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T07:22:08.683

您可以使用[requestEnd](http://docs.kendoui.com/api/framework/datasource#requestend)事件。返回服务器响应时引发。

# zend-studio - Zend Studio 复制/粘贴性能低下

> ID：14331390
> 
> 赞同：7
> 
> 时间：2013-01-15T04:54:06.320
> 
> 标签：zend-studio

我对 Zend Studio 9.03 有一个大问题。我有 Zend 框架 1 项目，当我尝试复制和粘贴一些代码时，它会冻结 10-20 秒。该项目与 SVN 同步。我能做些什么来消除这个问题。我正在研究 Phenom - x6 1055，8Gb RAM，Windows 7x64 专业版。

我试图通过 Google 和 Zend 论坛查找此问题，但没有成功。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:33:13.840

最后，我排除了 JS 支持，我的 Zend Studio 又开始正常工作了。我有多个 JS 库（extJs、jQuery 等），并且每次我更改代码中的某些内容时，Zend Studio 都忙于检查 js 的一致性。

说明：在 Project Explorer 视图中，右键单击要启用 JavaScript 支持的项目并选择 Configure | 删除 JavaScript 支持。

# ios - iOS - 防止对象释放

> ID：14331397
> 
> 赞同：0
> 
> 时间：2013-01-15T04:54:51.390
> 
> 标签：ios, objective-c, object, memory-management

我有一个对象，类似于`UIAlertView`显示带有自定义消息和标题的对话框。到目前为止，以下代码用于显示对话框：

```
DialogBox *dialog = [[DialogBox alloc] initWithMessage:@"Hello" delegate:self];
[dialog showDialog]; 
```

但是，当我点击对话框上的“是”或“否”按钮时，应用程序崩溃，因为`DialogBox`实例已被释放。

将 *dialog 实例变量设为属性可以解决此问题，但这对我不起作用，因为我希望能够随机创建`DialogBox`实例变量。

有没有办法让 *dialog 实例变量“活着”，直到我希望它真正从视图中消失？

任何帮助将不胜感激。

```
Crash log below:

Exception Type:  EXC_BAD_ACCESS (SIGSEGV) Exception Codes: KERN_INVALID_ADDRESS at 0x000000005f7b5e7d

VM Regions Near 0x5f7b5e7d:
    MALLOC_TINY            000000000ea00000-000000000eb00000 [ 1024K] rw-/rwx SM=PRV  
--> 
    __TEXT                 000000008fea8000-000000008fedb000 [  204K] r-x/rwx SM=COW  /usr/lib/dyld

Application Specific Information:
objc_msgSend() selector name: performSelector:withObject:withObject:
iPhone Simulator 369.2, iPhone OS 6.1 (iPhone/10B5126b)

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x010e60b0 objc_msgSend + 36
1   UIKit                           0x0001c2c0 -[UIApplication sendAction:to:from:forEvent:] + 96
2   UIKit                           0x0001c258 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
3   UIKit                           0x000dd021 -[UIControl sendAction:to:forEvent:] + 66
4   UIKit                           0x000dd57f -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
5   UIKit                           0x000dc6e8 -[UIControl touchesEnded:withEvent:] + 546
6   UIKit                           0x0004bcef -[UIWindow _sendTouchesForEvent:] + 846
7   UIKit                           0x0004bf02 -[UIWindow sendEvent:] + 273
8   UIKit                           0x00029d4a -[UIApplication sendEvent:] + 436
9   UIKit                           0x0001b698 _UIApplicationHandleEvent + 9874
10  GraphicsServices                0x01bf2df9 _PurpleEventCallback + 339
11  GraphicsServices                0x01bf2ad0 PurpleEventCallback + 46
12  CoreFoundation                  0x01c0cbf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
13  CoreFoundation                  0x01c0c962 __CFRunLoopDoSource1 + 146
14  CoreFoundation                  0x01c3dbb6 __CFRunLoopRun + 2118
15  CoreFoundation                  0x01c3cf44 CFRunLoopRunSpecific + 276
16  CoreFoundation                  0x01c3ce1b CFRunLoopRunInMode + 123
17  GraphicsServices                0x01bf17e3 GSEventRunModal + 88
18  GraphicsServices                0x01bf1668 GSEventRun + 104
19  UIKit                           0x00018ffc UIApplicationMain + 1211
20  DialogApp                       0x0000257d main + 141 (main.m:16)
21  DialogApp                       0x000024a5 start + 53

Thread 1:
0   libsystem_kernel.dylib          0x998580ee __workq_kernreturn + 10
1   libsystem_c.dylib               0x9214904c _pthread_workq_return + 45
2   libsystem_c.dylib               0x92148e19 _pthread_wqthread + 448
3   libsystem_c.dylib               0x92130cca start_wqthread + 30

Thread 2:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x998589ca kevent64 + 10
1   libdispatch.dylib               0x049fec2b _dispatch_mgr_invoke + 863
2   libdispatch.dylib               0x049fe8cc _dispatch_mgr_thread + 61

Thread 3:
0   libsystem_kernel.dylib          0x998580ee __workq_kernreturn + 10
1   libsystem_c.dylib               0x9214904c _pthread_workq_return + 45
2   libsystem_c.dylib               0x92148e19 _pthread_wqthread + 448
3   libsystem_c.dylib               0x92130cca start_wqthread + 30

Thread 4:
0   libsystem_kernel.dylib          0x998580ee __workq_kernreturn + 10
1   libsystem_c.dylib               0x9214904c _pthread_workq_return + 45
2   libsystem_c.dylib               0x92148e19 _pthread_wqthread + 448
3   libsystem_c.dylib               0x92130cca start_wqthread + 30

Thread 5:: WebThread
0   libsystem_kernel.dylib          0x998557d2 mach_msg_trap + 10
1   libsystem_kernel.dylib          0x99854cb0 mach_msg + 68
2   CoreFoundation                  0x01c38a49 __CFRunLoopServiceMachPort + 185
3   CoreFoundation                  0x01c3d8d4 __CFRunLoopRun + 1380
4   CoreFoundation                  0x01c3cf44 CFRunLoopRunSpecific + 276
5   CoreFoundation                  0x01c3ce1b CFRunLoopRunInMode + 123
6   WebCore                         0x0356dc50 RunWebThread(void*) + 608
7   libsystem_c.dylib               0x92146557 _pthread_start + 344
8   libsystem_c.dylib               0x92130cee thread_start + 34

Thread 0 crashed with X86 Thread State (32-bit):
  eax: 0x5f7b5e7d  ebx: 0x0001c26e  ecx: 0x00cb6b07  edx: 0x00005240
  edi: 0x012cfd4f  esi: 0x694c534e  ebp: 0xbfffe108  esp: 0xbfffe0d4
   ss: 0x00000023  efl: 0x00010206  eip: 0x010e60b0   cs: 0x0000001b
   ds: 0x00000023   es: 0x00000023   fs: 0x00000000   gs: 0x0000000f
  cr2: 0x5f7b5e7d
Logical CPU: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:02:06.837

`self`这是您希望保留引用以防止解除分配的（相对罕见的）情况之一。这将使您的对话框“触发并忘记”而不会被释放。

在您的`DialogBox`类中，添加一个**强**属性（它应该是私有属性），您可以在其中存储引用。让我们称之为`selfProperty`。

然后，当你初始化你的类时，`self.selfProperty = self;`当你想被释放时使用并将它设置为 nil 。

# ios - Picture slideshow with swipe and page control

> ID：14331399
> 
> 赞同：2
> 
> 时间：2013-01-15T04:55:19.330
> 
> 标签：ios, iphone, uiscrollview

I'm creating a "how-to"view where I show the user 5-6 pictures on how to use the app. I want it to be like a container inside the real view. Also I want it to have a transition with swipe and a page control. Something like the AppStore has on the pictures with screenshots of an app if you know what I mean?

Is there an easy way to do this? All help highly appreciated!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T05:19:18.067

here a simple code, but you can customize it with loop, animation or what you want to do ;) ...

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //init scollview
    scrollView = [[UIScrollView alloc] initWithFrame:myBounds];
    scrollView.delegate = self;
    scrollView.pagingEnabled = YES;

    //Ajout des covers classiques
    for (int i = 0; i < [myCovers count]; i++) {
        CGRect frame;
        frame.origin.x = scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = scrollView.frame.size;

        //Vue 1
        UIView *subview1 = [[UIView alloc] initWithFrame:frame];
        [subview1 addSubview:[myCovers objectAtIndex:i]];
        [scrollView addSubview:subview1];
    }

    //Content Size Scrollview
    scrollViewBack.contentSize = CGSizeMake(scrollViewBack.frame.size.width * ([myCovers count]), scrollViewBack.frame.size.height);
    [self.view addSubview:scrollViewBack];
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width*([myCovers count]), scrollView.frame.size.height);
    [self.view addSubview:scrollView];

    //Page Control
    pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(0, scrollView.frame.size.height - PAGECONTROL_HEIGTH - myBaseline, scrollView.frame.size.width, PAGECONTROL_HEIGTH)];
    pageControl.numberOfPages = [myCovers count];
    [self.view addSubview:pageControl];
}

#pragma mark -
#pragma mark Params setting

- (void) setObjects:(NSArray *)covers {
    myCovers = [[NSArray alloc] initWithArray:covers];
}

#pragma mark -
#pragma mark Scrollview delegate

- (void)scrollViewDidEndDecelerating:(UIScrollView *)sender {
    CGFloat pageWidth = scrollView.frame.size.width;
    NSInteger offsetLooping = 1;
    int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + offsetLooping;
    pageControl.currentPage = page % [myCovers count];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:59:12.870

1.  You can create `UIImageView` for the 'n' number of images you have.
2.  Add this images on `UIScrollView`. Keep the size of your scrollview same as your `UIImageView` size.
3.  **Most important thing, enable the Paging property of UIScrollView**

It should give you the look same as AppStore screen shot screen.

# php - PHP代码添加两个数字，只要我在第二个字段中键入第二个数字，结果就会填充在第三个字段中

> ID：14331400
> 
> 赞同：0
> 
> 时间：2013-01-15T04:55:21.143
> 
> 标签：php

PHP代码添加两个数字，只要我在第二个字段中键入第二个数字，结果就会填充在第三个字段中。

可以使用 php 完成，还是我们使用 Ajax 或其他编程语言。

如果我能得到这个答案会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:01:15.197

使用 jQuery

```
$('#field2').change(function (){
   if(!isNaN($('#field1').val()) && !isNaN($('#field2').val()))
   {
         $('#field3').val($('#field1').val()+$('#field2').val())
   }
}); 
```

其中 field1、field2 和 field3 是字段的 id。只有在字段 1 和字段 2 中输入的值是数字时，它才会将加法放在字段 3 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:08:32.807

Javascript 就足够了

```
<script type="text/javascript">
function Adder()
{
var a= parseInt(document.frm.A.value);
var b = parseInt(document.frm.B.value);
var result=a+b;
document.frm.Result.value=result;
}
</script>
<form name="frm">
<input id="A" name="A" type="Text" onchange="Adder()" >
<input id="B" name="B" type="Text" onchange="Adder()" >
<input id="Result" name="Result" type="Text" >
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:57:49.777

你可以使用javascript来做到这一点。

```
Script :

function add(){
var num1  = document.getElementById("num1").value;
var num2  = document.getElementById("num2").value;

sum       = num1+num2;
document.getElementById("sum").value = sum;
}

HTML:

<input type="text" id="num1" name="num1" />
<input type="text" id="num2" name="num2" onchange="add();" />
<input type="text" id="sum" name="sum" /> 
```

注意：此代码未经测试，请进行相关更改

# ruby - 无法覆盖派生类中的基类方法

> ID：14331401
> 
> 赞同：0
> 
> 时间：2013-01-15T04:55:22.113
> 
> 标签：ruby

这是我拥有的 Ruby 类：

```
class MyBase
  class << self
     def static_method1
        @@method1_var ||= "I'm a  base static method1"
     end

     def static_method1=(value)
        @@method1_var = value
     end

     def static_method2
        @@method2_var ||= "I'm a base static method2"
     end

     def static_method2=(value)
        @@method2_var = value
     end
  end

  def method3
    MyBase::static_method1
  end
end

class MyChild1 < MyBase
end

class MyChild2 < MyBase
  class << self
     def static_method1
        @@method1_var ||= "I'm a child static method1"
     end
  end
end

c1 = MyChild1.new
puts c1.method3 #"I'm a  base static method1" - correct

c2 = MyChild2.new
puts c2.method3  # "I'm a  base static method1" - incorrect. I want to get "I'm a child static method1" 
```

我知道`attr_accessor`和模块，但我不能在这里使用它们，因为我希望它们在`MyBase class`. 我想覆盖`MyBase.static_method1`.`MyChild2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:02:46.910

问题是 method3 总是显式地调用基类上的方法。将其更改为：

```
def method3
  self.class.static_method1
end 
```

之后，考虑不使用`@@`.

`@@`in ruby​​ 是非常违反直觉的，并且很少意味着你认为它的意思。

问题`@@`在于它在*所有*继承的类和基类之间共享。[有关说明，请参阅此博客文章](http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)。

# java - 此功能是否与 JTable 模型一起正常工作？

> ID：14331402
> 
> 赞同：0
> 
> 时间：2013-01-15T04:55:33.120
> 
> 标签：java, swing, jtable

我有一个程序，它与 JTable 和一些其他 Swing 元素一起工作，以便显示和建模游戏的后端。该函数应该选择第一行和最后一行，并将它们分别存储在索引 0 和 1 的数组行中。感谢您的帮助，并希望了解这里发生了什么。

```
 public int[] getRows(JTable table) {    
    rows = new int [2];
    rows[0] = table.getSelectedRow();
    rowCount = table.getSelectedRowCount() - 1;
    rows[1] = rows[0] + rowCount;
    return rows;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:03:22.013

[JTable.getSelectedRows()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#getSelectedRows%28%29)在这种情况下可以为您提供帮助。只需从它返回的数组中获取第一个和最后一个索引。请注意，它可以返回一个空数组。

# objective-c - UIDatepicker 返回错误值

> ID：14331404
> 
> 赞同：1
> 
> 时间：2013-01-15T04:55:45.413
> 
> 标签：objective-c, cocoa-touch, uidatepicker

我的 UIDatepicker 返回一个错误的值，我不明白为什么。见图片。
它显示**0 hours**和**1 min**但标签显示**-1 hour**。
我找不到要设置的时区。我希望我的应用程序使用它所在机器的时区。

我填写标签的操作：

```
- (IBAction)datePickerDateChanged:(id)sender {
   [_timerOutput setText:[NSString stringWithFormat:@"%@", [_timePicker date]]];
} 
```

我在德语系统上，我将 UIDatepicker 设置为 German 但它仍然显示**hours**和**mins**。

知道我在做什么错吗？

罗纳德

![在此处输入图像描述](../Images/80bb1d7623959604748eb750cbe5dc71.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:01:20.733

这是 GMT 冬季时间 (== UTC) 中的日期和时间。使用 NSDateFormatter 来调整它，它应该默认使用默认时区。你也可以设置另一个。

尝试

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[dateFormatter setTimeStyle:NSDateFormatterMediumStyle];
NSString *myDateString = [dateFormatter stringFromDate: [_timePicker date]];
NSLog(@"%@", myDateString); 
```

* * *

*一些理论：*

NSDate 对象并不代表我们在日常意义上所说的日期，例如一天或范围内的时间，或者其他任何东西。它代表一个时间点。具有亚毫秒精度。它通过计算时间间隔来做到这一点。从某个时代开始。根据定义，它将UTC时区作为参考。
内部计数器将始终在 UTC 上下文中计数，正确显示它是您的责任。但是 NSDateFormatter 对此有很大帮助。
顺便说一句：您显示的时间是 UTC 时间格式的时间也显示为`+0000`，因为它与 UTC 有 00 小时和 00 分钟的时区偏移。

# java - 为什么在 ubuntu 上的 java 安装中找不到 javaw？

> ID：14331406
> 
> 赞同：21
> 
> 时间：2013-01-15T04:55:54.240
> 
> 标签：java, ubuntu

我尝试使用启动程序`javaw demo`，但收到一条错误消息提示我找不到命令'javaw'。我检查了我的 bin 文件夹，但没有找到 javaw。可能是什么原因？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-15T05:33:27.740

该`javaw`实用程序在 Linux 上不可用或不需要。改用就好`java`了。

***解释：***

*   `java`在 Windows 上，和之间的区别在于`javaw`启动`java`新的 Windows 控制台`javaw`而不启动。

*   在 Linux 上，该`java`命令不会启动新的控制台，因此不需要`javaw`变体。

# mysql - 连接 N-1 和 NN 的 mySQL 嵌套

> ID：14331407
> 
> 赞同：3
> 
> 时间：2013-01-15T04:55:54.570
> 
> 标签：mysql, join, syntax, left-join

我正在尝试加入 4 个表，两个 1-N 表和一个通过 NN 表。奇怪的是 mySql 似乎不喜欢我的一种语法。有人知道这是由于 myOwn 限制还是 mySql 造成的吗？

这不起作用：

```
SELECT *
FROM tableOne t1 JOIN tableTwo t2 
    LEFT OUTER JOIN N_N_tableThree t3 
            JOIN tableFour t4 ON t4.id = t3.fk_tableFour
        ON t2.id = t3.fk_tableTwo
    ON t2.id = t1.fk_tableTwo 
```

虽然这确实有效

```
SELECT *
FROM tableOne t1,
tableTwo t2 LEFT OUTER JOIN N_N_tableThree t3 
        JOIN tableFour t4 ON t4.id = t3.tableFour_id
    ON t2.id = t3.tableTwo_id
WHERE t2.id = t1.tableTwo_id 
```

任何人的线索？

谢谢回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T05:01:23.897

请改用此语法：

```
SELECT *
FROM tableOne            t1 
INNER JOIN tableTwo      t2 ON t2.id = t1.fk_tableTwo
LEFT JOIN N_N_tableThree t3 ON t2.id = t3.fk_tableTwo
INNER JOIN tableFour     t4 ON t4.id = t3.fk_tableFour; 
```

这将等效于第二个有效的查询。

因为`WHERE t2.id = t1.tableTwo_id`第二个查询中的实际上是`INNER JOIN`^(**1**)`INNER JOIN tableTwo t2 ON t2.id = t1.fk_tableTwo` ，这与我所做的相同。这是旧的`JOIN`语法，尽量避免它并像我一样使用 ANSI SQL-92 语法。有关更多信息，请参阅：

*   [要改掉的坏习惯：使用老式的 JOIN。](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)

您发布的查询不起作用，因为它不是[`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)MySQL 中的正确语法，您`ON`在彼此之后有三个子句：

```
...
ON t4.id = t3.fk_tableFour
ON t2.id = t3.fk_tableTwo
ON t2.id = t1.fk_tableTwo 
```

每个都`JOIN`应该有直接`ON`在后面的子句中指定的连接条件`JOIN`，如果没有，它将是交叉连接^(**2**)。但不是`ON`你做的方式 multiple 。

[SQL 小提琴演示](http://sqlfiddle.com/#!2/23438/2)

* * *

^(**1：不要与使用 of**^(而不是)^(混淆，它们是相同的，默认是内部连接，我只是为了可读性而使用。此外，与关键字相同，我将其省略，因为它在使用时是可选的or`INNER JOIN``JOIN``JOIN``OUTER``LEFT JOIN``LEFT``RIGHT`))

^(**2：**^(您将`JOIN`在参考页面中找到 MySQL 中语法的其他变体，例如`JOIN tablename`无连接条件等。您可能需要阅读它们。))

# c - 在 C 中传递 char 指针

> ID：14331411
> 
> 赞同：11
> 
> 时间：2013-01-15T04:56:39.250
> 
> 标签：c, pointers, char

好的，所以我试图将 char 指针传递给另一个函数。我可以用一个 char 数组来做到这一点，但不能用一个 char 指针来做到这一点。问题是我不知道它的大小，所以我不能在`main()`函数中声明任何关于大小的东西。

```
#include <stdio.h>

void ptrch ( char * point) {
    point = "asd";
}

int main() {
    char * point;
    ptrch(point);
    printf("%s\n", point);
    return 0;
} 
```

但是，这不起作用，这两个起作用：

1)

```
#include <stdio.h>

int main() {
    char * point;
    point = "asd";
    printf("%s\n", point);
    return 0;
} 
```

2)

```
#include <stdio.h>
#include <string.h>

void ptrch ( char * point) {
    strcpy(point, "asd");
}

int main() {
    char point[10];
    ptrch(point);
    printf("%s\n", point);
    return 0;
} 
```

所以我试图了解我的问题的原因和可能的解决方案

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-15T05:02:06.010

这应该可以工作，因为传递了指向 char 指针的指针。因此，此后对指针的任何更改都将在外部看到。

```
void ptrch ( char ** point) {
    *point = "asd";
}

int main() {
    char * point;
    ptrch(&point);
    printf("%s\n", point);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T05:00:13.943

```
void ptrch ( char * point) {
    point = "asd";
} 
```

您的指针**按值传递**，此代码**复制，然后覆盖副本**。所以原来的指针是不变的。

PS要注意的是，当你创建一个字符串文字时，任何**修改**`point = "blah"`的尝试都是**未定义的行为**，所以它应该是******`const char *`******

 ******修复**-像@Hassan TM 那样将指针传递给**指针，或****返回指针**如下。

```
const char *ptrch () {
    return "asd";
}

...
const char* point = ptrch(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T05:01:16.597

这里：

`int main() { char * point; ptrch(point);`

你是`point`按价值传递的。然后，`ptrch`将它自己的本地副本设置`point`为指向`"asd"`，而`point`in`main`保持不变。

一种解决方案是将指针传递给`main`'s `point`：

`void ptrch(char **pp) { *pp = "asd"; return; }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T05:02:07.273

如果您在函数中更改指针的值，它将仅在该一次函数调用中保持更改。不要用指针弄乱你的头并尝试：

```
void func(int i){
  i=5;
}
int main(){
  int i=0;
  func(i);
  printf("%d\n",i);
  return 0;
} 
```

与您的指针相同。您**不会**更改它指向的地址。

如果给一个按值传递的变量赋值，函数外的变量将保持不变。您可以通过指针（**指向指针**）传递它并通过取消引用来更改它，它与 int 相同 - 在这种情况下，类型是 int 还是 char * 都没有关系。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-13T06:30:44.920

首先声明函数......像这样

```
 #include<stdio.h>
 void function_call(char s) 
```

接下来写主要代码.....

```
void main()
{
    void (*pnt)(char);  //  pointer function declaration....
    pnt=&function_call;  //    assign address of function
    (*pnt)('b');   //   call funtion....
} 
```****

# tfs - TFS 反向集成回主

> ID：14331414
> 
> 赞同：3
> 
> 时间：2013-01-15T04:56:46.643
> 
> 标签：tfs, branching-and-merging

我有从主分支分叉的开发分支。

我可以将 Development 分支合并回 Main 以便 Main 分支代码等于 Development 分支吗？

对此最安全可靠的解决方案是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T13:41:27.453

我发现执行此操作的最简单方法是使用 Visual Studio 和源代码管理资源管理器进行合并。

在源代码管理资源管理器中，右键单击您的开发分支并选择**分支和合并 > 合并**

在**目标分支**下拉列表中，选择您的主干（“主干”）作为目标。如果您最初从 Main 分支，这可能是默认选择。

有两种选择：

1.  **特定版本的所有更改**：您可以根据修订进行选择，然后一举将其合并到该修订。如果您有很多更改，这可以为您节省一些时间，但如果 Main 中有很多更改，则在解决冲突方面风险更大。
2.  **选定的变更集**：您选择单个或一组变更集以合并回来，然后重复此过程，直到您合并回您需要的内容。风险较小的选择，但更耗时。我个人更喜欢这种方法，这样我就可以看到更改返回到主干中，并知道更改后会发生什么。

TFS 会在您合并时指示您是否存在合并冲突。当您在分支到开发后更改主干中的某些内容时，就会发生这种情况。如果您在开发中所做的更改之一与您在主干中所做的更改发生冲突，您将有机会在 Visual Studio 中解决此问题。

如果您没有任何冲突，您的开发更改将移动到主干中，并简单地与您已经拥有的更改合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:47:43.440

*我承认他们将主干合并到分支的一个工作地点，但它不应该以这种方式工作。*

普遍接受的方法是将分支合并回主干。

听起来您正在主干中工作（“我可以在主干中创建一些额外的文件夹或其他文件”）并且想要合并到分支中。

我建议以标准方式进行：仅在合并回主干的分支中工作，从不直接在主干中编码。

# android - android设置预览方向

> ID：14331419
> 
> 赞同：0
> 
> 时间：2013-01-15T04:57:38.403
> 
> 标签：android, camera

我的问题是关于android中的相机，我想知道我是否可以设置相机预览的方向，我怎么能在`android 1.6+`版本中设置它。谢谢你的回答。

编辑：感谢您的回答，现在我想知道如何根据其方向消息保存图像，在我得到字节 [] 后，我想实现应用程序可以保存 jpg。图像适合它的长度和高度。现在我直接在文件中写入字节 [] 并且大小不正确。如果我使用垂直模式，那么图像应该更高，但它没有。有人可以帮我吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:26:39.133

您可以使用：

```
preview.set("orientation", "portrait");
preview.set("rotation",90); 
```

和

```
preview.set("orientation", "landscape");          
preview.set("rotation", 90); 
```

请参阅此线程以获取更详细的答案：

[如何正确设置 Android 相机方向？](https://stackoverflow.com/questions/4645960/how-to-set-android-camera-orientation-properly)

# qt - QItemDelegate：绘制一个不需要的 QCheckBox

> ID：14331422
> 
> 赞同：0
> 
> 时间：2013-01-15T04:57:44.303
> 
> 标签：qt, qitemdelegate, qabstracttablemodel

我有一个可编辑的模型，它继承了 QAbstractTableModel。也有一个自定义委托来配合它。这是我的第一个可编辑模型，我想我遗漏了一些东西。我非常关注诺基亚的示例。我的模型告诉代理数据可以通过 flags() 进行编辑。当我这样做时，它会在单元格中绘制一个 QSpinBox。

底层模型是一个简单的 std::map。关键是天数，值是速率。
通常，在任何可编辑单元格中绘制的是 QCheckBox，但被幻影出来，然后是数据。如果我双击该值，我会看到编辑器，它恰好是一个基于 QDoubleSpinbox 的自定义小部件。

```
Qt::ItemFlags my_model_t::flags( const QModelIndex& index ) const
{
    if ( !index.isValid() ) {
        return Qt::NoItemFlags;
    }

    if ( index.column() == col_rates ) {
        return QAbstractItemModel::flags( index ) | Qt::ItemIsEditable;
    }

    return QAbstractItemModel::flags( index );
}

QVariant my_model_t::data( const QModelIndex& index, int role ) const
{
    if ( !index.isValid() ) {
        return QVariant();
    }

    if ( role == Qt::DisplayRole || Qt::EditRole ) {

        if ( static_cast<int>( rates.size() ) <= index.row() ) {
            return QVariant();
        }

        int day = vec[index.row()];

        if ( index.column() == col_days ) {
            return day;
        } else if ( index.column() == col_rates ) {

            std::map<int, double>::const_iterator it = rates.find( day );
            if ( it != rates.end() ) {
                return (*it).second;
            }
        }
    }

    return QVariant();
}

QWidget* my_delegate_t::createEditor( QWidget* parent, const QStyleOptionViewItem& /*option*/, const QModelIndex& index ) const
{
    gui_spinbox* editor = new gui_spinbox( parent );

    if ( index.column() == col_rate ) {
        const my_model_t* model = static_cast<my_model_t*>( index.model() );
    }

    return editor;
}

void my_delegate_t::setEditorData( QWidget* editor, const QModelIndex& index ) const
{
    double value    = index.model()->data( index, Qt::EditRole ).toDouble();
    gui_spinbox* spin_box   = static_cast<gui_spinbox*>( editor );
    if ( spin_box ) {
        spin_box->setValue( value );
    }
}

void my_delegate_t::setModelData( QWidget* editor, QAbstractItemModel* model, const QModelIndex& index ) const
{
    gui_spinbox* spin_box   = static_cast<gui_spinbox*>( editor );
    if ( spin_box ) {
        double value = spin_box->value();
        model->setData( index, value, Qt::EditRole );
    }
}

void my_delegate_t::updateEditorGemoetry( QWidget* editor, const QStyleOptionViewItem& option, const QModelIndex& /*index*/ ) const
{
    editor->setGeometry( option.rect );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:14:08.610

我不太确定你的问题。你想画一个`QCheckBox`吗？

在您的`createEditor`方法中，您创建了一个编辑器使用`QSpinbox`，但在*标题*中您说它是不需要的。

`QCheckBox`如果您想在双击项目时显示基于 an 的编辑器，您只需`checkBox`在`createEditor`方法中创建 a 并使用`checkBox`in`setEditorData`和`setModelData`。

# java - 当子类覆盖受保护的成员时，成员就可以使用 . 操作员？

> ID：14331425
> 
> 赞同：-1
> 
> 时间：2013-01-15T04:58:36.803
> 
> 标签：java, core

`package xxx.yyy;`

 ````
public class ParentClass {
    protected void doPrint(){
        System.out.println("Parent.....");
    }
}

package aaa.bbb;

import cathy.inner.ParentClass;

public class Child extends ParentClass {        
    public void getName(){
        System.out.println("Child....");
    }
} 
```` 

`包 aaa.bbb 中的客户端不能使用 new Child().doPrint()。但是如果孩子覆盖，那么客户端可以使用 new Child().doPrint()。这对我来说似乎很奇怪，因为在覆盖期间我们无法将访问修饰符更改为更具限制性，但这种情况下继承的方法似乎是私有的。`

 `为什么以这种方式实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:18:38.727

`Super`类方法的访问修饰符 is并且`protected`它声明方法可以使用 in`class`和. `package``subclass`

*所以它在子类的包中是不可访问的*。

`subclass`当您使用访问修饰符覆盖该特定方法时，`protected`它将可以访问，因为`protected`方法可以在 same 下访问`package`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:05:06.813

受保护的将只允许子类访问方法......这并不奇怪，它是java具有的一种限制......`

# android - Android 编程：通过 AsyncTask 遇到 TCP 问题

> ID：14331427
> 
> 赞同：0
> 
> 时间：2013-01-15T04:58:50.580
> 
> 标签：android, tcp, android-asynctask

我遇到的这个问题是我的程序只能通过 AsyncTask 通过 TCP 发送我的字符串一次。我已经读过 AsyncTask 只能运行一次，并且在它运行后应该被释放，如果我需要发送另一个命令，我应该创建另一个线程实例并使用新实例来发送新命令。但是，无论出于何种原因，当我尝试创建 AsyncTask 的第二个实例时，什么都没有发生。有一点值得注意。我在 onPostExecute 例程中添加了一个日志命令，但我从未看到日志消息。

我的 Android 清单文件中有以下内容：

```
<uses-permission android:name="android.permission.INTERNET/> 
```

这是调用异步任务的主活动线程中的代码。

```
public void SendCommand(int DeviceID, String DeviceName, String CommandName)
{
    //Get the IP address and the port in order to communicate with the device
    DatabaseHelper dbHelper = new DatabaseHelper(MainActivity.this);
    SQLiteDatabase db = dbHelper.getWritableDatabase();
    String dbQuery = "SELECT * FROM " + dbHelper.System_Table + ", " + dbHelper.Devices_Table + ", " +
            dbHelper.Device_Commands_Table + " WHERE " + dbHelper.System_Table + "." + dbHelper.Attribute_Device_ID +
            " = " + String.valueOf(DeviceID) + " AND " + dbHelper.Devices_Table + "." + dbHelper.Attribute_Device_ID +
            " = " + String.valueOf(DeviceID) + " AND " + dbHelper.Device_Commands_Table + "." + dbHelper.Attribute_Device_ID +
            " = " + String.valueOf(DeviceID) + ";";
    Cursor c = db.rawQuery(dbQuery, null);
    String IPAddress = "";
    int Port = 0;
    String DeviceCommand = "";
    if (c.getCount() > 0)
    {
        int Finished = 0;
        while (c.moveToNext() && Finished == 0)
        {
            int iColumnDeviceName = c.getColumnIndex(dbHelper.Attribute_Device_Name);
            int iColumnDeviceCommandName = c.getColumnIndex(dbHelper.Attribute_Command_Name);
            final String CheckDeviceName = c.getString(iColumnDeviceName);
            final String CheckCommandName = c.getString(iColumnDeviceCommandName);
            if (DeviceName.equals(CheckDeviceName) && CheckCommandName.equals(CommandName))
            {
                Finished = 1;
                int iColumnIPAddress = c.getColumnIndex(dbHelper.Attribute_Device_IP);
                int iColumnPort = c.getColumnIndex(dbHelper.Attribute_Device_Port);
                int iColumnDeviceCommandString = c.getColumnIndex(dbHelper.Attribute_Command_String);
                IPAddress = c.getString(iColumnIPAddress);
                Port = c.getInt(iColumnPort);
                DeviceCommand = c.getString(iColumnDeviceCommandString);
                DeviceCommand = DeviceCommand.replace("<CR>", "\r");
                Log.d("Device Command To Send", DeviceCommand);
            }
        }
        c.close();
        dbHelper.close();
        ArrayList<String> passing = new ArrayList<String>();
        ArrayList<String> result = new ArrayList<String>();
        passing.add(IPAddress);
        passing.add(String.valueOf(Port));
        passing.add(DeviceCommand);
        SendCommand SC = new SendCommand();
        SC.execute(passing, result);
    }
} 
```

这是上述例程创建实例并执行的单独类文件。

```
public class SendCommand extends AsyncTask<ArrayList<String>, Void, ArrayList<String>>
{
    @Override
    protected void onPreExecute()
    {
        //progress bar
    }

    @Override
    protected ArrayList<String> doInBackground(ArrayList<String>... passing)
    {
        Log.d("Async Task", "Started to send command.");
        //Get the connection info and command to send from the caller
        String Data = passing[0].toString();
        int StopAt = Data.indexOf(",");
        String IPAddress = Data.toString().substring(1, StopAt);
        Data = Data.replace("[" + IPAddress + ", ", "");
        StopAt = Data.indexOf(",");
        int Port = Integer.parseInt(Data.toString().substring(0, StopAt));
        Data = Data.replace(Port + ", ", "");
        StopAt = Data.indexOf("]");
        String DeviceCommand = Data.toString().substring(0, StopAt);
        Send_Command(IPAddress, Port, DeviceCommand);
        return null;
    }

    protected void onPostExecute(Long result)
    {
        Log.d("Async Task", "Command Sent");
    }

    private void Send_Command(String IPAddress, int Port, String DeviceCommand)
    {
        //Setup the connection parameters
        SocketAddress SA = new InetSocketAddress(IPAddress, Port);
        int Timeout = 2000;
        Socket socket = new Socket();

        try
        {
            //Attempt to connect to the device
            socket.connect(SA, Timeout);
            int Count = 0;
            int Kill = 0;
            while (socket.isConnected() == false && Kill == 1)
            {
                //Waiting for the connection
                Count = Count + 1;
                if (Count == Timeout)
                {
                    Kill = 1;
                    Log.d("Connection Status", "Timed out");
                }
            }
            if (socket.isConnected() == true)
            {
                //send the command
                BufferedWriter wr = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
                wr.write(DeviceCommand);
                wr.flush();
                Log.d("Sent Device Command", DeviceCommand);
                //listen for the response
                BufferedReader rd = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                String Response;
                while ((Response = rd.readLine()) != null)
                {
                    Log.d("Received Device Response", Response);
                }
                rd.close();
            }
            //close the socket once the response is received
            socket.close();
        }
        catch (UnknownHostException e)
        {
            Log.d("UnknownHostException", "Something bad happened");
        }
        catch (IOException e)
        {
            Log.d("IOException", "Something bad happened");
        }
        finally
        {
            if (socket != null)
            {
                try
                {
                    socket.close();
                }
                catch (IOException e)
                {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

最后，这是我尝试通过 tcp 发送两个命令后的日志。

```
01-14 23:53:29.773: D/Device Command To Send(31643): PN
01-14 23:53:29.773: D/Async Task(31643): Started to send command.
01-14 23:53:30.108: D/Sent Device Command(31643): PN
01-14 23:53:30.273: D/Received Device Response(31643): R
01-14 23:53:31.918: D/Device Command To Send(31643): PF 
```

我可以看到第一次启动 AsyncTask 并发送命令以及接收来自目标设备的响应。但是我在日志中没有看到“异步任务”、“命令发送”，所以 onPostExecute 没有执行。

关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:00:51.433

目前您没有覆盖`onPostExecute`，`AsyncTask`因此将您的 onPostExecute 签名更改为：

```
@Override
protected void onPostExecute(ArrayList<String> result)//<Change Long
                                                      // to ArrayList<String>
  {
       Log.d("Async Task", "Command Sent");
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:01:54.980

你的`onPostExecute`签名是错误的。

```
protected void onPostExecute(Long result) 
```

它应该是

```
protected void onPostExecute(ArrayList<String> result) 
```

`@Override`使用注释也可能很好。

将一些额外的调试消息放入您的`Send_Command`,`AsyncTask`可能挂在那里。

# java - 报告优化问题

> ID：14331431
> 
> 赞同：0
> 
> 时间：2013-01-15T04:59:53.307
> 
> 标签：java, mysql, mongodb, report

我的 Web 应用程序中有 6 个报告。所有报告都使用大约 15 个表连接的大量查询，并且在向用户呈现报告之前再次循环查询结果以进行一些计算。

这需要很长时间才能加载报告。我正在使用带有 Java 的 MySQL

解决此问题的最佳方法是什么？

1.  如果缓存很好，那么可用的选项是什么？
2.  我打算创建一个表并将所有需要的数据插入到该表中，然后报告可以访问该表，如果可能的话，将数据加载到该表的最佳方法是什么？
3.  MongoDb 或其他 NoSql DB 可以解决这个问题吗？
4.  或者有没有标准的方法来做这些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:21:38.653

在查询前使用 an`Explain`并确定您`Joins`是否使用任何索引。希望您通常以类似的方式加入您的表，因此如果您添加正确的索引，它应该会加快速度。

例如，如果你有，

```
Select carrots FROM veggies
JOIN fruits ON fruits.color = veggies.color
WHERE veggies.weight=.5 
```

您可能希望为表中的列添加索引，并为表中`color`的列添加索引。`fruits``weight``veggies`

# iphone - 应用生命周期问题

> ID：14331432
> 
> 赞同：-3
> 
> 时间：2013-01-15T04:59:59.023
> 
> 标签：iphone, ios, uinavigationbar, lifecycle

我对导航栏进行了更改，这意味着我增加了导航栏的高度并进行了一些自定义更改，它工作正常，但是当我最小化应用程序并再次最大化它时，它只显示我所做的更改的原始高度，那些没有最小化后工作，我的代码是

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSLog(@" i m in didFinishLaunchingWithOptions" );

    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"TopHeader"] forBarMetrics:UIBarMetricsDefault];
    [[UINavigationBar appearance] setFrame:CGRectMake(0, 0, 320, 55)];   

    [[UINavigationBar appearance] setTitleVerticalPositionAdjustment:(-15.0) forBarMetrics:UIBarMetricsDefault];

    [[UINavigationBar appearance] setTitleTextAttributes: [NSDictionary dictionaryWithObjectsAndKeys:
                                                           [UIColor colorWithRed:245.0/255.0 green:245.0/255.0 blue:245.0/255.0 alpha:1.0], UITextAttributeTextColor,
                                                           [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.8],UITextAttributeTextShadowColor,
                                                           [NSValue valueWithUIOffset:UIOffsetMake(0, 1)],
                                                           UITextAttributeTextShadowOffset,
                                                           [UIFont fontWithName:@"HelveticaNeue-CondensedBlack" size:16.0], UITextAttributeFont, nil]];

return YES;  
} 
```

最大化之后，`applicationDidBecomeActive`这就是为什么我将上面的代码放入`applicationDidBecomeActive`但它不起作用，为什么会这样？
在
![在此处输入图像描述](../Images/2a427455d592ba98971d56d137b9017c.png)
再次最小化和最大化之后最小化之前，它看起来像下面，即高度再次自动设置为 44。
![在此处输入图像描述](../Images/455a38c05070858e967db1eb7db4821e.png)

更新：我写了以下代码 `applicationWillEnterForeground`

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{    
    UINavigationController *my=(UINavigationController *  )self.window.rootViewController;

    UINavigationBar *navigationBar = [my navigationBar];
    CGRect frame = [navigationBar frame];
    frame.size.height = 55.0f;
    [navigationBar setFrame:frame];

    NSLog(@" i m in applicationWillEnterForeground" );

   } 
```

在调试时，当我写它的描述时，它显示高度是 55。但在屏幕上它看起来仍然像第二张图像。为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T05:03:24.383

当您的应用程序从后台打开时`application:didFinishLaunchingWithOptions:`不会被调用。您想使用`applicationWillEnterForeground:`或`applicationDidBecomeActive:`代替。查看`UIApplicationDelegate` [协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)以获取更多信息。

* * *

**编辑：**针对问题作者的编辑，我会这样说。我在我的应用程序中玩过这段代码，我已经能够重现这个问题。我尝试了许多解决方案来修复它，包括在`UINavigationController`'s中重置导航栏的框架`layoutSubviews`。我建议创建一个重现此问题的示例项目并将其提交给 Apple 的 Bug 报告器，或者创建一个 UINavigationBar 子类来重新定位和调整自身大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:18:46.143

我解决了这个问题，只是覆盖了 UINavigationBar & 在 LayoutSubViews 中设置了导航栏的高度。

```
@implementation UINavigationBar (customNAvigBar)

- (void)layoutSubviews
{
    [self setFrame:CGRectMake(0, 0, 320, 55)];
}

@end 
```

这意味着每当我绘制导航栏时，它会自动调用并设置高度。

# android-datepicker - 在 HTML5 中启动 Android DatePicker 支持时应用程序崩溃

> ID：14331433
> 
> 赞同：1
> 
> 时间：2013-01-15T05:00:11.777
> 
> 标签：android-datepicker

我有一个 webview，它启动我使用 html5、jquery mobile 和我自己的自定义 css 构建的网页。网页具有使用 html5 标签定义的日期字段。当我单击日期字段时，会弹出日期选择器，当我设置日期并单击“确定”时，我的应用程序崩溃并给出空指针异常。

# jquery - 调整屏幕大小时的 jQuery 函数

> ID：14331440
> 
> 赞同：0
> 
> 时间：2013-01-15T05:00:53.977
> 
> 标签：jquery, screen

当屏幕宽度小于 979px 时，我想为元素添加一个类。此外，当屏幕正在调整且宽度超过 979 像素时，应删除上面添加的类。

这是我尝试过的代码，但它不起作用。

```
$(document).ready(function(){
   if(screen.width < 979) {
       $('.social').addClass('hide');
   }
}); 
```

请帮我解决这个问题。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:03:33.653

试试这个：

```
$(document).ready(function () {
  $(window).resize(function () {
    if ($(window).width() < 979) {
      $('.social').addClass('hide');
    } else {
      $('.social').removeClass('hide');
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:03:18.673

我想这就是你需要的：[resize](http://api.jquery.com/resize/)。

# ruby-on-rails-3 - 无法更新导轨

> ID：14331441
> 
> 赞同：3
> 
> 时间：2013-01-15T05:00:56.490
> 
> 标签：ruby-on-rails-3, gem, ruby-on-rails-3.2, rvm

当我执行捆绑更新 rails 时，我收到此错误：

```
Bundler could not find compatible versions for gem "activesupport":
  In Gemfile:
    rails (= 3.2.11) x86-mingw32 depends on
      activesupport (= 3.2.11) x86-mingw32

    activesupport (3.1.0) 
```

这是我的 gemFile，任何帮助都会受到赞赏 :)

```
source 'http://rubygems.org'

gem 'rails' , '3.2.11'
gem "heroku"
gem 'thin'
gem 'devise'#, '1.5.2'
gem 'will_paginate', '~> 3.0.2'
#gem 'nested_form', :git => 'git://github.com/fxposter/nested_form.git'
gem "simple_form"
gem "cancan"
gem 'kaminari'
gem 'foreigner'
gem "cocoon"
gem 'client_side_validations'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', "  ~> 3.1.0"
  gem 'coffee-rails', "~> 3.1.0"
  gem 'uglifier'
end

gem "jquery-rails"
gem "validate_url", "~> 0.2.0"
gem 'pg', :group => [:production]
gem 'haml'
# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug'
group :test, :development do
  gem 'sqlite3'
  gem 'turn', :require => false
  gem "rspec-rails", "2.7"
  #gem "rspec"
  gem "spork", "> 0.9.0.rc"
  gem 'guard-spork'
  #gem "webrat", "~> 0.7.3"
  gem 'rb-fsevent' # Not mandatory for guard to work, which is why it's not a dependency, but it is an optimization
  #gem "guard-spork"
  #gem 'minitest'
  gem "factory_girl_rails", "~> 1.2"
  #gem "webrat-rspec-rails"
  gem "mocha"
  gem 'capybara' #, :git => 'git://github.com/jnicklas/capybara.git'
  gem 'database_cleaner'
  gem 'launchy'
  gem "capybara-webkit"
  #gem 'rspec-multi-mock', :git => 'git://github.com/endeepak/rspec-multi-mock.git'
end

group :test do
  #gem 'ruby-debug19', :require => 'ruby-debug'
end

gem 'execjs'
gem 'therubyracer' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:41:38.247

首先你必须删除**Gemfile.lock**

*   然后更新 Gemfile 以包含 rails 3.2.11

*   进入项目目录

*   跑`bundle install`

这可能会解决您的问题

# java - Gson 实现类的数量取决于花括号？

> ID：14331446
> 
> 赞同：1
> 
> 时间：2013-01-15T05:01:16.790
> 
> 标签：java, android, gson

我必须得到一个像这样的Json字符串..

```
{"a":{"b":{"c":"5"}}} 
```

现在从 Gson 文档中我能够生成字符串。但是我需要三个类来生成它，我的实现有什么问题，有没有可能的方法来减少相同实现的类，

请找到用于生成此的类..

```
public class c { String c="5";}

public class b {
@SerializedName("b")
c cobj = new c();}

public class a {
 @SerializedName("a")
b cobj =new b();}

public static void main (String args[]){
    Gson gs=new Gson();
    a aobj=new a();
    System.out.println(gs.toJson(aobj));
} 
```

请协助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:14:54.000

没有错。在 JSON 中，`{}`表示一个对象，因此您的字符串为您提供了三个嵌套对象。查看[JSON 语法](http://www.json.org/)

如果您正在寻找内部类，则`static`内部类可以开箱即用地进行序列化和反序列化。不确定以下内容是否比您所拥有的要短得多，因为三组大括号意味着三个类。由于您的字段名称不同，它意味着三个不同的类，并且您的内部数据结构应该被开发以具有逻辑意义，而不仅仅是“更短”

您可以通过重命名字段来摆脱注释，使它们与您想要的字段匹配。

```
class TopObj {
    static class AClass {
        static class BClass {
            String c = "5";
        };    
        B b = new b();
    };    
    a a = new a();
}; 
```

另一种观点是所有三个类都是相同的类类型，但只是使用不同的字段。转换为 JSON 时，仅填充具有值的字段。如上所述，您的数据意味着不同的类，但您可以使用一个类定义来做到这一点——

```
class Trickery {    
    Trickery a;
    Trickery b;
    String c;
}; 
```

然后你只使用规定的字段，

```
Trickery top = new Trickery();
top.a = new Trickery();
top.a.b = new Trickery();
top.a.b.c = "5";
System.out.println(gson.toJson(top)); 
```

# php - 不能用实例化的类对象访问声明为静态的属性？

> ID：14331450
> 
> 赞同：2
> 
> 时间：2013-01-15T05:01:31.687
> 
> 标签：php, oop

根据php文档[http://php.net/manual/en/language.oop5.constants.php](http://php.net/manual/en/language.oop5.constants.php)

*不能用实例化的类对象访问声明为静态的属性*

但是下面的示例不是表明您可以从对象访问静态属性`$foo`吗？

```
class Foo{
    static $my_static = 'foo';
    function staticValue(){
        return self::$my_static;
    }        
}

$foo = new Foo();
echo $foo::$my_static; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T05:08:19.997

这里的诀窍是您正在使用[范围解析运算符](http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php):: ，它始终引用该类。使用 $foo 或 $this 或 self 都没有关系。

Self 是 PHP 中引用当前级别的关键字，但 :: 可以在对象上使用以获取对该对象的类的引用。self:: 与 parent:: 属于同一关键字族，将 self:: 视为想要访问对象*当前*级别的某些内容，而 parent:: 视为想要访问当前对象*下方的某些内容。*

因此，要访问类中定义的内容。PHP 创建了 :: 运算符。如果您只需要类中的静态内容，则可以在类内部使用 self 或在其外部使用对象引用。

# iphone - 如何在 iPhone 上为 PubNub 应用程序设置聊天名称？

> ID：14331461
> 
> 赞同：1
> 
> 时间：2013-01-15T05:02:37.717
> 
> 标签：iphone, objective-c, pubnub

我正在尝试构建一个使用 PubNub 的应用程序，但我不知道如何设置聊天名称。Github 演示似乎没有处理聊天名称，但不识别聊天来自谁似乎很奇怪。我需要使用某个字典键吗？我试过“chatName”，但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:13:04.803

您是否尝试过这样的“用户名”：

```
- (NSDictionary *)asDictionary;
{
    return @{
   @"type" : @"chat", @"user_id" : @([self userId]), @"user_name" : [self userName], @"user_stores" : [self userStores], @"body" : [self body], @"time" : [self time]
    };
} 
```

# jquery - Jquery 1.8.3 + IE 8 问题 + 消息意外调用方法或属性访问

> ID：14331463
> 
> 赞同：2
> 
> 时间：2013-01-15T05:02:54.990
> 
> 标签：jquery, performance, internet-explorer-8

在这里，我正在尝试运行代码并且 IE 浏览器不支持，由于此类错误，所有页面都崩溃并且没有响应。所有的java脚本在这里都失败了。

任何建议，请解决此问题。

代码说明：![在此处输入图像描述](../Images/448f19ec4db052b0e2b3b9752972506d.png)

在加载页面时，它在这个地方给出错误。

# asp.net - 为什么 HttpContext 在 WindowsForms 中使用 SimpleMembership 为空？

> ID：14331464
> 
> 赞同：0
> 
> 时间：2013-01-15T05:03:04.973
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-membership, simplemembership

我在我的 ASP.NET MVC4 应用程序中实现了一个简单的成员资格。但现在我需要实现用户的创建并验证其中的登录。

所以我开始将我最近项目的一些代码复制到这里。例如，这是崩溃的部分

```
 WebSecurity.InitializeDatabaseConnection("SimpleMembershipConnection",
  "UserProfile", "UserId", "UserName", autoCreateTables: true);
            bool val = WebSecurity.Login("1010", "pass"); // here throws the exception 
```

错误说：

> 你调用的对象是空的。参数名称：httpContext。

另外，我只是将一些库导入为 WebMatrix.WebData、WebMatrix.Data 和 System.Web

这是我的整个 app.config

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <connectionStrings>
     ...
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
<roleManager enabled="true" defaultProvider="simple">
  <providers>
    <clear />
    <add name="simple" type="WebMatrix.WebData.SimpleRoleProvider,              WebMatrix.WebData" />
  </providers>
</roleManager>
<membership defaultProvider="simple">
  <providers>
    <clear />
    <add name="simple" type="WebMatrix.WebData.SimpleMembershipProvider,              WebMatrix.WebData" />
  </providers>
</membership> 
```

如何修复异常，关于在 HttpContext 中不为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:08:00.220

不。winforms 中不需要遵循会员提供者的生命周期。如果您在 winforms 中使用用于 Web 请求的 dll，则不会设置 HttpContext。HttpContext 指的是当前的 web 请求，这在 winforms 中显然是缺少的。

您可以分离您的身份验证业务逻辑并将其放在不同的 dll 中。您可以在 Windows 应用程序和会员提供程序中引用此库。

如果您必须通过 Web 验证您的用户，那么在 Windows 应用程序中执行此操作的方法是查询 Web 服务。然后你可以在服务器端使用你的 SimpleMembershipProvider。

# android - 无法将值添加到android中的多选对话框

> ID：14331468
> 
> 赞同：0
> 
> 时间：2013-01-15T05:03:08.120
> 
> 标签：android, dialog

我在 android for Multichoice 对话框中有一个小问题。

我已经完成了下面的代码，用于显示一个多选对话框并在按钮单击事件上调用它。我已经设置了标题、消息、按钮，并将项目添加到对话框中。

我可以看到我设置的标题、消息和按钮，但我无法看到我正在添加的项目。为此，我用谷歌搜索并几乎尝试了我在搜索中找到的所有代码。所有方法都没有帮助我。

这是我的代码...

```
final String[] Values={"Red","Green","Blue"}; 
final boolean[] selCrayons={true,false,true};
AlertDialog.Builder dialog=new AlertDialog.Builder(this);
dialog.setTitle("Crayons List");
dialog.setMessage("Select your favouriate Crayon");
dialog.setMultiChoiceItems(Values,selCrayons,new DialogInterface.OnMultiChoiceClickListener() {
    @Override
    public void onClick(DialogInterface arg0, int arg1, boolean arg2) {
        // TODO Auto-generated method stub
        if(arg2) {
            Toast.makeText(getApplicationContext(), "Selected Color is " + Values[arg1],Toast.LENGTH_LONG).show();
        }
    }
});
dialog.setPositiveButton("SAVE",new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
    // TODO Auto-generated method stub
    }
});
AlertDialog alertDialog=dialog.create();
    alertDialog.show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:47:53.943

`setMessage`并且`setMultiChoiceItems`不会一起工作。删除`setMessage`，您将能够看到多选项目列表。

If there is a need to use message and multi-choice list together, you can use your own custom view for the dialog.

For how to set custom view, you can refer [AlertDialog.Builder setView (View view)](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setView%28android.view.View%29) method.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:47:19.827

我以前遇到过这个，删除`dialog.setMessage()`，不幸的是你不能同时拥有消息和多选

# c++ - 对静态变量的未定义引用

> ID：14331469
> 
> 赞同：30
> 
> 时间：2013-01-15T05:03:10.763
> 
> 标签：c++

> **可能重复：**
> [C++：对静态类成员的未定义引用](https://stackoverflow.com/questions/272900/c-undefined-reference-to-static-class-member)

我正在使用 MinGW。为什么静态变量不起作用

```
[Linker error] undefined reference to `A::i' 

#include <windows.h>

    class A { 
        public:     
        static int i;
        static int init(){

            i = 1;  

        }

    };

int WINAPI WinMain (HINSTANCE hThisInstance,
                    HINSTANCE hPrevInstance,
                    LPSTR lpszArgument,
                    int nFunsterStil){
    A::i = 0;
    A::init();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-15T05:04:49.003

你只声明`A::i`了，使用前需要定义`A::i`。

```
class A  
{ 
public:     
  static int i;
  static void init(){
     i = 1;  
  }
 };

int A::i = 0;

int WINAPI WinMain (HINSTANCE hThisInstance,
                HINSTANCE hPrevInstance,
                LPSTR lpszArgument,
                int nFunsterStil)
{
  A::i = 0;
  A::init();

  return 0;
} 
```

此外，您的 init() 函数应该返回一个值或设置为 void。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-15T05:07:47.840

你已经`A::i`在你的类中声明了，但你还没有定义它。您必须在之后添加定义`class A`

```
class A {
public:
    static int i;
    ...
};

int A::i; 
```

# android - EditText Android 中的 TextWatcher 出错

> ID：14331476
> 
> 赞同：-1
> 
> 时间：2013-01-15T05:04:34.633
> 
> 标签：android, android-edittext

我正在尝试`TextWatcher`在`EditText`. 我`EditText`在我的应用程序中使用了一个并通过`TextWatcher`.

当我在栏中键入像“a”这样的字母时，`EditText`我的光标可以工作，但是当我写下一个像“ab *”这样的字母时，光标根本不起作用，并且在删除这些字母时发生错误并且我的应用程序崩溃。我无法弄清楚我错过了什么。

**这是我的代码：**

```
TextWatcher myTextWatcher = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
    int count) {

        if (start == 0) {

            SearchWordString.clear();

            Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,
            new String[] {(search.getText().toString())}, null);

            while(cursor.isAfterLast()==false)
            {

                SearchWordString.add(cursor.getString(1)); 

                cursor.moveToNext();
            }

            listAdapter.notifyDataSetChanged();

            viewFlipper.showNext();
        } else {

        }

        listAdapter.notifyDataSetChanged();
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
    int after) {

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
}; 
```

**这是我的 LogCAT**

```
01-15 04:54:25.080: W/dalvikvm(29324): threadid=1: thread exiting with uncaught exception (group=0x40b811f8)
01-15 04:54:25.103: E/AndroidRuntime(29324): FATAL EXCEPTION: main
01-15 04:54:25.103: E/AndroidRuntime(29324): java.lang.NullPointerException
01-15 04:54:25.103: E/AndroidRuntime(29324):    at com.ilmasoft.GPD.Start$2.onTextChanged(Start.java:1432)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.widget.TextView.sendOnTextChanged(TextView.java:8085)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.widget.TextView.handleTextChanged(TextView.java:8132)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:8495)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:892)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:389)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:266)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:443)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.SpannableStringBuilder.delete(SpannableStringBuilder.java:216)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.SpannableStringBuilder.delete(SpannableStringBuilder.java:29)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.method.BaseKeyListener.backspaceOrForwardDelete(BaseKeyListener.java:90)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.method.BaseKeyListener.backspace(BaseKeyListener.java:45)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.method.BaseKeyListener.onKeyDown(BaseKeyListener.java:151)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.method.QwertyKeyListener.onKeyDown(QwertyKeyListener.java:352)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.text.method.TextKeyListener.onKeyDown(TextKeyListener.java:132)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.widget.TextView.doKeyDown(TextView.java:5716)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.widget.TextView.onKeyDown(TextView.java:5531)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.view.KeyEvent.dispatch(KeyEvent.java:2608)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.view.View.dispatchKeyEvent(View.java:5547)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:2021)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1382)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.app.Activity.dispatchKeyEvent(Activity.java:2324)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1948)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3360)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2618)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.os.Looper.loop(Looper.java:137)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at java.lang.reflect.Method.invokeNative(Native Method)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at java.lang.reflect.Method.invoke(Method.java:511)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-15 04:54:25.103: E/AndroidRuntime(29324):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:07:50.347

我的理解`start`是，第一点`s`是有变化。尽量不要检查是否`start`为 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:40:59.480

here's my code..

```
mEdtSearchCity =  (AutoCompleteTextView) findViewById(R.id.edtSearchCity);

mEdtSearchCity.addTextChangedListener(this);

public class SearchCityListActivity extends Activity implements OnItemClickListener,TextWatcher

@Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
        String cityName = mEdtSearchCity.getText().toString();
        cityName = mEdtSearchCity.getText().toString();
        Log.d(TAG, "text changed "+cityName);
        if ( !(cityName.equals("")) ){
        lookupTimeZone(cityName);
        }else{
            adapter.clear();
            adapter.notifyDataSetChanged();
        }
    }
private void lookupTimeZone(String s){
        Log.d(TAG, "cityname "+s); 
        ArrayList<LocationVO> alist = null;
        alist = lookup.getTimeZoneForCity(s);
        Log.d(TAG, "lookup list "+alist.size());

        if ( alist.size() != 0  ){
            //arrayCity.clear();
            adapter.clear();
            LocationVO lo = new LocationVO();
            for ( int i = 0; i < alist.size(); i++) {
                lo = alist.get(i);
                searchResults.add(lo);
            }
            adapter.notifyDataSetChanged();
        }else {
            //Toast.makeText(SearchCityListActivity.this, "No results found", Toast.LENGTH_SHORT).show();
            Log.d(TAG, "No data");
            adapter.clear();

        }

public ArrayList<LocationVO> getTimeZoneForCity(String s){
        Cursor c ;
        try{
        String city = s;
        if ( city.contains("'") ){
            Log.d(TAG, "matched");
            String [] as = city.split("'");
            Log.d(TAG, "st "+as[0]+"''"+as[1]);
            c = theDatabase.query("data", new String[] {KEY_CITY, KEY_TIMEZONE, KEY_COUNTRY, KEY_TIMEZONE_DISPLAY_NAME, KEY_TIMEZONE_ID},KEY_CITY+" like '"+as[0]+"''"+as[1]+"%';", null, null, null, null, null);
        }else{
        c = theDatabase.query("data", new String[] {KEY_CITY, KEY_TIMEZONE, KEY_COUNTRY, KEY_TIMEZONE_DISPLAY_NAME, KEY_TIMEZONE_ID},KEY_CITY+" like '"+city+"%';", null, null, null, null, null);
        Log.d(TAG, "Query:- "+c.toString());
        }
        }catch(Exception e){
            Log.d(TAG, "Error getting Timezone for "+KEY_CITY+" : "+e.getMessage());
            ArrayList<LocationVO> a = new ArrayList<LocationVO>();
            return a;
        }

        int count = c.getCount();
        Log.d(TAG, "count "+count);

        if(count == 0){
            ArrayList<LocationVO> list = new ArrayList<LocationVO>();
            Log.d(TAG, "null list"+list);
            return list;
        }
        Log.d(TAG, "outside bound");
        c.moveToFirst();

        ArrayList<LocationVO> list = new ArrayList<LocationVO>();
        for(int i=0;  i<count; i++){

            LocationVO vo = new LocationVO();
            vo.cityName = c.getString(0);
            vo.countryName = c.getString(2);
            vo.setTimezoneString(c.getString(1));
            vo.setTimeZoneDisplayName(c.getString(3));
            vo.setTimeZoneId(c.getString(4));
            list.add(vo);
            c.moveToNext();
        }

        c.close();
        return list;
    } 
```

# php - 在 url 中传递一个 php 变量的最简单方法

> ID：14331479
> 
> 赞同：-3
> 
> 时间：2013-01-15T05:04:48.597
> 
> 标签：php, variables

我已经检查了有关如何在 url 中传递 php 变量的各种讨论，但没有看到任何与我感兴趣的简单情况有关的讨论。我也想绝对确定我得到了一个最新的解决方案。

在一本数字书籍中，我想链接到 mypage2.php 并包含一个变量 $video。如何安全地传递此变量，如何“检测” $video 及其当前的“漏油”值？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:08:52.423

制作一个链接，如：

```
printf('<a href="mypage2.php?video=%s">Link</a>', htmlspecialchars($video, ENT_COMPAT)); 
```

On `mypage2.php`，检查查询参数是否在 URL 中：

```
if (!isset($_GET['video'])) {
    die('I need that query parameter!');
}

$video = $_GET['video']; 
```

# php - PHP缓存刷新而不重新启动Apache

> ID：14331482
> 
> 赞同：0
> 
> 时间：2013-01-15T05:05:05.633
> 
> 标签：php, apache

我的一些网站似乎有服务器端缓存，`httpd`每次更改 PHP 代码时我都必须重新启动服务器

有没有办法不重新启动 Apache 但立即显示 PHP 代码更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-14T15:13:58.897

7 年前.. 我​​不确定你会不会读到这篇文章。但我认为你想要的是改变 opcache.enable 选项。

去`php/etc/php.ini`尝试改变`opcache.enable=0`

但我认为你最好这样做是为了开发，而不是真正的服务。

# log4j - 我不明白为什么这个 log4j.xml 是错误的

> ID：14331486
> 
> 赞同：1
> 
> 时间：2013-01-15T05:05:33.587
> 
> 标签：log4j, cassandra

我想用 log4j 登录 Cassandra db。

所以我写了这个 log4j.xml 配置：

```
 <appender name="DBlog" class="org.apache.log4j.jdbc.JDBCAppender">
      <param name="URL" value="jdbc:cassandra://localhost:9160/MyKeyspace" />
      <param name="Driver" value="org.apache.cassandra.cql.jdbc.CassandraDriver" />
      <param name="User" value="" />
      <param name="Password" value="" />
      <layout class="..."/>
    </appender>

    <logger name="logger">
      <level value="info"/>
      <appender-ref ref="DBlog" />
    </logger> 
```

日志记录做得很好。但是，log4j 生成此消息：

```
log4j:WARN No appenders could be found for logger (org.apache.cassandra.cql.jdbc.CassandraDriver).
log4j:WARN Please initialize the log4j system properly. 
```

我不明白出了什么问题。如果有人知道答案，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:38:46.873

您需要再定义一个记录器：

```
 <logger name="org.apache.cassandra.cql.jdbc">
               <level value="info"/>
               <appender-ref="DBlog" />
        </logger> 
```

而且我认为在任何情况下定义根记录器都是一个好习惯。

```
 <root>
               <level value="info"/>
               <appender-ref ref="DBlog"/>
        </root> 
```

# jquery - 使用 jQuery 如何找到哪一行 # 包含一个带有值的输入？

> ID：14331487
> 
> 赞同：0
> 
> 时间：2013-01-15T05:05:34.800
> 
> 标签：jquery, select, indexing, html-table, row

我有一个有多行的表。我正在尝试返回包含输入的行#，其中包含一个值。我明白我做错了什么......我的选择器只选择 1 行，而不是我所在的行 [。http://jsfiddle.net/silvajeff/4Sb8K/](http://jsfiddle.net/silvajeff/4Sb8K/)

```
 <table id="oustandingItems">
    <tr><th>Category</th></tr>
    <tr><td><input name="mytest" /></td></tr>
    <tr><td><input name="mytest" value="123"/></td></tr>
    <tr><td><input name="mytest" /></td></tr>
    <tr><td><input name="mytest" /></td></tr>
   </table>

  <button id="findRow">Find Row</button>
  <input type="text" id="myRow" />

$("#findRow").click(function() {   
   var tableRow = $('#oustandingItems tr:has(td input[value!=""])').prevAll().length;  
   $("#myRow").val(tableRow);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:21:19.277

这最终成为了正确的解决方案，只是我使用了不正确的 jquery 版本。该解决方案适用于我测试过的 jquery 1.7.2 及更高版本。

```
var tableRow = $('#oustandingItems tr:has(td input[value!=""])').prevAll().length; 
```

[http://jsfiddle.net/silvajeff/4Sb8K/](http://jsfiddle.net/silvajeff/4Sb8K/)

# java - 在整数数组中找到给定数字和的最小集合

> ID：14331488
> 
> 赞同：0
> 
> 时间：2013-01-15T05:05:38.920
> 
> 标签：java, recursion

给定总和 s 和一个正整数数组，找到其元素加起来为 s 的最小子集。例如，给定数组 {1,2,3,4,5} 和总和 s = 8，最小子集将是 {3,5}。

到目前为止，我可以使用递归的贪婪方法求解*一*组整数，这些整数加起来是数组，但我找不到如何找到最小子集。我应该研究一个特定的算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:17:24.310

这就是“零一平等背包问题”。它是NP完全的。然而，存在多种有效的算法来解决这个问题。

1.  如果总和足够小以分配那么多位的内存并对其进行 n（数组元素的数量）次迭代，则可以使用[动态编程。](http://en.wikipedia.org/wiki/Dynamic_programming)

2.  [CPLEX、Gurobi 和 SCIP 等混合整数程序](http://en.wikipedia.org/wiki/Integer_programming)求解器通常在实践中可能出现的“典型”实例上做得相当好。在将背包问题公式化为 MIP 求解器的输入时，需要注意避免精度问题。

3.  如果您可以容忍一些不精确性： *不等式背包*[的多项式时间近似方案](http://en.wikipedia.org/wiki/Polynomial-time_approximation_scheme)（您希望最小的一组数字总和最多为 s）存在并且不难描述：将所有涉及的数字缩小到某个值您可以在其中进行动态编程并处理结果。如果您也注意接受近似问题的近似解，则可以使用相同的方法来获得等式背包的近似解。

# php - 在我的 jquery 中禁用 ajax 滚动和 ajax 加载器

> ID：14331492
> 
> 赞同：0
> 
> 时间：2013-01-15T05:06:06.690
> 
> 标签：php, jquery, ajax

我在下面的代码中添加了一个 ajax 加载器。问题是当数据库中的数据结束时，滚动功能仍然会进入无限循环，并且还会显示 ajax 滚动图像。我想在数据完成后停止滚动功能，并禁用 ajax 加载器图像。这是我的代码

```
var counter=25;
$(window).on('scroll',function(){
  if($(window).scrollTop()==($(document).height()-$(window).height())){
$('div#lastPostsLoader').html('<img src="loading-icon.gif">');
     //Get older posts
    $.ajax({
        type: 'POST',
        url: 'getdata.php?start_row=' + counter,
        success: function(oldposts){
        if(oldposts)
        {
            //Append #postsDiv
            $('#data').append(oldposts);
            counter += 15;
        }
           else
        {

            $('#lastPostsLoader').hide();
        }
        }
    });
  } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:18:01.610

试试这个：

```
var counter = 25;
$(window).on('scroll', function () {
  if ($(window).scrollTop() == ($(document).height() - $(window).height())) {
     $(document).ajaxStart(function() {
        $('div#lastPostsLoader').html('<img src="loading-icon.gif">'); 
     });
    $.ajax({
      type: 'POST',
      url: 'getdata.php?start_row=' + counter,
      success: function (oldposts) {
        if ($('#data')) {
          $('#data').append(oldposts);
          counter += 15;
        }
      }
    });
    $(document).ajaxComplete(function() {
       $('div#lastPostsLoader').find('img[src^="loading"]').remove();
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:54:49.323

如果我没记错的话，在成功函数中，如果你得到数据，你应该把加载器本身隐藏在那里。我不明白在其他部分隐藏 $('#lastPostsLoader') 的目的是什么？？？

据我了解，如果您没有获得任何数据，您将隐藏加载程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T06:03:56.043

@pavan

```
if ($('#data')) {
//if you have data process your business logic.
}
else
{
 //Hide the loader.
 //remove the event handler you can use .off for it.
} 
```

用于删除事件处理程序[http://api.jquery.com/off/](http://api.jquery.com/off/)

# apache - Mod Rewrite - 重定向到除特定 URL 之外的子域（codeigniter）

> ID：14331503
> 
> 赞同：1
> 
> 时间：2013-01-15T05:07:49.377
> 
> 标签：apache, mod-rewrite, subdomain

我正在尝试将所有流量重定向到子域。

www.example.com、example.com、sub.othersite.com 全部重写为 sub.othersite.com

它工作得很好。现在我需要从重定向到子域中排除单个 URL

因此，如果 www.example.com/THE/URI 进来，我希望 mod rewrite 忽略子域重写并将其发送到主域。

看起来很简单，但我无法让它工作，因为我有一个额外的重写，以确保所有域（也有几个停放的域）汇集到一个域中以提供内容。

我还有其他一些重写条件。它们都列在这里。如果有人能指出我正确的方向 - 我基本上需要这样做：

如果传入请求是针对 /THE/URI 则转到 www.example.com/THE/URI 否则重写为 sub.othersite.com

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # ignore system folder
  RewriteCond %{REQUEST_URI} ^system.*
  RewriteCond $1 !^(client/*)   
  RewriteRule ^(.*)$ /index.php?/$1 [L]

  #Checks to see if the user is attempting to access a valid file,
  #such as an image or css document, if this isn't true it sends the
  #request to index.php
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond $1 !^(index\.php|images|robots\.txt|css)
  RewriteRule ^(.*)$ index.php?/$1 [L] 

  # if it is the SPECIAL URI redirect and EXIT
  RewriteCond $1 !^(/THE/URI)   
  RewriteCond %{HTTP_HOST} !^www.example.com$
  RewriteRule ^(.*)$ http://www.example.com/THE/URI [L]

  #catch all other traffic        
  RewriteCond %{HTTP_HOST} !^example.anothersite.com$
  RewriteRule ^(.*)$ http://example.anothersite.us/$1 

</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:22:33.620

解决了。答案很简单。我只需要从最终重写中排除 URI 和 QUERY_STRING，因为重写的上半部分在 URL 中附加了一个查询字符串。

为了让我的应用程序正常工作，我仍然需要进行初始重写（获取任何 URI 并在内部将其映射到 index.php?URI）

最终代码：

```
<IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /

        #Removes access to the system folder by users.
        RewriteCond %{REQUEST_URI} ^system.*
        RewriteCond $1 !^(client/*)   
        RewriteRule ^(.*)$ /index.php?/$1 [L]

                # our URL is prepped now - query string appended, so let's redirect it
                # ONLY if it's not the ONE URL we need to keep

        RewriteCond %{REQUEST_URI} !^/THE/URI   
        RewriteCond %{QUERY_STRING} !^/THE/URI
        RewriteCond %{HTTP_HOST} !^sub.example.com$
        RewriteRule ^(.*)$ http://sub.example.com/$1  [R=302]
</IfModule> 
```

# java - 将对象输入流转换为对象文件

> ID：14331504
> 
> 赞同：0
> 
> 时间：2013-01-15T05:07:53.190
> 
> 标签：java, android

如何将对象输入流转换为对象文件。

我有如下代码：

```
AssetManager assetManager = context.getAssets();
InputStream myInputSttream = assetManager.open("file.zip");
File myFile = new File("/path/location/file.zip"); 
```

因为我有来自资产管理器的文件，其对象是输入流，但我想将此文件用作对象文件，以用于下面的算法代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:12:46.630

由于您希望将 InputStream 中的文件解压缩到 SDCard 上的文件中（根据您的评论），因此您应该查看[ZipInputStream](http://developer.android.com/reference/java/util/zip/ZipInputStream.html)。你会写这样的东西

```
ZipInputStream zis = new ZipInputStream(assetManager.open("file.zip")); 
```

然后，您可以使用[此代码示例](http://www.kodejava.org/examples/334.html)作为指导，将 zip 文件的内容实际输出到 SD 卡中

# android - 如何在android webview中显示加载栏作为页面加载？

> ID：14331506
> 
> 赞同：1
> 
> 时间：2013-01-15T05:07:58.487
> 
> 标签：android, webview, loading

我希望加载栏必须显示为页面加载，并且当我们单击该加载页面上的任何链接时，加载栏也必须显示为下一次单击的页面加载......我正在使用 webview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:41:18.873

可以通过覆盖 webviewclient 的 onPageStarted() 和 onPageFinished() 来显示加载栏。开始在 onPageStarted 中显示加载栏，并使其在 onPageFinished 中不可见。

# matlab - Matlab中随机选择点

> ID：14331510
> 
> 赞同：-3
> 
> 时间：2013-01-15T05:08:10.163
> 
> 标签：matlab

我已经生成了 1000 个随机点，范围从 0 到 500。我想随机选择一个点，然后预测选择该点的概率。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:26:40.647

1.  生成一个随机数并将其`mod`与`501`，结果范围为0-500，从随机数的索引中选择点。

2.  要计算选择特定点的概率，重复步骤 (1) n 次并检查您的点被选择了多少次，其概率将为：

    ![在此处输入图像描述](../Images/81006ebde5db0944964a94b080e9bee2.png)

for `i`: 点索引, 和`j`: 试验索引 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:42:44.970

我将假设您的随机点存储在向量 x 中：

```
 x=500*rand(1,1000); 
```

在该组随机数中选择任何一个点的概率正好是 1/1000。所以你不需要计算它。

要选择一个随机项目，只需使用以下内容：

```
choice = x(randi([1,1000],1)) 
```

其中，randi 只返回 [1,1000] 区间内的随机整数。

# database - Web2py 数据库连接和数据库设计

> ID：14331517
> 
> 赞同：2
> 
> 时间：2013-01-15T05:09:43.490
> 
> 标签：database, join, web2py

这可能是一个愚蠢的问题，我读过这个：[http ://web2py.com/books/default/chapter/29/06#One-to-many-relation](http://web2py.com/books/default/chapter/29/06#One-to-many-relation)

但是我仍然无法理解我的数据库声明哪里出错了。

这是我希望我的表格看起来像的布局，包括参考资料和所有内容：

[http://imgur.com/fpaDb](http://imgur.com/fpaDb)

这是我在 db.py 中使用的 web2py 代码

```
db.define_table('Course',Field('CallNumber','integer'),Field('Section','string',),Field('Title','string'),Field('MinCredit','integer'),Field('MaxCredit','integer'),Field('MaxEnrollment','integer'),Field('CurrentEnrollment','integer'),Field('Status','string'),Field('Instructor1','string'),Field('Term','string'))
db.define_table('Meeting',Field('CallNumber',db.Course),Field('Day','string'),Field('StartTime','string'),Field('EndTime','string'),Field('Site','string'),Field('Building','string'),Field('Room','string'),Field('Activity','string'))
db.define_table('Requirement',Field('CallNumber',db.Course),Field('Control','string'),Field('Argument','string'),Field('Value1','string'),Field('Operator','string'),Field('Value2','string')) 
```

我要做的是确保会议和需求表不是通过 web2py 分配课程表中的条目的任意 id 而是通过 CallNumber 来引用课程表。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:43:48.200

引用字段存储被引用表的主键，也就是`id`字段。如果您想要引用记录的 CallNumber 值，您可以在进行联接时轻松获取它：

```
db.define_table('Course', Field('CallNumber', 'integer'), ...)
db.define_table('Meeting', Field('Course', db.Course), ...)

row = db(db.Course.id == db.Meeting.Course).select().first()
print row.Course.CallNumber 
```

您还可以进行[递归选择](http://web2py.com/books/default/chapter/29/06#Recursive-selects)：

```
row = db(db.Meeting).select().first()
print row.Course.CallNumber 
```

请注意，递归选择在遍历多条记录时效率较低，因为它为每条记录执行单独的数据库查询。在这种情况下，上面的内部连接方法更有效，因为它只涉及一个查询来检索整个连接记录集。

# php - XMPP facebook 聊天权限与 PHP

> ID：14331523
> 
> 赞同：0
> 
> 时间：2013-01-15T05:10:29.330
> 
> 标签：php, facebook, api, xmpp

使用 Facebook 聊天 API，Facebook“页面”或页面管理员是否可以向喜欢该页面的人发送聊天消息？或者接收者是否也必须具有接受 XMPP 消息的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:39:25.097

you can send chat message from your app to users but you cant send message directly.there is no need to give permission from friend of authorized person.then if i authorized to your app then you can send message through your app page to all of my chat's friends.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T13:31:10.253

您可以看到 RumbleTalk 如何实现向用户 facebook 页面发送聊天消息。

# analytics - Hadoop 上的大数据语音分析

> ID：14331524
> 
> 赞同：2
> 
> 时间：2013-01-15T05:10:33.053
> 
> 标签：analytics, bigdata, speech-to-text, sentiment-analysis

我是分析领域的新手，偶然发现了对呼叫中心音频执行语音分析的要求。目前，还不清楚需要什么样的分析，但我看到的是情感分析。我听说有内置分析功能的商业呼叫中心平台可用。但我正在寻找有关使用开源解决方案来实现相同目标的建议。不用说，数据量巨大，大数据平台必不可少。

据我了解，

1.  需要将大量的音频文件转换为文本并将它们加载到 HDFS 中。

问题：有哪些可用的开源解决方案？

2\. 然后使用 map\reduce 对加载到 HDFS 的数据执行情感分析。

问题：有哪些开源解决方案可用于执行此操作？

我敢肯定，以我非常基本的理解，我可能错过了 1000 件事，但任何方向都会有很大帮助。

# php - 如何在php中检查表单中的任何字段是否为空

> ID：14331525
> 
> 赞同：10
> 
> 时间：2013-01-15T05:10:37.190
> 
> 标签：php, html, forms

每当我在表单中提交内容时，我都想检查是否有任何字段为空。到目前为止，我没有工作

```
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$username = $_POST['username'];
$password = $_POST['password'];
$passwordconf = $_POST['passwordconf'];
$email = $_POST['email'];
$securityq = $_POST['securityq'];
$qanswer = $_POST['qanswer'];

if(empty($firstname) || empty($lastname) || empty($username) || empty($password) || empty($passwordconf) || empty($email) || empty($securityq) || empty($qanswer))
{
    echo "You did not fill out the required fields.";
} 
```

和表格

```
<form name="registrationform" action="register.php">
    First Name:<input type="text" name="firstname">
    Last Name:<input type="text" name="lastname">
    Email:<input type="text" name="email">
    Username:<input type="text" name="username">
    Password:<input type="password" name="password">
    Confirm Password:<input type="password" name="passwordconf">
    Security Question:<input type="text" name="securityq">
    Answer:<input type="text" name="qanswer">
    <input type="submit" name="submit" value="Register">
</form> 
```

如果有帮助，这里是注册页面[http://www.myjournal.tk/register.html](http://www.myjournal.tk/register.html)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-15T05:13:43.440

您的表单缺少方法...

```
<form name="registrationform" action="register.php" method="post"> //here 
```

无论如何要检查发布的数据，您可以使用[isset()](http://php.net/manual/en/function.isset.php) ..

> 确定变量是否已设置且不为 NULL

```
if(!isset($firstname) || trim($firstname) == '')
{
   echo "You did not fill out the required fields.";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T05:16:45.170

```
Specify POST method in form
<form name="registrationform" action="register.php" method="post">

your form code

</form> 
```

# c++ - 打印文件夹中的多个文档

> ID：14331527
> 
> 赞同：0
> 
> 时间：2013-01-15T05:10:58.463
> 
> 标签：c++, printing, com, atl, printer-properties

我只需要使用 C++ 代码在一个文件夹中打印多个文档。我正在使用`IOleCommandTarget.Exec()`方法。

第一次我必须显示打印配置对话框（我已设置“ `OLECMDEXECOPT_PROMPTUSER`”以显示第一次打印的打印配置对话框）并获取用户输入，如纸张方向、份数等。我必须使用相同的设置后续文件。

谁能说如何获得为首次打印设置的用户输入？我还看到下一个打印不是在打印对话框中等待“用户输入”（显示第一个文档打印）。如何使其同步？

这是我的代码：

```
 CComQIPtr<IOleCommandTarget> spCommandTarget(DocumentObj); 
 spCommandTarget->Exec(&CGID_MSHTML, IDM_PRINT, OLECMDEXECOPT_DODEFAULT, NULL, NULL); 
```

# file - 想要以 application/x-zip-compressed 格式压缩文件夹

> ID：14331531
> 
> 赞同：2
> 
> 时间：2013-01-15T05:11:32.393
> 
> 标签：file, compression, format, directory

我在该文件夹中有一个文件夹，我有 css 文件和图像。我想以 application/x-zip-compressed 格式压缩该文件夹。但我无法压缩它..

我尝试过的我在 Zip 中压缩它并尝试在线转换格式.. 我在谷歌中检查但无法找到解决方案..

我想在我的项目中上传这种格式的文件夹..

请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:53:29.777

“x-zip”有什么特别之处？[它甚至是“真正的格式”（意思是不是自制的）吗，我在IANA 的“application/*”MIME 类型列表中](http://www.iana.org/assignments/media-types/application)找不到它。

我将我的 zip 文件上传为使用 Winzip、7Zip、WinRAR、Windows 的本机“压缩文件夹”东西、Linux 的 gzip 制作的静态资源没有问题...

您的问题是 OSX 特有的还是什么？您不能只安装能够制作 *.zip 档案的众多免费程序之一或使用 Windows“右键单击目录 -> 发送到 -> 压缩（压缩）文件夹”吗？

快速的 Google 搜索会出现[http://createzipfiles.com/](http://createzipfiles.com/)之类的内容，但这意味着您可以将内容上传到 $_GOD 知道什么样的网站...

# fubumvc - FubuMvc 1.0 中的验证

> ID：14331538
> 
> 赞同：1
> 
> 时间：2013-01-15T05:12:08.947
> 
> 标签：fubumvc

我是使用 FubuMvc 的新手，我最近更新到没有任何文档的 1.0 版，而且代码中似乎有很多重大更改，我试图了解验证规则和验证的一般工作原理扶布。

即使我导入 FubuMVC.Validation 也找不到验证方法

```
this.Validation(x => { 
    x....
}); 
```

是否有任何新方法，我只是想清楚验证如何在 fubu 中发生的概念。

我可以应用约定进行验证吗？示例：对包含名为“电子邮件”的字段的所有实体应用标准格式的正则表达式验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:36:43.870

新的 FubuMVC.Validation 瓶完全是嵌入式的，根本不需要太多配置。如果要配置它适用的链，只需执行以下操作：

改变设置（x => ...）；<--- 在您的 FubuRegistry 中

目前，我们没有以开箱即用的方式进行常规验证*。*你有两种方法：

1.  属性
2.  FubuMVC 中的 OverridesFor DSL。

可以在此处（分别）找到这两个示例：

1.  [https://github.com/DarthFubuMVC/fubuvalidation/blob/master/src/FubuMVC.Validation.StoryTeller/User.cs](https://github.com/DarthFubuMVC/fubuvalidation/blob/master/src/FubuMVC.Validation.StoryTeller/User.cs)
2.  [https://github.com/DarthFubuMVC/fubuvalidation/blob/master/src/FubuMVC.Validation.StoryTeller/AccessorOverridesModel.cs](https://github.com/DarthFubuMVC/fubuvalidation/blob/master/src/FubuMVC.Validation.StoryTeller/AccessorOverridesModel.cs)

**话虽如此...**

任何实现 IFieldValidationSource 的东西都会自动注册到您的容器中。这就是我们将 OverridesFor 转换为规则的方式，例如：

[https://github.com/DarthFubuMVC/fubuvalidation/blob/master/src/FubuMVC.Validation/AccessorRulesFieldSource.cs](https://github.com/DarthFubuMVC/fubuvalidation/blob/master/src/FubuMVC.Validation/AccessorRulesFieldSource.cs)

因此，您可以反映该属性并返回一个 EmailFieldRule。像这样的东西：

[https://gist.github.com/4540861](https://gist.github.com/4540861)

希望这可以帮助，

乔什

# cordova - 如何在android应用程序的phonegap中调用网络服务？

> ID：14331539
> 
> 赞同：2
> 
> 时间：2013-01-15T05:12:13.680
> 
> 标签：cordova

我是phonegap的初学者。我在 phonegap android 中开发了本机应用程序。现在这个应用程序只是静态的，当我单击更新按钮时，我想在我的应用程序上创建更新按钮，然后我的 web 服务将被调用，并且这些数据本地存储在应用程序中意味着本地数据库中。

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:22:52.957

我个人喜欢的一个简单示例可以在这里找到：[http](http://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/) ://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/ 。它适用于 PHP / MySQL Web 服务器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-30T11:57:57.197

一种快速简便的方法是使用 AJAX 调用服务，您可以使用[HTML5 的 localStorage](http://diveintohtml5.info/storage.html)来存储数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T10:21:00.253

您可以使用以下代码行调用 PhoneGap 中的 Web 服务：-

```
 $.post( url, { user_id:userID,password:password} , function( data ) {
                                                            if(data.status==true){

                                                                /*Your Code*/     
                                                            }else{
                                                                /*Your Code*/  

                                                            }
                                                          },"json"); 
```

# android - GCMService 包名表示法

> ID：14331540
> 
> 赞同：0
> 
> 时间：2013-01-15T05:12:28.320
> 
> 标签：android, google-cloud-messaging

我已经开始在我的应用程序中集成 GCM。关于需要放置 GCMIntentService 的包名称，我几乎没有任何疑问。正如 android.developer 网站所说

```
By default, it must be named .GCMIntentService, unless the
application uses a custom BroadcastReceiver that redefines its name. 
```

我的应用程序之前使用的是服务类，它`BackgroundService`在`com.abc.xyz.service`包中被调用。我的根包名称是`com.abc.xyz.ui.activity`. 我已经浏览了[这个链接](https://stackoverflow.com/questions/13360219/how-to-rename-or-move-gcmintentservice)和[这个链接。](http://dexxtr.com/post/28188228252/rename-or-change-package-of-gcmintentservice-class)解决方案适用于那里的包名，但我的包名不一样。因为我的根包不同。

我的查询是**我需要重命名我的包结构还是有其他方法？**我不想将包名称重命名为我们从一开始就使用的标准格式。那么有没有其他方法可以做到这一点。提前致谢。

**编辑**

```
<receiver
            android:name="com.abc.xyz.service.GCMReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.abc.xyz.ui.activity" />
            </intent-filter>
        </receiver>

        <service android:name="com.abc.xyz.service.BackgroundService" /> 
```

**更新并完成答案**

正如 Anup 所提到的，只要您正确地限定文件，您将文件放在哪里并不重要。我的工作也是如此。你可以拿参考。我的[其他问题链接](https://stackoverflow.com/questions/14397202/onregistered-from-gcmintentservice-never-called)帮助我获得了答案。[我的这个问题链接](https://stackoverflow.com/questions/14397202/onregistered-from-gcmintentservice-never-called)，因为它包含我的清单。所以我接受阿努普的回答，因为它至少没有错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:18:56.017

只要您在服务的清单文件声明中正确限定它，AFAIK 真的不重要。你可以把它放在任何你想要的包里，只要确保你在任何地方使用它都正确地限定了它。

# visual-studio-2008 - 从文本框报告链接到另一个报告（不是子报告）

> ID：14331544
> 
> 赞同：1
> 
> 时间：2013-01-15T05:12:37.043
> 
> 标签：visual-studio-2008, ssrs-2008, reporting-services

我必须在其中一个链接中保留一个链接`textbox`，它必须被重定向到另一个报告（不是子报告）。

`Parameter`报告本身的价值`textbox`。但是当我尝试单独执行报告时它可以正常工作。但是当我链接到页面时，它不会重定向到报告。

请帮助我，我在这个问题上浪费了我的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:05:52.490

您必须添加钻取报告链接，单击一个报告会将您带到另一个报告。

这里有一些链接，可能会有所帮助[Link1](http://msdn.microsoft.com/en-us/library/ms159847%28v=sql.90%29.aspx) , [Link2](http://technet.microsoft.com/en-us/library/ff519554.aspx)

# java - 一个数据库中的表是否可以为不同数据库中的另一个表声明 OnetoMany 声明

> ID：14331546
> 
> 赞同：1
> 
> 时间：2013-01-15T05:12:53.037
> 
> 标签：java, hibernate, jakarta-ee, jpa, azure-sql-database

我想知道是否有一种方法可以让一个实体声明 OneToMany 或通过 JPA 访问不同数据库中的另一个表。

JPA 是否可以访问多个数据库和一个实体引用另一个数据库的另一个实体？

谢谢，安舒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:22:24.773

不，您不能在休眠中执行此操作... Jpa 将为您在 cfg 文件中映射的数据库生成查询...您不能在单个 cfg 文件中一次配置两个数据库...

# php - php获取对象的字节长度，用于标头

> ID：14331549
> 
> 赞同：0
> 
> 时间：2013-01-15T05:12:59.607
> 
> 标签：php, soap, content-length

我需要设置 php `header("Content-Length: length")`，其中 length 是一个字节值。现在，由于我的发布请求的大小可变，我已将其任意设置为 1 兆字节，但我想动态生成它，以免出现错误数据。

在将对象发送到服务器之前，如何获取对象的字节大小。我正在做一个`soapCall`，所以我必须在调用之前设置标题，而不是添加参数`curl`或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:35:19.623

您可以执行以下操作（应该有更好的，我知道）：

```
$before = memory_get_usage(TRUE);
$objectClone = clone $yourObject;
$after = memory_get_usage(TRUE);
$objectSize = $after - $before;  #size of your object
$objectClone = $null; #dispose of clone 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:28:00.223

我不熟悉 SOAP，如果这不适用于您的情况，请原谅我。

不久前，我不得不为我的一个个人项目解决这个问题，我在其中动态生成大型 ZIP 并将其流式传输给用户。我的解决方案是通过生成一次并记录其大小来预先计算对象的大小。此解决方案的缺点是，如果对象的内容发生更改，则需要重新计算大小，但如果您有有限数量的对象，其大小不会经常更改，它可能对您有用。

我使用的代码如下所示：

```
ob_start();
$zip_length = 0;
$zip = new ZipStream();
foreach ($files as $virtual_path => $file_path) {
    $zip->add_file_from_path($virtual_path, $file_path);
    $zip_length += strlen(ob_get_contents());
    ob_clean(); /* prevent excessive memory usage */
}
$zip->finish();
$zip_length += strlen(ob_get_contents());
ob_end_clean();
/* Store $zip_length somewhere */ 
```

如果这对于您的目的来说太笼统了，也许可以考虑指定您要发送给用户的“对象”。

# entity-framework-4 - EF4.4 - 无法识别列表导航属性

> ID：14331554
> 
> 赞同：0
> 
> 时间：2013-01-15T05:13:23.390
> 
> 标签：entity-framework-4, navigation

我正在学习 EF，但我遇到了导航问题。我希望你们能告诉我路径:)

当我运行此代码时，EF 显示此消息：

> System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.MissingMethodException：找不到方法：'System.Collections.Generic.List`1 Sis.Model.Ft1Cap300.get_Ft1Cap300l()'。”

我真的不明白问题出在哪里；我认为我的导航属性还可以，但 EF 说它无法识别 Ft1Cap300.Ft1Cap300l 属性。

我有 3 个模型实体。我将发布课程及其配置

```
public class Ft1Caratula
{
    [Key]
    public String EncuestaId { get; set; }
    public Int32 DistritoId { get; set; }       //fk
    public String Conglomerado { get; set; }
    [Required]
    public Int32 Area { get; set; }
    [Required]
    public Int32 NumHogar { get; set; }
    [Required]
    public Int32 TotHogar { get; set; }
    public Int32 TipoComunidad { get; set; }
    [Required]
    public String JefeNombres { get; set; }
    [Required]
    public String JefeApePat { get; set; }
    [Required]
    public String JefeApeMat { get; set; }
    public Int32 DirTipo { get; set; }
    public String DirDireccion { get; set; }
    public Nullable<Int32> Dir1 { get; set; }
    public String Obs { get; set; }
    public Int32 Idioma { get; set; }
    public String Idioma_o { get; set; }
    [Required]
    public DateTime Ent1Fecha { get; set; }
    [Required]
    public Int32 Ent1Res { get; set; }
    public String Ent1Res_o { get; set; }
    public String EncId { get; set; }           
    public DateTime EncFecha { get; set; }

    public virtual UbiDistrito Distrito { get; set; }
    public virtual SegTecnico Encuestador { get; set; }

    public virtual List<Ft1Cap100> Ft1Cap100 { get; set; }
    public virtual List<Ft1Cap300> Ft1Cap300 { get; set; }
}

public class Ft1Cap300
{
    public String EncuestaId { get; set; }
    [Required]
    public int P301 { get; set; }

    public virtual Ft1Caratula Ft1Caratula { get; set; }
    public virtual List<Ft1Cap300l> Ft1Cap300l { get; set; }
}

public class Ft1Cap300l
{
    public String EncuestaId { get; set; }
    public int NOrden { get; set; }
    public String P302 { get; set; }
    [Required]
    public int P303 { get; set; }
    [Required]
    public int P304 { get; set; }
    public String P305_1 { get; set; }
    public String P305_2 { get; set; }
    public String P305_3 { get; set; }

    public virtual Ft1Cap300 Ft1Cap300 { get; set; }
}

public class Ft1CaratulaConfiguracion : EntityTypeConfiguration<Ft1Caratula>
{
    public Ft1CaratulaConfiguracion()
    {
        ToTable("ft1caratula", "data");
        HasRequired(p => p.Encuestador).WithMany(l => l.Ft1Caratulas).HasForeignKey(p => p.EncId);
        HasRequired(p => p.Distrito).WithMany(l => l.Ft1Caratulas).HasForeignKey(p => p.DistritoId);
    }
}

public class Ft1Cap300Configuracion : EntityTypeConfiguration<Ft1Cap300>
{
    public Ft1Cap300Configuracion()
    {
        ToTable("ft1cap300", "data");
        HasKey(p => new { p.EncuestaId });
        HasRequired(p => p.Ft1Caratula).WithMany(l => l.Ft1Cap300).HasForeignKey(p => p.EncuestaId);

    }
}

public class Ft1Cap300lConfiguracion : EntityTypeConfiguration<Ft1Cap300l>
{
    public Ft1Cap300lConfiguracion()
    {
        ToTable("ft1cap300l", "data");
        HasKey(p => new { p.EncuestaId, p.NOrden });
        HasRequired(p => p.Ft1Cap300).WithMany(l => l.Ft1Cap300l).HasForeignKey(p => p.EncuestaId);
    }
} 
```

我希望你能帮我解决这个问题。我有“Programming EF: CodeFirst”一书作为指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:26:43.257

你的代码目前存在以下问题

```
public class Ft1CaratulaConfiguracion : EntityTypeConfiguration<Ft1Caratula>
    {
        public Ft1CaratulaConfiguracion()
        {
            ToTable("ft1caratula", "data");
            HasRequired(p => p.Encuestador).WithMany(l => l.Ft1Caratulas).HasForeignKey(p => p.EncId);
            HasRequired(p => p.Distrito).WithMany(l => l.Ft1Caratulas).HasForeignKey(p => p.DistritoId);
        }
    } 
```

Ft1Caratula 类没有属性`Encuestador`和`Distrito`。

另外在

```
public virtual List<Ft1Cap100> Ft1Cap100 { get; set; } 
```

您正在使用属性作为类型。所以你应该得到一些编译时错误。

# php - 在Mysql中按文件插入数据时出错

> ID：14331560
> 
> 赞同：1
> 
> 时间：2013-01-15T05:14:49.413
> 
> 标签：php, mysql

我正在尝试通过 Mysql 数据库中的文本文件插入数据并收到此错误

```
1148: The used command is not allowed with this MySQL version

 ADOConnection._Execute(LOAD DATA LOCAL INFILE '/var/www/in2fonenew/inv/test.txt'
 INTO TABLE  tbl_transaction FIELDS TERMINATED BY '||' enclosed by '`..., false) 
```

为此目的，下面提到了查询

```
$sql="LOAD DATA LOCAL INFILE '".$docroot."/inv/".$dbfile."' INTO TABLE 
tbl_transaction FIELDS TERMINATED BY '||' enclosed by '`' LINES TERMINATED
 BY '|||||' (field1,field2,field3,field4,field5,field6)"; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:19:12.953

来源：[GitHub](https://github.com/weecology/retriever/issues/31)

> “如果在服务器或客户端中禁用了 LOAD DATA LOCAL INFILE，则尝试发出此类语句的客户端会收到以下错误消息：错误 1148：此 MySQL 版本不允许使用的命令”

`LOAD DATA LOCAL INFILE`必须显式启用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T05:19:50.590

从 MySQL 5.5 手册页：

> LOCAL 仅在您的服务器和客户端都已配置为允许时才有效。例如，如果 mysqld 以 --local-infile=0 启动，则 LOCAL 不起作用。请参见第 6.1.6 节，“LOAD DATA LOCAL 的安全问题”。

您应该设置选项：

```
local-infile=1 
```

进入my.cnf 文件的**[mysql]条目或使用****--local-infile**选项调用 mysql 客户端：

```
mysql --local-infile -uroot -pyourpwd yourdbname 
```

您必须确保在**[mysqld]**部分中也定义了相同的参数，以启用“本地 infile”功能服务器端。

这是一个安全限制。

# php - 滚动时，Twitter Bootstrap 模态窗口不会保持在屏幕中央

> ID：14331570
> 
> 赞同：1
> 
> 时间：2013-01-15T05:16:55.363
> 
> 标签：php, css, twitter-bootstrap, modal-dialog

Twitter Bootstrap 和 CSS 的新手，但不是一般的编程。对一个让我在寻找解决方案时失眠的问题感到好奇。我目前正在打开一个模式窗口以从用户那里收集一些数据。页面通过滚动条延伸到屏幕底部。

模式在页面的中心打开，而不是在视图屏幕的中心。我正在使用下面的 CSS：

```
 .modal {  
      width:  200px;
      height: 200px;  
      position:fixed;
      top: 50%;
      left: 50%;
      margin-left:  -100px;
      margin-top: -100px;
      z-index: 1050;
      background-color: #ffffff;
      border: 1px solid #999;
      border: 1px solid rgba(0, 0, 0, 0.3);
      *border: 1px solid #999;
      -webkit-border-radius: 6px;
       -moz-border-radius: 6px;
         border-radius: 6px;
      outline: none;
      -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
        -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
        box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
       -webkit-background-clip: padding-box;
       -moz-background-clip: padding-box;
         background-clip: padding-box;
    } 
```

HTML如下：

```
 <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog"   
 aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal"     
 aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:00:11.607

为了让窗口显示在屏幕中心，您需要使用Javascript，确定屏幕中心相对于文档的位置，并将模态窗口定位为“位置：固定；”。为了简单起见，我建议使用 JQuery，这里有一些示例代码。

```
function showModal(){
  var $modal = $(".modal");
  var winH = $(window).height();
  var winW = $(window).width();

  $modal.css({
    position:"fixed",
    left: ((winW - $modal.outerWidth())/2 + $(document).scrollLeft()),
    top: ((winH - $modal.outerHeight())/2 + $(document).scrollTop())
  }).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T22:04:34.590

尝试给 body 一个 height:100% ，它应该可以正常工作。

```
body{
min-height:100%;
} 
```

[jsFiddle](http://jsfiddle.net/qBSfg/1/)

# database - Rails 没有正确读取 database.yml 中的环境变量

> ID：14331571
> 
> 赞同：6
> 
> 时间：2013-01-15T05:16:57.690
> 
> 标签：database, ruby-on-rails-3, environment-variables, passenger

我的 database.yml 设置如下：

```
development:
  adapter: mysql2
  encoding: utf8
  database: devel
  username: root
  host: localhost
  port: 3306
  timeout: 5000

# ... snip ...

production:
  adapter: mysql2
  encoding: utf8
  database: prod
  username: <%= ENV["DB_USER"] %>
  password: <%= ENV["DB_PASSWORD"] %>
  host: <%= ENV["DB_HOST"] %>
  port: 3306
  timeout: 5000 
```

问题是，尽管设置了我的环境变量，Rails 并没有正确读取这些变量。当我在 EC2 上启动 Phusion 支持的 Nginx 服务器时，我收到以下消息：

```
Access denied for user 'root'@'localhost' (using password: NO) (Mysql2::Error) 
```

我确认 Phusion 正在生产环境中启动 Rails；我将开发和测试配置中的用户名和主机更改为唯一名称，并且`'root'@'localhost'`始终显示为错误消息。此外，如果我将用户名和密码硬编码到 YAML 文件中，服务器将正常启动。

我怀疑我没有正确设置我的环境变量，因为 MySQL 一直声称我试图在没有密码的情况下以“root”身份登录。我最初将它们从 .bashrc 文件中导出，但在阅读[了这个问题](https://serverfault.com/questions/261802/profile-vs-bash-profile-vs-bashrc)后，我意识到这不是正确的方法。搜索后，我偶然发现了[这篇博](https://coderwall.com/p/djrfra)文，所以我按照说明创建了这三个文件：

/usr/local/etc/env

```
export RAILS_ENV=production
export DB_PASSWORD= (snip)
export DB_USER=doorbells 
```

/usr/local/etc/ruby_wrapper

```
#!/bin/sh

source /usr/local/etc/env
exec /home/rooby/.rvm/wrappers/ruby-1.9.3-p362@doorbells-dev/ruby "$@" 
```

/etc/profile.d/env.sh

```
#!/bin/sh

source /usr/local/etc/env 
```

在我的 nginx.conf 文件中，我使用这一行：

```
passenger_ruby /usr/local/etc/ruby_wrapper; 
```

我已经重新启动我的服务器无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-16T06:47:10.940

上述解决方案对我不起作用。但是，我找到了 [如何在 YAML 文件中使用变量的解决方案？](https://stackoverflow.com/questions/8722949/how-do-i-use-variables-in-a-yaml-file)

我的 .yml 文件包含以下内容：

```
development:
gmail_username: <%= ENV["GMAIL_USERNAME"] %>
gmail_password: <%= ENV["GMAIL_PASSWORD"] %> 
```

解决方案如下所示：

```
template = ERB.new File.new("path/to/config.yml.erb").read
processed = YAML.load template.result(binding) 
```

因此，当您在 .yml 文件中引入 scriptlet 标签时，它更像是 erb 模板。所以先把它作为一个erb模板读取，然后如上图加载yml。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-05T16:39:16.127

我在 Ubuntu 12.04 上遇到了同样的问题。

`/var/log/nginx/error.log/`在我看到的 nginx 错误日志 ( ) 中，

```
[ ... ]: [App 8509 stderr] /path/to/ruby_wrapper.sh: 2: /path/to/ruby_wrapper.sh: 
[ ... ]: [App 8509 stdout] 
[ ... ]: [App 8509 stderr] source: not found 
```

`/bin/sh`好像没看懂`source`命令。因此，我将其更改为 simple `.`，它的作用相同。

完整的更改`ruby_wrapper.sh`如下所示：

```
#!/bin/sh

. /usr/local/etc/env
exec /home/rooby/.rvm/wrappers/ruby-1.9.3-p362@doorbells-dev/ruby "$@" 
```

这对你有帮助吗？

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-08-22T05:12:42.803

首先，使用

```
username: ENV["DB_USER"]
password: ENV["DB_PASSWORD"]
host: ENV["DB_HOST"] 
```

反而

```
username: <%= ENV["DB_USER"] %>
password: <%= ENV["DB_PASSWORD"] %>
host: <%= ENV["DB_HOST"] %> 
```

# ajax - 如何在 Rails 中的多页表单上加载部分内容

> ID：14331574
> 
> 赞同：0
> 
> 时间：2013-01-15T05:17:50.323
> 
> 标签：ajax, ruby-on-rails-3, jquery

我正在尝试转换 Railscast #217。我想更改一个多部分表单，以便它使用 AJAX 加载部分。我有一个用户可以注册的网站。我有一个注册表，它由三个部分组成（_step1.html.erb 到 _step3.html.erb）。

**user.rb**包含一个部分名称和方法的数组，以转到下一步和上一步：

```
def current_step
  @current_step || steps.first
end

def steps
  %w[step1 step2 step3]
end

def next_step
  self.current_step = steps[steps.index(current_step) + 1]
end

def previous_step
  self.current_step = steps[steps.index(current_step) - 1]
end

def first_step?
  current_step == steps.first
end

def last_step?
  current_step == steps.last
end 
```

**新**的行动是为此发起的：

```
def new
  @user = User.new
  session[:user_step] = nil
end 
```

**创建**操作是在下一步和上一步之间移动的原因：

```
def create
  @user = User.new(params[:user])
  respond_to do |format|
    format.js do
      @user.current_step = session[:user_step]
      if params[:prev_button]
        @user.previous_step
      elsif @user.last_step?
        @user.save
      else
        @user.next_step
      end
      session[:user_step] = @user.current_step
    end
  end
end 
```

当单击表单上的“下一步”时， **new.html.erb文件呈现以下部分内容：**

```
<%= form_for(@user, :html => { :class => "form-horizontal" }, remote: true) do |f| %>
<div id="partial">
  <%= render @user.current_step, :f => f %>
</div>
<%= f.submit "Previous", class: "btn btn-primary", :name => "prev_button"   %>
<%= f.submit "Next", class: "btn btn-primary", :name => "next_button" %> 
```

我的**create.js.erb**看起来像这样。

```
$("#partial").html("<%= escape_javascript(render @user.current_step) %>"); 
```

我想我被挂断的可能是当 create 与 new 动作被调用时？当我在路由**用户/新用户**上时，我填写表格并单击“下一步”。然后，当我在部分第 2 步并单击“下一步”时，我移动到部分 3。我可以移回部分 2，但是当我尝试在部分 2 上点击前一个时，没有任何反应。我没有被送回部分 1。现在无论我在路线上的任何部分仍然说**用户/新**，但我知道**创建** 操作被调用，因为我可以在部分 2 和 3 之间切换，而不是回到部分 1。现在部分 2 和 3 中只有文本，但部分 1 看起来像这样：

```
<div class="control-group">
  <%= f.label :first_name, :class => 'control-label' %>
  <div class="controls">
    <%= f.text_field :first_name, class: 'required' %>
  </div>
</div>

<div class="control-group">
  <%= f.label :last_name, :class => 'control-label' %>
  <div class="controls">
    <%= f.text_field :last_name, class: 'required' %>
  </div>
</div> 
```

有任何想法吗？

我想我看到了问题。当我加载部分 2 和 3 时，我只渲染文本。但在部分 1 中，我需要渲染 <%= 和 %>。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:20:28.543

你所拥有的究竟是做什么的？

我确实看到您正在设置 current_step，然后在调用 next_step 之后，它再次设置 current_step。然后在 js.erb 文件中再次调用 next_step ，这意味着 current_step 每次通过都会更改 3 次。

因此，当您遇到问题时，current_step 可能远远超出您的 3 个步骤。

# hbase - 从 hbase 中删除列

> ID：14331575
> 
> 赞同：1
> 
> 时间：2013-01-15T05:17:54.380
> 
> 标签：hbase

我正在尝试找出如何处理 hbase。我从 Hbase 列族中删除某些列时遇到问题。我创建了一个带有列族的表：

```
Configuration conf = HBaseConfiguration.create();
HBaseAdmin hbase = new HBaseAdmin(conf);
HTableDescriptor desc = new HTableDescriptor("new_table");
HColumnDescriptor cf = new HColumnDescriptor("zz".getBytes());
desc.addFamily(cf);
hbase.createTable(desc); 
```

然后，我在其中插入了一些数据：

```
private static void putData(int j) throws IOException {
    for (int i=1; i <= j; i++) {
        String column = "EEE" + i;
        String value = "JJ" + i;
        HTable table = new HTable(conf, "new_table");
        Put p = new Put(Bytes.toBytes("zz"));
        p.add(Bytes.toBytes("zz"), Bytes.toBytes(column),
                  Bytes.toBytes(value));
        table.put(p);
    }
} 
```

在阅读了一些文档后，我尝试使用以下代码从列族“zz”中删除所有内容：

```
 for (int i=1; i <= 1000; i++) {
        String column = "EEE" + i;
        HTable table = new HTable(conf, "new_table");
        Delete delete = new Delete();
        delete.deleteColumns(Bytes.toBytes("zz"), Bytes.toBytes(column));
        table.delete(delete);
    } 
```

但我得到了例外：

```
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.4.3-1240972, built on 02/06/2012 10:48 GMT
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:host.name=192.168.1.107
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:java.version=1.7.0-ea
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:java.vendor=Oracle Corporation
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:java.home=/Library/Java/JavaVirtualMachines/JDK 1.7.0 Developer Preview.jdk/Contents/Home/jre
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:java.class.path=/Users/urijvoskresenskij/Documents/workspace/Hbase/bin:/Users/urijvoskresenskij/hbase-0.94.3/lib/activation-1.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/asm-3.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/avro-1.5.3.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/avro-ipc-1.5.3.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-beanutils-1.7.0.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-beanutils-core-1.8.0.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-cli-1.2.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-codec-1.4.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-collections-3.2.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-configuration-1.6.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-digester-1.8.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-el-1.0.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-httpclient-3.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-io-2.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-lang-2.5.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-logging-1.1.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-math-2.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/commons-net-1.4.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/core-3.1.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/guava-11.0.2.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/hadoop-core-1.0.4.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/high-scale-lib-1.1.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/httpclient-4.1.2.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/httpcore-4.1.3.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jackson-core-asl-1.8.8.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jackson-jaxrs-1.8.8.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jackson-mapper-asl-1.8.8.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jackson-xc-1.8.8.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jamon-runtime-2.3.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jasper-compiler-5.5.23.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jasper-runtime-5.5.23.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jaxb-api-2.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jaxb-impl-2.2.3-1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jersey-core-1.8.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jersey-json-1.8.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jersey-server-1.8.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jettison-1.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jetty-6.1.26.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jetty-util-6.1.26.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jruby-complete-1.6.5.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jsp-2.1-6.1.14.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jsp-api-2.1-6.1.14.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/jsr305-1.3.9.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/junit-4.10-HBASE-1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/libthrift-0.8.0.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/log4j-1.2.16.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/metrics-core-2.1.2.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/netty-3.2.4.Final.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/protobuf-java-2.4.0a.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/servlet-api-2.5-6.1.14.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/slf4j-api-1.4.3.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/slf4j-log4j12-1.4.3.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/snappy-java-1.0.3.2.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/stax-api-1.0.1.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/velocity-1.7.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/xmlenc-0.52.jar:/Users/urijvoskresenskij/hbase-0.94.3/lib/zookeeper-3.4.3.jar:/Users/urijvoskresenskij/hbase-0.94.3/hbase-0.94.3-tests.jar:/Users/urijvoskresenskij/hbase-0.94.3/hbase-0.94.3.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.aop-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.asm-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.aspects-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.beans-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.context-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.context.support-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.core-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.expression-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.instrument-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.instrument.tomcat-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.jdbc-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.jms-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.orm-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.oxm-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.test-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.transaction-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.web-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.web.portlet-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.web.servlet-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/dist/org.springframework.web.struts-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Downloads/commons-logging-1.1.1/commons-logging-1.1.1.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.web-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.aop-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.asm-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.aspects-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.beans-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.context-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.context.support-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.core-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.expression-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.instrument-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.instrument.tomcat-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.jdbc-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.jms-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.orm-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.oxm-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.test-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.transaction-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.web.portlet-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.web.servlet-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Desktop/spring-framework-3.1.3.RELEASE/src/org.springframework.web.struts-sources-3.1.3.RELEASE.jar:/Users/urijvoskresenskij/Downloads/commons-logging-1.1.1/commons-logging-1.1.1-javadoc.jar:/Users/urijvoskresenskij/Downloads/commons-logging-1.1.1/commons-logging-1.1.1-sources.jar:/Users/urijvoskresenskij/Downloads/commons-logging-1.1.1/commons-logging-adapters-1.1.1.jar:/Users/urijvoskresenskij/Downloads/commons-logging-1.1.1/commons-logging-api-1.1.1.jar:/Users/urijvoskresenskij/Downloads/commons-logging-1.1.1/commons-logging-tests.jar
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:java.library.path=/Users/urijvoskresenskij/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/_q/z5blmlxs39d4pmmv1fj9mh500000gn/T/
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:os.arch=x86_64
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:os.version=10.7.5
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:user.name=urijvoskresenskij
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:user.home=/Users/urijvoskresenskij
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Client environment:user.dir=/Users/urijvoskresenskij/Documents/workspace/Hbase
13/01/15 15:02:24 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
13/01/15 15:02:24 INFO zookeeper.ClientCnxn: Opening socket connection to server /0:0:0:0:0:0:0:1:2181
13/01/15 15:02:24 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 11768@MacBook-Air-Urij.local
13/01/15 15:02:24 INFO client.ZooKeeperSaslClient: Client will not SASL-authenticate because the default JAAS configuration section 'Client' could not be found. If you are not using SASL, you may ignore this. On the other hand, if you expected SASL to work, please fix your JAAS configuration.
13/01/15 15:02:24 INFO zookeeper.ClientCnxn: Socket connection established to localhost/0:0:0:0:0:0:0:1:2181, initiating session
13/01/15 15:02:24 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, sessionid = 0x13c3c95c6d50004, negotiated timeout = 40000
Exception in thread "main" java.lang.IllegalArgumentException: Row is null
    at org.apache.hadoop.hbase.KeyValue.createByteArray(KeyValue.java:547)
    at org.apache.hadoop.hbase.KeyValue.<init>(KeyValue.java:436)
    at org.apache.hadoop.hbase.KeyValue.<init>(KeyValue.java:405)
    at org.apache.hadoop.hbase.KeyValue.<init>(KeyValue.java:384)
    at org.apache.hadoop.hbase.KeyValue.<init>(KeyValue.java:354)
    at org.apache.hadoop.hbase.client.Delete.deleteColumns(Delete.java:209)
    at org.apache.hadoop.hbase.client.Delete.deleteColumns(Delete.java:192)
    at MainHBase.deleteData(MainHBase.java:74)
    at MainHBase.main(MainHBase.java:85) 
```

也许有人知道如何正确删除数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:17:57.543

```
Delete delete = new Delete(); 
```

Row 为空 --> 查看[apidocs](http://hbase.apache.org/apidocs/index.html)。Delete**没有**空的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:06:06.687

我只是想澄清一下 - 我能够找出如何从基础中删除 smth。首先，您需要使用带有列族参数的构造函数来创建 Delete 对象。这是帮助我的代码：

```
String column = "EEE" + i;
HTable table = new HTable(conf, "new_table");
Delete delete = new Delete(Bytes.toBytes("zz"));
delete.deleteColumns(Bytes.toBytes("zz"), Bytes.toBytes(column));
table.delete(delete); 
```

也许它会帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-09T06:15:36.993

这是来自 HBase 源代码：

```
/** Constructor for Writable.  DO NOT USE */
  public Delete() {
    this((byte [])null);
  } 
```

# ruby-on-rails - Rails 3 Capistrano 部署错误（在...解析块节点）

> ID：14331576
> 
> 赞同：0
> 
> 时间：2013-01-15T05:17:56.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano, yaml

我正在尝试使用 capistrano 将 rails 3.2.11 应用程序部署到 bluehost 共享主机上。我不断收到此错误

```
 [myapp.com] executing command
*** [err :: myapp.com] rake aborted!
*** [err :: myapp.com] (<unknown>): did not find expected node content while parsing a block node at line 18 column 13
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application/configuration.rb:115:in `database_configuration'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/railtie.rb:78:in `block (2 levels) in <class:Railtie>'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:26:in `block in on_load'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:25:in `each'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/railtie.rb:74:in `block in <class:Railtie>'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/releases/20130115050636/config/environment.rb:5:in `<top (required)>'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:103:in `require_environment!'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:297:in `block (2 levels) in initialize_tasks'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:93:in `block (2 levels) in <top (required)>'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:23:in `invoke_or_reboot_rake_task'
*** [err :: myapp.com] /home2/myappc/rails_apps/myapp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>' 
```

错误说`(<unknown>): did not find expected node content while parsing a block node at line 18 column 13`，但我不知道它实际指的是哪个文件。

这是`database_configuration`上面日志文件中的第 4 行

```
# Loads and returns the contents of the #database_configuration_file. The
      # contents of the file are processed via ERB before being sent through    
      # YAML::load.                                                             
      def database_configuration
        require 'erb'
        YAML::load(ERB.new(IO.read(paths["config/database"].first)).result)
      end 
```

我环顾四周，可能是 YAML 解析错误。所以我尝试在 irb 中使用它来查看是否有任何`.yml`文件导致了问题

```
YAML.load_file("filename.yml") 
```

但结果都很好。

如果需要，这是我的 Gemfile

```
gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'devise'
gem 'friendly_id', "~> 4.0.9"#, :git => "git://github.com/norman/friendly_id.git"
gem 'simple_form'
gem 'json'
gem 'cancan'
gem 'rqrcode-rails3' #imageqrcodes
gem 'mini_magick'
gem "breadcrumbs_on_rails"

group :production do
  gem 'pg'
  # gem 'thin' # Server used in production
end

group :development, :test do
  gem 'mysql2'
  gem 'capistrano'
  gem 'rvm-capistrano'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails'
  gem 'execjs', '1.4.0'
  gem 'therubyracer', :platforms => :ruby
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:04:59.540

问题是在我的`database.yml`文件中。我的密码以符号开头。我找不到逃避它的方法，所以我改变了它，它现在就像一个魅力。

# oracle - gv$aq 与 queue_table

> ID：14331579
> 
> 赞同：1
> 
> 时间：2013-01-15T05:18:22.733
> 
> 标签：oracle, oracle-aq

我知道这`gv$aq`是一个系统范围的视图，其中包含数据库中所有队列中处于不同状态的消息数量。

我的问题是：由于`gv$aq`与任何给定的数据相比，它将包含更多的数据`queue_table`，因此查询此视图以获取特定信息（消息数量等）将比直接查询自身`queue_table`花费更多的时间。`queue_table`为什么我们应该更好地查询`gv$aq`而不是队列表本身，有什么具体原因吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:56:41.370

该视图`qv$aq`仅包含每个队列的统计信息，例如消息数或平均等待时间。包含所有单独的`queue_table`消息。

要从 a 获取消息的数量`queue_table`，Oracle 必须检查所有消息并将它们汇总。要从`qv$aq`视图中获取统计信息，Oracle 只需从系统内存中查找它们，这要快得多。

# maven - 通过 webdav 传输站点文件时出现异常

> ID：14331582
> 
> 赞同：0
> 
> 时间：2013-01-15T05:18:43.600
> 
> 标签：maven, web, maven-3

使用 site-deploy 上传站点文件尚未完全奏效。在通过网络 DAV 将网页上传到网站的过程中，我始终遇到异常。通过这个过程。为什么会出现这个问题？

> 原因：org.apache.maven.plugin.MojoExecutionException：在 org.apache.maven.plugins.site.AbstractDeployMojo.push(AbstractDeployMojo.java:464) 上传站点时出错。部署（AbstractDeployMojo.java:296）在 org.apache.maven.plugins.site.AbstractDeployMojo.deployTo（AbstractDeployMojo.java:257）在 org.apache.maven.plugins.site.AbstractDeployMojo.execute（AbstractDeployMojo.java:165）在 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209) ... 27 更多原因：org. apache.maven.wagon.TransferFailedException：指定的源文件不存在：/home/directfn/hudson/jobs/NGP_OMS_SONAR/workspace/target/site/apidocs/com/directfn/oms/core/messaging_protocol/api/beans/inquiry/DSTReportRequestBean.html at org.apache.maven.wagon.providers.webdav .WebDavWagon.put(WebDavWagon.java:318) 在 org.apache.maven.wagon.providers.webdav.WebDavWagon.putDirectory(WebDavWagon.java:555) 在 org.apache.maven.wagon.providers.webdav.WebDavWagon.putDirectory (WebDavWagon.java:549)
> 
> ...引起：java.io.FileInputStream.open(Native Method) 的 java.io.FileInputStream.open(Native Method) 的 java.io.FileNotFoundException: /home/directfn/hudson/jobs api/beans/inquiry/DSTReportRequestBean.html (打开的文件太多)。 io.FileInputStream.(FileInputStream.java:138) 在 org.apache.maven.wagon.providers.webdav.PutInputStream.(PutInputStream.java:45)

# php - fancybox onclick 获取 id 没有被传递

> ID：14331587
> 
> 赞同：0
> 
> 时间：2013-01-15T05:19:20.373
> 
> 标签：php, javascript, jquery, fancybox, fancybox-2

因此，当您单击链接时，它会打开一个模式框并将 theid 发送到文件 requestajax.php，唯一的问题是我不知道如何获取 theid 的值。theid 是 id 值 $row['id'] 因为它是一个循环，有不同的 id。如果我将 var theid 放在 .fancybox 之外，则它不会被通过。有任何想法吗 ？

这是我的代码：

```
$(".cobox").fancybox({

    href : 'requestajax.php',
    type: 'ajax',   
    ajax : {
        type    : "GET",

        data    : {cid:theid},
        success: function(){ 
  }
    }

}); 
```

这是 html/php ：

```
<a id="<?=$row['id'];?>" class="cobox" href="#inline"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:03:49.053

通过编写以下代码使其工作：

```
$(".cobox").click(function(e) {
   var thid = this.id;
   $.fancybox({
    href : 'requestajax.php',
    type: 'ajax',   
    ajax : {
        type    : "GET",

        data    : {cid:thid},
        success: function(){ 
  }
    }

});  

            }); 
```

# jquery - 无法更改 jQuery Mobile 背景颜色？

> ID：14331596
> 
> 赞同：5
> 
> 时间：2013-01-15T05:20:14.043
> 
> 标签：jquery, css, jquery-mobile

我是第一次实现 jQuery Mobile，并且很难更改网站正文的背景颜色。您可以在这里查看源代码，而不是在这里发布所有 HTML 和 CSS（因为它很长）：[http ://www.tommaxwell.me](http://www.tommaxwell.me)

我已经尝试将它添加到桌面媒体查询，任何媒体查询之外的网站正文，但没有运气。这很奇怪，但我以前从未使用过 jQuery Mobile。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-15T05:27:35.013

在您的 siteredesign.css 中更改此 css 属性（确保它覆盖 jquery.mobile.css）：

.ui-body-c, .ui-overlay-c { 背景:#000; }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-08T07:42:20.760

作为更改数据主题本身 (.ui-body-c ..) 的替代方案，您还可以使用另一个预定义的数据主题，即主题“a”：

<div data-role="page" data-theme="a">

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T17:02:17.107

这适用于主 div：`data-role="page" data-theme="b"`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-04-02T18:03:48.600

为 jqm 定义了 5 个主题。

A 和 B 和 C 和 D 和 E 。

您应该为页面中的每个元素设置数据主题。没有元素的数据主题，它们的主题是“A”主题。

默认主题：

```
<div class="ui-content" role="main"> 
```

你最喜欢的主题：

```
<div class="ui-content" role="main" data-theme="e"> 
```

对于这五个主题中的自定义主题颜色，您应该更改 jquery.mobile.css 文件并且您应该了解 css 编码。

# hadoop - 使用安装在 Apache Hadoop 和 Cloudera Hadoop 中的 apache sqoop 有什么区别？

> ID：14331599
> 
> 赞同：0
> 
> 时间：2013-01-15T05:20:20.527
> 
> 标签：hadoop, cloudera, sqoop

为什么 Apache Sqoop 建议使用 Cloudera Hadoop 而不是 Apache Hadoop？

是否有任何与性能相关的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:11:00.680

Sqoop 的 Cloudera 发行版与 Apache Sqoop 版本匹配。不存在与业绩相关的重大问题。然而，在 CDH 上运行 Sqoop 的 Cloudera 发行版是有好处的，因为您可以免费获得漂亮的包装和简单的安装。

雅尔切克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-24T10:05:48.300

Sqoop 具有在 Hadoop 和关系数据库或大型机之间传输数据的单一功能，因此 cloudera 和 apache hadoop 之间没有这种区别。虽然 cloudera 中的配置非常简单，只需点击一下，如果选择 cloudera 企业版，cloudera 会为 hadoop 提供托管服务。

# css - 如何使用 CSS 获得此图像边框效果

> ID：14331601
> 
> 赞同：0
> 
> 时间：2013-01-15T05:20:35.200
> 
> 标签：css

“焦点”周围和框周围的边框。简单地说。如何在 CSS 上重新创建它。取自 theatlantic.com。

![在此处输入图像描述](../Images/1a2d96abb360da97344d313042f54bae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:31:43.227

尝试这样的事情：

**CSS：**

```
div.box
{
    width: 200px;
    height: 120px;
    text-align: center;
    line-height: 120px;
    position: relative;
    background: #CCC;
}

div.box > span
{
    display: block;
    position: absolute;
    width: 20px;
    height: 20px;
    top: 0;
    left: 0;
    border-top: 1px solid red;
    border-left: 1px solid red;
}

div.box > span + span
{
    top: 0;
    left: 100%;
    border-left: none;
    border-right: 1px solid red;
    margin-left: -20px;
}

div.box > span + span + span
{
    top: 100%;
    left: 100%;
    border-top: none;
    border-bottom: 1px solid red;
    margin-top: -20px;
}

div.box > span + span + span + span
{
    top: 100%;
    left: 0;
    border-right: none;
    border-left: 1px solid red;
    margin-left: 0;
} 
```

**HTML：**

```
<div class="box">
    <span></span>
    <span></span>
    <span></span>
    <span></span>

    Hello.
</div> 
```

* * *

[JSFiddle 在这里](http://jsfiddle.net/bWuXd/1/)。

# .htaccess - 为 http 和 https apache .htaccess 重写规则相同

> ID：14331604
> 
> 赞同：0
> 
> 时间：2013-01-15T05:21:12.490
> 
> 标签：.htaccess, mod-rewrite, https, rewrite

我们从第三方提供商处购买了一些软件，然后开始安装 ssl 证书...当我们转到该站点的 http 版本时，一切正常，但是当我们转到 https 时，浏览器会在末尾添加两个斜杠根 url，并重定向回 http 站点...我不知道如何阅读重写规则，但我们希望站点执行完全相同的操作，无论是 http 还是 https...有没有简单的更新方法这个：

```
DirectoryIndex index.html index.php
ErrorDocument 404 /handler.php
RewriteEngine on

Options +FollowSymlinks
RewriteBase /code
RewriteRule manage_articles\.php  /code/load_module.php?module_name=articles&file=manage_articles&%{QUERY_STRING} [L]
RewriteRule manage_articles_cat_frame\.php  /code/load_module.php?module_name=articles&file=manage_articles_cat_frame&%{QUERY_STRING} [L]
RewriteRule manage_articles_categories\.php  /code/load_module.php?module_name=articles&file=manage_articles_categories&%{QUERY_STRING} [L]
RewriteRule modify_article\.php  /code/load_module.php?module_name=articles&file=modify_article&%{QUERY_STRING} [L]
RewriteRule modify_article_cat\.php  /code/load_module.php?module_name=articles&file=modify_article_cat&%{QUERY_STRING} [L]
RewriteRule manage_letters\.php  /code/load_module.php?module_name=letters&file=manage_letters&%{QUERY_STRING} [L]
RewriteRule modify_letters\.php  /code/load_module.php?module_name=letters&file=modify_letters&%{QUERY_STRING} [L]

RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\/]+)\.html$ article.php?path=$1&%{QUERY_STRING} [L]
RewriteRule ^([^\/]+)\.htm$ article.php?cat_path=$1&%{QUERY_STRING} [L]
RewriteRule ^(article_[^\.]+\.gif)$ modules/articles/images/$1 [L]
RewriteRule ^auctions\/([^\/]+)\/*$ auction.php?title=$1&%{QUERY_STRING} [L]
RewriteRule ^auctions\/([^\/]+)\/buy_now$ buy_product.php?title=$1&%{QUERY_STRING} [L]

RewriteCond %{REQUEST_URI} !^(.*)(gif|jpg|css|png|js)$
RewriteRule ^.htaccess$ - [F]

# api rewrite logic
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-s
RewriteRule ^services\/(.*)$ services/api.php?rquest=$1 [QSA,NC,L]

RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^services\/(.*)$ services/api.php [QSA,NC,L]

RewriteCond %{REQUEST_FILENAME} -s
RewriteRule ^services\/(.*)$ services/api.php [QSA,NC,L]
#end api rewrite 
```

同样，我希望网站的功能完全相同，也只需处理 https。

谢谢。

添加 vhosts.conf：

```
# linkz.com ssl
<VirtualHost 164.175.65.135:443>
SSLEngine on
SSLProtocol all -SSLv2
SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW
SSLCertificateFile /usr/local/ssl/crt/publicbz.crt
SSLCertificateKeyFile /usr/local/ssl/private/private_nopp_bz.key
SSLCertificateChainFile /usr/local/ssl/crt/intermediate.crt
ServerAdmin webmaster@linkz.com
DocumentRoot /usr/local/www/micro
<Directory "/usr/local/www/micro">
AllowOverride All
DirectoryIndex index.html index.php
</Directory>
ServerName www.linkz.com
ServerAlias linkz.com
ErrorLog /var/log/httpd/linkz.error.log
#       CustomLog logs/dummy-host.example.com-access_log common
</VirtualHost>
<VirtualHost 164.175.65.135:443>
SSLEngine on
SSLProtocol all -SSLv2
SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW
SSLCertificateFile /usr/local/ssl/crt/publicbz.crt
SSLCertificateKeyFile /usr/local/ssl/private/private_nopp_bz.key
SSLCertificateChainFile /usr/local/ssl/crt/intermediate.crt
ServerAdmin webmaster@linkz.com
DocumentRoot /usr/local/www/microdev
<Directory "/usr/local/www/microdev">
AllowOverride All
DirectoryIndex index.html index.php
</Directory>
ServerName dev.linkz.com
ServerAlias dev.linkz.com
ErrorLog /var/log/httpd/linkzdev.error.log
#       CustomLog logs/dummy-host.example.com-access_log common
</VirtualHost>
# # # # # # # # # # # # # # # # # # # # # # # # # # #
# linkz.com
<VirtualHost 164.175.65.135:80>
#       ServerAdmin webmaster@dummy-host.example.com
DocumentRoot /usr/local/www/micro
<Directory "/usr/local/www/micro">
AllowOverride All
DirectoryIndex index.html index.php
</Directory>
ServerName www.linkz.com
ServerAlias linkz.com
ErrorLog /var/log/httpd/linkz.error.log
#       CustomLog logs/dummy-host.example.com-access_log common
</VirtualHost>
<VirtualHost 164.175.65.135:80>
#       ServerAdmin webmaster@dummy-host.example.com
DocumentRoot /usr/local/www/microdev
<Directory "/usr/local/www/microdev">
AllowOverride All
DirectoryIndex index.html index.php
</Directory>
ServerName dev.linkz.com
ServerAlias dev.linkz.com
ErrorLog /var/log/httpd/linkzdev.error.log
#       CustomLog logs/dummy-host.example.com-access_log common
</VirtualHost> 
```

添加 index.php：

```
if($_SERVER['SERVER_PORT']==443 && ($_SERVER['HTTP_HOST'] != 'www.auction.test' || $_SERVER['HTTP_HOST'] != 'www.default.loc'))
{
header('Location: '.$GLOBALS['SERVER_PATH'].$_SERVER['REQUEST_URI']);
exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:46:47.140

这个问题是 index.php 文件...问题是我被重写规则卡住了，没想到要查看 php 文件。

# python - 如何在 python 中使用网络摄像头拍照？

> ID：14331610
> 
> 赞同：1
> 
> 时间：2013-01-15T05:21:43.280
> 
> 标签：python, opencv

我一直在 python 中使用 openCV 从我的网络摄像头流式传输视频。要从中获取照片，我只需从视频中抓取一帧并将其称为照片。但是网络摄像头只能获得 2MP 视频（这对于一个像样的网络摄像头来说似乎是相当标准的），但规格说它需要 8MP 的照片。如何从网络摄像头而不是视频帧中获取照片？我还没有在 openCV 中找到这种方法，所以我对其他库持开放态度。

# ios - iPhone 应用程序可以在 iTunes 上播放音频吗？

> ID：14331612
> 
> 赞同：0
> 
> 时间：2013-01-15T05:22:07.310
> 
> 标签：ios, itunes, avaudiosession

iPhone 应用程序可以在 iTunes 应用程序顶部播放/覆盖音频源吗？

IE。用户能否在我的应用同时播放其他音频的同时在 iTunes 应用中播放歌曲？

如果需要可以进一步扩展。

任何帮助将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:36:52.443

阅读[音频会话编程指南](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html)，在“选择最佳类别”部分，有：

> `AVAudioSessionCategoryAmbient`或同等的`kAudioSessionCategory_AmbientSound`
> 
> 将此类别用于播放声音的应用程序，这些声音增加了优美或趣味，但对应用程序的使用不是必需的。使用此类别，您的音频会在响铃/静音开关和屏幕锁定时静音。
> 
> 此类别允许在您的应用程序播放音频时播放来自 iPod、Safari 和其他内置应用程序的音频。例如，您可以将此类别用于提供虚拟乐器的应用程序，用户可以随 iPod 音频一起演奏该乐器。

我想这就是你要找的。

# python - OpenCV 匹配模板

> ID：14331613
> 
> 赞同：9
> 
> 时间：2013-01-15T05:22:12.707
> 
> 标签：python, image-processing, opencv

我正在尝试将我拥有的徽标（模板）与一些图像相匹配。我的图像本质上都是彩色的，我这样做的方式是使用来自 openCV 的 cvMatchTemplate() 并在我的源图像上运行模板（徽标）。我将模板缩放到多个级别以找到最佳匹配。请注意，我只是在图像上找到数字印记的徽标，而不是场景中存在的徽标。例如：从这张图片中检测天空运动[http://i56.tinypic.com/2v3j3wx.jpg](http://i56.tinypic.com/2v3j3wx.jpg)（图片纯粹是为了我的任务的表示和清晰度，而不是我正在使用的图片

我的图像不是固定分辨率，所以我将其放大到标准的 800x600。现在，当我的源图像分辨率很差时说 300x300，结果很普通。我在模板参数中使用 method=CV_TM_CCOEFF_NORMED 并且即使是准确匹配的分数也很低（在 0 到 1.0 的范围内低至 0.4），这让我很难自信地说出徽标是否存在。我对此有两个问题：

1 - 在opencv模板匹配中，它如何处理彩色图像。我试图从文档中理解，我的推论是它分别计算每个通道的分数并取最好的。如果不是这样，我最好考虑所有三个渠道以获得更好的结果

2 - 任何替代方法！:)

让我知道是否有任何不清楚的地方！

编辑（附加信息）：正如评论中所讨论的，我附上了我当前的匹配技术，即缩放模板匹配。请注意，所附图像纯粹用于测试目的，并不是我正在使用的实际图像集（无法发布，因为图像是专有的）源图像![来自youtube的屏幕截图](../Images/465b3e938de50435086618e327ea5844.png) 徽标图像![从维基百科得到](../Images/4f895b17ca3d64cb416f1ec63576bfc5.png) 输出图像使用模板匹配![红色块表示最高分的最佳匹配](../Images/9d16d49aa3770d96a2192797b59f0dfe.png)

尽管模板是匹配的，但对于此最佳匹配，此处获得的分数为 0.59。虽然相对来说这是一个不错的比赛分数，但仍然不足以让我确定所需的标志是否存在。在我的测试图像中，当屏幕上的徽标是透明的时，它仍然会检测到徽标，但得分为 0.3-0.4。使用 SURF/SIFT 可以获得更好的结果吗？

编辑（尝试使用 SURF）我尝试运行已在 opencv 官方文档（minHessian = 2000）中作为示例给出的 SURF 代码。[这里的链接](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html) 是输出。我不确定如何解释它（2,3 点似乎在预期的范围内。这被认为是好的吗？还有其他建议吗？ ![在此处输入图像描述](../Images/be7eb5de3c35da2253b0bfeff7c17674.png) 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:40:48.770

在执行模板匹配之前，您是否尝试在源图像上使用高斯模糊？这可能会为您提供更准确的结果，因为我认为源图像的质量会导致更差的匹配

链接到 OpenCV 文档中的高斯模糊：

[OpenCV Python 高斯模糊](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=gaussian%20blur#cv2.GaussianBlur)

或者，您可以尝试对区域模板匹配建议的直方图比较技术，以额外确认返回的模板匹配相关性，即使很小，也是正确的值：

[绘制直方图](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html)

绘制直方图是可选的，它可能对您自己的应用程序有用

[比较直方图](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_comparison/histogram_comparison.html?highlight=histogram%20comparison)

^ 此方法计算图像（源和模板）的直方图以及它们之间的相关性......但是，您不想要整个源的直方图，只是您的模板匹配认为最佳相关性或其他一些图像中的位置，因此您想要获取感兴趣区域 (ROI) 的直方图，请参阅以下 C++ 代码：

```
Mat OriginalImage = imread("source.jpg", 0);
Rect RegionOfInterest = Rect(150, 150, 250, 250);
Mat ROIImage = OriginalImage(RegionOfInterest); 
```

这使您可以计算感兴趣区域的直方图。您应该获得模板的直方图和模板匹配认为您的模板在源中的区域的直方图，并比较它们以确认或反驳模板匹配输出

# c++ - 遍历向量以识别段落

> ID：14331615
> 
> 赞同：1
> 
> 时间：2013-01-15T05:22:30.407
> 
> 标签：c++, vector, loops

我现在进入了一本关于迭代器的书（C++ Primer 5th Edition）的一部分。到目前为止，这似乎相当简单，但我遇到了一些小挑战。

在书中，问题要求“......将*文本*[a vector] 中与第一段相对应的元素更改为全部大写并打印其内容。”

我遇到的第一个问题是，在本书的第 110 页上，它提供了示例代码，用于识别向量中是否有一个表示段落结尾的空元素。代码如下，来自书中：

```
// print each line in text up to the first blank line
    for (auto it = text.cbegin(); it != text.cend() && !it->empty(); ++it);
    cout << *it << endl; 
```

但是，当我在编辑器中输入这个时，我收到一个错误，指的是 *it 说：使用未声明的标识符 'it'。

如果我想创建一个向量*文本*并从输入中读取元素，然后运行一个迭代器来检查是否有段落结尾，然后将整个段落大写并打印结果，我该怎么做？

我以为我知道，但是只要我输入示例代码，它就会出现上述错误。

这是我提交的代码（在进行任何大写之前，我想测试它是否可以读取段落）并且正在使用，但这所做的只是打印最后输入的单词。

```
#include <iostream>
#include <string>
#include <vector>

using std::string; using std::vector; using std::cout; using std::cin; using std::endl;

int main ()
{
    const vector<string> text;
    string words;

    while (cin >> words) {
        for (auto it = text.cbegin(); it != text.cend() && !it->empty(); ++it);
    }
    cout << words << endl;
} 
```

一如既往地感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:31:10.660

您将迭代器声明为 for 循环的本地，但您在循环后放置了一个分号，因此该行`cout << *it << endl;`不是循环的一部分，并且变量`it`不在范围内。只需删除分号就可以了：

```
 for (auto it = text.cbegin(); it != text.cend() && !it->empty(); ++it)//no semicolon here
    cout << *it << endl; 
```

为了更好地说明发生了什么，这里有一对带大括号的例子：

```
 //your original code:
 for (auto it = text.cbegin(); it != text.cend() && !it->empty(); ++it)
 {

 }
 cout << *it << endl; //variable it does not exist after the for loop ends

 //code that works:
 for (auto it = text.cbegin(); it != text.cend() && !it->empty(); ++it)
 {
          cout << *it << endl; //what happens _unless_ you put a ; after the loop statement
 } 
```

我不知道这是否可以解决您的整个问题，但它应该可以解决您遇到的错误。

# javascript - 在 Firefox 中使用 let 和 yield

> ID：14331617
> 
> 赞同：11
> 
> 时间：2013-01-15T05:22:52.410
> 
> 标签：javascript

我正在尝试在 Firefox中使用`let`和。`yield`我正在测试版本 18 和 21（每晚）并获得相同的结果。

这是我非常简单的测试脚本：

```
<html>
    <head>
        <title>test</title>
        <script type="text/javascript">
            'use strict';
            function a() {
                yield 5;
            }
        </script>
    </head>
    <body></body>
</html> 
```

我收到此错误：

![yield 是一个保留的标识符](../Images/791d990ec769233cb91dc160d0c8855b.png)

同样，当我做一个简单的测试时，`let`我得到“let 是一个保留的标识符”，这真的很令人沮丧，因为`let` [据说自版本 2 以来就存在于 Firefox 中](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7)！

奇怪的是，如果我在 Firebug 中执行相同的代码，它就可以工作！

我在标签的`type`and`language`属性中尝试了各种其他字符串，`script`但没有找到一个有效的神奇字符串。

这是怎么回事？如何让这些东西与脚本标签一起使用？

* * *

## 编辑

嗯，我明白了，所以你必须指定版本号。我已经尝试过了，但是对于我原来使用网络工作者的更复杂的脚本。显然在一个包含 web worker 的脚本上使用，`version=1.7`该脚本包含一个使用但不够好的脚本 - web worker 脚本仍然中断......然后我尝试减少到​​最简单的情况，但显然没有在最简单的情况下尝试。`let``yield``version=1.7`

谢谢......可能会在稍后（搜索后）发布另一个关于如何让网络工作者工作的问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-15T05:34:51.247

正如[mdn note](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Iterators_and_Generators)所说，

> yield 关键字仅可用于包裹在`<script type="application/javascript;version=1.7">`块（或更高版本）中的 HTML 中的代码块

因此，更改`<script type="text/javascript">`为`<script type="application/javascript;version=1.7">`将使其工作。

# multithreading - openMP 和线程池有什么区别？

> ID：14331619
> 
> 赞同：-1
> 
> 时间：2013-01-15T05:23:21.630
> 
> 标签：multithreading, openmp

`*OpenMP*`我想知道和*线程池*的基本区别？另外，如果有人可以解释与 Linux 相关的内容，即`*OpenMP*`用于 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:36:25.883

OpenMP 是一组编译器指令、库例程和环境变量的规范，可用于在 Fortran 和 C/C++ 程序中指定共享内存并行性。

线程池是一种使用语言/操作系统特性或API来实现并行的解决方案/模式。线程池是一个并非特定于编程语言的概念。

# vb.net - Mono VB .Net 应用程序，缺少 System.Collections.Generic Mac OS X

> ID：14331625
> 
> 赞同：2
> 
> 时间：2013-01-15T05:24:25.213
> 
> 标签：vb.net, macos, mono

我正在将 Windows VB .Net 2.0 项目移植到 Mac OS X 上，我正在使用 Mono 来简化这个过程，我所有的 lib 文件都正常，除了我无法添加参考 System. Collections.Generic 命名空间。我需要此名称空间用于 Dictionary 和 Specialized.NameValueCollection。

这是 Mac OS X 的限制还是有解决方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:40:15.180

在 .NET 中，在大多数情况下，完整的命名空间与程序集不匹配。`System.Collections.Generic`是一个命名空间，但该命名空间内的类是在程序集中定义的`mscorlib.dll`（不包括存在于 中的`System.dll`其他类，如）。`SynchronizedCollection<T>``System.ServiceModel.dll`

确保您正在引用`mscorlib`并且`System`您应该没问题。

# java - 在 Java 中返回 Hashset 中的对象

> ID：14331626
> 
> 赞同：-1
> 
> 时间：2013-01-15T05:24:25.853
> 
> 标签：java, hashcode, hashset

嗨，我在一个名为 Memory 的类中有一个如下所示的 HashSet：

```
Set<Idea> ideas = new HashSet<Idea>(); 
```

泛型“Idea”是我编写的另一个类，它覆盖了 hashcode() 和 equals()。我希望能够在 HashSet 想法中获取（而不是删除）一个 Idea 对象，然后通过向它添加一些内容来更改它，可能会更改它的 hashcode() 返回值。我听说这是行不通的，但没有人解释原因。我想知道是否有人可以告诉我如何最有效地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:36:02.240

HashSet 内部使用 HasMap，其值与 key 相同。对于将对象放入 Hashset，jvm fill 首先计算对象的哈希码，然后根据该哈希码选择相应的桶并放入对象。所以如果你在更改哈希码之后将对象放入哈希集中，您将无法正确获取其位置。因此，如果您真的想删除元素，最好从哈希集中删除对象更改其值，然后再将其放回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:28:24.810

它不会起作用，因为哈希码是找到对象的关键，如果您修改对象以更改它的哈希码，您将无法再次找到它。

这就像字典里的条目，如果你改变它，你就再也找不到了。这有意义吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:11:37.460

如果要执行查找，则应该使用 Map。如果要更改键（或 Set 的元素），则必须先将其删除并再次添加。因此，您的密钥应该只有不可变字段。

# php - 使用正则表达式获取时间

> ID：14331627
> 
> 赞同：1
> 
> 时间：2013-01-15T05:24:27.857
> 
> 标签：php, regex

我从抓取的页面中有这种值，我想通过正则表达式获取它：

```
4:00pm
16th-17th
1:30am 
```

我有这个表达来处理时间，它工作正常：

```
([1-9]|1[012]):[0-5][0-9](am|pm) 
```

有没有办法有一个单一的正则表达式，我还可以包含**16th-17th的匹配**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:29:21.920

```
(([1-9]|1[012]):[0-5][0-9](am|pm))|(\d{1,2}(st|nd|rd|th)-\d{1,2}(st|nd|rd|th)) 
```

# php - php中的两个或多个jQuery冲突

> ID：14331629
> 
> 赞同：-1
> 
> 时间：2013-01-15T05:24:42.447
> 
> 标签：php, javascript, jquery

这类问题很久以前就已经发布了，但我对 jQuery 有更多疑问。

我的代码中有这几个脚本：

```
<script src="<?php echo base_url();?>js/jquery.js" type="text/javascript"></script>
<!-- jQuery Date picker-->
<script type ="text/javascript" src="<?php echo base_url();?>js/jquery.jdpicker.js"></script>
<!-- jQuery Date picker end-->
<!--Pop up jquery scripts-->
 <script src="<?php echo base_url()?>js/jquery.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()?>js/modalPopLite.js"></script>
<script type="text/javascript" src="<?php echo base_url()?>js/modalPopLite.min.js"></script>
<!--Pop up jquery scripts ends -->
    <script src="<?php echo base_url()?>js/jquery-1.8.3.js"></script>
    <script src="<?php echo base_url()?>js/jquery-ui.js"></script>

<!-- small image slider start-->
<link href="<?php echo base_url()?>css/small_slider/js-image-slider.css" rel="stylesheet" type="text/css" />
    <script src="<?php echo base_url()?>css/small_slider/js-image-slider.js" type="text/javascript"></script>
<!-- small image slider ends-->

<!-- sliderman.js for top image slider-->
        <script type="text/javascript" src="<?php echo base_url();?>js/sliderman.1.3.7.js"></script> 
```

`jquery.min.js`和做同样的`jquery.js`功能？？

当我添加**弹出 jquery**时，它工作正常，但之前添加**的 datepicker**停止工作。

唉...

后记当我添加**图像滑块 jquery**然后**弹出**停止工作..

我非常需要页面中的所有脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:30:49.743

您不能在页面中多次包含 jQuery。您已将其包含多次 (3)。每次加载新版本时，您都会清除注册到先前版本的 jQuery 对象的插件

使用浏览器控制台检查脚本错误。可能会看到类似的错误`jdpicker is not a function`

jQUery.js 必须在所有其他依赖插件和代码之前加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:34:15.233

是的`jquery.min.js`最小化版本`jquery.js`。即在`jquery.min.js`每个空白处都被清除`jquery.js`。所以他们都是一样的。

在您的一组 jquery 文件中，许多人可能会使用`jQuery`或`$`变量。这就是为什么会发生冲突。

为避免这种情况，您可以创建一个`additional.js`文件，然后根据导致冲突的原因写入`$.noConflict();`或写入。`jQuery.noConflict();`

如果它不能解决问题，请检查`js`文件并确保`jquery.js`在每个使用您的日期选择器、弹出窗口等的辅助文件之前定义。**您必须只包含一次。**

# xaml - 在 XAML 中绑定全景项目

> ID：14331631
> 
> 赞同：0
> 
> 时间：2013-01-15T05:24:48.490
> 
> 标签：xaml, windows-phone

我有两个全景页面。第一个包含字母，第二个包含以该字母开头的动词。当用户点击一个字母时，应用程序应该将它们重定向到带有动词的第二页。我让全景的 HeaderItem 工作，但不是动词列表。它只是空的。

这是第一页上的事件：

```
// Navigate to the second page:
        NavigationService.Navigate(new Uri("/Verbs.xaml?selectedItem=" + (alphabet.SelectedItem as ItemViewModel).ID, UriKind.Relative)); 
```

在第二页：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        if (DataContext == null)
        {
            string selectedIndex = "";
            if (NavigationContext.QueryString.TryGetValue("selectedItem", out selectedIndex))
            {
                int index = int.Parse(selectedIndex);
                DataContext = App.ViewModel.Items[index];            
            }
        }
    } 
```

第二页的XAML文件：

```
<Grid x:Name="LayoutRoot">
    <controls:Panorama Title="Verb">

        <!--Panorama item one-->
        <!--Binding LineOne works!-->
        <controls:PanoramaItem Header="{Binding LineOne}">                
            <ListBox x:Name="verblist" Margin="0,0,-12,0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <!--But this one does not work-->
                        <TextBlock Text="{Binding Verb1}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </controls:PanoramaItem>

        <!--Panorama item two-->
        <controls:PanoramaItem Header="Search">
            <Grid/>
        </controls:PanoramaItem>
    </controls:Panorama>
</Grid> 
```

你能告诉我这些问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:11:32.117

您忘记将项目添加到列表框中，

```
 <ListBox x:Name="verblist" Margin="0,0,-12,0" Items={Binding YOUR_ITEMS_LOCATION_HERE}> 
```

或通过代码：

```
verblist.Items = xxxx; 
```

# asp.net-mvc - ?X-Requested-With=XMLHttpRequest 使用 mvc Ajax.ActionLink 时

> ID：14331632
> 
> 赞同：0
> 
> 时间：2013-01-15T05:24:49.887
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-ajax

我使用 MVC 3。

使用以下代码：

```
@Ajax.ActionLink("CreateUser", "Administration",
            new AjaxOptions { HttpMethod = "GET", 
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "DialogContainer", 
            OnComplete = "OpenDialog();" }) 
```

单击链接时出现 javascript 错误：

> GET> [http://myWebsite.com/Administration/Administration?X-Requested-With=XMLHttpRequest](http://myWebsite.com/Administration/Administration?X-Requested-With=XMLHttpRequest) 404（未找到）jquery-1.8.2.min.js:2

我为“OnComplete”指定的函数被触发，对话框弹出但没有内容从控制器返回。

你能帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:34:03.873

404 错误告诉您页面 /Administration/Administration 不存在。也就是说， AdministrationController上不存在操作方法 Administration **。**

检查操作方法“管理”是否存在。

您正在使用的重载是[ActionLink(string linkText, string actionName, AjaxOptions ajaxOptions)](http://msdn.microsoft.com/en-us/library/dd493106%28v=vs.108%29.aspx)。

不需要查询字符串 X-Requested-With=XMLHttpRequest 来解决此问题。

默认情况下，Microsoft Ajax 和 jQuery 使用标头来表示请求源自 JavaScript。MVC 考虑到并非所有环境都允许自定义标头（X-Requested-With 是自定义错误）与请求一起发送，方法是允许标头值作为查询字符串参数发送。

# php - 如果未选中复选框，如何从 POST 中删除值

> ID：14331644
> 
> 赞同：0
> 
> 时间：2013-01-15T05:26:44.230
> 
> 标签：php, jquery

jQuery

```
$("input[type=checkbox]:checked").live("click", function (e) {
    var data = $('.variation:checked').map(function (i, n) {
        return {
            'val': $(n).val()
        };
    }).get(); 

    $.post('/variations.php', {
        'data': data
    }, function (data) {
        $('#variations').html(data);
    });

}); 
```

HTML 输出

```
<div id="variations">
Array
(
    [data] => Array
        (
            [0] => Array
                (
                    [val] => 1
                )
       )
)
</div> 
```

PHP

```
print_r($_POST) 
```

问题：如果未选中复选框，如何从 POST 中删除值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:42:06.937

用它发送表单数据`$('form#myForm').serialize()` 只会`send the checkboxes which are checked`

```
//example 1
    $('input#submitButton').click( function() {
        $.post( 'some-url', $('form#myForm').serialize(), function(data) {
             ... do something with response from server
           },
           'json' // I expect a JSON response
        );
    });
//example 2
    $('input#submitButton').click( function() {
        $.ajax({
            url: 'some-url',
            type: 'post',
         //   dataType: 'json',
            data: $('form#myForm').serialize(),
            success: function(data) {
                       ... do something with the data...
                     }
        });
    }); 
```

从[这里](https://stackoverflow.com/questions/1200266/submit-a-form-using-jquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T05:34:21.697

您可以使用 .disable 方法禁用对象，然后在发布完成后启用它们。或者您可以在单击提交按钮时使用方法 .click 函数，或者如果您不想在 php 中使用此值，您可以 unset($_POST['一个特定的键']) 具有未设置的功能

# android - 没有 android.support.v4.app 的 SwipeView

> ID：14331647
> 
> 赞同：0
> 
> 时间：2013-01-15T05:27:06.553
> 
> 标签：android, tabs, android-actionbar, swipe

有没有一种方法可以在不使用 android.support.v4.app lib 的情况下实现操作栏选项卡之间的滑动？使用 lib 将重做大多数代码。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:57:33.527

我也在寻找答案，但我刚刚发现：
[“ViewPager 可以使用本机 API 级别 11 片段，尽管您可能需要创建自己的 PagerAdapter。或者，您可以使用不带任何片段的 ViewPager，只使用普通 View 或 ViewGroup页面的对象。”](https://stackoverflow.com/a/14910874/2025799)
如果你找到了一个例子或更好的方法，我想听听你的意见，否则很高兴编码:)

# oop - 开发一组方法的最佳方式

> ID：14331648
> 
> 赞同：1
> 
> 时间：2013-01-15T05:27:16.563
> 
> 标签：oop, c#-4.0, apex-code

我有 50 多种类型的请求，每个请求都有参数来计算费用（例如，类型 X 费用的请求是按面积 * 先前提交的数量计算的）我所做的是一个大 IF，它检查请求类型然后调用另一个类有计算每种类型费用的方法。必须有一种更清洁的方法来做到这一点，有什么建议吗？

```
if(mySubmittal.Name == Label.STS_zadc_01) 
myTempRequest.Fees__C = myFeeCalculator.LandDemarcationRequestFees(myTempRequest.Number_of_Points__c) ;
else if(mySubmittal.Name == Label.STS_zadc_02)
myTempRequest.Fees__C = myFeeCalculator.RequestForSiteServicesInformation(); 
```

等等......我最终得到了一个巨大的丑陋课程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:10:31.147

始终避免使用大的 IF 或 SWITCH，它非常不可读且难以维护。OOP 中的多态性可以解决这个问题。至于您的问题，*[命令模式](http://en.wikipedia.org/wiki/Command_pattern)*可能会有所帮助。示例代码可以是：

```
public interface IRequest
{
    void Execute();
}

public class RequestManager
{
    private Dictionary<string, IRequest> requests = new Dictionary<string, IRequest>();

    // register a request by its unique label/name
    public void RegisterRequest(string name, IRequest request)
    {
        requests.Add(name, request);
    }

    // execute a request according to its label/name
    // thanks to polymorphism, no IF/SWITCH any more
    public void ExecuteRequest(String name)
    {
        requests[name].Execute();
    }   
}

public class LandDemarcationRequest : IRequest
{
    private FeeCalculator myFeeCalculator;
    private Request myTempRequest;

    public LandDemarcationRequest(...)
    {
        //initialization ...
    }

    public void Execute()
    {
        myTempRequest.Fees__C = 
            myFeeCalculator.LandDemarcationRequestFees(myTempRequest.Number_of_Points__c);
       // more code...
    }
}

public class SiteServicesInformationRequest : IRequest {
    // similar to the above...
}

// more requests... 
```

如果这些请求有一些共同的代码，您可以进一步将它们分解为一个抽象基类（从其继承），或者更好地分解为一个新的创建类（由其组成）。

采用IF/SWITCH方式，添加新类型请求的唯一方法就是修改这些IF/SWITCH语句，打破了[Open/Closed Principle](http://en.wikipedia.org/wiki/Open/closed_principle)。如您所见，这个问题已经通过引入多态性得到解决。我的提议的另一个好处是你可以在运行时注册任何请求，而 IF/SWITCH 语句在编译时是固定的。

# assembly - x86 堆方法

> ID：14331649
> 
> 赞同：3
> 
> 时间：2013-01-15T05:27:21.930
> 
> 标签：assembly, x86, x86-64

我试图了解这个 x86 指令在做什么：

```
 movl %eax, heap(,%rdx,4) 
```

这就是我认为它在做的事情：

将 eax 中的值移动到内存中从标签堆开始的区域，并从 rdx 中的值移位字节。

这个对吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T05:35:07.980

内存操作数的 AT&T 语法是：

```
%segreg:disp(base,index,scale). 
```

因此，您显示的指令中的内存地址是（用 Intel 语法更好地表示）：

```
heap[rdx*4] 
```

所以换句话说，将值存储`eax`在`rdx`*4 字节的开头`heap`。由此，我们可以推断这`heap`可能是一个 4 字节整数数组，并且`rdx`是该数组的循环计数器或索引。

在 Intel 语法中，这将是：

```
mov heap[rdx*4], eax 
```

有关语法之间的比较，请参阅[此页面](http://www.imada.sdu.dk/Courses/DM18/Litteratur/IntelnATT.htm)。

# android - 如何从android中的按钮中删除焦点？

> ID：14331651
> 
> 赞同：1
> 
> 时间：2013-01-15T05:27:32.253
> 
> 标签：android, android-layout, background

我有这样的布局

```
<RelativeLayout
            android:id="@+id/layout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="buttonClick" >

            <ImageView
                android:id="@+id/img1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:background="@drawable/imageView_bg"
                android:focusable="false"
                android:focusableInTouchMode="false" />

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="18dip"
                android:background="@drawable/button_bg"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:gravity="left|center_vertical"
                android:paddingLeft="25dip"
                android:text="TEXT"
                android:textColor="#ffffff"
                android:textSize="20dip" />
        </RelativeLayout> 
```

button_bg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/btn_pressed" 
        android:state_pressed="true"/>
    <item android:drawable="@drawable/btn_normal"/>

</selector> 
```

imageView_bg.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:drawable="@drawable/img_pressed" 
            android:state_pressed="true"/>
        <item android:drawable="@drawable/img_normal"/>

    </selector> 
```

我想整体单击视图。按钮和图像视图都按下了图像。单击RelativeLayout 时，按钮和图像视图被按下。怎么可能？使用上面的布局，按钮和图像视图分别按下时会显示按下的图像。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:34:21.723

你可以这样做，

相对布局的 ON 事件单击执行，

```
button.perfomClick()
imagebutton.perfomClick() 
```

希望能帮助到你..

# c# - 使用 LinqtoLDAP 对用户进行身份验证

> ID：14331653
> 
> 赞同：1
> 
> 时间：2013-01-15T05:27:53.947
> 
> 标签：c#, linq, active-directory, windows-authentication, linq-to-ldap

我正在使用 Linq to LDAP，想知道是否有办法使用 Linq to LDAP 对 AD 进行身份验证，

也许有这样的效果

```
var user = context.Query<User>().FirstOrDefault(u => u.SAMAccountName == "user123" && u.Password == "1234"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:54:01.877

在 AD 中搜索无法返回密码。您只能通过 SSL 修改它们。您可以尝试使用 LdapConnection 发出 Bind 请求，但这不需要 LINQ to LDAP，只需要 SYStem.DirectoryServices.Protocols。

```
var connection = new LdapConnection("localhost");

try
{
    connection.Bind(new NetworkCredential("username", "password", "domain"));
}
catch (LdapException ex)
{

} 
```

您是否有不能使用 NTLM 或 Kerberos 的原因？

# ruby-on-rails - Ubuntu 上的 Ruby on Rails - 多个错误

> ID：14331654
> 
> 赞同：1
> 
> 时间：2013-01-15T05:27:55.177
> 
> 标签：ruby-on-rails, ruby, ubuntu

我安装了 Ubuntu 10.04，然后将其升级到 12.04。从那里我按照本教程设置 RoR： [http ://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

然而，我在这里是因为我已经花了超过 12 个小时与不同的错误消息作斗争，并且想开枪打人。

错误一：

```
greg2@greg-desktop:~/bballApp$ ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux]
greg2@greg-desktop:~/bballApp$ rails -v
/home/greg2/bballApp/Gemfile:3:in `evaluate': undefined method `ruby' for #<Bundler::Dsl:0xb7607a18> (NoMethodError)
from /usr/lib/ruby/vendor_ruby/bundler/definition.rb:17:in `build'
from /usr/lib/ruby/vendor_ruby/bundler.rb:136:in `definition'
from /usr/lib/ruby/vendor_ruby/bundler.rb:124:in `load'
from /usr/lib/ruby/vendor_ruby/bundler.rb:107:in `setup'
from /usr/lib/ruby/vendor_ruby/bundler/setup.rb:7
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /home/greg2/bballApp/config/boot.rb:6
from script/rails:5:in `require'
from script/rails:5 
```

错误2：

```
greg2@greg-desktop:~/bballApp$ bundle install
Your Ruby version is 1.8.7, but your Gemfile specified 1.9.3 
```

所以，谷歌告诉我查看我的 .zshrc 文件并添加：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

我然后做了。

返回并得到相同的错误。所以我尝试了：

```
greg2@greg-desktop:~/bballApp$ rvm list
rvm rubies
   ruby-1.9.3-p194 [ i686 ]
=* ruby-1.9.3-p362 [ i686 ] 
```

我正在和一个在 MAC 上运行它的朋友一起开发它。

这是我的宝石清单：

```
greg2@greg-desktop:~/bballApp$ gem list 
```

***当地宝石***

```
actionmailer (3.2.11, 3.2.9.rc3)
actionpack (3.2.11, 3.2.9.rc3)
activemodel (3.2.11, 3.2.9.rc3)
activerecord (3.2.11, 3.2.9.rc3)
activeresource (3.2.11, 3.2.9.rc3)
activesupport (3.2.11, 3.2.9.rc3)
addressable (2.3.2)
arel (3.0.2)
bcrypt-ruby (3.0.1)
bourne (1.1.2)
builder (3.0.4)
bundler (1.3.0.pre.5, 1.2.3, 1.1.5)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.4.0)
erubis (2.7.0)
execjs (1.4.0)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.1.4)
json (1.7.6)
mail (2.4.4)
metaclass (0.0.1)
mime-types (1.19)
mocha (0.10.5)
multi_json (1.5.0)
 polyglot (0.3.3)
rack (1.4.4, 1.4.3)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.11, 3.2.9.rc3)
railties (3.2.11, 3.2.9.rc3)
rake (10.0.3)
rdoc (3.12)
sass (3.2.5)
sass-rails (3.2.6)
sprockets (2.2.2)
sqlite3 (1.3.7)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.12)
tzinfo (0.3.35)
uglifier (1.3.0) 
```

这是我运行 rails 时发生的情况。

```
greg2@greg-desktop:~/bballApp$ rails s
/home/greg2/bballApp/Gemfile:3:in `evaluate': undefined method `ruby' for #<Bundler::Dsl:0xb765fa10> (NoMethodError)
from /usr/lib/ruby/vendor_ruby/bundler/definition.rb:17:in `build'
from /usr/lib/ruby/vendor_ruby/bundler.rb:136:in `definition'
from /usr/lib/ruby/vendor_ruby/bundler.rb:124:in `load'
from /usr/lib/ruby/vendor_ruby/bundler.rb:107:in `setup'
from /usr/lib/ruby/vendor_ruby/bundler/setup.rb:7
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /home/greg2/bballApp/config/boot.rb:6
from script/rails:5:in `require'
from script/rails:5 
```

*   **我筋疲力尽，没有想法，如果你在威斯康星州，我会开车给你买啤酒来让它运行。谢谢您的帮助。;**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:14:52.687

正如@Prakash Murty 所说，您似乎在 Gemfile 中定义了 ruby​​ 版本。此行用于 Heroku 指定您的 ruby​​ 版本。

如果你想使用它，你需要使用 bundler 版本 1.2.0。

更多信息在这里：[https ://devcenter.heroku.com/articles/ruby-versions](https://devcenter.heroku.com/articles/ruby-versions)

但是，如果您不使用 heroku 来托管您的应用程序，我建议您删除 Gemfile 的这一行。

我希望这会有所帮助。

# sql - 如何使用 IF 条件创建 SQL 触发器以及进行内部连接

> ID：14331656
> 
> 赞同：1
> 
> 时间：2013-01-15T05:28:02.167
> 
> 标签：sql, sql-server-2008, triggers

我有以下示例格式表结构：

**客户**表

```
CUSTID INT,//PRIMARY KEY
CUSTDATA VARCHAR 
```

**员工**表

```
EMPID INT,//PRIMARY KEY
EMPDATA VARCHAR 
```

**项目**表

```
ITEMID INT,//PRIMARY KEY
CUSTID INT,//REFERENCE KEY
ITEMTYPE INT //1 FOR CUSTOMER AND 2 FOR EMPLOYEE
EMPID INT 
```

**MERGEDATA**表

```
MERGEID INT,
CUSTDATA VARCHAR,
EMPDATA VARCHAR
ACTION VARCHAR 
```

上面我有四个表（`CUSTOMER, EMPLOYEE, ITEM`和`MERGEDATA`），现在我想在`ITEM`表上为`INSERT/UPDATE/DELETE`事件创建 SQL Server 触发器，所以每当在表上完成活动时，它都会使用在表上完成的操作`ITEM`填充我的表。`MERGEDATA``ITEM`

因此，如果将任何新行插入到表中，则根据或条目`ITEM`进入表中的新条目，例如，如果有来自客户的任何条目，它将在表中以及在下表中添加一个条目，如下所示`MERGEDATA``CUSTOMER``EMPLOYEE``ITEM``CUSTOMER`

**客户**表

```
123, TESTCUSTOMER 
```

**项目**表

```
1, 123, 1, 0 
```

Employee 表也是如此，但是在`ITEM`表中的行会像`1, 456, 0, 2`.

现在我想在 Trigger 中写 if 条件，如果有来自 CUSTOMER 表的条目

```
IF (ITEMTYPE == 1)
//Entry in MERGEDATA will as below 
```

**MERGEDATA**表

```
1, 123, 0, ACTION (will depend on type of trigger event trigger if INSERT(ACTION = INS), for update (UPDATE = UPD) etc 
```

所以简而言之，我正在查看触发器中的以下内容：

*   如何在触发器中写入 IF 条件
*   如何在触发器中从其他表进行内部联接

请推荐！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:59:44.703

我的建议是：

创建**三个**单独的触发器 - 每个操作一个。这使确定 更容易`Action`，并且还使您可以灵活地单独打开/关闭每个操作。此外，触发代码将更小、更易于理解、更易于维护。

鉴于这种设计，您的触发器将非常简单：

```
CREATE TRIGGER trg_Item_Insert 
ON dbo.Item FOR INSERT
AS 
   -- first insert customer-related data - if any
   INSERT INTO dbo.MergeTable(CUSTDATA, EMPDATA, ACTION)
      SELECT CustData, EmptyData, 'INSERT'
      FROM Inserted
      WHERE ITEMTYPE = 1

   -- then insert employee-related data - if any
   INSERT INTO dbo.MergeTable(CUSTDATA, EMPDATA, ACTION)
      SELECT CustData, EmptyData, 'INSERT'
      FROM Inserted
      WHERE ITEMTYPE = 2 
```

当您创建三个单独的触发器时，只需将这些其他触发器中的`'INSERT'`值`Action`替换为`'Update'`和`'Delete'`。

我遇到的问题是：

*   `Item`应该将哪些列存储到哪个列中`MergeData`？
*   你的专栏`Item`或大部分`INT`- 你的专栏`MergeData`是`Varchar`- 你想在这里应用什么样的“转换”？

有关更多详细信息，[请参阅出色的 SQL Server 联机丛书文档（免费提供！）`CREATE TRIGGER`](http://msdn.microsoft.com/en-us/library/ms189799%28v=SQL.110%29.aspx)

# python - Python 属性和 __dict__ 方法

> ID：14331658
> 
> 赞同：-1
> 
> 时间：2013-01-15T05:28:10.213
> 
> 标签：python

考虑这个类：

```
class A(object):
    def __init__(self, name = 'hi'):
        self._name = name
    def getname(self):
        return self._name
    def setname(self, value):
        self._name = value
    name =  property(getname, setname)
a = A('hello') 
```

> > a.name 会给我“你好”

但是，我注意到，`a.__dict__['name'] = 'something'`和实例变量。“名称”已重置。例如。`a.__dict__['_name'] = {'animal' : 'tiger'}`并`a.name`导致`{'animal' : 'tiger'}`.

我想知道任何人都可以使用相同/相似的东西来破坏实例变量的值，只需访问该`__dict__`特定对象的魔术方法吗？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:38:24.617

Sure. Someone could also do this:

```
a._name = {'animal': 'tiger'} 
```

Or, you know, they could just edit your source code.

Don't worry about it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:51:32.630

Python 不保护您的数据免受在同一进程中运行的其他代码的影响。没有私有属性，等等。Python 提供了您可以以传统惯用方式使用的结构，但没有任何语言可以保护您免受同事的伤害。

# android - 如何将现有位图上的位图设置为其背景

> ID：14331662
> 
> 赞同：3
> 
> 时间：2013-01-15T05:28:54.787
> 
> 标签：android, android-image

我有两个位图，比如说 bitmapA 和 bitmapB。我想将 bitmapA 设置为 bitmapB 的背景，我必须在运行时执行此操作。给我一些想法，我该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T05:34:50.193

使用`setImageDrawable(Drawable d)`将设置您图像
`setBackgroundDrawable(Drawable d)`将设置您在 ImageView 类型中的背景

并将您的位图转换为可绘制使用此

```
Drawable d = new BitmapDrawable(getResources(),bitmap); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:30:27.270

检查[Layer Drawables](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html) ..希望这是你想要的..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T05:33:54.253

这可能会有所帮助

```
public static Bitmap overlay(Bitmap bmp1, Bitmap bmp2) {
    bmp1 = convertToMutable(bmp1);
    Canvas canvas = new Canvas(bmp1);
    bmp2 = Bitmap.createScaledBitmap(bmp2, bmp1.getWidth(), bmp1.getHeight(), true);
    canvas.drawBitmap(bmp2, 0, 0, null);
    return bmp1;
} 
```

您可能不想拉伸图像，但在这种情况下不要使用`Bitmap.createScaledBitmap`

# icecast - Ices2/Icecast 错误：

> ID：14331665
> 
> 赞同：1
> 
> 时间：2013-01-15T05:29:20.393
> 
> 标签：icecast

我安装了 Icecast2 和 Ices2。我正在尝试以下列方式播放音频流：

```
/etc/ices2/ices-playlist.xml and 
/etc/icecast2/icecast.xml at -> http://pastie.org/5686666 
```

使用运行 ices2 时出现此错误`ices2 /etc/ices2/ices-playlist.xml`

```
[2013-01-14  22:48:18] INFO playlist-builtin/playlist_read Currently playing "/etc/ices2/music/music.ogg"
[2013-01-14  22:48:21] EROR stream/ices_instance_stream Failed initial connect to localhost:4000 (Couldn't connect: No such file or directory)
[2013-01-14  22:48:21] DBUG reencode/reencode_clear Clearing reencoder 
```

完整的步骤列表位于[http://www.ehow.com/how_5183447_make-radio-stream-ubuntu.html](http://www.ehow.com/how_5183447_make-radio-stream-ubuntu.html)

任何帮助表示赞赏。

# javascript - 暂停页面执行，直到 jQuery 警报关闭后，然后运行函数

> ID：14331669
> 
> 赞同：0
> 
> 时间：2013-01-15T05:30:12.220
> 
> 标签：javascript, jquery

我有一个 jQuery`$.alert`和一个`.fadeOut(1000)`连续工作，但我不喜欢我看到的结果。我只想`.fadeOut(1000)`在用户关闭`$.alert`. 我知道您实际上无法捕获警报的关闭事件，但是有人可以建议一种可能完成我正在寻找的解决方法吗？

`ajax`这是我试图实施更改的现有调用：

```
$.ajax({
url: sURL + "utility/mymethod",
type: "POST",
data: {ClientNum: ClientNum},
dataType: 'json',
success: function(json) {       
if (typeof(json.ClientEmail) != "undefined" && json.ClientEmail !== null && json.ClientEmail !== "") {
    $.confirm("Please call . . . .",                
    function(){ 
        if (json.ClientEmail){
            send_email(json);
        }
    },              
    function(){
        $.msg("Password recovery information has NOT been sent.",
        {header:'Password Not Sent', live:10000});
        $('#ajaxShield').fadeOut(1000);
    })
} else {
    //THIS IS WHERE I WANT THE FADEOUT TO WAIT FOR THE ALERT
    $.alert("There is no email address.")
    $('#ajaxShield').fadeOut(1000);
}; 
}, 
error:function (xhr, ajaxOptions, thrownError){ alert('Problem, Status code:'+xhr.status+', Error:'+thrownError);} 
}); 
```

我希望我的叠加层保持可见，直到用户确认警报消息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:56:31.823

$.alert 不是本机 JQuery，因此可能是一个异步操作的插件。谷歌搜索表明它不是更知名的之一。

简单的测试...

改变

```
$.alert("msg") 
```

至

```
alert("msg") 
```

这看起来像你所追求的吗（警报同步工作）。

如果这更像你所追求的，下一步是确定你的插件是如何工作的（如果你想继续使用它）

# html - 检查是否正在播放 HTML5 视频元素

> ID：14331670
> 
> 赞同：16
> 
> 时间：2013-01-15T05:30:17.223
> 
> 标签：html, video, html5-video

如何检查 HTML5 视频元素的状态？我需要切换播放/暂停视频元素。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-15T05:38:07.600

像下面这样的方法很少，

```
var myVideo=document.getElementById("video1"); 
if (myVideo.paused) {
  myVideo.play(); 
}
else { 
  myVideo.pause(); 
} 
```

[在这里](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_video_js_prop)查看完整的工作示例。

# javascript - Javascript 移动事件列表

> ID：14331671
> 
> 赞同：8
> 
> 时间：2013-01-15T05:30:22.327
> 
> 标签：javascript, mobile

是否有任何特定于移动设备的 Javascript 事件列表？

我知道[触摸事件](http://www.w3.org/TR/touch-events/)：

*   触摸启动
*   触摸移动
*   触摸端
*   触摸输入
*   触摸离开
*   触摸取消

和[定向事件](http://www.w3.org/TR/screen-orientation/)：

*   方向改变

还有其他人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-02T03:31:03.743

有点晚了，但这里链接到有关触摸事件的[文档。](https://developer.mozilla.org/docs/Web/API/Touch_events)简而言之 - 事件：

*   触摸启动
*   触摸端
*   触摸移动
*   触摸取消

现在[不推荐使用](https://developer.mozilla.org/en-US/docs/Web/API/Window/orientationchange_event)orientationchange 事件。

# java - 如何将对象传递到 ApplicationContext？

> ID：14331673
> 
> 赞同：0
> 
> 时间：2013-01-15T05:30:29.360
> 
> 标签：java, spring

我是春天的新手。我们如何将对象传递给应用程序上下文 xml 文件？

例如：

我有类`A`调用：

```
`new ClassPathXmlApplicationContext("META-INF/spring/storage.xml"); 
```

`storage.xml`在其中定义了一个 bean（属于 class `B`）。

我想从创建类对象`B`并`A`通过`ApplicationContext`.

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:54:51.917

这是简单的方法。在 A 类

```
ApplicationContext context = new ClassPathXmlApplicationContext("META-INF/spring/storage.xml");

B objB = (B) context.getBean("beanIDofB");

objB.someMehodOfB(); 
```

但是这种做法已经过时了。试试spring注解

# python - Python CSS 解析器

> ID：14331678
> 
> 赞同：6
> 
> 时间：2013-01-15T05:30:49.383
> 
> 标签：python, html, css

我正在尝试使用 Python 中的 CSS 文件来帮助色盲人士。我需要进入每个选择器块并更改“背景：”和“颜色：”。我尝试使用 CSS 解析器，`tinycss`但他们并没有专注于获取选择器。

示例输入：

```
body {background:#fff; color:#ccc} 
```

并输出：

```
body {background:#000; color:#aaa} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T18:02:20.110

我通过使用正则表达式解决了这个问题。所以我最终制作了自己的解析器。我形成了一个正则表达式来搜索CSS文件中的#XXX、#XXXXXX、rgb(X,X,X)、hsl(X,X,X)等颜色模式，维护了一个列表来保持它们所在的位置CSS 文件。然后我只是在列表指定的位置重新编写了所有颜色。这是我所做的最好的总结。如果您需要非常详细的解释，请添加评论。谢谢你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T05:35:46.780

尝试这个：

[http://cthedot.de/cssutils/](http://cthedot.de/cssutils/)

```
parser = CSSParser()
# optionally
parser.setFetcher(fetcher)
sheet = parser.parseFile('test1.css', 'ascii')
print sheet.cssText 
```

在 css 处理中使用非常简单。

使用您可以使用的选择器`cssutils.css.SelectorList`和`cssutils.css.Selector`

# php - 设置网页登录密码和用户名为系统登录密码和用户名

> ID：14331680
> 
> 赞同：-2
> 
> 时间：2013-01-15T05:31:07.550
> 
> 标签：php

如何**将登录网页的用户名和登录密码设置为用户用于登录他/她的计算机的用户名和登录密码**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:33:27.920

你不能。但是，如果您访问我的网页并且我获取了您机器的用户名和密码，那不是很酷吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:34:10.983

不幸的是，您会发现几乎在任何操作系统上都无法获取用户密码。事实上，密码本身甚至不应该是可用的。正因为如此，你想做的事情不能直接完成。

但是，如果您碰巧位于带有 Windows 客户端的 Active Directory 域中，则可以将 IIS 设置为使用 Active Directory 身份验证。Internet Explorer 用户将能够使用此好处。IE 将发送一个令牌，然后通过域控制器验证，允许用户登录。您仍然不会得到密码（同样，它没有存储），但它可以让您对 Intranet 站点进行身份验证在一些特定条件下。

# loadrunner - 是否可以在胖客户端 Excel 2007 上执行负载测试

> ID：14331683
> 
> 赞同：0
> 
> 时间：2013-01-15T05:31:11.357
> 
> 标签：loadrunner

我们计划使用 HP Load Runner 11.0 在胖客户端 Excel 2007 上进行负载测试。Excel 应用程序已启用宏，并已在后端运行 Web 服务以与服务器通信。

是否可以进行负载测试。

此外，当我们尝试使用 vugen 录制 excel 2007 时，没有记录事件，发现这需要 HP 提供的补丁。如果有人有补丁并且能够做到，请告诉我。

对此的任何及时帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:00:04.350

一：当您要求破解补丁时，您正在从事软件盗版。如果您因维护协议而能够合法地访问补丁，那么您只需自己下载补丁即可。

关于破解补丁的评论使我个人不太可能完全帮助您。

二：我会说，“是的”这是可能的。我不会为您提供步骤，但假设您具备该工具的技能以及该专业所需的基础技能，您将能够弄清楚这一点。

三：LoadRunner 已经能够通过代理 wince LoadRunner 5.02 版（于 1998 年推出）记录 HTTP 对话，这是 Web 服务的通信基础。即使在最新版本中也保留了该功能。那将是你的关键。

四：因为你在破解软件世界中操作，这是整个性能测试行业的污点，你没有得到可能已经提供的明确步骤。祝您在这个问题上好运，并希望您的下一次软件审核顺利进行。

不要做一个头脑清醒的人。它具有长期的职业和社会影响。您正在将重大财务风险引入从一开始就旨在识别、消除、管理和控制风险的职业。你的行为与你的职业背道而驰

# perl - 带有简单动态内容“监听器”的 Perl 网络爬虫

> ID：14331687
> 
> 赞同：2
> 
> 时间：2013-01-15T05:31:44.813
> 
> 标签：perl, web-crawler

我正在尝试用 Perl 做一个简单的网络爬虫，但是很多网站都有加载的动态内容，例如，使用 javascript 函数：

```
$(document).ready(function() {
     $("#blabla").load('blublu/bla.php');
}); 
```

因此，我正在尝试调整我已经拥有的网络爬虫（获取 HTML 内容）以“等待”这些脚本加载，然后才获取整个（和完整的）网站内容 (HTML)。

到目前为止，我发现有人说这可以通过 WWW::Mechanize、Mechanize::Mozilla、WWW::Mechanize::Firefox 来实现。

问题是，我对 Perl 编程和模块实现不是很好，所以我想知道是否有好心人愿意在这里发布一个简单的示例或教程，展示我所要求的如何完成！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:37:00.277

使用 www::mechanize::firefox，您必须从 Firefox 的“插件商店”安装和配置 mozrepl 插件。

作为起点，您可以使用几个示例程序作为起点：[http ://search.cpan.org/dist/WWW-Mechanize-Firefox/lib/WWW/Mechanize/Firefox/Examples.pm](http://search.cpan.org/dist/WWW-Mechanize-Firefox/lib/WWW/Mechanize/Firefox/Examples.pm)

此页面包含如何等待特定 HTML 元素的示例：[http ://search.cpan.org/dist/WWW-Mechanize-Firefox/lib/WWW/Mechanize/Firefox/Cookbook.pod#Wait_until_an_element_appears](http://search.cpan.org/dist/WWW-Mechanize-Firefox/lib/WWW/Mechanize/Firefox/Cookbook.pod#Wait_until_an_element_appears)

它可以很容易地定制：

```
 # It will be wait 10 seconds for blabla, then timeout

    my $retries = 10;
    while ($retries-- and ! $mech->is_visible( xpath => '//*[@id="blabla"]' )) {
          sleep 1;
    };
    die "Timeout" if 0 > $retries;

    # Now the element exists
    $mech->click({xpath => '//*[@id="submit"]'}); 
```

# php - 按列名排序在列表页面上的普通 php 中不起作用

> ID：14331689
> 
> 赞同：1
> 
> 时间：2013-01-15T05:32:06.383
> 
> 标签：php, mysql, sorting

我已经创建了带有分页和按列名排序的列表页面。分页工作正常，但按列名搜索未按预期工作。这是我的代码：

索引.php

```
<table>
    <tr>
        <?php
        $page = "";
        if (isset($_GET['page'])) {
            $page = "&page=" . $_GET['page'] . "";
        }
        $order = "&order=ASC";
        if (isset($_GET['order']) && $_GET['order'] == "ASC") {
            $order = "&order=DESC";
        }
        ?> 
```

//用于排序记录的带有链接的列名

```
 <th><a href='index.php?<?php echo $order ?>&orderBy=articleTitle<?php echo $page ?>' >Article Title</a></th>
        <th><a href='index.php?<?php echo $order ?>&orderBy=articleSubTitle<?php echo $page ?>' >Article SubTitle</a></th>
    </tr>
    <?php
    $perpage = 2;
    if (isset($_GET["page"])) {
        $page = intval($_GET["page"]);
    } else {
        $page = 1;
    }
    $calc = $perpage * $page;
    $start = $calc - $perpage;
    $where = "";
    if (isset($_GET['orderBy'])) {
        $order = "ASC";
        if (isset($_GET['order']) && $_GET['order'] == "ASC") {
            $order = "DESC";
        }
        $where.=" ORDER BY " . $_GET['orderBy'] . " " . $order;
    }

    $result = mysql_query("SELECT * FROM xp_article $where Limit $start, $perpage");
    $i = 0;
    if (isset($_GET['order']) && $_GET['order'] == "ASC") {
        asort($result);
    }
    while ($row = mysql_fetch_array($result)) {
        echo "<tr>";
        echo "<td style='text-align:center'>" . $row['articleTitle'] . "</td>";
        echo "<td style='text-align:center'>" . $row['articleSubTitle'] . "</td>";
        echo "</tr>";
    }
    ?> 
```

//分页码

```
 <tr>
        <th colspan="3" class="paging" style="text-align: center">
            <?php
            if (isset($page)) {
                $result1 = mysql_query("SELECT Count(*) As Total FROM xp_article");
                $rows = mysql_num_rows($result1);
                if ($rows) {
                    $rs = mysql_fetch_array($result1);
                    $total = $rs["Total"];
                }
                $totalPages = ceil($total / $perpage);
                if ($page <= 1) {
                    echo "<span>Prev</span>";
                } else {
                    $j = $page - 1;
                    echo "<span><a href='index.php?page=$j'>< Prev</a></span>";
                }
                for ($i = 1; $i <= $totalPages; $i++) {
                    if ($i <> $page) {
                        echo "&nbsp;&nbsp;<span><a href='index.php?page=$i' >$i</a></span>";
                    } else {
                        echo "&nbsp;&nbsp;<span>$i</span>";
                    }
                }
                if ($page == $totalPages) {
                    echo "&nbsp;&nbsp;<span>Next ></span>";
                } else {
                    $j = $page + 1;
                    echo "&nbsp;&nbsp;<span><a href='index.php?page=$j'>Next</a></span>";
                }
            }
            ?>
        </th>
    </tr>
</table> 
```

谁能告诉我我错过了什么...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:53:12.897

//从您的代码中删除以下行

```
$where.=" ORDER BY " . $_GET['orderBy'] . " " . $order; 
```

//代替代码

```
while ($row = mysql_fetch_array($result)) {
        echo "<tr>";
        echo "<td style='text-align:center'>" . $row['articleTitle'] . "</td>";
        echo "<td style='text-align:center'>" . $row['articleSubTitle'] . "</td>";
        echo "</tr>";
    } 
```

//添加以下代码

```
$orderBy="articleTitle";
   if (isset($_GET['orderBy'])) {
        $orderBy=$_GET['orderBy'];
   }
   $j=0;
        $content=array();
        while ($row = mysql_fetch_array($result)) {
           $content[$j]['articleTitle']=$row['articleTitle'];
           $content[$j]['articleSubTitle']=$row['articleSubTitle'];
           $j++;
        }

        $content=sortByOneKey($content,$orderBy,$order);
        foreach ($content as $value){
            echo "<tr>";
            echo "<td style='text-align:center'>" . $value['articleTitle'] . "</td>";
            echo "<td style='text-align:center'>" . $value['articleSubTitle'] . "</td>";
            echo "</tr>";
        } 
```

//在你的页面中添加下面的函数

```
<?php 
 //this function is for sorting the array by using key value
 function sortByOneKey(array $array, $key, $asc = 'ASC') {
            $result = array();

            $values = array();
            foreach ($array as $id => $value) {
                $values[$id] = isset($value[$key]) ? $value[$key] : '';
            }

            if ($asc=="DESC") {
                arsort($values);
            }
            else {
                asort($values);                
            }

            foreach ($values as $key => $value) {
                $result[$key] = $array[$key];
            }

            return $result;
        }
?> 
```

希望这对你有用......!!! :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:09:18.627

```
 Hi your code is working good there is no need to bellow code remove it or comment it
if (isset($_GET['order']) && $_GET['order'] == "ASC") {
        asort($result);
    } 
```

# c# - 有什么方法可以测试类似的属性吗？

> ID：14331691
> 
> 赞同：3
> 
> 时间：2013-01-15T05:32:17.660
> 
> 标签：c#, unit-testing, nunit

假设我有一个具有一些类似属性的类：

```
public string First { get; set; }
public string Second { get; set; }
public string Third { get; set; } 
```

我想在我的测试中以同样的方式测试它们......所以我写道：

```
[Test]
public void TestFirst()
{
    // Asserting strings here
} 
```

有没有办法避免创建三个测试（一个用于第一个，一个用于第二个，一个用于第三个）？

我正在寻找类似的东西`[Values(First, Second, Third)]`，所以我可以编写一个迭代属性的测试。

干杯，并提前感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:02:01.953

How about this:

```
[TestFixture]
public class Tests
{
    [Test]
    public void Test()
    {
        var obj = new MyClass();

        obj.First = "some value";
        obj.Second = "some value";
        obj.Third = "some value";

        AssertPropertyValues(obj, "some value", x => x.First, x => x.Second, x => x.Third);
    }

    private void AssertPropertyValues<T, TProp>(T obj, TProp expectedValue, params Func<T, TProp>[] properties)
    {
        foreach (var property in properties)
        {
            TProp actualValue = property(obj);
            Assert.AreEqual(expectedValue, actualValue);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:15:40.567

这样做很容易，但我质疑这是否值得。

如何 - 上面的许多答案都有效，但这似乎最简单，假设您正在测试一个新创建的对象......

```
[TestCase("First", "foo"]
[TestCase("Second", 42]
[TestCase("Third", 3.14]
public void MyTest(string name, object expected)
{
    Assert.That(new MyClass(), Has.Property(name).EqualTo(expected));
} 
```

但是，在测试中放置三个单独的断言似乎更容易阅读......

```
[Test]
public void MyTest()
{
    var testObject = new MyClass();
    Assert.That(testObject, Has.Property("First").EqualTo("foo"));
    Assert.That(testObject, Has.Property("Second").EqualTo(42));
    Assert.That(testObject, Has.Property("Third").EqualTo(3.14));
} 
```

当然，这假设三个断言都是测试一件事的一部分，例如 DefaultConstructorInitializesMyClassCorrectly。如果这不是您要测试的内容，那么三个测试更有意义，即使它需要更多的输入。确定的一种方法是查看您是否能够为测试想出一个合理的名称。

查理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:40:37.970

您应该能够为此目的使用[表达式树。](http://msdn.microsoft.com/en-us/library/bb397951.aspx)使用[Expression.Property](http://msdn.microsoft.com/en-us/library/bb341554.aspx)方法的 MSDN 文档，我创建了以下辅助方法，用于获取从任意对象`T`命名的类型属性：`propertyName``obj`

```
public T InvokePropertyExpression<T>(object obj, string propertyName)
{
    return Expression.Lambda<Func<T>>(Expression.Property(
               Expression.Constant(obj), propertyName)).Compile()();
} 
```

在我的单元测试中使用这个辅助方法，我现在可以根据其名称访问相关属性，例如：

```
[Test, Sequential]
public void Tests([Values("First", "Second", "Third")] string propertyName,
                  [Values("hello", "again", "you")] string expected)
{
    var obj = new SomeClass 
        { First = "hello", Second = "again", Third = "you" };
    var actual = InvokePropertyExpression<string>(obj, propertyName);
    Assert.AreEqual(expected, actual);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T12:24:10.920

使用 . 来表达这种断言有很多可能性`NUnit.Framework.Constraints.Constraint`。此外，您可以使用or为测试描述更多输入，而不是使用`ValuesAttribute`or`TestCaseAttribute``ValuesSoueceAttribute``TestCaseSourceAttribute`

### 描述测试输入

让我们使用来定义预期的属性名称和它们的值`TestCaseSourceAttribute`

```
public IEnumerable TestCasesSourcesAllProperties
{
    get
    {
        yield return new TestCaseData(
            new Tuple<string, string>[] { 
                Tuple.Create("First", "foo"), 
                Tuple.Create("Second", "bar"), 
                Tuple.Create("Third", "boo") } as object)
                    .SetDescription("Test all properties using Constraint expression");
    }
} 
```

### 在单个测试中构建约束

现在我们可以在一个测试中为所有三个属性建立约束

```
// get test parameters from TestCasesSourcesAllProperties
[TestCaseSource("TestCasesSourcesAllProperties")]
public void ClassUnderTest_CheckAllProperty_ExpectValues(Tuple<string, string>[] propertiesNamesWithValues)
{
    // Arrange
    ClassUnderTest cut = null;

    // Act: perform actual test, here is only assignment
    cut = new ClassUnderTest { First =  "foo", Second = "bar",  Third  = "boo" };

    // Assert
    // check that class-under-test is not null
    NUnit.Framework.Constraints.Constraint expression = Is.Not.Null;

    foreach(var property in propertiesNamesWithValues)
    {
        // add constraint for every property one by one
        expression = expression.And.Property(property.Item1).EqualTo(property.Item2);
    }

    Assert.That(cut, expression);
} 
```

这是[一个完整的例子](https://gist.github.com/4538235)

### 缺点

配置逻辑，即`foreach`内部测试逻辑

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T18:17:29.253

您可以编写参数化测试并将属性访问器作为参数传递：

请参阅示例：假设您的具有 3 个属性的类是：

```
public class MyClass
{
    public string First { get; set; }
    public string Second { get; set; }
    public string Third { get; set; }
} 
```

然后测试可能看起来：

```
[TestFixture]
public class MyTest
{
    private TestCaseData[] propertyCases = new[]
        {
            new TestCaseData(
                "First",
                (Func<MyClass, string>) (obj => obj.First),
                (Action<MyClass, string>) ((obj, newVal) => obj.First = newVal)),

            new TestCaseData(
                "Second",
                (Func<MyClass, string>) (obj => obj.Second),
                (Action<MyClass, string>) ((obj, newVal) => obj.Second = newVal)),

            new TestCaseData(
                "Third",
                (Func<MyClass, string>) (obj => obj.Third),
                (Action<MyClass, string>) ((obj, newVal) => obj.Third = newVal))
        };

    [Test]
    [TestCaseSource("propertyCases")]
    public void Test(string description, Func<MyClass, string> getter, Action<MyClass, string> setter)
    {
        var obj = new MyClass();
        setter(obj, "42");

        var actual = getter(obj);

        Assert.That(actual, Is.EqualTo("42"));
    }
} 
```

几点注意事项：
1\. 未使用的字符串描述作为第一个参数传递，以区分通过 NUnit 测试运行器 UI 或 Resharper 运行的测试用例。
2\. Tet 案例是独立的，即使`First`属性测试失败，其他 2 个测试也会运行。
3\. 可以通过 NUnit 测试运行器 UI 或通过 Resharper 单独运行一个测试用例。

所以，你的测试是干净和干燥的 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T06:54:21.087

您可以[`Values`](http://nunit.org/index.php?p=values&r=2.5)在测试方法的参数上使用该属性：

```
[Test]
public void MyTest([Values("A","B")] string s)
{
    ...
} 
```

但是，这仅适用于字符串常量（即不适用于属性值）。

我想您可以使用反射从给定值中获取属性值，例如

```
[Test]
public void MyTest([Values("A","B")] string propName)
{
    var myClass = new MyClass();
    var value = myClass.GetType().GetProperty(propName).GetValue(myClass, null);

    // test value
} 
```

但这并不是最干净的解决方案。也许您可以编写一个测试，调用一个方法来测试每个属性。

```
[Test]
public void MyTest()
{
    var myClass = new MyClass();
    MyPropertyTest(myClass.First);
    MyPropertyTest(myClass.Second);
    MyPropertyTest(myClass.Third);
}

public void MyPropertyTest(string value)
{
    // Assert on string
} 
```

但是，最好避免这种测试方式，因为单元测试应该这样做 - 测试代码单元。如果每个测试都被正确命名，它可以用来记录您所期望的，并且可以在将来轻松添加。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-21T04:02:15.000

感谢大家的回答和帮助。学到了很多东西。

这就是我最终要做的。我已经使用反射来获取所有字符串属性，然后设置为一个值，检查值是否设置，设置为 null，检查它是否返回一个空字符串（属性的 getter 中的逻辑）。

```
[Test]
public void Test_AllStringProperties()
{
    // Linq query to get a list containing all string properties
    var string_props= (from prop in bkvm.GetType()
                            .GetProperties(BindingFlags.Public | BindingFlags.Instance)
                      where
                        prop.PropertyType == typeof(string) &&
                        prop.CanWrite && prop.CanRead
                      select prop).ToList();

    string_props.ForEach(p =>{
                                 // Set value of property to a different string
                                 string set_val = string.Format("Setting [{0}] to: \"Testing string\".", p.Name);
                                 p.SetValue(bkvm, "Testing string", null);
                                 Debug.WriteLine(set_val);
                                 // Assert it was set correctly
                                 Assert.AreEqual("Testing string", p.GetValue(bkvm, null));

                                 // Set property to null
                                 p.SetValue(bkvm,null,null);
                                 set_val = string.Format("Setting [{0}] to null. Should yield an empty string.", p.Name);
                                 Debug.WriteLine(set_val);
                                 // Assert it returns an empty string.
                                 Assert.AreEqual(string.Empty,p.GetValue(bkvm, null));
                             }
        );
} 
```

这样我就不需要担心是否有人添加了一个属性，因为它会被自动检查，而不需要我更新测试代码（正如你可能猜到的，不是每个人都更新或编写测试:)

欢迎对此解决方案提出任何意见。

# json - 我们如何将 JObject 转换为数组

> ID：14331692
> 
> 赞同：1
> 
> 时间：2013-01-15T05:32:21.327
> 
> 标签：json, multidimensional-array

我有一个带有多维数组的 Newtonsoft JSON jObject 变量。值如下所列。我想将此 jObject 转换为数组，以便我们可以非常轻松地在 c# 中管理数组。任何人都做得更苗条，请帮助我。

 `````
{
  "DRIVER_CODE": "hk",
  "DRV_NAME": "hk",
  "DRV_ADDR": "hk",
  "DRV_DOB_DT": "07-01-2013",
  "DRV_NATIONALITY": "7",
  "DRV_PHONE1": "kh",
  "DRV_PHONE2": "hk",
  "DRV_MOBILE1": "hk",
  "DRV_MOBILE2": "hk",
  "DRV_LIC_NO": "hk",
  "DRV_LIC_ENDORSE": "hk",
  "DRV_LIC_ISSUE_DT": "08-01-2013",
  "DRV_LIC_EXPIRY_DT": "15-01-2013",
  "DRV_LIC_ISSUEDAT": "hk",
  "DRV_USER_CODE": "hk",
  "DRV_USER_PIN": "hk",
  "DRV_STATUS": 1,
  "DRV_RELIGION": "1",
  "DRV_WEEKLYOFF": "0",
  "DRV_PASSPORT_NUMBER": "hk",
  "DRV_ISSUED_AT": "kh",
  "DRV_ISSUED_DATE": "10-01-2013",
  "DRV_EXPIRY_DATE": "18-01-2013",
  "DRV_VISA_SPONSOR": "kh",
  "DRV_VISA_NUMBER": "hk",
  "DRV_VISA_ISSUEDATE": "17-01-2013",
  "DRV_VISA_EXPIRYDATE": "15-01-2013",
  "DRV_LANG1_CODE": "ARB",
  "DRV_LANG2_CODE": "CHN",
  "DRV_LANG3_CODE": "ENG",
  "NONAVAILABILITY": [
    {},
    {
      "id": 1,
      "fromdate": "15-01-2013",
      "todate": "15-01-2013",
      "reasonVal": "Compassionate Leave",
      "ReasonID": "4"
    },
    {
      "id": 2,
      "fromdate": "30-01-2013",
      "todate": "23-01-2013",
      "reasonVal": "Haj Leave",
      "ReasonID": "3"
    },
    {
      "id": 3,
      "fromdate": "30-01-2013",
      "todate": "23-01-2013",
      "reasonVal": "Haj Leave",
      "ReasonID": "3"
    },
    {
      "id": 4,
      "fromdate": "30-01-2013",
      "todate": "23-01-2013",
      "reasonVal": "Haj Leave",
      "ReasonID": "3"
    },
    {
      "id": 5,
      "fromdate": "30-01-2013",
      "todate": "23-01-2013",
      "reasonVal": "Haj Leave",
      "ReasonID": "3"
    }
  ]
} 
```` 

`我试图将 NONAVAILABILITY 对象转换为数组，但没有成功。任何人都已转换此请提交，这将有帮助。`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:24:12.053

```
 JArray nonavailability_array = (JArray)role["NONAVAILABILITY"];

    for (Int32 i = 1; i < nonavailability_array.Count; i++)
     {
       JObject aItem = (JObject)nonavailability_array[i];
       datetime dt = Convert.ToDateTime(aItem["fromdate"].ToString().Replace('"', ' ').Trim());
      } 
`````

# load-balancing - kafka 0.8如何实现消息级负载均衡？

> ID：14331694
> 
> 赞同：1
> 
> 时间：2013-01-15T05:32:54.990
> 
> 标签：load-balancing, partitioning, producer-consumer, apache-kafka

我们知道，在 kafka 0.8 中，producer 直接连接到 broker，而不连接到 zookeeper。比它如何在每个请求的基础上实现基于 Zookeeper 的负载平衡？实际上，当创建一个主题时，它的分区将分布在一个或多个代理中。发送消息时，会根据其关键字将其投递到某个分区。也就是说，一定要发送到固定broker上的固定partition。所谓的负载均衡是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T19:26:21.927

生产者端的负载平衡有效地取决于您是希望代理根据使用提供的密钥自动分区还是让代理处理消息自动转到哪个分区。

如果您不想指定分区键，则*不必*指定分区键，因此您的负载平衡仅限于给定主题可用的分区数，而不是分配给键的分区数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T09:56:35.270

kafka 将需要一个 Zookeepeer 实例来连接到代理。我们可以通过使用默认分区器或自定义分区器写入主题中的分区来实现负载平衡。

# java - 如何避免 JPA 2.0 + Spring 3.0 中的 ID 生成并发？

> ID：14331695
> 
> 赞同：1
> 
> 时间：2013-01-15T05:33:13.413
> 
> 标签：java, spring, jpa

在我的 Web 应用程序中，我得到了`Concurrency Problem`JPA ID Generation。我使用`Table`生成策略。我已经得到JPA ID Generation 的[并发问题](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Concurrency_and_Deadlocks)。

如何避免`Concurrency Problem`JPA ID 生成？ID生成的更好方法是什么？Spring 3.0 有办法避免吗？

实际上，如果我使用其他 id 生成策略，我会担心数据库依赖性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:26:14.967

EclipseLink 通常会使用单独的事务来分配生成的 id。如果您使用 JTA 数据源，则它不能，除非您还在 persistence.xml 中提供了非 jta 数据源。

此外，如果您提前触发数据库事务（例如刷新），则表 ID 生成将不得不使用事务连接，除非您指定序列连接池。

见， [http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/p_connection_pool_sequence.htm#BABIDAGH](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/p_connection_pool_sequence.htm#BABIDAGH)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:04:18.610

在 Oracle 中，您可以使用自治事务并创建存储过程，如下所示：

```
CREATE OR REPLACE PROCEDURE GETAPPLICATIONSEQUENCE (
name IN VARCHAR,
offSet IN NUMBER,
seqValue OUT INTEGER
)
AS PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN
    SELECT sequence_value INTO seqValue FROM sequence_table WHERE sequence_name = name FOR UPDATE;
    UPDATE sequence_table SET sequence_value = sequence_value + offSet WHERE sequence_name = name;
    COMMIT;
END; 
```

现在，只要您能够从数据库代码中调用此存储过程，您就可以传入所需序列的名称和偏移量（以在一个块中获取多个值）并获取序列值。您将不得不查看 SQL Server 是否具有与 AUTONOMOUS 事务等效的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:58:34.280

正如该链接所说，一些 JPA 提供程序使用单独的连接来生成值（[DataNucleus JPA](http://www.datanucleus.org)确实如此）。所以这回避了这个问题。取决于您的 JPA 提供程序（您没有说明）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T07:18:53.667

那么您不应该依赖数据库来生成您的 ID。您可以`UUID`用作您的钥匙。它们可以彼此独立生成，因此您不会遇到并发问题。但是，您可能必须更改数据库架构以支持它，因为 UUID 的 128 位可能不适合您当前的主键列。

# ios - 从 Titanium 应用程序更新密码字段

> ID：14331696
> 
> 赞同：0
> 
> 时间：2013-01-15T05:33:18.973
> 
> 标签：ios, titanium, cloud, titanium-mobile, appcelerator-mobile

我正在开发基于 Titanium 的 iOS 应用程序。

我需要在我的应用程序中实现密码重置功能。

![重设密码](../Images/20ed210cf479f68c43bd963c56a65dd0.png)

我找到`requestResetPassword`了这样做的方法：

```
Cloud.Users.requestResetPassword({
    email: 'me@mycompany.com'
}, function (e) {
    if (e.success) {
        alert('Success: Reset Request Sent');
    } else {
        alert('Error:\\n' +
            ((e.error && e.message) || JSON.stringify(e)));
    }
}); 
```

从文档中说，它将向用户的邮件帐户发送重置密码选项。但我不想那样。我需要在我的应用程序中重置密码。

此外，我无法删除当前用户并使用新密码为同一用户创建一个新帐户，因为每个特定用户都保存了很多自定义数据。所以这不是一个好的解决方案。

我也找到了该`update`功能，但我不知道如何使用它来更新云中的密码字段，因为它不是自定义字段。

```
Cloud.Users.update({
    email: 'me@mycompany.com',
    first_name: 'm',
    last_name: 'e',
}, function (e) {
    if (e.success) {
        var user = e.users[0];
        alert('Success:\\n' +
            'id: ' + user.id + '\\n' +
            'first name: ' + user.first_name + '\\n' +
            'last name: ' + user.last_name);
    } else {
        alert('Error:\\n' +
            ((e.error && e.message) || JSON.stringify(e)));
    }
}); 
```

无论如何可以从我的应用程序中执行此操作吗？如何在我的应用程序中更新用户的密码字段？

参考文档：

1.  [**Titanium.Cloud.Users 模块**](http://tidevcn.com/apidoc/Titanium.Cloud.Users-module.html)
2.  [**钛云用户**](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Cloud.Users)

请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:19:49.970

使用“更新”。像在 create 调用中一样指定密码属性：

```
{
    password: 'cheese',
    password_confirmation: 'cheese',
    email: 'codfish@joe.com'
} 
```

[http://cloud.appcelerator.com/docs/api/v1/users/update](http://cloud.appcelerator.com/docs/api/v1/users/update)

# oracle11g - 无法从 C# 执行 Oracle Package.Function

> ID：14331699
> 
> 赞同：1
> 
> 时间：2013-01-15T05:33:32.360
> 
> 标签：oracle11g

我正在尝试使用**Oracle.DataAccess**从 Visual Studio 2012 (c#) 连接到 Oracle 数据库并运行作为 PACKAGE 一部分的 FUNCTION。下面是SQL：

```
FUNCTION TEST (test_name in varchar2,
   test_year in number,
   test_outmessage out varchar2)
RETURN NUMBER IS
   test_exists     VARCHAR2(1) := 'N';
BEGIN
   BEGIN
      SELECT 'Y' INTO test_exists
        FROM Test_Table
       WHERE table_name = test_name
         AND table_year = test_year;
   EXCEPTION
      WHEN NO_DATA_FOUND THEN
         test_exists := 'N';
      WHEN OTHERS THEN
         test_outmessage := 'error'
         DBMS_OUTPUT.put_line (test_outmessage);
         RETURN -1;
   END;

   IF test_exists = 'Y' THEN
      RETURN 1;
   ELSE
      RETURN 0;
   END IF;

END TEST; 
```

我已经编写了 c# 代码来从我的应用程序中执行此功能：

```
 using (OracleConnection connection = new OracleConnection("Data Source=Database; User ID=user; Password=pass"))
{
  OracleCommand command = connection.CreateCommand();
  command.CommandType = System.Data.CommandType.StoredProcedure;
  command.CommandText = "USER.PACKAGE.TEST";

   OracleParameter test_name = new OracleParameter();
   test_name.ParameterName = "test_name";
   test_name.OracleDbType = OracleDbType.NVarchar2;
   test_name.Direction = System.Data.ParameterDirection.Input;
   test_name.Value = "myname";
   command.Parameters.Add(test_name);

   OracleParameter test_year = new OracleParameter();
   test_year.ParameterName = "test_year";
   test_year.OracleDbType = OracleDbType.Decimal;
   test_year.Direction = System.Data.ParameterDirection.Input;
   test_year.Value = 2004;
   command.Parameters.Add(test_year);

   OracleParameter test_outmessage = new OracleParameter();
   test_outmessage.ParameterName = "test_outmessage ";
   test_outmessage.OracleDbType = OracleDbType.NVarchar2;
   test_outmessage.Direction = System.Data.ParameterDirection.Output;
   command.Parameters.Add(test_outmessage);

   OracleParameter result = new OracleParameter();
   result.ParameterName = "ReturnValue";
   result.OracleDbType = OracleDbType.Decimal;
   result.Direction = System.Data.ParameterDirection.ReturnValue;
   command.Parameters.Add(result);
   try
   {
         connection.Open();

         command.ExecuteNonQuery();
         string r = result.Value.ToString();
         string r1 = test_outmessage.Value.ToString();
   }
   catch (Exception)
   {

   }
   finally
   {
          connection.Close();

    }
 } 
```

运行此代码时也不例外，但是，返回值（r 和 r1）为空。在函数中，我猜想**字符串 r**应该是 -1、1 或 0 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:42:15.497

找到了答案。Oracle 关心参数添加的顺序，**返回值**应该是添加到**OracleCommand**的第一个参数。

# cqrs - 如何在 CQRS 应用程序中实现数据网格

> ID：14331700
> 
> 赞同：2
> 
> 时间：2013-01-15T05:33:53.393
> 
> 标签：cqrs

我正在尝试编写我的第一个 CQRS 应用程序，但在制作一个涉及绑定到 T 集合（聚合根）的网格的简单视图时遇到了麻烦。

我已经进行了广泛的谷歌搜索，但我找不到任何关于使用 CQRS 为该列表建模用户体验的想法。

1) 一个想法是有一个命令用于从列表中创建、编辑和删除每个 T，并使用 BindingList 的自定义实现来了解这些操作何时发生。

2）另一种选择是等待用户进行所有必要的更改，并以某种方式分析原始聚合根与编辑后的差异，并一次性发送一系列命令来进行这些更改。

我的第一个问题是我使用的是标识列而不是 Guids（因此客户端不会为新 T 生成 Id）所以如果用户决定在处理客户端的创建命令之前删除他们刚刚创建的模型在服务器上，我怎样才能告诉服务器要删除什么模型？

第二个似乎很复杂，因为我必须弄清楚如何评估添加、删除和编辑的项目才能发送这批命令。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:26:33.207

没有理由使用 CQRS 对 CRUD（创建、读取、更新、删除）操作进行建模。甚至在宠物项目或练习目的中都没有。如果它是 CRUD，那么以最简单的方式处理它。

用户管理、主数据输入等功能通常属于它们自己的限界上下文，不应使用 CQRS。

# scala - 将类文件导入 Scala 解释器 IMain

> ID：14331703
> 
> 赞同：2
> 
> 时间：2013-01-15T05:33:56.790
> 
> 标签：scala, interpreter

我正在尝试使用 scala 解释器中的 IMain 方法来运行已转换为字符串的函数。但是我无法将用户创建的类导入解释器。

例如，您可以轻松地从 scala 数据库中导入类，例如：

```
val m = new IMain()
m.interpret("import scala.math.sin")
m.interpret("sin(10)") 
```

只要解释器​​正在运行，这个导入就会一直存在。但是，我无法找到一种方法来导入我创建的类和对象（或任何私有库）：

```
m.interpret("import sounder.Sounder.play"
m.interpret("play(t=>50*sin(2*Pi*t*400),0,10") 
```

（play是一种通过电脑声卡播放声音的方法）

我已经尝试使用解释器中的所有方法，但似乎都不起作用。我想出的唯一解决方案是将类文件转换为一行 with ; 将每一行分开并通过解释运行，但即使这样也存在阻止它编译的问题。

是否有允许输入到解释器的方法，或者是否有另一个过程允许scala解释器处理字符串。

感谢您的帮助，我在 Windows 7 计算机上运行 Scala 2.9.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:47:41.370

您是否尝试过以下方法：

```
val m = new IMain() {
   override protected def parentClassLoader = sounder.Sounder.getClassLoader
} 
```

在 Scala 2.10 中，您可以执行以下操作：

```
val s = new tools.nsc.Settings()
s.embeddedDefaults[sounder.Sounder]
val m = new IMain(s) 
```

如果您通过`sbt run`. 该手册会告诉您需要添加`fork in run := true`到您的`build.sbt`. 中，但恐怕这对自定义库没有帮助。

# mongodb - 副本集上的 MongoDb 分片设置

> ID：14331710
> 
> 赞同：2
> 
> 时间：2013-01-15T05:34:14.743
> 
> 标签：mongodb, sharding

我想在副本集上设置 mongodb 分片集群。我已经在 3 台机器上设置了副本集，所以对于分片集群，我可以使用这些机器吗？我的副本集状态如下。

```
rs.status()
{
    "set" : "repSet",
    "date" : ISODate("2013-01-12T09:49:10Z"),
    "myState" : 1,
    "members" : [
        {
            "_id" : 0,
            "name" : "10.1.4.138:27017",
            "health" : 1,
            "state" : 3,
            "stateStr" : "SECONDARY",
            "uptime" : 94839,
            "optime" : Timestamp(1357901076000, 4),
            "optimeDate" : ISODate("2013-01-11T10:44:36Z"),
            "lastHeartbeat" : ISODate("2013-01-12T09:49:10Z"),
            "pingMs" : 0,
            "errmsg" : "still syncing, not yet to minValid optime 50f04939:1"
        },
        {
            "_id" : 1,
            "name" : "10.1.4.21:27017",
            "health" : 1,
            "state" : 1,
            "stateStr" : "PRIMARY",
            "uptime" : 94840,
            "optime" : Timestamp(1357982990000, 5587),
            "optimeDate" : ISODate("2013-01-12T09:29:50Z"),
            "self" : true
        },
        {
            "_id" : 2,
            "name" : "10.1.4.88:27017",
            "health" : 1,
            "state" : 3,
            "stateStr" : "RECOVERING",
            "uptime" : 87517,
            "optime" : Timestamp(1357900674000, 10),
            "optimeDate" : ISODate("2013-01-11T10:37:54Z"),
            "lastHeartbeat" : ISODate("2013-01-12T09:49:10Z"),
            "pingMs" : 0,
            "errmsg" : "still syncing, not yet to minValid optime 50f04939:1"
        }
    ],
    "ok" : 1
} 
```

我浏览了 mongodb 分片设置文档，但不知道如何设置。

为三个配置数据库实例创建以下数据目录：

```
 /data/example/config1
    /data/example/config2
    /data/example/config3 
```

在系统提示符下发出以下命令：

```
mkdir -p /data/example/config1 /data/example/config2 /data/example/config3 
```

在单独的终端窗口或 GNU 屏幕窗口中，通过运行以下命令启动配置数据库：

```
mongod --configsvr --dbpath /data/example/config1 --port 20001
mongod --configsvr --dbpath /data/example/config2 --port 20002
mongod --configsvr --dbpath /data/example/config3 --port 20003 
```

我当前的数据目录是`/var/lib/mongodb`，所以我不想创建单独的目录。那么我如何使用当前数据目录以及在所有三台服务器上遵循哪些步骤。

谢谢拉朱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:09:14.380

按照本教程将副本集转换为复制分片集群： [http ://docs.mongodb.org/manual/tutorial/convert-replica-set-to-replicated-shard-cluster/](http://docs.mongodb.org/manual/tutorial/convert-replica-set-to-replicated-shard-cluster/)

# ios - 合并 NSDictionaries - NSUnknownKeyException

> ID：14331715
> 
> 赞同：6
> 
> 时间：2013-01-15T05:34:24.067
> 
> 标签：ios, objective-c, nsdictionary

我正在尝试合并两个 NSDictionaries：

```
NSDictionary *areaAttributes = [[area entity] attributesByName];
NSDictionary *gpsAttributes = [[gps entity] attributesByName];
NSMutableDictionary *combinedAttributes = [areaAttributes mutableCopy];
[combinedAttributes addEntriesFromDictionary:gpsAttributes]; 
```

但是得到以下错误：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: 'The key 'latitude' is not defined for this NSKnownKeysDictionary' 
```

`latitude`是关键`gpsAttributes`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T21:55:09.960

这里的问题是你不是在处理普通的字典，而是在处理`NSKnownKeysDictionary`，这是 Apple 在 Cocoa 的各个部分中使用的一种未记录的类型。

如果您从 SDK 中转储 ObjC 类信息——或者，如果这听起来太吓人，请阅读[其他人的版本](https://github.com/yyfrankyy/iOS5.1-Framework-Headers/blob/master/CoreData.framework/NSKnownKeysDictionary.h)——您会发现这实际上是 的子类`NSMutableDictionary`，而不仅仅是`NSDictionary`，所以它已经是可变的，所以你`mutableCopy`的不是必需的。

更重要的是，如果你阅读了[`NSCopying`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html)和[`NSMutableCopying`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSMutableCopying_Protocol/Reference/Reference.html)协议是如何定义的，那么就没有什么需要`mutableCopy`返回与它的基类可变兼容的东西了。只是它是可变的，并且与它的基类不可变地兼容。这很烦人。

*这里的答案是生成一个新的可变字典，并将两个* 对象的键复制`NSKnownKeysDictionary`到其中：

```
NSDictionary *areaAttributes = [[area entity] attributesByName];
NSDictionary *gpsAttributes = [[gps entity] attributesByName];
NSMutableDictionary *combinedAttributes = [NSMutableDictionary dictionaryWithCapacity:20];
[combinedAttributes addEntriesFromDictionary:areaAttributes];
[combinedAttributes addEntriesFromDictionary:gpsAttributes]; 
```

（显然，如果您担心性能，您要么想要调整它`20`，要么从每个字典中获取键的数量并传递总数。但通常，这并不重要。）

您可能想知道为什么 Apple 会这样做。但如果你仔细想想，这是一件很方便的事情。你有一个对象，可以`struct`在某个库的内部像 C 一样使用，但在外部看起来就像`NSDictionary`. （类似的目的，例如，`namedtuple`在 Python 中。）返回它们的方法都被设计为 return `NSDictionary`， not `NSMutableDictionary`，所以没有人会知道他们有一组受限的键。当然，如果他们调用`mutableCopy`.

您可能还想知道如何提前知道这一点。好吧，你真的不能。要么记录对象的类型，要么编写异常处理程序并记录异常，要么让它崩溃并在故障转储中找到异常。或者，或者，您可以采取防御措施，并假设任何字典都可以给您一个无用`mutableCopy`且浅显的复制到您控制的类型的字典中。

# ios - UIButton背景图像不清晰

> ID：14331716
> 
> 赞同：0
> 
> 时间：2013-01-15T05:34:27.130
> 
> 标签：ios, image, uibutton, interface-builder, pixel

我在 Interface Builder 中设置 UIButton 的背景图像。由于某种原因，这张图片渲染得不好，我最终得到了一些不清晰的东西。按钮为 65x65，图像为 302x302，并具有“@2x”版本。

![我在模拟器中得到的模糊图像的屏幕截图](../Images/a41e19a63ed9ba2f536a77f9595ac844.png) *我在模拟器中得到的模糊图像的屏幕截图*

关于我应该做些什么来解决这个问题的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:14:59.773

如果图像是 302 平方，而按钮是 65 平方，则必须将其缩小 4.65 倍。这将破坏显示图像的质量。如果您将图像资源用于固定大小的 UI 元素，它们的大小应该相同。

# blackberry-10 - BB10 - ListView 过滤器或搜索功能？

> ID：14331718
> 
> 赞同：1
> 
> 时间：2013-01-15T05:34:30.560
> 
> 标签：blackberry-10, blackberry-cascades

我有`ListVIew`那个充满了硬编码的`DataModel`. 然后我想创建`DropDown`包含 dataModel 标头的菜单。

当我选择该`DropDown`选项时，我只想`ListView`显示所选标题的项目。

所以，我的问题是：

1.  我怎样才能做到这一点`QML`？

2.  有没有办法`DropDown's` `Option`用数据模型填充？

以下是我的应用程序的结构：

```
 Page{
     Container{
         DropDown{} //onSelectedValueChanged, I want the ListView filtered
         ListView{
              dataModel: XmlDataModel{...}
              listItemComponents: [...]
         }
     }
 } 
```

之前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:01:37.717

我在黑莓支持论坛上问[了这个问题](http://supportforums.blackberry.com/t5/Cascades-Development/ListView-filter-or-search-function/m-p/2097691#M11583)并得到了答案：

如果我们按照文档，我们知道 dataModel 看起来像这样：

```
<root>
    <header> ... </header>
    <header> ... </header>
    <header> ... </header>
</root> 
```

然后我们将 更改`rootIndexPath`为标题的索引。所以只显示该标题的孩子。索引是数组整数类型

```
myListView.rootIndexPath = [0] //Show all child of first header
myListView.rootIndexPath = [1] //Show all child of second header 
```

# parsing - 精确浮点数的编译器解析

> ID：14331719
> 
> 赞同：4
> 
> 时间：2013-01-15T05:34:38.593
> 
> 标签：parsing, floating-point, floating-accuracy

众所周知，IEEE 浮点数可以存储所有整数和 2 的倒数的整数倍的精确表示，例如 1/2 或 3/4，只要这些数字保持在浮点范围内 -点类型。

但是，浮点解析器通常能保证解析这些数字的十进制表示的准确结果吗？

例如，如果我在 C 程序中`0.75`用作`double`文字，编译器是否会保证编译后的代码包含 3/4 的精确表示，或者是否存在产生 0.7 和一些不精确表示之和的风险0.05 的不精确表示？

或者，同样，如果我`3e4`用作`double`文字，是否可以将精确的 3 乘以 2^(4*ln(10)/ln(2)) 的一些不精确表示或一些类似的数学？

FP解析器在这件事上通常需要遵循什么标准，还是通常完全留给实现？如果是后者，有谁知道 GCC 或 glibc 等实际重要的实现实际上是如何工作的？

我主要是出于好奇，而不是因为我想依赖这种行为；但有时，如果可以知道值仅来自文字来源，则可以很方便地知道 FP 相等比较可以保证工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:00:07.650

根据 C 2011 6.4.4.2 3，C 标准允许浮点常量是最接近文字常量的精确值的可表示值，或者是与最接近的值直接相邻的更大或更小的可表示值。一些 C 实现确实更好的。现代实现应该做得更好，因为已经发布了正确进行转换的算法。

但是，C 标准还提供了十六进制浮点常量，这使编译器可以轻松正确地进行转换。十六进制浮点常量的基本形式为 0x *hhh*。*hhh* p *eee*，其中*hhh*是十六进制数字，*eee*是十进制指数，可能有符号。（“.”一侧的十六进制数字如果为零，可以省略，如果右边的数字省略，句点可以省略。）指数是2的幂。

如果浮点数的基数在 C 实现中是 2 的幂，则 C 标准要求正确舍入十六进制浮点常数。如果无法准确表示十六进制常数，它建议生成诊断消息。

*例如*，`0x3p-2`应该正好是 0.75。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T06:04:23.203

通常不能保证在抽象语法树中获得最接近源代码中十进制表示的浮点数。诸如 C99 之类的语言标准可能会指定它必须在一个 ULP 内（即，不是最接近的，而是两个最接近的之一）。在实践中，编译器可能会使用主机的`strtof()`, `strtod()`,... 函数，这些函数并没有被指定为返回最接近的数字，而且[有时确实没有](http://blog.frama-c.com/index.php?post/2011/11/18/Analyzing-single-precision-floating-point-constants)）。

within-one-ULP 约束意味着浮点数的精确十进制表示**应**转换为该数字。但是，许多解释器（如 Ruby 或 Tcl）都带有自己[的](http://brlcad.org/xref/source/src/other/tcl/compat/strtod.c) `strtod()`解释器，以防主机没有。这种实现很糟糕，并且可能会返回多个 ULP 错误的结果。

如果您需要通过实现自己的转换函数来解决这个问题，一个简单但正确的基于大整数的函数的大纲在[Exploring Binary 博客上](http://www.exploringbinary.com/correct-decimal-to-floating-point-using-big-integers/)。

* * *

总结一下：对于在一个 ULP 内指定十进制到浮点转换的语言，只要您使用高质量的编译器实现，您应该可以很好地进行精确表示。对于没有此类规范的解释型语言，要么`strtod()`调用主机，在这种情况下你应该没问题，要么使用可怕的实现，在这种情况下你不是。

# java - 从 Java SE 程序调用 Web 服务方法

> ID：14331727
> 
> 赞同：0
> 
> 时间：2013-01-15T05:35:50.490
> 
> 标签：java, web-services, axis

如何从 Java 桌面客户端调用 Web 服务方法。基本上，我的 java 程序运行在支持 Internet 的桌面上。我的网络服务网址是例如。`localhost:8090/Service.svc`, 这个网络服务基本上是在数据库中存储数据，我们只需要调用一个网络服务方法并传递一个 xml 字符串作为参数。

### 我的示例代码如下所示：

```
public static void main(String [] args)
    {
        String accessURL,method, parameters[];
        try {

            String xml = "<DocumentElement>"
                        + "<Table1>"
                        + "<ConsumptionID>0</ConsumptionID>"
                        + "<ConsumptionDate>2012/01/01 00:00:00</ConsumptionDate>"
                        + "<MeterNumber>99999901</MeterNumber>"
                        + "<Voltage>200</Voltage>"
                        + "<Ampere>50</Ampere>"
                        + "<PowerFactor>0.91</PowerFactor>"
                        + "<KiloWatt>8525</KiloWatt>"
                        + "<HourValue>3</HourValue>"
                        + "<EndKiloWattHour>5841</EndKiloWattHour>"
                        + "<KVA>1000</KVA>"
                        + "<ClientID>1011</ClientID>"
                        + "<CreatedBy>1</CreatedBy>"
                        + "</Table1>"
                        + "</DocumentElement>";

            accessURL = "http://localhost:8090/Service.svc";
            method = "Save_Consumption";
            parameters = new String[1];

            parameters[0] = xml;
            Service service = new Service();
            Call call = (Call)service.createCall();
            call.setTargetEndpointAddress(new java.net.URL(accessURL));
            call.setOperationName(method);
            Object[] params = new Object[parameters.length];
            params[0]=(Object)(parameters[0]);
            String retval = (String)call.invoke(params);
            System.out.println("Operation Result: " + retval);
        } catch(Exception e) {
            System.err.println(e.toString());
            e.printStackTrace();
        }
    } 
```

### 但它显示异常，这是堆栈跟踪。

```
run:
- Unable to find required classes (javax.activation.DataHandler and javax.mail.internet.MimeMultipart). Attachment support is disabled.
The message with Action '' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).
AxisFault
 faultCode: {http://schemas.microsoft.com/ws/2005/05/addressing/none}ActionNotSupported
 faultSubcode: 
 faultString: The message with Action '' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).
 faultActor: 
 faultNode: 
 faultDetail: 
    {http://xml.apache.org/axis/}stackTrace:The message with Action '' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).
    at org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder.java:222)
    at org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.java:129)
    at org.apache.axis.encoding.DeserializationContext.endElement(DeserializationContext.java:1087)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1741)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2898)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
    at org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)
    at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
    at org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
    at org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:62)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at com.lmeasure.utils.HelloClient.main(HelloClient.java:54)

    {http://xml.apache.org/axis/}hostname:eeipldt0132

The message with Action '' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).
    at org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder.java:222)
    at org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.java:129)
    at org.apache.axis.encoding.DeserializationContext.endElement(DeserializationContext.java:1087)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1741)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2898)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
    at org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)
    at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
    at org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
    at org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:62)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at com.lmeasure.utils.HelloClient.main(HelloClient.java:54) 
```

谁能知道这有什么问题或为我提供任何好的教程/工作示例来解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:46:54.530

问题似乎是您没有发布适当的 XML。对于 SOAP 服务，手工制作 SOAP 消息非常困难。您应该让 Axis 为您执行此操作。

对于初学者，您将使用服务 WSDL。这是 XML 模式中的服务定义。

一旦有了 WSDL，就可以生成客户端存根。存根将允许您使用 Java 对象而不是 XML 构建客户端请求。

*您可以使用wsdltojava*工具在 Axis 中执行此操作。这是文档：[http](http://axis.apache.org/axis/java/user-guide.html#WSDL2JavaBuildingStubsSkeletonsAndDataTypesFromWSDL) ://axis.apache.org/axis/java/user-guide.html#WSDL2JavaBuildingStubsSkeletonsAndDataTypesFromWSDL 。

这是一个例子：[http ://www.digizol.com/2008/07/web-service-axis-tutorial-client-server.html](http://www.digizol.com/2008/07/web-service-axis-tutorial-client-server.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:17:13.993

您可以尝试使用[`wsimport`](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)JDK 6 中的工具来获取 WebService 的客户端。此工具生成您可以在项目中使用的 Java 代码。为此，您需要[WSDL](http://en.wikipedia.org/wiki/Web_Services_Description_Language)文件。

您可以尝试下一个命令：

```
 wsimport http://localhost:8090/Service.svc?wsdl -s C:\sources -Xnocompile 
```

您可以使用生成类来调用 WebService：

```
ExampleService exampleService = new ExampleService();
Example example = exampleService.getExamplePort();
ReturnValue rv = example.doSomething(param); 
```

通过这种方式，您不需要额外的库。

[您可以在使用 Java 6 和 JAX-WS 使用 Web 服务](http://shrubbery.mynetgear.net/c/display/W/Consuming+a+Web+Service+with+Java+6+and+JAX-WS)中找到一个很好的示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T20:20:28.010

看起来应该在名称为“SOAPAction”的 HTTP 标头中设置方法名称“Save_Consumption”。

我不熟悉 Service 和 Call 方法，但使用普通的旧 HttpURLConnection API，这将是：

```
 URL httpUrl = new URL(accessUrl);
    HttpURLConnection connection = (HttpURLConnection) httpUrl.openConnection();
    connection.addRequestProperty("SOAPAction", soapAction); 
```

就像其他张贴者所说，您可以使用 wsimport 命令，但根据我的经验，这是心脏病发作的创可贴。很高兴你尝试不做！

# c# - 使用自动增加字段编辑 Access 表

> ID：14331730
> 
> 赞同：0
> 
> 时间：2013-01-15T05:36:14.153
> 
> 标签：c#, ms-access

我使用自动生成*`Dataset, dataadapter, bindingsource and datagridview`*的来编辑`ACCESS`一个`autoincrease`字段为`ID`.

当我添加一行时，它`ID field`会自动设置`-1`。当我单击`ID field`单元格时，它会自动减少`1`. 我不知道如何处理它。我无法保存添加的行，因为它显示错误`"invalid parameter"`。我无法上传图片。

# coffeescript - Coffeescript - 遍历对象的键/值 - 返回排序数组

> ID：14331738
> 
> 赞同：1
> 
> 时间：2013-01-15T05:36:59.310
> 
> 标签：coffeescript

我有一个对象，其键表示国家简码，值表示计数。我想遍历这个对象并返回一个计数最高的国家数组。我是 Coffeescript 的新手，不确定最优雅的处理方式。非常感谢任何帮助。谢谢！

以下面的数据为例，我希望数组返回`['AU', 'US', 'BR', 'CN', 'IN']`

```
vacation_spots = {
  AU: 3,
  BR: 2,
  CF: 1,
  CN: 2,
  IN: 2,
  MX: 1,
  SD: 1,
  TD: 1,
  TM: 1,
  US: 3
}

get_top_5(vacation_spots)

get_top_5 = (items) ->
    for k, v of items
    # ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:06:13.213

```
#Use some underscore helper methods
_ = require "underscore"

vacation_spots = {
  AU: 3,
  BR: 2,
  CF: 1,
  CN: 2,
  IN: 2,
  MX: 1,
  SD: 1,
  TD: 1,
  TM: 1,
  US: 3
}

#use _.keys to get a list of country codes
ranked = _.sortBy _.keys(vacation_spots), (spot) ->
  #Sort them by their negated counts
  -vacation_spots[spot]

#Slice off the top 5
console.log ranked.slice(0, 5) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T06:07:09.403

试试[这个](http://coffeescript.org/#try%3avacation_spots%20=%0A%20%20AU%3a%203%0A%20%20BR%3a%202%0A%20%20CF%3a%201%0A%20%20CN%3a%202%0A%20%20IN%3a%202%0A%20%20MX%3a%201%0A%20%20SD%3a%201%0A%20%20TD%3a%201%0A%20%20TM%3a%201%0A%20%20US%3a%203%0A%0Aget_top_5%20=%20%28items%29%20-%3E%0A%20%20%28%5Bk,%20v%5D%20for%20k,%20v%20of%20items%29.sort%20%28a,%20b%29%20-%3E%0A%20%20%20%20b%5B1%5D%20-%20a%5B1%5D%0A%20%20.slice%280,%205%29.map%20%28n%29%20-%3E%20n%5B0%5D%0A%0Aalert%20get_top_5%28vacation_spots%29%20#%20%22AU%22,%20%22US%22,%20%22BR%22,%20%22CN%22,%20%22IN%22)

```
vacation_spots =
  AU: 3
  BR: 2
  CF: 1
  CN: 2
  IN: 2
  MX: 1
  SD: 1
  TD: 1
  TM: 1
  US: 3

get_top_5 = (items) ->
  ([k, v] for k, v of items).sort (a, b) ->
    b[1] - a[1]
  .slice(0, 5).map (n) -> n[0]

get_top_5 vacation_spots # ["AU", "US", "BR", "CN", "IN"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T06:19:09.657

使用 vanilla JS 数组方法：

```
get_top_5 = (items) ->
  codes = (k for k of items)
  sortedCodes = codes.sort (a, b) -> items[b] - items[a]
  sortedCodes[...5] 
```

您可以将其全部压缩成一个表达式，`(k for k of items).sort((a, b) -> items[b] - items[a])[...5]`但我认为将每个步骤分开读起来会更好一些。

排序步骤按`items`对象上的值对国家代码进行排序；它使用该[`Array::sort`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)方法，该方法需要一个比较器函数，该函数接受两个参数并返回一个整数。如果您包含 Underscore.js，我建议您使用[`_.sortBy`](http://underscorejs.org/#sortBy)，它使用比较器函数，该函数只接受一个参数并返回一个可比较的对象：

```
sortedCodes = _.sortBy codes, (code) -> -items[code] 
```

**编辑**：另外，`(k for k of items)`您也可以使用`Object.keys(items)`（注意，IE <9 不支持它）或`_.keys(items)`，这两者都将编译为比循环更紧凑的 JS 代码。

# java - how to populate class summary field on package information page (package-info.java)?

> ID：14331747
> 
> 赞同：1
> 
> 时间：2013-01-15T05:38:06.000
> 
> 标签：java, eclipse, javadoc

I have created a javadoc using eclipse and the package information is contained in **package-info.java**. my problem is in the class summary field the name of the class is mentioned but there is no detail in front of it.I want to put some information in this field. This is the javadoc page where package details are mentioned.

![this is the screenshot](../Images/7bf1f4345ff48395353bb4abed97a482.png)

package-info.java

```
/**
*
*Details
*/

package mypackage; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:42:01.350

您想将 Javadoc 注释放在类声明之上（见下文）。有关在整个源代码中提供其中一些描述和其他元数据的快速指南，请参阅以下[Javadoc 教程。](http://students.cs.byu.edu/~cs240ta/fall2012/tutorials/javadoctutorial.html)

```
/**
 * My class description
 */
public class SSOhandler {

} 
```

# jquery - Porting WinJs related code to Mac (iPad)

> ID：14331750
> 
> 赞同：1
> 
> 时间：2013-01-15T05:38:22.287
> 
> 标签：jquery, macos, windows-8, microsoft-metro, winjs

I was invoking an HTML page with the following command in my Windows Store App:

```
<div id="random" 
     data-win-control="WinJs.UI.HtmlControl" 
     data-win-options="{uri:'/random.html'}">
</div> 
```

I then call `.hide()` and `.show()`.

I am now porting this for iPad. Could anyone suggest, what to change minimum code and use the same html file. Is jQuery needed here? How to incorporate that here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:06:40.687

我假设您使用的框架允许您为 iPad 编写 HTML/JavaScript（例如 PhoneGap 或其他东西）。在这种情况下，您当然可以在您的 iOS 项目中使用 jQuery。在这种情况下，它比使用原始 JavaScript 更容易一些。HtmlControl 的等价物只是一个 jQuery `.append()`，你可以使用`.hide()`和`.show()`一样。请记住，如果您尝试在两个项目之间维护代码，您可能希望在两个项目中使用相同的技术（使用 jQuery）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:08:27.103

如果您对选项的格式稍有不同，则可以使用 jQuery 轻松地做到这一点：

```
<div data-win-control="WinJs.UI.HtmlControl" 
     data-win-options='{"uri":"page1.html"}'></div>
<div data-win-control="WinJs.UI.HtmlControl" 
     data-win-options='{"uri":"page2.html"}'></div>
<script>
  var options;
  $("[data-win-control]").each(function () {
    options = $.parseJSON($(this).attr("data-win-options"));
    $(this).load( options.uri );
  });
</script> 
```

请理解，这只是表面上类似于 a [`WinJS.UI.HtmlControl`](http://msdn.microsoft.com/en-us/library/windows/apps/hh700625.aspx)，并没有接近完整的实现。

# android - why am i getting deprecation warning in notification..?

> ID：14331753
> 
> 赞同：3
> 
> 时间：2013-01-15T05:38:29.437
> 
> 标签：android, notifications

```
NotificationManager nm=(NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
Notification n=new Notification(android.R.drawable.stat_notify_more , "My Alarm Ringing", System.currentTimeMillis());
Context cn=MainActivity.this;
CharSequence title="My Alarm Clock";
CharSequence details="Alarm Ringing....!!!";
Intent in=new Intent(cn,Alarm.class);
PendingIntent p=PendingIntent.getActivity(cn, 0, in, 0);
n.setLatestEventInfo(cn,title,details,p);
nm.notify(0,n); 
```

In ecllipse i am getting Notification in second line and setLatestEventInfo in last second line is striked of. why is it so..? can anyone clearify what is the mistake..? thanx for the help

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:41:06.080

[Deprecation](http://en.wikipedia.org/wiki/Deprecation) is

> a status applied to features, characteristics, or practices to indicate that they should be avoided, typically because they have been superseded.

The warning alerts you to a deprecated method in your target SDK so that you can try to avoid using it.

In this specific context, the warning suggests that you use [`Notification.Builder`](http://developer.android.com/reference/android/app/Notification.Builder.html) instead, however if your needs do not allow you to use `Notification.Builder`, due to backwards compatability, or otherwise, you can (most likely) continue to use `setLatestEventInfo` without issue. It seems that this is just an upgrade to the API, not something particularly important that you need to avoid.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T04:22:40.943

对旧版本使用 NotificationCompat。

```
private NotificationCompat.Builder buildNormal() {
    NotificationCompat.Builder b = new NotificationCompat.Builder(mContext.getApplicationContext());

    b.setAutoCancel(true)
     .setDefaults(Notification.DEFAULT_ALL)
     .setWhen(System.currentTimeMillis())         
     .setSmallIcon(R.drawable.ic_launcher)
     .setTicker("Optional ticker")            
     .setContentTitle("Default notification")
     .setContentText("Lorem ipsum dolor sit amet, consectetur adipiscing elit.")
     .setDefaults(Notification.DEFAULT_LIGHTS| Notification.DEFAULT_VIBRATE| Notification.DEFAULT_SOUND)
     .setContentIntent(buildPendingIntent())
     .setContentInfo("Info");

    return b;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-13T00:39:26.350

Notification.setLatestEventInfo() 在 API 11 ( [source](http://developer.android.com/reference/android/app/Notification.html#setLatestEventInfo%28android.content.Context,%20java.lang.CharSequence,%20java.lang.CharSequence,%20android.app.PendingIntent%29) ) 中已被弃用。正如其他人所提到的，您应该改用 Notification.Builder 。（[来源](http://developer.android.com/reference/android/app/Notification.Builder.html)）

如果您使用的是 API 11 之前的 API，您可以使用 Android 提供的兼容性包。使用此库将允许您将 API 11 及更高版本用于运行 API 11 及更低版本的设备。[Android 支持库](http://developer.android.com/tools/extras/support-library.html)

此外，正如您所知，您需要使用 NotificationCompat.Builder()，而不是使用 Notification.Builder()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T05:41:36.563

因为在您提到的目标 SDK 中，此方法已被弃用......简单。

最好阅读文档而不是[文档](http://developer.android.com/reference/android/app/Notification.html#setLatestEventInfo%28android.content.Context,%20java.lang.CharSequence,%20java.lang.CharSequence,%20android.app.PendingIntent%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-09T16:43:50.657

根据[https://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-notifications](https://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-notifications)，“此版本删除了 Notification.setLatestEventInfo() 方法。使用 Notification.Builder 类代替构建通知。” 使用适用于 Android 6.0 的 API 级别 23，当我尝试使用 setLatestEventInfo() 时，我的代码甚至无法编译。我收到以下错误：

```
Error:(86, 15) error: cannot find symbol method setLatestEventInfo(Context,String,String,PendingIntent) 
```

您说您使用的是 API 级别 17。如果您尝试使用 API 级别 23 编译代码，我只能确认您不能使用 setLatestEventInfo()。

# git - Creating a default manifest for git-repo

> ID：14331754
> 
> 赞同：2
> 
> 时间：2013-01-15T05:38:44.067
> 
> 标签：git, repository, git-repo

I'm trying to use git repo for my own project. I understand I have to create a default.xml file and using to link to all the repositories available but It's not clear how to do that. I tried creating a simple xml file and put in on a server. I also added 2 remote configurations and projects.

From what I read the default.xml file must also be in a repository but this step is not clear.

When I try to use the command repo init -u http:// my_custom_url /manifest/ I get a curl download error.

Any advice or steps I have to take in order to create the default manifest ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-30T03:18:25.920

首先，您应该创建一个清单 git 存储库。清单存储库包含 default.xml，它解释了您的项目。

然后，在客户端中使用`repo init -u "your manifest repository path"`和`repo sync`。

请参考下面的帖子。

[http://www.instructables.com/id/Using-Googles-repo-command-in-your-own-projects](http://www.instructables.com/id/Using-Googles-repo-command-in-your-own-projects)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:29:23.803

是的，`default.xml`必须在它自己的 git 存储库中。

了解其`repo`工作原理的最简单方法是查看 Android 项目（首先创建它的人）是如何做到的。

[您应该按照此处](http://source.android.com/source/downloading.html)所述初始化 Android 清单示例：

```
repo init -u https://android.googlesource.com/platform/manifest 
```

然后，您可以使用 下载 Android 源代码树`repo sync`，但这可能需要一段时间和 10GB 以上的磁盘空间，并且对于您的调查并不是绝对必要的，但如果您这样做，您会更好地理解它。

然后，查看目录`.repo`- 在里面你会发现清单 git 存储库已签出。

我建议将此作为工作示例，然后删除您不想要或不需要的所有内容并根据您的需要进行调整。

# iphone - I want create UITabbarController,UINavigationController using delegates

> ID：14331758
> 
> 赞同：0
> 
> 时间：2013-01-15T05:39:02.377
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller

I want to create `UITabbarController`,`UINavigationController` by using `UITabbarControllerDelegate`, `UINavigationControllerDelegates`.

Will you please send me any link, or show me how to do it , because i am new to this. Thanks in Advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:34:33.787

如果你想要一些逐步的解释，那么你可以通过：

[将 UINavigationController 放在 UITabbarController 中](http://maybelost.com/2010/12/putting-a-uinavigationcontroller-within-a-uitabbarcontroller/)

如果您想要一些带有屏幕截图的详细说明，那么您可以使用：

[使用 UITabBarController 和 UINavigationController 的 iPhone 应用程序教程](http://21gingerman.wordpress.com/2009/04/06/tutorial-and-sample-code-for-iphone-app-with-tab-bar-and-nav-bar/)

要从根本上了解更多信息，最好的来源是[Apple 的文档](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/CombiningViewControllers.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:42:01.287

这对你很有帮助，在这里你可以学习如何将 UINavigationController 集成到 UITabBarController 中，这是非常标准的方式。

[https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/CombiningViewControllers.html](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/CombiningViewControllers.html)

# sql - Mysql selecting the greatest difference between rows

> ID：14331759
> 
> 赞同：1
> 
> 时间：2013-01-15T05:39:11.647
> 
> 标签：sql, mysql

I have a fairly large table that is updated regularly with new data that sort of looks like this:

```
id  |  name  |  c1  |  c2  |  c3  |  c4  |  time
-------------------------------------------------
 1  |  miley |  23  |  11  |  21  |  18  |  2013-01-13 20:26:25
 2  |  john  |  31  |  29  |  23  |  27  |  2013-01-13 20:26:25
 3  |  steve |  44  |  31  |  33  |  35  |  2013-01-13 20:26:25
 4  |  miley |  34  |  44  |  47  |  48  |  2013-01-14 08:26:25
 5  |  john  |  27  |  53  |  49  |  52  |  2013-01-14 08:26:25
 6  |  steve |  27  |  62  |  50  |  64  |  2013-01-14 08:26:25
 7  |  miley |  44  |  54  |  57  |  87  |  2013-01-14 20:26:25
 8  |  john  |  37  |  93  |  59  |  62  |  2013-01-14 20:26:25
 9  |  steve |  85  |  71  |  87  |  74  |  2013-01-14 20:26:25
...etc 
```

I need a query to find who had the biggest difference for each column for each day. (for example on the 14th - steve has the biggest increase in c1 and c3, john has c2, and miley has c4). Each person's numbers are always increasing, so it can be assumed that the first entry on any day for any person will always be less than their last entry that day.

I've tried working out a few queries with little success and not much to go on, if someone could at least point me in the right direction?

Desired output would ideally be an array of each row containing the name and difference that had the biggest increase. I'm not sure all this could be done in one query, but really all I need is the name of the person who had the biggest increase for each column and what their difference was.

.

**breakdown**

I need to grab the first and last entry for for every person on the 14th (id: 4 thru 9); compare the difference between their c1 values, return the name of the person who has the greatest difference. Repeat for c2, c3, & c4.

* * *

What I have so far thanks to orangecrush, only attempting to get 1 column: (error: invalid use of group function)

```
 "SELECT nm, diff_c1 FROM (
         SELECT NAME nm, MAX(c1) - MIN(c1) DIFF_C1 FROM TABLE AS a
             WHERE `time` > DATE_SUB(now(), INTERVAL 1 DAY)
             GROUP BY NAME) AS c 
         WHERE diff_c1 = (
         (SELECT max(MAX(c1) - MIN(c1)) FROM TABLE AS b 
         WHERE `time` > DATE_SUB(now(), INTERVAL 1 DAY) GROUP BY NAME)
         )" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:56:34.107

你可以试试这个：

```
SELECT nm, 'c1', diff_c1
  FROM (SELECT NAME nm, MAX(C1) - MIN(C1) DIFF_C1
          FROM TEST
         WHERE trunc(TIME) = '14-JAN-2013'
         GROUP BY NAME)
 WHERE diff_c1 = ((SELECT max(MAX(C1) - MIN(C1))
                     FROM TEST
                    WHERE trunc(TIME) = '14-JaN-2013'
                    GROUP BY NAME))
union
SELECT nm, 'c2', diff_c2
  FROM (SELECT NAME nm, MAX(C2) - MIN(C2) DIFF_C2
          FROM TEST
         WHERE trunc(TIME) = '14-JaN-2013'
         GROUP BY NAME)
 WHERE diff_c2 = ((SELECT max(MAX(C2) - MIN(C2))
                     FROM TEST
                    WHERE trunc(TIME) = '14-JaN-2013'
                    GROUP BY NAME))
union
SELECT nm, 'c3', diff_c3
  FROM (SELECT NAME nm, MAX(C3) - MIN(C3) DIFF_C3
          FROM TEST
         WHERE trunc(TIME) = '14-JaN-2013'
         GROUP BY NAME)
 WHERE diff_c3 = ((SELECT max(MAX(C3) - MIN(C3))
                     FROM TEST
                    WHERE trunc(TIME) = '14-JaN-2013'
                    GROUP BY NAME))
union
SELECT nm, 'c4', diff_c4
  FROM (SELECT NAME nm, MAX(C4) - MIN(C4) DIFF_C4
          FROM TEST
         WHERE trunc(TIME) = '14-JaN-2013'
         GROUP BY NAME)
 WHERE diff_c4 = ((SELECT max(MAX(C4) - MIN(C4))
                     FROM TEST
                    WHERE trunc(TIME) = '14-JaN-2013'
                    GROUP BY NAME)) 
```

已硬编码日期。如果发现此查询有效，则可以稍后动态调用它。我用于测试的表名：TEST。

# c# - How to check whether a page in PDF is A4 or not

> ID：14331760
> 
> 赞同：2
> 
> 时间：2013-01-15T05:39:19.743
> 
> 标签：c#, .net, itextsharp

I am creating a small application in which I open a existing PDF and then check whether the individual pages are in A4 or not. If pages are not in A4 then convert them to A4\.

I am facing two problems now:

1.  How to check whether the page in PDF is in A4 or not?
2.  During the conversion of a non-A4 page to A4, the text outside the A4 page frame is omitted. Therefore it cause some loss of content.

How can I get around these two issues?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:16:50.973

`PdfReader`用类加载文件。

```
 PdfReader reader = new PdfReader("path to your file");
 Rectangle rect = reader.GetPageSizeWithRotation(i); // i page number, index starts at 1
 for (int i = 1; i <= reader.NumberOfPages; i++)
 {
      Rectangle rect = reader.GetPageSizeWithRotation(i);
      var a = rect.Width;
      var b = rect.Height;
 } 
```

对于 A4 Portrait 格式变量应该是`a == 595`, `b == 842`. 谈到页面尺寸时，公差很小。[更多信息。](http://en.wikipedia.org/wiki/Paper_size)

我有这样的方法：

```
public static bool CheckFirstPageSizeA4Portret(Document doc)
    {

        var a = doc.PageSize.Width;
        var b = doc.PageSize.Height;
        pageFormat format = PageFormat.GetPageFormat(a, b);
        if (format == pageFormat.A4_Portret)
            return true;
        else
            return false;
    } 
```

`pageFormat`是静态`PageFormat`类返回的枚举。 `PageFormat`课程很长，但是很简单，在这里发帖会很傻，差不多有 500 行。什么类，它检查给定的尺寸是否与任何官方的 A、B 或 C 页面格式相对应，并返回格式的名称。

第二个问题看[这里。](https://stackoverflow.com/questions/7179096/itext-successfully-resize-one-page-pdf-but-fail-when-there-are-multiple-pages)那里是java代码，但我认为你应该明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:33:55.653

@masius 已经在他的回答中指出如何使用该`GetPageSizeWithRotation`方法检索页面的尺寸。

不过，还请注意，该方法返回的尺寸实际上可能由页面字典的**/UserUnit条目进行缩放。**返回的尺寸`GetPageSizeWithRotation`以**/UserUnit**值乘以 1 / 72 英寸的形式给出，该值默认为 1.0。

@masius 提到的问题“iText：成功调整一页 pdf 的大小，但在 pdf 文档中有多个页面时失败”的答案中提出的解决方案有些欠佳，因为它放弃了所有交互功能（Acroform 字段和其他注释） .

我建议将页面媒体框扩展为 A4 格式的纵横比，然后使用**/UserUnit**页面字典条目缩放页面。

# sql - SQL 服务器树有限深度查询

> ID：14331762
> 
> 赞同：2
> 
> 时间：2013-01-15T05:39:25.327
> 
> 标签：sql, sql-server, tree, b-tree

我有一棵树，我正试图将其存储在数据库中。现在每一行看起来像

```
ID, Child1, Child2, Child3, NodeValue 
```

我有 Child1、Child2 和 Child3 作为引用 ID 的外键。

我想做的是：给定一个节点，获取该节点及其所有后代（我猜是“子树”）。但是，我想将节点的深度限制在 4 到 7 左右。

有没有人有一些指示？

编辑：

这是一个例子：

```
ID   C1   C2   C3
1    10   52   32
2    NULL NULL NULL
3    4    5    6
4    2    NULL NULL
5    NULL NULL NULL
6    NULL NULL NULL
10   3    NULL NULL
52   NULL NULL NULL
32   NULL NULL NULL 
```

如果我想在第 1 行查询深度 2，它将返回 ID 为 1、10、52、32 和 3 的行，而不是 2、4、5 或 6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:36:36.133

在 SQLServer2005+ 上使用递归 CTE

```
;WITH cte AS
 (
 SELECT ID, C1, C2, C3, 0 AS [Level]
 FROM dbo.test7
 WHERE ID = 1 -- @your root node
 UNION ALL
 SELECT t.ID, t.C1, t.C2, t.C3, c.[Level] + 1
 FROM dbo.test7 t JOIN cte c ON t.ID IN (c.C1, c.C2, c.C3)
 WHERE c.[Level] + 1 <= 2 --@your_depth
 )
 SELECT ID, C1, C2, C3
 FROM cte 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d92bb/16/0)上的演示[](http://sqlfiddle.com/#!3/d92bb/16/0)

# asp.net-mvc - ASP.net MVC 4 从数据库加载菜单到部分视图

> ID：14331766
> 
> 赞同：5
> 
> 时间：2013-01-15T05:40:01.043
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-partialview

我是一个mvc新手。

我想要做的是从数据库加载菜单并在部分视图中显示它。这个局部视图将从 _layout 视图中调用。

**家庭控制器**

在 Home 控制器中，我添加了一个名为“_MainMenu”的操作

```
public class HomeController : Controller
{
        mrpDatabase _db = new mrpDatabase();

        public ActionResult _MainMenu()
        {
          return PartialView("_MainMenu", _db.menu.ToList());
        }
        ....
} 
```

**部分视图**

这是我的 _MainMenu PartialView

```
@model IEnumerable<appMRP.Models.menu>
<ul id="menu">
    @foreach (var item in Model)
    {
        <li>@item.menu1</li>
    }                                            
</ul> 
```

**布局页面**

这个部分菜单像这样显示在我的 _Layout.cshtml 中

```
<nav>                     
  @Html.Partial("_MainMenu")
</nav> 
```

当我运行这个。我收到错误“**用户代码未处理 NullReferenceException。对象引用未设置为对象的实例**”

似乎我的 _MainMenu 中的“模型”为空

我做错什么了 ？

谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T05:46:31.270

如果您的局部视图使用模型，则需要像这样传递它：

```
@Html.Partial("_MainMenu", Model.ListOfMenus) 
```

或类似的东西。目前，您没有为`_MainMenu`视图指定模型，因此`null`使用了。当您尝试 a`@foreach`时，它会引发您看到的异常。

请注意，这`@Html.Partial("_MainMenu")`不是调用您的`_MainMenu`控制器操作，而是呈现该名称的视图。

如果你想调用一个动作，你可以使用这样的子动作：

```
@Html.Action("_MainMenu", "HomeController") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T05:45:57.603

你已经得到了答案。检查 _db.menu.ToList() 没有返回 null。我建议你使用`Model-View-ViewModel`模式。为视图创建模型。并将其返回给 View，以便您可以控制模型以及向视图显示的内容。

1.  您没有将模型信息传递给 HTML Partial 方法，因为结果是您尝试遍历集合。所以它会抛出一个空引用异常。

像这样的东西

```
 public class MenuViewModel
{
        public int menuID { get; set; }
        public string  menuname { get; set; }
        public string otherProperty { get; set; }
        public string someotherProperty { get; set; }
} 
```

在你看来

```
@model IEnumerable<MenuViewModel>

<nav>                     
  @Html.Partial("_MainMenu",Model)
</nav> 
```

# java - Spring integration with Vaadin doesn't work

> ID：14331768
> 
> 赞同：0
> 
> 时间：2013-01-15T05:40:06.633
> 
> 标签：java, spring, maven, dependency-injection, vaadin

I'm trying to integrate Spring Dependency Injection with my Vaadin `application/servlet`. However the dependency injection doesn't work. I think Spring reads the components fine:

```
2013-01-15 06:57:11,361 [localhost-startStop-1] INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [com/nortal/pirs/spring/application-context.xml]
2013-01-15 06:57:12,012 [localhost-startStop-1] INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@fa5214b: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.config.internalBeanConfigurerAspect,mainController,UserManager,VisitManager,mainWindow,org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor#0,org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy 
```

Since I can see my required objects like `UserManager`, `mainWindow`...

However when it comes to actual injection, it doesn't seem to work. I get nullpointerexceptions with it.

Right now I'm trying to test it with `MainWindow`, here's the application that should get `MainWindow` injected:

```
 @Configurable
public class PirsVaadinController extends Application implements
        NavigatorInterface {

    private String title = "WELCOME";
    private transient Logger log;
    private Map userData;
    private boolean useFakeData = false;

    @Autowired
    private MainWindow mainWindow;

public UserManagerInterface getUserManager() {
        return userManager;
    }

    @Autowired
    public void setUserManager(UserManagerInterface userManager) {
        this.userManager = userManager;
    } 
```

Yes I know I put `@Autowired` on both: the setter and the variable itself, however it doesn't work either way.

**MainWindow:**

```
 @org.springframework.stereotype.Component
@org.springframework.context.annotation.Scope("session")
public class MainWindow extends Window { 
```

**My web.xml:**

```
<!-- Vaadin -->

<context-param>
    <description>Vaadin production mode</description>
    <param-name>productionMode</param-name>
    <param-value>true</param-value>
</context-param>

<servlet>
    <servlet-name>PirsVaadinFrontend</servlet-name>
    <servlet-class>
        com.vaadin.terminal.gwt.server.ApplicationServlet
    </servlet-class>
    <init-param>
        <description>Vaadin application class to start</description>
        <param-name>application</param-name>
        <param-value>
            com.nortal.pirs.presentation.vaadin.PirsVaadinController
        </param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>PirsVaadinFrontend</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<!-- Spring -->

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:com\nortal\pirs\spring\application-context.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<!-- EmailCheck REST web service -->

<servlet>
    <servlet-name>emailCheckService</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>

    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.nortal.pirs.webservices</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>emailCheckService</servlet-name>
    <url-pattern>/webservices/*</url-pattern>

</servlet-mapping>

<!-- General parameters -->

<session-config>
    <session-timeout>60</session-timeout>
</session-config> 
```

My Spring application-context:

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context
         http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:annotation-config />

    <!-- Turn on AspectJ @Configurable support -->
    <context:spring-configured />

    <context:component-scan base-package="com.nortal.pirs.test.independent" />
    <context:component-scan base-package="com.nortal.pirs.businesslogic.logic" />
    <context:component-scan base-package="com.nortal.pirs.presentation.vaadin" />

    <!-- Turn on @Autowired, @PostConstruct etc support -->
    <bean
        class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor" />
    <bean
        class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor" />
</beans> 
```

**My Maven pom.xml:**

```
<repositories>
    <repository>
        <id>com.springsource.repository.bundles.release</id>
        <name>EBR Spring Release Repository</name>
        <url>http:// repository.springsource.com/maven/bundles/release</url>
    </repository>
    <repository>
        <id>com.springsource.repository.bundles.external</id>
        <name>EBR External Release Repository</name>
        <url>http:// repository.springsource.com/maven/bundles/external</url>
    </repository>
</repositories>

<build>
    <sourceDirectory>src/</sourceDirectory>
    <directory>${basedir}/build</directory>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>

        <!-- Additional -->

        <plugin>
            <groupId>org.eclipse.m2e</groupId>
            <artifactId>lifecycle-mapping</artifactId>
            <version>1.0.0</version>
            <configuration>
                <lifecycleMappingMetadata>
                    <pluginExecutions>
                        <pluginExecution>
                            <pluginExecutionFilter>
                                <groupId>org.codehaus.mojo</groupId>
                                <artifactId>aspectj-maven-plugin</artifactId>
                                <versionRange>1.2</versionRange>
                                <goals>
                                    <goal>test-compile</goal>
                                    <goal>compile</goal>
                                </goals>
                            </pluginExecutionFilter>
                            <action>
                                <execute />
                            </action>
                        </pluginExecution>
                    </pluginExecutions>
                </lifecycleMappingMetadata>
            </configuration>
        </plugin>

        <!-- Vaadin - Spring -->

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.2</version>
            <configuration>
                <!-- Required as the plugin does not resolve this by default -->
                <source>${maven.compiler.source}</source>
                <target>${maven.compiler.target}</target>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

    </plugins>
</build> 
```

I didn't supply the dependencies, because I'd probably hit the character limit, however the dependencies don't seem to be lacking imho. in pom.xml I do get this error:

```
Multiple annotations found at this line:
- Plugin execution not covered by lifecycle configuration: org.codehaus.mojo:aspectj-maven-plugin:1.2:test-compile (execution: default, phase: 
 process-test-sources)
- Plugin execution not covered by lifecycle configuration: org.codehaus.mojo:aspectj-maven-plugin:1.2:compile (execution: default, phase: process-
 sources) 
```

But from command line everything seems to be compiling well:

```
 mvn compile
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building PIRS AMS 1.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- aspectj-maven-plugin:1.2:compile (default) @ PIRS_AMS_WEB ---
[INFO]
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ PIRS_AMS_W
EB ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources,
i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory D:\Dropbox\EclipseWorkspace\PIRS_FIX\src\main\resources
[INFO]
[INFO] --- maven-compiler-plugin:2.1:compile (default-compile) @ PIRS_AMS_WEB --
-
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. b
uild is platform dependent!
[INFO] Compiling 1 source file to D:\Dropbox\EclipseWorkspace\PIRS_FIX\build\classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.617s
[INFO] Finished at: Tue Jan 15 07:35:39 EET 2013
[INFO] Final Memory: 16M/309M
[INFO] ------------------------------------------------------------------------ 
```

As I said, everything works up to the point, where it actually needs to be injected, no error messages before `nullpointerexception`.

Anyone knows what's wrong?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:30:59.343

您可能应该使用附加组件在 Vaadin [链接中使用 Spring](https://vaadin.com/directory#browse%3asearch=spring)

# javascript - 在客户端/服务器端运行的 javascript

> ID：14331779
> 
> 赞同：0
> 
> 时间：2013-01-15T05:41:29.780
> 
> 标签：javascript, webserver

我是 javascript 的初学者并且有一个虚拟问题。我有一个包含一些 javascript 的 php 程序。该网页将在服务器端使用 php 准备，包含的 javascript 将在客户端运行以使用 css 格式化一些模式文本。我的问题是我想在服务器端保存 html 源代码（在客户端 javascript 生效后），但是由于只有在客户端浏览器中加载源代码时才会更改源代码，所以我保存的源代码始终是原始源代码。这是要求服务器首先运行客户端javascript以保存结果源的任何方式吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:51:58.240

不，但是您可以使用 AJAX 将您想要保存的客户端生成的信息发送回服务器。使用[JQuery](http://api.jquery.com/jQuery.post/)这很简单：

```
$.post("PHPScriptThatWillSaveData.php", { newData: "DataHere" }); 
```

对于纯 JS，您可以从[`XMLHttpRequest`](http://www.w3.org/TR/XMLHttpRequest/).

# javascript - JSNI 中未出现 JavaScript 函数更改

> ID：14331791
> 
> 赞同：2
> 
> 时间：2013-01-15T05:42:38.033
> 
> 标签：javascript, gwt, jsni

我正在更改 JSNI 中的 JavaScript 函数，但 eventlistener 没有正确调用。这是代码：

```
private native void alert1()/*-{
    $doc.addEventListener('DOMContentLoaded', function webViewerLoad(evt) {
        $wnd.alert("1111111");
    }, true);
}-*/; 
```

Javascript函数是：

```
document.addEventListener('DOMContentLoaded', function webViewerLoad(evt) {
    window.alert("2222222222");
}, true); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:32:21.740

`onModuleLoad`（几乎）保证在**之后** `DOMContentLoaded`运行，所以：

*   即使在你的代码中你也不需要听那个
*   如果你这样做，那就太晚了，你的事件处理程序将永远不会被调用

# lighttpd - 让 lighttpd 监听多个端口

> ID：14331794
> 
> 赞同：8
> 
> 时间：2013-01-15T05:42:56.253
> 
> 标签：lighttpd

我有一个在 AWS EC2 实例上运行的 lighttpd 服务器。它可以毫无问题地在端口 80（或任何其他端口，如果我更改 /etc/lighttpd/lighttpd.conf 中的 server.port）上服务。但是，当我在不同的端口（例如 8080）上提供替代文档根目录时，浏览器永远无法连接到服务器。

我的 lighttpd.conf 文件的相关部分：

```
server.port = 80

##
## Use IPv6?
##
server.use-ipv6 = "disable"

##
## bind to a specific IP
##
#server.bind = "localhost"

##
## Run as a different username/groupname.
## This requires root permissions during startup. 
##
server.username  = "lighttpd"
server.groupname = "lighttpd"

## 
## enable core files.
##
#server.core-files = "disable"

##
## Document root
##
server.document-root = server_root + "/release"
$SERVER["socket"] == ":8080" {
        server.document-root = server_root + "/dev"
} 
```

完整文件[在这里](http://pastebin.com/BDn0RaLN)

植根于的站点`server_root + "/dev"`工作正常 - 我已经通过反转他们的端口分配进行了测试，在这种情况下 /dev 在 :80 上加载正常并且 /release 没有找到。

我已经阅读了许多指南（例如[这里](http://kevinworthington.com/lighttpd-mini-howto-using-different-ports-with-same-urlip-address/)、[官方文档](http://redmine.lighttpd.net/projects/1/wiki/Docs_Configuration)、[这里](http://forum.lighttpd.net/topic/85)等），但无济于事。其中第一个提到可能存在防火墙冲突，但我不知道如何在 EC2 上解决该问题，而且我可以`server.port=8080`毫无问题地设置这一事实让我认为这不是问题所在。

这两个文件夹都归我的`lighttpd`用户所有，该用户在这两个文件夹中都拥有完全权限。

向`<my address>:8080`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:43:46.967

哎呀，我现在可以回答我自己的问题了。

这确实是一个防火墙问题，但修复起来非常简单 - 转到 console.aws.amazon.com（如有必要，请登录），选择相关的安全组，然后添加一个防火墙规则，允许该端口上的传入流量- 如果您希望限制访问，则可以来自特定来源，或者来自 0.0.0.0/0 以进行普遍访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T07:24:35.907

只需配置防火墙，它将创建允许端口 80 上的所有连接的防火墙规则。

> sufo ufw允许80

添加规则后，请尝试在浏览器中点击 url。

# codeigniter - 当我使用 codignator 电子邮件类发送电子邮件时显示 html 源的电子邮件

> ID：14331795
> 
> 赞同：3
> 
> 时间：2013-01-15T05:43:42.697
> 
> 标签：codeigniter, email

我在使用codeignitor电子邮件类在codeignitor中发送带有附件的html邮件时遇到问题，邮件显示html代码而不是html视图。

我在下面的配置中将邮件类型设置为 html 是我的代码

```
$message="<p>test</p>";
$mail_to = "email@gmail.com";
$from_mail = $useremail;
$from_name = $userfname;
$reply_to = $useremail;
$subject = "Abstract Details";

$file_name = $datamail['varafile'];
$path = realpath('uploads/abstract');

// Read the file content
$file = $path.'/'.$file_name;

$config = array (
              'protocol' =>'sendmail',
                          'mailtype' => 'html',
                          'charset'  => 'utf-8',
                          'priority' => '1'
                               );
       $this->load->library('email',$config);

      $this->email->set_newline("\r\n");

       $this->email->from($from_mail,$from_name);
        $this->email->to($mail_to);    
        $this->email->subject($subject);      
        $this->email->message($message);
        $this->email->attach($file);
        if($this->email->send()){
        echo "Mail send successfully";

        }else{
         echo "Error in sending mail";

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-03T09:57:27.210

> 像这样配置它

```
$config = Array(
    'protocol' => 'sendmail',
    'mailtype' => 'html',
    'smtp_host' => '', //your SMTP host
    'smtp_port' => 26,
    'smtp_user' => '', //your SMTP email address
    'smtp_pass' => '', //your SMTP email password
    'charset' => 'iso-8859-1',
    'wordwrap' => TRUE
);
$this->load->library('email', $config);
$this->email->set_newline("\r\n");
$this->email->set_header('MIME-Version', '1.0; charset=utf-8'); //must add this line
$this->email->set_header('Content-type', 'text/html'); //must add this line

$this->email->from('', ''); //from/sender email [with name (optional)]
$this->email->to(); //to/receiver email

$this->email->subject(''); //email subject
$message = $this->load->view('...directory.../...filename...',$data,TRUE); //html template/body with dynamic data
$this->email->message($message);
$this->email->send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:28:44.153

[Apologies to all, I don't have enough rep to comment for clarification]

I just tried your exact code (minus the attachment bits) and all worked fine sending HTML email to a Gmail account, I'll provide my full working class below:

```
class rohithipix extends CI_Controller {

    public function html_email() {

        $message = "<h1>start</h1><p>test</p>";
        $mail_to = "test@gmail.com";
        $from_mail = 'test2@gmail.com';
        $from_name = 'dave';
        $reply_to = 'test2@gmail.com';
        $subject = "Abstract Details";

        //$file_name = $datamail['varafile'];
        //$path = realpath('uploads/abstract');

        // Read the file content
        //$file = $path . '/' . $file_name;

        $config = array(
            'protocol' => 'sendmail',
            'mailtype' => 'html',
            'charset' => 'utf-8',
            'priority' => '1'
        );
        $this->load->library('email', $config);

        $this->email->set_newline("\r\n");

        $this->email->from($from_mail, $from_name);
        $this->email->to($mail_to);
        $this->email->subject($subject);
        $this->email->message($message);
        //$this->email->attach($file);
        if ($this->email->send()) {
            echo "Mail send successfully";
        } else {
            echo "Error in sending mail";
        }
    }

} 
```

What email client are you attempting to send these to while testing?

# sql - 在 SQL Server 2008 中转义特殊字符

> ID：14331796
> 
> 赞同：0
> 
> 时间：2013-01-15T05:43:44.423
> 
> 标签：sql, sql-server, sql-server-2008

我需要您的帮助：我正在使用 SQL Server 2008 并且有一个用于从表列中检索值的存储过程。

表的列包含可以包含所有特殊字符在内的任何内容的描述。

有什么办法可以转义所有特殊字符吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:57:23.800

尝试这个

> WHERE 描述 LIKE '%\ any text%'

这里 \ 表示 ESCAPE

# ruby-on-rails - rails 2.x Psych::SyntaxError in SessionsController#new

> ID：14331798
> 
> 赞同：3
> 
> 时间：2013-01-15T05:44:00.870
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我必须修复一个旧 Rails 2.3.8 项目的错误，并且在加载开发环境时遇到了麻烦。

我已将项目转换为使用捆绑程序，这是我的 Gemfile：

```
source :gemcutter

gem "rails", "2.3.8"

gem "pg"

gem 'rdoc'

gem "haml"
gem "will_paginate", '~> 2.3.11'

# RESTful ACL support.
gem "restful_acl", "3.0.4"

# awesome nested set for sub categories
gem "awesome_nested_set", "< 2.0"

# rspec tests
gem 'machinist', "< 2.0"
gem "rspec", "1.3.0"
gem "rspec-rails", "1.3.2"
gem "test-unit"

# Deployment
gem "capistrano" 
```

当我使用“脚本/服务器”启动服务器并加载网站时，出现以下错误

```
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:151:in `parse'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:127:in `load'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/vendor/i18n-0.3.7/i18n/backend/base.rb:244:in `load_yml'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/vendor/i18n-0.3.7/i18n/backend/base.rb:231:in `load_file'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/vendor/i18n-0.3.7/i18n/backend/base.rb:18:in `block in load_translations'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/vendor/i18n-0.3.7/i18n/backend/base.rb:18:in `each'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/vendor/i18n-0.3.7/i18n/backend/base.rb:18:in `load_translations'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/vendor/i18n-0.3.7/i18n/backend/base.rb:98:in `init_translations'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/vendor/i18n-0.3.7/i18n/backend/base.rb:84:in `available_locales'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/vendor/i18n-0.3.7/i18n.rb:54:in `available_locales'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/vendor/i18n-0.3.7/i18n.rb:118:in `available_locales'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/template.rb:226:in `valid_locale?'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/template.rb:243:in `parse_extensions'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/template.rb:233:in `split'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/template.rb:118:in `initialize'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/reloadable_template.rb:81:in `initialize'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/reloadable_template.rb:38:in `new'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/reloadable_template.rb:38:in `register_template_from_file'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/reloadable_template.rb:62:in `block in load_all_templates_from_dir'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/reloadable_template.rb:62:in `each'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/reloadable_template.rb:62:in `load_all_templates_from_dir'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/reloadable_template.rb:29:in `[]'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/paths.rb:48:in `block in find_template'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/paths.rb:47:in `each'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_view/paths.rb:47:in `find_template'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/base.rb:1389:in `default_template'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/base.rb:896:in `render'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `block in render_with_benchmark'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `block in ms'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `render_with_benchmark'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/base.rb:1326:in `default_render'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/base.rb:1332:in `perform_action'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/filters.rb:617:in `call_filters'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/filters.rb:610:in `perform_action_with_filters'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `block in perform_action_with_benchmark'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `block in ms'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `perform_action_with_benchmark'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/rescue.rb:160:in `perform_action_with_rescue'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/flash.rb:151:in `perform_action_with_flash'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/base.rb:532:in `process'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/filters.rb:606:in `process_with_filters'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/base.rb:391:in `process'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/base.rb:386:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/routing/route_set.rb:438:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:121:in `_call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:130:in `block in build_middleware_stack'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `block in call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:9:in `cache'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:28:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/string_coercion.rb:25:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.1.5/lib/rack/head.rb:9:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.1.5/lib/rack/methodoverride.rb:24:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/params_parser.rb:15:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/failsafe.rb:26:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.1.5/lib/rack/lock.rb:11:in `block in call'
<internal:prelude>:10:in `synchronize'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.1.5/lib/rack/lock.rb:11:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:114:in `block in call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/reloader.rb:34:in `run'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:108:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rails-2.3.8/lib/rails/rack/static.rb:31:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.1.5/lib/rack/urlmap.rb:47:in `block in call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.1.5/lib/rack/urlmap.rb:41:in `each'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.1.5/lib/rack/urlmap.rb:41:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rails-2.3.8/lib/rails/rack/log_tailer.rb:17:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.1.5/lib/rack/content_length.rb:13:in `call'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.1.5/lib/rack/handler/webrick.rb:48:in `service'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/home/map7/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我试过重新标记会话控制器，但它不会改变错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:32:52.810

我猜您使用的是 ruby​​ 1.8.7，现在您正在尝试使用具有不同 YAML 解析器的 1.9.3：http: [//blog.tddium.com/2011/12/01/psych-isnt-syck/](http://blog.tddium.com/2011/12/01/psych-isnt-syck/)

另请注意，rails 2.3 不支持 ruby​​ 1.9.3。使用 ruby​​ 1.8.7 是最简单的。

切换到 ruby​​ 1.9.2 应该不难，你可能需要 utf8 补丁：[http ://blog.kennejima.com/post/835166063/making-ruby-1-9-rails-2-3-to-play- nice-with-utf-8](http://blog.kennejima.com/post/835166063/making-ruby-1-9-rails-2-3-to-play-nice-with-utf-8)

将 rails 2.3 与 ruby​​ 1.9.3 一起使用并不容易，请参阅：http: [//developer.uservoice.com/blog/2012/03/04/how-to-upgrade-a-rails-2-3-app-to -ruby-1-9-3/](http://developer.uservoice.com/blog/2012/03/04/how-to-upgrade-a-rails-2-3-app-to-ruby-1-9-3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:26:37.843

解决此问题的方法是不要从 ruby​​gems.org 获取宝石。您可以通过为 gem 指定一个 GitHub 存储库来做到这一点，而不是让 bundler 从 ruby​​gems.org 下载它。

如果我没记错的话，问题出在您下载 ruby​​gem 的主机所提供的字符集上。

# knockout.js - Kendo-Knockout：使用带有 kendo 数据源的淘汰视图模型来填充 kendoTreeView

> ID：14331804
> 
> 赞同：2
> 
> 时间：2013-01-15T05:45:43.480
> 
> 标签：knockout.js, kendo-ui

我正在使用 RP Niemeyer 的 kendo-knockout 库。我在可观察到的淘汰赛中使用 dataSource 运行 kendoTreeView。

html:

```
<div id="main">
    <div id="reportGrid" data-bind="kendoTreeView: { dataSource: treeViewDataSource }">      </div>
  <button data-bind="click: addItem">Add</button>
</div>> 
```

javascript:

```
var billingReportViewModel = ko.observable({
    treeViewDataSource: ko.observableArray([{text: "Tea" },{ text: "Coffee" }]),
    addItem : function () {
    this.treeViewDataSource.push({text: "Water"});
    alert(this.treeViewDataSource().length);
    }

});

ko.applyBindings(billingReportViewModel); 
```

当我单击添加按钮时，我正在向可观察数组添加一个新元素。该项目已添加，但视图未相应更新。

我正在按照这里的步骤操作：

[Kendo-Knockout：使用带有 kendo 数据源的淘汰视图模型](https://stackoverflow.com/questions/13935484/kendo-knockout-use-knockout-view-model-with-kendo-datasource)

难道我做错了什么？还是当前不支持此功能？如果是这样，我有什么选择？每次添加/删除/更新节点时，我都可以从 DOM 中删除树视图，然后使用新的数据源重新创建它。但我希望绑定能够工作或更灵活的解决方案。谢谢！

jsFiddle：

[http://jsfiddle.net/6SEzp/42/](http://jsfiddle.net/6SEzp/42/)

更新：

我还能够使用对小部件的引用来加载 treeView，如下所示：

html:

```
<div data-bind="kendoTreeView: { widget: myWidget}">

</div>

<button data-bind="click: initialize">Initialize</button> 
```

javascript:

```
var ViewModel = function () {

    this.initialize = function () {

        var inline = new kendo.data.DataSource({
            data: [
            { id: 1, text: "Tea", sprite: "icon-tea" },
            { id: 2, text: "Coffee", sprite: "icon-coffee" }
        ]
        });

        var widget = this.myWidget();
        widget.setDataSource(inline);
    };

    //hold the widget
    this.myWidget = ko.observable();
};

ko.applyBindings(new ViewModel()); 
```

使用这种方法，我想在树视图中添加、删除和更新项目。我正在考虑像操作`inline`数据源这样的事情，我希望视图会相应地更新（类似于我上面原始帖子中可观察数据源的想法）。我怎样才能做到这一点 ？任何工作示例都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-26T15:06:02.370

根据[文档](http://rniemeyer.github.io/knockout-kendo/web/TreeView.html)，淘汰剑道 TreeView 应该添加到最外层的 ul 元素中。此外，无需使用 kendo.data.DataSource，只需使用标准剔除技术添加额外的嵌套 ul 和 li 元素。

更新：添加了一个添加项目按钮。添加了节点，但没有剑道风格。添加了一个 hack 来重新绑定淘汰节点。

```
// Here's my data model
var node = function(title){
    this.title = ko.observable(title);
    this.children = ko.observableArray();

}
var ViewModel = function() {
  this.tvWidget = ko.observable();
    this.children = ko.observableArray([new node('a'), new node('b'), new node('c')]);
    this.children()[0].children([new node('d'), new node('e'), new node('f')]);
    this.children()[0].children()[1].children([new node('d'), new node('e'), new node('f')]);
    this.children()[2].children([new node('d'), new node('e'), new node('f')]);

};

ViewModel.prototype.addItem = function() {
     this.children.push(new node('n'));
     this.children()[0].children.push(new node('n'));
    ko.cleanNode(document.getElementById('treeviewdiv'))
ko.applyBindings(vm, document.getElementById('treeviewdiv'))
};

var vm = new ViewModel();
ko.applyBindings(vm);
```

```
<link href="http://rniemeyer.github.io/knockout-kendo/css/kendo.default.min.css" rel="stylesheet"/>
<link href="http://rniemeyer.github.io/knockout-kendo/css/kendo.common.min.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>
<script src="http://rniemeyer.github.io/knockout-kendo/js/kendo.all.min.js"></script>
<script src="http://rniemeyer.github.io/knockout-kendo/js/knockout-kendo.min.js"></script>

<div id="treeviewdiv">   
    <ul data-bind="kendoTreeView: {widget: tvWidget}, template:  { name: 'node-template', foreach: children }"></ul>
</div>

<button data-bind="click: addItem">Add item</button>

<script type="text/html" id="node-template">
    <li>
        <span data-bind="text: title"></span>
        <ul data-bind="template: { name: 'node-template', foreach: children }"></ul>
    </li>
</script>
```

# dependencies - 依赖问题 Dart

> ID：14331810
> 
> 赞同：0
> 
> 时间：2013-01-15T05:46:06.310
> 
> 标签：dependencies, dart, dartium, dart-pub

我是 dart 的新手，我正在尝试将“Buckshot：'any'”包含到我的 yaml 文件中。不幸的是，我在运行 pub install 时遇到了依赖错误。我确信这是一个非常简单的问题，但我们将不胜感激。

谢谢你，克雷格

错误：

```
Running pub install ...
Pub install failed, [1] Resolving dependencies...
Incompatible dependencies on 'logging':
- 'web_ui' depends on it from source 'hosted'
- 'buckshot' depends on it from source 'sdk' 
```

发布规范.yaml

```
name:  TestName
description:  A sample application

dependencies:
   hipster_mvc: 0.2.2
   web_ui: ">=0.2.10 <0.2.11"
   buckshot: 'any' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:01:56.630

问题来自对同一包的不兼容依赖项。web_ui 正在寻找[pub中的](http://pub.dartlang.org)*日志*包，而*buckshot*正在寻找*dart:sdk*中的*日志*。

 ***前段时间，[SDK 包已移至 pub.dartlang.org 上](http://news.dartlang.org/2012/12/sdk-packages-now-available-on-pub.html)。

buckshot的[托管版本](http://pub.dartlang.org/packages/buckshot)看起来很旧（0.1.3）并且不处理该修改。但是，github 上项目的最后一个版本确实如此。因此，您可以使用最新版本的[Buckshot](https://github.com/prujohn/Buckshot)使用以下依赖项：

```
dependencies:
  hipster_mvc: 0.2.2
  web_ui: ">=0.2.10 <0.2.11"
  buckshot:
    git: git://github.com/prujohn/Buckshot.git 
```***

# javascript - 当它的父级被制作为.empty（）时，如何获取从DOM中删除的div？

> ID：14331812
> 
> 赞同：1
> 
> 时间：2013-01-15T05:46:25.297
> 
> 标签：javascript, html, jquery-ui

我在 HTML 文件中有一个 div

```
"<div id="abc" hidden="hidden">
        <div id="statIndicator">
            <span id="imgInd" class="status-indicator-border">
                <img src="../../LibSrc/SharedResources/IMG/loading-trace.gif" />
            </span><span id="messageIndicator">Updating Plots...</span>
        </div>
    </div>" 
```

我使用追加将 statIndicator div 插入另一个 div。这样 div 就变成了

```
<div id="parentDiv">
 <div id="statIndicator">
                <span id="imgInd" class="status-indicator-border">
                    <img src="../../LibSrc/SharedResources/IMG/loading-trace.gif" />
                </span><span id="messageIndicator">Updating Plots...</span>
            </div>
</div> 
```

刷新时我写 $('#parentDiv').empty() 它会删除“parentDiv”内的任何内容。但是当我尝试使用 $('#statIndicator') 附加 statIndicator 时，它返回“[]”，尽管我在 Html 中有 'statIndicator' div。

有没有办法让我获得'statIndicator' div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:48:32.867

不 `$.empty()`，删除内容，因此您的“statIndicator”div 根本不存在。

在调用之前将其从“parentDiv”中删除`$.empty()`。要么将它存储在一个变量中，要么将它放回它开始的地方，在“abc”中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:58:36.480

我认为 jquery.append() 移动选定的元素而不制作副本。因此，您可以使用 .clone() 方法显式创建一个副本并附加它的结果。就像是：

```
$('#abc #statIndicator').clone().appendTo('#parentDiv'); 
```

这是创建一个副本，然后将其附加到新位置。

一旦你这样做了，就会有两个具有相同 id 的 div，所以最好总是在你的选择器中引用 statIndicator 的父容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T05:59:15.817

如果您只想删除 parentDiv，可以使用 .detach() 函数

# php - 验证 URL 的最佳实践

> ID：14331814
> 
> 赞同：2
> 
> 时间：2013-01-15T05:46:38.370
> 
> 标签：php

我有一个表格可以从用户那里获取一些网址。例如：网址、Facebook 地址、Twitter 地址、Google+ 地址等...我的问题是如何在提交表单时验证这些 url。我尝试使用 FILTER_VALIDATE_URL 或简单地使用正则表达式来验证 PHP 中的 URL。

在这里，我想知道从用户那里获取此类 url 的最佳方法是什么。让他们进入协议总是好的吗？有时他们可能不知道它是 http、https、ftp、ftps 等。我认为有些用户很难做到这一点。

我尝试使用 FILTER_VALIDATE_URL 进行类似的操作，但它总是使用协议，有时我会混淆它的工作原理。

```
// validate url
$url = 'http://www.example.com';

if (filter_var( $url, FILTER_VALIDATE_URL)){
    echo "<br>valid";
} else {
    echo "<br>invalid";
} 
```

输出：有效

```
// validate url
$url = 'hp://www.example.com';

if (filter_var( $url, FILTER_VALIDATE_URL)){
    echo "<br>valid";
} else {
    echo "<br>invalid";
} 
```

输出：有效

```
// validate url
$url = 'http://example.com';

if (filter_var( $url, FILTER_VALIDATE_URL)){
    echo "<br>valid";
} else {
    echo "<br>invalid";
} 
```

输出：有效

```
// validate url
$url = 'http://example.com?id=32&name=kamalani';

if (filter_var( $url, FILTER_VALIDATE_URL)){
    echo "<br>valid";
} else {
    echo "<br>invalid";
}

OUTPUT : valid 
```

你能告诉我从用户那里获取 url 的最佳方法是什么以及这些方法是如何验证的吗？

任何评论都非常感谢..

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:57:47.990

您需要在这里使用正则表达式来检查有效的 url。

请试试这个：

```
 $pattern = "/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i";
  $URL= 'http://example.com?id=32&name=kamalani';

  if(preg_match($pattern, $URL) ){
    echo "<br>valid";
  } else{
  echo "<br>invalid";
  } 
```

**输出**

```
 valid 
```

# c# - 文本框中的“滑动”文本效果

> ID：14331818
> 
> 赞同：2
> 
> 时间：2013-01-15T05:46:53.347
> 
> 标签：c#, textbox

我有一个多行文本框的日志，它使用 AppendText 不断更新。我想产生一种效果，当新数据到达时，它会从底部平滑地滚动而不是简单地出现。我怎样才能做到无闪烁？我的一个想法是使文本框高度更高，然后更改文本框的 y 坐标，但这似乎是个坏主意。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:39:58.470

更新文本框后试试这个

```
 // Textbox update code

    textBox1.SelectionStart = textBox1.Text.Length;
    textBox1.ScrollToCaret(); 
```

# ios - UIViewController 中带有 UIPageViewController 的 UITableViewController

> ID：14331821
> 
> 赞同：0
> 
> 时间：2013-01-15T05:47:09.383
> 
> 标签：ios, pdf, cgcontext, uipageviewcontroller, cgcontextdrawpdfpage

我想做的是什么？有一个`MainViewController`其中有两个 UIViews 一个加载`UITableViewController`和另一个`UIPageViewController`。在`TableViewController`中，有 pdf 的名称列表。但是当我点击pdf列表时，它不会`PageViewController`在上下文中加载新的pdf。

Pdf 文件名存储在 .plist 文件中，Pdfs 从 NSBundle 或 NSDocumentDirectory 中获取

在 TableViewController 中

```
-(void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath 
    {
        [tableView deselectRowAtIndexPath:indexPath animated:YES];    
        Play *play = (Play *)[[self.sectionInfoArray objectAtIndex:indexPath.section] play];
        Quotation *qute = [play.Details objectAtIndex:indexPath.row];
        if ([qute.Key isEqualToString:@"ABC"])
        {
            AppDelegate *app = [[UIApplication sharedApplication]delegate];
            app.strpdfname = qute.Value;
            MiddleViewController *mid = [[MiddleViewController alloc] initWithNibName:@"MiddleViewController" bundle:nil];
            ContentViewController *cvc = [[ContentViewController alloc] initWithNibName:@"ContentViewController" bundle:nil];
            [mid viewDidLoad];
            [cvc viewDidLoad];
        }
        else
        {
            MainViewController *vc = [[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil];
            [vc viewDidLoad];
        }
    }

In PageViewController
    - (void)viewDidLoad
    {
        [super viewDidLoad];
        self.modelArray = [[NSMutableArray alloc] init];

        AppDelegate *app = [[UIApplication sharedApplication] delegate];
        self.pdfName = app.strpdfname;

        NSString *path = [[NSBundle mainBundle] pathForResource:pdfName ofType:nil];
        NSURL *targetURL = [NSURL fileURLWithPath:path];

        originalPDF = CGPDFDocumentCreateWithURL((__bridge CFURLRef)targetURL);
        numberOfPages = CGPDFDocumentGetNumberOfPages(originalPDF);

        for (int index = 0; index < numberOfPages ; index++)
        {
            [self.modelArray addObject:[NSString stringWithFormat:@"%d",index]];
        }

        self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl                                               navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];
        self.pageViewController.delegate = self;
        self.pageViewController.dataSource = self;
        contentViewController = [[ContentViewController alloc] initWithNibName:@"ContentViewController" bundle:nil];
        contentViewController.labelContents = [self.modelArray objectAtIndex:0];
        NSArray *viewControllers = [NSArray arrayWithObject:contentViewController];
        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward
                                       animated:NO 
                                     completion:nil];
        [self addChildViewController:self.pageViewController];
        [self.view addSubview:self.pageViewController.view];
        [self.pageViewController didMoveToParentViewController:self];       
        CGRect pageViewRect = self.view.frame;
        pageViewRect = CGRectInset(pageViewRect, 0.0, 0.0);
        self.pageViewController.view.frame = pageViewRect;
        self.view.gestureRecognizers = self.pageViewController.gestureRecognizers;
    }

    - (UIViewController *)pageViewController:(UIPageViewController *)pageViewController 
      viewControllerBeforeViewController:(UIViewController *)viewController
    {
        NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController labelContents]];
        if(currentIndex == 0)
        {
            return nil;
        }
        contentViewController = [[ContentViewController alloc] init];
        contentViewController.labelContents = [self.modelArray objectAtIndex:currentIndex - 1];
        return contentViewController;
    }

    - (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
       viewControllerAfterViewController:(UIViewController *)viewController
    {
        NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController labelContents]];
        if(currentIndex == self.modelArray.count-1)
        {
            return nil;
        }
        contentViewController = [[ContentViewController alloc] init];
        contentViewController.labelContents = [self.modelArray objectAtIndex:currentIndex + 1];
        return contentViewController;
    }

    - (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController
                   spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
    {
        UIViewController *currentViewController =   [self.pageViewController.viewControllers objectAtIndex:0];
        NSArray *viewControllers = [NSArray arrayWithObject:currentViewController];
        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:NULL];
        self.pageViewController.doubleSided = NO;
        return UIPageViewControllerSpineLocationMin;
    }

In ContentViewController of PageViewController
    -(UIImage*) imageFromPDF:(CGPDFDocumentRef)pdf withPageNumber:(NSUInteger)pageNumber withScale:(CGFloat)scale
    {
        CGPDFPageRef pdfPage = CGPDFDocumentGetPage(pdf,pageNumber);
        CGRect tmpRect = CGPDFPageGetBoxRect(pdfPage,kCGPDFMediaBox);
        CGRect rect =   CGRectMake(tmpRect.origin.x,tmpRect.origin.y,tmpRect.size.width*scale,tmpRect.size.height*scale);
        UIGraphicsBeginImageContext(rect.size);
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextTranslateCTM(context,-50,rect.size.height-30);
        CGContextScaleCTM(context,scale,-scale);
        CGContextDrawPDFPage(context,pdfPage);
        UIImage* pdfImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        return pdfImage;
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        AppDelegate *app = [[UIApplication sharedApplication] delegate];
        self.pdfName = app.strpdfname;
        i = [labelContents intValue];    
        NSString *path = [[NSBundle mainBundle] pathForResource:pdfName ofType:nil];
        if (i!=0)
        {
            CGPDFDocumentRef pdf = CGPDFDocumentCreateWithURL((__bridge CFURLRef)[NSURL fileURLWithPath:path]);
            UIImage *img = [[UIImage alloc] init];
            img = [self imageFromPDF:pdf withPageNumber:i withScale:1];
            UIImageView *imgview1 = [[UIImageView alloc] initWithImage:img];
            [self.view addSubview:imgview1];
        }
        else 
        {
            UIImage *imgmain = [UIImage imageNamed:@"Diary4.png"];
            UIImageView *imgvmain = [[UIImageView alloc] initWithImage:imgmain];
            imgvmain.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y,580,self.view.frame.size.height);
            [self.view addSubview:imgvmain];
        }   
    } 
```

在 MainViewController

```
-(void)viewDidload
    {
        leftView = [[UIView alloc] initWithFrame:CGRectMake(5,25, 200,715)];
        leftView.backgroundColor = [UIColor clearColor];    
        tvc = [[TableViewController alloc] initWithStyle:UITableViewStylePlain];
        tvc.plays = self.plays;
        tvc.view.frame = leftView.frame;
        leftView.clipsToBounds = YES;
        [leftView addSubview:tvc.view];
        [self.view addSubview:leftView];
        middleView = [[UIView alloc] initWithFrame:CGRectMake(107, 30, 575, 670)];
        mvc = [[MiddleViewController alloc] initWithNibName:@"MiddleViewController" bundle:nil];
        [mvc.view setFrame:middleView.frame];
        [middleView addSubview:mvc.view];
        [self.view addSubview:middleView];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:59:40.377

由于没有重新加载数据的方法`UIPageViewController`。我使用的是`UIPageViewController`in`UIViewController`而不是我使用`UINavigationController`的`UIPageViewController`可以重新加载动态数据的方法。因此，单击`UITableViewController`，数据将发送到`UINavigationController`--> `UIPageViewController`。这解决了上述问题。

# android - 使用媒体播放器类时在 Android 中处理音频文件时出错

> ID：14331834
> 
> 赞同：0
> 
> 时间：2013-01-15T05:48:42.757
> 
> 标签：android, audio, mp3, media-player

这是我的代码：

```
private void scanningSoundStart() {
    scanningMediaPlayer = MediaPlayer.create(this, R.raw.scanning);
    scanningMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mp) {
        }
    });
    scanningMediaPlayer.setOnVideoSizeChangedListener(new OnVideoSizeChangedListener() {
        @Override
        public void onVideoSizeChanged(MediaPlayer mp,int width, int height) {
        }
    });
    scanningMediaPlayer.start();
}

private void scanningSoundStop() {
    if (scanningMediaPlayer.isPlaying()) {
        scanningMediaPlayer.stop();
        //scanningMediaPlayer.release();
    }
} 
```

我正在尝试从我的原始文件夹中播放一个 mp3 文件。第一个用于播放音频文件的函数。第二个功能用于停止播放音频。

重复播放或停止音频时出现以下错误。

错误：MediaPlayer(10576)：错误 (-19, 0)

我知道我处理媒体播放器的整个方法是错误的。

请帮我纠正这个错误。如果可能的话，建议我如何有效地处理媒体播放器类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:02:24.477

尝试以下代码播放音频文件。

```
 public void audioPlayer(String path, String fileName){
//set up MediaPlayer    
MediaPlayer mp = new MediaPlayer();

try {
    mp.setDataSource(path+"/"+fileName);
    mp.prepare();
    mp.start();
} catch (Exception e) {
    e.printStackTrace();
}
} 
```

# javascript - 从字符串的开头删除特殊字符并搜索@symbol.in javascript

> ID：14331835
> 
> 赞同：1
> 
> 时间：2013-01-15T05:48:43.637
> 
> 标签：javascript

我只想从字符串的开头删除特殊字符。即，如果我的字符串是这样的，`{abc@xyz.com`那么我想`{`从一开始就删除。字符串应该看起来像 abc@xyz.com

但是如果我的字符串是这样的，`abc{@xyz.com`那么我想保留与它相同的字符串，即`abc{@xyz.com`。

另外我想检查我的字符串是否存在@符号。如果存在，则 OK，否则显示一条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:26:01.677

以下演示了您指定的内容（或接近）：

```
var pat = /^[^a-z0-9]*([a-z0-9].*?@.*?$)/i; //pattern for optional non-alphabetic start followed by alphabetic, followed by '@' somewhere
var testString = "{abc@xyz.com"; //Try with {abcxyz.com for alert
arr = pat.exec(testString);
var adjustedString;
if (arr != null) { adjustedString = arr[1]; }  //The potentially adjustedString (chopped off non-alphabetic start) will be in capture group 1
else { adjustedString = "";  alert(testString + " does not conform to pattern"); }
adjustedString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:07:04.953

我使用了两个单独的正则表达式对象来实现您的要求。它检查字符串中的两个条件。我知道它不是很有效，但它会满足您的目的。

```
var regex = new RegExp(/(^{)/);
var regex1 = new RegExp(/(^[^@]*$)/);
var str = "abc@gmail.com";
if(!regex1.test(str)){
     if(regex.test(str))
         alert("Bracket found at the beginning")
      else
        alert("Bracket not found at the beginning")
}
else{
   alert("doesnt contain @");
} 
```

希望这可以帮助

# algorithm - 用二叉树对整数进行排序？

> ID：14331837
> 
> 赞同：6
> 
> 时间：2013-01-15T05:49:11.570
> 
> 标签：algorithm, sorting, data-structures, binary, trie

由于每个整数都可以表示为一系列具有一定长度的位，因此您似乎可以按以下方式对一堆整数进行排序：

1.  将每个整数插入[二元树](http://en.wikipedia.org/wiki/Trie#Bitwise_tries)（每个节点有两个子节点的树，一个标记为 0，一个标记为 1）。
2.  使用按排序顺序列出[trie 中所有单词的标准算法，按排序顺序](http://en.wikipedia.org/wiki/Trie#Sorting)列出所有整数。

这种排序算法曾经在实践中使用过吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T05:49:11.570

我以前从未真正见过这种算法。这可能是因为巨大的内存开销 - 数字的每一位都被炸成一个包含两个指针和自己的一点的节点。在 32 位系统上，这是 64 倍的内存爆炸，而在 64 位系统上，这是 128 倍的内存爆炸。

[但是，该算法与实际中经常使用的最高有效位基数排序](http://en.wikipedia.org/wiki/Radix_sort#Most_significant_digit_radix_sorts)（也称为*二进制快速排序*）密切相关。事实上，您可以将二进制快速排序视为该算法的一种节省空间的实现。

连接基于 trie 的递归结构。如果您考虑 trie 的顶部节点，它将如下所示：

```
 *
          / \
         /   \
    All #s  All #s
     with    with
    MSB 0   MSB 1 
```

如果您要使用 trie 的标准前序遍历来按排序顺序输出所有数字，则该算法将首先按排序顺序打印出所有以 0 开头的数字，然后按排序顺序打印出所有以 1 开头的数字命令。（永远不会打印根节点，因为所有数字都具有相同的位数，因此所有数字实际上都存储在叶子上）。

因此，假设您想模拟构建 trie 并对其进行前序遍历的效果。您会知道这将从打印出所有带有 MSB 0 的数字开始，然后将打印出带有 MSB 1 的所有数字。因此，您可以通过将数字分成两组开始 - 一组所有数字都具有 MSB 0，一个所有数字都具有 MSB 1。然后，您将对所有具有 MSB 0 的数字进行递归排序并打印出来，然后对所有以 MSB 1 开头的数字进行递归排序并打印出来。这个递归过程会一直持续下去，直到你最终遍历了数字的所有位，此时你只需单独打印出每个数字。

上述过程几乎与二进制快速排序算法相同，其工作原理如下：

*   如果没有数字，什么也不做。
*   如果还剩一个号码，打印出来。
*   除此以外：
    *   根据数字的第一位将数字分成两组。
    *   递归排序并打印从 0 开始的数字。
    *   递归排序并打印从 1 开始的数字。

这些算法之间存在一些差异。二进制快速排序通过递归地将列表分成越来越小的部分，直到所有内容都排序，而基于特里树的算法构建特里树，然后重建数字。但是，您可以将二进制快速排序视为算法的一种优化，它同时构建和遍历特里树。

简而言之：由于内存开销，我怀疑有人会想要使用基于 trie 的算法，但它确实为推导 MSD 基数排序算法提供了一个很好的起点！

希望这可以帮助！

# xml - magento 1.7中的顶级菜单不起作用

> ID：14331842
> 
> 赞同：0
> 
> 时间：2013-01-15T05:49:24.977
> 
> 标签：xml, magento, navigation, menubar

我正在尝试在 Magento 中创建一个新模板，而不是使用剪切和粘贴空白模板并编辑 css 以适合我的布局。我想添加一个包含类别和页面的 topMenu 作为我的主要导航。我按照我在互联网上找到的说明进行操作，但菜单在任何情况下都不会显示。

我在 page.xml 中的代码是用于 topMenu

```
 <block type="core/text_list" name="top.menu" as="topMenu" translate="label">
            <label>Navigation Bar</label>
            <block type="page/html_topmenu" name="catalog.topnav" template="page/html/topmenu.phtml" />
        </block> 
```

我在头文件中调用它的代码是

```
<div id="utilities">  
<?php echo $this->getChildHtml('topMenu') ?>
</div> 
```

topmenu.phtml 位于我的主题的 /page/html/ 文件夹中，我已经清除了缓存并重新编制了索引。没有任何显示。

奇怪的是，当我将其设置为默认时，我复制了代码的主题，它实际上显示了带有我的类别和页面的 topMenu 导航。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:07:53.690

您`<?php echo $this->getChildHtml('topMenu') ?>`在 page/html/header.phtml 中调用您的 header.phtml 是因为：

**应用程序/代码/法师/页面/块/Html/Header.php**

第 38 行：

$this->setTemplate('page/html/header.phtml');

您正试图将 topMenu 块作为此标头块的子块。这意味着您必须在 page.xml 中将该块添加为标题块的子块。

```
<block type="page/html_header" name="header" as="header">
    <block type="core/text_list" name="top.menu" as="topMenu" translate="label">
            <label>Navigation Bar</label>
                <block type="page/html_topmenu" name="catalog.topnav" template="page/html/topmenu.phtml" />
    </block>    
</block> 
```

为确保将在所有页面上调用它（如果没有被覆盖），您必须将它放在默认句柄中。

所以看起来像这样：

```
<default translate="label" module="page">
    <block type="page/html_header" name="header" as="header">
        <block type="core/text_list" name="top.menu" as="topMenu" translate="label">
                <label>Navigation Bar</label>
                    <block type="page/html_topmenu" name="catalog.topnav" template="page/html/topmenu.phtml" />
        </block>    
    </block>
</default> 
```

您还可以通过将头文件的模板更改为：

```
<block type="page/html_header" name="header" as="header" template="page/html/custom_header.phtml">
</block> 
```

希望能帮助到你 ！

# mahout - 从 mahout 获取分类结果

> ID：14331844
> 
> 赞同：0
> 
> 时间：2013-01-15T05:49:35.357
> 
> 标签：mahout

最后我能够训练 mahout 分类器，现在我的问题是如何为我的输入文档获取目标类别。

为我的文本文档获取目标类别的过程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:32:53.410

首先，您必须对文本文档 RandomAccessSparseVector 进行矢量化处理。

一些示例代码供您参考：

```
 Vector vector = new RandomAccessSparseVector(FEATURES);
    FeatureExtractor fe = new FeatureExtractor();
    HashSet<String> fs = fe.extract(text);
    for (String s : fs) {
        int index = dictionary.get(s);
        vector.setQuick(index, frequency.get(index));
    } 
```

然后，使用 Classifier.classify(Vector) 得到结果。

# node.js - 运行带有 node-gyp 错误的 CImg 库

> ID：14331845
> 
> 赞同：0
> 
> 时间：2013-01-15T05:49:48.767
> 
> 标签：node.js, add-on, cimg, node-gyp

我想使用 CImg 库来处理 node.js 中的图像，所以我编写了一个 node 插件来做到这一点。编译成功，我运行node-gyp build commond，没关系。

但是当我运行节点程序时，出现以下错误：

```
[root@localhost hcaptha]# node index.js 

module.js:485
  process.dlopen(filename, module.exports);
          ^
Error: /usr/local/nodejs/hcaptha/build/Release/hcaptha.node: undefined symbol: XSendEvent
    at Object.Module._extensions..node (module.js:485:11)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/usr/local/nodejs/hcaptha/lib/hcap.js:1:75)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12) 
```

binding.gyp 文件是：

```
{
  "targets":[
    {
      "target_name": "hcaptha",
      "sources": [ "addon/hcaptha.cc" ,"addon/cap.cc"],
      'cflags': ['-fexceptions','-O2','-Dcimg_use_png'],//the configure using CImg lib
      'cflags_cc': ['-fexceptions','-O2','-Dcimg_use_png']
    }
  ]
} 
```

cap.cc 代码：

```
#include <node.h>
#include <string>
#include <iostream>
#include "cap.h"
#include "CImg-1.5.3/CImg.h"

using namespace v8;
Handle<Value> cap::create(const Arguments& args) {//create an image
  HandleScope scope;
    using namespace cimg_library;
    CImg<unsigned char> captcha(256,64,1,3,0);//delete this line run ok!
  return scope.Close(Boolean::New(1));
}
cap::cap(){};
cap::~cap(){}; 
```

index.js 代码：

```
var obj = require('../build/Release/hcaptha.node'); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:03:25.577

我终于找到了结果。将“libraries”：['-lX11'] 行添加到 binding.gyp 文件中，没关系！新的 binding.gyp 文件如下：

```
{
  "targets":[
    {
      "target_name": "hcaptha",
      "sources": [ "addon/hcaptha.cc" ,"addon/cap.cc"],
      "cflags": ['-fexceptions','-O2','-Dcimg_use_png'],
      "cflags_cc": ['-fexceptions','-O2','-Dcimg_use_png'],
      "libraries":['-lX11']
    }
  ]
} 
```

# android - 如何完全删除Android中的文件，使其无法通过工具恢复？

> ID：14331851
> 
> 赞同：0
> 
> 时间：2013-01-15T05:50:52.230
> 
> 标签：android

我们如何才能完全删除 Android 中的文件？对于Android，ROM是exFAT，sdcard有FAT32/ext3，ext4文件格式。

我想完全删除选定的文件，因此您无法恢复它。你知道解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:52:06.463

我什至不会问你为什么要这样做。

在删除文件之前简单地在文件顶部写零应该被认为是“足够好”。

从那里开始，您将不得不进行一些严肃的文件系统操作，以尝试在文件先前所在的区域顶部写入数据。对于大型闪存设备，我们可能会在之前的内容被永久销毁之前谈论几个千兆字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T05:08:55.443

由于 SD 卡是在文件系统下使用的，因此无法保证您将没有文件碎片。至少，我认为 SD 卡有可能像 SSD 磁盘一样工作：它可以为您透明地移动扇区。但是有一个尝试:)

您可以删除所需的文件，然后创建一个文件，该文件将填充 sd 卡上的所有可用空间，并用零填充该文件。然后您也可以删除该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T00:49:28.580

这是一个很老的问题，但如果有人在这里被重定向，那么请使用以下应用程序

安全删除：[https ://play.google.com/store/apps/details?id=com.peterhohsy.securedelete](https://play.google.com/store/apps/details?id=com.peterhohsy.securedelete)

或者

安全擦除：[https ://play.google.com/store/apps/details?id=com.pinellascodeworks.securewipe](https://play.google.com/store/apps/details?id=com.pinellascodeworks.securewipe)

根据您的要求

# php - 使用 NetDNS 或 get_dns_record 获取 Cname 记录

> ID：14331853
> 
> 赞同：0
> 
> 时间：2013-01-15T05:51:13.460
> 
> 标签：php, dns, pear

我正在尝试使用 PHP 获取 CNAME 记录列表。

当我在旧的 Windows 7 机器上托管代码时，此方法曾经有效，但我将其移至 Ubuntu 机器（类似 AMP 堆栈设置），它不再返回`$url`. 我将代码上传到 Windows 服务器，但仍然没有 CNAME 记录。

```
$records['cname'] = dns_get_record($url, DNS_CNAME); 
```

并不是说我声称操作系统与任何事情有很大关系，也许我在我的旧机器上以某种方式设置了一些允许它工作的东西。它当前返回一个简单的空数组，因为它曾经返回与我的 DNS 管理服务中的内容匹配的 CNAME 记录列表。我在这里读过这篇文章：

[当我知道它们存在时，为什么 dns_get_record 不显示 CNAME？](https://stackoverflow.com/questions/3111227/why-wouldnt-dns-get-record-show-cnames-when-i-know-they-exist)

并最终尝试使用 Pear 的 NetDns2 库实现该功能，并使用以下代码。而且，`answer`响应的数组仍然是空的。不确定从 get_dns_record 到 NetDNS2 的问题是否相同，或者我在这两种情况下都做错了什么，但测试的站点肯定有 CNAME 记录，包括`google.com`和`yahoo.com`.

```
//using Google Name Server
$rslvr = new Net_DNS2_Resolver(array('nameservers' => array('8.8.8.8')));
$records['cname'] = $rslvr->query($url, 'CNAME'); 
```

感谢您提供任何帮助，最终目标是能够像我在旧机器上一样获得 CNAME 记录列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:16:20.483

适用于 PHP 5.4.9。

第一条记录 (cweiske.de) 是 no`CNAME`但直接指向一个 IP 地址：

```
php > var_dump(dns_get_record('cweiske.de', DNS_CNAME));
array(0) {
} 
```

第二个实际上是第一条记录的 CNAME：

```
php > var_dump(dns_get_record('www.cweiske.de', DNS_CNAME));
array(1) {
  [0] =>
  array(5) {
    'host' =>
    string(14) "www.cweiske.de"
    'class' =>
    string(2) "IN"
    'ttl' =>
    int(86400)
    'type' =>
    string(5) "CNAME"
    'target' =>
    string(10) "cweiske.de"
  }
} 
```

`dig`显示相同：

```
$ dig cweiske.de
cweiske.de.     577 IN  A   83.169.7.198

$ dig www.cweiske.de
www.cweiske.de.     86397   IN  CNAME   cweiske.de.
cweiske.de.     597 IN  A   83.169.7.198 
```

要检查是您的问题还是 PHP 的问题，请使用 dig 或 nslookup 进行测试。

# php - 在 $_POST 变量中使用 $row 变量进行 MYSQL 查询

> ID：14331854
> 
> 赞同：0
> 
> 时间：2013-01-15T05:51:17.737
> 
> 标签：php, mysql

我有一个允许上传图像的表格。用户可以根据单选按钮选择将图像上传到哪个画廊。

在上传 php 脚本中，图像被上传到一个目录，然后目录位置被添加到一个 MYSQL 数据库。上传和目录添加工作正常。

我正在尝试将按下的单选按钮的名称添加到图像数据库中的另一列，以便我可以看到哪个图像被上传到哪个画廊，因为我的图像位于单独的表中。

我的表格看起来像

```
<form enctype="multipart/form-data" action="upload-image.php" method="POST">
<h3>Select Gallery To Upload To</h3>
<?php
    $results = mysql_query("SELECT * FROM users");
    while ($row = mysql_fetch_assoc($results)) 
    {
        echo'<br>';
        echo '<input type="radio" name="'. $row["username"].'"value="'.$row["username"].'">' . $row["username"];
    }
?>
<input type="hidden" name="MAX_FILE_SIZE" value="10000000" />
Choose a file to upload: <input name="uploadedfile" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

处理添加到 MYSQL 数据库的上传脚本部分如下：

```
mysql_query("INSERT INTO images (image, gallery_name) VALUES('".$target_path, $_POST["$row["name"]"]."')") 
```

这给了我一些错误：注意：未定义的索引：名称

警告：mysql_query() 期望参数 2 是资源，给定字符串

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:57:40.983

字符串未正确连接（连接）。

改变

```
mysql_query("INSERT INTO images (image, gallery_name) VALUES('".$target_path, $_POST["$row["name"]"]."')") 
```

至

```
$row_data = $row["name"];
mysql_query("INSERT INTO images (image, gallery_name) VALUES('".$target_path."', '".$_POST[$row_data]."')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:58:32.373

您的查询的双引号有点不对劲。您还需要提供`mysql_query`由创建的资源`mysql_connect`（在以下示例中，它由 表示`$mysql`）。

```
mysql_query("INSERT INTO images (image, gallery_name) VALUES('".$target_path."', '". $_POST[$row["name"]]."')", $mysql); 
```

# c# - 在 vs2010 中无法打开 powerpoint addin csproj 文件

> ID：14331855
> 
> 赞同：1
> 
> 时间：2013-01-15T05:51:32.793
> 
> 标签：c#, visual-studio-2012, add-in, powerpoint

我有一个在 VisualStudio 2010 中创建的 powerpoint 插件项目 - 我升级到 vs2012 并在打开它时遇到错误

```
W:\path\to\PPTAddIn.csproj : error  : The project file 'W:\path\to\PPTAddIn.csproj' cannot be opened.

The project type is not supported by this installation. 
```

我找不到有关此问题的任何文档。任何人都知道发生了什么以及如何解决它。

# ios - 将 UITouch 保存到 NSDictionary

> ID：14331857
> 
> 赞同：0
> 
> 时间：2013-01-15T05:51:41.447
> 
> 标签：ios, objective-c, xcode, nsdictionary, uitouch

首先，我试图归档一个带有 UITouch 的 NSDictionary。我不断收到一条错误消息，上面写着“-[UITouch encodeWithCoder:]: unrecognized selector sent to instance”。

如果我从字典中删除 UITouch 对象，我不会收到错误消息。

我一直试图自己弄清楚，包括过去几个小时通过谷歌搜索，但还没有找到如何将 UITouch 对象存储在 NSDictionary 中。

这是我正在使用的方法：

```
- (void)sendMoveWithTouch:(id)touch andTouchesType:(TouchesType)touchesType {
     MessageMove message;
     message.message.messageType = kMessageTypeMove;
     message.touchesType = touchesType;
     NSData *messageData = [NSData dataWithBytes:&message length:sizeof(MessageMove)];

     NSMutableData *data = [[NSMutableData alloc] init];
     NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];

     [archiver encodeObject:@{@"message" : messageData, @"touch": touch} forKey:@"touchesDict"]; //RECEIVE ERROR HERE. If I remove the UITouch object, everything passes correctly

     [archiver finishEncoding];

     [self sendData:data];
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:03:00.293

UITouch 本身并不符合`<NSCoding>`协议，因为它没有简单/明显的序列化表示（如字符串或数组，它们是基本数据类型）。你要做的是通过扩展它的类并决定它应该序列化哪些属性以及以什么样的格式来使其符合这个协议。例如：

```
@implementation UITouch (Serializable)

- (void)encodeWithCoder:(NSCoder *)coder
{
    [coder encodeObject:@([self locationInView:self.view].x) forKey:@"locationX"];
    [coder encodeObject:@([self locationInView:self.view].y) forKey:@"locationY"];
}

- (id)initWithCoder:(NSCoder *)decoder
{
    if (self = [super init]) {
        // actually, I couldn't come up with anything useful here
        // UITouch doesn't have any properties that could be set
        // to a default value in a meaningful way
        // there's a reason UITouch doesn't conform to NSCoding...
        // probably you should redesign your code!
    }
    return self;
}

@end 
```

# linux - 我们如何在 linux 中创建“特殊”文件，例如 /dev/random？

> ID：14331861
> 
> 赞同：2
> 
> 时间：2013-01-15T05:52:17.323
> 
> 标签：linux, file, pipe, lazy-evaluation

在 Linux 文件系统中，有 /dev/zero 和 /dev/random 等文件不是硬盘上的真实文件。

有什么方法可以创建一个类似的文件并告诉它从执行程序中获取输出？

例如，我可以创建文件，比如 /tmp/tarfile，这样任何读取它的程序实际上都可以从执行不同的程序（/usr/bin/tar ...）中获得输出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:10:09.477

可以创建这样的文件/程序，但需要创建一个特殊的文件系统才能将挂钩插入 VFS，以便正确检测和处理访问。

# openstack - 如何将数据发送到 opestack 中的云实例

> ID：14331862
> 
> 赞同：0
> 
> 时间：2013-01-15T05:52:33.490
> 
> 标签：openstack, openstack-nova

**上下文**：我已经使用 VirtualBox 在我的笔记本电脑中设置了一个演示云，并有两台虚拟机——一台有客户端，另一台作为服务器。使用服务器创建一个小实例，运行实例是 TinyLinux。

**问题**：我应如何将数据发送到该实例并存储在该实例中。

一些指示会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:48:37.073

好吧，使用 libvirt，您有多种选择如何进行[网络连接](http://wiki.libvirt.org/page/Networking#Guest_configuration)。默认是使用 NATing。在这种情况下，libvirt 会为每个如此配置的虚拟网卡创建一个网桥和虚拟网卡：

```
$ brctl show    
bridge name bridge  id      STP enabled interfaces
virbr0      8000.525400512fc8   yes virbr0-nic
                        vnet0 
```

然后设置 iptables 规则对此类网桥上的数据包进行 NAT（伪装）。

```
Chain POSTROUTING (policy ACCEPT 19309 packets, 1272K bytes)
 pkts bytes target     prot opt in     out     source               destination         
    8   416 MASQUERADE  tcp  --  any    any     192.168.122.0/24    !192.168.122.0/24     masq ports: 1024-65535
  216 22030 MASQUERADE  udp  --  any    any     192.168.122.0/24    !192.168.122.0/24     masq ports: 1024-65535
   11   460 MASQUERADE  all  --  any    any     192.168.122.0/24    !192.168.122.0/24 
```

启用转发

```
# cat /proc/sys/net/ipv4/ip_forward 
1 
```

并生成 DHCP 服务器（`dnsmasq`DHCP 和 DNS 合二为一）

```
ps aux | grep dnsmasq
nobody    1334  0.0  0.0  13144   568 ?        S    Feb06   0:00 \
     /sbin/dnsmasq --strict-order --local=// --domain-needed \
     --pid-file=... --conf-file= --except-interface lo --bind-dynamic \
     --interface virbr0 --dhcp-range 192.168.122.2,192.168.122.254 \
     --dhcp-leasefile=.../default.leases --dhcp-lease-max=253 --dhcp-no-override 
```

如果我有两个虚拟网络接口（两台机器在同一网络上有一个网卡，那么该网桥中将有两个网卡。机器从`dnsmasq`DHCP 服务器获取范围 192.168.122.2-254 的地址。所以**如果你知道这些地址,您应该能够从一个虚拟机连接到另一个虚拟机**，因为两者都在同一个广播域（通过网桥连接）。在您的计算机外部，机器都显示为“一个 IP 地址”。

更“高级”的选项是使用*桥接网络*，它再次将虚拟接口放入一个网桥，但它也将一些物理设备放在那里，所以机器看起来好像有几台机器连接到某个交换机......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:27:00.770

我通常将 Web 服务器绑定到虚拟机使用的网关接口，以与物理主机进行 NAT。

# c# - 如何调用javascript函数绑定动态添加的div

> ID：14331863
> 
> 赞同：0
> 
> 时间：2013-01-15T05:52:34.607
> 
> 标签：c#, javascript, jquery, accordion

我有一个日历控件，在选择相应的日期时，我需要在手风琴中将 Today's Due 和 Over due 显示为两个部分。我尝试添加带有样式的 div 以呈现手风琴的外观，但这会带来 UI 问题。目前，我正计划添加手风琴（Jquery）。因为，手风琴将在从日历控件中选择日期时显示。我在后面的代码中绑定手风琴div并将其转换为要显示的Json，同时选择相应的日期。添加div的代码如下：

```
[WebMethod(EnableSession = true)]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string CalenderBinderAccordian()
    {
        try
        {
            //Code to fetch ProductGroup is not shown
        foreach (var p in productGroup)
        {
            string todoString = "";
            int uniqueID = Guid.NewGuid().GetHashCode();
            todoString = "<div id='accordion' class='ui-accordion ui-widget ui-helper-reset' role='tablist'><h3><a href=#" + uniqueID + "><b>Due Today</b></a></h3>";
            todoString += "<div>";
            foreach (var t in p.todo)
            {
                var tempAmt = String.Empty;
                if ((t.Amount == null) || t.Amount == String.Empty)
                    tempAmt = "0";
                else
                    tempAmt = Convert.ToDecimal(t.Amount.ToString()).ToString();
                todoString += "<p style='padding:5px 0px; border-bottom:dashed 1px #dddddd;'><b>" + todoCount.ToString() + "</b>. " + t.ProductName + "<span style='text-align:right; padding-right:5px;'> $" + tempAmt + "</span><a href='PaymentDetails.aspx' target='_blank' style='text-decoration:none;'><b>Pay Now</b></a></p>";
                todoCount++;
            }
            todoString += "</div>";
            var overDue = temps.Select(x => new { x.DueDate }).Distinct().ToList();
            int overDueCount = 0;
            uniqueID = Guid.NewGuid().GetHashCode();
            todoString += "<h3><a href=#" + uniqueID + "><b>Over Due</b></a></h3>";
            int todoCount1 = 1;
            todoString += "<div>";
            for (int i = 0; i < overDue.Count(); i++)
            {
                if ((Convert.ToDateTime(overDue[i].DueDate) - Convert.ToDateTime(p.dates)).Days < 0)
                {
                    overDueCount++;
                    var overDueList = temps.FindAll(x => x.DueDate.Equals(overDue[i].DueDate)).ToList();
                    foreach (var t in overDueList)
                    {
                        var tempAmt = String.Empty;
                        if ((t.Amount == null) || t.Amount == String.Empty)
                            tempAmt = "0";
                        else
                            tempAmt = Convert.ToDecimal(t.Amount.ToString()).ToString();
                        todoString += "<p  style='padding:5px 0px; border-bottom:dashed 1px #dddddd;'><b>" + todoCount1.ToString() + "</b>. " + t.ProductName + "<span style='text-align:right; padding-right:5px;'> $" + tempAmt + "</span><a href='PaymentDetails.aspx' target='_blank' style='text-decoration:none;'><b>Pay Now</b></a></p>";
                        todoCount++;
                        todoCount1++;
                    }
                }
            }
            todoString += "</div>";
            todoString = todoString + "</div>\",\"count\":\"" + todoCount + "\"},";
            jsonString = jsonString + String.Format("{{\"{0}\" : \"{1}\",\"{2}\" : \"{3}", "dates", p.dates, "todo", todoString);
            if (overDueCount.Equals(0))
            {
                jsonString = jsonString.Replace("<h3><a href=#" + uniqueID + "><b>Over Due</b></a></h3><div></div>", "");
            }
        }
        jsonString = jsonString.TrimEnd(',');
        jsonString = '[' + jsonString + ']';
        string data= jsonString;
        return data;
    }
    catch (Exception ex)
    {
        throw;
    }
} 
```

ascx页面中的代码如下：/

```
/Scripts for Calender control
           <script type="text/javascript" src="../../Scripts/jquery-1.8.3.js"></script>
    <link rel="stylesheet" href="../../Content/jquery.calendarPicker.css" type="text/css" media="screen"/>
   <script type="text/javascript" src="../../Scripts/jquery.calendarPicker.js"></script>
    <link rel="stylesheet" href="../../Content/style.css" type="text/css" media="screen"/>
//Scripts for accordion
  <link rel="stylesheet" href="../../Content/jquery-ui.css" />
  <script  type="text/javascript" src="../../Scripts/jquery-ui.js"></script>
  <script  type="text/javascript">
        $(function () {
            $("#accordion").accordion();
        });
    </script>
     <div class="calendercontent">
        <div id="dsel1" style="width:200px;">
            <a href="" onclick="calendarPicker1.changeDate(new Date())"></a>
            <span id="span1"></span>        
        </div>
        <img class="ref" src="../../Images/refresh_circle.gif" alt="refresh" title="refresh"/>
        <div id="todo"></div>
    </div> 
```

注意，当我在 ascx 页面中添加 div 数据时，手风琴工作正常，使用 fireBug 显示手风琴类。但是由于手风琴数据是在后面的代码中添加并使用 java 脚本显示的。下面显示的功能不是在职的。请帮助，我是 Jquery 的初学者。

```
<script  type="text/javascript">
            $(function () {
                $("#accordion").accordion();
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:57:10.780

这是因为当 DOM 准备好时会调用手风琴函数`$(function () {`......并且到那时动态添加的 div 不在 DOM 中......所以在显示动态生成的 div 后调用手风琴函数..

```
//code to display your dynamic div..
$("#addedDivID").accordion();  //call the accordion function (again) after that.. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:03:42.220

试试这个：

```
$(document).find("#accordion").accordion(); 
```

# c++ - 如何在 Visual Studio 2010 中重命名解决方案和 dll？

> ID：14331864
> 
> 赞同：-1
> 
> 时间：2013-01-15T05:52:38.397
> 
> 标签：c++, visual-studio-2010

请帮忙，我在它们之间链接了 2 个项目，其中一个还包含一个 dll。在我重命名一个项目的名称后，第二个项目的解决方案和 dll 名称是相同的。我该如何修改它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:56:16.977

这些设置由项目属性对话框控制，而不是项目名称。查找链接器输出设置。

您可以在解决方案资源管理器中重命名解决方案的显示名称。重命名解决方案的文件名更复杂，但重命名 *.sln 文件和 *.suo 文件，以及任何其他同名文件。

如果重命名 VC 项目的文件名，请务必在记事本中手动编辑 *.sln 文件以确保保留引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:30:30.703

我只能说VS2005，但我认为这并没有太大的变化。在那里，项目文件实际上是 XML 文件，并且在像重命名这样的大规模更改的情况下，在它们上使用文本编辑器是更好的方法。只需对文件进行搜索'n'替换即可更改例如输出文件的名称。此外，当使用现有项目文件作为另一个项目的模板时，请确保删除顶部的 UUID。VS 会自动重新生成 UUID，但如果它找到两个相同的项目，它会感到困惑。

关于解决方案文件，这些也是可以编辑的文本文件，但那些实际上是通过其 UUID 引用项目的（如果我没记错的话）。在大多数情况下，重新生成这些文件更容易，即开始一个新的解决方案并添加项目。

# java - 使用 JAX-RS 使用 GeoJSON

> ID：14331865
> 
> 赞同：4
> 
> 时间：2013-01-15T05:52:41.593
> 
> 标签：java, jackson, jax-rs, geojson

我希望能够通过使用 Jackson 进行 JSON 处理的 JAX-RS 服务来使用 GeoJSON。我对如何正确处理它感到有些困惑。问题是 GeoJSON 的一部分可以是数组、数组数组或数组数组的数组……我不知道如何为这种情况指定 bean。

在 GeoJSON 中，几何结构可以将坐标作为数组：

```
{ "type": "Point", "coordinates": [100.0, 0.0] } 
```

或数组数组：

```
{ "type": "LineString",
    "coordinates": [ [100.0, 0.0], [101.0, 1.0] ]
} 
```

或数组数组：

```
{ "type": "Polygon",
   "coordinates": [
   [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0] ]
   ]
} 
```

我如何定义要进入的pojo？

```
public class Geometry {
    public String type;
    public List<Double> coordinates;              // this
    public List<List<Double>> coordinates;        // or this
    public List<List<List<Double>>> coordinates;  // or this? 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:35:31.073

最终创建了一些带有杰克逊注释的bean。我已经把这些放在谷歌代码中。代码可以在这里找到：[http ://code.google.com/p/belteshazzar-geojson/source/browse/#svn%2Ftrunk%2Fsrc%2Fmain%2Fjava%2Fcom%2Fbelteshazzar%2Fgeojson](http://code.google.com/p/belteshazzar-geojson/source/browse/#svn%2Ftrunk%2Fsrc%2Fmain%2Fjava%2Fcom%2Fbelteshazzar%2Fgeojson)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T08:55:26.570

> 我如何定义要进入的pojo？

我在将 GeoJSON 字符串建模为 POJO 时遇到了同样的问题。[但是，当我遇到GeoJSON-POJO](https://github.com/MPriess/GeoJSON-POJO) 时，我放弃了重新发明轮子的尝试，这是 GeoJSON 格式规范 1.0 的简单 POJO 实现。

工作得很好。

# c - 使用联合和函数指针在 C 中实现函数委托

> ID：14331868
> 
> 赞同：5
> 
> 时间：2013-01-15T05:52:54.347
> 
> 标签：c, delegates, function-pointers, anonymous-function, unions

我希望能够将*函数一般地传递​​给 C 中的函数*。我已经使用 C 几年了，并且我知道实现正确的闭包和高阶函数的障碍。这几乎是不可逾越的。

我搜索了 StackOverflow 以了解其他消息来源对此事的看法：

*   [c 中的高阶函数](https://stackoverflow.com/questions/2535631/higher-order-functions-in-c)
*   [匿名函数使用 gcc 语句表达式](https://stackoverflow.com/questions/10405436/anonymous-functions-using-gcc-statement-expressions)
*   [有没有一种方法可以在 C 中进行柯里化](https://stackoverflow.com/questions/1023261/is-there-a-way-to-do-currying-in-c)
*   [函数式编程-c-issue-with-types](https://stackoverflow.com/questions/12991014/functional-programming-currying-in-c-issue-with-types)
*   [在 C 中模拟部分功能应用程序](https://stackoverflow.com/questions/5524299/emulating-partial-function-application-in-c)
*   [c 中的假匿名函数](https://stackoverflow.com/questions/1650379/fake-anonymous-functions-in-c)
*   [带有宏高阶函数生成器的 c 函数式编程](https://stackoverflow.com/questions/894167/functional-programming-in-c-with-macro-higher-order-function-generators)
*   [c 中的高阶函数作为句法糖，只需最少的努力](https://stackoverflow.com/questions/14160516/higher-order-functions-in-c-as-a-syntactic-sugar-with-minimal-effort)

...除了使用可变参数或汇编之外，没有一个通用的答案。我对汇编没有骨气，但如果我能有效地用宿主语言实现一个特性，我通常会尝试。

### 因为我不能轻易拥有 HOF...

我喜欢高阶函数，但我会在紧要关头接受代表。我怀疑通过下面的代码，我可以在 C 中获得一个可行的*委托实现。*

想到这样的实现：

```
enum FUN_TYPES {
    GENERIC,
    VOID_FUN,
    INT_FUN,
    UINT32_FUN,
    FLOAT_FUN,
};

typedef struct delegate {
    uint32 fun_type;
    union function {
        int (*int_fun)(int);
        uint32 (*uint_fun)(uint);
        float (*float_fun)(float);
        /* ... etc. until all basic types/structs in the 
           program are accounted for. */
    } function;
} delegate; 
```

使用示例：

```
void mapint(struct fun f, int arr[20]) {
    int i = 0;
    if(f.fun_type == INT_FUN) {
        for(; i < 20; i++) {
            arr[i] = f.function.int_fun(arr[i]);
        }
    }
} 
```

不幸的是，这种方法对代表有一些明显的缺点：

*   没有类型检查，通过检查“fun_type”字段保存你自己做的那些。
*   类型检查在你的代码中引入了额外的条件，使它比以前更加混乱和多变。
*   函数的（安全）可能排列的数量受“fun_type”变量的大小限制。
*   函数指针定义的枚举和列表必须是机器生成的。除了琐碎的情况外，其他任何事情都会接近精神错乱。
*   遗憾的是，通过普通的 C 语言并不像*mov -> 调用*序列那样有效，这可能在汇编中完成（有一些困难）。

## 有谁知道在 C 中做类似委托的更好方法？

**注：**越便携、越高效越好

**另外，注意：**我听说过[Don Clugston 的 C++ 非常快的代表](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)。但是，我对 C++ 解决方案不感兴趣——只是 C 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:58:11.430

您可以为所有函数添加一个`void*`参数，以允许绑定参数、委托等。不幸的是，您需要为处理外部函数和函数指针的任何内容编写包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-25T21:22:15.173

有两个问题我已经研究了类似的技术，提供了稍微不同版本的基本技术。这样做的缺点是您会丢失编译时检查，因为参数列表是在运行时构建的。

首先是[我对 Is there a way to do currying in C 的问题的回答](https://stackoverflow.com/questions/1023261/is-there-a-way-to-do-currying-in-c/45256108#45256108)。这种方法使用代理函数来调用函数指针和函数的参数。

第二个是[我对 C 将参数作为 void-pointer-list 传递给 LoadLibrary() 中的导入函数的问题的回答](https://stackoverflow.com/questions/28996696/c-pass-arguments-as-void-pointer-list-to-imported-function-from-loadlibrary/44781829#44781829)。

基本思想是拥有一个内存区域，然后用于构建参数列表，然后将该内存区域压入堆栈作为函数调用的一部分。结果是被调用函数将内存区域视为参数列表。

在 C 中，关键是定义一个`struct`包含数组的数组，然后将其用作内存区域。当被调用的函数被调用时，整体`struct`是按值传递的，这意味着设置到数组中的参数然后被压入堆栈，这样被调用的函数看到的不是一个`struct`值，而是一个参数列表。

对于 curry 问题的答案，内存区域包含一个函数指针以及一个或多个参数，一种闭包。然后将内存区域交给代理函数，该函数实际上使用闭包中的参数调用该函数。

这是因为标准 C 函数调用将参数压入堆栈，调用函数，当函数返回时，调用者清理堆栈，因为它知道实际压入堆栈的内容。

# knockout.js - Knockout.js：如何预编译字符串模板以插入 DOM（ko_code）以正常工作？

> ID：14331869
> 
> 赞同：1
> 
> 时间：2013-01-15T05:52:54.433
> 
> 标签：knockout.js, jquery-templates

我认为我的问题来自将 Knockout.js 与“jquery.tmpl.1.0.0pre.js”一起使用，其中现有的 DOM 脚本模板被预编译？我试图弄清楚如何将外部 html 模板泵入页面（我已经完成），但也让 Knockout.js 使用它们（目前失败并出现错误。）顺便说一句，我在应用 Knockout 绑定之后所有 ajax 调用完成。

这是我经历的步骤：

我的第一步：我将内嵌的 html 模板移到了 Javascript，它与 Knockout.js 一起运行良好：

```
$('#templates').append(
    '<script type="text/x-jquery-tmpl" id="DDLTmpl">' +
        '<select data-bind="options:options(),value:$item.data.value,' +
        'optionsCaption:caption(),optionsText:\'text\',optionsValue:\'value\'">'+
        '</select>' +
    '</script>'); 
```

第二步：我从同一个域的单独文件中加载了相同的 HTML，并将其插入到 DOM 中：

```
$.ajax({
    url: '/somewhere/Tmpl.htm',
    data: {},
    success: function(data) {
        $('#templates').append(
            $('<script type="text/x-jquery-tmpl" id="Tmpl" />').html(data)
         );
    },
    dataType: 'html'
}); 
```

这成功了，但导致 Knockout 得到一个“非法字符”错误`');if(typeof(\'$\' + fns.fM)!=='undefined' && (\'$\'`。查看 DOM 中的两个模板，其中一个是这样编码的：

```
{{ko_code ((function() { return ko.templateRewriting.applyMemoizedBindings... 
```

第二个看起来好像 html 已按预期剪切并粘贴到 div 中。

我需要预编译模板吗？我将如何编码模板以使用 Knockout.js？

我的下一步是删除 jquery.tmpl.1.0.0pre.js 依赖项并使用本机 Knockout.js 模板引擎（或[doT](https://github.com/olado/doT)。）我目前正在使用 Knockout 2.1.0.js。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:35:30.407

改用定义模板源的内置方式，更容易。

Ryan 有一篇很好的文章，[http://www.knockmeout.net/2011/10/ko-13-preview-part-3-template-sources.html](http://www.knockmeout.net/2011/10/ko-13-preview-part-3-template-sources.html)

或者你可以看看我是如何为我的 KO Combobox 绑定做的

[https://github.com/AndersMalmgren/Knockout.Combobox](https://github.com/AndersMalmgren/Knockout.Combobox)

# grails - 查找今天更新的域实例

> ID：14331871
> 
> 赞同：0
> 
> 时间：2013-01-15T05:52:58.270
> 
> 标签：grails

这听起来很简单的问题，但我很难找到如何获取今天更新的所有条目。

```
def today = new Date()
def q = "from UserMapping as u where u.updateTime like :today"
def updated = UserMapping.findAll(q, [today: today])

java.lang.String cannot be cast to java.util.Date. Stacktrace follows: 
```

我已经尝试了大约 10 种其他方法，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:04:51.087

我使用以下方法解决了它：

```
def today = new Date().clearTime()
def updated = UserMapping.findAllByUpdateTimeGreaterThanEquals(today) 
```

如果有人有更优雅的方法，请发布。

# java - Android - 服务器无法处理您的 apk - 大小限制？

> ID：14331881
> 
> 赞同：2
> 
> 时间：2013-01-15T05:53:45.497
> 
> 标签：java, android, apk, publish, google-play

我花了一整天的时间试图找出我的 apk 出了什么问题。尝试了来自网络的所有解决方案，aapt 什么也没透露，尝试了不同的签名、包、版本、浏览器、操作系统。清单经历了所有可能的变化，但我遇到了同样的问题。

所以我虽然可以，让我们从头开始，也许谷歌服务器由于某种原因而关闭（这不是第一次）。

1.  创建了新的 android 应用程序项目，新包，只有一个活动
2.  构建，签名，上传，瞧，好的，很好，从控制台中删除了 apk
3.  做了几次，每次都成功
4.  apk 的大小只有几百 KB
5.  因为我原来的 apk 大约是 25MB，所以我想，嘿，让我们尝试增加这个测试的大小
6.  所以将大约 25MB 的照片复制到 drawable-hdpi
7.  构建、签名、上传和熟悉的消息再次弹出 - “服务器无法处理您的 apk”
8.  试了几次，还是一样的结果
9.  已删除的照片，已构建，已签名，已上传，好的
10.  添加照片，没有运气

所以很明显问题不在于清单或其他任何东西，出于某种原因，大小很重要（在这种情况下无论如何:)）。

是的，当我只删除了 50% 的照片时，apk 大约为 13MB，它有时有效，有时无效。

对此有何解释？**你能复制吗？**尝试过不同的浏览器、操作系统，到处都一样……我知道 apk 的大小是有限制的，但那是 50MB

去搞清楚 ...

* * *

**更新：**如果您遇到同样的问题并且您确定您的 apk 没问题，请继续尝试上传。它在随后的几次上传失败后工作，突然服务器可以处理，没有对 apk 进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:06:05.247

我不知道您的应用和 Google Play 发生了什么事。我们最大的 APK 文件不到 11MB，我们从来没有遇到过问题。

或许您可以通过将资源打包到 APK 扩展文件中来避开该问题，如此[处](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=2481797)所述。APK 扩展文件的大小限制为 2GB，因此根本不存在任何大小问题。根据[这个线程](https://stackoverflow.com/questions/12371302/android-apk-size-limitation-in-google-play)，它可以设置为非常顺利地工作（对用户来说是透明的）。

# ruby-on-rails - 如何在给定 id 列表的情况下更新所有模型的布尔属性？

> ID：14331885
> 
> 赞同：3
> 
> 时间：2013-01-15T05:54:29.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我正在做类似于这些 railscast 剧集的事情：

[http://railscasts.com/episodes/165-edit-multiple](http://railscasts.com/episodes/165-edit-multiple)

[http://railscasts.com/episodes/52-update-through-checkboxes](http://railscasts.com/episodes/52-update-through-checkboxes)

问题是那些只是试图修改选定的模型。我需要更新每个模型。

我发现的第一件事是它`id not in ()`并没有像我预期的那样返回所有东西，所以我不得不为空列表制作一个特殊情况。

这段代码有效，但看起来不是很干。至少我应该能够将正常情况合并为一行。

```
def update_published
  if params[:book_ids].empty?
    Book.update_all(published: false)
  else
    Book.where(id: params[:book_ids]).update_all(published: true)
    Book.where("id not in (?)", params[:book_ids]).update_all(published: false)
  end
  redirect_to books_path
end 
```

任何改进的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:35:14.580

为什么不直接执行以下操作：

```
def update_published
  Book.update_all(published: false)
  Book.where(id: params[:book_ids]).update_all(published: true)
  redirect_to books_path
end 
```

它会更快，而且非常简单明了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:26:30.270

你可以这样做：

```
def update_published
    Book.transaction do
      Book.update_all(published: false)
      Book.scoped.find(params[:book_ids]).update_all(published: true) #Should be Lazyloaded. Testing Now
    end
end 
```

因为它是一个事务，它会很快。另请注意我如何使用“查找”，而不是“在哪里”。在我看来它更好。使代码更简洁。

注意：我会质疑为什么您每次都需要更新每本书实体。一本一本地跟踪出版的书籍不是更聪明吗？如果您每次想要更新一本书时都需要传递每个书的 ID，那么您肯定会遇到麻烦。该解决方案的可扩展性不是很高。

你应该拥有的是：

```
def publish_book(book)
  book.published = true;
  book.save!
end 
```

甚至更好：

```
#Book.rb
def publish
  self.published = true
  self.save #not 100% sure you need this. Anyone?
end 
```

只要你可以（很多人同意）应该遵循“瘦控制器，胖模型”的方法。这意味着您基本上将尽可能多的代码放在模型类中，而不是在任何可以节省的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:52:50.977

我终于弄明白了。

```
def update_published
  Book.update_all(["published = id in (?)", params[:book_ids]])
  redirect_to books_path
end 
```

昨天我试图做类似的事情，但它一直给我一个错误，`?`没有填写它并且它正在`where`对我的 id 进行操作。今天，我终于意识到我需要将两个参数包装到一个数组中。

一个奇怪的警告是它弄乱了我的一些规格。我正在检查错误，但它给出了零。在数据库中，它似乎设置为 false。我将我的规格从 更改`be(false)`为`be_false`现在感觉很安全。

# php - zend 框架模型包含路径配置完美，加载失败

> ID：14331887
> 
> 赞同：0
> 
> 时间：2013-01-15T05:54:52.630
> 
> 标签：php, zend-framework, indexing, include-path

```
 Warning: include_once(Application/Model/Hiring.php): failed to open stream: 
No such file or directory in /var/www/hiring/library/Zend/Loader.php on line 146 
```

在包含路径中

```
Warning: include_once(): Failed opening 'Application/Model/Hiring.php' for inclusion 
(include_path='/var/www/hiring/application/../library:/var/www/hiring/library:./application
/models/:./application/controllers/:./application/views/scripts/:.:/usr/share/php:/usr/local
/ZendFramework/library') in /var/www/hiring/library/Zend/Loader.php on line 146 
```

我的索引文件是

```
<?php

// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/application'));

// define root path
defined('ROOT_PATH') || define('ROOT_PATH', realpath(dirname(__FILE__) . '/'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

// Ensure library/ is on include_path
set_include_path(realpath(dirname(__FILE__) . '/library')
. PATH_SEPARATOR . './application/models/'
. PATH_SEPARATOR . './application/controllers/'
. PATH_SEPARATOR . './application/views/scripts/'
. PATH_SEPARATOR . get_include_path());

require_once 'Zend/Application.php';
require_once 'Zend/Loader/Autoloader.php';
/** Zend_Application */

$loader = Zend_Loader_Autoloader::getInstance();
$loader->registerNamespace('hiring');
$loader->setFallbackAutoloader(true);

Zend_Loader::loadClass('Zend_Controller_Front');
Zend_Loader::loadClass('Zend_Config_Ini');
Zend_Loader::loadClass('Zend_Registry');
Zend_Loader::loadClass('Zend_Db');
Zend_Loader::loadClass('Zend_Db_Table');
Zend_Loader::loadClass('Zend_Db_Statement');
//Zend_Loader::loadClass('Zend_Mail_Transport_Smtp');
//Zend_Loader::loadClass('Zend_Mail_Transport_Sendmail');
//Zend_Loader::loadClass('Zend_Mail');
Zend_Loader::loadClass('Zend_Session_Namespace');
Zend_Loader::loadClass('Zend_Db_Adapter_Pdo_Pgsql');
//Zend_Loader::loadClass('Zend_Date');
Zend_Loader::loadClass('Zend_Log');

// setup controller
$frontController = Zend_Controller_Front::getInstance();
$frontController->throwExceptions(false);
$frontController->setBaseUrl('http://hiring.local');
$frontController->setControllerDirectory('/application/controllers');

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);

$application->bootstrap()->run(); 
```

为什么我收到此错误我在第 146 行查看了 loader.php 在该行有

`include_once($filename)`所以错误源于那里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:56:09.257

这里有很多问题：

*   `application/models`，`application/controllers`并且`application/views/scripts`不应该在包含路径上。
*   `$loader->registerNamespace('hiring');`可能应该是`$loader->registerNamespace('Hiring_');`（尽管您包含的代码示例中没有迹象表明您正在使用此命名空间）。
*   `$loader->setFallbackAutoloader(true);`可能不需要（您包含的代码示例中没有任何迹象表明您需要它）。
*   `Zend_Loader::loadClass`应删除所有行。自动加载器的全部意义在于您不需要自己要求或加载类
*   至少应将前端控制器配置移至引导程序类

但是这些都不会影响您报告的问题。标准的自动加载器设置只会加载名称可以直接映射到文件系统的类（通过将下划线转换为路径中的斜线，例如类`Zend_Db_Table`将存在于`library/Zend/Db/Table.php`）。这个类`Application_Model_Hiring`不适合这个模型，如果你也想使用这个命名方案，你还需要设置一个资源自动加载器，它将类名的最后一部分映射到`application/`.

将以下方法添加到您的引导程序类：

```
protected function _initAutoloader()
{
    $autoloader = Zend_Loader_Autoloader::getInstance();
    $autoloader->registerNamespace('Hiring_');

    $applicationResourceAutoloader = new Zend_Loader_Autoloader_Resource(array(
        'basePath' => APPLICATION_PATH,
        'namespace' => 'Application'
    ));
    $autoloader->pushAutoloader($applicationResourceAutoloader);

    return $autoloader;
} 
```

这设置了标准自动加载器 ( `$autoloader = Zend_Loader_Autoloader::getInstance();`)，它将自动加载 Zend Framework 类。然后它会注册一个命名空间“Hiring”，只有在库文件夹中包含以此名称开头的类时才需要该命名空间。

然后它会创建一个名为“Application”的单独资源自动加载器，它将从应用程序文件夹加载类，包括模型。假设类`Application_Model_Hiring`是在它定义的，`application/models/Hiring.php`那么它应该可以工作。

更多信息请访问[http://framework.zend.com/manual/1.12/en/zend.loader.autoloader-resource.html](http://framework.zend.com/manual/1.12/en/zend.loader.autoloader-resource.html)

# objective-c - iOS 6.1 AudioQueueStop，AudioQueueDispose 错误

> ID：14331888
> 
> 赞同：4
> 
> 时间：2013-01-15T05:54:56.023
> 
> 标签：objective-c, ios6, audioqueue

为我的 iOS 应用程序使用音频队列，我在 iOS6.1 上的测试遇到了一些问题，尽管它在 iOS6 上运行良好。

问题是**AudioQueueStop**和**AudioQueueDispose**不会立即返回，或者有时它们会崩溃。

像这样：

```
if (_audioQueue)
{
  auto err = AudioQueueStop(_audioQueue, true);   // Some delay before return
  for (int i = 0; i < kNumberAudioQueueBuffers; i++) {
    AudioQueueFreeBuffer(_audioQueue, _audioQueueBuffer[i]);
  }    
  err = AudioQueueDispose(_audioQueue, true);    // This also has delay
  _audioQueue = nil;
} 
```

这不是在主线程上调用的，而是在另一个线程上调用的，但是**AudioQueueNewoutput**和**AudioQueueStart**等其他东西也在该线程上调用。

实际上，我尝试运行一个使用 AudioQueue 作为测试的简单应用程序，在这种情况下它运行良好（在 iOS6 和 6.1 上）。所以我的代码中的其他部分可能会影响，但我无法弄清楚。

有没有人遇到过类似的问题并希望得到解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:53:07.237

我在 AudioQueueSetProperty() 和 kAudioQueueProperty_MagicCookie 上看到了类似的问题。*我的应用程序在每次*调用它时都会崩溃，但它在 iOS 6.0 及更早版本上运行良好。我在想 Apple 在 6.1 中搞砸了音频队列的实现。

# vb.net - vb.net 2010中椭圆的单击事件

> ID：14331890
> 
> 赞同：0
> 
> 时间：2013-01-15T05:55:02.703
> 
> 标签：vb.net, graphics, ellipse

我在 vb.net 的图片框中创建一个**椭圆**，我希望如果我点击这个椭圆，它将打开另一个表单。图片框包含一张地图的图像，我只是简单地在地图中找到的建筑物上画了一个椭圆，我猜你知道它会向我显示有关该建筑物的信息......

注意：如果您有更简单的方法在 vb.net 中**创建交互式地图**，其中有关地图的信息和图像存储在 mysql 数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:35:45.817

这是一个示例应用程序，演示了使用该区域来计算一个点是否落在椭圆内：

注意：创建一个新的 WinForms 应用程序并将代码粘贴到`Form1.vb`：

```
Public Class Form1
    Private ellipse_center As Point

    Private A As Integer = 140
    Private B As Integer = 90

    Private isInsideEllipse As Boolean

    Private canvasRect As Rectangle

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Me.SetStyle(ControlStyles.AllPaintingInWmPaint, True)
        Me.SetStyle(ControlStyles.UserPaint, True)
        Me.SetStyle(ControlStyles.OptimizedDoubleBuffer, True)
        Me.SetStyle(ControlStyles.ResizeRedraw, True)

        Me.Font = New Font(Me.Font.FontFamily, 12, FontStyle.Bold)
    End Sub

    Private Sub Form1_MouseMove(sender As Object, e As MouseEventArgs) Handles Me.MouseMove
        isInsideEllipse = (e.Location.X - ellipse_center.X) ^ 2 / (A / 2) ^ 2 + (e.Location.Y - ellipse_center.Y) ^ 2 / (B / 2) ^ 2 <= 1
        Me.Invalidate()
    End Sub

    Private Sub Form1_Paint(sender As Object, e As PaintEventArgs) Handles Me.Paint
        Dim g As Graphics = e.Graphics

        Using p As New Pen(If(isInsideEllipse, Brushes.Blue, Brushes.Red), 2)
            g.DrawEllipse(p, ellipse_center.X - A \ 2, ellipse_center.Y - B \ 2, A, B)
        End Using

        g.DrawString("Pointer is" + If(isInsideEllipse, " ", " not ") + "inside the ellipse", Me.Font, Brushes.Black, 5, 5)
    End Sub

    Private Sub Form1_Resize(sender As Object, e As EventArgs) Handles Me.Resize
        canvasRect = Me.DisplayRectangle
        canvasRect.Inflate(-1, -1)

        ellipse_center = New Point(canvasRect.Width / 2, canvasRect.Height / 2)
    End Sub
End Class 
```

* * *

顺便说一句，我在这里找到了正确的公式：[检查点是否在椭圆内@数学](https://math.stackexchange.com/questions/76457/check-if-a-point-is-within-an-ellipse)

# pandas - 重复列 Pandas 数据框切片问题

> ID：14331891
> 
> 赞同：0
> 
> 时间：2013-01-15T05:55:04.187
> 
> 标签：pandas

我有一个`df`带有重复列的数据框：（我需要重复的列数据框，它将作为参数传递给 matplotlib 进行绘图，因此列的名称和内容可能相同或不同）

```
>>> df
                                         PE     RT    Ttl_mkv      PE
STK_ID    RPT_Date                                  
11_STK79  20130115  41.932  2.744   3629.155  41.932
21_STK58  20130115  14.223  0.048  30302.324  14.223
22_STK229 20130115  22.436  0.350  15968.313  22.436
23_STK34  20130115 -63.252  0.663   4168.189 -63.252 
```

我可以通过 : 获得第二`df[df.columns[1]]` 列

```
>>> df[df.columns[1]]
STK_ID     RPT_Date
11_STK79   20130115    2.744
21_STK58   20130115    0.048
22_STK229  20130115    0.350
23_STK34   20130115    0.663 
```

但如果我想得到第一列`df[df.columns[0]]`，它将给出：

```
>>> df[df.columns[0]]
                                   PE      PE
STK_ID    RPT_Date                
11_STK79  20130115  41.932  41.932
21_STK58  20130115  14.223  14.223
22_STK229 20130115  22.436  22.436
23_STK34  20130115 -63.252 -63.252 
```

哪一个有两列？这将使我的应用程序失败，该应用程序只需要第一列，但 Pandas 给出了第一列和第四列！它是一个错误还是故意设计的？如何绕过这个问题？

我的熊猫版本是 0.8.1 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:05:01.687

我真的不明白为什么你需要两个具有相同名称的列，避免它可能是最好的。

但要回答您的问题，这将只返回 1 个“PE”列：

```
df.T.drop_duplicates().T.PE

STK_ID     RPT_Date
11_STK79   20130115    41.932
21_STK58   20130115    14.223
22_STK229  20130115    22.436
23_STK34   20130115   -63.252
Name: PE 
```

或者：

```
df.T.ix[0].T 
```

# eclipse - Eclipse 和 Tomcat 7

> ID：14331897
> 
> 赞同：1
> 
> 时间：2013-01-15T05:56:22.170
> 
> 标签：eclipse, tomcat

所以我有一个应用程序，用户可以在其中上传他们的文档。问题是每次我重新部署应用程序（使用 Eclipse）时，这个文件夹都会被工作区中的内容覆盖。

如何告诉 Eclipse 在部署时忽略某些文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:54:43.870

**不要将数据/内容放入您的应用程序**中。修改您的逻辑以将文档写入应用程序之外的路径。像：

```
 Application Path : C:\App\app.war

   Directory path : C:\App\documents 
```

# ios - 跳过单例对象的初始化？

> ID：14331915
> 
> 赞同：0
> 
> 时间：2013-01-15T05:58:10.217
> 
> 标签：ios, objective-c, singleton, init

我在我的应用程序中实现了一个单例，但是当我在视图控制器之间切换时遇到了问题。

我的应用程序从一个视图控制器 MainMenu 开始，然后在选择菜单时切换到 Game 视图控制器。我在 Game VC 中有一个单例类，它是游戏的对象管理器（称为 World）。它根据 MainMenu 中的菜单选择加载内容。我可以加载并退出 MainMenu VC。单身人士工作正常。当我再次从 MainMenu 中选择（从 MainMenu VC 到 Game VC）时，我的应用程序崩溃导致 NSAssert 阻止单例 World 再次分配，这是有意的。

如何在不尝试重新初始化我的单例的情况下切换回 Game VC？

本质上，我想跳过`[[world alloc] init]`我的 Game VC 的 init 方法中的行。我无法弄清楚如何正确地做到这一点......它需要能够在第一次（当 World 不存在时）或任何后续时间（当 World 已经作为单例存在时）被处理。我已经尝试过`if (!world)`了，但这不起作用。

这也引出了一个问题……我是否在正确的地方实现了我的单例？我应该把它放在 MainMenu 中吗？我只是想避免当我在两个 VC 之间切换时尝试重新初始化/重新分配单例。

如果这有帮助，我将通过使用`[self.view removeFromSuperview];` 是否应该以不同的方式退出 Game VC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:49:45.720

如果我正确理解了这个问题，您想知道如何创建单例类吗？最近比较常用的方式是使用grand-central-dispatch，如下：

```
+ (MyViewController*)shared
{
    static dispatch_once_t onceToken;
    static MyViewController* instance;

    dispatch_once(&onceToken, ^
    {
        instance = [[[self class] alloc] init];
    });
    return instance;
} 
```

然后，您可以使用以下方式访问实例：

```
[MyViewController shared]; 
```

在 grand-central-dispatch 之前，技术是在类上放置一个静态实例，并在调用共享访问器时检查它是否为 nil。并且访问器需要用 @synchronized(self) 包装以确保线程安全。GCD 方式已被证明表现得更好一些。

话虽如此，我建议您使用带有意志的单例。对为什么它们被视为反模式进行一些研究，并研究依赖注入作为替代方案。

**依赖注入与单例**

单例的问题在于它们会导致紧密耦合。假设您正在构建一个航空公司预订系统。您的预订控制器可能会使用：

```
id<FlightsClient> 
```

在控制器中获取它的常用方法如下：

```
_flightsClient = [FlightsClient sharedInstance]; 
```

为了使用单例测试一个类，您现在必须同时测试单例，这可能会变得很棘手，尤其是当您的应用程序变得更加复杂时。想象一下测试 A 类，依赖于 B 类，依赖于 C 类，依赖于.... 没什么好玩的！

另一种方法是使用依赖注入，这意味着使用初始化程序或属性设置器将预订客户端传递给预订控制器。您可以手动执行此操作，也可以使用库。如果您手动执行它仍然可以声明单例，尽管可以说您不需要，因为顶级程序集类可以保留实例。

通过对单例使用这种替代方法，类将具有松散耦合，并且易于测试和维护。（并且使用依赖注入，您将拥有一个同样花哨的名称；））

我写了一个依赖注入库，基于 Spring：[https ://github.com/jasperblues/spring-objective-c](https://github.com/jasperblues/spring-objective-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:33:48.970

正如我所想的那样，我确实可以通过将单例初始化向上移动到 MainMenu 视图控制器来解决这个问题。在我的设计中，`init`该 VC 仅在应用程序启动时调用一次，而`init`我的 Game VC 中的自定义方法在我每次切换到它时都会被调用。

不确定这是否是我应该使用的最佳设计，但它现在有效。

# css - 在 Web 应用程序（基于 Java）的用户列表中处理编辑用户的常用方法是什么？

> ID：14331917
> 
> 赞同：0
> 
> 时间：2013-01-15T05:58:19.277
> 
> 标签：css, html, forms, jsp, jstl

每个带有用户的 Web 应用程序都需要执行一些可以从用户列表中调用的操作。像这样：

```
Login   Name    Lastname   Options
user1   name1   lastname1  ViewProfile Follow Ban
user2   name2   lastname2  ViewProfile Follow Ban
user3   name3   lastname3  ViewProfile Follow Ban 
```

用户列表是从数据库中输出的 javabean 生成的。想像我们可以对用户进行的用户列表、他们的属性和选项的最简单方法是表格。该任务是对特定用户调用操作（ViewProfile、Follow、Ban、...）的实现。调用一个动作会将控制权转移到适当的 servlet。（所以我有 ViewProfile、Follow 用户、Ban 用户 ...）的 servlet。Servlet 只是准备数据并将其转发到某个 jsp 页面。这里没有问题。问题可能在于应该查看哪些用户配置文件或登录用户应该关注哪些用户（只需提供有关 user_id 的 servlet 信息）。

我发现了两种可以使用的方法（也许还有更多）：
1）使用 ViewProfile 并且表格将真正表示为 html 中的表格。2）对每个动作使用表单。在这种情况下，对于树用户，我将有 9 个表单。每个表单都将输入 type="hidden" 值设置为 user_id 用于传输 user_id 和提交按钮。方法会贴出来。

解决方案的优缺点： 1）易于编写。但是参数在url中，方法只能是get。2）我可以使用方法post。但我不能像第一种情况那样使用表格，因为标签内不可能有表格。

将第二种情况格式化为表格（如第一种情况）的最佳方法是什么？
或者，如果有比我的两个选项更好的方法来解决这个问题，那是什么？

我使用 Java 7、Tomcat 7、Servlets、JSP 和 jslt、html5 和 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:57:47.570

在您的三个操作（*ViewProfile*、*Follow*、*Ban*）中，第一个听起来像是 GET 的候选者，而另外两个听起来像 POST 操作。

对于 POST 到*Follow*和*Ban* servlet（和*ViewProfile*，如果需要），您可以使用表格之外的表格，这些表格是通过 JavaScript 在*单击*事件上填充和提交的。

```
<form id="followForm" action="...follow.do" method="post">
    <input id="followUserId" type="hidden" value="-1" />
</form>

<form id="banForm" action="...ban.do" method="post">
    <input id="banUserId" type="hidden" value="-1" />
</form> 
```

将*单击*侦听器附加到设置隐藏字段并提交表单的链接（通过类名）。

```
$(".followLink").click(function() {
    $("#followUserId").val($(this).prev().prev().text()); // navigate the table to get the user login id
    $("#followForm").submit();
}); 
```

请注意，为了简单起见，此解决方案使用 jQuery，但这也可以在没有外部 JavaScript 库的情况下使用*onclick*和更多工作来完成。

# sql - 在过程中定义模式

> ID：14331921
> 
> 赞同：2
> 
> 时间：2013-01-15T05:58:38.950
> 
> 标签：sql, sql-server, sql-server-2008-r2

我正在为零售店创建模型数据库设计。我正在尝试创建一个初始化数据库模式的过程。

我想要实现的是从过程内部创建一个新模式。我的代码如下：

```
begin trans

create procedure Retail_Fill
as
    create schema Retail_Test;  
    go
    create table Retail_Test.customer(
        cust_id int,
        cust_name varchar(30),
        cust_phone int,
        cust_add varchar(50),
        constraint pk_customer primary key (cust_id)
    ); 
```

在这里，该`create schema`语句本身可以正常工作。但是在程序内部它给出了一个错误：

> Invaid Syntax!CREATE SCHEMA 必须是批处理中的唯一语句

我想知道是否有可能实现这一目标。如果是，那么我做错了什么或错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:32:36.440

[CREATE SCHEMA](http://msdn.microsoft.com/en-us/library/ms189462.aspx?ppud=4)必须作为单独的批处理执行。SQL Server Management Studio 中的批次由`GO`. 在存储过程中情况并非如此。您可以通过将[EXECUTE](http://msdn.microsoft.com/en-us/library/ms188332.aspx)用于需要在自己的批次中的语句来执行您想要的操作，例如`CREATE SCHEMA`or `CREATE PROCEDURE`。

```
create procedure Retail_Fill
as
exec('create schema Retail_Test');

create table Retail_Test.customer(
    cust_id int,
    cust_name varchar(30),
    cust_phone int,
    cust_add varchar(50),
    constraint pk_customer primary key (cust_id)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:22:22.273

正如 Mikael Eriksson 所说，创建 DB Schema 应该在单个脚本文件中，或者您可以配置一些将创建您的模式的部署。所以最好避免在过程中创建模式。

当您必须为每个客户动态设计模式时（例如），您可以拥有这些内部过程。

# ios - 如何在 UITableView 中获取视频的文件路径？（tmp目录）

> ID：14331923
> 
> 赞同：0
> 
> 时间：2013-01-15T05:58:52.587
> 
> 标签：ios, objective-c, uitableview, mpmovieplayercontroller

我在 UITableView 中显示 tmp 目录的内容，但无法获取每个单元格的文件路径。

按下单元格时，我的应用程序应该使用 MPMoviePlayer 播放文件，但不是。

这是我到目前为止所拥有的：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *tmpDirectory = NSTemporaryDirectory();
fileList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:tmpDirectory error:nil]; //nsarray

NSString *movieURL = [fileList objectAtIndex:indexPath.row];

NSURL *url = [NSURL URLWithString:movieURL];

_moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:url];

[self presentModalViewController:_moviePlayerViewController animated:YES];
} 
```

NSlog 给了我视频的名称，但不是路径。我觉得我因为睡眠不足而过度思考这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:09:30.007

当你使用这个：

```
NSString *movieURL = [fileList objectAtIndex:indexPath.row]; 
```

它只会返回临时目录中的文件名，所以使用这个：

```
NSString *movieURL = [tmpDirectory stringByAppendingPathComponent:[fileList objectAtIndex:indexPath.row]];

NSURL*url = [NSURL fileURLWithPath:movieURL]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:16:31.517

更改您的代码，例如：

```
 NSString *tmpDirectory = NSTemporaryDirectory();
    NSLog(@"%@",tmpDirectory);
    NSArray *fileList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:tmpDirectory error:nil]; //nsarray

    NSString *movieURL = [fileList objectAtIndex:indexPath.row];
    NSString *path=[tmpDirectory stringByAppendingPathComponent:movieURL]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-08T11:31:27.753

```
func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
    let tmpDirectory: String = NSTemporaryDirectory()
    print("\(tmpDirectory)")
    var fileList: [Any]? = try? FileManager.default.contentsOfDirectory(atPath: tmpDirectory)
    //nsarray
    let movieURL: String? = (fileList?[indexPath.row] as? String)
    let path: String = URL(fileURLWithPath: tmpDirectory).appendingPathComponent(movieURL!).absoluteString
    print(path)
} 
```

# html - 是否可以使用 CSS 中的 :active 选择器在点击时显示 div？

> ID：14331924
> 
> 赞同：3
> 
> 时间：2013-01-15T05:58:55.853
> 
> 标签：html, css

我正在寻找`div`在`click`. 目标是只使用**纯 CSS**，不使用 jQuery。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-14T08:42:27.590

`**[Working FIDDLE Demo](http://jsfiddle.net/mojtaba/6jdUW/5/)**`

考虑一下你想要这样的东西：

![在此处输入图像描述](../Images/9b6eca7a198d8d97888e916380590a3d.png)

* * *

我们尽可能简单地编写我们的标记。一个元素为`container`，一个元素为我们`link`，另一个元素为`popup`：

```
<!-- [container] -->
<div class="link-with-popup">

    <!-- link -->
    <div class="link">CSS</div>

    <!-- [popup] -->
    <div class="popup">
        <div class="box">CSS Description</div>
    </div>
    <!-- [/popup] -->

</div>
<!-- [/container] --> 
```

这是图中我们的层结构：

![在此处输入图像描述](../Images/35d280e695ab3379ecc23df862847aa8.png)

* * *

## 容器

让我们为我们的容器编写 CSS。

```
.link-with-popup {
    /* for visualizing */
    background: yellow;

    /* we need relative, because childs are absolute */
    position: relative;

    margin-bottom: 10px;
    height: 30px;
    width: 400px;
} 
```

*   `[!]`请注意，我们制作了我们的容器`relative`。因为孩子们将处于`absolute`模式中。

![在此处输入图像描述](../Images/118d9502c95fdcb3ea2fcd1345f42913.png)

* * *

## 关联

我们从左边创建我们`link`的绝对元素，如上图所示。

```
.link {
    background: blue;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 100px;
    z-index: 10;
} 
```

![在此处输入图像描述](../Images/1ded106835ff366578cbddfbd839458c.png)

* * *

## 弹出

`popup`元素的尺寸与容器**相同**，因此我们将所有`top`, `left`, `right`,`bottom`属性设置为`0`。

```
.popup {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: green;
        z-index: 20;
    } 
```

*   `[!]`注意`z-index`of `popup`element 必须大于`link`element。

![在此处输入图像描述](../Images/8abe97fca798f8ddd8dfcf16a704ee20.png)

```
.popup {
        /* we won't show the popup yet */
        display: none;
} 
```

现在，我们将得到这个结果（[在 jsFiddle 上查看](http://jsfiddle.net/mojtaba/6jdUW/)）：

![在此处输入图像描述](../Images/302bca882a64313ddacc9207b935f260.png)

* * *

现在我们想要`click`我们的链接。这必须通过`:active`CSS 中的伪选择器来完成。但是我们必须如何展示`poup`呢？我们**必须**通过`link`. 我们`+`在 CSS 中使用选择器：

```
.link:active + .popup {
    display: block;
} 
```

[在jsFiddle](http://jsfiddle.net/mojtaba/6jdUW/1/)上查看结果。但问题是当用户意识到鼠标时，弹出窗口会消失（因为它`display`设置为`none`）。因此，我们`:hover`为 the 设置规则`popup`并制作它`block`。

```
.popup:hover {
    display: block;
} 
```

检查[jsFiddle 演示](http://jsfiddle.net/mojtaba/6jdUW/2/)。现在我们已经足够接近了。唯一的问题是`popup`元素，**隐藏**我们的`link`. 但这没关系，因为我们不会`background`为我们的`popup`（它将是`transparent`）设置。

* * *

## 文本

对于想要`text`的`popup`元素，我们设置了以下规则：

```
.popup .box {
    position: absolute;

    /* note that we make a gap from left to don't hide the link */
    left: 130px;
    top: 0;
    right: 0;
    bottom: 0;
    background: #505050;
} 
```

检查[jsFiddle 演示](http://jsfiddle.net/mojtaba/6jdUW/3/)。现在我们拥有了我们需要的所有东西。

![在此处输入图像描述](../Images/fe429bb9b7f060366fbb65f83f955d53.png)

* * *

现在是时候制作我们的`popup`元素了`transparent`（通过设置`background`as`transparent`或简单地删除`background: green;`规则）：

```
.popup {
    background: transparent;
} 
```

![在此处输入图像描述](../Images/dd4985f75aad313a2efcaee195459b1e.png)

* * *

这是最终的[jsFiddle 结果](http://jsfiddle.net/mojtaba/6jdUW/4/)。如果你给它添加一些额外的 CSS，它会更时尚。[我创造了这样的东西。](http://jsfiddle.net/mojtaba/6jdUW/5/)

需要记住的一些重要注意事项：

*   `link`在最终结果中， （蓝色）和`popup`（灰色）之间存在差距。但事实是，灰色元素不是我们的`popup`。它是容器的`popup`子元素，我们的弹出窗口是容器上的 100% 宽度和高度元素。

`**[Working FIDDLE Demo](http://jsfiddle.net/mojtaba/6jdUW/5/)**`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T07:11:09.337

另一种方法是使用 :target 属性（仅适用于现代浏览器）。

这是一个 qucik [DEMO](http://jsfiddle.net/vhzve/)，其中我通过应用隐藏了 div，`opacity: 0;`当您单击链接时，div 更改为`opacity: 1;`链接和 div 使用 url 中的哈希匹配。

这是我的示例中的代码。

HTML

```
<a href="#pop">Click me</a>
<br />
<div id="pop"></div> 
```

CSS

```
#pop {
  width: 100px;
  height: 100px;
  background: #000;
  opacity: 0;
}

#pop:target {
  opacity: 1;
} 
```

不过也有一些副作用。浏览器将跳转/向下滚动（不确定是否可以防止这种情况发生？）到匹配的 div，由于我们在 url 中使用哈希，它会影响浏览器历史记录，如上所述，它仅适用于现代浏览器.

**编辑**如果您想研究纯 CSS 点击事件的其他黑客/技巧，这是一个很好的帖子 - [http://tympanus.net/codrops/2012/12/17/css-click-events/](http://tympanus.net/codrops/2012/12/17/css-click-events/)

# ruby-on-rails - 如何仅在不存在的情况下创建记录，避免重复并且不引发任何错误？

> ID：14331926
> 
> 赞同：8
> 
> 时间：2013-01-15T05:59:08.803
> 
> 标签：ruby-on-rails, postgresql, transactions, rails-activerecord, upsert

众所周知，`Model.find_or_create_by(X)`实际上是这样的：

1.  按 X 选择
2.  如果没有找到 -> 由 X 创建
3.  返回记录（找到或创建）

并且步骤 1 和 2 之间可能存在竞争条件。为避免 X 在数据库中重复，应在 X 的字段集上使用唯一索引。但如果应用唯一索引，则其中一个竞争事务将失败异常（尝试创建 X 的副本时）。

如何实现`#find_or_create_by`永远不会引发任何异常并始终按预期工作的“安全版本”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-07T09:59:31.067

答案在[文档中](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-find_or_create_by)

> 这是否是一个问题取决于应用程序的逻辑，但在行具有 UNIQUE 约束的特定情况下，可能会引发异常，只需重试：
> 
> ```
> begin
>   CreditAccount.find_or_create_by(user_id: user.id)
> rescue ActiveRecord::RecordNotUnique
>   retry
> end 
> ```

* * *

**解决方案 1**

您可以在您的模型中实现以下内容，或者如果您需要保持 DRY，则可以在关注中实现以下内容

```
def self.find_or_create_by(*)
  super
rescue ActiveRecord::RecordNotUnique
  retry
end 
```

用法：`Model.find_or_create_by(X)`

* * *

**解决方案 2**

或者，如果您不想覆盖`find_or_create_by`，您可以将以下内容添加到您的模型中

```
def self.safe_find_or_create_by(*args, &block)
  find_or_create_by *args, &block
rescue ActiveRecord::RecordNotUnique
  retry
end 
```

用法：`Model.safe_find_or_create_by(X)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-07T03:44:27.653

这是“SELECT-or-INSERT”的反复出现的问题，与流行的问题密切相关`UPSERT`。即将到来的[Postgres 9.5 提供了新`INSERT .. ON CONFLICT DO NOTHING | UPDATE`](http://www.postgresql.org/docs/9.5/interactive/sql-insert.html#SQL-ON-CONFLICT)的为每个提供干净的解决方案。

### Postgres 9.4 的实现

现在，我建议使用两个服务器端 plpgsql 函数来实现这种防弹实现。只有帮助函数`INSERT`实现了更昂贵的错误捕获，并且只有在`SELECT`不成功时才会调用。

这***永远不会***因为唯一的违规而引发异常，并且***总是***返回一行。

假设：

*   假设一个表以`tbl`一列`x`数据类型命名`text`。相应地适应您的情况。

*   `x`被定义`UNIQUE`或`PRIMARY KEY`。

*   您想从基础表 ( `return a record (found or created)`) 返回整行。

*   在许多情况下，该行已经存在。（不一定是大多数情况，`SELECT`比 . 便宜很多`INSERT`。）否则尝试第一个可能更有效`INSERT`。

辅助功能：

```
CREATE OR REPLACE FUNCTION f_insert_x(_x text)
  RETURNS SETOF tbl AS
$func$
BEGIN
   RETURN QUERY
   INSERT INTO tbl(x) VALUES (_x) RETURNING *;

EXCEPTION WHEN UNIQUE_VIOLATION THEN  -- catch exception, no row is returned
   -- do nothing
END
$func$ LANGUAGE plpgsql; 
```

主功能：

```
CREATE OR REPLACE FUNCTION f_x(_x text)
  RETURNS SETOF tbl AS
$func$
BEGIN
   LOOP
      RETURN QUERY
      SELECT * FROM tbl WHERE x = _x
      UNION  ALL
      SELECT * FROM f_insert_x(_x)  -- only executed if x not found
      LIMIT  1;

      EXIT WHEN FOUND;       -- else keep looping
   END LOOP;
END
$func$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM f_x('foo'); 
```

[**SQL Fiddle**演示。](http://sqlfiddle.com/#!15/7778a/1)

该功能基于我在此相关答案中制定的内容：

*   **[函数中的 SELECT 或 INSERT 是否容易出现竞争条件？](https://stackoverflow.com/questions/15939902/is-select-or-insert-in-a-function-prone-to-race-conditions/15950324#15950324)**

那里有详细的解释和链接。

我们还*可以*创建一个具有多态返回类型和动态 SQL 的通用函数，以适用于任何给定的列和表（但这超出了这个问题的范围）：

*   [重构 PL/pgSQL 函数以返回各种 SELECT 查询的输出](https://stackoverflow.com/questions/11740256/refactor-a-pl-pgsql-function-to-return-the-output-of-various-select-queries/11751557#11751557)

`UPSERT`Craig Ringer 在此相关答案中的基础知识：

*   [如何在 PostgreSQL 中进行 UPSERT（合并、插入……重复更新）？](https://stackoverflow.com/questions/17267417/how-do-i-do-an-upsert-merge-insert-on-duplicate-update-in-postgresql)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T06:30:21.877

`find_or_create_by`在rails中有一个方法叫

此[链接将帮助您更好地理解它](http://maxivak.com/how-to-pass-multiple-attributes-to-find_or_create_by-in-rails-3-the-ruby-way/)

但就我个人而言，我更喜欢先找到，如果没有找到，然后创建，（我认为它有更多的控制权）

```
Ex:

user = User.find(params[:id])
#User.create(#attributes) unless user 
```

高温高压

# blackberry - 在黑莓中自定义字体问题

> ID：14331930
> 
> 赞同：1
> 
> 时间：2013-01-15T05:59:26.100
> 
> 标签：blackberry, java-me, fonts, styles

在应用程序中，我必须使用自定义字体。首先，我创建了扩展 VerticalFieldManager 类的类。在这个类中，我想使用自定义字体。我有 TTF 文件（名称是 AGENCYB.TTF）。我将此文件保存在 res/img 文件夹中。要加载此文件，我使用以下代码：

```
if (FontManager.getInstance().load("AGENCYB.TTF", "MyFont",
        FontManager.APPLICATION_FONT) == FontManager.SUCCESS)
{
   System.out.println("**************************IF SUCCESS*******");
   try
   {
      FontFamily typeface = FontFamily.forName("MyFont");
      myFont = typeface.getFont(Font.BOLD, 50);
      label2.setFont(myFont);
   }
   catch (ClassNotFoundException e)
   {
      System.out.println(e.getMessage());
   }
} 
```

但它不会改变标签字段的字体。我使用此链接实现了代码：http: [//docs.blackberry.com/en/developers/deliverables/18095/BlackBerry_Java_SDK-Development_Guide--1239696-0730090812-001-6.0-US.pdf](http://docs.blackberry.com/en/developers/deliverables/18095/BlackBerry_Java_SDK-Development_Guide--1239696-0730090812-001-6.0-US.pdf)

任何想法都会有很大帮助。

谢谢

****** *** ** *** ** *******编辑******** ****** ***** ****** ******* ****** ******* ******** ***_*****

 *****```
if (FontManager.getInstance().load("AGENCYB.TTF", "AGENCYB", FontManager.APPLICATION_FONT) == FontManager.SUCCESS) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:23:23.023

首先，[这是我用来加载自定义字体的 BlackBerry 教程](http://docs.blackberry.com/en/developers/deliverables/17971/Load_and_use_a_custom_font_899948_11.jsp)

其次，在 API 文档所说的任何返回值中，我都没有看到返回代码 8 `FontManager.load()`。 `SUCCESS`是 0 的值，所以你没有*成功*调用`load()`.

[http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/FontManager.html](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/FontManager.html)

> **如果字体加载成功，则返回**：
> FontManager.SUCCESS。
> FontManager.FONTS_ARRAY_FULL 如果加载的字体太多。
> FontManager.MISSING_TYPEFACE_NAME 如果字体名称无效。如果字体名称重复，则 FontManager.DUPLICATE_NAME。
> FontManager.DUPLICATE_DATA 如果字体数据是重复的。
> FontManager.NO_FONT_DATA 如果没有找到字体数据。
> 如果字体数据的大小超过 60k，则 FontManager.EXCEEDS_LIMIT。
> FontManager.MISS_RESOURCE 如果找不到字体文件。
> FontManager.FAILED_TO_LOAD_FILE 如果字体数据无效或字体格式无效。

当我在 OS 5.0 和 7.1 上的调试器中运行时，我看到它`-8`等于`FontManager.DUPLICATE_NAME`，但没有看到任何代码等于`8`。

另外，您是否自己生成了这个字体文件（AGENCYB.TTF）？因为您的代码要求在 AGENCYB.TTF 文件中使用名为**MyFont的字体。**除非有人编写*Hello World*程序（和自制的 .ttf 文件），否则我不会期望字体实际上被命名为**MyFont 。**

 *如果这是自定义字体，由 3rd-party 字体库提供，或者从其他人那里购买，我希望字体名称不是**MyFont**，这就是您可能复制代码的 BlackBerry 示例中的字体名称从。

因此，请仔细检查，如果它仍然无法正常工作，请告诉我们。

* * *

**更新：**因为看起来你`"AGENCYB"`在代码中使用字符串时也会失败，我认为问题在于你使用了错误的字体名称。即使该文件是`AGENCYB.TTF`，我敢打赌该文件*中的字体名称***不是** `AGENCYB`。这与您在 Windows 下找到的文件相同`C:\Windows\fonts`吗？如果是这样，您可以使用 Windows（至少 7）查看字体文件。

只需在 Windows 资源管理器中双击 .ttf 文件，它就会给您一个预览，显示正确的字体名称。 **该**名称是您在**两个**java 调用中使用的名称，其中示例代码具有`"MyFont"`. 在这种情况下，您会看到字体名称可能是`"Agency FB"`. 试试看。

![在此处输入图像描述](../Images/b6f922ed8362e3d74031a6e1f3cf037a.png)

* * *

**更新 2：** 我还尝试从可以在Windows 7 机器上找到的文件中加载**Agency FB**字体。这个确切的代码在 5.0 8900 模拟器上为我工作：`AGENCYR.TTF``C:\windows\Fonts\AGENCYR.TTF`

```
 int result = FontManager.getInstance().load("AGENCYR.TTF", "Agency FB", FontManager.APPLICATION_FONT);

  if (result == FontManager.SUCCESS)
  {
     try 
     {
        FontFamily typeface = FontFamily.forName("Agency FB");
        Font myFont = typeface.getFont(Font.PLAIN, 50);
        helloWorld.setFont(myFont); 
     }
     catch (ClassNotFoundException ex) 
     {
     }
  } 
```

![在此处输入图像描述](../Images/5d8df5371d493aad18699cd025cdf5ff.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:51:45.527

确切地说，您应该检查所需的字体是否已经加载，因此它会为您提供 -8 或成功的 int ，仅此而已！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T08:50:18.553

LabelField lbl = new LabelField("这是测试标签");

// 如果字体已经加载，那么使用下面的

```
 if(FontManager.getInstance().load("TickingTimebombBB_ital.ttf", "Ticking Timebomb BB", FontManager.APPLICATION_FONT) == FontManager.DUPLICATE_NAME){
         Logger.debug("---font already loaded-----");
            try 
            {
                System.out.println("---load once more---");
                FontFamily typeface = FontFamily.forName("Ticking Timebomb BB");
                Font myFont = typeface.getFont(Font.PLAIN, 80);
                lbl.setFont(myFont); 
            }
            catch (ClassNotFoundException e) 
            {
                Logger.error("---error-----"+e.getMessage());
            }
    } 
```

如果字体尚未加载，则使用以下

```
else if(FontManager.getInstance().load("TickingTimebombBB_ital.ttf", "Ticking Timebomb BB", FontManager.APPLICATION_FONT) == FontManager.SUCCESS) {
            try 
            {
                Logger.debug("---load first time---");
                FontFamily typeface = FontFamily.forName("Ticking Timebomb BB");
                Font myFont = typeface.getFont(Font.PLAIN, 80);
                lbl.setFont(myFont); 
            }
            catch (ClassNotFoundException e) 
            {
                Logger.error("---error-----"+e.getMessage());
            }

    } 
```******

# php - MySQL通过时间间隔搜索

> ID：14331936
> 
> 赞同：2
> 
> 时间：2013-01-15T06:00:32.207
> 
> 标签：php, mysql

系统就是这样。导师提供他们的可用性（周一 - 周日）和他们当天可用的时间范围（0700 - 1400）（即：上午 7 点 - 下午 2 点）。

我试图找出存储和搜索这些信息以找到可用导师的最佳方法。只需要在每日系统上进行搜索（即：一周中的某一天 - 周一、周二、周三等）。

我计划的基础设施：

```
//Tutor Availability
---------------------------------------------------------------------------
  tutorID  |  monday   |  tuesday  | wednesday  | thursday   |   friday   |
---------------------------------------------------------------------------
   27      | 0700-1200 |   NULL    | 1400-1800  |  NULL      |    NULL    |
---------------------------------------------------------------------------
   35      |   NULL    | 1400-1600 |    NULL    |  NULL      | 1100-1900  |

//Scheduled tutor sessions
------------------------------------
  tutorID  |    day    |  time     | 
------------------------------------
   27      |  monday   | 0700-0900 | 
------------------------------------
   35      |  friday   | 1300-1500 | 
```

查询：`SELECT tutorid FROM tutoravailability WHERE 'monday'=`... 在 0900-1100 之间可用，并且不在预定的导师课程中。

我一直在寻找如何在 MySQL 中搜索（和存储）这些时间间隔。这是存储一天 24 小时的时间间隔的最佳方式吗？甚至可以在这些间隔之间进行搜索吗？我是从错误的方式接近这个吗？任何见解都值得赞赏。

**更新的基础设施**

```
//Tutor Availability
-----------------------------------------------------
  tutorID  |  day   | start_time | end_time  |  PK  | 
-----------------------------------------------------
   27      |  mon   |   0700     |   1200    |  1   |
-----------------------------------------------------
   27      |  fri   |   1400     |   1800    |  2   |
-----------------------------------------------------
   35      |  tue   |   1100     |   1600    |  3   |
//Scheduled tutor sessions
--------------------------------------------------------
  tutorID  |    day    |  start_time | end_time  |  PK |
--------------------------------------------------------
   27      |    mon    |     0800    | 1000      |  1  |
--------------------------------------------------------
   27      |    fri    |     1600    | 1800      |  2  | 
```

因此，有了这个系统，搜索可用时间会简单得多**。**但是，我仍然不知道如何将可用性与预定课程进行比较以确保没有重叠。

```
SELECT tutorID 
FROM tutoravailability WHERE day = 'fri' 
AND start_time <= '1400' 
AND end_time >= '1530' 
```

现在我不明白如何将此查询与`Scheduled tutor sessions`表进行比较以避免重复预订。

**最终更新**

为确保它们与已安排的导师课程不重叠，我将使用 MySQL`BETWEEN`子句搜索开始和结束时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:16:21.093

如果您使用两列存储时间间隔，则使用 sql 查询执行搜索会容易得多。

即tutorID、day、startTime、endTime

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:35:50.617

您可以使用位标志来指示可用性（24 位）和计划时间（24 位）。然后您可以使用 24 位来表示每天的可用时间和预定时间。

在 Tutor Availability 表中，假设“1”代表可用，“0”代表不可用。在 Scheduled 表中，'0' 代表 Scheduled，'1' 代表 Unscheduled。

所以可用区间 0900-1100 可以存储为 POW(2,9) | 战俘(2,10) | 战俘（2,11）；预定的 1000-1200 可以存储为 ^(POW(2,10) | POW(2,12))

然后以下查询可以为您提供辅导老师的可用性 - 周一上午 9 点到 11 点之间可用：

```
SELECT ta.tutorid FROM tutoravailability ta, tutorscheduled ts 
WHERE ta.tutorid = ts.tutorid AND ts.day = 'monday' 
      AND (ta.monday & ts.time & (POW(2,9) | POW(2,10) | POW(2,11))) = (POW(2,9) | POW(2,10) | POW(2,11)) 
```

# java - 从 package swing 导入一个 xml 文件

> ID：14331940
> 
> 赞同：1
> 
> 时间：2013-01-15T06:01:03.470
> 
> 标签：java, xml, swing, inputstream, document

我正在使用此代码`shutdownscheduler.xml`从我的包中导入文件，但出现错误：

```
public static Document handler() throws ParserConfigurationException, SAXException, IOException{
        String s=xmlhandler.class.getResource("shutdownscheduler.xml").toString();
        File newFile=new File(s);
        DocumentBuilderFactory documentbuilderfactory=DocumentBuilderFactory.newInstance();
        DocumentBuilder documentbuilder=documentbuilderfactory.newDocumentBuilder();
        Document document=(Document)documentbuilder.parse(newFile);
        document.getDocumentElement();
        return document;
    }

Exception in thread "main" java.io.FileNotFoundException:
C:\Users\Rohan Kandwal\Documents\NetBeansProjects\Shutdown
Scheduler\file:\C:\Users\Rohan%20Kandwal\Documents\NetBeansProjects\Shutdown%20Scheduler\build\classes\shutdown\scheduler\shutdownscheduler.xml
(The filename, directory name, or volume label syntax is incorrect) 
```

如果我给出文件的直接路径，那么导入工作正常。但是一旦 1 创建项目的 jar 文件并在其他系统上运行，这将导致错误。所以我想要一种只从我的包中导入文件的方法。

文件的正确路径是`C:\Users\Rohan Kandwal\Documents\NetBeansProjects\Shutdown Scheduler\src\shutdown\scheduler\shutdownscheduler.xml`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:25:18.560

尝试`InputStream`代替`File`

```
documentbuilder.parse( xmlhandler.class.getResourceAsStream("shutdownscheduler.xml")); 
```

# reporting-services - Ssrs 报告调度

> ID：14331941
> 
> 赞同：0
> 
> 时间：2013-01-15T06:01:07.413
> 
> 标签：reporting-services

我在 SQL Server 2008 Reporting Services (SSRS) 中有一份报告，我想安排在以前的日期自动运行（这意味着这是一份银行相关报告，交易日期是今天的日期）我希望生成报告每天自动为昨天的日期，即假设交易日期是`15-01-2012`我想发送昨天的交易日期，即`14-01-2013`每天向客户报告。

是否可行，我该怎么做，请解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:32:22.000

这里的几个步骤：

1.  将报告设置为使用默认日期参数，并将默认表达式设置为昨天，例如`=DateAdd(DateInterval.Day, -1, Today())`。
2.  设置报表以根据参数检索其数据集。
3.  通过报表管理器安排报表，并将日期参数设置为使用其默认值，即昨天：

![默认参数](../Images/858a5b61147c5a59ecdf26138bd68dad.png)

如果您以前从未这样做过，请在报表管理器中创建订阅：

[http://msdn.microsoft.com/en-us/library/ms189680.aspx](http://msdn.microsoft.com/en-us/library/ms189680.aspx)

# ios - JSONKit - objectFromJSONData 似乎总是返回 nil

> ID：14331947
> 
> 赞同：0
> 
> 时间：2013-01-15T06:01:23.643
> 
> 标签：ios, objective-c, jsonkit

我不敢相信我什至无法让这个简单的测试存根与 JSONKit 一起工作......

我有一个包含有效 JSON 文档的 json 文件，以及这个简单的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSError *err = nil;
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"dk" ofType:@"json"];
    NSData *jsonData = [NSData dataWithContentsOfFile:filePath options:NSDataReadingMappedIfSafe error:&err];

    NSString *dkk = [[NSString alloc] initWithContentsOfFile:filePath];
    NSLog(@"Found file with contents: \n%@",dkk);

    if(jsonData)
    {
        NSLog(@"Data length is: %d",[jsonData length]);
        id objectReturnedFromJSON = [jsonData objectFromJSONData];
        if(objectReturnedFromJSON)
        {
            if([objectReturnedFromJSON isKindOfClass:[NSDictionary class]])
            {
                NSDictionary * dictionaryFromJSON = (NSDictionary *)objectReturnedFromJSON;
                // ...
            } else {
                NSLog( @"no dictionary from the data returned by the server... check the data to see if it's valid JSON");
            }
        } else {
            NSLog( @"nothing valid returned from the server...");
        }
    } else {
        NSLog( @"no data back from the server");
    }

} 
```

objectFromJSONData 的结果似乎总是返回 null。输出如下所示：

```
2013-01-15 00:58:37.187 JSONTest[38110:c07] Found file with contents: 
myObject = {
    "first": "John",
    "last": "Doe",
    "age": 39,
    "sex": "M",
    "salary": 70000,
    "registered": true,
    "favorites": {
        "color": "Blue",
        "sport": "Soccer",
        "food": "Spaghetti"
    } 
}

2013-01-15 00:58:51.818 JSONTest[38110:c07] Data length is: 196
2013-01-15 00:58:54.058 JSONTest[38110:c07] Data length is: (null)
(lldb) 
```

我到底错过了什么？输入 JSON 是有效的（如 NSLog 语句所示）。

抱歉，如果这很愚蠢，但即使在这个小测试用例上，我也浪费了太多时间，让我觉得我错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:06:25.530

您拥有的 JSON 无效。它没有根元素，并且`myObject`键也没有括在括号内。

# javascript - 两个相互依赖的字段的淘汰赛验证

> ID：14331948
> 
> 赞同：5
> 
> 时间：2013-01-15T06:01:29.313
> 
> 标签：javascript, knockout.js, knockout-validation

考虑以下代码 -

```
var MyObjectModel = function(myObject){
var self = this;
self.myNumber1 = ko.observable(myObject.number1).trimmed();
self.myNumber2 = ko.observable(myObject.number2).trimmed(); 
```

我想扩展 myNumber1 和 myNumber2，以添加淘汰赛验证，这样如果两者都是空的，它就会抛出错误，并且如果其中一个有值则保持正常。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T13:10:11.443

您可以使用 ko.computed 创建一个函数，该函数检查是否至少设置了两个字段中的任何一个，并且 onlyIf 在验证中以有条件地执行验证。

```
var MyObjectModel = function (myObject) {
    var self = this;
    self.myNumber1 = ko.observable(myObject.number1);
    self.myNumber2 = ko.observable(myObject.number2);

    self.numbersHaveNoValue = ko.computed(function () {
        var value1 = self.myNumber1(), value2 = self.myNumber2();
        return !ko.validation.rules.required.validator(value1, true) &&
               !ko.validation.rules.required.validator(value2, true);
    });

    self.myNumber1.extend({ required: { onlyIf: self.numbersHaveNoValue }});
    self.myNumber2.extend({ required: { onlyIf: self.numbersHaveNoValue }});
} 
```

我创建了一个小提琴：http: [//jsfiddle.net/delixfe/aBytt/](http://jsfiddle.net/delixfe/aBytt/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T16:14:59.030

```
var MyObjectModel = function(myObject) {
    var self = this;
    self.myNumber1 = ko.observable(myObject.number1).trimmed();
    self.myNumber2 = ko.observable(myObject.number2).trimmed();

    self.numberCount = ko.computed(function() {
        var count = 0;
        count += self.myNumber1() != '' ? 1 : 0;
        count += self.myNumber2() != '' ? 1 : 0;
        return count;
    }).extend({min:1});
} 
```

# vim - 在我用 vim (macvim) 编辑的文件上运行 perl 脚本

> ID：14331949
> 
> 赞同：0
> 
> 时间：2013-01-15T06:01:31.270
> 
> 标签：vim

我一直在使用 bluefish 来编辑要以 html 发布的文本。Bluefish 有一个外部过滤器功能，它允许我调用我用 perl 编写的脚本来“过滤”我正在编辑的文本并基本上使用正则表达式对其进行格式化。

开始探索 vim 和 macvim 后，我发现该程序非常强大，值得学习。我只是希望能够使用我已经拥有的那些脚本，而不必将它们重写为 vim 插件。在过去的 2 个小时里，我一直在搜索，但答案似乎仅适用于将 perl 作为外部命令运行或将 perl 合并到 vim 脚本中。

明确一点：我想获得 perl 脚本，我已经必须对我目前在 vim/macvim 中编辑的文本采取行动，无论是整个文本还是（更好的）选定的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:08:28.070

您可以使用

```
:%!command 
```

例如

```
:%!sort 
```

对正在编辑的整个文件进行排序。

如果您选择了一个范围，它将自动添加并完成命令

```
:'<,'>!command 
```

# android - 发送电子邮件时未找到处理 Intent 的活动

> ID：14331953
> 
> 赞同：7
> 
> 时间：2013-01-15T06:02:41.517
> 
> 标签：android, email, android-intent

我正在尝试通过电子邮件将通过我的应用程序单击的图片作为附件发送。点击图片，我得到了正确的路径，但应用程序抛出了一个运行时异常......“没有找到处理 Intent 的活动”。我正在我的设备上对此进行测试，并配置了我的 gmail 帐户。我不知道如何解决这个问题。请帮忙。

这是我的代码：

```
public static void sendEmail(Context context, String[] recipientList, String title, String subject, String body) {

Intent intent = new Intent(Intent.ACTION_SENDTO,    Uri.parse("mailto:someone@example.com"));
        intent.setType("plain/text");
        intent.putExtra(android.content.Intent.EXTRA_EMAIL, recipientList);
        intent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
        intent.putExtra(android.content.Intent.EXTRA_TEXT, body);
        intent.putExtra(Intent.EXTRA_STREAM, capturedImageFilePath);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent);

} 
```

这是日志：

```
01-15 11:26:04.455: E/AndroidRuntime(9904): FATAL EXCEPTION: main
01-15 11:26:04.455: E/AndroidRuntime(9904): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.SENDTO typ=plain/text flg=0x10000000 (has extras) }
01-15 11:26:04.455: E/AndroidRuntime(9904):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
01-15 11:26:04.455: E/AndroidRuntime(9904):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
01-15 11:26:04.455: E/AndroidRuntime(9904):     at android.app.ContextImpl.startActivity(ContextImpl.java:852)
01-15 11:26:04.455: E/AndroidRuntime(9904):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:276)
01-15 11:26:04.455: E/AndroidRuntime(9904):     at com.example.attachmail.AttchmentActivity.sendEmail(AttchmentActivity.java:133)
01-15 11:26:04.455: E/AndroidRuntime(9904):     at com.example.attachmail.AttchmentActivity$2.onClick(AttchmentActivity.java:93) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-09T15:18:09.127

我有一个类似的问题，我已经传递了一个函数的参数，该函数有目的地发送电子邮件。但是我注意到我需要使用intent.setData（Uri uri）行，如果电子邮件参数只是电子邮件，那么它需要使用“mailto：”文本示例：

```
intent.setData(Uri.parse("mailto:"+email)); 
```

像这儿：

```
Intent intent = new Intent(Intent.ACTION_SENDTO);
                    intent.setType("message/rfc822");
                    intent.putExtra(Intent.EXTRA_EMAIL, email);
                    intent.setData(Uri.parse("mailto:"+email));
                    intent.putExtra(Intent.EXTRA_SUBJECT, emailSubject);
                    intent.putExtra(Intent.EXTRA_TEXT, emailContent);
                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    intent.addFlags(Intent.FLAG_FROM_BACKGROUND);
                try {

                    startActivity(intent);
                } catch (android.content.ActivityNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.d("Email error:",e.toString());
                } 
```

*如果您在模拟器上进行测试，则可能存在未配置“共享”应用程序的问题，因此请确保在模拟器上进行设置或在实际设备上进行测试。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:21:58.423

将 Intent.ACTION_SENDTO 更改为 Intent.ACTION_SEND。我不想要像蓝牙这样的其他发送选项，这就是我写发送到..但无法让它工作的原因。所以最后把它改成发送，现在它工作得很好。不知道到底是什么问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T06:11:38.643

尝试以下代码发送电子邮件。

```
 Intent sendIntent = new Intent(Intent.ACTION_SEND);

                    sendIntent.setType("message/rfc822");
                    sendIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
                   sendIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse(path));

                   sendIntent.putExtra(Intent.EXTRA_TEXT, body);
                   startActivity(Intent.createChooser(sendIntent, "Email:")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T06:18:26.727

只需从您的代码中删除此行

```
 intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

& 然后再试一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T06:13:16.297

我认为您面临的问题是因为您设置的 MIME 类型是“纯/文本”以及您设置的 FLAG ieFLAG ACTIVITY NEW TASK。

这里有一些可以帮助你的东西。试试[这个](https://stackoverflow.com/questions/9860156/how-to-send-email-with-attachmentimage)链接或[这个](https://stackoverflow.com/questions/2518055/image-attachment-to-a-mail-how-in-android)链接。

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
//        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailSignature);
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, toSenders);
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subjectText);
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, messageText+"\n\n"+emailSignature); 

        emailIntent.setType("image/jpeg");
        File bitmapFile = new File(Environment.getExternalStorageDirectory()+
            "/"+FOLDER_NAME+"/picture.jpg");
        myUri = Uri.fromFile(bitmapFile);
        emailIntent.putExtra(Intent.EXTRA_STREAM, myUri); 
```

# json - 你如何在codeigniter中验证一个json对象？

> ID：14331955
> 
> 赞同：0
> 
> 时间：2013-01-15T06:02:50.237
> 
> 标签：json, codeigniter

```
 var trans = { 
     amount: $('#container input:first-child').val(),
     note: $('#container input:last-child').val()
    };  // javascript

 trans =  {
     "amount":"",
     "note":"",
 }  // json 

$trans = $this->input->post('trans');
$t = json_decode($trans);

$amount = $t->amount;
$note = $t->note;

$this->form_validation->set_rules('amount', 'Amount', 'required'); 
```

错误是

```
 Call to a member function set_rules() on a non-object in...... 
```

你如何验证一个 json 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:22:59.070

尝试`form_validation`在构造函数中加载库

```
function __construct() {
    parent::__construct();
    $this->load->library('form_validation');
} 
```

# css - CSS下拉菜单不保持可见

> ID：14331956
> 
> 赞同：0
> 
> 时间：2013-01-15T06:02:50.867
> 
> 标签：css, drop-down-menu, menu, hover, html-lists

CSS 下拉菜单不会停留`visible`在`mouseover`. 我尝试搜索答案，但到目前为止没有代码有效。这是网址：[http ://delawaresign.com.previewc40.carrierzone.com/about.html](http://delawaresign.com.previewc40.carrierzone.com/about.html)

但这是关键。它在我使用相同的翻转代码创建的另一个 URL 上运行良好！ [http://delawaresign.com.previewc40.carrierzone.com/index-01-14-13.html](http://delawaresign.com.previewc40.carrierzone.com/index-01-14-13.html)

这个我想不通！为什么它会在一个上起作用，而在另一个上不起作用？

它“显示” `visible`，但不“停留” `visible`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:39:07.123

问题是您在菜单项和下拉列表之间有一个空格。将下拉菜单放入其他颜色，您将看到该空间。

最简单的解决方案是删除这个空间来放置列表。尝试将文件更改`top: 2.5em`为`top: 1.5em`其中：`.sf-menu li:hover ul``inside superfish.css`

```
.sf-menu li:hover ul, .sf-menu li.sfHover ul {
    left: 0;
    top: 1.5em;
    z-index: 99;
} 
```

# java - apache axis2 com.ctc.wstx.exc.WstxUnexpectedCharException 错误

> ID：14331959
> 
> 赞同：3
> 
> 时间：2013-01-15T06:03:00.320
> 
> 标签：java, axis2

我使用 apache 处理 Web 服务`axis2`，我从`wsdl`文件中生成了客户端存根代码，当我调用 Web 服务时，我收到了这个错误：

```
org.apache.axis2.AxisFault: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character '"' (code 34) in DOCTYPE declaration; expected a space between public and system identifiers
 at [row,col {unknown-source}]: [1,50]
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:123)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:67)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:354)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.SmsNotificationManagerServiceStub.startSmsNotification(SmsNotificationManagerServiceStub.java:618)
    at org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.Notification.startNotification(Notification.java:118)
    at org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.Notification.main(Notification.java:39)
Caused by: org.apache.axiom.om.OMException: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character '"' (code 34) in DOCTYPE declaration; expected a space between public and system identifiers
 at [row,col {unknown-source}]: [1,50]
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:296)
    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.getSOAPEnvelope(StAXSOAPModelBuilder.java:198)
    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.<init>(StAXSOAPModelBuilder.java:154)
    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.<init>(StAXSOAPModelBuilder.java:140)
    at org.apache.axis2.builder.BuilderUtil.getSOAPBuilder(BuilderUtil.java:686)
    at org.apache.axis2.transport.TransportUtils.createDocumentElement(TransportUtils.java:197)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:145)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:108)
    ... 8 more
Caused by: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character '"' (code 34) in DOCTYPE declaration; expected a space between public and system identifiers
 at [row,col {unknown-source}]: [1,50]I working on a web service using apache axis2, i have generated client stub code from wsdl file how when i call the web service i'm getting this error:
    at com.ctc.wstx.sr.StreamScanner.throwUnexpectedChar(StreamScanner.java:648)
    at com.ctc.wstx.sr.BasicStreamReader.startDTD(BasicStreamReader.java:2482)
    at com.ctc.wstx.sr.BasicStreamReader.nextFromPrologBang(BasicStreamReader.java:2398)
    at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2058)
    at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1069)
    at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.next(XMLStreamReaderWrapper.java:225)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:668)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)
    ... 15 more 
```

知道我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:27:25.700

检查 wsdl 中端点中的地址和端口。

```
<wsdl:port binding="" name="">
  <soap:address location=""/>
</wsdl:port> 
```

再次生成客户端并尝试调用 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T11:53:45.040

您使用的是哪种编码，收到的文本是什么编码？`wstx expects the character to be a valid IsoControl character`建议您在系统中使用 ISO，并且可能会接收 UTF-8 或其他一些不兼容的编码。确保编码匹配，应该没有问题。

# c# - linq中的关键字搜索

> ID：14331960
> 
> 赞同：0
> 
> 时间：2013-01-15T06:03:05.100
> 
> 标签：c#, linq, asp.net-mvc-4

我在视图的表单中有三个字段：

```
[Textfield] : Name  
[Dropdown]  : Sector  
[Dropdown]  : Country 
```

我的要求是通过控制器方法中的这三个关键字过滤结果，并且首先按接收日期然后按名称对结果进行排序。

有很多可能性，例如：如果`Name`匹配和`Sector`匹配进行过滤等。

我可以使用`if else`或使用任何其他繁琐的方式来做到这一点，但是我怎样才能在 LINQ 中在一个语句中做到这一点。我需要返回一个列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:31:30.343

如果您只需要简单的搜索即可发现您的某些列包含指定的字符串，请尝试这样的操作。

```
// dc is some datacontext
var query = dc.MyEntities.Where(x=> x.Name.Contains(inputName) ||
                                    x.Sector.Contains(inputSector) ||
                                    x.Contry.Contains(inputCountry))
                         .OrderBy(x=> x.receivedDate)
                         .ThenBy(x=> x.Name);
var resultList = query.ToList(); 
```

还要检查（设置）数据库的排序规则以执行区分大小写 (CS) 或不区分大小写 (CI) 的搜索 - 根据您的需要。但是，要对 CS 排序规则进行不区分大小写的搜索，您需要将上面的代码扩展为`ToUpper()`.

```
x.Name.ToUpper().Contains.(inputName.ToUpper()); 
```

但请注意，它不会通过[土耳其测试](http://www.codinghorror.com/blog/2008/03/whats-wrong-with-turkey.html):-) - 大写他们的**i**和小写**I**有点奇怪。

这里也是不区分大小写的有趣资源`.Contains(string)`：[不区分大小写的“包含（字符串）”](https://stackoverflow.com/questions/444798/case-insensitive-containsstring)

如果您需要一些复杂的**全文搜索**。我会寻找：

*   [TSQL 全文搜索](http://msdn.microsoft.com/en-us/library/ms142571.aspx)- 但需要一些努力才能使其与 LINQ to SQL 一起使用：[是否可以将全文搜索 (FTS) 与 LINQ 一起使用？](https://stackoverflow.com/questions/224475/is-it-possible-to-use-full-text-search-fts-with-linq)
*   [LUCENE.NET](http://lucene.apache.org/core/)也是全文搜索的好选择。但它没有与 LINQ 集成（但是你可以试试这个项目：[LinqToLucene](http://linqtolucene.codeplex.com/) - 但它目前是 Alpha 版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:17:47.270

看看这个解决方案，看看它是否可以帮助您实现您想要的目标：[使用 linq 搜索关键字](https://stackoverflow.com/a/3294884/803896)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T23:34:41.407

感谢所有回答我问题的人。在下面找到了我正在寻找的答案，并希望它对其他人有所帮助。

[http://blog.tech-cats.com/2008/01/using-optional-parameters-in-sql-server.html](http://blog.tech-cats.com/2008/01/using-optional-parameters-in-sql-server.html)

# ios - 单击文本字段时返回索引路径

> ID：14331961
> 
> 赞同：0
> 
> 时间：2013-01-15T06:03:23.383
> 
> 标签：ios

当应用程序用户单击 UITextfield 以编辑文本时，我想要完成的是以某种方式获取单元格的索引路径。我想/试图使用手势来做到这一点，但不知道该怎么做。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T06:23:31.343

您可以使用 uitextfield 委托方法来获取 uitableview 的单元格

```
- (void)textFieldDidBeginEditing:(UITextField *)textField 
```

然后，通过访问文本字段的父/父视图来访问单元格

```
UIView *cellView = (UIVIew *)[textfield superview];
UITableViewCell *cell = (UITableViewCell *)[cellView superview];
NSIndexPath *indexPath = [self.tableview indexPathForCell:cell]; 
```

希望，这将解决您的问题。

# database - 在 Django 中 AND 查询和更新数据库查询？

> ID：14331964
> 
> 赞同：0
> 
> 时间：2013-01-15T06:03:27.867
> 
> 标签：database, django

我想在 Django 中检索 id=1 和 flag='D' 的数据。我会在 SQL 中将 WHERE 与 AND 一起使用。我怎样才能在 Django 中做到这一点？我试过了：

```
File.objects.filter(user_id=1 AND flag='D') 
```

但它不起作用。

还有一件事，我可以只更新 Django 中数据库的一个字段，即`updating flag='D' to flag='F'`一切都相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:12:33.957

如果要过滤多个记录，请使用“过滤器”，因为它返回一个查询集

```
File.objects.filter(user_id=1, flag='D') 
```

如果您对单个唯一记录感兴趣，请使用“get”，因为它返回单个对象

```
File.objects.get(user_id=1, flat='D') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:27:02.087

```
File.objects.filter(user_id=1, flag='D') 
```

这应该让你得到所有具有 user_id=1 和 flag='D' 的文件

对于更新列，您应该在查询集上使用更新

```
File.objects.filter(user_id=5).update(flag="D") 
```

你也可以做

```
q = File.objects.filter(user_id=1, flag='D') 
```

打印`q.query`查看Django ORM生成的sql

# c# - 如何使三角形网格成凸多边形？

> ID：14331968
> 
> 赞同：4
> 
> 时间：2013-01-15T06:04:06.263
> 
> 标签：c#, geometry, computational-geometry

我有一个三角形网格。三角形有不同的“颜色”。像这样：

![在此处输入图像描述](../Images/92789352625dcfe11faa19710c7310b0.png)

我需要得到的是优化的网格，其中过多的三角形被合并成一个凸多边形。像这样：

![在此处输入图像描述](../Images/ed7692397b68628c6926f5108a4e3674.png)

有人可以给我一些算法的链接来完成吗？提前致谢！

PS我正在使用C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:01:54.330

Hertel-Mehlhorn 算法是执行此操作的标准方法；可以概括为

1.  从多边形 P 的三角剖分开始；
2.  删除一个无关紧要的对角线
3.  重复。

（来自[http://www.philvaz.com/compgeom/](http://www.philvaz.com/compgeom/)）

这在多项式时间内有效，并且具有最优性的界限，尽管它不一定是最优的。

在您的情况下，您将通过不考虑不同颜色的三角形之间的对角线来修改步骤 #2。

通常产生“更好看”的片段的一种启发式方法是在每一步合并最长的对角线。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:04:38.760

我没有任何算法链接来解决这个问题，但我认为比一次将凸多边形构建一个三角形更好的方法可能是首先将三角形合并成最大的简单多边形（即：它们可以是凹的，但没有孔）你可以，然后将这些大多边形分解成它们的凸成分。

由于内角大于 180 度，您知道这些分割将发生在哪些顶点，然后您只需选择要沿其分割的入射边。选择最佳边缘进行分割的精确方法不是一个简单的问题，但合理的启发式方法可能是在分割后最大化 <180 度内角的数量。

# ruby-on-rails - 上传 CSV 文件并解析到数据库（Rails）时传递参数

> ID：14331972
> 
> 赞同：0
> 
> 时间：2013-01-15T06:04:31.543
> 
> 标签：ruby-on-rails, parsing, csv

我正在尝试允许用户将 CSV 文件导入应用程序的数据库。我一直在关注[导入 csv 和 excel](http://railscasts.com/episodes/396-importing-csv-and-excel)的导轨。我不确定如何传入在 excel 或 csv 文件中找不到的参数。

例如，我使用设计进行身份验证，而不是用户必须在上传的文件上输入 user_id，我希望将 user_id 设置为 current_user.id。我怎样才能做到这一点？

我的代码如下：

**模型导入文件的方法**

```
 def self.import(file)
    CSV.foreach(file.path, headers: true) do |row|
      Gear.create! row.to_hash
    end
  end 
```

**控制器动作**

```
 def import
    Gear.import(params[:file])
    redirect_to :back, notice: "Gears Uploaded"
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:31:31.777

一种选择是将用户 ID 传入`import`- 方法，如下所示：

模型：

```
def self.import(file, user_id)
  CSV.foreach(file.path, headers: true) do |row|
    Gear.create! row.to_hash.merge(user_id: user_id)
  end
end 
```

控制器：

```
def import
  Gear.import(params[:file], current_user.id)
  redirect_to :back, notice: "Gears Uploaded"
end 
```

请注意，您将覆盖`user_id`CSV 中现有的 -columns，但如果我理解正确，这是预期的行为。

# mysql - Wordpress 查询/循环复制相同内容 24 次

> ID：14331975
> 
> 赞同：1
> 
> 时间：2013-01-15T06:04:43.253
> 
> 标签：mysql, sql, wordpress, loops

我有一个小的查询问题，也许你可以帮助我。我正在尝试从具有特定评论元的帖子中获取所有评论。这是我到目前为止所拥有的：

```
$comments = $wpdb->get_results("SELECT * FROM $wpdb->comments INNER JOIN wp_commentmeta WHERE comment_post_ID = '256' AND comment_approved = '1' AND meta_key = 'bestcomment' AND meta_value = 'yes' ");  ?>
<ul id="bestcomment">
<h2>Best Comment</h2>
<?php
if ( $comments ) : foreach ( (array) $comments as $comment) :
echo  '<li class="recentcomments">' . sprintf(__('%1$s on %2$s'), get_comment_author_link(), '<a href="'. get_comment_link($comment->comment_ID) . '">' . get_the_title($comment->comment_post_ID) . '</a>') . '</li>';
endforeach; endif;?></ul> 
```

这篇文章应该只有一条评论。不幸的是，查询显示相同的结果 24 次。所以循环肯定有问题。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:10:15.847

循环没有任何问题。问题是您的查询产生`cartesian product`（*CROSS JOIN*），因为您没有指定两个表应该链接的列。

`ON`我能给出的最快答案是在子句上定义链接列，

```
$comments = $wpdb->get_results("
SELECT * 
FROM $wpdb->comments a
      INNER JOIN wp_commentmeta b
         ON a.ColumnName = b.Columnname           <== define here
WHERE comment_post_ID = '256' AND 
      comment_approved = '1' AND 
      meta_key = 'bestcomment' AND 
       meta_value = 'yes' "); 
```

只需更改`ColumnName`为表中列的真实名称。

想了解更多`JOIN`，请看下面的文章，

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# sql - 动态 SQL Server 2008 查询连接

> ID：14331977
> 
> 赞同：2
> 
> 时间：2013-01-15T06:04:54.583
> 
> 标签：sql, dynamic

嗨，我有下表：

```
CREATE TABLE #Test
        (
        ProductID int,
        MainMasterFeatureID int,
        --MasterFeatureValue Varchar(100),
        ChilFeatureName varchar(100),
        ParentFeatureName varchar(100)
    )

    INSERT INTO #Test
    SELECT 40,1,,'Pack','Type' 
    UNION ALL 
    SELECT 40,0,'Laminate','Technology'
    UNION ALL
    SELECT 40,11,'Yes','Coated'
    UNION ALL
    SELECT 52,1,'Roll','Type'
    UNION ALL
    SELECT 52,11,'NO','Coated'

    SELECT * FROM #Test

 CREATE TABLE #tProduct
    (
        tProductID int PRIMARY KEY, 
        tProductCode nvarchar(128), 
        tProductName nvarchar(256)
    )
INSERT INTO #tProduct
SELECT 40,'001','ABC'
UNION ALL
SELECT 52,'002','XYZ'
UNION ALL
SELECT 50,'006','IJK' 
```

`From #test table`我想生成这样的结果：

```
 ProductID          Type             Technology      Coated 

   40               Pack              Laminate          YES 

   52               Roll               Null              No 
```

这里类型、技术、涂层不固定，可以动态生成。

可以这样生成...

```
Declare @sql Varchar(MAX) 
Select @sql  = 'SELECT ProductID, ' 
Select @sql = @sql + STUFF((Select DISTINCT ',MAX(Case When ParentFeatureName = ' + CHAR(39) + ParentFeatureName + CHAR(39) + ' Then ChilFeatureName Else ' + CHAR(39) + CHAR(39) + ' End) As ' + ParentFeatureName From #Test For XML PATH('')),1,1,'') 
Select @sql = @sql + ' FROM #Test Group By ProductID' 
Execute(@sql) 
```

现在我想加入这个动态查询以 `#tProduct`获得所需的结果：

```
 tProductID   tProductName        Type             Technology      Coated 

   40            ABC              Pack              Laminate          YES 

   52            XYZ              Roll               Null              No 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:54:28.207

您可以使用动态数据透视表和动态查询中的联接来执行此操作`#tProduct`

```
declare @SQL nvarchar(max)
declare @FieldList nvarchar(max)

set @FieldList = 
  (
  select distinct ','+quotename(ParentFeatureName)
  from #Test
  for xml path(''), type
  ).value('substring(text()[1], 2)', 'nvarchar(max)')

set @SQL = 
'
select TP.tProductID,
       TP.tProductName,'+
       @FieldList+'
from 
  (
  select ProductID, 
         ParentFeatureName,
         ChilFeatureName
  from #Test
  ) as T
pivot
  (
    max(T.ChilFeatureName) 
    for T.ParentFeatureName in ('+@FieldList+')
  ) as P
inner join #tProduct as TP
  on P.ProductID = TP.tProductID'

exec(@SQL) 
```

[SQL小提琴](http://sqlfiddle.com/#!3/54f33/1/0)

# javascript - 如何使用 javascript 单击 DIV 提交我的表单？

> ID：14331979
> 
> 赞同：0
> 
> 时间：2013-01-15T06:05:06.693
> 
> 标签：javascript

我正在使用以下 HTML：

```
<form action="/User/Account/LogOff" id="logoutForm" method="post">
   <button class="float-left submit-button" title="Logoff">Logoff</button>
</form> 
```

我想将其替换为：

```
<form action="/User/Account/LogOff" id="logoutForm" method="post">
   <div class="button" id="logout" title="Logout">
      <span>Logout</span>
   </div>
</form> 
```

有没有一种方法可以让我点击 div#logout 并将其用作表单的提交？我看到这个链接：

```
<a href="javascript:document.getElementById('logoutForm').submit()">Logout</a> 
```

但是对于像我这样的 DIV，我怎么能做到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:27:19.973

将此添加到您的 DIV 中：

```
 <div class="button" id="logout" onclick="javascript:document.getElementById('logoutForm').submit();" title="Logout"> 
```

编辑1：感谢您指出。

```
 <div class="button" id="logout" onclick="submitForm()" title="Logout"> 
```

Javascript：

```
 function submitForm()
 {
      document.getElementById('logoutForm').submit();
 } 
```

# replication - 如何查看基于行的二进制日志的纯文本格式

> ID：14331981
> 
> 赞同：2
> 
> 时间：2013-01-15T06:05:33.003
> 
> 标签：replication, mysqlbinlog

我有启用了基于行的二进制日志记录的服务器。最近在调试一个问题时，我试图从特定位置查看二进制日志的内容，但它给了我不可读的输出。

```
Is there any way to see the output in plain text format ? 
```

以下是可能需要的详细信息。

```
character_set of client/server/connection/result     latin1
Binlog format                                        ROW based 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:13:57.817

您想使用 mysqlbinlog 实用程序将二进制日志转储为 SQL 格式：

```
mysqlbinlog /path/to/mysql-bin.0000 > /path/to/dump.sql 
```

通常，二进制日志位于`/var/lib/mysql`

# objective-c - IOS 6 设置应用中推特原生应用登录成功后用户应用如何进入前台？

> ID：14331984
> 
> 赞同：1
> 
> 时间：2013-01-15T06:05:52.410
> 
> 标签：objective-c

我已经在 IOS 6 的我的应用程序中集成了 Twitter。

我的工作代码在这里

```
-(IBAction)uploadPhotoToTwitter
{

  //IOS 6 Twitter Integration

  SLComposeViewController *composeController = [SLComposeViewController                                             composeViewControllerForServiceType:SLServiceTypeTwitter];
  [composeController setInitialText:@"ios 6 TESTING"];

  [composeController addImage:[UIImage imageNamed:@"cat.jpg"]];

  [composeController setCompletionHandler:^(SLComposeViewControllerResult result) {
    NSString *output;

    switch (result) 
    {
        case SLComposeViewControllerResultCancelled:
            output = @"Tweet cancelled.";
            break;
        case SLComposeViewControllerResultDone:
            output = @"Tweet done. ios 6";
             break;
        default:
            break;
    }
    [self dismissViewControllerAnimated:YES completion:nil];
  }];
  [self presentViewController:composeController animated:YES completion:nil];
} 
```

当我单击`uploadToTwitter`Button.It 显示 Twitter 帖子页面并将图像 url 发送到 Twitter。很好它的工作。

现在我的问题是如果单击 uploadToTwitter 按钮并且在此之前我还没有登录然后它显示

![在此处输入图像描述](../Images/f6bb81779216e81ac8d2a8e0c272e858.png)

当我单击设置时，它会转到设置页面的 Twitter 应用程序。然后我登录到Twitter。到目前为止没有问题。登录成功。然后问题是成功登录后，它仍然在Twitter App Page中。没有回到原始应用程序并且我的原始应用程序仍在后台。如何我原来的应用程序会以编程方式进入前台吗？

# php - cookie 未注册

> ID：14331986
> 
> 赞同：1
> 
> 时间：2013-01-15T06:05:55.040
> 
> 标签：php

我有一个登录页面，要求用户登录详细信息将其发送到 cookie，然后验证详细信息，但由于某种原因它不允许我登录。如果我在我的计算机上安装的 abyss 网络服务器上本地测试它，它工作正常但如果我在我的托管服务器上对其进行测试，它在这里不起作用是我的代码：

一旦选择登录页面，它就会像这样工作，它会询问详细信息然后会发生什么然后如果用户没有被激活它会要求激活用户如果用户被激活，登录就可以工作，但只要用户不是它就可以不要继续超过激活请求。

登录问：

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>?cont=true&loginUSER=true" style="font-family:Calibri;">
<fieldset style="border-style:none">
        <p>
        Email: <input style="position:absolute; left:30%;" onkeyup="javascript: this.value=this.value.toLowerCase();" class="details" type="text" name="email" id="email" />
        </p>
        <p>
        Password: <input style="position:absolute; left:30%;" class="details" type="password" name="password" id="password" />
        </p>
        <input type="submit" value="login" class="btn" style="background-color:#FFF;    border-style:solid; border-width:thin;  font-family:Calibri;" />
        </fieldset>
        </form> 
```

如果不存在cookie，它首先检查登录，然后如果存在cookie

```
//A new login first create cookies and check if they are valid
        if(!isset($_COOKIE["thebillboard"]))
        {
            //Don't allow user to login if this is not true;        
            $thisIsValid = false;
            //set cookies for login details entered!
            $email = $_POST["email"];
            $pass = $_POST["password"];

            setcookie("thebillboard",$email,time()+3600);
            setcookie("password",$pass,time()+3600);

            //check if the login details exists
            $clients = mysql_query("SELECT * FROM clients");
            while($row = mysql_fetch_array($clients))
            {
                if(($row["businessEmail"] == $email) && ($row["password"]) == $pass)
                {
                    $thisIsValid = true;
                    break;
                }
            }
        }
        //If the cookies exists check if they are valid
        elseif(isset($_COOKIE["thebillboard"]))
        {
            //Don't allow user to login if this is not true;        
            $thisIsValid = false;
            //get cookies for login if it exists!
            $email = $_COOKIE["thebillboard"];
            $pass = $_COOKIE["password"];

            //check if the login details exists
            $thisIsValid = false;
            $clients = mysql_query("SELECT * FROM clients");
            while($row = mysql_fetch_array($clients))
            {
                if(($row["businessEmail"] == $email) && ($row["password"] == $pass))
                {
                    $thisIsValid = true;
                    break;
                }
            } 
```

然后如果变量 $thisIsValid 为真，它会继续并显示登录用户，否则它会在登录详细信息中返回错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:12:38.043

如果使用 Chrome，您可以安装此插件，它将帮助您查看与活动站点关联的 cookie：[https ://chrome.google.com/webstore/detail/edit-this-cookie/fngmhnnpilhplaeedifhccceomclgfbg?hl=en](https://chrome.google.com/webstore/detail/edit-this-cookie/fngmhnnpilhplaeedifhccceomclgfbg?hl=en)

从这里您应该能够推断出出了什么问题（如果它与 cookie 相关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:18:40.150

您可以在没有插件的情况下调试您的 cookie。在脚本的末尾，将标头重定向到空页面。

```
header("Location: /debug.php"); 
```

在那里，在 degub.php 中，只需执行 print_r($_COOKIE) 并查看包含的内容。

注意：我并不关心此重定向中可能出现的错误标头 - 它仅用于调试目的，因此请不要对此发表评论。

# codeigniter - 在codeigniter中加密密码的最佳方法是什么

> ID：14331991
> 
> 赞同：-3
> 
> 时间：2013-01-15T06:06:44.480
> 
> 标签：codeigniter, encryption

谁能帮我找到codeigniter的最佳加密方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:58:13.260

hi you can use md5 php function to encryt password string while login you have to check hash of string with hash saved in database there is one good post for password encryption you can read that

[stackoverflow post](https://stackoverflow.com/questions/10329999/php-encrypting-passwords)

here are two good libraries for creating encrypted password

[PHP Password library](https://github.com/ircmaxell/PHP-PasswordLib)

[PHPass](http://www.openwall.com/phpass/)

codeigniter auth library like tank auth using PHPass for encrypting password

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:03:58.990

In few months a new php password API will be available.

[https://gist.github.com/3707231](https://gist.github.com/3707231)

Its greatest advantage is that it hugely simplifies existing hashing APIs while still maintaining a high level of security.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T11:19:19.163

我通常使用带有一些静态盐的 SHA1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:03:47.880

使用来自 github 的 password_compat。

实现了新的 PHP 5.5 密码逻辑，但您现在可以将它用于旧的 PHP 版本

链接：[GITHUB PASSWORD_COMPAT](https://github.com/ircmaxell/password_compat)

# jquery - 我可以使用 $.mobile.loadPage() 一次加载我所有的 jQuery Mobile 页面吗？

> ID：14331992
> 
> 赞同：0
> 
> 时间：2013-01-15T06:06:56.517
> 
> 标签：jquery, dom, jquery-mobile, load

我想一次将每个页面加载到 DOM 中。我可以这样做吗？我用`$.mobile.loadPage()`吗？在我的 script.js 文件中，我是否写了这样的内容：

```
$('#YesNoMaybePage, #categorizePage').load("#YesNoMaybePage, #categorizePage"); 
```

？？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:19:52.823

如果您仍然真的想一次加载所有“页面”，您可以将它们全部放在一个文件中，并将每个“页面”放在它自己的 div 中。然后，您将隐藏所有“页面”的 div，但当前显示的页面除外。

就实际加载页面而言，是的，您可以按照您的建议进行操作，只要您将第二个参数更改为文件名并按照 Jai 的建议分隔加载：

```
$('#YesNoMaybePage').load("YesNoMaybePage.html");
$('#categorizePage').load("categorizePage.html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:20:28.350

是的，这样做：

```
$('#YesNoMaybePage').load("YesNoMaybePage.html");
$('#categorizePage').load("categorizePage.html"); 
```

这样您就可以同时加载页面。

# objective-c - 嗅探和修改来自 UIWebViewController 的 URL 请求

> ID：14331993
> 
> 赞同：2
> 
> 时间：2013-01-15T06:06:58.910
> 
> 标签：objective-c, uiwebview

我在 UiWebViewController 中打开了一个带有 cordova 的 html 页面。在 Uiwebviewcontroller 中加载 index.html 时，我们可以嗅探来自 index.html 的请求吗？

例如，我在 UiWebviewcontroller 中打开了以下 html：

```
<html>
<head>
   <link rel="stylesheet" type="text/css" href="theme.css">
    <script src="app.js"></script>
</head>
<body>
   <img src="img.jpg"/>
</body>
</html> 
```

我可以嗅探和修改 Uiwebviewcontroller 中请求的 url，即。使用 Objective-C 将 img.jpg、theme.css、app.js 转换为 content/img.jpg、css/theme.css、js/app.js 之类的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:42:42.943

是的，这是可能的`NSURLProtocol`，请参阅[NSHipster 的这篇博文](http://nshipster.com/nsurlprotocol/)和[相关的 Stack Overflow 线程](https://stackoverflow.com/questions/5572258/ios-webview-remote-html-with-local-image-files)。

# windows-phone-7 - Windows phone 中的 UriKind 在页面之间导航

> ID：14331995
> 
> 赞同：4
> 
> 时间：2013-01-15T06:07:20.053
> 
> 标签：windows-phone-7, xaml, windows-phone, windows-phone-8, navigationservice

我是一名 Windows Phone 开发人员。我使用 NavigationService 类导航到不同的页面。在此我们使用 UriKind 属性。这个属性实际上是什么意思？..我用谷歌搜索了它，但没有得到明确的答案。

在 msdn 中，它们提供为
RelativeOrAbsolute ：Uri 的类型是不确定的。
绝对的：Uri 是一个绝对的 Uri。
相对的：Uri 是一个相对的 Uri。

但是我还不明白..有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:29:37.433

基本上 Uri 将用于从指定路径获取信息。UriKind 将决定补丁是绝对的还是相对的。

**相对 Uri** : - 此 Uri 不会包含有关文件路径的详细信息。

```
/Images/Nature.png 
```

**Absolute Uri** : - 此 Uri 将提供有关来自脚本身的文件路径的详细信息。

```
D:/Projects/TestingApplication/Images/Nature.png 
```

**相对或绝对**：-此 Uri 可能是相对或绝对的，这意味着不确定

# php - 简单的 PHP 注销功能，直到我离开页面才起作用

> ID：14331996
> 
> 赞同：0
> 
> 时间：2013-01-15T06:07:26.400
> 
> 标签：php, cookies, session-cookies, logout

我正在尝试实现一个简单的 PHP 注销脚本。我有下面的代码。登录并单击重定向到注销脚本的链接时，它似乎没有意识到我已注销并且仍然显示相同的信息。但是，一旦我关闭选项卡并重新打开它，它就不再向我显示相同的信息。有任何想法吗？

```
session_start();
session_destroy();
unset($_COOKIE['cookie_name']);
setcookie("cookie_name", "", time()-3600);
header("Location: http://mydomain.com/");
exit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:23:24.493

您的代码很完美，但如果您遇到问题，请在设置 cookie 时使用此代码。

```
setcookie("cookie_name", "", time()+3600,"/", "mydomain.com", 1);

session_destroy();
unset($_COOKIE['cookie_name']);
setcookie("cookie_name", "", time()-3600,"/", "mydomain.com", 1);

header("Location: http://mydomain.com/");
exit(); 
```

您是否同时使用会话和 cookie？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:32:51.550

如果您对 cookie 不满意，

使用中的代码`http://mydomain.com/`

```
session_start();
$_SESSION['uname']=$username;
echo $_SESSION['uname']; 
```

在注销中使用它

```
session_start();
session_destroy();
header("Location: http://mydomain.com/"); 
```

反而。